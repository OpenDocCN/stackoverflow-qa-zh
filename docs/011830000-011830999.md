# StackOverflow 问答 11830000-11830999

# c# - 将自定义字体样式添加到 WinCE

> ID：11830003
> 
> 赞同：0
> 
> 时间：2012-08-06T14:11:58.900
> 
> 标签：c#, winforms, mobile, windows-ce

经过一番研究，我仍然无法为我的 VS2008 WinCE6.0 项目添加自定义字体样式。这可能吗？我怎么能做到这一点？

提前致谢。

# ant - 获取包含子目录的根目录的直接子目录

> ID：11830006
> 
> 赞同：1
> 
> 时间：2012-08-06T14:12:05.330
> 
> 标签：ant

我有以下目录结构

*   根目录

    *   固定目录
    *   随机目录
        *   子目录1
        *   子目录2
            *   子目录2.1
        *   子目录3
            *   子目录3.1
            *   子目录3.2

在 ANT 构建文件中，我知道`root_dir`、`fixed_dir`和一个目录，它是( )`random_dir`下面的子目录或子目录。我需要确定给定一些的路径。是否可以在 ANT 中找到该目录，如果可以，如何找到？`random_dir``subdirX``random_dir``subdirX`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T18:53:04.913

`subdirX`这是一个经过测试的解决方案，用于在给定问题中提供的文件结构的情况下查找包含任何嵌套级别的 某些子目录的根目录的直接子目录。

```
<property name="root.dir" location="${basedir}/root_dir" />
<property name="subdirX" value="subdir2.1" />

<target name="find-immediate-subdir-of-root-containing-subdirX">
  <dirset dir="${root.dir}" includes="**/${subdirX}" id="mydirset" />
  <pathconvert property="random_dir" pathsep="${line.separator}" refid="mydirset">
    <mapper type="regexp"
        from="^(${root.dir}${file.separator}[^${file.separator}]+).*"
        to="\1"/>
  </pathconvert>
  <echo message="${random_dir}" />
</target> 
```

## 输出

```
find-immediate-subdir-of-root-containing-subdirX:
     [echo] /ant/project/basedir/root_dir/random_dir

BUILD SUCCESSFUL
Total time: 1 second 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T17:51:43.263

使用[Ant 插件 Flaka](http://code.google.com/p/flaka/)，您将获得作为文件对象的属性的父级（参见[Flaka 手册](http://workbench.haefelinger.it/flaka/download/manual/flaka-1.2.2.html)，第 3.7.2 节，即

```
<project xmlns:fl="antlib:it.haefelinger.flaka">

<!-- let standard ant tasks, i.e. echo
     understand EL expresssions -->
<fl:install-property-handler />

<echo>#{file('${basedir}').parent}</echo>

<!-- or without fl:install-property-handler use fl:echo-->
<fl:echo>#{file('${basedir}').parent}</fl:echo>

</project> 
```

所以你会使用：

```
#{file('${yoursubdir}').parent 
```

# python - 如何使用 2 个变量检查 dict.has_key(k,x)

> ID：11830007
> 
> 赞同：5
> 
> 时间：2012-08-06T14:12:14.743
> 
> 标签：python, variables, dictionary, key

我已经形成了一个字典，其中有 2 个键分配给单个字典值，例如：

```
my_dict[x, y] = ...
my_dict[a, u] = ... 
```

现在我将如何使用`has_key()`2 个关键变量 x 和 y 的方法，如下所示：

```
if my_dict.has_key(x,y) == True:
    Do Something
else:
    Do something else 
```

d 是一个矩阵，它使用我从变量 f 和 g 调用的 pdict 值，但您只需要知道它们是变量名 x,y 用作 pdict 中的键值。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-06T14:16:24.923

由于`dict.has_key()`现在已被弃用很长时间，您应该改用`in`运算符：

```
if (x, y) in my_dict:
    # whatever 
```

Note that your dictionary does not have "two keys". It probably uses a `tuple` of two elements as a key, but that tuple is a single object.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-06T14:14:57.853

如果您使用序列作为键，如下所示：

```
d[1,2] = 3 
```

键被隐式转换为元组。在需要单个参数的函数调用中，您需要显式指定元组：

```
d.has_key((1,2)) 
```

# perl - Perl：无法执行

> ID：11830010
> 
> 赞同：2
> 
> 时间：2012-08-06T14:12:27.193
> 
> 标签：perl, exec, fork

我正在尝试在不同平台上并行运行几个子进程。只有在所有子进程在各自平台上完成后，父进程才能继续进行。

问题是当我使用 fork 然后在子进程中运行“exec”命令时，它几乎立即结束。此外，输出不一致。几乎每次日志都只显示一行。

```
-bash-2.05b$ cat Agent.SOLSPARC
caught SIGTERM signal, cleaning up 
```

或者

```
-bash-2.05b$ cat Agent.SOLSPARC
Host: EBSO9SPC  Login: esm2 
```

有时，很少有多余的行，最后是消息，“*被信号 15 杀死”*。我在“exec”中使用的命令实际上调​​用了一个脚本，该脚本连接到远程盒子并在它们上运行 make 命令。出于测试目的，我目前只通过一个平台，即 SOLSPARC。另外，我只对知道命令是否在任何给定平台上完成感兴趣。

我不确定我是否正确地将所有参数传递给'exec'，所以我尝试了不同的组合（在引用了互联网上的不同链接之后）但无济于事。一个重要的观察结果是，当我使用 strace 调试此问题时，该命令运行良好。我在 perldoc 中看到 exec 在 Unix 平台上使用*/bin/sh -c*，但在其他平台上有所不同。是 exec 和 strace 使用不同的外壳吗？

这是我的代码的相关部分：

```
sub compile {
    my %child_pids;
    foreach $plat (0 .. $#plat_list) {
        my $pid = fork;
        # Didn't check the undef condition for child
        if ($plat_list[$plat] eq "SOLSPARC") {
            print "\nStarted Solaris build \n";
            if ($pid == 0) {
                print "Inside Child Process \n\n";
                exec ( "${ROOT}/${REM_EXEC} -t 1200 -c \"make LANG=en_US distclean \" -b ${ROOT} -l Agent. $plat_list[$plat]" ) or die "exec failed";
            } elsif ($pid > 0) {
                $child_pids{"SOLSPARC"} = $pid;
            }
        } else {
           print "\nStarted build for other platforms \n";
           if ($pid == 0) {
                print "Inside Child Process \n\n";
                exec ( "${ROOT}/${REM_EXEC} -t 1200 -c \"make LANG=en_GB clean \" -b ${ROOT} -l Agent. $plat_list[$plat]" ) or die "exec failed";     
           } elsif ($pid > 0) {
                $child_pids{"$plat_list[$plat]"} = $pid;
           }
        }
    }

    my %rev_child_pids = reverse %child_pids;
    while ((my $kid = waitpid -1, WNOHANG) > 0) {
        if ($rev_child_pids{$kid} eq "SOLSPARC") {
            print "\nChild process completed for SOLARIS platform $rev_child_pids{$kid} \n";
            print "Run some other command here \n";
        } else {
            print "\nChild process completed for other platform $rev_child_pids{$kid} \n";
            print "No more commands to run \n";
        }
    }
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T17:43:50.710

尝试使用“系统”而不是“执行”。

```
system `${ROOT}/${REM_EXEC} -t 1200 -c "make LANG=en_US distclean " -b ${ROOT} -l Agent. $plat_list[$plat]` 
```

'system' 与 fork 的工作方式略有不同，因此它可能会解决问题。

# nlp - 自动关键字生成评估

> ID：11830013
> 
> 赞同：3
> 
> 时间：2012-08-06T14:12:37.250
> 
> 标签：nlp, text-mining

我有一个简单的文本分析器，可以为给定的输入文本生成关键字。到目前为止，我一直在对其进行手动评估，即手动选择文本的关键字并将它们与分析器生成的关键字进行比较。

有什么方法可以让我自动化吗？我尝试在谷歌上搜索一些免费的关键字生成器，这些生成器可以帮助进行此评估，但到目前为止还没有找到。我将不胜感激有关如何解决此问题的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T23:50:16.363

测试关键字生成是一个难题。过去，我使用以下方法对其进行评估。

1.  确定流行的关联规则生成方法，例如 Confidence、Jaccard、Lift、Chi-Squared、Mutual Information 等。有很多论文比较了这些方法。

2.  实施这些措施相当简单。它们都涉及一些使用术语频率、文档频率和共现频率中的一个或多个的简单代数表达式。

3.  使用所有这些度量生成相关关键字并计算它们的并集。将此集合称为 TOTAL。

4.  计算算法生成的关键字与上述 TOTAL 集的交集。当被视为分数（交集/总计）时，它是衡量您的衡量标准有多强大的粗略指标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-06T05:36:00.080

我找到了一个自动关键字生成评估工具 Text Mechanic's [Keyword Suggestion Generator](http://textmechanic.co/Keyword-Suggestion-Generator.html)，它可能会有所帮助。

它说：

> Text Mechanic 的“关键字建议生成器”将以易于研究的格式为您输入的种子文本检索 Google.com 自动建议结果*。种子文本可以是字母、数字、单词、短语，与您（和其他人）在 Google 搜索结果中查询的内容相关。

我相信它可以自动化。

# javascript - 等待通过 ashx 处理程序在浏览器中加载 pdf 的图标

> ID：11830015
> 
> 赞同：0
> 
> 时间：2012-08-06T14:12:40.773
> 
> 标签：javascript, pdf, busy-waiting

处理来自 ashx 处理程序调用的 pdf 响应。我在 C# 4.0 中有一个通用的 ashx 处理程序，它为我创建了一个 pdf。我通过构建发送到处理程序的 url 从浏览器中的 javascript 调用此处理程序。所以我最后一次获得pdf的电话是这样的：

```
 window.open(_url, '_self', false); 
```

我遇到的问题是，我只能旋转 gif 来告诉用户 pdf 正在烹饪并且很快就会准备好。我只是没有一个接入点，我可以说“报告正在工作，稍等片刻”。因为当那个电话回来时，它会尝试打开 pdf - 在我的浏览器中，它会显示要求您打开或保存 pdf 的框。

是否有另一种方法可以进行此调用，以便当 pdf 文档返回时，我可以执行一些代码以使 spinny 消失？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T14:22:23.277

您是在同一个窗口还是在新窗口中打开 PDF？如果是一个新窗口，快速简单的方法是将您的链接转到“正在加载，请稍候...”页面，然后重定向到 ashx 页面。“正在加载，请稍候”将一直停留在屏幕上，直到其他页面准备好呈现。或者您可以让 ashx 文件首先呈现“请稍候消息”，然后擦除响应并在完成后呈现 PDF（更棘手）。如果在同一页面上，您可以使用一些简单的 jquery/javascript 来调用一个函数，该函数会弹出一个带有“正在加载请稍候..”的新层，用户会看到该层，直到页面被重定向到呈现的 PDF。

希望这可以帮助

# generics - C++/CLI 中的泛型类型定义

> ID：11830017
> 
> 赞同：1
> 
> 时间：2012-08-06T14:12:46.770
> 
> 标签：generics, c++-cli

在 C# 中可以编写

```
typeof(IInterface<>). 
```

C++/CLI 中有类似的东西吗？

```
ISYMessageDispatcher<>::typeid 
```

无法编译，因为编译器崩溃。

![在此处输入图像描述](../Images/4bcb10a5a522cf93246efe7c67e8a854.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T15:21:27.797

当我测试它时（使用 Visual Studio 2010 SP1），这不会使编译器崩溃，它只是一个语法错误。

```
#using <System.dll>

int main(void)
{
    System::Console::WriteLine( (System::Collections::Generic::List<>::typeid)->ToString() );
    return 0;
} 
```

尝试编译给出：

```
Microsoft (R) C/C++ Optimizing Compiler Version 16.00.40219.01
for Microsoft (R) .NET Framework version 4.00.30319.269
Copyright (C) Microsoft Corporation.  All rights reserved.

generictypeid.cpp
generictypeid.cpp(5) : error C2976: 'System::Collections::Generic::List' : too few generic arguments
        c:\windows\microsoft.net\framework\v4.0.30319\mscorlib.dll : see declaration of 'System::Collections::Generic::List' 
```

有关解决方法，请参阅[我对相关问题的回答“如何在 C++/CLI 中检查泛型类型？”](https://stackoverflow.com/a/6389266/103167)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-20T12:24:55.327

以下对我有用：

```
auto x = gcnew Generic::List<bool>;
if (x->GetType()->GetGenericTypeDefinition() == Generic::List::typeid)
{
   System::Console::WriteLine("The generic type is " + Generic::List::typeid); // or x->GetType::GetGenericTypeDefinition()
   System::Console::WriteLine("The specific type is " + Generic::List<bool>::typeid); // or x->GetType()
} 
```

这会产生输出

> 泛型类型是 System.Collections.Generic.List`1[T]
> 
> 具体类型为 System.Collections.Generic.List`1[System.Boolean]

# google-maps - GWT + 谷歌地图 API v3

> ID：11830019
> 
> 赞同：9
> 
> 时间：2012-08-06T14:12:47.753
> 
> 标签：google-maps, gwt, google-maps-api-3

我需要在我的 GWT 项目中调用 Google Maps API v3，更具体地说是 Google-Maps 和 DirectionServices 等地点的自动完成功能。

我们已经尝试了 2 种方法来获得 v3 访问权限，但没有一个是令人满意的：

1.  [使用 GWT SuggestionBox Widget + Geocoder 建议](https://stackoverflow.com/questions/8479603/suggest-addresses-in-a-suggestbox-in-gwt-java)。这个解决方案非常缓慢，甚至更糟糕的是，您可以对建议的 Places 施加的限制只是国家代码（例如“uk”），更糟糕的是，它似乎不起作用。

2.  [用于 GWT 的 Google Maps API v3 Wrapper 由 branflake2267 完成](https://github.com/branflake2267/GWT-Maps-V3-Api)。包装器和已经存在的（较旧的）GWT Google Maps API 库之间似乎存在冲突。当尝试从项目中删除 Google GWT-maps-api 时，必须进行重大更改，因为 API 的结构似乎不同（某些类不在 Wrapper 中）。

有人可能有类似的问题和解决方案吗？如何让 Google Maps V3 API 在我的 GWT 项目中工作？

非常感谢你们对此的任何帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-06T19:24:45.060

可以在[此处](http://code.google.com/p/gwt-google-apis/downloads/detail?name=gwt-maps-3.8.0-pre1.zip)找到 Google 支持的 Maps v3 官方端口，但仍处于预发布阶段。

有关更多信息，请查看此[错误](http://code.google.com/p/gwt-google-apis/issues/detail?id=381)的评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-16T18:50:51.323

使用 Maps v3 时要非常小心，它在与最新的 GWT 版本一起使用时会出现一些严重的问题。它似乎没有使用 Overlays 并使用 ArrayHelper 所有这些都会导致 GWT 2.1 及更高版本出现问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-20T13:22:49.303

我对 GWT 2.8 上的 branflake API 很幸运。但是，它多年没有更新，仍然使用 API 版本 3.10。不幸的是，我将不得不为此而努力维护我自己的版本，或者在某个时候找到替代方案。

就目前而言，它仍然是一个非常有用的解决方案。

[https://mvnrepository.com/artifact/com.github.branflake2267/gwt-maps-api](https://mvnrepository.com/artifact/com.github.branflake2267/gwt-maps-api)

# java - 如何在 ArrayList 视图上调用 notifyDataSetChanged()？

> ID：11830023
> 
> 赞同：0
> 
> 时间：2012-08-06T14:13:09.633
> 
> 标签：java, android, android-listview, android-arrayadapter

这是更新和保存后作为结果页面打开的 ArrayList 页面。我想我需要以某种方式刷新，以便它反映 UI 上的更改。我试图调用 notifyDataSetChanged() 但我的经验水平不走运。有人可以请展示如何实现它吗？

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.all_requests);

    requestsList = new ArrayList<HashMap<String, String>>();

    new LoadAllRequests().execute();

    ListView list = getListView();

    list.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {

            String request_id = ((TextView) view.findViewById(R.id.request_id)).getText().toString();

            Intent in = new Intent(getApplicationContext(),
                    ViewRequestActivity.class);

            in.putExtra(TAG_ID, request_id);

            startActivityForResult(in, 100);
        }
    });

}

// Response from ViewRequestActivity when delete a request reload this page again

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    // if result code 100
    if (resultCode == 100) {            
        Intent intent = getIntent();
        finish();
        startActivity(intent);
    }

}

class LoadAllRequests extends AsyncTask<String, String, String> {

    protected String doInBackground(String... args) {

        List<NameValuePair> params = new ArrayList<NameValuePair>();

        JSONObject json = jParser.makeHttpRequest(url_all_requests, "GET", params);

        Log.d("All Requests: ", json.toString());

        try {

            int success = json.getInt(TAG_SUCCESS);

            if (success == 1) {

                requests = json.getJSONArray(TAG_REQUESTS);

                for (int i = 0; i < requests.length(); i++) {
                    JSONObject c = requests.getJSONObject(i);

                    String request_id = c.getString(TAG_ID);
                    String request_title = c.getString(TAG_TITLE);

                    HashMap<String, String> map = new HashMap<String, String>();

                    // adding each child node to HashMap key => value
                    map.put(TAG_ID, request_id);
                    map.put(TAG_TITLE, request_title);

                    requestsList.add(map);
                }
            } else {

                Intent i = new Intent(getApplicationContext(),
                        NewRequestActivity.class);

                i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(i);
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

        return null;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T14:32:02.483

您需要为您的 ListView 创建一个适配器。适配器是将数据提供给它以进行显示。我建议您阅读本教程：

[http://www.vogella.com/articles/AndroidListView/article.html](http://www.vogella.com/articles/AndroidListView/article.html)

所以一旦你创建了你的适配器然后被调用`lv.setAdapter(<adapter>)`，你就可以调用`<adapter>.notifyDataSetChanged()`. 这将告诉适配器它需要刷新自己。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T14:23:04.053

您可以为您的适配器使用 notifyDataSetChanged() 方法。无论您想更新您的列表视图，您都可以通过以下方式使用。

```
 adapter.notifyDataSetChanged(); 
```

# android - 运行 Android 应用程序的持续问题

> ID：11830024
> 
> 赞同：2
> 
> 时间：2012-08-06T14:13:14.100
> 
> 标签：android

我一直在使用 android 应用程序时遇到困难。我正在使用 Eclipse，V 4.2.0，并运行 API 版本 7。下面是我遇到困难的一个程序的 LogCat 输出。这是我的代码：

显现

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.deadEddie.counter"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="7"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.LAUNCHER"/>
        </intent-filter>
    </activity>
</application>

</manifest> 
```

布局（activity_main.xml）

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent" 
android:background="#000000">

<TextView

    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:textColor="@string/color"
    android:textSize="30dp"
    android:text="@string/text"
    android:textStyle="bold"
    android:gravity="center"
    android:id="@+id/tvDisplay"

    />

 <Button
    android:id="@+id/btnAdd"
    android:layout_width="250dp"
    android:layout_height="wrap_content"
    android:text="@string/btn1Title"
    android:layout_gravity="center" 
    />

  <Button
    android:id="@+id/btnSubtract"
    android:layout_width="250dp"
    android:layout_height="wrap_content"
    android:text="@string/btn2Title"
    android:layout_gravity="center"
    />

</LinearLayout> 
```

MainActivity.java

```
package com.deadEddie.counter;

import android.os.Bundle;
import android.app.Activity;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class MainActivity extends Activity 
{
int counter;
Button add;
Button subtract;
TextView display;

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    counter = 0;
    add = (Button) findViewById(R.id.btnAdd);
    subtract = (Button) findViewById(R.id.btnSubtract);
    display = (TextView) findViewById(R.id.tvDisplay);

    add.setOnClickListener(new View.OnClickListener() 
    {

        @Override
        public void onClick(View v) 
        {
            // TODO Auto-generated method stub
            counter ++;
            display.setText("Counter = " + counter);

        }
    });
    subtract.setOnClickListener(new View.OnClickListener() 
    {

        @Override
        public void onClick(View v) 
        {
            // TODO Auto-generated method stub
            counter --;
            display.setText("Counter = "+ counter);
        }
    });

}
} 
```

LogCat 输出：

```
08-06 13:23:37.538: E/vold(26): Error opening switch name path '/sys/class/switch/test' (No such file or directory)
08-06 13:23:37.538: E/vold(26): Error bootstrapping switch '/sys/class/switch/test' (No such file or directory)
08-06 13:23:37.538: E/vold(26): Error opening switch name path '/sys/class/switch/test2' (No such file or directory)
08-06 13:23:37.538: E/vold(26): Error bootstrapping switch '/sys/class/switch/test2' (No such file or directory)
08-06 13:23:46.518: E/BatteryService(51): usbOnlinePath not found
08-06 13:23:46.518: E/BatteryService(51): batteryVoltagePath not found
08-06 13:23:46.518: E/BatteryService(51): batteryTemperaturePath not found
08-06 13:23:46.528: E/SurfaceFlinger(51): Couldn't open /sys/power/wait_for_fb_sleep or /sys/power/wait_for_fb_wake
08-06 13:23:49.848: E/EventHub(51): could not get driver version for /dev/input/mouse0, Not a typewriter
08-06 13:23:49.848: E/EventHub(51): could not get driver version for /dev/input/mice, Not a typewriter
08-06 13:23:50.638: E/System(51): Failure starting core service
08-06 13:23:50.638: E/System(51): java.lang.SecurityException
08-06 13:23:50.638: E/System(51):   at android.os.BinderProxy.transact(Native Method)
08-06 13:23:50.638: E/System(51):   at     android.os.ServiceManagerProxy.addService(ServiceManagerNative.java:146)
08-06 13:23:50.638: E/System(51):   at android.os.ServiceManager.addService(ServiceManager.java:72)
08-06 13:23:50.638: E/System(51):   at com.android.server.ServerThread.run(SystemServer.java:176)
08-06 13:23:50.638: E/AndroidRuntime(51): Crash logging skipped, no checkin service
08-06 13:23:56.035: E/ActivityThread(95): Failed to find provider info for android.server.checkin
08-06 13:23:56.774: E/ActivityThread(95): Failed to find provider info for android.server.checkin
08-06 13:23:56.844: E/ActivityThread(95): Failed to find provider info for android.server.checkin
08-06 13:23:58.464: E/vold(26): Cannot start volume '/sdcard' (volume is not bound)
08-06 13:23:58.604: E/MediaPlayerService(30): Couldn't open fd for content://settings/system/notification_sound
08-06 13:23:58.614: E/MediaPlayer(51): Unable to to create media player
08-06 13:24:03.963: E/AndroidRuntime(192): ERROR: thread attach failed
08-06 13:24:05.833: E/AndroidRuntime(203): ERROR: thread attach failed
08-06 13:24:06.043: E/jdwp(216): Failed sending req to debugger: Broken pipe (-1 of 27)
08-06 13:24:06.043: E/jdwp(216): Failed sending req to debugger: Broken pipe (-1 of 27)
08-06 13:24:06.043: E/jdwp(216): Failed sending reply to debugger: Broken pipe
08-06 13:24:06.115: E/AndroidRuntime(216): Uncaught handler: thread main exiting due to uncaught exception
08-06 13:24:06.133: E/AndroidRuntime(216): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.deadEddie.counter/com.deadEddie.counter.MainActivity}: android.view.InflateException: Binary XML file line #7: Error inflating class <unknown>
08-06 13:24:06.133: E/AndroidRuntime(216):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496)
08-06 13:24:06.133: E/AndroidRuntime(216):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
08-06 13:24:06.133: E/AndroidRuntime(216):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
08-06 13:24:06.133: E/AndroidRuntime(216):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
08-06 13:24:06.133: E/AndroidRuntime(216):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-06 13:24:06.133: E/AndroidRuntime(216):  at android.os.Looper.loop(Looper.java:123)
08-06 13:24:06.133: E/AndroidRuntime(216):  at android.app.ActivityThread.main(ActivityThread.java:4363)
08-06 13:24:06.133: E/AndroidRuntime(216):  at java.lang.reflect.Method.invokeNative(Native Method)
08-06 13:24:06.133: E/AndroidRuntime(216):  at java.lang.reflect.Method.invoke(Method.java:521)
08-06 13:24:06.133: E/AndroidRuntime(216):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
08-06 13:24:06.133: E/AndroidRuntime(216):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
08-06 13:24:06.133: E/AndroidRuntime(216):  at dalvik.system.NativeStart.main(Native Method)
08-06 13:24:06.133: E/AndroidRuntime(216): Caused by: android.view.InflateException: Binary XML file line #7: Error inflating class <unknown>
08-06 13:24:06.133: E/AndroidRuntime(216):  at android.view.LayoutInflater.createView(LayoutInflater.java:513)
08-06 13:24:06.133: E/AndroidRuntime(216):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
08-06 13:24:06.133: E/AndroidRuntime(216):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:563)
08-06 13:24:06.133: E/AndroidRuntime(216):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
08-06 13:24:06.133: E/AndroidRuntime(216):  at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
08-06 13:24:06.133: E/AndroidRuntime(216):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
08-06 13:24:06.133: E/AndroidRuntime(216):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
08-06 13:24:06.133: E/AndroidRuntime(216):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:198)
08-06 13:24:06.133: E/AndroidRuntime(216):  at android.app.Activity.setContentView(Activity.java:1622)
08-06 13:24:06.133: E/AndroidRuntime(216):  at com.deadEddie.counter.MainActivity.onCreate(MainActivity.java:20)
08-06 13:24:06.133: E/AndroidRuntime(216):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
 08-06 13:24:06.133: E/AndroidRuntime(216):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)

 08-06 13:24:06.133: E/AndroidRuntime(216):     ... 11 more
08-06 13:24:06.133: E/AndroidRuntime(216): Caused by: java.lang.reflect.InvocationTargetException
08-06 13:24:06.133: E/AndroidRuntime(216):  at android.widget.TextView.<init>(TextView.java:320)
08-06 13:24:06.133: E/AndroidRuntime(216):  at java.lang.reflect.Constructor.constructNative(Native Method)
08-06 13:24:06.133: E/AndroidRuntime(216):  at java.lang.reflect.Constructor.newInstance(Constructor.java:446)
08-06 13:24:06.133: E/AndroidRuntime(216):  at android.view.LayoutInflater.createView(LayoutInflater.java:500)
08-06 13:24:06.133: E/AndroidRuntime(216):  ... 22 more
08-06 13:24:06.133: E/AndroidRuntime(216): Caused by: android.content.res.Resources$NotFoundException: File #CCFF00 from drawable resource ID #0x7f040006: .xml extension required
08-06 13:24:06.133: E/AndroidRuntime(216):  at android.content.res.Resources.loadColorStateList(Resources.java:1820)
08-06 13:24:06.133: E/AndroidRuntime(216):  at android.content.res.TypedArray.getColorStateList(TypedArray.java:289)
08-06 13:24:06.133: E/AndroidRuntime(216):  at android.widget.TextView.<init>(TextView.java:627)
08-06 13:24:06.133: E/AndroidRuntime(216):  ... 26 more
08-06 13:24:06.173: E/dalvikvm(216): Unable to open stack trace file '/data/anr/traces.txt': Permission denied
08-06 13:29:06.424: E/gralloc(51): [unregister] handle 0x52d470 still locked (state=40000001) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T14:18:33.537

我认为您需要将颜色声明移出 strings.xml 并将其放入 colors.xml

## 颜色.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<color name="myColor">#ccff00</color>
</resources> 
```

然后在您的布局中像这样引用它：

```
<TextView

android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_gravity="center"
android:textColor="@color/myColor"
android:textSize="30dp"
android:text="@string/text"
android:textStyle="bold"
android:gravity="center"
android:id="@+id/tvDisplay"

/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T14:18:29.710

在您的 xml 中，这一行是错误的：

```
android:textColor="@string/color 
```

您应该检查您是否有一个名为“/res/color/color.xml”的文件，其中包含一些对颜色的引用。

或者只是改变：

```
android:textColor="@string/color 
```

到 android:textColor="#ff000000"

# c# - 设计器覆盖在 UserControl 中定义的 BindingList

> ID：11830025
> 
> 赞同：1
> 
> 时间：2012-08-06T14:13:21.443
> 
> 标签：c#, winforms, .net-3.5, bindinglist

我在 UserControl 中使用 BindingList 来确定更新控件的 UI。`ListChanged`并且`AddingNew`事件在构造函数中分配。

我发现 BindingList 的事件没有被触发，经过一番探索后发现`onListChanged`和`onAddingNew`事件处理程序是`null`.

经过更多挖掘后，我发现了我的问题 - UserControl 的父窗体的设计器正在创建该行：

```
this.myUserControl1.MyBindingList = ((System.ComponentModel.BindingList<MyCustomClass>)(resources.GetObject("myUserControl1.MyBindingList"))); 
```

有什么想法可以阻止设计师重新定义这个 BindingList 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T14:57:32.153

我想我可能已经修复了它 - 我在属性定义的上方添加了以下内容`MyUserControl`

```
[DesignerSerializationVisibility(DesignerSerializationVisibility.Hidden)] 
```

虽然老实说我搞砸了很多东西，而且可能有很多事情（都与序列化有关`MyCustomClass`- 它最初是序列化的，因为设计师抱怨它没有被序列化，但后来这破坏了其他事情）。

如果有人提出更可靠的答案，我将对此答案进行 wiki-fy！

# python - Python 系统日志文件

> ID：11830029
> 
> 赞同：2
> 
> 时间：2012-08-06T14:13:24.737
> 
> 标签：python, exception, logging

我有一个脚本（似乎）不可预测地崩溃了。我不知道如何重现它。

Python是否保留了全局系统日志文件，所以我可以回去看看是什么异常导致了退出？如果是这样，在 Windows 上的哪里可以找到它？如果可能的话，我也希望能够看到回溯。

**编辑**：我知道我*可以*将整个脚本放在一个`try...except`块中，但我不知道在它再次崩溃之前我将运行它多长时间。我希望至少能够获得一些关于已经发生的崩溃的粗略信息，即使这些信息只是导致崩溃的异常类型。这样我就可以尝试更可靠地重现错误。

我怀疑崩溃是由于与外部设备的通信失败（可能是简单的电缆松动）造成的。这类故障本质上是随机的，难以重现，所以我想知道它是通信错误还是真正的代码错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T14:29:08.283

你能“抓住”`exception`吗？如果是，那么您可以使用`traceback`打印堆栈跟踪并查明问题发生的位置。

然后，您可以使用 Eclipse 调试有问题的模块（即使它是 python lib 的一部分，它也将是普通可读的形式）。

```
 import traceback
...
...

try:
    <your script>
except Exception as runtime_ex:
    print runtime_ex, traceback.format_exc() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T14:23:48.833

如果您想了解有关**异常**的信息，可以使用此代码。

```
try:
    #do some stuff
    1/0 #stuff that generated the exception
except Exception as ex:
    print ex
    raw_input() 
```

为了正确调试它，有一个工具[winpdb](http://winpdb.org/)。有一个很好的教程可供它学习调试使用它[调试教程](http://code.google.com/p/winpdb/wiki/DebuggingTutorial)

# php - 使用 PHP 生成 PNG 图像

> ID：11830033
> 
> 赞同：0
> 
> 时间：2012-08-06T14:13:31.183
> 
> 标签：php, header, png

尝试创建`png`文件时出现错误。我的代码是这样的：

```
require_once('....');
header("content-type: image/png");

echo `$command`; 
```

`PNG`文件是由生成的`$command`，问题是我包含了另一个 PHP 文件，因此它无法显示图像。我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:20:05.983

如果您想在浏览器中将其显示为图像，则需要将[`base64_encode()`](http://php.net/manual/en/function.base64-encode.php)其发送到浏览器，而不仅仅是`echo`ing。

```
$image = `$command`;
$b64 = base64_encode($image);
echo '<img src="data:image/png;base64,' .$b64\. '">'; 
```

或者您可以尝试为此使用[`imagepng()`](http://www.php.net/manual/en/function.imagepng.php)和相关`GD`功能。

# java - 使用 servlet 中的请求或会话显示/了解/获取发送页面

> ID：11830038
> 
> 赞同：5
> 
> 时间：2012-08-06T14:13:40.860
> 
> 标签：java, jsp, servlets, request

我有`source.jsp`带有表单的 jsp 页面（例如，）：

```
<html>
<head>
<body>
    <form action="Servlet123" method="POST">
        // form fileds ... 
    </form>
</body>
</head>
</html> 
```

`doPost`以及servlet中的要求-

```
@WebServlet("/Servlet123")
public class Servlet123 extends HttpServlet {
    protected void doPost(HttpServletRequest request,
            HttpServletResponse response) throws ServletException, IOException {

          //use with requset...
    }
} 
```

我怎样才能让页面（在这种情况下 - `source.jsp`）向这个 servlet 发送请求？请求/会话中有方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T14:41:06.223

通过隐藏字段在请求中使用传递参数：

在您的 jsp 页面中：

```
<form action="Servlet123" method="post">        
   <input type="hidden" name="namePage" value="sourcePage" />
</form> 
```

在您的 servlet 中：

```
String namePage = request.getParameter("namePage"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T14:40:33.977

```
String referer = request.getHeader("referer"); 
```

但请阅读 [“Referer”标头的替代方案](https://stackoverflow.com/questions/3546097/alternative-to-referer-header)
（尤其是 BalusC 的答案）。

# javascript - 使用 Cakephp html 输入的 onclick

> ID：11830042
> 
> 赞同：0
> 
> 时间：2012-08-06T14:13:54.830
> 
> 标签：javascript, html, cakephp, input, onclick

我需要帮助，我正在使用 CakePHP 及其 html 助手。单击输入字段时，我需要在输入字段中全选。

JavaScript：

```
`<script type="text/javascript">
   function SelectAll(id)
    {
      document.getElementById(id).focus();
      document.getElementById(id).select();
    }
</script>` 
```

php：

```
 `<?php echo $html->input('Listing/client_name', array('size' => '15','id' => 'client_name', "onclick'=>'SelectAll('client_name');", 'value'=>'Seller Name', 'class'=> 'font_display_normal' ))?>` 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T15:56:29.117

这是一个语法错误，onclick 必须是数组上的一个键。

```
"onclick'=>'SelectAll('client_name');" 
```

应该：

```
'onclick'=> 'SelectAll("client_name");' 
```

尝试：

```
`<?php echo $html->input('Listing/client_name', array('size' => '15','id' => 'client_name', 'onclick'=> 'SelectAll("client_name");' , 'value'=>'Seller Name', 'class'=> 'font_display_normal' ))?>` 
```

# r - 以图形方式拟合分布

> ID：11830044
> 
> 赞同：1
> 
> 时间：2012-08-06T14:13:59.123
> 
> 标签：r, finance

我正在运行一些测试来尝试确定我的数据遵循什么分布。从我的数据密度来看，我认为它看起来有点像逻辑分布。然后我使用包 MASS 来估计分布的参数。但是，当我将它们绘制在一起时，虽然比正常情况要好，但逻辑仍然不是很好。有没有办法找到更好的分布？感谢您的帮助 ！

```
library(quantmod)
getSymbols("^NDX",src="yahoo", from='1997-6-01', to='2012-6-01')
daily<- allReturns(NDX) [,c('daily')]
dailySerieTemporel<-ts(data=daily)
x<-na.omit(dailySerieTemporel)

library(MASS)
(xFit<-fitdistr(x,"logistic"))
#      location        scale    
#   0.0005210570   0.0106366354 
#  (0.0002941922) (0.0001444678)
xFitEst<-coef(xFit)

plot(density(x))
set.seed(125)
lines(density(rlogis(length(x), xFitEst['location'], xFitEst['scale'])), col=3)
lines(density(rnorm(length(x), mean(x), sd(x))), col=2) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T14:33:11.847

这是基本的 R：默认情况下`plot()`会创建一个*新*的绘图画布，您应该使用诸如`lines()`添加到现有绘图之类的命令。

这适用于您的示例：

```
plot(density(x))
lines(density(rlogis(length(x), location = 0.0005210570,
                     scale = 0.0106366354)), col="blue") 
```

因为它将估计的逻辑拟合以蓝色添加到您现有的情节中。

# java - JDBC Blob（不）应该在使用后释放（）吗？

> ID：11830047
> 
> 赞同：4
> 
> 时间：2012-08-06T14:14:12.817
> 
> 标签：java, jdbc, blob

只是将包含二进制数据的旧数据库的导出组合在一起，我偶然发现了我们的一个实用程序方法中的一个异常：

> java.lang.AbstractMethodError：net.sourceforge.jtds.jdbc.BlobImpl.free()

在检查了我们的代码库后，我发现实用方法直到现在才被使用，基本上它看起来像这样：

```
public BinaryHolder getBinary(final int columnIndex) throws SQLException {
    Blob blob = null;
    try {
        blob = resultSet.getBlob(columnIndex);
        final BinaryHolder binary = BinaryHolderUtil.create(blob);
        return binary;
    } finally {
        if (blob != null)
            blob.free();
    }
} 
```

BinaryHolder 只是一个保存二进制数据的包装器（在您询问之前，代码执行良好，直到到达 finally 子句 - BinaryHolderUtil.create(blob) 不会*尝试*释放 blob）。

进一步调查我发现，在我们访问 Blob 的其他任何地方，blob 只是使用 getBlob() 获得的，根本没有释放（Javadoc 说当结果集关闭时它将自动处理）。

现在的问题：*是否应该*手动释放 blob（毕竟 ResultSet 的保存时间可能不仅仅是访问 blob），如果是，*如何*以一种即使使用没有实现它的驱动程序？

（我们正在使用带有 JTDS1.25 的 SQL-Server，如果这在异常中还不是很明显的话）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T14:42:23.150

是在 JDBC 4.0 / Java 6 中引入的[`Blob.free()`](http://docs.oracle.com/javase/7/docs/api/java/sql/Blob.html#free%28%29)。所以您很可能使用的是 JDBC 3.0 或更早版本的 JDBC 驱动程序。

与大多数（JDBC）资源一样，尽快关闭它们有其优势（例如，GC 可以更早地收集它，释放数据库资源等）。这也是为什么`ResultSet`即使在关闭语句（或再次执行语句）时关闭 a 也可以关闭它的原因，就像在关闭 a`Statement`时即使它关闭也可以关闭 a 一样`Connection`。

所以 a`Blob`不需要被释放，但*一般来说*，当你完成它时释放它是一个好主意。

BTW：JTDS 只是 JDBC 3.0，你最好使用微软自己的 Microsoft SQL Server JDBC 驱动。

# android - 更改片段并保存 Web 视图状态 - 发疯

> ID：11830050
> 
> 赞同：6
> 
> 时间：2012-08-06T14:14:16.013
> 
> 标签：android

在一周的大部分时间里，我一直在尝试这样做，但仍然没有运气。

我有一个带有标签的操作栏（操作栏 sherlock），我在标签之间切换并很好地更改片段。

每个片段都有一个 webview，我试图保存 webview 的状态，以便网页保持在用户离开它的同一页面上。

这是我的片段代码：

```
public class FragmentB extends SherlockFragment {

WebView myWebView;

@Override
public void onSaveInstanceState(Bundle outState) {
   super.onSaveInstanceState(outState);
   myWebView.saveState(outState);
   Log.w("///////", "onSaveInstanceState");

}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
   super.onActivityCreated(savedInstanceState);
   myWebView.restoreState(savedInstanceState);
   Log.w("///////", "onActivityCreated");

}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Log.w("///////", "onCreate");
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

     View mainView = (View) inflater.inflate(R.layout.frag_b, container, false);
     myWebView = (WebView) mainView.findViewById(R.id.webview);

     Log.w("///////", "onCreateView");

     if (savedInstanceState != null){

         myWebView.restoreState(savedInstanceState);
         Log.w("///////", "restore!");
     }
     else{
         Log.w("///////", "ELSE!");
         myWebView.setWebViewClient(new MyWebViewClient());
         myWebView.getSettings().setPluginsEnabled(true);
         myWebView.getSettings().setBuiltInZoomControls(false); 
         myWebView.getSettings().setSupportZoom(false);
         myWebView.getSettings().setJavaScriptCanOpenWindowsAutomatically(true);   
         myWebView.getSettings().setAllowFileAccess(true); 
         myWebView.getSettings().setDomStorageEnabled(true);
         myWebView.loadUrl("http://www.google.com");   
     }

    //return inflater.inflate(R.layout.frag_b, container, false);
    return mainView;
}

public class MyWebViewClient extends WebViewClient {        

    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        if (url.endsWith(".mp4")) 
        {
            Intent intent = new Intent(Intent.ACTION_VIEW);
            intent.setDataAndType(Uri.parse(url), "video/*");

            view.getContext().startActivity(intent);
            return true;
        } 
        else {
            return super.shouldOverrideUrlLoading(view, url);
        }
    }

} 
```

}

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-30T06:45:32.793

Fragment的`onSaveInstanceState`方法只会在父Activity需要保存状态时被调用；这方面的一个例子是在方向更改期间父活动被破坏/重新创建时。因此，当您只是替换片段或在它们之间作为选项卡切换时，不会调用此方法。

作为针对您的特定情况的解决方法，您可以将 webview 的状态保存在方法中的捆绑包中，并在`onPause`方法中恢复它`onActivityCreated`：

```
 // Instance fields        
    private WebView webView;
    private Bundle webViewBundle;

    /**
     * Save the state of the webview
     */
    @Override
    public void onPause()
    {
        super.onPause();

        webViewBundle = new Bundle();
        webView.saveState(webViewBundle);
    }

    /**
     * Restore the state of the webview
     */
    @Override
    public void onActivityCreated(Bundle savedInstanceState)
    {
        super.onActivityCreated(savedInstanceState);

        if (webViewBundle != null)
        {
            webView.restoreState(webViewBundle);
        }
    } 
```

另请参阅此处以获取更多信息：

[如何在操作栏的片段中保存 WebView 的状态](http://www.lucazanini.eu/2013/android/how-to-save-the-state-of-a-webview-inside-a-fragment-of-an-action-bar/?lang=en)

# visual-c++ - 从 CBitmap 获取 hDib*

> ID：11830054
> 
> 赞同：0
> 
> 时间：2012-08-06T14:14:30.430
> 
> 标签：visual-c++, mfc

我有一个位图*（这是 Visual C++ 6.0）。

我需要将此 Bitmap* 保存到 bmp 文件。如果我有一个hDib，我在互联网上看到了允许我这样做的代码。（处理 Dib）。鉴于我已经有一个 CBitmap*，我怎样才能获得 hDib？

或者，如果有人有更简单的方法将位图保存到文件中，那也很棒。（这是 VC++ 6.0 (1998)，我不（认为）我可以访问 CImage。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T16:20:04.103

我假设您实际上是在询问 CBitmap 而不是 Bitmap，因为它们是两个不同的东西。

CBitmap 派生自 CGdiObject，它有一个包含句柄的成员 m_hObject。

它还有一个`operator HBITMAP`返回句柄的函数——你所要做的就是一个演员表。

```
HBITMAP hbmp = (HBITMAP) mybitmap; 
```

此句柄是否为 DIB 取决于您创建位图的方式。

# java - Java：如何将 Double 连接到 String

> ID：11830057
> 
> 赞同：1
> 
> 时间：2012-08-06T14:14:37.283
> 
> 标签：java

我如何在java中`Double`连接？`String`

我有以下代码：

```
Double price = 5.34;
String trade = MSFT; 
```

现在我有`String key = price + trade`，不确定这是否是正确的做法，有什么建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T14:20:50.213

Java 字符串连接默认使用`+`符号完成。

但是有时这不是一个好习惯，因为每次执行此操作都会创建一个新的字符串实例，因此如果您处于循环中，这将为每次迭代在内存中创建一个新字符串。

所以对于简单的情况，`+`是完全有效的。

对于其他情况，您应该使用[StringBuilder](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuilder.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-06T14:17:46.743

我可能会使用[String.format()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#format%28java.lang.String,%20java.lang.Object...%29)并且您将能够控制字符串中双精度的格式。例如，您可以控制前导零、显示的 dps 数量等。

有关示例，请参[见此 SO 答案](https://stackoverflow.com/questions/703396/how-to-nicely-format-floating-types-to-string)。这是底层[Formatter](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html#syntax)的文档和[标准教程](http://docs.oracle.com/javase/tutorial/java/data/numberformat.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T14:17:39.883

您可以使用`String.valueOf(price)`转换。所以你会有

```
Double price = 5.34;
String trade = MSFT;
String key = String.valueOf(price) + trade; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T16:16:28.080

没有错`String key = price + trade`。它比`String.valueOf(price) + trade`或使用`StringBuilder`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T14:20:08.573

字符串键 = Double.toString(price) + trade;

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-06T14:21:35.683

格式化字符串 - [http://docs.oracle.com/javase/6/docs/api/java/text/DecimalFormat.html](http://docs.oracle.com/javase/6/docs/api/java/text/DecimalFormat.html)

如何使用它的示例。

[http://www.tech-recipes.com/rx/1326/java-decimal-format-to-easily-create-custom-output/](http://www.tech-recipes.com/rx/1326/java-decimal-format-to-easily-create-custom-output/)

要输出它，请使用 + 操作数。如果您正在寻找性能，这将创建另一个字符串。您还可以使用字符串生成器 - [http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuilder.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuilder.html)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-06T14:21:55.903

您还可以使用 toString() 转换您的 Double。

```
Double price = 5.34;
String trade = MSFT;
String key = Double.toString(price) + trade; 
```

以下是 toSting() 方法的详细信息： [http://docs.oracle.com/javase/7/docs/api/java/lang/Double.html#toString(double)](http://docs.oracle.com/javase/7/docs/api/java/lang/Double.html#toString(double))

但是使用 StringBuffer 更有效。

问候，德克斯。

# javascript - Javascript 用正则表达式替换 - 仅替换找到的字符串的一部分

> ID：11830060
> 
> 赞同：1
> 
> 时间：2012-08-06T14:14:44.283
> 
> 标签：javascript

我有一个如下所示的字符串：

*"01/11/2012 (Last, First) - Notes,02/11/2012 (Last, First) - More Notes,03/11/2012 (Last, First) - Even More Notes,09/12/2012 (Last , 首先）- 你明白了”*

我希望通过用 '\n' 替换任何逗号后跟数字的音符来换行。

我已经尝试过`.replace(/,/g, '\n')`，但我在名称中间有一个换行符。
所以我这样做`.replace(/,\d/g, '\n')`了，但是我失去了日期的第一个数字。

如何搜索 ,# 并将其替换为 \n# ，其中数字与以前相同？

我希望结果如下所示：

```
01/11/2012 (Last, First) - Notes
02/11/2012 (Last, First) - More Notes
03/11/2012 (Last, First) - Even More Notes
09/12/2012 (Last, First) - You get the idea 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T14:18:15.267

（**更新**，对不起，刚刚注意到你不想要逗号）

尝试...

```
.replace(/,(\d)/g, '\n$1') 
```

这对 进行分组`\d`，然后`$1`在替换中使用它（与）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T14:18:43.270

您可以使用捕获来避免丢失该号码：

```
s.replace(/,(\d)/g, '\n$1') 
```

# asp.net - 条件表单认证

> ID：11830065
> 
> 赞同：1
> 
> 时间：2012-08-06T14:15:00.177
> 
> 标签：asp.net, forms-authentication, user-roles

我将多个域映射到同一个网站并将域与数据库进行比较以决定要显示的内容。好吧，其中一个域需要对所有页面进行表单身份验证，而其他站点则不需要。当使用某个域时，有条件地在整个站点上应用用户角色的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T15:39:53.077

我通过检查我使用的域以及是否是需要身份验证的域来解决这个问题，如果用户不在设置的用户角色中，我将它们重定向到登录页面。我只是将它添加到每个页面的“Page_Load”方法中。

```
if (site == 13)
        {
            if (!User.IsInRole("SomeUserRole"))
            {
                Response.Redirect("~/Account/Login.aspx");

            }
        } 
```

# session - org.jboss.seam.web.Session.invalidate 会破坏由 xhtml 创建的 EJB 线程吗？

> ID：11830071
> 
> 赞同：0
> 
> 时间：2012-08-06T14:15:37.780
> 
> 标签：session, jboss, ejb, seam, logout

我正在开发一个 web 应用程序，一旦用户登录，主（或登录）页面就会调用 4 个有状态会话 bean。因此，一旦用户登录，就会创建至少 4 个有状态会话 bean 线程。该页面还有一个注销按钮。xhtml 中的注销组件调用具有注销方法的 POJO。

在注销方法中，执行以下语句：

```
Session.instance().invalidate(); 
```

现在的问题是，用户登录时创建的有状态会话 bean 的 4 个线程/实例是否会被销毁。

我在 JBOSS 4.2.3、Seam 2.2.1 Final 上运行此应用程序我使用 JOSSO 进行身份验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T04:14:34.407

是的，它们都是同一会话的一部分。您实际上是在创建会话范围的 bean，而不是单独的会话。

很容易检查。在每个会话 bean 中创建一个方法，并用 @Destroy 对其进行注解，当被注解的 bean 被销毁时，它会调用该方法。

```
@Destroy
public void callMeWhenIDie(){
log.debug("I'm melting, I'm melting" + this.someDefiningCharacteristic);
} 
```

# behat - 为 Mink 创建步骤

> ID：11830072
> 
> 赞同：0
> 
> 时间：2012-08-06T14:15:51.013
> 
> 标签：behat, mink

我是 Mink、Behat 等的新手，所以我需要帮助。

我有一个包含一些行的表，我想检查是否删除了一行。

在我的场景中，我有这样的事情：

```
When I press "Delete"
Then I should be on "/example_url/"
    And I should see "Object list"
    And the response should not contain "Value1" "Value2" "Value3" "Value4" 
```

我该怎么做？我怎么做“响应不应包含一行的某些值”？

我不知道这对 Mink 是否可行，或者我需要使用统一测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T15:30:30.040

您可以在步骤中使用[表格：](http://docs.behat.org/guides/1.gherkin.html#tables)

```
And the result table should not contain:
  |Value |
  |Value1|
  |Value2|
  |Value3|
  |Value4| 
```

Behat 会将其作为 TableNode 实例传递给您的 step 方法：

```
/**
 * @Given /the result table should not contain:/
 */
public function thePeopleExist(TableNode $table)
{
    $hash = $table->getHash();
    foreach ($hash as $row) {
        // ...
    }
} 
```

阅读更多关于用 Gherkin 语言编写功能的信息：http: [//docs.behat.org/guides/1.gherkin.html](http://docs.behat.org/guides/1.gherkin.html)

**题外话**：请注意，大多数时候直接在您的功能中使用 Mink 步骤并不是最好的主意，因为大多数时候它不是您的业务语言。如果您编写了以下内容，您的场景将更具可读性和可维护性：

```
When I press "Delete"
Then I should be on the user page
 And I should see a list of users
 And the following users should be deleted:
   |Name   |
   |Biruwon|
   |Kuba   |
   |Anna   | 
```

在您的步骤实现中，您可以通过返回*Then*实例来使用默认的 Mink 步骤：

```
/**
 * @Given /^I should see a list of users$/
 */
public function iShouldSeeListOfUsers()
{
    return new Then('I should see "User list"');
} 
```

# jquery - jQuery动画不断重复

> ID：11830076
> 
> 赞同：4
> 
> 时间：2012-08-06T14:16:01.303
> 
> 标签：jquery, jquery-animate

我在重复 jQuery 动画时遇到了麻烦，关于 stop() 的传统建议似乎没有帮助。

我有一个图像。当用户将鼠标悬停在图像上时，我想要一个白色的透明覆盖层从右侧滑入。当用户鼠标移出时，我希望它消失。

我的代码部分有效，但前提是用户在图像左侧进出鼠标（即远离叠加层）。如果用户在显示时将鼠标悬停在覆盖层上，这似乎算作 mouseout 事件并触发动画，这不是我想要的。一旦发生这种情况，动画就会开始重复。

的HTML：

```
<img src="Crowded_bookshelf.png" height="367" width="367" id="theImage">
<div id="overlay1"></div> 
```

CSS：

```
 #theImage { 
    border-radius: 184px;
 }
 #overlay1 {
    height:400px;
    width:240px;
    background-color:white;
    opacity:0.9;
    position:absolute;
    left:400px;
    top:60px;
 } 
```

jQuery：

```
 $('#theImage').hover(
        function() {
            $('#overlay1').animate(
                {   
                    left: '190px'
                }, 
                1000
            );
        },
        function() {
            $('#overlay1').animate(
                {
                    left: '400px'
                }, 
                1000
            );
        }
    ); 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T14:18:39.300

我认为问题在于您将鼠标悬停事件应用于图像本身，因此当 div 覆盖图像时，您不再将鼠标悬停在图像上，它会熄灭，然后又重新进入

您需要做的是将这两个 div 放入容器 div 中，然后将鼠标事件应用于该容器

IE

```
<div id="container">
    <img src="Crowded_bookshelf.png" height="367" width="367" id="theImage">
    <div id="overlay1"></div>
</div> 
```

和：

```
$('#container').hover(...); 
```

# ruby-on-rails - 为没有路由的操作编写失败测试， 即使资产管道已打开

> ID：11830078
> 
> 赞同：4
> 
> 时间：2012-08-06T14:16:03.537
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, asset-pipeline

我在打开资产管道的轨道 3.2 上。我正在测试我尚未构建的操作（TDD；试图让测试首先失败）。当我最初运行测试时，我得到了预期的失败。

```
class AccountsControllerTest < ActionController::TestCase

  def test_my_path
    get :my_path
    puts @response.body
    assert_template :my_path
  end

end

#=> test_my_path(AccountsControllerTest): AbstractController::ActionNotFound: The action 'my_path' could not be found for AccountsController 
```

当我添加相应的视图 (app/views/my_path.html.erb) 时，我仍然认为测试会失败，因为我没有为此操作指定路线。它通过了，我认为这是因为页面正在由资产管道呈现。在我调用的视图中，它从调用`<%= request.fullpath %>`中吐出。`/assets?action=my_path``puts @response.body`

当我尝试在浏览器中访问 accounts/my_path 时，我看到“No route matches [GET] "/accounts/my_path"”，所以我想确保我的测试也失败了。为什么会发生这种情况，我应该如何修复测试？我是否应该使用 assert_recognizes 单独测试路由？为了缩小问题的根源，我的路线文件目前是空的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T15:02:48.107

首先，即使没有定义相应的操作，Rails 控制器也会呈现现有模板 ( [http://guides.rubyonrails.org/layouts_and_rendering.html#rendering-by-default-convention-over-configuration-in-action](http://guides.rubyonrails.org/layouts_and_rendering.html#rendering-by-default-convention-over-configuration-in-action) )。这就是添加模板后测试通过的原因。

功能测试直接调用控制器动作，不经过路由器。因此，即使未定义路由，测试也会通过，并且在浏览器中不起作用。使用单独的测试用例进行路由测试（或在集成测试中测试路由）。

# c# - 如何在 WinForms 中捕获 Insert+Tab 的组合？

> ID：11830079
> 
> 赞同：2
> 
> 时间：2012-08-06T14:16:04.840
> 
> 标签：c#, winforms, .net-4.0, keypress, keydown

这不是重复的。许多类似的主题讨论了捕获涉及修饰键的组合。

`Insert+Tab`当从控件按下快捷键（的组合）时，我需要触发某些东西，例如`Button`。

**抓住**：

1.  这不涉及修饰键，例如`Alt`.NET`Shift`内置的检查。

2.  这有`Tab`不那么容易抓住的关键。

**我尝试并接近的：**

1）*KeyDown 事件*但不捕获选项卡..

```
[DllImport("user32.dll")]
public static extern int GetKeyboardState(byte[] keystate);
static void form_KeyDown(object sender, KeyEventArgs e)
{
    if (!(((Form)sender).ActiveControl is Button))
        return;

    byte[] keys = new byte[255];

    GetKeyboardState(keys);

    if (keys[(int)Keys.Insert] == 129 && keys[(int)Keys.Tab] == 129)
    { 
        // doesn't work
    }
    if (keys[(int)Keys.Insert] == 129 && keys[(int)Keys.J] == 129)
    { 
        // works, since here this doesnt involve Tab
    }
} 
```

*这适用于常规组合*，不会与`Tab`.

2） *KeyPreview 事件*，它捕获`Tab`键，但我不知道如何按下组合键

```
static void form_PreviewKeyDown(object sender, PreviewKeyDownEventArgs e)
{
   if (!(((Form)sender).ActiveControl is Button))
        return;

   if (e.KeyCode == Keys.Tab)
      //works

   if (e.KeyCode == Keys.Insert && e.KeyCode == Keys.Tab)
      //doesn't hit.
} 
```

**要求：**

1) 我没有从 Form 类注册事件。相反，我有一个实用程序类，它创建所有必需的事件（以及其他快捷方式）。我只是将表单实例传递给静态函数。所以我很不确定我应该如何利用各种关键的覆盖调用。这是我的做法：

```
public frmLogin()
{
    InitializeComponent();
    Utility.SetFormEvents(this);
}

static void SetFormEvents(Form f){
    //foreach control...........
} 
```

但是我可以放弃这个..

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T15:52:36.880

Tab 被认为是一个命令键，您实际上不会收到直接按下它的通知。您可以 PInvoke [GetKeyState](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646301%28v=vs.85%29.aspx)方法，但我认为更容易识别 tab 是一个命令键（和 override `ProcessCmdKey`）并跟踪 Insert 键是向上还是向下。例如：

```
static bool insertPressed;
static bool tabPressed;

protected override bool ProcessCmdKey(ref Message msg, Keys keyData)
{
    if(keyData == Keys.Tab)
    {
        tabPressed = true;
        CheckForTabAndInsert();

    }
    return base.ProcessCmdKey(ref msg, keyData);
}

static void form_KeyDown(object sender, KeyEventArgs e)
{
    if (e.KeyCode == Keys.Insert)
    {
        insertPressed = true;
        CheckForTabAndInsert();
        insertPressed = false;
    }
}

static void form_KeyUp(object sender, KeyEventArgs e)
{
    if (e.KeyCode == Keys.Insert) insertPressed = false;
} 
```

缺点是您只能使用 ProcessCmdKey 真正获得 Tab 的 KeyPress，因此您只能真正支持 Insert+Tab（而不是 Tab+Insert）。这是因为 Tab 用于将上下文从一个控件切换到另一个控件。根据您的情况（即在文本框的上下文中），您可以使用[AcceptTab](http://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.acceptstab.aspx)属性来可能只使用 KeyUp 和 KeyDown ...但是，从您发布的内容来看，情况似乎并非如此。

# c++ - 链接器错误未定义引用

> ID：11830081
> 
> 赞同：3
> 
> 时间：2012-08-06T14:16:09.633
> 
> 标签：c++

这是我得到 Linker error undefined reference to RationalNumber::RationalNumber(int, int) 的错误

我尝试使用 Visual Studio 并且错误说，找不到指定的文件rationalnumber.exe。

头文件

```
#ifndef __Assignment_2Q1__RationalNumber__
#define __Assignment_2Q1__RationalNumber__

#include <iostream>
using namespace std;

class RationalNumber{

public:
    RationalNumber(int=0, int=1); // prevent 0 at denominator! and reduce fraction and avoid -ive

    friend RationalNumber operator+(const RationalNumber &r1,const RationalNumber &r2); // need & reference
    friend RationalNumber operator-(const RationalNumber &r1,const RationalNumber &r2);
    friend RationalNumber operator*(const RationalNumber &r1,const RationalNumber &r2);
    friend RationalNumber operator/(const RationalNumber &r1,const RationalNumber &r2);

    friend bool operator==(const RationalNumber &n1,const RationalNumber &n2);
    friend bool operator!=(const RationalNumber &n1,const RationalNumber &n2);

    friend bool operator>(const RationalNumber &n1,const RationalNumber &n2);
    friend bool operator<=(const RationalNumber &n1,const RationalNumber &n2);

    friend bool operator<(const RationalNumber &n1,const RationalNumber &n2);
    friend bool operator>=(const RationalNumber &n1,const RationalNumber &n2);

    void print();

private:

    int denominator;
    int numerator;

};

#endif /* defined(__Assignment_2Q1__RationalNumber__) */ 
```

.cpp 文件

```
#include <iostream>
#include "RationalNumber.h"

using namespace std;

RationalNumber(int n, int d)
{
    if (d!=0&&d>0) {
        if (d>=2||d<=-2) {
            float fraction1;
            float fraction2;
            fraction1= n/d;
            fraction2 = static_cast<float>(n)/d;

                if (fraction1==fraction2) {  // OR just simply 4/2 = 2 so n=2 , d=1!!! 
                numerator=fraction1;
                denominator=1;
                cout<<"You have entered a reductible fraction which reduces to! \n "<<numerator<<" / "<<denominator<<endl;
            }
                else{
                numerator=n;
                denominator=d;
                cout<<"You have enterd an irreductible fraction! "<<numerator<<" / "<<denominator<<endl;
            }
        }
        else
        {
            numerator=n;
            denominator=d;
            cout<<"The rational number is "<<numerator<<" / "<<denominator<<endl;
        }

    }
    else
        cout<<"The denominator cannot be 0 or a Negative number!"<<endl; // maybe add a set fct here

}

 RationalNumber operator+(const RationalNumber& r1,const RationalNumber& r2)
{
    return RationalNumber((r1.numerator+r2.denominator)/(r1.denominator+r2.denominator));

}
 RationalNumber operator-(const RationalNumber &r1,const RationalNumber &r2)
{
    return RationalNumber((r1.numerator-r2.denominator)/(r1.denominator-r2.denominator));

}

 RationalNumber operator*(const RationalNumber &r1,const RationalNumber &r2)
{
    return RationalNumber((r1.numerator*r2.denominator)/(r1.denominator*r2.denominator));
}

 RationalNumber operator/(const RationalNumber &r1,const RationalNumber &r2)
{
    return RationalNumber((r1.numerator/r2.denominator)/(r1.denominator/r2.denominator));

}

bool operator==(const RationalNumber &n1,const RationalNumber &n2)
{
    return ((n1.numerator/n1.denominator)==(n2.numerator/n2.denominator));
}

 bool operator!=(const RationalNumber &n1,const RationalNumber &n2)
{
    return ((n1.numerator/n1.denominator)!=(n2.numerator/n2.denominator));

}

 bool operator>(const RationalNumber &n1,const RationalNumber &n2)
{
    return ((n1.numerator/n1.denominator)>(n2.numerator/n2.denominator));

}

 bool operator<=(const RationalNumber &n1,const RationalNumber &n2)
{
    return ((n1.numerator/n1.denominator)<=(n2.numerator/n2.denominator));

}

 bool operator<(const RationalNumber &n1,const RationalNumber &n2)
{
    return ((n1.numerator/n1.denominator)<(n2.numerator/n2.denominator));

}

 bool operator>=(const RationalNumber &n1,const RationalNumber &n2)
{
    return ((n1.numerator/n1.denominator)>=(n2.numerator/n2.denominator));

}

void RationalNumber::print()
{
    cout<<numerator<<endl;
    cout<<denominator<<endl;
} 
```

主要的

```
#include <iostream>
#include "RationalNumber.h"

using namespace std;

int main()

    {

        RationalNumber object1(34, 73);

        RationalNumber object2(5, 1);

        RationalNumber object3(50, 25);

        RationalNumber object4(87, 21);

        RationalNumber object5(32, 0);

        RationalNumber object6(32, -3);

        RationalNumber object7(-32, 2);

        RationalNumber object;

        object = (object1 + object2);

        object.print();

        return 0;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T14:18:26.437

改变

```
RationalNumber(int n, int d) 
```

在你的 .cpp 中

```
RationalNumber::RationalNumber(int n, int d) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T14:19:06.710

您的 .cpp 文件函数被定义为自由函数。将 RationalNumber:: 放在它们的名称之前以将它们定义为类的成员函数。

# javascript - 循环图像ie7问题

> ID：11830083
> 
> 赞同：2
> 
> 时间：2012-08-06T14:16:15.120
> 
> 标签：javascript, jquery, html, css, animation

我正在尝试使用带有 jquery 的 javascript 在 div 中创建一个无限滚动的图像。我正在使用的代码可以在小提琴[**HERE**](http://jsfiddle.net/XaSHa/3/)中看到。

这在当前浏览器中有效，但在 IE7 中失败。我的猜测是它与分配负 css 值有关，但我还没有找到解决方案。有谁知道如何在 ie7 的 chrome 中看到行为？

谢谢你的帮助。

*编辑：如果*我垂直向下滚动图像，我已经获得了跨浏览器的效果。可以在[**这里**](http://jsfiddle.net/XaSHa/6/)看到。

编辑2：我让它水平工作，但只向右移动。它似乎不喜欢负方向值。可以在[**这里**](http://jsfiddle.net/XaSHa/9/)看到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T14:36:09.860

我认为 IE7 只支持“左”属性的整数值！

将您的功能更改为：

```
$(function(){
reelDivs($('.reel div'), 'left', 500, -500, -1, 30);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T14:37:05.757

将您的 CSS 更改为此并试一试：

```
.reel
{
    position: relative;
    top: 50px;
    left: 50px;
    width: 250px;
    height: 500px;
    overflow: hidden;
}

.reel div
{
    position: absolute;
    left: 0px;
    height: 362px;
    width: 500px;
    background: url("http://www.deviantart.com/download/258376230/husky_puppy_by_blackdelive-d49twdi.png") no-repeat 0px top;
}

.reel div.b
{
    left: 500px;
} 
```

jsFiddle：http: [//jsfiddle.net/eGnMX/](http://jsfiddle.net/eGnMX/)

神速！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T14:38:19.033

在卷轴 div 上放置一个 ID，而不是`$('.reel div')`使用该 ID。我很确定 IE7 不支持`getElementsByClassName`.

当您使用时，`$('.reel div')`您是在告诉 jQuery 使用 getElementsByClassName。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T14:45:04.833

考虑到像素是您的显示器可以渲染的最小尺寸，您如何将图像移动 0.1 像素？

据我所知，IE7 将不支持浮点测量（或至少不支持像素，尚未测试其他单元）。控制台记录返回的 CSS 左侧位置，您将看到 IE7 不返回浮点数。

使用 1 像素移动并降低重绘率以使其在 IE7 中工作。或者甚至更好地使用像素移动与速率来获得所需的结果。像素移动越高越好。

在访问者机器上重绘图像可能会很昂贵。即使您专门为游戏社区（通常拥有快速、高端系统）创建东西，我也不建议将其作为绝对要求。仅您的图像滚动条就可能严重落后于某些系统。

也不要忘记大多数显示器的刷新率不会低于 5 毫秒。所以期待它比这更快地重新绘制是没有意义的

# python - Python服务器中的全局变量

> ID：11830084
> 
> 赞同：8
> 
> 时间：2012-08-06T14:16:23.407
> 
> 标签：python, webserver, global-variables

背景：在服务器方面，我是一个完全的初学者，但我知道我的 Python 编程方式。

我正在尝试使用基本的 Python 2.7 模块（SimpleHTTPServer、CGIHTTPServer 等）设置一个简单的服务器。该服务器在启动时需要从一个文件中加载一个包含数 GB 数据的全局只读变量；然后，当每个用户访问该页面时，服务器使用大数据生成一些输出，然后将其提供给用户。

例如，假设我有一个 4 GB 的文件`names.txt`，其中包含所有可能的英语专有名词：

```
Jack
John
Allison
Richard
... 
```

假设我的目标是将整个名称列表读入内存，然后从这个专有名词大列表中随机选择 1 个名称。我目前能够使用 Python 的本机 CGIHTTPServer 模块来完成此任务。首先，我直接运行 CGIHTTPServer 模块，从终端执行：

```
python -m CGIHTTPServer 
```

然后，有人访问`www.example-server.net:8000/foo.py`并随机给他们一个这些名称。我有以下代码`foo.py`：

```
#!/usr/bin/env python

import random

name_list = list()
FILE = open('names.txt','r')
for line in FILE:
    name = line[:-1]
    name_list.append(name)

FILE.close()
name_to_return = random.choice(name_list)

print "Content-type: text/html"
print
print "<title>Here is your name</title>"
print "<p>" + name_to_return + "</p>" 
```

这就是我想要的；但是，它的效率极低，因为每次访问都会迫使服务器重新读取一个 4 GB 的文件。

我怎样才能使它成为一个有效的过程，其中变量`name_list`在服务器启动时立即创建为全局变量，并且每次访问仅从该变量中读取？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T09:40:30.820

仅供将来参考，如果有人遇到同样的问题：我最终`CGIHTTPServer`对请求处理程序进行了子类化并实现了一个新`do_POST()`功能。如果你有一个没有全局变量的工作 CGI 脚本，这样的事情应该让你开始：

```
import CGIHTTPServer
import random
import sys
import cgi

class MyRequestHandler(CGIHTTPServer.CGIHTTPRequestHandler):
    global super_important_list
    super_important_list = range(10)
    random.shuffle(super_important_list)

    def do_POST(s):    
        """Respond to a POST request."""
        form = cgi.FieldStorage(fp=s.rfile,headers=s.headers,environ={'REQUEST_METHOD':'POST','CONTENT_TYPE':s.headers['Content-Type'],})
        s.wfile.write("<html><head><title>Title goes here.</title></head>")
        s.wfile.write("<body><p>This is a test.</p>")
        s.wfile.write("<p>You accessed path: %s</p>" % s.path)
        s.wfile.write("<p>Also, super_important_list is:</p>")
        s.wfile.write(str(super_important_list))
        s.wfile.write("<p>Furthermore, you POSTed the following info: ")
        for item in form.keys():
            s.wfile.write("<p>Item: " + item)
            s.wfile.write("<p>Value: " + form[item].value)
        s.wfile.write("</body></html>")

if __name__ == '__main__':
    server_address = ('', 8000)
    httpd = CGIHTTPServer.BaseHTTPServer.HTTPServer(server_address, MyRequestHandler)
    try:
        httpd.serve_forever()
    except KeyboardInterrupt:
        sys.exit() 
```

每当有人填写您的表单并执行 POST 时，该变量`form`将是一个类似字典的对象，其键值对可能因您网站的每个用户而异，但全局变量`super_important_list`对于每个用户都是相同的。

感谢所有回答我问题的人，尤其是 Mike Steder，他为我指明了正确的方向！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-06T14:36:06.177

CGI 通过产生一个进程来处理每个请求来工作。您需要运行一个驻留在内存中的服务器进程来处理 HTTP 请求。

您可以使用修改后的[BaseHTTPServer](http://docs.python.org/library/basehttpserver.html)，只需定义您自己的 Handler 类。您将在代码中加载一次数据集，然后处理程序的 do_GET 方法将随机选择一个。

就个人而言，我会研究像[CherryPy](http://www.cherrypy.org/)这样的简单解决方案，它比 IMO 比 BaseHTTPServer 好得多。除了 CherryPy 之外，还有很多选项，例如瓶子、烧瓶、扭曲、django 等。当然，如果您需要此服务器位于其他网络服务器之后，您需要考虑设置反向代理或将[CherryPy 作为 WSGI](http://tools.cherrypy.org/wiki/ModWSGI)运行应用程序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-06T14:34:10.670

您可能希望将名称的值存储在 db 中，并根据名称开头的字母存储名称。然后您可以对 a 和 z 之间的字母进行随机操作，然后从那里再次随机化以从您的随机开头字母中获取随机名称。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-06T14:40:33.590

构建一次[前缀树（又名 trie）](http://en.wikipedia.org/wiki/Trie)，并在收到查询时生成随机游走。

这应该是相当有效的。

# objective-c - iOS 4.3 在滚动视图上不显示标签

> ID：11830086
> 
> 赞同：-2
> 
> 时间：2012-08-06T14:16:27.827
> 
> 标签：objective-c, cocoa-touch, ios4, uiscrollview, uilabel

标签位于屏幕中央（或下方），iphone 4.3 不显示它。但 iphone 与 iOS 5.0 显示。全部在 IB 制造。

UPD：（代码）

```
 - (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        self.view.backgroundColor = [UIColor blackColor];
        [scroll setContentSize:CGSizeMake(320, 700)];
        scroll.frame = CGRectMake(0, 0, 320, 460);
    }
    return self;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T14:40:02.790

您可以像在代码中正常设置字体一样设置自定义字体。

```
UIFont *yourFont = [UIFont fontWithName:@"Helvetica Neue Medium" size:17.0]; 
```

您可能需要为字体名称中的空格添加“-”，以便字体名称看起来像这样。

```
@"Helvetica-Neue-Medium"
@"HelveticaNeue-Medium" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T14:26:20.487

我认为您已经在 IB 中设置了标签自定义字体，因此您需要在代码中设置自定义字体。请在 IB 中设置系统字体并签入两个设备。

```
 label.font=[UIFont fontWithName:@"HelveticaNeue-Medium" size:17.0]; 
```

# special-characters - Hotmail 中的嵌入式 URL 链接

> ID：11830088
> 
> 赞同：2
> 
> 时间：2012-08-06T14:16:37.763
> 
> 标签：special-characters, url-encoding, hotmail, email-client

Hotmail 自动编码嵌入的 url 链接。它改变 '！' 到“%21”，因此收到电子邮件的客户无法访问实际链接。

所有其他电子邮件客户端都呈现正确的 url，但 hotmail 把它弄得一团糟。

这个问题有解决方案吗？

# java - IllegalStateException java httpclient

> ID：11830090
> 
> 赞同：1
> 
> 时间：2012-08-06T14:16:48.827
> 
> 标签：java, apache-httpclient-4.x, illegalstateexception

我正在尝试使用 apache httpclient 从 Internet 检索文本文件。我正在使用以下代码：

```
 HttpClient httpclient = new DefaultHttpClient();
        HttpGet getHNMR = new HttpGet("http://www.hmdb.ca/labm/metabolites/" + HMDB + "/chemical/pred_hnmr_peaklist/" + HMDB + "_peaks.txt");
        HttpGet getCNMR = new HttpGet("http://www.hmdb.ca/labm/metabolites/" + HMDB + "/chemical/pred_cnmr_peaklist/" + HMDB + "_peaks.txt");

        try {
            responseH = httpclient.execute(getHNMR);
            responseC = httpclient.execute(getCNMR);
        } catch (ClientProtocolException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
            System.out.println("client exception");
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
            System.out.println("ioexception");
        }
        //Generate HNMR peak list
        HttpEntity entityH = responseH.getEntity();
        HttpEntity entityC = responseH.getEntity();;
        try {
            HNMR = EntityUtils.toString(entityH);
            CNMR = EntityUtils.toString(entityC);
        } catch (ParseException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
            System.out.println("parseexception");
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
            System.out.println("ioexception");
        }
    //Set peak lists to textarea
        HC.setText(CNMR + "\n" + HNMR); 
```

我得到以下堆栈跟踪：

```
Thread [pool-2-thread-1] (Suspended (exception IllegalStateException))  
ThreadPoolExecutor.runWorker(ThreadPoolExecutor$Worker) line: 1128  
ThreadPoolExecutor$Worker.run() line: 603   
Thread.run() line: 679 
```

我对调试不是很熟悉，所以我不确定到底发生了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T14:56:21.750

必须先使用响应正文*，然后才能*将连接用于另一个请求。您应该在下一次 HTTP 执行之前完整阅读响应 InputStream。您的代码应按以下顺序出现：

```
 responseH = httpclient.execute(getHNMR);
    HttpEntity entityH = responseH.getEntity();
    HNMR = EntityUtils.toString(entityH);

    responseC = httpclient.execute(getCNMR);
    HttpEntity entityC = responseC.getEntity();
    CNMR = EntityUtils.toString(entityC); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T15:16:48.000

您是否需要使用 httpClient？鉴于它只是一个文本文件并且您不需要任何 post 或 get 参数，一个更简单的方法是：

```
URL url = new URL("http://www.hmdb.ca/labm/metabolites/" + HMDB + "/chemical/pred_hnmr_peaklist/" + HMDB + "_peaks.txt");
InputStream response = url.openConnection().getInputStream(); 
```

# linq - 保存表单时出现 DataContext 错误

> ID：11830094
> 
> 赞同：0
> 
> 时间：2012-08-06T14:17:02.177
> 
> 标签：linq, datacontext

打开一个特定表单时出现此错误。其余的工作正常，我不知道为什么这个不是。

错误：已尝试附加或添加一个不是新的实体，可能是从另一个 DataContext 加载的。这是不支持的。

当我尝试保存时，我在 _oDBConnection 处收到错误消息。当我在运行代码时观看 _oDBConnection 时，它不存在。即使我打开主窗口它也不存在。所以这个表单是第一次构建 DataContext 的地方。

每个类都从构建 DataContext 的 clsBase 继承。

我的同事是建造这一切的专业人士。我只是在扩展和使用它（边做边学）。但现在我被困住了，他正在度假。所以保持简单:-)

会是什么？

clsPermanency

```
namespace Reservation
{
    class clsPermanency : clsBase
    {
        private tblPermanency _oPermanency;

        public tblPermanency PermanencyData
        {
            get { return _oPermanency; }
            set { _oPermanency = value; }
        }

        public clsPermanency()
            : base()
        {
            _oPermanency = new tblPermanency();
        }       
        public clsPermanency(int iID)
            : this()
        {
            _oPermanency = (from oPermanencyData in _oDBConnection.tblPermanencies
                            where oPermanencyData.ID == iID
                            select oPermanencyData).First();

            if (_oPermanency == null)
                throw new Exception("Permanentie niet gevonden");
        }

        public void save()
        {
            if (_oPermanency.ID == 0)
            {
                _oDBConnection.tblPermanencies.InsertOnSubmit(_oPermanency);
            }
            _oDBConnection.SubmitChanges();
        }
    }
} 
```

clsBase

```
public class clsBase
{
    protected DBReservationDataContext _oDBConnection;
    protected int _iID;

    public int ID
    {
        get { return _iID; }
    }

    public DBReservationDataContext DBConnection
    {
        get { return _oDBConnection; }
    }

    public clsBase()
    {
        _oDBConnection = new DBReservationDataContext();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T18:17:05.667

不是直接的答案，但这是非常糟糕的设计，抱歉。

问题：

1.  **每个类实例一个上下文实例**。相当不可思议。您将如何管理工作单元和事务？那么内存消耗和性能呢？

2.  **间接**：每个实体实例（前缀`o`）都包装在一个`cls`类中。如有必要，让类合作或访问它们的属性是多么麻烦。

3.  **干燥**：远非如此。每个`clsBase`导数是否具有与 相同的方法`clsPermanency`？

4.  **构造函数**：您总是必须调用基本构造函数。构造函数`int iID`总是会导致创建一个冗余`new`对象，这在处理更大的数字时肯定会对性能造成显着影响。构造函数逻辑的微小变化可能会导致构造函数调用的顺序发生变化。（嵌套和继承的构造函数总是很棘手）。

5.  **异常处理**：在创建类的任何地方都需要一个 try-catch。（顺便说一句：`First()`如果记录不存在，将抛出自己的异常）。

最后，这不是一个真正的问题，但类和变量名前缀太 19xx。

## 该怎么办？

*   我认为你不能在你同事不在的情况下改变他的设计。但我真的会在适当的时候和他谈谈。只需研究一些 linq-to-sql 示例以获取一些常规模式。
*   异常表明在获取`_oPermanency`实例（在 Id-d 构造函数中）和保存它之间的某个地方创建了一个新实例`_oDBConnection`。所示的代码并未揭示这是如何发生的，但我认为还有比这更多的代码。当您调试并检查`_oDBConnection`实例的 GetHashCode() 时，您应该能够找到它发生的位置。

# jenkins - 设置 Jenkins 以监控外部作业

> ID：11830098
> 
> 赞同：19
> 
> 时间：2012-08-06T14:17:15.467
> 
> 标签：jenkins, monitoring

我阅读了[Jenkins wiki](https://wiki.jenkins-ci.org/display/JENKINS/Monitoring+external+jobs)的部分内容，该部分涵盖了设置由 Jenkins 实例监控的远程作业。但是，文档令人困惑，因为它没有告诉我在 Jenkins 机器或远程机器（完成这项工作的机器）上配置什么。

此外，文档还提到了可以直接触发的 Java 命令以及其他需要 servlet 容器的命令。我必须在远程机器上安装一个 servlet 容器吗？

也许一切都在那里，但对我来说，这就像两个文档的混合。你能否澄清一下：

*   我需要在远程机器上做什么？
*   我需要在 Jenkins 机器上做什么？

谢谢你。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-08-07T00:27:27.830

在 Jenkins 中，您需要使用“监控外部作业”选项来创建作业。给它一个名字，例如“nightly-backup”。

在运行外部作业的机器上，您需要安装 Java 和一些基本的 Jenkins JAR 文件，以便将作业结果发送给 Jenkins。

正如 wiki 页面所说，在某些版本的 Debian 或 Ubuntu 上，您可以这样做：
`sudo apt-get install jenkins-external-tool-monitor`

否则，您必须手动将一堆 JAR（即 wiki 页面上列出的那些）复制到您的远程计算机。

一旦你的远程机器上有可用的 JAR，你就可以在那里执行你喜欢的任何命令，只要你在它前面加上一些 Jenkins 信息：在哪里可以找到 Jenkins 安装、主 Java JAR 和作业名称：

```
JENKINS_HOME=http://my-jenkins/ java -jar jenkins-core-*.jar nightly-backup ./backup.sh --nightly /home 
```

`http://my-jenkins/`Jenkins 的基本 URL在哪里，`nightly-backup`与您在 Jenkins 中创建的“监控外部作业”的名称相匹配，并且`./backup.sh --nightly /home`是您希望运行的命令。

此`./backup.sh`命令的输出将在完成后自动显示在 Jenkins 中。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-04T00:38:29.693

看起来这现在被称为“ [jenkins-external-job-monitor](http://packages.ubuntu.com/precise/jenkins-external-job-monitor) ”，所以你可以输入：

```
sudo apt-get install jenkins-external-job-monitor 
```

# java - 绑定combobox和JLabel数组，图片在一起

> ID：11830099
> 
> 赞同：0
> 
> 时间：2012-08-06T14:17:20.227
> 
> 标签：java, swing, oop, jlabel, jcombobox

我需要一些关于 Java OOP 的 GUI 帮助，我正在使用 Eclipse。

我正在创建一个带有 Combobox、JLabel 和图片的“选择航空公司”GUI。

第一个选择，F16（组合框）添加 $600（JLabel）F16.jpg（组合框外）。

但是在选择第二选择F22（Combobox）时，Jlabel应该自动更改$ 900（Jlabel）以及图片到F12.jpg

任何人都可以帮助我使用 Combobox、JLabel 编码、图片

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T16:35:33.450

基本上你想`ItemListener`在你的`JComboBox`：

```
 JComboBox box = new JComboBox();
        // Adds a listener - this performs an action when the item changes.
        box.addItemListener(new ItemListener(){
            @Override
            public void itemStateChanged(ItemEvent e) {
                //Checks if this event was caused because an item was selected
                if((e.getStateChange() & ItemEvent.SELECTED) == ItemEvent.SELECTED){
                    System.out.println(e.getItem());
                    // This is where you'd modify your label based on the dropdown's value - something like this:
                    label.setText("$900");
                }
            }});
        panel.add(box); 
```

# java - IDE 中的异常处理与运行时作为 exe 或 jar 的异常处理是否不同？

> ID：11830101
> 
> 赞同：0
> 
> 时间：2012-08-06T14:17:24.483
> 
> 标签：java, exception, exception-handling, ide, throw

我正在做一个物理程序，随着时间的推移，我继续用异常处理来捆绑越来越多的松散端，以防止冻结和锁定。现在我在控制台中遇到了某些异常，例如 StringFormatException(s)，但是这个错误不会冻结程序，也不会以任何方式影响运行时，它只是显示在 IDE 的终端（Eclipse IDE，JRE 7 ）。在处理诸如此类的错误时，（似乎）不会影响运行时，即使程序运行良好，处理异常仍然很重要吗？如果我将程序导出为 .jar 并且只处理这些类型的错误，用户会注意到吗？为什么有些错误会导致大问题，而有些则不会？

旁注：我问这个主要是因为在未来，当承担比这个大得多的项目时，我相信有时我的代码中可能存在大量异常被抛出但尚未处理的地方. 在涉及数万行代码的大型项目中，许多程序员是否会忽略这些类型的不影响逻辑或运行时的错误，并得出结论认为没有必要或不值得花时间去修复所有这些错误？或者，是否有必要养成一种习惯，将可能的错误抛出情况记入记忆中，并掌握所有可能的错误。

如果您有可用的源代码并注意到此类事情，将非常感谢具有与此类似的错误的软件示例，允许程序像什么都没发生一样运行的示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T14:22:47.263

> 即使程序运行良好，处理异常仍然很重要吗？

即使它看起来工作正常，也可能不是。如果您养成忽略异常的习惯，您可以轻松地忽略导致问题的异常。

> 如果我将程序导出为 .jar 并且只处理这些类型的错误，用户会注意到吗？

这取决于他们是否看到输出。

> 为什么有些错误会导致大问题，而有些则不会？

有些错误比其他错误更严重。理想情况下，您只需要严重错误或没有错误。不太严重的错误更有可能出现更难/更不可能修复的微妙问题。

> 在涉及数万行代码的大型项目中，许多程序员是否会忽略这些类型的不影响逻辑或运行时的错误，并得出结论认为没有必要或不值得花时间去修复所有这些错误？

除非你打算用它做一些有用的事情，否则最好不要处理或捕获异常。否则最好重新抛出它，前提是它至少会被记录下来。

> 那些允许程序像什么都没发生一样运行的程序将不胜感激

FileNotFoundException、EOFException、NumberFormatException 是在代码中处理的常见异常（但很少被忽略）谷歌示例。

假装没有发生异常几乎总是一个坏主意。如果您不在乎某件事是否有效，那么您通常一开始就不需要它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T14:23:29.267

可能存在不影响程序执行的运行时错误，但我强烈敦促您尽可能处理或修复每个错误的原因。

如果您不修复或处理运行时错误，您的日志（如果有的话！）将充满它们，您将无法从所有噪音中看到您真正应该关心的错误。

# c++ - 你能给我一个内存泄漏的真实例子吗？

> ID：11830105
> 
> 赞同：2
> 
> 时间：2012-08-06T14:17:52.547
> 
> 标签：c++, memory-leaks

听说有很多内存泄漏漏洞，但是我找不到内存泄漏的实际工作示例，您能否提供一个内存泄漏的实际工作示例，可能是一些大型开源项目并解释解决方案给我

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T14:20:25.697

其实很简单。在您的主要内容中：

```
char* c = new char[4]; 
```

然后退出。那是内存泄漏。任何`new`不被跟踪的`delete`都是泄漏。

[这个答案](https://stackoverflow.com/a/1332724/1549464)有一些很好的例子，但就像我的评论所说的那样，很难找到一个外部观察者可以查看并轻松识别的带有泄漏的已发布应用程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T15:40:23.120

我每天都在为我们（巨大的）遗留代码库中的这样的代码尖叫、诅咒和大喊：

```
// returns raw pointer with changing conventions who's the owner...
HelpFoo* Foo::GetFoo(Bar* pBar, OtherFoo* pFoo)
{
    // all 'local' variables even those allocated on freestore declared 
    // and initialized in a large block at the beginning of the function/method
    HelpFoo *A = new HelpFoo;
    OtherHelpFoo *B, *C;
    EvenMore *D = new EvenMore;
    // and so on, these blocks can be huge...

    // a complicated spaghetti code in here, with dozens of nested 'ifs'
    if (/* some expression */) {
    } else if (/* some other expression */) {
        // and so on... then suddenly: 
        if (/* some other nested expression */) {
            // I forgot that I've allocated other memory at the beginning...
            return A;
        }
    }

    // some miserably written logic here and suddenly
    if (D) delete D; return A;

    // call to some other function with cryptical name without any
    // kind of knowledge what happens with the resource:
    FooTakesReferenceToPointer(&A);

    // suddenly returning something completely different
    // what should I free, A, D...? 
    return C;
} 
```

我试图在评论中写出问题所在。显然，忘记例外。意大利面条代码太糟糕了，没有人能说出实际的逻辑是什么。因此，忘记释放内存真的非常容易，而且这种情况非常非常频繁地发生。解决方案1：丢弃并重写所有内容。解决方案 2：保持原样，`new`用智能指针和`make_shared`or替换所有 ed 资源`make_unique`，让编译器大喊大叫。当然，首先编写一个测试套件（以前不存在）以保证所有可能的输入集（未记录）的相同（通常是搞砸的）行为。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-06T16:27:26.257

编辑正如詹姆斯所说，这是未定义的行为，所以没有承诺

你可以这样做：

```
#include <vector>

class Base 
{
public:
    Base() 
    {
        baseData = new char [1024];
    }
    ~Base()
    {
        delete [] baseData;
    }

private:
    char* baseData;
};

class Derived : public Base
{
public:
    Derived()
    {
        derivedData = new char[1024];
    }

    ~Derived()
    {
        delete [] derivedData;
    }

private:
    char* derivedData;
};

int main()
{
    std::vector<Base*> datablocks;
    datablocks.push_back(new Base());
    datablocks.push_back(new Derived());

    for(unsigned int i = 0; i < datablocks.size(); ++i) 
    {
        delete datablocks[i];
    }
    datablocks.clear();

    return 0;
} 
```

Derived 类中的数据不会在此处删除，因为我们在 Base* 上调用 delete 并且 Base 类没有声明虚拟析构函数。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-06T14:26:12.883

这里可以举出很多例子。只需分配一些内存，不要释放它。

一个很好的例子如下：

```
char* pBuffer = new char[ 1024 ]; // or something else, dynamically allocated

// do something here

// now suppose, calling f() throws
f();

// do some other things

delete[] pBuffer; 
```

当`f()`throws 时，如果异常没有被捕获，`delete[]`将永远不会被执行。因此，内存泄漏。

这是应该使用智能指针的最佳示例之一。

* * *

另一个例子是 - 一个函数，返回指向动态分配内存的指针。用户通常可能会忘记释放该内存。就像是：

字符

```
char* f()
{
    return new char[ 1024 ];
}

//... 

// in some other function
char* pSomething = f();

// do some stuff here and return 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-06T15:29:51.783

虽然其他答案给出了足够的提示，但我在我们的应用程序中看到了一些“真实世界”的内存泄漏。我不记得这是在发布之前还是之后发现的，但是，我想这并不重要。

```
void f()
{

   BYTE* b = NULL;

   f = open a file;

   while (!f.end())
   {
      int size = getNextRecordSize(f);
      b = new BYTE;
      readNextRecord(f,b);

      process record;
   }

   delete b;
} 
```

很难检测到这一点。审阅者可能会理所当然地认为通过看到删除调用正确删除了内存。但是，它只删除为最后一条记录分配的内存。休息被泄露。

```
class A
{
    public:

    BYTE* get()
    {
        allocate a new buffer, copy the someData buffer and return that. 
        The client is expected to delete it
    };

private:

    BYTE* someData;
};

void f()
{
    A a;
    B.initialize(a.get());  // It is so convenient to use the pointer. It is not obvious from the function name
                           //  that the result of get has to be deleted.

} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-06T14:38:08.923

想象一下，您正在处理网络数据并根据数据创建多态“消息对象”：

```
while (true)
{
    char buf[1024];

    size_t len = read_from_network(buf, 1024);  // fictitious, for demonstration only

    Message * p = Message::Parse(buf, len);     // allocates new, dynamic, concrete object

    engine.process(p);
} 
```

对象可能会选择将`engine`对象存储在某个地方并稍后再次使用它，如果没有人负责删除它，那么您就有了完美的泄漏。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-06T14:28:15.783

只需丢失指向动态分配内存的指针：

```
void foo()
{
   int *arr = new int[100];
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-07T07:07:17.893

给你一个真实的例子，在 389 Directory Server（一个 RedHat 开源产品）中搜索一下[这个内存泄漏。](https://www.cert.be/pro/advisories/389-directory-server-normalisation-memory-leak-denial-service)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-06T14:27:14.007

我经常在我们的代码中遇到的一个例子是图像理解函数，其中分配了一个临时的 8 位内存，并且永远不会释放（是的，我知道，当你做一个新的，然后做一个删除......）

```
unsigned char* dataToBeUsed = new unsigned char[imgsize];
memcpy(dataToBeUsed, original, imgsize);
// use and process the data here

return value; 
```

分配的内存永远不会释放 -> 内存泄漏。当应用程序完全退出时，Windows 将杀死内存，但在此之前，在应用程序中内存刚刚丢失-> 泄漏。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-08-06T14:34:49.210

当程序员因忘记释放分配的内存而发生内存泄漏时，就会发生内存泄漏:-)

```
linebuffer = new char[4096];
/* do things */
/* forget to free memory */ 
```

通常，如果您导致内存泄漏然后退出程序，这并没有什么害处，因为操作系统**通常会**释放程序分配的资源。当您的应用程序运行很长时间（例如，服务）时，就会出现问题。如果您的程序导致内存泄漏，那么您将耗尽系统的内存，除非操作系统有避免这种情况的机制；在这种情况下，它将终止您的程序。

所以，小心吃鱼：这对记忆很有好处:-)

# visual-studio-2010 - 通过 tcm 启动测试后获取测试运行 ID

> ID：11830110
> 
> 赞同：0
> 
> 时间：2012-08-06T14:18:11.447
> 
> 标签：visual-studio-2010, automated-tests, microsoft-test-manager, tcm

我有一个 PowerShell 脚本，可以使用 Microsoft 测试管理器的命令行界面 (tcm.exe) 启动自动测试运行。

然后我还有一个与测试运行关联的清理 Powershell 脚本（在 .testsettings 文件中），它导出测试结果（tcm.exe run /export），但我的问题是我需要测试运行 ID。它是 'tcm.exe run /create' 命令的输出，但它没有用，因为首先它输出为“Run created with ID: 501”，其次是因为 /create 命令是从单独的 PowerShell 脚本。

我可以使用 tcm.exe run /list 来获取所有测试 ID 的列表，但这没用，因为我只需要最近一次的测试运行。

任何想法，任何人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T08:06:26.233

```
"Microsoft Test Manager : Start automated sanity test"
$testRunID = & "C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\TCM.exe" run /create /title:"Automated UI Tests" /planid:27 /suiteid:721 /configid:10 /settingsname:"UI Test Settings" /testenvironment:"MyTestEnvironment" /collection:"http://MyCollection" /teamproject:Main /builddir:"C:\MyBuildDir" /include

"Get test run ID from TCM output"
$testRunID = $testRunID.substring(21)
$testRunID = $testRunID.TrimEnd(".")

"Store test run ID in user environment variable"
[Environment]::SetEnvironmentVariable("CodedUITestRunID", "$testRunID", "User") 
```

这是我的解决方案。我将 tcm.exe run /create 的输出存储到 $testRunID 中，然后删除字符串的开头，“使用 ID 创建运行：”，然后删除字符串末尾的句号，这让我仅包含测试 ID 号，我使用 .NET 代码将其设置为环境变量（请参见[此处](http://powershell.com/cs/blogs/ebookv2/archive/2012/02/02/chapter-3-variables.aspx#modifying-environment-variables)）。

后来，我有一个计划任务，假设测试运行已经完成，并运行一个包含（除其他外）以下内容的脚本：

```
"Test Run ID"
$testRunID = [Environment]::GetEnvironmentVariable("CodedUITestRunID", "User")

"Microsoft Test Manager: Export test results"
& "C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\TCM.exe" run /export /id:"$testRunID" /resultsfile:"C:\ResultsPath\MyResultsfile.trx" /collection:"http://MyCollection" /teamproject:"Main" 
```

这只是从我之前设置的环境变量中检索测试运行 ID，然后运行 ​​Microsoft 测试管理器命令行实用程序 (tcm.exe) 的 /export 命令，输入测试运行 ID。

# php - ajax 表单提交后访问 $_POST 变量

> ID：11830113
> 
> 赞同：0
> 
> 时间：2012-08-06T14:18:18.097
> 
> 标签：php, jquery, ajax, forms

我正在使用 AJAX (jQuery) 向 PHP 脚本提交表单。

这是JavaScript：

```
// Validate form fields
$(function () {
    //Check to see if email is not empty
    if (email == "") {
        $("label#email_error").show();
        $("input#email").focus();
        return false;
    }

    var dataString = 'firstname=' + firstname + '&email=' + email + '&lastname=' + lastname;

    $.ajax({
        type: "POST",
        url: "/",
        data: dataString,
        success: function () {
            var counter = <?php echo($counter['count'] + 1); ?>

            counter = numberWithCommas(counter);

            $('#counter').html(counter);
            $('#contact_form').html("<div id='message'></div>").fadeIn(1500, function () {
                $('#message').html("<h2>Thanks " + (firstname) + "!</h2>").append("<p>We will be in touch soon.</p>");
            });
        }
    });
    return false;
}); 
```

在 PHP 脚本中，我有以下代码：

```
if (!empty($_POST)){        
    $adestra = $this->adestraAction('contact.create' , array('1', array('1.email' =>  $_POST['email'] , '1.forename' => $_POST['firstname'] , '1.surname' => $_POST['lastname'],'1.source' => 'signupbox' )));
    $add = $this->addToListAction($adestra, $magazineID);
} 
```

$_POST 变量似乎没有被设置。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T14:32:37.167

```
data: dataString : dataString, 
```

这是一个语法错误。我假设你真的想要：

```
data: dataString, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T14:32:47.713

jQuery POST 请求中的数据必须是 Javascript 对象。

将其更改为：

```
data: {
   'key' : 'value'
} 
```

或者，如果 dataString 已经格式化为查询字符串，请参阅 Rocket 的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T15:39:35.257

请在此行之后调试/警告 dataString

```
var dataString = 'firstname=' + firstname + '&email=' + email + '&lastname=' ..... 
```

查看是否所有值都被正确填充？这可能是问题

# ruby-on-rails-3 - 使用 Ruby on Rails 在 PDFKit 中设置标题大小？

> ID：11830114
> 
> 赞同：2
> 
> 时间：2012-08-06T14:18:20.883
> 
> 标签：ruby-on-rails-3, header, pdfkit

我需要在 pdf 的每一页上显示一个重复的图像。到目前为止，我发现的唯一解决方案是将其放入标题中

`%meta{:name => 'pdfkit-header_html', :content => pdf_header_url}`

工作正常，但图像大于标题大小。有什么办法可以增加标题的高度或以某种方式在标题之外放置重复图像？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T10:37:47.817

您需要调整`margin-top`和`header-spacing`值。例如：

```
%meta{:name => 'pdfkit-header_html', :content => pdf_header_url}
%meta{:name => 'pdfkit-margin_top', :content => '3cm' }
%meta{:name => 'pdfkit-header_spacing', :content => '10' } 
```

从[wkhtmltopdf 文档](https://github.com/antialize/wkhtmltopdf/blob/master/README_WKHTMLTOPDF)：

```
--header-spacing * <real>         Spacing between header and content in mm
                                  (default 0)
-T, --margin-top <unitreal>       Set the page top margin (default 10mm) 
```

您可以将任何 wkpdftohtml 选项放在元标记中，PDFKit 将通过它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T14:11:51.397

我最终添加了这段代码

```
PDFKit.configure do |config|
  config.default_options = {
    :page_size     => 'Letter',
    :margin_top    => '3.6in',
    :margin_right  => '0.3in',
    :margin_bottom => '1.3in',
    :margin_left   => '0.3in'
  }
end 
```

到 /config/initializers/pdfkit.rb。重新启动服务器后，我的工作就像魅力一样。

# php - php计算

> ID：11830115
> 
> 赞同：-7
> 
> 时间：2012-08-06T14:18:21.867
> 
> 标签：php

```
1 - 165.25
2 - 165.25
3 - 165.25
4 - 165.25
5 - 165.25
6 - 165.25
7 - 165.25
8 - 165.25
9 - 165.25
10 - 165.25 
```

如何从所有 10 个数量 (0.25x10) = 2.5 计算 0.25 并将该数量添加到最后一个值，如下所示：

```
1 - 165
2 - 165
3 - 165
4 - 165
5 - 165
6 - 165
7 - 165
8 - 165
9 - 165
10 - 167.5 
```

代码

```
$amount = 165.25; // can be any number
    $periods = 10; // can be from 1 to 100;

for($i=1;$i<=$periods;$i++){
echo $i. ' - '.$amount."<br />";
} 
```

更新工作示例：

```
$amount = 165.25; // can be any number
$periods = 10; // can be from 1 to 100;

$z = 0;
for($i=1;$i<=$periods;$i++){

    $e = explode(".", $amount);

    $z += $e[1] / 100;

    if($i == $periods){
        $e[0] += $z;
    }

echo $i. ' - '.$e[0]."<br />";
} 
```

我不喜欢爆炸部分任何替代品？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T14:23:30.840

```
$amount = 165.25;
$tmp = 0;
for($i=1;$i<=9;$i++){
  $tmp = $tmp + $amount - floor($amount);
  echo $i. ' - '.floor($amount)."<br />";
}
echo $i. ' - '.$amount+$tmp."<br />"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T14:24:45.200

```
$total = 0;
for($i=1;$i<=10;$i++){
    $total += $amount - floor($amount);
    if($i == 10){
       echo $i . ' - ' . (floor($amount) + $total); 
    }else{
        echo $i. ' - '. floor($amount)."<br />";
    }
} 
```

像这样的东西？

# codeigniter - 带有codeigniter的谷歌日历

> ID：11830122
> 
> 赞同：0
> 
> 时间：2012-08-06T14:18:41.933
> 
> 标签：codeigniter, google-calendar-api

我正在尝试将 Google Calendar 集成到我的 php 应用程序中（为此我使用 CodeIgniter）。我的控制器 calendar.php 有问题。

```
<?php 
session_start();

Class Calendar extends Controller {

function Calendar(){
    echo 'start';
    parent::Controller();
    echo 'okkkkkkkk';
    require_once '/home/me/framework/ZendGdata/library/Zend/Loader.php';
    Zend_Loader::loadClass('Zend_Gdata');
    Zend_Loader::loadClass('Zend_Gdata_AuthSub');
    Zend_Loader::loadClass('Zend_Gdata_ClientLogin');
    Zend_Loader::loadClass('Zend_Gdata_Calendar');
} 
```

但是有一个问题，`parent::Controller()`因为没有打印'okkkkkkk'。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T14:24:14.930

改变

```
parent::Controller(); 
```

到

```
parent::__construct(); 
```

`parent::Controller()`在 CI 中不起作用，因为从 CI 2.1.2 开始，构造函数是使用 PHP 的`__construct()`方法声明的。

作为旁注，您似乎使用的是旧版本的 CI。从 CI 2.o 开始，基本控制器类被调用`CI_Controller`而不是 just `Controller`。您应该考虑通过替换`system`文件夹来更新您的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-07T08:39:55.240

您可以在以下链接[https://github.com/omerkamcili/ci_google_calendar_api](https://github.com/omerkamcili/ci_google_calendar_api)中找到完整的工作代码。

下载代码后创建您的服务帐户，OAuth 客户端 ID 在以下链接[http://console.developers.google.com](http://console.developers.google.com)中。

然后`client_id,client_secret,redirect_uri's`在你的项目文件中替换以下路径-> `/project_folder/application/config/client_secret_846685841138-t0a5b9d2i655e7km54md8j440jcg5rr5.apps.googleusercontent.com.json`文件最后下载并替换`google-api-php-client`在以下文件路径中`/project_folder/application/third_party/google-api-php-client`

# ios - 将 UIImage 设置为自定义 UIButton 的问题

> ID：11830129
> 
> 赞同：2
> 
> 时间：2012-08-06T14:19:05.330
> 
> 标签：ios, uiimageview, uibutton

我有 a`UIViewController`有两个属性： a`UIImageView`和 a `UiButton`。它们都`IBOutlets`正确连接在`Interface Builder`. 我的问题是，当我实例化这个视图并设置两个属性时，只`UIImageView`设置了。我`UIButton`是一个`custom`按钮，我正在尝试为`UIImage`它分配一个。这是我的代码：

```
MyViewController *viewController = [[MyViewController alloc]initWithNibName:@"MyViewController" bundle:nil];

[viewController view];

viewController.myImageView.image = [UIImage imageNamed:@"image1.png"];

viewController.myButton.imageView.image = [UIImage imageNamed:@"image2.png"]; 
```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T14:26:23.227

似乎您需要使用特定方法来设置 UIButton 的图像，而不是访问属性的设置器。那个方法是：

```
[viewController.myButton setImage:[UIImage imageNamed:@"image2.png"] forState:UIControlStateNormal];
//Or some other variant of UIControlState such as UIControlStateSelected, UIControlStateDisabled, UIControlStateHighlighted, etc. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T14:26:06.507

代替

```
viewController.myButton.imageView.image = [UIImage imageNamed:@"image2.png"]; 
```

和

```
[viewController.myButton setBackgroundImage:[UIImage imageNamed:@"image2.png"] forState:UIControlStateNormal]; 
```

应该管用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T14:26:48.490

这不是您为按钮设置图像的方式，您应该使用

```
[viewController.myButton setBackgroundImage:[UIImage imageNamed:@"image2.png"] forState:UIControlStateNormal]; 
```

# java - Rabbit Mq 状态检查

> ID：11830132
> 
> 赞同：1
> 
> 时间：2012-08-06T14:19:10.720
> 
> 标签：java, spring, hibernate, jakarta-ee, rabbitmq

在我的春天，使用了休眠应用程序 RMQ。我在这个应用程序中有一个 url 来检查数据库连接的状态和线程的状态。我还想包括`RMQ`应用程序的连接状态检查。请指导我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T15:53:17.543

很难给出具体的答案，因为这取决于您如何在应用程序中管理与 RabbitMQ 代理的连接...

但是本质上，您需要做的就是查看连接上的 IsOpen 属性

您可能在应用程序的某处有此代码：

```
ConnectionFactory factory = new ConnectionFactory();
factory.set...
Connection connection = factory.newConnection(); 
```

检查当前状态所需要做的就是：

```
bool connected = connection.IsOpen(); 
```

# ios - glGetRenderbufferParameterivOES 返回错误的大小

> ID：11830134
> 
> 赞同：2
> 
> 时间：2012-08-06T14:19:20.833
> 
> 标签：ios, ios5, opengl-es

我目前正在开发一个需要在其视图的渲染缓冲区上绘制的 iOS 应用程序。这些视图可以通过手势调整大小，因此，我正在调整渲染缓冲区的大小。

但是，当用户将视图大小调整为快速时，`glGetRenderbufferParameterivOES(GL_RENDERBUFFER_OES, GL_RENDERBUFFER_WIDTH_OES, &backingWidth);`返回错误值。

```
glBindFramebufferOES(GL_FRAMEBUFFER_OES, viewFramebuffer);
glBindRenderbufferOES(GL_RENDERBUFFER_OES, viewRenderbuffer);

if(NO == [context renderbufferStorage:GL_RENDERBUFFER_OES fromDrawable:(id<EAGLDrawable>)self.layer]) {
    NSLog(@"renderBufferStorage unsucessful!");
}
NSLog(@"_ %d %d", (int)self.layer.bounds.size.width, (int)self.layer.bounds.size.height);
glFramebufferRenderbufferOES(GL_FRAMEBUFFER_OES, GL_COLOR_ATTACHMENT0_OES, GL_RENDERBUFFER_OES, viewRenderbuffer);
glGetRenderbufferParameterivOES(GL_RENDERBUFFER_OES, GL_RENDERBUFFER_WIDTH_OES, &backingWidth);
glGetRenderbufferParameterivOES(GL_RENDERBUFFER_OES, GL_RENDERBUFFER_HEIGHT_OES, &backingHeight);

glGenRenderbuffersOES(1, &depthRenderbuffer);
glBindRenderbufferOES(GL_RENDERBUFFER_OES, depthRenderbuffer);
glRenderbufferStorageOES(GL_RENDERBUFFER_OES, GL_DEPTH_COMPONENT16_OES, backingWidth, backingHeight);
glFramebufferRenderbufferOES(GL_FRAMEBUFFER_OES, GL_DEPTH_ATTACHMENT_OES, GL_RENDERBUFFER_OES, depthRenderbuffer);

if(glCheckFramebufferStatusOES(GL_FRAMEBUFFER_OES) == GL_FRAMEBUFFER_COMPLETE_OES) 
    NSLog(@"+ %d %d", backingWidth, backingHeight); 
```

缓慢调整大小会产生以下输出（或多或少可以）：

```
_ 452 321
+ 450 319
_ 453 322
+ 452 321
_ 453 322
+ 452 321
_ 453 323
+ 453 323 
```

虽然快速调整大小（这里是增长，而不是缩小）给了我以下输出（这不好，差异很大）

```
 _ 491 350
 + 456 325
 _ 555 394
 + 491 348
 _ 548 390
 + 554 394
 _ 540 384
 + 548 390
 _ 459 326
 + 539 383
 _ 389 277
 + 459 326
 _ 313 222
 + 389 275 
```

如果我对结果不满意（立即和延迟），我已经尝试人为地延迟调整大小或再次调用调整大小功能 - 均未成功。

一个在现有代码中非常/太难合并的解决方案是在纹理中渲染，然后在视图上绘制纹理。关于渲染缓冲区/EAGLDrawable，我是否缺少任何东西，或者 API 不适合实时调整大小？

我已经检查了 glErrors 没有任何结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:37:06.873

我真的不确定为什么会这样，但这里有一些想法：

也许层的后备存储没有及时更新`layoutSubviews`。您可以尝试将此移动到`CADisplayLink`回调中，看看是否能得到更好的结果。

如果您的目标是 iOS 5+，则另一种选择是使用`GLKView`，或者允许`CALayer`在实时调整大小期间缩放其内容。

# iphone - 如何在 iOS 上使用 Dropbox API 响应成功登录？

> ID：11830135
> 
> 赞同：3
> 
> 时间：2012-08-06T14:19:20.157
> 
> 标签：iphone, ios, dropbox, dropbox-api

它会在我的应用程序启动时检查用户是否登录到 Dropbox。如果是，则继续使用与 Dropbox 相关的代码。如果没有，它会向他们显示一个使用`[[DBSession sharedSession] link];`.

如果授权失败，则从登录屏幕出现此委托：

```
-(void)sessionDidReceiveAuthorizationFailure:(DBSession *)session userId:(NSString *)userId {
    [[DBSession sharedSession] link];
} 
```

但是授权成功时似乎没有什么东西。我该如何处理这种情况？与 Dropbox 链接后，我需要开始运行必要的代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T15:10:08.170

您在 Dropbox API 中处理成功登录

`-(BOOL) application:(UIApplication *)application handleOpenURL:(NSURL *)url`功能

```
-(BOOL) application:(UIApplication *)application handleOpenURL:(NSURL *)url {

    if ([[DBSession sharedSession] handleOpenURL:url]) {
        //Successfully Logged in to Dropbox
        return YES;
    }

    return NO; 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T14:36:52.747

作为 applicationDidFinishLaunching 的一部分，您可以启动 Dropbox api，您可以执行以下操作。

```
dispatch_async(dispatch_get_main_queue(), ^{  
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    DBSession* dbSession = [[[DBSession alloc] initWithAppKey:@"appKey" appSecret:@"appSecret" root:kDBRootAppFolder] autorelease];
    dbSession.delegate = self;  
    [DBSession setSharedSession:dbSession];  
    [[NSNotificationCenter defaultCenter] postNotificationName:kSharedSessionAvailability  object:[NSNumber numberWithBool:dbSession != nil ? YES : NO]];  
}); 
```

但通常您只需获取会话并稍后通过 restClient 使用它。

# java - Java 链式集合映射

> ID：11830138
> 
> 赞同：0
> 
> 时间：2012-08-06T14:19:34.930
> 
> 标签：java, collections, types, map

我有一个列表`Things`，每个列表都有一个*类别*（一个`int`）。我最终想要的是一个 Map，其中键是类别，值是该类别的`Things`所有*列表*。目前我不得不相当手动地执行此操作，所以我想知道是否有某种我不知道的类型。

目前，我执行以下操作：

```
List<Thing> things = thingGenerator.generateTheThings();
Map<Integer,List<Thing>> categoriesOfThing = new TreeMap<Integer,List<Thing>>();

for(Thing thing : things) {
    int thingCategory = thing.getCategory();
    List<Thing> oneCategoryOfThing;
    if(categoriesOfThing.containsKey(thingCategory) {
        oneCategoryOfThing = categoriessOfThings.get(thingCategory);
    }
    else {
        oneCategoryOfThing = new ArrayList<Thing>();
    }

    oneCategoryOfThing.add(thing);
    categoriesOfThing.put(thingCategory,oneCategoryOfThing);
}

for(int i = 0; i < numberOfCategories; i++) {
    List<Thing> similarThings = categoriesOfThing.get(i);
    foo(similarThings);
} 
```

我希望能够做的事情有点像以下：

```
List<Thing> things = thingGenerator.generateTheThings();
ChainedMap<Integer,Thing> categoriesOfThing = new ChainedMap<Integer,Thing>();

for(Thing thing : things) {
    categoriesOfThing.add(thing.getCategory(), thing);
}

for(int i = 0; i < numberOfTypes; i++) {
    List<Thing> similarThings = categoriesOfThing.get(i);
    foo(similarThings);
} 
```

就像[Apache MultiKey](http://commons.apache.org/collections/api-3.0/org/apache/commons/collections/keyvalue/MultiKey.html)允许在地图中使用多个键一样，我希望多个值可以在`List`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T14:52:40.613

评论中的其他地方建议 OP 应该使用 Guava——除其他外，它提供泛型，不像链接的 Apache 文档——所以这里是 Guava 解决方案。（披露：我为 Guava 做出了贡献。）

```
 ListMultimap<Integer, Thing> multimap =
   Multimaps.index(listOfThings, new Function<Thing, Integer>() {
     public Integer apply(Thing thing) {
       return thing.getCategory();
     }
   }); 
```

或者，如果你想明确地做而不是 using `Multimaps.index`，它可能更简单：

```
 ListMultimap<Integer, Thing> multimap = ArrayListMultimap.create();
 for (Thing t : listOfThings) {
    multimap.put(t.getCategory(), t);
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T14:19:34.930

发现 Apache MultiKey 后，通过搜索文档发现了[MultiHashMap](http://commons.apache.org/collections/api-3.0/org/apache/commons/collections/MultiHashMap.html)，它似乎可以满足我的要求。

> MultiMap 是语义稍有不同的 Map。将值放入映射中会将值添加到该键处的集合中。获取一个值将始终返回一个集合，其中包含放入该键的所有值。此实现使用 ArrayList 作为集合。
> 
> 例如：
> 
> ```
>  MultiMap mhm = new MultiHashMap();
>     mhm.put(key, "A");
>     mhm.put(key, "B");
>     mhm.put(key, "C");
>     Collection coll = mhm.get(key); 
> ```
> 
> `coll`将是一个包含“A”、“B”、“C”的列表。

# qt - QT 上的 Open GL 性能

> ID：11830148
> 
> 赞同：0
> 
> 时间：2012-08-06T14:20:10.777
> 
> 标签：qt, 3d, qt4, opengl-es-2.0, cg

我正在使用带有 Open GL ES 2.0 的 QT 4.8（创建了我的一组着色器等......）

从拥有 QGraphicsScene 的 QGraphicsView 中运行整个应用程序，虽然我正在渲染一个简单的模型（大约 30 fps），但我得到的 fps 相对较低。

场景渲染本身由一个以 50Hz 触发的计时器触发（可以更改）。为了提高帧速率，最耗时的部分是什么？

另外，我注意到（使用 gDebugger）与 GL_STENCIL_TEST 和 GL_SCISSOR_TEST 相关的函数和状态在这里是杀手级的消费者（超过 30% 的时间都在这上面）。反正有绕过它吗？

谢谢。

# sql - 选择查询内的条件

> ID：11830149
> 
> 赞同：0
> 
> 时间：2012-08-06T14:20:13.553
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2008-r2

```
select id,status
from request 
```

上述查询的状态列返回一些整数值。我需要设置一个条件来返回一些字符串值而不是整数值。

例如：如果状态为 1，那么它应该返回“New”，或者如果状态是 2，那么它应该返回“Approved”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T14:22:53.730

使用 case 语句：

```
select 
    id, 
    case status
        when 1 then 'New' 
        when 2 then 'Approved' 
    end as status 
from 
    request 
```

虽然我建议您有一个查找表，其中包含状态值的数字和相应的文本字符串。

```
select 
    req.id, 
    stat.value as status
from 
    request as req inner join status as stat 
        on req.status = stat.id 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T14:22:02.440

你可以使用[`CASE`](http://msdn.microsoft.com/en-us/library/ms181765.aspx)它

```
select id,
       case status
          when 1 then 'New'
          when 2 then 'Approved'
       end as statusText
from request 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T14:23:00.343

```
select id, case when status = 1 then 'NEW' when status = 2 then 'Approved' else 'Undefined' end as status
from request 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-06T14:29:19.007

我鄙视存储在表中的神秘整数值，不知道它们的含义。

我的解决方案需要做更多的工作，但从长远来看这是值得的。

首先创建一个新的 StatusValues 表：

```
StatusValues
------------
Status INT PRIMARY KEY
StatusValue VARCHAR(20) 
```

填充该表：

```
Status    StatusValue
------    -----------
1         New
2         Approved 
```

创建从 Request 表到该表的外键关系：

```
ALTER TABLE request
    ADD CONSTRAINT FK_Request_StatusValues FOREIGN KEY (status)
    REFERENCES StatusValues (status); 
```

最后，编写查询：

```
SELECT r.id, sv.StatusValue
    FROM request r
        INNER JOIN StatusValues sv
            ON r.status = sv.status; 
```

以前神秘的`request.status`列现在在数据库中得到了很好的记录和管理。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T14:25:11.470

我不确定 SQL Server 的确切语法...

但这里是您可以用于 mySQL 的语法（一个变体应该适合您）：

注意：这假设只有两个选择 - 如果有更多选择，请使用 case 关键字。

```
select id, if(status = 1, "New", "Approved) from request 
```

# javascript - 公共/私人休息 API

> ID：11830150
> 
> 赞同：3
> 
> 时间：2012-08-06T14:20:21.047
> 
> 标签：javascript, node.js, express

我正在使用 Express.js 框架在 Node.js 中构建 REST JSON Api。对于身份验证，我使用 HTTP 基本。到目前为止，这是我的代码：

```
var express = require('express');
var app = express();

app.configure(function(){
  app.use(express.bodyParser());
});

// Http basic auth.

app.use(function(req, res, next){
  if(req.headers.authorization && req.headers.authorization.search('Basic ') === 0){
    var header = new Buffer(req.headers.authorization.split(' ')[1], 'base64').toString();
    var headerSplit = header.split(':');
    var username = headerSplit[0];
    var password = headerSplit[1];

    if(username && password && (username.length >= 4 && password.length >= 2){
        if(auth(username, password)){
          next(); return;
        } else {
          res.send('Authentication required', 401);
        }
    }
  } else {
    res.header('WWW-Authenticate', 'Basic realm="Login with username/password"');
    res.send('Authentication required', 401);
  }
});

// Public
app.post('/restore-password', function(req, res){
});

// Public
app.get('/search', function(req, res){
});

// Public
app.post('/users', function(req, res){
});

// Private
app.get('/user', function(req, res){
});

// Private
app.get('/protected-data', function(req, res){
}); 
```

如何在我的 REST api 中正确分离公共和私有功能？我希望我的问题很清楚。

感谢帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T14:37:53.340

不要使用`app.use`，因为它会将中间件添加到**所有**路由。像这样定义您的身份验证处理程序：

```
function authentication_required(req, res, next){
    // The other authentication code goes here.
}; 
```

现在，在每条路线中，您都可以（例如）这样做：

```
// Public
app.post("/restore-password", function(req, res) {
    console.log( "No need for authentication!" );
});

// Private (add authentication_required middleware to the route)
app.get("/settings", authentication_required, function(req, res) {
    console.log( "I'm authenticated, so I can read this!" );
}); 
```

# javascript - 循环遍历数组

> ID：11830152
> 
> 赞同：3
> 
> 时间：2012-08-06T14:20:26.607
> 
> 标签：javascript, node.js

尝试做简单的 js 并且不确定我哪里出错了，尝试为每个数组项创建一个链接

```
app.get('/list', function(req, res){
    fs.readdir(__dirname + "/files", function (err, files) {
        if (err) throw err;

         var items = ["a", "b", "c"]; //using items opposed to files for demostration
         for( var i=0;i<items.length;i++){
             res.send('<a href="#">'+items[i]+'</a>');
         } 
    }); 
}); 
```

它只是将第一项作为链接返回，我应该对 nodejs 做些什么不同的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T14:23:46.330

建立链接，然后将它们全部发送，如下所示：

```
fs.readdir(__dirname + "/files", function (err, files) {
    var items, links;
    if (err) throw err;

    items = ["a", "b", "c"];
    links = '';
    items.forEach(function(item) { // native array foreach.
        links += '<a href="#">' + item + '</a>';
    });

    res.send(links);
}); 
```

# jquery - Jquery Slider：如何实现最小和最大图标？

> ID：11830156
> 
> 赞同：2
> 
> 时间：2012-08-06T14:20:36.897
> 
> 标签：jquery, user-interface, jquery-ui-slider

请任何人都可以帮助我处理 jquery Slider 范围吗？我是 jQuery 新手，并试图在拖动左/右范围内实现 min（右箭头图标）和 max（左箭头图标）。

价格范围：0 - 1000 == **(>)** ======== **(<)** ===

我想用带有左右箭头的个人图像替换这些图标。是否可以？

我还附上了图片。

```
$(function() {
    var values = [0,25,50,100,200,400,700,1000];
    $( "#slider-range" ).slider({
        range: true,
        min: 0,
        max: 1000,
        step:50,
        orientation: "horizontal",
        values: [ 0,1000 ],
        slide: function( event, ui ) {
            $( "#amount" ).val( "£" + ui.values[ 0 ] + " - £" + ui.values[ 1 ] );
            console.log("From: "+ui.values[0],"To: "+ui.values[1]);
            $( "#min" ).val( ui.values[ 0 ] );
    $( "#max" ).val( ui.values[ 1 ] );
        }
    });
    $( "#amount" )
    .val( "£" + $( "#slider-range" )
    .slider( "values", 0 ) + " - £" + $( "#slider-range" )
    .slider( "values", 1 ));
});
$( "#slider-range a").hide(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:46:35.597

快速查看标记后，jQuery-UI 似乎无法区分这两个滑块。这不是一个大问题。我建议在构建滑块时将 a`min-value`和相应地添加`max-value`到`ui-slider-handle`s 中。这样的事情应该可以解决问题：

```
$('#slider-range').slider({
     range: true,
     min: 0,
     max: 1000,
     step:50,
     orientation: "horizontal",
     values: [ 0,1000 ],
     slide: function(event, ui) {
          $('#amount').val( "£" + ui.values[ 0 ] + " - £" + ui.values[ 1 ] );
          $('#min').val( ui.values[ 0 ] );
          $('#max').val( ui.values[ 1 ] );
     }
}).find('.ui-slider-handle')
     .eq(0).addClass('min-slider').end()
     .eq(1).addClass('max-slider'); 
```

有了这些类，您就可以设置 CSS 以针对它们并根据需要操纵它们的外观。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T14:41:10.717

滑块句柄可以由类识别`ui-slider-handle`。你可以尝试`background-image`在那些使用 CSS 的人身上加上一个：

```
#my-slider .ui-slider-handle { background-image: url(min.png); } 
```

您可能需要设置其他`background-*`属性才能正常工作。

在第二个滑块（HTML 中的第一个滑块之后）上放置不同的背景图像作为海报的练习。

# printing - IE8 打印缩小以适应不工作

> ID：11830157
> 
> 赞同：3
> 
> 时间：2012-08-06T14:20:41.793
> 
> 标签：printing, internet-explorer-8

IE8 打印“缩小以适应”选项不起作用，他们在微软支持论坛上给出的答案是这样的：

[http://answers.microsoft.com/en-us/windows/forum/windows_7-hardware/printing-problems-in-internet-explorere-8-will-not/8ca793aa-1a0b-42cc-9ec3-720a595c3874](http://answers.microsoft.com/en-us/windows/forum/windows_7-hardware/printing-problems-in-internet-explorere-8-will-not/8ca793aa-1a0b-42cc-9ec3-720a595c3874)

有谁知道“某些网页确切地指定了文本应该在页面上打印的位置”是什么意思？或者如何在不将浏览器模式更改为兼容性的情况下解决此缩小以适应 IE8 的问题？

在某些页面上缩小以适应工作，在其他页面上它不起作用，所以我的猜测是我正在使用一些可能与此问题相关的 CSS：“某些网页准确指定了文本应该在页面上打印的位置”，并且我想删除它，以便“缩小以适应”再次工作，但不知道究竟是哪些代码导致了这个问题。

谢谢

# c# - 组合框项为空但数据源已满

> ID：11830160
> 
> 赞同：14
> 
> 时间：2012-08-06T14:20:55.483
> 
> 标签：c#, winforms, combobox

将列表绑定到combobox后，它的dataSource.Count是5，但是combobox item count是0，怎么可能呢？

我习惯于 Web 编程，这是在 Windows 窗体中。所以不`combo.DataBind();`存在方法。

这里的问题是，我正在尝试以编程方式设置所选项目。由于我没有看到 combo.Items 集合已填充，因此我无法设置所需的项目。

* * *

***更新***

我猜需要全面更新：

*   数据源包含 7 项
*   当绑定到组合框时，`DisplayMember`并且`ValueMember`被适当地实现
*   数据绑定后，通过gui，我可以清楚地看到组合框中的7个项目
*   `combobox.DataSource.Count = 7`和`combobox.Items.Count = 0`

所以问题就在这里；因为在数据绑定之后，组合框的 ItemCollection 中没有任何项目；我无法搜索一个匹配并设置适当的一个。

这是一张更好理解的图片（但我很确定我错过了一些简单的东西）

![截屏](../Images/9276094b9fdcfadbf61f1a939647fafe.png)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-07T14:57:31.400

`ddl.BindingContext = new BindingContext();`在分配之前添加后`BindingSource`，一切正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-05T11:24:34.463

如果您在调试器中展开 DataSource 项，您可能会注意到列表中的第一个元素为空。这就是 DataSource 不呈现 ComboBox 项的原因。从列表中删除空项应该完成所有工作；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-05T10:49:47.047

我有同样的问题，但在我的情况下，它是由调用引起的

```
combobox.Sorted = True 
```

在`InitializeComponent`. 我猜这个调用初始化`Items`，然后阻止分配`DataSource`更新它（`Items`）。

# android - android 根 CA 和服务器/用户证书

> ID：11830162
> 
> 赞同：1
> 
> 时间：2012-08-06T14:20:59.230
> 
> 标签：android, pki

我需要自己的 CA 来验证 SSL 连接中的自己的证书。我正在尝试这个，但不起作用：

```
 try {
                AssetManager assetManager = getApplicationContext().getAssets();
                InputStream inStrm = assetManager.open("cacert-devel.der");

                Intent intent = KeyChain.createInstallIntent();
                CertificateFactory cf = CertificateFactory.getInstance("X.509");
                X509Certificate x509 = (X509Certificate) cf.generateCertificate(inStrm);
                inStrm.close();
                intent.putExtra(KeyChain.EXTRA_CERTIFICATE, x509.getEncoded());
                intent.putExtra(KeyChain.EXTRA_NAME,"PCA");
                startActivity(intent);
            } catch (CertificateException e1) {
                // TODO Auto-generated catch block
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

我如何测试是否安装了 CA？在这个 SSL 到这个 CA 的服务器之后，返回：

```
 DefaultHttpClient httpclient = new DefaultHttpClient();
            HttpGet httpget = new HttpGet();
            HttpResponse response = null;
            httpget.setURI(new URI("https://url...");
            response = httpclient.execute(httpget);
            StatusLine status = response.getStatusLine();
            int statuscode = status.getStatusCode();
            if (statuscode != 200){
                Log.e("GET", "Status"   + statuscode);
            }else{
                Log.e("GET","Status:"  + statuscode);
            } 
```

> IO 异常javax.net.ssl.SSLPeerUnverifiedException：没有对等证书

有什么建议吗？

# javascript - jQuery Mobile Listview 里面有 textview

> ID：11830164
> 
> 赞同：3
> 
> 时间：2012-08-06T14:21:07.507
> 
> 标签：javascript, jquery-mobile

我查看[了 listview 的文档](http://jquerymobile.com/demos/1.2.0-pre/docs/lists/lists-search.html)，但是没有放置在 listview 单元格内的 textview 示例。总的来说，我对 jQuery Mobile 和 Javascript 还很陌生，所以我想知道是否有可能做到这一点。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T14:42:38.130

据我了解你的问题，你会在这里找到你的答案

[http://jquerymobile.com/demos/1.2.0-pre/docs/lists/lists-forms-inset.html](http://jquerymobile.com/demos/1.2.0-pre/docs/lists/lists-forms-inset.html)

应该直截了当。

# php - 用php在excel中插入符号

> ID：11830167
> 
> 赞同：0
> 
> 时间：2012-08-06T14:21:19.603
> 
> 标签：php, excel, com, mathematical-expressions

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:27:43.937

不确定是什么让您认为 24​​2 以任何方式解析为“≥”。`chr`只需为您提供该数字的字节值，并且“≥”不在 ISO-8859 或我知道的任何其他单字节编码中。对于 UTF-8 编码值，请使用`"\xE2\x89\xA5"`，或者`'≥'`如果您以 UTF-8 对源代码进行编码，请使用 。

众所周知，Excel 的编码很糟糕，所以我不知道这实际上会在 Excel 中正确显示。

# c# - 在 SOAP 客户端中实现会话

> ID：11830168
> 
> 赞同：0
> 
> 时间：2012-08-06T14:21:32.820
> 
> 标签：c#, windows-phone-7, soap

我正在开发一个 WP 应用程序，其 Web 服务是使用 SOAP 客户端在 .NET 中实现的。我已经使用“添加服务引用”选项在我的 WP 应用程序中实现了 SOAP 客户端。

现在的问题是，有两个不同的客户端类，一个用于登录功能，另一个用于所有其他查询。登录工作正常，返回真或假，仅此而已。另一个客户端类用于进行不同的查询，这些查询都可以正常工作并从服务器获取一些数据。经过测试，我观察到响应与登录用户无关（即服务器发送与登录用户无关的相同数据）。因此很明显，会话没有得到维护，服务器正在发送一些匿名数据。

有人帮助我了解如何在 SOAP 客户端中维护会话。

注意：我不能就此询问网络服务提供商。:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T15:09:39.823

最后我想出了如何在 Windows 手机应用程序中维护基于 cookie 的会话

感谢迈克的指导。

对于所有想知道在 WP 应用程序中维护会话的不同方式的人，有一个名为的类`CookieContainer`可以帮助我们维护 cookie 数据。

用法：

首先创建一个 CookieContainer 类的全局实例（我在 App.xaml.cs 中创建）

```
//In App.xaml.cs
CookieContainer cookieContainer = new CookieContainer(); 
```

然后将其分配给我们从应用程序向服务器发出的每个请求。

```
MySoapClient client = new MySoapClient();
client.CookieContainer = (App.Current as App).cookieContainer;
client.LoginAsync("username", "password"); 
```

再次针对应用程序中的任何其他请求

```
MyOtherSoapClient anotherClient = new MyOtherSoapClient();
anotherClient.CookieContainer = (App.Current as App).cookieContainer;
anotherClient.PostDataAsync("somedata"); 
```

同样的规则也适用于普通`WebClient`和`HttpWebRequest`班级。

快乐编码:)

# ruby-on-rails - 将旧数据导入到 Rails 应用程序

> ID：11830170
> 
> 赞同：1
> 
> 时间：2012-08-06T14:21:43.130
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3, legacy

我正在将 Rails 2 应用程序迁移到 Rails 3。问题是我正在迁移的应用程序有一些来自 Rails 2 版本的遗留数据。我需要将该遗留数据导入 Rails 3 版本，但我已将表名从版本 2 更改为版本 3。

我不知道如何做到这一点，而且我所做的所有研究似乎都已经过时了。

任何想法？

**编辑**

我找到了[Pentaho](http://kettle.pentaho.com/)，这是一个帮助您将数据从一个数据库迁移到另一个数据库的程序。它非常灵活，如果您需要在新数据库中保存一些旧属性，您甚至可以配置要填写的字段。我强烈推荐它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T17:54:34.643

如果 rails2 和 rails3 应用程序的数据库结构相同，您可以考虑备份旧数据库，然后将数据导入新数据库。例如 MySQL 有 mysqldump 实用程序，您可以使用它来转储数据库。然后从新的转储文件中恢复新的数据库。

如果您需要通过 rails3 应用程序执行此操作，那么您最好的选择是在 config/database.yml 中为旧数据库添加新的数据库配置部分，然后使用 using activerecord 将数据导入新数据库。（可能通过耙任务）。

# c# - 如何通过 LINQ 展平树？

> ID：11830174
> 
> 赞同：106
> 
> 时间：2012-08-06T14:22:05.487
> 
> 标签：c#, .net, linq, .net-4.0, tree

所以我有简单的树：

```
class MyNode
{
 public MyNode Parent;
 public IEnumerable<MyNode> Elements;
 int group = 1;
} 
```

我有一个`IEnumerable<MyNode>`. 我想将所有`MyNode`（包括内部节点对象（`Elements`））的列表作为一个平面列表`Where` `group == 1`。如何通过 LINQ 做这样的事情？

* * *

## 回答 #1

> 赞同：160
> 
> 时间：2012-08-06T14:28:22.943

你可以像这样展平一棵树：

```
IEnumerable<MyNode> Flatten(IEnumerable<MyNode> e) =>
    e.SelectMany(c => Flatten(c.Elements)).Concat(new[] { e }); 
```

然后，您可以`group`使用过滤`Where(...)`。

要获得一些“风格积分”，请转换`Flatten`为静态类中的扩展函数。

```
public static IEnumerable<MyNode> Flatten(this IEnumerable<MyNode> e) =>
    e.SelectMany(c => c.Elements.Flatten()).Concat(e); 
```

要为“更好的风格”赢得更多积分，请转换`Flatten`为采用树和从节点产生后代的函数的通用扩展方法：

```
public static IEnumerable<T> Flatten<T>(
    this IEnumerable<T> e
,   Func<T,IEnumerable<T>> f
) => e.SelectMany(c => f(c).Flatten(f)).Concat(e); 
```

像这样调用这个函数：

```
IEnumerable<MyNode> tree = ....
var res = tree.Flatten(node => node.Elements); 
```

如果您希望在预购中而不是在后购中进行展平，请在`Concat(...)`.

* * *

## 回答 #2

> 赞同：134
> 
> 时间：2013-12-02T18:36:40.200

公认答案的问题是，如果树很深，效率会很低。如果树*很深*，那么它会炸毁堆栈。您可以通过使用显式堆栈来解决问题：

```
public static IEnumerable<MyNode> Traverse(this MyNode root)
{
    var stack = new Stack<MyNode>();
    stack.Push(root);
    while(stack.Count > 0)
    {
        var current = stack.Pop();
        yield return current;
        foreach(var child in current.Elements)
            stack.Push(child);
    }
} 
```

假设高度为 h 的树中有 n 个节点且分支因子远小于 n，则此方法在堆栈空间中为 O(1)，在堆空间中为 O(h)，在时间上为 O(n)。给出的另一种算法是堆栈中的 O(h)、堆中的 O(1) 和时间中的 O(nh)。如果分支因子与 n 相比较小，则 h 介于 O(lg n) 和 O(n) 之间，这说明如果 h 接近 n，朴素算法可以使用危险的堆栈数量和大量时间。

现在我们有了遍历，您的查询很简单：

```
root.Traverse().Where(item=>item.group == 1); 
```

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2015-01-07T09:14:16.950

为了完整起见，这里是 dasblinkenlight 和 Eric Lippert 的答案的组合。单元测试和一切。:-)

```
 public static IEnumerable<T> Flatten<T>(
        this IEnumerable<T> items,
        Func<T, IEnumerable<T>> getChildren)
 {
     var stack = new Stack<T>();
     foreach(var item in items)
         stack.Push(item);

     while(stack.Count > 0)
     {
         var current = stack.Pop();
         yield return current;

         var children = getChildren(current);
         if (children == null) continue;

         foreach (var child in children) 
            stack.Push(child);
     }
 } 
```

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2015-08-07T15:18:51.097

**更新：**

对于对嵌套级别（深度）感兴趣的人。显式枚举器堆栈实现的好处之一是，在任何时候（特别是在产生元素时），它都`stack.Count`表示当前的处理深度。因此，考虑到这一点并利用 C#7.0 值元组，我们可以简单地更改方法声明，如下所示：

```
public static IEnumerable<(T Item, int Level)> ExpandWithLevel<T>(
    this IEnumerable<T> source, Func<T, IEnumerable<T>> elementSelector) 
```

和`yield`声明：

```
yield return (item, stack.Count); 
```

然后我们可以通过在上面应用simple来实现原始方法`Select`：

```
public static IEnumerable<T> Expand<T>(
    this IEnumerable<T> source, Func<T, IEnumerable<T>> elementSelector) =>
    source.ExpandWithLevel(elementSelector).Select(e => e.Item); 
```

**原来的：**

令人惊讶的是，没有人（甚至 Eric）展示了递归预阶 DFT 的“自然”迭代端口，所以这里是：

```
 public static IEnumerable<T> Expand<T>(
        this IEnumerable<T> source, Func<T, IEnumerable<T>> elementSelector)
    {
        var stack = new Stack<IEnumerator<T>>();
        var e = source.GetEnumerator();
        try
        {
            while (true)
            {
                while (e.MoveNext())
                {
                    var item = e.Current;
                    yield return item;
                    var elements = elementSelector(item);
                    if (elements == null) continue;
                    stack.Push(e);
                    e = elements.GetEnumerator();
                }
                if (stack.Count == 0) break;
                e.Dispose();
                e = stack.Pop();
            }
        }
        finally
        {
            e.Dispose();
            while (stack.Count != 0) stack.Pop().Dispose();
        }
    } 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2018-06-29T17:19:25.897

我发现这里给出的答案有一些小问题：

*   如果项目的初始列表为空怎么办？
*   如果子列表中有空值怎么办？

基于先前的答案并提出以下内容：

```
public static class IEnumerableExtensions
{
    public static IEnumerable<T> Flatten<T>(
        this IEnumerable<T> items, 
        Func<T, IEnumerable<T>> getChildren)
    {
        if (items == null)
            yield break;

        var stack = new Stack<T>(items);
        while (stack.Count > 0)
        {
            var current = stack.Pop();
            yield return current;

            if (current == null) continue;

            var children = getChildren(current);
            if (children == null) continue;

            foreach (var child in children)
                stack.Push(child);
        }
    }
} 
```

和单元测试：

```
[TestClass]
public class IEnumerableExtensionsTests
{
    [TestMethod]
    public void NullList()
    {
        IEnumerable<Test> items = null;
        var flattened = items.Flatten(i => i.Children);
        Assert.AreEqual(0, flattened.Count());
    }
    [TestMethod]
    public void EmptyList()
    {
        var items = new Test[0];
        var flattened = items.Flatten(i => i.Children);
        Assert.AreEqual(0, flattened.Count());
    }
    [TestMethod]
    public void OneItem()
    {
        var items = new[] { new Test() };
        var flattened = items.Flatten(i => i.Children);
        Assert.AreEqual(1, flattened.Count());
    }
    [TestMethod]
    public void OneItemWithChild()
    {
        var items = new[] { new Test { Id = 1, Children = new[] { new Test { Id = 2 } } } };
        var flattened = items.Flatten(i => i.Children);
        Assert.AreEqual(2, flattened.Count());
        Assert.IsTrue(flattened.Any(i => i.Id == 1));
        Assert.IsTrue(flattened.Any(i => i.Id == 2));
    }
    [TestMethod]
    public void OneItemWithNullChild()
    {
        var items = new[] { new Test { Id = 1, Children = new Test[] { null } } };
        var flattened = items.Flatten(i => i.Children);
        Assert.AreEqual(2, flattened.Count());
        Assert.IsTrue(flattened.Any(i => i.Id == 1));
        Assert.IsTrue(flattened.Any(i => i == null));
    }
    class Test
    {
        public int Id { get; set; }
        public IEnumerable<Test> Children { get; set; }
    }
} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-07-08T21:01:28.473

万一其他人发现了这一点，但也需要在他们将树展平后知道级别，这将扩展 Konamiman 的 dasblinkenlight 和 Eric Lippert 的解决方案的组合：

```
 public static IEnumerable<Tuple<T, int>> FlattenWithLevel<T>(
            this IEnumerable<T> items,
            Func<T, IEnumerable<T>> getChilds)
    {
        var stack = new Stack<Tuple<T, int>>();
        foreach (var item in items)
            stack.Push(new Tuple<T, int>(item, 1));

        while (stack.Count > 0)
        {
            var current = stack.Pop();
            yield return current;
            foreach (var child in getChilds(current.Item1))
                stack.Push(new Tuple<T, int>(child, current.Item2 + 1));
        }
    } 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2020-09-19T09:13:01.230

这里提供的大多数答案都是产生[深度优先](https://en.wikipedia.org/wiki/Depth-first_search)或之字形序列。例如从下面的树开始：

```
 1                   2 
       / \                 / \
      /   \               /   \
     /     \             /     \
    /       \           /       \
   11       12         21       22
  / \       / \       / \       / \
 /   \     /   \     /   \     /   \
111 112   121 122   211 212   221 222 
```

dasblinkenlight 的[回答](https://stackoverflow.com/a/11830287/11178549)产生了这个扁平的序列：

```
111, 112, 121, 122, 11, 12, 211, 212, 221, 222, 21, 22, 1, 2 
```

Konamiman 的[回答](https://stackoverflow.com/a/27815926/11178549)（概括 Eric Lippert 的[回答](https://stackoverflow.com/a/20335369/11178549)）产生了这个扁平序列：

```
2, 22, 222, 221, 21, 212, 211, 1, 12, 122, 121, 11, 112, 111 
```

Ivan Stoev 的[回答](https://stackoverflow.com/a/31881243/11178549)产生了这个扁平的序列：

```
1, 11, 111, 112, 12, 121, 122, 2, 21, 211, 212, 22, 221, 222 
```

如果您对这样的[广度优先](https://en.wikipedia.org/wiki/Breadth-first_search)序列感兴趣：

```
1, 2, 11, 12, 21, 22, 111, 112, 121, 122, 211, 212, 221, 222 
```

...那么这就是您的解决方案：

```
public static IEnumerable<T> Flatten<T>(this IEnumerable<T> source,
    Func<T, IEnumerable<T>> childrenSelector)
{
    var queue = new Queue<T>(source);
    while (queue.Count > 0)
    {
        var current = queue.Dequeue();
        yield return current;
        var children = childrenSelector(current);
        if (children == null) continue;
        foreach (var child in children) queue.Enqueue(child);
    }
} 
```

实现上的区别基本上是使用 a`Queue`而不是 a `Stack`。没有进行实际的排序。

* * *

**注意：**这种实现在内存效率方面远非最佳，因为在枚举期间，元素总数的很大一部分最终将存储在内部队列中。`Stack`基于 - 的树遍历在内存使用方面比`Queue`基于 - 的实现更有效。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-06-23T20:28:49.760

另一个真正的选择是进行适当的 OO 设计。

例如要求`MyNode`返回所有展平。

像这样：

```
class MyNode
{
    public MyNode Parent;
    public IEnumerable<MyNode> Elements;
    int group = 1;

    public IEnumerable<MyNode> GetAllNodes()
    {
        if (Elements == null)
        {
            return Enumerable.Empty<MyNode>(); 
        }

        return Elements.SelectMany(e => e.GetAllNodes());
    }
} 
```

现在您可以要求顶级 MyNode 获取所有节点。

```
var flatten = topNode.GetAllNodes(); 
```

如果您无法编辑课程，那么这不是一个选项。但除此之外，我认为这可能是单独（递归）LINQ 方法的首选。

这是使用 LINQ，所以我认为这个答案在这里适用；）

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-11-11T17:07:19.050

结合 Dave 和 Ivan Stoev 的答案，以防您需要嵌套级别，并且列表“按顺序”展平，而不是像 Konamiman 给出的答案那样颠倒。

```
 public static class HierarchicalEnumerableUtils
    {
        private static IEnumerable<Tuple<T, int>> ToLeveled<T>(this IEnumerable<T> source, int level)
        {
            if (source == null)
            {
                return null;
            }
            else
            {
                return source.Select(item => new Tuple<T, int>(item, level));
            }
        }

        public static IEnumerable<Tuple<T, int>> FlattenWithLevel<T>(this IEnumerable<T> source, Func<T, IEnumerable<T>> elementSelector)
        {
            var stack = new Stack<IEnumerator<Tuple<T, int>>>();
            var leveledSource = source.ToLeveled(0);
            var e = leveledSource.GetEnumerator();
            try
            {
                while (true)
                {
                    while (e.MoveNext())
                    {
                        var item = e.Current;
                        yield return item;
                        var elements = elementSelector(item.Item1).ToLeveled(item.Item2 + 1);
                        if (elements == null) continue;
                        stack.Push(e);
                        e = elements.GetEnumerator();
                    }
                    if (stack.Count == 0) break;
                    e.Dispose();
                    e = stack.Pop();
                }
            }
            finally
            {
                e.Dispose();
                while (stack.Count != 0) stack.Pop().Dispose();
            }
        }
    } 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-02-12T09:14:40.637

这里有一些使用 Queue 的现成实现，首先返回 Flatten 树，然后返回我的孩子。

```
public static IEnumerable<T> Flatten<T>(this IEnumerable<T> items, 
    Func<T,IEnumerable<T>> getChildren)
    {
        if (items == null)
            yield break;

        var queue = new Queue<T>();

        foreach (var item in items) {
            if (item == null)
                continue;

            queue.Enqueue(item);

            while (queue.Count > 0) {
                var current = queue.Dequeue();
                yield return current;

                if (current == null)
                    continue;

                var children = getChildren(current);
                if (children == null)
                    continue;

                foreach (var child in children)
                    queue.Enqueue(child);
            }
        }

    } 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-08-06T14:38:11.590

```
void Main()
{
    var allNodes = GetTreeNodes().Flatten(x => x.Elements);

    allNodes.Dump();
}

public static class ExtensionMethods
{
    public static IEnumerable<T> Flatten<T>(this IEnumerable<T> source, Func<T, IEnumerable<T>> childrenSelector = null)
    {
        if (source == null)
        {
            return new List<T>();
        }

        var list = source;

        if (childrenSelector != null)
        {
            foreach (var item in source)
            {
                list = list.Concat(childrenSelector(item).Flatten(childrenSelector));
            }
        }

        return list;
    }
}

IEnumerable<MyNode> GetTreeNodes() {
    return new[] { 
        new MyNode { Elements = new[] { new MyNode() }},
        new MyNode { Elements = new[] { new MyNode(), new MyNode(), new MyNode() }}
    };
}

class MyNode
{
    public MyNode Parent;
    public IEnumerable<MyNode> Elements;
    int group = 1;
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-03-23T22:19:45.077

基于 Konamiman 的回答，以及排序出乎意料的评论，这是一个带有明确排序参数的版本：

```
public static IEnumerable<T> TraverseAndFlatten<T, V>(this IEnumerable<T> items, Func<T, IEnumerable<T>> nested, Func<T, V> orderBy)
{
    var stack = new Stack<T>();
    foreach (var item in items.OrderBy(orderBy))
        stack.Push(item);

    while (stack.Count > 0)
    {
        var current = stack.Pop();
        yield return current;

        var children = nested(current).OrderBy(orderBy);
        if (children == null) continue;

        foreach (var child in children)
            stack.Push(child);
    }
} 
```

以及示例用法：

```
var flattened = doc.TraverseAndFlatten(x => x.DependentDocuments, y => y.Document.DocDated).ToList(); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-01-15T00:29:02.573

下面是 Ivan Stoev 的代码，它具有告诉路径中每个对象的索引的附加功能。例如搜索“Item_120”：

```
Item_0--Item_00
        Item_01

Item_1--Item_10
        Item_11
        Item_12--Item_120 
```

将返回项目和一个 int 数组 [1,2,0]。显然，嵌套级别也是可用的，作为数组的长度。

```
public static IEnumerable<(T, int[])> Expand<T>(this IEnumerable<T> source, Func<T, IEnumerable<T>> getChildren) {
    var stack = new Stack<IEnumerator<T>>();
    var e = source.GetEnumerator();
    List<int> indexes = new List<int>() { -1 };
    try {
        while (true) {
            while (e.MoveNext()) {
                var item = e.Current;
                indexes[stack.Count]++;
                yield return (item, indexes.Take(stack.Count + 1).ToArray());
                var elements = getChildren(item);
                if (elements == null) continue;
                stack.Push(e);
                e = elements.GetEnumerator();
                if (indexes.Count == stack.Count)
                    indexes.Add(-1);
                }
            if (stack.Count == 0) break;
            e.Dispose();
            indexes[stack.Count] = -1;
            e = stack.Pop();
        }
    } finally {
        e.Dispose();
        while (stack.Count != 0) stack.Pop().Dispose();
    }
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-07-25T20:59:39.117

每隔一段时间，我就会尝试解决这个问题并设计自己的解决方案，该解决方案支持任意深度的结构（无递归），执行广度优先遍历，并且不会滥用太多 LINQ 查询或抢先对子级执行递归。在挖掘[.NET 源代码](https://referencesource.microsoft.com/)并尝试了许多解决方案之后，我终于想出了这个解决方案。它最终非常接近 Ian Stoev 的答案（我刚才才看到他的答案），但是我的没有使用无限循环或有不寻常的代码流。

```
public static IEnumerable<T> Traverse<T>(
    this IEnumerable<T> source,
    Func<T, IEnumerable<T>> fnRecurse)
{
    if (source != null)
    {
        Stack<IEnumerator<T>> enumerators = new Stack<IEnumerator<T>>();
        try
        {
            enumerators.Push(source.GetEnumerator());
            while (enumerators.Count > 0)
            {
                var top = enumerators.Peek();
                while (top.MoveNext())
                {
                    yield return top.Current;

                    var children = fnRecurse(top.Current);
                    if (children != null)
                    {
                        top = children.GetEnumerator();
                        enumerators.Push(top);
                    }
                }

                enumerators.Pop().Dispose();
            }
        }
        finally
        {
            while (enumerators.Count > 0)
                enumerators.Pop().Dispose();
        }
    }
} 
```

可以在[此处](https://ideone.com/y7Uf0p)找到一个工作示例。

# asp.net - Inno Setup IIS 安装和配置

> ID：11830183
> 
> 赞同：10
> 
> 时间：2012-08-06T14:22:37.580
> 
> 标签：asp.net, iis, installation, inno-setup, web-deployment

我一直在试图弄清楚如何使用 Inno Setup Script 安装和注册 IIS，但到目前为止我还没有成功。

我需要创建一个应用程序，使用 .Net 版本 4 和一个虚拟目录的应用程序池，获取机器的 IP 并继续使用此 IP 编辑网站的绑定。

到目前为止，我安装的所有工作都是检查是否安装了 IIS。

如果有人以前做过这样的事情，如果您能分享您的脚本，我将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-12-18T17:01:36.677

这是我使用 Inno Setup 处理 IIS（Internet 信息服务）的完整代码。它包含：

*   .NET Framework 4 的安装
*   安装/卸载 IIS+ASP.NET 4
*   网站/应用程序的注册和删除
*   帮助获取正在运行应用程序池的用户帐户
*   帮助获取网站的物理路径

它已经过以下 Windows 版本的测试：XP Pro SP3 x86、2003 R2 x86、2003 R2 x64、Vista Ultimate x64、7 Home Premium x64、2008 R2 x64、2011 x64、8.1 Pro x86、10 Pro x64

一切都尽可能被动地完成，以免破坏任何现有的网站。

**重要的**

这可能需要 Inno-Setup 的*Unicode 版本*（我使用的是 5.5.6(u)）。还需要在 x64 机器上强制使用 64 位模式（否则注册表和文件访问将重定向到 32 位内容）：

```
[Setup]
ArchitecturesInstallIn64BitMode=x64 
```

**所需助手**

*   一些常数
*   ExpandEnvironmentStrings => [https://msdn.microsoft.com/en-us/library/windows/desktop/ms724265%28v=vs.85%29.aspx](https://msdn.microsoft.com/en-us/library/windows/desktop/ms724265%28v=vs.85%29.aspx)
*   ExecWithResult => 读取写入 STDOUT 的内容
*   IIs7ExecAppCmd => 自 Vista/2008 起 IIS 安装需要

```
#ifdef UNICODE
#define AW "W"
#else
#define AW "A"
#endif

const
  // See https://msdn.microsoft.com/en-us/library/windows/desktop/ms681382.aspx
  ERROR_SUCCESS = 0;
  ERROR_INVALID_FUNCTION = 1;
  ERROR_NOT_SUPPORTED = 50;
  ERROR_NOT_FOUND = 1168;
  ERROR_SUCCESS_REBOOT_REQUIRED = 3010;

function ExpandEnvironmentStrings(lpSrc: String; lpDst: String; nSize: DWORD): DWORD;
  external 'ExpandEnvironmentStrings{#AW}@kernel32.dll stdcall';
function ExpandEnvVars(const Input: String): String;
var
  Buf: String;
  BufSize: DWORD;
begin
  BufSize := ExpandEnvironmentStrings(Input, #0, 0);
  if BufSize > 0 then
  begin
    SetLength(Buf, BufSize);
    if ExpandEnvironmentStrings(Input, Buf, BufSize) = 0 then
      RaiseException(Format('Expanding env. strings failed. %s', [SysErrorMessage(DLLGetLastError)]));
#if AW == "A"
    Result := Copy(Buf, 1, BufSize - 2);
#else
    Result := Copy(Buf, 1, BufSize - 1);
#endif
  end
  else
    RaiseException(Format('Expanding env. strings failed. %s', [SysErrorMessage(DLLGetLastError)]));
end;

// Exec with output stored in result. ResultString will only be altered if True is returned.
function ExecWithResult(const Filename, Params, WorkingDir: String; const ShowCmd: Integer; const Wait: TExecWait; var ResultCode: Integer; var ResultString: String): Boolean;
var
  TempFilename: String;
  TempAnsiStr: AnsiString;
  Command: String;
begin
  TempFilename := ExpandConstant('{tmp}\~execwithresult.txt');
  // Exec via cmd and redirect output to file. Must use special string-behavior to work.
  Command := Format('"%s" /S /C ""%s" %s > "%s""', [ExpandConstant('{cmd}'), Filename, Params, TempFilename]);
  Result := Exec(ExpandConstant('{cmd}'), Command, WorkingDir, ShowCmd, Wait, ResultCode);
  if not Result then
    Exit;
  LoadStringFromFile(TempFilename, TempAnsiStr);  // Cannot fail
  ResultString := String(TempAnsiStr);
  DeleteFile(TempFilename);
  // Remove new-line at the end
  if (Length(ResultString) >= 2) and (ResultString[Length(ResultString) - 1] = #13) and (ResultString[Length(ResultString)] = #10) then
    Delete(ResultString, Length(ResultString) - 1, 2);
end;

function IIs7ExecAppCmd(Params: String; var ResultString: String; var ResultCode: Integer): Boolean;
var
  AppCmdFilePath: String;
  Command: String;
begin
  AppCmdFilePath := ExpandConstant('{sys}\inetsrv\appcmd.exe');
  Result := ExecWithResult(AppCmdFilePath, Params, '', SW_HIDE, ewWaitUntilTerminated, ResultCode, ResultString);
end; 
```

**.NET 4 安装**

将为 Win XP/2003 安装 .NET 4.0。适用于 Vista/2008 及更高版本的 .NET 4.6。如果系统中已包含 .NET 4（Win 8/2012/10），则不会执行任何操作。以下文件是必需的，并且必须包含在设置中：

*   .NET 4.0 Web 安装程序“dotNetFx40_Full_setup.exe”=> [https://www.microsoft.com/en-US/download/details.aspx?id=17851](https://www.microsoft.com/en-US/download/details.aspx?id=17851)
*   .NET 4.6 Web 安装程序“NDP46-KB3045560-Web.exe”=> [https://www.microsoft.com/de-de/download/details.aspx?id=48130](https://www.microsoft.com/de-de/download/details.aspx?id=48130)
*   WIC x64 "wic_x64_enu.exe" => [https://www.microsoft.com/de-de/download/details.aspx?id=1385](https://www.microsoft.com/de-de/download/details.aspx?id=1385)
*   WIC x86 "wic_x86_enu.exe" => [https://www.microsoft.com/de-de/download/details.aspx?id=32](https://www.microsoft.com/de-de/download/details.aspx?id=32)

-

```
[Files]
Source: "dotNetFx40_Full_setup.exe"; DestDir: "{tmp}"; Flags: ignoreversion dontcopy
Source: "NDP46-KB3045560-Web.exe"; DestDir: "{tmp}"; Flags: ignoreversion dontcopy
Source: "wic_x64_enu.exe"; DestDir: "{tmp}"; Flags: ignoreversion dontcopy
Source: "wic_x86_enu.exe"; DestDir: "{tmp}"; Flags: ignoreversion dontcopy 
```

由于我使用的是 Web 安装程序，因此在安装过程中可能需要 Internet 连接。

```
// Checks if .NET 4 "Full" is installed
function IsDotNet4FullInstalled(): Boolean;
var
  Success: Boolean;
  Install: Cardinal;
begin
  try
    ExpandConstant('{dotnet40}');  // This will throw an exception if .NET 4 is not installed at all
    Success := RegQueryDWordValue(HKLM, 'SOFTWARE\Microsoft\NET Framework Setup\NDP\v4\Full', 'Install', Install);  // Check for "Full" version
    Result := Success and (Install = 1);
  except
    Result := False;
  end;
end;

// Returns True if a restart is required.
function InstallDotNet4(): Boolean;
var
  Version: TWindowsVersion;
  ResultCode: Integer;
  Success: Boolean;
begin
  GetWindowsVersionEx(Version);
  if (Version.Major <= 5) then  // 4.0 for XP, 2003
    ExtractTemporaryFile('dotNetFx40_Full_setup.exe')
  else  // 4.6
    ExtractTemporaryFile('NDP46-KB3045560-Web.exe');
  if (Version.Major <= 5) then  // XP, 2003: Install .NET 4.0
  begin
    Success := Exec(ExpandConstant('{tmp}\dotNetFx40_Full_setup.exe'), '/passive', '', SW_HIDE, ewWaitUntilTerminated, ResultCode);
    if Success and (ResultCode = 5100) then  // Indicates that "Windows Imaging Component" is missing (probably 2003)
    begin
      if IsWin64 then
      begin
        ExtractTemporaryFile('wic_x64_enu.exe');
        if not Exec(ExpandConstant('{tmp}\wic_x64_enu.exe'), '/passive', '', SW_HIDE, ewWaitUntilTerminated, ResultCode) or (ResultCode <> ERROR_SUCCESS) then
          RaiseException('Failed to install "Windows Imaging Component": ' + SysErrorMessage(ResultCode) + ' (' + IntToStr(ResultCode) + ')');
        // Retry .NET
        Success := Exec(ExpandConstant('{tmp}\dotNetFx40_Full_setup.exe'), '/passive', '', SW_HIDE, ewWaitUntilTerminated, ResultCode);
      end
      else
      begin
        ExtractTemporaryFile('wic_x86_enu.exe');
        if not Exec(ExpandConstant('{tmp}\wic_x86_enu.exe'), '/passive', '', SW_HIDE, ewWaitUntilTerminated, ResultCode) or (ResultCode <> ERROR_SUCCESS) then
          RaiseException('Failed to install "Windows Imaging Component": ' + SysErrorMessage(ResultCode) + ' (' + IntToStr(ResultCode) + ')');
        // Retry .NET
        Success := Exec(ExpandConstant('{tmp}\dotNetFx40_Full_setup.exe'), '/passive', '', SW_HIDE, ewWaitUntilTerminated, ResultCode);
      end;
    end
  end
  else  // Vista / 2008 or later: Install .NET 4.6
    Success := Exec(ExpandConstant('{tmp}\NDP46-KB3045560-Web.exe'), '/passive', '', SW_HIDE, ewWaitUntilTerminated, ResultCode);
  // Check for errors
  if not Success or ((ResultCode <> ERROR_SUCCESS) and (ResultCode <> ERROR_SUCCESS_REBOOT_REQUIRED)) then
    RaiseException('Failed to install .NET: ' + SysErrorMessage(ResultCode) + ' (' + IntToStr(ResultCode) + ')');
  Result := ResultCode = ERROR_SUCCESS_REBOOT_REQUIRED;
end; 
```

**IIS 安装/卸载**

使用 ASP.NET 4 安装 IIS。将激活与通过 GUI 激活相同的（默认）功能。安装完成后，ASP.NET 将（重新）注册到 IIS。

注意：对于 Win XP/2003，需要“Windows 安装光盘”。

```
// Returns True if a restart is required. Throws exceptions.
function InstallIIs(): Boolean;
var
  Version: TWindowsVersion;
  Success: Boolean;
  ResultCode: Integer;
  IIS56IniFile: String;
begin
  GetWindowsVersionEx(Version);
  if (Version.Major <= 5) then  // XP / 2003: Use "sysocmgr"
  begin
    IIS56IniFile := ExpandConstant('{tmp}\~iis56.ini');
    SaveStringToFile(IIS56IniFile, '[Components]' + #13#10 + 'iis_common = ON' + #13#10 + 'iis_www = ON' + #13#10 + 'iis_inetmgr = ON', False);
    Success := Exec('sysocmgr', ExpandConstant('/i:"{win}\inf\sysoc.inf" /u:"' + IIS56IniFile + '"'), '', SW_SHOW, ewWaitUntilTerminated, ResultCode);
    DeleteFile(IIS56IniFile);
  end
  else if (Version.Major = 6) and (Version.Minor = 0) then  // Vista / 2008: Use "pkgmgr"
  begin
    Success := Exec('pkgmgr', '/iu:' +
      // Enables everything a fresh install would also (implicitly) enable.
      // This is important in case IIS was already installed and some features manually disabled.
      'WAS-WindowsActivationService;WAS-ProcessModel;WAS-NetFxEnvironment;WAS-ConfigurationAPI' +
      ';IIS-WebServerRole' +
      ';IIS-WebServerManagementTools;IIS-ManagementConsole' +
      ';IIS-WebServer' +
      ';IIS-ApplicationDevelopment;IIS-NetFxExtensibility;IIS-ASPNET;IIS-ISAPIExtensions;IIS-ISAPIFilter' +
      ';IIS-CommonHttpFeatures;IIS-HttpErrors;IIS-DefaultDocument;IIS-StaticContent;IIS-DirectoryBrowsing' +
      ';IIS-Performance;IIS-HttpCompressionStatic' +
      ';IIS-Security;IIS-RequestFiltering' +
      ';IIS-HealthAndDiagnostics;IIS-RequestMonitor;IIS-HttpLogging',
      '', SW_HIDE, ewWaitUntilTerminated, ResultCode);
  end
  else if (Version.Major = 6) and (Version.Minor = 1) then  // 7 / 2008 R2 / 2011: Use "Dism"
  begin
    Success := Exec('Dism', '/Online /Enable-Feature' +
      // Enables everything a fresh install would also (implicitly) enable.
      // This is important in case IIS was already installed and some features manually disabled.
      // "Parent fetaures" are NOT automatically enabled by "Dism".
      ' /FeatureName:WAS-WindowsActivationService /FeatureName:WAS-ProcessModel /FeatureName:WAS-NetFxEnvironment /FeatureName:WAS-ConfigurationAPI' +
      ' /FeatureName:IIS-WebServerRole' +
      ' /FeatureName:IIS-WebServerManagementTools /FeatureName:IIS-ManagementConsole' +
      ' /FeatureName:IIS-WebServer' +
      ' /FeatureName:IIS-ApplicationDevelopment /FeatureName:IIS-NetFxExtensibility /FeatureName:IIS-ASPNET /FeatureName:IIS-ISAPIExtensions /FeatureName:IIS-ISAPIFilter' +
      ' /FeatureName:IIS-CommonHttpFeatures /FeatureName:IIS-HttpErrors /FeatureName:IIS-DefaultDocument /FeatureName:IIS-StaticContent /FeatureName:IIS-DirectoryBrowsing' +
      ' /FeatureName:IIS-Performance /FeatureName:IIS-HttpCompressionStatic' +
      ' /FeatureName:IIS-Security /FeatureName:IIS-RequestFiltering' +
      ' /FeatureName:IIS-HealthAndDiagnostics /FeatureName:IIS-RequestMonitor /FeatureName:IIS-HttpLogging',
      '', SW_HIDE, ewWaitUntilTerminated, ResultCode);
  end
  else  // 8 / 2012 and later: Use "Dism"
  begin
    Success := Exec('Dism', '/Online /Enable-Feature' +
      // Enables everything a fresh install would also (implicitly) enable.
      // This is important in case IIS was already installed and some features manually disabled.
      ' /FeatureName:WAS-WindowsActivationService /FeatureName:WAS-ProcessModel /FeatureName:WAS-NetFxEnvironment /FeatureName:WAS-ConfigurationAPI' +
      ' /FeatureName:IIS-ManagementConsole' +
      ' /FeatureName:IIS-HttpErrors /FeatureName:IIS-DefaultDocument /FeatureName:IIS-StaticContent /FeatureName:IIS-DirectoryBrowsing' +
      ' /FeatureName:IIS-ASPNET45' +
      ' /FeatureName:IIS-HttpCompressionStatic' +
      ' /FeatureName:IIS-RequestFiltering' +
      ' /FeatureName:IIS-HttpLogging' +
      ' /All',  // Implicitly enables dependent features
      '', SW_HIDE, ewWaitUntilTerminated, ResultCode);
  end;
  if not Success or ((ResultCode <> ERROR_SUCCESS) and (ResultCode <> ERROR_SUCCESS_REBOOT_REQUIRED)) then
    RaiseException('Cannot install IIS: ' + SysErrorMessage(ResultCode) + ' (' + IntToStr(ResultCode) + ')');
  Result := ResultCode = ERROR_SUCCESS_REBOOT_REQUIRED;
  // Register ASP.NET 4 with IIS. This is required since .NET 4 was probably installed before IIS.
  // This will NOT change existing web-sites (which might be using other ASP.NET versions already)
  if not Exec(ExpandConstant('{dotnet40}') + '\aspnet_regiis.exe', '-iru -enable', '', SW_HIDE, ewWaitUntilTerminated, ResultCode) or
    (ResultCode <> ERROR_SUCCESS) then
    RaiseException('Cannot register ASP.NET: ' + SysErrorMessage(ResultCode) + ' (' + IntToStr(ResultCode) + ')');
end;

// Returns True if a restart is required. Throws exceptions.
function UninstallIIs(): Boolean;
var
  Version: TWindowsVersion;
  Success: Boolean;
  ResultCode: Integer;
  IIS56IniFile: String;
begin
  GetWindowsVersionEx(Version);
  if (Version.Major <= 5) then  // XP / 2003: Use "sysocmgr"
  begin
    IIS56IniFile := ExpandConstant('{tmp}\~iis56.ini');
    SaveStringToFile(IIS56IniFile, '[Components]' + #13#10 + 'iis_common = OFF' + #13#10 + 'iis_www = OFF' + #13#10 + 'iis_inetmgr = OFF', False);
    Success := Exec('sysocmgr', ExpandConstant('/i:"{win}\inf\sysoc.inf" /u:"' + IIS56IniFile + '"'), '', SW_SHOW, ewWaitUntilTerminated, ResultCode);
    DeleteFile(IIS56IniFile);
  end
  else if (Version.Major = 6) and (Version.Minor = 0) then  // Vista / 2008: Use "pkgmgr"
    Success := Exec('pkgmgr', '/norestart /uu:IIS-WebServerRole', '', SW_HIDE, ewWaitUntilTerminated, ResultCode)
  else  // 7 / 2008 R2 and later: Use "Dism"
    Success := Exec('Dism', '/NoRestart /Online /Disable-Feature /FeatureName:IIS-WebServerRole', '', SW_HIDE, ewWaitUntilTerminated, ResultCode);
  if not Success or ((ResultCode <> ERROR_SUCCESS) and (ResultCode <> ERROR_SUCCESS_REBOOT_REQUIRED)) then
    RaiseException('Cannot uninstall IIS: ' + SysErrorMessage(ResultCode) + ' (' + IntToStr(ResultCode) + ')');
  Result := ResultCode = ERROR_SUCCESS_REBOOT_REQUIRED;
end; 
```

**网站/应用程序注册和删除**

创建一个虚拟目录和一个 ASP.NET 4 应用程序池。

注意：IIsServerNumber 是实际的网站，通常默认为 1（=>“默认网站”）。

用法：

```
RegisterAppAtIIs('MyAppName', 1, 'MyAppAppPoolName');
DeleteAppFromIIs('MyAppName', 1, 'MyAppAppPoolName'); 
```

```
// Throws exceptions.
procedure RegisterAppAtIIs(const IIsAppName: String; const IIsServerNumber: Integer; const IIsApplicationPoolName: String);
var
  Version: TWindowsVersion;
  // IIS 5.1 - 6.0
  IIS, WebService, WebSite, WebRoot, vDir, AppPools, AppPool: Variant;
  // IIS 7 and later
  ResultCode: Integer;
  ExecResult: String;
  WebSiteName: String;
begin
  GetWindowsVersionEx(Version);
  if (Version.Major = 5) and (Version.Minor <= 2) then  // XP, 2003: IIS 5.1 - 6.0
  begin
    try
      // Create the main IIS COM Automation object
      IIS := CreateOleObject('IISNamespace');
      WebService := IIS.GetObject('IIsWebService', 'localhost/W3SVC');
      // Get web site
      WebSite := WebService.GetObject('IIsWebServer', IntToStr(IIsServerNumber));
      WebRoot := WebSite.GetObject('IIsWebVirtualDir', 'Root');
    except
      RaiseException(Format('Web-site #%d not found: ', [IIsServerNumber]) + GetExceptionMessage());
    end;
    // Delete the virtual dir if it already exists
    try
      WebRoot.Delete('IIsWebVirtualDir', IIsAppName);
      WebRoot.SetInfo();
    except
    end;
    if (Version.Minor = 1) then  // XP: IIS 5.1
    begin
      // Create the virtual directory
      try
        vDir := WebRoot.Create('IIsWebVirtualDir', IIsAppName);
        vDir.AccessRead := True;
        vDir.AccessScript := True;
        vDir.AppFriendlyName := IIsAppName;
        vDir.Path := ExpandConstant('{app}');
        vDir.AppCreate(True);  // Create in "InProc" mode (don't really know why though)
        vDir.SetInfo();
      except
        RaiseException('Cannot create virtual directory: ' + GetExceptionMessage());
      end;
    end
    else if (Version.Minor = 2) then  // 2003: IIS 6.0
    begin
      // Application pool stuff
      AppPools := WebService.GetObject('IIsApplicationPools', 'AppPools');
      try
        // Check if the application pool already exists
        AppPool := AppPools.GetObject('IIsApplicationPool', IIsApplicationPoolName);
      except
        AppPool := Null;
      end;
      if VarIsNull(AppPool) then
      begin
        // Create the application pool
        try
          AppPool := AppPools.Create('IIsApplicationPool', IIsApplicationPoolName);
          AppPool.SetInfo();
        except
          RaiseException('Cannot add application pool: ' + GetExceptionMessage());
        end;
      end;
      // Create the virtual directory
      try
        vDir := WebRoot.Create('IIsWebVirtualDir', IIsAppName);
        vDir.AccessRead := True;
        vDir.AccessScript := True;
        vDir.AppFriendlyName := IIsAppName;
        vDir.Path := ExpandConstant('{app}');
        vDir.AppCreate(True);  // Create in "InProc" mode
        vDir.AppPoolId := IIsApplicationPoolName;
        vDir.SetInfo();
      except
        RaiseException('Cannot create virtual directory: ' + GetExceptionMessage());
      end;
    end;
    // Register handlers for ASP.NET 4 (important if other ASP.NET versions are present)
    if not ExecWithResult(ExpandConstant('{dotnet40}') + '\aspnet_regiis.exe',Format('-s "W3SVC/%d/ROOT/%s"', [IIsServerNumber, IIsAppName]),'',SW_HIDE,ewWaitUntilTerminated, ResultCode, ExecResult) or (ResultCode <> ERROR_SUCCESS) then
      RaiseException('Cannot set ASP.NET version: ' + SysErrorMessage(ResultCode) + ' (' + IntToStr(ResultCode) + ')');
  end
  else if (Version.Major >= 6) then  // Vista / 2008 or later : IIS 7 or later
  begin
    // Get name of web-site
    if not IIs7ExecAppCmd(Format('list site /id:%d /text:name', [IIsServerNumber]), ExecResult, ResultCode) then
      RaiseException(Format('Cannot get name of web-site #%d: ', [IIsServerNumber]) + SysErrorMessage(ResultCode) + ' (' + IntToStr(ResultCode) + ')');
    if (Length(Trim(ExecResult)) = 0) then
      RaiseException(Format('Web-site #%d not found.', [IIsServerNumber]));
    WebSiteName := ExecResult;
    // Delete the application if it already exists
    if not IIs7ExecAppCmd(Format('delete app "%s/%s"', [WebSiteName, IIsAppName]), ExecResult, ResultCode) or
      ((ResultCode <> ERROR_SUCCESS) and (ResultCode <> ERROR_NOT_FOUND) and (ResultCode <> ERROR_NOT_SUPPORTED)) then
      RaiseException('Cannot delete application: ' + SysErrorMessage(ResultCode) + ' (' + IntToStr(ResultCode) + ')');
    // Check if the application pool already exists (we don't delete it, since another GVS instance might be using it too)
    if not IIs7ExecAppCmd(Format('list apppool "%s" /text:name', [IIsApplicationPoolName]), ExecResult, ResultCode) or
      ((ResultCode <> ERROR_SUCCESS) and (ResultCode <> ERROR_INVALID_FUNCTION)) then
      RaiseException('Cannot list application pools: ' + SysErrorMessage(ResultCode) + ' (' + IntToStr(ResultCode) + ')');
    // Create the application pool
    if (ExecResult <> IIsApplicationPoolName) then
    begin
      if not IIs7ExecAppCmd(Format('add apppool /name:"%s" /managedRuntimeVersion:v4.0', [IIsApplicationPoolName]), ExecResult, ResultCode) or (ResultCode <> ERROR_SUCCESS) then
        RaiseException('Cannot add application pool: ' + SysErrorMessage(ResultCode) + ' (' + IntToStr(ResultCode) + ')');
    end;
    // Create the application
    if not IIs7ExecAppCmd(Format('add app /site.name:"%s" /path:"/%s" /physicalPath:"%s" /applicationPool:"%s"', [WebSiteName, IIsAppName, ExpandConstant('{app}'), IIsApplicationPoolName]), ExecResult, ResultCode) or
      (ResultCode <> ERROR_SUCCESS) then
      RaiseException('Cannot add application: ' + SysErrorMessage(ResultCode) + ' (' + IntToStr(ResultCode) + ')');
  end
  else
    RaiseException('Cannot register web-site: Unknown OS version.');
end;

// Throws exceptions.
procedure DeleteAppFromIIs(const IIsAppName: String; const IIsServerNumber: Integer; const IIsApplicationPoolName: String);
var
  Version: TWindowsVersion;
  // IIS 5.1 - 6.0
  IIS, WebService, WebSite, WebRoot, AppPools: Variant;
  // IIS 7 and later
  ResultCode: Integer;
  ExecResult: String;
  WebSiteName: String;
begin
  GetWindowsVersionEx(Version);
  if (Version.Major = 5) and (Version.Minor <= 2) then  // XP, 2003: IIS 5.1 - 6.0
  begin
    try
      // Create the main IIS COM Automation object
      IIS := CreateOleObject('IISNamespace');
      WebService := IIS.GetObject('IIsWebService', 'localhost/W3SVC');
      // Get web site
      WebSite := WebService.GetObject('IIsWebServer', IntToStr(IIsServerNumber));
      WebRoot := WebSite.GetObject('IIsWebVirtualDir', 'Root');
    except
      RaiseException(Format('Web-site #%d not found: ', [IIsServerNumber]) + GetExceptionMessage());
    end;
    // Delete the virtual dir
    try
      WebRoot.Delete('IIsWebVirtualDir', IIsAppName);
      WebRoot.SetInfo();
    except
    end;
    if (Version.Minor = 2) then  // 2003: IIS 6.0
    begin
      // Application pool stuff
      AppPools := WebService.GetObject('IIsApplicationPools', 'AppPools');
      try
        // Delete the application pool
        AppPools.Delete('IIsApplicationPool', IIsApplicationPoolName);
      except
      end;
    end;
  end
  else if (Version.Major >= 6) then  // Vista / 2008 or later : IIS 7 or later
  begin
    // Get name of web-site
    if not IIs7ExecAppCmd(Format('list site /id:%d /text:name', [IIsServerNumber]), ExecResult, ResultCode) then
      RaiseException(Format('Cannot get name of web-site #%d: ', [IIsServerNumber]) + SysErrorMessage(ResultCode) + ' (' + IntToStr(ResultCode) + ')');
    if (Length(Trim(ExecResult)) = 0) then
      RaiseException(Format('Web-site #%d not found.', [IIsServerNumber]));
    WebSiteName := ExecResult;
    // Delete the application
    if not IIs7ExecAppCmd(Format('delete app "%s/%s"', [WebSiteName, IIsAppName]), ExecResult, ResultCode) or
      ((ResultCode <> ERROR_SUCCESS) and (ResultCode <> ERROR_NOT_FOUND) and (ResultCode <> ERROR_NOT_SUPPORTED)) then
      RaiseException('Cannot delete application: ' + SysErrorMessage(ResultCode) + ' (' + IntToStr(ResultCode) + ')');
    // Delete the application pool
    if not IIs7ExecAppCmd(Format('delete apppool "%s"', [IIsApplicationPoolName]), ExecResult, ResultCode) or
      ((ResultCode <> ERROR_SUCCESS) and (ResultCode <> ERROR_NOT_FOUND)) then
      RaiseException('Cannot delete application pool: ' + SysErrorMessage(ResultCode) + ' (' + IntToStr(ResultCode) + ')');
  end
  else
    RaiseException('Cannot delete web-site: Unknown OS version.');
end; 
```

**有用的帮手**

查找 ASP.NET 用于读取/写入虚拟目录中文件的 Windows 用户帐户。用于设置“App_Data”的权限。

```
// Throws exceptions.
function GetIIsAppPoolIdentity(const IIsApplicationPoolName: String): String;
var
  Version: TWindowsVersion;
  ResultCode: Integer;
  ExecResult: String;
  IIS, AppPool: Variant;
begin
  GetWindowsVersionEx(Version);
  if (Version.Major = 5) and (Version.Minor = 1) then  // XP: IIS 5.1
  begin
    // TODO: Should be read from "[.NET 4]\Config\machine.config" -> system.web.processModel.userName
    // - "System"
    // - "Machine" -> "ASPNET" (default)
    // - A custom user account
    // See https://msdn.microsoft.com/en-us/library/dwc1xthy.aspx
    Result := 'ASPNET';
  end
  else if (Version.Major = 5) and (Version.Minor = 2) then  // 2003: IIS 6.0
  begin
    try
      IIS := CreateOleObject('IISNamespace');
      AppPool := IIS.GetObject('IIsApplicationPool', 'localhost/W3SVC/AppPools/' + IIsApplicationPoolName);
      if (AppPool.AppPoolIdentityType = 0) then
        Result := 'NT AUTHORITY\SYSTEM'
      else if (AppPool.AppPoolIdentityType = 1) then
        Result := 'NT AUTHORITY\LOCAL SERVICE'
      else if (AppPool.AppPoolIdentityType = 2) then
        Result := 'NT AUTHORITY\NETWORKSERVICE'
      else if (AppPool.AppPoolIdentityType = 3) then
        Result := AppPool.WAMUserName
      else
        RaiseException('Cannot get application pool identity: Unknown identity type (' + IntToStr(AppPool.AppPoolIdentityType) + ')');
    except
      RaiseException('Cannot get application pool identity: Unable to get object');
    end;
  end
  else if (Version.Major >= 6) then  // Vista / 2008 or later
  begin
    if not IIs7ExecAppCmd(Format('list apppool "%s" /text:processModel.identityType', [IIsApplicationPoolName]), ExecResult, ResultCode) or
      (ResultCode <> ERROR_SUCCESS) then
      RaiseException('Cannot get application pool identity.');
    if (ExecResult = 'LocalSystem') then
      Result := 'NT AUTHORITY\SYSTEM'
    else if (ExecResult = 'LocalService') then
      Result := 'NT AUTHORITY\LOCAL SERVICE'
    else if (ExecResult = 'NetworkService') then
      Result := 'NT AUTHORITY\NETWORKSERVICE'
    else if (ExecResult = 'ApplicationPoolIdentity') then
      Result := 'IIS AppPool\' + IIsApplicationPoolName
    else
      RaiseException('Cannot get application pool identity: Unknown identity type "' + ExecResult + '"');
  end
  else
    RaiseException('Cannot get application pool identity: Unknown OS version: ' + IntToStr(Version.Major) + '.' + IntToStr(Version.Minor));
end; 
```

返回网站的物理路径。有助于找到将文件安装到的正确位置。

```
// Throws exceptions.
function IIsGetPhysicalPath(const IIsServerNumber: Integer): String;
var
  Version: TWindowsVersion;
  IIS, WebService, WebSite, WebRoot: Variant;
  ResultCode: Integer;
  ExecResult: String;
  WebSiteName: String;
  PhysPath: String;
begin
  GetWindowsVersionEx(Version);
  if (Version.Major = 5) then
  begin
    try
      // Create the main IIS COM Automation object
      IIS := CreateOleObject('IISNamespace');
      WebService := IIS.GetObject('IIsWebService', 'localhost/W3SVC');
      // Get web site
      WebSite := WebService.GetObject('IIsWebServer', IntToStr(IIsServerNumber));
      WebRoot := WebSite.GetObject('IIsWebVirtualDir', 'Root');
    except
      RaiseException(Format('Web-site #%d not found: ', [IIsServerNumber]) + GetExceptionMessage());
    end;
    PhysPath := WebRoot.Path;
  end
  else if (Version.Major >= 6) then  // Vista / 2008 or later
  begin
    // Get name of web-site
    if not IIs7ExecAppCmd(Format('list site /id:%d /text:name', [IIsServerNumber]), ExecResult, ResultCode) then
      RaiseException(Format('Cannot get name of web-site #%d: ', [IIsServerNumber]) + SysErrorMessage(ResultCode) + ' (' + IntToStr(ResultCode) + ')');
    if (Length(Trim(ExecResult)) = 0) then
      RaiseException(Format('Web-site #%d not found.', [IIsServerNumber]));
    WebSiteName := ExecResult;
    // Get physical path
    if not IIs7ExecAppCmd(Format('list vdir /app.name:"%s"/ /text:physicalPath', [WebSiteName]), ExecResult, ResultCode) or
      (ResultCode <> ERROR_SUCCESS) then
      RaiseException(Format('Cannot get physical path to web-site "%s": ', [WebSiteName]) + SysErrorMessage(ResultCode) + ' (' + IntToStr(ResultCode) + ')');
    PhysPath := ExecResult;
  end
  else
    RaiseException('Cannot get physical path to web-site root: Unknown OS version: ' + IntToStr(Version.Major) + '.' + IntToStr(Version.Minor));
  // Expand environment variables in path (e.g. "%SystemDrive%")
  Result := ExpandEnvVars(PhysPath);
end; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-13T13:37:42.150

所以，最后我所做的是创建一个用 C# 编码的单独的可执行文件，它将在安装前通过命令行安装 IIS，然后在安装后将 IIS 注册到适当的应用程序池等。然后我继续在 PrepareToInstall 中通过 Inno Setup 调用可执行文件以安装 IIS，并在 CurStepChanged 中注册 IIS。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T13:24:41.793

我们也在使用 IIS 并考虑自动化 IIS 安装。据我所知，是否可以通过命令行工具完成所有工作。因此，您可以创建自己的 Inno 自定义页面来从用户那里检索必要的数据。（您可以为此使用 Inno 设置表单设计器）。收集完所有东西后，您可以创建并填写准备好的模板批处理文件，并在安装后执行批处理。

我会这样尝试：

*   尝试使用有关您的 IIS 安装的批处理文件执行所有操作（查看此[存档页面](https://web.archive.org/web/20150709233704/http://myitforum.com/cs2/blogs/jgilbert/archive/2009/03/05/automating-iis-7-installation-to-support-configuration-manager-2007.aspx)
*   当您可以对 IIS 配置的批处理文件执行任何操作时，您需要为 Inno 设置制作模板批处理文件
*   为 Inno 创建自定义页面以检索必要的数据
*   在 Inno 中，用变量替换模板批次
*   在 Inno 中执行批处理

希望这可以帮助

# extjs - 如何更改控制器中网格的商店/网址？

> ID：11830186
> 
> 赞同：0
> 
> 时间：2012-08-06T14:22:54.280
> 
> 标签：extjs, store

是否可以更改分配给网格的 Store 的 url？我就是这样做的，但是看起来很丑。我相信还有另一种方法：

```
Ext.define('APP.controller.List', {
    extend : 'Ext.app.Controller',
    stores : ['Users', 'Reports'],
...
 // after click on some button
var lv = this.getUserlist();
lv.store.getProxy().api.read = 'data/reports.json'; // UGLY WAY to change url
lv.store.reload(); // and now my list has new content

In other way I have one list but I would like to load data there using 2 stores (users and reports). I know that store is assigned to list (grid) forever. 

How do it better without change url in store->proxy ?

Thanks for help. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T18:01:39.887

Use Store.setProxy() method instead:

```
var lv = this.getUserList();

lv.store.setProxy({
    type: 'ajax',
    url:  'data/reports.json'
}); 
```

I would also recommend to rethink your design if it calls for one Grid with two Stores. Something's wrong here.

# css - 如何为特定元素 ID 修改容器的 css 类

> ID：11830201
> 
> 赞同：4
> 
> 时间：2012-08-06T14:23:35.233
> 
> 标签：css, css-selectors

我想修改特定父元素的类。这是我所拥有的：

```
<form id="form2">
    <div class="blueform">
        <div class="formlegend">
        ...
        </div>
    </div>
</form> 
```

我`formlegend`只想为 id 为“form2”的表单覆盖类。我试过了：

```
#form2.formlegend {
    padding: 10px;
} 
```

但它不起作用。这甚至可能吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-06T14:25:42.277

您缺少 2 个选择器之间的“[后代组合](http://www.w3.org/TR/css3-selectors/#descendant-combinators)符”（空格，通常只是一个空格字符）：

```
#form2 .formlegend {
    padding: 10px;
} 
```

如果没有后代组合器，您的选择器将匹配 ID 为`form2` *且*类为的元素`formlegend`。根据您问题中的标记，您需要它来匹配一个元素与一个类，该类`formlegend`是一个 ID 为的元素的*后代*`form2`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T14:25:32.580

是的，但请确保您的覆盖类是在您的 CSS 中的原始类**之后声明的**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T14:28:00.880

你可以试试

```
#form2 .blueform .formlegend { } 
```

如果这不起作用，您必须添加具有唯一 ID 的附加元素（ ID 始终应该是唯一的）。两个 ID 呼叫覆盖一个 ID 呼叫，所以它看起来像

```
#override #form2 .formlegend { } 
```

# objective-c - 如何更改水平 UITableView 的反弹区域的颜色/背景

> ID：11830205
> 
> 赞同：3
> 
> 时间：2012-08-06T14:23:46.163
> 
> 标签：objective-c, ios, uiview, uitableview

[根据本教程](http://iosstuff.wordpress.com/2011/06/29/creating-pulse-style-scrolling-horizontally-scrolling-uitableview-as-a-subview-of-uitableviewcell/)，我正在开发一个自定义的“脉冲样式”UITableView ，一切都很顺利。我进行了一些修改和扩展，但有一个我想实现的功能需要一些帮助：水平反弹区域的颜色。

这是创建包含表格视图的单元格的方法：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {    
    NSString *cellIdentifier = [@"TableViewCell" stringByAppendingFormat:@"%i", self.content.indexInArrayOfViews];
    UIView *view = [self.content viewAtIndex:indexPath.row];
    UITableViewCell *cell = [self.horizontalTableView dequeueReusableCellWithIdentifier:cellIdentifier];

    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:cellIdentifier] autorelease];

        view.center = CGPointMake(view.center.y,view.center.x);
        view.contentMode = UIViewContentModeCenter;

        view.transform = CGAffineTransformMakeRotation(M_PI_2);
        cell.selectionStyle = UITableViewCellSelectionStyleNone;
    }

    [cell addSubview:view];

    return cell;
} 
```

我知道存在重复使用单元格的问题，但现在我想在[此处更改此颜色 [IMG]](https://i.imgur.com/leRJG.png)。

我可以控制垂直表视图反弹区域的颜色，但我很难为我的水平视图复制这种成功。

这就是我垂直的做法：

```
CGRect frame = self.tableView.bounds;
    frame.origin.y = -frame.size.height;
    UIView* topBack = [[UIView alloc] initWithFrame:frame];
    topBack.backgroundColor = [self.delegate backgroundColorForTopOfTableView];
    [self.tableView addSubview:topBack];
    [topBack release]; 
```

[这是根据这个 StackOverflow 问题。](https://stackoverflow.com/questions/1166236/light-gray-background-in-bounce-area-of-a-uitableview)

**如何更改水平表格视图（嵌套在表格视图单元格中）的颜色/背景？**

[这是一张专辑，里面有一些相关的 iPhone 截图和 IB 截图。](https://imgur.com/a/17wNv)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T12:59:03.870

我发现了一个解决方案：

```
if (indexPath.row == 0){
    UIView *bounce = [[UIView alloc] initWithFrame:CGRectMake(-320, 0, 320, 150)];
    bounce.backgroundColor = [self.delegate colorForBounceRegionAtRow:self.content.indexInArrayOfViews];
    [view addSubview:bounce];
}

if (indexPath.row + 1 == self.content.viewCount){
    UIView *bounce = [[UIView alloc] initWithFrame:CGRectMake([self.content widthOfViewAtIndex:self.content.viewCount - 1], 0, 320*2, [self.content greatestHeight])];
    bounce.backgroundColor = [self.delegate colorForBounceRegionAtRow:self.content.indexInArrayOfViews];
    [view addSubview:bounce];
} 
```

这为第一个和最后一个元素添加了全屏的彩色矩形，给人一种反弹区域的错觉。

# java - Java中的k个最近邻图实现

> ID：11830206
> 
> 赞同：3
> 
> 时间：2012-08-06T14:23:47.270
> 
> 标签：java, graph, nearest-neighbor

我正在实施一个火焰聚类算法，作为学习更多关于图和图遍历的一种方式，第一步是构建一个 K-最近邻图，我想知道最快的运行方式是什么通过节点列表并连接每个节点只说它是最近的五个邻居。我的想法是，我将从一个节点开始，遍历其他节点的列表，并将最接近的节点保留在一个数组中，确保丢弃前 n 之后的所有内容。现在，我可以通过对列表进行排序并保留前 n 个条目来做到这一点，但我宁愿在内存中保留更少的东西，所以我想知道是否有办法只拥有最终数组并将该数组更新为我遍历，

另外，请注意，这不是[Java 中 K-Nearest Neighbor Implementation](https://stackoverflow.com/questions/11064801/k-nearest-neighbour-implementation-in-java)的副本。KNNG 与 KNN 不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:47:28.683

放置前 n 个节点，按列表排序。然后遍历其余节点，如果它适合当前列表（即是前n个节点），则将其放在列表中的相应位置并丢弃最后一个前n个节点。如果它不适合前 n 个列表，则丢弃它。

```
for each neighborNode
 for(int i = 0; i < topNList.size(); i++){
       if((dist = distanceMetric(neighborNode,currentNode)) > topNList.get(i).distance){
             topNList.remove(topNList.size()-1)
             neighborNode.setDistance(dist);
             topNList.add(i, neighborNode);
       } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-09T19:43:08.743

我认为最有效的方法是使用绑定优先级队列，例如 [https://github.com/tdebatty/java-graphs#bounded-priority-queue](https://github.com/tdebatty/java-graphs#bounded-priority-queue)

# android - 使用 Intent 和 url 打开 Facebook

> ID：11830215
> 
> 赞同：0
> 
> 时间：2012-08-06T14:24:09.473
> 
> 标签：android, facebook, http

> **可能重复：**
> [从 Android 应用打开 Facebook 页面？](https://stackoverflow.com/questions/4810803/open-facebook-page-from-android-app)

当我加载一个网址时

```
Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url)); 
startActivity(intent); 
```

当它以“ [https://twitter.com](https://twitter.com) ”开头时，它为我提供了不同的 Android 应用程序，包括 Twitter。但是当我在她以“ [https://facebook.com](https://facebook.com) ”开头时加载一个 url 时，android 建议浏览器这样做。

我知道如果我使用 API，我可以用 facebook 应用程序撬开，但我的 facebook 应用程序中只有一个按钮，我不认为 API 是最轻的。您是否有任何想法来克服此要求并确保即使在 facebook 上也能提供 android 服务？

那些认为这篇文章已经回答的人是对的，但是 facebook API 很重，我会尽量避免。感谢您的理解。我希望有一个可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:50:52.207

尝试`fb://root`在上述代码中用作 url。

# objective-c - Objective-c 类别

> ID：11830218
> 
> 赞同：1
> 
> 时间：2012-08-06T14:24:17.170
> 
> 标签：objective-c, categories

我正在学习 Objective-C，现在我被类别困住了。这是代码

```
#import <Foundation/Foundation.h>

    @interface NSMutableArray (NSMutableArrayCategory)

    -(NSMutableArray *)removeLastObject;

    @end

    #import "NSMutableArrayCategory.h"

    @implementation NSMutableArray (NSMutableArrayCategory)

    -(NSMutableArray *)removeLastObject
    {
       return [self removeObjectAtIndex:[self count] - 1];
    }
    @end 
```

问题是我得到

```
Returning void from a function with incompatible result type 'NSMutableArray' * 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T14:30:36.293

您可能想声明`removeLastObject`为返回`void`，而不是`NSMutableArray`。

```
@interface NSMutableArray (NSMutableArrayCategory)

- (void)removeLastObject;

@end 
```

然后实现将如下所示：

```
- (void)removeLastObject
{
   [self removeObjectAtIndex:[self count] - 1];
} 
```

这与 上的其他突变方法相匹配`NSMutableArray`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T14:34:43.013

潜在的问题是`removeLastObject`已经定义并且可以做你想做的（所以人们不会重新创建它）。然而，这里的一些答案有点令人困惑，因为他们建议使用类别来覆盖现有方法是可以的（或者至少不要明确声明您不能这样做）。你不能这样做。这是定义不明确的行为，在某些情况下是完全未定义的行为。您通常应该子类化以覆盖方法。

有一种称为 swizzling 的高级技术可以让您在没有子类的情况下执行此操作，但它是一种非常专业且有时很脆弱的技术，不适用于一般用途。

但在任何情况下，您都不应该使用类别来覆盖现有方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T14:29:03.743

我不熟悉目标c。但我想 removeObjectAtIndex 返回 void。所以我会尝试

```
[self removeObjectAtIndex:[self count] -1]; 
return self; 
```

删除项目后返回自我..

# batch-file - Windows中的批处理文件任务-跨多个文件查找和替换

> ID：11830221
> 
> 赞同：0
> 
> 时间：2012-08-06T14:24:23.077
> 
> 标签：batch-file, replace

我必须编写一个批处理文件来查找和替换版本的值，并使用用户提供的新值作为输入进行构建。

用户最初给出 3 个值：应用程序、版本和构建值（新值）。
然后在文件夹中的多个`.property`文件中进行搜索。Apps 值在多个文件中搜索，只要有匹配项，该文件的版本和构建将被用户提供的值替换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T23:54:26.003

To Find and replace across multiple files easily, use [FART](https://sourceforge.net/projects/fart-it/)!

# java - 使用 XStream 将 XML 解析为 POJO

> ID：11830222
> 
> 赞同：0
> 
> 时间：2012-08-06T14:24:24.083
> 
> 标签：java, xml, xml-parsing, xstream, pojo

我有一个 xml 文件，我想读取它并将其解析为 POJO。

我为此使用 XStream。

我无法将文件作为输入发送到解析代码（文件在我的本地驱动器上）。

如何读取 xml 文件并使用 fromXML() 方法对其进行解析？

如果有人可以举例说明将 xml 文件作为输入发送并将其解析为 POJO 并将其打印在屏幕上，我将不胜感激

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:36:03.750

根据提供的评论，我可以更好地理解您面临的问题。我相信您正在寻找的答案是隐式集合。查看有关别名的 XStream 教程：http: [//x-stream.github.io/alias-tutorial.html](http://x-stream.github.io/alias-tutorial.html)。

# junit - 在junit测试期间模拟cdi拦截器

> ID：11830225
> 
> 赞同：1
> 
> 时间：2012-08-06T14:24:34.130
> 
> 标签：junit, mocking, java-ee-6, cdi, interceptor

我有一个复杂的 Java EE 6 应用程序，其中包含一个 Web 模块、一个 EJB 模块和一些实用程序 jar。

我想用 Junit 做一些集成测试。因此我使用了 openwebbeans cdi 容器（感谢 Struberg 先生[http://struberg.wordpress.com/2012/03/17/controlling-cdi-containers-in-se-and-ee/](http://struberg.wordpress.com/2012/03/17/controlling-cdi-containers-in-se-and-ee/)）它工作得很好。我可以在 Junit 测试中启动一个完整的 cdi 容器。

我的问题是我的应用程序中有一些无法在 Junit 测试中运行的拦截器（MQ、持久性和事务拦截器）。所以我想模拟这些拦截器的实现。

有人知道怎么做这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T07:34:28.500

敬启者 ;-）

最后，我用干净的 Java EE 技术解决了我的问题。我提供了一个观察 ProcessAnnotatedType 事件的方法。此方法评估处理的类型，如果它是我的拦截器之一，那么我否决处理。

```
public void processAnnotatedType(@Observes final ProcessAnnotatedType<?> event, final BeanManager manager) {
    if (event.getAnnotatedType().getJavaClass().equals(PrivilegeCheckingInterceptor.class)) {
        event.veto();
    }       
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T18:09:36.210

为什么不直接在 Arquillian 选择的容器中进行测试？想到的另一个选项是添加具有模拟功能的拦截器，并在启动 CDI 容器时排除实际的拦截器实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T12:32:15.127

您还可以使用嵌入式 OpenEJB 运行测试。

此链接[http://openejb.apache.org/examples-trunk/interceptors/](http://openejb.apache.org/examples-trunk/interceptors/)可能有用 - 也许设置“openejb.deployments.classpath.exclude”的属性可能会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-28T17:49:00.170

“否决”的另一种选择可能是通过 Deltaspike [@Exclude](https://deltaspike.apache.org/documentation/core.html#__exclude)注释。它可以基于[ProjectStage](https://deltaspike.apache.org/documentation/projectstage.html)否决 bean 。

例子：

```
@Exclude(ifProjectStage = ProjectStage.UnitTest.class)
public class MyInterceptor {
} 
```

然后在您的测试中，您可以使用 Deltapike[测试控制模块](https://deltaspike.apache.org/documentation/test-control.html)激活项目阶段，例如：

```
@RunWith(CdiTestRunner.class)
@TestControl(projectStage = UnitTest.class)
public class TestStageControl {

@Test...

} 
```

# algorithm - 遗传算法如何用于促进机器学习？

> ID：11830229
> 
> 赞同：0
> 
> 时间：2012-08-06T14:24:57.710
> 
> 标签：algorithm, machine-learning, genetic

我是一名本科生，正在对遗传算法在视频游戏中的作用进行非常基础的研究。在 Youtube 上，有一些视频展示了人们如何使用算法来教电脑播放器如何玩。

[http://www.youtube.com/watch?v=ofVKsxeYa6U&feature=related](http://www.youtube.com/watch?v=ofVKsxeYa6U&feature=related)

我将遗传算法理解为一种搜索算法，当您知道您希望实现但不完全准确的一般解决方案时，最好使用它。前任。在 TSP 中，您知道您想找到最短的路线，或者在考试安排问题中，您希望所有学生都能以最少的“中断”来参加考试。在这些问题中，算法的用途很明确。但是，我无法用 ga 掌握“机器学习”的概念

当遗传算法被用来教计算机如何玩时，它们是如何“学习”的？他们是如何学会玩游戏的？他们试图解决的“优化问题”是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T14:31:06.980

一种用途是[特征选择](http://en.wikipedia.org/wiki/Feature_selection)。

很多时候，尤其是在文本问题中——但不仅是——你的特征空间很大，而且许多机器学习算法（例如[KNN](http://en.wikipedia.org/wiki/K-nearest_neighbor_algorithm)）容易受到非信息特征的影响，并且随着大量特征而变得更糟。

使用特征选择算法，您可以减少问题的维度——但问题是——如何选择哪些特征是冗余的？

有很多方法可以做到，但其中一种是使用 Gentic Algorithm 作为搜索功能，并尝试优化您想要保留的功能的子集。

这个用法比较常用，甚至在[AttributeSelection](http://weka.sourceforge.net/doc/weka/attributeSelection/package-summary.html)包中的开源ML库[Weka](http://www.cs.waikato.ac.nz/ml/weka/)中实现为[GeneticSearch](http://weka.sourceforge.net/doc/weka/attributeSelection/GeneticSearch.html)

# jsp - 在 websphere 主题中调用自定义链接

> ID：11830230
> 
> 赞同：0
> 
> 时间：2012-08-06T14:25:00.347
> 
> 标签：jsp, portlet, websphere-portal

我通过 Portal Admin 创建了几个隐藏页面，并使用 URL 映射映射了这些页面。我需要在我的门户主题中调用这些隐藏页面。我是 websphere 的新手，需要一些帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T23:45:41.130

您可以使用 URL 生成 API 生成这些页面的 URL。IBM 提供了用于构建 URL 的 Helper 类。你可以在[这里找到](http://www-01.ibm.com/support/docview.wss?uid=swg21351642)

# jquery - 滚动过去时将多个 div 粘贴到页面顶部

> ID：11830233
> 
> 赞同：0
> 
> 时间：2012-08-06T14:25:15.163
> 
> 标签：jquery, css, scroll

我一直在寻找有关如何在滚动过去时将 div 粘贴到页面顶部的教程，然后在向上滚动时取消粘贴，但我似乎找不到适用于多个 div 的教程。我想复制 iOS 用于音乐的那种滚动，你滚动过去一个字母，那个字母会敲掉前一个字母并粘在顶部。

如果您能提供帮助，请告诉我！

我不是在寻找要编写的代码，只是想知道是否有我找不到的 jquery 插件。

# mysql - 将 InnoDB 表转换为 MyISAM：一个不存在的表抱怨

> ID：11830234
> 
> 赞同：0
> 
> 时间：2012-08-06T14:25:15.553
> 
> 标签：mysql

我执行了涉及（除其他外）两个链接表的架构更改。

```
DROP TABLE `Bump`; # this used to have a foreign key to Place

ALTER TABLE `Place` 
    ...
    DROP PRIMARY KEY, #it used to be a composite key from two decmals
    ADD PRIMARY KEY (`id`) USING BTREE; 
```

之后，我尝试**更改表的引擎**：

```
ALTER TABLE `Place`    ENGINE = MyISAM; 
```

但它给了我：

```
mysql> ALTER TABLE `mydb`.`Place` ENGINE = MyISAM;
ERROR 1217 (23000): Cannot delete or update a parent row: a foreign key constraint fails 
```

* * *

**对于全新的**桌子，这种情况始终如一。这是下面的跟踪。但在一张空桌子上，它什么也没说。

但是对于以前填充的`Place`，它已经按名称提到了该`Bump`表。当父表没有以前的主键并且子表不存在时，为什么会发生这种情况？

我正在转换为 MyISAM 以避免大量插入的事务开销。

```
mysql> show engine innodb status;
+--------+------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Type   | Name | Status                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
+--------+------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| InnoDB |      | 
=====================================
120806 18:49:20 INNODB MONITOR OUTPUT
=====================================
Per second averages calculated from the last 28 seconds
-----------------
BACKGROUND THREAD
-----------------
srv_master_thread loops: 1 1_second, 1 sleeps, 0 10_second, 1 background, 1 flush
srv_master_thread log flush and writes: 1
----------
SEMAPHORES
----------
OS WAIT ARRAY INFO: reservation count 3, signal count 3
Mutex spin waits 1, rounds 30, OS waits 1
RW-shared spins 2, rounds 60, OS waits 2
RW-excl spins 0, rounds 0, OS waits 0
Spin rounds per wait: 30.00 mutex, 30.00 RW-shared, 0.00 RW-excl
------------
TRANSACTIONS
------------
Trx id counter 2D00
Purge done for trx's n:o < 2BB0 undo n:o < 0
History list length 2467
LIST OF TRANSACTIONS FOR EACH SESSION:
---TRANSACTION 0, not started
MySQL thread id 37, OS thread handle 0xa6affb40, query id 182 localhost root
show engine innodb status
---TRANSACTION 0, not started
MySQL thread id 36, OS thread handle 0xb625ab40, query id 177 localhost 127.0.0.1 root
--------
FILE I/O
--------
I/O thread 0 state: waiting for i/o request (insert buffer thread)
I/O thread 1 state: waiting for i/o request (log thread)
I/O thread 2 state: waiting for i/o request (read thread)
I/O thread 3 state: waiting for i/o request (read thread)
I/O thread 4 state: waiting for i/o request (read thread)
I/O thread 5 state: waiting for i/o request (read thread)
I/O thread 6 state: waiting for i/o request (write thread)
I/O thread 7 state: waiting for i/o request (write thread)
I/O thread 8 state: waiting for i/o request (write thread)
I/O thread 9 state: waiting for i/o request (write thread)
Pending normal aio reads: 0 [0, 0, 0, 0] , aio writes: 0 [0, 0, 0, 0] ,
 ibuf aio reads: 0, log i/o's: 0, sync i/o's: 0
Pending flushes (fsync) log: 0; buffer pool: 0
671 OS file reads, 3 OS file writes, 3 OS fsyncs
0.00 reads/s, 0 avg bytes/read, 0.00 writes/s, 0.00 fsyncs/s
-------------------------------------
INSERT BUFFER AND ADAPTIVE HASH INDEX
-------------------------------------
Ibuf: size 1, free list len 0, seg size 2, 0 merges
merged operations:
 insert 0, delete mark 0, delete 0
discarded operations:
 insert 0, delete mark 0, delete 0
Hash table size 553193, node heap has 2 buffer(s)
0.00 hash searches/s, 0.00 non-hash searches/s
---
LOG
---
Log sequence number 10825171
Log flushed up to   10825171
Last checkpoint at  10825171
0 pending log writes, 0 pending chkp writes
8 log i/o's done, 0.00 log i/o's/second
----------------------
BUFFER POOL AND MEMORY
----------------------
Total memory allocated 135987200; in additional pool allocated 0
Dictionary memory allocated 358285
Buffer pool size   8191
Free buffers       7529
Database pages     660
Old database pages 263
Modified db pages  0
Pending reads 0
Pending writes: LRU 0, flush list 0, single page 0
Pages made young 0, not young 0
0.00 youngs/s, 0.00 non-youngs/s
Pages read 660, created 0, written 0
0.00 reads/s, 0.00 creates/s, 0.00 writes/s
No buffer pool page gets since the last printout
Pages read ahead 0.00/s, evicted without access 0.00/s, Random read ahead 0.00/s
LRU len: 660, unzip_LRU len: 0
I/O sum[0]:cur[0], unzip sum[0]:cur[0]
--------------
ROW OPERATIONS
--------------
0 queries inside InnoDB, 0 queries in queue
1 read views open inside InnoDB
Main thread process no. 26970, id 2791775040, state: waiting for server activity
Number of rows inserted 0, updated 0, deleted 0, read 0
0.00 inserts/s, 0.00 updates/s, 0.00 deletes/s, 0.00 reads/s
----------------------------
END OF INNODB MONITOR OUTPUT
============================
 |
+--------+------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T14:41:52.790

似乎表上必须有另一个外键（或链接到表）。

你从“show create table mydb.Place”得到什么？

# objective-c - NSString 包含任何“。*”来显示它

> ID：11830236
> 
> 赞同：0
> 
> 时间：2012-08-06T14:25:29.767
> 
> 标签：objective-c, nsstring

嗨，我的字符串有问题。我想补充：

```
 NSString *termo  = [NSString stringWithFormat:@"%@%@: %@ ", @"~00000000:",nazwa, @".*"]; 
```

这个 .* 是任何东西。我该如何使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T14:31:41.183

`.*`是一个用于匹配任何东西的正则表达式，但如果你只是想看看 an`NSString`是否为空，你最好做这样的事情

```
![string isEqualToString:@""] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T18:52:46.143

您的问题非常不清楚，但是您的评论“我有一些从服务器获得的字符串。我想用这个解析这个字符串”似乎暗示：

1.  你有一个从某个地方获得的字符串；
2.  此字符串应包含您存储在变量中的文本`nazwa`；和
3.  您希望找到任何`nazwa`内容之后的文本。

如果这个*猜测*是正确的，那么下面的代码片段可能会有所帮助，它**不**包含您需要进行的任何检查来验证输入是否确实包含您正在寻找的内容，并且后面跟着一些东西 - 检查文档以了解用于查看什么的方法如果他们找不到文本等，他们会返回：

```
// a string representing the input
NSString *theInput = @"The quick brown fox";
// nazwa - the text we are looking for
NSString *nazwa = @"quick";
// locate the text in the input
NSRange nazwaPosition = [theInput rangeOfString:nazwa];
// a range contains a location (offset) and a length, so
// adding these finds the offset of what follows
NSUInteger endofNazwa = nazwaPosition.location + nazwaPosition.length;
// extract what follows
NSString *afterNazwa = [theInput substringFromIndex:endofNazwa];
// display
NSLog(@"theInput '%@'\nnazwa '%@'\nafterNazwa '%@'", theInput, nazwa, afterNazwa); 
```

这输出：

```
theInput 'The quick brown fox'
nazwa 'quick'
afterNazwa ' brown fox' 
```

高温高压

# sql-server-2008 - 如何让 SQL Left Join 只返回一行？

> ID：11830239
> 
> 赞同：1
> 
> 时间：2012-08-06T14:25:41.563
> 
> 标签：sql-server-2008, left-join

使用 SQL Server 2008，我试图在 c1 列上在表 1 和表 2 之间进行左连接。

这个想法是，从左表（表 1）中，我抓取每一行。从右边（表 2）我只得到一个值。

```
Table 1    
--------------------
document          varchar(30)

Table 2    
--------------------
idTable2          int(30)
document          varchar(30)

Sample data TABLE 1
--------------------
3846922
2000762
3064627

Sample data TABLE 2
--------------------
1            3846922
2            2000762
3            3064627
4            2000762
5            3846922 

Sample Result
--------------------
3846922     1
2000762     2
3064627     3 
```

我使用[这篇](https://stackoverflow.com/questions/2510349/using-left-join-to-only-selection-one-joined-row)文章作为指导，但无法达到预期的结果。到目前为止，我得到了左表的许多值和右表的许多值。有任何想法吗？以下是我的sql查询：

```
SELECT t1.document, t2.idTable2
FROM Table1 t1
LEFT JOIN Table2 t2
ON t1.document = 
(
   SELECT TOP 1 t2_aux.document
   FROM Table2 t2_aux
   WHERE t2_aux.document = t1.document
   ORDER BY t2_aux.document DESC
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:29:33.893

```
DECLARE  @t1 TABLE(document varchar(30))

INSERT INTO @t1
VALUES('3846922'),('2000762'),('3064627')

DECLARE  @t2 TABLE(idTable2 int,document varchar(30))
INSERT INTO @t2
VALUES(1,'3846922'),
(2,'2000762'),
(3,'3064627'),
(4,'2000762'),
(5,'3846922 ')

select t1.document,min(t2.idTable2) as idTable2  from @t1 t1 inner join @t2 t2
on t1.document = t2.document 
group by t1.document
order by idTable2 
```

# mysql - 多对多 vs 一对多

> ID：11830241
> 
> 赞同：2
> 
> 时间：2012-08-06T14:25:47.820
> 
> 标签：mysql, sql, ruby-on-rails, ruby, activerecord

我需要设置用户权限来编辑其他用户的个人资料。

我想要的是能够为每个用户设置可以处理的用户。所以，假设我们有 5 个用户：A、B、C、D、E

我希望 A 能够处理 B、C 和 D。我希望 B 能够处理 A、E、C。等等......

这是一对多还是多对多的关系？

我无法理解它，因为在我看来这是一对多的，因为一个用户有多个用户。但是由于用户本身可以由另一个用户处理，所以我认为它可能是多对多的。

我应该问自己什么问题来确定正确的关系？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T14:28:46.900

这是一个多对多的关系，一个帐户可以编辑多个帐户，而多个帐户可以编辑一个帐户。

例子：

```
A can edit ABC  
B can edit AC 
C can edit BC 
```

所以A可以被多个账户编辑（或者属于多个账户），并且可以编辑多个账户（或者有多个账户）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-06T15:32:56.350

让我们解决您的问题，看看如何识别这种关系。

当您编写将检查用户是否被授权的代码时，您将拥有两个主要数据：执行编辑的用户和正在编辑的用户。因此，您的应用程序将要问的问题是*“用户 A 可以编辑用户 B 吗？”*

暂时忽略关系的语义，想想你将如何查找该问题的答案：

```
table can_edit:
  requestor_id | edited_id | permission
  =====================================
  User A       | User B    | YES
  User A       | User C    | YES
  User A       | User D    | YES
  User A       | User E    | NO
  User B       | User A    | YES
  User B       | User C    | YES
  User B       | User D    | NO
  etc... 
```

使用此查找表，您可以确定谁有权编辑谁。但是，再看一下这张表所描述的内容。由于您正在查找是/否问题的答案，因此您可以更简单地表达它：

```
table can_edit:
  requestor_id | edited_id | permission
  =====================================
  User A       | User B    | YES
  User A       | User C    | YES
  User A       | User D    | YES
  User B       | User A    | YES
  User B       | User C    | YES
  etc... 
```

在这里，我们删除了`NO`权限。现在我们可以问： “我们是否有*与我们的权限检查相匹配**的条目？” `can_edit`*如果我们执行查找并且该行存在，那么我们可以允许访问。

现在，由于该`permission`列将始终为`YES`，因此包含它没有多大意义。所以现在我们有了一个基本上是用户 ID 关系列表的表。

在这一点上，我们可以使用数据库图绘制出关系的样子：

```
users:
  user_id  <-----+
  email          |       can_edit:
  pass_digest    +-------- requestor_id
               +========== edited_id
users:         |
  user_id <====+
  email
  pass_digest 
```

如果我们查看[rails 关联指南](http://guides.rubyonrails.org/association_basics.html)中的示例图，我们可以看到我们的图与`has_many :through`和非常匹配`has_and_belongs_to_many`。这些都描述**了多对多**关系。

就实现细节而言，您会注意到*“用户 A 可以编辑用户 B 吗？”* 和*“用户 B 是用户 A 的朋友吗？”* 本质上是同一个问题，只是对关系使用了不同的术语。有了这些知识，您会发现关于如何定义这种**自引用`has_many :through`关系**的大量著作，例如Ryan Bates 的[精彩截屏视频。](http://railscasts.com/episodes/163-self-referential-association?view=asciicast)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-06T14:30:09.777

如果您不确定，我建议您阅读有关 Rails 关联的指南。有一些很好的例子和模式图片，可以说明问题：

[http://guides.rubyonrails.org/association_basics.html#the-has_and_belongs_to_many-association](http://guides.rubyonrails.org/association_basics.html#the-has_and_belongs_to_many-association)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T14:28:31.423

这是一个多对多关系，因为在您的示例`A`中是关系的双方。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T14:30:45.473

我猜是 M2M 关系，因为在表中*有多少*？不止一个与*霍伊*有关，不止一个。

# restructuredtext - 如何在 reStructuredText 中创建一个不间断的空间？

> ID：11830242
> 
> 赞同：31
> 
> 时间：2012-08-06T14:25:51.873
> 
> 标签：restructuredtext

如何在 reStructuredText 中创建一个不间断的空间？

一个明显但有问题的解决方案是：

```
`word A` 
```

但它可能会被不同的实现区别对待，例如 rst2latex 或 rst2pdf。此外，它以斜体显示。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-08-27T16:05:24.027

您需要 unicode 指令，但它只能用于替换。所以你需要定义一个这样的替换：

```
.. |nbsp| unicode:: 0xA0 
   :trim: 
```

然后像这样使用它：

```
xx |nbsp| xx 
```

`:trim:`是否可以摆脱替换周围的那些空间。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-09T15:29:14.260

考虑到 reStructuredText 的目标是像纯文本一样可读，你也可以使用它`|_|`来代替视觉上的干扰。`|nbsp|`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-29T00:58:40.920

我在这里看不到问题，运行 docutils v0.9。至少 rst2latex 和 rst2html 在不间断空白方面表现得很好。Latex 生成 ~ 和 html 生成   当您输入一个不间断字符（\xa0、\0240）时。

也许你有编辑问题？如果您可以设法输入字符，则 docutils 将完成这项工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T16:52:01.453

我最终想出了一个解决 Sphinx 的方法。我覆盖 HTML 和 LaTeX 编写器以将`~`字符转换为不间断空格。这是HTML之一：

```
import sphinx.writers.html
BaseTranslator = sphinx.writers.html.SmartyPantsHTMLTranslator

class CustomHTMLTranslator(BaseTranslator):

    def bulk_text_processor(self, text):
        if '~' in text:
            text = text.replace('~', '&nbsp;')
        return text

sphinx.writers.html.SmartyPantsHTMLTranslator = CustomHTMLTranslator 
```

和乳胶一个：

```
import sphinx.writers.latex
BaseTranslator = sphinx.writers.latex.LaTeXTranslator

class DocTranslator(BaseTranslator):

    def visit_Text(self, node):
        if self.verbatim is not None:
            self.verbatim += node.astext()
        else:
            text = self.encode(node.astext())
            if '\\textasciitilde{}' in text:
                text = text.replace('\\textasciitilde{}', '~')
            if not self.no_contractions:
                text = educate_quotes_latex(text)
            self.body.append(text)

sphinx.writers.latex.LaTeXTranslator = DocTranslator 
```

它不是那么漂亮，它甚至不会让你逃脱这个`~`角色，但它适用于我的目的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T13:45:26.523

我没有测试过，但也许你可以使用[http://docutils.sourceforge.net/docs/ref/rst/directives.html#unicode-character-codes](http://docutils.sourceforge.net/docs/ref/rst/directives.html#unicode-character-codes)和 unicode“无中断空间”字符：[http://www .fileformat.info/info/unicode/char/a0/index.htm](http://www.fileformat.info/info/unicode/char/a0/index.htm)

# ios - 如何在 Xcode 中从 DevPortal 注销

> ID：11830243
> 
> 赞同：1
> 
> 时间：2012-08-06T14:25:59.207
> 
> 标签：ios, xcode, macos, app-store-connect

我过去常常使用别人的开发者帐户进行编码。我现在想使用 xcode 来管理我自己的证书（和我自己的 Apple ID），并向我的开发门户帐户发出请求，但它似乎记住了旧凭据并且不会让我输入我的新凭据。有人可能知道注销的方法吗？此外，它会不断从旧帐户下载开发者身份，并且不会让我压制它们。任何机会可能会有所帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T16:14:54.867

使用钥匙串访问删除旧证书。删除 Xcode -> Organizer 中的旧配置文件

完成获取新证书的过程并从 developer.apple.com（配置门户）下载新的配置文件。

更改项目的签名属性以匹配。

# php - PHP OOP 连接到 MYSQL（构造函数与传递实例）效率

> ID：11830244
> 
> 赞同：0
> 
> 时间：2012-08-06T14:26:00.933
> 
> 标签：php, mysql, performance, oop, constructor

我一直想知道 OOP 连接的效率。示例结构如下所示。每个类由文件夹和类名分隔。例如：

```
/mysql/mysql.class.php //holds general connect and disconnect functions
/mysql/query.class.php //holds all the queries made to the db (uses basic mysql ^ )
/library/application.class.php //holds all the algorithms (uses queries to db ^ ) 
```

在执行算法时，`application.class.php`调用`query.class.php`（当它需要查询时）调用`mysql.class.php`连接。

这两种方式中哪一种是正确的（如果有的话）？有没有更简单、更有效的方法来做到这一点？

这是做两件事的相同方法**（哪个更有效？？）**：

```
require_once('/mysql/mysql.class.php ');
require_once('/mysql/query.class.php ');

$mysqlClass = new MYSQL();
$queryClass = new Query();

class Application {                
  public function getVar() {         
    $param = foo;         
    $db = $mysqlClass->connect(); //connection to mysql
    $queryClass->callsomequerymethod($db, $param); //pass the db connection to function
  } 
} 
```

**VS**

```
class Application {     
  private $db;      
  public function __construct(DatabaseConnection $db, QueryClass $queryclass){
    $this->db = $db;     
  }           
  public function getVar() {         
    $param = foo;         
    $db = $this->db;
    $queryclass->callsomequerymethod($db, $param);
  } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T14:29:44.830

无法评论效率，但第二种方法会更好，因为变量在使用它们的类中整齐地限定范围，而不是位于全局命名空间中。

我要做的进一步修改是`require`在构造函数中移动语句，以便仅在实例化使用它们的类（在您的情况下）时才包含这些文件`Application`。

# vb.net - 对于每个 x ... 下一个 Vs。对于每个 x ... 下一个 x

> ID：11830247
> 
> 赞同：5
> 
> 时间：2012-08-06T14:26:09.513
> 
> 标签：vb.net, syntax

通常，我用 C# 编写 .NET，但目前我正在更新一个用 VB.NET 编写的项目，并且注意到`For Each`循环中使用了一种奇怪的语法。

有没有区别

```
For Each x in collection.Items
    ...
Next 
```

和

```
For Each x in collection.Items
    ...
Next x 
```

?

我在这里的代码中都看到了，很好奇为什么有人会使用第二种变体。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T14:31:29.313

这在 MSDN 参考中是这样指定的：

> 您可以选择在 Next 语句中指定元素。这提高了程序的可读性，尤其是在嵌套 For Each 循环的情况下。您必须指定与出现在相应 For Each 语句中的变量相同的变量。

原文可在此处找到 - 备注部分下的第五段：

[http://msdn.microsoft.com/en-us/library/5ebk1751.aspx](http://msdn.microsoft.com/en-us/library/5ebk1751.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T14:28:11.817

第二个版本对读者来说更清楚，尤其是在有很多嵌套循环的地方。没有其他原因。有关更多信息，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/5ebk1751.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T14:28:25.433

功能上没有区别；这只是为了帮助避免错误并与 VB6 向后兼容。就个人而言，我从不使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T14:28:31.907

它在那里注释哪个`next`属于哪个`for`。我不确定编译器是否检查以查看`for`和`next`匹配，但可以想象，如果他们不这样做，它可能会失败

# maya - maya 及其 VRML 导出与artoolkit

> ID：11830259
> 
> 赞同：0
> 
> 时间：2012-08-06T14:26:53.887
> 
> 标签：maya, artoolkit, vrml

我目前正在使用 Artoolkit（让程序员轻松开发增强现实应用程序的 C 和 C++ 语言软件库）和 Maya2013 开展一个项目。我想知道是否有人成功地从 Maya 导出了 VRML 文件并将其显示在artoolkit中。wrl 文件可以在 cosmoplayer 中查看，但它们不能很好地与artoolkit 一起使用。

[1] 好吧，如果我简单地写

```
Shape {
appearance Appearance {
    material Material { }
}
geometry Box { } 
```

}

它适用于artoolkit。

[2] 当我导出模型（即球体）时，它就不起作用了。这是它的wrl文件。

```
#VRML V2.0 utf8 CosmoWorlds V1.0
WorldInfo
{
 title  "hydrant"
 info   "VRML2.0 created with Version 1.3, from Alias Maya 2013"
}
NavigationInfo
{
 type [ "EXAMINE" ]
 headlight  TRUE
 speed      1.000000
}
Switch
{
 whichChoice    -1
 choice
 [
  Shape
  {
   appearance Appearance
   {
    material DEF lambert1_0 Material
    {
     diffuseColor   0.400000 0.400000 0.400000
     specularColor  0.000000 0.000000 0.000000
     emissiveColor  0.000000 0.000000 0.000000
     shininess      0.000000
     transparency   0.000000
    }
   }
  }
  Shape
  {
   geometry DEF pCube1_0Geo IndexedFaceSet
   {
    convex FALSE
    solid FALSE
    coord DEF pCube1GeoPoints Coordinate
    {
     point [
      -1.254 -1.013 2.585,
      1.254 -1.013 2.585,
      -1.254 1.013 2.585,
      1.254 1.013 2.585,
      -1.254 1.013 -2.585,
      1.254 1.013 -2.585,
      -1.254 -1.013 -2.585,
      1.254 -1.013 -2.585
     ]
    }
    coordIndex [
     0 1 3 2 -1, 
     2 3 5 4 -1, 
     4 5 7 6 -1, 
     6 7 1 0 -1, 
     1 7 5 3 -1, 
     6 0 2 4 -1
    ]
    normalPerVertex TRUE
    normal Normal
    {
     vector [
      0.000 0.000 1.000,
      0.000 0.000 1.000,
      0.000 0.000 1.000,
      0.000 0.000 1.000,
      0.000 1.000 0.000,
      0.000 1.000 0.000,
      0.000 1.000 0.000,
      0.000 1.000 0.000,
      0.000 0.000 -1.000,
      0.000 0.000 -1.000,
      0.000 0.000 -1.000,
      0.000 0.000 -1.000,
      0.000 -1.000 0.000,
      0.000 -1.000 0.000,
      0.000 -1.000 0.000,
      0.000 -1.000 0.000,
      1.000 0.000 0.000,
      1.000 0.000 0.000,
      1.000 0.000 0.000,
      1.000 0.000 0.000,
      -1.000 0.000 0.000,
      -1.000 0.000 0.000,
      -1.000 0.000 0.000,
      -1.000 0.000 0.000
     ]
    }
    normalIndex [
     0 1 2 3 -1,
     4 5 6 7 -1,
     8 9 10 11 -1,
     12 13 14 15 -1,
     16 17 18 19 -1,
     20 21 22 23 -1
    ]
   }
  }
 ]
}
Group
{
 children
 [
  DEF persp Viewpoint
  {
   position -6.664414 5.734681 17.361393
   orientation  -0.626571 -0.770664 -0.116128 0.472021
   fieldOfView  0.950022
   description  "persp"
  }
  DEF pCube1 Transform
  {
   translation      0.000000 0.000000 0.000000
   rotation     0.000000 0.000000 0.000000 0.000000
   scale        1.000000 1.000000 1.000000
   scaleOrientation 0.0  0.0  1.0  0.0
   children Shape
   {
    appearance Appearance
    {
     material USE lambert1_0
    }
    geometry USE pCube1_0Geo
   }
  }
 ]
} 
```

[3] 这是在artoolkit中工作的.wrl文件的版本

```
 #VRML V2.0 utf8

Background {                  #remove these lines
 skyColor .7 .7 1             #
 }                            # when placing this
 Viewpoint {                  #
  position 0 0 7            # object in a VRML world
   }                          #
NavigationInfo {              # or apartment.
 type "EXAMINE"               #
 }                            #

WorldInfo {
   title "Animated Snowman"
    info [ "Copyright 1988 modeled by Kiwano [Andrew Reitemeyer] kiwano@t-online.de "
          "This model is linkware. Non commercial users are required to link to" 
                    " http://home.t-online.de/home/kiwano4 "
                    "Commercial users must pay a small fee, details and more models from the above url"
          "This node must remain unaltered in this code"
          ]
          }    

 Transform {           # main grouping node
translation 0 0 0      # controls position
scale 1 1 1            # controls size
rotation 0 0 0 0       # controls orientation
  children [

DEF Bottom Transform {
translation 0 -1 0
  scale 1.2 1 1.2
    children [
    DEF Ball  Shape {
        appearance Appearance {
          material Material {
           diffuseColor 1 1 1
           specularColor .9 .9 1
           shininess 1
           ambientIntensity .2
          # transparency .2
           }
         }  
       geometry Sphere {
         radius 1
         }
       }
       DEF  See VisibilitySensor {}
     ]
   }     
DEF Middle Transform {
 translation 0 0 0
  scale .9 .9 .9
    children [
    USE Ball  
     ]
   }     
DEF head Transform {
 translation 0 .9 0
  scale .6 .6 .6
    children [
    USE Ball  
     ]
   }  
DEF Eye1 Transform {
    translation .35 1.1 .4
    children [
    DEF Eye  Shape {
        appearance Appearance {
          material Material {
           diffuseColor 0 0 0
           specularColor 1 1 1
           shininess 1
           ambientIntensity 1
           }
         }  
       geometry Sphere {
         radius .1
         }
       }
     ]
   }     
DEF Eye2 Transform {
    translation -.35 1.1 .4
    children [
    USE Eye 
     ]
   }  
DEF Nose  Transform {
    translation 0 .9 .8
    rotation 1 0 0 1.57
    children [
     Shape {
        appearance Appearance {
          material Material {
           diffuseColor .8 .5 0
           specularColor .9 .6 0
           shininess .3
           ambientIntensity .2
           }
         }  
       geometry Cone {
         bottomRadius .1
         height .5
         }
       }
     ]
   }     
DEF Hat Transform  {
 translation 0 0 0
   children [

Transform {
    translation 0 1.3 0
    rotation 0 1 1 -.1
    children [
      Shape {
        appearance DEF Felt Appearance {
          material Material {
           diffuseColor 0 0 0
           specularColor 1 1 1
           shininess 1
           ambientIntensity 1
           }
         }  
       geometry Cylinder {
         radius .7
         height .05
         }
       }
     ]
   }  
 Transform {
    translation 0 1.6 0
    rotation 0 1 1 -.1
    children [
      Shape {
        appearance USE Felt 
       geometry Cylinder {
         radius .5
         height .6
         }
       }
     ]
   }
  ]
 }# end Hat   
DEF Arm1  Transform {
    children [
    DEF Arm  Shape {
        appearance DEF Stick Appearance {
          material Material {
           diffuseColor .7 .6 .4
           specularColor 1 1 0
           shininess .2
           ambientIntensity .1
           }
         }  
      geometry Extrusion {
        creaseAngle 1.4
         crossSection [ .1 0, 
                     .071 -.07,  0 -.1
                      -.07 -.071,  -.1 0,
                      -.071 .07,  0 .1         #18
                      .07 .071,  .1 0,
          ]
         spine [.6 .35 0, 1.5 .2 0, 2 0 .5 ]
         scale [ 1 1, .7 .7, .5 .5]

       }
     }
     ]
   }

 DEF Arm2  Transform {
    children [
    Shape {
        appearance USE Stick 
      geometry DEF Tipper Extrusion {
        creaseAngle 1.4
         crossSection [ .1 0, 
                     .071 -.07,  0 -.1
                      -.07 -.071,  -.1 0,
                      -.071 .07,  0 .1         #18
                      .07 .071,  .1 0,
          ]
         spine [-.6 .35 0, -1.5 .2 0, -2 0 .5]
        # spine [-.6 .35 0, -1.5 .8 0, -.65 1.4 0 ]
         scale [ 1 1, .7 .7, .5 .5]

       }
     }
     ]
   }

  ]
 }  

DEF Tick TimeSensor {
   cycleInterval 15
   loop TRUE 
   enabled FALSE
   }

DEF Lift CoordinateInterpolator {
     key [0, .35, .45, .5, .65, .75, 1]
     keyValue [-.6 .35 0, -1.5 .2 0, -2 0 .5,

               -.6 .35 0, -1.5 .2 0, -2 0 .5, 

               -.6 .35 0, -1.5 .8 0, -.65 1.4 0

               -.6 .35 0, -1.5 1 0, -1.4 1.9 0

               -.6 .35 0, -1.5 .8 0, -.65 1.4 0 

                -.6 .35 0, -1.5 .2 0, -2 0 .5, 

               -.6 .35 0, -1.5 .2 0, -2 0 .5,                

               ]
            } 

DEF Doff PositionInterpolator {
     key [0, .45, .5, .65, 1] 
     keyValue [ 0 0 0, 0 0 0, -.6 .5 0, 0 0 0, 0 0 0 ]
     }

ROUTE See.isActive TO Tick.set_enabled                 
ROUTE Tick.fraction_changed TO Lift.set_fraction
ROUTE Lift.value_changed TO Tipper.set_spine 
ROUTE Tick.fraction_changed TO Doff.set_fraction
ROUTE Doff.value_changed TO Hat.set_translation  

WorldInfo {
   title "Arcadia"
   info [ "(C)1997 modeled by Kiwano (Andrew Reitemeyer) kiwano@t-online.de"]

          } 
```

我无法区分第 [2] 部分中的代码和第 [3] 部分中的代码。有人可以帮忙吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T06:52:35.073

好吧，一个是消火栓，另一个是跳舞的雪人，这是主要区别；）

在 [2] 中，切换节点的“whichChoice”是 -1，这使它什么也不显示。尝试将其更改为 0 以显示第一个孩子。或者消除它，我认为你不需要它。

# javascript - OpenLayers 重投影

> ID：11830260
> 
> 赞同：0
> 
> 时间：2012-08-06T14:26:57.963
> 
> 标签：javascript, openlayers, projection

我正在使用 openLayers 来显示来自 WMS 的一大堆乌拉圭图层。我正在尝试添加可以使用两个不同基础图层的选项。其中之一是位于球形墨卡托 900913 中的谷歌卫星层。然后我有一张位于 UTM21S 32721 中的乌拉圭地图。我的问题似乎是当我尝试更改基础层时。当我显示谷歌卫星时，我添加到地图中的 wms 图层（例如乌拉圭的路线）似乎消失了。当我尝试另一种方式时，同样的事情发生了，在 UTM21S 上加载图层并更改为谷歌卫星。为了解决这个问题，我尝试监听更改基础层的事件。这是代码：

```
function mapBaseLayerChanged(event) {
    var pseudo = new OpenLayers.Projection('EPSG:900913');
    var utm21s = new OpenLayers.Projection('EPSG:32721');
    var baseLayer = "EPSG:900913";
    if(event.layer.name == "Google Satellite"){
        map.projection = pseudo;
        map.maxExtent = new OpenLayers.Bounds(-6522200,-4170000,-5890000,-3510000);
    }else{
        baseLayer = "EPSG:32721";
        map.projection = utm21s;
        map.maxExtent = new OpenLayers.Bounds(300000, 6100000, 900000, 6750000);
    }
    for(i = 0 ; i < map.layers.length; i++){
        if (map.layers[i].visibility && !map.layers[i].isBaseLayer && !map.layers[i].isVector) { // Refresh visible non base  
            if(baseLayer == "EPSG:900913"){
                map.layers[i].projection = pseudo;
            }else{
                map.layers[i].projection = utm21s;
            }
            map.layers[i].redraw(true); // Other layer  
            }  
        alert(map.layers[i].projection);
    }
    //alert(map.getProjection());
    map.zoomToMaxExtent();    
} 
```

当我运行此代码时，图层的投影似乎发生了变化，但出现了同样的问题..提前致谢！！

更新：

试图使它与此一起使用，但没有：

```
if(baseLayer == "EPSG:900913"){
                map.layers[i].addOptions({
                    srs: 'EPSG:900913',
                    format:'png',
                    trnsparent: true,
                },true);
                //map.layers[i].projection = pseudo;
            }else{
                map.layers[i].addOptions({
                    srs: 'EPSG:32721',
                    format:'png',
                    trnsparent: true,
                },true);
                //map.layers[i].projection = utm21s;
            } 
```

将参数 srs 更改为 projection 就可以了。现在函数的代码是：

```
function mapBaseLayerChanged(event) {
    var pseudo = new OpenLayers.Projection('EPSG:900913');
    var utm21s = new OpenLayers.Projection('EPSG:32721');
    var baseLayer = "EPSG:900913";
    if(event.layer.name == "Google Satellite"){
        map.projection = pseudo;
        map.maxExtent = new OpenLayers.Bounds(-6522200,-4170000,-5890000,-3510000);
    }else{
        baseLayer = "EPSG:32721";
        map.projection = utm21s;
        map.maxExtent = new OpenLayers.Bounds(300000, 6100000, 900000, 6750000);
    }
    for(i = 0 ; i < map.layers.length; i++){
        if (map.layers[i].visibility && !map.layers[i].isBaseLayer && !map.layers[i].isVector) { // Refresh visible non base  
            if(baseLayer == "EPSG:900913"){
                map.layers[i].addOptions({
                    projection: pseudo,
                    format:'png',
                    trnsparent: true,
                },true);
            }else{
                map.layers[i].addOptions({
                    projection: utm21s,
                    format:'png',
                    trnsparent: true,
                },true);
            }
        }  
    }
    map.zoomToMaxExtent();    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T11:23:32.680

**由对问题的评论组成**

如果使用 EPSG:4326 或 EPSG:900913（默认支持）以外的投影，则必须在 OpenLayers 之前包含[proj4js](http://trac.osgeo.org/proj4js/)。该库将处理投影之间的所有转换。更改层中的投影并非易事，[Layer](http://dev.openlayers.org/docs/files/OpenLayers/Layer-js.html)类中也有很多与之耦合的东西。也许您的方法不起作用，因为在您设置属性后仍然有一些对旧投影的引用。如果您使用[addOptions](http://dev.openlayers.org/docs/files/OpenLayers/Layer-js.html#OpenLayers.Layer.addOptions)，您应该能够有效且安全地在图层上设置属性。

# python - 编码sigma公式？

> ID：11830261
> 
> 赞同：12
> 
> 时间：2012-08-06T14:26:58.933
> 
> 标签：python, python-2.7

Python初学者，运行2.7

我找不到 Pythonic 的方式来编写以下公式。我的目标是拥有一个可以输入值的函数（在以前的尝试中，我只发现了一个高度重复的蛮力解决方案）。

![公式](../Images/edf989a29448029d30d9c7261753ee45.png)

**必要信息**：

如果您不知道 sigma 符号的含义：[看这里](http://mathlesstraveled.com/appendices/sigma-notation/)

```
# 'v' is the formula
# 'i' 'j' 'k' are actors with numerical attributes 'c' 's' and 'x'
# 'n' = length of the following lists (length is identical for all four lists)

values_1 = [Bob, Sue, Mary, Jo...] # i, j, and k are any 3 values drawn from this list  
                        # under the condition that i != j != k

values_2 = [5,6,7,8...] # c is drawn from this list. 
                        # if i = values_1[0], then c(i) = values_2[0]. 
                        # same for j and k

values_3 = [9,10,11,12...] # s is drawn from this list.  
                        # if i = values_1[0], then s(i) = values_3[0]

values_4 = [13,14,15, 16..] # x is drawn from this list. 
                           # if i = values_1[0], then x(i) = values_4[0].

def V (j,k):
        #this is where I need help!

v_Bob_Sue = # this is where V(Bob, Sue) should go.
            # this is what the math would look like in English:
# SUM of (c_Mary * s_Mary * ((abs(x_Mary - x_Sue) - abs(x_Mary - x_Bob)) / x's range))
# and (c_Jo * s_Jo * ((abs(x_Jo - x_Sue) - abs(x_Jo - x_Bob)) / x's range))

# Bob and Sue are the j and k value
# we do the formula with all the other actors (from values_1) who AREN'T Bob and Sue

v_Bob_Mary = # etc 
v_Bob_Jo = 
v_Sue_Bob =
v_Sue_Mary =
v_Sue_Jo =
v_Mary_Bob =
v_Mary_Sue =
v_Mary_Jo =
v_Jo_Bob =
v_Jo_Sue =
v_Jo_Mary = 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-06T15:04:39.213

至于“sigma”，计算非常简单，因为它也被称为“sum”。在 python 中有一个内置函数：http: [//docs.python.org/library/functions.html#sum](http://docs.python.org/library/functions.html#sum)

至于您提供的公式，我认为您在这里真正想念的是列表或数组。i、j 和 k 可以是 n 维数组的索引。我会为此使用 numpy 包：

```
import numpy as np

c = np.asarray(values_2)
s = np.asarray(values_3)
x = np.asarray(values_4)

def V(j, k):
    return np.sum(c * s * (np.abs(x - x[j]) - np.abs(x - x[k])) / np.abs(x[-1] - x[0])) 
```

这里 Bob 和 Sue 由 values_1 列表中的索引位置编码。这比使用字符串或类实例更容易。所以你会写：

```
v_Bob_Sue = V(0, 1) 
```

如果您想自动创建变量 v_Bob_Sue 等，您需要动态定义变量名称。所以你需要如下的 exec 语句：

```
for i in xrange(len(values_1)):
    for j in xrange(len(values_1)):
        exec("v_%s_%s = V(%u, %u)" % (values_1[i], values_1[j], i, j) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-11-17T11:56:35.230

使用 python 3.6.x，您可以尝试...

```
def sigma(lowerBound, upperBound):
    x = list(range(lowerBound, upperBound))
    print(" + ".join(str(i) for i in x) + " = " + str(sum(x)))

sigma(0, 10)

# output
0 + 1 + 2 + 3 + 4 + 5 + 6 + 7 + 8 + 9 = 45 
```

# sql-server - SQL Server 仅从存储过程更新/插入/删除表记录

> ID：11830265
> 
> 赞同：0
> 
> 时间：2012-08-06T14:27:14.467
> 
> 标签：sql-server, stored-procedures

有什么方法可以确保仅通过 SQL Server 中的存储过程修改表（插入/删除/更新）而不触及权限？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T14:29:40.080

不，这就是权限的用途。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T14:35:03.483

不幸的是，我认为没有权限可以做到这一点。我知道这样做的唯一方法是

1.  设置一个只能调用 SP 的用户（不能访问任何表）。
2.  在每个 SP 中，您必须使用“EXECUTE AS”（http://msdn.microsoft.com/en-us/library/ms188354.aspx）模拟一个对表具有完全访问权限的用户
3.  然后应用程序使用您在第一步中创建的新用户来调用 SP。

# javascript - 使用less.js检测旧版本的ie然后使用过滤器？

> ID：11830267
> 
> 赞同：0
> 
> 时间：2012-08-06T14:27:26.793
> 
> 标签：javascript, less

我有一个函数可以在 less 中应用渐变：

```
.linearGradient(@begin: black, @end: white, @switch : 100%) {
  background: @begin;
  background: -webkit-gradient(linear, 0 0, 0 100%, from(@begin), color-stop(@switch, @end));
  background: -moz-linear-gradient(top, @begin, @end @switch);
  background: -o-linear-gradient(top, @begin, @end @switch);
  background: linear-gradient(top, @begin, @end @switch);
  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr=@top, endColorstr=@bottom,GradientType=0 ); /* IE6-9 */
} 
```

我希望能够测试版本 < IE10 并使用过滤器，否则只需使用 css3。

编辑：附加问题有没有办法测试浏览器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T14:30:54.603

不要费心做测试；IE10 不支持该`filter`属性。

# json - extjs 中 json 的一个值

> ID：11830271
> 
> 赞同：0
> 
> 时间：2012-08-06T14:27:48.903
> 
> 标签：json, extjs, store

我使用带有模型的商店。jason 有一个我想在警报中使用的值。json是这样的

```
{"slapen":[{"naam":"test","leeftijd":"43"},{"naam":"test2","leeftijd":"27"}]} 
```

我想为第一个结果显示警报。所以当商店加载时我想要这样的警报

```
alert('De eerste winnaar is {here_comes_leeftijd} jaar'); 
```

所以这个数字就是我想要显示的。这可能吗？

```
winnaars = new Ext.data.Store({
    model: 'stepDetails',
    pageSize: 20,
    loadMask: false,
    sortOnLoad: true,

    proxy: {
        type: 'ajax',
        url: detailURL,
        startParam: '',
        limitParam: '',
        pageParam: '',
        reader: {
            type: 'json',
            root: 'slaevents'
        }
    },
    autoLoad: false
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:43:03.103

您可以侦听商店的[加载事件](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store-event-load)（外部或使用侦听器配置）并在那里检查返回的记录并对其采取行动。

```
winnaars = new Ext.data.Store({
    model: 'stepDetails',
    pageSize: 20,
    loadMask: false,
    sortOnLoad: true,

    proxy: {
        type: 'ajax',
        url: detailURL,
        startParam: '',
        limitParam: '',
        pageParam: '',
        reader: {
            type: 'json',
            root: 'slaevents'
        }
    },
    autoLoad: false

    listeners: {
        load: function( aStore, aRecords, aSuccess, aeOpt) {
            // Do something here.
            console.log(aRecords);
        }
    }
}); 
```

# c# - MVC HTML ActionLink 在 URL 中插入大量 %20

> ID：11830273
> 
> 赞同：0
> 
> 时间：2012-08-06T14:27:56.223
> 
> 标签：c#, xml, asp.net-mvc, castle-windsor, xdt-transform

我正在使用 C# ASP MVC3，并且我正在制作一个生成的菜单，其中包含通过城堡温莎传递的参数。

当我在本地开发和测试时，这段代码生成的 url 很好：

```
 @foreach(var menuItem in Model.MenuItems)
        {
            var dic = new RouteValueDictionary();

            foreach (var item in menuItem.QueryValues)
            {
                dic.Add(item.Key, item.Value);
            }

            <li>@Html.ActionLink(menuItem.Name, menuItem.ControllerAction, dic)</li>

            } 
```

但是当它被推送到测试服务器时，URL决定添加：

```
%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20 
```

在通过 URL 传递的每个参数之间。

不完全确定显示哪些区域可以帮助解决问题。可能是 web.config 中使用的 xdt:Transform:Replace 还是完全不同的东西。您可以提供的任何帮助将不胜感激。

谢谢。

**更新：**我发现是什么导致了正在生成的链接中的所有这些空间。XML 替换是在进行替换时在 XML 文件中添加回车符和空格。我将暂时保留这个问题，因为发生这种情况并不理想，所以问题已经改变为我们如何阻止 xdt:Replace 添加这些不需要的空格并返回？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-01-09T22:00:11.740

所以实际的答案就在[这篇文章](http://www.stackoverflow.com/questions/18701285/2020-is-being-added-to-end-of-actionlink)中。nchar 类型末尾有空格，由 Asp.net 编码为 HTTP 为 '%20'。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T09:58:27.140

在与几个人交谈并进行了大量搜索后，我发现这是 SP1 之前 Visual Studio 2010 中的一个错误。由于正在构建和发布应用程序的机器尚未安装 SP1（尽管它应该升级），这就是问题所在。

为了使这个错误成为无因素，我为字符“”、“\r”、“\n”添加了一个 TrimEnd，以从被替换的项目中删除任何空白。

# asp.net-mvc-4 - asp.net MVC 4中的jQuery验证

> ID：11830277
> 
> 赞同：0
> 
> 时间：2012-08-06T14:28:01.507
> 
> 标签：asp.net-mvc-4, jquery-validate

我并不想花时间进行客户端验证。也许对于未来的项目，但我只想对我的表单进行一些基本的表单验证......

我知道您可以将这些东西链接到您的模型或其他任何东西，但如果他的输入不正确，我真的只想向客户显示一条错误消息。但是，我很难得到任何验证。所以我想我错过了一些相当简单的东西。我以为我已经覆盖了所有的基础，但显然没有。

这是我包含在项目和视图中的脚本...

```
<script src="../../Scripts/jquery.validate.js" type="text/javascript"></script>
<script src="../../Scripts/jquery.validate.unobtrusive.js" type="text/javascript"></script>
<script src="../../Scripts/jquery.maskedinput-1.3.min.js" type="text/javascript"></script> 
```

我不认为有错误，因为屏蔽的输入正在工作......但我真的应该打开我的调试器以确保。我会尽快完成这篇文章。

这是我正在做一些一般性验证的地方......

```
$("eEncId").validate({
            rules: {DateOfBirth: {
                    required: true
                }
}
}) 
```

无论我是否有出生日期，表格似乎都提交了......我错过了什么？

**更新：发布 html 输出...**

```
<form action="/EditEncounter/Save?popid=2" id="eEncId" method="post"><label for="Active">Deactivate</label><input id="Active" name="Active" type="radio" value="N" /><input data-val="true" data-val-number="The field EncounterId must be a number." data-val-required="The EncounterId field is required." id="EncounterId" name="EncounterId" type="hidden" value="1898" /><input data-val="true" data-val-number="The field EMPIID must be a number." data-val-required="The EMPIID field is required." id="EMPIID" name="EMPIID" type="hidden" value="0" /><input data-val="true" data-val-number="The field PatientId must be a number." data-val-required="The PatientId field is required." id="PatientId" name="PatientId" type="hidden" value="4433" />    <table width="500" class="odd">
        <tr><td>
            <label for="FirstName">FirstName</label> 
            </td>
            <td><input Value="RAYFIELD" id="FirstName" name="FirstName" type="text" value="RAYFIELD" /></td>
        </tr>
        <tr><td>
            <label for="LastName">LastName</label>
            </td>
            <td>
            <input Value="BOYD" id="LastName" name="LastName" type="text" value="BOYD" />
            </td>
        </tr>
        <tr><td>
            <label for="DateOfBirth">DateOfBirth</label>
            </td>
            <td>
            <input Value="03/06/1947 00:00:00" data-val="true" data-val-date="The field DateOfBirth must be a date." id="DateOfBirth" name="DateOfBirth" type="text" value="3/6/1947 12:00:00 AM" />
        </td>
        </tr>
        <tr><td>
            <label for="Phone">Phone</label>
            </td>
            <td>
            <input Value="4124880798" id="Phone" name="Phone" type="text" value="4124880798" />
        </td></tr>
        <tr><td>
            <label for="HostpitalFinNumber">HostpitalFinNumber</label>
            </td>
            <td>
            <input Value="6669511596226" id="HostpitalFinNumber" name="HostpitalFinNumber" type="text" value="6669511596226" />
        </td></tr>
        <tr><td>
            <label for="AdminDate">AdminDate</label>
            </td>
            <td>
            <input Value="03/02/2012 00:00:00" data-val="true" data-val-date="The field AdminDate must be a date." id="AdminDate" name="AdminDate" type="text" value="3/2/2012 12:00:00 AM" />
        </td></tr>
        <tr><td>
            <label for="MRNType">MRNType</label>
            </td>
            <td>
            <input Value="MPACMRN" id="MRNType" name="MRNType" type="text" value="MPACMRN" />
        </td></tr>
        <tr><td>
            <label for="MRN">MRN</label>
            </td>
            <td>
            <input Value="785528039" id="MRN" name="MRN" type="text" value="785528039" />
        </td></tr>
        <tr><td>
            <label for="PatientRoomPhone">PatientRoomPhone</label>
            </td>
            <td>
            <input Value="" id="PatientRoomPhone" name="PatientRoomPhone" type="text" value="" />
        </td></tr>
        <tr><td>
            <label for="DischargeDateTime">DischargeDateTime</label>
            </td>
            <td>
            <input Value="01/01/0001 00:00:00" data-val="true" data-val-date="The field DischargeDateTime must be a date." id="DischargeDateTime" name="DischargeDateTime" type="text" value="1/1/0001 12:00:00 AM" />
        </td></tr>
        <tr><td>
            <label for="DischargeDisposition">DischargeDisposition</label>
            </td>
            <td>
            <input Value="" id="DischargeDisposition" name="DischargeDisposition" type="text" value="" />
        </td></tr>
        <tr><td>
            <label for="DischargeTo">DischargeTo</label>
            </td>
            <td>
            <input Value="" id="DischargeTo" name="DischargeTo" type="text" value="" />
        </td></tr>
        <tr><td>
            <label for="DischargeAdvocateCall">DischargeAdvocateCall</label>
            </td>
            <td>
            <input Value="" id="DischargeAdvocateCall" name="DischargeAdvocateCall" type="text" value="" />
        </td></tr>
        <tr><td>
            <label for="Payor">Payor</label>
            </td>
            <td>
            <input Value="" id="Payor" name="Payor" type="text" value="" />
        </td></tr>
        <tr><td>
            <label for="HomeHealthCareAccepted">HomeHealthCareAccepted</label>
            </td>
            <td>
            <input Value="" id="HomeHealthCareAccepted" name="HomeHealthCareAccepted" type="text" value="" />
        </td></tr>
        <tr><td>
            <label for="SafeLandingAccepted">SafeLandingAccepted</label>
            </td><td>
            <input Value="" id="SafeLandingAccepted" name="SafeLandingAccepted" type="text" value="" />
        </td></tr>
        <tr><td>
            <label for="PCPName">PCPName</label>
            </td><td>
            <input Value="Dr. Peggy Halsey" id="PCPName" name="PCPName" type="text" value="Dr. Peggy Halsey" />
        </td></tr>
        <tr><td>
            <label for="PCPPhone">PCPPhone</label>
            </td><td>
            <input Value="4126244141" id="PCPPhone" name="PCPPhone" type="text" value="4126244141" />
        </td></tr>
        <tr><td>    
            <label for="SpecialistName">SpecialistName</label>
            </td><td>
            <input Value="" id="SpecialistName" name="SpecialistName" type="text" value="" />
        </td></tr>
        <tr><td>
            <label for="SpecialistPhone">SpecialistPhone</label>
            </td><td>
            <input Value="" id="SpecialistPhone" name="SpecialistPhone" type="text" value="" />
        </td></tr>
        <tr><td>
            <label for="PCPAppointmentDateTime">PCPAppointmentDateTime</label>
            </td><td>
            <input Value="01/01/0001 00:00:00" data-val="true" data-val-date="The field PCPAppointmentDateTime must be a date." id="PCPAppointmentDateTime" name="PCPAppointmentDateTime" type="text" value="1/1/0001 12:00:00 AM" />
        </td></tr>
        <tr><td>
            <label for="PCPAppointmentLocation">PCPAppointmentLocation</label>
            </td><td>
            <input Value="" id="PCPAppointmentLocation" name="PCPAppointmentLocation" type="text" value="" />
        </td></tr>
        <tr><td>
            <label for="SpecialistAppointmentDateTime">SpecialistAppointmentDateTime</label>
            </td><td>
            <input Value="01/01/0001 00:00:00" data-val="true" data-val-date="The field SpecialistAppointmentDateTime must be a date." id="SpecialistAppointmentDateTime" name="SpecialistAppointmentDateTime" type="text" value="1/1/0001 12:00:00 AM" />
        </td></tr>
        <tr><td>
            <label for="SpecialistAppointmentLocation">SpecialistAppointmentLocation</label>
            </td><td>
            <input Value="" id="SpecialistAppointmentLocation" name="SpecialistAppointmentLocation" type="text" value="" />
        </td></tr>
        <tr><td>
            <label for="CompletedPathway">CompletedPathway</label>
            </td><td>
            <input Value="1" id="CompletedPathway" name="CompletedPathway" type="text" value="1" />
        </td></tr>
        <tr><td>
            <label for="CompletedPathwayReason">CompletedPathwayReason</label>
            </td><td>
            <input Value="" id="CompletedPathwayReason" name="CompletedPathwayReason" type="text" value="" />
        </td></tr>
        <tr><td>
            <label for="Comment">Comment</label>
            </td><td>
            <textarea Value="" cols="20" id="Comment" name="Comment" rows="2">
</textarea>
        </td></tr>
    </table>
    <p>
    <input type="submit" value="Save" class="button" id="btClick"/>
    </p> 
</form> 
```

我检查了相应字段的 ID，一切似乎都已检查。很神秘。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T08:23:59.690

我认为您在代码块中缺少 ID 中的 # 试试这个：

```
$("#eEncId").validate({
            rules: {DateOfBirth: {
                    required: true
                }
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T18:14:57.013

哎呀！我不小心在我的布局文件和 View.cshtml 文件中有验证脚本。这可能引起了一些冲突。验证现在似乎正在扎根。

# r - 在 r 中绘制预测值

> ID：11830279
> 
> 赞同：1
> 
> 时间：2012-08-06T14:28:10.180
> 
> 标签：r

我有每月数据，我想绘制预测值：

```
z <- structure(list(Date = structure(c(14610, 14641, 14669, 14700, 
14730, 14761, 14791, 14822, 14853, 14883, 14914, 14944, 14975, 
15006, 15034, 15065, 15095, 15126, 15156, 15187, 15218, 15248, 
15279, 15309, 15340, 15371, 15400, 15431, 15461), class = "Date"), 
    Value = c(4.5e+07, 5.1e+07, 5.6e+07, 5.6e+07, 5.9e+07, 6e+07, 
    6e+07, 6e+07, 6.4e+07, 6.5e+07, 7.5e+07, 7.3e+07, 7.4e+07, 
    8e+07, 8.7e+07, 9.1e+07, 9.2e+07, 9.6e+07, 1.09e+08, 1.08e+08, 
    1.23e+08, 1.29e+08, 1.33e+08, 1.43e+08, 1.27e+08, 1.27e+08, 
    1.23e+08, 1.21e+08, 1.3e+08)), .Names = c("Date", "Value"
), row.names = c(NA, -29L), class = "data.frame")

a <- seq(as.Date(tail(z, 1)$Date), by="month", length=5) 
a <- data.frame(Date = a) 
z.lm <- lm(Value ~ Date, data=x) 
z.pre<-predict(z.lm, newdata=a) 
```

我可以这样绘制 z 数据： 这有效：

```
 plot(z$Date, z$Value, type="l", col="blue", 
      xlim=(c(as.Date(head(x,1)$Date)), c(as.Date(tail(a,1)$Date)), xaxt="n"))

 axis(1, z$Date, format(z$Date, "%b %Y"), cex.axis = .7) 
```

当我尝试这样绘制预测值时：

```
lines(z.pre, col="red") 
```

我没有收到错误，但我没有看到添加到原始图中的红线图。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T14:47:32.820

您需要正确指定`xlim`and`ylim`参数。这些中的每一个都应该是长度为 2 的数字向量。

该功能`range()`很方便。尝试：

```
plot(x$Date, x$Value, type="l", col="blue", xaxt="n",
     xlim=range(c(a$Date, x$Date)),
     ylim=range(c(z.pre, x$Value))
)

axis(1, x$Date, format(x$Date, "%b %Y"), cex.axis = .7) 

lines(a$Date, z.pre, col="red") 
```

![在此处输入图像描述](../Images/a1a324be638b6a4a4e7c973b36c71e45.png)

# jquery - jQuery UI datepicker - 在日历右侧显示周数

> ID：11830281
> 
> 赞同：0
> 
> 时间：2012-08-06T14:28:11.317
> 
> 标签：jquery, jquery-ui, datepicker, jquery-ui-datepicker

我正在为我的一个项目使用 jQuery UI datepicker。根据设计，日期选择器还应该显示周数，这是 jQuery UI 日期选择器已经拥有的功能。但是，在该插件中，周数显示在日历的左侧，而根据设计，我需要在右侧显示它们。有没有比更改插件的 JavaScript 源更简单的方法来做到这一点？

谢谢。

# windows-mobile - 仅在 6.5.3 中的 javascript Prompt() 中缺少 OK 按钮

> ID：11830283
> 
> 赞同：1
> 
> 时间：2012-08-06T14:28:15.753
> 
> 标签：windows-mobile, windows-mobile-6.5

我有一个基本的 javascript 提示，要求用户输入许多标签进行打印。这在 Windows Mobile 6.5 中运行良好，但我们最近升级到 6.5.3，现在提示窗口中缺少 OK 按钮。我们现在所能做的就是取消提示。我们已经在 2 种不同的设备上对此进行了测试，所以我认为这不是硬件问题。有没有其他人遇到过这个问题或知道我可以尝试的其他任何事情？

这是代码：

```
var n = 0;
n = prompt("Number of labels to print?", "3"); 
```

作为一个额外的测试，我尝试使用 w3schools.com 中的 JS 提示示例，我得到了相同的结果。确定按钮丢失。 [http://www.w3schools.com/js/tryit.asp?filename=tryjs_prompt](http://www.w3schools.com/js/tryit.asp?filename=tryjs_prompt)

这是 w3schools 测试的截图：

![w3schools 测试截图](../Images/1a3857adb405052252c67adfed98b29a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-12T13:22:06.047

w3schools 提示代码工作正常：

```
<!DOCTYPE html>
<html>
<body>

<p>Click the button to demonstrate the prompt box.</p>

<button onclick="myFunction()">Try it</button>

<p id="demo"></p>

<script>
function myFunction()
{
var x;

var person=prompt("Please enter your name","Harry Potter");

if (person!=null)
  {
  x="Hello " + person + "! How are you today?";
  document.getElementById("demo").innerHTML=x;
  }
}
</script>

</body>
</html> 
```

看看这三个从真正的 WEH 6.5.3 设备上截取的屏幕截图：

![第一个提示页面](../Images/55b8548635447caff9e8886b9f491c23.png) ![提示画面](../Images/9f0552daccc62a26ac480c3e4354d53d.png) ![结果页面](../Images/731b30f44b9d819d730eb3cddab4db76.png)

**我假设你有一个注册表集**

```
[HKEY_LOCAL_MACHINE\Software\Microsoft\Shell\BubbleTiles]
"HardwareDoneKeyEnabled"=dword:00000001 
```

**它隐藏了软件确定/完成按钮！**

# python - 尝试使用 QProcess 运行 python 控制台时无法获得输出

> ID：11830284
> 
> 赞同：5
> 
> 时间：2012-08-06T14:28:16.863
> 
> 标签：python, qt

我想在 QT C++ 程序中使用 python 解释器，我尝试使用 QProcess 打开 python 控制台：

```
QProcess shell; // this is declared in the class .h file

shell.start("python");
connect(&shell,SIGNAL(readyRead()),SLOT(shellOutput()));
shell.write("print 'hello!'\n"); 
```

但是我没有捕捉到任何输出，我在哪里弄错了，或者有更好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T12:58:43.827

我编写了一个非常简约的程序，可以满足您的期望。下面是代码：

**主窗口.hpp**

```
#ifndef MAINWINDOW_HPP
#define MAINWINDOW_HPP

#include <QtGui>

class MainWindow : public QMainWindow
{
    Q_OBJECT

public:
    explicit MainWindow(QWidget *parent = 0);

private slots:
    void onReadyRead();
    void onPushButtonClicked();

private:
    QPushButton* pushButton;
    QProcess *shell;
};

#endif // MAINWINDOW_HPP 
```

**主文件**

```
#include <QtCore>
#include <QtGui>
#include <QDebug>
#include "mainwindow.hpp"

MainWindow::MainWindow(QWidget* parent)
    : QMainWindow(parent)
{
    pushButton = new QPushButton("Execute");
    connect(pushButton, SIGNAL(clicked()),
            this, SLOT(onPushButtonClicked()));
    setCentralWidget(pushButton);
}

void MainWindow::onPushButtonClicked()
{
    shell = new QProcess(this);
    connect(shell, SIGNAL(readyRead()), this, SLOT(onReadyRead()));
    shell->start("python");
    if (!shell->waitForStarted())
        exit(1);

    shell->write("print 'hello!'\n");
    shell->closeWriteChannel();
    if (!shell->waitForFinished())
        exit(1);

    qDebug() << "Shell error code:" << shell->error();
}

void MainWindow::onReadyRead()
{
    QString text = shell->readAll();
    qDebug() << text;
}

int main(int argc, char* argv[])
{
    QApplication app(argc, argv);
    MainWindow win;
    win.show();
    return app.exec();
} 
```

**实施说明：**

*   我通过添加`QProces::waitFor...()`.
*   我关闭了与 的沟通渠道`QProcess::closeWriteChannel()`。
*   我添加了一些调试输出，尤其是错误代码`QProcess`非常有帮助。

`hello!`当按下按钮时，这些东西一起显示出一种激励。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T13:12:57.950

我发现出了什么问题...

python 解释器必须以 -i 参数开头： python -i

否则它不会对标准输出和输入做出反应。

我很好奇它在没有 -i 的情况下有什么用

# eclipse-plugin - Eclipse 4.2 ADT 插件

> ID：11830285
> 
> 赞同：10
> 
> 时间：2012-08-06T14:28:20.260
> 
> 标签：eclipse-plugin, adt

我正在尝试为 Eclipse 安装 ADT 插件，但出现以下错误：

```
Cannot complete the install because one or more required items could not be found.
  Software being installed: Android Native Development Tools 20.0.2.v201207191942-407447 (com.android.ide.eclipse.ndk.feature.group 20.0.2.v201207191942-407447)
  Missing requirement: Android Native Development Tools 20.0.2.v201207191942-407447 (com.android.ide.eclipse.ndk.feature.group 20.0.2.v201207191942-407447) requires 'org.eclipse.cdt.feature.group 0.0.0' but it could not be found 
```

我已经尝试重新安装 Eclipse。还有其他建议吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-08-09T08:21:10.380

在此链接的帮助下设法解决了这个问题

[https://developers.google.com/eclipse/docs/faq?hl=es#wstinstallerror](https://developers.google.com/eclipse/docs/faq?hl=es#wstinstallerror)

> 1.  选择帮助 > 安装新软件...
> 2.  单击可用软件站点的链接。
> 3.  确保有一个名为 Helios 的更新站点。如果这不存在，请单击添加...并输入[http://download.eclipse.org/releases/helios](http://download.eclipse.org/releases/helios)作为位置。

现在按照通常的步骤安装 ADT 插件，它应该能够从上面添加的更新站点自动获取所需的缺失类。

如果您使用的是最新版本的 Eclipse (Juno)，更新站点是[http://download.eclipse.org/releases/juno](http://download.eclipse.org/releases/juno)（所以只需将 Helios 更改为 Juno）

此外，如果您看到一个名为“包括更新站点”的复选框，请确保选中它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T13:17:59.400

我有同样的问题。我以root身份运行eclipse，问题解决了。顺便说一句，我正在使用 Linux Mint

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T14:33:23.110

[将此](http://dl.google.com/android/ADT-20.0.2.zip).zip 文件下载到您的电脑。从“安装新软件”中，单击“添加”，然后单击“存档”并在文件系统上找到此 .zip 文件。单击“确定”并检查它是否可以正常工作。

编辑：

我猜这是 eclipe 4.2 的一个随机错误。它有时对我有用，有时对你无效。我建议您使用[Eclipse 3.7.2](http://www.eclipse.org/downloads/packages/eclipse-classic-372/indigosr2)并反复尝试，直到成功。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T20:21:28.230

有一个名为“联系所有站点”的复选框。它是插件列表下的最后一个复选框。这对我有用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-06T07:58:53.917

我对 Eclipse 4.2 (Juno) 也有同样的问题。

为我解决的问题是以管理员身份运行 Eclipse - 右键单击​​ Eclipse.exe，选择以管理员身份运行。像这样运行时，在安装 ADT 之前确定所需的依赖项并下载它们没有问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-14T03:16:19.083

通过为 Juno 安装 CDT（C++ 开发人员工具），我成功在 Juno 上安装了 NDK ......就像被迷住了一样，也许这就是 NDK 安装失败的原因，因为 CDT 没有与 Juno 一起预装......但是赫利俄斯是...

CDT 下载页面 -> [http://www.eclipse.org/cdt/downloads.php](http://www.eclipse.org/cdt/downloads.php)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-05T19:13:49.280

以管理员身份运行 Eclipse 并按照与以前相同的步骤进行操作！对我很有魅力！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-30T22:40:48.610

我还得到了“找不到存储库”，我使用[http://dl-ssl.google.com/android/eclipse/](http://dl-ssl.google.com/android/eclipse/)而不是[https://dl-ssl.google.com/android/eclipse/](https://dl-ssl.google.com/android/eclipse/)来获取可用软件网站。

# java - Servlet 未在 ant 上更新

> ID：11830290
> 
> 赞同：0
> 
> 时间：2012-08-06T14:28:28.933
> 
> 标签：java, google-app-engine, ant

我正在为 google-appengine 申请。我正在使用 google app engine sdk for java 并使用 ant 1.8 来启动开发服务器和 jdk 1.6、jre1.6。

问题：每当我对我的 java servlet 进行更改时，它们都不会反映在网页中。事实上，我的浏览器会显示旧的 servlet 及其错误。我编译并重新编译了我的 servlet 代码，重新启动了服务器，但它没有影响任何更改。它仍然运行旧的 servlet 代码。我删除了我的 servlet 类文件，但它仍然出现。这太多了。它如何运行不存在的东西。我尝试清除浏览器缓存和临时文件，但没有任何改变。

有人可以建议我在这种情况下该怎么做吗？如何让ant使用新的servlet？

请帮忙！

PS：当我重新启动我的电脑时问题解决了。注销也可以解决它，但这很烦人，因为即使测试单个变量更改也会要求重新启动或注销。我在我的电脑中搜索了可能保存在某处但我没有得到的任何文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T12:17:07.503

即使我停止了服务器，我也运行了一个虚拟的 java 二进制文件。我必须手动杀死它以停止执行旧的类文件。

# mysql - MYSQL Single Table Count() 显示即使它 = NULL

> ID：11830295
> 
> 赞同：3
> 
> 时间：2012-08-06T14:28:50.040
> 
> 标签：mysql, sql

我一直在寻找谷歌 - 我可能只是愚蠢地理解答案。

我在 mysql 中有一张表 - 问题。

```
+-------------+---------------+------+-----+---------+----------------+
| Field       | Type          | Null | Key | Default | Extra          |
+-------------+---------------+------+-----+---------+----------------+
| id          | int(11)       | NO   |
| status      | varchar(255)  | YES  |
+-------------+---------------+------+ 
```

每个问题都有一个状态。

我正在尝试选择来计算所有问题并按状态列出它们：

SELECT status,COUNT(*) as 'total' FROM issues WHERE (DATE(logged_at) >= ) GROUP BY status

有5种不同的状态-

报告未修复 已修复 已升级 已提交

问题是 - 我的选择仅在 count > 0 时显示状态。即使 count = null 我如何显示所有状态？

我试过 IFNULL 但没有运气。我还看到人们谈论左连接解决方​​案，但那是多表问题。

非常感谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:37:25.557

解决方案就是您所进入的：`LEFT JOIN`来自具有所有这 5 种状态的表。如果您没有这样的表，您可以将其创建为永久或动态（每次需要时）：

```
SELECT 
    st.status
  , COUNT(issues.status) AS total
FROM 
    ( SELECT 'Active' AS status UNION ALL
      SELECT 'Inactive' UNION ALL
      ... 
      SELECT 'Super'
    ) AS st
  LEFT JOIN 
    issues 
      ON  issues.status = st.status
      AND issues.logged_at >= ?        -- no reason to use DATE() function here
GROUP BY st.status ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T14:42:31.840

您将需要一个存储所有状态列表的附加表（例如称为状态），即与问题表中相同类型的一个字段，并确保在该字段上放置索引。

那么下面的 SQL 应该可以解决问题：

```
select statuses.status,count(issues.id) from issues right join statuses on issues.status=statuses.status group by statuses.status 
```

附加表的优点是，如果您决定拥有另一个状态，您只需将其添加到表中，而无需更改任何现有的 SQL 语句。

# python - Eclipse 无法识别 Google python-api-client 库

> ID：11830296
> 
> 赞同：1
> 
> 时间：2012-08-06T14:28:50.993
> 
> 标签：python, eclipse, google-api, google-api-python-client

这简直是​​一件奇怪的事情。

Eclipse 无法在 Django 项目中识别 Google 的[api-python-client 。](http://code.google.com/p/google-api-python-client/)我什至可以做到`GData`。

`import`这是我想做的一个简单的事情

`from apiclient.discovery import build`

Eclipse 显示红色下划线说`Unresolved import: build`

然而，同样的事情在 IDLE、PyScripter 中也能完美运行。

我检查了 Eclipse 中的 python 路径，一切都很好（否则我怎么能导入其他库）。

那么，发生了什么事，我应该如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T14:57:51.763

Try to import discovery instead of build, i.e.

```
from apiclient import discovery
...
discovery.build(...) 
```

I had the same problem and it worked for me. See [this link](https://groups.google.com/forum/?fromgroups#!searchin/google-api-python-client/import%2420build%2420/google-api-python-client/cHjFXOb4n-M/gD3_Xk6K1HUJ) .

# c# - ConnectionString 处的 NullReference

> ID：11830297
> 
> 赞同：1
> 
> 时间：2012-08-06T14:28:56.910
> 
> 标签：c#, asp.net

1 解决方案。

2个项目（1.WEB-2.三层结构）

调用存储过程：Web -> BOL -> BLL -> DAL。

**DAL 的方法**：获取连接字符串并执行。

```
 public DataSet ExecuteSQL(string sp, Persona user)
    {
        EH eh = new EH(); // Error_Handling.cs object
        try
        {
            DataSet ds = new DataSet();
            string connectionString = null;
            connectionString = GetNewConnection("BO"); //HERE COMES THE ERROR
            SqlConnection conn = new SqlConnection(connectionString);
            using (conn)
            { .... 
```

**获取新连接（）。**

```
 public string GetNewConnection(string server)
    {
        return ConfigurationManager.ConnectionStrings["BO"].ConnectionString;
    } 
```

**App.Config**片段命名所需的连接

```
<connectionStrings>
<add name="BO"
    connectionString="Data Source=Server;Initial Catalog=BO;User ID=WebUser;Password=333;Integrated Security=False"
    providerName="System.Data.SqlClient" /> 
```

从 GetNewConnection() 返回时出现以下异常

*   $exception {“对象引用未设置为对象的实例。”} System.Exception {System.NullReferenceException}

为什么它得到一个空引用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T14:31:24.980

你应该在 UI 项目的 Web.Config 中有**ConnectionString**，你的**WEB**项目

复制该`ConnectionString`部分并粘贴到您的**Web.Config**中，它应该可以正常工作

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T14:31:02.153

连接字符串应该在 中`web.config`，而不是`app.config`

# multithreading - LLVM 中的多线程

> ID：11830302
> 
> 赞同：10
> 
> 时间：2012-08-06T14:29:03.883
> 
> 标签：multithreading, llvm, tbb, cilk, cilk-plus

我需要生成将服务于大量线程/任务（数十万）的 LLVM 代码。这些线程应该是轻量级的，如 Intel TBB 的任务、golang gorutines 或其他。当然，它们可以使用外部 C++ 库来实现，例如提到的 Intel TBB（如果它与 LLVM 兼容）。

我一直在寻找有关 LLVM 中的线程的任何信息，但我没有找到太多。在[LLVM 的文档](http://llvm.org/docs/ProgrammersManual.html#threading)中描述了一些 API 调用，但我认为这不是我想要的。

所以有几个问题：

1.  是否可以将英特尔的 TBB 或 Cilk 等技术与 LLVM 一起使用？
2.  在这种情况下我应该使用什么线程库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T13:19:01.957

实际上似乎有一些项目使用英特尔 TBB 和 LLVM，例如英特尔自己的 opencl SDK 使用 TBB 和 LLVM 作为其编译器，[http: //software.intel.com/en-us/articles/vcsource-tools -opencl-sdk/](http://software.intel.com/en-us/articles/vcsource-tools-opencl-sdk/)

# c# - NHibernate，通过反射处理列

> ID：11830311
> 
> 赞同：1
> 
> 时间：2012-08-06T14:29:30.790
> 
> 标签：c#, nhibernate

设想：

我有一个 JavaScript 库，它使用服务器端挂钩处理表的分页/排序/搜索。我已经连接了服务器端 JSON 调用，创建了一个模型绑定器，将传入的值转换为可用的请求对象，现在我正在尝试实现搜索。

通过请求对象，我可以访问要排序的列列表。我正在尝试编写一个通用函数，该函数将允许任何表传入其列，并为每列和搜索值生成 .Where 调用。

目前的方法是获取字符串属性名称，使用反射获取实际值，然后将其与搜索参数进行比较。我正在尝试的*非常粗略的方法是：*

```
public static IQueryable GetSearchClause(IQueryable<object> query, DataTablesPageRequest pageRequest)
{
    var columns = pageRequest.ColumnNames.Split(',');

    for (var i = 0; i < pageRequest.Searchable.Count; ++i)
    {
        if (pageRequest.Searchable[i])
        {
            var column = columns[i];

            var test = query.Where(x => x.GetType().GetProperty(column)
                .GetValue(query.Select(z => z.GetType()), null)
                .Equals("test"));
        }
    }

    return query;
} 
```

当我查看生成的“测试”对象时，我得到了一个非常不愉快的堆栈跟踪：

```
 at NHibernate.Linq.Visitors.HqlGeneratorExpressionTreeVisitor.VisitMethodCallExpression(MethodCallExpression expression)
   at NHibernate.Linq.Visitors.HqlGeneratorExpressionTreeVisitor.VisitExpression(Expression expression)
   at NHibernate.Linq.Visitors.HqlGeneratorExpressionTreeVisitor.Visit(Expression expression, VisitorParameters parameters)
   at NHibernate.Linq.Visitors.QueryModelVisitor.VisitWhereClause(WhereClause whereClause, QueryModel queryModel, Int32 index)
   at Remotion.Linq.Clauses.WhereClause.Accept(IQueryModelVisitor visitor, QueryModel queryModel, Int32 index)
   at Remotion.Linq.QueryModelVisitorBase.VisitBodyClauses(ObservableCollection`1 bodyClauses, QueryModel queryModel)
   at Remotion.Linq.QueryModelVisitorBase.VisitQueryModel(QueryModel queryModel)
   at NHibernate.Linq.Visitors.QueryModelVisitor.Visit()
   at NHibernate.Linq.Visitors.QueryModelVisitor.GenerateHqlQuery(QueryModel queryModel, VisitorParameters parameters, Boolean root)
   at NHibernate.Linq.NhLinqExpression.Translate(ISessionFactoryImplementor sessionFactory)
   at NHibernate.Hql.Ast.ANTLR.ASTQueryTranslatorFactory.CreateQueryTranslators(String queryIdentifier, IQueryExpression queryExpression, String collectionRole, Boolean shallow, IDictionary`2 filters, ISessionFactoryImplementor factory)
   at NHibernate.Engine.Query.HQLExpressionQueryPlan.CreateTranslators(String expressionStr, IQueryExpression queryExpression, String collectionRole, Boolean shallow, IDictionary`2 enabledFilters, ISessionFactoryImplementor factory)
   at NHibernate.Engine.Query.HQLExpressionQueryPlan..ctor(String expressionStr, IQueryExpression queryExpression, String collectionRole, Boolean shallow, IDictionary`2 enabledFilters, ISessionFactoryImplementor factory)
   at NHibernate.Engine.Query.HQLExpressionQueryPlan..ctor(String expressionStr, IQueryExpression queryExpression, Boolean shallow, IDictionary`2 enabledFilters, ISessionFactoryImplementor factory)
   at NHibernate.Engine.Query.QueryPlanCache.GetHQLQueryPlan(IQueryExpression queryExpression, Boolean shallow, IDictionary`2 enabledFilters)
   at NHibernate.Impl.AbstractSessionImpl.GetHQLQueryPlan(IQueryExpression queryExpression, Boolean shallow)
   at NHibernate.Impl.AbstractSessionImpl.CreateQuery(IQueryExpression queryExpression)
   at NHibernate.Linq.DefaultQueryProvider.PrepareQuery(Expression expression, IQuery& query, NhLinqExpression& nhQuery)
   at NHibernate.Linq.DefaultQueryProvider.Execute(Expression expression)
   at NHibernate.Linq.DefaultQueryProvider.Execute[TResult](Expression expression)
   at Remotion.Linq.QueryableBase`1.GetEnumerator()
   at System.Linq.SystemCore_EnumerableDebugView`1.get_Items() 
```

我什至可以用这种技术完成我想要做的事情，还是我真的应该使用逐实体方法，因为我会提前知道要搜索哪些列（并跳过整个反射位）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T20:51:27.703

任务完成！在我的所有存储库继承的基础存储库中创建了这个，目前它足够通用，可以跨多个实体工作，但我相信我将来会遇到问题。这里唯一真正有趣的是我希望子列被命名为“parent.child”，这是我在 DataTables 列命名中强制执行的约定。

```
public ICriteriaWrapper GetWithPagingSortingFiltering(
    Type entityType,
    string columnNames, 
    List<bool> searchableColumns, 
    string searchParameter,
    int numSortingColumns,
    List<int> sortingColumns,
    List<string> sortingDirection, 
    int currentPage,
    int itemsPerPage)
{
    // Create the criteria for the given entity type
    var crit = _session.CreateCriteria(entityType);

    // Split the columns, which will be used as our properties
    var columns = columnNames.Split(',');

    // Add criteria for searchable columns, so long as a parameter is given
    if (searchParameter != string.Empty)
    {
        var disjunction = Restrictions.Disjunction();

        for (var i = 0; i < searchableColumns.Count; ++i)
        {
            if (searchableColumns[i])
            {
                var column = columns[i];
                var columnParts = column.Split('.');

                // Handles immediate children only
                if (columnParts.Count() == 2)
                {
                    var child = columnParts[0];
                    var aliasName = "the" + child;
                    var propertyName = aliasName + "." + columnParts[1];

                    crit.CreateAlias(child, aliasName);

                    disjunction.Add(
                        Restrictions.Like(
                            Projections.Cast(NHibernateUtil.AnsiString, Projections.Property(propertyName)),
                            searchParameter, MatchMode.Start));
                }
                // Handles base level properties
                else if (columnParts.Count() == 1)
                {
                    disjunction.Add(
                        Restrictions.Like(
                            Projections.Cast(NHibernateUtil.AnsiString, Projections.Property(column)),
                            searchParameter, MatchMode.Start));
                }
                else
                {
                    throw new Exception("Unrecognized number of children; add more conditionals!");
                }
            }
        }

        crit.Add(disjunction);
    }

    // Grab the total items count
    var totalItemsCrit = CriteriaTransformer.Clone(crit);
    var totalItems = totalItemsCrit.SetProjection(Projections.RowCount()).UniqueResult();

    // Apply ordering
    for (var i = 0; i < numSortingColumns; ++i)
    {
        var direction = sortingDirection[i];
        var column = columns[sortingColumns[i]];

        if (direction == "asc")
            crit.AddOrder(Order.Asc(column));
        else if (direction == "desc")
            crit.AddOrder(Order.Desc(column));   
    }

    // Apply paging
    var startPage = (itemsPerPage == 0
                         ? 1
                         : currentPage/itemsPerPage + 1);

    crit.SetFirstResult(startPage).SetMaxResults(itemsPerPage);

    return new ICriteriaWrapper
        {
            Criteria = crit,
            TotalItems = Convert.ToInt32(totalItems)
        };
} 
```

# regex - 我想在 a 之后添加 $ ？在 vi 的所有行中。我怎样才能用正则表达式做到这一点？

> ID：11830316
> 
> 赞同：0
> 
> 时间：2012-08-06T14:29:42.940
> 
> 标签：regex, vim

我想在 any 后面加一个 $ 吗？在 vi 的所有行中。我怎样才能用正则表达式做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T14:33:16.707

`\?`替换所有实例`\?\$`

```
s/\?/\?\$/g 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T14:44:59.643

全部替换 ？与 ?$

```
:%s/?/?$/g 
```

# macos - 在 Mac OSX 上模拟 REST Web 服务

> ID：11830318
> 
> 赞同：2
> 
> 时间：2012-08-06T14:29:46.350
> 
> 标签：macos, web-services, mocking

在 OSX 上模拟 Web 服务以测试我的 iPhone 应用程序的最佳（最简单、易于安装和使用）解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T14:40:25.930

我首选的模拟 REST 接口的工具是[Sinatra](http://www.sinatrarb.com)。也就是说，如果我今天要构建一个新的，我可能会研究[Bottle](http://bottlepy.org)（只是因为我最近对 ​​Python 比对 Ruby 更感兴趣；这不是关于语言或框架的相对优点的陈述） . 如果你在谷歌上搜索一下“sinatra 替代品”，你会在这个领域找到其他几个框架。不过，我在 Sinatra 上很幸运。

# xdebug - xdebug_debug_zval 不返回值也不输出任何东西

> ID：11830326
> 
> 赞同：0
> 
> 时间：2012-08-06T14:30:23.390
> 
> 标签：xdebug

你能帮助我吗？我不明白为什么 xdebug_debug_zval 不起作用？我试试

```
$r =  5;
xdebug_debug_zval($r); 
```

我在控制台中调用它：

```
php test.php 
```

它什么也不输出。我需要配置 xdebug.ini 吗？还是php.ini？请帮帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T15:40:52.927

该`xdebug_debug_zval`函数需要将变量的名称传递给它，而不是变量本身。为了使它工作，你应该更正你的脚本：

```
$r = 5;
xdebug_debug_zval('r'); 
```

希望能帮助到你

# prototype - 原型对象.扩展

> ID：11830329
> 
> 赞同：0
> 
> 时间：2012-08-06T14:30:35.153
> 
> 标签：prototype

在下面的代码中，我可以使用以下方法创建一个实例：

新的 TabBuilder();

现在，我尝试创建一个具有不同配置值的实例，我使用：

new TabBuilder({effect:'none', duration:500, tabContainer:'.tab-new', tab:'.tab'})

但这不起作用，有人可以帮忙吗？

```
var TabBuilder = Class.create();
TabBuilder.prototype = {
    config:
    {  
        effect: 'none',
        duration: 300,
        tabContainer: '.tab-container',
        tab: '.tab'
    },

    initialize: function(settings)
    {
        Object.extend(this.config, settings);
        $$(this.config.tabContainer).each(function(el){
            this.buildTabs(el)
                .setActiveTab(el, 0)
                .addObservers(el);
        }.bind(this))
    },

    buildTabs: function(container)
    {
        var tabs = new Element('ol')
            .addClassName('tabs');

        container.insert({'bottom': tabs});

        var tabsContent = new Element('div')
            .addClassName('content')

        tabs.insert({'after': tabsContent});

        $(container).select(this.config.tab).each(function(el) {
            var tab = $(el).select('.head')[0].wrap('li');
            tabs.insert({'bottom': tab});

            var tabContent = $(el).select('.content')[0];
            tabContent.removeClassName('content').addClassName('tab');
            tabsContent.insert({'bottom': tabContent});
            $(el).remove();
        })
        $$('.tabs li:first-child')[0].addClassName('first');
        $$('.tabs li:last-child')[0].addClassName('last');
        return this;
    },

    setActiveTab: function(container, index)
    {
        this._switchTabDisplay(container, index);
        return this;
    },

    addObservers: function(container)
    {
        var that = this;
        $(container).select('.tabs li').each(function(el, index) {
            el.observe('mouseover', function() {
                that.setActiveTab(container, index)
            });
            el.observe('mouseover', function(el) {
                $(this).addClassName('over');
            })
            el.observe('mouseout', function(el) {
                $(this).removeClassName('over');
            })
        })
        return this;
    },

    _switchTabDisplay: function(container, index)
    {
        $(container).select('.tabs li, .content .tab').invoke('removeClassName', 'active');
        $(container).select('.tabs li')[index].addClassName('active');
        $(container).select('.content .tab')[index].addClassName('active');
        $(container).select('.content .tab').invoke('setStyle', {'display': 'none'});
        $(container).select('.content .tab')[index].setStyle({'display': 'block'});
    }

} 
```

# javascript - extjs 在 chrome 中正常工作，但在 firefox 或 ie 中不显示任何内容

> ID：11830331
> 
> 赞同：1
> 
> 时间：2012-08-06T14:30:42.807
> 
> 标签：javascript, html, firefox, google-chrome, extjs

我已经在 Chrome 中正确地处理了这段代码，但在 Firefox 中我看不到任何更改，只是空白页。在控制台中没有错误。所有文件都已加载。我不是前端开发人员，我在 python、ruby 和 java 上写过，也许我做错了什么？但是……到底是怎么回事？！它让我大吃一惊。

它的 MVC 应用程序，我有许多级别的嵌套文件（带有组件）

**模板**

```
<html>
<head>
    <link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}extjs/resources/css/ext-all.css" />
    <link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/style.css" />

    <script src="{{ STATIC_URL }}extjs/ext-dev.js" type="text/javascript" charset="utf-8"></script>
    <script src="{{ STATIC_URL }}app.js" type="text/javascript" charset="utf-8"></script>
</head>
<body>
</body>
</html> 
```

**应用程序.js**

```
Ext.Loader.setConfig({
    enabled: true,
    disableCaching: false,
    paths: {C300App: '/static/c300app', Ext: '/static/extjs/src'}
});
Ext.require([
]);

Ext.application({
    name: 'C300',
    appFolder:'/static/c300app',
    autoCreateViewport: true,
    controllers: ['Base'],
    models: [],
    views: [
            'Viewport'
            ,'Left'
            ,'CenterBase'
            ,'Header'
            ,'Footer'
    ],
    launch: function() {
    }
}); 
```

**视口**

```
Ext.define('C300.view.Viewport', {
    extend: 'Ext.container.Viewport',
    layout: 'border',
    requires:[
        'C300.view.Header'
        ,'C300.view.Footer'
        ,'C300.view.Left'
        ,'C300.view.CenterBase'
    ],
    initComponent: function() {
        var me = this;
        Ext.applyIf(me, {
            border:true,
            items: [
                Ext.create('C300.view.Header',{
                    region: 'north'
                }),
                Ext.create('C300.view.Left',{
                    region: 'west'
                }),
                Ext.create('C300.view.CenterBase', {
                    region: 'center'
                }),
                Ext.create('C300.view.Footer',{
                    region: 'south'
                })
            ]
        });
        this.callParent();
    }
}); 
```

**中心基地**

```
Ext.define('C300.view.CenterBase', {
    extend: 'Ext.tab.Panel',
    alias: 'widget.centerBase',
    itemId: 'centerBase',

    initComponent: function() {
        Ext.applyIf(this, {
            stateId: 'center-panel',
            collapsible: false,
            animCollapse: true,
            layoutConfig: {
                titleCollapse: false,
                animate: true,
                activeOnTop: true
            },
            deferredRender: false,
            activeTab: 0,
            items: [{
                title: 'Информация'
                ,closable: true
                ,autoScroll: true
                ,html: '</br><p style="margin-left:10px;">Welcome!</p>'
            }]

        });
        this.callParent(arguments);
    }
}); 
```

**控制器**

```
Ext.define('C300.controller.Base', {
    extend: 'Ext.app.Controller',
    views: [
        'Viewport'
        ,'Left'
        ,'CenterBase'
        ,'items.ItemWorkers'
        ,'items.ItemOrganization'
        ,'items.ItemServices'
    ],
    refs: [
        {
            ref: 'itemWorkers',
            selector: '#itemWorkers'
        },{
            ref: 'itemOrganization',
            selector: '#itemOrganization'
        },{
            ref: 'itemServices',
            selector: '#itemServices'
        },{
            ref: 'centerBase',
            selector: '#centerBase'
        }
    ],

    init: function() {
        console.log('Testing log');
        this.control({
            'button': {
                click: function() {console.log('Tab click')}
            },
            '#itemWorkers':{
                itemclick:function(view,rec,item,index,eventObj){
                    this.onElementClick(rec.data.id, rec.data.text)
                }
            },
            '#itemOrganization':{
                itemclick:function(view,rec,item,index,eventObj){
                    this.onElementClick(rec.data.id, rec.data.text)
                }
            },
            '#itemServices':{
                itemclick:function(view,rec,item,index,eventObj){
                    this.onElementClick(rec.data.id, rec.data.text)
                }
            }
        });
    },

    onContentChange: function onload() {
        console.log('FFFFFF');
    },

    onElementClick: function(id, title) {
        console.log('tab is:'+title);
        var t = this.getCenterBase();
        var g = t.items.findIndex('title', title);

        if (g >= 0){
            console.log(g);
            t.setActiveTab(g);
        } else {
            t.add({
                title : title,
                html : 'i am tab ',
                closable : true
            });
            var current = t.items.findIndex('title', title);
            t.setActiveTab(current);
        }

    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:40:48.963

我找到了答案。需要从控制器中删除它。

```
 'items.ItemWorkers'
  ,'items.ItemOrganization'
  ,'items.ItemServices' 
```

我不知道为什么 ext 不能与子文件夹一起使用

# javascript - jQuery sidebarToggler 需要使用按钮展开和折叠

> ID：11830333
> 
> 赞同：0
> 
> 时间：2012-08-06T14:30:51.097
> 
> 标签：javascript, jquery, expand, collapse

我有一个 .html 页面，我在其中使用了一个名为 sidebar toggler 的 jQuery 脚本。我在一页中有几个侧边栏切换选项。我需要一键展开所有侧边栏或一键折叠所有侧边栏。但是，我做不到。请帮我用那个脚本写一个函数。

我希望你能为我找到解决方案。

请在 jsFiddle.net 更新我的脚本

[http://jsfiddle.net/aynamohol/PNs7m/9/](http://jsfiddle.net/aynamohol/PNs7m/9/)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T21:42:23.063

我已经更新了你的脚本。你会在这里找到它：http: [//jsfiddle.net/PNs7m/11/](http://jsfiddle.net/PNs7m/11/)

更新内容是：

*   在“一键展开（显示）/折叠使用此链接的所有 div，谢谢”锚标记中添加了 ID 属性。
*   简化了 JavaScript 代码。

请注意，我没有完全解决这个问题，因为我没有用于工具功能的库的文档，但我留下了一种使用该`trigger`功能处理此功能的方法。希望对您有所帮助。:)

# mysql - 在 wp_options 或额外表中保存工作机会

> ID：11830335
> 
> 赞同：0
> 
> 时间：2012-08-06T14:30:55.277
> 
> 标签：mysql, database, wordpress, plugins

嗨 Wordpress 开发人员，

我正在为客户编写一个工作提供插件，我问自己在 mysql 数据库中为工作（id、标题、小时、描述、欧元、城市）创建一个额外的表或将它们保存到 wp_options 是否更有效（多个数组）。如果大数组中有 100 个作业，wp_options 的速度有多快？

最好的问候，克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T04:22:06.110

如果将它们作为一个大数组存储在 wp_options 中，它会很快，因为整个数组将被序列化/反序列化为 JSON 并存储为一条记录。但是，IMO，如果出现问题，很难排除故障。此外，以后很难修改模式（即，您必须编写一个特殊的脚本来将数据从旧模式迁移到新模式）。我建议您创建一个额外的表。

# javascript - 在 Google Charts 折线图的 x 轴上显示日期，而不是时间戳？

> ID：11830337
> 
> 赞同：0
> 
> 时间：2012-08-06T14:31:02.993
> 
> 标签：javascript, google-visualization

这是我使用 Google Charts API 绘制折线图的函数。用于 d1、d2、d3 和 d4 的时间戳是 -

2006 年 1 月 1 日 00:00:00 至 2009 年 1 月 1 日 00:00:00

当我在 Chrome 调试器中设置断点时，d1-d4 显示为`Sun Jan 01 2006 06:00:00 GMT+0000 (GMT Standard Time)`等...

我需要的粒度是“天”，我不在乎分钟/秒。无论如何，这是另一个问题，因为我现在什至无法渲染任何东西，使用此功能时我只是得到一个空白页。我究竟做错了什么？

```
function drawChart() {
    var d1 = new Date();
    var d2 = new Date();
    var d3 = new Date();
    var d4 = new Date();
    d1.setTime(1136095200*1000);
    d2.setTime(1167631200*1000);
    d3.setTime(1199167200*1000);
    d4.setTime(1230789600*1000);
        var data = google.visualization.arrayToDataTable([
          ['Year', 'Sales', 'Expenses'],
          [d1,  1000,      400],
          [d2,  1170,      460],
          [d3,  660,       1120],
          [d4,  1030,      540]
        ]);

        var options = {
          title: 'Company Performance'
        };

        var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
        chart.draw(data, options);
      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T11:14:26.663

[从参考](https://developers.google.com/chart/interactive/docs/reference)：

> 类型可以是以下之一：'string' 'number' 'boolean' 'date' 'datetime' 'timeofday'。

它将类型推断为“日期时间”，因为您没有明确声明它。尝试使用`addColumn`直接将其添加为`date`.

```
var data = new google.visualization.DataTable();
data.addColumn('date', 'Date'); 
```

# c# - Web API 创建 API 密钥

> ID：11830338
> 
> 赞同：60
> 
> 时间：2012-08-06T14:31:03.253
> 
> 标签：c#, asp.net-web-api, api-key

我有兴趣为 web.api 创建 API 密钥并允许客户端使用 API 密钥而不是 web.api 提供的授权与 API 进行通信。

我希望多个客户端能够与 web.api 进行通信。我可以使用 api 密钥而不是创建用户名和密码，并允许客户端与客户端通信。

有这样的内置功能吗？

如果要实施它，您将如何解决？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-08-06T15:34:58.813

您可以通过使用[HMAC Authentication](http://en.wikipedia.org/wiki/Hash-based_message_authentication_code)来实现。基本上，可能有一个名为**ApiKey (apiKey, secretKey)**的数据库表。每个客户端都有每个 Apikey 和密钥：

1.  ApiKey 就像一个公钥，将通过 HTTP 发送（类似于用户名）。

2.  密钥不是通过 HTTP 发送的，使用这个密钥来做 hmac 一些信息并将散列输出发送到服务器。从服务器端，根据公钥，您可以获得相关的密钥和哈希信息，以与哈希输出进行比较。

我已在以下位置发布了详细答案：[如何保护 ASP.NET Web API](https://stackoverflow.com/questions/11775594/how-to-secure-an-aspnet-mvc-web-api/11782361#11782361)

您可以在我的答案中通过 ApiKey 更改用户名和通过密钥更改哈希密码以映射您的想法。

# java - 垃圾收集：伊甸园空间（和其他代大小）是如何计算的？

> ID：11830346
> 
> 赞同：10
> 
> 时间：2012-08-06T14:31:32.037
> 
> 标签：java, solr, garbage-collection

我需要帮助来了解我从中获取的与 GC 相关的数字如何与`jmap`我`jstat`传递给 java 的设置相关联。我在具有 16GB 内存的服务器上使用以下设置启动应用程序 (solr)：

```
-XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:+CMSParallelRemarkEnabled
-Xms12144m -Xmx12144m
-XX:NewRatio=4 -XX:SurvivorRatio=8 -XX:+UseCompressedOops
```

的输出`jmap`开始：

```
并发 Mark-Sweep GC

堆配置：
   MinHeapFreeRatio = 40
   MaxHeapFreeRatio = 70
   MaxHeapSize = 12733906944 (12144.0MB)
   新大小 = 2686976 (2.5625MB)
   MaxNewSize = 130809856 (124.75MB)
   OldSize = 5439488 (5.1875MB)
   新比率 = 4
   幸存者比率 = 8
   PermSize = 21757952 (20.75MB)
   MaxPermSize = 176160768 (168.0MB)

```

为什么`NewSize`, `MaxNewSize`, `OldSize`, 和`PermSize`都那么小，而`MaxHeapSize`是大的？不应该`NewSize + OldSize = heap size`吗？总堆大小不应该接近`MaxHeapSize`吗？为什么设置为 4时`NewSize`正好是一半？`OldSize``NewRatio`

其余的`jmap`输出如下。它与上述内容相匹配，并且包含一个`concurrent mark-sweep generation`我也不知道如何解释的部分。

此外，GC 日志表明“所需的幸存者大小”为 6.2MB，这也很奇怪，因为我知道`-XX:SurvivorRatio=8`应该使幸存者空间为`NewSize`.

最后，我只在我的 GC 日志中看到`ParNew`消息，我知道这是 Eden 的 GC。

```
堆使用：
新一代（伊甸园 + 1 个幸存者空间）：
   容量 = 117768192 (112.3125MB)
   使用 = 20402232 (19.45708465576172MB)
   免费 = 97365960 (92.85541534423828MB)
   17.324059793666528% 已使用
伊甸空间：
   容量 = 104726528 (99.875MB)
   使用 = 16408336 (15.648208618164062MB)
   免费 = 88318192 (84.22679138183594MB)
   15.667793359863893% 已使用
从太空：
   容量 = 13041664 (12.4375MB)
   使用 = 3993896 (3.8088760375976562MB)
   免费 = 9047768 (8.628623962402344MB)
   30.624128945508794% 已使用
到太空：
   容量 = 13041664 (12.4375MB)
   使用 = 0 (0.0MB)
   免费 = 13041664 (12.4375MB)
   0.0% 已使用
并发标记扫描生成：
   容量 = 12603097088 (12019.25MB)
   使用 = 7903352408 (7537.22420501709MB)
   免费 = 4699744680 (4482.02579498291MB)
   62.70960505037411% 已使用
烫发一代：
   容量 = 45903872 (43.77734375MB)
   使用 = 27759192 (26.473228454589844MB)
   免费 = 18144680 (17.304115295410156MB)
   60.472441191889% 已使用

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T14:48:06.470

> 当 MaxHeapSize 很大时，为什么 NewSize、MaxNewSize、OldSize 和 PermSize 都那么小？

尺寸只是它们需要的大小。如果您生成更多的短期垃圾，NewSize 会更大（我不知道 MaxNewSize 是如何设置的，但它通常比我设置的要小）

> 并发标记清除生成

这具有`capacity`= 最大大小、`used`= 已使用、`free`= 容量 - 已使用。

> 我的 GC 日志中的 ParNew 消息，据我所知是 Eden 的 GC。

正如您所指出的，新空间很小，因此经常清理，而旧空间很大，因此很少清理。

# javascript - jquery numpad 图片

> ID：11830348
> 
> 赞同：0
> 
> 时间：2012-08-06T14:31:46.287
> 
> 标签：javascript, jquery

我正在尝试将图像添加到我当前的 iframe 数字键盘。我是 jquery 的新手，所以我不确定在哪里可以添加我在 jquery 中制作的按钮图像。任何帮助将不胜感激。我的代码如下所示：

```
 // Get a numpad button    
    var GetButton = function(value, fn)
    {
        var button = document.createElement("input");
        button.type = "button";
        button.value = value;
        button.style.width = "80px";
        button.style.height = "70px";  

        button.onclick = fn;

        return button;
    };

    // Attach the Numpad control to the page.
    // Create the HTML elements and bind events    
    var Initialize = function ()
    {
        div = document.createElement("div");
        div.style.position = "absolute";
        div.style.zIndex = 999999;

        if(randomize === true)
        {
            var rem = [0,1,2,3,4,5,6,7,8,9];  
            var idx;
            var pos = 0;

            while(pos < 12)
            {
                if(pos != 9 && pos != 11)
                {            
                    idx = Math.floor(Math.random() * (rem.length));                    
                    button = GetButton(rem[idx], (function (value)
                        {
                            return function () { target.value += value; } 
                        })(rem[idx]));                    

                    div.appendChild(button);                    
                    rem = rem.Remove(idx);
                }
                else
                {
                    if(pos == 9)
                    {
                        button = GetButton("C", function () { target.value = ""; });
                        div.appendChild(button);
                    }

                }

                pos++;
            }
        }
        else
        {
            for(var i=1; i<=9; i++)
            {
                button = GetButton(i, (function (value)
                {
                    return function ()
                    {
                        target.value += value;
                    }          
                })(i));

                div.appendChild(button);
            }

            // Clear button     
            button = GetButton("", function ()
            {
                target.value = "";        
            });

            div.appendChild(button);

            // 0 button   
            button = GetButton(0, (function (value)
            {
                return function () { target.value += value; };        
            })(0));

            div.appendChild(button);

            // Close button
            button = GetButton("", function ()
            {
                target.value = "";
            });

            div.appendChild(button);
        }            

        div.style.width = "250px"; 
        iframe.style.position = "absolute";
        iframe.frameBorder = 0;

        document.body.appendChild(iframe);
        document.body.appendChild(div);

        Hide();
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T15:21:44.113

[CSS 背景图片](https://developer.mozilla.org/en-US/docs/CSS/background-image)

```
input.button1 {
  background-image: url("images/foo.gif");
} 
```

或使用按钮标签

```
<button><img src="images/foo.gif" alt="foo"/></button> 
```

# java - 同一表单中的多个提交按钮调用不同的 Servlet

> ID：11830351
> 
> 赞同：32
> 
> 时间：2012-08-06T14:32:04.727
> 
> 标签：java, jsp, servlets

首先，这里是代码：

```
<form action="FirstServlet" method="Post">
    Last Name: <input type="text" name="lastName" size="20">
    <br><br>
    <input type="submit" value="FirstServlet">
    <input type="submit"value="SecondServlet">
</form> 
```

我想了解如何发送信息，以防`FirstServlet button`被按下`FirstServlet`和`SecondServlet button`被按下`SecondServlet`。

**重要：**
我想以相同的形式执行此操作，以便将相同的信息传输到两个 servlet。（当然，在 servlet 中我会相应地使用这些信息）

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-08-06T14:39:30.390

有几种方法可以实现这一点。

可能最简单的方法是使用 JavaScript 来更改表单的操作。

```
<input type="submit" value="SecondServlet" onclick="form.action='SecondServlet';"> 
```

但是，当最终用户禁用 JS（移动浏览器、屏幕阅读器等）时，这当然不起作用。

* * *

另一种方法是将第二个按钮放在不同的形式中，这可能是您需要的，也可能不是您需要的，具体取决于具体的功能要求，这从问题中根本不清楚。

```
<form action="FirstServlet" method="Post">
    Last Name: <input type="text" name="lastName" size="20">
    <br><br>
    <input type="submit" value="FirstServlet">
</form>
<form action="SecondServlet" method="Post">
    <input type="submit"value="SecondServlet">
</form> 
```

请注意，表单在提交时只会发送包含在同一个表单中的输入数据，而不是其他表单。

* * *

另一种方法是创建另一个单一入口点 servlet，该入口点 servlet 进一步委托给正确的 servlet（或者最好是正确的业务操作），具体取决于按下的按钮（其本身可用作其请求参数`name`）：

```
<form action="MainServlet" method="Post">
    Last Name: <input type="text" name="lastName" size="20">
    <br><br>
    <input type="submit" name="action" value="FirstServlet">
    <input type="submit" name="action" value="SecondServlet">
</form> 
```

与以下`MainServlet`

```
String action = request.getParameter("action");

if ("FirstServlet".equals(action)) {
    // Invoke FirstServlet's job here.
} else if ("SecondServlet".equals(action)) {
    // Invoke SecondServlet's job here.
} 
```

这只是对 i18n/维护不太友好。如果您需要以不同的语言显示按钮或更改按钮值而忘记考虑 servlet 代码怎么办？

* * *

一个细微的变化是给按钮自己的固定和唯一的名称，以便可以检查它作为请求参数的存在，而不是它对 i18n/maintenance 敏感的值：

```
<form action="MainServlet" method="Post">
    Last Name: <input type="text" name="lastName" size="20">
    <br><br>
    <input type="submit" name="first" value="FirstServlet">
    <input type="submit" name="second" value="SecondServlet">
</form> 
```

与以下`MainServlet`

```
if (request.getParameter("first") != null) {
    // Invoke FirstServlet's job here.
} else if (request.getParameter("second") != null) {
    // Invoke SecondServlet's job here.
} 
```

* * *

最后一种方法是只使用像[JSF](https://stackoverflow.com/tags/jsf/info)这样的 MVC 框架，以便您可以直接将 javabean 方法绑定到按钮，但这需要对现有代码进行重大更改。

```
<h:form>
    Last Name: <h:inputText value="#{bean.lastName}" size="20" />
    <br/><br/>
    <h:commandButton value="First" action="#{bean.first}" />
    <h:commandButton value="Second" action="#{bean.Second}" />
</h:form> 
```

仅使用以下 javabean 而不是 servlet

```
@ManagedBean
@RequestScoped
public class Bean {

    private String lastName; // +getter+setter

    public void first() {
        // Invoke original FirstServlet's job here.
    }

    public void second() {
        // Invoke original SecondServlet's job here.
    }

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-14T01:17:51.677

除了前面的响应之外，提交具有不同按钮的表单而不会出现语言问题的最佳选择实际上是使用**按钮**标签。

```
<form>
    ...
    <button type="submit" name="submit" value="servlet1">Go to 1st Servlet</button>
    <button type="submit" name="submit" value="servlet2">Go to 2nd Servlet</button>
</form> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-03-28T08:23:37.657

如果你使用 jQuery，你可以这样做：

```
<form action="example" method="post" id="loginform">
  ...
  <input id="btnin" type="button" value="login"/>
  <input id="btnreg" type="button" value="regist"/>
</form> 
```

js 将是：

```
$("#btnin").click(function(){
   $("#loginform").attr("action", "user_login");
   $("#loginform").submit();
}
$("#btnreg").click(function(){
   $("#loginform").attr("action", "user_regist");
   $("#loginform").submit();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T14:38:14.963

您可能需要为每个按钮提交编写一个 javascript。不要在表单定义中定义动作，而是在 javascript 中设置这些值。像下面的东西。

```
function callButton1(form, yourServ)
{
form.action = yourServ;
form.submit();
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-23T13:11:35.127

***如果***您使用弹簧，这是一种更好的方法

[有没有办法使用注释在 Spring MVC 上创建具有多个提交按钮的表单？](https://stackoverflow.com/questions/1631262/is-there-any-way-to-create-form-with-multiple-submit-buttons-on-spring-mvc-using)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-08T10:32:04.833

```
 function gotofirst(){
        window.location = "firstServelet.java";
}
    function gotosecond(){
        window.location = "secondServelet.java";
} 
```

```
<form action="FirstServlet" method="Post">
    Last Name: <input type="text" name="lastName" size="20">
    <br><br>
    <input type="submit" onclick="gotofirst()" value="FirstServlet">
    <input type="submit" onclick="gotosecond()" value="SecondServlet">
</form> 
```

# jquery - 如何将数据从 jQuery 传递到控制器？

> ID：11830352
> 
> 赞同：3
> 
> 时间：2012-08-06T14:32:07.223
> 
> 标签：jquery, ruby-on-rails, view, controller

我有两个字段 - 结束日期和开始日期（日期范围），我应该将它们传递给控制器​​并重新加载此页面。

这是我的代码：

```
 <%= form_tag(:controller => "financial_reports", :action => 'index', :method => 'post') do%>//maybe this line should be edited
   <%= datepicker_input "report","start_date", :dateFormat => "dd/mm/yy" %>
  <%= datepicker_input "report", "end_date", :dateFormat => "dd/mm/yy"%>
  <%end%> 
```

并生成 HTML() ：

```
 <form accept-charset="UTF-8" action="/financial_reports?method=post" method="post"...>
  <input id="report_start_date" name="report[start_date]" size="30" type="text" class="hasDatepicker"><script type="text/javascript">
<input id="report_end_date" name="report[end_date]" size="30" type="text" class="hasDatepicker"
    <input class="btn wide" id="btn-report" name="commit" type="submit" value="Run Report">
  </form> 
```

我可以像这样获得 datepicker 值吗：

```
 $('#datepicker').datepicker({
    onSelect: function(dateText, inst) {
  $("input[name='report[start_date]']").val(dateText);
    }
}); 
```

我需要将它们传递给控制器​​并重新加载此页面，因为在此页面控制器中。

**在这里我需要传递 JQUERY 值**

```
 @financial_reports = current_user.financial_reports.where(:created_at => start_date.to_date..end_date.to_date) 
```

或者我应该添加另一个动作或方法？你能建议什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T14:51:33.470

在我看来，使用 AJAX 而不是重新加载页面是最好的选择。您只是试图更新一些数据，没有理由执行整页刷新来做到这一点。我不是 RoR 爱好者，但似乎我们可以通过 -> 将数据发送到控制器

```
$.ajax({ 
  type: 'POST', 
  url: 'path/to/controller', 
  data: {'start_date' : $("input[name='report[start_date]']").val(), 
        'end_date' : $("input[name='report[end_date]']").val() }, 
  success: function(data){
    //data is whatever you RETURN from your controller. 
    //an array, string, object...something 
  } 
});` 
```

在您的 RoR 控制器中，您将通过执行...

```
var the_start = params[:start_date],
    the_end = params[:end_date] 
```

Now you've got the data in your controller, you can apply the method to it. Then when you're ready to send the data back, `return, print, whatever` you do to send data to the page.

Also, RoR by default (when accessing a controller) expects to output a template to the view, since we just want to update data, you'll need to stop that default action using something like ->

```
render :layout => false 
```

I hope this was helpful. I'm really not a RoR expert, but this is the method I used in the few times I dabbled.

Goodluck!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T14:54:19.040

Rails 3 now has helpers to do exactly what you want. These are known as remote forms and links.

[This blog post](http://www.alfajango.com/blog/rails-3-remote-links-and-forms/) does a great job of explaining what they do and how they work.

# sql - 加入 2 个表并获得巧合的总和

> ID：11830353
> 
> 赞同：1
> 
> 时间：2012-08-06T14:32:27.003
> 
> 标签：sql, group-by, inner-join

来自注册用户的表格：

*   id_user
*   id_location
*   姓名

来自位置的表格：

*   id_location
*   姓名

我需要知道每个位置有多少用户。像这样的东西：

*   华盛顿：455
*   佛罗里达州：185
*   德克萨斯州：914

它尝试了这种方法，但结果肯定有总和错误。

```
SELECT location.name,user.id_user FROM user
INNER JOIN location ON user.id_location = location.id_location
WHERE user.id_profile !=0 GROUP BY location.id_location ORDER BY location.name 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:35:33.733

```
SELECT location.id_location, location.name, COUNT(user.id_user) AS UserCount
FROM user 
INNER JOIN location ON user.id_location = location.id_location 
WHERE user.id_profile !=0 
GROUP BY location.id_location, location.name
ORDER BY location.name 
```

`id_location`如果您以某种方式具有相同的位置名称，但位置 ID 不同， 我已将其添加到查询中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T14:36:47.160

你真的很接近，你只需要做一个`COUNT`：

```
SELECT location.name, COUNT(user.id_user) UserCount 
FROM user
INNER JOIN location 
ON user.id_location = location.id_location
WHERE user.id_profile !=0 
GROUP BY location.name
ORDER BY location.name 
```

# html - Selenium HTML 打开标签

> ID：11830360
> 
> 赞同：1
> 
> 时间：2012-08-06T14:32:57.370
> 
> 标签：html, xpath, selenium, xhtml

也许答案是直截了当的，但有没有人确定，Selenium 与 XPath 是否能与非 XML 的 HTML 一起正常工作，即包含开放标签？在我的情况下，那些是`<col>`and `<input>`。

我问的原因是我们的自动化测试团队经常遇到这个问题，在某些情况下 Selenium XPath 选择器不起作用，而相同的 XPath 选择同一页面上的元素，例如，当我们在 FirePath 中使用它时。可能是因为我们的 HTML 不是有效的 XML 吗？据我所知，XPath 最初是为了处理 XML 数据而发明的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T14:34:51.217

XPath 在 DOM 上运行。浏览器生成一个 DOM。Selenium 与浏览器交互。

处理 HTML 不应该给它带来问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T14:36:43.603

Selenium 在 dom 中运行时应该没问题，所以 html 甚至损坏的 html 也应该没问题。我发现对自动化测试有用的是添加 id 或类供测试人员使用，这似乎可以提供更好更快的结果。

# c# - 如何在实体框架中仅引用具有多对多关系的 id？

> ID：11830363
> 
> 赞同：1
> 
> 时间：2012-08-06T14:33:10.703
> 
> 标签：c#, entity-framework

我有这个聚合根

```
CustomerGroup
int Id
string Name
Customer[] Customers 
```

和这个

```
Customer
int Id
string Name 
```

我的模型是使用 EF 4 构建的。我更喜欢的是（坚持聚合根的概念）

```
CustomerGroup
int Id
string Name
int[] Customers 
```

你会怎么做？

客户可能在许多组中（多对多关系），但我只需要一种方式的关系组-> 客户。我没有任何需要客户-> 组的用例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T08:45:25.547

`Customer`由于和之间存在多对多关联，`CustomerGroup`因此还有一个所谓的联结表，假设`CustomerGroupCustomer`具有`CustomerId`和`CustomerGroupId`。

如果此表只有这两个字段，EF 可以隐式使用它，这意味着`CustomerGroup`可以有一个`Customers`集合，在映射中您指示的`CustomerGroupCustomer`是联结表。[这](http://vincentlauzon.wordpress.com/2011/04/15/entity-framework-4-1-many-to-many-relationships-5/)是一个例子。你可以，但不是必须， map `Customer.CustomerGroups`。当工作数据库优先时，这种隐式行为是默认行为。

但是，由于您`CustomerId`只对 s 感兴趣，因此您可以决定建立一个常规的一对多关联`CustomerGroup.CustomerGroupCustomers`。如果您处理此导航属性，则只需要一个连接并且查询非常简单。如果你有一个`CustomerGroup`实例，你可以做

```
group.CustomerGroupCustomers.Select(c => c.CustomerId) 
```

并且只会`CustomerId`查询 s 。

如果你愿意，你可以`Customers`直接通过做

```
group.CustomerGroupCustomers.Select(c => c.Customer) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T15:11:19.050

如果您刚刚创建了一个这样做的新属性怎么办？如果您使用 edmx，则可以扩展部分，或者如果首先使用代码，则可以创建非映射。

```
public class CustomerGroup
{
    public int Id { get; set; }
    public string NAme { get; set; }
    public Customer[] Customers { get; set; }

    public int[] CustomerIds { get { return Customers.Select(c => c.Id).ToArray(); }
} 
```

# java - 如何清理 Maven 存储库（在 Amazon S3 上）？

> ID：11830369
> 
> 赞同：0
> 
> 时间：2012-08-06T14:33:17.600
> 
> 标签：java, maven, amazon-s3, artifacts

我们使用 Amazon S3 作为 Maven 存储库。随着时间的推移，回购的规模变得太大，主要是因为我们每天部署一些快照。有没有办法通过删除相同版本的太旧变体来“清理”存储库（`1.0-SNAPSHOT`例如）。或者，也许我们可以一开始就避开它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:53:51.050

S3 有一个工具可以通过它所谓的[生命周期配置](http://docs.amazonwebservices.com/AmazonS3/latest/dev/ObjectExpiration.html)自动使对象过期，但这非常有限 - 过期仅基于对象的年龄（例如删除任何超过 90 天的东西），你不能说“保留”之类的东西只有十个最近的快照”像[Nexus](http://www.sonatype.org/nexus)可以做到。如果您需要这种功能，您可能必须自己编写代码，作为快照部署过程的一部分。

# node.js - 找不到 AngularJS express 咖啡资产控制器

> ID：11830370
> 
> 赞同：4
> 
> 时间：2012-08-06T14:33:20.890
> 
> 标签：node.js, coffeescript, express, angularjs

在我基于[angular-express-blog](https://github.com/btford/angular-express-blog)和[express-coffee](https://github.com/twilson63/express-coffee)的AngularJS node.js[应用程序](https://github.com/zishe/angular-express-coffee)中，我在控制器[pic](http://clip2net.com/s/2bkYH)之前遇到了定义问题：`angular.module`

```
Uncaught ReferenceError: IndexCtrl is not defined 
```

包含模块的顺序与 angular-seed 中相同：

```
// JS
!= js('lib/jquery-1.7.2.min.js')
!= js('lib/bootstrap.min.js')
!= js('lib/angular.min.js')

!= js('app')
!= js('controllers')
!= js('directives')
!= js('filters')
!= js('services') 
```

更改顺序后：

```
!= js('controllers')
!= js('app')
!= js('directives')
!= js('filters')
!= js('services') 
```

错误一样。仅当我在定义之前将控制器替换为 app.coffee 时才有效`angular.module("myApp"...`。我当然重新启动了服务器。

更新：[应用文件](https://github.com/zishe/angular-express-coffee/blob/master/assets/js/app.coffee)、[控制器文件](https://github.com/zishe/angular-express-coffee/blob/master/assets/js/controllers.coffee)和[布局](https://github.com/zishe/angular-express-coffee/blob/master/views/layout.jade)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T14:40:37.190

在 Coffeescript 中，编译后的东西被包裹在一个闭包中：

```
//controllers.js:
(function() { function MyController($scope) {} })(); 
```

现在 index.html 找不到 MyController 变量，因为它在闭包中！

请改用`module.controller`语法。

```
angular.module('myApp').controller 'MyController', ($scope) -> 
```

这将导致您的控制器随处可见。

# c# - LINQ 和 ColumnAttribute

> ID：11830373
> 
> 赞同：1
> 
> 时间：2012-08-06T14:33:25.700
> 
> 标签：c#, asp.net, linq, columnattribute

谁能告诉我为什么 @_ 在这个对象的成员之前意味着什么，因为 6 小时后我没有任何智慧。非常感谢

```
[global::System.Data.Linq.Mapping.ColumnAttribute(Name="[_SessionID]", Storage="__SessionID", DbType="VarChar(100)")]
public string _SessionID
{
    get
    {
        return this.@__SessionID;
    }
    set
    {
        if ((this.@__SessionID != value))
        {
            this.On_SessionIDChanging(value);
            this.SendPropertyChanging();
            this.@__SessionID = value;
            this.SendPropertyChanged("_SessionID");
            this.On_SessionIDChanged();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T14:41:46.893

已经[回答](https://stackoverflow.com/a/254674/471214)：

> 这只是一种允许将保留关键字声明为 var 的方法。
> 
> `void Foo(int @string)`

没有什么特别的意思。

# java - LambdaJ：为什么我们不能在 select 子句中应用操作？

> ID：11830374
> 
> 赞同：0
> 
> 时间：2012-08-06T14:33:25.870
> 
> 标签：java, lambda, functional-programming, lambdaj

```
select(list, having(on(Integer.class).intValue() % 2, equalTo(0))); 
```

上面的代码抛出异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:40:14.773

该`%`操作必须在 select() 之前进行评估，而您希望对每个条目进行评估。即你想要的是 Java 8 中可用的闭包。

如果您使用循环，则可以编写

```
for(int i: list)
    if(i % 2 == 0)
       // do something with i. 
```

当理想情况下您应该有选择时，Java 的语法通常使使用循环成为最干净的解决方案（它也*快得多*）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T10:41:29.167

您需要定义自己的匹配器：

```
Matcher<Integer> even = new Predicate<Integer>() {         
 public boolean apply(Integer item) {                 
 return item % 2 == 0;         
} }; 
```

改编自：http://code.google.com/p/lambdaj/wiki/LambdajFeatures

# sql-server-2008 - 我们如何手动运行触发器？

> ID：11830378
> 
> 赞同：0
> 
> 时间：2012-08-06T14:33:40.563
> 
> 标签：sql-server-2008, sql-server-2008-r2

我正在使用 SQL Server 2008 R2。

我想知道当我将列`tablelA`从 0 更新为 1 时是否可以运行触发器？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:45:11.820

尝试这样的事情：

```
CREATE TABLE SomeTable 
(
   ID      INT          PRIMARY KEY,
   Col1    INT          NOT NULL,
   Col2    VARCHAR(100) NOT NULL
);

CREATE TRIGGER TR_SomeTable ON SomeTable 
AFTER UPDATE
AS
BEGIN
    IF UPDATE(Col1) 
    BEGIN
       UPDATE SomeTable SET Col2 = 'Col1 Changed'
       WHERE ID IN 
       (
            SELECT ID FROM INSERTED i INNER JOIN DELETED d on i.ID = d.ID
            WHERE d.Col1 = 0 AND i.Col1 = 1
       )
    END
END 
```

# python - python - 使文件可下载

> ID：11830382
> 
> 赞同：6
> 
> 时间：2012-08-06T14:33:52.120
> 
> 标签：python, django

当用户单击链接时，我想在我的项目目录中制作一个可下载的 PDF 文件，而不是在浏览器中打开。

我按照这个问题[Generating file to download with Django](https://stackoverflow.com/questions/908258/generating-file-to-download-with-django)

但我收到错误：

```
Exception Type: SyntaxError
Exception Value: can't assign to literal (views.py, line 119)
Exception Location: /usr/local/lib/python2.7/dist-packages/django/utils/importlib.py in import_module, line 35 
```

我创建了一个下载链接：

```
 <a href="/files/pdf/resume.pdf" target="_blank" class="btn btn-success btn-download" id="download" >Download PDF</a> 
```

网址.py：

```
url(r'^files/pdf/(?P<filename>\{w{40})/$', 'github.views.pdf_download'), 
```

视图.py：

```
def pdf_download(request, filename):
    path = os.expanduser('~/files/pdf/')
    f = open(path+filename, "r")
    response = HttpResponse(FileWrapper(f), content_type='application/pdf')
    response = ['Content-Disposition'] = 'attachment; filename=resume.pdf'
    f.close()
    return response 
```

错误行是：

```
response = ['Content-Disposition'] = 'attachment; filename=resume.pdf' 
```

我怎样才能使它可下载？

谢谢！

**更新**

它适用于 Firefox，但不适用于 Chrome v21.0。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T11:48:01.360

使用以下代码，它应该下载文件而不是在新页面中打开它

```
def pdf_download(request, filename):
  path = os.expanduser('~/files/pdf/')
  wrapper = FileWrapper(file(filename,'rb'))
  response = HttpResponse(wrapper, content_type=mimetypes.guess_type(filename)[0])
  response['Content-Length'] = os.path.getsize(filename)
  response['Content-Disposition'] = "attachment; filename=" + filename
  return response 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-06T14:35:11.220

您`=`在该行中有一个额外的内容，这使得语法无效。它应该是

```
response['Content-Disposition'] = 'attachment; filename=resume.pdf' 
```

（请注意，拥有两个`=`并不一定会使其无效：`foo = bar = 'hello'`完全有效，但在这种情况下，左侧和中间项都是名称。在您的版本中，中间项是文字，不能分配给它。 )

# c# - 如何在该类的属性上调用类方法

> ID：11830383
> 
> 赞同：1
> 
> 时间：2012-08-06T14:33:54.030
> 
> 标签：c#, class-design

我试图弄清楚如何在该类的属性上调用类方法。这是我的两门课：

```
public class MrBase
{
    public int? Id { get; set; }
    public String Description { get; set; }
    public int? DisplayOrder { get; set; }

    public String NullIfEmpty()
    {
        if (this.ToString().Trim().Equals(String.Empty))
            return null;
        return this.ToString().Trim();
    }
}

public class MrResult : MrBase
{
    public String Owner { get; set; }
    public String Status { get; set; }

    public MrResult() {}
} 
```

MrResult 继承自 MrBase。

现在，我希望能够在这些类的任何属性上调用 NullIfEmpty 方法......就像这样：

```
MrResult r = new MrResult();
r.Description = "";
r.Description.NullIfEmpty();
r.Owner = "Eric";
r.Owner.NullIfEmpty(); 
```

谢谢。

埃里克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T14:45:35.870

如果您希望此代码特定于您的模型，那么您可以将其构建到您的设置器中，并对您的方法稍作修改，`NullIfEmpty`例如

```
private String _owner;

public String Owner
{
    get { return _owner; }
    set { _owner = NullIfEmpty(value); } 
}

...
public String NullIfEmpty(string str) 
{
    return str == String.Empty ? null : str;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T14:38:07.850

您应该为 编写一个扩展方法`string`：

```
public static class StringExtensions
{
    public static string NullIfEmpty(this string theString)
    {
        if (string.IsNullOrEmpty(theString))
        {
            return null;
        }

        return theString;
    }
} 
```

用法：

```
string modifiedString = r.Description.NullIfEmpty(); 
```

如果您的主要目标是自动“修改”`string`类的每个属性，则可以使用反射来实现。这是一个基本示例：

```
private static void Main(string[] args)
{
    MrResult r = new MrResult
    {
        Owner = string.Empty,
        Description = string.Empty
    };

    foreach (var property in r.GetType().GetProperties())
    {
        if (property.PropertyType == typeof(string) && property.CanWrite)
        {
            string propertyValueAsString = (string)property.GetValue(r, null);
            property.SetValue(r, propertyValueAsString.NullIfEmpty(), null);
        }
    }

    Console.ReadKey();
} 
```

# javascript - Extjs 3.3 动态地将字段添加到表单并设置它们的标签宽度

> ID：11830384
> 
> 赞同：1
> 
> 时间：2012-08-06T14:33:55.747
> 
> 标签：javascript, extjs, extjs3

在表单上调用 doLayout 后，我​​需要设置 labelWidth 属性。

似乎在表单呈现后，对 do 布局的序列请求忽略了表单的 labelWidth 属性，并设置为 100px 默认值。

```
Nipendo.ProformaInvoice.View = Ext.extend(Ext.FormPanel,{
     constructor: function (config) {
        if (!config) {
            Nipendo.showError({ title: 'Error', message: 'A error occurred while loading the invoice view. A configuration element is missing.' });
            return;
        }

        if (!config.invoice) {
            Nipendo.showError({ title: 'Error', message: 'A error occurred while loading the invoice view. The invoice element is missing.' });
            return;
        }

    this.topToolbar = this.creatTopToolbar();

    this.invoice = config.invoice;

        var items = this.createDefaultLayout();

        config = Ext.apply({
            labelWidth: 140,
            bodyStyle: 'padding:2px 5px;',
            autoScroll: true,

            tbar: this.topToolbar,

            items: items
        }, config);

        Nipendo.ProformaInvoice.View.superclass.constructor.call(this, config);
    }, // eo constructor

    // private
    handelBackToDefaultView: function (switchToView) {
         if (this.currentViewName == 'sidebyside') {
             this.removeAll();

             this.currentViewName = switchToView;

             this.add(this.createDefaultLayout());

             this.doLayout();
         }

         this.currentViewName = switchToView;

     }, //eo handelBackToDefaultView
}) 
```

调用handelBackToDefaultView 后，所有标签都设置为100px。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T06:08:46.337

我自己发现了问题，

问题是我创建的新布局确实创建了一个新面板作为表单的第一项，该面板缺少 labelWidth 属性来固有所有内部字段。

# apache-flex - 在 Flex 登录时在浏览器中保存密码

> ID：11830389
> 
> 赞同：0
> 
> 时间：2012-08-06T14:34:02.220
> 
> 标签：apache-flex, browser, passwords

是否可以让浏览器识别 Flex 登录表单并建议“保存密码”？

如果没有，是否有一些优雅的解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T05:25:54.410

检查这个例子..它正在使用共享对象。（我使用过相同的并且工作正常）。

[使用记住密码登录](http://www.flexer.info/2008/05/09/using-shared-objects-login-process-with-remember-password/)

# android - 如何在windows平台上调试android中的原生代码

> ID：11830390
> 
> 赞同：-1
> 
> 时间：2012-08-06T14:34:04.163
> 
> 标签：android, c++, eclipse, native

我曾在 c++ 中使用过 Visual Studio，现在我已经用 C++ 编写代码并将其作为库附加到我必须在 Windows 平台上工作的 android 项目中。我编写了 C++ 代码并制作了它的 jar 文件并将 jar 文件附加到我的 android 应用程序中，我是处理本机代码的初学者。现在我想调试本机代码（jar 文件），我在网上搜索到找到有关如何在 android 上的 eclipse 中调试本机代码的教程，但所有链接都告诉它在 linux 平台上我必须在 windows 上做任何人都可以给我一个链接如何在 windows 平台上的 android 中调试本机代码，我是新手所有这一切，所以请给我一个初学者链接或准确地说出来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:50:14.480

Eclipse 中的调试与 Visual Studio 非常相似，因为您可以在代码中设置断点。[您可以首先在此处](http://developer.android.com/sdk/installing/installing-adt.html)找到的 Eclipse 软件中添加一个 Android 模拟器。

接下来您需要设置模拟器并下载相关固件，您可以在[此处获取所需的 SDK](http://developer.android.com/sdk/index.html)

最后，当您在代码中设置断点运行模拟器时，请确保您在调试模式下运行它，然后您可以通过以下方式加载调试页面 - Windows - Open Perspective - Debug

希望这会有所帮助，L&L 合作伙伴

# java - Java反射/泛型

> ID：11830395
> 
> 赞同：1
> 
> 时间：2012-08-06T14:34:33.217
> 
> 标签：java, generics, reflection

```
public static <T> T inCache(T obj) throws ClassNotFoundException {
        String[] token = validateCookie(); //gives me to strings
        if (token == null)
            return null;
        if (Cache.get(token[0]) != null) {
            if (Cache.get(token[0]).getClass() == Class.forName(token[1])
                    && obj.getClass() == Cache.get(token[0]).getClass()) {
                T test = (T) Cache.get(token[0]);
                return test;
            }
        }
        return null;
    } 
```

上面的代码是完全错误的。

基本上我想做这样的事情：

*   我想在我的函数中设置类。例如`inCache<User>();`
*   检查我从缓存中取出的对象是否与我之前指定的类相同。`(obj.getClass == User.class)`

*   如果类匹配，则将该对象强制转换为该类并返回它。`return (User)obj`

我想像这样使用它。

```
User user = inCache<User>(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T14:37:29.173

至于类签名，你为什么不使用这样的东西：

```
public static <T> T inCache(Class<T> clazz) throws ClassNotFoundException {
  ...
} 
```

然后这样称呼它：

```
User user = inCache(User.class); 
```

`User user = inCache<User>();`由于运行时的类型擦除，泛型不能按照您描述的方式使用 ( )，即`T`在这种情况下，运行时的类型是未知的。

另请注意，使用`Class#isAssignableFrom(...)`能够检查子类的测试可能会更好，例如`clazz.isAssignableFrom(Cache.get(token[0]).getClass())`. 这样，如果对象是子类型，您可以传递接口或超类，并且仍然获得匹配。

# php - 将 Moodledata 从 1.9 升级到 2.2

> ID：11830396
> 
> 赞同：1
> 
> 时间：2012-08-06T14:34:34.200
> 
> 标签：php, upgrade, moodle

我在 Moodle 1.9 中有一个自定义模块，我必须将其更新到 2.2。问题是 Moodledata 我有一些文件要存储在 moodledata 中，必须转换为 2.2，我不知道该怎么做。在 2.2 中，文件存储在数据库中，并带有一些参考。此外，我无法使用 files.php 访问文件。

任何人请逐步告诉我如何更改文件访问代码以及如何将moodledata升级到2.2。请帮忙。

我失去了一个多星期在互联网上寻找解决方案。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-04T13:04:21.057

当您从 Moodle 1.9 升级到 2.2 时，升级脚本将自动索引您的 moodledata 文件夹中的文件，并将对它们的引用存储在 Moodle db 中。作为此过程的一部分，您不必对文件进行任何手动处理。更新脚本将为您解决这个问题。该脚本将需要很长时间才能在大型 Moodle 网站上运行。

# qt - 使用 Qt 的程序的许可证

> ID：11830405
> 
> 赞同：1
> 
> 时间：2012-08-06T14:34:57.587
> 
> 标签：qt, licensing

许可问题对我来说很难。请告诉我使用 Qt 开源版本的程序必须有什么许可证？必须是 LGPLv2.1 还是我想要的任何 GPL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T14:38:34.723

我认为，如果您愿意，它可以是封闭式许可证，只要您不在封闭式许可证下分发 QT。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T14:44:21.417

Qt 有两种风格：

*   [LGPL 认证](http://qt.nokia.com/products/licensing/)
*   [商业的](http://qt.digia.com/)

您提到的两个许可证都很好用（包括静态和动态链接）。

使用 LGPL 的 Qt，您也可以使用专有许可证，但在这种情况下，您的软件应该仅限于使用动态链接。

# c# - 即时将 PDF 文件转换为 TIFF 文件

> ID：11830411
> 
> 赞同：-1
> 
> 时间：2012-08-06T14:35:30.390
> 
> 标签：c#, asp.net

是否有可能在 Asp.Net 中即时将 PDF 转换为 TIFF 并在 WebForm 上查看相同的内容。

如果是，是否有任何 3rd 方 DLL 或开源 DLL 来实现相同的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T14:37:10.297

有允许将**[PDF 转换为 TIFF](http://www.aspose.com/docs/display/pdfnet/Convert+Particular+PDF+page+to+TIFF+Image)**[的商业Aspose.Pdf 库](http://www.aspose.com/categories/.net-components/aspose.pdf-for-.net/default.aspx)。

我们在产品中经常使用这些产品，尽管我从未使用过 PDF 到 TIFF 的转换。因此，您最好尝试一下结果是否足以满足您的需求。

当然，如果这不是安全问题并且您的 PDF 是公开的，您可以很简单地使用免费的[Google 文档查看器](https://docs.google.com/viewer)在浏览器中呈现您的文档，而无需任何插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T14:47:07.940

[imageresizer.net](http://www.imageresizing.net)有一个 PDF 插件，可以转换为 TIFF、JPG、PNG 等。它也是开源的。

# java - 如何使用 JMS Appender？

> ID：11830415
> 
> 赞同：2
> 
> 时间：2012-08-06T14:35:36.897
> 
> 标签：java, log4j, jms

在我对 JMS Appenders 的研究中，我发现[了 turorial1](http://activemq.apache.org/how-do-i-use-log4j-jms-appender-with-activemq.html)和[tutorial2](http://code.google.com/p/log4j-jms-sample/wiki/ConfigurationGuide)。我试图关注他们，但我无法运行示例程序。

我首先创建了文件 log4j.properties

```
log4j.rootLogger=INFO, stdout, jms

#
log4j.logger.org.apache.activemq=INFO, stdout

log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%d %-5p %c - %m%n

#
log4j.appender.jms=org.apache.log4j.net.JMSAppender
log4j.appender.jms.InitialContextFactoryName=org.apache.activemq.jndi.ActiveMQInitialContextFactory
log4j.appender.jms.ProviderURL=tcp://localhost:61616
log4j.appender.jms.TopicBindingName=logTopic
log4j.appender.jms.TopicConnectionFactoryBindingName=ConnectionFactory 
```

和 jndi.properties

```
topic.logTopic=logTopic 
```

然后我将 Receiver.java 添加到我的项目中

```
public class Receiver implements MessageListener {

    public Receiver() throws Exception {
        ActiveMQConnectionFactory factory = new ActiveMQConnectionFactory("tcp://localhost:61616");
        Connection conn = factory.createConnection();
        Session sess = conn.createSession(false, Session.AUTO_ACKNOWLEDGE);
        conn.start();
        MessageConsumer consumer = sess.createConsumer(sess.createTopic("logTopic"));
        consumer.setMessageListener(this);
        Logger log = Logger.getLogger(Receiver.class);

        log.info("Test log");

        Thread.sleep(1000);
        consumer.close();
        sess.close();
        conn.close();
        System.exit(1);
    }

    public static void main(String[] args) throws Exception {
        new Receiver();
    }

    @Override
    public void onMessage(Message message) {
        try {
            // receive log event in your consumer
            LoggingEvent event = (LoggingEvent)((ActiveMQObjectMessage)message).getObject();
            System.out.println("Received log [" + event.getLevel() + "]: "+ event.getMessage());
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

我需要让 Receiver 从项目中收集所有日志，但我什至无法运行这个简单的示例。可能我不知道如何正确配置它，因为我得到了这个输出：

```
log4j:WARN No appenders could be found for logger (org.apache.activemq.transport.WireFormatNegotiator).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info. 
```

我是否错过了在类路径中添加一些代码行或一些文件？我是 log4j 的新手。

`AspectJ`编辑：我在课堂上设置了 Logger 。但我认为也在`Receiver`Logger 中创建并发送日志，所以可能应该在 中完成`Receiver`，而不是在我的项目中的其他类中。

```
static final Logger logger = Logger.getLogger(ReportingAspect.class);

@Before("setLoggingFile()")
public void setProperties() {
    PropertyConfigurator.configure("log4j.properties");
}

ProjectJMS
|
\_ src
|   \_ packages...
\_jndi.propeties
\_log4j.properties 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:48:31.463

要配置 log4j，请使用：-Dlog4j.configuration= 配置文件路径

conf 文件的路径可以是： À 位于 classpath 之外的路径中的文件，如果是这样，请使用 file:/// 对其进行前缀，例如：

*   -Dlog4j.configuration=file:/c:/foobar.lcf

在这种情况下，类路径中的其他内容：

*   -Dlog4j.configuration=foobar.lcf 其中 foobar.lcf 位于源文件夹的根目录

看：

*   [http://logging.apache.org/log4j/1.2/manual.html](http://logging.apache.org/log4j/1.2/manual.html)

对于 jms：

- 至少将 jms.jar 添加到类路径

*   确保您有一个正在运行的 JMS 代理（例如 activemq）

问候

菲利普

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T16:26:25.603

您需要将 log4j.properties 移动到 'src' 文件夹下，以便将其包含在类路径中，因为它不存在所以没有被加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T15:57:47.403

您是否验证`setProperties()`过在使用记录器之前调用了您的方法？

通常这种错误只会在初始化 log4j 时找不到配置文件 (log4j.properties) 时才会弹出`PropertyConfigurator`，或者您尝试在使用`PropertyConfigurator`.

首先，您应该确保`setProperties()`以您期望的方式调用它，如果这应该工作，您可以尝试验证是否可以加载配置。从我所看到的，我想应该找到你的配置文件。为了验证这一点，您可以分几个步骤加载配置以确保找到它：

```
 Properties props = new Properties();
  props.load( new FileInputStream( "log4j.properties" ) );
  PropertyConfigurator.configure( props ); 
```

如果找不到您的配置，您将收到一个`FileNotFoundException`.

# vb.net - 已发布的项目不能在所有计算机上运行？

> ID：11830419
> 
> 赞同：1
> 
> 时间：2012-08-06T14:35:56.597
> 
> 标签：vb.net

我有一个有效的 vb.net 项目，它通过控制台在我的主机上成功运行。我已经发布了它，将它安装在其他计算机上，并在这些计算机上成功运行它。我已经安装了 xampp，这也是 php 在幕后运行所必需的，而且一切运行正常。

然而，今天早上，我去另一台电脑上安装它，发生了一些奇怪的事情。窗口上的一个标签，重叠成一个文本字段。这听起来有些无害，但结果是用户无法使用文本字段，因此应用程序将无法运行。

基本上我的问题是，是否有某种方法可以限制格式，使其适用于所有计算机？（我觉得这很奇怪，因为有问题的计算机是 Windows 64 位操作系统，我安装的计算机和我当前使用的计算机也是如此）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-10-19T05:41:07.500

听起来 DPI 设置导致了您的问题。您可以通过将 DPI 设置更改回 100% 来验证这一点，重新启动计算机并查看是否有任何不同。有关如何更改 DPI 设置的信息，请参阅[此链接。](https://support.corel.com/hc/en-us/articles/115001485408-Display-Options-How-to-change-DPI-Scaling-Level-for-displays-in-Windows-10-)

我无法直接回答您如何解决您遇到的这个问题。但我将指导您如何解决它。

有关该问题的其他两个线程，请参见下面的链接：

*   [创建 DPI 感知应用程序](https://stackoverflow.com/questions/4075802/creating-a-dpi-aware-application)
*   [如何检测用户的字体（DPI）是否...](https://stackoverflow.com/questions/6082733/how-do-i-detect-if-the-users-font-dpi-is-set-to-small-large-or-something-el)

关于此事的更多信息：

1.  如果您自己以 100% DPI 编写了应用程序，则创建一个可以在其他计算机上正确扩展的应用程序将取决于您自己。如果您没有，那么您可能会遇到缩小或放大应用程序大小以适应其他 DPI 设置的问题。

2.  您希望应用程序根据用户设置进行扩展。您可以使用以下代码来执行此操作：

    ```
    Public Sub New()
        InitializeComponent()

        Me.AutoScaleMode = AutoScaleMode.Dpi
        Me.AutoSize = True
    End Sub 
    ```

    请记住，这将缩放当前表单，您必须对应用程序中的所有其他表单执行相同操作。有关这方面的更多信息，请参见要点链接 2。

3.  如果您在创建表单时使用了 Panel、TableLayoutPanel 等容器，您将有更好的时间使表单适合其他 DPI 设置。（我从应用程序扩展的个人经验中知道这一点。）

# php - 解析错误：语法错误，当我在 php 上使用 'class' 时出现意外的 '"'

> ID：11830420
> 
> 赞同：2
> 
> 时间：2012-08-06T14:36:00.700
> 
> 标签：php, class

```
class MailAuthGen{
    var $mail='test@mail.com';
    var $findUid = "SELECT uid from 'accounts' where email='$mail'";
    function abc() {
        echo $this->findUid;
    }
} 
```

当我加载此页面时，页面显示

> 解析错误：语法错误，意外的 '"'

甚至

```
$findUid = "SELECT uid from 'accounts' where email='".$mail."'"; 
```

没用。

但是，当我不使用“类”时，它执行得很好。

有什么问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-06T14:37:37.943

错误在于这一行。声明属性时不能评估任何变量。

```
var $findUid = "SELECT uid from 'accounts' where email='$mail'";
//                              You can't do this ------^ 
```

一个常见的解决方法是：

```
var $findUid = "SELECT uid from 'accounts' where email='%s'"; 
```

稍后您可以在其中插入值。

# html - 列表链接出现在页脚

> ID：11830421
> 
> 赞同：0
> 
> 时间：2012-08-06T14:36:03.450
> 
> 标签：html, css, hyperlink, html-lists, footer

我在顶部导航栏“image4”上有最后一个链接，它出现在所有页脚上。因此，无论何时我将鼠标悬停在页脚上，最后`<li>`一项的超链接都会触发。

出于某种原因，它看起来像 image4 链接一直到页脚。如果我删除 image4`<li>`项目，那么 image3 就是可以从页脚中的任何位置触发的新链接。

我该如何解决这个问题？

我的代码如下：

HTML：

```
</head>

<body>
    <div id="wrapper">

        <div id="nav">  
            <ul>
                <li><a href="http://www.com/" target="blank" class="image1"><img alt="#" src="image1.png" /></li>
                <li><a href="http://www.com/" target="blank" class="image2"><img alt="#" src="image2.png" /></li>
                <li><a href="http://www.com/" target="blank" class="image3"><img alt="#" src="image3.png" /></li>
                <li><a href="http://www.com/" target="blank" class="image4"><img alt="#" src="image4.png" /></li>
            </ul>
        </div><!-- end of the nav -->

        <div id="content">
            <img alt="#" class="image5" src="image5.png" />
            <img alt="#" class="image6" src="image6.png" />
        </div><!-- end of the content -->

    </div><!-- end of the wrapper -->
</body>

<footer>
    <img class="logo" alt="#" src="logo.png" />
    <p>© 2012<?php echo date('Y'); ?> logo studio. All rights reserved.</p>
</footer>

</html> 
```

CSS：

```
*{
    margin: 0px;
    padding: 0px;
}

body {
    margin: 0px;
    background: url('images/bg.png') repeat-x;
    background-color: #ffffeb;
}

#nav {
    float: left;
    width: 1024px;
    height: 732px;
    display: block;
    margin: 5px 0 0 200px;
}

ul {
    list-style: none;
    width: 420px;
    margin: 0 auto;
}

li {
    float: left;
}

.image5 {
    position: absolute;
    top: 0px;
    left: 200px;
    z-index: -1;
}

.image6 {
    position: absolute;
    top: 375px;
    left: 200px;
    z-index: -1;
}

footer {
    height: 30px;
    position: relative;
    top: 715px;
}

.logo {
    position: absolute;
    left: 230px;
    top: 0px;
}

p {
    font-family: helvetica, arial, sans serif;
    font-size: 12px;
    color: #aaaaaa;
    text-decoration: none;
    position: absolute;
    left: 940px;
    top: 0px;
    padding: 5px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T14:44:28.187

页脚标签（以及几乎所有其他标签）应该放在正文标签内。

```
<html>
<head>
<!--allows: meta, title, script and style -->
</head>
<body>
<!--allows every other tag, including script, style, li, ul, ol, b, i, u, hr, h1-h5, table,     etc...... -->
</body>
</html> 
```

除此之外，我没有看到您的 image4 图形应该出现在页脚 =S 中的原因

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T14:49:32.297

您忘记了结束标记中的“/” `<a>`。结束标签应该看起来像`</a>`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T14:54:53.387

```
 <head>
        </head>

        <body>
            <div id="wrapper">

                <div id="nav">  
                    <ul>
                        <li><a href="http://www.com/" target="blank" class="image1"><img alt="#" src="image1.png" /> </a></li>
                        <li><a href="http://www.com/" target="blank" class="image2"><img alt="#" src="image2.png" /></a></li>
                        <li><a href="http://www.com/" target="blank" class="image3"><img alt="#" src="image3.png" /></a></li>
                        <li><a href="http://www.com/" target="blank" class="image4"><img alt="#" src="image4.png" /></a></li>
                    </ul>
                </div><!-- end of the nav -->

                <div id="content">
                    <img alt="#" class="image5" src="image5.png" />
                    <img alt="#" class="image6" src="image6.png" />
                </div><!-- end of the content -->

           <footer>
            <img class="logo" alt="#" src="logo.png" />
            <p>© 2012<?php echo date('Y'); ?> logo studio. All rights reserved.</p>
           </footer>

            </div><!-- end of the wrapper -->

        </body>

        </html>​ 
```

# java - 检查远程文件是否存在 Linux

> ID：11830424
> 
> 赞同：1
> 
> 时间：2012-08-06T14:36:11.467
> 
> 标签：java, linux, ssh

我有以下脚本用于检查远程 Linux 机器中是否存在文件。虽然它在控制台上直接调用时有效，但当通过 Runtime->exec() 在 Java 中调用此脚本时，它确实让我提示询问密码

```
`ssh $HOSTNAME test -f $FILENAME`       
    result=$?
    result=0;
    if [ $result != "0" ]; then
        echo "$FILENAME is not found"
        exit 31;
    fi 
```

我还使用了将用户名添加为的脚本

```
`ssh root@HOSTNAME test -f $FILENAME 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T14:52:12.610

您需要重新检查您的 ssh 密钥以及您正在运行的 Java 用户。如果密钥不匹配，则会提示您输入用户/密码。

# php - PHP/Coldfusion 图像大小调整

> ID：11830425
> 
> 赞同：0
> 
> 时间：2012-08-06T14:36:20.643
> 
> 标签：php, coldfusion, coldfusion-8

是否可以将 php 图像调整大小代码添加到我的coldfusion 页面？当通过 php 而不是coldfusion调整大小时，图像看起来明显更清晰（即使我使用coldfusion的imageResize“最高质量”选项）。

```
<cfftp action="PUTFILE"
                       server="#ATTRIBUTES.FtpServer#" 
                       username="#ATTRIBUTES.FtpUsername#"
                       password="#ATTRIBUTES.FtpPassword#"
                       stoponerror="No"
                       localfile="#ATTRIBUTES.LOCALIMAGEFILE#"
                       remotefile="#Filename_Temp#"
                       transfermode="BINARY"
                       connection="DOCMGR"
                       retrycount="1"
                       timeout="60" 
                       passive="Yes">
<!-- Add php resize image code here --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:20:44.113

如果您可以在同一台服务器上运行 PHP 和 ColdFusion，请使用 CF 上传并将文件存储在一个公共位置。Cfhttp 获取一个单独的 PHP 页面，根据您的要求调整图像大小。然后调用者 CF 页面将对图像执行所需的操作。

如果您无法在同一台服务器上获取 PHP 和 CF，则始终可以 cfhttp 将图像 POST 到另一台服务器。确保您使用多部分表单发布，否则您将丢失图像数据 >~ 1mb。

如果您将文件从 CF 传输到另一台服务器，您可以将图像 http 发布到 PHP，PHP 可以调整大小，然后为您 ftp 新图像，而无需先将其发送回 CF。

另一种选择是直接使用命令行调用 imagemagick，即。cf执行。您将获得更好的性能直接调用 imagemagick，而不是让 php 传递请求。当然，除非您想使用 php 以编程方式更改图像。不过，您应该能够通过精心设计的命令行调用获得相同的结果。

# perl - CPAN.pm 需要很长时间才能安装模块

> ID：11830426
> 
> 赞同：5
> 
> 时间：2012-08-06T14:36:26.290
> 
> 标签：perl, cpan

```
cpan[1]> 安装 Crypt::SSLeay
阅读'/root/.cpan/sources/authors/01mailrc.txt.gz'
..................................................... ..........................完毕
阅读'/root/.cpan/sources/modules/02packages.details.txt.gz'

数据库于 2012 年 8 月 6 日星期一 09:19:03 GMT 生成
..................................................... ..........................完毕

阅读'/root/.cpan/sources/modules/03modlist.data.gz'

..................................................... .....................

为模块“Crypt::SSLeay”运行安装
为 N/NA/NANIS/Crypt-SSLeay-0.64.tar.gz 运行 make
使用 LWP 获取：
http://mirror.cogentco.com/pub/CPAN/authors/id/N/NA/NANIS/Crypt-SSLeay-0.64.tar.gz

使用 LWP 获取：
http://mirror.cogentco.com/pub/CPAN/authors/id/N/NA/NANIS/CHECKSUMS

```

在这两个步骤中，CPAN.pm 大约需要 15 分钟。我添加了更多的 URL 到`urllist`. 他们中的大多数使用 HTTP。

为什么这需要这么长时间，我怎样才能让它更快？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T19:14:26.747

如果您使用 CPAN 做很多事情，请配置并使用本地[MiniCPAN](https://www.metacpan.org/module/CPAN::Mini)。让它在您不注意时自动更新，然后在您准备好时快速安装。第一次设置它需要很长时间，但这是一个你不必关心的永远，因为你不必观看它。

[daxim 推荐 sqlite 和 cpanm](https://stackoverflow.com/a/11832242/8817)，您可以使用它们，但如果您的网络速度较慢，您仍然必须将网络与其中任何一个一起使用。

您在该输出片段中看到的是您的 CPAN 客户端下载了几个巨大的文本文件，这些文件是 CPAN 上当前内容的索引。包文件有超过 125,000 行，但压缩后只有大约 1.5Mb。但是，该文件每小时更新一次，CPAN.pm 总是需要最新的。它是系统上最大的设计缺陷之一，但这就是您使用有史以来最古老、使用时间最长的 CPAN 客户端所获得的。

[cpanm](http://cpanmin.us/)通过不关注索引文件来解决这个问题。它直接进入 CPAN 搜索站点以找出最新版本，然后使用它。这可能对你更有效。

你说你添加了更多的 URL。这是 CPAN 客户端的另一个问题。一旦它找到一个返回良好状态的 URL，它就会随之而来，即使您在尼日尔中部选择了具有 56k 调制解调器上行链路的东西，通过一个滞后的卫星，操作员正在手动输入 1 和 0 .

在我最新版本[的 cpan 命令行工具](https://www.metacpan.org/module/App::Cpan)中，它带有 CPAN.pm（但通常有点落后，这是我的错），我添加了一个镜像 ping 功能，它将根据 ping 为您找到最好的镜像次。不过，这只是检查延迟，吞吐量仍然是一个问题。

所有这些都是我使用[MiniCPAN](https://www.metacpan.org/module/CPAN::Mini)的原因。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-06T16:27:17.997

要使 CPAN 索引工作得更快，请安装 CPAN::SQLite 并[配置](http://p3rl.org/CPAN#Config-Variables) `use_sqlite`为`1`.

或者，安装 App-cpanminus 并运行[`cpanm`](http://p3rl.org/cpanm)不需要本地索引的客户端。

# javascript - 列出由 javascript 按字母顺序排列的带有字母标题的列表

> ID：11830432
> 
> 赞同：3
> 
> 时间：2012-08-06T14:36:54.510
> 
> 标签：javascript, list, sql-order-by, alphabetical

我有一个这样的列表：

```
<ul id="list">
    <li><a href="/">Adam</a></li>
    <li><a href="/">Alex</a></li>
    ...
    <li><a href="/">Zara</a></li>            
</ul> 
```

它已经按此 JavaScript 的字母顺序排列：

```
var mylist = $('#list');
var listitems = mylist.children('li').get();
listitems.sort(function(a, b) {
    return $(a).text().toUpperCase().localeCompare($(b).text().toUpperCase());
})
$.each(listitems, function(idx, itm) { mylist.append(itm); }); 
```

现在我需要像这样设置列表：

```
<ul id="list">
    <li id="a"><a name="a" class="title">A</a>
        <ul>
            <li><a href="/">Adam</a></li>
            <li><a href="/">Alex</a></li>
        </ul>
    </li>
    <li id="b"><a name="b" class="title">B</a>
        <ul>
            <li><a href="/">Barry</a></li>
            <li><a href="/">Becky</a></li>
        </ul>
    </li>
    ...
    ...
    ...
    <li id="z"><a name="z" class="title">z</a>
        <ul>
            <li><a href="/">zavv</a></li>
            <li><a href="/">zora</a></li>
        </ul>
    </li>
</ul> 
```

使用此[Apple Style Slider](http://devgrow.com/slidernav/)中的列表。

你知道我怎么能用 JavaScript 做到这一点吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T15:49:50.690

`li`首先收集对象中的所有元素（按其内容的首字母分类）然后分别对这些列表进行排序是最简单的（我猜） 。由于代码说了一千多个单词，所以我会这样做：

```
var list = { letters: [] };    //object to collect the li elements and a list of initial letters
$("#list").children("li").each(function(){
    var itmLetter = $(this).text().substring(0,1).toUpperCase();
    if (!(itmLetter in list)) {
        list[itmLetter] = [];
        list.letters.push(itmLetter);
    }
    list[itmLetter].push($(this));    //add li element to the letter's array in the list object
});

list.letters.sort();    //sort all available letters to iterate over them
$.each(list.letters, function(i, letter){
    list[letter].sort(function(a, b) {
        return $(a).text().toUpperCase().localeCompare($(b).text().toUpperCase());    //sort li elements of one letter
    });
    var ul = $("<ul/>");    //create new dom element and add li elements
    $.each(list[letter], function(idx, itm){
        ul.append(itm);
    });
    $("#list").append($("<li/>").append($("<a/>").attr("name", letter.toLowerCase()).addClass("title").html(letter)).append(ul));    //add the list to a new li and to #list ul
}); 
```

JSFiddle：http: [//jsfiddle.net/KnC6M/](http://jsfiddle.net/KnC6M/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-17T19:49:56.077

感谢@Aletheios，我更新了您的解决方案，使其更有效的解决方案使用`css`不删除列表`$("#list").empty();`

**假设您的列表已经排序。**

```
var letters = [];

$("#list").children("li").each(function(i){
    var itmLetter = $(this).text().trim().substring(0,1).toUpperCase();
    if (letters.indexOf(itmLetter)<0) {
        console.log(`${itmLetter} is not in ${letters} and index is ${i}`);
        $(`#list li:nth-child(${i+1})`).addClass("AddContent").attr('data-content',itmLetter);
        letters.push(itmLetter);
    } else {
        console.log(`${itmLetter} is in ${letters}`);
    }
}); 
```

CSS：

```
#list{
  margin-left: 15px;
}

li.AddContent:before {
   content: attr(data-content);
   margin-left: -15px;
   display: block;
} 
```

HTML：

```
 <ul id="list">
      <li><a href="/">    Zara</a></li>
      <li><a href="/">    Adam</a></li>
      <li><a href="/">   Alex</a></li>            
      <li><a href="/">   Toby</a></li>
  </ul> 
```

JSfiddle：http: [//jsfiddle.net/KnC6M/105/](http://jsfiddle.net/KnC6M/105/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-12T11:55:48.153

我正在寻找类似的东西，我想以字母顺序分组的方式对数组进行排序。这是我的代码，它是@Aletheios 代码的小修改版本。希望能帮助到你。

```
var list = { letters: [] };
var words = {let: ['abc', 'aabbgg', 'cda', 'hello', 'bca']};

$.each(words.let, function(){                
    var itLetter = this.substring(0,1).toUpperCase();
    if(!(itLetter in list)){
        list[itLetter] = [];                    
        list.letters.push(itLetter);
    }
    list[itLetter].push($(this));
});

list.letters.sort();
$.each(list.letters, function(i, letter){

    var ul = $("<ul/>");
    var li = $('<li/>');
    $.each(list[letter], function(idx, itm){
        ul.append('<li>'+ itm[0] +'</li>');
        console.log(itm);

    });
    $("body").append($("<li/>").append($("<a/>").attr("name", letter.toLowerCase()).addClass("title").html(letter)).append(ul));
}); 
```

这是小提琴。 [http://jsfiddle.net/checkomkar/x8taqcnk/](http://jsfiddle.net/checkomkar/x8taqcnk/)

# html - 溢出：在 Chrome、IE 中自动添加滚动条

> ID：11830433
> 
> 赞同：2
> 
> 时间：2012-08-06T14:37:01.267
> 
> 标签：html, css

我曾经添加 a`<div style='clear:both'></div>`来清除之前段中的浮点数，但有人建议我应该`overflow:auto`在`<div>`with floats 上使用它，因为它更简单、更干净。

问题是，我收到报告说我的网站上有一些奇怪的“阴影”。经过调查，事实证明它发生在 Chrome 中，而不是 Firefox 中，并且那些“阴影”实际上是非常小的滚动条。

我试图在这个 jsfiddle [http://jsfiddle.net/57HM3/4/](http://jsfiddle.net/57HM3/4/)中将部件减少到最低限度。请注意，它们在最右边（在显示“结果”的位置）。它似乎与行高有关，如果我将其设置为 1.2 而不是 1.1，它就会消失。这是某种已知问题（我不知道）吗？

我知道还有其他方法可以清除它们，但它们涉及 IE 特定的代码，而不是什么。我想保持原样，只是将带有浮动的 div 设置为 overflow:auto （如果这不起作用，我宁愿回去添加额外的`<div>`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T14:40:37.957

添加`overflow:hidden`而不是。这将清除您的两者并且不会添加任何滚动

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T14:51:04.187

不要胡思乱想溢出。我会推荐一个“clearfix”解决方案。这是我使用的，我把它放在每个项目开始时所有样式表的顶部：

```
/* CLEAR-FIX */
.clearfix:after { 
    visibility: hidden; display: block; font-size: 0; 
    content: " "; clear: both; height: 0; 
}
*:first-child+html .clearfix { zoom: 1; } /* IE7 */ 
```

...很久以前从博客上得到的，我不记得在哪里。

任何需要与浮动一起增长的容器只需要添加“clearfix”类：

```
<div class="test" class="clearfix">
    <div style="float:left">Hello</div>
    <div style="float:left">World</div>
</div> 
```

顺便说一句，如果您想知道*为什么*CSS 会导致浮动通常不计为父级高度的一部分，请参阅：[为什么浮动元素的非浮动父级会崩溃？](https://stackoverflow.com/questions/7667581/why-do-non-floating-parents-of-floating-elements-collapse)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T14:53:14.003

如果要保留`overflow:auto`容器的规则`div`，可以尝试`line-height`从类中删除规则`.test`。

# objective-c - 如何将 .a C 静态库添加到 Xcode 并在那里使用它？

> ID：11830434
> 
> 赞同：4
> 
> 时间：2012-08-06T14:37:02.777
> 
> 标签：objective-c, c, xcode, static-libraries

我有一个用 arm7-gcc 编译的静态 C 库，我想在我的 iOS 项目中使用它。我将它添加到项目中，但我不知道如何使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T09:33:07.323

在将库添加到项目并在应用程序代码中包含标头之后，还有第二步。这一步是让 Xcode 项目知道头文件/文件在哪里。为此，您可以使用头文件的路径编辑“用户头文件搜索路径”构建设置。

# android - 如何与 viewpager 共享图像意图？

> ID：11830435
> 
> 赞同：1
> 
> 时间：2012-08-06T14:37:02.603
> 
> 标签：android, android-viewpager

我需要开发一个应用程序，`share image`当`ImageView in ViewPager`用户`press on Share Button`.

**我的问题：**

*   当我缓存下一个不是当前的`press on Share Button`.`ImageView``Image`

    ```
    公共类 MainActivity 扩展 Activity {
        私人 ViewPager 寻呼机；
           私有 ImageView Imgv；

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        pager = (ViewPager) findViewById(R.id.pager);
        final Integer[] imageUrls={
            R.drawable.img1 , R.drawable.img2 , R.drawable.img3 , R.drawable.img4
        };
        pager.setAdapter(new MyAdapter(imageUrls));

        Button share = (Button) findViewById(R.id.share);
        share.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                Imgv.setDrawingCacheEnabled(true);
                Bitmap icon = Imgv.getDrawingCache();
                ByteArrayOutputStream bytes = new ByteArrayOutputStream();
                icon.compress(Bitmap.CompressFormat.JPEG, 100, bytes);
                File file = new File(Environment.getExternalStorageDirectory() + File.separator + "temporary_file.jpg");
                try {
                    file.createNewFile();
                    FileOutputStream  fo = new FileOutputStream(file);
                    fo.write(bytes.toByteArray());
                } catch (IOException e) {                       
                        e.printStackTrace();
                }

                Intent shareIntent = new Intent(android.content.Intent.ACTION_SEND);
                shareIntent.setType("image/jpeg");
                Uri uri = Uri.parse("file:///sdcard/temporary_file.jpg");
                shareIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET);
                shareIntent.putExtra(Intent.EXTRA_STREAM,uri);
                startActivity(shareIntent);
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
    private class MyAdapter extends PagerAdapter {

        private LayoutInflater inflater;
        private Integer[] fimg;

        public MyAdapter(Integer[] fimg ) {
            this.fimg=fimg;

            inflater = getLayoutInflater();

        }

        @Override
        public Object instantiateItem(View collection,  int position  ) {

            final View imageLayout = inflater.inflate(R.layout.imgview, null);

           Imgv =  (ImageView)imageLayout.findViewById(R.id.full_image_view); 

            Imgv.setBackgroundResource(fimg[position]);

             ((ViewPager) collection).addView(imageLayout ,0);

               return imageLayout;  

           }  

        @Override
        public int getItemPosition(Object object) {
            // TODO Auto-generated method stub
            return super.getItemPosition(object);
        }

        @Override
        public int getCount() {
            return fimg.length;
        }
        @Override
        public void destroyItem(View container, int position, Object object) {
            ((ViewPager) container).removeView((View) object);
        } 
        @Override
        public boolean isViewFromObject(View view, Object object) {
            // TODO Auto-generated method stub
            return view==((View)object);
        }

          @Override  
          public void restoreState(Parcelable arg0, ClassLoader loader) {}  

          @Override  
          public Parcelable saveState() {  
              return null;  
          }  
          @Override
            public void startUpdate(View container) {
            }
          @Override
            public void finishUpdate(View container) {

            } 
    ```

    }

    }

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T13:08:39.193

这是因为您认为 Imgv 是 ViewPager 中当前可见页面的 ImageView。但它不是。在您的情况下， Imgv 是来自最后一个膨胀页面的 ImageView，但不是当前可见页面。

我建议你给 ImageView 添加标签：

```
Imgv.setBackgroundResource(fimg[position]);
Imgv.setTag(position);  // add this line 
```

然后你可以通过标签找到你的 ImageView：

```
ImageView Imgv = (ImageView)pager.findViewWithTag(pager.getCurrentItem());
Imgv.setDrawingCacheEnabled(true);
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T00:32:23.900

为了避免使用有时可能意味着缩小图像的绘图缓存，我会检查[ViewPager onPageChange 侦听器](http://developer.android.com/reference/android/support/v4/view/ViewPager.html#setOnPageChangeListener%28android.support.v4.view.ViewPager.OnPageChangeListener%29)的 onPageSelected() 事件。

保存当前索引，并从您的原始资产创建要保存的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T08:30:53.470

获取图像的最简单和最好的方法是使用[http://developer.android.com/reference/android/support/v4/view/ViewPager.html#getCurrentItem()](http://developer.android.com/reference/android/support/v4/view/ViewPager.html#getCurrentItem())

这将为您提供当前页面的索引，该索引只不过是具有当前图像的 imageUrls 的索引。

因此，使用 BitmapFactory 从 imageUrls 获取您的位图。

BitmapFactory.decodeResource(getResources(), imageUrls[pager.getCurrentItem()]);

# javascript - getJSON 和 servlet 通信错误

> ID：11830441
> 
> 赞同：1
> 
> 时间：2012-08-06T14:37:22.947
> 
> 标签：javascript, servlets

我让tomcat在端口8080和简单的servlet上运行：

```
import java.io.*;
import java.text.*;
import java.util.*;
import javax.servlet.*;
import javax.servlet.http.*;
import java.awt.*;

public class MyHelloWorld extends HttpServlet {

    public void doGet(HttpServletRequest request, 
            HttpServletResponse response)
    throws IOException, ServletException
    {
        String data = "Hello World from servlet!";
        response.setContentType("text/plain");
        response.setCharacterEncoding("UTF-8");
        response.getWriter().write(data);
    }
} 
```

wget 访问此 serverlet 的 URL，检索字符串：

```
"Hello World from servlet!" 
```

Web浏览器也打印它，所以它可以工作，并且tomcat的访问日志显示响应'200'

但是当我试图通过我的javascript获取这个字符串时：

```
<html>

<head>
<script src="http://code.jquery.com/jquery-latest.min.js"></script>
<script>

            $.getJSON({ 
    type: "GET", url: "http://localhost:8080/examples/MyHelloWorld", 
    contentType: "text/plain", 
    error: function(xhr, ajaxOptions, thrownError){ 
                alert(ajaxOptions);
                alert(xhr.status); 
                alert(thrownError);
            }, 
    processData: true, 
    success: function(data, textStatus, jqXHR){ alert(data); }
});
</script>

</script>

</head> 
```

在 tomcat 的日志中，我可以看到响应 200，但浏览器没有显示任何内容 - 只是没有内容的空白页面。如果我更改`getJSON`为`get`或`ajax`收到以下警报：

```
xhr.status = 0
ajaxOptions = "error"
thrownError = empty 
```

Web 服务器是 apache，它在端口 80 上运行

感谢所有帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T14:58:06.107

尝试这样的事情：

```
public void doGet(HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException {
    String data = "Hello World from servlet!";
    response.setContentType("text/plain");
    response.setCharacterEncoding("UTF-8");

    if (request.getContentType().equals("application/json")) {
        data = "\"" + data + "\"";
    }

    response.getWriter().write(data);
} 
```

在你的 js 中：

```
$.getJSON("http://localhost:8080/examples/MyHelloWorld", function(data) {
   alert(data)
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T14:43:40.343

输出：

```
"Hello World from servlet!" 
```

那是一个字符串，而不是[JSON](http://www.json.org/)对象，通过[jsonlint.com](http://jsonlint.com)运行它。您的输出应类似于：

```
{ "data" : "Hello World from servlet!" } 
```

设置了正确的内容类型“application/json”。

如果您只想获取纯文本字符串，请使用[$.get()](http://api.jquery.com/jQuery.get/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T14:48:31.460

写是这样的，

```
 String data = "{\"message\":\"Hello World from servlet!\"}"; 
```

而在 JS 上，

```
alert(data.message); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T15:17:13.177

另外，我在 chrome 下的 java 脚本控制台说：

```
GET http://10.10.1.19/[object%20Object] 404 (Not Found) jquery-latest.min.js:4
f.support.ajax.f.ajaxTransport.send jquery-latest.min.js:4
f.extend.ajax jquery-latest.min.js:4
f.each.f.(anonymous function) jquery-latest.min.js:4
f.extend.getJSON jquery-latest.min.js:4
(anonymous function) 
```

# perl - 如何从脚本中提取所有全局变量并在 Perl 中获取每种数据类型？

> ID：11830443
> 
> 赞同：1
> 
> 时间：2012-08-06T14:37:27.487
> 
> 标签：perl, variables, reflection, reference

我喜欢使用 Perl 从外部 Perl 脚本中捕获所有全局变量。目前我在类型检测周围徘徊。

如何确定正确的数据类型（''、'SCALAR'、'HASH'、'ARRAY'、'CODE'）？

解析器脚本：

```
my %allVariables = ();
{
     do "scriptToBeParsed.pl";
     foreach my $sym ( keys %main:: ) {
         # Get all normal variables and scalar/hash/array references:
        if ( ref( *{"$sym"} ) =~ m/^(?:|SCALAR|HASH|ARRAY)$/ ) {
            $allVariables{"$sym"} = *{"$sym"};
        }
    }
} 
```

要解析的脚本：

```
$someVariable1 = 'Yes, I like to be captured';
$otherVariable2 = \'And I also want to be captured';
%anotherVariable3 = ( 'Capture' => 'me' );
@lameVariable4 = ( 'Capture', 'me' );
$fooVariable5 = { 'Capture' => 'me' };
$barVariable6 = [ 'Capture', 'me' ];
$subVariable7 = sub { return "Don't capture me!" };
sub dontCaptureMe { return "Don't capture me!" } 
```

在我的示例`ref( *{"$sym"} )`中，总是返回“GLOB”（当然）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T15:05:30.080

另一种方法是使用 typeglob 的类似 has 的访问，这在 brian d foy 的*Mastering Perl*第 131f 页的第 8 章中进行了解释。

```
package test;
no strict;
no warnings; 

$someVariable1 = 'Yes, I like to be captured';
$otherVariable2 = \'And I also want to be captured';
%anotherVariable3 = ( 'Capture' => 'me' );
@lameVariable4 = ( 'Capture', 'me' );
$fooVariable5 = { 'Capture' => 'me' };
$barVariable6 = [ 'Capture', 'me' ];
$subVariable7 = sub { return "Don't capture me!" };
sub dontCaptureMe { return "Don't capture me!" }

say $dontCaptureMe;
my %allVariables = ();
{
  do "scriptToBecomeParsed.pl";
  foreach my $sym ( keys %test:: ) {
    for (qw( SCALAR HASH ARRAY CODE IO)) {
      if (*{"$sym"}{$_}) {
        $allVariables{$_}->{"$sym"} = *{"$sym"}{$_};
      }
    }
  }
}

print Data::Dumper::Dumper \%allVariables; 
```

这将产生以下输出：

```
$VAR1 = {
          'CODE' => {
                      'dontCaptureMe' => sub { "DUMMY" }
                    },
          'ARRAY' => {
                       'lameVariable4' => [
                                            'Capture',
                                            'me'
                                          ]
                     },
          'HASH' => {
                      'anotherVariable3' => {
                                              'Capture' => 'me'
                                            }
                    },
          'SCALAR' => {
                        'someVariable1' => \'Yes, I like to be captured',
                        '__ANON__' => \undef,
                        'subVariable7' => \sub { "DUMMY" },
                        'dontCaptureMe' => \undef,
                        'otherVariable2' => \\'And I also want to be captured',
                        'BEGIN' => \undef,
                        'barVariable6' => \[
                                              'Capture',
                                              'me'
                                            ],
                        'anotherVariable3' => \undef,
                        'lameVariable4' => \undef,
                        'fooVariable5' => \{
                                              'Capture' => 'me'
                                            }
                      }
        }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T14:48:37.737

就像你所说

> ref( *{"$sym"} ) 总是返回 'GLOB' （当然）。

因为 perl 将符号表中的所有内容都存储在一个 glob 中，所以无法分辨某物是哪种数据类型。这是因为在 perl 中，具有相同名称的数组、标量、散列或任何其他内容是完全有效的……因此，perl 将所有内容存储在 glob 中以避免冲突。您可以做的是遍历符号表中的所有符号，并针对所有可能的事物（集合不太大）测试每个 glob，然后查看设置了哪些符号。

或者，一种更实用的方法可能是将 perl 脚本作为文本加载并解析`$`, `%`, `@`, `sub`, `open`(filehandle) 以查看所有内容的类型。

# c# - 为什么在将用户控件添加到设计器时，Visual Studio 会将命名空间附加到用户控件的名称中？

> ID：11830449
> 
> 赞同：2
> 
> 时间：2012-08-06T14:37:41.810
> 
> 标签：c#, winforms, visual-studio-2010, namespaces

我有一个名为的用户控件`Editor`，它是`StackCustomWindow`命名空间的一部分。命名空间包含程序的`StackCustomWindow`主要形式。当我`Editor`使用设计器将用户控件添加到主窗口时，Visual Studio 2010 在设计器中放置如下代码：

```
this.editor1 = new StackCustomWindow.Editor(); 
```

什么时候应该是这样的：

```
this.editor1 = new Editor(); 
```

编译抛出异常：

> 错误 1 ​​类型中不存在类型名称“Editor”
> 
> 'StackCustomWindow.StackCustomWindow' C:\Users\ricardo\Documents\Visual Studio
> 
> 2010\Projects\StackCustomWindow\StackCustomWindow\StackCustomWindow.Designer.cs 35 51 StackCustomWindow

我发现了一个[类似的问题](https://stackoverflow.com/questions/7300292/windows-forms-designer-automatically-adds-namespace-in-front-of-class)，一个解决方案说在解决方案中的某处必须存在重复的名称，但是 a）我不知道为什么在这种情况下会存在，因为我没有其他具有该名称的控件，并且 b）我不知道如何检查是否确实存在重复名称。我没有任何其他用户控件或名为 的项目`Editor`，Visual Studio 为我的*所有*用户控件执行此操作。正如您在下面看到的，所有代码都非常基本，除了用户控件和主窗口之外没有其他控件。

代码`Editor`：

使用 System.Windows.Forms；

```
namespace StackCustomWindow
{
    public partial class Editor : UserControl
    {
        public Editor()
        {
            InitializeComponent();
        }
    }
} 
```

它的`designer.cs`文件：

```
namespace StackCustomWindow
{
    partial class Editor
    {
        /// <summary> 
        /// Required designer variable.
        /// </summary>
        private System.ComponentModel.IContainer components = null;

        /// <summary> 
        /// Clean up any resources being used.
        /// </summary>
        /// <param name="disposing">true if managed resources should be disposed; otherwise, false.</param>
        protected override void Dispose(bool disposing)
        {
            if (disposing && (components != null))
            {
                components.Dispose();
            }
            base.Dispose(disposing);
        }

        #region Component Designer generated code

        /// <summary> 
        /// Required method for Designer support - do not modify 
        /// the contents of this method with the code editor.
        /// </summary>
        private void InitializeComponent()
        {
            this.SuspendLayout();
            // 
            // Editor
            // 
            this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
            this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
            this.Name = "Editor";
            this.Size = new System.Drawing.Size(452, 276);
            this.ResumeLayout(false);

        }

        #endregion

    }
} 
```

StackCustomWindow.cs：

使用 System.Windows.Forms；

```
namespace StackCustomWindow
{
    public partial class StackCustomWindow : Form
    {
        public StackCustomWindow()
        {
            InitializeComponent();
        }

    }
} 
```

StackCustomWindow.designer.cs：

```
namespace StackCustomWindow
{
    partial class StackCustomWindow
    {
        /// <summary>
        /// Required designer variable.
        /// </summary>
        private System.ComponentModel.IContainer components = null;

        /// <summary>
        /// Clean up any resources being used.
        /// </summary>
        /// <param name="disposing">true if managed resources should be disposed; otherwise, false.</param>
        protected override void Dispose(bool disposing)
        {
            if (disposing && (components != null))
            {
                components.Dispose();
            }
            base.Dispose(disposing);
        }

        #region Windows Form Designer generated code

        /// <summary>
        /// Required method for Designer support - do not modify
        /// the contents of this method with the code editor.
        /// </summary>
        private void InitializeComponent()
        {
            this.SuspendLayout();
            // 
            // StackCustomWindow
            // 
            this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
            this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
            this.ClientSize = new System.Drawing.Size(718, 535);
            this.Name = "StackCustomWindow";
            this.Text = "StackCustomWindow";
            this.ResumeLayout(false);

        }

        #endregion

    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-06T15:00:14.587

问题是 StackCustomWindow 类型的名称与 StackCustomWindow 命名空间相同。所以 StackCustomWindow.Editor 最终被解释为“StackCustomWindow 类型的成员 'Editor'”，而不是“命名空间 StackCustomWindow 的成员 'Editor'”。

为命名空间和类型使用不同的名称将防止此问题。

你的代码是有效的，设计师生成的代码不是。代码生成器不希望你做你做过的事情，也没有很好地处理它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-06T14:45:21.183

你可能与`System.Collections.Stack System.Collections.Generic.Stack`班级发生冲突。您是否正在使用这些命名空间 ( `System.Collections`, `System.Collections.Generic`) 中的任何一个？

# android - Android 文本不会居中对齐

> ID：11830450
> 
> 赞同：2
> 
> 时间：2012-08-06T14:37:46.693
> 
> 标签：android, android-layout

我有 a`TextView`和 3`Buttons`以 a 为中心`RelativeLayout`，并且所有三个中的文本都是左对齐的，父中心作为最左边的行。

我尝试更改`gravity`、和 布局`TextView`，`Buttons`但没有任何效果，我很困惑，因为我以前从未见过 Android 对齐文本这样。

我希望`Button`文本在每个文本中居中`Button`，顶部文本居中对齐。

它的样子在这里：http: [//i.stack.imgur.com/9lHEd.png](http://i.stack.imgur.com/9lHEd.png)

这是我的xml：

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_margin="20dp"
    android:gravity="center_horizontal"
    android:text="@string/greeting"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<Button
    android:id="@+id/startQuizButton"
    android:layout_width="280dp"
    android:layout_height="wrap_content"
    android:layout_below="@+id/textView1"
    android:layout_centerHorizontal="true"
    android:onClick="@string/startQuiz"
    android:text="@string/start_quiz" />

<Button
    android:id="@+id/lessonsButton"
    android:layout_width="280dp"
    android:layout_height="wrap_content"
    android:layout_below="@+id/startQuizButton"
    android:layout_centerHorizontal="true"
    android:onClick="@string/startLesson"
    android:text="@string/lessonsString" />

<Button
    android:id="@+id/viewAllButton"
    android:layout_width="280dp"
    android:layout_height="wrap_content"
    android:layout_below="@+id/lessonsButton"
    android:layout_centerHorizontal="true"
    android:onClick="@string/showAll"
    android:text="@string/view_all" /> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T14:48:15.990

我包括了一个`RelativeLayout`，因为您将它作为您的父布局。但是，我不确定它是否需要。看看下面的代码是不是你要找的。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <TextView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:gravity="center_horizontal"
            android:text="Greetings" />

        <Button
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="Start Quiz" />

        <Button
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="Lessons" />

        <Button
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="View all questions" />
    </LinearLayout>

</RelativeLayout> 
```

![在此处输入图像描述](../Images/1e00acdd81fb6f42f84032e35f55da44.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T14:47:28.757

添加按钮选项卡 android:gravity="center"...看看它是否有效..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-07T14:45:50.380

如果你想居中一些文本，那么你也可以这样做：

```
 <TextView
    android:text="Quantity"
    android:textSize="34sp"
    android:textColor="#ffffff"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:fontFamily="sans-serif-light"
    android:layout_centerHorizontal="true"
    android:paddingTop="10dp"/> 
```

在这里，我已经改变了它，通过使用`android:layout_centerHorizontal="true"`它采用布尔值 true 或 false，使它成为 true，它将自动以所有设备为中心，希望有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-16T06:11:56.637

您需要将布局宽度和高度设置为 fill_parent，一切都会正常工作

```
<TextView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:gravity="center"
        android:text="your text" /> 
```

# sql - 如何在 sql 中正确使用内连接

> ID：11830465
> 
> 赞同：1
> 
> 时间：2012-08-06T14:38:30.627
> 
> 标签：sql, database, oracle

我有两张桌子：

**离开**

```
debt city
43   odesa
23   kiev
79   kiev
78   donezk 
```

和

**工作人员**

```
ide   fn    ln      debt
3421  jed   trt       43
 354  jed   res       43
  43  ged   hjkhg     79
  73  ghghg gfgf      79
 456  jkl   gdfg      78
 532  kkhg  vjv       23
  45  ki    vt        79
 243  ki    vt        78 
```

`fn`我需要选择每个部门 ( )的员工行数( `debt`) 并按城市对它们进行排序。我写了这段代码：

```
select empl.DEBT, count (*) as emp_num 
from depart 
inner join empl on empl.DEBT = depart.DEBT
group by empl.DEBT
order by depart.CITY; 
```

但是这段代码不起作用。我做错了什么？

我使用 Oracle db，在 Toad 中执行脚本。

错误信息是

> 出现以下错误：ORA-00900：无效的 SQL 语句

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T14:46:02.937

要按城市订购，则还需要按城市分组：

```
select empl.DEBT, count (*) as emp_num 
from depart 
inner join empl 
on empl.DEBT = depart.DEBT
group by empl.DEBT, depart.CITY
order by depart.CITY; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T14:46:42.077

```
select empl.DEBT, count (*) as emp_num 
from depart 
inner join empl on empl.DEBT = depart.DEBT
group by depart.CITY,empl.DEBT
order by depart.CITY; 
```

# c# - 带有 *sql* 子查询的实体框架查询

> ID：11830468
> 
> 赞同：2
> 
> 时间：2012-08-06T14:38:34.460
> 
> 标签：c#, .net, sql, entity-framework, ef-code-first

简而言之：我可以在实体模型中以某种方式使用文字 SQL 子查询而不使用数据库视图吗？

上下文：我有一堆导致 C# 对象的 ADO.NET 查询。这些对象直接对应于查询形状；即我可以[`ObjectContext.Translate`](http://msdn.microsoft.com/en-us/library/dd466384)将它们从`SqlDataReader`. 有很多这样的查询，很多相当复杂，其中一些使用实体框架不支持的功能（while 循环、CTE、hierarchyid 等）——将这些（遗留）查询转换为 LINQ 是不可行的。

但是，我真的希望能够包装这些结果并在 C# 方面添加一些自定义过滤：排序、过滤、分页等。我可以将每个查询转换为视图（或存储过程）和映射这些，但这是一个麻烦和维护的噩梦 - 但原则上 EF 可以通过该路线与“不透明”SQL 查询一起使用。

我可以以某种方式将用 SQL 编写的子查询与实体模型一起使用吗？`ObjectContext.Translate`返回 an`IQueryable`而不是 an的 An`IEnumerable`是理想的，但不是必需的：绝大多数查询都是编译时常量，因此可以进行某种形式的预处理。

***编辑：***我正在寻找返回的东西，`IQueryable`所以我可以添加过滤器/排序客户端，但让它们在数据库上执行（像往常一样）。我首先使用实体​​框架代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T14:41:17.313

您可以将`DefiningQuery`EntitySet 的属性设置为一些文字 SQL。这些或多或少等同于 SQL 视图。这能解决你的问题吗？

[http://msdn.microsoft.com/en-us/library/cc982038.aspx](http://msdn.microsoft.com/en-us/library/cc982038.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T14:48:34.520

如果您的 SQL 查询给出的结果与实体类的结构相同，则可以使用`DbContext.SqlQuery`

```
 var customer=context.Database.
         SqlQuery<Customer>("SELECT ID,NAME from CUSTOMER WHERE TYPE IN 
                     (SELECT TYPEID FROM IMPORTANT_TYPE)"); 
```

假设`context`是您的 DBContext 类对象

# html - 在 IE7 中使用 CSS 下拉列表 (megamenu) 中的表单选择失败 - 解决方法？

> ID：11830472
> 
> 赞同：2
> 
> 时间：2012-08-06T14:38:45.710
> 
> 标签：html, css, forms, internet-explorer-7, hover

我们正在为一个包含带有选择的 HTML 表单的网站构建一个 CSS 下拉菜单。在 IE7 中，当您单击一个选择时，它的弹出菜单会（自然地）打开。然后，当您将鼠标悬停在菜单上以选择一个项目时，看起来好像焦点已从页面上移开，包含的 div/li 失去了 :hover，并且在您选择一个选项之前整个事情都关闭了。

在 JSFiddle 中预览：http: [//jsfiddle.net/q284w/](http://jsfiddle.net/q284w/)

上面的 JSFiddle 在“菜单 1”中有违规代码……而且，是的，我正在使用表格在该菜单中获得全高、垂直居中、3 列布局。它在原始代码中，所以我把它放在这里；我不认为这是问题的一部分，但你永远不会知道 IE。

当然，这适用于我可以测试的所有其他浏览器，包括 IE8+。

关于解决方法的任何想法？也许 JavaScript 可以挽救局面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:26:09.957

最终，这个（我发现）没有简单的答案。你只需要使用 JavaScript 来解决它，这很痛苦。它的要点如下：

1.  创建一个模拟 :hover 状态的特殊类。您将使用它来“保持”菜单打开。
2.  创建一个函数，将此类添加到相应的菜单项并附加到下拉列表的 onClick。
3.  在另一个函数中，删除该类并将其附加到下拉列表的 onChange（下拉列表关闭）。

# c# - .NET 微框架编译和部署无需 VisualStudio

> ID：11830473
> 
> 赞同：1
> 
> 时间：2012-08-06T14:38:51.873
> 
> 标签：c#, .net-micro-framework

首先，感谢您费心看我的问题，因为 5 天的谷歌搜索让我至少可以说是沉闷的。

我想知道一种无需使用 Visual Studio 即可编译然后部署的方法。我能够编译然后使用 MetaDataProcessor.exe 生成带有 -minimize 选项的 PE（便携式可执行文件）文件。但是，这似乎是我有点卡住的地方。我相信我应该生成一个数据库文件，其中包括我的应用程序中引用的所有 PE 文件，然后我应该从那里将其转换为摩托罗拉 SRecord 文件，但是当我采取这些步骤时，我得到了这个结果：

1）我的 .hex 文件比我在使用 Visual Studio 部署后从我的板上拉下的 .hex 文件大 3.5 倍左右（来自 VS 的 65kb 和我的步骤 305kb）

2) 在尝试部署和运行我的 .NETMF 应用程序时，我收到来自开发板本身的错误，说我的至少一个程序集有一个空校验和（它在收到第一个空校验和后中止）

我缺少什么秘密步骤，或者我在这里错误地使用了什么步骤？在这里的任何帮助将不胜感激。

谢谢你，詹姆斯。

# python - Numpy联合数组按顺序排列

> ID：11830474
> 
> 赞同：4
> 
> 时间：2012-08-06T14:39:02.450
> 
> 标签：python, numpy

我有三个不同的 numpy 数组

```
a = array([ 0,  3,  6,  9, 12])
b = array([ 1,  4,  7, 10, 13])
c = array([ 2,  5,  8, 11, 14]) 
```

我如何使用 numpy 方法加入他们

```
d = array[(0,1,2,3,4,...,12,13,14)] 
```

我不想写一个像

```
for i in range(len(a)):
 [...] 
```

这只是我项目中的一个示例，数组未排序，我想保持它们的顺序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T14:42:47.943

您可以转置和展平数组：

```
d = numpy.array([a, b, c]).T.flatten() 
```

组合数组的另一种方法是使用`numpy.vstack()`：

```
d = numpy.vstack((a, b, c)).T.flatten() 
```

（顺便说一句，我不知道哪个更快。）

**编辑**：响应[Nicolas Barbey 的回答](https://stackoverflow.com/a/11830636/279627)，这里是如何只复制一次数据：

```
d = numpy.empty((len(a), 3), dtype=a.dtype)
d[:, 0], d[:, 1], d[:, 2] = a, b, c
d = d.ravel() 
```

这段代码确保数据以`ravel()` 不需要复制的方式布局，而且确实比我机器上的原始代码快很多：

```
In [1]: a = numpy.arange(0, 30000, 3)
In [2]: b = numpy.arange(1, 30000, 3)
In [3]: c = numpy.arange(2, 30000, 3)
In [4]: def f(a, b, c):
   ...:     d = numpy.empty((len(a), 3), dtype=a.dtype)
   ...:     d[:, 0], d[:, 1], d[:, 2] = a, b, c
   ...:     return d.ravel()
   ...: 
In [5]: def g(a, b, c):
   ...:     return numpy.vstack((a, b, c)).T.ravel()
   ...: 
In [6]: %timeit f(a, b, c)
10000 loops, best of 3: 34.4 us per loop
In [7]: %timeit g(a, b, c)
10000 loops, best of 3: 177 us per loop 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T14:47:53.717

您可以使用 ：

```
d = np.vstack((a, b, c)).T.ravel() 
```

这在 .flatten() 上节省了一份副本，因此在大型数组上可以更快。

编辑：正如 Sven Marnach 所说，在这种情况下，这不会保存副本。

由于某种原因，vstack 比数组快：

```
In [1]: a = ones(1e4)

In [2]: b = ones(1e4)

In [3]: c = ones(1e4)

In [4]: %timeit np.vstack((a, b, c)).T.ravel()
1000 loops, best of 3: 265 us per loop

In [5]: %timeit np.vstack((a, b, c)).T.flatten()
1000 loops, best of 3: 268 us per loop

In [6]: %timeit np.array((a, b, c)).T.ravel()
100 loops, best of 3: 5.24 ms per loop

In [7]: def test(a, b, c):
    d = numpy.empty((len(a), 3), dtype=a.dtype)
    d.T[:] = a, b, c
    d = d.ravel()
    return d

In [8]: %timeit test(a, b, c)
100 loops, best of 3: 5.06 ms per loop

In [9]: def test2(a, b, c):
            d = np.empty((len(a), 3), dtype=a.dtype)
            d[:, 0], d[:, 1], d[:, 2] = a, b, c
            d = d.ravel()
            return d

In [9]: %timeit test2(a, b, c)
10000 loops, best of 3: 69.8 us per loop 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-25T19:14:01.033

试试看...

```
reduce (numpy.union1d, (a, b, c)) 
```

# asp.net-mvc-3 - 处理 Global.asax Application_Error 中的错误时出现 NotImplementedException

> ID：11830475
> 
> 赞同：0
> 
> 时间：2012-08-06T14:39:04.243
> 
> 标签：asp.net-mvc-3, c#-4.0, exception-handling

我有代码

```
protected void Application_Error(object sender, EventArgs e)
    {
        HttpContext ctx = HttpContext.Current;
        Exception ex = ctx.Server.GetLastError();
        ctx.Response.Clear();

        var viewResult = new ViewResult();

        if (ex.GetType() != typeof(SecurityException))
        {
            RequestContext rc = ((MvcHandler)ctx.CurrentHandler).RequestContext;
            IController controller = new ModuleController();
            var context = new ControllerContext(rc, (ControllerBase)controller);                

            var httpException = ex as HttpException;
            if (httpException != null)
            {
                switch (httpException.GetHttpCode())
                {
                    case 404:
                        viewResult.ViewName = "Error404";
                        Response.StatusCode = 404;
                        break;

                    case 500:
                        viewResult.ViewName = "Error500";
                        Response.StatusCode = 500;
                        break;

                    default:
                        viewResult.ViewName = "Error";
                        Response.StatusCode = httpException.GetHttpCode();
                        break;
                }
            }
            else
            {
                viewResult.ViewName = "Error";
            }

            viewResult.ViewData.Model = new HandleErrorInfo(ex, context.RouteData.GetRequiredString("controller"), context.RouteData.GetRequiredString("action"));
            viewResult.ExecuteResult(context);
            ctx.Server.ClearError();
        }
        else
        {
            var context = new ControllerContext { RouteData = new RouteData() };
            context.RouteData.Values.Add("controller", "Security");
            context.Controller = new SecurityController();
            HttpCookie cookie = this.mebershipService.GetCookie();
            cookie.Expires = DateTime.Now.AddDays(-1);
            this.Context.Response.Cookies.Add(cookie);
            viewResult.ViewName = "HackedDetect";
            Response.StatusCode = 403;
            viewResult.ExecuteResult(context);
            ctx.Server.ClearError();
        }
    } 
```

处理SecurityException时，调用与系统无关的控制器（为了不绕圈子）就代码viewResult.ExecuteResult(context)；是一个 NotImplementedException 但我不清楚哪个方法或操作没有定义。

这就是从错误中复制到剪贴板的内容

> System.NotImplementedException 未由用户代码处理
> HResult = -2147467263
> 消息 = 方法或操作未实现。
> Source = System.Web
> StackTrace:
> in System.Web.HttpContextBase.get_Response()
> in System.Web.Mvc.ViewResultBase.ExecuteResult (ControllerContext context)
> in SGN.Web.MvcApplication.Application_Error (Object sender, EventArgs e) in C:\ Project\SGN\SGN.Web\Global.asax.cs： System.Web.HttpApplication.RaiseOnError() InnerException
> 中System.EventHandler.Invoke(Object sender,EventArgs e)第142行：

**更新**

我会写下我要做什么来得到这个错误

我创建了自定义身份类，并在初始化时验证了 cookie。如果 cookie 不验证我创建 SecurityException

# dll - 拥有两个不同版本的 DLL 会导致问题吗？

> ID：11830479
> 
> 赞同：0
> 
> 时间：2012-08-06T14:39:19.793
> 
> 标签：dll, vb6

我有一个需要使用 MSOLAP80.dll 正确显示其数据透视表的 vb6 程序。但是因为 MSOLAP90.dll 有一些兼容性问题，所以我不能使用 MSOLAP90.dll 并且仍然显示数据透视表。

我已经注册了 MSOLAP90.dll，然后再次注册了 MSOLAP80.dll，一切似乎都很好。但是，我不知道两者是否都已实际注册，或者 MSOLAP80.dll 是否是唯一注册的，因为我没有关于 MSOLAP90.dll 中的新内容的参考点。是否可能两者都已注册并且程序仅使用 MSOLAP80.dll，如果有需要 MSOLAP90.dll 的程序，那么它会知道使用那个吗？

我想我只是对注册 DLL 的工作方式以及是否有可能同时注册这两个感到困惑。有人可以帮忙解释一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T08:02:30.413

如果您想确定哪个已注册，您可以：

*   查看与您的 DLL 路径匹配的类型库的引用对话框。
*   打开 RegEdit，然后搜索 MSOLAP80.DLL 或 MSOLAP90.DLL（取消选中“仅匹配整个字符串”）。

如果您找到两个 DLL 的引用，那么您是安全的，因为您可以绑定到特定版本。如果您发现对错误 DLL 的引用，则取消注册错误的，并注册正确的。

COM 原来在任何时候只允许一组 CLSID（唯一标识类）、IID（唯一标识类的接口）的一个版本。可以有多个对 LIBID 的引用（标识类型库 - 嵌入在 DLLL 中的资源），但它们必须具有不同的版本。

从 Windows XP 开始，可以进行并行 DLL 访问，其中可执行文件可以访问特定版本的 DLL，覆盖注册表中的值。您需要在与 EXE 文件相同的文件夹中嵌入或拥有一个 .manifest 文件。

不幸的是，这方面的文档似乎已经从 MSDN 中消失了，只有几篇知识库文章提到：

*   [http://support.microsoft.com/kb/828629](http://support.microsoft.com/kb/828629)
*   [http://support.microsoft.com/kb/843524](http://support.microsoft.com/kb/843524)

# python - 为 ConfigObj 和 Unicode 使用 StringIO

> ID：11830480
> 
> 赞同：5
> 
> 时间：2012-08-06T14:39:19.563
> 
> 标签：python, unicode, configobj

我正在尝试使用 StringIO 来提供 ConfigObj。我想在我的单元测试中这样做，以便我可以根据我想在配置对象中测试的内容即时模拟配置“文件”。

我在配置模块中处理了一大堆事情（我正在阅读几个 conf 文件，为其余的应用程序聚合和“格式化”信息）。但是，在测试中，我面临着来自**hell**的 unicode 错误。我想我已经将我的问题归结为最小的功能代码，为了这个问题的目的，我已经提取并过度简化了这些代码。

我正在执行以下操作：

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

import configobj
import io

def main():
    """Main stuff"""

    input_config = """
    [Header]
    author = PloucPlouc
    description = Test config

    [Study]
    name_of_study = Testing
    version = 9999
    """

    # Just not to trust my default encoding
    input_config = unicode(input_config, "utf-8")

    test_config_fileio = io.StringIO(input_config)    
    print configobj.ConfigObj(infile=test_config_fileio, encoding="UTF8")

if __name__ == "__main__":
    main() 
```

它产生以下回溯：

```
Traceback (most recent call last):
File "test_configobj.py", line 101, in <module>
    main()
File "test_configobj.py", line 98, in main
    print configobj.ConfigObj(infile=test_config_fileio, encoding='UTF8')
File "/work/irlin168_1/USER/Apps/python272/lib/python2.7/site-packages/configobj-4.7.2-py2.7.egg/configobj.py", line 1242, in __init__
    self._load(infile, configspec)
File "/work/irlin168_1/USER/Apps/python272/lib/python2.7/site-packages/configobj-4.7.2-py2.7.egg/configobj.py", line 1302, in _load
    infile = self._handle_bom(infile)
File "/work/irlin168_1/USER/Apps/python272/lib/python2.7/site-packages/configobj-4.7.2-py2.7.egg/configobj.py", line 1442, in _handle_bom
    if not line.startswith(BOM):
UnicodeDecodeError: 'ascii' codec can't decode byte 0xef in position 0: ordinal not in range(128) 
```

我在 Linux 上使用 Python-2.7.2（32 位）。我的控制台和编辑器 (Kile) 的语言环境设置为 fr_FR.utf8。

我以为我可以做到这一点。

从[io.StringIO 文档](http://docs.python.org/library/stringio.html#module-StringIO)中，我得到了这个：

> StringIO 对象可以接受 Unicode 或 8 位字符串，但混合使用两者可能需要一些注意。

从[ConfigObj 文档](http://www.voidspace.org.uk/python/articles/configobj.shtml#unicode-support)中，我可以这样做：

> ```
> >>> config = ConfigObj('config.ini', encoding='UTF8')
> >>> config['name']
>     u'Michael Foord' 
> ```

[这](http://www.voidspace.org.uk/python/configobj.html#configobj-specifications)：_

> 文件：无
> 
> 您无需指定 infile。如果省略它，将创建一个空的 ConfigObj。infile 可以是：
> 
> ```
>  [...]
>    A StringIO instance or file object, or any object with a read method. The filename attribute of your ConfigObj will be None [5]. 
> ```
> 
> “编码”：无
> 
> 默认情况下，ConfigObj 不会将您传递的文件/字符串解码为 Unicode [8]。如果您希望您的配置文件为 Unicode（键和成员），您需要提供一个编码来解码文件。此编码也将用于在写入时对配置文件进行编码。

我的问题是它为什么会产生这个？从（简单的）Unicode处理中我还有什么不明白的？...

通过查看这个[答案](https://stackoverflow.com/a/10864570/493211)，我改变了：

```
input_config = unicode(input_config, "utf8") 
```

到（预先导入编解码器模块）：

```
input_config = unicode(input_config, "utf8").strip(codecs.BOM_UTF8.decode("utf8", "strict")) 
```

为了摆脱可能包含的字节顺序标记，但这并没有帮助。

非常感谢

注意：如果我使用 StringIO.StringIO 而不是 io.StringIO，我有相同的回溯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T20:08:15.497

这一行：

```
input_config = unicode(input_config, "utf8") 
```

正在将您的输入转换为 Unicode，但是这一行：

```
print configobj.ConfigObj(infile=test_config_fileio, encoding="UTF8") 
```

将输入声明为 UTF-8 编码的字节字符串。该错误表示在预期字节字符串时传递了 Unicode 字符串，因此注释掉上面的第一行应该可以解决问题。我暂时没有`configobj`，所以无法测试。

# php - 存储未来日期或当前时间戳

> ID：11830490
> 
> 赞同：0
> 
> 时间：2012-08-06T14:40:25.087
> 
> 标签：php, javascript, jquery, mysql

我试图让我的网站有一个条目表，以便在必要时添加未来日期。我正在尝试使用 JQuery 工具，这是我发现的非常匹配的 JS。

```
$(function() {
$('.date-picker').datepicker( {
    changeMonth: true,
    changeYear: true,
    changeDay: true,
    showButtonPanel: true,
    dateFormat: 'Y/m/d H:i:s',
    onClose: function(dateText, inst) { 
        var month = $("#ui-datepicker-div .ui-datepicker-month :selected").val();
        var year = $("#ui-datepicker-div .ui-datepicker-year :selected").val();
        var day = $("#ui-datepicker-div .ui-datepicker-year :selected").val();
        $(this).datepicker('setDate', new Date(year, month, day));
    }
    formatDate()
});
}); 
```

我在网上找到了这个，但它只显示月份和年份。用户应该能够选择未来日期，并且时间戳将设置为该未来日期的上午 12:01，但用户还应该能够选择当前日期。如果选择了当前日期，我想将其保留为空并让 mysql 时间戳工作。任何建议/帮助将不胜感激谢谢，

# wcf - WCF 反序列化

> ID：11830493
> 
> 赞同：0
> 
> 时间：2012-08-06T14:40:27.490
> 
> 标签：wcf

我有一个关于 WCF 和 XML 反序列化的问题。

假设我有一个 XSD，它将许多属性指定为 minoccurs='0'。

```
<xs:element name=TestData>
  <xs:complexType>
    <xs:sequence>
      <xs:element minOccurs=0 name="stoppageHours>
        <xs:simpleType>
          <xs:restriction base="xs:int">
          </xs:restriction>
        </xs:simpleType>
      </xs:element>
      <xs:element minOccurs=0 name="stoppageDate>
        <xs:simpleType>
          <xs:restriction base="xs:dateTime">
          </xs:restriction>
        </xs:simpleType>
      </xs:element>
    <xs:sequence>
  <xs:complexType>
</xs:element> 
```

如果我没有属性的值，我可以省略 XML 中的元素标签，即

```
<TestData>
  <StoppageHours>26</StoppageHours>
  ...omitted stoppageDate...
</TestData> 
```

但是，鉴于我已经生成了从 XSD 到 .NET c# 的类，当我将 XML 发布到我的 Web 服务时，它抱怨反序列化失败，因为它期望元素？

如何强制反序列化过程忽略丢失的 XML 元素并将有问题的类成员设置为 NULL 值？我尝试将类成员设置为系统可为空的类型，但要使其正常工作，我必须将 XML 元素作为 xsi:nillable 传递？我真正想做的只是省略 XML 标记。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T19:07:57.343

允许此功能的属性称为[EmitDefaultValue](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datamemberattribute.emitdefaultvalue.aspx)。您在服务端的数据合同可能看起来像这样：

```
[DataContract]
public class TestData
{
    [DataMember(EmitDefaultValue = false)]
    public int StoppageHours { get; set; }

    [DataMember(EmitDefaultValue = false)]
    public DateTime StoppageDate { get; set; }
} 
```

当 EmitDefaultValue 等于 false 时，它​​告诉 WCF 中的数据协定序列化程序如果元素的值等于默认值，则从输入中删除这些元素。对于值类型，如果不存在，序列化程序将在服务器端将值设置为默认值。所以在这种情况下，如果你通过

```
<TestData></TestData> 
```

当 WCF 接收到它时，您的对象将在服务器端具有这些值：

```
<TestData>
    <StoppageHours>0</StoppageHours>
    <StoppageDate>1/1/0001 12:00:00 AM</StoppageDate>
</TestData> 
```

编辑：根据您的反馈意见，您可能需要做的另一件事是在 DataMember 上设置[IsRequired](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datamemberattribute.isrequired.aspx)属性。当我测试这个属性应该默认为 false 但你可以尝试在合同定义中明确。更新后的合约现在看起来像这样：

```
[DataContract]
public class TestData
{
    [DataMember(IsRequired = false, EmitDefaultValue = false)]
    public int StoppageHours { get; set; }

    [DataMember(IsRequired = false, EmitDefaultValue = false)]
    public DateTime StoppageDate { get; set; }
} 
```

当值设置为 true 并且节点丢失时，我得到一个序列化异常。当 IsRequired 设置为 false 时，我可以发送一个空请求：

```
<TestData></TestData> 
```

并且没有序列化异常。如果这不起作用，那么您可能需要清除临时 asp.net 文件并重新启动服务。我在测试时遇到了这个问题。希望这可以帮助。

# javascript - 手动将节点添加到 JavaScript InfoVis Toolkit 强制有向图

> ID：11830503
> 
> 赞同：5
> 
> 时间：2012-08-06T14:41:09.033
> 
> 标签：javascript, asp.net, visualization, data-visualization, infovis

我正在尝试使用此处找到的 JavaScript InfoVis Toolkit：[JS InfoVis ToolKit](http://thejit.org/) to create a Force Directed Graph。我们真的不想使用 JSON 将数据“提供”到图形中——相反，我们宁愿手动添加节点。

`var root = aGraph.getNode(id);`我已经将以下代码放在一起——但是当我尝试绘制图形时，在 jit.js ( )的第 7118 行中找不到我的根节点。我省略了我的 ForceDirected 选项的细节——但那些不应该影响结果。

```
 fd = new $jit.ForceDirected({...}) 
        //Create main node
        var rootNode = { id: "root", name: "Actors", data: { "$color": "#557EAA"} }
        fd.root = rootNode;
        fd.graph.addNode(rootNode);

        $.each(array, function (index, art) {
            var pubId = art.pubMedId.toString();
            var labelText = "Article " + pubId;
            var node = { id: pubId.toString(), name: labelText, data: { "$color": "#557EAA"} }

            //Create Nodes -- connect them to main node for now
            fd.graph.addNode(node);
            fd.graph.addAdjacence(rootNode, node, {});

            text = text + art.pubMedId + ',';
        });

        //Display graph
        fd.plot(); 
```

有没有人有这样做的经验？？寻求指导。我已经在 FireBug 中进行了调试，并且所有内容似乎都正确加载到图表中（即 - 所有节点都存在）。我很茫然。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T20:56:56.370

而不是`fd.root = rootNode;`，你想使用`fd.root = rootNode.id;`. 我也对此感到惊讶。

此外，您可能需要在添加根节点之前初始化 Graph：

`fd.graph = new $jit.Graph(fd.graphOptions, fd.config.Node, fd.config.Edge, fd.config.Label);`

注意：使用 2.0.1 版测试。

# mysql - 在 MySQL 中转换为十进制

> ID：11830509
> 
> 赞同：37
> 
> 时间：2012-08-06T14:41:37.457
> 
> 标签：mysql, casting, decimal

我正在尝试像这样在 MySQL 中转换为 Decimal：

```
CAST((COUNT(*) * 1.5) AS DECIMAL(2)) 
```

我正在尝试将表中的行数（乘以 1.5）转换为浮点数，该点后有两位数。

SQL 代码：

```
 SELECT CONCAT(Guardian.title, ' ', 
               Guardian.forename, ' ', 
               Guardian.surname) AS 'Guardian Name', 
               COUNT(*) AS 'Number of Activities', 
               (COUNT(*) * 1.5) AS 'Cost'
 FROM Schedule
 INNER JOIN Child ON Schedule.child_id = Child.id
 INNER JOIN Guardian ON Child.guardian = Guardian.id
 GROUP BY Guardian
 ORDER BY Guardian.surname, Guardian.forename ASC 
```

它产生一个错误：

```
#1064 - You have an error in your SQL syntax; check the manual that 
corresponds to your MySQL server version for the right syntax to use 
near 'CAST((COUNT(*) * 1.5) AS DECIMAL(12,2))' at line 1. 
```

再试一次，这个演员也不起作用：

```
 SELECT CONCAT(Guardian.title, ' ', 
               Guardian.forename, ' ', 
               Guardian.surname) AS 'Guardian Name', 
               COUNT(*) AS 'Number of Activities', 
               CAST((COUNT(*) * 1.5) AS DECIMAL(8,2)) AS 'Cost'
 FROM Schedule
 INNER JOIN Child ON Schedule.child_id = Child.id
 INNER JOIN Guardian ON Child.guardian = Guardian.id
 GROUP BY Guardian
 ORDER BY Guardian.surname, Guardian.forename ASC 
```

如何使用 mysql 将整数转换为十进制？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-06T14:57:02.800

来自 MySQL 文档：[定点类型（精确值）- DECIMAL，NUMERIC](http://dev.mysql.com/doc/refman/5.5/en/fixed-point-types.html)：

> 在标准 SQL 中，语法`DECIMAL(M)`等价于`DECIMAL(M,0)`

因此，您正在转换为具有 2 个整数位和 0 个小数位的数字。试试这个：

```
CAST((COUNT(*) * 1.5) AS DECIMAL(12,2)) 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-12-07T04:54:53.297

## MySQL强制转换为十进制：

**将裸整数转换为十进制：**

```
select cast(9 as decimal(4,2));       //prints 9.00 
```

**将整数 8/5 转换为十进制：**

```
select cast(8/5 as decimal(11,4));    //prints 1.6000 
```

**将字符串转换为十进制：**

```
select cast(".885" as decimal(11,3));   //prints 0.885 
```

**将两个 int 变量转换为小数**

```
mysql> select 5 into @myvar1;
Query OK, 1 row affected (0.00 sec)

mysql> select 8 into @myvar2;
Query OK, 1 row affected (0.00 sec)

mysql> select @myvar1/@myvar2;   //prints 0.6250 
```

**将十进制转换回字符串：**

```
select cast(1.552 as char(10));   //shows "1.552" 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-06T15:03:37.390

`DECIMAL`有两个部分：`Precision`和`Scale`。因此，您的部分查询将如下所示：

```
CAST((COUNT(*) * 1.5) AS DECIMAL(8,2)) 
```

`Precision`表示为值存储的有效位数。
`Scale` 表示小数点后可以存储的位数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-21T03:39:50.853

我认为出于您的目的，另一种选择是使用 round() 函数：

```
select round((10 * 1.5),2) // prints 15.00 
```

[你可以在这里](https://www.w3schools.com/sql/trymysql.asp?filename=trysql_func_mysql_round)试试：

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-30T00:33:14.093

我很懒：

```
0 + colname 
```

此外，这适用于固定小数位数、浮点数等。

另见`ROUND()`和`FORMAT()`。

# ruby-on-rails - 为什么 "<%= @comments.each { |comment| comment.title } %>" 产生的不是评论标题而是 "comment.inspect"...？

> ID：11830513
> 
> 赞同：1
> 
> 时间：2012-08-06T14:41:44.227
> 
> 标签：ruby-on-rails, erb

为什么以下代码为我产生不同的输出？

```
<% @comments.each do |comment| %>
  <%= comment.title %>
<% end %> 
```

产生：

```
Title 1 title 2 
```

但

```
<%= @comments.each { |comment| comment.title } %> 
```

产生：

```
[#<Comment id: 1, commentable_id: 1, commentable_type: "Entry", title: "Title 1", body: "bla", subject: "", user_id: 1, parent_id: nil, lft: 1, rgt: 2, created_at: "2012-07-31 06:15:26", updated_at: "2012-07-31 06:15:26">, #<Comment id: 2, commentable_id: 1, commentable_type: "Entry", title: "tile 2", body: "one more comment", subject: "", user_id: 1, parent_id: nil, lft: 3, rgt: 4, created_at: "2012-08-01 06:58:57", updated_at: "2012-08-01 06:58:57">] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T14:45:53.630

这是因为`<%= %>`将打印出代码块返回的值。`@comments`在这种情况下，你有一个你正在调用的枚举。在这种情况下，该方法`each`将返回使用的可枚举`@comments`。

如果你想打印出标题集合，你可以使用：

```
<%= @comments.map{ |comment| comment.title } %> 
```

或更简洁地说

```
<%= @comments.map(&:title) %> 
```

# c - gethostbyaddr 在 Windows 上可以，但在 Linux 上返回 NULL

> ID：11830514
> 
> 赞同：1
> 
> 时间：2012-08-06T14:41:45.303
> 
> 标签：c, networking, network-programming

这段代码在 Windows 上运行良好，但 gethostbyaddr 在 Linux 上返回 NULL。

我尝试了很多改变，但没有任何成功。

我的 /etc/host.conf 有以下行

订购主机，绑定

我运行完整代码并传递地址 11.234.456.74，在 Windows 上 gethostbyaddr 解析地址并且工作正常。但是在 Linux 上，它不解析 ip 地址并返回 NULL。

请帮忙。

```
#ifdef WIN32
if (init){
    WSADATA wsaData;
    // Request Winsock version 2.2
    if (WSAStartup (MAKEWORD(1, 1), &wsaData) != 0) {
        WSACleanup();
        exit (EXIT_FAILURE);
    }
    init = 0;
}   
#endif

// Open required socket
p_socket[IP_SOCKET_SOCKET] = socket(AF_INET, server_socket_type, 0);
if ( p_socket[IP_SOCKET_SOCKET] < 0 ) {
#ifdef WIN32
    WSACleanup();
#endif
    exit (EXIT_FAILURE);
}
destAdrLen = mxGetM(prhs[0]) * mxGetN(prhs[0]) + 1;
destAdr  = (char *) mxMalloc(destAdrLen);
if (destAdr == NULL) {
    mexErrMsgTxt("mxMalloc(destAdrLen) failed");
}
mxGetString(prhs[0], destAdr, destAdrLen);

destPort = (int) mxGetScalar(prhs[1]);

if (isalpha(destAdr[0])) { 
    // socket address is a name
    hp = gethostbyname(destAdr);
}
else {      
    // socket address is a number
    addr = inet_addr(destAdr);
    hp = gethostbyaddr((char *)&addr, 4, AF_INET);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T16:50:47.103

该主机似乎没有注册反向 dns 记录。

```
$ dig -x 11.234.217.74

; <<>> DiG 9.9.1-P2 <<>> -x 11.234.217.74
;; global options: +cmd
;; Got answer:
;; ->>HEADER<<- opcode: QUERY, status: NXDOMAIN, id: 30231
;; flags: qr rd ra; QUERY: 1, ANSWER: 0, AUTHORITY: 1, ADDITIONAL: 0

;; QUESTION SECTION:
;74.217.234.11.in-addr.arpa.    IN  PTR

;; AUTHORITY SECTION:
in-addr.arpa.       3599    IN  SOA b.in-addr-servers.arpa. nstld.iana.org. 2011026180 1800 900 604800 3600

;; Query time: 1217 msec 
```

所以调用`gethostbyaddr`会失败。该`herror`功能甚至会打印一条消息`Unknown host`。如果您想在这些情况下保留数字 IP，则必须自己编写该代码路径。如果 Windows 做了其他任何事情，那么看看它从哪里获取信息会很有趣。

# iphone - 防止在 MKMapView 中滚动，也在缩放时

> ID：11830516
> 
> 赞同：22
> 
> 时间：2012-08-06T14:41:48.797
> 
> 标签：iphone, ios, objective-c, ipad, mkmapview

**一旦用户开始捏MKMapView** ，这`scrollEnabled`似乎是易碎的。

 **您仍然不能用一根手指滚动，但如果在放大和缩小时用两根手指滚动，您可以移动地图。

我试过了 ：

*   子类化`MKMapKit`以禁用其中的滚动视图。
*   实现 –<code>mapView:regionWillChangeAnimated: 来强制中心。
*   禁用`scrollEnabled`.

但没有运气。

谁能告诉我一个只放大**MKMapView**的可靠方法，所以中心点总是保持在中间？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-14T14:20:37.723

您可以尝试使用以下方法自己处理捏合手势`UIPinchGestureRecognizer`：

首先设置`scrollEnabled`并`zoomEnabled`创建`NO`手势识别器：

```
UIPinchGestureRecognizer* recognizer = [[UIPinchGestureRecognizer alloc] initWithTarget:self
                                                                                 action:@selector(handlePinch:)];
[self.mapView addGestureRecognizer:recognizer]; 
```

在识别器处理程序中`MKCoordinateSpan`根据缩放比例调整：

```
- (void)handlePinch:(UIPinchGestureRecognizer*)recognizer
{
    static MKCoordinateRegion originalRegion;
    if (recognizer.state == UIGestureRecognizerStateBegan) {
        originalRegion = self.mapView.region;
    }    

    double latdelta = originalRegion.span.latitudeDelta / recognizer.scale;
    double londelta = originalRegion.span.longitudeDelta / recognizer.scale;

    // TODO: set these constants to appropriate values to set max/min zoomscale
    latdelta = MAX(MIN(latdelta, 80), 0.02);
    londelta = MAX(MIN(londelta, 80), 0.02);
    MKCoordinateSpan span = MKCoordinateSpanMake(latdelta, londelta);

    [self.mapView setRegion:MKCoordinateRegionMake(originalRegion.center, span) animated:YES];
} 
```

这可能不像 Apple 的实现那样完美，但它应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-02-01T11:33:20.950

Swift 3.0 版本的@Paras Joshi 回答[https://stackoverflow.com/a/11954355/3754976](https://stackoverflow.com/a/11954355/3754976)

带有小动画修复。

```
class MapViewZoomCenter: MKMapView {

    var originalRegion: MKCoordinateRegion!

    override func awakeFromNib() {
       self.configureView()
    }

    func configureView() {
        isZoomEnabled = false
        self.registerZoomGesture()
    }

    ///Register zoom gesture
    func registerZoomGesture() {
        let recognizer = UIPinchGestureRecognizer(target: self, action:#selector(MapViewZoomCenter.handleMapPinch(recognizer:)))
        self.addGestureRecognizer(recognizer)
    }

    ///Zoom in/out map
    func handleMapPinch(recognizer: UIPinchGestureRecognizer) {

        if (recognizer.state == .began) {
            self.originalRegion = self.region;
        }

        var latdelta: Double = originalRegion.span.latitudeDelta / Double(recognizer.scale)
        var londelta: Double = originalRegion.span.longitudeDelta / Double(recognizer.scale)

        //set these constants to appropriate values to set max/min zoomscale
        latdelta = max(min(latdelta, 80), 0.02);
        londelta = max(min(londelta, 80), 0.02);

        let span = MKCoordinateSpanMake(latdelta, londelta)

        self.setRegion(MKCoordinateRegionMake(originalRegion.center, span), animated: false)

    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T15:46:15.700

尝试在您的地图视图的委托中实现`–mapView:regionWillChangeAnimated:`或`–mapView:regionDidChangeAnimated:`，以便地图始终以您的首选位置为中心。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T13:48:53.237

我以前读过这个，虽然我从来没有真正尝试过。看看这篇关于带边界的 MKMapView 的文章。它使用两个委托方法来检查视图是否已被用户滚动。

[http://blog.jamgraham.com/blog/2012/04/29/adding-boundaries-to-mkmapview](http://blog.jamgraham.com/blog/2012/04/29/adding-boundaries-to-mkmapview)

本文描述了一种与您尝试过的方法类似的方法，因此，如果您已经偶然发现它，请见谅。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-14T00:32:45.143

这些答案中的任何一个我都没有运气。自己捏捏太矛盾了。我遇到了正常变焦比我自己捏的更远的情况。

最初，我尝试作为原始海报执行以下操作：

```
- (void) mapView:(MKMapView *)mapView regionDidChangeAnimated:(BOOL)animated {
    MKCoordinateRegion region = mapView.region;
    //...
    // adjust the region.center 
    //...
    mapView.region = region;
} 
```

我发现那没有效果。我还通过`NSLog`s 发现即使我以编程方式设置`region`or时，此方法也会触发。`centerCoordinate`这导致了一个问题：“如果它确实有效，上述内容不会无限吗？”

所以我现在推测和假设，当用户缩放/滚动/旋转发生时，MapView 会以某种方式抑制或忽略对该区域的更改。关于仲裁的某些事情使程序化调整无能为力。

如果这是问题所在，那么也许关键是在`regionDidChanged:`通知之外进行区域调整。并且由于任何调整都会触发另一个通知，因此能够确定何时不再调整非常重要。这导致我进行了以下实现（在哪里`subject`提供我想留在中间的中心坐标）：

```
- (void) recenterMap {
    double latDiff = self.subject.coordinate.latitude self.mapView.centerCoordinate.latitude;
    double lonDiff = self.subject.coordinate.longitude - self.mapView.centerCoordinate.longitude;
    BOOL latIsDiff = ABS(latDiff) > 0.00001;
    BOOL lonIsDiff = ABS(lonDiff) > 0.00001;
    if (self.subject.isLocated && (lonIsDiff || latIsDiff)) {
        [self.mapView setCenterCoordinate: self.subject.coordinate animated: YES];
    }
}

- (void) mapView:(MKMapView *)mapView regionDidChangeAnimated:(BOOL)animated {
    if (self.isShowingMap) {
        if (self.isInEdit) {
            self.setLocationButton.hidden = NO;
            self.mapEditPrompt.hidden = YES;
        }
        else {
            if (self.subject.isLocated) { // dispatch outside so it will happen after the map view user events are done
                 dispatch_after(DISPATCH_TIME_NOW, dispatch_get_main_queue(), ^{
                    [self recenterMap];
                });
            }
        }
    }
} 
```

它向后滑动的延迟可能会有所不同，但它确实工作得很好。并让地图交互在发生时保持 Apple 风格。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-01-23T01:56:56.587

我试过这个并且它有效。

首先创建一个属性：

```
var originalCenter: CLLocationCoordinate2D? 
```

然后在 regionWillChangeAnimated 中，检查这个事件是否是由 UIPinchGestureRecognizer 引起的：

```
func mapView(mapView: MKMapView, regionWillChangeAnimated animated: Bool) {
    let firstView = mapView.subviews.first
    if let recognizer = firstView?.gestureRecognizers?.filter({ $0.state == .Began || $0.state == .Ended }).first as? UIPinchGestureRecognizer {
        if recognizer.scale != 1.0 {
            originalCenter = mapView.region.center
        }
    }
} 
```

然后在 regionDidChangeAnimated 中，如果捏合手势导致区域发生变化，则返回原始区域：

```
func mapView(mapView: MKMapView, regionDidChangeAnimated animated: Bool) {
    if let center = originalCenter {
        mapView.setRegion(MKCoordinateRegion(center: center, span: mapView.region.span), animated: true)
        originalCenter = nil
        return
    }
// your other code 
} 
```**

# c - 在 Linux 中读取 USB 网络摄像头的输出

> ID：11830517
> 
> 赞同：11
> 
> 时间：2012-08-06T14:41:49.823
> 
> 标签：c, image, jpeg, webcam

我在 C 中尝试了一些 fread 和 fwrite。所以我用 C 编写了这个小程序来从网络摄像头获取数据并将其转储到文件中。以下是来源：

```
#include <stdio.h>
#include <stdlib.h>
#define SIZE 307200 // number of pixels (640x480 for my webcam)
int main() {
    FILE *camera, *grab;
    camera=fopen("/dev/video0", "rb");
    grab=fopen("grab.raw", "wb");
    float data[SIZE];
    fread(data, sizeof(data[0]), SIZE, camera);
    fwrite(data, sizeof(data[0]), SIZE, grab);
    fclose(camera);
    fclose(grab); 
    return 0;
} 
```

该程序在编译时工作 ( `gcc -o snap camera.c`)。令我惊讶的是，输出文件不是原始数据转储，而是 JPEG 文件。`file`linux上程序输出文件上的命令输出显示它是JPEG图像数据：JFIF Standard 1.01。该文件可以在图像查看器上查看，尽管有点饱和。

这如何或为什么会发生？我没有在源代码或程序中使用任何 JPEG 编码库。相机是否本机输出JPEG？网络摄像头是由罗技制造的 Sony Playstation 2 EyeToy。该系统是 Debian Linux。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-06T16:09:55.177

[Sony EyeToy](http://en.wikipedia.org/wiki/EyeToy)有一个 OV7648 传感器和非常流行的 OV519 桥接器。OV519 以 JPEG 格式输出帧——如果我没记错的话，这是它支持的唯一格式。

像这样的相机需要应用程序支持，或者需要在传送到用户空间之前解压缩帧的特殊驱动程序。显然，在您的情况下，驱动程序以其原始形式提供 JPEG 帧，这就是您在输出中获取 JPEG 数据的原因。

顺便说一句，你真的应该看看[Video4Linux2 API](http://v4l2spec.bytesex.org/)以了解在 Linux 上访问视频设备的正确方法——简单`open()/read()/close()`的通常是不够的......

# mysql - 无法连接数据库

> ID：11830519
> 
> 赞同：0
> 
> 时间：2012-08-06T14:41:55.693
> 
> 标签：mysql, codeigniter

这个网站上有 2-3 个相同的问题，但没有一个给我正确的答案，所以我再问一次。

我昨天刚刚安装了codeigniter，正在看一些教程。但是当我尝试访问数据库时，我开始收到以下错误

```
 Unable to connect to your database server using the provided settings.

           Filename: C:\wamp\www\test\system\database\DB_driver.php

              Line Number: 124 
```

我在设置中没有更改任何内容。刚刚安装了wamp server，然后创建了一个名为asik的数据库，然后创建了一个表名bcc。这是 database.php 文件：

```
 $db['default']['hostname'] = 'localhost';
     $db['default']['username'] = 'root';
     $db['default']['password'] = 'root';
     $db['default']['database'] = 'asik';
     $db['default']['dbdriver'] = 'mysqli';
     $db['default']['dbprefix'] = '';
     $db['default']['pconnect'] = FALSE;
     $db['default']['db_debug'] = TRUE;
     $db['default']['cache_on'] = FALSE;
     $db['default']['cachedir'] = '';
     $db['default']['char_set'] = 'utf8';
     $db['default']['dbcollat'] = 'utf8_general_ci';
     $db['default']['swap_pre'] = '';
     $db['default']['autoinit'] = TRUE;
     $db['default']['stricton'] = FALSE; 
```

（我还自动加载了数据库。）

这是我在收到错误之前所做的。我已经尝试了一整天，但找不到任何解决方法。请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T04:06:59.693

您一定正在观看来自 youtube 的临时视频教程。它对初学者来说真的很棒。我遇到了同样的问题。

无论如何，答案将是

```
 $db['default']['password'] = ''; 
```

如果您没有为数据库使用任何密码，那么您不必使用任何密码，但用户名应该是 root。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T14:48:47.013

仅验证用户名、密码、数据库名称和这些配置上方的一行

```
$active_group = 'default'; 
```

# .net - 出现 404 - 尝试通过 SPWeb 将超过 20MB 的文件添加到 SharePoint 时找不到

> ID：11830527
> 
> 赞同：0
> 
> 时间：2012-08-06T14:42:29.390
> 
> 标签：.net, sharepoint, sharepoint-2010, asmx

奇怪的交易。我们将 asmx 服务的配置设置为允许文件大小最大为 70MB，如下所示：

```
<httpRuntime executionTimeout="1000" maxRequestLength="70000"/> 
```

在您尝试超过 20MB 的文件之前，一切正常。组成堆栈的异常是

> System.Net.WebException：请求失败，HTTP 状态为 404：未找到。在 System.Web.Services.Protocols.SoapHttpClientProtocol.ReadResponse（SoapClientMessage 消息，WebResponse 响应，流 responseStream，布尔 asyncCall）在 System.Web.Services.Protocols.SoapHttpClientProtocol.InvokeAsyncCallback（IAsyncResult 结果）

这是来自 asmx 的代码块，它试图将文件放在目录/集合中：

```
 [WebMethod]
        public string UploadFile(byte[] contents, string destUrl)
        {
            var theReturn = "Bad";

            SPSecurity.RunWithElevatedPrivileges(delegate()
            {
                SPWeb site = new SPSite(destUrl).OpenWeb();

                site.Files.Add(destUrl, contents);
            });

            theReturn = "Good";

            return theReturn;
        } 
```

我们怀疑它可能与 SharePoint 端的最大文件大小限制有关，但我们无法找到该设置或在其上查找任何文档。虽然，它显然可能是别的东西。我正在寻找想法。TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T07:42:01.370

您是否在 Web 应用程序常规设置中更新了最大文件上传？

![在此处输入图像描述](../Images/65673fb38e44cfc30c85b7d8f863edfc.png)

您还应该查看[http://support.microsoft.com/kb/925083](http://support.microsoft.com/kb/925083)以确保您进行了所有相关更改。

# amazon-ec2 - Amazon EC2 高可用性

> ID：11830531
> 
> 赞同：0
> 
> 时间：2012-08-06T14:42:37.033
> 
> 标签：amazon-ec2, cloud, high-availability, configuration-management, redundancy

### 跟随场景：

有一项服务 24/7 运行，停机时间非常昂贵。该服务部署在 Amazon EC2 上。我知道将应用程序部署在两个不同的可用区甚至两个不同的区域以防止单点故障的重要性。但...

我的问题是是否有任何**其他配置**问题可能会影响应用程序的冗余。我的意思也是错误的配置（例如，DNS 的错误配置会在故障转移的情况下使其失败）。

只是为了确保我清楚 - 我正在尝试创建一个应该测试的验证列表，以确保部署在 EC2 上的应用程序的冗余。

谢谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T16:31:22.300

就像警告一样，仅仅因为您将服务放在两个可用区中并不意味着您具有容错能力。

例如，我的一项设置是在负载均衡器上安装 4 台服务器，并将 us-east-1a us-east-1b 作为两个区域。几个月前亚马逊的中断导致我的软件出现一些中断，因为负载均衡器无法正常工作。他们仍在转发请求，但我在其中一个区域中的两个死机实例也仍在接收请求。负载均衡器逻辑的一部分是删除死实例，但由于负载均衡器队列积压，这些实例从未被删除。在我的设置中，每个区域有两个负载均衡器，因此对一个负载均衡器的所有请求都超时，因为没有实例可以响应请求。对我来说幸运的是，浏览器使用第二个负载均衡器重试了请求，所以我的提要仍在加载，但速度非常慢。

我的建议是确保如果您选择在两个区域上仅使用两个可用区，则确保您的系统不依赖于另一个可用区的任何部分，甚至不依赖于负载平衡器。对我来说，在不同的区域启动两个完全独立的系统是不值得的，所以我以后无法再次避免这个问题。但是，如果您的软件非常关键，以至于失去服务 1 小时会支付运行额外硬件的成本，那么额外的服务器绝对值得正确设置。

我还建议支付 AWS 支持费用并与他们的工程师合作，以确保您的设计没有任何高可用性缺陷。

回顾我讨论的问题：http: [//aws.amazon.com/message/67457/](http://aws.amazon.com/message/67457/)

# python - Python file.read() 函数输出？

> ID：11830533
> 
> 赞同：0
> 
> 时间：2012-08-06T14:42:38.723
> 
> 标签：python

我正在尝试使用 Python 中的 File.read() 函数将文件的内容输出到终端，但不断收到与我的“.txt”文件内容不匹配的以下输出。

**Python代码**

```
from sys import argv
script, input_file = argv

def print_all(f):
    print f.read

current_file = open(input_file)
print "Print File contents:\n"
print_all(current_file)
current_file.close() 
```

**输出：**

```
Print File contents:

<built-in method read of file object at 0x1004bd470> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T14:44:03.443

如果要*调用*函数，则需要`()`在函数名称之后（以及任何必需的参数）

因此，在您的函数中`print_all`替换：

```
print f.read    # this prints out the object reference 
```

和：

```
print f.read()  # this calls the function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T14:44:43.413

你只需要改变

```
print f.read 
```

说

```
print f.read() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T14:44:10.030

你应该做一个`read()`

```
current_file = open(input_file)
print "Print File contents:\n"
print_all(current_file.read()) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T14:44:51.190

您需要在`print_all`定义中实际调用该函数：

```
def print_all(f):
    print f.read() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T14:47:04.570

你还没有调用 read 方法，你只是从文件类中得到它。为了调用它，您必须放置大括号。`f.read()`

# ios - 如何在 UIScrollView 中添加多个 UIView

> ID：11830536
> 
> 赞同：2
> 
> 时间：2012-08-06T14:42:54.837
> 
> 标签：ios, uiscrollview

我有一个绘制饼图的 UIView，我想以编程方式在 UIScrollView 中放置 3 个或 4 个图表。我怎样才能做到这一点？

我的h文件是这样的

```
@class PieChart;

@interface ViewController : UIViewController {

}

@property (weak, nonatomic) IBOutlet UIScrollView *scrollView; 
```

和 m 文件

```
- (void)viewDidLoad
{
    [super viewDidLoad];

[scrollView setBackgroundColor:[UIColor blackColor]];
    [scrollView setCanCancelContentTouches:NO];
    scrollView.indicatorStyle = UIScrollViewIndicatorStyleWhite;
    scrollView.clipsToBounds = YES;     
    scrollView.scrollEnabled = YES;
    scrollView.pagingEnabled = YES;

         PieChart *chart = [[PieChart alloc]initWithFrame:CGRectZero];
        [chart setFrame:CGRectMake(100, 100, 200, 200)];

    [scrollView addSubview:chart];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T17:45:30.607

如果您需要将子视图添加到您需要使用的视图中`[view addSubview:subview]`。这是常见的做法。阅读框架和边界（视图和子视图的坐标系）：

*   [https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaViewsGuide/Coordinates/Coordinates.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaViewsGuide/Coordinates/Coordinates.html)

据我了解，由于滚动视图的内容大小，您遇到了问题。在这里阅读更多：

*   [http://developer.apple.com/library/ios/#DOCUMENTATION/WindowsViews/Conceptual/UIScrollView_pg/Introduction/Introduction.html](http://developer.apple.com/library/ios/#DOCUMENTATION/WindowsViews/Conceptual/UIScrollView_pg/Introduction/Introduction.html)

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T14:47:15.220

您可以**添加**它：

```
[scrollView addSubview:singleView]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T14:45:02.837

您将多个子视图添加到一个`UIScrollView`就像您添加一个子视图一样；与`addSubview:`. 你遇到了什么问题？

# python - 基于收益的协程是真正的协程吗？

> ID：11830540
> 
> 赞同：3
> 
> 时间：2012-08-06T14:43:15.813
> 
> 标签：python, coroutine

我只是为了练习而实现greenlet API。

```
from greenlet import greenlet

def test1():
    print 12
    gr2.switch()
    print 34

def test2():
    print 56
    gr1.switch()
   print 78

gr1 = greenlet(test1)
gr2 = greenlet(test2)
gr1.switch() 
```

这是我凌乱的代码

```
def test1():
    tmp1=yield
    print 12
    try:
        gv2.send(1)
    except StopIteration:
        pass
    tmp1=yield
    print 34

def test2():
    tmp2=yield
    print 56
    try:
        gv2.send(1)
    except StopIteration:
        pass
    tmp1=yield
    print 78

gv1=test1()
gv1.next()
gv2=test2()
gv2.next()

gv1.send(1) 
```

显示，

```
12
56
Traceback (most recent call last):
  File "prog.py", line 26, in <module>
    gv1.send(1)
  File "prog.py", line 5, in test1
    gv2.send(1)
  File "prog.py", line 15, in test2
    gv2.send(1)
ValueError: generator already executing 
```

所以，我不知道我猜对了，

但看起来在test1发送'1'到test2之后，它仍然有一些东西，

与 gevent 不同，不会发生控制流切换。test1 仍然有流量。

如果不是，我不明白 greenlet 可以做什么，但 python“协程”不存在。

我的问题是

1.  是python协程（基于产量）是真实的东西（与其他人比较......lisp，ruby，＆c）
2.  如果是的话，请您提供一些意大利面条代码的提示吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T14:50:40.793

的生成器实例`test2()`正在向自身发送一个值。

```
def test2():
    tmp2=yield
    print 56
    try:
        gv2.send(1) # this is the offending line
    except StopIteration:
        pass
    tmp1=yield
    print 78 
```

`send()`将*恢复*生成器，但只要在内部执行代码`test2()`，它就已经在运行。这就是它抛出的原因。

你想做：`gv1.send(1)`？那也行不通。

原因如下：

*   当前情况：在`gv1.send(1)`您的示例结束 之前
    *   gv1 处于休眠状态
    *   gv2 处于休眠状态
*   `gv1.send(1)`被调用，这恢复`gv1`
*   `gv1`进行到`gv2.send(1)`
*   这恢复`gv2`
*   `gv2`进行到`gv1.send(1)`
*   `gv1`正在恢复中，**但是**，自上次恢复以来`gv1`尚未发表声明。`yield`因此，它仍在运行，这就是它也会抛出的原因。

本质上，差异可以总结如下：

*   greenlet**彼此共享**一个固有的连接：`.switch()`暂停当前正在执行的 greenlet，但会继续。
*   另一方面，生成器彼此完全**独立**。没有执行生成器的共享上下文。
    *   `yield`将“暂停”发电机
    *   `next()`/`send()`将恢复暂停的生成器，在正在运行的生成器上调用它们将导致异常。

你为什么要访问`gv2`（它代表一个*特定*的实例`test2`）？生成器`test2()`应该是独立的，不对它的使用方式做任何假设。如果您决定要从其他范围调用生成器怎么办？无论如何，向自己发送值没有任何意义：你已经拥有它们。

# javascript - 在浏览器窗口调整大小时更改 JS 逻辑

> ID：11830541
> 
> 赞同：2
> 
> 时间：2012-08-06T14:43:19.327
> 
> 标签：javascript, css, responsive-design

随着使用 CSS`@media`查询的流行，我们现在可以根据查看网页的分辨率设置网页样式。当您调整浏览器窗口的大小时，将立即出现与宽度相关的样式/布局。在 CSS 中，这非常简单，例如

```
// The heart of "responsive design."
@media screen and (max-width: 1000px) { ... } 
```

本着响应式设计的精神，我们可以在分辨率变化时即时调整 JavaScript 逻辑吗？例如，如果我们的脚本每 10 秒输出一个数字“5”，我们能否将其更改为在将浏览器窗口大小调整为 <300 像素时输出“7”（以相同的间隔）？

```
// Default script
setTimeout(function() {
  var i = 5;
  console.log(i);
}, 10000);

// How to change the value of i to 7, upon window resize?
// Ideally, without a page reload. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T14:50:37.737

处理[window.resize](https://developer.mozilla.org/en-US/docs/DOM/window.onresize?redirectlocale=en-US&redirectslug=DOM:window.onresize)事件：

```
window.onresize = function () {
    // check if the new height/width is <300
    // change your i variable
}; 
```

为了使其工作，您的`i`变量必须位于调整大小处理程序和您传递给 setTimeout 的匿名变量共享的范围内。

[获取窗口高度/宽度](https://stackoverflow.com/questions/3012668/get-the-window-height)的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T14:53:57.400

如果您想要每 10 秒显示一个数字（基于 with），则代码如下：

```
setInterval(function() {
    var num = (window.outerWidth <= 300) ? 7 : 5;
    console.log(i);
}, 10000); 
```

如果您想要在调整窗口大小时显示数字，您应该处理[window.reseize](https://developer.mozilla.org/en-US/docs/DOM/window.onresize?redirectlocale=en-US&redirectslug=DOM%3awindow.onresize)事件，正如@jbabey 回答的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T14:47:43.243

您无法在 CSS 和 JS 之间准确传递变量，但 Javascript 公开了`resize`事件，您可以将其绑定到`window`.

例如：

```
function (event) {
  if (event.srcElement.outerWidth <= 1000 ){
    // do something
  }
} 
```

**[工作 JSFiddle 演示](http://jsfiddle.net/bmgonzal/kZhvz/)**

# java - 蚂蚁启动目标之后

> ID：11830542
> 
> 赞同：5
> 
> 时间：2012-08-06T14:43:21.557
> 
> 标签：java, jakarta-ee, ant, build

在我的 ant 脚本中，我有目标，它压缩了一个项目。这个目标完成后如何启动另一个目标？

非常感谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-06T15:34:51.593

假设您拥有的目标是`zip-project`，并且您要执行的下一个目标是`next-target-for-something`

**一种方法是使用** `antcall`

```
 <target name="zip-project">
     <!-- Your Zipping Task-->
     <antcall target="next-target-for-something"/>
 </target> 
```

**记住** `antcall` **只能在内部** `target` **调用**

**另一种方法是使用** `depends` 你会有类似的东西：

```
<target name="zip-project" >
     <!-- Your Zipping Task-->
</target> 
```

现在将下一个任务定义为

```
<target name="next-target-for-something" depends="zip-project" >
     <!-- Your Next Task-->
</target> 
```

尽管这与您所要求的方式**相反。**所以你需要像...一样称呼蚂蚁

```
ant -buildfile <build.xml> next-target-for-something 
```

它将确保先`zip-project`完成然后再`next-target-for-something`执行。

希望这可以帮助！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T14:52:21.847

您可以使用依赖项来实现这一点。这是一个例子：

```
<target name="nextstep" depends="target">
[Do what ever ...]
</target> 
```

如果您运行“ant nextstep”，这将在目标完成后运行。

# linq - LINQ 使用单个 ID 字段创建多个新实体

> ID：11830545
> 
> 赞同：0
> 
> 时间：2012-08-06T14:43:31.870
> 
> 标签：linq

我有一个新手 LINQ 问题。我需要从字符串列表中创建两个相同类型的对象。我需要将文本“直接”和“间接”附加到字符串并将它们用作 ID 来创建两个唯一对象。

```
var vStrings = new List { "Milk", "Eggs", "Cheese" };

var vProducts = (from s in vStrings
                select new Product { ID = s + "-Direct" })
                .Union(
                 from s in vStrings
                select new Product { ID = s + "-InDirect" }); 
```

您可以在上面的示例中看到，我正在使用 Union 来创建两个不同的对象，有没有更好的方法来重写这个 LINQ 查询？

感谢您的建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T15:05:19.993

这种方式并不短，但我认为它会更好一些，例如只有一个 Concat 而不是多个 Union：

```
var vProducts2 = (from s in vStrings
                  select s + "-Direct").Concat(
                  from s in vStrings
                  select s + "-InDirect"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T15:16:38.190

如果您需要更多后缀，这可能是更好的方法：

```
var strings = new List<string> { "Milk", "Eggs", "Cheese" };
var suffixes = new List<string> {"-Direct", "-InDirect"};

var products = strings
    .SelectMany(_ => suffixes, (x, y) => new Product() {ID = x + y}); 
```

它只会遍历原始字符串集一次。

# types - 当不同记录类型具有公共标签时访问 ocaml 记录的成员

> ID：11830547
> 
> 赞同：2
> 
> 时间：2012-08-06T14:43:39.747
> 
> 标签：types, ocaml, record

我定义了两种记录类型，如下所示：

```
(* in module A*)
type reg = {name: string; mutable value: Big_int.big_int}
type exp = Reg of reg | Other 
```

* * *

```
(* in module B*)
type abstr = Top | Bot | Elt of int
type register = {name: string; mutable value: abstr} 
```

在模块 B 中，我有一个列表，我称之为`l`,`exp`并且我正在对其进行模式匹配。所以我有这样的事情：

```
 List.fold_left (fun l elt ->
     let str =
        match elt with
           | A.Reg r -> r.name
           | _ -> failwith "exception" in
      l@[{name = str; value = Bot}]) [] l 
```

但是我收到以下错误：**表达式的类型为 A.reg 但预期为 register 类型**。看来模块A中的定义被模块B中的定义隐藏了。如果是，为什么会这样？有人可以解释吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T15:07:34.180

记录不能在 OCaml 中共享字段名称。`exp`记录类型中的字段全名为`A.name`和`A.value`。与其他命名元素一样，在模块 A 中，您可以省略`A.`前缀。但是，在不同的模块中，您必须使用完全限定名称（除非您已打开`A`）。换句话说，写信`r.A.name`来解决你的错误。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-06T15:02:13.247

要使用模块中的记录字段名称，您需要键入：

```
value.Module.field 
```

在您的情况下，它将是：

```
r.A.name 
```

我认为 Deokhwan Kim 也是对的，你想要`A.Reg`而不是`A.reg`.

回答“为什么会这样”：获得（奇妙而奇妙的）类型推断的权衡是编译器无法从事物的类型中推断出重载名称的含义。推论是相反的（本质上）。因此，您无法区分`name`基于类型命名的两个字段，您需要明确说明您的意思。整数和浮点算术运算符之间的区别也有类似的限制。

# html - 我可以使用没有框架的 html 页面显示 html 页面吗？

> ID：11830548
> 
> 赞同：1
> 
> 时间：2012-08-06T14:43:43.057
> 
> 标签：html, css, webpage, frames, liquid-layout

我是 html、css 和 javascript 的新手。我记得 10 年前当我搞乱 html 时，我能够用框架做到这一点。我想要一个目录在我的左边，我的内容在右边。我有五个要用作内容的 html 页面。如果我有一个页面的导航和标题在所有页面上都相同，并且内容区域中的五个内容页面没有框架，我是否可以做到这一点？我使用这个 html/css 作为基础：[liquid two column page](http://www.maxdesign.com.au/articles/css-layouts/two-liquid/)。我将对其进行修改以使左侧部分更瘦。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T14:53:21.253

您可能有兴趣查看服务器端包含 (SSI)。这将允许您设计一次导航面板，然后将其插入其他页面。

[http://webdesign.about.com/od/ssi/a/aa052002a.htm](http://webdesign.about.com/od/ssi/a/aa052002a.htm)

也有使用 PHP 或 ASP.NET 母版页的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T14:45:26.187

我采用的方法是使用 Jquery 来执行此操作。我没有制作多个 HTML，而是创建不同的 div 并使用 .show()/.hide() 功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T14:58:57.440

我知道你说框架是指框架集吗？如果是的话，你会考虑使用 iframe 吗？

[http://www.w3schools.com/tags/tag_iframe.asp](http://www.w3schools.com/tags/tag_iframe.asp)

```
<iframe src="http://www.google.com" width="300" height="300" frameBorder="0"></iframe> 
```

# nunit - 使用键盘键的 Nunit 错误

> ID：11830551
> 
> 赞同：0
> 
> 时间：2012-08-06T14:43:48.873
> 
> 标签：nunit

任何人都可以在 Nunit 中重现此错误吗？在 Nunit 应用程序中，打开一个包含多个测试的 Nunit 项目。右键单击侧栏中的测试，然后在上下文菜单中选择运行。这将运行一项测试。现在，使用键盘，浏览到侧边栏中树的顶部，按下*菜单键*并选择运行。您希望父项的所有子测试都将运行，但您发现只有您之前单击的测试被执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:22:34.523

向 Nunit 报告的错误[https://bugs.launchpad.net/nunitv2/+bug/1033537](https://bugs.launchpad.net/nunitv2/+bug/1033537)

# c# - 有没有更短的方法来编写这个 LINQ 构造？

> ID：11830552
> 
> 赞同：1
> 
> 时间：2012-08-06T14:43:50.263
> 
> 标签：c#, linq, asp.net-mvc-4

我需要确定用户是否*只是*销售人员。我的 ASP.NET MVC 4 控制器中有以下内容：

```
 public ActionResult Index() {
        string salespersonCode = null;

        var roles = Roles.GetRolesForUser();
        if(roles.Count() == 1 && roles.Contains(UserRoles.Salesperson.ToString()))
            salespersonCode = User.Name();

        return View(new ProspectIndexViewModel { Prospects = _crmService.GetActiveProspects(salespersonCode) });
    } 
```

用户可能拥有多个角色。如果用户只有该角色，我想将返回的数据限制为仅属于销售人员的数据。其他三个角色（经理、管理员和销售管理员）将接收整个列表。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T14:46:15.050

您可以使用[All](http://msdn.microsoft.com/en-us/library/bb548541.aspx)方法。

```
if(roles.All(r => r == UserRoles.Salesperson.ToString())) 
```

但是我认为您的代码没有问题...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T14:45:25.283

```
var roles = Roles.GetRolesForUser();
if(!roles.Any(r => r != UserRoles.Salesperson.ToString()))
    salespersonCode = User.Name(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-06T14:47:05.440

尝试使用

```
if (Page.User.IsInRole("Salesperson")) { ... }; 
```

# c# - 如何记录 NUnit 测试错误或失败消息？

> ID：11830556
> 
> 赞同：2
> 
> 时间：2012-08-06T14:44:04.723
> 
> 标签：c#, logging, nunit

我有一组 NUnit 测试正在运行，我想在每次测试完成后将测试结果（以及一些环境信息）记录到 Teardown 方法中的数据库中。除了编写我自己的 NUnit 插件之外，还有什么方法可以从 NUnit TestContext 获取这些信息？我知道失败或错误消息会记录到我使用控制台运行程序指定的任何输出文件中，但我真的很想以编程方式进行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T01:24:07.127

您可以访问代码中的 TestContext 变量，并可以使用它来获取有关您的测试的各种信息，例如：

```
[TearDown]
public void TearDown()
{
    if (TestContext.CurrentContext.Result.Status == TestStatus.Failed)
    {
        Console.WriteLine(TestContext.CurrentContext.Test.FullName);
        Console.WriteLine(TestContext.CurrentContext.Result.Status);
    }
} 
```

在您的 TearDown 方法中，您可以简单地将该数据连同您想要的任何其他内容一起写入数据库。

# xml - 后面的 XSL 变换组元素

> ID：11830558
> 
> 赞同：1
> 
> 时间：2012-08-06T14:44:09.110
> 
> 标签：xml, xslt-1.0

这是我在 XML 中的内容：

```
 <par level="4">Hi </par>
      <par level="4">There!</par>
      <par level="12">abcd :</par>
      <par level="12">efgh .</par>
      <par level="4">azert</par>
      <par level="4">yuio</par>
      <par level="4">p</par>
      <par level="4">)</par> 
```

当我阅读 PAR 元素时，我想在同一个 DIV 中连接内容，直到 LEVEL 属性仍然与前一个相同。但如果 LEVEL 发生变化，我需要创建一个新的 DIV。内容顺序不必更改，因此第一个“4 级”PAR 不必与第二个合并。除了我提到的最后一点，我已经看到了类似的问题。

所以这是我在上面示例的 xsl 转换后想要的：（XSLT 1.0）

```
 <div class="level4">
        Hi there!
      </div>
      <div class="level12">
        abcd :efgh .
      </div>          
      <div class="level4">
        azertyuiop)
      </div> 
```

我已经有一个模板 xsl:template match="par"> 里面有很多代码。你有什么建议来实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T03:22:16.590

你可以这样做：

**XML 输入**（修改为格式良好）

```
<doc>
    <par level="4">Hi </par>
    <par level="4">There!</par>
    <par level="12">abcd :</par>
    <par level="12">efgh .</par>
    <par level="4">azert</par>
    <par level="4">yuio</par>
    <par level="4">p</par>
    <par level="4">)</par>
</doc> 
```

**XSLT 1.0**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="par[not(@level = preceding-sibling::par[1]/@level)]">
        <div class="level{@level}">
            <xsl:value-of select="."/>      
            <xsl:apply-templates select="(following-sibling::par[1])[@level=@level]" mode="dump"/>      
        </div>
    </xsl:template>

    <xsl:template match="par[preceding-sibling::par[1]/@level=@level]"/>

    <xsl:template match="par" mode="dump">
        <xsl:value-of select="."/>
        <xsl:if test="following-sibling::par[1]/@level = @level">
            <xsl:apply-templates select="following-sibling::par[1]" mode="dump"/>
        </xsl:if>
    </xsl:template>

</xsl:stylesheet> 
```

**输出**

```
<doc>
   <div class="level4">Hi There!</div>
   <div class="level12">abcd :efgh .</div>
   <div class="level4">azertyuiop)</div>
</doc> 
```

# java - Buildr - 用另一个项目创建的 jar 编译项目

> ID：11830560
> 
> 赞同：3
> 
> 时间：2012-08-06T14:44:17.297
> 
> 标签：java, ruby, jruby, buildr

我有以下定义：

```
define "BE" do
    project.version = VERSION_NUMBER
    project.group = GROUP
    manifest['Copyright'] = COPYRIGHT

    desc 'Building common project for engine and API'
    define 'common' do
        compile.with XXX
        package :jar
    end

    desc 'Building the engine project based on common'
    define 'engine' do
        compile.with XXX
        package :jar
    end

    desc 'Building API project'
    define 'API' do
        package(:war).with :libs=>project('common')
    end

end 
```

我想用从公共项目创建的 jar 编译第二个项目 - 引擎。（这取决于它）

我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T15:29:04.653

您可以将[项目](http://buildr.apache.org/projects.html)直接传递给`compile.with`，摘自[http://buildr.apache.org/building.html](http://buildr.apache.org/building.html)

```
 compile.with 'org.apache.axis2:axis2:jar:1.2', 
        'org.apache.derby:derby:jar:10.1.2.1', projects('teh-api', 'teh-impl') 
```

您也可以简化项目调用`compile.with projects('common')`。

# silverlight - 单选按钮自定义样式上方的文本块

> ID：11830562
> 
> 赞同：0
> 
> 时间：2012-08-06T14:44:19.607
> 
> 标签：silverlight, xaml, embedded

我正在将 Silverlight 用于嵌入式窗口，并且我有一个简单的单选按钮样式

```
<Style TargetType="RadioButton" x:Key="SettingsTab">
    <Setter Property="Width" Value="95"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="RadioButton">
                    <Grid x:Name="RootElement">
                        <Image x:Name="Ozadje1" Source="settings_backgroun.png"/>

                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

现在我想在上面放 2 个文本块，就像你在第二张图片上看到的那样。

这是我在风格中使用的图像： ![设置背景.png](../Images/f56009566edb66b60fcdd3872c06d526.png)

![我想要的是](../Images/1e62c26520e5cf17e6cbf2c92fea79ae.png)

因为我是silverlight的新手，所以我有一些问题，所以我希望有人能指出我正确的方向。

请记住，用于嵌入式窗口的 Silverlight 是没有某些组件的 Silverlight 3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T15:06:55.157

如果您所做的只是添加 TextBlock，那么这应该完成它，（希望嵌入式 Windows 允许它。）

```
<Style TargetType="RadioButton" x:Key="SettingsTab">
    <Setter Property="Width" Value="95"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="RadioButton">
                    <Grid x:Name="RootElement">
                        <Image x:Name="Ozadje1" Source="settings_backgroun.png"/>
                        <TextBlock Text="LIM" Foreground="Orange" VerticalAlignment="Top" HorizontalAlignment="Center" Margin="0,5,0,0" />
                        <TextBlock Text="3.5mA" HorizontalAlignment="Center"  VerticalAlignment="Bottom" Margin="0,0,0,5"/>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

# java - 使用 Boxlayout 导致我的面板只有父面板的一半大小

> ID：11830565
> 
> 赞同：1
> 
> 时间：2012-08-06T14:44:26.550
> 
> 标签：java, html, swing, jlabel, boxlayout

我使用 JPanel 作为主面板向我的用户显示信息。

我使用方法创建了 3 个其他 Jpanel。标题面板、动词面板、关闭按钮面板。这些方法中的每一个都被分配为一个组件并添加到主面板中。我在主面板和其他面板中使用 BoxLayout。

```
 Component titlePanel = titlePanel();
  Component verbiagePanel = verbiagePanel();
  Component closeButtonPanel = closeButton();

  this.setTitle("EDI - Help Page");
  //this.setResizable( false );

  centerPanel = new JPanel();
  centerPanel.setLayout(new BoxLayout(centerPanel, BoxLayout.PAGE_AXIS));
  centerPanel.setPreferredSize(new Dimension(700, 300));
  centerPanel.add(titlePanel, BorderLayout.NORTH);
  centerPanel.add(Box.createRigidArea(new Dimension(0, 10)));
  centerPanel.add(verbiagePanel, BorderLayout.CENTER);
  centerPanel.add(Box.createRigidArea(new Dimension(0, 2)));
  centerPanel.add(closeButtonPanel, BorderLayout.SOUTH);
  getContentPane().add(centerPanel);
  this.pack(); 
```

在其上方是主面板方法。当我编译并运行对话框时，除了verbiagePanel 之外，一切看起来都是正确的。它只有父面板和其他 2 个面板的一半大小。

![在此处输入图像描述](../Images/d12fc0acd6e6b6aa25776a6cbad58a1a.png)

这是我的 verbiagePanel 的代码

```
 private JPanel verbiagePanel() {
  String titleText = "<html><font size=4><b><center>How To Use This Application</b></center></font></html>";
  String text = "<html>" +
        "  <P align=left><font size=3>" +
        "   &nbsp;&nbsp;&nbsp;&nbsp;1\. Add a data to the list of Selected Datasets.<br/>" +
        "   &nbsp;&nbsp;&nbsp;&nbsp;(see below for detailed instructions on adding datasets)<br/>" +
        "   &nbsp;&nbsp;&nbsp;&nbsp;2\. Select the project to send data to.<br/>" +
        "   &nbsp;&nbsp;&nbsp;&nbsp;3\. Adjust the list of selected 3D or 2D translators if desired.<br/>" +
        "   &nbsp;&nbsp;&nbsp;&nbsp;4\. Use the Send button to continue the EDI transaction." +
        "  </font></P>" +
        "  </html>";

  JLabel titleLabel = new JLabel(titleText, JLabel.CENTER);
  titleLabel.setBorder(BorderFactory.createLineBorder(Color.black));

  JLabel bodyLabel = new JLabel(text, JLabel.LEFT);
  bodyLabel.setBorder(BorderFactory.createLineBorder(Color.black));

  JPanel p = new JPanel();
  p.setLayout(new BoxLayout(p, BoxLayout.Y_AXIS));
  p.add(titleLabel);
  p.add(bodyLabel);
  p.setBorder(BorderFactory.createLineBorder(Color.black));
  return p;   
} 
```

有趣的是，如果我从面板中删除 BoxLayout。面板将扩展以匹配其他 2 个面板。但是标签的间距很疯狂。我最终将在面板中至少有 5 个标签。现在我只展示 2 以使其更简单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T19:24:22.203

我最终使用了 GrigBagLayout 模型。它根据需要工作。

# iphone - 将标题设置为实现的 UINavigationBar

> ID：11830568
> 
> 赞同：0
> 
> 时间：2012-08-06T14:44:30.057
> 
> 标签：iphone, objective-c, ios

我的代码：

```
@interface BIDMyClass ()

@end

@implementation BIDMyClass {
    UINavigationBar *settingsBar;
}

-(void)loadView {
    [super loadView];

    settingsBar = [[UINavigationBar alloc] init];
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    [settingsBar setFrame:CGRectMake(0.0f, 0.0f, 293.0f, 44.0f)];
    [settingsBar.topItem setTitle:@"Settings"];
    [self.view addSubview:settingsBar];
} 
```

`settingsBar`已添加，但上面没有标题。我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T14:51:25.330

`settingsBar.topItem`可能是零。尝试设置您的项目列表`settingsBar`：

```
settingsBar.items = [NSArray arrayWithObject:[[[UINavigationItem alloc] initWithTitle:@"Settings"] autorelease]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T15:00:25.277

或者，您也可以声明您的：

```
 IBOutlet UINavigationBar *navBar; 
```

并在 IB 中连接。假设您有一个带有导航栏的 XIB 文件。

# javascript - 读取java脚本中的文本

> ID：11830571
> 
> 赞同：0
> 
> 时间：2012-08-06T14:44:44.597
> 
> 标签：javascript, filereader

在javascript中读取文本文件的典型方法是什么？该文件将像其他脚本文件一样位于服务器上，但我想将它用作例如 GLSL 着色器。

我以为我可以简单地替换它：

```
<script id="shader-vs" type="x-shader/x-vertex">
    //GLSL code
</script> 
```

用这条线：

```
<script id="shader-vs2" type="x-shader/x-vertex" src="../Data/Effects/Shader.vp"></script> 
```

当我在 Chrome 上尝试它时，它导致了以下错误。

资源解释为脚本，但使用 MIME 类型 application/octet-stream 传输：“https://c9.io/b_old/substitute/workspace/Data/Effects/Shader.vp”。

这应该怎么做？

我想我真正想要的是一个 XmlHttpRequest。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T14:50:58.867

配置您的 Web 服务器以将 *.vp 文件传输为`x-shader/x-vertex`.

例如，在 apache 中，您可以在 .htaccess 文件中配置如下内容：

```
AddType x-shader/x-vertex vp 
```

其他 Web 服务器有自己的配置方式。如果您正在使用[IIS 文档，请点击此处。](http://technet.microsoft.com/en-us/library/cc725608%28v=ws.10%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T10:54:51.317

我想我真正想要的是一个 XmlHttpRequest。

# c# - gridview C#中scrollviewer的水平偏移量

> ID：11830574
> 
> 赞同：4
> 
> 时间：2012-08-06T14:44:57.393
> 
> 标签：c#, xaml, windows-8, windows-runtime

我正在使用 Windows 8 发布预览版和 C#(VS 2012) 开发 Metro 应用程序，有没有办法通过提供 HorizantalOffset 来滚动网格视图水平滚动条。 **简介：**`ScrollToHorizontalOffset`在scroll-viewer类中，我们可以使用and 动态移动水平滚动条和垂直滚动条`ScrollToVerticalOffset`，但是在gridview中我没有找到这些属性，那么如何通过代码动态滚动呢？或者我可以参考 gridview 中的滚动条吗？任何人都可以帮我解决这个问题，在此先感谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-06T16:09:14.447

您可以使用 VisualTreeHelper 从 GridView 的模板中获取对 ScrollViewer 的引用。您还可以使用我在[WinRT XAML 工具包](http://winrtxamltoolkit.codeplex.com/)中放入的一些辅助方法- 在[VisualTreeHelperExtensions](http://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/16916#309178)中。你只需要添加

```
using WinRTXamlToolkit.Extensions; 
```

然后打电话

```
var scrollViewer = myGridView.GetFirstDescendantOfType<ScrollViewer>() 
```

你去吧。

EDIT* - 请注意，工具包的更高版本中的命名空间已更改为 WinRTXamlToolkit.Controls.Extensions。

# cucumber - Selenium Webdriver 错误代码 502

> ID：11830581
> 
> 赞同：2
> 
> 时间：2012-08-06T14:45:20.607
> 
> 标签：cucumber, watir-webdriver, irb, selenium-webdriver

从今天开始不知何故，我的 Cucumber 代码出现以下错误 -

Selenium::WebDriver::Error::WebDriverError: unexpected response, code=502, content-type="text/html" 然后是页面的整个 HTML 文本。

这是完整的 IRB 控制台交互 -

```
C:\jruby-1.6.5\bin\jruby.exe --1.8 -e $stdout.sync=true;$stderr.sync=true;load($0=ARGV.shift) C:/jruby-1.6.5/bin/jirb - prompt simple
>> require "rubygems"
=> true

?> require "watir-webdriver"
=> true

?> @browser = Watir::Browser.new :ie
Started InternetExplorerDriver server (32-bit) 
2.25.2.0
Listening on port 5555
Selenium::WebDriver::Error::WebDriverError: unexpected response, code=502, content-type="text/html"
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>

<!-- Page creation information:
   FileName: cannotconnect.html
   Language: [my] New Language Pack
Created with: Language Pack Designer 0.0.0.8
Creation date: 9/26/2011 10:19:48 AM
-->

<!--Head-->
<head>
  <title>Can 
```

...然后是我不在这里粘贴的大型 HTML 转储

＆ 在最后 -

```
</html>
from C:/jruby-1.6.5/lib/ruby/gems/1.8/gems/selenium-webdriver-2.24.0/lib/selenium/webdriver/remote/http/common.rb:66:in `create_response'
from C:/jruby-1.6.5/lib/ruby/gems/1.8/gems/selenium-webdriver-2.24.0/lib/selenium/webdriver/remote/http/default.rb:59:in `request'
from C:/jruby-1.6.5/lib/ruby/gems/1.8/gems/selenium-webdriver-2.24.0/lib/selenium/webdriver/remote/http/common.rb:40:in `call'
from C:/jruby-1.6.5/lib/ruby/gems/1.8/gems/selenium-webdriver-2.24.0/lib/selenium/webdriver/remote/bridge.rb:598:in `raw_execute'
from C:/jruby-1.6.5/lib/ruby/gems/1.8/gems/selenium-webdriver-2.24.0/lib/selenium/webdriver/remote/bridge.rb:92:in `create_session'
from C:/jruby-1.6.5/lib/ruby/gems/1.8/gems/selenium-webdriver-2.24.0/lib/selenium/webdriver/remote/bridge.rb:68:in `initialize'
from C:/jruby-1.6.5/lib/ruby/gems/1.8/gems/selenium-webdriver-2.24.0/lib/selenium/webdriver/ie/bridge.rb:43:in `initialize'
from C:/jruby-1.6.5/lib/ruby/gems/1.8/gems/selenium-webdriver-2.24.0/lib/selenium/webdriver/common/driver.rb:35:in `for'
from C:/jruby-1.6.5/lib/ruby/gems/1.8/gems/selenium-webdriver-2.24.0/lib/selenium/webdriver.rb:65:in `for'
from C:/jruby-1.6.5/lib/ruby/gems/1.8/gems/watir-webdriver-0.5.8/lib/watir-webdriver/browser.rb:35:in `initialize'
from (irb):7:in `evaluate'
from org/jruby/RubyKernel.java:1088:in `eval'
from C:/jruby-1.6.5/lib/ruby/1.8/irb.rb:158:in `eval_input'
from C:/jruby-1.6.5/lib/ruby/1.8/irb.rb:271:in `signal_status'
from C:/jruby-1.6.5/lib/ruby/1.8/irb.rb:155:in `eval_input'
from org/jruby/RubyKernel.java:1420:in `loop'
from org/jruby/RubyKernel.java:1192:in `catch'
from C:/jruby-1.6.5/lib/ruby/1.8/irb.rb:154:in `eval_input'
from C:/jruby-1.6.5/lib/ruby/1.8/irb.rb:71:in `start'
from org/jruby/RubyKernel.java:1192:in `catch'
from C:/jruby-1.6.5/lib/ruby/1.8/irb.rb:70:in `start'
from C:/jruby-1.6.5/bin/jirb:13:in `(root)'
from org/jruby/RubyKernel.java:1063:in `load'
from -e:1:in `(root)'>> 
```

从今天早上开始突然发生这种情况，所以，我的问题是.. error code = 502 是什么意思？如果您查看此日志的顶部 - 它说

```
Selenium::WebDriver::Error::WebDriverError: unexpected response, code=502 
```

那么，这是什么意思？问题出在哪里？是代理问题还是别的什么？我尝试了不同的浏览器并遇到相同的问题？

更新 -

这是有趣的事情 - 当我将我的 SDK 从 JRuby 1.5.6 更改为 Ruby 1.87 时，它工作正常......问题只出在 JRuby 上...... Ruby SDK 工作正常......我尝试了各种版本JRuby .. 像 1.6.5 和 1.6.7 一样，它抛出了同样的错误，但是当我尝试 1.8.7 时它工作正常 - 它打开浏览器没有错误 -</p>

这是 Ruby 1.8.7 的代码

```
C:\Ruby187\bin\ruby.exe -e $stdout.sync=true;$stderr.sync=true;load($0=ARGV.shift)     C:/Ruby187/bin/irb --prompt simple
>> require "rubygems"
=> true

?> require "watir-webdriver"
=> true

?> @browser = Watir::Browser.new :ie
=> #<Watir::Browser:0x2e18b00 url="http://localhost:5555/" title="WebDriver">

?> @browser = Watir::Browser.new :ie
=> #<Watir::Browser:0x2ef07a0 url="http://localhost:5555/" title="WebDriver"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T14:51:22.987

502 是 HTTP 响应代码，表示[网关错误](http://www.checkupdown.com/status/E502.html)- 问题是由于您的请求正在通过的上游服务器之一上的配置错误或错误。

# python - python urllib2 下载大小

> ID：11830586
> 
> 赞同：1
> 
> 时间：2012-08-06T14:45:38.543
> 
> 标签：python, download, urllib2, filesize

我想用 urllib2 下载一个文件，同时我想显示一个进度条.. 但是我怎样才能得到实际下载的文件大小？

我目前的代码是

```
ul = urllib2.urlopen('www.file.com/blafoo.iso')
data = ul.get_data() 
```

或者

```
open('file.iso', 'w').write(ul.read()) 
```

如果从网站接收到整个下载，则首先将数据写入文件。如何访问下载的数据大小？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T15:46:36.557

这是一个使用了真棒[请求](http://docs.python-requests.org/en/latest/index.html)库和[进度](http://pypi.python.org/pypi/progressbar/2.2)条库的文本进度条示例：

```
import requests
import progressbar

ISO = "http://www.ubuntu.com/start-download?distro=desktop&bits=32&release=lts"
CHUNK_SIZE = 1024 * 1024 # 1MB

r = requests.get(ISO)
total_size = int(r.headers['content-length'])
pbar = progressbar.ProgressBar(maxval=total_size).start()

file_contents = ""
for chunk in r.iter_content(chunk_size=CHUNK_SIZE):
    file_contents += chunk
    pbar.update(len(file_contents)) 
```

这是我在运行时在控制台中看到的：

```
$ python requests_progress.py
 90% |############################   | 
```

*编辑：一些注释：*

*   并非所有服务器都提供内容长度标头，因此在这种情况下，您无法提供百分比
*   如果它很大，您可能不想读取内存中的整个文件。您可以将块写入文件或其他位置。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-06T15:25:23.677

您可以使用`info`urllib2 的函数返回`the meta-information of the page`，然后您可以使用它`getheaders`来访问`Content-Length`.

例如，让我们计算下载大小`Ubuntu 12.04 ISO`

```
>>> info = urllib2.urlopen('http://mirror01.th.ifl.net/releases//precise/ubuntu-12.04-desktop-i386.iso')
>>> size = int(info.info().getheaders("Content-Length")[0])
>>> size/1024/1024
701
>>> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T15:16:36.220

```
import urllib2
with open('file.iso', 'wb') as output: # Note binary mode otherwise you'll corrupt the file
    with urllib2.urlopen('www.file.com/blafoo.iso') as ul:
        CHUNK_SIZE = 8192
        bytes_read = 0
        while True:
            data = ul.read(CHUNK_SIZE)
            bytes_read += len(data) # Update progress bar with this value
            output.write(data)
            if len(data) < CHUNK_SIZE: #EOF
                break 
```

# java - 传递另一个类的方法

> ID：11830589
> 
> 赞同：1
> 
> 时间：2012-08-06T14:45:51.243
> 
> 标签：java, android

我想从一个类调用一个方法到另一个类，不知道是否可以不扩展包含该方法的类。我试图导入包，这样我认为应该允许使用该方法，因为它是一个公共方法，但这并不成功。

尝试使用此[链接](http://thedevelopersinfo.wordpress.com/2009/10/15/passing-data-between-activities-in-android/)作为参考，但我不明白（因为是android的应用程序..）

一个伪代码来举例说明

```
class 1
class 2

class 2:

import package.class 1;

class 1.this.method();  -> Error: No enclosing instance of the type class 1 in is acessible in scope 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T14:46:51.353

其他方式可能是，为其他类创建对象，然后调用该对象上的方法。像下面的东西。

```
new ClassA().yourMethod(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T14:48:20.597

您需要类 1 中的对象实例来调用该方法，或者如果它不需要实例 - 您可以将其声明为静态，然后您可以编写 1.method()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T14:50:33.653

在java中你有两种主要的方法来做到这一点：

1.  `Class2 extends Class1`然后你可以调用类 1 的所有`protected`或`public`方法。
2.  在 class2 中获取 class1 的实例：

    ```
    Class1 c1 = new Class1();
    c1.someMethod(); 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T14:50:56.237

如果您想在不创建类实例的情况下调用该方法，请执行以下操作`static`：

```
Class1
{
...
    public static void method1() {doSomething;}
}

Class2
{
    public class2()
    {
        Class1.method1(); //should be fine
    }
} 
```

编辑：如果你想在这之间传递数据`Activities`略有不同。通常你会做类似`startActivityForResult()`的事情然后检索返回值，或者`Intents`像这样使用：

[如何在 Android 应用程序的活动之间传递数据？](https://stackoverflow.com/questions/2091465/how-do-i-pass-data-between-activities-in-android)

# multithreading - Oracle 中的慢内部 N 选择

> ID：11830591
> 
> 赞同：0
> 
> 时间：2012-08-06T14:45:53.913
> 
> 标签：multithreading, performance, oracle, rownum

我最近想出了一个问题。我们想分批从 Oracle DB 中获取数据表，其中一个批次例如为 4-5000。我以前的“一般”解决方案是将选择包装成以下某种东西：

```
SELECT * FROM (
    SELECT ROWNUM AS RN, INNERSELECT.* FROM (
        select THINGS1, THINGS2 from MYTABLE)
    )
INNERSELECT WHERE ROWNUM < 4001) WHERE RN >= 3001 
```

似乎很慢，因为当 rownum 边界很高（例如 4-500.000）时，选择将花费超过 10-20 秒。随着我增加值，时间线性增加。我当然知道为什么，所以我想找到另一种解决方案来批量获取数据，但有保证的时间框架。那么我使用了这种选择：

```
SELECT * FROM (
  SELECT INNERSELECT.*, ROW_NUMBER() OVER (ORDER BY INNERSELECT.ROWID) RN FROM 
    ( select THINGS1, THINGS2 from MYTABLE)
    INNERSELECT
) WHERE RN BETWEEN 3001 AND 4000; 
```

这有点慢（获得一批测试数据需要 3-4 秒），但我可以增加批量大小而不会出现明显的性能下降，并且对于高值也是如此。**当前的问题**是我从数据库的多个线程中的多个表中进行选择，如果我只使用 3 个线程，性能就会下降到地狱（我们不是在谈论当前用于项目的 16 个）。JDBC 连接是池化的，性能下降在服务器端。我认为很明显 select 正在消耗 CPU 时间，所以我无能为力，但我希望大家对如何优化它有一些提示或技巧。

另一个问题是我们使用的工具不是特定于项目的，它必须尽可能通用，所以我不能使用复制表等。

感谢您提前回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T20:23:57.030

假设`MYTABLE`有一个数字主键`ID`，一种策略是让 16 个线程中的每一个线程执行此查询：

```
SELECT THINGS1, THINGS2
FROM   MYTABLE
WHERE  MOD(ID,15) = :THREAD_NUMBER 
```

每个线程将获得一个`:THREAD_NUMBER`从 0 到 15 的唯一值。这意味着，每个线程将获得（大约）1/16 的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T20:03:16.637

```
SELECT * FROM (
  SELECT INNERSELECT.*, ROW_NUMBER() OVER (ORDER BY INNERSELECT.ROWID) RN FROM 
    ( select THINGS1, THINGS2 from MYTABLE)
    INNERSELECT
) WHERE RN BETWEEN 3001 AND 4000; 
```

> （从 MYTABLE 中选择 THINGS1、THINGS2）

这检索了多少行？如果您可以对此设置某种限制条款 - 它可以避免系统必须执行 FULL TABLE SCAN 或 INDEX SCAN。

> ORDER BY INNERSELECT.ROWID

有必要发出这种类型的吗？特别是因为排序标准是系统生成的值。大型排序会对数据库产生巨大影响。

要记住的重要一点是在 Oracle 中使用 ROWNUM 提取记录 - 数据库将 ROWNUM 应用于记录作为*最后一*件事〜但在 ORDER BY 之前。

# php - 如何使用带括号的 php preg_replace 突出显示搜索关键字？

> ID：11830593
> 
> 赞同：1
> 
> 时间：2012-08-06T14:46:00.370
> 
> 标签：php, preg-replace

我想通过在 php 中使用 preg_replace 来突出显示我的关键字搜索文本，但问题是它不适用于括号字符串`(`和`)`

我的功能看起来像这样......

```
$text_oritinal = "25 Hours: Colour In White (CD)";

function highlight($text_search, $text_original) {
  $str = preg_replace('#'. $text_search .'#i', '<span style="background-color:#FFFF66; color:#FF0000;">\\0</span>', $text_original);
  return $str;
} 
```

全文是`"25 Hours: Colour In White (CD)"`

例如。如果我使用关键字

```
$text_search = "25 Hours: Colour In White"; 
```

它返回带有突出显示背景和文本颜色的良好替换关键字。

```
<span style="background-color:#FFFF66; color:#FF0000;">25 Hours: Colour In White</span> (CD) 
```

但！如果我使用这个关键字包含括号字符串`(`和`)`

```
$text_search = "25 Hours: Colour In White (CD)"; 
```

它不会返回替换的背景和文本颜色。

我认为它卡在括号字符串`(`和`)`

问题是如何突出显示所有匹配的文本关键字，而括号字符串`(`和`)`？

请分享你的想法。谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T14:50:12.897

你应该打电话[`preg_quote`](http://php.net/manual/en/function.preg-quote.php)：

```
function highlight($text_highlight, $text_search) {
  $str = preg_replace('#'. preg_quote($text_highlight) .'#i', '<span style="background-color:#FFFF66; color:#FF0000;">\\0</span>', $text_search);
  return $str;
} 
```

解释：

括号用于创建`submatches`. 在搜索字符串中使用它们会导致不想要的结果，因为它们是保留字符。`preg_quote`您可以通过使用which 转义正则表达式保留字符来防止此字符和其他字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T14:49:56.797

将您放入正则表达式中的文本包装在 preg_quote 中

[http://php.net/manual/en/function.preg-quote.php](http://php.net/manual/en/function.preg-quote.php)

# objective-c - 什么是 UIViewControllerWrapperView？

> ID：11830604
> 
> 赞同：7
> 
> 时间：2012-08-06T14:46:35.177
> 
> 标签：objective-c, view, uiview

我编程的时候，我从 viewController 的视图中调用了 superview 方法，并使用 NSLog("%@", [myView superview]); 我看到写道：>

这是什么 ？

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T14:47:37.383

这是框架使用的私有视图。你不应该修改它或任何东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-15T16:37:48.567

视图必须属于视图层次结构才能设置其约束（位置、大小）。UIViewControllerWrapperView 是控制器视图的父视图，它尚未作为另一个视图的子视图添加。

举个例子： UIViewController 有一个 view 属性和一个 collectionView 属性。collectionView 位于视图层次结构中的视图内。UIViewControllerWrapperView 类型的视图。

# javascript - 单击事件以排除子项（backbone.js）

> ID：11830606
> 
> 赞同：1
> 
> 时间：2012-08-06T14:46:37.590
> 
> 标签：javascript, jquery, backbone.js, underscore.js

我有 2 个元素，一个嵌套在另一个元素中。（它是一个模态对话框）。当用户点击外部元素时，`closeModal`应该触发一个功能，如果用户点击`li`内部元素（其子元素）内的一个，则`like`应该触发另一个功能。

**问题：**我查看了其他[解决方案](https://stackoverflow.com/questions/11123799/trigger-event-on-parent-click-but-not-on-children)并尝试应用到我的backbone.js 视图，但它似乎不起作用。有什么不同的地方需要改变吗？

**看法**

```
ModalShowItemView = Backbone.View.extend({
    el: '#modal_show_item',

    events: {
        'click div#modal': 'closeModal',
        'click li#like' : 'like'
    },

    initialize: function() {
        this.render();
        this.clickHandler();
    },

    render: function() {
        $(this.el).show().append( this.template( this.model.toJSON() ) );
    },

    clickHandler: function() {
        var self = this;
        $(this.el).click(function(e) {
            if(e.target == self) {
                self.closeModal();
            }
        });
    },

    closeModal: function() {
        console.log('closemodal');
    },

    like: function() {
        console.log('like');
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T14:58:29.670

您提到其他[解决方案](https://stackoverflow.com/questions/11123799/trigger-event-on-parent-click-but-not-on-children)可能是您需要做的，除了在事件对象本身上执行`.stopPropagation()`as in `event.stopPropagation()`。我不知道通过`delegateEvents`get 绑定的事件处理程序传递了任何相关的事件对象，但它没有记录在帮助页面 AFAIK 上。

# java - 如何创建一个条件，其中参数是表上集合字段的成员？

> ID：11830611
> 
> 赞同：0
> 
> 时间：2012-08-06T14:46:49.003
> 
> 标签：java, hibernate, criteria, hibernate-criteria

我有一个具有以下结构的类：

```
public class Machine {
    private Set<Line> lines;
} 
```

现在我想要创建一个带有 Criteria 的查询，我可以在其中获取包含特定行的所有机器。

我注意到 Criteria 有一个 Restrictions.in() 但它检查表的字段是否在 Collection 中，我想反过来做。

谢谢你帮助我，干杯，Stef

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T15:02:52.693

遵循 Hibernate 文档应该会有所帮助： [http ://docs.jboss.org/hibernate/orm/4.0/manual/en-US/html/querycriteria.html#querycriteria-associations](http://docs.jboss.org/hibernate/orm/4.0/manual/en-US/html/querycriteria.html#querycriteria-associations)

基本上，您需要创建一个引用`lines`Machine 类元素的第二个标准。IE

```
Criteria machineCriteria = session.createCriteria(Machine.class);
Criteria lineCriteria = machineCriteria.createCriteria("lines");
lineCriteria.add(Restrictions.eq("fieldNameOfLineClass", valueOfFieldNameOfLineClass);
machineCriteria.list(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T22:01:14.997

我发现这种语法更有意义也更紧凑。假设您手中有 Line 实例的 id，这将得到您想要的。

```
 // we have a Long lineId
    Criteria crit = session.createCriteria(Machine.class)
        .createAlias("lines", "line")
        .add(Restrictions.eq("line.id", lineId); 
```

# xml - 在 xPath/xQuery 中使用标记化

> ID：11830615
> 
> 赞同：0
> 
> 时间：2012-08-06T14:47:03.317
> 
> 标签：xml, xpath, xquery, tokenize, line-breaks

我正在使用这个 xpath 表达式`//*[@id='info_box']/p[contains(., 'Drafted')]`作为输出： http: [//pastebin.com/kRmCadiw](http://pastebin.com/kRmCadiw)（原始输出与原始格式）

我想要的是获取最后一个之后的所有文本`<br>`，所以我使用了：`data(tokenize(//*[@id='info_box']/p[contains(., 'Drafted')], '\s*<br\s*/?>\s*')[last()])`但它仍然在`<p>`(count(...)=1) 中给出全文，即使尝试使用简单的 '
' ......我不明白少了什么东西！

预期的输出是：`Drafted by the San Francisco 49ers in the 2nd round (33rd overall) of the 2005 NFL Draft.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T15:53:54.267

搜索最后一个`<br/>`，然后使用`following-sibling`轴步骤查找其后的所有元素。由于您还需要不在元素内的文本节点，请使用 node test `node()`。因为您只想要数据而不是标记，所以添加对`data()`.

```
/p/br[last()]/following-sibling::node()/data() 
```

*（由于您没有提供任何示例数据，我从您发布到 pastebin 的中间输出开始。请自己在开头添加查询的第一步。）*

# bing - 尝试使用 SDS 加载数据源时收到 404

> ID：11830620
> 
> 赞同：0
> 
> 时间：2012-08-06T14:47:09.520
> 
> 标签：bing, bing-api, bing-maps

当尝试通过[http://msdn.microsoft.com/en-us/library/gg585130](http://msdn.microsoft.com/en-us/library/gg585130)中的说明触发数据加载时，我遇到了 404 响应。我已经读了好几遍了，我不断地回到同一个问题上在下面制作...减去我的 Api Key。

[http://spatial.virtualearth.net/REST/v1/Dataflows/LoadDataSource?dataSourceName=StoreDetail&loadOperation=complete&dataLocation=http%3a%2f%2finternaldevelopment.blob.core.windows.net%2fstoredata%2fDSFStoreData.xml&input=xml&output=xml&key=](http://spatial.virtualearth.net/REST/v1/Dataflows/LoadDataSource?dataSourceName=StoreDetail&loadOperation=complete&dataLocation=http%3a%2f%2finternaldevelopment.blob.core.windows.net%2fstoredata%2fDSFStoreData.xml&input=xml&output=xml&key=)

任何可以提供的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:12:06.537

我遇到的问题与我在休息呼叫期间未能将以下值包含在请求标头中的问题有关。

期望：100-继续

连接：保持活动

# c# - MVC 区域和路由问题

> ID：11830622
> 
> 赞同：3
> 
> 时间：2012-08-06T14:47:17.663
> 
> 标签：c#, asp.net-mvc, routing, url-routing, asp.net-mvc-areas

我`Areas`在 MVC 3 中正常工作时遇到了一些问题。我设置了以下文件夹结构和`Admin`区域：

![在此处输入图像描述](../Images/9c8b32770b445be8fe6ffcb6aa920ac3.png)

我正在尝试从管理页面（索引）导航到该`Admin`区域中的其他视图页面，例如`Admin/Floor/Create`等等......但是我`The resource cannot be found`尝试过的每个 url 组合都会出错，例如：

*   @Html.ActionLink("floors", "Index", "Floor", new { area = "Admin" }, null)
*   /楼层/索引/
*   /管理员/楼层/索引/

这些都不起作用。我设法使用第`ActionLink`一个从区域外部链接到管理索引页面，但在这里没有用。

区域注册如下所示：

```
context.MapRoute(
            "Admin_default",
            "Admin/{controller}/{action}/{id}",
            new { action = "Index", id = UrlParameter.Optional }
        ); 
```

任何人都可以提供一些帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T14:57:21.303

问题在于您的路由。您需要将默认控制器设置为`AdminController`：

```
context.MapRoute( 
    "Admin_default", 
    "Admin/{controller}/{action}/{id}", 
    new { controller = "Admin", action = "Index", id = UrlParameter.Optional } 
); 
```

如果你不指定这个，MVC 并不完全知道你在寻找什么，并且实际上希望你导航到`/admin/admin`以显示初始视图。所以像我上面提到的那样改变路由，然后使用这个操作链接去`FloorController.Create()`：

```
@Html.ActionLink("floors", "create", "floor", new { area = "admin" }, null) 
```

稍微扩展一下，通过这种方式设置路由，您的 URL 将如下所示：

```
/admin // Executes AdminController.Index()
/admin/floor // Executes FloorController.Index() 
```

## 更新

![区域布局](../Images/8acb188e354e9858bed134a95d710285.png)

下载了 Maciej Rogoziński 的项目后，这给了我与您的项目当前相同的问题。默认操作的链接是 linking to `/admin/admin/`，正如我之前提到的，这是您的项目正在寻找的，因为没有为区域路由指定默认控制器（这也适用于 Maciej 的项目）。指定默认控制器允许您导航到`/admin`，这会导致`AdminController.Index()`被调用。如果不指定该控制器，您只能从 routing to 检索此视图`/admin/admin`，这也是 Maciej 的应用程序正在执行的操作。

# javascript - 包括不尊重闭包使用的外部javascript

> ID：11830628
> 
> 赞同：1
> 
> 时间：2012-08-06T14:47:40.457
> 
> 标签：javascript, jquery, drupal, closures

我必须包含一个外部 javascript 文件作为我正在处理的 Drupal 项目的一部分。不幸的是，这个外部文件没有正确使用闭包，例如：

```
(function($) {
    function test() {...}
})(jQuery);
function test2() {
    console.log($('#xyz').val());
} 
```

每当执行 test2() 时，都会导致“$ is undefined”错误。

我知道 Drupal 明智地使用闭包来允许库的和谐共存，这非常有用，但在这种情况下，让负责所述外部 JS 文件的团队进行必要的更改将是一场噩梦（并且还将涉及试图向负责的“专家”解释）。

有什么方法可以让这个外部文件访问使用 $ 作为指向 jQuery 的指针？理想情况下，我想要一些不涉及大量解决方法的解决方案，但仍然可以使用外部版本。

如果做不到这一点，我将只获取一个本地副本，并进行相应的修复。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T14:53:39.803

只需分配一个全局。

```
window.$ = jQuery 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T14:55:48.947

您要么需要复制并修改它以适应，要么使用 PHP 获取文件并输出它，例如，如果您将 javascript src 指向本地 php 文件，则在该 php 文件中您可以执行类似的操作

```
$js = file_get_contents("externaljsfile");

echo ";(function($) {";

echo $js;

echo "})(jQuery);"; 
```

我听说过一种使用导入的 javascript 可能有效的方法（javascript 宏？），但是我从来没有读过它们（如果它们甚至存在的话）并且它们不会被足够的浏览器支持成为无论如何可行的解决方案

# multi-touch - OSMdroid 长按监听器/双击

> ID：11830632
> 
> 赞同：1
> 
> 时间：2012-08-06T14:47:51.073
> 
> 标签：multi-touch, osmdroid, onlongclicklistener

我目前正在使用 OSMdroid。
我希望能够（使用触摸屏）在我的地图上标记某些点。
第一种选择是使用长按。问题是我的系统将滚动识别为长按。第二个选项是使用双标签。这具有更改缩放级别的效果。

我希望能够区分长按和滚动。有没有一种简单的方法可以做到这一点？

以下[链接中有一些建议：](https://stackoverflow.com/questions/1678493/android-maps-how-to-long-click-a-map)
但是，我不确定这些建议是否可以用 OSMdroid 实现。

提前致谢！

爱丽儿

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:21:54.807

当我想在 OsmMap 中添加一些触摸功能时，我还发现已经使用了点击和滚动等。

所以我让我所有的手势都需要用三个手指长按才能开始。手势是用三个手指长按然后向左或向右滑动或用三个手指长按然后向上弹起。这样我的手势就不会干扰任何正常的地图手势。

在检测到三指长按后，我的应用程序还必须消耗触摸事件。否则，osm 手势和我的手势会竞争导致奇怪的滚动和缩放。

这需要添加一个特殊的`Overlay`和这样的代码：

```
@Override
public boolean onTouchEvent(MotionEvent event, MapView mapView)
{
    boolean detected = false;
    if (myGestureDetector.onTouchEvent(event))
    {
        detected = true;
    }

    if (myGestureDetector.isTouchEventActive())
    {
        Log.d(D_LOG, "TOUCH EVENT ACTIVE DRAIN IT");
        detected = true;
    }

    return detected;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-03T09:49:27.890

请注意，此方法仅允许单个触摸事件。

您的活动需要`implements MapEventsReceiver`.

然后，您需要将 A 添加`MapEventsOverlay`到地图中：

```
//Handling Map events
MapEventsOverlay mapEventsOverlay = new MapEventsOverlay(this, this);
map.getOverlays().add(0, mapEventsOverlay); //inserted at the "bottom" of all overlays 
```

[记录在 OSMDroidBonus 包教程中](https://github.com/MKergall/osmbonuspack/blob/master/OSMBonusPackTuto/src/main/java/com/example/osmbonuspacktuto/MainActivity.java)

# c++ - 如何在 vc++ 中执行从安装目录读取数据的应用程序

> ID：11830633
> 
> 赞同：0
> 
> 时间：2012-08-06T14:47:51.510
> 
> 标签：c++, winapi

如何从 C++ 控制台应用程序执行 .exe。我尝试了以下方法都没有奏效。

我想运行我之前创建的应用程序“Radio.exe”。这个应用程序在启动时读取一个 xml 文件，如果我手动运行这个应用程序它工作正常，但是如果通过控制台应用程序“Radio.exe”运行它找不到 xml 文件？

```
void execute( char* path)
{
    // cant find xml ?
    ShellExecuteA( NULL, NULL, path, NULL, NULL, SW_SHOW );

    // cant find xml ?
    ShellExecute(NULL, NULL, path, NULL, NULL, SW_SHOWNORMAL);

    // and also cant find xml ?
    SHELLEXECUTEINFO rSEI ={0};
    rSEI.cbSize=sizeof( rSEI );
    rSEI.lpVerb= NULL;
    rSEI.lpFile= "C:\\Users\\me\\Documents\\Radio.exe"; //  = path
    rSEI.lpParameters= 0;
    rSEI.nShow = SW_NORMAL;
    rSEI.fMask = SEE_MASK_NOCLOSEPROCESS;
    ShellExecuteEx( &rSEI );
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T14:50:04.203

您需要设置工作目录 lpDirectory：

[http://msdn.microsoft.com/en-us/library/windows/desktop/bb762153(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762153(v=vs.85).aspx)

您可能也应该将其设置为相对路径，因此您不必提供绝对路径。

例子：

*   C:\项目\电台
*   C:\projects\Radio\radio.exe
*   C:\projects\Radio\radio.xml

假设生成 radio.exe 的程序位于项目目录中。您可以提供 Radio 目录作为相对路径。

# magento - 在我的主页中显示所有产品 - magento

> ID：11830635
> 
> 赞同：0
> 
> 时间：2012-08-06T14:47:51.980
> 
> 标签：magento

我正在尝试从一开始就构建一个模板。我已经准备好了所有东西，现在我有一个主页，我想在其中以网格形式显示所有可用的产品。所以我从布局中渲染了 list.phtml。列表.phtml：

```
<?php
$_productCollection=$this->getLoadedProductCollection();

$_helper = $this->helper('catalog/output');

?>
<?php if(!$_productCollection->count()): ?>
<p class="note-msg"><?php echo $this->__('There are no products matching the selection.') ?></p>
<?php else: ?>
<div class="category-products">

<?php // Grid Mode ?>

<?php $_collectionSize = $_productCollection->count() ?>
<?php $_columnCount = $this->getColumnCount(); ?>
<?php $i=0; foreach ($_productCollection as $_product): ?>
    <?php if ($i++%$_columnCount==0): ?>
        <ul class="products-grid">
    <?php endif ?>

            <li>
                productsample
            </li>

    <?php if ($i%$_columnCount==0 || $i==$_collectionSize): ?>
        </ul>
    <?php endif ?>

<?php endforeach ?>
</div>
<?php endif; ?> 
```

这显示了产品的次数，productsample 这个词，所以我认为我正在加载所有产品，但我的问题是我不知道如何显示它们（照片、链接、添加到购物车、价格、名称......）谢谢对所有人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T04:48:26.427

如果您使用 cms 主页，则只需将此代码`{{block type="catalog/product_list" category_id="your cat id" template="catalog/product/list.phtml"}}`分配给该类别的所有产品。或者您可以直接使用 list.phtml 文件代码来列出所有放在代码下面的产品。

```
 $_productCollection = Mage::getModel('catalog/product')->getCollection()->addAttributeToSelect('*')->addAttributeToFilter('visibility', 4)->addAttributeToFilter('status', 1)->load(); 
```

只需放置此代码而不是此代码`$_productCollection=$this->getLoadedProductCollection();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T15:25:02.320

当我使用 getdata 我得到这个：

数组（11）{[“entity_id”]=>字符串（1）“2”[“entity_type_id”]=>字符串（1）“4”[“attribute_set_id”]=>字符串（2）“10”[“type_id "]=> string(6) "simple" ["sku"]=> string(10) "1343918767" ["has_options"]=> string(1) "0" ["required_options"]=> string(1) “0”[“created_at”]=>字符串（19）“2012-08-02 14:46:29”[“updated_at”]=>字符串（19）“2012-08-02 17:09:43”[ "is_salable"]=> string(1) "1" ["stock_item"]=> object(Varien_Object)#336 (5) { ["_data":protected]=> array(1) { ["is_in_stock"]= > string(1) "1" } ["_hasDataChanges":protected]=> bool(false) ["_origData":protected]=> NULL ["_idFieldName":protected]=> NULL ["_isDeleted":protected]=> bool(false) } }

我需要名字，价格...

我已经替换了这个：$_productCollection=$this->getLoadedProductCollection(); 作为交换： $_productCollection=Mage::getModel('catalog/product')->getCollection();

因为如果我使用第一个，它会告诉我实际类别中没有产品。

然后我在 foreach 中替换了默认 list.phtm 中的 foreach 中的代码，但它没有向我显示产品。产品 img 中存在某种错误，因为它在第一个产品中停止，在其图像中。这是代码：

代码：

```
<?php
//     $_productCollection=$this->getLoadedProductCollection();
$_productCollection=Mage::getModel('catalog/product')->getCollection();

$_helper = $this->helper('catalog/output');

?>
<?php if(!$_productCollection->count()): ?>
<p class="note-msg"><?php echo $this->__('There are no products matching the selection.') ?></p>
<?php else: ?>
<div class="category-products">

<?php // Grid Mode ?>

<?php $_collectionSize = $_productCollection->count() ?>
<?php $_columnCount = $this->getColumnCount(); ?>
<?php $i=0; foreach ($_productCollection as $_product): ?>
    <?php if ($i++%$_columnCount==0): ?>
        <ul class="products-grid">
    <?php endif ?>

        <li class="item<?php if(($i-1)%$_columnCount==0): ?> first<?php elseif($i%$_columnCount==0): ?> last<?php endif; ?>">
            <a href="<?php echo $_product->getProductUrl() ?>" class="product-image"><img src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(135); ?>" width="135" height="135" /></a>
            <h2 class="product-name"><a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->stripTags($_product->getName(), null, true) ?>"><?php echo $_helper->productAttribute($_product, $_product->getName(), 'name') ?></a></h2>
            <?php if($_product->getRatingSummary()): ?>
            <?php echo $this->getReviewsSummaryHtml($_product, 'short') ?>
            <?php endif; ?>
            <?php echo $this->getPriceHtml($_product, true) ?>
            <div class="actions">
                <?php if($_product->isSaleable()): ?>
                    <button type="button" title="<?php echo $this->__('Add to Cart') ?>" class="button btn-cart" onclick="setLocation('<?php echo $this->getAddToCartUrl($_product) ?>')"><span><span><?php echo $this->__('Add to Cart') ?></span></span></button>
                <?php else: ?>
                    <p class="availability out-of-stock"><span><?php echo $this->__('Out of stock') ?></span></p>
                <?php endif; ?>
                <ul class="add-to-links">
                    <?php if ($this->helper('wishlist')->isAllow()) : ?>
                        <li><a href="<?php echo $this->helper('wishlist')->getAddUrl($_product) ?>" class="link-wishlist"><?php echo $this->__('Add to Wishlist') ?></a></li>
                    <?php endif; ?>
                    <?php if($_compareUrl=$this->getAddToCompareUrl($_product)): ?>
                        <li><span class="separator">|</span> <a href="<?php echo $_compareUrl ?>" class="link-compare"><?php echo $this->__('Add to Compare') ?></a></li>
                    <?php endif; ?>
                </ul>
            </div>
        </li>

    <?php if ($i%$_columnCount==0 || $i==$_collectionSize): ?>
        </ul>
    <?php endif ?>

<?php endforeach ?>
</div>
<?php endif; ?> 
```

第一个 <a> 在 <li> 里面，它的 img 不工作

# osgi - 如何运行Apache Sling的46行博客教程？

> ID：11830641
> 
> 赞同：4
> 
> 时间：2012-08-06T14:48:28.307
> 
> 标签：osgi, sling

我正在尝试阅读 Apache Sling 的[本教程](http://sling.apache.org/site/46-line-blog.html)，但我一开始就卡住了。我无法在浏览器中显示博客表单。相反，我收到以下消息：

```
Resource dumped by HtmlRendererServlet

Resource path: /content/blog/*

Resource metadata: {sling.resolutionPathInfo=.html, sling.resolutionPath=/content/blog/*}

Resource type: sling:syntheticStarResource

Resource super type: -
Resource Value: 
```

我在[README](http://svn.apache.org/repos/asf/sling/trunk/samples/espblog/README.txt)中看到这可能是由于`org.apache.sling.samples.path-based.rtp`未运行造成的。但是，我确保捆绑包在 Felix 控制台中处于活动状态。（我尝试从控制台的 OSGi 存储库选项卡安装，然后通过下载 jar 并将其放在 sling/startup/15 下，但它没有改变任何东西）

我想知道我是否应该采取额外的配置步骤？

请注意，我是 OSGi 和 Sling 的新手，所以这可能是初学者的错误。

编辑：我在组件选项卡中的 Felix 控制台中注意到`org.apache.sling.samples.pathbasedrtp.DefaultResourceTypeProvider`状态为“不满意”。会不会有关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T17:22:55.893

确实存在一个问题（通过单击 处的捆绑包名称可见`/system/console/bundles`）阻止`o.a.s.samples.path-based.rtp`捆绑包从最新版本的 Sling 启动。

我刚刚修复了它（[https://issues.apache.org/jira/browse/SLING-2557](https://issues.apache.org/jira/browse/SLING-2557)），请再试一次！

# ruby-on-rails - 在 Rails 中建模图形的模式

> ID：11830645
> 
> 赞同：2
> 
> 时间：2012-08-06T14:48:33.887
> 
> 标签：ruby-on-rails, ruby, activerecord, tree

我有一个数据结构，我希望在 Rails 中建模和持久化。它是自引用的，看起来很像一棵分层树，但是每个节点可以有多个父节点和多个子节点，而不是只有一个父节点。

它可能看起来像这样（所有节点都是相同的模型）：

```
 Foo            Bonk
                     |    |          |    |
                    Bar   Baz      Foo   Bork 
                   |   |
                 Baz   Bork 
```

其中所有具有相同名称的节点实际上是同一个节点。

我还想找到包含某种“成分”的模型的所有实例。

我发现的最接近的是[https://github.com/mceachen/closure_tree](https://github.com/mceachen/closure_tree)但据我所知，每个节点只有一个父节点。

理想情况下，我正在寻找一种使用 ActiveRecord 实现的模式，但会考虑任何解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T01:49:35.990

对于每个只有一个父节点的节点，这是一个很好的方法：

```
has_many :children, :class_name => "Node", :foreign_key => "parent_id"
belongs_to :parent, :class_name => "Node", :foreign_key => "parent_id" 
```

如您所知，它是一个 ActiveRecord 模型，其中一个名为 parent_id 的字段指向父节点。

对于多个父级，这可以扩展为创建多对多自引用连接。

```
has_and_belongs_to_many :children, :class_name => "Node",
    :foreign_key => "node_id",
    :association_foreign_key => "children_id",
    :join_table => "children_nodes" 
```

创建连接表，现在您应该能够为父母做 Node.children 和 Node.nodes。注意：第二部分尚未测试，但如果它不起作用，请告诉我。

# c# - 如何解码 UTF8 字节？

> ID：11830647
> 
> 赞同：2
> 
> 时间：2012-08-06T14:48:35.927
> 
> 标签：c#, encoding

如何在 C# 中解码字符串中的 UTF8 字节？

示例：解码此输入：

```
"Poluci%C3%B3n" 
```

要输出这个：

```
"Polución" 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-06T14:51:46.917

这种编码似乎是 URL 编码（不是 UTF-8 编码）。您可以在 .NET 中使用多种不同的方法对其进行取消编码：

```
HttpUtility.UrlDecode("Poluci%C3%B3n"); // returns "Polución"
Uri.UnescapeDataString("Poluci%C3%B3n"); // returns "Polución" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T14:52:11.050

试试这个：

```
Uri.UnescapeDataString("Poluci%C3%B3n") 
```

不过，这个问题与 UTF8 无关。它只是 URL 编码的。

# javascript - 需要帮助了解如何在 javascript 中定义静态类和可实例化类

> ID：11830651
> 
> 赞同：0
> 
> 时间：2012-08-06T14:48:56.567
> 
> 标签：javascript

当前损坏的代码：http: [//jsfiddle.net/9F52n/2/](http://jsfiddle.net/9F52n/2/)

我正在尝试做的事情：学习如何定义一个行为类似于类的对象/函数，并能够定义静态和可实例化的子类（下面我的示例中的单例）。

目前，我下面的代码并不能很好地工作。但是，如果删除了可实例化类和静态类，您会发现我已经掌握了创建类的基础知识。

所以，我想我的问题是：用我定义 TBR 的方式定义嵌套类（单例或其他）的正确/最语义化的方式是什么？`(function(){...})(window)`

```
var TBR = (function() {
    // define local copy of taco bell run
    var TBR = function() {
        return new TBR.fn.init();
    },
        message = "hello world!";

    TBR.fn = TBR.prototype = {
        constructor: TBR,
        init: function() {
            console.log("From TBR Constructor: " + message);
        }
    }

    var InstantiatableClass = function() {
        return new TBR.InstantiatableClass, fn.init();
    }

   InstantiatableClass.fn =InstantiatableClass.prototype = {
        constructor: TBR.InstantiatableClass,
        init: function() {
            console.log("from InstantiatableClass: " + message);
        }
    }

    this.staticClass = function() {
        var subMessage = "little world";
        init = function() {
            console.log("from staticClass: " + subMessage);
        }
    }
    // expose TBR to the window object
    window.TBR = TBR;

})(window); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T14:59:57.117

```
var InstantiatableClass = function() {
    return new TBR.InstantiatableClass, fn.init();
}

InstantiatableClass.fn =InstantiatableClass.prototype ... 
```

这不起作用。您的`InstantiatableClass`局部变量返回对象，原型将不会应用于它们。此外，`TBR.InstantiatableClass`无处定义。如果这是你想要的，你需要使用

```
function InstantiatableClass() {
    // common constructor things
}
TBR.InstantiatableClass = InstantiatableClass; // assign a "static" property 
```

此外，您不应该 [需要] 覆盖原型。当然，唯一的区别是它`constructor`现在是可枚举的（只要它没有被遗忘），但以下内容会更清晰：

```
InstantiatableClass.fn = InstantiatableClass.prototype; // shortcut
InstantiatableClass.fn.init = function() { … }; 
```

* * *

哦，你想要像 jQuery 一样工作的东西。恕我直言，您不应该使构造函数 ( `init`) 成为原型的属性——这很奇怪，我看不出这样做的理由。我建议这段代码：

```
window.TBR = (function() {
    function TbrConstructor() {
        …
    }
    function InstantiableConstructor() {
        …
    }

    // Now, the creator functions:
    function TBR() { return new TbrConstructor; }
    function Instantiable() { return new InstantiableConstructor; }

    // Now, overwrite the "prototype" properties - this is needed for
    // (new TbrConstructor) instanceof TBR === true
    // and also create those fn shortcuts
    TBR.fn = TBR.prototype = TbrConstructor.prototype;
    Instantiable.fn = Instantiable.prototype = InstantiableConstructor.prototype;

    // we might overwrite the "constructor" properties like
    TBR.fn.constructor = TBR;
    // but I don't see much sense in that - they also have no semantic value

    // At last, make Instantiable a property on the TBR function object:
    TBR.Instantiable = Instantiable;
    // and then only
    return TBR;
})();

// Usage

TBR(); // returns a TbrConstructor instance
TBR.Instantiable(); // returns a InstantiableConstructor instance 
```

# objective-c - 在主线程中进行大量处理之前的 VoiceOver

> ID：11830652
> 
> 赞同：0
> 
> 时间：2012-08-06T14:49:00.020
> 
> 标签：objective-c, ios, accessibility, voiceover

我想完成以下效果：

*   用户按下按钮；
*   VoiceOver 大声说出“处理”句子；
*   执行一些繁重的处理。

一切都在主线程中运行，我不希望 GUI 在那个时候能够更新。为此，我希望该方法在繁重的处理结束之前不要返回。我有以下代码：

```
UIAccessibilityPostNotification(UIAccessibilityAnnouncementNotification,
    @"Processing");
heavyProcessing(); 
```

问题是，VoiceOver 在完成繁重的处理后会说出信息。

如何让 VoiceOver 在方法完成并将控制权返回给主循环之前“异步”说出信息？如有必要，繁重的处理可能会在另一个线程中运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T15:01:36.190

那是因为，如果主线程正在进行繁重的处理，它就不能做任何其他事情，这将包括发起语音请求。

事实上，主线程上发生了很多事情，这意味着您永远不想对其进行冗长的处理。例如，您的应用程序无法响应来自操作系统的通知，例如内存不足警告。如果是这种情况，iOS 可能会认为您的应用程序已挂起而将其杀死。

您需要做的是在后台线程上运行繁重的处理 - 我建议使用 NSOperationQueue - 并在它发生时禁用您不想工作的控件。

# c# - GetChanges() 或 RowState 获取数据表的所有更改？

> ID：11830655
> 
> 赞同：7
> 
> 时间：2012-08-06T14:49:14.283
> 
> 标签：c#, winforms

在**Winforms**应用程序中，我必须**记录 datagrid (datatable) 中的所有更改**。换句话说，我想获得所有更改，因为它已被加载。为此，我想使用**Datatable.GetChanges()**。我知道，使用**GetChanges()**我得到一个数据表，其中包含原始 DataSet 中所有行的副本，这些行有待处理的更改。

我现在的问题是，是否也有可能获得**有关更改的更多附加信息**。例如，我想知道**一行**是否已**添加**或**删除**或仅已**更新**。如果一行已**更新**，我还想知道哪些单元格已更新？有没有办法快速获取所有这些信息，还是我必须逐行与**原始数据表进行****深度比较**？

 **还是使用**RowState**来获取所有更改更好？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-06T15:10:13.387

对于行添加/删除检查[RowState](http://msdn.microsoft.com/en-us/library/system.data.datarowstate)

对于行中的每个项目（又名单元格）检查[DataRowVersion](http://msdn.microsoft.com/en-us/library/ms135373)

```
 foreach (DataRow dr in dt.Rows)
        {
            if (dr.RowState == DataRowState.Modified)
            {
                var changedCols = new List<DataColumn>();
                foreach (DataColumn dc in dt.Columns)
                {
                    if (!dr[dc, DataRowVersion.Original].Equals(
                         dr[dc, DataRowVersion.Current])) /* skipped Proposed as indicated by a commenter */
                    {
                        changedCols.Add(dc);
                    }
                }
                // now handle the changedCols list
            }
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T14:54:44.420

生成的 DataTable 中的每个`DataRow`都有其[`RowState`](http://msdn.microsoft.com/en-us/library/system.data.datarow.rowstate.aspx)属性集，它告诉您该行是否被添加、删除或更新。

但是，我不相信单个单元格提供更新信息 - 它仅按行跟踪。**

# python - 数据如何在多个修饰函数调用中保持持久性？

> ID：11830656
> 
> 赞同：6
> 
> 时间：2012-08-06T14:49:13.830
> 
> 标签：python, decorator, memoization, internals

以下函数旨在用作存储已计算值的结果的装饰器。如果参数之前已经计算过，该函数将返回存储在`cache`字典中的值：

```
def cached(f):
    f.cache = {}
    def _cachedf(*args):
        if args not in f.cache:
            f.cache[args] = f(*args)

        return f.cache[args]

    return _cachedf 
```

我意识到（错误地）`cache`不需要是函数对象的属性。事实上，以下代码也可以工作：

```
def cached(f):
    cache = {}   # <---- not an attribute this time!
    def _cachedf(*args):
        if args not in cache:
            cache[args] = f(*args)

        return cache[args]
    return _cachedf 
```

我很难理解`cache`对象如何在多个调用中保持不变。我尝试多次调用多个缓存函数，但找不到任何冲突或问题。

任何人都可以帮我理解`cache`即使在`_cachedf`函数返回后变量仍然存在吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-06T14:52:02.687

您在这里创建了一个[*闭包*](http://en.wikipedia.org/wiki/Closure_%28computer_science%29)：该函数从封闭范围内`_cachedf()`关闭变量。只要函数对象存在，`cache`它就会一直存在。`cache`

**编辑**：也许我应该添加一些关于它在 Python 中如何工作以及 CPython 如何实现它的更多细节。

让我们看一个更简单的例子：

```
def f():
    a = []
    def g():
        a.append(1)
        return len(a)
    return g 
```

交互式解释器中的示例用法

```
>>> h = f()
>>> h()
1
>>> h()
2
>>> h()
3 
```

在编译包含该函数的模块期间`f()`，编译器看到该函数`g()`引用`a`了封闭范围内的名称，并将该外部引用存储在与该函数对应的代码对象中`f()`（具体而言，它会将名称添加`a`到 中`f.__code__.co_cellvars`）。

那么当函数`f()`被调用时会发生什么？第一行创建一个新的列表对象并将其绑定到 name `a`。下一行创建一个新的函数对象（使用在模块编译期间创建的代码对象）并将其绑定到 name `g`。`g()`此时不执行主体，最后返回函数对象。

由于 的代码对象`f()`有一个注释，该名称`a`是由本地函数引用的，因此在输入时会为该名称创建一个“单元格” `f()`。此单元格包含对绑定到的实际列表对象的引用`a`，并且该函数`g()`获取对此单元格的引用。这样，即使函数`f()`退出，列表对象和单元格也会保持活动状态。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T15:13:41.010

> 任何人都可以帮助我了解即使在 _cachedf 函数返回后缓存变量仍然存在吗？

它与 Python 的引用计数垃圾收集器有关。该`cache`变量将被保存且可访问，因为函数`_cachedf`具有对它的引用，并且调用者`cached`具有对它的引用。当您再次调用该函数时，您仍在使用最初创建的同一函数对象，因此您仍然可以访问缓存。

在所有对它的引用都被销毁之前，您不会丢失缓存。您可以使用`del`运算符来执行此操作。

例如：

```
>>> import time
>>> def cached(f):
...     cache = {}   # <---- not an attribute this time!
...     def _cachedf(*args):
...         if args not in cache:
...             cache[args] = f(*args)
...         return cache[args]
...     return _cachedf
...     
... 
>>> def foo(duration):
...     time.sleep(duration)
...     return True
...     
... 
>>> bob = cached(foo)
>>> bob(2) # Takes two seconds
True
>>> bob(2) # returns instantly
True
>>> del bob # Deletes reference to bob (aka _cachedf) which holds ref to cache
>>> bob = cached(foo)
>>> bob(2) # takes two seconds
True
>>> 
```

作为记录，您想要实现的称为[Memoization](http://en.wikipedia.org/wiki/Memoization)，装饰[器模式页面](http://wiki.python.org/moin/PythonDecoratorLibrary#Memoize)提供了一个更完整的记忆装饰器，它做同样的事情，但使用了一个装饰器**类**。您的代码和基于类的装饰器本质上是相同的，基于类的装饰器在存储之前会检查哈希能力。

* * *

**编辑（2017-02-02）**：@SiminJie 评论`cached(foo)(2)`总是会导致延迟。

这是因为`cached(foo)`返回一个带有新缓存的新函数。调用时`cached(foo)(2)`，会创建一个新的（空）缓存，然后立即调用缓存的函数。

由于缓存为空且找不到值，因此它重新运行底层函数。相反，做`cached_foo = cached(foo)`然后`cached_foo(2)`多次调用。这只会导致第一次通话的延迟。此外，如果用作装饰器，它将按预期工作：

```
@cached
def my_long_function(arg1, arg2):
  return long_operation(arg1,arg2)

my_long_function(1,2) # incurs delay
my_long_function(1,2) # doesn't 
```

如果您不熟悉装饰器，请查看[此答案](https://stackoverflow.com/questions/739654/how-to-make-a-chain-of-function-decorators-in-python/1594484#1594484)以了解上述代码的含义。

# automation - 跨浏览器测试——如何保证测试数据的唯一性？

> ID：11830658
> 
> 赞同：0
> 
> 时间：2012-08-06T14:49:32.913
> 
> 标签：automation, unique, test-data

我的团队是自动化的新手，并计划自动化跨浏览器测试。我们不确定的事情，如何确保每个浏览器测试的测试数据都是唯一的？由于某些业务规则，测试数据需要是唯一的。

我有几个选择：

1.  按顺序运行测试。每次测试完成后恢复数据库。每次测试的测试报告将单独保存。如果出现任何错误，我们必须自己重现错误（数据已被重置）。

2.  同时/按顺序运行测试。为每个测试数据添加前缀，以唯一标识不同浏览器测试的测试数据。例如，FF_User1、IE_User1

3.  同时/按顺序运行测试。将设置几个测试节点并连接到不同的数据库。每个测试节点将使用不同的浏览器运行测试，测试数据将存储在不同的数据库中。

任何人都可以启发我使用哪种方法最好？或任何其他建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T05:13:48.020

您需要在所有浏览器中运行每个测试吗？否则，混合搭配 - 选择您想在哪个浏览器中运行哪些测试。您可以像上面的选项 2 一样组织您的测试数据。

根据您使用的自动化工具，执行期间使用的数据可以组织为迭代：

```
Browser  |  Username  |  VerifyText(example)    #headers
FF       |  FF_User1  |  User FF_User1 successfully logged in
IE       |  IE_User1  |  User IE_User1 successfully logged in 
```

如果您想随机选择任何适用于测试的数据，并且只想确保浏览器使用自己的数据集，请按浏览器类型分隔表/数据源。自动化工具应该有一个`if`子句，您可以使用它来选择为该测试选择哪个数据集。

# implementation - 为什么 GNU C 库被称为 C 标准库的实现？

> ID：11830660
> 
> 赞同：1
> 
> 时间：2012-08-06T14:49:42.063
> 
> 标签：implementation, glibc, standard-library

**GNU C Library** ( )不`glibc`包括**C POSIX 库**的实现，它是**C 标准库**的超集吗？因此，它似乎`glibc`比“ *C 标准库*”“大”得多。在这种情况下你能用“*实施”这个词吗？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T14:59:36.510

> 在这种情况下，您可以使用“实施”这个词吗？

是的，因为它确实*实现*了 C 标准库的每个部分。

这是有道理的，因为它是标准库的超集。

# javascript - jQuery Animate 和定位元素

> ID：11830661
> 
> 赞同：3
> 
> 时间：2012-08-06T14:49:43.860
> 
> 标签：javascript, jquery, html

我目前有一个 div，其中有大约 5 张图像向左浮动，因此它们并排排列。现在我在父 div 中有这个 div，它有溢出：隐藏和宽度，所以它只能容纳 4 个图像。

除了动画之外，一切都很好，我有两个左右箭头，但可以说我按两次它会像往常一样移动，但是当我按下左键时，它会重置 div 的正常位置并继续，

```
$(".next").click(function(){
    $(".item_wrap").animate({right: "+=118px"}, 1500 );
    return false;
});
$(".prev").click(function(){
    $(".item_wrap").animate({left: "+=118px"}, 1500 );
    return false;
}); 
```

这是我目前正在使用的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T14:55:20.697

> ...但是可以说我按两次它会像往常一样移动但是当我按左一次它会重置 div 的正常位置并继续

那是因为你不能同时在同一个元素上设置动画`left`，`right`除非你真的希望元素被拉伸（在你的情况下它不会拉伸，因为你可能已经设置了一个静态元素宽度。）相反，你只动画一个通过加法和减法计算它们：

```
$(".next").click(function(){
    $(".item_wrap").animate({right: "+=118px"}, 1500 );
    return false;
});
$(".prev").click(function(){
    // Subtract from 'right' instead of adding to 'left'
    $(".item_wrap").animate({right: "-=118px"}, 1500 );
    return false;
}); 
```

# jquery - JStree 每个叶子有多个链接

> ID：11830662
> 
> 赞同：0
> 
> 时间：2012-08-06T14:49:45.577
> 
> 标签：jquery, jstree

如何在 jstree 叶内有两个链接。

我想显示一个小图像作为链接，该链接重定向到与 jstree 中的叶子相对应的帮助文档，但是当我在`<li>`元素内添加第二个链接时，jstree 将其视为叶子。我想为了解决这个问题，我可以使用另一个标签来显示图像，然后点击转到某个地方。就像是

```
<div title="pathToHelpDocument" onclick="javascript:goToHelpDocument()">
</div> 
```

但它看起来一点也不优雅。最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T22:48:42.417

您可以尝试使用[jsTreeGrid](https://github.com/deitch/jstree-grid)插件。

# android - Android Xml 资源解析器仅节点解析

> ID：11830663
> 
> 赞同：0
> 
> 时间：2012-08-06T14:49:49.450
> 
> 标签：android, xml, parsing, getattribute

我是 Android 开发的新手，我想在 android 中使用 XML Resource Parser 解析仅节点的 xml 文件。我只能让它解析包含属性的 XML，但是我不希望我的 xml 包含属性，我只想提取节点中包含的数据。我可以用 XRP 做到这一点吗？似乎只有 XML 包含属性的方法，例如 getAttributeValue

我的 xml 看起来像这样：

```
<Streets>
<street>ABBEY WAY</street>
<district>WILLESBOROUGH</district>
<collectionday>FRIDAY</collectionday>
<jan>6,20</jan>
<feb>3,17</feb>
<mar>2,16,30</mar>
<apr>13,27</apr>
<may>11,25</may>
<jun>8,22</jun>
<jul>6,20</jul>
<aug>3,17,31</aug>
<sep>14,28</sep>
<oct>12,26</oct>
<nov>9,23</nov>
<dec>TBA</dec>
<street>ABBOTT WAY</street>
<district>TENTERDEN</district>
<collectionday>TUESDAY</collectionday>
<jan>10,24</jan>
<feb>7,21</feb>
<mar>6,20</mar>
<apr>3,17</apr>
<may>1,15,29</may>
<jun>12,26</jun>
<jul>10,24</jul>
<aug>7,21</aug>
<sep>4,18</sep>
<oct>2,16,30</oct>
<nov>13,27</nov>
<dec>TBA</dec>
<street>ACKERLEY COURT</street>
<district>STANHOPE</district>
<collectionday>THURSDAY</collectionday>
<jan>12,26</jan>
<feb>9,23</feb>
<mar>8,22</mar>
<apr>5,19</apr>
<may>3,17,31</may>
<jun>14,28</jun>
<jul>12,26</jul>
<aug>9,23</aug>
<sep>6,20</sep>
<oct>4,18</oct>
<nov>1,15,29</nov>
<dec>TBA</dec>
</Streets> 
```

我最初想从街道节点创建一个数组

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:54:24.690

您也可以使用 Simple for Android。它非常简单且有据可查： [http ://simple.sourceforge.net/](http://simple.sourceforge.net/)

恕我直言，我可以直接从 xml 文档中获取对象的解析器非常简洁:)

# java - 为什么 ArrayBlockingQueue 被称为有界队列，而 LinkedBlockingQueue 被称为无界阻塞队列？

> ID：11830664
> 
> 赞同：9
> 
> 时间：2012-08-06T14:49:51.190
> 
> 标签：java, java.util.concurrent

据我所知，链表和数组都可以无限增长还是我错了？但是当我浏览[了 Executor Service 中的文档时，](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/concurrent/ThreadPoolExecutor.java#ThreadPoolExecutor)我看到了：

> 无界队列。当所有 corePoolSize 线程都忙时，使用无界队列（例如没有预定义容量的 LinkedBlockingQueue）将导致新任务在队列中等待。因此，不会创建超过 corePoolSize 个线程。（因此 maximumPoolSize 的值没有任何影响。）

那么当具有定义的容量时，`Unbounded Queue`属性会发生变化吗？`LinkedBlockingQueue`

这写的是`ArrayBlockingQueue`：

> 有界队列。当与有限的 maximumPoolSizes 一起使用时，有界队列（例如 ArrayBlockingQueue）有助于防止资源耗尽，但可能更难以调整和控制。队列大小和最大池大小可以相互权衡：使用大队列和小池可以最大限度地减少 CPU 使用率、操作系统资源和上下文切换开销，但可能会导致人为地降低吞吐量。如果任务经常阻塞（例如，如果它们受 I/O 限制），系统可能能够为比您允许的更多线程安排时间。使用小队列通常需要更大的池大小，这会使 CPU 更忙，但可能会遇到不可接受的调度开销，这也会降低吞吐量。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-06T14:51:39.850

为什么你认为一个`ArrayBlockingQueue`可以无限增长？从它[自己的文档中](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ArrayBlockingQueue.html)：

> 这是一个经典的“有界缓冲区”，其中一个固定大小的数组保存由生产者插入并由消费者提取的元素。一旦创建，容量就无法增加。尝试将元素放入完整队列将导致操作阻塞；尝试从空队列中获取元素同样会阻塞。

换句话说，一旦它满了，它就满了——它不会增长。

您是否对 an 感到困惑`ArrayList`- 它也由数组支持，但根据需要扩展它？

> 那么当 LinkedBlockingQueue 具有定义的容量时，Unbounded Queue 属性是否会发生变化？

是的，因此它在其[Javadocs](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/LinkedBlockingQueue.html)中被描述为“可选有界” 。此外，文档指出（强调我的）：

> 可选的容量绑定构造函数参数用作防止过度队列扩展的一种方式。容量（如果未指定）等于 Integer.MAX_VALUE。链接节点在每次插入时动态创建，**除非这会使队列超过容量**。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-06T14:55:10.817

[LinkedBlockingQueue](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/LinkedBlockingQueue.html)的javadoc说：

> 基于链接节点的可选有界阻塞队列。[...]
> 
> 可选的容量绑定构造函数参数用作防止过度队列扩展的一种方式。容量（如果未指定）等于 Integer.MAX_VALUE。

[ArrayBlockingQueue](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ArrayBlockingQueue.html)的javadoc说：

> 由数组支持的有界阻塞队列。[...]
> 
> 这是一个经典的“有界缓冲区”，其中一个固定大小的数组保存由生产者插入并由消费者提取的元素。一经创建，容量无法增加

因此，LinkedBlockingQueue 可以是有界或无界的，而 ArrayBlockingQueue 始终是有界的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-06T14:52:50.027

> 据我所知，链表和数组都可以无限增长，或者我错了

一个无限大小的链表。数组具有固定大小。ArrayList 包装一个数组并在需要更大的数组时替换它。

> 当 LinkedBlockingQueue 具有定义的容量时，Unbounded Queue 属性也会发生变化

当 LinkedBlockingQueue 有最大容量时，它是有界的，但默认情况下不使用这种方式。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-06T14:55:00.617

[来自ArrayBlockingQueue](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ArrayBlockingQueue.html)的文档

> 由数组支持的有界阻塞队列。此队列对元素进行 FIFO（先进先出）排序。队列的头部是在队列中时间最长的元素。队列的尾部是在队列中时间最短的元素。新元素被插入到队列的尾部，队列检索操作获取队列头部的元素。

如果你注意到 ArrayBlockingQueue 的所有构造函数都占用了一个容量，因为这个类被设计为有界的。做出这个选择是因为如果您想要一个并发队列，您可能不想要调整 ArrayList 大小所带来的开销。因此，如果您想要一个无界队列 LinkedBlockingQueue 是一个更好的选择，因为它不涉及此开销。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-02-03T06:34:29.730

其他答案非常正确！我提供另一种解释方式。好吧，我也对通过的“未绑定和绑定”一词感到困惑。你可以看看自爆的源代码。

```
 /** The queued items */
final Object[] items;

/** items index for next take, poll, peek or remove */
int takeIndex;

/** items index for next put, offer, or add */
int putIndex;

/** Number of elements in the queue */
int count; 
```

从源代码中，我们可以看到数组是**final**的，所以我们不能调整数组的大小。如果使用 LinkedBlockingQueue，我们总是可以添加更多元素......并且在源代码中，下一个引用不是最终的。注意，理论上，LinkedBlockingQueue 不是无界的。因为它只能存储 MAX_INTEGER 减去 8 个元素。从javadoc，无界队列是PriorityBlockingQueue。但 PriorityBlockingQueue 也只能存储 MAX_INTEGER -8 个元素。所以我认为没有完美的无界队列......

# php - 所见即所得的动态内容块？

> ID：11830668
> 
> 赞同：-5
> 
> 时间：2012-08-06T14:50:12.213
> 
> 标签：php, content-management-system, wysiwyg, usability

我想知道如何制作一个 3 列的页面类型，我可以在其中添加文本块，并且对于每个块，我可以选择将内容添加到文本块的任一侧。

因此，默认情况下，我会在中间列中有一块文本，并且可以选择在该文本的一侧或两侧，在同一级别上。

每次我必须添加页面时，我都可以在代码中执行此操作。但我只是想知道是否有更好的用户友好的方式来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T15:18:50.967

您可以使用 div（样式使它们显示为未提供的 3 列）：

```
<div id="wrapperDIV">
    <div id="col1">column 1</div>
    <div id="col2">column 2</div>
    <div id="col3">column 3</div>
</div> 
```

或者我更喜欢的是表格：

```
<table>
    <tr>
        <td>col 1</td>
        <td>col 2</td>
        <td>col 3</td>
    </tr>
</table> 
```

您将在每一列中创建一个所见即所得的编辑器。有大量关于如何使用 javascript/iframes/etc 来创建 RTF 编辑器的教程。

然后，您必须学习如何使用 php 连接到某种数据库，然后将用户在 rtf 编辑器中输入的内容保存到数据库中以便稍后显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T14:53:56.603

听起来像是内容管理服务 (CMS)。最简单的解决方案是使用诸如“WordPress”之类的东西来允许您编辑您的内容——您可以选择您的布局（如果您愿意，可以选择 3 列）以及许多其他自定义项。

# asp.net - 会话变量或 cookie

> ID：11830671
> 
> 赞同：1
> 
> 时间：2012-08-06T14:50:16.377
> 
> 标签：asp.net, session-state, session-cookies

我有一个系统可以让我的 Intranet 用户处理数据库记录。基本上记录被勾选/取消勾选，这会更新每个放置到单独会话变量中的运行总计，然后提交到不同的数据库。每隔一段时间就会发生一些奇怪的事情，这些会话变量中的值可能会翻倍（或更糟），而我从来没有能够复制这一点（它看起来确实是完全随机的，幸运的是很少见）。

我正在考虑可能的重写，并且想知道是否最好继续使用 cookie 临时存储值，然后强制它们过期以清除这些值。

作为这些的替代方案，ViewState 是否适用于此处？我已经简要地阅读了它，但没有明确设置视图状态值的经验。

我主要担心的是我的变量同时受到其他人使用系统的影响，但我认为会话变量的部分意义在于它们只能由创建它们的会话访问？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T03:52:10.170

ViewState 仅用于回发数据，它不能替代任何一个，因为它在整个会话中都不是持久的。毕竟这是一个“视图”状态:)。

会话变量实际上使用 cookie，但以一种比简单地在其中存储所有相关数据更安全的方式。直接将值存储在 cookie 中就可以了，但是使用一些简单 JavaScript 的用户可以修改其 cookie 的内容。如果您对此不满意，请使用会话。

与将原始数据存储在 cookie 中相比，会话的一个小缺点是数据存储在服务器上，这会占用空间和计算资源。不多，但是如果您要拥有一个高流量的站点或正在考虑在会话中存储所有东西和厨房水槽，则需要考虑一下。

那么会话是如何工作的呢？它们存储特定于每个会话用户的数据，可通过密钥访问。该密钥通常存储在客户端机器上的 cookie 中。当他们访问一个页面时，他们的 cookie 密钥被传输到服务器并且相关数据可以访问。要记住的一件大事是 cookie 的安全性是会话安全性的关键。如果您的站点容易受到 XSS 攻击（整个其他帖子的主题），则用户可以窃取另一个人的 cookie 并伪装成他们，因为他们将拥有标识其他用户会话的 id。

所以总的来说，很难告诉你使用什么系统。就我个人而言，我倾向于使用会话，因为它们易于实现，并且没有用户可修改数据的附加安全性很好。最后，您必须查看您的架构并决定最适合您的架构。

# asp.net-mvc-3 - 排列嵌套的 div 标签

> ID：11830676
> 
> 赞同：1
> 
> 时间：2012-08-06T14:50:35.927
> 
> 标签：asp.net-mvc-3, css

请看下面的图片。我正在尝试删除左侧图像之间的空白。每个图像都在一个 div 标签中。我的 CSS 位于图像之后。

![我正在尝试让这些 div 标签彼此相邻](../Images/e49ff8ea625bc7e8033cb7839046c15a.png)

```
div.Forum {
    border: 2px solid black;
    text-align: center;
    padding: 0 36px;
}

div.Forum div 
{
  display: inline;
  float: left;
  clear: none; 
}

div.ForumChild 
{
    border: 1px solid black;
    background-color: #F2F2F2;
    width: 228px;
    height:auto;
    padding: 12px 12px 10px 10px;
    margin: auto auto;    
    margin-bottom: 10px;
    margin-right: 20px;
    overflow: hidden;
}

div.ForumChild img {
    width: 226px;
    height: auto;
    border: 1px solid black;
    float: left;
    border-radius: 2px;

} 
```

Forum 类是父类，ForumChild 类用于每个图像。这是HTML。它是在 Razor 视图中创建的。

```
<div class="Forum">
    <p>The Forum</p>
            @foreach (var item in Model)
            {                                
                    <div class="ForumChild">                   
                      <img src="@item.Blog.Image.img_path" alt="Not Found" />

                      <br />

                    </div>
            }
</div> 
```

先感谢您。

我将代码更新为以下内容以解决我的问题。感谢大家！

```
@{
    ViewBag.Title = "Home Page";
    int counter = 0;   
}

<div class="Forum">
    <p>The Forum</p>
        @for (int z = 0; z < 3; z++)
        {
            counter = 0;
            <div class="ForumChild">
                @foreach (var item in Model)
                {
                    if (counter % 3 == z)
                    {
                        <img src="@item.Blog.Image.img_path" alt="Not Found" />

                    }
                    counter++;
                }               
            </div>
        }
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T15:55:29.090

要删除您想要的图像之间的所有空白，`float`将无法正常工作。您可以创建三个*列* `<div>`标签并将图像放置在这些列中。例如，如果您想要三列：

HTML：

```
<div class="imgCol">
    <!-- every third image -->
</div>
<div class="imgCol">
    <!-- every third image -->
</div>
<div class="imgCol">
    <!-- every third image -->
</div> 
```

然后，`float: left;`为您的列类添加 CSS（在本例中`.imgCol`）并确保宽度和边距使得列并排显示并且不会发生浮动下降。

这是一个演示：http: **[//jsfiddle.net/yLRWK/](http://jsfiddle.net/yLRWK/)**

对于您的特定情况，您可以按如下方式实现。我不在 ASP.net 中编写代码，所以会抛出一些伪代码

```
<div class="Forum">
    <p>The Forum</p>
    <div class="imgCol">
        /* create counter = 0 */
        @foreach (var item in Model) {                           
            /* if counter % 3 == 0, then write img tag */     
            <img src="@item.Blog.Image.img_path" alt="Not Found" />
            /* counter++ */
        }
    </div>
    <div class="imgCol">
        /* create counter = 0 */
        @foreach (var item in Model) {                           
            /* if counter % 3 == 1, then write img tag */     
            <img src="@item.Blog.Image.img_path" alt="Not Found" />
            /* counter++ */
        }
    </div>
    <div class="imgCol">
        /* create counter = 0 */
        @foreach (var item in Model) {                           
            /* if counter % 3 == 2, then write img tag */     
            <img src="@item.Blog.Image.img_path" alt="Not Found" />
            /* counter++ */
        }
    </div>
</div> 
```

可能有一个更好的解决方案，不需要循环遍历图像三次，但最好留给更了解 ASP.net 的人

# php - 使用 IMAP 在服务器上读取邮件？

> ID：11830680
> 
> 赞同：2
> 
> 时间：2012-08-06T14:50:52.923
> 
> 标签：php, email, imap

我正在设置一个“类似代理”的电子邮件，通知电子邮件会发送给他订阅的用户，但他可以回复`notification@site.com`应该包含他的回复的电子邮件。在服务器端，我希望能够阅读他的电子邮件并将他的回复添加到数据库中 - 电子邮件存储在`notification`用户收件箱中，这很棒，现在可以使用 PHP 阅读它。

所以，我一直在寻找解决方案，很多解决方案都是 IMAP，所以我想我会试一试，但我似乎无法确定我的服务器连接以打开收件箱。我已经调整到不同的端口，但它们都无法连接。

```
imap_open("{localhost/imap:143}", "notification", "password"); 
```

我收到这样的错误：

```
Warning: imap_open(): Couldn't open stream {localhost/imap:143} in /var/www/site.com/www/mail.php on line 8
bool(false)

Notice: Unknown: Connection failed to localhost,143: Connection refused (errflg=1) in Unknown on line 0

Notice: Unknown: Connection failed to localhost,143: Connection refused (errflg=1) in Unknown on line 0

Notice: Unknown: Connection failed to localhost,143: Connection refused (errflg=1) in Unknown on line 0

Notice: Unknown: Connection failed to localhost,143: Connection refused (errflg=2) in Unknown on line 0 
```

我不明白，显然这是我第一次尝试这个，但是我显然在连接上做错了什么？

编辑：我`courier-imap`现在开始我得到这个：

```
Notice: Unknown: [CLOSED] IMAP connection broken (server response) (errflg=1) in Unknown on line 0

Notice: Unknown: [ALERT] Fatal error: No such file or directory: No such file or directory in Unknown on line 0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T21:38:54.037

> 您在这里要求进行基本调试，所以我尝试一下，也许这台机器

您是否尝试过指定邮箱？顺便说一句，您实际上应该使用正确的语法，它是`host:port/protocol`默认`imap`协议，您可以将其省略：

```
imap_open("{localhost:143}INBOX", "notification", "password");
            ^^^^^^^^^^^^^ ^^^^^ 
```

请与[`imap_open`^(*Docs*)](http://de.php.net/imap_open)上的许多示例和注释进行比较。

另外，由于这是调试，请尝试：

```
var_dump(imap_errors(), imap_alerts()); 
```

调试愉快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T21:01:17.083

我在我的 Ubuntu 11.04 系统上遇到了完全相同的问题，我已经通过使用以下命令在我的主目录（如此[处所述）中创建“Maildir”文件夹来解决：](https://help.ubuntu.com/community/Courier/)

```
cd ~
maildirmake Maildir
maildirmake Maildir/.Drafts
maildirmake Maildir/.Sent
maildirmake Maildir/.Trash
maildirmake Maildir/.Templates
chmod -R 700 Maildir 
```

首先，您应该检查日志文件“/var/log/syslog”中的错误（例如通过执行命令`sudo tail /var/log/syslog`）。
在我的日志中，我注意到以下错误：`imapd: chdir Maildir: No such file or directory`.
所以我检查了配置文件“/etc/courier/imapd”，发现 MAILDIRPATH 选项设置为“Maildir”：

```
#
# MAILDIRPATH - directory name of the maildir directory.
#
MAILDIRPATH=Maildir 
```

然后我创建了如上所述的“Maildir”文件夹，“imap_open()”函数终于起作用了。

# internet-explorer-8 - jcrop 不适用于 Internet Explorer 8

> ID：11830684
> 
> 赞同：0
> 
> 时间：2012-08-06T14:50:56.187
> 
> 标签：internet-explorer-8, jcrop

我正在使用 Jcrop 在我的网络应用程序中裁剪图像。它适用于除 IE8 之外的所有浏览器（IE9、FF、Chrome、Safari）。具体来说，Windows 7 附带的 8.7.6。

我正在使用 Jcrop v 0.9.9。

在它工作的 Firefox 中。我看到了一个类似 DOM 的结构

img id... "style="display:none"

div class="jcrop-holder" ......

```
.........................
img ........ 
```

div

在 IE 8.7.6 中，我看到的 DOM 像

img id... "style="display:none"

- - 空白的 - - - -

基本上，jcrop-holder 不会被注入到 DOM 中，而原始图像就像其他浏览器一样被隐藏。

你能请。对此有所了解？如果您知道 IE 的任何解决方法。

感谢您的帮助。

将 jcrop 附加到目标图像的 Javascript 代码

```
function attachJcropToModal()
{
    jQuery(function($)
    {
        $('#jcrop_target').Jcrop(
                {
                    aspectRatio: '<%=defaultAspectRatioValue%>',
                    minSize: [0,0],
                    onChange: updateCoords,
                    onSelect: updateCoords
                },
                function ()
                {
                    jcrop_api = this;
                }
        );
    });
}

function updateCoords(c)
{
    $('#w').val(Math.round(c.w*adjFactor));
    $('#h').val(Math.round(c.h*adjFactor));

    $('#x1').val(Math.round(c.x*adjFactor));
    $('#y1').val(Math.round(c.y*adjFactor));
} 
```

html图片显示代码

```
 <div class="cropperContainer">
                    <table>
                        <tbody><tr>
                            <td class="main">
                                <img id="jcrop_target" src="<%=imgSourceURL%>"<%=overriddenImageWidthAttr%> alt="" />
                            </td>
                        </tr>
                        </tbody></table>
                </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T07:26:59.290

您的代码看起来不错，只有一件事！您不应该在 aspectRatio 十进制值周围使用 ''。

Jcrop Demo 可以在 IE8 上运行，对吧？

也许你应该试试[Cropzoom](http://www.cropzoom.com.ar/)。我在一个商业项目中使用了它，经过一些调整后，它在 IE7+、FF 和 Safari 等中非常适合我们......

# iphone - 在方法之间访问 NSString 会导致应用崩溃

> ID：11830686
> 
> 赞同：1
> 
> 时间：2012-08-06T14:51:00.273
> 
> 标签：iphone, string, methods, nsstring

如果这是一个糟糕的问题，我深表歉意，因为我是 iOS 开发的新手。所以这是我的问题：我声明了一个类变量 NSString，该字符串从 textView 分配了一个字符串值，但是当我尝试从其他方法访问该字符串时，应用程序崩溃了。这是代码：

接口：（类名.h）

```
@interface ClassName: UIViewController <UITextViewDelegate>{}
@property (nonatomic, assign)NSString *strSomeText;
@end 
```

实现：（ClassName.m）

```
@implementation
@synthesize strSomeText;
- (void)textViewDidChange:(UITextView *)textView{
    strSomeText = textView.text;
    NSLog(@"%@", strSomeText); //This line works just fine
}
- (void)textViewDidEndEditing:(UITextView *)textView{
    NSLog(@"%@", strSomeText); //this line causes the app to crash
}
@end 
```

谢谢您的帮助！地点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T14:53:13.630

您的问题可能是由于您正在使用`assign`您的财产。这意味着可以在您仍然拥有对它的引用时释放该字符串。尝试`copy`改用：

```
@property (nonatomic, copy) NSString *strSomeText; 
```

然后你应该在你的方法中使用你的属性访问器`textViewDidChange:`：

```
self.strSomeText = textView.text; 
```

# android - Android 中的 iOS AppDelegate 等效项

> ID：11830689
> 
> 赞同：18
> 
> 时间：2012-08-06T14:51:14.843
> 
> 标签：android, ios, uiapplicationdelegate

我有一个带有一个 Activity 的简单 Android 应用程序。此活动下载一个小的 XML 文件并向用户显示内容。目前我在 Activity 的`onStart`方法中开始下载。

据我了解，当设备方向发生变化时，活动会被销毁并重新创建。因此，当用户旋转我的应用程序时，会再次下载 XML 文件。我希望该应用程序只下载一次文件，因为它每天更改的次数不会超过几次。因此，我想要一些对象来保留下载的数据，以便在设备方向改变时可以重新使用本地数据。**Android中保留数据的理想对象是什么？**

在 iOS 上，我会使用`AppDelegate`下载数据一次并保留它。然后，显示数据的 viewController 可以在本地数据被销毁和重新创建时重新使用它。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-09-27T09:12:54.990

您必须创建自己的 Application 子类并在 AndroidManifest.xml 中指定它。之后，将创建此类的新实例，并且可以在整个应用程序中访问它。

例子：

**清单.xml**

```
<application name="YourApp"> 
```

**你的应用程序.java**

```
public class YourApp extends Application {
    private String yourState;

    public void setState(String state){
        yourState = state;
    }
    public String getState(){
        return yourState;
    }
 } 
```

**你的活动.java**

```
 public class YourActivity extends Activity {
    @Override
    public void onCreate(Bundle bundle){
        YourApp appState = ((YourApp)getApplicationContext());// you can use getApplication() as well in the activity
        String state = appState.getState();
    }
 } 
```

[有关应用程序的更多信息](http://developer.android.com/reference/android/app/Application.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-12-16T17:13:50.127

让你的主类实现`ProcessLifecycleObserver`。

它相当于 iOS 中的 AppDelegate，因为它在应用程序进程的基础上“总结”了活动处理程序`onCreate`，如 .`onResume`

[https://developer.android.com/reference/android/arch/lifecycle/ProcessLifecycleOwner](https://developer.android.com/reference/android/arch/lifecycle/ProcessLifecycleOwner)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T14:57:31.577

您应该创建一个模型对象（您自己的类）来保留 iOS 和 android 上的数据。恕我直言。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T15:05:19.620

我假设你已经看过这个页面：

[http://developer.android.com/guide/topics/data/data-storage.html#pref](http://developer.android.com/guide/topics/data/data-storage.html#pref)

根据 XML 文件中的数据类型（如果它是相当简单的数据），使用“共享首选项”可能是一种简单的方法。您可以在需要时从 XML 重写新数据，同时仍然能够从共享首选项中使用它。

# android - android中有类似NSDictionary的东西吗？

> ID：11830697
> 
> 赞同：8
> 
> 时间：2012-08-06T14:51:52.283
> 
> 标签：android, listview, arraylist, android-listview

我是安卓新手。我确实四处搜索，但在 Android 中找不到像 iOS 的 NSdictionary 这样的工作。例如，在 iOS 中，我可以像这种格式一样创建**简单的字典数组**

```
Array
   idx1: [objA1 for keyA],[objB1 for keyB],[objB1 for keyC]
   idx2: [objA2 for keyA],[objB2 for keyB],[objB2 for keyC]
   idx3: [objA3 for keyA],[objB3 for keyB],[objB3 for keyC] 
```

我知道我可以创建与 android 中类似的字符串数组

```
<string-array name="list_obj1">
    <item>ObjA1</item>
    <item>ObjB2</item>
    <item>ObjC3</item>
</string-array>
<string-array name="list_obj2">
    <item>ObjB1</item>
    <item>ObjB2</item>
    <item>ObjB3</item>
</string-array>
<string-array name="list_obj3">
    <item>ObjC1</item>
    <item>ObjC2</item>
    <item>ObjC3</item>
</string-array> 
```

我的问题是，是否还有其他东西可以用于在 Android 中创建**字典**数组，例如 iOS。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-06T14:56:25.977

首先，我认为有很多关于这些东西的教程，然后你可以搜索更多信息。由于您是 android 新手，您可能不知道要搜索的“名称”。对于这种情况，“HashMap”就是您要寻找的。它像 NSDictionary 一样工作。

```
//Create a HashMap
Map <String,String> map =  new HashMap<String,String>();
//Put data into the HashMap
map.put("key1","Obj1");
map.put("key2","Obj2");
map.put("key3","Obj3");

// Now create an ArrayList of HashMaps
ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();

//Add the HashMap to the ArrayList
mylist.add(map); 
```

现在你有 st 像一个字典数组。

希望这有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T15:13:58.020

您可以将@user1139699 所说的内容放入 ArrayList。

```
ArrayList<HashMap> list = new ArrayList();

Map <String, String> map =  new HashMap<String,String>();
map.put("key","Obj");

list.add(map); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T16:24:11.667

如果你想加载这样的文件：

```
property.key.1=value of 1st key
property.key.2=value of 2nd key
prompt.alert = alert 
```

等你可以使用 java Properties(); 然后您可以立即获得每个键的值。

* * *

* * *

解释：

例如，您有一个文件 myTranslations.txt 。在该文件中，您以以下格式编写键/值对：

```
property.key.1=value of 1st key
property.key.2=value of 2nd key
prompt.alert = alert 
```

其中“=”之前的部分是键，之后的部分是值。

然后在您的代码中执行以下操作：

```
Properties properties = new Properties();

    File propertiesFile = new File (filePath);
    FileInputStream inputStream = null;
    try {
        inputStream = new FileInputStream(propertiesFile);
        properties.load(inputStream);
    } catch (IOException ioe) {
        ioe.printStackTrace();
    } 
```

其中 filePath 是上面文件的路径。

然后你可以得到每个键的值：

```
properties.get("prompt.alert") 
```

这将返回字符串：

```
alert 
```

就像在 txt 文件中一样。

如果有帮助请点赞。

# jquery-ui - jquery-ui 选项卡中的新动态 TinyMCE 实例在提交时不起作用

> ID：11830701
> 
> 赞同：0
> 
> 时间：2012-08-06T14:52:04.657
> 
> 标签：jquery-ui, tinymce

我有一个选项卡区域（jquery-ui），内容字段配备了 TinyMCE。我创建新标签的代码：

```
 //new tab in tab area
    var $tabs = $("#tabs").tabs({
        tabTemplate: "<li id='tabLi"+tabCount+"' data-order='"+tabCount+"'><a href='#{href}'>#{label}</a><input type='hidden' name='tab"+tabCount+"Title' value='#{label}'></li><input type='hidden' id='tab"+tabCount+"Order' name='tab"+tabCount+"Order' value='"+tabCount+"'></li>",
        add: function(event, ui) {
            $(ui.panel).append('<textarea class="tinymceTABS" name="tab'+tabCount+'Content">still empty</textarea>');
        }
    });
    $tabs.tabs("add", "#tabs-" + tabCount, $('#newTabName').val()); 
```

如果我想保存所有选项卡的内容，则只会保存关注的内容。其他内容字段仅包含“仍然为空”-dummy。

也许我必须在创建新标签及其tinymce 后做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:02:14.570

您是否尝试过遍历选项卡，通过模拟点击事件来激活它们，然后尝试保存该实例？

# magento - 任何属性为空的 Magento 集合过滤器

> ID：11830708
> 
> 赞同：2
> 
> 时间：2012-08-06T14:52:15.873
> 
> 标签：magento

我正在拉一个集合如下

```
$collection = Mage::getModel('catalog/product')->getCollection()
->addAttributeToSelect('jan')
->addAttributeToSelect('name')
->addAttributeToSelect('upc')
->addAttributeToSelect('ean')
->addAttributeToSelect('price')
->addAttributeToFilter('ean', array('neq' => ''))
->addFieldToFilter(array(
    array('attribute'=>'type_id','eq'=>'simple')        
))
->setPage(1,5); 
```

目前我正在选择所有简单的产品，其中 'ean' 不为空。如何在 ean OR upc OR jan 不为空的情况下选择所有简单产品。

换句话说，只要产品具有 ean、upc 或 jan，就选择所有产品。如果它们都是空的，请不要选择它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T15:25:47.030

[http://www.magentocommerce.com/wiki/1_-_installation_and_configuration/using_collections_in_magento](http://www.magentocommerce.com/wiki/1_-_installation_and_configuration/using_collections_in_magento)

```
class Mage_Catalog_Model_Resource_Product_Collection extends Mage_Catalog_Model_Resource_Collection_Abstract 
```

-

```
class Mage_Catalog_Model_Resource_Collection_Abstract extends Mage_Eav_Model_Entity_Collection_Abstract 
```

-

```
Mage_Eav_Model_Entity_Collection_Abstract

/**
 * Add attribute filter to collection
 *
 * If $attribute is an array will add OR condition with following format:
 * array(
 *     array('attribute'=>'firstname', 'like'=>'test%'),
 *     array('attribute'=>'lastname', 'like'=>'test%'),
 * )
 *
 * @see self::_getConditionSql for $condition
 * @param Mage_Eav_Model_Entity_Attribute_Interface|integer|string|array $attribute
 * @param null|string|array $condition
 * @param string $operator
 * @return Mage_Eav_Model_Entity_Collection_Abstract
 */
public function addAttributeToFilter($attribute, $condition = null, $joinType = 'inner') 
```

解决方案：

```
$collection->addAttributeToFilter(
array(
    array(
        'attribute' => 'ean',
        'neq'        => '',
        ),
    array(
        'attribute' => 'upc',
        'neq'      => '',
        ),
    ),
    array(
        'attribute' => 'jan',
        'neq'      => '',
        ),
    )
); 
```

# tomcat - 从 Tomcat 单点登录中排除管理器

> ID：11830710
> 
> 赞同：1
> 
> 时间：2012-08-06T14:52:28.053
> 
> 标签：tomcat, single-sign-on, jaas, tomcat-valve, tomcat-manager

在没有 Apache 的 Tomcat 服务器上使用 JAAS 进行 SSO。SSO 控制对几个相关应用程序的访问，效果很好。最近我开始从 Ant 迁移到 Maven，为了使用 Maven 的 Tomcat 插件，我需要设置我以前不需要的 Tomcat Manager 应用程序。我能够通过 BASIC 身份验证或 CLIENT-CERT 身份验证以及服务器上的其他 webapps 来启动并运行它。

我遇到的问题是当用户在管理器中进行身份验证时，其他 webapps 的会话被丢弃 - IE 登录到 webapp，登录到管理器，刷新 webapp，重定向到登录页面。

我能够通过在上下文级别定义 SSO 阀和在主机级别定义领域来减轻这种重叠。这仍然允许 SSO 在通过浏览器在 web 应用程序之间导航时工作。但是，跨上下文 AJAX 请求和诸如此类的返回“用户未登录”错误，直到我访问其他有问题的 web 应用程序。使用这种方法对 Manager 进行身份验证有效地与其他 webapp 隔离。

简而言之，我正在寻找使用 JAAS 身份验证模块为我的 webapps 提供通过 SSL/数据库身份验证的 SSO 的最佳方式，但强制 Tomcat 从 SSO 中排除 Manager。IE SSO 通过 SSL 用于 Webapps 1、2、3，但 UN/PW 身份验证独立于 Manager 的 SSO，两者之间的身份验证独立。

有没有办法做到这一点？

当前配置：

```
<Engine name="Catalina" defaultHost="localhost">

  <Host name="localhost" appBase="webapps"
        unpackWARs="true" autoDeploy="false"
        xmlValidation="false" xmlNamespaceAware="false">

    <Realm className="org.apache.catalina.realm.JAASRealm" appName="CustomLogin"
           userClassNames="com.foo.bar.User" roleClassNames="com.foo.bar.Role"
           useContextClassLoader="true" debug="false"/>
    <Valve className="org.apache.catalina.authenticator.SingleSignOn"/>

    <Context path="/Webapp1" docBase="webapp1">
        <ResourceLink name="jdbc/WEBAPP" global="jdbc/WEBAPP" type="java.sql.DataSource"/>
    </Context>

    <Context path="/Webapp2" docBase="webapp2">
        <ResourceLink name="jdbc/WEBAPP" global="jdbc/WEBAPP" type="java.sql.DataSource"/>
    </Context>

    <Context path="/Webapp3" docBase="Webapp3">
        <ResourceLink name="jdbc/WEBAPP" global="jdbc/WEBAPP" type="java.sql.DataSource"/>
    </Context>

    <Context path="/manager" docBase="manager" AntiJARLocking="false" antiResourceLocking="false" privileged="true" reloadable="false">
        <Realm className="org.apache.catalina.realm.MemoryRealm"></Realm>
        <Valve className="org.apache.catalina.valves.AccessLogValve" directory="logs" prefix="manager_access_log." suffix=".txt" pattern="common" resolveHosts="false"/>
    </Context>
  </Host>
</Engine> 
```

使用此配置，所有 webapps 和管理器都在 SSO 的控制之下，并且发生了上述重叠 - IE 通过 SSL 登录到 webapp1，然后通过 UN/PW 管理器，然后刷新 webapp1，重定向到登录页面。

将 SSO 阀移动到 webapps 的上下文可以解决此问题，但会导致跨上下文 AJAX 请求的“用户未登录”响应。

# javascript - javascript图像数量

> ID：11830711
> 
> 赞同：0
> 
> 时间：2012-08-06T14:52:33.780
> 
> 标签：javascript

我有一个供个人使用的小 html 文件，没有 css 或 php 或 Web 服务器。我有一个文件夹“imgs”（与 .html 位于同一文件夹中），其中包含名为 image0.png、image1.png、image2.png... 的图像（全部按顺序排列，直到没有）。我如何制作一个返回该文件夹中图像数量的 javascript 函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T14:57:03.073

没有办法使用客户端 JavaScript 立即获取图像文件的数量，您可以做的最好的事情是尝试逐个检索图像，直到出现 404 错误。

您可以使用`onerror`img 元素的方法来检测请求的图像何时不存在 - 如果您请求的图像不存在，则将调用此方法。

[这个问题](https://stackoverflow.com/questions/92720/jquery-javascript-to-replace-broken-images)可能很有用，它包含一些您可以使用的示例代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T15:03:13.983

一般的策略是将每个文件加载为图像，按顺序加载，直到请求失败，触发`onerror`回调。每个后续图像获取都作为`onload`前一个图像的处理程序被触发。

```
// takes a callback that expects a single argument
function getImageCount(callback) {
    imageCounter(0);

    // pseduo-recursive function nested in the closure of the outer function
    // (nested so `callback` is always accessible without constantly passing it)
    function imageCounter(i) {
        var img = new Image();

        // if this failed, so the final image was the previous one
        img.onerror = function() { callback(i); }
        // if this succeeded, try the next one
        img.onload = function() { imageCounter(i + 1); }

        img.src = "image"+i+".png";
    }
}

// actually run it, with callback function that gets the count
getImageCount(function(count) {
    alert("There are " + count + "images.");
}); 
```

由于 URL 的限制性同源策略`file:`，这在没有`--allow-file-access-from-files`命令行标志的 Chrome 上不起作用，并且仅在从当前页面的同一目录或子目录中获取图像时才在 Firefox 中起作用。

# android - 如何使用 Gson (Android) 解析 html 元素？

> ID：11830712
> 
> 赞同：1
> 
> 时间：2012-08-06T14:52:36.470
> 
> 标签：android, html, json, gson

我正在尝试制作一个需要访问一些网络服务的 Android 应用程序，以 JSON 格式返回数据。

我正在使用 Gson 来解析这些数据，并且这个库从来没有任何问题。

显然，网络服务向我返回了一个带有 html 标签的字符串（实际上，从 HTML 标签开始）。问题是，即使我在解析字符串时没有异常，这个特定的字段在输出中似乎是空的。

我试图解析的 Json 看起来像这样：

```
{
    "ID": "66",
    "Nom": "Bordeaux",
    "Pays": "FRANCE",
    "Titre_office": "Office de Tourisme de",
    "Descriptif_office": "<a href=\"http://www.secure-hotel-booking.com/office-de-tourisme-de-bordeaux/2T66/dateselection?sid=1811faff-feda-4f98-83b5-89d6eb6266e8\">Disponibilités des hébergements en ville</a> Bordeaux, ville riche en histoires et en lieux, avec son fabuleux patrimoine mondial, sa culture, sa gastronomie et son art de vivre, vous accueille toute l'année pour profiter d'un excellent moment.",
    "Logo_office": "ville_66.jpg",
    "Adresse_office": "blabla",
    "Num_contact": "+33xxxxxxxxxx",
    "Mail_contact": "xxx@mail.com",
    "Site_contact": "http://www.bordeaux-tourisme.com"
} 
```

当然，所有字段都可以，除了“Descriptif_office”一个。

我尝试使用 new GsonBuilder().disableHtmlEscaping().create(); 但严格没有效果...

任何帮助将不胜感激 ！

谢谢

编辑 ：

使用硬编码字符串时我没有问题：

```
new GsonBuilder().disableHtmlEscaping().create().fromJson(new StringReader("         {\"Descriptif_office\":\"<a href=\\\"http:\\/\\/www.secure-hotel-booking.com\\/office-de-tourisme-de-bordeaux\\/2T66\\/dateselection?sid=1811faff-feda-4f98-83b5-89d6eb6266e8\\\">Disponibilit\\u00e9s des h\u00e9bergements en ville<\\/a> Bordeaux, ville riche en histoires et en lieux, avec son fabuleux patrimoine mondial, sa culture, sa gastronomie et son art de vivre, vous accueille toute l'ann\u00e9e pour profiter d'un excellent moment.\"}"), test.class); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T14:58:04.573

尝试使用`JSONString.replace("htmlYouWantToEspace", "whatYouWantToInstert");`. 这样你就可以避免问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T13:52:48.033

始终检查您是否调用了正确的 Web 服务。愚蠢的我。

# fuelphp - Fuelphp 从 base_url 中删除公共

> ID：11830713
> 
> 赞同：0
> 
> 时间：2012-08-06T14:52:37.137
> 
> 标签：fuelphp

我遇到了一个问题，ic​​ant 真正用燃料 php 解决了什么问题。

`Config::get('base_url');`我将 htaccess 添加到 te root，现在我可以像 www.mysite.com/wlecome 一样访问我的网站，se 公众被删除，但是当我使用和时我找不到删除公众的方法`Response::redirect();`

config.php 中的 base_url 设置为 null，如果我将站点 url 传递给它，那么资产无法正确呈现。

如果有人能给我一个提示，如何让公众远离这些，我将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T15:57:47.230

这听起来像是您已经在 docroot 内部而不是外部安装了完整的 FuelPHP 安装，并将公共文件夹设置为您的 docroot，这是推荐的安装方式。

如果是这种情况，请将公用目录中的所有内容向上移动一个文件夹，使其再次位于 docroot 中，然后删除不再需要的公用文件夹。

请注意，这样的设置使您的代码可以通过浏览器访问，因此您可能需要添加一些 htaccess 来防止这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T05:44:08.920

我知道它不是最漂亮的，但我通常这样做。

我打开 Config.php

并通过基本网址

```
'site_url' => 'your site url here', 
```

你不能这样称呼它`Config::get('site_url');`

希望对你有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T05:57:52.257

[您可以将 VirtualHost 设置为从http://project.dev/](http://project.dev/)到 /var/www/project/public ，而不是使用 .htaccess

# css - Internet Explorer 无法加载 css 文件

> ID：11830714
> 
> 赞同：1
> 
> 时间：2012-08-06T14:52:38.070
> 
> 标签：css, internet-explorer

**情况：**

我有一个 PHP 编写的页面，其中将包含一个 css via

```
<style type="text/css">@import url(/css/my.css);</style> 
```

之后（根据需要）加载一个 javascript 文件，该文件会打开一个新的“窗口”，其中将使用 css 声明。

这适用于除 Internet Explorer (7-9) 之外的所有浏览器。

**问题：**

根据 IE Developer Tools (F12) 加载了 css 文件，我可以看到该文件中的所有声明（它们是正确的），但是当显示新窗口时，css 声明似乎没有生效。

***“解决方案”：***

取消选择（并重新选择它们，即使没有必要）IE Developer Tools 的 CSS-Tab 中给定 CSS 文件的某些规则会使页面正确“呈现”。

**问题：**

这种行为来自哪里，我该如何摆脱它？

**附加信息：**

我没有超过 4095 个（甚至不包括所有 CSS 文件中的所有）选择器（实际上我只有不到 2.5k），并且我只加载了少于 31 个（正好 7 个）不同的 CSS 文件。

**按照要求：**

```
<div class="navigate">
<div class="nav-slider">
  <div class="nav-slider-left">
    <span role="button" class="nav-link nav-page-back">&lt;</span>

    <div class="page-number">
      <span>1 of 1</span>
    </div><span role="button" class="nav-link nav-page-next">&gt;</span><span role=
    "button" class="nav-link nav-now">&acirc;&mdash;</span><span role="button" class=
    "nav-link nav-prev-week">&lt;&lt;</span><span role="button" class=
    "nav-link nav-prev-day">&lt;</span>
  </div>

  <div class="nav-slider-content">
    <div class="nav-slider-bar">
      <a class="nav-slider-button"></a>
    </div>
  </div>

  <div class="nav-slider-right">
    <span role="button" class="nav-link nav-next-day">&gt;</span><span role="button"
    class="nav-link nav-next-week">&gt;&gt;</span><span role="button" class=
    "nav-link nav-zoomIn">+</span><span role="button" class=
    "nav-link nav-zoomOut">-</span>
  </div>
</div> 
```

（我已将 HTML 代码缩减为相关部分 [ExtJS 正在围绕给定代码创建大量结构）

[CSS 声明在这里](http://pastebin.com/SkZieMCR)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T17:33:03.180

我不确定，但这可能是一个缓存问题，因为您的样式被解释为 inline-css 并且在您打开新窗口时不会被保存。您是否尝试使用：

```
<link href="yourcssfile.css" type"text/css" rel="stylesheet"/> 
```

> 更新：这似乎是一个错误。我在这篇文章中发现了你的问题（point5）。解决方案也在那里。

[http://www.webcredible.co.uk/user-friendly-resources/css/internet-explorer.shtml](http://www.webcredible.co.uk/user-friendly-resources/css/internet-explorer.shtml)

# jquery - 从div开始在jQuery中选择下拉文本的正确方法是什么？

> ID：11830716
> 
> 赞同：2
> 
> 时间：2012-08-06T14:52:43.303
> 
> 标签：jquery

我正在从一组 div 中动态获取选定的下拉选项的文本。当我这样做时：

```
$("#divID").children("select").eq(0).find('option:selected').text(); 
```

一切正常。但是，当我这样做时：

```
$("#divID").children("select option:selected").eq(0).text(); 
```

它没有按预期抓取文本。我想知道后一种获取文本的方法我做错了什么。谢谢。

[JSFiddle - 第一种方法（作品）](http://jsfiddle.net/q7RSj/)

[JSFiddle - 第二种方法（不起作用）](http://jsfiddle.net/nzhaD/2/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T14:58:17.370

你正在做的问题是你使用`children`.

如果您要更改`children`为，`find`那么它可以完美运行。原因是`children`它只找到作为被操作集合的直接子元素的元素。所以它只会返回直接孩子的东西`#divID`。如您所见，这些`option`元素不是直接子元素，因此无法返回。

```
$("#divID").find("select option:selected").eq(0).text(); 
```

见[http://jsfiddle.net/nkhaD/5/](http://jsfiddle.net/nzhaD/5/)

当然，这两者之间存在一些细微的差异。考虑这个 HTML：

```
<div id="divLocation">
    <div>            
        <select id="1"/>
    </div>
    <select id="2"/>
</div> 
```

我已经删除了选项，但是您的原始选择器将获得 id #2（因为它是唯一的子选择，`#divLocation`而我的选择将获得第一个选定的选项，大概在 id #1 中。

所以这个故事的寓意是做任何你真正想要的选择器。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T14:57:45.293

我会做这个：

```
 value = $("#divLocation select option:selected").text(); 
```

我不确切知道哪种方法是“正确的”。我认为我的理解很简单。因此，请选择您认为易于阅读的那个。如果需要性能，请仅使用纯 javascript 并让选择具有 ID。

```
document.getElementById("divLocationSelect").value; 
```

[http://jsfiddle.net/nkhaD/4/](http://jsfiddle.net/nzhaD/4/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T15:01:33.700

你可以做：

```
$("#divID").find("select option:selected").eq(0).text(); 
```

该`.children()`方法的不同之处`.find()`在于`.children()`仅在 DOM 树中向下移动一个级别，同时`.find()`也可以向下遍历多个级别以选择后代元素（孙子等）。

见[.children()](http://api.jquery.com/children/)

# java - 在 Eclipse 中，是否可以在项目中找到采用某种参数类型的所有方法？

> ID：11830720
> 
> 赞同：11
> 
> 时间：2012-08-06T14:52:50.867
> 
> 标签：java, android, eclipse, ide

所以这基本上是我的问题。我在参数化方法中将所有方法 ArrayLists 转换为 HashMaps，但我不想将所有 ArrayLists 转换为 HashMaps，因为有一些在本地使用。这更像是一种好奇心，但它会很有用。

那么，在 Eclipse 中，是否可以在项目中找到所有采用某种参数类型的方法？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-06T21:55:41.350

按`Ctrl`+`H`或从菜单栏`Search`- `Search ...`，然后选择`Java Search`： ![在此处输入图像描述](../Images/f5b769446edf394cc6ac440557c9e4a5.png)

然后单击限制到 - 匹配位置（已选择 15 个）： ![在此处输入图像描述](../Images/8b244542ee562b8cefa58b52743032d4.png)

这应该给你想要的。

# ios - 在 UIView 上绘制叠加层

> ID：11830722
> 
> 赞同：1
> 
> 时间：2012-08-06T14:52:58.010
> 
> 标签：ios, quartz-graphics

我有一个 UIView，我绘制了一个 CGPath 并想在整个视图本身上绘制一个覆盖，在渲染的 CGPath 上方一个 z 级。

这是怎么做到的？我应该使用图层吗？我想重复绘制或填充视图的一部分，所以我不确定使用某种填充方法是否会更好。除了绘制新路径之外，是否有更有效的方法来填充部分视图？

我想创建类似于进度条的效果，在运行时根据值扩展覆盖宽度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T14:57:42.223

您可以为此使用子视图（或类似地，子层）。视图的子视图将出现在`drawRect:`.

如果您可以不使用`UIImage`背景（例如，`resizableImageWithCapInsets:`使用`drawRect:`.

# sms - 是否可以将电子邮件发送到简码？

> ID：11830726
> 
> 赞同：1
> 
> 时间：2012-08-06T14:53:20.663
> 
> 标签：sms, shortcode

我知道我可以以 SMS 的形式向某人发送电子邮件，前提是我知道 SMS 网关的详细信息。可以将相同的内容发送到简码吗？或者这些服务是否可以像处理 SMS 一样处理电子邮件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T15:06:49.380

我认为不可能将电子邮件发送到简码。这些仅限于发送/接收短信。

但是，根据运营商的不同，他们可能已经安装了 SMS-Email 网关，因此用户可以从他们的个人号码发送/接收电子邮件。我的运营商几年前曾经有过这项服务。使用该服务，我有一个格式为`number@carrierdomain`.

# jquery - 没有可用日期时隐藏 DatePicker 月份箭头

> ID：11830729
> 
> 赞同：0
> 
> 时间：2012-08-06T14:53:29.617
> 
> 标签：jquery, datepicker, hide, future

我有一个 DatePicker 日历，其中填充了某些日子给定事件的日期。问题是，如果日历中没有未来或过去的可用日期，我无法找到隐藏前后月份箭头的方法。换句话说，如果一个事件在接下来的两个月内只有日期，我想在这两个月之后没有未来日期时禁用前进箭头（这样用户就不会漫无目的地浏览日历）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T15:03:35.803

我建议您为日期选择器设置最小和最大日期选项：

```
$( ".selector" ).datepicker({ 
   minDate: new Date(2012, 7, 1),
   maxDate: new Date(2012, 7, 31)
}); 
```

这应该将选择限制在本月。注意：javascripts 月份值是 0 索引（所以一月是 0，十二月是 11 等）

[这是一个工作示例](http://jsfiddle.net/fjKKK/)

# actionscript-3 - Box2D（AS3）模拟碰撞时物体吸收力？

> ID：11830731
> 
> 赞同：0
> 
> 时间：2012-08-06T14:53:46.020
> 
> 标签：actionscript-3, box2d, collision

我希望这很容易。

我正在尝试模拟一个落下的豆袋，它可以撞到屏幕一侧的网中。

我有：代表手或蝙蝠的动态身体和圆形形状，它们分别随鼠标移动。代表豆袋的下降动态身体圆形形状。简单地说，两个小圆圈代表网的顶部开口。

为了移动手/蝙蝠，我更新了每一步的线速度，以便可以将这个力施加到豆袋上：

```
// move hand
deltaX = (handBody.GetPosition().x * scaleF) - mouseX; 
deltaY = (handBody.GetPosition().y * scaleF) - mouseY; 
var newVel:b2Vec2 = new b2Vec2(-deltaX, -deltaY);
handBody.SetLinearVelocity(newVel); 
```

我的问题是我希望豆袋能吸收一些初始的敲击力。目前，快速滑动将落下的袋子从屏幕上甩开太容易了。有没有简单的方法来使用摩擦、阻尼或其他设置？我已经尝试过，但似乎无法产生效果。谁能建议我如何在不影响球棒/手的更新位置的情况下手动消除一些碰撞力？

蒂亚，克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T17:29:51.887

你不能把新的速度/豆袋速度乘以 0.8 或其他什么，然后称之为阻尼效应吗？

但是提供的代码看起来很奇怪，我看不到任何与影响或撞击豆袋有关的内容。这只是设置手的水平？

# javascript - 将 Javascript 变量添加到 HTML 元素

> ID：11830740
> 
> 赞同：2
> 
> 时间：2012-08-06T14:54:24.313
> 
> 标签：javascript, firefox, greasemonkey

所以，我有一些代码应该做四件事：

*   从每个标题中删除“.mp4”扩展名
*   更改我的视频类别
*   在所有视频中添加相同的描述
*   在所有视频中放置相同的关键字

注意：所有这些都将在 YouTube 上传页面上完成。我在 Mozilla Firefox 中使用 Greasemonkey。

我写了这个，但我的问题是：如何将实际 HTML 页面中的 HTML 标题更改为新标题（这是一个 Javascript 变量）？

这是我的代码：

```
function remove_mp4()
{
   var title = document.getElementsByName("title").value;
   var new_title = title.replace(title.match(".mp4"), "");
}
function add_description()
{
   var description = document.getElementsByName("description").value;
   var new_description = "Subscribe."
}
function add_keywords()
{
   var keywords = document.getElementsByName("keywords").value;
   var new_keywords = prompt("Enter keywords.", "");
}
function change_category()
{
   var category = document.getElementsByName("category").value;
   var new_category = "<option value="27">Education</option>"
}
remove_mp4();
add_description();
add_keywords();
change_category(); 
```

注意：如果您在 JavaScript 代码中发现任何错误，请告诉我。

注意 2：如果您想知道为什么我将当前的 HTML 值存储在变量中，那是因为我认为我必须使用它们来替换 HTML 值（我可能错了）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T16:08:25.207

很多东西已经涵盖了，但我仍然想提醒你，如果你正在寻找跨浏览器兼容性，innerHTML 是不够的，因为你可能还需要 innerText 或 textContent 来处理一些旧版本的 IE 甚至使用其他方式来修改元素的内容。

作为旁注，大多数人认为 innerHTML 已被弃用，尽管其他一些人仍在使用它。（我不是来讨论它好不好用，但这只是一个小评论让你检查一下）

关于备注，我建议通过创建一些用于编辑或添加目的的更通用版本来最小化您创建的功能数量，例如，您可以执行以下操作：

```
/*
*  @param $affectedElements the collection of elements to be changed      
*  @param $attribute here means the attribute to be added to each of those elements
*  @param $attributeValue the value of that attribute
*/
function add($affectedElements, $attribute, $attributeValue){
  for(int i=0; i<$affectedElements.length; i++){
    ($affectedElements[i]).setAttribute($attribute, $attributeValue);
  }
} 
```

如果您使用全局函数为您完成工作，不仅您的 coce 将更易于维护，而且您将避免多次获取 DOM 中的元素，这将大大提高您的脚本运行速度。例如，在您之前的代码中，您先获取一组特定元素的 DOM，然后才能向它们添加值，换句话说，每次执行您的函数时，您都必须遍历整个 DOM 来检索您的元素，而如果您只获取一次元素然后存储在 var 中并将它们传递给只专注于添加或更改的函数，那么您显然避免了一些重复的任务。

关于最后一个函数，我认为代码仍然不完整，但我建议你使用内置方法来操作 HTMLOption 东西，如果我没记错的话，使用纯 JavaScript 你会发现自己在输入这个：

```
var category = document.getElem.... . options[put-index-here];
//JavaScript also lets you create <option> elements with the Option() constructor 
```

无论如何，我的观点是你最好使用 JavaScript 的可用方法来完成工作，而不是依赖于 innerHTML fpr 任何你可能需要的东西，我知道 innerHTML 是完成工作的最简单和最快的方法，但如果我可以说它就像如果您只使用和标签构建了一个完整的 HTML 页面，而不是使用有助于使一切更清晰的各种语义标签。

作为未来使用的最后一点，如果您对 jQuery 感兴趣，这将为您提供一种通过 CSS 选择器以比普通 JavaScript 更高级的方式操作 DOM 的不同方式。

您也可以查看此链接： [innerHTML 的替代品](http://www.bestcodingpractices.com/break_your_innerhtml_addiction-2719.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T15:00:06.310

对不起，但你的问题不是很清楚。您所指的*HTML 标题*到底是什么？

如果它是您要修改的元素，请使用：

```
element.setAttribute('title', 'new-title-here'); 
```

如果要修改窗口标题（显示在浏览器选项卡中），可以执行以下操作：

```
document.title = "the new title"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T15:01:57.040

该`<title>`元素是*不可见*的，它只是间接显示 - 在窗口或选项卡标题中。这意味着您要更改窗口/选项卡标题中显示的任何内容，而不是 HTML 代码本身。您可以通过更改[`document.title`属性](https://developer.mozilla.org/en-US/docs/DOM/document.title)来做到这一点：

```
function remove_mp4()
{
  document.title = document.title.replace(title.match(".mp4"), "");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T15:02:08.947

您已从`.value`属性中读取元素，因此您也应该将其写回：

```
document.getElementsByName("title").value = new_title 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T15:02:17.620

如果您指的是更改名为 title 的元素中的文本内容，请尝试使用`innerHTML`

```
 var title = document.getElementsByName("title").value;
 document.getElementsByName("title").innerHTML = title.replace(title.match(".mp4"), ""); 
```

来源：[https ://developer.mozilla.org/en-US/docs/DOM/element.innerHTML](https://developer.mozilla.org/en-US/docs/DOM/element.innerHTML)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-06T15:11:33.927

我假设您的问题仅与标题更改有关，而与其他问题无关；另外，我假设您的意思是更改文档中具有“标题”作为`name`属性的所有元素，而不是文档标题。

在这种情况下，您确实可以使用`document.getElementsByName("title")`.

要处理`name="title"`元素，您可以执行以下操作：

```
titleElems=document.getElementsByName("title");
for(i=0;i<titleElems.length;i++){
    titleInner=titleElems[i].innerHTML;
    titleElems[i].innerHTML=titleInner.replace(titleInner.match(".mp4"), "");
} 
```

对于`name="description"`元素，使用这个：（假设页面上只有**一个** `name="description"`元素，或者你想要第一个）

```
document.getElementsByName("description")[0].value="Subscribe."; 
```

我不太确定关键字（我现在还没有 YouTube 页面），所以假设它是一个文本字段/区域，就像描述一样：

```
document.getElementsByName("keywords")[0].value=prompt("Please enter keywords:",""); 
```

同样，根据您的问题，它只是设置`.value`了类别的东西：

```
document.getElementsByName("description")[0].value="<option value='27'>Education</option>"; 
```

但是，在最后一个，请注意我将 in 更改`"27"`为`'27'`: 你不能将双引号放在双引号字符串中，假设它们的处理方式与任何其他字符一样:)

这有帮助吗？:)

# ajax - 如何卸载 Flash 应用程序

> ID：11830741
> 
> 赞同：1
> 
> 时间：2012-08-06T14:54:25.337
> 
> 标签：ajax, actionscript-3, flash

我通过 ajax 加载 flash 应用程序，后来我想完全卸载它。这个操作可以重复几次。如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T16:47:38.680

如果你使用 swfobject，你可以使用 removeSWF 方法来做到这一点。来自 SWFObject 文档：

> 从您的网页中删除 SWF。专为安全（仅在加载 SWF 后删除它，以避免损坏的引用）和完全（使引用无效以避免内存泄漏）而构建。

[http://code.google.com/p/swfobject/wiki/api](http://code.google.com/p/swfobject/wiki/api)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T15:42:27.737

[http://api.jquery.com/remove/](http://api.jquery.com/remove/)

所以基本上删除 div

```
$('#divId').remove(); 
```

并重新创建 div 的空白版本

# batch-file - SET /p 不集中在 Batch 中。空格问题

> ID：11830742
> 
> 赞同：4
> 
> 时间：2012-08-06T14:54:30.193
> 
> 标签：batch-file, batch-processing

这是我的 TXT：

```
echo         x  1\.   Enter               x  
echo         x  2\.   Leave               x
echo         xxxxxxxxxxxxxxxxxxxxxxxxxxxxx
echo:

set /p Menu=               Enter number {1,2}: 

if not '%Menu%'=='' set Menu=%Menu:~0,1%
if '%Menu%'=='1' goto ConvM 
```

我的 txt 在家里被转换为 *.bat，当批处理运行时，短语“输入数字 {1,2}：”的中心部分正好位于分隔符“x”的中间。结果如下图：

```
 x  1\.   Enter               x  
     x  2\.   Leave               x
     xxxxxxxxxxxxxxxxxxxxxxxxxxxxx

          Enter number {1,2}: 
```

我的 txt 在我工作的公司转换为 *.bat ，当批处理运行时，它显示一些偏移量，如下所示：

```
 x  1\.   Enter               x  
     x  2\.   Leave               x
     xxxxxxxxxxxxxxxxxxxxxxxxxxxxx

Enter number {1,2}: 
```

我也将我的 txt 转换为 CMD，但结果是一样的。在家里我有一个 Windows XP，在工作我有 Windows 7。

我应该怎么做才能让“输入数字 {1,2}：”集中在任何计算机中的“x”上？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T15:57:13.290

`SET /P`不幸的是，Windows 7（我认为 Vista 也是）忽略了提示符中的前导空格。空白字符包括空格、制表符和不间断空格 (0xFF)。

解决方案并不直观，但很简单。只需在提示前加上退格 (0x08) 字符即可。下面的代码以编程方式定义了一个包含退格字符的变量。然后很容易根据需要将它包含在任何提示中。

```
@echo off
setlocal

::Define a BS variable containing a backspace (0x08) character
for /f %%A in ('"prompt $H & echo on & for %%B in (1) do rem"') do set "BS=%%A"

echo         x  1\.   Enter               x
echo         x  2\.   Leave               x
echo         xxxxxxxxxxxxxxxxxxxxxxxxxxxxx
echo:

set /p Menu=%BS%               Enter number {1,2}: 
```

通常退格会导致行光标后退一个位置，然后下一个字符将覆盖那里的内容。但是由于提示总是从第一个位置开始，所以没有空间可以备份一个。退格实际上不接受允许在提示符中使用前导空格:-)

如果需要，您可以在退格符前面放置另一个字符，但这不是必需的。退格键会将行光标向后退一个位置，然后您所需的提示符将覆盖不需要的字符。

```
set /p Menu=x%BS%               Enter number {1,2}: 
```

**编辑 - 这是`FOR /F`定义 BS 变量的行的解释**

该`PROMPT`命令控制在 ECHO 为 ON 时显示为每行输出前缀的文本。默认情况下，它是当前目录，后跟`>`字符。

使用`PROMPT $H`导致提示为`<backspace><space><backspace>`。因此，类似的命令`REM`将导致输出`<backspace><space><backspace>REM`.

在执行的一行中有一串命令。通常，如果命令出现在发出 ECHO ON 的同一行上，则不会回显命令。该规则的例外是任何作为 FOR DO 子句的一部分出现的命令都会*被*回显。这就是 REM 命令在 FOR 循环中“执行”的原因——所以我们得到了 REM 命令的输出。

整个命令字符串在外`FOR /F`循环中执行。该字符串用单引号括起来以告知`FOR /F`执行命令。在单引号内，字符串用双引号括起来。双引号保护命令连接`&`运算符。通常一串命令不能用双引号括起来。但它在这种情况下有效，因为它是如何`FOR /F`工作的。这些命令是通过隐式执行的`CMD /C "command string"`。所以在这种情况下使用双引号是完全可以接受的。

如果不使用双引号，则`&`必须使用以下字符对字符进行转义`^`：

```
('prompt $H ^& echo on ^& for %%B in (1) do rem') 
```

最后，由于默认`FOR /F DELIMS`为`<tab><space>`，因此 REM 命令的输出将被解析为令牌，并且只保留第一个令牌。最终结果是由单个`<backspace>`字符组成的 BS 值。

# php - 如何使用 xpath/php 获取 xml 文件中的节点名称？

> ID：11830745
> 
> 赞同：0
> 
> 时间：2012-08-06T14:54:46.040
> 
> 标签：php, xml, xpath, xmlnode

我有一个大的 xml 文件，我需要打印具有特定命名空间及其节点名称（使用 PHP）的每个条目。

例如，给定以下 xml 结构：

```
 <file>
        <myNamespace:node1>entry1</myNamespace:node1>
        <myNamespace:node2>entry2</myNamespace:node2>
        ... [any other nodes here] ...
    </file> 
```

我想为带有 myNamespace 命名空间的 xml 文件中的每个节点打印一个 [node1, entry1], [node2, entry2] 等元组。问题是，我不知道如何获取节点的名称（'node1'、'node2'、...），我只获取条目。现在我正在使用这段代码：

```
 foreach($xml->xpath('myNamespace:*') as $value) {
        echo $value.'<br />';
    } 
```

我读了一些关于 name() 和 local-name() 函数的东西，但我无法让它工作:(谢谢你帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T16:13:49.717

您应该使用`getName()`- 尝试类似：

```
foreach($xml->xpath('myNamespace:*') as $value) { 
    echo $value->getName().'='.$value.'<br />'; 
} 
```

# java - 如何从java中的字符串数组中获取两个随机值的总和？

> ID：11830746
> 
> 赞同：0
> 
> 时间：2012-08-06T14:54:46.027
> 
> 标签：java, arrays, arrayofstring

我正在做一个卡片对游戏，它从字符串数组中生成两个随机值。我想知道的是如何从字符串数组中获取两个随机值的总和以确定获胜者。这是代码

```
import java.util.*;

public class Cards {
private String suit;
private String face;
private String[] cardSuits;
private String[] cardFaces;
private Random ran;

public Cards() {
    ran = new Random();
    cardSuits = new String[] { "of Spade", "of Hearts", "of Diamonds",
            "of Clubs" };
    cardFaces = new String[] { "Ace", "2", "3", "4", "5", "6", "7", "8", "9",
            "10", "Jack", "Queen", "King" };

}

public String setPlayerCardSuit() {
    suit = cardSuits[ran.nextInt(4)];
    return suit;

}

public String setPlayerCardFace() {
    face = cardFaces[ran.nextInt(13)];
    return face;
}

public String setPlayerCardSuit2() {
    suit = cardSuits[ran.nextInt(4)];
    return suit;

}

public String setPlayerCardFace2() {
    face = cardFaces[ran.nextInt(13)];
    return face;
}

public String setCompCardSuit() {
    suit = cardSuits[ran.nextInt(4)];
    return suit;

}

public String setCompCardFace() {
    face = cardFaces[ran.nextInt(13)];
    return face;
}

public String setCompCardSuit2() {
    suit = cardSuits[ran.nextInt(4)];
    return suit;

}

public String setCompCardFace2() {
    face = cardFaces[ran.nextInt(13)];
    return face;
}

public void getResults() {
    System.out.println("Here are your cards: " + setPlayerCardFace() + " "
            + setPlayerCardSuit() + " and " + setPlayerCardFace2() + " "
            + setPlayerCardSuit2());
}

public void getCompCard() {
    System.out.println("Here's the computer's cards: " + setCompCardFace()
            + " " + setCompCardSuit() + " and " + setCompCardFace2() + " "
            + setCompCardSuit2());
} 
```

}

这是测试 Cards 类的代码：

```
import javax.swing.JOptionPane;

public class TestCards {
public static void main(String[] args) {
    Cards playerCards = new Cards();
    Cards computerCards = new Cards();

    int confirm, x = 1;
    while (x == 1) {
        JOptionPane.showMessageDialog(null,
                "Random Card game \nPlease press OK to Start Game",
                "Card Pair Game", JOptionPane.INFORMATION_MESSAGE);

        JOptionPane.showMessageDialog(
                null,
                "Here are your Cards: " + playerCards.setPlayerCardFace()
                        + " " + playerCards.setPlayerCardSuit() + " and "
                        + playerCards.setPlayerCardFace2() + " "
                        + playerCards.setPlayerCardSuit2()
                        + "\nThe Computer's Cards are: "
                        + computerCards.setCompCardFace() + " "
                        + computerCards.setCompCardSuit() + " and "
                        + computerCards.setCompCardFace2() + " "
                        + computerCards.setCompCardSuit2());

        confirm = JOptionPane.showConfirmDialog(null, "Game Ends. Again?",
                "Game Over", JOptionPane.YES_NO_OPTION);

        if (confirm != JOptionPane.YES_OPTION) {
            x = 2;
        }
    }
}
} 
```

现在缺少的是确定获胜者的代码。

PS：我是Java编程的初学者..所以如果你看到不寻常的代码使用请多多包涵:)

* * *

我已经尝试过 Dylan 的建议，但我似乎无法让它发挥作用.. 而是使用了他的想法并将此代码添加到 Cards 类。

```
public int playerValues(){
    int temp = 0;
    if(face != cardFaces[0] && face != cardFaces[10] && face != cardFaces[11] && face != cardFaces[12]){
        temp = Integer.parseInt(face);
    }else if(face == cardFaces[0]){
        temp = 1;
    }else if(face == cardFaces[10]){
        temp = 11;
    }else if(face == cardFaces[11]){
        temp = 12;
    }else if(face == cardFaces[12]){
        temp = 13;
    }
    return temp;
}
public int computerValues(){
    int temp = 0;
    if(face != cardFaces[0] && face != cardFaces[10] && face != cardFaces[11] && face != cardFaces[12]){
        temp = Integer.parseInt(face);
    }else if(face == cardFaces[0]){
        temp = 1;
    }else if(face == cardFaces[10]){
        temp = 11;
    }else if(face == cardFaces[11]){
        temp = 12;
    }else if(face == cardFaces[12]){
        temp = 13;
    }
    return temp;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T14:58:43.860

你有一个问题，不是所有的卡片都是独一无二的。两个玩家可以拥有相同的牌。他们甚至都可以是同一张卡。

相反，您应该生成所有可能卡片的列表。我建议使用一个`Card`类。用来洗牌`Collections.shuffle`。这样所有的玩家都会有不同的牌。

您需要比较一组卡片的规则。先用英文定义，再翻译成代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T15:03:08.620

您不应该使用字符串数组来保存卡片面，而是使用 CardFace 数组，具有名称（用于显示）和值（用于计算面的总和）。由于只有 13 个值，它应该是一个枚举：

```
public enum CardFace {
    ACE("Ace, 1),
    TWO("2", 2),
    ...
    KINK("King", 13);

    private String face;
    private int value;

    private CardFace(String face, int value) {
        this.face = face;
        this.value = value;
    }

    public String getFace() {
        return this.face;
    }

    public int getValue() {
        return this.value;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T09:43:10.510

好像没有人讨论过获取组合，所以我就在这里说一下。如果有什么不明白的，欢迎在这里评论。

**同花顺 - 你需要一个 for 循环。**

首先，您应该按升序（1、2、3、4、5 等）对玩家牌的数组进行排序。现在，从第一个条目开始检查，最低的。

请注意，数组卡片仅以整数形式存储手牌的值。

```
// Variables to store the current and previous cards.
int previous = 0;
int current = 0; 

cards = Arrays.sort(cards); // Sort cards into ascending order

boolean straightFlush = false;

for (i = 0; i < cards.length; i++) {
    current = cards[i];
    if (!current == cards[0]) { // If current is not the first card, execute the rest. You don't want random errors popping up, do you? :)
        // Check if it is the last card - a straight flush would then be present
        if (current == cards[cards.length - 1]) {
            straightFlush = true;
            break;
        }

        // Checks if current - 1 != previous or the current card is not consecutive to the previous card
        if (current - 1 != previous) {
            break;
        }
    }
... 
```

那么如何比较双手呢？如果是同花顺，则找出牌中的最高值。

我很快就会发布更多关于这个的信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T15:07:38.313

使用该`String.parseInt()`方法将返回字符串中的数字。但是，您会遇到 ace、kind、queen、jack 的问题，因为它们不是数字。我建议创建如下声明：

```
if(!cardFaces[x].equals("Ace")&&!cardFaces[x].equals("Queen")&&!cardFaces[x].equals("King")&&!cardFaces[x].equals("Jack"))
  {
    int temp = cardFaces[x].parseInt();
   }
else if(cardFaces[x].equals("Ace")
{
  int temp = 1;
}
else if(cardFaces[x].equals("King") || cardFaces[x].equals("Queen") || cardFaces[x].equals("Jack"))
{
 int temp = 10; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T15:00:07.947

我真的建议您的 Card 是一个类或至少是一个枚举。然后将它们相加将是有意义的。

另外，请解释这两个

```
public String setCompCardFace()
public String setCompCardFace2()  //identical 
```

几乎你需要的是让每个玩家都有一个卡片实例，就像你开始的那样

```
public class Cards extends ArrayList<Card> 
```

但是一路走来，您迷路了，并将这两者混为一堂，实际上什么也没做。

所以在你的卡片里你把这些

```
public class Card 
{
    private String suit;
    private String face;

    public Card(String face, String color)
    {
        suit = color; this.face = face;
    }

    @Override
    public int compareTo(Card otherCard); //implement this yourself
 } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-08T13:08:26.947

我设法通过修改`TestCard`类而不是显示字符串数组中的两个随机值来确定获胜者。我对其进行了更改，使其仅显示数组中的一个值。有了这个，我设法确定谁是赢家。

# php - 有新消息时如何提醒

> ID：11830760
> 
> 赞同：1
> 
> 时间：2012-08-06T14:56:18.507
> 
> 标签：php, javascript

我有一个用 PHP + MySQL + Javascript 编写的在线聊天室程序

我用来`jQuery.post()`从`chat.php`. 这个 php 程序从 MySQL 读取数据并将`echo`其发送到页面上。

当有新消息进来时如何提醒用户？我只希望它在聊天室页面没有聚焦时发出警报。

顺便说一句，闪烁网页标题是提醒用户的好主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T15:16:24.007

要检查页面是否聚焦，您可以使用该[`document.hasFocus`](http://help.dottoro.com/ljmnivgu.php)功能。`true`如果文档有焦点，则返回，`false`否则返回。

虽然 Opera 似乎不支持它，所以如果支持 Opera 对您很重要，您可以观察`focus`和`blur`事件`window`以确定窗口是否处于焦点（[这里是一个示例](https://stackoverflow.com/a/3479936/388916)。）

* * *

关于“*如何提醒用户*”的话题，这完全由你决定。您可以按照正常方式进行操作，在您的标题前加上“ *(x) ”，其中**x*是新消息的数量。您还可以使用 Flash 甚至更好的 JavaScript 音频 API 来提醒用户噪音：

```
var sound = new Audio('sound-file.wav');
sound.play(); 
```

不过，请务必**严格自愿**地保留音频反馈。

* * *

如果您想更加花哨，可以查看[Chrome 桌面通知](http://www.chromium.org/developers/design-documents/desktop-notifications/api-specification)。每当有新消息到达时，任何运行 Chrome 的用户都可以收到桌面通知（与您收到 Skype 或 MSN 消息时收到的通知相同）。[这是一个使用示例](http://www.210computing.com/google/chrome_notifications.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T08:53:53.950

您必须使用 HTML5 标签而不是使用 Javascript/JQuery 来控制它！

这对我有用： [http ://css-tricks.com/play-sound-on-hover/](http://css-tricks.com/play-sound-on-hover/)

在 html 源代码中：

```
<audio id="chat_sound" controls>
    <source src="audio/notification.mp3" type="audio/mp3" preload="auto">
    <source src="audio/notification.ogg" type="audio/ogg" preload="auto">
    Your browser isn't invited for super fun audio time.
</audio> 
```

在 JavaScript 中：

```
var sound_notification = $("#chat_sound")[0]; 
```

那么你可以使用这些调用：...``

```
sound_notification.pause();
sound_notification.play(); 
```

...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T15:11:14.647

给每条消息一个唯一的 ID，例如每 5 秒轮询一次您的 chat.php，然后将客户端的最后一条消息 ID 与您从 chat.php 中获得的信息进行比较。

这很容易做到。

如果你想要一些更酷、更实时的解决方案，你应该看看 www.pubnub.com 或类似的服务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T15:11:38.717

您可以使用 facebook、skype 或其他著名的“聊天室”方法。

当您收到用户的新回复时，您有两种方法：

*   你添加一个通知出现在窗口中（当在 windows 或 mac 中使用Skype时......）
*   您想更改菜单中聊天按钮的颜色（和手电筒几秒钟）。

红色是侵略性的颜色，但这取决于您的网站颜色...

对于手电筒，只需几秒钟，否则用户会厌倦聊天系统......

[对于网页设计最佳实践，这里](http://www.smashingmagazine.com/web-design-essentials-examples-and-best-practices/)有一篇非常好的文章......

# jquery - 调整父菜单jquery的大小？

> ID：11830763
> 
> 赞同：3
> 
> 时间：2012-08-06T14:56:29.643
> 
> 标签：jquery, resize

我一直在摆弄 jquery resize，尽管我似乎无法获得所需的效果。

基本上，我有一个菜单，我想用一个浮动到菜单右侧的按钮来调整它的大小，一旦拖动它就会调整菜单的大小，如果可能的话，我还想限制调整大小！

请帮忙？这是我到目前为止所拥有的:(

[http://jsfiddle.net/shannonhochkins/uGtat/](http://jsfiddle.net/shannonhochkins/uGtat/)

多谢你们！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T15:04:50.830

文档

[http://jqueryui.com/demos/draggable/](http://jqueryui.com/demos/draggable/)

jQuery

```
$('#drag').disableSelection().draggable({
    axis: "x",
    containment: "parent",
    drag: function(event, ui) {
        $('#menu').width($(this).offset().left);
    },
    stop: function(event, ui) {
        $('#menu').width($(this).offset().left);
    }
});​ 
```

CSS

```
#parent {
    position: relative;
    width: 300px;
    height: 70px;
    background: #ccc;
}
#drag, #menu {
    position: absolute;
    height: 70px;
    width: 30px;
    background-color: green;
}
#drag {
    width: 15px;
    background-color: red;
    left: 30px;
    cursor: pointer;
}​
​ 
```

小提琴

[http://jsfiddle.net/iambriansreed/gkMPA/](http://jsfiddle.net/iambriansreed/gkMPA/)

# java - RTF Java 解析器

> ID：11830764
> 
> 赞同：1
> 
> 时间：2012-08-06T14:56:36.790
> 
> 标签：java, javascript, parsing, document, rtf

这是我的问题。

我需要阅读 RTF 文档并呈现到网页（某种 google 文档），但这些文档是模板，想法是用户只能编辑某些文本，而不是标记为“模板逻辑”的文本。

到目前为止，我已经看到一堆 RTF 库，它们只执行渲染，但不允许您访问可以动态迭代的对象以检查 RTF 文档的结构。

我的想法是确定哪些可以编辑，哪些不能，将所有这些信息（图像、文本、表格、页眉、页脚）放入 json 并将其发送到我的 JS 客户端。

也许这是一个疯狂的想法，有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T09:32:59.980

[Docmosis](http://www.docmosis.com)可能会有所帮助，因为它允许您使用文档和模板，并且您可以从 Docmosis 中提取模板的“分析”（例如字段列表）。从您的描述中很难确定它是否符合您的目的。请注意，我为制作 Docmosis 的公司工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T14:59:18.607

当我阅读“模板”时，我会想到“速度”。我想知道您是否可以通过将模板与动态数据分开来解决这个问题。我想知道您是否可以通过让用户修改动态数据并仅在最后一刻将其与静态、未经编辑的模板结合来解决这个问题。

# windows-phone-7 - 开发模式下的 WP7 ListPicker 控件

> ID：11830765
> 
> 赞同：0
> 
> 时间：2012-08-06T14:56:37.573
> 
> 标签：windows-phone-7, listpicker

我正在使用 WP7 ListPicker 控件在当前表单上显示 7 个项目。我设置了 ItemCountThreshold="7"，所以所有项目都以当前表单显示，就像下拉控件一样。

这很好用。

我遇到的问题是，由于我需要控件占据整个 Grid 以便所有项目正确显示，并且由于控件“带到前面”，因此我无法单击 ListPicker 下方的任何控件发展模式。运行表单时，一切正常。但是在开发模式下，单击 ListPicker 下方的另一个控件的唯一方法是将 ListPicker 发送到后面，然后处理另一个控件，然后将 ListPicker 带到前面。

有没有办法解决？

我必须将 ListPicker 放在前面，这样当表单运行并打开 ListPicker 时，ListPicker 将在其他控件之上打开。如果 ListPicker 被发送到后面并运行表单，那么当 ListPicker 打开时，其他控件会通过 ListPicker 流血。

ListPicker 是否有一个属性可以在其他控件之上打开？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T08:48:36.857

[在 Web 浏览器控件中抓取 Cookie - WP7](https://stackoverflow.com/questions/4212713/grabbing-cookies-in-web-browser-control-wp7)

查看此问题并尝试按照说明获取 cookie，并检查它们对您页面的值是否已设置。我希望我是对的

# .net - Web API 中的 Uri 路径扩展映射

> ID：11830766
> 
> 赞同：2
> 
> 时间：2012-08-06T14:56:38.773
> 
> 标签：.net, routes, asp.net-mvc-4, asp.net-web-api

我正在尝试让 Uri 路径扩展映射在 Web API 中工作。我正确设置了路线：

```
routes.MapHttpRoute(
                       name: "Api with extension",
                       routeTemplate: "api/{controller}.{ext}/{id}",
                       defaults: new { id = RouteParameter.Optional, ext = RouteParameter.Optional }
                   );

routes.MapHttpRoute(
                    name: "DefaultApi",
                    routeTemplate: "api/{controller}/{id}",
                    defaults: new { id = RouteParameter.Optional }
                ); 
```

它适用于默认路由，例如***/api/products.json/123***但对于其他方法，例如***/api/products.json?categoryid=5***我收到一条错误消息：

```
"No action was found on the controller 'Products' that matches the request." 
```

所有路由工作都没有扩展名，例如***/api/products/123***和***/api/products?categoryid=5***。有人知道我缺少什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-30T16:44:22.950

如果其他人遇到此问题，那么答案（如何使 Uri 扩展映射工作）可能如下（这对我自己有用，经过多次挫折和搜索）

将以下内容添加到您的 web.config 中的 System.WebServer 部分

```
<modules runAllManagedModulesForAllRequests="true"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T16:21:48.680

`/api/products.json?categoryid=5`将映射到以下控制器操作：

```
public class ProductsController : ApiController
{
    public string Get(int categoryid)
    {
        return categoryid.ToString();
    }
} 
```

所以确保这个控制器和动作存在。在评论部分，你似乎已经指出了一些`GetProduct(int id)`和`GetProductsByCategory(int categoryid)`行动，但这些永远不会被使用。根据 RESTful 约定，当您使用动词`Get`时将调用该操作。`GET`如果您想使用一些非 RESTful 操作名称，请确保`{action}`在路由定义中包含 。

# iphone - 使用滚动视图动态设置 TabBar 项数组

> ID：11830769
> 
> 赞同：0
> 
> 时间：2012-08-06T14:56:58.090
> 
> 标签：iphone

如何在 iPhone 上添加 TabBar？此外，我需要使用滚动视图动态设置一组 TabBar 项。

有关更多详细信息，请参阅[此网址](http://a5.mzstatic.com/us/r1000/080/Purple/v4/9b/b3/79/9bb3791e-1780-020c-3bde-e017309b4b76/mzl.myolzqar.320x480-75.jpg)

我需要创建热门新闻、城市、印度、世界等标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T16:17:30.140

`UITabBar`通常放置在屏幕底部，每个应用程序通常只有一个。有可能回避这一点，尽管苹果可能不会喜欢它。

您不直接操作`UITabBar`. 相反，您将 navigationControllers 添加到`UITabBarController`. 然后可以通过在 NavigationController 上设置 tabBarItem 属性来操作选项卡。

综上所述，在查看了屏幕截图后，我几乎可以肯定 UITabBar 是错误的选择。您最好滚动自己的控件或使用`UISegmentedControl`.

# php - PHP：如果标头定位失败，我们可以绕过吗？

> ID：11830773
> 
> 赞同：0
> 
> 时间：2012-08-06T14:57:12.220
> 
> 标签：php, redirect

我有一个移动应用程序的*URL 架构，例如-*

```
$appUrl = 'testapp://testpage/10'; 
```

现在从 PHP 开始，用户需要在 App 内部被*重定向*——如果 App 已*安装*，则不显示页面内容。所以，我正在这样做——

```
header('location: '.$appUrl); 
```

但是，如果应用程序没有安装，想绕过重定向并显示整个页面。

我还在重定向之前发送一个**标志来检查。**喜欢-

```
if($hasAppFlag)
{
    header('location: '.$appUrl);
    exit;
} 
```

但`$hasAppFlag` 并非*在所有情况下都是正确的*。所以想绕过——如果失败了。

目前正在浏览器中进行测试，并且由于未安装该应用程序而出现空白屏幕。有没有办法在 PHP 中做到这一点？[如果没有办法，可以在 JS/Jquery 中做到这一点。]

**小鬼：**

因为，它会在客户端打开APP，$hasAppFlag会通过短信发送到手机号码；因此，如果用户在没有 APP 的情况下切换到新手机，那么 - 将不会安装任何应用程序。并且重定向到 testapp://testpage/10 将失败。

**所以 $hasAppFlag 并不总是正确的**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T15:02:32.553

你说的绕过不就是if($hasAppFlag)的反面吗？如果是这样，你不能只添加一个'else'语句

```
if($hasAppFlag) {
}
else {
bypass
} 
```

史蒂夫

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T15:05:30.757

保持你的代码原样：要么`$hasAppFlag`是真的，`header`将执行和重定向，或者位于右括号之后的代码将运行。

您的代码没有什么可更改的。

# iphone - 如何在 iPhone 中包含可变长度图像作为 UITableViewCell 背景？

> ID：11830775
> 
> 赞同：0
> 
> 时间：2012-08-06T14:57:19.707
> 
> 标签：iphone, ios, user-interface, uitableview

我必须在表格视图单元格中包含一个气泡，如附图中所示作为背景。

![在此处输入图像描述](../Images/59d12288fab64971d0a35e3b8c7972ec.png)

但是气泡的高度会根据文本长度不断变化。实现这一点的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T15:16:33.223

您需要根据文本长度计算单元格高度，我通常在我的自定义`UITableViewCell`中创建一个类方法来执行此操作。

```
+ (CGFloat)cellHeightForText:(NSString *)text
{
    CGFloat cellHeight = 0.0;

    // calculate cellHeight height according to text length 

    // here you set the maximum width and height you want the text to be
    CGSize maxSize = CGSizeMake(kTextMaxWidth, kTextMaxHeight);

    CGSize size = [text sizeWithFont:TEXT_FONT 
                        constrainedToSize:maxSize 
                            lineBreakMode:UILineBreakModeWordWrap];  

    // set some minimum height for the cell (if the text is too short..)
    cellHeight = MAX(size.height, kMinHeight);  

    // here I usually increase the cellHeight according to the cell's other subviews
    // because if you have other subviews under/above the bubble you need to count them 
    // and add height to the cell...  
    cellHeight += kSomeSpaceToAdd;

    return cellHeight;
} 
```

然后你调用这个方法 `heightForRowAtIndexPath`

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    Message *currMessage = [self.myMessages objectAtIndex:indexPath.row];

    CGFloat height = [MyCustomCell cellHeightForText:currMessage.text];

    return height;
} 
```

当然你也应该根据文本长度设置气泡图框，我在自定义单元格`layoutSubviews`方法中做了一些事情，此时单元格高度已经设置好了，你可以使用它（self.bounds.size.height）来设置你的气泡图像相应地..

# php - 在 Codeigniter 中获取 url

> ID：11830779
> 
> 赞同：1
> 
> 时间：2012-08-06T14:57:38.557
> 
> 标签：php, codeigniter

我正在为我的项目使用 codeigniter。要获取我知道可以使用的 uri 段

```
$this->uri->segment(); 
```

但我的情况有点不同

我的网址看起来像

```
localhost/mediabox/home/box/21 
```

但是一旦我转到这个 url，就会出现一个弹出表单，其中用户提供了一个访问这个页面的密钥，我使用我的家庭控制器 validate_key 函数中的 ajax 方法验证密钥

当我回显 url 它给了我 localhost/home/validate_key

在调用家庭控制器的 valiate_key 时，如何从 url 栏中的 url 获取 21？

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T15:35:13.470

## 问题：

这不是错误，这是一种自然行为。

**考虑以下：**

1.  您可以通过在地址栏中输入 URL 来向服务器请求该`validate_key`功能。`current_url()` 返回`localhost/blabla/validate_key`。*不涉及 AJAX。*

2.  `validate_key`使用 AJAX请求。将执行相同的 PHP 代码。**即使您的浏览器的地址栏显示**
    ，`current_url()`也会更改为**。**`localhost/blabla/validate_key`
    **`localhost/blabla/box/21`**

那么，这意味着什么？这意味着 Codeigniter`base_url()`不关心您的地址栏，它关心它所在的功能，无论是通过`ajax`还是正常请求调用。
所以只要这个函数正在执行，*URL 就指向它*。

## 解决方案：

对于这种情况，我最喜欢的解决方案是简单地创建一个隐藏输入。

简单地说，当用户请求该`box`功能时。你正在向他展示一个弹出式表单。所以添加一个`hidden_input`字段，给它一个名称和一个值 21（取决于）。

**例如（您应该根据您的特定需求进行定制）：**

在函数显示的视图中将此添加到表单中`box`：

`form_hidden("number", $this->uri->segment(3));`;

现在这些数据将被发送到您的`validate_key`函数。我们如何访问它？这很简单！

```
function validate_key(){

$this->input->post("number");//returns 21 or whatever in the URL.
//OR if the form sends GET request
$this->input->get("number");//return 21 or whatever in the URL.
/*
 *Or , you can do the following it's considered much safer when you're ONLY
 *expecting numbers, since this function(intval) will get the integer value of
 *the uri segment which might be a destructive string, so if it's a string
 *this function will simply return 0.
 */
$number = intval($this->input->post("number"));//returns 21 or whatever in the URL.
//Or if it it GET request:
$number = intval($this->input->get("number"));//returns 21 or whatever in the URL.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T15:17:08.953

看起来您已经使用 .htaccess 删除`index.php`了 url 的一部分。因此，当您导航到时，`localhost/mediabox/home/box/21`您将值 21 传递给名为`box`的控制器中命名的函数`home`

如果您想将该值保留在`validate_key`函数中，只需在调用它时将其传递：

```
function box($param)
{
    //$param = 21
    $this->validate_key($param);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T10:39:50.240

最好使用隐藏字段并在需要时发布值。

# python - 在重新绘制 matplotlib 之前清除图形

> ID：11830782
> 
> 赞同：1
> 
> 时间：2012-08-06T14:57:43.217
> 
> 标签：python, matplotlib, tkinter, user-interaction

我有一个小应用程序，允许我使用 tKinter 比例小部件更改输入值，并查看图表如何对输入的不同变化作出反应。每次我移动刻度时，它都会绑定到一个重新计算列表并重新绘制的事件。这有点慢。

现在，我正在重新绘制整个东西，但它在使用几分钟后将一个轴堆叠在另一个轴上，数百个。

```
deltaPlot = Figure(figsize=(4,3.5), dpi=75, frameon=False)
c = deltaPlot.add_subplot(111)
c.set_title('Delta')
deltaDataPlot = FigureCanvasTkAgg(deltaPlot, master=master)
deltaDataPlot.get_tk_widget().grid(row=0,rowspan=2) 
```

主循环运行

```
c.cla()
c.plot(timeSpread,tdeltas,'g-')
deltaDataPlot.show() 
```

它正在清除初始图，但就像我说的轴是堆叠的（因为它每次都重绘一个，对应于稍微改变的数据点）。有人知道修复吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T16:47:27.050

为了提高速度，您可以做几件事：

**在plot**`remove`产生的线上运行方法：

```
# inside the loop
line, = c.plot(timeSpread,tdeltas,'g-')
deltaDataPlot.show()
...
line.remove() 
```

**或者**重新使用这条线，适当地更新它的坐标：

```
# outside the loop
line, = c.plot(timeSpread,tdeltas,'g-')

# inside the loop
deltaDataPlot.show()
line.set_data(timeSpread,tdeltas) 
```

Line2d 的文档可以在[这里](http://matplotlib.sourceforge.net/api/artist_api.html#matplotlib.lines.Line2D.set_data)找到。

您可能还想阅读[有关动画的食谱文章](http://www.scipy.org/Cookbook/Matplotlib/Animations)。

高温高压

# c++ - 处理特定异常

> ID：11830786
> 
> 赞同：0
> 
> 时间：2012-08-06T14:57:56.513
> 
> 标签：c++, exception

我有一段网络代码抛出各种异常，这些异常都被一般的 catch 异常语句捕获。

```
try {
    network code
} catch (Exception e) {
    freeaddrinfo(some_address);
} 
```

此方法的问题是异常中的 freeaddrinfo。并非所有异常情况都可以/应该调用 freeaddrinfo 并且在我的特定情况下，当传递到网络代码以连接某处的无效地址时，不应调用 freeaddrinfo。我解决此问题的想法是检索此异常引发的错误代码，并可能将其与 e.to_string 结合使用来处理此边缘情况。根据我从 Effective Java 中学到的知识，这是一种处理这个问题的脆弱方法。你建议我应该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T15:14:05.347

在 C++ 中，异常后释放资源的常用方法不是捕获异常，而是将资源包装在析构函数负责释放的对象中。这样，当管理对象超出范围（或以其他方式销毁）时，无论是否引发异常，它都会被释放。这种技术被称为[RAII](http://en.wikipedia.org/wiki/RAII)。

一个（非常基本的）管理对象可能如下所示：

```
struct AddressInfo {
    addrinfo * info;

    // Constructor takes ownership of resource
    explicit AddressInfo(addrinfo * info) : info(info) {}

    // Destructor releases resource
    ~AddressInfo() {freeaddrinfo(info);}

    // Prevent shallow copying, so only one object manages the resource
    AddressInfo(AddressInfo const &) = delete;
    void operator=(AddressInfo const &) = delete;
}; 
```

然后您的代码将变为：

```
// some network code
AddressInfo address(some_address);
// some more network code 
```

无需任何异常处理或手动清理代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T15:00:45.230

如果你坚持使用异常，那么网络代码应该根据错误的性质提出一个非常具体的异常（类型）。也就是说，网络代码应该引发一个异常，就其本质而言，它暗示是否`freeaddrinfo()`可以调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T15:09:51.060

创建更具体的异常并抛出它们？然后你可以先抓住那些，然后再回到一般的捕获。

```
try {
network code
} 
catch (SomeException1 e) { freeaddrinfo(some_address); }
catch (SomeException2 e) { freeaddrinfo(some_address); }
catch (Exception e) { } 
```

# android - 在前面缩放动画？

> ID：11830787
> 
> 赞同：3
> 
> 时间：2012-08-06T14:58:00.020
> 
> 标签：android, animation, layout

我正在将缩放动画应用于视图（网格项），该视图位于网格视图中，位于寻呼机中，位于线性布局中。

除了我的缩放网格项变得大于网格视图/寻呼机之外，一切都已经正常工作，并且它被剪切（或隐藏？被寻呼机的兄弟姐妹）。我尝试将`android:clipChildren="false" android:clipToPadding="false"`所有有父视图并支持它的地方放置（在线性布局和网格视图中），但没有效果。

我还尝试在寻呼机上调用bringToFront()，但这也不起作用，仍然会被剪裁，除此之外还会导致寻呼机重新定位在布局的底部，这是不需要的。

我如何在一切面前播放动画？

非常感谢您的帮助，谢谢！

# objective-c - CALayer setContents 不适用于 10.5

> ID：11830790
> 
> 赞同：0
> 
> 时间：2012-08-06T14:58:07.893
> 
> 标签：objective-c, cocoa, calayer, nswindow

我有以下代码

```
[[mWindow contentView] setWantsLayer:YES]; //mWindow is NSWindow object
[[mWindow contentView] layer].contents = [NSImage imageNamed:@"1.png"]; 
```

此代码在 10.6 上运行良好，但在 10.5`mWindow`上没有显示任何内容。为什么？

```
NSlog(@"%@",[[mWindow contentView] layer].contents)  //10.5
NSImage 0x15d030 Size={565, 305} Reps=(
    NSBitmapImageRep 0x166400 Size={565, 305} ColorSpace=NSCalibratedRGBColorSpace BPS=8 BPP=24 Pixels=565x305 Alpha=NO Planar=NO Format=0
) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T16:12:56.430

因为你不能在 10.5 中传递一个`NSImage`to 。`setContents:`请参阅[CALayer](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CALayer_class/Introduction/Introduction.html)的文档。

> 内容 提供图层内容的对象。动画。
> 
> @property(retain) id contents Discussion 该属性的默认值为nil。当此属性为 nil 时，图层内容将呈现给图层管理的后备存储。
> 
> 您可以将此属性设置为 CGImageRef 以显示图像的内容来代替图层的内容。**（在 OS X 10.6 及更高版本中，您还可以将其设置为 NSImage 对象。）**将图像分配给此属性会将图层自己的后备存储替换为图像的内容。
> 
> 可用性 在 OS X v10.5 及更高版本中可用。另请参见 @property contentsRect 相关示例代码 LightTable 在 CALayer.h 中声明

# richfaces - 如何使 Richfaces 面板组件可调整大小

> ID：11830792
> 
> 赞同：2
> 
> 时间：2012-08-06T14:58:08.847
> 
> 标签：richfaces

如何在 IE 浏览器中将 Richface 中的面板组件设置为可调整大小。我正在使用 Richface 4.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-24T12:27:40.430

在 a 内使用并设置所需的宽度。见代码。

```
 <h:panelGrid width="40%">
            <rich:panel header="Test-Panel-Size">
                    <YOUR CODE />
            </rich:panel>
    </h:panelGrid> 
```

# php - 改进我当前的数据库设计以存储员工的日程安排

> ID：11830793
> 
> 赞同：1
> 
> 时间：2012-08-06T14:58:11.540
> 
> 标签：php, mysql, database-design

我需要想出一个能够将员工的日程表存储在数据库中的软件。我目前有这样的设计：

```
 CREATE TABLE IF NOT EXISTS `schedules` (
   `id` int(11) NOT NULL AUTO_INCREMENT,
   `employee_id` varchar(32) NOT NULL,
   `day_of_week` int(2) NOT NULL,
   `starting_time` time DEFAULT NULL,
   `ending_time` time DEFAULT NULL,
    PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ; 
```

很直接。打印今天的日期，找出星期几，并从数据库中检索所有匹配项，但我想知道实现相同目标的更好方法。

我需要在日历上显示员工的日程安排，并且需要将日期传递给日历才能显示。但是，如果我知道的唯一信息是某个特定员工将在周三上班，我无法将日期传递给日历。

考虑到后一种数据库设计，有没有办法检索一个月/年的所有星期三或星期一？

谢谢！

**编辑**

我需要帮助（或更好的选择）将星期几更改为实际日期。

这些是我的“限制”：

*   我的日历控件需要一个日期才能在 UI 中显示“事件”。
*   员工应该只提交一次他们的日程安排。

例如：John Doe 每周一、周三和周五工作。8:00 - 12:00。

使用我当前的数据库设计，该信息以以下方式表示：

```
ID, employee_id, day_of_week, starting_time, ending_time
1, John Doe, 1, 8:00, 12:00
2, John Doe, 3, 8:00, 12:00
3, John Doe, 5, 8:00, 12:00 
```

我需要能够将给定月份的日期传递给日历 UI。

例如，我应该能够想出一种方法来告诉我的日历控件：John Doe 将在 6 日、13 日、20 日和 27 日工作，考虑到我拥有的唯一信息是 "day_of_week" = 1 (星期一）

**编辑 2**

我目前但丑陋的解决方案是：遍历一个月中的所有日子，并逐日查询数据库。

**编辑 3 - 解决方案**

感谢RS，我能够解决我的问题。我保持`schedules`表原样，但我创建了*rs建议的表 在创建**rs* 共享的文章中描述的表之后 ，以下查询完成了这项工作：

```
 SELECT CONCAT(users.firstname,\" \",users.lastname) as employee_name, 
 DATE_FORMAT(DATE, '%a %b %d %Y') as date, schedules.starting_time,
 schedules.ending_time FROM dates_d 
 RIGHT JOIN schedules ON schedules.day_of_week = dates_d.day_of_week
 LEFT  JOIN users ON schedules.employee_id = users.ID 
```

我对一个数组进行了 JSON 编码，日历控件终于像魅力一样工作了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T19:23:56.810

您可以创建日期表并使用该表中的密钥并存储在这里。日期表将允许您通过不同的日期变量查询数据，例如：`day, week, day of week, quarter`等 - dwhworld.com/2010/08/date-dimension-sql-scripts-mysql

您的`schedules`表将有`id, emplid, date_id`，您可以在一个查询中加入`schedules`表`date`并`schedules.date_id = datetble.date_id`获取日期、星期几。然后，您可以将此日期字段与您的控件一起使用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T15:07:16.433

为什么不让你的**day_of_week**列改为**日期**类型，这样如果你想从这个日期获取日期，你可以使用 MySQL 的[DayOfWeek](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_dayofweek)函数。您可以使用相同的日期传递到您的 UI 中的日历控件（我认为这就是您所得到的）。

详细说明您的评论：用户不会输入 John Doe 计划工作的日期（可能通过[jQuery UI 的 datepicker](http://jqueryui.com/demos/datepicker/)），然后在 UI 级别呈现您的日程安排时，您将使用以下查询来检索他们的周一日程：

```
SELECT * 
FROM schedules 
WHERE DAYOFWEEK(schedule_date) = 1
AND employee_id = (
    SELECT employee_id
    FROM employees
    WHERE employee_name = 'John Doe'
) 
```

**显然，这个查询对您的雇员**表做了一些假设，它不是特别优雅，但它可以解释我的意思。

**回复：编辑**

好的，现在我明白你的意思了。基本上，您正在使用一个函数，该函数将为您提供两个范围（可能）之间的所有日期，这些日期位于指定的日期（比如说星期一）。似乎这 [已经在 PHP 中完成了，](https://stackoverflow.com/questions/2045736/getting-all-dates-for-mondays-and-tuesdays-for-the-next-year)所以这可能有用吗？或者确实有一个特定的技术需要这样做？

**编辑 3**

这似乎是一个更优雅的解决方案：[获取 mondays tuesdays 等](https://stackoverflow.com/questions/6362298/get-mondays-tuesdays-etc)- 从中​​您可以在 SQL 中查询 DayOfWeek 并返回一个整数数组，您可以将其作为第三个参数传递给它们的函数。

# c++ - 内联汇编，输出指令

> ID：11830794
> 
> 赞同：1
> 
> 时间：2012-08-06T14:58:12.060
> 
> 标签：c++, assembly, io, x86

我正在尝试导出 .dll 文件并尝试在我的 c# 应用程序中使用它来将数据写入端口。在我的 .cpp 文件（创建 .dll）中，如果我使用“out”命令，它会给出“错误 C2415：不正确的操作数类型”错误消息。你知道为什么我不能使用这个“out”命令吗？（顺便说一句，“mov”命令运行良好）

请参阅下面的代码：

```
#include <stdio.h>

extern "C" __declspec(dllexport) void enableWatchDog()
    _asm {
          out 66,41
          out 62,4
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T15:06:12.990

`out`有六种形式：

*   `out imm8, AL`
*   `out imm8, AX`
*   `out imm8, EAX`
*   `out DX, AL`
*   `out DX, AX`
*   `out DX, EAX`

您的用法与它们都不匹配。也许这会起作用（未经测试）：

```
mov al, 41
out 66, al
mov al, 4
out 62, al 
```

我对 x86 上的 IO 端口没有太多经验，但从我能找到的情况来看，66 和 62 对我来说似乎有点可疑。他们不应该是 66h 和 62h 吗？41h（可能是两个标志集，或 ASCII 'A'）对我来说也比 41（一个相当随意的数字）更有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T15:08:36.857

汇编不是一种高级语言，您可以在其中插入任意表达式。该`out`命令只能将`Ax`寄存器用于第二个操作数，其中 Ax 表示 AL、AX 或 EAX。所以像这样重新制定：

```
mov al, 41
out 66, al
mov al, 4
out 62, al 
```

该`out`命令具有特权；它仅适用于 Windows 的内核级驱动程序，尝试在常规程序中执行此操作会导致“无效操作”错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T15:04:09.323

您为 C++ dll 使用的目标平台是什么？您需要编译为 x86 代码，而不是 CLR。

# java - 使用 Spring 和 Heroku 进行身份验证

> ID：11830799
> 
> 赞同：1
> 
> 时间：2012-08-06T14:58:22.667
> 
> 标签：java, spring, tomcat, heroku

我有一个部署到 Heroku 的应用程序，它使用 Spring Security，并且通过扩展，`HttpSessionSecurityContextRepository`. 意识到`HttpSession`当扩展到多个测功机时会导致问题，我正在尝试使用标志（使用 Heroku memcache 插件）配置 webapp-runner（ [https://github.com/jsimone/webapp-runner ）。](https://github.com/jsimone/webapp-runner)`--session_manager memcache`

使用 Apache 和`mod_proxy`、两个 Tomcat 实例和 memcached 1.4.13 的本地配置工作正常。然而，当部署到 Heroku 时，即使使用单个 dyno，它也会失败 - 随机重定向到登录页面，就像未经身份验证一样，表明会话存储不工作。相同的 Procfile，通过等验证`MEMCACHE_*`变量。`heroku config`

有没有人有类似配置的经验？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T22:50:55.600

更新：配置按设计工作。

该问题是由 Spring Security 错误配置引起的。隐藏在应用程序中的错误图像 URL 触发了重定向。`intercept-url`虽然这应该只是一个 404，但context-security.xml 中还有一个包罗万象的模式，访问权限设置为`IS_AUTHENTICATED_FULLY`. 结果是任何带有错误 URL 的页面都被重定向到登录页面。更正这些 URL 解决了部署到 Heroku 时的问题，但我无法解释为什么它没有显示在本地系统上。

# java - 无法通过 Android 模拟器发送电子邮件

> ID：11830803
> 
> 赞同：0
> 
> 时间：2012-08-06T14:58:36.947
> 
> 标签：java, android, eclipse, email, camera

我写了一个电子邮件应用程序，并在 android 模拟器上运行它。基本上，这个应用程序使用相机捕获图片，然后通过电子邮件将其发送给某人。但问题是当我尝试发送电子邮件或从模拟器捕获图像时，我收到错误 FORCE CLOSE。我怎么解决这个问题？我没有安卓手机来测试手机上的应用程序。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T15:31:15.290

测试环境是否连接到您的 SMTP 服务器？有时防火墙会阻止诸如模拟器之类的应用程序访问诸如 SMTP 服务器之类的安全源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-01T06:58:06.393

在您的模拟器中配置电子邮件客户端。然后尝试发送电子邮件。还要在您的 AndroidManifest.xml 中添加必要的权限，例如“uses-permission android:name="android.permission.INTERNET"”。

# google-apps-script - 在电子表格中按匹配模式“ANY”过滤 [google-apps-script]

> ID：11830808
> 
> 赞同：0
> 
> 时间：2012-08-06T14:59:01.143
> 
> 标签：google-apps-script

我是谷歌应用程序脚本的新手（bi），我遇到了一些问题！

我正在寻找过滤有不同类别的电子表格单元格：例如

1 环境 2 环境、商业 3 商业、工作、环境、旅游

我尝试使用带有 MatchType(ANY) 的 StringFilter 工具，但搜索只返回单元格的第一个单词。例如，搜索“Business”将不会在“Environment, Business”单元格中找到“Business”。我的代码：

```
 var categoryFilter = Charts.newStringFilter()
   .setFilterColumnIndex(5)
   .setMatchType(Charts.MatchType.ANY)
   .build(); 
```

我的第一个目标是使用 newCategoryFilter 工具，但我不能使用 MatchType 过滤器，结果是 listBox 中的“Business、Work、Environment、Tourism”等错误类别。我的第一个代码如下所示：

```
 var themeFilter = Charts.newCategoryFilter()
  .setFilterColumnLabel("Categories"
  .build(); 
```

我还没有找到解决方案，所以我希望你能帮助我:)！提前致谢。

蒂莫西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T16:39:51.170

我做了一些测试，这看起来像是图表服务中的一个错误。请在 Apps 脚本[问题跟踪器](http://code.google.com/p/google-apps-script-issues/issues/list)上提交问题。

# jquery - JQuery slideDown动画滞后

> ID：11830810
> 
> 赞同：6
> 
> 时间：2012-08-06T14:59:05.823
> 
> 标签：jquery, css, slidedown

滑动`#res`div 时，我的 JQuery 幻灯片动画滞后。

有什么建议么？

**查询：**

```
$(document).ready(function(){

$('select.first').change(function(){

    $(this).prop('disabled', true);
    var codata = $(this).val();
    var page = 1;

    $.ajax({

        type:'POST',
        url:'page.php',
        dataType:'json',
        data:{country:codata, page:page},
        success: function(data) {

            var result='';
            $.each(data, function(i,e) {
            result += "<div id='outer'>"+e.sDo+'</div>';
            });
            $('#res').html(result);

        }

    }).done(function(){$('#res').slideDown();});

});

}); 
```

**CSS：**

```
#res {

    background-color:gainsboro;
    border:1px solid gray;
    width:100%;
    display:none;
    padding-top:10px;
}

#outer {

    width:100px; 
    text-align:center; 
    border:1px dotted black;
    margin:0 0 10px 10px;
    display:inline-block;
    height:40px;

} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-06T15:29:37.153

要在不跳跃的情况下向下滑动元素，该元素必须具有固定的宽度。这是一个演示。[http://jsfiddle.net/WtkUW/1/](http://jsfiddle.net/WtkUW/1/)

原因是 jQuery 根据元素的宽度和内容计算元素的目标高度。如果它的宽度为 100%，jQuery 无法准确计算高度导致跳转。内容越大，跳跃越大。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T15:14:38.160

首先，您的 page.php 发送响应的速度有多快？这可能是完全的答案。

其次，一旦 ajax 调用完成，您将使用 2 种相互竞争的方法来完成工作：A) .ajax() 调用的成功参数，以及 B) 较新的 .done() 函数。

A. 自 jQuery 1.8 起将被弃用（请参阅：[jQuery.ajax 处理继续响应：“success:” vs “.done”？](https://stackoverflow.com/questions/8840257/jquery-ajax-handling-continue-responses-success-vs-done)）

为什么不把所有东西都放在 .done() 中：

```
$.ajax({
    type:'POST',
    url:'page.php',
    dataType:'json',
    data:{country:codata, page:page}    
})
.done( function(data) {

    var result='';
    $.each(data, function(i,e) {
    result += "<div id='outer'>"+e.sDo+'</div>';
    });
    $('#res').html(result);

    $('#res').slideDown();
}); 
```

不看执行就很难知道，但混合这些也可能是意外行为的根源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-13T22:22:02.023

对于任何对此仍有疑问的人，我的问题是我的`padding`设置`!important`可能会覆盖动画的效果

# java - 如何将 Jackson mixin 添加到阅读器而不是 objectmapper？

> ID：11830812
> 
> 赞同：5
> 
> 时间：2012-08-06T14:59:10.377
> 
> 标签：java, json, jackson

我有一个对象，我想在程序的一部分中使用属性进行序列化，但在另一部分中没有。我还有一个 ObjectMapper，它被广泛定制，用于两个序列化。我的第一个倾向是使用 Mixin 来调整是否显示属性，但似乎您只能将它们放在 ObjectMapper 上，而不能放在 ObjectMapper 返回的阅读器上。基本上，我希望能够编写的代码如下所示。

```
ObjectMapper myMapper = new ObjectMapper(); // in reality there is a lot of customization
Foo foo = myMapper.reader().withMixin(Foo.class, FooMixin.class).readValue(jsonParser, Foo.class); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T15:46:18.510

正确的。但是，您不能即时更改混入：因为它们用于（反）序列化器的自省，并且结果（实际（反）序列化器）被缓存，所以它们必须作为初始配置的一部分添加。这就是为什么既不`ObjectReader`也不`ObjectWriter`公开改变混入的方法的原因：它们只允许在每次调用的基础上改变可以动态改变的东西。

但也许混入不是最好的方法：您是否考虑过使用[JSON 视图](http://wiki.fasterxml.com/JacksonJsonViews)代替？可以为每个（反）序列化单独更改使用中的活动视图。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T21:05:28.427

实际上，您可以为序列化或反序列化（或两者兼而有之）配置 mixins：

```
objectMapper.getSerializationConfig().addMixInAnnotations(Rectangle.class, MixIn.class);
objectMapper.getDeserializationConfig().addMixInAnnotations(Rectangle.class, MixIn.class); 
```

[http://wiki.fasterxml.com/JacksonMixInAnnotations](http://wiki.fasterxml.com/JacksonMixInAnnotations)

# excel - Excel - 搜索区域中单元格的内容（在两个特定字符串之间）

> ID：11830813
> 
> 赞同：1
> 
> 时间：2012-08-06T14:59:17.987
> 
> 标签：excel, search

我不确定是否可以在 Excel 上执行此操作，但我将在此处解释问题。

我有一个包含 60.000 行的文件，其数据显示如下：

T1 T2 T3 T4 T5

XXXXY

XXXXXX

XXXXXX

T1 T2 T3 T4 T5

XXXXXX

XXXXXX

T1 T2 T3 T4 T5

XXXXXX

XXXXY

XXXXXX

我想在特定列（本例中为最后一列）中搜索特定字符串“Y”。

如果在标题之间找不到“Y”，则删除标题和其余内容，并继续搜索直到下一个标题。

输出将是：

T1 T2 T3 T4 T5

XXXXY

XXXXXX

XXXXXX

T1 T2 T3 T4 T5

XXXXXX

XXXXY

XXXXXX

整个文件中的标题完全相同且是静态的，因此我正在考虑将它们用作参考。

有可能这样做吗？如果是这样，怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T15:42:17.857

这是一个数组公式方法...

1.  `A1:E11`选择示例数据`F1:F11`并使用 CTRL+SHIFT+ENTER 输入此公式：

    ```
    =LOOKUP(ROW(E1:E11),ROW(E1:E11)/(E1:E11="T5"),FREQUENCY(IF(E1:E11="Y",-ROW(E1:E11)),IF(E1:E11="T5",-ROW(E1:E11),0))) 
    ```

2.  然后，您可以粘贴值并筛选包含`0`和删除这些行的行。

*注意*`Y`：该公式返回标题之间包含 a 的行数。将数据复制到大约 60,000 行并更新公式只需几秒钟即可重新计算。

**快照**

![在此处输入图像描述](../Images/1ddb58450ca5e2e7224a08982208e5f2.png)

# actionscript-3 - ActionScript3.0 MouseEvent 和 TextChange

> ID：11830815
> 
> 赞同：0
> 
> 时间：2012-08-06T14:59:18.577
> 
> 标签：actionscript-3, flash

我想制作一个外部 ActionScript 3，当`MOUSE_UP`文本将更改以及何时`MOUSE_DOWN`不显示文本。

这是我制作的代码：

```
this.parent.getChildByName("planet_name").text = "EARTH"; 
```

我刚刚制作了这段代码以显示要点。=P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T15:13:56.003

因此，外部是指调用代码的显示对象（电影剪辑、精灵等）的父级吗？

假设 MOUSE_UP 和 MOUSE_DOWN 位于您编写代码的 displayObject 上，您可以执行以下操作：

```
this.addEventListener(MouseEvent.MOUSE_UP, handleMouseUp);
this.addEventListener(MouseEvent.MOUSE_DOWN, handleMouseDown);

function handleMouseDown(event : MouseEvent) : void {
   this.parent.textFieldName.visible = false;
}

function handleMouseUp(event : MouseEvent) : void {
   this.parent.textFieldName.visible = true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T15:29:24.310

首先，您将其添加到您的文档类（主类）中：

```
public static var me:DocumentClassName; 
```

这在您的文档类构造函数中：

```
me = this; 
```

在外部 AS3 文件中只需添加 2 个事件监听器：

```
this.addEventListener(MouseEvent.MOUSE_UP, mouseup);
this.addEventListener(MouseEvent.MOUSE_DOWN, mousedown);

function mouseup(e:MouseEvent):void 
{
   DocumentClassName.me.textFieldName.text = "EARTH";
}

function mousedown(e:MouseEvent):void 
{
   DocumentClassName.me.textFieldName.text = " ";
} 
```

用您的文档类名称更改 DocumentClassName。它通常是主要的。还将 textFieldName 更改为对象的实例名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T16:06:20.673

Please check first. this.parent.getChildByName("plant_name") is Whether DynamicText or not

If not, you must change instance of DynamicText.

what is "plant_name" instance ? if is instance of MovieClip, you change DynamicText.

**`How to changed?`**

1.  MovieClip click
2.  ctrl+b
3.  property change to DynamicText

I will omit a more detailed description. the source code, refer to the following link. As you will see the source code, There are a DragAndDrop Class . this Class The role of this class of objects on the stage all the initialization and is responsible for managing.

[DragAndDrop_Modification](http://www.datafilehost.com/download-c439d56c.html)

Oh, and by the Class name must be start a capital letter. This is customary promise among the developers.

**goodLuck**

# c# - 将置换树转换为英文散文

> ID：11830821
> 
> 赞同：2
> 
> 时间：2012-08-06T14:59:54.927
> 
> 标签：c#, combinations

我正在设计一个读取用户输入的数值的软件。然后它生成用于医疗报告的句子。由于句子之间存在如此多的差异，并且为每种类型的差异创建一个集合非常长并且可能没有效率，因此会出现一些复杂情况。

让我举一个我正在努力解决的例子：

假设诊断依赖于人类的神经。

考虑以下神经：正中神经、尺神经、桡神经。

现在，假设用户将数值输入到软件中，该软件会生成哪些神经异常。

考虑以下陈述：

指示左侧正中神经的神经病变。

双侧尺神经神经病变的指征。

指示右侧桡神经的神经病变。

每个语句都由一组语句产生，并且可以将这些语句组合成每个变体。变体是 -

左 (L)、右 (R)、双侧 (B) - 以及正中、尺侧和桡侧。

所以方差是 3^3 = 27。

然而，当有更多的神经时，方差会以指数方式上升。如果我有 5 条神经，那么它将是 3^5。

问题是：如何设计软件使其产生以下句子：

指示左侧正中神经、双侧尺神经和右侧桡神经的神经病变，但实际上没有这些陈述的每一种组合以及每一种的每一种条件陈述。

它需要适用于各种陈述：举一个句子变化的例子：

左胫神经的神经传导速度减慢。

左侧腓神经的神经传导速度减慢。

结合 - 左胫骨和腓神经的神经传导速度降低。

总结一下：该软件会产生各种这些类型的句子：用户选择适当的相似句子，程序将它们组合起来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T15:11:24.123

您可以为每个可能的诊断收集集合，然后在计算问题时向它们添加神经（？字符串）。然后，对于每个诊断，您将通过迭代匹配集合并将每个神经组合成一个代表性语句（“**左胫骨和腓神经**的神经传导速度降低”）来生成一个句子。这可能是我的方法。

你也可以做相反的方法，并有一个神经类，每个诊断都有属性。您可以修改这些属性，然后迭代不同的诊断并搜索具有某些属性的神经，尽管这看起来更慢（双迭代）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T15:11:55.480

几年前我做了类似的事情，以节省一些用户一遍又一遍地输入重复文本的时间。我创建了一系列复选框，用户将检查这些复选框将从数据源（sql？）加载文本，将它们连接到一个文本框中。这将允许用户编辑文本以确保它是可读的并且有他们自己的旋转，但是自动插入模板化的文本会节省键入它的时间。它们有不同的类别，所以我添加了一个组合框来更改复选框集。

所以你可以有： 身体部位（下拉菜单）：手臂、腿 当用户选择“手臂”时，会出现手指、手腕、肘部等的列表。选择“腿”时，它会隐藏手臂的复选框，然后显示腿的：膝盖、脚跟等。

取消选中该框将在文本框中找到文本并将其删除。

我还创建了另一个更像网格的网格，用户可以单击“添加行”来添加更多行。每行都有一系列组合框，它们首先选择类别，然后可能是子类别，最后是模板项目的名称，例如“双侧尺神经”。

希望这会有所帮助 - 我可以根据您的需要提供示例代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T16:44:32.170

您可能需要一些条件，但理想情况下，您希望使用某种模板。一个简单的模板方法是 String.Format()。例如：

```
String.Format("{0} {1}.", getSymptom(userSymptomNumber), getLocation(userLocationNumber)); 
```

在这个极其简单的场景中，getSymptom 将返回“神经病变的指示”，而 getLocation 将从某种数据存储返回“左正中神经”。更复杂的模板可以允许包含集合。您应该查看一些可用的 C# 模板引擎，或者您可以滚动您自己的类似于 String.Format 的轻量级模板代码。你的核心条件将决定你的句子是如何形成的。从那里，它只是用用户输入填充变化。你不应该纠正成千上万个完整的句子。

# android - 如何将安卓应用推送到手机？

> ID：11830829
> 
> 赞同：0
> 
> 时间：2012-08-06T15:00:13.470
> 
> 标签：android, eclipse

我只是不知道该怎么做。我正在使用最新版本的 eclipse Juno，需要将应用程序（或通过电子邮件发送）推送到我的 MyTouch。我将如何从日食中做到这一点，因为这是我更喜欢的方式？如果我应该只是通过电子邮件发送它，我会通过电子邮件发送整个项目文件夹还是只发送一段特定的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T15:03:28.233

这是您要查找的内容：http: [//developer.android.com/tools/device.html](http://developer.android.com/tools/device.html)

正确安装后，右键单击您的项目，然后在您的手机通过 USB 插入计算机时单击“作为 android 应用程序运行”。

# javascript - 使用 Javascript 和正则表达式修改 URL 的结尾

> ID：11830838
> 
> 赞同：1
> 
> 时间：2012-08-06T15:01:18.703
> 
> 标签：javascript, regex, replace

我正在尝试清理 URL（rss 提要），以便在最后一个 .rss（或 .html）之后没有其他字符。我正在使用 w3schools.com 上的 TryIt 编辑器进行测试。以下是我的测试代码：

```
var str="http://rss.cnn.com/rss/cnn_world.rsstest";
var patt1=/(.*[.rss|.html]).*/g;
var result = str.replace(patt1, "$1");
document.write(result); 
```

我遇到的问题是显示的结果是

```
http://rss.cnn.com/rss/cnn_world.rsstest 
```

即“测试”没有被删除。我想知道是否有人可以检查我的正则表达式并解释我做错了什么？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T15:07:55.357

首先，我推荐[jsFiddle](http://jsfiddle.net/)或其他一些测试服务。原谅[我的偏见](http://w3fools.com/)。

其他一些回答者似乎完全忽略了这一点，所以解释你的错误：

1.  `[]`不分组——它定义了一个字符类。您所写的内容实际上匹配单个字符，即以下任何一个：`.|hlmrst`.
2.  如果没有`$`锚，这两个`.*`s 可能与您期望的不匹配。

请尝试：

```
/(\.rss|\.html).*$/g 
```

这是[jsFiddle](http://jsfiddle.net/32cCh/1/)演示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T15:05:49.743

应该是`var patt1=/(\.rss|\.html).*$/g;`因为。是特殊字符

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T15:09:26.547

尝试使用子字符串

```
string.substring(from, to) 
```

和 lastindexof 函数

```
string.lastIndexOf(searchvalue) 
```

将其组合为：

```
var result = str.substring(0, str.toLowerCase().lastIndexOf("rss") + 3); 
```

最后：

```
if (str.toLowerCase().lastIndexOf(".rss") > str.toLowerCase().lastIndexOf(".html")) 
{ result = str.substring(0, str.toLowerCase().lastIndexOf(".rss") + 4);
} else {
result = str.substring(0, str.toLowerCase().lastIndexOf(".html") + 5);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T15:06:16.390

你为什么不做

```
var str="http://rss.cnn.com/rss/cnn_world.rsstest";
str.replace(/test$/, ""); 
```

# c++ - 使用 IOCP 时，我应该将 WSAOVERLAPPED 的 hEvent 设置为 NULL 还是设置为 WSAEVENT 对象的有效句柄？

> ID：11830839
> 
> 赞同：5
> 
> 时间：2012-08-06T15:01:26.233
> 
> 标签：c++, sockets, winsock2, iocp

根据[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms741665%28v=vs.85%29.aspx)：

> **hEvent**：如果在没有 I/O 完成例程的情况下发出重叠 I/O 操作（操作的 lpCompletionRoutine 参数设置为 null），则此参数应包含 WSAEVENT 对象的有效句柄或为 null。

当我使用 IOCP 时，当我调用 WSASend() 或 WSARecv() 时，我将 NULL 传递给它们的最后一个参数（即 lpCompletionRoutine）：

```
WSASend(pIoRequest->GetSocket(), pIoRequest->GetWsaBuffer(), 1, NULL, pIoRequest->GetFlags(), pIoRequest, NULL);

WSARecv(pIoRequest->GetSocket(), pIoRequest->GetWsaBuffer(), 1, NULL, &(pIoRequest->GetFlags()), pIoRequest, NULL); 
```

我的“每个 I/O 数据”类 (pIoRequest) 看起来像：

```
class IoRequest : public WSAOVERLAPPED
{
public:
    IoRequest()
    {
        ...
        SecureZeroMemory(this, sizeof(WSAOVERLAPPED));
        hEvent = WSACreateEvent(); // A
    }
    ...
    void ResetForNextIoRequest()
    {
        WSACloseEvent(hEvent); // B
        SecureZeroMemory(this, sizeof(WSAOVERLAPPED));
        hEvent = WSACreateEvent(); // C
        ...
    }
    ...
    DWORD& GetFlags() { return m_dwFlags; }
    ...
private:
    ...
    DWORD m_dwFlags;
    ...
}; 
```

即使我注释掉上面标记为 A、B 和 C 的行，它似乎对我的程序的行为也没有任何影响。

那么您如何决定何时调用 WSACreateEvent() 或简单地将 hEvent 设置为 NULL？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-06T15:38:53.740

如果您使用 IOCP，则不需要传递事件对象，因为您将使用[GetQueuedCompletionStatus()](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFYQFjAA&url=http://msdn.microsoft.com/en-us/library/windows/desktop/aa364986%28v=vs.85%29.aspx&ei=D98fUP7pBM7usgaEh4DACw&usg=AFQjCNErbATkgyQ8c9lR6R1xP9aJ5ILC_A)接收完成通知。[假设您已使用CreateIoCompletionPort()](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&sqi=2&ved=0CFEQFjAA&url=http://msdn.microsoft.com/en-us/library/windows/desktop/aa363862%28v=vs.85%29.aspx&ei=Jd8fUPzUC5DGswbS74DABQ&usg=AFQjCNH6ZDgyBW-xDT03e8b_ZrBCWFYsSg)将套接字与完成端口相关联，这将起作用。

是的，Windows 上的 I/O 令人困惑。特别是，至少有*六种*不同的方式来使用套接字。首先是您似乎遇到的两个：

*   使用 IOCP（CreateIoCompletionPort、GetQueuedCompletionStatus、WSASend 等）的重叠 I/O。这可能是最有效的方法。您可以轻松地将任何也使用 IOCP 的事件集成到事件循环中。对于其他事件，您可以使用[PostQueuedCompletionStatus](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFUQFjAA&url=http://msdn.microsoft.com/en-us/library/windows/desktop/aa365458%28v=vs.85%29.aspx&ei=yuEfUNv7LJDGtAal8oGgBQ&usg=AFQjCNGkmZArw8fkNyHEPculPwmwp9SqsA)来解决。这是（AFAIK）唯一适用于大量套接字的方法。

*   没有 IOCP 的重叠 I/O，即使用 WSASend 和带有事件对象的朋友，使用例如[WaitForMultipleObjects监视事件，并使用](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687025%28v=vs.85%29.aspx)[WSAGetOverlappedResult](http://msdn.microsoft.com/en-us/library/windows/desktop/ms741582%28v=vs.85%29.aspx)获取结果。这相对容易与任何也可以映射到 HANDLE 对象的非套接字 I/O 集成。但是，WaitForMultipleObjects 仅限于一次监视不超过 64 个句柄。

还有至少四个：

*   阻塞调用（send、recv 以及 WSA* 版本）。如果你这样做，你将被迫使用线程。这既难以正确实施，也可能效率低下。

*   [使用select()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740141%28v=vs.85%29.aspx)的非阻塞套接字。这样做的好处是您可以使用与类 unix 系统上类似的代码。但是，它（AFAIK）不能与套接字以外的 I/O 集成。

*   使用[WSAEventSelect](http://msdn.microsoft.com/en-us/library/windows/desktop/ms741576%28v=vs.85%29.aspx)进行非阻塞。这类似于 select() 方法，不同之处在于不是使用 select() 来获取通知，而是将套接字事件映射到事件对象，并使用例如[WaitForMultipleObjects](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&ved=0CFMQFjAB&url=http://msdn.microsoft.com/en-us/library/windows/desktop/ms687025%28v=vs.85%29.aspx&ei=nOcfUILmNI_Msga0r4DQBg&usg=AFQjCNGyd6R4B2v0cZSgPn0RBEoHjOy0zg)监视这些事件。它也类似于没有 IOCP 的重叠方法，并且具有不超过 64 个对象的相同限制。

*   Non-blocking using [WSAAsyncSelect](http://msdn.microsoft.com/en-us/library/windows/desktop/ms741540%28v=vs.85%29.aspx). This delivers socket notifications as messages to a window within a program using using the [Windows message loop](http://en.wikipedia.org/wiki/Message_loop_in_Microsoft_Windows). This is easy to integrate into an application already using the message loop, such as many GUI applications.

Correct me if I left something out or if some of this doesn't actually work :).

# c# - 在解决方案中使用来自不同项目的图像

> ID：11830844
> 
> 赞同：1
> 
> 时间：2012-08-06T15:01:41.743
> 
> 标签：c#, .net, windows-phone-7, resources, portable-class-library

我目前正在清理我的应用程序并重新排序，以便可以更轻松地将它们放入不同的可移植库类中并在不同的目标平台上重用。我找不到答案的一个问题是如何链接到解决方案中其他项目中的图像。

例如：我有一个 WP7.1 项目，并且 WMAppManifest.xml 包含两个图像的相对路径。即 IconPath 和 BackgroundImageURI。所以显而易见的问题是：如何在 XML 中链接到它们，以及在使用 System.Uri 类时如何以编程方式链接到它们？

非常感激你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T15:43:13.410

您可以将图像作为资源添加到可移植类库中。但是，它们不应作为图像添加，而应作为字符串添加。摘自 MSDN 文档（.NET Framework 4.5）：

*从可移植类库中排除其他`ResourceManager`成员意味着无法从资源文件中检索序列化对象、非字符串数据和图像。您可以通过以字符串形式存储对象数据来解决此限制。例如，您可以通过将数值转换为字符串来将数值存储在资源文件中，您可以检索它们然后使用数值数据类型的`Parse`or`TryParse`方法将它们转换回数字。您可以通过调用该方法将图像或其他二进制数据转换为字符串表示`Convert.ToBase64String`，并通过调用该方法将它们恢复为字节数组`Convert.FromBase64String`。*

[您可以在此处](http://msdn.microsoft.com/en-us/library/hh871422%28v=vs.110%29.aspx)找到有关如何从可移植类库访问资源的更多信息。

# mobile - 跨平台蓝牙互操作性

> ID：11830845
> 
> 赞同：4
> 
> 时间：2012-08-06T15:01:43.870
> 
> 标签：mobile, bluetooth

我需要有一个跨平台程序——适用于 Android、Brew、Bada、WinCE 等移动设备——能够通过蓝牙与自身的其他实例通信。

很遗憾：

*   此类设备上的蓝牙 API*完全*不同。

*   他们使用的术语也完全不同。

*   实际有效的方法通常与他们所说的有效方法完全不同。

到目前为止，我发现 Android 将允许您连接或侦听由简单 UUID 指定的 RFCOMM 服务，但不允许对 SDP 记录进行更复杂的操作；Brew 声称支持 SPP，但 API 似乎允许任意 RFCOMM；Bada 支持 SPP，但不允许您指定 UUID，所以我不知道您应该如何进行服务发现或一次监听两件事......

*哦，iOS根本*不允许与非 iOS 设备进行蓝牙通信。

所以：

我不能成为第一个需要这样做的人。为了最大限度地提高便携性，我应该使用已知的蓝牙功能子集吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T15:16:42.730

设备制造商通常会实现一些蓝牙配置文件，例如 A2DP、OBEX 等。根据您的需要，您应该检查所有目标设备是否实现了所需的配置文件。

请注意，即使设备可以实现特定配置文件，也可能没有 API 允许您使用它。

请参阅[http://en.wikipedia.org/wiki/Bluetooth_profile](http://en.wikipedia.org/wiki/Bluetooth_profile)。

# php - 如何修改 wordpress 菜单的结构

> ID：11830851
> 
> 赞同：-1
> 
> 时间：2012-08-06T15:02:05.737
> 
> 标签：php, wordpress

我需要在锚的菜单中插入一些包含 wp 页面的 div。锚菜单之一有一个包含 5 个链接的子菜单。这些链接中的每一个都包含一个页面（wp page）。

我关注了这篇文章：[http](http://bit.ly/MIRtcY) ://bit.ly/MIRtcY 但不是一个特定的来源，我在获得我想要的东西时遇到了一些问题。

你有具体的网址或一些建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T16:46:42.497

我尝试了不同的解决方案，现在我使用 walker nav menu。这是代码：

```
 // Class to insert div and page into nav menu (not working yet)
 class description_walker extends Walker_Nav_Menu
  {
  function start_el(&$output, $item, $depth, $args)
  {
       global $wp_query;
       $indent = ( $depth ) ? str_repeat( "\t", $depth ) : '';

       $class_names = $value = '';

       $classes = empty( $item->classes ) ? array() : (array) $item->classes;

       $class_names = join( ' ', apply_filters( 'nav_menu_css_class', array_filter( $classes ), $item ) );
       $class_names = ' class="'. esc_attr( $class_names ) . '"';

       $output .= $indent . '<li id="menu-item-'. $item->ID . '"' . $value . $class_names .'>';

       $attributes  = ! empty( $item->attr_title ) ? ' title="'  . esc_attr( $item->attr_title ) .'"' : '';
       $attributes .= ! empty( $item->target )     ? ' target="' . esc_attr( $item->target     ) .'"' : '';
       $attributes .= ! empty( $item->xfn )        ? ' rel="'    . esc_attr( $item->xfn        ) .'"' : '';
       $attributes .= ! empty( $item->url )        ? ' href="'   . esc_attr( $item->url        ) .'"' : '';

       // $prepend = '<strong>';
       // $append = '</strong>';
       $description  = empty( $item->description ) ? '<div class="dropEverything-page"><div class="dropEverything-row">'.esc_attr( $item->description ).'</div></div>' : '';

       if($depth != 0)
       {
                 $description = $append = $prepend = "";
       }

        $item_output = $args->before;
        $item_output .= '<a'. $attributes .'>';
        $item_output .= $args->link_before .$prepend.apply_filters( 'the_title', $item->title, $item->ID ).$append;
        $item_output .= $description.$args->link_after;
        $item_output .= '</a>';
        $item_output .= $args->after;

        $output .= apply_filters( 'walker_nav_menu_start_el', $item_output, $item, $depth, $args );
        }
 } 
```

我修改了这一行：

```
 // I need to get the ID of the page and put it into the anchor
       $postID = get_page_by_title("Profile")->ID;
   $post = get_post(&$postID);
       $description  = empty( $item->description ) ? '<div class="dropEverything-page"><div class="dropEverything-row">'.esc_attr( $item->description ).'</div></div>' : ''; 
```

我需要替换

```
esc_attr( $item->description ) 
```

和

```
esc_attr( echo apply_filters("the_content", $post->post_content) ) 
```

但该网站给我一个空白页。

有什么建议吗？谢谢

# java - pc 到 pc 通过蓝牙使用 bluecove

> ID：11830861
> 
> 赞同：3
> 
> 时间：2012-08-06T15:02:47.983
> 
> 标签：java, bluetooth, bluecove

互联网上有很多例子展示了如何编写一个应用程序，让我们可以通过蓝牙从手机与电脑通信。但我想做的是通过蓝牙从另一台电脑控制一台电脑。我正在尝试使用蓝牙库。我在一台电脑上运行服务器，并尝试使用此处的示例从另一台电脑连接：http: [//bluecove.googlecode.com/svn/trunk/bluecove/src/test/java/com/intel/bluetooth/javadoc/](http://bluecove.googlecode.com/svn/trunk/bluecove/src/test/java/com/intel/bluetooth/javadoc/)

它找到设备：

```
Device BC7737946D89 found
     name TN-RR-LAP
Device Inquiry completed!
search services on BC7737946D89 TN-RR-LAP
service search completed! 
```

但随后它尝试连接，我收到以下错误：

```
Connecting to btspp://BC7737946D89:9;authenticate=false;encrypt=false;master=false
Exception in thread "main" javax.bluetooth.BluetoothConnectionException: Failed to connect; [10064] A socket operation failed because the destination host was down.
    at com.intel.bluetooth.BluetoothStackMicrosoft.connect(Native Method)
BlueCove stack shutdown completed
    at com.intel.bluetooth.BluetoothStackMicrosoft.access$700(BluetoothStackMicrosoft.java:44)
    at com.intel.bluetooth.BluetoothStackMicrosoft$ConnectThread.run(BluetoothStackMicrosoft.java:651)
Java Result: 1 
```

有人知道如何解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-29T07:14:14.160

如果您想从 PC 传输到 PC，我建议使用 btgoep://bluetoothaddress:2，它应该可以工作。

# c# - 当我通过 VS 运行我的应用程序时，它会提示管理员权限，我该如何做到这一点？

> ID：11830864
> 
> 赞同：0
> 
> 时间：2012-08-06T15:02:51.603
> 
> 标签：c#

我可以在应用程序`Debug/Bin`目录中将我的应用程序属性的 exe 文件更改为`Run As Admin`.

但是当我通过 Visual Studio 运行它时，我也希望它以管理员身份运行。

所以我创建了一个清单文件，我把它放在`debug/bin`我的应用程序的目录中，我也有`mt.exe`

我的清单文件内容：

```
Executable: hardwareMonitoring.exe 
Manifest:Hardwaremonitoring.exe.manifest
Sample application manifest file:
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0"> 
  <assemblyIdentity version="1.0.0.0"
     processorArchitecture="X86"
     name="IsUserAdmin"
     type="win32"/> 
  <description>Description of your application</description> 
  <!-- Identify the application security requirements. -->
  <trustInfo xmlns="urn:schemas-microsoft-com:asm.v2">
    <security>
      <requestedPrivileges>
        <requestedExecutionLevel
          level="requireAdministrator"
          uiAccess="false"/>
        </requestedPrivileges>
       </security>
  </trustInfo>
</assembly> 
```

现在我想我需要以`mt.exe`某种方式使用或者需要将清单添加/嵌入到我的项目中？这个想法是它不会在我的硬盘上自动创建`Debug/Bin`一个已经存在的 exe 文件，`Admin Rights (Run As Admin)`但我希望它在我在 Visual Studio 2010 中运行应用程序时提示管理员权限确认。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T15:10:34.043

当您调试应用程序（比如 hello.exe）时，它通常通过名为 vshost.exe 的代理应用程序运行。该应用程序具有与您正在使用的 VS 实例相同的权限。

您可以尝试使用管理权限启动 Visual Studio，以便 vshost.exe 和您的应用程序也使用该权限启动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T22:17:13.917

我把它放在某个地方，我把它保存在一个文本文件中：

首先，您使用记事本创建一个文本文件并添加到其中：

```
Executable: hardwareMonitoring.exe 
Manifest:Hardwaremonitoring.exe.manifest
Sample application manifest file:
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0"> 
  <assemblyIdentity version="1.0.0.0"
     processorArchitecture="X86"
     name="IsUserAdmin"
     type="win32"/> 
  <description>Description of your application</description> 
  <!-- Identify the application security requirements. -->
  <trustInfo xmlns="urn:schemas-microsoft-com:asm.v2">
    <security>
      <requestedPrivileges>
        <requestedExecutionLevel
          level="requireAdministrator"
          uiAccess="false"/>
        </requestedPrivileges>
       </security>
  </trustInfo>
</assembly> 
```

然后你将文件名保存为：appName.exe.manifest 然后你点击windows Start>Cmd 在dos窗口中输入：

```
mt -manifest appName.exe.manife
st.txt -outputresource:appName.exe;#1 
```

如果 mt.exe 不是应用程序：Debug/Bin 目录只需给出 mt 之前的目录/ies。

而已。

# c# - AsyncController AsyncManager 参数问题

> ID：11830865
> 
> 赞同：0
> 
> 时间：2012-08-06T15:02:53.893
> 
> 标签：c#, asp.net-mvc

我正在使用异步控制器进行一些测试，并且我有以下代码：

```
public class AsyncSampleController : AsyncController
{

     public void IndexAsync()
      {
           Tasks tasks = new Tasks();
           //Indicates that we already started an asynchronous operation
           AsyncManager.OutstandingOperations.Increment();
           //Task.Factory start new to use another thread to use our operation.
           Task.Factory.StartNew(() =>
           {
                Stopwatch s1 = Stopwatch.StartNew();        
                tasks.BigOperation();
                s1.Stop();
                long data=s1.ElapsedMilliseconds;
                AsyncManager.Parameters.Add("data",data);
            });
            AsyncManager.OutstandingOperations.Decrement();

       }
       public ActionResult IndexCompleted(long data)
       { 
           ViewBag.ElapsedTime = data.ToString();
           return View();
       }
} 
```

问题是 BigOperation 方法或多或少花费了一秒钟，但我没有得到存储在 IndexCompleted Action 的数据参数上的经过值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T12:12:17.730

我没有对此进行测试，但您应该将`Decrement`呼叫*放入*您的匿名任务中。我的猜测是`Decrement`在任务完成之前调用。

# php - str_replace 两次

> ID：11830867
> 
> 赞同：0
> 
> 时间：2012-08-06T15:02:55.760
> 
> 标签：php, cakephp

我有一个问题。

我有这个代码

```
<?php
echo str_replace("CDAS","","2/CDAS2/CDAS");
?> 
```

输出

```
2/2/ 
```

我如何使它只删除“CDAS”，例如记事本中的“匹配整个单词”选项？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T15:05:21.170

使用正则表达式并指定单词边界：

```
echo preg_replace('/\bCDAS\b/', '', '2/CDAS2/CDAS'); 
```

[这是一个演示。](http://codepad.viper-7.com/bROMcj)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T15:05:23.627

使用 preg_replace：

```
preg_replace('/CDAS$/', '', "2/CDAS2/CDAS") 
```

类似的东西。

当然，因为我实际上不知道你想要什么输出，所以我不能确定这是正确的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T15:07:46.823

不确定如何完全回答这个问题，因为您所描述的内容确实如此，但我猜您只是希望删除第二个 CDAS 项目？有很多方法可以给猫剥皮，但也许一种灵活的方法是使用explode运算符将字符串分成带有“/”符号的组件，然后您可以使用while循环或其他方式替换任何匹配的CDAS项目和随时退出。

[http://php.net/manual/en/function.explode.php](http://php.net/manual/en/function.explode.php)

最后将这些组件重新组合成一个字符串，或者使用 implode 或者只是连接数组项。

# php - PHP php csv 生成器函数在第二次调用时失败

> ID：11830871
> 
> 赞同：0
> 
> 时间：2012-08-06T15:03:08.760
> 
> 标签：php, http-headers

我编写了一个用于导出 MySQL 表信息的类。这是成功执行此操作的最终函数：

```
class CSVExport{
private $file_name;
private $csv_data;

public function  collectAllDataFromTable($table,$file_prefix,$date){

    $sql = "SHOW COLUMNS FROM ".$table."";
    $result = mysql_query($sql);
    if(!$result){
        die("Query failed ".mysql_error());
    }
    if(mysql_num_rows($result)>0){
        $i = 0;
        $csv_output = '';
        while($row = mysql_fetch_assoc($result)){
            $csv_output .= $row['Field'].",";
            $i++;

        }

    }
    $csv_output .= "\n";
    $values = mysql_query("SELECT * FROM ".$table."");
    while ($rowr = mysql_fetch_row($values)) {
        for ($j=0;$j<$i;$j++) {
            $csv_output .= $rowr[$j].", ";
        }
        $csv_output .= "\n";
    }

   // return $csv_output;
    $this->file_name = $file_prefix."_".$date;
    $this->csv_data = $csv_output;

} // End "exportAllDataFromTable"  method

public function exportData(){
    header("Content-type: application/vnd.ms-excel");
    header("Content-disposition: csv" . date("Y-m-d") . ".csv");
    header( "Content-disposition: filename=".$this->file_name.".csv");

    print $this->csv_data;exit;    

}  // End 'exportData' method

} // End Db_Export 
```

但是当我`exportData()`第二次使用不同的参数调用时，它不会为我下载文件。

可能是什么问题呢 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T15:04:23.160

您一次只能向浏览器发送一个文件*。

此外，您`exit()`在导出结束时调用，这将结束脚本执行。

[* 理论上，有多个部分的响应，但它们没有日常相关性（还）。]

# android - 从 Android 的 Phonbook 联系人中保存数据库中的联系人号码时如何删除 -(desk) 符号？

> ID：11830876
> 
> 赞同：0
> 
> 时间：2012-08-06T15:03:29.497
> 
> 标签：android

我有一些奇怪的困惑......我有一个列表视图，其中包含设备的电话簿联系人列表和复选框......当任何用户当时选中复选框时，联系人号码将保存在 SQLite数据库，但在数据库编号保存如下，

1-555-521-5556

我想将此记录保存为简单的字符串

15555215556

我想从将保存在数据库中的记录中删除 - （桌面）符号...有什么想法可以实现这一点，请告诉我.....谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T15:05:52.770

获取电话号码并将其放入字符串中。例如：

```
String phoneNum = // Number 
```

然后执行：

```
phoneNum.replace("-", ""); 
```

这将删除字符串中的所有“-”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T15:09:04.773

只需使用字符串替换功能..

```
"15555215556".replace("-", ""); 
```

它只是替换 - 符号。

# java - Eclipse JDT - 如何在不可见的默认构造函数上设置断点？

> ID：11830883
> 
> 赞同：2
> 
> 时间：2012-08-06T15:03:50.387
> 
> 标签：java, eclipse, debugging, breakpoints, eclipse-jdt

如何在eclipse Juno（4.2）中将方法入口断点设置为不可编辑（库）类的合成默认构造函数？

例如

```
public class Foo {}  // can't change that code
//    (...)
Foo foo = new Foo()   // now it should stop
Foo bar = new Foo()  // stop again 
```

一般可以吗？

为了进一步澄清这一点，我想在**每次**运行时创建 Foo 的实例时停止，**而不是**在加载类后停止。在复杂的设置中，我必须区分 foo 或 bar 是否正在创建实例。

它基本上应该与不可见的合成构造函数上的断点相同，**而无需将该构造函数实际添加**到代码中，例如

```
public class Foo {
  public Foo(); //break here
} 
```

# 解决了

对于***.class***文件，默认构造函数在大纲视图中列出。可以通过右键单击添加方法入口断点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T20:24:37.637

对于 .class 文件，您可以像往常一样从大纲视图切换方法入口断点。对于源文件，您实际上必须添加这样的构造函数来在其中设置断点。大纲视图以任何一种方式向您显示文件中的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T15:26:01.897

您可以在“public class Foo”行设置断点。如果你通常在编辑器左侧的标记栏中双击设置断点，然后双击类声明行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T15:26:32.627

我可能遗漏了一些东西，但您可以简单地在行上设置一个断点`Foo bar = new Foo();`，当调试器停在那里时，进入代码（所以按*F5*键）。

如果`Foo`扩展了任何实际实现默认构造函数的类，那么您的调试器现在将位于`super`层次结构中具有默认构造函数的第一个类。

如果 Foo 没有扩展任何类，或者这些类都没有默认构造函数，那么您最终只会在`Object`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T15:32:06.820

如果您有任何带有初始化程序的成员变量，那么您可以在它们上放置一个断点。例如：

```
class MyClass {
  private int i = 0; // this line can have a breakpoint in Eclipse
} 
```

否则请参阅此问题：[如何在 Eclipse 中的默认 Java 构造函数上设置断点？](https://stackoverflow.com/questions/1876430/how-to-set-a-breakpoint-on-a-default-java-constructor-in-eclipse)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T20:24:24.243

**“#eclipse”帮助解决了这个问题：如果**它是一个*.class*文件，则默认构造函数显示在大纲视图中，而不是如果它是一个*.java*文件。然后可以设置方法入口断点。

# c# - C# xmlwriter sql 服务器

> ID：11830887
> 
> 赞同：0
> 
> 时间：2012-08-06T15:04:04.347
> 
> 标签：c#, xml, nodes

从 SQL Server 2008 开始，用于`for xml auto, root('ROOT'), type, elements xsinil`获取此输出：

```
<ROOT xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<node>
  <nodeid>28</nodeid>
  <account_no>0</account_no>
  <address1>15 CANCUN CT</address1>
  <serial_no>112199543</serial_no>
  <x_lat>25.95513358000</x_lat>
  <y_lon>-97.49027147000</y_lon>
  <alarm>
    <alarmid>Outage</alarmid>
    <alarmtime>2012-08-03T16:27:15.830</alarmtime>
  </alarm>
 <alarm>
   <alarmid>Restore</alarmid>
   <alarmtime>2012-08-06T09:41:53.313</alarmtime>
 </alarm>
</node>
</ROOT> 
```

我试图从 C# 的 SQL Server 中获得与上述相同的结果，带有`XmlWriter`.

这是我的代码：

```
private void writeXmlToBrowser(DataTable xml)
{
    XmlWriterSettings settings = new XmlWriterSettings();
    settings.OmitXmlDeclaration = true;
    settings.Indent = true;

    using (XmlWriter writer = XmlWriter.Create(Response.OutputStream, settings))
    {
        if (xml != null)
        {
            writer.WriteStartDocument();
            writer.WriteStartElement("ROOT", "http://www.w3.org/2001/XMLSchema-instance");
            foreach (DataRow row in xml.Rows)
            {
                writer.WriteStartElement("node");

                foreach (DataColumn col in xml.Columns)
                {
                    writer.WriteElementString(col.ColumnName, row[col].ToString().Trim());
                }

                writer.WriteEndElement();
            }

            writer.WriteEndElement();
            writer.WriteEndDocument();
            writer.Flush();
        }
        else
        {
            writer.WriteStartDocument();
            writer.WriteStartElement("ROOT", "http://www.w3.org/2001/XMLSchema-instance");
            writer.WriteEndElement();
            writer.WriteEndDocument();
            writer.Flush();
        }
    }
} 
```

这段代码的输出是这个（两个节点元素）我只希望它与格式化的 SQL Server 输出相同。

```
<ROOT xmlns="http://www.w3.org/2001/XMLSchema-instance">
 <node>
  <nodeid>28</nodeid>
  <account_no>0</account_no>
  <address1>15 CANCUN CT</address1>
  <serial_no>112199543</serial_no>
  <alarmid>Outage</alarmid>
  <alarmtime>8/3/2012 4:27:15 PM</alarmtime>
  <x_lat>25.95513358000</x_lat>
  <y_lon>-97.49027147000</y_lon>
 </node>
 <node>
  <nodeid>28</nodeid>
  <account_no>0</account_no>
  <address1>15 CANCUN CT</address1>
  <serial_no>112199543</serial_no>
  <alarmid>Restore</alarmid>
  <alarmtime>8/6/2012 9:41:53 AM</alarmtime>
  <x_lat>25.95513358000</x_lat>
  <y_lon>-97.49027147000</y_lon>
 </node>
</ROOT> 
```

更新！这是我使用的代码。更短更简单。

```
protected void Page_Load(object sender, EventArgs e)
{
    X();
    writeXml();
}

private void X()
{
    x = new XmlDocument();
    using (SqlConnection con = new SqlConnection(cn))
    {
        using (SqlCommand cmd = new SqlCommand(sqlstring, con))
        {
            con.Open();
            using (XmlReader reader = cmd.ExecuteXmlReader())
            {
                x.Load(reader);
            }
        }
    }
}

private void writeXml()
{
    XmlWriterSettings settings = new XmlWriterSettings();
    settings.Indent = true;
    settings.OmitXmlDeclaration = true;
    using (XmlWriter xr = XmlWriter.Create(Response.OutputStream, settings))
    {
        x.WriteContentTo(xr);
        xr.Flush();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T15:15:55.143

我发现序列化对象比尝试在代码中构建它要容易得多。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Xml.Serialization;
using System.Xml.Linq;

namespace SO.XmlSqlServer
{
    class Program
    {
        static void Main(string[] args)
        {
            var node = new SqlOutput
            {
                NodeId = 28,
                AccountNumber = 0,
                AddressLine1 = "15 CANCUN ST",
                SerialNo = 112156544,
                XLatitude = 25.23456354,
                YLongitude = -97.54435453,
                Alarms = new List<Alarm>(new[]
                {
                    new Alarm
                    {
                        AlarmId="Outage",
                        AlarmTime=DateTime.Now
                    },
                    new Alarm
                    {
                        AlarmId="Restore",
                        AlarmTime=DateTime.Now
                    }
                })
            };

            XmlSerializer ser = new XmlSerializer(typeof(SqlOutput));
            XDocument doc = new XDocument();
            using (var writer = doc.CreateWriter())
            {
                ser.Serialize(writer, node);
            }
            Console.WriteLine(doc.ToString());
            Console.ReadLine();
        }
    }

    [XmlRoot("node")]
    public class SqlOutput
    {
        [XmlElement("nodeid")]
        public int NodeId { get; set; }

        [XmlElement("account_no")]
        public int AccountNumber { get; set; }

        [XmlElement("address1")]
        public string AddressLine1 { get; set; }

        [XmlElement("serial_no")]
        public int SerialNo { get; set; }

        [XmlElement("x_lat")]
        public double XLatitude { get; set; }

        [XmlElement("y_lon")]
        public double YLongitude { get; set; }

        [XmlElement("alarm")]
        public List<Alarm> Alarms { get; set; }
    }

    public class Alarm
    {
        public string AlarmId { get; set; }
        public DateTime AlarmTime { get; set; }
    }

} 
```

# ios - 测量 UILabel 或 textField 的 adjustsFontSizeToFitWidth 的数量

> ID：11830893
> 
> 赞同：3
> 
> 时间：2012-08-06T15:04:24.207
> 
> 标签：ios, xcode, fonts, uitextfield, uilabel

UILabels 和 textFields 可以自动缩放它们的字体以适应视图的空间（例如文本的积累）。有没有办法测量所执行的规模的数量？看起来，在自动缩放时，无论文本的显示比例如何，myLabel.font.pointsize 或 myTextField.font.pointSize 的值都保持不变。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T15:23:13.557

在 UIKit 的添加中有一种方法可以做到这一点`NSString`：

```
- (CGSize)sizeWithFont:(UIFont *)font minFontSize:(CGFloat)minFontSize actualFontSize:(CGFloat *)actualFontSize forWidth:(CGFloat)width lineBreakMode:(UILineBreakMode)lineBreakMode 
```

因此，如果您使用的是 UILabel，则可以使用以下代码：

```
CGFloat actualFontSize;
UILabel *label = [self label];
CGSize size = [[label text] sizeWithFont:[label font]
                             minFontSize:[label minimumFontSize]
                          actualFontSize:&actualFontSize
                                forWidth:[label bounds].size.width
                           lineBreakMode:[label lineBreakMode]]; 
```

此时，`size`将包含绘制文本`actualFontSize`的大小，并将是标签用于绘制的字体的实际大小。

# python - Python 3.2：如何为项目设置版本控制

> ID：11830896
> 
> 赞同：4
> 
> 时间：2012-08-06T15:04:45.557
> 
> 标签：python, python-3.x

好的，所以我一直在环顾四周，虽然我是 python 新手，但我看到了几个不同的选择，所以我有点困惑。这是我正在寻找的：

我有一个包含多个 .py 文件的项目。我有我创建的库的文件和 lib 目录。我的问题是，我如何设置项目以获得一个版本？我看到很多文章说我把版本放在setup.py中。setup.py 去哪里了？setup.py 文件中还需要什么？我只是将 setup.py 导入我的 python 文件吗？我如何检查它是否有效？如何检查每个 .py 文件的版本以确保正确导入？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T15:14:46.720

阅读[Hitchhiker 的打包指南](http://guide.python-distribute.org/quickstart.html#lay-out-your-project)，了解开发 Python 项目的良好实践

> setup.py 文件是 Python 项目的核心。它描述了有关您的项目的所有元数据。您可以将很多字段添加到项目中，为其提供一组描述项目的丰富元数据。但是，只有三个必填字段：名称、版本和包。如果您希望在 Python 包索引 (PyPI) 上发布包，则名称字段必须是唯一的。版本字段跟踪项目的不同版本。packages 字段描述了您在项目中放置 Python 源代码的位置。
> 
> 我们的初始 setup.py 还将包含有关许可证的信息，并将重复使用 README.txt 文件的 long_description 字段。这看起来像：

```
from distutils.core import setup

setup(
    name='TowelStuff',
    version='0.1dev',
    packages=['towelstuff',],
    license='Creative Commons Attribution-Noncommercial-Share Alike license',
    long_description=open('README.txt').read(),
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T15:13:01.620

通常，项目会将其版本作为`__version__`属性包含在其顶级命名空间中。

例如：

```
>>> import myproject
>>> print myproject.__version__
'3.2.0' 
```

有关从文件中访问的更多信息和方法，请参阅[http://www.python.org/dev/peps/pep-0396/ 。](http://www.python.org/dev/peps/pep-0396/)`__version__``setup.py`

# html - 将标签与输入关联，而不是 id？

> ID：11830898
> 
> 赞同：28
> 
> 时间：2012-08-06T15:05:05.733
> 
> 标签：html, forms

我知道您可以使用 for 和 id 属性将标签与输入相关联。但是，您可以使用类而不是 id 吗？谢谢

```
<label for="rooms">Number of rooms</label>
<select id="rooms">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
</select> 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-08-06T15:07:03.150

类不是唯一的（同一个类可以有多个元素），所以不是。

如果您想在不使用 ID 的情况下将标签与输入相关联，您可以通过**在标签中包含所述输入来****隐式**分配它：

 **```
<label>Number of rooms
    <select name="rooms">
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
    </select>
</label> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-12-23T17:25:03.323

以下是您不想使用 ID 或嵌套控件的示例：

*   我正在创建一个使用模板的 BackboneJS 应用程序。因为模板可以复制，所以避免使用 ID 很重要，因为它会在 DOM 中创建多个具有相同 ID 的元素。

*   我也在使用 Bootstrap，如果控件被包裹在`<label>`元素中，它将以不同（且不受欢迎）的方式呈现控件。

在这一点上，我能找到的唯一解决方案是包装控制元素并使用默认 CSS 来获得所需的输出。如果有人有更优雅的解决方案，请加入。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-06T15:06:53.047

不，你不能使用`class`一个元素的，因为同一个类可以被多个元素使用——在这种情况下，哪个元素`label`可以使用？

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-06T15:06:21.980

不，你不能。您可以使用的唯一属性是`id`属性。

*使用类（描述一组*相关元素）是没有意义的，因为标签只能与一个表单控件相关联。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-04-02T15:00:30.723

你可以这样做 ：

```
<label class="col-md-12 input-group input-group-sm">
    <span class="col-sm-5 control-label text-nowrap">Code</span>
    <input class="form-control listen code" type="text" size="15" required/>
</label> 
```**

# compiler-construction - 为给定的正则表达式构建和运行 NFA 与 DFA 的时间成本

> ID：11830900
> 
> 赞同：1
> 
> 时间：2012-08-06T15:05:13.440
> 
> 标签：compiler-construction, theory, compiler-theory, fsm, nfa

我正在经历过去的考试，并且不断遇到我在教科书或谷歌上找不到答案的问题，因此非常感谢任何帮助。

我目前遇到的问题如下：

> 给定正则表达式 (a|bb)*，推导出将其转换为相应 NFA 和 DFA 的时间成本估计值。您的答案应该参考正则表达式的大小。

另一年的一个类似问题是：

> 鉴于以上示例，您知道原始正则表达式的大小 |r| 和输入字符串 |x| 的大小，解释如何计算构建和运行 NFA 与构建和运行等效 DFA 的时间成本。

(a|bb)* 得到的 NFA 有 9 个状态，而 DFA 有 4 个状态。即使知道这一点，我也不知道如何解决这个问题。

# jasper-reports - 如何在 Jaspersoft iReport Designer 4.7 中添加第二个页面

> ID：11830904
> 
> 赞同：19
> 
> 时间：2012-08-06T15:05:18.840
> 
> 标签：jasper-reports

您好，我对使用 Jaspersoft iReport Designer 完全陌生。我想要一份有两页的报告。我使用的版本是 4.7.0。我已经有一页上面有信息，但我不知道如何添加第二页。任何帮助将不胜感激。感谢您的时间。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-08T16:15:00.977

您可以通过几种方式完成此操作。

*   第一个实际上是创建 2 个单独的报告并将它们合并。基本上你画出每一页你想要的样子。导出时，您创建报告的 2 个 JasperPrint 实例，然后批量导出它们。

    ```
    public byte[] generateReport(JasperPrint jasperPrint1, JasperPrint jasperPrint2) {
      //throw the JasperPrint Objects in a list
      List<JasperPrint> jasperPrintList = new ArrayList<JasperPrint>();
      jasperPrintList,add(jasperPrint1);
      jasperPrintList,add(jasperPrint2);

      ByteArrayOutputStream baos = new ByteArrayOutputStream();     
      JRPdfExporter exporter = new JRPdfExporter();     
      //Add the list as a Parameter
      exporter.setParameter(JRExporterParameter.JASPER_PRINT_LIST, jasperPrintList);
      //this will make a bookmark in the exported PDF for each of the reports
      exporter.setParameter(JRPdfExporterParameter.IS_CREATING_BATCH_MODE_BOOKMARKS, Boolean.TRUE);
      exporter.setParameter(JRExporterParameter.OUTPUT_STREAM, baos);       
      exporter.exportReport();      
      return baos.toByteArray();
    } 
    ```

*   第二个选项是走子报表路线。基本上，您创建报告的第一页。然后创建报告的第二页。然后在iReport 中，您可以将子报表添加到Summary Band，传递运行所需的任何信息（即数据库连接、数据源、参数等）。在整体报告的属性下，您需要确保`Summary on new page`选中，以便子报告将打印在自己的页面上。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-30T06:50:14.890

我找到了另一种向报表添加页面的方法（使用 iReport 5.0.1）：您可以添加一个新的详细信息区域，将其高度设置为与第一个相同，然后将第二页的内容放在这个新区域中. 实际上，您可以根据需要添加尽可能多的详细信息区域，从而创建多页报告。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-12-12T05:37:18.207

添加一个新的详细信息带并在其中放置中断页面。
这个新的详细内容将显示在第二页。

[![在此处输入图像描述](../Images/5acae33898b7bf9a7f763a42644ca610.png)](https://i.stack.imgur.com/sgncl.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-30T07:53:00.960

要添加新页面，请转到 Ireport 和“添加报告组”，通过添加报告组，您可以添加任意数量的页面。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-18T08:50:40.350

我使用 IReport 5.6.0，您可以通过添加另一个详细信息部分来添加页面

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-28T11:06:19.557

在左侧面板上，右键单击“添加另一个详细信息带”。创建细节带后，右键单击新的细节带，然后单击“最大化带高”

# android - 不同语言的不同维度

> ID：11830906
> 
> 赞同：6
> 
> 时间：2012-08-06T15:05:21.657
> 
> 标签：android, android-layout

我正在做一个项目，在 textview 中，values-1024x768 文件夹中的文件 main_dimens.xml 中提到了文本的维度。但我需要针对特定​​语言（比如 pt）使用不同的文本大小。

```
<dimen name="main_digitalclock_size">18dp</dimen> 
```

我需要 12dp 的 pt 语言。所以我尝试在 values-pt 文件夹的 strings.xml 中添加上述代码行，还创建了一个文件夹 values-pt-1024x768 并放入其中。但仍然大小仅为 18dp。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T15:19:13.257

您确定您正确命名了资源文件夹吗？我在此处查找了 Android 操作系统在确定要使用哪些资源时使用的规则：

[http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources](http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources)

看起来指定可用屏幕尺寸的方式可能与您使用的不同。

# c++ - curl_getenv() 编写此函数的原因

> ID：11830908
> 
> 赞同：3
> 
> 时间：2012-08-06T15:05:25.877
> 
> 标签：c++, c, libcurl

我正在阅读 libcurl，但遇到了一件不清楚的事情。有一个函数 curl_getenv()。据记载，它是在考虑成为 stdlib.h 中函数 genenv() 的包装器的情况下完成的（[该函数的完整描述](http://paste.org.ru/?19cdn3)）

但是拿不到，怎么办？
在支持 C 语言的任何地方/所有平台上都支持 C 语言的标准功能。

那么，为什么要编写一个具有相同参数且不简化工作的包装器呢？不是没用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T15:36:11.467

该`curl_getenv`功能与`getenv`c lib中的功能不同，您可以从代码中看到它，我认为它很清楚-)：

```
static
char *GetEnv(const char *variable)
{
#ifdef _WIN32_WCE
  return NULL;
#else
#ifdef WIN32
  char env[MAX_PATH]; /* MAX_PATH is from windef.h */
  char *temp = getenv(variable);
  env[0] = '\0';
  if(temp != NULL)
    ExpandEnvironmentStringsA(temp, env, sizeof(env));
  return (env[0] != '\0')?strdup(env):NULL;
#else
  char *env = getenv(variable);
#ifdef __VMS
  if(env && strcmp("HOME",variable) == 0)
    env = decc_translate_vms(env);
#endif
  return (env && env[0])?strdup(env):NULL;
#endif
#endif
}

char *curl_getenv(const char *v)
{
  return GetEnv(v);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T15:33:01.530

如果环境变量的名称或它们所包含的字符串对于每个平台都略有不同怎么办？然后使用包装器可以使您隐藏差异。

# asp.net-mvc - 测试单元测试中是否命中了保存方法

> ID：11830911
> 
> 赞同：1
> 
> 时间：2012-08-06T15:05:29.573
> 
> 标签：asp.net-mvc, unit-testing, repository

我从 asp.net mvc 4 框架中的单元测试开始。

我有一个包含基本 crud 方法和 save 方法的存储库。当我创建一个单元测试时，我创建一个测试存储库并测试是否添加了一个项目到集合中。一切都很顺利，但我无法测试保存方法是否被击中。

我尝试向测试存储库添加一个布尔属性，如果 .save() 被命中，该属性将设置为 true。但随后我需要更改界面以及数据库存储库。在我看来，这既不实用也不是最佳实践。

测试这个的最佳方法是什么？预先感谢您的回答。

我的代码：

假存储库：

```
public class TestUserRepository : IUserManagementRepository
    {
        /// <summary>
        /// entries used used for testing
        /// </summary>
        private List<User> _entities;

        /// <summary>
        /// constructor
        /// </summary>
        public TestUserRepository()
        {
            _entities = new List<User>();
            _entities.Add(new User
            {
                Id = 1,
                InsertDate = DateTime.Now,
                LastUpdate = DateTime.Now,
                Username = "TestUserName",
                Password = "TestPassword"
            });
        }
...

public void Create(User task)
        {
            _entities.Add(task);
        }

public void Save()
        {
            //do nothing
        }
    } 
```

要测试的控制器：

```
[HttpPost]
        public ActionResult Create(User user)
        {
            if (ModelState.IsValid)
            {
                _repository.Create(user);
                _repository.Save();
                return RedirectToAction("Index");
            }
            else
            {
                return View(user);
            }

        } 
```

和测试

```
[TestMethod()]
        public void CreateTest()
        {
            IUserManagementRepository repository = new TestUserRepository();
            UserController controller = new UserController(repository);
            User user = new User { Username = "UnitTestUserName", InsertDate = DateTime.Now, LastUpdate = DateTime.Now, Password = "Password" };
            ActionResult actionResult = controller.Create(user);
        User returnedUser = repository.FindBy(u => u.Username == "UnitTestUserName").First<User>();

            Assert.IsNotNull(actionResult);
            Assert.AreEqual(user, returnedUser);            
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T16:14:07.970

您必须注意不要编写一堆仅测试您的测试存储库的单元测试。

考虑以下场景：

1.  您有一个服务方法，应该将项目添加到您的存储库。
2.  您的单元测试调用此方法，并且您应该验证是否在存储库上调用了适当的“AddX”方法。

这是一个有效的单元测试场景，要对其进行测试，您可以使用您的测试存储库。由于它是您的测试对象，因此您可以完全控制它。您可以公开诸如“AddXMethodCallCount”之类的属性或类似的东西。

随着时间的推移，您会发​​现自己编写了很多几乎是样板的测试代码。我强烈推荐的替代方法是使用模拟框架：

[https://stackoverflow.com/questions/37359/what-c​​-sharp-mocking-framework-to-use](https://stackoverflow.com/questions/37359/what-c-sharp-mocking-framework-to-use)

这需要一些时间来适应，但是一旦你掌握了它，它将显着加快你的单元测试。

如果您还不想使用模拟，但仍想实现验证是否调用 Save() 的目标，我建议您添加一个公开的 SaveMethodCallCount 属性：

```
public class TestUserRepository : IUserManagementRepository
{

...

public SaveMethodCallCount {get; set;}

...
public void Save()
    {
        SaveMethodCallCount++;
    }
} 
```

这行得通，因为在您的单元测试中，您实际上可以说：

TestUserRepository 存储库 = new TestUserRepository();

UserController 不关心，只要传入的参数实现了 IUserManagementRepository 接口即可。控制器通过接口与存储库对象交互，但单元测试不必这样做，并且作为测试类的 TestUserRepository 被允许具有更多功能，而不必通过接口公开。

所以你的测试可能看起来像：

```
[TestMethod()]
    public void CreateTest()
    {
        TestUserRepository repository = new TestUserRepository();
        UserController controller = new UserController(repository);
        User user = new User { Username = "UnitTestUserName", InsertDate = DateTime.Now, LastUpdate = DateTime.Now, Password = "Password" };
        ActionResult actionResult = controller.Create(user);
    User returnedUser = repository.FindBy(u => u.Username == "UnitTestUserName").First<User>();

        Assert.IsNotNull(actionResult);
        Assert.AreEqual(user, returnedUser);  
        Assert.AreEqual(1, repository.SaveMethodCallCount);
    } 
```

为了使我的示例完整，让我向您展示如果您使用模拟框架（如 Moq）会是什么样子。[您可以在此处](http://code.google.com/p/moq/wiki/QuickStart "这里")查看更多示例。示例测试方法使用 Moq 和[Arrange/Act/Assert](http://www.arrangeactassert.com/why-and-what-is-arrange-act-assert/)，并且只测试一件事——调用 Create() 时调用 Save()。

```
[TestMethod()]
public void Test_SaveCalledWhenCreateCalled()
{    
    // Arrange
    // First, instead of creating an instance of your test class, you create a mock repository. 
    // In fact, you don't need to write any code, the mocking framework handles it. 
    var mockRepository = new Mock<IUserManagementRepository>();
    // and pass the mock repository (which implements the IUserManagementRepository) to your controller
    UserController controller = new UserController(mockRepository);

    // Act
    ActionResult actionResult = controller.Create(user);

    // Assert
    // see how easy it is to do with a mocking framework:
    mockRepository.Verify(rep => rep.Save(), Times.AtLeastOnce());
} 
```

# javascript - 理解数组删除函数

> ID：11830929
> 
> 赞同：1
> 
> 时间：2012-08-06T15:06:43.033
> 
> 标签：javascript

我[在 john resig 博客上找到了他的函数，](http://ejohn.org/blog/javascript-array-remove/)用于从数组中删除元素。它真的很好用！但我真的不明白如何..

```
// Array Remove - By John Resig (MIT Licensed)
Array.prototype.remove = function(from, to) {
    var rest = this.slice((to || from) + 1 || this.length);
    this.length = from < 0 ? this.length + from : from;
    return this.push.apply(this, rest);
}; 
```

我对这个声明发生了什么感到困惑：`(to || from) + 1 || this.length)`对于初学者来说；也许一旦我明白了这一点，其余的就会变得更加清楚。非常感谢任何帮助弄清楚这里发生了什么。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T15:19:16.313

第一部分在切片之后获取数组的其余部分。如果您指定 a `to`，则它是;`slice`之后的所有内容 `to`否则，它就是`slice`之后的一切`from`。如果其中任何一个是`-1`，它会得到一个空切片。

下一部分将数组截断到删除的起始位置之前。

最后一部分在数组末尾重新插入`rest`（要删除的范围之后的部分）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T15:14:54.083

如果左侧`||`为真值，则返回左侧。否则它将返回右侧。

# spring - Spring上下文：属性占位符未加载属性

> ID：11830931
> 
> 赞同：1
> 
> 时间：2012-08-06T15:06:50.363
> 
> 标签：spring, properties

我有一个带有一个 bean 的 Spring 配置文件。该 bean 具有从属性文件填充的 2 个属性。我在我的 Spring 文件中使用以下配置来复制值，但它似乎不起作用。

```
 <context:property-placeholder ignore-resource-not-found="true"
    system-properties-mode="NEVER" 
    location="classpath:my.properties"/> 
```

奇怪的是 - 这以前有效。谁能告诉我为什么这不能成功复制属性？

我知道提供的信息很少。如果需要，我会添加详细信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T18:11:38.913

试试`classpath*:`前缀。并尝试给出 conf 文件的相对路径，并确保它确实在类路径上（注意 WEB-INF 不在类路径上 - webapp 的类路径从 WEB-INf/classes （和 lib）开始）

# php - PHP 简单 HTML DOM 属性列表

> ID：11830933
> 
> 赞同：3
> 
> 时间：2012-08-06T15:06:52.853
> 
> 标签：php, simple-html-dom

该`simple_html_dom`库非常适合获取已知属性，但有没有办法获取元素**所有属性的列表？**

例如，如果我有：

```
<div id="test" custom1="custom" custom2="custom"> 
```

我可以很容易地得到`id`：

```
$el = $html->find('div');
$id = $el->id; 
```

`custom1`但是，`custom2`如果他们不提前知道，是否有可能获得？`NVP`理想情况下，该解决方案将为所有属性 ( `id`, `custom1`, `custom2`)生成一个 's 数组。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T15:16:36.657

`$el->attr`是`tag=>value`s的关联数组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T15:17:45.833

您可以使用[`get_object_vars`](http://php.net/manual/en/function.get-object-vars.php)来获取关联数组，然后遍历它们。

```
$attrs = get_object_vars($el);

foreach($attrs as $key=>$value) {
} 
```

# ruby-on-rails - Rails 路由问题

> ID：11830935
> 
> 赞同：0
> 
> 时间：2012-08-06T15:06:56.423
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routing

根据

> 耙路线

我有这样的路线

> types_model GET /types/model(.:format) types#model

我有这样的方法：

```
def model
  @models = Model.find(:all, :conditions => { :MOD_MFA_ID => params[:model]})
end 
```

而这样的观点：

```
- @manufacturers.each do |manufacturer|
    %li      
      = link_to manufacturer.MFA_BRAND, :controller => "types", :method => "model", :model => "111" 
```

但是如何使用链接将参数发送到方法“模型”？例如： localhost/types/model/111 ？那么rails服务器工作正常吗？（现在它让我知道我没有这样的路线）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T15:14:25.943

考虑将模型方法命名为“show”，URL 将是 /types/111。这将使您的代码 RESTful

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T15:34:31.950

如果您需要将方法保留到您的路线，请添加此选项。

```
match "/types/model/:model" => "types#model" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T15:38:44.180

有几种可能性，最重要的是将您的应用程序保持在 RESTful 干净的模型中（它将为您节省大量时间）。

首先，您应该真正正确地定义您的模型：

*   你认为那一种类型是不同的模型吗？
*   您是否认为模型位于“目录”下？
*   你认为模型是类型对象的函数吗？
*   你认为模型是对象类型的全局函数吗？

## 模型作为类型的嵌套资源

在这种情况下，您认为一个类型实例有多个模型实例（就像一个公司可以有用户）。所以你应该有两个 restful 控制器：一个用于模型，一个用于类型。

您可以像这样定义这样的路线：

```
resources :types do
   resources :models
end 
```

**转到/types/14/model/1**时，将调用模型控制器中的 RESTful 方法，type_id 为 14，id 为 1。

关于你的问题，我认为这是最干净的方法。

## 类型命名空间中的模型

在这种情况下，模型方法将包含在类型命名空间中，但控制器仅用于处理模型对象。

```
namespace :types do
  resources :models
end 
```

它将允许您调用**/types/models/1**来调用模型控制器的显示功能。

## 模型方法作为类型实例的方法

在这种情况下，模型方法是类型实例的函数：

```
resources :types do
   member do
      :model
   end
end 
```

id = 42请求**/types/42/model**时会调用类型控制器的方法函数

## 模型方法作为类型的全局方法

在这种情况下，模型方法是全局类型类的全局方法

```
resources :types do
   collection do
      :model
   end
end 
```

在这种情况下，类型控制器的模型方法将在**/types/model**被请求时被调用。

一切都[在这里](http://guides.rubyonrails.org/routing.html)解释。

# asp.net-mvc - 使用 mvc3 knockout.js 和 sammy.js 的单页应用程序

> ID：11830939
> 
> 赞同：3
> 
> 时间：2012-08-06T15:07:07.487
> 
> 标签：asp.net-mvc, asp.net-mvc-3, knockout.js, sammy.js

我被困在项目的一个特定部分，该部分由标题中提到的组件组成。

我目前有一个按我希望的方式工作的概念证明：

*   Sammy 已集成到淘汰赛视图模型中（根据淘汰赛网站上的教程）
*   视图由控制器按需加载（因此我不必在应用程序页面上定义每个视图）

在我目前的情况下，我在应用程序启动时实例化视图模型（如果我不实例化它们，Sammy 将不会处理路由）。问题是 Sammy 加载和交换视图的位置。我必须调用 ko.applyBindings 才能让 KO 绑定到视图。但是反复调用应用程序是不好的做法。

我的问题是，如何绑定到按需加载的视图？我不能调用 ko.applybindings ，因为当视图多次加载时会造成内存泄漏。

这是一个带有违规 ko.applyBindings 的示例 VM：

```
function serviceInfoVm() {
var self = this;

self.ObjectKey = ko.observable();
self.Service = ko.observable();

self.LoadService = function () {
    $.get('ServiceData/Detail', { serviceId: self.ObjectKey() }, function (data) {
        self.Service(data);
    });
};

$.sammy('#content', function () {
    this.get('#/service/:id', function (context) {
        var ctx = context;
        self.ObjectKey(this.params['id']);

        self.LoadService();

        $.get('Content/ServiceInfo', function (view) {
            ctx.app.swap(view);
            ko.applyBindings(self);
        });
    });

}).run();
}; 
```

有人对此问题有一些指示和/或解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T16:34:50.057

您在视图模型中有 Sammy 代码，如果该视图模型存在并且您希望加载子视图模型和视图，则该代码可以很好地工作。所以我认为这就是你想要做的。深思熟虑...将 sammy 代码分离到它自己的模块中（我在 router.js 中调用我的路由器）并让它管理与任何视图模型分开的导航。

但回到你的代码......你可以设置你的子视图和子视图模型，并在调用 sammy.get 之前对它们使用应用绑定。基本上，您是在提前注册路线。然后 sammy.get 只是导航到已经绑定数据的新视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T06:56:25.980

不是解决方案，而是另一种方法：

最终放弃了动态加载视图的想法。现在我的视图总是出现在页面中，可见性是由这段代码触发的：

```
var app = function () {
var self = this;

self.State = ko.observable('home');

self.Home = ko.observable(new homepageVm());
self.User = ko.observable(new userInfoVm());

$.sammy(function () {

    this.get('#/', function (context) {
        self.State('home');
    });

    this.get('#/info/:username', function (context) {
        self.State('user');
        self.User().UserName(context.params['username']);
        self.User().LoadInfo();
    });

}).run(); 
```

};

And the div visibility is triggered this way:

```
<div id="homeView" data-bind="with: Home, visible: State() === 'home'"> 
```

This way the ko.applyBindings only needs to be called once when the app starts. The viewmodel above is bound to our shell page.

More on this [here](http://www.itq.nl/blogs/post/ASPNET-MVC3-Knockout-JS-and-Sammy-JS-e28093-Revisited.aspx "here")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T15:28:58.853

对返回模板中的特定元素调用 applyBindings 是一个选项：

```
ko.applyBindings(viewModel, htmlNode) 
```

另请参阅有关延迟加载模板的问题：[knockout.js - 模板的延迟加载](https://stackoverflow.com/questions/9422984/knockout-js-lazy-loading-of-templates)

以及适用于 applyBindings 的文档：http: [//knockoutjs.com/documentation/observables.html](http://knockoutjs.com/documentation/observables.html)

# date - 按日期拆分文件

> ID：11830943
> 
> 赞同：0
> 
> 时间：2012-08-06T15:07:25.010
> 
> 标签：date, csv, split

我有一个 2 GB 的 CSV 文件，它有几列和几百万行（包括格式为 2010-12-15 的日期列）。我希望将此 CSV 拆分为按日期排列在文件夹中的较小 CSV（例如，2010 年 12 月 15 日的所有条目都位于名为 20101215 的文件夹中）。

我对这些东西相当陌生，但知道 split 命令。你们能指出我正确的方向吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T15:15:34.493

根据您的数据的常规和清洁程度，这样的事情可能就足够了：

```
for i in `cut -d, -f 2  <csv | sort -u`; do
   mkdir $i && grep $i csv > $i/csv
done 
```

（假设您的数据在文件`csv`中，并且您的日期信息在第二列）

这是在做什么？`cut`过滤掉第二列中的日期，并运行它们以`sort -u`创建唯一日期的排序列表。然后我们遍历这个（`for`命令），并为每个条目`mkdir`创建一个相应的目录，然后 grep 将结果输出到该目录中的一个 csv 文件中。

这并不理想。例如，我们对每个日期的输入文件进行 grep。我假设数据是常规的，并且日期字符串（例如 2012-08-06）不会出现在数据的其他位置（或者具有会破坏上述脚本的字符，例如空格和/或`/`）。

我认为该`split`命令不会在这里为您提供帮助。将文件拆分为常规块（按大小或行数）更有用。

# django - 使用 django 进行统计

> ID：11830946
> 
> 赞同：0
> 
> 时间：2012-08-06T15:07:38.300
> 
> 标签：django, django-models

我目前有以下

```
class Profile(models.Model):
  gender = models.BooleanField()

class Q(models.Model):
  name = models.CharField(max_length=128)

class A(models.Model):
  q = models.ForeignKey(Q)
  profile = models.ForeignKey(Profile) 
```

我尝试做的是查询 Q 并获取男性或女性给出的答案数量？

不幸的是，我什至没有比编写自定义 SQL 更好的主意，为了数据库的可移植性，我宁愿避免这样做。我将如何开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T15:53:59.010

你在那儿。您只需要实际使用正确的过滤器语法。如果您尝试在 上的`gender`字段上进行过滤`profile`，那么您可以使用 来执行此操作`profile__gender`，因此：

```
males_answering = question.answers.filter(profile__gender="male").count() 
```

# django - Django：自定义模板过滤器

> ID：11830952
> 
> 赞同：0
> 
> 时间：2012-08-06T15:08:20.807
> 
> 标签：django, templates, filter

我如何创建一个简单的过滤器来从这样的字典中提取值：

```
PHANTOM_TYPE_CHOICES = (
    (1, 'Type 1'),
    (2, 'Type 2'),
) 
```

适用于 django 1.4：

我试过这个：

```
from django.template import Library    
register = Library() 
    ...

def get(d, key):
    return d.get(key, '')

register.filter(key) 
```

..但它不起作用！（它给了我以下错误：'function'对象没有属性'filter'）

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T15:15:39.620

你有没有尝试过：

```
register.filter('key', get) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T15:44:55.633

在您的代码示例中，您尝试注册一个指向方法“key”的过滤器，但是该方法的名称是“get”

代替

```
register.filter(key) 
```

和

```
register.filter(get) 
```

或使用装饰器

```
@register.filter()
def get(d, key):
    return dict(d).get(key, '') 
```

# apache - modrewrite 不工作

> ID：11830953
> 
> 赞同：0
> 
> 时间：2012-08-06T15:08:25.303
> 
> 标签：apache, .htaccess

我的网站上有一个页面，其中包含以下类型的链接：

[http://www.qblza.com.br/anuncio_detalhes.php?ida=231&title=capa-para-iphone-4-game-boy](http://www.qblza.com.br/anuncio_detalhes.php?ida=231&title=capa-para-iphone-4-game-boy)

我想用以下格式重写网址：

[http://www.qblza.com.br/231/title=capa-para-iphone-4-game-boy](http://www.qblza.com.br/231/title=capa-para-iphone-4-game-boy)

我已经尝试了数千个 modrewrite 生成器，但没有人在我的网站上工作。最后一个生成以下代码：

```
RewriteRule ^(.*)$ http://www.gobig.com.br/$1 [R=301,L] 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T15:14:16.430

这是您需要的基本 htaccess：

```
RewriteEngine on
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f

RewriteRule ^([0-9]+)/([A-Za-z0-9-]+)/?$ /anuncio_detalhes.php?ida=$1&title=$2 [L] 
```

*   你有两个参数：`http://www.qblza.com.br/[param1]/[param2]`
*   他们都是必需的
*   `[param1]`将只接受数字（一个或多个）：`([0-9]+)`
*   `[param2]`将接受数字、字母和`-`（一个或多个）：`([A-Za-z0-9-]+)`
*   决赛`/`是可选的

注意：请记住 htaccess 文件不会神奇地更改您的旧网址。您需要使用该`http://www.qblza.com.br/[param1]/[param2]`模式，htaccess 会将这些“错误”网址重定向到真实网址。

# selenium - Selenium nth match by id 没有共同的父母

> ID：11830954
> 
> 赞同：-2
> 
> 时间：2012-08-06T15:08:32.577
> 
> 标签：selenium, css-selectors

我必须使用 Selenium 测试一些复杂的 Web 服务。

问题是`id`元素的 s 在会话之间发生变化。
例如，有一堆*输入*，每个都有`id`前缀`textf_id_DComboBox_`并以连续数字结尾，起始数字是随机的（取决于会话）。
这些*输入*没有共同的父级，因此`nth-child`不起作用。\

我可以使用选择器找到第一个*输入*`css=input[id^='textf_id_DComboBox_']`：但我不知道如何找到与此选择器匹配的下一个项目（1-7）。我在 stackoverflow 上找到了一些`xpath`应该使用选择器的建议，但我无法为我的用例采用示例。

*更新*：
我还有捕获第一个输入的替代选择器：`css=td.DForm_treeGridNoWrap input`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T20:49:50.867

您可以使用此 XPath 来选择包含公共 id 的所有输入：

```
string comboBoxXPath = "//input[contains(@id, 'textf_id_DComboBox')]";
List<WebElement> comboBoxElements = driver.findElements(By.XPath(comboBoxXPath)); 
```

此时，您可以遍历整个集合，也可以使用索引选择要与之交互的集合：

```
comboBoxElements[1]
comboBoxElements[2]
comboBoxElements[3]

etc... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T17:30:07.357

好吧，这种描述并没有太大帮助。你可以试试这些技巧：

*   你可以调用`findElement`这个`WebElement`技巧可能不起作用，因为这些 ID 没有共同的父级。但是如果它们被包装在表格中，你可以先找到表格：

    ```
     WebElement table = driver.findElement(By.id("the-table")); 
    ```

然后在该表中查找所有输入：

```
 List<WebElement> inputs = table.findElements(By.tagName("input")); 
```

*   将 Selenium IDE 安装到您的 firefox 并尝试使用它来记录测试用例。您可以在 Selenium IDE 中使用目标。

*   肮脏的方法

    ```
     List<WebElement> allInputs = driver.findElements(By.tagName("input")); 
    ```

    将在此类页面中找到**所有**输入。

脚注：代码是 Java 并且`driver`变量被认为是健康的实例`WebDriver`

# c# - 已识别项目之一的格式无效 - Microsoft.SqlServer.Type

> ID：11830955
> 
> 赞同：1
> 
> 时间：2012-08-06T15:08:33.207
> 
> 标签：c#, sql-server, sql-server-2012, geography, sqlgeography

我正在尝试从我的 SQl Server 2012 数据库中检索地理数据：

```
new SqlDataAdapter("SELECT [SpatialColumn] FROM [SpatialTable]", myConnection).Fill(myDatatable); 
```

当数据是诸如 Sql Server 2008 地理类型时`Polygon`，一切正常。但是当类型是新的时`CurvePolygon`，那行代码会因错误而崩溃：

```
System.FormatException occurred
Message="One of the identified items was in an invalid format."
Source="Microsoft.SqlServer.Types"
StackTrace: at Microsoft.SqlServer.Types.GeoData.Read(BinaryReader r) 
```

在这篇[MSDN 文章中](http://msdn.microsoft.com/en-us/library/ms143179.aspx)，在名为*SQL CLR Data Types*的部分中，我读到当您引用 SqlTypes 程序集版本 11.0，并且还安装了 10.0 版本时，您可能会看到类似的错误。所以我按照说明更改了我的配置文件。但这并没有解决我的问题。

任何想法都非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-12-30T11:45:21.590

您可以尝试以下绑定重定向：

```
 <assemblyBinding>   
      <!--....-->
     <dependentAssembly>
            <assemblyIdentity name="Microsoft.SqlServer.Types" publicKeyToken="89845dcd8080cc91" />
            <bindingRedirect oldVersion="10.0.0.0-11.0.0.0" newVersion="11.0.0.0" />
          </dependentAssembly>
        </assemblyBinding> 
```

加载程序集似乎有问题。更多信息：[https ://blog.devart.com/adventures-of-clr-types-in-net-framework.html](https://blog.devart.com/adventures-of-clr-types-in-net-framework.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T12:51:26.990

我遇到过同样的问题。它在 SQL-Server 2012 中运行良好，但在 SQL-Server 2008 中却不行。我必须使用我的`Geography`数据，使用`SqlDataReader.GetSqlBytes`然后反序列化。

`var geo = SqlGeography.Deserialize(dr.GetSqlBytes(0))`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-20T19:36:10.670

如果您不需要 SQLGEOGRAPHY 对象，请尝试将 SQLType 转换为数据库中的文本。

```
new SqlDataAdapter("SELECT SpatialColumn.STAsText() FROM [SpatialTable]", myConnection).Fill(myDatatable); 
```

现在您的数据应该以格式通过；

```
"POLYGON((-123.22,102.32...." 
```

或者

```
"CURVEPOLYGON((-123.22,102.32...." 
```

因为任一类型都可以表示为文本，这将成功填充 DataTable 中的列。

# c# - Linq2Sql 结果可用性超时

> ID：11830956
> 
> 赞同：0
> 
> 时间：2012-08-06T15:08:34.510
> 
> 标签：c#, multithreading, iis

我使用 Linq2Sql 检索 ID 列表，用于通过 SSRS Web 服务启动 SSRS 报告导出。该查询检索大约 200 个项目，我使用 foreach 循环遍历它们。

我将包含 ID 的 List 对象传递给*在新线程中*执行的方法。

SSRS 报告的生成时间很长，所以有时当服务器由于工作负载变慢时，整体执行超过了*20 分钟*，我的线程也结束了，无一例外。

Linq2Sql DataContext 中是否有与此用例匹配的超时设置，之后我的结果变得不可用并且 foreach 循环结束？

**更新 1（代码）：**

```
List<String> list = dc.ListaIDs().ToList<String>();
int count = 0;
foreach (var item in list)
{
    string FileName = "report_" + (++count).ToString() + ".pdf";
    LoggerUtility.Instance.log.Debug(String.Format("export => " + FileName));
    try
    {
        switch (ReportFormat)
        {
            case "PDF":
                risultato = ReportServiceImpl.WSReport("PDF", item);
                System.IO.File.WriteAllBytes(FileName, risultato.PDFResult);
                break;
            default:
                LoggerUtility.Instance.log.Warn("no format");
                break;
        }
    }
    catch (Exception ex)
    {
        LoggerUtility.Instance.log.Warn("error exporting => " + FileName, ex);
    }
} 
```

**更新 2：**

rs 对象（我为分离报告 WS 调用而创建的自定义 ReportService 类）不在线程的同一范围内；它在作为线程启动的方法之外声明和实例化，包含该方法的类和 rs 声明是 MVC 3 控制器。

在 ReportService 类中，每个调用都会实例化一个新的 ReportExecutionService（之前通过对 ReportExecution2005.asmx 的 Web 引用获得）。

**更新 3（WS 调用代码和第一部分代码的一点更新）：**

我重构了代码以对我`ReportServiceImpl`的方法进行静态调用，并应用@JamieSee 的响应中所说的可能排除Linq2Sql 中的超时。这是 ReportServiceImpl.WSReport 的实际实现；20 分钟后，它无一例外地停在`result = service.Render(...)`：

```
public static ReportResult WSReport(String format, string id)
{
    ReportResult _return = new ReportResult();
    ReportExecution.ReportExecutionService service = null;
    try
    {
        byte[] result;
        service = new ReportExecution.ReportExecutionService();

        String reportPath = @"/myReport";
        string historyID = null;

        service.UseDefaultCredentials = true;

        //load report
        ExecutionInfo execInfo = new ExecutionInfo();
        ExecutionHeader execHeader = new ExecutionHeader();

        service.ExecutionHeaderValue = execHeader;
        execInfo = service.LoadReport(reportPath, historyID);

        //set execution parameter
        ParameterValue[] parameters = new ParameterValue[1];
        parameters[0] = new ParameterValue() { Name = "id", Value = id };
        service.SetExecutionParameters(parameters, "it-IT");

        String SessionId = service.ExecutionHeaderValue.ExecutionID;

        //render report actually
        String deviceInfo = "";
        String extension;
        String mimetype;
        String encoding;
        GestioneVIP_Services.ReportExecution.Warning[] warnings;
        string[] streams;
        result = service.Render(format, deviceInfo, out extension, out mimetype, out encoding, out warnings, out streams);
        switch (format)
        {
            case Constants.EXCEL_FORMAT:
                _return.XLSResult = result;
                break;
            case Constants.PDF_FORMAT:
                _return.PDFResult = result;
                break;
            case Constants.HTML_FORMAT:
                _return.HTMLResult = result;
                break;
        }
    }
    catch (SoapException ex)
    {
        LoggerUtility.Instance.log.Error(String.Format("{0}/n{1}", ex.Message, ex.StackTrace));
    }
    catch (Exception ex)
    {
        LoggerUtility.Instance.log.Error(String.Format("{0}/n{1}", ex.Message, ex.StackTrace));
    }
    finally
    {
        if (service != null)
        {
            service.Dispose();
        }
    }
    return _return;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T16:53:36.413

尝试更改 IEnumerable list = dc.ListaIDs(); 列表列表 = dc.ListaIDs().ToList();。这应该避免在 foreach 中延迟执行，并且会告诉您这是 Linq 问题还是其他问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T09:04:10.580

使用上面评论中提到的多线程配置进行测试并深入研究这个问题，我找到了正确的答案，所以我在这里报告它的完整性。

这种微妙超时的原因在于*应用程序池的**高级设置*的*进程模型*部分中的*空闲超时*配置。

 ***它的默认值为**20 分钟**。

由于某种我还不明白的原因，从启动一些线程的 Web 层启动的进程，如果没有 Web 层活动被视为空闲然后停止。甚至可以在*任务管理器的**进程*选项卡中跟踪*w3wp.exe*进程的行为。 任何在 ThreadPool 中排队或由该进程直接启动的线程都将以该进程结束。

 **最后我可以说它不是 Linq2Sql 相关的，也不是 SRSS Web 服务相关的，而是更多的 IIS 进程模型相关的。*****

# java - Web 应用程序中的 NTLM 身份验证 (java)

> ID：11830957
> 
> 赞同：2
> 
> 时间：2012-08-06T15:08:34.970
> 
> 标签：java, authentication, web-applications, ntlm

我正在使用以下过滤器在我的 Web 应用程序中启用 NTLM 身份验证。

我收到 Windows 浏览器身份验证提示。它工作正常。除了 -**我无法判断身份验证是成功还是失败！！！****两种情况都没有错误。** 在每种情况下，都会打印用户名（正确或其他）、工作站等。

```
package com.test;
import java.io.IOException;
import java.io.PrintStream;
import javax.servlet.Filter;
import javax.servlet.FilterChain;
import javax.servlet.FilterConfig;
import javax.servlet.ServletException;
import javax.servlet.ServletRequest;
import javax.servlet.ServletResponse;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import jcifs.ntlmssp.Type3Message;
import com.sun.xml.internal.ws.util.StringUtils;
import sun.misc.BASE64Decoder;
import sun.misc.BASE64Encoder;
public class NTLMUserFilter implements Filter {
    private FilterConfig filterConfig = null;
    private String userDomain = null;
    public void init(FilterConfig filterConfig) throws ServletException {
        this.filterConfig = filterConfig;
    }
    public void doFilter(ServletRequest req, ServletResponse res,
            FilterChain chain) {
        HttpServletRequest request = (HttpServletRequest) req;
        HttpServletResponse response = (HttpServletResponse) res;

        String username = null;
        //first, get the user agent
        String useragent = request.getHeader("user-agent");
        //if you're using IE, you can continue
        if ((useragent.indexOf("MSIE") > -1)){
            //Always do the ntlm check (for IE POST back)
            try{
                String auth = request.getHeader("Authorization");
                if (auth == null)
                {
                  response.setHeader("WWW-Authenticate", "NTLM");
                  response.setStatus(response.SC_UNAUTHORIZED);
                  response.setContentLength(0) ;
                  response.flushBuffer();
                  return;
                }
                if (auth.startsWith("NTLM "))
                {
                  byte[] msg = new sun.misc.BASE64Decoder().decodeBuffer(auth.substring(5));
                  int off = 0, length, offset;
                  if (msg[8] == 1)
                  {
                    byte z = 0;
                    byte[] msg1 = {(byte)'N', (byte)'T', (byte)'L', (byte)'M', (byte)'S', (byte)'S', (byte)'P', z,(byte)2, z, z, z, z, z, z, z,(byte)40, z, z, z, (byte)1, (byte)130, z, z,z, (byte)2, (byte)2, (byte)2, z, z, z, z, z, z, z, z, z, z, z, z};
                    response.setHeader("WWW-Authenticate", "NTLM " + new sun.misc.BASE64Encoder().encodeBuffer(msg1));
                    response.setStatus(response.SC_UNAUTHORIZED);
                    response.setContentLength(0) ;
                    response.flushBuffer();
                    return;
                  }
                  else if (msg[8] == 3)
                  {
                      //Did Authentication Succeed? All this is always printed.

                      Type3Message type3 = new Type3Message(msg);

                      System.out.println("osUser: " + type3.getUser());
                      System.out.println("osRemoteHost: + " + type3.getWorkstation());
                      System.out.println("osDomain: " + type3.getDomain());

                  }
                }
            }catch(Exception e){
                System.out.println(e) ;
            }
            //System.out.println("Suc);

            }

        try {
            chain.doFilter(req, res);
        } catch (IOException e) {
            System.out.println(e);
        } catch (ServletException e) {
            System.out.println(e);
        }
    }
public void destroy()
   {
     this.filterConfig = null;
   }
} 
```

* * *

web.xml 很简单：

```
<filter>
    <filter-name>ntlmFilter</filter-name>
    <filter-class>
        com.test.NTLMUserFilter
    </filter-class>
</filter>

<!-- Filter mapping configuration   -->

<filter-mapping>
    <filter-name>ntlmFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T15:26:51.517

正如爱德华所说，仅从类型 3（响应）NTLM 消息中提取名称并不能说明生成它的客户端是否有权这样做。

NTLM 不像 Kerberos，后者有一个服务可以自行验证的签名令牌；您每次都必须连接到域控制器以询问令牌是否合法。实现 MSRPC 连接以检查 NTLM 令牌确实是一项艰巨的工作。

在过去，您可以在 JCIFS 中使用 a 来执行此操作`jcifs.smb.SmbSession`，并且`jcifs.http.NtlmHttpFilter`会为您执行此操作。然而，这只适用于 NTLMv1，它是旧的、不安全的，并且越来越不可能用于任何事情。（我相信上面链接的 'ntlm-java' 也是 NTLMv1-only。）

试试[ntlmv2auth](http://sourceforge.net/projects/ntlmv2auth/)项目。

NTLM-over-HTTP 已经足够让人头疼了，通常最好使用任何其他可用的身份验证方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T09:24:06.830

您收到 Type 3 消息，但除了打印出详细信息外，您没有对它做任何事情。此时您需要验证客户端的响应并发送 200（如果授权）或 401（如果没有）。

但是，您传递的 Type 1 消息由静态字节组成，并且 - 虽然它会诱使客户端发回响应 - 几乎没有意义。自己实现完整的 NTLM 身份验证堆栈并非不可能，但您拥有的代码根本无法工作。

您可以调查一个[NTLM Solution for Java](http://code.google.com/p/ntlm-java/)，或者（假设您在 Windows 上）您可以调用必要的身份验证函数[`AcceptSecurityContext`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa374703%28v=vs.85%29.aspx)，如 JNI。

# .htaccess - 将所有非 www 重定向到 www，除了一个带有 htaccess 的子域

> ID：11830960
> 
> 赞同：7
> 
> 时间：2012-08-06T15:08:43.030
> 
> 标签：.htaccess, redirect

我想将所有不包含的 URL 重定向`www`到`www`

我用这个：

```
RewriteCond %{HTTP_HOST} !^www.example.com$
RewriteRule ^(.*) http://www.example.com$1 [QSA,L,R=301] 
```

现在我需要一个子域不要像这样重定向，否则会出错。

所以我想重定向任何不以 sub 或`www`to开头的 URL`www.example.com`

我怎样才能做到这一点 ？谢谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-06T15:17:43.557

你需要一秒钟`RewriteCond`。您可以应用任意数量的`RewriteRule`.

假设任何不需要`sub.mydomain.com`的东西`www.mydomain.com`，这里是你的代码：

```
RewriteCond %{HTTP_HOST} !^sub.mydomain.com$
RewriteCond %{HTTP_HOST} !^www.mydomain.com$
RewriteRule ^(.*) http://www.mydomain.com/$1 [QSA,L,R=301] 
```

`|`但是您可以使用正则表达式中的竖线 ( ) 字符进一步简化此过程：

```
RewriteCond %{HTTP_HOST} !^(sub|www).mydomain.com$
RewriteRule ^(.*) http://www.mydomain.com/$1 [QSA,L,R=301] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-03-31T07:19:14.540

```
RewriteCond %{HTTP_HOST} !^(.*)\.(.*)\. [NC]
RewriteCond %{HTTPS}s ^on(s)|
RewriteRule ^ http%1://www.%{HTTP_HOST}%{REQUEST_URI} [L,R=301] 
```

这适用于所有域，不包括任何子域。玩得开心。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-02T11:20:52.643

我尝试了 Scott S 的答案，但没有奏效，所以我修改为使用我用于一般 301 的答案：

```
RewriteCond %{HTTP_HOST} ^domain.com
RewriteCond %{HTTP_HOST} !^subdomain.domain.com
RewriteRule ^(.*)$ http://www.newdomain.com/$1 [R=301,L] 
```

它就像一个魅力

# javascript - 如何将 JSON.NET 日期时间格式转换为 javascript 日期和时间

> ID：11830965
> 
> 赞同：0
> 
> 时间：2012-08-06T15:09:21.660
> 
> 标签：javascript, asp.net-mvc-4, asp.net-web-api, json.net

我不敢相信我会问这种问题。但我不得不这样做，因为我没有多少头发可以伸展。

我正在使用 MVC4 RC WEB API 和淘汰赛。如果我调用 web api 的 GET 方法，我会得到一个带有 datetime 属性的对象，该属性通过 JSON.NET 自动转换为字符串，例如“2012-05-12T00:00:00”。

但是如何将此字符串转换为 javascript 格式以使用 jquery ui，例如日历？我尝试了各种方法都徒劳无功。

更新：我相信这不是 Date 类。这是 jquery 日历（当然还有我）。我不知道我必须像这样指定 minDate 才能显示正确的日期值。也许有更好的方法来做到这一点？

```
 <div class="editor-label">Date:             </div>
        <div class="editor-field">
                <input data-bind="datepicker: selectedGroup().InspectionDate, 
                      datepickerOptions: { minDate: selectedGroup().InspectionDate }">
                </input>
        </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T15:14:30.213

Javascript 控制台（Chrome）：

```
>>Date("2012-05-12T00:00:00")
Fri May 11 2012 19:00:00 GMT-0500 (Central Daylight Time) 
```

`Date()`不适合你吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T15:16:03.427

真的有2种方式。

1.  蛮力：拆分字符串，获取年、月、日等，并在 javascript 日期上调用相关方法，例如`setYear`,等`setMonth``setDate`

2.  使用诸如[date.js 之](http://code.google.com/p/datejs/)类的库，它往往比原生`Date`对象更好地支持将字符串解析为日期

这似乎也涵盖了您想要的内容：[https ://github.com/csnover/js-iso8601/](https://github.com/csnover/js-iso8601/)

# ruby-on-rails - 如何在搜索Rails中选择的特定字段的搜索框旁边进行下拉？

> ID：11830967
> 
> 赞同：0
> 
> 时间：2012-08-06T15:09:42.540
> 
> 标签：ruby-on-rails, jruby

好的，我是这个网站的新手，但这就是我所拥有的：

# 报告.rb

```
def self.search(search)  
    if search  
      where('JOBLETTER_CD_NUMBER LIKE ? AND DATE LIKE? AND CUST LIKE ?', "%#{search}%") 
    else  
      scoped  
    end  
  end  
end 
```

# index.html.erb

```
select_tag "search", options_for_select([ "Job Letter and CD #", "Date", "Cust", "Job", "Date shipped", "Date billed", "Billed by" ], params[:search]) 

form_tag reports_path, :method => 'get' do

text_field_tag :search, params[:search], :class=> "form-search", :align => "right"

<%= submit_tag "Search", :JOBLETTER_CD_NUMBER => nil, :class => "btn btn-success", :align => "right" 
```

# 报告控制器

```
def index
    @report = Report.paginate(:per_page => 1, :page => params[:page])
    @report = Report.search(params[:search]).paginate(:per_page => 1, :page => params[:page])  
    respond_to do |format|
      format.html # index.html.erb
      format.json { render :json => @views }

    end
  end 
```

它将搜索的唯一字段是 Job Letter 和 CD # 字段，我需要它来搜索下拉框中选择的任何内容。顺便说一句，我正在使用 js 和 css 函数的引导程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T15:41:03.330

您的查询有 3 个占位符`?`，但只传递了一个参数`"#{search}"`- 如果您这样运行它，您真正应该得到的是一个异常说明

```
ActiveRecord::PreparedStatementInvalid: wrong number of bind variables (1 for 3) ... 
```

此外，您`select_tag`的表单在表单之外，因此它根本不会传递给控制器​​。如果将它移到表单中，则必须重命名（例如，改为`column`），因为该名称`search`已被文本字段使用。然后您可以将 the`column`和`search`参数传递给您的搜索函数来构造查询。

**但是**，这是不安全的，因为没有任何东西可以阻止用户通过操纵发布请求来传递任何其他列，并且由于您不能使用占位符作为列名，因此也存在 SQL 注入的危险。

有许多解决方案可以构建搜索，无需重新发明轮子。看看[洗劫](https://github.com/ernie/ransack/)宝石。这是最近关于如何使用它的[Railscast 。](http://railscasts.com/episodes/370-ransack)

# php - 在创建井字游戏时需要帮助

> ID：11830970
> 
> 赞同：-2
> 
> 时间：2012-08-06T15:09:52.293
> 
> 标签：php, tic-tac-toe

我正在用 PHP 创建一个井字游戏。

我将用户的值作为网格中的整数位置，例如-

```
1 | 2 | 3
---|---|---
 4 | 5 | 6
---|---|---
 7 | 8 | 9
```

我将用户输入的值存储为会话中的 CVS。就像用户在 Ist 行 IInd 列和 IInd 行 IInd 列中创建 X 一样，那么会话中的值将是 2,5。

现在的主要问题是当我想为计算机创建 O 作为 1 到 9 之间的随机位置时，它不应该包含 2 和 5。

如何创建一个 1 到 9 之间的随机数，其中不包含用户输入的值（作为 CVS 字符串存储在会话变量中）？

这是到目前为止的脚本：

```
<?php
session_start();
?>
<html>
<head>
<title> Hello! </title>
<meta http-equiv='Content-Type' content='text/html; charset=UTF-8' />
<meta name='txtweb-appkey' content ='1205be63-8293-4c02-82ce-17c500075e80' />
</head>
<body>
<?php
if(!empty($_GET['user'])){
    $user=$_GET['user'];
    if($user=='x'||$user=='X'){$com='O';}
    if($user=='o'||$user=='O'||$user=='0'){$user='O';$com='X';}
    $user=strtoupper($user);
    echo 'U choose to play with ',$user;
    if(empty($_GET['move'])){
        echo '<br />Take ur keypad as grid & start playing by replying with grid number<br />E.g.: 4 for 2 row 1 column<br />';
    }
    $grid=array();
    $grid[0]=array('   ','   ','   ');
    $grid[1]=array('   ','   ','   ');
    $grid[2]=array('   ','   ','   ');
    if(!empty($_GET['move'])){
        $usermove=$_GET['move'];
        $s=$_SESSION['usermove'];
        $pos=strpos($usermove,$s);
        if(!($pos===false)){echo 'This position is not empty!!';exit();}
        $s=$_SESSION['commove'];
        $pos=strpos($usermove,$s);
        if(!($pos===false)){echo 'This position is not empty!!';exit();}
        if(!empty($_SESSION['usermove'])){$_SESSION['usermove']=$_SESSION['usermove'].','.$usermove;}
        else{$_SESSION['usermove']=$usermove;}
        $moves=explode(',',$_SESSION['usermove']);
        foreach($moves as $value){
            switch($value){
                case '1':$grid[0][0]=' '.$user.' ';
                    break;
                case '2':$grid[0][1]=' '.$user.' ';
                    break;
                case '3':$grid[0][2]=' '.$user.' ';
                    break;
                case '4':$grid[1][0]=' '.$user.' ';
                    break;
                case '5':$grid[1][1]=' '.$user.' ';
                    break;
                case '6':$grid[1][2]=' '.$user.' ';
                    break;
                case '7':$grid[2][0]=' '.$user.' ';
                    break;
                case '8':$grid[2][1]=' '.$user.' ';
                    break;
                case '9':$grid[2][2]=' '.$user.' ';
                    break;
            }
        }
        if(strlen($moves)==1){
            $ran=rand(2,9);
            if($ran==$moves[0]){
                $ran=$ran-1;
            }
        }
        else{
            $ran=rand(1,9);
            $i=0;
            while(in_array($ran,$_SESSION['usermove'])){
                $ran=rand(1,9);
                $i++;
                if($i>=9){$ran=12;break;}
            }
        }
        if(!empty($_SESSION['commove'])){$_SESSION['commove']=$_SESSION['commove'].','.$ran;}
        else{$_SESSION['commove']=$ran;}
        $cmoves=explode(',',$_SESSION['commove']);
        foreach($cmoves as $value){
            switch($value){
                case '1':$grid[0][0]=' '.$com.' ';
                    break;
                case '2':$grid[0][1]=' '.$com.' ';
                    break;
                case '3':$grid[0][2]=' '.$com.' ';
                    break;
                case '4':$grid[1][0]=' '.$com.' ';
                    break;
                case '5':$grid[1][1]=' '.$com.' ';
                    break;
                case '6':$grid[1][2]=' '.$com.' ';
                    break;
                case '7':$grid[2][0]=' '.$com.' ';
                    break;
                case '8':$grid[2][1]=' '.$com.' ';
                    break;
                case '9':$grid[2][2]=' '.$com.' ';
                    break;
            }
        }
    }
    echo '<br /><pre>';
    echo $grid[0][0],'|',$grid[0][1],'|',$grid[0][2],'<br />';
    echo '---|---|---<br />';
    echo $grid[1][0],'|',$grid[1][1],'|',$grid[1][2],'<br/>';
    echo '---|---|---<br />';
    echo $grid[2][0],'|',$grid[2][1],'|',$grid[2][2],'</pre><br />';
    echo '<form action="',$_SERVER['PHP_SELF'],'" method="get" class="txtweb-form">';
    echo 'Your option<input type="text" name="move" />';
    echo '<input type="hidden" name="user" value="',$user,'" />';
    echo '<input type="submit" value="send" /></form>';
    echo '</body></html>';
    exit();
}
$_SESSION['usermove']='';
$_SESSION['commove']='';
echo 'Wellcome, choose X or O<br/>';
echo '<form action="'.$_SERVER['PHP_SELF'].'" method="get" class="txtweb-form">';
echo 'X or O<input type="text" name="user" />';
echo '<input type="submit" value="choose" /></form>';
?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T15:12:24.893

创建一个包含所有合法位置的数组（在本例中为 1、3、4、6、7、8、9），然后使用 rand() 在创建的数组中选择一个随机索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T15:17:09.433

首先，我会将值存储在一个数组中（不是 CSV 字符串）。

```
$selected = array(2, 5); 
```

如果您必须将值存储在 CSV 字符串中，请转换为数组：

```
$selected = explode(',', $_SESSION['selected']); 
```

然后我会创建一个可用选择的数组

```
$ticTacToe = array(1,2,3,4,5,6,7,8,9);
$available = array_diff($selected, $ticTacToe); 
```

然后随机挑选`$available`

```
$selected[] = $available[rand(0, count($available) - 1)]; 
```

最后，`$selectedCSV`在会话中更新

```
$_SESSION['selected'] = implode(",", $selected); 
```

# php - 选择运输方式后如何更改/更新运输价格

> ID：11830971
> 
> 赞同：3
> 
> 时间：2012-08-06T15:09:56.240
> 
> 标签：php, zend-framework, magento, observer-pattern, magento-1.6

在创建运输模块后，我正在尝试按照本[博客](http://www.excellencemagentoblog.com/magento-advanced-shipping-method-development)中的说明为 magento 1.7.xx 创建自定义（拣货）运输方法。我希望能够根据用户选择的运输选项更改运输成本。

**准备：**

1.) 为自定义 (pickship) 运输方法创建了一个表单块
2.) 创建一个包含三个值的商店名称（可以是任何文本）下拉/选择元素：store1、store2、store3。
3.) 默认运费通过运费配置设置为 1.00 美元（仅用于测试目的）。

**当前状态：**

1.) 完成所需流程后，当我在单页结帐中选择运输方式时，我看到一个包含三个选项的选择元素，并且运费设置为默认价格。

**目标：**

如果用户选择第一个选项，我希望将运费更新为 10.00 美元，如果用户选择第二个选项，我希望将运费更新为 20.00 美元。

**我的尝试：**

经过几个小时的谷歌搜索，我对观察者模型进行了一些更改：

```
NameSpace_ModuleName_Model_Observer extends Varien_Object {

public function saveShippingMethod($observer) {

   $request = $evt->getRequest();
   $quote = $evt->getQuote();
   $pickship = $request->getParam('shipping_pickship', false);
   $rates = $quote->getShippingAddress()->getShippingRatesCollection();
   $rate = $rates->getFirstItem();
   if($pickship['select_element'] == 1) {
     $rate->setPrice(10);
   } elseif($pickship['select_element'] == 2) {
     $rate->setPrice(20);
   }
   //Mage::log($rate->getPrice());

} 
```

**问题：**

我是否为这项任务使用了正确的观察者/方法？它只适用于一个步骤——一旦我点击“继续”下订单，它就会重置为默认价格。我设定交货价格的方式可能是错误的。你能让我走上正确的轨道或提出解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-21T07:25:30.860

如果你想编写你定制的解决方案，你可以在这里找到一个很好的教程：[Magento 中的自定义运输方式](http://inchoo.net/magento/custom-shipping-method-in-magento/)

基本上你不应该使用观察者，而是你应该在你的模块中定义一个具有两种运输方式的自定义承运人。

在您的模型中，使用函数`getAllowedMethods()`声明您的运输方式，然后在函数中`collectRates()`给出每种运输方式的费率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-11T12:12:24.267

如果您的主要目标是提供具有不同定价的多种运输方式，并且可以信任第三方模块，您可以尝试 WebShopApps 的免费 MatrixRate

[http://www.magentocommerce.com/magento-connect/webshopapps-matrixrate-1-multiple-table-rates-extension.html](http://www.magentocommerce.com/magento-connect/webshopapps-matrixrate-1-multiple-table-rates-extension.html)

还有其他模块，但这是我尝试过的，它按我的预期工作。

# c++ - C ++：strcpy函数复制null？

> ID：11830979
> 
> 赞同：28
> 
> 时间：2012-08-06T15:10:38.057
> 
> 标签：c++, string, null

在专门使用字符串操作函数`strcpy`时，我做了这个小程序。

```
char s1[8]="Hellopo";
char s2[4]="sup";
strcpy(s1,s2);
cout<<s1<<endl; 
```

当我打印出 s1 它实际上只是打印出“sup”。我希望它打印“suplopo”。

然后我这样做了：

`cout<<s1+4 << endl;`

它打印出“opo”；

而这个的输出：`cout<<s1+3<<endl;` 什么都没有

所以在考虑了一下之后。

我得出了这个结论。由于 C++ 一旦到达空终止符就停止输出字符串。因此 null 必须已复制到`strcpy`函数中。导致这个字符串：

s - u - p - \0 - o - p - o -\0；

请告诉我这是否正确。如果我不是，请纠正我。

如果您有更多信息要提供，请提供。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-08-06T15:13:58.450

您的推理是正确的，并且很容易被任何体面的[手册](http://linux.die.net/man/3/strcpy)确认：

> 该`strcpy()`函数将 指向的字符串`src`，包括终止的空字节 ( `'\0'`) 复制到 指向的缓冲区`dest`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-02-01T02:08:32.743

您关于复制终止字符的推理是正确的。C++ 标准（这是该语言的最终规范）在这方面遵循 C（例如，C++14 遵循 C99，C++17 遵循 C11）。

C11 标准有这样的说法`strcpy`：

> **7.24.2.3`strcpy`功能**
> 
> *概要：*
> 
> > `#include <string.h>`
> > `char *strcpy(char * restrict s1, const char * restrict s2);`
> 
> *描述：*
> 
> > 该`strcpy`函数将 所指向的字符串`s2`（包括终止空字符）复制到 所指向的数组中`s1`。如果复制发生在重叠的对象之间，则行为未定义。
> 
> *回报：*
> 
> > 该`strcpy`函数返回 的值`s1`。

如果您只想替换字符串的前三个字符，可以使用`memcpy()`复制特定数量的字节：

```
memcpy(s1, s2, strlen(s2)); 
```

请记住，这只会复制这些字节，仅此而已。如果`s1`还不是至少长度为 的字符串`s2`，那么它不太可能很好地结束 :-)

* * *

请记住一件事，即您的评论“...导致此字符串：`s``u``p``\0``o``p``o``\0`”。

那*不是*字符串。C 中的字符串（以及 C++ 中的旧字符串）被定义为一系列字符，直到并包括第*一个* `\0`终止符。

您可能有一系列字符直到原始字符（现在是第二个字符）`\0`，但*字符串*实际上比这更短。这可能*看起来*有点迂腐，但理解定义很重要。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-06T15:15:29.313

你是对的。对于您最初预期的效果，您将使用`strncopy`. `strncopy`只要您指定要复制的字符串的正确长度，就会复制空终止符。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-06T15:15:35.160

这是对的。

[http://pubs.opengroup.org/onlinepubs/009695399/functions/strcpy.html](http://pubs.opengroup.org/onlinepubs/009695399/functions/strcpy.html)

> strcpy() 函数应将 s2 指向的字符串 **（包括终止的空字节）**复制到 s1 指向的数组中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-06T15:17:41.387

是的，这是正确的。strcpy 将包含空终止符。重要的是，如果您将字符串复制到一个新的内存块，您希望它默认为空终止。我相信 strncpy 可能是你在这种情况下所追求的。

我也知道它只是测试代码，但在这个时代我会小心在字符串中使用 +X 偏移量...... ascii 通常会在我们现在生活的 utf8/unicode 世界的后端咬人。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-06T15:15:07.533

从手册页`strcpy`：

> 该`strcpy()`函数将 指向的字符串`src`，包括终止的空字节 ( `'\0'`) 复制到 指向的缓冲区`dest`。字符串不能重叠，并且目标字符串 `dest`必须足够大以接收副本。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-07-08T10:51:04.197

是的，您的推理是正确的，如果您将第 4 个字符 's1[3]' 显式类型转换为整数，如下所示：

cout<<(int)s1[3];

您会得到“0”作为输出，它是 NULL 字符的 ASCII 值。

# python - `sum`、`average`、`min`、`max` 的 sqlalchemy 简单示例

> ID：11830980
> 
> 赞同：42
> 
> 时间：2012-08-06T15:10:41.237
> 
> 标签：python, sql, sqlalchemy

对于*sqlalchemy*，谁能温柔地给出一个列的简单的`SQL`函数例子，比如`sum`, `average`, `min`, , （下面以一个例子为例）。`max``score`

至于这个映射器：

```
class Score(Base):
    #...
    name = Column(String)
    score= Column(Integer)
    #... 
```

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-08-06T16:37:30.907

有关用法，请参阅[SQL 表达式语言教程](http://docs.sqlalchemy.org/en/latest/core/tutorial.html)。下面的代码显示了用法：

```
from sqlalchemy.sql import func
qry = session.query(func.max(Score.score).label("max_score"), 
                    func.sum(Score.score).label("total_score"),
                    )
qry = qry.group_by(Score.name)
for _res in qry.all():
    print _res 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-30T13:50:46.800

从[SQLAlchemy 文档](https://docs.sqlalchemy.org/en/14/core/functions.html?highlight=sum#sqlalchemy.sql.functions.sum)中，对于`sum`方法，我们需要使用`functions.sum()`. 正如我们所见：

```
from sqlalchemy.sql import functions

result = session.query(
    functions.sum(Model.value_a + Model.value_b)
).scalar() 
```

这将产生一个像这样的sql：

```
SELECT sum(public.model.value_a + public.model.value_b) AS sum_1 ... 
```

# asp.net - ASP.NET VB - 从“DBNull”类型到“String”类型的转换无效

> ID：11830990
> 
> 赞同：4
> 
> 时间：2012-08-06T15:11:32.423
> 
> 标签：asp.net, vb.net

我有以下 ASP.NET (VB) 代码：

```
 strLocation = CStr(q1("LocationName")) + " " + CStr(q1("LocationAddress")) + " " + CStr(q1("LocationCity")) 
```

由于 LocationCity 为空：

我从“DBNull”类型到“String”类型的转换无效。

有没有办法来解决这个问题。

如果它只是 LocationCity 我可能会做类似的事情：

```
 If IsDBNull(q1("LocationCity")) Then
        strLocation = ""
    Else
        strLocation = CStr(q1("LocationCity"))
    End If 
```

我也试过：

```
 strLocation = If(CStr(q1("LocationName")), "") + " " + If(CStr(q1("LocationAddress")), "") + " " + If(CStr(q1("LocationCity")), "") 
```

但得到了相同的结果

在 C# 中，我通常会使用 ?? 但不确定 ASP.NET VB 中的最佳方法

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-06T15:24:08.280

`??`与 VB.NET 中的 C# 等效的是[IF 运算符](http://msdn.microsoft.com/en-us/library/bb513985%28v=vs.100%29.aspx)

```
strLocation = If(IsDBNull(q1("LocationCity")), "", CStr(q1("LocationCity"))) 
```

**不要使用[IIF 函数](http://msdn.microsoft.com/en-us/library/27ydhh0d%28v=vs.90%29.aspx)**，因为它已被弃用，不支持短路并且不是类型安全的。

另请参阅[C# 是否有 VB.NET 等价物？操作员？](https://stackoverflow.com/questions/403445/is-there-a-vb-net-equivalent-for-cs-operator)相关信息

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T15:20:53.070

你可以使用`If(IsDBNull(q1("propertyName")), "", CStr(q1("propertyName")))`

或者您可以将您显示的代码块实现为方法并为每个属性调用该方法。IMO，它会使您的代码行比使用 3 条 IIF 语句更简洁

```
Function StringValue(q1 as Q1Type) as String
    If IsDBNull(q1("LocationCity")) Then   
        Return ""   
    Else   
        Return  CStr(q1("LocationCity"))   
    End If
End Function

strLocation = StringValue(q1("LocationName")) + " " + StringValue(q1("LocationAddress")) + " " + StringValue(q1("LocationCity")) 
```

# ruby-on-rails - Rails：学校收费的模型设置

> ID：11830993
> 
> 赞同：0
> 
> 时间：2012-08-06T15:11:45.080
> 
> 标签：ruby-on-rails, ruby, associations

我知道这应该很简单，但我无法想出一个好的、简单的设置。

我正在为一所学校构建一个应用程序。学校收取预注册费、补给费、月入学费等费用。

计费的最重要方面是每月注册。假设它是每月 50 美元。我想设置定期计费（可能使用 Stripe），但有些人可能会选择支付现金、支票或一次性信用卡费用，而不是每月自动从他们的账户中提款。

此外，除每月入学外的费用，如供应费、书籍等。

我正在考虑创建一个发票设置，我已经从另一个应用程序（有点像 Freshbooks 或 Blinksale，[Item，LineItem，Tax，Invoice，Payment，等等]），但我认为这可能是矫枉过正。

那么你将如何设置呢？重点...

*   能够收取每月经常性费用和其他一次性费用
*   能够跟踪项目是否到期或是否已付款
*   跟踪是否已支付月度注册费，在付款和月度注册费之间建立关系

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T15:26:17.793

我只会有一个付款模式。它将具有频率（每月、每季度、每半年、每年）、付款状态（已付款或待处理）以及到期日期和费用类型（预注册、供应等）

如果一个人在开始时选择一次性付款，他将插入所有付款，到期日将是当前日期，并且所有状态都将被支付。

如果他选择每月支付一些费用，他将在支付表中有 12 条记录，频率为“每月”。到期日将相隔一个月。最后 11 条记录的状态为待处理。

您现在可以跟踪到期日在下一个月内的付款列表并采取适当的措施。