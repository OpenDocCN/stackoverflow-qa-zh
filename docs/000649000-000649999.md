# StackOverflow 问答 000649000-000649999

# objective-c - 为什么选择 Emacs/Vim/Textmate？Xcode 还不够好吗？

> ID：649000
> 
> 赞同：60
> 
> 时间：2009-03-16T01:53:32.373
> 
> 标签：objective-c, xcode, vim, emacs, textmate

嗨，我主要做 C++、Objective-C 编程。而且我发现 Xcode 加上一个自动补全/宏插件（补全字典）就足够了。

然而，所有人似乎都对他们的纯文本编辑器赞不绝口。我试了一下Textmate；喜欢它的简单性，但不喜欢它的文件/框架处理。

我在这里错过了什么吗？或者，Vim 或 Emacs 的自动完成功能是否与 Xcode 一样好？

* * *

## 回答 #1

> 赞同：188
> 
> 时间：2009-03-16T02:04:40.227

拉个椅子儿子，让我谈谈这个。

早在 Xcode 出现之前，就有了 VIM 和 Emacs。我知道这很难想象，但这是真的。

许多人习惯了 VIM/Emacs，因此继续使用它。

Emacs 是高度可定制的，并且提供了几乎所有你能想象到的东西（包括内置的收缩和河内的塔）。您可以轻松地从 Emacs 调用编译器，并根据需要创建自己的扩展。

VIM 有令人难以置信的正则表达式引擎（Emacs 也有）并且非常方便，因为 (VI) 几乎随所有 Unix 操作系统一起提供，并且如果你没有箭头键（是的，是的，真正的老派），它的工作非常出色。人们非常擅长使用键来移动文档，而无需使用鼠标。

Emacs 也是如此，但对我来说，我发现 VIM 上的光标移动要容易得多。

文本编辑器之战与 Mac 与 PC 之战一样充满了宗教狂热，答案是选择最适合您的。如果你喜欢 Xcode，很好，继续使用它，但是如果你曾经被迫在 PC 或 Linux 机器上工作，祝你好运。就个人而言，我使用 Emacs 编写代码，使用 VIM 处理文本，使用 Firefox 来查看 lolcats。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2009-03-16T08:15:07.997

当人们谈论文本编辑器时，我真的不明白为什么 emacs 支持。以我的经验，它更像 eclipse（或其他平台/IDE 之一）而不是 vi，因为它*是*一个*环境*，恰好擅长文本编辑。

作为 IDE，emacs 具有版本控制、实时编译、拼写检查、自动完成、调试、代码浏览等功能，适用于各种 SDK。对于您的其余计算需求，它是电子邮件/新闻/网络/irc/twitter/xmmp 客户端、日历、管理器、计算器、终端仿真器、远程编辑、电子表格、游戏等等等。

在 Dijkstra 之后：“Emacs 与文本编辑无关，就像天文学与望远镜有关”

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-03-16T02:03:02.303

您缺少的是 Emacs 和 Vim 实际上是 IDE。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-03-16T02:09:33.943

vi 在 UNIX 系统上无处不在，Emacs 也几乎如此。AFAIK，Xcode 在一个平台上。

拥有强大的 IDE 是一件很棒的事情，但每个人都应该具备一些技能，以使它们在可能被放入的任何平台上都能正常运行。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-03-16T02:09:46.097

这完全取决于您的喜好。

有些人喜欢使用轻量级文本编辑器，如 (g)vim、emacs、pico 等。其他人喜欢使用 IDE，如 MS Visual Studio、Eclipse、Xcode。

只要您的环境与文本编辑技术兼容，一切都取决于您。

顺便说一句，我喜欢使用 Eclipse 和 vim，因为它们是我用来学习编程的东西；）

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-08-05T20:32:34.273

您似乎认为 Emacs/Vim 之类的人的主要原因是代码完成。喜欢 Emacs/Vim 的人是因为它们都是为编辑文本而生的。您拥有其他编辑器所没有的控制权和选项。一旦您真正擅长使用这些程序之一，您希望这些键绑定/命令随处可用。宏、正则表达式、通过搜索/单词/段落/功能移动、与版本控制接口、复杂的撤消/重做和复制/粘贴功能和扩展选项只是这些编辑器真正做得很好的一小部分。

代码完成只是可以使编写程序更容易的许多事情之一。Emacs/Vim 可以处理所有这些（本地或通过扩展）。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-03-16T02:49:12.320

不，不是。这真的是一个偏好问题。我喜欢在 Visual Studio 6 中工作，但现在新版本太臃肿了。因此，如果我可以在 VS 之外做一些事情，我通常会在不打开整个 IDE 框的情况下这样做。

在 Windows 上，我喜欢 notepad2 和 gvim。我已经将 vim 定制到完全适合我的需求的程度，所以我不必考虑什么和在哪里。

但是，值得一提的是（您也可以通过阅读这些帖子自己弄清楚）很多用户使用 vim/emacs/... 因为听到了最好的/很酷的因素/实际可用性。因此，如果它不适合您，请不要使用它。没有人会因此而以错误的方式看待你。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2009-03-16T06:23:57.873

我个人喜欢emacs。我使用过 vim 和一些 IDE。Vim 和 emacs 都有很棒的社区，人们愿意为几乎任何语言编写功能。我不知道任何支持 Haskell 的 IDE。这一切都取决于对你来说什么是重要的。两者都有扩展语言，尽管 IMO，emacs lisp 是两者中的佼佼者。忽略鼠标的能力也是我喜欢的主要事情。如此多的 IDE 还具有 emacs 和 vim 兼容模式或扩展。他们都有大量的时间投资，但都是值得的。迟早你会选择适合你的，vim/emacs/IDE，然后坚持用它来提高你的技能。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2009-03-16T08:50:02.153

对我来说，最重要的两个特点是：

*   Emacs 键绑定，因为这是我的手指兼容的。

*   开源，因为它提供了自由。被束缚在一个平台上是一种诅咒。

这些天来，我主要使用 Eclipse 进行编程（设置为 Emacs 键绑定）和 FSF Emacs 用于阅读邮件和一些偶尔的 LaTeX。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2009-03-16T07:43:11.877

在使用 Emacs 时，除了丰富的编辑器功能外，还可以安装[Cedet](http://cedet.sf.net)或 Autocomplete 包以使用某些语言的名称完成功能（C++ 还不错，但仍然不支持 Obj-C）

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2011-04-18T14:48:01.293

emacs 很强大。我将 emacs 与 vimpluse.el 一起使用，以便我可以将 vim 键绑定与所有 emacs 功能一起使用。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-03-16T09:22:34.650

我主要将 Vim 用于输入模型。一旦你精通了输入模型，回到一个被迫使用鼠标的编辑器会感觉很笨拙，最终（至少对我来说）很烦人。输入“ci”以更改两个单引号之间的所有文本，然后将手从主行上移开，用鼠标查找并选择文本，最后点击“删除”，效率要高得多。

我只简单地使用过 Emacs，虽然我更喜欢 Vim，但我嫉妒它的一些功能。但我最终还是选择了 Vim，因为我找到了 Emacs 用来给我的手指带来不必要压力的和弦输入模型。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2009-03-16T11:47:46.703

我有 Xcode 和 TextMate，虽然我知道它们非常强大，但我不使用它们。相反，我使用 Vim（如果您愿意，也可以使用 MacVim）。为什么 ？

因为它轻巧、快速、令人上瘾、功能强大、可定制……我可以这样持续很长时间，但最重要的是我可以用 Vim 做我想做的一切。

无论您使用哪种编辑器，最好的编辑器都是您（几乎）完美掌握的。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2009-03-26T16:11:20.343

我不使用 vi 进行编码；但是，如果可用，我会在我的编辑器中使用 vi 仿真。当我在 IntelliJ 中进行 Java 编码时，我使用 IdeaVIM 插件，它在 IntelliJ 的编辑器中为我提供了 vi 支持。这意味着我几乎不必将手指从主排上移开。我用键盘导航（h、j、k、l），用 yy、dd 等剪切/粘贴。当然，当我确实需要全功能 GUI 编辑器的强大功能时，vi 仿真并不能阻止我使用这些特征。

XCode 在其编辑器中没有 vi 仿真让我发疯。似乎是任何体面的 IDE 都应该具备的功能。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2009-05-25T18:21:23.403

TextMate 对我来说只是感觉更轻松。在我的头顶上：

1.  它对文件和文件中的方法之间的跳转有很好的支持。想想 Quicksilver 的文件/方法。打开一个文件进行编辑，点击 command-shift-t 以调出一个浮动面板，列出文件中的所有方法。开始输入，列表会自行过滤。选择您想要的方法并按回车键跳转到它。Xcode 有类似的东西，但刺痛匹配更文字。

2.  许多内置的文本扩展。键入触发器并点击选项卡以将其展开。例如，在新行上键入 m 然后按 tab 会为您创建一个方法。然后 Tab 键会智能地跳转到插入文本的各个部分，以便您可以就地编辑它们。这是一个巨大的节省时间，这太荒谬了。

3.  对 Subversion 和 Git 的不错的插件支持。可能还有其他 VCS。

4.  完成（如 Xcode）和历史。TextMate 允许您基本上对文件中存在的任何文本进行制表符补全。因此，一旦您键入变量名称或方法调用一次，您就可以使用选项卡在同一文件中的任何位置自动完成它。

5.  具有历史记录的智能过去板，内置差异，主题支持，良好的键盘支持，在文件和跨项目（使用 RegEx）中查找，可能还有更多我忘记了。

无论如何，这对我来说已经足够了。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2011-01-02T20:16:03.540

就个人而言，我喜欢 TextMate，因为它实际上是一个非常轻量级的解决方案。诚然，我没有深入使用过 Vim 或 Emacs（我喜欢我的 GUI）......虽然我非常喜欢基于 Control 的光标导航（Control-A 是行首，Control-E 是行尾，Control- F 和 Control-B 是前进和后退等）。所以在 Xcode 和 TextMate 之间，我在大部分严肃的开发中都使用 Xcode，但如果我只需要快速编辑源文件，我可以在 Xcode 完成启动之前启动并编码（这有助于 TextMate 可以记住以前打开过哪些文件并恢复它们）。所以对于一些轻量级的文本编辑，TextMate 是我的选择。

除此之外，TextMate 的插件支持令人惊叹；它为 Xcode 不提供的许多不同的东西（shell 脚本、CSS、SQL、LaTeX 等等）提供了全面的支持（语法着色、构建和运行等）。当我需要用 Java 快速编写程序或调整网页时，使用 Vim 然后从终端构建要容易得多。

我对 TextMate 的唯一抱怨是控制台是只读的，因此我无法构建任何交互式内容。那，以及它似乎不支持纯 C 文件中的 C99 关键字（用于循环和布尔值）的事实。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2011-04-18T22:53:48.660

我是 vim 的老用户，发现我真的很喜欢打开 Vim 仿真的 Komodo 编辑。因此，我得到了 vim 键绑定的所有便利（我已经习惯了它，以至于我最近制作的一个最近的 MS Word 文档中有不少于三个“：w”）加上实现良好的代码完成C++、Python、JavaScript 等

我不使用 XCode，因为我不太开发 OS X 特定应用程序，因此 OS X 框架集成的好处不足以超过没有 vim 键绑定和“按照我们的方式做”的成本或根本不”Apple 对开发采取的方法。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2009-03-16T02:00:47.770

Xcode 更像是一个 IDE，而 emacs 和 vi 用于纯文本（尽管它们有大量的扩展）。如果您使用的是较旧的系统或通过 SSH，这会更可取。此外，它们几乎存在于每台基于 UNIX 的计算机上，而 XCode 是 Apple 的专有软件。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2012-03-14T06:43:04.803

你可以看看我关于[为什么 Emacs 的文章？](http://batsov.com/articles/2011/11/19/why-emacs/). 虽然它或多或少以 Emacs 为中心，但其中的一些观点也适用于 vim 和 TextMate。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2012-12-08T01:40:14.907

我很久以前尝试过vim，出于某种原因“我没有得到它”。然后在多年来尝试其他编辑之后，我达到了一个点，似乎没有一个编辑做我想让它做的事情。在向朋友表达了我的挫败感之后，他建议我尝试 vim....我很高兴我又看了一遍，因为这是一个我不知道如何问的问题的答案！从那以后我就一直使用 Vim/MacVim...

这是我的配置： [https ://github.com/RandyMcMillan/QuickVim](https://github.com/RandyMcMillan/QuickVim)

我也使用 Xcode，因为代码完成很好。XVim 非常适合希望在 Xcode 编辑器中获得模态/vim 感觉的人： [https ://github.com/JugglerShu/XVim](https://github.com/JugglerShu/XVim)

但是当涉及到我的日常编辑时，Vim 每次都获胜。这就是我拥有 QuickVim 存储库的原因，这样我就可以随时随地快速重现我的环境。

我有一个 TextMate 等编辑器的许可证列表。但我很可能永远不会使用它们，因为我可以免费使用 vim 并根据我的确切规格对其进行自定义。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2014-04-23T13:26:28.330

重度 Vim 用户在这里。我通常发现 Vi/Vim 的文本操作能力远远优于传统编辑器，后者缺乏以下内容：

*   视觉模式：例如在 5 行前面加上注释 //
*   宏：例如用引号将一行中的第 3 到第 5 个单词括起来，重复 100 行
*   多个寄存器：想 36 个寄存器复制和粘贴
*   delete{motion}：例如从光标删除到下一次出现的“initWithFrame”

这些只是 Vim 拥有 XCode 文本编辑的几个例子

对于 Objective-C。我倾向于在 IDE 上安装 Vim 插件以获得两全其美的效果 - 原生构建/UI 组件支持。

顺便。Mac 上的许多本机 (Coacoa) 文本字段都支持 Emac 键盘绑定（例如 CTRL-A 转到行首）。包括你用来在stackoverflow上输入答案的那个：D

[XVim](https://github.com/JugglerShu/XVim)与 XCode 一起工作。 [适用于AppCode](https://github.com/JetBrains/ideavim)的[IdeaVim](http://www.jetbrains.com/objc/)

# hibernate - grails中不区分大小写的搜索

> ID：649001
> 
> 赞同：9
> 
> 时间：2009-03-16T01:54:15.930
> 
> 标签：hibernate, grails, groovy, frameworks

我正在开发使用文件搜索的 grails 应用程序。为此，我编写了以下代码。这段代码有效，它给出了区分大小写的结果。但我想搜索不区分大小写的文件。

```
def criteria = FileDomain.createCriteria()
 def results = criteria {
    and {
      like('user', User.findById(session?.user))
      or {
        like('filename', '%' + params.fileSearchKey + '%')
        like('referenceFilename', '%' + params.fileSearchKey + '%')
         }
       }
    } 
```

任何人都可以提供帮助吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-03-16T02:32:02.797

我相信使用

```
ilike('filename', "%${params.fileSearchKey}%")
ilike('referenceFilename', "%${params.fileSearchKey}%") 
```

是您进行不[区分大小写](http://grails.github.io/grails-doc/2.0.x/guide/GORM.html#finders)搜索的方式

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-05-14T14:29:46.213

在 Grails 2.x 中执行此操作的一种方法是使用[eq 节点](http://grails.org/doc/2.1.0/ref/Domain%20Classes/createCriteria.html)：

```
eq("branch", "london", [ignoreCase: true]) 
```

# sql - 如何在 SQL Server 中给定列的末尾附加字符串？

> ID：649003
> 
> 赞同：7
> 
> 时间：2009-03-16T01:54:29.407
> 
> 标签：sql, sql-server

我有一个正在做的项目。基于来自生产服务器的备份 SQl Server 数据库。他们有超过 16,000 个用户电子邮件地址，我想破坏它们，以便系统（具有自动电子邮件发送器）不会向有效地址发送任何电子邮件。

但我仍然想要用户，并且我想要他们以一种我可以扭转我所做的事情的方式（这就是我不想删除它们的原因）。

我正在尝试的 SQL 是：

> 更新联系人 SET
> EmailAddress = EmailAddress + '.x'

但它不起作用，我做错了什么？

错误信息如下：

```
---------------------------
Microsoft SQL Server Management Studio Express
---------------------------
SQL Execution Error.

Executed SQL statement: UPDATE Contact SET EmailAddress = EmailAddress + '.x'
Error Source: .Net SqlClient Data Provider
Error Message: String or binary data would be truncated. The statement has been terminated.
---------------------------
OK   Help   
--------------------------- 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-16T02:06:14.870

问题在于，这`EmailAddress +".x"`会导致您的某些数据对于给定字段而言过长。你可以这样做：

```
select * from Contact where len(EmailAddress +".x") > LENFIELD 
```

将 LENFIELD 替换为表中定义的列的长度。如果您只想修改数据，为什么不将所有字段设置为单个电子邮件地址？或者修改导致错误发生的行更短。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-16T01:58:53.967

你能更具体地说明你得到的任何错误吗？我刚刚敲了一个例子，它工作正常。

编辑 - 您尝试更新的 EmailAddress 字段已经接近该字段的完整大小，为确保编辑适用于所有必需的记录，您需要更改该字段的列大小添加 2

BTW Sql 再次将其转换回来

```
update Contact 
set EmailAddress = SUBSTRING(EmailAddress , 0 , len(EmailAddress ) - 1)
where SUBSTRING(EmailAddress , len(EmailAddress ) - 1, 2) = '.x' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-16T02:45:33.387

这些完全合格的电子邮件地址是否带有`@domain.name`？在这种情况下，您可以使用 UPDATE...SELECT REPLACE 将 @ 更改为 *。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-16T02:06:15.027

在我看来，附加额外的文本会使一个或多个电子邮件地址长于字段大小。而不是附加为什么不用不同的字符替换最后一个字符？

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-03-16T02:06:08.007

谷歌搜索错误消息的第一个结果是：

“字符串或二进制数据将被截断” MS Sql 错误

当您尝试向字段插入超过字段长度的字符串时，会出现此问题。我能找到的唯一解决方案是设置更大的字段长度。

参考： http: [//www.dotnetjunkies.com/WebLog/skiff/archive/2005/01/31/49336.aspx](http://www.dotnetjunkies.com/WebLog/skiff/archive/2005/01/31/49336.aspx)

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2009-03-16T01:58:10.833

尝试：

更新联系人 SET EmailAddress = EmailAddress || '。X';

|| 是 SQL 中的字符串 (varchar) 连接运算符。

提示：如果提出更多问题，错误消息会有所帮助。

# java - 从 JAX-WS 生成的代码访问 Web 服务时，如何指定主机和端口？

> ID：649019
> 
> 赞同：2
> 
> 时间：2009-03-16T02:01:27.800
> 
> 标签：java, web-services, jax-ws

我有一个用于 Web 服务的 WSDL 文件。我正在使用 JAX-WS/wsimport 生成 Web 服务的客户端接口。我不提前知道 Web 服务将在哪个主机上运行，​​我几乎可以保证它不会是[http://localhost:8080](http://localhost:8080)。如何在运行时指定主机 URL，例如从命令行参数？

生成的构造函数`MyService(URL wsdlLocation, QName serviceName)`似乎不是我想要的，但也许是？也许是的变体之一`Service.getPort(...)`？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-16T07:12:02.670

构造函数应该可以满足您的需要，当您创建 MyService 时，将您想要的 WSDL 的 url 传递给它，即[http://someurl:someport/service?wsdl](http://someurl:someport/service?wsdl)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-08-19T09:50:49.443

如果您在生成的构造函数附近查看生成的源代码，您应该能够从默认构造函数中找出要放入其中的内容，应该类似于：

```
public OrdersService() {
    super(WSDL_LOCATION, new QName("http://namespace.org/order/v1", "OrdersService"));
} 
```

您应该能够在类中更靠前的静态字段中找到 WSDL_LOCATION 的定义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-28T22:19:01.300

在您生成的代码中（例如：说“HelloWorldWebServiceImplService”）查看顶部的静态块，该块将引用 META-INF 下的 WSDL url 或 wsdl 文件。

```
 /*
static {
    URL url = null;
    try {
        url = new URL("http://loclahost/HelloWorld/HelloWorldWebServiceImpl?wsdl");
    } catch (MalformedURLException e) {
        java.util.logging.Logger.getLogger(HelloWorldWebServiceImplService.class.getName())
            .log(java.util.logging.Level.INFO, 
                 "Can not initialize the default wsdl from {0}", "http://loclahost/HelloWorld/HelloWorldWebServiceImpl?wsdl");
    }
    WSDL_LOCATION = url;
}
*/ 
```

一旦您对此发表评论，您还需要注释掉默认构造函数，并且不用说初始化静态 WSDL_LOCATION = null; （为空）所以你不会有两个构造函数，如下所示。

```
public final static URL WSDL_LOCATION = null;
public HelloWorldWebServiceImplService(URL wsdlLocation) {
    super(wsdlLocation, SERVICE);
}

public HelloWorldWebServiceImplService(URL wsdlLocation, QName serviceName) {
    super(wsdlLocation, serviceName);
} 
```

**调用 Web 服务：**现在在实例化此对象的客户端调用中，将 Web 服务 URL 作为参数传递，如图所示

```
 //You can read mywebserviceURL from property file as String.
    String mywebserviceURL = "http://myqamachine.com/HelloWorld/HelloWorldWebServiceImpl?wsdl"
    URL WsURL = new URL(mywebserviceURL);
    HelloWorldWebServiceImplService webService = new HelloWorldWebServiceImplService(WsURL); 
```

所以在这里你可以动态地指向 webservice url。

# dynamic-languages - Design-by-Contract 能否像应用于静态类型语言一样容易/以及应用于动态语言？

> ID：649020
> 
> 赞同：1
> 
> 时间：2009-03-16T02:02:01.997
> 
> 标签：dynamic-languages, design-by-contract

标题几乎概括了要点。

我感兴趣的是，在使用动态语言时是否可以启用/禁用合同执行，而不会面临严重/未诊断失败的严重风险？

如果不是，那么关键似乎（对我来说）是任何强制执行都是组件逻辑的必需部分，而不是根据 DbC 强制执行的可移除性精神是可选/可移除的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-16T02:07:11.607

这不仅是可能的，而且还有现实世界的实现，而且它们已经存在多年了。例如，这里有一个用于 Python的[DbC 实现，它已有](http://portal.acm.org/citation.cfm?id=785590)*12 年历史*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-17T15:27:19.103

我相信 lisp 具有良好的契约框架设计。

[http://www.cl-user.net/asp/OkD82/sdataQkIGW7mlSHARDQ3r-H8X8yBX8yBXnMq=/sdataQu3F](http://www.cl-user.net/asp/OkD82/sdataQkIGW7mlSHARDQ3r-H8X8yBX8yBXnMq=/sdataQu3F) $sSHnB==

# php - 什么是 php 中纯全文搜索的快速替代方案？

> ID：649021
> 
> 赞同：2
> 
> 时间：2009-03-16T02:02:02.027
> 
> 标签：php, mysql, search

我希望在我的一个应用程序中改进搜索，我在其中使用常规全文搜索，这还不错，但我希望添加一些更复杂的行为，例如拼写识别和更好的相关性。

有没有可以集成到现有应用程序中的解决方案？我希望在单个 mysql 数据库中搜索多个表，没有什么复杂的。

它必须与非 apache 服务器一起工作（我使用 lighttpd）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-16T02:08:19.593

看看它是[Apache Lucene](http://lucene.apache.org/java/docs/)项目[`Zend_Search_Lucene`](http://framework.zend.com/manual/en/zend.search.lucene.html)的 PHP5 端口，[查询语言](http://framework.zend.com/manual/en/zend.search.lucene.query-language.html)非常强大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-16T03:24:38.583

我会说这取决于您当前的应用程序。Zend Lucene 可能是一个不错的选择，但如果有大量数据（并且可能会杀死您的服务器），创建索引需要很长时间。

[Java Lucene](http://lucene.apache.org)可能是最好的，但需要您运行 tomcat。

[Sphinx](http://www.sphinxsearch.com)也是一个不错的选择，但它是一个带有 PHP api（甚至是 PECL 扩展）的单独服务器，但有一些缺点是每次你有一些东西时它都会重新创建索引（至少在我最后一次检查它时）

我认为可能值得先尝试一些解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-16T08:55:50.517

*   [Lucene](http://lucene.apache.org/java/docs/)通过[`Zend_Search_Lucene`](http://framework.zend.com/manual/en/zend.search.lucene.html)
*   通过原生[PHP API进行](http://www.sphinxsearch.com/docs/current.html#api-reference)[Sphinx 搜索](http://www.sphinxsearch.com/about.html)

两者的概述：[*“Sphinx 和 Lucene 搜索引擎，第一印象”*](http://pagetracer.com/2008/02/15/sphinx-and-lucene-search-engines-first-impressions/)

# python - 我在哪里可以找到好的 python Twisted 框架文档、博客条目、文章等？

> ID：649029
> 
> 赞同：17
> 
> 时间：2009-03-16T02:06:04.327
> 
> 标签：python, twisted

我在玩[Twisted](http://twistedmatrix.com)，在他们的主页上找到的文档并不能回答我所有的问题。

目前我最感兴趣的话题是 Twisted Application Framework。此外，一些使用扭曲框架的开源服务器将提供很好的材料来研究它们是如何在一个更大的项目中捆绑在一起的。

到目前为止，我已经查看了 iCal 并阅读了扭曲网站 (3x) 上的文档以及我在 google 中找到的几篇好文章。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-10-15T22:04:56.073

我认为您需要从正确的概念开始。我发现这篇博文很有帮助。

[异步编程和 Twisted 简介](http://krondo.com/blog/?p=1209)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-03-16T03:03:03.317

在我看来，出版的书毫无用处。

我建议从在线“延迟”文档开始，并确保您了解异步的含义以及延迟的用途。我发现的最好的在线文档都在官方网站上，尽管它们肯定需要一些修饰：

[http://twistedmatrix.com/trac/wiki/Documentation](http://twistedmatrix.com/trac/wiki/Documentation)

开发人员也建议阅读源代码，但如果您有具体问题，我发现开发人员会在 IRC 频道（ freenode 网络上的**#twisted**）和在线邮件列表（有[一个通用](http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python)和一个[扭曲的网络特定](http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web)列表）

至于博客，至少有以下两个（两个博客都是由扭曲的开发人员编写的）。我敢打赌，如果你在 twisted-python 邮件列表上问同样的问题，你会得到比我可能给出的更好、更全面的答案。:-)

[http://oubiwann.blogspot.com/](http://oubiwann.blogspot.com/)

[http://glyph.twistedmatrix.com/](http://glyph.twistedmatrix.com/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-16T03:27:24.037

[Divmod](http://divmod.org/)有一些使用 Twisted 的中型项目，可能会很好地添加到您的阅读列表中。此外，[Launchpad 中的 Twisted 社区代码](http://launchpad.net/tx)将为您提供更长的基于 Twisted 的项目列表以供查看。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-16T06:57:45.123

我发现[Twisted Network Programming Essentials](http://oreilly.com/catalog/9780596100322/)这本书是第一次学习 Twisted 时的有用指南。虽然它更像是一本扭曲的“食谱”。它的一些“食谱”很有用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-03-16T12:42:06.917

这里有一个概述：[The Twisted Network Framework](http://www.python.org/workshops/2002-02/papers/09/index.htm)。

Bruce Eckel 写了一篇很好的文章，指出了 Twisted 使用的一些奇怪的名字：[Grokking Twisted](http://www.artima.com/weblogs/viewpost.jsp?thread=156396)。根据那篇文章，*The Python Cookbook* , 2nd Ed (O'Reilly) 中有一些很好的例子。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-09-22T19:03:08.710

在我看来，[这个非官方的教程是学习 Twisted 的绝对权威的方式。](http://krondo.com/?page_id=1327)

它包含有关如何使用从超级基本到高级功能的所有内容的分步示例。一切的动机都是首先以艰难的方式去做，这样你才能真正了解 Twisted 的每个部分解决了什么问题。

我已经使用基于 Twisted 的软件五年了，但直到学习了本教程之后，我才真正理解了它，并从头开始将它用于我自己的程序。

这不是自我推销。我不知道我链接到的教程的作者。

# android - 如何在 Android 上使用 MediaStore 将数据从相机保存到磁盘？

> ID：649057
> 
> 赞同：10
> 
> 时间：2009-03-16T02:22:39.467
> 
> 标签：android, camera, android-intent, mediastore

对于我的应用程序，我一直在使用我自己的 Camera 类来拍摄图像和我自己的数据库，但很快我就跟不上变化了，我决定使用 Android 中内置的相机应用程序来完成这项工作，但是我似乎无法让它保存文件。我在这里想念什么？该应用程序似乎保存了文件，但它只有 0 个字节。我查找了 Camera 应用程序的源代码，它正在 Extras 中寻找“输出”来保存文件。任何帮助将不胜感激。

```
Public class CameraTest extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Button cameraButton = (Button) findViewById(R.id.cameraButton);
        cameraButton.setOnClickListener( new OnClickListener(){
            public void onClick(View v ){
                ContentValues values = new ContentValues();
                values.put(Images.Media.TITLE, "title");
                values.put(Images.Media.BUCKET_ID, "test");
                values.put(Images.Media.DESCRIPTION, "test Image taken");
                Uri uri = getContentResolver().insert(Media.EXTERNAL_CONTENT_URI, values);
                Intent intent = new Intent("android.media.action.IMAGE_CAPTURE");
                intent.putExtra("output", uri.getPath());
                startActivityForResult(intent,0);
            }
        });

    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (requestCode== 0 && resultCode == Activity.RESULT_OK){
            ((ImageView)findViewById(R.id.pictureView)).setImageURI(data.getData());
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-03-16T03:31:05.603

这适用于以下代码，当然我对最后一个代码有点愚蠢。我仍然认为必须有一种更好的方法，以便原始图像仍然保存在某个地方。它仍然向我发送较小的 25% 大小的图像。

```
public class CameraTest extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Button cameraButton = (Button) findViewById(R.id.cameraButton);
    cameraButton.setOnClickListener( new OnClickListener(){
        public void onClick(View v ){

            Intent intent = new Intent("android.media.action.IMAGE_CAPTURE");

            startActivityForResult(intent,0);
        }
    });

}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode== 0 && resultCode == Activity.RESULT_OK) {
        Bitmap x = (Bitmap) data.getExtras().get("data");
        ((ImageView)findViewById(R.id.pictureView)).setImageBitmap(x);
        ContentValues values = new ContentValues();
        values.put(Images.Media.TITLE, "title");
        values.put(Images.Media.BUCKET_ID, "test");
        values.put(Images.Media.DESCRIPTION, "test Image taken");
        values.put(Images.Media.MIME_TYPE, "image/jpeg");
        Uri uri = getContentResolver().insert(Media.EXTERNAL_CONTENT_URI, values);
        OutputStream outstream;
        try {
            outstream = getContentResolver().openOutputStream(uri);
            x.compress(Bitmap.CompressFormat.JPEG, 70, outstream);
            outstream.close();
        } catch (FileNotFoundException e) {
            //
        } catch (IOException e) {
            //
        }
    }
} 
```

另外，我知道 Android 的纸杯蛋糕版本应该很快会修复小图像尺寸。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2011-09-01T21:20:45.070

下面的代码将启动默认相机并让相机将图像保存到指定的 uri。关键是将额外的“MediaStore.EXTRA_OUTPUT”与所需的 uri 一起放置。

```
File file = new File(Environment.getExternalStorageDirectory().getPath() + "/Images/" + image_name + ".jpg");
Uri imageUri = Uri.fromFile(file);

Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
intent.putExtra(MediaStore.EXTRA_OUTPUT, imageUri);

startActivityForResult(intent, 0); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-08-24T11:57:40.587

在您的第一次尝试中，可能是相机应用程序在读取您的“输出”额外时崩溃，因为它希望它是一个 Uri，而您提供一个字符串。拍摄照片后，相机应用程序似乎读取了额外的标志。您应该只提供 uri，而不是 uri.getPath()。然后，由于您已经知道照片的 URI，它不会在 onResult 调用中返回。您需要记住成员变量中的 URI。

在第二次尝试中，您将得到一个缩小 (50%) 的位图。它主要用于视图。我认为全尺寸位图对于应用程序的内存预算来说太大了。这可能是降级的原因。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2010-06-28T07:25:46.903

仅供参考，在 docs 上找到了这个：调用者可能会传递一个额外的 EXTRA_OUTPUT 来控制这个图像的写入位置。如果 EXTRA_OUTPUT 不存在，则在额外字段中将小尺寸图像作为位图对象返回。这对于只需要小图像的应用程序很有用。如果存在 EXTRA_OUTPUT，则将全尺寸图像写入 EXTRA_OUTPUT 的 Uri 值。

位于此处：http: [//developer.android.com/reference/android/provider/MediaStore.html](http://developer.android.com/reference/android/provider/MediaStore.html)

所以应用程序可以为你保存完整尺寸的图像，如果你告诉它在哪里。

**编辑：HTC 设备并非如此。使用 htc sense ui 的 HTC（不是 nexus）已从 android 1.5 分支出来，并带有一个始终以低分辨率保存图像的错误。您可以为相机午餐活动并使用相机的共享功能来使用全尺寸图像。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-03-25T17:53:44.937

我在模拟器上遇到了同样的问题，我在真实的手机上尝试过它，它可以工作，也许是因为虚拟手机不能真正拍照。

# sql - 如何将单个数据库调用中两个表中的数据合并到相同的列中？

> ID：649066
> 
> 赞同：0
> 
> 时间：2009-03-16T02:26:34.637
> 
> 标签：sql, merge

如果我批量运行这两个语句，它们会将一个表返回到两个表，并将数据合并到我的 sqlcommand 对象中。我要做的是通过搜索两次来优化搜索，第一次是在一组数据上，然后是第二次在另一组数据上。它们具有相同的字段，我希望两个表中的所有记录都显示并相互添加。我需要这个，以便我可以在两组数据之间对数据进行排序，但由于没有编写存储过程，我想不出这样做的方法。

例如。表 1 具有 A 列和 B 列，表 2 具有这些相同的列，但数据源不同。然后我想合并它们，以便如果 a 仅存在于一列中，则将其添加到结果集中，如果两者都存在，则表中的列 B 将在两者之间求和。

请注意，这与完全外部联接操作不同，因为它不会合并数据。

**[编辑]**

代码如下所示：

```
Select * From
 (Select ID,COUNT(*) AS Count From [Table1]) as T1
     full outer join
 (Select ID,COUNT(*) AS Count From [Table2]) as T2
     on t1.ID = T2.ID 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-16T02:30:01.740

也许您正在寻找 UNION？

IE：

```
SELECT A, B FROM Table1
UNION
SELECT A, B FROM Table2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-16T02:33:04.323

可能：

```
select table1.a, table1.b
from table1
where table1.a not in (select a from table2)
union all
select table1.a, table1.b+table2.b as b
from table1
inner join table2 on table1.a = table2.a 
```

编辑：也许你会在计数*之前*从合并表格中受益。例如

```
select id, count() as count from
(select id from table1
 union all
 select id from table2) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-16T02:29:18.247

我不确定我是否完全理解，但您似乎在询问 UNION

```
SELECT A,B
FROM tableX
UNION ALL
SELECT A,B
FROM tableY 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-16T02:39:58.237

要做到这一点，你会去：

```
SELECT * INTO TABLE3 FROM TABLE1
UNION
SELECT * FROM TABLE2 
```

如果两个表具有相同的列

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-16T02:46:50.077

我认为您正在寻找的是这个，但我不确定我是否正确理解您的语言。

```
select id, sum(count) as count
from (
    select id, count() as count
    from table1
    union all
    select id, count() as count
    from table2
) a
group by id 
```

# html - 常见拼写错误的 SEO

> ID：649069
> 
> 赞同：4
> 
> 时间：2009-03-16T02:27:26.677
> 
> 标签：html, seo, metadata

*这是我要问的一般问题：*
**您如何优化您的网站，以便使用您姓名的常见拼写错误的搜索找到您的方式？**

*还有我的具体情况：*
在我的公司，我们销售在线教育课程。这些是由两个字母后跟两个数字组成的代码，例如：BE01、BE02、IH01。

这些课程已经存在了一段时间*（9 年，相当于 63 年互联网年之类的）*，由于我们的目标市场相当小众，我们的大部分营销来自小社区的口碑。

我正在查看我们的统计数据以查看用于访问我们网站的搜索关键字，排名最高的不仅仅是我们的公司名称是“BE10”，这是我们*最*不受欢迎的课程之一。这让我觉得人们正在输入他们听到其他人口头提及课程的方式，即：“bee-ee-oh-one”- `BEO1`（不是`BE01`）。

查看[其他一些](https://stackoverflow.com/questions/53081/html-meta-keyword-description-element-useful-or-not) [问题](https://stackoverflow.com/questions/623554/html-meta-keywords-should-contain-commas)，他们说`keywords`元标记实际上是无用的，并且该信息应该进入页面的内容。我显然不想`BEO1`通过将其放入内容中来使我们的课程被调用的误解永久化，那我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-16T03:19:58.733

我建议在拼写错误（[http://example.com/beo1.html](http://example.com/beo1.html)或 what-have-you）上制作单独的信息页面，其中包含有关混淆的简要说明并参考正确的课程页面。通过将它们包含在您的站点地图中来获取这些索引（假设您已经有一个），如果您愿意，可以通过将它们链接到真实课程页面中不显眼的“常见拼写错误”部分来提高它们被索引的可能性和排名。

# bash - ^word^replacement^ 在 Bash 中的所有匹配项上？

> ID：649070
> 
> 赞同：49
> 
> 时间：2009-03-16T02:27:34.727
> 
> 标签：bash, shell, sh

为了澄清，我正在寻找一种方法来执行*全局*搜索和替换上一个使用的命令。`^word^replacement^`似乎只取代了第一场比赛。

有没有一些`set`选择让我望而却步？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2009-03-16T02:55:10.277

试试这个：

```
$ echo oneone
oneone
$ !!:gs/one/two/    # Repeats last command; substitutes 'one' --> 'two'.
twotwo 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-20T17:12:30.780

将我的答案与 John [Feminella](https://stackoverflow.com/questions/582726/alternate-way-to-trigger-reverse-i-search-without-pressing-ctrlr-in-bash/739464#739464 "bash 历史")的答案混合在一起，如果您想要别名，您可以这样做：

```
$alias dothis='`history -p "!?monkey?:gs/jpg/png/"`'
$ls *.jpg
monkey.jpg
$dothis
monkey.png 
```

这 ！！只执行上一个命令，而 !?string? 匹配包含“字符串”的最新命令。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-12-08T03:54:08.323

此解决方案使用 Bash 子字符串替换：

```
$ SENTENCE="1 word, 2 words";echo "${SENTENCE//word/replacement}"
1 replacement, 2 replacements 
```

请注意，使用双斜杠表示“全局”字符串替换。

该解决方案可以在一行中执行。

以下是如何全局替换名为“myfile.txt”的文件中的字符串：

```
$ sed -i -e "s/word/replacement/g" myfile.txt 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-16T02:54:31.433

解决这个问题的一个讨厌的方法可能是这样的：

想要回应`BAABAA`而不是`BLABLA`将 L 换成 A

```
$ echo "BLABLA"   
BLABLA
$ `echo "!!" | sed 's/L/A/g'`
$(echo "echo "BLABLA" " | sed 's/L/A/g')
BAABAA
$ 
```

不幸的是，这种技术似乎不适用于函数或别名。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-09-30T10:18:42.817

这个问题有很多骗子，一个优雅的答案只出现在 unix se 用户@Mikel 的[这个答案中](https://unix.stackexchange.com/a/116631/486961)

`fc -s pat=rep`

这个 bash 内置记录在第[9.2 章 Bash History Builtins下](https://www.gnu.org/software/bash/manual/html_node/Bash-History-Builtins.html)

> 在第二种形式中，在所选命令中的每个 pat 实例被 rep 替换后，重新执行命令。命令的解释与上面的第一个相同。
> 
> 与 fc 命令一起使用的有用别名是 r='fc -s'，因此键入 'r cc' 会运行以 cc 开头的最后一个命令，键入 'r' 会重新执行最后一个命令（请参阅别名）。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-09-26T01:25:15.190

我在 SUSE 10.1 上对其进行了测试。"^word^replacement^" 不起作用，而 "^word^replacement" 效果很好。例如：

```
linux-geek:/home/Myworks # ls /etc/ld.so.conf   
/etc/ld.so.conf  
linux-geek:/home/Myworks # ^ls^cat  
cat /etc/ld.so.conf  
/usr/X11R6/lib/Xaw3d  
/usr/X11R6/lib  
/usr/i486-linux-libc5/lib=libc5  
/usr/i386-suse-linux/lib  
/usr/local/lib  
/opt/kde3/lib  
/opt/gnome/lib  
include /etc/ld.so.conf.d/*.conf  
linux-geek:/home/Myworks # 
```

# opengl - 如何渲染到立方体贴图？

> ID：649074
> 
> 赞同：0
> 
> 时间：2009-03-16T02:28:55.707
> 
> 标签：opengl, glsl

我正在尝试渲染到立方体贴图，我在这里找到了说明： [http ://www.opengl.org/wiki/GL_EXT_framebuffer_object#Quick_example.2C_render_to_texture_.28Cubemap.29](http://www.opengl.org/wiki/GL_EXT_framebuffer_object#Quick_example.2C_render_to_texture_.28Cubemap.29)

```
 glGenTextures(1, &color_tex);
 glBindTexture(GL_TEXTURE_CUBE_MAP, color_tex);
 glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
 glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
 glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_WRAP_R, GL_CLAMP_TO_EDGE);
 glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
 glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
 //NULL means reserve texture memory, but texels are undefined
 glTexImage2D(GL_TEXTURE_CUBE_MAP_POSITIVE_X+0, 0, GL_RGBA8, 256, 256, 0, GL_BGRA, GL_UNSIGNED_BYTE, NULL);
 glTexImage2D(GL_TEXTURE_CUBE_MAP_POSITIVE_X+1, 0, GL_RGBA8, 256, 256, 0, GL_BGRA, GL_UNSIGNED_BYTE, NULL);
 glTexImage2D(GL_TEXTURE_CUBE_MAP_POSITIVE_X+2, 0, GL_RGBA8, 256, 256, 0, GL_BGRA, GL_UNSIGNED_BYTE, NULL);
 glTexImage2D(GL_TEXTURE_CUBE_MAP_POSITIVE_X+3, 0, GL_RGBA8, 256, 256, 0, GL_BGRA, GL_UNSIGNED_BYTE, NULL);
 glTexImage2D(GL_TEXTURE_CUBE_MAP_POSITIVE_X+4, 0, GL_RGBA8, 256, 256, 0, GL_BGRA, GL_UNSIGNED_BYTE, NULL);
 glTexImage2D(GL_TEXTURE_CUBE_MAP_POSITIVE_X+5, 0, GL_RGBA8, 256, 256, 0, GL_BGRA, GL_UNSIGNED_BYTE, NULL);
 //-------------------------
 glGenFramebuffersEXT(1, &fb);
 glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, fb);
 //Attach one of the faces of the Cubemap texture to this FBO
 glFramebufferTexture2DEXT(GL_FRAMEBUFFER_EXT, GL_COLOR_ATTACHMENT0_EXT, GL_TEXTURE_CUBE_MAP_POSITIVE_X, color_tex, 0);
 //-------------------------
 glGenRenderbuffersEXT(1, &depth_rb);
 glBindRenderbufferEXT(GL_RENDERBUFFER_EXT, depth_rb);
 glRenderbufferStorageEXT(GL_RENDERBUFFER_EXT, GL_DEPTH_COMPONENT24, 256, 256);
 //-------------------------
 //Attach depth buffer to FBO
 glFramebufferRenderbufferEXT(GL_FRAMEBUFFER_EXT, GL_DEPTH_ATTACHMENT_EXT, GL_RENDERBUFFER_EXT, depth_rb); 
```

我按照上面的方法将立方体贴图的面绑定到 fbo，但出现错误 GL_FRAMEBUFFER_UNSUPPORTED_EXT。我想知道这是因为我的显卡不支持此功能还是我的代码中有一些错误？

我是否可以渲染到 6 个单独的 2d fbo 纹理并使用这些纹理创建一个立方体贴图？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-18T15:02:39.740

[此页面](http://www.opengl.org/resources/features/OGLextensions/)定义了`isExtensionSupported()`您可以使用的功能。在运行时测试代码所依赖的所有扩展是否存在是（非常）好的做法。

仅仅因为它构建，即您的标头定义了所需的扩展，并不意味着二进制文件不会最终出现在具有不同支持扩展集的系统上。

选择一个众所周知的测试函数来测试扩展是个好主意，或者花时间了解如果测试编码不正确可能出现的细微问题。这主要与子字符串有关，而不是生成错误的前缀命中。

# asp.net - ASP.net Webservice 日期参数时区偏移问题

> ID：649086
> 
> 赞同：3
> 
> 时间：2009-03-16T02:34:11.230
> 
> 标签：asp.net, web-services, webforms

我有一个带有日期时间类型参数的 asp.net 网络服务。我注意到 asp.net 似乎根据客户时区抵消了日期。

我需要禁用此功能。我只是想在没有任何时区上下文的情况下从 javascript 将日期（即 2009 年 3 月 15 日）传递给 web 服务。

我唯一的选择是将参数类型更改为字符串然后将其转换为服务器端，还是有某种方法可以禁用反序列化器偏移我的日期参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-16T02:43:58.570

我会用一个字符串。

这有点道理——DateTime 确实是一个“时间点”，所以当两个客户谈论同一个 DateTime 时，他们谈论的是同一个 INSTANT。所以说“流星将在5分钟内撞击地球”，应该调整自己的时区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-16T02:49:05.610

您可以改用 UTC 日期：[http ://www.java2s.com/Code/JavaScript/Date-Time/GetUTCDate.htm](http://www.java2s.com/Code/JavaScript/Date-Time/GetUTCDate.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-24T22:51:54.310

我确实遇到了这个“问题”，当我仔细考虑时，我意识到它的工作方式确实是正确的，至少对于我的场景而言。就我而言，我收到了一个 activeFrom 和 activeTo 日期。这些只能是我实际将这些值提交给处理器的日期（没有时间部分）。我们的网络服务器在东部时间。我碰巧正在中央时间的一位客户那里进行测试。我的测试用例失败了，因为存储在数据库中的值与我发送的值不匹配（EG 04/01/2009 01:00 vs 04/01/2009 00:00）。

我想把时间部分去掉。这似乎没问题，直到我考虑从东部以东的时区发出的请求（这会发生因为我们在泰国有客户）。我很沮丧，因为结果日期会比请求中发送的日期早一天。然后我意识到，这正是我想要使用的日期。

希望你的方案能像我的一样顺利。

# asp.net - 如何格式化 C# 代码并将其转换为 HTML

> ID：649088
> 
> 赞同：5
> 
> 时间：2009-03-16T02:36:03.597
> 
> 标签：asp.net, editor, content-management-system

我正在使用具有 FCK 编辑器的 CMS。它没有像 Stack Overflow 那样输入代码示例的选项。

我认为最简单的方法是使用外部编辑器，转换为 HTML 并使用 CMS 中的 HTML 来编辑内容。

有什么建议么？

编辑：@IAN - 它似乎不适合我。我尝试`<pre>`在 HTML 视图和 WYSISWG 视图中使用标记。该链接说我需要包含 JS 和 css 文件：

```
<link href="prettify.css" type="text/css" rel="stylesheet" />
<script type="text/javascript" src="prettify.js"></script> 
```

FCK 编辑器是否已经包含这个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-16T03:14:30.307

两个最爱：

对于按需转换： http: [//www.manoli.net/csharpformat/](http://www.manoli.net/csharpformat/)

使用 Javascript 在网页上进行即时转换：[http ://code.google.com/p/syntaxhighlighter/](http://code.google.com/p/syntaxhighlighter/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-16T16:45:00.220

[对于格式化，我是Google Code Javascript code prettifier](http://google-code-prettify.googlecode.com/svn/trunk/README.html)的忠实粉丝。

本质上，您可以将代码粘贴到 FCK 编辑器中并将其包装如下：

```
<pre class="prettyprint lang-cs">
 Code here
</pre> 
```

`&lt; and &gt;`如果您将其粘贴到“所见即所得”部分（而不是源视图），FCK 编辑器应处理 html 转换“<”和“>” 。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-16T02:40:53.587

你能实现[WMD](http://code.google.com/p/wmd/)并为你的代码使用语法高亮吗？这就是[StackOverflow 使用](https://blog.stackoverflow.com/2008/05/potential-markup-and-editing-choices/)的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2011-05-28T09:20:36.620

请注意，Jean-Claude Manoli 代码（在另一篇文章中提到）现在已经扩展并内置到一个应用程序中，它将整个 C# 解决方案、项目和源代码文件转换为一个相互链接的 HTML 文档树。

该应用程序名为[CoDocke](http://www.OfItselfSo.com/CoDocker/CoDocker.php)，是免费和开源的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-16T03:03:20.427

试试[Manoli](http://www.manoli.net/csharpformat/)，他/它将格式化 c#、VB、html、xml、t-sql 并带有一些基本的语法突出显示 - 对我有用。源代码也是可用的，所以如果有兴趣可以扩展它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-05-28T09:28:41.183

我在我的网站上使用过[Geshi](http://qbnz.com/highlighter/)。

# c - 如何解释 C 中的浮点文字？

> ID：649090
> 
> 赞同：2
> 
> 时间：2009-03-16T02:38:38.367
> 
> 标签：c, syntax, floating-point

在 C 程序中，当您编写像 3.14159 这样的浮点字面量时，是否存在标准解释，还是依赖于编译器或体系结构？Java[非常清楚](http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Double.html#valueOf(java.lang.String))浮点字符串是如何解释的，但是当我阅读 K&R 或其他 C 文档时，这个问题似乎被掩盖了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-16T02:43:26.653

它依赖于架构。这通常意味着 IEEE 754，但不一定。C 标准 (ISO 9899:1999) 主要在第 5.2.4.2.2 节“浮动类型的特性”中讨论了这一点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-16T02:50:54.937

来自 C99 标准，第 6.4.4.2 节浮动常量，第 3 段（强调我的）：

> 有效数字部分被解释为（十进制或十六进制）有理数；指数部分的数字序列被解释为十进制整数。对于十进制浮点常量，指数表示 10 的幂，有效数部分将按其缩放。对于十六进制浮点常量，指数表示 2 的幂，有效数部分将按其缩放。对于十进制浮点常量，以及当`FLT_RADIX`不是 2 的幂时的十六进制浮点常量，**结果要么是最接近的可表示值，要么是紧邻最接近的可表示值的较大或较小的可表示值，以实现定义的方式选择**. 对于十六进制浮点常量，当`FLT_RADIX`是 2 的幂，结果被正确四舍五入。

因此，您将以实现定义的方式在一个[ULP中获得一个常量。](http://en.wikipedia.org/wiki/Unit_in_the_last_place)回想一下，*实现定义*意味着实现（在本例中为 C 运行时）可以选择任何选项，但**必须记录**该选择。因此，您可以查阅 libc 运行时文档以了解舍入是如何发生的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-16T02:53:45.693

您不清楚您的意思是浮点文字作为源代码的一部分（用于编译器解析为依赖于体系结构的二进制表示），还是由库函数扫描，例如`scanf()`, `atof()`, `strtol()`, `strtod()`and `strtold()`（在运行时转换到内存或`float`值）。`double``long double`

在第一种情况下，它是 ISO/IEC 9899:1999 (ISO C99) 第 6.4.4.2 节“浮动常量”的一部分。它定义了词典以及它应该如何被解释。

在第二种情况下，库函数的行为在第 7.20.1 节“数值转换函数”中定义。

我没有以前标准（ANSI C，1989）的硬拷贝，但我很确定它也非常精确地定义了浮点数的解析和转换方式。

如果您想知道在内存中是否有标准以二进制格式表示这些值，答案是否定的。C 语言旨在接近架构，而不是对其施加约束。所以内存中的表示总是依赖于架构的。但是 C 标准定义了如何对浮点值执行算术运算。它遵循 IEC 60559 标准。在 ISO C99 标准中，在附录 F（规范性）“IEC 60559 浮点运算”中进行了描述。实施可能会或可能不会实施本标准。如果是这样，它必须定义`__STDC_IEC_559__`预处理器名称。

# html - iframe 在 Firefox 和 IE 中不起作用

> ID：649097
> 
> 赞同：2
> 
> 时间：2009-03-16T02:43:31.723
> 
> 标签：html, grails, gsp

我正在使用大量 ajax 的 grails 中开发一个应用程序。在一部分中，我使用了以下代码：

```
<iframe id="hidden-upload-frame" style="border:none;height:25px;width:100%;" onload="${remoteFunction(action: 'list', controller: 'file', update: [success: 'fileDomain', failure: 'fileDomain'])}">
</iframe>

<div id="fileDomain">

</div> 
```

上面的代码在google chrome浏览器中完美运行并更新fileDomain div。但在IE和firefox中它会打开一个新窗口并显示内容。它没有更新fileDomain div。如何在IE和mozilla上进行这项工作。我需要吗在 gsp 页面中添加 doctype 标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-16T10:36:01.603

我更正了答案中的代码。请参阅[grails 中的远程文件上传](https://stackoverflow.com/questions/613958/remote-file-upload-in-grails/614041#614041)

# visual-studio - MSTest 复制文件到测试运行文件夹

> ID：649106
> 
> 赞同：111
> 
> 时间：2009-03-16T02:49:20.383
> 
> 标签：visual-studio, mstest

我有一个测试，需要读取一个 XML 文件然后对其进行解析。如何每次都将此文件复制到测试运行文件夹中？

XML 文件设置为“如果较新则复制”和“无”的编译模式（因为它不是真正可编译的东西）

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2009-03-16T06:33:28.427

使用[`DeploymentItem`属性](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.deploymentitemattribute(VS.80).aspx)

```
using System;
using System.IO;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using CarMaker;

namespace DeploymentTest
{
    [TestClass]
    public class UnitTest1
    {
        [TestMethod()]
        [DeploymentItem("testFile1.xml")]
        public void ConstructorTest()
        {
            string file = "testFile1.xml";
            Assert.IsTrue(File.Exists(file), "deployment failed: " + file +
                " did not get deployed");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2011-09-12T00:58:13.333

似乎如果您为解决方案提供 TestSettings 文件，那么您可以取消选中“启用部署”选项并阻止 mstest 尝试`...TestResults\...\out`从不复制额外文件的文件夹中运行（除非您将它们设为部署选项） .

如果您依赖于保留文件夹结构中的额外文件，这也很有用，因为如果您在 TestSettings (上面的答案表明，如果将每个项目添加为自己的 DeploymentItem，则可以保留该结构）。

对我来说，直接在 Visual Studio 中运行测试效果很好（即我的结构中的额外文件被测试找到并使用），因为我很久以前出于另一个原因创建了一个 TestSettings 文件（未选中启用部署），但不是在 TeamCity运行 mstest 来运行测试，因为我没有指定应该使用 TestSettings 文件。

要在 Visual Studio 中创建 TestSettings 文件，请右键单击**解决方案**并选择 New Item，然后选择 TestSettings 模板。要在 mstest.exe 的命令提示符下使用 TestSettings 文件，请添加选项，`/testsettings:C:\Src\mySolution\myProject\local.testsettings` （或在 TeamCity 中添加为具有适当路径的额外命令行选项）

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2011-08-02T14:11:00.240

Preet 答案用于为单个测试部署项目。如果您想在解决方案级别执行此操作，请使用[.testrunco​​nfig 设置](http://msdn.microsoft.com/en-us/library/ms182475%28v=vs.80%29.aspx)。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-01-07T10:37:29.683

对我来说最好的解决方案是使用测试设置，特别是如果多个测试需要相同的数据文件。

首先创建一个 testsettings 文件，并添加你需要的部署项（文件或文件夹名称）：

```
<TestSettings name="Local" id="00ebe0c6-7b64-49c0-80a5-09796270f111" xmlns="http://microsoft.com/schemas/VisualStudio/TeamTest/2010">
  <Description>These are default test settings for a local test run.</Description>
  <Deployment>
    <DeploymentItem filename="Folder1\TestScripts\test.xml" outputDirectory="TestScripts"/>
    <DeploymentItem filename="Folder2\TestData\" outputDirectory="TestData"/>
  </Deployment>
<...../> 
```

*   在 Visual Studio 中运行，使用“测试\测试设置”菜单中的“选择测试设置文件”来选择新的测试设置

*   运行 mstest，使用 /testsettings 参数让 mstest 使用您的 testsettings。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-27T09:38:57.407

~~您可以在包含具有 AssemblyInitialize 属性的方法的类中定义 DeploymentItem。然后，无论您运行哪个测试，您都可以确定文件已被复制。~~

不幸的是，DeploymentItem 属性仅在包含您正在运行的测试的类上执行。因此，如果您有 10 个使用同一组文件的测试类，则必须将属性添加到所有这些类。

还发现 *.testsettings 文件中的更改不会在 Visual Studio 中自动刷新。因此，在 testsettings 中将文件/文件夹添加到部署后，您必须重新打开解决方案文件，然后运行测试。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-08-08T00:11:27.183

在 Visual Studio 2012 中，vstest.console.exe（内置测试运行程序）以输出目录作为当前路径运行。这意味着您只需在解决方案中包含“始终复制”或“如果较新则复制”属性的项目，以便您的测试使用它们。对于一般情况，您不需要 DeploymentItem 属性。从输出/测试目录中的命令行运行 vstest.console.exe 时也是如此。

在某些情况下会使用单独的文件夹，其中一种情况是您使用 DeploymentItem 属性时。请参阅[此处](http://msdn.microsoft.com/en-us/library/vstudio/ms182475.aspx)了解更多信息。

# algorithm - Youtube内容识别技术？

> ID：649116
> 
> 赞同：30
> 
> 时间：2009-03-16T02:56:22.490
> 
> 标签：algorithm, video, youtube

我不确定 Youtube 是否是唯一拥有这项技术的网站，但 YT（Content ID）中的内容识别基本上是一种自动识别和删除侵犯版权的技术。你可以在这里读更多关于它的内容：

[http://www.youtube.com/t/contentid](http://www.youtube.com/t/contentid)

好吧，当我的一个视频（包含特定音乐曲目）因侵犯版权而被标记和删除时，我认为它 [内容 ID 系统] 可能很愚蠢。于是做了一些实验：都没有骗过滤镜~

*   在歌曲中间添加了一系列哔声
*   通过歌曲多次改变音高
*   改变了几次音量
*   调整了速度
*   添加了音频覆盖
*   添加了一些音频效果

另一方面，我不知道有任何材料被错误地匹配为受版权保护。例如，钢琴版本的歌曲不会错误地触发审查。

我不是在抱怨我的视频被删除。我只是对内容审查员的有效性感到惊讶。我想知道算法如何正确地将这首歌识别为侵犯版权，即使在我努力规避它之后也是如此。任何直接匹配的尝试都会立即被击败，任何涉及音符模式的算法都可能被哔哔声和音高变化所愚弄。

好吧，这更多是我的好奇心，而不是一个紧迫的问题..

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-03-16T03:35:51.160

[Pedro Moreno](http://pmoreno.googlepages.com/)和 Google/Youtube 的其他人正在研究它。他们使用[有限状态传感器](http://en.wikipedia.org/wiki/Finite_state_transducer)来识别*音乐音素单元*的序列，类似于自动语音识别中的音素。

看看这篇文章：

*   尤金·温斯坦、佩德罗·J·莫雷诺； [使用加权有限状态传感器进行音乐识别，](http://cs.nyu.edu/%7Eeugenew/publications/icassp07.pdf)声学、语音和信号处理国际会议论文集 (ICASSP)，2007。

如果你在整首歌曲中改变速度或音高，我很惊讶这些算法仍然可以识别歌曲。但也许他们将音高和速度（使用节拍之间的时间）标准化，以便能够识别覆盖的版本，而不仅仅是原始版本。但它可以忽略您添加的哔哔声也就不足为奇了，因为否则您的音频流中有足够的相似性。

（实际上，基于有限状态的算法非常适合应用于我的 iTunes 库，以正确标记文件。因为像[MusicBrainz](http://musicbrainz.org/)这样的服务或多或少依赖于音频和数据库条目的精确哈希匹配，而传感器方法似乎在识别文件时更具差异性。）

# automation - 使用 Arduino 进行照明控制

> ID：649135
> 
> 赞同：16
> 
> 时间：2009-03-16T03:10:12.877
> 
> 标签：automation, arduino, embedded

我想从 Arduino 开始制作一些东西，当按钮或开关被激活时，它会（最好）使我的房间灯变暗并为我的电脑打开一些嵌入式照明。

首先，这甚至可以用 Arduino 实现吗？

其次，我将如何用它打开和关闭真实的灯光？某种中继，也许？

有谁知道一个好的教程或至少涵盖其中一部分的东西？我不会对编程有任何问题，只是不知道从哪里开始使用硬件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-07-14T01:37:43.247

另一种选择（并且比使用三端双向可控硅开关更安全——相信我，我曾经被一个感到震惊，这就足够了！）是使用[X-10](http://en.wikipedia.org/wiki/X10_%28industry_standard%29)家庭自动化设备。

有一个 PC (RS232) 设备（CM12U UK 或 CM11 US），您可以控制其他设备。您还可以获得适合您的灯和墙壁插座之间的灯模块，这使您可以通过在电源上发送信号和开关模块来打开和关闭负载，从而使灯变暗。

Arduino 有一个 TTL 电平 RS232 连接器（基本上是 USB 连接使用的）– Diecimila 上的引脚 0 和 1，因此您可以使用它，通过您可以购买或制造的电平转换器连接它并连接到 X-10控制器，他们在 Arduino 网站上的说明，用于制作[RS232 端口](http://www.arduino.cc/en/Tutorial/ArduinoSoftwareRS232)。

或者，您可以使用 X-10 的 FireCracker 之类的东西，它使用 310MHz（美国）或 433MHz（英国），并让您的 Arduino 发送射频信号，TM12U 将这些射频信号转换为调光器等的适当 X-10 电源信号。

在美国，X-10 模块也非常便宜（遗憾的是在英国并非如此）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-17T19:43:35.533

大多数人使用三端双向可控硅开关。三端双向可控硅开关就像两个反并联（并联，但极性相反）的二极管，带有一个触发引脚。三端双向可控硅开关仅在触发时才会在任一方向传导电流。一旦被触发，它就像一个普通的二极管，它会继续导通，直到电流低于其阈值。

您可以将其视为交流线路上的双向开关，并且可以通过在相对于交流正弦波过零时刻的不同时刻触发它来改变平均电流。

大致上，它的工作原理是这样的：在交流正弦波为零时，您的二极管关闭，您的灯没有任何电源。如果您触发二极管，例如，在正弦波摆动的中途，您的灯将获得正常电流的一半，因此它以一半的功率点亮，直到正弦波再次过零。在这一点上，你重新开始。

如果您更早地触发三端双向可控硅开关，您的灯将在更长的时间间隔内获得电流，从而发出更亮的光。如果您后者触发三端双向可控硅开关，您的灯会发出更微弱的光。

这同样适用于任何交流负载。

这与直流的PWM原理几乎相同。您打开和关闭电流源的速度比您的负载反应快，它打开的时间与您的负载将接收的电流成正比。

你怎么用你的arduino做到这一点？

简单来说，您必须首先找到主电源的过零点，然后设置一个定时器/延迟，并在其末端触发三端双向可控硅开关。

为了检测过零，通常使用光耦合器。您将耦合器的 LED 侧与电源连接，将晶体管侧与 arduino 的中断引脚连接。您可以将您的 arduino IO 引脚直接连接到三端双向可控硅开关的触发器，但为了安全起见，我会使用另一个光耦合器。

当正弦波接近零时，您的中断引脚上会出现一个脉冲。在此中断处，您设置了一个计时器。计时器越长，负载获得的功率就越少。您还重置了三端双向可控硅开关的引脚状态。在这个定时器中断时，你设置你的 IO 引脚来触发三端双向可控硅开关。

当然硬件方面一定要懂一点，才不会炸板子，烧房子，不用说在处理市电交流电的时候一定要小心不要弄死自己=）。

[这是让](http://www.engbedded.com/semitone)我前段时间开始的项目。它使用 AVR，因此应该很容易适应 arduino。它也很完整，有示意图。他们的软件有点复杂，所以你应该从更简单的开始。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-16T03:54:48.107

[Make 杂志](http://makezine.com)网站上只有*大量*此类内容。我认为您甚至可以找到一些类似黑客的示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-14T09:03:50.017

我使用 MOSFET 使用 Arduino 对 12V LED 灯条进行调光。我为我的项目选择了带有散热器的[IRF3710](http://pdf1.alldatasheet.com/datasheet-pdf/view/68148/IRF/IRF3710.html)，可以肯定的是，它工作正常。我用12V卤素灯测试过，也可以。

我将 Arduino 的 PWM 输出引脚直接连接到 mosfet 的栅极引脚，并在代码中使用模拟写入来控制亮度。

![MOSFET](https://i.stack.imgur.com/cItde.jpg)

关于控制灯的第二个问题，您可以使用继电器打开/关闭 220V，如我的照片中部分所示，有很多板用于此，我选择了这个： ![在此处输入图像描述](https://i.stack.imgur.com/qDDA3.jpg)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-11-06T17:14:00.847

作为快速入门，您可以购买其中一个调光包（四盏灯 50-80 欧元）。然后为 arduino 构建电子设备以发送 DMX 控件： [Arduino DMX shield](http://blog.wingedvictorydesign.com/2009/04/29/arduino-dmx-512-io-shield/)

您将获得 arduino-expirience + 一个很好的机会，不会用更高的电压煎炸周围的环境。

# c# - 对称加密算法之间的区别

> ID：649141
> 
> 赞同：17
> 
> 时间：2009-03-16T03:17:08.243
> 
> 标签：c#, encryption, rijndaelmanaged

C# 看起来有 4 种不同的对称加密算法：RijndaelManaged、DESCryptoServiceProvider、RC2CryptoServiceProvider 和 TripleDESCryptoServiceProvider。

我正在寻找他们之间的更多信息。主要是他们每个人之间的区别是什么。MSDN 没有太大帮助，或者我只是累了。;) 我确信它们之间各有利弊，就像有多种做事方式的任何事情一样。

感谢您的任何启发。
托尼

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2009-03-16T04:35:22.390

这是排名（2015 年）最强的算法出现在顶部：

*   Rijndael（通常称为[AES](http://en.wikipedia.org/wiki/Advanced_Encryption_Standard)）
*   [三重 DES](http://en.wikipedia.org/wiki/Triple_DES)
*   [DES](http://en.wikipedia.org/wiki/Data_Encryption_Standard)
*   [RC2](http://en.wikipedia.org/wiki/RC2)

使用 AES。

详细信息：

*   DES 是七十年代的旧“数据加密标准”。它的密钥长度太短，无法保证适当的安全性（56 个有效位；这可以是暴力破解的，正如[十多年前](http://en.wikipedia.org/wiki/Data_Encryption_Standard)所证明的那样）。此外，DES 使用 64 位块，这在使用相同密钥加密数 GB 数据时会引发一些潜在问题（现在 1 GB 并没有那么大）。
*   3DES 是一种重用 DES 实现的技巧，通过级联 DES 的三个实例（具有不同的密钥）。3DES 被认为是安全的，至少达到“ *2 ^(112)* ”安全性（这是相当多的，并且在“用今天的技术无法破解”的领域中相当远）。但它很慢，尤其是在软件方面（DES 是为高效的硬件实现而设计的，但它在软件方面很糟糕；而 3DES 的速度是后者的三倍）。

*   AES 是 DES 的继任者，作为美国联邦组织的标准对称加密算法（也作为几乎所有其他人的标准）。AES 接受 128、192 或 256 位的密钥（128 位已经非常牢不可破），使用 128 位块（所以没有问题），并且在软件和硬件方面都很高效。它是通过几年来数百名密码学家参与的公开竞争选出的。基本上，你不能有比这更好的了。

因此，如有疑问，请使用 AES。

请注意，块密码是一个加密“块”（使用 AES 的 128 位数据块）的盒子。在对可能超过 128 位的“消息”进行加密时，必须将消息拆分为块，而您进行拆分的实际方式称为[操作模式](http://en.wikipedia.org/wiki/RC2)或“链接”。朴素模式（简单拆分）被称为 ECB 并且存在问题。正确使用分组密码并不容易，它比在 AES 或 3DES 之间进行选择更重要。

[http://en.wikipedia.org/wiki/EFF_DES_cracker](http://en.wikipedia.org/wiki/EFF_DES_cracker)

[http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation](http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2010-02-01T07:56:07.307

简短回答：***使用 Rijndael***。

各种选项是什么：

[RC2](http://en.wikipedia.org/wiki/RC2)是 80 年代后期建立的用于出口的弱破密码，因为当时美国公司被限制出口“强”加密。它的密钥长度为 40 位，这使得在今天的硬件上强制使用它变得微不足道（毕竟，20 年后）。

它的名称代表 Rivest Cipher No. 2，以它的创建者 Ron Rivest（世界著名的密码学家，RSA 中的“R”）命名。

[DES](http://en.wikipedia.org/wiki/Data_Encryption_Standard)是数据加密标准，被称为强密码术。但是，对于 56 位的密钥长度，它现在[处于蛮力解密的范围内](http://en.wikipedia.org/wiki/DESCHALL_Project)。

[3DES](http://en.wikipedia.org/wiki/3des)运行 DES 三次。实际上，仅运行 DES 两次并不会使其变得更强大，但第三次确实如此。它实际上是 116 位加密（使用 196 位密钥）。

按照今天的标准，3DES 是一种非常好的、强大的加密。

因此 RC2、DES 和 3DES 都在密码套件中，以提供与使用这些密码的业务系统的兼容性。

然而，Rijndael 是首选的现代密码。它是 DES 的官方替代品，称为[高级加密标准 (AES)](http://en.wikipedia.org/wiki/Advanced_Encryption_Standard)。

它有多种键大小，但使用***128-bit***[很重要](http://www.schneier.com/blog/archives/2009/07/another_new_aes.html)。出于兼容性原因，仅使用其他密钥长度（包括最长的 256 位）。

 ** * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-16T03:43:29.350

确实如前所述，DES 不是很强大。三重 DES 很强大（AFAIK 没有针对它进行任何适当的攻击），但速度有点慢。

Rijndael 与 AES（高级加密标准 - 由 NSA 批准，非常强大）相同，但在密钥大小方面有更多选择。

不幸的是，我对 RC2 也知之甚少。除非它比 Rijndael 快得多，否则我没有太多理由不选择 Rijndael（即使那样我也想看看它有多安全。）

以下是猜测... RC2 是几代 RC6 的祖先，RC6 是选择命名为 AES 的密码的决赛选手之一。Rijndael 比 RC6 更胜一筹，因此人们会认为 Rijndael 比 RC2 好几度。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-16T03:21:21.570

我会坚持使用[RijndaelManaged](http://en.wikipedia.org/wiki/Advanced_Encryption_Standard)或 TripleDES，因为它们比 DES 更强大。

DES 的主要弱点是其[较短](http://en.wikipedia.org/wiki/Data_Encryption_Standard)的密钥长度，这可能允许可能的暴力攻击。使用 DES 进行三次加密是加强最终结果的一种可能方法，因此是 TripleDES。我对 RC2 了解不多，所以我无法评论该方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-16T03:46:25.300

除非您有充分的理由不这样做，否则请使用 RijndaelManaged。Rijndael 变成了 AES，是 DES 的一般替代品，因此它绝对比 DES 和 TripleDES 更受欢迎，除非您需要与一些旧的基于 DES 的系统兼容。RC2 没有什么特别的问题，但它比 AES 更老，并且没有真正的理由使用它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-16T03:54:31.913

Rijndael是最好的。

DES 不是很好，很容易用足够的马力破解。三重 DES 比 DES 好一点（它只是 DES 重复了 3 次）。

如果您有兴趣，请查看 bouncy castle 加密库以获得更多 c# 加密优点：http: [//www.bouncycastle.org/](http://www.bouncycastle.org/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-16T04:31:44.193

这些算法代表速度与强度权衡曲线上的各个点。

（最弱/最快）RC2 < DES < 3DES < AES/Rijndael（最强/最慢）

不过，我不熟悉 API，“Managed”和“CryptoServiceProvider”类之间是否还有其他区别？

# debugging - 如何在 Unix/OSX 上隔离系统挂起的原因

> ID：649143
> 
> 赞同：6
> 
> 时间：2009-03-16T03:18:31.093
> 
> 标签：debugging, macos, unix

我在 OSX 上，我的系统大约每 10 分钟就会变得无响应几秒钟。（它给了我旋转的死亡沙滩球）。我想知道是否有任何方法可以隔离问题（我有足够的 RAM，并且没有页面输出/抖动）。有任何 Unix/OSX 工具可以帮助我监控和隔离这种行为的原因吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-16T04:46:55.763

Activity Monitor ( `cmd+space`, type, `activity monitor`) 应该让您直观地了解系统上正在发生的事情。如果如您所说，没有进程阻塞 CPU，请查看磁盘/IO 活动。也许您的磁盘正在向南移动。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2011-03-25T02:32:30.303

多年来，我一直遇到系统挂起的问题。似乎通常它们是文件系统错误的结果，但是 Apple 并没有采取足够的措施来解决这个问题。系统可靠性应该是 100% 的重点，我当然厌倦了这些问题。我已经开始将大量文件和所有备份转移到 FreeBSD 服务器上的 ZFS 卷上，这有点帮助，因为它开始让我放松心情并让我更快地从问题中恢复。此外，我将系统卷放置在一个大型 SSD 上（240GB，因为我有很多支持文件，并试图避免被符号链接过度分割）和我的用户文件夹在另一个驱动器上。这也有助于增加可靠性。

话虽如此，您应该尝试探索`spindump`并`stackshot`查看是否可以在系统完全冻结之前捕获冻结的进程。很可能您有一两个应用程序正在尝试访问坏块，它只是挂起系统，或者您有一个进程由于某种原因阻止了所有其他应用程序，系统调用正在停止 io。

在过去的几年里，Apple 和我一起使用了几次 stackshot 来追捕一些讨厌的虫子，下面的链接可以阐明如何更好地追捕这个妖精：http: [//www.stormacq.com/? p =346](http://www.stormacq.com/?p=346)

也尝试：`top -l2 -S > top_output.txt`并检查挂起/僵尸进程的结果。

您越深入，您可能会发现订阅内核开发人员列表 (darwin-kernel@lists.apple.com) 很有用，因为这里有一些非常非常尖锐的 cookie，可以揭示一些最晦涩难懂的问题，并有助于准确理解恐慌在说什么。

此外，您可能希望卸载已安装的所有 VM。我从非常可靠的消息来源获悉，有一个特定的开发人员存在非常错误的虚拟机管理程序问题，如果您安装了任何问题，最好调查一下。可能是时候彻底清理你的 kexts 了。

但是，总而言之，我们真的非常需要一个更好的文件系统和其中的主动机制来监视坏块。当我想到我们正式获得 ZFS 时，我赞美了这一天并高兴地大喊。遗憾的是，我怀疑 Lion 在 HFS+ 方面的表现要好得多，而且我当然正在考虑将 ZFS 用于我的用户卷 + 工作站上的其他存储，因为它能够清理坏块并消除此类问题。

它们是我们在 Apple 硬件上存在的基础，并且在该领域工作了 20 年和成千上万的客户，此时硬盘故障应该被认为是不可原谅的。即使实际的制造商不能也不会修复它，操作系统开发人员有责任更好地处理异常并防止此类故障，以防止无声的数据丢失和诸如此类的噩梦。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-16T03:29:04.190

我会混合运行 'top' 和 tail -f /var/log/messages （或者你的主日志文件在哪里）。

很有可能在挂起之前/之后，会出现一些错误消息。从那里你可以开始清除你的问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-16T04:07:45.203

Activity Monitor 是 top 的 GUI 版本，使用 Leopard，您可以使用“Sample Process”功能来查看您的罪魁祸首任务大部分时间都在做什么。同样在实用程序中，您会找到 Console aka tail -f /var/log/messages。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-16T03:23:10.927

作为第一道攻击线，我建议让[top](http://en.wikipedia.org/wiki/Top_(Unix))在您可以看到的终端窗口中运行，并在那里观察失控的工作。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-16T03:42:07.557

如果其他答案没有让您到任何地方，我会运行**手表正常运行时间**，并在锁定时记录时间和正常运行时间。*大约*每 10 分钟锁定*一次*与每 10 分钟锁定一次有很大不同；后者建议在**crontab -l**中查找以 */10 开头的作业。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-18T18:25:39.253

当交换发生时，通常会出现周期性的无响应。您的系统中是否有足够的内存？检查磁盘 io 以查看是否有峰值。

编辑：

我最近在我的 Mac 上看到了类似的行为，这是由文件系统损坏引起的，因此 OS X 尝试访问磁盘上不存在的块，甚至尝试使用 Disk Manger 修复它，告诉我重新格式化并重新安装。这样做并使用 Time Machine 重新建立有帮助！

如果这样做，请仔细检查硬盘上的 HFS 上是否启用了 Journalling。这有助于避免它再次发生。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-03-21T02:21:51.517

使用 Apple 的仪器。老实说，它极大地帮助了寻找这样的挂起。

# c# - 如何在 C# 中转义字符串以用于 LDAP 查询

> ID：649149
> 
> 赞同：18
> 
> 时间：2009-03-16T03:21:43.537
> 
> 标签：c#, .net, active-directory, ldap, ldap-query

我有一个 LDAP 查询，我用它在 C# 中执行搜索。它使用两个字符串变量（用户名和域），出于安全原因需要对其进行转义。

我应该如何逃避字符串？C#.NET 中是否有可用的函数来执行此操作？

* * *

LDAP 搜索条件示例：

```
(objectCategory=person)
(userprincipalname=username@domain*)
(samaccountname=username) 
```

C# 中的示例 LDAP 查询字符串：

```
string search = "(&(&(objectCategory=person)(userprincipalname=" 
        + username 
        + "@"
        + domain 
        + "*)(samaccountname=" 
        + username 
        + ")))"; 
```

编辑：我已经有 LDAP 查询工作，并返回结果。我想要的只是转义参数。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2009-03-29T16:37:37.010

以下是我将 Sophia 提到的 Java 代码翻译成 C#。

```
/// <summary>
/// Escapes the LDAP search filter to prevent LDAP injection attacks.
/// </summary>
/// <param name="searchFilter">The search filter.</param>
/// <see cref="https://blogs.oracle.com/shankar/entry/what_is_ldap_injection" />
/// <see cref="http://msdn.microsoft.com/en-us/library/aa746475.aspx" />
/// <returns>The escaped search filter.</returns>
private static string EscapeLdapSearchFilter(string searchFilter)
{
    StringBuilder escape = new StringBuilder(); // If using JDK >= 1.5 consider using StringBuilder
    for (int i = 0; i < searchFilter.Length; ++i)
    {
        char current = searchFilter[i];
        switch (current)
        {
            case '\\':
                escape.Append(@"\5c");
                break;
            case '*':
                escape.Append(@"\2a");
                break;
            case '(':
                escape.Append(@"\28");
                break;
            case ')':
                escape.Append(@"\29");
                break;
            case '\u0000':
                escape.Append(@"\00");
                break;
            case '/':
                escape.Append(@"\2f");
                break;
            default:
                escape.Append(current);
                break;
        }
    }

    return escape.ToString();
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-16T05:50:28.157

我在这里找到了一个解决方案，在[一篇关于 LDAP Injection 的博客文章中](http://web.archive.org/web/20160922224553/http://blogs.oracle.com/shankar/entry/what_is_ldap_injection)

这个解决方案涉及添加你自己的函数来转义用户名和域名，他的解决方案是在 Java 中，但想法是存在的。

[MSDN](http://msdn.microsoft.com/en-us/library/aa746475.aspx)还列出了哪些特殊字符需要被转义序列替换。

据我所知，似乎没有任何方法可以在 System.DirectoryServices 中转义 LDAP 字符串（例如 HttpServerUtility 中的 URL 等）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-11-22T11:59:50.300

从地址使用 AntiXss 库：[https ://www.nuget.org/packages/AntiXss](https://www.nuget.org/packages/AntiXss)

```
string encoded = Microsoft.Security.Application.Encoder.LdapFilterEncode(input); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-16T03:27:03.727

也许让别人担心？请参阅[LINQtoAD](http://www.codeplex.com/LINQtoAD)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-03-16T03:28:33.970

您是否试图通过用户输入来防止对您的目录服务器的某种注入攻击？如果是这种情况，我会在将输入传递给 LDAP 之前使用 Regex 验证输入。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-18T22:11:19.153

将 PInvoke 与[`DsQuoteRdnValueW`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms676022(v=vs.85).aspx). 有关代码，请参阅我对另一个问题的回答：[https ://stackoverflow.com/a/11091804/628981](https://stackoverflow.com/a/11091804/628981)

# vim - 从 vi/Vim 调用键序列上的共享对象

> ID：649150
> 
> 赞同：3
> 
> 时间：2009-03-16T03:22:31.567
> 
> 标签：vim

我有一个共享库（二进制形式；我有源代码），用于在 Visual Studio 的源文件中的符号之间反转/循环。

我希望能够在 vi 和/或 Vim 中使用相同的功能。

具体来说，我想做的是以下场景：

*   光标在一个单词上
*   我按下一个按键序列，例如 CTRL-I
*   vi/Vim 解决了我在说的整个词
*   vi/Vim 调用我的共享库，传递单词，并接收反转/循环替换
*   vi/Wim 用新词替换原词

我不知道是否/如何让 vi/Vim 做到这一点，而且我没有任何运气搜索。

感激地收到任何建议...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-16T08:46:50.807

尝试

```
inoremap <C-i> <esc>"hciw<C-R>=libcall('path/to/your.dll', 'func', @h)<CR> 
```

它能做什么：

*   为插入模式创建地图 <Ctrl+i>
*   <esc> 切换到普通模式 "hciw 将光标下的单词移入寄存器 h
*   <Cr>= 插入下一个表达式的光标位置结果
*   libcall(...) 调用运行时库中的函数。
*   @h 是“h”寄存器的值。

如果您想使用可以从命令行运行的简单二进制文件，您可以使用

```
inoremap <C-i> <esc>"hciw<C-R>=substitute(system('mybin --word='.@h), "\n", '', 'g')<CR> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-16T08:51:08.987

我不知道如何从普通的 vim 脚本调用共享库，但是如果你可以为你的库创建一个 python 包装器并且你使用的 vim 版本大于 7，你可能会在 vim 中调用一个 python 脚本。
首先，检查您是否启用了 python 支持：输入

```
:version 
```

在 vim 中列出可用的功能；如果它支持python，你应该在某处看到一个'+python'（否则是'-python'）。如果你没有启用 python，你可以参考[这篇文章](https://stackoverflow.com/questions/138680/vim-extension-via-python/138709#138709)来编译带有 python 支持的 vim。

然后，您可以映射一个键以使用当前光标下的单词调用 python 函数：

```
python << EOF
import vim
import MySharedLibraryPythonBinding

def MyFunction():
    # get word under cursor
    x = vim.eval('expand ("<cword>")')
    # get replacement
    MySharedLibraryPythonBinding.GetReplacement(x)
    # replace contents (you'll need some work here...)
    vim.current.line = "add something sensible here..."
EOF

nmap <F3> :py MyFunction( expand("<cword>") )<CR> 
```

这当然不是一个完全有效的解决方案，但我希望它能让你走上好路。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-16T08:51:28.080

有很多方法可以做到这一点（:h expand(), ...）。其中之一如下）

```
:nnoremap triggerkeysequence ciw<c-r>=libcall('path/to/your.dll', 'your_function',@")<cr> 
```

顺便说一句：`<c-i>`是`<tab>`，您确定要覆盖此键上的操作吗？

# android - 将位图保存到位置

> ID：649154
> 
> 赞同：507
> 
> 时间：2009-03-16T03:26:06.160
> 
> 标签：android, bitmap, save

我正在开发一个功能，从网络服务器下载图像，将其显示在屏幕上，如果用户希望保留图像，请将其保存在特定文件夹中的 SD 卡上。有没有一种简单的方法来获取位图并将其保存到我选择的文件夹中的 SD 卡中？

我的问题是我可以下载图像，将其作为位图显示在屏幕上。我能够找到将图像保存到特定文件夹的唯一方法是使用 FileOutputStream，但这需要一个字节数组。我不确定如何将位图转换为字节数组（如果这是正确的方法），因此我可以使用 FileOutputStream 来写入数据。

我的另一个选择是使用 MediaStore ：

```
MediaStore.Images.Media.insertImage(getContentResolver(), bm,
    barcodeNumber + ".jpg Card Image", barcodeNumber + ".jpg Card Image"); 
```

可以很好地保存到 SD 卡，但不允许您自定义文件夹。

* * *

## 回答 #1

> 赞同：970
> 
> 时间：2009-03-23T11:22:56.550

```
try (FileOutputStream out = new FileOutputStream(filename)) {
    bmp.compress(Bitmap.CompressFormat.PNG, 100, out); // bmp is your Bitmap instance
    // PNG is a lossless format, the compression factor (100) is ignored
} catch (IOException e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：144
> 
> 时间：2010-06-10T10:42:30.660

您应该使用该`Bitmap.compress()`方法将位图保存为文件。它将压缩（如果使用的格式允许）您的图片并将其推送到 OutputStream 中。

下面是一个通过它获得的 Bitmap 实例的示例`getImageBitmap(myurl)`，可以将其压缩为 JPEG，压缩率为 85%：

```
// Assume block needs to be inside a Try/Catch block.
String path = Environment.getExternalStorageDirectory().toString();
OutputStream fOut = null;
Integer counter = 0;
File file = new File(path, "FitnessGirl"+counter+".jpg"); // the File to save , append increasing numeric counter to prevent files from getting overwritten.
fOut = new FileOutputStream(file);

Bitmap pictureBitmap = getImageBitmap(myurl); // obtaining the Bitmap
pictureBitmap.compress(Bitmap.CompressFormat.JPEG, 85, fOut); // saving the Bitmap to a file compressed as a JPEG with 85% compression rate
fOut.flush(); // Not really required
fOut.close(); // do not forget to close the stream

MediaStore.Images.Media.insertImage(getContentResolver(),file.getAbsolutePath(),file.getName(),file.getName()); 
```

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2011-10-14T22:57:43.923

```
outStream = new FileOutputStream(file); 
```

将在 AndroidManifest.xml 中未经许可抛出异常（至少在 os2.2 中）：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2012-01-25T16:19:22.717

内部`onActivityResult`：

```
String filename = "pippo.png";
File sd = Environment.getExternalStorageDirectory();
File dest = new File(sd, filename);

Bitmap bitmap = (Bitmap)data.getExtras().get("data");
try {
     FileOutputStream out = new FileOutputStream(dest);
     bitmap.compress(Bitmap.CompressFormat.PNG, 90, out);
     out.flush();
     out.close();
} catch (Exception e) {
     e.printStackTrace();
} 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2009-12-09T13:53:48.770

某些格式，例如无损的 PNG，会忽略质量设置。

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2016-04-02T09:41:55.620

以下是将位图保存到文件的示例代码：

```
public static File savebitmap(Bitmap bmp) throws IOException {
    ByteArrayOutputStream bytes = new ByteArrayOutputStream();
    bmp.compress(Bitmap.CompressFormat.JPEG, 60, bytes);
    File f = new File(Environment.getExternalStorageDirectory()
            + File.separator + "testimage.jpg");
    f.createNewFile();
    FileOutputStream fo = new FileOutputStream(f);
    fo.write(bytes.toByteArray());
    fo.close();
    return f;
} 
```

现在调用此函数将位图保存到内部存储器。

`File newfile = savebitmap(bitmap)`;

我希望它会帮助你。快乐的编码生活。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2009-03-16T04:10:15.603

为什么不用`Bitmap.compress`100 调用该方法（这听起来像是无损的）？

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2011-06-22T09:25:25.767

```
Bitmap bbicon;

bbicon=BitmapFactory.decodeResource(getResources(),R.drawable.bannerd10);
//ByteArrayOutputStream baosicon = new ByteArrayOutputStream();
//bbicon.compress(Bitmap.CompressFormat.PNG,0, baosicon);
//bicon=baosicon.toByteArray();

String extStorageDirectory = Environment.getExternalStorageDirectory().toString();
OutputStream outStream = null;
File file = new File(extStorageDirectory, "er.PNG");
try {
    outStream = new FileOutputStream(file);
    bbicon.compress(Bitmap.CompressFormat.PNG, 100, outStream);
    outStream.flush();
    outStream.close();
} catch(Exception e) {

} 
```

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2020-10-28T19:14:02.933

我知道这个问题很老，但现在我们可以在`WRITE_EXTERNAL_STORAGE`未经许可的情况下达到相同的结果。我们可以使用文件提供程序来代替。

```
private fun storeBitmap(bitmap: Bitmap, file: File){
        requireContext().getUriForFile(file)?.run {
            requireContext().contentResolver.openOutputStream(this)?.run {
                bitmap.compress(Bitmap.CompressFormat.JPEG, 100, this)
                close()
            }
        }
    } 
```

**如何从提供者那里检索文件？**

```
fun Context.getUriForFile(file: File): Uri? {
        return FileProvider.getUriForFile(
            this,
            "$packageName.fileprovider",
            file
        )
    } 
```

也不要忘记`provider`在 Android 中注册您的`manifest`

```
<provider
        android:name="androidx.core.content.FileProvider"
        android:authorities="${applicationId}.fileprovider"
        android:exported="false"
        android:grantUriPermissions="true">
        <meta-data
            android:name="android.support.FILE_PROVIDER_PATHS"
            android:resource="@xml/file_paths"/>
    </provider> 
```

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2010-11-18T09:26:48.643

我也想存个图。但我的问题（？）是我想从我绘制的位图中保存它。

我是这样设计的：

```
 @Override
 public boolean onOptionsItemSelected(MenuItem item) {
            switch (item.getItemId()) {
            case R.id.save_sign:      

                myView.save();
                break;

            }
            return false;    

    }

public void save() {
            String filename;
            Date date = new Date(0);
            SimpleDateFormat sdf = new SimpleDateFormat ("yyyyMMddHHmmss");
            filename =  sdf.format(date);

            try{
                 String path = Environment.getExternalStorageDirectory().toString();
                 OutputStream fOut = null;
                 File file = new File(path, "/DCIM/Signatures/"+filename+".jpg");
                 fOut = new FileOutputStream(file);

                 mBitmap.compress(Bitmap.CompressFormat.JPEG, 85, fOut);
                 fOut.flush();
                 fOut.close();

                 MediaStore.Images.Media.insertImage(getContentResolver()
                 ,file.getAbsolutePath(),file.getName(),file.getName());

            }catch (Exception e) {
                e.printStackTrace();
            }

 } 
```

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2015-04-08T09:52:47.620

我发现发送PNG和透明度的方式。

```
String file_path = Environment.getExternalStorageDirectory().getAbsolutePath() +
                    "/CustomDir";
File dir = new File(file_path);
if(!dir.exists())
  dir.mkdirs();

String format = new SimpleDateFormat("yyyyMMddHHmmss",
       java.util.Locale.getDefault()).format(new Date());

File file = new File(dir, format + ".png");
FileOutputStream fOut;
try {
        fOut = new FileOutputStream(file);
        yourbitmap.compress(Bitmap.CompressFormat.PNG, 85, fOut);
        fOut.flush();
        fOut.close();
     } catch (Exception e) {
        e.printStackTrace();
 }

Uri uri = Uri.fromFile(file);     
Intent intent = new Intent(android.content.Intent.ACTION_SEND);
intent.setType("image/*");
intent.putExtra(android.content.Intent.EXTRA_SUBJECT, "");
intent.putExtra(android.content.Intent.EXTRA_TEXT, "");
intent.putExtra(Intent.EXTRA_STREAM, uri);

startActivity(Intent.createChooser(intent,"Sharing something"))); 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2018-12-09T04:44:19.557

您想将位图保存到您选择的目录中。我制作了一个 ImageWorker 库，使用户能够加载、保存和转换位图/drawables/base64 图像。

最小 SDK - 14

**先决条件**

*   保存文件需要 WRITE_EXTERNAL_STORAGE 权限。
*   检索文件需要 READ_EXTERNAL_STORAGE 权限。

保存位图/Drawable/Base64

```
ImageWorker.to(context).
    directory("ImageWorker").
    subDirectory("SubDirectory").
    setFileName("Image").
    withExtension(Extension.PNG).
    save(sourceBitmap,85) 
```

加载位图

```
val bitmap: Bitmap? = ImageWorker.from(context).
    directory("ImageWorker").
    subDirectory("SubDirectory").
    setFileName("Image").
    withExtension(Extension.PNG).
    load() 
```

执行

### 添加依赖项

在项目级别 Gradle

```
allprojects {
        repositories {
            ...
            maven { url 'https://jitpack.io' }
        }
    } 
```

在应用程序级别 Gradle

```
dependencies {
            implementation 'com.github.ihimanshurawat:ImageWorker:0.51'
    } 
```

[您可以在https://github.com/ihimanshurawat/ImageWorker/blob/master/README.md](https://github.com/ihimanshurawat/ImageWorker/blob/master/README.md)上阅读更多内容

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2016-02-18T19:21:39.040

确保在调用之前创建目录`bitmap.compress`：

```
new File(FileName.substring(0,FileName.lastIndexOf("/"))).mkdirs(); 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2018-06-28T13:17:34.153

为视频创建视频缩略图。如果视频损坏或格式不受支持，它可能会返回 null。

```
private void makeVideoPreview() {
    Bitmap thumbnail = ThumbnailUtils.createVideoThumbnail(videoAbsolutePath, MediaStore.Images.Thumbnails.MINI_KIND);
    saveImage(thumbnail);
} 
```

要将位图保存在 sdcard 中，请使用以下代码

**店铺形象**

```
private void storeImage(Bitmap image) {
    File pictureFile = getOutputMediaFile();
    if (pictureFile == null) {
        Log.d(TAG,
                "Error creating media file, check storage permissions: ");// e.getMessage());
        return;
    } 
    try {
        FileOutputStream fos = new FileOutputStream(pictureFile);
        image.compress(Bitmap.CompressFormat.PNG, 90, fos);
        fos.close();
    } catch (FileNotFoundException e) {
        Log.d(TAG, "File not found: " + e.getMessage());
    } catch (IOException e) {
        Log.d(TAG, "Error accessing file: " + e.getMessage());
    }  
} 
```

**获取图像存储路径**

```
/** Create a File for saving an image or video */
private  File getOutputMediaFile(){
    // To be safe, you should check that the SDCard is mounted
    // using Environment.getExternalStorageState() before doing this. 
    File mediaStorageDir = new File(Environment.getExternalStorageDirectory()
            + "/Android/data/"
            + getApplicationContext().getPackageName()
            + "/Files"); 

    // This location works best if you want the created images to be shared
    // between applications and persist after your app has been uninstalled.

    // Create the storage directory if it does not exist
    if (! mediaStorageDir.exists()){
        if (! mediaStorageDir.mkdirs()){
            return null;
        }
    } 
    // Create a media file name
    String timeStamp = new SimpleDateFormat("ddMMyyyy_HHmm").format(new Date());
    File mediaFile;
        String mImageName="MI_"+ timeStamp +".jpg";
        mediaFile = new File(mediaStorageDir.getPath() + File.separator + mImageName);  
    return mediaFile;
} 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2019-01-14T06:09:33.933

> 一些新设备不保存位图所以我解释了一点..

确保您已**在权限下方添加**

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

> `xml`并在文件夹名称**provider_paths.xml**下创建一个 xml 文件

 **```
<?xml version="1.0" encoding="utf-8"?>
<paths>
    <external-path
        name="external_files"
        path="." />
</paths> 
```

并且在 AndroidManifest 下

```
<provider
            android:name="android.support.v4.content.FileProvider"
            android:authorities="${applicationId}.provider"
            android:exported="false"
            android:grantUriPermissions="true">
            <meta-data
                android:name="android.support.FILE_PROVIDER_PATHS"
                android:resource="@xml/provider_paths"/>
        </provider> 
```

然后只需调用 saveBitmapFile(passYourBitmapHere)

```
public static void saveBitmapFile(Bitmap bitmap) throws IOException {
        File mediaFile = getOutputMediaFile();
        FileOutputStream fileOutputStream = new FileOutputStream(mediaFile);
        bitmap.compress(Bitmap.CompressFormat.JPEG, getQualityNumber(bitmap), fileOutputStream);
        fileOutputStream.flush();
        fileOutputStream.close();
    } 
```

在哪里

```
File getOutputMediaFile() {
        File mediaStorageDir = new File(
                Environment.getExternalStorageDirectory(),
                "easyTouchPro");
        if (mediaStorageDir.isDirectory()) {

            // Create a media file name
            String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss")
                    .format(Calendar.getInstance().getTime());
            String mCurrentPath = mediaStorageDir.getPath() + File.separator
                            + "IMG_" + timeStamp + ".jpg";
            File mediaFile = new File(mCurrentPath);
            return mediaFile;
        } else { /// error handling for PIE devices..
            mediaStorageDir.delete();
            mediaStorageDir.mkdirs();
            galleryAddPic(mediaStorageDir);

            return (getOutputMediaFile());
        }
    } 
```

和其他方法

```
public static int getQualityNumber(Bitmap bitmap) {
        int size = bitmap.getByteCount();
        int percentage = 0;

        if (size > 500000 && size <= 800000) {
            percentage = 15;
        } else if (size > 800000 && size <= 1000000) {
            percentage = 20;
        } else if (size > 1000000 && size <= 1500000) {
            percentage = 25;
        } else if (size > 1500000 && size <= 2500000) {
            percentage = 27;
        } else if (size > 2500000 && size <= 3500000) {
            percentage = 30;
        } else if (size > 3500000 && size <= 4000000) {
            percentage = 40;
        } else if (size > 4000000 && size <= 5000000) {
            percentage = 50;
        } else if (size > 5000000) {
            percentage = 75;
        }

        return percentage;
    } 
```

和

```
void galleryAddPic(File f) {
        Intent mediaScanIntent = new Intent(
                "android.intent.action.MEDIA_SCANNER_SCAN_FILE");
        Uri contentUri = Uri.fromFile(f);
        mediaScanIntent.setData(contentUri);

        this.sendBroadcast(mediaScanIntent);
    } 
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2019-07-13T04:48:28.743

**将位图保存到您的画廊而不压缩。**

```
private File saveBitMap(Context context, Bitmap Final_bitmap) {
    File pictureFileDir = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES), "Your Folder Name");
    if (!pictureFileDir.exists()) {
        boolean isDirectoryCreated = pictureFileDir.mkdirs();
        if (!isDirectoryCreated)
            Log.i("TAG", "Can't create directory to save the image");
        return null;
    }
    String filename = pictureFileDir.getPath() + File.separator + System.currentTimeMillis() + ".jpg";
    File pictureFile = new File(filename);
    try {
        pictureFile.createNewFile();
        FileOutputStream oStream = new FileOutputStream(pictureFile);
        Final_bitmap.compress(Bitmap.CompressFormat.PNG, 100, oStream);
        oStream.flush();
        oStream.close();
        Toast.makeText(Full_Screen_Activity.this, "Save Image Successfully..", Toast.LENGTH_SHORT).show();
    } catch (IOException e) {
        e.printStackTrace();
        Log.i("TAG", "There was an issue saving the image.");
    }
    scanGallery(context, pictureFile.getAbsolutePath());
    return pictureFile;
}
private void scanGallery(Context cntx, String path) {
    try {
        MediaScannerConnection.scanFile(cntx, new String[]{path}, null, new MediaScannerConnection.OnScanCompletedListener() {
            public void onScanCompleted(String path, Uri uri) {
                Toast.makeText(Full_Screen_Activity.this, "Save Image Successfully..", Toast.LENGTH_SHORT).show();
            }
        });
    } catch (Exception e) {
        e.printStackTrace();
        Log.i("TAG", "There was an issue scanning gallery.");
    }
} 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2013-01-22T11:47:39.097

嘿，只需将名称命名为**.bmp**

做这个：

```
ByteArrayOutputStream bytes = new ByteArrayOutputStream();
_bitmapScaled.compress(Bitmap.CompressFormat.PNG, 40, bytes);

//you can create a new file name "test.BMP" in sdcard folder.
File f = new File(Environment.getExternalStorageDirectory()
                        + File.separator + "**test.bmp**") 
```

听起来我只是在开玩笑，但是一旦它保存在 bmp foramt 中就可以尝试一下……干杯

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2017-09-15T11:42:12.823

在 Android 4.4 Kitkat 之后，截至 2017 年，Android 4.4 及以下的份额约为 20% 并且正在下降，无法使用`File`类和`getExternalStorageDirectory()`方法保存到 SD 卡。此方法返回您的设备内存和图像保存对每个应用程序可见。您还可以仅将图像保存为您的应用程序私有，并在用户使用方法删除您的应用程序时被删除`openFileOutput()`。

从 Android 6.0 开始，您可以将 SD 卡格式化为内部存储器，但仅限于您的设备。（如果您将 SD 汽车格式化为内部存储器，则只有您的设备可以访问或查看其内容）您可以使用以下方式保存到该 SD 卡其他答案，但如果您想使用可移动 SD 卡，您应该阅读下面的答案。

您应该使用**存储访问框架**获取 uri 到`onActivityResult`活动的文件夹方法以获取用户选择的文件夹，并添加可检索持久权限以便在用户重新启动设备后能够访问文件夹。

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    if (resultCode == RESULT_OK) {

        // selectDirectory() invoked
        if (requestCode == REQUEST_FOLDER_ACCESS) {

            if (data.getData() != null) {
                Uri treeUri = data.getData();
                tvSAF.setText("Dir: " + data.getData().toString());
                currentFolder = treeUri.toString();
                saveCurrentFolderToPrefs();

                // grantUriPermission(getPackageName(), treeUri,
                // Intent.FLAG_GRANT_READ_URI_PERMISSION |
                // Intent.FLAG_GRANT_WRITE_URI_PERMISSION);

                final int takeFlags = data.getFlags()
                        & (Intent.FLAG_GRANT_READ_URI_PERMISSION | Intent.FLAG_GRANT_WRITE_URI_PERMISSION);
                // Check for the freshest data.
                getContentResolver().takePersistableUriPermission(treeUri, takeFlags);

            }
        }
    }
} 
```

现在，将保存文件夹保存到共享首选项，不要在每次要保存图像时要求用户选择文件夹。

您应该使用`DocumentFile`class 来保存您的图像，而不是`File`，`ParcelFileDescriptor`有关更多信息，您可以查看[此线程](https://stackoverflow.com/questions/45924864/saving-an-image-after-getting-folder-from-storage-access-framework-ui)`compress(CompressFormat.JPEG, 100, out);`以使用方法和`DocumentFile`类将图像保存到 SD 卡。

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2017-06-29T19:22:48.573

// |==| 从位图创建一个 PNG 文件：

```
void devImjFylFnc(String pthAndFylTtlVar, Bitmap iptBmjVar)
{
    try
    {
        FileOutputStream fylBytWrtrVar = new FileOutputStream(pthAndFylTtlVar);
        iptBmjVar.compress(Bitmap.CompressFormat.PNG, 100, fylBytWrtrVar);
        fylBytWrtrVar.close();
    }
    catch (Exception errVar) { errVar.printStackTrace(); }
} 
```

// |==| 从文件中获取 Bimap：

```
Bitmap getBmjFrmFylFnc(String pthAndFylTtlVar)
{
    return BitmapFactory.decodeFile(pthAndFylTtlVar);
} 
```

# architecture - 软件架构培训资源

> ID：649158
> 
> 赞同：16
> 
> 时间：2009-03-16T03:28:30.977
> 
> 标签：architecture

在最佳软件架构实践中正确建立自己的最佳资源是什么。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-03-16T03:35:42.520

我不太确定作为一名软件架构师是你“训练”的东西，因为它是你必须获得经验的东西。不过，如果你坚持这一点，我很乐意分享我的食谱。

### 完美软件架构师的秘诀

*   7年以上的多元化经验；越多越好
*   积极参与当地和更广泛的技术社区
*   熟练和磨练的沟通技巧，以便您可以向技术人员和非技术人员表达您的想法
*   作为领导者和导师的有效能力

在企业级碗中混合配料。服务 1 到 N。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-16T04:05:14.787

这是一个不错的小清单，如果您正在寻找一些阅读材料，[每个软件架构师都应该阅读的 10 篇论文。](http://www.drdobbs.com/architecture-and-design/10-papers-every-software-architect-shoul/228700494)“大泥球”论文是我特别喜欢的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-03-16T03:55:59.897

[http://www.infoQ.com](http://www.infoQ.com)架构站点上有很多非常好的东西。

Martin Fowler 的网站也不错。

# php - mysql_assoc 错误 - 显示正常

> ID：649163
> 
> 赞同：0
> 
> 时间：2009-03-16T03:30:36.603
> 
> 标签：php

> **可能重复：**
> [警告：mysql_fetch_array()：提供的参数不是有效的 MySQL 结果](https://stackoverflow.com/questions/795746/warning-mysql-fetch-array-supplied-argument-is-not-a-valid-mysql-result)

我使用此代码绘制了一个错误：

```
<?php
    include "config.inc.php";
        mysql_query($addClient) or die(mysql_error());
    $sth = mysql_query(
        sprintf(
            "SELECT c_id,p_id,p_title FROM projects WHERE c_id = %s",
            mysql_real_escape_string($_GET['id'])
        )
    );
    $projects = array();
    while($r = mysql_fetch_array($sth)) {
        $projects[] = array('id' => $r['p_id'], 'name' => $r['p_title']);
    }
    print json_encode($projects);
    exit;

?> 
```

我收到此错误：

> **警告**：mysql_fetch_assoc()：提供的参数不是第**10**行**/home/content/g/a/t/gatts316/html/clients/inc/get-projects.php中的有效 MySQL 结果资源**
> 
>  **[]**

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-16T03:35:07.233

你确定这是正确的代码吗？该错误指的是`mysql_fetch_assoc()`但`mysql_fetch_assoc()`您粘贴的代码中没有。在哪里`$addClient`定义？也许里面`config.inc.php`有问题？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-16T04:01:16.653

上面的代码没有 mysql_fetch_assoc，你确定那是**get-projects.php 的**代码片段吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-17T15:17:34.010

我假设您将 mysql_fetch_assoc 更改为 mysql_fetch_array 进行测试......无论如何，错误应该仍然存在。

您忘记在查询中将字符串 %s 括在 '' 之间：

```
$sth = mysql_query(
    sprintf(
            "SELECT c_id,p_id,p_title FROM projects WHERE c_id = '%s'",
            mysql_real_escape_string($_GET['id'])
    )
); 
```

# css - 无法在 Firefox 中通过 CSS 自定义 Stackoverflow

> ID：649165
> 
> 赞同：0
> 
> 时间：2009-03-16T03:31:29.660
> 
> 标签：css, firefox

我想通过 css 文件控制 Stackoverflow 中的哪些部分对我可见。Firefox 安装文件夹中大约有十个 css 文件。我不确定是否应该编辑它们。

**如何在 Firefox 中通过 CSS 自定义 Stackoverflow？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-16T03:52:44.287

您可以在您的个人资料文件夹中创建一个名为“userContent.css”的文件，它将在每个页面上加载。这里有更多信息：[http ://www.mozilla.org/unix/customizing.html](http://www.mozilla.org/unix/customizing.html)

如果您需要进行仅影响一个特定站点而不是每个站点的更改，则可以使用以下语法：

```
@-moz-document domain(stackoverflow.com) {
    body {
        background-color:#f0f;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-16T03:59:55.330

GreaseMonkey 的 CSS 等效项是[Stylish 扩展](https://addons.mozilla.org/en-US/firefox/addon/2108)，它允许您在不修改`userChrome.css`文件的情况下覆盖站点 CSS。

[安装Stylish](https://addons.mozilla.org/en-US/firefox/addon/2108)后，您可以简单地为包含您的 css 覆盖的 stackoverflow 创建自定义用户样式，而不会冒险搞砸`userChrome.css`. 您还可以随时禁用或启用该特定样式表。此外，请确保`!important`在您的样式声明中使用 CSS 特殊性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-16T03:34:11.463

尝试使用来自[http://getfirebug.com的萤火虫](http://getfirebug.com)

您还可以使用greasemonkey 进行进一步的自定义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-16T03:40:52.897

您可以在 Firefox 中获得一个非常方便的插件，称为 GreaseMonkey。它在页面加载后执行自定义 javascript，并且能够在客户端修改 html。例如人们用它来去除各种元素，改变颜色，字体，重新排列元素等

还有一本关于它的书[免费在线提供](http://diveintogreasemonkey.org/toc/)

[您可以在此处](http://greasemonkey.mozdev.org/)获取 Greasemonkey 插件。

# asp.net - GridView 布局/输出

> ID：649168
> 
> 赞同：0
> 
> 时间：2009-03-16T03:33:23.617
> 
> 标签：asp.net, gridview

我有一个使用 ASP.Net 2.0 的网站，SQL Server 作为数据库，C# 2005 作为编程语言。在其中一个页面中，我有一个具有以下布局的 GridView。

```
Date -> Time -> QtyUsed 
```

示例值如下：（由于此 GridView/Report 仅针对特定月份生成，因此我只提取并显示了日期的 Day 部分，而忽略了月份和年份部分。

```
01 -> 09:00 AM -> 05 
01 -> 09:30 AM -> 03
01 -> 10:00 AM -> 09
02 -> 09:00 AM -> 10
02 -> 09:30 AM -> 09
02 -> 10:00 AM -> 11
03 -> 09:00 AM -> 08
03 -> 09:30 AM -> 09
03 -> 10:00 AM -> 12 
```

现在用户希望布局如下：

```
Time        01 02 03 04 05 06 07 08 09 
-------------------------------------------------------------------------
09:00 AM -> 05 10 08
09:30 AM -> 03 09 09
10:00 AM -> 09 11 12 
```

主要要求是日期应该在列标题中从 01 到最后一个日期（我只从日期中提取日期部分的原因）。时间段应按行向下。

根据我使用 Excel 的经验，我想到了 Transpose 的想法来解决这个问题，但我不确定。

请帮我解决这个问题。

谢谢你。

拉利特·库马尔·巴里克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-16T03:43:45.573

您必须相应地生成数据集。我猜您正在根据小时进行某种分组，因此为一天中的每个小时生成一个列并相应地填充数据集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-16T04:13:54.657

在 SQL Server 中，有一个 PIVOT 函数可能有用。

[MSDN 文章](http://blogs.msdn.com/spike/archive/2009/03/03/pivot-tables-in-sql-server-a-simple-sample.aspx)指定了用法并给出了示例。

示例如下

表 DailyIncome 看起来像

```
VendorId   IncomeDay  IncomeAmount
---------- ---------- ------------
SPIKE      FRI        100
SPIKE      MON        300
FREDS      SUN        400
SPIKE      WED        500
... 
```

以显示

```
VendorId   MON         TUE         WED         THU         FRI         SAT         SUN

---------- ----------- ----------- ----------- ----------- ----------- ----------- -----------
FREDS      500         350         500         800         900         500         400
JOHNS      300         600         900         800         300         800         600
SPIKE      600         150         500         300         200         100         400 
```

使用此选择

```
SELECT * FROM DailyIncome
PIVOT( AVG( IncomeAmount ) 
FOR IncomeDay IN
 ([MON],[TUE],[WED],[THU],[FRI],[SAT],[SUN])) AS AvgIncomePerDay 
```

或者，您可以从 DailyIncome 中选择所有数据并构建一个包含数据透视的 DataTable。[这是一个例子。](http://weblogs.sqlteam.com/jeffs/articles/5091.aspx)

# .net - 如何调试“创建窗口句柄时出错”错误？

> ID：649171
> 
> 赞同：1
> 
> 时间：2009-03-16T03:35:05.140
> 
> 标签：.net, windows

我正在尝试调试来自基于 Windows .NET 的应用程序的错误。错误消息类似于“创建窗口句柄时出错”。[在研究这个错误](http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/3fb91a63-a86a-4817-9c3a-5b2f2443926f/)时，我发现可能的原因是[应用程序使用了超过 10000 个用户句柄](http://blogs.msdn.com/oldnewthing/archive/2005/02/11/371042.aspx)。

我想在应用程序中加入一些调试代码，看看应用程序使用了多少个“用户句柄”。但是谷歌搜索“如何计算用户句柄”并没有帮助。

那么，你们中有人遇到过类似的问题吗？如果是，您是如何调试的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-16T03:39:39.763

WinForm 应用程序中有 2 个可能导致此问题的原因

1.  您没有主动处理应用程序中的 Control 和 Form 实例。这种方式更难解决问题，因为需要一点时间，GC 会清理句柄，但仍然可行。
2.  PInvoke 到本机 API 并且不关闭生成的句柄

那将是我要检查的前两个地方。另一个想法是直接找到源代码并开始调试句柄泄漏。以下是有关如何实现此目的的一些链接。

*   [http://blogs.msdn.com/junfeng/archive/2008/04/21/use-htrace-to-debug-handle-leak.aspx](http://blogs.msdn.com/junfeng/archive/2008/04/21/use-htrace-to-debug-handle-leak.aspx)
*   [http://www.codeproject.com/KB/debug/cdbntsd5.aspx](http://www.codeproject.com/KB/debug/cdbntsd5.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-16T03:44:41.407

另一个可能的原因是某些控件在[OnHandleCreated](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.onhandlecreated.aspx)或关联的[HandleCreated](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.handlecreated.aspx)事件中引发异常。我相信这可能会导致类似于您所看到的错误。

# flash - Actionscript 虚拟机 1 - 检查内存

> ID：649172
> 
> 赞同：0
> 
> 时间：2009-03-16T03:35:06.187
> 
> 标签：flash, actionscript, npapi

如何确定 AVM1 的 Mozilla Flash 插件内存中当前有什么？我正在尝试调试我们构建的大型应用程序，并且需要查看收集垃圾的内容和时间。我认为我们有许多引用导致主要内容节点在用户会话期间不卸载。现在都是猜测工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-17T22:43:50.887

即使您在 Firefox 中有一个分析器，这也是猜测，因为垃圾收集器在 AVM1 中有点“忙碌”。如果内存使用量突然达到峰值，它会进行收集，当然您设法删除了对对象的所有引用。对我有用的是： 1\. 删除所有听众 2\. object = null 3\. delete object

但无论如何，您应该花时间优化您的代码并确保您不会留下流氓侦听器（或使用 Delegate 传递范围内的方法引用，肮脏但有效），而不是试图找到一种精确监控内存的方法。如果您确实需要，请使用基于操作系统的操作系统并检查 Firefox 进程，或者将您的项目暂时切换到 Flash Lite 并使用 Device Central。

# mfc - 如何判断鼠标是顺时针还是逆时针移动？

> ID：649177
> 
> 赞同：4
> 
> 时间：2009-03-16T03:37:29.940
> 
> 标签：mfc, mouse, rotation, gesture, onmousemove

我有一个 MFC 应用程序，用户必须在一个带有拖动运动的圆圈周围移动鼠标。我需要在鼠标拖动“旋转”期间检索度数，我需要知道它是顺时针还是逆时针。

起初，为了确定旋转方向，我比较了当前鼠标位置和用户单击以启动拖动的鼠标位置之间的 x 坐标。在用户旋转超过 180 度之前效果很好。

我该如何处理圆的另一半？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-16T03:40:55.470

您需要*至少三个*有序点来确定某人随着时间的推移是顺时针还是逆时针移动。只有两点，（例如）某人是否旋转 90 度或 -270 度并不明显。所以简单地取开始和结束的叉积是行不通的。

尝试在拖动过程中对鼠标进行采样以获得所需的附加信息，然后在每对连续点之间进行增量叉积。这会告诉你你想知道什么。但是，您需要足够快地进行采样，以免发生*超过 180 度的旋转；*否则你会再次陷入模棱两可的境地。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-16T03:42:17.650

这些可能会对你有所帮助。

[http://en.wikipedia.org/wiki/Atan2](http://en.wikipedia.org/wiki/Atan2)

[http://www.phy.syr.edu/courses/java-suite/crosspro.html](http://www.phy.syr.edu/courses/java-suite/crosspro.html)

这是一个识别手势的简单示例（它在闪存中，但想法很重要）

[http://www.bytearray.org/?p=91](http://www.bytearray.org/?p=91)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-16T03:39:27.580

阅读有关[交叉产品](http://en.wikipedia.org/wiki/Cross_product)的信息。计算 X 和 Y 向量之间的叉积（与起点的差异）将始终可靠地给出旋转方向。

# delphi - AV 当使用来自一个组件的过程被另一个组件调用时

> ID：649183
> 
> 赞同：0
> 
> 时间：2009-03-16T03:41:46.513
> 
> 标签：delphi, delphi-7, custom-component, access-violation

我不确定我是否已经尽我所能解释了这一点，但是，我们开始......

我在一个表单上有 2 个自定义组件，它们在设计时通过 IDE 链接在一起。每当我从组件中调用一个过程时，我都会遇到访问冲突，

> 模块“Project2.exe”中地址 0049A614 的访问冲突。读取地址 00000034。

这是我的代码的一小部分

```
TMyClient = class(TClientSocket)
{...}
end; 
```

和...

```
TPresence = class(TComponent) 
 private
  ftheClient: TMyClient 
 public 
  procedure SetStatus(status: string);

 published
  property UserName : string read fUserName write fUserName;
  property theClient: TMyClient read ftheClient write ftheClient;
 end;   

procedure TPresence.SetStatus(status: string);
begin
 try
*****   if theClient = nil then
     Exception.Create('theClient  is Nil');
 except
   on e:Exception do
   MessageDlg(e.classname+', '+e.message, mtWarning, [mbOK], 0);
 end;
  {...}
end; 
```

0049A614 在 *****，IDE 在这里停止。

我也尝试过在运行时进行分配

```
Presence1.theClient := MyClient1; 
```

没有运气

使用 Presence1 或 MyClient1 中不相互依赖的程序可以正常工作。

德尔福 7

跟进：从 mghie 评论中，我重新考虑了它。

我从表单中删除了 TPresence 组件（这导致了一些奇怪的 IDE 错误，这可能与它有关）并在设计时创建了它，分配了所需的一切。现在它可以工作了，但是将 TPresence 组件放回 from 会带来错误。

谢谢你们的帮助，我现在应该可以解决这个问题了，如果我不能重新打开另一个问题:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-16T05:38:13.177

您似乎认为引发异常是因为 Presence1 的客户端字段未设置 - 如果您确实收到异常“读取地址 00000034”，则意味着*SetStatus()*调用中的 Self 指针为*nil*。这表明您在未分配的*TPresence*引用上调用*了 SetStatus() 。*从您发布的代码段中实际上不可能说出原因，但它应该可以帮助您开始调试。

 *我仍然建议您为您自己的自定义组件中的所有组件引用编写一个适当的 setter 方法 - 首先是因为您在调试此类问题时有一个更好的钩子（您可以在那里设置断点），其次是因为您应该始终调用*TComponent.此类链接组件上的FreeNotification()*以便能够跟踪它们的破坏并将内部引用设置为*nil*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-16T10:28:36.613

我们可能需要更多您的代码。您可能没有正确创建 TPresence 的实例，这会给您带来您遇到的错误。尝试给我们一个导致您的错误的尽可能简单的代码片段。

# java - 如何从 BufferedImage 中获取 InputStream？

> ID：649186
> 
> 赞同：50
> 
> 时间：2009-03-16T03:42:54.343
> 
> 标签：java, image-processing, javax.imageio

如何从 BufferedImage 对象中获取 InputStream？我试过了，但 ImageIO.createImageInputStream() 总是返回 NULL

```
BufferedImage bigImage = GraphicsUtilities.createThumbnail(ImageIO.read(file), 300);
ImageInputStream bigInputStream = ImageIO.createImageInputStream(bigImage); 
```

图像缩略图正在正确生成，因为我可以成功地将*bigImage 绘制*到*JPanel*。

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2011-03-04T14:15:39.020

来自[http://usna86-techbits.blogspot.com/2010/01/inputstream-from-url-bufferedimage.html](http://usna86-techbits.blogspot.com/2010/01/inputstream-from-url-bufferedimage.html)

它工作得很好！

> 以下是为 BufferedImage 创建 InputStream 的方法：
> 
> ```
> URL url = new URL("http://www.google.com/intl/en_ALL/images/logo.gif");
> BufferedImage image = ImageIO.read(url);
> ByteArrayOutputStream os = new ByteArrayOutputStream();
> ImageIO.write(image, "gif", os);
> InputStream is = new ByteArrayInputStream(os.toByteArray()); 
> ```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-03-16T03:52:35.303

如果您尝试将图像保存到文件中，请尝试：

```
ImageIO.write(thumb, "jpeg", new File(....)); 
```

如果您只想要字节，请尝试执行 write 调用，但将其传递给 ByteArrayOutputStream，然后您可以从中取出字节数组并按照您的意愿使用它。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-03T19:21:52.440

通过覆盖方法`toByteArray()`，返回`buf`自身（不复制），您可以避免与内存相关的问题。这将共享相同的数组，而不是创建另一个正确大小的数组。重要的是使用该`size()`方法来控制进入数组的有效字节数。

```
final ByteArrayOutputStream output = new ByteArrayOutputStream() {
    @Override
    public synchronized byte[] toByteArray() {
        return this.buf;
    }
};
ImageIO.write(image, "png", output);
return new ByteArrayInputStream(output.toByteArray(), 0, output.size()); 
```

# python - 为什么不同类型的 Python 对象按类型名称排序？

> ID：649191
> 
> 赞同：2
> 
> 时间：2009-03-16T03:46:00.763
> 
> 标签：python

来自 Python 文档：[http ://docs.python.org/library/stdtypes.html#comparisons](http://docs.python.org/library/stdtypes.html#comparisons)

> 实现说明：除数字外的不同类型的对象按其类型名称排序；不支持正确比较的相同类型的对象按其地址排序。

是否有任何理由选择这样做而不是引发异常？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-16T03:51:00.830

您引用的那一行大约有四行：

> 不同类型的对象，除了不同的数值类型和不同的字符串类型，从不比较相等；此类对象的排序一致但任意**（因此对异构数组进行排序会产生一致的结果）。**

在对不同类型的对象列表进行排序时，您不想引发异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-16T03:49:49.023

将不同类型的对象以明确的顺序收集到单个排序列表中可能很有用。通过给所有对象一个稳定的排序顺序，这种行为是默认的。

# embedded - 对嵌入式系统编程最合适（最佳）语言的建议？

> ID：649197
> 
> 赞同：7
> 
> 时间：2009-03-16T03:48:56.717
> 
> 标签：embedded, arm

我正在考虑为大约 20MHz、6mb 内存、ARM32 处理器的设备进行嵌入式编码。任何人都可以建议最好/最合适的嵌入式系统编程语言吗？我正在考虑：

*   卢阿
*   小派
*   C
*   爪哇我
*   C＃
*   有人建议使用 JavaScript

有什么建议么？谢谢

编辑 - 看起来 C 和 Lua 是赢家。大家干杯！

编辑 - 实时不是问题，它更多的是有限的 ram/cpu 指示的东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-16T03:59:48.077

如果您要从头开始开发设备或直接与非标准外围设备连接，C 语言确实是唯一的选择。

如果您已经拥有一个嵌入式操作系统或者可以毫无困难地移植一个操作系统，那么您可能在添加一种更符合脚本语言的语言方面具有更大的灵活性。除非您在 WinCE 上，否则 C# 是不可能的，然后您将被限制为 .NET Micro。

除此之外，如果不描述您的设备将用于什么，“最佳”就没有什么意义。有些语言比其他语言对某些任务有更好的支持。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-16T03:53:29.480

对于如此有限的 cpu 资源，C 可能是您的最佳选择。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-03-16T03:53:13.617

我很想直接用 C，但后来我写 C 已经近 30 年了。Lua 和 TinyPy 对我来说似乎太新、太实验性了；嵌入式设备需要非常强大。

Java ME 有优点。我不了解嵌入式世界中的 C#。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-03-16T04:50:06.833

我[在 ARM OMAP 处理器上使用了 Lua](http://mqp.bluereboot.net/)。Lua 与 C 的紧密集成允许您随时使用金属，而且它的小尺寸使其适用于各种平台。我在我的 Mac 上用 Lua 为我的固件开发了 UI，然后把它带到了嵌入式平台上，没有做任何改动。

虽然 OMAP 处理器足够强大，可以运行 Java 或 Python 等其他语言，但当我开始编写代码时，我不知道我的目标是什么硬件。Lua 是一个安全的赌注。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-03-16T04:53:43.877

指定您希望此设备执行的操作很重要。它是某种控制应用程序吗？它必须实现算法吗？浮点支持怎么样？图形用户界面？性能很关键吗？您打算使用操作系统吗？

回答这些问题是选择编程语言的关键先决条件。

也就是说，嵌入式系统必须可靠，所以我会选择一些经过测试的解决方案。C 可能是 ARM 芯片最可靠和最受支持的选项，但 YMMV 取决于您的特定需求。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-18T17:16:47.407

C 无疑是嵌入式系统中使用最多的语言。它似乎也是最受关注的语言[http://www.langpop.com/](http://www.langpop.com/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-16T03:53:56.283

**编辑：**嗯。我刚刚注意到您所描述的“嵌入式”似乎不是向应用程序添加自动化语言，而是将应用程序压缩到嵌入式平台中。正如其他人所建议的那样，除非您真的需要它，否则请跳过可嵌入语言并用 C 编写您的应用程序。除了您实际使用的内容之外，几乎没有运行时开销。

没有特别的顺序，Lua、JavaScript 和 TCL 都非常适合嵌入。Lua 对我来说是最容易嵌入的。Javascript*可能*是最快的。这三个对不受信任的代码都有很好的处理，但 TCL 的最健壮，例如，不受信任的代码可以运行不受信任的代码（如果它受信任的话）。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-03-16T13:51:07.813

除非您有支持各种替代语言的 RTOS，否则 C 或 C++（取决于您的编译器链）是可行的方法。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-03-16T18:40:35.760

您的决定很可能取决于此处理器可用的工具。

C 是迄今为止嵌入式处理器支持最多的语言，所以你不会错太多，如果你将来必须为其他芯片编写软件，这将是一个很好的体验。

C++ 在嵌入式系统中变得越来越流行。除此之外，它还取决于您的优先事项（上市时间、资源使用、速度）以及您使用的工具的质量。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-05-06T05:41:04.993

C 最好的

# macos - 如何格式化 date -u 以便结果包括 Mac OSX 终端会话中的时区偏移？

> ID：649202
> 
> 赞同：3
> 
> 时间：2009-03-16T03:52:38.033
> 
> 标签：macos, date, time, textmate, utc

在终端会话中，我可以使用 date -u 获取
Mon Mar 16 03:34:39 2009 UTC
但是，我想包括偏移量。我正在修改 TextMate 选项卡触发器，以便可以以标准 UTC 格式插入包括本地偏移量在内的完整日期。我相信这将采用以下形式：Mon Mar 16 03:34:39 2009 UTC -0500

因此，如您所见，我不知道如何获取时区偏移并将其与格式化的日期结果相结合。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-16T03:56:00.303

试试这个：

```
echo `date -u` `date +%z` 
```

# c# - 序言异常中不允许的内容

> ID：649209
> 
> 赞同：4
> 
> 时间：2009-03-16T03:55:03.207
> 
> 标签：c#, java, soap, cxf

我正在尝试将 xml 发送到第三方通过 ac#.NET 应用程序提供给我的基于 java 的 Web 服务，但`org.xml.sax.SAXParseException: Content is not allowed in prolog`出现错误。

我已经根据架构验证了 xml，并将用于保存 xml 的内存流传递给 .xml 文件，然后用十六进制编辑器打开文件以确保序言中没有不需要的字符，并且有没有。打开时，文件中的第一个字符是

```
<?xml version="1.0" encoding="utf-8"?> 
```

我用于将 xml 数据发送到 Web 服务的类接受一个字节数组。*我认为使用XmlTextWriter*创建 xml到 utf-8 编码的内存流，然后将流的内容发送到字节数组是最直接的方法。

我已经做了很多研究，并尝试了我能找到的围绕这个问题的所有可能性，但没有任何效果。有人可以帮忙吗？提前致谢。

顺便说一句，这是 Web 服务返回给我的部分内容。在 SOAP 消息的有效负载中，应**元素看起来像这样，还是像之前的内容一样可读xml？**

 **```
Messages:
Message:

Payload: <?xml version="1.0" encoding="utf-8"?><soap:Envelope xmlns:soap="http:/
/schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema
-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"><soap:Body><postSubmissi
on xmlns="http://service.arm.hud.gov/"><submissionHeader><agcHcsId>1</agcHcsId><
agcName>test</agcName><systemName>123</systemName><cmsSubId>123456</cmsSubId><su
bFlag>0</subFlag></submissionHeader><agcType>test</agcType><submissionData>PD94b
WwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48dG5zOlN1Ym1pc3Npb25EYXRhIHhzaTpzY
2hlbWFMb2NhdGlvbj0iaHR0cDovL2dvdi5odWQuYXJtL2FybV9kYXRhYmFnXzNfMS54c2QiIHhtbG5zO
nhzaT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxT......etc............................
</submissionData></postSubmission></soap:Body></soap:Envelope> 
```

这里是 xml 数据以获得更好的可读性：

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:soap="http:/
    /schemas.xmlsoap.org/soap/envelope/"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema
    -instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <soap:Body>
        <postSubmissi on xmlns="http://service.arm.hud.gov/">
            <submissionHeader>
                <agcHcsId>1</agcHcsId>
                <agcName>test</agcName>
                <systemName>123</systemName>
                <cmsSubId>123456</cmsSubId>
                <subFlag>0</subFlag>
            </submissionHeader>
            <agcType>test</agcType>
            <submissionData>PD94b
                WwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48dG5zOlN1Ym1pc3Npb25EYXRhIHhzaTpzY
                2hlbWFMb2NhdGlvbj0iaHR0cDovL2dvdi5odWQuYXJtL2FybV9kYXRhYmFnXzNfMS54c2QiIHhtbG5zO
                nhzaT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxT......etc............................
            </submissionData>
        </postSubmission>
    </soap:Body>
</soap:Envelope> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-28T23:13:21.397

我能够通过删除 UTF 编码来解决这个问题。听起来在我们的两种情况下，文本实际上都不是 UTF-8 编码的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-16T04:19:58.387

您的文件顶部是否有导致这种混乱的[字节顺序标记？](http://en.wikipedia.org/wiki/Byte_Order_Mark)使用十六进制转储或十六进制编辑器转储或编辑文件并检查前两个或三个字节并确保文件以

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-16T10:03:14.163

我在 C#/Java XML 互操作性和 Java 处理字节顺序标记（XML 声明之前的 2 或 3 个字节并识别编码字节顺序）方面遇到了无穷无尽的问题。Java 不能很好地使用有效的 BOM，因此您必须将其删除。通过派生字节数组并使用以下方法检查它：

```
arr[0] == (byte) 0xEF && arr[1] == (byte) 0xBB && arr[2] == (byte) 0xBF 
```

这会检查 3 字节的变体，这就是导致悲伤的原因 :-(

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-16T04:11:31.107

我刚刚收到您的消息，缩进它并验证：

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope 
    xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <soap:Body>
        <postSubmission xmlns="http://service.arm.hud.gov/">
            <submissionHeader>
                <agcHcsId>1</agcHcsId>
                <agcName>test</agcName>
                <systemName>123</systemName>
                <cmsSubId>123456</cmsSubId>
                <subFlag>0</subFlag>
            </submissionHeader>
            <agcType>test</agcType>
            <submissionData>
            PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmL *abbreviated data to fit*
            </submissionData>
        </postSubmission>
    </soap:Body>
</soap:Envelope> 
```

我猜想这条消息*之前*的某些东西不知何故不同步——错误消息似乎表明 XML 解析器认为它在看到该`<?xml`行之前看到了一条注释。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-16T08:47:36.700

[只需使用hexplorer 之](http://hexplorer.sourceforge.net/)类的十六进制编辑器打开您的 XML 文件，然后您就可以查看和删除这些奇怪的字符，保存您的文件并使用您喜欢的编辑器（我个人使用[Notepad++](http://notepad-plus.sourceforge.net)）打开并确保您的文件使用的是 UTF-8编码:-)

希望对你有帮助

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-25T09:19:05.177

Web 服务是否与其他 (java) 客户端一起正常运行？我已经多次收到此错误，错误的根源是库依赖问题 - 如果我没记错的话，JAXB2 与 Java5 相关的问题。

# shell - 如何将菜单项添加到带有分隔行的文件的 shell 上下文菜单中？

> ID：649215
> 
> 赞同：0
> 
> 时间：2009-03-16T03:59:28.220
> 
> 标签：shell, contextmenu

我想在目录中的选定文件上单击鼠标右键时出现的上下文菜单中添加一个项目。我不知道如何将它添加到菜单的指定位置，我也不知道如何将它与上面和下面的行分开。

我需要修改注册表吗？如果是这样，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-16T04:03:40.767

如果您想以非编程方式执行此操作，您只需更改注册表即可。例如，如果您希望能够使用名为“编辑”的命令在任何 DLL 文件上启动记事本，只需将其添加到您的注册表中：

```
[HKEY_CLASSES_ROOT\dllfile\shell]
[HKEY_CLASSES_ROOT\dllfile\shell\Edit]
[HKEY_CLASSES_ROOT\dllfile\shell\Edit\command]
@="notepad \"%L\"" 
```

[这](http://www.codeproject.com/KB/shell/SimpleContextMenu.aspx)是一篇深入探讨如何做到这一点的文章。

# awk - 无法通过 AWK 过滤终端中的第一行

> ID：649231
> 
> 赞同：0
> 
> 时间：2009-03-16T04:07:03.567
> 
> 标签：awk, match

使用 ls -1 后我尝试以下代码失败

```
awk -F '\n' '{ print $1 }' 
```

如何获得终端的第一行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-16T04:11:07.753

头-n 1

可能会更容易。

如果您坚持使用 awk，请执行

awk 'NR == 1 { 打印 }'

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-16T04:17:46.333

```
awk '{print $0 ; exit(0); }' 
```

我同意这`head -1`更容易。

其他选项：

```
sed q file 
```

# variables - 是否可以在 Makefile 中创建多行字符串变量

> ID：649246
> 
> 赞同：142
> 
> 时间：2009-03-16T04:15:10.863
> 
> 标签：variables, makefile

我想创建一个多行字符串的makefile 变量（例如电子邮件发布公告的正文）。就像是

```
ANNOUNCE_BODY="
Version $(VERSION) of $(PACKAGE_NAME) has been released

It can be downloaded from $(DOWNLOAD_URL)

etc, etc" 
```

但我似乎无法找到一种方法来做到这一点。是否可以？

* * *

## 回答 #1

> 赞同：201
> 
> 时间：2009-03-16T06:39:14.387

是的，您可以使用 define 关键字来声明一个多行变量，如下所示：

```
define ANNOUNCE_BODY
Version $(VERSION) of $(PACKAGE_NAME) has been released.

It can be downloaded from $(DOWNLOAD_URL).

etc, etc.
endef 
```

棘手的部分是将您的多行变量从 makefile 中取出。如果您只是使用“echo $(ANNOUNCE_BODY)”这一显而易见的事情，您将看到其他人在此处发布的结果——shell 尝试将变量的第二行和后续行作为命令本身来处理。

但是，您可以将变量值按原样作为环境变量导出到 shell，然后从 shell 中将其作为环境变量（不是 make 变量）引用。例如：

```
export ANNOUNCE_BODY
all:
    @echo "$$ANNOUNCE_BODY" 
```

注意使用`$$ANNOUNCE_BODY`，表示一个 shell 环境变量引用，而不是`$(ANNOUNCE_BODY)`，这将是一个常规的 make 变量引用。还要确保在变量引用周围使用引号，以确保 shell 本身不会解释换行符。

当然，这个特殊的技巧可能是平台和外壳敏感的。我使用 GNU bash 3.2.13 在 Ubuntu Linux 上对其进行了测试；YMMV。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2011-05-04T17:55:47.863

“将多行变量从生成文件中取出”的另一种方法（Eric Melski 将其称为“棘手的部分”）是计划使用该函数将多行字符串中`subst`引入的换行符替换为. 然后使用 -e with来解释它们。您可能需要设置 .SHELL=bash 以获得执行此操作的回声。`define``\n``echo`

这种方法的一个优点是您还可以将其他此类转义字符放入您的文本中并尊重它们。

这种综合了迄今为止提到的所有方法......

你结束了：

```
define newline

endef

define ANNOUNCE_BODY
As of $(shell date), version $(VERSION) of $(PACKAGE_NAME) has been released.  

It can be downloaded from $(DOWNLOAD_URL).  

endef

someTarget:
    echo -e '$(subst $(newline),\n,${ANNOUNCE_BODY})' 
```

请注意，最终回显中的单引号至关重要。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-05-24T08:29:46.017

假设您只想在标准输出上打印变量的内容，还有另一种解决方案：

```
do-echo:
    $(info $(YOUR_MULTILINE_VAR)) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-03-16T04:19:29.747

是的。您使用以下命令转义换行符`\`：

```
VARIABLE="\
THIS IS A VERY LONG\
TEXT STRING IN A MAKE VARIABLE" 
```

### 更新

啊，你想要换行符吗？那么不，我认为香草制作中没有任何方法。但是，您始终可以在命令部分使用 here-document

**[这不起作用，请参阅 MadScientist 的评论]**

```
foo:
    echo <<EOF
    Here is a multiple line text
    with embedded newlines.
    EOF 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-05-18T05:50:35.480

与 OP 不完全相关，但希望这对将来的人有所帮助。（因为这个问题是谷歌搜索中出现最多的问题）。

在我的 Makefile 中，我想将文件的内容传递给 docker build 命令，经过一番惊愕后，我决定：

```
 base64 encode the contents in the Makefile (so that I could have a single line and pass them as a docker build arg...)
 base64 decode the contents in the Dockerfile (and write them to a file) 
```

请参见下面的示例。

注意：在我的特殊情况下，我想在映像构建期间传递一个 ssh 密钥，使用来自[https://vsupalov.com/build-docker-image-clone-private-repo-ssh-key/](https://vsupalov.com/build-docker-image-clone-private-repo-ssh-key/)的示例（使用一个多阶段的 docker 构建来克隆一个 git repo，然后在构建的第二阶段从最终图像中删除 ssh 密钥）

## 生成文件

```
...
MY_VAR_ENCODED=$(shell cat /path/to/my/file | base64)

my-build:
    @docker build \
      --build-arg MY_VAR_ENCODED="$(MY_VAR_ENCODED)" \
      --no-cache \
      -t my-docker:build .
... 
```

## Dockerfile

```
...
ARG MY_VAR_ENCODED

RUN mkdir /root/.ssh/  && \
    echo "${MY_VAR_ENCODED}" | base64 -d >  /path/to/my/file/in/container
... 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-03-16T06:43:30.273

为什么不使用字符串中的 \n 字符来定义行尾？还要添加额外的反斜杠以将其添加到多行。

```
ANNOUNCE_BODY=" \n\
Version $(VERSION) of $(PACKAGE_NAME) has been released \n\
\n\
It can be downloaded from $(DOWNLOAD_URL) \n\
\n\
etc, etc" 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2011-03-23T15:34:14.560

只是 Eric Melski 回答的附言：您可以在文本中包含命令的输出，但您必须使用 Makefile 语法“$(shell foo)”而不是 shell 语法“$(foo)”。例如：

```
define ANNOUNCE_BODY  
As of $(shell date), version $(VERSION) of $(PACKAGE_NAME) has been released.  

It can be downloaded from $(DOWNLOAD_URL).  

endef 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-06-09T10:46:52.270

您应该使用“define/endef” Make 构造：

```
define ANNOUNCE_BODY
Version $(VERSION) of $(PACKAGE_NAME) has been released.

It can be downloaded from $(DOWNLOAD_URL).

etc, etc.
endef 
```

然后你应该将此变量的值传递给 shell 命令。但是，如果您使用 Make 变量替换来执行此操作，则会导致命令拆分为多个：

```
ANNOUNCE.txt:
  echo $(ANNOUNCE_BODY) > $@               # doesn't work 
```

引用也无济于事。

传递值的最佳方法是通过环境变量传递它：

```
ANNOUNCE.txt: export ANNOUNCE_BODY:=$(ANNOUNCE_BODY)
ANNOUNCE.txt:
  echo "$${ANNOUNCE_BODY}" > $@ 
```

注意：

1.  为这个特定的目标导出变量，这样你就可以重用那个环境，不会受到太大的污染；
2.  使用环境变量（变量名周围的双引号和大括号）；
3.  在变量周围使用引号。没有它们，换行符将丢失，所有文本都将出现在一行上。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-02-13T12:26:20.733

使用 GNU Make 3.82 及更高版本，[`.ONESHELL`](https://www.gnu.org/software/make/manual/html_node/One-Shell)当涉及到多行 shell 片段时，选项是您的朋友。综合其他答案的提示，我得到：

```
VERSION = 1.2.3
PACKAGE_NAME = foo-bar
DOWNLOAD_URL = $(PACKAGE_NAME).somewhere.net

define nwln

endef

define ANNOUNCE_BODY
Version $(VERSION) of $(PACKAGE_NAME) has been released.

It can be downloaded from $(DOWNLOAD_URL).

etc, etc.
endef

.ONESHELL:

# mind the *leading* <tab> character
version:
    @printf "$(subst $(nwln),\n,$(ANNOUNCE_BODY))" 
```

确保在将上述示例复制并粘贴到您的编辑器时，`<tab>`保留所有字符，否则`version`目标将中断！

请注意，这`.ONESHELL`将导致 Makefile 中的所有目标对其所有命令使用单个 shell。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2014-10-10T21:11:37.250

这并没有给出此处的文档，但它确实以适合管道的方式显示多行消息。

=====

```
MSG = this is a\\n\
multi-line\\n\
message

method1:
     @$(SHELL) -c "echo '$(MSG)'" | sed -e 's/^ //' 
```

=====

您还可以使用 Gnu 的可调用宏：

=====

```
MSG = this is a\\n\
multi-line\\n\
message

method1:
        @echo "Method 1:"
        @$(SHELL) -c "echo '$(MSG)'" | sed -e 's/^ //'
        @echo "---"

SHOW = $(SHELL) -c "echo '$1'" | sed -e 's/^ //'

method2:
        @echo "Method 2:"
        @$(call SHOW,$(MSG))
        @echo "---" 
```

=====

这是输出：

=====

```
$ make method1 method2
Method 1:
this is a
multi-line
message
---
Method 2:
this is a
multi-line
message
---
$ 
```

=====

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-03-16T06:05:45.653

[GNU `make' 手册，6.8：定义多行变量](http://www.gnu.org/software/make/manual/make.html#Multi_002dLine)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-11-14T05:22:18.583

本着 .ONESHELL 的精神，在 .ONESHELL 挑战环境中可以非常接近：

```
define _oneshell_newline_

endef

define oneshell
@eval "$$(printf '%s\n' '$(strip                            \
                         $(subst $(_oneshell_newline_),\n,  \
                         $(subst \,\/,                      \
                         $(subst /,//,                      \
                         $(subst ','"'"',$(1))))))' |       \
          sed -e 's,\\n,\n,g' -e 's,\\/,\\,g' -e 's,//,/,g')"
endef 
```

使用示例如下：

```
define TEST
printf '>\n%s\n' "Hello
World\n/$$$$/"
endef

all:
        $(call oneshell,$(TEST)) 
```

这显示了输出（假设 pid 27801）：

```
>
Hello
World\n/27801/ 
```

这种方法确实允许一些额外的功能：

```
define oneshell
@eval "set -eux ; $$(printf '%s\n' '$(strip                            \
                                    $(subst $(_oneshell_newline_),\n,  \
                                    $(subst \,\/,                      \
                                    $(subst /,//,                      \
                                    $(subst ','"'"',$(1))))))' |       \
                     sed -e 's,\\n,\n,g' -e 's,\\/,\\,g' -e 's,//,/,g')"
endef 
```

这些 shell 选项将：

*   在执行时打印每个命令
*   在第一个失败的命令上退出
*   将使用未定义的 shell 变量视为错误

其他有趣的可能性可能会自我暗示。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-05-28T17:10:11.680

我最喜欢alhadis的回答。但要保持列格式，再添加一件事。

```
SYNOPSIS := :: Synopsis: Makefile\
| ::\
| :: Usage:\
| ::    make .......... : generates this message\
| ::    make synopsis . : generates this message\
| ::    make clean .... : eliminate unwanted intermediates and targets\
| ::    make all ...... : compile entire system from ground-up\
endef 
```

输出：

```
:: Synopsis: Makefile 
:: 
:: Usage: 
:: make .......... : generates this message 
:: make synopsis . : generates this message 
:: make clean .... : eliminate unwanted intermediates and targets 
:: make all ...... : compile entire system from ground-up 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-03-16T06:29:25.690

这不是一个真正有用的答案，而只是表明“定义”不像 Ax 回答的那样起作用（不适合评论）：

```
VERSION=4.3.1
PACKAGE_NAME=foobar
DOWNLOAD_URL=www.foobar.com

define ANNOUNCE_BODY
    Version $(VERSION) of $(PACKAGE_NAME) has been released
    It can be downloaded from $(DOWNLOAD_URL)
    etc, etc
endef

all:
    @echo $(ANNOUNCE_BODY) 
```

它给出了找不到命令“It”的错误，因此它尝试将 ANNOUNCE BODY 的第二行解释为命令。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2010-01-28T11:25:54.330

它对我有用：

```
ANNOUNCE_BODY="first line\\nsecond line"

all:
    @echo -e $(ANNOUNCE_BODY) 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2011-07-21T15:31:47.740

GNU Makefile 可以做以下事情。这很丑陋，我不会说你应该这样做，但我在某些情况下会这样做。

```
PROFILE = \
\#!/bin/sh.exe\n\
\#\n\
\# A MinGW equivalent for .bash_profile on Linux.  In MinGW/MSYS, the file\n\
\# is actually named .profile, not .bash_profile.\n\
\#\n\
\# Get the aliases and functions\n\
\#\n\
if [ -f \$${HOME}/.bashrc ]\n\
then\n\
  . \$${HOME}/.bashrc\n\
fi\n\
\n\
export CVS_RSH="ssh"\n  
#
.profile:
        echo -e "$(PROFILE)" | sed -e 's/^[ ]//' >.profile 
```

`make .profile`如果不存在，则创建一个 .profile 文件。

此解决方案用于应用程序仅在 POSIX shell 环境中使用 GNU Makefile 的情况。该项目不是平台兼容性问题的开源项目。

目标是创建一个便于设置和使用特定类型工作空间的 Makefile。Makefile 带来了各种简单的资源，而不需要其他特殊存档等。从某种意义上说，它是一个 shell 存档。然后，程序可以说将这个 Makefile 放到要工作的文件夹中。设置您的工作区 enter `make workspace`，然后执行 blah 、 enter`make blah`等。

可能会变得棘手的是弄清楚要引用什么。以上完成了这项工作，并且接近在 Makefile 中指定 here 文档的想法。对于一般用途来说，这是否是一个好主意是另一个问题。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2012-04-26T13:39:40.390

我相信跨平台使用最安全的答案是每行使用一个回显：

```
 ANNOUNCE.txt:
    rm -f $@
    echo "Version $(VERSION) of $(PACKAGE_NAME) has been released" > $@
    echo "" >> $@
    echo "It can be downloaded from $(DOWNLOAD_URL)" >> $@
    echo >> $@
    echo etc, etc" >> $@ 
```

这避免了对可用的 echo 版本做出任何假设。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-10-03T06:06:13.870

使用[字符串替换](https://www.gnu.org/software/make/manual/make.html#Text-Functions)：

```
VERSION := 1.1.1
PACKAGE_NAME := Foo Bar
DOWNLOAD_URL := https://go.get/some/thing.tar.gz

ANNOUNCE_BODY := Version $(VERSION) of $(PACKAGE_NAME) has been released. \
    | \
    | It can be downloaded from $(DOWNLOAD_URL) \
    | \
    | etc, etc 
```

然后在你的食谱中，放

```
 @echo $(subst | ,$$'\n',$(ANNOUNCE_BODY)) 
```

这是有效的，因为 Make 替换了所有出现的`| `（注意空格）并将其替换为换行符 ( `$$'\n'`)。您可以将等效的 shell 脚本调用视为如下所示：

**前：**

```
$ echo "Version 1.1.1 of Foo Bar has been released. | | It can be downloaded from https://go.get/some/thing.tar.gz | | etc, etc" 
```

**后：**

```
$ echo "Version 1.1.1 of Foo Bar has been released.
>
> It can be downloaded from https://go.get/some/thing.tar.gz
> 
> etc, etc" 
```

我不确定`$'\n'`在非 POSIX 系统上是否可用，但如果您可以访问单个换行符（即使通过从外部文件读取字符串），基本原理是相同的。

如果你有很多这样的消息，你可以使用[宏](https://www.gnu.org/software/make/manual/make.html#Call-Function)来减少噪音：

```
print = $(subst | ,$$'\n',$(1)) 
```

你会像这样调用它：

```
@$(call print,$(ANNOUNCE_BODY)) 
```

希望这可以帮助某人。=)

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2018-04-29T15:21:38.153

作为替代方案，您可以使用 printf 命令。这在 OSX 或其他功能较少的平台上很有帮助。

要简单地输出多行消息：

```
all:
        @printf '%s\n' \
            'Version $(VERSION) has been released' \
            '' \
            'You can download from URL $(URL)' 
```

如果您尝试将字符串作为 arg 传递给另一个程序，您可以这样做：

```
all:
        /some/command "`printf '%s\n' 'Version $(VERSION) has been released' '' 'You can download from URL $(URL)'`" 
```

# c# - Flickr API 密钥存储

> ID：649252
> 
> 赞同：4
> 
> 时间：2009-03-16T04:17:57.223
> 
> 标签：c#, .net, flickr, api-key

我有一个 C# 应用程序，我想使用[Flickr 的 API](http://www.flickr.com/services/api/)。我收到了我的 API 密钥和共享密钥，但在收到密钥时，它明确提到不提供我们提供的 API 密钥。

由于该应用程序是开源的，并且可以使用 Reflector 轻松查看，因此我认为将其存储为字符串并不安全。

我可以使用对称密钥对其进行加密，但这只是混淆了它，因为密钥的密码将在代码中提供。

我的问题是，从 Flickr 保护 API 密钥真的有必要吗？如果是这样，是否有任何建议可以正确保护密钥？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-16T05:51:23.630

我同意随机开发人员的第三方密钥一文不值。我在我的第三方库中使用 Flickr API 密钥并将其存储为字符串。如果 Flickr 自己的 API 密钥被其他用途弄脏了，那将是值得的，但是想要获得任何 API 密钥的人可以查看其他人的开源项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-19T01:55:20.403

我为此使用了散列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-16T05:45:57.590

您可以在此处查看有关此主题的简短讨论：

[http://discussions.apple.com/message.jspa?messageID=7247830](http://discussions.apple.com/message.jspa?messageID=7247830)

# time - 如何在极限编程中管理时间？

> ID：649253
> 
> 赞同：0
> 
> 时间：2009-03-16T04:18:14.600
> 
> 标签：time, extreme-programming

我正在监视一场比赛，其中每个冲刺都安排为一小时间隔。每个团队成员都应该在屏幕上有一个倒计时时钟，最好是在终端上。时钟应在 45 分钟、55 分钟和 60 分钟后发出警报。

环境应该创造一种极端编程的感觉。是否有一些现成的终端应用程序可以完成这项工作？

**[澄清]**团队使用的是 Ubuntu 和 Mac。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-16T04:26:46.967

好的，我的第一个问题是“天哪，为什么？” 你怎么能在一个小时内完成冲刺。

但是话虽如此——我想是一些课堂会议或其他东西——有很多这样的应用程序；提及操作系统可能有助于缩小范围。

在 Mac 上，我喜欢使用*Miniteur*。

在 UNIX 系统上，它是一个简单的 shell 脚本（此处为 bash 语法）：

```
sleep $((45*60)) && echo "Forty five minutes"
sleep $((10*60)) && echo "FIVE MINUTES LEFT"
sleep $((5*60)) &&  echo 'TIME IS UP!' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-16T05:11:13.007

“……环境应该营造一种极限编程的感觉……”，我觉得这种环境会产生一种极度压力的感觉，我们这里不是在炒汉堡，我们是在做一些有创意的事情，让你的团队休息一下如果他们需要知道现在几点，以及每小时还剩多少时间，他们会使用手表。

顺便说一句，这种方法已经尝试过了吗？如果是这样，它起作用了吗？团队是怎么想的？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-08-05T08:51:57.720

# 哇

在考虑 1 小时的冲刺/迭代时，我真的很喜欢一件事。如果我想到 sprint 的疯狂步伐，我脑海中蹦出的第一件事（在这么短的时间内真正完成任何事情）就是结**对编程**，甚至是**团队开发**。XP的精髓。

这让我思考。**sprint 越短，您就越开始使用 XP 范例。**您开始在团队中进行快速头脑风暴，配对程序代码（最快的编码人员会这样做）并进行大量沟通。完美的 XP。

尽管在现实生活中，这种短时间的冲刺是让你的团队很快筋疲力尽的杀手。但是你可以通过思考它学到很多东西。并采用自然冲刺长度（1周）的结果。

# cocoa - 您将 NSDocument 子类的清理代码放在哪里？

> ID：649258
> 
> 赞同：8
> 
> 时间：2009-03-16T04:20:00.760
> 
> 标签：cocoa, macos, nsdocument, document-based

我有一个基于文档的应用程序，我已经分类`NSDocument`并提供了所需的方法，但是我的文档需要进行一些广泛的清理（需要运行外部任务等）。把这个放在哪里最好？我尝试了几种不同的方法，例如：

*   `close`
*   `close:`
*   `canCloseDocumentWithDelegate:shouldCloseSelector:contextInfo`
*   `dealloc`

如果我把它放进去`dealloc`，有时它会被调用，而有时它不会（按 Command+Q 似乎绕过了我的文档的释放），但是必须在没有失败的情况下调用此代码（除非程序意外终止）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-16T04:58:21.230

让每个文档将自己添加为本地通知中心的观察者`NSApplicationWillTerminateNotification`。在它的通知方法中，调用它的清理方法（你也应该从`dealloc`or调用它`close`）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-17T18:41:46.187

这里的正确答案不适合我的用例，但问题确实如此。因此，额外的答案。

**我的用例：**关闭一个文档（可能是打开的几个文档之一）但不关闭应用程序。

在这种情况下（在撰写本文时，除非我只是在错误的地方寻找），[文档](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/nsdocument_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDocument/canCloseDocumentWithDelegate%3ashouldCloseSelector%3acontextInfo%3a)并没有它应有的帮助。

`canCloseDocumentWithDelegate:shouldCloseSelector:contextInfo:`我在我的 NSDocument 子类中添加了一个覆盖，并在其中调用了 super。文档没有说明您是否必须调用 super，但是一些日志记录表明系统提供了一个选择器和一个上下文。在文档关闭之前调用此方法。

```
- (void) canCloseDocumentWithDelegate:(id)delegate shouldCloseSelector:(SEL)shouldCloseSelector contextInfo:(void *)contextInfo;
{
    if ([self pdfController])
    {
        [[[self pdfController] window] close];
        [self setPdfController: nil];
    }

    [super canCloseDocumentWithDelegate:delegate shouldCloseSelector: shouldCloseSelector contextInfo: contextInfo];    
} 
```

[在CocoaBuilder](http://www.cocoabuilder.com/archive/cocoa/87293-how-does-canclosedocumentwithdelegate-work.html)上有一些关于这个方法的有用的讨论。如果这种方法有缺点或更好的方法，请发表评论。

# c# - 注入非原始类型而不将它们包装在 StructureMap 的接口中

> ID：649263
> 
> 赞同：1
> 
> 时间：2009-03-16T04:22:24.607
> 
> 标签：c#, inversion-of-control, structuremap

我有一个简单的 SM 注册表，我在其中配置所有 IDynamicValue 实例。我有一些非原始类型的构造函数参数（在我的例子中是 DateTime 和 Predicate Of T）。有没有一种方法可以注入这些而不必将它们包装在具有接口的类中（因此它们可以自动连接）。以下代码片段显示了我想要完成的任务：

```
ForRequestedType<IDynamicValue>().AddInstances(x =>
             {
                 x.OfConcreteType<DateTimeGenerator>().WithName("DateTime")
                     .WithCtorArg("keyName").EqualTo("DateTime")
                     .WithCtorArg("startDate").EqualTo(DateTime.Now.AddMonths(-1))
                     .WithCtorArg("minuteIntervalDelta").EqualTo(60);

             }); 
```

该示例运行但失败并出现以下异常：

StructureMap 异常代码：202 没有为 PluginFamily System.DateTime 定义默认实例

谢谢，尼克

**编辑：**

Freddy Rios 解决方案非常适合我的需要。如果我自动连接一些构造函数参数，我仍然很好奇是否有这样做的方法（因此不能使用 ConstructedBy()）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-16T06:42:46.390

如果您已经将所有参数传递给构造函数，则可以改用 ConstructedBy：

```
x.ConstructedBy(y => new DateTimeGenerator(
          "DateTime", DateTime.Now.AddMonths(-1), 60
         )
   ).WithName("DateTime"); 
```

# certificate - makecert 工具问题

> ID：649264
> 
> 赞同：0
> 
> 时间：2009-03-16T04:23:58.393
> 
> 标签：certificate, makecert

我对 makecert 工具中的以下概念感到困惑。特别是关于位置（-sr 参数）和存储（-ss 参数）的含义。[我从这个链接](http://msdn.microsoft.com/en-us/library/bfsktky3(VS.80).aspx)阅读并得到了我的困惑，我试图找到关于“位置”和“商店”含义的教程，但一无所获。有人可以帮忙澄清一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-06-09T17:54:00.980

我不确定它是否存在于 windows server 2003 中，但在 win XP 中，我使用 Microsoft 管理控制台查看 windows 商店中的所有可用证书。

在运行（从开始菜单）中键入“mmc”以打开 MS 管理控制台。
然后转到“文件”菜单并选择“添加/删除管理单元”。
按添加按钮，现在您可以选择用户、服务或计算机帐户之一。

当您这样做时，您将完全理解 -sr 和 -ss 选项之间的区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-16T04:35:00.457

这些是 Windows 如何定位证书存储的规范的一部分。`-sr` *location*参数告诉工具使用哪个证书存储：currentuser**为**用户存储它，或者**localmachine**为机器上的每个人存储它。该`-ss`参数让您为特定商店命名，例如，您可以拥有

```
-sr currentuser -ss moe
-sr localmachine -ss moe 
```

并且有两个不同的命名存储——一个用于当前用户，一个用于机器——或者有

```
-sr currentuser -ss moe
-sr currentuser -ss curly 
```

并为当前用户提供两个不同的商店。

# php - 使用 ”？” 在 SVG 中

> ID：649270
> 
> 赞同：1
> 
> 时间：2009-03-16T04:32:14.753
> 
> 标签：php, get, svg, href

我在尝试获得“？”时遇到了一些重大问题。在我的 SVG 脚本中的 href 中。我想从我的 SVG 内部链接到我网站的其他部分，并且我的大多数页面都是动态的，需要 $_GET 变量来动态创建它们。每次我尝试在 href 中包含问号时，SVG 似乎都会抛出一个问题，但我需要这样做才能传递 $_GET 变量......还有其他方法吗？？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-16T06:24:33.457

您是否尝试用 ascii 代码替换它？? 与您必须将 & 替换为 & 的方式相同

# haskell - 当模式匹配失败时，为什么 Haskell 列表推导不会导致错误？

> ID：649274
> 
> 赞同：20
> 
> 时间：2009-03-16T04:34:10.913
> 
> 标签：haskell, pattern-matching, list-comprehension

我试图了解 Haskell 列表理解在模式匹配方面是如何“在幕后”工作的。以下 ghci 输出说明了我的观点：

```
Prelude> let myList = [Just 1, Just 2, Nothing, Just 3]
Prelude> let xs = [x | Just x <- myList]
Prelude> xs
[1,2,3]
Prelude> 
```

如您所见，它能够跳过“Nothing”并仅选择“Just”值。我知道 List 是一个单子，定义为（来自 Real World Haskell，第 14 章）：

```
instance Monad [] where
    return x = [x]
    xs >>= f = concat (map f xs)
    xs >> f = concat (map (\_ -> f) xs)
    fail _ = [] 
```

因此，列表推导基本上为列表推导中选择的每个元素构建一个单例列表并将它们连接起来。如果模式匹配在某个步骤失败，则使用“失败”函数的结果。换句话说，“Just x”模式不匹配，因此 [] 用作占位符，直到调用 'concat'。这就解释了为什么“无”似乎被跳过了。

我不明白的是，Haskell 怎么知道调用“失败”函数？它是“编译器魔法”，还是您可以在 Haskell 中自己编写的功能？是否可以编写以下“选择”函数以与列表理解相同的方式工作？

```
select :: (a -> b) -> [a] -> [b]
select (Just x -> x) myList       -- how to prevent the lambda from raising an error?
[1,2,3] 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2009-03-17T06:27:24.470

虽然 Haskell 的实现可能不会在内部直接这样做，但以这种方式考虑它是有帮助的 :)

```
[x | Just x <- myList] 
```

...变成：

```
do
    Just x <- myList
    return x 
```

...这是：

```
myList >>= \(Just x) -> return x 
```

至于你的问题：

> 我不明白的是，Haskell 怎么知道调用“失败”函数？

在 do-notation 中，如果模式绑定失败（即`Just x`），则调用 fail 方法。对于上面的示例，它看起来像这样：

```
myList >>= \temp -> case temp of
    (Just x) -> return x
    _        -> fail "..." 
```

因此，每次您在可能失败的一元上下文中进行模式匹配时，Haskell 都会插入对`fail`. 用 IO 试试看：

```
main = do
    (1,x) <- return (0,2)
    print x -- x would be 2, but the pattern match fails 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-03-16T14:30:46.720

[对列表推导进行脱糖](http://haskell.org/onlinereport/exps.html#list-comprehensions)的规则需要以下形式的表达式`[ e | p <- l ]`（其中`e`是表达式、`p`模式和`l`列表表达式）的行为类似于

```
let ok p = [e]
    ok _ = []
in concatMap ok l 
```

以前版本的 Haskell 有[monad comprehensions](http://homepages.inf.ed.ac.uk/wadler/papers/monads/monads.ps)，它们从语言中被删除，因为它们难以阅读并且与`do`-notation 冗余。（列表推导也是多余的，但它们并不难阅读。）我*认为*脱糖`[ e | p <- l ]`作为一个*单子*（或者，准确地说，作为一个*带有零的单子*）会产生类似的东西

```
let ok p = return e
    ok _ = mzero
in l >>= ok 
```

从哪里来。`mzero`_ `MonadPlus`这非常接近

```
do { p <- l; return e } 
```

哪个[脱](http://haskell.org/onlinereport/exps.html#do-expressions)糖

```
let ok p = return e
    ok _ = fail "..."
in l >>= ok 
```

当我们取 List Monad 时，我们有

```
return e = [e]
mzero = fail _ = []
(>>=) = flip concatMap 
```

即，这 3 种方法（列表推导、单子推导、`do`表达式）对于列表是等价的。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-03-16T08:35:27.557

我认为列表理解语法与 List ( `[]`) 或`Maybe`就此而言恰好是`Monad`类型类的一个实例这一事实没有太大关系。

列表推导确实是*编译器的魔法*或*语法糖*，但这是可能的，因为编译器知道`[]`数据类型的结构。

以下是列表理解的编译结果：（好吧，我想，我实际上并没有根据 GHC 检查它）

```
xs = let f = \xs -> case xs of
                      Just x -> [x]
                      _      -> []
     in concatMap f myList 
```

如您所见，编译器不必调用该`fail`函数，它可以简单地内联一个空列表，因为它知道列表*是*什么。

* * *

有趣的是，列表推导语法“跳过”模式匹配失败这一事实在一些库中用于进行泛型编程。请参见[Uniplate 库](http://www.haskell.org/haskellwiki/Uniplate)中的示例。

* * *

**编辑：**哦，为了回答你的问题，你不能`select`用你给它的 lambda 调用你的函数。`Nothing`如果你用一个值调用它，它确实会在模式匹配失败时失败。

您可以将`f`上面代码中的函数传递给它，但`select`类型如下：

```
select :: (a -> [b]) -> [a] -> [b] 
```

很好，您可以在`concatMap`内部使用该功能:-)

此外，该 new`select`现在具有列表的一元绑定运算符的类型（其参数翻转）：

```
(>>=) :: [a] -> (a -> [b]) -> [b]
xs >>= f = concatMap f xs -- 'or as you said: concat (map f xs) 
```

# project-management - 开始一个新项目，知识管理的理想方式？

> ID：649278
> 
> 赞同：1
> 
> 时间：2009-03-16T04:35:43.513
> 
> 标签：project-management, knowledge-management

我们正在从头开始实施电子商务解决方案，并已决定要使用的框架。将会有一些人加入该项目，他们从未真正有过在这个框架上工作的经验。我们应该如何进行知识管理/转移？我们还需要为哪些其他挑战做好准备？如何应对？我可以考虑用最常用的内容创建一个 WIKI 并解决最常见的障碍……这是个好主意吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-16T04:41:10.973

词汇表会有很长的路要走。确保您和您的团队在交谈时使用词汇表。如果你没有正确使用它们，那么为事物指定特定的词是没有意义的。每天站立会议应该有助于解决您遇到的任何障碍。确保您的团队拥有尽可能高的带宽通信，但也允许人们可以集中精力的安静时间。也许有前15分钟。每小时的时间是人们可以互相走近并提出问题等的时间。然后其他 45 分钟是静默时间。重新评估这一点以获得每个人都适合的平衡。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-16T04:54:37.713

我赞同 wiki 的建议——我们已经取得了很大的成功，使用它为我们的项目建立了知识库和词汇表。

对我们来说效果很好的另一种技术是创建一个临时存储库（例如 SVN、Git 等），以达到技术加速峰值的目的。我们目前正在开发一个利用 Spring 的 OSGi 支持的企业级项目，并且我们创建了几个尖峰项目来探索该技术的不同方面。这有助于我们在被业务需求所困扰之前掌握技术。

至于要为哪些挑战做好准备？期待意外。任何时候你开始使用新的框架/技术，你都会遇到障碍，你的初始速度会受到影响。我最好的建议 - 简单的决心。不要在暴风雨天气的第一个迹象时放弃你的框架。解决问题。最终，您将清除大部分障碍，并且随着整个团队对技术更加熟悉，您的速度将呈指数级增长。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-16T04:42:28.833

我认为这是 wiki 的理想情况。让开发人员选择使用哪个 wiki，因为他们将使用它！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-16T05:06:47.137

有这个线程：

[http://discuss.joelonsoftware.com/default.asp?biz.5.738060.3](http://discuss.joelonsoftware.com/default.asp?biz.5.738060.3)

您可能会考虑使用 Alfresco.com 的内容管理开源解决方案。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-16T05:07:29.460

我认为 Wiki 是个好主意，但也无法替代真实的代码。为此，一个单一函数的高质量（参考）实现，它显示了代码堆栈中的所有层，即从浏览器/表单到数据库并再次返回。

# data-structures - 适合实现记事本等编辑器的最佳数据结构是什么？

> ID：649279
> 
> 赞同：14
> 
> 时间：2009-03-16T04:37:31.340
> 
> 标签：data-structures, text-editor

在记事本等编辑器的实现中使用了哪种数据结构。这种数据结构应该是可扩展的，并且应该支持编辑、删除、滚动、选择文本范围等各种功能？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-16T05:58:37.730

我们为一台旧机器编写了一个编辑器（请记住，这是不久前，大约 1986 年，所以这是凭记忆，从那时起，最先进的技术可能已经有所进步）我们设法让它尖叫起来，性能方面，通过使用自管理池中的固定内存块。

它有两个池，每个池包含固定数量的特定大小的块（一个池用于线结构，另一个用于线段结构）。它基本上是一个链表的链表。

`malloc()`内存是从类似“ ”的调用中预先分配的（针对每个区域） ，我们使用了 65,535 个块（包括 0 到 65,534，块号 65,535 被认为是空块，一个列表结束指示符）。

这允许每个 65、535 行（填充版本为 384K 或 512K）和大约 1.6G 的文件大小（占用 2G 的分配空间），这在当时是相当大的。那是*理论上*的文件大小限制——我认为我们实际上从未接近过，因为我们从未分配过完整的线段结构集。

不必调用`malloc()`每一小块内存给我们带来了巨大的速度提升，特别是因为我们可以为固定大小的块优化我们自己的内存分配例程（包括在最终优化版本中内联调用）。

两个池中的结构如下，每行为一个字节）：

```
`Line structure (6/8 bytes)     Line-segment structure (32 bytes)
+--------+                     +--------+
|NNNNNNNN|                     |nnnnnnnn|
|NNNNNNNN|                     |nnnnnnnn|
|PPPPPPPP|                     |pppppppp|
|PPPPPPPP|                     |pppppppp|
|bbbbbbbb|                     |LLLLLLLL|
|bbbbbbbb|                     |LLLLLLLL|
|........|                     |xxxxxxxx|
|........|                     :25 more :
+--------+                     : x lines:
                               +--------+` 
```

`在哪里：`

 `*   其他小写字母`x`指向线段池。
*   大写字母指向行池。
*   `N`是下一行的块号（null 表示这是文件中的最后一行）。
*   `P`上一行的块号（null 表示这是文件中的第一行）。
*   `b`是该行中第一条线段的块号（null 表示该行为空）。
*   `.`保留填充（将结构增加到 8 个字节）。
*   `n`是下一条线段的块号（null 表示这是该线中的最后一段）。
*   `p`是前一条线段的块号（null 表示这是该线的第一段）。
*   `L`是段的行块的块号。
*   `x`是该线段中的 26 个字符。

填充线结构的原因是为了加快块号到实际内存位置的转换（在该特定架构中，左移 3 位比乘以 6 快得多，并且使用的额外内存仅为 128K，与总内存相比是最小的使用的存储空间）虽然我们确实为那些更关心内存的人提供了较慢的版本。

我们还有一个包含 100 个 16 位值的数组，其中包含大致该百分比的线段（和行号，以便我们可以快速转到特定的行）（因此数组 [7] 是大约 7% 进入文件）和两个空闲指针来维护每个池中的空闲列表（这是一个非常简单的单向列表，其中`N`或`n`在结构中指示下一个空闲块，空闲块从这些列表的前面分配并放回）。

由于 0 字节在文件中无效，因此无需对每个行段中的字符进行计数。每个线段的末尾都允许有 0 字节，这些字节完全被忽略。每当它们被修改时，线就会被压缩（即，线段被合并）。这使块使用率保持在较低水平（没有不频繁且冗长的垃圾收集），并且还大大加快了搜索和替换操作。

使用这些结构可以*非常*快速地编辑、插入、删除、搜索和导航文本，这是您在简单的文本编辑器中可能遇到的大部分性能问题。

选择的使用（我们没有实现它，因为它是一个文本模式编辑器，使用类似 vi 的命令，例如`3d`删除 3 行或`6x`删除 6 个字符）可以通过使用`{line#/block, char-pos}`元组来标记文本中的位置来实现，并使用其中两个元组作为选择范围。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-16T04:43:03.513

检查[绳索](http://en.wikipedia.org/wiki/Rope_(computer_science))。处理字符串的快速插入/删除/编辑。范围通常在 Rope 实现中得到支持，并且滚动可以通过在绳子中的倒排索引来完成。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-03-24T13:40:57.083

维基百科说许多编辑使用[Gap Buffer](http://en.wikipedia.org/wiki/Gap_buffer)。它基本上是一个中间有一个未使用空间的数组。光标位于间隙之前，因此光标处的删除和插入是 O(1)。它应该很容易实现。

查看 Notepad++ 的源代码（正如 Chris Ballance 在此线程中所建议的那样[）](https://stackoverflow.com/questions/649279/what-is-best-data-structure-suitable-to-implement-editor-like-notepad/649281#649281)表明它们也使用了间隙缓冲区。你可以从中得到一些实现的想法。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-13T14:16:49.063

[HexEdit](http://www.catch22.net/software)的作者 James Brown有一篇关于[Piece Chains](http://www.catch22.net/tuts/neatpad/17)的优秀文章。

简而言之：片段链允许您记录对文本所做的更改。加载后，您有一个跨越整个文本的片段链。现在你在中间的某个地方插入。

您无需分配新缓冲区、复制文本等，而是创建两个新片段并修改现有片段：现有片段现在包含直到插入点的文本（即您只需更改片段的长度），然后你有一个包含新文本的片段，然后是一个包含插入后所有文本的新片段。原文保持不变。

对于撤消/重做，您只需记住您添加/删除/更改的部分。

使用片段链时最复杂的区域是可见文本中的偏移量和内存结构之间不再存在 1:1 映射。您要么必须搜索链，要么必须维护某种二叉树结构。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-16T04:38:32.273

查看Notepad++的实现，可以在[SourceForge上查看源码](http://sourceforge.net/projects/notepad-plus/)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-03-16T04:46:07.483

通常的事情是有一个列表或字符数组的数组。多年来在这方面做了很多工作：你可以看看[这个谷歌搜索](http://www.google.com/search?client=safari&rls=en-us&q=editor+list+of+lines+data+structure&ie=UTF-8&oe=UTF-8)。

# sql-server - SQL 服务器“心跳”检查的最低权限？

> ID：649280
> 
> 赞同：2
> 
> 时间：2009-03-16T04:37:50.793
> 
> 标签：sql-server

我们正在开发一个应用程序来对我们所有的 SQL 服务器（2000、2005 和 2008）进行“心跳”测试，并且我们正在尝试找出 SQL 服务器上执行此操作所需的最低权限。（涉及的平台待定，但应使用标准连接字符串）。

我们正在考虑使用“SELECT @@VERSION”查询，这应该是确定 sql 服务器已启动并运行并响应请求所必需的全部内容。

使用连接字符串简单地连接到服务器所需的最低 SQL 权限是多少？（如果可能的话，我们甚至不想提供 DataReader）这些最低权限是否允许我进行上述查询？有没有更好/更标准的技术来做到这一点？SQL 2000、2005 和 2008 的行为会有所不同吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-16T05:44:53.380

只需创建监控代码使用的登录名。在 SQL Server 2005 和 2008 上，您还需要`GRANT CONNECT SQL TO (login)`，否则相同。

不需要其他权利`SELECT @@VERSION`。您提到的`db_datareader`是在数据库中，而不是在服务器级别。

SQLPing 将检测安装但并不总是告诉您它是否正在运行。

什么时候执行 run `SELECT @@VERSION`，请确保打开并断开连接。即使 SQL Servr 不接受新连接，保持打开的连接仍可能有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-16T05:26:57.103

考虑[SQLPing](http://searchsqlserver.techtarget.com/downloadPage/0,295339,sid87_gci1135136,00.html)。

引用：“SQLPing 可用于发现有关 SQL Server 2000 安装连接的详细信息，无需任何类型的身份验证。”

或者 google 自己进行 SQLPing。我见过其他几个同名的实用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-16T05:41:17.927

所需的只是对 tempdb 数据库的权限。该数据库保证存在于所有服务器和所有版本中。

这也将确保满足审计要求，因为您不必为心跳检查授予对任何其他数据库的访问权限。

# google-app-engine - Google App Engine 数据存储区中模型类的 get_by_id 方法

> ID：649284
> 
> 赞同：6
> 
> 时间：2009-03-16T04:41:19.320
> 
> 标签：google-app-engine, google-cloud-datastore

我无法了解如何使用 get_by_id 从 Google App Engine Datastore 获取对象。这是模型

```
from google.appengine.ext import db

class Address(db.Model):
  description = db.StringProperty(multiline=True)
  latitude = db.FloatProperty()
  longitdue = db.FloatProperty()
  date = db.DateTimeProperty(auto_now_add=True) 
```

我可以使用 gql 创建、放置和检索它们。

```
address = Address()
address.description = self.request.get('name')
address.latitude = float(self.request.get('latitude'))
address.longitude = float(self.request.get('longitude'))
address.put() 
```

保存的地址具有以下值

```
>> address.key()
aglndWVzdGJvb2tyDQsSB0FkZHJlc3MYDQw
>> address.key().id()
14 
```

我可以用钥匙找到他们

```
from google.appengine.ext import db
address = db.get('aglndWVzdGJvb2tyDQsSB0FkZHJlc3MYDQw') 
```

但无法通过 id 找到它们

```
>> from google.appengine.ext import db
>> address = db.Model.get_by_id(14) 
```

地址是无，当我尝试

```
>> Address.get_by_id(14)
AttributeError: type object 'Address' has no attribute 'get_by_id' 
```

我如何通过 id 找到？

编辑：原来我是个白痴，并试图在一个名为 Address 的函数中找到一个地址模型。感谢您的回答，我已将布兰登标记为正确答案，因为他首先进入并证明它应该一切正常。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-03-16T05:45:36.950

我刚刚试了一下[`shell.appspot.com`](http://shell.appspot.com)，它似乎工作正常：

```
Google Apphosting/1.0
Python 2.5.2 (r252:60911, Feb 25 2009, 11:04:42) 
[GCC 4.1.0]

>>> class Address(db.Model):
  description = db.StringProperty(multiline=True)
  latitude = db.FloatProperty()
  longitdue = db.FloatProperty()
  date = db.DateTimeProperty(auto_now_add=True)

>>> addy = Address()
>>> addyput = addy.put()
>>> addyput.id()
136522L
>>> Address.get_by_id(136522)
<__main__.Address object at 0xa6b33ae3bf436250> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-16T11:24:15.887

应用程序的键是 (kind, id_or_name) 元组的列表 - 对于根实体，始终只有一个元素长。因此，单独的 ID 并不能识别实体 - 实体的类型也是必需的。当您调用 db.Model.get_by_id(x) 时，您正在请求具有键 (Model, x) 的实体。您想要的是调用 Address.get_by_id(x)，它使用键 (Address, x) 获取实体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-12-25T14:47:05.093

您应该在 get_by_id("here") 中使用长类型。Int 类型必须有错误信息。

# sockets - 套接字读取文件问题

> ID：649290
> 
> 赞同：1
> 
> 时间：2009-03-16T04:46:44.127
> 
> 标签：sockets

我们有一个使用 ReadFile 读取套接字的应用程序。在其中一种情况下，ReadFile 收到一个调用，说有 2 个字节要读取，但是当 ReadFile 尝试读取它时，它返回 bytesread 为 0。这是否意味着另一端的套接字已关闭？. 我的意思是这是否一定意味着当 ReadFile 读取 0 字节时另一端的套接字已关闭？. 或者它可能是一个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-16T05:05:18.467

当 ReadFile() 发现有两个字节要读取时，它会同时读取这两个字节并将它们从套接字中删除。如果发送方没有发送更多数据，下一次调用将显示没有可读取的内容。要确定是否发生错误，您必须检查 ReadFile() 的返回值。

# java - 如何将 lwjgl dll 与 launch4j 链接

> ID：649292
> 
> 赞同：2
> 
> 时间：2009-03-16T04:47:26.183
> 
> 标签：java, launch4j

我正在尝试使用 launch4j 将我的 jar 包装为 exe。但是我正在使用 lwjgl 库并且无法链接本机 dll。我的目录结构如下：

我有一个顶级目录，其中包含以下路径：top/lib/lwjgl/native/win32，其中包含我的 lwjgl dll。

还有一个 dist 目录包含我的 jar top/dist/myapp.jar

我可以使用以下命令从 dist 目录中的命令行运行我的程序：

java -ea -Djava.library.path=../lib/lwjgl/native/win32 -jar app.jar

它工作得很好。现在我使用命令行选项 -ea -Djava.library.path=../lib/lwjgl/native/win32 将我的 launch4j xml 文件定义为驻留在 dist 目录中

但是，当我尝试运行 exe 文件时，我得到一个不满意的链接错误。（意味着它找不到我的 lwjgl dll）。

我尝试过以多种不同的方式定义它。我将 changedir 定义为 ../ 并使用 -ea -Djava.library.path=lib/lwjgl/native/win32 以及尝试将我的 exe 移动到顶级目录并使用 /dist/app.jar 和 lib 路径似乎没有任何工作。

以前有没有人遇到过类似的问题？如何让 launch4j 识别我的 dll 路径？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-16T06:28:03.167

在launch4j 论坛上，这是与需要dll 的SWT 相关的问题。请参阅[this](http://sourceforge.net/forum/forum.php?thread_id=1489745&forum_id=332684)或[this](http://sourceforge.net/forum/forum.php?thread_id=1596083&forum_id=332684)或搜索其他人如何处理 SWT 问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-22T17:49:36.037

我通过将所有本机 (.ddl) 文件复制到游戏 exe 旁边的“顶部”目录来绕过这个问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2010-11-10T17:06:44.007

您是否尝试在构建 jar 时使用传递 d32 jvm 参数。

这是你的做法

[http://www.technimi.com/index.php?do=/group/java/forum/building-an-exe-using-launch4j-for-32-bit-jvm/](http://www.technimi.com/index.php?do=/group/java/forum/building-an-exe-using-launch4j-for-32-bit-jvm/)

# c# - 是否有可以处理自动属性的 Reflector 插件或其他工具？

> ID：649293
> 
> 赞同：2
> 
> 时间：2009-03-16T04:47:46.590
> 
> 标签：c#, c#-3.0, reflector, automatic-properties

反射器显示自动属性：

```
public string AddressLine1
{
    [CompilerGenerated]
    get
    {
        return this.<AddressLine1>k__BackingField;
    }
    [CompilerGenerated]
    set
    {
        this.<AddressLine1>k__BackingField = value;
    }
} 
```

是否有任何插件或其他工具可以将其转换为：

```
public string AddressLine1 { get; set; } 
```

我不相信这些加载项中的任何一个都支持上述内容：http: [//www.codeplex.com/reflectoraddins](http://www.codeplex.com/reflectoraddins)

如果您证明我错了，购买会很高兴。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-16T05:09:07.507

如果语言设置为 C# 并且优化设置为 .NET 3.5，则当前版本的 Reflector 在反汇编器中正确显示自动属性。如果优化设置为 .NET 2.0，它只会以这种方式显示自动属性。选择 View -> Options 并在 Disassembler options 页面上设置 Optimization 设置。

# c# - 有什么方法可以让实现 IEntity 和向下转换的类进行运算符 == 比较？

> ID：649297
> 
> 赞同：1
> 
> 时间：2009-03-16T04:51:02.260
> 
> 标签：c#, inheritance, operators, equals-operator

基本上这就是问题所在。我系统中的所有实体都由它们的类型和它们的`id`.

```
new Customer() { Id = 1} == new Customer() {Id = 1};
new Customer() { Id = 1} != new Customer() {Id = 2};
new Customer() { Id = 1} != new Product() {Id = 1}; 
```

很标准的场景。由于所有实体都有一个 Id，我为所有实体定义了一个接口。

```
public interface IEntity {
  int Id { get; set;}
} 
```

为了简化我制作的实体的创建：

```
public abstract class BaseEntity<T> : where T : IEntity {
  int Id { get; set;}
  public static bool operator ==(BaseEntity<T> e1, BaseEntity<T> e2) {
    if (object.ReferenceEquals(null, e1)) return false;
      return e1.Equals(e2);
  }
  public static bool operator !=(BaseEntity<T> e1, BaseEntity<T> e2) { 
    return !(e1 == e2);
  }
} 
```

客户和产品类似于

```
public class Customer : BaseEntity<Customer>, IEntity {}
public class Product : BaseEntity<Product>, IEntity {} 
```

我认为这是笨拙的多莉。我认为我所要做的就是在每个实体中覆盖 Equals （如果我非常聪明，我什至可以在 中只覆盖它一次`BaseEntity`）以及所有工作。

所以现在我正在扩大我的测试范围，发现它并不那么简单！首先，当向下转换`IEntity`并使用覆盖时`==`，`BaseEntity<>`不使用。

那么解决方案是什么？还有什么我可以做的吗？如果没有，这很烦人。

**更新 1**我的测试似乎有问题 - 或者更确切地说是比较泛型。看一下这个：

```
[Test] public void when_created_manually_non_generic() {
    // PASSES!
    var e1 = new Terminal() {Id = 1};
    var e2 = new Terminal() {Id = 1};
    Assert.IsTrue(e1 == e2);
}
[Test] public void when_created_manually_generic() {
    // FAILS!
    GenericCompare(new Terminal() { Id = 1 }, new Terminal() { Id = 1 });
}
private void GenericCompare<T>(T e1, T e2) where T : class, IEntity {
    Assert.IsTrue(e1 == e2);            
} 
```

这里发生了什么？这不是我担心的那么大的问题，但仍然很烦人，并且语言的行为方式完全不直观。

**更新 2**啊，我明白了，`IEntity`出于某种原因，泛型隐式向下转换。我认为这对我的域的消费者来说是不直观且可能存在问题的，因为他们需要记住，泛型方法或类中发生的任何事情都需要与`Equals()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-16T05:15:43.387

好的，花了我一分钟......但这是你的问题。

你可能正在做这样的事情，对吧？

```
class Customer : BaseEntity<Customer>{}

class Product : BaseEntity<Product>{} 
```

看，问题在于`BaseEntity<Customer>`和`BaseEntity<Product>`是两个完全不同的类。使用模板，编译器会为每个模板类型生成一个新类。换句话说，编译器将踢出的是 BaseEntity_Customer 和 BaseEntity_Product 之类的东西。

真的，我认为您甚至根本不需要界面或模板，对吗？如果您只是将 ID 放在基类中，它会自动用于从 BaseEntity 派生的任何内容。如果您将其标记为抽象，则每个基类仍需要创建自己的实现......这看起来像是您正在尝试做的，但实际上会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-16T05:50:31.760

我认为更新与泛型比较的问题与静态方法和变量与实例方法和变量完全不同的事实有关。

我不知道 CLR 如何对待它们，但从概念上讲，它们几乎就像两个不同的类。因此，就像您无法访问 T 上的任何静态方法一样，不会应用 T 上的运算符。

这就是我对这个问题的理解。如果有人有它，我会喜欢更技术性的解释。

此外，至少在一方面，这个问题没有实际意义。如果 IEntity 是泛型参数 T 的值，编译器将不允许您使用 == 运算符比较 T 类型的两个实例。我相信这是因为我上面所说的。

但是，如果泛型参数的类型为 class、IEntity 或 IEntity 是实例参数，则问题仍然存在。例如

```
[Test]
public void are_equal_when_passed_as_parameters_downcast_to_interfaces() {
    //FAILS!
    CompareTwoEntities(new Terminal() { Id = 1 }, new Terminal() { Id = 1 });
}
private void CompareTwoEntities(IEntity e1, IEntity e2) {
    Assert.IsTrue(e1 == e2);
} 
```

# parsing - 解析儿童教育软件的基本数学方程式？

> ID：649298
> 
> 赞同：7
> 
> 时间：2009-03-16T04:52:56.890
> 
> 标签：parsing, math

受[最近一次 TED 演讲](http://www.ted.com/talks/david_merrill_demos_siftables_the_smart_blocks.html)的启发，我想写一个小的教育软件。研究人员创建了称为“ [Siftables](http://web.media.mit.edu/~dmerrill/siftables.html) ”的块状小型微型计算机。

[![替代文字](https://i.stack.imgur.com/8cgiE.jpg)](https://i.stack.imgur.com/8cgiE.jpg)
[（来源：[ted.com](http://images.ted.com/images/ted/tedindex/embed-posters/DavidMerrill-2009.embed_thumbnail.jpg)）]
*`[David Merril, inventor - with Siftables in the background.`]*

他在许多应用程序中使用了这些块，但我最喜欢的是每个块都是一个数字或基本操作符号。然后，您可以将数字块或操作符号重新排列成一行，它会在另一个可筛选的块上显示答案。

[![替代文字](https://i.stack.imgur.com/TvZ3o.png)](https://i.stack.imgur.com/TvZ3o.png)

因此，我决定在有限的范围内实施“Math Siftables”的软件版本，作为我正在参加的 CS 课程的最终项目。

**解析和解释一串数学表达式的普遍接受的方法是什么，如果它们有效，则执行操作？**

这是我应该实现完整的解析器/词法分析器的情况吗？我想解释基本的数学表达式将是计算机科学中的一个半常见问题，所以我正在寻找解决这个问题的正确方法。

例如，如果我的 Math Siftable 块的排列如下：

> `[1`] `[+`] `[2`]

这将是一个有效的序列，我将执行必要的操作以到达“3”。

但是，如果孩子将几个操作块拖在一起，例如：

> `[2`] `[\`] `[\`] `[5`]

这显然是无效的。

最终，我希望能够使用用户可以拖动的块来解析和解释任意数量的操作链。任何人都可以向我解释或指向我解析基本数学表达式的资源吗？

我希望尽可能多地使用与语言无关的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-16T05:08:56.477

你可以看看[调车场算法](http://en.wikipedia.org/wiki/Shunting_yard_algorithm)。链接的维基百科页面有大量信息和各种算法示例的链接。

基本上，给定一个中缀数学符号的表达式，它会返回一个 AST 或逆波兰符号，无论您的偏好是什么。

这个[页面](http://www.chris-j.co.uk/parsing.php)很不错。还有一些[关于](https://stackoverflow.com/questions/28256/equation-expression-parser-with-precedence) SO的[相关问题。](https://stackoverflow.com/questions/114586/smart-design-of-a-math-parser)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-16T05:11:15.457

在许多现代语言中，都有计算算术字符串表达式的方法。例如在 Python 中

```
>>> a = '1+3*3'     
>>> eval(a)         
10 
```

您可以使用异常处理来捕获无效语法。

[或者，您可以构建算术表达式树，在SO：Expression Trees for Dummies](https://stackoverflow.com/questions/623413/expression-trees-for-dummies/623432)中有一些示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-16T05:20:12.830

如上所述，我会将普通字符串（中缀表示法）转换为后缀表达式。

然后，给定后置表达式，很容易解析和评估表达式。例如，将操作数添加到堆栈中，当您找到运算符时，将值从堆栈中弹出并将它们应用到操作数上。如果您将其转换为后修复表达式的代码是正确的，则您不必担心操作顺序或类似的事情。

在这种情况下，大部分工作可能会在转换中完成。您可以将转换后的表单存储在列表或数组中以便于访问，因此您实际上也不需要再次解析每个值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-16T07:17:32.003

您说连续几个运算符无效。但是想想：

```
5 + -2 
```

这是完全有效的。

最基本的表达式语法是这样的：

```
Expression = Term | Expression, AddOp, Term
Term       = Factor | Term, MulOp, Factor
Factor     = Number | SignOp, Factor | '(', Expression, ')'

AddOp      = '+' | '-'
MulOp      = '*' | '/'
SignOp     = '+' | '-'

Number     = Digit | Number, Digit
Digit      = '0' | '1' | '2' | '3' | '4' | '5' | '6' | '7' | '8' | '9' 
```

我曾经写过一个简单的轻量级表达式解析器/求值器（字符串输入数字输出），它可以处理变量和函数。代码在 Delphi 中，但翻译起来应该不难。如果你有兴趣，我可以把源代码放到网上。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-07-29T01:38:37.250

另一个注意事项是，人们可以使用许多解析库来完成此任务。从头开始编写一个好的表达式解析器并非易事，因此我建议您查看一个库。

我在专门研究数学组件的 Singular Systems 工作。我们提供了两个数学解析器 Jep Java 和[Jep.Net](http://www.singularsys.com/jep.net)，它们可以帮助您解决问题。祝你好运！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-05-09T08:56:05.133

对于这些受众，您希望提供的错误反馈与程序员习惯于“语法错误：位置 foo 处的意外'/'”之类的消息完全不同。我试图在这里为教育小程序做一些更好的事情：

[http://github.com/darius/expr](http://github.com/darius/expr)

主要思想：去不寻常的长度找到一个最小的编辑恢复可解析性（很实用，因为输入表达式不是页面长），并生成一个更长的纯英文解释解析器被卡住的地方。

# jtable - 当列按字母顺序排列时，获取 JTable 中选定行的实际行索引

> ID：649300
> 
> 赞同：3
> 
> 时间：2009-03-16T04:54:24.483
> 
> 标签：jtable

如果我的 JTable 的列没有按字母顺序排列，我可以使用 getSelectedRows() 并毫无问题地获取它们的行的值。但是，如果用户单击列名并且该列中的行按字母顺序排列，则 getSelectedRows() 不会返回当前选定的行，而是返回按字母顺序排列之前最初存在的行。

当列按字母顺序排列时，如何获取当前选定的行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2011-06-17T05:17:00.887

使用此代码，您将获得您直观选择的正确行。

```
int[] row_indexes=jTable1.getSelectedRows();
for(int i=0;i<row_indexes.length;i++){
  domain=jTable1.getValueAt(row_indexes[i], 1).toString();  
  System.out.println(this, domain);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T04:32:52.170

```
private void selectRow() {

//retrieving the selected row index

int row = jTable1.getSelectedRow();

//if a single row is selected from the table, take each cell values into the controls

 if (jTable1.getRowSelectionAllowed())
 {

   selectedJobId = Integer.parseInt(jTable1.getValueAt(row, 0).toString());

   jTextField_JobName.setText(jTable1.getValueAt(row, 1).toString());

   jTextField_ExpDate.setText(jTable1.getValueAt(row, 3).toString());

   jComboBox_JobCat.setSelectedItem(jTable1.getValueAt(row, 4).toString());

   jComboBox_JobSubCat.setSelectedItem(jTable1.getValueAt(row, 5).toString());

 }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-13T14:56:10.840

可能有点晚了，但我想我还是会发布这个。

看看 JTable 方法 convertRowIndexToModel(row)。它返回行号，就好像行号没有被排序一样。

# regex - 匹配此的正则表达式：090129 YBB 100

> ID：649304
> 
> 赞同：2
> 
> 时间：2009-03-16T04:56:39.203
> 
> 标签：regex

编写一个快速应用程序来帮助我过滤文本文件。

我正在逐行读取文本文件，需要匹配一系列如下所示的字符：090129 YBB 100

第一组 090129 将是 6 个数字 (0-9)。后跟一个空格，然后是 YBB - 始终。之后，另一个空格，然后是 2-3 个数字（0-9）。

此模式也将始终是字符串的第一部分。

**这是我的技巧：**

```
^[0-9][0-9][0-9] (YBB) [0-9][0-9][0-9]\b 
```

当然，不起作用......但我是一个正则表达式菜鸟。提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-16T05:01:58.613

开始：

```
^([\d]{6})\s(?:YBB)\s([\d]{2,3})\b 
```

解释：

a) 从行首开始。b) 匹配 6 位数字。保存到 backref 1。 c) 匹配一个空格。d) 匹配“YBB”。不要保存到 backref 中。e) 匹配一个空格。f) 匹配 2-3 位数字。保存到 backref 2。

当然，重要的是要知道您想将该模式的哪一部分检索到反向引用中。如果您提供该信息，我可以编辑我的帖子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-16T05:02:21.233

在 Perl 中，我会这样做：

```
^(\d{3}) YBB (\d{2,3})$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-16T05:19:01.087

这个网络工具也许能帮助你：[http ://www.txt2re.com/](http://www.txt2re.com/)

对于这种情况，特别是：[http ://www.txt2re.com/index-javascript.php3?s=090129%20YBB%20100&-23&12&19&13&16&18&20&7&-3&8&17&14&15](http://www.txt2re.com/index-javascript.php3?s=090129%20YBB%20100&-23&12&19&13&16&18&20&7&-3&8&17&14&15)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-16T05:19:31.817

你说在 YBB 之前会有 6 位数字，但你显示的正则表达式只有 3 位。

# html - 替代 HTML 粗体标签

> ID：649305
> 
> 赞同：83
> 
> 时间：2009-03-16T04:57:11.730
> 
> 标签：html, css

好的，所以我知道在 HTML 中你可以使用`<b>`标签，但是标签中没有`"weight=bold"`我可以使用的属性`<p>`吗？

还是在 CSS 或 Javascript 中？

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2009-03-16T05:18:33.817

还要考虑`<strong>`标签。它对于屏幕阅读器来说要好得多，因此对于可访问性也更好。搜索引擎也使用`<strong>`标签来确定重要的内容，类似于他们使用标题标签`<h1>`的方式，`<h2>`等（尽管`<b>`也与搜索引擎具有相似的含义）。如果要强调文本的重要性，请使用`<strong>`. 如果您*不想*强调重要性，请使用`<b>`标签或`font-weight:bold;`在元素或 CSS 中使用样式。

虽然，如果您将整个段落加粗，使用 CSS 选项可能会更好。这将减少对屏幕阅读器的影响，并且强调整个段落可能没有意义。但另一方面，我曾经看到过粗体用于强调整个段落是有充分理由的。在这种情况下，`font-weight:bold;`是您想要使用的，可能是在类/样式中。

最后，`<strong>`, `<b>`or`font-weight:bold;`都会工作并完成视觉上相似的事情（可能完全相同），但它们的含义略有不同。此外，请确保如果您加粗的是标题，请使用标题标签：`<h1>`、`<h2>`等。

* * *

## 回答 #2

> 赞同：79
> 
> 时间：2009-03-16T05:00:47.463

您正在考虑 CSS 属性`font-weight`：

```
p { font-weight: bold; } 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2009-03-16T05:08:36.947

如果文本的含义在语义上*很强*，请使用该`strong`元素。如果不是，请使用语义命名类（一个清楚地显示元素含义的类，不要通过调用它`bold`等来混合表示和数据）并在您的 CSS 中引用它。

### HTML

```
<span class="important-message">I'm important!</span> 
```

### CSS

```
.important-message {
   font-weight: bold;
} 
```

有些人仍然使用`b`元素作为展示钩子，但它[并没有被弃用](http://www.w3.org/TR/html401/index/elements.html)，尽管现在大多数人都喜欢这个`strong`元素。只要确保它们被正确使用。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2010-07-22T02:27:43.580

< **b>**标签是活得很好的。<b> 没有被弃用，但它的使用已被澄清和限制。<b> 没有语义意义，也不像屏幕阅读器那样传达语音强调。然而，<b> 确实传达了*打印的 empasis*，就像 <i> 标记一样。两者在印刷术中都有特定的位置，但在口语交流中没有，*mes frères*。

**引自[http://www.whatwg.org/](http://www.whatwg.org/)**

> b 元素表示在风格上从普通散文中偏移的一段文本，而不传达任何额外的重要性，例如文档摘要中的关键词、评论中的产品名称或其他典型的印刷表示为粗体的文本跨度。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2011-05-17T12:48:01.257

`Bold`您可以使用`<b>Text</b>`标签制作文本或单词。

你也可以使用`<strong>Text</strong>`标签

头部标签`<h1>`, `<h2>`, `<h3>`, ... 是默认的粗体标签，并且默认情况下使您的文本为粗体，除非您使用 CSS 更改它们的样式

以上标签在 HTML 中可用，但如果您想更改样式，`CSS`可以使用

```
font-weight:bold 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2009-03-16T05:01:14.390

它在CSS中你必须设置`font-weight: bold;`为样式

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2017-12-10T18:42:50.357

你可以像下面这样编码..

```
<html>
 <head>
 <style>
 p.boldstats{
 font-weight: bold
  }
  </style>
 </head>

  <body>
  <p class="boldstats"> The bold finder </p>
  </body>
</html> 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2017-11-27T12:43:36.953

您可以使用 font-weight 属性

例如：

```
<p>This is my paragraph</p> 
```

您可以将 CSS 内联如下：

```
<p style="font-weight:bold;">This is my paragraph</p> 
```

或者将它放在您的外部 CSS 样式表中，如下所示：

```
p{
  font-weight:bold;
} 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2009-03-16T05:02:10.487

这都是历史性的，并且可以追溯到恐龙在地球上行走并且 CSS 不存在的时代。

更严重的是，忘记`<b/>`标签并`font-weight:bold`在 CSS 规则中使用 :)

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2011-05-11T16:16:47.020

## `<b>` is a last resort

You can use `<b>`, but only as a **last resort**. There are a variety of elements that work as good alternatives to `<b>`, here they are in order of most usefulness:

## More useful alternatives

*   For important text: `<strong>`
*   For stress emphasized text: `<em>`
*   For headings, not just page headings but paragraph headings and others of all kinds: `<h1> through <h6>`

## The practical edge case for use of `<b>`

The only case where I would advocate using `<b>` is if

1.  you have styled `<strong>` in a different way that you don't want displaying for the text that you have in mind,

2.  you don't want *italic emphasis* or a heading, and

3.  you are about to use an inline span or a span with a class just for **bolding text**. (For example: `<span class='bold'>`)

Then it's reasonable to use `<b>` instead, because in that case it'll probably be cleaner/shorter and more semantic than an unsemantic span, and terceness/readability is a good reason for making that choice, since b has been redefined for use as an element denoting **printed emphasis**.

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2009-03-16T05:03:02.747

你也可以`<p style="font-weight:bold;"> bold text here </p>`

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2020-01-11T12:39:54.707

```
 #bold{
      font-weight: bold;
    }
    #custom{
      font-weight: 200;
    }
```

```
<body>
  <p id="bold"> here is a bold text using css </p>
  <p id="custom"> here is a custom bold text using css </p>
</body>
```

我希望它有效

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2011-05-16T23:38:03.850

也许你想使用 CSS 类？

```
p.bold { font-weight:bold; } 
```

这样你仍然可以`<p>`正常使用。

```
<p>This is normal text</p>
<p class="bold">This is bold text</p> 
```

给你：

这是正常的文字。

**这是粗体文本。**

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2019-11-27T12:13:44.537

您使用什么代替`b`元素取决于该元素内容的语义。

*   `b`到现在为止，这些元素`strong`已经共存了很长时间。在已被 HTML5 取代的[HTML 4.01](https://www.w3.org/TR/html4/struct/text.html#edef-STRONG)`strong`中，旨在用于“强烈强调”，即比`em`元素更强调（仅表示强调）。在[HTML 5.2](https://www.w3.org/TR/html52/textlevel-semantics.html#the-strong-element)中，`strong`“代表其内容的强烈重要性、严肃性或紧迫性”；与 HTML 4.01 相比，规范中的“严重性”和“紧急性”方面是新的。因此，如果您曾经`b`表示重要、严重或紧急的内容，建议您`strong`改为使用。如果需要，您可以通过添加有意义的类属性来区分这些不同的语义，例如`<strong class="urgent">...</strong>`和`<strong class="warning">...</strong>`并使用适当的 CSS 选择器来为这些类型的“强调”设置不同的样式，例如使用不同的颜色和字体大小（例如在您的 CSS 文件中：`strong.warning { color: red; background-color: transparent; border: 2px solid red; }`.）。
    另一种替代方法`b`是[`em`element](https://www.w3.org/TR/html52/textlevel-semantics.html#the-em-element)，它在 HTML 5.2 中“表示其内容的强调强调”。请注意，此元素通常以斜体呈现（因此经常被推荐作为`i`元素的替代品）。
    我会抵制遵循其他一些答案的建议来编写类似`<strong class="bold">...</strong>`. 首先，class 属性在非视觉环境中没有任何意义（听 ePub 书籍、一般的文本到语音、屏幕阅读器、盲文）；其次，*为什么*有些东西是加粗的。
*   如果您用于`b`整个段落或标题（而不是较短的文本跨度，这是上一个项目符号中的用例），我会将其替换为适当的`class`属性，或者，如果适用，[WAI-ARIA 角色](https://www.w3.org/TR/wai-aria-1.1/#role_definitions)，例如`alert`实时区域“具有重要且通常具有时间敏感性的信息”。如上所述，您应该使用“语义”`class`属性值，以便维护代码的人（包括您未来的自己）可以弄清楚*为什么*有些东西是粗体的。
*   并非所有的使用都`b`可以代表语义。例如，当您将打印的文档转换为 HTML 时，文本可能会加粗，其原因与强调或重要性无关，而是作为视觉指南。例如，字典中的词条并不比其他内容更“严重”、“紧急”，因此您可以保留该`b`元素并可选地添加一个有意义的类属性，例如，或者根据具有的参数`<b class="headword">`替换标签在非视觉环境中没有意义。`<span class="headword">``b`

在您的 CSS 文件中（而不是使用`style`属性，正如其他一些答案所建议的那样），您有几个选项来设置“粗体”或重要文本的样式：

*   指定不同的颜色（前景和/或背景）；
*   指定不同的字体；
*   指定边界（参见上面的示例）；
*   使用该[**`font-weight`属性**](https://www.w3.org/TR/css-fonts-3/#font-weight-prop)使用不同的字体粗细，该属性允许更多的值而不仅仅是`normal`和`bold`，即`normal | bold | bolder | lighter | 100 | 200 | 300 | 400 | 500 | 600 | 700 | 800 | 900`，
*   等等

请注意，[对数字字体粗细值的支持](https://caniuse.com/#feat=mdn-css_properties_font-weight_number)并不总是很好。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2016-09-15T09:37:15.050

我知道，这是一个非常古老的线程。- 但为了完整性：

我用`<span class="bold">my text</span>`    

当我上传四种字体样式时：正常；大胆的; 斜体和粗斜体通过 css 进入我的网站。

我觉得生成的输出比简单地修改字体要好，并且更接近设计者对加粗字体​​的外观的意图。

当然，斜体和粗体也是如此，这给了我额外的灵活性。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2009-03-16T07:48:29.760

在旁注中，下面的代码也将使其变为粗体。

```
<strong> text here </strong> 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2011-05-17T11:55:08.367

您可以使用以下内容：

```
<p id="p1">Some Text here </p>
#p1{
   font-weight: bold;
} 
```

或者

```
<Strong><p>Some text here </p></strong> 
```

或者

您可以使用`<h1> tag`有点类似于粗体的

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2011-05-11T21:23:20.237

```
<p style="font-weight:bold;"></p> 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-07-26T15:56:34.800

如今，人们倾向于使用网站构建器（例如 Wordpress 等 CMS），而不是从头开始编写自己的博客。即使是专业的 Web 开发人员也会这样做，因为它更快。

如果您能提及在现实生活中编写自己的博客时要记住的优点和注意事项，那就太好了，例如：

*   更大的灵活性（定制）
*   支付一个域名
*   支付并选择一个虚拟主机
*   安全和维护
*   一些网站建设者的模板和图形的版权和许可。如果您使用主机的网站构建器，您的网站可能会被锁定到特定的网络主机。所以你不能移动到另一个虚拟主机，因为如果你这样做了，你就不能再使用那个模板了。
*   在网站出现故障时寻求网站建设者的技术支持时遇到麻烦。
*   某些模板对搜索引擎不友好，这会影响您的网站排名 (SEO)

无论如何，您可以使用 css/css3 或 JavaScript 来制作交互式网页。甚至您可以将所有类型的代码上传到格式化默认博客主题的服务器中。

* * *

## 回答 #20

> 赞同：-2
> 
> 时间：2011-05-16T09:36:19.063

尽管有一点，@Darryl Hein 的答案是正确的——`<b>`因为 XHTML 完全不推荐，因为它不是*语义*的。

`<strong>`表示语义突出显示的文本

`font-weight: bold`表示视觉突出显示的文本

`<strong>`可以将 css 调整为不粗体，尽管它是常规默认值。它可以变成红色、斜体或下划线（尽管所有这些可能性都不是真正用户友好的）。将其用于文本中的短语/单词，不是因为视觉设计，而是与它们的含义有关

`font-weight: bold`应该用于与设计相关的粗体部分，如标题、子标题、表格标题单元格等。

* * *

## 回答 #21

> 赞同：-3
> 
> 时间：2009-03-27T05:34:27.323

使用`<strong>`标签，因为它更符合语义。`<b>`已经折旧，所以最好不要使用它。此外，粗体文本被赋予更多的搜索引擎优化 (SEO) 权重，因此最好使用真实的`<strong>`而不是使用 CSS制作 a`<p>`或粗体。`<span>`

# sql-server - 主键升序与降序

> ID：649307
> 
> 赞同：31
> 
> 时间：2009-03-16T04:57:37.813
> 
> 标签：sql-server, indexing, primary-key

在 Sql Server 中，我有一个带有 Identity 主键的表。通常我想要最新的几条新记录，所以我获取按主键降序排序的 Top n。我应该将主键索引定义为降序，还是没有区别？即，如果它们按升序排列，那么 sql 可以同样有效地向后工作吗？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2009-03-16T05:04:43.490

从纯粹查询的角度来看，如果您想提取 N 个最近的或 N 个最旧的记录，您的键是降序还是升序没有区别：

> 无论键的存储顺序如何，SQL Server 的内部算法都可以在单列索引上**双向有效地导航。**例如，在单列索引上指定 DESC 不会使使用 ORDER BY IndexKeyCol DESC 子句的查询比为索引指定 ASC 时运行得更快。

[http://msdn.microsoft.com/en-us/library/aa933132(SQL.80).aspx](http://msdn.microsoft.com/en-us/library/aa933132(SQL.80).aspx)

*但是*，在几乎任何正常情况下，**您都希望您的主键是升序并按顺序排列以防止碎片**。SQL Server 针对将新记录物理附加到数据库文件末尾进行了优化。如果它需要在顶部插入每条新记录并将所有内容下推，则可能会导致近 100% 的碎片。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-16T05:00:20.913

这完全没有区别。

我什至无法想象为什么可以以任何一种方式声明它。

# opengl - 在 Intel 上编译的详细 GLSL 着色器

> ID：649318
> 
> 赞同：3
> 
> 时间：2009-03-16T05:03:37.767
> 
> 标签：opengl, shader, glsl

我有一个使用 GLSL 着色器的项目。

该项目旨在不向标准输出打印任何内容，除非出现问题或您明确打开一些额外的调试输出。

当着色器编译失败时，给出的日志长度`glGetProgramInfoLog`大于 0，有时当它成功时大于 0，并给出编译*警告*。当你有一个可以完美编译的着色器时，日志长度<1...这就是它在我的开发机器上的 NVidia 卡上的工作方式。

对于我的罪过，我还在带有英特尔集成显卡的笔记本电脑上进行了一些开发。代码运行良好，但每当我进行着色器编译时，日志包含：

“着色器已成功编译为在硬件上运行”

这很烦人，因为除了某种字符串分析之外，我现在无法决定是否应该将字符串打印出来，例如：

```
strstr("successfully",log) 
```

希望这很明显为什么不受欢迎。如果有的话，我如何判断一条消息是否值得使用 OpenGL api 打印出来？

编辑：

如果我使用`glGetShaderiv(shaderobj,GL_COMPILE_STATUS,&err);`，那么我不会收到编译警告，只有错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-16T06:14:19.300

干得好：

```
glGetShaderiv(shaderobj,GL_COMPILE_STATUS,&err);
if(!err) { /* now print out the error log */ } 
```

这是您获得的唯一编译状态；我没有找到任何便携式方法来确定您是否收到警告。（编译日志可以充满实现需要放入其中的任何内容，包括成功通知。）

# java - 使用套接字时“流结束”是什么意思

> ID：649320
> 
> 赞同：20
> 
> 时间：2009-03-16T05:04:48.687
> 
> 标签：java, sockets, network-programming

在 Java 中使用套接字时，如何在开始处理它们之前判断客户端是否已完成所有（二进制）数据的发送。考虑例如：

```
istream = new BufferedInputStream (socket.getInputStream());
ostream = new BufferedOutputStream(socket.getOutputStream());

byte[] buffer = new byte[BUFFER_SIZE];

int count;
while(istream.available() > 0 && (count = istream.read(buffer)) != -1)
{
    // do something..
}

// assuming all input has been read
ostream.write(getResponse());       
ostream.flush(); 
```

我在 SO 上阅读过类似的帖子，例如[this](https://stackoverflow.com/questions/534964/why-is-the-end-of-the-input-stream-never-reached-using-java-sockets)，但找不到确凿的答案。虽然我上面的解决方案有效，但我的理解是，您永远无法真正判断客户端是否已完成所有数据的发送。例如，如果客户端套接字发送了一些数据块，然后在它可以发送更多数据之前阻塞等待来自另一个数据源的数据，上面的代码很可能假设客户端已经完成了自 istream.available() 以来的所有数据的发送将为*当前*字节流返回 0。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-03-16T06:28:07.970

是的，你是对的——`available()`这样使用是不可靠的。我个人很少使用`available()`. 如果您想阅读直到到达*流*的末尾（根据问题标题），请继续调用`read()`直到它返回 -1。这很容易。困难的一点是，如果您不想要流的结尾，而是“服务器此刻想要发送给您的内容”的结尾。

正如其他人所说，如果您需要通过套接字进行对话，您*必须*让协议解释数据在哪里完成。就我个人而言，在可能的情况下，我更喜欢“长度前缀”解决方案而不是“消息结束令牌”解决方案——它通常使阅读代码更简单。但是，它会使*编写*代码更加困难，因为您需要在发送任何内容之前计算出长度。如果您可以发送大量数据，这会很痛苦。

当然，您可以混合和匹配解决方案 - 特别是，如果您的协议同时处理文本和二进制数据，我*强烈*建议使用长度前缀字符串而不是空终止它们（或类似的东西）。如果您可以向解码器传递一个完整的字节数组并返回一个字符串，那么解码字符串数据往往会容易得多 - 例如，您不必担心读取到一半的字符。您可以将其用作协议的一部分，但仍然具有带有“数据结束”记录的整体“记录”（或您正在传输的任何内容），以让阅读器处理数据并做出响应。

当然，如果你不能控制协议，那么所有这些协议设计的东西都是没有意义的:(

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-03-16T05:15:19.427

我认为这更像是一个协议的任务，假设你是编写应用程序的发送端和接收端的人。例如，您可以实现一些简单的逻辑协议并将数据分成数据包。然后将数据包分成两部分：头部和身体。然后说您的头部由预定义的起始序列组成，并包含正文中的字节数。忘记将 bofy 中的起始序列和简单传输字节数作为数据包的第一个字节。那你就可以解决你的问题了。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2011-06-09T08:48:09.647

正如一些人已经说过的那样，您无法避免某种通信协议。例如，它应该如下所示：

在服务器端，您有：

```
 void sendMSG(PrintWriter out){
    try {
        //just for example..
        Process p = Runtime.getRuntime().exec("cmd /c dir C:");
        BufferedReader br = new BufferedReader(new InputStreamReader(
            p.getInputStream()));

        //and then send all this crap to the client
        String s = "";
        while ((s = br.readLine()) != null) {
          out.println("MSG");
          out.println(s);
        }
      } catch (Exception e) {
        System.out.println("Command incorrect!");
      }
      out.println("END");
}
//You are not supposed to close the stream or the socket, because you might want to send smth else later.. 
```

在客户端，您有：

```
void recieveMSG(BufferedReader in) {
    try {
      while (in.readLine().equals("MSG")) {
        System.out.println(in.readLine());
      }
    } catch (IOException e) {
      System.out.println("Connection closed!");
    }
  } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-16T05:21:12.860

正如[尼基塔](https://stackoverflow.com/users/4378/nikita-borodulin)所说，这更多是协议的任务。您可以通过标头和正文方法进行，也可以发送特殊字符或符号作为流结束以中断处理循环。就像你在套接字上发送说'[[END]]'来表示流的结束。

# python - 在 Python 中，是否可以访问包含方法的类，只给定一个方法对象？

> ID：649329
> 
> 赞同：2
> 
> 时间：2009-03-16T05:08:54.497
> 
> 标签：python, decorator

我对 Python 很陌生，并且无法通过在线搜索找到这个问题的答案。

这是一个什么都不做的示例装饰器（还）

```
def my_decorator(text):
  def wrap(f):
    # grab magic f.parent_class_object.my_var and append text
    def wrap_f(*args, **kwargs):
      f(*args, **kwargs)
    return wrap_f
  return wrap 
```

这是一个示例类

```
class MyClass:
  my_var = []

  @my_decorator('sometext')
  def my_func()
    # do some super cool thing 
```

在我的装饰器中，我想访问类对象`MyClass`并将“sometext”添加到`MyClass.my_var`列表中。我的目标是在**模块加载**时用修饰值填充 my_var，而不是函数调用时。

有没有办法我可以导航到来`f`做到`MyClass`这一点？我知道 *args[0] 是 MyClass 的实例，但这仅在调用函数时可用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-16T05:21:55.523

无法从类装饰器中的函数读取它，因为在编译类时“方法”仍然是正常函数。此外，在编译时还没有定义类名。

您可以做的是将`my_var`列表提供给装饰器。

```
class MyClass:
    my_var = []

    @my_decorator(my_var, 'sometext')
    def my_func()
        # do some super cool thing 
```

`my_var`到那时仍然是一个正常的变量。

# c# - SQL 到 MS Access 导出

> ID：649336
> 
> 赞同：2
> 
> 时间：2009-03-16T05:12:43.673
> 
> 标签：c#, sql, ms-access, export

我正在尝试用我们可以从存储过程（使用 xp_cmdshell）调用的 exe 替换 DTS 访问导出程序包。

我们正处于 SQL 2000 和 SQL 2005 之间的过渡阶段，目前如果我们不能使用 DTS 或 SSIS，那将是最好的选择。

我相信我有以下选择：

*   使用 SQL 数据阅读器读取 SQL 记录，并使用 ADO.net 将读取的记录插入 Access。我已经实现了这个，它太慢了。这不是一个选项
*   在访问中设置链接表，然后访问以从 sql 中提取数据。如果有人有这方面的经验，我将不胜感激一些代码示例或指出一些资源？

如果有任何其他选项可以将大量数据从 SQL 传输到 Access 数据库中，那就太棒了，但性能是一个大问题，因为我们可以处理每个表多达 100 万条记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-16T05:36:45.800

你试过[这个](http://support.microsoft.com/kb/250616)吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-16T10:43:13.583

为什么不在 Access 中创建链接表，并从 Sql Server 中提取数据，而不是从 Sql 推送到 Access ？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-18T04:09:31.010

我已经完成了很多案例，从 Access 数据库开始，连接到 SQL Server，创建创建表或插入 Querydef，并编写一些代码来执行 querydef，可能带有参数。但是，我需要对您的问题和您对 Access 的熟悉程度做出很多假设，以便更详细地了解。你能用这个描述走多远？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-31T09:04:10.937

我最终使用了 Access 互操作，感谢 le dorfier 为我指出了导入功能的方向，这似乎是最简单的方法..

我现在有这些方面的东西：

```
Access.ApplicationClass app = new Access.ApplicationClass();
Access.DoCmd doCmd = null;

app.NewCurrentDatabase(_args.Single("o"));
doCmd = app.DoCmd;

//Create a view on the server temporarily with the query I want to export

doCmd.TransferDatabase(Access.AcDataTransferType.acImport,
    "ODBC Database",
     string.Format("ODBC;DRIVER=SQL Server;Trusted_Connection=Yes;SERVER={0};Database={1}", _args.Single("s"), _args.Single("d")),
     Microsoft.Office.Interop.Access.AcObjectType.acTable,
     viewName,
     exportDetails[0], false, false);
//Drop view on server

//Releasing com objects and exiting properly. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-18T04:53:42.793

你看过[bcp](http://msdn.microsoft.com/en-us/library/ms162802.aspx)吗？它是一个命令行实用程序，可以很好地导入和导出大量数据。我从来没有尝试过让它与 Access 配合得很好，但它是 DTS 和/或 SSIS 的一个很好的轻量级替代品。

就像其他人所说的，我知道将数据导入 Access mdb 的最简单方法是在 Access 中进行设置。粗略地讲：

1.  为要导出的 SQL 数据创建链接表。（在访问：文件--> 获取外部数据--> 链接表）这只是给你一个到 sql server 的连接。
2.  创建一个表示要导出的数据的架构的本地表。（在表格选项卡上，单击“新建”按钮并跟随您的鼻子）。
3.  创建从链接表 (SQL Server) 中选择数据并将行附加到本地表 (访问 mdb) 的更新查询。
4.  在宏选项卡上，创建一个新宏来执行您刚刚在上面创建的查询（我不记得要使用的确切“操作”，但它类似于 OpenQuery 或 RunQuery）；将宏命名为“autoexec”，这将导致它在打开 mdb 时自动运行。
5.  在适当的时候使用脚本（或其他）复制和打开 mdb；autoexec 宏将启动，查询会将数据从 SQL 服务器复制到 mdb。

# javascript - 解决方法：IE6 不支持 CSS“属性”选择器

> ID：649341
> 
> 赞同：14
> 
> 时间：2009-03-16T05:15:11.047
> 
> 标签：javascript, css, internet-explorer, internet-explorer-6, css-selectors

我正在工作的项目之一使用 CSS“属性”选择器 [att]

[CSS 选择器](http://www.w3.org/TR/CSS21/selector.html#attribute-selectors)

ie6 不支持： [支持 IE6 中的 CSS 选择器](http://msdn.microsoft.com/en-us/library/cc351024%28VS.85%29.aspx#attributeselectors)（查找文本“属性选择器”）

是否有任何解决方法/破解当然是有效的 html/css 来克服这个问题？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-03-16T06:00:07.523

遗憾的是，如果没有在 HTML 中添加一堆无关的类选择器，这是不可能的。

我建议您设计您的网站，以便您的完全有效的 CSS 适用于使用现代浏览器的人，并且它仍然可以在 IE6 中使用，尽管在视觉上不太正确。您只需要在让您的网站达到标准和为不会升级的用户向后弯曲之间找到适当的平衡。这是一个坏掉的浏览器，这样对待它。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2009-03-16T05:18:01.213

由于 IE6 本质上仅限于：

*   类选择器
*   ID 选择器
*   （空格）后代选择器
*   a:-only 伪选择器

您唯一的选择是：

*   使用更多类来识别您的元素
*   使用 JavaScript（**强烈**不推荐，除非在高度专业化的情况下）

我发现通过用空格分隔多个类来为一个元素分配多个类的能力非常有用：`class="foo bar"`

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-03-16T06:21:51.417

如果你想在 IE6 中使用属性选择器，你可以使用 Dean Edward IE.js。 [http://dean.edwards.name/IE7/](http://dean.edwards.name/IE7/)

这将使 IE 5+ 的行为更像 IE7

```
支持以下 CSS 选择器：
父母 > 孩子
相邻+兄弟
相邻~兄弟
[attr]、[attr="value"]、[attr~="value"] 等
.multiple.classes（修复错误）
:hover, :active, :focus （适用于所有元素）
:first-child, :last-child, 独生子, nth-child, nth-last-child
：检查，：禁用，：启用
:empty, :contains(), :not()
：之前/：之后/内容：
:lang()

```

我没有 IE6（使用 IE7）所以我不能说它有效，但试一试

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2011-11-22T18:12:42.663

您可以将 Internet Explorer CSS 表达式与安全下划线（“_”、IE6 和更早版本）CSS hack 结合使用：

```
/* Adds dotted bottom border to `<ABBR>` with a `title` attribute. */
abbr {
        _border-bottom: expression(this.title ? '1px dotted' : 'none');
}

abbr[title] {
        border-bottom: 1px dotted;
} 
```

我明白，您确实要求提供“有效”的 CSS，但是如果上面的 CSS hack 让您感到害怕，请阅读[Safe CSS Hacks](http://mathiasbynens.be/notes/safe-css-hacks)。

以上可以改成：

```
.ie6 abbr {
        _border-bottom: expression(this.title ? '1px dotted' : 'none');
}

abbr[title] {
        border-bottom: 1px dotted;
} 
```

也就是说，如果您的 HTML 开头为：

```
<!--[if lt IE 7]><html class="ie6"><![endif]-->
<!--[if IE 7]>   <html class="ie7"><![endif]-->
<!--[if IE 8]>   <html class="ie8"><![endif]-->
<!--[if gt IE 8]><!--><html><!--<![endif]--> 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-03-16T06:17:09.837

Dean Edwards 的[IE7 JavaScript 库](http://code.google.com/p/ie7-js/)为 IE 5 和 6提供[属性选择器支持。](http://ie7-js.googlecode.com/svn/test/index.html)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-03-16T05:19:01.850

遗憾的是，使用类，这是唯一的解决方法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-21T19:53:26.017

如果您在您的网站上使用 jQuery，另一个选项是[SuperSelectors](http://skulljackpot.com/2009/04/19/super-css-selector-support-with-jquery/) - 它通过您网站的样式表，动态地向元素添加类，这样即使 IE6 也可以沐浴在正确支持 CSS 选择器（如`ul li:first-child li:nth-child(odd) a:hover`.

# compact-framework - .net cf 3.5 treeview 仅针对给定节点的复选框

> ID：649359
> 
> 赞同：0
> 
> 时间：2009-03-16T05:22:00.407
> 
> 标签：compact-framework, pocketpc

.net cf 3.5 袖珍 pc 应用程序中的树视图如果我们启用复选框，它将为所有节点显示，我只想为某些节点的子节点显示复选框。是否可以 ？我发现一些 Windows 窗体应用程序在 drawnode 事件中进行自定义绘制。但是.net cf treeview 中没有drawnode 事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-16T12:19:30.217

你是对的。CF TreeView 是原生 CE TreeView 控件的简单包装，它不支持复选框。您必须为此行为创建一个完全自定义的控件。可能值得看看像 Resco 这样的第三方控件供应商，看看他们是否有任何东西（我不知道他们是否有）。

# soap - 您是否在 WSDL 端口绑定中使用了“地址”元素的“位置”属性？

> ID：649364
> 
> 赞同：5
> 
> 时间：2009-03-16T05:28:58.377
> 
> 标签：soap, wsdl

我的问题与在 WSDL 端口绑定中使用地址元素的“位置”属性有关。

示例 WSDL 片段：

```
<wsdl:service name="serviceName">
    <wsdl:port binding="tns:serviceNameBIND" name="serviceNameBIND">
        <soap:address location="http://example.com" />
    </wsdl:port>
</wsdl:service> 
```

我知道地址元素定义了客户端在使用 WSDL 描述的接口时连接到的主机 URI。

将主机 URI 硬编码到生成的客户端代码中似乎是一种奇怪的方法。在负载平衡场景中，一个 URI 是有意义的。在我目前的情况下，我们的客户是支持外部接口的 SOA 组件。客户可以访问我们应用程序的四个安装之一。负载平衡发生在上游。

关于位置属性还有其他关于 SO 的问题，但它们大多是特定于技术的。

*   [VB.NET：如何在运行时重新映射 Web 服务的 soap.location 属性？](https://stackoverflow.com/questions/315599/vb-net-how-can-i-remap-the-soap-location-property-of-a-web-service-at-runtime "VB.NET：如何在运行时重新映射 Web 服务的 soap.location 属性？")
*   [肥皂服务：许多服务器，一个接口](https://stackoverflow.com/questions/360831/soap-service-many-servers-one-interface)

**您是如上所述使用 location 属性，还是在不参考 WSDL 地址元素的情况下配置客户端？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-16T08:18:18.830

location 属性只是一个提示。例如，客户端可以将 URL 存储到 .config 文件中，以便以后更改 .config 文件。

# cocoa - NSTableView 和 NSOutlineView 拖放

> ID：649366
> 
> 赞同：8
> 
> 时间：2009-03-16T05:29:32.917
> 
> 标签：cocoa, drag-and-drop, cocoa-bindings, nstableview, nsoutlineview

我有一个 NSTableView 和一个 NSOutlineView，它们的内容都由绑定提供，我想要一些拖放功能：

*   将表 A中的行*拖到*大纲 B 的一行中，在那里它们将被复制到大纲 B 中的行所代表的数据结构中。

*   将大纲 B 中的一行*拖到*大纲 B中的另一行上，这会将第一行表示的数据复制到第二行表示的数据中。

我已经阅读了[Apple 的拖放文档](http://developer.apple.com/documentation/Cocoa/Conceptual/TableView/Tasks/UsingDragAndDrop.html)，但几乎一无所获。它似乎并不适用于我需要做的事情。我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-16T06:25:02.440

您链接到的页面非常清楚您需要做什么。在表 A 的数据源中，实现`registerForDraggedTypes:`并将`tableView:writeRowsWithIndexes:toPasteboard:`一些私有`TableAPasteboardType`数据放在粘贴板上。

在大纲 B 的数据源中，实现相同的两个方法，并将一些私有`OutlineBPasteboardType`数据放在粘贴板上。

最后，实现`tableView:validateDrop:proposedRow:proposedDropOperation:`并`tableView:acceptDrop:row:dropOperation:`检查粘贴板中的一个`TableAPasteboardType`或`OutlineBPasteboardType`，并对绑定的模型进行适当的更改，具体取决于。

一旦你投入并做到这一点，这非常简单。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-16T06:34:23.417

你需要一个数据源——AFAIK，你不能单独使用 Bindings 来实现这一点。

未完成的 Adium Xtras Creator，在 BSD 许可下，包括[一个数组控制器，您可以将其设置为数据源，以便在 Bindings 驱动的表视图中进行拖放](http://hg.adium.im/adium/file/tip/Other/XtrasCreator/AXCArrayControllerWithDragAndDrop.h)。

这个要求可能不适用于 NSOutlineView 和 NSTreeController。我没试过。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-01T07:19:04.140

在 MacOS 10.7 中，添加了一些新协议来实现这一点。

目前[缺少表格文档，](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DragandDrop/DragandDrop.html)但您可以找到一些不错的示例：

*   [DragNDropOutlineView](http://developer.apple.com/library/mac/#samplecode/DragNDropOutlineView/Introduction/Intro.html)
*   [源视图](http://developer.apple.com/library/Mac/#samplecode/SourceView/Introduction/Intro.html)
*   [桌景游乐场](http://developer.apple.com/library/mac/#samplecode/TableViewPlayground/Introduction/Intro.html)

对于 NSTableViwew，协议 NSTableViewDataSource 定义了以下方法：

*   `(BOOL)tableView:writeRowsWithIndexes:toPasteboard:`
*   `tableView:validateDrop:proposedRow:proposedDropOperation:`
*   `tableView:acceptDrop:row:dropOperation:`

对于 NSOutlineView 协议 NSOutlineViewDataSource 定义了以下方法：

*   `(BOOL)outlineView:writeItems:toPasteboard:`
*   `(NSDragOperation)outlineView:validateDrop:proposedItem:proposedChildIndex:`
*   `(BOOL)outlineView:acceptDrop:item:childIndex:`

这些是为每种视图类型实现的最低要求。用例非常相似。

1.  如果 toPasteboard: 方法返回 YES，则开始拖动。
2.  validateDrop: 方法通过更新视图中的标记来控制允许哪个目标节点
3.  如果丢弃成功，则为 acceptDrop: 方法返回 YES

这导致您必须管理两个子用例。第一个是在同一个视图内的拖放或两个视图之间的相同操作。此外，您可以区分移动、复制或删除操作。一个很好的例子是断点如何在 Xcode 中与拖放一起工作。

tableView 有一些额外的方法来自定义拖放，但我提到的那些是让它工作的关键方法。

# sql - SQL中稀疏填充的查找表

> ID：649374
> 
> 赞同：1
> 
> 时间：2009-03-16T05:41:42.933
> 
> 标签：sql, lookup

我正在尝试编写一种查找方法，用于根据与用户/系统相关的一些参数来确定要发送给用户的 SMS 消息。我们将使用默认消息作为最后的手段，但是有多种方法可以通过各种参数覆盖消息。这是我到目前为止的查找查询 - 有没有更好的方法来做到这一点？也许查找不是正确的方法？

这是查找表：

```
MessageLookup
{
ID bigint PK                          
Key varchar                           
CampaignTypeID bigint FK,             
ServiceProviderID bigint FK nullable, -- optional override parameter
DistributorID bigint FK nullable,     -- optional override parameter
CampaignID bigint FK nullable,        -- optional override parameter
Message varchar                   
} 
```

以下是该表的示例：

```
 ID Key  CTID SPID DistID CampID Message
    1 Help 1    NULL NULL   NULL   'This is the default message'
    2 Help 1    375  NULL   NULL   'This is the SP375 message'
    3 Help 1    377  NULL   NULL   'This is the SP377 message'
    4 Help 1    NULL 13     NULL   'This is the Dist13 message'
    5 Help 1    375  13     NULL   'This is the SP375/Dist13 message'
    6 Help 1    NULL 13     500    'This is the Dist13/Camp500 message'
    7 Help 1    375  13     500    'This is the SP375/Dist13/Camp500 msg'
    8 Help 1    NULL NULL   500    'This is the Camp500 help message' 
```

这是我的查询：

```
select
    --top 1
    *
from MessageLookup ml
where ml.[Key] = @Key
and ml.CampaignTypeID = @CampaignTypeID
and
(
    ml.ServiceProviderID = @ServiceProviderID or
    ml.ServiceProviderID is null
)
and
(
    ml.DistributorID = @DistributorID or
    ml.DistributorID is null
)
and
(
    ml.CampaignID = @CampaignID or
    ml.CampaignID is null
)
order by
    CampaignID desc, -- highest precedence lookup param
    DistributorID desc,
    ServiceProviderID desc -- lowest precedence lookup param 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-16T05:51:43.533

我认为这是一种有效的方法，易于扩展，意图非常明确，您可以通过执行以下操作来整理 sql

```
select
    --top 1
    *
from MessageLookup ml
where ml.[Key] = @Key
and ml.CampaignTypeID = @CampaignTypeID
and ml.ServiceProviderID = IsNull(@ServiceProviderID, ml.ServiceProviderID)
and ml.DistributorID = IsNull(@DistributorID, ml.DistributorID)
and ml.CampaignID = IsNull(@CampaignID, ml.CampaignID)
.... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-16T05:52:56.450

我不确定最好的方法是什么，但这里有一些替代方法：

一种想法是为每个规则存储一个模式，如下所示：

```
ID Key CTID Rule        Message
1 Help 1    '[%:%:%]'    'This is the default message'
2 Help 1    '[375:%:%]'  'This is the SP375 message'
3 Help 1    '[377:%:%]'  'This is the SP377 message'
4 Help 1    '[%:13:%]'   'This is the Dist13 message'
5 Help 1    '[375:13:%]' 'This is the SP375/Dist13 message' 
```

然后使用 LIKE 测试而不是所有 AND。

另一个想法是使用 OUTER JOINS。

或者（利用刚刚出现的答案）通过编写进一步干燥事情：

```
where ml.[Key] = @Key
  and ml.CampaignTypeID = @CampaignTypeID
  and IsNull(ml.ServiceProviderID = @ServiceProviderID,true)
  and IsNull(ml.DistributorID     = @DistributorID,    true)
  and IsNull(ml.CampaignID        = @CampaignID,       true) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-16T05:55:19.627

你正在做的事情是有意义的，并且有效。如果您遵循最佳实践——不要使用“SELECT *”——枚举您选择的列。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-16T09:07:17.870

我想我会以不同的方式设计数据库，一个表 TA 是（MSGID、Key、CTID、Message），另一个是存储（MSGID、ID、IDTYPE）的 TB，其中 ID 代表 CampID/DistId/ DefaultId（以IDTYPE表示），其PK应依次为（ID、IDTYPE、MSGID）。您可以为 IDTYPE 分配一个表示优先级的数值，默认值为 0（匹配 ID 为 0）。所有列都不为 NULL。

如果我很好理解您的问题，您的输入由三个值 x、y 和 z（在我的情况下加上隐含的 0）组成，您希望返回匹配最多的消息，并且在相等的情况下，按 IDTYPE 排序。

```
select MSGID, count(*) as nbr_candidates, max(IDTYPE) as priority
from TB
where (ID = x and IDTYPE = ...)
   or (ID = y and IDTYPE = ...)
   or (ID = z and IDTYPE = ...)
   or (ID = 0 and IDTYPE = 0)
group by MSGID
order by 2 desc, 3 desc 
```

应该将“最佳消息”作为第一行返回，您只需要添加一个

```
top 1 
```

然后加入另一张桌子。这可能比单表解决方案更快，因为表 TB 仅包含数字 ID，并且非常紧凑，并且连接将是即时的。

# c# - C# 中运算符方法的方法名称

> ID：649375
> 
> 赞同：4
> 
> 时间：2009-03-16T05:41:54.773
> 
> 标签：c#, operators, operator-overloading

有没有人有 C#/CLR 给操作员的名称的详尽列表？（也许是我睡眠不足，但我似乎无法在 Google 上找到它）例如 op_Addition、op_Subtraction。此外，这些在其他文化中是否会有所不同？

我正在尝试创建一个可以添加/减去等两个对象的类，并且我已经完成了所有原语 - 我只需要做“其余的”。

非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-04-07T15:15:36.127

基于*表达式*类：

```
== op_Equality
!= op_Inequality
>  op_GreaterThan
<  op_LessThan
>= op_GreaterThanOrEqual
<= op_LessThanOrEqual
&  op_BitwiseAnd
|  op_BitwiseOr
+  op_Addition
-  op_Subtraction
/  op_Division
%  op_Modulus
*  op_Multiply
<< op_LeftShift
>> op_RightShift
^  op_ExclusiveOr
-  op_UnaryNegation
+  op_UnaryPlus
!  op_LogicalNot
~  op_OnesComplement
   op_False
   op_True
++ op_Increment
-- op_Decrement 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-16T05:44:09.793

这是[C# 可重载运算符的完整列表](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/statements-expressions-operators/overloadable-operators)

[您可以在Framework Design Guidelines -> Operator Overloads](https://docs.microsoft.com/en-us/dotnet/standard/design-guidelines/operator-overloads)下找到运算符元数据/生成的 MSIL 名称列表。

有一个不同的[F# 运算符重载列表](https://docs.microsoft.com/en-us/dotnet/fsharp/language-reference/operator-overloading#overloaded-operator-names)。

最后，请参阅[ECMA-335 公共语言基础设施 (CLI)](https://www.ecma-international.org/publications/files/ECMA-ST/ECMA-335.pdf) I.10.3 运算符重载，其中列出了 C++/CLI 的运算符。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-04-12T15:59:20.743

接受的答案很好，因为它链接到可重载运算符的列表，但它没有严格回答问题，因为它在编译时没有提供运算符的名称。

亚军答案包括这一点，但它是一个不完整的列表，而且组织得不好。为了完整起见，我列出了我自己的列表，包括一些您可能认为是可重载的运算符，但事实并非如此。该列表按运算符优先级排序，从最高（最紧）优先级到最低。

```
Outside of Order of Operations (used when necessary to coerce types)
   op_Implicit
   op_True
   op_False

Unary (only one operator)
++ op_Increment (Includes preincrement and postincrement)
-- op_Decrement (Includes predecrement and postdecrement)
-  op_UnaryNegation
+  op_UnaryPlus
!  op_LogicalNot
~  op_OnesComplement
   op_Explicit
await (Not overloadable)

Multiplicative
/  op_Division
%  op_Modulus
*  op_Multiply

Additive
+  op_Addition
-  op_Subtraction

Shift
<< op_LeftShift
>> op_RightShift

Relational
>  op_GreaterThan
<  op_LessThan
>= op_GreaterThanOrEqual
<= op_LessThanOrEqual
as (Not overloadable)
is (Not overloadable)

Equality
== op_Equality
!= op_Inequality

And
&  op_BitwiseAnd

Exclusive Or
^  op_ExclusiveOr

Inclusive Or
|  op_BitwiseOr

Conditional And
&& (Not overloadable - use "implicit operator bool" or "operator true")

Contional Or
|| (Not overloadable - use "implicit operator bool" or "operator true")

Null-Coalescing Operator
?? (Not overloadable)

Ternary
?: (Not overloadable - use "implicit operator bool" or "operator true")

Assignment
=  (Not overloadable - for combined operator and assignment (such as +=), just use the operator (+)) 
```

注意：`implicit operator bool`如果同时定义了 True 和 False 运算符，则 C# 编译器更喜欢使用它们。

根据引用的[StackOverflow 问题](https://stackoverflow.com/questions/3016429/reflection-and-operator-overloads-in-c-sharp?lq=1)，C# 编译器也发出/理解以下方法名称，但是

*   我已经在 Visual Studio 2015 和 C#6.0 中运行了测试，试图让它们工作，并且
*   C#5.0 规范列出了“完整的一元 [和二元] 运算符函数名称集”（附录 A，第 469 页），这些都没有出现在其中。

```
Unary
&   op_AddressOf
*   op_PointerDereference

Binary
.   op_MemberSelection
->  op_PointerToMemberSelection

    op_SignedRightShift
    op_UnsignedRightShift

=   op_Assign
*=  op_MultiplicationAssignment
/=  op_DivisionAssignment
%=  op_ModulusAssignment
-=  op_SubtractionAssignment
+=  op_AdditionAssignment
<<= op_LeftShiftAssignment
>>= op_RightShiftAssignment
|=  op_ExclusiveOrAssignment
&=  op_BitwiseAndAssignment
|=  op_BitwiseOrAssignment

    op_UnsignedRightShiftAssignment
    op_SignedRightShiftAssignment

,   op_Comma 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-17T12:51:07.230

该网站给出了 C# 运算符的名称列表，显示了运算符、操作（名称）、示例和结果：[C# 运算符列表](http://techmantium.com/c-operator-list/ "C# 运算符列表")

# project-management - 什么是以及如何进行 WBS？

> ID：649376
> 
> 赞同：7
> 
> 时间：2009-03-16T05:43:49.387
> 
> 标签：project-management

我想知道你们中有多少人（项目经理和技术主管）使用 WBS（工作分解结构）进行项目规划？我听说这是一件好事，但是有很多“好事”要做，最终都没有成功。

这真的有助于项目规划吗？如果是这样，那么正确的方法是什么。可能一些链接/文章会有所帮助。

请记住我不是项目经理，但有时我必须完成他的任务..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-16T06:10:56.313

在传统的项目管理中，如果使用得当，WBS 是一个非常宝贵的工具。

我总是以自上而下的方式完成它，从主要工作开始：

*   用户界面
*   后端
*   数据转换

并简单地深入到更具体的级别

*   提款交易的数据输入屏幕
*   查询以获取用户历史记录
*   STATS12 表从 1.1 版到 1.2 版的转换

直到工作分解结构中的每个元素都小于报告期。

我的意思是，如果我必须每两周向上报告一次进度，那么任何一个元素的时间都不能超过估计的八天。如果是，则需要进一步分解。

这具有以下主要有益效果：

*   如果大多数估计是正确的，我可以在每次会议上报告进度——这对 PM 来说总是不错的 :-)。
*   较小的工作总是比较大的工作更容易准确估计。
*   落后于计划的速度很快就会变得明显。
*   保存有关估计的历史数据及其与现实的最终准确性，可为您提供下一个周期的更多详细信息，以便您可以智能地调整估计。

最后一点在未来的估计中很重要。例如，如果 Sam 持续低估用户界面工作 10%，那么您知道将来要提高这些估计。

这应该发生在 IMNSHO，否则你的 PM 工作比工程更多的是猜测/黑魔法。

抱歉，我无法为您提供任何链接，因为这主要是多年从事该角色的痛苦经验。我确实可以访问很多链接以使其更容易，但它们是公司内部的（我们足够大，可以拥有自己的方法）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-17T05:41:12.553

WBS 肯定会帮助您规划您的项目。它们对于确保您的赞助商和团队成员正在关注同一个项目特别有用，尽管可能只是处于不同的级别。

Work Down Structure 是您将在项目中进行的工作的地图。WBS 应该用于一致地解释您将要实现什么，您将如何实现它，需要多长时间以及要花费多少。

WBS 不会自己完成所有这些事情，但它是用于规划项目的早期构建块之一。您通常会在定义/验证项目范围后创建 WBS。您需要详细的范围，因为您的 WBS 将从您的可交付成果中分离出来。

创建 WBS 是一个自上而下的过程，您可以在其中列出可交付成果，然后将它们分解为工作包。如果您正在创建一个新的金融系统，您可能有几个可交付成果；

```
1\. General Ledger
2\. Journal Interface
3\. Account Payable module
4\. Accounts Recievable module
5\. Bank Interface
6\. Reporting 
```

上述可交付成果将构成您的 WBS 的顶部。

```
1.0.0 General Ledger
  1.0 Transaction Ledger
  2.0 Accounts Maintenance
2.0.0 Journal Interface
  1.0 Journal creation
  2.0 Journal review
  3.0 Journal update
  4.0 Journal deletion
3.0.0 Account Payable module
  1.0 AP Invoice creation
  2.0 AP Invoice review
  3.0 AP Invoice update
  4.0 AP Invoice deletion
4.0.0 Accounts Recievable module
  1.0 AR Invoice creation
  2.0 AR Invoice review
  3.0 AR Invoice update
  4.0 AR Invoice deletion
5.0.0 Bank Interface
  1.0 Generic Payment interface
  2.0 ANZ Bank interface
  3.0 Westpac Bank Interface
  4.0 Commonwealth Bank interface
6.0.0 Reporting
  1.0 Trial Balance
  2.0 Balance Sheet
  3.0 Operating Statement
  4.0 Invoices Pending 
```

（注意：编号系统很方便。例如：您会知道 6.3.2 是创建运营报表报告的第二个任务。）

然后，您将继续将它们分解为工作包，每个工作包需要 4 小时到 5 天才能完成。完成 WBS 后，您可以让您的团队成员或专家估算每个工作包（任务）自下而上所需的时间。然后，这些估计将帮助您计划与 WBS 和商定的原始范围一致的初始时间表和预算。

为什么要这样做？有几个原因，首先是易于沟通。您的估算员需要低水平的工作包（即：4 小时到 5 天）才能准确估算。但是您的赞助商需要高水平的具体可交付成果来评估您的日程安排和预算。通过尽早决定 WBS，您可以同时实现这两个目标。

通过使用一致的 WBS，发起人可以查看您的日程安排和预算，并将其与您的原始计划相关联。他们可能会认为 4.0.0 不值得付出努力。这是从您的可交付成果中衍生出来的 WBS 的美妙之处，您的发起人只需查看第一层即可了解正在发生的事情。

如果您尽早定义 WBS，您的发起人、您的早期团队成员和其他利益相关者可以看到他们参与的内容，也可能发现您的项目中缺少的内容。上面陈旧的示例中缺少很多内容，专家在开始之前很容易发现并修补漏洞。

这里的关键点是；

```
1\. Create your WBS from your deliverables
2\. Break the WBS down into work packages between 4 hours to 5 days long
3\. Estimate on the work packages
4\. Report your schedule against the top level(s) of your WBS
5\. Report your budget against the top level(s) of your WBS 
```

复杂（即：昂贵或有风险）的项目通常需要另一个步骤。大型项目或具有高风险概率的项目通常是分阶段进行的。这仅仅意味着将您的可交付成果分组为顶层阶段。每个阶段都应该产生可衡量的东西，并让您的赞助商决定是否继续。这样你就避免了大爆炸的方法。在进入下一阶段之前，应判断每个阶段是否已完成，经验教训已完成等。大型软件开发、构建和构建都是以这种方式完成的，实验项目也是如此，因为可能无法保证成功，因此需要仔细监控结果。

上面的同一个项目分为几个阶段；

```
1.0.0.0 Phase 1
  1.0.0 General Ledger
    1.0 Transaction Ledger
    2.0 Accounts Maintenance
  2.0.0 Journal Interface
    1.0 Journal creation
    2.0 Journal review
  3.0.0 Reporting
    1.0 Trial Balance    

2.0.0.0 Phase 2
  1.0.0 Journal Interface
    1.0 Journal update
    2.0 Journal deletion
  2.0.0 Account Payable module
    1.0 AP Invoice creation
    2.0 AP Invoice review
    3.0 AP Invoice update
    4.0 AP Invoice deletion
  3.0.0 Reporting
    1.0 Balance Sheet
    2.0 Operating Statement

2.0.0.0 Phase 3
  etc etc etc 
```

您的 WBS 应该与您的可交付成果有明确的联系，并且您可以对复杂的项目使用分阶段。无论哪种方式，逻辑都是相同的，继续分解您的 WBS，直到您拥有可以在 4 小时到 5 天内完成的具体任务的最低级别工作包。您和您的团队成员需要专注于完成工作包，但是您和您的发起人将专注于监控和控制 WBS 的顶级一或两个级别。

**编辑：** WBS 不应该真的一直到任务。我已经发布了一个关于[任务和 WBS](http://officeadd.in/pm_tools/what_is_a_task_and_how_long_should_it_be_.aspx "漂亮的图表中的任务和 WBS")的更清晰的例子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-16T12:14:43.347

WBS 是必不可少的——根据 Capers Jones 的说法：缺少/未知/不完整的需求、设计和计划是项目失败的主要原因，WBS 有助于发现和明确定义项目范围。我使用了从白板到思维导图工具的各种工具。不要让工具束缚您的手，找到一个有效的工具或只使用纸张。

# c# - C# 中的不间断异常

> ID：649378
> 
> 赞同：5
> 
> 时间：2009-03-16T05:44:30.010
> 
> 标签：c#, .net-2.0, system.net

我正在编写一些必须执行基本 HTTP GET 和 POST 的 C# 2.0 代码。我正在使用 System.Net.HttpWebRequest 发送这两种类型的请求，并使用 System.Net.HttpWebResponse 来接收这两种请求。我的 GET 代码如下所示：

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(String.Format("{0}?{1}",
    URLToHit,
    queryString));
request.Method = "GET";
request.Timeout = 1000; // set 1 sec. timeout
request.ProtocolVersion = HttpVersion.Version11; // use HTTP 1.1
try
{
    HttpWebResponse response = (HttpWebResponse)request.GetResponse();
}
catch(WebException e)
{
    // If I do anything except swallow the exception here, 
    // I end up in some sort of endless loop in which the same WebException 
    // keeps being re-thrown by the GetResponse method. The exception is always 
    // right (ie: in cases when I'm not connected to a network, it gives a 
    // timed out error, etc...), but it should not be re-thrown!
} 
```

和我的 POST 代码非常相似。

当 URLToHit 返回 HTTP 状态 200 时，最后一行工作正常，但在任何其他情况下（即：非 200 HTTP 状态、无网络连接等），都会引发 System.Net.WebException（这是预期的，根据到 MSDN 文档）。但是，我的代码从未超过那条线。

当我尝试对此进行调试时，我发现我无法跳过或继续越过最后一行。当我尝试这样做时，会重新发出请求并重新抛出异常。

关于我可以做些什么来使请求只发出一次的任何想法？我从来没有在任何基于异常的代码中看到过这样的事情，而且我没有想法。我的代码的任何其他部分都不会发生类似的情况，只是处理 System.Net 功能和构造的部分。

谢谢！

（更新：围绕 GetRequest 方法添加了 try/catch）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-16T06:15:28.547

C# 中没有“不间断”异常之类的东西。要控制异常期间发生的情况，您可以使用 try-catch 块。

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(String.Format("{0}?{1}",
    URLToHit,
    queryString));
request.Method = "GET";
request.Timeout = 1000; // set 1 sec. timeout
request.ProtocolVersion = HttpVersion.Version11; // use HTTP 1.1

try
{
    HttpWebResponse response = (HttpWebResponse)request.GetResponse();

    // Code here runs if GetResponse() was successful.
}
catch (WebException ex)
{
    // Code here runs if GetResponse() failed.
}

// Code here is always run unless another exception is thrown. 
```

没有“不间断异常”的原因是，如果出现异常，您的代码可能无法按照您的意图进行。例如，您希望“response”变量包含什么？你会用它做什么？try-catch 块使您可以完全控制它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-12-16T13:13:10.587

我已经看到了与此类似的问题，通常只有在调试器本身中，抛出异常的行才会重新运行，但这仅在异常最终未被捕获时才会发生。

你说它只在你重新抛出 catch 块时才会表现出这种行为。由于您重新抛出异常，该异常最终在哪里被捕获和处理（即由**不**以（重新）抛出结束的捕获处理程序）？

如果答案是“无处”，那么这就是您的问题 - 在调试器下，您可能会看到异常抛出行的重新运行，并且当正常运行时，应用程序通常会由于未捕获的异常而崩溃。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-12-15T17:43:40.033

我有完全一样的问题。这是我的制作方法：

```
 bool shouldRetry = true;
        do {
            try
            {
                Stream newStream = myHttpWebRequest.GetRequestStream();
                newStream.Write(byteArray, 0, byteArray.Length);
                newStream.Close();
                HttpWebResponse response = (HttpWebResponse)myHttpWebRequest.GetResponse();
                shouldRetry = false;
                response.Close();
                tries++;
                status = response.StatusDescription;
            }
            catch (WebException e)
            {
                tries++;
                if (tries >= 5)
                {
                    throw e;
                }
                else
                {
                    Thread.Sleep(1000);
                }
            }
        } while (shouldRetry); 
```

为了引发异常，我更改了我的主机表，因此 URI 转到我的 localhost，它没有提供任何正确的响应。

但是不断抛出异常！如果我在 Visual Studio 中调试，它会停在

```
throw e; 
```

带有“未捕获的异常”通知/框。如果我按“播放”继续调试，同一行抛出异常，我无法在代码中前进。

另外，我在哪里抛出错误也没关系。我试过保存它并在 do/while、函数调用等之后抛出它。异常仍然被抛出并且一直存在。离开的唯一方法是停止调试器/退出网络服务器。（在 localhost 上，该进程占用了 100% 的 CPU），当这种状态发生在 webserver 主机上时，IIS 会在一段时间后重新启动。

Aaron，你有没有解决过这个问题？我需要那个例外，我不能“吞下”它。

**更新：2010-12-16**

此代码位于名为 send() 的函数中。该函数实际上是在这样的 ThreadPool.QueueUserWorkItem 中调用的。

```
 ThreadPool.QueueUserWorkItem((object state) =>
            {
                Thread.Sleep(1);
                try
                {
                    send();
                }
                catch (Exception e)
                {
                    throw e;
                }
            }); 
```

我目前正在尝试找出这是否与在我的情况下最终导致服务器崩溃的不间断异常有关。正如我所说..我在哪里发现异常并不重要。

**更新：2010-12-16（第 2 部分）**

如果我避免使用 ThreadPool.QueueUserWorkItem，我**不会**得到永无止境的错误。

我将继续调查.. 但也许我可以在没有 ThreadPool.QueueUserWorkItem 的情况下进行管理。

**更新：2010-12-16（第 3 部分）**

```
Thread.CurrentThread.Abort(); 
```

而不是抛出错误解决了我的问题

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-12-16T13:49:20.420

另一个注意事项，这两个代码片段之间存在差异：

```
catch (Exception e)
{
    throw e;
}

catch (Exception e)
{
    throw;
} 
```

第一个示例实际上会将异常中的堆栈跟踪重置为当前堆栈位置，第二个示例将保留现有的堆栈跟踪。如果您将代码切换到第二个示例，它可能会帮助您调试问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-12-16T13:24:49.720

这里有一些值得深思的地方：调试器也可以执行代码。例如，当您评估一个属性（在手表或 QuickWatch 中，甚至只是将鼠标悬停在其名称上以获取值工具提示）时，调试器将执行底层代码。并击中它在此期间遇到的任何断点。也许这就是原因？后续异常中的调用栈是什么？没有调试器也会发生这种情况吗？

# java - 在 netbeans gui 框架中使用按钮

> ID：649397
> 
> 赞同：1
> 
> 时间：2009-03-16T06:01:55.070
> 
> 标签：java, user-interface, button, jframe, netbeans6.5

好的，所以我在 JAVA 方面很菜鸟，而且真的是一般的编程。我正在尝试制作一个使用 GUI 界面运行的石头、纸、剪刀应用程序。我正在尝试的是我想到的最简单的事情，按下一个按钮供您选择（r、p 或 s），这将在程序的其余部分中使用一个变量来与计算机的选择进行比较，找到获胜者等。我已经完成了程序，问题是 GUI 的东西。我正在使用 netbeans 和 JFrame，这对我来说是全新的。我有很多问题，也许有人可以链接到我的一个不错的教程，但是到目前为止，使用官方 netbeans 站点并没有太大帮助。无论如何：

1.  我不确定将在文本程序中的主方法代码放在哪里，创建一个新类，或者将它放在我使用的框架的主方法中。

2.  因此，我什至无法编译的原因是主函数试图使用我想在按钮中创建的变量。我猜我不知道整个操作顺序。我查看了 netbeans 示例，我认为我可以通过做一些更复杂的事情来完成这项工作，但这似乎没有必要？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-10T09:10:10.373

这是开始[学习 Swing 的好地方。](http://java.sun.com/docs/books/tutorial/uiswing/) 我要提醒您，如果您想快速创建一个大的 GUI，那么使用 NetBeans 非常好，但如果您还不熟悉 Swing 的工作原理，可能会导致比它解决的问题更多的问题。

从我在项目中学到的一些技巧：

*   在开始编写 GUI 之前，考虑一下程序的底层模型是什么。例如，也许您会使用类似以下伪代码的游戏类：

```
开始新游戏
   获得玩家的选择
   为计算机随机生成一个选项
   比较选择
      如果玩家的选择更强
         玩家获胜
      否则计算机获胜
   返回获胜者
```

*   当您要构建 GUI 时，使用[模型-视图-控制器模式是一个很好的起点。](http://en.wikipedia.org/wiki/Model-view-controller)这样可以确保程序的组件之间存在分离；如果您需要更改视图或模型，请不要破坏其他组件。

*   这在 Java 的实践中通常意味着您将视图和控制器包装在一起，通常像 qpingu 指出的那样扩展 JFrame。JFrame 需要引用您的模型类和包含各种控件的面板。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-01-19T17:53:06.103

像你习惯的那样开始输入代码的地方是源包目录，通常命名为你所谓的新项目：YourFileName.java

关键是在新项目的文件名中查找你在设置中添加的名称。

进入后，有一些方法可以为您启动应用程序。底部是你和我最熟悉的 main() 所在的位置 :) 。

```
 ...

    @Override 
    protected void configureWindow(java.awt.Window root) {
    }

    /** 
    * A convenient static getter for the application instance.
    * @return the instance of DesktopApplication1
    */

    public static DesktopApplication1 getApplication() {
        return Application.getInstance(DesktopApplication1.class);
    }

    /**
    * Main method launching the application.
    */

    public static void main(String[] args) {
    launch(DesktopApplication1.class, args);

    }
} 
```

就个人而言，我更喜欢桌面应用程序，因为它开始时会为您提供大量预先生成的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-16T06:22:01.433

你想找到一些关于 Swing 的文章和教程。

这里有一些代码可以帮助你：

```
// RockPaperScissors is the JFrame as well as the KeyListener.
// You could make another class to handle the key presses instead by doing:
// addKeyListener(new myOtherClass());
// So long as myOtherClass implements KeyListener
class RockPaperScissors extends JFrame implements KeyListener {
  public RockPaperScissors() {
    // Listen for any key presses.
    addKeyListener(this);
  }

  public void keyPressed(KeyEvent e) {
    // Figure out which key was pressed based on it's code.
    // http://java.sun.com/j2se/1.4.2/docs/api/java/awt/event/KeyEvent.html
    switch (e.getKeyCode()) {
      case e.VK_R:
        // Rock
      break;
      case e.VK_P:
        // Paper
      break;
      case e.VK_S:
        // Scissors
      break;
    }
  }

  // You can use these if you want, but we don't care about them.
  public void keyReleased(KeyEvent e) { }
  public void keyTyped(KeyEvent e) { }
}

void main() {
  // Set up the GUI (which is just a JFrame!)
  new RockPaperScissors();
  // The main program can exit because the JFrame runs on it's own thread.
} 
```

# java - 低延迟、高可用性的java分布式缓存

> ID：649398
> 
> 赞同：25
> 
> 时间：2009-03-16T06:04:19.090
> 
> 标签：java, caching, dht, trading

我从未使用过分布式缓存/DHT，如 memcached、jboss 缓存、ehcache 等。我想知道哪个（如果有）适合我使用。

首先，我没有做 Web 应用程序（因为这些项目中的大多数似乎都面向 Web 应用程序）。我为金融交易公司编写服务器（实际上是订单管理系统）。服务器本身并不太复杂。他们需要接收信息（市场数据、订单、执行等），然后将它们发送到目的地，同时可能会转换其中的一些信息。

我正在寻找这些产品来解决以下问题：

*   服务器状态的安全存储库。我宁愿将我的应用程序的逻辑构建为一堆转换器（类似于 Apache Camel）并将状态存储在“安全”的地方

*   这个存储库应该是分布式的：万一这些数据存储中的一个崩溃，应该再增加一两个，我应该能够无缝切换到它们

*   这个存储库应该*很快*。单位毫秒计算在这里，换句话说，消费/处理这些数据的系统是自动化系统，而不是人类点击链接。该系统需要具有高吞吐量*和*低延迟。通过将我的数据发送到进程之外，我必然会降低性能，但我试图平衡绝对原始速度和数据的绝对保护。

*   这个存储库应该是安全的。类似于关于几个在线备份的观点，这个系统需要将数据写入磁盘（可能不止一个磁盘）。

我真的很想停止编写自己的“事务服务器”。我是否正确地研究诸如 jboss 缓存、ehcache 等项目？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2010-05-02T22:46:20.943

[Hazelcast](http://www.hazelcast.com)是用于 Java 的开源、事务性、分布式缓存解决方案。非常适合金融应用。它是在 Apache 许可下发布的。

Hazelcast 实际上不仅仅是一个分布式缓存。它是 Java 的队列、主题、地图、多地图、锁、执行器服务的分布式实现。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-16T06:37:24.003

许多金融机构为此使用 Oracle Coherence。

但是，它不会匹配您列表中的所有点。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-03-16T07:37:12.720

我相信，**JBoss Cache**足以满足您的目的：

*   快速地
*   分散式
*   具有 MVCC 实现的事务性（无读锁定）
*   支持 JTA
*   支持异步模式
*   将数据逐出到持久存储（jdbc、bdb 等）

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2010-05-03T08:43:25.133

您在这里有一些很好的免费解决方案。但是，如果您需要更快的解决方案，您可以尝试[29 West](http://www.29west.com/products/) 或[Solace](http://www.solacesystems.com/solutions/messaging-middleware/guaranteed-messaging)，它们具有低于 100 微秒延迟的可靠/有保证的消息传递解决方案。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2011-06-28T14:05:37.467

看看[Gemfire](http://www.vmware.com/products/application-platform/vfabric-gemfire/overview.html)它在内存数据网格中的高性能。它提供分布式缓存、对象查询和事件通知。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2011-12-15T00:10:50.550

看看[Cacheonix 分布式缓存和数据网格](http://www.cacheonix.com/products/cacheonix/index.htm)。它通过提供一致的本地缓存并将缓存的数据分发到多个服务器以及复制缓存的数据来满足您对低延迟和可靠性的要求。全面披露：我为 Cacheonix 工作。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2010-05-06T06:30:19.977

由于以下原因，我会建议使用[NCache ，](http://www.alachisoft.com/ncache/index.html)

*   支持 .NET 和 java
*   广泛的拓扑结构
*   无需更改代码
*   高度分布式和可扩展性
*   完全免费（NCache Express）

# c# - .NET / C# 中的宽松异常是什么？

> ID：649399
> 
> 赞同：4
> 
> 时间：2009-03-16T06:05:37.730
> 
> 标签：c#, .net, optimization, compiler-construction

在 Reflector 中查看程序集时，我在程序集上发现了 CompilationRelaxations 属性。[此链接](http://www.gnu.org/projects/dotgnu/pnetlib-doc/System/Runtime/CompilerServices/CompilationRelaxationsAttribute.html)表示该属性指定是否：

> 优化器被授予额外的放宽异常的自由度。

**什么是宽松的异常，编译器会根据它们的“额外纬度”做什么。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-16T06:07:36.897

这允许编译器在优化中具有更大的灵活性。

有关详细信息，请参阅[CompilationRelaxations 枚举的帮助](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.compilationrelaxations.aspx)。

- - 编辑 - -

此时，属性使用一个枚举，只有一个选项：NoStringInterning

从 MSDN 帮助中，这是：

```
将程序集标记为不需要字符串文字实习。

在应用程序域中，公共语言运行时创建一个字符串
每个唯一字符串文字的对象，而不是制作多个副本。
这种称为字符串实习的行为在内部需要构建
消耗内存资源的辅助表。

```

但是，此属性被指定为使用枚举，因此以后可以轻松添加更多选项。不过，这是目前通过此程序集属性允许的唯一优化。

# c++ - 如何将文本文件拆分为单词？

> ID：649407
> 
> 赞同：8
> 
> 时间：2009-03-16T06:13:30.940
> 
> 标签：c++, string, parsing, token

我正在做一个任务，我应该读取一个文件并计算行数，同时计算其中的单词。我在 while 循环中尝试了 getline 和 strtok 的组合，但没有成功。

file:example.txt（要读取的文件）。

> 嗨，你好，真是一个惊喜。
> 欢迎来到这个地方。
> 愿您在这里过得愉快。
> （3行，和一些单词）。

读取文件.cpp

```
#include <iostream>
#include <fstream>
#include<string>
using namespace std;
int main()
{
  ifstream in("example.txt");
  int count = 0;

  if(!in)
  {
    cout << "Cannot open input file.\n";
    return 1;
  }

  char str[255];
  string tok;
  char * t2;

  while(in)
  {
    in.getline(str, 255);
    in>>tok;
    char *dup = strdup(tok.c_str());
    do 
    {
        t2 = strtok(dup," ");
    }while(t2 != NULL);
    cout<<t2<<endl;
    free (dup);
    count++;
  }
  in.close();
  cout<<count;
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-16T13:29:22.343

刚刚做对了！！刚刚删除了所有不必要的代码。

```
int main()
{    
    ifstream in("example.txt");
    int LineCount = 0;
    char* str = new char[500];

    while(in)
    {
        LineCount++;
        in.getline(str, 255);
        char * tempPtr = strtok(str," ");
        while(tempPtr)
        {
            AddWord(tempPtr, LineCount);
            tempPtr = strtok(NULL," ,.");
        }
    }
    in.close();
    delete [] str;
    cout<<"Total No of lines:"<<LineCount<<endl;
    showData();

    return 0;
} 
```

顺便说一句，最初的问题陈述是创建一个索引程序，该程序将接受用户文件并创建所有单词的行索引。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-18T03:20:54.060

我没有尝试编译它，但这里有一个几乎与使用 Boost 一样简单的替代方法，但没有额外的依赖。

```
#include <iostream>
#include <sstream>
#include <string>

int main() {
  std::string line;
  while (std::getline(std::cin, line)) {
    std::istringstream linestream(line);
    std::string word;
    while (linestream >> word) {
      std::cout << word << "\n";
    }
  }
  return 0;
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-16T13:51:30.620

如果您可以使用 boost 库，我建议您使用[boost::tokenizer](http://www.boost.org/doc/libs/1_38_0/libs/tokenizer/introduc.htm)：

> boost Tokenizer 包提供了一种灵活且易于使用的方法来将字符串或其他字符序列分解为一系列标记。下面是一个简单的例子，它将一个短语分解成单词。
> 
> ```
> // simple_example_1.cpp
> #include<iostream>
> #include<boost/tokenizer.hpp>
> #include<string>
> 
> int main(){
>    using namespace std;
>    using namespace boost;
>    string s = "This is,  a test";
>    tokenizer<> tok(s);
>    for(tokenizer<>::iterator beg=tok.begin();beg!=tok.end();++beg){
>        cout << *beg << "\n";
>    }
> } 
> ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-16T06:27:55.023

尝试将您的 `cout<<t2<<end;`语句移动到您的 while 循环中。

这应该使您的代码基本上可以正常工作。

您可能希望看到[这篇类似的帖子](https://stackoverflow.com/questions/236129/c-how-to-split-a-string)以了解其他方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-16T06:30:36.483

网上到处都是这样的例子。这是我在高中时写的一个数词程序。以它为起点。我想指出的其他事情是：

std::stringstream ：你 std::getline 整行，然后使用 std::stringstream 将其切成小块并标记它。您可以使用 std::getline 获取整行并将其输入到 std::string，然后您可以将其传递给 std::stringstream。

再一次，这只是一个示例，不会完全按照您的意愿执行，您需要自己修改它以使其执行您想要执行的操作！

```
#include <iostream>
#include <map>
#include <string>
#include <cmath>
#include <fstream>

// Global variables
        std::map<std::string, int> wordcount;
        unsigned int numcount;

void addEntry (std::string &entry) {
        wordcount[entry]++;
        numcount++;
        return;
}

void returnCount () {
        double percentage = numcount * 0.01;
        percentage = floor(percentage + 0.5f);

        std::map<std::string, int>::iterator Iter;

        for (Iter = wordcount.begin(); Iter != wordcount.end(); ++Iter) {
                if ((*Iter).second > percentage) {
                        std::cout << (*Iter).first << " used " << (*Iter).second << " times" << std::endl;
                }
        }

}

int main(int argc, char *argv[]) {
        if (argc != 2) {
                std::cerr << "Please call the program like follows: \n\t" << argv[0] 
                        << " <file name>" << std::endl;
                return 1;
        }

        std::string data;

        std::ifstream fileRead;
        fileRead.open(argv[1]);
        while (fileRead >> data) {
                addEntry(data);
        }
        std::cout << "Total words in this file: " << numcount << std::endl;
        std::cout << "Words that are 1% of the file: " << std::endl;
        returnCount();
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-25T00:24:02.050

```
ifstream is {"my_file_path"}; 
vector<string> b {istream_iterator<string>{is},istream_iterator<string>{}}; 
```

不要忘记包括这个：

```
<iterator> 
```

# asp.net-mvc - 你能在每个动作上应用 ASP.NET-MVC 中的 ActionFilter

> ID：649409
> 
> 赞同：6
> 
> 时间：2009-03-16T06:14:38.300
> 
> 标签：asp.net-mvc, actionresult

我想将 ASP.NET MVC 中的[ActionFilter](http://weblogs.asp.net/rashid/archive/2008/03/28/asp-net-mvc-action-filter-caching-and-compression.aspx)应用于我的应用程序中的每个操作 - 在每个控制器上。

有没有办法在不将其应用于每个 ActionResult 方法的情况下做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-03-16T06:53:55.397

是的，您可以这样做，但这不是开箱即用的方式。我做了以下事情：

1.  创建一个基本控制器类并让所有控制器都从它继承
2.  创建一个动作过滤器属性并让它继承自 FilterAttribute 和 IActionFilter
3.  使用新的操作过滤器属性装饰您的基本控制器类

以下是操作过滤器属性的示例：

```
public class SetCultureAttribute : FilterAttribute, IActionFilter 
{ 
    #region IActionFilter implementation

    public void OnActionExecuted(ActionExecutedContext filterContext)
    {
        //logic goes here
    }

    public void OnActionExecuting(ActionExecutingContext filterContext)
    {
        //or logic goes here
    }

    #endregion IActionFilter implementation
} 
```

这是具有此属性的基本控制器类的示例：

```
[SetCulture]
public class ControllerBase : Controller
{
    ...
} 
```

使用此方法，只要您的控制器类继承自 ControllerBase，那么将始终执行 SetCulture 操作过滤器。如果您想要更多详细信息，我有一个完整的示例并将其发布[在我的博客上。](http://www.iansuttle.com/blog/post/ASPNET-MVC-Action-Filter-for-Localized-Sites.aspx)

希望有帮助！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2011-04-29T17:28:56.350

事情如何变得更好......2年后我们有了

```
public static void RegisterGlobalFilters(GlobalFilterCollection filters)
    {
        filters.Add(new HandleErrorElmahAttribute());
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-16T07:40:55.660

您不必将其应用于每个操作，您只需将其应用于每个控制器（即，将属性放在类上，而不是方法上）。

或者，正如 Ian 所提到的，您可以将其放在基本控制器类上，然后从该控制器扩展。

# visual-studio - 在 Visual Studio 之外开发 XNA

> ID：649411
> 
> 赞同：5
> 
> 时间：2009-03-16T06:17:00.447
> 
> 标签：visual-studio, ide, xna

有一些用于开发 XNA 游戏的替代 IDE 吗？

例如，我可以将 XNA 集成到#develop 中吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-16T06:21:27.067

这取决于你想用 XNA 做什么。

您可以在 VS 之外使用程序集。但是，内容创建管道几乎直接与 MSBuild 相关联，因此如果您想使用它，您将需要坚持使用 Visual Studio。

但是，XNA 旨在与 Visual Studio Express Edition 一起使用，因此它是一个免费选项。

# c# - 自动执行方法

> ID：649413
> 
> 赞同：1
> 
> 时间：2009-03-16T06:17:38.073
> 
> 标签：c#, .net, asp.net, automation

我如何让 Web 服务器在每个月的 1 日上午 10 点执行某种方法？如果当时服务器停机，有什么方法可以确保在服务器返回时执行该方法..

任何想法将不胜感激..

编辑：是的，Windows服务器

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-16T06:23:56.030

使用[Windows 任务计划程序](http://msdn.microsoft.com/en-us/library/aa383614(VS.85).aspx)似乎是一个不错的选择。

# c# - 将值插入多个 SQL 表

> ID：649422
> 
> 赞同：1
> 
> 时间：2009-03-16T06:24:25.517
> 
> 标签：c#, sql, sql-server

插入响应 C# 和 SQL 服务器中许多表的表数据的好方法是什么？

因此，例如说我有以下表格：

```
Products: PK=PID, Product_Name
Build: PK:BID, Build_Number, FK:PID
Files: PK:FID, File_Name, FK:PID
FileDetails: PK:FDID, FK:FID, FK:BID, File_Size, File_Version 
```

所以所有的主键都是自动递增的数字

所以我有一个 xml 文件，其中有一行信息，例如：

```
Product_Name ,Build_Number,File_Name,File_Size,File_Version
FooCreator1.0,112233      ,foo.exe  ,123456   ,3.5
FooCreator1.0,112233      ,bar.exe  ,234567   ,1.5 
```

我希望能够将行添加到我的表中。想象一下我的数据库是空的。

我是否必须首先添加所有产品，然后添加所有构建，然后添加所有文件，然后加入所有表，然后添加所有文件详细信息？

编辑：我将有大约 20'000 行，并且我将在最终唯一表中每行存储大约 40 个值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-16T06:33:47.600

这就是我会做的，虽然我不确定这是最好的方法：

```
declare @PID bigint
declare @BID bigint
declare @FID bigint

insert into Products (Product_Name)
values ('FooCreator1.0')

select @PID = scope_identity()

insert into Build (Build_Number, PID)
values (112233, @PID)

select @BID = scope_identity()

insert into Files (File_Name, PID)
values ('foo.exe', @PID)

select @FID = scope_identity()

insert into FileDetails (FID, BID, File_Size, File_Version)
values (@FID, @BID, 123456, '3.5') 
```

类似的东西？可能想在事务中运行整个事情，以防出现任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-16T06:36:03.117

本质上，是的（最后一个。但是你*如何*做可能取决于所涉及的行数。如果你有几百个（可能一千左右），那么你可以很高兴地使用像 LINQ-to-SQL 这样的东西：创建您需要的对象，并用于`InsertOnSubmit`将必要的项目添加到数据上下文中。最后，调用`SubmitChanges`（工作完成；其他 ORM 工具将类似地工作）。

如果您有数万行（或其他），那么您可能只需将整个 xml 放入数据库（可能是带有`xml`参数的存储过程）。在数据库使用sql/xml，从参数做4`INSERT`条语句。`xml`

对于数十万/数百万行，您希望使用`SqlBulkCopy`将数据推送到临时表中（布局如您的示例） - 然后使用存储过程来执行 4`INSERT`秒。让 xml 表现得像 csv 是[定制数据阅读器](http://groups.google.com/group/microsoft.public.dotnet.languages.csharp/msg/b1d70b504cdee2ad)的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-16T06:32:08.867

是的。打开一个事务并按后续顺序添加行。您必须先添加产品并获取其 ID 才能添加构建并将该 ID 用作外键。您也可以将其编写为存储过程。SQL Server 没有列表类型的过程参数，但是如果您想一步传递这样的复杂结构，并且您已经拥有 XML 格式的文件，则可以传递该文档，如 SQL Server 2005（您没有t 说您使用的是哪个版本）支持[XML 参数](http://msdn.microsoft.com/en-us/library/ms345117.aspx)。有了它，您可以在存储过程中使用 XPath 来查询内容并构建数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-16T06:32:55.917

C#/.NET 可能有更好的方法，但通常的方法是按照您的建议（大致）。对于 XML 文件中的每一行，您必须首先创建 PRODUCT（如果它已经存在，则获取它的 PID）。

如果不存在则添加 BUILD（如果存在则获取 BID）。

如果文件不存在，则添加文件（如果存在则获取 FID）。

然后在 FILEDETAILS 中添加或更新多对多关系。

每个插入/选择操作（产品、构建、文件）将如下所示：

```
insert into PRODUCTS (PRODUCT_NAME) VALUES ('FooCreator1.0')
// ignore errors from preceding statement
select PID from PRODUCTS where PRODUCT_NAME = 'FooCreator1.0' 
```

因为，如果有人在创建该产品时打败了你，你只需要它的 PID 用于以后的插入。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-16T10:44:33.953

我建议使用[Andy White](https://stackoverflow.com/questions/649422/insert-values-into-multiple-sql-tables/649450#649450)在[存储过程](http://msdn.microsoft.com/en-us/library/ms187926(SQL.90).aspx)中提出的插入语句，原因如下：

*   性能，允许数据库编译和缓存语句。
*   安全性，以输入数据为参数调用 SP 将限制恶意值的使用。
*   将 DB 结构与客户端分开，如果/当您想要更改架构时，您将不需要重新编译。
*   无需客户端干预即可添加内部日志记录/错误处理的可能性。

当然一切都取决于操作的使用。如果是一次性操作，那么它可能会矫枉过正。

您应该将语句封装在[事务](http://msdn.microsoft.com/en-us/library/ms188929(SQL.90).aspx)中以确保全部或全部完成，甚至使用[TRY-CATCH](http://msdn.microsoft.com/en-us/library/ms187368(SQL.90).aspx)。但正如我所写的，这一切都取决于操作的使用。

/JB

# sql - 如何将 vb.net 中日期的空值传递给 sql 存储过程？

> ID：649426
> 
> 赞同：7
> 
> 时间：2009-03-16T06:27:03.403
> 
> 标签：sql, vb.net, stored-procedures, parameters, null

我的应用程序是带有 vb 的 asp.net。

在我的页面中，我有一个用于传递日期的文本框。如果我没有输入日期并单击提交，我必须将空值传递给存储过程。

我尝试了以下代码，例如`DBNull.Value`和`DateTime.MinValue`。在那种情况下，而不是 null，`"#12:00:00#"`正在传递。我必须通过 Null。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-03-16T06:32:15.013

只需为参数分配值 DBNull.Value

[编辑]

如果您使用的是 SqlParameter（感谢 Jon），那么如果它给出任何错误，您可以像这样设置它

```
parameter.Value = DBNull.Value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-04-01T10:35:10.197

```
Dim pflt_dateto As SqlParameter = cmd.CreateParameter
        pflt_dateto.Direction = ParameterDirection.Input
        pflt_dateto.DbType = SqlDbType.Int
        pflt_dateto.IsNullable = True
        pflt_dateto.ParameterName = "flt_dateto"

        If String.IsNullOrEmpty(dateto) Then
            pflt_dateto.SqlValue = DBNull
        Else
            pflt_dateto.SqlValue = dateto
        End If

        cmd.Parameters.Add(pflt_dateto) 
```

由于您设置了参数可为空，因此错误将消失。现在的问题是 .NET 将空整数作为 0 传递，所以我们需要处理它。

超

# asp.net - ASP.NET “特殊”标签

> ID：649428
> 
> 赞同：242
> 
> 时间：2009-03-16T06:27:46.537
> 
> 标签：asp.net, syntax, tags

像这样的“特殊” ASP.NET 标签的正式名称是什么：

```
<%# %>
<%= %>
<%@ %>
<%$ %> 
```

我似乎无法弄清楚这些概念或众所周知的名称，所以我在搜索更多信息时遇到了麻烦。作为奖励，任何人都可以快速了解所有可能的“特殊标签”以及它们每个人的作用（或指向我的资源）吗？

* * *

## 回答 #1

> 赞同：364
> 
> 时间：2009-03-16T06:37:09.633

正式名称是“[服务器端脚本分隔符](http://technet.microsoft.com/en-us/library/cc961121.aspx)”或“ [ASP.NET 内联表达式](http://support.microsoft.com/kb/976112)”。Visual Studio 2008 语法高亮设置对话框调用这些“HTML 服务器端脚本”。微软人员在他们的博客中称它们为“代码块”。

*   `<%@ %>`是[针对 ASP.NET 网页的指令](http://msdn.microsoft.com/en-us/library/t8syafc7(v=vs.100).aspx)。用于页面和控件以配置页面/控件编译器设置 ( `<%@ Control Inherits="MyParentControl" %>`)。
    *   `<%@ %>`也是一个[应用指令](http://msdn.microsoft.com/en-us/library/s42bzt8x(v=vs.100).aspx)。用于为 global.asax 指定特定于应用程序的设置。与页面指令不同，因为它只使用不同的标签集。
*   `<% %>`是一个[代码渲染块（用于内联代码）](http://msdn.microsoft.com/en-us/library/k6xeyd4z(v=vs.100).aspx)。[嵌入式代码块](http://msdn.microsoft.com/en-us/library/ms178135.aspx)的 4 种形式之一。用于将服务器端代码包含到生成类的[`Render()`方法](http://msdn.microsoft.com/en-us/library/system.web.ui.control.render.aspx)( ) 中。`<% x = x + 1; %>`格式：单/多行或多链接（例如`if/then/else`穿插html）但不能用于声明函数。
*   `<%= %>`是一个[代码渲染块（用于内联表达式）](http://msdn.microsoft.com/en-us/library/k6xeyd4z(v=vs.100).aspx)。用作简写`<%Response.Write(value)%>`
*   `<%: %>`（非官方的“ [Html 编码代码块](http://haacked.com/archive/2009/09/25/html-encoding-code-nuggets.aspx/)”）和之前的一样，但是输出是 HTML 编码的。
*   `<%# %>`是一个[数据绑定表达式](http://msdn.microsoft.com/en-us/library/bda9bbfx(v=vs.100).aspx)。`Eval`用于通过、、、或表达式进行单向（只读）或双向（可更新）绑定（例如`Xpath`，`Bind`下拉控件的选定值）。通过控件的属性标记将表达式绑定到数据绑定控件属性，或者作为一个单独的标记，该标记生成具有`DataBoundLiteralControl`其`Text`属性值的实例。`DataBinding`表达式由控件的事件处理程序评估。
*   `<%#: %>`是一个[HTML 编码的数据绑定表达式](http://www.asp.net/aspnet/overview/aspnet-and-visual-studio-2012/whats-new#_Toc318097391)（ASP.NET 4.5 中的新功能）。它结合了`<%# %>`和的功能`<%: %>`。
*   `<%$ %>`是一个[ASP.NET 表达式生成器](http://msdn.microsoft.com/en-us/library/d5bd1tad.aspx)。用于通过服务器标记属性对控件属性进行运行时表达式绑定。与`AppSettings`, `ConnectionStrings`, or一起使用`Resources`（或[您自己的自定义扩展名](http://msdn.microsoft.com/en-us/library/system.web.compilation.expressionbuilder(v=vs.110).aspx)，例如使用代码隐藏属性）。这些分配被添加到`OnInit()`生成的类的方法中。
*   `<%-- --%>`是一个[服务器端评论](http://msdn.microsoft.com/en-us/library/4acf8afk(v=vs.100).aspx)。用于从编译中排除内容（如果在代码隐藏中引用注释掉的控件，则会生成错误）。与 html 注释不同，内容*不会*包含在输出中。
*   `<!-- #Include ... -->`是一个[服务器端包含指令](http://msdn.microsoft.com/en-us/library/3207d0e3(v=vs.100).aspx)。用于将文件的内容插入到页面、控件或全局文件中。在用户控制过度且无法使用母版页的情况下很有用。

还有一个[代码声明块](http://msdn.microsoft.com/en-us/library/2cy7sxha(v=vs.100).aspx)，即最终的嵌入式代码块形式。

```
<script runat="server">
bool IsTrue() {
  return false;
}
</script> 
```

这用于将其他成员（方法等）包含到从 ASP.NET 标记生成的类中。这些只是[*“主要是为了保持与旧 ASP 技术的向后兼容性”*](http://msdn.microsoft.com/en-us/library/ms178135.aspx)才提供的，不建议使用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-03-16T06:35:05.800

您的姓名问题没有答案，但 MSDN [“ASP.NET 页面语法”](http://msdn.microsoft.com/en-us/library/fy30at8h(v=vs.100).aspx)页面非常好（或者更确切地说，这是顶级页面；它下面的页面提供了更多信息）。

编辑：我以前认为它`<%# ... %>`不包含在列表中，但当然它是在数据绑定表达式下。多哈。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-03-16T06:46:47.177

每当我对服务器端语法有疑问时，我总是发现[这个快速入门页面](http://quickstarts.asp.net/QuickStartv20/aspnet/doc/pages/syntax.aspx)非常有用。它详细介绍了 8 种不同的标记样式，并提供了每种标记样式的说明性示例，并解释了优缺点。

但是，它没有提到页面级指令，IIRC 在快速入门的其他地方有详细说明。

当然，这与 ASP.NET 2.0 有关。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2010-12-15T10:40:14.943

微软人有时称它们为“掘金”或“代码掘金”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-14T00:17:04.460

我还听说过这些被称为“V stings”的东西，包括在 StackOverflow 播客上。

# c# - 成功构建后将解决方案中的所有文件复制到另一个位置

> ID：649432
> 
> 赞同：0
> 
> 时间：2009-03-16T06:28:43.210
> 
> 标签：c#, copy, project, projects-and-solutions

我正在使用 Visual Studio 2008，C#，我有一个解决方案，它引用同一目录中的 3 个项目。我想在每次成功构建后将解决方案中包含的所有文件和文件夹复制到另一个位置。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-16T06:30:49.353

您可以通过[构建后事件来做到这一点。](http://msdn.microsoft.com/en-us/library/42x5kfw4.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-16T14:56:03.053

在我看来，自定义[MsBuild](http://msdn.microsoft.com/en-us/library/0k6kkbsd.aspx)目标在这里会更合适，因为您可能只有一个定义副本的地方，更重要的是，该副本可能只应在所有项目成功构建时才执行，每个成功构建项目的副本。

如果您不喜欢 msbuild，您还可以查看[PSake](http://code.google.com/p/psake/)

# asp.net-mvc - IIS6 中的 ASP.NET MVC 压缩选项

> ID：649440
> 
> 赞同：5
> 
> 时间：2009-03-16T06:30:52.940
> 
> 标签：asp.net-mvc, iis-6, compression

现在我坚持使用 IIS6 for ASP.NET-MVC（因为我还不能升级到 Server 2008）。它似乎不知道我的 RESTful URL 是动态文件并且没有压缩它们。

我所有的旧 .aspx 文件都被压缩（如 Fiddler 中所示），但不是`'/products/1001'`URLS 类型。

有没有办法让 IIS6 在 IIS6 中压缩我的 ActionResults 而无需使用[ActionFilter 之类的东西进行压缩](http://weblogs.asp.net/rashid/archive/2008/03/28/asp-net-mvc-action-filter-caching-and-compression.aspx)。

我假设 IIS7 足够聪明，知道它们是动态的。

如果你能告诉我 IIS6 是如何一开始就知道哪些文件是动态的，那就加分吧！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-16T07:14:20.420

由于 ASP.NET 的 HTTP 压缩通常从 1.0 版本开始使用 HttpModules 实现，并且 HttpModules 仍然属于 MVC 框架使用的 ASP.NET 请求管道，因此您仍然可以使用 HttpModule 来注入 GZIP 或 deflate 响应过滤器。

在这里，您可以找到一个非常好的、开源的、可立即发布的实现： [Ben Lowery 的 HttpCompress](http://blowery.org/httpcompress/)（在[Google Code](http://code.google.com/p/httpcompress/)下载）

您只需添加对 DLL 的引用，并在 web.config 中添加几行。它已经处理了非常奇特和罕见的情况和异常。您可以将排除项添加到您的 web.config，而不是基于文件扩展名（如在 IIS6 中），而是基于 mime 类型，这可能正是您所需要的。

我应该补充一点，我实际上已经使用这个库在 IIS6 上运行了一个 ASP.NET MVC 网站，所以我可以确认这在实践中有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-16T17:34:46.823

在 Web 配置中，您应该注册 StaticFileHandler 和 HTTP 模块

```
<add verb="GET,HEAD,POST" path="*" type="[Web.Front.Modules].StaticFileHandler"/>
<add name="HttpCompressionModule" type="[Web.Front.Modules].HttpCompressionModule"/> 
```

[您将在此处](http://msmvps.com/blogs/omar/archive/2008/06/30/deploy-asp-net-mvc-on-iis-6-solve-404-compression-and-performance-problems.aspx)找到源代码

但不要忘记在 IIS 上打开压缩

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-10-22T17:07:01.590

这是一个使用通配符映射和无扩展 url 的 MVC 和 IIS 6 似乎对我有用的选项：

1.  使用管理工具全局设置动态和静态压缩
2.  编辑 metabase.xml，使 HcScriptFileExtensions 在 CompressionSchemes 中为空。这将尝试压缩所有内容（包括 jpg 和 gif）。
3.  使用 DoDynamicCompression = "false" 属性在文件夹级别关闭动态压缩。这假设您的所有静态内容都是一个目录。
4.  在 HcFileExtensions 属性中添加您想要压缩的静态文件扩展名（css、js 等）。

这是一种解决方法，但我目前坚持使用 Server 2003 和 IIS 6。

# events - 处理 WebBrowser 控件上的关键事件

> ID：649441
> 
> 赞同：8
> 
> 时间：2009-03-16T06:31:40.130
> 
> 标签：events, browser, webbrowser-control, keydown

我`WebBrowser`在 C# 应用程序中使用该控件，并希望在`WebBrowser`获得焦点时处理所有关键事件，而不管关注哪个单个内容元素（输入字段、链接等）。我试图简单地向浏览器控件`KeyDown`事件添加一个事件处理程序，但这不起作用。我不想明确地将处理程序挂钩到每个 focusable `HtmlElement`。

如何在将所有关键事件传递给浏览器或其内容元素*之前接收它们？*

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-06-17T10:40:24.977

您有[PreviewKeyDown](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.previewkeydown.aspx)事件，只需将其连接起来。

```
private void wb_PreviewKeyDown(object sender, PreviewKeyDownEventArgs e)
{
    // your code handling the keys here, like:
    if (e.Control && e.KeyCode == Keys.C)
    {
        // Do something funny!
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T14:31:36.047

如果你想做一些事情，比如绕过 WebBrowser 控件中的 Enter 键，那么你就不走运了，因为控件没有 KeyPress 或 KeyDown 事件。KeyPreviewDownEventArgs 不提供任何方法来规避按键。唯一的方法是覆盖承载控件的窗体的 ProcessCmdKey 函数。例如：

```
Protected Overrides Function ProcessCmdKey(ByRef msg As Message, keyData As Keys) As Boolean

    If keyData <> Keys.Enter Then Return MyBase.ProcessCmdKey(msg, keyData)
    Return True

End Function 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-04T10:00:06.660

您可以将键处理程序添加到已加载文档的 Body 元素。默认情况下，这会捕获 body 元素的任何子元素中发生的相同事件。

```
webBrowser.Document.Body.KeyDown += MyKeyDownHandler;
...
private void MyKeyDownHandler(object sender, HtmlElementEventArgs e)
{
    // Set e.ReturnValue false if you want to cancel the key press
} 
```

我认为必须在文档加载后添加处理程序，例如在 DocumentCompleted 事件处理程序中。

# c# - 在 C# 中测试数组的相等性

> ID：649444
> 
> 赞同：37
> 
> 时间：2009-03-16T06:32:35.107
> 
> 标签：c#, arrays

我有两个数组。例如：

```
int[] Array1 = new[] {1, 2, 3, 4, 5, 6, 7, 8, 9};
int[] Array2 = new[] {9, 1, 4, 5, 2, 3, 6, 7, 8}; 
```

确定它们是否具有相同元素的最佳方法是什么？

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2009-04-01T02:35:42.843

您也可以使用[`SequenceEqual`](https://msdn.microsoft.com/en-us/library/bb348567(v=vs.110).aspx)，前提是首先对 IEnumerable 对象进行排序。

```
int[] a1 = new[] { 1, 2, 3, 4, 5, 6, 7, 8, 9 };    
int[] a2 = new[] { 9, 1, 4, 5, 2, 3, 6, 7, 8 };    

bool equals = a1.OrderBy(a => a).SequenceEqual(a2.OrderBy(a => a)); 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2009-03-16T06:47:57.020

通过使用[LINQ](http://en.wikipedia.org/wiki/Language_Integrated_Query)，您可以高效地实现它：

```
var q = from a in ar1
        join b in ar2 on a equals b
        select a;

bool equals = ar1.Length == ar2.Length && q.Count() == ar1.Length; 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2009-03-16T06:42:53.427

价值观总是独一无二的吗？如果是这样，怎么样（在检查相等长度之后）：

```
var set = new HashSet<int>(array1);
bool allThere = array2.All(set.Contains); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-03-16T06:53:07.723

```
var shared = arr1.Intersect(arr2);
bool equals = arr1.Length == arr2.Length && shared.Count() == arr1.Length; 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2009-04-27T06:53:14.770

使用扩展方法（在 3.0 中是新的）。如果两个数组的 Intersection 的长度等于它们的 Union 的长度，那么这两个数组是相等的。

```
bool equals = arrayA.Intersect(arrayB).Count() == arrayA.Union(arrayB).Count() 
```

简洁。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2010-10-20T16:46:54.433

有关最有效的方法（来自 Microsoft 代码的[反射](http://en.wikipedia.org/wiki/.NET_Reflector)），请参阅 Stack Overflow 问题*[Comparing two collections for相等性，而不管它们中的项目顺序如何](https://stackoverflow.com/questions/50098/comparing-two-collections-for-equality/3790621#3790621)*。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2012-12-29T21:23:42.470

Framework 4.0 引入了 IStructuralEquatable 接口，该接口有助于比较数组或元组等类型：

```
 class Program
    {
        static void Main()
        {
            int[] array1 = { 1, 2, 3 };
            int[] array2 = { 1, 2, 3 };
            IStructuralEquatable structuralEquator = array1;
            Console.WriteLine(array1.Equals(array2));                                  // False
            Console.WriteLine(structuralEquator.Equals(array2, EqualityComparer<int>.Default));  // True

            // string arrays
            string[] a1 = "a b c d e f g".Split();
            string[] a2 = "A B C D E F G".Split();
            IStructuralEquatable structuralEquator1 = a1;
            bool areEqual = structuralEquator1.Equals(a2, StringComparer.InvariantCultureIgnoreCase);

            Console.WriteLine("Arrays of strings are equal:"+  areEqual);

            //tuples
            var firstTuple = Tuple.Create(1, "aaaaa");
            var secondTuple = Tuple.Create(1, "AAAAA");
            IStructuralEquatable structuralEquator2 = firstTuple;
            bool areTuplesEqual = structuralEquator2.Equals(secondTuple, StringComparer.InvariantCultureIgnoreCase);

            Console.WriteLine("Are tuples equal:" + areTuplesEqual);
            IStructuralComparable sc1 = firstTuple;
            int comparisonResult = sc1.CompareTo(secondTuple, StringComparer.InvariantCultureIgnoreCase);
            Console.WriteLine("Tuples comarison result:" + comparisonResult);//0
        }
    } 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-03-16T06:40:10.687

我发现[这里](http://blog.slaven.net.au/archives/2008/03/16/comparing-two-arrays-or-ienumerables-in-c/)详述的解决方案是一种非常简洁的方法，尽管对某些人来说有点冗长。

最好的是它也适用于其他 IEnumerables。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-01-12T09:26:33.933

这将检查每个数组是否按顺序包含相同的值。

```
int[] ar1 = { 1, 1, 5, 2, 4, 6, 4 };
int[] ar2 = { 1, 1, 5, 2, 4, 6, 4 };

var query = ar1.Where((b, i) => b == ar2[i]);

Assert.AreEqual(ar1.Length, query.Count()); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-11-17T08:43:55.567

```
 public static bool ValueEquals(Array array1, Array array2)
    {
        if( array1 == null && array2 == null )
        {
            return true;
        }

        if( (array1 == null) || (array2 == null) )
        {
            return false;
        }

        if( array1.Length != array2.Length )
        {
            return false;
        }
        if( array1.Equals(array2))
        {
           return true;
        }
        else
        {
            for (int Index = 0; Index < array1.Length; Index++)
            {
                if( !Equals(array1.GetValue(Index), array2.GetValue(Index)) )
                {
                    return false;
                }
            }
        }
        return true;
    } 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-06-18T16:11:22.233

当然，有很多方法可以根据结构比较数组。要为上述答案添加更多内容，您可以编写自己的自定义比较器。假设您想检查两个数组是否都包含偶数元素 - 您根据应用程序的业务规则定义比较，这就是它如此主观的原因。

这是一种方法，编写自己的比较器。**请注意，对GetHashCode()**方法没有太多关注，您必须编写自定义相等逻辑，此时，基于默认行为（比较引用类型） .equals() 如果您使用会给您不同的结果另一个保存数组的集合，我们说这两个数组包含偶数，因此它们相等，但我们违反了“如果两个值 x 和 y 计算相等，则它们必须具有相同的哈希码”的规则。这里不要太担心，因为我们正在比较整数。话虽如此，这里是一个例子：

```
using System;
using System.Collections;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ConsoleApp5
{
    class EvenComparer : EqualityComparer<int>
    {

        public override bool Equals(int x, int y)
        {
            if((x % 2 == 0 && y % 2 == 0))
            {
                return true;
            }

            return false;

        }

        public override int GetHashCode(int obj)
        {
            return obj.GetHashCode();
        }
    }

    class Program
    {
        static void Main(string[] args)
        {

            //If you want to check whether the arrays are equal in the sense of containing the same elements in the same order

            int[] Array1 =  { 2, 4, 6};
            int[] Array2 =  {8, 10, 12 };

            string[] arr1 = { "Jar Jar Binks", "Kill! Kill!", "Aaaaargh!" };
            string[] arr2 = { "Jar Jar Binks", "Kill! Kill!", "Aaaaargh!" };

            bool areEqual = (arr1 as IStructuralEquatable).Equals(arr2, StringComparer.Ordinal);
            bool areEqual2 = (Array1 as IStructuralEquatable).Equals(Array2, new EvenComparer());

            Console.WriteLine(areEqual);
            Console.WriteLine(areEqual2);

            Console.WriteLine(Array1.GetHashCode());
            Console.WriteLine(Array2.GetHashCode());

        }
    }
} 
```

阅读答案后，我意识到没有人指定您必须包含

```
 using System.Collections; 
```

命名空间，否则您将在使用 IStructuralEquatable 接口时收到缺少 using 指令或程序集引用错误。

希望有一天它可以帮助某人

# java - 如何格式化双精度类型的变量

> ID：649447
> 
> 赞同：2
> 
> 时间：2009-03-16T06:33:17.380
> 
> 标签：java, formatting

我有一个 double 类型的变量，表示大约 34.323423423123456 的值。我想将其格式化为只有两位小数（例如 34.32），并正确舍入；例如 2.229934345 将变为 2.23。

我是 Java 新手，我从 C# 中知道的技巧都不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-16T06:48:38.140

与此[问题](https://stackoverflow.com/questions/153724/how-to-round-a-number-to-n-decimal-places-in-java)相关的使用 DecimalFormat [setRoundingMode](http://java.sun.com/javase/6/docs/api/java/text/DecimalFormat.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-16T06:52:47.850

这是一个示例格式字符串，我相信它正确地舍入了结果值。如果您需要对舍入或格式进行更多控制，请参阅 Markus 的帖子：

```
String.format("%.2f", 2.229934345); 
```

# colors - 平均定义线性渐变的两种颜色的最佳方法是什么？

> ID：649454
> 
> 赞同：46
> 
> 时间：2009-03-16T06:35:08.907
> 
> 标签：colors, rgb

如果我有两种颜色由它们的 RGB 值定义，我可以平均红色、绿色和蓝色值，然后组合定义看起来像两者视觉平均值的第三种颜色吗？

即NewColor = (R1+R2)/2,(G1+G2)/2,(B1+B2)/2

EDIT1：感谢所有回复。对于我目前的需求，我只处理颜色相同的颜色对，所以我认为平均它们会起作用。但是，我将尝试转换为 Lab Space 以确保该假设是正确的，并且该技术将在未来有用。

EDIT2：这是我的结果 FWIW。Color1 和 Color2 是我的两种颜色，中间的两列分别是 L *a* b 空间平均和 RGB 平均的结果。在这种情况下，两种颜色之间没有太大差异，因此平均技术输出的差异是微妙的。

![颜色平均技术的视觉比较](https://i.stack.imgur.com/MSqNt.jpg)

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2015-04-11T10:21:15.260

几个答案建议转换为 Lab 颜色空间 - 这可能是更复杂的颜色处理的好方法。

但是如果你只是需要一种快速的方法来取两种颜色的平均值，这可以在 RGB 空间中完成。您只需要注意一个警告：您必须在平均 RGB 值之前对其进行平方，然后对结果求根。（如果你只是取平均值，结果往往会太暗。）

像这样：

```
NewColor = sqrt((R1^2+R2^2)/2),sqrt((G1^2+G2^2)/2),sqrt((B1^2+B2^2)/2) 
```

这是一个很棒的视频，它解释了为什么这种方法很有效：[https ://www.youtube.com/watch?v=LKnqECcg6Gw](https://www.youtube.com/watch?v=LKnqECcg6Gw)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2009-03-16T07:19:11.280

看看[这个问题](https://stackoverflow.com/questions/398224/how-to-mix-colors-naturally-with-c)的答案。

基本上，您希望将颜色转换为称为[Lab 空间](http://en.wikipedia.org/wiki/Lab_color_space)的东西，并在该空间中找到它们的平均值。

实验室空间是一种表示颜色的方式，其中彼此接近的点是那些在人类看来彼此相似的点。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-03-16T07:01:26.923

我不知道从感知的角度来看，对组件进行简单平均是否是“最好的”（这听起来像是心理学家的问题），但这里有几个使用简单组件平均的例子。

![替代文字](https://i.stack.imgur.com/3dNp3.gif)

红芥绿的很丑，但插值似乎足够合理。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-03-16T07:09:05.300

[在HSL 颜色空间](http://en.wikipedia.org/wiki/HSL_color_space)中进行平均可能会产生更好的结果。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-03-16T07:29:56.620

是的。你可以像这样平均两种颜色。这是 OpenGL 用来将颜色混​​合在一起的方法（例如，在创建用于渲染远处物体的 Mip 贴图，或渲染 50% 透明纹理时）。对于许多情况，它快速、简单且“足够好”。然而，它并不完全真实，可能不会用于照片质量的图像。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-06-28T20:24:12.833

这很难。首先，一组 RGB 值不定义颜色。它们需要根据它们所指的原色（颜色空间）来解释，例如 sRGB、Rec.709、Rec.2020、Adobe RGB (1998) 等。

此外，我们通常遇到的 RGB 值与线性光不成比例：它们是使用非线性函数（伽马）“编码”的。有时（主要在视频应用程序中）“黑色”的值不是零，而是从零偏移，对于 8 位值通常为 16。而“白色”不是 255 而是 235。sRGB 和 Rec.709 共享 RGB 原色，但它们的 gamma 函数不同。

颜色空间转换从删除任何黑色偏移开始，使黑色为零。如果 gamma 函数中有断点（如 sRGB 和 Rec.709），则需要仔细缩放 RGB 值，使“white”为 1.0。

然后，通过执行原始伽马函数的逆来“解码”伽马。（一个答案建议对值进行平方，这是伽马解码的近似值。）现在您在某些颜色空间中具有线性光 RGB 值。此时，您可以从该颜色空间转换为 Lab 空间。大多数从 RGB 到 Lab 的转换都经过一个称为 XYZ 的中间颜色空间。

嵌套函数调用的步骤：

Lab = XYZ2Lab(RGB2XYZ(gamma_decode(offset_and_scale(RGB), *gammaFunction* ), *RGB 颜色空间*))

（实验室空间是在 1976 年开发的，旨在创建标准 CIE XYZ 空间的感知均匀扭曲。（Luv 是另一种尝试。）这个想法是两种颜色之间的欧几里得（直线）距离刚好- 任何两种颜色的距离明显不同（1“JND”）。Lab中两种颜色之间的距离称为“delta-E”。简单的delta欧几里得距离公式现在称为dE76。见[https：/ /en.wikipedia.org/wiki/Color_difference](https://en.wikipedia.org/wiki/Color_difference)）

在您的情况下，您可以平均两种 Lab 颜色以获得新的 Lab 颜色，然后反转所有转换以在您选择的颜色空间中返回 RGB。

这会让你接近，但不能保证，因为“颜色”是人类的感知，而不是物理量，并且众所周知难以可靠地表征。实验室在感知统一方面实际上并没有那么好。因此，他们没有修复 Lab，而是提出了一个新的、更复杂的 delta-E 函数，并内置了另一个 warp：DE94。这更好，但并不完美，因此在 2000 年出现了另一个提议：DE2000。也更好但并不完美。有关更多信息，请参见上面的 Wiki 页面。

如果 DE2000 不够好（或太复杂！），您可能会看看 Lab 的替代品[ICtCp](https://en.wikipedia.org/wiki/ICtCp)，它声称比 Lab 在感知上更统一。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-09-07T15:43:18.700

我认为，来自 arntjw 的答案朝着正确的方向发展，并识别了 Dan W 提到的对数底层。但是，正确的几何平均值不是 sqrt((C1^2+C2^2)/2)，而是 sqrt (C1*C2)。所以平均颜色是：

```
NewColor = sqrt(R1*R2),sqrt(G1*G2),sqrt(B1*B2) 
```

生成的颜色更接近我们的预期。您可以使用高阶根泛化到更多颜色，并通过向其分量添加指数来加权每种颜色。

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2013-03-14T14:08:31.423

实际上有一个更简单的方法。

*   将图像缩小到 1px x 1px。

    **1px 的颜色是您缩放的任何颜色的平均颜色**

# java - 连接是否有优雅的工作？

> ID：649463
> 
> 赞同：3
> 
> 时间：2009-03-16T06:39:40.207
> 
> 标签：java, string, concatenation

我正在编写一个疯狂的 libs 程序，目的是为了好玩，只是为了编写一些东西。该程序本身非常简单，但由于游戏的性质，我发现自己采用了几个连接，您将用户给定的单词放入一个句子中。是否有一种优雅的解决方法可以减少串联，甚至消除它们以获得更有效的东西？我知道最终是否使用连接没有区别，但我很好奇是否有更优雅的方式来编写这个程序。

更新：我正在使用 java，但如果有一个通用的解决方案来转义连接，那也将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-16T06:57:19.117

一种解决方案可能是写出整个 mad libs 文件并放入需要替换为所选单词的特殊标记。

> 你刚买了一个全新的 ${NOUN1}，它会变成 ${VERB1} 你。

然后你可以使用例如：`String.replace("${NOUN1}", noun1)`for all the words。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-16T06:44:27.307

您使用哪种语言？

大多数高级语言将具有类似于：

```
String.Format("{0} {1} {2} {3}", word1, word2, word3, word4); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-16T16:18:38.440

我可以通过两种方式看到您在游戏中完全避免串联：

1.  将故事模板存储为标记集合：不可变部分和单词占位符。然后循环输出不可变部分和用户单词而不是单词占位符的集合。

2.  编写自定义打印类，该类将使用 charAt 循环遍历模板字符串并输出单词而不是单词占位符。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-16T21:34:30.587

您可以将单词放在有序数组中并使用 String.format（在 jdk 1.5 或更新版本中）或 jdk 1.4 中的 MessageFormat.format，而不是为每个单词调用 String.replace 或不断附加到 StringBuilder。不幸的是，两者的模式格式不同。

```
String myPattern = "我的 %s 吃掉了你的 %s";
// 从这里获取用户的值
字符串结果 = String.format(myPattern, (Object[])myArray);

```

或者

```
String myPattern = "我的 {0} 吃掉你的 {1}";
// 从这里获取用户的值
字符串结果 = MessageFormat.format(myPattern, (Object[])myArray);

```

这是一个完整的程序，它使用命令行中的值填充字符串。

```
公开课形式
{
    公共静态无效主要（字符串[] args）
    {
        String pattern = "我的 %s 吃掉了你的 %s";
        System.out.println(String.format(pattern, (Object[])args));
    }
}

```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-16T06:50:32.567

你的问题有两个方面。

首先，您可能希望避免在代码中直接使用串联。然后，您可以使用运行时中的一些字符串格式化例程。这不会跳过串联，但会将它们从您的代码移动到运行时。

其次，您可能希望更有效地进行连接。那是另一个故事。这里最重要的是为连接的字符串预分配足够大的缓冲区，因为内存重新分配非常昂贵。将子字符串复制到结果字符串中通常成本较低并且是必要的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-16T07:02:14.847

就避免串联的一般方法而言，我没有想到任何东西。你可以做的是给自己写一些帮助类来简化你的连接工作。然而，我想给你的一个建议是不要直接将字符串连接为

```
String x = "Hi";
String y = x + " there!"; 
```

字符串连接的实现在 Java 中非常慢，所以最好使用 StringBuffer 代替，特别是如果你做了很多连接：

```
StringBuffer myStringBuffer = new StringBuffer();
myStringBuffer.append("Hi");
myStringBuffer.append(" there!"); 
```

像这样的东西。我现在没有在编译器中检查这个，但我相信你可以自己弄清楚。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-16T07:05:17.850

不确定Java，但在PHP和Javascript等其他一些语言中，创建数组并连接其所有元素会更快。

Javascript 示例：

```
var str = str1 + str2 + str3 + "str4" + str5 + "str6" + str7;
var str = [str1, str2, str3, "str4", str5, "str6", str7].join(""); 
```

PHP 示例：

```
$str = $str1 . $str2 . $str3 . "str4" . $str5 . "str6" . $str7;
$str = implode("", array($str1, $str2, $str3, "str4", $str5, "str6", $str7)); 
```

如果您想在每个字符串之间放置一个分隔符，这种方法是最好的，在这种情况下，它不仅会更快，而且更紧凑和可读。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-16T06:51:07.043

通过“避免连接”，我假设您的意思是为新字符串分配空间并分配它？如果您使用的是 .NET，那么我认为[StringBuilder](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder(VS.71).aspx)应该会有所帮助。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2010-02-16T10:58:30.630

如果您有一个 String 需要经常修改它，那么使用 char[] 数组并在完成修改后创建一个 String 可能会奏效。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2010-02-16T11:10:22.670

如果您愿意，当然可以在不连接的情况下执行此操作。虽然这可能不是很值得。

这部分取决于您要在哪里显示结果。如果它在 Web 或控制台上，那么您可以将结果直接写入输出流。

例如，如果您的模板类似于“%001 跳出 %002”，您可以：

1）扫描字符串以查找变量的位置。2）将字符串分解为组件列表“the”，“jumped out of the”，在这种情况下 3）循环遍历列表中的元素和结果并将它们转储到输出，如下所示：

```
PrintStream  = //get output from somewhere
for(int i = 0; i < pieces.size()-1 ; i++){
   ps.print(peices.get(i));
   ps.print(answers.get(i));
}
ps.print(pieces.get(pieces.size()-1));//last one 
```

现在。我不知道您是否会称其为“优雅”。它可能会有点快。就像我说的，如果这是一个 Web 服务并且它变得超级流行等，这可能是合适的。

如果这是一个 GUI 应用程序，您可以编写代码来分别绘制字符串，但这可能会比连接花费更多的时间。

*但是*您*可以*做的一件事是使用 ByteArrayOutputStream 并预先分配足够的空间，以便它可以包含填充的 madlib 而无需进行额外的分配。那也很快。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2010-02-16T11:19:44.323

为什么要避免连接，如果为了清洁尝试将它排列好，它可能最终看起来非常好。即使你担心性能，你可能不需要使用字符串生成器，我相信如果你做一堆简单的连接（即“fdsfsd”+ var1+var2+“dsfsdf”+“tyhty”它编译成与字符串生成器相同的东西（实际上相同并且看起来更干净）。如果你连接大量的东西，字符串生成器确实有意义在一个循环或复杂的流程中。

# unit-testing - NUnit 中约束模型相对于经典模型的优势？

> ID：649471
> 
> 赞同：26
> 
> 时间：2009-03-16T06:45:28.320
> 
> 标签：unit-testing, nunit

除了更好的可读性（也许？）和能够使用`&`and链接约束`|`之外，约束模型与经典模型相比还有哪些其他优势？

我是经典模型的快乐用户，我正在决定是否值得努力重构旧测试。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-03-16T08:14:08.963

我不得不说我是“经典”模型的粉丝。我发现在大多数情况下更容易制定我的断言，而且我发现它们也更容易阅读。代码中没有任何不必要的内容 - 没有“那个”和“是”，它们听起来很流畅，但不适合 IMO 的可发现性。

这很可能是由于熟悉程度和其他任何事情一样，但我认为值得向您保证，您不是唯一一个认为经典模型完全合理的人:)

话虽如此，当使用约束更容易表达某些东西时，使用它是有意义的。当某些条件可以用约束*显式*测试，但经典模型只使用`Assert.IsTrue(condition)`. 关键是对于这种情况，约束可能比经典约束提供更多的信息。

因此，我认为*学习*基于约束的模型是一个好主意，但我不会去转换任何测试，而且我不会在你发现经典模型更简单或更易读的地方使用它。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2009-03-16T06:59:50.733

我不知道除了可读性之外还有什么其他优点。但这可能是一个很大的优势。我发现简单地从每个测试开始`Assert.That( ... )`而不是使用几个 Assert 函数可以使直观地扫描您的断言变得容易一百万倍，因为您不再需要为函数名称而烦恼，只需查看参数即可。

在 NUnit 2.4 中，两种语法（类和约束）都使用完全相同的代码。无论哪种方式，幕后都没有优势。除非您真的没有更好的时间利用时间，否则我不会费心重写测试。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-11-17T14:27:54.813

介绍断言并将较新的约束模型与经典模型进行比较的 NUnit 3 文档包括以下示例[：](https://github.com/nunit/docs/wiki/Assertions)

> 例如，以下代码必须使用约束模型。没有真正的经典等价物。
> 
> ```
>   整数 [] 数组 = 新整数 [] { 1, 2, 3 };
>   Assert.That(array, Has.Exactly(1).EqualTo(3));
>   Assert.That(array, Has.Exactly(2).GreaterThan(1));
>   Assert.That(array, Has.Exactly(3).LessThan(100));
> 
> ```

虽然文档指出没有“真正的经典等效”，*但可以*使用带有 LINQ 的经典语法来编写我认为等效的测试：

```
Assert.AreEqual(1, array.Where(x => x == 3).Count());
Assert.AreEqual(2, array.Where(x => x > 1).Count());
Assert.AreEqual(3, array.Where(x => x < 100).Count()); 
```

有些人*可能会*得出结论，我从文档中提取的约束模型测试比这些经典模型等效项更具可读性。但这可以说是主观的。

* * *

然而，这还不是全部。更重要的是改进了失败的约束模型测试***在测试失败时发出******的错误消息***。^†例如，考虑这个将失败的经典模型测试：

 *```
int[] array = new int[] { 1, 2, 3 };
Assert.AreEqual(1, array.Where(x => x == 4).Count()); 
```

NUnit 抛出的`AssertionException`包含以下“简洁” `Message`：

```
 Expected: 1
    But was:  0 
```

相反，当用新的约束模型语法表达这个测试时：

```
Assert.That(array, Has.Exactly(1).EqualTo(4)); 
```

...NUnit 返回`Message`：

```
 Expected: exactly one item equal to 4
    But was:  < 1, 2, 3 > 
```

我认为大多数人都会同意这个异常消息比使用 NUnit 的旧经典模型语法产生的异常消息更有帮助。

* * *

^†非常感谢[@nashwan](https://stackoverflow.com/users/323158/nashwan)帮助我了解约束模型中引入的错误消息的这一重要改进。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-02-15T12:19:39.153

我个人更喜欢 Constraint Model`Assert.That`风格，现在才使用。我发现这种较新的风格更具可读性，并且已经确定它不太可能混淆“实际”和“预期”的论点。（就像你当然可以使用 Classic Model`Assert.AreEqual`等，我见过很多人这样做。）这显然会导致报告不正确结果的测试失败。

例如，如果不检查 ;-)，哪些是正确的？

```
Assert.AreEqual(actual, expected);
Assert.AreEqual(expected, actual); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-01T11:14:29.910

约束模型相对于经典模型的一个主要好处是，某些断言可以写在一行中，其中没有真正的经典模型等价物。

例如，这些约束模型没有真正的经典模型等价物：

```
int[] array = new int[] { 1, 2, 3 };
Assert.That(array, Has.Exactly(1).EqualTo(3));
Assert.That(array, Has.Exactly(2).GreaterThan(1));
Assert.That(array, Has.Exactly(3).LessThan(100)); 
```

来源可以在[这里](https://docs.nunit.org/articles/nunit/writing-tests/assertions/assertions.html)找到。

# image - 什么是接缝（Seam-carving）

> ID：649475
> 
> 赞同：5
> 
> 时间：2009-03-16T06:46:50.453
> 
> 标签：image, math, image-processing, seam-carving

我正在阅读有关调整图像大小的缝雕的论文。

在他们以数学方式定义接缝的第 3 页上，我需要帮助来澄清它。

该论文说，接缝是一个 8 连接的像素路径。如果像素不能在同一行，怎么能8连接？不应该是3连接的吗？

[http://www.seamcarving.com/arik/imret.pdf](http://www.seamcarving.com/arik/imret.pdf) 20 mb PDF

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-03-16T15:07:21.373

*像素的8 连通*路径[意味着](http://books.google.com/books?id=7gT1MhI1SbIC&pg=PA42&vq=region+filling)`o`一个像素周围的所有 8 个邻居`x`：

```
ooo
oxo
ooo (1) 
```

计算确定像素是否已连接。所以`x`在

```
xoo
oxo
oox (2) 
```

*是*8 连接的。相反，*4-connected*只查看这 4 个邻居`o`：

```
 o
oxo
 o  (3) 
```

在这个方案下，`x`图中的。2*不会*被认为是连接的。

（计算机图形学中没有*3-connected*（我知道））

话虽如此，垂直接缝的定义：

> 垂直接缝是图像中从上到下的 8 连接像素路径，在图像的每一行中包含一个且仅包含一个像素

对我来说似乎很容易掌握。这：

```
x
 x
  x 
```

是垂直接缝（因为每行只有一个像素），还有：

```
x
 x
 x 
```

这是; 这：

```
x
 xx
  x 
```

不是（因为第二行有两个像素）。

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T07:17:40.183

它不会是 3 连接的，它将是 6 连接的，但是由于没有所谓的 6 连接路径，因此称为 8 连接

（“6”是指给定像素的 6 个*潜在*邻居 - 上一行中的 3 个和下一行中的 3 个：）

```
xxx
 o
xxx 
```

# iphone - iPhone - 在显示图像时使用 UIWebView 流式传输音频

> ID：649478
> 
> 赞同：1
> 
> 时间：2009-03-16T06:48:22.493
> 
> 标签：iphone, uiwebview, audio-streaming

当我们使用 UIWebView 在 iPhone 上流式传输音频时，它使用 QuickTime 播放器显示正在播放的音频以及时间栏和其他控件。它还显示 QuickTime 徽标。

有什么方法可以在 webview 上显示图像而不是大的 QuickTime 徽标时使用 UIWebView 流式传输音频（例如使用 img 标签创建自己的 html 页面？但是如何将音频添加到 html 页面？）

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-11-24T11:30:16.487

您可以在包含您的 uiwebview 的视图中使用 avaudioplayer 并在 viewController 的 viewDidLoad 方法上播放声音。

# php - CURL 导入字符编码问题

> ID：649480
> 
> 赞同：5
> 
> 时间：2009-03-16T06:50:02.677
> 
> 标签：php, encoding, curl

我正在使用 CURL 导入一些代码。然而，在法语中，所有的角色都显得很有趣。例如：您好...

我无权更改导入代码的任何内容。我能做些什么来解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-03-16T10:22:33.680

就像 Jon Skeet 指出的那样，很难理解您的情况，但是如果您只能访问最终文本，您可以尝试使用**iconv**来更改文本编码。

IE

```
$text = iconv("Windows-1252","UTF-8",$text); 
```

我之前遇到过类似的问题（使用意大利语和特殊字符），我已经以这种方式解决了它。

尝试不同的组合（UTF-8、ISO-8859-1、Windows-1252）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-08-15T04:44:49.493

我有一个类似的问题。我试图遍历输入和输出字符集的所有组合。没有任何帮助！:(

但是，我能够访问实际获取数据的代码，这就是罪魁祸首所在。数据是通过 cURL 获取的。添加

```
 curl_setopt($ch,CURLOPT_BINARYTRANSFER,true); 
```

修复。

一组方便的代码来尝试字符集列表的所有可能组合：

```
$charsets = array(  
        "UTF-8", 
        "ASCII", 
        "Windows-1252", 
        "ISO-8859-15", 
        "ISO-8859-1", 
        "ISO-8859-6", 
        "CP1256"
        ); 

foreach ($charsets as $ch1) { 
    foreach ($charsets as $ch2){ 
        echo "<h1>Combination $ch1 to $ch2 produces: </h1>".iconv($ch1, $ch2, $text_2_convert); 
    } 
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-07T10:02:55.303

PHP似乎默认使用UTF-8，所以我发现了以下作品

$text = iconv("UTF-8","Windows-1252",$text);

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-03-04T20:03:52.767

你可以更换你的

```
$data = curl_exec($ch); 
```

经过

```
$data = utf8_decode(curl_exec($ch)); 
```

我有同样的问题，它对我来说效果很好。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-11-19T14:59:01.800

我目前遇到了类似的问题，我正在尝试编写一个简单的 html`<title>`导入器 cia cURL。所以我要介绍一下我到目前为止所做的事情：

1.  通过 cURL 检索 HTML
2.  检查响应标头上是否有任何编码提示，`curl_getinfo()`并通过正则表达式进行匹配
3.  解析 HTML 以查看*内容类型*元和`<title>`标签（是[的，我知道后果](https://blog.codinghorror.com/parsing-html-the-cthulhu-way/)）
4.  比较内容类型、标头和元数据，如果不同则选择元数据，因为我们知道没有人关心他们的 httpd 配置，并且使用它有很多肮脏的变通方法
5.  `iconv()`字符串
6.  每天都希望当有人不遵守标准时会`$DEITY`惩罚他/她直到日子结束，因为这样可以节省我的元解析

# objective-c - 有没有办法强制在 NSArray、NSMutableArray 等上输入？

> ID：649483
> 
> 赞同：94
> 
> 时间：2009-03-16T06:51:26.013
> 
> 标签：objective-c, generics, data-structures, collections, strong-typing

我可以创建一个*所有*元素都是 type的`NSMutableArray`实例吗？*`SomeClass`*

 ** * *

## 回答 #1

> 赞同：150
> 
> 时间：2015-06-25T02:29:39.870

还没有人把这个放在这里，所以我会做的！

现在，Objective-C 正式支持 Tthis。从 Xcode 7 开始，您可以使用以下语法：

```
NSArray<MyClass *> *myArray = @[[MyClass new], [MyClass new]]; 
```

**笔记**

需要注意的是，这些只是编译器警告，从技术上讲，您仍然可以将任何对象插入到数组中。有一些脚本可以将所有警告转化为错误，从而阻止构建。

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2009-03-16T18:27:18.757

对于从强类型语言（如 C++ 或 Java）过渡到更弱或动态类型的语言（如 Python、Ruby 或 Objective-C）的人们来说，这是一个相对常见的问题。在 Objective-C 中，大多数对象继承自`NSObject`(type `id`)（其余的继承自其他根类，例如`NSProxy`并且也可以是 type `id`），任何消息都可以发送到任何对象。当然，向它无法识别的实例发送消息可能会导致运行时错误（并且还会导致编译器*警告*带有适当的 -W 标志）。只要一个实例响应您发送的消息，您就可能不在乎它属于哪个类。这通常被称为“鸭子打字”，因为“如果它像鸭子一样嘎嘎叫[即响应选择器]，它就是鸭子[即它可以处理消息；谁在乎它是什么类]”。

您可以使用该方法测试实例在运行时是否响应选择器`-(BOOL)respondsToSelector:(SEL)selector`。假设您想在数组中的每个实例上调用一个方法，但不确定所有实例都可以处理该消息（因此您不能只使用`NSArray`'s [`-[NSArray makeObjectsPerformSelector:]`](http://developer.apple.com/DOCUMENTATION/Cocoa/Reference/Foundation/Classes/NSArray_Class/Reference/Reference.html#//apple_ref/doc/uid/20000137-BABCBHFG)，这样的事情会起作用：

```
for(id o in myArray) {
  if([o respondsToSelector:@selector(myMethod)]) {
    [o myMethod];
  }
} 
```

如果您控制实现您希望调用的方法的实例的源代码，更常见的方法是定义`@protocol`包含这些方法的 a 并声明相关类在其声明中实现该协议。在这种用法中，a`@protocol`类似于 Java 接口或 C++ 抽象基类。然后，您可以测试是否符合整个协议，而不是响应每种方法。在前面的示例中，它不会有太大的不同，但是如果您调用多个方法，它可能会简化事情。该示例将是：

```
for(id o in myArray) {
  if([o conformsToProtocol:@protocol(MyProtocol)]) {
    [o myMethod];
  }
} 
```

假设`MyProtocol`声明`myMethod`. 第二种方法受到青睐，因为它比第一种更清楚地说明了代码的意图。

通常，其中一种方法使您不必关心数组中的所有对象是否都属于给定类型。如果您仍然关心，标准的动态语言方法是单元测试，单元测试，单元测试。因为此要求中的回归会产生（可能无法恢复的）运行时（而非编译时）错误，所以您需要有测试覆盖来验证行为，这样您就不会将崩溃程序释放到野外。在这种情况下，执行修改数组的操作，然后验证数组中的所有实例是否属于给定类。通过适当的测试覆盖率，您甚至不需要验证实例身份的额外运行时开销。你确实有很好的单元测试覆盖率，不是吗？

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2009-03-16T07:00:24.413

您可以使用允许编译时静态类型检查的方法创建一个类别`-addSomeClass:`（因此编译器可以让您知道您是否尝试通过该方法添加一个它知道是不同类的对象），但是没有真正的方法来强制执行数组只包含给定类的对象。

一般来说，Objective-C 似乎不需要这样的约束。我认为我从未听说过有经验的 Cocoa 程序员希望使用该功能。似乎只有其他语言的程序员仍在使用这些语言进行思考。如果您只想要数组中给定类的对象，则只需将该类的对象粘贴在其中。如果您想测试您的代码是否正常运行，请对其进行测试。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-01-08T21:35:57.500

您可以子类化`NSMutableArray`以强制执行类型安全。

`NSMutableArray`是一个[类 cluster](https://stackoverflow.com/a/3873129/193896)，所以子类化不是微不足道的。我最终继承`NSArray`了该类中的一个数组并将调用转发到该数组。`ConcreteMutableArray`结果是一个易于子类化的类*。*这是我想出的：

*   [自定义数组.h](https://github.com/bendytree/iOS/blob/master/Code/BT-CustomArray.h)
*   [自定义数组.m](https://github.com/bendytree/iOS/blob/master/Code/BT-CustomArray.m)

**更新：查看**[Mike Ash](http://www.mikeash.com/pyblog/friday-qa-2010-03-12-subclassing-class-clusters.html)的这篇关于类集群子类化的博文。

将这些文件包含在您的项目中，然后使用宏生成您希望的任何类型：

**MyArrayTypes.h**

```
CUSTOM_ARRAY_INTERFACE(NSString)
CUSTOM_ARRAY_INTERFACE(User) 
```

**MyArrayTypes.m**

```
CUSTOM_ARRAY_IMPLEMENTATION(NSString)
CUSTOM_ARRAY_IMPLEMENTATION(User) 
```

**用法：**

```
NSStringArray* strings = [NSStringArray array];
[strings add:@"Hello"];
NSString* str = [strings get:0];

[strings add:[User new]];  //compiler error
User* user = [strings get:0];  //compiler error 
```

**其他想法**

*   它继承自`NSArray`支持序列化/反序列化
*   根据您的口味，您可能想要覆盖/隐藏通用方法，例如

    `- (void) addObject:(id)anObject`

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-08-08T02:56:02.883

看看[https://github.com/tomersh/Objective-C-Generics，Objective-C](https://github.com/tomersh/Objective-C-Generics)的编译时（预处理器实现）泛型实现。[这篇](http://cocoamanifest.net/linked/2013/07/objective-c-generics-implemented-entirely-at-compile-time.html)博文有一个很好的概述。基本上你得到编译时检查（警告或错误），但没有对泛型的运行时惩罚。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-11-05T11:03:31.367

[这个 Github 项目](https://github.com/tomersh/Objective-C-Generics/)正是实现了该功能。

然后，您可以使用`<>`括号，就像在 C# 中一样。

从他们的例子中：

```
NSArray<MyClass>* classArray = [NSArray array];
NSString *name = [classArray lastObject].name; // No cast needed 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-09-16T06:44:21.877

2020，直截了当的回答。碰巧我需要一个类型为`NSString`.

句法：

```
Type<ArrayElementType *> *objectName; 
```

例子：

```
@property(nonatomic, strong) NSMutableArray<NSString *> *buttonInputCellValues; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-16T09:42:14.260

一种可能的方法是继承 NSArray，但 Apple 建议不要这样做。对类型化 NSArray 的实际需求三思而后行更简单。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-20T14:37:27.490

我创建了一个使用 NSArray 对象作为支持 ivar 的 NSArray 子类，以避免 NSArray 的类簇性质出现问题。接受或拒绝添加对象需要块。

只允许 NSString 对象，您可以定义`AddBlock`为

```
^BOOL(id element) {
    return [element isKindOfClass:[NSString class]];
} 
```

你可以定义一个`FailBlock`来决定做什么，如果一个元素没有通过测试——优雅地过滤失败，将它添加到另一个数组，或者——这是默认的——引发一个异常。

*VSBlockTestedObjectArray.h*

```
#import <Foundation/Foundation.h>
typedef BOOL(^AddBlock)(id element); 
typedef void(^FailBlock)(id element); 

@interface VSBlockTestedObjectArray : NSMutableArray

@property (nonatomic, copy, readonly) AddBlock testBlock;
@property (nonatomic, copy, readonly) FailBlock failBlock;

-(id)initWithTestBlock:(AddBlock)testBlock FailBlock:(FailBlock)failBlock Capacity:(NSUInteger)capacity;
-(id)initWithTestBlock:(AddBlock)testBlock FailBlock:(FailBlock)failBlock;
-(id)initWithTestBlock:(AddBlock)testBlock;    
@end 
```

*VSBlockTestedObjectArray.m*

```
#import "VSBlockTestedObjectArray.h"

@interface VSBlockTestedObjectArray ()
@property (nonatomic, retain) NSMutableArray *realArray;
-(void)errorWhileInitializing:(SEL)selector;
@end

@implementation VSBlockTestedObjectArray
@synthesize testBlock = _testBlock;
@synthesize failBlock = _failBlock;
@synthesize realArray = _realArray;

-(id)initWithCapacity:(NSUInteger)capacity
{
    if (self = [super init]) {
        _realArray = [[NSMutableArray alloc] initWithCapacity:capacity];
    }

    return self;
}

-(id)initWithTestBlock:(AddBlock)testBlock 
             FailBlock:(FailBlock)failBlock 
              Capacity:(NSUInteger)capacity
{
    self = [self initWithCapacity:capacity];
    if (self) {
        _testBlock = [testBlock copy];
        _failBlock = [failBlock copy];
    }

    return self;
}

-(id)initWithTestBlock:(AddBlock)testBlock FailBlock:(FailBlock)failBlock
{
    return [self initWithTestBlock:testBlock FailBlock:failBlock Capacity:0];
}

-(id)initWithTestBlock:(AddBlock)testBlock
{
    return [self initWithTestBlock:testBlock FailBlock:^(id element) {
        [NSException raise:@"NotSupportedElement" format:@"%@ faild the test and can't be add to this VSBlockTestedObjectArray", element];
    } Capacity:0];
}

- (void)dealloc {
    [_failBlock release];
    [_testBlock release];
    self.realArray = nil;
    [super dealloc];
}

- (void) insertObject:(id)anObject atIndex:(NSUInteger)index
{
    if(self.testBlock(anObject))
        [self.realArray insertObject:anObject atIndex:index];
    else
        self.failBlock(anObject);
}

- (void) removeObjectAtIndex:(NSUInteger)index
{
    [self.realArray removeObjectAtIndex:index];
}

-(NSUInteger)count
{
    return [self.realArray count];
}

- (id) objectAtIndex:(NSUInteger)index
{
    return [self.realArray objectAtIndex:index];
}

-(void)errorWhileInitializing:(SEL)selector
{
    [NSException raise:@"NotSupportedInstantiation" format:@"not supported %@", NSStringFromSelector(selector)];
}
- (id)initWithArray:(NSArray *)anArray { [self errorWhileInitializing:_cmd]; return nil;}
- (id)initWithArray:(NSArray *)array copyItems:(BOOL)flag { [self errorWhileInitializing:_cmd]; return nil;}
- (id)initWithContentsOfFile:(NSString *)aPath{ [self errorWhileInitializing:_cmd]; return nil;}
- (id)initWithContentsOfURL:(NSURL *)aURL{ [self errorWhileInitializing:_cmd]; return nil;}
- (id)initWithObjects:(id)firstObj, ... { [self errorWhileInitializing:_cmd]; return nil;}
- (id)initWithObjects:(const id *)objects count:(NSUInteger)count { [self errorWhileInitializing:_cmd]; return nil;}

@end 
```

像这样使用它：

```
VSBlockTestedObjectArray *stringArray = [[VSBlockTestedObjectArray alloc] initWithTestBlock:^BOOL(id element) {
    return [element isKindOfClass:[NSString class]];
} FailBlock:^(id element) {
    NSLog(@"%@ can't be added, didn't pass the test. It is not an object of class NSString", element);
}];

VSBlockTestedObjectArray *numberArray = [[VSBlockTestedObjectArray alloc] initWithTestBlock:^BOOL(id element) {
    return [element isKindOfClass:[NSNumber class]];
} FailBlock:^(id element) {
    NSLog(@"%@ can't be added, didn't pass the test. It is not an object of class NSNumber", element);
}];

[stringArray addObject:@"test"];
[stringArray addObject:@"test1"];
[stringArray addObject:[NSNumber numberWithInt:9]];
[stringArray addObject:@"test2"];
[stringArray addObject:@"test3"];

[numberArray addObject:@"test"];
[numberArray addObject:@"test1"];
[numberArray addObject:[NSNumber numberWithInt:9]];
[numberArray addObject:@"test2"];
[numberArray addObject:@"test3"];

NSLog(@"%@", stringArray);
NSLog(@"%@", numberArray); 
```

这只是一个示例代码，从未在现实世界的应用程序中使用过。为此，它可能需要实现 mor NSArray 方法。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-12-11T19:22:56.700

如果您混合使用 c++ 和 Objective-c（即使用 mm 文件类型），则可以强制使用 pair 或 tuple 键入。例如，在下面的方法中，可以创建一个 std::pair 类型的 C++ 对象，将其转换为 OC wrapper 类型的对象（需要定义的 std::pair 的包装器），然后将其传递给一些其他 OC 方法，在该方法中您需要将 OC 对象转换回 C++ 对象才能使用它。OC 方法只接受 OC 包装类型，从而保证类型安全。您甚至可以使用元组、可变参数模板、类型列表来利用更高级的 C++ 功能来促进类型安全。

```
- (void) tableView:(UITableView*) tableView didSelectRowAtIndexPath:(NSIndexPath*) indexPath
{
 std::pair<UITableView*, NSIndexPath*> tableRow(tableView, indexPath);  
 ObjCTableRowWrapper* oCTableRow = [[[ObjCTableRowWrapper alloc] initWithTableRow:tableRow] autorelease];
 [self performSelector:@selector(selectRow:) withObject:oCTableRow];
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-12-23T11:43:27.113

我的两分钱有点“干净”：

使用类型定义：

```
typedef NSArray<NSString *> StringArray; 
```

在代码中我们可以这样做：

```
StringArray * titles = @[@"ID",@"Name", @"TYPE", @"DATE"]; 
```

# web-services - 通过 Web 服务将 SharePoint 文档列表添加到快速启动

> ID：649487
> 
> 赞同：2
> 
> 时间：2009-03-16T06:54:01.623
> 
> 标签：web-services, sharepoint

我正在通过 C#.Net 应用程序使用 Webservice Lists.AddList 方法在 SharePoint 中创建文档库。（见下文）

```
listsService.AddList(listTitle, listDescription, 101); 
```

我希望它们显示在创建它们的站点下的“快速启动”菜单中，而不仅仅是“所有站点内容”菜单。

我看过 Lists.UpdateList() 方法，但运气不佳。

有谁知道如何通过 Web 服务做到这一点？（无法手动完成，因为要更改的列表太多）。

我正在使用最新版本的 SharePoint Server 和 Web 服务。

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-17T02:25:57.077

我相信您是正确的，`OnQuickLaunch`无法通过网络服务进行设置。设置`OnQuickLaunch`是我会尝试`listProperties`的`UpdateList`，但听起来这不起作用。

如果您的列表尚不存在，我建议使用列表模板创建一个功能，`OnQuickLaunch="true"`并通过`AddListFromFeature`. 您的另一个选择似乎是编写自己的服务来通过对象模型设置属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-11-10T11:15:37.003

```
XmlDocument xmlDoc = new System.Xml.XmlDocument();

XmlNode ndProperties = xmlDoc.CreateNode(XmlNodeType.Element, "List", "");

XmlAttribute ndQuickLaunchAttrib = (XmlAttribute)xmlDoc.CreateNode(XmlNodeType.Attribute, "OnQuickLaunch", "");

ndQuickLaunchAttrib.Value = "True";

ndProperties.Attributes.Append(ndQuickLaunchAttrib);

XmlNode ndReturn = proxy.UpdateList("12345", ndProperties, null, null, null, null); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-07-06T10:04:38.123

最好是先创建一个 SPList 对象，然后执行 OnQuickLaunch="true"。不要忘记更新命令！

```
Example:
Guid listID = Guid.Empty;
listID = siteObject.Lists.Add("Title","Description",listTemplateObject);
//This will work:
SPList thisList = siteObject.Lists[ListID];
thisList.OnQuickLaunch = true;
thisList.Update(); 
```

# driver - 编写 Windows 打印机驱动程序

> ID：649490
> 
> 赞同：15
> 
> 时间：2009-03-16T06:55:57.640
> 
> 标签：driver, printing

我想用 C++ 或 C# 编写一个应用程序，它在安装时将充当打印机驱动程序。它将在“打印”对话框的下拉列表中可用，但不会打印，而是会调用我的代码。

我认为可能有一些 Windows 提供的接口来编写打印机驱动程序。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-03-16T07:11:41.097

Windows 提供了大量的接口。你知道你想写什么样的打印机驱动程序吗？目前，Windows 支持三种类型的打印机驱动程序——PostScript、Unidrv 和 XPSDrv（后者仅在带有 EP 1.0 及更高版本的 XP/2003 Server 上）。大多数时候，编写一个驱动插件就足够了。阅读 INF 架构以了解这些东西已安装，特别是有关微型驱动程序的部分。

如建议的那样，您将需要 WDK 才能构建驱动程序或其插件。请注意，驱动程序不使用 Visual Studio IDE 或编译器。WDK 带有自己的编译器。您总是可以将后者与 VS 联系起来，但那是另一回事。

WDK 具有针对不同操作系统的设置。您将必须知道要解决哪个操作系统（或一组操作系统）并选择适当的设置。

> 我想编写一个简单的驱动程序，它将显示在打印机列表中。

我不明白这会有什么帮助。如果您正在编写驱动程序，为什么需要系统上所有其他驱动程序的列表？

> 打印到此驱动程序将调用我的代码，以便我可以执行诸如创建文档的 PDF、调用 Web 服务等操作。

有趣的！您可以在 UI 插件中实现所有这些功能。UI 插件是在您选择`Advanced`驱动程序属性时加载的 dll。

要开始使用 UI 插件，请查看`oemui`WDK 中的示例源代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-03T06:22:47.007

您所问的内容在 Windows 中不可用。您可以使用 PostScript、UniDrv、XPSDrv 驱动程序开发自己的打印机驱动程序。当驱动程序作为添加打印机的一部分安装时，它将使用驱动程序创建打印队列。发现和设备安装是另一个主题。当从您的应用程序提交打印作业时，Windows 打印系统将调用此驱动程序。Windows 打印系统由打印后台处理程序、打印处理器、端口监视器、语言监视器组成。当您的应用调用 Win32 或 .NET 打印 API 时，它们将调用通用打印对话框或现代打印对话框组件来显示列出打印机的打印对话框界面。当您提交打印作业时，spooler 会生成 XPS 格式的假脱机数据并将其发送到您的驱动程序。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-10-13T08:04:44.913

我不确定它是否会显示在列表中，但我从未尝试过此 C++ 代码：

```
#include <fstream>
Namespace Drivers{
Class Printer{
Const IOStream Printer("PRN");
Void Send(char a[]){
Printer<<a;}
Char GetStatus[](){
Char a[];
Printer>>a; 
return a;
 };
 } 
```

# gridview - 查找总网格视图

> ID：649497
> 
> 赞同：0
> 
> 时间：2009-03-16T06:59:04.840
> 
> 标签：gridview, grid, cell

如何在网格视图单元格值中查找总计。考虑在网格视图中，有 3 行分别命名为 row1 、 row2 和 row3。在这里，我想查找总共 row1 包含 7 列，分别命名为 m1、m2、m3、m4、m5、m6、m7 找到这些列的总数并显示到文本框中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-16T16:04:21.940

我想你可以为 MS GridView 的 RowDataBound 事件做这个计算列表，但是我在开发过程中使用的更直接的方法是利用 Telerik Web 网格的[计算列](http://demos.telerik.com/aspnet-ajax/grid/examples/generalfeatures/calculatedcolumns/defaultcs.aspx)。

希望这些指点有所帮助。

迪克

# math - 以弧度/秒为单位设置速度时，任何半径的车轮的恒速？

> ID：649507
> 
> 赞同：1
> 
> 时间：2009-03-16T07:04:18.383
> 
> 标签：math, physics, box2d

在 box2d 物理引擎中，我可以以弧度/秒为轮子上的关节设置电机速度。

我可以将速度设置为什么表达式，因此无论车轮半径如何，车轮的最终实际“速度”都是相同的。

目前，我将车轮速度设置为常数，wheelSpeed = 20。但这具有使大车轮比小车轮更快的效果。我希望将半径用于计算电机速度的弧度/秒，因此无论如何我都会获得相同的有效速度。

所以，如果它是一个小轮子，它必须比大轮子转动得更频繁。

我想我需要做类似 2 * PI * Radius / 180 * Speed 的事情？或类似的东西，但我无法确切地弄清楚。

我想以车轮电机速度（以弧度/秒为单位）为基础，因此无论车轮的大小如何，车轮的最终“速度”都是恒定的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-16T07:19:34.087

一个完整的圆有`2 PI`弧度，你的圆长就是周长（`2 PI R`）。

所以，如果你想要一个恒定的圆周速度经过一个点，你需要一个径向速度：

`Y = 2 PI / 2 PI R`

或者：

`Y = 1/R`

换句话说，使该值成为半径倒数的一个因素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-16T07:19:39.017

如果 v 是速度，w 是频率，r 是半径：方程是`v = w * r`，或`w = v / r`。所以只需取你想要的速度，除以车轮的半径，然后将其设置为角速度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-16T07:18:23.513

车轮的周长与半径成正比，因此为了保持以线性单位/秒为单位的径向速度恒定，除以半径的增加。

例如，在半径 R 处，径向速度为 1 弧度/秒。然后如果将半径增加到 2R，径向速度应该是 1/2 rad/sec。

# domain-name - 我可以为意大利以外的公司注册 .it 域名吗？

> ID：649510
> 
> 赞同：10
> 
> 时间：2009-03-16T07:05:31.343
> 
> 标签：domain-name

我有一个可以很好地与.it 域名配合使用的域名（例如redd.it）。这是针对我正在构建的 Web 应用程序，如果它产生收入，它将为美国的一家公司服务。这是允许的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-16T07:15:31.587

根据他们的[常见问题解答](http://www.nic.it/en/faq/faq-nomi.html#nomi6)，您需要在欧盟内设有办事处。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-09-08T12:41:00.250

我能够在[Europe Registry](http://www.europeregistry.com/)注册一个。这需要几天，但你可以得到一个。它的工作方式是*他们*是注册的意大利企业，他们充当您的代理人。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-08-28T02:03:26.293

我不是欧盟公民，但我设法从著名的域名注册商那里获得了一个*.it*域名，支付了额外的受托人供应商费用。

[他们的常见问题解答](https://www.godaddy.com/help/about-it-domain-names-5358)显示了获得*.it*域的以下要求：

> *   如果您的原籍国是意大利，您必须输入注册人财政代码。
> *   如果您所在的国家/地区在欧盟范围内，您必须输入身份证件号码，或显示在正式身份证明表格上的数字。
> *   如果您不符合居住要求，我们会自动向您收取每年 19.99 美元的受托人供应商费用。受托人帮助您满足居住要求，并且是第三方供应商。如果有人就您的域名问题联系受托人，受托人会联系我们，然后我们会联系您。
> 
> 注意：当我们的受托人服务用于 .it 域名注册时，受托人服务将在购买后 24 小时内审核注册请求。他们这样做是为了防止商标侵权并减少纠纷或法律问题的数量。
> 
> 如果注册请求被批准，则该域名将完成注册，但如果注册请求被拒绝，则该域名将不被注册，并且将退还所有注册费用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-03-16T07:11:16.637

这是相应的 ccTLD 页面：[nic.it](http://www.nic.it/en/domini/index.html)。我已经查看了他们的规则，除了几个受限制的类别外，似乎没有注册限制。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2009-03-16T07:08:48.217

是的，除非有针对意大利的特定规则……有大量网站使用其他国家的域名，但实际位于其他国家/地区。

# asp.net-mvc - 如何在 ASP.NET MVC 中执行辅助操作（即计算字段）？

> ID：649513
> 
> 赞同：2
> 
> 时间：2009-03-16T07:06:33.543
> 
> 标签：asp.net-mvc, view, actionresult

我需要对 ASP.NET MVC 视图进行一些计算，这是一个不同于表单提交的操作。我尝试了各种通过 ActionLink 将当前模型传递给新控制器操作的方法，但模型似乎没有被传递。

```
public ActionResult Calculate(MuralProject proj)
{
    ProjectFormRepository db = new ProjectFormRepository();
    List<Constant> constants = db.GetConstantsByFormType(FormTypeEnum.Murals);

    proj.Materials = new MuralMaterials();
    proj.Materials.Volunteers = this.GetVolunteerCount(constants, proj);

    this.InitializeView(); 
    return View("View", proj);
} 
```

我的 Html.ActionLink 语法需要什么才能让我调用它并使返回的视图具有相同的模型数据（具有计算的更改）？或者，还有另一种方法可以做到这一点吗？

我也尝试了 Ajax.ActionLink 方法，但遇到了同样的问题

**编辑**：“给你的提交按钮一个名字，然后在你的控制器方法中检查提交的值”[这里](https://stackoverflow.com/questions/442704/how-do-you-handle-multiple-submit-buttons-in-asp-net-mvc-framework)显示的方法是我正在寻找的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-17T11:44:10.700

[看到你的评论；我将在此处重新发布此答案，以便您可以将问题标记为已解决，并将其标记为社区 wiki，这样我就不会得到代表 - Dylan]

为提交按钮命名，然后在控制器方法中检查提交的值：

```
<% Html.BeginForm("MyAction", "MyController", FormMethod.Post); %>
<input type="submit" name="submitButton" value="Send" />
<input type="submit" name="submitButton" value="Cancel" />
<% Html.EndForm(); %> 
```

张贴到

```
public class MyController : Controller {
    public ActionResult MyAction(string submitButton) {
        switch(submitButton) {
            case "Send":
                // delegate sending to another controller action
                return(Send());
            case "Cancel":
                // call another action to perform the cancellation
                return(Cancel());
            default:
                // If they've submitted the form without a submitButton, 
                // just return the view again.
                return(View());
        }
    }

    private ActionResult Cancel() {
        // process the cancellation request here.
        return(View("Cancelled"));
    }

    private ActionResult Send() {
        // perform the actual send operation here.
        return(View("SendConfirmed"));
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-16T13:14:24.610

一个动作链接只是链接到一个动作。它转换为`<a href="action">action</a>`标签。它链接到的操作不知道它刚刚离开的页面的状态。

您可能应该“发布”到一个动作，但它只会发送表单数据，而不是一个对象（尽管 mvc 可以自动将表单字段映射到一个对象）。

# memory - 递归导致内存不足

> ID：649515
> 
> 赞同：4
> 
> 时间：2009-03-16T07:07:46.083
> 
> 标签：memory, recursion

我有一个 2 GB 的 RAM。我们有一个执行导出/导入操作的应用程序。我们有一个递归函数，它有一个 Set 类型的局部变量，每次迭代都会不断填充。这个集合不断增长，有时我们会耗尽内存。

是否有任何可以优化使用内存的替代数据结构？

这是粗略的代码

```
GetObjectsForExportImpl(long lExportOptions, __int64 numIdProject, XExportSets
     &exportSets, long lClientId, CComPtr<IEPIPDServer> ptrIPDServer,FILE *fp)
{
    XExportSets exportLocal;   //Thats a structure containing the Set
    QueryObjectsForExport(lExportOptions, numIdProject, exportLocal,
         lClientId, ptrIPDServer);
    SetIDs::iterator it = exportLocal.setShared.begin();

    for (; it != exportLocal.setShared.end(); ++it)
    {
         //recursive call
         pExportObject->GetObjectsForExportImpl(lExportOptions,
             numIdProject, exportSets, lClientId, ptrIPDServer,fp);
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-16T07:11:27.290

替代结构不会有太大帮助。假设您切换到使用一半内存的类。你仍然只是在拖延厄运。

2GB 的结构大小通常表示您需要切换到基于磁盘的结构、数据库或内存映射哈希表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-16T07:15:48.027

逐个处理数据，而不是一次性处理所有数据。

那是：

```
while (not end-of-file) {
   data = read_some_information();
   export_some_information(data);
} 
```

除非您处于非常特殊的情况下，您需要所有数据才能进行导出（这极不可能）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-16T09:02:59.923

一会儿，比较一下你原来的方法调用：

```
GetObjectsForExportImpl(
   long                  lExportOptions, 
   __int64               numIdProject, 
   XExportSets           &exportSets, 
   long                  lClientId, 
   CComPtr<IEPIPDServer> ptrIPDServer,
   FILE                  *fp
   ) 
```

到您随后的递归调用：

```
hr = pExportObject->GetObjectsForExportImpl(
                         lExportOptions,
                         numIdProject,
                         exportSets,
                         lClientId,
                         ptrIPDServer,
                         fp); 
```

除非它们之间发生了什么神奇的事情，否则您只是用自己的一组参数重新调用该方法。我怀疑您的意思是在其中放入“exportLocal”而不是“exportSets”，否则，exportLocal.setShared.begin() 的意义何在？您将继续重新创建一个新的 exportLocal，告诉它开始，递归等。

简而言之，我认为问题是编码错误，而不是递归问题。

作为旁注 - 你能想出一种方法让它成为一个循环，而不是一个递归吗？循环几乎*总是*更快、更简单、更容易理解和快速调试。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-16T09:33:17.107

抱歉 - 我真的不太懂 C++，但我可能会有所帮助。如果您可以使用下标表示法来访问元素，并且您有指向父元素的指针，则可以使用堆栈进行深度优先遍历并避免递归的不重要成本。下面是一些您应该能够翻译的 C# 代码：

```
Stack<int> childIndex = new Stack<int>();
childIndex.Push(0);

TreeNode<Folder> workingFolder = GetNodeById(folderId);
TreeNode<Folder> returnFolder = ShallowClone(workingFolder);

while (childIndex.Count > 0) {
    int idx = childIndex.Peek();
    if (idx < workingFolder.Children.Count) {
        visit(workingFolder.Children[idx]);

        // increment count for this level
        childIndex.Pop();
        childIndex.Push(idx + 1);

        // replace current working folders and push new index
        workingFolder = workingFolder.Children[idx];
        returnFolder = f;
        childIndex.Push(0);
    } else {
        // no (more) children
        workingFolder = (workingFolder.Parent == null ? workingFolder : workingFolder.Parent);
        returnFolder = (returnFolder.Parent == null ? returnFolder : returnFolder.Parent);
        childIndex.Pop();
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-16T08:06:03.493

如果您的递归占用了 2GB 内存，那么您可能会遇到任何类型的内存数据结构的问题。您能否发布一些代码，以便我们更好地了解您在做什么？

一个想法可能是在构建时使用数据库表来存储 Set。您可以为每个递归插入一条新记录，并且该记录可以具有对表中父记录的 FK 引用。这样，您可以按照记录中的父引用来上下递归。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-16T09:43:27.253

我认为递归与您的问题没有太大关系。问题仅仅是你创建的数据很大。转向迭代解决方案对此无济于事。正如已经指出的那样，在遍历时写入输出，而不是将其存储在内存结构中。

但是，您可以通过在递归调用中传递指针而不是整个结构来最小化堆栈上的内容。

# windows - 如何在 Windows 中使用 Qt 访问 Postgresql

> ID：649519
> 
> 赞同：0
> 
> 时间：2009-03-16T07:09:22.833
> 
> 标签：windows, postgresql, qtruby

我正在使用 QtRuby 和 PostgreSQL 开发一个应用程序。我在Linux上成功开发并成功运行。现在我想在 Windows 中运行相同的应用程序。但我无法连接到数据库（postgresql）。我收到以下错误：

```
 QSqlDatabase: QPSQL driver not loaded
 QSqlDatabase: available drivers: QSQLITE QODBC3 QODBC 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-16T08:20:07.063

正如错误消息所说，Qt 无法使用 QPSQL 驱动程序与 Postgres 对话。可能插件还没有编译。

如[本方法](http://www.ldc.usb.ve/docs/qt/sql-driver.html#qpsql-for-postgresql-version-7-3-and-above)所示，您需要安装 PostgreSQL 开发人员库，然后手动构建 Qt 驱动程序插件。有关确切命令，请参阅操作方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T04:39:58.370

伟大的！完成！不过有一些小技巧要注意： 1\. Mingw-utils，0.4-1在Windows 7上是不行的，一定要用0.3。2\. PSQL驱动目录下有一个psql.json文件，请勿删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-01-26T08:17:13.573

1.  按照此处的说明编译 QPSQL 插件：http: [//ldc.usb.ve/docs/qt/sql-driver.html#qpsql-for-postgresql-version-7-3-and-above](http://ldc.usb.ve/docs/qt/sql-driver.html#qpsql-for-postgresql-version-7-3-and-above)
2.  将 PostgreSQL bin 路径添加到 PATH 环境变量

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T19:06:55.957

在 Windows 中使用 QT 的 Postgresql：**如何编译驱动程序 QPSQL - MinGw - Win7**

1）检查安装目录，在我的电脑：

```
PostgreSQL (32 bit)    C:\PSQL32\bin
Qt (32 bit)            C:\QT\4.8.0\bin
MingW32                C:\QT\qtcreator-2.4.0\mingw\bin 
```

2）将这3个目录添加到系统PATH

3) 下载 'mingw-utils' 并安装在 C:\Qt\4.8.0\bin (需要实用程序 REIMP.exe)

4) 将 libpq.lib 转换为对 mingw32 有用的格式：

> 光盘 C:\PSQL32\lib
> 
> REIMP -d libpq.lib

打开 libpq.def 并删除定义开头的所有“_”

> dlltool --input-def libpq.def --output-lib libpq.a --dllname libpq.dll

5）编译：

> 光盘 C:\Qt\4.8.0\src\plugins\sqldrivers\psql
> 
> qmake -o Makefile "INCLUDEPATH+=C:\PSQL32\include" "LIBS+=C:\PSQL32\lib\libpq.a" psql.pro
> 
> mingw32-进行调试
> 
> mingw32-make 发布

10）复制dll：

```
libqsqlpsqld4.a   qsqlpsqld4.dll    (debug)  

libqsqlpsql4.a   qsqlpsql4.dll      (release) 
```

在目录中：

```
C:\Qt\4.8.0\plugins\sqldrivers 
```

* * *

**QT 5.01 版的新问题**

struct timespec 有多种定义

在 PostgreSQL 的文件**pthread.h** (C:\PSQL32\include\pthread.h)

代替：

> #ifndef HAVE_STRUCT_TIMESPEC

和：

> #if ((!defined(_TIMESPEC_DEFINED)) && (!defined(HAVE_STRUCT_TIMESPEC)))

* * *

完毕 ：-）

**浮士德**

# asp.net - 如何将一个应用程序组装到另一个应用程序中？

> ID：649520
> 
> 赞同：0
> 
> 时间：2009-03-16T07:09:27.653
> 
> 标签：asp.net, assemblies

我想将一个应用程序组装到另一个应用程序中。一个应用程序“EventCalendar”中有一个程序集，该程序集注册为

```
<%@ Register TagPrefix="ec" Namespace="ControlCalender" Assembly="EventCalendar" %> 
```

这被用作控制

```
<ec:EventCalendar runat="server" ID="eventscalendar" DataSourceID="sqldatasource1" BorderWidth="0" DayField="starttime" ShowTitle="true" CssClass="eventmonthtable">
<%-- more code --%>
</ec:EventCalendar> 
```

现在我想在另一个应用程序中应用相同的功能。我应该如何在另一个应用程序中使用这个程序集？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-16T07:13:28.893

由于您已将其标记为 ASP.NET，因此我假设您想在 Web 应用程序中引用程序集。您需要做的就是将 dll 放入 Web 应用程序的 bin 文件夹中。

除此之外，我认为您需要更具体=）

# zend-framework - Zend Studio + Zend 框架

> ID：649521
> 
> 赞同：1
> 
> 时间：2009-03-16T07:09:39.743
> 
> 标签：zend-framework, zend-studio

Zend 框架有这个“运行”按钮......这适用于单个 php 文件。但我很好奇，如果您使用 Zend Framework（或其他），其中所有内容（请求等）必须在执行您正在编辑的实际文件之前首先通过引导文件，这将如何工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-08-12T01:51:27.140

右键单击您的 public/index.php 文件 选择“作为 php 网页运行” 它会询问您在配置 index.php 时要查看的 URL 您可以指定任何 url，但 Zend 要求 'index.php' 是在网址中。不过，这没关系，因为 Zend Framework 的其余部分将忽略它。

例如，如果您要配置文件： [http ://www.mydomain.com/accounts/view](http://www.mydomain.com/accounts/view)

您只需输入： [http ://www.mydomain.com/index.php/accounts/view](http://www.mydomain.com/index.php/accounts/view)

然后您可以观看 Zend Studio 分析器开始工作 :)

我通过观看 Zend 的产品截屏视频了解了这一点： [http ://www.zend.com/en/products/studio/videos](http://www.zend.com/en/products/studio/videos)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-08T12:35:57.317

我认为没有办法通过引导文件运行某个文件，因为要让应用程序访问该文件，它需要通过您的路由系统，而 IDE 无法知道该 URI 是什么。

# c# - 类型为已加载的程序集返回 null？

> ID：649522
> 
> 赞同：1
> 
> 时间：2009-03-16T07:10:29.850
> 
> 标签：c#

```
//here assembly is loaded
Assembly asm = Assembly.LoadFile(@"C:\Documents and Settings\E454930\Desktop\nunit_dll_hutt\for_hutt_proj\bin\Debug\for_hutt_proj.dll");    
Type type = asm.GetType("for_hutt_proj.class1"); //returning null  
object instance = Activator.CreateInstance(type); 
```

这就是我所做的，任何人都可以看到这里的错误是什么？

这里类型返回 null。这里的完全限定名称是什么
for_hutt_proj 是我的 dll 名称，而 class1 是我的类型名称

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-16T07:17:17.587

看起来不错......我唯一想知道的是类型名称的大小写是否正确。你可以试试：

```
Type type = asm.GetType("for_hutt_proj.class1", false, true); 
```

这将进行不区分大小写的搜索。

还; 是*命名空间*`for_hutt_proj`还是外部*类*？即如果是：

 **```
class for_hutt_proj {
    class class1 {}
} 
```

那么这是`for_hutt_proj+class1`完全限定的名称。命名空间保持为`.`- 即

```
namespace for_hutt_proj {
    class class1 {}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-16T07:13:10.157

看起来不错。尝试发布更多信息，并使用格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-16T07:24:43.793

在测试中找出此类的一个实例为其类型打印的内容，例如：

```
for_hutt_proj.class1 testClass = new for_hutt_proj.class1();
Console.WriteLine(testClass.GetType().ToString()); 
```

然后在你的 asm.GetType 方法中使用这个字符串值

# asp.net-mvc - ASP.NET MVC：在不同视图上显示相同的结果

> ID：649527
> 
> 赞同：1
> 
> 时间：2009-03-16T07:12:12.357
> 
> 标签：asp.net-mvc

我正在使用 ASP.NET MVC 开发一个学习项目。我有一个列出登录用户书籍的页面，我想以两种格式显示书籍

*   **普通列表**--> 显示图书缩略图、标题、页数、作者...

*   **详细列表**
    ---> 仅显示 HTML 表格 格式的书名、作者、页数

所以我有两个视图页面Books.aspx，BookDetails.aspx。一个用于普通列表，一个用于详细列表，但我有一个控制器操作，它从数据库返回书籍并且只能将结果返回到一页。

```
 public ActionResult Index()
    {
        //get books from database
        return View(bookList);
    } 
```

我是否必须包含一个参数和检查参数才能将列表返回到不同的视图，还是有更好的方法来做到这一点？如何使用相同的控制器操作来显示两个视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-17T13:46:02.153

只需传递视图名称：

```
return View("Books", bookList); 
```

...或者....

```
return View("BookDetails", bookList); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-16T15:00:20.643

研究使用局部视图并为它们创建控制器操作

```
public ActionResult NormalList{
    ViewData["normalList"] = //db retrieval code;
    return View("NormalList");
}

public ActionResult DetailedList{
    ViewData["detailedList"] = //db retrieval code;
    return View("DetailedList");
} 
```

在您的页面中

```
<%= Html.RenderPartial("NormalList", ViewData)%>

<%= Html.RenderPartial("DetailedList", ViewData)%> 
```

在你的部分

```
<%foreach(var item in (IEnumerable)ViewData["normalList"]){%>
//blah blah blah
<%}%> 
```

# wpf - 从 WPF 应用程序打开 VB6 表单

> ID：649530
> 
> 赞同：1
> 
> 时间：2009-03-16T07:13:11.263
> 
> 标签：wpf, vb6

我们目前正致力于将旧的 VB6 应用程序移植到 WPF。第一阶段的计划是移植几个关键表格，而不是所有应用程序。有人提出，我们可能会尝试从 WPF 应用程序中打开一些旧的 VB6 表单（作为模式表单），从而提供比第一阶段更强大的功能。

我问你们朋友的问题，首先，这种可憎的:) 甚至可能吗？可以从 WPF 应用程序打开 VB6 表单吗？

谢谢，沙哈夫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-16T09:04:08.033

是的，这是可能的；取决于你愿意付出多少努力。支持的关键场景如下（注意：还有其他支持的场景，但这些是**关键**场景）：

1.  WPF -> WinForms
2.  WinForms -> WPF

鉴于使用 VB6，您的对象都是 COM 对象，您可以通过 WinForms 在 WPF 中托管它们。这是 MSDN 上我建议您开始的位置：

*   [WPF 和 Win32 互操作概述](http://msdn.microsoft.com/en-us/library/ms742522.aspx)

还有几本关于 WPF 的非常好的书籍，它们涵盖了与 WPF 的互操作（两个方向），按照关于这个主题的优先顺序排列：

*   WPF 释放（亚当·内森）
*   编程 WPF（Chris Sells 和 Ian Griffiths）

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-16T12:13:53.117

您需要做的是将表单打包到 ActiveX DLL 中并公开可以设置初始值、显示表单并返回它们修改的任何值的类。

例如，在我自己的 CAD/CAM 应用程序中，我们有表单，然后是一个不包含任何修改模型的命令对象（实现命令设计模式的类）的层，以及全部用 VB6 编写的模型。

一些命令调用对话框是 VB6 窗体。有些很简单，有些很复杂。我们转换项目的第一阶段是撕掉顶层表单层并将其替换为 .NET 等效项。新的 .NET 表单引用了包含命令对象的活动 DLL。

它工作得很好。.NET 外观和 VB6 窗体外观之间存在一些视觉差异，但除了命令对话框之外，它们的运行方式与在 VB6 可执行文件下的运行方式相同。

需要注意的一点是，如果您在此过程中继续修改原始 ActiveX DLL，那么构建 .NET 程序会变得有点痛苦。与 VB6 不同，.NET 在更新对引用的 ActiveX 库的较新版本的引用时并不那么自动。解决方案很简单，删除原始引用，然后添加新引用。

# algorithm - 算法：遍历所有具有有限移动约束的数组元素

> ID：649544
> 
> 赞同：0
> 
> 时间：2009-03-16T07:19:04.527
> 
> 标签：algorithm

问候。

我有一个大小为 [N][N] 的二维数组，它将表示一个具有 N 行和 N 列的矩形区域/地图。

假设我选择中间作为起点（或其他任何地方），我想在必须重置回起点之前通过仅移动 X 次的约束遍历所有元素。然后我可以走过我去过的路，但这会浪费一个转弯。

我只是想知道是否有针对此问题的特定算法，以便我可以与我目前的做法进行比较，该方法只存储我已经做过的动作。（相当混乱的tbh）

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-16T08:24:30.530

你说的好像是回合制游戏？所以我认为你不应该把它们看作是转弯，而是看目标，而不是使用[寻路算法](http://en.wikipedia.org/wiki/Pathfinding)来查看目标距离多少步，而不是假设目标有一个值并将其除以所需的转弯数量达到该目标并选择最高结果作为您当前的目的地，下一轮您将不得不再次重新考虑您的策略。

我试图让我的答案更清楚，每回合都执行以下操作。

1.  确定目标的价值
    *   [使用路径查找算法](http://en.wikipedia.org/wiki/Pathfinding)确定达到目标所需的步数。
    *   计算所需的匝数 ( `Math.Ceil(steps / stepsPerTurn)`)
    *   用最少的转数确定具有最高值的对象。
    *   前往那个目标。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-03-16T10:24:38.683

这是一个不是最优的策略，但它很简单，相当有效，而且您不需要保留一个大的存储列表或进行花哨的计算或编码。

从当前点开始，一直走到一堵墙。下台，向左走。保持曲折来回。如果您到达底部，请重新开始并以类似的方式曲折覆盖上半部分。

如果你画的步骤用完了，直接朝​​你之前所在的位置走，然后继续画。

这个算法不是最优的，但它可能需要 10 行代码和 2 个变量。

# zend-framework - Zend Framework + 我的应用程序的 API

> ID：649548
> 
> 赞同：0
> 
> 时间：2009-03-16T07:19:59.500
> 
> 标签：zend-framework

如何为我的 Web 应用程序创建 API？我正在研究 Zend_Rest，但我无法掌握它背后的想法。

基本上，我想要这样的例子：

```
$technorati = new Zend_Rest_Client('http://api.technorati.com/bloginfo');
$technorati->key($key);
$technorati->url('http://pixelated-dreams.com');
$result = $technorati->get();
echo $result->firstname() .' '. $result->lastname(); 
```

但是我完全不知道如何使用 Zend Framework 来实现它。我需要使用 Zend_Rest_Server 吗？任何形式的指导如何做到这一点将不胜感激......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-17T09:12:58.347

Zend Framework[文档`Zend_Rest_Server`](http://framework.zend.com/manual/en/zend.rest.server.html)有什么问题？有一个关于如何使用 Zend_Rest_Server 的绝对简约示例：

```
/**
 * Say Hello
 *
 * @param string $who
 * @param string $when
 * @return string
 */
function sayHello($who, $when)
{
    return "Hello $who, Good $when";
}

$server = new Zend_Rest_Server();
$server->addFunction('sayHello');
$server->handle(); 
```

或者你有什么具体问题吗？

**编辑：** 关于您关于 MVC 集成的问题，我认为这将引入极端开销以及您不需要 Web 服务的许多功能。尽管如此，我应该可以将服务集成到 MVC 中而不会出现任何重大问题（除非开销）。

```
class Hello
{
    /**
     * Say Hello
     *
     * @param string $who
     * @param string $when
     * @return string
     */
    function sayHello($who, $when)
    {
        return "Hello $who, Good $when";
    }
}

class ApiController extends Zend_Controller_Action
{
    /**
     * @var Zend_Rest_Server
     */
    protected $_server;

    public function init()
    {
        // disable view rendering
        $this->_helper->viewRenderer->setNeverRender(true);
        // disable layout (if you use layouts)
        $this->_helper->layout->disableLayout();

        $this->_server = new Zend_Rest_Server();
        $this->_server->setClass('Hello');
    }

    public function __call($method, $args)
    {
        $params = $this->_getAllParams();
        $params['method'] = $method;
        $this->_server->handle($params);
    }
}

/*
 * This should allow you to call http://www.example.com/api/sayHello/who/MyName/when/morning
 * By defining custom routes you're able to control the urls.
 */ 
```

请注意，代码未经测试，肯定需要一些调整，尤其是在错误处理方面，但它可以用作简单的 MVC 服务示例。

# iterator - Python 中的可迭代性

> ID：649549
> 
> 赞同：4
> 
> 时间：2009-03-16T07:20:51.527
> 
> 标签：iterator, python

我正在尝试理解 Python 中的可迭代性。

据我了解，`__iter__()`应该返回一个定义了方法的对象，该`next()`方法必须返回一个值或引发`StopIteration`异常。因此，我编写了同时满足这两个条件的这个类。

但这似乎不起作用。怎么了？

```
class Iterator:
    def __init__(self):
        self.i = 1

    def __iter__(self):
        return self

    def next(self):
        if self.i < 5:
            return self.i
        else:
            raise StopIteration

if __name__ == __main__:
    ai = Iterator()
    b  = [i for i in ai]
    print b 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-16T07:38:39.627

您的 Iterator 类是正确的。您在此声明中只是有一个错字：

```
if __name__ ==' __main__': 
```

'__main__' 字符串中有一个前导空格。这就是为什么您的代码根本没有执行的原因。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-16T07:27:40.310

`i`如果你不增加它就永远不会大于 5`next()`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-03-16T10:28:03.980

[我认为在大多数情况下，编写一个使用 yield 的生成器函数](http://docs.python.org/reference/simple_stmts.html#the-yield-statement)可能就足够了，而不是编写一个成熟的迭代器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-16T14:36:31.853

您当前的代码似乎有效。相反，我将向您展示更多的迭代器/生成器。

最简单的内置与您的行为完全一致。

```
Iterator2 = xrange(2,5) 
```

将您的课程直接翻译为生成器

```
def Iterator3():
    i = 1
    while i < 5:
        i += 1
        yield i 
```

由 python 标准库中的生成器组成的生成器

```
import itertools
Iterator4 = itertools.takewhile( 
                        lambda y : y < 5, 
                        itertools.count(2) ) 
```

一个简单的生成器表达式（不是很令人兴奋...）

```
Iterator5 = ( x for x in [2, 3, 4] ) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-18T23:19:08.567

您的代码有两个问题：

*   `if name == '__main__'`：（缺少引号）
*   `def next . . .`: 你不会`i`在任何地方增加

# c# - C# 在运行时添加引用

> ID：649550
> 
> 赞同：1
> 
> 时间：2009-03-16T07:23:27.837
> 
> 标签：c#

对不起，如果它是重复的帖子。 [链接文本](https://stackoverflow.com/questions/629414/adding-references)

但我没有得到任何明确的解决方案..

我的应用程序加载各种 dll，并处理它们。所以我需要在运行时在我的引用列表中添加 dll。

如何在运行时在 C# 项目中添加程序集（dll）作为引用。？！我需要在运行时添加引用。！？即通常我们通过**在解决方案资源管理器中右键单击引用**来添加引用，我们可以浏览任何 dll 并将其添加到引用中。我需要使用代码来做到这一点。

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Reflection;
namespace GetType_success
{
    class Program
    {
        static void Main(string[] args)
        {
            Assembly a = Assembly.LoadFrom(@"C:\Documents and Settings\E454935\My Documents\Visual Studio 2005\Projects\nunit_dll_hutt\for_hutt_proj\bin\Debug\for_hutt_proj.dll");            
            Type t = Type.GetType("for_hutt_proj.Class1,for_hutt_proj");             

        }
    }
} 
```

下面是使用 System 的类库 for_hutt_proj 的代码；使用 System.Collections.Generic；使用 System.Text；

```
namespace for_hutt_proj
{
    public class Class1
    {

            public int add(int a, int b)
            {
                int c = 0;
                c = a + b;
                return c;

            }
}
} 
```

where, the dll has just an add method returing int. if i add this dll manually in RightClicking and adding references in Solution explorer, 't' has proper type. else it has null. but i need to add this dll as reference to my project at run time i.e using code and not through UI. how can i do this at run time.?

thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-16T07:29:59.897

i got the solution. if i use, the below code its working fine.

Type type = asm.GetType("for_hutt_proj.class1", false, true);

credits to Marc Gravell.

# .net - 如何在 VS2008 中禁用 Cider（WPF Gui 编辑器）？

> ID：649551
> 
> 赞同：11
> 
> 时间：2009-03-16T07:23:55.030
> 
> 标签：.net, wpf, visual-studio-2008, xaml, ide

在开发 wpf 应用程序时，我从不使用图形编辑器（又名 cider）。只有 xaml 编辑器。由于“苹果酒”在加载时需要相当多的资源，我想知道是否有办法完全禁用它。这可能会加快加载 xaml 文件的速度。我听说这是可能的，但由于谷歌没有返回我正在寻找的东西，我想问问 SO 社区。有任何想法吗？

问候

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-03-16T07:38:12.390

这很简单！

在“工具”菜单中，选择“选项”，然后在左侧窗格中选择“文本编辑器”。展开它，并选择“XAML”子节点。展开“XAML”子节点，并选中“始终以完整 XAML 视图打开文档”复选框。

让我知道它是否不适合你。:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-16T08:24:56.490

为了获得更好的性能，请将 .xaml 扩展名映射到工具/选项/文本编辑器/文件扩展名中的 XML 编辑器。然后，您的 .xaml 文件将打开得更快。您将失去智能感知，但如果您可以没有智能感知，这是一个很好的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-16T07:40:09.653

这个有可能。

有关具体说明，请参阅[此博客文章](http://www.dolittle.com/blogs/einar/archive/2008/04/24/quot-disable-quot-xaml-designer-in-visual-studio-2008.aspx)。只需打开“始终以完整 XAML 视图打开文档”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-21T08:43:02.457

您可以执行上面建议的步骤，但在安装 Silverlight 2.0 Tools for Visual Studio 或有时是 Expression Blend 后准备好让 VS 崩溃。如果您将开始遇到崩溃，请尝试切换回默认设置。

# c# - 在 C# 中同步异步调用

> ID：649567
> 
> 赞同：6
> 
> 时间：2009-03-16T07:38:40.610
> 
> 标签：c#, multithreading, asynchronous, delegates

我在工作中的一个项目中遇到了一个相当尴尬的困境。我们需要跨 4 或 5 个不同的服务创建用户，并以这样一种方式进行设置，即如果一个失败，他们都会失败。它们被封装在事务范围块中。

我们需要添加用户的服务之一需要远程登录，并伪造一些数据。还有其他方法可以做到这一点（这需要花钱），但现在这就是我们所坚持的。添加一名用户大约需要 3 分钟。正如可以想象的那样，我们将努力显着降低这一点，但这并不是重点。此调用是异步的，并且必须能够正常工作。关键是，该服务最多只能有 10 个连接。

我们的项目正在设置为批量创建用户。因此，一次可能会创建 50 个用户。当通过 telnet 只能建立 10 个连接时，这会带来一个问题，并且除了 telnet 服务之外，处理的用户不太可能花费很长时间。我现在需要同步这个过程，所以在它完成之前其余的不能继续。

我们使用带有异步调用的回调和委托来实现该功能。封装异步部分的最佳方法是什么，直到它完成才继续？

我们是否应该设置一个仅在调用完成时终止的循环？线程库中有什么可以提供帮助的吗？我以前从未使用过线程，所以这对我来说是第一次。有什么工具可以帮助解决这个问题？

编辑：

如果我使用 BeginInvoke / EndInvoke 模式，第一个委托中的异步调用也会尊重开始/结束吗？

例子：

```
public void dele1(string message) {
    Console.Write(message);
    delegate2 del2 = new delegate2;
    del2();
    Console.Write("End of Delegate 2");
}

public void dele2() {
    // Long Processing
    Console.Write("Delegate 2");
}

public delegate void delegate1(String message);
public delegate void delegate2();

delegate1 del1 = new delegate1(dele1);
del1("Delegate 1").BeginInvoke;
del1().EndInvoke;
Console.Write("End of Delegate 1"); 
```

// 预期输出（End Invoke 等到 Delegate 2 完成）：

```
Delegate 1
End of Delegate 2
Delegate 2
End of Delegate 1 
```

// 或者（End Invoke 只等待委托 1 完成，而不是任何内部委托调用）：

```
Delegate 1
End of Delegate 2
End of Delegate 1
Delegate 2 
```

是否会结束调用等到第二个委托也完成处理？还是我需要在所有委托调用上使用调用模式？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-16T07:58:12.340

您确实可以使用监视器、信号量，或者您甚至可以等待异步方法调用完成。

但是你也可以免费获得这个。如果您调用`EndInvoke()`以前以 开头的委托`BeginInvoke()`，则会阻塞直到异步工作完成。

不确定这是否有帮助，因为您必须使用这种异步模式。如果是这样，您将免费获得异步执行（以及从异步转换回同步调用）。

查看[MSDN 上的 Calling Synchronous Methods Asynchronously，](http://msdn.microsoft.com/en-us/library/2e08f6yc.aspx)了解有关此模式的更多信息。

我希望这有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-16T07:41:47.687

听起来你想要一个队列......如果有一个正在进行的请求，请添加到队列中（使用 a `Monitor`）；通话完成后，检查队列...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-16T17:15:10.287

`IAsyncResult`有一个属性`AsyncWaitHandle`，它给你一个等待句柄（如果有的话），它将在操作完成时发出信号。

因此，您可以使用`WaitHandle.WaitAll`(或`.WaitAny`) 一次在多个句柄上执行非旋转等待。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-16T07:43:34.653

你有几个选择。这里有几个想法——

首先，您可以使用[ManualResetEvent](http://msdn.microsoft.com/en-us/library/system.threading.manualresetevent.aspx)来“阻塞”主线程，直到您的异步操作全部完成。这个想法是让主线程调用你的函数，然后执行 event.WaitOne()，函数负责设置事件。

或者，您可以尝试使用类似[Semaphore](http://msdn.microsoft.com/en-us/library/system.threading.semaphore.aspx)的东西。它旨在帮助解决这些情况，因为您可以将其限制为 10 次同时发生，而不必担心自己尝试处理它。这可能是我的首选方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-16T08:04:41.343

使用线程有两个原因：

*   充分利用 CPU 资源，从而加快速度
*   将多个同步状态机编写为简单的方法，这使它们更具可读性

使用线程的缺点是：

*   真的很难

如果瓶颈是在远程机器上等待 3 分钟，那么值得注意的是，多线程不会为您带来任何性能优势。您可以编写整个单线程，维护一组最多十个“状态机”对象并在用户创建的各个阶段移动它们，所有这些都来自一个线程，总体性能几乎没有差异。

因此，您可能正在寻找的是可读性好的代码布局，通过将用户创建操作变成一系列调用，这些调用读起来像单个方法（如果您将它们作为线程运行，它们就是这样）。

另一种方法是通过迭代器方法，即包含`yield return`语句，这也为您提供了单方法可读性的优势。上周我必须[链接到这个 3 次！](http://msdn.microsoft.com/en-us/magazine/cc546608.aspx)这是 Jeffrey Richter 关于 AsyncEnumerator 的文章。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-16T23:55:19.717

我有点不清楚你是如何使用 TransactionScope 的（所以我可能不在基地），但你可以创建可以分配给工作线程的 DependentTransactions。在所有 DependentTransaction 成功提交之前，您的顶级事务将不会提交，反之亦然。只要您调用的操作封装了提交/回滚功能（IEnlistmentNotification 等），我发现这是一种跨线程执行全部或不执行任何操作的简单方法。

# css - CSS：在 CSS 中设置背景图像

> ID：649576
> 
> 赞同：8
> 
> 时间：2009-03-16T07:44:52.077
> 
> 标签：css

在 CSS 中设置背景图像时正确的语法是什么？在visual studio中，自从出现以来，后台似乎没有问题。但在IE或FF等浏览器中，背景不会出现。我在这里错过了什么吗？

我正在使用的语法如下（我认为这是正确的......）

```
#headerArea
{
    height: 150px;
    background-image: url('/images/bgimage.jpg');
} 
```

以上是正确的吧？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-16T08:11:52.637

根据您的文件夹结构以及 CSS 相对于它所使用的图像的位置，您必须进入图像目录的根级别并从那里访问它，这样您就可以尝试类似的操作

`background-image: url('/../images/bgimage.jpg');`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-16T07:47:19.327

如果您在不使用 Web 服务器的情况下在本地计算机上进行测试（即，如果您在 FF 中的页面 URL 以“ `file://`”开头，则该 URL 将不起作用。您需要指定图像的相对路径，否则它会将在硬盘驱动器的根目录中查找该图像。

所以如果你的文件是这样的：

```
/some/path/html/index.html
/some/path/html/images/bgimage.jpg 
```

您的代码将如下所示：

```
background-image: url('images/bgimage.jpg'); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2011-02-08T20:55:21.057

我得到了我的工作 w/../images/bgimage.jpg

如何？我没有使用引号 - 例如：

```
background-image: url(../images/bgimage.jpg); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-03-16T07:46:46.143

这是正确的语法。您是否检查了图像是否在正确的位置？

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-03-16T08:01:47.263

请记住，相对路径是相对于 CSS 表的。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-03-16T07:47:48.793

如果是相对路径，去掉url路径中的标题“/”？

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-16T07:47:36.640

您确定网址开头的 / 吗？您不是要访问“images”子目录中的图像吗……这意味着 url('images/bgimage.jpg')？

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-05-05T10:43:32.773

我的 CSS 文件位于“主题”文件夹中。图像保存在“图像”文件夹中。“主题”和“图像”都是我项目根目录下的子文件夹。

在这种情况下，您应该使用

```
background-image: url(../Images/imageName.jpg); 
```

# delphi - D2007 客户端数据集

> ID：649583
> 
> 赞同：1
> 
> 时间：2009-03-16T07:50:24.653
> 
> 标签：delphi, delphi-2007

我想知道在添加或编辑 Interbase 记录时使用带有数据感知控件的 ClientDataset 是否可行。

我最初的目的是使用 SQLDataset 打开一条记录，但我希望我可以将该记录加载到 Clientdataset 中，然后在追加或编辑记录时克隆数据集。逻辑是数据感知控件将感知记录状态，从而简化添加\编辑过程。

如果有资源或建议可能会有所帮助，我将不胜感激。

问候和 TIA

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-16T08:05:36.707

是的，您可以将 ClientDataset 与所有数据感知控件一起使用。

它们可以被视为轻量级数据库并用于传输数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-16T08:55:19.163

是的你可以。也就是说，我几乎总是将非数据感知组件与 clientDataSet 和 Dataprovider 结合使用。这样，当我将数据写回断开的数据库时，我可以完全手动控制数据。当我有复杂的 SQL 和很多连接等时，我特别喜欢这种工作方式。

# c# - 防止组合框键盘选择

> ID：649584
> 
> 赞同：0
> 
> 时间：2009-03-16T07:52:02.793
> 
> 标签：c#, combobox

就像您现在一样，用户可以直接通过键盘从组合框中选择一个项目。通过鼠标，我阻止用户根据后面的对象状态选择一些项目。当用户使用键盘时，阻止这种情况的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-16T07:58:28.410

撇开此类要求引起的可用性问题（许多用户习惯使用键盘并且会发现它不直观），您可以简单地处理`KeyDown`事件并将其设置`KeyEventArgs.Cancel`为 True。

```
private void myCombo_KeyDown(object sender, KeyEventArgs e)
{
   // Cancel the event if Up or Down keys are pressed.
   if ((e.KeyCode == Keys.Down) || (e.KeyCode == Keys.Up))
     e.Handled = true;
} 
```

* * *

**编辑：**在我再次被否决之前澄清 - 这是一个说明该方法的*示例。*由 OP 决定他/她想要禁止哪些键。^ ^

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-16T07:55:31.630

```
 private void comboBox1_KeyDown(object sender, KeyEventArgs e)
    {
        e.Handled = true;
    } 
```

有了这个，您可以取消 ComboBox 上的所有键盘操作。

假设：WinForms

# eclipse - linux上eclipse中的分离视图

> ID：649591
> 
> 赞同：0
> 
> 时间：2009-03-16T08:00:03.367
> 
> 标签：eclipse

当我在 ubuntu 上的 eclipse 中分离 wiews 时，例如包资源管理器，它在 ubuntu 中显示为一个单独的窗口（Eclipse 最终占用了 4 个窗口，这使得通过我打开的程序进行 alt-tabbing 很痛苦）

有没有办法解决这个问题，所以无论分离了多少 vews，Eclipse 都只会在 ubuntu 中显示为一个窗口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-16T08:34:03.957

Eclipse 可能打开的视图是窗口，而不是对话框。您可以检查一下：尝试将其中一个视图移到 Eclipse 主窗口后面。如果你能做到这一点，它就不是一个对话框（或者对话框没有正确初始化......）

在这种情况下，使用非模态对话框可能会更好。

我会针对 Eclipse 提交一个错误：[https ://bugs.eclipse.org/bugs/](https://bugs.eclipse.org/bugs/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-16T10:51:16.933

实际上是在[Eclipse bugzilla 中发现的。](https://bugs.eclipse.org/bugs/show_bug.cgi?id=227139)

一种解决方法是在重新启动工作台时关闭并重新打开分离的视图

# asp.net-mvc - 在.NET MVC 中为视图使用默认命名空间而不使用导入？

> ID：649593
> 
> 赞同：12
> 
> 时间：2009-03-16T08:02:06.450
> 
> 标签：asp.net-mvc, views

如何将视图配置为能够引用 System.Web.Mvc 之类的命名空间而无需执行 <%@ Import Namespace="System.Web.Mvc" %>？我记得在某个地方看到过这个，但我的谷歌技能目前让我失望。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-03-16T08:20:38.810

您可以将它们添加到 web.config 中吗？不知道这是否适用于MVC，虽然......

```
<configuration>
 <system.web>
    <pages>
      <namespaces>
        <add namespace="Foo.Blop" />
        <add namespace="Bar.Whatever"/>
      </namespaces>
    </pages>  
 </system.web>
</configuration> 
```

（更新 - 似乎工作正常；-p）

# c# - 我可以使用 LINQ 重写以下代码吗？

> ID：649594
> 
> 赞同：0
> 
> 时间：2009-03-16T08:02:36.467
> 
> 标签：c#, linq

以下代码比较两个按降序排序的列表以查找已删除的条目。

`fullorderbook.asks`是可能包含已删除订单的先前订单列表。

`orderbook.asks`是包含当前状态的订单的当前列表。

因此，算法简单地循环`fullorderbook.asks`并比较价格与相应的订单价格，`orderbook.asks`以查找它是否已经存在或删除或只是向下移动。

我的问题是，如何使用 LINQ 重写代码？

```
for (int i = 1; i <= fulllength; i++)
        {
            withinrange = false;
            //for each level in the ask book check if the price still
            //exists or it is deleted or just shift down
            while (askindex <= asklength)
            {
                //removed ask 
                if (orderbook.asks[askindex].price > fullorderbook.asks[i].price)
                {
                    changes.Add(new CapturedLevel(i, fullorderbook.asks[i].price, -1 * fullorderbook.asks[i].volume));
                    withinrange = true;
                    break;
                }
                else if (orderbook.asks[askindex].price < fullorderbook.asks[i].price)
                {
                    //update the ask pointer
                    askindex++;
                }
                else
                {
                    withinrange = true;
                    askindex++;
                    break;
                }
            }

            if (!withinrange)
            {
                //removed ask
                if (askindex >= asklength && asklength < OBK_SIZE)
                {
                    changes.Add(new CapturedLevel(i, fullorderbook.asks[i].price, -1 * fullorderbook.asks[i].volume));
                }
                else if (askindex >= asklength)
                {
                    shiftedorders.Add(orderbook.asks[i]);
                }
            }
        }
        fullorderbook.asks.Clear();
        fullorderbook.asks.AddRange(orderbook.asks.ToList<PriceLevel>());
        fullorderbook.asks.AddRange(shiftedorders); 
```

PS：

该算法的目的是找到完全移除的订单和向下移动的订单（订单位置大于订单簿大小`OBK_SIZE`）。

所以我使用`IEnumerable.Except`扩展方法不会给出解决方案，因为它会在不知道导致这种差异的原因（下移或移除）的情况下返回差异。因为如果订单向下移动，我必须保持`fullorderbook.asks`正确的顺序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-16T08:13:25.613

我会说使用[except](http://www.hookedonlinq.com/ExceptOperator.ashx) [运算符](http://msdn.microsoft.com/en-us/library/bb336390.aspx)。

```
var deleted = fullorderbook.asks.Except(orderbook.asks); 
```

如果您不希望 except 使用 Object.Equals 方法，您可以提供一个`IEqualityComparer<T>`. 例如，如果您仍然只想按价格进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-16T10:08:13.667

我认为这是解决方案

```
 double highestprice = orderbook.asks[asklength].price;
        List<PriceLevel> difflist = new List<PriceLevel>(fullorderbook.asks.Except(orderbook.asks));
        fullorderbook.asks.Clear();
        fullorderbook.asks.AddRange(orderbook.asks);
        //fill the shifted orders
        fullorderbook.asks.AddRange(
            (difflist.FindAll((x) =>
        {
            //shifted order
            return x.price > highestprice;
        }
            )));

        //fill the deleted orders
        changes.AddRange(
            (difflist.FindAll((x) =>
        {
            //deleted order
            return x.price < highestprice;
        }).ConvertAll((y)=>

        {
            return new CapturedLevel(0, y.price, -1*y.volume);
        }
        ))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-16T08:13:54.580

抱歉，我没有时间给出适当考虑的回应......这可能会让你开始：

```
//checks for deliverableNo's existence in sheetDataSource
if(!(sheetDataSource.Any(item => item.DeliverableNo == varItem.DeliverableNo)))
{
sheetDataSource.Add(varItem);
} 
```

# c# - Windsor WCF 集成设施异步

> ID：649606
> 
> 赞同：2
> 
> 时间：2009-03-16T08:12:19.437
> 
> 标签：c#, wcf, asynchronous, castle-windsor

我正在使用 Windsor WCF Integration Facility，并且正在寻找一种调用方法 asnyc 的方法。我正在考虑只使用后台工作人员并在完成时完成工作。有没有更优雅的方式来做这件事，我对选择的方式感觉不好。

我查看了以下电子邮件：来自 Krzysztof Koźmic的[http://groups.google.com/group/castle-project-devel/browse_thread/thread/9250110e258ccdcd 。](http://groups.google.com/group/castle-project-devel/browse_thread/thread/9250110e258ccdcd)该解决方案似乎很棒，但是据我所知，它只是一个原型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-24T14:03:34.050

[更新] 由于一段时间以来它被正式纳入框架（进行了一些更改），因此此时使用它应该是非常安全的。

是的，它是一个原型。我已经创建了一个概念实现的工作证明（到目前为止没有生成异步类型，只是调用和解析），但它离生产质量还很远，我担心它不会进入即将发布的版本。

最近我又拿起了工作，虽然我不能保证什么，但它在我的优先级列表中很重要:)

# wpf - 暴露 DTO 或实体的 WCF 服务

> ID：649608
> 
> 赞同：6
> 
> 时间：2009-03-16T08:13:32.787
> 
> 标签：wpf, wcf, model

我已阅读有关此主题的问题和答案，但仍有一些问题没有答案。

如果我创建一个将实体转换为 DTO 的方法，我会遇到一些循环调用方法（可能是由模型中的错误引起的），例如：

**产品**类有一个属性**供应商**，它指向一个供应商类，该类包含一个包含所有提供产品的列表属性。所以如果我创建一个返回 ProductDTO 类的**GetProductDTO(Product entity)**方法，我将不得不调用**GetSupplierDTO(Supplier entity )**对于每个产品，但最后一个方法必须为提供的产品列表中的每个产品调用 GetProductDTO...

总之，我正在寻找一种模式或最佳实践来创建 EntityModel -> WCF 服务 -> Prism WPF 应用程序。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-16T08:17:55.447

通常，出于 DTO 目的，您可能只是选择不序列化任何“父”属性。通常，您会看到除了**严格关联的数据之外***没有*导航属性的 DTO （例如，order-header => order-detail，但您不会有 order-header => customer - 只是客户的密钥；您将获取客户单独）。使用这种方法，序列化/反序列化任何图形都有一条单向路径，它应该可以正常工作。

 **# php - 在 xslt 中打印 php 数组

> ID：649610
> 
> 赞同：2
> 
> 时间：2009-03-16T08:13:56.703
> 
> 标签：php, xslt, session

有没有办法在 xslt 中打印一个 php 数组？我正在使用 php 会话并尝试在 xslt 样式表中打印孔数组。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-16T10:23:40.883

要在 XSLT 样式表中使用您的数组，您首先必须将您的数组转换为 XML 表示。这种表示很大程度上取决于您的数组结构。一个简单的方法是：

```
$array = (
    'key1' => 'value1',
    'key2' => 'value2',
    'key3' => 'value3'
);

// ext/DOM can also be used to create XML representation
$xml = new XMLWriter();
$xml->openMemory();
$xml->startDocument('1.0', 'UTF-8');
$xml->startElement('array');
// simple one-dimensional array-traversal - depending on your array structure this can be much more complicated (e.g. recursion)
foreach ($array as $key => $value) {
        $xml->writeElement($key, $value);
}
$xml->endElement();

/*
 * $xml will look like
 * <array>
 *      <key1>value1</key1>
 *      <key2>value2</key2>
 *      <key3>value3</key3>
 * </array>
 */

// convert XMLWriter document into a DOM representation (can be skipped if XML is created with ext/DOM)
$doc = DOMDocument::loadXML($xml->outputMemory());

// Load XSL stylesheet
$xsl = DOMDocument::load('stylesheet.xsl');

// Fire-up XSLT processor
$proc = new XSLTProcessor();
$proc->importStyleSheet($xsl);

// Output transformation
echo $proc->transformToXML($xml); 
```

# apache-flex - 从另一个函数读取变量

> ID：649613
> 
> 赞同：0
> 
> 时间：2009-03-16T08:17:15.540
> 
> 标签：apache-flex, actionscript-3, function, flex3, variables

如何从另一个函数访问变量？

我有一个设置和变量的函数：

```
private function create () {
  var str:String = "hello";
}

private function take() {
  var message:String = str;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-16T08:43:41.017

您没有指定函数是在同一个类中还是在不同的类中，但您的主要问题是[变量范围](http://www.digital-web.com/articles/variable_scope_for_new_programmers/)。**str**变量是在**create**函数内部定义的，因此它被绑定在函数的范围内。您必须在更大的范围内声明变量。如果函数在同一个类中，请尝试以下方法：

```
private var str:String;

private function create () {
  str = "hello";
}

private function take() {
  var message:String = str;
} 
```

# javascript - JavaScript中变量字符串的XML解析

> ID：649614
> 
> 赞同：210
> 
> 时间：2009-03-16T08:17:19.737
> 
> 标签：javascript, xml, parsing

我有一个包含格式正确且有效的 XML的**变量字符串。**我需要使用 JavaScript 代码来解析这个提要。

如何使用（与浏览器兼容的）JavaScript 代码完成此操作？

* * *

## 回答 #1

> 赞同：328
> 
> 时间：2011-12-07T09:27:30.947

**2017年的更新答案**

下面将在所有主流浏览器中将一个 XML 字符串解析为一个 XML 文档。除非您需要支持 IE <= 8 或某些晦涩的浏览器，否则您可以使用以下功能：

```
function parseXml(xmlStr) {
   return new window.DOMParser().parseFromString(xmlStr, "text/xml");
} 
```

如果您需要支持 IE <= 8，以下将完成这项工作：

```
var parseXml;

if (typeof window.DOMParser != "undefined") {
    parseXml = function(xmlStr) {
        return new window.DOMParser().parseFromString(xmlStr, "text/xml");
    };
} else if (typeof window.ActiveXObject != "undefined" &&
       new window.ActiveXObject("Microsoft.XMLDOM")) {
    parseXml = function(xmlStr) {
        var xmlDoc = new window.ActiveXObject("Microsoft.XMLDOM");
        xmlDoc.async = "false";
        xmlDoc.loadXML(xmlStr);
        return xmlDoc;
    };
} else {
    throw new Error("No XML parser found");
} 
```

获得`Document`via`parseXml`后，您可以使用常用的 DOM 遍历方法/属性，例如`childNodes`和`getElementsByTagName()`来获取您想要的节点。

示例用法：

```
var xml = parseXml("<foo>Stuff</foo>");
alert(xml.documentElement.nodeName); 
```

如果您使用的是 jQuery，则从 1.5 版本开始，您可以使用其内置[`parseXML()`](http://api.jquery.com/jQuery.parseXML/)方法，该方法在功能上与上述功能相同。

```
var xml = $.parseXML("<foo>Stuff</foo>");
alert(xml.documentElement.nodeName); 
```

* * *

## 回答 #2

> 赞同：93
> 
> 时间：2009-03-16T08:43:45.680

> *更新：有关更正确的答案，请参阅[Tim Down 的答案](https://stackoverflow.com/a/8412989/2172)。*

Internet Explorer 和（例如，基于 Mozilla 的浏览器）为 XML 解析公开了不同的对象，因此使用像[jQuery](http://jquery.com/)这样的 JavaScript 框架来处理跨浏览器的差异是明智的。

一个非常基本的例子是：

```
var xml = "<music><album>Beethoven</album></music>";

var result = $(xml).find("album").text(); 
```

注意：正如评论中指出的那样；jQuery 并没有真正做任何 XML 解析，它依赖于 DOM innerHTML 方法，并且会像解析任何 HTML 一样解析它，所以在 XML 中使用 HTML 元素名称时要小心。但我认为它对于简单的 XML '解析'来说效果很好，但它可能不建议用于密集或'动态' XML 解析，在这种情况下你不预先知道 XML 会下降，这会测试一切是否按预期解析。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2009-03-16T09:46:36.170

Web 上的大多数示例（以及上面介绍的一些示例）显示了如何以与浏览器兼容的方式**从文件加载 XML。**事实证明，这很容易，除非 Google Chrome 不支持该`document.implementation.createDocument()`方法。使用 Chrome 时，为了将 XML 文件加载到 XmlDocument 对象中，您需要使用内置的 XmlHttp 对象，然后通过传递它的 URI 来加载文件。

在您的情况下，情况有所不同，因为您希望**从字符串变量**而不是 URL 加载 XML。然而，对于这个要求，Chrome 应该像 Mozilla 一样工作（或者我听说过）并且支持 parseFromString() 方法。

这是我使用的一个函数（它是我当前正在构建的浏览器兼容性库的一部分）：

```
function LoadXMLString(xmlString)
{
  // ObjectExists checks if the passed parameter is not null.
  // isString (as the name suggests) checks if the type is a valid string.
  if (ObjectExists(xmlString) && isString(xmlString))
  {
    var xDoc;
    // The GetBrowserType function returns a 2-letter code representing
    // ...the type of browser.
    var bType = GetBrowserType();

    switch(bType)
    {
      case "ie":
        // This actually calls into a function that returns a DOMDocument 
        // on the basis of the MSXML version installed.
        // Simplified here for illustration.
        xDoc = new ActiveXObject("MSXML2.DOMDocument")
        xDoc.async = false;
        xDoc.loadXML(xmlString);
        break;
      default:
        var dp = new DOMParser();
        xDoc = dp.parseFromString(xmlString, "text/xml");
        break;
    }
    return xDoc;
  }
  else
    return null;
} 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-01-29T21:16:24.173

[Marknote](http://code.google.com/p/marknote/)是一个不错的轻量级跨浏览器 JavaScript XML 解析器。它是面向对象的，并且有大量示例，而且[API](http://jbulb.org/marknote/doc/)已记录在案。这是相当新的，但到目前为止它在我的一个项目中运行良好。我喜欢它的一件事是它将直接从字符串或 URL 读取 XML，您还可以使用它将 XML 转换为 JSON。

以下是您可以使用 Marknote 执行的操作的示例：

```
var str = '<books>' +
          '  <book title="A Tale of Two Cities"/>' +
          '  <book title="1984"/>' +
          '</books>';

var parser = new marknote.Parser();
var doc = parser.parse(str);

var bookEls = doc.getRootElement().getChildElements();

for (var i=0; i<bookEls.length; i++) {
    var bookEl = bookEls[i];
    // alerts "Element name is 'book' and book title is '...'"
    alert("Element name is '" + bookEl.getName() + 
        "' and book title is '" + 
        bookEl.getAttributeValue("title") + "'"
    );
} 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2009-03-16T10:51:10.710

我一直使用下面在 IE 和 Firefox 中有效的方法。

示例 XML：

```
<fruits>
  <fruit name="Apple" colour="Green" />
  <fruit name="Banana" colour="Yellow" />
</fruits> 
```

JavaScript：

```
function getFruits(xml) {
  var fruits = xml.getElementsByTagName("fruits")[0];
  if (fruits) {
    var fruitsNodes = fruits.childNodes;
    if (fruitsNodes) {
      for (var i = 0; i < fruitsNodes.length; i++) {
        var name = fruitsNodes[i].getAttribute("name");
        var colour = fruitsNodes[i].getAttribute("colour");
        alert("Fruit " + name + " is coloured " + colour);
      }
    }
  }
} 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2011-12-05T22:03:02.190

显然 jQuery 现在提供 jQuery.parseXML [http://api.jquery.com/jQuery.parseXML/](http://api.jquery.com/jQuery.parseXML/) 作为版本 1.5

`jQuery.parseXML( data )` 回报：`XMLDocument`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-03-16T08:41:20.320

请查看*[XML DOM Parser](http://www.w3schools.com/Dom/dom_parser.asp)* ( [W3Schools](http://en.wikipedia.org/wiki/W3Schools) )。这是一个关于 XML DOM 解析的教程。实际的 DOM 解析器因浏览器而异，但 DOM API 是标准化的并且保持不变（或多或少）。

如果您可以[限制](http://www.w3schools.com/e4x/e4x_browsers.asp)自己使用 Firefox，或者使用[E4X 。](http://www.w3schools.com/e4x/e4x_why.asp)它相对更容易使用，并且从 1.6 版开始就成为 JavaScript 的一部分。这是一个小示例用法...

```
//Using E4X
var xmlDoc=new XML();
xmlDoc.load("note.xml");
document.write(xmlDoc.body); //Note: 'body' is actually a tag in note.xml,
//but it can be accessed as if it were a regular property of xmlDoc. 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-01-23T03:36:44.077

**免责声明**：我创建了[fast-xml-parser](https://github.com/NaturalIntelligence/fast-xml-parser)

我创建了[fast-xml-parser来将](https://github.com/NaturalIntelligence/fast-xml-parser)**XML 字符串**解析为 JS/JSON 对象或中间遍历对象。预计它将在所有浏览器中兼容（但仅在 Chrome、Firefox 和 IE 上进行了测试）。

**用法**

```
var options = { //default
    attrPrefix : "@_",
    attrNodeName: false,
    textNodeName : "#text",
    ignoreNonTextNodeAttr : true,
    ignoreTextNodeAttr : true,
    ignoreNameSpace : true,
    ignoreRootElement : false,
    textNodeConversion : true,
    textAttrConversion : false,
    arrayMode : false
};

if(parser.validate(xmlData)){//optional
    var jsonObj = parser.parse(xmlData, options);
}

//Intermediate obj
var tObj = parser.getTraversalObj(xmlData,options);
:
var jsonObj = parser.convertToJson(tObj); 
```

*注意*：它不使用 DOM 解析器，而是使用 RE 解析字符串并将其转换为 JS/JSON 对象。

[在线试用](https://naturalintelligence.github.io/fast-xml-parser/)，[CDN](https://cdnjs.com/libraries/fast-xml-parser)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-12-26T05:24:53.057

```
<script language="JavaScript">
function importXML()
{
    if (document.implementation && document.implementation.createDocument)
    {
            xmlDoc = document.implementation.createDocument("", "", null);
            xmlDoc.onload = createTable;
    }
    else if (window.ActiveXObject)
    {
            xmlDoc = new ActiveXObject("Microsoft.XMLDOM");
            xmlDoc.onreadystatechange = function () {
                    if (xmlDoc.readyState == 4) createTable()
            };
    }
    else
    {
            alert('Your browser can\'t handle this script');
            return;
    }
    xmlDoc.load("emperors.xml");
}

function createTable()
{
    var theData="";
    var x = xmlDoc.getElementsByTagName('emperor');
    var newEl = document.createElement('TABLE');
    newEl.setAttribute('cellPadding',3);
    newEl.setAttribute('cellSpacing',0);
    newEl.setAttribute('border',1);
    var tmp = document.createElement('TBODY');
    newEl.appendChild(tmp);
    var row = document.createElement('TR');
    for (j=0;j<x[0].childNodes.length;j++)
    {
            if (x[0].childNodes[j].nodeType != 1) continue;
            var container = document.createElement('TH');
            theData = document.createTextNode(x[0].childNodes[j].nodeName);
            container.appendChild(theData);
            row.appendChild(container);
    }
    tmp.appendChild(row);
    for (i=0;i<x.length;i++)
    {
            var row = document.createElement('TR');
            for (j=0;j<x[i].childNodes.length;j++)
            {
                    if (x[i].childNodes[j].nodeType != 1) continue;
                    var container = document.createElement('TD');
                    var theData = document.createTextNode(x[i].childNodes[j].firstChild.nodeValue);
                    container.appendChild(theData);
                    row.appendChild(container);
            }
            tmp.appendChild(row);
    }
    document.getElementById('writeroot').appendChild(newEl);
}
</script>
</HEAD>

<BODY onLoad="javascript:importXML();">
<p id=writeroot> </p>
</BODY> 
```

有关更多信息，请参阅此[http://www.easycodingclub.com/xml-parser-in-javascript/javascript-tutorials/](http://www.easycodingclub.com/xml-parser-in-javascript/javascript-tutorials/)

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2016-03-04T03:18:47.313

也可以通过jquery函数($.parseXML)来操作xml字符串

示例 javascript：

```
var xmlString = '<languages><language name="c"></language><language name="php"></language></languages>';
var xmlDoc = $.parseXML(xmlString);
$(xmlDoc).find('name').each(function(){
    console.log('name:'+$(this).attr('name'))
}) 
```

# c# - 检索域 url

> ID：649617
> 
> 赞同：4
> 
> 时间：2009-03-16T08:19:25.787
> 
> 标签：c#, asp.net, url

我想在 asp.net 中检索我的域 url。

例如，如果我的网址是：

```
http://www.mydomain.com/blog/currentPage.aspx?id=156 
```

我只想要那部分

```
http://www.mydomain.com/blog/ 
```

谁能帮我吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-03-16T08:28:26.653

你有很多选择：

```
string root = this.ResolveUrl("~") 
```

或者

```
Uri requestUri = Context.Request.Url;
string baseUrl = requestUri.Scheme + Uri.SchemeDelimiter + requestUri.Host + (requestUri.IsDefaultPort ? "" : ":" + requestUri.Port); 
```

或者

```
string baseUrl = Request.Url.GetLeftPart(UriPartial.Authority); 
```

如果你想 /blog 附加到最后两个，添加

```
+ Request.ApplicationPath 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-16T08:24:45.773

```
// Request.Uri
Uri originalUrl = new Uri("https://www.example.com/blog/currentPage.aspx?id=156");

// www.examle.com
string domain = originalUrl.Host;

// https://www.example.com
string domainUrl = String.Concat(originalUrl.Scheme, Uri.SchemeDelimiter, originalUrl.Host); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-16T08:25:52.213

您应该对此答案进行一些字符串操作：

[c#如何获取当前页面的url](https://stackoverflow.com/questions/593709/how-to-get-url-of-the-current-page-in-c/593715#593715)

另外看看[细分市场](http://msdn.microsoft.com/en-us/library/system.uri.segments.aspx)。

# c++ - 如何在 C/C++ 中构建自定义的简单 DNS 服务器

> ID：649618
> 
> 赞同：10
> 
> 时间：2009-03-16T08:19:52.117
> 
> 标签：c++, c, dns

我需要在 C/C++ 中构建一个自定义的简单非权威缓存 DNS 服务器。有什么指导吗？链接？样品？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-03-16T14:16:36.037

没有“简单”的缓存 DNS 服务器之类的东西，特别是如果您想要体面的安全性。最近的 DNS 攻击表明，递归 DNS 服务器中的缓存功能特别容易受到攻击。

重新评估您是否真的需要自己的本地缓存。如果不这样做，您最好修改现有的 DNS 代理代码（例如“dnsmasq”）。

如果您确实想自己动手，那么有很好的库[`ldns`](http://www.nlnetlabs.nl/projects/ldns/)可以提供对底层 DNS 数据包的访问。

我正在使用`ldns`我自己`libevent`来实现我在之前的问题中提到的 Fuzzing DNS 服务器。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2010-09-17T10:47:45.303

我在 BSD 许可下为面试写了一个基本的 DNS 服务器。

可能有人会发现它有用：

[https://github.com/tomasorti/dns-server](https://github.com/tomasorti/dns-server)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-16T08:26:20.403

有很多 DNS 的免费软件实现。你可以看看他们的源代码。例如：

*   [http://cr.yp.to/djbdns.html](http://cr.yp.to/djbdns.html)
*   [http://www.isc.org/products/BIND/](http://www.isc.org/products/BIND/)

这本书[DNS 和 BIND](http://oreilly.com/catalog/9780596100575/index.html)可能会有所帮助。当然，还有指定 DNS 的 RFC，请参阅[http://rfc-editor.org/](http://rfc-editor.org/)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-03-16T15:29:53.487

如果你真的需要这样做（这是一项**巨大**的工作，请参阅 Alnitak 的回复），从现有的**好**程序（而不是像 djbdns 那样长期无人维护的单人实验）开始并对其进行修改。

[Unbound](http://unbound.net/)可能是一个合理的选择。（代码库比 BIND 的要小。）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-03-16T08:23:42.717

[从djbdns](http://cr.yp.to/djbdns.html "djbdns 的主页")开始。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-16T11:09:49.493

或者，您可以使用[Ragel 状态机编译器](http://www.complang.org/ragel/)从头开始构建您的服务器。

# python - 使用python的目录校验和？

> ID：649623
> 
> 赞同：3
> 
> 时间：2009-03-16T08:22:52.843
> 
> 标签：python, file, filesystems, checksum

因此，我正在进行基于 Web 的文件系统抽象层开发。就像文件浏览器一样，除了它有一些额外的功能，比如奇怪的权限等。

我希望以某种方式通知用户有关目录更改的信息。因此，即当有人通过 FTP 上传新文件时，某些用户应该会收到正确的消息。消息不需要特别详细，我真的不需要显示更改的确切资源。父目录名称应该足够了。

你会推荐什么方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-16T08:29:11.207

如果您的服务器是 Linux，您可以使用[inotify之类的方法来执行此操作](http://pyinotify.sourceforge.net/)

如果唯一的更新来自 FTP，那么我过去使用的另一个解决方案是向[ProFTPD](http://www.proftpd.org/features.html)编写一个附加模块，该模块在上传完成后执行“通知”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-16T08:29:47.757

看到这个问题：[如何快速找到添加/删除的文件？](https://stackoverflow.com/questions/479762/how-to-quickly-find-added-removed-files)

但是，如果您可以通过某种方式控制上传（即使用 HTTP POST 而不是 FTP），您可以简单地在上传完成后发送通知。这还有一个额外的好处，就是可以很简单地确保用户永远不会看到部分文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-16T08:47:34.407

一个简单的方法是监视/检查工作目录的最后修改日期（例如使用 os.stat() ）。

每当修改目录中的文件时，工作目录（文件所在的目录）的最后修改日期也会更改。

至少这适用于我正在处理的文件系统（ufs，ext3）。我不确定是否所有文件系统都这样做。

# c++-cli - 使用 Predicate 和 Array::FindAll() 编译 C++/CLI 委托调用时出错

> ID：649633
> 
> 赞同：7
> 
> 时间：2009-03-16T08:26:45.470
> 
> 标签：c++-cli, compiler-errors, delegates

以下代码导致 C3867（...函数调用缺少参数列表...）和 C3350（...委托构造函数需要 2 个参数...）。我究竟做错了什么？

```
 public ref class Form1 : public System::Windows::Forms::Form
    {
    public:
        bool IsEven(int i){
            return (i % 2) == 0;
        }

        Form1(void)
        {
            numbers = gcnew array<int>{
                1, 2, 3, 4, 5, 6, 7, 8, 9, 10
            };

            array<int> ^even = Array::FindAll(
                numbers, gcnew Predicate<int>(IsEven));
        }
    }; 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-03-16T08:48:54.577

在 C++/CLI 中，您必须传递包含函数的类型的实际实例：

```
 array<int> ^even = Array::FindAll(
    numbers, gcnew Predicate<int>(this, &Test::IsEven)); 
```

（或制作你的`IsEven`方法`static`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-29T05:15:10.827

以下简单的控制台应用程序提供了使用.NET C++/CLI的`FindAll()`方法示例。`array`

这适用于不支持 lambdas 的 Visual Studio 2005。由于您的示例使用的是 Windows 窗体，因此我在此 Windows 控制台应用程序中提供了一个额外的类，`Predicate`以在`FindAll()`.

此示例显示了提供谓词的三种不同机制：

*   使用没有对象的类静态函数
*   使用需要在使用之前创建对象的类方法
*   一个简单的 C 风格函数，它不是类中的方法

这是一个非常基本的示例，`int`但它也适用于更复杂的数据结构。

```
// _scrap_net.cpp : main project file.

#include "stdafx.h"

using namespace System;

    public ref class Thing1
    {
    private:
        int     iDiv;                  // divisor if specified
    public:
        static bool IsEven(int i){      // static usable without creating an object
            return (i % 2) == 0;        // even number if division has no remainder
        }
        static bool IsOdd(int i){       // static usable without creating an object
            return (i % 2) != 0;        // odd numbered if division has remainder
        }
        bool IsDivisibleBy (int i) {    // non-static must create object before using
            return (i % iDiv) == 0;     // check if division has remainder
        }
        bool IsNotDivisibleBy (int i) { // non-static must create object before using
            return (i % iDiv) != 0;     // check if division has remainder
        }

        Thing1(void) { iDiv = 2; }      // standard constructor
        Thing1(int i) { iDiv = i; }     // constructor with argument to use IsDivisibleBy()
    };

    // standalone function used rather than a class function
    bool IsLessThan10 (int i) {
        return i < 10;
    }

int main(array<System::String ^> ^args)
{
    // sample array of some integers for our example
    array<int> ^numbers = gcnew array<int>{
        1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14
    };

    // our format string to use when printing the array values
    String ^ fmt = gcnew String(L" {0,6}");

    // use a static function in a class as the predicate so object not needed
    array<int> ^even = Array::FindAll(numbers, gcnew Predicate<int>(&Thing1::IsEven));

    Console::WriteLine (L"\n even ");
    for each (int jj in even) {
        Console::Write(fmt, jj);
    }

    // use a standard function as the predicate so class not needed
    array<int> ^lessThan10 = Array::FindAll(numbers, gcnew Predicate<int>(&IsLessThan10));

    Console::WriteLine (L"\n lessThan10 ");
    for each (int jj in lessThan10) {
        Console::Write(fmt, jj);
    }

    // use a special divisor so create an object with that value and use it.
    Thing1 ^ myDiv = gcnew Thing1(3);

    // need to specify the object for the object method in the predicate
    array<int> ^divBy3 = Array::FindAll(numbers, gcnew Predicate<int>(myDiv, &Thing1::IsDivisibleBy));

    Console::WriteLine (L"\n divBy3 ");
    for each (int jj in divBy3) {
        Console::Write(fmt, jj);
    }

    // need to specify the object for the object method in the predicate
    array<int> ^notDivBy3 = Array::FindAll(numbers, gcnew Predicate<int>(myDiv, &Thing1::IsNotDivisibleBy));

    Console::WriteLine (L"\n notDivBy3 ");
    for each (int jj in notDivBy3) {
        Console::Write(fmt, jj);
    }

    Console::WriteLine (L"\nEnd");
    return 0;
} 
```

该程序的输出如下所示：

```
 even
      2      4      6      8     10     12     14
 lessThan10
      1      2      3      4      5      6      7      8      9
 divBy3
      3      6      9     12
 notDivBy3
      1      2      4      5      7      8     10     11     13     14
End 
```

# windows-xp - 如何从另一个 bat 文件在后台运行 bat 文件？

> ID：649634
> 
> 赞同：99
> 
> 时间：2009-03-16T08:27:35.687
> 
> 标签：windows-xp, batch-file, cmd

我有一个早上运行的“设置”脚本，它启动了我需要的所有程序。现在其中一些需要额外设置环境，所以我需要将它们包装在小型 BAT 脚本中。

如何在 Windows XP 后台运行这样的脚本？

`CALL env-script.bat`同步运行它，即设置脚本只有在 env-script 中的命令终止后才能继续。

`START/B env-script.bat`在同一命令提示符下运行另一个 CMD.exe 实例，使其处于非常混乱的状态（我看到嵌套 CMD.exe 的输出，键盘有一段时间没电了，脚本没有执行）。

`START/B CMD env-script.bat`产生相同的结果。CMD 中的所有标志似乎都与我的账单不符。

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2011-12-02T03:05:12.787

两岁，但为了完整......

**标准的内联方法：（**即`&`在 Linux 中使用时的行为）

```
START /B CMD /C CALL "foo.bat" [args [...]] 
```

注意： 1.`CALL`与 .bat 文件配对，因为它通常放在哪里..（即这只是`CMD /C CALL "foo.bat"`表单的扩展，使其异步。通常，它需要正确获取退出代码，但这不是问题这里。）; 2\. .bat 文件只有在名称包含空格时才需要双引号。（名称可能是一条路径，在这种情况下更有可能发生这种情况。）。

**如果您不想要输出：**

```
START /B CMD /C CALL "foo.bat" [args [...]] >NUL 2>&1 
```

**如果您希望 bat 在独立的控制台上运行：（**即另一个窗口）

```
START CMD /C CALL "foo.bat" [args [...]] 
```

**如果您希望其他窗口在之后挂起：**

```
START CMD /K CALL "foo.bat" [args [...]] 
```

注意：这实际上是一种糟糕的形式，除非您有用户特别想将打开的窗口用作普通控制台。如果您只想让窗口停留在附近以查看输出，最好`PAUSE`在 bat 文件的末尾放置一个。甚至，`^& PAUSE`在命令行之后添加：

```
START CMD /C CALL "foo.bat" [args [...]] ^& PAUSE 
```

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2009-03-16T10:53:11.703

实际上，以下内容对我来说很好，并创建了新窗口：

测试.cmd：

```
@echo off
start test2.cmd
start test3.cmd
echo Foo
pause 
```

test2.cmd

```
@echo off
echo Test 2
pause
exit 
```

test3.cmd

```
@echo off
echo Test 3
pause
exit 
```

将其与 参数结合起来`start`，例如`/min`，正如 Moshe 指出的那样，如果您不希望新窗口出现在您面前。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-03-16T08:59:29.307

由于 START 是从 CMD 脚本在后台执行某些操作的唯一方法，因此我建议您继续使用它。而不是 /B 修饰符，尝试 /MIN 这样新创建的窗口就不会打扰您。此外，您可以使用 /LOW 或 /BELOWNORMAL 将优先级设置为较低的值，这应该会提高您的系统响应能力。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-04-25T04:23:35.753

除了前景/背景术语。隐藏正在运行的窗口的另一种方法是通过 vbscript，如果在您的系统中仍然可用。

```
DIM objShell
set objShell=wscript.createObject("wscript.shell")
iReturn=objShell.Run("yourcommand.exe", 0, TRUE) 
```

将其命名为 sth.vbs 并从 bat 中调用它，放入已调度的任务等。就我个人而言，我将在我管理的任何 Windows 系统上毫不犹豫地禁用 vbs :)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-10-25T15:08:12.923

最后使用此选项实际上很容易：

> c:\start BATCH.bat -WindowStyle 隐藏

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-16T09:43:39.047

创建一个新的 C# Windows 应用程序并从 main 调用此方法：

```
public static void RunBatchFile(string filename)
{
    Process process = new Process();

    process.StartInfo.FileName = filename;

    // suppress output (command window still gets created)
    process.StartInfo.Arguments = "> NULL";

    process.Start();
    process.WaitForExit();
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2011-06-30T15:11:51.367

这适用于我的 Windows XP Home 安装，Unix 方式：

```
call notepad.exe & 
```

# windows-xp - 如何在 xp 任务栏中插入类似 UI 的侧边栏？

> ID：649637
> 
> 赞同：0
> 
> 时间：2009-03-16T08:29:39.973
> 
> 标签：windows-xp, taskbar

这个想法是结合 windows xp 上的任务栏和 windows vista 中的“侧边栏”的功能。

如果我们将任务栏垂直（左对齐或右对齐）停靠在桌面上并给它一些合适的宽度，这将非常有用。

优点

1.  更多数量的任务栏项目可以垂直堆叠在任务栏上（与默认的水平布局相比）
2.  任务栏的某些部分可以非常方便地托管像 UI 这样的侧边栏。例如 ToDo 列表、世界时间等

当然，xp 提供的各种小部件都是不错的选择，但有没有任何选项可以利用 taksbar 本身的房地产来实现这一目的。在屏幕上添加另一个栏只会为打开的windwos留下更少的空间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-24T18:10:35.737

You can see [Yahoo Widgets](http://widgets.yahoo.com/).

There already exists a lot of widgets and [you can build](http://widgets.yahoo.com/tools/) one on your own.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-03-20T01:10:59.557

您已经可以[在 XP 中安装 Vista 侧边栏](http://joshoon.deviantart.com/art/Windows-Sidebar-Real-one-Pack-75626472?loggedin=1)。如果你想开发自己的，看看这个。

# c++ - 如何在 STL priority_queue 中进行有效的优先级更新？

> ID：649640
> 
> 赞同：41
> 
> 时间：2009-03-16T08:31:49.577
> 
> 标签：c++, stl, priority-queue

我有一些对象的priority_queue：

```
typedef priority_queue<Object> Queue;
Queue queue; 
```

有时，其中一个对象的优先级可能会发生变化 - 我需要能够以有效的方式更新队列中该对象的优先级。目前我正在使用这种有效但似乎效率低下的方法：

```
Queue newQueue;
while (!queue.empty())
{
  Object obj=queue.top();
  queue.pop();

  if (priorityHasChanged(obj))
    newQueue.push_back(Object(new_priority));
  else
    newQueue.push_back(obj);
}

newQueue.swap(queue); // this only works because I actually subclassed the priority_queue
                 // class and exposed a swap method that swaps in the container 
```

我以这种方式实现它是因为当时我有点着急，这是我能做的最快的事情，我可以肯定它会正常工作。不过，必须有比这更好的方法。我真正想要的是一种方法：

*   提取具有更改优先级的实例并插入具有新优先级值的新实例
*   使用更改的优先级更新实例，然后更新队列以使其正确排序

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-12-23T08:56:08.610

我可以建议 2 种选择来解决问题，尽管它们都不执行真正的更新。

1.  `priority_queue`每次您想更新它时使用and push 元素。接受这样一个事实，即队列中将有无用的条目。弹出顶部值时，检查它是否包含最新值。如果没有，请忽略它并弹出下一个。

    这样，您可以延迟删除更新的元素，直到它到达顶部。我注意到实现 Dijkstra 算法的顶级程序员正在使用这种方法。

2.  使用`set`. 它也经过排序，因此您能够在对数时间内提取最大元素。您还可以在再次插入之前删除过时的元素。所以仍然无法进行更新操作，但删除和重新插入是可行的。

似乎两种方法的复杂性是相同的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-03-16T09:09:38.583

我认为您对标准优先级队列不走运，因为您无法获得底层的双端队列/向量/列表或其他任何东西。你需要实现你自己的——这并不难。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-12-09T23:53:40.013

我已经实现了一个高性能的可更新优先级队列，并[在 github 上](https://github.com/Ten0/updatable_priority_queue)提供了它。

这是您通常使用它的方式：

```
better_priority_queue::updatable_priority_queue<int,int> pQ;
pQ.push(0, 30);   // or pQ.set(0, 30)
pQ.push(1, 20);
pQ.push(2, 10);

pQ.update(2, 25); // or pQ.set(2, 25)

while(!pQ.empty())
    std::cout << pQ.pop_value().key << ' ';

// Outputs: 0 2 1 
```

为了补充 Jarekczek 的回答，如果确实`set`和“具有无用条目的纯堆”方法具有相同的复杂性，则该`stl::set`版本的执行速度通常比该`stl::priority_queue`版本慢得多，因为它是使用仅保证其深度的红黑树实现的小于 2*log_2(n_elements) 并且需要定期更新，同时`stl::priority_queue`是一个尽可能纯净和快速的二进制堆。这就是为什么在实现 Dijkstra 时通常使用它的原因。

然而，当在少数基本节点上进行大量更新时，set 方法可能会更快。这也是使用我的库可以为您带来最大改进的地方。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2010-07-20T20:19:33.210

适当的数据结构称为“斐波那契堆”。但是你需要自己实现它。插入/更新是 O(1) ExtractMin 是 O(logn)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2010-02-06T21:34:20.440

使用 STL（我知道）最直接的方法是删除条目，更新其优先级，然后重新插入。使用 std::priority_queue 执行此操作非常慢，但是您可以使用 std::set 执行相同操作。不幸的是，当对象在集合中时，您必须小心不要更改对象的优先级。

我已经实现了一个 mutable_priority_queue 类，它把一个 std::multimap （用于优先级映射）和一个 std::map （用于优先级映射）粘合在一起，允许您插入/删除项目以及更新现有的对数值时间。[您可以在此处](http://jamesgregson.blogspot.com/2010/02/updateable-priority-queue.html)获取代码和如何使用它的示例

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-16T08:46:50.617

你可能想看看[这里](http://www.cplusplus.com/reference/algorithm/replace_if.html)`replace_if`的一个例子。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-01-02T01:06:44.577

不幸的是，您无法更新 priority_queue 中的值。priority_queue 不提供这样的接口。

我认为您最好使用`set`Jarekczek 所说的或使用[此解决方案](https://stackoverflow.com/a/5811888/4785256)（使用 make_heap）。

# com - 如何从 COM dll 中的序号获取函数名

> ID：649644
> 
> 赞同：1
> 
> 时间：2009-03-16T08:38:20.420
> 
> 标签：com, dll, ordinals

我试图从 COM dll 的序号中获取实际的函数名称。我尝试使用`dumpbin.exe`，但它只返回`[NONAME]`每个序数（前几个除外）。

```
    序号提示 RVA 名称

         21 0 00002439 DLLCanUnloadNow
         25 1 00007F41 DllGetClassObject
        116 2 0000539C DLLMain
        138 3 00008633 DllRegisterServer
        176 4 00008640 DllUnregisterServer
          1 0009152E [无名]
          2 00154CA7 [无名]
          3 00154C0B [无名]
          4 000140C9 [无名]
        ...

```

包含 .dll 文件的目录不包含任何其他文件（*.tlb、*.lib、*.def）。

有人可以告诉我如何获取这些列表吗？或者至少使用注册表或其他东西的特定序数的名称？

**[编辑：附加信息]** 我找不到 COM dll 的 .def 文件，所以我无法使用它来获取名称。我对实例化 COM 类不感兴趣，我只想知道与指定序数相关的函数。

我原来的问题是我使用WinDbg发现了一个异常，发生在ChartFXClientServerCore!Ordinal5507(+0x97b7)，所以想看看具体的函数来尝试隔离问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-16T08:47:31.803

您可以使用 OleView 工具 (OLE/COM Object Viewer)，它随 Windows SDK 一起提供，[http://www.microsoft.com/downloads/details.aspx? FamilyId=F26B1AA4-741A-433A-9BE5 -FA919850BDBF&displaylang=en](http://www.microsoft.com/downloads/details.aspx?FamilyId=F26B1AA4-741A-433A-9BE5-FA919850BDBF&displaylang=en)。在该工具中，转到 File->View TypeLib，然后浏览到您的 DLL。

**编辑：**针对关于 DLL 序号与 typelib 公开的方法名称之间关系的问题的回答：通过 COM 公开的方法也通过 DEF 文件或通过 __declspec(dllimport) 公开并不太常见。通常，在通过 CoCreateInstance() 或类似方法创建相应的类之后，您可以通过其 IUnknown 派生接口访问 COM 方法。

DLL 的程序员*也可以*选择在 DEF 文件中公开一些 COM 方法，但 AFAIK 找出映射的唯一方法是查看 dumpbin /exports 的输出，取消修饰返回的名称（使用 undname .exe) 并在 typelib 中直观地找到对应关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-07-18T14:12:51.353

如果您的 COM 组件未标记为可安全编写脚本，则 OLEView 很可能没有任何真实信息（即不能从脚本中调用它，因此有关如何调用它的所有信息（类型库）都通过空闲）。

像[mIDA](http://cgi.tenablesecurity.com/tenable/mida.php)这样的东西可以为您提供大部分信息。你也可以在[woodmann上搜索](http://www.woodmann.com/collaborative/tools/index.php/Category:Symbol_Tools)[openrce](http://www.openrce.org/search/query)，寻找 NDR RPC IDL，试试 symbolviewer。（[RIP fravia](http://www.woodmann.com/fravia/index.htm)）。

# wget - 仅在使用 wget 的 http 状态 200 时创建文件？

> ID：649647
> 
> 赞同：12
> 
> 时间：2009-03-16T08:41:04.767
> 
> 标签：wget

我一直在想办法让 wget 仅在实际下载响应有效时才创建文件，这意味着没有 404 或 500 状态代码，只有 200。

但是，当使用 -O 选项（指定文件名）时，它总是会创建带有错误页面内容的文件，而且我还没有找到一种方法来指定它在收到 404 响应时应该忽略它 -标题。

我需要检查退出代码并管道输出还是有更好的选择？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-03-16T08:48:48.990

除了修补 wget （有效选项）之外，也许这是唯一的答案：

```
wget -O somefile.html http://example.com/ || rm somefile.html 
```

# c - C中的任何通用数据类型库？

> ID：649649
> 
> 赞同：6
> 
> 时间：2009-03-16T08:42:03.187
> 
> 标签：c, data-structures

我正在尝试用 C（没有 c++）编写一个 2d 游戏引擎。有哪些好的库具有我可能需要的通用数据类型——例如队列、树、地图、列表等？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-03-16T08:51:12.447

看看[GLib——](http://developer.gnome.org/glib/)它有树、哈希图、链表和队列。

[维基百科文章](http://en.wikipedia.org/wiki/GLib)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-16T16:31:29.190

如果您在 Mac 上，您将在[核心基础框架](http://developer.apple.com/documentation/CoreFoundation/Conceptual/CFCollections/CFCollections.html)中获得所有可用的基本数据结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-28T00:03:37.763

如果您不想使用像 GLib 这样的重量级库来使用数据结构，请考虑我的轻量级版本[dstruct](http://github.com/chutsu/dstruct)，它很大程度上基于在[Learn C the Hard Way](http://c.learncodethehardway.org/book/)中生成的代码[Zed Shaw](http://en.wikipedia.org/wiki/Zed_Shaw)。它目前具有：

*   动态数组
*   双向链表
*   哈希图
*   二叉搜索树

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-25T04:14:49.840

您可以尝试[#awesome-c](https://github.com/kozross/awesome-c) list中提到的任何一个[库](https://github.com/kozross/awesome-c#data-structures)

这里列出的大多数库的酷之处在于，它们中的大多数仍在积极维护，因此如果您决定专业使用它们，您将不会继承死库。

您可以使用的另一个[#awesome-c列表](https://github.com/aleksandar-todorovic/awesome-c)[在这里](https://github.com/aleksandar-todorovic/awesome-c#frameworks)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2009-03-16T08:47:53.207

不确定这个答案是否是您所追求的，但关于该主题的有用读物是[Sedgewick 的“C 中的算法”](https://rads.stackoverflow.com/amzn/click/com/0201314525)

高温高压

# .net - MessageBox.Show 显示在任务栏上的风格

> ID：649658
> 
> 赞同：1
> 
> 时间：2009-03-16T08:45:29.733
> 
> 标签：.net, taskbar, messagebox

有没有办法调用出现在任务栏中的 MessageBox.Show？

当然，最好只创建一个自定义表单并显示它，但作为一个懒惰的程序员，我想避免重做您通过老式 MessageBox.Show 调用获得的默认错误和警报通知图标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-16T09:34:02.643

尝试使用[MessageBoxOptions](http://msdn.microsoft.com/en-us/library/system.windows.forms.messageboxoptions.aspx)枚举：

```
MessageBox.Show("Test", "Test", MessageBoxButtons.OK, MessageBoxIcon.Information,
    MessageBoxDefaultButton.Button1, MessageBoxOptions.DefaultDesktopOnly); 
```

**注意：**使用这个有一些多线程副作用，请参阅文章[How To Display A User Interface From A Daemon](http://alt.pluralsight.com/wiki/default.aspx/Keith.GuideBook/HowToDisplayAUserInterfaceFromADaemon.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-16T08:56:54.447

实现一个 IWin32Window，将句柄作为 IntPtr.Zero（桌面）返回，然后以该窗口作为父窗口显示消息框。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-16T09:23:34.290

```
private static Image GetImage(MessageBoxIcon icon)
{
    switch (icon)
    {
        case MessageBoxIcon.Error:
            return System.Drawing.SystemIcons.Error.ToBitmap();
        case MessageBoxIcon.Exclamation:
            return System.Drawing.SystemIcons.Exclamation.ToBitmap();
        case MessageBoxIcon.Information:
            return System.Drawing.SystemIcons.Information.ToBitmap();
        case MessageBoxIcon.Question:
            return System.Drawing.SystemIcons.Question.ToBitmap();
    }
    return null;
} 
```

# ant - 如何仅用一个替换对宏定义的三个调用？

> ID：649659
> 
> 赞同：1
> 
> 时间：2009-03-16T08:46:19.153
> 
> 标签：ant, macrodef

如何替换对“myMacro”的三个调用：

```
<myMacro value="value 1"/>
<myMacro value="value 2"/>
<myMacro value="value 3"/> 
```

只有一个调用会使用三个元素的列表：值 1、值 2、值 3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-16T09:34:01.440

您可以使用来自第 3 方[Ant-Contribs 任务的](http://ant-contrib.sourceforge.net/)[`For`任务](http://ant-contrib.sourceforge.net/tasks/tasks/for.html)。它利用了 Ant任务，因此[将其与您之前的问题结合起来，](https://stackoverflow.com/questions/643352/how-to-distribute-each-element-of-a-list-to-argument-of-a-task-ant)您可以将宏和三个宏调用替换为：`MacroDef`

```
<for list="1,2,3" param="value">
    <sequential>
        <exec executable="cmd">
            <arg value="/c"/>
            <arg value="value @{value}"/>
        </exec>
    </sequential>
</for> 
```

# sql-server-2005 - 如何解锁 SQL SERVER 2005 上的 sa 帐户？

> ID：649677
> 
> 赞同：4
> 
> 时间：2009-03-16T08:52:47.170
> 
> 标签：sql-server-2005

我们已将数据库从 SQL 2000 迁移到新的 SQL 2005，该 SQL 2005 与 Intranet 页面一起用于显示和更新数据。我们现在无法使用 sa 帐户登录，因为该页面的设置使用了旧的登录密码，并且似乎已锁定 sa 帐户。

我想在这个页面上使用 sa 帐户并不是一个好主意，但这仍然无济于事，因为我们无法登录以创建新帐户。

有没有办法解锁sa帐户而不能以sa身份登录？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-16T12:02:49.633

我们只能在实际服务器上使用 Windows 身份验证登录。一旦我们解决了这个问题，我们运行命令：

```
ALTER LOGIN sa WITH PASSWORD = 'your_password_here' UNLOCK 
```

在 SQL 管理工作室中，更正了 web.config 文件中的登录密码，一切正常。

事实证明，密码策略在 SQL Server 2005 上是可执行的，因此重复的错误登录会锁定该帐户。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-16T09:25:08.297

如果您的系统设置为混合访问，您应该能够使用管理员的 Windows 密码登录。然后你就可以修改密码了。您实际上可以使用任何管理员帐户执行此操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-16T09:03:45.460

如果您具有管理权限，则可以通过“SQL Server 外围应用配置”工具“解除”SQL 以允许使用 sa。除了仅 Windows 登录之外，您还需要启用 SQL 登录...

# vba - Excel + VBA：单击上方自选图形时更改右键菜单

> ID：649681
> 
> 赞同：1
> 
> 时间：2009-03-16T08:54:05.560
> 
> 标签：vba, excel

我正在做一个小的 Excel + vba 应用程序，但我卡住了。我知道使用

```
Application.CommandBars("Cell").Controls.* 
```

我可以更改右键菜单以仅显示特定单元格的特定选项（当然还有附加代码）。

但是，当我单击 autoshape 上方的鼠标右键时，有没有办法更改菜单？

我一直在使用类似的东西

```
(...)
'checking autoshape position
sh_le = sh.Left
sh_to = sh.Top
sh_ri = sh.Left + sh.Width
sh_do = sh.Top + sh.Height

'checking clicked cell position
cc_le = cel.Left
cc_to = cel.Top
cc_ri = cel.Left + cel.Width
cc_do = cel.Top + cel.Height

If (sh_le <= cc_le) And (sh_to <= cc_to) And (sh_ri >= cc_ri) And (sh_do >= cc_do) Then  
 'build custom menu
end if 
```

它看起来不错（至少我是这么认为的 :) - 但是当我点击上方的形状时，它`Worksheet_BeforeRightClick`并没有开始。还有其他方法吗？我将不胜感激任何信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-17T16:20:01.143

有一个未记录的特征，这意味着在您关闭文件并重新打开它之前，此事件可能不会触发。

试试看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-27T22:49:50.650

我已经实现了这种方式。在代码**OnAction = "openOrder"**中，**openOrder**是公共模块来完成这项工作。

您可以将*CommandBars("Cell").Controls*更改为**CommandBars("Shapes").Controls**

```
Private Sub Workbook_Deactivate()
    On Error Resume Next
    Application.CommandBars("Cell").Controls("View order").Delete
    On Error GoTo 0
End Sub

        Private Sub Workbook_SheetBeforeRightClick(ByVal Sh As Object, ByVal Target As Range, Cancel As Boolean)

        Dim cBut As CommandBarButton

        On Error Resume Next

        If IneedCustomMenu=TRUE Then
            On Error Resume Next
            Set cBut = Application.CommandBars("Cell").Controls.Add(Temporary:=True)
                With cBut
                   .Caption = "View order"
                   .Style = msoButtonCaption
                   .OnAction = "openOrder"
                End With
            On Error GoTo 0
        Else
               On Error Resume Next
               With Application
                        .CommandBars(Cell).Controls("View order").Delete
               End With
        End If
       End Sub 
```

# listview - ListView_SetBkImage 在 XP 上不起作用

> ID：649690
> 
> 赞同：1
> 
> 时间：2009-03-16T08:59:03.380
> 
> 标签：listview

我想在我的 Shell 扩展中设置 ListView 控件的背景图像。ListView 继承了 IShellView，我正在使用以下代码：-

```
HBITMAP m_hBmp = (HBITMAP)::LoadImage( hinst, 
    MAKEINTRESOURCE( IDB_BITMAP1 ), IMAGE_BITMAP, 0, 0, 
    LR_CREATEDIBSECTION | LR_LOADMAP3DCOLORS);
if ( m_hBmp )
{
    LVBKIMAGE bki;
    bki.ulFlags= LVBKIF_SOURCE_HBITMAP;
    bki.hbm = m_hBmp;
    bki.cchImageMax = sizeof( bki.hbm );
    bki.xOffsetPercent = 50;
    bki.yOffsetPercent = 50;
    ListView_SetBkImage(m_hwndList,&bki);
} 
```

上面的代码在 Vista 中运行良好，但由于某种原因它在 XP 中无法运行。有什么我想念的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-14T08:00:46.993

为了使其在两个版本（XP 和 Vista）中都能正常工作，我们使用了这两种方法。对于 XP，我们从文件加载图像，对于 Vista，我们从资源加载它。出于某种原因，从文件加载在 Vista 中不起作用，从资源句柄加载在 XP 中不起作用。

所以方法是首先从文件加载它，然后如果它失败，从资源句柄加载。

# c# - C# 命令行参数和 ls

> ID：649697
> 
> 赞同：2
> 
> 时间：2009-03-16T09:03:41.107
> 
> 标签：c#, .net, bash, ls, msys

我正在使用[MSYS](http://www.mingw.org/)在 Windows 上获得一些理智的可编写脚本的外壳 :)。

现在我正在编写一个用 C# 编写的控制台应用程序，它接受许多参数并将这些参数作为选项呈现给对话框中的用户。实际选项对应于文件名，我用 ls 检索。

但是，当我的文件名中包含空格时，就会出现问题。假设我有名为：

```
file name
with spaces 
```

在名为 foo 的目录中，我的 C# 可执行文件名为 bar，在里面我检查“argv”数组的内容（即传递给我的应用程序的命令行参数，由 .NET 解释）。

当我调用它时会发生以下奇怪现象：

./bar.exe "文件名" "带空格" -->

```
file name
with spaces 
```

./bar.exe $(ls foo) -->

```
file
name
with
spaces 
```

./bar.exe $(ls -Q foo) -->

```
"file
name"
"with
spaces" 
```

有谁知道这里发生了什么？显然，.NET 没有正确解析 bash 或 ls 传递的参数。

但即使我添加引号，引号也包含在参数中，而不是将两个参数合并为一个。

有没有办法让我进入未处理的命令行，所以我可以看看控制字符是否发生了奇怪的事情？

任何见解将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-16T09:10:22.247

您可以使用`Environment.CommandLine`获取原始命令。不知道 bash 的东西，抱歉；可能涉及行尾（CR vs LF vs CRLF vs LFCR）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-03T10:21:52.290

我认为问题是您在命令行中传递参数，而命令行将每个单词读取为单独的 Parameter ; 尝试做“文件名”“带空格”..
如果你通过代码传递它使用

```
ProcessStartInfo.Arguments = "\"File Name \"" ; 
```

作为你的过程的论据

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-02-03T09:35:02.773

我在使用[RegawMOD.Android](http://www.regawmod.com/software/windows/androidlib/current/documentation/html/a20daf82-f181-08ac-e563-13ca3e92327b.htm)库的项目中使用了它

```
Device device = android.GetConnectedDevice(android.ConnectedDevices[0]);

objArray = new object[] { "ls", string.Concat("/sdcard/")) };

str = Adb.ExecuteAdbCommand(Adb.FormAdbCommand(device, "shell", objArray));
// or 
// str= Adb.ExecuteAdbCommand(Adb.FormAdbCommand("shell",objArray)); 
```

有关更多命令选项，请查看此[命令](http://spblinux.de/2.0/doc/ls.html)

# linux - 如何向网页发送信号

> ID：649702
> 
> 赞同：1
> 
> 时间：2009-03-16T09:04:39.170
> 
> 标签：linux

我们的项目平台是Linux。在我们的项目中，我们需要一个网络服务器和一些网页。

我们必须通过 .cgi 文件进行网页编码，每当我从其他进程获取这些信息时，我都必须向网页动态添加一些细节。我们使用了消息队列。

另一个进程将更新消息队列并向该进程发出信号。该进程必须处理信号并更新网页中的信息。

所以我必须不断地等待信号。为此我使用了while循环，所以如果我正常执行，所需的输出即将到来..但是当我试图通过网络浏览器加载.cgi文件时，它被冻结了。

这是我的代码...

```
#include <libxml/xmlmemory.h>
#include <libxml/parser.h>
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <errno.h>
#include <unistd.h>
#include <sys/types.h>
#include <sys/ipc.h>
#include <sys/msg.h>
#include<signal.h>

struct my_msg_st {
long int my_msg_type;
char some_text[BUFSIZ];
};

sig_atomic_t flag = 0;

void sigint_handler(int sig)
{
    printf("signal handled\n");
    flag = 1;
}

int main()
{

    int msgid;
    struct my_msg_st some_data;
    long int msg_to_receive = 0;
    struct sigaction sa;
    sigset_t waitset;
    int sig;
    int result;

    sigemptyset( &waitset );
    sigaddset( &waitset, SIGUSR1 );

    memset (&sa, 0, sizeof (sa));
    sa.sa_flags = 0;
    sa.sa_handler = &sigint_handler;
    sigaction (SIGUSR1, &sa, NULL);

    printf
            ("Content-type: text/html\nPRAGMA:NO-CACHE\nCACHE-CONTROL:NO-CACHE\n\n");
        printf("<HTML>\n");

        printf("<head><META HTTP-EQUIV=\"Pragma\" CONTENT=\"no-cache\"> <META HTTP-EQUIV=\"Expires\" CONTENT=\"-1\"><title>COOPER BUSSMANN MONITORING DATA</title>\n");
        printf("<style type=\"text/css\">\n"
        "body {background-color: #00ffff}\n"

        "</style>\n"

        "</head>\n");

        printf("<body>\n");

        printf("<table ID=\"_Table\" ALIGN=\"CENTER\" BORDER=\"0\" COLS=\"6\" WIDTH=\"650\">\n");
        printf("<TR><TD COLSPAN=\"6\">&nbsp;</TD></TR>\n");
        printf("<TR><TD COLSPAN=\"6\"   ALIGN=\"CENTER\"><h1>MONITORING DATA</h1></TD></TR>\n");
        printf("<TR><TD COLSPAN=\"6\" ALIGN=\"CENTER\"><HR></TD></TR>\n");
        printf("<TR><TD COLSPAN=\"6\">&nbsp;</TD></TR>\n");
        printf("</table>\n");

        printf("<table ID=\"_Table\" ALIGN=\"CENTER\" BORDER=\"1\" COLS=\"6\" WIDTH=\"650\">\n");
        printf("<TR>\n");
        printf("<TH>ESN</TH><TH>IsStatic</TH><TH>Alarm Type</TH><TH>TimeStamp</TH><TH>PartNumber</TH><TH>Location</TH><TH>PPE</TH></TR>\n");

  while(1)
 {

    printf("entered waiting for signal\n");
    sleep(10);

      if(flag == 1)
  {

       printf("From siguser just got a sigint signal\n");
       msgid = msgget((key_t)1234, 0666 | IPC_CREAT);

        if(msgid==-1)
        printf("error in opening msg queue\n");

        if (msgrcv(msgid, (void *)&some_data, BUFSIZ,msg_to_receive, 0) == -1)
       {

         fprintf(stderr, ".msgrcv failed with error: %d\n.", errno);
         exit(EXIT_FAILURE);

       }

      printf(".You wrote: %s.", some_data.some_text);

      printf("<TR><TD align = \"center\">%s\n</TD></TR>",some_data.some_text);

      if (msgctl(msgid, IPC_RMID, 0) == -1)
       {

         fprintf(stderr, ".msgctl(IPC_RMID) failed\n.");
         exit(EXIT_FAILURE);

       }

       flag = 0;
   }

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-16T09:16:02.997

我想你会发现这不是更新网页的正确方法。如果 CGI 从未完成运行，浏览器将一直等到超时。

尽管我相信您可以刷新响应并且某些浏览器可能会开始呈现页面，但要正确显示页面，CGI 需要成功完成执行。

使用无限循环，浏览器永远不会呈现完整的页面，也不知道预期的内容长度，如果由于某种原因在循环期间发生崩溃，它将导致内部服务器错误。

用于输出网页的 CGI 或服务器端脚本并不是真正设计为无限期运行的。

我会调查在您的页面中使用 AJAX 来定期查询服务器以获取更新。

我相信有一些服务器“推送”技术（我认为一个可能被称为彗星）但通常人们使用 AJAX 来完成这种类型的事情。

# delphi - 编译器提示：“内联函数'...'尚未扩展...”

> ID：649704
> 
> 赞同：15
> 
> 时间：2009-03-16T09:06:45.907
> 
> 标签：delphi, winapi

在一个单元中，我使用该函数`DeleteFile`，编译器输出一个提示：

> “H2443 内联函数 'DeleteFile' 尚未扩展，因为在使用列表中未指定单元 'Windows'”

在`Uses`那里`SysUtils`，它定义了`DeleteFile`（尽管在内部调用`Windows.DeleteFile`）。

这个提示是什么意思？如果我放入`Windows`该`Uses`子句，它就消失了，但我想了解是什么困扰了编译器。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-03-16T09:21:14.827

这是一个内联限制。

请参阅 Hallvard Vassbotn 关于[内联例程](http://hallvards.blogspot.com/2007/04/dn4dp7-inlined-routines.html)的文章。

从该网站提取：

> 其余的内联限制对于两个平台都是通用的，最重要的是
> 
> *   没有跨包边界内联
> *   内联例程无法访问实现部分标识符
> *   调用站点必须有权访问内联例程中使用的所有标识符
> 
> > **注意**最后一点意味着除非调用站点单元使用例程所需的单元，否则不能内联例程。发生这种情况时，编译器会发出这样的提示
> > 
> > ```
> >  [Pascal Hint] InlinedRoutinesU.pas(14): H2443 Inline function 
> >    'InlineMe' has not been expanded because unit 'RequiredUnit' 
> >     is not specified in USES list 
> > ```
> > 
> > 要解决此问题，请将缺少的单位名称添加到呼叫站点的使用子句中。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-03-16T09:21:03.220

内联函数可以内联扩展。例如：

```
function AddPlus(const A,B: Integer): Integer; inline;
begin
  Result := A + B + 1;
end;

var
  x,y,z : Integer;
begin
  y := 22;
  z := 11;
  x := AddPlus(y, z);
end. 
```

被重写为：

```
var
  x,y,z : Integer;
begin
  y := 22;
  z := 11;
  x := y+z+1;
end. 
```

这消除了函数调用的开销。

但是为了用函数体替换调用，编译器需要更多信息，因此对单元的抱怨。

请注意，并非所有内联函数都被转换。有些被视为普通函数（由编译器决定）。此外，仅在非常严格的性能瓶颈时才需要内联。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-08-19T19:55:13.600

我也被这个提示弄糊涂了。然后我意识到问题是什么。你的代码：

```
uses
   SysUtils;

procedure TForm1.DoStuff;
begin
   SysUtils.DeleteFile('foo');
end; 
```

字面上被替换为：

```
uses
   SysUtils;

procedure TForm1.DoStuff;
var
  Flags, LastError: Cardinal;
begin
  Result := Winapi.Windows.DeleteFile(PChar(FileName));

  if not Result then
  begin
    LastError := GetLastError;
    Flags := GetFileAttributes(PChar(FileName));

    if (Flags <> INVALID_FILE_ATTRIBUTES) and (faSymLink and Flags <> 0) and
      (faDirectory and Flags <> 0) then
    begin
      Result := RemoveDirectory(PChar(FileName));
      Exit;
    end;

    SetLastError(LastError);
  end;
end; 
```

如果您注意到，您的*“新”*代码取决于`WinApi.Windows`单位：

```
Result := Winapi.Windows.DeleteFile(PChar(FileName)); 
```

你没有包括在你的`uses`条款中。

如果您手动内联了代码（复制和粘贴），则代码在添加`Windows`到`uses`.

相反，编译器不会这样做，`inline`因为：

> 内联函数 'DeleteFile' 尚未扩展，因为在使用列表中未指定单元 'Windows'"

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-16T09:22:21.563

内联函数由编译器就地展开，避免了函数调用的开销。例如，对于平方，sqr(x) 被编译为 x*x 而不是调用乘以 x 并返回结果的函数。

# apache-flex - 我喜欢为游戏实现 Flex 到服务器彗星/长轮询

> ID：649712
> 
> 赞同：3
> 
> 时间：2009-03-16T09:11:17.173
> 
> 标签：apache-flex, flash, comet

我需要尝试将端口 80 flex 游戏实现到服务器方法。

我想问一下是否有人以前做过，或者是否可以使用长轮询/彗星服务器来管理 flash/flex 多用户游戏？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-25T11:53:12.857

当然这是可能的。我建议使用[URLStream](http://livedocs.adobe.com/flash/9.0/ActionScriptLangRefV3/flash/net/URLStream.html)（它提供从 URL 下载数据的低级访问）在客户端接收数据，因为大多数其他方法要么不会连续给你下载数据（各种加载器），要么代理（套接字）有问题。请注意，[URLStream](http://livedocs.adobe.com/flash/9.0/ActionScriptLangRefV3/flash/net/URLStream.html)为您提供二进制数据。使用[ProgressEvent.PROGRESS](http://livedocs.adobe.com/flash/9.0/ActionScriptLangRefV3/flash/net/URLStream.html#event:progress)事件连续接收数据。

# tfs - Team Explorer 2008 和 MS SCC API？

> ID：649713
> 
> 赞同：0
> 
> 时间：2009-03-16T09:11:33.383
> 
> 标签：tfs, explorer, msscc

如果这看起来有点离题，我深表歉意，这更像是一个技术/安装问题，而不是一个编程问题，尽管我敢打赌这里有人知道。

任何状况之下...

自从我们在这里使用 TFS 进行源代码控制以来，我已经安装了 Team Explorer 2008，现在我正在查看帮助和手册，它支持使用 MS SCC API 进行源代码控制。但是，Team Explorer/TFS 不会出现在 H&M 的可用提供程序中。

我的问题是：

1.  TFS/Team Explorer 是否实现了这个 API？
2.  我是否忘记安装或配置某些东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-16T10:11:15.127

如果您使用的是 Visual Studio 2008，然后安装了 Team Explorer 2008，您可能需要转到选项、源代码管理，将源代码管理插件更改为 Visual Studio Team Foundation Server。

选择此选项后，您应该能够将当前解决方案添加到源代码管理或转到查看、团队资源管理器以打开团队资源管理器视图，然后按带有加号 (+) 的小按钮以连接到您的服务器和然后浏览源代码管理以从计算机上的 TFS 打开共享解决方案。

有趣的是，从 Visual Studio 2005 及更高版本开始，MSSCCI 不再必须用于与版本控制进行对话，但 2005 和 2008 的 Team Explorers 还可以使用另一种机制。

也就是说，如果您想在 Visual Studio 2005 之前的 IDE 中与 TFS 对话，那么您可能还需要[为 TFS 2008 安装 MSSCCI 提供程序](http://www.microsoft.com/downloadS/details.aspx?FamilyID=faeb7636-644e-451a-90d4-7947217da0e7&displaylang=en)。这将使您可以访问 TFS 以在 VB6、Visual Studio 2003 等中进行版本控制。

希望有帮助，

马丁。

# iphone - 讨论 HTTP 连接的 'didReceiveData' 方法

> ID：649717
> 
> 赞同：3
> 
> 时间：2009-03-16T09:14:06.590
> 
> 标签：iphone, objective-c, cocoa-touch, http, class-design

我为 HTTP 连接创建了一个独立的类。所有连接工作正常。问题是我发现方法'didReceiveData'将在调用连接的方法之后被调用。（方法 'didReceiveData' 将在 IBAction 'accept' 之后调用）

```
 - (IBAction)accept:(id)sender {
    [self connect:url];
    //labelStr = ReturnStr; Cannot be written here. 
}

-(void)connect:(NSString *)strURL
{
    NSURLRequest *theRequest=[NSURLRequest requestWithURL:[NSURL URLWithString:strURL]
                                              cachePolicy:NSURLRequestUseProtocolCachePolicy
                                          timeoutInterval:60.0];

    NSURLConnection *theConnection=[[NSURLConnection alloc] initWithRequest:theRequest delegate:self];
    if (theConnection) 
    {
        // receivedData is declared as a method instance elsewhere
        receivedData = [[NSMutableData data] retain];
    } 
    else 
    { 
        // inform the user that the download could not be made
    }
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    // append the new data to the receivedData
    [receivedData appendData:data];
    ReturnStr = [[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding];
} 
```

这将导致一个问题，如果我想将标签的文本更改为接收到的字符串，代码不能写在 IBAction 'accept' 中，而必须写在方法 'didReceiveData' 中，如下所示：

```
 MainViewController *mainView = [[MainViewController alloc] initWithNibName:@"MainView" bundle:nil];
    AMEAppDelegate *delegate = [[UIApplication sharedApplication] delegate];
    [delegate.navController pushViewController:mainView animated:YES];
    mainView.labelStr.text = ReturnStr; 
```

另一个问题是，如果我在“didReceiveData”中初始化 MainView，MainView 上的数据将被覆盖。我是否可以在不初始化 MainView 的情况下更改 labelStr 的文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-16T12:33:16.423

> 问题是我发现方法'didReceiveData'将在调用连接的方法之后被调用。（方法 'didReceiveData' 将在 IBAction 'accept' 之后调用）

您希望连接`connection:didReceiveData:`在创建和连接之前发送给您吗？

> 这将导致一个问题，如果我想将标签的文本更改为接收到的字符串，代码不能写在 IBAction 'accept' 中，而必须写在方法 'didReceiveData' 中......</p>

听起来差不多。在收到之前，您无法使用收到的东西。

> 另一个问题是，如果我在“didReceiveData”中初始化 MainView，MainView 上的数据将被覆盖。我是否可以在不初始化 MainView 的情况下更改 labelStr 的文本？

在您的方法中创建主视图控制器和应用程序委托`connection:didReceiveData:`似乎*真的*太晚了。早点做那些事情，然后`connection:didReceiveData:`除了 set 什么都不做`labelStr.text`。

顺便说一句，`connection:didReceiveData:`你显示泄漏的实现`ReturnStr`。请记住释放或自动释放您已分配的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-17T12:18:30.243

如果您希望您的应用程序等到数据进来，请使用 NSURLConnection 的`sendSynchronousRequest:returningResponse:error:`方法。但是请注意，在运行此方法时，您的应用程序的其余部分将被冻结，当然，如果用户的连接很糟糕，该方法可能需要一段时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-17T11:59:17.357

NSURLConnection 和其他类似的类被设计为异步使用。

initWithRequest:delegate: 立即返回，并且在将委托方法发送给其委托之前，您不会对连接内容感到恼火。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-02-22T04:02:53.847

使用 NSMutableData 而不是 NSData。

# c++ - 模板化类型定义？

> ID：649718
> 
> 赞同：40
> 
> 时间：2009-03-16T09:14:12.597
> 
> 标签：c++, templates, c++11, typedef

我正在使用 libgc，它是 C 和 C++ 的垃圾收集器。要使 STL 容器可进行垃圾回收，必须使用 gc_allocator。

而不是写

```
std::vector<MyType> 
```

必须写

```
std::vector<MyType,gc_allocator<MyType> > 
```

有没有办法定义类似的东西

```
template<class T> typedef std::vector<T,gc_allocator<T> > gc_vector<T>; 
```

我前段时间查了一下，发现这是不可能的。但我可能错了，或者可能有另一种方法。

以这种方式定义地图尤其令人不快。

```
std::map<Key,Val> 
```

变成

```
std::map<Key,Val, std::less<Key>, gc_allocator< std::pair<const Key, Val> > > 
```

编辑：尝试使用宏后，我发现以下代码破坏了它：

```
#define gc_vector(T) std::vector<T, gc_allocator<T> >
typedef gc_vector( std::pair< int, float > ) MyVector; 
```

模板化类型定义中的逗号被解释为宏参数分隔符。

所以看起来内部类/结构是最好的解决方案。

这是一个关于如何在 C++0X 中完成的示例

```
// standard vector using my allocator
template<class T>
using gc_vector = std::vector<T, gc_allocator<T> >;

// allocates elements using My_alloc
gc_vector <double> fib = { 1, 2, 3, 5, 8, 13 };

// verbose and fib are of the same type
vector<int, gc_vector <int>> verbose = fib; 
```

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2014-06-06T11:54:52.833

`using`您可以像这样使用 C++11 模板化类型别名

```
template <typename T>
using gc_vector = std::vector<T, gc_allocator<T>>; 
```

[注意：我知道这是一个老问题，但由于它有很多赞成票，而且当它出现在搜索结果中时，我认为它应该得到一个更新的答案。]

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2009-03-16T09:18:14.800

您不能使用“模板化 typedef”，但可以使用具有内部类型的便利类/结构：

```
template<typename T>
struct TypeHelper{
    typedef std::vector<T,gc_allocator<T> > Vector;
}; 
```

然后在您的代码中使用

```
TypeHelper<MyType>::Vector v;
TypeHelper<MyType>::Vector::iterator it; 
```

地图也有类似的东西：

```
template<typename K,typename V>
struct MapHelper{
    typedef std::map<K, V, gc_allocator<K,V> > Map;
}; 
```

编辑-@Vijay：我不知道是否还有其他可能的解决方法，这就是我的做法；宏可能会给你一个更紧凑的符号，但我个人不喜欢它：

```
#define GCVECTOR(T) std::vector<T,gc_allocator<T> > 
```

编辑 - @chmike：请注意，该`TypeHelper`解决方案**不需要**您重新定义构造函数！

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-03-16T09:18:51.790

您可以公开继承：

```
template<class T>
class gc_vector<T> : public std::vector<T, gc_allocator<T> >
{
    public:
    // You'll have to redeclare all std::vector's constructors here so that
    // they just pass arguments to corresponding constructors of std::vector
}; 
```

这完全解决了你的问题。派生类型可以在可以使用基类型的任何地方使用，并且任何体面的编译器都没有实现开销。

如果您尝试通过指向基类变量的指针删除派生类变量，则 std::vector 具有非虚拟析构函数的事实可能会导致根据 C++ 标准的未定义行为。

在现实世界中，在这种特殊情况下这无关紧要——与基类相比，派生类没有添加任何新内容，因此派生类的析构函数只调用基类的析构函数。继续偏执，无论如何都要小心端口。

如果您从未在堆上分配此类变量（并且通常在堆栈上分配向量变量并作为其他类的成员），则非虚拟析构函数问题不会影响您。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-01-30T22:49:19.453

如果您愿意将编译器推向极限，可以使用宏来完成。我在为 Java 的“Future”和“Callable”类实现 C++ 等效项时做到了这一点。我们的库使用引用计数对象，因此“Reference<T>”本身就是一个模板类，其中“T”派生自“ReferencedObject”。

```
1\. Create your template Classes. Mine are:

    template<typename T>
    class Callable {
    private:

    public:
        virtual T Call() = 0;
    };

    template<typename T> CountedFuture : public ReferencedObject {
    private:
       Callable<T>* theTask;
       T            theResult;

    public:
       T Get() { 
          // Run task if necessary ...
          if(task) {
             theResult = theTask->Call();
             delete theTask;
          }
          return theResult;
       }
    };

2\. In the application code I'm using references, so I define the macro:

   #define Future(T) Reference<CountedFuture<T>> 
```

这样做的美妙之处在于，宏完全可以从“模板 typedef”中完成您想要的操作，缺点是您不能使用“<>”作为类型参数并且没有类型推断.

```
3\. I can now use the Macro wherever I would use a template, like in functions:

   Future(char*) DoSomething() { ... }
   bool          TestSomething(Future(std::string) f) { .... } 
```

# migration - 水壶是一个好的数据迁移解决方案吗？

> ID：649719
> 
> 赞同：2
> 
> 时间：2009-03-16T09:15:22.810
> 
> 标签：migration, kettle

有人对[水壶](http://kettle.pentaho.org/)有经验吗？我正在寻找一个好的数据迁移解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-01T14:27:22.960

是的，水壶很好——但它当然取决于你在做什么。

如果您只是将数据从一个数据库移动到另一个数据库而不更改它，那么您最好坚持使用数据库供应商自己的实用程序。

说水壶对散装装载机有广泛的支持，所以那里很好。它现在也有一些非常令人兴奋的云支持。

我发现水壶非常灵活，并且还发现他们的开放论坛上提供的支持也非常好。但他们没有俘虏！我们使用kettle完成了一个非常复杂的集成项目，只遇到了一个值得注意的错误，这很容易解决。

关于 Kettle，最后需要注意的是，它们的性能非常好，具有非常好的日志记录和监控设施。

我没有使用任何其他开源迁移工具，Talend 是值得一提的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-03-30T13:19:42.160

是的，Kettle 非常适合数据迁移。

# file - bmp文件的比较？

> ID：649720
> 
> 赞同：3
> 
> 时间：2009-03-16T09:15:23.297
> 
> 标签：file, comparison, diff, bmp

我想比较两个 bmp 文件。我想到了两种方法：

1.  比较两个文件的标题以及信息标题
2.  把bmp文件转成二进制然后做上面的比较

但是，我不知道如何开始，哪种方法更好。如果有人可以帮助我，我会很高兴！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-16T09:19:26.750

我不知道您要在哪个平台上实现此功能，但这里有一些可能有用的代码片段：

[用 C# 比较两个图像](http://www.dreamincode.net/code/snippet2859.htm)

> 这是比较 2 张图像以查看它们是否相同的片段。该方法首先将每个 Bitmap 转换为字节数组，然后获取每个数组的哈希。然后我们遍历散列中的每一个，看看它们是否匹配。

```
/// <summary>
/// method for comparing 2 images to see if they are the same. First
/// we convert both images to a byte array, we then get their hash (their
/// hash should match if the images are the same), we then loop through
/// each item in the hash comparing with the 2nd Bitmap
/// </summary>
/// <param name="bmp1"></param>
/// <param name="bmp2"></param>
/// <returns></returns>
public bool doImagesMatch(ref Bitmap bmp1, ref Bitmap bmp2)
{
  ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-11T17:27:56.287

当我有两张颜色深度不同的图像时，上述解决方案对我不起作用——一张是 32bpp，另一张是 8bpp。我到达的解决方案使用 LockBits 将所有图像转换为 32bpp，Marshal.Copy() 将数据放入数组，然后只比较数组。

```
/// <summary>
/// Compares two images for pixel equality
/// </summary>
/// <param name="fname1">first image file</param>
/// <param name="fname2">second image file</param>
/// <returns>true if images are identical</returns>
public static string PageCompare(string fname1, string fname2) {
    try {
        using (Bitmap bmp1 = new Bitmap(fname1))
        using (Bitmap bmp2 = new Bitmap(fname2)) {
            if (bmp1.Height != bmp2.Height || bmp1.Width != bmp2.Width)
                return false;

            // Convert image to int32 array with each int being one pixel
            int cnt = bmp1.Width * bmp1.Height * 4 / 4;
            BitmapData bmData1 = bmp1.LockBits(new Rectangle(0, 0, bmp1.Width, bmp1.Height),
                ImageLockMode.ReadOnly, PixelFormat.Format32bppArgb);
            BitmapData bmData2 = bmp2.LockBits(new Rectangle(0, 0, bmp2.Width, bmp2.Height),
                ImageLockMode.ReadOnly, PixelFormat.Format32bppArgb);

            Int32[] rgbValues1 = new Int32[cnt];
            Int32[] rgbValues2 = new Int32[cnt];

            // Copy the ARGB values into the array.
            System.Runtime.InteropServices.Marshal.Copy(bmData1.Scan0, rgbValues1, 0, cnt);
            System.Runtime.InteropServices.Marshal.Copy(bmData2.Scan0, rgbValues2, 0, cnt);

            bmp1.UnlockBits(bmData1);
            bmp2.UnlockBits(bmData2);
            for (int i = 0; i < cnt; ++i) {
                if (rgbValues1[i] != rgbValues2[i])
                    return false;
            }
        }
    }
    catch (Exception ex) {
        return false;
    }
    // We made it this far so the images must match
    return true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-16T10:09:39.717

您可能希望在 .NET 3.0+ 中使用扩展方法，以便在所有位图上公开比较方法：

```
 public static bool Compare(this Bitmap bmp1, Bitmap bmp2)
    {
        //put your comparison logic here
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-16T10:15:41.513

你拿什么来比较？您是否想查看两张图片是否完全相同？或者你需要不同的程度？对于完全匹配，如何创建和比较两个文件的哈希？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-16T09:38:37.093

好吧，您在这里至少有两个选择：

*   **图像大多相同**
    在这种情况下，我建议使用 splattne 的解决方案进行比较

*   **图像通常是不同的，有时是相同的**
    。在这种情况下，您可能可以通过快速比较信息标题来消除两个图像之间的任何相似性（想想“大小是否相同？），并且只做如果信息不明确（即大小相同） ，*则进行完整比较*

# java - 在 Java 中使用 XPath 时直接引用节点的问题

> ID：649723
> 
> 赞同：2
> 
> 时间：2009-03-16T09:17:37.533
> 
> 标签：java, xml, xpath

我最近遇到了 Java 的原生 XML API（W3C API）的问题，其核心是如果我尝试在我的文档中使用直接 XPath 表达式，比如，`//body`XPath 被评估为假*（不正确behavior)*，但是如果我将其替换`//*[1]`为 true *(desired behavior)*。

我已经检查了很多次，并且使用了不同的文档，我使用的 XML 是有效的（*我主要使用 XHTML 2.0 和这个系统的其余部分*）。

由于我不知道真正导致这种情况的原因，这里是我正在使用的各种工厂对象的一组配置选项。

如您所见，我有很多与整个问题相关的各种类的自定义实现，我认为这可能与该问题有关，但我不确定，运行单元测试，使用调试器和巨大的负载.println:s 还没有帮助我。

**XPath：**

*   `xpathfactory.setXPathFunctionResolver(myFunctionResolver)`
*   `xpath.setNamespaceContext(myNamespaceContext);`
*   `xpath.setXPathVariableResolver(myResolver);`

**文档生成器：**

*(f == DocumentBuilderFactory)*

*   `f.f.setValidating(false);`
*   `f.setSchema(null);`
*   `f.setNamespaceAware(true);`
*   `f.setIgnoringComments(true);`
*   `f.setIgnoringElementContentWhitespace(true);`
*   + features`"http://xml.org/sax/features/validation"`和as`"http://apache.org/xml/features/validation/schema"``"http://apache.org/xml/features/nonvalidating/load-external-dtd"``false`

*(dc == DocumentBuilder)*

*   `dc.setEntityResolver(null);`
*   `dc.setErrorHandler(myErrorHandler);`

另外值得一提的是，我在 Windows XP 上使用 Sun Java 5。

在这一点上，欢迎所有想法，由于这个问题，我感到非常沮丧。

## 结论

这是一个命名空间问题，问题是我根本没有在 myNamespaceContext 中声明*默认命名空间！*只需添加

```
else {
    return "http://www.w3.org/1999/xhtml";
} 
```

使事情起作用，现在我做到了，以便检测到默认命名空间。奇迹般有效！这两个答案都帮助我找到了原因，如果可以的话，我会选择两者作为首选答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-16T09:24:17.877

不熟悉java，但这听起来像是一个命名空间问题——大概文档的默认命名空间和评估器是不同的。

编辑：我们可以看到您的 xml 文档和代码吗？以及如何`//*[local-name()='body']`应对？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-16T09:54:54.790

如果它是 XHTML，那么它将定义一个[命名空间](http://www.w3.org/1999/xhtml/)。您要么删除它（不一定可取），要么因此限定您的表达式：

```
//:body 
```

（注意前面的冒号限定了上述内容）`enter code here`

# actionscript-3 - FlashDevelop 看不到我制作的 MXML 组件文件

> ID：649724
> 
> 赞同：0
> 
> 时间：2009-03-16T09:18:05.177
> 
> 标签：actionscript-3, flex3, mxml

遵循有关 Flex 的视频教程，但我在 FlashDevelop IDE 中，而不是 Flex Builder。

现在，在视频中，他们创建了一个自定义 MXML 组件，它只是一个派生的水平框。

我的视频教程的标记是相同的，我将 MXML 文件与 Main.MXML 放在同一文件夹中。我收到以下构建错误：

> C:\Flex\TwitterApp\src\TwitterApp\Main.mxml(30)：错误：找不到定义推文。dataProvider="{ac}" itemRenderer="Tweet"> 构建因错误 (fcsh) 而停止。

其他一切正常，但我想知道如何通知 FlashDevelop MXML 组件。

Video 上的源文件根本没有引用 Main.MXML 中的 MXML 文件，但我知道 Flex Builder 中可能在幕后做了一些事情。

这就是我需要在 FlashDevelop 中模拟的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-16T10:34:53.323

我没有在我的类路径中包含该文件夹。所以它没有在编译时重新调整文件，因为它看不到它。将路径添加到类路径解决了它！:-)

# .net - MVC 控制器独立于视图类型 UpdateModel

> ID：649733
> 
> 赞同：2
> 
> 时间：2009-03-16T09:21:31.360
> 
> 标签：.net, dynamic, controller, updatemodel

我想在没有通知视图类型的控制器中使用 updateModel。我有不同的视图，它们具有不同的类型，但都有一个 ExternalBase 类作为继承类型。

所以在我的控制器中我总是有一个 ExternalBase 但控制器不知道正确的类型。

在保存时，我调用了一个获取正确对象的方法，但它将它作为 externalBase 返回。innertype 是我的正确类型。如果我将鼠标悬停在我的对象上，它就是调用保存的视图类型。现在，如果我在其上调用 updateModel，它不会填写属性。

举个例子：

// MyExternalBase 是一个空类

班级人

```
public class Person 
  : MyExternalBase
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public List<TheParameters> Parameters { get; set; }
    public Address Address { get; set; }

    public TheParameters[] OtherParameters { get; set; }
}
public class Address
{
    public string Street { get; set; }
    public string City { get; set; }
    public string State { get; set; }
    public TheParameters Parameter { get; set; }
}
public class TheParameters
{
    public string Parameter { get; set; }
} 
```

在我的保存控制器中，我执行以下操作：

```
 MyExternalBase p = new Person();

        UpdateModel(p, "Person", form.ToValueProvider()); 
```

现在 p 没有填满。

如果我改为使用 Person p = new Person() 那就没问题了。但我希望我的控制器独立于视图类型。

这是 updateModel 中的错误还是不可能的？还是有解决方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2010-06-24T18:50:27.687

如果您使用的是 .NET 4.0，请尝试使用：

```
dynamic p = new Person();
UpdateModel(p); 
```

在这种情况下，UpdateModel 将正常工作。我在处理单个控制器和视图时也遇到了这个问题，我想将其用于所有从同一类型继承的多个对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-02-20T00:16:23.910

我也想知道这个问题的答案，我在使用传递基类时遇到了一个非常相似的问题，即使我可以安全地向下转换为所有数据完整的正确类型。

除非我将基本类型向下转换为正确的类型，否则 UpdateModel 似乎看不到内部属性，但这涉及到一个 switch 语句来获取正确的类型。

# c# - 如何在 C# (.NET Compact Framework) 中隐藏沙漏图标

> ID：649734
> 
> 赞同：3
> 
> 时间：2009-03-16T09:21:42.157
> 
> 标签：c#, compact-framework, cursor

当您从另一个人执行应用程序时，有人知道如何隐藏沙漏图标吗？

例如，带有漂亮背景屏幕的 App-A 启动 App-B。当 App-B 加载窗口时，将这个带有旋转沙漏的丑陋灰色块放在 App-A 的中间。

我试过调用 System.Windows.Forms.Cursor.Hide(); 但这似乎并没有阻止窗户。我可能没有正确使用它。欢迎任何想法。

TIA（提前致谢），
结束

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-16T12:08:46.093

您将其称为“沙漏”这一事实向我表明，这不是 Windows Mobile 设备，而是通用 CE 设备。不幸的是，CF 加载程序告诉操作系统在启动时显示沙漏，实际上从 CF 的角度来看，没有办法阻止它。如果您控制操作系统，则可以在操作系统本身中完全移除沙漏光标，但如果 CF 存在，则无法阻止它显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-16T09:41:06.477

您是否尝试将`Cursor.Current`属性设置为 Cursors to `Cursors.Default`？

在这里，您可以[在 MSDN 上找到此属性的文档，](http://msdn.microsoft.com/en-us/library/system.windows.forms.cursor.current.aspx)并在[此处找到 Cursor 类](http://msdn.microsoft.com/en-us/library/system.windows.forms.cursor.aspx)的文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-17T00:09:55.407

您是否尝试过在 App A 启动 App B 之前调用 Cursor.Hide ，然后在窗口完成加载后取消隐藏它？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-18T23:08:43.637

我认为这可能是您正在寻找的：

[http://www.cprogramdevelop.com/1695088/](http://www.cprogramdevelop.com/1695088/)

# jquery - 如何更改列表项的背景图像

> ID：649737
> 
> 赞同：0
> 
> 时间：2009-03-16T09:22:43.700
> 
> 标签：jquery, html, css, mouseover

我想`<Li>`使用 jQuery 更改我的 bgImage onMouseOver

但是图像在三个 div 标签中

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-16T09:37:25.007

像这样的东西：

```
$('li').mouseover(
  function(){
    $(this).css('background-image', 'url(hover.png) no-repeat top left');
  },
  function(){
    $(this).css('background-image', 'url(normal.png) no-repeat top left');
  }
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-16T10:24:53.020

我想知道为什么您需要在鼠标悬停时更改列表项的背景图像。

如果您希望列表项像一个链接一样 - 或者，一般来说，**如果您想为列表项分配一个操作**- 您应该在`<a>`内添加一个标签`<li>`，并使用**a:hover** css 选择器来分配背景图像鼠标悬停的链接。这样你就不需要任何javascript函数了。

如果您不能使用`<a>`标签，我想知道原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-16T20:51:48.533

您应该在悬停时添加/删除类，而不是使用 CSS 添加/删除背景图像。这样，当你在野外发布它时，你可以压缩你的 JS 文件:)

但是，我猜他想保存当前的背景图像，在鼠标悬停时将其替换并在鼠标移出时将其还原:)

# project-management - 您使用项目日记或经验数据库吗？

> ID：649743
> 
> 赞同：4
> 
> 时间：2009-03-16T09:24:59.170
> 
> 标签：project-management

我是一个对个人发展非常感兴趣的人。因此，我想维护一个项目数据库或日记，我可以在其中列出不同项目中的特殊事件和经历。

您知道任何专门用于此任务的软件吗？（当然我可以把它写成一个word文件，但也许有更聪明的解决方案）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-16T12:03:55.370

一段时间以来，我一直以 Intranet 博客的形式记录技术日记，它对我来说效果很好。它让我可以记录我的日常活动、有趣的链接和项目经验。

我觉得有用的是，博客引擎可以很容易地按标签、类别、日期或关键字进行搜索——因此，即使您有多个项目在进行中，您也可以根据需要对它们进行标签/分类。此外，通过将博客提供给您的同事，他们也可以从您的笔记中受益，甚至可以添加评论/进一步的建议。

那里有很多免费/开源的博客引擎，并且非常容易设置（我使用[BlogEngine.Net](http://www.codeplex.com/blogengine)和[Windows Live Writer](http://windowslivewriter.spaces.live.com/)）

如果您不希望其他人看到博客，那么我建议您使用[Evernote](http://evernote.com/)，这是一个很棒的笔记保存实用程序。

我想关键是你必须让它尽可能容易使用，否则你不会做很长时间:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-24T15:08:06.937

如果你只想写日记，任何博客系统都会让你满意。如果像我们一样，您想做“事前剖析”和频繁的“事后剖析”，那就大不一样了。

在我们的例子中，我们使用已经存在的 wiki 并为此制作了一个特殊部分。我们为不同的项目设置了不同的页面，并将页面与重复项目分开。任何人都可以编辑它并添加项目，我们有一个历史记录以防万一。在每个重要的里程碑结束时，每个团队开会讨论，列表中包含任何缺失的项目。完成此操作后，制作团队会将结果编译成便于后代阅读的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-16T09:29:54.977

笔和纸有什么问题？我使用普通的 A4 精装笔记本来维护日志。似乎工作正常。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-16T10:02:22.027

我正在为此使用[leo](http://webpages.charter.net/edreamleo/front.html)及其[cleo](http://leo.zwiki.org/cleodoc.html)插件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-16T09:29:11.140

我为我安装了 trac :) 门票是我的待办事项，wiki 用于项目中的特殊事件和经验..

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-16T09:56:02.277

我在4 个月前开始使用 Emacs [org-mode 。](http://orgmode.org)这是一个具有大量有用功能的大纲。它允许计划项目、跟踪进度（例如，跟踪执行各种任务所花费的时间）、链接到源代码、存储与任务相关的注释等等。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-16T16:47:56.047

我一直在使用 SmartSheet——一个基于 Web 的 PM 工具。它包含一个深入到任务级别的讨论功能……我发现这对于日记、记录更新、更改等非常有用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-24T15:22:37.887

我使用[InkSeine](http://research.microsoft.com/en-us/um/redmond/projects/inkseine/)并且非常喜欢它。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-03-24T15:24:46.337

我喜欢微软的 OneNote 来处理这类事情。很容易记下来，也很容易抓取屏幕或代码片段、网络链接或其他任何东西，并组织成虚拟笔记本。

# silverlight-2.0 - 是否有描述 Silverlight 2.0 安全注意事项的文档？

> ID：649746
> 
> 赞同：0
> 
> 时间：2009-03-16T09:25:45.563
> 
> 标签：silverlight-2.0

我们的 IT 人员尚未使用 Silverlight 2.0，我要求他们在整个组织中推广它。他们希望看到 Microsoft 提供的描述网络安全影响的文档。谁能指点我一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-16T09:29:22.200

如果您关心 Silverlight 对套接字的使用，这是最好的方法[Silverlight Sockets](http://msdn.microsoft.com/en-us/library/cc296248(VS.95).aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-17T13:32:05.777

Microsoft 提供了“[编写和部署 Silverlight 应用程序的安全指南](http://www.microsoft.com/downloads/details.aspx?displaylang=en&FamilyID=7cef15a8-8ae6-48eb-9621-ee35c2547773)”白皮书。

# vb.net - 重定向到另一个页面时出错-确认表单重新提交错误

> ID：649751
> 
> 赞同：0
> 
> 时间：2009-03-16T09:30:05.570
> 
> 标签：vb.net

我有一个名为 a.aspx 的页面并单击提交按钮，我重定向到 b.aspx，其中一个名为 fileid 的参数。

从 b.aspx 单击返回按钮时，我必须转到 a.aspx。但是现在单击返回按钮时，出现如下错误

> 确认重新提交表单
> 
> 此网页需要您之前输入的数据才能正确显示。您可以再次发送此数据，但这样做会重复此页面之前执行的任何操作。按重新加载以重新发送该数据并显示此页面。”

我必须做些什么来解决这个问题？

我没有使用任何代码。我的问题是我无法通过单击 Google chrome 中的后退按钮返回上一页。在互联网上探索它的工作原理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-16T10:18:49.647

像这样的 Lokks 是 Chrome 的一个[现有问题](http://code.google.com/p/chromium/issues/detail?id=2616)，去年已修复。检查您是否使用的是更新版本。

# .net - .NET 脚本

> ID：649753
> 
> 赞同：3
> 
> 时间：2009-03-16T09:32:41.380
> 
> 标签：.net, vb.net, scripting

任何人都可以提供.NET 脚本的示例吗？

一些动态语言支持类似`eval()`或`compile()`不让您在运行时编译和执行字符串的功能。

*VBCodeProvider*似乎是一个相关的命名空间，但我找不到显示如何编译和执行代码的示例。

编辑：

我正在使用 VB.NET 开发一个 ASP.NET 站点。有些行为需要是动态的和脚本化的

编辑：

我认为 MSScriptControl 是我正在寻找的..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-16T09:37:39.077

[铁蟒](http://www.codeplex.com/Wiki/View.aspx?ProjectName=IronPython)怎么样？正如您所描述的，它具有动态方法调用。如果您需要在 C# 中调用它，请在 Google 中搜索“invoke Iron Python C#”。而且，尽管它存在于 CodePlex 上，但它将在下一个版本中得到正式支持。

此外，我相信 .Net 支持 JavaScript，这也是动态的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-16T09:37:01.760

看看[Powershell](http://www.microsoft.com/windowsserver2008/en/us/powershell-faq.aspx)。这是一种用.Net 编写的脚本语言。非常容易访问 .Net 类，还有 COM 和 WMI。

看到编辑后：从 ASP.Net 调用 Powershell 脚本似乎不是一个好主意，这太慢了。

MSScriptControl 是旧 VB6/COM 时代的东西，我不推荐在这里。最好使用 IronPython。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-16T10:51:26.730

两个我用过并建议尝试：

注意这些是 C# 而不是 VB.NET，所以我不确定它是否完全回答了这个问题

## 惰性解析器

[Lazy Parser 项目，执行动态编译](http://www.codeplex.com/LazyParser)。

语法是 C#，例如：

```
ParserContext context = new ParserContext();

context.AddType("Math", typeof(Math));
context.Set("SomeString", "Hi there!");
context.Set("SomeNumber", 20);
context.AddFunction("fmt",  typeof(String), "Format");

CSharpParser parser = new CSharpParser();

string stringValue = parser.Evaluate<string>("fmt(\"I said: {0}\", SomeString)", context);  // returns "I said: Hi there!" 
```

## 逃跑

[快速轻量级表达式评估器](http://www.codeplex.com/Flee)

例子：

```
// Define the context of our expression
ExpressionContext context = new ExpressionContext();
// Allow the expression to use all static public methods of System.Math
context.Imports.AddType(typeof(Math));

// Define an int variable
context.Variables["a"] = 100;

// Create a dynamic expression that evaluates to an Object
IDynamicExpression eDynamic = context.CompileDynamic("sqrt(a) + pi");
// Create a generic expression that evaluates to a double
IGenericExpression<double> eGeneric = context.CompileGeneric<double>("sqrt(a) + pi");

// Evaluate the expressions
double result = (double)eDynamic.Evaluate();
result = eGeneric.Evaluate();

// Update the value of our variable
context.Variables["a"] = 144;
// Evaluate again to get the updated result
result = eGeneric.Evaluate(); 
```

## 也值得一试：

[.NET 的 LUA](http://www.gamedev.net/reference/articles/article2275.asp)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-16T11:32:56.193

看看 DLR（动态语言运行时），您可以轻松地在代码中嵌入运行在其上的动态语言的解释器。这是一个关于如何为 IronPython 执行此操作的示例：[http](http://www.voidspace.org.uk/ironpython/hosting_api.shtml) ://www.voidspace.org.uk/ironpython/hosting_api.shtml但我也看到了 Powershell 的这项工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-16T09:35:28.880

目前，您必须[使用提供程序来创建程序集](http://support.microsoft.com/kb/304655)，然后加载该程序集并使用反射来调用方法。

在 .NET 4.0 中，有“编译器即服务”的概念，几乎可以实现您刚才描述的内容；有来自 PDC 的视频，本质上是通过 REPL 和编译器服务为 C# 提供“交互式”控制台（典型的动态语言）。

我相信这种类型的服务已经在单声道中可用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-16T09:37:31.277

[F#](http://fsharp.net)具有 REPL，可用作脚本语言。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-16T11:37:25.980

您也可以将[boo](http://boo.codehaus.org/)添加到您的列表中。它是 python-y，但不是 IronPython。它还可以很好地与 SharpDevelop 配合使用。

更新：Powershell 非常强大，但我承认在 shell 方面相当老派，当我可以使用 shell 命令打开 gui 窗口时，我发现它令人震惊。该语言也比您通常的脚本语言笨拙得多。它唯一的优势——而且是一个非常大的优势——是，对于具体的 Windows 管理，它可能是最好的工具。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-07-18T09:38:15.313

带有 Flee 的 VB.NET

快速轻量级表达式评估器 [https://flee.codeplex.com](https://flee.codeplex.com)

示例 VB.NET：

```
Imports Ciloci.Flee
Imports Ciloci.Flee.CalcEngine
Imports System.Math 
```

* * *

```
 Dim ec As New Ciloci.Flee.ExpressionContext
    Dim ex As IDynamicExpression
    ec.Imports.AddType(GetType(Math))

    ec.Variables("a") = 10            
    ec.Variables("b") = 40               
    ex = ec.CompileDynamic("a+b")

    Dim evalData    
    evalData = ex.Evaluate()
    Console.WriteLine(evalData) 
```

输出：50

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-11-12T12:17:18.570

最简单的库之一是[SILK](https://www.nuget.org/packages/SoftCircuits.Silk/)。这实际上是一种完全解释性的脚本语言，但它可以很容易地用于执行表达式。

唯一的问题是它需要代码在一个`main()`函数中，但如果您不希望您的用户必须这样做，您总是可以将表达式包装在一个函数中。

# sharepoint - 匿名 SharePoint 用户和人员搜索核心结果 Web 部件

> ID：649754
> 
> 赞同：2
> 
> 时间：2009-03-16T09:33:02.707
> 
> 标签：sharepoint, search, moss, anonymous

谁能告诉我如何允许匿名 SharePoint MOSS 用户查看人员搜索核心结果 Web 部件？当他们尝试访问包含此 Web 部件的页面时，系统会提示他们登录。

一切顺利

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-17T21:54:55.013

你可以在这里快速浏览一下：[人们在 MOSS 中搜索匿名用户](http://social.technet.microsoft.com/Forums/en-US/sharepointsearch/thread/b253a26c-7ba4-4b85-aafb-445de6d90c2d/)

有一些人在讨论同样的问题，并找到了几个解决方案。

# asp.net - ASP.NET LinkBut ton / ImageButton 和 JQuery 验证？

> ID：649762
> 
> 赞同：14
> 
> 时间：2009-03-16T09:36:10.420
> 
> 标签：asp.net, jquery, jquery-validate

我们正在将**JQuery**引入现有的 ASP.NET 应用程序，并使用 JQuery 的**Validate 插件**来进行客户端验证（我们不想使用 asp.net 验证器）。

一切都很好地与 asp:Button 控件配合使用。在提交页面之前触发客户端验证。

但是，当使用**LinkBut​​ton**和**ImageButton**控件时，页面会在没有先验证表单的情况下提交。

这是因为 validate 适用于呈现为**Input type="submit"**而 ImageButton 呈现为**Input type="image"**的按钮。

还有其他人经历过吗？

非常感谢您提供如何解决的想法和信息。

## 更新：

非常感谢，您的回答有助于确定问题。事实证明，JQuery 的验证插件中有一个错误。我们使用了一个补丁来避免验证隐藏输入字段，它使用**parents().filter(":hidden")**。**这在JQuery 1.3.2**中不能正常工作。我们将其替换为**.is(":visible")**。现在 asp.net ImageButton 默认工作！

## 更新2：

LinkBut​​ton 仍然不起作用。简单的解决方案是添加一个 click 函数，如果表单无效则返回 false：

```
$("#<%= tb.ClientID %>").click(function() {
            return $('form').valid();
        }) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-17T12:48:33.743

第一个建议可能仍然有效，因为您可以在验证发生后使用 Javascript 触发回发。

javascript是：

```
__doPostBack('<%= YourImageControl.UniqueID %>',''); 
```

第二个空参数可用于传递参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-16T19:27:58.003

不确定这是否会有所帮助，但试一试...

[http://docs.jquery.com/Plugins/Validation/validate#options](http://docs.jquery.com/Plugins/Validation/validate#options)

```
$("input[type=image]").click(function() {
   $($(this).parents(form)).validate();
}); 
```

您可能需要将“表单”替换为更具体的内容，但我试图在不知道页面上所有内容的布局情况下使其尽可能准确。如果这有帮助，请回复！

# asp.net - 替代 asp.net MVC 视图引擎

> ID：649768
> 
> 赞同：6
> 
> 时间：2009-03-16T09:37:54.613
> 
> 标签：asp.net, asp.net-mvc, spark-view-engine, viewengine

我想知道对于 asp.net MVC 的“最佳”替代视图引擎是否存在普遍共识。到目前为止，我知道 Spark、Brail、NHaml，但其他人呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-07T08:19:25.443

我建议您采用上述每个视图引擎，编写一个视图，看看哪个最适合您。您可能会发现，对于不同的应用程序甚至不同类型的视图，视图引擎的选择会发生变化。

如果您将 HTML 返回给您的客户端，那么像 Spark 这样的引擎可能是合适的。但是，如果您返回的内容是 XML 或其他一些标记（例如 JSON），那么 Spark 不会有太大帮助。NHaml 还专注于 XHTML 生成。

考虑你想如何测试你的视图，你的工程师（开发人员和测试人员）的技能，你希望从你的视图引擎作者那里获得的支持水平（如果你发现错误，你希望如何部署这些错误修复) 以及您的客户是否有任何偏好。

基本上 - 尝试一些，看看你喜欢什么，如果你觉得有道理，可以混合使用。

哦，这是一个很好的帖子，列出了 4 个替代引擎......

[http://codebetter.com/blogs/jeffrey.palermo/archive/2008/01/27/mvccontrib-now-offers-four-4-alternative-view-engines-for-asp-net-mvc.aspx](http://codebetter.com/blogs/jeffrey.palermo/archive/2008/01/27/mvccontrib-now-offers-four-4-alternative-view-engines-for-asp-net-mvc.aspx)

...它提到了一个 XSLT 引擎，如果您希望生成 XML，它可能是合适的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-25T11:10:05.083

在软件中，没有“最佳”选择。这总是取决于你的背景、你工作的公司、你的喜好、你的品味等。

只需选择最适合**您**当前项目的方法。如果您不确定，请选择安全的方式，MS 方式 :)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-16T04:28:19.253

StringTemplate 是一个不错的选择。

这是[ViewEngine (with Source)](http://code.google.com/p/string-template-view-engine-mvc/)和一些[教程](http://websitelogic.net/articles/MVC/stringtemplate-viewengine-asp-net-mvc)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-08-31T04:48:29.530

在做出决定时，还要确保考虑团队内的技能水平和经验。

如果你有新的 mvc 开发人员，那么如果他们使用默认引擎，他们会找到更多的书籍、示例和解决方案。并不意味着它是“最好的”或最高效的，但可能为新开发人员提供最快的启动时间。

# c# - Linq：列表列表到长列表

> ID：649773
> 
> 赞同：31
> 
> 时间：2009-03-16T09:41:40.440
> 
> 标签：c#, linq

我有一个类型的对象，`A`它由一个类型的对象列表组成`B`：

```
class A { list<B> Alist;}
class B { string C; string D;} 
```

在我的程序中，我有一个`A`对象列表：

```
list<A> listOfA = computeAList(); 
```

我想选择`C`该列表中的所有字符串。我希望下面的语句能给我想要的结果；`C`它返回一个包含's的列表列表：

```
var query = from objectA in listOfA
            select objectA.Alist.FindAll(x => x.C.Length > 0).C; 
```

有没有办法获得所有`C`'s 的单个列表？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2009-03-16T09:50:06.097

ybo 的回答也是我的第一反应。与此等效的查询表达式是：

```
var query = from a in computeAList()
            from b in a.Alist
            select b.C; 
```

为了完整起见，此线程中的其他答案是同一主题的变体。

来自 ybo（完全相同的查询，以点表示法表示）：

```
var query = listOfA.SelectMany(a => a.Alist, (a, b) => b.C); 
```

来自 Ray Hayes（包括 Where 子句；我已稍微重新格式化）：

```
var query = listOfA.SelectMany(a => a.AList, (a, b) => b.C)
                   .Where(c => c.Length > 0); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2009-03-16T10:06:31.673

我也会有类似的答案，我唯一的修改是添加 where 子句以避免出现空字符串（其中 C 为空）：

```
listOfA.SelectMany( a => a.AList, (a, b) => b.C ).Where( c => c.Length > 0 ); 
```

# visual-studio - Visual Studio & SubVersion : 机器特定文件呢

> ID：649774
> 
> 赞同：3
> 
> 时间：2009-03-16T09:41:42.250
> 
> 标签：visual-studio, svn, overriding, app-config

例如，我们有一个带有 app.config 文件的单元测试项目。app.config 文件被配置为在我们的构建服务器上工作。但是，如果我们想在本地（使用本地数据库）运行我们的测试，我们必须更改 app.config...每次...有没有办法永远不更改 app.config，而是让另一个文件覆盖应用程序。配置配置？（这样没有人会意外地在颠覆中提交损坏的 app.config 吗？）

（对于 web.config 来说，同样的偏离路线，...）

谢谢，列文卡登

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-16T09:57:06.690

我可能正在重新发明轮子，但您可以在 SubVersion（app.config.release、app.config.debug）中创建多个 app.config 文件，然后添加构建后事件以将这些文件复制到开发人员机器上的 app.config。

然后我会完全避免将 app.config 本身放在 Subversion 中，您可以使用 app.config.production 或类似的东西来存储文件的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-16T13:23:01.390

appSettings 元素的“文件”属性会有帮助吗？[(MSDN)](http://msdn.microsoft.com/en-us/library/ms228154.aspx)

它允许您提供一个单独的文件，该文件可以覆盖主 app.config（或 web.config）中的选定值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-16T10:13:02.127

为每个配置执行必要的更改以将 app.config 中的相关部分转换为本地配置、服务器配置等的小脚本（我会在 Perl 中执行）怎么样？您可以为每个脚本设置一个单独的项目配置，并在构建后事件中调用该脚本。

# iphone - 如何隐藏默认键盘

> ID：649777
> 
> 赞同：3
> 
> 时间：2009-03-16T09:43:20.467
> 
> 标签：iphone, iphone-softkeyboard

我在表单上添加了 5 个 UITextField。其中一个文本文件用于输入出生日期。因此，当触摸该特定文本字段而不是显示默认键盘时，需要显示日期选择器。

我尝试了以下方法：

```
- (void)textFieldDidBeginEditing:(UITextField *)textField{
   [textField resignFirstResponder];
   [self showDatePicker];//this is my own function to display datepicker.
} 
```

当调用此函数时，会显示日期选择器以及日期选择器，同时还会显示默认键盘并隐藏日期选择器。对于这个特定的文本文件，我不知道如何摆脱默认键盘。请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2010-10-15T08:30:03.230

虽然这是一个老问题，但我是在寻找同样的问题时来到这里的。

这适用于屏幕中呈现的任意数量/嵌套视图，

```
- (void) hideKeyboard: (UIView *) view {
    NSArray *subviews = [view subviews];
    for (UIView *subview in subviews){
        if ([subview isKindOfClass:[UITextField class]]) {
            [subview resignFirstResponder];
        }
        [self hideKeyboard: subview ];
    }
} 
```

后来我找到了更直观的方法，

```
[self.view endEditing:YES]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-11-11T06:08:47.203

你可以在`-textFieldShouldBeginEditing:`.

如果此方法返回 NO，则不会显示键盘。

只需在此方法中显示日期选择器，然后返回 NO。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-16T10:41:57.067

也许您不应该为此使用 UITextField 。使用普通的 UITableViewCell 并在点击时使用日期选择器推送新的 UIViewController。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-03-04T04:52:45.157

我刚刚解决了同样的问题，

我们尝试了一些东西，最终发现了很多非常可怕的代码和错误。

到目前为止，最简单的选择是仍然有一个`UITextField`，但将其设置`.inputView`为`DatePicker`

现在我们正在尝试找到一种提交字段的好方法，因为选择器没有像键盘那样的返回按钮。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-16T12:37:22.343

辞职第一响应者应该隐藏键盘。我最好的猜测是 textField 实际上并不是代码中此时的第一响应者，因此告诉它辞职没有任何效果。也许你应该插入一个`NSLog`语句来检查。

# size - 更改 DBF 字段大小

> ID：649779
> 
> 赞同：4
> 
> 时间：2009-03-16T09:43:36.533
> 
> 标签：size, field, dbf, esri, dbase

我现在使用 ESRI shapefile 格式，但在更改/编辑数据库字段大小时遇到​​了一些问题。我创建了一个长度/大小为 200 的字段，现在我希望它只有 80 个长度/大小（空间和其他改进）。

但是我不能再编辑字段大小了:(有人可以指出如何更改字段大小吗？

顺便说一句，我尝试过可以编辑字段大小的 DBF Explorer 等实用程序，但是当我更改字符/文本字段的字段大小时，浮点/数字字段上的数据会被删除:(
[DBF Explorer](http://www.pablosoftwaresolutions.com/html/dbf_explorer.html)

PS：ESRI 数据库使用 .dbf 扩展名，我认为它是 DBASE III plus 或 DBASE IV 格式

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-13T05:45:45.003

**不要编辑标题，数据按*固定偏移量*对齐，并且将字段的大小更改为与记录的物理长度不匹配的内容会*损坏**您*的表。**

 **你需要一些可以读/写 DBF 的东西来有效地做到这一点。旧的 DBase 安装将可以工作，尽管使用 Visual FoxPro 会更好（FoxPro 命令是*MODI STRU*，它是“ *MODIFY STRUCTURE* ”的缩写）。我还会查看其他工具来将数据推/拉成其他格式。如果您有权访问 Access（请原谅双关语），您始终可以将数据作为 Access 表导入 Access，重新构建表，然后将其导出，尽管从 Access 2007 开始，本机 DBF/FoxPro 支持更多或较少删除，需要 ODBC。其他（更耗时）的措施是：

*   看看使用 Excel（假设数据行数很少，旧版本总共只能处理 32k 或 64k 行）
*   使用一些 Python 来读取/写入数据（在 SO 上搜索此信息）
*   Perl/Ruby/{插入最喜欢的带有 DBF 库的脚本语言}
*   使用 ODBC + {在此处插入cheapo 数据库} + {为可在此处修改表的cheapo 数据库插入cheapo 管理工具} + 从 {cheapo 数据库} 导出

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-04-20T14:28:22.200

要编辑 .dbf 文件中的字段大小，我使用 OpenOffice。在 OpenOfficeSpreadsheet 中，.dbf 字段名称将显示为“FEILDNAME,C,200”。要将大小从 200 -> 80 更改，您必须将字段名称更改为：“FEILDNAME,C,80”，然后保存 .dbf 文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-16T10:13:37.243

它的 DBASE III（有点）。

dbf 文件都包含元数据（如字段大小和类型）和数据。它们都存储固定大小。

我不记得是否有工具可以更改字段大小，但是您可以创建一个新表并复制数据。但[格式](http://lyle.smu.edu/~fmoore/hmwk/dbaseIII.html)并不难。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-16T10:16:30.277

您可以编辑文件的标题以使用任何十六进制编辑器进行更改。

字节 10-11：表示记录的长度（最低有效字节在前）

从第 48 个字节开始，描述该字段的重复结构（每个 48 个字节）。该结构的字节 33 表示长度。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-03-02T09:47:06.613

[`DBF Viewer 2000`](https://www.dbf2002.com/help/dbf-file-optimization.htm)具有该功能，甚至更好，它可以计算字段的最大长度，而不是调整它们的大小。

它不是免费的，但是当我需要它时，我使用了 30 天试用版。

# iphone - 具有可变高度单元格的 UITableViewCell 重用标识符

> ID：649782
> 
> 赞同：3
> 
> 时间：2009-03-16T09:46:28.680
> 
> 标签：iphone, caching, reusability

我在一个表格中有五个不同的单元格，跨越五个部分，只是高度和文本不同。我需要一个重用标识符还是五个？我正在使用自定义单元格。

Apple 文档讨论了使用具有“相同通用”配置的单元的重用。不同的高度是否会使缓存和重用透视图各不相同。我可能使用不同的字体，但单元格之间的其余部分是相同的，颜色等。

当我弹出这个表格并推送一个新表格时，新表格单元格的高度将根据新行选择中文本内容的数量而有所不同。

由于我的设备在运行我的应用程序时似乎已经变热，我只想确保我能有效地做到这一点。我想重用表中的缓存和单元格，以及在用新数据重新加载表时。

将不胜感激一些建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-16T14:06:46.760

您可以有一个单一的重用标识符，但要更改高度，您必须实现 UITableViewDelegate 方法：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath 
```

也就是说，我无法想象一个 44 像素高的单元格和另一个 70 像素高的单元格具有“相同的通用”配置。如果它们的高度不同，那么它们的内容可能也会不同，*这*将需要不同的重用标识符。

# java - 在不同的插件中分离 DLL 和本机调用

> ID：649785
> 
> 赞同：1
> 
> 时间：2009-03-16T09:49:54.570
> 
> 标签：java, eclipse, plugins, native, classloader

我想将一些 DLL 从相关的本机 JNI 类中分离出来。

插件：

*   在插件 A 中，加载插件时会放置和加载 dll。
*   在插件 B（依赖于 A）中，放置了 JNI 类，其中包括对 A 中 DLL 的本机方法调用。

在运行时我得到一个 UnsatisfiedLinkError 因为找不到 JNI 类。我尝试通过更新清单文件来更新类加载器逻辑：

插件 A：

```
Eclipse-BuddyPolicy: registered 
```

插件 B：

```
Eclipse-RegisterBuddy: A 
```

但这也行不通。你知道解决办法吗？

编辑：

清单 A：

```
Manifest-Version: 1.0
Bundle-ManifestVersion: 2
Bundle-Name: %plugin.name
Bundle-SymbolicName: xxx ;singleton:=true
Bundle-Version: 1.0.0
Bundle-Activator: xxx.Plugin
Bundle-Vendor: xxx
Bundle-Localization: plugin
Bundle-NativeCode: native/dll/x1.dll;
 native/dll/x2.dll;
 native/dll/x3.dll;
 native/dll/x4.dll;
 native/dll/x5.dll;
 native/dll/x76.dll;
 native/dll/x.dll;
 native/dll/x7.dll;osname = win32; processor = x86
Require-Bundle: org.eclipse.core.runtime,
 org.eclipse.ui,
 org.apache.commons.logging
Bundle-ClassPath: .
Eclipse-AutoStart: true
Eclipse-LazyStart: true
Bundle-ActivationPolicy: lazy
Eclipse-BuddyPolicy: registered
Export-Package: xxx 
```

清单 B：

```
Manifest-Version: 1.0
Bundle-ManifestVersion: 2
Bundle-Name: %plugin.name
Bundle-SymbolicName: xxx;singleton:=true
Bundle-Version: 2.1.16
Bundle-Vendor: xxx
Bundle-Localization: plugin
Require-Bundle: org.eclipse.core.runtime,
 org.eclipse.ui,
 org.apache.commons.lang,
 org.apache.commons.logging,
 A
Export-Package: xxx
Bundle-ClassPath: .
Bundle-Activator: xxx
Eclipse-RegisterBuddy: A
Eclipse-AutoStart: true
Eclipse-LazyStart: true
Bundle-ActivationPolicy: lazy 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-17T21:36:18.507

我的直接建议是将插件 B 变成插件 A 的片段而不是单独的插件，这样可以消除这些问题。

也就是说，我认为您的清单已切换；尝试执行 JNI 调用的插件 B 应该具有`Eclipse-BuddyPolicy:registered`，并且插件 A 应该依赖于插件 B 并在其中注册。

也就是说，在阅读[了 buddyloading 文档](http://wiki.eclipse.org/index.php/Context_Class_Loader_Enhancements)之后，我不确定 buddyloading 策略是否适用于非 Java 类文件。

# c++ - 与 C 语言相比，C++ 的限制是什么？

> ID：649789
> 
> 赞同：121
> 
> 时间：2009-03-16T09:54:13.467
> 
> 标签：c++, c

以下是 C++ 的好处

*   C++ 提供了他们所询问的特定功能
*   他们的 C 编译器几乎可以肯定是真正的 C++ 编译器，因此不存在软件成本问题
*   C++ 与 C 一样可移植
*   C++ 代码可以和 C 一样高效（或更高，或更低）

是否有任何具体原因和特定场景，必须使用 C 而不是 C++？

参考这个问题：[C 中的泛型库](https://stackoverflow.com/questions/649649/library-for-generic-datatypes-in-c)

不是重复的，因为这个问题是关于语言限制而不是关于应该/不应该学习一种语言而不是另一种语言。

**Peter Kirkham 的帖子对我来说信息量最大，尤其是关于我没有考虑过的 C99 问题，所以我接受了它。感谢所有其他参与的人。**

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2009-03-16T13:58:49.637

> 这是由我对当前问题的回答提示的，该问题询问 C 的泛型库 - 提问者明确表示他们不想使用 C++。

C是一门完整的编程语言。C 不是 C++ 的任意子集。C 根本不是 C++ 的子集。

这是有效的 C：

```
foo_t* foo = malloc ( sizeof(foo_t) ); 
```

要使其编译为 C++，您必须编写：

```
foo_t* foo = static_cast<foo_t*>( malloc ( sizeof(foo_t) ) ); 
```

这不再是有效的C。（您可以使用 C 风格的强制转换，它会在 C 中编译，但被大多数 C++ 编码标准以及许多 C 程序员所回避；见证堆栈溢出中的“不要强制转换 malloc”注释） .

* * *

它们不是同一种语言，如果你有一个现有的 C 项目，你不想为了使用库而用不同的语言重写它。您更愿意使用可以以您正在使用的语言与之交互的库。（在某些情况下，这可以通过一些`extern "C"`包装函数来实现，具体取决于 C++ 库的模板/内联方式。）

在我正在处理的项目中获取第一个 C 文件，如果您只是交换`gcc std=c99`，就会发生这种情况`g++`：

```
sandiego:$ g++ -g  -O1 -pedantic -mfpmath=sse -DUSE_SSE2 -DUSE_XMM3  -I src/core -L /usr/lib -DARCH=elf64 -D_BSD_SOURCE -DPOSIX -D_ISOC99_SOURCE -D_POSIX_C_SOURCE=200112L -Wall -Wextra -Wwrite-strings -Wredundant-decls -Werror -Isrc  src/core/kin_object.c -c -o obj/kin_object.o | wc -l
In file included from src/core/kin_object.c:22:
src/core/kin_object.h:791:28: error: anonymous variadic macros were introduced in C99
In file included from src/core/kin_object.c:26:
src/core/kin_log.h:42:42: error: anonymous variadic macros were introduced in C99
src/core/kin_log.h:94:29: error: anonymous variadic macros were introduced in C99
...
cc1plus: warnings being treated as errors
src/core/kin_object.c:101: error: ISO C++ does not support the ‘z’ printf length modifier
..
src/core/kin_object.c:160: error: invalid conversion from ‘void*’ to ‘kin_object_t*’
..
src/core/kin_object.c:227: error: unused parameter ‘restrict’
..
src/core/kin_object.c:271: error: ISO C++ does not support the ‘z’ printf length modifier
src/core/kin_object.c:271: error: ISO C++ does not support the ‘z’ printf length modifier 
```

总共 69 行错误，其中 4 行是无效转换，但主要针对 C99 中存在但 C++ 中不存在的功能。

这不像我是为了好玩而使用这些功能。将其移植到不同的语言需要大量的工作。

因此，建议这样做是完全错误的

> [a] C 编译器几乎可以肯定是真正的 C++ 编译器，因此不存在软件成本问题

将现有的 C 代码移植到 C++ 的过程子集通常会产生重大的成本影响。

因此，建议*“使用 C++ std::queue 类”*作为在 C 中寻找队列的库实现的问题的答案比建议*“使用目标 C”* 和*“使用 JNI 调用 Java java.util.Queue 类”*要晚。或*“调用 CPython 库”* ——Objective C 实际上是 C（包括 C99）的适当超集，Java 和 CPython 库都可以直接从 C 调用，而无需将不相关的代码移植到 C++ 语言。

当然，您可以为 C++ 库提供 C 外观，但是一旦您这样做了，C++ 就与 Java 或 Python 没有什么不同。

* * *

## 回答 #2

> 赞同：119
> 
> 时间：2009-03-16T11:22:36.280

我意识到这既不是专业的也不是特别好的答案，但对我来说，这仅仅是因为我真的很喜欢 C。C 小而简单，我可以在我的大脑中适应整个语言，C++ 对我来说总是一个巨大的杂乱无章的混乱有各种各样的层次，我很难摸索。由于这个原因，我发现每当我编写 C++ 时，我最终花费的时间比编写 C 时要多得多。我再次意识到这在很大程度上是我自己“无知”的结果。

如果我可以选择，我会写所有高级的东西，比如 Python（或者可能是 C#）中的接口和数据库交互，以及所有必须在 C 中快速的东西。对我来说，这给了我世界上最好的东西。用 C++ 编写所有东西感觉就像是遇到了最糟糕的情况。

**编辑：** 我想补充一点，如果您要由几个人共同从事一个项目或可维护性是优先事项，我认为具有一些 C++ 特性的 C 在很大程度上是一个坏主意。对于什么构成“少数”以及应该在 C 中完成哪些位以及 C++ 中的哪些位最终导致非常精神分裂的代码库，将会存在分歧。

* * *

## 回答 #3

> 赞同：59
> 
> 时间：2009-03-16T10:09:04.883

C++ 在一些现实世界的环境中根本不受支持，比如低级嵌入式系统。这有一个很好的理由：C 很容易应付这些事情，那么为什么要使用更大的东西呢？

* * *

## 回答 #4

> 赞同：40
> 
> 时间：2009-03-16T11:37:10.287

几个原因可能是：

*   缺乏支持 - 并非每个 C 编译器也是 C++ 编译器。并非所有编译器都特别符合该标准，即使它们声称支持 C++。一些 C++ 编译器会生成无可救药的臃肿和低效的代码。一些编译器对标准库的实现很糟糕。内核模式开发通常无法使用 C++ 标准库以及一些语言特性。如果您坚持语言的核心，您仍然可以编写 C++ 代码，但是切换到 C 可能会更简单。
*   熟悉。C++ 是一门复杂的语言。教 C 比教 C++ 更容易，找到一个好的 C 程序员比一个好的 C++ 程序员更容易。（这里的关键词是“好”。有很多C++程序员，但他们中的大多数人都没有正确地学习过这门语言）
*   学习曲线 - 如上所述，教别人 C++ 是一项艰巨的任务。如果您正在编写一个将来必须由其他人维护的应用程序，而这些其他人可能不是 C++ 程序员，那么用 C 编写它会更容易掌握。

当我可以摆脱它时，我仍然更喜欢用 C++ 编写，总的来说，我认为好处大于坏处。但我也可以看到在某些情况下使用 C 的论点。

* * *

## 回答 #5

> 赞同：33
> 
> 时间：2009-03-16T11:42:25.640

关于嵌入式编程、性能和其他东西有很多争论，我不买。C++ 在这些方面很容易与 C 进行比较。**然而：**

就在最近，在使用 C++ 编程超过 15 年之后，我重新发现了我的 C 根源。我必须说，虽然 C++ 中有一些很好的特性可以让生活更轻松，但也有很多陷阱和一种“总有更好的方式”做事。你从来没有真正对你所做的解决方案感到满意。（不要误会我的意思，这可能是一件好事，但大多不是）。

C++ 给你无限的枪声。这可以说是好的，但不知何故，你总是最终使用了太多。这意味着您正在用“漂亮”和“漂亮”的抽象层、通用性等来掩饰您的解决方案。

回到 C 语言，我发现编程真的很有趣。在花了这么多时间建模和思考如何最好地使用继承之后，我发现用 C 编程实际上使我的源代码更小、更易读。这当然取决于你的自律水平。但是很容易对直接的代码进行过多的抽象，而这实际上是不需要的。

* * *

## 回答 #6

> 赞同：28
> 
> 时间：2010-01-21T01:33:24.353

C 的主要优点是，当您查看某些代码时，您可以看到真正发生的事情（是的预处理器：使用 -E 编译然后您会看到它）。当您查看一些 C++ 代码时，这往往不是真的。那里有构造函数和析构函数，它们根据作用域或由于赋值而被隐式调用，即使没有被严重滥用，也有可能产生令人惊讶的行为的运算符重载。我承认我是一个控制狂，但我得出的结论是，对于想要编写可靠软件的软件开发人员来说，这并不是一个坏习惯。我只是想有一个公平的机会说我的软件完全按照它应该做的那样做，同时我的胃里也没有不好的感觉，因为我知道它里面可能仍然有很多我不会的错误

C++ 也有模板。我恨又爱他们，但如果有人说他或她完全理解他们，我称他/她是骗子！这包括编译器编写者以及参与定义标准的人员（当您尝试阅读它时会变得很明显）。涉及到许多荒谬的误导性极端案例，以至于在编写实际代码时根本不可能考虑所有这些案例。我喜欢 C++ 模板的强大功能。你可以用它们做些什么真的很神奇，但它们同样会导致人们（无法）想象到的最奇怪和最难发现的错误。这些错误确实发生了，而且很少发生。阅读有关在 C++ ARM 中解析模板所涉及的规则几乎让我头晕目眩。它让我感觉浪费时间阅读长达 1000 个字符的编译器错误消息，而我需要 10 分钟或更长时间才能理解编译器真正想要从我这里得到什么。在典型的 C++（库）代码中，您还经常在头文件中找到大量代码以使某些模板成为可能，这反过来使编译/执行周期即使在快速机器上也非常缓慢，并且在您更改某些内容时需要重新编译大部分代码那里。

C++ 也有 const 陷阱。除了最琐碎的用例之外，您要么避免使用 const，要么迟早必须抛弃它，或者在代码库发展时重构大部分代码库，尤其是当您即将开发一个漂亮且灵活的 OO 设计时。

C++ 具有比 C 更强的类型，这很棒，但有时我在尝试编译 C++ 代码时感觉就像在喂蛋鸡。我通常从中得到的大部分警告和错误并不是我在做一些不起作用的事情，而是编译器不喜欢我这样做或者不在这里强制转换或放置一些额外的关键字的事情那里。

这些只是我不喜欢 C++ 用于仅使用一些据称强大的外部库单独编写的软件的一些原因。当您与其他人一起编写代码时，真正的恐惧开始了。他们是非常聪明的 C++ 黑客还是天真的初学者几乎都没有关系。每个人都会犯错误，但 C++ 故意让发现它们变得困难，甚至更难在它们发生之前发现它们。

使用 C++，如果不一直使用调试器，你就会迷失方向，但我希望能够在脑海中验证代码的正确性，而不必依赖调试器来查找运行在我从未预料到的路径上的代码。实际上，我尝试在脑海中运行我的所有代码并尝试获取它拥有的所有分支，即使在子例程等中也是如此，并且只是偶尔使用调试器，只是为了看看它在我为它准备的所有舒适的地方运行得有多好。编写和执行如此多的测试用例，以至于所有代码路径都被用于各种奇怪的输入数据的所有组合中，这根本是不可能的。因此，您可能不知道 C++ 程序中的错误，但这并不意味着它们不存在。C++ 项目越大，我的信心就越低，即使它在我们手头的所有测试数据下完美运行，它也不会有很多未检测到的错误。最终我把它扔掉，用其他语言或其他语言的组合重新开始。

我可以继续说下去，但我想我现在已经明确了我的观点。所有这些都让我在用 C++ 编程时感到效率低下，让我对自己代码的正确性失去信心，这意味着我不再使用它，而我仍然使用和依赖我编写的 20 多个 C 代码几年前。也许只是因为我不是一个好的 C++ 程序员，或者可能是因为我在 C 和其他语言方面相当出色，让我认识到我在 C++ 方面实际上是多么的蹩脚，我永远无法完全理解它.

生命短暂...

* * *

## 回答 #7

> 赞同：22
> 
> 时间：2009-03-16T12:27:17.843

在低级嵌入式环境中，一些“软件工程师”将具有 EE 背景，并且几乎没有掌握 C。C++ 更复杂，其中一些人只是害怕学习一门新语言。因此，C 被用作最小公分母。（在你建议摆脱这些家伙之前，他们至少和那些不懂硬核模拟东西的 CS 专业一样重要。）

从继承和维护两者的经验来看：C 语言中的糟糕设计难以理解、展开和重构为可用的东西。

C++ 中一个可怕的设计是无限糟糕的，因为随机的抽象层会让你的大脑在代码库周围徘徊，试图找出在什么情况下将执行哪些代码。

如果我必须与我知道不会产生出色设计的工程师合作，我宁愿选择前者而不是后者。

* * *

## 回答 #8

> 赞同：21
> 
> 时间：2009-03-16T10:04:00.697

除了个人不喜欢之外，我没有看到任何其他原因，即使是对嵌入式系统和类似的东西进行编程也是如此。在 C++ 中，您只需为您使用的功能支付开销。在某些 C++ 开销对您来说太高的特定情况下，您可以使用 C++ 的 C 子集。这就是说，我认为一些 C 程序员高估了一些 C++ 结构的开销。让我列举一些例子：

*   与普通函数相比，类和成员函数的开销为零（除非您使用虚函数，在这种情况下，与使用函数指针相比​​没有开销）
*   模板的开销很小（通常根本没有开销）

一个有效的原因是，当您为一个没有像样的 C++ 编译器的平台（根本没有 C++ 编译器，或者存在编译器，但实现不佳并为某些 C++ 功能带来不必要的高开销）的平台进行编程时。

* * *

## 回答 #9

> 赞同：14
> 
> 时间：2009-03-16T11:56:55.327

为什么限制说英语？也许你会成为塞尔维亚语中更有创造力的作家。

这是同样的论点，有明显的谬误。如果您有一项任务，并且您的舒适工具有效地解决了该任务，那么您可能会出于充分的理由使用您舒适的工具。

* * *

## 回答 #10

> 赞同：12
> 
> 时间：2009-03-16T11:00:32.043

C++ 的学习曲线要​​长得多。C 语言只有几个你需要了解的结构，然后你就可以开始编写强大的软件了。在 C++ 中，您需要学习 C 基础，然后是 OO 和泛型编程、异常等。一段时间后，您可能会了解大部分功能并且您可能会使用它们，但您仍然不知道编译器将如何翻译他们，他们有或没有什么隐含的开销。这需要很多时间和精力。

对于专业项目，这个论点可能不算数，因为您可以雇用已经非常了解 C++ 的人。但是在开源项目中，C 仍然被广泛使用，人们选择他们喜欢并且能够使用的语言。考虑到并非每个操作系统程序员都是专业程序员。

* * *

## 回答 #11

> 赞同：11
> 
> 时间：2009-03-16T11:44:27.557

我想跟进丹奥尔森的回答。我相信人们担心 C++ 的潜在危险和适得其反的特性，这是有道理的。但与 Dan 所说的不同，我不认为简单地决定编码标准是有效的，原因有两个：

1.  编码标准可能难以严格执行
2.  想出一个好的可能是非常困难的。

我认为这里的第二个原因比第一个重要得多，因为决定编码标准很容易成为政治问题，并在以后进行修订。考虑以下简化情况：

1.  您可以使用 stl 容器，但不能在您自己的任何代码中使用模板。
2.  人们开始抱怨如果他们只是被允许编写这个或那个模板类，他们会更有效率。
3.  修改编码标准以允许这样做。
4.  滑坡到一个没有人遵循的过于复杂的编码标准，并使用该标准应该防止的那种危险代码，再加上围绕该标准的过度官僚主义。

（在第 3 步中不修改标准的替代方案在经验上不太可能考虑，并且无论如何也不会好得多。）

虽然几年前我几乎在所有事情上都使用 C++，但我开始强烈地觉得 C 在需要由 C 或 C++ 处理的低级任务中更可取，其他所有事情都应该在其他一些任务中完成完全是语言。（只有可能的例外是一些特定的高性能问题域，wrt. [Blitz++](http://www.oonumerics.org/blitz/)）

* * *

## 回答 #12

> 赞同：10
> 
> 时间：2009-03-16T10:07:29.147

我从未见过任何我认为令人信服的使用 C 而不是 C++ 的论点。我认为大多数人害怕 C++ 提供的某些特性，这通常是有道理的。然而，这并不能说服我，因为可以通过编码标准强制执行是否使用某些功能。即使在 C 中，您也需要避免很多事情。完全放弃 C++ 本质上是说它没有提供比 C 更明显的好处来帮助人们编写更好的代码，我认为这是一种非常无知的观点。

此外，人们似乎总是提出不存在 C++ 编译器的平台的情况。当然 C 在这里是合适的，但我认为现在你很难找到这样的平台。

* * *

## 回答 #13

> 赞同：10
> 
> 时间：2009-07-08T14:17:31.780

我使用 C，或者至少在编写库代码时导出一个 C 接口。

我不想要定义不明确的 ABI 麻烦。

* * *

## 回答 #14

> 赞同：10
> 
> 时间：2010-01-16T18:07:30.870

有一点我还没有看到，我认为这是最重要的：

我每天使用的大多数库都是带有 Python、Ruby、Perl、Java 等绑定的 C 库。据我所见，使用 19 种不同的语言绑定来包装 C 库要比封装 C 库容易得多包装 C++ 库。

例如，我学过一次[开罗](http://cairographics.org/)，后来用过 3 或 4 种不同的语言。大胜！我宁愿写一个将来可以再次使用的程序，而写一个可以很容易地被其他编程语言采用的程序是这种情况的一个极端情况。

我知道可以绑定 C++ 库，但 AFAICT 不一样。我在其他语言中使用过 Qt（v3 和 v4），但使用起来并不好用：他们感觉就像用其他语言编写 C++，而不是原生库。（您必须将 C++ 方法信号作为字符串传递！）

如果您正在编写一个只使用一次的函数，或者如果您认为全世界都是 C++，那么 C++ 可能是一种更好的语言。如果您从一开始就设计语言可移植性，C 似乎是一种更简单的语言。

* * *

## 回答 #15

> 赞同：8
> 
> 时间：2009-03-16T09:59:58.040

Windows 内核开发不支持 c++（很遗憾）。

* * *

## 回答 #16

> 赞同：6
> 
> 时间：2009-03-16T10:03:08.157

[你可以在这里](http://lwn.net/Articles/249460/)阅读关于为什么 Linus Torvalds 偏爱 C 的有趣咆哮

* * *

## 回答 #17

> 赞同：5
> 
> 时间：2009-03-16T16:19:05.663

mac 上的原生代码是objective-c。PC 上的本机代码是 c (window.h) 或 c++ (mfc)。这两种环境都可以让您使用 c 几乎没有更改。当我想要一个跨平台的代码库时，ansi c 似乎是一个不错的选择。

* * *

## 回答 #18

> 赞同：4
> 
> 时间：2009-03-16T16:29:45.373

我能想到几个原因。

可能没有令人满意的 C++ 编译器。C++ 是一种更大的语言，我在无法处理现代 C++ 的系统上运行 C 编译器。

提问者或与他或她一起工作的人可能熟悉 C 但不熟悉 C++。

该项目可能是 C 语言。虽然可以向 C 语言添加一些 C++ 功能，但这很容易导致无法维护的混乱。我建议选择一种语言或另一种语言（通常是 C++，如果可行）。

提问者可能对 C++ 的学习曲线有过时的看法。（当正确接近时，它比 C 更容易。我见过的大多数介绍性书籍都没有正确接近它。）

请记住，C 和 C++ 是两种不同的语言，并且随着时间的推移变得越来越不同。同时在两者中编码是一个坏主意，并且使用 C++ 的类 C 子集会错过 C++ 的大部分优点。

* * *

## 回答 #19

> 赞同：4
> 
> 时间：2011-11-12T09:22:30.327

1.  C 是一门简单的语言，C++ 不是。对于很多人来说，C++ 太复杂而无法完全掌握，请参阅[http://en.wikipedia.org/wiki/C%2B%2B#Criticism](http://en.wikipedia.org/wiki/C%2B%2B#Criticism)。

2.  由于复杂性，不同的程序员通常只掌握不同的语言子集。它使阅读其他人的代码变得痛苦。

3.  语言的复杂性和缺陷增加了太多的注意力，有时还会损害生产力。我没有专注于工作本身，而是经常发现自己与语言本身作斗争。Java/python 是更高效的选择。

4.  调试损坏的 C 代码通常比调试损坏的 C++ 代码要简单得多。

5.  与 Java/C# 不同，C++ 标准库几乎没有超出 C 标准库的范围。

6.  一些著名的程序员，如 Linus Torvalds (Linux) 和 Richard Stallman (Emacs) 不喜欢 C++。

* * *

## 回答 #20

> 赞同：3
> 
> 时间：2009-03-16T12:06:46.050

我使用 C++ 和 C 编程有两个原因：

*   `vector`并`string`让我远离数组内存管理
*   严格的类型检查和强制类型转换以警告和/或捕捉我会错过的所有滋扰。

所以实际上是 C 借用了一些 c++，但尽可能多地使用 c++ 编译器。正如其他人在答案中所说，我现在发现我实际上以这种方式学习了更多的 C++，而在 C 涉及太多的地方，我使用 C++。Monitor/Lock using RAII 是我最近在处理多线程程序和打开/关闭文件的另一个类似结构时使用的其中之一。

* * *

## 回答 #21

> 赞同：3
> 
> 时间：2009-03-16T16:14:52.240

我认为C更便携。大约 5 年前，我做了一些工作，将代码移植到多种 unix（AIX、Irix、HPUX、Linux）。C 代码很容易移植，但我们在移植一些 C++ 代码时遇到了各种问题。也许这只是不成熟的开发环境，但出于这个原因，我更愿意使用 C 而不是 C++...

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2009-03-16T10:04:31.977

如果您在使用两种语言的环境中工作，您可能会将 C 用于一些性能关键的低级功能，而将 C#/Java 等功能性更强的/高级语言用于业务逻辑。如果 C++ 代码用于这些功能，则 JNI/非托管代码需要 C-Wrapper，这使得事情比单独使用 C 更复杂。

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2010-11-15T16:36:16.623

我可以在这两个方向上遵循许多建议。但最终它归结为 a) 可比较的简单 b) 可比较的复杂。

我不知道是否有人“发明”了一种语言复杂度测量方法。

在从 0 到 10 的范围内，我可能会将 C 评为 2 或 3，而 C++ 将在 8-10 之间。我认为 C++ 是最复杂的语言之一，但我不知道例如 Ada、PL1 等，所以与其他语言相比，它可能没有那么复杂。

C++ 继承了 C 的所有复杂性，因此它不能低于 C 的复杂度。

就我而言，使用一些脚本语言和 C 语言会更舒服。所以最后必须回答以下问题。“越多越好吗？”

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2009-03-16T11:11:00.287

大多数程序员理所当然地认为每个人都将质量视为重中之重。情况并非总是如此。如果您习惯于 C，C++ 可能会在幕后为您做太多事情。C++ 中类型检查的严格性似乎也很有限。许多人愿意冒险引入 C++ 可以帮助防止的各种错误，以避免这些“麻烦事”。

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2009-07-15T10:22:49.453

我能想到三个原因。一是 C 更适合嵌入式系统，因为它的二进制文件体积小，而且 C 编译器在任何系统上的可用性都更广泛。第二个是可移植性：C 是一种较小的语言，ANSI C 代码可以在任何地方编译。在 C++ 中更容易破坏可移植性。最后一个是语言本身。C++ 更难，而且绝对是一种设计非常糟糕的语言。上面报道了 Torvalds 的抱怨。您可能还想查看 C++ 常见问题解答 ( [http://yosefk.com/c++fqa/](http://yosefk.com/c++fqa/) )。

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2010-01-16T18:49:25.420

便携性可能是个问题。与 Gordon Carpenter-Thomp 的回答不同，我建议它是不同版本的 libstdc++ 在不同的 linux/unix 版本上的运行时支持。有关此问题的详细讨论，请参[见此链接。](http://www.trilithium.com/johan/2005/06/static-libstdc/)摘录一点：

> C++ 应用程序的不同部分使用的运行时支持代码需要兼容。如果程序的一部分需要动态转换或捕获另一部分提供的对象，则两部分必须就某些实现细节达成一致：如何找到 vtables，如何展开堆栈，等等。
> 
> 对于 C++ 和其他一些 GCC 支持的具有类似特性的语言，此类详细信息由 C++ ABI 指定。每当 GCC 使用的 ABI 发生变化时，您最终都会得到由不同 GCC 版本生成的不兼容的库。普通 C 也是如此，但 C ABI 更简单，并且存在时间更长，因此相当稳定。

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2012-08-13T11:56:15.920

我在 C 中发现的最有用的东西是缺少名称空间和重载：函数和符号名称是唯一标识符。要查找使用这些符号的位置，您只需`grep`通过源代码文件，搜索结果将显示位置。

在将新功能或组件连接到旧且复杂的系统时，这一点至关重要。

如果没有复杂的调用图构建工具，您无法在 C++ 中轻松做到这一点。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2012-11-20T05:03:44.353

以下是为什么将项目限制为 C 可能是有益的所有原因：

*   编译速度更快，因为语言更简单
*   需要较少的运行时支持，使其更适合低级环境
*   更容易与其他语言交互
*   支持堆栈上的可变大小数组
*   更容易阅读汇编代码，因为没有名称修饰
*   允许将不同编译器生成的代码轻松组合，因为它是事实上的标准应用程序二进制接口

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2013-08-06T06:18:56.370

有多种尝试将 C 增强为面向对象的语言：C++、C# 和 Objective-C。（Java和朋友只是C#的一种味道，问题更多）

C# 很好且完整地实现了 OO，但代价是可能会恢复到程序设计，而不会引入麻烦或代码异味。此外，虚拟机的引入使得编写接近低级别的代码变得困难，并且它永远不能自托管，因为虚拟机本身必须用可以本地运行的某种语言来实现。Java 通过使原始类型成为二阶公民而更加成问题。（在 C# 中，您有`System.Int32`（原始类型，`int`）: `System.ValueType`: `System.Object`，这使得原始类型仍然是对象，但在 Java 中，原始类型根本不是对象）。然而，它是最可移植的，因为在虚拟机下运行的编译二进制文件在不同平台下本质上是二进制兼容的。

C++ 没有使用任何虚拟机，并且保留了 C 指针，使其仍然适用于系统开发。（OS X 的内核，Darwin，主要是用 C++ 编写的，但是其中的一个紧密子集没有模板、多重继承或 STL，本质上是一种类似于 C++ 的 Objective-C 方言。查看 OS X IOKit 文档和你会发现）然而 C++ 并没有解决那些经典的 C 问题，同时引入了更多的问题，包括显然是最明显的可移植性问题。

Objective-C went half ways in the middle of C++ and C#, as it is a simple mix of C (any version) and a modified Smalltalk dialect. Smalltalk, just like C#, treats everything as objects. It does not use a virtual machine as well, and it can still (requires!) use pointers, thus it can still be used as a system development language. (Weird why there is nobody doing it? I want to fork Minix and try implement a kernel with minimal assembler and C, and mostly Objective-C) With appropriate libraries Objective-C is largely code-compatible (that is, requires a recompile but no code change) between platforms just like C.

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2013-09-08T21:12:02.133

*   Because the compiler vendor only provides a C compiler which is certified for safety critical applications
*   Because the C++ FQA is scary. [http://www.yosefk.com/c++fqa/](http://www.yosefk.com/c++fqa/)

* * *

## 回答 #31

> 赞同：-1
> 
> 时间：2011-03-20T23:42:37.087

大多数人似乎认为 C 和 C++ 在某种程度上是相关的，但可悲的是，他们错了。C++ 是一种与 C 完全不同的语言。

在 C++ 中，您考虑对象以及它们之间的关系。在 C 语言中，您考虑的是 API。这就像天和 17 之间的区别。

一个拙劣的类比：如果有人在英文中加了中文并称它为English++，你可能不会觉得在你最近的情书里加一句中文，因为用英文++这部分表达爱要容易得多。

# c++ - 如何从排序数据创建向量图

> ID：649793
> 
> 赞同：9
> 
> 时间：2009-03-16T09:54:43.950
> 
> 标签：c++, data-structures, vector, map

我有以下数据作为输入（按第一列排序）：

```
foo 1 2
foo 3 3
bar 10 11 
```

我想创建一个向量的映射，第一列作为映射的键，这样我们就有：

```
foo = {1,2,3,3}
bar = {10,11} 
```

但是为什么我下面的代码不能按预期工作？

```
 #include <vector>
    #include <map>
    #include <iostream>
    #include <fstream>
    #include <sstream>

    using namespace std;

    int main  ( int arg_count, char *arg_vec[] ) {
        if (arg_count !=2 ) {
            cerr << "expected one argument" << endl;
            return EXIT_FAILURE;      
        }

        string line;         
        ifstream acemblyfile (arg_vec[1]); 

        map <string, vector<int> > myMapOfVec; 
        vector <string> myVec;  
        string KEY = "" ;    

        if (acemblyfile.is_open())
        {
            while (getline(acemblyfile,line) )
            {
                stringstream ss(line);    
                string KEY_TEMP;
                int VAL1;
                int VAL2;           

                ss >> KEY_TEMP >> VAL1 >> VAL2;

                MyVec.push_back(VAL1);   
                MyVec.push_back(VAL2);   

                if (KEY_TEMP != KEY) {     
                  myMapOfVec[KEY] = MyVec;
                  KEY = KEY_TEMP;            
                  MyVec.clear();          
                }

            }
            acemblyfile.close();      
        }
        else {
            cout << "Unable to open file"; 
        }

for( map<string, vector<int> >::iterator iter = myMapOfVec.begin(); iter != myMapOfVec.end(); ++iter ) {
       vector <int> tempVec = (*iter).second;
       string Key = (*iter).first;
       for (unsigned i =0; i<tempVec.size(); i++) {
          cout << Key << " " << tempVec[i] << endl;
       }
    }

        return 0;
    } 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-03-16T10:24:07.623

正如 Mykola 所说，您应该使用地图中的矢量，而不是自己创建一个。我改变了你的整个代码，所以它对我有用。请注意，您编写了一些大小写错误的变量名称（MyMapOfVec 而不是 myMapOfVec），这会导致编译器错误。

还要确保您的输入文件末尾没有换行符，因为这将导致重复最后一行。

```
#include <vector>
#include <map>
#include <iostream>
#include <fstream>
#include <sstream>

using namespace std;

int main  ( int arg_count, char *arg_vec[] ) {
    if (arg_count !=2 ) {
        cerr << "expected one argument" << endl;
        return EXIT_FAILURE;      
    }

    string line;         
    ifstream acemblyfile (arg_vec[1]); 

    map <string, vector<int> > myMapOfVec; 
    string KEY;    

    if (acemblyfile.is_open())
    {
        while (getline(acemblyfile, line) )
        {
            stringstream ss(line);    
            int VAL1;
            int VAL2;

            ss >> KEY >> VAL1 >> VAL2;

            myMapOfVec[KEY].push_back(VAL1);
            myMapOfVec[KEY].push_back(VAL2);

        }
        acemblyfile.close();      
    }
    else {
        cout << "Unable to open file"; 
    }

for( map<string, vector<int> >::iterator iter = myMapOfVec.begin(); iter != myMapOfVec.end(); ++iter ) {
   vector<int> tempVec = (*iter).second;
   string Key = (*iter).first;
   cout << Key;
   for (unsigned i = 0; i < tempVec.size(); i++) {
      cout << " " << tempVec[i];
   }
   cout << endl;
}

    return 0;
} 
```

对于您的示例，这给出了输出

```
bar 10 11
foo 1 2 3 3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-16T10:02:50.140

不要为 KEY_TEMP != KEY 添加检查。因为在您的情况下，它们是相等的，因为 foo 一个接一个地两次。只是

```
myMapOfVec[KEY].push_back( VAL1 );
myMapOfVec[KEY].push_back( VAL2 ); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2010-11-12T23:12:41.907

关于地图和矢量的一些基础知识 - [http://rowsandcolumns.blogspot.com/2010/10/c-maps-and-vectors.html](http://rowsandcolumns.blogspot.com/2010/10/c-maps-and-vectors.html)

# mysql - 如何旋转 MySQL 实体-属性-值模式

> ID：649802
> 
> 赞同：27
> 
> 时间：2009-03-16T09:58:21.257
> 
> 标签：mysql, database-design, pivot, entity-attribute-value

我需要设计存储文件的所有元数据（即文件名、作者、标题、创建日期）和自定义元数据（已由用户添加到文件中，例如 CustUseBy、CustSendBy）的表。无法预先设置自定义元数据字段的数量。实际上，确定在文件中添加了哪些自定义标签以及添加了多少自定义标签的唯一方法是检查表中存在的内容。

为了存储它，我创建了一个基表（具有文件的所有常见元数据）、一个`Attributes`表（保存可能在文件上设置的其他可选属性）和一个`FileAttributes`表（为文件的属性分配值）。

```
CREAT TABLE FileBase (
    id VARCHAR(32) PRIMARY KEY,
    name VARCHAR(255) UNIQUE NOT NULL,
    title VARCHAR(255),
    author VARCHAR(255),
    created DATETIME NOT NULL,
) Engine=InnoDB;

CREATE TABLE Attributes (
    id VARCHAR(32) PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    type VARCHAR(255) NOT NULL
) Engine=InnoDB;

CREATE TABLE FileAttributes (
    sNo INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
    fileId VARCHAR(32) NOT NULL,
    attributeId VARCHAR(32) NOT NULL,
    attributeValue VARCHAR(255) NOT NULL,
    FOREIGN KEY fileId REFERENCES FileBase (id),
    FOREIGN KEY attributeId REFERENCES Attributes (id)
 ) Engine=InnoDB; 
```

样本数据：

```
INSERT INTO FileBase
(id,      title,  author,  name,        created)
  VALUES
('F001', 'Dox',   'vinay', 'story.dox', '2009/01/02 15:04:05'),
('F002', 'Excel', 'Ajay',  'data.xls',  '2009/02/03 01:02:03');

INSERT INTO Attributes
(id,      name,            type)
  VALUES
('A001', 'CustomeAttt1',  'Varchar(40)'),
('A002', 'CustomUseDate', 'Datetime');

INSERT INTO FileAttributes 
(fileId, attributeId, attributeValue)
  VALUES
('F001', 'A001',      'Akash'),
('F001', 'A002',      '2009/03/02'); 
```

现在的问题是我想以这样的方式显示数据：

```
FileId, Title, Author, CustomAttri1, CustomAttr2, ...
F001    Dox    vinay   Akash         2009/03/02   ...
F002    Excel  Ajay 
```

什么查询会产生这个结果？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-03-17T01:33:07.283

题中提到了MySQL，其实这个DBMS对于这类问题有一个特殊的功能：`GROUP_CONCAT(expr)`. 查看[MySQL 参考手册中的 group-by-functions](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)。该功能是在 MySQL 4.1 版中添加的。您将`GROUP BY FileID`在查询中使用。

我不太确定您希望结果如何。如果您希望为每个项目列出每个属性（即使未设置），这将更加困难。但是，这是我对如何做到这一点的建议：

```
SELECT bt.FileID, Title, Author, 
 GROUP_CONCAT(
  CONCAT_WS(':', at.AttributeName, at.AttributeType, avt.AttributeValue) 
  ORDER BY at.AttributeName SEPARATOR ', ') 
FROM BaseTable bt JOIN AttributeValueTable avt ON avt.FileID=bt.FileID 
 JOIN AttributeTable at ON avt.AttributeId=at.AttributeId 
GROUP BY bt.FileID; 
```

这会以相同的顺序为您提供所有属性，这可能很有用。输出将如下所示：

```
'F001', 'Dox', 'vinay', 'CustomAttr1:varchar(40):Akash, CustomUseDate:Datetime:2009/03/02' 
```

这样你只需要一个数据库查询，并且输出很容易解析。如果你想在数据库中将属性存储为真实的日期时间等，你需要使用动态 SQL，但我会保持清醒并将值存储在 varchars 中。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2011-10-27T19:00:18.610

如果您正在寻找比 group-concat 结果更有用（和可连接）的东西，请尝试以下解决方案。我创建了一些与您的示例非常相似的表，以使其有意义。

这在以下情况下有效：

*   您想要一个纯 SQL 解决方案（无代码，无循环）
*   你有一组可预测的属性（例如不是动态的）
*   当需要添加新的属性类型时，您可以更新查询
*   您更喜欢可以作为子选择加入、联合或嵌套的结果

**表 A（文件）**

```
FileID, Title, Author, CreatedOn 
```

**表 B（属性）**

```
AttrID, AttrName, AttrType [not sure how you use type...] 
```

**表 C (Files_Attributes)**

```
FileID, AttrID, AttrValue 
```

传统查询会提取许多冗余行：

```
SELECT * FROM 
Files F 
LEFT JOIN Files_Attributes FA USING (FileID)
LEFT JOIN Attributes A USING (AttributeID); 
```

```
AttrID FileID Title Author CreatedOn AttrValue AttrName AttrType
50 1 TestFile Joe 2011-01-01 true ReadOnly bool
60 1 TestFile Joe 2011-01-01 xls FileFormat 文本
70 1 TestFile Joe 2011-01-01 false Private bool
80 1 测试文件 Joe 2011-01-01 2011-10-03 LastModified date
60 2 LongNovel Mary 2011-02-01 json FileFormat 文本
80 2 LongNovel Mary 2011-02-01 2011-10-04 LastModified date
70 2 LongNovel Mary 2011-02-01 true 私有 bool
50 2 LongNovel Mary 2011-02-01 true ReadOnly bool
50 3 ShortStory Susan 2011-03-01 false ReadOnly bool
60 3 ShortStory Susan 2011-03-01 ascii 文件格式文本
70 3 ShortStory Susan 2011-03-01 false Private bool
80 3 ShortStory Susan 2011-03-01 2011-10-01 LastModified date
50 4 利润损失法案 2011-04-01 false ReadOnly bool
70 4 利润损失法案 2011-04-01 true Private bool
80 4 损益法案 2011-04-01 2011-10-02 LastModified date
60 4 利润损失法案 2011-04-01 text FileFormat text
50 5 MonthlyBudget George 2011-05-01 false ReadOnly bool
60 5 MonthlyBudget George 2011-05-01 二进制文件格式文本
70 5 MonthlyBudget George 2011-05-01 false Private bool
80 5 MonthlyBudget George 2011-05-01 2011-10-20 LastModified date

```

这个合并查询（使用 MAX 的方法）可以合并行：

```
SELECT
F.*,
MAX( IF(A.AttrName = 'ReadOnly', FA.AttrValue, NULL) ) as 'ReadOnly',
MAX( IF(A.AttrName = 'FileFormat', FA.AttrValue, NULL) ) as 'FileFormat',
MAX( IF(A.AttrName = 'Private', FA.AttrValue, NULL) ) as 'Private',
MAX( IF(A.AttrName = 'LastModified', FA.AttrValue, NULL) ) as 'LastModified'
FROM 
Files F 
LEFT JOIN Files_Attributes FA USING (FileID)
LEFT JOIN Attributes A USING (AttributeID)
GROUP BY
F.FileID; 
```

```
FileID Title Author CreatedOn ReadOnly FileFormat Private LastModified
1 测试文件乔 2011-01-01 真 xls 假 2011-10-03
2 LongNovel Mary 2011-02-01 true json true 2011-10-04
3 ShortStory Susan 2011-03-01 假 ascii 假 2011-10-01
4 利润损失法案 2011-04-01 虚假文本 真实 2011-10-02
5 MonthlyBudget George 2011-05-01 错误二进制错误 2011-10-20

```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-03-16T10:23:39.933

这种查询的一般形式是

```
SELECT file.*,
   attr1.value AS 'Attribute 1 Name', 
   attr2.value AS 'Attribute 2 Name', 
   ...
FROM
   file 
   LEFT JOIN attr AS attr1 
      ON(file.FileId=attr1.FileId and attr1.AttributeId=1)
   LEFT JOIN attr AS attr2 
      ON(file.FileId=attr2.FileId and attr2.AttributeId=2)
   ... 
```

因此，您需要根据您需要的属性动态构建查询。在 php-ish 伪代码中

```
$cols="file";
$joins="";

$rows=$db->GetAll("select * from Attributes");
foreach($rows as $idx=>$row)
{
   $alias="attr{$idx}";
   $cols.=", {$alias}.value as '".mysql_escape_string($row['AttributeName'])."'";   
   $joins.="LEFT JOIN attr as {$alias} on ".
       "(file.FileId={$alias}.FileId and ".
       "{$alias}.AttributeId={$row['AttributeId']}) ";
}

 $pivotsql="select $cols from file $joins"; 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-03-16T10:10:23.443

这是 SQL 中的标准“行到列”问题。

它最容易在 SQL 之外完成。

在您的应用程序中，执行以下操作：

1.  定义一个简单的类来包含文件、系统属性和用户属性的集合。对于这种客户属性集合，列表是一个不错的选择。我们称这个类为 FileDescription。

2.  在文件和文件的所有客户属性之间执行简单连接。

3.  编写一个循环来从查询结果中组装 FileDescriptions。

    *   获取第一行，创建一个 FileDescription 并设置第一个客户属性。

    *   虽然有更多行要获取：

        *   获取一行
        *   如果该行的文件名与我们正在构建的 FileDescription 不匹配：完成构建 FileDescription；将此附加到文件描述的结果集合中；使用给定名称和第一个客户属性创建一个新的空 FileDescription。
        *   如果此行的文件名与我们正在构建的 FileDescription 匹配：将另一个客户属性附加到当前 FileDescription

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-02-28T16:53:35.427

我一直在尝试不同的答案，而 Methai 的答案对我来说是最方便的。我当前的项目，虽然它使用 Doctrine 和 MySQL，但有很多松散的表。

以下是我对 Methai 解决方案的体验的结果：

**创建实体表**

```
DROP TABLE IF EXISTS entity;
CREATE TABLE entity (
    id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
    title VARCHAR(255),
    author VARCHAR(255),
    createdOn DATETIME NOT NULL
) Engine = InnoDB; 
```

**创建属性表**

```
DROP TABLE IF EXISTS attribute;
CREATE TABLE attribute (
    id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(255) NOT NULL,
    type VARCHAR(255) NOT NULL
) Engine = InnoDB; 
```

**创建属性值表**

```
DROP TABLE IF EXISTS attributevalue;
CREATE TABLE attributevalue (
    id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
    value VARCHAR(255) NOT NULL,
    attribute_id INT UNSIGNED NOT NULL,
    FOREIGN KEY(attribute_id) REFERENCES attribute(id)
 ) Engine = InnoDB; 
```

**创建 entity_attributevalue 连接表**

```
DROP TABLE IF EXISTS entity_attributevalue;
CREATE TABLE entity_attributevalue (
    entity_id INT UNSIGNED NOT NULL,
    attributevalue_id INT UNSIGNED NOT NULL,
    FOREIGN KEY(entity_id) REFERENCES entity(id),
    FOREIGN KEY(attributevalue_id) REFERENCES attributevalue(id)
) Engine = InnoDB; 
```

**填充实体表**

```
INSERT INTO entity
    (title, author, createdOn)
VALUES
    ('TestFile', 'Joe', '2011-01-01'),
    ('LongNovel', 'Mary', '2011-02-01'),
    ('ShortStory', 'Susan', '2011-03-01'),
    ('ProfitLoss', 'Bill', '2011-04-01'),
    ('MonthlyBudget', 'George', '2011-05-01'),
    ('Paper', 'Jane', '2012-04-01'),
    ('Essay', 'John', '2012-03-01'),
    ('Article', 'Dan', '2012-12-01'); 
```

**填充属性表**

```
INSERT INTO attribute
    (name, type)
VALUES
    ('ReadOnly', 'bool'),
    ('FileFormat', 'text'),
    ('Private', 'bool'),
    ('LastModified', 'date'); 
```

**填充属性值表**

```
INSERT INTO attributevalue 
    (value, attribute_id)
VALUES
    ('true', '1'),
    ('xls', '2'),
    ('false', '3'),
    ('2011-10-03', '4'),
    ('true', '1'),
    ('json', '2'),
    ('true', '3'),
    ('2011-10-04', '4'),
    ('false', '1'),
    ('ascii', '2'),
    ('false', '3'),
    ('2011-10-01', '4'),
    ('false', '1'),
    ('text', '2'),
    ('true', '3'),
    ('2011-10-02', '4'),
    ('false', '1'),
    ('binary', '2'),
    ('false', '3'),
    ('2011-10-20', '4'),
    ('doc', '2'),
    ('false', '3'),
    ('2011-10-20', '4'),
    ('rtf', '2'),
    ('2011-10-20', '4'); 
```

**填充 entity_attributevalue 表**

```
INSERT INTO entity_attributevalue 
    (entity_id, attributevalue_id)
VALUES
    ('1', '1'),
    ('1', '2'),
    ('1', '3'),
    ('1', '4'),
    ('2', '5'),
    ('2', '6'),
    ('2', '7'),
    ('2', '8'),
    ('3', '9'),
    ('3', '10'),
    ('3', '11'),
    ('3', '12'),
    ('4', '13'),
    ('4', '14'),
    ('4', '15'),
    ('4', '16'),
    ('5', '17'),
    ('5', '18'),
    ('5', '19'),
    ('5', '20'),
    ('6', '21'),
    ('6', '22'),
    ('6', '23'),
    ('7', '24'),
    ('7', '25'); 
```

**显示所有记录**

```
SELECT * 
FROM `entity` e
LEFT JOIN `entity_attributevalue` ea ON ea.entity_id = e.id
LEFT JOIN `attributevalue` av ON ea.attributevalue_id = av.id
LEFT JOIN `attribute` a ON av.attribute_id = a.id; 
```

```
id 标题作者创建在 entity_id 属性值_id id 值属性_id id 名称类型
1 TestFile Joe 2011-01-01 00:00:00 1 1 1 true 1 1 ReadOnly bool
1 TestFile Joe 2011-01-01 00:00:00 1 2 2 xls 2 2 文件格式文本
1 测试文件乔 2011-01-01 00:00:00 1 3 3 假 3 3 私有布尔
1 TestFile Joe 2011-01-01 00:00:00 1 4 4 2011-10-03 4 4 LastModified 日期
2 LongNovel Mary 2011-02-01 00:00:00 2 5 5 真 1 1 只读布尔
2 LongNovel Mary 2011-02-01 00:00:00 2 6 6 json 2 2 文件格式文本
2 LongNovel Mary 2011-02-01 00:00:00 2 7 7 真 3 3 私有布尔
2 LongNovel Mary 2011-02-01 00:00:00 2 8 8 2011-10-04 4 4 LastModified 日期
3 ShortStory 苏珊 2011-03-01 00:00:00 3 9 9 假 1 1 只读布尔
3 ShortStory Susan 2011-03-01 00:00:00 3 10 10 ascii 2 2 文件格式文本
3 ShortStory Susan 2011-03-01 00:00:00 3 11 11 假 3 3 私人布尔
3 ShortStory Susan 2011-03-01 00:00:00 3 12 12 2011-10-01 4 4 LastModified 日期
4 利润损失法案 2011-04-01 00:00:00 4 13 13 false 1 1 ReadOnly bool
4 利润损失法案 2011-04-01 00:00:00 4 14 14 文本 2 2 文件格式文本
4 利润损失法案 2011-04-01 00:00:00 4 15 15 true 3 3 Private bool
4 损益法案 2011-04-01 00:00:00 4 16 16 2011-10-02 4 4 LastModified date
5 MonthlyBudget George 2011-05-01 00:00:00 5 17 17 false 1 1 ReadOnly bool
5 MonthlyBudget George 2011-05-01 00:00:00 5 18 18 二进制 2 2 文件格式文本
5 MonthlyBudget George 2011-05-01 00:00:00 5 19 19 false 3 3 Private bool
5 MonthlyBudget George 2011-05-01 00:00:00 5 20 20 2011-10-20 4 4 LastModified 日期
6 纸简 2012-04-01 00:00:00 6 21 21 二进制 2 2 文件格式文本
6 纸简 2012-04-01 00:00:00 6 22 22 假 3 3 私有布尔
6 论文 Jane 2012-04-01 00:00:00 6 23 23 2011-10-20 4 4 LastModified 日期
7 随笔 John 2012-03-01 00:00:00 7 24 24 二进制 2 2 文件格式文本
7 随笔约翰 2012-03-01 00:00:00 7 25 25 2011-10-20 4 4 LastModified 日期
8 文章 Dan 2012-12-01 00:00:00 NULL NULL NULL NULL NULL NULL NULL NULL

```

**数据透视表**

```
SELECT e.*,
    MAX( IF(a.name = 'ReadOnly', av.value, NULL) ) as 'ReadOnly',
    MAX( IF(a.name = 'FileFormat', av.value, NULL) ) as 'FileFormat',
    MAX( IF(a.name = 'Private', av.value, NULL) ) as 'Private',
    MAX( IF(a.name = 'LastModified', av.value, NULL) ) as 'LastModified'
FROM `entity` e
LEFT JOIN `entity_attributevalue` ea ON ea.entity_id = e.id
LEFT JOIN `attributevalue` av ON ea.attributevalue_id = av.id
LEFT JOIN `attribute` a ON av.attribute_id = a.id
GROUP BY e.id; 
```

```
id 标题 作者 createdOn ReadOnly FileFormat Private LastModified
1 TestFile 乔 2011-01-01 00:00:00 真 xls 假 2011-10-03
2 LongNovel Mary 2011-02-01 00:00:00 true json true 2011-10-04
3 ShortStory 苏珊 2011-03-01 00:00:00 假 ascii 假 2011-10-01
4 利润损失法案 2011-04-01 00:00:00 false text true 2011-10-02
5 MonthlyBudget George 2011-05-01 00:00:00 false binary false 2011-10-20
6 纸简 2012-04-01 00:00:00 NULL 二进制 false 2011-10-20
7 随笔约翰 2012-03-01 00:00:00 NULL 二进制 NULL 2011-10-20
8 文章 Dan 2012-12-01 00:00:00 NULL NULL NULL NULL

```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-16T10:34:19.503

但是，有一些解决方案可以将行用作列，也就是转置数据。它涉及在纯 SQL 中执行此操作的查询技巧，或者您将不得不依赖某些仅在某些数据库中可用的功能，使用数据透视表（或交叉表）。

[例如，您可以在 Oracle (11g) 中查看如何执行此操作。](http://www.sqlsnippets.com/en/topic-12180.html)

编程版本将更易于维护和制作，而且可以与任何数据库一起使用。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2009-03-16T10:08:39.627

部分答案，因为我不知道 MySQL（好吧）。在 MSSQL 中，我会查看数据透视表或在存储过程中创建临时表。这可能是一个艰难的时期......

# wpf - WPF：将 UIControls 与物理行为正确的绳索连接（受 Pixelmator 启发）

> ID：649806
> 
> 赞同：0
> 
> 时间：2009-03-16T10:00:38.227
> 
> 标签：wpf, user-interface, wpf-controls, physics

Pixelmator [1] 有一个令人印象深刻的 GUI。到目前为止，我只是玩了一下它。如果您使用的是应用于图片一部分的滤镜，则可以在其中设置滤镜参数的窗口通过绳索连接到图像的相关部分（参见图 2）。

但是我想知道两件事。我一般如何实现类似这条绳子的东西，目前我不知道..（绳子是如何绘制的？逐个像素？）似乎力（如g）以某种方式定义，然后是线绳索的近似值。最后我想在 WPF 中实现这个。

有任何想法吗？

[1] [http://www.pixelmator.com/](http://www.pixelmator.com/)

[2] [http://www.youtube.com/watch?v=dq63zgFHEjg](http://www.youtube.com/watch?v=dq63zgFHEjg) 2:58

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-16T10:18:06.157

你需要一个物理引擎。

[这是一个托管的（没用过）](http://farseerphysics.codeplex.com/)。您可以通过将许多小的刚性段连接在一起来近似绳索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-16T10:44:46.870

Will 与[Farseer](http://www.codeplex.com/FarseerPhysics)的链接走在了正确的轨道上，我已经使用了它，虽然很短暂，但它非常棒。在 Farseer 中，您可以链接对象，在 1:28 看到[这个 farseer 演示](http://www.youtube.com/watch?v=97S-PmEXLGw)，源代码随 codeplex 上的下载一起提供。让我知道你的进展，我很想看到一些内置物理的好的 UI。麻省理工学院的另一个例子是[物理引擎可以做什么](http://www.youtube.com/watch?v=NZNTgglPbUA)

# java - 在 Java 中配置套接字以使用小数据包

> ID：649807
> 
> 赞同：2
> 
> 时间：2009-03-16T10:01:30.923
> 
> 标签：java, sockets, packet, latency

我正在处理通过非常慢的网络连接路由给我的时间紧迫的消息。我正在使用 Java TCP/IP 套接字连接到原始服务器（我无法控制）。数据的长度不同，但通常约为 5000 字节，因此最终会分成大约 1400 字节的多个数据包。

在我的 Java 客户端代码中有什么方法可以控制用于向我发送数据的数据包的大小？我想尝试显式地使用较小的数据包大小，例如 500 字节数据包，这将减少我接收消息第一个字节所需的时间，但（可能）会增加标头开销。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-16T10:11:33.770

如果您无法控制或更改服务器，我认为您无法从客户端控制它。我怀疑服务器正在将数据打包到一个 1500 字节的以太网帧中（有关详细信息，请参见[此处](http://www.dcs.gla.ac.uk/~lewis/networkpages/m04s03EthernetFrame.htm)）并尝试优化其向您的数据传递。

这 1500 个字节称为[MTU](http://en.wikipedia.org/wiki/Maximum_transmission_unit)。你*可以*在操作系统层玩这个，但我怀疑这只会给你带来悲伤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-16T10:05:20.227

您可以尝试在少量字节后[刷新](http://java.sun.com/j2se/1.5.0/docs/api/java/net/Socket.html#getOutputStream())[SocketOutputStreams](http://java.sun.com/j2se/1.5.0/docs/api/java/io/OutputStream.html#flush())。这*应该*会创建更小的数据包——因为它取决于系统——但不能保证。

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-16T10:16:18.547

我们发现解决初始读取延迟的一种方法是在客户端请求的 TCP/IP 标头中设置 PUSH 或 URG 标志。据我所知，标准的 Java 套接字库不允许您这样做，但有一个库位于：

[http://www.savarese.org/software/vserv-tcpip/](http://www.savarese.org/software/vserv-tcpip/)

显然是这样。

免责声明：这是很久以前的**事**了（我认为是 Java 1.1.8），我们只在 Windows 上使用过它，我怀疑这也是一种 hack，所以它可能不再起作用。而且我也没有使用过 Savarese 库，所以不能保证。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-16T21:50:59.127

如果想减少接收第一条数据的时间，可以尝试设置 Socket.setTcpNoDelay(true); [setTcpNoDelay](https://docs.oracle.com/javase/7/docs/api/java/net/Socket.html#setTcpNoDelay(boolean))

# java - 疑难解答：JDialog 是模态的但不是模态的？

> ID：649815
> 
> 赞同：1
> 
> 时间：2009-03-16T10:03:47.063
> 
> 标签：java, swing, modal-dialog, jdialog

对此感到困惑，但也许，只是也许，有人以前遇到过这个问题，可以为我指明正确的方向。

我有一个 JDialog 用于显示长时间运行的任务的进度，我已经明确地将其创建为具有定义所有者的模式：

```
 progressDialog = new JDialog( ((Dialog)windowParent), true );
  ...
  progressDialog.setVisible( true ); 
```

稍后，一旦任务完成，我再次关闭对话框：

```
protected void done() {
  SwingUtilities.invokeLater( new Runnable() {
     public void run() {
        progressDialog.setVisible( false );
     }
  } );
} 
```

在极少数情况下，对话框 a) 不会关闭，并且 b) 不是真正的模式，即用户能够与（理论上的）对话框后面的窗口进行交互。有什么想法可能导致这种情况吗？不幸的是，它很少发生，直到现在，只在 Linux 系统上发生。这可能是一个 Swing 错误还是我可能做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-16T22:09:51.660

尽管我无法为您的问题提供明确的解决方案，但我可以告诉您，我已经看到 Linux 上模态对话框的各种奇怪行为 - 其中许多取决于适当的窗口管理器。

对于我们的销售点系统，我们最终使用了非常简约的“flwm”窗口管理器，因为它提供了最可靠和最理想的属性。但是，不建议将它用于现代 Linux 桌面。

至于模态本身：如果您可以使用 Java 6，您可能希望查看 JDK6 模态更改和增强：[Sun Blog](http://blogs.oracle.com/praveenm/entry/awt_modality_enhancements_in_java)和随附的 Dialog.ModalExclusionType的[Javadoc](http://java.sun.com/javase/6/docs/api/java/awt/Dialog.ModalExclusionType.html)

# asp.net-mvc - 使用 msbuild 编译时 mvc 视图检查

> ID：649819
> 
> 赞同：15
> 
> 时间：2009-03-16T10:05:35.373
> 
> 标签：asp.net-mvc, msbuild

我发现在 ASP.NET MVC 项目的 .csproj 中有以下目标：

```
<Target Name="AfterBuild" Condition="'$(MvcBuildViews)'=='true'">
    <AspNetCompiler VirtualPath="temp" PhysicalPath="$(ProjectDir)\..\$(ProjectName)" />
</Target> 
```

这将检查 .csproj 中的 MvcBuildViews bool 属性，如果设置为 true，则生成检查视图。

我使用 NAnt 构建我的应用程序进行部署，是否可以让这个目标从 msbuild 命令行运行而无需修改 csproj？（我希望它仅在部署时运行，而不是每个构建，因为它的慢速 + resharper 无论如何都会在 VS 中捕获它）

如果没有，我如何将上述代码转换为 msbuild 命令行，以便修改我的部署脚本？这是我当前的脚本：

```
<target name="Deploy" depends="init">
    <exec basedir="." program="${DotNetPath}msbuild.exe" commandline=" src/MyProject.Web/MyProject.Web.csproj /nologo 
  /t:Rebuild
  /t:ResolveReferences;_CopyWebApplication
  /p:OutDir=../../output/build/bin/
  /p:WebProjectOutputDir=../../output/build/
  /p:Debug=false
  /p:Configuration=Release
  /v:m"
    workingdir="." failonerror="true" />
    <call target="tests"/>
    <call target="compress-js"/>
    <call target="compress-css"/>
    <call target="rar-deployed-code"/>
  </target> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-03-16T10:13:13.047

将属性 MvcBuildViews 设置为 true 应该可以工作。

```
<target name="Deploy" depends="init">
  <exec basedir="." program="${DotNetPath}msbuild.exe" commandline=" src/MyProject.Web/MyProject.Web.csproj /nologo 
    /t:Rebuild
    /t:ResolveReferences;_CopyWebApplication
    /p:OutDir=../../output/build/bin/
    /p:WebProjectOutputDir=../../output/build/
    /p:Debug=false
    /p:Configuration=Release
    /p:MvcBuildViews=true
    /v:m"
      workingdir="." failonerror="true" />
      <call target="tests"/>
      <call target="compress-js"/>
      <call target="compress-css"/>
      <call target="rar-deployed-code"/>
</target> 
```

# design-patterns - 中介者设计模式~=事务脚本？

> ID：649827
> 
> 赞同：1
> 
> 时间：2009-03-16T10:08:24.760
> 
> 标签：design-patterns

看起来设计中的中介越多，设计的质量就越低。因为这意味着在 Mediator 内部的程序脚本中完成的更多，而在 OOP 中完成的更少。你怎么看？

它让我们想起了 Martin Flower 书籍中的 mi Transaction Script vs Domain Model 对比。

我刚刚发现自己正在编写一个 Mediator 对象，该对象将 4 个其他对象连接起来并创建新功能。但我不确定这是不是不好的做法：“好的，有一些对象，不知道也不关心是否需要更多对象，现在我将它们推入中介设计模式（这是一个非常好名字）我会写下所有缺失的东西。”

你怎么想？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-16T10:16:57.717

当您查看[SOLID](http://butunclebob.com/ArticleS.UncleBob.PrinciplesOfOod)原则时，我认为您是在说您对调解员违反基本的“单一职责原则”感到不舒服。类和中介者都对一个对象负有一些责任。

也许如果您有更详细的示例，您可以确定设计违反了哪些特定原则。

# wpf - WPF 滚动条

> ID：649831
> 
> 赞同：0
> 
> 时间：2009-03-16T10:09:53.057
> 
> 标签：wpf, scrollbar

有什么办法可以改变所有滚动条，这样我就可以让它们看起来更少的窗口？我不喜欢窗户，但在这种情况下，滚动条看起来很愚蠢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-16T10:13:56.743

所有 WPF 控件都可以通过其控件模板设置外观。做起来很简单，但可能需要一点时间才能完全掌握如何去做。

[这是 MSDN 上为滚动条设置皮肤的示例。](http://msdn.microsoft.com/en-us/library/ms742173.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-16T10:56:24.830

我通常应用 SimpleScrollviewer/SimpleListbox/等。当我在 Blend 里面时。您需要转到资产库（“>>”），简单样式，选择其中一个元素。因为简单元素里面有更多的“东西”，所以更容易改变它。

# java - jsf中的后退命令按钮

> ID：649834
> 
> 赞同：11
> 
> 时间：2009-03-16T10:10:50.837
> 
> 标签：java, jsf, navigation, back-button

如何将后退按钮实现为通用的命令按钮？后退按钮不是指浏览器按钮，而是位于页面某处的按钮。并不总是可以使用 Post-redirect-get 模式。

在按钮应该指向的每个地方传递信息是非常不切实际的。

是否存在指向最后应用的导航规则的导航规则的保留关键字？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-03-16T12:05:53.667

在这种情况下，我使用`h:commandLink`with 属性。`onclick="history.go(-1)"`它普遍适用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-16T10:35:53.493

我的第一个想法：

在每一个

```
<h:commandLink .....> 
```

等等; 将导航字符串存储在 bean 甚至堆栈中，然后后退按钮可以检索它并根据 faces-config.xml 将其返回

第二个想法。

但是经过反思，您应该覆盖或使用过滤器来拦截导航命令并将它们推送到堆栈上。然后后退按钮可以弹出导航并离开你。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-08-16T12:02:39.100

您可以使用：

```
<p:commandButton onclick="window.history.back();"/> 
```

该指令与`onclick="history.go(-1)"`alexmeia 所说的相同。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-16T17:52:36.423

我会将导航字符串存储在堆栈数据类型中，然后您使用 stack.peek() 来显示您身后的站点，并在单击它时触发触发 stack.pop() 的操作事件

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-04-30T16:23:27.207

我在我的标签视图中使用了“上一个”按钮，并且导航工作顺利，只需使用

```
 <p:commandButton value="Previous" id="PreviousOffer" onclick="window.history.go(-1);return false;"/> 
```

PS-当我没有使用`return false;`并单击上一个按钮时，它仅停留在当前页面上。但是，添加后`return false`它开始工作。

# javascript - Javascript Aptana 辅助扩展

> ID：649836
> 
> 赞同：0
> 
> 时间：2009-03-16T10:11:30.243
> 
> 标签：javascript, aptana

### 代码：

```
var a={
    value:5,
    test:function()
    {
        this.value=4;
    }
}

var b=someFunction(
{
    value:5,
    test:function()
    {
        this.value=4;
    }
}); 
```

如您所见，它们看起来相同，区别仅在于在第一种情况下我们定义对象，在第二种情况下，我们将此对象传递给函数。

问题是，在第一种情况下，当我键入 "this.v" (as a this.value) 时，我会看到代码辅助，但在第二种情况下看不到。我尝试创建一个对象，然后将其用作此函数的参数 - 这可行，但不幸的是，自动文档脚本需要代码在第二个版本中。我的问题是 - 我可以强制 Aptana 以某种方式使用传递给函数的对象，就像它在声明的对象中一样吗？我发现它确实对“= {}”声明有代码帮助。我想将此扩展到任何“{}”出现。任何人都知道如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-11-04T23:14:32.187

只能通过扩展 Aptana Java 文件来实现。没有别的办法——也许未来的 Aptana 会默认支持这个......

# asp.net - ADO.NET 表适配器参数

> ID：649838
> 
> 赞同：6
> 
> 时间：2009-03-16T10:11:48.247
> 
> 标签：asp.net, sql, ado.net, tableadapter

我有一个查询，我希望通过一个包含“IN”子句的 ASP.NET TableAdapter 来运行，该子句通过参数接收它的值。

我的问题是，如何指定这个参数？我想写这样的条件语句：

```
AND b.group_category_id in (@ParamList) 
```

其中@ParamList 是参数的字符串，例如“4,12,45,23”，但由于指定的 id 是整数，它抱怨它不能将字符串转换为整数。这是有道理的，但是有没有办法在 ASP.NET TableAdapter 的 SQL 语句中指定这样的列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-16T10:26:46.603

您可能会查看[http://dotnet.org.za/johanvw/archive/2008/06/13/mssql-split-function.aspx](http://dotnet.org.za/johanvw/archive/2008/06/13/mssql-split-function.aspx)并将其作为字符串传递。一种解决方法而不是解决方案。但这只有在您使用 MSSQL 时才可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-17T21:04:24.027

我见过的一种解决方法：

```
WHERE charindex(',' + cast(b.group_category_id as varchar) + ',', @ParamList) > 0 
```

在这种情况下，@ParamList 将是格式为“,4,12,45,23”的字符串

它不是“漂亮”，但保留了编译查询的参数和好处。由于您正在搜索数字，因此子字符串保证了唯一匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-16T10:35:05.350

您可以将@ParamList 作为逗号分隔的字符串传递，解析字符串并将结果插入#table，然后使用 IN 搜索#table：

```
AND b.group_category_id in (select group_category_id from #group_category_id_list) 
```

除此之外，您的选择是有限的，除非您想使用动态 SQL（exec() 语句），但我建议您尽可能避免这种情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T10:21:14.313

用以下方式回答我自己的问题：无法完成。

# tortoisesvn - 如何使用 TortoiseSVN 进行非递归提交？

> ID：649848
> 
> 赞同：1
> 
> 时间：2009-03-16T10:16:43.583
> 
> 标签：tortoisesvn, commit

当我在我签出的最顶层目录上修改一个属性（例如，svn:ignore）时（大多数时候它是主干，无论如何），使用 TortoiseSVN 客户端递归地遍历整个项目。

大树，多数据，需要很长时间。

我怎样才能避免这种情况？其他地方可能会有变化，但我知道我只是对它们不感兴趣，无论如何都取消选中它们。

我知道稀疏结帐功能，但我不知道如何在此处应用此功能，因为我没有稀疏结帐。我是否需要创建第二个稀疏结帐，应用更改/提交，然后更新我的另一个副本？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-16T10:22:39.310

尝试：

```
svn commit --non-recursive [target] 
```

* * *

[**编辑：** OP更新了他的问题以澄清他指的是TortoiseSVN，而不是常规的Subversion命令行。]

**不，TortoiseSVN 不提供非递归提交的直接方式。**但是，如果您在目录的顶层提交某些内容而*不是*在较低级别提交某些内容（例如，您取消选择它），这必然会导致发生非递归提交。见[这里](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-cli-main.html#tsvn-cli-commit)。

因此，有一种解决方法。如果您真的非常想这样做并且您不喜欢命令行，只需对底层目录中的文件进行微不足道的更改，在取消选择虚拟更改的同时提交您的真实文件，然后恢复虚拟更改。这将强制 TortoiseSVN 进行非递归提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-16T17:54:27.807

由于您正在对目录进行操作，因此 tortoise 假设它可能会影响其中的所有内容，因此一直向下查看您的工作副本。

即使对于大型 repo，对工作副本的检查也应该相当快，因为​​它是文件系统上的本地操作，不涉及网络操作

在 Tortoise 找到所有修改后的文件后，您可以只选择您关心的文件并提交这些文件。

无论如何，区别在于目录与普通文件的处理方式不同，这种处理方式的差异甚至可能取决于颠覆本身的行为方式，而不仅仅是 Tortoise。

# web-services - 以编程方式获取有关已配置 (webservices.xml) Web 服务处理程序的信息

> ID：649851
> 
> 赞同：0
> 
> 时间：2009-03-16T10:18:18.323
> 
> 标签：web-services, jax-rpc

在 Web 服务中，我在 webservices.xml（用于 IBM 运行时）和 server-config.wsdd（Axis 运行时）中配置为服务器（角色）的 GenericHandler 很少。假设处理程序是 A、B 和 C。

现在，当有入站呼叫时，A、B 和 C 将按预期被调用。

我基本上是在寻找一种方法来了解（以编程方式）为此 Web 服务配置的处理程序的数量，即在这种情况下为 3，以及其他一些处理程序特定的详细信息。

我正在调查通过以下方式获取 HandlerChain：

```
HandlerRegistry hndlReg = service.getHandlerRegistry();
List hChain = hndlReg.getHandlerChain(new QName("http://test.com","<<Port Name>>")); 
```

但我没有`hChain`包含有关 A、B 或 C 的信息。是的，在这里我可以以编程方式添加处理程序，这些处理程序也被调用，但配置文件中没有已配置处理程序的信息。

有没有办法（以编程方式）获取有关已配置处理程序的详细信息？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-16T10:58:45.323

您可以访问您的 webservices.xml 吗？怎么解析呢？

# c++ - 在 void C/C++ 例程的末尾添加 return 语句有什么意义？

> ID：649855
> 
> 赞同：5
> 
> 时间：2009-03-16T10:22:06.067
> 
> 标签：c++, c

我在签名中看到带有 void return 的函数/方法，在函数末尾有一个 return 语句。这是什么原因，这是否适用于其他语言？

据我所知，如果我想退出函数末尾以外的任何地方，我可以使用 return。

交流示例：

```
void function(void)
{
   int x = 1 + 2;

   return;    // what do we need this for, if at all?
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-03-16T10:31:35.063

这在这里似乎毫无意义。但我的猜测是，这种东西可用于在不支持在右括号处放置断点的 IDE 中放置断点，通过在此处放置断点，可以在监视窗口等中检查某些值。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2009-03-16T10:35:58.687

有人从字面上理解了“一个函数必须有一个返回”的编码准则。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-03-16T13:39:43.347

对于返回 void 的函数，这无关紧要，因为 void 函数的“落下”只是按照您的预期返回。

但是，有些人喜欢这样做以帮助将来进行维护。例如，如果有人后来决定将函数的返回类型更改为 int，那么如果您忘记更改最终的 return 语句以使其返回 int 值，您应该会收到编译器错误。如果您根本没有返回语句，则返回值是未定义的，并且许多较旧的编译器不会警告您（这是真的 - 我已经看到了！）。现在这不是什么大问题，因为大多数现代编译器都会警告这些事情。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-03-16T11:09:15.317

我总是在我的函数末尾包含一个 return 语句，即使它们没有返回任何东西。我最初的原因是我很明确，函数在哪里结束没有歧义，我总是对“走完”的函数感到厌烦。后来，这只是一种习惯，很难打破（如果我愿意的话）。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-03-16T10:25:33.110

正如您自己提到的，如果您想在最后一条语句之前退出函数，则只需要 return 语句。在给定的示例中，return 语句没有任何用途。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-03-16T10:30:57.153

这确实毫无意义……至少对编译器而言，但在风格上，就像 C++ 中的许多东西一样。一个例子：

```
int main ()
{
   DoSomething ();
   return 0;
} 
```

在 C++ 中，就符合标准的编译器而言，返回 0 完全没有意义。然而，有时人们更喜欢包含多余或无意义的陈述，只是为了明确。我会犹豫将这些事情归咎于程序员的无知。它只是风格，如果你喜欢它，可以随意摆脱它。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-03-16T10:32:49.490

它在 C/C++ 中没有用，只会降低可读性。

一个需要这样做的真实语言示例是汇编程序。但是在汇编程序中，return 语句不是语言的一部分。相反，您必须调用导致控制权返回的特殊指令（x86 中的 ret）。除非你这样做，否则执行只会继续，接下来会发生什么取决于可能的因素，包括运气和月相。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-03-16T10:26:31.657

我的猜测是因为函数用于返回一些值，而程序员可能认为它会再次返回。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-04-11T04:53:36.580

我认为你*不需要*它，但你可以*拥有*它。尝试将其取出并再次运行该程序。看看有什么区别。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-05-06T01:09:10.730

一些编译器可以根据返回语句优化代码。
[“只要逻辑允许，就使用 Return 语句。有关更多信息，请参阅 Return 语句。编译器可以比使用 Exit Function、Exit Property 或 Exit Sub 更好地优化代码，或者允许 End Function、End Get、End设置或结束子语句以生成返回"](http://msdn.microsoft.com/en-us/library/aa289513(VS.71).aspx#vbtchperfoptanchor5)

# c# - 这里正确的 C# lambda 语法是什么？

> ID：649858
> 
> 赞同：2
> 
> 时间：2009-03-16T10:22:42.167
> 
> 标签：c#, lambda

我正在尝试使用 lambda 语法来在运行时换出搜索规则引擎。

在下面的示例中，**我需要什么语法才能**将方法名称传递给我的 GetSearchResults 方法，以便 GetSearchResults 方法可以使用适当的逻辑来决定返回哪些结果？

```
string searchRulesMethodName = "SearchRules1(entry)";
var results = GetSearchResults(p => searchRulesMethodName); 
```

这是完整的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace TestLambda2
{
    class Program
    {
        static void Main(string[] args)
        {
            string searchRulesMethodName = "SearchRules1(entry)";
            var results = GetSearchResults(p => searchRulesMethodName);
            foreach (string entry in results)
            {
                Console.WriteLine(entry);
            }
            Console.ReadLine();
        }

        //only returns some entries
        public static bool SearchRules1(string entry)
        {
            if (entry == "one" || entry == "two") return true;
            return false;
        }

        //returns all entries
        public static bool SearchRules2(string entry)
        {
            return true;
        }

        public static List<string> GetSearchResults(Predicate<string> p)
        {
            string[] allEntries = { "one", "two", "three", "four", "five", "six", "seven" };
            List<string> results = new List<string>();
            foreach (string entry in allEntries)
            {
                if (p.Invoke(entry))
                {
                    results.Add(entry);
                }
            }
            return results;
        }

    }
} 
```

## 回答：

谢谢马克，这正是我想做的。使用反射还解决了“我如何告诉它属性签名”的问题：

```
static void Main(string[] args)
{
    string searchRulesMethodName = "SearchRules2";
    Predicate<string> predicate = (Predicate<string>) Delegate.CreateDelegate(typeof(Predicate<string>),
        typeof(Program).GetMethod(searchRulesMethodName));
    var results = GetSearchResults(predicate);

    foreach (string entry in results)
    {
        Console.WriteLine(entry);
    }
    Console.ReadLine();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-16T10:28:14.477

要使用字符串，您必须使用反射来获取委托；

```
string searchRulesMethodName = "SearchRules1";
Predicate<string> predicate = (Predicate<string>)
    Delegate.CreateDelegate(typeof(Predicate<string>),
        typeof(Program).GetMethod(searchRulesMethodName));
var results = GetSearchResults(predicate); 
```

当然，`switch`如果您在编译时知道所有选项， a 会更快更安全！

```
Predicate<string> predicate;
switch (searchRulesMethodName) {
    case "SearchRules1": predicate = SearchRules1; break;
    case "SearchRules2": predicate = SearchRules2; break;
    default: throw new InvalidOperationException("Unknown filter: "
        + searchRulesMethodName);
}
var results = GetSearchResults(predicate); 
```

# html - 网站蜘蛛/机器人删除文件名中的空格

> ID：649863
> 
> 赞同：2
> 
> 时间：2009-03-16T10:24:30.197
> 
> 标签：html

某些蜘蛛/机器人是否会从文件名中删除空格，因此是否应在网站中避免文件名中的空格？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-16T10:28:20.750

我认为您通常应该避免网站文件名中的空格并使用其他一些方法，例如

```
ThisIsAnExample
This_is_an_example 
```

您永远不知道哪些软件、脚本或服务器必须处理您的文件名，以及这是否会导致错误。此外，使用您网站的人可能不喜欢处理包含以下内容的 URL

```
This%20is%20an%20example 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-16T10:28:57.643

我曾经了解到我应该避免混合大写和小写以及特殊字符（仅使用 ASCII）和空格。由于在 URL 中它们可能需要转义 - 难以手动输入（用于测试）并且可能会被监督。

您可能还会遇到一些奇怪的机器人无法正常工作的问题，但我不知道有一个。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-16T10:34:18.957

我同意 schnaader - 如果可能的话，绝对避免使用空格。它将帮助您避免讨厌的 URL 编码问题，例如[这个](http://www.pointy-stick.com/blog/2009/02/02/url-encoding-trap/)。

也就是说，有时您仍然需要使用它们。只是意识到您可能需要做一些额外的工作来帮助使用古怪浏览器的访问者。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-16T10:31:21.507

我不知道机器人的确切行为，但我想大多数（如果不是全部）应该能够处理网站文件名中的空格。

也就是说，最佳实践建议不要在网络上的文件名中使用空格。与几年前浏览器仍然区分空格和 %20 时相比，现在这个问题已经不那么重要了，但是遵循这个约定并没有什么坏处。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-16T10:40:53.650

请记住，对于使用“_”或“-”的机器人很重要。

即 Google 将破折号视为单词分隔符，因此 url “archived-articles”将被视为 2 个单词，而“archived_articles”将被视为 1。

# asp.net - 如何为我的 SharePoint 网站创建到 SQL Server 数据库的全局连接字符串

> ID：649871
> 
> 赞同：2
> 
> 时间：2009-03-16T10:26:59.083
> 
> 标签：asp.net, sharepoint, iis, sharepoint-2007, web-config

这是我的 SharePoint 网站的 web.config 中的连接字符串。它位于关闭 SharePoint 标记的正下方。

```
<connectionStrings>
    <add name="SAMRASConnectionString" connectionString="Data Source=JOHANDEVVM;
        Initial Catalog=samrasDB; User ID=Johan; Password=password; Trusted_Connection=True"
        providerName="System.Data.SqlClient"  />
</connectionStrings> 
```

我必须将它放在哪里才能获得全局连接字符串。

原因是：当我转到我的 IIS 站点属性 -> ASP.NET 选项卡 -> 编辑全局配置然后连接字符串不存在，它仅由编辑配置。

我需要它在那里才能从其他客户端计算机访问它。我需要在我的 web.config 文件中更改它，并且不想在服务器上手动添加它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-04T04:34:03.153

如果您有权访问它，请在 Machine.Config 中添加 connectionString。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-03-16T20:59:48.453

您可以在功能接收器中使用 SPWebConfigModification 将 web.config 修改添加到场中的所有服务器。

[http://www.crsw.com/mark/Lists/Posts/Post.aspx?ID=32](http://www.crsw.com/mark/Lists/Posts/Post.aspx?ID=32)

# iphone - 如何以编程方式在 iPhone 中获取特定格式短信的正文？

> ID：649879
> 
> 赞同：2
> 
> 时间：2009-03-16T10:30:51.383
> 
> 标签：iphone, sms

1.  我正在寻找一个 API 或任何其他方式，通过它我可以从 iPhone INBOX 读取 SMS。实际上，我正在尝试开发一个应用程序，该应用程序将从 iPhone INBOX 中读取特定标记的 SMS，并在用户运行该应用程序时显示给用户。

2.  任何人都知道..如何在 iPhone 上制作应用程序自己的内部文件夹？如果是，那么如何将特定的 SMS 存储到该位置并在我的应用程序打开时读取？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-16T22:27:05.793

通过 iPhone SDK 无法做到这一点。沙盒应用程序无权访问 SMS 数据库。

如果您有越狱手机，SMS 将存储在 SQLite 数据库中，该数据库位于手机上的 /var/root/Library/SMS/sms.db 中。

# c++ - 你怎么能打破句柄创建？

> ID：649886
> 
> 赞同：0
> 
> 时间：2009-03-16T10:33:34.263
> 
> 标签：c++, file, process, handles

我有一个产生多个子进程的应用程序。在启动子程序之前，我为日志文件创建 stdOut 和 stdErr 句柄（例如，如果我要启动 procA，我创建 logA.log 的句柄）。我在子进程上设置了这些句柄。

通过查看 ProcExplorer，我可以看到*每个*子进程都有*每个*日志文件的句柄（因此 procA 有 logA、logB 等的句柄）。这会产生以后的问题。

我希望能够看到 procA 何时创建 logB 的句柄。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-16T10:41:49.733

一种可能的解决方案是文件句柄在任何子进程之间共享，因为它们是由父进程创建的。

这是我能看到的唯一解决方案，因为如果您设计为只有一个 var 来处理它，我看不出如何在每个子进程中拥有多个句柄（每个日志文件一个）。

为什么不在子进程中创建句柄？我知道它确实对这个问题做出了昂贵的回应，但显然如果 procA 只需要 logA 的句柄，那么在子进程 procA 中创建 logA 的句柄会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-16T16:38:49.733

当子进程 procA 创建 logB 的句柄时，您是否在问如何闯入调试器？我假设您使用的是 Windows，因为您提到了 Process Explorer。

一种方法是使用[`Image File Execution Options`](http://msdn.microsoft.com/en-us/library/a329t4ed.aspx)注册表项来指定每次`procA.exe`启动时，您要启动调试器。当调试器启动时，您可以在创建 logB 句柄的代码中设置断点，然后让进程继续。这适用于任何调试器（如 WinDbg 或 ntsd，或分析工具如 AQTime），而不仅仅是 Visual Studio。

另一种方法是告诉调试器附加到所有子进程。有几种方法可以[使用 WinDbg 或 ntsd 启用此行为](http://msdn.microsoft.com/en-us/library/cc266362.aspx)。这样，您将调试器附加到父进程，它会自动附加到子进程 procA，您可以在适当的代码中设置断点。

另一种方法是在[`DebugBreak()`](http://msdn.microsoft.com/en-us/library/ms679297.aspx)创建 logB 句柄时使用该函数临时修改代码以生成断点异常，然后使用即时调试附加调试器。请注意，如果您的代码在没有异常过滤器表达式的情况下处理结构化异常（这是一个坏主意），这将不起作用，并且可能会产生令人惊讶的结果（死锁、内存泄漏等）。

# c# - 查找光标位置

> ID：649889
> 
> 赞同：1
> 
> 时间：2009-03-16T10:34:44.337
> 
> 标签：c#

如果我正在运行我的应用程序，我想知道鼠标指针的位置（无论是否在应用程序中），我的意思是位置。假设如果鼠标位于应用程序中，那么我想引发一个事件，如果鼠标在我的应用程序中，那么我只想引发一个事件，而不是如果我在任何其他子窗口或任何其他形式中，它应该在任何时候引发事件鼠标指针离开我的应用程序以及光标进入我的应用程序......

怎么用win32就可以了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-16T10:41:28.220

您可以捕获窗体和控件上的[MouseEnter](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.mouseenter.aspx)和[MouseLeave](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.mouseleave.aspx)事件，以便在鼠标移到（或移出）窗体时执行所需的任何操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-16T10:40:52.683

Win32 函数 GetCursorPos 可以为您提供光标的确切位置，而与窗口无关。我不知道 .NET 替代方案，但您始终可以从 C# 到 System.Runtime.InteropServices.DllImport 使用 win32 方法。

# c# - 检测应用程序的启动

> ID：649900
> 
> 赞同：13
> 
> 时间：2009-03-16T10:39:13.437
> 
> 标签：c#, c++, windows

如何在 Windows 上使用 C# 检测启动外部应用程序的那一刻？

我尝试了 FilesystemWatcher，它不起作用，因为文件并没有真正改变。还有一个计时器不断检查所有打开的进程可能有点过头了。有没有其他方法可以做到这一点？如果不是在 C# 中，是否可以在 C++ 中这样做（如果是，请给我一个例子）。

我想这样做的原因是为了记录目的。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-03-16T10:56:48.730

您可以使用[System.Management](http://msdn.microsoft.com/en-us/library/system.management.aspx)和[WMI（Windows 管理规范）](http://fr.wikipedia.org/wiki/Windows_Management_Instrumentation)

```
class WMIEvent {
    public static void Main() {
        WMIEvent we = new WMIEvent();
        ManagementEventWatcher w= null;
        WqlEventQuery q;
        try {
            q = new WqlEventQuery();
            q.EventClassName = "Win32_ProcessStartTrace";
            w = new ManagementEventWatcher(q);
            w.EventArrived += new EventArrivedEventHandler(we.ProcessStartEventArrived);
            w.Start();
            Console.ReadLine(); // block main thread for test purposes
        }
        finally {
            w.Stop();
        }
 }

    public void ProcessStartEventArrived(object sender, EventArrivedEventArgs e) {    
        foreach(PropertyData pd in e.NewEvent.Properties) {
            Console.WriteLine("\n============================= =========");
            Console.WriteLine("{0},{1},{2}",pd.Name, pd.Type, pd.Value);
        }
  } 
```

# sql - 使用记录集从数据库中提取价值的更优雅的解决方案

> ID：649905
> 
> 赞同：2
> 
> 时间：2009-03-16T10:41:29.530
> 
> 标签：sql, vb6, select

以下代码片段是否有更好的解决方案（使用更少的代码）。这是我发现自己在 VB6 中做了很多的事情，并希望能减少它。

据我了解，Connection.Execute 不起作用

```
 SQL = "SELECT SomeID FROM TableA"
    RecordSet.Open SQL, Connection, adOpenStatic, adLockOptimistic, adCmdText
    SomeID = RecordSet.Fields(0).Value
    RecordSet.Close

    SQL = "SELECT AnotherID FROM TableB"
    RecordSet.Open SQL, Connection, adOpenStatic, adLockOptimistic, adCmdText
    AnotherID = RecordSet.Fields(0).Value
    RecordSet.Close 
```

这不是一个功能问题，只是想看看是否有更整洁的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-16T10:52:53.607

`RecordSet.Open()`和的默认参数`Connection.Execute()`是：

*   adOpenForwardOnly
*   adLockReadOnly

您使用不同的设置，但在您的情况下没有明显的理由不使用默认设置。

我不知道你为什么认为这`Connection.Execute()`不起作用，特别是因为你似乎有静态 SQL：

```
Function FetchOneField(Connection, SQL)
  With Connection.Execute(SQL)
    FetchOneField = .Fields(0).Value
    .Close
  End With
End Function

SomeID    = FetchOneField(Connection, "SELECT SomeID FROM TableA")
AnotherID = FetchOneField(Connection, "SELECT AnotherID FROM TableB")

' or, not expressed as a function (not less lines, but "tidier" nevertheless)'
With Connection.Execute("SELECT SomeID FROM TableA")
  SomeID = .Fields(0).Value
  .Close
End With 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-16T12:36:12.533

假设您每个查询有 1 条记录，您可以这样做

```
SQL = "SELECT TableA.SomeID, TableB.AnotherID FROM TableA, TableB"
RecordSet.Open SQL, Connection, adOpenStatic, adLockOptimistic, adCmdText
SomeID = RecordSet.Fields(0).Value
AnotherID = RecordSet.Fields(1).Value
RecordSet.Close 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-16T13:28:39.363

`Connection.Execute` *应该*工作。这对我有用：

```
 Const Sql1 As String = "SELECT SomeID FROM TableA"
  SomeID = Connection.Execute(Sql1)(0).Value

  Const Sql2 As String = "SELECT AnotherID FROM TableB"
  AnotherID = Connection.Execute(Sql2)(0).Value 
```

...虽然我个人会封装那些`Connection.Execute`我可以明确地从连接池等释放连接的行。

# java - 班级设计

> ID：649909
> 
> 赞同：3
> 
> 时间：2009-03-16T10:42:41.743
> 
> 标签：java, coupling, cohesion

我正在制作的游戏有 2 个课程，

gui 类和 logic 类，用于三分球游戏。GUI 类有一个使用 JButtons 数组的方法，并使用相同的匿名内部类动作侦听器将它们全部返回

问题是这样的，当我单击按钮时，我希望文本更改为取决于播放器 1 或 2 的 x 或 ao，但是这段代码应该在逻辑类中，不应该这样，所以我应该在逻辑类并从 make 按钮方法的匿名内部类动作侦听器调用它。但是，逻辑类不应该有对 gui 的引用，因为 gui 有对逻辑类的引用，

我想不出一个体面的解决方案

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-16T11:09:53.783

考虑下面的类草图：

```
public class Game{
    public void switchPlayer(){
        // among other things calls all GameListeners
    }
    public void setMarker(int x, int y);

    public Player getCurrentPlayer();
    public Player getPlayerOwningField(int x, int y);

    public void registerGameListener(GameListener l);
}

public interface GameListener(){
    void gameChanged(Game g)
}

public class GUI implements GameListener(){
    private Game game;
} 
```

单击字段时，将调用 game.setMarker(x,y)。游戏知道当前玩家是谁，因此它可以适当地标记该字段。它还将触发 GameChanged 事件。在应用程序设置期间，gui 必须注册/注册为游戏的 GameListener。所以它也会得到通知。它使用游戏的 getter 来更新 gui。完毕。

当然还有很大的改进空间，例如在大型游戏中，仅仅因为一个字段发生变化而更新完整的 UI 并不是一个好主意，但它应该能让你开始

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-16T10:44:36.637

也许使用一个事件。因此，您可以在逻辑计算的 GUI 方面做出反应，并按照命令进行操作；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-16T11:04:49.630

使用同一个实例作为多个按钮的动作监听器几乎肯定是个坏主意。使用按钮位置参数化的同一实现类的单独实例。然后，侦听器可以使用适合模型的接口调用模型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-16T11:07:14.103

如果您的重点是设计（这听起来像是家庭作业），您可以尝试[MVC (Model-View-Controller)](http://en.wikipedia.org/wiki/Model-view-controller)。

在这种情况下，

```
model = game logic, rules (fire events when things change)
  gui = (in this case and many swing apps) is both view and controller. Manipulates the model (control) and the model fires events back to update the widgets (view) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-16T11:09:12.087

我不认为双向引用（GUI 有模型的引用，反之亦然）应该是一个问题。我认为您正在寻找的是 MVC（模型-视图-控制器）方法。我不知道您使用哪种编程语言来编写该游戏以及是否应用这种方法在这种情况下可能是一种开销。我用 Java 编写了一个 MVC 方法的小演示：http: [//blog.js-development.com/2008/03/logical-separation-with-mvc.html](http://blog.js-development.com/2008/03/logical-separation-with-mvc.html)

也许它对你有帮助，让我知道。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-16T11:09:47.373

当按钮点击发生时，您的 GUI 调用逻辑通知它当前玩家（逻辑知道当前玩家）在某处点击了网格。然后逻辑更新状态（更新网格，更新当前播放器，...）并将事件发送回 GUI 以通知 GUI 它必须更新自身。

GUI“知道”调用操作的逻辑。为了避免逻辑不知道 GUI 并有良好的关注点分离，逻辑应该通过观​​察者模式耦合到 GUI，而不是直接调用 GUI 的逻辑。GUI 监听来自逻辑的事件。然后逻辑仅动态耦合到 GUI，这不是问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-16T11:12:35.183

您可以应用[MVC](http://en.wikipedia.org/wiki/Model-view-controller)模式。

UI 类（Controller）将消息发送到 Logic 类（Model），后者将更新 View（Class）。你需要定义这个。它可以像一个布尔值数组一样简单。

UI 代码必须读取 View 类才能更改按钮中的文本。因此，当 View 发生变化时，您需要向 UI 类发送“无效”消息，以便更新按钮文本。

这里的关键点是 UI 代码参考 View 对象来呈现按钮。UI 类读取这个对象，逻辑类编写它是完全正确的。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2009-03-16T11:10:07.293

将事件标志保存在数据库或某事中。像这样在你的 gui 中查询这个标志就像异步一样工作。事件

# c# - 如何自定义 WCF XML 序列化

> ID：649913
> 
> 赞同：8
> 
> 时间：2009-03-16T10:44:12.770
> 
> 标签：c#, xml, wcf, serialization, xml-serialization

我们有一个现有的 SOAP Web 服务接口，我们希望使用 WCF 为新应用程序实现该接口。除了一个小细节外，这似乎工作正常。函数返回类型的 XML 命名空间必须不同于 Web 服务本身的 XML 命名空间。对于我的一生，我无法让它发挥作用。

我用一个小示例项目重新创建了同样的问题。WCF 接口：

```
[XmlSerializerFormat]
[ServiceContract(Namespace = "urn:outer-namespace")]
public interface IService1
{
    [OperationContract]
    MyClass DoStuff(int value);
}

[Serializable]
public class MyClass
{
    [XmlElement(ElementName = "DataString")]
    public string MyString { get; set; }
} 
```

网络服务实现：

```
 public class Service1 : IService1
{
    public MyClass DoStuff(int value)
    {
        return new MyClass { MyString = "Wooh!" };
    }
} 
```

然后，来自此 Web 服务的响应被序列化为：（省略 SOAP 内容）

```
 <DoStuffResponse xmlns="urn:outer-namespace">
     <DoStuffResult>
        <DataString>Wooh!</DataString>
     </DoStuffResult>
  </DoStuffResponse> 
```

但是我们希望 <DoStuffResult> 是 xmlns="urn:inner-namespace"。

我尝试在接口函数或 Web 服务函数上添加 [return: XmlElement(...)] ，但这并不需要。MyClass 类定义上的 [XmlType] 或 [XmlRoot] 也不起作用。

有谁知道如何更改作为 WCF Web 服务函数返回值的对象的序列化 XML 命名空间（或元素名称）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-03-20T14:49:50.303

经过几天的搜索和尝试数十种推荐的解决方案；我终于能够让 WCF 停止强制将包装容器名称附加`Result`到 Web 服务方法的名称。诀窍是将以下装饰器属性添加到 Web 服务接口：

```
[return:MessageParameter(Name = "whatIWantItNamed")] 
```

此属性应直接放置/定位在`[OperationContract]`接口中的属性之后（并且就在实际方法存根之前）。

（我还需要为`XmlSerializerFormat`所有`ServiceContract`和属性添加一个`OperationContract`属性。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-16T17:10:14.073

使用 XML 序列化（或更好的）数据协定定义属性定义名称空间。

例如使用 XML 序列化：

```
[Serializable, XmlRoot(namespace="http://example.com/eg1")]
public class MyClass {
  [XmlElement(ElementName = "DataString")]
  public string MyString { get; set; }
} 
```

例如，使用数据合同序列化：

```
[DataContract(Namespace="http://example.com/eg2")]
public class MyClass {
  [DataMember]
  public string MyString { get; set; }
} 
```

* * *

编辑

根据第一条评论，上述内容不起作用，因为希望在消息周围的 SOAP 包装器上设置名称空间，而不是在消息本身上。

`OperationContractAttribute`不提供对命名空间的控制，我在方法级别看不到任何其他 WCF 属性。

两种可能性：（1）您可以通过放弃抽象级别并使用消息契约来获得足够的控制权。（2）获取服务当前的WSDL（使用`svcutil.exe`），手动调整得到你想要的命名空间，然后`svcutil.exe`再次使用生成代码，查看生成的代码。

# flash - Actionscript 在一段时间后显示按钮

> ID：649916
> 
> 赞同：0
> 
> 时间：2009-03-16T10:44:33.393
> 
> 标签：flash, actionscript

嗨，我正在将 FLV 加载到空白视频支架中，并希望在视频到达某个点时显示一个按钮。这是可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T14:42:53.957

您可以添加 cuepoint 并通过以下方式监听它们：

```
_Player.AddEventListener(MetadataEvent.CUE_POINT, PlayerCuePoint);

function PlayerCuePoint(e:MetadataEvent):void
{
    _Button.visible = true;
} 
```

或者您可以像这样检查进度：

```
const BUTTON_TIME:Number = 10; //Time in seconds

_Player.AddEventListener(VideoEvent.PLAYHEAD_UPDATE, PlayerPlayheadUpdate);

function PlayerPlayheadUpdate(e:VideoEvent):void
{
    if(_Player.playheadTime >= BUTTON_TIME)
        _Button.visible = true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-16T11:06:54.353

您没有指定正在使用的 actionscript 版本，所以我假设您使用的是 as3。

你可以

1.  使用 flv 中嵌入的提示点（在创建 flv 时添加）
2.  如果您使用的是 FLVPlayer 组件，请使用使用 actionscript 创建的提示点
3.  使用常规[计时器](http://livedocs.adobe.com/flash/9.0/ActionScriptLangRefV3/flash/utils/Timer.html)

如果您无权访问创建 flv 部分，那么最简单（也是最不准确，但我认为显示按钮不需要精确到毫秒级）的解决方案将是第三个. 如果用户无法控制播放（即暂停、倒带）并且视频没有通过网络流式传输，则只需启动/停止播放计时器。如果用户可以暂停和倒带视频，您还必须在每次用户这样做时停止并调整计时器。如果视频是通过网络流式传输的，您还必须考虑任何缓冲暂停。

# javascript - 在页面卸载时完成 jQuery 动画

> ID：649923
> 
> 赞同：1
> 
> 时间：2009-03-16T10:48:37.767
> 
> 标签：javascript, jquery

有没有办法在用户通过单击链接或单击后退/前进按钮离开页面之前执行 jQuery 动画。

似乎为响应卸载事件而制作动画肯定会涵盖用户可能离开页面的所有条件。

但是，新页面会在动画完成之前加载。我可以做一个忙碌的等待，但这不是很优雅。

或者，我可以拦截对锚点的点击。但这并没有考虑后退/前进点击以及用户可能会离开页面的其他条件。

是的，我知道这种行为是不受欢迎的，因为它会让用户等待。但是，我正试图在一个非常特殊的情况下这样做，我认为在这种情况下利大于弊。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2011-10-19T09:52:54.003

文档的 onbeforeunload 事件不适合问题的要求。

与正常的 UI 事件（根据 @ajm 的回答）相反，返回布尔值对此事件没有影响。返回 false 不会阻止导航，也不能通过`preventDefault`.

浏览器将执行此事件处理程序，因此在其中运行的任何同步代码实际上都会延迟页面切换，但是执行任何异步操作（例如 jQuery 动画）是不可能的，并且将被简单地忽略（大多数情况下），因为一旦函数结束，页面及其 JS 上下文在下一页导航开始时停止。

此事件处理程序的唯一返回值是一个字符串，浏览器使用该字符串作为确认消息的一部分显示，询问用户他们是喜欢留下还是离开。（而且没有办法强迫他们做出选择。）

另请参阅[window.onbeforeunload 上的 MDN 文档](https://developer.mozilla.org/en/DOM/window.onbeforeunload)。（注意，Firefox 4 中有一个错误。）

* * *

而是着眼于一个实际的目标——假设我们想在页面导航之间显示一个动画。有几种可能性，每个都有大量专门的 StackOverflow 问题和互联网上的教程：

*   使用 AJAX 加载内容

    每当单击内部链接时，使加载程序图标可见，启动对其他页面内容的 AJAX 请求。同时仍然显示旧内容，最好继续显示顶部有一个微调器，然后显示一个只有微调器的空白页面。在 ajax-callback 中，在内容元素上制作精美的动画（例如 jQuery slideUp()），然后将内容与新内容交换，隐藏微调器，然后制作下一个精美的动画（例如 jQuery slideDown()）。

*   劫持锚标签并手动重定向

    完全使用 AJAX 很好，但如果您不想这样做，您也可以尝试解决 onbeforeunload 限制：不要延迟 onbeforeunload，而是首先确保不会触发该事件。将委托事件绑定到页面上的所有锚标签并防止默认（或返回 false），导致浏览器不跟随链接。然后做你喜欢的动画，并在回调中通过将 window.location 设置为单击的锚标记的 href 属性中的 url 来手动进行导航。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-16T10:56:14.550

用户使用他/她的浏览器切换网页的速度不受您的控制，而只是您页面中的功能。

使用新的[jQuery 1.3 live() 事件侦听](http://docs.jquery.com/Events/live)器，您可以按照您的建议将侦听器添加到所有锚点，即使是在声明侦听器后创建的所有新锚点：

```
$("a").live("click", function(){
  var href = $(this).attr("href");

  var animDuration = 1000;

  // Do animation here; duration = animDuration.

  setTimeout(function () {
    window.location = href;
  }, animDuration);

  return false; // prevent user navigation away until animation's finished
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-16T19:52:48.160

您只需要为 Document 的 onbeforeunload 事件订阅一个侦听器，该事件在用户离开页面时触发。

onbeforeunload 会阻止页面导航，直到您的代码返回一个布尔值（true 表示导航，false 表示烦人的阻止导航），因此您只需要动画代码在完成时最终引发一个布尔值。

根本不需要监控链接。

# javascript - ASP.NET MVC 相对路径而不破坏 JavaScript IntelliSense？

> ID：649925
> 
> 赞同：1
> 
> 时间：2009-03-16T10:49:50.727
> 
> 标签：javascript, asp.net-mvc, intellisense

将脚本添加到视图通常涉及以下内容：

```
<script src="../../Scripts/jquery-1.3.1.min.js" type="text/javascript"></script> 
```

不幸的是，如果应用程序部署在 IIS 6 下的虚拟目录中，这将不起作用。[此处](https://stackoverflow.com/questions/317315/asp-net-mvc-relative-paths)讨论的替代方法涉及使用带有“~”的 Url.Content 来动态解析路径，但这完全破坏了 JS IntelliSense。

有没有办法解决这个问题并让 IntelliSense 工作而不会失去在虚拟目录中部署应用程序的能力？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-16T11:00:44.290

对于部署代码，您可以使用 google ajax apis 来加载 JQuery。推荐它，因为由于使用了 google CDN，它有助于页面加载时间。

要获得智能感知，请将其添加到您的页面

```
<% if(false){ %>
    <script src="../../Scripts/jquery-1.3.1.min.js" type="text/javascript"></script>
<%}%> 
```

这不会发出，因为它在 if(false) 内，但智能感知会识别它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-16T17:57:57.797

我使用这样的东西：

```
 <script src="<%= ResolveUrl("~/Content/jquery-1.2.6.js") %>" type="text/javascript"></script>   

   <%--<script src="../../Content/jquery-1.2.6.js" type="text/javascript"></script>--%> 
```

然后，当您想使用智能感知时，您必须取消注释第二个参考。这很烦人，但我遇到的唯一解决方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-27T00:52:16.770

查看[Visual Web Developer Team Blog](http://blogs.msdn.com/webdevtools/default.aspx)上的[JScript IntelliSense 常见问题解答](http://blogs.msdn.com/webdevtools/archive/2008/11/18/jscript-intellisense-faq.aspx)。评论还提到了 Srully 的伎俩。`if(false)`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-05T19:52:21.673

在 VS2010 中，在虚拟文件夹/目录中引用 "*vsdoc.js 文件并让 Intellisense 在视图中正常工作而不使用 CDN 的一种方法是在地址中简单地使用 localhost。在集中脚本时，虚拟目录是必不可少的和多个 Web 应用程序的内容文件。在下面的示例中，我在 IIS 7.5 中创建了“共享”虚拟目录。希望这对某人有所帮助。

```
@if (false)
{
   <script src="http://localhost/Shared/jQuery/js/jquery-1.7.2-vsdoc.js" type="text/javascript"></script>
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-02-16T11:23:22.707

我创建了一个 HtmlHelper 扩展（PathReference 是 ReSharper 的 JetBrains.Annotations 属性，可以省略）：

```
public static class HtmlHelperExtensions
{
    public static MvcHtmlString Script(this HtmlHelper html, [PathReference]string scriptFile)
    {
        var filePath = VirtualPathUtility.ToAbsolute(scriptFile);
        return new MvcHtmlString("<script type=\"text/javascript\" src=\"" + filePath + "\"></script>");
    }
} 
```

然后我在我的母版页中这样做

```
<%
    if (false)
    {
%>
    <script src="../../Scripts/jquery-ui-1.8.9.custom.min.js" type="text/javascript"></script&gt;
<%
    }
%>
<%:Html.Script("~/Scripts/jquery-ui-1.8.9.custom.min.js")%> 
```

我现在拥有智能感知和正确的运行时引用。

（感谢 Sruly 的`if(false)`技巧）

# javascript - 调试 JavaScript REPL 样式？

> ID：649927
> 
> 赞同：52
> 
> 时间：2009-03-16T10:49:59.027
> 
> 标签：javascript, debugging

是否有任何类型的 JavaScript 交互式调试器？我想像左边是网页，右边是 REPL 界面。

或者甚至没有网页，所以我可以玩转 JavaScript 语言。

不需要我在 Firebug 或 VS 中使用断点刷新网页来检查本地变量并将代码输入到 Watch 窗口中。也许我只需要更好地学习 Firebug？

毕竟，JavaScript 不必*编译。*

有点像 LinqPad，但可能是 JavaScript？

有人跟我来这里吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2011-07-23T04:50:22.210

Node.js 有一个 REPL。

在 Mac OS X 上：

```
brew install node
node 
```

.exit 退出 repl，.help 用于其他选项

[http://nodejs.org/docs/v0.3.1/api/repl.html](http://nodejs.org/docs/v0.3.1/api/repl.html)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2009-03-16T11:03:28.760

独立 REPL（没有浏览器/DOM，只有 JavaScript）：来自[Rhino](http://www.mozilla.org/rhino/)项目的[JavaScript Shell 。](https://developer.mozilla.org/en/Rhino_Shell)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-03-16T16:44:17.460

对我来说，最方便的 JavaScript 调试器和 REPL 是[Mozrepl](http://wiki.github.com/bard/mozrepl)。它是一个 Firefox/XULRunner 扩展，使用 telnet 访问浏览器/应用程序实例，可以观察和操作浏览器中的一切；甚至浏览器本身（记住，总是在谈论 Firefox）。

它作为调试器非常有用（在独立的 XUL 应用程序上，它是进行真正调试的唯一可以忍受的方式），作为一个玩弄和了解应用程序内部内容的工具，它可以将您的 Javascript 开发时间缩短十倍。

有关可能性的令人印象深刻的演示，请查看[此视频](http://hyperstruct.net/files/mozrepl.swf)。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2010-05-12T21:22:28.153

页面底部[雄辩的 javascript 控制台似乎是您正在寻找的。](http://eloquentjavascript.net/chapter1.html)只需单击**控制台**标签，就会出现一个滑动控制台。

> 为了让你尝试程序，包括示例和你自己编写的代码，本书使用了一个叫做控制台的东西。如果您使用现代图形浏览器（Internet Explorer 6 或更高版本、Firefox 1.5 或更高版本、Opera 9 或更高版本、Safari 3 或更高版本），本书中的页面将在屏幕底部显示一个栏。您可以通过单击此栏最右侧的小箭头来打开控制台。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2010-06-18T09:24:04.733

Google Chrome 有一个非常好的内置 Javascript 控制台，具有出色的调试和性能分析功能。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2010-06-12T15:52:48.340

只是为了提供另一种选择，请在[此处](https://www.squarefree.com/bookmarklets/webdevel.html)查看 shell 小书签。多年来，我一直在使用它来针对当前加载的网页运行 JavaScript。

Firebug 控制台可能功能更丰富一些，所以我不确定是否有任何令人信服的理由来使用它，但在极少数情况下它可能是一个有用的工具。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2009-03-16T10:54:08.097

我一直在使用[FireBug](http://getfirebug.com/index.html)，我不知道它是否正是您需要的，但我喜欢通过它调试 JavaScript。

因为您可以将变量打印到自己的控制台而不必总是这样做`alert(var);`，所以您可以这样做`console.log(var)`

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2009-03-16T10:53:22.873

Safari 4 beta 在错误控制台（在“开发”菜单中）具有此功能。它特别酷，因为当它返回一个对象或 HTML 节点时，它可以让你用一个小的显示箭头深入研究它，显示它的成员、内容等。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2009-03-16T10:54:28.423

我为此使用了萤火虫控制台窗口。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2011-07-20T14:47:36.193

我在线使用 JSFiddle (http://jsfiddle.net/) 或在 linux 终端中使用种子 (http://live.gnome.org/Seed)

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2014-07-30T22:00:20.507

如果您使用的是 Mac，OSX 包括`jsc`. 没有新的安装，只需设置一个链接：

`ln -s /System/Library/Frameworks/JavaScriptCore.framework/Versions/Current/Resources/jsc /usr/local/bin/jsc`

现在您可以`jsc`从终端开始。键入`quit()`或`CTRL``C`退出。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2009-03-16T10:54:48.937

使用 Firebug 的命令行 API 的指南在这里：[链接。](http://michaelsync.net/2007/09/15/firebug-tutorial-commandline-api)

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2012-03-28T05:09:12.457

[基于 windows Script Host 的 Javascript REPL。](http://kobyk.wordpress.com/2007/09/14/a-jscript-interactive-interpreter-shell-for-the-windows-script-host/)

[此外， REPL 和 emacs 之间](http://emacswiki.org/emacs/JavascriptShell)也有很好的集成。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2014-06-28T14:04:55.717

[repl.it](http://repl.it/languages/JavaScript)支持多种语言的 REPL，包括 JavaScript，或者您可以尝试[Codeacademy Labs](http://labs.codecademy.com/)它也有 JavaScript REPL

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2015-01-15T08:49:58.043

[LightTable](http://lighttable.com)允许您输入代码并运行它，并内联显示结果。

像这样：

![在此处输入图像描述](https://i.stack.imgur.com/rDueW.png)

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2015-10-14T22:16:08.070

[Mancy](https://github.com/princejwesley/Mancy)是一个开源的跨平台 JavaScript REPL 应用程序。它基于电子和反应框架。

一些简洁的功能：

*   语法高亮
*   深色和浅色主题
*   导入/导出命令历史
*   用于异步 stdout/stderr 日志的单独控制台窗口
*   异步控制台日志通知
*   控制台输出过滤器支持
*   带有折叠/展开选项的可遍历输出
*   支持将目录添加到节点路径
*   展开/折叠/重新加载命令选项
*   历史遍历支持
*   多窗口
*   使用 shift + enter 支持多行提示
*   自动建议
*   制表符补全
*   代码格式支持
*   支持切换 REPL 模式
*   主题和 REPL 模式的首选项

[![在此处输入图像描述](https://i.stack.imgur.com/9ui8o.png)](https://i.stack.imgur.com/9ui8o.png)

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2011-01-07T17:28:14.460

对于 Chrome 你可以使用 jsshell - 不错的控制台：

[https://chrome.google.com/extensions/detail/kmgmkbicahmbceidoidjbkbpkfogaldh](https://chrome.google.com/extensions/detail/kmgmkbicahmbceidoidjbkbpkfogaldh)

[http://hugoware.net/projects/jsshell](http://hugoware.net/projects/jsshell)

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2011-02-11T18:50:45.643

我通常使用 Chrome 的内置控制台。即使是最新版本的 IE 也有一个不错的开发工具窗口。

JRunscript 非常酷（我很尴尬我不知道它），但我经常遇到的问题是由于 javascript 实现或 DOM 的变化，而不是语言本身。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2015-12-18T14:42:00.633

`osascript`在 OS X 上使用

```
$ osascript -l JavaScript -i 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2012-02-22T00:00:53.510

不完全是 REPL，但在 javascript 中使用不同库的另一个选项是 Google 的 API 游乐场：

[https://code.google.com/apis/ajax/playground/](https://code.google.com/apis/ajax/playground/)

# c# - XPathNodeIterator 在 XPathNavigable 对象数组上？

> ID：649933
> 
> 赞同：0
> 
> 时间：2009-03-16T10:52:08.493
> 
> 标签：c#, xml, xpath, iterator

我有一组 IXpathNavigable 的对象。我想通过 xsl 扩展对象访问数组，所以我可能应该使用 XPathNodeIterator 来做到这一点。但是如何正确创建 NodeIterator 以便它遍历数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-16T17:04:59.813

你得到一个`XPathNodeIterator`from`IXPathNavigator.Select`和相关的方法。

但是，如果您创建自己的实现（子类），`XPathNodeIterator`则可以以您喜欢的任何方式创建它。

# c# - Windows 服务：OnStart 循环 - 我需要委托吗？

> ID：649935
> 
> 赞同：21
> 
> 时间：2009-03-16T10:52:57.773
> 
> 标签：c#, .net, windows-services

我有一个 Windows 服务，它每 n 秒扫描一个文件夹以进行更改。我在尝试启动它时收到“服务没有及时响应启动命令”。

我在 OnStart 中有一个循环设置，如下所示：

```
 public void OnStart(string[] args)
 {
    while (!_shouldExit)
    {
        //Do Stuff

        //Repeat
        Thread.Sleep(_scanIntervalMillis);
    }
 } 
```

这是导致错误的原因吗？我应该委托这个方法吗？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2009-03-16T10:57:12.503

OnStart 应该只**开始**工作；它不负责这样做。这通常意味着产生一个新线程来完成实际工作。预计 OnStart 会迅速完成。例如：

```
 public void OnStart(string[] args) // should this be override?
    {
        var worker = new Thread(DoWork);
        worker.Name = "MyWorker";
        worker.IsBackground = false;
        worker.Start();
    }
    void DoWork()
    {
        // do long-running stuff
    } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-16T10:58:12.160

OnStart 方法不应阻塞。您需要生成一个工作线程来完成这项工作。您还可以查看[FileSystemWatcher](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)类来扫描文件系统更改通知。

# asp.net - 通过服务器端通过按钮命令调用客户端

> ID：649942
> 
> 赞同：0
> 
> 时间：2009-03-16T10:54:53.663
> 
> 标签：asp.net, javascript

我有这样的简单代码......如下......

```
<%@ Page Language="vb" AutoEventWireup="false" CodeBehind="Default.aspx.vb" Inherits="AlinmaWebApp._Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
    <title>Untitled Page</title>
    <style type="text/css">
        #formHt
        {
            height: 284px;
        }
        .DivStyle
        {
            height :250px;
            background-color :Green ;
            display : block;
        }

    </style>

<script language="javascript" type ="text/javascript" >

    function TryClose() {
        document.getElementById("DivBah").style.height = '1px';
        document.getElementById("DivBah").style.display = 'none';
        return;
    }
</script>

</head>
<body onload="TakeIT() return;" >
    <form id="formHt" runat="server">
    <div id="DivBah" class="DivStyle" >
        Just Try if this part will Collapse or not</div>
    <asp:Button ID="Button1" runat="server" Text="Button" OnClick="TryClose()"/>
    </form>
</body>
</html> 
```

这给了我错误消息，例如 =>“TryClose”不是“default_._ASPX”的一部分 这种类型的编码可能出现什么错误？因为我以前总是在简单的 ASP 程序中使用这种类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-16T11:29:49.697

如果您使用的是 vs 2008 (.NET 3.5)，请改用 OnClientClick。

你得到的错误是非常合乎逻辑的。“OnClick”属性用于将处理程序**“服务器端处理程序**”连接到单击事件。因为这些处理程序是服务器端处理程序，VS 查看了映射到您的 aspx 页面的 .vb 文件，没有发现名称为`TryClose()`.

`TryClose()`这是一个客户端功能；为了将其用作“在客户端”上单击事件的处理程序，您需要使用该`OnClientClick`属性将其连接起来。希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-16T11:41:30.557

尝试这个 ：

```
<asp:Button ID="Button1" runat="server" Text="Button" OnClientClick="TryClose()"/> 
```

OnClick 用于服务器端点击事件。

# asp.net-mvc - ASP.NET MVC - 模拟表单请求

> ID：649945
> 
> 赞同：3
> 
> 时间：2009-03-16T10:56:32.333
> 
> 标签：asp.net-mvc, unit-testing

我只是在学习 ASP.NET MVC，并且正在尝试为单元测试创​​建一个模拟表单请求。

我正在使用 RhinoMocks。

我查看了以下网站，但无法让这些网站正常工作。

[http://blog.maartenballiauw.be/post/2008/03/19/ASPNET-MVC-Testing-issues-Q-and-A.aspx](http://blog.maartenballiauw.be/post/2008/03/19/ASPNET-MVC-Testing-issues-Q-and-A.aspx)

更新：控制器代码：

```
 /// <summary>
    /// Creates a new entry
    /// </summary>
    /// <returns></returns>
    [AcceptVerbs(HttpVerbs.Post)]
    public ActionResult Create([Bind()]Person person) 
    {
        if (Request.Form["DateOfBirth"].ToString() == "")
        {
            TempData["message"] = "Please select a date of Birth";
            ViewData["DateOfBirth"] = Request.Form["DateOfBirth"].ToString();

            MvcValidationAdapter.TransferValidationMessagesTo(ViewData.ModelState, person.ValidationMessages);
            return View();
        }
        else
        { 

        if (person.IsValid())
        {
            person.DateOfBirth = Convert.ToDateTime(Request.Form["DateOfBirth"]);

            personRepository.SaveOrUpdate(person);
            TempData["message"] = person.Firstname + " was successfully added";
            return RedirectToAction("Create", "OrderDetails", new { id = person.ID });
        }
        else
        {

            ViewData["DateOfBirth"] = Request.Form["DateOfBirth"].ToString();

            MvcValidationAdapter.TransferValidationMessagesTo(ViewData.ModelState, person.ValidationMessages);
            return View();
        }

        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-16T11:13:52.887

如果您将操作方法​​更改为将 a`FormCollection`作为最终参数，则可以传入一个`FormCollection`包含所有值的实例。实时运行时，MVC 框架将自动从该参数中的表单传入值。

```
public ActionResult MyMethod(FormCollection form)
{
    // in testing you will pass in a populated FormCollection object
    // at runtime the framework will populate the form parameter with
    // the contents of the posted form
} 
```

[这](http://forums.asp.net/t/1313286.aspx)是一个使用它的合理示例。

**编辑**

你有没有试过这个：

```
 /// <summary>
    /// Creates a new entry
    /// </summary>
    /// <returns></returns>
    [AcceptVerbs(HttpVerbs.Post)]
    public ActionResult Create([Bind()]Person person, FormCollection form) 
    {
        if (form["DateOfBirth"].ToString() == "")
        {
            TempData["message"] = "Please select a date of Birth";
            ViewData["DateOfBirth"] = form["DateOfBirth"].ToString();

            MvcValidationAdapter.TransferValidationMessagesTo(
                ViewData.ModelState, person.ValidationMessages);
            return View();
        }
        else
        { 

        if (person.IsValid())
        {
            person.DateOfBirth = Convert.ToDateTime(form["DateOfBirth"]);

            personRepository.SaveOrUpdate(person);
            TempData["message"] = 
                person.Firstname + " was successfully added";
            return RedirectToAction(
                "Create", "OrderDetails", new { id = person.ID });
        }
        else
        {

            ViewData["DateOfBirth"] = form["DateOfBirth"].ToString();

            MvcValidationAdapter.TransferValidationMessagesTo(
                ViewData.ModelState, person.ValidationMessages);
            return View();
        }

        }

    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-04-22T19:42:38.723

您也可以模拟表单，我建议您查看[http://mvccontrib.codeplex.com/](http://mvccontrib.codeplex.com/)：

var form = new NameValueCollection(); form.Add("发布", "true"); _controller.Request.Stub(x => x.Form).IgnoreArguments().Return(form);

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-16T11:36:23.627

除非您正在测试 MVC 本身，否则您不应该主要测试控制器的操作是否使用框架传递的参数做正确的事情吗？

您可能可以通过以下方式模拟更多间接表单访问：

```
controller.ActionInvoker.InvokeAction(ctx); 
```

其中 ctx 是 a `ControllerContext`，带有表单数据等。[这是](https://stackoverflow.com/questions/32640/mocking-asp-net-mvc-controller-context/33798#33798)一个使用 rhino 提供上下文的示例（也显示了 MoQ）。

# visual-studio-2008 - Broken：VS中的查找框从左到右

> ID：649947
> 
> 赞同：1
> 
> 时间：2009-03-16T10:57:04.457
> 
> 标签：visual-studio-2008

今天早上我在 Visual Studio 中按下了错误的键盘快捷键，并设法将查找框的文本方向从右到左翻转到左到右。当然，我不知道如何将其翻转回来。

有谁知道组合键？

[![替代文字](https://i.stack.imgur.com/0eYRS.png)](https://i.stack.imgur.com/0eYRS.png)

谢谢，基思。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-17T10:37:02.373

好吧，这本书中最古老的技巧似乎解决了我的问题：

1.  关闭计算机

2.  打开电脑

# iphone - iPhone - 在流式音频中寻找

> ID：649949
> 
> 赞同：2
> 
> 时间：2009-03-16T10:57:18.137
> 
> 标签：iphone, audio-streaming

如何在 iPhone 上的流式音频中实现搜索（时间线功能）？

AudioFileStreamSeek 方法接受我想要开始搜索的字节偏移量。我希望能够获得正在播放的 mp3 的当前位置，并让用户在稍后的时间点返回（搜索）到相同的位置。

但是我找不到任何知道已经播放的字节数的方法。我可以找出已流式传输的字节数。但无法找出已经播放了多少字节。我使用 Matt Gallagher 的音频流示例作为基础。

任何帮助是极大的赞赏。

谢谢。

**或许只能找到解决办法。AudioFileStreamSeek 文档说**

> 调用此函数后，解析器假定传递给 AudioFileStreamParseBytes 函数的下一个数据从 outAbsoluteByteOffset 参数中返回的字节偏移开始。

**我们如何做到这一点？我们应该使用 Http Range 参数吗？如果我们将字节偏移量发送到 Range，它会按预期工作吗？我应该如何清除缓冲区中的现有字节以避免两个流一起播放？**

**非常感谢任何帮助。谢谢。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-20T15:17:50.507

AudioFileStreamSeek 适用于数据包，而不是字节数。因此，您真正需要跟踪的是数据包计数。

Matt 代码中的 MyEnqueueBuffer 方法是将缓冲区发送到 AudioQueue 进行播放的地方。在 packetfilled 重置为 0 之前，抓取 packetfilled 并增加索引变量：

myData.absolutePackets = myData.absolutePackets + myData->packetsFilled;

我的问题是，即使使用此值，我也无法正确实现 AudioFileStreamSeek。因此，如果您有一些使用 Matt 的代码进行搜索的示例代码，请分享。

谢谢！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-21T06:52:03.800

我还没有真正尝试过 AudioFileStream API（我们在内部推出了自己的 API），但这里有一些你必须注意的事情。

假设你随机寻找字节流没有问题，那么你必须不断跟踪 MP3 帧号和绝对字节流位置之间的关系，就像 Paul 所说的那样。我假设您可以在 AudioFileStream_PacketsProc 中通过调用 AudioFileStreamSeek 来做到这一点。

这是更棘手的部分。当您进行随机搜索时，您必须重置 AudioFileStream 的内部状态。因为它可能处于某种中间状态，期待下一个传入字节完成当前帧。我不确定您是否可以只输入零以使其跳过当前帧并重新开始（您必须尝试，因为我在 API 中看不到任何类似 AudioFileStreamReset 的东西；但是，音频队列本身确实具有重置功能，您可以清理已经排队的帧）。无论如何，您也必须照顾您的 AudioFileStream_PacketsProc，因为您将解析您已经跟踪的字节流的一部分。

请注意，您不能仅仅依靠第二个和比特率来找到 MP3 帧的开始。即使使用非可变速率 MP3 流，每隔几帧也可能有填充。所以最准确的信息仍然来自解析器。

我应该快速补充一点，另一种进行随机搜索的方法是简单地“缓存”（存储）解析的数据包，如果你没有播放一个非常长的大流。帧索引可以从帧头信息中计算出来。对于非 VBR MP3，每秒帧数是一个常数（例如，对于 44.1 kHz 立体声非 VBR MP3，每秒帧数是 44100/1152 = 38.28125 帧；请查看 MP3 规范了解为什么会这样）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-14T20:38:29.013

您可以将 AudioQueueStart 与您要寻找的地方的 mSampletime 一起使用吗？

所以只是停止播放....并从不同的采样时间开始？[只需获取当前的采样时间并根据需要进行操作？]

inDeviceStartTime 音频队列应该开始的时间。

要指定相对于关联音频设备的时间线的开始时间，请使用 AudioTimeStamp 结构的 mSampleTime 字段。使用 NULL 指示音频队列应尽快启动。

返回值 结果代码。请参阅“音频队列结果代码”。</p>

讨论 如果关联的音频设备尚未运行，此函数将启动它。

# vb.net - <> 而不是在 VB.NET 中

> ID：649951
> 
> 赞同：24
> 
> 时间：2009-03-16T10:57:54.623
> 
> 标签：vb.net, operators, query-string

我有一项令人兴奋的任务是了解 VB.NET`<>`和`Not`运算符。 `Not`- 我假设通过我的少量使用它 - 在功能上等同`!`于 C# 等语言并且`<>`等同于`!=`.

在 VB.NET 中，一个常见的问题是对没有引用的对象执行布尔表达式，它出现了。所以如果我们这样做

```
If Request.QueryString("MyQueryString") <> Nothing Then 
```

如果查询字符串不存在，这实际上会失败。为什么，我不知道。老程序员的做法如下：

```
If Not Request.QueryString("MyQueryString") Is Nothing Then 
```

这往往会奏效。对我来说，它们在功能上是等效的，尽管运算符倾向于根据某些因素（例如运算符优先级）进行不同的比较，但是为什么它在这种情况下不起作用，我不知道，我也没有找到任何相关材料。

我问这个是因为我必须编写标准文档，并且我们正在确定使用`Not`或`<>`. 关于应该采用哪种方式的任何想法，或者您*应该*这样做？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2009-03-16T11:03:28.607

我一直使用以下内容：

```
If Request.QueryString("MyQueryString") IsNot Nothing Then 
```

但这只是因为在语法上它读起来更好。

在测试有效的 QueryString 条目时，我还使用以下内容：

```
If Not String.IsNullOrEmpty(Request.QueryString("MyQueryString")) Then 
```

这些只是我一直使用的方法，所以我无法证明它们的使用是合理的，除非它们在读回代码时对我来说最有意义。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-03-16T11:05:50.877

`Is`与`=`--`Is`比较引用不同，而`=`将比较值。

如果您使用的是 .Net Framework（或更高版本）的 v2，则`IsNot`操作员会做正确的事情，并且阅读起来更自然。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-03-16T11:25:46.133

我认为您的问题归结为“（`Is`和`=`）与（`IsNot`和<>）之间的区别”。

两种情况的答案都是一样的：

`=`并且`<>`为值类型隐式定义，您可以为您的类型显式定义它们。

`Is`并且`IsNot`设计用于在引用类型之间进行比较，以检查两个引用是否引用同一个对象。

在您的示例中，您将字符串对象与 Nothing (Null) 进行比较，并且由于`=`/`<>`运算符是为字符串定义的，因此第一个示例有效。但是，遇到 Null 时它不起作用，因为字符串是引用类型并且可以是 Null。更好的方法（如您所料）是使用`Is`/的后一个版本`IsNot`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-16T11:29:36.903

这是技术答案（扩展 Rowland Shaw 的答案）。

*Is*关键字检查两个操作数是否是对同一个对象内存的引用，并且只有在这种情况下才返回 true。我相信它在功能上等同于*Object.ReferenceEquals*。*IsNot*关键字只是写作的简写语法，仅此`Not ... Is ...`而已。

*=* （相等）运算符比较值，在这种情况下（与许多其他情况一样）等效于*String.Equals*。现在，*<> （不等式）运算符与**Is*和*IsNot*关键字的类比并不完全相同，因为它可以根据类与*=*运算符分开覆盖。我相信这种情况应该始终是它返回*=*运算符的逻辑逆（当然在 String 的情况下），并且只允许在测试不等式而不是相等性时进行更有效的比较。

处理字符串时，除非您实际上是要比较引用，否则请始终使用*=*运算符（或我想是 String.Equals）。在您的情况下，因为您正在测试 null （*Nothing*），所以您似乎需要使用*Is*或*IsNot*关键字（相等运算符将失败，因为它无法比较 null 对象的值）。从语法上讲，*IsNot*关键字在这里要好一些，所以就这样吧。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-16T11:21:07.267

只需使用哪个听起来更好。不过，我会使用第一种方法，因为它的操作似乎更少。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-16T11:42:07.357

如果您需要知道变量是否存在，请使用 Is/IsNot Nothing。

使用 <> 要求您正在评估的变量定义了“<>”运算符。查看

```
 Dim b As HttpContext
 If b <> Nothing Then
    ...
 End If 
```

以及由此产生的错误

```
Error   1   Operator '<>' is not defined for types 'System.Web.HttpContext' and 'System.Web.HttpContext'. 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-07-28T12:36:05.607

C# 和 VB.NET 编译器通常会为两种语言中显然等效的操作生成不同的 IL。碰巧 C# 在您编写时会执行“预期”的事情`stringvar == null`，但 VB.NET 不会。要在 VB.NET 中获得相同的效果，您必须强制使用`Is`运算符进行真正的引用相等。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-01T14:25:13.577

我是个菜鸟，我来这里是为了弄清楚 VB 的“不等于”语法，所以我想我会把它扔在这里以防其他人需要它：

```
<%If Not boolean_variable%>Do this if boolean_variable is false<%End If%> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-06-22T14:45:44.640

实际上 Is 非常好，因为对于开发人员来说，您可能想要覆盖运算符 ==，以与值进行比较。假设你有一个类A，A的operator ==就是将A的一些字段与参数进行比较。那么你将在 C# 中使用以下代码验证 A 的对象是否为空，

```
 A a = new A();
...
    if (a != null)
it will totally wrong, you always need to use if((object)a != null)
but in vb.net you cannot write in this way, you always need to write
    if not a is nothing then
or
    if a isnot nothing then 
```

正如克里斯蒂安所说，vb.net 并没有“预期”任何事情。

# java - 在 maven-deploy-plugin 中多次执行的 Maven 错误

> ID：649955
> 
> 赞同：0
> 
> 时间：2009-03-16T11:00:02.373
> 
> 标签：java, maven-2, build, maven-plugin

我找到[了这个不错的方法](http://ionixx.wordpress.com/2008/03/10/running-specified-ant-tasks-within-maven2-outside-the-lifecycle/)，并想用它在我们的存储库中部署一些 3rd-party 文件

命令行上的调用是

```
mvn -P deploy-libs 
```

如果我对**一个**文件执行此操作，它会完全按预期工作

```
<profiles>
    <profile>
        <id>deploy-libs</id>
        <build>
            <defaultGoal>deploy:deploy-file</defaultGoal>
            <plugins>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-deploy-plugin</artifactId>
                    <version>2.4</version>
                    <goals>
                        <goal>deploy-file</goal>
                    </goals>
                    <configuration>
                        <repositoryId>openscada-external</repositoryId>
                        <url>${openscada.distrib.repository}</url>
                        <file>../openscada_opc_dcom/lib/j-interop.jar</file>
                        <pomFile>../openscada_opc_dcom/lib/j-interop.pom</pomFile>
                    </configuration>
                </plugin>
            </plugins>
        </build>
    </profile>
</profiles> 
```

如果我使用具有多个执行的执行块，它就不起作用。这是一个错误，还是这是预期的行为？

```
<profiles>
    <profile>
        <id>deploy-libs</id>
        <build>
            <defaultGoal>deploy:deploy-file</defaultGoal>
            <plugins>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-deploy-plugin</artifactId>
                    <version>2.4</version>
                    <configuration>
                        <repositoryId>openscada-external</repositoryId>
                        <url>${openscada.distrib.repository}</url>
                    </configuration>
                    <executions>
                        <execution>
                            <id>j-interop</id>
                            <goals>
                                <goal>deploy-file</goal>
                            </goals>
                            <configuration>
                                <file>../openscada_opc_dcom/lib/j-interop.jar</file>
                                <pomFile>../openscada_opc_dcom/lib/j-interop.pom</pomFile>
                            </configuration>
                        </execution>
                        <execution>
                            <id>j-interopdeps</id>
                            <goals>
                                <goal>deploy-file</goal>
                            </goals>
                            <configuration>
                                <file>../openscada_opc_dcom/lib/j-interopdeps.jar</file>
                                <pomFile>../openscada_opc_dcom/lib/j-interopdeps.pom</pomFile>
                            </configuration>
                        </execution>
                        <execution>
                            <id>jcifs</id>
                            <goals>
                                <goal>deploy-file</goal>
                            </goals>
                            <configuration>
                                <file>../openscada_opc_dcom/lib/jcifs-1.2.9.jar</file>
                                <pomFile>../openscada_opc_dcom/lib/jcifs-1.2.9.pom</pomFile>
                            </configuration>
                        </execution>
                    </executions>
                </plugin>
            </plugins>
        </build>
    </profile>
</profiles> 
```

我得到的错误是：

```
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] One or more required plugin parameters are invalid/missing for 'deploy:deploy-file'

[0] Inside the definition for plugin 'maven-deploy-plugin' specify the following:

<configuration>
  ...
  <file>VALUE</file>
</configuration>

-OR-

on the command line, specify: '-Dfile=VALUE'

[INFO] ------------------------------------------------------------------------
[INFO] Trace
org.apache.maven.lifecycle.LifecycleExecutionException: Error configuring: org.apache.maven.plugins:maven-deploy-plugin. Reason: Invalid or missing parameters: [Mojo parameter [name: 'file'; alias: 'null']] for mojo: org.apache.maven.plugins:maven-deploy-plugin:2.4:deploy-file
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:587)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeStandaloneGoal(DefaultLifecycleExecutor.java:512)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:482)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:330)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:227)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:142)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:336)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:129)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:287)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
    at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
    at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)
    at org.codehaus.classworlds.Launcher.main(Launcher.java:375)
Caused by: org.apache.maven.plugin.PluginParameterException: Error configuring: org.apache.maven.plugins:maven-deploy-plugin. Reason: Invalid or missing parameters: [Mojo parameter [name: 'file'; alias: 'null']] for mojo: org.apache.maven.plugins:maven-deploy-plugin:2.4:deploy-file
    at org.apache.maven.plugin.DefaultPluginManager.checkRequiredParameters(DefaultPluginManager.java:1042)
    at org.apache.maven.plugin.DefaultPluginManager.getConfiguredMojo(DefaultPluginManager.java:659)
    at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:429)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:558)
    ... 16 more 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-12T01:50:20.397

发生这种情况的原因是当一个插件像你所做的那样从命令行调用时，它没有与之关联的阶段或执行。这意味着它会选择未命名的执行配置，即执行块之外的配置。

如果您真的想运行多个执行，请将它们绑定到一个阶段，然后调用该阶段。在这种情况下，每个执行都将使用自己的配置运行。

这里真正没有被问到的问题是为什么你要使用 deploy-file 来部署一堆这样的东西？如果是第 3 方的东西，你应该找一个像[Nexus](http://nexus.sonatype.org)一样的 repo 管理器，然后将它们一次上传到一个存储库，供你的整个团队使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-16T13:07:28.417

这有点冗长，但可能会有所帮助：

```
<profiles>
  <profile>
    <id>deploy-j-interop</id>
    <build>
      <defaultGoal>deploy:deploy-file</defaultGoal>
      <plugins>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-deploy-plugin</artifactId>
          <version>2.4</version>
          <configuration>
            <repositoryId>openscada-external</repositoryId>
            <url>${openscada.distrib.repository}</url>
          </configuration>
          <executions>
            <execution>
              <id>j-interop</id>
              <goals>
                <goal>deploy-file</goal>
              </goals>
              <configuration>
                <file>../openscada_opc_dcom/lib/j-interop.jar</file>
                <pomFile>../openscada_opc_dcom/lib/j-interop.pom</pomFile>
              </configuration>
            </execution>
          </executions>
        </plugin>
      </plugins>
    </build>
  </profile>

  <profile>
    <id>deploy-j-interopdeps</id>
    <build>
      <defaultGoal>deploy:deploy-file</defaultGoal>
      <plugins>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-deploy-plugin</artifactId>
          <version>2.4</version>
          <configuration>
            <repositoryId>openscada-external</repositoryId>
            <url>${openscada.distrib.repository}</url>
          </configuration>
          <executions>
            <execution>
              <id>j-interopdeps</id>
              <goals>
                <goal>deploy-file</goal>
              </goals>
              <configuration>
                <file>../openscada_opc_dcom/lib/j-interopdeps.jar</file>
                <pomFile>../openscada_opc_dcom/lib/j-interopdeps.pom</pomFile>
              </configuration>
            </execution>
          </executions>
        </plugin>
      </plugins>
    </build>
  </profile>

  <profile>
    <id>deploy-jcifs</id>
    <build>
      <defaultGoal>deploy:deploy-file</defaultGoal>
      <plugins>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-deploy-plugin</artifactId>
          <version>2.4</version>
          <configuration>
            <repositoryId>openscada-external</repositoryId>
            <url>${openscada.distrib.repository}</url>
          </configuration>
          <executions>
            <execution>
              <id>jcifs</id>
              <goals>
                <goal>deploy-file</goal>
              </goals>
              <configuration>
                <file>../openscada_opc_dcom/lib/jcifs-1.2.9.jar</file>
                <pomFile>../openscada_opc_dcom/lib/jcifs-1.2.9.pom</pomFile>
              </configuration>
            </execution>
          </executions>
        </plugin>
      </plugins>
    </build>
  </profile>
</profiles> 
```

您可以使用以下命令运行它：

```
mvn -P deploy-j-interop deploy-j-interopdeps deploy-jcifs 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-18T11:49:17.940

我猜maven也尝试执行默认执行，这里`<file>`没有指定。在 pluginManagement 中配置插件通常是一个好主意，并将不同的执行显式绑定到特定阶段。

尝试在默认插件配置中放置明确的 '' 和 '' 元素。您可以将垃圾放入其中，以查看是否执行了默认执行，如果执行，则将其中一个执行设为默认执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-01-22T21:38:43.700

要一次完成所有部署（如 Boris 所述），您可以添加：

> <profile>
>   <profiles>
>     <id>MyId1</id>
>     <activation><property>DeployAll</property></activation>
>     ...
> </profiles>
> <profile>
>   <id>MyId2</id>
>   <activation> <property>DeployAll</property></activation>
>   ...

然后使用

> mvn -DDeployAll

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-12T11:39:17.020

当然，这是一个错误。Maven 插件不应该以这种方式工作。

# java - java stderr 去哪儿了？

> ID：649962
> 
> 赞同：8
> 
> 时间：2009-03-16T11:02:52.490
> 
> 标签：java, c++, java-native-interface, stderr

我想知道，java stderr 标准在哪里？

我知道我可以使用 System.setErr 更改标准错误，它'重新分配“标准”错误输出流。'，但我不知道哪个是“标准”。

我想详细说明我的问题：我有在 java (jni) 中使用的 C++ 库。问题是我似乎看不到来自我的 C++ 库的 stderr 输出。当我运行使用该库的 java api 时，我在 C++ 库中调用 assert() 并且在控制台中看不到输出。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-03-16T11:07:41.107

它进入流程的标准错误流，无论设置如何。

*   如果您从控制台运行应用程序，它也可能会写入控制台。
*   在 GUI 中，标准输出/错误经常被丢弃，即输出丢失。
*   在服务（例如网络服务器）中，标准错误/输出通常在某处的旋转日志文件中捕获，但它完全取决于服务。

大多数平台允许您将标准错误流重定向到其他地方（例如到文本文件）。

System.setErr 的想法是允许您*不*使用进程本身的标准错误流，而是对其进行更改，以便对`System.err.println`etc 的调用转到给定的流。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-16T11:06:18.380

默认情况下 System.err 是控制台，就像 System.out 一样。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-16T11:09:53.067

调用者的文件描述符 2。它从那里去哪里——取决于调用者。在控制台上，您可以将其重定向到其他地方，例如：

```
java Example 2>> errors.log 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-16T11:08:24.257

我刚刚编写了一个执行 a 的小测试程序，`System.err.println`它似乎会输出到控制台。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-16T11:10:01.820

这应该去 java.io.FileDescriptor.err [https://docs.oracle.com/javase/1.5.0/docs/api/java/io/FileDescriptor.html](https://docs.oracle.com/javase/1.5.0/docs/api/java/io/FileDescriptor.html)

```
System.setErr(new PrintStream(new BufferedOutputStream(new FileOutputStream(java.io.FileDescriptor.err),128),true)); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-03-16T11:07:18.253

标准错误输出流进入控制台。此流已经打开并准备好接受输出数据。

有关详细信息，请参阅[java sun api](http://java.sun.com/j2se/1.5.0/docs/api/java/lang/System.html#err)。

# ruby-on-rails - Nokogiri：寻找 使用 XPath

> ID：649963
> 
> 赞同：5
> 
> 时间：2009-03-16T11:03:22.723
> 
> 标签：ruby-on-rails, ruby, regex, xpath, nokogiri

我使用[Nokogiri](http://github.com/tenderlove/nokogiri/tree/master)`<div>` (Rubygem) css 搜索在我的 html中查找某些内容。看起来 Nokogiri 的 css 搜索不喜欢正则表达式。我想切换到 Nokogiri 的[xpath](http://www.w3.org/TR/xpath)搜索，因为这似乎支持搜索字符串中的正则表达式。

如何在 xpath 搜索中实现下面提到的（伪）css 搜索？

```
require 'rubygems'
require 'nokogiri'

value = Nokogiri::HTML.parse(<<-HTML_END)
  "<html>
    <body>
      <p id='para-1'>A</p>
      <p id='para-22'>B</p>
      <h1>Bla</h1>
      <p id='para-3'>C</p>
      <p id='para-4'>D</p>
      <div class="foo" id="eq-1_bl-1">
        <p id='para-5'>3</p>
      </div>
    </body>
  </html>"
HTML_END

# my_block is given
my_bl = "1"
# my_eq corresponds to this regex
my_eq = "\/[0-9]+\/"

# FIXME The following line should be changed to an xpath search.
if my_div = value.css("div#eq-#{my_eq}_bl-#{my_bl}.foo").first
  # doing some stuff with the <p> inside the div
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-16T13:31:42.273

[Mike Dalessio](http://mike.daless.io/)（Nokogiri 核心开发人员的一半）在`#nokogiri`(irc.freenode.net) 上给了我一个答案。看起来 Nokogiri CSS 和 XPath 搜索都不支持正则表达式匹配。这是他关于如何使用 Nokogiri 搜索正则表达式的解决方案：

```
require 'rubygems'
require 'nokogiri'

value = Nokogiri::HTML.parse(<<-HTML_END)
  "<html>
    <body>
      <p id='para-1'>A</p>
      <p id='para-22'>B</p>
      <h1>Bla</h1>
      <p id='para-3'>C</p>
      <p id='para-4'>D</p>
      <div class="foo" id="eq-1_bl-1">
        <p id='para-5'>3</p>
      </div>
      <div class="bar" id="eq-1_bl-1">
        <p id='para-5'>3</p>
      </div>
    </body>
  </html>"
HTML_END

# my_block is given
my_bl = "1"
# my_eq corresponds to this regex
my_eq = "[0-9]+"
# full regex to search for in node ids
full_regex = %r(eq-#{my_eq}_bl-#{my_bl})

filter_by_id = Class.new do
  attr_accessor :matches

  def initialize(regex)
    @regex = regex
    @matches = []
  end

  def filter(node_set)
    @matches += node_set.find_all { |x| x['id'] =~ @regex }
  end
end.new(full_regex)

value.css("div.foo:filter()", filter_by_id)
filter_by_id.matches.each do |node|
  puts node
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-03T08:25:07.957

基于上述答案的更简单的方法：

```
regex = /subject|header/
headers = doc.css("table td:nth-child(1) div").find_all do
  |h| h['class'] =~ regex
end 
```

感谢您发布这个问题。

# javascript - 在Javascript中访问私有实例变量的静态公共方法

> ID：649978
> 
> 赞同：1
> 
> 时间：2009-03-16T11:07:46.833
> 
> 标签：javascript, oop, static, closures

我一直在阅读 Diaz 的书 Pro JavaScript Design Patterns。很棒的书。我本人无论如何都不是专业人士。我的问题：我可以拥有一个可以访问私有实例变量的静态函数吗？我的程序有一堆设备，其中一个的输出可以连接到另一个的输入。此信息存储在输入和输出数组中。这是我的代码：

```
var Device = function(newName) {
    var name = newName;
    var inputs  = new Array();
    var outputs = new Array();
    this.getName() {
        return name;
    }
};
Device.connect = function(outputDevice, inputDevice) {
    outputDevice.outputs.push(inputDevice);
    inputDevice.inputs.push(outputDevice);
};

//implementation
var a = new Device('a');
var b = new Device('b');
Device.connect(a, b); 
```

这似乎不起作用，因为 Device.connect 无权访问设备输出和输入数组。有没有办法在不向设备添加会暴露它的特权方法（如 pushToOutputs）的情况下获取它们？

谢谢！史蒂夫。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-16T11:42:13.643

Eugene Morozov 是对的 - 如果您在函数中按原样创建它们，您将无法访问这些变量。我通常的方法是使它们成为 的变量`this`，但命名它们以便清楚它们是私有的：

```
var Device = function(newName) {
    this._name = newName;
    this._inputs  = new Array();
    this._outputs = new Array();
    this.getName() {
        return this._name;
    }
};
Device.connect = function(outputDevice, inputDevice) {
    outputDevice._outputs.push(inputDevice);
    inputDevice._inputs.push(outputDevice);
};

//implementation
var a = new Device('a');
var b = new Device('b');
Device.connect(a, b); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-16T11:34:54.787

您正在创建一个闭包，除非使用特权方法，否则无法从外部访问闭包变量。

坦率地说，我从来没有觉得需要私有变量，尤其是在 Javascript 代码中。所以我不会打扰并将它们公开，但这是我的意见。

# java - 如何找出我的测试导致的 JDK 的代码覆盖率？

> ID：649980
> 
> 赞同：0
> 
> 时间：2009-03-16T11:08:25.817
> 
> 标签：java, testing

我目前正在使用 Emma 作为我项目的代码覆盖工具。我知道如何获得运行示例 Java 测试用例的代码覆盖率分析。这将为我提供 Java 测试用例代码的代码覆盖率详细信息，但是，我想知道在运行示例 Java 测试用例时覆盖了多少 JDK 代码。

例如，如果我的测试用例是：

```
public class TestCase{
 public static void main(String[] args){
  System.out.println("Hello world!");
 }
} 
```

我想知道执行上述测试用例执行了多少 JDK 代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-16T11:16:17.420

您是否考虑过明确地检测来自 jdk 的 jar 并包括 com.sun；爪哇。和 javax 包？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-16T12:03:16.217

试试[cobertura](http://cobertura.sourceforge.net/)

# sharepoint - Sharepoint MOSS 定制vs 未定制

> ID：649991
> 
> 赞同：2
> 
> 时间：2009-03-16T11:10:05.063
> 
> 标签：sharepoint, moss, customization

如果 Microsoft 构建 MOSS 以便将所有数据写入 SQL Server 数据库，为什么所有最佳开发实践都建议将文件等保存在数据库之外，即文件系统上？

一切顺利

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-17T16:27:21.533

我想说**所有最佳实践都没有说您应该使用文件系统**来存储文件。这将始终取决于情况。当您只有一台服务器时，将文件存储在文件系统上很好，但是当文件需要在多台服务器上时，您必须管理复制。备份数据库通常比数据库和文件更容易。所有这些情况都可以管理，但您需要灵活。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-16T14:16:10.577

SharePoint 有一个名为**ghosing**的技术，它在文件系统中缓存分页。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-16T21:10:11.563

保持 SharePoint 页面未自定义允许在第一次执行时编译页面的一个实例，然后将其保存在内存中并重复用于所有同类页面。自定义页面不共享此行为的原因是因为它们是唯一的，并且一旦 ApplicationDomain 加载了 dll，它就无法卸载。因此，每个请求都会解析自定义页面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-16T14:34:20.673

由于性能问题：保存到数据库的往返只是为了获取您的页面布局，这会损害性能。

另一方面，使用本地文件系统上的文件来提高性能会减少自定义选项。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-16T20:12:06.820

如果您希望网站用户编辑这些文件，则必须将文件保存在数据库中。SharePoint 旨在使这些文件中的大多数都可编辑，因此它们可以存储在数据库中。

如果您作为应用程序架构师知道某些高使用率文件（页面布局、母版页等）不会被编辑，除非通过解决方案发布，您可以选择将页面存储在文件系统上。

由于不需要数据库往返，因此存储在文件系统上对读取访问性能的改进很小。例如，网站中的每个页面都需要母版页，因此将其存储在文件系统中将在高用户需求期间提高性能。

SQL 2008 能够在数据库“外部”管理文件这一事实表明，此功能不仅适用于 SharePoint。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-16T12:40:29.573

这是一个哲学项目。事务完整性是将文件存储在数据库中的一个好处。随之而来的是诸如膨胀的事务日志之类的缺点。

如果在将来的 Sharepoint 版本中，MS 为您提供了使用 SQL 2008 的文件流功能将文件存储在“数据库外部”的选项，我不会感到惊讶。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-17T17:18:57.430

您从哪里获得这些“最佳实践”？

根据我在 MS 和 MOSS 方面的经验，我应该说从未听说过这样的最佳实践，除了一个非常特殊的案例......我会说这不是一个好的实践。

这样你的部署并不容易......管理员用户必须知道在哪里可以找到要修改的文件，备份就像地狱等等

但是，正如我所说......可能在特定情况下它可能很有用。

# c# - 如何在 C# 应用程序中调用 Perl 脚本？

> ID：649993
> 
> 赞同：6
> 
> 时间：2009-03-16T11:10:12.693
> 
> 标签：c#, perl

我想捕获 Perl 程序的输出并在 C# Windows 窗体的文本框中显示输出数据（屏幕上的字符串）。

这是我的主要 C# 代码：

```
public partial class frmMain : Form
{
    private Process myProcess = null;
    public frmMain()
    {
        InitializeComponent();            
    }

    public delegate void UpdateUIDelegate(string data);
    private void btnRun_Click(object sender, EventArgs e)
    {
        myProcess = new Process();
        ProcessStartInfo myProcessStartInfo = new ProcessStartInfo("perl.exe");
        myProcessStartInfo.Arguments = "test.pl";
        myProcessStartInfo.UseShellExecute = false;
        myProcessStartInfo.RedirectStandardOutput = true;
        myProcessStartInfo.WindowStyle = ProcessWindowStyle.Hidden;
        myProcessStartInfo.CreateNoWindow = true;
        myProcess.StartInfo = myProcessStartInfo;
        myProcess.OutputDataReceived += new DataReceivedEventHandler(myProcess_OutputDataReceived);
        myProcess.Start();
        myProcess.BeginOutputReadLine(); 
    }

    void myProcess_OutputDataReceived(object sender, DataReceivedEventArgs e)
    {
        if (txtOutput.InvokeRequired)
        {
            UpdateUIDelegate updateDelegate = new UpdateUIDelegate(UpdateUI);                
            this.Invoke(updateDelegate, e.Data);
        }            
    }

    void UpdateUI(string data)
    {
        txtOutput.Text += data + "\r\n";
    }
} 
```

和 test.pl 的代码：

```
my @a = qw{1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19};
my @b = qw{a b c d e f g h i j  k  l  m  n  o  p  q  r  s };
print 'start' . "\n";
while ( my ( $item1, $item2) = ( splice (@a, 0, 1), splice (@b, 0, 1) ) ) {
    print 'Item 1: ' . $item1 . "\n";
    print 'Item 2: ' . $item2 . "\n";
    warn 'Finish one item' . "\n";
    sleep(1);
} 
```

我有一个问题是输出数据只显示在文本框中，直到 Perl 完成。

当我发现这一点时，更有趣的是，如果我对控制台应用程序 (C#) 做同样的事情，一切似乎都很好。

这是控制台应用程序的代码：

```
class Program
{
    static void Main(string[] args)
    {
        Process myProcess = new Process();
        ProcessStartInfo myProcessStartInfo = new ProcessStartInfo("perl.exe");
        myProcessStartInfo.Arguments = "test.pl";
        myProcessStartInfo.UseShellExecute = false;
        myProcessStartInfo.RedirectStandardOutput = true;
        myProcess.StartInfo = myProcessStartInfo;

        myProcess.OutputDataReceived += new DataReceivedEventHandler(myProcess_OutputDataReceived);                                    
        myProcess.Start();            
        myProcess.BeginOutputReadLine();            
        Console.Read();
    }

    static void myProcess_OutputDataReceived(object sender, DataReceivedEventArgs e)
    {
        Console.WriteLine(e.Data);
    }
} 
```

我试图弄清楚我的表单应用程序会发生什么，但仍然没有找到任何线索。还有一件事是我无法通过 Windows 窗体应用程序收到警告消息。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-08-01T23:11:58.493

您将需要使用多个线程，这样它就不会中断您的 UI。我有一个相当大的实用程序类，它在自己的线程上启动进程并通过管道传输到委托事件。

抱歉，我会举个例子，但实际上我很着急。但是在使用 Perl 脚本时需要注意的另一件事是它们不能很好地自动刷新输出。你需要把：

```
local $| = 1; 
```

在您正在运行的脚本的顶部，它会自动刷新。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-16T12:14:18.200

首先，您必须更新事件处理程序

```
 void myProcess_OutputDataReceived(object sender, DataReceivedEventArgs e)    
    {        
         if (txtOutput.InvokeRequired)        
         {            
               UpdateUIDelegate updateDelegate = new UpdateUIDelegate 

                 (UpdateUI);this.Invoke(updateDelegate, e.Data);        
          }
          else UpdateUI(e.Data);

     } 
```

并将这一行添加到您的`btnRun_Click`

```
proc.WaitForExit(); 
```

# c# - 从 ServerSide ASP.Net 将 Javascript 函数绑定到 TreeView CheckBox

> ID：649995
> 
> 赞同：1
> 
> 时间：2009-03-16T11:10:45.810
> 
> 标签：c#, asp.net, javascript, treeview, checkbox

我有一个 ShowAllCheckBox 属性为 true 的 treeView，我需要将一个 javascript 函数绑定到其单击事件上的每个复选框。

任何人都可以建议如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-16T12:17:17.273

使用[Jquery](http://jquery.com)，您可以轻松地执行以下操作

```
$("#TreeView1 input[type='checkbox']").bind('click',function(){
            var ischecked = (this.checked == true);
            alert(ischecked);
         }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-17T19:55:46.143

你不能在没有重新解析渲染输出的情况下在服务器端做到这一点。TreeView 不使用 Controls 集合并直接呈现输入元素。

您必须求助于 gk 或传统上建议的某种形式的 java 脚本：

```
<script type="text/javascript" language="javascript">
    var inputs = document.getElementsByTagName("input");
    for (i = 0; i < inputs.length; i++)
        if (inputs[i].type == "checkbox" && inputs[i].name.indexOf("TreeView1", 0) == 0)
            inputs[i].onclick = function() { alert('click'); };
</script> 
```

# c# - 使用“this”：哪里好哪里不好

> ID：649997
> 
> 赞同：0
> 
> 时间：2009-03-16T11:12:06.573
> 
> 标签：c#, .net, coding-style, this

我喜欢对所有*非局部*变量使用“this”语句：用于属性、类变量等。我这样做是为了便于代码阅读，便于理解该变量的来源。

```
object someVar;

object SomeProperty { get; set }

void SomeMethod(object arg1, object arg2)
{
  this.SomeProperty = arg1;
  this.someVar = arg2;
} 
```

您如何看待，使用“this”的正确方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-16T11:18:33.653

`this`是一件好事。`this`消除歧义。

Ô_o：

```
public class Foo
{
    private string bar

    public Foo(string bar)
    {
        bar = bar;
    }
} 
```

下划线很蹩脚（它是 C#，不是 C++）：

```
public class Foo
{
    private string _bar

    public Foo(string bar)
    {
        _bar = bar;
    }
} 
```

耶：

```
public class Foo
{
    private string bar

    public Foo(string bar)
    {
        this.bar = bar;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-16T11:17:36.620

我以前只在构造函数中使用它，以便我可以将成员变量与 ctor 参数同名以保持一致性。既然我正在使用[auto properties](http://msdn.microsoft.com/en-us/library/bb384054.aspx)，我根本不会在任何地方使用它，除非我有我不想作为属性的成员变量（我只是不喜欢拥有完全私有的属性；不知何故似乎很奇怪）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-16T11:21:36.707

通常我会使用“this”关键字来消除类/对象变量和方法参数之间的任何歧义。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-16T11:25:38.223

使用**它**有两个强制性角色

*   当您必须打破函数参数、局部变量名称和属性之间的歧义时。如果我要使用**this**，它只会出现在构造函数中，因为它是唯一可以使用相同名称的地方。

    void SomeMethod(object SomeProperty, object someVar) { this.SomeProperty = SomeProperty; this.someVar = someVar; }

*   每当您需要将对当前对象的引用传递给另一个方法时。必须经常传递你的对象是一种代码味道。

其他任何事情都可能过于冗长。不要使用你不需要的东西。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-16T11:29:49.353

我喜欢在分配给继承的属性时使用它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-16T11:25:55.027

我只在构造函数或方法参数与某种成员变量发生冲突时使用它。可能是属性或字段或其他任何东西。不过，这种情况并不经常发生。所以我很少使用它。

我认为 ReSharper 删除`this.`了不需要的地方。也许默认情况下......它在这里，但不确定它是否是默认行为：p

# iphone - iPhone 上的凹凸贴图

> ID：649998
> 
> 赞同：4
> 
> 时间：2009-03-16T11:12:12.547
> 
> 标签：iphone, cocoa, graphics, opengl-es

在 iPhone 上使用 OpenGL ES，是否可以做凹凸贴图（使用普通扰动贴图）？

从我的谷歌搜索来看，支持它的 OpenGL ES 扩展似乎不允许凹凸映射。

根据[这个](http://www.kevindoolan.net/blog/post/2009/01/24/iPhone-3D-Engine-Development.aspx)为 iphone 编写游戏中间件的人的说法，人们可以通过观看 imgtec 网站（iPhone 图形芯片的标志）上的演示来了解硬件的潜力。一个这样的演示是[凹凸映射演示](http://www.imgtec.com/powervr/insider/demos/polybump.asp)。但是找不到来源。

[Kevin Doolan](http://www.kevindoolan.net/blog/post/2009/01/24/iPhone-3D-Engine-Development.aspx)还提到没有为开发人员启用 GL 扩展。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-17T09:53:27.313

@CVertex

iPhone 支持 DOT3 混合模式，这是您最起码的需要。

顶点程序扩展未在 iPhone 上公开，但它不是必需的。在这种情况下，扩展的目的是允许您将光矢量转换为切线空间 - 但正如我在博客中提到的，这是您可以在 CPU 上执行的操作并提供结果（作为顶点颜色，编码为DOT3 格式法线）到 GL。它显然会比你能够使用顶点程序慢得多。如果您正在执行对象空间凹凸贴图，则无需转换光矢量，或在顶点级别对其进行编码 - 您只需将其作为恒定颜色输入即可。

您提到的凹凸贴图演示的完整源代码可在**imgtec**网站上找到。下载 1.x SDK，可[在此处](http://www.imgtec.com/powervr/insider/sdk/KhronosOpenGLES1xMBX.asp)获得。它是对象空间凹凸映射的演示（搜索 PolyBump）。

凯文D。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-16T11:21:59.077

这似乎是可能的（至少在使用 OpenGL ES 1.1+ 时），但我也找不到任何关于如何做到这一点的教程。有一个[GDC 2006 PDF](http://ati.amd.com/developer/gdc/2006/GDC06-GLES_Tutorial_Day-Ginsburg-Advanced_Rendering.pdf)提到了它，并且将有一个关于类似技术的[Khronos Group 课程](http://www.khronos.org/news/events/detail/opengl_es_programming_training_advanced_course41/)。

本页的“OpenGL ES 1.1 更详细”一章中也提到了[这一点](http://www.khronos.org/opengles/1_X/)。*********`********