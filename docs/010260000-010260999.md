# StackOverflow 问答 10260000-10260999

# macos - 如何在我的 Mac 上安装 JavaFx 2.0？

> ID：10260003
> 
> 赞同：1
> 
> 时间：2012-04-21T14:51:16.800
> 
> 标签：macos, installation, java, javafx

我需要在我的 macbook pro 上使用 JavaFx。我使用的是 netbeans 7.1。

目前，当我编译我在 Windows 上创建的 javafx 程序时，它给了我这个错误。

J2SE 平台未正确设置。您的活动平台是：Default_JavaFX_Platform，但在项目的属性文件中找不到相应的属性“platforms.Default_JavaFX_Platform.home”。在 IDE 中打开项目并设置具有相同名称的平台或手动添加它。例如像这样： ant -Duser.properties.file= jar（您将属性“platforms.Default_JavaFX_Platform.home”放在 .properties 文件中）或 ant -Dplatforms.Default_JavaFX_Platform.home= jar（不使用属性文件) 构建失败（总时间：0 秒）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T13:11:15.910

The latest versions of Java from Oracle have JavaFx 2.x included: [http://www.oracle.com/technetwork/java/javase/downloads/index.html](http://www.oracle.com/technetwork/java/javase/downloads/index.html)

The stand-alone version of JavaFX for Java 6 appears to be available only for Windows (at least from the official download link).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-12T17:16:05.603

如果您想避免 Oracle 的潜在诉讼，这里安全的选择是安装 OpenJDK，这是 JDK 的全功能开源构建。

您可以从[https://adoptopenjdk.net/](https://adoptopenjdk.net/)获取它。

# loops - Mysqli 列缩短

> ID：10260009
> 
> 赞同：0
> 
> 时间：2012-04-21T14:51:52.667
> 
> 标签：loops, mysqli, varchar

我刚刚上传了我的游戏，它在 Wamp 中运行良好。现在，当我在主网站上运行它时，它会将表中行的“名称”缩短为第一个字母？

代码很简单

```
$id = 0;
$stmt->prepare("SELECT name,id FROM `users` WHERE id > ?");
$stmt->bind_param('i',$id);
$stmt->execute();
$stmt->bind_result($name,$id);
while($r = $stmt->fetch()) {
echo $id." : ".$name."<br>";
} 
```

它输出
1：A
2：A
3：n
4：T
5：R
6：M
7：R

***编辑***

我想到了！

```
$stmt->store_result(); 
```

需要去追

```
$stmt->execute(); 
```

如果您打算获取该行。希望这可以帮助某人。

***编辑***

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T01:16:31.733

我想到了！

```
stmt->store_result(); 
```

需要去追

```
$stmt->execute(); 
```

如果您打算获取该行。希望这可以帮助某人。

# xml - 在 xslt 处理器中添加新的 xml 元素 - 新手

> ID：10260011
> 
> 赞同：0
> 
> 时间：2012-04-21T14:52:01.400
> 
> 标签：xml, parsing, xslt, map, openstreetmap

你好，亲爱的 xml 朋友们，美好的一天，

我是 xml 新手，所以不要忍受我的问题......我目前正在使用 xslt 处理器进行一些测试 -

**新：**请参阅我在此初始发布时添加的**更新**- 获取解决方案 ii 复制标签名称的逻辑... -> 我在初始发布结束时添加了一个示例。请让我知道你的 idas...thgx

```
<xsl:stylesheet version = '1.0'
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:xsl='http://www.w3.org/1999/XSL/Transform'>

    <xsl:output method="text" encoding="UTF-8"/>
    <xsl:template match="/">

        <xsl:for-each select="/osm/node/tag[@k='amenity' and @v='restaurant']">
            <xsl:value-of select="../@id"/>
            <xsl:text>&#x09;</xsl:text>
            <xsl:value-of select="../@lat"/>
            <xsl:text>&#x09;</xsl:text>
            <xsl:value-of select="../@lon"/>
            <xsl:text>&#x09;</xsl:text>
            <xsl:for-each select="../tag[@k='name']">
            <xsl:value-of select="@v"/>
            </xsl:for-each>
            <xsl:text>&#x0A;</xsl:text>
        </xsl:for-each>
<xsl:for-each select="../tag[@k='website']">
    <xsl:value-of select="@v"/>
    </xsl:for-each>
    <xsl:text>&#x0A;</xsl:text>
    </xsl:template>
</xsl:stylesheet> 
```

**注意：**上面提到的这个解决方案没有提供任何额外的信息 - 所以网站**没有显示**。这里有什么问题！？

这里开始了最初的发布。

我在终端上运行它来解析 xml 文档

**问题：** 我想要的是用以下标签放大 xslt 处理器

```
wheelchair
website    
addr:country
addr:street
addr:city
addr:housenumber 
```

*   在此处的示例中查看更多详细信息...：

我运行以下代码： time xsltproc test3.xslt testdoc3.xml > Restaurants-004.csv

```
<xsl:stylesheet version = '1.0'
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:xsl='http://www.w3.org/1999/XSL/Transform'>

    <xsl:output method="text" encoding="UTF-8"/>
    <xsl:template match="/">

        <xsl:for-each select="/osm/node/tag[@k='amenity' and @v='restaurant']">
            <xsl:value-of select="../@id"/>
            <xsl:text>&#x09;</xsl:text>
            <xsl:value-of select="../@lat"/>
            <xsl:text>&#x09;</xsl:text>
            <xsl:value-of select="../@lon"/>
            <xsl:text>&#x09;</xsl:text>
            <xsl:for-each select="../tag[@k='name']">
            <xsl:value-of select="@v"/>
            </xsl:for-each>
            <xsl:text>&#x0A;</xsl:text>
        </xsl:for-each>
    </xsl:template>
</xsl:stylesheet> 
```

....在**这个 xml 文档**上- 称为**testdoc3.xml**

```
<?xml version='1.0' encoding='UTF-8'?>
<osm version="0.6" generator="Osmosis SNAPSHOT-r26564">
  <node id="185612117" version="5" timestamp="2011-01-08T19:23:43Z" uid="290680" user="wheelmap_visitor" changeset="6906586" lat="48.8037523" lon="9.5248779">
    <tag k="addr:postcode" v="73614"/>
    <tag k="wheelchair" v="yes"/>
    <tag k="website" v="http://www.courage-restaurant.de/"/>
    <tag k="addr:country" v="DE"/>
    <tag k="name" v="Courage"/>
    <tag k="amenity" v="restaurant"/>
    <tag k="addr:street" v="Künkelinstraße"/>
    <tag k="addr:city" v="Schorndorf"/>
    <tag k="addr:housenumber" v="33"/>
  </node>
  <node id="252619189" version="5" timestamp="2011-01-08T19:21:43Z" uid="290680" user="wheelmap_visitor" changeset="6906586" lat="48.8067032" lon="9.5314986">
    <tag k="addr:postcode" v="73614"/>
    <tag k="wheelchair" v="yes"/>
    <tag k="website" v="www.kesselhaus-schorndorf.de"/>
    <tag k="addr:country" v="DE"/>
    <tag k="name" v="Kesselhaus"/>
    <tag k="amenity" v="restaurant"/>
    <tag k="addr:street" v="Arnoldstraße"/>
    <tag k="addr:city" v="Schorndorf"/>
    <tag k="addr:housenumber" v="3"/>
  </node>
  <node id="319597380" version="1" timestamp="2008-12-17T21:13:15Z" changeset="444629" lat="48.8277913" lon="9.5477029">
    <tag k="name" v="Gasthaus zur Linde"/>
    <tag k="amenity" v="restaurant"/>
  </node>
  <node id="319597382" version="1" timestamp="2008-12-17T21:13:15Z" changeset="444629" lat="48.8282523" lon="9.5503109">
    <tag k="name" v="China-Garden"/>
    <tag k="amenity" v="restaurant"/>
  </node>
  <node id="339591124" version="2" timestamp="2011-09-22T17:33:36Z" uid="290680" user="wheelmap_visitor" changeset="9366746" lat="48.7888015" lon="9.5079525">
    <tag k="cuisine" v="italian"/>
    <tag k="wheelchair" v="limited"/>
    <tag k="name" v="Pizzeria da Rocco"/>
    <tag k="amenity" v="restaurant"/>
  </node>
  <node id="392682646" version="3" timestamp="2010-05-11T19:00:20Z" uid="12973" user="MattGPS" changeset="4671372" lat="48.8315734" lon="9.5468864">
    <tag k="name" v="Gasthaus an der Wieslauf"/>
    <tag k="amenity" v="restaurant"/>
  </node>
  <node id="454516720" version="4" timestamp="2010-12-11T15:30:21Z" uid="12982" user="Michael Schulze" changeset="6625571" lat="48.8031264" lon="9.5344371">
    <tag k="addr:postcode" v="73614"/>
    <tag k="cuisine" v="regional"/>
    <tag k="website" v="http://www.deutscheshaus-schorndorf.de/"/>
    <tag k="addr:country" v="DE"/>
    <tag k="name" v="Deutsches Haus"/>
    <tag k="amenity" v="restaurant"/>
    <tag k="addr:street" v="Sonnenscheinstraße"/>
    <tag k="addr:city" v="Schorndorf"/>
    <tag k="addr:housenumber" v="13"/>
  </node>
  <node id="572362430" version="3" timestamp="2010-07-04T06:59:50Z" uid="106522" user="neuntoeter" changeset="5130101" lat="48.807953" lon="9.5379673">
    <tag k="smoking" v="no"/>
    <tag k="name" v="Club Kneipe"/>
    <tag k="amenity" v="restaurant"/>
  </node>
  <node id="613988559" version="1" timestamp="2010-01-15T01:20:03Z" uid="24748" user="mabapla" changeset="3621550" lat="48.7991827" lon="9.551828">
    <tag k="name" v="Gaststätte Schützenhaus"/>
    <tag k="amenity" v="restaurant"/>
  </node>
  <node id="859532091" version="1" timestamp="2010-08-13T23:05:14Z" uid="130472" user="fx99" changeset="5486736" lat="48.8062337" lon="9.5278548">
    <tag k="website" v="http://www.weinstube-buechsenmacher.de/"/>
    <tag k="name" v="Weinstube zum Büchsenmacher"/>
    <tag k="amenity" v="restaurant"/>
    <tag k="addr:housename" v="5"/>
    <tag k="addr:street" v="Höllgasse"/>
  </node>
  <node id="1625565012" version="1" timestamp="2012-02-09T18:00:04Z" uid="131968" user="changchun_1" changeset="10636279" lat="48.8151893" lon="9.5310692">
    <tag k="name" v="Gasthaus Sonne"/>
    <tag k="amenity" v="restaurant"/>
  </node>
</osm> 
```

我得到了这些结果 - 是的：我想用上面提到的标签放大它......

```
185612117   48.8037523  9.5248779   Courage
252619189   48.8067032  9.5314986   Kesselhaus
319597380   48.8277913  9.5477029   Gasthaus zur Linde
319597382   48.8282523  9.5503109   China-Garden
339591124   48.7888015  9.5079525   Pizzeria da Rocco
392682646   48.8315734  9.5468864   Gasthaus an der Wieslauf
454516720   48.8031264  9.5344371   Deutsches Haus
572362430   48.807953   9.5379673   Club Kneipe
613988559   48.7991827  9.551828    Gaststätte Schützenhaus
631421882   48.8070643  9.5437351   Remstalstuben
672817732   48.8045127  9.5254423   Hanti Alem
677555759   48.8048108  9.5243952   Weinstube St. Urban
677578941   48.8052132  9.5246951   Bei Domenico
677578944   48.8055998  9.5261987   Little Saigon 
```

再次放大 xslt 预处理器的想要的标签是以下标签......

```
wheelchair
website    
addr:country
addr:street
addr:city
addr:housenumber 
```

感谢所有帮助 - 提前感谢

问候

**更新**- 我这样做是这样 - 复制**标签名称**的逻辑- 例如**为网站添加标签：**

```
<xsl:for-each select="../tag[@k='website']">
    <xsl:value-of select="@v"/>
    </xsl:for-each>
    <xsl:text>&#x0A;</xsl:text>
</xsl:for-each> 
```

**你说的话！？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T15:44:30.013

您不需要`for-each`遍历所有`<tag />`节点，只需过滤您需要的节点：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:output method="text" encoding="utf-8" />

    <xsl:template match="/">
        <xsl:apply-templates />
    </xsl:template>

    <xsl:template match="osm">
        <xsl:apply-templates />
    </xsl:template>

    <xsl:template match="node[tag[@k='amenity' and @v='restaurant']]">
        <xsl:value-of select="./@id"/>
        <xsl:text>&#x09;</xsl:text>
        <xsl:value-of select="./@lat"/>
        <xsl:text>&#x09;</xsl:text>
        <xsl:value-of select="./@lon"/>
        <xsl:text>&#x09;</xsl:text>
        <xsl:value-of select="./tag[@k = 'name']/@v"/>
        <xsl:text>&#x09;</xsl:text>
        <xsl:value-of select="./tag[@k = 'wheelchair']/@v"/>
        <xsl:text>&#x09;</xsl:text>
        <xsl:value-of select="./tag[@k = 'website']/@v"/>
        <xsl:text>&#x09;</xsl:text>
        <xsl:value-of select="./tag[@k = 'addr:country']/@v"/>
        <xsl:text>&#x09;</xsl:text>
        <xsl:value-of select="./tag[@k = 'addr:street']/@v"/>
        <xsl:text>&#x09;</xsl:text>
        <xsl:value-of select="./tag[@k = 'addr:city']/@v"/>
        <xsl:text>&#x09;</xsl:text>
        <xsl:value-of select="./tag[@k = 'addr:housenumber']/@v"/>
        <xsl:text>&#x0A;</xsl:text>
    </xsl:template>

    <!-- all non-restaurant nodes -->
    <xsl:template match="node[tag[@k='amenity' and @v!='restaurant']]" />

</xsl:stylesheet> 
```

# meteor - Meteor 的反应在幕后是如何工作的？

> ID：10260015
> 
> 赞同：66
> 
> 时间：2012-04-21T14:52:17.100
> 
> 标签：meteor

我已阅读[文档](http://docs.meteor.com/)并查看了[react 背后的来源](https://github.com/meteor/meteor/blob/master/packages/tracker/tracker.js)，但我不明白。

有人可以解释一下这是如何在幕后工作的，因为它对我来说就像魔法:)。

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-04-24T07:43:35.740

所以它实际上相当简单，在基本层面上涉及两种类型的功能：

1.  创建反应式上下文的函数（反应式函数）

2.  使反应性上下文无效的函数（使函数无效）

3.  两者兼得的功能。（我谎称有 3 个）

当您调用 a`reactive function`时，它会创建一个`context`该流星全局存储并`reactive function`订阅`invalidation`回调的流星。传递给响应式函数的函数，或在其中运行的任何函数，都可以是一个`invalidating function`并且可以获取电流`context`并将其存储在本地。然后，这些函数可以在任何时候，例如在数据库更新或简单的计时器调用中，使`context`. 然后原件`reactive function`将接收该事件并重新评估自己。

这是使用流星函数的一步一步（注意`Tracker.autorun`曾经被称为`Deps.autorun`）：

```
Tracker.autorun(function(){ 
  alert("Hello " + Session.get("name"));
});

Session.set("name", "Greg"); 
```

1.  autorun 将函数作为其参数
2.  在 autorun 运行这个函数之前，它会创建一个`context`
3.  autorun 将回调附加到`context`的失效事件
4.  此回调将重新运行传递给 autorun 的函数
5.  然后第一次运行该函数`context`。
6.  Meteor 将此`context`全局存储为当前活动的`context`
7.  函数内部是另一个函数：Session.get()
8.  Session.get() 既是一个`reactive function`又是一个`invalidating function`
9.  Session.get 设置它自己的`context`并在内部将其与键“名称”相关联
10.  Session.get 从 meteor 全局检索当前上下文（自动运行的上下文）
11.  Session.get 注册到它自己的上下文的失效回调，只会使它的封闭上下文失效（在这种情况下，自动运行的上下文）
12.  所以现在我们有 2 个上下文，autorun 和 session.get
13.  当这些函数返回时，meteor 清理活动上下文全局变量

14.  Session.set 是另一个能够使`context`.

15.  在这种情况下，我们将`context`Session 创建的与键“name”关联的所有 s无效
16.  所有这些`contexts`在失效时都会运行它们的失效回调。
17.  这些回调只是使其封闭`context`的 s 无效（这是 Session.get 的设计，而不是无效回调必须做的）
18.  那些封闭`contexts`的现在运行它们的失效回调。
19.  在自动运行的情况下，该回调运行我们最初传递给自动运行的函数，然后`context`再次设置。

**整个实现实际上也相当简单，你可以在这里看到它：**
[https ://github.com/meteor/meteor/blob/master/packages/tracker/tracker.js](https://github.com/meteor/meteor/blob/master/packages/tracker/tracker.js)

**一个很好的例子可以在这里找到：**
[https ://github.com/meteor/meteor/blob/master/packages/reactive-dict/reactive-dict.js](https://github.com/meteor/meteor/blob/master/packages/reactive-dict/reactive-dict.js)

**反应式编程实际上不是流星或 JS 特定的**
，您可以在此处阅读：[http ://en.wikipedia.org/wiki/Reactive_programming](http://en.wikipedia.org/wiki/Reactive_programming)

# dapper - 将 int 转换为 bool (Sqlite) 时，Dapper 失败

> ID：10260020
> 
> 赞同：1
> 
> 时间：2012-04-21T14:52:55.490
> 
> 标签：dapper

我有一个带有 IsValid 列的表，具有 int 数据类型（Sqlite）。当从中选择 Dapper 失败时：

{“错误解析列 0 (IsValid=1 - Int32)”} {“指定的转换无效。”}

这是有道理的，但它必须是一个非常普遍的情况——不应该考虑吗？

这是代码：

```
public void Test()
{
    string conns = @"Data Source=mydbfile.db3;Version=3;";
    string sql = null;
    using (SQLiteConnection connection = new SQLiteConnection(conns))
    {
        connection.Open();
        sql = "INSERT INTO Test (IsValid) VALUES (1)";
        connection.Execute(sql);
        sql = "SELECT * FROM Test";
        var x = connection.Query<Valid>(sql);
    }
}

private class Valid
{
    public bool IsValid { get; set; }
} 
```

表有一个 int 类型的“IsValid”列。

# c# - C++ (Intel) vs Java (Hotspot) vs C# 基准测试问题（包括代码和结果）

> ID：10260021
> 
> 赞同：3
> 
> 时间：2012-04-21T14:52:58.957
> 
> 标签：c#, java, c++, performance, caching

我一直在比较三种主要语言之间的原始 CPU 性能速度（代码和结果如下）。我很好奇主要语言如何比较原始计算能力。我有一个理论认为，在不涉及内存开销的情况下，Java 和 C# 可能会与 C++ 相媲美。

我的问题：

1) 编辑（C++ 时序现在更现实）

2）我认为JVM在第一次迭代中花费了很长时间，但是第二次它已经完成了分析并因此进行了优化，这是否正确？Hotspot 怎么知道在我的外部循环的第一次迭代之后完成优化而不是进行到一半？

3) 为什么 C# 不像 Java 那样执行并且一开始就进行了大量优化？C# 与 Java 有什么不同？为什么 C# 速度较慢 - 仅仅是因为优化较少？

4) C# 测试时序在 2246 和 2262 毫秒之间振荡是否有任何具体原因，这可能是两个不同的时间，因为 CPU 有两个内核？

**编辑：更新代码以显示 C# 代码中的秒表用法。**

**编辑：更正 C++ 时序代码和结果**

设置：

*   C++：VS2010 和 Intel 编译器（内置发布模式，优化：O2，启用内在函数：是，偏爱大小和速度：不支持，省略帧指针：否，启用光纤安全优化：否，整个程序优化：是）

*   Java：Eclipse、Hotspot 64 位编译器版本 17、Java 1.6

*   C#：VS2010 和 .net 4.0（内置发布模式）

*   CPU：Intel E6600 (2.4GHz)，运行频率为 2.7GHz，总线速度 300MHz，8GB 内存，DRAM 频率：375MHz

*   赢 7（64 位）

**C++ 代码：**

```
#include "stdafx.h"
#include <iostream>
#include <stdio.h>
#include <windows.h>
#include <mmsystem.h>
#include <stdio.h>
#include <fstream> 

using namespace std;

double PCFreq = 0.0;
__int64 CounterStart = 0;

void StartCounter()
{
    LARGE_INTEGER li;
    if(!QueryPerformanceFrequency(&li))
        cout << "QueryPerformanceFrequency failed!\n";

    PCFreq = li.QuadPart;

    QueryPerformanceCounter(&li);
    CounterStart = li.QuadPart;
}
double GetCounter()
{
    LARGE_INTEGER li;
    QueryPerformanceCounter(&li);
    return double(li.QuadPart-CounterStart)/PCFreq;
}

static long counter = 0;

int _tmain(int argc, _TCHAR* argv[])
{

    for (int m = 0; m < 10; m++)
    {
        StartCounter();
        counter = 0;

        for (int j = 0; j < 3; j++)
        {
            //Just to test timing is working correctly
            //int* p = new int;

            for (long i = 0; i < 200000000; i++)
            {
                counter++;
            }
        }

        cout << GetCounter()*1000000 << " microseconds" << endl;
    }

    int p = 0;
    cin >> p;
    return 0;
} 
```

**C++ 结果：**

> 7.19 微秒
> 
> 1.89
> 
> 2.27
> 
> 1.51
> 
> 4.92
> 
> 10.22
> 
> 10.22
> 
> 9.84
> 
> 9.84
> 
> 10.6

**Java代码：**

```
public class main {

    static long counter = 0;

    public static void main(String[] args) {

        for(int m=0; m<10; m++){
            long start = System.nanoTime();
            counter = 0;

            for(int j=0;j<3; j++){
                for(long i=0; i<200000000; i++){
                    counter++;
                }
            }

            System.out.println(((System.nanoTime()-start)/1000000) + " ms");
        }
    }
} 
```

**Java结果：**

```
5703 milliseconds
471 ms
468 ms
467 ms
469 ms
467 ms
467 ms
467 ms
469 ms
464 ms 
```

**C#代码：**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Diagnostics

namespace t1
{
    class Program
    {
        static long counter = 0;

        static void Main(string[] args)
        {
            for (int m = 0; m < 10; m++)
            {
                Stopwatch s = new Stopwatch();
                s.Start();
                counter = 0;

                for (int j = 0; j < 3; j++)
                {

                    for (long i = 0; i < 200000000; i++)
                    {
                        counter++;
                    }

                }
                s.Stop();
                Console.WriteLine(s.Elapsed.TotalMilliseconds + " ms");
            }

            Console.ReadLine();
        }
    }
} 
```

**C# 结果：**

> 2277 毫秒
> 
> 2246 毫秒
> 
> 2262 毫秒
> 
> 2246 毫秒
> 
> 2262 毫秒
> 
> 2246 毫秒
> 
> 2262 毫秒
> 
> 2246 毫秒
> 
> 2262 毫秒
> 
> 2262 毫秒

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T15:20:40.513

您的 C++ 代码中有一个逻辑问题，它使用[`QueryPerformanceFrequency`](http://support.microsoft.com/kb/172338)：

```
PCFreq = double(li.QuadPart)/1000000000.0; // <- this is not correct
PCFreq = li.QuadPart;                      // <- this is correct 
```

您应该在打印代码中分配`li.QuadPart`并`PCFreq`转换为毫秒或纳秒：

```
// convert from seconds to milliseconds
cout << GetCounter() * 1000.0 << endl; 
```

通过此更改，我可以获得 C++ 代码的实际时间。无论这些时间是否“有效”或在进行比较时是否有用，我都不会发表评论。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T15:32:29.500

1 - Sixlettervariables 似乎已经指出了你在这个问题上的错误

2 - 热点将优化代码。这是一个类似的问题，它也看到循环加速了 10 倍。所以你看到的是预期的输出。 [第一次 Java 循环运行缓慢，为什么？[太阳热点 1.5，sparc]](https://stackoverflow.com/questions/860231/first-time-a-java-loop-is-run-slow-why-sun-hotspot-1-5-sparc)

3 - 我对 C# 的了解不够，无法提供帮助。它可能没有优化内部循环（你有 3 个不同的循环）。也许尝试将您正在测试的 2 个循环提取到一个完全独立的方法中，看看是否有帮助。

4 - DateTime 是表示日期和时间，而不是高精度计时。因此，它不是那么准确。据我所知，DateTime.Now 的分辨率为 10 毫秒

（仅供参考，这篇文章对 JIT、C# 和 C++ 优化有一些很好的解释，可能会对您有所帮助：[C++ 性能与 Java/C#](https://stackoverflow.com/questions/145110/c-performance-vs-java-c)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T14:58:59.603

我认为编译器可能会在编译时计算计数器的值并且不会遍历您的循环。

我认为一个简单的计数器是一个非常糟糕的基准。

顺便说一句，尝试在方法中运行 java 代码。由于 JIT 优化，它可能会更快。（但我不确定）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-21T15:45:09.487

各种编译器的基准测试已经完成并很好地组合在一起。

[计算机语言基准游戏](http://benchmarksgame.alioth.debian.org/)

[Java 7 服务器与 GNU C++](http://benchmarksgame.alioth.debian.org/u32/compare.php?lang=gpp&lang2=java)

[C# Mono 与 GNU C++](http://benchmarksgame.alioth.debian.org/u32/compare.php?lang=gpp&lang2=csharp)

[C# Mono 与 Java 7 服务器](http://benchmarksgame.alioth.debian.org/u32/csharp.html)

虽然 Java 7 Server 比 C# Mono 2.10.8 更快，但请查看 Java 7 使用的内存量。

# jquery - jquery slideUp/Down 函数只能在带有 firebug 的 firefox 中工作；另外，悬停功能似乎不起作用

> ID：10260022
> 
> 赞同：1
> 
> 时间：2012-04-21T14:53:05.457
> 
> 标签：jquery, hover, firebug, z-index, slidetoggle

在过去的几个小时里，我一直在谷歌上搜索答案，并且在 stackoverflow 上出现了很多类似的实例，但似乎没有一个答案对我有用。

只是真的想作为初学者/中级用户学习/使用 JQuery，所以我希望我只是犯了一些简单的错误。可能没有帮助我正在处理的页面依赖于大约 14 个不同的 z-index 级别来获得我想要的效果。

我正在尝试设计一个看起来有点像文件夹的投资组合。理想情况下，如果我将鼠标悬停在代表“艺术品”的 div 上，一个彩色的空白矩形将从 div 后面向上滑动。如果我单击，则会加载一个新页面，其中包含更传统的画廊。

我尝试了两种不同的方法，其工作/非工作结果非常混合。这是我的脚本标签在 head 部分中的样子：

```
<script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
<script type="text/javascript">
function showHiddenDivHover(thechosenone) {
    $('div[name|="foliosheet"]').each(function(index) {
      if ($(this).attr("id") == thechosenone) {
           $(this).slideDown(600);
      }
      else {
           $(this).slideUp(600);
      }
 });
}
function hideHiddenDivHover(thechosenone) {
    $('div[name|="foliosheet"]').each(function(index) {
    if ($(this).attr("id") == thechosenone) {
           $(this).slideUp(600);
      }
      else {
           $(this).slideDown(600);
      }
 });
}
$("#info").hover(function () {
    $("#info-sheet").slideToggle("slow");
});
$("#artwork").hover(function () {
    $("#artwork-sheet").slideToggle("fast");
});
</script> 
```

第一个基于我在 randomsnippets.com 上 Allen Liu 的教程中找到的示例。我将它设计为与“a”标签中的 onMouseOver() 和 onMouseOut() 一起使用。它有点工作，因为堆栈顶部的第一个 div 运行良好，然后其他 6 个没有；但是，如果我打开 firebug 扩展，其余的 div 就会开始按需要显示（大部分情况下）。

第二种技术基于我在 JQuery 文档中看到的内容以及关于 stackoverflow 和 JSFiddle 示例的类似问题（如[http://jsfiddle.net/nick_craver/JcBAd/](http://jsfiddle.net/nick_craver/JcBAd/)）。

下面是正文中的一些 HTML 的样子：

```
 <div id="artwork"><a href="#" onMouseOver="javascript:showHiddenDivHover('artwork-sheet')" onMouseOut="javascript:showHiddenDivHover()">   
<img src="assets/transparent_long.png" alt="artwork" width="1200" height="35"></a></div>
    <div name="foliosheet" id="artwork-sheet"></div>

<div id="artwork"><div id="artwork-sheet"></div></div> 
```

以下是相关 CSS 的样子：

```
#artwork {
z-index: 170;
position: absolute;
height: 500px;
background-repeat: no-repeat;
overflow: hidden;
top: 400px;
width: 1200px;
margin-left: 30px;
border: 2px solid red;
background-image:url(../assets/file_artwork.png);
}
#websites {
background-repeat: no-repeat;
overflow: hidden;
position: absolute;
z-index: 150;
height: 500px;
top: 360px;
width: 1200px;
margin-left: 30px;
background-image:url(../assets/file_websites.png);
}
#threedmodels {
z-index: 130;
position: absolute;
height: 500px;
background-repeat: no-repeat;
overflow: hidden;
top: 320px;
width: 1200px;
margin-left: 30px;
background-image:url(../assets/file_3dmodels.png);
}
#games {
z-index: 110;
position: absolute;
height: 500px;
background-repeat: no-repeat;
overflow: hidden;
top: 280px;
width: 1200px;
margin-left: 30px;
background-image:url(../assets/file_games.png);
}
#movies {
/* border: 2px solid red; */
z-index: 90;
position: absolute;
height: 500px;
background-repeat: no-repeat;
overflow: hidden;
top: 240px;
width: 1200px;
margin-left: 30px;
background-image:url(../assets/file_movies.png);
}
#flash {
z-index: 70;
position: absolute;
height: 500px;
background-repeat: no-repeat;
overflow: hidden;
top: 200px;
width: 1200px;
margin-left: 30px;
background-image:url(../assets/file_flash.png);
}
#info {
z-index: 50;
position: absolute;
height: 500px;
background-repeat: no-repeat;
overflow: hidden;
top: 160px;
width: 1200px;
margin-left: 30px;
background-image:url(../assets/file_info.png);
}
#artwork-sheet {
width: 1100px;
height: 100px;
margin-left: 100px;
background-color:#ff0000;
display: none;
position: absolute;
bottom: 400px;
z-index: 160;
}
#websites-sheet {
width: 1100px;
height: 100px;
margin-left: 100px;
background-color:#006F00;
display: none;
position: absolute;
bottom: 360px;
z-index: 140;
}
#threedmodels-sheet {
width: 1100px;
height: 100px;
margin-left: 100px;
background-color:#0000F5;
display: none;
position: absolute;
bottom: 320px;
z-index: 120;
}
#games-sheet {
width: 1100px;
height: 100px;
margin-left: 100px;
background-color:#E76000;
display: none;
position: absolute;
bottom: 280px;
z-index: 100;
}
#movies-sheet {
width: 1100px;
height: 100px;
margin-left: 100px;
background-color:#80A2AA;
display: none;
position: absolute;
bottom: 240px;
z-index: 80;
}
#flash-sheet {
width: 1100px;
height: 100px;
margin-left: 100px;
background-color:#AE21B1;
display: none;
position: absolute;
bottom: 200px;
z-index: 60;
}
#info-sheet {
width: 1100px;
height: 100px;
margin-left: 100px;
background-color:#0079D6;
display: none;
position: absolute;
bottom: 160px;
z-index: 40;    
} 
```

我知道这是一种复杂的安排，但静态图像/div 会根据需要显示。我倾向于在我的小项目中走得更远，但希望有人能伸出援手。

去年我玩了更多的本土/修改代码。如果有人感兴趣，可以在[http://www.authenticrubydesigns.com/portfolio看到。](http://www.authenticrubydesigns.com/portfolio)使用圆形布局和旋转，但有时处理速度太慢，而且它的设计限制了我。偶尔焕然一新并没有错。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T15:20:32.993

您可能想尝试使用[jQuery 的动画功能。](http://api.jquery.com/animate/)它可能会使事情变得不那么棘手，因为你有很多 CSS 正在进行，你也可以通过在 animate 对象中添加更多参数来操作它。

向上滑动：

```
$(this).animate({top: '-=50'},600,function(){
  //callback goes here
}); 
```

滑下：

```
$(this).animate({top: '+=50'},600,function(){
  //callback goes here
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T02:56:58.817

我不完全确定一切是如何开始工作的，但我已经解决了我的基本问题。需要一些调整帮助，但我可能会为此开始一个新问题。

添加 document.ready 可能是一个好处。但真正的机械解决方案似乎是修改我的 CSS 和使用“幻灯片”功能切换到/加载 JQueryUI 库的组合。“slideToggle”可能也可以机械地工作，但它只是从上到下滑动，这破坏了看到一张纸从文件夹中升起的伪效果。

在我的 CSS 中，我注释掉了我的“底部”定位。我认为这真的是把位置扔掉了。此外，我发现尽管为 *-sheet id 指定了 z-index 级别，但它们从父调用者那里继承了 z-index 值。因此，我还必须修改我的 HTML 以将 *-sheet div 的文档中的位置放置在行中的下一个 div 内，它以图形方式将 div 放置在调用 div 后面。

这是我基于“幻灯片”API 编写的新 JQuery 代码：

```
 $("#artwork").hover(function () {
    $("#artwork-sheet").show("slide", { direction: "down" }, 1000);
    $("#artwork-sheet").hide("slide", { direction: "down" }, 1000);
});
$("#websites").hover(function () {
    $("#websites-sheet").show("slide", { direction: "down" }, 1000);
    $("#websites-sheet").hide("slide", { direction: "down" }, 1000);
});
$("#threedmodels").hover(function () {
    $("#threedmodels-sheet").show("slide", { direction: "down" }, 1000);
    $("#threedmodels-sheet").hide("slide", { direction: "down" }, 1000);
});
$("#games").hover(function () {
    $("#games-sheet").show("slide", { direction: "down" }, 1000);
    $("#games-sheet").hide("slide", { direction: "down" }, 1000);
});
$("#movies").hover(function () {
    $("#movies-sheet").show("slide", { direction: "down" }, 1000);
    $("#movies-sheet").hide("slide", { direction: "down" }, 1000);
});
$("#flash").hover(function () {
    $("#flash-sheet").show("slide", { direction: "down" }, 1000);
    $("#flash-sheet").hide("slide", { direction: "down" }, 1000);
});
$("#info").hover(function () {
    $("#info-sheet").show("slide", { direction: "down" }, 1000);
    $("#info-sheet").hide("slide", { direction: "down" }, 1000);
}); 
```

再次感谢你的帮助。我认为它帮助我朝着正确的方向前进。另外，我在澳大利亚，所以我在午夜之后写作。也许休息一下也有一点帮助。:)

-艾伦

# android - 除了android中的硬编码值之外，还有其他方法可以设计UI吗

> ID：10260023
> 
> 赞同：0
> 
> 时间：2012-04-21T14:53:27.313
> 
> 标签：android, android-layout, layout, user-interface

当我浏览几个 android 示例时，我发现一些值是硬编码的，

例如：

```
<ImageView
    android:id="@+id/icon"
    android:layout_width="22px"
    android:layout_height="22px"
    android:layout_marginLeft="4px"
    android:layout_marginRight="10px"
    android:layout_marginTop="4px"
    android:src="@drawable/ic_launcher" >
</ImageView> 
```

在这个图像视图值是硬编码的，对于我的自定义布局..如何避免这些硬编码？这是android中的正确方法吗？它对各种屏幕尺寸的设备有影响吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T14:57:15.973

您需要阅读一些开发者文档：

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html) [http://developer.android.com/guide/practices/screens_support.html#screen-independence](http://developer.android.com/guide/practices/screens_support.html#screen-independence)

不：

```
<ImageView
    android:id="@+id/icon"
    android:layout_width="22px"
    android:layout_height="22px"
    android:layout_marginLeft="4px"
    android:layout_marginRight="10px"
    android:layout_marginTop="4px"
    android:src="@drawable/ic_launcher" >
</ImageView> 
```

以上将无法很好地跨屏幕缩放

是的：

```
<ImageView
    android:id="@+id/icon"
    android:layout_width="22dip"
    android:layout_height="22dip"
    android:src="@drawable/ic_launcher" >
</ImageView> 
```

以上将每个设备“独立”缩放其像素

或者

```
<ImageView
    android:id="@+id/icon"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:src="@drawable/ic_launcher" >
</ImageView> 
```

以上将相对于屏幕尺寸绘制自身

或者

```
<ImageView
    android:id="@+id/icon"
    android:layout_width="0dip"
    android:layout_weight="1"
    android:layout_height="22dip"
    android:src="@drawable/ic_launcher" >
</ImageView> 
```

以上将相对于屏幕大小和屏幕上的其他视图绘制自身

或者

```
ImageView imageView = new ImageView(this);
        imageView.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
        imageView.setImageDrawable(R.drawable.background);

        layout.addView(imageView); 
```

以上是以编程方式创建的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T14:55:35.020

最好使用“dp”单位而不是“px”。

DP 会随屏幕大小调整，而不是 PX。

请参阅[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T14:56:41.373

> 在这个图像视图值是硬编码的，对于我的自定义布局..如何避免这些硬编码？

首先，通常不应将`px`其用作尺寸，因为硬件像素的大小会根据屏幕密度而变化。使用`dp`或其他度量单位（例如，`mm`）。

其次，如果您有计划重用的维度，或者您只是希望在一个地方收集它们的值，请使用[维度资源](http://developer.android.com/guide/topics/resources/more-resources.html#Dimension)。然后，您的布局将引用这些资源（例如，`android:layout_marginTop="@dimen/something"`）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T14:56:55.640

值应该在“dp”或“dpi”中，不同的android设备会相应地调整。

这将对您有所帮助：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

# iphone - 从服务器保存和检索核心数据

> ID：10260027
> 
> 赞同：1
> 
> 时间：2012-04-21T14:53:53.013
> 
> 标签：iphone, ios, core-data, restkit

我打算使用核心数据来存储我的数据。我希望用户添加一些数据或更新他之前添加的一些数据。我将使用服务器将核心数据保存在上面，我在这里阅读了一些问题，答案是使用 RESTKit。但我不确定这是否是正确的选择，我的问题是我之前所说的保存数据并使用核心数据从服务器检索数据很简单吗？如果有人对我有教程，可以向我解释很多事情，比如我的想法：/

我做了设计，我现在拥有所有实体的核心数据，如用户实体和照片实体。

我希望我把我的问题说清楚了>_< 感谢您阅读我的问题：$

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T14:56:20.510

我喜欢AFNetworking。如果您编写 Web 服务以使用 JSON，这是 IMO 的绝佳选择。如果您正在使用基于 XML 的 Web 服务并且不想/不能更改为 JSON，那么 TBXML 是解析 XML 的绝佳选择。

# android - Facebook签到android教程

> ID：10260035
> 
> 赞同：0
> 
> 时间：2012-04-21T14:54:49.420
> 
> 标签：android, facebook

我希望我的应用程序用户从我的应用程序签到他们的 Facebook 帐户。这可能使用facebook sdk吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T16:10:58.210

您看过 Android 版 Hackbook 吗？[http://developers.facebook.com/docs/mobile/android/hackbook/](http://developers.facebook.com/docs/mobile/android/hackbook/)

请参阅此处的签入示例

[https://github.com/facebook/facebook-android-sdk/blob/master/examples/Hackbook/src/com/facebook/android/Places.java](https://github.com/facebook/facebook-android-sdk/blob/master/examples/Hackbook/src/com/facebook/android/Places.java)

# oracle - 代码路线图背后的数据字典和功能

> ID：10260040
> 
> 赞同：1
> 
> 时间：2012-04-21T14:55:51.710
> 
> 标签：oracle, oracle11g, toad

我正在寻找 Toad 提供的代码路线图功能，该功能显示对象的依赖关系。

谁能告诉我 Toad 生成依赖项的依据是什么？我假设存在一个数据字典视图，`dba_dependencies` 它在后端工作以获取这种关系。

那么我们可以编写一个脚本来传递对象名称，如包名、table_name 等，以显示我传递的对象的依赖关系。

在代码路线图中，有一个为表格生成数据的选项......这是如何工作的？

它背后的算法是什么？如果子表有外键，而父表是空的，这是怎么回事？它将如何首先填充依赖表，然后填充子表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T05:15:12.880

查看`user_depencies`/`dba_dependencies`视图结构，查询列`REFERENCED_NAME`等于您要查询的对象的视图应该为您提供一个对象列表，其中引用了您正在搜索的对象。

* * *

第二个问题太宽泛了，可能只有 Toad 开发人员知道他们是如何实现它的。数据字典提供有关表上各种约束的信息。我的猜测是该算法着眼于数据字典并具有不同的代码路径来处理约束/主子关系。另一个假设是使用已处理的异常来确保干净地生成数据。

# c# - 在 Windows 8 中处理方向

> ID：10260042
> 
> 赞同：5
> 
> 时间：2012-04-21T14:56:06.983
> 
> 标签：c#, xaml, windows-8, microsoft-metro

想要创建一个 Metro 风格的 Windows 8 应用程序，它不会`Grid`在所有内容处于`Portrait`模式下旋转根目录。我想在`Code`和 by中处理方向`Visual States`，但是现在当我旋转设备时，所有内容都会自动旋转并填充新的宽度和高度。

如何禁用这种旋转行为，即禁用`Portrait`方向，但仍然能够获取有关方向变化的事件？

另外，`Windows.Graphics.Display.DisplayProperties.AutoRotationPreferences`似乎不起作用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T07:51:47.447

Double click the "Package.appxmanifest" file in your metro app project, you should see configurations of your app. In the "Application UI" page, you can find "Supported rotations" in the middle. You can check the mode you supported, and leave the "Portrait" mode unchecked. Then you app will not receive any "portrait" mode events anymore.

If you write your own appx manifiest, you can add following block under section, like this

```
 <InitialRotationPreference>
      <Rotation Preference="landscape" />
      <Rotation Preference="portraitFlipped" />
      <Rotation Preference="landscapeFlipped" />
    </InitialRotationPreference> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T07:45:57.427

抱歉，我错过了您的主要问题。我认为您无法在纵向模式事件之后更改根元素的“旋转”。因为它实际上并没有相对于屏幕旋转，而是屏幕大小发生了变化。

但是，我想您仍然希望用户在纵向模式事件之后以横向模式查看您的应用程序。您可以对抗感知到的旋转。您可以将业务逻辑放在另一个没有预定义大小的用户控件中。将此用户控件放在根页面中。当您收到纵向模式事件时，您将页面 ActualWidth 分配给用户控件高度，将页面 ActualHeight 分配给用户控件宽度，给用户控件一个 90 度的渲染变换和渲染变换中心 x=height*0.707/width, y=0.5,那么用户控件应该与横向模式位置对齐。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T22:02:34.977

当 Windows 说您处于纵向模式时，将 rotatetransform 添加到您的根元素中，以应对这种情况并保持呈现纵向的内容

# java - Android 我需要这种用于我自己的数据库的建议列表

> ID：10260046
> 
> 赞同：0
> 
> 时间：2012-04-21T14:56:37.923
> 
> 标签：java, android, eclipse

我正在为乌尔都语开发一个应用程序，并且我有自己的数据库。我想显示这样的乌尔都语单词：

![词建议](../Images/823a0752b698d435b3981f7231580024.png)

任何人都可以帮忙吗？

提前致谢..

PS：我尝试过自动完成文本，但这仅适用于一个单词。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T15:06:25.280

您可以使用 AutoCompleteTextView，它会完成该任务。此链接将帮助您 [http://developer.android.com/resources/tutorials/views/hello-autocomplete.html](http://developer.android.com/resources/tutorials/views/hello-autocomplete.html)

# ruby - 优雅的链式“或”用于在 Ruby 中对同一变量进行测试

> ID：10260050
> 
> 赞同：5
> 
> 时间：2012-04-21T14:56:44.097
> 
> 标签：ruby

有什么明智的说法。

```
if @thing == "01" or "02" or "03" or "04" or "05" 
```

（数字包含在一列数据类型字符串中。）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-21T14:58:41.087

制作一个数组并使用`.include?`

```
if ["01","02","03","04","05"].include?(@thing) 
```

如果值真的都是连续的，你可以使用像`(1..5).include?` For strings 这样的范围，你可以使用：

```
if ("01".."05").include?(@thing) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T15:05:57.583

或者使用 case 语句：

```
case @thing
when "01", "02", "03", "04", "05"
  # do your things
end 
```

这种方法的两种变体：

```
case @thing
when "01".."05"
  # do your things
end

case @thing
when *%w[01 02 03 04 05]
  # do your things
end 
```

因为`case`uses `===`，你也可以这样写：`("01".."05") === @thing`

# android - 在 Android 中更新列表视图

> ID：10260051
> 
> 赞同：1
> 
> 时间：2012-04-21T14:56:44.850
> 
> 标签：android, listview

我为一些游戏制作了一个列表视图，当一个游戏被删除时，我希望它在列表视图中消失。我正在尝试使用 adapter.notifyDataSetChanged()，但我无法让它工作，你能帮帮我吗？

```
 public static final String MY_SETTINGS = "MySettings";
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    DBHelpeR entry = new DBHelpeR(Loadmenu.this);
    entry.open();
    final ArrayAdapter<String> adapter =  new ArrayAdapter<String>(this,R.layout.list_item,entry.getGameNames());

    setListAdapter(adapter);
    entry.close();

    ListView lv = getListView();
    lv.setTextFilterEnabled(true);
    lv.setBackgroundResource(R.drawable.background);
    final AlertDialog.Builder builder = new AlertDialog.Builder(this);
    lv.setOnItemLongClickListener(new OnItemLongClickListener(){
        public boolean onItemLongClick(AdapterView<?> parent, final View view,
                int position, long id) {

            String gamename = ((TextView) view).getText().toString();
            builder.setTitle("Slet " + gamename + "?");
            builder.setItems(new CharSequence[]{"Slet"} , new DialogInterface.OnClickListener() {

                // Click listener

                public void onClick(DialogInterface dialog, int item) {
                    DBHelpeR entry = new DBHelpeR(Loadmenu.this);
                    entry.open();
                    int game_id = entry.getGameID(((TextView) view).getText().toString());
                    Log.d("load",Integer.toString(game_id));
                    entry.deleteGame(game_id);
                    entry.close();
                    adapter.notifyDataSetChanged();
                }

            });
            builder.show();
            return true;
        }

    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T15:00:48.387

```
final ArrayAdapter<String> adapter =  new ArrayAdapter<String>(this,R.layout.list_item,entry.getGameNames()); 
```

用下面的 ::: 替换上面的行

```
ArrayList<String> entries = entry.getGameNames();
final ArrayAdapter<String> adapter =  new ArrayAdapter<String>(this,R.layout.list_item,entries); 
```

并且当您删除时，只需再次调用以下两行::

```
entries = entry.getGameNames();
adapter.notifyDataSetChanged(); 
```

更新：：

再次调用 adapter.notifyDataSetChanged(); 调用以下行::

```
final ArrayAdapter<String> adapter =  new ArrayAdapter<String>(getApplicationContext(), R.layout.list_item, entry.getGameNames());
setListAdapter(adapter); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T15:12:42.687

称呼

```
final ArrayAdapter<String> adapter =  new ArrayAdapter<String>(this,R.layout.list_item,entry.getGameNames());
setListAdapter(adapter); 
```

再次调用之前

```
adapter.notifyDataSetChanged(); 
```

注意：确保您已更改数组以使更改可见。

# ruby - 命令行上的 rhc-create-domain 出错 (Openshitft)

> ID：10260053
> 
> 赞同：1
> 
> 时间：2012-04-21T14:57:11.337
> 
> 标签：ruby, rubygems, openshift, linux-mint, openshift-client-tools

首先，我对 Ruby 了解不多，但是 Openshit 命令行使用“rhc”来管理我在云上的应用程序。很好！...但是'rhc'程序基于Ruby，Rubygems ....一些东西。

好的，我在 Linux Mint（基于 Ubuntu）上使用 apt-get 安装了这些程序：

```
sudo apt-get install ruby1.8
sudo apt-get install gem
sudo apt-get install rubygems
gem install json_pure
gem install rake
gem install rhc 
```

很好！..rhc 它在我的控制台中可见，但是当我尝试执行任何 rhc 命令时，控制台会为我返回：

```
rhc-create-domain -n carlosjr -l carlosjrcabello@gmail.com
/usr/local/lib/site_ruby/1.8/rubygems/dependency.rb:247:in `to_specs': Could not find rhc (>= 0) amongst [json-1.6.6, json_pure-1.6.6, mime-types-1.18, parseconfig-0.5.2, rest-client-1.6.7] (Gem::LoadError)
        from /usr/local/lib/site_ruby/1.8/rubygems/dependency.rb:256:in `to_spec'
        from /usr/local/lib/site_ruby/1.8/rubygems.rb:1231:in `gem'
        from /usr/local/bin/rhc-create-domain:18 
```

记住，我不知道我是否必须在 ruby​​ 或 RubyGem 中更新一些东西。

暂时没有了。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:06:07.183

我解决了这个问题。带有 KDE 的 Linux Mint 12 (Lisa) 包含已安装的基本 Ruby 包，因此我在安装所有必需的 RHC 应用程序之前清除了所有 ruby​​ 包。这是我的解决方案（在命令行中）：

```
sudo apt-get purge ruby* (caution with grub packages)

sudo reboot

sudo apt-get install ruby1.8
sudo apt-get install gem
sudo apt-get install rubygems
gem install json_pure
gem install rake
gem install rhc 
```

所有 rhc 功能现在应该可以工作了。

PS：我认为Openshift可以更多地解释Ruby应用程序的安装过程..以我的案例为例，我对Ruby一无所知：/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-10T17:38:30.917

我在 Ubuntu 12.04 上有同样的错误信息。在我的情况下，问题是 /var/lib/gems/ 不是世界可读的。

# windows - 在 Windows 7 上构建 Boost 1.49

> ID：10260057
> 
> 赞同：2
> 
> 时间：2012-04-21T14:57:38.297
> 
> 标签：windows, gcc, boost

我正在尝试在 Windows 上构建 Boost。我用[了这个](http://webcache.googleusercontent.com/search?q=cache%3aF-SjKkzNSbIJ%3afw-geekycoder.blogspot.com/2010/12/building-boost-using-mingw.html%20building%20boost%20mingw&cd=11&hl=bg&ct=clnk&gl=bg)例子。因此，在执行 'bjam toolset=gcc' 后，我收到以下错误：

```
**C:/boost/tools/build/v2/tools\gcc.jam:129: in gcc.init from module gcc
error: toolset gcc initialization:
error: no command provided, default command 'g++' not found
error: initialized from
C:/boost/tools/build/v2/build\toolset.jam:38: in toolset.using from module tools
et
C:/boost/tools/build/v2\build-system.jam:481: in process-explicit-toolset-reques
ts from module build-system
C:/boost/tools/build/v2\build-system.jam:562: in load from module build-system
C:\boost\tools\build\v2/kernel\modules.jam:283: in import from module modules
C:\boost\tools\build\v2\kernel\bootstrap.jam:142: in boost-build from module
C:\boost\boost-build.jam:17: in module scope from module** 
```

如何在 Windows 上编译那个东西？任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T18:42:29.987

我需要这样的一行：

```
using gcc : 4.7 : g++-4.7 ; 
```

在我的 user-config.jam 文件中（在 C:\Users\USER_NAME\user-config.jam 中找到）。

您可以从默认命令行（不修改 PATH 变量）运行程序 g++-4.7（或此处的版本号）吗？

# c++ - OpenCV，pthread - 在新线程中显示图像

> ID：10260067
> 
> 赞同：1
> 
> 时间：2012-04-21T14:59:01.587
> 
> 标签：c++, multithreading, image-processing, opencv, pthreads

我有一个从某个地方获取图像的主要功能，它应该显示在一个新线程中。这就是我正在做的事情：

```
int main(int argc, char** argv)
{
    Mat frame = imread("img.jpg");

    auto_ptr<SomeClass> thread1(new SomeClass(1, frame));
    auto_ptr<SomeClass> thread2(new SomeClass(2, frame));

    thread1->Start();
    thread2->Start();

    int result1 = reinterpret_cast<int>(thread1->Join());
    int result2 = reinterpret_cast<int>(thread2->Join());

    return 0;
} 
```

我找到了许多源代码来实现一个简单的 pthread 包装类，只要我不尝试将“cv::Mat 框架”图像传递给派生线程（通过其构造函数），这些源代码运行良好。

pthread 包装类：

```
/* ********************* THREAD.H ********************* */
extern "C++" class __declspec(dllexport) Thread 
{
public:
    Thread();
    virtual ~Thread(void);

    void Start(void);
    void* Join(void);

private:
    virtual void* Run(void) = 0;

    static void* StartThread(void* pVoid);

    pthread_t threadID_;
    pthread_attr_t threadAttribute_;
    void* result_;
};

/* ********************* THREAD.CPP ********************* */
Thread::Thread() {}

Thread::~Thread() {}

void* Thread::StartThread(void* pVoid) 
{
    Thread* aThread = static_cast<Thread*>(pVoid);
    aThread->result_ = aThread->Run();
    return aThread->result_;
}

void Thread::Start() 
{
    pthread_attr_init(&threadAttribute_);
    pthread_attr_setscope(&threadAttribute_, PTHREAD_SCOPE_SYSTEM);

    pthread_create(&threadID_, &threadAttribute_, Thread::StartThread, (void*)this);
    pthread_attr_destroy(&threadAttribute_);
}

void* Thread::Join() 
{
    pthread_join(threadID_, NULL);
    return result_;
} 
```

Thread 的子类如下所示：

```
/* ********************* SOMECLASS.H ********************* */
extern "C++" class __declspec(dllexport) SomeClass : public Thread
{
public:
    SomeClass(int id, cv::Mat& frame);
    ~SomeClass(void);

    virtual void* Run();
private:
    int id_;
    cv::Mat frame_;
};

/* ********************* SOMECLASS.CPP ********************* */
SomeClass::SomeClass(int id, cv::Mat& frame) : id_(id)
{
    frame_ = frame.clone();
}

SomeClass::~SomeClass(void) {}

void* SomeClass::Run() 
{
    cout << id_ << ", " << frame_.cols << ", " << frame_.rows << endl;

    imshow("frame " + id_, frame_);
    waitKey(1);

    return reinterpret_cast<void*>(id_);
} 
```

执行在行 imshow() 处中断......知道什么会导致这个问题或者我该如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T09:24:51.047

问题已解决。如果有人遇到类似的问题，那么：整个 OpenCV 项目需要在英特尔 TBB 支持下重建。（它适用于 OpenCV 2.3.1）

# php - 为什么我的 .php 扩展文件不能在 cgi-bin 文件夹（Linux 服务器）中作为 CGI 工作？

> ID：10260070
> 
> 赞同：2
> 
> 时间：2012-04-21T14:59:35.140
> 
> 标签：php, linux, hosting, cgi

**我最近从"www.domain.com"**购买了域名和托管服务。我的主机是“Linux 主机”。我用 PHP 准备了一个网站。当我在寻找托管功能时，有**PHP5**支持。之后，在网站配置中，我注意到 PHP5 支持仅作为**cgi 应用程序**提供。到目前为止，我还不知道 cgi 是什么。我研究了一下。我注意到有一个名为 cgi-bin 的目录。我将我的 php 文件放入其中，但给出了内部服务器错误。但在 cgi-bin 目录中，.cgi 扩展名有效。当我从 Internet 上查看时，我了解到必须在 .htaccess 或 httpd.conf 中添加一些处理程序。我无权访问这些文件，但我可以从我的主机中的“网站配置”添加一些处理程序。

我知道我做错了什么，但我不知道它是什么。谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T15:02:57.293

CGI 意味着 PHP 被配置为与您的 Web 服务器（通常是 apache）作为一个单独的进程运行，而不是 Web 服务器的模块。

您应该能够简单地将 php 文件放在您的 Web 根目录（通常在 /var/www 中），在浏览器中导航到该文件，它应该可以正常工作。

另外，请确保您在 /var/log/ 中检查您的 apache 日志

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T15:06:12.970

搜索托管文档。我打赌你需要`#!/path/to/php`在脚本的第一行添加。

# linux - netfilter 钩子函数内存引用使我的系统崩溃

> ID：10260071
> 
> 赞同：1
> 
> 时间：2012-04-21T14:59:50.823
> 
> 标签：linux, memory, pointers, kernel, memcmp

请看代码片段

```
char ipAddr[] = {192, 168, 88, 2};
struct iphdr *ip_hdr = (struct iphdr*)(some_valid_eth_hdr_pointer + 1);
if (0 == memcmp((void*)(ip_hdr->saddr), (void*)ipAddr, 4)) /*memcmp cause my whole system crashed*/
{
    printk("ip source addr matched\n");
} 
```

该代码是从**linux netfilter 挂钩函数**中提取的，这意味着**ip_hdr->saddr**可能属于内核空间内存，我很确定 ip_hdr 指向有效内存。仍然不知道问题是什么，所以请帮助我。

提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T16:28:42.480

好吧，这是你的问题：

```
memcmp((void*)(ip_hdr->saddr), ... 
```

这会将源 IP 地址解释为指针。你想做的是这样的：

```
memcmp(&ip_hdr->saddr, ...) 
```

# node.js - nodejs：多次运行长命令

> ID：10260072
> 
> 赞同：0
> 
> 时间：2012-04-21T14:59:51.833
> 
> 标签：node.js, process, spawn

我有一个命令需要执行三遍。它生成大量输出到标准输出，大约需要一分钟。三个命令完成后，应该执行第四个（不同的）命令。shell 脚本如下所示：

```
#!/bin/sh
command arg1 arg2
command arg1 arg2
command arg1 arg2
something_else 
```

我正在考虑`child_process.exec()`在循环中使用，但它会缓冲标准输出直到它完成（对吗？）。我需要立即向用户提供反馈，因此将标准输出缓冲一秒钟以上并不是一个好主意。所以我需要使用`child_process.spawn()`，但异步处理让我有点发疯。我正在考虑将 spawn 调用放在这样的函数中：

```
fucnction myfunc(runs) {
   if (runs >= 1) {
       myproc = spawn(...)
       myproc.on('exit',function() { myfunc(runs - 1) })
   }
} 
```

我认为这会起作用。但是有更好的方法吗？我在unix，也许是windows系统。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T15:04:29.633

节点模块 async 具有您可以在一段代码中并行完成所有工作的功能。

查看异步（https://github.com/caolan/async）

还可以查看集群（http://nodejs.org/docs/latest/api/cluster.html）

# c# - WebRequest 类将数据发布到登录表单

> ID：10260080
> 
> 赞同：0
> 
> 时间：2012-04-21T15:00:39.633
> 
> 标签：c#, console-application, webrequest

我想使用 WebRequest 类将数据发布到网站。这很好用，但是我发布到的网站需要 cookie/会话（它是一个登录表单）。登录后，我需要检索一些帐户信息（这是特定页面上的信息）。

如何确保登录信息已被存储？在 AutoIT 中，我使用隐藏的网络浏览器完成了此操作，但是我想为此使用控制台应用程序。

我当前的代码（登录）太长，无法在此处发布，因此可以在[此处](http://pastebin.com/FuT8hLv5)找到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T15:25:16.470

您需要存储登录后获得的 cookie，然后在请求包含个人信息的页面时发送该 cookie。

这是一个[在 WebRequest 中使用 cookie 的示例](https://stackoverflow.com/questions/4158448/c-sharp-webrequest-using-cookies)

您可能无法连接，因为会话已结束，因此在这种情况下您需要重新登录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T15:28:57.647

看看我在[bitbucket上的](https://bitbucket.org/m0sa/aspxsessionscraper)[aspx 会话刮板](https://bitbucket.org/m0sa/aspxsessionscraper/src/991001ee6efd/AspxSessionScraper/AspxSessionScraper.cs)。它完全符合您的要求，包括一些特定于 aspx webforms 的扩展，例如发送回发等。

# c# - 将文本框数据保存到 .txt 文件并在另一个表单文本框中显示数据

> ID：10260082
> 
> 赞同：0
> 
> 时间：2012-04-21T15:00:53.730
> 
> 标签：c#, winforms

我正在创建一个简单的应用程序来从文本框中捕获客户数据并将其保存在驱动器 C 中的文本文件中，字符串由逗号分隔。并在第二个表单上显示存储的数据，该表单由一个按钮从第一个表单激活我到目前为止编写的代码如下，有人可以帮我解决我哪里出错了。

该代码编译没有错误，但它显示警告： `variable FILE in form2 is declared but not used..`。当我在没有调试的情况下开始时，它会崩溃并报告错误：

> 'InvoiceDataAppGaoria.Form2' 的类型初始化程序引发异常（Form2 F2=new Form2()）

当我将数组元素分配给文本框时，IDE（visual studio 2008）会报告错误。

**表格2**

```
namespace InvoiceDataAppGaoria
{
    public partial class Form2 : Form
    {
        static string FILE = @"C:\Csharp\coursework1\maucha.txt";
        static FileStream outFile = new FileStream("FILE", FileMode.Open, FileAccess.Read);
        static StreamReader read = new StreamReader("FILE");
        static string line = read.ReadLine();
        static string[] values = line.Split(',');
        string invoicetxt = values[0];
        string lname = values[1];
        string fname = values[2];
        string AMT = values[3];

        public Form2()
        {
            InitializeComponent();
        }

    }
} 
```

**表格1**

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Collections;
using System.IO;

namespace InvoiceDataAppGaoria
{
   public partial class Form1 : Form
    {
      const string DELIM = ",";
      const string FILENAME = @"C:\Csharp\coursework1\maucha.txt";
      int invoNum;
      string lname,fname;
      double AMT;
      static FileStream outFile = new    FileStream("FILENAME",FileMode.Create,FileAccess.Write);
      StreamWriter writer = new StreamWriter(outFile);
      public Form1()
      {
        InitializeComponent();
      }

      private void button1_Click(object sender, EventArgs e)
      {
        invoNum = Convert.ToInt32(invoicetxt.Text);
        lname = lnameBox.Text;
        fname = fnameBox.Text;
        AMT = Convert.ToDouble(amtBox.Text);
        writer.WriteLine(invoNum+DELIM+lname+DELIM+fname+DELIM+AMT);
      }
      private void button2_Click(object sender, EventArgs e)
      {
        Form2 F2 = new Form2();
        F2.Show();
      }

   }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T15:04:36.030

创建文件流时，使用*字符串* `"FILE"`而不是*变量* `FILE`。它应该看起来像这样：

```
static string FILE = @"C:\Csharp\coursework1\maucha.txt";
static FileStream outFile = new FileStream(FILE, FileMode.Open, FileAccess.Read);
static StreamReader read = new StreamReader(FILE); 
```

只是提到它：你应该真正命名你的变量`file`而不是`FILE`. 坚持共同的命名约定使阅读其他代码更加愉快。

# google-app-engine - Google App Engine / Google Apps 的最佳域名托管服务？

> ID：10260086
> 
> 赞同：1
> 
> 时间：2012-04-21T15:01:22.050
> 
> 标签：google-app-engine, google-apps

对 Google App Engine/Google Apps 的当前“最佳”域名托管服务商有何想法？

我的标准：

*   漂亮、可用的 UI（即，不是 GoDaddy）
*   支持通配符 CNAME（也不是 GoDaddy），与 App Engine 中的通配符映射互操作
*   用于购买、以编程方式更改 DNS 记录的良好 API
*   良好的物理 DNS 基础设施（例如，良好的 DNS 响应时间、全球正常运行时间）
*   了解 Google Apps（例如，自动设置所有 MX 等）是一个加分项

到目前为止，name.com 看起来还不错，虽然我不知道他们的物理基础设施。

有什么意见/建议吗？

# ruby-on-rails - 生产中的宝石追踪者

> ID：10260090
> 
> 赞同：0
> 
> 时间：2012-04-21T15:01:50.553
> 
> 标签：ruby-on-rails, beanstalkd

我正在使用 Stalker 与生产服务器上的 beanstalkd 交互。我的工作文件如下所示：

```
gem 'stalker'

# config/jobs.rb with Rails
RAILS_ENV = ENV["RAILS_ENV"] || "development"
require File.expand_path("../environment", __FILE__)

job "mapeamento_paciente.importar" do |args|
   mapeamento = Mapeamento::Paciente.find(args['id'])
   importador = ImportadorPaciente.new(mapeamento)

   importador.importar!
end 
```

我正在尝试通过发出以下命令来启动 stalker：

```
bundle exec stalk config/jobs.rb RAILS_ENV=production 
```

但是在加载环境文件时，Rails 会尝试访问开发数据库，​​而不是生产数据库，从而发出错误。有谁知道如何解决这个问题！？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T15:46:42.513

```
RAILS_ENV=production bundle exec stalk config/jobs.rb 
```

# javascript - Javascript 访问 USB HID（USB 游戏控制器）

> ID：10260093
> 
> 赞同：4
> 
> 时间：2012-04-21T15:02:16.733
> 
> 标签：javascript, usb, hid

我希望使用 Javascript 从键盘或鼠标以外的 USB 设备读取事件。具体来说，我想使用 USB 游戏控制器来读取事件。如果 Javascript 无法做到这一点，那么浏览器和客户端是否还有其他允许我这样做的东西？我不能让用户接受某些东西的许可、安装插件或将它们限制在特定的浏览器中。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T15:30:21.513

出于这个原因，您可以使用存在的[Gamepad API 。](https://wiki.mozilla.org/GamepadAPI)

# ruby - 延迟作业中的 DELAYED_JOB Update_attribute 不起作用，表未更新

> ID：10260094
> 
> 赞同：0
> 
> 时间：2012-04-21T15:02:20.693
> 
> 标签：ruby, ruby-on-rails-3, delayed-job, update-attributes, update-attribute

我一直想做Delayed::Job来做fbLikes（我在StackOverFlow上发布了很多但仍然没有解决问题）我的表n数据库有名称，id，fbLikes，fbId，url。这是我的程序步骤。[主页]公司列表 -> 创建公司[插入公司信息] -> 保存 fbId、名称、id、url 但不是 FBLIKES -> 重定向到主页 [after_save 更新之前添加的公司的 fbLikes]

我不确定我延迟的工作是否有效，因为我的模型中的 fbLikes 仍然是空白的，并且没有更新最新的 fbLikes。我不确定是否有更好的方法来做到这一点。对于“rake jobs:work”，控制台中没有后台工作显示。

[模型公司.rb]

```
require "delayed_job"
require "count_job.rb"
after_save :fb_likes
def fb_likes    
    Delayed::Job.enqueue(CountJob.new(self.id))
end 
```

[lib/count_job.rb]

```
require 'net/http'
require 'company.rb'

class CountJob < Struct.new(:id)        
  def perform
    @company = Company.find(id)
    uri = URI("http://graph.facebook.com/#{@company.fbId}")
    data = Net::HTTP.get(uri)
    @company.fbLikes= JSON.parse(data)['likes']
    @company.save!
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T05:56:18.207

[MODEL company.rb]

```
require "delayed_job"
require "count_job.rb"
after_save :fb_likes
def fb_likes    
    Delayed::Job.enqueue(CountJob.new(self.id))
end 
```

[lib/count_job.rb]

```
require 'net/http'
require 'company.rb'

class CountJob < Struct.new(:id)        
  def perform
    @company = Company.find(id)
    uri = URI("http://graph.facebook.com/#{@company.fbId}")
    data = Net::HTTP.get(uri)
    @company.fbLikes= JSON.parse(data)['likes']
     @company.save!
   end
 end 
```

# c++ - 明确共享是什么意思？

> ID：10260097
> 
> 赞同：2
> 
> 时间：2012-04-21T15:02:29.110
> 
> 标签：c++, qt, class, pointers, qwt

在此页面中：

[http://qwt.sourceforge.net/class_qwt_plot_curve.html#afd13c94e23520dacbc37b4d0fd036a8b](http://qwt.sourceforge.net/class_qwt_plot_curve.html#afd13c94e23520dacbc37b4d0fd036a8b)

方法

```
void QwtPlotCurve::setRawSamples() 
```

只是将数据的地址保存在 QwtPlotCurve 中，这正是我想要的效率。

尽管：

```
void QwtPlotCurve::setSamples() 
```

使用QVector，更方便。但它只是“明确共享”。这意味着什么？是否像第一个一样保存指针？

我需要每 50 毫秒在图中添加一个点。深度复制数据不是最好的解决方案！！！建议？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-21T15:12:48.117

它与 Qt 的“隐式共享”概念并列：

[http://doc.qt.io/archives/qt-4.7/implicit-sharing.html](http://doc.qt.io/archives/qt-4.7/implicit-sharing.html)

即使你在 Qt 中按值传递一个 QVector 的数据作为参数，它也不会立即复制内存。如果其中一个向量发生更改，它只会制作副本。

我原*以为*在 setSamples 案例中说“显式共享”的文档只是为了提请注意您通过引用而不是值传递 QVectors 的事实：

```
void QwtPlotCurve::setSamples(
    const QVector< double > &xData,
    const QVector< double > &yData 
) 
```

而且我还*认为*他们这样做是为了如果您更改向量中的数据（或释放它），它将影响绘图曲线所保留的数据。如果您认为向量是按值传递的，您不会想到这一点（您无法判断您是否只是在阅读调用站点）。

**然而**，查看源代码似乎在幕后它只是在制作一个隐式共享的副本。在[qwt_plot_curve.cpp](http://qwt.svn.sourceforge.net/viewvc/qwt/trunk/qwt/src/qwt_plot_curve.cpp?revision=1289&view=markup)我们有：

```
/*!
   \brief Initialize data with x- and y-arrays (explicitly shared)

   \param xData x data
   \param yData y data
   \sa QwtPointArrayData
*/
void QwtPlotCurve::setSamples( const QVector<double> &xData,
    const QVector<double> &yData )
{
    setData( new QwtPointArrayData( xData, yData ) );
} 
```

我们可以看到 QwtPointArrayData 在[qwt_point_data.h](http://qwt.svn.sourceforge.net/viewvc/qwt/trunk/qwt/src/qwt_point_data.h?revision=1088&view=markup)中声明如下：

```
class QWT_EXPORT QwtPointArrayData: public QwtSeriesData<QPointF>
{
public:
    QwtPointArrayData( const QVector<double> &x, const QVector<double> &y );
    QwtPointArrayData( const double *x, const double *y, size_t size );

    virtual QRectF boundingRect() const;

    virtual size_t size() const;
    virtual QPointF sample( size_t i ) const;
    const QVector<double> &xData() const;
    const QVector<double> &yData() const;

private:
    QVector<double> d_x;
    QVector<double> d_y;
}; 
```

[qwt_point_data.cpp](http://qwt.svn.sourceforge.net/viewvc/qwt/trunk/qwt/src/qwt_point_data.cpp?revision=1088&view=markup)中的构造函数代码只是对`d_x`and的简单赋值`d_y`。这可以追溯到普通的 ol' 隐式共享。因此，您对传入的数据所做的更改将*不会*被绘图看到；您将支付进行此类修改时制作的副本的费用。

如果他们只是要这样做，那么为什么他们费心传递一个 const 引用（而不仅仅是通过值）对我来说是一个谜。这里唯一的“分享”似乎是隐含的，所以我不知道“明确分享”的评论应该是什么意思。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T15:08:28.707

取自[http://doc.qt.io/archives/qq/qq02-data-sharing-with-class.html](http://doc.qt.io/archives/qq/qq02-data-sharing-with-class.html)

对于显式共享，在修改对象之前调用 detach() 是用户的责任，而不是类的责任。如果用户忘记调用 detach()，所有共享相同数据的对象都会修改其状态，这是一个非常危险的副作用。

显式共享类在语义上类似于指针。比较左边的代码，它使用 int *，右边的代码，它使用一个虚构的显式共享 Int 类：

```
int *a = new int( 111 );    Int a( 111 );
int *b = a;                 Int b = a;
*b = 222;                   b = 222;
qDebug( "%d", *a );         qDebug( "%d", (int) a ); 
```

两个程序都打印 222。对于左侧的代码，这是我们所期望的（指针语法是一个很大的提示），但对于右侧的代码，这令人不快。显式共享可能会解决所有权问题，但其误导性语法使其无法替代指针。

Qt 类 QMemArray、QImage 和 QMovie 的明确共享归功于历史。要保持头脑清醒，请在处理明确共享的类时选择以下准则之一：

避免显式共享类。每次要修改对象时调用 detach()，除非您确定对象没有副本。这是非常容易出错的。每次复制对象时调用 detach()： b = a; b. 分离（）；这有效地禁用了共享，并且意味着您永远不需要调用 detach()。如果可用，请使用 copy() 函数：

```
b = a.copy(); 
```

# linux-kernel - KVM - 高级网络参数（如网络接口带宽，设置模拟网卡的最大传输速率）

> ID：10260099
> 
> 赞同：4
> 
> 时间：2012-04-21T15:02:41.847
> 
> 标签：linux-kernel, virtualization, kvm

我需要一些有关高级 KVM 网络参数的信息。高级我的意思是不能从 GUI 中访问的一次。就像是：

*   网络接口带宽
*   设置模拟网卡的最大传输速率

有吗？我很难用谷歌搜索他们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T13:41:34.190

仿真卡使用 Linux 的 tap/macvtap 接口运行。您可以在此处设置/查询接口的参数。有关 tap 接口和 qemu 的更多详细信息，您可以阅读[这篇文章](http://blog.alantan.com/2007/01/qemu-tap-bridge-network-configuration.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-16T07:55:15.550

上面由 dtatulea 提供的链接非常好。

# .net - 使用 npgsql 的插入函数出现奇怪的语法错误

> ID：10260104
> 
> 赞同：0
> 
> 时间：2012-04-21T15:03:07.957
> 
> 标签：.net, postgresql, plpgsql, npgsql

我有一个函数，它只是将一些值插入到表中。

```
CREATE OR REPLACE FUNCTION register_new_user(
   pnick character varying
 , ppasshash character varying
 , pmail character varying
 )
RETURNS void AS
$BODY$
Declare
Begin
Insert into registration
values(pNick, pPasshash, pMail);
End;
$BODY$   LANGUAGE plpgsql; 
```

现在，当我在 pgAdmin 中使用此功能时

```
Select register_new_user('a','b','c') as Answer; 
```

它工作得很好，但是当我尝试通过我的 .NET-Databasemanagement 执行此操作时，我在 2 美元处收到来自 npgsql 的语法错误（这就是异常所说的）。

这就是我通过 VB.NET 调用函数的方式：

```
Using func As DatabaseFunction = DatabaseFunction.CreateNewFunctionInstance("register_new_user")
    func.AddParameter("pnick", txt_Nick.Text, Data.ParameterDirection.Input)
    func.AddParameter("ppasshash", passhash, Data.ParameterDirection.Input)
    func.AddParameter("pmail", txt_Mail.Text, Data.ParameterDirection.Input)
    func.ExecuteNonQuery()
End Using 
```

在 passhash 的情况下，它并不关心我在那里写的内容，即使“你好”也不起作用。我对密码使用 UTF8 编码，并在连接字符串中也这么说。我的 .NET 程序的数据库管理如下所示：

```
Public Class DatabaseFunction
            Implements IDisposable
            Public dbcon As IDbConnection
            Private comm As NpgsqlCommand
            Public trans As IDbTransaction
            Private funcname As String = String.Empty
            Private dr As IDataReader = Nothing
            Public Sub New(ByVal functionname As String, ByVal Connection As IDbConnection, ByVal Transaction As IDbTransaction)
                Try
                    dbcon = Connection
                    trans = Transaction
                    funcname = functionname
                    comm = New NpgsqlCommand(functionname, dbcon, trans)
                    comm.CommandType = CommandType.StoredProcedure
                Catch ex As Exception
                    Throw New Exception("Fehler bei der Initierung einer Datenbankfunktion: " & ex.Message)
                End Try
            End Sub

            Public Shared Function CreateNewFunctionInstance(ByVal FunctionName As String) As DatabaseFunction
                Try
                    Dim dbcon As IDbConnection = DatabaseConnection.CreateNewOpenConnection()
                    Return New DatabaseFunction(FunctionName, dbcon, dbcon.BeginTransaction)
                Catch ex As Exception
                    Throw ex
                End Try
            End Function

            Public Sub AddParameter(ByVal Name As String, ByVal parameter As Object, ByVal Direction As ParameterDirection)
                Try
                    Dim newparam As NpgsqlParameter = comm.CreateParameter()
                    newparam.ParameterName = Name
                    newparam.Value = parameter
                    newparam.Direction = Direction
                    comm.Parameters.Add(newparam)
                Catch ex As Exception
                    Throw ex
                End Try
            End Sub

            Public Function ExecuteReader() As IDataReader
                Try
                    comm.Connection = dbcon
                    comm.Transaction = trans
                    comm.Prepare()
                    dr = DirectCast(comm.ExecuteReader(), IDataReader)
                    Return dr
                Catch ex As Exception
                    Throw ex
                End Try
            End Function

            Public Sub ExecuteNonQuery()
                Try
                    comm.Connection = dbcon
                    comm.Transaction = trans
                    comm.Prepare()
                    comm.ExecuteNonQuery()
                Catch ex As Exception
                    Throw ex
                End Try
            End Sub

            Public Shared Function CreateNewDatabaseConnection() As IDbConnection
                Try
                    Return DatabaseConnection.CreateNewOpenConnection()
                Catch ex As Exception
                    Throw ex
                End Try
            End Function

            Public Sub Dispose() Implements IDisposable.Dispose
                Try
                    If Not dr Is Nothing Then
                        If Not dr.IsClosed Then
                            dr.Close()
                            dr.Dispose()
                        End If
                    End If
                    trans.Commit()
                    comm.Dispose()
                    dbcon.Close()
                    dbcon.Dispose()
                Catch ex As Exception
                    Throw ex
                End Try
            End Sub
        End Class 
```

有人可以帮我解决这个问题，因为它让我在这里发疯。

* * *

我最近发现 Syntaxerror 是由 command.prepare()-Sub 引起的。当我直接执行我的东西时，它工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T19:13:55.737

是否可以在这里传递一个数字`1234`而不是文本`'1234'`（带单引号）：

```
...
func.AddParameter("ppasshash", passhash, Data.ParameterDirection.Input)
... 
```

如果这也不能解决您的问题，请查看数据库日志。使用标准配置，您会发现更详细的错误消息，包括实际发送到数据库的语句。
在这种情况下，PostgreSQL 有很多话要说，而不仅仅是：

```
syntax error at $2 
```

`log_destination`在你的`postgresql.conf`文件中寻找。日志在那里定义。
[有关在此处登录手册的更多信息。](http://www.postgresql.org/docs/current/interactive/runtime-config-logging.html#RUNTIME-CONFIG-LOGGING-WHERE)

* * *

您可能想要简化/改进您的 PostgreSQL 功能：

```
CREATE OR REPLACE FUNCTION register_new_user(
  _pnick text
 ,_ppasshash text
 ,_pmail text
 )
  RETURNS void AS
$BODY$
INSERT INTO registration (pnick, ppasshash, pmail) -- assuming these col names
VALUES($1, $2, $3);
$BODY$   LANGUAGE sql; 
```

*   这里不需要 PL/pgSQL（虽然它肯定是可能的），一个普通的 SQL 函数就可以了。（不过，您必须在 SQL 函数的函数体中使用编号参数（$1、$2、..））

*   *始终*`INSERT`为in 函数使用目标列表。否则，如果基础表发生更改，它将以意想不到的方式中断。

*   通过使参数名称唯一来避免命名冲突。我喜欢为此使用`_`前缀，但这是我的任意选择。

# php - 注册表单PHP中的未定义索引

> ID：10260105
> 
> 赞同：1
> 
> 时间：2012-04-21T15:03:08.120
> 
> 标签：php, sql

我试图创建一个简单的用户注册，将数据保存到数据库中。但我有一个我无法战胜的错误。它说

> 注意：未定义的索引：第 27 行 C:\wamp\www\book\reg.php 中的 pass_conf

但我的 pass_config 似乎是正确的。

有什么想法有什么问题吗？这是php代码

/// 更新我的代码，这个有效

```
 <?php
$host = "localhost";
$dbuser = "root";
$dbpass = "";
$dbname = "pagination";

$connection = mysql_connect($host,$dbuser,$dbpass);
$db = mysql_select_db($dbname,$connection);
/*
$name = $_POST["username"];
$pass = $_POST["password"];
$pass_conf = $_POST["pass_conf"];
$email = $_POST["email"];
$ip = $_POST["ip"]; */

$name = isset($_POST['username']) ? $_POST['username'] : 0;
$pass = isset($_POST['password']) ? $_POST['password'] : 0;
$pass_conf = isset($_POST["pass_conf"]) ? $_POST["pass_conf"] : 0; // 0 equals your default off value.
$email = isset($_POST['email']) ? $_POST['email'] : 0;
$ip = isset($_POST['ip']) ? $_POST['ip'] : 0;

if($name == false || $pass == false || $pass_conf == false || $email == false){
echo "Please fill in all the required fields.";
};
if($pass != $pass_conf){
echo "Passwords do not match.";
}else {
$connection = mysql_connect($host,$dbuser,$dbpass);
$db = mysql_select_db($dbname,$connection);
$sql = "INSERT INTO user (username,password,email,ip) VALUES ($name, $pass, $email, $ip)";
$result = mysql_query($sql);
echo "Thank you for your registration to Our Site";
};

?> 
```

我也将添加我的 form.php，因为我收到了它的请求。

```
<?php
$IP = $_SERVER['REMOTE_ADDR']; 
?>

<form name=reg action=reg.php method=post>

Username : <input type=text name=username><br>

Password : <input type=password name=password><br>

Confirm :<input type=password name=pass_conf><br>

Email : <input type=text name=email><br>

<input type=hidden name=ip value='<?php echo $IP ?>'>
<input type=submit value='Register'>
</form> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T15:07:49.973

而不是`$x = $_POST['x']`使用`$x = isset($_POST['x']) ? $_POST['x'], null`.

或使用：

```
function post($key, $default = null) {
   return isset($_POST[$key]) ? $_POST[$key] : $default;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T15:09:40.627

首先，在创建应用程序时使用 E_ALL 做得很好！您的“pass_conf”值可能是提交表单时未选中的复选框，因此不会发送任何值。一个简单的：

$pass_conf = isset($_POST["pass_conf"]) ？$_POST["pass_conf"] : 0; // 0 等于您的默认关闭值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T15:09:30.487

该消息意味着您尝试获取的值不存在于数组中。所以要么没有填写值，要么没有正确传递（检查字段名称，它必须完全相同）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T15:20:40.183

你有没有尝试过：

```
if (array_key_exists("pass_conf", $_POST))
  $pass_conf = mysql_real_escape_string($_POST["pass_conf"]);
else
  $pass_conf = null;

$sql =
"INSERT INTO events (username, password, email, ip) " . 
"VALUES ('{$name}','{$pass}','{$email}','{$ip}')"; 
```

请参阅我询问完整示例的这个问题，并向下滚动到用户 dldnh 是如何回答的；它与您的相似，因此也许会对您有所帮助：[链接][未定义索引通知](https://stackoverflow.com/questions/9917293/undefined-index-notice)

# bing-maps - 如何将 Microsoft Map LocationRect 转换为 Edges

> ID：10260107
> 
> 赞同：0
> 
> 时间：2012-04-21T15:03:09.380
> 
> 标签：bing-maps

Microsoft.Map.getBounds() 返回 LocationRect 对象，它本身由中心、宽度、高度组成。我想找到左上角和右下角来查询我的数据库以获取该区域中的所有点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T08:37:40.447

LocationRect 类包括 GetNorthwest() 和 GetSoutheast() 函数。您可以在[此处查看参考](http://msdn.microsoft.com/en-us/library/gg427621.aspx)

# javascript - 如何将事件绑定到 sessionStorage？

> ID：10260108
> 
> 赞同：22
> 
> 时间：2012-04-21T15:03:15.093
> 
> 标签：javascript, jquery, events, sessionstorage

我可以成功地将事件绑定到 localStorage 的更改（使用 jquery）：

```
$(window).bind('storage', function(e)
{
    alert('change');
});

localStorage.setItem('someItem', 'someValue'); 
```

如果我使用 sessionStorage，该事件将不会触发：

```
 $(window).bind('storage', function(e)
{
    alert('change');
});

sessionStorage.setItem('someItem', 'someValue'); 
```

为什么是这样？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2014-01-22T12:34:23.563

每个选项卡`sessionStorage`都是隔离的，因此它们无法通信。的事件`sessionStorage`仅在同一选项卡上的帧之间触发。

**编辑：**

我做了以下例子：

[http://codepen.io/surdu/pen/QGZGLO?editors=1010](http://codepen.io/surdu/pen/QGZGLO?editors=1010)

示例页面有两个按钮可以触发本地和会话存储更改。

它还将 iframe 嵌入到另一个监听存储事件更改的 codepen：

[http://codepen.io/surdu/pen/GNYNrW?editors=1010](http://codepen.io/surdu/pen/GNYNrW?editors=1010) *（您应该在不同的选项卡中打开它。）*

您会注意到，当您按下“写入本地”按钮时，在 iframe 和打开的选项卡中都会捕获事件，但是当您按下“会话写入”时，只有嵌入的 iframe 会捕获事件。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-04-21T15:06:52.110

这就是我认为的方式。从[规范](http://dev.w3.org/html5/webstorage/#the-sessionstorage-attribute)（强调添加）：

> 当在与会话存储区域关联的对象 x 上调用 、 和 方法时 `setItem()`，`removeItem()`如果这些方法做了某些事情，则在每个 Document 对象中，其 Window 对象的 sessionStorage 属性的 Storage 对象与相同的存储区域关联，**而不是 x**，必须触发存储事件`clear()``Storage`

 **我*认为*这意味着该事件将在共享会话存储对象的任何其他文档中触发，但不会在导致事件触发的文档中触发。

**更新**

这是另一个[非常相似的问题](https://stackoverflow.com/questions/4679023/bug-with-chromes-localstorage-implementation)，似乎与我上面提到的一致（答案引用了规范中的同一段）。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-04-08T11:13:18.803

这个问题似乎得到了很多意见，所以我将把它作为额外信息发布。

如果你想专门响应 sessionStorage 对象的更新，你可以忽略 localStorage 引起的事件：

```
$(window).on('storage',function(e){
   if(e.originalEvent.storageArea===sessionStorage){
     alert('change');
   } 
   // else, event is caused by an update to localStorage, ignore it
}); 
```

我讨厌 jQuery，所以也会发布一个原生版本：

```
window.addEventListener('storage',function(e){
   if(e.storageArea===sessionStorage){
     alert('change');
   } 
   // else, event is caused by an update to localStorage, ignore it
}); 
```**

# android - ActionBar Sherlock Progressbar 未在 3.1 上显示，但在 4.0+ 上显示

> ID：10260111
> 
> 赞同：5
> 
> 时间：2012-04-21T15:03:30.083
> 
> 标签：android, progress-bar, android-3.0-honeycomb, actionbarsherlock, android-actionbar

看起来我有一个较小的问题，但找不到原因。在我的 SherlockFragmentActivity onCreate 中，我执行以下操作：

```
@Override
public void onCreate(final Bundle savedInstanceState)
{
    requestWindowFeature(Window.FEATURE_PROGRESS);
    requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);
    super.onCreate(savedInstanceState); 
```

AndroidManifest.xml

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" /> 
```

在加载一些数据的片段中，我做了一个简单的操作：

```
 getSherlockActivity().setSupportProgressBarIndeterminateVisibility(true); 
```

所有在 ICS 上运行良好，但在我的 3.1 平板电脑上运行的相同代码在请求时从不显示 ProgressBar。任何人都可以给我一个提示为什么会发生这种情况？

我在运行 2.2 的模拟器中也遇到了问题，没有显示任何进度。我再次查看了 Sherlock Samples 中的**FeatureToggles**，相同的代码，不同的结果：/

PS：使用ActionBar Sherlock 4.01

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-22T03:46:19.930

确保您使用的是`com.actionbarsherlock.view.Window`import 而不是`android.view.Window`.

如果您错过了此导入更改，则进度方法调用将仅适用于 ICS 和更新的设备。

# c - 连接请求的输出不是原子的

> ID：10260120
> 
> 赞同：0
> 
> 时间：2012-04-21T15:04:42.520
> 
> 标签：c, sockets, connect

我已经创建了一个套接字，我正在尝试接受连接。一切正常。但是，输出让我对以下代码的工作方式感到困惑。

```
 // this a server program
    #include <stdio.h>
    #include <stdlib.h>
    #include <assert.h>
    #include <string.h>
    #include <sys/stat.h>
    #include <unistd.h>
    #include <sys/socket.h>
    #include <sys/types.h>
    #include <sys/un.h>
    #include <arpa/inet.h>
    #include <errno.h>
    #include <wait.h>

    #define LISTENQ (1024)

    int main(void) {

       int lstn_sock, conn_sock;
       struct sockaddr_in my_serv;
       short int pnum = 4080;

       // create listening socket
       if( (lstn_sock = socket(AF_INET, SOCK_STREAM, 0)) < 0) {
        printf("Error (socket): %s\n",strerror(errno));
        exit(1);
       }

       // initialize socket address
       memset( &my_serv, 0, sizeof(my_serv) );
       my_serv.sin_family = AF_INET;
       my_serv.sin_addr.s_addr = INADDR_ANY;
       my_serv.sin_port = htons(pnum);

       // associate address with socket. 
       if( bind(lstn_sock, (struct sockaddr *) &my_serv, sizeof(my_serv)) < 0){
        printf("Error (bind): %s\n",strerror(errno));
        exit(1);
       }
        //printf("lstn_sock: %d\n",lstn_sock);
       // start listening to socket
       if( listen(lstn_sock, LISTENQ) < 0){
        printf("Error (listen): %s\n",strerror(errno));
        exit(1);
       }

       // make it a daemon
       while(1){
        // retrieve connect request and connect
        if( (conn_sock = accept(lstn_sock, NULL, NULL)) < 0){
           printf("Error (accept): %s\n",strerror(errno));
           exit(1);
        }

        printf("The server says hi!\n");

        // close connected socket
        if( close(conn_sock) < 0){
           printf("Error (close): %s\n",strerror(errno));
           exit(1);
        }
       }

    return 0;

    } 
```

@ubuntu:$ ./my_code & @ubuntu:$ telnet localhost 4080

以下是上述代码的 2 个不同输出：
**Output1**
Trying ::1...
Trying 127.0.0.1..
Connected to localhost。
转义字符是 '^]'。
服务员打招呼！
外部主机关闭连接。

**Output2**
Trying ::1...
Trying 127.0.0.1..
服务器打招呼！
连接到本地主机。
转义字符是 '^]'。
外部主机关闭连接。

有人可以解释“服务器打招呼！”移动的原因吗？
在输出中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T15:14:31.060

我猜你是在后台启动你的服务器，并在同一个终端中使用 telnet 来测试它。

您的服务器将问候语打印到标准输出，telnet 也写入标准输出。它们是两个独立的进程，将独立（可能同时）调度。您无法预测输出在终端上出现的确切顺序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T19:10:17.097

*我写了一个更长的答案，但随后出现内核恐慌！！！！非常讨厌我的MOBO。但这里有一个较短的重新上限。*

我看到您的问题已解决，但只是要清楚：

你可以[阅读](http://tldp.org/LDP/intro-linux/html/sect_04_01.html)- 和潜艇。

您正在使用终端。终端通常具有三个[流](http://en.wikipedia.org/wiki/Standard_streams)：

*   标准输入
*   标准输出
*   标准错误

当您启动*服务器*程序时，会在该终端中启动一个进程。

该进程从终端进程继承各种“*东西*”，如环境变量、限制等。服务器也成为 shell 的*子*进程。shell 本身通常是更高进程的子进程，依此类推。

当您使用与号时，该进程被置于后台，但仍然是同一终端的子进程。

对任一流的写入将写入与启动该进程的 shell***相同的流。***

在典型的服务器/客户端场景中，您不会写入`stdout`发送消息。服务器的`stdout`绑定到服务器环境（/proc/[pid]/fd/...）。客户端，通常在不同的系统上，（*通常*）无法访问服务器上的任何东西 - 因此是套接字的整个概念 - 独立系统之间的通信。这就是为什么您改为写入连接的原因。

* * *

使用各种 Linux 工具快速查看您的案例；

如果你发布`pstree`，你可以很容易地看到这一点；像（删除很多）：

```
$ ./server 4082 &
[1] 2795 <-- PID OF SERVER
$ pstree -p
init(1)─┬─ ...
        :
        ├─gnome-terminal(2369)─┬─bash(2374)───mplayer(2459)───mplayer(2460)
        │                      ├─bash(2586)───pstree(2779)
        │                      ├─bash(2646)
        │                      ├─bash(2705)───server(2795) <-- YOUR SERVER
        │                      ├─gnome-pty-helpe(2373)
        │                      ├─{gnome-terminal}(2371)
        │                      ├─{gnome-terminal}(2372)
        │                      └─{gnome-terminal}(2375)
        :
$ telnet localhost 4082  <--- IN SAME TERMINAL
$ pstree -p
init(1)─┬─ ...
        :
        ├─gnome-terminal(2369)─┬─bash(2374)───mplayer(2459)───mplayer(2460)
        │                      ├─bash(2586)───pstree(2779)
        │                      ├─bash(2646)
        │                      ├─bash(2705)─┬─server(2795) <-- YOUR SERVER
        │                      │            └─telnet(2797) <-- TELNET SAME SHELL
        │                      ├─gnome-pty-helpe(2373)
        │                      ├─{gnome-terminal}(2371)
        │                      ├─{gnome-terminal}(2372)
        │                      └─{gnome-terminal}(2375)
        : 
```

现在。服务器和 shell***共享***相同的 bash，因此最终用户*输出*相同- `stdout`...</p>

您可以通过各种方式*监视*进程的不同流。一种简单的方法是使用`strace`：

```
$ sudo strace -ewrite -p 12345 
```

哪里`12345`是进程的PID。IE;

```
$ sudo strace -e write=0,1,3,4 -p 2797
Process 2797 attached - interrupt to quit
select(4, [0 3], [], [3], NULL)         = 1 (in [0])
read(0, "frack!\n", 8129)               = 7
select(4, [0 3], [3], [3], {0, 0})      = 1 (out [3], left {0, 0})
send(3, "frack!\r\n", 8, 0)             = 8
 | 00000  66 72 61 63 6b 21 0d 0a                           frack!..          | 
```

# c# - 如果在代码中添加了元素，“FindName”将不起作用

> ID：10260122
> 
> 赞同：3
> 
> 时间：2012-04-21T15:05:22.457
> 
> 标签：c#, wpf, xaml, visual-tree

在 WPF 应用程序中，如果 ContentControl 在 XAML 中声明，

```
<Grid Name="MyGrid">
    <ContentControl Name="MyContentControl" />
</Grid> 
```

然后我可以使用以下代码轻松地在代码中引用它`FindName`：

```
ContentControl cc = FindName("MyContentControl") as ContentControl;
cc.Content = ... 
```

但是，如果我在代码中添加 ContentControl：

```
 ContentControl contentcntr = new ContentControl();
 contentcntr.Name = "MyContentControl";
 this.MyGrid.Children.Add(contentcntr); 
```

`FindName`没有找到它。

在第二种情况下有什么问题？有什么不同？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-21T15:09:34.403

XAML 解析器会自动在名称范围中注册名称，如果您创建这样的元素，您可能需要自己使用[`RegisterName`](http://msdn.microsoft.com/en-us/library/system.windows.namescope.registername.aspx). （还有一个[访问器`FrameworkElement`](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.registername.aspx)。）

# ruby-on-rails-3 - 使用 Rails 3.2 使用 Agile Web 教程测试新操作时出现批量分配安全错误

> ID：10260123
> 
> 赞同：2
> 
> 时间：2012-04-21T15:05:35.607
> 
> 标签：ruby-on-rails-3

我正在浏览敏捷 Web 教程，并进行了一些细微的更改。在 Rails 3.2 中运行功能测试时，出现以下错误：

```
test_should_get_new(OrdersControllerTest):
ActiveModel::MassAssignmentSecurity::Error: Can't mass-assign protected attributes: cart, deal 
```

这是 orders_controller_test.rb 代码：

```
test "should get new" do
  cart = Cart.create
  session[:cart_id] = cart.id
  LineItem.create(cart: cart, deal: deals(:one))

  get :new
  assert_response :success
end 
```

这是订单夹具：

```
one:
  name: MyString
  address: MyText
  email: MyString
  pay_type: Check 
```

这是订单项固定装置：

```
one:
  deal: one
  order: one 
```

这是交易装置：

```
one:
  title: MyString
  description: MyText
  image_url: MyString
  price: 9.99 
```

这是订单控制器代码：

```
def new
  @cart = current_cart
  if @cart.line_items.empty?
    redirect_to store_url, notice: "Your cart is empty"
    return
  end

  @order = Order.new

  respond_to do |format|
    format.html # new.html.erb
    format.json { render json: @order }
  end
end 
```

我尝试使用 FactoryGirl 但仍然收到相同的错误消息。这是代码：

```
test "should get new" do
  cart = FactoryGirl.build(:cart)
  session[:cart_id] = cart.id
  LineItem.create(cart: cart, deal: deals(:one))

  get :new
  assert_response :success
end 
```

FactoryGirl 代码：

```
FactoryGirl.define do  
  factory :cart do
  end
end 
```

对于 FactoryGirl，我还尝试了“创建”而不是“构建”并得到了相同的错误消息。

虽然我可以关闭配置中的批量分配错误，但我宁愿不这样做，因为我更喜欢正确测试。

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T15:19:41.873

而不是`LineItem.create(cart: cart, deal: deals(:one))`尝试

```
item = LineItem.create
item.cart = cart
item.deal = deals(:one) 
```

或在您的 LineItem 模型中，添加：

```
attr_accessible :cart, :deal 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-25T22:48:13.000

在您的“**模型**”、“ **order.rb** ”中添加**attr_accessible**行

```
class Order < ActiveRecord::Base

has_many :line_items, dependent: :destroy  
attr_accessible :name, :address, :email, :pay_type

end 
```

# ios - 为什么无法在 Xcode 4.3.2 上使用 Git 提交文件？

> ID：10260130
> 
> 赞同：0
> 
> 时间：2012-04-21T15:06:09.053
> 
> 标签：ios, xcode, git, xcode4.3

这几天，新的 Xcode 项目很奇怪，大多数文件在列表中的文件名右侧都有“A”图标。即使我选择了该文件，右键单击并选择“ `Source Control -> Commit Selected Files`”，输入一条消息并单击“提交”，该文件仍然会出现旁边有“A”图标。（不能选择“ `Source Control -> Add`”，因为它是灰色的）。在此提交之后，即使文件没有更改，我也可以继续再次提交。

然后我开始了一个 Bash 并使用了

```
$ cd ~/code/iOS/SomeProject
$ git add .
$ git commit -a -m "all ok"
$ git status
# On branch master
nothing to commit (working directory clean) 
```

然后Xcode上的所有文件仍然显示“A”图标，即使关闭项目并重新打开它，它也是一样的。

Git的命令行版本是

```
$ git --version
git version 1.7.7.5 (Apple Git-26) 
```

我最近安装了 RVM（Ruby 版本管理器），但我认为这应该没什么区别。

# gcc - 分段错误示例未给出分段错误

> ID：10260135
> 
> 赞同：1
> 
> 时间：2012-04-21T15:07:08.850
> 
> 标签：gcc, segmentation-fault, flags

我正在尝试一些段错误示例，但没有一个导致错误。

源代码来自：[http ://www.unknownroad.com/rtfm/gdbtut/gdbsegfault.html](http://www.unknownroad.com/rtfm/gdbtut/gdbsegfault.html)

示例如下：

```
1 : #include <stdio.h>
2 : #include <stdlib.h>

3 : int main(int argc, char **argv)
4 : {
5 :   char *buf;
6 :
7 :   buf = malloc(1<<31);
8 :
9 :   fgets(buf, 1024, stdin);
10:   printf("%s\n", buf);
11:
12:   return 1;
13: } 
```

第一步是使用调试标志编译程序：

```
prompt> gcc -g segfault.c 
```

现在我们运行程序：

```
prompt > ./a.out
Hello World!
Segmentation fault
prompt > 
```

* * *

但是，上面的示例在我的 Ubuntu 中运行时没有段错误。我认为这与 gcc 选项有关，但我不知道是什么原因造成的。当我在不同的发行版中运行时，就会出现问题。

这是我的 gcc 的输出：

```
$ gcc -v
Using built-in specs.
Target: i486-linux-gnu
Configured with: ../src/configure -v --with-pkgversion='Ubuntu 4.4.3-4ubuntu5.1' 
    --with-bugurl=file:///usr/share/doc/gcc-4.4/README.Bugs 
    --enable-languages=c,c++,fortran,objc,obj-c++ --prefix=/usr --enable-shared 
    --enable-multiarch --enable-linker-build-id --with-system-zlib 
    --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix 
    --with-gxx-include-dir=/usr/include/c++/4.4 --program-suffix=-4.4 --enable-nls 
    --enable-clocale=gnu --enable-libstdcxx-debug --enable-plugin --enable-objc-gc
    --enable-targets=all --disable-werror --with-arch-32=i486 --with-tune=generic
    --enable-checking=release --build=i486-linux-gnu --host=i486-linux-gnu
    --target=i486-linux-gnu
Thread model: posix
gcc version 4.4.3 (Ubuntu 4.4.3-4ubuntu5.1) 
```

我的 gcc 也自动初始化变量。我想禁用它。

有没有人遇到过类似的问题，或者对解决方案有任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T18:13:51.133

示例代码只有段错误，如果`malloc(1<<31)`失败，则返回 NULL。但是，`malloc(1<<31)`如果您的系统能够分配 2 gigs 的内存而不会失败，则成功。该段错误示例代码片段来自系统通常无法分配该内存量的时间。这是否成功取决于物理内存量、其他进程使用的内存量、内核的内存过度使用策略，以及可能使用的（libc 和）内核版本。因此，您看到的不同行为可能是由于过度使用 sysctl 的不同设置、运行的不同进程集，或者显然是不同数量的物理内存的结果。

来自`/usr/src/linux/Documentation/vm/overcommit-accounting`：

```
The Linux kernel supports the following overcommit handling modes

0   -   Heuristic overcommit handling. Obvious overcommits of
        address space are refused. Used for a typical system. It
        ensures a seriously wild allocation fails while allowing
        overcommit to reduce swap usage.  root is allowed to 
        allocate slightly more memory in this mode. This is the 
        default.

1   -   Always overcommit. Appropriate for some scientific
        applications.

2   -   Don't overcommit. The total address space commit
        for the system is not permitted to exceed swap + a
        configurable percentage (default is 50) of physical RAM.
        Depending on the percentage you use, in most situations
        this means a process will not be killed while accessing
        pages but will receive errors on memory allocation as
        appropriate.

The overcommit policy is set via the sysctl `vm.overcommit_memory'.

The overcommit percentage is set via `vm.overcommit_ratio'. 
```

# android - Ormlite 数据库助手 - 未调用 onCreate()

> ID：10260137
> 
> 赞同：4
> 
> 时间：2012-04-21T15:07:11.877
> 
> 标签：android, ormlite

我正在使用 ormlite.android.4.31.jar 我有典型的 DatabaseHelper

```
public class DatabaseHelper  extends OrmLiteSqliteOpenHelper {

    private static final String DATABASE_NAME = "realestate.db";
    private static final int DATABASE_VERSION = 1;

    private Dao<TabKraj, Integer> krajDao;

    public DatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase sqliteDatabase, ConnectionSource connectionSource) {
        try {
            TableUtils.createTable(connectionSource, TabKraj.class);
            initData();
        } catch (Exception e) {
            Log.e(DatabaseHelper.class.getName(), "Unable to create datbases", e);
        }
    }

    @Override
    public void onUpgrade(SQLiteDatabase sqliteDatabase, ConnectionSource connectionSource, int oldVer, int newVer) {
        try {
            TableUtils.dropTable(connectionSource, TabKraj.class, true);
            onCreate(sqliteDatabase, connectionSource);
        } catch (SQLException e) {
            Log.e(DatabaseHelper.class.getName(), "Unable to upgrade database from version " + oldVer + " to new " + newVer, e);
        }
    }

    public Dao<TabKraj, Integer> getKrajDao() throws SQLException{
        if (krajDao == null) {
            krajDao = getDao(TabKraj.class);
        }
        return krajDao;
    }

    private void initData(){
        Log.d(Constants.DEBUG_TAG, "data initiating");

        TabKraj k1 = new TabKraj();
        TabKraj k2 = new TabKraj();

        k1.setNazov("Kosicky kraj");
        k1.setId(1);
        try {
            getKrajDao().create(k1);
        } catch (SQLException e) {
            Log.e(Constants.DEBUG_TAG, "Data initialing ERROR");
        }
    }
} 
```

应用程序已卸载，数据已清除...我正在从 Eclipse 以调试模式运行应用程序，调用了构造函数`DatabaseHleper`但未`onCreate()`调用。

问题可能出在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-26T04:30:45.450

正如@k-mera 所说：

**仅当您在数据库中执行诸如“插入”之类的操作时，才会创建**数据库文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T15:13:44.650

尽管您说数据已清除，但我怀疑Android认为它没有。要完全删除数据，我会删除应用程序并重新安装它。

由于您的`onUpgrade`调用`onCreate`，您还可以增加`DATABASE_VERSION`值，这将导致数据被删除并重新创建。

# ruby-on-rails - 提交帖子并获取并接收 ruby 中的响应页面（外部网站）

> ID：10260138
> 
> 赞同：2
> 
> 时间：2012-04-21T15:07:28.083
> 
> 标签：ruby-on-rails, ruby, forms, form-submit

我知道要获得一个简单的页面：

```
require 'net/http'

source = Net::HTTP.get('example.com', '/index.html') 
```

但是如何从表单中发布帖子并获取返回提交数据结果的页面？可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T15:19:40.810

根据 Net::HTTP doc 你可以做

```
res = Net::HTTP.post_form("example.com/index.html", 'q' => 'ruby', 'max' => '50')
puts res.body 
```

见[http://ruby-doc.org/stdlib-1.9.3/libdoc/net/http/rdoc/Net/HTTP.html#method-c-post_form](http://ruby-doc.org/stdlib-1.9.3/libdoc/net/http/rdoc/Net/HTTP.html#method-c-post_form)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T15:20:00.193

一个非常简单的方法是使用[resttclient](https://github.com/adamwiggins/rest-client) gem：

```
require 'rest_client'
result = RestClient.post 'http://example.com/resource', :param1 => 'one' 
```

# ruby - 在 RVM 1.12 中使用 Ruby

> ID：10260139
> 
> 赞同：3
> 
> 时间：2012-04-21T15:07:29.087
> 
> 标签：ruby, rvm, ubuntu-11.10, gnome-terminal

我刚刚安装了 Ubuntu 11.10 和 RVM 1.12.4（稳定版）：

```
doug@doug-OnixN53SM:~$ curl -L get.rvm.io | bash -s stable
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   185  100   185    0     0    223      0 --:--:-- --:--:-- --:--:--   968
100  8545  100  8545    0     0   5888      0  0:00:01  0:00:01 --:--:--  5888
Downloading RVM from wayneeseguin branch stable
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   125  100   125    0     0    210      0 --:--:-- --:--:-- --:--:--   272
100  992k  100  992k    0     0   293k      0  0:00:03  0:00:03 --:--:--  488k

Installing RVM to /home/doug/.rvm/
    Adding rvm PATH line to /home/doug/.bashrc /home/doug/.zshrc.
    Adding rvm loading line to /home/doug/.bash_login /home/doug/.zlogin.

# RVM:  Shell scripts enabling management of multiple ruby environments.
# RTFM: https://rvm.io/
# HELP: http://webchat.freenode.net/?channels=rvm (#rvm on irc.freenode.net)
# Cheatsheet: http://cheat.errtheblog.com/s/rvm/
# Screencast: http://screencasts.org/episodes/how-to-use-rvm

# In case of any issues read output of 'rvm requirements' and/or 'rvm notes'

Installation of RVM in /home/doug/.rvm/ is almost complete:

  * To start using RVM you need to run `source /home/doug/.rvm/scripts/rvm`
    in all your open shell windows, in rare cases you need to reopen all shell windows.

# doug,
#
#   Thank you for using RVM!
#   I sincerely hope that RVM helps to make your life easier and more enjoyable!!!
#
# ~Wayne 
```

之后，我安装了 Ruby 1.9.3。为了使用它，我只是这样做：

```
$ rvm use 1.9.3

RVM is not a function, selecting rubies with 'rvm use ...' will not work.
Please visit https://rvm.io/integration/gnome-terminal/ for a solution. 
```

显然，这个新版本的 RVM 需要一些配置。但我不明白如何阅读此页面：[https](https://rvm.io/integration/gnome-terminal/) ://rvm.io/integration/gnome-terminal/ 。

你知道我应该做什么步骤吗？谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-21T15:11:48.990

您需要将此行添加到您的`.zshrc`：

```
[[ -s "$HOME/.rvm/scripts/rvm" ]] && . "$HOME/.rvm/scripts/rvm" # Load RVM function 
```

然后重新加载：

```
source ~/.zshrc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T04:32:41.490

这篇文章对我有帮助。你可以试试这个：

> RVM 似乎在函数与非函数之间摇摆不定。这是一个函数，然后：
> 
> scytale@dur:~$ scytale@dur:~$ rvm 系统
> 
> RVM 不是一个函数，使用“rvm use ...”选择红宝石将不起作用。scytale@dur:~$ scytale@dur:~$ type rvm | head -1 rvm 已散列 (/home/scytale/.rvm/bin/rvm) scytale@dur:~$ scytale@dur:~$ source /home/scytale/.rvm/scripts/rvm scytale@dur:~$ scytale @dur:~$ 类型 rvm | head -1 rvm 是一个函数 scytale@dur:~$ scytale@dur:~$ rvm 系统 scytale@dur:~$
> 
> 现在，我能想到的就是我正在尝试类似的事情：
> 
> $ script foo.txt ...something with rvm... $ exit
> 
> 然后它似乎 rvm 坏了，虽然它在脚本中*很好*。我看不出这会如何影响任何影响这一点的 bashrc 等文件。不？

# applescript - 使用 applescript 检测 USB pendrive 插入

> ID：10260142
> 
> 赞同：0
> 
> 时间：2012-04-21T15:08:07.380
> 
> 标签：applescript, automator

当用户插入具有特定名称的 pendrive 时，我想执行 automator 脚本。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T16:38:10.543

Applescript 和 automator 无法做到这一点。但是**launchd**可以。Launchd 可以监视文件夹，如果文件夹中的某些内容发生变化，那么 launchd 将运行您的命令。在您的情况下，您需要查看 /Volumes 文件夹。当您挂载 USB 驱动器时，它的挂载点将是该文件夹。因此，您需要自己编写一个launchd plist 文件，并且您的命令可能是运行您的自动化脚本。只需谷歌了解有关launchd的更多信息。我进行了快速搜索，[此链接](http://www.macresearch.org/tutorial_backups_with_launchd)提供了您需要的大部分信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-29T04:13:52.490

除非我遗漏了什么，否则我相信 Applescript 实际上可以做你想做的事。`Folder Action`监听`Volumes`目录（根据Auto [-Detect Mounted Volumes](http://automatorworld.com/archives/auto-detect-mounted-volumes/)）将在安装卷时运行。然后，您可以运行一个 shell 脚本（或其他一些方法）来检测安装的驱动器是否是您的驱动器，如果是，则运行您的工作流程（或者更容易，如果不是，则退出）。

# linux - 如何在 Linux 内核模块中读/写字符设备

> ID：10260147
> 
> 赞同：3
> 
> 时间：2012-04-21T15:08:35.497
> 
> 标签：linux, kernel, character, device

我自己在 LKM 中编写了字符设备驱动程序，它很简单：

```
dev_open(struct inode *inode, struct file *filp);
dev_read (struct file *filp, char __user *buf, size_t count, loff_t *f_pos)
dev_write(struct file *filp, const char __user *buf, size_t count, loff_t *f_pos)
dev_release(struct inode *inode, struct file *filp) 
```

然后在我的内核模块中，我也想写入字符设备，而写入必须实际调用我的函数：

```
dev_write(struct file *filp, const char __user *buf, size_t count, loff_t *f_pos) 
```

我在 SE 找到了一个类似的[链接](https://stackoverflow.com/questions/1184274)，但是这样它就不会调用我的`dev_write()`函数来编写，而是更深层次的`vfs_write()`，对吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T02:52:09.690

不要尝试`dev_write()`从您的模块中调用。如果这确实是您想要做的，您需要一种单独的方式让您的模块写入设备。`filp`当您进行内部写入时，您没有有效的或用户内存缓冲区。

例如`dev_write()`，将使用 filp 来确定用户正在写入哪个设备，并从用户缓冲区检查和复制数据。它可以调用单独的辅助函数将数据粘贴到适当的内部缓冲区中。

您的内部代码只会调用该辅助函数来直接附加缓冲区。如果您的驱动程序支持多个设备，那么当您进行内部写入时，您将需要知道并指定您正在写入的设备实例。

# java - Java - 正则表达式 - 需要 1-12 个月

> ID：10260148
> 
> 赞同：4
> 
> 时间：2012-04-21T15:08:38.630
> 
> 标签：java, regex

我正在尝试为包含月数的字段构建一个正则表达式，当然，这需要只有数字 1-12。但是，对于正则表达式来说，这对我来说有点新，我只需要检查我是对的。它似乎工作正常。虽然，我假设这里的范围 1-12 允许此范围内的任何数字是否正确，但我只是问，因为我以前只见过 0-9 完成它。

```
[1-12]{1,2} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-21T15:17:40.233

这可能会。两位数或一位数

```
1[0-2]|[1-9] 
```

编辑：如果您担心像 55 这样的数字，请使用：

```
^(1[0-2]|[1-9])$ 
```

添加`^`and`$`表示字符串的开始和结束。使用[https://regex101.com](https://regex101.com)作为一个很好的学习工具。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-21T15:20:37.190

不要只是一个正则表达式。只是不要。[将字符串解析为`int`](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#parseInt%28java.lang.String%29)，并检查该值是否在范围内。

```
boolean isMonthInRange(String monthInput)
{
    try
    {
        int value = Integer.parseInt(monthInput, 10);
        return value >= 1 && value <= 12;
    }
    catch (NumberFormatException e)
    {
        return false;
    }
} 
```

由于这是 Java，因此我们可以使用一大堆库来解决这个问题，而不是滚动自定义解决方案。至少，不要在条件中使用幻数（`1`和`12`）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-21T16:31:44.317

另一个建议：

```
\b(?:1[0-2]|[1-9])\b 
```

如果您只允许完全匹配，则可能不需要检查单词边界 - 否则是正则表达式。在以前的答案中，例如 13 中的 1 和 3 将作为两个单独的匹配项进行匹配。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-05-16T22:55:30.773

我认为这应该很好：`(^[1-9]$)|(^0[1-9]|1[0-2]$)`

您可以插入 1-12 以及 01、02 ...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-21T15:21:09.343

```
/(1[0-2]|[1-9])/ 
```

尽管正如其他人所说，可能有更好的方法。仅检查该值在评估为整数时是否 < 1 或 > 12 也可以正常工作（并且对于不熟悉正则表达式的人来说更容易理解）。（编辑：就像 MДΓΓ БДLL 的回答一样。）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-21T15:14:24.853

这是我要做的：

```
[1-9]|10|11|12 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-08-30T02:20:08.007

对于 HTML/JavaScript 解决方案，以下正则表达式可用于 HTML 输入模式属性，以强制执行 mm/dd/yyyy 格式，其中 mm 为 1-12，dd 为 1-31，yyyy 为 1930-1999。 ..

```
(?:1[0-2]|[1-9])\/(?:[1-9]|1[0-9]|2[0-9]|3[0-1])\/(19[3-9]{1}[0-9]{1}) 
```

...并且，连同一些提供视觉提示的 CSS，它可能会像这样使用：

```
input::placeholder {
    color: rgb(46, 163, 242);
    font-style: italic;
}
input:focus {
    box-shadow: 2px 2px 2px 0px rgba(0, 0, 0, 0.4) inset;
}
input:required:invalid, input:focus:invalid {
    border: 2px solid rgb(255, 159, 159) !important;
    background: white;
}
input:required:valid {
    background: rgba(196, 255, 214, .5) !important;
    color: black !important;
}

section.form-layout input { 
    width: 120px;
    height: 27px;
    border: 2px solid rgb(46, 163, 242);
    border-radius: 5px;
    text-align: center;
    color: rgb(46, 163, 242);
    transition: all .5s ease;
}
*:focus {
    outline: none;
}
```

```
<section class="form-layout">
    <p>Enter your DOB <span style="font-style: italic;">(mm/dd/yyyy)</span>:</p>
    <input required id="dob-1" placeholder="Date of Birth" type="text" pattern="(?:1[0-2]|[1-9])\/(?:[1-9]|1[0-9]|2[0-9]|3[0-1])\/(19[3-9]{1}[0-9]{1})" autocomplete="off">
</section>
```

# git - 撤消在 GIT 中压缩提交时犯的错误

> ID：10260151
> 
> 赞同：21
> 
> 时间：2012-04-21T15:08:53.730
> 
> 标签：git, github

我想将我的最后 2 个提交压缩为一个， a 也是如此`git rebase`，以下列方式：

```
git rebase -i HEAD~2 
```

但由于一个错字，我**实际上**最终推入原点的是：

```
git rebase -i HEAD-3 
```

现在，在[Github Pull Request](https://github.com/rails/rails/pull/5815#commits-pushed-06674f0)中，它显示了其他一些不相关提交的提交。所以基本上，我想删除`06674f0`不属于我的提交，同时保留`fcea5e0`这个 PR。

如何解决简单的错字造成的混乱？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-04-21T15:19:30.247

编辑：检查您的 reflog

```
git reflog 
```

选择第一次变基之前的提交，并将 x 替换为下面的适当数字：

只需撤消上一次变基并重做即可：

```
git reset --hard HEAD@{x}
git rebase -i HEAD~2
..
git push -f origin master 
```

删除您的拉取请求并发布一个新请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-09T08:28:54.533

两者都`git reset --hard HEAD{x}`对`git reset --hard HEAD@{x}`我不起作用。

无论如何，我想要一个脚本来做到这一点，所以我做了以下事情。

```
BACK_2_SHA=`git reflog show --pretty=format:'%H' -n x | tail -n 1`
git reset --hard $BACK_2_SHA 
```

# php - mysqli插入语句

> ID：10260152
> 
> 赞同：6
> 
> 时间：2012-04-21T15:08:55.620
> 
> 标签：php, insert, mysqli

我已经检查了几天，我只是找不到它出错的原因。我没有收到 php 警告，只是错误处理程序“出现错误”而不是插入。我知道这里的优秀年轻小伙子可能会在几秒钟内发现它，尤其是考虑到它只是一个简单的插入语句，但我被搞砸了。提前致谢。

```
include('core.inc.php');
$sql = 'INSERT INTO $resultsTable (
    id, 
    firstName, 
    lastName, 
    email, 
    birthday, 
    anniversary,
    location,
    campaign
) 
VALUES (NULL,?,?,?,?,?,?,?)';
$stmt = $mysql->stmt_init();
if ($stmt->prepare($sql)) { 
// bind parameters and execute statement
$stmt->bind_param(
    'sssssss', 
    $_POST['fname'], 
    $_POST['lname'],
    $_POST['email'],
    $_POST['birthday'],
    $_POST['anniversary'],
    $_POST['location'],
    $campaign
);

$OK = $stmt->execute();}
 // return if successful or display error
    if ($OK) {$response = "Success";}
    else {$response ="Something went wrong.";}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T15:19:26.853

> 好的，我回应了 stmt 错误，它告诉我 $resultsTable 不存在。在 core.inc 中，我有该变量的定义

使用连接或双引号。

```
$sql = 'INSERT INTO ' . $resultsTable . ' (
    id, 
    firstName, 
    lastName, 
    email, 
    birthday, 
    anniversary,
    location,
    campaign
) 
VALUES (NULL,?,?,?,?,?,?,?)';

$sql = "INSERT INTO $resultsTable (
    id, 
    firstName, 
    lastName, 
    email, 
    birthday, 
    anniversary,
    location,
    campaign
) 
VALUES (NULL,?,?,?,?,?,?,?)"; 
```

# ruby-on-rails - Rails 从模型 collection_select 中保存 0 而不是字符串

> ID：10260153
> 
> 赞同：1
> 
> 时间：2012-04-21T15:08:58.363
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我一直在尝试创建一个基本的 Rails 应用程序。我使用 generate 创建了一个基本的脚手架，并在球员和球队之间建立了 belongs_to 关系，所以球员 belongs_to 球队和球队 has_many 球员。

我的表单视图看起来像这样

```
<%= form_for(@team) do |f| %>
  <% if @team.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@team.errors.count, "error") %> prohibited this team from being saved:</h2>

      <ul>
      <% @team.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :Playerone %><br />
    <%= f.collection_select :Playerone, Player.all, :firstname, :firstname %>
  </div>

  <div class="field">
    <%= f.label :Playertwo %><br />
    <%= f.collection_select :Playertwo, Player.all, :firstname, :firstname %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

当我尝试创建一个新团队时，我会得到下拉列表，因为我希望它们与球员的名字一起选择，但是当它被保存时，它会保存 0 作为记录。

列出团队

Playerone Playertwo
0 0 显示编辑销毁

新团队

最初我有这样的集合选择 `<%= f.collection_select :Playertwo, Player.all, :id, :firstname %>` 这会插入 ID，但我希望插入文本。

我已经查看了大量的文档，并且在我仍在学习的过程中获得了王牌。

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T15:40:25.700

然后，这取决于您的迁移。如果您在数据库中创建了一个整数字段，则保存该字符串将保存 0。

您可以 (a) 将迁移更改为使用字符串而不是整数。

您可以 (b) 使用 id 并通过查找名称来显示名称。

```
f.collection_select :Playertwo, Player.all, :id, :firstname 
```

您可以从所属队伍中获取名称，该名称属于 playerone 和 playertwo，

```
class Team
  belongs_to :playerone, :class_name => "Player"
  belongs_to :playertwo, :class_name => "Player"
end

<%= team.playerone.firstname %> 
```

或者您可以将名字委托给玩家。

```
class Team
  belongs_to :playerone, :class_name => "Player"
  belongs_to :playertwo, :class_name => "Player"
  delegate :firstname, :to => :playerone, :prefix => true, :allow_nil => true
  delegate :firstname, :to => :playertwo, :prefix => true, :allow_nil => true
end

<%= team.playerone_firstname %> 
```

或者您可以 (c) 使用使用整数的 belongs_to。请查阅文档 [http://guides.rubyonrails.org/getting_started.html](http://guides.rubyonrails.org/getting_started.html)

# javascript - 用于数组数组的 Javascript indexOf 未找到数组

> ID：10260165
> 
> 赞同：9
> 
> 时间：2012-04-21T15:11:00.250
> 
> 标签：javascript, jquery, arrays

我有一个带有嵌套数组的数组，如下所示：

```
var tw = [[3, 0], [11, 0], [3, 14], [11, 14]]; 
```

当我尝试查找数组是否`tw`包含传入的数组时，我总是得到-1的结果。

例如：

```
var test = $.inArray([3, 0], tw);
var test2 = tw.indexOf([3, 0]); 
```

两者都返回 -1，即使数组中的第一个对象是`[3,0]` 如何找出我的数组中是否包含特定的数组数组？

哦，到目前为止，我只在 IE9 上测试过它。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-21T15:14:30.780

那是因为您正在寻找不同的对象。`indexOf()`使用严格的相等比较（如`===`运算符）并`[3, 0] === [3, 0]`返回 false。

您需要手动搜索。这是一个使用自定义比较器函数的更通用`indexOf()`函数的示例（@ajax333221 在评论中提出了改进建议）：

```
// Shallow array comparer
function arraysIdentical(arr1, arr2) {
    var i = arr1.length;
    if (i !== arr2.length) {
        return false;
    }
    while (i--) {
        if (arr1[i] !== arr2[i]) {
            return false;
        }
    }
    return true;
}

function indexOf(arr, val, comparer) {
    for (var i = 0, len = arr.length; i < len; ++i) {
        if ( i in arr && comparer(arr[i], val) ) {
            return i;
        }
    }
    return -1;
}

var tw = [[3, 0], [11, 0], [3, 14], [11, 14]];
alert( indexOf(tw, [3, 0], arraysIdentical) ); // Alerts 0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T15:16:32.187

数组是**对象**。[3, 0] 不等于 [3, 0] 因为它们是不同的对象。这就是您的 inArray 失败的原因。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-21T15:26:24.513

因为您正在比较两个不同的数组实例。比较对象`true`仅在它们是相同的实例时才返回，它们是否包含相同的数据并不重要。

在您的情况下，您可以使用这种方法：

```
var tw = [[3, 0], [11, 0], [3, 14], [11, 14]];

if (~tw.join(";").split(";").indexOf(String([3, 0]))) {
    // ...
} 
```

或者更正统的东西，比如：

```
if (tw.filter(function(v) { return String(v) === String([3, 10]) })[0]) {
   // ...
} 
```

可以调整条件的位置取决于数组的内容。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-21T22:55:41.833

**对于无限嵌套搜索：**

```
function indexOfArr(arr1, fnd1) {
    var i, len1;

    //compare every element on the array
    for (i = 0, len1 = arr1.length; i < len1; i++) {

        //index missing, leave to prevent false-positives with 'undefined'
        if (!(i in arr1)) {
            continue;
        }

        //if they are exactly equal, return the index
        if (elementComparer(arr1[i], fnd1)) {
            return i;
        }
    }

    //no match found, return false
    return -1;
}

function elementComparer(fnd1, fnd2) {
    var i, len1, len2, type1, type2, iin1, iin2;

    //store the types of fnd1 and fnd2
    type1 = typeof fnd1;
    type2 = typeof fnd2;

    //unwanted results with '(NaN!==NaN)===true' so we exclude them
    if (!((type1 == "number" && type2 == "number") && (fnd1 + "" == "NaN" && fnd2 + "" == "NaN"))) {

        //unwanted results with '(typeof null==="object")===true' so we exclude them
        if (type1 == "object" && fnd1 + "" != "null") {
            len1 = fnd1.length;

            //unwanted results with '(typeof null==="object")===true' so we exclude them
            if (type2 == "object" && fnd2 + "" != "null") {
                len2 = fnd2.length;

                //if they aren't the same length, return false
                if (len1 !== len2) {
                    return false;
                }

                //compare every element on the array
                for (i = 0; i < len1; i++) {

                    iin1 = i in fnd1;
                    iin2 = i in fnd2;

                    //if either index is missing...
                    if (!(iin1 && iin2)) {

                        //they both are missing, leave to prevent false-positives with 'undefined'
                        if (iin1 == iin2) {
                            continue;
                        }

                        //NOT the same, return false
                        return false;
                    }

                    //if they are NOT the same, return false
                    if (!elementComparer(fnd1[i], fnd2[i])) {
                        return false;
                    }
                }
            } else {
                //NOT the same, return false
                return false;
            }
        } else {

            //if they are NOT the same, return false
            if (fnd1 !== fnd2) {
                return false;
            }
        }
    }

    //if it successfully avoided all 'return false', then they are equal
    return true;
} 
```

**笔记：**

*   支持无限嵌套数组
*   正确处理稀疏数组
*   使用[typeof](https://developer.mozilla.org/en/JavaScript/Reference/Operators/typeof)检查

[jsFiddle 演示](http://jsfiddle.net/R6FQ9/5/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-21T15:17:57.227

这是因为`$.inArray`和`indexOf`都使用`===`.

由于您传递的数组`indexOf`在内存中与二维数组中的数组不完全相同，因此`===`返回 false。您需要进行深入比较才能正确找到数组 - 快速浏览一下 jQuery 文档，这在此处不可用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-14T02:16:25.503

为什么不保持简单？

```
function indexOfCustom (parentArray, searchElement) {
    for ( var i = 0; i < parentArray.length; i++ ) {
        if ( parentArray[i][0] == searchElement[0] && parentArray[i][1] == searchElement[1] ) {
            return i;
        }
    }
    return -1;
} 
```

# php - 在 DUPLICATE KEY 错误后获取主键？

> ID：10260168
> 
> 赞同：3
> 
> 时间：2012-04-21T15:11:15.197
> 
> 标签：php, mysql, sql

如果我运行插入查询但由于重复键错误而失败，是否有任何方法可以在不进行其他选择的情况下获取其主键？

基本上：

```
INSERT INTO tbl (field) VALUES ('myvalue') 
```

这失败了，因为已经有一条 ID:1 和 field:myvalue 的记录。

现在我想知道 ID:1 而不做另一个查询：

```
SELECT id FROM tbl WHERE field = 'myvalue' 
```

有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-21T14:20:33.477

这是一个提供四种不同方法来处理此问题的链接：http: [//mikefenwick.com/blog/insert-into-database-or-return-id-of-duplicate-row-in-mysql/](http://mikefenwick.com/blog/insert-into-database-or-return-id-of-duplicate-row-in-mysql/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T15:19:11.090

每个库都有一个条款来获取插入的行的 id。

喜欢：之后简单`mysql_query()`使用`mysql_insert_id()`以检索最后插入的行的 id

[检查此链接](http://php.net/manual/en/function.mysql-insert-id.php)

编辑：

请检查您是否为`field`列定义了唯一索引。

如果是，那么您不能在列中插入重复项`field`

# debugging - 自定义 gdb -tui

> ID：10260169
> 
> 赞同：2
> 
> 时间：2012-04-21T15:11:15.837
> 
> 标签：debugging, gdb, tui

多年来，我似乎无法找到适合我的免费调试器。通常，我只是连接到我大学的集群并使用 DDT，但我想找到一些免费的东西，可以在我的机器上本地使用。我一直在玩 gdb -tui，但它没有显示其他项目文件的窗口或监视变量的窗口。我找不到在源代码窗口中打开项目中的另一个文件的方法，以便我可以扫描源代码并查看要设置断点的位置。我必须在vim中打开另一个文件，找到行号，然后在gdb中设置断点。我已经转而使用 vim 编写所有代码，这对我来说似乎工作得很好，但是我仍然没有找到一个好的多合一包来在编写代码后调试代码。

# css - 如何更改 Twitter Bootstrap 网格宽度？

> ID：10260171
> 
> 赞同：10
> 
> 时间：2012-04-21T15:11:17.430
> 
> 标签：css, twitter-bootstrap

我现在正在使用 Twitter Bootstrap 2.0 版，并注意到使用 12 列网格的空间不够。

我认为他们使用的是 940px .. 那么如何在不破坏 12 列网格的情况下使用自定义宽度？

谢谢..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-21T15:46:55.493

The simplest way would be to [customize your own download](http://twitter.github.com/bootstrap/customize.html). Focus on the Grid section.

![enter image description here](../Images/cd75eaa6ef019226bfcca9b4a0da3923.png)

Alternatively you could edit the [LESS](https://github.com/twitter/bootstrap/tree/master/less) or compiled CSS files directly.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-31T10:04:44.287

您还可以创建一个新的样式表（或添加到现有的样式表中）来简单地覆盖这些变量的值。这样您就不必担心引导更新会重写您的更改。只需确保在加载引导 CSS 和 JS 后声明变量即可。

事实上，我个人认为这是一个更好的选择，否则你必须记住每次安装引导更新时都重新编辑 CSS 文件，这绝不是一个好主意。

如果您将引导程序用作 gem（例如 Rails），这尤其成问题。这就是为什么我从不喜欢直接覆盖包含文件的原因。

# php - 将进度条添加到 Jquery 和 PHP iFrame Uploader

> ID：10260173
> 
> 赞同：0
> 
> 时间：2012-04-21T15:11:23.327
> 
> 标签：php, jquery, iframe

您将如何添加功能以显示通过 jQuery 和 PHP 上传的文件的进度？

我目前有以下代码。理想情况下，我想显示一个图像进度条，使用 CSS 增加大小，然后上传完成。

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript">
$(document).ready(function () {

    $("#formsubmit").click(function () {

var iframe = $('<iframe name="postiframe" scr="http://www.google.co.uk" id="postiframe" style="display: none" />');

$("body").append(iframe);

var form = $('#theuploadform');
form.attr("action", "ddd.php");
form.attr("method", "post");
form.attr("enctype", "multipart/form-data");
form.attr("encoding", "multipart/form-data");
form.attr("target", "postiframe");
form.attr("file", $('#userfile').val());
form.submit();

$("#postiframe").load(function () {
    iframeContents = $("#postiframe")[0].contentWindow.document.body.innerHTML;
    $("#textarea").html(iframeContents);
});

return false;

});

});
</script>

<form id="theuploadform" method="post" enctype="multipart/form-data">
<input type="hidden" name="<?php echo ini_get("session.upload_progress.name"); ?>" value="123" />
<input id="userfile" name="userfile[]" size="50" type="file" multiple />
<input id="formsubmit" type="submit" value="Send File" />
</form>

<div id="textarea"></div> 
```

干杯；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T15:23:58.633

You can only add a progress bar if you do it with ajax but the ajax file upload is not supported in IE and old FF versions.

So you'll need to use iframes without progress bar if it isn't supported. That's why many people had made nice workarounds for that. Some names of uploader plugins for jQuery are listed [here](http://micha.favor.org/mfuploader/).

You can also do it by yourself without a plugin but you can't use the jQuery ajax function because since jQuery 1.5.1 it doesn't give you the ability to access the native XHR object.

# html - 用文本填充画布形状

> ID：10260176
> 
> 赞同：3
> 
> 时间：2012-04-21T15:11:37.430
> 
> 标签：html, canvas, drawing

我试图弄清楚如何将文本添加到画布形状，例如这是我的**代码**：

```
var text ="5"; // text to display over the circle
context.fillStyle = "red";
context.beginPath();
context.arc(50,70, 10, 0, Math.PI * 2);
context.closePath();
context.fill(); 
```

如果有人能帮助我将文本添加到形状中，我会非常感谢。

**编辑** 我发现我需要在画布上再写一次，所以这就是我到目前为止所得到的......但文本并没有与圆心对齐：

```
 context.fillStyle = "red";
  context.beginPath();
  var radius = 10; // for example
  context.arc(200, 200, radius, 0, Math.PI * 2);
  context.closePath();
  context.fill();
  context.fillStyle = "black"; // font color to write the text with
  var font = "bold " + radius +"px serif";
  context.font = font;
  context.textBaseline = "top";
  context.fillText(text, 200-radius/4 ,200-radius/2); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-21T22:25:29.733

正如你在这里看到的：

[http://jsfiddle.net/DKcpS/](http://jsfiddle.net/DKcpS/)

*文本从圆圈的中心开始*绘制，并从文本的顶部开始，因为你把`textBaseline`to `top`。

这是使用文本的宽度和高度大致居中的相同文本：

[http://jsfiddle.net/DKcpS/1/](http://jsfiddle.net/DKcpS/1/)

如您所见，我们有一个`context.measureText(theTextToMeasure)`函数返回一个`textMetrics`具有宽度属性的对象。现在它没有高度，所以我们不得不猜测一下。

# wpf - prism:ClearChildViewsRegionBehavior.ClearChildViews="True" 不清除 ChildViews

> ID：10260177
> 
> 赞同：2
> 
> 时间：2012-04-21T15:11:43.187
> 
> 标签：wpf, prism, prism-4

我有以下区域层次结构。

MainRegion ----SubRegionA

MainRegion 有 SubRegionA。我通过导航在 SubRegionA 中加载视图。视图被正确加载。当我重新导航到 MainRegion 并随后导航到 SubRegionA 时，我仍然会看到之前加载的 SubRegionA 的旧视图。我想要的是，当我重新导航到 SubRegionA 时，应从内存中清除 SubRegionA 中的所有视图并加载新视图。但是当我重新导航到 SubRegionA 时，prism 仍然持有对这些视图的引用并加载它们。我试图将以下内容放在 MainRegion 和 SubRegionA 声明中，但这并没有解决问题。

**主要区域**

```
<ContentControl prism:RegionManager.RegionName="{x:Static g:RegionNames.MainRegion}"
                prism:ClearChildViewsRegionBehavior.ClearChildViews="True"/> 
```

**子区域A**

```
 <TabControl prism:RegionManager.RegionName="{x:Static g:RegionNames.SubRegionA}"
                    prism:ClearChildViewsRegionBehavior.ClearChildViews="True"
                    Style="{StaticResource TabStyle}" ItemContainerStyle="{StaticResource TabItemContainerStyle}"
                    VerticalAlignment="Top" Grid.Row="0" /> 
```

简而言之，当一个区域是 NavigatedFrom(removed) 时，我们如何清除（从内存中）来自该区域的所有视图，以及该区域包含的所有嵌套区域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-01T08:47:59.267

您是否尝试过 IRegionMemberLifetime 接口？

```
bool KeepAlive { get{return False;} } 
```

# c - 用于包装函数的内联汇编程序由于某种原因不起作用

> ID：10260178
> 
> 赞同：1
> 
> 时间：2012-04-21T15:11:46.630
> 
> 标签：c, assembly, volatile, system-calls

我正在尝试使用 asm volatile 为 read() 系统调用编写一个包装函数，但它不起作用，因为 res 不会改变它的值。

这是代码：

```
ssize_t my_read(int fd, void *buf, size_t count)

{

      ssize_t res;

      __asm__ volatile(
        "int $0x80"        /* make the request to the OS */
        : "=a" (res),       /* return result in eax ("a") */
          "+b" (fd),     /* pass arg1 in ebx ("b") */
          "+c" (buf),     /* pass arg2 in ecx ("c") */
          "+d" (count)      /* pass arg3 in edx ("d") */
        : "a"  (5)          /* passing the system call for read to %eax , with call number 5  */
        : "memory", "cc"); /* announce to the compiler that the memory and condition codes have been modified */

      /* The operating system will return a negative value on error;
       * wrappers return -1 on error and set the errno global variable */

      if (-125 <= res && res < 0)
      {
        errno = -res;
        res   = -1;
      }

      return res;

} 
```

这是`int main ()`：

```
 int main() {
     int fd = 432423;
     char buf[128];
     size_t count = 128;
     my_read(fd, buf, count);

     return 0;
 } 
```

难道我做错了什么 ？也许是因为`volatile`？

我试图调试代码，当 Eclipse 进入`my_read(fd, buf, count);` 并进入线路 `__asm__ volatile(`时`my_read`，它失败并进入`if (-125 <= res && res < 0)`......

**编辑 ：**

```
ssize_t my_read(int fd, void *buf, size_t count)

{

      ssize_t res;

      __asm__ volatile(
        "int $0x80"        /* make the request to the OS */
        : "=a" (res)       /* return result in eax ("a") */

        : "a"  (5) ,      /* passing the system call for read to %eax , with call number 5  */
          "b" (fd),     /* pass arg1 in ebx ("b") */
          "c" (buf),     /* pass arg2 in ecx ("c") */
          "d" (count)      /* pass arg3 in edx ("d") */

        : "memory", "cc"); /* announce to the compiler that the memory and condition codes have been modified */

      /* The operating system will return a negative value on error;
       * wrappers return -1 on error and set the errno global variable */

      if (-125 <= res && res < 0)
      {
        errno = -res;
        res   = -1;
      }

      return res;

} 
```

和主要：

```
 int main() {
     int fd = 0;
     char buf[128];
     size_t count = 128;
     my_read(fd, buf, count);

     return 0;
 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T15:17:20.437

> 它失败并进入`if (-125 <= res && res < 0)`

你期望它去哪里？

我希望 read 系统调用失败`-EINVAL`，因为您没有将有效的文件描述符传递给它。

更新：

你从哪里得到一个`SYS_read`想法`5`？

在我的系统`SYS_read`上，`3`处于 32 位模式和`0`64 位模式：

```
echo "#include <syscall.h>" | gcc -xc - -dD -E | grep ' __NR_read '
#define __NR_read 0

echo "#include <syscall.h>" | gcc -xc - -dD -E -m32 | grep ' __NR_read '
#define __NR_read 3 
```

假设您在 32 位系统上，您正在调用`SYS_open`，它以`-EFAULT`(-14) 失败，因为 open 系统调用的第一个参数应该是文件名并且`0`( `NULL`) 不是有效的文件名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T15:16:20.907

运行它`strace`以查看肯定发生了什么，但我认为您的问题是您将所有输入都放在输出寄存器列表而不是输入寄存器列表中......

# c# - 表单关闭后如何关闭控制台窗口

> ID：10260189
> 
> 赞同：-2
> 
> 时间：2012-04-21T15:13:17.240
> 
> 标签：c#, .net-3.5

我有一个控制台应用程序项目。它有 gui (winforms) 和控制台窗口，用作调试控制台（应用程序的运行日志）。

现在，如果我禁用了调试，我会使用`ShowWindow`本机调用隐藏控制台窗口。

问题是：通过按下按钮或退出它（Application.Exit（））关闭应用程序窗口后，`X`我有一个僵尸控制台进程。

如果我一开始就关闭控制台，`Environment.Exit(0)`则表格不会显示。

我试图通过添加那里来修改表单关闭事件`Environment.Exit(0)`，但这不起作用，这意味着仍然存在僵尸控制台进程。

如何在应用程序退出时关闭控制台窗口？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T15:27:47.107

如果它是一个控制台应用程序，控制台将不会“关闭”，直到进程终止。所以你只需要正常关闭表单......假设你像你应该的那样“打开”它。

要“打开”表单，您需要*运行*它。通过调用运行它[`Application.Run(Form)`](http://msdn.microsoft.com/en-us/library/ms157902.aspx)（与初始化实际表单项目的方式相同）。由于为您的进程分配了一个控制台，您的表单可能会写入`Console.Out`并且您应该看到您写入的内容。

# iphone - 无限动画不会被主页按钮打断

> ID：10260195
> 
> 赞同：0
> 
> 时间：2012-04-21T15:13:51.080
> 
> 标签：iphone, animation, uiview

我有几个 uiview 子类的对象，在 viewcontroller 的主视图中，我通过在类中调用以下方法来无限地设置动画：

```
- (void)hover:(NSNumber *)upDown {
    int sense = [upDown intValue];
    [UIView animateWithDuration:0.8 delay:0.1 options:UIViewAnimationOptionCurveEaseInOut | UIViewAnimationOptionAllowUserInteraction
                     animations:^{                        
                         CGRect frame = self.frame;
                         frame.origin.y += (sense==1?1:-1) * 5;
                         self.frame = frame;
                     }
                     completion:^(BOOL finished){ 
                         [self hover:[NSNumber numberWithInt:(sense==1?0:1)]];
                     }];             
} 
```

它工作得很好，除了在设备中，当按下主页按钮时，应用程序会半冻结（应用程序最终会通过反复按下主页按钮一段时间进入后台）并且与其他按钮的任何交互都会停止工作。它在任何其他情况下都可以正常工作，即只要我不按主页按钮，我就可以在控制器、按钮等...和模拟器上导航。

有任何想法吗？

**更新：**罪魁祸首似乎是我应用于我正在制作动画的视图的阴影

```
self.layer.shadowColor = [UIColor blackColor].CGColor;
self.layer.shadowOpacity = 1.0;
self.layer.shadowRadius = 5.0; 
```

这似乎会导致某种开销，只会影响应用程序无法进入后台状态？？？

有人遇到过这个吗？

**更新：**最后我决定去掉那段代码，在 drawRect: 方法中用 Quartz 绘制阴影。我怀疑这个问题可能与 iPhone 在进入后台模式之前拍摄的快照以及应用于边界外图层的阴影有关，但这只是一个猜测。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T11:26:39.807

基本上问题与这种获得圆形和阴影的方式有关：

```
[self.layer setCornerRadius:radius];

self.layer.shadowColor = [UIColor blackColor].CGColor;
self.layer.shadowOpacity = 0.2;
self.layer.shadowRadius = 5;
self.layer.shadowOffset = CGSizeMake(0, 10); 
```

阴影绘制在视图框架之外，iPhone 进入背景状态的过程在动画时似乎并不像那样。

正如我在更新中提到的，我摆脱了这一点，并使用 Quartz 在框架内绘制了两个形状的阴影。有很多关于如何做到这一点的帖子，但无论如何都在这里：

```
-(void)drawRect:(CGRect)rect
{
   const CGFloat *cComps = CGColorGetComponents([UIColor blackColor]).CGColor;
   CGContextRef context = UIGraphicsGetCurrentContext();

   CGFloat center = rect.size.width / 2.0;
   CGFloat radius = center;

   CGContextBeginPath(context);
   CGContextSetShadowWithColor(context, CGSizeMake(0, 10), 4, [UIColor colorWithWhite:0     alpha:0.1].CGColor);
   CGContextAddArc(context, center, center, radius, 0, 2*M_PI, 1);
   CGContextSetRGBFillColor(context, cComps[0], cComps[1], cComps[2], 1.0);
   CGContextFillPath(context);
} 
```

**注意：**我将视图的高度设置为 +15px 以适应底部的阴影。

希望它可以帮助某人。这确实让我发疯了几天......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T18:59:58.327

我最近遇到了这个问题，这篇文章对找出罪魁祸首非常有帮助。但事实证明，在阴影层上简单地设置 shouldRasterize 就足以防止冻结。（您还应该将 rasterizationScale 设置为与设备主屏幕的比例相同。）

我所有的阴影层都是相对静态的，并且不会一直保持动画效果，所以 YMMV。

您的标准阴影添加代码：

```
layer.shadowColor = [UIColor blackColor].CGColor;
layer.shadowOffset = CGSizeMake(0, 1);
layer.shadowOpacity = 0.5;
layer.shadowRadius = 1.0; 
```

这是您需要添加的内容：

```
layer.rasterizationScale = [[UIScreen mainScreen] scale];
layer.shouldRasterize = YES; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T16:08:04.360

我的第一个想法是你应该在你的 .h 文件中实现一个 BOOL（我们称之为 stopGoing）。然后执行以下操作：

```
- (void)hover:(NSNumber *)upDown {
    if(!stopGoing){
        int sense = [upDown intValue];
        [UIView animateWithDuration:0.8 delay:0.1 options:UIViewAnimationOptionCurveEaseInOut | UIViewAnimationOptionAllowUserInteraction
                     animations:^{                        
                         CGRect frame = self.frame;
                         frame.origin.y += (sense==1?1:-1) * 5;
                         self.frame = frame;
                     }
                     completion:^(BOOL finished){ 
                         [self hover:[NSNumber numberWithInt:(sense==1?0:1)]];
                     }];
    }  else {
        // do something else
    }           
} 
```

然后，在您链接到按钮的 IBAction 中，执行以下操作：

```
-(IBAction)myButton:(id)sender{
    stopGoing = YES;
} 
```

这应该有效地停止循环，而不会太具有侵略性。

# java - java比较器类应该在一个单独的文件中吗？

> ID：10260197
> 
> 赞同：0
> 
> 时间：2012-04-21T15:14:01.000
> 
> 标签：java, class, comparator

目前，我在与我的一个类相同的文件中有一个比较器类。

```
public class Tree {

    public static Comparator<Tree> TreeSize = new Comparator<Tree>() {
        public int compare(Tree t1, Tree t2)
        {
            etc...
        }
    }

} 
```

Comparator 类应该在它自己的文件中吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T15:19:55.177

如果你碰巧只有一个比较器，为什么不通过实现类来强加一个自然排序`Comparable`呢？那么你不仅可以保持在类水平，而且你根本不需要第二类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T15:16:51.190

（我不是 100% 确定你在问什么，因为上面的代码是不合法的。你不能在顶层声明这样的东西。你想声明第二类吗？我假设。 )

就风格而言，我发现在一个 Java 源文件中放置多个顶级声明是非常不合常规的（尽管可能）。我当然希望为您的`Comparator`.

您还可以使其成为`Tree`该类的公共静态成员。这具有一定的风格意义，因为它本质上与`Tree`. 但我自己仍然更喜欢单独的顶级课程。

# ruby - Ruby rails - jQuery JS 正在执行但没有进行 ajax 调用

> ID：10260199
> 
> 赞同：0
> 
> 时间：2012-04-21T15:14:10.190
> 
> 标签：ruby, ruby-on-rails-3, jquery

试图找出为什么这个 jQuery JS 没有进行 ajax 调用，尽管它被调用来执行。

我有这个按钮可以向控制器中的方法发出 ajax GET 请求，该方法将部分呈现。当我单击按钮时，我看不到控制台上出现任何请求，但我在浏览器上看到警报“测试”。
我有与其他参数相同的完全相同的 JS，其他参数适用于其他 ajax 调用，所以我只是复制了其中一个并更改了所有必需的参数，期望它可以立即工作。我在控制台上都没有收到任何错误。我的路线和 id 名称很好并且经过验证。我在这里想念什么？

查看 - 注意：此按钮是通过不同的 ajax 呈现的，该部分有效。

```
<%= button_tag "Add / Remove", :id => "add_remove_button", :onclick => "javascript:add_remove();" %> #note: this is buried under div tags in a html table 
```

JS-

```
 function add_remove(){
$('#add_remove_button').click(function() {
      $.ajax({
        type: 'GET',
        url: "/item/add_remove", 
        success:$('#view_item').html(data)

        /*function(){  },
        data:$('#test').serialize(),
        error: function(){  },
        success: function(data){   },
        complete: function (){   }*/
        }); #No ajax call made
/*return false;*/
});
alert('test'); #I get this alert
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T15:30:03.223

您将始终看到这一点，`alert()`因为`click()`它是异步的：`function()`传递给 click 的代码在您单击之前不会执行，但其余部分`add_remove()`将被调用。

以下是您的代码中实际发生的情况，这解释了为什么没有进行 AJAX 调用：

1.  使用`:onclick => ...`附加`add_remove()`到您的按钮。
2.  您单击按钮，`add_remove()`被调用并将另一个单击回调附加到您的按钮。然后`add_remove()`调用`alert()`. 这里没有发生 AJAX 调用，只是添加了一个新的点击处理程序，并发送了一个警报。
3.  您第二次单击该按钮，您将向该按钮附加第三次单击回调。但是，由于您在第一次单击按钮时还附加了一个单击处理程序，因此您应该在此处看到一个 AJAX 请求。
4.  第三次点击，这次你会看到两个AJAX请求，一共是3个AJAX请求。

这就是你真正想要做的。从按钮中删除 :onclick => ... ：

```
<%= button_tag "Add / Remove", :id => "add_remove_button" %> 
```

当页面首次加载时，将单击事件附加到按钮：

```
$(function(){
  $('#add_remove_button').click(function() {
    $.ajax({
      type: 'GET',
      url: "/item/add_remove", 
      success: function(data) { $('#view_item').html(data); },
      data: $('#test').serialize(),
      error: function(){  },
      success: function(data){   },
      complete: function (){   }
    });
    return false;
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T15:31:30.353

您正在混合 jquery-registering-callbacks 样式和旧的事件处理程序属性。所以你在调用 add_remove 函数时触发了注册。

只需删除 :onclick 的东西和`function add_remove(){ ... }`

# java - Java自定义ArrayList所有条目相同

> ID：10260200
> 
> 赞同：0
> 
> 时间：2012-04-21T15:14:19.753
> 
> 标签：java, arraylist, h2

我有一个自定义的数组列表设置来为我保存数据。但是，当我调用 arraylist 项目时，所有项目都是相同的。

我的数组列表加载器。

```
public static ArrayList<Animal> getTblHerd() throws Exception {
    CC_H2 db = new CC_H2();
    db.Connect(Variables.getStrConn(), Variables.getStrUser(),
            Variables.getStrPassword(), "Embedded");
    ResultSet rs = db.query("Select HERD_ID FROM tblHerd ORDER BY HERD_ID ASC");
    ArrayList<Animal> alAnimals = new ArrayList<Animal>();

    while (rs.next()) {
        int i = rs.getInt("HERD_ID");
        alAnimals.add(new Animal(i));
    }
    db.Disconnect();
    return alAnimals;
} 
```

动物构造函数

```
public Animal(int intAnimal_ID) throws Exception{
    CC_H2 db = new CC_H2();
    db.Connect(Variables.getStrConn(), "admin", "", "Embedded");
    ResultSet rs = db.query("Select * FROM tblHerd WHERE HERD_ID = "
            + intAnimal_ID);
    while (rs.next()) {
        setIntHerd_id(rs.getInt("Herd_ID"));
        setStrHerd_Tag_Letter(rs.getString("Herd_Tag_Letter"));
        setIntHerd_Tag_Num(rs.getInt("Herd_Tag_Num"));
        setStrHerd_Tag_Color(rs.getString("Herd_Tag_Color"));
        setStrHerd_Sex(rs.getString("Herd_Sex"));
        setStrHerd_Type(rs.getString("Herd_Type"));
        setDtHerd_Birthdate(rs.getDate("Herd_Birthdate"));
        setIntHerd_Sire(rs.getInt("Herd_Sire"));
        setIntHerd_Dam(rs.getInt("Herd_Dam"));
        setIntHerd_Owner(rs.getInt("Herd_Owner"));
        setDtHerd_TimeStamp(rs.getDate("Herd_TimeStamp"));
        setStrHerd_Status(rs.getString("Herd_Status"));
        setDtHerd_Status_Date(rs.getDate("Herd_Status_Date"));
    }
    db.Disconnect();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T15:36:14.770

我认为您列出的代码应该按预期工作，错误可能在其他地方。

*   检查数据库中的数据
*   检查 while 循环中的设置器做正确的事情
*   检查 Animal 类中的字段是否不是静态的
*   如果问题仍然存在，请尝试将类似内容`System.out.println(rs.getInt("Herd_ID") + ": " + rs.getString("Herd_Tag_Letter"));`放入 where 循环并检查输出

希望有些帮助 ：-）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T15:29:52.910

您已经创建了静态数组列表

只需从那里删除**静电**

# android - Android mp3跨类

> ID：10260201
> 
> 赞同：0
> 
> 时间：2012-04-21T15:14:22.467
> 
> 标签：android, android-activity, android-mediaplayer

我正在尝试使用普通类中的 MediaPlayer 类播放 mp3 声音，这意味着非活动。我的问题可能是初始化 MediaPlayer 对象，因为我在非 Activity 类中没有上下文。这如何解决？

谢谢！

**编辑**

这是应该调用函数的一些代码：

```
public class Bullet extends Thread{
public int bx = SniperActivity.bulletx;
public int by = SniperActivity.bullety;
Player obj = new Player();
SniperActivity con = new SniperActivity();

   public void shoot(){

    if (bx == Place.spotx && by == Place.spoty)
    {
            for (int f = 0; f<Rifle.dam; f++)
    {
                Player.life--;
                if(Player.life<=0){
                obj.death();
    }
    try {
        Bullet.sleep(Rifle.rate);
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
           }
    }
    int s = 0;
    s++;
    while (s == Rifle.magazine)
    {
        try {
            Bullet.sleep(Rifle.relode);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        s = 0;
    }
    con.Mplayer.start();
   }
   } 
```

该函数在此处调用，在“con.Mplayer.start()”行中，来自 shoot() 函数。con 对象正在引用一个已在其中初始化 Mplayer 的 Activity，它正试图从这里启动它。

这是活动代码：

```
public class SniperActivity extends Activity{

    private GameView game;
    private Player player;
    private Scop scope;
    public static int scopx;
    public static int scopy;
    public static int bulletx;
    public static int bullety;
    public static String filename = "SharedData";
    static SharedPreferences someData;
    public static int Width;
    public static int Height;
    public MediaPlayer Mplayer;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

    Mplayer = MediaPlayer.create(SniperActivity.this, R.raw.shot);

    someData = getSharedPreferences(filename, 0); 
    Height = someData.getInt("height", 480);
    Width = someData.getInt("width", 480);

    scopx = 1;
    scopy = 1;

    PlayerView playerview;
    playerview = new PlayerView(this, player);
    ScopView Scope;
    Scope = new ScopView(this, scope);

    this.game = new GameView(this);
    game.setviews(playerview, Scope);
    setContentView(game);
    int screenWidth,screenHeight;
    screenWidth = this.getWindowManager().getDefaultDisplay().getWidth();
    screenHeight = this.getWindowManager().getDefaultDisplay().getHeight();
    bulletx = screenWidth/2;
    bullety = screenHeight/2;
}
@Override
public boolean onTouchEvent(MotionEvent event)
{
    float dx;
    Bullet bullet = new Bullet();
    //get the x coordinate of users' press
    dx = event.getX();
     if (dx >=0)
     {
         bullet.shoot();
     }
    return true;
}

public void onDeath(){
    finish();
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T15:18:30.113

尝试传入`Context`简单java文件的构造函数

```
PlayMp3 mp3 = new PlayMp3(getApplicatonContext()); 
```

# php - 从下拉菜单的单个选择标记向 MySql 插入 2 个值

> ID：10260206
> 
> 赞同：0
> 
> 时间：2012-04-21T15:14:39.983
> 
> 标签：php, mysql, html, forms, drop-down-menu

有没有办法从一个下拉菜单中向 Mysql 插入 2 个值？

用于插入表单值的 mysql 语法示例如下：

```
if ((isset($_POST["MM_insert"])) && ($_POST["MM_insert"] == "form1")) {
$insertSQL = sprintf("INSERT INTO menu (food, image_extension) VALUES (%s, %s)",
GetSQLValueString($_POST['food'], "text"),
GetSQLValueString($_POST['image_extension'], "text"),

mysql_select_db($database_menu, $menu);
$Result1 = mysql_query($insertSQL, $menu) or die(mysql_error());

$insertGoTo = "menu.php?status=choosen";
if (isset($_SERVER['QUERY_STRING'])) {
$insertGoTo .= (strpos($insertGoTo, '?')) ? "" : "?";
$insertGoTo .= $_SERVER['QUERY_STRING'];
}
header(sprintf("Location: %s", $insertGoTo));
} 
```

我正在尝试将以下下拉列表的每个选定标记中的 2 列（食物和 image_extension）的值插入到 MySql，但它无法将数据插入到 image_extension 列。它只更新食物栏。

```
<select name="food, image extension" class="dropdownmenu" input id="food" value="<?php echo $_POST['food'].$_POST['image_extension']; ?>"> 
<option value="selected="selected">Select Food</option>
<option value="Pizza, pizza.jpg">Pizza</option>
<option value="French Fry' frenchfry.jpg">French Fry</option>
</select> 
```

在这种情况下，我对如何在上述下拉列表的以下三个属性中正确放置值感到困惑？

```
1\. <select name="food, image extension" 
2\. <select value="<?php echo $_POST['food'].$_POST['image_extension']; ?>" 
3\. <option value="Pizza, pizza.jpg">Pizza</option> 
```

任何指南都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T08:39:14.087

无论如何，这个问题已经通过 www.phpbuilder.com 专家研究员的精确指导解决了，我将在下面展示整个解决方案：

```
if ((isset($_POST["MM_insert"])) && ($_POST["MM_insert"] == "form1")) { 

//("," Comma within the double quote shall be used as delimiter here) 
$food=explode(",",$_POST['food']); 
$insertSQL = sprintf("INSERT INTO menu (food, image_extension) VALUES (%s, %s)", 

// The column names in the following string should be replaced by the newly created 
// array elements along with trim function to remove any unexpected white space.       

GetSQLValueString (trim($food[0]), "text"), 
GetSQLValueString (trim($food[1]), "text");

mysql_select_db($database_menu, $menu); 
$Result1 = mysql_query($insertSQL, $menu) or die(mysql_error()); 

$insertGoTo = "menu.php?status=choosen"; 
if (isset($_SERVER['QUERY_STRING'])) { 
$insertGoTo .= (strpos($insertGoTo, '?')) ? "" : "?"; 
$insertGoTo .= $_SERVER['QUERY_STRING']; 
} 
header(sprintf("Location: %s", $insertGoTo)); 
} 
```

html部分应更改为以下内容：

```
 <select name="food" class="dropdownmenu" input id="food" 
 value="<?php echo  $_POST['food']; ?>">
 <option value="selected="selected">Select Food</option>
 <option value="Pizza, pizza.jpg">Pizza</option>
 <option value="French Fry' frenchfry.jpg">French Fry</option>
 </select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T15:34:22.897

而不是为选择使用两个不同的名称，只需从选择菜单中获取值并将其转换为数组

```
<?php

$food = explode (",", $_POST['food']);

//$food[0] will equal Pizza, $food[1] will equal pizza.jpg
$insertSQL = "INSERT INTO menu (food, image_extension) VALUES ({$food[0]}, {$food[1]})";

?>

<select name="food" class="dropdownmenu" id="food">
<option value="Pizza, pizza.jpg">Pizza</option>
<option value="French Fry, frenchfry.jpg">Pizza</option>
</select> 
```

# php - 如何通过href标签传递变量

> ID：10260211
> 
> 赞同：0
> 
> 时间：2012-04-21T15:15:11.980
> 
> 标签：php, javascript, html, ajax, href

我有一个提供聊天服务的网站。我为聊天中的每个成员制作了会员信息页面。我想向在聊天中单击用户名的任何人显示成员信息。

例如：

```
jack
hi
jhon
hi
jack 
i'm jack
jhon
i'm jhon 
```

这是标题

```
$chat_messages_html .= '<li>' . '<span class="chat_message_header">' . '<a href="meeting/member_info">' . $chat_message->username . '</a>' 
```

我的问题如何在成员信息页面中获取变量 $chat_message->username 以使用它来检索信息

我希望很清楚

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T15:18:53.120

将用户 ID 添加到链接：

```
$chat_messages_html .= '<li>' .
                       '<span class="chat_message_header">' .
                       '<a href="meeting/member_info?userid=' . $userid . '">' .
                       $chat_message->username .
                       '</a>' 
```

`$_GET["userid"]`然后您可以使用in检索用户 ID `meeting/member_info.php`。

并请考虑使用`htmlspecialchars()`来逃避危险内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T15:19:26.783

您可以通过查询字符串传递它：

```
'<a href="meeting/member_info?username="' . $chat_message->username . '">' . $chat_message->username . '</a>' 
```

# php - 如何使用 require_once()？

> ID：10260212
> 
> 赞同：1
> 
> 时间：2012-04-20T07:50:40.050
> 
> 标签：php, require-once

我创建了一个包含以下内容的 PHP 页面：

```
<?php session_start(); ?>
<?php require_once(./classes/MaterialUtil.class.php);
$mUtil = new MaterialUtil(); 
?> 
```

我将 MaterialUtil.class.php 文件放在 D:\xampp\htdocs\drupal\sites\all\themes\zeropoint\classes 中，但收到以下错误消息：

> 解析错误：语法错误，意外的“。” 在 D:\xampp\htdocs\drupal\modules\php\php.module(80) 中：第 7 行的 eval() 代码

你能告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T14:09:28.080

错误是由于您没有使用字符串作为文件名，PHP 将点理解为连接运算符；因此，因为在操作符之前没有任何值，PHP 给你一个错误，说它在错误的地方找到了连接操作符。

正如 kalabro 所说，正确的代码如下：

```
<?php session_start(); ?>
<?php require_once('./classes/MaterialUtil.class.php');
$mUtil = new MaterialUtil(); 
?> 
```

这是与 Drupal 不严格相关的部分答案。

你正在做的不是我建议做的，有两个原因：

*   您将“类”目录放在错误的位置。这些文件与启用的主题无关，但与正在查看的页面有关。即使您只有一个主题，并且不允许用户为自己选择主题，将这些文件放在主题目录中仍然是错误的。
    将文件放在包含主题的目录中，如果您不小心，则需要在新版本可用时对其进行更新，这可能会导致您丢失添加的其他文件。
*   执行 PHP`eval()`以获取要在节点中显示的内容不是您应该做的事情。这是因为：
    *   由于您对节点使用了 PHP 过滤器，因此该节点只能对受限用户组进行编辑。（我不建议允许不受信任的用户使用 PHP 作为输入格式）
    *   当您有需要执行的 PHP 代码时，最好创建一个为站点启用的自定义模块。

如果您尝试从模块中包含 PHP 文件，那么您应该使用[module_load_include()](http://api.drupal.org/api/drupal/includes!module.inc/function/module_load_include/7)而不是`require_once()`，正如 marcvangend 已经建议的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-17T08:00:29.057

XAMP 服务器不能在 windows 文件系统格式上运行。您必须编写文件位置，例如 `localhost/xyz/abc`..

# windows - 用于 IPC 的 Windows COM 端口

> ID：10260215
> 
> 赞同：0
> 
> 时间：2012-04-21T15:15:31.113
> 
> 标签：windows, ipc, hardware-interface

Windows COM 端口可以被同一台 PC 上运行的两个程序用于进程间通信吗？我们的最终目标是编写一个通过 COM 端口通信来控制硬件的程序。由于硬件不可用，我们希望在程序中模拟硬件，该程序从虚拟 COM 端口读取并响应。

一个普通的仿真器是一个等待从 COM 端口读取字节并通过写入 COM 端口来响应的程序。首先，可以对这些消息的值进行硬编码。

所以我要做的是我有两个用 C/C++ 编写的程序，使用 windows 提供的`ReadFile`函数`WriteFile`来读取和写入文件。由于访问冲突，此方法将不起作用。因此，我想知道我们对模拟器本身的方法是否错误。

尽管我在其他领域有编程经验，但我是基于 Windows 的编程的新手。任何帮助将不胜感激。

**更新：**

解决方案：

*   安装了 Eltima Software 的 Virtual Serial Port Driver 7.1（试用版）
*   添加了一对虚拟端口（例如 COM1 和 COM2）
*   控制器程序通过 COM1 通信
*   仿真器程序通过 COM2 进行通信
*   Eltima 软件负责在两个端口之间传输数据

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T15:29:02.833

您可以使用允许两个进程读取/写入的共享参数打开文件。但这不是一个好的解决方案，因为读取/写入串行端口与读取和写入文件有许多不同之处。

相反，我建议获取一个虚拟 COM 端口驱动程序（如 com0com.sourceforge.net，或从此处 en.wikipedia.org/wiki/COM_port_redirector 选择另一个）。安装它，创建两个 COM 端口并虚拟连接它们。这样您就可以确保您的程序也可以在真实的 COM 端口上运行。

如果该解决方案不可接受，请查看使用管道而不是文件

# asp.net - ASP.NET 向导未移动到浏览器中的 WizardStep 索引 3

> ID：10260222
> 
> 赞同：1
> 
> 时间：2012-04-21T15:17:18.270
> 
> 标签：asp.net, wizard

我有一个网络反馈向导，当我在浏览器中对其进行测试时，单击下一步按钮，从第 1 步到第 2 步运行良好，但随后拒绝进入第 3 步。此外，我试图将注意力集中在第一个每个步骤中的文本框，但它仍然无法正常工作。当我单击“下一步”时，步骤会移动（正如我所说的，它从联系信息到评论都有效），但它会向上滚动到网页顶部并失去向导的焦点。这很烦人。所以我有两个问题：（1）我的向导只进行了四个步骤中的两个。(2) 向导失去焦点。

这是我的向导控件中的内容：

```
 <asp:Wizard ID="Wizard1" runat="server" BackColor="#E6E2D8" 
    BorderColor="#999999" BorderStyle="Solid" BorderWidth="1px" 
    Font-Names="Verdana" Font-Size="0.8em" ActiveStepIndex="0" Height="371px" 
    Width="691px" style="margin-top: 178px" 
onfinishbuttonclick="Wizard1_FinishButtonClick" TabIndex="1" 
                onactivestepchanged="Wizard1_ActiveStepChanged" 
                onload="Wizard1_ActiveStepChanged" onnextbuttonclick="OnNextButtonClick" 
                onprerender="Wizard1_ActiveStepChanged"  >
    <HeaderStyle BackColor="#666666" BorderColor="#E6E2D8" BorderStyle="Solid" 
        BorderWidth="2px" Font-Bold="True" Font-Size="0.9em" ForeColor="White" 
        HorizontalAlign="Center" />
    <NavigationButtonStyle BackColor="White" BorderColor="#C5BBAF" 
        BorderStyle="Solid" BorderWidth="1px" Font-Names="Verdana" Font-Size="2em" 
        ForeColor="#1C5E55" />
    <SideBarButtonStyle ForeColor="#855A21" />
    <SideBarStyle BackColor="#E3D3AC" Font-Size="0.9em" VerticalAlign="Top" />
    <StepStyle BackColor="#F7F6F3" BorderColor="#E6E2D8" BorderStyle="Solid" 
        BorderWidth="2px" VerticalAlign="Top" />
    <WizardSteps>
        <asp:WizardStep ID="WizardStep1" runat="server" Title="Contact Info" 
            StepType="Start">
            <table cellpadding="10" class="style1">
                <tr>
                    <td class="style2">
                        Your Name</td>
                    <td class="style3">
                        <asp:TextBox ID="nametxt" runat="server" style="margin-left: 0px" 
                            Width="137px"></asp:TextBox>
                    </td>
                    <td>
                        <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" 
                            ControlToValidate="nametxt" ErrorMessage="Please Enter your name"></asp:RequiredFieldValidator>
                    </td>
                </tr>
                <tr>
                    <td class="style5">
                        Email</td>
                    <td class="style6">
                        <asp:TextBox ID="emailtxt" runat="server"></asp:TextBox>
                    </td>
                    <td class="style6">
                        <asp:RegularExpressionValidator ID="RegularExpressionValidator1" runat="server" 
                            ControlToValidate="emailtxt" ErrorMessage="Please enter your email address" 
                            ValidationExpression="\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*"></asp:RegularExpressionValidator>
                    </td>
                </tr>
                <tr>
                    <td class="style5">
                        City</td>
                    <td class="style6">
                        <asp:TextBox ID="citytxt" runat="server"></asp:TextBox>
                    </td>
                    <td class="style6">
                        <asp:RegularExpressionValidator ID="RegularExpressionValidator2" runat="server" 
                            ErrorMessage="Please enter your city or town" 
                            ValidationExpression="^[a-zA-Z0-9\s.\-]+$" ControlToValidate="citytxt"></asp:RegularExpressionValidator>
                    </td>
                </tr>
                <tr>
                    <td class="style5">
                        State</td>
                    <td class="style6">
                        <asp:TextBox ID="statebox" runat="server" MaxLength="2" Width="47px"></asp:TextBox>
                    </td>
                    <td class="style6">
                        <asp:RequiredFieldValidator ID="RequiredFieldValidator2" runat="server" 
                            ControlToValidate="statebox" ErrorMessage="Please enter your state"></asp:RequiredFieldValidator>
                    </td>
                </tr>
                <tr>
                    <td class="style2">
                        &nbsp;</td>
                    <td class="style3" colspan="2">
                        <asp:ValidationSummary ID="ValidationSummary1" runat="server" Width="163px" />
                    </td>
                </tr>
            </table>
        </asp:WizardStep>
        <asp:WizardStep ID="WizardStep2" runat="server" Title="Comments" 
            StepType="Step">
            <table cellpadding="10" class="style1">
                <tr>
                    <td class="style4">
                        Comments<br />(no more than 500 characters)</td>
                    <td>
                        <asp:TextBox ID="txtcomments" runat="server" Height="55px" TextMode="MultiLine" 
                            Width="233px"></asp:TextBox>
                    </td>
                    <td>
                        <asp:CustomValidator ID="CustomValidator1" runat="server" 
                            ClientValidationFunction="ValidateComments" ControlToValidate="txtcomments" 
                            ErrorMessage="Please enter no more than 500 characters" 
                            OnServerValidate="CustomerValidator1"></asp:CustomValidator>
                    </td>
                </tr>
                <tr>
                    <td class="style4">
                        Rating<br />(1-5)</td>
                    <td>
                        <asp:TextBox ID="txtrating" runat="server"></asp:TextBox>
                    </td>
                    <td>
                        <asp:RangeValidator ID="RangeValidator1" runat="server" 
                            ControlToValidate="txtrating" ErrorMessage="Use a number between 1-5" 
                            MaximumValue="5" MinimumValue="1"></asp:RangeValidator>
                    </td>
                </tr>
                <tr>
                    <td class="style4">
                        &nbsp;</td>
                    <td colspan="2">
                        <asp:ValidationSummary ID="ValidationSummary2" runat="server" Height="42px" />
                        <asp:CompareValidator ID="CompareValidator1" runat="server" 
                            ControlToValidate="txtcomments"></asp:CompareValidator>
                    </td>
                </tr>
            </table>
        </asp:WizardStep>
        <asp:WizardStep ID="WizardStep3" runat="server" Title="Summary" 
            StepType="Finish">
            <table cellpadding="10" class="style1">
                <tr>

                        <td class="style7">
                           <h3>Summary:</h3>
                           <br />
                            <asp:Label ID="nameLabel" runat="server" AssociatedControlID="namelabel"></asp:Label>
                        </td>
                        <td class="style7">
                        </td>

                </tr>
                <tr>

                    <td>
                         <asp:Label ID="EmailLabel" runat="server" AssociatedControlID="Emaillabel" ></asp:Label></td>
                    <td>
                        &nbsp;</td>
                </tr>
                <tr>
                    <td>
                        <asp:Label ID="cityLabel" runat="server" AssociatedControlID="citylabel"></asp:Label>
                    </td>
                    <td>
                        &nbsp;</td>
                </tr>
                <tr>
                    <td>
                        <asp:Label ID="stateLabel" runat="server" AssociatedControlID="statelabel"></asp:Label>
                    </td>
                    <td>
                        &nbsp;</td>
                </tr>
                <tr>
                    <td>
                        <asp:Label ID="commentslabel" runat="server" AssociatedControlID="commentslabel"></asp:Label>
                    </td>
                    <td>
                        &nbsp;</td>
                </tr>
                <tr>
                    <td>
                        <asp:Label ID="ratinglabel" runat="server" AssociatedControlID="txtrating"></asp:Label>
                    </td>
                    <td>
                        &nbsp;</td>
                </tr>
            </table>
        </asp:WizardStep>
        <asp:WizardStep ID="WizardStep4" runat="server" Title="Complete" 
            StepType="Complete">
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />

         <h3>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Thank You!</h3>
        </asp:WizardStep>
    </WizardSteps>
</asp:Wizard> 
```

这是我在后面的代码中的内容：(c#)

```
protected void Page_Load(object sender, EventArgs e)
   {

    //Prevent display of sitemap on default page.
    SiteMapNode node = SiteMap.CurrentNode;

    if (node.ParentNode == null)
    {
        SiteMapPath1.Visible = false;
        Wizard1.Visible = false;
    }

    nameLabel.Text = nametxt.Text;
    EmailLabel.Text = emailtxt.Text;
    cityLabel.Text = citytxt.Text;
    stateLabel.Text = statebox.Text;
    commentslabel.Text = txtcomments.Text;
    ratinglabel.Text = txtrating.Text;

}

 public void OnNextButtonClick(object sender, WizardNavigationEventArgs e)
  {

        this.Wizard1.Focus();
        Wizard1_ActiveStepChanged(sender, e);

   }

   private TextBox FindFirstTextBox(Control c)
     {

    TextBox nothing = null;
    Control results;

    if ((c == null))
    {
        return nothing;
    }

    if (c.GetType() == typeof(TextBox))
    {
        return (TextBox)c;
    }

    foreach (Control child in c.Controls)
    {
      results = FindFirstTextBox(child);

      if (results != null && (results.GetType() == typeof(TextBox)))
      {
          return (TextBox)results;

      }
      else
      {

          return nothing;
      }

     }

    return nothing;

}

protected void Wizard1_ActiveStepChanged(object sender, System.EventArgs e)
{
    // Set the focus to the first TextBox in the current step
    WizardStepBase currentWizardStep = Wizard1.ActiveStep;
    // Find the first TextBox
    TextBox firstTextBox = FindFirstTextBox(currentWizardStep);
    // If we found a TextBox, set the Focus
    if (!(firstTextBox == null))
    {
        firstTextBox.Focus();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T15:32:16.043

好的，那是因为...您在向导的第二步中的 txtComments 字段上有一个比较验证器...我建议修复或删除它...这是我所指的代码（在您的向导步骤 2)

```
 <asp:CompareValidator ID="CompareValidator1" runat="server" 
   ControlToValidate="txtcomments"></asp:CompareValidator> 
```

上面代码中缺少的东西是：

*   设置“ControlToCompare”属性。
*   设置错误信息...

**更新您的第二个问题**

要专注于每个选项卡的第一个文本框...并保持滚动位置...请按照以下步骤操作...

**第 1 步**在您的 Page_Load 事件中...添加以下代码行

```
nametxt.Focus(); // This will make sure that your nametxt texbox has focus when your page loads for the first time 
```

**第 2 步**您的 FindFirstTextBox 方法的代码可以像下面这样简单......所以将其更新为下面的代码......

```
// This code is pretty much self explanatory    
private TextBox FindFirstTextBox(Control c)
        {
            foreach (Control child in c.Controls)
            {
                if (child is TextBox)
                    return (TextBox)child;
            }

            //If we didn't find a TextBox
            return null;
        } 
```

**第 3 步**将您的 Wizard_ActiveStepChanged 事件更新到以下...

```
protected void Wizard1_ActiveStepChanged(object sender, System.EventArgs e)
        {
            // Set the focus to the first TextBox in the current step
            WizardStepBase currentWizardStep = Wizard1.ActiveStep;

            // Find the first TextBox
            TextBox firstTextBox = FindFirstTextBox(currentWizardStep);
            // If we found a TextBox, set the Focus               

            if (Page.IsPostBack && firstTextBox != null)
            {
                firstTextBox.Focus();
            }
        } 
```

在上面的事件代码中，我更改了 if 语句以对 page.IsPostBack 进行额外检查...这是因为 Focus 方法将引发异常...因为此事件是在您的 OnLoad 和 OnRender 之前调用的... .这几乎取决于您弄清楚为什么这么早调用此步骤...

**第 4 步**最后，要解决您的滚动问题...您需要使用更新面板...请参阅下面的代码片段...

```
 // Your Update Panel needs a Script Manager to work    
    <asp:scriptManager runat="server" ID="sm"></asp:scriptManager>
        <asp:UpdatePanel runat="server" ID="panel" UpdateMode="Always">
        <ContentTemplate>

        // ALL YOUR CONTENT MARK UP GOES HERE

    </ContentTemplate>
    </asp:UpdatePanel> 
```

这应该可以解决你的第二个问题......

# iphone - 为什么我不能在 iOS 中将 mapView.showsUserLocation 设置为 YES？

> ID：10260224
> 
> 赞同：0
> 
> 时间：2012-04-21T15:17:21.587
> 
> 标签：iphone, ios5, mkmapview

我在这里找到了一个类似的旧帖子： [showsUserLocation does not display blue dot in iPhone 4.0](https://stackoverflow.com/questions/3552424/showsuserlocation-does-not-display-blue-dot-in-iphone-4-0)

我有这个代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    locationManager=[[CLLocationManager alloc]init];

    [locationManager setDelegate:self];
    [locationManager setDistanceFilter:kCLDistanceFilterNone];
    [locationManager setDesiredAccuracy:kCLLocationAccuracyBest];
    //[locationManager startUpdatingLocation];
    mapView.showsUserLocation=YES;    
    NSLog(@"bool: %d", [mapView showsUserLocation]);

    // Override point for customization after application launch.
    self.viewController = [[[WhereamiViewController alloc] initWithNibName:@"WhereamiViewController" bundle:nil] autorelease];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];

    return YES;
} 
```

为什么`NSLog(@"bool: %d", [mapView showsUserLocation])`显示`0`，不显示`1`？为什么我不能设置它`YES`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T05:57:40.850

您的应用程序可能已完成启动，但您的视图可能尚未加载。如果视图没有加载其中的 mapView 也不会加载。尝试将 showsUserLocation 代码移动到 viewDidLoad

# android - Android - 自定义进度条显示当前播放的秒数

> ID：10260225
> 
> 赞同：2
> 
> 时间：2012-04-21T15:17:27.973
> 
> 标签：android, android-layout

我需要创建一个具有不同样式的自定义进度条。希望我在这个线程中找到了一个很好的例子：[Custom Drawable for ProgressBar/ProgressDialog](https://stackoverflow.com/questions/2819778/custom-drawable-for-progressbar-progressdialog)，它工作正常。

但是，我还需要在进度条上方的简单视图中显示播放时间。棘手的部分是这个视图应该随着progressBar的进度移动并显示分钟和秒。
要完全理解我在说什么，只需看看 Vimeo 播放器：[https](https://jira.sakaiproject.org/secure/attachment/25159/Vimeo+player+in+Sakai.jpg) ://jira.sakaiproject.org/secure/attachment/25159/Vimeo+player+in+Sakai.jpg 。(00:22)。

您能否给我一些从哪里开始的指导，以及如何达到这种效果？

我的第一个想法是获取音频文件的持续时间（毫秒），然后根据当前位置，将毫秒转换为像素并用“X”像素水平移动视图....但也许有更智能的解决方案.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:46:51.607

我知道这个答案迟了，但我今天看到了你的帖子，过了一会儿我发现了那个[博客条目](http://www.jagsaund.com/blog/2011/11/6/customizing-your-progress-bar-part-one.html)。我认为第 2 部分正是您正在寻找的。

好的，它只在上面的气泡中显示了进度，但我认为它会引导你走向正确的方向

# scala - Scala/Hadoop：除非存在 CustomInputFormat 实例，否则使用 classOf[CustomInputFormat] 时出现编译器错误

> ID：10260226
> 
> 赞同：0
> 
> 时间：2012-04-21T15:17:30.063
> 
> 标签：scala, hadoop

我已经定义了一个自定义输入和输出格式`XMLIO.scala`：

```
import scala.xml.Node
import org.apache.hadoop.lib.input.FileInputFormat
import org.apache.hadoop.lib.output.FileOutputFormat
import org.apache.hadoop.mapreduce.{ RecordReader, RecordWriter }
// ...
object XMLIO {
    class XMLInputFormat extends FileInputFormat[LongWritable, Node] { /*...*/ }
    class XMLRecordReader extends RecordReader[LongWritable, Node] { /*...*/ }
    class XMLOutputFormat extends FileOutputFormat[LongWritable, Node] { /*...*/ }
    class XMLRecordWriter extends RecordWriter[LongWritable, Node] { /*...*/ }
} 
```

我正在尝试将其用于我正在定义的工作`Example.scala`：

```
import XMLIO._
import org.apache.hadoop.conf.Configuration
import org.apache.hadoop.mapreduce.Job
object Example {
    @throws(classOf[Exception])
    def main( args : Array[String] ) {
        val job = new Job(new Configuration(), "")
        job setInputFormatClass classOf[XMLInputFormat]
    }
} 
```

但是，这给了我一个编译器错误：

```
[ERROR] /path/to/Example.scala:8: error: type mismatch;
[INFO]  found   : java.lang.Class[XMLInputFormat](classOf[XMLInputFormat])
[INFO]  required: java.lang.Class[_ <: org.apache.hadoop.mapreduce.InputFormat]
[INFO]     job setInputFormatClass classOf[XMLInputFormat]
[INFO]                                    ^ 
```

这对我来说似乎很奇怪，因为它`XMLInputFormat`是 的子类`FileInputFormat`，它是 的子类`InputFormat`。

在 REPL 中玩了一下，我发现了一个奇怪的解决方法。`XMLInputFormat`如果我在设置输入格式类之前创建了一个实例，则不会出现编译器错误。也就是说，以下编译良好：

```
import XMLIO._
import org.apache.hadoop.conf.Configuration
import org.apache.hadoop.mapreduce.Job
object Example {
    @throws(classOf[Exception])
    def main( args : Array[String] ) {
        val x = new XMLInputFormat()
        val job = new Job(new Configuration(), "")
        job setInputFormatClass classOf[XMLInputFormat]
    }
} 
```

这里发生了什么？有没有一个看起来不像黑客的修复方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T15:18:18.253

看起来这是 scala 2.9.0 的错误（这是我正在使用的）。当我升级到 scala 2.9.1 时，问题就消失了。

# asp.net - ASP Server 减少会话超时

> ID：10260231
> 
> 赞同：0
> 
> 时间：2012-04-21T15:18:04.383
> 
> 标签：asp.net, session, timeout

我在共享的 ASP.NET 4.0 服务器上运行一个网站。因此，我只有有限的内存大小来存储用户的会话状态。

我编写的程序不使用 Session 变量：一旦页面准备就绪，它就会发送给用户，瞧。其余的是 JavaScript，当用户单击链接时，我不在乎是否要打开新会话。

问题是：如果我将会话超时减少到只说 1 分钟呢？用户是否会遭受额外的延迟？

如果我去无会话怎么办？

由于我不为用户使用登录密码，我怀疑它不会影响性能。我对吗？有洞穴吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T15:50:36.350

仅当您需要存储一些“状态”时才需要会话 - 以“记住”或“了解”服务器端**特定**客户端（用户/浏览器）的某些信息（您可以在客户端使用 cookie）。

如果您不需要这样做，您可以[关闭会话](http://support.microsoft.com/kb/306996)..

对于[MVC](https://stackoverflow.com/questions/884852/how-can-i-disable-session-state-in-asp-net-mvc)（请注意 Brad Wilson 对 MVC2 的评论）

# java - 通过 Solrj 查询 Solr：基础

> ID：10260237
> 
> 赞同：6
> 
> 时间：2012-04-21T15:18:37.157
> 
> 标签：java, solr, lucene, solrj

我正在尝试通过 Eclipse 中的 solrj 查询 solr。我尝试了最新的[solrj wiki](http://wiki.apache.org/solr/SolJava)示例：

```
import org.apache.solr.client.solrj.SolrServer;
import org.apache.solr.client.solrj.SolrServerException;
import org.apache.solr.client.solrj.impl.CommonsHttpSolrServer;
import org.apache.solr.client.solrj.response.QueryResponse;
import org.apache.solr.common.params.ModifiableSolrParams;

import java.net.MalformedURLException;

public class SolrQuery2 {
  public static void main(String[] args) throws MalformedURLException, SolrServerException {
    SolrServer solr = new CommonsHttpSolrServer("http://localhost:8080/solr");

    // http://localhost:8080/solr/select/?q=outside
    ModifiableSolrParams params = new ModifiableSolrParams();
    params.set("qt", "/select");
    params.set("q", "outside");

    QueryResponse response = solr.query(params);
    System.out.println("response = " + response);
  }
} 
```

但是，无论我做什么，我都无法克服这个错误：

```
Exception in thread "main" java.lang.NoSuchMethodError: 
    org.slf4j.spi.LocationAwareLogger.log(Lorg/slf4j/Marker;Ljava/lang/String;ILjava/lang/String;[Ljava/lang/Object;Ljava/lang/Throwable;)V 
```

接下来，我尝试了食谱示例：

```
import java.util.Iterator;
import org.apache.solr.client.solrj.SolrQuery; //Error: The import org.apache.solr.client.solrj.SolrQuery conflicts with a type defined in the same file
import org.apache.solr.client.solrj.impl.CommonsHttpSolrServer;
import org.apache.solr.client.solrj.impl.XMLResponseParser;
import org.apache.solr.client.solrj.response.QueryResponse;
import org.apache.solr.common.SolrDocument;
import org.apache.solr.common.SolrDocumentList;

public class SolrQuery {

      public static void main(String[] args) throws Exception {

          CommonsHttpSolrServer server = new CommonsHttpSolrServer("http://localhost:8080/solr");
          server.setParser(new XMLResponseParser());
          SolrQuery query = new SolrQuery();
          query.setQuery("document"); //Error: The method setQuery(String) is undefined for the type SolrQuery
          query.setStart(0); //Error: The method setStart(int) is undefined for the type SolrQuery
          query.setRows(10); //Error: The method setRows(int) is undefined for the type SolrQuery
          QueryResponse response = server.query(query); //Error: The method query(SolrParams) in the type SolrServer is not applicable for the arguments (SolrQuery)
          SolrDocumentList documents = response.getResults();
          Iterator<SolrDocument> itr = documents.iterator();
          System.out.println("DOCUMENTS");
          while(itr.hasNext()){
              SolrDocument doc = itr.next();
              System.out.println(doc.getFieldValue("id")+":"+doc.getFieldValue("content"));
          }

      }
    } 
```

但是，该示例对于当前的 api 可能已经过时，因为我什至无法导入 SolrQuery 库。

有没有人有一个有效的快速样板示例？

先感谢您。

PS。我正在使用 tomcat7 和 solr 3.5 运行 windows7。在这一点上，我要做的只是一个基本查询，并将结果以某种列表、数组等形式返回。当我查询：`http://localhost:8080/solr/select/?q=outside`在 Firefox 中，结果回来就好了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T09:34:26.577

以下是我如何让 Solrj (Solr 3.6) 使用 Eclipse 在我的 Windows7 机器上工作：

```
import java.net.MalformedURLException;

import org.apache.solr.client.solrj.SolrServer;
import org.apache.solr.client.solrj.SolrServerException;
import org.apache.solr.client.solrj.impl.HttpSolrServer;
import org.apache.solr.client.solrj.response.QueryResponse;
import org.apache.solr.common.params.ModifiableSolrParams;

public class SolrQuery {
  public static void main(String[] args) throws MalformedURLException, SolrServerException {
    SolrServer server = new HttpSolrServer("http://localhost:8080/solr");
        ModifiableSolrParams params = new ModifiableSolrParams();
        params.set("q", "1");

            QueryResponse response = server.query(params);

            System.out.println("response = " + response);

  }
} 
```

我必须下载额外的 jars（在 Solr 3.6 之外）才能工作：httpcomponents-client-4.2-beta1

总的来说，我需要 4 个罐子才能让它工作：

*   apache-solr-solrj-3.6.0.jar
*   httpclient-4.2-beta1.jar
*   httpcore-4.2-beta1.jar
*   httpmime-4.2-beta1.jar

我不确定我的解决方案是否被认为是锅炉代码方面的最佳实践，但它解决了在 solrj w/eclipse 上起床的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T16:47:30.160

org.slf4j.spi.LocationAwareLogger类由 slf4j-api jar 提供[。](http://search.maven.org/#search%7Cga%7C1%7Cfc:%22org.slf4j.spi.LocationAwareLogger%22)你运行的是什么版本？Solr 3.5 需要 1.6.1 版本，我怀疑您使用的是早期版本。

如果您正在寻找 Solrj 快速入门，我建议您切换到 Groovy。它可以在运行时使用[Grab annotations](http://groovy.codehaus.org/Grape)下载 jar 依赖项。例子：

*   [将 Solr xml 文件解析为 SolrInputDocument](https://stackoverflow.com/questions/8839331/parse-solr-xml-files-to-solrinputdocument/8888386#8888386)

# c++ - 如何使用 lzma sdk 压缩文件夹？

> ID：10260241
> 
> 赞同：3
> 
> 时间：2012-04-21T15:19:09.937
> 
> 标签：c++, delphi, 7zip, lzma

[http://www.7-zip.org/sdk.html](http://www.7-zip.org/sdk.html)
我可以用它来压缩文件，但是找不到压缩文件夹的功能

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T16:47:47.757

您必须创建一个`.7z`存档，然后在其中包含该文件夹的所有文件。没有直接的“文件夹”压缩：只是压缩文件。如果您在文件名中存储（相对）文件夹名称（例如“FolderName\FileName”），则文件夹“FolderName”将出现在存档中。

您在 SDK 中有一个 ANSI-C 兼容的源代码，用于 7z 解压缩示例。您必须对其进行调整以将文件夹的所有文件添加到存档中（`FindFirst / FindNext / FindClose`如果您希望包含子文件夹，请使用和递归）。

*编辑：*事实上，sdk 中没有 .7z 的写法。仅从 sdk 中的 .7z 存档打开/提取。您必须手动编写代码......所以也许是[Delphi 的 Using 7-Zip？](https://stackoverflow.com/questions/74519/using-7-zip-from-delphi)答案会在这里帮助你。

# c++ - 如何使用 (<,>) 比较字符串

> ID：10260243
> 
> 赞同：1
> 
> 时间：2012-04-21T15:19:23.477
> 
> 标签：c++, compare, quicksort

我正在尝试为我的 while 循环比较两个字符串，这是我的代码片段：

```
//variables
string pivot, array[10];
int rightBoundary;

//loop
while( pivot < array[rightBoundary]) 
```

此代码来自快速排序教程，但我试图将其转换为使用字符串。

所以我的问题是进行这种比较的最佳方法是什么。

目前我收到此错误（quickSortNumbers.exe 中 0x774215de 处的未处理异常：0xC0000005：访问冲突读取位置 0x965b7214。）

和帮助将是非常感谢:)

编辑：抱歉应该刚刚上传了我所有的代码，我认为问题实际上可能是字符串数组。这是我所有的代码：

```
#include <iostream>
#include <string>
using namespace std;

#define array1_SIZE 5                //change the array1 size here

void Printarray1(string* array1, int n);
void QuickSort(string* array1, int startIndex, int endIndex);
int Splitarray1(string* array1, string pivot, int startIndex, int endIndex);
void swap(string &a, string &b);

int main(void)
{
    string array1[array1_SIZE];
    int i;

    for( i = 0; i < array1_SIZE; i++)               //array1 elements input
    {
        cout<<"Enter an integer : ";
        cin>>array1[i];
    }

    cout<<endl<<"The list you input is : "<<endl;
    Printarray1(array1, array1_SIZE);
    QuickSort(array1,0,array1_SIZE - 1);    //sort array1 from first to last element
    cout<<endl<<"The list has been sorted, now it is : "<<endl;
    Printarray1(array1, array1_SIZE);

    cin.get();
    cin.get();
    int read;
    cin >> read;
    return 0;
}

/* This function swaps two numbers
  Arguments :
           a, b - the numbers to be swapped
  */
void swap(string &a, string &b)
{
    string temp;
    temp = a;
    a = b;
    b = temp;
}

/* This function prints an array1.
  Arguments :
           array1 - the array1 to be printed
           n - number of elements in the array1
  */
void Printarray1(string* array1, int n)
{
    int i;

    for( i = 0; i < n; i++) 
    {   
        cout << array1[i] << '\t';
    }
}

/* This function does the quicksort
  Arguments :
           array1 - the array1 to be sorted
           startIndex - index of the first element of the section
           endIndex - index of the last element of the section
  */
void QuickSort(string* array1, int startIndex, int endIndex)
{
    string pivot = array1[startIndex];  //pivot element is  the leftmost element
    int splitPoint;

    if(endIndex > startIndex)       //if they are equal, it means there is
        //only one element and quicksort's job
        //here is finished
    {
        splitPoint = Splitarray1(array1, pivot, startIndex, endIndex);
        //Splitarray1() returns the position where
        //pivot belongs to
        array1[splitPoint] = pivot;
        QuickSort(array1, startIndex, splitPoint-1);   //Quick sort first half
        QuickSort(array1, splitPoint+1, endIndex);   //Quick sort second half
    }
}

/* This function splits the array1 around the pivot
  Arguments :
           array1 - the array1 to be split
           pivot - pivot element whose position will be returned
           startIndex - index of the first element of the section
           endIndex - index of the last element of the section
  Returns :
         the position of the pivot
  */
int Splitarray1(string* array1, string pivot, int startIndex, int endIndex)
{
    int leftBoundary = startIndex;
    int rightBoundary = endIndex;

    while(leftBoundary < rightBoundary) //shuttle pivot until the     boundaries meet
    {
        while( pivot < array1[rightBoundary]//keep moving until a lesser element is found
               && rightBoundary > leftBoundary)   //or until the  leftBoundary is reached
        {
            rightBoundary--;                        //move left
        }
        swap(array1[leftBoundary], array1[rightBoundary]);
        //Printarray1(array1, array1_SIZE);          //Uncomment this line for study

        while( pivot >= array1[leftBoundary]          //keep moving until a greater or equal element is found
               && leftBoundary < rightBoundary)   //or until the rightBoundary is reached
        {
            leftBoundary++;                      //move right
        }
        swap(array1[rightBoundary], array1[leftBoundary]);
        //Printarray1(array1, array1_SIZE);          //Uncomment this line for study
    }
    return leftBoundary;                              //leftBoundary is the split point because
    //the above while loop exits only when 
    //leftBoundary and rightBoundary are equal
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T15:21:09.187

您可能有一个越界错误，可能是由于未初始化`rightBoundary`. 使用比较运算符可以完美地比较字符串。

```
#include <iostream>
using std::cout;

#include <string>
using std::string;

int main()
{
    string s1 = "hello";
    string s2 = "world!";

    string lower = s1 < s2 ? s1 : s2;

    cout << lower; //prints "hello"
} 
```

要在不担心大小写的情况下进行比较，您可以使用`lexicographical_compare`自己的比较器功能：

```
#include <algorithm>
using std::lexicographical_compare;

#include <cctype>
using std::tolower;

#include <iostream>
using std::cout;

#include <string>
using std::string;

bool nocase_compare (char one, char two)
{
    return tolower (one) < tolower (two);
}

int main()
{
    string s1 = "Hello";
    string s2 = "happy";

    if (lexicographical_compare (s1.begin(), s1.end(), s2.begin(), s2.end(), nocase_compare))
        cout << s1;
    else
        cout << s2;
    //prints "happy" even though 'H' < 'h'
} 
```

如果你真的想使用 < 和 >，你将不得不为`string`实现你的`operator<`and版本做一个小包装器`operator>`。在`string`使用默认实现的那些`lexicographical_compare`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T15:23:02.433

使用 < 比较字符串很好，但如果你想要字母顺序，可能不是你所期望的，因为如果你想要字典顺序，所有小写字母都在大写字母之前，你应该使用 lexicographical_compare 代替。

您的代码崩溃的原因是您没有为 rightBoundary 分配任何初始值，您应该这样做：

```
int rightBoundary = 0; 
```

因为否则 rightBoundary 将具有任意初始值，该初始值极有可能大于“数组”的大小并导致越界访问。

# asp.net-mvc-3 - 数据注释，不显眼的验证。最小年龄，最大年龄

> ID：10260248
> 
> 赞同：2
> 
> 时间：2012-04-21T15:19:37.727
> 
> 标签：asp.net-mvc-3, validation, jquery-validate, unobtrusive-validation, validationattribute

我想达到什么目标：

1.  显示一条针对最小年龄检查失败的单独验证消息和一条针对最大年龄检查的验证消息
2.  将一个区域中的最小和最大年龄存储为整数。不在 js/ 验证器中……仅在模型中。我希望将其更改为查看配置文件。
3.  为了使验证与 jquery 不显眼和服务器端一起工作，并在一个地方针对模型（和 obv 一些 jquery）
4.  使用数据注释启用
5.  我想检查 DOB 作为日期时间，而不是让用户将年龄作为 int 输入。如果我这样做了，我可以使用 [Min] 符号和 [Max] 符号来表示年龄。这还不够好。
6.  为什么我不使用范围表示法。我想为每个最小失败和最大失败触发不同的验证消息。我看着这个，没有看。我还必须将范围作为日期时间及其静态或其他内容传递，因此我无法完成 DateTime.Now.AddYears(-90) 之类的操作。

我的问题

1.  我是 MVC、JQuery 验证和整个 MVC 架构的菜鸟！
2.  我想出的作品。但是，正如您所看到的，有很多重复的代码，我想符合 DRY。
3.  我的第一个技巧是将我要检查的值传递到验证消息中。我通过这样做解决了这个问题...

    [MaximumAgeCheck(90,"您最多必须是 {0} 才能申请")]

并在验证属性内

```
 private readonly int _min;
    private readonly string _defaultErrorMessage = "";
    public MinimumAgeCheck(int min, string defaultErrorMessage)
        : base(defaultErrorMessage)
    {
        _min = min;
        _defaultErrorMessage = defaultErrorMessage.Replace("{0}", _min.ToString());
    } 
```

例如，我像这样使用它..

```
return new ValidationResult(_defaultErrorMessage); 
```

**我知道这不是正确的方法，并且想知道最好的方法是什么？**

第二次破解！

我传入了两个验证参数，我希望能够在 jQuery.validator.addMethod... 方法中访问它们。

我尝试通过执行以下操作来访问这些参数... params.[thevalueiadded]、params[0]...等，我什至将参数注销到 console.log 但它从未向我显示所有参数，只显示第一个值作为一个字符串！

我的解决方法是将 javascript 变量存储在顶部并从 adapters.add 加载它们。

我可能没有什么意义，所以这里是代码，它有效......我警告你，它很乱！

**模型属性和数据注释**

```
[Required(ErrorMessage = "Date of birth required")]
        [Display(Name = "Date of Birth")]
        [DisplayFormat(DataFormatString = "{0:dd/MM/yyyy}")]
        [DataType(DataType.DateTime, ErrorMessage = "Date of birth should be in dd/mm/yyyy format")]
        [MinimumAgeCheck(18,"You have to be at least {0} to apply")]
        [MaximumAgeCheck(90,"You have to be at most {0} to apply")]
        public DateTime? DateOfBirth { get; set; } 
```

**最小年龄检查和最大年龄检查**

*验证属性*

```
public class MinimumAgeCheck : ValidationAttribute, IClientValidatable
    {
        private readonly int _min;
        private readonly string _defaultErrorMessage = "";
        public MinimumAgeCheck(int min, string defaultErrorMessage)
            : base(defaultErrorMessage)
        {
            _min = min;
            _defaultErrorMessage = defaultErrorMessage.Replace("{0}", _min.ToString());
        }

        protected override ValidationResult IsValid(object value, ValidationContext validationContext)
        {
            DateTime dtV = (DateTime)value;
            long lTicks = DateTime.Now.Ticks - dtV.Ticks;
            DateTime dtAge = new DateTime(lTicks);

            if (!(dtAge.Year >= _min && dtAge.Year <= 30))
            {
                return new ValidationResult(_defaultErrorMessage);
            }
            return ValidationResult.Success;
        }

        public override string FormatErrorMessage(string name)
        {
            return String.Format(CultureInfo.CurrentUICulture, ErrorMessageString, _min);
        }

        public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
        {
            ModelClientValidationRule mcvrTwo = new ModelClientValidationRule();
            mcvrTwo.ValidationType = "checkminimumage";
            mcvrTwo.ErrorMessage = _defaultErrorMessage;
            mcvrTwo.ValidationParameters.Add("todaysdate", DateTime.Now.ToString("dd/MM/yyyy"));
            mcvrTwo.ValidationParameters.Add("lowerage", _min.ToString());

            return new List<ModelClientValidationRule> { mcvrTwo };
        }
    }

  public class MaximumAgeCheck : ValidationAttribute, IClientValidatable
    {
        private readonly int Max;
        private readonly string _defaultErrorMessage = "";
        public MaximumAgeCheck(int max, string defaultErrorMessage)
            : base(defaultErrorMessage)
        {
            Max = max;
            _defaultErrorMessage = defaultErrorMessage.Replace("{0}", Max.ToString());
        }

        protected override ValidationResult IsValid(object value, ValidationContext validationContext)
        {
            DateTime dtV = (DateTime)value;
            long lTicks = DateTime.Now.Ticks - dtV.Ticks;
            DateTime dtAge = new DateTime(lTicks);

            if (!(dtAge.Year >= Max && dtAge.Year <= 30))
            {
                return new ValidationResult(_defaultErrorMessage);
            }
            return ValidationResult.Success;
        }

        public override string FormatErrorMessage(string name)
        {
            return String.Format(CultureInfo.CurrentUICulture, ErrorMessageString,Max);
        }

        public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
        {
            ModelClientValidationRule mcvrTwo = new ModelClientValidationRule();
            mcvrTwo.ValidationType = "checkmaximumage";
            mcvrTwo.ErrorMessage = _defaultErrorMessage;
            mcvrTwo.ValidationParameters.Add("todaysdate", DateTime.Now.ToString("dd/MM/yyyy"));
            mcvrTwo.ValidationParameters.Add("upperage", Max.ToString());

            return new List<ModelClientValidationRule> { mcvrTwo };
        }
    } 
```

**jQuery**

```
(function ($) {

    var mintodaysDateVal;
    var maxtodaysDateVal;
    var lowerageVal;
    var upperageVal;
    jQuery.validator.unobtrusive.adapters.add("checkminimumage", ['lowerage', 'todaysdate', 'upperage'], function (options) {
        options.rules["checkminimumage"] = options.params;

        mintodaysDateVal = options.params.todaysdate;
        lowerageVal = options.params.lowerage;

        options.messages["checkminimumage"] = options.message;
    });

    jQuery.validator.addMethod("checkminimumage", function (value, element, params) {

        var currDate = mintodaysDateVal;
        var sdoc = currDate.split('/');
        var dobDate = value;
        var sdob = dobDate.split('/');

        //pass year,month,date in new Date object.
        var vDOB = new Date(sdob[2], sdob[1] - 1, sdob[0]);
        var vDOC = new Date(sdoc[2], sdoc[1] - 1, sdoc[0]);
        //getAge user define function to calculate age.

        var vYrs = getAge(vDOB, vDOC);
        var result = false;
        if (vYrs >= lowerageVal) { result = true; }
        return result;
    });

    jQuery.validator.unobtrusive.adapters.add("checkmaximumage", ['lowerage', 'todaysdate', 'upperage'], function (options) {
        options.rules["checkmaximumage"] = options.params;

        maxtodaysDateVal = options.params.todaysdate;
        upperageVal = options.params.upperage;

        options.messages["checkmaximumage"] = options.message;
    });

    jQuery.validator.addMethod("checkmaximumage", function (value, element, params) {
        var currDate = maxtodaysDateVal;
        var sdoc = currDate.split('/');
        var dobDate = value;
        var sdob = dobDate.split('/');

        var vDOB = new Date(sdob[2], sdob[1] - 1, sdob[0]);
        var vDOC = new Date(sdoc[2], sdoc[1] - 1, sdoc[0]);

        var vYrs = getAge(vDOB, vDOC);
        var result = false;
        if (vYrs <= upperageVal) { result = true; }
        return result;
    });

    function getAge(oldDate, currDate) {
        return currDate.getFullYear() - oldDate.getFullYear();
    }
} (jQuery)); 
```

我希望这是有道理的，我已经阅读了它并且它很乱码......所以我很乐意回答任何评论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:13:03.357

真正有用的代码，但是 ValidationResult IsValid 方法有一些错误。它不处理未来日期或空白日期。另外，它似乎对 30 岁有硬编码限制 - 看起来是调试代码？无论如何，我为我的代码解决了这些问题，并提出了以下问题：

```
 protected override ValidationResult IsValid(object value, ValidationContext validationContext)
    {
        if (value == null)
        {
            return new ValidationResult(_defaultErrorMessage);
        }

        DateTime dtV = (DateTime)value;
        long lTicks = DateTime.Now.Ticks - dtV.Ticks;
        if (lTicks < 0)
        {
            return new ValidationResult(_defaultErrorMessage);
        }

        DateTime dtAge = new DateTime(lTicks);

        if (!(dtAge.Year >= _min ))
        {
            return new ValidationResult(_defaultErrorMessage);
        }
        return ValidationResult.Success;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T09:23:59.173

看看[MVC Foolproof Validation](http://foolproof.codeplex.com/)库。你可以在 NuGet 中找到它。

它几乎具有您需要的所有验证，并通过数据注释添加。它将很好地集成到不显眼的客户端验证中。

# android - Android App Background：使用多张图片

> ID：10260249
> 
> 赞同：6
> 
> 时间：2012-04-21T15:19:40.077
> 
> 标签：android, background, styles, tile, app-themes

我有一个背景图像，它被分成三个单独的图像：

```
backgroundTop.png
backgroundMiddle.png
backgroundBottom.png 
```

我将如何在 Android 应用程序中实现背景，其中顶部图像显示在应用程序顶部，底部图像显示在底部，中间图像平铺在两者之间？这当然取决于屏幕上加载了多少内容——就像在网页中一样。

换句话说，中间图像平铺的总次数将取决于屏幕上的内容。

我在这里看到了一种从单个图像中实现平铺背景的解决方案：[How to make android app's background image repeat](https://stackoverflow.com/questions/2706913/how-to-make-android-apps-background-image-repeat)

如果您使用的是单张图片，这可以正常工作，但不适用于多张图片。

链接到下面的例子，所以你知道我的意思：

[http://rockfreaks.net/images/reviewPageTop.png](http://rockfreaks.net/images/reviewPageTop.png)

[http://rockfreaks.net/images/reviewPageMiddle.png](http://rockfreaks.net/images/reviewPageMiddle.png)

[http://rockfreaks.net/images/reviewPageBottom.png](http://rockfreaks.net/images/reviewPageBottom.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-21T15:26:29.373

Think you can try combining [layer list drawable](http://developer.android.com/guide/topics/resources/drawable-resource.html#LayerList) (it's possible to set insets for layers) with a tiled bitmap drawable that is placed as a middle layer and positioned with appropriate insets.

Something like this:

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
  <item android:drawable="@drawable/page_top" />
  <item 
     android:insetTop="@dimen/page_top_height"
     android:insetBottom="@dimen/page_bottom_height"
     >
    <bitmap
        android:src="@drawable/page_middle_tile"
        android:tileMode="repeat"
        />
  </item>
  <item android:drawable="@drawable/page_bottom" />
</layer-list> 
```

But it all depends on your layout indeed.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T15:26:47.663

Set the background as the middle image and tile it. (like in the example you show)

Create a header view that you insert at the top of each page.

Create a footer view that you insert at the bottom of each page.

And have your content in the middle.

I've made it a flat file here, but you can easily imagine refactoring it into `includes`, or whatever your application needs.

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#00FF00" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="100dip"
        android:layout_alignParentTop="true"
        android:background="#FF0000" />

    <!-- Your content -->

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="100dip"
        android:layout_alignParentBottom="true"
        android:background="#0000FF" />

</RelativeLayout> 
```

*   Red = Header
*   Green = Tiles (which would be inherited from your Theme)
*   Blue = Footer

![enter image description here](../Images/89ba8b1ba89a08af6432a3941d20bd24.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T15:26:36.020

Try something like this :

Top and bottom in two layouts with `android:gravity="TOP"` and `"BOTTOM"`. These two layouts are set up with `android:background="@drawable/xxx.png"`

For the center, either use your solution or maybe use a ScrollView.

# qt - 反转 QToolButton 的布局

> ID：10260252
> 
> 赞同：3
> 
> 时间：2012-04-21T15:19:47.390
> 
> 标签：qt

我想做一个`QToolButton`文本位于其图标左侧的位置。我试图找到相关信息，并尝试了以下方法：

```
button->setToolButtonStyle(Qt::ToolButtonTextBesideIcon); 
```

但这会将文本设置在按钮的右侧。我已经研究过尝试样式表，但文本对齐仅适用于按钮。有没有办法做到这一点？

我的最高目标是制作一个如下所示的界面栏：

![目标](../Images/2c9cb8e71dfec17b8887dbf383ef7d71.png)

旁边有一个文本标签和图像。目前，由于样式原因，我正在使用带有可检查工具按钮的工具栏（除非鼠标悬停，否则无边框，仍然具有可检查的缩进，包含文本和图标......）。我完全有可能使用了错误类型的小部件，所以如果我不能改变它的布局，有没有办法模仿这种风格？

这是我目前拥有的：

![当前的](../Images/3652e8dd401a5eb2aea6311d9874c724.png).

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T17:23:30.593

您可以使用`QWidget::setLayoutDirection`：

```
toolbar->setLayoutDirection(Qt::RightToLeft); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T16:31:30.027

您最好的选择可能是自己在 QWidget 中创建此功能。它应该有一个 QLabel 和一个 QToolButton（或 QPushButton）排列在一个 QHBoxLayout 中。然后，您可以使用`QToolBar::addWidget()`或将此自定义小部件添加到工具栏`QToolBar::insertWidget()`。

这是您可以使用的小部件示例：

```
#include <QtGui>

class CoolButton : public QWidget
{
public:
    CoolButton(QWidget *parent = 0) : QWidget(parent)
    {
        QLabel *label = new QLabel("Hi!", this);
        QToolButton *button = new QToolButton(this);
        QHBoxLayout *layout = new QHBoxLayout;
        layout->addWidget(label);
        layout->addWidget(button);
        setLayout(layout);
    }
}; 
```

# c# - Htmlagilitypack 中的 GetElementsByTagName

> ID：10260255
> 
> 赞同：17
> 
> 时间：2012-04-21T15:19:56.267
> 
> 标签：c#, webbrowser-control, html-agility-pack, getelementsbytagname

如果我不知道它的 id，如何为例如文本框选择一个元素？

如果我知道它的 id，那么我可以简单地写：

```
HtmlAgilityPack.HtmlNode node = doc.GetElementbyId(id); 
```

但是我不知道文本框的 ID，并且在 Webbrowser 控件中可用的 HtmlagilityPack 中找不到 GetElementsByTagName 方法。在 Web 浏览器控件中，我可以简单地编写：

```
HtmlElementCollection elements = browser[i].Document.GetElementsByTagName("form");
foreach (HtmlElement currentElement in elements)
{

} 
```

**编辑**

这是我正在谈论的 HTML 表单

```
<form id="searchform" method="get" action="/test.php">
<input name="sometext" type="text">
</form> 
```

请注意，我不知道表单的 ID。同一页面上可以有多个表单。我唯一知道的是“sometext”，我想只使用这个名称来获取这个元素。所以我想我将不得不一一解析所有表单，然后找到这个名称“sometext”，但我该怎么做呢？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-04-22T10:59:29.553

如果您正在通过其 tagName 查找标签（例如`form`for `<form name="someForm">`），那么您可以使用：

```
var forms = document.DocumentNode.Descendants("form"); 
```

如果您正在通过 name 属性查找标签（例如`someForm`for `<form name="someForm">`，那么您可以使用：

```
var forms = document.DocumentNode.Descendants().Where(node => node.Name == "formName"); 
```

对于最后一个，您可以创建一个简单的扩展方法：

```
public static class HtmlNodeExtensions
{
    public static IEnumerable<HtmlNode> GetElementsByName(this HtmlNode parent, string name)
    {
        return parent.Descendants().Where(node => node.Name == name);
    }

    public static IEnumerable<HtmlNode> GetElementsByTagName(this HtmlNode parent, string name)
    {
        return parent.Descendants(name);
    }
} 
```

注意：您也可以使用`SelectNodes`XPath 来查询您的文档：

```
var nodes = doc.DocumentNode.SelectNodes("//form//input"); 
```

会在页面上为您提供表单标签中的所有输入。

```
var nodes = doc.DocumentNode.SelectNodes("//form[1]//input"); 
```

会给你页面上第一个表单的所有输入

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-21T15:42:51.860

我想你正在寻找这样的东西

```
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml("....");

var inputs = doc.DocumentNode.Descendants("input")
    .Where(n => n.Attributes["name"]!=null && n.Attributes["name"].Value == "sometext")
    .ToArray(); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-04-10T07:19:43.570

任何节点的名称：

```
doc.DocumentNode.SelectNodes("//*[@name='name']") 
```

按名称输入节点：

```
doc.DocumentNode.SelectNodes("//input[@name='name']") 
```

# jquery - 将鼠标悬停在图像上时如何显示覆盖相邻图像的描述？

> ID：10260257
> 
> 赞同：1
> 
> 时间：2012-04-21T15:20:05.113
> 
> 标签：jquery, css, hover

希望有人可以帮助我或指出我正确的方向。

我想显示一个图像网格，用户可以将鼠标悬停在图像上以获取更多信息，就像在[这里](http://www.tiffany.co.uk/Shopping/CategoryBrowse.aspx?mcat=148204&cid=287464&search_params=s+5-p+1-c+287464-r+201323339-x+-n+12-ri+-ni+1-t+)所做的那样。

这是一件容易的事吗？我可以使用纯 CSS 还是需要使用 jQuery？如果可能的话，我只需要一个指向正确方向的指针吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T15:53:25.227

您提供的链接似乎首先给出了背景图像的悬停状态，然后通过 timeOut 它显示了一个工具提示。我正在做一个小提琴来说明这一点。

* * *

所以，给你。这是[小提琴](http://bramvanroy.be/infoToolTip/)！

最重要的是 jQuery，它包含延迟以及 CSS 中规定的图像的悬停状态。因此，当用户悬停图像时，他得到的第一件事就是另一张图像。这是通过简单的 CSS hover 和**CSS sprites**完成的。

```
.item {
    background-color: white;
    width: 100%;
    height: 100%;
    background-repeat: no-repeat;
    background-position: center top; 
}

.item:hover {
    background-repeat: no-repeat;
    background-position: center bottom; 
}

#flower {
    background-image: url('http://bramvanroy.be/files/images/tooltipOverlay.jpg');
} 
```

当图像悬停在开头时，会触发一个 jQuery 函数，但它会延迟：

```
var tooltip = $(".item-tooltip");

tooltip.hide();

$(".item-wrapper").hover(
function() {
    $(this).children(tooltip).delay(550).fadeIn("slow");
    $(this).children(".item").fadeOut("slow");
},
...
​ 
```

当鼠标离开工具提示时，它会被隐藏并`.item`再次显示：

```
...  
    function(){
        $(this).children(tooltip).fadeOut("fast");
        $(this).children(".item").fadeIn("fast");
    }
); 
```

*   更多关于 jQuery 的[.delay()](http://jsfiddle.net/BramVanroy/y5nYN/17/)
*   更多关于[CSS 精灵](http://jsfiddle.net/BramVanroy/y5nYN/18/)
*   [图片版权](http://archive.plugins.jquery.com/project/hoverIntent)

* * *

**改进的答案：**

这是一个[Showcase](http://bramvanroy.be/infoToolTip/)，这是该展示的[小提琴](http://jsfiddle.net/BramVanroy/y5nYN/17/)，这是图像[不变](http://jsfiddle.net/BramVanroy/y5nYN/18/)的小提琴（如您所愿）。

我使用了 jQuery 插件[hoverIntent](http://archive.plugins.jquery.com/project/hoverIntent)来确保不是每个悬停一毫秒的图像都显示工具提示。它所做的是检查用户是否**打算**将图像悬停，然后（在某个 timeOut 之后）才执行该功能。关于这个插件的更多信息在[这里](http://cherne.net/brian/resources/jquery.hoverIntent.html)。您可以使用 jQuery 的标准 hover()，但我不建议这样做。

z-index 也需要更改，否则图像会出现在工具提示下方，**或者**其他项目的图像会与我们想要的图像的工具提示重叠。

如果您还有任何问题，请在评论中说出来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T15:40:04.317

我要做的是使用jquery。创建一个可见的 div，然后创建一个隐藏的 div，在悬停时显示您想要的信息。然后只需使用 jquery 使用 css 隐藏/显示该 div。

```
$(".info-class").hover(function(){
    $(this).css('display', 'none');
    $(".other-clas").css('display', 'block');
}); 
```

类似于上面的东西

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T15:58:55.690

我查看了他们在那个网站上所做的事情，对我来说它看起来过度设计了。

我要做的是我们添加

```
<div class="comtainer">
    <div id="g11" class="square large" data-show-tooltip-in="#g12, #g12">
        <div class="normal-view"><img ... ></div>
        <div class="large-view"><img ... ></div>
        <div class="tooltip">blah blah</div>
    </div>
    <div id="g12" class="square small" data-show-tooltip-in="#g13">
       ...
    </div>
    ...
</div> 
```

css

```
div.large-view { display : none; }
div.tooltip    { display : none; } 
```

然后javascript会做类似的事情（JQuery for speed）：

```
$( '.square' ).on( 'mouseover', function*(e){
     //hides the normal image
     $( this ).find( '.normal-view' ).hide();
     //shows the zoomed image
     $( this ).find( '.large-view' ).show();
     //stores a reference to the square where the HTML tolltip will be shown
     var $tooltip = $( $( this ).attr( 'data-show-tooltip-in' ) );
     //hides the original content of the tooltip square
     $tooltip.find( 'div' ).hide();
     //clones the tooltip to the other square and shows it
     $( this ).find( '.tooltip' ).clone().qppendTo( $tooltip ).show();
}) 
```

这只是一个起点，但这就是我要做的事情。

**编辑**添加解释

在 HTML 中有一系列的 div 类 square （它们也可以是 ul 列表中的 li，但现在不重要了）。每个方块都有它需要的所有数据——普通图像、缩放图像和工具提示 HTML。最后两个隐藏在 CSS 中。每个方块还有一个 data- 属性 (data-show-tooltip-in) 以及将显示工具提示的选择器。

然后 JS 完成剩下的工作 - 评论应该会有所帮助。

# c++ - 包含 .cpp 文件而不是 .h 文件以使 vanilla gcc 能够更多地优化我的代码是一个好主意吗？

> ID：10260269
> 
> 赞同：3
> 
> 时间：2012-04-21T15:21:30.107
> 
> 标签：c++, gcc, coding-style

[出于运行时速度的原因](https://stackoverflow.com/questions/10259665/can-gcc-optimize-things-better-when-i-compile-everything-in-one-step)`#include "randombytes.cpp"`，而不是`randombytes.h`在我的项目中使用（`randombytes.cpp`我的项目源代码目录中的文件在哪里）是一个好主意吗？看起来像这样：`randombytes.cpp`

```
#ifndef RANDOMBYTES_INCLUDED
#define RANDOMBYTES_INCLUDED

/* include native headers here */

unsigned char *fetch_random_bytes(int amount);

/* include other parts of my project here if necessary */

unsigned char *fetch_random_bytes(int amount) {
  // do stuff
}

#endif 
```

这也应该适用于需要彼此的文件等等，对吧？您能想到任何情况下这不起作用或我不会获得优化收益吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-21T15:26:39.170

这种做法称为“Unity Build”（google it），除了琐碎的项目外，通常不是一个好主意，因为每次进行单个更改时都需要重新编译整个项目，这意味着每次都需要等待几分钟修复一个小错误。

至于运行时性能，速度上的差异与使用 Link Time Optimizations 进行编译并没有太大区别。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T15:27:16.563

是的，这通常是一种称为“统一构建”的技术，它有助于内联过程（如果编译器足够聪明）。但是，如果您有具有内部链接的重复函数（即：仅存在于 .cpp 中且未在 .h 中声明的函数），则存在缺点，因为这些可能会导致难以调试的编译错误，尽管可以避免具有谨慎和一致的命名约定

一些关于此的阅读：

[统一构建的好处/坏处？](https://stackoverflow.com/questions/847974/c-the-benefits-disadvantages-of-unity-builds)

[http://www.gmixer.com/archives/46](http://www.gmixer.com/archives/46)

# c# - 监听所有端口时停止 TCP 流

> ID：10260270
> 
> 赞同：0
> 
> 时间：2012-04-21T15:21:34.943
> 
> 标签：c#, .net, tcp, stream

我正在编写一个使用 REGEX 侦听特定数据包端口的应用程序。我可以看到原始的 TCP 流，但我想知道是否可以在没有任何数据包伪造库的情况下拦截和停止该流。

示例：用户在包含单词 P*RN 或“J*st** Bi*ber”的页面上导航，并且自动失去了此特定连接。

如果我做不到，也许我会即时替换一些 HTMLElements。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T18:55:28.570

您可以实施代理服务器，以便从您的用户到 Internet（和返回）的所有流量都将通过您的代理。您可以使用 .NET 网络 API（无数据包伪造）实现代理。当您想断开连接时，您可以关闭 TCP 流，或发回错误响应。

这个解决方案也有一些问题：

*   您必须为要过滤的每个协议（SMTP、IMAP、POP3）实现特定的代理
*   您需要强制您的用户在连接到 Internet 时使用您的代理服务器（这可以在网络级别进行配置）
*   它不适用于 SSL (HTTPS)，因为流量是加密的

**编辑** 我认为没有办法使用 .NET API 拦截 TCP 流。但是，您可以*转发*TCP 流（接受客户端连接，然后转发客户端和服务器之间的所有通信）。由于您接受了客户端 TCP 连接，因此您也可以终止它。

# android - Android 无法从 Assets 复制数据库

> ID：10260271
> 
> 赞同：2
> 
> 时间：2012-04-21T15:21:46.777
> 
> 标签：android, database, copy

我有个问题。我有 2 个安卓项目。一是“主要”项目。另一个是一个项目，我尝试根据互联网上的教程实现一个基本的测验应用程序。

测验应用程序工作正常，所以我想在“主要”项目中实现它。（在“主”项目中，我有 2 个包，一个用于测验的类）我创建了类、布局，将数据库复制到 assets 文件夹。一切都与第二个项目相同。但它不能复制数据库。我有找不到表的错误。

它使数据库，我用 ddms 检查它（拉数据库），但不能复制表。“主项目”中的代码与第二个项目相同（！）。（在第二个项目中一切都很好）

这是代码片段：

```
package com.thesis.Quiz;

import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.util.ArrayList;
import java.util.List;

import com.thesis.eliminations.R;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteException;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class DBHelperForQuiz extends SQLiteOpenHelper{

    //The Androids default system path of your application database.
    private static String DB_PATH = "/data/data/com.thesis.eliminations/databases/";
    private static String DB_NAME = "QuizDB";
    private SQLiteDatabase myDataBase; 
    private final Context myContext;

    /**
     * Constructor
     * Takes and keeps a reference of the passed context in order to access to the application assets and resources.
     * @param context
     */
    public DBHelperForQuiz(Context context) {
        super(context, DB_NAME, null, 1);
        this.myContext = context;
    }

    /**
     * Creates a empty database on the system and rewrites it with your own database.
     * */
    public void createDataBase() throws IOException{

        boolean dbExist = checkDataBase();
        //SQLiteDatabase db_Read = null;
        //SQLiteDatabase db = null;
        if(dbExist){
            //do nothing - database already exist
            //db = super.getReadableDatabase();
        }else{
            this.getReadableDatabase();
            //db_Read = this.getReadableDatabase();
            //db_Read.close();
            try {
                copyDataBase();
            //  db = super.getReadableDatabase();
            } catch (IOException e) {
                //throw new Error("Error copying database");
                e.printStackTrace();
            }
        }
    }

    /**
     * Check if the database already exist to avoid re-copying the file each time you open the application.
     * @return true if it exists, false if it doesn't
     */
    private boolean checkDataBase(){
        SQLiteDatabase checkDB = null;
        try{
            String myPath = DB_PATH + DB_NAME;
            checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);
        }catch(SQLiteException e){
            //database does't exist yet.
        }
        if(checkDB != null){
            checkDB.close();
        }
        return checkDB != null ? true : false;
    }

    /**
     * Copies your database from your local assets-folder to the just created empty database in the
     * system folder, from where it can be accessed and handled.
     * This is done by transfering bytestream.
     * */
    private void copyDataBase() throws IOException{
        //Open your local db as the input stream
        //InputStream myInput = myContext.getAssets().open(DB_NAME);
        InputStream myInput = myContext.getResources().getAssets().open(DB_NAME);

        // Path to the just created empty db
        String outFileName = DB_PATH + DB_NAME;

        //Open the empty db as the output stream
        OutputStream myOutput = new FileOutputStream(outFileName);

        //transfer bytes from the inputfile to the outputfile
        byte[] buffer = new byte[1024];
        int length;
        while ((length = myInput.read(buffer))>0){
            myOutput.write(buffer, 0, length);
        }

        //Close the streams
        myOutput.flush();
        myOutput.close();
        myInput.close();
    }

    public void openDataBase() throws SQLException{
        //Open the database
        String myPath = DB_PATH + DB_NAME;
        myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);
    }

    @Override
    public synchronized void close() {
        if(myDataBase != null)
            myDataBase.close();
        super.close();
    }

    public List<Question> getQuestionsList(int difficulty, int numberOfQuestions) {
        Log.d("NOQ",Integer.toString(numberOfQuestions));
        List<Question> questionsList = new ArrayList<Question>();
        Cursor c = myDataBase
                .rawQuery("SELECT * FROM QUESTIONS WHERE DIFFICULTY="
                        + difficulty + " ORDER BY RANDOM() LIMIT "
                        + numberOfQuestions, null);

        while (c.moveToNext()) {
            Question q = new Question();
            q.setQuestionText(c.getString(1));
            q.setRightAnswer(c.getString(2));
            q.setAnswerOption1(c.getString(3));
            q.setAnswerOption2(c.getString(4));
            q.setAnswerOption3(c.getString(5));
            q.setQuestionDiffLevel(difficulty);
            questionsList.add(q);
        }
        return questionsList;
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub
    }
} 
```

和：

```
public class QuizActivityMain extends Activity implements OnClickListener {

    Button bStart, bQuit, bSetDiff;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.quizmenu);
        initialize();
    }

    private void initialize() {
        bStart = (Button) findViewById(R.id.bStartQuiz);
        bQuit = (Button) findViewById(R.id.bExitQuiz);
        bSetDiff = (Button) findViewById(R.id.bSetDiff);
        bSetDiff.setOnClickListener(this);
        bQuit.setOnClickListener(this);
        bStart.setOnClickListener(this);
        Log.d("init", "initialize..");
    }

    @Override
    public void onClick(View v) {
        Intent i;
        switch (v.getId()) {
            case R.id.bStartQuiz:
                List<Question> questionsList = getQuestionsFromDB();
                QuizGame currentQuizGame = new QuizGame();
                currentQuizGame.setNumberOfRounds(this.getNumOfQuestions());
                currentQuizGame.setQuestions(questionsList);
                Log.d("ql set", "ql set");
    /*  ((QuizApplication) getApplication())
                .setCurrentQuizGame(currentQuizGame);*/

                ((QuizApplication)getApplication()).setCurrentQuizGame(currentQuizGame); 
                Log.d("cqg set", "cqg set");
                i = new Intent(this, AskedQuestion.class);
                Log.d("i started", "intent");
                startActivity(i);
                Log.d("i started", "intent started");
                break;

            case R.id.bExitQuiz:
                finish();
                break;

            case R.id.bSetDiff:
                i = new Intent(this, QuizSettings.class);
                startActivity(i);
                break;
        }
    }

    private List<Question> getQuestionsFromDB() throws Error{
        int tmpDifficulty = getDifficulty();
        int tmpNumberOfQuestions = getNumOfQuestions();
        DBHelperForQuiz myDbHelper = new DBHelperForQuiz(this.getApplicationContext());
        myDbHelper = new DBHelperForQuiz(this);

        try {
            myDbHelper.createDataBase();
        } catch (IOException e) {
            throw new Error("Unable to create database");
        }
        try {
            myDbHelper.openDataBase();
            Log.d("openeddb", "open db success");
        } catch (SQLException sqle) {
            throw sqle;
        }

        Log.d("ql try", "ql making");
        List<Question> qL = myDbHelper.getQuestionsList(tmpDifficulty, tmpNumberOfQuestions);

        Log.d("TMPNOQ",Integer.toString(tmpNumberOfQuestions));
        Log.d("ql rdy", "ql done");
        myDbHelper.close();
        Log.d("db cls", "closed");
        return qL;
    }

    private int getNumOfQuestions() {
        return 5;
    }

    private int getDifficulty() {
        return 2;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-20T23:21:48.997

在 createDataBase() 中有以下检查；

```
this.getReadableDatabase(); 
```

这将检查是否已经存在具有所提供名称的数据库，如果没有，则创建一个空数据库，以便可以用 assets 文件夹中的数据库覆盖它。在较新的设备上，这可以完美地工作，但在某些设备上这不起作用。主要是旧设备。我不知道确切原因，但似乎 getReadableDatabase() 函数不仅获取数据库而且还打开它。如果您然后从资产文件夹中复制数据库，它仍然具有指向空数据库的指针，您将得到表不存在错误。

因此，为了使其适用于所有设备，您应该将其修改为以下几行：

```
SQLiteDatabase db = this.getReadableDatabase();
if (db.isOpen()){
    db.close();
} 
```

即使在检查中打开了数据库，之后又关闭了，也不会给你带来任何麻烦。

# .net - 如何在 CLR 上学习 IL

> ID：10260272
> 
> 赞同：23
> 
> 时间：2012-04-21T15:22:25.160
> 
> 标签：.net, clr, il

由于这些 IL 编码了我所看到的更多内容，因此我喜欢学习如何正确解释它们。

我找不到像 C# Compiler 之类的文档或任何其他文档，所以我认为在学习了这些常见文档后，我几乎可以处理其余部分：

下面是一些示例 IL 代码，其中包含我需要知道的内容：

**样品 1：**

```
.method private hidebysig static void  Main(string[] args) cil managed
{
  .entrypoint
  // Code size       15 (0xf)
  .maxstack  1
  .locals init ([0] class EnumReflection.DerivedClass derivedClass)
  IL_0000:  nop
  IL_0001:  newobj     instance void EnumReflection.DerivedClass::.ctor()
  IL_0006:  stloc.0
  IL_0007:  ldloc.0
  IL_0008:  callvirt   instance void EnumReflection.DerivedClass::WriteOutput()
  IL_000d:  nop
  IL_000e:  ret
} // end of method Program::Main 
```

**样本 2：**

```
.method public hidebysig specialname rtspecialname 
        instance void  .ctor() cil managed
{
  // Code size       38 (0x26)
  .maxstack  8
  IL_0000:  ldarg.0
  IL_0001:  ldstr      "Hello"
  IL_0006:  stfld      string EnumReflection.DerivedClass::hello
  IL_000b:  ldarg.0
  IL_000c:  ldstr      "World"
  IL_0011:  stfld      string EnumReflection.DerivedClass::world
  IL_0016:  ldarg.0
  IL_0017:  ldc.i4.s   123
  IL_0019:  stfld      int32 EnumReflection.DerivedClass::age
  IL_001e:  ldarg.0
  IL_001f:  call       instance void EnumReflection.BaseClass::.ctor()
  IL_0024:  nop
  IL_0025:  ret
} // end of method DerivedClass::.ctor 
```

自从我制作了这些代码以来，我就知道它们的作用:-) 但是我想了解有关相应 IL 代码的更多信息。

这些示例包含 IL 代码之类的，**您能解释一下带问号的命令吗？还有这些命令代表什么？所以我们可以很容易地记住它们。**

*   nop（用于调试 - 无操作）
*   newobj（似乎它正在堆中创建新对象）
*   stloc.0 ?
*   ldloc.0 ?
*   重？
*   ldarg.0 ?
*   ldstr ?
*   stfld？
*   ldc.i4.s ?
*   .ctor - 构造函数

理解 IL 很重要，因为它揭示了特定编译器如何生成代码并在特定情况下采取行动。

但是，我找不到包含有关 IL 示例的好文档。CLR with C# 3.0 是一本好书，但最终它不是一本 IL 书，因此它没有解释有关 IL 的所有内容。

**编辑：**

**我找到了规格，他们告诉了这些：**感谢@usr。

*   nop（用于调试 - 无操作）
*   newobj - 创建一个新对象
*   stloc.0 - 从堆栈弹出值到局部变量
*   ldloc.0 ? - 将局部变量加载到堆栈上
*   ret - 从方法返回
*   ldarg.0 - 将参数 0 加载到堆栈上。
*   ldstr - 加载文字字符串
*   stfld - 存储到对象的字段中
*   ldc.i4.s - 将 num 作为 int32 短格式推入堆栈。
*   .ctor - 构造函数

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-21T15:37:07.153

有几本书确实涵盖了 IL：

*   [Microsoft .NET IL 汇编器内部](https://rads.stackoverflow.com/amzn/click/com/0735615470)
*   [专家级 .NET 2.0 IL 汇编器](https://rads.stackoverflow.com/amzn/click/com/1590596463)
*   [为 .NET 公共语言运行时 (CLR) 编译](https://rads.stackoverflow.com/amzn/click/com/0130622966)
*   *随意编辑此答案并添加一些书籍。*

还有一些[关于逆向工程的书籍](http://www.amazon.ca/Reversing-Secrets-Engineering-Eldad-Eilam/dp/0764574817/ref=sr_1_13?s=books&ie=UTF8&qid=1335022405&sr=1-13)也有关于 IL 的部分。

也可以看看：

*   [IL / CLR / DLR 参考？](https://stackoverflow.com/questions/1833700/il-clr-dlr-references)
*   [对于一本关于 .NET CLR 和 CIL 的好书，您有什么建议？](https://stackoverflow.com/questions/1662926/what-is-your-recommendation-for-a-good-book-on-the-net-clr-and-cil)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-21T15:27:21.063

[Microsoft 标准化了 CLR 并发布了这些标准](http://msdn.microsoft.com/en-us/netframework/aa569283)。Part III 包含丰富的 IL/CIL 信息，适合学习。这是一份出色的文件。

您还可以通过示例学习 IL。在 C# 中编译一些简单的方法并查看反射器中的 IL（它具有 IL 模式）。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-04-21T15:41:41.563

*   nop - no-op
*   newobj - create an object and call its constructor.
*   stloc.0 - Pop a value from the stack, and store it in the first local variable
*   ldloc.0 - Push the first local variable onto the stack
*   ret - return
*   ldarg.0 - Push the first argument (`this` in instance methods) onto the stack
*   ldstr - Push a string onto the stack
*   stfld - set the field, using data on the stack.
*   ldc.i4.s - Push the specified number as an int.
*   .ctor - constructor

I recommend that you find a good source of documentation on these opcodes (Wikipedia may be the best, though :( ). The documentation for System.Reflection.Emit has fairly detailed documentation for opcodes.

And above all, build small programs and examine the IL output. That is the best way to learn.

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-04-21T15:33:27.527

如果您想要每个操作码的简要概要，您可能会比检查`System.Reflection.Emit`命名空间做得更糟。

例如，有一个[`OpCodes`](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.aspx)类对每个操作码都有一个静态字段。然后根据其堆栈行为进一步详细描述其中的每一个。例如[`Ldarg_0`](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.ldarg_0.aspx)：

> ldarg.0指令将索引为 0 的参数推入计算堆栈**。**ldarg.0指令可用于通过从传入参数复制值类型或原始值将其加载到堆栈中**。**

# java - 如何拆分 Java 字符串但保留其部分内容？

> ID：10260277
> 
> 赞同：1
> 
> 时间：2012-04-21T15:23:49.600
> 
> 标签：java

我正在研究java字符串拆分。我希望根据“.大写”拆分字符串（“ `.`”和“大写”之间有一个空格），例如：

```
". A" ". B" ". C"... 
```

另外，我希望保留“。” 和“大写”，有什么有效的方法可以做到这一点？我用

```
String.split("\\.\\s") 
```

之前，但它会删除“。” 我用。所以这不是一个理想的解决方案。谢谢

样本结果

```
String = This is an Egg. This is a dog. "I just come up with this example"
String[0] = This is an Egg.
String[1] = This is a dog. "I just come up with this example" 
```

更多编辑：

有一个问题，通常的方法似乎会将分隔符保留在其中一个字符串中。但我希望在某种意义上拆分分隔符。（在我的示例中，“。[AZ]”也被拆分）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T15:31:09.690

您可以使用[环视](http://www.regular-expressions.info/lookaround.html)：

```
str.split("(?<=\\.\\s+)(?=\p{Lu})") 
```

这将拆分`"First sentence. Foo bar. test"`为数组

```
{ "First sentence. ", 
  "Foo bar. test" } 
```

如果您不希望包含该空间，只需将其放在环视断言之间：

```
str.split("(?<=\\.)\\s+(?=\p{Lu}") 
```

这将导致

```
{ "First sentence.", 
  "Foo bar. test" } 
```

对于上面的示例字符串。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-21T15:28:45.720

干得好：

利用`str.replaceAll(". ",".##");`

`str.replaceAll(".",".##");`

然后使用`String.split("##")`

这将为您提供所需的字符串。

[检查此链接](http://www.roseindia.net/java/string-examples/string-replaceall.shtml)

# html - HTML 输入类型？

> ID：10260283
> 
> 赞同：3
> 
> 时间：2012-04-21T15:24:31.957
> 
> 标签：html

HTML中是否有任何特殊的输入类型，旨在仅显示基于其他输入的值？当没有人被允许写入时。还是禁用文本框是最佳选择？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T15:25:14.083

```
<input type="text" readonly /> 
```

该`readonly`属性可以发挥您的魔力。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T15:32:04.643

现在很容易删除浏览器上的只读属性。我建议您使用 label 或 span 并为该 label 元素编写几行 css 代码，使其看起来像输入框。

```
<label>test value</label>

<style>
label {
    padding:3px;
    border:1px solid black;
    width:200px;
}
</style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T15:26:11.370

使用 readonly 属性，或使用 javascript 更新 div 的内容

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T16:54:34.807

在 HTML5 草稿中，该`output`元素的存在就是为了这样的目的。不过，我认为使用它没有多大意义，因为可以通过其他方式实现相同的目标。

为了只显示数据，请使用任何普通的 HTML 元素，例如`p`or`div`或`span`。

如果数据需要沿着表单数据传输，则将其放入隐藏元素中，`<input type=hidden>`.

如果需要，您当然可以将两者结合起来：分别显示数据并将其包含到表单数据集中。

# visual-studio-2010 - VC++ fatal error LNK1104 w/ d3d9x.lib

> ID：10260285
> 
> 赞同：0
> 
> 时间：2012-04-21T15:25:05.817
> 
> 标签：visual-studio-2010, visual-c++, directx

So I'm trying to compile a DX9 program that include the headers d3d9.h and d3dx9.h. However it keeps getting a fatal error trying to find d3dx9.lib. What's interesting is that when I try to input d3dx9.h it shows up as in "Microsoft SDKs\Windows..." and in "Microsoft DirectX SDK...". I have set up the include and library directories under VC++ Directories for the project. I get no errors in the code, but only when compiling. DirectX (June 2010) did install correctly, so I'm not sure what could be causing this, any help?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T16:40:41.440

没有 d3d9x.lib，你可能换了字母。它是 d3dx9.lib。检查名称的链接器设置，可能是代码中的#pragma 注释。

如果您确定自己做对了，请使用链接器、输入、忽略特定库设置。

# embedded - 如何为针对特定硬件的 Windows CE 操作系统制作模拟器

> ID：10260286
> 
> 赞同：1
> 
> 时间：2012-04-21T15:25:07.313
> 
> 标签：embedded, windows-ce, emulation

我认为这是所有**在特定硬件上使用 Windows CE 6.0 操作系统**的开发人员的常见问题。我有一个客户需要为其 ICOP PDX-089T 带有触摸面板的 PC 定制操作系统，该操作系统基于 DM&P SoC CPU Vortex86DX-1GHz。

我没有硬件，所以每次进行更改时，我都必须至少将 NK.bin 文件或整个 ghost 映像发送给客户端以进行测试。

有什么方法可以构建自定义 Windows CE 仿真器以将其添加到 Visual Studio 2005 进行测试，或者可能是自定义虚拟机以通过 VMWare 或 Virtual PC 启动它？

我尝试了一些来自互联网的指南来构建一个，但每一次努力都导致我的电脑挂了。

有没有人有类似的需求和解决方案？

*注意：*我需要的仿真器是用于 Vortex86DX 处理器和 ICOP 板的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T18:14:43.767

Microsoft 前段时间放弃了 x86 仿真器，选择仅支持 ARM 仿真器（BSP 与 Platform Builder 6.0 一起提供）。这意味着您无法为 x86 处理器创建仿真器，尽管我很难想到您真正需要的场景，而仅仅获得硬件并不是一个更好的解决方案。

有一个 BSP 用于构建可以在 x86 上运行的[Virtual PC OS 。](http://archive.msdn.microsoft.com/CE6VirtualPCBSP)它在一段时间内没有太多活动，我从未尝试过，所以 YMMV。

# python - python regex: how to split string into distinct groups based on alphabets, digits and punctuation

> ID：10260289
> 
> 赞同：1
> 
> 时间：2012-04-21T15:25:19.323
> 
> 标签：python, regex

I am learning regular expressions using python 2.7

Given a sentence(assume lowercase and ascii) such as:

```
input = 'i like: a, b, 007 and c!!' 
```

How would I tokenize the input string into

```
['i', 'like', ':', 'a', ',', 'b', ',', '007', 'and', 'c', '!!'] 
```

I can write the automata and code the transition matrix in C++, but I would like to do this in python

I am unable to come up with a regex that will match these distinct classes of alphabets, digits and punctuations in one go.

I have seen a couple of stackoverflow posts [here](https://stackoverflow.com/questions/5214177/regex-tokenizer-to-split-a-text-into-words-digits-and-punctuation-marks) and [here](https://stackoverflow.com/questions/6987356/regex-tokenizer-split-text-into-words-digits-punctuation-and-spacing-do-not), but do not quite follow their approaches.

I have tried this for some time now and I would appreciate your help on this.

P.S: This is not a homework question

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T15:33:32.800

```
>>> from string import punctuation
>>> text = 'i like: a, b, 007 and c!!'
>>> re.findall('\w+|[{0}]+'.format(punctuation),text)
['i', 'like', ':', 'a', ',', 'b', ',', '007', 'and', 'c', '!!'] 
```

这也有效，但如果找不到字母数字字符，则会找到任何非空白字符

```
>>> re.findall('\w+|\S+',text)
['i', 'like', ':', 'a', ',', 'b', ',', '007', 'and', 'c', '!!'] 
```

# iphone - Installing Core-Plot in Xcode 4.2 for iOS project

> ID：10260291
> 
> 赞同：10
> 
> 时间：2012-04-21T15:25:34.380
> 
> 标签：iphone, objective-c, ios, xcode4.2, core-plot

I am trying to install Core Plot into my iOS app. I have followed the instructions on the Core Plot website but they are very brief and have no screenshots. I have pasted the instructions below and explained where I am stuck...

> First, drag the CorePlot-CocoaTouch.xcodeproj file into your iPhone application's Xcode project. Show the project navigator in the left-hand list and click on your project.
> 
> Select your application target from under the "Targets" source list that appears. Click on the "Build Phases" tab and expand the "Target Dependencies" group. Click on the plus button, select the CorePlot-CocoaTouch library, and click Add. This should ensure that the Core Plot library will be built with your application.

Done!

> Core Plot is built as a static library for iPhone, so you'll need to drag the libCorePlot-CocoaTouch.a static library from under the CorePlot-CocoaTouch.xcodeproj group to the "Link Binaries With Libraries" group within the application target's "Build Phases" group you were just in.

Done!

> You'll also need to point to the right header location. Under your Build settings, set the Header Search Paths to the relative path from your application to the framework/ subdirectory within the Core Plot source tree. Make sure to make this header search path recursive. You need to add -ObjC to Other Linker Flags as well (as of Xcode 4.2, -all_load does not seem to be needed, but it may be required for older Xcode versions).

I dont understand this bit!

> Core Plot is based on Core Animation, so if you haven't already, add the QuartzCore framework to your application project.

Done!

> Finally, you should be able to import all of the Core Plot classes and data types by inserting the following line in the appropriate source files within your project:
> 
> ```
> #import "CorePlot-CocoaTouch.h" 
> ```

Done!

Is anyone able to put the instruction I am struggling with into more laymans terms?

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-21T17:01:18.723

鉴于我是如何编写这些说明的，我可以尝试澄清您遇到问题的部分。

您需要设置标头搜索路径，以便在您包含时`CorePlot-CocoaTouch.h`，Xcode 知道从哪里提取它。它位于应用程序项目的 Build Settings 中的 Header Search Paths 构建设置下。它如下所示：

![标头搜索路径](../Images/a6c368123d9895027b9affa15999dffe.png)

双击标题搜索路径的字段并弹出此弹出窗口：

![标题搜索路径弹出窗口](../Images/d6c27f6967a1b2b6876d419ff07ff00b.png)

您在此处指定的路径是从 Xcode 项目文件到安装 Core Plot 的目录的相对路径。在我的例子中，我的应用程序项目目录和 Core Plot 都位于同一个 ~/Development 目录中，因此相对路径涉及到后退一个级别 (the `../`) 并转到`core-plot`我将框架克隆到的目录。然后，您需要指向`framework`存储实际框架源的子目录。

最后，选中路径左侧的小框使标题搜索递归，因此它将查找包含在此子目录中的标题。

就链接器标志而言，在这些相同的构建设置中找到您的其他链接器标志并添加`-ObjC`到链接器标志列表中：

![ObjC 链接器标志](../Images/a7ed31b4fd014371e382116997b833bb.png)

这是必需的，以便我们在静态库中使用的类别中的符号正确地拉入您的项目。正如我所指出的，我们过去也需要添加`-all_load`它来解决链接器错误，但 Xcode 4.2 中的 LLVM 修复了这个问题。这很好，因为`-all_load`有时会引入重复的符号并破坏针对某些第三方框架的构建。

希望这应该清除说明的特定部分。我尽我最大的努力使这些易于理解并与最新的 Xcode 版本保持同步，但也许我不够详细。如果您顺利完成了所有其余步骤，那么您应该一切顺利。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T16:35:15.280

最简单的方法是包含 core-plot .h 文件和库二进制文件（.a 文件）。

您只需将它们全部拖到项目中即可。

干杯。

# php - PHP null and copy-on-write

> ID：10260296
> 
> 赞同：2
> 
> 时间：2012-04-21T15:26:24.847
> 
> 标签：php, null, micro-optimization, reference-counting, copy-on-write

Suppose I want to have two variables and have them both equal to `null`. (More realistically, I am thinking about an array that contains a large amount of `null`s, but the "two variables" scenario is sufficient for the question.) Obviously, I can do this in more than one way. I can do this (method 1):

```
$a = null;
$b = $a; 
```

By my understanding, the result of this is that there is one zval that is pointed to by two entries in the symbol table: `'a'` and `'b'`. But alternatively one might do this (method 2):

```
$a = null;
$b = null; 
```

Naively one would expect that this should result in two different zvals, each pointed to by one entry in the symbol table.

Does it follow from this that if you want to have a large array, and many elements of the array will be `null`, it's more efficient (in terms of zval/memory use) to create a `$master_null` variable with the value `null`, and then write the `null` elements of the array by assigning using `$master_null`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T16:08:17.760

考虑这个脚本：

```
$arr = array();
for ($i = 0; $i < 100000; $i++) $arr[] = null;
echo memory_get_usage() . "\n"; 
```

在我的机器上输出：21687696，即 21 MB 的已用内存。另一方面使用这个：

```
$master_null = null;
$arr = array();
for ($i = 0; $i < 100000; $i++) $arr[] = $master_null;
echo memory_get_usage() . "\n"; 
```

输出：13686832，即 13 MB。根据此信息，您可以假设就内存使用情况而言，实际上最好使用“master null”变量。但是，您仍然需要拥有数组中的所有项目，并且 HashTable（数组的内部表示）中的每个条目也需要一些内存。

如果您想更深入地了解 zval 和引用，我建议使用函数`debug_zval_dump`. 使用它，您可以看到，哪些变量共享相同的 zval：

```
$a = $b = $c = $d = "abc";
debug_zval_dump($a);
$x = $y = $z = $w = null; 
debug_zval_dump($x);
$q = null;
debug_zval_dump($q); 
```

输出：

```
string(3) "abc" refcount(5)
NULL refcount(5)
NULL refcount(2) 
```

这意味着虽然变量 $x 和 $q 都是 NULL，但它们不是同一个 zval。但是 $x 和 $y 共享相同的 zval，因为它们是相互分配的。我相信你知道 function `debug_zval_dump`，但如果不知道，请务必仔细阅读[http://php.net/manual/en/function.debug-zval-dump.php](http://php.net/manual/en/function.debug-zval-dump.php)上的 refcount 说明。

同样在我的帖子的最后，我想说这些信息可能对更好地了解 PHP 内部结构很有用，我认为做任何优化都是无用的。主要是因为有比这种微优化更好的地方开始优化脚本。此外，虽然这不是规范的一部分，但 PHP 作者可能会在未来改变这种行为（例如，所有 NULL 变量可以在未来的某个版本中共享相同的 zval）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T16:07:46.980

据我了解，PHP zval 容器具有引用计数逻辑。因此，我的印象是，如果您使用引用即 &$master_null 来初始化所有 NULL 值，我认为这可以节省空间，即数组的所有 NULL 项都指向对 zval 容器的相同引用。

这是一个例子：

```
# php -r '$var1 = NULL; $var2 = $var1; $var3 = $var1; debug_zval_dump(&$var1); debug_zval_dump(&$var2); debug_zval_dump(&$var3);'
&NULL refcount(2)
&NULL refcount(2)
&NULL refcount(2) 
```

您可以在此处阅读有关PHP[引用计数基础的更多信息：](http://php.net/manual/en/features.gc.refcounting-basics.php)

此链接中值得一读的内容是：

```
PHP is smart enough not to copy the actual variable container
when it is not necessary. Variable containers get destroyed 
when the "refcount" reaches zero. The "refcount" gets decreased by 
one when any symbol linked to the variable container leaves the 
scope (e.g. when the function ends) or when unset() is called on a symbol. 
```

因此，每次使用 &$master_null 时，它的“refcount”都会增加，当“refcount”达到零时，变量容器会从内存中删除。

* * *

从上面的评论示例中，这里是内存使用情况：

```
# php -r '$arr = array(); for ($i = 0; $i < 100000; $i++) $arr[] = null; echo memory_get_usage() . "\n";'
11248372
# php -r '$master_null = null; $arr = array(); for ($i = 0; $i < 100000; $i++) $arr[] = &$master_null; echo memory_get_usage() . "\n";'
6848488
# php -r '$master_null = null; $arr = array(); for ($i = 0; $i < 100000; $i++) $arr[] = $master_null; echo memory_get_usage() . "\n";'
6848468 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T15:33:42.660

没有所有可以实现的是你会有一个额外的变量，称为`$master_null`. 它们都指向一个空值。让他们每个人都指向`$master_null`是同一件事。

# ios - iCloud & NSFileWrapper: Showing as 2 different files in Settings

> ID：10260299
> 
> 赞同：9
> 
> 时间：2012-04-21T15:26:33.160
> 
> 标签：ios, icloud, nsfilewrapper

I have an app that uses a UIDocument that is NSFileWrapper based. My file wrapper is a directory named "XXX.cp", with two sub-files "photo.data" and "photo.metadata". It seems to save and load documents fine, however when I go to Settings\Manage Storage\Unknown the sub-files are listed separately:

![Settings](../Images/88e48f9bd953e9fb4a0e98856a55f2b6.png)

I was expecting it to show "XXX.cp" instead of these two sub-files. I think I have the document UTI set up and exported properly:

![UTI](../Images/ffb62af85e66c037d5283d699b128f8b.png) ![UTI Export](../Images/f912d0d945e3ad8441fed5b5d252b245.png)

And I think I am creating the file wrappers correctly (especially since it reads/writes fine):

```
- (void)encodeObject:(id<NSCoding>)object toWrappers:(NSMutableDictionary *)wrappers preferredFilename:(NSString *)preferredFilename {    
    @autoreleasepool {                
        NSMutableData * data = [NSMutableData data];    
        NSKeyedArchiver * archiver = [[NSKeyedArchiver alloc] initForWritingWithMutableData:data];    
        [archiver encodeObject:object forKey:@"data"];    
        [archiver finishEncoding];   
        NSFileWrapper * wrapper = [[NSFileWrapper alloc] initRegularFileWithContents:data];    
        [wrappers setObject:wrapper forKey:preferredFilename];    
    }    
}        

- (id)contentsForType:(NSString *)typeName error:(NSError *__autoreleasing *)outError {        
    if (self.captionedPhotoMetadata == nil || self.captionedPhoto == nil) {    
        *outError = [[NSError alloc] initWithDomain:CaptionedPhotoErrorDomain code:CaptionedPhotoInvalidDocument userInfo:[NSDictionary dictionaryWithObjectsAndKeys:NSLocalizedString(@"Invalid document!", @""), NSLocalizedDescriptionKey, nil]];    
        return nil;        
    }    
    NSMutableDictionary * wrappers = [NSMutableDictionary dictionary];    
    [self encodeObject:self.captionedPhotoMetadata toWrappers:wrappers preferredFilename:METADATA_FILENAME];    
    [self encodeObject:self.captionedPhoto toWrappers:wrappers preferredFilename:DATA_FILENAME];       
    NSFileWrapper * fileWrapper = [[NSFileWrapper alloc] initDirectoryWithFileWrappers:wrappers];    
    return fileWrapper;        
} 
```

But still no cigar. Anyone know what the problem is? Thanks!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T13:25:39.500

想通了。问题是您需要有 3 个字母的文件扩展名。我的只有 2 个字母：“.cp”。我将它切换到“.cap”并且它起作用了：P

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T01:08:15.767

我没有将我的 UTI 更改为三个字符。它仍然是 11 个字符。起初，我看到了 Ray 报告的相同问题。我查看了更多文档，并在“声明您的应用程序支持的文档类型”段落下的“iOS 应用程序编程指南”-“应用程序相关资源”中找到“对于每种文档类型，您必须至少提供以下信息：

*   一个名字
*   一个图标
*   文件类型

我提供了名称和文件类型，但没有提供图标。因此，我在 22 秒内创建了最棒的小文档图标，将其添加到我的项目中，将其添加到目标的文档类型中，然后在我的 iPad、设置、iCloud、管理存储、MyApp 上，我只看到文件包装器名称，NSMetadataItemDisplayNameKey 样式！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T22:38:31.760

我有同样的问题，但我的扩展有三个字符，我也有一个图标。但是，在阅读[此评论](https://stackoverflow.com/a/10962823/388412 "这个")后，我尝试删除**CFBundleDocumentTypes**部分中的**LSItemContentTypes**（“文档类型”下的第二张图像中的“类型：com.razeware.captionedPhoto”）并且它起作用了。

 **我还注意到 WWDC 演示“UIDocument 和 iCloud”也没有设置 LSItemContentType。对我来说似乎是一个巨大的错误，因为[文档](http://developer.apple.com/library/ios/#documentation/DataManagement/Conceptual/DocumentBasedAppPGiOS/DocumentImplPreflight/DocumentImplPreflight.html#//apple_ref/doc/uid/TP40011149-CH3-SW3)明确指出应该有一个文档类型。**

# git - git如何禁用推送

> ID：10260311
> 
> 赞同：178
> 
> 时间：2012-04-21T15:27:26.890
> 
> 标签：git, push

我正在使用 git，我正在做我的开发工作，我不想推动，即使是错误的。有没有办法在某些本地存储库中禁用推送。一种方法是重命名分支，另一种是如果误操作[撤消推送，但我希望应该有更直接的方法。](https://stackoverflow.com/questions/1270514/undoing-a-git-push)

* * *

## 回答 #1

> 赞同：356
> 
> 时间：2012-04-21T15:35:21.910

以下命令将允许拉取工作，但推送将尝试使用 URL`no_push`并失败：

```
git remote set-url --push origin no_push 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-21T15:30:40.093

根据远程，您可能能够重置其 URL 以使用只读 Git 协议而不是 SSH 或 HTTPS。例如，对于 GitHub 上的项目，执行

```
git remote set-url <remote> git://github.com/Team/Project.git 
```

`<remote>`通常在哪里`origin`。`git remote -v`会给你一个遥控器列表；那些以表单开头`https`或具有表单的`<user>@<host>:<path>`通常允许推送。

# php - 从 .jpeg/png 创建动画 .gif

> ID：10260314
> 
> 赞同：6
> 
> 时间：2012-04-21T15:27:43.710
> 
> 标签：php, gd

是否可以使用 GD 库创建动画 gif？我希望用户上传 png/jpeg 并从图像中生成 2 帧动画 gif。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T09:37:03.800

这个问题很老，但这里有一个用 PHP 创建动画 GIF 的新库：[https ://github.com/Sybio/GifCreator](https://github.com/Sybio/GifCreator)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T15:40:06.980

There is a good post about it on SO : [Create Animated Gif with Jpeg Images](https://stackoverflow.com/questions/2191367/php-create-simple-animated-gif-from-two-jpeg-images)

You can't do it with GD Functions, but there is a class on phpclasses.org to do this, check that : [PHP Classes GIF Animation From](http://www.phpclasses.org/package/3163-PHP-Generate-GIF-animations-from-a-set-of-GIF-images.html)

You can also find a good tutorial about it here : [Tutorial Generate Animated GIF PHP](http://www.jeroenvanwissen.nl/weblog/php/howto-generate-animated-gif-with-php)

# winforms - 将简单数据从 wp7 发送到 winforms 应用程序

> ID：10260317
> 
> 赞同：0
> 
> 时间：2012-04-21T15:28:00.433
> 
> 标签：winforms, windows-phone-7

我想将简单数据（准确地说是地理位置数据）从 Windows Phone 7 应用程序发送到 Windows 窗体应用程序并使用它，因为我是这个领域的初学者，我不知道要使用哪些工具。我搜索了 wcf 服务并测试了此方法，但存在一些问题：数据是从电话应用程序发送的，但没有发送到 winforms 应用程序（猜想是缺少了什么）

如果您知道如何快速做到这一点，或者有很好的教程，我将不胜感激。

**编辑**

我找到了本教程，它展示了如何在不使用套接字和 wcf 服务的情况下直接连接 wp7 应用程序和桌面应用程序，我想知道如果应用程序不在 localhost 中它是否真的有效。教程之类的：[wp7教程](http://www.codeproject.com/Articles/173829/Windows-Phone-7-How-to-Communicate-with-a-Desktop)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T18:37:08.627

我遇到了类似的问题，因此我使用 AppHarbor 创建了一个托管在 IIS 中的 REST/JSON WCF 服务来提供数据。有数百种方法可以做到这一点（Ruby/Heroku 等），但那个特定的方法非常适合 Microsoft 堆栈。我还需要共享路线数据，并使用 WCF 服务来包装 BingMaps 服务，以便缓存和共享路线计算。考虑到我已经创建了一个本地模型，将它从我的手机项目中移到服务中花费了不到几个小时的时间（包括通常的配置问题，以及忘记将 appharbor 用户添加到我的 bitbucket 存储库中）。

从 WinForms（或任何客户端）使用服务应该不是问题，因为该服务对客户端实现一无所知。

这是来自代码项目的教程。[带有 JSON 的 REST WCF 服务](http://www.codeproject.com/Articles/327420/WCF-REST-Service-with-JSON)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T16:51:30.967

我认为您需要实现某种服务器端解决方案，您可以将其上传到您的 Windows Phone 并从您的 Windows 窗体应用程序下载。这可以使用连接到服务器端数据库的 WCF 服务来实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T21:24:42.430

另一种选择是使用套接字并直接与您的 WinForms 应用程序通信。查看[本](http://www.pitorque.de/MisterGoodcat/post/Windows-Phone-7-Mango-Sockets.aspx)教程，了解如何在 WP7 上使用基本套接字。

# php - 将照片从 iphone 上传到网络服务器

> ID：10260318
> 
> 赞同：1
> 
> 时间：2012-04-21T15:28:36.757
> 
> 标签：php, iphone, ios, upload, webserver

我尝试使用许多不同的 .php 上传脚本将照片从我的 iPhone 应用程序上传到我的[网络服务器](http://wasnaga.nestons.org/420/)，但到目前为止我还没有成功！

请检查我的 iPhone 源代码：

```
- (IBAction)upload:(id)sender {
    NSData *imageData = UIImageJPEGRepresentation(imageView.image, 90);
    NSString *urlString = @"http://wasnaga.nestons.org/420/upload.php";

    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
    [request setURL:[NSURL URLWithString:urlString]];
    [request setHTTPMethod:@"POST"];

    NSString *boundary = [NSString stringWithString:@"------------------------1473780983146499882746641449"];
    NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
    [request addValue:contentType forHTTPHeaderField:@"Content-Type"];

    NSMutableData *body = [NSMutableData data];
    [body appendData:[[NSString stringWithFormat:@"\r\n--%@r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"userfile\"; filename=\.jpg\"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"Content-Type: application/octet-stream\r\n\r\n"]dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[NSData dataWithData:imageData]];
    [body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary]dataUsingEncoding:NSUTF8StringEncoding]];
    [request setHTTPBody:body];

    NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
    NSString *returnString =[[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];

    NSLog(returnString);   
} 
```

有什么错误吗？你能帮我处理一下 .php 文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T23:13:19.383

看起来您在第一个 appendData 行中缺少反斜杠：

```
@"\r\n--%@r\n" 
```

它应该是：

```
@"\r\n--%@\r\n" 
```

# ios - iOS 单独或在一个存档中下载每个文件

> ID：10260327
> 
> 赞同：3
> 
> 时间：2012-04-21T15:29:29.387
> 
> 标签：ios, download

我正在开发一个 iOS 应用程序，我需要定期向设备“推送”新关卡。Level 是一个带有图像、javascript 和 css 文件的 HTML5 页面。在用户可以播放关卡之前，我需要在本地缓存所有关卡的文件。每个级别约为 1.5MB。我正在考虑将包含 HTML、图像、css 和 js 的整个关卡文件夹存档到一个 zip 存档中，下载此 zip，然后在设备上取消存档。但也许单独下载每个文件更有效，因为它们可以同时下载？

这是我的第一个 iOS 应用程序，我不确定如何正确执行。所以问题是：从服务器异步下载整个文件夹然后在下载所有文件时触发回调的最佳方法是什么（请记住，用户可以在下载过程中关闭应用程序或断开连接）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T15:35:24.360

由于大多数用户实际上使用的是慢速 3G 连接，因此压缩存档下载速度会更快（对他们来说更便宜），并且可能会使他们的连接完全饱和。同时进行只会使所有传输变慢，因为它们被迫共享相同的有限连接。一口气完成还避免了与许多传输文件传输失败之一相关的头痛。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T16:30:59.403

我发现压缩实际上更慢，因为设备解压缩所需的时间与下载所需的时间一样长。如前所述，使用此查看 ASIHTTPRequest 您可以说“获取页面及其所有资源” [http://allseeing-i.com/ASIHTTPRequest/Setup-instructions](http://allseeing-i.com/ASIHTTPRequest/Setup-instructions)

```
- (IBAction)downloadLevel:(NSURL *)levelURL
{
    // Assume request is a property of our controller
    // First, we'll cancel any in-progress page load
    [self.request setDelegate:nil];
    [self.request cancel];

    [self setRequest:[ASIWebPageRequest requestWithURL:levelURL]];
    [self.request setCompletionBlock:^{
        //code in here runs when the request finishes
    }];

    [self.request setFailedBlock:^{
        //code in here runs when the request fails
    }];

    // Tell the request to embed external resources directly in the page
    [self.request setUrlReplacementMode:ASIReplaceExternalResourcesWithData];

    // It is strongly recommended you use a download cache with ASIWebPageRequest
    // When using a cache, external resources are automatically stored in the cache
    // and can be pulled from the cache on subsequent page loads
    [self.request setDownloadCache:[ASIDownloadCache sharedCache]];

    // Ask the download cache for a place to store the cached data
    // This is the most efficient way for an ASIWebPageRequest to store a web page
    [self.request setDownloadDestinationPath:
     [[ASIDownloadCache sharedCache] pathToStoreCachedResponseDataForRequest:self.request]];

    [self.request startAsynchronous];
} 
```

更多文档可以在这里找到
[http://allseeing-i.com/ASIHTTPRequest/ASIWebPageRequest](http://allseeing-i.com/ASIHTTPRequest/ASIWebPageRequest)
和这里
[http://allseeing-i.com/ASIHTTPRequest/How-to-use](http://allseeing-i.com/ASIHTTPRequest/How-to-use)
这一切都很容易阅读。

# java - 使用 BufferedReader 跳过每一行？

> ID：10260328
> 
> 赞同：-4
> 
> 时间：2012-04-21T15:29:29.277
> 
> 标签：java, bufferedreader

> **可能重复：**
> [仅从输入中读取某些行？](https://stackoverflow.com/questions/10259905/reading-certain-lines-only-from-input)

如果我使用 BufferedReader，有没有办法可以跳过文件中的每一行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T15:34:12.147

只需阅读一行并丢弃它：

```
BufferedReader bReader = new BufferedReader(new FileReader("someFileName.txt"));
String line = null;

while(true)
{
   //skip the odd line
   bReader.readLine();

   //read an even line
   line = bReader.readLine();

   if(line != null)
      //do stuff with even line
   else
      break; //end of input
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T15:33:12.117

```
 BufferedReader br = ...;
String line;
while ((line = br.readLine()) != null) {
    line = br.readLine();
    //do whatever with the data
    if (line == null) break;
} 
```

# xml - 事件和 XSLT

> ID：10260331
> 
> 赞同：-3
> 
> 时间：2012-04-21T15:29:41.943
> 
> 标签：xml, events, xslt

我已经写了一个 xml、xsd 和一个 xsl 文件，我想知道如何执行以下操作：

如果用户点击某个链接，页面会显示某个段落。如果用户点击不同的链接，页面将显示不同的段落。这怎么可能？谢谢你。

编辑：

这是代码。这个想法是，如果我单击表中的 CountryName，我会显示有关该国家/地区的信息，如果单击另一个，它将显示该国家/地区。信息将在 ws:CountryName/ws:Information 中，并且会有文字和图片。

XSL：

```
 <?xml version="1.0" encoding="UTF-8"?>
 <xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
                 xmlns:ws="http://www.w3schools.com"
                 version="1.0"> 

 <xsl:template match="/">
 <html>
 <body>
 <table border="1">
 <tr bgcolor="red"><th>Country</th></tr>

 <xsl:for-each select="ws:Categorie/ws:Countries/ws:Country">
      <tr><td><xsl:value-of select="ws:CountryName"/></td></tr>
 </xsl:for-each>

 </table>
 </body>
 </html>
 </xsl:template>

 </xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-30T07:05:31.073

XSLT 的纯 JS 实现也支持事件，例如[Saxon-CE](http://www.saxonica.com/ce/index.xml)。可能想试一试。实际上，他们自己的[文档](http://www.saxonica.com/ce/user-doc/1.1/index.html)是使用它实现的，并且完全符合您想要实现的目标，因此您可能想要研究它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T10:59:37.917

听起来您希望隐藏/显示文本链接到各自的国家。最好的方法是添加指向国家/地区值的链接，单击该链接时将运行一个 javascript 来切换隐藏/显示。
例如：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:ws="http://www.w3schools.com"
    version="1.0">
    <xsl:template match="/">
        <html>
            <head>
                <title>Trial country links</title>
                <script>
                    function hideShow(country){
                        if(document.getElementById(country).style.display == 'none'){
                            document.getElementById(country).style.display = 'block';
                        } else {
                            document.getElementById(country).style.display = 'none';
                        }
                    }
                </script>
            </head>
            <body>
                <table border="1">
                    <tr bgcolor="red">
                        <th>Country</th>
                        <th>Information</th>
                    </tr>
                    <xsl:for-each select="//ws:Categorie/ws:Countries/ws:Country">
                        <tr>
                            <td>
                                <xsl:element name="a">
                                    <xsl:attribute name="href">javascript:hideShow('<xsl:value-of select="ws:CountryName"/>')</xsl:attribute>
                                    <xsl:value-of select="ws:CountryName"/>
                                </xsl:element>
                            </td>
                            <td>
                                <xsl:element name="div">
                                    <xsl:attribute name="id"><xsl:value-of select="ws:CountryName"/></xsl:attribute>
                                    <xsl:attribute name="style">display:none;</xsl:attribute>
                                    <xsl:value-of select="ws:Information"/>
                                </xsl:element>
                            </td>
                        </tr>
                    </xsl:for-each>
                </table>
            </body>
        </html>
    </xsl:template>
</xsl:stylesheet> 
```

应用于以下输入 XML 时

```
<?xml version="1.0" encoding="UTF-8"?>
<ws:Categorie xmlns:ws="http://www.w3schools.com">
    <ws:Countries>
        <ws:Country>
            <ws:CountryName>Birma</ws:CountryName>
            <ws:Information>Birma blabla</ws:Information>
        </ws:Country>
        <ws:Country>
            <ws:CountryName>India</ws:CountryName>
            <ws:Information>India blabla</ws:Information>
        </ws:Country>
        <ws:Country>
            <ws:CountryName>Boerkina Faso</ws:CountryName>
            <ws:Information>Boerkina Faso blabla</ws:Information>
        </ws:Country>
        <ws:Country>
            <ws:CountryName>Namibia</ws:CountryName>
            <ws:Information>Namibia blabla</ws:Information>
        </ws:Country>
    </ws:Countries>
</ws:Categorie> 
```

这给

```
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Trial country links</title>
        <script>
                    function hideShow(country){
                        if(document.getElementById(country).style.display == 'none'){
                            document.getElementById(country).style.display = 'block';
                        } else {
                            document.getElementById(country).style.display = 'none';
                        }
                    }
                </script>
    </head>
    <body>
        <table border="1">
            <tr bgcolor="red">
                <th>Country</th>
                <th>Information</th>
            </tr>
            <tr>
                <td><a href="javascript:hideShow('Birma')">Birma</a></td>
                <td>
                    <div id="Birma" style="display:none;">Birma blabla</div>
                </td>
            </tr>
            <tr>
                <td><a href="javascript:hideShow('India')">India</a></td>
                <td>
                    <div id="India" style="display:none;">India blabla</div>
                </td>
            </tr>
            <tr>
                <td><a href="javascript:hideShow('Boerkina Faso')">Boerkina Faso</a></td>
                <td>
                    <div id="Boerkina Faso" style="display:none;">Boerkina Faso blabla</div>
                </td>
            </tr>
            <tr>
                <td><a href="javascript:hideShow('Namibia')">Namibia</a></td>
                <td>
                    <div id="Namibia" style="display:none;">Namibia blabla</div>
                </td>
            </tr>
        </table>
    </body>
</html> 
```

# dart - 使用 dart 从网络上抓取数据

> ID：10260333
> 
> 赞同：2
> 
> 时间：2012-04-21T15:29:52.770
> 
> 标签：dart

我正在制作一个网络应用程序，我需要在其中抓取网络以获取一些数据。如果不使用 dart:io.HttpConnection ，我看不到这样做的方法，这对于网络应用程序来说并不重要。我该怎么办，我可以制作一个服务器应用程序，然后将它与客户端版本或其他东西一起使用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T16:10:11.237

您需要构建此服务器端，因为[浏览器安全模型](http://en.wikipedia.org/wiki/Same_origin_policy)不允许您连接到为您的应用程序提供服务的来源以外的其他来源（除非您可以使用[JSONP](http://en.wikipedia.org/wiki/JSONP)或[CORS](http://en.wikipedia.org/wiki/Cross-Origin_Resource_Sharing)进行抓取，但我对此表示怀疑）。因此，您需要在您的服务器上创建一个使用[HttpClient](http://api.dartlang.org/io/HttpClient.html)为您进行抓取的服务，然后使用[XMLHttpRequest从您的客户端调用此服务](http://api.dartlang.org/html/XMLHttpRequest.html)

# php - 为什么系统中有很多 php.ini 文件？

> ID：10260337
> 
> 赞同：5
> 
> 时间：2012-04-21T15:30:05.890
> 
> 标签：php, apache, configuration-files

我只是想知道为什么 Apache httpd 和 php 环境都需要一个 php.ini 文件。修改其中一个是否需要更新另一个？

如果有人可以推荐一本特定的书、文章或教程来帮助我理解这一点，那将很有帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-17T15:00:07.207

[php.ini](http://www.php.net/manual/en/configuration.file.php)为全局 Web 服务器进程而存在。它也可以存在于每个[人身上](http://linuxers.org/howto/how-specify-different-phpini-files-each-websites-apache) `vhost`。

它按以下顺序搜索：

*   `PHPIniDir`vhost定义的指令
*   `PHPRC`环境变量（自 PHP 5.2.0 起）
*   如果在 Windows 和 PHP 5.2.0 或更高版本上，以下注册表项 `[HKEY_LOCAL_MACHINE\SOFTWARE\PHP\x.y.z]`和`[HKEY_LOCAL_MACHINE\SOFTWARE\PHP\x.y]`，`[HKEY_LOCAL_MACHINE\SOFTWARE\PHP\x]`其中 x、y 和 z 表示 PHP 主要、次要和发布版本。如果在这些键中的任何一个中存在 IniFilePath 的值，则找到的第一个将用作 php.ini 的位置（仅限 Windows）。
*   [HKEY_LOCAL_MACHINE\SOFTWARE\PHP]，IniFilePath 的值（仅限 Windows）。
*   当前工作目录
*   Web 服务器的目录
*   如果在 Windows 上，Windows 目录 ( `C:\Windows`)

# jquery - 使用 jquery-localize 进行双语 Shopify 商店

> ID：10260342
> 
> 赞同：0
> 
> 时间：2012-04-21T15:30:26.030
> 
> 标签：jquery, localization, shopify

我正在尝试使用[jquery-localize](https://github.com/coderifous/jquery-localize)制作双语（pt-en）[Shopify](http://shopify.com)商店。Jquery-localize 正在工作（将默认语言 - pt - 的字符串翻译成客户端浏览器语言 - 我的是 en ）。我需要：

1.  为葡萄牙和巴西客户提供默认语言 (pt) 的商店；
2.  面向国际客户的英文商店（en、es、fr、de、ja 等）
3.  一个下拉列表，供客户选择他想以哪种语言查看商店（例如，我是葡萄牙人，但使用英文浏览器，但我想查看商店的 pt 版本）。

这可能与 jquery-localize 吗？我怎样才能让它工作？

谢谢，

安娜丽塔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:00:08.163

因此，满足我需求的更好解决方案不是 jquery-localize，而是 i18next：

[http://jamuhl.github.com/i18next/](http://jamuhl.github.com/i18next/)（网址：[https](https://www.i18next.com) ://www.i18next.com ）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-06T23:57:34.943

对此还有另一个答案 - 我为我的 Shopify 客户编写的一个脚本，用于启用英语和希腊语双语功能。它对 SEO 友好，适用于任何 Shopify 主题和任何两种语言。

你可以在这里查看 - [http://www.affiliatewebdesigners.com/product/bilingual-javascript/](http://www.affiliatewebdesigners.com/product/bilingual-javascript/)

# c - 父进程和子进程共享一个IPC共享内存

> ID：10260344
> 
> 赞同：1
> 
> 时间：2012-04-21T15:30:46.797
> 
> 标签：c, shared-memory

我想使用共享内存来保存两个父子进程打印的字符。子进程将'a'，'b'，'c'，'d'保存到前四个字节中，然后父进程将'A'，'B'，'C'，'D'保存到接下来的四个字节中字节。但它不会工作。代码如下：

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/shm.h>

int
main(int argc, char **argv) {
        int shmid,i,j,off_a,off_b;
        char *ptr;
        pid_t pid;

        shmid = shmget(IPC_PRIVATE, 200, SHM_W | SHM_R | IPC_CREAT);
        if (shmid < 0) {
                printf("cannot create shared memory\n");exit(-1);
        }
        if ((ptr = shmat(shmid, NULL, 0)) == (void *)-1) {
                printf("cannot attach shared memory to address\n");
                exit(-1);
        }

        if ((pid = fork()) < 0) {
                printf("fork error\n");exit(-1);
        } else if (pid) {

                wait();

                for (i = 'A', off_a = 0; i <= 'D'; i++ ,off_a += 1) 
                        sprintf(ptr + off_a,"%c",i);

                printf("RESULT:%s \n", ptr);

        } else {
                for (j = 'a', off_b = 4; j <= 'd'; j++, off_b += 1) 
                        sprintf(ptr + off_b,"%c",j);

                exit(0);

        }
} 
```

我认为结果是 abcdABCD，但是当我运行它时，它会打印 ABCD，我使用 gdb 对其进行调试，并将其写入文件，'a' 字符丢失了。为什么会这样？

```
0000000   A   B   C   D  \0   b   c   d  \0  \0  \0  \0  \0  \0  \0  \0
0000020  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0
* 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T15:45:27.067

The sprintf adds a trailing NULL;

Replace

```
sprintf(ptr + off_a,"%c",i); 
```

with

```
*(ptr + off_a) = i; 
```

and similarly with the other sprintf.

# java - JOptionPane 是否阻塞事件线程

> ID：10260348
> 
> 赞同：3
> 
> 时间：2012-04-21T15:31:13.300
> 
> 标签：java, swing, thread-safety, joptionpane

我的应用程序`JOptionPane`在某些时候使用 s 来输入信息。在显示的同时，`JOptionPane`GUI 上可能会发生来自网络上其他客户端的更改。这些可以是 上的文本`JTextArea`，或更改上的节点`JTree`。

这是否意味着我需要`JOptionPane`在新线程上创建，以便在活动期间所做的更改不会出现问题`JOptionPane`？

我在互联网上查看了一些地方，但没有得到明确的答案。

ps`JOptionPane`在用户单击按钮时创建。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-21T15:42:50.753

Swing 是单线程的，因此“使用另一个线程”的选项根本不是一个选项。但是，这并不意味着在显示选项窗格时您的组件无法更新。请参阅下面的示例。我添加了一个 System.out 调用来说明 JOptionPane 调用是阻塞的，但是由于 Swing 计时器，我可以将文本附加到我的 JTextArea（在 EDT 上）。

```
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.Timer;
import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

public class UpdateOptionPane {

  private static void showUI(){
    final JFrame testFrame = new JFrame( "TestFrame" );

    final JTextArea textArea = new JTextArea(  );
    testFrame.add( new JScrollPane( textArea ), BorderLayout.CENTER );

    Timer timer = new Timer( 1000, new ActionListener() {
      @Override
      public void actionPerformed( ActionEvent e ) {
        textArea.append( "bla" );
      }
    } );
    timer.setRepeats( true );
    timer.start();
    JButton button = new JButton( "Click me" );
    button.addActionListener( new ActionListener() {
      @Override
      public void actionPerformed( ActionEvent e ) {
        System.out.println("Before option pane");
        JOptionPane.showMessageDialog( testFrame, "A message dialog" );
        System.out.println("After option pane");
      }
    } );
    testFrame.add( button, BorderLayout.SOUTH );
    testFrame.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );
    testFrame.pack();
    testFrame.setVisible( true );
  }

  public static void main( String[] args ) {
    EventQueue.invokeLater( new Runnable() {
      @Override
      public void run() {
        showUI();
      }
    } );
  }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-21T15:36:02.877

JoptionPane 实际上是一种设置和使用 JDialog 的简单方法。听起来你想要的是一个非模态 JDialog

# python - 需要基于其他标志 argparse 的标志

> ID：10260350
> 
> 赞同：1
> 
> 时间：2012-04-21T15:31:25.883
> 
> 标签：python, argparse

我有一系列的标志...

```
--one
--two

-a
-b
-c
-d 
```

每当我以--one 和-c 开头时，我希望-a 和-b 都需要，每当我以--two 开头时都需要-d。

我究竟如何做到这一点？我知道我可以要求一个选项，但这与基于已经给出的选项要求选项不同。

# c# - 使用 StreamReader 和文本文件

> ID：10260353
> 
> 赞同：0
> 
> 时间：2012-04-21T15:31:36.967
> 
> 标签：c#

我想在按钮单击事件上放置一个测试循环。当我单击此按钮时，它会读取文本文件的内容，但我希望它弹出一条错误消息，显示“无法读取文件”，如果它不是文本文件......这是我的代码

```
private void button3_Click(object sender, EventArgs e)
{
    StreamReader sr = new StreamReader(textBox1.Text);
    richTextBox1.Text = sr.ReadToEnd();
    sr.Close();
} 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T15:44:04.653

一些 if 语句和命名空间`System.IO`就可以了

```
string filename = textBox1.Text;
if (Path.GetExtension(filename).ToLower()) == ".txt") {
    if (File.Exists(filename)) {
        // Process the file here
    } else {
        MessageBox.Show("The file does not exist");
    }
} else {
    MessageBox.Show("Not a text file");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T15:47:49.467

不是最好的代码，但它应该可以工作。理想情况下，您会将逻辑分为两种方法，一个检查文件是否存在的函数并且是一个文本文件（返回一个布尔值），另一个用于在检查函数返回 true 时读取内容并用内容填充文本框。

编辑：这更好：

```
 private void button3_Click(object sender, EventArgs e)
    {
        string filePath = textBox1.Text;
        bool FileValid = ValidateFile(filePath);

        if (!IsFileValid)
        {
            MessageBox.Show(string.Format("File {0} does not exist or is not a text file", filePath));
        }
        else
        {
            textbox2.Text = GetFileContents(filePath);
        }
    }

    private bool IsFileValid(string filePath)
    {
        bool IsValid = true;

        if (!File.Exists(filePath))
        {
            IsValid = false;
        }
        else if (Path.GetExtension(filePath).ToLower() != ".txt")
        {
            IsValid = false;
        }

        return IsValid;
    }

    private string GetFileContents(string filePath)
    {
        string fileContent = string.Empty;

        using (StreamReader reader = new StreamReader(filePath))
        {
            fileContent = reader.ReadToEnd();
        }

        return fileContent;
    } 
```

# spring - Java 网络安全解决方案

> ID：10260357
> 
> 赞同：0
> 
> 时间：2012-04-21T15:32:11.443
> 
> 标签：spring, spring-mvc, jboss, spring-security, java-ee-5

我正在为我的 Web 应用程序安全性寻找一些可能的解决方案。

Web 应用程序将用户重定向到登录服务器。然后在身份验证成功后，用户将被转发回我的应用程序中的某个页面。登录凭据与用户一起转发。我的页面是通过一个控制器提供的，该控制器为我的应用程序验证用户。（使用 Liberty ID-FF 1.2 完成身份验证。）

目前，我正在使用 Spring 3 页面拦截器进行重定向。

我的问题是；如何使用 Spring Security 完成此任务？或者，还有其他类似的框架吗？我喜欢 Spring Security，因为它易于配置以及如何保护资源。要使用它，我需要让身份验证控制器将用户重定向到登录服务器。如何在身份验证控制器中执行此操作？

我正在使用 JBoss 4.0.5、Spring 3.0、Java EE 5 和 ID-FF 1.2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T21:28:13.677

恐怕在 Spring 中对 Liberty ID-FF 有任何支持。目前，有 SAML2 扩展模块仅适用于 Spring Security。

更多信息：

[http://static.springsource.org/spring-security/site/extensions.html](http://static.springsource.org/spring-security/site/extensions.html)

# javascript - Fadetoggle 显示和隐藏两个 div

> ID：10260359
> 
> 赞同：1
> 
> 时间：2012-04-21T15:32:24.203
> 
> 标签：javascript, animation

我有两个 div，我想显示一个并连续隐藏另一个。我的代码只显示了第一个`Mass_alert`。我必须修复什么才能依次显示和隐藏两个 div。

这是HTML。

```
 <div style="position: relative; top: 50px; width: 778px; margin: 0 auto;">
    <div id="alerts" style="float: right; width:200px; height: 25px; background: goldenrod; border-radius: 3px 3px 3px 3px; font: 11px Arial; color: #404040; overflow: hidden;"> 
      <div id="Mass_alert" class="alert" style="position: relative; top: 5px; margin: 0 auto; text-align: center; width:100%; height: 20px;"></div>
      <div id="Devotion_alert" class="alert" style="position: relative; top: 5px; margin: 0 auto; text-align: center; width:100%; height: 20px; visibility: hidden;"></div>
    </div>
  </div> 
```

执行淡入淡出切换的代码就是这个。

```
$(document).ready(function() {  
    show_next_Mass(channel_array_sort);
    show_next_devotion();
    setInterval("show_alerts()",10000);

    var continuous = function () {
        $("#Mass_alert").fadeToggle(600);
        $("#Devotion_alert").fadeToggle(600);   
    };

    setInterval(continuous,600);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T15:42:20.830

Judging by [this API doc](http://api.jquery.com/fadeToggle/), you need to use `display: none;` instead of `visibility: hidden;` for the hidden element.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T16:28:51.060

当您观看时`.fadeToggle()`，您会看到以下属性的变化

```
opacity: 0;
display: none; 
```

（正如亚历山大在他的回答中指出的那样。）

所以我把它复制到第二个 div 的样式属性中。但它没有用。我的假设是 jQuery 以某种方式跟踪它对元素所做的事情，但并没有真正识别出最初的 CSS。

我的想法是，jQuery 在某种程度上会跟踪它对元素所做的事情，但并不能真正识别 HTML 已经带有的样式。所以我从任何隐藏的相关属性中清除了 2nd div 的 CSS，并`.hide()`在“初始化函数”中添加了一个。

[似乎工作（@jsFiddle）](http://jsfiddle.net/GsamY/)

# android - android：如何在应用程序启动之间管理内存（第二次运行应用程序失败）？

> ID：10260360
> 
> 赞同：0
> 
> 时间：2012-04-21T15:32:26.887
> 
> 标签：android, memory-management

菜鸟问题！

我的白板/绘图应用程序运行良好，使用简单的图像视图和位图的组合，我渲染位图的路径并根据需要进行复制。我在我的 ICS Transformer 上多任务处理没有问题。但是，如果我使用返回按钮退出应用程序，然后再次运行它，它会失败；当我尝试绘制某些东西时，第二次运行时出现内存错误。

```
Out of memory on a 4096016-byte allocation 
```

虽然有时我不明白，它连续第二次运行。当我第三次运行它时，它可以工作，而第四次，它又是内存不足的。

当 Android 应用退出时，我需要进行哪些手动清理？我应该删除所有创建的对象、位图、路径、侦听器和其他东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T15:44:41.440

Looks like you have a memory leak. Make sure you follow recommendations provided [here](http://developer.android.com/resources/articles/avoiding-memory-leaks.html). Often [Memory Analyzer Tool](https://www.google.com.ua/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CCEQFjAA&url=http://www.eclipse.org/mat/&ei=nNWST7eABKeF4gTis8jQDw&usg=AFQjCNHJQkRWSlJy95ScA7QeIngK8cejpQ&sig2=qDHI676umCnv6zVsws8Tqw) is very useful in such cases. Here is [a video](http://www.google.com/events/io/2011/sessions/memory-management-for-android-apps.html) how to use it.

# php - 用户数据数据库结构

> ID：10260363
> 
> 赞同：0
> 
> 时间：2012-04-21T15:32:39.127
> 
> 标签：php, mysql, user-accounts, user-data

我正在运行一个带有一些用户帐户的基本网站（没有 cookie，php 会话系统。）。我想存储一些用户生成的数据，这些数据只对他们自己可见。

目前我将所有用户的数据存储在一个表中，并带有一个额外的列用于识别（这是来自 php session user-id 的输入）。（我们谈论的是每个用户最多 50-100 个密钥）。

在数据请求中，我在 mysql 查询中有一个额外的参数（AND“user-id”=x）。

1.  这是一种安全的（网站上没有敏感数据，但帐户必须是私有的）存储数据的方式吗？

2.  有没有更好的方法来处理这个问题？（我读到了单独的数据库等）如果是这样，怎么做？

谢谢，

M。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T15:43:41.557

> 这是一种安全的（网站上没有敏感数据，但帐户必须是私有的）存储数据的方式吗？

`user-id=x`在你的 mysql 查询中从表中获取数据并没有错。但请确保您没有直接从查询字符串中读取此值并将其附加到 mysql 查询，而无需进行适当的清理和清理。**否则你将成为[SQL 注入](http://www.unixwiz.net/techtips/sql-injection.html)的受害者。**

> 有没有更好的方法来处理这个问题？（我读到了单独的数据库等）如果是这样，怎么做？

我看不出有任何理由让单独的数据库来处理这个问题。您可以使用当前的数据库。如果需要，您可以为此创建其他表。我不确定您的数据库架构和实体关系是什么。所以我无法告诉你如何做到这一点。查看您的表格并确保它已标准化。

如果您希望存储的数据只能由该特定用户看到，您可能需要检查当前登录的用户 id（从会话变量中获取？）是否与 db 记录的 userId 相同。如果有的话，您可以与“CreatedById”字段值进行比较。

如果“SQL 注入”对您来说是一个新术语，我相信这个链接是必读的。 [http://www.unixwiz.net/techtips/sql-injection.html](http://www.unixwiz.net/techtips/sql-injection.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T15:36:24.047

只需使用 PHP `$SESSION`。

通过使用[`session_set_save_handler`](http://php.net/manual/en/function.session-set-save-handler.php)，您可以定义自己的会话存储方法，例如可以是 MySQL 数据库。

用户不能直接更改会话中的值（就像使用 cookie 一样）。所以这种方法是完全安全的，只要你不在`PHPSESSID`任何地方暴露 cookie 值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T15:37:58.663

没有办法是 100% 安全的。你的方法听起来很不安全，但我看不到你的代码。如果您正确清理输入以避免mysql注入，并且用户无法指定另一个用户的密钥，那么您可能没问题。

# python - 等量合并两个列表

> ID：10260364
> 
> 赞同：3
> 
> 时间：2012-04-21T15:32:55.580
> 
> 标签：python, list

问题是在保持顺序的情况下合并两个列表，并且合并列表中的项目数量相同，不能超过10个（或任意数量）项目，但尽可能多。

这是最简单的例子。

```
l1 = list('1'*10)
l2 = list('2'*10)
lt = l1[:5] + l2[:5] 
```

但是，当一个列表没有 5 个项目时，新列表将填充另一个列表中的项目。

```
l1 = list('1'*2)
l2 = list('2'*10)
lt = ['1','1','2','2','2','2','2','2','2','2']

l1 = list('1'*10)
l2 = list('2'*2)
lt = ['1','1','1','1','1','1','1','1','2','2'] 
```

该函数应采用包含任意数量项目的列表。这应该很简单，但事实并非如此。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T15:36:54.590

您想取较大的一个：列表中的五个项目或足够的项目以将列表填充到所需的长度。

```
lt = l1[:max(5, 10 - len(l2))] + l2[:max(5, 10 - len(l1))] 
```

# jdbc - 在 java 类中加载 jdbc 驱动程序

> ID：10260367
> 
> 赞同：0
> 
> 时间：2012-04-21T15:33:10.617
> 
> 标签：jdbc

在一个简单的 jdbc 例子中，当我们通过一个 java 类加载一个驱动程序时，做法是使用 `Class.forName("com.mysql.jdbc.Driver").newInstance();` 为什么我们不使用`new com.mysql.jdbc.Driver();`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T15:39:09.170

这段代码并不是真的要创建驱动程序的实例，而是确保驱动程序类由类加载器加载。现在不再需要了，请参阅：

*   [连接数据库时 Class.forName("oracle.jdbc.driver.OracleDriver") 的实际用途是什么？](https://stackoverflow.com/questions/8053095)
*   [JDBC Class.forName 与 DriverManager.registerDriver](https://stackoverflow.com/questions/5484227)
*   [加载 JDBC 驱动程序](https://stackoverflow.com/questions/5992126)
*   ['Class.forName("MY_JDBC_DRIVER")' 的目的是什么？](https://stackoverflow.com/questions/7662902)
*   [JDBC 连接 - Class.forName 与 Class.forName().newInstance？](https://stackoverflow.com/questions/4640268)

# image - 从 CSS 调用图像

> ID：10260370
> 
> 赞同：3
> 
> 时间：2012-04-21T15:33:28.277
> 
> 标签：image, html, css

*   我的 .html 文件都在`Assignment1/*.html`文件中
*   我的 CSS 文件在`Assignment1/style/cssfile.css`
*   我的图片在`Assignment1/images/images.png`

我如何从文件中调用`Assignment1/style/cssfile.css`图像`Assignment1/images/images.png`？

我不能像 html 文件那样做，因为我只能转发文件夹以通过。我正在尝试做：

`.top {background-image: url("Assignment1/images/deco1400.png");}`

从css文件无济于事。

如何从位于不同目录的 CSS 中引用我的图像文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T15:35:10.973

尝试

```
background-image: url("../images/deco1400.png"); 
```

你的树结构就像

```
Assignment1
  style
    style.css <- you are here
  images
    img1.png 
```

所以要么你需要升一级（`..`）然后输入图像，要么你需要提供绝对路径/images/img1.png（注意`/`开头）。两者都应该工作，假设分配是你的根目录

更新：您可能有兴趣阅读有关相对路径和绝对路径的信息。

# c# - WP7 Facebook SDK - 自动连接用户

> ID：10260374
> 
> 赞同：0
> 
> 时间：2012-04-21T15:33:39.070
> 
> 标签：c#, facebook, windows-phone-7

我目前正在为 Windows Phone 编写一个 facebook 应用程序，但有些事情我只是不知道该怎么做。

由于 display=touch 目前在 windows phone 上不起作用，我不得不使用 display=popup 来获取令牌和用户对我的应用程序的同意。这种弹出模式确实不适合移动应用程序，所以我希望用户能够选中一个框，上面写着“我希望应用程序记住我的登录名和密码并自动连接我”。

但是，当我拥有用户的登录名和密码时，我不知道如何使用 OAuth API 有效地登录用户而无需单击任何内容。有没有办法做到这一点 ？还是我必须等待用户在 Facebook 登录页面上选择“记住我”？

我希望这已经足够清楚了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T20:26:50.880

Facebook 没有用于获取用户电子邮件地址和密码并返回访问令牌的（公共）API。您可以做的最接近的事情是自定义使用 JavaScript 返回的 HTML。我的[github](https://github.com/offbysome/Facebook-WP7-Login-Button)上有一个这样的例子。

# android - Android：如何使用 API 级别 8 和 https 的 cookie？

> ID：10260377
> 
> 赞同：0
> 
> 时间：2012-04-21T15:33:58.323
> 
> 标签：android, cookies, https

我正在联系 HTTPS 服务器。使用至少 9 级的 API，我可以使用 CookieManager / CookieHandler / HttpsURLConnection，但在 API 8 级，cookie 包不存在。

我的一个想法是找到 Android 的 API 级别 9 的源代码（因为它是开源的）并反向移植我需要的东西。这是明智的吗？如果是这样，我在哪里可以找到 Android 的 java.net.cookie* 库实现？（可能以[https://github.com/android/](https://github.com/android/)作为起点，但我可以使用更多指导。）

或者有没有更好的方法来使用 API 级别 8？org.apache 的 HttpConnection 可以处理 HTTPS 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T15:37:39.133

您可以使用Android SDK 中包含的[Apache HTTP 客户端。](http://developer.android.com/reference/org/apache/http/client/HttpClient.html)它支持cookies。

# java - 将图片上传到服务器时出现 java.lang.IndexOutOfBoundsException

> ID：10260378
> 
> 赞同：0
> 
> 时间：2012-04-21T15:34:08.570
> 
> 标签：java, file, jsp, servlets, file-upload

当我尝试将文件上传到服务器时，我得到了 java.lang.IndexOutOfBoundsException。

我在 loaclhost 上检查了代码，它工作正常，但是在将其上传到服务器后，我得到了错误。

**上传.jsp**

```
 <form action="UploadServlet" method="post" enctype="multipart/form-data">
    <input type="file" name="select"  value="" />
    <input type="submit" value="Select Profile Pic" />
    </form> 
```

**上传Servlet.java**

```
 /*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
 package file_upload;
 import java.io.IOException;
 import java.io.PrintWriter;
 import javax.servlet.ServletException;
 import javax.servlet.http.HttpServlet;
 import javax.servlet.http.HttpServletRequest;
 import javax.servlet.http.HttpServletResponse;
 import java.io.*;
 import javax.servlet.*;
 import javax.servlet.http.*;
 import java.sql.*;
 /**
 *
 * @author Dan
 */
 public class UploadServlet extends HttpServlet {
 public void doPost(HttpServletRequest request,HttpServletResponse response) throws        ServletException,IOException {
 response.setContentType("text/html");
 PrintWriter out = response.getWriter();
  HttpSession session = request.getSession(true);
  String d1 = session.getAttribute("user_id").toString();
     String saveFile="";
String contentType = request.getContentType();
if((contentType != null)&&(contentType.indexOf("multipart/form-data") >= 0)){
DataInputStream in = new DataInputStream(request.getInputStream());
int formDataLength = request.getContentLength();
byte dataBytes[] = new byte[formDataLength];
int byteRead = 0;
int totalBytesRead = 0;
while(totalBytesRead < formDataLength){
byteRead = in.read(dataBytes, totalBytesRead,formDataLength);
totalBytesRead += byteRead;
 }
String file = new String(dataBytes);
saveFile = file.substring(file.indexOf("filename=\"") + 10);
saveFile = saveFile.substring(0, saveFile.indexOf("\n"));
saveFile = saveFile.substring(saveFile.lastIndexOf("\\") + 1,saveFile.indexOf("\""));
int lastIndex = contentType.lastIndexOf("=");
String boundary = contentType.substring(lastIndex + 1,contentType.length());
int pos;
pos = file.indexOf("filename=\"");
pos = file.indexOf("\n", pos) + 1;
pos = file.indexOf("\n", pos) + 1;
pos = file.indexOf("\n", pos) + 1;
int boundaryLocation = file.indexOf(boundary, pos) - 4;
int startPos = ((file.substring(0, pos)).getBytes()).length;
int endPos = ((file.substring(0, boundaryLocation)).getBytes()).length;
File ff = new File(d1+".gif"); //IMP NOTE: TO RENAME THE FILE TO userig.gif
FileOutputStream fileOut = new FileOutputStream("/opt/tomcat/webapps/ROOT/images/user/profile/"+ff); //IMP NOTE : THE DIR TO STORE FILE AT
fileOut.write(dataBytes, startPos, (endPos - startPos));
fileOut.flush();
fileOut.close();
out.println("You have successfully upload the file:"+saveFile);
Connection connection = null;
String connectionURL = "jdbc:mysql://mysql-ypmdb.jelastic.servint.net/bmdb";
ResultSet rs = null;
PreparedStatement psmnt = null;
FileInputStream fis;
try{
Class.forName("com.mysql.jdbc.Driver").newInstance();
connection = DriverManager.getConnection(connectionURL, "root", "4x0dD9d8rZ");
File f = new File(saveFile);
psmnt = connection.prepareStatement("insert into file(file_data) values(?)");
fis = new FileInputStream(f);
psmnt.setBinaryStream(1, (InputStream)fis, (int)(f.length()));
int s = psmnt.executeUpdate();
if(s>0){
System.out.println("Uploaded successfully !");
}
else{
System.out.println("Error!");
}
}
catch(Exception e){
    e.printStackTrace();
     }
    }
  }
} 
```

**错误信息：**

```
 type Exception report
  message
  description The server encountered an internal error () that prevented it from     fulfilling this request.
  exception
java.lang.IndexOutOfBoundsException
java.io.FileOutputStream.writeBytes(Native Method)
java.io.FileOutputStream.write(FileOutputStream.java:318)
file_upload.UploadServlet.doPost(UploadServlet.java:62)
javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
note The full stack trace of the root cause is available in the Apache Tomcat/7.0.14 logs. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T17:20:12.233

您正在以下语句中保存文件：

```
File ff = new File(d1+".gif"); //IMP NOTE: TO RENAME THE FILE TO userig.gif
FileOutputStream fileOut = 
    new FileOutputStream("/opt/tomcat/webapps/ROOT/images/user/profile/"+ff);
fileOut.write(dataBytes, startPos, (endPos - startPos));
fileOut.flush();
fileOut.close(); 
```

然后在加载到数据库时尝试读取不同的文件：

```
File f = new File(saveFile);
psmnt = connection.prepareStatement("insert into file(file_data) values(?)");
fis = new FileInputStream(f);
psmnt.setBinaryStream(1, (InputStream)fis, (int)(f.length())); 
```

saveFile 看起来像浏览器上传的文件的名称，而不是保存上传内容的文件

更改以下内容：

```
// fis = new FileInputStream(f);
fis = new FileInputStream(
    new File("/opt/tomcat/webapps/ROOT/images/user/profile/"+ff)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-22T07:16:58.753

更改以下行并尝试..

字符串文件 = 新字符串（数据字节）； **to** String file = new String(dataBytes,"CP1256");

int startPos = ((file.substring(0, pos)).getBytes()).length; **到** int startPos = ((file.substring(0, pos)).getBytes("CP1256")).length;

int endPos = ((file.substring(0, boundaryLocation)).getBytes()).length; **到** int endPos = ((file.substring(0, boundaryLocation)).getBytes("CP1256")).length;

# networking - 验证 CRC 计算

> ID：10260379
> 
> 赞同：0
> 
> 时间：2012-04-21T15:34:11.940
> 
> 标签：networking, crc

我正在讨论以下过去的论文问题：

> 考虑 4 位发生器，G = 1001，并假设在循环冗余校验 (CRC) 计算之前要传输的位流的数据部分是 11001001。显示实际传输的位流。假设传输比特流中最左边的比特由于传输链路上的噪声而被反转。表明在接收端检测到这个错误。

我使用 XOR 计算了要附加到传输末尾的 CRC，如下所示：

```
11001001000
1001|||||||
----|||||||
0101|||||||
 1001||||||
-----|||||| 
 001000||||
   1001||||
   ----||||
 000001100|
      1001|
      ----|
      01010
       1001
       ----
       0011 
```

所以 R = 011 被附加到传输中并且是发送的内容。

对于问题的第二部分，我做了同样的事情，除了由于最左边的错误但现在是 0 所以：

```
01001001011
1001|||||||
----|||||||
1101|||||||
1001|||||||
----|||||||
01001||||||
 1001||||||
 ----||||||
 0000001011
       1001
       ----
       0010 therefore there is an error 
```

我从这里去哪里？如果都是零，我要停下来吗？但这意味着没有错误......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T17:48:50.987

```
01001001011
 1001||||||
 ----||||||
 0000001011
       1001
       ----
       0010 <- Error! 
```

# google-app-engine - 在 AppEngine 中执行串行工作

> ID：10260387
> 
> 赞同：0
> 
> 时间：2012-04-21T15:35:06.963
> 
> 标签：google-app-engine

我有 Google AppEngine 应用程序，它从多个来源获取数据，然后我想以串行方式处理所有数据。

最好的方法是什么？

我愿意

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T17:12:16.090

一种方法：将获取的数据存储在数据存储中。使用[TaskQueues](https://developers.google.com/appengine/docs/python/taskqueue/)处理数据。

# php - 计算 twitter 关注者的简单 php 类？

> ID：10260393
> 
> 赞同：0
> 
> 时间：2012-04-21T15:35:35.030
> 
> 标签：php, oop, twitter, count

我正在为 wordpress 开发我的第一个 php 类，在其中我查询 twitter api 以获取当前的关注者数量。一旦我解决了所有错误，我计划将其扩展到其他社交媒体网站。

问题是我是 OOP 和 wordpress 小部件开发的新手，没有收到预期的响应。

我已经让它在没有缓存的情况下工作，我认为这可能是通过它的那一部分。

```
class razor_SocialCount {
    function __construct($user, $api) {
           echo $this->razor_social_count_api($user, $api);
    }

    private function razor_social_count_api($user, $api) {
        if (empty($user) || empty($api)) return false;

        if(false === ($count = get_transient($api.'_recent_count') ) ) {

            switch($api) {
                case ('twitter'):
                    $count = $this->fetch_twitter_count($user);
                break;

                default:
                    $count = 'Function not found.';
                break;
            }

            set_transient($api.'_recent_count', $count, (60 * 60 * 3));
        }

        return number_format(doubleval($count));
    }

    private function fetch_twitter_count($user) {
        $json = wp_remote_get("http://api.twitter.com/1/users/show.json?screen_name=$user");

        if(is_wp_error($json)) return 0;

        $count = json_decode($json['body'], true);

        return intval($count['followers_count']);
    }
} 
```

好的，所以根据我收到的一些回复和帮助，我对课程进行了一些细微的改动，并将其扩展为包括 rss 订阅者和 facebook 喜欢

但仍然得到奇怪的反应。twitter 响应为 0，其他为 Function Not Found。当我注释掉这些错误检查时，我仍然得到相同的响应。

```
class razor_SocialCount {
private $user;
private $api;
public $count;

function __construct($user, $api) {
    $this->user = $user;
    $this->api = $api;
    return $this->razor_social_count_api();
}

private function razor_social_count_api() {
    if (empty($this->user) || empty($this->api)) return false;

    switch($this->api) {
        case ('facebook'):
            if(false === ($this->count = get_transient('facebook_recent_count'))) {
                $this->count = $this->fetch_facebook_count();
                set_transient('facebook_recent_count', $this->count, (60*60*3));
            }
        break;

        case ('twitter'):
            if(false === ($this->count = get_transient('twitter_recent_count'))) {
                $this->count = $this->fetch_twitter_count();
                set_transient('twitter_recent_count', $this->count, (60*60*3));
            }
        break;

        case ('rss'):
            if(false === ($this->count = get_transient('rss_recent_count'))) {
                $this->count = $this->fetch_rss_count();
                set_transient('rss_recent_count', $this->count, (60*60*3));
            }
        break;

        default:
            $this->count = 'Function not found.';
        break;
    }
}

private function fetch_facebook_count() {
    $json = wp_remote_get("http://graph.facebook.com/$this->user");
    if(is_wp_error($json)) return 0;

    $json = json_decode($json['body'], true);

    return number_format(intval($json['likes']));
}

private function fetch_twitter_count() {
    $json = wp_remote_get("http://api.twitter.com/1/users/show.json?screen_name=$this->user");
    //if(is_wp_error($json)) return 0;

    $json = json_decode($json['body'], true);

    return number_format(intval($json['followers_count']));
}

private function fetch_rss_count() {
    $xml = wp_remote_get("http://feedburner.google.com/api/awareness/1.0/GetFeedData?uri=$this->user");
    //if(is_wp_error($xml)) return 0;

    $xml = new SimpleXMLElement($xml['body']);
    return number_format(intval($xml->feed->entry['circulation']));
}

} 
```

我这样称呼它

```
$facebook = new razor_SocialCount('midaymcom','facebook');
$twitter = new razor_SocialCount('midaym','twitter');
$feed = new razor_SocialCount('midaym','rss');

echo $facebook->count;
echo $twitter->count;
echo $feed->count; 
```

有趣的是，当我注释掉它起作用的瞬态时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T15:49:04.010

Not sure why your accessing the array with: `$json['body']` remove that and I think your good to go.

Heres a quick example that displays the followers_count

```
<?php
function fetch_twitter_count($user) {
    $json = file_get_contents("http://api.twitter.com/1/users/show.json?screen_name=$user");

    if(is_wp_error($json)) return 0;

    $count = json_decode($json, true);

    return intval($count['followers_count']);
}

echo  number_format(fetch_twitter_count('jhon')); //1,155 
?> 
```

**EDIT:** As you can see from the output below there is NO [body] key:

```
Array
(
    [id] => 6405412
    [id_str] => 6405412
    [name] => Jhon van der Ceelen
    [screen_name] => Jhon
    [location] => Amsterdam - The Netherlands
    [description] => GTD-er, Digital marketeer for over 17 years. Working @MindshareNL - Business Planning Director Digital and Client Leader Digital Unilever and KPN
    [url] => http://www.mindshare.nl
    [protected] => 
    [followers_count] => 1156
    [friends_count] => 471
    [listed_count] => 13
    [created_at] => Tue May 29 07:00:11 +0000 2007
    [favourites_count] => 29
    [utc_offset] => 3600
    [time_zone] => Amsterdam
    [geo_enabled] => 
    [verified] => 
    [statuses_count] => 921
    [lang] => nl
    [status] => Array
        (
            [created_at] => Sat Apr 21 09:05:36 +0000 2012
            [id] => 1.9362652702652E+17
            [id_str] => 193626527026524160
            [text] => Mobile Marketing Nederland | Blog: Mobile Advertising groeit (nu echt) http://t.co/ugjwisnO
            [source] => LinkedIn
            [truncated] => 
            [in_reply_to_status_id] => 
            [in_reply_to_status_id_str] => 
            [in_reply_to_user_id] => 
            [in_reply_to_user_id_str] => 
            [in_reply_to_screen_name] => 
            [geo] => 
            [coordinates] => 
            [place] => 
            [contributors] => 
            [retweet_count] => 0
            [favorited] => 
            [retweeted] => 
            [possibly_sensitive] => 
        )

    [contributors_enabled] => 
    [is_translator] => 
    [profile_background_color] => 9AE4E8
    [profile_background_image_url] => http://a0.twimg.com/profile_background_images/19025441/Binary_TV_Photo_psd.jpg
    [profile_background_image_url_https] => https://si0.twimg.com/profile_background_images/19025441/Binary_TV_Photo_psd.jpg
    [profile_background_tile] => 1
    [profile_image_url] => http://a0.twimg.com/profile_images/24825272/Jhon_normal.jpg
    [profile_image_url_https] => https://si0.twimg.com/profile_images/24825272/Jhon_normal.jpg
    [profile_link_color] => 0000FF
    [profile_sidebar_border_color] => 87BC44
    [profile_sidebar_fill_color] => E0FF92
    [profile_text_color] => 000000
    [profile_use_background_image] => 1
    [show_all_inline_media] => 1
    [default_profile] => 
    [default_profile_image] => 
    [following] => 
    [follow_request_sent] => 
    [notifications] => 
) 
```

Im not saying dont use the `is_wp_error($json)` function, I commented it out so I could work with the function.

You need to also check that `wp_remote_get` is actually working as `fetch_twitter_count` will always return at least 0

Edit 2: Also I see your just echoing your result from the constructor you should return instead and call it like:

`<?php $twitter_folowers = new razor_SocialCount('account','twitter'); ?>`

Then you can echo `$twitter_folowers->count` where ever you want it, else trying to echo it you may have trouble if you need it between html.

Edit 4 - Some changes to the class to make it more oop and not just some encapsulated functions:

```
<?php 
class razor_SocialCount {
    private $user;
    private $api;
    public $count;

    function __construct($user, $api) {
        $this->user = $user;
        $this->api = $api;
        return $this->razor_social_count_api();
    }

    private function razor_social_count_api() {
        if (empty($this->user) || empty($this->api)) return false;

        if(false === ($this->count = get_transient($this->api.'_recent_count'))) {

            switch($this->api) {
                case ('twitter'):
                    $this->count = $this->fetch_twitter_count();
                    break;

                default:
                    $this->count = 'Function not found.';
                    break;
            }

            set_transient($this->api.'_recent_count', $this->count, (60 * 60 * 3));
        }
    }

    private function fetch_twitter_count() {
        $json = file_get_contents("http://api.twitter.com/1/users/show.json?screen_name=$this->user");
        if(is_wp_error($json)) return 0;

        $json = json_decode($json, true);
        return number_format(intval($json['followers_count']));
    }
}

$twitter_count = new razor_SocialCount('jhon','twitter');

echo $twitter_count->count; //1,156
?> 
```

# css - 模板问题：浮动上的负边距

> ID：10260400
> 
> 赞同：1
> 
> 时间：2011-03-08T15:35:19.470
> 
> 标签：css, templates

我在使用 wordpress 模板时遇到了一个非常奇怪的问题。我想像这样放置 2 个 div：

```
<div style='float:left;'>
    left div
</div>
<div style='float:right'>
    right div
</div> 
```

通常这可以正常工作 - 两个 div 应该直接相互粘连 - 但是 style.css 中的某些内容（使用 css 重置）会导致右 div 与左 div 重叠约 5 像素。我搜索了整个.css，但找不到:((这只是一个事实，它必须是默认css的东西。

任何人都知道是什么原因造成的 - 一些修复？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2011-03-08T16:27:17.573

你们中的任何一个`divs`都有宽度吗？给他们一个`width`, `float` **BOTH** `left`并添加`margin-right`到第一个 div。

确保您的宽度 + 边距加起来不超过周围的 div。例如，如果您周围的 div 是`600px`您的框，则不应超过左侧 div 上的`width:290px;`a 。`margin-left:20px;`

此外，您可以使用[Firebug](http://getfirebug.com/)或任何其他 Web 开发浏览器工具来检查样式表中的哪些样式正在影响您的 div。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-03-10T04:05:08.550

向左浮动或使用内联块。您也可以只浮动第一个左侧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-03-10T04:37:23.050

我强烈建议您（如果您还没有）下载 FireFox 并安装 Web Developer Toolbar 插件。这个插件非常适合追踪这样的问题。当您查看有问题的页面时，在此工具栏的 CSS 部分下，您可以选择“查看样式信息”。然后只需单击页面上存在问题的 div。在左侧，您应该会看到一个小窗口弹出，其中显示了影响这些 div 的所有样式以及它们来自什么 css 源。使用 CSS 如果您依靠“错误”修复来修复不是真正错误的事情，那么在大多数情况下，您只会在以后引起更多头痛。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-05-26T09:20:13.167

我认为问题可能出在代码中的其他部分。我可以建议清除浮动：

html:

```
<div class="clear"></div> 
```

CSS：

```
.clear {
     clear: both;
} 
```

您发布的代码可以正常工作，但我希望您有更多的 div 或容器或某处弄乱它的东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-01-22T01:40:25.640

总宽度 = margin_width + border_width + padding_width+ 框的宽度 +（其他框相同）。

确保为两个浮动设备定义了宽度。最好的方法是按 F12 调试代码。您可以使用 FireFox、IE、Chrome 或 Safari，但通常您必须自己启用此选项。

# c++ - 检查正确输入和/或产生错误并重新输入的最有效方法

> ID：10260408
> 
> 赞同：1
> 
> 时间：2012-04-21T15:37:09.713
> 
> 标签：c++, input

我有一段需要大量用户输入的代码。我想确保用户输入了正确的输入类型，如果没有，提示他们输入正确的内容。

现在我可以通过包含所有可能输入的大量`if`语句来做到这一点，但我确信一定有更好、更有效的方法。我已经看到了一些可能的替代解决方案（例如`typeid`, `throw/catch`），但它们似乎在这是否是一种好的编程技术方面存在分歧。

那么解决这个问题的最佳方法是什么？

我从传入的输入中概述了我知道/需要的内容：

*   我知道用户应该输入什么类型（它们是`ints`,`doubles`或`strings`）。
*   我需要检查他们是否输入了正确的输入，如果没有提示他们输入 type 的输入`X`。
*   代码最好需要存储在函数（或模板等）中，并且适用于所有 3 种情况，因为需要执行此检查/读取的情况很多。

我还应该注意我正在使用`getline(cin,X)`，因为我的一些输入包含空格。这是我所指的代码：

```
 while(again==1){
            cout<<"Please enter student name: "<<endl;
            sName=clear_and_read<string>();
            cout<<"Please enter student ID: "<<endl;
            sID=clear_and_read<int>();
            cout<<"What course does the student study? (1)Physics etc...."<<endl;
            sCourse=clear_and_read<int>();
            cout<<"How many results would you like to enter for this student?: "<<endl;
            d=clear_and_read<int>();
            student* S1= new physics(sName,sID);  //*********
            //physics S1(sName,sID);
            if(sCourse==1){
                for(int i(0);i<d;i++){
                    string cName("Nill"); double cResult(0);int cCode(0);
                    cout<<"Please enter course "<<i+1<<" code: "<<endl;
                    cCode=clear_and_read<int>();
                    cout<<"Please enter course "<<i+1<<" title: "<<endl;
                    cName=clear_and_read<string>();;
                    cout<<"Please enter result "<<i+1<<": "<<endl;
                    cResult=clear_and_read<double>();;
                    (*S1).addresult(cName,cCode,cResult);
                }           
            }
            //allstudents.insert(pair<int,student*>(sID,S1)); //********* 
            allstudents[sID]=S1;    //THIS LINE
            cout<<"Would you like to enter another student manually? (1)Yes (2)No :"<<endl;
            again=clear_and_read<int>();;
        } 
```

目前我在哪里制作了**未完成**的模板函数`clear_and_read`，该函数将检查传入的数据是否与输入到模板中的数据相同，但我被困在如何做到这一点上。

```
template <class T> T clear_and_read(){ //NOT CORRECT YET
    string name;
    cin.ignore();//skips "enter" still in cin stream
    cin.clear();
    getline(cin,name);
    T typeoutput;

    //needs to check for valid type
        //assign name to typeoutput
    return typeoutput;
} 
```

在插入这个模板类之前，代码`sName=clear_and_read<string>();`本来就是`getline(cin,sName);`等等。

作为旁注，我所说的“相当数量的`if`语句”的意思是，在每个必需的输入之后都需要一个 if-check/else 语句。

我是不是把事情复杂化了？

希望这很清楚。

# ruby - 从字符串中设置一个常量值

> ID：10260409
> 
> 赞同：4
> 
> 时间：2012-04-21T15:37:22.663
> 
> 标签：ruby, ruby-on-rails-3

我的 Rails 应用程序中有一些域数据，我正在尝试为其创建一些常量。这是我在 Dan Chak 的 Enterprise Rails 第 7 章中遇到的。我做了以下工作：

```
G = Rating.find_by_rating_code('G') 
```

然后当我使用 Rating::G 时，会返回相应的评级记录。这很好用。我的问题是因为我有 150 个评级代码。因此，我没有为我的每个评分代码输入上述代码行，而是希望使用一些元编程来避免大量冗余代码使我的模型混乱。因此我尝试了以下方法。

```
RATINGSCODES = %w(G A AB TR P ...)

class << self
RATINGSCODES.each do |code|
code.constantize = Rating.find_by_rating_code(code)
end
end 
```

不幸的是，我遇到了一个未初始化的常量错误，无法弄清楚我哪里出错了。我是否以正确的方式接近这一点。我也尝试过使用 const_get 但这似乎也不起作用。

在下面的建议中，我也尝试过使用

```
code.const_set = Rating.find_by_rating_code(code) 
```

这产生了以下错误：

```
undefined method `const_set=' for "G":String 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-21T15:59:52.793

使用[`const_set`](http://ruby-doc.org/core-1.9.3/Module.html#method-i-const_set)：

```
class Rating
   RATINGSCODES = %w{ G A AB TR P }

   RATINGSCODES.each do |code|
     const_set code, code
   end
end
#=> ["G", "A", "AB", "TR", "P"] 

p Rating::G
#=> "G" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T15:48:14.570

如果`Rating::G`对你有用，`Raiting.const_get('G')`也会。

# android - DSR 开启。不要在 Android 上发送 DTR

> ID：10260410
> 
> 赞同：9
> 
> 时间：2012-04-21T15:37:28.243
> 
> 标签：android

在 logcat 中我看到了很多

> “DSR 已开启。请勿在 Android 上发送 DTR”。

由于互联网中断，我已将手机无线连接到我的 Mac。我也有开发模式。那是什么意思？我看过一些关于蓝牙的东西，但它已经关闭了。

DSR？DTR？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T09:09:35.507

**DSR** = 数据集就绪
**DTR** = 数据终端就绪

`<nostalgia>`这些是（硬件）流控制信号，用于打印机、调制解调器等设备之间的串行通信`</nostalgia>`。

由于您的网络共享是通过 USB 进行的，我猜想有某种正在运行的 USB 串行端口仿真器可能会生成这些日志消息。但这只是一个猜测。

# c++ - 接收动态数组或堆对象时应该使用 delete 还是 delete[] ？

> ID：10260414
> 
> 赞同：2
> 
> 时间：2012-04-21T15:37:47.510
> 
> 标签：c++, pointers, memory-management

假设我在堆上有两个项目：

```
Foo *f = new Foo;
Foo *g = new Foo[42]; 
```

假设我有一个接收`Foo`指针的函数，并且在函数中它需要执行一个`delete`：

```
void bar(Foo *p) {
    // some stuff
    delete p;
} 
```

这个函数可能会这样调用：

```
bar(f); // passing a pointer to a Foo object on the heap
bar(g); // passing a pointer to an array on the heap 
```

我认识到`delete[]`并`delete`应该分别用于释放和分配的`new[]`内存`new`；但是，由于该函数不知道其参数`p`是否分配有`new`or `new[]`，所以该函数如何正确地`delete`or `delete[]`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T15:49:24.647

听起来您对单一职责原则有疑问。

您对单个对象进行了一些处理，因此传递单个对象或数组是合理的。（为什么该处理对于第一个以外的数组元素或非动态对象也没有用？）

然后你必须释放对象。或者数组。

这里有三个不同的任务，需要三个不同的功能。

本质上，如果“函数不知道它的参数是否`p`被分配”，则该函数没有尝试解除分配的业务。如果参数在堆栈上怎么办？如果使用池分配器会怎样？`new``new[]`

此外，一旦将处理移至单独的函数，就可以轻松地为“处理然后删除单个对象”和“处理然后删除数组”创建一个函数，而不会重复（两者都调用处理组件的辅助函数）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T15:42:46.103

您不能（可移植地）检测到这一点并在函数中做正确的事情。

“解决方法”是使用`std::vector<Foo>`而不是数组，并且总是使用`delete`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-21T15:56:42.817

**解决方案 1.**从代码设计的角度来看，您可能应该完全避免这种情况，并让对象被同一类、一对创建-销毁函数或分配它的代码块删除。这样，您就知道自己没有犯任何错误。

**解决方案 2.**如果您的编译器支持它们，请使用`std::shared_ptr`lambda 函数，并根据需要为每个指针使用不同的释放器。[在此处](http://en.cppreference.com/w/cpp/memory/shared_ptr)阅读有关共享指针的信息。

```
std::shared_ptr<Foo> f(new Foo[20], [](Foo* p) { delete[] p; });
std::shared_ptr<Foo> g(new Foo); 
```

第一个`f`是指向数组的共享指针。当我创建它时，我给第一个参数一个（普通）指向数组的指针；第二个参数是一个*lambda 函数*，它接受一个`Foo* p`参数，它的主体是`{ delete[] p; }`.

默认情况下，`std::shared_ptr`用于`delete`释放内存。这就是为什么当我创建第二个时，我只给它指向对象的指针，而不指定任何自定义释放器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-21T15:54:00.187

你不能。您永远不知道指针是指向对象还是此类对象的数组。

但是，如果你真的想要一个释放函数，并且即使你正在分配一个对象，**你也能记得分配任何类似数组的东西**，那么以下用法是合法的：

```
Foo *h = new Foo[0];
Foo *f = new Foo[1];
Foo *g = new Foo[42];

void bar(Foo *p) {
    // some stuff
    delete [] p;
} 
```

但是，请记住，有时技术上可行并不意味着您应该使用它。这取决于您的用例是否将对象视为数组的特殊情况是否有意义。

更优雅的 C++ 方法是使用`std::vector`or `boost::scoped_ptr`、`boost::scoped_array`等，它们保证调用正确版本的`delete`运算符，正如它们的名称所示。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-21T15:42:26.883

你必须通过它。该函数无法在运行时确定。

请参阅[此处](https://stackoverflow.com/questions/197839/is-there-any-way-to-determine-the-size-of-a-c-array-programmatically-and-if-n)以获得很好的解释。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-04-21T15:43:08.787

由编译器供应商决定如何实现，因此属于“魔术”类别。

不过一般来说，当您使用 new[] 时，运行时会额外分配 4 个字节。然后它将数组的大小存储在这些字节中，并返回分配 + 4 个字节。释放时，它将从您传递的指针中删除 4，读取大小并使用它来决定要调用多少个析构函数等。

[您可以在C++ 常见问题解答](http://www.parashift.com/c++-faq-lite/freestore-mgmt.html#faq-16.14)中阅读更多相关信息

# css - 自定义字体嵌入不能跨浏览器工作

> ID：10260415
> 
> 赞同：0
> 
> 时间：2012-04-21T15:37:51.837
> 
> 标签：css, fonts, cross-browser, embedding

我有“Gulim”，一种自定义字体，嵌入到我的网站 mangodownload.com 中（你可以在主页上看到它，如果你看到 Arial，它在你的浏览器上不起作用。）

不幸的是，这种字体不适用于许多浏览器。

这是我的字体CSS：

```
@font-face { 
    font-family: "Gulim";
    src: url("/style/fonts/Gulim.ttf");
    src: local("Gulim"), url("/style/fonts/Gulim.ttf") format("truetype");
} 
```

关于为所有浏览器实现跨浏览器支持的任何想法？

**请注意：**我尝试过转换字体，并尝试过 FontSquirrel。我不断收到同样的信息；'字体太大'。我的*gulim.ttf*文件是 10mb。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T15:47:49.160

```
@font-face {
    font-family: 'yourfunkyfont';
    src: url('fonts/yourfunkyfont.eot');
    src: url('fonts/yourfunkyfont.svg') format('truetype'),
         url('fonts/yourfunkyfont.eot?#iefix') format('embedded-opentype'),
      url('fonts/yourfunkyfont.woff') format('woff'),
      url('fonts/yourfunkyfont.ttf') format('truetype'),
      url('fonts/yourfunkyfont.svg#yourfunkyfont') format('svg');
} 
```

仅当您在 IIS（其他网络服务器）中添加以下 MIME 类型时，这才有效：

```
.woff - application/x-font-woff
.svg - application/x-font-woff 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T15:43:26.913

除非您可以获取各种浏览器所需的各种格式的字体，否则无法跨浏览器进行此操作。要使用的[CSS](http://www.fontspring.com/blog/the-new-bulletproof-font-face-syntax)如下：

```
@font-face {
font-family: 'MyFontFamily';
src: url('myfont-webfont.eot?#iefix') format('embedded-opentype'), 
     url('myfont-webfont.woff') format('woff'), 
     url('myfont-webfont.ttf')  format('truetype'),
     url('myfont-webfont.svg#svgFontName') format('svg');
} 
```

如您所见，您需要、`eot`和格式的字体。`woff``ttf``svg`

# php - 在 WHERE 中合并两个字符串记录

> ID：10260424
> 
> 赞同：1
> 
> 时间：2012-04-21T15:39:25.573
> 
> 标签：php, mysql, database

我有两列**name**和**surname**。我想做一个搜索查询，如果用户写名字、姓氏或*两者都写，它将找到这个人。*

目前我有

```
 SELECT name, surname, id FROM users WHERE 
    (name LIKE '%".$term."%' || surname LIKE
    '%".$term."%')  AND position='0' LIMIT 5 
```

假设我有一个用户 John Lemon。如果我写*John*或我写*Lemon* ，查询会找到他。*但是，如果我写John Lemon*，它将一无所获。

是否可以使用类似于以下的语法：

```
 SELECT name, surname, id FROM users WHERE (
  name+' '+surname LIKE
 '%".$term."%')  AND position='0' LIMIT 5 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T15:41:32.050

像这样的东西？

```
SELECT name, surname, id FROM users WHERE
    name LIKE '%".$term."%'
    OR surname LIKE '%".$term."%'
    OR CONCAT(name, ' ', surname) LIKE '%".$term."%' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T15:42:22.607

使用此查询：

```
SELECT name, surname, id FROM users WHERE
CONCAT(name, ' ', surname) LIKE '%".$term."%' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T15:42:32.703

我相信你想要的是 MySQL 的[concat](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_concat)。

```
WHERE CONCAT(NAME,' ',SURNAME) LIKE '%".$term."%' 
```

# jquery - Javascript FaceBook API 返回状态类型的帖子

> ID：10260427
> 
> 赞同：0
> 
> 时间：2012-04-21T15:39:55.673
> 
> 标签：jquery, facebook-javascript-sdk

我有一个 jquery 插件，它应该从 Facebook Wall 页面获取帖子，但我只检索状态帖子，而不是墙上的所有帖子。我哪里错了？

这是我正在使用的网址：

[https://graph.facebook.com/100002102406059/feed?limit=5&access_token=123165947807355|fg-kqzZz3nBr7jvCQpAIUT3CTQY](https://graph.facebook.com/100002102406059/feed?limit=5&access_token=123165947807355|fg-kqzZz3nBr7jvCQpAIUT3CTQY)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T16:11:31.837

如果您的库使用 Facebook Graph API，它可能正在调用以下 URL：

```
https://graph.facebook.com/PAGE_ID/posts 
```

您可以在末尾将“帖子”更改为“提要”，如下所示：

```
https://graph.facebook.com/PAGE_ID/feed 
```

您可以在此处查看示例预览： [https ://developers.facebook.com/tools/explorer/?method=GET&path=19292868552%2Ffeed](https://developers.facebook.com/tools/explorer/?method=GET&path=19292868552/feed)

# php - 使用 MOD_REWRITE -> 404 在 localhost 上的 CURL（但在浏览器中很好）

> ID：10260428
> 
> 赞同：1
> 
> 时间：2012-04-21T15:39:55.683
> 
> 标签：php, mod-rewrite, curl, url-rewriting, localhost

我有一个网站托管在我的本地服务器 (http://localhost/) 上，它使用 url_rewriting。

当我使用浏览器访问页面时，没问题，它正在加载。
但是当我使用 PHP cUrl 访问相同的 url 时，我得到了 404。

**示例：**
带有 mod_rewrite 的 URL：[http://localhost/site/test](http://localhost/site/test)
真实页面：[http://localhost/site/test.php](http://localhost/site/test.php)

从 Firefox加载[http://localhost/site/test ：](http://localhost/site/test)**工作**

**使用 cUrl 加载：**

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "http://localhost/site/test");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
$output = curl_exec($ch);
curl_close($ch); 
```

$output -> 来自 apache 的 404 页面

有人知道为什么 cUrl 返回 404 消息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T17:30:07.830

原来这与 mod_rewrite 无关。
URL 中的一个目录中有一个空格，我在调用 cUrl 函数时没有对其进行编码。将所有空间替换为 %20 后，一切正常。

主题关闭。

# c++ - std::less: 错误 C2661: 'std::less<_Ty>::less' : 没有重载函数需要 2 个参数

> ID：10260430
> 
> 赞同：0
> 
> 时间：2012-04-21T15:40:05.183
> 
> 标签：c++, templates, stl, std

我对 std::less 有一个奇怪的问题。

```
indexedpriorityq.hpp(21): error C2661: 'std::less<_Ty>::less' : no overloaded function takes 2 arguments
1>          with
1>          [
1>              _Ty=float
1>          ] 
```

但这不就是它应该做的吗？

这是我的一些代码：

```
template<class KeyType, class binary_predicate = std::less<KeyType> >
class IndexedPriorityQ
{
 private:
    typedef typename std::vector<KeyType> KEYLIST;
    KEYLIST& m_Keys_V;

    [...]
};

template<class KeyType, class binary_predicate>
void IndexedPriorityQ<KeyType, binary_predicate>::
    ReorderUpwards(int size)
{
    while( (size>1) && 
        (binary_predicate(m_Keys_V[m_Heap_V[size]], m_Keys_V[m_Heap_V[size/2]])) //breaks here
         )
    {
        Swap(size/2, size);
        size /= 2;
    }
} 
```

究竟是什么导致了错误，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T15:42:47.517

`std::less`是一个仿函数，它的*构造函数*接受 0 个参数。也就是说，您可以像这样创建对象：

```
std::less<Key> a; 
```

然后，您可以像这样使用它：

```
if(a(x,y)) ... 
```

甚至

```
if(std::less<Key>()(x,y)) ... 
```

有些函子的构造函数接受超过 0 个参数，例如`std::bind1st`. 规则是，如果函子是二进制的，则它`operator()`接受 2 个参数。

# c++ - copy constructor...what is wrong?

> ID：10260434
> 
> 赞同：0
> 
> 时间：2012-04-21T15:40:49.020
> 
> 标签：c++

So my problem is this...when I am trying to allocate memory to a pointer, it fails.

This is my MatrixClass definition..

```
class MatrixClass
{
public:
    MatrixClass(int m, int n);
    MatrixClass(void);
    virtual ~MatrixClass(void);
    double getRead(int num1, int num2) const;
    double& getReadWrite(int num3, int num4);
    void set(int i,int j,double value);//set value at i,j to value
    MatrixClass(const MatrixClass &rhs);
    void assign(int M,int N);
    MatrixClass sum1(const MatrixClass& rhs) const;
    MatrixClass operator+(const MatrixClass& rhs);//overloading the + operator 
    MatrixClass operator-();
private:
    double* dataptr;
    int M;
    int N;
}; 
```

I am trying to do this..

```
MatrixClass BB;
BB = A + B; 
```

So here is my overloaded + function..

```
MatrixClass MatrixClass::operator +(const MatrixClass &rhs)
{
    MatrixClass temp;
    //temp.M = this->M + rhs.M;
    //temp.N = this->N + rhs.N;
    for(int i = 0;i < M;i++)
    {
        for(int j = 0; j<N;j++)
        {
            temp.dataptr[i * N + j] = this->getReadWrite(i,j) + rhs.dataptr[i*N+j];
        }
    }   
    return temp;
}//end operator + 
```

Once temp returns...it calls the copy constructor...passing temp as 'rhs' and 'this' would refer to 'BB'? (Am I right in thinking this?)

```
MatrixClass::MatrixClass(const MatrixClass &rhs)//copy constructor
{
    this->M = rhs.M;
    this->N = rhs.N;
    dataptr = 0;
    if(rhs.dataptr != 0)
    {
        dataptr = new double[M * N];//allocate memory for the new object being assigned to...
        // the line here where I try to allocate memory gives me an error.....Am I right in
        //thinking that this would be assigning memory to dataptr of 'BB'?? Values are assigned to //'M' and 'N' fine....
        int num = sizeof(double);
        memcpy(this->dataptr,rhs.dataptr,M*N*sizeof(double));   
    }
    else
    {
        this->dataptr = 0;
    }
}//end copy constructor 
```

Also the error that i get is this... 'Unhandled exception at 0x75a0b727 in assignment.exe: Microsoft C++ exception: std::bad_alloc at memory location 0x002af924..'

So basically the qestion I am asking is..why the hell is is the line where I am trying to allocate memory to 'dataptr' in the copy constructor giving me problems..it only does this when calling the copy constructor from the return value 'temp'..

Thanks!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T15:49:43.900

Short answer: you have not implemented [Rule of Three](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three) properly. [In C++11, Rule of Five](https://stackoverflow.com/questions/4782757/rule-of-three-becomes-rule-of-five-with-c11).

Long answer: you have not implemented `operator=`. The compiler generated one is not enough for your case.

Apart from that my guess is that your default constructor doesn't allocate memory for `dataptr`. If so, then you're using `dataptr` in `operator+` without even allocating memory for it. That is the reason why your program crashes. Even if the default constructor allocates memory, the problem is still there as the value of `rhs.M` and `rhs.N` may be different from what you assume in the default constructor (which is, as you said, `4` and `5` respectively).

So allocate memory for `dataptr` in `operator+`. Also, before allocation, you've to deallocate the memory which it may point to, and you also need to set `M` and `N` to the values of `rhs.M` and `rhs.N` respectively.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T17:24:29.670

不，詹姆斯，你错了，当`operator+`返回时，复制构造函数将被调用以将局部变量`temp`转换为赋值运算符范围内的临时匿名对象。在复制构造函数中，`this`会引用这个临时变量，而不是BB。

因为LHS已经存在，返回时不会再“构造” `operator+`，而是“赋值”，所以需要重载`operator=`。（有关更多详细信息，请参见[此处](http://www.learncpp.com/cpp-tutorial/911-the-copy-constructor-and-overloading-the-assignment-operator/)`operator=`。）默认设置只是按位复制，因此如果您没有重载 operator=，则`dataptr`当匿名临时对象被销毁时，它将在匿名临时对象的析构函数中被释放（我们希望）超出范围（在复制后立即），BB 将指向已释放的内存。您还将泄漏已在 BB 中分配的任何内存，因为 BB 在分配之前不会被销毁。BB`dataptr`会泄漏，而临时对象`dataptr`会被释放两次。

因此，尽管最终分配和复制内存 3 次有点糟糕，但为了使 + 和 = 在所有情况下都有效，您需要执行以下操作：

*   `operator+`更改为`MatrixClass temp;`正确分配和解除分配`MatrixClass temp(rhs.M, rhs.N);`。`temp.dataptr`
*   正如您所做的那样，在复制构造函数中分配新内存`dataptr`并将其复制过来。
*   重载`operator=`，以便它首先检查自分配`(this == &rhs)`，如果不是自分配，则释放现有的`dataptr`，然后分配一个新的并复制`rhs`.

# html - Css 多列，牢不可破的内容

> ID：10260440
> 
> 赞同：4
> 
> 时间：2012-04-21T15:41:48.943
> 
> 标签：html, css

我想要一个两列布局的帖子。它应该是平衡的，但如果一个比另一个稍大一点是可以接受的。重要的是，帖子不应该分成两半。

具体问题：（帖子文本应保持在一列。） [http://www.magyarregeszet.hu/?page_id=279](http://www.magyarregeszet.hu/?page_id=279)

```
#main-column-multicol2 {
-moz-column-count:2; /* Firefox */
-webkit-column-count:2; /* Safari and Chrome */
column-count:2;
-moz-column-gap:20px; /* Firefox */
-webkit-column-gap:20px; /* Safari and Chrome */
column-gap:20px;
column-fill: auto;

padding-top:20px;
padding-bottom:10px;
padding-right:10px;
padding-left:10px;
} 
```

有没有办法制作牢不可破的 div、盒子等？我发现 column-break-inside: Avoid-column; 但不成功。如何正确使用它？

编辑：后包装的结构是这样的。例如，a column-break-inside 适用于段落，但我希望它适用于最外面的 div。

```
<div class="unbreakable-post">
<header class="opacity box">
<h2>...</h2>
</header>
<hr />
<div class="entry">
...
</div>
</div> 
```

谢谢，

西罗

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-21T15:50:56.100

我已经成功了

```
.post {
  -webkit-column-break-inside: avoid;
  -moz-column-break-inside: avoid;
  column-break-inside: avoid;
} 
```

试试看。

# entity-framework - Entity Framework - could not be set to a 'String' value. You must set this property to a non-null value of type 'Boolean'

> ID：10260441
> 
> 赞同：0
> 
> 时间：2012-04-21T15:42:07.007
> 
> 标签：entity-framework, wcf-ria-services

I have a Sql View that we are using with Entity Framework and Ria Services. When I get the view

```
var _entity = _context.DepthChartViews; 
```

the _entity is always empty and I get this error.

The 'IsPrimary' property on 'DepthChartView' could not be set to a 'String' value. You must set this property to a non-null value of type 'Boolean'.

My view has this set as a bool - my data is either a 1 or a 0 - i dont have this being set anywhere in code - it is always a true / false.

Been debugging this for a bit and cannot seem to find solution.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T04:40:41.143

通过 Visual Studio 中的 GUI 工具或在 .edmx 文件 XML 本身中查找 .edmx 中的 IsPrimary 属性。您可以将 GUI 视图设置为还显示实体中的类型和属性名称：这是一个右键单击选项。听起来实体模型出于某种原因认为该属性是一个字符串，因此映射被搞砸了……您需要告诉它它是一个不可为空的布尔值。

# java - HashMap不同的hashcode返回不同 的值？爪哇

> ID：10260448
> 
> 赞同：1
> 
> 时间：2012-04-21T15:42:40.413
> 
> 标签：java, hashmap

我有两个对象的哈希图，但它似乎返回不同的值，因为哈希码不同。前任。

```
HashMap<HashMapTest, String> newMap = new HashMap<HashMapTest, String>();
    newMap.put(new HashMapTest("test"), "line");
    System.out.println(newMap.get(new HashMapTest("test"))); 
```

当我将它放入哈希图中和从哈希图中获取它时，哈希码是不同的。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-21T15:46:37.287

您是否提供了该`hashCode()`方法的自定义实现`HashMapTest`？我猜不是，这是`hashCode()`继承自的默认行为`java.lang.Object`（您实际上正在使用两个不同的对象。）看看[这个问题](https://stackoverflow.com/questions/27581/overriding-equals-and-hashcode-in-java)为您的类提供正确`hashCode/equals`的实现。

# git - How to specify a git tag when in the configuration of the SCM Maven plugin?

> ID：10260449
> 
> 赞同：9
> 
> 时间：2012-04-21T15:42:45.980
> 
> 标签：git, maven, maven-3

As a part of my project's configuration, I'm trying to checkout a specific tag out of a GitHub repository. Currently the plugin configuration is as follows:

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-scm-plugin</artifactId>
            <executions>
                <execution><!-- checkout the msgppack-rpc project -->
                    <id>msgpack-rpc-checkout</id>
                    <phase>validate</phase>
                    <goals>
                        <goal>checkout</goal>
                    </goals>
                    <configuration>
                        <goals>checkout</goals>
                        <connectionUrl>scm:git:https://github.com/msgpack/msgpack-rpc.git</connectionUrl>
                        <tag>java-0.6.0</tag>
                        <checkoutDirectory>repoCode/msgpack-rpc</checkoutDirectory>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

However, the "tag" element seems to be ignored by the Git SCM provider. I've also tried to put the tag directly in the URL, like e.g. so:

`scm:git:https://github.com/msgpack/msgpack-rpc.git/refs/tags/java-0.6.0`

Unfortunately, this, and other permutations of this format produce errors. I have no other ideas, and I've failed to find an example for this use case anywhere.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T16:21:31.970

[结帐目标](http://maven.apache.org/scm/maven-scm-plugin/checkout-mojo.html)没有将元素`<tag>`列为参数。看起来您像这样指定标签信息：

```
<scmVersionType>tag</scmVersionType>
<scmVersion>java-0.6.0</scmVersion> 
```

# java - POST login into a website. java-android

> ID：10260454
> 
> 赞同：1
> 
> 时间：2012-04-21T15:42:52.970
> 
> 标签：java, android, session, post, login

I'm trying to login into a website using java and jsoup. But every time I execute my post request I get an IOExeption. The website is www.seriecanal.com. I would appreciate it if someone could review the html form and tell me if I am creating the name-value pairs correctly and if there are any other obvious mistakes with the login. Here's my code:

```
public HttpResponse postData() 
{
    // Create a new HttpClient and Post Header
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("http://seriecanal.com/index.php?page=member");

    try 
    {

        // Add your data
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);

        //Get value of input "Regresa_web" because it changes each time i access the site
        String Codigo_Fuente ="";
        URL url = new URL("http://seriecanal.com/");
        URLConnection conn = url.openConnection();
        BufferedReader rd = new BufferedReader(new InputStreamReader(conn.getInputStream()));
        String line = "";
        while ((line = rd.readLine()) != null) 
        {
            Codigo_Fuente= Codigo_Fuente+line;
        }
        Document Doc = Jsoup.parse(Codigo_Fuente);
        Element Regresa_WEb = Doc.getElementById("regresa_web");
        String Valor_Regresa_Web = Regresa_WEb.attr("value");

        //create name value pairs of the form
        nameValuePairs.add(new BasicNameValuePair("_UserName", "userontheweb"));
        nameValuePairs.add(new BasicNameValuePair("_Pwd", "123456789"));
        nameValuePairs.add(new BasicNameValuePair("btnLogin", "Ingresar"));
        nameValuePairs.add(new BasicNameValuePair("_submit_check", "1"));
        nameValuePairs.add(new BasicNameValuePair("remember", "ON"));
        nameValuePairs.add(new BasicNameValuePair("regresa_web", Valor_Regresa_Web));
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        // Execute HTTP Post Request
        HttpResponse Response = httpclient.execute(httppost);
        return Response;

    } 
    catch (ClientProtocolException e) 
    {           
        return null;
    } 
    catch (IOException e) 
    {       
        Log.i("ERROR", e.toString());
        e.printStackTrace();
        return null;
    }
} 
```

Stack:

```
04-21 13:42:04.206: D/dalvikvm(324): GC freed 15163 objects / 721152 bytes in 153ms
04-21 13:42:08.026: I/Resources(324): Loaded time zone names for en_US in 1863ms.
04-21 13:42:23.816: I/global(324): Default buffer size used in BufferedReader constructor. It would be better to be explicit if an 8k-char buffer is required.
04-21 13:42:25.696: D/dalvikvm(324): GC freed 21866 objects / 1346160 bytes in 168ms 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T20:37:56.537

如果您使用 fiddler 或 firebug，您可以询问发送的实际参数。当我这样做时，这就是我所看到的

_submit_check=1

btnLogin=Ingresar

密码=测试

记住=开

用户名=测试

看起来您发送了错误的参数。表单输入名称确实与发送的名称不同，例如_UserName，但您永远不知道javascript 是否绑定到该事件并且那里还有一些额外的魔法。结果我总是使用萤火虫/提琴手。

# java - 如何将键和鼠标事件发送到 Java 小程序？

> ID：10260456
> 
> 赞同：1
> 
> 时间：2012-04-21T15:43:02.237
> 
> 标签：java, c++, winapi, visual-c++, applet

我正在尝试从 FireFox 窗口控制一些 Java 游戏。如何将键和鼠标事件发送到该 Java 小程序？

如果这很重要，我正在使用 Windows XP。

**编辑：**即使我在这里有标签，我也不想用 Java 来做这件事。c++ 解决方案将是最佳的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T15:48:05.853

您可以尝试使用[Robot](http://docs.oracle.com/javase/6/docs/api/java/awt/Robot.html)，但这在 FireFox 中可能不起作用。您还可以使用 abstractbutton.doClick() 之类的方法

如果 Robot 不起作用，您可以通过在组件上设置文本来合成关键事件，以及您可以使用 doClick() 和 requestFocus() 的鼠标事件

如果这些都不起作用，您也许可以使用 javascript 和 html 页面来实现您的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T15:50:36.597

以下是适用于击键的内容：

这两个动作的推荐方法都是使用[SendInput](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646310%28v=vs.85%29.aspx) 这个网站非常适合开始[了解 sendinput](http://alala666888.wordpress.com/2010/09/17/simulate-mouse-event-using-sendinput-and-setcursorpos/)

要查找 windows 目标，请使用[Spy++](http://msdn.microsoft.com/en-us/library/aa264396%28v=vs.60%29.aspx)，[文档](http://msdn.microsoft.com/en-us/library/dd460760.aspx)

但我确实有以下其他示例：

这里的示例是使用[postmessage](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644944%28v=vs.85%29.aspx)的记事本。

```
#include "TCHAR.h"
#include "Windows.h"

int _tmain(int argc, _TCHAR* argv[])
{
    HWND hwndWindowTarget;
    HWND hwndWindowNotepad = FindWindow(NULL, L"Untitled - Notepad");
    if (hwndWindowNotepad)
    {
        // Find the target Edit window within Notepad.
        hwndWindowTarget = FindWindowEx(hwndWindowNotepad, NULL, L"Edit", NULL);
        if (hwndWindowTarget) {
            PostMessage(hwndWindowTarget, WM_CHAR, 'G', 0);
        }
    }

    return 0;
} 
```

您可能还想查看[windows hooks](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632589%28v=vs.85%29.aspx)，它可以发送鼠标输入或[User32 mouse_event](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646260%28v=vs.85%29.aspx)：

```
[DllImport("User32.Dll")]
private static extern void mouse_event(UInt32 dwFlags, int dx, int dy, UInt32 dwData, int dwExtraInfo);

[DllImport("user32.dll")]
static extern bool SetCursorPos(int X, int Y); 

public enum MouseEventFlags
{
    LEFTDOWN = 0x00000002,
    LEFTUP = 0x00000004,
    MIDDLEDOWN = 0x00000020,
    MIDDLEUP = 0x00000040,
    MOVE = 0x00000001,
    ABSOLUTE = 0x00008000,
    RIGHTDOWN = 0x00000008,
    RIGHTUP = 0x00000010
}

public static void SendLeftClick(int X, int Y)
{
    mouse_event((uint)MouseEventFlags.LEFTDOWN, 0, 0, 0, 0);
    mouse_event((uint)MouseEventFlags.LEFTUP, 0, 0, 0, 0);
} 
```

# android - Where is fast and simple Views for Android?

> ID：10260458
> 
> 赞同：0
> 
> 时间：2012-04-21T15:43:24.000
> 
> 标签：android, android-layout

For example, TextView is extremely heavy and functional, but in most cases we need only "LabelView" : one line, ellipsize and alignment. We don't need html,multiline etc.

Do exist third-party libraries with lightweight views?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T17:53:07.383

> TextView 非常重

欢迎您发表意见。

> 是否存在具有轻量级视图的第三方库？

在渲染文本方面没有什么比`TextView`.

> 方法 TextView.onMeasure 消耗约 30% 的 cpu 使用率（在我的情况下）

这是一个毫无意义的统计数据，任何具有基本算术知识的人都应该认识到这一点。重要的是诸如 之类的方法所消耗的实际**时间**`onMeasure()`，大约为微秒。

> 为什么 SDK 中不存在简单标签？

它被称为`TextView`。

> 我看到的唯一方法是基于 Canvas.drawText 创建自定义视图

这几乎是什么`TextView`。毕竟，您将需要执行大部分相同的测量`onMeasure()`逻辑`TextView`。

话虽如此，欢迎您创建自己的`LabelView`，按照您的意愿做事。

# java - WSSecurityEngine 说在回调期间未提供密码，即使提供了密码

> ID：10260463
> 
> 赞同：3
> 
> 时间：2012-04-21T15:43:42.860
> 
> 标签：java, soap, client, axis, ws-security

我正在为 Web 服务创建客户端。我不断收到以下错误：

```
AxisFault
    faultCode: {http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd}InvalidSecurity
    faultSubcode:
    faultString:
        Security Data : General security error (WSSecurityEngine: Callback supplied no password for: TestMerchant)
    faultActor: 
    faultNode: 
    faultDetail: {http://xml.apache.org/axis/}
    stackTrace:
        Security Data : General security error (WSSecurityEngine: Callback supplied no password for: TestMerchant) 
```

这是我这里的环境：

*   Intellij IDEA IDE
*   阿帕奇轴
*   阿帕奇 WSS4J 1.5.1
*   Apache XML 安全 1.4.0
*   JDK 1.6
*   最大 OS X

尽管在 Internet 上搜索提供了很多关于如何通过 XML 配置将安全标头添加到请求中的示例，但我的要求是通过程序动态地执行此操作。所以这是我的代码：

```
public class AxisClient implements CallbackHandler {

    ServerEnvironment environment;

    AxisClient(ServerEnvironment environment) {
        this.environment = environment;
    }

    public enum ServerEnvironment {
        LIVE("https://ics2ws.ic3.com/commerce/1.x/transactionProcessor"),
        TEST("https://ics2wstest.ic3.com/commerce/1.x/transactionProcessor");

        String url;

        ServerEnvironment (String url) {
            this.url = url;
        }

        public String getUrl() {
            return url;
        }
    }

    public enum Merchant {
        TestMerchant ("testpassword");

        private String transactionKey;

        Merchant(String transactionKey) {
            this.transactionKey = transactionKey;
        }

        public String getTransactionKey() {
            return transactionKey;
        }
    }

    public static void main(String[] argv) {
        String ani = "7162502800";
        String zipCode = "14221";
        String ccNum ="5555555555554444";
        String expMonth = "01";
        String expYear = "15";
        String cvv = "123";
        String unitPrice = "9.99";
        String qty = "2";

        try {
            new AxisClient(ServerEnvironment.TEST).doAuth(Merchant.TestMerchant, ani, zipCode, ccNum, expMonth, expYear, cvv, String.valueOf(new Date().getTime()), unitPrice, qty);
        }
        catch (Exception e) {
            e.printStackTrace();
        }
    }

    public Boolean doAuth(Merchant merchant, String ani, String zipCode, String ccNum, String expMonth, String expYear, String cvv, String id, String unitPrice, String qty) throws Exception {
        Boolean result = false;

        RequestMessage request;
        BillTo billTo;
        Card card;
        PurchaseTotals purchaseTotals;
        Item item;
        Item[] items;
        ReplyMessage reply;

        try {
            // billing info
            billTo = new BillTo();
            billTo.setPhoneNumber(ani);
            billTo.setPostalCode(zipCode);

            // card info
            card = new Card();
            card.setAccountNumber(ccNum);
            card.setExpirationMonth(new BigInteger(expMonth));
            card.setExpirationYear(new BigInteger(expYear));
            card.setCvNumber(cvv);

            // currency info
            purchaseTotals = new PurchaseTotals();
            purchaseTotals.setCurrency("USD");

            // item
            item = new Item();
            item.setId(new BigInteger(id));
            item.setUnitPrice(unitPrice);
            item.setQuantity(new BigInteger(qty));

            // add item to items array
            items = new Item[1];
            items[0] = item;

            // create our request
            request = new RequestMessage();
            request.setMerchantID(merchant.toString());
            request.setCcAuthService(new CCAuthService());
            request.getCcAuthService().setRun("true");

            // add request specific params
            request.setBillTo(billTo);
            request.setCard(card);
            request.setPurchaseTotals(purchaseTotals);
            request.setItem(items);

            reply = post(merchant, request);

            if (reply != null) {
                System.out.println(ReflectionToStringBuilder.toString(reply, ToStringStyle.MULTI_LINE_STYLE));
            }
        }
        catch (Exception e) {
            throw e;
        }

        return result;
    }

    public EngineConfiguration createConfigurationWithSecurityHeaders(Merchant merchant) throws Exception {
        SimpleProvider result;

        Handler securityHandler;
        SimpleChain requestHandler;
        SimpleChain responseHandler;
        Handler pivot;
        Handler transport;

        try {
            result = new SimpleProvider();

            securityHandler = new WSDoAllSender();
            securityHandler.setOption(WSHandlerConstants.ACTION, WSHandlerConstants.USERNAME_TOKEN);
            securityHandler.setOption(WSHandlerConstants.PASSWORD_TYPE, WSConstants.PASSWORD_TEXT);
            securityHandler.setOption(WSHandlerConstants.PW_CALLBACK_REF, this);
            securityHandler.setOption(WSHandlerConstants.USER, merchant.toString());
            securityHandler.setOption(WSHandlerConstants.MUST_UNDERSTAND, "false");

            requestHandler = new SimpleChain();
            requestHandler.addHandler(securityHandler);

            responseHandler = new SimpleChain();
            responseHandler.addHandler(securityHandler);

            pivot = new HTTPSender();

            transport = new SimpleTargetedChain(requestHandler, pivot, responseHandler);

            result.deployTransport(HTTPTransport.DEFAULT_TRANSPORT_NAME, transport);
        }
        catch (Exception e) {
            throw e;
        }

        return result;
    }

    public ReplyMessage post (Merchant merchant, RequestMessage request) throws Exception {
        ReplyMessage result;

        TransactionProcessorLocator locator;
        URL endPoint;
        ITransactionProcessorStub stub;
        EngineConfiguration configuration;

        try {
            locator = new TransactionProcessorLocator();

            // use client config
            configuration = createConfigurationWithSecurityHeaders(merchant);
            locator.setEngineConfiguration(configuration);
            locator.setEngine(new org.apache.axis.client.AxisClient(configuration));

            endPoint = new URL(environment.getUrl());

            stub = (ITransactionProcessorStub) locator.getportXML(endPoint);
            stub._setProperty(WSHandlerConstants.USER, request.getMerchantID());
            stub._setProperty(WSHandlerConstants.ACTION, WSHandlerConstants.USERNAME_TOKEN);
            stub._setProperty(WSHandlerConstants.PASSWORD_TYPE, WSConstants.PASSWORD_TEXT);
            stub._setProperty(WSHandlerConstants.PW_CALLBACK_REF, this);
            stub._setProperty(WSHandlerConstants.MUST_UNDERSTAND, "false");

            result = stub.runTransaction(request);
        }
        catch (Exception e) {
            throw e;
        }

        return result;
    }

    @Override
    public void handle(Callback[] callbacks) throws IOException, UnsupportedCallbackException {

        for (Callback callback : callbacks) {

            System.out.println(ReflectionToStringBuilder.toString(callback, ToStringStyle.MULTI_LINE_STYLE));

            if (callback instanceof WSPasswordCallback) {

                WSPasswordCallback passwordCallback = (WSPasswordCallback) callback;

                switch (Merchant.valueOf(passwordCallback.getIdentifer())) {

                    case TestMerchant:
                        passwordCallback.setPassword(Merchant.TestMerchant.getTransactionKey());
                        System.out.println(ReflectionToStringBuilder.toString(passwordCallback, ToStringStyle.MULTI_LINE_STYLE));
                        break;

                    default:
                        throw new UnsupportedCallbackException(callback, "Unrecognized prompt!");
                }
            }
            else {
                throw new UnsupportedCallbackException(callback, "Unrecognized callback!");
            }
        }
    }
} 
```

从上面可以看出，我的类实现了 CallbackHandler，并且我覆盖了为 WSPasswordCallback 提供密码的 handle()。

这是我第一次收到回调时打印语句的输出：

```
org.apache.ws.security.WSPasswordCallback@50c713d2[
  identifier=TestMerchant
  password=<null>
  key=<null>
  usage=2
  passwordType=<null>
] 
```

这是设置密码后的输出：

```
org.apache.ws.security.WSPasswordCallback@50c713d2[
  identifier=TestMerchant
  password=testpassword
  key=<null>
  usage=2
  passwordType=<null>
] 
```

所以我不太确定为什么我不断收到该错误消息。解决此问题的任何帮助将不胜感激。

也欢迎提出不同方法（axis2，cxf）的建议。

如果有任何帮助，这是我的完整堆栈跟踪：

```
AxisFault
 faultCode: {http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd}InvalidSecurity
 faultSubcode: 
 faultString: 
Security Data : General security error (WSSecurityEngine: Callback supplied no password for: TestMerchant)
General security error (WSSecurityEngine: Callback supplied no password for: TestMerchant)

 faultActor: 
 faultNode: 
 faultDetail: 
    {http://xml.apache.org/axis/}stackTrace:
Security Data : General security error (WSSecurityEngine: Callback supplied no password for: TestMerchant)
General security error (WSSecurityEngine: Callback supplied no password for: TestMerchant)

    at org.apache.axis.message.SOAPFaultBuilder.createFault(SOAPFaultBuilder.java:222)
    at org.apache.axis.message.SOAPFaultBuilder.endElement(SOAPFaultBuilder.java:129)
    at org.apache.axis.encoding.DeserializationContext.endElement(DeserializationContext.java:1087)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.endElement(AbstractSAXParser.java:601)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanEndElement(XMLDocumentFragmentScannerImpl.java:1782)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2939)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:648)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:140)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:511)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:808)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:737)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:119)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1205)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:522)
    at javax.xml.parsers.SAXParser.parse(SAXParser.java:395)
    at org.apache.axis.encoding.DeserializationContext.parse(DeserializationContext.java:227)
    at org.apache.axis.SOAPPart.getAsSOAPEnvelope(SOAPPart.java:696)
    at org.apache.axis.Message.getSOAPEnvelope(Message.java:435)
    at org.apache.axis.handlers.soap.MustUnderstandChecker.invoke(MustUnderstandChecker.java:62)
    at org.apache.axis.client.AxisClient.invoke(AxisClient.java:206)
    at org.apache.axis.client.Call.invokeEngine(Call.java:2784)
    at org.apache.axis.client.Call.invoke(Call.java:2767)
    at org.apache.axis.client.Call.invoke(Call.java:2443)
    at org.apache.axis.client.Call.invoke(Call.java:2366)
    at org.apache.axis.client.Call.invoke(Call.java:1812)
    at itg.cybersource.axis.ITransactionProcessorStub.runTransaction(ITransactionProcessorStub.java:1284)
    at itg.AxisClient.post(AxisClient.java:208)
    at itg.AxisClient.doAuth(AxisClient.java:132)
    at itg.AxisClient.main(AxisClient.java:75)

    {http://xml.apache.org/axis/}hostname:C02GD302DRJL.local

Security Data : General security error (WSSecurityEngine: Callback supplied no password for: TestMerchant)
General security error (WSSecurityEngine: Callback supplied no password for: TestMerchant)

    at org.apache.axis.message.SOAPFaultBuilder.createFault(SOAPFaultBuilder.java:222)
    at org.apache.axis.message.SOAPFaultBuilder.endElement(SOAPFaultBuilder.java:129)
    at org.apache.axis.encoding.DeserializationContext.endElement(DeserializationContext.java:1087)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.endElement(AbstractSAXParser.java:601)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanEndElement(XMLDocumentFragmentScannerImpl.java:1782)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2939)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:648)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:140)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:511)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:808)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:737)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:119)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1205)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:522)
    at javax.xml.parsers.SAXParser.parse(SAXParser.java:395)
    at org.apache.axis.encoding.DeserializationContext.parse(DeserializationContext.java:227)
    at org.apache.axis.SOAPPart.getAsSOAPEnvelope(SOAPPart.java:696)
    at org.apache.axis.Message.getSOAPEnvelope(Message.java:435)
    at org.apache.axis.handlers.soap.MustUnderstandChecker.invoke(MustUnderstandChecker.java:62)
    at org.apache.axis.client.AxisClient.invoke(AxisClient.java:206)
    at org.apache.axis.client.Call.invokeEngine(Call.java:2784)
    at org.apache.axis.client.Call.invoke(Call.java:2767)
    at org.apache.axis.client.Call.invoke(Call.java:2443)
    at org.apache.axis.client.Call.invoke(Call.java:2366)
    at org.apache.axis.client.Call.invoke(Call.java:1812)
    at itg.cybersource.axis.ITransactionProcessorStub.runTransaction(ITransactionProcessorStub.java:1284)
    at itg.AxisClient.post(AxisClient.java:208)
    at itg.AxisClient.doAuth(AxisClient.java:132)
    at itg.AxisClient.main(AxisClient.java:75) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T04:17:26.157

经过很多天尝试了很多不同的事情，我终于找到了问题的答案。说说键盘和椅子之间的问题！！！！！！

因此，事不宜迟，这就是问题所在：

```
securityHandler.setOption(WSHandlerConstants.PASSWORD_TYPE, WSConstants.PASSWORD_TEXT); 
```

现在`WSConstants.PASSWORD_TEXT`实际上等于`"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText"`. 我必须真正使用的是`WSConstants.PW_TEXT`which 等于`"PasswordText"`which 正是我在代码中需要的。一旦我做出改变，一切都很好。

与流行的看法相反，您可以完全以编程方式完成所有这些工作。您不需要配置 WSDD xml 来拦截消息并在 SOAP 标头中处理 WS-Security。为了整理松散的结尾，修改后的方法如下所示：

```
public EngineConfiguration createConfigurationWithSecurityHeaders(Merchant merchant) throws Exception {
    SimpleProvider result;

    Handler securityHandler;
    SimpleChain requestHandler;
    SimpleChain responseHandler;
    Handler pivot;
    Handler transport;

    try {
        result = new SimpleProvider();

        securityHandler = new WSDoAllSender();
        securityHandler.setOption(WSHandlerConstants.ACTION, WSHandlerConstants.USERNAME_TOKEN);
        securityHandler.setOption(WSHandlerConstants.PASSWORD_TYPE, WSConstants.PW_TEXT);
        securityHandler.setOption(WSHandlerConstants.USER, merchant.toString());
        securityHandler.setOption(WSHandlerConstants.MUST_UNDERSTAND, "false");

        requestHandler = new SimpleChain();
        requestHandler.addHandler(securityHandler);

        responseHandler = new SimpleChain();
        responseHandler.addHandler(securityHandler);

        pivot = new HTTPSender();

        transport = new SimpleTargetedChain(requestHandler, pivot, responseHandler);

        result.deployTransport(HTTPTransport.DEFAULT_TRANSPORT_NAME, transport);
    }
    catch (Exception e) {
        throw e;
    }

    return result;
}

public ReplyMessage post (Merchant merchant, RequestMessage request) throws Exception {
    ReplyMessage result;

    TransactionProcessorLocator locator;
    URL endPoint;
    ITransactionProcessorStub stub;
    EngineConfiguration configuration;

    try {
        locator = new TransactionProcessorLocator();

        // use client config
        configuration = createConfigurationWithSecurityHeaders(merchant);
        locator.setEngineConfiguration(configuration);
        locator.setEngine(new org.apache.axis.client.AxisClient(configuration));

        endPoint = new URL(environment.getUrl());

        stub = (ITransactionProcessorStub) locator.getportXML(endPoint);
        stub._setProperty(WSHandlerConstants.PW_CALLBACK_REF, this);

        result = stub.runTransaction(request);
    }
    catch (Exception e) {
        throw e;
    }

    return result;
} 
```

一旦进行了这些修改，您的客户端就可以工作了。请记住，上面的一些设置特定于我正在集成的服务。您可能需要调整这些以适应您的集成，这可能需要一些试验和错误。

再次感谢所有在 SO 中发表知识渊博的文章的人，使像我这样的用户能够解决我们不时遇到的问题。

# c++ - 模拟整个库

> ID：10260464
> 
> 赞同：5
> 
> 时间：2012-04-21T15:43:46.003
> 
> 标签：c++, mocking, boost-asio, googletest, googlemock

我正在开发使用`boost::asio`. 为了测试它，我需要从这个库中模拟一组类。我正在使用 Google Mock，它允许模拟虚拟方法。通常（且乏味）的过程是为我需要使用的每个类编写一个接口。

另一方面，Google Mock Cookbook 描述了模拟非虚拟方法的另一种方法：使用模板。我的问题是我可能需要同时模拟几个类（所以直接使用模板是行不通的）。于是我想：为什么不用两级模板呢？我想出了以下解决方案：

```
// Classes to be mocked.

class RealA
{
public:
    void a() { cout << "RealA::a()" << endl; };
};

class RealB
{
public:
    void b() { cout << "RealB::b()" << endl; };
};

// Mock classes.

class MockA
{
public:
    void a() { cout << "MockA::a()" << endl; };
};

class MockB
{
public:
    void b() { cout << "MockB::b()" << endl; };
};

template<class ABFactory>
class Program
{
public:
    void setFactory(ABFactory* factory) { factory = factory; }
    void useA() { typename ABFactory::A* a = factory->createA(); a->a(); delete a; }
    void useB() { typename ABFactory::B b; b.b(); }

private:
    ABFactory* factory;
};

template<class ParamA, class ParamB>
class TABFactory
{
public:
    typedef ParamA A;
    typedef ParamB B;
    A* createA() { return new A; };
    B* createB() { return new B; };
};

typedef TABFactory<RealA, RealB> RealABFactory;
typedef TABFactory<MockA, MockB> MockABFactory; 
```

然后，正常的用法是：

```
Program<RealABFactory> p;
p.useA();
p.useB(); 
```

虽然测试将是：

```
Program<MockABFactory> t;
t.useA();
t.useB(); 
```

当被模拟的类具有带有复杂参数的方法（例如来自同一库的其他类可能未被模拟）时，这开始变得复杂。总而言之，它似乎没有规模化。对这个解决方案有什么想法，或者对解决问题的其他方法有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T15:52:33.743

这是[python cog的完美用例](http://nedbatchelder.com/code/cog/)

另请参阅[此答案](https://stackoverflow.com/questions/294520/what-are-some-techniques-for-code-generation)。

我使用 cog 为事件列表生成处理程序，处理程序代码非常通用，我不需要做特殊情况，但我仍然必须编写所有函数，所以我所做的就是将事件保存在.py 文件中的列表和在 python 函数中生成处理程序样板的代码。所以我能够忠实于[DRY 原则](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)

显然，您必须将 cog 添加到您的 makefile 的预构建中才能使用您的工具链

**编辑**作为将样板添加到您的类所需的代码生成设计的示例，我会执行以下操作：

## 我的代码生成.py

```
import cog
ClassesToMock = [ [ 'IfaceA' , 'classA' , 'mockA' , ['void doSomething(int foo)' , 'int getSomething()'] 
                 , [ 'IfaceB', 'classB' , 'mockB' , ['static classA& getInstance()'] ]

def addInterfaces( myStructure ):
   for classItem in myStructure:
      cog.outl('class %s { ' % classItem[0] )
      for methodDecl in classItem[3]:
         cog.outl(' virtual %s = 0;' %methodDecl )
      cog.outl(' } ')

#implement your real classes normally

def addMocks( myStructure ):
   for classItem in myStructure:
      cog.outl('class %s : public %s { ' % classItem[2] % classItem[0] )
      for methodDecl in classItem[3]:
         cog.outl(' %s {' %methodDecl )
         cog.outl(' MOCK_STUFF_MACRO ')
         cog.outl(' } ')
      cog.outl(' } ') 
```

然后在你的标题中：

## IfaceA.h

```
/*[[[cog
import cog
import myCodeGeneration

myCodeGeneration.addInterfaces( [ [ 'IfaceA' , 'classA' , 'mockA' , ['void doSomething(int foo)' , 'int getSomething()'] ] )
]]]*/

//your code will be generated here

//[[[end]]] 
```

## 模拟A.h

```
/*[[[cog
import cog
import myCodeGeneration

myCodeGeneration.addMocks( [ [ 'IfaceA' , 'classA' , 'mockA' , ['void doSomething(int foo)' , 'int getSomething()'] ] )
]]]*/

//your code will be generated here

//[[[end]]] 
```

此外，如果考虑将 python 添加到您的 c++ 源代码中，问题是“污染”它或“美化”它，这在很大程度上取决于品味和风格。我认为 cog 提供了对 c++ 中缺乏的模板样式元编程的补充，为程序员提供了提供代码整洁性和可读性的工具。但我不希望每个人都同意

对我来说，这种方法背后的整个架构设计原则是**不要重复自己**。当我们必须在几个地方手动对方法进行编码时，就会发生错误。让计算机自动化它可以自动化的东西，并对不能*只进行一次*的东西进行编码。作为一个副作用，它会让你的编码更有趣，无论是编写它还是以后阅读它。

希望这可以帮助

# java - 从 SAX 迁移到 DOM 需要一些帮助。解析 XML (java)

> ID：10260471
> 
> 赞同：0
> 
> 时间：2012-04-21T15:45:10.067
> 
> 标签：java, parsing, dom, sax

所以我已经成功地使用 SAX 解析了我的 XML 文档，现在我正在尝试使用 DOM 解析 XML 文档（结果与使用 SAX 获得的输出相同）。

我已经设法编辑了大部分 SAX 代码以在 DOM 中工作。

例如，在我使用的开始和结束元素中使用 SAX：

```
if (qName.equals("Name")){...} 
```

在 Node.ELEMENT_NODE 的情况下使用 DOM 我刚刚将其编辑为：

```
String name = node.getNodeName();
if (name.equals("Name")){...} 
```

我坚持的部分是如何使用 DOM 以类似的方式解析 SAX 中的所有 endElement？

我设法使用以下方法打印所有文本：

```
 case Node.TEXT_NODE:

    System.out.print(node.getNodeValue().trim()); 
```

但是我将如何在特定的文本节点之后打印一些东西？在 SAX 中，这可以在 endElement 中轻松完成。

我一直在尝试使用它从名称元素内部打印文本，但它不起作用。

```
case Node.TEXT_NODE:

if (node.getNodeName().equals("name")) {
      System.out.print(node.getNodeValue().trim());
    } 
```

感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T16:23:14.477

您是否尝试过递归方法？

```
public void visitNode(Node node) {
   // Print something emulating a start tag

   // Visit all child nodes recursively
   for (int i = 0; i < node.getChildNodes().getLength(); i++)
     visitNode(node.getChildeNodes().item(i));

   // Print something emulating an end tag
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T16:45:52.453

如果您知道所需的节点，另一种方法是使用[xpath](http://www.w3schools.com/xpath/xpath_intro.asp)。该设置可能看起来势不可挡，但它非常强大。

```
String xpath="//name";
XPath xpath = XPathFactory.newInstance().newXPath();
XPathExpression expr = xpath.compile(xpathStatement);
NodeList nodes = (NodeList) expr.evaluate(source, XPathConstants.NODESET);
for (int i=0; i<nodes.getLength(); i++) {
    Node node = nodes.item(i);
    System.out.println(node.getNodeValue());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T20:51:52.767

查看`Node`javadoc - 它有一个固定的名称`"#text"`；您需要检查父级的名称，即标签：

```
case Node.TEXT_NODE:

if (node.getParentNode().getNodeName().equals("Name")) {
  System.out.print(node.getNodeValue().trim());
} 
```

# iphone - 如何在 Xcode3 中的现有 ViewController 之前添加登录屏幕

> ID：10260479
> 
> 赞同：1
> 
> 时间：2012-04-21T15:46:30.810
> 
> 标签：iphone, objective-c, xcode, login, uiviewcontroller

在 iPhone 上加载应用程序的第一个视图之前，我需要添加一个屏幕来捕获用户名和密码。除了这个（后期）添加之外，整个应用程序都已编码并正常工作。这是我在 Xcode 中的第一个应用程序，所以我对系统不是很熟悉。

我有一个 LoginViewController 设置，但不知道如何将它添加到应用程序的前面，以便它先加载，然后再加载我的 RootViewController（在加载下一个视图之前我需要登录详细信息）。

我的 appdelegate 的标题目前是

```
#import <UIKit/UIKit.h>

@class RootViewController;
@interface Online_HW_DiaryAppDelegate : NSObject <UIApplicationDelegate> {

UIWindow *window;
RootViewController *viewController;

UINavigationController *navigationController;

}

@property (nonatomic, retain) IBOutlet UIWindow *window;
@property (nonatomic, retain) IBOutlet UINavigationController *navigationController;
@property (nonatomic, retain) IBOutlet RootViewController *viewController;

@end 
```

但我不确定我需要修改什么 - 或者确实还需要修改什么？任何建议都将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T15:57:08.340

我认为最快的路径是：在 RootViewController 的 viewDidAppear 中，检测登录所需条件并以模态方式呈现新的 LoginVC。

```
// RootViewController.m
- (void)viewDidAppear:(BOOL)animated {

    [super viewDidAppear:animated];

    if (/* user must login */) {
        LoginVC *newVC = [[LoginVC alloc] initWithNibName:.....];
        [self presentModalViewController:newVC animated:YES];
    } else {
        // your old viewwillappear logic
    }
} 
```

LoginVC 在确定用户已成功登录后，可以自行关闭。

```
// LoginVC.m
- (void)loginFinished {

    // after some asynch call that validated the user credentials
    [self dismissModalViewControllerAnimated:YES];
} 
```

# regex - multilevel grep

> ID：10260480
> 
> 赞同：1
> 
> 时间：2012-04-21T15:46:34.637
> 
> 标签：regex

I have a series of HTML files that are formatted like this:

```
cinema name
 film 1
  showtime 1
  showtime 2
  ...

 film 2
  showtime 1
  showtime 2
  showtime 3
  ... 
```

the name of the cinema is listed only one, at the top; then there is a list of films (any number of films could be here, from 1 to n), and then a list of showtimes (again, it could be 1 or more during the day.

i would like to extract this info using grep and output something like:

```
cinema name - film 1 - showtime 1
cinema name - film 1 - showtime 2
cinema name - film 2 - showtime 1
cineme name - film 2 - showtime 2
cinema name - film 2 - showtime 3
etc. 
```

however, i'm not sure whether/how i can accomplish this with grep. is it possible? if so, how?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:18:13.247

您不必使用单个正则表达式来解决所有问题。在这种情况下，我只需通过前导空格找出我有哪一行，记住电影院和电影的值是什么，然后在我遇到放映时间时将它们全部打印出来。虽然这个解决方案是在 Perl 中，但你可以用你选择的任何语言做同样的事情：

```
#!perl
use v5.10;

my( $cinema, $film );
while( <DATA> ) {
    chomp;
    if( /\A\S/ )            { $cinema = $_ }
    elsif( /\A\s(\S.*)/ )   { $film = $1 }
    elsif( /\A\s\s(\S.*)/ ) { say "$cinema - $film - $1" }
    }   

__END__
Regal 9
 Jaws
  15:00
  19:00
  21:00

 Star Wars
  16:00
  17:00
  18:00

AMC 18
 E.T.
  12:00
  14:00

 Black Sheep
  22:00
  01:00
  03:00 
```

这是一个丑陋的 Perl 单行版本：

```
perl -lne '(/\A\S/ and $c=$_) || (/\A\s(\S.*)/ and $f=$1) || (/\A\s\s(\S.*)/ and print"$c - $f - $1")' movies.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T16:20:32.830

一个表达式是不可能的，但你可以用五个来完成：

删除空行（简化一些东西）：查找：“\n\n”替换：“\n”

填写电影：

（在电影之后查找以任意数量的先前放映时间为前缀的放映时间。电影被捕获，然后添加到放映时间的开头。）

```
Find: "(?<=\n ([^ \n].+)(\n  .*)*)\n  "
Replace: "\n  $1 - " 
```

填满电影院：

（在电影院之后查找以任意数量的先前放映时间或电影为前缀的放映时间。电影被捕获，然后添加到放映时间的开头。）

```
Find: "(?<=(?:^|\n)([^ \n].+)(\n {1,2}.*)*)\n  "
Replace: "\n  $1 - " 
```

删除非放映时间行：

```
Find: "(?<=^|\n)(?!  ).*\n"
Replace: "" 
```

修剪放映时间：

```
Find: "\n  "
Replace: "\n" 
```

所有这些都未经测试，并假定带有`\n`行终止符的类似 .NET 的正则表达式语法。调整口味。

# unit-testing - 对 IoC 容器本身进行单元测试

> ID：10260485
> 
> 赞同：2
> 
> 时间：2012-04-21T15:47:06.850
> 
> 标签：unit-testing, inversion-of-control, ioc-container

我认为以前没有人问过这个问题，尽管很难搜索像*单元测试 ioc 容器*这样的术语，也很难找到有关如何实现 IoC 以执行单元测试的问题。

我想对 IoC 容器本身进行单元测试，基本上是因为有时我对容器有问题（就像你对应用程序的任何其他部分一样），而且仅仅调试就测试依赖项的解决方案非常麻烦。

如果我可以为这些案例引入单元测试，我认为它会为我省去很多麻烦。

## 更新

是这样的，不是单元测试吗？是集成测试吗？

```
[TestClass]
public class IoC
{
    private IWindsorContainer _container;

    [TestInitialize]
    public void TestInit()
    {
        _container = new WindsorContainer();
        _container.Install(new WindsorInstaller());
    }

    [TestMethod]
    public void ContainerShouldResolve_MembershipProvider()
    {
        ContainerShouldResolve<IMembershipProvider>();
    }

    public void ContainerShouldResolve<T>()
    {
        T result = _container.Resolve<T>();
        Assert.IsInstanceOfType(result, typeof(T));
    }
} 
```

唯一真正的“非独立”参考是我必须连接到的连接字符串`app.config`。另外：在尝试解决`PerWebRequest`生活方式组件时，我也必须添加相关的`httpModule`。

顺便说一句：通过这样做，与使用 Web 应用程序调试它所花费的时间相比，我很快就发现了问题的根源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T15:54:22.963

这更多地属于*集成测试*类别。您的组件注册可能会在解析时执行各种外部系统调用（数据库、文件系统、网络、服务......），这就是单元测试结束的地方。

您可以对这种（集成）测试执行的一种方法是简单地解析您的应用程序根类型。这可能不完整（尤其是当您的应用程序执行大量延迟加载时），但通常足以发现丢失的位。

**编辑#2** *（响应 OP 编辑​​）*

当然，有可能在不实际触及任何提到的外部系统的情况下进行 root-resolve 测试，但仍然可能有很多依赖关系连接和设置*真实对象*（例如，不是假货/存根）。这是**失败的许多潜在原因**（我会说单元测试甚至太多）并且由开发人员来判断这属于哪个测试类别。

进行组件解析测试（与更小范围相关的解析）对于单元测试可能很好，但再一次 - 由开发人员来判断，这在很大程度上取决于对象在解析时所做的事情。大多数现代容器通常提供的不仅仅是简单的存储，应该考虑到这一点。

我想说的是，如果你已经说过`DaoModule`并且你想验证它可以从容器中解决，当然，这**可能是一个单元测试**。但是，如果解决您的`DaoModule`设置连接并查询数据库以查看它是否处于有效状态，您可能需要重新考虑此类测试的去向。

**编辑＃1** *（回应有问题的OP评论）*

> 我想设置一个测试，在其中配置容器，向它抛出一个抽象类型（或接口），并让它正确解析为预期的类型。

基本上，您想验证您的容器是否有效？**不要那样做**。只需选择一个经过测试的容器，您就可以假设它可以完成它的工作。如果您觉得需要对您的第 3 方组件进行单元测试，那么您真的应该选择不同的组件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T16:08:55.373

如果您真的想为 IoC 之类的基础设施代码编写单元测试以检查 IoC 实现是否正确，您可以查看 IoC 的单元测试源代码。

例如 [DotNet-s **autofac** IoC 单元测试](http://code.google.com/p/autofac/source/browse/src/Test)

关于您的问题的其他答案和评论（我也是第一次运行）认为您想要编写一个自动测试，以确保您的组件由 IoC 正确连接。我们大多数人将这种测试称为**集成**测试而不是单元测试。

# c# - 如何生成像 TeamViewer C# 这样的唯一 ID？

> ID：10260486
> 
> 赞同：0
> 
> 时间：2012-04-21T15:47:17.537
> 
> 标签：c#, uniqueidentifier, unique-key

> **可能重复：**
> [唯一标识计算机的好方法是什么？](https://stackoverflow.com/questions/671876/whats-a-good-way-to-uniquely-identify-a-computer)

正如上面的标题，有人知道如何在 C# 中生成像 TeamViewer 这样的唯一 ID 用于许可目的。

我想调用一个函数，它应该像 TeamViewer 一样每次为 PC 返回 1 个唯一 ID。我想将其用作许可证管理的硬件 ID。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T16:11:37.633

您可以使用[Guid.NewGuid](http://msdn.microsoft.com/en-us/library/system.guid.newguid.aspx)方法

```
public static Guid NewGuid(); 
```

每次调用此方法时`Guid`都会生成一个新方法。

**编辑：根据您的评论**

[Windows Management Instrumentation (WMI)](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394582%28v=vs.85%29.aspx)是您可以使用的东西。例如，您可以使用以下代码获取系统的 BIOS id。

```
ManagementObjectSearcher searcher = new 
    ManagementObjectSearcher("root\\CIMV2", "SELECT * FROM 
    Win32_BIOS"); 

foreach (ManagementObject wmi in searcher.Get())
{ 
    Console.WriteLine("BIOS Serial Number: " + 
        wmi.GetPropertyValue("SerialNumber").ToString()); 
} 
```

同样，您可以获取其他系统信息并使用它来生成系统的唯一 ID。[这是一篇关于 CodeProject 的好文章](http://www.codeproject.com/Articles/23095/Obtain-System-Information-Using-Windows-Management)，您可以从中获得帮助。请看一看。

# opengl-es - OpenGL ES sometimes corrupt textures when rendering. Why it can happen?

> ID：10260488
> 
> 赞同：0
> 
> 时间：2012-04-21T15:47:20.190
> 
> 标签：opengl-es, png, rendering, textures, corruption

I'm using cpp/marmalade to make a game for ios, but sometimes textures render corrupted. Here is the source texture file:

![http://files.moonmana.com/forums/source-rune.png](../Images/f4627b77d3f81384ddc9c47d22aeb859.png)

Example of a currupted texture:

![enter image description here](../Images/282f035d9570173b6872e54b901ab18f.png)

I'm loading texture with this code:

```
VGTexture2D* VGTextureLoader::loadImage(std::string imagefile)
{

CIwImage img;
 img.LoadFromFile(imagefile.c_str());

 // Convert to an OpenGL ES native format
 CIwImage nativeImg;
 nativeImg.SetFormat(CIwImage::ABGR_8888);
 img.ConvertToImage(&nativeImg);

 // Generate texture object
 GLuint texture;
 glGenTextures(1, &texture);
 glBindTexture(GL_TEXTURE_2D, texture);

 // Upload
 uint32 width = img.GetWidth();
 uint32 height = img.GetHeight();
 glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, width, height, 0, GL_RGBA, GL_UNSIGNED_BYTE, nativeImg.GetTexels());

 glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
 glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
 glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
 glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);

 // Create and return texture
 VGTexture2D* tex = new VGTexture2D(texture, (float)width, (float)height);

 return tex;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T03:36:52.447

你的纹理没有被破坏，但通道似乎被翻转了。可能是因为您将图像转换为 ABGR_8888，然后将其上传为 GL_RGBA？

# jquery - 单击时，检查 div 是否打开，如果为 false - 使用 .show 打开，如果为 true，则不执行任何操作

> ID：10260489
> 
> 赞同：3
> 
> 时间：2012-04-21T15:47:24.697
> 
> 标签：jquery, jquery-ui, show-hide

我正在使用 jquery`.show`打开一个`div`. 我已经让它工作正常，但我在弄清楚如何让它检查`div`'s 是否已经打开时遇到了一些麻烦。如果是，我不希望它重复该`.show`功能。最好的方法是什么？

我现在使用的是（jquery + jquery ui）

```
$(document).ready(function() {
$('.content').hide(); 

$(".open").click(function () {
  $(".content").show("slide", { direction: "up" },1200);
});

$(".close").click(function () {
  $(".content").hide("slide", { direction: "up" },1200);
});

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T15:52:36.377

```
if ($(".content").is(":visible") {
    // it is showing already
} ... 
```

您还可以查看[http://api.jquery.com/slideToggle/](http://api.jquery.com/slideToggle/)

# [¡¡¡有趣的例子在这里！！！](http://jsfiddle.net/SpYk3/85P55/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T16:09:34.887

您可以使用[:visible 选择器](http://api.jquery.com/visible-selector/)和[:hidden 选择器](http://api.jquery.com/hidden-selector/)

```
$(document).ready(function() {
    $('.content').hide();
    $(".open").click(function () {
        $(".content:hidden").show("slide", { direction: "up" }, 1200);
    });
    $(".close").click(function () {
        $(".content:visible").hide("slide", { direction: "up" }, 1200);
    });
}); 
```

另请参阅[我的示例](http://api.jquery.com/hidden-selector/)。

# jsf-2 - 未在 JSF @ViewScoped @Stateless bean 上启动事务

> ID：10260490
> 
> 赞同：0
> 
> 时间：2012-04-21T15:47:36.053
> 
> 标签：jsf-2, transactions, ejb-3.0, cdi, stateless-session-bean

我有一个基于 JSF 2`@ViewScoped`的 webapp，我无法正确处理事务，或者更确切地说：**它们根本没有启动**。

我也在使用 Java EE 6 的 CDI 和 EJB3。

这是主要的bean：

```
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;
import javax.inject.Inject;
...

@ManagedBean
@ViewScoped
@Stateless
public class PqManager implements Serializable
{
    private List<PqListItem> pqItems;

    @Inject
    private PqService pqService;

    public List<PqListItem> getPqItems()
    {
        if ( pqItems == null )
        {
            pqItems = pqService.findActivePqs();
        }

        return pqItems;
    }

    ...
} 
```

从 JSF 页面使用视图范围的 bean 来显示数据表中的简单列表。它是视图范围的，因为它具有基于 AJAX 的操作来添加项目、删除项目以及通过 RichFaces 对它们进行排序（过滤）。

我`@Stateless`为每个方法调用添加了启动事务（如果不存在，则创建一个新事务，默认为`TransactionAttributeType.REQUIRED`）。这个想法取自“Core JavaServer Faces, 3rd ed.”一书，但是我没有找到任何与我自己相匹配的示例。

注入的 PqService 类（使用它没有区别`@EJB`）：

```
@Stateless
public class PqService extends JpaCrudService
{
    ...

    public List<PqListItem> findActivePqs()
    {
        return em.createQuery("SELECT NEW ... whatever not interesting here... WHERE pq.workflow = '" + Workflow.ACTIVE + "' GROUP BY pq.id", PqListItem.class).getResultList();
    }

    ...
} 
```

JpaCrudService（基本上取自 Adam Bien 的示例[http://www.adam-bien.com/roller/abien/entry/generic_crud_service_aka_dao](http://www.adam-bien.com/roller/abien/entry/generic_crud_service_aka_dao)）：

```
//@Stateless
//@Local(CrudService.class)
@TransactionAttribute(TransactionAttributeType.MANDATORY)
public abstract class JpaCrudService implements CrudService
{
    @PersistenceContext(unitName = "PqGeneratorPu")
    protected EntityManager em;

    @Override
    public <T> T create(T t)
    {
        em.persist(t);
        em.flush();
        em.refresh(t);

        return t;
    }

    ...
} 
```

唯一的区别是我子类化`JpaCrudService`，因为我不喜欢存储在实体中/实体处的查询。所以我省略了`@Local`注释（如果错了，请纠正我）。`@Stateless`不是继承的AFAIK，我只注入子类，所以我也评论了那个。

也就是说，然后从 JSF 页面访问 bean：

```
 <rich:dataTable value="#{pqManager.pqItems}"
                  var="pq">
    <f:facet name="header">
      <h:outputText value="Active" />
    </f:facet>
    ... 
```

但是，在加载页面时，出现异常：

```
javax.ejb.EJBTransactionRequiredException: Transaction is required for invocation: org.jboss.invocation.InterceptorContext@7a6c1c92
    at org.jboss.as.ejb3.tx.CMTTxInterceptor.mandatory(CMTTxInterceptor.java:255)
    at org.jboss.as.ejb3.tx.CMTTxInterceptor.processInvocation(CMTTxInterceptor.java:184)
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
    at org.jboss.as.ejb3.component.interceptors.CurrentInvocationContextInterceptor.processInvocation(CurrentInvocationContextInterceptor.java:41)
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
    at org.jboss.as.ejb3.component.interceptors.LoggingInterceptor.processInvocation(LoggingInterceptor.java:59)
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
    at org.jboss.as.ee.component.NamespaceContextInterceptor.processInvocation(NamespaceContextInterceptor.java:50)
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
    at org.jboss.as.ee.component.TCCLInterceptor.processInvocation(TCCLInterceptor.java:45)
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
    at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61)
    at org.jboss.as.ee.component.ViewService$View.invoke(ViewService.java:165)
    at org.jboss.as.ee.component.ViewDescription$1.processInvocation(ViewDescription.java:173)
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
    at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61)
    at org.jboss.as.ee.component.ProxyInvocationHandler.invoke(ProxyInvocationHandler.java:72)
    at de.company.webapp.service.PqService$$$view95.findActivePqsFor(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.jboss.weld.util.reflection.SecureReflections$13.work(SecureReflections.java:264)
    at org.jboss.weld.util.reflection.SecureReflectionAccess.run(SecureReflectionAccess.java:52)
    at org.jboss.weld.util.reflection.SecureReflectionAccess.runAsInvocation(SecureReflectionAccess.java:137)
    at org.jboss.weld.util.reflection.SecureReflections.invoke(SecureReflections.java:260)
    at org.jboss.weld.bean.proxy.EnterpriseBeanProxyMethodHandler.invoke(EnterpriseBeanProxyMethodHandler.java:111)
    at org.jboss.weld.bean.proxy.EnterpriseTargetBeanInstance.invoke(EnterpriseTargetBeanInstance.java:56)
    at org.jboss.weld.bean.proxy.ProxyMethodHandler.invoke(ProxyMethodHandler.java:105)
    at de.company.webapp.service.PqService$Proxy$_$$_Weld$Proxy$.findActivePqs(PqService$Proxy$_$$_Weld$Proxy$.java)
    at de.company.webapp.facade.PqManager.getPqItems(PqManager.java:84)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    .
    .
    . 
```

它失败是因为调用`pqService.findActivePqsFor()`不在现有事务中运行（`TransactionAttributeType.MANDATORY`继承**AFAIK**）。

`TransactionAttributeType.MANDATORY`请注意，通过删除和使用扩展实体管理器，在不使用事务的情况下正确显示页面`JpaCrudService`，但这仅用于测试目的。

但是为什么这不起作用？为什么这里没有开始交易？JSF `@ViewScoped`bean 有什么问题吗？不相容？

**你如何修复这个？**

PS：我使用的是 JBoss AS 7.1.1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T21:29:31.367

您正在使用 CDI 删除 JSF 注释。JSF 注释不像 CDI 那样控制 EJB。您可能会将容器与正在使用的注释混淆。您还可以将 MyFaces CODI 用于某些扩展或查看使用 CDI 重新创建 ViewScope。网上有几个例子。

# c++ - Getting Hex Value from Editbox and using it to read memory

> ID：10260499
> 
> 赞同：0
> 
> 时间：2012-04-21T15:48:11.433
> 
> 标签：c++, windows, winapi

I'm trying to read memory, and get the values from Editbox's in my program, The caption part is working i tested it by putting a Valid address instead of MyAddress, and it worked fine. So the only problem i have is MyAddress, heres the code.

```
HANDLE hProcess;
DWORD ProcessId;
int Base = 0;
char MyCaption[300];
char MyAddress[300];
GetDlgItemText(hDlg, 2, MyCaption, sizeof(MyCaption));
GetDlgItemText(hDlg, 3, MyAddress, sizeof(MyAddress));
HWND hWindow = FindWindow(NULL, MyCaption);
GetWindowThreadProcessId(hWindow, &ProcessId);
hProcess = OpenProcess(PROCESS_VM_OPERATION|PROCESS_VM_READ|PROCESS_VM_WRITE, FALSE, ProcessId);
ReadProcessMemory(hProcess, (void*)MyAddress, &Base, 4, NULL);
SetDlgItemInt(hDlg, 5, Base, TRUE); 
```

I was hopeing a function would work. Manually putting a address in works.

```
void write(LPVOID addy) {
    int Base = 0;
    ReadProcessMemory(hProcess, addy, &Base, 4, NULL);
    WriteProcessMemory(hProcess, (void*)(Base + 0x728), "\x88\x13\x00\x00", 4, NULL);
}

void ReadOpen(HWND hDlg)
{
    DWORD ProcessId;
    int Base = 0;
    int Base2 = 0;
    char MyCaption[300];
    GetDlgItemText(hDlg, 2, MyCaption, sizeof(MyCaption));
    HWND hWindow = FindWindow(NULL, MyCaption);
    GetWindowThreadProcessId(hWindow, &ProcessId);
    hProcess = OpenProcess(PROCESS_VM_OPERATION|PROCESS_VM_READ|PROCESS_VM_WRITE, FALSE, ProcessId);
    int address = GetDlgItemInt(hDlg, 3, NULL, FALSE);
    write((LPVOID)0x67FBF8);
} 
```

using address doesnt work

```
void write(LPVOID addy) {
    int Base = 0;
    ReadProcessMemory(hProcess, addy, &Base, 4, NULL);
    WriteProcessMemory(hProcess, (void*)(Base + 0x728), "\x88\x13\x00\x00", 4, NULL);
}

void ReadOpen(HWND hDlg)
{
    DWORD ProcessId;
    int Base = 0;
    int Base2 = 0;
    char MyCaption[300];
    GetDlgItemText(hDlg, 2, MyCaption, sizeof(MyCaption));
    HWND hWindow = FindWindow(NULL, MyCaption);
    GetWindowThreadProcessId(hWindow, &ProcessId);
    hProcess = OpenProcess(PROCESS_VM_OPERATION|PROCESS_VM_READ|PROCESS_VM_WRITE, FALSE, ProcessId);
    int address = GetDlgItemInt(hDlg, 3, NULL, FALSE);
    write((LPVOID)address);
} 
```

using &address doesnt work.

```
void write(LPVOID addy) {
    int Base = 0;
    ReadProcessMemory(hProcess, addy, &Base, 4, NULL);
    WriteProcessMemory(hProcess, (void*)(Base + 0x728), "\x88\x13\x00\x00", 4, NULL);
}

void ReadOpen(HWND hDlg)
{
    DWORD ProcessId;
    int Base = 0;
    int Base2 = 0;
    char MyCaption[300];
    GetDlgItemText(hDlg, 2, MyCaption, sizeof(MyCaption));
    HWND hWindow = FindWindow(NULL, MyCaption);
    GetWindowThreadProcessId(hWindow, &ProcessId);
    hProcess = OpenProcess(PROCESS_VM_OPERATION|PROCESS_VM_READ|PROCESS_VM_WRITE, FALSE, ProcessId);
    int address = GetDlgItemInt(hDlg, 3, NULL, FALSE);
    write((LPVOID)&address);
} 
```

# mysql - 从另一个表计数[mysql]

> ID：10260502
> 
> 赞同：0
> 
> 时间：2012-04-21T15:48:36.503
> 
> 标签：mysql, sql, count

我有一张这样的桌子：

```
+----+---------+-------------+
| id | site_id | search_term |
+----+---------+-------------+
|  1 |       2 | apple       |
|  2 |       2 | banana      |
|  3 |       3 | cheese      |
|  4 |       1 | aubergine   |
+----+---------+-------------+ 
```

还有一个是这样的：

```
+----+---------+-------------+
| id | site_id | search_term |
+----+---------+-------------+
|  1 |       2 |           1 |
|  2 |       2 |           2 |
|  3 |       2 |           1 |
|  4 |       2 |           1 |
|  5 |       3 |           3 |
|  6 |       1 |           4 |
+----+---------+-------------+ 
```

我想知道每个 search_term 在第二张表中出现了多少次，以及出现了多少次。

换句话说，根据这些数据，如果我询问的是 site_id 2，我希望返回这个：

```
+-------------+-------+
| search_term | count |
+-------------+-------+
| apple       |     3 |
| banana      |     1 |
+-------------+-------+ 
```

我熟悉基本连接等以及 COUNT，但我不确定如何计算另一个表中的内容。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T15:51:08.110

您可以将表连接在一起，并计算第二个表中的行数：

```
select  t1.search_term
,       count(t2.id)
from    table1 t1
left join table2 t2
on      t1.id = t2.search_term
group by t1.search_term 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T16:25:04.677

试试这个：

```
select t1.search_term, count(*) from t1
join t2 on t1.id = t2.search_term and t1.site_id = t2.site_id
where t1.site_id = 2
group by t1.search_term 
```

# wpf - 通过 WPF 样式设置图像宽度和高度

> ID：10260503
> 
> 赞同：1
> 
> 时间：2012-04-21T15:48:36.930
> 
> 标签：wpf, xaml, styles

有什么方法可以通过 WPF 样式设置图像大小？

我的 XAML 中有： `<Image Style="MyImageStyle" Source="{StaticResource MyImage}" />`

在 ResourceDictionary 作为一种风格：

```
<Style x:Key="MyImageStyle">
<Setter Property="Width" Value="30" /> 
```

但它不起作用。我收到此错误：无法解析样式属性“宽度”。验证所属类型是否为 Style 的 TargetType，或使用 Class.Property 语法来指定 Property。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T15:53:50.090

```
Style="{StaticResource MyImageStyle}" 
```

（[`StaticResource`文档](http://msdn.microsoft.com/en-us/library/cc189045.aspx)|[类文档](http://msdn.microsoft.com/en-us/library/system.windows.staticresourceextension.aspx)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T15:59:35.190

```
<Style x:Key="myImageStyle" TargetType="{x:Type Image}">
    <Setter Property="Width" Value="30" />
...

<Image Style="{StaticResource MyImageStyle}" Source="{StaticResource MyImage}" /> 
```

# php - PHP's date functions: converting from weeknumber back to month

> ID：10260506
> 
> 赞同：-3
> 
> 时间：2012-04-21T15:49:02.493
> 
> 标签：php, datetime

Given the information below:

*   Year: 2012
*   Weeknumber: 4
*   Dayname: TUE

How can i convert this to a valid date like 2012-01-12 (YYYY-MM-DD) using PHP's date functions?

Thanx

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T16:28:03.160

类`DateTime`不能这样做，但函数[`strptime`](http://php.net/manual/en/function.strptime.php)可以。

```
$d = strptime('TUE 4 2012', '%a %W %Y');
var_dump($d); 
```

返回一个数组：

```
array
  'tm_sec' => int 0
  'tm_min' => int 0
  'tm_hour' => int 0
  'tm_mday' => int 24
  'tm_mon' => int 0
  'tm_year' => int 112
  'tm_wday' => int 2
  'tm_yday' => int 23
  'unparsed' => string '' (length=0) 
```

请注意，它`tm_year`包含自 1900 年以来的年数，并且`tm_month`是从 0 开始的，而不是从 1 开始的。所以这确实代表 2012-01-24，这是正确的。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-04-21T16:37:55.593

使用这个功能：

```
function get_date($year,$week,$day,$start_sunday=false){
    $day_array = array('Mon'=>1,'Tue'=>2,'Wed'=>3,'Thu'=>4,'Fri'=>5,'Sat'=>6,'Sun'=>($start_sunday?0:7));
    $month_array = array(31,($year%4==0?29:28),31,30,31,30,31,31,30,31,30,31);
    $week *= 7;
    $month = 1;
    for($i=0;$i<count($month_array);$i++){
        if($week-$month_array[$i]<=0){
            break;
        }
        $week -= $month_array[$i];
        $month++;
    }
    $format = "$year $month $week";
    $date = date_create_from_format("Y m j",$format);
    $date_num = date_format($date,"D");
    $curr = $day_array[ucfirst(strtolower($day))]-$day_array[$date_num];
    $got_date = strtotime("$curr ".($curr==1||$curr==-1?"day":"days"),strtotime(date_format($date,"Y-m-j")));

    return $got_date;
} 
```

如果一周从哪里开始，`$start_sunday`应该在哪里`true``sunday`

`$year`is year `$week`is week number `$day`is short weekday name iemon,tue,wed,....

此功能将为您提供给定格式的日期。

```
Enjoy............ 
```

# php - jQuery 不使用 JS 搜索功能

> ID：10260507
> 
> 赞同：1
> 
> 时间：2012-04-21T15:49:03.277
> 
> 标签：php, javascript, jquery, live

所以我正在研究朋友搜索功能。搜索功能很好用。当您搜索名称时，每个单独的用户都会在单独的 div 中弹出，其中包含图片和名称以及一个显示“请求”的框。现在我想做的是，当您单击该框时，它将运行一些 jQuery 来请求用户，但似乎 jQuery 在我的实时加载 JS div 中不起作用。

这是我的代码：

```
$(document).ready(function(){
    $('.request').mouseover(function() {
        $(this).addClass('select');
    });
});

 $(document).ready(function(){ 
    $('.request').mouseout(function() {
        $(this).removeClass('select');
    });
}); 

$(document).ready(function(){   
    $('.request.select').click(function() {
        var name = $(this).attr('href');
        $.ajax({
            type: "POST",
            url: "requestfriend.php",
            data: {'name': name}
        });
        $(".request.select").load('checkmark.php', function(){ });

    });
}); 
```

这是用户 div 的 HTML。

```
 echo '
            <div class="update miniuser" style="margin: 3px; width: 395px;">
            <div><img src="http://myurl.com/' . $FRIENDS[$i] . '/user.png" /></div>
            <div style="margin-top: 10px;">' . $FRIENDS[$i] . '</div><div class="request" href="' . $FRIENDS[$i] . '">Request</div>
            </div></div>'; 
```

添加类不起作用。我相信它是因为它正在加载实时在 div 中？那是我把文档准备好的功能放在他们身上的时候。仍然没有骰子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T15:55:16.160

您正在准备好文档时添加 mouseover/out 事件。您加载的数据直到很久以后才会添加到 DOM 中。完成 AJAX 请求并将内容添加到 DOM 后，附加事件。

```
$('.request').mouseover(function() {
    $(this).addClass('select');
}); 
```

方法：找到该类的所有元素`request`并添加鼠标悬停功能。处理程序不会神奇地出现在您*之后*添加的元素上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T15:58:09.383

我猜你想要`.live()`，它将函数添加到具有该选择器的所有元素，动态加载或不加载。

```
$('.request.select').live("click", function() {
    var name = $(this).attr('href');
    $.ajax({
        type: "POST",
        url: "requestfriend.php",
        data: {'name': name}
    });
    $(".request.select").load('checkmark.php', function(){ });

}); 
```

# javascript - What is the benefit of using a JavaScript templating engine?

> ID：10260510
> 
> 赞同：4
> 
> 时间：2012-04-21T15:49:32.823
> 
> 标签：javascript, html, mustache, dust.js

**Please explain in simple way** what is the benefit of using a [JavaScript templating engine](https://www.google.co.in/search?aq=f&sourceid=chrome&ie=UTF-8&q=javascript%20templating%20engine)?

We can write HTML quickly using [Zen coding](http://coding.smashingmagazine.com/2009/11/21/zen-coding-a-new-way-to-write-html-code/) and even if we want some quick html code with data we can make our own [code snippet collection](http://www.smashingmagazine.com/2009/07/21/45-excellent-code-snippet-resources-and-repositories/) and re-use it or use like [http://html-ipsum.com/](http://html-ipsum.com/)

and if we use any JavaScript templating engine then what about SEO and if JavaScript is disabled in users browser.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T16:01:20.980

JavaScript 模板库的主要用途（有关模板库的示例，请参阅本文[http://stephenwalther.com/blog/archive/2010/11/30/an-introduction-to-jquery-templates.aspx](http://stephenwalther.com/blog/archive/2010/11/30/an-introduction-to-jquery-templates.aspx)）是提供一种更优雅的方式来创建动态 DOM 元素。旧的方式是很多 'part' + of + ' ' + my + 'code 是一个字符串，而 ' + the + rest + ' 是变量和标记的集合'。虽然这个说法没有任何“错误”，但它确实会导致一些非常不可读的代码。

模板允许您将此编译抽象为 DOM 占位符，以便您可以在 HTML 中处理它所属的所有 HTML 生成。

# java - 为什么java编译器不抱怨这个：

> ID：10260513
> 
> 赞同：0
> 
> 时间：2012-04-21T15:49:48.847
> 
> 标签：java, compiler-construction, javac

我有一行代码本质上是这样的

```
NameOfAClassOnTheClasspath. 
```

编译器接受这一点而不会出现错误甚至警告。我已经在 eclipse 和命令行中尝试过这个。

编译器（javac 1.6）到底可以认为这意味着什么，为什么不抱怨？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-21T15:53:21.340

由于空白被忽略，类似于

```
SomeClass.

staticMethod(); 
```

是一种完全合法的调用方式

```
SomeClass.staticMethod(); 
```

（您可以用该类的几乎任何其他静态成员替换该方法）

例如另一个接口的内部接口：

```
Map.

Entry<Integer,Integer> x; // Declares a Map.Entry<Integer,Integer> 
```

当然，这是一种非常糟糕的编码风格，除非您要中断的行太长而无法在屏幕上显示，在这种情况下，您应该缩进该行的其余部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T16:03:47.917

考虑到 DOT 是一个二元运算符，所以它需要一个类和一个方法。

如果您希望 ClassLoader 加载类，因为您在静态初始化中做了一些事情，那么您应该考虑使用 Class.forName("YourClass");

# image-processing - 使用透视投影进行矩形识别的霍夫变换与轮廓检测

> ID：10260519
> 
> 赞同：20
> 
> 时间：2012-04-21T15:50:43.900
> 
> 标签：image-processing, opencv

我使用轮廓检测​​进行矩形检测，并在调整透视投影之前使用 OpenCv 应用多边形来获取矩形的位置。而且效果很好。但我小组中的一些人建议改为霍夫变换。我想知道使用霍夫变换进行矩形检测是否有任何优势。

**更新：**我尝试了这两种方法。在我的示例中，这两种方法在 Canny 边缘检测后都运行良好。但是由于霍夫变换产生线，我们必须假设一些事情，例如线的长度和线的可连接性，并且应该进行额外的计算，例如搜索连接的线并从连接的线中找到角点。就个人而言，我更喜欢轮廓法，因为它的概念更简单。使用该方法，您只需搜索可以用具有 4 个角的封闭和凸多边形近似的轮廓，并调整多边形的透视投影。就是这样。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-21T16:07:22.313

到目前为止，您通过轮廓检测获得了什么样的结果？有例子吗？

霍夫变换应该适用于矩形检测IFF，您可以假设矩形的边是图像中最突出的线条。然后你可以简单地检测霍夫空间中的 4 个最大的峰，你就得到了你的矩形。

例如，这适用于深色背景前的一张白纸照片。

理想情况下，您将使用模糊、阈值、形态学运算符对图像进行预处理，以在霍夫变换之前移除任何小尺度结构。

如果图像中有多个较小的矩形或其他类型的突出线条，则轮廓检测可能是更好的选择。

霍夫变换的一些一般优势从我的脑海中消失：

*   如果矩形的一部分被遮挡或超出框架，霍夫变换仍然可以工作。
*   我猜霍夫变换应该比轮廓检测更快？
*   霍夫变换将忽略任何不是直线的东西，因此您可能会在杂乱的图像上取得更大的成功。（如果矩形边是最突出的线）

最后，它可能取决于输入数据。有例子吗？

也许结合的方法是最好的？看到 [结合霍夫变换和轮廓算法来检测车辆牌照](http://www.google.de/url?sa=t&rct=j&q=Combining+Hough+Transform+and+Contour+Algorithm+for+detecting+Vehicles+License-Plates&source=web&cd=1&ved=0CCYQFjAA&url=http%3A%2F%2Fvision.cs.uiuc.edu%2F~ddtran2%2Fpubs%2Ftlhdu_isimp04.pdf&ei=9fuST6C1FbD54QTc-NTQDw&usg=AFQjCNEQqZtPzWeFZ4iOF6hM9v9mBazpsg)

不久前我做了一些使用霍夫变换检测矩形的实验，你可以在这里看到一些初步结果： [http ://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=14491&start=9](http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=14491&start=9)

不幸的是，目前仅此而已，该项目目前处于中断状态，最终我希望在我不那么忙的时候恢复它。

相比之下，我会对你的结果非常感兴趣。

（如果你正在做透视校正，还要检查[透视变形矩形的比例](https://stackoverflow.com/q/1194352/145999)）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-11-25T05:59:33.707

使用霍夫变换搜索轮廓检测使我想到了这个 SO。

为了帮助未来的搜索者，这篇博文对使用 opencv 进行了很好的演练：http:
[//opencv-code.com/tutorials/automatic-perspective-correction-for-quadrilateral-objects/](http://opencv-code.com/tutorials/automatic-perspective-correction-for-quadrilateral-objects/)

概念：
1\. 获取边缘图 - canny, sobel
2\. 使用 Hough 变换检测线
3\. 通过查找线之间的交点来获取角点。
4\. 检查近似多边形曲线是否有 4 个顶点，*approxPolyDP*
5\. 确定左上角、左下角、右上角和右下角。*6\. 使用getPerspectiveTransform*
应用透视变换以获得变换矩阵，*使用 warpPerspective*应用变换。

# image - 网络上可缩放矢量图形的最佳文件格式？

> ID：10260523
> 
> 赞同：9
> 
> 时间：2012-04-21T15:51:02.103
> 
> 标签：image, css, vector-graphics

我正在建立一个新网站，我希望该网站的徽标在所有设备（从台式电脑到 iPhone 和 iPad 上的视网膜显示器）上看起来都一样清晰。

我的徽标不包含任何渐变或像素，因此我可以轻松地将其保存为矢量格式。然而，没有人能真正说出最好的格式是什么。

它是 SVG 还是 PNG，例如？

我将如何创建 SVG 文件？

即使在谷歌上也没有太多可用的信息。

感谢您分享这方面的经验。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-21T15:57:26.350

由于 SVG 代表“可缩放矢量图形”，这可能是您的最佳选择；） PNG 是一种像素格式，因此它不会像您放大或缩小那样缩放。

处理SVG 图像的常用库是[Processing.js](http://processingjs.org/)，检查一下，看看它是否符合您的要求！

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-21T15:59:24.470

好吧，正确的答案是：“视情况而定”，SVG 更难被浏览器绘制并正确显示，这涉及到一些因素，另一方面 PNG 更容易显示，特别是在移动平台中，例如iOS 设备已针对绘制 PNG 图像进行了优化。

另一方面，svg 的优点是它们可以随心所欲地缩放，并且它们是轻量级的，可以通过网络传输。

您可以使用 Inkscape 或 adobe illustrator 创建 SVG 图像。

干杯

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-12-13T11:35:55.483

徽标设计最好保留几种格式：PDF、SVG、AI、EPS 和 DXF。（真正的矢量格式 - 可缩放/无损）真正的矢量图像可以无限缩放，没有像素或失真。

而且，如果您使用位图格式，请务必坚持使用 PNG 文件。PNG支持透明度并且是无损位图，但仍然是光栅图像，因此它们在缩放时会相应地显示出一定程度的质量损失。因此，PNG 非常适合某些网络用途，但我不推荐用于打印。

我推荐 .png 格式的网页显示，但印刷设计/版本应该是真正的矢量格式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-28T14:04:19.833

哦，男孩-有[很多](http://en.wikipedia.org/wiki/Image_file_formats#Vector_formats)。还有包含光栅+矢量数据的复合格式（例如流行的 PDF 格式）。我怀疑 pdf 解决方案将是最便携的，因为您会以某种方式将您的徽标导出为 PDF 作为矢量数据。地狱，您甚至可以仅使用 javascript[显示 PDF 。](https://stackoverflow.com/questions/3539879/open-source-javascript-pdf-viewer)或者你可以采取 adobe flash 路径...

# c# - 结合可观察物

> ID：10260525
> 
> 赞同：3
> 
> 时间：2012-04-21T15:51:12.027
> 
> 标签：c#, system.reactive

我有两个 observables：LoadLocal 和 LoadServer。LoadLocal 从本地源加载并返回一个元素，LoadServer 从服务器获取它。我想将它们组合成另一个可观察的：加载。我想让Load从LoadLocal中获取元素，如果它为null，我想从LoadServer返回元素。关于如何做到这一点的任何想法？

谢谢

* * *

真实场景的详细信息：

```
// loadLocal(id) gives me an observable that returns an asset from a local source
Func<Guid, IObservable<IAsset>> loadLocal = Observable.ToAsync<Guid, IAsset>(id => GetLocalAsset(id));

var svcClient = new ServiceClient<IDataService>();
var svc = Observable.FromAsyncPattern<Request, Response>(svcClient.BeginInvoke, svcClient.EndInvoke);

// calling loadServer(id) gives me an observable that returns an asset from a server
var loadServer = id => from response in svc(new Request(id)) select response.Asset;

// so at this point i can call loadServer(id).Subscribe() to get an asset with specified id from the server, or I can call loadLocal(id).Subscribe() to get it from local source.
// however I want another observable that combines the two so I can do: load(id).Subscribe() that gets the asset from loadLocal(id) and if it is null it gets it from loadServer(id)
var load = ??? 
```

* * *

以下几乎给了我想要的结果，但是 loadLocal(id) 和 loadServer(id) 都运行了。如果 loadLocal(id) 返回一个元素，我不希望 loadServer(id) 运行。

```
var load = id => loadLocal(id).Zip(loadServer(id), (local, server) => local ?? server); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T21:49:09.003

这个怎么样：

```
loadLocal(id)
    .Where(x => x != null)
    .Concat(Observable.Defer(() => loadServer(id)))
    .Take(1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T15:54:17.827

也许是这样的？

```
var load = LoadLocal.Zip(LoadServer, (local, server) => local ?? server); 
```

# benchmarking - JMeter 或 Apache ab 哪个测量正确？

> ID：10260526
> 
> 赞同：47
> 
> 时间：2012-04-21T15:51:16.397
> 
> 标签：benchmarking, jmeter, apachebench

我开始在 JMeter 中编写一些基本测试，并惊讶于测量结果与 Apache ab 的测量结果如此不同。

我有一个千兆 LAN 连接运行 Nginx 的 Intel i7 服务器和运行 JMeter 或 ab 的 i5 测试机。最初，我只是测试开箱即用的 Nginx 主页响应率。

```
ab -c 1 -n 100 http://testserver.local/ 
```

给

```
Document Path:          /
Document Length:        151 bytes

Concurrency Level:      1
Time taken for tests:   0.078 seconds
Complete requests:      100
Failed requests:        0
Write errors:           0
Total transferred:      38400 bytes
HTML transferred:       15100 bytes
Requests per second:    1280.77 [#/sec] (mean)
Time per request:       0.781 [ms] (mean)
Time per request:       0.781 [ms] (mean, across all concurrent requests)
Transfer rate:          480.29 [Kbytes/sec] received 
```

该结果始终具有可重复性，+/- 几个百分点。

在 JMeter 中，我有一个 1 用户 100 循环线程组，其中包含：

*   HTTP 标头管理器设置 Accept-Encoding: gzip
*   一个 HTTP 获取/采样器
*   总结报告监听器

只有 100 个样本，每次我运行它都会得到非常不一致的结果。但最令人吃惊的事实是，吞吐量报告低至每秒 40 个请求（而不是 1280）。最高记录率是 1030，这只有在我增加到 10,000 个样本时才实现。

我是否认为 JMeter 是简单负载测试的错误工具，因为它的开销太高而无法进行准确测量？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-04-22T01:29:17.090

Jmeter 告诉您每个请求**实际**花费了多长时间。AB 只是做了一些非常基本的数学运算来获得总体平均值。因此，您的问题的直接答案是 jmeter 做对了，而 ab 只是通过为您提供所有内容的平均值来粗略猜测。

但是，可以肯定的是，如果您将这两个工具并排放置并评估它们的速度，那么很明显 ab 的性能会超过 jmeter。Jmeter 只是做得更多，它记录了更多的数据并处理了更多的逻辑，因此处理单个请求需要更长的时间。一个简单的事实是 Jmeter 是一个功能齐全的负载测试工具，AB 是，嗯，不是。

问题是，*负载测试*工具的目标不是成为最快的孩子，而是能够构建一个真实的表示你的应用程序上线时可能会遇到的负载类型。在这方面 jmeter 胜出，所以它真的取决于你的要求是什么。如果您只想使用最少的硬件生成尽可能多的请求，那么 ab 是一个不错的选择，但如果您想构建一个具有代表性的测试，包括事务性旅程、条件逻辑和各种其他有用的东西，那么 jmeter 是要走的路。可以这样想：它们都是 Apache 项目，但我认为 AB 是为测试 apache Web 服务器而设计的，而 JMeter 是为测试 Tomcat 而设计的。

现在，我猜测 jmeter 产生了不一致的结果，因为它在运行它的机器上达到了限制。我打赌你在 GUI 模式下运行并且至少有一个监听器处于活动状态，就像这样你要求工具做很多事情。如果您需要高请求率，那么 Jmeter 具有精益和平均模式。通常，对于大容量，最佳实践是在命令行执行测试，只需要很少的侦听器；在 apache jmeter 网站上有很多关于这个主题的信息。

如果您真的要进行负载测试，您应该考虑的另一点是，为了真正从这类事情中受益，您需要首先确定您的站点需要支持哪种负载，然后才应该设计代表这一点的测试。这是使用起搏和模拟等待时间来实现的。告诉一个线程应该离开并尽可能快地运行的问题在于，它会尽可能快地迭代它的本地条件允许它，但*总会*有一些东西会中断，即使 ab 是有限的; 无论一个工具多么轻巧，它仍然可以做*一些事情*. 但是，如果您调整请求的速度，那么您就可以消除这个问题，并且作为一个相当有用的额外奖励，您最终会在运行之间和代码构建之间保持一致性，因此即使您的服务器加速或减速（更改代码库）您的测试仍然会发出相同的请求率 - 这对于基准测试非常有用。

如果您想进一步使用 JMeter，请查看恒定吞吐量计时器，然后使用多个线程来构建您需要表示的流量级别。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-01-10T05:57:05.337

**在您的设置中，JMeter 使自身饱和的速度比它使您的 Web 服务器饱和的速度更快。**

您正在高级硬件上运行一个非常优化的 C Web 服务器，并在较小的硬件上使用相对较重的 Java 应用程序对其进行基准测试。优化的 C 机器代码（可能）总是比 Java 字节码快。JMeter 无法跟上 Nginx，因此在遇到硬件限制时会给您带来奇怪的结果。Java 在后台做了很多很好的事情来管理硬件资源，但也会在极端的资源使用情况下产生不可预测的行为。另一方面，ApacheBench 是一个足够轻量级的 C 程序，它可以使服务器饱和并且可以产生一致的结果，因为它在使您的 Web 服务器饱和后具有过剩的容量。

JMeter 非常适合对需要一些时间来处理请求的重型动态应用程序进行基准测试。它提供的所有额外数据都有助于这样的网络应用程序。当您在高度优化的 Web 服务器上处理静态文件服务（几乎是 Web 服务器可以做的最快的事情）时，您需要一个足够快的工具来跟上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-03T14:25:17.593

正如在第一个答案中已经说明的那样，关键字“要求”。JMeter 是测试服务于网页的服务器的更好选择。例如，它可以发送一系列请求，为每个序列生成不同的请求，解析 HTML 响应并从 HTML 加载图像和脚本的内容。AB 是 REST API 测试的更好选择，您需要服务器尽可能快地响应并提供尽可能多的请求，两个后续请求之间没有连接等。因此，AB 确实能够生成比JMeter 与来自同一客户端机器的同一服务器。

# model - 在蒙皮模型示例中更改“dude.fbx”模型

> ID：10260527
> 
> 赞同：2
> 
> 时间：2012-04-21T15:51:19.877
> 
> 标签：model, xna, rotation

对不起初学者的问题:(我是 XNA 的新手

我正在寻找一个描述如何在模型中旋转骨骼的示例，我发现[http://create.msdn.com/en-US/education/catalog/sample/skinned_model](http://create.msdn.com/en-US/education/catalog/sample/skinned_model)

在其内容中有名为“dude.fbx”的模​​型我试图更改模型但它总是给出错误，例如：“无动画”或“无皮肤数据”

有没有像“dude.fbx”这样的免费模型可以在蒙皮模型样本中正常工作？或者我怎样才能建立这样的模型？

谢谢

（抱歉英语不好^_^）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T00:40:56.447

您需要导出包含动画的模型（我发现`.x`文件格式比`.fbx`这更好），如果您使用的是 3ds max，我建议使用[kW-Xport](http://www.kwxport.org/)，这是我使用的。如果您使用的是搅拌机，[这](http://directpython.sourceforge.net/exportx.html)似乎很有希望，尽管我没有搅拌机来确定。

请务必选中与动画相关的任何框，以便将其与模型一起导出，并列出动画。在 3ds Max 中使用我提到的导出器，您可以在右侧的框中命名多个动画。

将模型带入 XNA 后，确保将`Content Processor`设置为正确的项目，我相信它是`SkinnedModelProcessor`，或类似的东西。

[最后， TurboSquid](http://www.turbosquid.com/XNA)的 XNA 页面上有一些免费模型。

# cocoa - NSOutlineView 源列表部分标题

> ID：10260528
> 
> 赞同：2
> 
> 时间：2012-04-21T15:51:20.280
> 
> 标签：cocoa, delegates, datasource, nsoutlineview

我正在使用基于视图的 NSOutlineView 创建源列表。NSOutlineView 连接到数据源和委托对象。

但是，我似乎找不到我需要实现什么才能使用节标题（例如，iTunes 中的“LIBRARY”、“STORE”、“DEVICES”等）。我需要在数据源/委托中实现哪些方法来实现这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-21T16:24:05.673

IIRC 你只需要实现`NSOutlineViewDelegate`.`outlineView:isGroupItem:`

# c++ - 删除元素时无法使用 STL 映射的迭代器

> ID：10260530
> 
> 赞同：0
> 
> 时间：2012-04-21T15:51:47.533
> 
> 标签：c++, stl, map, iterator

我正在循环通过 STL 映射来删除元素并进行一些清理。对我来说不幸的是，我的程序在 ++iter 行上崩溃了。我在地图上循环的方式有问题吗？

```
std::map<string,BoneHierarchy* >::iterator iter = boneMap.begin();
while(iter != boneMap.end()) {
    string playerName = iter->first;
    boneMap[playerName]->clear();
    boneQueue->push(boneMap[playerName]);
    boneMap.erase(iter);
    ++iter;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-21T15:55:12.757

删除迭代器后不要增加它（它已被删除，那么你怎么能期望增加它？）。使用以下命令擦除迭代器的副本：

```
boneMap.erase(iter++); 
```

或者做

```
iter = boneMap.erase(iter); 
```

如果使用 C++11。

（另请参阅[通过 for 循环从 C++ 映射中删除元素](https://stackoverflow.com/questions/5191644/removing-elements-from-a-c-map-through-a-for-loop)）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T15:55:16.363

```
boneMap.erase(iter);
++iter;                     //incorrect 
```

应该写成：

```
iter = boneMap.erase(iter); //correct (in C++11)
//no need to increment! 
```

因为[`map::erase()`在删除的 item 之后返回迭代器](http://en.cppreference.com/w/cpp/container/map/erase)。

# javascript - 如果访问者有移动设备，则阻止从网站加载图像......意见？

> ID：10260534
> 
> 赞同：1
> 
> 时间：2012-04-21T15:52:40.763
> 
> 标签：javascript, iphone, mobile, user-agent

我正在使用媒体查询，但不幸的是，在确定用户代理（如谷歌、Facebook 和其他网站）方面，它们不如专门针对移动设备的简单“整体”版本的网站。我不想做一个特别的版本，因为我已经将整个网站翻译成媒体查询。最重要的是，这种方法在加载页面的重量方面没有灵活性，这对手机所有者来说至关重要（在我们国家，移动互联网仍然非常昂贵+图像降低性能）。我已经成熟了使用 Javascript 的想法，这将阻止浏览器以特定规则（例如屏幕分辨率）加载图像。你怎么想——实际上已经实现了，并且可能已经实施？我知道很多聪明人都访问过这个网站，我真的很想听听您在这方面的宝贵经验！

抱歉英语不好。

**更新：** [防止图像加载](https://stackoverflow.com/questions/1667868/prevent-images-from-loading)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-04T15:28:12.203

这个问题有许多可能的解决方案。我将在下面列出常见的三个。

如果您不关心旧版浏览器，则可以使用纯 CSS 解决方案、javascript 解决方案和 HTML5 解决方案：

## CSS

我建议将图像移动到样式标签中并使用媒体查询来显示适当的图像：

```
<style>
/* mobile first */
.img {
    display:none;
}

/* tablet */
@media (min-width:600px) {
    .img {
        background:url('/path/to/image-tablet.png') no-repeat scroll 0 0 transparent;
    }
}

/* desktop */
@media (min-width:1280px) {
    .img {
        background:url('/path/to/image-large.png') no-repeat scroll 0 0 transparent;
    }
}
</style>

<div class="img"></div> 
```

假设这是一个动态网页，您将`style`在带有标签的页面中包含 css，而不是在 css 文件中。

## HTML5

如果您不关心完整的浏览器覆盖 ( [canIuse](http://caniuse.com/#search=picture) )，您还可以使用新的 HTML5`picture`元素：

```
<picture>
  <source 
    media="(min-width: 1280px)"
    srcset="/path/to/image-large.png">
  <source 
    media="(min-width: 600px)"
    srcset="/path/to/image-tablet.png">
  <img src="/path/to/image-mobile.png" /> <!-- a 1x1 empty pixel -->
</picture> 
```

在此示例中，移动浏览器和不支持它的浏览器将加载该`img`标签。其他浏览器将为媒体查询加载适当的图像。

如果你喜欢这个解决方案，但也希望它在旧浏览器上工作，你可以找到一些 JS 脚本，如果浏览器不支持它，它们将实现该功能。

## Javascript

这种方法对我来说是最骇人听闻的，但这只是我的看法。它的浏览器覆盖范围非常大，IE 从 10 开始就支持这种方法。

创建一个不带`src`属性的图像标签，并将图像大小版本作为`data`属性：

```
<img data-tablet="/path/to/tablet.png" data-desktop="/path/to/large.png" />

<script>
var $el = jQuery('img');
if(window.matchMedia("(min-width: 600px)").matches) {
    $el.attr('src', $el.data('tablet'));
}
if(window.matchMedia("(min-width: 1280px)").matches) {
    $el.attr('src', $el.data('desktop'));
}
</script> 
```

我使用 jQuery 来演示，但其中重要的部分是`window.matchMedia`. 这会执行类似检查的媒体查询并返回一个布尔值。

# javascript - 将 agility.js 对象附加到自定义元素？

> ID：10260535
> 
> 赞同：0
> 
> 时间：2012-04-21T15:52:45.897
> 
> 标签：javascript, model-view-controller

我找到[了 Agility.js](http://agilityjs.com/)库，我喜欢它创建和操作对象的方式。但是，在所有示例中，对象都附加到文档中（表示为`$$.document`）。

是否可以将对象附加到自定义元素（即告诉视图在自定义元素中插入 HTML 标记）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T20:06:38.193

Marc 的方法可能有效，但我一直在做的是：

```
$$.document.append(cities, '#cities-container'); 
```

基本上， append 的第二个参数使您能够选择一个选择器来将新的 DOM 元素推入其中。不是很直观，但根据我的经验似乎可以正常工作。

# ios - Viewcontrollers 添加到 tabbarcontroller 后失去交互性

> ID：10260537
> 
> 赞同：0
> 
> 时间：2012-04-21T15:52:58.657
> 
> 标签：ios, uiviewcontroller, uitabbarcontroller, non-interactive

我以编程方式添加了 tabbarcontroller，然后向其中添加了两个视图控制器。相同的代码是：

ExampleViewcontroller.m

```
self.tabController = [[UITabBarController alloc] init];

viewController1 =[[invoiceviewcontrolleralloc]
initWithNibName:@"invoiceviewcontroller" bundle:nil];

viewController1.title = @"Unpaid Invoice";

viewController2=[[remittanceviewcontrolleralloc]
initWithNibName:@"remittanceviewcontroller" bundle:nil];

tabController.view.frame = CGRectMake(0, 0, 320, 460);

self.tabController.viewControllers = [NSArray arrayWithObjects:
viewController1,viewController2,nil];

[self.view addSubview:tabController.view]; 
tabController.delegate=self;

self.view bringSubviewToFront:tabController.view]; 
```

而tabbarcontroller的方法如下：-

```
-(void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:
(UIViewController *)viewController
{

if(tabController.selectedIndex==0)
{
[viewController2.view removeFromSuperview];

[self.view addSubview:viewController1.view];
}

else  if(tabController.selectedIndex==1)
{    
[viewController1.view removeFromSuperview];

[self.view addSubview:viewController2.view];
}

[self.view bringSubviewToFront:tabController.view];
} 
```

代码运行良好，但是当我单击第二个选项卡时，viewcontroller 附加到失去交互性，即其中的功能不响应单击。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T17:12:40.677

UITabBarController 旨在位于 UIVIewController 层次结构的顶部，或直接以模态方式呈现。你不能把它的视图放在你的 UIViewControllers 的另一个视图中，并期望它正常工作。事实上，每当您发现自己手动将一个视图控制器的视图添加到另一个视图控制器时，您可能做错了。如果您使用得当，视图控制器将为您处理这些事情。

请在此处阅读“创建标签栏界面”并特别注意要点：http: [//developer.apple.com/library/ios/ipad/#documentation/WindowsViews/Conceptual/ViewControllerCatalog/Chapters/TabBarControllers.html# //apple_ref/doc/uid/TP40011313-CH3](http://developer.apple.com/library/ios/ipad/#documentation/WindowsViews/Conceptual/ViewControllerCatalog/Chapters/TabBarControllers.html#//apple_ref/doc/uid/TP40011313-CH3)

# .net - 从 SQL 到 .Net monthCalendar.BoldDates？

> ID：10260538
> 
> 赞同：1
> 
> 时间：2012-04-21T15:53:13.480
> 
> 标签：.net, sql, datetime, date, monthcalendar

是否可以从 SQL 服务器中选择日期并将它们用于一个月日历中的粗体日期？:)

对于一个月日历中的 BoldDates，我使用了以下代码：

```
 DateTime[] Reserveret = new DateTime[3];
        Reserveret[0] = new DateTime(2012, 04, 25);
        Reserveret[1] = new DateTime(2012, 04, 01);
        Reserveret[2] = new DateTime(2012, 04, 12);

        monthCalendar1.BoldedDates = Reserveret; 
```

这将加粗月份Calendar1 中的这3 个日期。

但是我不想硬编码这些日期，而是想从我的 SQL 数据库中选择它们，其中包含 3 列，如下所示：

```
 ID       Room           Date
        1        103            2012-04-18
        2        106            2012-04-07
        3        103            2012-04-23
        4        103            2012-04-14
        5        101            2012-04-11 
```

我的最终目标是按下例如 Button103，然后 2012-04-18 & 2012-04-23 & 2012-04-14 将在月历中加粗。但我不是数组专家，我认为这里需要：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-28T07:52:00.127

我给这个问题+1，因为我正要问同样的问题，但我找到了解决办法，是的，可以按照他的要求去做。

这篇关于[数组和集合](http://msdn.microsoft.com/en-us/library/9ct4ey7x%28v=vs.90%29.aspx)的文章对我有帮助，我在这个例子中使用了一个[通用列表](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)，因为我认为在我们从数据库中获取记录时将项目添加到动态集合中更容易。我更改了一些代码以匹配问题。

```
//create a class and paste this.

public class createsCollection
{
    private static SqlConnection getConnection()
    {
        SqlConnection con = new SqlConnection();
        con.ConnectionString = @"Data Source=yourPCName\SQLEXPRESS;Initial Catalog=..";
        return con;
    }

    public static List <DateTime?> datesList(string room)
    {
      using (var con = new SqlConnection(getConnection().ConnectionString))
      {
        SqlDataReader dReader;
        List <DateTime?> dates = new List<DateTime?>();
        var cad = "SELECT Date from yourTbl where room = @Rn";

        using (var sqlCommand = new SqlCommand(cad, con))
        {
          try
          {   sqlCommand.CommandType = CommandType.Text
              sqlCommand.Parameters.AddWithValue("@Rn", room);
              con.Open();
              dReader = sqlCommand.ExecuteReader();

              if (dReader.HasRows == true)
              {
                while (dReader.Read())
                dates.Add(DateTime.Parse(dReader["Date"].ToString()));
              }
              return dates;
          }
          catch (Exception ex)
          { MessageBox.Show("Error: " + ex.Message);
            return null;
          }
        }
      }
    } 
  } 
```

在您的表格中：

```
List<DateTime?> datesLst = new List<DateTime?>();
List<DateTime> notNullableList = new List<DateTime>(); 

private void Form_Load(object sender, EventArgs e)
{
  datesLst = createsCollection.datesList("103"); //this can be changed e.g Button.Text

  //We need to convert the nullable DateTime List 'datesLst' to a non-nullable 
  //DateTime array in order to pass it to the BoldedDates Property.

  if (datesLst != null) //if there were records from the db
  {
      foreach (DateTime? dtm in datesLst)
      {
         string str = dtm.GetValueOrDefault().ToShortDateString();
         DateTime val;

         if (DateTime.TryParse(str, out val))
         {
           notNullableList.Add(val); //add not-null value to the new generic list
         }
       }
       monthCalendar1.BoldedDates = notNullableList.ToArray(); //bold the dates gathered from the db to the Month Calendar
       monthCalendar1.Update();
       monthCalendar1.UpdateBoldedDates();
   }
} 
```

这是一种方法，我相信有更好的方法来实现它，但是当我测试它时，这对我来说非常有用。

如果要使用固定大小的[Array](http://msdn.microsoft.com/en-us/library/system.array%28v=vs.110%29.aspx)而不是[List](http://msdn.microsoft.com/en-us/library/6sh2ey19%28v=vs.110%29.aspx)，您可能需要执行第一个[查询](https://stackoverflow.com/questions/1383315/how-to-get-number-of-rows-using-sqldatareader-in-c-sharp)，根据指定条件返回 (Date) 行数并将其设置为数组[大小](https://stackoverflow.com/questions/5678216/all-possible-c-sharp-array-initialization-syntaxes)，也不必返回一个可以为[空](http://msdn.microsoft.com/en-us/library/1t3y8s4s.aspx)的列表，但我这样做是我的偏好。干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T16:09:43.813

尝试这样的事情。

```
protected void Calendar1_DayRender(object sender, DayRenderEventArgs e)
{ 
    for (int i = 0; i < Reserveret .Length; i++)
    {
        if (e.Day.Date == Reserveret ) 
        { 
            e.Cell.Font.Bold = true; 
            //e.Cell.BackColor = System.Drawing.Color.red;  //You may also try this 
        } 
     }
 } 
```

# jquery - 如何从 jQuery 选项卡链接到另一个选项卡？（特定的 jQuery 选项卡式界面）

> ID：10260543
> 
> 赞同：0
> 
> 时间：2012-04-21T15:53:33.603
> 
> 标签：jquery, hyperlink, tabs, linker, internal

我正在一个使用这个特定 jQuery 选项卡界面的网站上工作：

[http://www.queness.com/post/106/jquery-tabbed-interfacetabbed-structure-menu-tutorial](http://www.queness.com/post/106/jquery-tabbed-interfacetabbed-structure-menu-tutorial)

我被要求在选项卡 1 上创建一个链接，例如打开选项卡 4（它的行为必须与我直接单击选项卡 4 一样，因此无需重新加载页面）。我已经尝试了我能想到的一切。我还搜索了几个小时以寻找解决方案或提示，但我发现的所有内容都不适用于此选项卡系统。

任何帮助将非常感激。

翁德雷

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T16:00:22.490

jQuery UI Tab Widget 有一个[select 方法](http://jqueryui.com/demos/tabs/#method-select)：

所以你可以在标签容器上插入一个调用该方法的链接

```
<a href="#" onclick="$('#myDiv').tabs('select',2)">Switch Tab</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T16:01:44.330

关于您的代码的最简单方法是：

```
$('#tabMenu li').eq(2).click() 
```

例如，如果要链接到第二个选项卡，请使用以下命令：

```
<a onclick="$('#tabMenu li').eq(2).click()">Click it</a> 
```

请注意 eq() 以 0 开头。例如 eq(4) 选择第五个选项卡。

# go - golang如何创建缓冲区以传递给C dll函数？

> ID：10260555
> 
> 赞同：5
> 
> 时间：2012-04-21T15:54:57.547
> 
> 标签：go

我需要从来自 dll 的 golang 调用 C API。问题是C func需要一个缓冲区，如何在golang中创建缓冲区，然后我可以将缓冲区传递给C func？

```
void fooGetString(char* buffer, int buffer length) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T01:10:51.950

像这样的东西应该工作：

```
s := make([]byte, 256)
C.fooGetString((*C.char)(unsafe.Pointer(&s[0])), C.int(len(s))) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-22T11:22:05.517

```
package main

// #include <string.h>
// void foo(char *s, int len) {
//     strncpy(s, "foo", len);
// }
import "C"

import "fmt"
import "unsafe"

func main() {
    buf := make([]byte, 256)
    C.foo((*C.char)(unsafe.Pointer(&buf[0])), C.int(len(buf)))
    fmt.Println(string(buf))
} 
```

输出：

```
foo 
```

# facebook-graph-api - 是否有包含国家、州、语言、区号、城市、邮政编码和时区的完整 i18n 列表的公共数据集？

> ID：10260559
> 
> 赞同：3
> 
> 时间：2012-04-21T15:55:20.260
> 
> 标签：facebook-graph-api, internationalization, yahoo-api, master-data-services

我正在为全球受众开发一个通用应用程序，并希望捕获此主数据，以便可以开发适当的 UI 组件来支持自动完成和相关选项列表等功能。

我正在寻找的主数据是：

```
Country
--> ISO Country Codes, Telephone Codes, IP Address Ranges, Timezone Info, Capital Cities
--> State/Regions/Provinces
-----> State Codes, Telephone Area Codes, IP Address Ranges, Timezone Info, Capital Cities
-----> Districts/Counties
-----> Timezone Info (Constant Timezones Counties in USA such as in Indiana)
--------> Cities
------------> Postal Codes, IP Address Ranges 
```

我检查了 GeoNames，但数据似乎并未涵盖所有信息。我还检查了 Facebook API，但没有完整的下载。我还检查了其他问题中提到的来源，例如 opensourcegis、osgeo 和 freegis

我可以找到一些商业软件包，例如 GeoDataSource，但我宁愿拥有一个具有 Apache / CreativeCommons 许可证的公共数据集。

我可以找到参考 Yahoo! Geo PlaceFinder 等 Web 服务，但希望将数据作为电子表格、制表符分隔文件、XML 或可能是数据库转储，这将是很棒的。如果有一种方法可以捕获这个公共数据集的增量更新，那就更好了。

如果没有可用的，我可能只需要开发一个针对此要求量身定制的简单众包应用程序。

# java - 由于类型检查或三元运算符导致编译错误？

> ID：10260562
> 
> 赞同：0
> 
> 时间：2012-04-21T15:55:49.683
> 
> 标签：java

最近我在下面的代码中遇到了编译错误：

```
import org.eclipse.swt.widgets.TreeItem;
Object parent; // can only be a Tree or a TreeItem    
...
TreeItem item = new TreeItem((parent instanceof TreeItem) ? (TreeItem) parent : (Tree) parent, SWT.NONE); 
```

编译器说：“构造函数 TreeItem(Widget, int) 未定义”

然后我用另一个代码尝试了它：

```
Object x = new Integer(1);

Test t = new Test((x instanceof String) ? (String) x : (Integer) x);

class Test{
    public Test(String s){}
    public Test(Integer i){}
} 
```

并得到另一个错误：“构造函数 Test(Object&Serializable&Comparable) 未定义”

所以我被迫使用传统的 if-else 结构。任何想法为什么编译器会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T16:03:57.577

[JLS §15.25](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.25)描述了三元运算符。

> 否则，第二个和第三个操作数分别是 S1 和 S2 类型。令 T1 为对 S1 应用装箱转换产生的类型，令 T2 为对 S2 应用装箱转换产生的类型。
> 
> 条件表达式的类型是将捕获转换 ( [§5.1.10](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.10) ) 应用于 lub(T1, T2) ( [§15.12.2.7](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.2.7) ) 的结果。

基本上，您可以将三元运算符视为一种方法：它只能有一个“返回类型”。由于`String`和`Integer`是两个不同的对象，它找到共同的超类和两者实现的所有接口，并从中创建一个返回类型。（`String`并且`Integer`都实现`Serializable`和`Comparable`扩展`Object`，所以你得到`Object & Serializable & Comparable`。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T16:04:15.533

原因很简单：Ternary-Operators 结果是静态类型。在进行这种类型转换时，将返回的类型是两个可能结果中使用的类型的共同祖先。在您的第一个示例中，小部件是 TreeItem 和 Tree 的共同祖先，在第二个示例中，来自 String 和 Integer 的共同祖先是 Object。因此，当您将此类操作的结果用于新操作时，您需要该通用类型的构造函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T16:04:15.557

好像我们在谈论这[`TreeItem`](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fswt%2Fwidgets%2FTreeItem.html)门课。请注意，构造函数接受`Tree`或`TreeItem`。

现在，您正在尝试`Object`使用`instanceof`. 到目前为止一切都很好（但是设计有点争议）。不幸的是，三元运算符表达式类型必须在编译时解析。和 最具体的常见超类是，`TreeItem`与此方法进行比较：`Tree``Widget`

```
public Widget smartCast(Object parent) {
    if(parent instanceof TreeItem) {
        return (TreeItem)parent;
    } else {
        return (Tree)parent;
    }
} 
```

`smartCast`不能有任何其他返回类型`Widget`，就像您的三元运算符一样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-21T16:04:46.883

创建对象时，Java 似乎需要知道在编译时要使用哪个特定的构造函数。

之所以给出这个奇怪的错误，构造函数 Test(Object&Serializable&Comparable) 是因为 Integer 和 String 都继承自这 3 个（Object、Serializable、Comparable）。所以在编译时，如果你有一个构造函数接受其中任何一个，Java 就会知道你想使用那个。

它与 Tree 和 TreeItem 相同。他们共同的父它Widget。所以它需要 1 个可以同时接受这两个项目的构造函数。

它不能在运行时为一个新语句选择 2 个不同的构造函数。

# javascript - HTML、JS：定位元素不准确

> ID：10260564
> 
> 赞同：1
> 
> 时间：2012-04-21T15:55:53.803
> 
> 标签：javascript, html, dhtml

我的目标是将下拉列表放入单元格中。

```
var obj = document.getElementById('dropdown');
var coords = { x: 0, y: 0 };
var element = this;
while (element)
{
 coords.x += element.offsetLeft;
 coords.y += element.offsetTop;
 element = element.offsetParent;
}
obj.style.left = coords.x+'px';
obj.style.top = coords.y+'px'; 
```

但是，这无法找到准确的位置。如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T16:00:42.727

这种方法应该可以完美地工作，也许是其他东西弄乱了定位？

如果您有一个带有 style`position: relative`的元素，则添加到带有 style`position: absolute`的元素的元素仍然相对于该元素。如果您尝试仅通过查看偏移量然后向上走（忽略任何相对定位的元素）来确定元素的位置，您将无法获得正确的值。您应该找到具有相对定位的最接近的公共元素并获得该元素的偏移量。

# javascript - jquery中的animate()如何影响页面流和溢出属性？

> ID：10260570
> 
> 赞同：0
> 
> 时间：2012-04-21T15:56:48.433
> 
> 标签：javascript, jquery, html, animation, overflow

大家好，我刚读完我的第一本 xhtml/css 书，现在正在阅读 javascript/html 书。我想制作一个非常简单的效果，但无法弄清楚，因为我不熟悉 jquery（以及 javascript）。

所以我想要这样的效果：[kk.pcriot.com/websites.html](http://kk.pcriot.com/websites.html)

图像四处移动但其边框周围有一种“遮罩”，因此其支架固定到位但图像移动（鼠标悬停）。一旦鼠标光标没有悬停在图像上，图像应该会重新回到原来的位置，但这看起来很简单。现在我只是想弄清楚如何创建那个蒙版......它很简单，有一个静态图像和`overflow:hidden`属性，但我认为`animate()`将元素从流程中取出或其他东西，因为我无法让溢出工作. 也许它也与位置属性有关。

这是我的代码：

CSS：

```
div { width : 100px; height: 100px;
  border: thin solid red;
  overflow:hidden;
  }

img { position:absolute;
height: 200px;
width: 300px; 
```

;}

脚本：

```
 <script src="jquery-1.7.2.js"></script>
<script>
$(document).ready(function(){

$("#clickme").click(function() {
   $("#book").animate({

    left: '+=150',

  } 
 }); 
```

身体：

```
<div id="clickme">
  Click here
</div>
<image id="book" src="../Images/test.jpg"  (Newbs cant post images so I didnt use IMG)
   /> 
```

所以......它确实动画但溢出属性不起作用。当我取出脚本时，溢出属性确实有效，但显然动画没有！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T16:24:35.397

```
overflow: hidden 
```

仅适用于您的情况，当父级也具有绝对位置时。还要注意@Sparky672 的评论。图像必须在 div 内。

我为您设置了一个演示：

[http://jsfiddle.net/Q4zXd/](http://jsfiddle.net/Q4zXd/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T23:43:17.053

更新了 jsfiddle 以在悬停时移动图像并清理 CSS。[http://jsfiddle.net/Q4zXd/3/](http://jsfiddle.net/Q4zXd/3/)

如果您希望图像大于容器并隐藏其中的一部分，然后当您将鼠标悬停在该区域上时移动到视图中，则需要将图像放在容器中。

您需要将容器定位为相对的原因是使定位的内部元素（img）本身相对于包含元素而不是窗口的绝对位置。默认情况下，绝对定位的元素会从文档流中取出并相对于窗口而不是包含元素定位，除非包含元素相对定位（绝对也可以，但是该元素不再在文档中流动。）

# javascript - 如何在 HTML5 Canvas 上绘图时删除阴影

> ID：10260572
> 
> 赞同：3
> 
> 时间：2012-04-21T15:57:03.210
> 
> 标签：javascript, html, canvas

我正在用 HTML5 Canvas 画一个谜题。

到目前为止的完整代码在这里：[https ://github.com/Integralist/HTML5-Image-Slider-Game](https://github.com/Integralist/HTML5-Image-Slider-Game)

总是有一个空白空间，当用户单击一块拼图时，我将其移入空白空间。

但是当我这样做时，拼图会显示一个阴影，见下图。

[![](../Images/0cd5dac5763e93b65a80fbfbd480c5c4.png)](https://i.stack.imgur.com/KsWXy.png)

任何想法为什么会发生这种情况？是因为我在画布中已经存在的内容之上绘图吗？是在绘制之前清除画布的解决方法吗？如果是这样，有没有办法我可以做到这一点而不必重新绘制所有其他拼图，因为我不确定如何最好地做到这一点。

更新：我尝试清除整个画布，然后将拼图块绘制到空白空间，但它仍然是用投影绘制的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T16:41:14.903

在第 74 和 75 行，您将阴影偏移设置为 2px。一旦您开始绘制零件，就需要将其设置回 0。

# deployment - 使用 Bundler 将 Sinatra 应用程序部署到 Heroku - 未找到 Gem

> ID：10260575
> 
> 赞同：0
> 
> 时间：2012-04-21T15:57:13.823
> 
> 标签：deployment, heroku, rubygems, sinatra, bundler

我正在将 Sinatra 应用程序部署到 Heroku。我正在为我的依赖项使用 Bundler。当我在我的机器上运行它时，它没有问题。我用这个启动它

配置.ru

```
require "rubygems"
require "bundler"

require "net/http"
require "uri"

Bundler.require

require './application'
run Sinatra::Application 
```

还有这个

宝石文件

```
source :gemcutter

gem "sinatra"
gem "aws-s3"
gem "zipruby"
gem "bson_ext"
gem "mongo"
gem "json"
gem "sinatra-subdomain" 
```

当我推动它时，没有错误。它显示捆绑安装正常。然后，当我访问 URL 时，我收到一个应用程序错误。查看`heroku logs`，错误是`Unexpected error while processing request: undefined method 'subdomain' for main:Object`。那是指我正在使用的 sinatra-subdomain gem。如果我注释掉子域部分，下一个 gem，aws/s3，会给出一个错误。我在文档中找不到任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T16:39:38.333

你运行的是相同版本的 Ruby 吗？`heroku stack`在 heroku 和`ruby -v`本地机器上进行比较。我还会从 heroku 日志中发布更长的堆栈跟踪：`heroku logs -n10000`

# c - C中的无限循环

> ID：10260579
> 
> 赞同：0
> 
> 时间：2012-04-21T15:57:32.243
> 
> 标签：c, codeblocks

```
#include <stdio.h>

int main()
{
    char _char = 32;
    int x, p, i, d;
    scanf("%d ", &x);
    while(_char == 32)
        _char = getchar();
    x = x%26;
    printf("The encrypted string is: ");
    while((_char >= 'a' && _char <= 'z') || (_char >= 'A' && _char <= 'Z'))
    {
        if(_char >= 'a' && _char <= 'z')
            _char = 'a' + (_char + x - 'a')%26;
        else
            _char = 'A' + (_char + x - 'A')%26;
        d = 'a' - 'A';
        p = (_char >= 'a') ? _char - d : _char + d;
        printf("%c", p);
        scanf("%c", &_char);
    }
    return 0;
} 
```

代码说明：程序接收一个数字'x'后跟空格，然后是一个字母序列，然后它会打印这些字母（修改），直到第一个数字或没有更多的字母接收。当我在代码块中运行它时它工作正常但是当我使用 CMD 将输入作为文件插入时，如果我插入，这会给我一个无限循环：

```
1   FffF 
```

当我添加 0 或任何数字时，它工作正常：

```
1   FffF0 
```

无限循环是这样的：

加密字符串为： `BBBcccDDDeeefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyz....`

我怎么能喜欢这个！？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T16:03:51.427

如果没有更多的输入要扫描，

```
 scanf("%c", &_char); 
```

不修改`_char`。您必须检查扫描的返回值，

```
if (scanf("%c",&_char) < 1) break; 
```

然后退出循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T16:06:07.740

您不检查 的返回值`scanf`，因此您不会检测到输入已经结束。Scanf 返回匹配项目的数量，成功时为 1。当在第一项之前到达文件结尾时，它返回 -1。

所以你应该在不返回 1`break`时循环。`scanf`

# html - Apple iOS Enterprise Developer Program 设备检查

> ID：10260584
> 
> 赞同：0
> 
> 时间：2012-04-21T15:58:16.390
> 
> 标签：html, ios, download, user-agent

我正在使用 iOS 开发人员计划开发一个应用程序。我了解我需要将我网站上的下载按钮链接到清单 .plist 文件，该文件提供了应用程序的位置。我也明白这个文件必须由 iOS 设备下载。那么，如何确保清单文件仅由 iOS 设备下载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T16:49:57.130

您可以简单地检查环境是否`HTTP_USER_AGENT`包含字符串`iPhone`或`iPad`（因为即使 iPod touch 在用户代理字符串中也有 iPhone）。

```
<?php
   $user_agent = $_SERVER['HTTP_USER_AGENT'];

   if ((stripos(user_agent, "iPhone") == FALSE) && (stripos(user_agent, "iPad") == FALSE))
        // do something here (e.g. hide the div, prevent file download, etc.
?> 
```

# css - 设置表格内的间距

> ID：10260585
> 
> 赞同：0
> 
> 时间：2012-04-21T15:58:17.357
> 
> 标签：css, css-tables

我的 CSS 中有以下代码：

```
#cartTable {
width:100%;
border-collapse: collapse;
border-spacing: 0px;

}

#cartTable td {
text-align: center;
color:#ffffff;
font-family: 'AllerBoldItalic', Arial, serif;
font-size: 14px;
border-top:1px solid;
border-bottom:1px solid;
border-color:#c8a300;   
}

#cartTable td img{
 position: relative;
top: 10px;   
}

.cartText{
 padding-bottom:10px;
}

#cartTable input[type="text"] {
width:50px;
height:15px;
vertical-align:bottom;
margin-bottom:5px;
 }

#cartTable select {
width:100px;
height:25px;
position: relative;
top: 10px;
padding-bottom:10px;
} 
```

我的问题是具有 cartText 类的文本粘贴在行的底部，而我希望与图像或我的选择和文本框元素具有相同的高度。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T15:25:07.590

更改行高，使其与字体大小相同

# c++ - c++中的构造函数调用

> ID：10260589
> 
> 赞同：0
> 
> 时间：2012-04-21T15:58:32.920
> 
> 标签：c++, class, constructor

仅在创建对象后才将内存分配给类中的变量..对吗？那么如果该类包含一个变量，该变量是另一个类的对象并且该变量具有构造函数呢？

```
class Wand
{
    mouse mouseEmu(0,0);
    QCursor pt;
}; 
```

`mouseEmu`并且`QCursor`是两个班级...

什么时候是被调用的构造函数，`mouseEmu`什么时候是被调用的默认构造函数`pt`？

如果我们指定一个，是否有必要调用参数化构造函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T16:00:40.963

> 什么时候调用 mouseEmu 的构造函数，什么时候调用 pt 的默认构造函数？

当前构造对象的所有数据成员和基类子对象都在进入当前对象的构造函数体之前完全构造完毕。因此，如果您的类有一个用户定义的构造函数，那么当用户定义的构造函数中的代码执行时，该类的所有其他子对象都已完成其构造函数。

如果由于某种原因您需要为子对象设置用户定义的初始化值，并且该子对象具有非默认构造函数，那么您可以使用带有当前对象构造函数的初始化列表将值传递给子对象的构造函数。例如：

```
class Wand
{
    mouse mouseEmu;
    QCursor pt;

    Wand(): mouseEmu(0,0) {} //empty constructor body with initialization list
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T16:08:56.113

# 新问题（或旧问题，取决于您到达的时间）

```
class Wand
{
    mouse mouseEmu(0,0);
             //   ^^^^^^  This bit is illegal.
             //           Remove it here. You specify the parameters
             //           Passed to members in the constructor.
    QCursor pt;
}; 
```

你想要的是：

```
class Wand
{
    Ward(): mouseEmu(0,0) {}
    mouse mouseEmu;
    QCursor pt;
}; 
```

# 编辑：

根据更改为非法之前的问题进行回答。

如果您不提供构造函数，则编译器会为您植入一个隐式默认构造函数：

```
Wand::Wand()
  : mouseEmu()
  , pt()
{} 
```

当你创建一个 Wand 对象时。作为 Wand 对象构造的一部分，它将自动创建和初始化其成员（mouseEmu 和 pt）。调用它们的构造函数（按照类中声明的顺序）。

注意：如果您定义自己的构造函数。但是不要显式调用成员的构造函数，然后隐式调用成员默认构造函数（成员的构造顺序**始终**是声明的顺序。

```
 // Example:
 // If you did:

 class Wand
 {
      Wand(int x) : mouseEmu(0,x) {}

      // The above will generate this logical code.
      Wand(int x) : mouseEmu(0,x), pt() {}
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T16:00:02.100

这不是合法的 C++ 语法。看起来您正在声明一个函数，但`0`它不是有效的类型标识符。

子对象的构造函数（基类和成员变量）是从类的构造函数中调用的，包括编译器生成的构造函数。

ctor *-initializer-list*允许您为子对象构造函数指定参数。它看起来像这样：

```
class Wand
{
    mouse mouseEmu;

    QCursor pt;
public:
    Wand() : mouseEmu(0,0) {}
}; 
```

这样，您的`mouseEmu`子对象将使用双参数构造函数`pt`进行初始化，并由其默认（零参数）构造函数进行初始化。

编译器生成的复制构造函数将通过调用复制构造函数并传递被复制对象的成员来初始化两个子`Wand`对象。

# python - the opposite of __add__?

> ID：10260596
> 
> 赞同：1
> 
> 时间：2012-04-21T15:59:16.393
> 
> 标签：python, python-3.x, operator-overloading

In python 3, I want to do operator overloading in a class I've made.

I know `__add__` stands for operator +.

What are the methods for `-`, `*`, `^`, `|` and `&`?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-21T16:02:27.667

See [the python docs on the data model](http://docs.python.org/py3k/reference/datamodel.html#emulating-numeric-types).

The methods you asked about are: `__sub__`, `__mul__`, `__xor__`, `__or__` and `__and__`

Here's the full list:

```
object.__add__(self, other)
object.__sub__(self, other)
object.__mul__(self, other)
object.__truediv__(self, other)
object.__floordiv__(self, other)
object.__mod__(self, other)
object.__divmod__(self, other)
object.__pow__(self, other[, modulo])
object.__lshift__(self, other)
object.__rshift__(self, other)
object.__and__(self, other)
object.__xor__(self, other)
object.__or__(self, other) 
```

# c# - 使用 C# 中的参数调用 PowerShell 脚本

> ID：10260597
> 
> 赞同：8
> 
> 时间：2012-04-21T15:59:22.660
> 
> 标签：c#, powershell

我有一个存储在文件中的 PowerShell 脚本。在 Windows PowerShell 中，我将脚本执行为
`.\MergeDocuments.ps1 "1.docx" "2.docx" "merge.docx"`

我想从 C# 调用脚本。目前我正在使用 Process.Start ，如下所示，效果很好：
`Process.Start(POWERSHELL_PATH, string.Format("-File \"{0}\" {1} {2}", SCRIPT_PATH, string.Join(" ", filesToMerge), outputFilename));`

我想使用`Pipeline`类来运行它，类似于下面的代码，但我不知道如何传递参数（请记住，我没有命名参数，我只是使用 $args）

```
// create Powershell runspace
Runspace runspace = RunspaceFactory.CreateRunspace();
runspace.Open();

RunspaceInvoke runSpaceInvoker = new RunspaceInvoke(runspace);
runSpaceInvoker.Invoke("Set-ExecutionPolicy Unrestricted");

// create a pipeline and feed it the script text (AddScript method) or use the filePath (Add method)
Pipeline pipeline = runspace.CreatePipeline();
Command command = new Command(SCRIPT_PATH);
command.Parameters.Add("", ""); // I don't have named paremeters
pipeline.Commands.Add(command);

pipeline.Invoke();
runspace.Close(); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-21T16:18:08.353

刚刚在另一个问题的评论中找到它

为了将参数传递给 $args 传递 null 作为参数名称，例如`command.Parameters.Add(null, "some value");`

该脚本被称为：
`.\MergeDocuments.ps1 "1.docx" "2.docx" "merge.docx"`

这是完整的代码：

```
class OpenXmlPowerTools
{
    static string SCRIPT_PATH = @"..\MergeDocuments.ps1";

    public static void UsingPowerShell(string[] filesToMerge, string outputFilename)
    {
        // create Powershell runspace
        Runspace runspace = RunspaceFactory.CreateRunspace();
        runspace.Open();

        RunspaceInvoke runSpaceInvoker = new RunspaceInvoke(runspace);
        runSpaceInvoker.Invoke("Set-ExecutionPolicy Unrestricted");

        // create a pipeline and feed it the script text
        Pipeline pipeline = runspace.CreatePipeline();
        Command command = new Command(SCRIPT_PATH);
        foreach (var file in filesToMerge)
        {
            command.Parameters.Add(null, file);
        }
        command.Parameters.Add(null, outputFilename);
        pipeline.Commands.Add(command);

        pipeline.Invoke();
        runspace.Close();
    }
}
```

# ajax - 将数据附加到 PJAX 请求

> ID：10260599
> 
> 赞同：8
> 
> 时间：2012-04-21T15:59:26.873
> 
> 标签：ajax, pjax

我正在使用 PJAX，它非常适合简单的示例，但我需要能够使用 PJAX 请求做一些高级的事情。

1.  我想在每个 PJAX 请求中附加一些数据。我要附加的数据实际上是一个对象数组。请参见下面的示例。
2.  我可能需要使用 POST 而不是 GET 进行 ajax 调用。
3.  我可能需要将内容类型更改为“application/json”。

我有以下...

```
var people = [{ first: "John", last: "Doe" }, { first: "Jane", last: "Smith" }];

$("a.sheet-link").pjax("#content");

$('#content').on('pjax:beforeSend', function (e, jqXHR, settings) {

  // Modify ajax request here?
  // Would like to append the people array to data
  // Would like to POST rather than GET
  // May need to change content-type to "application/json".

}); 
```

我尝试了各种方法...

*   使用 jQuery.ajaxSetup 设置一些默认值（我可以设置数据，但未附加 _pjax 数据元素；我尝试将类型设置为 POST，但没有坚持。）
*   尝试在 beforeSend 处理程序中修改 jqXHR 对象
*   尝试修改 beforeSend 处理程序中的设置对象

所有的尝试都给我带来了各种各样的问题。

我不确定为什么这如此困难。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T23:38:27.550

由于[文档](https://github.com/defunkt/jquery-pjax)指出：

> 您也可以直接调用 $.pjax。它的行为很像 $.ajax，甚至返回相同的东西并接受相同的选项。

我会尝试以下方法：

```
var people = [{ first: "John", last: "Doe" }, { first: "Jane", last: "Smith" }];

$('a.sheetlink').click(function(e) {
  e.preventDefault();
  $.pjax({
    type: 'POST',
    url: $(this).href,
    container: '#content',
    data: people,
    dataType: 'application/json'
  })
}); 
```

# c - 检查套接字是否在 C 中侦听

> ID：10260600
> 
> 赞同：15
> 
> 时间：2012-04-21T15:59:31.360
> 
> 标签：c, sockets, file-descriptor

在遍历套接字文件描述符时，如何检查其中一个是否来自被动套接字（侦听连接）？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-21T18:08:06.513

这可以通过[getsockopt](http://pubs.opengroup.org/onlinepubs/9699919799/functions/getsockopt.html) ( [SO_ACCEPTCONN](http://pubs.opengroup.org/onlinepubs/9699919799/functions/V2_chap02.html#tag_15_10_16) ) 检查。例如：

```
#include <sys/socket.h>

int val;
socklen_t len = sizeof(val);
if (getsockopt(fd, SOL_SOCKET, SO_ACCEPTCONN, &val, &len) == -1)
    printf("fd %d is not a socket\n", fd);
else if (val)
    printf("fd %d is a listening socket\n", fd);
else
    printf("fd %d is a non-listening socket\n", fd); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T17:02:11.087

您可以在命令行中运行（在 Mac/Linux 环境中）：

```
lsof -i 
```

和/或（Linux/Mac/Windows 环境）

```
netstat -a 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T17:58:09.970

严格来说，您可以尝试对套接字执行一个操作，该操作会偶然确定它是什么类型的套接字，例如尝试接受来自它的连接。如果`accept()`EINVAL 失败，这是一个很好的迹象，表明它没有在听。:)

不过，跟踪哪些套接字是总体上更好的解决方案。除非您正在构建一个非常简单的应用程序，否则您可能需要在每个套接字上保留某种附加数据。

# c - 我的 if 语句出现错误，我不知道为什么

> ID：10260602
> 
> 赞同：0
> 
> 时间：2012-04-21T15:59:43.867
> 
> 标签：c

这是我得到的错误......我错过了什么吗？我试图移动大括号，但它仍然不喜欢 else 语句

“else”之前的 91 语法错误

```
void admin_signIn(struct profile *puser)
{
     int i=0;
     char input[20];
     strncpy( puser->UserName, "password", strlen("admin")+1 );     
     strncpy( puser->Pwd, "password", strlen("password")+1 );
     for(i=0;i<3;i++)
     {
     printf("Enter admin user name:");
     fgets(input,10,stdin);
     rewind(stdin);    
     printf("Enter admin password:");
     fgets(input,10,stdin);
     rewind(stdin);

     if(strcmp(puser->UserName,input) && strcmp(puser->Pwd,input));
      {
        printf("the user name is good");
      }
        admin_menu(puser);
    else
      {
      printf("try again");
      }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T16:01:46.840

```
 if(strcmp(puser->UserName,input) && strcmp(puser->Pwd,input));
                                                              ^---here 
```

那个分号终止了 if()，然后你就`{`在下一行有一个悬空。没有 active `if()`，`else`是不允许的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T16:01:06.517

有一个 admin_menu(puser); 在其他之前

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T05:52:15.020

```
if(strcmp(puser->UserName,input) && strcmp(puser->Pwd,input)) 
```

你问这是否是一个正确的 if 语句。我会说它没有做你想要的。当两个参数匹配时，strcmp() 返回 0。此外，您正在将两个不同的变量与相同的输入字符串进行比较。

您可能希望将其重写为以下形式：

```
if(!strcmp(puser->UserName,input_Username) && !strcmp(puser->Pwd,input_Password))
{
    /* good login */
}
else
{
    /* failed login */
} 
```

当您让用户输入数据时，请务必使用两个单独的变量来存储密码和用户名，以便您可以在一个 if() 语句中进行测试。

[见 strcmp()](http://www.acm.uiuc.edu/webmonkeys/book/c_guide/2.14.html#strcmp "strcmp()")

# jquery - 点击两次后jquery图像轮播不起作用

> ID：10260605
> 
> 赞同：0
> 
> 时间：2012-04-21T15:59:58.263
> 
> 标签：jquery, image, carousel

我正在尝试制作一个简单的 jquery 图像轮播。

这是我的完整代码：http: [//jsfiddle.net/6fwbS/19/](http://jsfiddle.net/6fwbS/19/)

当您单击“增加”按钮将图像向左滑动并使其消失时，将调用以下函数。我遇到的问题是它似乎只工作一次。第一次单击它将下一个图像加载到容器中。第二次单击它会调用该警报两次。我不知道为什么它在第二次点击时两次调用警报。第三次单击它时，它根本不会发出警报。任何帮助将不胜感激。有关最终目标的示例，请在运行后单击减少。我最终在这里要做的是在单击每个按钮时将新图像放入容器并在图像中来回循环。

```
function slide_img_left() {

    var imgs = imgArr.length;

    a++;
    if (a >= imgs) {
        a = 0;
    }

    b = a - 1;
    c = a + 1;

    if (b < 0) {
        b = imgs - 1;
    }
    if (c >= imgs) {
        c = 0;
    }

    $('.left_slot').animate({
        opacity: 0,
        left: '-=50px'
    }, 300, function() {
        $('.left_slot').remove();
    });

    $('.middle_slot').animate({
        left: '-=50px'
    }, 300, function() {
        $('.middle_slot').attr('class', 'left_slot');
        $('.right_slot').attr('class', 'middle_slot');
        alert(c);

    });

    $('.right_slot').animate({
        left: '-=50px'
    }, 300);

    $("#basic_div").append(imgArr[c][0]);
        $("#varsDiv").html(" var b = " + b + " var a = " + a + " var c = " + c);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T19:29:54.280

问题是，`$('.left_slot')`在您的*完整回调中，可能会引用由其他**完整*回调之一创建的新左槽。

这是`slide_img_left()`fixed 的相关部分，因此它只发出一次警报：

```
var left = $('.left_slot');
var middle = $('.middle_slot');
var right = $('.right_slot');

left.animate({
    opacity: 0,
    left: '-=50px'
}, 300, function() {
    left.remove();
});

middle.animate({
    left: '-=50px'
}, 300, function() {
    middle.attr('class', 'left_slot');
    right.attr('class', 'middle_slot');
    alert(c);

});

right.animate({
    left: '-=50px'
}, 300); 
```

链接到更新的[jsFiddle](http://jsfiddle.net/9FMqz/)（**编辑：**更新了指向分叉版本的链接。）

# python - OpenCV：使用视频编写器复制视频时速度更快

> ID：10260610
> 
> 赞同：1
> 
> 时间：2012-04-21T16:00:14.910
> 
> 标签：python, video, opencv

我打开视频文件并将其逐帧复制到另一个文件，如下所示：

```
def copy1(in_file, out_file):
    capt = cv.CaptureFromFile(in_file)
    frames_num = int(cv.GetCaptureProperty(capt, cv.CV_CAP_PROP_FRAME_COUNT))
    fps = int(cv.GetCaptureProperty(capt, cv.CV_CAP_PROP_FPS))
    frame_width = int(cv.GetCaptureProperty(capt, cv.CV_CAP_PROP_FRAME_WIDTH))
    frame_height = int(cv.GetCaptureProperty(capt, cv.CV_CAP_PROP_FRAME_HEIGHT))
    vwriter = cv.CreateVideoWriter(out_file, cv.CV_FOURCC('P', 'I', 'M', '1'), fps, (frame_width, frame_height), True)
    for i in range(0, frames_num):
        frame = cv.QueryFrame(capt)
        if frame:
            cv.WriteFrame(vwriter, frame)
        else:
            pass
    print 'Processed', i, 'frames' 
```

但是，当我播放 时`out_file`，它比原来的要快。 通过将其转换为切断声音来`in_file`创建形式。显示和之间的唯一区别是比特率（大约高出 1倍）。这意味着什么？`ogv``mpeg1video``ffprobe``in_file``out_file``6``out_file`

# javascript - Dojo：在 1.7 中混合日历视图

> ID：10260613
> 
> 赞同：0
> 
> 时间：2012-04-21T16:00:26.570
> 
> 标签：javascript, calendar, widget, dojo

世界！

我正在尝试创建一个日期选择器小部件，它首先显示年份，然后是月份，然后是日期。从我在网上找到的示例（http://dojotoolkit.org/reference-guide/1.7/dojox/widget/Calendar.html）看来，这是可能的。我只需要知道它应该如何与AMD兼容？我试过这样的事情：

定义（['dojo/_base/declare'，'dojox/widget/_CalendarBase'，'dojox/widget/_CalendarDay'，'dojox/widget/_CalendarYear']，函数（声明，calendarBase，calendarDay，calendarYear）{声明（' lt.CustomSerialCalendar', [calendarBase, calendarDay, calendarYear], {}); });

但是我尝试过的任何方法似乎都不起作用。我尝试放入`dojox/widget/Calendar`依赖项列表，但出现`dojo not defined`错误。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T16:57:04.357

嗯，看来我已经找到了我的问题的答案。日历类已过时，并且与 AMD 加载不兼容。因此，我不得不`async: true`从我的`<script>`标签加载 Dojo 中取出。

# php - 将 2 个键数组合并为 1 个关联数组

> ID：10260622
> 
> 赞同：0
> 
> 时间：2012-04-21T16:01:11.820
> 
> 标签：php, arrays, array-merge

我有 2 个数组，1 个称为 $person，另一个称为 $classes。我想将 2 合并为 1 个数组，并为新合并数组中的项目分配一个名称。因此，创建一个关联数组而不是使用 array_merge 似乎默认使用 array_merge 函数创建的键。（为清楚起见，1 人有多个班级。）

目前我有这个：

($人)

```
[1]=>
   array(2) {
     ["Name"]=>
       string(1) "Bobby Moore"
     ["Age"]=>
       string(18) "36" 
```

（$类）

```
 [1]=>
     array(2) {
     [0]=>
       array(11) {
         ["Class ID"]=>
           string(1) "12"
         ["Class Title"]=>
           string(18) "Math 101"
     [1]=>
       array(11) {
         ["Class ID"]=>
           string(1) "13"
         ["Class Title"]=>
           string(18) "Math 102"
     [1]=>
       array(11) {
         ["Class ID"]=>
           string(1) "14"
         ["Class Title"]=>
           string(18) "Math 103" 
```

是否有可能得到以下结果？

```
 [person]=>
     array(1) {
     [0]=>
       array(11) {
         ["Name"]=>
           string(1) "Bobby Moore"
         ["Ages"]=>
           string(18) "35"
   [Classes]=>
     array(2) {
     [0]=>
       array(11) {
         ["Class ID"]=>
           string(1) "12"
         ["Class Title"]=>
           string(18) "Math 101"
     [1]=>
       array(11) {
         ["Class ID"]=>
           string(1) "13"
         ["Class Title"]=>
           string(18) "Math 102"
     [1]=>
       array(11) {
         ["Class ID"]=>
           string(1) "14"
         ["Class Title"]=>
           string(18) "Math 103" 
```

目前我正在使用 array_merge($person ,$classes); 不幸的是，这是一个按键排序的数组。

我希望这是有道理的！先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T16:02:49.277

不就是做的事吗

```
$new_array = array( "person" => $person_array, "classes" => $class_array ); 
```

# c# - 如何制作全球课？

> ID：10260626
> 
> 赞同：1
> 
> 时间：2012-04-21T16:01:25.450
> 
> 标签：c#, oop

我有一个类**Node**，然后我在我的 main 中创建了我的树节点，如下所示：

```
static void Main(string[] args)
{
  Node IProot = new Node("ANY-IP");           
} 
```

我想一直访问这个节点，即使我将通过另一个功能（设置 IProot 全局），例如我想要

```
public static alarm generalize(alarm one,alarm two)
{       
   //some code
} 
```

代替

```
public static alarm generalize(alarm one,alarm two,Node IProot)
{       
  //some code
} 
```

如果这是完全错误的，我该怎么办？

因为我无权访问 IProot，所以我必须将它作为我的函数的输入，以便我可以使用 IProot 进行编码，但我最好不要将它作为输入。我尝试`static Node`了主要定义 IProot 的位置，但这导致了错误。我也为我的课尝试过`static class Node`，同样没有结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T16:05:43.140

尝试这个：

```
static Node IProot;

static void Main(string[] args)
{
    IProot = new Node("ANY-IP");
} 
```

这会`IProot`在您的应用程序的`Main`方法中实例化对象，并允许在您的类中的方法中访问该对象的实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T16:14:46.697

如果`generalize`是一个可以应用于任何`Node`对象的方法，它可能应该在`Node`类中定义而不是作为静态方法，因为这是一种更加面向对象的方法。然后你可以这样称呼它：

```
IProot.generalize(one, two); 
```

# java - 我正在尝试将命令输出写入文件。它不是可读格式

> ID：10260633
> 
> 赞同：0
> 
> 时间：2012-04-21T16:02:08.823
> 
> 标签：java

我正在尝试将命令提示符输出到文件并用 Java 读取它。然后`ÿþS[]e[]r[]i[]a[]l`当我尝试用 NotePad++ 打开它时，我看到它是串行的。你能帮忙解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T16:15:59.957

这似乎是不同字符编码的问题，很可能您正在读取的文件使用 UTF-16 编码，其中每个字符使用两个字节。通过指定使用 Java 读取文件时要使用的编码，您应该能够克服该问题。

```
Reader in = new InputStreamReader(new FileInputStream(filename), "UTF-16")); 
```

请注意，Notepad++ 可能通过文件的内容来猜测要使用哪种编码。您可以在“编码”菜单中查看 Notepad++ 使用哪种编码来读取文件（您可以通过切换到另一个“在 XXX 中编码”来更改此设置以在不更改文件的情况下查看结果）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T16:03:37.823

似乎编码问题不匹配，将文件（在 Java 中）读取为`UTF-8`. 例如：

```
Reader in = new InputStreamReader(new FileInputStream(filename), "UTF-8")); 
```

# hyperlink - LINK2019继续前行

> ID：10260636
> 
> 赞同：1
> 
> 时间：2012-04-21T16:02:18.840
> 
> 标签：hyperlink

嗨，我在 VS 2010 项目中遇到以下错误，不知道问题出在哪里。我已经阅读过它并且更改 windows <-> 控制台对我不起作用并给我同样的错误：

1>----- 构建开始：项目：Draw，配置：调试 Win32 ------ 1>MSVCRTD.lib(crtexe.obj)：错误 LNK2019：*函数 _* _tmainCRTStartup 中引用的未解析的外部符号 main 1> C:\Users\Desktop\Draw\Debug\Draw.exe : 致命错误 LNK1120: 1 个未解决的外部 ========== 构建：0 成功，1 失败，0 最新，0 跳过 = =========

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T08:43:12.027

设法让它工作。您指出的代码只是您可以在项目中使用的类的集合。

要使用它们，您可以创建一个新的空控制台项目，添加这些文件并添加一个`main.cpp`像这样的文件：

```
#include "GeometricRecognizerTypes.h"
#include "GestureTemplate.h"
#include "GeometricRecognizer.h"
#include "SampleGestures.h"
#include "iostream"

using namespace DollarRecognizer;
using namespace std;

void main()
{
   GeometricRecognizer *g = new GeometricRecognizer();
   g->loadTemplates();
   SampleGestures sample;

   RecognitionResult result = g->recognize(sample.getGestureArrow());

   cout << result.name << "\n" << result.score;

   int stop;
   cin >> stop;
} 
```

它对我有用，它检测示例箭头，作为点的集合从`SampleGestures.h`.

# objective-c - 添加 UITapGestureRecognizer 后 UIButtons 将不起作用

> ID：10260640
> 
> 赞同：4
> 
> 时间：2012-04-21T16:02:43.297
> 
> 标签：objective-c, ios, xcode, uitapgesturerecognizer

我有以下代码，我将 UITapGestureRecognizer 添加到我的视图中：

```
UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self
                                                                      action:@selector(userTapped)];

 [self.view addGestureRecognizer:tap]; 
```

我的问题是，当我按下与`UIButton`s 在同一视图上的其他 s （按钮是在 IB 中创建的）时`UITapGestureRecognizer`，什么也没有发生。

我想我只向gestureRecognizer添加了一个动作（userTapped :)，但是如何添加与创建的其他按钮的交互？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-21T16:16:33.890

尝试

```
tap.cancelsTouchesInView = NO; 
```

或者

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch
{
        if([touch.view isKindOfClass:[UIButton class]])
            return NO;
        return YES;
} 
```

# powershell - 使用 powershell 1.0 将结果添加到新的 Excel 工作表

> ID：10260644
> 
> 赞同：1
> 
> 时间：2012-04-21T16:03:00.940
> 
> 标签：powershell, powershell-1.0

我有两个 powershell cmdlet 来生成**进程报告**和**服务报告**。

例如：Get-process 和 Get-services

我知道*export-csv c:\test.csv*会将结果导出到 Excel 表。

但是我需要将第一个 cmdlet 的结果导出到同一个 csv 文件的第一个工作表和第二个 cmdlet 到第二个工作表。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T11:26:49.877

IMO 最好的选择就是使用 excel 自动化。例如 ConvertTo-Excel.ps1：

```
param (
    [ValidatePattern('\.csv$')]
    [ValidateScript({
        Test-Path $_
    })]
    [string[]]$Path
)

$FullPath = $Path | ForEach-Object {
    (Resolve-Path $_).ProviderPath
}

$First, $Rest = $FullPath

$Excel = New-Object -ComObject Excel.Application

$Book = $Excel.Workbooks.Open($First)

foreach ($Item in $Rest) {
    $Next = $Excel.Workbooks.Open($Item)
    $Next.ActiveSheet.Move($Book.ActiveSheet)
}

$Excel.Visible = $true 
```

您可以使用 .\ConvertTo-Excel.ps1 -Path .\services.csv, .\process.csv, ....csv 运行上述脚本，并将所有 csv 以相反的顺序组合在一起。

HTH 巴特克

# asp.net-mvc - 如何在mvc中的Homecontroller内更改提交按钮文本？

> ID：10260645
> 
> 赞同：1
> 
> 时间：2012-04-21T16:03:06.633
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework, stored-procedures

我有 mvc 3 应用程序，其中我在 Index.cshtml 视图上有一个输入表单。还有一个带有`edit`,`delete`按钮的 webgrid

根据这些操作链接，我需要更改我的提交按钮文本。我怎样才能在 homecontroller.cs 中实现这一点？对所有人只使用一个视图`edit`，`insert`.

检查 homecontroller.cs 中的用户操作

```
public ActionResult Index(string userAction)
    {
       if (userAction == "Edit" )
        {

        }

        if (userAction == "Delete" )
        {

        }

    }

View code: 
@model Mapping.Models.SecurityIdentifierMappingViewModel
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Mapping</legend>
        <div class="editor-label">
            @Html.Label("Pricing SecurityID")
        </div>
        <div class="editor-field">
            @Html.HiddenFor(model => model.MappingControls.Id)
            @Html.DropDownListFor(model => model.MappingControls.PricingSecurityID,
         new SelectList(Model.PricingSecurities, "Value", "Text"),
         "Select SecurityID"
            )
            @Html.ValidationMessageFor(model => model.MappingControls.PricingSecurityID)
        </div>
        <div class="editor-label">
            @Html.Label("CUSIP ID")
        </div>
        <div class="editor-field">
            @Html.DropDownListFor(model => model.MappingControls.CUSIP,
         new SelectList(Model.CUSIPs, "Value", "Text"),
            "Select CUSIP"
            )
            @Html.ValidationMessageFor(model => model.MappingControls.CUSIP)
        </div>

        <div class="editor-label">
            @Html.Label("Calculation")
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.MappingControls.Calculation)
            @Html.ValidationMessageFor(model => model.MappingControls.Calculation)
        </div>
        <p>
            <input type="submit" value="Insert" />
        </p>
    </fieldset>
}

on same page i have a webgrid I need to change text of submit button to Update when I clicked on webgrid's edit button. i'm newbie.

Webgrid code
    @model IEnumerable<Mapping.Models.SecurityIdentifierMapping>
    @{
        ViewBag.Title = "Mapping";
        WebGrid grid = null;
        if (Model.Count() > 0)
        {
            grid = new WebGrid(source: Model,
                                    defaultSort: "Id",
                                    canPage: true,
                                    canSort: true,
                                    rowsPerPage: 10);
        }
    }
    <h3>
        Mapping Web Grid</h3>
    @if (grid != null)
    {
        @grid.GetHtml(
                    tableStyle: "grid",
                    headerStyle: "head",
                    alternatingRowStyle: "alt",
                    columns: grid.Columns(
                                                grid.Column("", header: null, format: @<text>@Html.ActionLink("Edit", "Index", new { uid = (int)item.id, userAction = "Edit" })
        @Html.ActionLink("Delete", "Index", new { uid = (int)item.id, userAction="Delete" }, new { @class = "Delete" })</text>),
                                                grid.Column("PricingSecurityID"),
                                                grid.Column("CUSIP"),
                                                grid.Column("Calculation")
                                              )

                    )
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T15:36:40.483

`enter code here`在控制器中设置 ViewBag 属性：

```
public ActionResult
Index(string userAction) 
    { 
       if (userAction == "Edit"
) 
        {
   ViewBag.SubmitValue = "Edit";
        } 

        if (userAction == "Delete" ) 
        {
 ViewBag.SubmitValue = "Delete";
        } 
    } 
```

..然后在视图中显示值：

```
<input type="submit" value="@ViewBag.SubmitValue" /> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T16:08:14.843

一个简单的解决方案是将标签文本作为属性放在控制器的 ViewBag 中，但这可能不是最好的方法......

# ruby-on-rails - 创建表后如何在rails应用程序的sqlite3开发数据库中的列中添加值

> ID：10260647
> 
> 赞同：0
> 
> 时间：2012-04-21T16:03:18.897
> 
> 标签：ruby-on-rails, ruby

嗨，我有一个 Rails 应用程序，其中有一个名为“列表”的表。该表有一个名为“city”的列。但是该列现在没有数据，一切都为空。我想将字符串：“不可用”添加到此表中所有行的列值中。我怎样才能做到这一点？

我尝试使用 sql 将其直接添加到数据库中，但它不起作用。

所以我想我必须使用 rails 迁移命令来实现这一点。但我找不到确切的命令。我知道它是这样的......

```
rails generate migration ?? 
```

有人可以帮帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T16:09:23.920

在告诉您如何使用 Rails 实际执行此操作之前，我会要求您考虑将这种表示逻辑硬编码到您的数据库模式中。您可以在模型级别执行此操作，只需覆盖该字段的访问器。

```
def city
  read_attribute("city") || "Not Available"
end 
```

将此信息放入数据库可能会导致问题。例如，您将无法再快速判断哪些行具有`city`.

如果您确实决定要执行此操作，请在迁移中添加：

```
change_column :listings, :city, :default => "Not Available" 
```

# optimization - 更好的初始猜测对于优化收敛可能更糟

> ID：10260650
> 
> 赞同：2
> 
> 时间：2012-04-21T16:03:43.247
> 
> 标签：optimization

我有一个非常复杂的模型，其中包含许多需要解决的参数。尽管模型很复杂，但每一步的函数形式并不是不规则的。

我看到一些带有起始值的奇怪行为。如果我从标准的随机值（全为 0）开始，求解器会在 673 秒内以“找到局部最优解”、0 次 CG 迭代收敛。

如果我从我知道的接近解的值开始，求解器会在 1718 秒内收敛于“无法改进原始可行解估计。”，493 次 CG 迭代。

请注意，在这两种情况下，最终值都相同（或非常相似）。

2个问题：

*   共轭梯度迭代的次数究竟是多少，例如求解器何时需要计算共轭梯度？在 1 种情况下，我看到 0 次 CG 迭代，在另一种情况下，我看到 493 次 CG 迭代。这意味着什么？（请注意，我确实知道 CG 方法是什么，只是不确定为什么在一种情况下与 0 存在巨大差异。）
*   *“更好的”初始值会显着减慢优化收敛的所有*可能解释是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T17:24:43.667

从您的第一个问题中，我们了解到您正在使用“智能”求解器，即动态调整算法以优化收敛。共轭梯度法是“长程”寻找最优值的好方法，但在接近浅层最优值时收敛速度较慢。

与所有“智能”代码一样，存在启发式失败的情况，而您遇到过这种情况。我假设您的最优值相当浅，因此如果您的参数稍有变化，目标函数（即您尝试优化的实际标准）变化很小。现在求解器无法知道参数已经非常接近最优值。据它所知，在目标函数非常平坦的区域中，它可能与解决方案相去甚远。经过一些初始测试，因此默认使用共轭梯度法，这是一种接近最优值的缓慢但安全的方法。但是，由于经过大量搜索，它实际上并没有走得很远，它告诉你，如果你很幸运，你开始接近最优，但如果你不走运，你的解决方案很远，

如果您知道您的初始猜测会非常好，那么您可能需要检查您的求解器是否允许指定应该/不应该使用哪些算法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-21T17:41:38.543

共轭梯度是一种[梯度型](http://www.physics.arizona.edu/~restrepo/475A/Notes/sourcea/node74.html)优化算法（也称为“最速下降”），在某些情况下可能容易收敛缓慢。即使您接近最佳状态。

在[WikiPedia 上](http://en.wikipedia.org/wiki/Gradient_descent)，您可以找到说明这种行为的数字，我在这里改编了其中一个：

![优化收敛问题](../Images/4d26e0bdcbe7a42a8419fe10abc525b3.png)

您看到的是等高线图上的等成本（或等目标）线。假设我们从第 1 点开始，这是一个很好的起始值。红线表示达到最佳状态的路径。我们看到它曲折走向最优，这需要大量的功能评估，因此需要时间。

如果我们将其与选择 A 点作为起始值时的性能进行比较，我们会获得更快的收敛（或者至少，这是我在这种情况下所期望的）。假设在这种情况下只需要一次迭代。

现在看看第 5 点，它显然已经接近最优，但是需要大量的迭代才能达到最优。当您接近一个狭窄的山谷时，该算法将从一侧跳到另一侧，在途中只取得很小的进步。当您从山谷较宽的一侧接近时，您会看到梯度更倾向于最佳值，这会导致更快的收敛。

在您的情况下，可能是您的初始值有点像上面的第 5 点，而通用起始值与 A 点相当。这是假设您的起始值收敛到真实值，这可能不是案子。如果您的起始值很接近，但在它和全局最优值之间有一个峰值，您将不会收敛到正确的值，如下图所示。

![在此处输入图像描述](../Images/791a3e75d72be8c152f46e975b697299.png)

当 knitro 更改为 CG 或其他算法之一时，应该在文档中提及或者只有 knitro 的开发人员知道。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-21T16:09:36.603

嗯，这是因为起始值只是问题解决方案的近似值，因为迭代解决方案试图通过尝试收敛到最终值来接近，那么，越接近答案起始值，越少您需要收敛的迭代。收敛阈值也应该计算在内。

这是典型的知情与非知情问题，如果您从 ad-hoc 值开始，如果您从良好的非 ad-hoc 值开始，结果将更难找到。

# php - 用户使用 php/javascript 登录

> ID：10260657
> 
> 赞同：0
> 
> 时间：2012-04-21T16:04:14.767
> 
> 标签：php, javascript

我有一个 php 脚本，我通过 ajax 调用它来初始化用户登录的会话变量。当我稍后检索会话信息时，它似乎不存在。这其中缺少什么。我必须说我假设 $_SESSION 变量在那里。我以前没有这样做过。

在 db 中搜索用户并初始化会话变量的 PHP 代码

```
while (true) {
    $md5_pw = md5($password_text);
    $r_getuser = mysql_query("SELECT * FROM users WHERE (user_name = BINARY '".mysql_real_escape_string($l_un_em)."' OR email = '".mysql_real_escape_string($l_un_em)."') AND (password = '$md5_pw' OR temp_password = '$md5_pw') AND status >= 0");
    if (mysql_num_rows($r_getuser) == 0) {
        /* echo $messages['log_un_em_pw_incorrect'];
        return; */
        $return['return_code'] = -1;
        $return['return_msg'] = $messages['log_un_em_pw_incorrect'];
        echo json_encode($return);
    }
    $row = mysql_fetch_assoc($r_getuser);
    /* if ($row['privs'] < 1) { echo $messages['log_no_privs']; break; } */
    if ($row['temp_password'] == $md5_pw) { //new password
        mysql_query("UPDATE users SET password = '".$md5_pw."', temp_password = NULL WHERE user_id = '{$row['user_id']}'");
    }
    $today = date('Y-m-d');
    if ($row['login_0'][0] == '9') { //first login
        mysql_query("UPDATE users SET login_0 = '".$today."', login_1 = '".$today."', login_cnt = 1 WHERE user_id = '{$row['user_id']}'");
    } else {
        mysql_query("UPDATE users SET login_1 = '".$today."', login_cnt = login_cnt+1 WHERE user_id = '{$row['user_id']}'");
    }
    $_SESSION['uid'] = $row['user_id'];
    $_SESSION['unm'] = stripslashes($row['user_name']);
    $_SESSION['uml'] = stripslashes($row['email']);
    $_SESSION['cL'] = $row['language'];
    /* echo '<meta http-equiv="refresh" content="0;url=livemass_CENTER34.php">'; */ //default page
    break;
} 
```

用于检索会话变量的 PHP 代码。

```
<?php
ini_set('display_errors', 1);
error_reporting(E_ALL);

echo 'user id '.$_SESSION['uid'].'<br/>';
echo 'username '.$_SESSION['unm'].'<br/>';
echo 'uml '.$_SESSION['uml'].'<br/>';
echo 'cL '.$_SESSION['cL'].'<br/>';

?> 
```

显示会话信息的 Javascript。

```
$.ajax({
      url: "get_session_info.php",
      type: "GET",
      data: {},
      cache: false,
      async: false,
      success: function (response) {
      alert ('session info response <br/>'+response);
      },
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T16:06:53.297

添加`session_start()`到所有访问`session`变量值的文件

```
<?php
session_start();
ini_set('display_errors', 1);

// remaining items

?> 
```

[http://php.net/manual/en/function.session-start.php](http://php.net/manual/en/function.session-start.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T16:07:42.377

以@Frits 所说的内容为基础。要使用 php 会话，您必须将该函数`session_start();`放在要访问的每个页面的开头`$_SESSION`。

# c# - 为什么我不能在类中使用 HttpServerUtility.HtmlEncode？

> ID：10260658
> 
> 赞同：13
> 
> 时间：2012-04-21T16:04:15.237
> 
> 标签：c#, .net, static, encode

我正在尝试使用以下代码：

```
string myString = HttpServerUtility.HtmlEncode("my link & details"); 
```

我收到以下错误：

> 非静态字段、方法或属性需要对象引用。

为什么我不能`HttpServerUtility.HtmlEncode`在课堂内使用？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-21T16:15:54.347

您可以改用`HttpUtility`它，它有一个不依赖于`HttpContext`.

```
string myString = HttpUtility.HtmlEncode("my link & details"); 
```

[有关 MSDN 上 HttpUtility.HtmlEncode 方法的更多信息](http://msdn.microsoft.com/en-us/library/73z22y6h%28v=vs.100%29.aspx)。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-04-21T16:08:48.773

HtmlEncode 不是静态方法，需要`HttpServerUtility`调用的实例。由于 HttpContext.Current.Server 是一个 HttpServerUtility 实例，您可以改为使用；

```
string myString = HttpContext.Current.Server.HtmlEncode("my link & details"); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-10-17T06:02:33.643

如果您使用的是 .NET 4.5，则此实用程序是 System.Net.WebUtility 的一部分。

```
string myString = System.Net.WebUtility.HtmlEncode(my link & details); 
```

# asp.net-mvc - MVC 4、EF 4.3 在应用程序请求的生命周期中管理上下文

> ID：10260665
> 
> 赞同：1
> 
> 时间：2012-04-21T16:05:07.133
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework, entity-framework-4

情况：我想做的是访问页面生命周期的数据上下文。这主要是为了 (a) 避免一系列 using() 并避免 (b) 当访问延迟加载的属性时视图中出现超出范围的异常。

编辑：我正在使用 MVC 4 和 Entity Framework 4.3.1（最新）

我通常做的是

```
using (MyDB b = new MyDB()) {
 ...do all my stuff
} 
```

在我的控制器或数据层中。根据我的阅读，这样做的好处是它很干净，不会导致内存泄漏等。但缺点是即使在单个页面的生命周期中，我最终也会一次又一次地这样做，并且我的对象在视图，因为我已经处理了上下文。

我做了一些阅读并找到了 2009 年的类似帖子，但答案中没有代码。当然，其他一些人已经想出了如何解决这个问题 - 我想我必须做点什么

```
Application_BeginRequest and EndRequest 
```

但我只是不确定如何，以及陷阱/最佳实践是什么。

感谢您的帮助（如果可能，请提供一些代码示例！）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T16:47:35.380

我看到你有一个 asp.net MVC 的标签，所以我认为这就是你正在使用的。

您应该实现一个存储库方法，如[http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-在-an-asp-net-mvc-应用程序中](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application)

无论如何，你真正需要做的就是在你的每个控制器上做这样的事情

```
private MyDB b = null;
public MyController()
{
      b = new MyDB();
}

protected override void Dispose(bool disposing)
{
      b.Dispose();
      base.Dispose(disposing);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T17:00:26.477

您希望使用数据上下文的方式绝对是禁忌（除非您正在处理几百行数据库，在这种情况下为什么要使用 EF）。

但是，如果您有一个真正的生产规模的数据库，将上下文固定到应用程序范围将导致以下结果：

*   由于您提到使用延迟加载（我将在服务器端完全切换的功能），因此您的所有数据库迟早都会被放入内存中（上下文级实体缓存）
*   您的实体实例将在请求和线程之间共享（是的，对于写操作为真）
*   EntitySet/DbSet 几乎是线程安全的
*   您的写入操作将完全缓慢且不可预测，因为您将无法保存“仅您的更改”您将保存自上次保存/提交更改以来更改的所有内容，并且您可能还会保存其他线程半生不熟的实体

EF 上下文是 IDisposable 有一个很好的理由：它有望用于紧凑、简短的操作，是的：您应该一直使用 using(...) “事物”。

如果您正在构建一个多人使用的网站、内联网解决方案等，上述所有内容只是一个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T18:01:39.060

首先不要在视图中使用延迟加载（*实体框架进入数据库并一次将结果返回一行*），因为来自视图的查询是不好的做法，并导致**Select N+1**（*Select N + 1 is a以次优方式访问数据库的数据访问反模式。*）或类似的不良做法。

使用多个对象上下文意味着每个请求使用多个数据库连接，从而导致数据库的额外压力和更慢的整体性能，而且每个对象上下文都不知道由另一个对象上下文跟踪的实体并且可能必须查询数据库再次为其当前状态或必须发出不必要的更新

在编写视图时，您不应该为考虑持久性或视图生成的查询数量而烦恼。

*概括：*

1.  **在操作中执行所有查询。**

2.  **使用该`Include`方法强制集合的急切加载，以指定要在初始查询中包含的对象模型的哪些部分。**

3.  **每个请求使用一个对象上下文。**

问候

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T23:36:32.813

您可以在退出 using 块之前返回，以便在视图中延迟加载时上下文将在范围内

```
using (MyDB b = new MyDB()) {
 ...do all my stuff

  return View(b.Data);
} 
```

# javascript - 使用 CSS3 动画滚动

> ID：10260666
> 
> 赞同：19
> 
> 时间：2012-04-21T16:05:19.243
> 
> 标签：javascript, html, css

有没有办法用 CSS3 动画滚动？

像这样的东西？

```
@-webkit-keyframes scrolltoview
{
    0%   { scrollTop: 0; }
    100% { scrollTop: 30%; }
} 
```

如何在css中放入动画的起点在哪里？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-06-19T11:57:41.693

正如[这里](http://mitgux.com/smooth-scroll-to-top-using-css3-animations)所解释的，您可以使用`margin-top`技巧和动态更新滚动位置来做到这一点。您可以查看[演示](http://labs.mitgux.com/smooth-scroll-to-top-using-css3-animations/)。代码很简单：

```
// Define the variables
var easing, e, pos;
$(function(){
  // Get the click event
  $("#go-top").on("click", function(){
    // Get the scroll pos
    pos= $(window).scrollTop();
    // Set the body top margin
    $("body").css({
      "margin-top": -pos+"px",
      "overflow-y": "scroll", // This property is posed for fix the blink of the window width change 
    });
    // Make the scroll handle on the position 0
    $(window).scrollTop(0);
    // Add the transition property to the body element
    $("body").css("transition", "all 1s ease");
    // Apply the scroll effects
    $("body").css("margin-top", "0");
    // Wait until the transition end
    $("body").on("webkitTransitionEnd transitionend msTransitionEnd oTransitionEnd", function(){
      // Remove the transition property
      $("body").css("transition", "none");
    });
  });
}); 
```

@AndrewP基于这个想法提供了一个很好的[工作示例](http://cdpn.io/bFBDr)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-21T22:10:01.533

css3 动画仅适用于 css 属性。这在 css 的范围内是不可能的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-12-18T07:30:46.810

我发现了一种更好的滚动动画方法，即使用 JavaScript 来翻译文档正文。在边距或位置上使用 translate 进行动画制作的优势已得到[很好的证明](https://www.html5rocks.com/en/tutorials/speed/high-performance-animations/)。底线是，在为元素制作动画时，GPU 总是会做得更好。

这是一个示例，它从窗口顶部计算用户的当前位置，然后平滑地转换回窗口顶部。假设用户点击或触摸事件触发了 backToTop 函数。

看看它的实际效果：[https ://antibland.github.io/starting_point/](https://antibland.github.io/starting_point/)

```
function whichTransitionEvent() {
  var t,
      el          = document.createElement('fakeelement'),
      transitions = {
        'transition':'transitionend',
        'OTransition':'oTransitionEnd',
        'MozTransition':'transitionend',
        'WebkitTransition':'webkitTransitionEnd'
     };

  for (t in transitions){
    if (el.style[t] !== undefined){
      return transitions[t];
    }
  }
}

function backToTop() {
  var pos_from_top  = window.scrollY,
      transitionend = whichTransitionEvent(),
      body          = document.querySelector("body");

  function scrollEndHandler() {
    window.scrollTo(0, 0);
    body.removeAttribute("style");
    body.removeEventListener(transitionend, scrollEndHandler);
  }

  body.style.overflowY = "scroll";
  window.scrollTop = 0;

  body.style.webkitTransition = 'all .5s ease';
  body.style.transition = 'all .5s ease';

  body.style.webkitTransform = "translateY(" + pos_from_top + "px)";
  body.style.transform = "translateY(" + pos_from_top + "px)";

  transitionend && body.addEventListener(transitionend, scrollEndHandler);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T17:22:17.023

我认为css3不可能做到这一点，但是如果我正确理解了您的问题，那么使用jquery就很容易了。

查看：

[http://demos.flesler.com/jquery/scrollTo/](http://demos.flesler.com/jquery/scrollTo/)

[http://api.jquery.com/scroll/](http://api.jquery.com/scroll/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-27T15:34:20.387

这是一个非常简单的 .js 函数，用于动画 + 滚动网页。

```
var Current_scroll_Y=0;
var Target_scroll_Y=0;
var scroll_Speed = 15;

function animate_Scroll(Y)
{
  Target_scroll_Y = Y;
  screen_Y = Math.floor(window.scrollY);

  //Scroll Down
  if(screen_Y<Y)
  {
    var myWindowScroll = setInterval(function(){ screen_Y = screen_Y+scroll_Speed;  if(screen_Y>=Target_scroll_Y){ clearInterval(myWindowScroll); return;}    window.scrollTo(0, screen_Y); }, 3);   
  }
  //Scroll Up
  if(screen_Y>Y)
  {
    var myWindowScroll = setInterval(function(){ screen_Y = screen_Y-scroll_Speed;  if(screen_Y<=Target_scroll_Y){ clearInterval(myWindowScroll); return;}    window.scrollTo(0, screen_Y); }, 3);  
  } 

}//End animate_Scroll 
```

# jquery - jQuery：获取父母，父母ID？

> ID：10260667
> 
> 赞同：87
> 
> 时间：2012-04-21T16:05:28.853
> 
> 标签：jquery

```
<ul id ="myList">
<li><a href="www.example.com">link</a></li>
</ul> 
```

如何使用 jQuery 获取 ul (myList) 的 id？单击链接时会触发我的 j-script 事件。我努力了：

```
$(this).parent().attr('id'); 
```

但是它得到了li的id，我需要再高一点，我也不能将点击附加到li。

* * *

## 回答 #1

> 赞同：180
> 
> 时间：2012-04-21T16:07:14.533

```
$(this).parent().parent().attr('id'); 
```

是如何获得父母的父母的ID。

编辑：

```
$(this).closest('ul').attr('id'); 
```

对于您的情况来说，这是一个更简单的解决方案。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-21T16:10:21.847

```
 $(this).closest('ul').attr('id'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-08T10:15:12.163

**这里有 3 个例子：**

```
$(document).on('click', 'ul li a', function (e) {
    e.preventDefault();

    var example1 = $(this).parents('ul:first').attr('id');
    $('#results').append('<p>Result from example 1: <strong>' + example1 + '</strong></p>');

    var example2 = $(this).parents('ul:eq(0)').attr('id');
    $('#results').append('<p>Result from example 2: <strong>' + example2 + '</strong></p>');

    var example3 = $(this).closest('ul').attr('id');
    $('#results').append('<p>Result from example 3: <strong>' + example3 + '</strong></p>');

});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<ul id ="myList">
  <li><a href="www.example.com">Click here</a></li>
</ul>

<div id="results">
  <h1>Results:</h1>
</div>
```

让我知道它是否有帮助。

# php - IF NOT EXISTS mySQL 查询是否存在？

> ID：10260671
> 
> 赞同：1
> 
> 时间：2012-04-21T16:05:49.737
> 
> 标签：php, mysql, if-statement

只需使用 mySQL 进行 INSERT 即可，效果很好...

```
 mysql_query("INSERT INTO FLIGHTS_AVAILABLE 
 (aircraftID, aircraftType, maxSeats) VALUES('$theaircraftID', '$addType', '$maxCapacity'      ) ") 
or die(mysql_error());  

 echo '<p>';
 echo "The following details were added into the database:";
 echo "<hr>";

  echo $theaircraftID . $addType . $maxCapacity; 
```

这很好用，但是我在网上查看过，虽然我听说过一个名为 IF NOT EXISTS 的功能，但网上对它的使用没有很好的解释。

无论如何，我可以在上面运行这个查询，前提是如果例如 $theaircraftID = 10，并且数据库中已经有飞机 ID = 10 的行，那么查询将不会运行？

感谢您提供的任何帮助，

汤姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T16:09:37.167

添加一个`UNIQUE INDEX`在`'FLIGHTS_AVAILABLE'.'aircraftID'`. MySQL 将阻塞其他`INSERT`具有相同值的 s。此外，您可以使用`ON DUPLICATE KEY EXISTS`运行一个`UPDATE`incase`INSERT`给出一个`DUPLICATE KEY`约束错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T16:30:11.413

您可以尝试按所需列创建唯一索引，然后使用[INSERT IGNORE](http://dev.mysql.com/doc/refman/5.5/en/insert.html)和[mysql_affected_rows](http://php.net/manual/en/function.mysql-affected-rows.php)。

# list - Prolog：第一个重复值

> ID：10260672
> 
> 赞同：5
> 
> 时间：2012-04-21T16:05:54.830
> 
> 标签：list, prolog, prolog-dif

我需要在列表中找到第一个重复值。

`prep(3,[1,3,5,3,5]).`应该是真的。

`prep(5,[1,3,5,3,5]).`应该是假的。

我想检查当前值和以前的列表成员是否相等，直到找到重复项，如果找到一个，它将测试与 X 是否相等，但我不知道如何在 Prolog 中做到这一点！

我很感激任何帮助！谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T19:43:17.007

这是一个纯版本，使用`dif/2`它实现了声音不等式。`dif/2`由 B-Prolog、YAP-Prolog、SICStus-Prolog 和 SWI-Prolog 提供。

```
firstdup(E, [E|L]) :-
    成员（E，L）。
firstdup(E, [N|L]) :-
    非成员（N，L），
    第一dup（E，L）。

成员（E，[E|_L]）。
成员（E，[_X|L]）：-
    成员（E，L）。

非成员（_E，[]）。
非成员（E，[F|Fs]）：-
    差异（E，F），
    非成员（E，Fs）。

```

优点是它也可以用于更一般的查询：

```
?- firstdup(E, [A,B,C])。
E = A，A = B；
E = A，A = C；
E = C，
B = C，
差异（A，C）；
错误的。

```

在这里，我们得到三个答案：`A`是前两个答案中的重复项，但基于两个不同的理由：`A`可能等于`B`或`C`。在第三个答案中，是重复的，但如果与 不同`B`，它只会是重复的。`C``A`

要理解定义，请阅读`:-`箭头 ← 所以右侧是您所知道的，左侧是您得出的结论。在开始的时候读那个方向的谓词通常会有点烦人，毕竟你可能很想遵循“执行线程”。但通常这条线索无处可去——它变得太复杂而无法理解。

第一条规则如下：

> 提供的是我们得出的具有第一个重复项`E`的列表元素。`L``[E|L]``E`

第二条规则如下：

> 提供`E`的是`L`（不要在这里惊慌并说我们不知道...）的第一个副本，并且假设这不是我们得出的第一个副本`N`的元素。`L``[N|L]``E`

`member/2`谓词在许多 Prolog 系统中都提供，可以`non_member(X,L)`定义为`maplist(dif(X),L)`. 因此，人们宁愿将其定义`firstdup/2`为：

```
firstdup(E, [E|L]) :-
    成员（E，L）。
firstdup(E, [N|L]) :-
    地图列表（差异（N），L），
    第一dup（E，L）。

```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-05-15T15:28:07.090

[在这个答案中，我们改进了这个早期答案](https://stackoverflow.com/a/10322639/4609915)中呈现的逻辑纯代码。一步步：

1.  我们将两个谓词[`memberd/2`](https://stackoverflow.com/a/21971885)和[`non_member/2`](https://stackoverflow.com/a/10322639)一个谓词组合在一起[`memberd_t/3`](https://stackoverflow.com/a/29963476/4609915)，它使用一个附加参数将列表成员关系具体化为真值（`true`或`false`）。

    `memberd_t/3`等价于`memberd/2`+ `non_member/2`，所以我们*可以这样*定义：

    ```
    memberd_t(X,Xs,true) :-
       成员（X，Xs）。
    memberd_t(X,Xs,false) :-
       非成员（X，Xs）。

    ```

    或者，反之亦然，我们可以*这样*定义：`memberd/2``non_member/2`

    ```
    成员（X，Xs）：-
       memberd_t(X,Xs,true)。

    非成员（X，Xs）：-
       memberd_t(X,Xs,false)。

    ```

    `memberd_t/3`在实践中，我们使用具有更好确定性的优化实现。

    让我们看看它`memberd_t/3`实际上涵盖了`memberd/2` *和* `non_member/2`！

    ```
    ?- memberd_t(X,[1,2,3],T)。
      T = 真，X=1
    ; T = 真，X=2
    ; T = 真，X=3
    ; T = 假，差异（X，1），差异（X，2），差异（X，3）。

    ```

2.  以谓词的以下*变体*`firstdup/2`（[前面定义](https://stackoverflow.com/a/10322639/4609915)）作为我们的起点：

    ```
    firstdup(E,[X|Xs]) :-
       （成员（X，Xs），
          E=X      
       ; 非成员（X，Xs），
          第一次备份（E，Xs）
       ）。

    ```

3.  让我们`memberd/2`用`non_member/2`!`memberd_t/3`

    ```
    firstdup(E,[X|Xs]) :-
       ( memberd_t(X,Xs,true),
          E=X
       ; memberd_t(X,Xs,false),
          第一次备份（E，Xs）
       ）。

    ```

4.  让我们吊起来`memberd_t/3`！

    ```
    firstdup(E,[X|Xs]) :-
       memberd_t(X,Xs,T),
       (T=真
       -> E=X      
       ; T=假，
          第一次备份（E，Xs）
       ）。

    ```

5.  上面的模式`pred_t(OtherArgs,T), (T = true -> Then ; T = false, Else)`可以用[`if_/3`](https://stackoverflow.com/a/27358600/4609915)写作更简洁地表达`if_(pred_t(OtherArgs),Then,Else)`。

    ```
    firstdup(E,[X|Xs]) :-
       if_(memberd_t(X,Xs),
           E=X，
           firstdup（E，Xs））。

    ```

* * *

让我们运行一些查询！

```
?- firstdup( 1 , [ 1,2,3,1 ] )。 真的。% 确定性地成功

?- firstdup( *X* ,[ **1** ,2,3, **1** ])。
*X* = **1**。% 确定性地成功

?- firstdup(X,[A,B,C])。% 成功，留下一个选择点
      A=X , B=X % ... 以保留完整的解决方案集。
; A=X , 差异 (B,X), C=X
; 差异（A，X），B=X，C=X
; 错误的。 
```

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T09:20:02.830

代表（N，列表）：-追加（L1，[N|_]，列表），追加（_，[N|_]，L1），\ +（代表（_，L1））。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T16:38:17.593

不确定这是否是家庭作业/您可以使用哪些谓词有限制，但这会让 prolog 为您进行递归。

它说..找到所有重复项，即。其中有一个具有列表索引 I1 的项目，而另一个具有 I2 的项目，使得它们都具有相同的值 N，并且索引不同，即不要将相同的列表项目视为重复项。

这些重复项被放置在列表 AllDups 中（按照找到的顺序，从头开始），如果找到的第一个重复项与您正在检查的值 M 一致，则谓词为真。

**第一次尝试：这行得通，但效率很低，建立一个所有重复的列表**

```
prep(M, List) :-
    findall(N,
        (nth0(I1, List, N),
        nth0(I2, List, N),
        not(I1 =:= I2)),
        AllDups),
    nth1(1, AllDups, M).

?- prep(3,[1,3,5,3,5]).
true.

?- prep(5,[1,3,5,3,5]).
false. 
```

即使您不允许使用 findall，它也可能会帮助您了解如何“手动”进行操作。

**第二次尝试：这不起作用/回溯太远会产生误报**

您甚至可以在没有 findall 的情况下执行此操作 - 使用 nth0 查找第一个重复项，然后如果它与您正在检查的值一致，则返回 true，否则返回 false。

```
prep(N, List) :-
        nth0(I1, List, N),
        nth0(I2, List, N),
        not(I1 =:= I2). 
```

**第三次尝试：这有效，并在找到第一个重复项后立即返回**

```
prep(M, List) :-
        nth0(I1, List, N),
        nth0(I2, List, N),
        not(I1 =:= I2), !,
        M == N. 
```**

# winapi - 以编程方式查找 Windows 硬链接的目标

> ID：10260676
> 
> 赞同：1
> 
> 时间：2012-04-21T16:06:14.533
> 
> 标签：winapi, ntfs, hardlink

我最近一直在以编程方式操纵重解析点，并且有一段时间一直困扰着我。由于 Windows 硬链接不像连接点或符号链接那样重新解析点，因此不能以相同的方式访问它们。创建一个新的很容易，但我还没有弄清楚如何读取一个目标。由于[Hard Link Shell Extension](http://schinagl.priv.at/nt/hardlinkshellext/hardlinkshellext.html)之类的扩展具有显示该信息的属性表，因此我认为可以完成，但我一直无法找到任何有关如何操作的文档。（我确实注意到，shell 扩展名并不表示硬链接上哪个文件是真实的，不过）

我确实找到[了这个答案](https://stackoverflow.com/questions/3636820/how-can-i-programmatically-distinguish-hard-links-from-real-files-in-windows-7)，它解释了如何计算文件的链接，但不幸的是，我仍然坚持解决。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T00:18:38.213

`$FILE_NAME`硬链接信息使用 POSIX 名称存储在属性中。这些属性中的每一个都指代一个文件，该文件可能指代原始文件本身。没有任何硬链接的文件也可能有 POSIX 名称。换句话说，一个硬链接文件总是有多个 POSIX 名称。该属性的`DirectoryFileReferenceNumber`字段指向一个 MFT 条目索引，它是包含该文件的文件夹条目。

以下是检索文件的所有目标的指南，无论它是否是硬链接的。

您将需要`FSCTL_GET_NTFS_FILE_RECORD`在文件上使用以获取其所有 NTFS 属性并对其进行解析以检索每个`$FILE_NAME`属性。

在每个`$FILE_NAME`属性上，`FSCTL_GET_NTFS_FILE_RECORD`在文件所在的卷上使用其`DirectoryFileReferenceNumber`作为 MFT 条目索引来检索文件的文件夹容器信息。此文件夹是包含该文件的最低级别。例如，如果文件路径为`C:\MyData\Myfiles\MyDocument.txt`，则最低文件夹级别为`MyFiles`. 如果`DirectoryFileReferenceNumber`指向根文件夹，即`0x5`，则您拥有文件的完整路径。例如，`C:\MyDocument.txt`。

使用该文件夹信息，如果它不是根文件夹，您只需重复与上述类似的任务，即从属性`Name`字段中检索文件夹名称。`$FILE_NAME`但是这一次，`NameType`不必是 POSIX 类型，任何都可以使用。最好是 LFN 或 LFN & DOS8.3 兼容类型。使用它`DirectoryFileReferenceNumber`来获取上层文件夹并重复本段中的任务。当`DirectoryFileReferenceNumber`指向根文件夹时，即`0x5`，则此重复任务已完成，因为您已经有了文件的完整路径。

现在您已经解决了一个文件目标。下一个任务是处理下一个POSIX 类型的`$FILE_NAME`属性。`NameType`处理所有这些以获取所有文件目标。不要使用这种方法来查明文件是否有硬链接。相反，使用`GetFileAttributes`函数，因为它要快得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T20:58:23.710

我们在 Windows 上编写[了一个专门用于连接点的 C++ 库](https://github.com/NeoSmart/ln-win)，它在 MIT 许可下是开源的。您的问题是否不清楚这是否是您想要的，正如您所说的硬链接，但随后询问如何解决它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-23T02:55:55.107

使用 GetFileInformationByHandle 检查文件是否有硬链接

```
typedef struct _BY_HANDLE_FILE_INFORMATION {
  DWORD    dwFileAttributes;
  FILETIME ftCreationTime;
  FILETIME ftLastAccessTime;
  FILETIME ftLastWriteTime;
  DWORD    dwVolumeSerialNumber;
  DWORD    nFileSizeHigh;
  DWORD    nFileSizeLow;
  DWORD    nNumberOfLinks;     <--- if this value is more than 1, then we have hard links
  DWORD    nFileIndexHigh;
  DWORD    nFileIndexLow;
} BY_HANDLE_FILE_INFORMATION, *PBY_HANDLE_FILE_INFORMATION, *LPBY_HANDLE_FILE_INFORMATION; 
```

然后对于 vista 或更高版本，使用 FindFirstFileName/FindNextFileName 来获取目标。

对于较早的系统版本，遍历整个卷并比较nFileIndexHigh和nFileIndexLow，一旦找到，--nNumberOfLinks，打印目标名称，直到nNumberofLinks==1，然后退出。

这是我通过反转二进制文件在 FindLinks.exe 中找到的方式。

```
 if ( _wcsicmp(dword_422154, lpFileName) )
  {
    sub_402580(v4, (DWORD *)&v8, (int)&fileindexlow, (int)&v11);
    if ( fileindexlow == a3 && fileindexhigh == a4 )
    {
      wprintf(L"\r          \r%s\n", v4);
      if ( --*v5 == 1 )  //numoflinks
        exit(0);
    }
  }

char __usercall sub_402580@<al>(LPCWSTR lpFileName@<ecx>, DWORD *a2@<edx>, int a3, int a4)
{
  DWORD *v4; // edi
  DWORD v5; // eax
  HANDLE v6; // esi
  DWORD v7; // ecx
  const WCHAR *lpFileNamea; // [esp+Ch] [ebp-40h]
  struct _BY_HANDLE_FILE_INFORMATION FileInformation; // [esp+14h] [ebp-38h]

  v4 = a2;
  lpFileNamea = lpFileName;
  v5 = GetFileAttributesW(lpFileName);
  if ( v5 == -1 )
    return 0;
  *v4 = 0;
  v4[1] = 0;
  *(_DWORD *)a3 = 0;
  *(_DWORD *)(a3 + 4) = 0;
  *(_DWORD *)a4 = 0;
  v6 = CreateFileW(lpFileNamea, 0x80u, 7u, 0, 3u, (v5 & 0x10) << 21, 0);
  if ( v6 == (HANDLE)-1 )
    return 0;
  if ( GetFileInformationByHandle(v6, &FileInformation) )
  {
    *(_DWORD *)a4 = FileInformation.nNumberOfLinks;
    v7 = FileInformation.nFileSizeHigh;
    *v4 = FileInformation.nFileSizeLow;
    v4[1] = v7;
    LOWORD(v7) = FileInformation.nFileIndexHigh;
    *(_DWORD *)a3 = FileInformation.nFileIndexLow;
    *(_DWORD *)(a3 + 4) = (unsigned __int16)v7;
  }
  CloseHandle(v6);
  return 1;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-13T00:17:46.853

以防万一其他人来寻找这些信息，我决定发布一个我在回答这个问题后写的小 POC。它基于 Jay 描述的步骤，并且应该与 Windows XP 和更高版本的操作系统兼容。

[POC 代码](https://gist.github.com/juntalis/4a90ee024732b88539a65d92d0b6a296)

# haskell - 在 yesod 中具有自定义验证的文件上传字段

> ID：10260677
> 
> 赞同：4
> 
> 时间：2012-04-21T16:06:26.747
> 
> 标签：haskell, yesod

在 yesod 中上传文件的常用方法是使用`fileAFormOpt`/ `fileAFormReq`。但是，这些不会产生`Field`值，而是直接进入 AForm，这就是为什么我不能简单地`check`使用`Yesod.Form.Functions`.

如何为 Yesod 文件上传添加自定义验证？

（我的用例是我想检查`fileContentType`上传的文件是否在特定的有效类型列表中。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T08:27:00.733

实际上，我认为这是当前 API 的一个弱点。我能想到的实现这一点的唯一方法是基本上复制粘贴现有功能并进行更改。显然这是不可接受的。

您能否通过电子邮件发送有关此问题的邮件列表，以便我们可以尝试设计更好的 API？

# javascript - 每次克隆时给克隆的元素一个唯一的数字 id 名称

> ID：10260681
> 
> 赞同：1
> 
> 时间：2012-04-21T16:07:03.547
> 
> 标签：javascript, jquery, html-table, clone

我有 3 个选择选项用于组合为隐藏字段“episode_airdate”创建一个值。问题是`<table tr>`它们所在的被克隆了，因此 id 也会被克隆，这使得 getElementById 无用。我尝试了 ByName 和 ByClass，但没有成功。

```
<script>
        function datepopulate(){
    var day = document.getElementById('airdate_day').value;
    var month = document.getElementById('airdate_month').value;
    var year = document.getElementById('airdate_year').value;
   var completedate = day+'-'+month+'-'+year;
   document.getElementById('episode_airdate').value = completedate;
      alert(document.getElementById('episode_airdate').value);
   return true;
}

</script> 
```

加上生成的数字，它会像这样 airdate_year[1] + airdate_month[1] + airdate_day[1] = episode_airdate[1] ？

如果 jQuery 有更好的方法来做到这一点，我愿意接受这个想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T16:19:54.353

对此真的没有很好的解决方案。您不能克隆 HTML 页面的整个部分 - id 和所有部分 - 然后在插入后对其进行更改。您应该在插入克隆位*之前修复 HTML。*

看看你的克隆过程？也许不要让它成为一个通用的克隆，而是一个可以生成特定 HTML 的生成器，并且 id 是基于动态数据的。

# java - 在android中写入/读取结构/类数据

> ID：10260682
> 
> 赞同：0
> 
> 时间：2012-04-21T16:07:10.427
> 
> 标签：java, android, file-io

好吧，基本上我想这样做，

```
class myclass
{
    int a1;
    float b1;
    char c1;     //This is a single character
}
List<myclass> obs; 
```

现在在运行时，这个 obs 变量，因为它是一个列表，将包含我们得到其大小的 myclass 实例的数组`obs.size();`

那么，如何使用 OutputStream 或类似的东西将这些数据写入文件说“data1.bin”作为二进制文件。但这要在 Android 操作系统中完成。

我在 C++ 中做了类似的事情

```
class myclass
{
    int a1;
    float b1;
    char c1;
}

myclass student1;

ofstream output_file("students.data", ios::binary);
output_file.write((char*)&student1, sizeof(student1));
output_file.close() 
```

但是如何在 Android 操作系统中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T16:35:17.980

如果你想将你的类转储到文件中，让类实现 Serializable 和 java（或 android 上的 Dalvik VM）将在幕后为你做这件事。

```
class MyClass implements Serializable {

    private static final long serialVersionUID = 1L;

    int a1;
    float b1;
    char c1;     //This is a single character
}

private File file;
private MyClass myClass;

private void writeIt() throws IOException {

    ObjectOutputStream stream = null;
    try {
        stream = new ObjectOutputStream(new FileOutputStream(file));
        stream.writeObject(myClass);
    } 
    finally {
        if(stream != null) {
            stream.close();
        }
    }
}

private MyClass readIt() throws IOException, ClassNotFoundException {

    ObjectInputStream stream = null;
    try {
        stream = new ObjectInputStream(new FileInputStream(file));
        return (MyClass) stream.readObject();
    } 
    finally {
        if(stream != null) {
            stream.close();
        }
    }
} 
```

# javascript - 第二次方法是进入 chrome

> ID：10260684
> 
> 赞同：1
> 
> 时间：2012-04-21T16:07:16.047
> 
> 标签：javascript, google-chrome

我有一个页面，当按下回车键时我有一个文本框，它将调用这个 javascript 来提交表单。我设置的表格是这样的。所以我注意到当我第一次在 chrome 中按 Enter 时，它会通过 post 发送数据。第二次是通过get发送。我可以通过检查元素看到它。但在 IE 和 FF 中工作得非常好。

```
 function checkEnter(e)
{ //e is event object passed from function invocation
    var characterCode;
    // literal character code will be stored in this variable

    if(e && e.which)
    { //if which property of event object is supported (NN4)
    e = e
    characterCode = e.which //character code is contained in NN4's which property
    }
    else
    {
    e = event
    characterCode = e.keyCode //character code is contained in IE's keyCode property
    }
    //alert("Check Enter : "+characterCode);

    if(characterCode == 13)
    { //if generated character code is equal to ascii 13 (if enter key)
    document.forms[0].submit();//submit the form
    return false ;
    }
    else
    {
    return true 
    }
} 
```

# c++ - boost::property_tree::json_parser 和两字节宽的字符

> ID：10260688
> 
> 赞同：9
> 
> 时间：2012-04-21T16:07:46.810
> 
> 标签：c++, boost, unicode, boost-propertytree

# 介绍

```
std::string text = "á"; 
```

“á”是两字节字符（假设是 UTF-8 编码）。
所以下面的行打印 2。

```
std::cout << text.size() << "\n"; 
```

但`std::cout`仍能正确打印文本。

```
std::cout << text << "\n"; 
```

# 我的问题

我传递`text`给`boost::property_tree::ptree`然后传递给`write_json`

```
boost::property_tree::ptree root;
root.put<std::string>("text", text);

std::stringstream ss;
boost::property_tree::json_parser::write_json(ss, root);
std::cout << ss.str() << "\n"; 
```

结果是

```
{
    "text": "\u00C3\u00A1"
} 
```

text 等于 "Ã¡"，它不同于 "á"。

是否可以在不切换到 的情况下解决此问题`std::wstring`？改变 library( `boost::property_tree::ptree`) 是否有可能解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-23T18:38:41.913

我找到了一些解决方案。一般来说，您需要为 指定`boost::property_tree::json_parser::create_escapes`模板`[Ch=Char]`，以提供您的“特殊场合无错误转义”。

JSON 标准假定所有字符串都是 UTF-16 编码的“\uXXXX”转义，但一些库支持 UTF-8 编码和“\xXX”转义。如果 JSON 文件可以用 UTF-8 编码，您可以传递所有高于 0x7F 的字符，女巫是为原始功能而设计的。

我在使用之前放置了这段代码`boost::property_tree::json_parser::write_json`。它来自`boost_1_49_0/boost/property_tree/detail/json_parser_write.hpp`：

```
namespace boost { namespace property_tree { namespace json_parser
{
    // Create necessary escape sequences from illegal characters
    template<>
    std::basic_string<char> create_escapes(const std::basic_string<char> &s)
    {
        std::basic_string<char> result;
        std::basic_string<char>::const_iterator b = s.begin();
        std::basic_string<char>::const_iterator e = s.end();
        while (b != e)
        {
            // This assumes an ASCII superset. But so does everything in PTree.
            // We escape everything outside ASCII, because this code can't
            // handle high unicode characters.
            if (*b == 0x20 || *b == 0x21 || (*b >= 0x23 && *b <= 0x2E) ||
                (*b >= 0x30 && *b <= 0x5B) || (*b >= 0x5D && *b <= 0xFF)  //it fails here because char are signed
                || (*b >= -0x80 && *b < 0 ) ) // this will pass UTF-8 signed chars
                result += *b;
            else if (*b == char('\b')) result += char('\\'), result += char('b');
            else if (*b == char('\f')) result += char('\\'), result += char('f');
            else if (*b == char('\n')) result += char('\\'), result += char('n');
            else if (*b == char('\r')) result += char('\\'), result += char('r');
            else if (*b == char('/')) result += char('\\'), result += char('/');
            else if (*b == char('"'))  result += char('\\'), result += char('"');
            else if (*b == char('\\')) result += char('\\'), result += char('\\');
            else
            {
                const char *hexdigits = "0123456789ABCDEF";
                typedef make_unsigned<char>::type UCh;
                unsigned long u = (std::min)(static_cast<unsigned long>(
                                                 static_cast<UCh>(*b)),
                                             0xFFFFul);
                int d1 = u / 4096; u -= d1 * 4096;
                int d2 = u / 256; u -= d2 * 256;
                int d3 = u / 16; u -= d3 * 16;
                int d4 = u;
                result += char('\\'); result += char('u');
                result += char(hexdigits[d1]); result += char(hexdigits[d2]);
                result += char(hexdigits[d3]); result += char(hexdigits[d4]);
            }
            ++b;
        }
        return result;
    }
} } } 
```

我得到的输出：

```
{
    "text": "aáb"
} 
```

该函数`boost::property_tree::json_parser::a_unicode`在将转义的 unicode 字符读取为签名字符时也存在类似的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-24T05:04:48.520

Boost 在 1.59 版本上修复了它。如果要升级版本，则需要小心。您可以从下面检查更改内容。 [https://www.boost.org/users/history/version_1_59_0.html](https://www.boost.org/users/history/version_1_59_0.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-31T21:49:13.960

支持基本多语言平面以上：

```
 template<class Ch>
std::basic_string<Ch> create_escapes(const std::basic_string<Ch> &s)
{
    std::basic_string<Ch> result;
    typename std::basic_string<Ch>::const_iterator b = s.begin();
    typename std::basic_string<Ch>::const_iterator e = s.end();
    while (b != e)
    {
        if (*b == 0x20 || *b == 0x21 || (*b >= 0x23 && *b <= 0x2E) ||
            (*b >= 0x30 && *b <= 0x5B) || (*b >= 0x5D && *b <= 0x80))
            result += *b;
        else if (*b == Ch('\b')) result += Ch('\\'), result += Ch('b');
        else if (*b == Ch('\f')) result += Ch('\\'), result += Ch('f');
        else if (*b == Ch('\n')) result += Ch('\\'), result += Ch('n');
        else if (*b == Ch('\r')) result += Ch('\\'), result += Ch('r');
        else if (*b == Ch('/')) result += Ch('\\'), result += Ch('/');
        else if (*b == Ch('"'))  result += Ch('\\'), result += Ch('"');
        else if (*b == Ch('\\')) result += Ch('\\'), result += Ch('\\');
        else
        {
            const char * hexdigits = "0123456789ABCDEF";

            typedef typename make_unsigned<Ch>::type UCh;
            unsigned long u = static_cast<unsigned long>(static_cast<UCh>(*b));

            if (u <= 0xFFFF)
            {            
                int d1 = u / 4096; u -= d1 * 4096;
                int d2 = u / 256; u -= d2 * 256;
                int d3 = u / 16; u -= d3 * 16;
                int d4 = u;

                result += Ch('\\'); result += Ch('u');
                result += Ch(hexdigits[d1]); result += Ch(hexdigits[d2]);
                result += Ch(hexdigits[d3]); result += Ch(hexdigits[d4]);
            }
            else
            {
                u = (((static_cast<unsigned long>(static_cast<UCh>(*b)) - 0x10000) >> 10) & 0x3ff) + 0xd800;

                int d1 = u / 4096; u -= d1 * 4096;
                int d2 = u / 256; u -= d2 * 256;
                int d3 = u / 16; u -= d3 * 16;
                int d4 = u;

                result += Ch('\\'); result += Ch('u');
                result += Ch(hexdigits[d1]); result += Ch(hexdigits[d2]);
                result += Ch(hexdigits[d3]); result += Ch(hexdigits[d4]);

                u = ((static_cast<unsigned long>(static_cast<UCh>(*b)) - 0x10000) & 0x3ff) + 0xdc00;

                d1 = u / 4096; u -= d1 * 4096;
                d2 = u / 256; u -= d2 * 256;
                d3 = u / 16; u -= d3 * 16;
                d4 = u;

                result += Ch('\\'); result += Ch('u');
                result += Ch(hexdigits[d1]); result += Ch(hexdigits[d2]);
                result += Ch(hexdigits[d3]); result += Ch(hexdigits[d4]);
            }
        }
        ++b;
    }
    return result;
} 
```

# php - 当wordpress运行没有问题时，PHP不能在IIS express中工作

> ID：10260691
> 
> 赞同：3
> 
> 时间：2012-04-21T16:08:01.440
> 
> 标签：php, webmatrix, iis-express

我已经通过 webmatrix 安装了 WordPress，当我运行它们时它们在我的计算机上运行良好。当我创建一个新网站或从模板创建时，它不起作用。假设我创建了一个 index.page 并且当我尝试运行它们时。我在浏览器中收到此消息。

HTTP 错误 404.3 - 未找到 由于扩展配置，无法提供您请求的页面。如果页面是脚本，则添加处理程序。如果应该下载文件，请添加 MIME 映射。

有人可以在这种情况下提供帮助吗？Wordpress 以 .php 扩展名运行意味着 PHP 安装在服务器上，例如

现在有人可以帮助我如何解决这个问题。

问候

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T05:38:19.693

听起来您可能只需要为您的站点启用 PHP。如果您转到站点工作区，然后单击“设置”，您应该会看到“启用 PHP”选项。这个复选框是否被选中？此外，多个 php-cgi-exe 实例并不是一件坏事，这正是 IIS 中的 PHP 的工作方式 :-)

# iphone - iPhone如何让两条连接线跟随到该位置？

> ID：10260701
> 
> 赞同：1
> 
> 时间：2012-04-21T16:08:54.487
> 
> 标签：iphone, ios, core-graphics, drawrect

我使用核心图形制作了语音气泡的尾部

讲话泡泡的尾部应该移动到我想要的任何点。

问题是当尾巴的末端部分（尖端部分）向下时它工作正常。

但是当气泡倒置时，就像气泡部分在底部，尾部在

顶部，尾部的2条连接线相互交叉并形成一个X，当它应该像/\

有人可以帮帮我吗？

```
double angle(CGPoint p1, CGPoint p2)
{
    //BOOL bRev = TRUE;
    double dx = p2.x - p1.x;
    double dy = p2.y - p1.y;
    if (dx == 0 && dy == 0) return 0.0

    if (dy == 0) {
        if (dx > 0) return 0.0;
        else return M_PI;
    }

    if (dx == 0) {
        if (dy > 0) {
            double ang = M_PI/2.0;
            //if (bRev) ang = M_PI*2 - ang;
            return ang;
        }
        else {
            double ang = M_PI/2.0 * 3;
            //if (bRev) ang = M_PI*2 - ang;
            return ang;
        }
    }

    if (dx > 0) {
        if (dy > 0) {
            double ang = atan((double)dy/(double)dx); // 1사분면
            //if (bRev) ang = M_PI*2 - ang;
            return ang;
        }
        else {
            double ang = atan((double)dy/(double)dx) + 2.0*M_PI; // 4사분면
            //if (bRev) ang = M_PI*2 - ang;
            return ang;
        }
    }
    else {
        double ang = atan((double)dy/(double)dx) + M_PI;
        //if (bRev) ang = M_PI*2 - ang;
        return ang;
    }
    return 0.0;
}

- (double)degree:(CGPoint)p1 and:(CGPoint)p2
{
    double rad = angle(p1, p2);
    double deg = rad * 180.0 / M_PI;
    if (deg >= 360.0) deg = deg - 360.0;
    return (deg);
}

- (CGPoint)getPoint:(CGPoint)cPt Len:(int)len BaseDegree:(double)d1 MoveDegree:(double)d2
{
    double radian = 3.14/180.0;
    CGPoint pt1;
    pt1.x = cPt.x + len*cos((d2-d1)*radian);
    pt1.y = cPt.y - len*sin((d2-d1)*radian);
    return pt1;
}

- (void)drawRect:(CGRect)rect{
    double degree1 = [self degree:CGPointMake(view.frame.origin.x(view.frame.size.width)/2,
                                              view.frame.origin.y+(view.frame.size.height)/2)
                              and:lastPt];

    CGPoint cpt = CGPointMake(view.frame.origin.x+(view.frame.size.width)/2,
                          view.frame.origin.y+(view.frame.size.height)/2);  

    CGPoint p1 = [self getPoint:cpt Len:10 BaseDegree:degree1 MoveDegree:90];
    CGPoint p2 = [self getPoint:cpt Len:10 BaseDegree:degree1 MoveDegree:-90];

    CGPathMoveToPoint(ctx, nil, p1.x, p1.y);
    CGPathAddLineToPoint(ctx, nil, lastPt.x, lastPt.y);
    CGPathAddLineToPoint(ctx, nil, lastPt.x-2, lastPt.y+2);
    CGPathAddLineToPoint(ctx, nil, lastPt.x-4, lastPt.y);
    CGPathAddLineToPoint(ctx, nil, p2.x, p2.y);
} 
```

![在此处输入图像描述](../Images/f4d185ea876d2ffeb4668e2278cd7a7c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T13:15:07.593

在你的代码中，当你画线时，你正在计算起点和终点，但最后你要：

```
CGPathAddLineToPoint(ctx, nil, lastPt.x, lastPt.y);
CGPathAddLineToPoint(ctx, nil, lastPt.x-2, lastPt.y+2);
CGPathAddLineToPoint(ctx, nil, lastPt.x-4, lastPt.y); 
```

因此，您总是在气泡的底部/顶部/侧面绘制微小的 v，作为从左上、中下、右上向上固定的 v，无论您正在绘制哪种方式。

您需要更改它以确保那些 -2/+2 响应您所处的向上/圆形 - 例如，当您倒置时，它最终应该是

```
CGPathAddLineToPoint(ctx, nil, lastPt.x+4, lastPt.y);
CGPathAddLineToPoint(ctx, nil, lastPt.x+2, lastPt.y-2);
CGPathAddLineToPoint(ctx, nil, lastPt.x, lastPt.y); 
```

除了应该计算，而不仅仅是硬编码。

# c - OpenGL“运动拖动”效果 - 不是每帧都清除屏幕

> ID：10260708
> 
> 赞同：0
> 
> 时间：2012-04-21T16:09:42.610
> 
> 标签：c, opengl, graphics

我有一个运行良好的 OpenGL 游戏，除了我想将“拖动”效果应用到移动对象：当它们移动时，你可以从它们之前的位置看到它们的轨迹。

我尝试的是每隔几帧而不是每帧清除一次颜色缓冲区，但这不起作用：![在此处输入图像描述](../Images/a6a4e257332e40e57cfac3c9b9dfdfd6.png)即使我每隔 50 帧左右调用一次 glClear，轨迹也不会被擦除。 ![在此处输入图像描述](../Images/a6ca6dfaa153ffe2efb5ff0dd170ae26.png)这张图片显示了它非常烦人的闪烁。

有人可以解释为什么在 OpenGL 中会发生这种情况以及如何解决它，或者可能是另一种方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T16:35:18.590

谷歌“运动模糊+ opengl”。这是一个全屏的后期处理效果。另一种方法是将每个对象的轨迹存储在出列队列中，您将当前位置推到一端并将其从另一端移开，为队列中的每个项目绘制效果（可能使项目更多和越走越不透明）。

否则没有代码很难知道你在做什么。我很确定只是不清除颜色缓冲区是行不通的！

# javascript - 将 javascript 重写为 jQuery

> ID：10260710
> 
> 赞同：-5
> 
> 时间：2012-04-21T16:09:59.447
> 
> 标签：javascript, jquery

我还不是一个敏锐的 jquery / javascript 编码器 - 所以我希望那里有一个善良的灵魂，他可以帮助我将 javascript 重写为 jQuery 脚本。

代码如下所示：

```
<script type="text/javascript">

function update_delivery_address()
{
    elm_true = document.getElementById('delivery_same_as_invoice_true');
    elm_false = document.getElementById('delivery_same_as_invoice_false');
    if (!elm_true.checked && !elm_false.checked)
    {
        elm_true.checked = true;
    }
    if (elm_true.checked)
    {
        document.getElementById('delivery_name').value = '';
        document.getElementById('delivery_att').value = '';
        document.getElementById('delivery_address').value = '';
        document.getElementById('delivery_zipcode').value = '';
        document.getElementById('delivery_city').value = '';
        document.getElementById('delivery_email').value = '';
        document.getElementById('delivery_name').disabled = true;
        document.getElementById('delivery_att').disabled = true;
        document.getElementById('delivery_address').disabled = true;
        document.getElementById('delivery_zipcode').disabled = true;
        document.getElementById('delivery_city').disabled = true;
        document.getElementById('delivery_email').disabled = true;
    }
    else
    {
        document.getElementById('delivery_name').disabled = false;
        document.getElementById('delivery_att').disabled = false;
        document.getElementById('delivery_address').disabled = false;
        document.getElementById('delivery_zipcode').disabled = false;
        document.getElementById('delivery_city').disabled = false;
        document.getElementById('delivery_email').disabled = false;
    }
}

update_delivery_address();
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T16:18:20.940

轻松搞定。全部替换

```
document.getElementById('yourid') 
```

和

```
$('#yourid') 
```

全部替换

```
.value = '' 
```

和

```
.val('') 
```

全部替换

```
.disabled = true (or false) 
```

和

```
.prop('disabled', true) // or false 
```

全部替换

```
.checked = true (or false) 
```

和

```
.prop('checked', true) // or false 
```

和所有

```
.checked 
```

和

```
.prop('checked') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T16:18:39.673

首先，我会为所有输入字段分配一个类（如 .delivery 或其他），以便选择更容易，您可以按类选择：

```
$('.delivery') 
```

有关更多信息，请参阅[http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)。

And then set all of your attributes accordingly

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-21T16:17:07.177

jQuery 用于在更短的时间内完成工作。例如你可以写

`elm_true = $('#delivery_same_as_invoice_true').get(0);`

代替

`elm_true = document.getElementById('delivery_same_as_invoice_true');`

尽管如此，代码仍然是（有效的）JavaScript——没有必要重写你的代码（除了可读性）。

如果你想重写你的代码，你可以替换

`var_name = document.getElementById('someid');`

由

`var_name = $('#someid').get(0);`

和

`document.getElementById('someid').attribute = value`

经过

`$('#someid').attr("attribute",value)`

例如

`$('#delivery_name').attr('disabled',false);`

# c++ - 开源应用程序中的线程使用示例

> ID：10260711
> 
> 赞同：4
> 
> 时间：2012-04-21T16:10:02.923
> 
> 标签：c++, multithreading

我已经阅读了关于 pthreads 和 OpenMP 的文档并且我理解它们。我已经阅读了这些示例，并使用它们实现了一小部分程序。有没有用 C++ 编写的同时广泛使用线程的生产开源应用程序的好例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T16:17:34.513

我能想到的两个是[LuxRender](http://www.luxrender.net/en_GB/index)和[Blender](http://www.blender.org/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T19:52:22.863

为什么不看看线程构建块？对我来说，这是两全其美的 - 像 OpenMP 中的算法级线程和通过 std::thread 和观察者/调度程序进行的低级线程和控制。跨平台，免费，附带很棒的文档和一整套示例。

# php - 警告：mysql_fetch_assoc()：提供的参数不是第 22 行 /home/a5751969/public_html/func/album.func.php 中的有效 MySQL 结果资源

> ID：10260713
> 
> 赞同：0
> 
> 时间：2012-04-21T16:10:05.217
> 
> 标签：php, mysql

> **可能重复：**
> [PHP 错误：mysql_fetch_array() 期望参数 1 是资源，给定布尔值](https://stackoverflow.com/questions/2973202/php-error-mysql-fetch-array-expects-parameter-1-to-be-resource-boolean-given)

我已经检查了两次代码，并且还检查了表中的标题并且它们匹配，我可能已经查看代码太久了，我可能很难找到错误。

第 13-34 行

```
$albums_query = mysql_query("
SELECT `albums`.`album_id`, `albums`.`timestamp`, `albums`.`name`, LEFT(`albums`.`description`, 50) as `description`, COUNT         (`images`.`images_id`) as `image_count`
FROM `albums`
LEFT JOIN `images`
ON `albums`.`album_id` = `images`.`album_id`
WHERE `albums`.`user_id` = ".$_SESSION['user_id']."
GROUP BY `albums`.`album_id` 
");

while ($albums_query = mysql_fetch_assoc($albums_query)) {
    $albums[] = array(
        'id' => $albums_row['album_id'],
        'timestamp' => $albums_row['timestamp'],
        'name' => $albums_row['name'],
        'description' => $albums_row['description'],
        'count' => $albums_row['image_count']
    );
}

return $albums ; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T16:12:15.920

您正在用一行数据覆盖查询结果：

```
$albums_query = mysql_fetch_assoc($albums_query) 
```

应该：

```
 $albums_row = mysql_fetch_assoc($albums_query) 
```

（大概）

# templates - GSP 中的参数传递

> ID：10260714
> 
> 赞同：0
> 
> 时间：2012-04-21T16:10:10.817
> 
> 标签：templates, grails, parameters, gsp

在 GSP 文件中获取某些参数时，我遇到了一些麻烦。

想象一个类似 reddit 的网站。有subreddits，在我的情况下是“社区”。我希望用户能够在每个社区中注册，然后向其中发布消息。

我有一个“社区”模型和一个“岗位”模型。每个帖子都属于一个社区。该页面在其所有页面（主页、提交帖子页面等）中遵循通用布局。有些东西在所有页面中都很常见，例如侧边栏和导航栏。每次我们在社区控制器中调用**show**操作时，这些通用模板都会获得一个模型 [communityInstance: communityInstance]，因此它们可以显示社区名称、用户数量等。直到这里，一切正常。

现在，我想要一个提交帖子页面，用户可以在其中填写标题和正文。这只是一种形式。假设我只是制作了一个带有表单（以及所有其他常见模板，通过 sitemesh）的 gsp 文件。我将直接链接到它，无需通过控制器->动作。如果我不调用 community->show，我的模板将如何获取他们需要的数据？我应该将参数传递给带有社区名称的链接，以便通用模板可以获取它吗？我发现动作如何将参数发送到 gsp 文件很酷很容易，但是如果我不使用动作怎么办？

也许我解释得不够好，但我希望你明白。

提前致谢。

编辑：如果我在社区中为我想要的每个页面采取行动怎么办？我是否应该在社区中使用诸如“addPost”、“viewPost”、“editPost”等操作来呈现视图并将导航栏/侧边栏所需的数据传递给它们？即使这样，每次我想渲染页面时，我都必须向操作发送参数......

**更简单：** 我有这个结构 /$community/addProp，其中 adProp 是一个 gsp 文件（无操作）。如何从 addProp.gsp 文件中获取社区名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T17:11:07.340

我不确定是否完全理解，但似乎您可以将相关社区 ID 作为隐藏输入放在提交表单中。

# spring - GenericJDBCException：无法打开连接

> ID：10260719
> 
> 赞同：1
> 
> 时间：2012-04-21T16:10:24.217
> 
> 标签：spring, jpa, persistence, glassfish-3

我有一个问题真的让我大吃一惊。*在 localhost 上一切正常，但是当我在托管（ jelastic*）服务器（*glassfish 3.1.1*）上部署我的应用程序时

使用：

*   春天 3.1.1
*   玻璃鱼 3.1.1
*   JSF 2.0
*   JPA 2.0

收到这个（较短的版本）：

> javax.persistence.PersistenceException：org.hibernate.exception.GenericJDBCException：无法打开连接
> 
> 引起：org.hibernate.exception.GenericJDBCException：无法打开连接
> 
> 原因：javax.resource.spi.ResourceAllocationException：分配连接时出错。原因：无法分配连接，因为：握手错误

***......关于BAD HANDSHAKE**的其他一些类似的行并深入了解：*

> 引起：com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException: Bad handshake

只是提到-在本地主机上一切正常：

* * *

**/WEB-INF/classes/META-INF/persistence.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" 
xmlns="http://java.sun.com/xml/ns/persistence"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/persistence
http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">

<persistence-unit name="shopPU" transaction-type="JTA">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <jta-data-source>jdbc/shopJNDI</jta-data-source>
    <class>com.jelastic.adiso87.Shop.entity.UserDetailEntity</class>
    <class>com.jelastic.adiso87.Shop.entity.ProductEntity</class>
    <class>com.jelastic.adiso87.Shop.entity.CategoryEntity</class>
    <properties>  
        <property name="hibernate.hbm2ddl.auto" value="update"/>  
        <property name="hibernate.dialect" value="org.hibernate.dialect.MySQL5Dialect"/>  
    </properties> 
</persistence-unit>
</persistence> 
```

**应用程序上下文.xml**

适用于所有 3.0 的 xlmns

```
<!-- CONTEXT CONFIGURATRION -->
<context:component-scan base-package="com.jelastic.adiso87.Shop" />
<context:annotation-config />

<!-- PERSISTENCE AND TRANSACTION CONFIGURATION -->
<jee:jndi-lookup id="myEmf" jndi-name="persistence/shopPU" />
<jee:jndi-lookup id="dataSource" jndi-name="shopJNDI" />
<bean id="txManager" class="org.springframework.transaction.jta.JtaTransactionManager">
    <property name="transactionManagerName" value="java:appserver/TransactionManager" />
</bean>
<tx:annotation-driven transaction-manager="txManager" />

<!-- END OF CONFIGURATION -->

<!-- BEANS -->
<bean id="userDetailDao" class="com.jelastic.adiso87.Shop.dao.UserDetailDaoImpl"/> 
```

**web.xml**

```
<web-app xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
version="3.0"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
                  http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">

<display-name>My App</display-name>
<description>MyProject web.xml</description>

<!-- Welcome files -->
<welcome-file-list>
    <welcome-file>index.jsf</welcome-file>
</welcome-file-list>

<!-- Project Stage -->
<context-param>
    <param-name>javax.faces.PROJECT_STAGE</param-name>
    <param-value>Development</param-value>
</context-param>

<!-- SPRING FRAMEWORK INTEGERATION -->
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/applicationContext.xml</param-value>
</context-param>
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<listener>
    <listener-class>
        org.springframework.web.context.request.RequestContextListener</listener-class>
</listener>
<!-- Log4j CONFIGURATION -->
<context-param>
    <param-name>log4jConfigLocation</param-name>
    <param-value>/WEB-INF/log4j.properties</param-value>
</context-param>

<context-param>
    <param-name>log4jRefreshInterval</param-name>
    <param-value>1000</param-value>
</context-param>

<listener>
    <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class>
</listener>

<!-- Use Documents Saved as *.xhtml -->
<context-param>
    <param-name>javax.faces.DEFAULT_SUFFIX</param-name>
    <param-value>.xhtml</param-value>
</context-param> 
```

**面孔-config.xml**

```
<faces-config xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
version="2.0">

<application>
    <resource-bundle>
        <base-name>com.jelastic.adiso87.international.messages</base-name>
        <var>msg</var>
    </resource-bundle>
    <locale-config>
        <default-locale>pl</default-locale>
        <supported-locale>en</supported-locale>
    </locale-config>

    <el-resolver>org.springframework.web.jsf.el.SpringBeanFacesELResolver</el-resolver>
</application> 
```

在 glassfish 中，我已经对池和资源进行了与本地主机相同的配置。我只更改了有关数据库的信息。所以在管理面板中我有**Ping Succeed**

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T18:46:21.473

我相信这是这个错误的情况：[http ://bugs.mysql.com/bug.php?id=64983](http://bugs.mysql.com/bug.php?id=64983)

解决方案是升级密码哈希（错误中提供了指南的链接：http: [//dev.mysql.com/doc/refman/5.5/en/password-hashing.html](http://dev.mysql.com/doc/refman/5.5/en/password-hashing.html)）

# php - 在两个php文件之间传递数组

> ID：10260720
> 
> 赞同：0
> 
> 时间：2012-04-21T16:10:56.620
> 
> 标签：php, redirect, header, params

我有一个需要重定向到另一个的 php 文件，但我需要将一个数组传递给第二个文件。我怎样才能做到这一点。

我知道这是错误的，但我需要一些逻辑上与此类似的东西。

```
<?php 
       $arr = array('this'=>'is', 'some'=>'stuff');
       header("someurl.php", vals=>$arr);
 ?> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-21T16:14:04.733

使用[`http_build_query`](http://php.net/http_build_query)：

```
header("Location: someurl.php?" . http_build_query($arr)); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-21T16:14:11.727

这不是你做标题的方式。它必须是

```
header("Location: someurl.php?vals=$arr"); 
```

但是，这只会生成 URL

```
someurl.php?vals=Array 
```

请注意，重定向本质上不能进行 POST。它将导致一个新的 GET 请求，这意味着您必须在 URL 中传递数据。如果您有一个非常大的网址，您几乎肯定会丢失其中的大部分内容，因为网址有长度限制。

但是，如果它很短，您可以尝试以下操作：

```
$url = 'someurl.php?vals=' . url_encode(serialize($arr));
header("Location: $url"); 
```

并希望它有效。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-21T16:17:36.990

如果你不想暴露你的 $array，你必须使用 PHP 内置会话支持。

```
session_start(); // DO CALL ON TOP OF BOTH PAGES
$_SESSION['array'] = $array;
echo $_SESSION['array']; // GIVES SAME $array FOR BOTH PAGES 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-21T16:15:13.357

您可以将数组存储在会话或请求中，然后检索它。

如果是不同的请求，您必须在会话中进行。

```
$_SESSION['myarray'] = $array_you_want_to_store; 
```

接着。

```
$array_you_want_to_retrieve = $_SESSION['myaarray']; 
```

# asp.net - 解码视图状态中的第一个值是什么？

> ID：10260726
> 
> 赞同：2
> 
> 时间：2012-04-21T16:12:15.543
> 
> 标签：asp.net, viewstate

我正在查看一些解码的视图状态值，我想知道第一个字符串值代表什么。例如：

```
Pair
 Pair
  1129781638 
```

如果页面在不同的浏览器中刷新或加载，这个值似乎不会改变。

让我们以 easyjet.com 为例 - 我尝试了站点的 /EN 和 /PL 版本 - 视图状态值不同，但两者的字符串值仍然相同：

```
1\. /wEPDwUKMTEyOTc4MTYzOGRkWfx6hV2SnqItqR4uWJdw0H18w9fWuVgmqXph3EqMQ98=
2\. /wEPDwUKMTEyOTc4MTYzOGRkWFe7DRds5xP9uLhFfkODYnASZhcgHyO0xh6yQ2I6Z0Y= 
```

在线查看状态解码器：http:
[//ignatu.co.uk/ViewStateDecoder.aspx](http://ignatu.co.uk/ViewStateDecoder.aspx)

有任何想法吗 ？

# objective-c - “NSOpenPanel *panel = [NSOpenPanel openPanel];”期间的沙滩球

> ID：10260729
> 
> 赞同：0
> 
> 时间：2012-04-21T16:12:19.663
> 
> 标签：objective-c, cocoa

我的应用程序（似乎仅在调试模式下），*有时*（以看似不可预测的方式）在这个简单的语句中无限地进行沙滩球：

```
NSOpenPanel *panel = [NSOpenPanel openPanel]; 
```

它只是无限的沙滩球。什么都没有发生。内存使用量根本没有变化。可能是应用程序在框架内的某处遇到了无限循环。

这可能是什么原因造成的？我该如何分析原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T16:31:04.440

至于如何分析：当你说“调试模式”时，你的意思是它在调试器下运行吗？如果是这样，如果你点击暂停按钮会发生什么？

另一种可能性是使用活动监视器在你的进程进行沙滩球时对其进行采样。

# javascript - 使用 Javascript 编辑对象项

> ID：10260731
> 
> 赞同：2
> 
> 时间：2012-04-21T16:12:43.013
> 
> 标签：javascript

我正在尝试根据其 ID 编辑数组中的数据。这是我的数组：

```
var myCollection = {
"data": [
{ "id":"1", "Name":"John Smiths", "AMT_STD":"1.99"},
{ "id":"2", "Name":"Carlsberg", "AMT_STD":"1.99"},
{ "id":"3", "Name":"Samuel Adams", "AMT_STD":"1.99"}
  ]}; 
```

我想做的是创建一个函数，允许我在数组中找到 id=1，然后将 AMT_STD 的值更新为 1.00。

通过查看其他问题，我设法添加到数组并删除项目，但我还没有弄清楚如何查找然后编辑和项目。

我使用下面的代码添加项目：

```
function Add_Item() {
myCollection.data.push( { "id":"4", "Name":"Fosters", "AMT_STD":"1.99" } );
} 
```

我使用下面的代码删除项目：

```
function findAndRemove(array, property, value) {
$.each(array, function(index, result) {
if(result[property] == value) {
array.splice(index, 1);
}    
}); 
```

由 findAndRemove(myCollection.data, 'id', '1') 调用；

我试图编辑 findAndRemove 函数，因为该方法可以在数组中找到项目，但是我无法弄清楚在索引中编辑项目的语法，并希望有人能指出我正确的方向。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T16:42:56.480

你可以走那条路，并且有这样做的功能..

但如果您仍然可以更改格式，请考虑

```
var myCollection = {
  data: {
    1:{Name:"John Smiths", "AMT_STD":"1.99"},
    2:{Name:"Carlsberg", "AMT_STD":"1.99"},
    3:{Name:"Samuel Adams", "AMT_STD":"1.99"}
  }
} 
```

插入或记录更新可以这样完成：

```
myCollection.data[4]={Name:"Fosters", "AMT_STD":"1.99" } 
```

更新一个值：

```
myCollection.data[2]["AMT_STD"]="2.00" 
```

检索数据

```
myCollection.data[1];//the full record
myCollection.data[1].Name;//just the name
myCollection.data[1]["AMT_STD"];//similar to the previous but can use more complex keys/names 
```

删除记录

```
delete myCollection.data[2]; 
```

这样就不需要插入、搜索或删除代码（使用 javascript 对象内置功能）。您可以使用字符串作为 id（不限于数字），并且您可以利用 javascript 的快速索引搜索

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T17:00:26.673

其他答案中有很好的指导方针。但是，如果你*真的*想像 findAndRemove 函数那样做，最类似的方法是创建一个函数 findAndReplace 如下，它将在找到匹配项时更新属性作为附加参数（在你的情况下为“AMT_STD”）以及它应该更新为（在您的情况下为 1.00）的值：

```
 function findAndReplace(array, property, value, replaceProperty, replaceValue) {
    $.each(array, function(index, result) {
        if (result[property] == value) {
            result[replaceProperty] = replaceValue;
        }
    });
   } 
```

如下调用它：

```
findAndReplace(myCollection.data, 'id', '1', 'AMT_STD', 1.00); 
```

作为附加说明，您在问题中使用的 findAndRemove 函数实际上会在某些浏览器中导致 javascript 错误。您不能在“.each”函数的中间调用 splice 方法，因为 jQuery 将尝试在数组中已删除的对象之一上运行该函数，该对象随后具有未定义的值。更好的方法是将要删除的项目的索引保存在变量中，然后在执行 .each 之后运行 splice 函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T16:21:12.833

这个原型方法怎么样？

```
Array.prototype.updateById = function(id, key, val) {
  // Loop the array - this refers to the array in this context
  for (var i = 0; i < this.length; i++) {
    if (this[i].id == id) {
      this[i][key] = val;
      return true;
    }
  }
  return false;
};

// Use it like this:
var updateSuccess = myCollection.data.updateById(1, "AMT_STD", "1.00");

// updateSuccess is now a boolean indicating whether the object was found and updated 
```

通过对其进行原型设计，您可以将该方法用于任何包含具有`id`属性的对象的数组对象。

# python - 使用 Google 的安全浏览模块时遇到问题

> ID：10260733
> 
> 赞同：1
> 
> 时间：2012-04-21T16:13:06.180
> 
> 标签：python, python-module

我对 python 很陌生，正在尝试将“googlesafebrowsing”模块（[在此处](http://code.google.com/p/google-safe-browsing/downloads/list)可用）导入 python。查看python文档，[here](http://docs.python.org/install/index.html)，它提到解压缩/tar文件（完成），cd进入目录（完成），然后双关类似这样的命令：

```
python setup.py install 
```

但是，此目录中没有可用的 setup.py，或者更重要的是……没有 README 文件（否则我不会在这里）。以下是此目录中的文件列表：

```
[root@matt-dev googlesafebrowsing]# ls -lrt
total 196
-rwxr-xr-x. 1 root root   922 May 10  2011 util.py
-rwxr-xr-x. 1 root root 10919 May 10  2011 server_test.py
-rwxr-xr-x. 1 root root 24479 May 10  2011 server.py
-rwxr-xr-x. 1 root root  9999 May 10  2011 sblist_test.py
-rwxr-xr-x. 1 root root 12047 May 10  2011 sblist.py
-rwxr-xr-x. 1 root root     0 May 10  2011 __init__.py
-rwxr-xr-x. 1 root root  1865 May 10  2011 hashprefix_trie_test.py
-rwxr-xr-x. 1 root root  4095 May 10  2011 hashprefix_trie.py
-rwxr-xr-x. 1 root root 10327 May 10  2011 expression_test.py
-rwxr-xr-x. 1 root root 11623 May 10  2011 expression.py
-rwxr-xr-x. 1 root root  3043 May 10  2011 datastore.py
-rw-r--r--. 1 root root 11358 May 10  2011 COPYING
-rwxr-xr-x. 1 root root   965 May 10  2011 client_test.py
-rwxr-xr-x. 1 root root 14701 May 10  2011 client.py
-rw-r--r--. 1 root root  3507 Apr 21 15:00 datastore.pyc
-rw-r--r--. 1 root root  8947 Apr 21 15:00 expression.pyc
-rw-r--r--. 1 root root   873 Apr 21 15:00 util.pyc
-rw-r--r--. 1 root root  4072 Apr 21 15:00 hashprefix_trie.pyc
-rw-r--r--. 1 root root 27861 Apr 21 15:00 server.pyc
-rw-r--r--. 1 root root 11886 Apr 21 15:00 sblist.pyc 
```

有人在他们的 python 实例中使用过这个模块吗？- 关于我应该做什么的任何建议。

提前致谢，

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T03:48:50.247

为了让 Python 成功导入 googlesafebrowsing 模块，goglesafebrowsing 目录需要位于 sys.path 中包含的目录中。为此，您可以将目录移动到例如 ~/.local/lib/python2.7/site-packages，或设置 PYTHONSTARTUP 环境变量以使 Python 查找额外目录以查找模块。您应该在官方文档中找到更多信息，确切地说是 distutils 文档、库参考中站点模块的文档，以及“Python 设置和使用”中关于 Python 环境变量的文档（所有这些都在 docs.python .org）。本教程也可能有所帮助。您还可以自己编写一个简单的安装脚本并运行 setup.py install 让 Python 将文件移动到适当的位置：

```
from distutils.core import setup
setup(name='googlesafebrowsing',
      version='0.3',
      packages=['googlesafebrowsing']) 
```

（Python 中的包只是一种特殊的模块，它实际上是一个包含子模块的目录，其中包括一个名为`__init__`. 的特殊模块。模块是可以导入的东西，通常是带有 .py 扩展名的文件。）然后：

```
python setup.py install --user 
```

（ --user 选项在 distutils 安装文档中进行了解释。）

最后，我认为您应该要求该模块的开发人员提供设置脚本。

# ios - VoiceOver 和屏幕键盘使用的可能 iOS 错误

> ID：10260735
> 
> 赞同：1
> 
> 时间：2012-04-21T16:13:12.663
> 
> 标签：ios, ios5, bug-reporting

我发现我认为是 iOS 5.1 中的一个错误。它似乎专门用于 4S 设备。我真的希望其他一些使用无线键盘的 iOS 开发人员能够对此进行测试。如果您发现这是一个问题，请将其作为错误报告提交。这个特定问题对于我正在从事的项目非常重要，我将感谢社区对此问题的任何支持。

**错误报告：**

即使连接了 Apple 无线键盘（没有键盘弹出键的任何提示），此错误也允许屏幕键盘出现。键盘配对并激活 VoiceOver 后会出现此问题。

重现步骤：

确保可以通过三次按 home 键来打开 VoiceOver。VoiceOver 最初应关闭。将键盘与运行 iOS 5.1 的 iPhone 4s 配对。关闭键盘，使屏幕键盘成为文本输入的唯一形式。请执行下列操作：

1.  输入任何应用程序的文本字段（我能够在主屏幕的“搜索 iPhone”搜索栏上重现该错误）。
2.  打开无线键盘。屏幕键盘应该会消失。
3.  三下按主页按钮以激活画外音。屏幕键盘回来了。

预期成绩：

不应出现屏幕键盘。

实际结果：

每次访问另一个文本字段时，屏幕键盘都会出现并持续出现（无论是否连接到无线键盘）。

回归：

iPhone 4s 上的 iOS 5.1

笔记：

如果在 VoiceOver 最初打开的情况下执行步骤 1，则步骤 2 仍将按照说明进行。从那时起，如果 VoiceOver 已关闭，只要连接了无线键盘，屏幕键盘就不会返回。

这个错误使得设计应用程序专门用于无线键盘和 VoiceOver 变得非常困难。屏幕键盘在不适当的时间出现，因此妨碍了 VoiceOver 的顺序屏幕导航以及手势识别。

# nlp - 如何检测文本中是否发生了事件/动作？

> ID：10260736
> 
> 赞同：6
> 
> 时间：2012-04-21T16:13:16.883
> 
> 标签：nlp, machine-learning, data-mining, information-retrieval

我想知道是否有针对此的 NLP/ML 技术。

假设给定一组句子，

1.  我看了电影。
2.  听说电影不错，一定要看。
3.  拿到了电影票。
4.  我在看电影。

如果我必须为这些句子中的每一个分配一个概率，即他们“实际上”看过这部电影，我会按 1、4、3、2 的递减顺序分配它。

有没有办法使用一些分类器或规则自动执行此操作？任何文件/链接都会有所帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T03:53:18.547

这些是文本蕴涵中的常见问题。我会推荐你​​看一些论文。虽然他们的动机是文本蕴涵，但我相信你的问题应该比这更容易。

[确定文本蕴涵的模态和真实性](http://pages.cs.brandeis.edu/~roser/pubs/sauri_icsc07.pdf)

[学习识别有效文本蕴涵的特征](http://nlp.stanford.edu/pubs/rte-naacl06.pdf)

其中一些建议应该可以帮助您决定排名时要考虑的一些功能/关键字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T01:13:26.727

除 1 外，其他陈述均未必然暗示此人已观看电影。他们本可以为其他人买票（3），也可能是在大厅外卖爆米花的人（4）。我认为没有任何聪明的系统可以在每个句子的行之间阅读并返回与您的直觉完全一致的答案（顺便说一句，这可能与其他人的同一句话不同）。

如果这奇怪的是您关心的唯一情况（如果您明确处理电影评论，这可能），那么可能值得您花时间将大量启发式拼凑在一起，从而产生一个几乎完全一致的函数凭你的直觉。

否则，在这些句子起源的所有其他句子中寻找可用的上下文以找到相关线索。真正看过这部电影的人可能会评论他们喜欢它，对电影中的特定场景、角色和演员等发表意见。所以如果文本中包含很多情绪高昂的句子，并且指的是电影中的单词和短语，那么这个人可能已经看过这部电影。如果很多都是将来时，那么也许不是。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T23:50:16.383

如果您正在使用特定域，例如“*是否看过电影*”，或者更一般地说“*是否参加过活动*”，这基本上是文本分类任务的一个案例。

NLP 中的常用方法是使用大量标记为已*观看*或未*观看*的句子来训练基于机器学习的分类器。最常用的特征是关键字、bigrams（2 个单词的序列）和 trigrams（3 个单词的序列）的存在/不存在。

既然你谈到了概率，事情可能会变得更复杂一些。正如 adi92 所指出的，在您的 3 句话中，答案并不清楚。在训练数据中表示这一点的一种方法可能是，一个有 0.3 概率的句子出现 3 次被标记为已*观看*，7次被标记为*未**观看*。大多数分类器可以轻松地将其输出转换为概率。

 *无论如何，我认为主要的困难是为该任务创建一个训练数据集。*

# android - 致命错误：主要。申请强制关闭

> ID：10260737
> 
> 赞同：0
> 
> 时间：2012-04-21T16:13:28.447
> 
> 标签：android, eclipse, sdk, adb, fatal-error

我正在设计我的第一个 android 应用程序并不断出现以下错误，这正在耗尽我的生命，我不太了解它（请找到我的 Logcat（详细），Java 代码（我玩过这个，这开始了一旦开始在我的editButton和buttonUpdate位上工作就会发生。它与editStatus有什么关系吗？我真的认为它可能）并且我还放入了我的清单文件：

**LOGCAT 详细**

```
04-21 15:30:23.388: D/AndroidRuntime(276): Shutting down VM
04-21 15:30:23.388: W/dalvikvm(276): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
04-21 15:30:23.427: E/AndroidRuntime(276): FATAL EXCEPTION: main
04-21 15:30:23.427: E/AndroidRuntime(276): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.locator.demo/com.locator.demo.LocatorDemoActivity}: java.lang.ClassCastException: android.widget.TextView
04-21 15:30:23.427: E/AndroidRuntime(276):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
04-21 15:30:23.427: E/AndroidRuntime(276):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
04-21 15:30:23.427: E/AndroidRuntime(276):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
04-21 15:30:23.427: E/AndroidRuntime(276):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
04-21 15:30:23.427: E/AndroidRuntime(276):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-21 15:30:23.427: E/AndroidRuntime(276):  at android.os.Looper.loop(Looper.java:123)
04-21 15:30:23.427: E/AndroidRuntime(276):  at android.app.ActivityThread.main(ActivityThread.java:4627)
04-21 15:30:23.427: E/AndroidRuntime(276):  at java.lang.reflect.Method.invokeNative(Native Method)
04-21 15:30:23.427: E/AndroidRuntime(276):  at java.lang.reflect.Method.invoke(Method.java:521)
04-21 15:30:23.427: E/AndroidRuntime(276):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-21 15:30:23.427: E/AndroidRuntime(276):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-21 15:30:23.427: E/AndroidRuntime(276):  at dalvik.system.NativeStart.main(Native Method)
04-21 15:30:23.427: E/AndroidRuntime(276): Caused by: java.lang.ClassCastException: android.widget.TextView
04-21 15:30:23.427: E/AndroidRuntime(276):  at com.locator.demo.LocatorDemoActivity.onCreate(LocatorDemoActivity.java:21)
04-21 15:30:23.427: E/AndroidRuntime(276):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-21 15:30:23.427: E/AndroidRuntime(276):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
04-21 15:30:23.427: E/AndroidRuntime(276):  ... 11 more
04-21 15:35:23.607: I/Process(276): Sending signal. PID: 276 SIG: 9
04-21 15:50:32.127: D/AndroidRuntime(301): Shutting down VM
04-21 15:50:32.127: W/dalvikvm(301): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
04-21 15:50:32.147: E/AndroidRuntime(301): FATAL EXCEPTION: main
04-21 15:50:32.147: E/AndroidRuntime(301): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.locator.demo/com.locator.demo.LocatorDemoActivity}: java.lang.ClassCastException: android.widget.TextView
04-21 15:50:32.147: E/AndroidRuntime(301):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
04-21 15:50:32.147: E/AndroidRuntime(301):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
04-21 15:50:32.147: E/AndroidRuntime(301):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
04-21 15:50:32.147: E/AndroidRuntime(301):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
04-21 15:50:32.147: E/AndroidRuntime(301):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-21 15:50:32.147: E/AndroidRuntime(301):  at android.os.Looper.loop(Looper.java:123)
04-21 15:50:32.147: E/AndroidRuntime(301):  at android.app.ActivityThread.main(ActivityThread.java:4627)
04-21 15:50:32.147: E/AndroidRuntime(301):  at java.lang.reflect.Method.invokeNative(Native Method)
04-21 15:50:32.147: E/AndroidRuntime(301):  at java.lang.reflect.Method.invoke(Method.java:521)
04-21 15:50:32.147: E/AndroidRuntime(301):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-21 15:50:32.147: E/AndroidRuntime(301):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-21 15:50:32.147: E/AndroidRuntime(301):  at dalvik.system.NativeStart.main(Native Method)
04-21 15:50:32.147: E/AndroidRuntime(301): Caused by: java.lang.ClassCastException: android.widget.TextView
04-21 15:50:32.147: E/AndroidRuntime(301):  at com.locator.demo.LocatorDemoActivity.onCreate(LocatorDemoActivity.java:21)
04-21 15:50:32.147: E/AndroidRuntime(301):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-21 15:50:32.147: E/AndroidRuntime(301):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
04-21 15:50:32.147: E/AndroidRuntime(301):  ... 11 more 
```

**代码：**

```
package com.locator.demo;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;

public class LocatorDemoActivity extends Activity implements OnClickListener {
    EditText editStatus;
    Button buttonUpdate;

     /** Called when the activity is first created. */
     @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.locationstatus); 

        editStatus = (EditText)findViewById(R.id.edit_status);
        buttonUpdate = (Button)findViewById(R.id.button_update);
        buttonUpdate.setOnClickListener(this);

                //have button 'listen' for click

    }

    public void onClick(View arg0) {
        // TODO Auto-generated method stub

    }

} 
```

**安卓清单：**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.locator.demo"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_main" >
        <activity
            android:name=".LocatorDemoActivity"
            android:label="@string/app_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

**我有;**

尝试执行 adb kill-server 和 adb start-server 并按照另一篇文章中的建议在没有模拟器的情况下运行它。请稍微理解一下，因为我对 eclipse 和 Java 的了解非常低，而且我正在学习。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T16:16:15.663

从这个错误中可以看出：

> java.lang.RuntimeException：无法启动活动 ComponentInfo{com.locator.demo/com.locator.demo.LocatorDemoActivity}：java.lang.ClassCastException：android.widget.TextView

和这个：

> 引起：java.lang.ClassCastException：android.widget.TextView

您正在尝试将 a`TextView`转换为`EditText`（在此行中：）`editStatus = (EditText)findViewById(R.id.edit_status);`。

转到**locationstatus.xml**，然后`TextView`将 id更改`edit_status`为`EditText`.

# jquery - 我可以告诉 jQuery 不要等待外部脚本和图像来触发所有加载的功能吗？

> ID：10260743
> 
> 赞同：3
> 
> 时间：2012-04-21T16:14:43.187
> 
> 标签：jquery

我有一个问题，我不想在触发我的 jquery 加载功能之前等待外部脚本。

我可以对它做点什么吗？

加载函数代码：

```
$(function(){ 
//    ... code here
}); 
```

**更新**

那么 defer 可以很好地确保我的脚本的功能。但是现在我对外部脚本功能有很大的问题。

即这个推特框不再加载

```
 <script type="text/javasript" charset="utf-8" src="http://widgets.twimg.com/j/2/widget.js" defer="defer"></script>
        <script type="text/javascript" defer="defer">
        new TWTR.Widget({
          version: 2,
          type: 'profile',
          rpp: 4,
          interval: 30000,
          width: 275,
          height: 247,
          theme: {
            shell: {
              background: '#8ec1da',
              color: '#ffffff'
            },
            tweets: {
              background: '#ffffff',
              color: '#444444',
              links: '#1985b5'
            }
          },
          features: {
            scrollbar: true,
            loop: false,
            live: true,
            behavior: 'all'
          }
        }).render().setUser('xxxxxxxx').start();
        </script> 
```

facebook connect也有问题，比如chrome中的按钮不再起作用，等等......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T16:19:28.977

为避免在下载外部脚本文件时阻止页面呈现，请使用`defer`属性。

Xhtml 示例：

```
<script type="text/javascript" defer="defer" src="external/dont-wait-for-me.js"></script> 
```

更多信息：[<script defer="defer"> 究竟是如何工作的？](https://stackoverflow.com/questions/5250412/how-exactly-does-script-defer-defer-work)

此外，您可以使用以下命令从 Jquery 动态加载脚本文件`getScript`：

```
$(function(){ 
    //Do stuff first
    //...
    //Then...
    $.getScript('external/load-me-after-the-dom-is-ready.js', function() {
       alert("the js is loaded");
    });
}); 
```

# php - 来自 Javascript 和 PHP 的不同哈希值

> ID：10260744
> 
> 赞同：1
> 
> 时间：2012-04-21T16:14:44.390
> 
> 标签：php, javascript, variables, hash, character-encoding

我在 javasript 和 PHP 中都使用了 HMAC，当我运行两个 porgams 并将两个函数的参数作为变量时，我得到了两个不同的 HMAC 值。但是，如果我将它们作为字符串文字运行，那么一切正常。我认为这与字符串变量在每种语言中的编码方式有关，但我不知道如何修复它。我正在使用的代码如下。

在下面的 php 函数中，`$pwd1`从命令行检索。

`$k = hash_hmac('sha1', $pwd1, $salt);`

在下面的 javascript 函数中，`password`是从`json.parse(msg)`语句中获取的。然后我使用以下 HMAC 方法

```
<script type="text/javascript" src="http://crypto-js.googlecode.com/files/2.5.3-crypto-sha1-hmac.js"></script> 
```

看起来像`Crypto.HMAC(Crypto.SHA1,password,salt);`。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T17:44:09.963

我找到了答案。PHP 和 Javascript 存储字符串的方式有所不同。当 PHP 从命令行运行时，就像我在做的那样，它存储字符串和回车（用于输入变量），使字符串比不存储回车的 Javascript 长一个字符。因此，如果您想以任何方式比较 Javascript 字符串和 PHP 字符串或对它们进行哈希处理，您必须从 PHP 变量中获取一个从 0 到 -1（-1 为长度为 1）的子字符串，以说明 PHP 回车。

# macos - 永远不会收到 iCloud 更改通知

> ID：10260753
> 
> 赞同：1
> 
> 时间：2012-04-21T16:16:02.567
> 
> 标签：macos, cocoa, core-data, icloud

我正在研究两个 Mac 应用程序之间通过 iCloud 同步的核心数据。我大部分时间都在工作（基于[http://timroadley.com/2012/04/03/core-data-in-icloud/](http://timroadley.com/2012/04/03/core-data-in-icloud/)） - 数据正在同步，但我从来没有收到我需要的内容更改通知将更改合并到我的本地上下文中。

在我的 AppDelegate 的 managedObjectContext 方法中：

```
NSManagedObjectContext * moc = [[NSManagedObjectContext alloc] 
  initWithConcurrencyType:NSMainQueueConcurrencyType];

[moc performBlockAndWait:
^{

  [moc setPersistentStoreCoordinator:coordinator];
  [[NSNotificationCenter defaultCenter] addObserver:self 
    selector:@selector(mergeChangesFrom_iCloud:) 
    name:NSPersistentStoreDidImportUbiquitousContentChangesNotification 
    object:coordinator];

}]; 
```

我的观察者函数永远不会被调用：

```
- (void) mergeChangesFrom_iCloud:(NSNotification*) notification
{
  NSLog(@"Merging changes from iCloud");
  // everything past here is irrelevent - this log message never appears 
```

数据存储肯定是同步的——删除应用程序 A 中的记录并强制应用程序 B 中重新加载表会导致核心数据故障失败，正如未合并更改所预期的那样。退出并重新启动应用程序 B 显示正确更新的数据。

addObserver 调用上的断点显示它正在被调用。中的断点`mergeChangesFrom_iCloud`表明它不是。

为什么协调员显然从未`NSPersistentStoreDidImportUbiquitousContentChangesNotification`像文档（和教程）声称的那样发送？我可以从哪里开始调试呢？

**更新**

谜团加深。使用此处显示的核心基础功能 - [NSNotificationCenter 捕获和跟踪所有 NSNotifications](https://stackoverflow.com/questions/3725234/nsnotificationcenter-trapping-and-tracing-all-nsnotifications) - 我根本看不到`NSPersistentStoreDidImportUbiquitousContentChangesNotification`出现在飞过的大量通知中。

看起来它根本没有发布——在启动时发生初始加载后，我也没有看到任何其他与 Core Data 相关的通知。

# .net - .NET 应用程序的机器授权

> ID：10260757
> 
> 赞同：2
> 
> 时间：2012-04-21T16:16:35.463
> 
> 标签：.net, authorization

我正在查看 .NET 应用程序的一些应用程序要求，它指定应用程序只能在授权机器和授权用户上运行。这是一个内部业务应用程序，因此它不完全是许可问题，但也许这仍然是一种有效的方法。而不是重新发明轮子，我想我会问这种事情已经有什么可用的。就授权用户而言，我认为应用程序可以在启动期间进行管理，是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T16:39:06.513

基于有限信息的建议：

*   在带有 AD-STS + WIF/Claims 的 AD 环境中使用 Kerberos 在启动时断言
*   使用没有 AD 的 STS+WIF/Claims
*   保留用户及其权限的数据库，并在启动时通过授权服务进行检查

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T19:55:33.097

将有关计算机的某些详细信息（例如 MAC 和 CPU 品牌和型号，以及主板的品牌）保存在与应用程序一起分发的文件中。您可以使用 RSA 对文件进行签名以防止其被篡改，您只需将公钥与应用程序一起分发。

假设您使用活动目录，以确保用户名是唯一的（以防止人们在其计算机上创建具有相同名称的帐户并在绕过用户检查时登录），您可以存储授权用户名列表并再次签名与 RSA。

当应用程序启动时，首先检查文件的 RSA 签名以检查它们的完整性。然后首先检查机器是否被授权。然后检查用户是否被授权。您应该独立检查代码中的 2 个或多个点，以防止在一处篡改验证。

# c# - Wp7 到 WinRT：StreamSocket 和网络适配器首选项

> ID：10260759
> 
> 赞同：0
> 
> 时间：2012-04-21T16:16:49.600
> 
> 标签：c#, windows, xaml, windows-8, windows-runtime

我正在使用 WinRT API 将 Windows Phone 应用程序移植到 Windows 8 Metro。这是一个在任意端口上使用套接字的网络应用程序（不同的服务器使用不同的端口） 在 Wp7 平台上，我可以设置打开套接字连接时使用的网络连接类型的要求和首选项。例如，默认情况下，套接字将仅连接 WiFi 而不是蜂窝数据连接，以保护用户免受意外数据使用，但用户不仅可以将其设置为使用蜂窝连接，即使已连接也可以使用它到无线网络。例如，如果用户在使用 wifi 连接的防火墙后面的公司网络上，但他们想要连接的服务器或端口被公司防火墙阻止，这很有用。在这种情况下，

到目前为止，在 WinRT 上，我只能获取有关当前活动的 Internet 连接的信息，并通过每个连接进行枚举。但是，我不知道如何告诉 StreamSocket 更喜欢通过当前活动连接的备用数据连接进行连接，或者这是否可能。如果没有此功能，上述网络防火墙方案将无法从应用程序端实现。用户必须进入系统设置并禁用 wifi 才能使用我的应用程序。这并不理想——我在 Windows Phone 上的用户喜欢在不打开或关闭 wifi 的情况下设置此首选项的能力。

有没有一种方法可以在 WinRT 中以编程方式设置网络适配器首选项，就像在 WP7 中一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T16:38:15.720

从（初步）文档来看，如果不深入研究在 WinRT 中如何实例化套接字，我认为不可能使用标准 API 来做到这一点——也就是说，不做任何会让你的应用程序从商店中被取消资格的事情.

新的和重新设计的网络 API 的全部意义在于允许用户（以及 Windows 本身）将当前连接选项设置为所需的方式，并允许您的应用程序调整其网络使用模式以适应当前的功能网络。

可以说，它*比*WP7 上可用的功能倒退了一步。但这里的论点是让系统和用户选择此时更正确的东西，并让应用程序适应这种情况，而不是让应用程序提出使用什么网络接口的逻辑。

# c++ - C++：使用计算参数调用基类构造函数

> ID：10260760
> 
> 赞同：7
> 
> 时间：2012-04-21T16:17:05.633
> 
> 标签：c++, oop, constructor

这个简单的例子演示了调用基类构造函数的 C++ 语法——据我作为 C++ 学习者的理解：

```
class BaseClass {
protected:
  int i;
public:
  BaseClass(int x) { 
     i = x; 
  }
};

class DerivedClass: public BaseClass {
  int j;
public:
  DerivedClass(int x, int y): BaseClass(y) { 
     j = x; 
  } 
```

在这里，基类构造函数可以将命名参数作为派生类构造函数的输入。

现在，如果我想`BaseClass()`用不是直接输入的输入值调用构造函数`DerivedClass()`怎么办？基本上，我想在`x`和`y`内做一些多线工作`DerivedClass()`，然后将计算值传递给`BaseClass()`。这可以用构造函数来完成吗？这应该用某种初始化方法来代替吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-21T16:19:37.620

你可以这样做，是的：

```
class BaseClass
{
  public:
    BaseClass(int x) : i(x) {}

  private:
    int i;
};

class DerivedClass: public BaseClass
{
  public:
    DerivedClass(int x, int y):
      BaseClass(compute(x, y)), // Neither i or j are initialized here yet
      j(x)
      {}

  private:
    static int compute(int a, int b) { return a + b; } // Or whatever
    int j;
}; 
```

请注意，您甚至可以创建`compute()`一个非静态方法，但要注意`DerivedClass`or`BaseClass`成员在调用时**不会被初始化。**因此，您将无法依赖他们的价值观。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T16:27:41.027

如果您使用的是 C++11 或更新版本，您还可以使用 lambda 表达式：

```
class BaseClass
{
  public:
    BaseClass(int x) : i(x) {}

  private:
    int i;
};

class DerivedClass: public BaseClass
{
  public:
      DerivedClass(int x, int y): BaseClass(
          [=]()->int
            {
                int sum = 0;
                for(int i = 0; i < x; ++i)
                {
                    sum += y + i * x;
                }
                return sum;
            }()), j(x)
      {}

  private:
    int j;
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-21T16:19:37.990

然后你可以这样做：

```
DerivedClass(int x, int y): BaseClass(compute(x,y)), j(y) { 
     //j = x;  //use member-initialization-list ---> ^^^^
  }

int compute(int x, int y) 
{
     //your code
} 
```

# joomla - Joomla 2.5 - Phocagallery 和 component.php

> ID：10260765
> 
> 赞同：0
> 
> 时间：2012-04-21T16:17:52.970
> 
> 标签：joomla

我正在建立一个网站，但遇到了一个问题：

我修改了`component.php`文件以自定义文章的打印。不幸的是，我发现 phocagallery 使用相同的文件来显示图片。

`component.php`是否可以指示与 phocallery 图像的模板视图不同的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T23:01:19.850

**该模板文件控制所有组件的外观/输出**。您最好对任何组件（如 com_content）进行[模板覆盖，或者](http://docs.joomla.org/How_to_override_the_output_froma_the_Joomla!_core)[这样做以自定义打印视图](http://docs.joomla.org/Customizing_the_print_pop-up)。

# android - Android layout_gravity

> ID：10260766
> 
> 赞同：1
> 
> 时间：2012-04-21T16:18:05.030
> 
> 标签：android

我不明白为什么下面的代码将我的 TextView 放在屏幕的左上角。根据我对 layout_gravity 的理解，它似乎应该将我的 TextView 放在我的屏幕底部。

任何人都可以为我解释一下吗？这种线性布局，尽管看起来非常简单，却让我头疼不已。看似如此简单的事情，怎么会如此难以掌握？

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical"
        android:background="#FF0000">

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/hello"
            android:layout_gravity="bottom"
            android:background="#FFF"
            />    

    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T17:06:25.533

设置为垂直方向的 LinearLayout 将忽略所有涉及垂直对齐的 layout_gravity 参数。因此，例如“底部”将不起作用，但“中心水平”将起作用。（始终进行垂直对齐，以便布局中的每个视图都放置在布局中的其他视图之下。）

相对布局可能是要走的路，或者您可以使用可能非常接近您想要的代码。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="#FF0000"
>

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/hello"
        android:gravity="bottom"
        android:layout_weight="1.0"
        android:background="#FFF" />

</LinearLayout> 
```

**编辑**这个[博客](http://sandipchitale.blogspot.se/2010/05/linearlayout-gravity-and-layoutgravity.html "博客")进一步解释了事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T16:22:10.093

```
 <?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="#FF0000">

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/hello"
            android:layout_alignParentBottom="true"
            android:background="#FFF"
            />    

    </RelativeLayout> 
```

如果您可以轻松对齐底部，则可以使用相对布局

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T16:33:44.927

我认为这段代码可以满足您的要求：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:gravity="bottom"
    android:background="#FF0000">

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/hello"
        android:background="#FFF"
        />    

</LinearLayout> 
```

如果你想在中心的文本视图，你可以使用：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:gravity="bottom"
    android:background="#FF0000">

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/hello"
        android:layout_gravity="center"
        android:background="#FFF"
        />    

</LinearLayout> 
```

希望这对您有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T16:41:02.203

如果这是您的布局的简单性，那么您根本不应该将其包装在 LinearLayout 中。

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="bottom"
    android:background="#FFF"
    android:text="HELLO HELLO" /> 
```

如果您需要包装它，请删除垂直方向：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#FF0000" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom"
        android:background="#FFF"
        android:text="HELLO HELLO" />

</LinearLayout> 
```

# django - Django admin - 允许手动编辑自动日期时间字段

> ID：10260771
> 
> 赞同：5
> 
> 时间：2012-04-21T16:18:20.360
> 
> 标签：django, django-admin

是否可以在模型的添加/更改页面上允许手动编辑自动 DateTimeField。字段定义为：

```
post_date = models.DateTimeField(auto_now_add=True)
post_updated = models.DateTimeField(auto_now=True) 
```

我不确定手动覆盖这些将如何工作，自动更新是在数据库级别还是在 django 本身处理？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T16:28:21.243

`auto_now_add=True`并`auto_now=True` [假设](https://github.com/django/django/blob/master/django/db/models/fields/__init__.py#L658) `editable=False`。因此，如果您需要更正此字段，请不要使用它们。

在 django 级别自动更新句柄。例如，如果您更新查询集，例如

```
Article.object.filter(pk=10).update(active=True) 
```

不会更新`post_updated`字段。但

```
article = Article.object.get(pk=10)
article.active = True
atricle.save() 
```

会做

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-24T21:56:50.953

`auto_now_add=True`并`auto_now=True`假设`editable=False`。因此，如果您需要在 admin 或任何其他中修改此字段`ModelForm`，请不要使用这些`auto_now_*=True`设置。

这些字段的自动更新`auto_now_*`在 Django 级别处理。

如果您使用`auto_now_*=True`字段更新模型的实例，那么 Django 将自动更新该字段，例如，

```
class Article(models.Model):
    active = models.BooleanField()
    updated = models.DateTimeField(auto_now=True)
article = Article.object.get(pk=10)
article.active = True
article.save()
# ASSERT: article.updated has been automatically updated with the current date and time 
```

如果您想在 Django 中覆盖这种自动行为，您可以通过 queryset.update() 更新实例来实现，例如，

```
Article.object.filter(pk=10).update(active=True)
# ASSERT: Article.object.get(pk=10).updated is unchanged

import datetime
Article.object.filter(pk=10).update(updated=datetime.datetime(year=2014, month=3, day=21))
# ASSERT: article.updated == March 21, 2014 
```

# java - 查找子集的逻辑错误

> ID：10260777
> 
> 赞同：1
> 
> 时间：2012-04-21T16:19:09.253
> 
> 标签：java, generics, subset

我试图概括代码以[查找给定字符串的所有子集](https://github.com/nikhilbhardwaj/Recursion-Class/blob/master/05.Subsets/Subsets.java)（重复的元素将被视为不同的元素）到一个适用于任何列表的子集中。

```
public class Subsets{
private static <T> void RecursiveSubsets(List<List<T>> list, ArrayList<T> soFar, List<T> rest)
{
if(rest.isEmpty())
{
  list.add(soFar);
}
else
{
  List<T> remaining;
  if(rest.size() == 1)
  {
    remaining = new ArrayList<T>();
  }
  else
  {
    remaining = rest.subList(1, rest.size() - 1);
  }
  //include the element
  ArrayList<T> includeFirst = new ArrayList<T>(soFar);
  includeFirst.add(rest.get(0));
  RecursiveSubsets(list, includeFirst, remaining);
  //exclude the element
  RecursiveSubsets(list, soFar, remaining);
 }
}

public static <T> List<List<T>> getAllSubsets(List<T> set)
{
List<List<T>> subsets = new ArrayList<List<T>>();
RecursiveSubsets(subsets,new ArrayList<T>(),set);
return subsets;
}

public static void main(String [] args)
{
List<Integer> ints = new ArrayList<Integer>(){
  {
    add(0);add(1);add(2);add(3);
  }
};

List<List<Integer>> allSubsets = getAllSubsets(ints);
System.out.println("Total Subsets returned : " + allSubsets.size());
for(int i=0; i<allSubsets.size(); ++i)
  {
  for(int j=0; j<allSubsets.get(i).size(); ++j)
  {
    System.out.print(allSubsets.get(i).get(j) + " ");
  }
  System.out.println();
  }
 }
} 
```

经过几次尝试后，我能够编译它，但这就是我得到的输出。即使我有更多的整数，它仍然会返回这个。我无法弄清楚我错过了什么，需要帮助才能找到它。

```
$ java Subsets
Total Subsets returned : 4
0 1
0
1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T16:53:26.083

这个（在伪代码中）的逻辑通常是：

```
List<List<T>> subsets( List<T> list ){

    if( list is empty ) return a list containing the empty list;

    // else:

    subsetsWithout = subsets( list w/o 0th element );

    result.addAll(subsetsWithout);

    for( subset in subsetsWithout )
        result.add( subset + list[0] )

    return result;
} 
```

看起来您正在做的事情有所不同，并且您尝试通过函数参数返回内容的事实使其更加混乱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T18:28:11.453

您的程序实际上几乎是正确的，只是子列表逻辑有点错误。

[List.sublist](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#subList%28int,%20int%29)的 javadoc说

> 返回此列表在指定的 fromIndex（包括）和 toIndex（不包括）之间的部分的视图。

这里的“排他性”这个词很关键。

如果你只是改变

```
remaining = rest.subList(1, rest.size() - 1); 
```

到

```
remaining = rest.subList(1, rest.size()); 
```

你的代码有效。

# iphone - 复制 Photoshop “倍增效果”

> ID：10260779
> 
> 赞同：3
> 
> 时间：2012-04-21T16:19:35.713
> 
> 标签：iphone, c++, objective-c, imagemagick, photoshop

如何使用 Image Magick 库或 iphone 的 obj-c 代码复制 Photoshop“乘法效果”？我在哪里可以找到一些示例代码？我也看到了这个[问题](https://stackoverflow.com/questions/1784020/iphone-photoshop-like-effects)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-21T21:49:52.367

如果你想要一个简单的方法来做到这一点，我的[GPUImage](https://github.com/BradLarson/GPUImage)框架有它的 GPUImageMultiplyBlendFilter，它接收两个图像并对每个像素执行一个红色、绿色、蓝色和 alpha 通道的乘法。它以 GPU 加速的方式执行此操作，因此它可以比在 CPU 上执行相同操作快 4-6 倍。

要使用它，请将您的两个图像设置为混合：

```
UIImage *inputImage1 = [UIImage imageNamed:@"image1.jpg"];    
GPUImagePicture *stillImageSource1 = [[GPUImagePicture alloc] initWithImage:inputImage1];

UIImage *inputImage2 = [UIImage imageNamed:@"image2.jpg"];    
GPUImagePicture *stillImageSource2 = [[GPUImagePicture alloc] initWithImage:inputImage2]; 
```

然后创建并配置您的混合过滤器：

```
GPUImageMultiplyBlendFilter *blendFilter = [[GPUImageMultiplyBlendFilter alloc] init];
[inputImage1 processImage];
[inputImage1 addTarget:blendFilter];
[inputImage2 addTarget:blendFilter];
[inputImage2 processImage]; 
```

最后提取混合图像结果：

```
UIImage *filteredImage = [blendFilter imageFromCurrentlyProcessedOutput]; 
```

在其当前实施中需要注意的一个问题是，比 iPad 2 更早的设备的纹理尺寸有限，因此现在无法在这些旧设备上处理大于 2048x2048 的图像。我正在努力解决这个问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-21T16:46:31.843

Multiply 是一种（Adobe 称之为）混合模式。混合模式本质上是使用一些数学公式的像素操作。您可以将两个图像混合在一起，或者您可以使用一个，从而产生“自混合”。

这可以通过逐个像素地对图像进行操作来实现，方法是获取特定像素的每个通道值并对其进行处理。

不幸的是，我不熟悉 Magick 库。然而，这里有一个公式，给定一个通道值（红色、绿色或蓝色，0 - 255）将返回乘法运算的结果值。

`unsigned char result = a * b / 255;`

请注意，a 和 b 也必须是无符号字符，否则可能会发生溢出，因为结果会大于一个字节。这是基本的乘法公式，您可以通过分配更大的变量大小并适当地修改除数来调整变量以支持每通道 16 位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-06T13:10:46.637

重用 Brad Larson 代码对我来说效果很好。

```
UIImage *inputImage1 = [UIImage imageNamed:@"image1.jpg"];
GPUImagePicture *stillImageSource1 = [[GPUImagePicture alloc] initWithImage:inputImage1];

UIImage *inputImage2 = [UIImage imageNamed:@"sample.jpg"];
GPUImagePicture *stillImageSource2 = [[GPUImagePicture alloc] initWithImage:inputImage2];

GPUImageMultiplyBlendFilter *blendFilter = [[GPUImageMultiplyBlendFilter alloc] init];
[stillImageSource1 processImage];
[stillImageSource1 addTarget:blendFilter];
[stillImageSource2 addTarget:blendFilter];
[stillImageSource2 processImage];

[blendFilter useNextFrameForImageCapture];

UIImage *filteredImage = [blendFilter imageFromCurrentFramebuffer];

[self.imageView setImage:filteredImage]; 
```

# mongoid - 索引 mongoid

> ID：10260787
> 
> 赞同：2
> 
> 时间：2012-04-21T16:20:04.797
> 
> 标签：mongoid

我已经阅读了 mongoid 文档，但对我正确理解如何正确索引嵌入文档感到不自信。请看一下这个小代码片段，如果我在正确的轨道上，请告诉我！

**标准**

```
temp = Array.new
temp.push(BSON::ObjectId("some_bson_objecId"))
temp.push(BSON::ObjectId("some_other_bson_objecId"))
Game.any_of({'players.user_id' => @user.id},{:_id => temp}) 
```

**游戏模型**

```
embeds_many :players
index(
[
  [ "players.user_id" ],
  [ "players.user_name" ]
],
unique: true
) 
```

**播放器型号**

```
embedded_in :game
field :user_id, :type => BSON::ObjectId
field :user_name, :type => String, :default => ""
index(
[
  [ :user_id ],
  [ :user_name ]
],
unique: true
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-15T18:22:49.567

来自 Mongoid 的文档 -

```
class Person
  include Mongoid::Document
  embeds_many :addresses
  index "addresses.street" => 1
end 
```

所以试试

```
class Game 
  include Mongoid::Document
  embeds_many :players 
  index "players.user_id" => 1
  index "players.user_name" => 1
end

class Player
  include Mongoid::Document
  embedded_in :game
  field :user_id
  field :user_name
  index({ user_id: 1, user_name: 1 })
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-07T21:19:56.420

您缺少几件事。

*   您需要指定索引您选择的每个字段的方向（原因解释[here](https://stackoverflow.com/a/10330373/7323076)。）

*   您没有`index`正确地将参数传递给该方法。相反，第一个参数应该是您要索引的字段的散列，第二个参数应该是选项的散列。

您的代码试图实现的正确语法是这样的：

### 游戏模型

```
embeds_many :players
index({ 
    "players.user_id" => 1,
    "players.user_name" => 1
  }, {
    unique: true
}) 
```

### 播放器型号

```
embedded_in :game
field :user_id, :type => BSON::ObjectId
field :user_name, :type => String, :default => ""
index({
    user_id: 1,
    user_name: 1
  }, {
    unique: true
}) 
```

此外，您似乎试图索引的内容超出了您的需要。如果您只是要在`games`集合中进行搜索，则无需为`Player`模型中的任何字段建立索引。

相反，您应该只对要查询的字段进行索引。为了正确索引您要查询的信息，您的代码应如下所示：

### 游戏模型

```
embeds_many :players
# The field of the 'games' collection that you will be querying for
index({ "players.user_id" => 1 }) 
```

### 播放器型号

```
embedded_in :game
field :user_id, :type => BSON::ObjectId
field :user_name, :type => String, :default => ""
# No indexing necessary for your player model. 
```

如果您正在执行其他查询，更多索引可能会有所帮助，但请记住，索引是查询时间与空间的权衡。MongoDB 的网站有一些[指导方针](https://docs.mongodb.com/manual/core/data-model-operations/#data-model-indexes)可以帮助您决定是否应该索引某些内容。另外，请记住，您始终可以在没有索引的情况下查询数据，它只会更慢;)。

# mysql - flex中数据库中的MapQuest POI

> ID：10260789
> 
> 赞同：0
> 
> 时间：2012-04-21T16:20:11.677
> 
> 标签：mysql, apache-flex, mapquest

所以我基本上试图从数据库中生成关于 mapquest 的 pois。我有我需要的一切，设置了 flex 应用程序并且数据库正在工作，但我有点在这个过程中得到了堆栈。有没有人有任何示例或知道我可以使用的任何教程？即使它是用于谷歌地图 flex api 的，它也会非常有帮助。thanx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T23:58:11.987

好的，基本上问题是所有服务都必须在创建新视图时运行，否则它们将无法在功能上正确运行。解决这个问题让我继续我的解决方案，我将为 mapquest 上的任何新开发人员提供帮助。

```
private function createPois():void
        {

            [Embed (source='views/mapicons/hotel.png')] var hotelImg:Class;

            for (var i:int = 0; i <countResult.lastresult-1 ;i++)
            {
                var latLng:LatLng;
                latLng.setLatLng(getAllMarkersResult.lastResult[i].lat,getAllMarkersResult.lastResult[i].lng);
                var myPOI:Poi = new Poi(latLng);

                var icon:MapIcon = new MapIcon();
                icon.setImage(new hotelImg(),64,64);

                myPOI.label = getAllMarkersResult.lastResult[i].name + " - Academic Building";
                myPOI.labelVisible = false;
                myPOI.icon=icon;
                myPOI.rolloverAndInfoTitleText = getAllMarkersResult.lastResult[i].name;
                myPOI.rolloverContent = getAllMarkersResult.lastResult[i].name;
                myPOI.infoContent = (getAllMarkersResult.lastResult[i].description);

                dbColl.add(myPOI);
            }
        } 
```

逻辑真的很简单。我创建了一个循环，它将针对数据库中的条目数运行，我使用 countResult php 服务来获取这个数字。从那里我唯一要做的就是遵循 mapquest 的 add poi 方法，但将数据库中的数据提供给所有变量。为了做到这一点，我使用了 getall 方法和保存所有数据的令牌 lastresult。我相信我的代码非常简单，它将帮助 Flex Mobile 和 MapQuest 的新开发人员

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T14:08:00.947

我不知道有一个[MapQuest Flash Maps API](http://developer.mapquest.com/web/products/featured/as3-flex-flash) /database 示例，但如果我找到了，我可以在这里发布。只是一个简单的问题；您是否[使用 AMFPHP 或 ColdFusion 之类的东西连接到您的数据库](http://help.adobe.com/en_US/Flex/4.0/AccessingData/WSbde04e3d3e6474c4-668f02f4120d422cf08-7ffe.html)？Flex 本身不能直接连接到数据库，所以只想提一下，以防它给你带来麻烦。除此之外，一旦您能够使用数据库，您就可以查询它，然后使用循环遍历结果并将 POI 添加到地图中。希望这可以帮助！

此外，[MapQuest 开发者网络](http://developer.mapquest.com)上的[论坛](http://developer.mapquest.com/web/products/forums/-/message_boards?_19_mbCategoryId=208306)是一个很好的资源——那里可能有一些关于这个主题的信息（但我还没有检查过）。

# c++ - C++ 浮点 van Emde Boas (vEB) 优先级队列

> ID：10260792
> 
> 赞同：2
> 
> 时间：2012-04-21T16:20:22.953
> 
> 标签：c++, templates, tree

所以[van Emde Boas 树](http://en.wikipedia.org/wiki/Van_Emde_Boas_tree)看起来有一些非常好的特性。

我想尝试使用一个作为浮点优先级队列的底层数据结构。

有谁知道是否有基于 C++ 模板的 vEB 实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T04:55:03.490

这听起来令人不快——vEB 树是从整数到值（或从整数到当前位）的映射。如果要使用浮点值对其进行索引，则必须以保留顺序的方式将其转换为整数。这是可行的，但不一定令人愉快——您必须处理非规范化和带符号的零。

你想做什么？不同的数据结构可能是一个胜利。vEB 树需要变得相当大，才能胜过像二进制堆这样的简单事物。

# php - 如何在zend框架中配置htaccess

> ID：10260795
> 
> 赞同：-2
> 
> 时间：2012-04-21T16:20:57.243
> 
> 标签：php, zend-framework

我无法访问其他模块（页面）。我只能访问公共目录[http://localhost:88/hotelrwanda/public](http://localhost:88/hotelrwanda/public)。我将项目置于开发模式并启用错误显示但没有。如果我想访问以下网址[http://localhost:88/hotelrwanda/public/users/list ，这是我收到的消息](http://localhost:88/hotelrwanda/public/users/list)

未找到

在此服务器上找不到请求的 URL /hotelrwanda/public/users/list。

这是我的 htaccess 文件；

```
SetEnv APPLICATION_ENV development
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T01:29:53.333

Zend mod重写的可能副本[不起作用](https://stackoverflow.com/questions/2054214/zend-mod-rewrite-not-working)

我相信问题在于您正在使用的 Web 目录`AllowOverride`设置为，这意味着该文件将不会被处理。您将不得不编辑和设置.`none``.htaccess``httpd.conf``AllowOverride All`

还要确保为每个模块创建一个引导文件，因为除非您有模块引导程序，否则不会为模块设置自动加载。

# ios - 从可变字典中删除对象会引发异常

> ID：10260797
> 
> 赞同：9
> 
> 时间：2012-04-21T16:20:58.960
> 
> 标签：ios, cocoa, nsdictionary

尝试从 NSMutableDictionary 中删除对象后出现异常。相关代码如下。'settings' 被传递给方法并且可以是 NSDictionary 或 NSMutableDictionary。

```
 NSMutableDictionary *mutableSettings = nil;
 if ([settings isKindOfClass:[NSMutableDictionary class]])
     mutableSettings = (NSMutableDictionary *)settings;
 else 
     mutableSettings = [[[NSMutableDictionary alloc] initWithDictionary:settings] autorelease];

 [mutableSettings removeObjectForKey:@"akey"]; 
```

这崩溃了

> > ***由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“-[__NSCFDictionary removeObjectForKey:]: mutating method sent to immutable object”

这有什么问题？谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-21T16:41:59.647

这里的问题是两者都`NSDictionary`作为它们`NSMutableDictionary`返回，因为它是一个类簇。`__NSCFDictionary``class``NSDictionary`

我认为您只需要制作`settings`字典的可变副本，无论它是否可变。

```
NSMutableDictionary *mutableSettings = [settings mutableCopy]; 
```

# .net - 我需要在我的 .NET Web 应用程序上设置哪种字符编码？

> ID：10260800
> 
> 赞同：0
> 
> 时间：2012-04-21T16:21:25.883
> 
> 标签：.net, html, encoding, meta-tags

[在W3C 验证器](http://validator.w3.org/)上检查我的网站，它只说：

> 没有在文档级别声明字符编码
> 
> 在 HTML 元元素或 XML 声明中未在文档中找到字符编码信息。通常建议在文档本身中声明字符编码，尤其是当文档有可能被读取或保存到磁盘、CD 等时。

我知道这不是那么重要，但我很好奇：我需要在我的 .NET 4.0 Web 应用程序上设置哪种元标记/编码？我如何知道哪个编码 .NET 管理我的数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T16:35:01.677

当你说“这不是那么重要”时，你完全错了。如果您不指定字符编码，Web 浏览器将不知道如何显示您的文档，所以他们会猜测。如果您曾经使用任何不是英语的字符，那您就完蛋了。实际上，即使您只使用英文字符，您也可能会被搞砸。

这是一篇关于字符集和字符编码的非常著名的博客文章：http: [//www.joelonsoftware.com/articles/Unicode.html](http://www.joelonsoftware.com/articles/Unicode.html)

要回答您的问题：首先您需要弄清楚您使用的是哪种字符编码。它可能是 ISO-8859-1 或 UTF-8。然后将其添加为 head-tag 中的第一行：

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
```

该标签可用于 XHTML 1.0 和 HTML 5，但不能用于任何更高版本的 XHTML 或 HTML 4。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T16:33:45.970

你必须添加一个标签

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

到您的页面/母版页的头部。

它与 .Net*没有*任何关系，但与您的 .aspx 页面的编码有关（如果它们是使用 Visual Studio 创建的，则默认为 UTF-8）。

# android - ActionBarSherlock 给出了大量“调用需要 API 级别 11（当前最小值为 7）”错误

> ID：10260801
> 
> 赞同：18
> 
> 时间：2012-04-21T16:21:48.630
> 
> 标签：android, actionbarsherlock

我下载了 ActionBarSherlock 4.0.3，解压缩并从`library`文件夹中创建了一个新项目。根据 Eclipse，该`src`文件夹充满了错误，所以我按照网上的各种说明进行操作，例如添加`android-support-v4.jar`、将目标 API 设置为 15 并将编译器合规级别设置为 1.6。尽管如此，该项目仍有 194 个错误，所有这些都是“调用需要 API 级别 11（当前最低为 7）”。因此，当我查看其中一个错误时，我会看到：

```
@Override
public void invalidateOptionsMenu() {
    getSherlock().dispatchInvalidateOptionsMenu();
}

public void supportInvalidateOptionsMenu() {
    invalidateOptionsMenu();
    //the previous line has this error in Eclipse:
    //Call requires API level 11 (current min is 7): android.app.Activity#invalidateOptionsMenu
} 
```

这对我来说看起来很奇怪，因为`invalidateOptionsMenu()`它被之前的函数覆盖了，但是 Eclipse 仍然抱怨该函数需要更新的 API 级别。当我查看其他错误时，我发现许多其他错误也是如此。

我在 Python 方面的经验比 Java 多得多，所以我对导致这种情况发生的原因一无所知。帮助将不胜感激，如果您提供帮助，您能否解释一下导致此问题的原因以及您为解决该问题所做的工作？我不想每次遇到问题都问别人，我也想学习。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-23T21:47:45.633

运行 Lint 检查后发生在我身上。尝试右键单击 sherlock 操作栏项目 -> Android 工具 -> 清除 Lint Markers。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-12-30T22:26:07.150

使用支持 jar 中提供的[ActivityCompat 。](http://developer.android.com/reference/android/support/v4/app/ActivityCompat.html)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-21T16:46:40.877

由于您使用的是最低 API 级别 7，并且[invalidateOptionsMenu()](https://developer.android.com/reference/android/app/Activity.html#invalidateOptionsMenu())直到 API 级别 11 才存在，因此您无法在没有错误的情况下覆盖它，因为如果设备运行 API 级别 7，则该函数甚至在基类中都不可用并且不能覆盖不存在的函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-29T10:29:54.167

所有这些答案都是错误的，除了 dbrown0708 答案，但我会更声明

您可以使用[ActivityCompat](http://developer.android.com/reference/android/support/v4/app/ActivityCompat.html)在较低的 API 中使用 invalidateOptionMenu，因为它在支持库 v4 中提供

语法是 `invalidateOptionsMenu(Activity activity);`

代码是

```
ActivityCompat.invalidateOptionsMenu(this); 
```

在 API 中 从级别 11

```
invalidateOptionsMenu(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-17T10:02:48.377

尝试使用**import android.support.v4.app.Fragment;** 作为你的图书馆

# c# - 如何将数学运算添加到 List<>？

> ID：10260803
> 
> 赞同：2
> 
> 时间：2012-04-21T16:22:09.720
> 
> 标签：c#

很抱歉，大部分节目都是西班牙语，因为那是我的主要语言，有点乱，但很短。

```
using System;
using System.Linq;
using System.Collections.Generic;

namespace Tarea_2
{
    class Demo
    {
        static void Main()
        {
            Console.Write("¿Cuántos números desea entrar? ");
              int cun = Int32.Parse(Console.ReadLine());
            Console.WriteLine();
            Console.WriteLine("Entre "+cun+" números");
            Console.WriteLine("Oprima 'Enter' después de cada uno.");
            //unaLista recoge los valores directamente del usuario
              List<int> unaLista = new List<int>();
              for (int i = 0; i < cun; i++)
                  unaLista.Add(Int32.Parse(Console.ReadLine()));
            Console.WriteLine();
            Console.Write("¿Qué cantidad desea sumar a cada número? ");
              int sum = Int32.Parse(Console.ReadLine());
            Console.WriteLine();
            //otraLista los copia de unaLista y les suma la variable "sum"
              **List<int> otraLista = new List<int>();
                          otraLista.AddRange(unaLista);**

            Mostrar(unaLista);
            Mostrar(otraLista);
        }//End of Main

        public static void Mostrar(List<int> a)
        {
            foreach (int valor in a)
                Console.WriteLine(valor);
                Console.WriteLine();
        }//End of Mostrar
    }//End of Demo
}//End of namespace 
```

无论如何，我将一个来自用户的变量保存在“sum”上，我需要对通过 AddRange 从“unaLista”复制到“otraLista”的每个数字的总和求和。这可能吗？

编辑：我总是用数组做这些事情，但这是我第一次使用列表（因为应该更好），非常感谢，这真的很好：

**列表 otraLista = unaLista.Select(i => i + sum).ToList();**

预期结果如下：

¿ Cuántos números desea entrar？**3**

Entre 3 números。Oprima 'Enter' después de cada uno。

**20**

**30**

**40**

¿ Qué cantidad desea sumar a cada número? **100**

20

30

40

120

130

140

按“Enter”完成...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T16:25:15.100

您可以使用 LINQ 执行此操作：

```
otraLista = otraLista.Select(i => i + sum).ToList(); 
```

或者，如果您想在 AddRange 之前执行此操作，您可以跳过`new List<int>`and`AddRange`并改为执行此操作：

```
List<int> otraLista = unaLista.Select(i => i + sum).ToList(); 
```

确保你是

```
using System.Linq; 
```

# android - 在 Android 上选择 YouTube 视频？

> ID：10260805
> 
> 赞同：0
> 
> 时间：2012-04-21T16:22:32.153
> 
> 标签：android, android-intent, youtube, youtube-api

我需要一种让用户选择 YouTube 视频的方法。

有没有办法让用户进入我的应用程序，在我的应用程序中按下一个按钮，让他们进入 YouTube 应用程序，让他们在 YouTube 应用程序中选择一个视频，然后让他们在没有 YouTube 视频启动的情况下返回我的应用程序，并返回他们选择的 YouTube 视频的 UID？

我找到了这个，但它只会让我进入 YouTube 应用程序，我想在视频开始之前退出 YouTube 应用程序

```
Intent intent = new Intent(Intent.ACTION_SEARCH);
intent.setPackage("com.google.android.youtube");
intent.putExtra("query", "Android");
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(intent); 
```

这方面的建议会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T16:33:40.867

我认为不可能，但您可以使用 youtube api 搜索视频。

您可以在这里查看 api 文档：

[https://developers.google.com/youtube/2.0/developers_guide_protocol_api_query_parameters](https://developers.google.com/youtube/2.0/developers_guide_protocol_api_query_parameters)

例如，对以下 URL 的请求会搜索第二组 10 个最近上传的与查询词“football”匹配但与查询词“soccer”不匹配的视频：

> [https://gdata.youtube.com/feeds/api/videos?q=football+-soccer&orderby=published&start-index=11&max-results=10&v=2](https://gdata.youtube.com/feeds/api/videos?q=football+-soccer&orderby=published&start-index=11&max-results=10&v=2)

# javascript - 您可以存储对 mongo 集合的引用吗？

> ID：10260806
> 
> 赞同：1
> 
> 时间：2012-04-21T16:22:48.153
> 
> 标签：javascript, node.js, mongodb

在文件的顶部，我可以放置类似...

`var collection = db.mongo.collection('test', function(err, collection){return collection});`

然后在任何文件功能中使用`collection.find()`等

我想我的问题是......是`collection`对集合的引用还是数据的副本？

`collection`如果集合中的数据发生变化，我仍然可以通过查询变量来获取最新数据吗？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T17:16:40.663

Collection 是集合对象的引用。在您发出 find（或 findOne）之前，您手中没有真实数据。即便如此，它也会返回一个 Cursor 对象，使集合对象始终保持不变。

存储集合或游标不会存储您的数据。请记住，您可能要处理数百万条记录。处理数据本身可能会占用服务器内存。相反，mongo 返回游标和引用供您过滤掉。在 PHP 中，您有一个名为 iterator_to_array 的函数，您可以将光标传递给它，并将其转换为数据数组。在javascript中我不知道是否有这样的功能。但我想这样的功能没有意义。过滤信息，直到您拥有可管理的数据大小，然后遍历光标并执行您的操作。如果您有类似配置数组之类的东西，而不是多个文档，请尝试将所有内容存储在一个文件中并使用 findOne() 函数获取它。

但最后我想这只是一个设计问题，您的数据是否可以过滤。

# mongodb - Spring Data Mongo Repository:: 跨所有 Repo 问题的通用共享方法

> ID：10260807
> 
> 赞同：5
> 
> 时间：2012-04-21T16:22:49.713
> 
> 标签：mongodb, spring-data

**用例**

我正在尝试使用向Spring Data MongoDB 的*所有存储库功能添加自定义行为。*

该文档毫无帮助地描述了如何使用 JPA 进行连接。无论如何，配置设置与 Mongo 等效。

我想为所有实体添加一个 findByCategoryName(String categoryName) 方法，因为我的所有实体都将有一个 Category 。Category 是一个 DBRef 对象，因此必须使用自定义查询。

以下是配置的相关部分

```
<!-- Activate Spring Data MongoDB repository support -->
<mongo:repositories base-package="com.domain.*.repo" repository-impl-postfix="CustomImpl" 
    factory-class="com.domain.commonrepo.CommonMongoRepoFactoryBean"/>

<bean id="mappingContext" class="org.springframework.data.mongodb.core.mapping.MongoMappingContext" />

<mongo:mapping-converter mapping-context-ref="mappingContext">
    <mongo:custom-converters base-package="com.domain.mongo.converter" />
</mongo:mapping-converter>

<bean id="entityInformationCreator" class="org.springframework.data.mongodb.repository.support.DefaultEntityInformationCreator">
    <constructor-arg name="mappingContext" ref="mappingContext" />
</bean> 
```

. .

**工厂豆**

```
 @NoRepositoryBean
    public class CommonMongoRepoFactoryBean<T extends MongoRepository<?,?>, ID extends        
    Serializable> extends MongoRepositoryFactoryBean{

@Autowired
private static MongoTemplate mongoTemplate;

protected MongoRepositoryFactory getRepositoryFactory(Class<T> clazz) {
    return new CommonMongoRepoFactory(clazz);
}

private static class CommonMongoRepoFactory extends MongoRepositoryFactory {
    private Class clazz;

    public CommonMongoRepoFactory(Class clazz) {
        super(mongoTemplate);
        this.clazz = clazz;
    }

    public CommonMongoRepoImpl getTargetRepository() {
        return new CommonMongoRepoImpl(clazz);
    }

    public Class<?> getRepositoryClass() {
        return CommonMongoRepoImpl.class;
    }
} 
```

我知道这有点像黑客，但没有文档，这很痛苦。如果有人知道更好，请给我一个 github 链接 :-)

**通用 Repo 接口**

```
 @NoRepositoryBean
    public interface CommonMongoRepo<T, ID extends Serializable> extends MongoRepository<T,ID> {

public List<T> findByCategoryName(String categoryName); 
```

**执行**

```
 @NoRepositoryBean
    public class CommonMongoRepoImpl<T, ID extends Serializable> extends SimpleMongoRepository<T,    
    ID> implements CommonMongoRepo<T, ID> {

private Class<T> type;

@Autowired
private static MongoTemplate mongoOperations;

@Autowired
private static EntityInformationCreator entityInformationCreator;

@Autowired
private CategoryRepo categoryRepo;

public CommonMongoRepoImpl(Class<T> type) { 
    super((MongoEntityInformation<T, ID>) entityInformationCreator.getEntityInformation(type), mongoOperations);
}

@Override
public List<T> findByCategoryName(String categoryName) {

    Category category = categoryRepo.findByName(categoryName);

    return mongoOperations.find(query(where("categories.$id").is(category.getId())), type);
} 
```

**问题**

现在，当我尝试使用常用方法时，出现异常

在“实体”中找不到属性类别。我猜想当 mongo repo 试图自动实现该方法时。尽管我将 bean 声明为 @NoRepositoryBean

请帮忙！！！不想为所有实体添加相同的自定义方法

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-04-12T08:07:34.233

这里是最好的解决方案！

第一步：
向接口添加自定义方法！
增加一个自定义的方法</p>

**#自定义界面**

```
/**
 * Basic Repository for common custom methods
 * @author liangping
 */

import java.io.Serializable;

import org.springframework.data.domain.Page;
import org.springframework.data.domain.Pageable;
import org.springframework.data.mongodb.core.query.Query;
import org.springframework.data.mongodb.repository.MongoRepository;
import org.springframework.data.repository.NoRepositoryBean;
import org.springframework.data.repository.PagingAndSortingRepository;

@NoRepositoryBean
public interface WootideRepositoryCustom <T, ID extends Serializable>
      extends PagingAndSortingRepository<T, ID>, MongoRepository<T, ID> {

      public Page<T> search(Query query, Pageable pageable);
} 
```

**执行**

第二步：
为你的自定义方法添加实现！
实现你的自定义方法</p>

```
/**
 * implement for wootide basic repository
 * @author liangping
 */

import java.io.Serializable;

import org.springframework.data.domain.Page;
import org.springframework.data.domain.PageImpl;
import org.springframework.data.domain.Pageable;
import org.springframework.data.mongodb.core.MongoOperations;
import org.springframework.data.mongodb.core.query.Query;
import org.springframework.data.mongodb.repository.query.MongoEntityInformation;
import org.springframework.data.mongodb.repository.support.SimpleMongoRepository;

public class WootideRepositoryImpl<T, ID extends Serializable> extends
        SimpleMongoRepository<T, ID> implements WootideRepositoryCustom<T, ID> {

    public WootideRepositoryImpl(MongoEntityInformation<T, ID> metadata,
            MongoOperations mongoOperations) {
        super(metadata, mongoOperations);
    }

    @Override
    public Page<T> search(Query query, Pageable pageable) {
        long total = this.getMongoOperations().count(query, this.getEntityInformation().getJavaType() );
        return new PageImpl<T>(this.getMongoOperations().find(query.with(pageable), this.getEntityInformation().getJavaType()), pageable, total);
    }

} 
```

为自定义存储库创建新工厂

```
/**
 * Repository Factory for all Subrepository
 * @author liangping
 */

import java.io.Serializable;

import org.springframework.data.mongodb.core.MongoOperations;
import org.springframework.data.mongodb.core.mapping.BasicMongoPersistentEntity;
import org.springframework.data.mongodb.core.mapping.MongoPersistentEntity;
import org.springframework.data.mongodb.repository.MongoRepository;
import org.springframework.data.mongodb.repository.query.MongoEntityInformation;
import org.springframework.data.mongodb.repository.support.MappingMongoEntityInformation;
import org.springframework.data.mongodb.repository.support.MongoRepositoryFactory;
import org.springframework.data.mongodb.repository.support.MongoRepositoryFactoryBean;
import org.springframework.data.repository.core.RepositoryMetadata;
import org.springframework.data.repository.core.support.RepositoryFactorySupport;
import org.springframework.data.util.ClassTypeInformation;
import org.springframework.data.util.TypeInformation;

public class WootideRepositoryFactoryBean<R extends MongoRepository<T, I>, T, I extends Serializable>
        extends MongoRepositoryFactoryBean<R, T, I> {

    @Override
    protected RepositoryFactorySupport getFactoryInstance(
            MongoOperations operations) {
        return new WootideMongoRepositoryFactory<T,I>( operations );
    }

    private static class WootideMongoRepositoryFactory<T, ID extends Serializable>
            extends MongoRepositoryFactory {

        private MongoOperations mongo;
        public WootideMongoRepositoryFactory(MongoOperations mongoOperations) {
            super(mongoOperations);
            this.mongo = mongoOperations;
        }

        @SuppressWarnings("unchecked")
        protected Object getTargetRepository(RepositoryMetadata metadata) {

            TypeInformation<T> information =  ClassTypeInformation.from((Class<T>)metadata.getDomainType());
            MongoPersistentEntity<T> pe = new BasicMongoPersistentEntity<T>(information);
            MongoEntityInformation<T,ID> mongometa = new MappingMongoEntityInformation<T, ID>(pe);

            return new WootideRepositoryImpl<T, ID>( mongometa,  mongo);
        }

        protected Class<?> getRepositoryBaseClass(RepositoryMetadata metadata) {
            return WootideRepositoryCustom.class;
        }
    }
} 
```

让它工作

```
<mongo:repositories base-package="com.***.mongodb" 
factory-class="com.***.mongodb.custom.WootideRepositoryFactoryBean"/> 
```

祝你好运！祝你好运！</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-27T23:32:27.543

有点延迟，但[这里](https://github.com/rameshpa/spring-mongodb)是为 Spring Web 应用程序项目执行此操作的示例代码。重点是：

1.  控制器中使用的接口
2.  在从基类继承的单独类中完成的实现
3.  基本实现提供了任何其他控制器可以通过快速继承使用的通用方法

# objective-c - xcode 4 设置了很多 UIImageView 的

> ID：10260808
> 
> 赞同：1
> 
> 时间：2012-04-21T16:23:04.680
> 
> 标签：objective-c, xcode

我的视图中有 8 个 UIImageView，全部在`.h`and中声明`.m`。

我打电话给他们`img01`，，，，... `img02`，`img03``img08`

我也有 8 张照片，名为`01.png`, `02.png`, `03.png`,..., `08.png`。

如果我想将第一张图片设置为第一`imageView`张图片，我将使用以下命令：

```
UIImage *image = [UIImage imageNamed:@"01.png"];
    [img01 setImage:image]; 
```

如果我有很多*UIImageViews*和*图片*怎么办？

我尝试使用此代码，但不知道如何执行最后一行代码。

```
int count = 1;
while (count <= 8) {

    NSString *countString = [[NSString alloc]initWithFormat:@"%i", count];

    NSString *picname = [NSString stringWithFormat:@"0%@.png", countString];

    NSString *imgName = [NSString stringWithFormat:@"img0%@", countString];

    UIImage *image = [UIImage imageNamed:picname];

    [img01 setImage:image];

    count++;

} 
```

该代码只会更改第一个 imageView。我需要它来改变所有的`imageViews`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T16:25:00.247

创建一个`NSMutableArray`，并用 UIImageViews 填充它。目前您只设置第一个：

```
[img01 setImage:image]; 
```

你可以这样做：

```
NSMutbaleArray imageViews = [[NSMutableArray alloc] initWithCapacity:8];
for (int i = 0; i < 8; ++i) {
    NSString *countString = [NSString stringWithFormat:@"%i", count];
    NSString *picname = [NSString stringWithFormat:@"0%@.png", countString];
    NSString *imgName = [NSString stringWithFormat:@"img0%@", countString];
    UIImage *image = [UIImage imageNamed:picname];
    UIImageView * view = [[[UIImageView alloc] init] autorelease];
    [view setImage:image];
    [imageViews addObject:view];
} 
```

# python - 你如何调查python对内置方法的实现？

> ID：10260814
> 
> 赞同：7
> 
> 时间：2012-04-21T16:24:06.863
> 
> 标签：python

我目前正在学习基本的compsci课程。我们经常使用 Python `in`。我很好奇它是如何实现的，powers 的代码是什么`in`样的。

我可以想到*我*如何实现这样的事情，但是我在交了几个家庭作业后学到的是，我的做事方式通常非常糟糕而且效率低下。所以我想开始调查“好” ' 代码。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-21T16:34:27.637

内置函数、类型和运算符等的问题是它们*不是*在 Python 中实现的。相反，它们是用 C 实现的，这是一种更加痛苦和冗长的编程语言，并不总是能很好地转换为 Python（通常是因为在 Python 中以其他方式更容易。）

话虽如此，您可以通过他们的[公共源代码库](http://hg.python.org/cpython/)在线调查 Python 的所有实现。

的实现`in`是分散的——每种类型都有一个实现，加上一个更通用的实现，它调用特定于类型的实现（稍后会详细介绍）。例如，对于列表，我们会寻找列表的实现。在 Python 源代码树中，所有内置对象的源代码都在 Objects 目录中。在该目录中，您会找到 listobject.c ，其中包含列表对象及其所有方法的实现。

在回答时的存储库中，如果您查看[第 393 行](http://hg.python.org/cpython/file/c310233b1d64/Objects/listobject.c#l393)，您会发现 in 运算符的实现（也称为`__contains__`方法，它解释了函数的名称）。这相当简单，只需遍历列表中的所有元素，直到找到该元素或没有更多元素，然后返回搜索结果。:)

如果它有帮助，在 Python 中写这个的惯用方式是：

```
def __contains__(self, obj):
    for item in self:
        if item == obj:
            return True

    return False 
```

* * *

我之前说过，有一个更通用的实现。这可以在 in 的实现中[`PySequence_Contains`](http://hg.python.org/cpython/file/c310233b1d64/Objects/abstract.c#l1943)看出`abstract.c`。它尝试调用特定于类型的版本，如果失败，则诉诸常规迭代。当您用 C 语言（使用 Python C-API）编写它时，该循环就是常规 Python for 循环的样子。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-21T16:36:38.650

从 Python 语言参考的[数据模型](http://docs.python.org/reference/datamodel.html#object.__contains__)部分：

> 成员资格测试运算符 (`in`和`not in`) 通常实现为通过序列的迭代。但是，容器对象可以提供以下具有更有效实现的特殊方法，这也不需要对象是序列。
> 
> `object.__contains__(self, item)`
> 
> 调用以实现成员资格测试运算符。如果项目在自身中，则应返回 true，否则返回 false。对于映射对象，这应该考虑映射的键而不是值或键项对。
> 
> 对于未定义`__contains__()`的对象，成员资格测试首先尝试迭代 via `__iter__()`，然后尝试旧的序列迭代协议 via `__getitem__()`，请参阅语言参考中的此部分。

So, by default Python iterates over a sequence to implement the `in` operator. If an object defines the `__contains__` method, Python uses it instead of iterating. So what happens in the `__contains__` method? To know exactly, you would have to browse [the source](http://hg.python.org/cpython/). But I can tell you that Python's lists implement `__contains__` using iteration. Python dictionaries and sets are implemented as [hash tables](http://en.wikipedia.org/wiki/Hash_table), and therefore support faster membership testing.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-21T16:33:00.213

Python 的内置方法是用 C 语言编写的——您可以通过自己查看 Python 的源代码来查看它们的代码。

但是，如果您想查看 Python 本身中所有方法的等效实现，您可以查看[PyPy](http://pypy.org/) - 它具有 100% 用 Python 编写的 Python 实现及其子集 (rpython)。

`in`运算符在字符串对象中调用该方法`__contains__`——因此您可以检查两个项目中字符串的实现——但实际的搜索代码将被埋得更深。

这是 CPython 中的一些代码，例如：

[http://hg.python.org/cpython/file/c310233b1d64/Objects/stringlib/fastsearch.h](http://hg.python.org/cpython/file/c310233b1d64/Objects/stringlib/fastsearch.h)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T16:28:14.237

您可以在线浏览 Python-Source：http: [//hg.python.org/](http://hg.python.org/)

一个好的开始是克隆您需要的存储库，然后使用它`grep`来查找您需要的东西。

# ios - facebook ios sdk - 上传视频返回成功但没有上传

> ID：10260815
> 
> 赞同：0
> 
> 时间：2012-04-21T16:24:33.370
> 
> 标签：ios, facebook

[我正在开发一个将生成的视频上传到 facebook 的 ios 应用程序，直到昨天，按照本示例How-To: Use the Graph API to Upload a Video](http://developers.facebook.com/blog/post/532/)中的方法一切正常：

今天重新打开xcode项目而不进行修改后，我得到的结果是这个调用：

```
- (void)request:(FBRequest *)request didLoad:(id)result {
    if ([result isKindOfClass:[NSArray class]]) {
        result = [result objectAtIndex:0];
    }
    NSLog(@"Result of API call: %@", result);
} 
```

总是得到一个空的结果，没有上传视频......知道出了什么问题吗？

# iis-7 - 使用有效的 url 访问 localhost 站点

> ID：10260816
> 
> 赞同：1
> 
> 时间：2012-04-21T16:24:35.303
> 
> 标签：iis-7, localhost, hosts

我以前做过，但我忘记了。基本上，为了在我的本地机器上模拟一个实际的网站，我做了一些事情，这样我就可以使用一个有效的 url 访问我的 localhost 网站。我现在忘记了如何做到这一点。:(

我记得它与 IIS 站点绑定和主机文件有关。谁能指导我正确的方向？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T16:29:42.023

您可以将您的`127.0.0.1`IP 地址添加到您想要模仿的主机的主机文件中。

该文件位于`%windir%/system32/drivers/etc/hosts`

格式为：

```
127.0.0.1 domain.you.want.to.mimic 
```

您必须以管理员身份编辑此文件。

# javascript - Google Analytics - 记录出站链接 - 打开新窗口

> ID：10260818
> 
> 赞同：1
> 
> 时间：2012-04-21T16:24:40.980
> 
> 标签：javascript, google-analytics

我使用以下[链接](http://support.google.com/analytics/bin/answer.py?hl=en&answer=1136920)通过谷歌分析记录出站链接。是否可以在新窗口中打开链接？

```
<script type="text/javascript">
function recordOutboundLink(link, category, action) 
{  
try {    
    var myTracker=_gat._getTrackerByName();    
    _gaq.push(['myTracker._trackEvent', category ,  action ]);    
    setTimeout('document.location = "' + link.href + '"', 100)  
 }
catch(err)
{
}
}
</script>

 <a href="http://www.example.com" onClick="recordOutboundLink(this, 'Outbound Links', 'example.com');return false;"> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T22:09:22.263

编辑，我忘了添加 target="_blank"：

我会这样做跟踪出站链接：

```
<a href="http://outgoinglink.com" target="_blank" onclick="_gaq.push(['_trackEvent','outgoing_links','outgoinglink.com'])">Link Text</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-30T04:08:12.753

杰夫的回答非常接近为我解决这个问题。Google 推荐的代码会破坏 target = _blank，并且 window.open 策略会被弹出窗口拦截器捕获。我修改了目标的测试，如下所示：

```
if (!link.target || link.target.match(/^_(self|parent|top)$/i)){
    return false;
    setTimeout(function() { document.location = link.href }, 100);
} else {
    return true;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-27T00:04:04.670

替换为`document.location = url;`,`window.open(url)`在新窗口中打开并同时跟踪。不需要修改链接，在onclick上调用JS函数即可。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T12:20:28.367

这是您提供的链接中的修改片段，它既适用于在当前窗口中打开的链接，也适用于在新窗口中打开而无需任何修改的链接：

```
<script type="text/javascript">
// Records an event for an outbound link.  Supports links even if they open in a
// different window (target="_blank").
// Don't forget to return the return value of this function from the onclick handler.
// link - A reference to the <a> anchor object to which this call is attached
// parameters - Parameters to pass to the event, in an array:
//              category/action/label/value/noninteraction or some subset; see GA docs.
//              Pass "undefined" (the value, not the string) for unspecified optional params if necessary.
// Exmaple:
// <a href="http://www.google.com"
//    onclick="return recordOutboundLink(this, ['category', 'action', 'label', 6.6, false);">link</a>
function recordOutboundLink(link, parameters) {
    try {
        _gaq.push(['_trackEvent'].concat(parameters));
        if (link.target == '_blank') {
            return true;
        } else {
            setTimeout(function() { document.location = link.href }, 100);
            return false;
        }
    } catch (err) {
        return true;
    }
}
</script> 
```

这是两种链接类型。请注意，两者的 onclick 处理程序是相同的：

```
<a href="http://www.example.com"
   onClick="return recordOutboundLink(this, ['Outbound Links', 'example.com']);">

<a href="http://www.example.com"
   target="_blank"
   onClick="return recordOutboundLink(this, ['Outbound Links', 'example.com']);"> 
```

**限制**：

*   如果浏览器忽略 'target="blank"' 而是在同一窗口中打开 URL（例如 Facebook iOS 应用程序中的 UIWebView），则链接可能不会被跟踪。ErikdR 接受的答案也是如此。您可以添加代码来检测这样的情况（例如[通过 javascript 检测 ipad/iphone webview](https://stackoverflow.com/questions/4460205/detect-ipad-iphone-webview-via-javascript)）。
*   如果用户尝试按 ctrl-/shift-/cmd-click（即在新选项卡或窗口中打开）没有“target="blank"' 的链接，则 URL 将在现有窗口中打开而不是打开在新窗口中。Roslyn 的代码片段（以及 Google 的官方代码示例）也是如此。同样，您可以添加代码来处理这些特殊情况。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-12T07:52:00.360

# 一般情况下

在更一般的情况下`target`，例如

*   空字符串 -`<a>`元素的默认值。同义`_self`。
*   `_blank`- URL 被加载到新窗口/标签中
*   `_self`- URL 替换当前页面。
*   `_parent`- URL 被加载到父框架中
*   `_top`- URL 替换任何可能加载的框架集
*   *name* - 窗口的名称

您可以修改该行

```
setTimeout('document.location = "' + link.href + '"', 100) 
```

对此：

```
setTimeout('window.open("' + link.href + '", link.target == "" ? "_self" : link.target)', 100) 
```

奇怪的是提供`""`to`window.open`与提供相同`_blank`，因此额外的`?:`运算符是必要的。

**顺便说一句：您提供的代码（以及官方 google 示例提供的代码）应稍作修改以使其正常工作**，请参阅[如何设置 Google Analytics 以跟踪出站链接？官方例子不行](https://stackoverflow.com/questions/13339736)

# php - 大型数据集：mysql_unbuffered_query 和 innodb？

> ID：10260819
> 
> 赞同：4
> 
> 时间：2012-04-21T16:24:42.993
> 
> 标签：php, mysql, innodb, myisam

基本上我需要对大数据集进行操作，所以我开始认为我可以使用 mysql_unbuffered_query 不将所有结果加载到 RAM 中。

但是我读到，当我获取行时，我无法在同一张表上运行任何其他查询。我想知道如果表是 innodb 这仍然是真的吗？

Innodb 在执行 mysql_unbuffered_query 时是否使用行级锁定？

伪代码是：

```
$q = mysql_unbuffered_query("SELECT * FROM largeTable");
while($r = fetch($q)) {
 if (some condition)
   mysql_query("UPDATE largeTable SET field = somevalue WHERE id = someid");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T18:08:07.657

您无法运行另一个查询的原因是查询的结果没有预取并且您正在处理游标。不过，您可以打开另一个连接来处理其他查询。

请记住，MySQL 中有几个设置会影响执行查询后连接保持打开的时间，如果数据集很大，服务器可以在您处理查询之前关闭连接（参见 wait_timeout 和 net_write_timeout )

好的选择是在循环中执行查询，限制行数，并使用`WHERE pk > value ORDER BY pk ASC`, where`pk`是主键，以及`value`从前一个查询中检索到的最后一个值（就像你只实现 limit,offset 一样，性能会在大偏移量）

# r - 为 R 列表中大小不等的对象重复元素

> ID：10260822
> 
> 赞同：0
> 
> 时间：2012-04-21T16:25:05.753
> 
> 标签：r, lapply

在 R 中，我有一个由元素数量不等的对象组成的列表。例如，

```
l <- list(a=c(1,2), b=3, c=4) 
```

我已经弄清楚如何找到任何对象的最大长度：

```
lmax <- max(unlist(lapply(l,length))) 
```

以及如何识别哪些对象不是最长的：

```
notlongest <- unlist(lapply(l,length)) != max(unlist(lapply(l,length))) 
```

我现在需要做的：对于列表中的那些对象`notlongest`，重复它们的元素次数`lmax`并获得一个新列表。也就是说，对于对象 b 和 c，重复它们的元素两次，这样我就得到了一个看起来像这样的新列表：

```
newl <- list(a=c(1,2), b=c(3,3), c=c(4,4)) 
```

我确信该`lapply`功能有一个简单的答案，但我无法弄清楚。抱歉，如果以前有人问过这个问题。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T17:06:29.497

```
lmax <- max(sapply(l,length))
ll <- lapply(l, function(x) c(x, rep(x, lmax-length(x)) )  )
ll
$a
[1] 1 2

$b
[1] 3 3

$c
[1] 4 4 
```

From `R 3.2.0`,`lengths(l)`可以用来代替`sapply(l,length)`

```
lmax <- max(lengths(l)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T16:37:20.257

我能想到的最简单的方法是使用 R 的回收规则并将`data.frame`列表分组为等长列表的列表：

```
dat <- do.call('data.frame', l) 
```

您现在可以直接从该结构中操作，但如果您想再次创建单独的列表，您可以使用`sapply`将其拆分为单独的列表：

```
sapply(dat, list) 
```

# java - 在 Java 的 While 循环中错误地执行“if”和“else”

> ID：10260826
> 
> 赞同：0
> 
> 时间：2012-04-21T16:25:51.980
> 
> 标签：java, if-statement, while-loop

我只是真的在学习 Java，正在阅读 Deitel 和 Deitel 的“Java 如何编程”一书中的教程，所以请原谅我犯的任何基本错误。我知道我的方法可能不是最好的，但我希望改进这一点。

我的问题是我相信我错误地构建了我的程序。执行程序时会输出 IF 和 ELSE 选项。

如果有人能告诉我为什么这两个选项都在执行，将不胜感激

困境

```
package controlStatments;
import java.util.Scanner;

public class Review_4_20 
{
    public static void main(String[] args)
    {
        Scanner input = new Scanner(System.in);

        //Declare Variables
        double employeeOneRate;
        double employeeOneHours;
        double employeeTwoRate;
        double employeeTwoHours;
        double employeeThreeRate;
        double employeeThreeHours;
        int calculator;
        double employeeOneTotalPay;
        double employeeOneNormalPay;
        double employeeOneTotalPayOverTime;
        double overTimeRate;

        //Initiate Variables
        employeeOneRate = 0;
        employeeOneHours = 0;
        employeeTwoRate = 0;
        employeeTwoHours = 0;
        employeeThreeRate = 0;
        employeeThreeHours = 0;
        calculator = 0;
        employeeOneTotalPay = 0;
        employeeOneTotalPayOverTime = 0;
        overTimeRate = 1.5; 
        employeeOneNormalPay = 0;

        //Create While Loop
        while (calculator != -1)
        {   
            //Prompt user to input details
            System.out.print("\n\nPlease input the first employees rate");
            employeeOneRate =input.nextDouble();

            System.out.print("Please input the first employees Hours");
            employeeOneHours =input.nextDouble();

            if (employeeOneHours <= 40)
            {
                employeeOneTotalPay = employeeOneHours * employeeOneRate;
                System.out.printf("\nNormal time pay is: %.2f", employeeOneTotalPay);
            }
            else 
                employeeOneNormalPay = employeeOneRate * 40;
            employeeOneTotalPayOverTime = (employeeOneHours - 40) * (employeeOneRate * overTimeRate) + employeeOneNormalPay;                            
            System.out.printf("\n\nTotal Pay including Overtime is: %.2f", employeeOneTotalPayOverTime);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-21T16:29:27.923

您忘记了 else 语句中的括号。

我想应该是这样的：

```
 if (employeeOneHours <= 40)
    {
        employeeOneTotalPay = employeeOneHours * employeeOneRate;
        System.out.printf("\nNormal time pay is: %.2f", employeeOneTotalPay);
    }
    else {
        employeeOneNormalPay = employeeOneRate * 40;
        employeeOneTotalPayOverTime = (employeeOneHours - 40) * 
                (employeeOneRate * overTimeRate) + employeeOneNormalPay;                                
        System.out.printf("\n\nTotal Pay including Overtime is: %.2f", employeeOneTotalPayOverTime);
    } 
```

如果您不设置括号，则只有第一行包含在 IF/ELSE 语句中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T16:31:08.170

括号中的语句，例如`if`, `else if`,和循环仅在后面没有括号`else`时才执行*紧随其后的行。*

所以，你的声明：

```
if (employeeOneHours <= 40)
{
    employeeOneTotalPay = employeeOneHours * employeeOneRate;
    System.out.printf("\nNormal time pay is: %.2f", employeeOneTotalPay);
}
else 
    employeeOneNormalPay = employeeOneRate * 40;
    employeeOneTotalPayOverTime = (employeeOneHours - 40) * (employeeOneRate * overTimeRate) + employeeOneNormalPay;                            
    System.out.printf("\n\nTotal Pay including Overtime is: %.2f", employeeOneTotalPayOverTime); 
```

*总是*成倍增加`employeeOneNormalPay`。

将其更改为：

```
if (employeeOneHours <= 40) {
    employeeOneTotalPay = employeeOneHours * employeeOneRate;
    System.out.printf("\nNormal time pay is: %.2f", employeeOneTotalPay);
} else {
    employeeOneNormalPay = employeeOneRate * 40;
    employeeOneTotalPayOverTime = (employeeOneHours - 40) * (employeeOneRate * overTimeRate) + employeeOneNormalPay;                            
    System.out.printf("\n\nTotal Pay including Overtime is: %.2f", employeeOneTotalPayOverTime);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T16:34:22.727

改变

```
if (employeeOneHours <= 40)
        {
            employeeOneTotalPay = employeeOneHours * employeeOneRate;
            System.out.printf("\nNormal time pay is: %.2f", employeeOneTotalPay);
        }
        else 
            employeeOneNormalPay = employeeOneRate * 40;
        employeeOneTotalPayOverTime = (employeeOneHours - 40) * (employeeOneRate * overTimeRate) + employeeOneNormalPay;                            
        System.out.printf("\n\nTotal Pay including Overtime is: %.2f", employeeOneTotalPayOverTime); 
```

和：

```
if (employeeOneHours <= 40)
        {
            employeeOneTotalPay = employeeOneHours * employeeOneRate;
            System.out.printf("\nNormal time pay is: %.2f", employeeOneTotalPay);
        }
        else 
       {
            employeeOneNormalPay = employeeOneRate * 40;
        employeeOneTotalPayOverTime = (employeeOneHours - 40) * (employeeOneRate * overTimeRate) + employeeOneNormalPay;                            
        System.out.printf("\n\nTotal Pay including Overtime is: %.2f", employeeOneTotalPayOverTime);
} 
```

# java - Jboss Eclipse 调试

> ID：10260827
> 
> 赞同：0
> 
> 时间：2012-04-21T16:25:54.597
> 
> 标签：java, jboss5.x

我在里面部署了一场战争`jboss5.1.0-GA`。如果我用 eclipse 启动 jboss，我将无法调试 eclipse 中的 java 文件。

能够调试jsp scriptlet。
事件尝试远程调试。
正确设置java opt。( `set JAVA_OPTS=-Xdebug-Xrunjdwp:transport=dt_socket,address=4142,server=y,suspend=n %JAVA_OPTS%`)

Jboss 5.1.0 有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T17:20:04.887

1) 添加

```
set JAVA_OPTS= -Xdebug -Xrunjdwp:transport=dt_socket,address=8787,server=y,suspend=n %JAVA_OPTS% 
```

瓯

```
JAVA_OPTS= "-Xdebug -Xrunjdwp:transport=dt_socket,address=8787,server=y,suspend=n $JAVA_OPTS" 
```

到启动 JBoss 的脚本（run.sh 或 run.bat）

2) 启动 JBoss。等待

3) 将调试器连接到端口 4142。

# python - 运行 django 时，Twisted 服务器意外崩溃

> ID：10260828
> 
> 赞同：38
> 
> 时间：2012-04-21T16:25:55.987
> 
> 标签：python, django, nginx, twisted

我正在使用来自[该站点](http://code.google.com/p/django-on-twisted/)的 django-on-twisted 脚本在 twisted 上运行 django 应用程序。

所有请求都由 nginx 服务器提供服务，该服务器将相关请求反向代理到twisted。我有一个 API 的 url 设置，它基本上只接收 get 请求并在发送响应之前对 get 参数进行一些处理。但是，当特定客户端访问 api 时，扭曲的服务器就会关闭。下面粘贴的是 Nginx 日志：

```
the.ip.of.client - - [21/Apr/2012:11:30:36 -0400] "GET /api/url/?get=params&more=params HTTP/1.1" 499 0 "-" "Java/1.6.0_24" 
```

扭曲的原木此时只显示扭曲停止工作。通过错误代码 499，我假设客户端意外关闭了连接，我对此没有任何问题。客户是否收到响应对我来说并不重要。这是相关的django视图：

```
def api_url(request):
    if request.GET:
        get_param = request.GET.get('get', [''])[0]
        more_param = request.GET.get('more', [''])[0]
        #some processing here based on the get params
        return HttpResponse('OK')
    else:
        raise Http404 
```

来自客户端的请求是有效请求，不会对处理产生不利影响。我已经从外壳测试了它。当我在 django 开发服务器上尝试它时，它也以同样的方式崩溃，没有留下任何接收请求的痕迹。从浏览器测试时，一切都运行良好。此外，twisted 服务器适用于所有常规用例。这是我第一次遇到它的问题。任何帮助或指示将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T08:53:48.533

*   您说问题出在客户点击特定网址（可重现？）
*   由于它适用于 gunicorn 但不适用于 django-on-twisted，因此脚本无法正常工作或是`twisted.web2`问题所在。

请尝试`$ sh init.sh yourdjangoproject stand`。

你也可以尝试修改`run.py`catch `SystemExit`：

```
import pdb
try:
   # __main__ stuff here.
except (KeyboardInterrupt, SystemExit):
   pdb.set_trace() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T20:21:36.620

rfc 中没有 499 http 代码。Nginx 自己定义了 499 代码。

当客户端发送请求并关闭连接而不等待响应时，会出现 499 代码。如果您的 access_log 中有很多 499，这主要是由于后端速度较慢（用户等待太慢）。您可能需要优化您的网站性能。

[http://forum.nginx.org/read.php?2,213789,213794#msg-213794](http://forum.nginx.org/read.php?2,213789,213794#msg-213794)

# objective-c - 移位后的 UITextField 工件

> ID：10260829
> 
> 赞同：1
> 
> 时间：2012-04-21T16:25:56.897
> 
> 标签：objective-c, ios, xcode, uitextfield

`UITextField`我对在动画块中移动时出现的伪影有疑问...

在我移动之前`UITextField`，它看起来像这样：

![移动前的 UITextField](../Images/5e18afd0e3cc6aa297be29bda5543a18.png)

像这样移动之后：

![移位后的 UITextField](../Images/c4b062fc89be10f7fae4a07bcad74bcd.png)

我的猜测是它与`UITextField`移位后的字体有关。

* * *

这是我用于移动的代码`UITextField`：

```
if (answerText.editing)
{
    [UIView beginAnimations:@"Moving UITextField" context:nil];
    [UIView setAnimationDelegate:self];
    [UIView setAnimationDuration:1.0];
    movingAnswer = CGPointMake(160,75);
    answerText.center = movingAnswer;
    [UIView commitAnimations];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T21:02:59.730

可能是结果帧未在偶数整数上对齐。即移动该数量会导致框架类似于（100.5、50.0、50.0、50.0）。当您在半像素边界上绘图时，一些绘图例程会使事物看起来模糊，以尝试使其出现在正确的位置。我会在动画后打印出帧并检查：

```
NSLog(@"%@", NSStringFromCGRect(movingAnswer.frame)); 
```

如果您看到任何非整数值，请使用其中一个 floor() 函数来修改结果帧，以便将其捕捉到边界。

# javascript - jQuery 代码在 jsFiddle 中有效，但在我的网站上无效

> ID：10260830
> 
> 赞同：0
> 
> 时间：2012-04-21T16:25:57.453
> 
> 标签：javascript, jquery, jsfiddle

我知道这通常是编码错误，实际上[Google Chrome](http://en.wikipedia.org/wiki/Google_Chrome)开发人员调试器给了我错误：

> Uncaught SyntaxError: Unexpected token ILLEGAL

但我看不到这个错误发生在哪里。我在这里做错了什么？

小提琴：http: [//jsfiddle.net/6fwbS/19/](http://jsfiddle.net/6fwbS/19/)

```
//User defined variables
var adjacents = 3

//Script variables
var a = 0,
    b, c;
var imgArr = []; 
```

我的网站：[http ://digitalbrent.com/lab/](http://digitalbrent.com/lab/)

（我已经检查了其他类似标题的问题，但我似乎无法在我的代码中找到问题。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T16:30:10.353

在您的网站上，代码中的 : 之前有一些垃圾字符`</script>`：

```
 $('.right_slot').animate({
            opacity: 0,
            left: '+=50px'
        }, 300);
    }â€‹
</script> 
```

# objective-c - UITableView 部分在调用时未重新加载

> ID：10260834
> 
> 赞同：1
> 
> 时间：2012-04-21T16:26:08.890
> 
> 标签：objective-c, ios, uitableview

我希望每当调用 ViewWillAppear 方法时重新加载我的表视图的一部分，我已经实现了这样的：

```
- (void)viewWillAppear:(BOOL)animated {

    NSIndexPath* rowToReload = [NSIndexPath indexPathForRow:0 inSection:1];
    reloadRows = [NSArray arrayWithObjects:rowToReload, nil];
    [self.tableView reloadRowsAtIndexPaths:reloadRows withRowAnimation:UITableViewRowAnimationNone];
} 
```

下面是 rowforsection 方法，它指示哪些内容应该出现在每个 tableview 部分中：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    NSLog(@"fadk");
    UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:@"PINGAS"];
    [self.tableView setAlwaysBounceVertical:YES];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1
                                       reuseIdentifier:@"PINGAS"] autorelease];
        cell.accessoryType = UITableViewCellAccessoryNone;

       // if ([indexPath section] == 0) {
            UITextField *textField = [[UITextField alloc] initWithFrame:CGRectMake(10, 3, 300, 41)];
            UITextView *textView = [[UITextView alloc] initWithFrame:CGRectMake(10, 0, 300, 120)];
            UIView *paddingView = [[[UIView alloc] initWithFrame:CGRectMake(0, 0, 5, 0)] autorelease];
            paddingView.backgroundColor = [UIColor cyanColor];

          //  if ([indexPath row] == 0) {
        if ([indexPath section] == 0) {
            NSLog(@"0");
            [cell addSubview:textField];
            if ([indexPath row] == 0) {
                textField.placeholder = @"Title";
            }
            else{
                textField.placeholder = @"Location";
            }
        }
        else if ([indexPath section] == 1) {
            NSLog(@"1");
            NSDateFormatter *formatter;
            NSString *eSString1;
            NSString *eEString2;
            formatter = [[NSDateFormatter alloc] init];
            [formatter setDateFormat:@"h:mm a"];

            cell.textLabel.text = @"Starts\nEnds";
            cell.textLabel.numberOfLines = 2;
            eSString1 = [formatter stringFromDate:eSTime];
            eEString2 = [formatter stringFromDate:eEtime];
            cell.detailTextLabel.text = [NSString stringWithFormat:@"%@\n%@", eSString1, eEString2];
            cell.detailTextLabel.numberOfLines = 2;
            cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

        }
        else{

            NSLog(@"2");
            [cell addSubview:textView];

        }

            textField.delegate = self;
            textField.leftView = paddingView;
            textField.leftViewMode = UITextFieldViewModeAlways;
            textField.adjustsFontSizeToFitWidth = YES;
            textField.textColor = [UIColor blackColor];
            textField.keyboardType = UIKeyboardTypeAlphabet;
            textField.returnKeyType = UIReturnKeyDone;  
            textField.backgroundColor = [UIColor clearColor];
            textField.autocorrectionType = UITextAutocorrectionTypeNo; // no auto correction support
            textField.autocapitalizationType = UITextAutocapitalizationTypeNone; // no auto capitalization support
            textField.textAlignment = UITextAlignmentLeft;
            textField.tag = 0;
            //playerTextField.delegate = self;

            textField.clearButtonMode = UITextFieldViewModeNever; // no clear 'x' button to the right
            [textField setEnabled: YES];

            [textField release];

        textView.delegate = self;
        textView.textColor = [UIColor blackColor];
        textView.keyboardType = UIKeyboardTypeAlphabet;
        textView.returnKeyType = UIReturnKeyDone;
        textView.backgroundColor = [UIColor clearColor];
        textView.autocorrectionType = UITextAutocorrectionTypeNo; // no auto correction support
        textView.autocapitalizationType = UITextAutocapitalizationTypeNone; // no auto capitalization support
        textView.textAlignment = UITextAlignmentLeft;
        textView.tag = 0;

        [textView release];
       // }
    }
    return cell;    
} 
```

这在第一次加载时运行良好，在第一次调用 viewWillAppear 之后，但之后该部分似乎从第一次加载和第二次加载中回收数据，虽然它仍然进入 cellforrow 部分，但它不再进入我在 viewWIllAppear 部分调用的部分。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-21T16:48:23.430

重新加载应该夹在开始/结束更新之间：

```
[self.tableView beginUpdates];
[self.tableView reloadRowsAtIndexPaths:reloadRows withRowAnimation:UITableViewRowAnimationNone];
[self.tableView endUpdates]; 
```

# linux - 为什么 Firefox 在 Linux 上有一个空堆？malloc 在内存中的位置？

> ID：10260837
> 
> 赞同：1
> 
> 时间：2012-04-21T16:26:52.650
> 
> 标签：linux, firefox, heap-memory

mm_struct 的 start_brk 和 brk 字段在 Firefox 中具有相同的值，这意味着在 Firefox 中堆是空的。有谁知道：为什么 Firefox 在 Linux 上有一个空堆？malloc 在内存中的位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T16:52:40.173

Firefox 使用自定义内存分配器[jemalloc](http://www.canonware.com/jemalloc/)。除非`--enable-dss`在配置期间指定了该选项，否则此分配器仅使用`mmap()`，否则它同时使用`sbrk()`和`mmap()`。不用说，只有`brk()`系统调用会修改相关结构的`start_brk`和`brk`字段。

# java - 找出两个相似对象之间的差异

> ID：10260840
> 
> 赞同：1
> 
> 时间：2012-04-21T16:27:18.173
> 
> 标签：java, eclipse, comparison

我正在调试 Android 的 Javascript 代码。
我需要知道一个行为正常的对象和另一个对象之间的区别，同一个类，类似于第一个，但行为很差。
这些对象由许多成员组成，我想确定它们之间的哪些差异可能导致不同的行为。可以用 Eclipse 内置函数来完成吗？在运行时？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T07:50:41.067

我认为您可以遵循这种棘手的方式：

1.  需要比较两个对象时放置条件断点
2.  在条件中放置代码以序列化两个对象（例如使用`toJSON`函数）
3.  将序列化（JSON）的输出与文本比较工具进行比较

# php - 为什么这个 mysql 查询不起作用？

> ID：10260854
> 
> 赞同：-1
> 
> 时间：2012-04-21T16:29:01.247
> 
> 标签：php, mysql

请帮助我解决指定的问题：

代码部分：

```
$result = mysql_query("SELECT *, UNIX_TIMESTAMP(eventdate) AS eventdate,    
  UNIX_TIMESTAMP(throughdate) AS throughdate FROM events ORDER BY eventdate where 
  id='$_GET[id];'");

// the above query is not working   

if ( mysql_num_rows($result) == 0 ) {  
   print "<p>No events right now.</p>\n";
   }
else {

    $lasteventmonth = '';
    while ($row = mysql_fetch_array($result)) { 
        $eventmonth="";
        $eventmonth = date("F Y",$row['eventdate']);

        if ($lasteventmonth != $eventmonth) {
            print "<p style='font-size: 18px;'><b>$eventmonth</b></p>";
        }
        $lasteventmonth = $eventmonth;

        showEvent($row);    
        }
    }
   ?>
........................
........................//other codes 
```

当代码评估如下：

> 警告：mysql_num_rows()：在第 122 行的 C:\Users\Fagun\Desktop\UsbWebserver\Root\mapcal\mapcal.php 中，提供的参数不是有效的 MySQL 结果资源 目前没有事件。++++++++

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T16:31:43.147

致电后`mysql_query`，请使用以下命令：

```
if (! $result) {
    echo mysql_errno() . ": " . mysql_error(). "\n";
} 
```

这将准确地告诉您，为什么 MySQL 不会运行您的查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T16:32:33.520

ID 是字符串还是整数？不管怎样，我猜你不应该包含一个尾随分号？

尝试如下更改... $result = mysql_query("SELECT *, UNIX_TIMESTAMP(eventdate) AS eventdate, UNIX_TIMESTAMP(throughdate) AS throughdate
FROM events ORDER BY eventdate where id='$_GET[id]'");

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T16:33:48.420

我认为这是您如何使用构建查询和连接 id 的问题。试试这个（注意 ID 是如何连接的）：

```
$query = "SELECT *, UNIX_TIMESTAMP(eventdate) AS eventdate,    
    UNIX_TIMESTAMP(throughdate) AS throughdate FROM events
    ORDER BY eventdate where 
    id='".$_GET[id]."'";

$result = mysql_query($query) or die(mysql_error()); 
```

您不必将其分成两部分，但是 - 这应该更易于阅读和理解。您甚至可以在运行查询之前回显查询以查看实际创建的查询，并在您的数据库上手动尝试。

or`die(mysql_error())`部分将为您提供有关问题的详细信息（如果不是 ID 问题）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T16:33:52.707

尝试：

```
$result = mysql_query("SELECT   *,
                                UNIX_TIMESTAMP(eventdate) AS eventdate,    
                                UNIX_TIMESTAMP(throughdate) AS throughdate
                       FROM     events
                       ORDER BY eventdate
                       where    id= '" . intval($_GET['id']) . "'");

if($result)
{
    //Do code
} 
```

使用 intval() 确保`$_GET['id']`是整数。
使用 if 语句确保查询已正确执行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-21T16:35:58.777

尝试这个

```
 $result = mysql_query("SELECT *, UNIX_TIMESTAMP(eventdate) AS eventdate,    
 UNIX_TIMESTAMP(throughdate) AS throughdate FROM events where 
 id='".$_GET['id']."' ORDER BY eventdate"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-21T16:36:18.387

正确引用值：

`$_GET[id]` 应该`$_GET['id']`

试试下面：

```
$result = mysql_query("SELECT *, UNIX_TIMESTAMP(eventdate) AS eventdate,    
  UNIX_TIMESTAMP(throughdate) AS throughdate FROM events ORDER BY eventdate where 
  id='".$_GET['id']."'); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-21T16:37:23.053

尝试这个：

```
"SELECT *, UNIX_TIMESTAMP(eventdate) AS eventdate, 
    UNIX_TIMESTAMP(throughdate) AS throughdate FROM events ORDER BY eventdate where 
    id='".$_GET['id'].";'" 
```

我假设这*不是*`id`来自用户输入。如果是这样，这很容易受到 SQL 注入攻击。

# linux - 多线程、阻塞和内存映射文件

> ID：10260860
> 
> 赞同：1
> 
> 时间：2012-04-21T16:29:48.967
> 
> 标签：linux, multithreading, memory-mapped-files

在具有内存映射文件的多线程进程中，如果一个线程取消引用尚未在内存中的页面会发生什么？操作系统是阻塞整个进程还是仅仅阻塞那个线程？其他操作系统呢？（BSD、OSX、Windows）

编辑：关于 lkml 2009 的[有趣报告](http://lkml.indiana.edu/hypermail/linux/kernel/0905.0/00338.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T16:51:03.980

访问未映射到进程虚拟地址空间的地址会导致称为*页面错误*的硬件异常。这将阻塞*操作系统线程*，直到处理异常。这是所有支持虚拟内存的操作系统的标准操作模式。

# php - 使用 jquery $.ajax 和 php 上传文件

> ID：10260865
> 
> 赞同：2
> 
> 时间：2012-04-21T16:30:11.573
> 
> 标签：php, jquery, ajax, html

当用户使用 $.ajax 在输入文件中选择文件时，我希望异步上传文件。但是接收调用的php返回索引未定义。jquery代码是下一个：

```
$("#urlimatge").change(function(){
            var filename = $("#urlimatge").val();
            $.ajax({ 
                type: "POST",
                url: "utils/uploadtempimg.php",
                enctype: 'multipart/form-data',
                data: {'urlimatge' : filename },
                success: function(response){
                     alert(response);
                }
            }); 

        }); 
```

和调用调用的 php：

```
$image =  new gestorimatges();
$target_path = $image->uploadTemp($_FILES['urlimatge']['name'],$_FILES['urlimatge']['tmp_name']); 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T16:33:42.493

您不能将 $_FILE 从 AJAX 传递给 PHP。

我建议使用[插件](http://valums.com/ajax-upload/)

它会让你的生活更轻松 :)[这里还有一个视频教程可以帮助你](http://youtu.be/-PpCwkjsxF4)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T16:31:39.963

您可能想为此使用像[uploadify](http://www.uploadify.com/)这样的工具。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T16:36:13.537

您不能使用 AJAX 上传文件，但您可以使用 an，`iframe`这样您就不必刷新当前页面。

许多人对插件束手无策，但您可以很容易地自己完成，并且具有 AJAX 请求的所有功能。

不使用 AJAX 函数，而是将表单提交到附加`iframe`了`load`事件处理程序的隐藏项，因此当提交表单时，您有一个回调函数，该函数实际上包含服务器响应（`iframe`加载后的 HTML）。

例子：

HTML --

```
<form action="..." method="post" encrypt="application/x-www-form-urlencoded" target="workFrame" >
    <input type="file" name="file" />
    <input type="submit" />
</form>
<iframe id="workFrame" src="about:blank" style="display:none;"></iframe> 
```

JS——

```
$(function () {
    $('form').on('submit', function () {
        //check if the form submission is valid, if so just let it submit
        //otherwise you could call `return false;` to stop the submission
    });

    $('#workFrame').on('load', function () {

        //get the response from the server
        var response = $(this).contents().find('body').html();

        //you can now access the server response in the `response` variable
        //this is the same as the success callback for a jQuery AJAX request
    });
}); 
```

# web-services - 在 .NET 紧凑框架中以编程方式添加 Web 引用

> ID：10260875
> 
> 赞同：2
> 
> 时间：2012-04-21T16:31:36.657
> 
> 标签：web-services, compact-framework, windows-ce, web-reference

我正在使用基于 Windows CE 操作系统的 .NET 紧凑框架的开发环境。开发环境非常封闭，但脚本界面就像 Visual Studio 中 Windows 窗体应用程序的经典代码视图。我需要添加对 Web 服务的引用以使用某些方法，但没有视觉支持。如何在代码中以编程方式添加引用/创建代理对象？我应该使用哪个程序集/命名空间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-11T18:52:19.043

在 Visual Studio 2008（或更高版本）中，如果您在“解决方案资源管理器”窗格中右键单击项目的“引用”文件夹，则会出现“添加 Web 引用”选项。我会这样做，然后将生成的代码复制到您正在使用的任何 IDE（因为听起来它不是 VS）。您也可以使用[WSDL.exe](http://msdn.microsoft.com/en-us/library/7h3ystb6(v=vs.71).aspx)

# ruby - Ruby rails - 列出活动会话

> ID：10260879
> 
> 赞同：4
> 
> 时间：2012-04-21T16:31:47.343
> 
> 标签：ruby, ruby-on-rails-3

有什么方法可以获取 Rails 中所有活动会话的列表？我有内存缓存会话列表，我想查看用户 ID、源 ip、时间戳、持续时间等以用于基本管理目的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T04:29:04.490

为了扩展我的评论，我正在做与您想做的类似的事情。我正在使用 authlogic，但我想你可以用其他身份验证包做一些等效的事情。

我正在使用 authlogic 的自动注销功能，并将其设置为在 120 分钟后注销人员。知道了这一点，生成一个列表很简单。我只是执行以下操作：

```
<% User.find(:all, :conditions => ["last_request_at > ?", 120.minutes.ago]).each do |user| %>
  <li>
    <%= link_to user.name, admin_person_path(user.bio) %>
    (<%= mail_to user.email %>) <%= time_ago_in_words(user.last_request_at) %> ago
  </li>
<% end %> 
```

你可以看到我只列出了他们的姓名、电子邮件以及他们最后一次提出请求的时间。添加 last_login_ip、current_login_at 等将是微不足道的。

希望这可以帮助。

# scala - 如何告诉 SBT 解决托管工件

> ID：10260881
> 
> 赞同：5
> 
> 时间：2012-04-21T16:31:56.517
> 
> 标签：scala, sbt, playframework-2.0

SBT 控制台中是否有命令强制它解析工件（特别是重新解析 SNAPSHOT 依赖项）？我现在知道的唯一方法是运行干净然后编译（或启动），但这需要更长的时间并且并不总是必要的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T17:11:59.647

您可以标记所需的依赖项以重新检查它们`update`：

```
libraryDependencies ++= {
  "org.specs2" %% "specs2" % "1.10-SNAPSHOT" % "test" changing()
} 
```

[使用 SBT 重新下载依赖项的 SNAPSHOT 版本](https://stackoverflow.com/questions/8224907/re-download-a-snapshot-version-of-a-dependency-using-sbt)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-28T21:40:24.633

该`update`命令应该有所帮助。

从[任务的文档中](http://www.scala-sbt.org/release/sxr/sbt/Keys.scala.html#sbt.Keys.update)：

> 解决和可选地检索依赖关系，生成报告。

请参阅[依赖管理流程](http://www.scala-sbt.org/release/docs/Detailed-Topics/Dependency-Management-Flow.html)。

更重要的是，`SNAPSHOT`依赖关系本质`changing()`上是这样，所以不需要在 ModuleID 之后添加任何东西来标记它们。每个`update`人都应该针对存储库解决它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T17:07:16.870

也许`update-classifiers`是您正在寻找的东西？否则，请尝试该`tasks`命令以查看可用的内容。

# html - 最后浮动图像使

> ID：10260882
> 
> 赞同：0
> 
> 时间：2012-04-21T16:31:57.310
> 
> 标签：html, css

我在一个`<ul> <li>`. 我使图像可点击，链接到一个新的 HTML 文件。我有四个，我想把两个放在一起，所以我用了`float:left;`.

`<h2>`但是，当我在这些图像之后创建一个新图像时，它`<h2>`变得可点击并链接到最后一张图片中使用的 HTML 文件。

我已经用过`clear:both;`，但这不起作用。关于这里可能发生的事情的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T16:55:57.120

也穿上或穿上元素`float: left;`。`H2``overflow: hidden;``li`

# coldfusion - 更改 CF9 中的 OnRequestEnd 行为（是 ColdFusion 9 错误 - 无法在 OnRequestEnd 中引用请求变量）

> ID：10260883
> 
> 赞同：1
> 
> 时间：2012-04-21T16:32:31.977
> 
> 标签：coldfusion, application.cfc

这是一个奇怪的。我没有任何运气在谷歌上找到任何关于此的信息，所以我想知道你们中是否有人以前见过这个？

我在请求范围内有一个 CFC，然后在 onRequestEnd 事件中，我将该 CFC 从请求范围中取出并用它做一些请求结束的事情。问题是我无法在我的 onRequestEnd 事件中引用该变量，因为它会产生一个错误，指出它没有在范围内定义......但这就是它变得非常奇怪的地方以及为什么我知道这是一个错误（它不仅仅是一个怀疑）...如果我 DUMP 变量，cfdump 标记成功显示 CFC 及其所有内容...然后产生相同的“在范围内未定义”错误。这是一个屏幕截图。

![请求变量错误的屏幕截图](../Images/dbe4b5521fd8809101d8974190cef1c4.png)

所以……有人见过这个吗？因为我完全被难住了。我已经安装了 9.0.1 更新程序和两个累积修补程序。

ps 是的，我知道它说的是 OnRequestEnd.cfm，但这实际上是在 Application.cfc 的 onRequestEnd 方法中——它是最初可追溯到 CF5 的框架的遗留物，随它去吧。;P

* * *

编辑：好的，它变得更奇怪了......我尝试使用评估（）将其设置为一个局部变量，这显然有效，因为然后我转储了局部变量。转储仍然有效，即使它位于发生错误的行***之后的第 2 行？！！***

![在此处输入图像描述](../Images/a1314cc44bde2816f98c1ff416b0e626.png)

* * *

编辑 2： 编辑：这是 Application.cfc 中的代码，其中包括发生错误的文件：

```
<cffunction name="onRequestEnd" access="public" output="true">
    <cfinclude template="OnRequestEnd.cfm">
</cffunction> 
```

它似乎与方法和包含文件的组合有关。

如果我像这样执行 onRequestStart 中的方法，它仍然会**失败：**

```
<cffunction name="onRequestStart" access="public" output="true">
    <cfset onRequestEnd() />
</cffunction> 
```

但是如果我像这样将文件包含在 onRequestStart 中，它**工作正常。**

```
<cffunction name="onRequestStart" access="public" output="true">
    <cfinclude template="OnRequestEnd.cfm">
</cffunction> 
```

然而！显然还有更多，因为我无法创建一个简单的测试用例。如果我创建一个包含非常简单的 application.cfc 的新项目并复制所有这些细节，它就可以正常工作。因此，除了方法名和文件名之外，框架中还有其他东西对其做出了贡献。

而且文件名似乎并没有真正起作用，因为如果我像这样更改文件名，它仍然会以同样的方式**失败：**

```
<cffunction name="onRequestEnd" access="public" output="true">
    <cfinclude template="reqend.cfm">
</cffunction> 
```

* * *

编辑3：好的，它与文件无关......它确实如此，但与文件名无关......在onRequestEnd.cfm的底部是这段代码

```
<!--- this seems to help resolve a leaky-memory issue in CF/JRun --->
<cfset structClear(variables) />
<cfset structClear(request) />
<cfabort /> 
```

如果我注释掉那些 StructClear 语句，那么错误就会消失，这告诉我它正在执行 OnRequestEnd.cfm 两次......我认为这意味着 CF9 改变了 CFABORT 标记的行为，它现在执行 onRequestEnd 事件当标签被使用时......它在以前版本的cf中没有......

我没有找到这方面的文档，但我确实找到[了 Ben Nadel](http://www.bennadel.com/blog/2050-Changes-In-CFLocation-OnRequestEnd-Behavior-In-ColdFusion-9-s-Application-cfc.htm)的这篇关于 CFLOCATION 标签行为的博客，所以它似乎更普遍地是关于 onRequestEnd 事件。现在似乎在 CF9 中，无论页面如何完成执行，onRequestEnd 事件都会在最后执行......这是对所有以前版本的更改，因此它与我创建的代码混在一起，以便实际导致这种情况发生在以前的版本上。由于我导致执行 onRequestEnd 然后提前中止页面，CF 现在执行 onRequestEnd，中止，然后由于中止再次执行 onRequestEnd。

幸运的是，模板顶部的这段相当简单的代码似乎解决了这个问题：

```
<cfif structIsEmpty(request)>
    <cfexit method="exittemplate" />
</cfif> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T00:49:25.413

我决定将这个问题留在这里（而不是删除它），因为它可能会帮助其他一些人，尽管我在处理一些评论时找到了问题的根源和解决方法，但这并不是我们的想法。Ben Nadel 不久前还[发布了一篇关于 CFABORT 更改的博客](http://www.bennadel.com/blog/2221-CFAbort-And-OnRequestEnd-Behavior-In-ColdFusion-8-And-ColdFusion-9.htm)……Adam Cameron 告诉我，虽然这种更改是在 CF9 中按设计添加的（显然没有警告任何人，因为我在 LiveDocs 和添加了 2 条关于它的评论），然后在（尚未发布？）CF10 中将其删除。我认为亚当可能处于测试阶段，我不确定。

# macros - 在 Clojure 中定义缺失的符号

> ID：10260891
> 
> 赞同：1
> 
> 时间：2012-04-21T16:33:44.377
> 
> 标签：macros, clojure, symbols

我正在尝试编写一个宏，给定一个表单，将所有缺少的符号定义为它们自己。

到目前为止，我有以下内容：

```
(def ^:private missing-symbol-pattern #"Unable to resolve symbol: (.+) in this context")

(cl/defn ^:private missing-symbol [s]
  (cl/when-let [[_ sym] (cl/re-find missing-symbol-pattern s)] sym))

(cl/defmacro try-eval [expr]
               `(try (do (cl/println '~expr) (cl/eval '~expr)) 
                 (catch Exception e#
                   (cl/if-let [sym# (do (cl/println (.getMessage e#)) (missing-symbol (.getMessage e#)))]
                              (cl/eval `(do 
                                          (def ~(cl/symbol sym#) '~(cl/symbol sym#))
                                          (cl/println ~sym#)
                                          (try-eval ~'~expr)))
                              (cl/eval `(throw ~e#)))))) 
```

（`cl`这里是 的别名`clojure.core`）我知道副作用可能会出现问题，但这在这里并不重要（尽管没有副作用问题的解决方案会更好）

如果有多个丢失（无法解析）的符号，我会收到以下异常：

```
java.lang.RuntimeException: Can't embed object in code, maybe print-dup not defined: java.lang.ClassCastException: clojure.lang.Symbol cannot be cast to clojure.lang.IDeref, compiling:(shen/primitives.clj:517) 
```

有人知道要改变什么吗？有一些“现成的”解决方案吗？

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T18:02:33.877

`&env`与其使用 try/catch 来查找无法解析的符号，不如使用`defmacro`. 的键`&env`是本地定义的符号。

（[关于 &env 和 &form 的文章。](http://blog.jayfields.com/2011/02/clojure-and.html)）

使用 和 的组合可以隔离未定义的符号，`resolve`然后`(keys &env)`您可以选择定义未定义的符号`(not (or (resolve sym) (contains? &env sym))`

[我们在Midje 源代码](https://github.com/marick/Midje/blob/754d61bfb4cd89277b3f08cc926d7b311a53179c/src/midje/ideas/tabular.clj#L34)中做了类似的事情，以确定表格测试中的哪些符号已定义，哪些未定义：

[注：在下面的代码`locals`实际上是`(keys &env)`]

```
(defn- headings-rows+values [table locals]
  (letfn [(table-variable? [s]
            (and (symbol? s)
              (not (metaconstant-symbol? s))
              (not (resolve s))
              (not (contains? locals s))))]
    (split-with table-variable? (remove-pipes+where table)))) 
```

# windows-server-2008 - 在 Windows Server 2008 R2 中阻止 ping

> ID：10260897
> 
> 赞同：4
> 
> 时间：2012-04-21T16:34:00.353
> 
> 标签：windows-server-2008, icmp

我已经在**Windows Server 2008 R2 上部署了我的 Asp.Net Web 应用程序，** 并且我想**阻止**对该**服务器**的所有**ping**请求而不影响我的**应用程序**。

 ****提前致谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-22T13:04:26.733

转到**开始**→**管理工具**→**高级安全 Windows 防火墙**→**入站规则**→**文件和打印机共享**（回显请求 - ICMPv4-IN）→ 右键单击​​并选择**启用规则**。

我的应用程序现在工作正常，当我尝试 ping 我的服务器时，我没有收到任何响应。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T23:24:46.117

使用 Satinder 提供的解决方案，您应该进一步细化可以 Ping 您的服务器的计算机/服务器和/或 IP 范围的范围。

这样，公众就无法 ping 您的服务器，但如果您需要快速检查连接性，您或网络上的某些计算机可以访问它。****

# c++ - OpenGL渲染（仅实时）？

> ID：10260900
> 
> 赞同：1
> 
> 时间：2012-04-21T16:34:29.123
> 
> 标签：c++, opengl

我了解您通常在 Blender 或其他一些 3D 建模软件中创建复杂的 3D 模型，然后将其导出为 .obj。这个 .obj 文件被解析到你的程序中，openGL 会渲染它。据我了解实时渲染。

现在我想知道是否有类似预渲染对象的东西。我有点困惑，因为关于实时渲染的文章/视频太多了，但我没有找到任何关于非实时渲染的信息。这样的事情是否存在？由于没有实时渲染，我唯一想到的就是视频。

我想这几乎是一个是或否的问题:) 但如果它存在，也许有人可以将我指向一些带有解释的网站。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T16:42:01.703

“实时渲染”意味着帧的生成速度与显示速度一样快。“非实时渲染”或“离线渲染”是指一次生成一帧，花费尽可能多的时间来获得所需的图像质量，然后将它们组合成电影。可以实时渲染视频游戏质量的视频；然而，像皮克斯电影这样精致的东西必须在离线模式下完成。单个帧仍可能需要数小时的渲染时间！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T16:36:57.873

尚不完全清楚“预渲染对象”是什么意思，但是有些东西称为 VBO 和顶点数组，它们将对象的几何图形存储在 VRAM 中，以便不必使用`glVertex3f()`或类似的每一帧将其加载到渲染管道中。这称为立即模式。

使用 VBO 和顶点数组而不是立即模式，因为它们*比*调用图形驱动程序为每个顶点将数据加载到 VRAM 中要快得多，因为它们保存在 VRAM 中，这比普通 RAM 快，准备好启动到渲染中管道。

[此处](http://www.songho.ca/opengl/gl_vbo.html)的页面也可能有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T16:42:09.273

没有什么能阻止您渲染到[屏幕外帧缓冲区（即 FBO）](http://oss.sgi.com/projects/ogl-sample/registry/EXT/framebuffer_object.txt)，然后将其保存到磁盘而不是显示到屏幕上。例如，在 CUDA、OpenCL 等出现之前，GPGPU 技术就是这样工作的。您可以将数据加载为未过滤的浮点纹理，使用 FBO 上的像素着色器执行计算，然后保存结果返回磁盘。

在我上面发布的链接中，它在概述中指出：

> 这个扩展定义了一个简单的接口，用于绘制到渲染目的地，而不是由窗口系统提供给 GL 的缓冲区。

然后它继续说，

> 通过允许使用可附加帧缓冲区的图像作为渲染目标，此扩展支持一种“离屏”渲染形式。

因此，您可以通过在屏幕外渲染一些渲染速度低于 30fps 的场景来获得“非实时”渲染，然后将这些结果保存到可以在以后播放的某个电影文件或文件序列格式中.

# javascript - 在 JavaScript 中传递绑定对象方法

> ID：10260903
> 
> 赞同：0
> 
> 时间：2012-04-21T16:34:36.327
> 
> 标签：javascript

对于 Firefox 扩展，我正在尝试执行以下操作：

1.  使用两种方法和一个字段/属性/属性设置一个对象
2.  其中一种方法必须能够调用另一种方法并访问属性
3.  我想将该方法注册为事件侦听器。

现在，我把它设置成一个类：

```
var Obj = {
  field: null,
  a: function() { }
  b: function() {
    Obj.field = 'x';
    Obj.a();
  }
}

window.addEventListener('mouseup', Obj.b, false); 
```

但似乎应该有可能让 mod 不“从外部”引用对象（例如通过使用`Obj`），而只是使用`this`。但是，我不知道如何让它正常工作，传递一个简单的函数引用，`addEventListener()` *并且*（最好）只用一个名称污染命名空间。那可能吗？我尝试用谷歌搜索它并找到例如[http://ejohn.org/blog/simple-class-instantiation/](http://ejohn.org/blog/simple-class-instantiation/)，但这似乎并没有导致符合我干净设置标准的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T17:00:16.383

`bind`绝对是个好办法。但是，请注意，该`addEventListener`方法可以接受实现[EventListener](http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-EventListener)接口的对象，而不是函数：

```
var Obj = {
  field: null,
  a: function() { },
  b: function() {
    this.field = 'x'; // if you overrides `a` you can't call it
    this.a();
  },

  handleEvent: function(event) {
    switch(event.type) {
      case "mouseup":
         this.b();
         break;
    }
  }
}

window.addEventListener('mouseup', Obj, false); 
```

如果您有多个与 相关的事件`Obj`，和/或如果您有同一个对象的多个实例（不是您的情况），这可能很有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T16:42:43.253

使用 ES5[`bind`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)函数：

```
var Obj = {
  field: null,
  a: function() { }
  b: function() {
    this.a = 'x';
    this.a();   //Note: not sure what you're trying to do, but calling a string like a function won't work.
  }
}

window.addEventListener('mouseup', Obj.b.bind(Obj), false); 
```

# iphone - 简单纹理是否比带有纹理附件的 FBO 便宜？

> ID：10260904
> 
> 赞同：0
> 
> 时间：2012-04-21T16:34:40.023
> 
> 标签：iphone, opengl-es, framebuffer

我正在操作图像蒙版运行时。

现在我使用单独的 FBO 将蒙版图像渲染为纹理，然后将结果绘制到屏幕上。

我只是想知道另一种方法是否会更便宜（关于内存）：使用使用两个纹理插槽的着色器绘制图像，一个用于图像，另一个用于蒙版。

我可以以这种方式节省任何**内存吗？**

# algorithm - 给定每秒 44 个样本的 LPCM 阵列消除噪声

> ID：10260905
> 
> 赞同：-1
> 
> 时间：2012-04-21T16:34:40.557
> 
> 标签：algorithm, audio, core-audio, pcm, noise-reduction

我有一个每秒 44100 个 LPCM 数据样本的数组。实际上我有两个渠道的数据。

每 11.61 毫秒我得到大约 512 个样本。

现在我想按照[如何从音频中消除噪音的说明进行操作](https://stackoverflow.com/questions/6503562/which-algo-uses-for-noise-canceling-in-earphones)

但是，该解释假设输入是正弦波。

我应该将我的 LPCM 转换为正弦波以消除噪音吗？也就是说，我是否需要在 LPCM 上运行 FFT 才能应用此技术？

如果是这样，我如何将生成的波形转换回 LPCM 以便播放？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T16:45:32.573

如果您需要从频域转换回时域，您可以使用傅里叶逆变换。否则，我认为还有更多的降噪算法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T20:23:42.230

你想*在哪里*消除噪音？要消除检测器（有麦克风的地方）的噪音，您只需反转信号（交换 + 和 - 电缆），匹配幅度，并调整频率以校正您的设备。要在连接源和麦克风的线路上的某个其他点消除噪音，您还需要添加延迟（如果取消更远）或以某种方式“提前”声音（如果在源和麦克风之间取消）。如果取消离轴，那么事情会变得更加复杂（并且您需要两个信号）。

在复杂的情况下（离轴或麦克风之前），您需要进行某种更高级的信号处理。一种方法是使用 ffts，但找到使用数字滤波器的近似值可能更有效

我猜想 bose 耳机之类的使用信号反转、放大和一些相当简单的频率整形，也许再加上某种反馈检测（如果一切都出错了，以避免震耳欲聋的人）。

**更新**：这是一篇关于耳机如何工作[的非常好的论文。](http://www-personal.umich.edu/~gowtham/bellala_EECS452report.pdf)他们有各种方法，包括训练白噪声滤波器。它比我上面猜测的要复杂。

# php - PHP，数据库：使用空格保存和搜索字符串

> ID：10260906
> 
> 赞同：1
> 
> 时间：2012-04-21T16:34:51.817
> 
> 标签：php, mysql

我有以下情况：

我正在存储可能包含空格的用户输入。问题是，当我`SELECT`从数据库 ( `MySql`) 中执行操作时，它找不到匹配项。如果我去掉空格，则在 db 上的搜索有效，但是如果我以这种方式存储字符串，这些字符串看起来都很乱。

我怎样才能正确地在数据库中存储字符串（带有空格）`AND`正确地执行`SELECT`将找到那些存储的字符串的语句？

谢谢您的帮助。

**更新：**

这是我现在正在使用的内容：

```
$filename = "这是一个带空格的字符串";
//像这样存储在数据库中

$trim_string = preg_replace("/\s+/", "", $filename);
//搜索数据库为Thisisastringwithwhitespace

```

仍然找不到匹配项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:28:39.800

If the user would know the entire string, I would go with Blake suggestion of using TRIM() in the Mysql query, if you want the partial search, and want it fast, I would create a secondary table with the words and another one for the position where appears in the strings, something like this :

```
Word( id, string )
WordInString( id, source_string_id, word_id, position ) 
```

The search would be in 2 steps :

```
1\. get the words ids
2\. get from WordInString the top list with greater number of Words hits, and show the options to the end user. 
```

Hope it helps !

# xcode - Xcode换行设置不起作用

> ID：10260912
> 
> 赞同：7
> 
> 时间：2012-04-21T16:35:26.403
> 
> 标签：xcode, word-wrap

我试图在 Xcode 4.3.2 (4E2002) 中禁用换行，但该设置似乎不起作用。我非常讨厌换行，这让我非常没有效率。我以前一直把它关掉，但是自从最新的 XCode 更新以来，无论设置如何，它都会被启用。

这是一个 Xcode 错误吗？

这是我的设置对话框： ![在此处输入图像描述](../Images/cd6aec513cb1e1e4742996c33b4c2bb3.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-12-16T08:34:07.390

这来自您在`Show the File inspector`.

请选择一个文件。然后取消选择在部分`View -> Utilities -> Show File inspector`中换行。`Text Settings`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-08-11T23:05:28.130

我在 XCode 编辑器中包装了两打文件中的 >ONE< 文件。虽然我不知道文件是如何/为什么进入这种状态的，但我知道它是什么以及如何修复它。

如果您显示 XCode 右侧的实用程序窗格，并选择左上角的 Document 图标，您将看到与该文件相关的各种设置，包括它的名称、类型和位置。下面是一些“文本设置”值，包括“换行”复选框。如果选中该框，它将覆盖 XCode 首选项并换行。

这张图显示了 XCode 编辑器区域，以防您感到困惑： [XCode Editor Areas](https://i.imgur.com/tNpTjA3.png)

# visual-studio-2010 - 使用带有 web.config 转换的 WPP_CopyWebApplication

> ID：10260917
> 
> 赞同：0
> 
> 时间：2012-04-21T16:35:52.083
> 
> 标签：visual-studio-2010, msbuild, msbuild-4.0, msbuild-wpp

我正在尝试构建和发布我的 ASP.NET MVC3 项目。我正在尝试使用 MSBuild 方法实现 Web.Release.config 转换

我使用以下 msbuild 命令来执行相同的操作：msbuild

```
 /p:OutDir=..\publish\;Configuration=Release;UseWPP_CopyWebApplication=True;PipelineDependsOnBuild=False DeployMVCApp.csproj 
```

我看到了[_CopyWebApplication with web.config transformations](https://stackoverflow.com/questions/1983575/copywebapplication-with-web-config-transformations)中给出的解决方案。我正在使用与那里提到的相同的命令，但是在尝试发布网站时构建失败。我正在复制粘贴错误：

```
>       "C:\Users\anirban\Documents\Visual Studio 2010\Projects\DeployMVCApp\DeployMVCApp\DeployMVCApp.csproj" (default
> target) (1) ->    "C:\Users\anirban\Documents\Visual Studio
> 2010\Projects\DeployMVCApp\DeployMVCAp p\DeployMVCApp.csproj"
> (ResolveReferences;_CopyWebApplication target) (1:2) ->
> "C:\Users\anirban\Documents\Visual Studio
> 2010\Projects\DeployMVCApp\DeployMVCAp p\DeployMVCApp.csproj"
> (ResolveReferences;_CopyWebApplication target) (1:3) ->  
> c:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets(214,9)
> : error MSB4184: The expression
> "[System.IO.Path]::GetFullPath(C:\Users\anirban\ Documents\Visual
> Studio
> 2010\Projects\DeployMVCApp\DeployMVCApp\\C:\Users\anirban\Documents\Visual
> Studio 2010\Projects\DeployMVCApp\DeployMVCApp\\..\publish\) " cannot
> be evaluated. The given path's format is not supported.
> [C:\Users\anirban\Documents\Visual Studio
> 2010\Projects\DeployMVCApp\DeployMVCApp\DeployMVCApp .csproj] 
```

谁能让我知道我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T10:18:27.580

查看错误路径：

> C:\Users\anirban\ Documents\Visual Studio 2010\Projects\DeployMVCApp\DeployMVCApp\C:\Users\anirban\Documents\Visual Studio 2010\Projects\DeployMVCApp\DeployMVCApp\..\publish\

如果你想在发布模式下生成你的包，编辑你的 csproj 文件，然后搜索：

```
<Target Name="AfterBuild">
</Target> 
```

并将其更新为：

```
<Target Name="AfterBuild" Condition=" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' AND $(FirstRun) != 'false'">
    <MSBuild Projects="$(ProjectPath)" Properties="FirstRun=false;Configuration=Release;PipelineDependsOnBuild=False;UseWPP_CopyWebApplication=True;WebProjectOutputDir=$(ProjectDir)..\Output\$(ProjectName);OutDir=$(ProjectDir)bin\" Targets="ResolveReferences;_CopyWebApplication" />
</Target> 
```

# php - 使用 oauth-php 发送推文？

> ID：10260919
> 
> 赞同：1
> 
> 时间：2012-04-21T16:35:52.380
> 
> 标签：php, oauth, twitter

```
<?php
include_once("twitter/library/OAuthStore.php");
include_once("twitter/library/OAuthRequester.php");
// register at http://twitter.com/oauth_clients and fill these two 
define("TWITTER_CONSUMER_KEY", "hidden");
define("TWITTER_CONSUMER_SECRET", "hidden");

define("TWITTER_OAUTH_HOST","https://api.twitter.com");
define("TWITTER_REQUEST_TOKEN_URL", TWITTER_OAUTH_HOST . "/oauth/request_token");
define("TWITTER_AUTHORIZE_URL", TWITTER_OAUTH_HOST . "/oauth/authorize");
define("TWITTER_ACCESS_TOKEN_URL", TWITTER_OAUTH_HOST . "/oauth/access_token");
define("TWITTER_PUBLIC_TIMELINE_API", TWITTER_OAUTH_HOST . "/statuses/public_timeline.json");
define("TWITTER_UPDATE_STATUS_API", TWITTER_OAUTH_HOST . "/statuses/update.json");

define('OAUTH_TMP_DIR', function_exists('sys_get_temp_dir') ? sys_get_temp_dir() : realpath($_ENV["TMP"])); 

// Twitter test
$options = array('consumer_key' => TWITTER_CONSUMER_KEY, 'consumer_secret' => TWITTER_CONSUMER_SECRET);
OAuthStore::instance("2Leg", $options);

try
{
    $request = new OAuthRequester(TWITTER_REQUEST_TOKEN_URL, "POST");
    $result = $request->doRequest(0);
    parse_str($result['body'], $params);
    $request = new OAuthRequester(TWITTER_PUBLIC_TIMELINE_API, 'GET', $params);
    $result = $request->doRequest();
    parse_str($result['body'], $params);
}
catch(OAuthException2 $e)
{
    echo "Exception" . $e->getMessage();
}
?> 
```

如何将推文发送到推特？它成功地执行了请求，因为它返回 0，但是如果我想发送推文，我仍然不确定从哪里开始。我是唯一一个使用这个的人，我只想从我的网站发送一条推文，而不是在推特上登录。

谢谢你。

# python - 如何在不同的机器上设置芹菜工人？

> ID：10260925
> 
> 赞同：57
> 
> 时间：2012-04-21T16:36:47.423
> 
> 标签：python, celery

我是 celery 的新手。我知道如何安装和运行一台服务器，但我需要将任务分发到多台机器上。我的项目使用 celery 将传递给 Web 框架的用户请求分配给不同的机器，然后返回结果。我阅读了文档，但没有提到如何设置多台机器。我错过了什么？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-04-21T17:21:18.130

我的理解是，您的应用程序会将请求推送到排队系统（例如 rabbitMQ）中，然后您可以在不同的机器上启动任意数量的工作人员（可以访问与提交任务的应用程序相同的代码）。他们将从消息队列中挑选出任务，然后开始处理它们。完成后，他们将更新墓碑数据库。

这样做的结果是你不需要做任何特别的事情来启动多个工人。只需在不同的相同（相同源代码树）机器上启动它们。

具有消息队列的服务器不必与具有工人的服务器相同，也不必与提交作业的机器相同。您只需将消息队列的位置放入您`celeryconfig.py`的，所有机器上的所有工作人员都可以从队列中提取作业来执行任务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-26T11:42:23.327

我部署它的方式是这样的：

1.  在 heroku 实例上克隆你的 django 项目（这将运行前端）
2.  将 RabitMQ 添加为附加组件并对其进行配置
3.  将您的 django 项目克隆到另一个 heroku 实例（将其称为 worker），您将在其中运行 celery 任务

# fft - 从复数 FFT 到有限场 FFT 的转换

> ID：10260927
> 
> 赞同：3
> 
> 时间：2012-04-21T16:36:58.763
> 
> 标签：fft, multiplication, arbitrary-precision, ntt

下午好！

我正在尝试基于我已经拥有的朴素递归 FFT 实现来开发 NTT 算法。

考虑以下代码（`coefficients`' 长度，顺其自然`m`，是 2 的精确幂）：

```
/// <summary>
/// Calculates the result of the recursive Number Theoretic Transform.
/// </summary>
/// <param name="coefficients"></param>
/// <returns></returns>
private static BigInteger[] Recursive_NTT_Skeleton(
    IList<BigInteger> coefficients, 
    IList<BigInteger> rootsOfUnity, 
    int step, 
    int offset)
{
    // Calculate the length of vectors at the current step of recursion.
    // -
    int n = coefficients.Count / step - offset / step;

    if (n == 1)
    {
        return new BigInteger[] { coefficients[offset] };
    }

    BigInteger[] results = new BigInteger[n];

    IList<BigInteger> resultEvens = 
        Recursive_NTT_Skeleton(coefficients, rootsOfUnity, step * 2, offset);

    IList<BigInteger> resultOdds = 
        Recursive_NTT_Skeleton(coefficients, rootsOfUnity, step * 2, offset + step);

    for (int k = 0; k < n / 2; k++)
    {
        BigInteger bfly = (rootsOfUnity[k * step] * resultOdds[k]) % NTT_MODULUS;

        results[k]          = (resultEvens[k] + bfly) % NTT_MODULUS;
        results[k + n / 2]  = (resultEvens[k] - bfly) % NTT_MODULUS;
    }

    return results;
} 
```

它适用于复杂的 FFT（替换`BigInteger`为复杂的数字类型（我有自己的））。即使我适当地更改了找到统一的原始根源的程序，它也不起作用。

假设，问题是这样的：`rootsOfUnity`传递的参数最初只包含第`m`-th 个复单位根的前半部分，顺序如下：

`omega^0 = 1, omega^1, omega^2, ..., omega^(n/2)`

就足够了，因为在这三行代码中：

```
BigInteger bfly = (rootsOfUnity[k * step] * resultOdds[k]) % NTT_MODULUS;        

results[k]          = (resultEvens[k] + bfly) % NTT_MODULUS;
results[k + n / 2]  = (resultEvens[k] - bfly) % NTT_MODULUS; 
```

我最初利用了这样一个事实，即在任何递归级别（对于任何`n`and `i`），unity 的复杂根`-omega^(i) = omega^(i + n/2)`。

但是，该属性显然不适用于有限域。但是是否有任何类似物可以让我仍然只计算根的前半部分？

或者我应该将循环从`n/2`to扩展`n`并预先计算所有`m`-th 统一的根？

也许这段代码还有其他问题？...

非常感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-31T11:20:27.037

我最近也想实现**NTT**来实现快速乘法而不是**DFFT**。读了很多令人困惑的东西，到处都是不同的字母，没有简单的解决方案，而且我的有限域知识也生疏了，但是今天我终于弄对了（经过两天的尝试和模拟**DFT**系数）所以这是我的见解对于**NTT**：

1.  **计算**

    ```
    X(i) = sum(j=0..n-1) of ( Wn^(i*j)*x(i) ); 
    ```

    哪里`X[]`是**NTT**变换`x[]`的大小`n`，哪里`Wn`是**NTT**基。所有计算都是在整数模算术上进行的，`mod p`任何地方都没有复数。

2.  **重要价值观**

    `Wn = r ^ L mod p`是**NTT**
    `Wn = r ^ (p-1-L) mod p`的基础 是**INTT的基础 是****INTT**
    `Rn = n ^ (p-2) mod p`的缩放乘法常数是素数，并且是**NTT的****x[i]**或**INTT**的**X[i]**的最大值，并且除法必须组合，所以 如果或必须组合， 如果是子结果最大值取决于计算类型和类型。对于单个**(I)NTT**，它是但对于两个大小的向量的卷积，它是等等。有关它的更多信息，请参阅[在有限域上实现 FFT 。](https://stackoverflow.com/a/52342833/2521214) **`~(1/n)`
    `p``p mod n == 1``p>max'`
    `max` ********`r = <1,p)`
    `L = <1,p)``p-1`
    `r,L``r^(L*i) mod p == 1``i=0``i=n`
    `r,L``r^(L*i) mod p != 1``0 < i < n`
    `max'``n`**`max' = n*max``n``max' = n*max*max`************

*******   **不同的功能组合`r,L,p`不同`n`**

    这很重要，您必须在每个 NTT 层之前重新计算或从表中选择参数（`n`始终是前一个递归的一半）。****** 

 ****这是我找到参数的**C++**`r,L,p`代码（需要不包括在内的模运算，您可以将其替换为 (a+b)%c,(ab)%c,(a*b)%c,... 但在这种情况下要注意溢出，特别是`modpow`)`modmul`代码尚未优化，但有一些方法可以显着加快速度。素数表也相当有限，因此要么使用[SoE 或任何其他算法来获得素数，`max'`](https://stackoverflow.com/questions/22467063/prime-numbers-by-eratosthenes-quicker-sequential-than-concurrently/22477240?s=4|13.3690#22477240)以便安全工作。

```
DWORD _arithmetics_primes[]=
    {
    2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,
    179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,
    419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,
    661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,
    947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,
    0}; // end of table is 0, the more primes are there the bigger numbers and n can be used
// compute NTT consts W=r^L%p for n
int i,j,k,n=16;
long w,W,iW,p,r,L,l,e;
long max=81*n;  // edit1: max num for NTT for my multiplication purposses
for (e=1,j=0;e;j++)             // find prime p that p%n=1 AND p>max ... 9*9=81
    {
    p=_arithmetics_primes[j];
    if (!p) break;
    if ((p>max)&&(p%n==1))
     for (r=2;r<p;r++)  // check all r
        {
        for (l=1;l<p;l++)// all l that divide p-1
            {
            L=(p-1);
            if (L%l!=0) continue;
            L/=l;
            W=modpow(r,L,p);
            e=0;
            for (w=1,i=0;i<=n;i++,w=modmul(w,W,p))
                {
                if ((i==0)      &&(w!=1)) { e=1; break; }
                if ((i==n)      &&(w!=1)) { e=1; break; }
                if ((i>0)&&(i<n)&&(w==1)) { e=1; break; }
                }
            if (!e) break;
            }
        if (!e) break;
        }
    }
if (e) { error; }           // error no combination r,l,p for n found
 W=modpow(r,    L,p);   // Wn for NTT
iW=modpow(r,p-1-L,p);   // Wn for INTT 
```

这是我的慢 NTT 和 INTT 实现（我还没有快速 NTT，INTT），它们都成功地用 Schönhage-Strassen 乘法进行了测试。

```
//---------------------------------------------------------------------------
void NTT(long *dst,long *src,long n,long m,long w)
    {
    long i,j,wj,wi,a,n2=n>>1;
    for (wj=1,j=0;j<n;j++)
        {
        a=0;
        for (wi=1,i=0;i<n;i++)
            {
            a=modadd(a,modmul(wi,src[i],m),m);
            wi=modmul(wi,wj,m);
            }
        dst[j]=a;
        wj=modmul(wj,w,m);
        }
    }
//---------------------------------------------------------------------------
void INTT(long *dst,long *src,long n,long m,long w)
    {
    long i,j,wi=1,wj=1,rN,a,n2=n>>1;
    rN=modpow(n,m-2,m);
    for (wj=1,j=0;j<n;j++)
        {
        a=0;
        for (wi=1,i=0;i<n;i++)
            {
            a=modadd(a,modmul(wi,src[i],m),m);
            wi=modmul(wi,wj,m);
            }
        dst[j]=modmul(a,rN,m);
        wj=modmul(wj,w,m);
        }
    }
//--------------------------------------------------------------------------- 
```

`dst`是目标数组
`src`是源数组
`n`是数组大小
`m`是模数 ( `p`)
`w`是基数 ( `Wn`)

希望这对某人有所帮助。如果我忘记了什么请写...

**[edit1：快速 NTT/INTT]**

最后我设法让**NTT/INTT**快速工作。**比普通的FFT**有点棘手：

```
//---------------------------------------------------------------------------
void _NFTT(long *dst,long *src,long n,long m,long w)
    {
    if (n<=1) { if (n==1) dst[0]=src[0]; return; }
    long i,j,a0,a1,n2=n>>1,w2=modmul(w,w,m);
    // reorder even,odd
    for (i=0,j=0;i<n2;i++,j+=2) dst[i]=src[j];
    for (    j=1;i<n ;i++,j+=2) dst[i]=src[j];
    // recursion
    _NFTT(src   ,dst   ,n2,m,w2);   // even
    _NFTT(src+n2,dst+n2,n2,m,w2);   // odd
    // restore results
    for (w2=1,i=0,j=n2;i<n2;i++,j++,w2=modmul(w2,w,m))
        {
        a0=src[i];
        a1=modmul(src[j],w2,m);
        dst[i]=modadd(a0,a1,m);
        dst[j]=modsub(a0,a1,m);
        }
    }
//---------------------------------------------------------------------------
void _INFTT(long *dst,long *src,long n,long m,long w)
    {
    long i,rN;
    rN=modpow(n,m-2,m);
    _NFTT(dst,src,n,m,w);
    for (i=0;i<n;i++) dst[i]=modmul(dst[i],rN,m);
    }
//--------------------------------------------------------------------------- 
```

**[编辑3]**

我已经优化了我的代码（比上面的代码快 3 倍），但我仍然对它不满意，所以我开始用它提出新问题。在那里，我进一步优化了我的代码（比上面的代码快大约 40 倍），因此它的速度几乎与**FFT**在相同位大小的浮点上的速度相同。它的链接在这里：

*   [模块化算法和 NTT（有限域 DFT）优化](https://stackoverflow.com/q/18577076/2521214)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-21T21:01:36.637

要将Cooley-Tukey（复数）FFT 转换为模算术方法，即NTT，您必须替换omega 的复数定义。对于纯递归的方法，您还需要根据当前信号大小*重新计算每个级别的 omega 。*这是可能的，因为分钟。当我们在调用树中向下移动时，合适的模数会减少，因此用于根的模数适用于较低层。此外，由于我们使用相同的模数，当我们向下移动调用树时，可能会使用相同的生成器。此外，对于逆变换，您应该采取额外的步骤来重新计算欧米茄 a 并改为使用欧米茄：b = a ^ -1 （通过使用反模运算）。具体来说，b = invMod(a, N) st b * a == 1 (mod N)，其中 N 是选择的素数模数。

通过利用周期性重写涉及 omega 的表达式仍然适用于模算术领域。您还需要找到一种方法来确定问题的模数（素数）和有效的生成器。

我们注意到您的代码有效，尽管它不是 MWE。我们使用常识对其进行了扩展，并为多项式乘法应用得到了正确的结果。你只需要提供正确的欧米茄值就可以了。

但是，尽管您的代码可以正常工作，但与许多其他来源一样，您将每个级别的间距加倍。但是，这不会导致递归那么干净；这与基于当前信号大小重新计算 omega 相同，因为 omega 定义的功率与信号大小成反比。重申一下：将信号大小减半就像平方欧米茄，这就像给欧米茄提供双倍的功率（这是一个将间距加倍所做的事情）。处理重新计算 omega 的方法的好处是每个子问题本身就更干净完整。

有一篇论文展示了模块化方法的一些数学；这是 Baktir 和 Sunar 于 2006 年发表的论文。请参阅本文末尾的论文。

您不需要将循环从 n / 2 扩展到 n。

所以，是的，一些消息来源说只是为模算术方法添加不同的欧米茄定义，正在扫除许多细节。

另一个问题是，如果我们在执行卷积时要避免结果时域信号溢出，那么必须承认信号大小必须足够大是很重要的。此外，即使功率非常大，找到一些快速的受模数求幂的实现可能也是有用的。

**参考**

*   Baktir 和 Sunar - 使用快速傅里叶变换在费马场中实现高效的多项式乘法 (2006)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T10:55:14.683

你必须确保统一的根源确实存在。在**R**中，只有 2 个单位根：1 和 -1，因为只有对它们 x^n=1 才能成立。

在**C**中，你有无限多个单位根： w=exp(2*pi*i/N) 是原始的第 N 个单位根，所有 w^k 都为 0<=k

现在解决您的问题：您必须确保您正在使用的环提供相同的属性：足够的统一根。

Schönhage 和 Strassen ( [http://en.wikipedia.org/wiki/Sch%C3%B6nhage%E2%80%93Strassen_algorithm](http://en.wikipedia.org/wiki/Sch%C3%B6nhage%E2%80%93Strassen_algorithm) ) 使用整数模 2^N+1。这个圆环有足够的统一根。2^N == -1 是二阶单位根，2^(N/2) 是四阶单位根，依此类推。此外，这些单位根的优点是它们是 2 的幂，并且可以实现为二进制移位（之后进行模运算，归结为加/减）。

我认为 QuickMul ( [http://www.cs.nyu.edu/exact/doc/qmul.ps](http://www.cs.nyu.edu/exact/doc/qmul.ps) ) 以 2^N-1 为模。****

# xml - Doctrine 的单一 XML 配置

> ID：10260930
> 
> 赞同：1
> 
> 时间：2012-04-21T16:37:28.620
> 
> 标签：xml, doctrine

根据[文档](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/xml-mapping.html#simplified-xml-driver)：

> 您可以添加一个全局文件并在此文件中添加多个实体。

我尝试的是：

```
$driver = new \Doctrine\ORM\Mapping\Driver\SimplifiedXmlDriver(array("orm-xml"));
$driver->setGlobalBasename('global');

// ...

$em->getClassMetadata('something_Application'); 
```

我有一个名为的目录`orm-xml`，它包含`global.orm.xml`文档建议的文件。当我尝试运行我的脚本时，我得到：

```
uncaught exception: No mapping file found named 'omething_Application.orm.xml' for class 'something_Application'. 
```

我注意到的第一件事是错误消息吃掉了类名的第一个字符。还有一个主要问题：它试图在每个类一个 xml 的基础上读取配置，为什么它不使用我指定的全局文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T18:41:08.560

答案是示例没有显示的内容：`addPaths`方法：

```
$driver = new \Doctrine\ORM\Mapping\Driver\SimplifiedXmlDriver(array("orm-xml"));
$driver->setGlobalBasename('global');
$driver->addPaths(array("orm-xml")); 
```

请注意，我认为构造函数的参数是为此。我仍然不知道它的真正用途是什么。

# ruby-on-rails - 为什么 Ajax 在 rails 3.1 应用程序中呈现 2 个视图

> ID：10260931
> 
> 赞同：0
> 
> 时间：2012-04-21T16:37:33.207
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3.1

在我们的 rails 3.1 应用程序中输入 log 时，使用 ajax 来渲染下面的输入屏幕。这是日志的链接：

```
<%= link_to 'Log', new_part_out_log_path(@part, :format => :js), :remote => true, :id => 'new_log_link' %> 
```

和 new.js.erb 一样：

```
$("<%= escape_javascript render(:file => 'out_logs/new.html.erb') %>").insertAfter('#new_log_link');
$('#new_log_link').hide();
$('#close').hide(); 
```

问题是在单击“日志”后，呈现了两个相同的 out_logs/new.html.erb 视图，而不是一个视图。我们的代码可能有什么问题？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T15:20:27.443

该问题与升级到 ruby​​ 1.9.3 有关，这会导致 webrick 服务器（用于开发）警告消息，并且还会在屏幕上两次呈现 .js.erb 文件。两次渲染问题在我们运行 nginx 的生产服务器上消失了。以下链接可能有助于理解问题：

[http://theresa.multimediatechnology.at/webrick-warnings-in-ruby-1-9-3/](http://theresa.multimediatechnology.at/webrick-warnings-in-ruby-1-9-3/)

[“警告无法确定响应正文的内容长度”是什么意思。意思是我如何摆脱它？](https://stackoverflow.com/questions/7082364/what-does-warn-could-not-determine-content-length-of-response-body-mean-and-h)

# zend-framework - 无法在 Zend Framework application.ini 中注册插件

> ID：10260934
> 
> 赞同：1
> 
> 时间：2012-04-21T16:37:58.513
> 
> 标签：zend-framework

我的插件目录位于

```
application
  /plugins
    Dbcount.php
    ModuleLayout.php 
```

我无法使用 frontController 注册插件。这是我的 application.ini 代码。

```
#Plugin path and namespace
pluginPaths.Plugins = APPLICATION_PATH "/plugins"
autoloaderNamespaces[] = "Plugin_"

#register plugin
resources.frontController.plugins[] = "Plugin_DbCount" 
```

它给了我以下错误。

```
Warning: include_once(Plugin/DbCount.php) [function.include-once]: failed to open stream: No such file or directory in /Users/azhararmar/htdocs/joofris/v1/library/Zend/Loader.php on line 146

Warning: include_once() [function.include]: Failed opening 'Plugin/DbCount.php' for inclusion (include_path='/Users/azhararmar/htdocs/joofris/v1/application/../library:/Users/azhararmar/htdocs/joofris/v1/library:.:/Applications/MAMP/bin/php5.2/lib/php') in /Users/azhararmar/htdocs/joofris/v1/library/Zend/Loader.php on line 146

Fatal error: Class 'Plugin_DbCount' not found in /Users/azhararmar/htdocs/joofris/v1/library/Zend/Application/Resource/Frontcontroller.php on line 117 
```

怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T16:49:42.127

如果您使用的是默认的 appnamespace `Application`，那么存储在其中的插件`application/plugins/DbCount.php`应该命名为`Application_Plugin_DbCount`. 注册时使用完整的班级名称：

`resources.frontController.plugins[] = "Application_Plugin_DbCount"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T17:24:07.130

要使用这样的命名空间，您的`Plugin`类需要位于库下，或者您需要将它们映射到其他位置。看起来您的前端控制器插件设置正确但自动加载定义不正确。

在这里做的最简单的事情就是给你的插件命名`YourAppNamespace_Plugin_YourPluginName`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T17:37:09.963

它们是 ZF 中的两种插件。您正在混合每个 .

让你的代码工作

```
1) put application dir in include_path
2) change directory name plugins to 'Plugin' 
```

# iphone - iPhone App 名称（跳板和目标）允许的特殊字符列表

> ID：10260935
> 
> 赞同：7
> 
> 时间：2012-04-21T16:38:05.000
> 
> 标签：iphone, ios, app-store, springboard

**我正在寻找一组可用于包含在应用商店提交的应用名称中的字符。**

到目前为止，我知道在跳板上显示的应用程序名称中可以使用字母数字字符 应用程序名称可以以数字开头吗？应用名称中可以有 + 吗？可以有吗？标记？能不能有点。或冒号：？

我在提交带有 + 的应用程序时遇到问题 AppName+ 在调试期间显示正常，但我无法将其作为应用商店的包名称提交。

用于在应用商店中列出产品的名称呢？

我知道应用商店名称中允许使用：+，-？/：。?

**我需要了解哪些字符可以作为 iPhone 上的应用名称显示给用户，哪些字符可以显示在应用商店中。**

例如，我的应用程序的跳板名称称为 CoolApp++ 。这是显示在图标下的名称。要将应用程序提交到应用程序商店，我需要以以下形式提供捆绑标识符：com.yourcompanyname.appname

任何输入表示赞赏！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-22T14:54:34.397

一个应用程序有 4 个名称：产品或捆绑包文件名、捆绑包 ID 后缀、赋予 iTunes Connect 的应用商店名称以及图标下的捆绑包显示名称。只有后两个名称允许特殊字符和空格。前 2 个必须是没有空格的纯 ASCII。您可以分别设置所有 4 个应用程序名称，Apple 批准的许多应用程序确实有这 4 个名称彼此不同（只要它们没有误导性的不同，我想）。

Target 或 Project 可能会在开始时尝试将这 4 个名称设置为相同，但它们都可以编辑并更改为您喜欢的、单独的和 4 个不同的应用程序名称。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-21T16:46:41.317

现在，不能保证这是否会通过提交，但是您可以在键盘上手动找到的任何符号都是公平的游戏 (!?&$@();"-/::[]+}=#*^_ €|•<€£| 等），以及大多数（如果不是全部）基于拉丁语的变音符号、梵语、汉字、韩语、简体中文和普通话以及俄语。我相信还有其他的，但 iOS现在才扩展对几种外来语言的支持。

当涉及到 Unicode 和 Emoji 时，iOS 可能无法呈现某些字符，或者苹果认为不合适。跳板从来都不是一堆乱七八糟的符号，而是一个人们可以将应用程序图标和标题与应用程序相关联的地方。尽管自从他们扩展了日文键盘以来，苹果似乎一直在[支持 Emoji 。](http://support.apple.com/kb/HT4976)

因此，虽然它们可能会在某些应用程序中找到，但使用苹果的话“如果我们拒绝您的申请，请不要引用它们作为例子来上诉您的拒绝。”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T16:49:01.253

几乎所有字符都可以使用，例如，有些应用程序的名称带有变音符号、中文和韩文字母。例如，有很多应用程序名称为“.com”或“AC/DC”。只要显示名称接近应用程序的实际名称（即允许缩写等，完全不同的包名称是不允许的）。不过，Apple 可能会拒绝名称花哨的应用程序。

# hibernate - hibernate3-maven-plugin 3.0 在 Eclipse 中使用 m2eclipse 运行良好，但在独立 maven 中运行失败

> ID：10260937
> 
> 赞同：2
> 
> 时间：2012-04-21T16:38:14.047
> 
> 标签：hibernate, maven-plugin

我将 Eclipse Indigo 与 M2Eclipse 1.0.200.20111228-1245 一起使用，我想使用 hibernate3-maven-plugin 3.0 版从我的 Hibernate 配置文件和映射文件生成数据库模式。这是我的 pom.xml 中的插件 xml 片段。

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>hibernate3-maven-plugin</artifactId>
    <version>3.0</version>
    <executions>
        <execution>
            <id>create-schema</id>
            <phase>process-test-resources</phase>
            <goals>
                <goal>hbm2ddl</goal>
            </goals>
            <configuration>
                <components>
                    <component>
                        <name>hbm2ddl</name>
                        <implementation>configuration</implementation>
                    </component>
                </components>
                <hibernatetool destdir="${project.basedir}">
                    <classpath>
                        <path
                            location="${project.basedir}/src/main/resources/mappings/" />
                    </classpath>
                    <configuration
                        configurationfile="${project.basedir}/src/test/resources/hibernate.cfg.xml" />
                    <hbm2ddl create="true" export="false"
                        drop="true" outputfilename="schema.sql"
                        format="true" console="false" />
                </hibernatetool>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

使用上述配置，我可以在 Eclipse 中使用 m2eclipse（嵌入式 maven 3.0.2）运行“Maven 构建”，并且目标“process-test-resources”就好了。但是当我尝试使用独立的 maven (3.0.4) 运行时，我遇到了这样的异常

```
[ERROR] Failed to execute goal org.codehaus.mojo:hibernate3-maven-plugin:3.0:hbm2ddl (default-cli) on project amlbs: There was an error creating the AntRun task. NullPointerException -> [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.codehaus.mojo:hibernate3-maven-plugin:3.0:hbm2ddl (default-cli) on project amlbs: There was an error creating the AntRun task.
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:217)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: org.apache.maven.plugin.MojoExecutionException: There was an error creating the AntRun task.
    at org.codehaus.mojo.hibernate3.AbstractHibernateMojo.execute(AbstractHibernateMojo.java:84)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    ... 19 more
Caused by: java.lang.NullPointerException
    at org.codehaus.plexus.configuration.DefaultPlexusConfiguration.add(DefaultPlexusConfiguration.java:170)
    at org.codehaus.plexus.configuration.DefaultPlexusConfiguration.addChild(DefaultPlexusConfiguration.java:146)
    at org.codehaus.mojo.hibernate3.util.PlexusConfigurationUtils.setHibernateConfiguration(PlexusConfigurationUtils.java:289)
    at org.codehaus.mojo.hibernate3.util.PlexusConfigurationUtils.parseHibernateTool(PlexusConfigurationUtils.java:67)
    at org.codehaus.mojo.hibernate3.AbstractHibernateToolMojo.getConfiguration(AbstractHibernateToolMojo.java:60)
    at org.codehaus.mojo.hibernate3.AbstractHibernateMojo.execute(AbstractHibernateMojo.java:76)
    ... 21 more
[ERROR] 
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-20T03:51:28.147

If it is at all any help, here is a working configuration for version 3.0 of the `hibernate3-maven-plugin`. It is firing off `hbm2java` (your question is for `hbm2ddl`) but it appears to me useful regardless, particularly while no one else is answering (yet).

```
<configuration>
    <hibernatetool>
        <classpath>
            <path location="${project.build.testOutputDirectory}" />
        </classpath>
        <jdbcconfiguration
            propertyfile="${basedir}/jpa-reveng/hibernate.properties"
            revengfile="${basedir}/jpa-reveng/hibernate.reveng.xml"
            reversestrategy="com.package.MyReverseEngineeringStrategy" />
        <hbm2java jdk5="true" ejb3="true"
            destdir="${project.build.sourceDirectory}" />
    </hibernatetool>
</configuration> 
```

# grails - 从内部 grails 过滤器 DSL 访问常量

> ID：10260939
> 
> 赞同：0
> 
> 时间：2012-04-21T16:38:20.193
> 
> 标签：grails, groovy, filter

在这里，我只是想对我需要的字符串键进行干燥，但唯一有效的是将字符串直接放入分配中：`request['RequestStopwatch.start'] = System.currentTimeMillis()`.

任何指针？

```
class RequestStopwatchFilters {

    def REQ_KEY = 'RequestStopwatch.start'

    def filters = {
        all(controller:'*', action:'*') {

            before = {

                log.debug(""+System.currentTimeMillis() + " " + request)
                // NULL pointer exception on REQ_KEY here:
                request[REQ_KEY] = System.currentTimeMillis()
            }
            after = { Map model ->
                if (log.isDebugEnabled()) {
                    // NULL pointer exception on REQ_KEY here:
                    log.debug("Stopped request before view at " + (System.currentTimeMillis() - request[REQ_KEY]) + "ms")
                }
            }
            afterView = { Exception e ->
                if (log.isDebugEnabled()) {
                    // NULL pointer exception on REQ_KEY here:
                    log.debug("Stopped request at " + (System.currentTimeMillis() - request[REQ_KEY]) + "ms")
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T17:29:58.893

使其成为`static`或更好`public final static`，例如：

```
class RequestStopwatchFilters {

    public final static String REQ_KEY = 'RequestStopwatch.start'
} 
```

并在任何地方使用它：

```
RequestStopwatchFilters.REQ_KEY 
```

# module - 如何创建和加载 GTK 模块？

> ID：10260940
> 
> 赞同：8
> 
> 时间：2012-04-21T16:38:27.530
> 
> 标签：module, gtk

我想创建一个自定义 GTK 模块，当我启动 GTK 应用程序时应该加载该模块。

关于这个主题的文档很少，我搜索了很多，但我没有让它运行。我在带有 GTK3 的 Ubuntu Linux 上尝试过：

*   用里面的方法编译和链接一个共享库`void gtk_module_init(gint *argc, gchar ***argv[])`。据我了解，这应该足以创建一个简单的模块。完整代码：

```
#include <iostream>
#include <gtk/gtk.h>

void gtk_module_init(gint *argc, gchar ***argv[]) {
    std::cout << "huhu" << std::endl;
} 
```

*   将此库放入 /usr/lib/x86_64-linux-gnu/gtk-3.0/modules/libtest-gtk-module.so
*   试图启动这样的应用程序：`gnomine --gtk-module=libtest-gtk-module.so`但我得到的只是：`Gtk-Message: Failed to load module "libtest-gtk-module.so"`

**那么为了让 GTK 加载这个库，还需要做什么呢？**

提前谢谢了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T18:00:12.200

您需要让系统知道该库。对于系统目录中的库，以 root 身份运行 ldconfig 就足够了。看看[这里](http://www.yolinux.com/TUTORIALS/LibraryArchives-StaticAndDynamic.html)的教程。

[编辑]

我让模块加载如下：

*   由于这是 C++ 代码，因此您需要确保函数名称没有被重命名：

    ```
    extern "C" {
    void gtk_module_init(gint *argc, gchar ***argv[]) {
        std::cout << "huhu" << std::endl;
    }
    } 
    ```

*   我用以下内容构建了它：

    ```
    g++ -fPIC -shared -Wl,-soname,libfoo.so.1 -olibfoo.so.1.0.1 `pkg-config --libs --cflags gtk+-3.0` t.c 
    ```

*   我使用了绝对路径来避免弄乱 ldconfig，这可能是开发模块时最好的做法：

    ```
    ~$ gedit --gtk-module=/home/eric/libfoo.so.1.0.1 t.c
    huhu 
    ```

这是在 Mint LMDE 上，而不是在 Ubuntu 上，但我认为这并不重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T08:28:00.920

尝试使用 strace 运行它：

```
strace -eopen add_your_command_here 2>&1 | grep libtest-gtk-module.so 
```

你会发现你的程序在哪里寻找那个文件。

# php - 使用 PHP/JQuery 显示图像

> ID：10260941
> 
> 赞同：-3
> 
> 时间：2012-04-21T16:38:58.320
> 
> 标签：php, javascript, jquery, image, scroll

我在 MYSQL DB 中有 1000 张图片我想以 pinterest.com 的方式排列它们

我遇到了砌体 jquery 脚本。虽然代码讲述了 HTML 文件的用法，但我找不到将它与 PHP 一起使用的方法。

```
http://masonry.desandro.com/demos/infinite-scroll.html 
```

如果我回显所有图像，则使用 PHP，那么页面将非常沉重。当我到达底部滚动条时，如何集成 Masonry 以从 MYSQL DB 中获取图像，从而使页面变亮？

我对此有点困惑，我不是 PHP 专家。任何帮助，将不胜感激。

```
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <!--[if lt IE 9]><script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  <title>Adi</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>Adi</title>

<link rel="stylesheet" type="text/css" href="style.css" />

<script src="jquery-1.7.1.min.js"></script>
<script src="jquery.masonry.min.js"></script>
<script src="jquery.infinitescroll.min.js"></script>
<script src="modernizr-transitions.js"></script>

</head>

<body>

<div id="container" class="transitions-enabled infinite-scroll clearfix">
<?php
// Make a MySQL Connection
mysql_connect("localhost", "ID", "Pass") or die(mysql_error());
mysql_select_db("DB") or die(mysql_error());

// Retrieve all the data from the "test " table
$result = mysql_query("SELECT * FROM test limit 10")
or die(mysql_error());  

// store the records of the "TABLENAME" table into $row array and loop through
while ( $row = mysql_fetch_array( $result, MYSQL_ASSOC ) ) {

// Print out the contents of the entry 

//echo "details: ".$row['id'];
echo '<div class="box">';
echo "<img src=\"images/".$row['image']."\" alt=\"name\" />";
echo '</div>';
}
?>
</div>
<p>Hi</p>
<p>&nbsp;</p>

<nav id="page-nav">
  <a href="2.php"></a>
</nav>

<script >

  $(function(){

    var $container = $('#container');

    $container.imagesLoaded(function(){
      $container.masonry({
        itemSelector: '.box',
        columnWidth: 60
      });
    });

    $container.infinitescroll({
      navSelector  : '#page-nav',    // selector for the paged navigation 
      nextSelector : '#page-nav a',  // selector for the NEXT link (to page 2)
      itemSelector : '.box',     // selector for all items you'll retrieve
      loading: {
          finishedMsg: 'No more pages to load.',
          img: 'http://i.imgur.com/6RMhx.gif'
        }
      },
      // trigger Masonry as a callback
      function( newElements ) {
        // hide new items while they are loading
        var $newElems = $( newElements ).css({ opacity: 0 });
        // ensure that images load before adding to masonry layout
        $newElems.imagesLoaded(function(){
          // show elems now they're ready
          $newElems.animate({ opacity: 1 });
          $container.masonry( 'appended', $newElems, true ); 
        });
      }
    );

  });

</script>

</body>
</html> 
```

第2页.php包含

```
<?php
    // Make a MySQL Connection
    mysql_connect("localhost", "ID", "Pass") or die(mysql_error());
    mysql_select_db("DB") or die(mysql_error());

    // Retrieve all the data from the "test " table
    $result = mysql_query("SELECT * FROM test limit 5")
    or die(mysql_error());  

    // store the records of the "TABLENAME" table into $row array and loop through
    while ( $row = mysql_fetch_array( $result, MYSQL_ASSOC ) ) {

    // Print out the contents of the entry 

    //echo "details: ".$row['id'];
    echo '<div class="box">';
    echo "<img src=\"images/".$row['image']."\" alt=\"name\" />";
    echo '</div>';
    }
    ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T16:42:56.417

如果你想展示它们真的很好看这个：http: [//isotope.metafizzy.co/](http://isotope.metafizzy.co/) 它很容易集成，我自己用过。

你要做的就是这个。在你设置好所有同位素之后。（它将向您展示如何）您像这样在您的页面上设置一个 PHP 函数。

```
<div id="container">
    <?php
        $QUERY = "SELECT * FROM `IMAGES` ORDER BY `ID` Limit 20;"; // 20 Image Limit
        $RESULTS = mysql_query($QUERY);
        while($ROW = mysql_fetch_assoc($RESULTS)) {
            echo '<div class=" Your Main Name For The Isotope Objects "><img src="' . $ROW['URL'] . '" /></div>';
        }
    ?>
</div> 
```

while() 将继续遍历您的数据库，直到达到其限制，为您提供 20 个包含图片的 div。

# c++ - 分配数组时的 bad_alloc

> ID：10260945
> 
> 赞同：3
> 
> 时间：2012-04-21T16:39:23.867
> 
> 标签：c++

我在一个类的构造函数上有这个代码：

```
verts=new GLfloat[nVerts]; 
```

verts 是类 (GLfloat *) 的成员变量，nVerts 是 4。该代码有问题吗？我得到同样的错误如果我尝试做 malloc(sizeof(GLfloat)*nVerts) 我认为我没有内存不足，因为如果我将该行代码更改为代码的另一部分（例如方法在调用它之前调用构造函数，就像这样：`GLfloat *test=new GLfloat[4]`它有效）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T16:44:45.023

我会检查 3 件事：

1.  你100%确定`nVerts`是4吗？
2.  内存真的不枯竭吗？
3.  你的堆没有损坏吗？valgrind 可以帮助你。

# android - Chrome 和 Android 中的 Web SQL 存储限制？

> ID：10260951
> 
> 赞同：11
> 
> 时间：2012-04-21T16:40:46.200
> 
> 标签：android, html, google-chrome, storage, web-sql

所以我正在编写一个需要在离线 Web SQL 数据库中存储约 40MB 离线数据的网络应用程序。它需要在 Chrome（桌面）、Safari（桌面和移动）和 android 的浏览器中工作。现在我知道这些浏览器支持 Web SQL，并且我知道从哪个版本开始，但我需要知道允许多少存储空间。Safari 桌面支持 500MB 的数据库存储。Safari 移动版支持 50MB 的数据库存储。

然而，我花了数小时到处搜索以找出 chrome 桌面支持的空间以及 android 浏览器支持的空间，但找不到任何具体的东西。一个地方指出 chrome 桌面有 5MB 的硬性限制，而另一个地方则引用了 chrome 桌面的 25MB 限制（不使用 chrome 扩展）。安卓浏览器的一个消息来源指出了 15MB 的限制，另一个则指出了 5MB 的限制。任何人都可以指出我在某个地方说明 Web SQL 存储对于 android 和 chrome 的实际硬限制是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T16:45:27.727

请参阅 Google Chrome 的此链接：

[http://code.google.com/chrome/extensions/manifest.html#permissions](http://code.google.com/chrome/extensions/manifest.html#permissions)

默认为 5MB，但您可以切换 unlimitedStorage 属性

这是关于同一主题的另一个讨论：

[Google Chrome 应用程序的 Google Chrome 数据库的大小限制是多少？](https://stackoverflow.com/questions/6555697/what-is-the-size-limitation-of-google-chrome-databases-for-google-chrome-apps)

对于 Android，如果发现此线程可能会有所帮助： [SQLite 数据库最大存储容量](https://stackoverflow.com/questions/8502070/sqlite-database-maximum-storage-capacity)

# python - Python 键错误

> ID：10260953
> 
> 赞同：1
> 
> 时间：2012-04-21T16:40:58.773
> 
> 标签：python, machine-learning, python-2.7

我遇到了 Python 密钥错误，无法解决。

给出的错误如下所示

```
Traceback (most recent call last):
File "<pyshell#4>", line 1, in <module>
import handling_data_
File "C:\Python27\handling_data_.py", line 453, in <module>
main()
File "C:\Python27\handling_data_.py", line 443, in main
pans.append([row[0],p.classify(row)])
File "C:\Python27\handling_data_.py", line 367, in classify
cgclass = self.greater_class_prob_dist[query[2]]
KeyError: ' Without-pay' 
```

有问题的行是

```
clclass = self.less_class_prob_dist[query[2]] 
```

我不确定这条线有什么问题，因为 Greater_class_prob_dist 还有另一条线

```
cgclass = self.greater_class_prob_dist[query[2]] 
```

该类是一个朴素的贝叶斯实现，如果从包含“Without-pay”的文本文件中获取条目，它可以完美地工作，否则它不会。

有谁知道如何解决这个问题？

这是整个类和文本文件的链接，如果人们需要查看或运行它以自己查看问题 [源代码](http://dl.dropbox.com/u/21608326/Naive_bayes.zip)

任何帮助都非常有用

编辑：记录打印包含“无薪”

```
['tst1249', 62, ' Without-pay', 170114, ' Assoc-acdm', 12, ' Married-civ-spouse', ' Farming-fishing', ' Husband', ' White', ' Male', 0, 0, 50, ' United-States', '?'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T16:50:29.043

如果您查看 中的所有条目`trainingset.txt`，您会看到所有带有 的条目`Without-pay`都被列为有`<=50k`收入。正如您在 中看到的`__init__`，训练数据分为两组：

```
 for row in data:
              if row[15] == ' >50K':
                    self.greaterThan_data.append(row)
              else:
                    self.lessThan_data.append(row) 
```

由于没有一个`Without-pay`条目有`>50k`收入，所以它们都没有进入`greaterThan_data`.

所以当你打电话...

```
 self.greater_class_prob_dist = self.getCatProbs(self.greaterThan_data,2) 
```

..结果 dict 缺少那个键。

# c# - 是否有一种 LINQ 方法来加入/连接未知数量的列表？

> ID：10260955
> 
> 赞同：1
> 
> 时间：2012-04-21T16:41:06.473
> 
> 标签：c#, linq, list, .net-4.0

我有一个包含子对象列表的对象，每个子对象又包含一个子对象列表，依此类推。仅使用第一代孩子，我想尽可能干净和便宜地组合所有这些列表。我知道我可以做类似的事情

```
 public List<T> UnifiedListOfTChildren<T>() 
    {
        List<T> newlist = new List<T>();
        foreach (childThing in myChildren)
        {
            newlist = newlist.Concat<T>(childThing.TChildren);
        }
        return newlist;
    } 
```

但是我是否缺少更优雅、更便宜的 LINQ 方法？

**编辑**如果您以与我相同的方式解决这个问题并且是 SelectMany 的新手，我强烈推荐这个关于如何使用它的[可视化解释。](http://www.codethinked.com/a-visual-look-at-the-linq-selectmany-operator)目前在谷歌搜索结果中排名靠前，但值得直接跳过。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T16:43:11.207

```
var newList = myChildren.SelectMany(c => c.TChildren); 
```

# visual-studio-2010 - C++/CLI 多个按钮维护变量值

> ID：10260957
> 
> 赞同：1
> 
> 时间：2012-04-21T16:41:29.780
> 
> 标签：visual-studio-2010, c++-cli

好的，让我解释一下我的问题。

我正在开发一个有按钮的程序。单击它会导致数字“1”出现，然后，任何进一步的单击都会增加该值，直到达到“9”的值。（这是一个字符串）。我编写了这段代码，它将一个 int 变量声明为 0（是的，这是一个错误，但让我继续）然后将其递增并将其解析为字符串并显示在按钮文本上（这是在按钮单击时执行的代码）：

```
private: System::Void a0_Click(System::Object^  sender, System::EventArgs^  e) {
             int i = 0;
             i++;
             a0->Text = i.ToString();
         } 
```

但是，正如您可能怀疑的那样，我在每次按下按钮时都将 i 声明为 0 是愚蠢的，因此结果是 1 是按钮上显示的唯一值。我尝试做的下一件事是将 i 声明为值为 0 的全局变量。但是，我遇到了另一个问题。我有 82 个这样的按钮，我正在寻找我能找到的最简单的解决方案，所以共享 i 变量似乎是合乎逻辑的，

下一个问题是，如果我按下第一个按钮 5 次，则显示在其上的数字将为“5”，但是如果我按下另一个按钮，则默认值不会是“1”，而是“6”（第一个按钮的值加一）。基本上它会继承第一个的价值。

现在我走到了死胡同。我不知道该怎么做。我尝试使用 i 和 i2 但我只是在追逐自己的尾巴。有一个非常简单的解决方案吗？请记住，我有 82 个按钮（是的，我知道它很多），默认为 0。当我单击每个按钮时，我需要它*从 0 开始递增一*。有任何想法吗？

注意：操作系统是 Windows XP，IDE 是 Visual Studio 2010m，使用 Windows 窗体应用程序、C++/CLI。如果我忘记在评论中提及任何帖子，我会添加它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T17:28:40.997

您可以检查`sender`以找出单击了哪个按钮。

```
void anybutton_Click(System::Object^ sender, System::EventArgs^)
{
    Button^ btn = dynamic_cast<Button^>(sender); // or safe_cast
    int i;
    if (System::Int32::TryParse(btn->Text, i)) {
         i++;
         btn->Text = i.ToString();
    }
} 
```

# sql - SQLite JOIN 两个具有重复键的表

> ID：10260962
> 
> 赞同：-1
> 
> 时间：2012-04-21T16:42:19.257
> 
> 标签：sql, sqlite, join, one-to-one

我需要在两个不同的字段上加入两个表。我有这样的表1：

```
key  productid  customer
1    100        jhon
2    109        paul
3    100        john 
```

表 2 具有相同的字段，但我必须与第一个表相关的附加数据

```
key  productid  customer  status  date ...
1    109        phil      ok      04/01 
2    109        paul      nok     04/03
3    100        jhon      nok     04/06 
4    100        jhon      ok      04/06 
```

两个“关键”字段都是自动递增的。问题是我的关系字段在结果中重复多次，我需要生成一对一的关系，这样表 2 中的一行必须与表 1 中的一行仅关联一次。

我在（customer=customer 和 productid=productid）上做了一个左连接，但是关系重复了，平板 2 中的一行与表 1 的行相关联很多次。

为了澄清事情......
我必须交叉检查两个表，表 1 是从 XLS 报告中加载的，表 2 是来自数据库的数据，它反映了具有许多状态数据的客户交易。我必须检查数据库中是否存在来自 XLS 的行，然后加载其他状态数据。当 XLS 中的行在数据库中没有对应的数据时，我必须生成报告。

如何完成这个 JOIN，这可能只用 SQL 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T17:47:22.890

您可以使用下面的 sql 在 MS SQL 中完成此操作。不确定 SQLite 是否支持这一点。

```
select a.*, c.*
from table2 a, ( select min(key) key, productid, customer
                 from table1
                 group by productid, customer 
                   ) b,
               table1 c
where a.productid = b.productid
and   a.customer = b.customer
and   b.key = c.key 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T16:55:51.017

理解这一点的一种方法是弄清楚每个表究竟代表什么。两张表似乎代表相同的东西，其中一行代表您可能称之为购买的东西。那为什么会有两个单独的表呢？也许第二张表会更深入地了解每次购买？就像 jhon 购买了产品 100 一样，它首先是“nok”，然后是“ok”？是这样，那么第二个表的键（使表唯一的）将是所有三个字段。您仍然只加入匹配的两个字段，但如果有两行具有相同的唯一键，则不能期望唯一性。有时在表上创建额外的索引会有所帮助，以查看真正独特的内容。

# forms - 如何显示具有旧值的表单以便您可以编辑？

> ID：10260964
> 
> 赞同：0
> 
> 时间：2012-04-21T16:42:32.737
> 
> 标签：forms, symfony

在控制器中我找到了 id

```
 $oggetto = $this->getDoctrine()
        ->getRepository('AcmeTryBundle:Try')
        ->find($id); 
```

在我将这个 $values 传递给表单之后（只是？）

```
$form = $this->createForm(new TryType(), $oggetto); 
```

并在 FormType 中？我放了什么？

```
public function buildForm(FormBuilder $builder, array $options)
    {
        $builder->add('name','text')  ? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T08:55:38.147

你的表格看起来不错

```
class TryFormType extends AbstractType {
    public function buildForm(FormBuilder $builder, array $options)
        {
            $builder->add('name','text')  ;
        }

 public function getName() {
        return 'tryform';
    }
} 
```

函数 getName 为表单命名，在本例中为 tryform。

在控制器中，您可以添加这样的 return 语句。

```
return $this->render('AcmeTryBundle:Default:TryForm.html.twig', array(
                    'TryForm' => $form->createView()
                )); 
```

并在树枝文件中按如下方式访问它。

```
{{ form_widget(TryForm.name) }} 
```

该值将自动传递到那里。然后你可以编辑它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T23:05:25.633

你的方法很好。

1）`$oggetto`在数据库中获取您的对象

2) 将其传递给您的 FormType`$form = $this->createForm(new TryType(), $oggetto);`

3）在表单类型中添加所需的字段

4）将您的表格发送到您的视图`'form' => $form->createView()`

5）在您看来，请致电您的表格

```
<form action="{{ path('task_new') }}" method="post" {{ form_enctype(form) }}>
    {{ form_widget(form) }}

    <input type="submit" />
</form> 
```

您的字段（您在 3 中定义）将由您的对象数据自动填充。然后，您可以更改和编辑它们。

有关更多信息，请参阅文档：http: [//symfony.com/doc/current/book/forms.html](http://symfony.com/doc/current/book/forms.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-31T11:59:21.197

例如，在**Symfony 4.2.3**中，您填写并提交了一个表单，并且某些表单值无效。

```
<input type="text" name="name" value="{{ form.vars.value.name }}"> 
```

这样，如果值有效，您将设置旧表单输入为默认值。

# javascript - 如果输入了特殊文本，则擦除 textarea 中的值

> ID：10260969
> 
> 赞同：1
> 
> 时间：2012-04-21T16:42:48.397
> 
> 标签：javascript, html

如果输入，我想删除 textarea 的值`<br>`。目前我只有下面的代码。我知道这个问题听起来很奇怪，但我正在尝试使用具有类型效果的代码。

```
function eraseText() {
    document.getElementById("textarea1").value = "";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T18:03:10.697

```
<textarea id="textarea"> text <br />  text </textarea> 

<script>
document.getElementById('textarea').onkeyup = function() {
   if (/<br \/>/m.test(this.value))
       this.value = '';
};
</script> 
```

[例子](http://jsfiddle.net/sVbuy/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T16:44:53.283

怎么样：

```
document.getElementById("textarea1").onkeyup = function () {
    if (document.getElementById("textarea1").indexOf("<br>") !== -1) {
        document.getElementById("textarea1").value = "";
    }
} 
```

# c# - ODP.NET 是 .net 的本地 oracle 提供者吗？

> ID：10260972
> 
> 赞同：1
> 
> 时间：2012-04-21T16:43:03.827
> 
> 标签：c#, asp.net, entity-framework-4.1

我只是想确保这`ODP.NET`是 .net 的 oracle 设计的本地提供者，并且从什么时候退出？因为我的一些合作伙伴说它很新，想知道第一次发布是什么时候。这一切的讨论都是因为他们选择不使用实体框架，因为 oracle 没有在 2008 年发布 .net 的本地提供程序，并且想检查它是否属实

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T16:51:07.443

最初，Net Framework 1.1 在命名空间中提供了一个本地 Oracle ADO.NET 提供程序`System.Data.OracleClient`，但随后 Microsoft 宣布它已过时，并声明这些类型已被弃用，并将在 .NET Framework 的未来版本中删除。（但在 Net 4.0 中仍然存在）。与此同时，Oracle 构建了 ODP.NET，现在可以将其视为官方的 Oracle Net Provider。

[您可以在此处](http://www.oracle.com/technetwork/topics/dotnet/index-085163.html)免费下载它
有 32 位和 64 位版本，如 Oracle 所述，它包括实体框架、LINQ、WCF 数据服务和隐式 REF CURSOR 参数绑定支持。

在此[链接](http://www.oracle.com/technetwork/database/windows/faq-093106.html)中，您可以阅读有关此提供商的大量常见问题解答

# haskell - 一次将函数映射到 Haskell 中的列表 2 个元素

> ID：10260974
> 
> 赞同：2
> 
> 时间：2012-04-21T16:43:11.037
> 
> 标签：haskell

我在 Haskell 中尝试了一些问题（在[Spoj](http://www.spoj.pl/)），我偶然发现了很多具有以下形式的输入：

```
testcase_1
testcase_1_continued
testcase_2 
testcase_2_continued 
```

或者

```
testcase_1 testcase_1_continued
... 
```

`words`如您所见，仅在输入上使用或`lines`然后映射求解器函数以得到类似的东西是无法解决这个问题的

```
[solver test1, solver test2, ...] 
```

应该使用一个有**两个**参数的函数，它们是两个列表元素，一个接一个，然后得到：

```
[solver test1 test1continued, solver test2 test2continued, ...] 
```

所以我很高兴找到一个类似的函数，`map`它一次应用一个函数 2 个参数。我在 Hoogle 上找不到任何东西，无论编写这样一个函数有多容易，我都在寻找更多解决问题的一般方法。或者，如果我的方法（坚持`map`）肯定是错误的，也可以指出我正确的方向。

## 编辑：

实际上，我发现实现一个将函数映射到列表的函数 map2 非常有用，它一次只使用两个参数：

```
map2 f [a,b,c,d] ==> [f a b, f c d] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-21T17:06:11.037

使用[chunksOf](http://hackage.haskell.org/packages/archive/split/latest/doc/html/Data-List-Split-Internals.html#v:chunksOf)。

```
> map (\[x, y] -> x + y) . chunksOf 2 $ [1..30]
[3,7,11,15,19,23,27,31,35,39,43,47,51,55,59] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T16:47:28.943

`map`是一个很好的方法，如果你的数据是这样的结构，你可能想要稍微改变它以更好地适应语义。一种方法是“配对”结果，`lines`以便获得`[(line1, line2),(line3, line4),...]`. map 的第一个参数将是一个作用于这些元组的函数。

**编辑：** 为了对此进行扩展，一般方法是读取输入，将其格式化为语义上有意义的格式，然后将求解函数映射或折叠到结果上。确切的解决方案取决于输入数据。

# jquery - jQuery - appendTo 前一个/前一个元素

> ID：10260976
> 
> 赞同：3
> 
> 时间：2012-04-21T16:43:16.430
> 
> 标签：jquery, appendto

我在这里找不到这个，希望有人能提供帮助。

我需要将链接 (.more) 附加到它之前的段落 - 我确信这很简单，但不能完全正确：

```
<p>Lorem ipsum</p>

<p>Lorem ipsum</p>

<p>Lorem ipsum</p>

<a href="#" class="more">Read more</a>

<p>Lorem ipsum</p> 
```

最终的 HTML 中可能会有更多的段落，我需要这样做的原因是 CMS 相关的。但基于上述，我的目标是：

```
<p>Lorem ipsum</p>

<p>Lorem ipsum</p>

<p>Lorem ipsum <a href="#" class="more">Read more</a></p>

<p>Lorem ipsum</p> 
```

我试过了：

```
$(".more").appendTo("p"); 
```

但显然这会将它附加到所有段落......也许这是 prevAll 的工作，但我不能完全确定它。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-21T16:53:52.293

**HTML**

```
<p>Lorem ipsum</p>
<p>Lorem ipsum</p>
<p>Lorem ipsum</p>
<a href="#" class="more">Read more1</a>
<p>Lorem ipsum</p>
<a href="#" class="more">Read more2</a> 
```

**JS**

```
$('p').each(function(e){
    if($(this).next('a').hasClass('more'))
       $(this).html($(this).html()+" ").append($(this).next('a')); 
});​ 
```

[**Example1**](http://jsfiddle.net/heera/Me5Dm/7/)和[**Example2 带有多个 a 标签。**](http://jsfiddle.net/heera/Me5Dm/6/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T16:49:38.147

尝试使用

```
var more = $(".more");
more.prev().append(" ").append(more); 
```

# javascript - 创建新应用程序“找不到模块 mongodb”后无法启动 towerjs 服务器

> ID：10260977
> 
> 赞同：3
> 
> 时间：2012-04-21T16:43:16.697
> 
> 标签：javascript, node.js, mongodb, coffeescript, towerjs

我是一个节点新手，刚刚开始玩它。因为在我想在节点上使用与 rails 相同的原则构建的框架之前，我已经使用了相当多的 rails。Tower.js 似乎很符合要求，所以我安装了它并创建了一个新应用程序，就像使用 rails 一样。当我尝试运行服务器时，出现以下错误

```
$ tower server -e development
node.js:201
    throw e; // process.nextTick error, or 'error' event on first tick
          ^
Error: Cannot find module 'mongodb'
    at Function._resolveFilename (module.js:334:11)
    at Function._load (module.js:279:25)
    at Module.require (module.js:357:17)
    at require (module.js:368:17)
    at Function.lib (/usr/local/lib/node_modules/tower/lib/tower/server/store/mongodb/configuration.js:36:14)
    at Function.initialize (/usr/local/lib/node_modules/tower/lib/tower/server/store/mongodb/database.js:28:22)
    at App.<anonymous> (/usr/local/lib/node_modules/tower/lib/tower/server/store/mongodb.js:46:30)
    at Callback.run (/usr/local/lib/node_modules/tower/lib/tower/support/callbacks.js:207:23)
    at /usr/local/lib/node_modules/tower/lib/tower/support/callbacks.js:117:23
    at /usr/local/lib/node_modules/tower/lib/tower/application/shared.js:164:14 
```

到目前为止，我已经尝试了以下方法，

*   启动节点控制台和 require('mongodb')。这行得通！
*   确保 mongo 已启动并且它在我的 databases.coffee 中定义的端口 27017 上运行
*   我可以使用命令运行应用程序`node server.js`

这是我拥有的 node、npm 和 tower 的版本，

*   节点 - v0.6.8
*   npm - 1.1.18
*   塔 - 0.4.0-10

# c# - 如何在AutoCAD绘图区域上显示实体而不添加到数据库？

> ID：10260978
> 
> 赞同：1
> 
> 时间：2012-04-21T16:43:21.700
> 
> 标签：c#, autocad

我想在绘图区域上显示实体作为用户的预览，然后如果用户接受程序，将实体添加到数据库或进行一些修改。

我习惯于使用事务并提交实体出现的事务，如果我可以让实体在提交事务之前出现

```
using (Transaction tr = db.TransactionManager.StartTransaction())
{
    BlockTable bt = tr.GetObject(db.BlockTableId, OpenMode.ForRead) as BlockTable;
    BlockTableRecord btr = tr.GetObject(bt[BlockTableRecord.ModelSpace], OpenMode.ForWrite) as BlockTableRecord;
    int i = poly2TxtSetting.currentFormat.IndexFormat.startWith;
    List<ObjectId> ListTextId = new List<ObjectId>();
    List<ObjectId> ListPointId = new List<ObjectId>();
    foreach (var po in Points)
    {
        i += poly2TxtSetting.currentFormat.IndexFormat.step;
        DBText dtext = new DBText();
        dtext.TextString = i.tostring();
        dtext.Position = po;

        dtext.SetDatabaseDefaults();
        DBPoint point = new DBPoint(po);

        btr.AppendEntity(dtext);
        tr.AddNewlyCreatedDBObject(dtext, true);

        btr.AppendEntity(point);
        tr.AddNewlyCreatedDBObject(point, true);

    }
    tr.Commit();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T19:43:30.290

如果您想在 AutoCAD 模型空间中显示您的模型，您有两个选择。

1）将其插入数据库。2) 将其添加到瞬态管理器中。

我认为你需要的是第二个选项。

搜索瞬态图形。

检查下面的代码，这将对您有所帮助。

```
Solid3d solid=new Solid(0);
solid.CreateSphere(10);
TransientManager.CurrentTransientManager.AddTransient(solid, TransientDrawingMode.Main, 128, new IntegerCollection()); 
```

这将在半径=10 的原点上显示球体；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T00:46:03.163

您可以等待图形刷新：

```
 tr.TransactionManager.QueueForGraphicsFlush(); 
```

然后提示输入，以便用户有时间查看更新：

```
PromptKeywordOptions pko = new PromptKeywordOptions("\nKeep Changes?");
pko.AllowNone = true;
pko.Keywords.Add("Y");
pko.Keywords.Add("N");
pko.Keywords.Default = "Y";

PromptResult pkr = ed.GetKeywords(pko);
if (pkr.StringResult == "Y") {
    tr.Commit();
} else {
    tr.Abort();
} 
```

此[链接](http://through-the-interface.typepad.com/through_the_interface/transactions/)提供了使用此技术的示例应用程序。

# android - 从另一个应用程序控制一个应用程序

> ID：10260979
> 
> 赞同：3
> 
> 时间：2012-04-21T16:43:32.643
> 
> 标签：android, android-intent

我阅读[了这个问题](https://stackoverflow.com/questions/3872063/android-launch-an-application-from-another-application)和[另一个问题](https://stackoverflow.com/questions/5281910/starting-one-android-app-from-another-app)，我了解如何从另一个应用程序启动一个应用程序（让我们称之为另一个应用程序*LauncherApplication*）。然而，我的目标不仅仅是启动一个应用程序，而是使用它的功能，所以我认为*LauncherApplication*应该使用一个意图（显式或隐式）启动一个活动。

我应该知道已安装的应用程序所响应的数据和操作，并且我应该在启动意图实例之前将这些信息添加到意图实例中。我希望*LauncherApplication*允许用户（而不是开发人员）配置此意图，但我如何提前知道为已安装应用程序设置意图的参数？

我应该实现“LauncherApplication* 以允许用户通过图形界面构建一个意图。或者我可以让我的应用程序支持插件的添加：通过这种方式，我可以为每个已安装的应用程序创建一个插件，其中每个插件可以负责管理有关与其关联的应用程序的意图配置。

**更新（添加详细信息）。**特别是，*LauncherApplication*应该是启用了语音识别器的服务，因此用户可以启动应用程序并说出特定的关键字：除了启动应用程序之外，用户还应该能够关闭它并使用它的功能。

例如，我可以安装一个应用程序（（我们称之为*LibraryApp*）来搜索图书馆中的可用书籍；这个应用程序可以具有以下功能：

1.  搜索一本书（如果该书可用、已被借出或已被其他人预订，此功能可能会返回）。
2.  预订一本书（此函数应返回预订完成）。

这样，例如，当我发音“start LibraryApp”时，*LauncherApplication*服务应该启动*LibraryApp*应用程序。启动应用程序后，服务应该能够向其发送命令以使用其中一个可用功能（搜索书籍、预订书籍）。

如何向已经处于活动状态的应用程序发送命令以对其进行控制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T17:01:12.377

> 我如何提前知道要为已安装的应用程序设置意图的参数？

您与他们的开发人员交谈。启动应用程序的启动器活动（或多个活动）的“参数”通常为零`Intent`，因为主屏幕不会将此类“参数”放在`Intent`.

# android - 安卓收音机输出

> ID：10260980
> 
> 赞同：1
> 
> 时间：2012-04-21T16:43:52.643
> 
> 标签：android, debugging, radio

有什么办法可以解决手机和手机信号塔之间的对话吗？

ADB 会显示手机在信号等方面所做的某些事情，尽管能够看到手机之间的谈判和完整的聊天然后能够操纵这些日志会很棒。

我知道在 telit 模块上，您可以调试无线电层 chatter 的完整输出，但能够通过 Android SDK 进行调试将是一个更清洁的解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-08T10:45:18.183

您可以`logcat`在 adb shell 中使用来查看无线电和蜂窝网络之间的通信以及无线电和操作系统之间的通信。输入`adb logcat -b radio > filename.txt`adb shell。它为无线电日志分配一个单独的缓冲区。查看[http://developer.android.com/tools/help/logcat.html](http://developer.android.com/tools/help/logcat.html)了解更多详情。

# c++ - 什么是使用指针变量？

> ID：10260981
> 
> 赞同：1
> 
> 时间：2012-04-21T16:44:00.660
> 
> 标签：c++, pointers, reference

我最近尝试真正掌握 C++ 中的引用和指针，但我有点困惑。我理解`*`and`&`运算符可以分别获取地址中的值并获取值的地址，但是为什么不能将它们简单地用于像`int`s 这样的基本类型？

我不明白为什么你不能，例如，做如下的事情，而不是使用任何奇怪的指针变量创建：

```
string x = "Hello";
int y = &x; //Set 'y' to the memory address of 'x'
cout << *y; //Output the value at the address 'y' (which is the memory address of 'x') 
```

理论上，我认为上面的代码应该输出“x”的值。'y' 包含'x' 的内存地址，因此'*y' 应该是'x'。如果这可行（顺便说一下，在尝试编译它时，它不会——它告诉我它不能从字符串转换为 int，这没有多大意义，因为你认为内存地址可能是存储在一个 int 罚款）。

为什么我们需要使用特殊的指针变量声明（例如`string *y = &x`）？在这里面，如果我们`*`在上面的示例中按字面意思在指针声明中使用运算符，我们将'y'的值设置为'x'的内存地址，但是稍后当我们想要访问该值时在内存地址 ('&x')，我们可以使用我们之前设置为内存地址的相同的 '*y'。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T16:52:22.903

C 和 C++ 在编译时解析类型信息，而不是运行时。甚至运行时多态性也依赖于编译器构建一个函数指针表，其中偏移量在编译时固定。

出于这个原因，程序可以知道`cout << *y;`正在打印字符串的唯一方法是因为`y`它被强类型化为指向字符串的指针 ( `std::string*`)。程序不能仅从地址确定存储在地址处的对象`y`是`std::string`. （即使 C++ RTTI 也不允许这样做，您需要足够的类型信息来识别多态基类。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T16:48:40.737

简而言之，C 是一种类型化语言。您不能将任意内容存储在变量中。

检查维基百科上的[类型安全](http://en.wikipedia.org/wiki/Type_safety)文章。C/C++ 通过检查操作数和函数参数的类型来防止在编译时出现问题的操作和函数调用（但请注意，使用显式转换可以更改表达式的类型）。

将字符串存储在整数中是没有意义的 -> 就像在其中存储指针没有意义一样。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-21T16:53:28.457

简单来说，一个内存地址有一个类型，就是指针。指针不是整数，因此您不能将指针存储在 int 变量中。如果您好奇为什么整数和指针不可替代，那是因为每个整数的大小都是由实现定义的（有一定的限制），并且不能保证它们的大小相同。

例如，正如@Damien_The_Unbeliever 指出的那样，64 位系统上的指针必须是 64 位长，但 int 是 32 位是完全合法的，只要它不长于长且不短于一个简短的。

至于为什么每种数据类型都有自己的指针类型，那是因为每种类型（尤其是用户定义的类型）在内存中的结构不同。如果我们要取消引用无类型（或`void`）指针，将没有信息表明应该如何解释该数据。另一方面，如果您要创建一个通用指针并消除指定类型的“不便”，那么内存中的每个实体可能都必须与其类型信息一起存储。虽然这是可行的，但它远非高效，而效率是 C++ 的设计目标。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-21T17:01:06.253

C++是一种强类型语言，指针和整数是不同的类型。通过制作这些单独的类型，编译器能够检测到误用并告诉您您所做的事情是不正确的。

同时，指针类型维护了指向对象类型的信息，如果你获得了 double 的地址，你必须将它存储在 a`double*`中，编译器知道取消引用该指针你会得到 a `double`。在您的示例代码中，`int y = &x; cout << *y;`编译器会丢失`y` *指向*的信息，表达式的类型`*y`将是未知的，并且无法确定`operator<<`要调用的不同重载中的哪一个。将其与`std::string *y = &x;`编译器看到的地方进行比较，`y`它知道它是 a`std::string*`并且知道取消引用它会得到 a `std::string`（而不是 double 或任何其他类型），从而使编译器能够静态检查包含`y`.

最后，虽然您*认为*指针只是对象的地址并且应该可以用整数类型表示（在 64 位体系结构上必须是`int64`而不是`int`），但情况并非总是如此。在不同的体系结构上，指针不能真正用整数值表示。例如，在具有分段内存的体系结构中，对象的地址可以包含一个段（整数值）和该段的偏移量（另一个整数值）。在其他架构上，指针的大小不同于任何整数类型的大小。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-21T17:22:34.970

一些非常低级的语言……例如机器语言……完全按照您的描述运行。一个数字就是一个数字，程序员可以在脑海中记住它所代表的含义。一般来说，高级语言的希望是让您远离这种开发风格带来的担忧和潜在的错误。

您实际上可以无视 C++ 的类型安全，但后果自负。例如，我拥有的 32 位机器上的 gcc 将在我运行此命令时打印“Hello”：

```
string x = "Hello";
int y = reinterpret_cast<int>(&x);
cout << *reinterpret_cast<string*>(y) << endl; 
```

但正如几乎所有其他回答者所指出的那样，不能保证它可以在另一台计算机上运行。如果我在 64 位机器上尝试这个，我会得到：

> 错误：从 'std::string*' 转换为 'int' 失去精度

我可以通过将其更改为`long`：

```
string x = "Hello";
long y = reinterpret_cast<long>(&x);
cout << *reinterpret_cast<string*>(y) << endl; 
```

C++ 标准为这些类型指定了最小值，但没有指定最大值，所以当你面对一个新的编译器时，你真的不知道你将要处理什么。请参阅：[C++ 标准规定 int、long 类型的大小是多少？](https://stackoverflow.com/questions/589575/size-of-int-long-etc)

因此，一旦你开始走这条路并“抛弃”语言中的安全性，编写不可移植代码的可能性就很高。 `reinterpret_cast`是最危险的铸造类型...

[什么时候应该使用 static_cast、dynamic_cast、const_cast 和 reinterpret_cast？](https://stackoverflow.com/questions/332030/when-should-static-cast-dynamic-cast-and-reinterpret-cast-be-used)

但这只是从技术上深入研究“为什么不 int”部分，以防您感兴趣。请注意，正如@BenVoight 在下面的评论中指出的那样，从 C99 开始确实存在一种称为[intptr_t](https://stackoverflow.com/questions/4574745/is-it-safe-to-assume-that-a-pointer-is-the-size-of-an-int-in-c)的整数类型，它保证可以保存任何指针。因此，与丢失精度相比，丢弃类型信息时会出现更大的问题……比如不小心转换回错误的类型！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-21T16:57:10.543

该语言试图保护您避免混淆两个不同的概念——即使在硬件级别它们都只是一组位；

除了需要在调试器的各个部分之间手动传递值之外，您永远不需要知道数值。

在数组的古老用途之外，将 10 加到指针上是没有意义的 - 所以你不应该将它们视为数值。

通过编译器*保留*类型信息，它还可以防止您犯错误 - 如果所有指针都相等，那么编译器将无法指出您试图取消引用的`int`内容是指向 a 的指针`string`。

# sql - 带有 JOIN、SUM 和 GROUP BY 的 SQL SELECT 查询

> ID：10260984
> 
> 赞同：2
> 
> 时间：2012-04-21T16:44:36.270
> 
> 标签：sql, ms-access

我在 MS Access 数据库中有 5 个表：tblMember、tblPoint、tblRace、tblRaceType 和 tblResult。（所有这些都有主键。） tblPoint 包含（RaceTypeID、Position、Points）字段。

我想做的是查看成员参加的所有比赛，看看他们来的位置（存储在 tblResult 中），看看这些位置是否得分（定义在 tblPoint 中）。然后，我想将每个成员的所有分数相加并显示这些分数，以及我的查询中的成员名称......

这可能吗？我在下面的这个 SQL 查询中想出了我最好的方法：

```
SELECT Sum(tblPoint.Points) AS SumOfPoints, Count(tblRace.RaceID) AS CountOfRaceID,     
tblMember.MemberName, tblPoint.Points
FROM ((tblRaceType INNER JOIN tblPoint ON tblRaceType.RaceTypeID = tblPoint.RaceTypeID)    
INNER JOIN tblRace ON tblRaceType.RaceTypeID = tblRace.RaceTypeID) INNER JOIN   
(tblMember INNER JOIN tblResult ON tblMember.MemberID = tblResult.MemberID) ON    
tblRace.RaceID = tblResult.RaceID
GROUP BY tblMember.MemberName, tblPoint.Points
ORDER BY tblPoint.Points DESC; 
```

有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T16:59:29.000

我会说这个

```
GROUP BY tblMember.MemberName, tblPoint.Points
ORDER BY tblPoint.Points DESC; 
```

可能应该更像这样：

```
GROUP BY tblMember.MemberName
ORDER BY Sum(tblPoint.Points) DESC; 
```

`tblPoint.Points`此外，在您的选择结束时删除。这只是一个单点值，你想要总和。

按点分组意味着您将获得每个成员的一行和他们得分的点值 - 可能不是您想要的。

# javascript - Javascript 文件不显示在 Firebug 中

> ID：10260987
> 
> 赞同：0
> 
> 时间：2012-04-21T16:44:46.090
> 
> 标签：javascript, firebug

我目前正在研究一个简单的 javascript 模块系统（类似于 node.js 模块系统或 requireJS）。

要加载模块所需的 javascript 文件，我使用 mootools 请求对象：

```
var request = new Request({
    url: <url to javascript file>,
    method: 'get',
    onSuccess: function(jsFileContent) {
        var func = new Function(jsFileContent);
        var result = func();
        // ...
    }
}).send(); 
```

到目前为止，该代码工作正常。我的问题是，以这种方式加载的 javascript 文件不会出现在 Firebug 中。因此这些文件的调试变得很困难，因为无法使用断点等 Firebug 功能。

有什么办法可以使这个与 Firebug 一起工作吗？或者有没有其他方法可以从 javascript 加载其他适用于 Firebug 的 javascript 文件？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T16:46:31.177

我认为轻松做到这一点的唯一方法是添加一个脚本标签......我建议编写一个检查全局调试标志的包装器......如果调试标志在它上面，则通过脚本标签插入一个脚本如果它关闭它插入它通过 ajax

# java - 无法获取 Windows ProductId 密钥，但可以获取 ProductName 密钥

> ID：10260992
> 
> 赞同：1
> 
> 时间：2012-04-21T16:45:49.927
> 
> 标签：java, windows, eclipse, registry

我正在尝试从中获取 Windows `ProductId`，`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion`但它返回`null`，但`ProductName`确实返回了正确的值。我在想 Windows 有某种保护，或者它不是以管理员身份运行的？

如果是后者，有人可以告诉我如何在 Java 中以管理权限运行我的应用程序吗？

我不需要“使用此程序获取密钥”之类的建议，请回答我的问题。

提前致谢，

瑞克。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-23T09:16:33.530

出于某些安全原因，您不能使用 Jar 来执行此操作。

即使您使用 Jar 在 VBS 中启动另一个脚本，您的 VBS 脚本也没有足够的系统权限来读取 Windows 注册表二进制键。

# python - psycopg2 共享内存不足和增加 max_pred_locks_per_transaction 的提示

> ID：10260994
> 
> 赞同：4
> 
> 时间：2012-04-21T16:45:52.993
> 
> 标签：python, postgresql, isolation-level, postgresql-9.1

在向 postgresql 9.1 中插入大量数据时。使用 Python 脚本，我们在此查询中收到以下错误：

```
X：/home/hosting/apps/X 中的 psycopg2.ProgrammingError
X_psycopg.py:162 在：执行“执行”（
                        选择 * 从 xml_fifo.fifo
                        WHERE type_id IN (1,2)
                        按 type_id 排序，时间戳限制 10
                        ): 共享内存不足
提示：您可能需要增加 max_pred_locks_per_transaction

```

我们增加了这个数字，但我们仍然得到了共享内存不足（max_pred_locks_per_transaction = 192）。每次我们再次启动脚本时，它都会运行一段时间，然后给出此错误消息。在 Postgres 8.1 上我们没有这个问题。

这是一段 postgresql 日志文件：

```
2012-06-28 02:55:43 CEST 提示：对反斜杠使用转义字符串语法，例如 E'\\'。
2012-06-28 02:55:43 CEST 警告：在字符 271 的字符串文字中非标准使用 \\
2012-06-28 02:55:43 CEST 提示：对反斜杠使用转义字符串语法，例如 E'\\'。
2012-06-28 02:55:43 CEST 警告：在字符 271 的字符串文字中非标准使用 \\
2012-06-28 02:55:43 CEST 提示：对反斜杠使用转义字符串语法，例如 E'\\'。
2012-06-28 02:56:11 CEST 警告：已经有交易正在进行中
2012-06-28 02:57:01 CEST 警告：已经有交易正在进行中
2012-06-28 02:57:01 CEST 错误：共享内存不足
2012-06-28 02:57:01 CEST 提示：您可能需要增加 max_pred_locks_per_transaction。
2012-06-28 02:57:01 CEST 声明：
                                选择 * 从 xml_fifo.fifo
                                WHERE type_id IN (1,2)
                                ORDER BY type_id ASC，时间戳限制 10

2012-06-28 02:57:01 CEST 错误：共享内存不足
2012-06-28 02:57:01 CEST 提示：您可能需要增加 max_pred_locks_per_transaction。
2012-06-28 02:57:01 CEST 声明：
                                选择 * 从 xml_fifo.fifo
                                WHERE type_id IN (1,2)
                                ORDER BY type_id ASC，时间戳限制 10

```

会有什么问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-21T23:58:42.930

PostgreSQL`SERIALIZABLE`在 9.1 版本中为事务添加了新功能，以避免以前在该隔离级别可能出现的一些序列化异常。您看到的错误只有在使用这些新的可序列化事务时才有可能。在 9.1 中使用可序列化事务时，某些工作负载遇到了您描述的问题。

一种解决方案是使用`REPEATABLE READ`事务隔离级别而不是 SERIALIZABLE。这将为您提供与 9.1 之前的 PostgreSQL 版本中 SERIALIZABLE 事务完全相同的行为。在决定这样做之前，您可能需要阅读差异，以便您知道是否值得重新配置您的环境以避免在 SERIALIZABLE 隔离级别出现问题：

[http://www.postgresql.org/docs/9.1/interactive/transaction-iso.html](http://www.postgresql.org/docs/9.1/interactive/transaction-iso.html)

[http://wiki.postgresql.org/wiki/SSI](http://wiki.postgresql.org/wiki/SSI)

如果增加 max_pred_locks_per_transaction 不能解决它（并且您可以尝试显着提高而不消耗太多 RAM），您可以尝试增加 max_connections（不增加实际使用的连接数）。

我与麻省理工学院的 Dan RK Ports 一起研究了 9.1 的 Serializable Snapshot Isolation 功能。这个问题的原因是在这个初始版本中，将多个细粒度谓词锁组合成一个粗粒度锁的启发式方法非常简单。我确信它可以改进，但是你可以给我的任何关于它遇到这个问题的情况的信息对于设计一个更好的启发式都是有价值的。如果您能告诉我一些有关您正在使用的 CPU 数量、活动数据库连接的数量以及您遇到此问题的工作负载的信息，我将不胜感激。

感谢您提供任何信息，我对这个问题表示歉意。

# python - 可选参数 Python？

> ID：10260995
> 
> 赞同：3
> 
> 时间：2012-04-21T16:45:59.677
> 
> 标签：python, command-line-arguments, argparse

我需要创建一个名为 extractGenes.py 的程序

命令行参数需要取 2 OR 3 个参数：

1.  `-s`是一个可选参数或开关，表示用户想要拼接的基因序列（去除内含子）。用户不必提供这个（意味着他想要整个基因序列），但他确实提供了它，那么它必须是第一个参数

2.  输入文件（带有基因）

3.  输出文件（程序将在其中创建以存储 fasta 文件

该文件包含如下行：

```
NM_001003443 chr11 + 5925152 592608098 2 5925152,5925652, 5925404,5926898, 
```

但是，我不确定如何将`-s`可选参数包含到启动函数中。

所以我开始：

```
getGenes(-s, input, output):
fp = open(input, 'r')
wp = open(output, "w") 
```

但不确定如何包含`-s`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T16:51:14.867

这种情况很简单，可以直接使用[*sys.argv*](http://docs.python.org/library/sys.html#sys.argv)：

```
import sys

spliced = False
if '-s' in sys.argv:
    spliced = True
    sys.argv.remove('-s')
infile, outfile = sys.argv[1:] 
```

或者，您还可以使用更强大的工具，如[*argparse*](http://docs.python.org/library/argparse.html#module-argparse)和[*optparse*](http://docs.python.org/library/optparse.html#module-optparse)来生成命令行解析器：

```
import argparse

parser = argparse.ArgumentParser(description='Tool for extracting genes')
parser.add_argument('infile', help='source file with the genes')
parser.add_argument('outfile', help='outfile file in a FASTA format')
parser.add_argument('-s', '--spliced', action='store_true', help='remove introns')

if __name__ == '__main__':
    result = parser.parse_args('-s myin myout'.split())
    print vars(result) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T16:49:47.583

Argparse 是一个 python 库，它将为您处理可选参数。 [http://docs.python.org/library/argparse.html#module-argparse](http://docs.python.org/library/argparse.html#module-argparse)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T16:50:55.963

尝试这样的事情：

```
def getGenes(input, output, s=False):
    if s:
        ...
    else:
        ... 
```

如果输入 2 个参数，则 s 将为 False；获取基因（输入，输出）

如果您使用 3 个参数调用 getGenes()，则 s 将是第三个参数，因此在这种情况下，使用任何非 False 值调用它都会产生 else 子句。

# java - 发送图片 Android 应用程序

> ID：10260996
> 
> 赞同：0
> 
> 时间：2012-04-21T16:46:02.207
> 
> 标签：java, android, image, mms

发送任何图片在此代码中>>[这里](http://mobile.tutsplus.com/tutorials/android/android-sdk-sending-pictures-the-easy-way/)我们必须知道文件名，我怎样才能使此代码能够在不知道图片名称的情况下发送任何图片，例如当用户浏览图库然后选择随机图片然后按发送按钮时？

提前致谢

萨米亚

# cocoa - 可可——确定启动工具的目录？

> ID：10260998
> 
> 赞同：1
> 
> 时间：2012-04-21T16:46:16.487
> 
> 标签：cocoa, terminal, command-line-arguments

我有一个用 Cocoa 编写的命令行工具。我们称它为 processFile。因此，如果我在终端中输入命令 ./processFile foo，它会在与 processFile 的可执行文件相同的目录中查找名为 foo.html 的文件。如果它找到了，它会读取它并做一些事情来创建 fooProcessed.html。

现在我想修改我的工具，使其在启动它的目录中查找 foo.html。因此，如果我在当前目录 ~/documents/html 的终端中，并且 processFile 可执行文件在 usr/bin 中，我输入

```
processFile foo 
```

它将查找并处理文件 ~/documents/foo.html。

问题是我不知道如何获取调用该工具的目录。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T17:06:23.770

那是当前的工作目录。首先，任何仅使用文件名而不使用路径访问文件的尝试都将自动使用工作目录。所以，如果你简单地使用“foo”，附加“.html”，然后尝试打开文件，那将起作用。如果用户指定了一个相对路径，比如“subdir/foo”，那也可以。它将解析从当前工作目录开始的相对路径。

您还可以使用[getcwd()](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/man3/getwd.3.html)例程查询工作目录。