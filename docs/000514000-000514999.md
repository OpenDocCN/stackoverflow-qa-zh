# StackOverflow 问答 000514000-000514999

# php - 您如何解决在 php 中刷新时重新发送 http referrer 数据的问题？

> ID：514000
> 
> 赞同：0
> 
> 时间：2009-02-05T00:23:16.443
> 
> 标签：php, http, referrer

我的网站上有一个输入/输出比率命中计数系统。当用户被发送到我的网站时，我会抓取引荐来源网址，剥离域，查找域并 +1 到 hits_in。非常简单。我发现你是，如果用户刷新页面，引用者会重新发送到该站点，并将其计为另一个 +1。更糟糕的是，如果用户点击了网站上的某个链接，然后点击 BACK 回到原来的页面，就会重新发送referrer，它会被视为另一个+1。因此，如果一个外国网站给我发送了 1 个用户，他点击了一个视频链接，观看了视频，在他的浏览器中点击返回，然后执行了 3 次，这将被视为一个网站向我发送了 4 个用户，而实际上它只是1.

无论如何，我可以在不实际记录所有 IP 并在执行 +1 之前检查每个 IP 的访问时间的情况下阻止这两个示例的发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-05T00:30:08.130

我不是这方面的专家，但你不能只使用会话。临时将引用的 url 存储到会话中，因此如果用户点击返回而不是检查用户会话是否包含引用站点。如果它包含不计算。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-05T00:33:04.583

做类似的事情，

如果用户没有`'referer_logged'`设置 cookie，请记录他们的引荐来源并设置 cookie。

这将使其每个用户仅记录一个引用者。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-05T00:38:47.800

这是我有时使用的引用脚本。

把它放在你的函数文件中。

```
function referer()
{
    if(isset($_SERVER["HTTP_REFERER"]) && substr($_SERVER["HTTP_REFERER"], 0, 22) != "http://www.example.com" && substr($_SERVER["HTTP_REFERER"], 0, 18) != "http://example.com")
    {
        $result = sprintf("INSERT INTO referer (referer, ip, date) VALUES ('%s', '%s', '%d')", mysql_real_escape_string($_SERVER["HTTP_REFERER"]), mysql_real_escape_string($_SERVER["REMOTE_ADDR"]), time());
        $query = mysql_query($result);

        if($query)
        {
            return true;
        }
        else 
        {
            return false;
        }
    }
} 
```

在你的索引文件的某个地方

```
session_start();
if(!isset($_SESSION["referer"]))
{
    if(referer())
    {
        $_SESSION["referer"] = 1;
    }
} 
```

# mysql - 什么可能导致自动增量主键字段（mysql）上的重复 ID？

> ID：514018
> 
> 赞同：0
> 
> 时间：2009-02-05T00:32:35.443
> 
> 标签：mysql, insert, lastinsertid

**解决**

来自开发人员：问题是以前版本的代码仍在写入使用手动 ID 而不是自动增量的表。自我注意：始终检查表写入的其他可能位置。

我们在表中得到重复的键。它们不是同时插入的（相隔 6 小时）。

表结构：

```
CREATE TABLE `table_1` (
  `sales_id` int(10) unsigned NOT NULL auto_increment,
  `sales_revisions_id` int(10) unsigned NOT NULL default '0',
  `sales_name` varchar(50) default NULL,
  `recycle_id` int(10) unsigned default NULL,
  PRIMARY KEY  (`sales_id`),
  KEY `sales_revisions_id` (`sales_revisions_id`),
  KEY `sales_id` (`sales_id`),
  KEY `recycle_id` (`recycle_id`)
) ENGINE= MyISAM DEFAULT CHARSET=latin1 AUTO_INCREMENT=26759 ; 
```

插入：

```
insert into `table_1` ( `sales_name` ) VALUES ( "Blah Blah" ) 
```

我们使用 PHP5 运行 MySQL 5.0.20，并使用 mysql_insert_id() 在插入查询后立即检索插入 ID。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-05T04:34:36.063

过去我在 MySql 数据库中突然出现了一些重复键错误，即使定义了主键和 auto_increment。每次都是因为表已损坏。

如果它已损坏，则执行检查表应该会暴露问题。您可以通过运行：

```
CHECK TABLE tbl_name 
```

如果它无论如何都以损坏的形式返回（通常会说大小比实际应该大），那么只需运行以下命令来修复它：

```
REPAIR TABLE tbl_name 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-05T00:37:54.463

sales_id 字段是否有主键（或唯一键）？如果不是，那么其他东西可能正在重新使用现有数字进行插入或更新。我所说的“其他东西”不仅仅是指代码。它可能是一个可以访问数据库的人意外地这样做。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-05T03:15:41.930

正如另一个所说；以你的例子是不可能的。

它与您的问题无关，但您不必为主键列创建单独的 KEY - 当您已经拥有唯一（主）键时，它只是向表添加一个额外的非唯一索引。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-05T04:22:43.043

> 我们在表中得到重复的键。

您的意思是您在尝试插入时遇到错误，还是您的某些值多次存储在列中？

仅当您从 INSERT 中省略列或尝试插入 NULL 或零时，自动增量才会生效。否则，您可以在 INSERT 语句中指定一个值，覆盖自动增量机制。例如：

```
INSERT INTO table_1 (sales_id) VALUES (26759); 
```

如果您指定的值已存在于表中，您将收到错误消息。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-05T04:35:12.927

请发布此查询的结果：

```
SELECT `sales_id`, COUNT(*) AS `num`
FROM `table_1`
GROUP BY `sales_id`
HAVING `num` > 1
ORDER BY `num` DESC 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-05T01:53:34.437

*   如果您在其他字段上有唯一键，那可能就是问题所在。

*   如果您的 auto_increment 列的值已达到最大值，MySQL 将继续尝试重新插入它。例如，如果 sales_id 是一个 tinyint 列，则在您达到 id 127 后会出现重复键错误。

# rad - 你能多快完成一个演示？

> ID：514019
> 
> 赞同：-1
> 
> 时间：2009-02-05T00:32:54.257
> 
> 标签：rad, demo

* * *

编辑：

**说真的**，这个问题有什么问题？如果有人说服我，我会自己把它拿下来。

* * *

不管库、工具、骨架应用程序是什么......你能多快组合一个 Demo？

昨晚我评论了“那里有哪些 RAD 工具？” （[有哪些 RAD 工具？](https://stackoverflow.com/questions/510664/what-rad-tools-are-out-there/511965#511965)）。

两个小时后，我完成了这项工作， http: [//125.214.67.190](http://125.214.67.190:5824/) :5824/ 。

这不是一个吹牛的会议。我真的很想知道其他开发人员使用其他工具将演示放在一起的速度有多快。

* * *

编辑：

这是非常简单的数据库，重要的文件：

[http://www.gliffy.com/pubdoc/1597851/M.jpg](http://www.gliffy.com/pubdoc/1597851/M.jpg)。

这几乎太简单了霍根。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-05T00:52:13.750

好吧，你的例子在美学上不是很讨人喜欢。所以我没有费心看它很长时间。

为什么？因为如果你要做演示，做一些*有趣*的事情。你必须引起人们的注意。因此，与其给我一个面向数据库的网页，不如给我一个我可以投入其中的用例。

这就是为什么能够快速制作演示本身并没有那么有用（IMO）。应用程序的难点不是想法的执行，而是想法本身和对它的改进，这是长杆。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-05T00:42:06.313

Borland C++ Builder 或 Borland Delphi

Borland 工具中的 rad 工具非常广泛且易于学习和使用。

我会说与熟悉这些工具的人在一起几个小时不会有问题。

我还建议任何有价值的 rad 工具都应该在几个小时内完成这项工作，它只是一个演示！

当我在做的时候，小心你的演示看起来有多好，总是留下一些缺失或不合适的东西。对于大多数用户来说，一个好看的演示意味着程序已经完成了 80%！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-05T00:41:23.910

这取决于演示的种类和大小。如果它与工作有关并且我的老板在我的脖子后面呼吸，那么通常大约一周，否则大约一个月。

# wpf - 如何从选项卡控件上的页面上的控件中获取数据

> ID：514022
> 
> 赞同：0
> 
> 时间：2009-02-05T00:33:55.313
> 
> 标签：wpf, tabcontrol

我有一个 WPF 选项卡控件，其中包含几个重复的控件作为选项卡页内容

```
<TabControl ItemsSource="{Binding}" Name="tabControl">
    <TabControl.ItemTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding Name}"/>
        </DataTemplate>
    </TabControl.ItemTemplate>
    <TabControl.ContentTemplate>
        <DataTemplate>
            <local:InnerDataEntryControl DataContext="{Binding Data}"/> 
        </DataTemplate>
    </TabControl.ContentTemplate>
</TabControl> 
```

InnerDataEntry 控件上有一个列表框。我在外部表单上有一个命令，需要从控件的列表框中选择项目。我不知道如何访问选项卡控件本身的列表框。当我尝试查询所选项目时，我得到的是绑定项目而不是列表框本身。

我不想在我的列表项上使用“IsSelected”属性污染业务层，我想我可以在必要时创建一个视图模型，但我无法获得有关实际内容控制的信息似乎是错误的的一个标签页。

我希望我只是遗漏了一些明显的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2010-07-12T20:12:58.310

这在我的 WPF 体验中早些时候被问到过。为了结束这个问题的循环，我将发布一个指向[MSDN 杂志](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)关于 MVVM 主题的条目的链接。

最终，解决方案涉及创建一个视图模型，该模型具有绑定到选项卡控件部分的必要属性，这样视图模型就不需要以我所描述的方式进行访问。相反，视图模型直接作用于绑定的数据，而无需直接引用视图。

# asp.net-mvc - ASPNET MVC 中的模型绑定数据库实体

> ID：514023
> 
> 赞同：5
> 
> 时间：2009-02-05T00:34:10.493
> 
> 标签：asp.net-mvc, nhibernate, model-view-controller, modelbinders

我很难想出最好的方法是在控制器操作中重新创建数据库对象。

我想使用 ModelBinders，因此在我的操作中，我可以通过参数访问对象，而不必重复代码以根据标识符参数从数据库中获取对象。所以我正在考虑有一个 ModelBinder 执行对数据访问层的调用以获取原始对象（或者如果它在数据库中不存在则创建一个新对象），然后将任何属性绑定到数据库对象以更新它。但是我读到 ModelBinders 不应该进行数据库查询（[本文](http://www.singingeels.com/Articles/Model_Binders_in_ASPNET_MVC.aspx)的第一条评论）。

如果 ModelBinder 不应该执行数据库查询（所以只使用 DefaultModelBinder），那么具有其他 db 对象属性的数据库对象呢？这些永远不会被分配。

在用户编辑对象后保存对象（视图中可编辑 1 或 2 个属性）ModelBinded 对象将丢失数据，因此按原样保存会导致数据库中的数据被无效值覆盖，或者不是 - NULL 约束失败。

那么，从与从视图回发的表单数据绑定的数据库中获取控制器操作中的对象的最佳方法是什么？

注意我使用 NHibernate。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-05T00:45:34.980

我从数据库中获取模型对象，然后在对象上使用 UpdateModel（或 TryUpdateModel）来更新表单参数中的值。

```
public ActionResult Update( int id )
{
     DataContext dc = new DataContext();
     MyModel model = dc.MyModels.Where( m => m.ID == id ).SingleOrDefault();

     string[] whitelist = new string[] { "Name", "Property1", "Property2" };

     if (!TryUpdateModel( model, whitelist )) {
        ... model error handling...
        return View("Edit");
     }

     ViewData.Model = model;

     return View("Show");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-05T15:09:01.740

不幸的是，您无法控制模型绑定器的构建，因此您无法注入任何存储库实现。

您*可以*直接联系服务定位器以拉入您的存储库并获取项目：

```
public class ProductBinder : DefaultModelBinder
{
    protected override object CreateModel(ControllerContext controllerContext, 
        ModelBindingContext bindingContext, Type modelType)
    {
        if(modelType != typeof(Product))
            return null;

        var form = controllerContext.HttpContext.Request.Form;
        int id = Int32.Parse(form["Id"]);
        if(id == 0)
            return base.CreateModel(controllerContext, bindingContext, modelType);

        IProductRepository repository = ServiceLocator.Resolve<IProductRepository>();

        return repository.Fetch(id);                                    
    }       
} 
```

如果您可以使用提供类 ID 的基类或接口，您甚至可以使所有实体都使用此功能。

您必须在 Global.asax 中进行设置：

```
ModelBinders.Binders.Add(typeof(Product), new ProductBinder()); 
```

然后你可以这样做：

```
public ActionResult Save([Bind] Product product)
{
    ....

    _repository.Save(product);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-24T21:46:58.787

首先声明，我不建议从 ModelBinders 访问数据库，因为从关注点分离的角度来看，ModelBinders 应该只负责解释客户端请求，显然数据库不是。
如果您不想重复自己（DRY），请使用存储库/服务但是如果您真的想那样做，那么

在 global.asax.cs 中注册一个自定义 MyModelBinderProvider 到 MVC

```
ModelBinderProviders.BinderProviders.Add(new EntityModelBinderProvider 
{ 
     ConnectionString = "my connection string"
)); 
```

构造自定义 ModelBinderProvider 以包含数据库设置

```
public class EntityBinderProvider: IModelBinderProvider
{
    public string ConnectionString { get; set; }

    public IModelBinder GetBinder(Type modelType)
    {
        if (Is known entity)
            return new EntityBinder(ConnectionString);
        else
            return null;
    }
} 
```

遵循 Ben Scheirman 的进一步指示

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-02-06T13:53:28.803

您实际上不必访问数据库。简单地设置对象的 ID 就足以建立关系，但要注意你的级联。确保您的级联设置不会更新相关对象，因为它会清除值。

# python - 如何在 Python 中使用 [] 分割字符串

> ID：514029
> 
> 赞同：2
> 
> 时间：2009-02-05T00:37:27.617
> 
> 标签：python, string

所以从这个字符串：

“名称[id]”

我需要这个：

“ID”

我使用了 str.split('[]')，但它不起作用。它只需要一个分隔符吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-02-05T00:42:05.173

使用正则表达式：

```
import re 
s = "name[id]"
re.find(r"\[(.*?)\]", s).group(1) # = 'id' 
```

`str.split()`接受一个字符串来分割输入。例如：

```
"i,split,on commas".split(',') # = ['i', 'split', 'on commas'] 
```

该`re`模块还允许您通过正则表达式进行拆分，这*非常*有用，我认为这就是您要做的。

```
import re
s = "name[id]"

# split by either a '[' or a ']'
re.split('\[|\]', s) # = ['name', 'id', ''] 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-02-05T00:42:15.033

任何一个

```
"name[id]".split('[')[1][:-1] == "id" 
```

或者

```
"name[id]".split('[')[1].split(']')[0] == "id" 
```

或者

```
re.search(r'\[(.*?)\]',"name[id]").group(1) == "id" 
```

或者

```
re.split(r'[\[\]]',"name[id]")[1] == "id" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-05T00:43:43.110

是的，分隔符是传递给 split 的整个字符串参数。所以你的例子只会分割一个像'name [] id []'这样的字符串。

尝试例如。就像是：

```
'name[id]'.split('[', 1)[-1].split(']', 1)[0]

'name[id]'.split('[', 1)[-1].rstrip(']') 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-05T00:58:34.533

我不是正则表达式的粉丝，但在这种情况下，它通常会提供最佳解决方案。

Triptych 已经推荐了这个，但我想指出 ?P<> 组分配可用于将匹配项分配给字典键：

```
>>> m = re.match(r'.*\[(?P<id>\w+)\]', 'name[id]')
>>> result_dict = m.groupdict()
>>> result_dict
{'id': 'id'}
>>> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-05T01:10:52.557

您实际上不需要正则表达式。.index() 函数和字符串切片可以正常工作。

假设我们有：

```
>>> s = 'name[id]' 
```

然后：

```
>>> s[s.index('[')+1:s.index(']')]
'id' 
```

对我来说，这很容易阅读：“在 [ 之后开始一个字符，在 ] 之前结束”。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-02-05T02:37:45.750

```
def between_brackets(text):
    return text.partition('[')[2].partition(']')[0] 
```

即使您的字符串不包含构造，这也将起作用，并且在字符串中只有某处的情况下`[…]`，它假定最后是隐含的。`]``[`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-04-29T16:40:45.553

我是 python 新手，这是一个老问题，但也许这个？

`str.split('[')[1].strip(']')`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-08-11T16:17:50.823

您可以使用 [] 获取列表的值。例如，从 URL 中创建一个列表，如下所示。

```
>>> urls = 'http://quotes.toscrape.com/page/1/' 
```

这会生成一个类似下面的列表。

```
>>> print( urls.split("/") )
['http:', '', 'quotes.toscrape.com', 'page', '11', ''] 
```

如果您想从此列表中仅获得价值“http”怎么办？你可以这样使用

```
>>> print(urls.split("/")[0])
http: 
```

或者，如果您想从此列表中仅获得价值“1”怎么办？你可以这样使用

```
>>> print(urls.split("/")[-2])
1 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2009-02-05T00:43:14.157

str.split 使用整个参数来拆分字符串。尝试：

```
str.split("[")[1].split("]")[0] 
```

# asp.net - AntFarm 反模式——避免的策略，帮助治愈的解毒剂

> ID：514033
> 
> 赞同：5
> 
> 时间：2009-02-05T00:38:24.103
> 
> 标签：asp.net, design-patterns, oop, anti-patterns

我正在开发一个带有数据库后端的 10 页网站。有 500 多个对象在使用中，试图在 ASP.Net 中实现 MVP 模式。我正在从单页跟踪代码执行，我的手指已经在 Visual Studio 中的 F-11 上停留了大约 40 分钟，似乎没有尽头，一个网页可能有 1000 多个方法调用！然而，如果只有 50 个对象，那将是一回事，代码执行会蜿蜒穿过所有这些对象，就像数百万只蚂蚁在它们巨大的土堆房子里疯狂地工作，到处都是对象隧道。 **因此，一种新的反模式诞生了：AntFarm**。

*AntFarm*也被称为“OO-Madnes”、“OO-Fever”、OO-ADD 或简单的设计模式迷。

这不是我第一次看到这种情况，我在其他公司的同事也不是第一次看到。似乎这种风格正在被积极宣传，或者无论如何是对周围众多OO / DP福音的误解......

我想在反模式中引入一个反模式：GST 或“Get Stuff Done”AKA“Get Sh** done”AKA GRD (GetRDone)。这种模式专注于它所说的，以一种简单的方式完成工作。我可能会尝试在以后的帖子中对其进行更多概述，或者请分享您对这种解毒剂模式的想法。

无论如何，在我写作的时候，我正处于 AntFarm 反模式的一个很好的例子中（作为奖励，没有文档或评论）。请分享您对这种反模式如何变得如此流行的想法，我们如何避免它，以及如何在必须使用的实时系统中撤消或处理这种模式！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-02-05T01:06:39.693

我认为 Parnas 几乎将它钉在[On the Criteria to be used in Decomposing Systems into Modules](http://www.cs.umd.edu/class/spring2003/cmsc838p/Design/criteria.pdf)中。每个模块都应该隐藏一个设计决策，这个决策将来可能会改变。一般来说，没有什么可隐藏的模块通常只是开销。他并没有确切地谈论课程，但我认为推理仍然适用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-07-13T10:42:29.910

如果确实是由于过度设计（听起来很像），那么这里有一些同义词：

[煤气厂](http://en.wikipedia.org/wiki/Gas_factory)
鲁布戈德堡机器
希思罗宾逊装置

但我的个人名字是“努力尝试 F#$%3n”。节哀顺变。

干杯阿德里安

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-07-13T10:50:32.657

许多文件可以做。讨厌。10 个网页 500 个对象似乎是一个疯狂的比例。您是否考虑过对解决方案运行代码分析？可能会给你一些有趣的统计数据来反击。

我也将反反模式称为 KISS。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-05T18:59:20.823

感谢Glomek，这篇文章是针对一个有趣的问题空间，进入OO 的核心，即如何设计您的对象......对于成功或失败，感谢您的链接。

哦对了，反模式设计可以叫“蚁丘”，我觉得这样描述比较清楚。我确实相信它现在非常流行，并且似乎正在增长......我仍然想知道我们如何才能从总体上摆脱它，并编写更清晰、更简单的代码来完成工作所需的最小复杂性.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-04-07T15:48:38.997

这里的问题是您的设计模式本身是非面向对象的。从非 OO 模式开始，尝试将其实现为“对象”，最终会变得一团糟。

仅仅因为系统是用 OOPL 编写的，并不会使系统 OO。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-04-11T22:56:57.237

如果您认为蚂蚁农场是通过使用简单代理（蚂蚁）来探索复杂问题空间（蚂蚁农场）的有效方式，那么这看起来显然不那么反模式。

基于“把所有东西都装进你的脑袋”的复杂性对 OOP 的批评总是忽略（a）很难把所有东西都装进你的脑袋（不管它是否 OO）和（b）OO 积极地减少了无论如何都需要把这一切都放在你的脑海里

# python - 从函数返回多个值的优雅方法

> ID：514038
> 
> 赞同：27
> 
> 时间：2009-02-05T00:39:48.797
> 
> 标签：python, function, language-agnostic, language-design, syntactic-sugar

似乎在大多数主流编程语言中，**从一个函数返回多个值**是一件非常尴尬的事情。

典型的解决方案是创建一个**结构**或一个普通的旧数据**类**并返回它，或者通过引用或指针传递至少一些参数而不是返回它们。

使用引用/指针非常尴尬，因为它依赖于副作用并且意味着您还有另一个参数要传递。

恕我直言，类/结构解决方案也很尴尬，因为您最终会得到一百万个仅用于从函数返回值的小类/结构，从而产生不必要的混乱和冗长。

此外，很多时候总是需要一个返回值，其余的仅在某些情况下由调用者使用。这些解决方案都不允许调用者忽略不需要的返回类型。

我所知道的可以优雅地处理多个返回值的一种语言是 Python。对于那些不熟悉的人，它使用元组解包：

```
a, b = foo(c)  # a and b are regular variables.
myTuple = foo(c)  # myTuple is a tuple of (a, b) 
```

有没有人对这个问题有任何其他好的解决方案？欢迎使用除 Python 之外的现有主流语言和您在非主流语言中看到的语言级解决方案的两种习语。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-02-05T00:48:27.360

几乎所有受 ML 影响的函数式语言（其中大部分）也有很好的元组支持，这使得这类事情变得微不足道。

对于 C++，我喜欢 boost::tuple 加上 boost::tie （或者 std::tr1 如果你有的话）

```
typedef boost::tuple<double,double,double> XYZ;

XYZ foo();

double x,y,z;
boost::tie(x,y,z) = foo(); 
```

或者一个不那么做作的例子

```
MyMultimap::iterator lower,upper;
boost::tie(lower,upper) = some_map.equal_range(key); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-02-05T01:05:05.207

一些语言，尤其是 Lisp 和 JavaScript，具有称为解构赋值或解构绑定的特性。这本质上是类固醇上的元组解包：您可以在赋值语句中解包更复杂的对象结构，而不是仅限于像元组、列表或生成器这样的序列。有关更多详细信息，请参见[此处了解 Lisp 版本](http://www.ai.mit.edu/projects/iiip/doc/CommonLISP/HyperSpec/Body/mac_destructuring-bind.html)或[此处了解（更易读的）JavaScript 版本](https://developer.mozilla.org/en/New_in_JavaScript_1.7#Destructuring_assignment)。

除此之外，我不知道通常处理多个返回值的许多语言功能。但是，多个返回值有一些特定用途，通常可以被其他语言功能替换。例如，如果其中一个值是错误代码，则最好将其替换为异常。

虽然创建新类来保存多个返回值感觉很混乱，但将这些值一起返回的事实通常表明，一旦创建了类，您的代码总体上会更好。特别是，处理相同数据的其他函数可以移至新类，这可能使您的代码更易于遵循。这并非普遍正确，但值得考虑。（Cpeterso 关于数据块的回答更详细地表达了这一点）。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-02-05T02:31:32.987

PHP 示例：

```
function my_funct() {
    $x = "hello";
    $y = "world";
    return array($x, $y);
} 
```

然后，运行时：

```
list($x, $y) = my_funct();
echo $x.' '.$y; // "hello world" 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-02-05T00:57:53.910

如果一个函数返回多个值，这表明您可能正在目睹[“Data Clump”代码异味](http://www.martinfowler.com/bliki/DataClump.html)。通常，数据块是没有人认为会变成对象的原始值，但是当您开始寻找移动到新对象中的行为时，就会发生有趣的事情。

编写微小的帮助类可能需要额外的输入，但它提供了清晰的名称和强大的类型检查。维护您的代码的开发人员将不胜感激。有用的小类通常会在其他代码中使用。

此外，如果一个函数返回多个值，那么它可能会做太多的工作。函数可以重构为两个（或更多）小函数吗？

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-02-05T01:09:13.543

似乎还没有人提到 Perl。

```
sub myfunc {
  return 1, 2;
}
my($val1, $val2) = myfunc(); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-02-05T04:17:55.910

至于 Java，请参阅 Bruce Eckel 的[*Thinking in Java*](https://rads.stackoverflow.com/amzn/click/com/0131872486)以获得一个不错的解决方案（第 621 页）。

本质上，您可以定义一个等价于以下内容的类：

```
public class Pair<T,U> {
    public final T left;
    public final U right;
    public Pair (T t, U u) { left = t; right = u; }
} 
```

然后，您可以将其用作函数的返回类型，并带有适当的类型参数：

```
public Pair<String,Integer> getAnswer() {
    return new Pair<String,Integer>("the universe", 42);
} 
```

调用该函数后：

```
Pair<String,Integer> myPair = getAnswer(); 
```

您可以参考`myPair.left`和`myPair.right`访问组成值。

还有其他语法糖选项，但以上是重点。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-02-05T00:43:33.923

我认为python是最自然的方式，当我不得不在php中做同样的事情时，唯一的是将return包装到一个数组中。它确实有类似的拆包。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-02-05T04:02:06.970

即使你忽略了[Moss Collum 提到](https://stackoverflow.com/questions/514038/elegant-ways-to-return-multiple-values-from-a-function/514114#514114)的精彩的较新的解构赋值，JavaScript 在返回多个结果方面也相当不错。

```
function give7and5() {
  return {x:7,y:5};
}

a=give7and5();
console.log(a.x,a.y);

7  5 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-02-05T00:48:04.787

通常在 php 中我会使用一个引用的输入：

```
public function Validates(&$errors=array()) {
   if($failstest) {
      $errors[] = "It failed";
      return false;
   } else {
      return true;
   }
} 
```

这给了我想要的错误消息而不会污染 bool 返回，所以我仍然可以这样做：

```
if($this->Validates()) ... 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-02-05T05:16:39.440

Lua和 CLU（麻省理工学院 Barbara Liskov 的小组）对所有函数都有多个返回值——它始终是默认值[。](http://www.lua.org/)我相信 Lua 的设计师受到了 CLU 的启发。我喜欢将多个值作为调用和返回的默认值；我认为这是一种非常优雅的思考方式。在 Lua 和 CLU 中，这种机制完全独立于元组和/或记录。

可移植汇编语言[C--](http://www.cminusminus.org/)支持其本机调用约定的多个返回值，但不支持 C 调用约定。那里的想法是使编译器编写者能够在单个硬件寄存器中返回多个值，而不必将值放在内存中的一个块中并返回一个指向该块的指针（或者像在 C 中一样，让调用者将一个指针传递给一个空丛）。

像任何机制一样，可以滥用多个返回值，但我认为让函数返回多个值比让结构包含多个值更不合理。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-02-05T03:31:56.983

`C++`您可以将容器传递给函数，以便函数可以填充它：

```
void getValues(std::vector<int>* result){
  result->push_back(2);
  result->push_back(6);
  result->push_back(73);
} 
```

您还可以让函数将智能指针（使用`shared_ptr`）返回到 a `vector`：

```
boost::shared_ptr< std::vector<int> > getValues(){
  boost::shared_ptr< std::vector<int> > vec(new std::vector<int>(3));
  (*vec)[0] = 2;
  (*vec)[1] = 6;
  (*vec)[2] = 73;
  return vec; 
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2010-07-02T07:23:29.597

C＃

```
public struct tStruct
{
    int x;
    int y;
    string text;
    public tStruct(int nx, int ny, string stext)
    {
         this.x = nx;
         this.y = ny;
         this.text = stext;
    }
}

public tStruct YourFunction()
{
    return new tStruct(50, 100, "hello world");
}

public void YourPrintFunction(string sMessage)
{
    Console.WriteLine(sMessage);
} 
```

在 Lua 你打电话

```
MyVar = YourFunction();
YourPrintfFunction(MyVar.x);
YourPrintfFunction(MyVar.y);
YourPrintfFunction(MyVar.text); 
```

输出：50 100 hello world

保罗

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2011-02-02T00:39:36.680

顺便说一句，Scala 可以返回多个值，如下所示（从解释器会话中粘贴）：

```
scala> def return2 = (1,2)
return2: (Int, Int)

scala> val (a1,a2) = return2
a1: Int = 1
a2: Int = 2 
```

这是使用[模式匹配进行赋值](http://www.nearinfinity.com/blogs/bryan_weber/scala_pattern_matching.html)的一种特殊情况。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2012-04-04T20:03:10.147

这是我的 Ruby 想法，它返回一个看起来和行为都像标量但实际上具有隐藏属性的特殊值：

[https://gist.github.com/2305169](https://gist.github.com/2305169)

# reporting-services - 当没有行时将表的可见性设置为 false（在报告服务中）

> ID：514043
> 
> 赞同：48
> 
> 时间：2009-02-05T00:41:36.017
> 
> 标签：reporting-services, report, reportingservices-2005

**如果表没有行，有没有办法将表的可见性设置为 false？**

当它没有行时，我想在 Reporting Services 中隐藏一个表。

在这种情况下，将 NoRows 设置为**=""**是不够的，因为仍有空间留给表格，并且表格的某些格式仍然可见。

我正在使用 Microsoft Visual Studio / SQL Reporting Services 2005

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2009-02-05T00:59:28.197

尝试将表的“Visibility.Hidden”属性设置为此表达式：

```
=CountRows() = 0 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2009-02-05T00:59:46.573

我自己找到了答案，很简单。

我发现[这篇文章](http://www.ssw.com.au/Ssw/Standards/Rules/RulesToBetterSQLReportingServices.aspx)提到了 CountRows() 函数。

因此，将 Visibilty / Hidden 属性设置为在没有行时隐藏，很简单

```
= Iif (CountRows() > 0, false, true) 
```

# c# - 十进制 DbParameter 的精度问题

> ID：514044
> 
> 赞同：4
> 
> 时间：2009-02-05T00:41:49.807
> 
> 标签：c#, sql, ado.net, c#-3.0

在 c# 中，我对 Sql Server 存储过程使用十进制输出 DbParameter。我创建这样的参数

* * *

```
DbParameter prm = comm.CreateParameter();

prm.ParameterName = "@Price";

prm.DbType = DbType.Decimal;

prm.Direction = ParameterDirection.Output;

comm.Parameters.Add(prm);

//and set the value of comm.Parameters["@Price"] to a variable,

decimal.TryParse(comm.Parameters["@Price"].Value.ToString(), 
  out this.ProdPrice); 
```

* * *

但是 out 参数的值总是四舍五入的。

如果我从 Sql Server Management Studio 调用相同的存储过程，我可以准确地正确获取此参数

DbParameter 上没有精度或比例属性。而且我必须在 System.Data.Common 命名空间上使用 DbParameter 来获取数据

我如何能够以全精度检索十进制值

提前致谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-05T01:04:31.680

添加到 Marc 的建议中，您可以将代码更改为

`IDbDataParameter prm = comm.CreateParameter();`

其余代码应该可以正常工作。Precision 和 Scale 属性是 DbParameter 中的“显式接口实现”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-05T00:56:18.750

您是否尝试过设置[Precision](http://msdn.microsoft.com/en-us/library/bb357455.aspx)和[Scale](http://msdn.microsoft.com/en-us/library/bb346921.aspx)？请注意，您需要先进行投射。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-05T00:54:30.530

首先，您不需要解析字符串来获取 Decimal，您应该可以直接转换为它：

```
this.ProdPrice = (Decimal) comm.Parameters["@Price"].Value; 
```

话虽如此，@Price 参数的精度是多少？我相信 SQL Server 允许精度高达 35 位，而 Decimal 类只提供高达 28 位的精度，因此如果您的参数超过 28 位，您将无法阻止舍入。

# c - libsox 转换 wav 文件采样率等。

> ID：514061
> 
> 赞同：1
> 
> 时间：2009-02-05T00:45:02.327
> 
> 标签：c, audio

编辑：我想使用 libsox 以编程方式转换 wav 文件的采样率、音频格式、通道等。

在 libsox 手册页中，有很多我可以使用的功能，但我不知道该怎么做。谁能给我一些关于如何做的步骤？

帮助？

* * *

谁能解释一下？

```
 The  function  sox_write  writes  len samples from buf using the format
   handler specified by ft. Data in buf must be 32-bit signed samples  and
   will  be converted during the write process. The value of len is speci-
   fied in total samples. If its value is not evenly divisable by the num-
   ber of channels, undefined behavior will occur. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-10-18T23:28:33.503

我推荐 libsndfile 和 libsamplerate 的组合

[http://www.mega-nerd.com/SRC](http://www.mega-nerd.com/SRC)

> SRC 提供了一小组转换器，以允许在质量与计算成本之间进行权衡。当前最佳转换器提供 145dB 的信噪比和 -3dB 通带，从 DC 扩展到给定输入和输出采样率对的理论最佳带宽的 96%。

[http://www.mega-nerd.com/libsndfile/](http://www.mega-nerd.com/libsndfile/)

> *   能够读取和写入大量文件格式。
> *   一个简单、优雅且易于使用的应用程序编程接口。
> *   可用于 Unix、Win32、MacOS 等。
> *   动态格式转换，包括字节序交换、类型转换和位宽缩放。
> *   从包含整数数据的文件中读取浮点数据时的可选规范化。
> *   能够以读/写模式打开文件。
> *   无需关闭文件即可写入文件头的能力（仅适用于为写入或读取/写入而打开的文件）。
> *   能够在库中查询所有支持的格式并检索描述每种格式的文本字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-05T01:29:58.493

好吧，我猜你的问题与最后一句话有关。如果您有一个交错缓冲区，则缓冲区中的样本数必须可被通道数整除，因为这是您将写入的每个通道的样本数。例如，假设您有 L 和 R 通道；您的数据在缓冲区中将是这样的：

```
[0] 1st sample - L
[1] 1st sample - R
[2] 2nd sample - L
[3] 2nd sample - R
...
[n-1] n/2-th sample - L
[n] n-th sample - R 
```

希望能帮助到你。

# python - Python中的扩展方法

> ID：514068
> 
> 赞同：59
> 
> 时间：2009-02-05T00:47:37.830
> 
> 标签：python, function, extension-methods

Python 有没有像 C# 这样的扩展方法？是否可以调用如下方法：

```
MyRandomMethod() 
```

在现有类型上，例如`int`？

```
myInt.MyRandomMethod() 
```

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2009-02-05T00:59:31.207

您可以在 Python 代码中定义的类对象上添加您喜欢的任何方法（AKA 猴子补丁）：

```
>>> class A(object):
>>>     pass

>>> def stuff(self):
>>>     print self

>>> A.test = stuff
>>> A().test() 
```

这不适用于内置类型，因为它们`__dict__`不可写（它是 a `dictproxy`）。

所以不，Python 中没有“真正的”扩展方法机制。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-02-05T00:53:57.117

不确定这是否是您所要求的，但您可以扩展现有类型，然后在新事物上调用您喜欢的任何内容：

```
class  int(int):
     def random_method(self):
           return 4                     # guaranteed to be random
v = int(5)                              # you'll have to instantiate all you variables like this
v.random_method()

class int(int):
    def xkcd(self):
        import antigravity
        print(42)

>>>v.xkcd()
Traceback (most recent call last):
  File "<pyshell#81>", line 1, in <module>
    v.xkcd()
AttributeError: 'int' object has no attribute 'xkcd'
c = int(1)
>>> c.random_method()
4
>>> c.xkcd()
42 
```

希望能澄清你的问题

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-05-07T09:28:32.073

可以用禁果来完成（[https://pypi.python.org/pypi/forbiddenfruit](https://pypi.python.org/pypi/forbiddenfruit)）

安装禁果：

```
pip install forbiddenfruit 
```

然后你可以扩展内置类型：

```
>>> from forbiddenfruit import curse

>>> def percent(self, delta):
...     return self * (1 + delta / 100)

>>> curse(float, 'percent', percent)
>>> 1.0.percent(5)
1.05 
```

Forbidden Fruit 从根本上依赖于 C API，它只适用于 cpython 实现，不适用于其他 python 实现，例如 Jython、pypy 等。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-11-04T09:34:59.757

下面的[上下文管理器](https://docs.python.org/3/reference/datamodel.html#context-managers)添加了像禁果一样的方法，没有它的限制。除此之外，它还具有在之后删除扩展方法的额外好处：

```
class extension_method:

    def __init__(self, obj, method):
        method_name = method.__name__
        setattr(obj, method_name, method)
        self.obj = obj
        self.method_name = method_name

    def __enter__(self):
        return self.obj

    def __exit__(self, type, value, traceback):
        # remove this if you want to keep the extension method after context exit
        delattr(self.obj, self.method_name) 
```

用法如下：

```
class C:
    pass

def get_class_name(self):
    return self.__class__.__name__

with extension_method(C, get_class_name):
    assert hasattr(C, 'get_class_name') # the method is added to C
    c = C()
    print(c.get_class_name()) # prints 'C'

assert not hasattr(C, 'get_class_name') # the method is gone from C 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-02-05T17:59:17.217

我对这里描述的方法很幸运：

[http://mail.python.org/pipermail/python-dev/2008-January/076194.html](http://mail.python.org/pipermail/python-dev/2008-January/076194.html)

我不知道它是否适用于内置函数。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-02-05T01:14:45.763

另一种选择是覆盖元类。这使您可以指定所有类中应该存在的函数。

本文开始讨论它：

[http://www.onlamp.com/pub/a/python/2003/04/17/metaclasses.html](http://www.onlamp.com/pub/a/python/2003/04/17/metaclasses.html)

# user-interface - 为什么好的 UI 设计对一些开发人员来说如此困难？

> ID：514083
> 
> 赞同：206
> 
> 时间：2009-02-05T00:54:16.303
> 
> 标签：user-interface

我们中的一些人只是在 UI 设计的软方面遇到了困难（*尤其是我自己*）。“后端编码员”是否注定只设计业务逻辑和数据层？我们可以做些什么来**重新训练我们的大脑**，使其更有效地设计令人愉悦和有用的表示层？

同事向我推荐了几本书，包括*《网站设计》*、*《别让我思考*》和*《为什么软件很烂*》，但我想知道其他人做了什么来消除他们在这方面的不足？

* * *

## 回答 #1

> 赞同：359
> 
> 时间：2009-02-05T14:42:35.350

让我直接说：

**改进这一点并不是从指导方针开始的。首先是重新定义您对软件的看法。**

大多数铁杆开发人员对其软件的用户几乎**没有**同理心。他们**不知道**用户的想法，用户如何构建他们使用的软件模型以及他们如何使用计算机。

专家与外行发生冲突是一个典型的问题：一个正常人怎么会**傻到**不理解专家十年前的理解？

对于几乎所有有经验的开发人员来说，首先要承认的事实之一是难以置信地难以掌握：

**普通人对软件的概念与你有很大不同。他们对编程一无所知。没有任何。零。他们甚至不在乎。他们甚至认为他们不必在意。如果您强迫他们这样做，他们将删除您的程序。**

现在这对开发人员来说是令人难以置信的苛刻。他为自己制作的软件感到自豪。他喜欢每一个功能。他可以准确地告诉你它背后的代码是如何工作的。也许他甚至发明了一种令人难以置信的聪明算法，使其工作速度比以前快 50%。

并且用户不在乎。

真是个傻瓜。

许多开发人员无法忍受与普通用户一起工作。他们对不存在的技术知识感到沮丧。这就是为什么大多数开发人员会回避并认为用户一定是白痴。

他们不是。

如果软件开发人员买了一辆车，他希望它能够顺利运行。他通常不关心轮胎压力，机械微调对于让它以这种方式运行很重要。在这里，他**不是**专家。如果他买了一辆没有微调的汽车，他会把它还给他，然后买一辆能做他想做的事。

许多软件开发人员喜欢电影。精彩的电影，激发他们的想象力。但他们不是制作电影、制作视觉效果或编写好电影剧本的专家。大多数书呆子在表演方面都非常、非常、非常糟糕，因为这完全是为了展示复杂的情绪，而很少涉及分析。如果开发人员看了一部烂片，他只会注意到它整体上很烂。书呆子们甚至建立了 IMDB 来收集关于好电影和坏电影的信息，这样他们就知道该看哪些电影，避免哪些电影。但他们不是制作电影的专家。如果电影不好，他们就不会去看电影（或者不从 BitTorrent 下载；）

所以它归结为：回避普通用户作为专家是**无知的。**因为在他们不是专家的那些领域（而且有很多），他们希望其他领域的专家已经考虑过使用他们的产品或服务的普通人。

你能做些什么来补救它？作为一名程序员，你越是铁杆，你对普通用户思维的开放就越少。这对你来说将是陌生和无知的。你会想：我无法想象人们怎么会**在**缺乏知识的情况下使用计算机。但他们可以。对于每个 UI 元素，请考虑：是否有必要？它是否符合用户对我的工具的概念？我怎样才能让他明白？请为此阅读可用性，有很多好书。这也是一个完整的科学领域。

啊，在你说之前，是的，我是苹果的粉丝；）

* * *

## 回答 #2

> 赞同：215
> 
> 时间：2009-02-11T16:05:01.603

# UI设计*很难*

对于这个问题：

> **为什么 UI 设计对大多数开发人员来说如此困难？**

尝试问反问题：

> **为什么对大多数*UI 设计师来说**编程*如此困难？**

 *编写 UI 和设计 UI 需要不同的技能和不同的心态。UI 设计对于*大多数*开发人员来说是困难的，而不是*一些*开发人员，就像编写代码对于*大多数*设计师来说是困难的，而不是*一些*设计师。

编码很难。设计也很难。很少有人能同时做好。好的 UI 设计师很少写代码。他们甚至可能不知道如何做，但他们仍然是优秀的设计师。那么为什么优秀的开发人员会觉得对 UI 设计负责呢？

了解更多有关 UI 设计的知识将使您成为更好的开发人员，但这并不意味着您应该负责 UI 设计。设计师则相反：知道如何编写代码将使他们成为更好的设计师，但这并不意味着他们应该负责编写 UI。

# 如何在 UI 设计上做得更好

对于希望在 UI 设计方面做得更好的开发人员，我有 3 条基本建议：

1.  **将设计视为一项单独的技能**。编码和设计是分开但相关的。UI 设计不是编码的子集。它需要不同的思维方式、知识基础和技能组。有些人专注于 UI 设计。
2.  **了解设计**。至少一点点。尝试从下面的长列表中学习一些设计概念和技术。如果你更有野心，读一些书，参加会议，上课，获得学位。有很多方法可以学习设计。[Joel Spolky 的关于 UI 设计的书对](http://www.librarything.com/work/8032)开发人员来说是一本很好的入门书，但它还有很多内容，这就是设计师进入画面的地方。
3.  **与设计师合作**。好的设计师，如果可以的话。从事这项工作的人有不同的头衔。今天，最常见的头衔是用户体验设计师 (UXD)、信息架构师 (IA)、交互设计师 (ID) 和可用性工程师。他们对设计的思考与您对代码的思考一样多。你可以从他们身上学到很多东西，他们也可以从你身上学到很多。尽可能与他们合作。在您的公司中寻找具备这些技能的人。也许你需要雇人。或者参加一些会议，参加网络研讨会，并花时间在 UXD/IA/ID 世界中。

以下是您可以学习的一些具体内容。**不要试图什么都学**。如果您了解以下所有内容，您可以称自己为交互设计师或信息架构师。**从列表顶部附近的事情开始**。专注于特定的概念和技能。然后向下移动并分支。如果您真的喜欢这些东西，请将其视为职业道路。许多开发人员进入管理层，但用户体验设计是另一种选择。

*   **学习基本的设计概念**。您应该了解可供性、可见性、反馈、映射、菲特定律、防呆等。我推荐阅读*[The Design of Everyday Things](http://www.librarything.com/work/768)* (Don Norman) 和*[Universal Principles of Design](http://www.librarything.com/work/62763)* (Lidwell, Holden, & Butler)
*   **了解用户体验**。这正在成为以人为本的网站、应用程序和任何其他数字产品设计的总称。这里的经典入门是*[用户体验的元素](http://www.librarything.com/work/62762)*(Jesse James Garrett)。您可以[从作者的网站获得概述和前几章](http://www.jjg.net/elements/)。
*   **学习素描设计**。草图是*探索*设计选项和找到正确设计的快速方法，而可用性测试是为了让设计正确。在早期设计阶段，纸质原型制作快速、便宜且有效。比编码数字原型要快得多。这里的关键文本是*[草绘用户体验：获得正确的设计和正确的设计](http://www.librarything.com/work/4701386)*( [Bill Buxton](http://billbuxton.com/) )。在与 IA/ID/UX 设计师合作时，素描是一项特别有用的技能。您的合作将更加有效。有关设计师如何以及为什么要素描的良好入门，请观看Leah Buley 在[2008 年 IA 峰会上的演示](http://iasummit.org/)[如何成为一个 UX 团队](http://www.slideshare.net/ugleah/how-to-be-a-ux-team-of-one)。
*   **学习纸质原型**。在编写代码之前迭代*测试*接口的最快方法。不同于草图和可用性测试。这里的权威书籍是*[纸质原型](http://www.librarything.com/work/319043)*(Carolyn Snyder)。您可以从[Nielsen Norman Group](http://www.nngroup.com/reports/prototyping/)获得一张不错的 DVD 。
*   **学习可用性测试**。折扣测试简单有效。但是对于很多 UI 来说，可用性很难做好。您可以快速学习基础知识，但良好的可用性人员是无价的。如果你想要一本书，经典的就是*[《可用性测试手册》](http://www.librarything.com/work/2292796)*（Jeffrey Rubin）。它较旧，但全面覆盖了基于实验室的测试。著名的入门书是*[不要让我思考（第二版）](http://www.librarything.com/work/12322)*（史蒂夫·克鲁格）。我提醒人们注意这一点：Krug 让它听起来比它更容易。但这是一个很好的起点。下一点列出的用户研究书籍也涵盖了这个主题。你可以在网上找到很多关于它的信息。
*   **了解信息架构**。这里的主要书籍是*[万维网信息架构（第 3 版）](http://www.librarything.com/work/2608)*（Louis Rosenfeld 和 Peter Morville）。一本很好的入门书籍是*[Information Architecture: Blueprints for the Web](http://www.librarything.com/work/62754)* (Christina Wodtke)。更多信息，请访问[信息架构研究所](http://iainstitute.org)或参加年度[信息架构峰会](http://iasummit.org)。
*   **了解交互设计**。这里的主要书籍是*[The Essentials of Interaction Design (3rd)](http://www.librarything.com/work/3037776)*（Alan Cooper*等人*）。一本好的入门书籍是*[为交互而设计](http://www.librarything.com/work/1202204)*（Dan Saffer）。更多信息，请访问[交互设计协会 (IxDA)](http://ixda.org)或参加年度[交互设计会议](http://interaction09.ixda.org)。
*   **学习平面设计的基础知识**。平面设计不是 UI 设计，但平面设计的概念可以改善界面。平面设计介绍了信息视觉呈现的设计原则，例如接近度、对齐和小倍数。我推荐阅读*[非设计师的设计书](http://www.librarything.com/work/10038)*(Robin Williams) 和*[设想信息](http://www.librarything.com/work/2815655)*(Edward Tufte)
*   **学会做用户研究**。在可用性测试界面的地方，用户研究试图通过角色、场景、用户旅程和其他文档对用户及其任务进行建模。这是关于了解用户和他们所做的事情，然后用它来通知设计而不是猜测。一些技术是访谈、调查、日记研究和购物车分类。这方面的好书是*[观察用户体验](http://www.librarything.com/work/62757)*(Mike Kuniavsky) 和*[了解你的用户](http://www.librarything.com/work/457101)*(Courage & Baxter)
*   **学会做实地调查**。在人工条件下观察实验室中的人会有所帮助（即：可用性），但没有什么比观察人们在上下文中使用您的代码更好的了：他们的家、他们的办公室或他们使用它的任何地方。有各种名称，包括民族志、实地研究和背景调查。这是[一个很好的实地研究入门](http://www.adaptivepath.com/ideas/essays/archives/000569.php)。这里有两本比较出名的书是*[快速上下文设计](http://www.librarything.com/work/1330347)*（Karen Holtzblatt*等人*）和*[界面设计的用户和任务分析](http://www.librarything.com/work/311880)*（Hackos & Redish）。
*   **阅读 UX 设计网站**。一些大的是[Boxes & Arrows](http://boxesandarrows.com/)、[UX Mag](http://www.uxmag.com/)、[UX Matters](http://uxmatters.com/)和[Digital Web 杂志](http://digital-web.com)。
*   **使用 UI 模式库**。有接口模式。对于网站，我推荐*[网站设计，第 2 版](http://www.librarything.com/work/5520877)*（Van Duyne*等人*）和*[主页可用性：解构 50 个网站](http://www.librarything.com/work/5804)*（Jakob Nielsen 和 Marie Tahir）。对于桌面应用程序，我推荐*[Designing interfaces](http://www.librarything.com/work/630562)* (Jennifer Tidwell)，对于 Web 应用程序，我推荐*[Designing Web Interfaces: Principles and Patterns for Rich Interactions](http://designingwebinterfaces.com)* (Bill Scott & Theresa Neil)。您应该在线查看[Welie 模式库](http://www.welie.com/patterns/)、[UI 模式](http://ui-patterns.com/)和[Web UI 模式](http://designingwebinterfaces.com/explore)。
*   **参加 UX 设计会议**。一些不错的年度会议是：[信息架构峰会](http://iasummit.org/)、[交互 '09 (IxDA)](http://interaction09.ixda.org/)、[用户界面](http://www.uie.com/events/uiconf/)和用户[体验周](http://uxweek.com)。
*   **参加研讨会或网络研讨会**。您可以参加研讨会、网络研讨会和在线课程。这远不是一个完整的列表，但您可以尝试[来自 Rosenfeld Media的](http://www.rosenfeldmedia.com/webinars/)[UIE 虚拟研讨会](http://www.uie.com/events/virtual_seminars/)、[自适应路径虚拟研讨会](http://www.adaptivepath.com/events/)和UX 网络研讨会。
*   **获得学位**。HCI 的研究生学位是一种方法，但这些课程主要是关于编写编码。如果您想了解数字工件和设备的设计，那么您需要一个不在 CS 中的研究生课程。一些选择包括[卡内基梅隆大学的交互设计、](http://www.design.cmu.edu/show_program.php?s=2&t=3)[斯坦福大学](http://www.stanford.edu/group/dschool/)的d-School [、纽约大学](http://itp.nyu.edu/itp/)的ITP 项目以及[信息架构和知识管理](http://www.iakm.kent.edu/)在肯特州立大学（披露：我在肯特大学任教；我们看到越来越多具有 CS 学位的人转向 UX 设计而不是管理，这很有趣，因为管理是想要离开的开发人员的传统途径在他们的领域内编写代码）。还有更多的程序。每个人都有自己的观点、重点领域和技术期望。有些来自艺术和视觉设计，有些来自图书馆和信息科学，还有一些来自 CS。大多数是杂种，但每一种杂种在一个或多个领域都有更深的根源。如果您对此感兴趣，请环顾四周并尝试了解这些程序之间的差异。除了成熟的学位外，有些还提供在线课程和证书课程。

# 为什么UI设计很难

好的 UI 设计很难，因为它涉及两种截然不同的技能：

*   **对机器有深刻的理解**。这个群体中的人首先担心代码，其次才是人。他们拥有深厚的技术知识和技能。我们称他们为开发人员、程序员、工程师等等。
*   **对人和设计的深刻理解**：这个群体的人首先担心人，其次是代码。他们对人们如何与信息、计算机以及他们周围的世界进行交互有着深入的了解。我们称他们为用户体验设计师、信息架构师、交互设计师、可用性工程师等等。

这是这两组之间的本质区别——在开发人员和设计人员之间：

*   **开发人员使其工作**。他们在你的 TiVo、你的 iPhone、你最喜欢的网站等上实现了这些功能。他们确保它确实做了它应该做的事情。他们的首要任务是让它发挥作用。
*   *设计师**让人*****爱不释手*****。**他们弄清楚如何与之交互，它应该看起来如何，以及它应该如何感觉。他们设计使用应用程序、网站和设备的体验。他们的首要任务是让你爱上开发人员所做的事情。这就是用户体验的含义，与品牌体验不同。*

 *此外，编程和设计需要*不同的思维方式*，而不仅仅是不同的知识和不同的技能。良好的 UI 设计需要两种思维方式、两种知识库和两种技能组。掌握其中任何一个都需要数年时间。

开发人员应该期望发现 UI 设计很难，就像 UI 设计师应该期望发现编写代码很困难一样。

* * *

## 回答 #3

> 赞同：70
> 
> 时间：2009-02-05T00:59:16.403

真正帮助我改进设计的是找一位开发人员、QA 人员、PM 或任何碰巧路过的人，让他们试用特定的小部件或屏幕。

当你看到别人第一次使用你的软件时，你会意识到这很神奇

* * *

## 回答 #4

> 赞同：32
> 
> 时间：2009-02-05T01:05:53.253

归根结底，这真的是关于同理心——你能设身处地为用户着想吗？

当然，有帮助的一件事是“吃你自己的狗粮”——将你的应用程序作为一个真正的用户自己使用，看看有什么烦人的。

另一个好主意是找到一种方法来观察使用您的应用程序的真实用户，这可能与具有单向镜子、屏幕视频捕获、用户摄像机等的可用性实验室一样复杂，也可以简单作为纸质原型，使用碰巧走过大厅的下一个人。

如果一切都失败了，请记住，UI 太简单总比太复杂好。很容易说“哦，我知道如何解决这个问题，我只需添加一个复选框，以便用户可以决定他们喜欢哪种模式”。很快你的用户界面就太复杂了。选择默认模式并将首选项设置为高级配置选项。或者干脆不说。

如果你读了很多关于设计的书，你很容易被阴影和圆角等等所吸引。那不是重要的东西。简单性和可发现性是重要的东西。

* * *

## 回答 #5

> 赞同：26
> 
> 时间：2009-02-05T14:49:40.203

与流行的神话相反，在 UI 设计中实际上没有软方面，至少不会超过设计一个好的后端所需要的。

考虑以下; 良好的后端设计基于任何优秀的开发人员都熟悉的相当可靠的原则和元素：

*   低耦合

*   高凝聚力

*   架构模式

*   行业最佳实践

*   ETC

好的后端设计通常是通过多次交互产生的，基于在测试或实际使用过程中获得的可衡量的反馈，最初的蓝图会逐渐改进。有时您需要对后端的较小方面进行原型设计并单独试用它们等。

良好的 UI 设计基于以下合理原则：

*   能见度

*   可供性

*   回馈

*   宽容

*   简单

*   一致性

*   结构体

UI也是通过测试和试验，通过迭代而诞生的，但不是编译器+自动化测试套件，而是人。与后端类似，还有行业最佳实践、测量和评估技术、考虑 UI 的方法以及在用户模型、系统图像、设计师模型、结构模型、功能模型等方面设定目标。

设计 UI 所需的技能集与设计后端有很大不同，因此不要指望不先学习就能够做好 UI。然而，这两项活动的共同点是设计过程。我相信任何能够设计好软件的人只要花一些时间学习如何设计，就能够设计出好的 UI。

我建议参加人机交互课程，例如查看 MIT 和耶鲁网站以获取在线资料：

*   [麻省理工学院用户界面设计与实现课程](http://ocw.mit.edu/OcwWeb/Electrical-Engineering-and-Computer-Science/6-831Fall-2004/LectureNotes/index.htm "MIT人机迭代课程")

**理解和使用中的结构与功能模型**

[Thorsten79](https://stackoverflow.com/questions/514083/why-is-ui-design-so-hard-for-some-developers/516180#516180)早期的优秀文章提出了软件开发专家与用户的话题，以及他们对软件的理解有何不同。人类学习专家区分功能性和结构性心理模型。找到去朋友家的路可以很好地说明两者之间的区别：

*   第一种方法包括一组详细的说明：从高速公路的第一个出口出来，然后在 100 码后左转等。这是功能模型的一个示例：列出实现某个目标所需的具体步骤。功能模型易于使用，它们不需要太多思考，只需直接执行即可。显然，简单性是有代价的：它可能不是最有效的路线，任何异常情况（即交通分流）很容易导致完全失败。

*   处理任务的另一种方法是建立一个结构化的心智模型。在我们的示例中，这将是一张地图，它传达了有关“任务对象”内部结构的大量信息。通过了解我们和朋友家的地图和相对位置，我们可以推断出功能模型（路线）。显然它需要更多的努力，但更可靠的方式来完成任务，尽管可能存在偏差。

通过 UI 传达功能模型或结构模型（例如，向导与高级模式）之间的选择并不像 Thorsten79 的帖子中看起来那么简单。高级和频繁的用户可能更喜欢结构模型，而偶尔或经验较少的用户 - 功能。

谷歌地图就是一个很好的例子：它们包括功能模型和结构模型，许多卫星导航也是如此。

问题的另一个维度是，通过 UI 呈现的结构模型不能映射到软件的结构，而是自然地映射到手头的用户任务或涉及的任务对象的结构。

这里的困难在于，许多开发人员将有一个良好的软件内部结构模型，但只有软件旨在协助的用户任务的功能模型。要构建好的 UI，需要了解任务/任务对象结构并将 UI 映射到该结构。

无论如何，我仍然不能强烈推荐参加正式的 HCI 课程。涉及到很多东西，例如[启发式、](http://en.wikipedia.org/wiki/Heuristics#Psychology)[格式塔心理学](http://en.wikipedia.org/wiki/Gestalt_psychology#Applications_in_computer_science)派生的原则、人类学习的方式等。

* * *

## 回答 #6

> 赞同：25
> 
> 时间：2009-02-07T18:53:55.670

我建议你以与现在相同的方式开始所有 UI，而不是关注可用性和其他东西。

[替代文字 http://www.stricken.org/uploaded_images/WordToolbars-718376.jpg](http://www.stricken.org/uploaded_images/WordToolbars-718376.jpg)

现在想想：

一个设计师知道他已经达到了完美，不是在没有什么可以添加的时候，而是在没有什么可以拿走的时候。— 圣埃克苏佩里

并将其应用到您的设计中。

* * *

## 回答 #7

> 赞同：16
> 
> 时间：2009-02-05T01:05:20.960

许多开发人员认为，因为他们可以编写代码，所以他们可以做到这一切。设计界面是一项完全不同的技能，我上大学时根本没有教过它。这不仅仅是自然而然的事情。

另一本好书是唐纳德·诺曼 (Donald Norman )[*的《日常事物的设计》 。*](http://mitpress.mit.edu/catalog/item/default.asp?tid=5393&ttype=2)

* * *

## 回答 #8

> 赞同：14
> 
> 时间：2009-02-05T02:23:25.140

设计和美学之间存在巨大差异，而且它们经常被混淆。

一个漂亮的 UI 需要许多人（包括我自己）无法产生的艺术或至少是审美技能。不幸的是，这还不够，也不能使 UI 可用，正如我们在许多重量级的基于闪存的 API 中看到的那样。

制作可用的 UI 需要了解人类如何与计算机交互、心理学中的一些问题（例如，菲特定律、希克定律）和其他主题。很少有 CS 课程为此进行培训。据我所知，很少有开发人员会选择用户测试书籍而不是 JUnit 书籍等。

我们中的许多人也是“核心程序员”，倾向于将 UI 视为门面，而不是可能决定项目成功或失败的因素。

此外，大多数 UI 开发体验都非常令人沮丧。我们可以使用像旧 VB 这样的玩具 GUI 构建器并且不得不处理丑陋的胶水代码，或者我们使用让我们无所适从的 API，比如尝试在 Swing 中整理布局。

* * *

## 回答 #9

> 赞同：12
> 
> 时间：2009-02-05T15:22:53.927

转到 Slashdot，阅读有关 Apple 的任何文章的评论。你会发现很多人都在谈论 Apple 产品没有什么特别之处，并将 iPod 和 iPhone 的成功归因于那些试图时尚或时髦的人。他们通常会浏览功能列表，并指出他们没有做早期的 MP3 播放器或智能手机没有做的事情。

还有一些人喜欢 iPod 和 iPhone，因为它们可以简单轻松地完成用户想要的操作，无需参考手册。界面与界面一样直观、令人难忘和易于发现。我不像以前的版本那样喜欢 MacOSX 上的 UI，我认为它们已经放弃了一些有用性来支持浮华，但 iPod 和 iPhone 是出色设计的例子。

如果你在第一阵营，你不会像普通人那样思考，因此你很可能会做出糟糕的用户界面，因为你无法区分它们是好是坏。这并不意味着你没有希望，而是你必须明确地学习好的界面设计原则，以及如何识别好的 UI（就像阿斯伯格综合症的人可能需要明确地学习社交技能一样）。显然，仅仅拥有一个好的 UI 并不意味着你就能做出来。例如，我对文学的欣赏似乎并没有扩展到（目前）撰写可发表故事的能力。

因此，尝试培养良好的 UI 设计意识。这不仅限于软件。唐诺曼的“日常事物的设计”是经典之作，还有其他书籍。获取成功的 UI 设计示例，并充分利用它们来感受不同之处。认识到你可能不得不学习一种新的思考方式，并享受它。

* * *

## 回答 #10

> 赞同：10
> 
> 时间：2009-02-05T00:57:31.600

我坚持的主要经验法则是，永远不要同时尝试两者。如果我正在处理后端代码，我将完成它，休息一下，然后带着我的 UI 帽子返回。如果您在编写代码时尝试使用它，您会以错误的心态处理它，并最终得到一些可怕的界面。

我认为绝对有可能同时成为一名优秀的后端开发人员和一名优秀的 UI 设计师，你只需要努力工作，对该主题进行一些阅读和研究（从 Miller 的 #7 到 Nielsen 的档案），然后制作确保您了解*为什么*UI 设计至关重要。

我不认为这是需要创造性的情况，而是，就像后端开发一样，它是一个非常有条理、非常结构化的东西，需要学习。人们通过 UI 获得“创意”，创造了一些最大的可用性怪物......我的意思是，首先看看 100% Flash 网站......

**编辑**：Krug 的书非常好……一定要读一读，尤其是如果您要为 Web 进行设计。

* * *

## 回答 #11

> 赞同：8
> 
> 时间：2010-06-15T05:10:50.723

这件事情是由很多原因导致的。

(1) 开发者没有站在用户的角度看待事物。这是通常的怀疑：缺乏同理心。但这通常不是真的，因为开发人员并不像人们想象的那样陌生。

(2) 另一个更常见的原因是开发人员与自己的东西如此接近，与他的东西呆了这么久，没有意识到他的东西可能对其他人并不那么熟悉（一个比直观更好的术语） .

(3) 还有一个原因是开发者缺乏技术。

我的大主张：阅读任何 UI、人机交互设计、原型设计书籍。例如设计显而易见的：Web 应用程序设计的常识方法，不要让我思考：Web 可用性的常识方法，设计时刻，等等。

他们如何讨论任务流程？他们如何描述决策点？也就是说，在任何用例中，至少有 3 条路径：成功、失败/异常、替代。

因此，从 A 点，您可以前往 A.1、A.2、A.3。从 A.1 点，您可以到达 A.1.1、A.1.2、A.1.3 等。

他们如何显示这种向下钻取的任务流程？他们没有。他们只是掩饰它。

由于即使是 UI 专家也没有技术，开发人员也没有机会。他认为这在他的脑海中很清楚。但在纸面上甚至都不清楚，更不用说在软件实现上明确了。

为此，我必须使用自己的手工技术。

* * *

## 回答 #12

> 赞同：7
> 
> 时间：2009-02-05T00:58:21.613

我尝试与特定设计的网站和文本保持联系。我还发现优秀的 Robin Williams 书籍**[The Non-Designer's Design Book](https://rads.stackoverflow.com/amzn/click/com/0321534042)**在这些研究中非常有趣。

我相信设计和可用性是软件工程中非常重要的一部分，我们应该更多地学习它，不要再找借口说我们不应该做设计。

每个人都可以偶尔成为设计师，每个人都可以成为程序员。

* * *

## 回答 #13

> 赞同：7
> 
> 时间：2009-02-05T01:28:34.020

在进行 UI 设计时，我始终牢记以下几点（目前还不是完整的列表）：

*   **沟通模型**。UI 是向用户解释心理模型的叙述。这个模型可能是一个业务对象，一组关系，你有什么。视觉突出、空间布局和工作流排序都在将此模型传达给用户的过程中发挥作用。例如，某种列表与另一个列表意味着不同的事物，以及列表中的内容与模型其余部分的关系。一般来说，我发现最好确保一次只传达一个模型。程序员经常尝试在同一个 UI 空间中交流多个模型或多个模型的一部分。

*   **一致性**。重用流行的 UI 隐喻有很大帮助。内部一致性也很重要。

*   **任务分组**。用户不必在屏幕上一直移动鼠标来验证或完成相关的命令序列。模态对话框和弹出菜单在这方面可能特别糟糕。

*   **了解你的听众**。如果您的用户将一遍又一遍地执行相同的活动，他们将很快成为这些任务的高级用户，并因尝试降低初始进入门槛而感到沮丧。如果您的用户不经常进行许多不同类型的活动，最好确保 UI 始终握住他们的手。

* * *

## 回答 #14

> 赞同：7
> 
> 时间：2009-02-07T18:11:22.183

阅读[Apple 人机界面指南](http://developer.apple.com/documentation/userexperience/Conceptual/AppleHIGuidelines/index.html)。

* * *

## 回答 #15

> 赞同：5
> 
> 时间：2009-02-05T02:24:19.070

我发现 UI 设计中最好的工具是观察第一次使用该软件的用户的尝试。做大量笔记并问他们一些问题。永远不要指导他们或试图解释软件是如何工作的。这是 UI 的工作（以及编写良好的文档）。

我们在所有项目中始终采用这种方法。观看用户以您从未考虑过的方式处理软件总是令人着迷。

为什么UI设计这么难？好吧，通常是因为开发人员和用户从不见面。

* * *

## 回答 #16

> 赞同：5
> 
> 时间：2009-02-05T03:02:32.300

duffymo 只是提醒了我为什么：许多程序员认为“*设计”==“艺术”。

好的UI设计绝对不是艺术的。它遵循可靠的原则，如果你有时间进行研究，可以用数据来支持。

我认为所有程序员需要做的就是花时间学习这些原则。我认为我们的天性就是尽可能地应用最佳实践，无论是在代码中还是在布局中。我们需要做的就是让自己意识到我们工作的这方面的最佳实践是什么。

* * *

## 回答 #17

> 赞同：5
> 
> 时间：2009-02-06T04:12:37.617

为了在 UI 设计方面做得更好，我做了什么？
**注意！**

就像你每次看到新闻图表或电子巴士标志时，你会想'他们是如何获得这些数据的？他们是使用原始 sql 还是使用 LINQ？（或在此处插入您自己共同的极客好奇心）。

您需要开始这样做，但要使用各种视觉元素。

但就像学习一门新语言一样，如果你不*真正*投入其中，你就永远学不会它。

取自我写的[另一个答案：](https://stackoverflow.com/questions/15373/non-tech-skills-that-complement-programming)

> 学会看，真正看，在你周围的世界。为什么我喜欢那个 UI 但讨厌这个？为什么在这家餐厅的菜单上很难找到面食？哇，我什至在阅读这些文字之前就知道那个标志的含义。那是为什么？这本书的封面怎么看起来这么不对劲？学会花时间思考为什么你会对各种视觉元素做出反应，然后将其应用到你的工作中。

* * *

## 回答 #18

> 赞同：5
> 
> 时间：2010-07-15T19:51:43.080

不管你怎么做（上面有一些很好的观点），一旦我接受没有直观的东西……它真的对我有帮助。

我可以听到在地平线上隆隆作响的争论......所以让我解释一下。

直觉的：基于一种无意识的方法或感觉，使用一个人认为正确或真实的东西。

如果（正如卡尔·萨根（Carl Sagan）所假设的那样）你接受你无法理解与你所遇到的任何事物完全不同的事物，那么如果你从未使用过类似的事物，你怎么可能“知道”如何使用它呢？

想一想：孩子们试图开门并不是因为他们“知道”门把手是如何工作的，而是因为他们看到别人这样做……他们经常把门把手转错方向，或者拉得太快。他们必须了解门把手的工作原理。然后，这些知识被应用于不同但相似的情况：打开窗户，打开抽屉，打开几乎任何带有大把手的大东西。

即使是对我们来说似乎很直观的简单事情，对于来自其他文化的人来说也根本不直观。如果有人在他们面前伸出手臂，在手腕上上下挥动手臂，同时保持手臂不动……他们是在放弃你吗？可能吧，除非你在日本。在那里，这个手势可能意味着“过来”。那么谁是对的呢？当然，两者都在他们自己的背景下。但是如果你去这两个地方旅行，你需要知道这两个... UI 设计。

我试图找到我项目的潜在用户已经“熟悉”的东西，然后围绕它们构建 UI：以用户为中心的设计。

看看苹果的 iPhone。即使你讨厌它，你也必须尊重它所投入的思想量。完美吗？当然不是。随着时间的推移，一个对象的感知“直觉”会增长甚至完全消失。

例如。大多数人都知道，顶部和底部有两排孔的黑色带看起来像胶片……或者是吗？

问你平均 9 岁或 10 岁的孩子他们认为是什么。您可能会感到惊讶，现在有多少孩子很难将其识别为电影片段，即使它仍然被用来代表好莱坞或任何与电影（电影）相关的东西。过去 20 年的大多数电影都是数字拍摄的。我们中的任何人最后一次拿着任何类型的电影，照片或电影是什么时候？

所以，对我来说，这一切归结为：了解你的受众并不断研究以跟上“直觉”事物的趋势和变化，瞄准你的主要用户，尽量不要做惩罚没有经验的人的事情高级用户或减慢高级用户以握住新手。

最终，每个程序都需要用户接受一定程度的培训才能使用它。需要进行多少培训以及针对哪个级别的用户是需要做出的决策的一部分。

根据您的目标用户过去作为人类、计算机用户、学生或其他人的经验水平，有些事情或多或少是熟悉的。

我只是为钟形曲线中最胖的部分拍摄，并尝试尽可能多地吸引人，但我意识到我永远不会取悦所有人......

* * *

## 回答 #19

> 赞同：4
> 
> 时间：2009-02-05T02:54:35.780

我知道微软与他们自己的指南相当不一致，但我发现阅读他们的 Windows 设计指南确实对我有帮助。我在我的网站上有一份副本[，](http://www.dcomproductions.com/downloads/)只需向下滚动一点 Vista UX 指南。它在颜色、间距、布局等方面帮助了我。

* * *

## 回答 #20

> 赞同：4
> 
> 时间：2009-02-05T14:34:49.717

我认为主要问题与不同的才能或技能组合无关。主要问题是，作为一名开发人员，您对应用程序的功能和它的工作方式了解太多，并且您会自动从具有这些知识的人的角度设计您的 UI。

而用户通常一开始对应用程序一无所知，并且永远不需要了解其内部工作原理。

不使用你所拥有的知识是非常困难的，几乎是不可能的——这就是为什么 UI 不应该由开发应用程序的人设计的原因。

* * *

## 回答 #21

> 赞同：4
> 
> 时间：2009-02-05T20:14:33.137

“从屏幕的两侧进行设计”提供了一个非常简单但深刻的原因来解释为什么程序员会觉得 UI 设计很困难：程序员被训练去思考边缘案例，而 UI 设计师被训练去思考常见案例或用法。

因此，如果其中一个世界的默认训练与另一个世界完全相反，那么从一个世界到另一个世界肯定是困难的。

* * *

## 回答 #22

> 赞同：3
> 
> 时间：2009-02-07T18:38:04.280

如果说程序在 UI 设计上很烂，那就是没有抓住重点。问题的关键在于，大多数开发人员接受的正式培训都深入到了该技术。人机交互不是一个简单的话题。这不是我可以通过提供一个简单的单行语句让您意识到“哦，如果我使用 x 而不是 y，用户将更有效地使用此应用程序”，我可以对您“心灵融合”的东西。

这是因为您缺少 UI 设计的一部分。人脑。为了了解如何设计 UI，您必须了解人脑如何与机器交互。我在明尼苏达大学上了一门由心理学教授教授的关于这个主题的优秀课程。它被命名为“人机交互”。这描述了为什么 UI 设计如此复杂的许多原因。

由于心理学是基于相关性而非因果性的，因此您永远无法证明一种 UI 设计方法在任何给定情况下始终有效。您可以关联许多用户会发现特定的 UI 设计有吸引力或高效，但您无法证明它总是会推广。

此外，许多人似乎都忽略了 UI 设计的两个部分。有美学吸引力和功能性工作流程。如果您追求 100% 的美学吸引力，那么人们肯定会选择您的产品。我非常怀疑美学是否会减少用户的挫败感。

有几本关于这个主题和课程的好书可供学习（如 Bill Buxton 的[*Sketching User Experiences*](http://www.billbuxton.com/bookFlyer.pdf)和Edwin Hutchins[*的 Cognition in the Wild*](http://hci.ucsd.edu/hutchins/citw.html)）。许多大学都有人机交互的研究生课程。

不过，这个问题的总体答案在于如何教授个人计算机科学。它完全基于数学，基于逻辑，而不是基于用户体验。要做到这一点，您需要的不仅仅是一个通用的 4 年计算机科学学位（除非您的 4 年计算机科学学位辅修了心理学并且在人机交互中得到了强调）。

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2009-02-05T20:15:27.080

你提到了*[不要让我思考](http://www.sensible.com/dmmt.html)*这本书。我强烈推荐阅读这篇文章。

* * *

## 回答 #24

> 赞同：2
> 
> 时间：2009-02-07T19:04:18.113

让我们把你的问题转过来——

*“ui设计师”是否注定只设计信息架构和表现层？他们可以做些什么来重新训练他们的大脑，以便更有效地设计令人愉悦和高效的系统层？*

似乎他们的“用户界面设计师”必须采取完全不同的视角——他们必须从盒子的内部向外看；而不是从盒子外面看。

Alan Cooper 的[“The Inmates are Running the Asylum”](http://books.google.com/books?id=04cFCVXC_AUC&printsec=frontcover&dq=alan+cooper+the+inmates#PPP1,M1)观点是，我们不能同时兼顾两种观点——我们可以学会戴好一顶帽子，但我们不能只是换帽子。

* * *

## 回答 #25

> 赞同：2
> 
> 时间：2009-02-10T23:30:52.537

我认为这是因为一个好的 UI 是不合逻辑的。一个好的用户界面是直观的。

软件开发人员通常在“直观”方面做得不好

* * *

## 回答 #26

> 赞同：2
> 
> 时间：2009-02-10T23:54:42.560

一个有用的框架是在设计沟通过程时积极考虑你在做什么。在非常真实的意义上，您的界面是一种用户必须用来告诉计算机该做什么的语言。这导致考虑以下几点：

1.  用户是否已经会说这种语言？使用高度特殊的界面就像用一种你以前从未说过的语言进行交流。因此，如果您的界面必须完全与众不同，那么最好用最简单的术语和很少的干扰来介绍自己。另一方面，如果您的界面使用用户习惯的惯用语，他们将从一开始就获得信心。
2.  沟通的敌人是噪音。听觉噪音干扰口语交流；视觉噪音干扰视觉交流。您可以从界面中消除的噪音越多，与它的交流就越容易。
3.  就像在人类对话中一样，通常不是你说什么，而是你怎么说。大多数软件的交流方式在某种程度上是粗鲁的，如果它是一个人，就会被打脸。如果你问别人一个问题，他们坐在那里盯着你看了几分钟，在回答之前拒绝以任何其他方式回答，你会有什么感觉？许多界面元素，例如进度条和自动焦点选择，都具有礼貌的基本功能。问问自己如何才能让用户的一天更愉快一点。

*确实，除了通信过程之外*，很难确定程序员认为界面交互是什么，但问题可能在于它根本没有被认为是任何东西。

* * *

## 回答 #27

> 赞同：2
> 
> 时间：2009-02-11T10:42:03.033

已经有很多好的评论了，所以我不确定我可以添加多少。但是还是...

*   为什么开发人员希望能够设计出好的 UI？
*   他在那个领域接受了多少培训？
*   他读了多少本书？
*   他花了多少年设计了多少东西？
*   他有机会看到用户的反应吗？

我们不期望一个随机的“管道工乔”能够编写好的代码。那么为什么我们会期望随机的“程序员乔”来设计好的用户界面呢？

同理心有帮助。将 UI 设计和编程分开会有所帮助。可用性测试有帮助。

但是 UI 设计是一门需要学习和实践的手艺，就像其他任何东西一样。

* * *

## 回答 #28

> 赞同：2
> 
> 时间：2009-02-11T18:19:37.520

我认为他们是非常不同的技能组合。优秀的设计师了解人类行为、颜色和字体的心理等等。我认为这就像试图同时成为一名营销人员和一名开发人员。非常具有挑战性，但不一定是不可能的。

我会尝试找一些 UI 专家，看看他们的学习建议是什么。除非你正在设计像谷歌这样极简主义的东西，如果这是一个重要的项目，最好雇佣一个研究过 UI 艺术的人作为他们的主要工作。

也就是说，如果您正在设计一个非常实用的应用程序，我认为您可以尝试专注于界面的简单性和清晰性——我认为这至少是谷歌成功（和堆栈溢出）关键的一半——即它直观且易于使用。

* * *

## 回答 #29

> 赞同：2
> 
> 时间：2009-02-11T20:00:20.133

开发人员并不（必然）擅长 UI 设计，原因与他们不（必然）擅长编织的原因相同；这很难，需要练习，而且首先让别人教你怎么做也没有什么坏处。

大多数开发人员（包括我）开始“设计” UI，因为它是编写软件的必要部分。除非开发人员努力做好它，否则他/她不会。

* * *

## 回答 #30

> 赞同：2
> 
> 时间：2009-02-11T20:04:20.997

要改进只是环顾现有网站。除了已经推荐的书籍之外，您可能还想看看 Robin Williams 的优秀书籍“非设计师设计书”（经过[消毒的亚马逊链接](https://rads.stackoverflow.com/amzn/click/com/0321534042)）

通过查看[The Zen Garden](http://www.csszengarden.com/)上的各种提交来了解视觉设计的可能性。

UI 设计绝对是一门艺术，就像 C 语言中的指针一样，有些人懂，有些人不懂。

但至少[我们可以对他们的尝试嗤之以鼻](http://www.ok-cancel.com/comic/4.html)。顺便说一句，感谢 OK/Cancel 提供了一部有趣的漫画，并感谢 Joel 将其放入您的“最佳软件写作 I”一书中（经过[消毒的亚马逊链接](https://rads.stackoverflow.com/amzn/click/com/1590595009)）。

* * *

## 回答 #31

> 赞同：2
> 
> 时间：2009-02-12T03:29:42.673

用户界面不是事后可以应用的东西，就像一层薄薄的油漆。这是一开始就需要存在的东西，并且基于真实的研究。当然，有大量的可用性研究可用。它不仅需要在一开始就存在，它还需要形成你首先制作软件的核心原因：世界上存在一些差距，一些问题，需要制作更实用，更高效。

软件不是为了它自己而存在的。一些软件存在的原因是为了人们。甚至试图想出一个新软件的想法，却不理解为什么有人需要它，这绝对是荒谬的。然而，这种情况一直在发生。

在编写单行代码之前，您应该查看界面的纸质版本，并在真人身上进行测试。这有点奇怪和愚蠢，它最适合孩子们，以及扮演“电脑”的人。

界面需要利用我们的自然认知设施。穴居人将如何使用您的程序？例如，我们已经发展到非常擅长跟踪移动物体。这就是为什么使用物理模拟的界面（如 iphone）比即时发生变化的界面工作得更好。

我们擅长某些类型的抽象，但不擅长其他类型的抽象。作为程序员，我们接受过心理体操和后空翻的训练，以理解一些最奇怪的抽象。例如，我们了解到，一系列神秘的文本可以表示并转化为金属盘上的电磁状态模式，当精心设计的设备遇到这种模式时，会导致一系列不可见的事件，在电子设备上以光速发生。循环，并且这些事件可以被引导以产生有用的结果。这是一件非常不自然的事情，必须理解。要明白，虽然它对我们有一个完全合理的解释，但对外界来说，看起来我们正在编写难以理解的咒语来召唤无形的有情灵魂来执行我们的命令。

普通人理解的抽象类型是地图、图表和符号。当心符号，因为符号是一个非常脆弱的人类概念，需要有意识的脑力才能解码，直到符号被学会。

符号的诀窍在于符号与其所代表的事物之间必须有明确的关系。它所代表的事物必须是名词，在这种情况下，符号应该看起来非常像它所代表的事物。如果一个符号代表一个更抽象的概念，则必须提前解释。查看 msword 或 Photoshop 工具栏中难以理解的未标记图标，以及它们所代表的抽象概念。必须了解 photoshop 中的裁剪工具图标表示裁剪工具。必须了解 CROP 甚至意味着什么。这些是正确使用该软件的先决条件。这带来了一个重要的观点，提防假设的知识。

我们只能在 4 岁左右获得理解地图的能力。我想我曾经在某个地方读到过，黑猩猩在 6 或 7 岁左右获得了理解地图的能力。

guis 之所以如此成功，是因为它们改变了计算机的主要文本界面，将计算机概念映射到类似于物理位置的东西。guis 在可用性方面失败的地方是它们不再像你在现实生活中看到的东西。计算机中发生了一些看不见的、不可预测的、难以理解的事情，这些事情与你在物理世界中看到的任何事情都没有任何相似之处。其中一些是必要的，因为仅仅制作一个现实模拟器是没有意义的——这个想法是为了节省工作，所以必须有一点魔法。但这种魔法必须是有意义的，并且必须建立在人类能够很好地理解的抽象概念中。当我们的抽象开始变得深入和分层时，并且与手头的任务不匹配，事情发生了故障。换句话说，界面不能作为底层软件的良好映射。

有很多书。我读过并因此可以推荐的两本书是 donald norman 的“The Design of Everyday Things”和 Jef Raskin 的“The Human Interface”。

我还推荐一门心理学课程。《The Design of Everyday Things》稍微谈到了这一点。由于开发人员对心理学的“大众理解”，许多界面出现故障。这类似于“民间物理学”。运动中的物体保持运动对大多数人来说没有任何意义。“你必须不断推动它才能让它保持运动！” 物理新手想。用户测试对大多数开发人员来说没有意义。“你可以问用户他们想要什么，这就足够了！” 认为心理学新手。

我推荐由 Philip Zimbardo 主持的 PBS 纪录片系列 Discovering Psychology。做不到这一点，试着找一本好的物理教科书。贵的那种。不是您在 Borders 中找到的低俗小说自助废话，而是您只能在大学图书馆中找到的厚厚的精装书。这是一个必要的基础。没有它你也可以做出好的设计，但你只会对正在发生的事情有一个直观的了解。读一些好书会给你一个很好的视角。

* * *

## 回答 #32

> 赞同：2
> 
> 时间：2009-02-13T17:05:56.260

如果您阅读《为什么软件很烂》这本书，您会看到普拉特的答案，这是一个简单的答案：

1.  开发人员更喜欢控制而不是用户友好性
2.  普通人更喜欢用户友好而不是控制

但是您的问题的另一个答案是“为什么牙科对某些开发人员来说如此困难？” - UI 设计最好由 UI 设计师完成。

[http://dotmad.net/blog/2007/11/david-platt-on-why-software-sucks/](http://dotmad.net/blog/2007/11/david-platt-on-why-software-sucks/)

* * *

## 回答 #33

> 赞同：2
> 
> 时间：2010-11-16T04:02:00.390

用户体验设计和软件开发绝不是相互排斥的技能。相反，它们都需要常识和逻辑，注重细节并能够看到大局。所以，如果你是一名优秀的开发人员，你就有机会成为一名优秀的用户体验设计师！

它们可能看起来是相互排斥的，因为许多开发人员没有 UX 设计经验，反之亦然。此外，如果您在考虑 UX 设计之前就开始考虑架构、框架或语言，它可能会将您引向错误的方向。

* * *

## 回答 #34

> 赞同：1
> 
> 时间：2009-02-05T00:58:51.707

左脑对右脑。有些人没有艺术感。

我敢打赌，任何人都可以通过学习和勤奋来更好地设计界面。这并不意味着你会成为一流的艺术家或设计师。

我认为总是可以改进的。

* * *

## 回答 #35

> 赞同：1
> 
> 时间：2009-02-07T18:47:40.360

UI 设计更多的是艺术而不是科学，需要了解您的用户并具有同情他们的能力。

这与整天对着电脑说话是非常不同的。

我不认为人们总是意识到这一点。

这是一个小自测：看看[FamFamFam 丝绸图标](http://www.famfamfam.com/lab/icons/silk/)。想想你会选择哪个图标来代表你上次编写的应用程序中的各种功能。如果花十多分钟做这件事让你的眼睛开始发呆，那么 UI 设计可能不适合你。

* * *

## 回答 #36

> 赞同：1
> 
> 时间：2009-02-07T19:28:35.460

这完全是关于实践、一些培训和回顾。但是大多数后端开发人员工作的环境中，良好的 UI 设计并未真正受到管理层的重视。

在您阅读了一些关于 UI 设计的文献之后，组织一些关于 UI 设计的编码道场。

* * *

## 回答 #37

> 赞同：1
> 
> 时间：2009-02-07T21:09:45.443

我知道当我制作一个糟糕的 UI 时，几乎总是因为我在它的特定部分上过于“专注”。

在开发和测试给定功能的过程中，我几乎总是会多次使用它。

在我检查了十几次之后，我处于一种我确切地知道我正在尝试做什么以及确切地知道我需要做什么以使程序执行我想要的操作的框架中。我还一遍又一遍地查看这个特定的功能，直到它“完成”。在我测试的时候，我很快就跳过了应用程序/菜单/工作流程/任何其他部分。

用户根本不在同一种情况。他们并没有将这部分软件视为一个独立的“块”。他们并不总是多次这样做，而且当他们经常这样做时，他们当然不会经常自己这样做。他们并没有像开发人员那样“跳过”其余的过程并专注于这一部分。

尝试查看 UI 很重要，然后思考“我应该如何处理它？”。如果不清楚，你做错了。我们处于一种我们知道软件想要什么输入的情况下，我们只是想出一种方法来获得该输入。用户处于他们想要一些结果的情况下，他们想知道他们必须做什么才能得到那个结果。

* * *

## 回答 #38

> 赞同：1
> 
> 时间：2009-02-07T21:50:37.200

用户自上而下地思考，而程序员在创建 UI 时通常会自下而上地思考。

我们（程序员）非常努力地考虑创建一个可以完成这项工作的数据模型，它将保存所需的数据等。我们创建 UI 以巧妙地映射到底层模型。以至于我们经常忘记关注用户如何处理相同的任务，而没有深入了解他们的流程和思维方式。

我们很自然地期望我们系统的用户以与我们相同的方式思考问题，我们如何存储和处理他们的数据，因此也了解 UI 的预期工作方式。

这通常与他们对任务的看法（和期望）不匹配。

如何解决？我认为一种方法是在向他们展示任何内容之前，实际询问（潜在）用户他们期望程序如何工作。永远不要给他们任何关于我们如何实现功能的提示。与他们一起在纸上制作 UI 原型，让他们告诉您他们期望和需要的每一步。永远不要把任何事情视为理所当然。

palm Pilot 的设计更加自上而下：

> 据说，在开始开发 Pilot 之前，霍金斯在口袋里放了一块木头，这块木头与潜在的飞行员一样大，已经放了一周。（[来自这篇文章](http://www.nationmaster.com/encyclopedia/Palm-Pilot)）

他会模拟在这块木头上做什么，而不是考虑如何将其实现为代码。每当一个新想法出现时，他都会在一块木头上“尝试”它。

当然，你需要一些指导方针来处理你提出的一些想法，也许并不是所有的问题都需要解决，即使我们在技术上可以......

[请参阅此处的要点 1（消除选项）和 3（承诺不足，超额交付）。](http://www.businessweek.com/bwdaily/dnflash/sep1998/nf80929b.htm)

* * *

## 回答 #39

> 赞同：1
> 
> 时间：2009-02-11T15:04:06.447

十年前，我真的很*讨厌*UI 设计……我想这些年来帮助我变得更好的是**谦逊**和**追求完美**的健康结合。

底线：永远不要对你过去或现在的成就感到太满意。从自己和他人的错误中学习。

* * *

## 回答 #40

> 赞同：1
> 
> 时间：2009-02-11T18:12:56.507

我使用我所谓的 Grandmaw 测试。

*   如果你亲爱的老奶奶不能用，那就有问题了。
*   假设她知道程序是关于什么的，例如，知道如何报税并且正在尝试使用 Quicken。

* * *

## 回答 #41

> 赞同：1
> 
> 时间：2009-02-11T18:30:48.353

就像音乐一样：有时人们在技术上可以成为伟大的音乐家，但不能成为艺术家。我的经验法则是始终只向用户呈现他们当时需要的 UI。我注意到很多后端开发人员在做 UI 时会用所有可以想象的选项来充斥屏幕。虽然这些类型的人喜欢先了解所有细节，然后慢慢忽略他们不需要的东西，但这对大多数最终用户来说并不适用。

* * *

## 回答 #42

> 赞同：1
> 
> 时间：2009-02-11T21:24:47.137

Neal Stephenson[的《In the beginning was the Commandline》](http://www.cryptonomicon.com/beginning.html)是一本很好的书，它提供了很多关于用户界面及其重要性的想法。不是每个人都需要 GUI，只是很多不编程的人。这就像迪斯尼世界的动物王国和实际的亚马逊之间的区别。

* * *

## 回答 #43

> 赞同：1
> 
> 时间：2009-02-13T14:46:47.140

“好的 ui 设计”实际上是[两个问题](https://rads.stackoverflow.com/amzn/click/com/0123740371)：

1.  获得正确的设计
2.  让设计正确

两者都是难题。根据我的经验，这两件事应该**并行探索，**以免在项目后期出现丑陋的惊喜（“为什么我们的性感拖放在 IE8 中超慢？？你是什么意思它无法修复？？？”）

**要获得正确的设计**，您将不得不探索可能性。书籍可以指导您尝试对您的环境最有意义的事情——当然，体验会更好。*你也绝对需要来自真实用户*的反馈——否则你怎么会发现设计已经正确？（*你*当然看不出来..继续读下去！）

**“正确设计”**是下一个问题，因为这意味着必须实施您认为合适的设计。

那些“用户体验/ gui”的东西太难了，因为**找到正确的答案涉及理解人类想要什么**——他们无法客观地告诉你，而另一方面你也无法从“外部”找到。这意味着（经验）引导的试错方法是唯一的方法。

* * *

更清楚地回答您的问题：

> 为什么好的 ui 设计对某些开发人员来说如此困难

对于铁杆开发人员来说，一个大问题是，他们对软件如何工作的理解与用户认为它如何工作有很大不同（例如 URL “www.stackoverflow.com”应该写成“com.stackoverflow.com” , 如果您对 DNS 的工作原理有所了解。但请尝试销售一个需要这样的 URL 的浏览器 :))。

作为旁注：我建议您研究“体验设计”而不是“用户界面设计”，但这是另一回事。

* * *

## 回答 #44

> 赞同：1
> 
> 时间：2009-02-13T21:24:05.593

吃自己的狗粮实际上并不是最好的方法。事实并非如此，但缺乏对用户关注的关注也不是全部。随着您的专业知识的增长，与普通用户关注的距离越来越远也是如此。我认识的大多数开发人员都希望在创建解决问题的软件方面做得很好。

发生脱节的地方是想象力的失败。作为人类，我们无法思考所有的可能性和组合。当然，我们试图用“更好”的方法来克服这个问题。

我发现行之有效的唯一方法是让自己在接受用户反馈时处于危险之中。通过这种方式，我不仅会了解我正在解决的问题，而且会随着用户使用我的软件而持续不断地了解我正在解决的问题。

这不是简单的解决方案。你不仅要成为一名优秀的程序员，还要擅长 X，而 X 是你要解决的任何问题。通过擅长 X，您可以获得所需的经验来理解可能性和限制。您可以开始在您的代码中考虑这一点，从而在您提供的功能和 UI 设计中产生更精美的软件。

这不是重新训练你的大脑，而是获得有效解决问题所需的经验。如果您使用 Stack Overflow 之类的全新事物，则尤其如此，只有当您是用户反馈线时才能获得体验。

* * *

## 回答 #45

> 赞同：1
> 
> 时间：2009-04-20T07:56:32.147

为您的母亲设计。

* * *

## 回答 #46

> 赞同：1
> 
> 时间：2009-06-01T04:11:00.650

部分答案是 UI 设计比看起来要困难得多，就像编码比设计师看起来要困难得多一样。两人在不同程度上担心非常不同的事情，这除了在方法和所需技能上的明显差异外，还导致他们专注于彼此看不见的问题。

我发现它有助于描述我的应用程序以及如何在没有任何可视化工具的情况下向某人使用它。它有助于专注于实际必要和重要的内容，并反馈其他人可以快速理解的内容。我什至在我有一行代码之前就可以做到这一点，所以这样做非常便宜，并且不需要任何艺术技巧。另一个优点是，用语言表达应用程序可以让我的大脑部分工作，否则在编码时会保持休眠状态，我可以在我说话时开始“看到”应用程序工作（或不工作）。

* * *

## 回答 #47

> 赞同：1
> 
> 时间：2009-10-30T14:56:34.200

“我们可以做些什么来重新训练我们的大脑，使其更有效地设计令人愉悦和有用的表示层？”

是的 - 使用接口驱动的架构。*首先*根据您的业务需求设计一个用户流程——*然后*根据您的用户流程设计您的编程逻辑和数据库。如果您将中间层和后端构建为旨在为前端服务的东西，那么您将拥有一个以用户为中心的应用程序。

* * *

## 回答 #48

> 赞同：0
> 
> 时间：2009-02-05T20:09:28.217

程序员通常不擅长 UI 设计。有专门从事可用性和 UI 设计的设计师，在开发商业软件/网站/娱乐等时，他们应该受到尊重。

大多数程序员面临的问题是，他们无法通过自己的眼光去了解是什么让事情更容易理解和消化。

最好的 UI 设计原则之一是始终拥有一个设计简单且可供目标用户访问的界面。

一个伟大而简单的例子是电梯。通常，您按下按钮来打开/关闭门以及穿过建筑物的楼层。你能想象如果你有旋钮和开关，你必须翻转才能从 1 楼到 2 楼？如果您必须将面板滑回以使用三个彩色按键访问三个按键开关，您必须按特定顺序转动才能到达特定楼层怎么办？

你可以很快看出一个糟糕的界面有多难，一个好的界面有多简单和好用。

* * *

## 回答 #49

> 赞同：0
> 
> 时间：2009-02-06T03:33:08.507

我相信所有的 CS 程序员都有能力做出好的可用设计，因为可用性设计需要开发人员按照一定的路径和规则进行思考。而对于一些程序员来说，开发一个好的“有吸引力的”设计几乎是不可能的。这并不意味着两者之间有着不可分割的联系。就像莫扎特能写出优美的音乐，却不擅长足球。

* * *

## 回答 #50

> 赞同：0
> 
> 时间：2009-02-07T21:59:50.067

根据用户反馈，如果您使用的是 Mac ，Silverback ( [http://silverbackapp.com/ ) 是一个很棒的工具。](http://silverbackapp.com/)我建议创建一个待办事项列表（查找这部电影、观看预告片、与该演员一起查找这部电影、购买它等）并让用户坐在那里并在列表中向下移动。

最重要的是不要告诉他们如何做，而是看他们如何完成任务（对于第二个场景，他们是按演员浏览还是按字母顺序找到场景？）。你可以从公司里不精通技术的人开始，然后进入 Craigslist 或上街，随机花钱请人进行测试。

* * *

## 回答 #51

> 赞同：0
> 
> 时间：2009-02-10T16:23:19.367

我将首先说我与问题所表达的人有类似的缺陷。尽管如此，我认为任何人做任何事情都会失败的唯一原因是：

*   他们不理解它，也从未研究过如何以及为什么这样做的理论
*   他们从未练习过足以成为专家

所以我的建议是首先获取描述该主题的书籍和网页并进行研究。这里有很多很好的答案，我会将[Tog On Interface](https://rads.stackoverflow.com/amzn/click/com/0201608421)添加到列表中。还要看看那些被[认为很棒](http://blog.wired.com/gadgets/2008/04/historys-five-b.html)的用户界面，比如 Mac、iPhone 和谷歌。

第二步是刚开始创建 UI。这听起来很简单，但如果这不是你的工作描述的一部分，你可能需要自己做这件事。作为 UI 开发人员参与 Web 开发项目。也许它是您自己的项目或其他人的项目，但擅长创建网页可以为您提供所需的体验，而且应该不难做到。祝你好运！

* * *

## 回答 #52

> 赞同：0
> 
> 时间：2009-02-10T22:07:06.967

> “其他人做了什么来消除他们在这方面的不足？”
> — 克里斯·巴兰斯

1.  与您能找到的最不精通计算机的最终用户一起工作。
    （一个新的，从未见过你的软件）。

2.  从他们那里获得关于是什么让他们觉得糟糕的反馈。

3.  解决这些问题，把它交给另一个不熟悉电脑的用户，
4.  再重复一遍这个过程。。

当足够多的新用户使用你的产品时，你就知道你已经完成了你的工作。

*（而且你的软件可能看起来很像微软的，你可能不会喜欢使用它......）*

## 但这不是重点！关键是最终用户可以使用它，并且享受使用它！

## 不是开发商！

另请阅读[这篇文章](http://www.uie.com/articles/three_hund_million_button)，我发现它在这个领域很有帮助。它基本上表明您应该屈服于用户似乎想要的东西。

换一种方式...

你必须看看用户**已经在尝试**做什么......

## 人行道和学生

在我上大学的校园里，学生们在往返课堂上创造了一条小径。当学校注意到这条小路时，他们在人们已经走过的地方竖起了栅栏。学校做错事了。 *你想在学生已经走过的地方建一条人行道！*

## 视频商店和 Netflix

再举一个例子，想想最近的音像店历史：很久以前有很多音像店：Block Buster Video等……人们不喜欢那些音像店的什么？当然是滞纳金。 **因此，Netflix 出现并取消了滞纳金，因为它更多地是客户/最终用户想要的。**

现在，Block Buster 与所有其他收费视频商店一起破产。

是不是更难做到这一点？关闭你的大脑并给人们他们想要的东西？当然是……它让你的意志屈服于他们……这总是更困难，但最终它达到了为最终用户提供他们想要的东西的目标。

* * *

## 回答 #53

> 赞同：0
> 
> 时间：2009-02-10T23:20:46.027

> 我们可以做些什么来重新训练我们的大脑，使其更有效地设计令人愉悦和有用的表示层？

是的。观察试图使用您的软件的用户，不要帮助他们。也称为可用性测试。

可用性测试的基本思想是，你找一个与你的目标受众有相似背景的人，他们以前没有看过你的软件，并要求他们执行一系列典型的任务。理想情况下，他们应该尝试大声说出他们的想法，以便让您更深入地了解他们的思维过程。然后你看他们做什么。至关重要的是，无论这种冲动多么不可抗拒，你都不会帮助他们。结果可能非常令人惊讶且极具启发性。使用单向镜、摄像机等进行可用性测试可能非常有趣，但这并不是获得大部分好处所必需的。[在Krug 的优秀书籍 Don't make me think: a common sense guide to web usability](https://rads.stackoverflow.com/amzn/click/com/0321344758)中有很好的描述如何进行可用性测试. 他的大部分建议同样适用于测试桌面应用程序。

* * *

## 回答 #54

> 赞同：0
> 
> 时间：2009-02-10T23:28:10.983

我认为我们不能设计 UI 的原因是因为我们是完美主义者，无法决定什么时候足够好就足够好。我知道我个人无法忍受设计 UI，因为我总是怀疑自己并说：“不，这还不够好。”

* * *

## 回答 #55

> 赞同：0
> 
> 时间：2009-02-11T18:00:24.493

没有其他人建议但对您有很大帮助的是参加人因工程课程（通常是研究生水平）。如果你不想参加这门课程，至少去找课本并阅读它们。

* * *

## 回答 #56

> 赞同：0
> 
> 时间：2009-02-11T19:40:42.770

我认为部分原因是因为 UI 设计和程序设计经常有相互冲突的目标。当我编程时，我经常想“最简单的方法是什么？”。在设计 UI 时，最简单的方法并不总是对用户最友好。如果你两者都做，你可能倾向于选择最简单的实现，这会对用户友好性产生负面影响。

我也相信程序员离产品太近了，无法从用户的角度来看待它。对应用程序编程的人来说似乎非常简单和直观的东西对用户来说可能不是。有必要获得用户的输入。

UI 设计也不总是对或错。不同的人会以不同的方式评估 UI。例如，有些人讨厌 Office 中新的“功能区”UI，有些人喜欢它。一些人认为 Apple 的 OSX UI 很棒，另一些人则不喜欢它并且觉得它很难使用。不管你想出什么样的用户界面，你都会有不喜欢它的人。

* * *

## 回答 #57

> 赞同：0
> 
> 时间：2009-02-11T19:47:41.880

简单的。

开发人员不是设计师。他们没有受过培训或尝试学习设计，那么为什么他们应该擅长 UI 设计之类的东西呢？这几乎就像在说“为什么对一些开发人员来说会计这么难？”

UI 设计本质上是设计，而设计是规则的可视化表示。擅长设计意味着您理解为什么某些东西应该以某种方式看起来、行为和表现（例如为什么要突出显示链接或为什么标题应该位于页面顶部）。

设计和开发是两个完全不同的野兽，但都需要背景知识和实际工作。如果您不愿意花时间学习这些主题之一，那么无论您如何使您的某个程序/网站看起来不错，您都不会很擅长。

* * *

## 回答 #58

> 赞同：0
> 
> 时间：2009-02-11T20:17:44.520

为什么 UI 设计对一些开发人员来说如此困难？

这有点像问为什么篮球对足球运动员来说很难。

* * *

## 回答 #59

> 赞同：0
> 
> 时间：2009-02-12T09:04:06.753

当开发人员考虑 UI 时，他们通常会想到可以用于此或此任务的完美小部件（小部件是指文本区域、组合框、交互式 Ajax 搜索字段......）。UI，尤其是 HCI，应该被考虑在较低的层次上。将关于 UI 的反思分为 4 个步骤是很有趣的：

*   任务和概念模型：从开发人员的角度来看，这是最难理解的。你必须从你的反思中抽象出你对未来平台的所有想法，你可以使用的语言。[ [Paterno, 97](http://www.dimap.ufrn.br/~jair/piu/artigos/Paterno-Interact97.pdf) ] 是该领域的参考文献。您将任务定义为树，其中任务具有子任务。这是导出任务的示例。

[![](https://lh4.ggpht.com/_-j4eRfEGBNs/SZPsTRErxEI/AAAAAAAAABI/myM4RzZrqLY/s288/task_export.png)](http://picasaweb.google.com/lh/photo/lmkMe3UzOjqVu0LJeiIGcw?feat=embedwebsite)

*   然后定义抽象 UI：这是关于将任务和子任务分组到工作区中。
*   具体的 UI：您现在可以决定使用哪些交互器。您现在应该考虑平台（大屏幕、PDA、手机......）。这是关键。您的任务模型和抽象 UI 可以在多个平台之间进行分解。
*   最终的 UI，以选定的编程语言实现。

* * *

## 回答 #60

> 赞同：0
> 
> 时间：2009-02-12T23:01:10.093

也许是因为一些开发者从 Dos 开始，并继续部分在命令行操作系统上工作。
或者因为我们中的一些人在编写软件，**因为计算机有一些正常的逻辑**，不像人类那样。:-)

* * *

## 回答 #61

> 赞同：0
> 
> 时间：2009-02-12T23:14:45.600

因为通常他们不是 UI 设计师。它是一个不同的技能。就是这样。

* * *

## 回答 #62

> 赞同：0
> 
> 时间：2009-02-13T00:55:52.970

因为它是一套***不同***的技能。成为网页设计师所需的技能与成为程序员所需的技能不同。是的，很少有技能可以重叠，比如 HTML、CSS、Javascript，但本质上程序员对是什么让网页设计成为好的网页设计一无所知，反之亦然。

温迪

* * *

## 回答 #63

> 赞同：0
> 
> 时间：2009-02-13T01:10:31.220

UI设计是一种完全不同的技能。它与视觉艺术密切相关——能够欣赏和创造视觉对称和美感。无论出于何种原因，通常编码人员都不擅长视觉艺术。我知道有例外 - 但作为一般规则 - 它成立。

所以真的（除非你是这个奇怪规则的例外）——它应该像其他你没有天赋的领域一样处理。你应该评估你是否能和你得到的排骨相处得很好——或者当你有机会的时候，甚至可以花一点精力改进。但是，您最好开发您有能力的领域，并可能寻求与在您没有能力的领域中强大的人一起工作。

一本涵盖这个想法的好书是：现在，马库斯·白金汉 (Marcus Buckingham) 的《发现你的优势》……它很容易阅读。

* * *

## 回答 #64

> 赞同：0
> 
> 时间：2009-02-13T14:40:31.490

用户界面设计和软件开发工作在大脑的两个不同方面。并不是设计师不擅长开发，反之亦然，只是他们试图用错误的大脑来做这件事。没有严肃的人会不同意。

* * *

## 回答 #65

> 赞同：0
> 
> 时间：2009-11-26T07:12:19.453

我为社交圈之外的人设计了一个程序并观察他们的行为。在这样做的过程中，我不再受制于朋友的偏见，也不再受制于自己的骄傲和自我。在改进应用程序的过程中，我对设计问题变得更加谦虚和敏感。我了解了面向任务的设计和简单性的重要性。我了解到拥有太多功能的代价。有经验，你也会。

我强烈推荐的一些参考资料：

*   joelonsoftware jef raskin 的“人性化界面”
*   robin william 的“非设计师设计指南”
*   alistpart 上的大部分 ui 文章
*   jwz 的编程博客
*   苹果人机界面指南

我强烈建议您忽略一些参考资料和哲学：

*   “主题”
*   一般的桌面应用程序，除非您需要驱动程序/文件系统访问
*   “越多越好”的理念

# ajax - 我是否正确理解 Ajax？

> ID：514110
> 
> 赞同：6
> 
> 时间：2009-02-05T01:03:47.110
> 
> 标签：ajax

我一直在阅读有关 Ajax 的信息，并希望从 stackoverflow 社区中了解我是否正确理解了所有内容。

因此，正常的客户端服务器交互是用户拉起 Web 浏览器类型的 url，并向服务器发送 HTTP 请求，从 Web 服务器请求页面和资源（css、pics）。Web 服务器通过 HTTP 响应客户端请求的页面/资源，浏览器呈现 html/JavaScript 供用户查看页面。

1）那么可以肯定地说XMLHttpRequest（XHR）对象与浏览器执行相同的过程，除了您不从服务器请求html，您请求某种格式的文本？

2) XHR 对象是否真的很像一个常规对象，可以由创建对象的程序操作（如普通对象），但也可以通过 HTTP 与另一个程序（Web 服务器）发送和接收数据？

3) 所以在我看来，当创建 XHR 时，它会被加载到内存中，并且我们在执行 request.open(“GET”, url, true) 时设置了一些对象参数。一旦我们执行 request.send(null)，对象基本上会尝试通过 HTTP “获取” url，一旦我们从服务器获取数据，它就会被放入 responseText 参数中。我是否正确理解这一点？

4）也是同步与异步的。当我想到同步时，我想到了必须按顺序执行的步骤。例如，我按下一个按钮，数据被发送到服务器，我必须等待数据返回才能做任何其他事情。使用异步连接，我会按下按钮，数据被发送到服务器，当数据被发回时，我做任何我想做的事情。这是一个很好的类比吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-02-05T01:09:43.590

1) 不。XMLHttpRequest 对象完全符合其名称的含义——它发起一个 HTTP 请求。此请求可以是 XML、HTML 或 PHP。归根结底，浏览器并不关心，因为在 AJAX 请求中，它不会解析请求——您必须自己处理。所以它不会自动从 AJAX 请求中呈现 HTML。

2）~~我不确定操作（XHR 对象可能是不可变的）但可能。您是否需要扩展或操作它？~~ 是的，您可以更改对象的属性等。我道歉。一开始我没看懂你：）

3) 是的。

4）这是一个很好的类比。这正是发生的事情。另一个类比是 4 车道高速公路是异步的，就像单向街道是同步的。如果一辆车在 4 车道高速公路上抛锚，其余的可以继续以正常速度行驶——但如果一辆车在单向公路上抛锚，一切都会冻结。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-05T01:35:30.340

在这里，我给您留下一个很好的图形，以清楚地看到同步和异步应用程序模型之间的行为差​​异：

[![](https://i.stack.imgur.com/MoTXt.png)](https://i.stack.imgur.com/MoTXt.png)
[（来源：[adaptivepath.com](http://www.adaptivepath.com/uploads/archive/images/publications/essays/ajax-fig2.png)）]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-05T01:08:33.060

看来您已经掌握了 AJAX 的工作原理。在您对 AJAX 应用程序管道的总结中，我没有什么不同意的。

然而，我会说，使用 XMLHttpRequest 对象，您不限于 GET。您还可以使用 POST 和其他 HTTP 动词。

通过异步调用，您可以注册一个回调函数，XMLHttpRequest 对象会在异步请求完成时调用您的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-05T01:11:21.823

对我来说似乎没问题。

您的第一点虽然不完全正确，但您可以使用 ajax 从服务器请求 html，而不必像大多数示例显示的那样使用文本、json 或 xml。

# database - 如何最好地表示数据库中具有可变属性的项目？

> ID：514111
> 
> 赞同：1
> 
> 时间：2009-02-05T01:03:50.107
> 
> 标签：database, database-design

假设您要创建小部件列表

小部件制造商都创建具有不同数量和类型属性的小部件。并且 Widget 卖家对于他们想要在数据库中存储和显示的属性的类型和数量都有不同的偏好。

现在的问题是，每次您添加一个新的小部件时，它可能具有当前不存在于任何其他小部件的属性，目前您通过修改表并为该属性添加一个新列来完成此操作，然后修改所有表格和报告以反映此更改。

您如何着手创建一个数据库，该数据库考虑到小部件上的属性是流动的并且可以从小部件更改为小部件。

理想情况下，小部件属性应该是用户可以根据他/她的偏好和需求定义的东西

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-05T01:08:02.220

我将有一个用于小部件的表和一个用于小部件属性的表。例如：

```
Widgets
   - Id
   - Name

WidgetAttributes
   - Id
   - Name 
```

然后，您将有另一个表，其中包含哪些小部件具有哪些属性：

```
WidgetAttributeMap
  - Id
  - WidgetId
      (a value from the Id column in the Widget table)
  - WidgetAttributeId
      (a value from the Id column in the WidgetAttribute table) 
```

这样，您可以通过修改 WidgetAttributeMap 表中的行来向小部件添加属性，而不是通过修改小部件表的结构。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-05T01:38:01.317

casperOne 正在展示道路，尽管我个人会为属性值再添加一个表，最终得到

```
Widgets
  -WidgetID (pk)
  -Name

WidgetAttributes
  -AttributeID (pk)
  -Name

WidgetHasAttribute
  -WidgetID (pk)
  -AttributeID (pk)

WidgetAttributeValues
  -ValueID (pk)
  -WidgetID
  -AttributeID
  -Value 
```

为了检索结果，您希望连接表并执行聚合连接，因此您最终可以得到如下所示的数据（例如）：

```
Name      Properties
Widget1   Attr1:Value1;Attr2:Value2;...etc 
```

然后，您可以在业务逻辑层中拆分属性字符串并根据需要使用。

关于如何加入数据的建议：

```
SELECT w.Name, wa.Name + ':' + wav.Value 
FROM ((
    Widgets w 
  INNER JOIN 
    WidgetHasAttribute wha 
   ON w.WidgetID = wha.WidgetID)
  INNER JOIN WidgetAttributes wa
   ON wha.AttributeID = wa.AttributeID)
  INNER JOIN WidgetAttributeValues wav
   ON (w.WidgetID = wav.WidgetID AND wa.AttributeID = wav.AttributeID) 
```

[您可以在此处](https://www.simple-talk.com/sql/t-sql-programming/concatenating-row-values-in-transact-sql/)阅读有关聚合串联的更多信息。

就性能而言，只要您确保索引所有经常读取的列，这应该不是问题 - 也就是说

*   所有 ID 列，*因为它们将在连接子句中进行比较*
*   WidgetAttributes.Name 和 WidgetAttributeValues.Value，*因为它们将被连接*

# c - Duff 的设备是如何工作的？

> ID：514118
> 
> 赞同：170
> 
> 时间：2009-02-05T01:06:05.327
> 
> 标签：c, duffs-device

我[在 Duff 的设备上阅读了 Wikipedia 上的文章，但](http://en.wikipedia.org/wiki/Duff%27s_device)我不明白。我真的很感兴趣，但是我已经阅读了几次那里的解释，但我仍然不明白 Duff 的设备是如何工作的。

更详细的解释是什么？

* * *

## 回答 #1

> 赞同：258
> 
> 时间：2009-02-05T02:25:55.370

其他地方有一些很好的解释，但让我试一试。（这在白板上要容易得多！）这是带有一些符号的 Wikipedia 示例。

假设您要复制 20 个字节。第一遍程序的流程控制为：

```
int count;                        // Set to 20
{
    int n = (count + 7) / 8;      // n is now 3\.  (The "while" is going
                                  //              to be run three times.)

    switch (count % 8) {          // The remainder is 4 (20 modulo 8) so
                                  // jump to the case 4

    case 0:                       // [skipped]
             do {                 // [skipped]
                 *to = *from++;   // [skipped]
    case 7:      *to = *from++;   // [skipped]
    case 6:      *to = *from++;   // [skipped]
    case 5:      *to = *from++;   // [skipped]
    case 4:      *to = *from++;   // Start here.  Copy 1 byte  (total 1)
    case 3:      *to = *from++;   // Copy 1 byte (total 2)
    case 2:      *to = *from++;   // Copy 1 byte (total 3)
    case 1:      *to = *from++;   // Copy 1 byte (total 4)
           } while (--n > 0);     // N = 3 Reduce N by 1, then jump up
                                  //       to the "do" if it's still
    }                             //        greater than 0 (and it is)
} 
```

现在，开始第二遍，我们只运行指定的代码：

```
int count;                        //
{
    int n = (count + 7) / 8;      //
                                  //

    switch (count % 8) {          //
                                  //

    case 0:                       //
             do {                 // The while jumps to here.
                 *to = *from++;   // Copy 1 byte (total 5)
    case 7:      *to = *from++;   // Copy 1 byte (total 6)
    case 6:      *to = *from++;   // Copy 1 byte (total 7)
    case 5:      *to = *from++;   // Copy 1 byte (total 8)
    case 4:      *to = *from++;   // Copy 1 byte (total 9)
    case 3:      *to = *from++;   // Copy 1 byte (total 10)
    case 2:      *to = *from++;   // Copy 1 byte (total 11)
    case 1:      *to = *from++;   // Copy 1 byte (total 12)
           } while (--n > 0);     // N = 2 Reduce N by 1, then jump up
                                  //       to the "do" if it's still
    }                             //       greater than 0 (and it is)
} 
```

现在，开始第三遍：

```
int count;                        //
{
    int n = (count + 7) / 8;      //
                                  //

    switch (count % 8) {          //
                                  //

    case 0:                       //
             do {                 // The while jumps to here.
                 *to = *from++;   // Copy 1 byte (total 13)
    case 7:      *to = *from++;   // Copy 1 byte (total 14)
    case 6:      *to = *from++;   // Copy 1 byte (total 15)
    case 5:      *to = *from++;   // Copy 1 byte (total 16)
    case 4:      *to = *from++;   // Copy 1 byte (total 17)
    case 3:      *to = *from++;   // Copy 1 byte (total 18)
    case 2:      *to = *from++;   // Copy 1 byte (total 19)
    case 1:      *to = *from++;   // Copy 1 byte (total 20)
           } while (--n > 0);     // N = 1  Reduce N by 1, then jump up
                                  //       to the "do" if it's still
    }                             //       greater than 0 (and it's not, so bail)
}                                 // continue here... 
```

现在复制了 20 个字节。

注意：原始 Duff 的设备（如上所示）复制到`to`地址处的 I/O 设备。因此，没有必要增加指针`*to`。在两个内存缓冲区之间复制时，您需要使用`*to++`.

* * *

## 回答 #2

> 赞同：115
> 
> 时间：2009-02-05T01:15:30.537

[Dobb 博士日记](http://www.ddj.com/web-development/184406208)中的解释是我在该主题上找到的最好的解释。

这是我的 AHA 时刻：

```
for (i = 0; i < len; ++i) {
    HAL_IO_PORT = *pSource++;
} 
```

变成：

```
int n = len / 8;
for (i = 0; i < n; ++i) {
    HAL_IO_PORT = *pSource++;
    HAL_IO_PORT = *pSource++;
    HAL_IO_PORT = *pSource++;
    HAL_IO_PORT = *pSource++;
    HAL_IO_PORT = *pSource++;
    HAL_IO_PORT = *pSource++;
    HAL_IO_PORT = *pSource++;
    HAL_IO_PORT = *pSource++;
}

n = len % 8;
for (i = 0; i < n; ++i) {
    HAL_IO_PORT = *pSource++;
} 
```

变成：

```
int n = (len + 8 - 1) / 8;
switch (len % 8) {
    case 0: do { HAL_IO_PORT = *pSource++;
    case 7: HAL_IO_PORT = *pSource++;
    case 6: HAL_IO_PORT = *pSource++;
    case 5: HAL_IO_PORT = *pSource++;
    case 4: HAL_IO_PORT = *pSource++;
    case 3: HAL_IO_PORT = *pSource++;
    case 2: HAL_IO_PORT = *pSource++;
    case 1: HAL_IO_PORT = *pSource++;
               } while (--n > 0);
} 
```

* * *

## 回答 #3

> 赞同：84
> 
> 时间：2009-02-05T01:54:18.553

Duff 的设备有两个关键点。首先，我怀疑这是更容易理解的部分，循环展开。通过避免检查循环是否完成和跳回循环顶部所涉及的一些开销，这以更大的代码大小换取了更快的速度。CPU在执行直线代码而不是跳跃时可以运行得更快。

第二个方面是switch语句。它允许代码第一次跳转到循环的*中间*。令大多数人惊讶的是，这样的事情是被允许的。嗯，这是允许的。执行从计算的 case 标签开始，然后一直*到*每个连续的赋值语句，就像任何其他 switch 语句一样。在最后一个 case 标签之后，执行到达循环的底部，此时它跳回顶部。循环的顶部*在*switch 语句内，因此不再重新评估 switch。

原始循环展开八次，因此迭代次数除以八。如果要复制的字节数不是八的倍数，那么还有一些字节剩余。大多数一次复制字节块的算法将在最后处理剩余的字节，但 Duff 的设备在开始时处理它们。该函数计算`count % 8`switch 语句以计算余数，跳转到那么多字节的 case 标签，并复制它们。然后循环继续复制八个字节的组。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2009-02-05T01:17:26.163

duffs 设备的目的是减少在紧凑的 memcpy 实现中进行的比较次数。

假设您想将 'count' 字节从 a 复制到 b，直接的方法是执行以下操作：

```
 do {                      
      *a = *b++;            
  } while (--count > 0); 
```

您需要比较计数多少次才能查看它是否高于 0？“数”次。

现在，duff 设备使用了开关盒的一个令人讨厌的无意副作用，它允许您减少计数 / 8 所需的比较次数。

现在假设您想使用 duffs 设备复制 20 个字节，您需要多少次比较？只有 3 个，因为您一次复制 8 个字节，除了~~最后~~一个您只复制 4 个的第一个字节。

更新：您不必进行 8 次比较/case-in-switch 语句，但在函数大小和速度之间进行权衡是合理的。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2010-08-28T12:09:49.097

当我第一次阅读它时，我将其自动格式化为

```
void dsend(char* to, char* from, count) {
    int n = (count + 7) / 8;
    switch (count % 8) {
        case 0: do {
                *to = *from++;
                case 7: *to = *from++;
                case 6: *to = *from++;
                case 5: *to = *from++;
                case 4: *to = *from++;
                case 3: *to = *from++;
                case 2: *to = *from++;
                case 1: *to = *from++;
            } while (--n > 0);
    }
} 
```

我不知道发生了什么。

也许不是在问这个问题时，但现在[维基百科有一个很好的解释](http://en.wikipedia.org/wiki/Duffs_device#Reason_it_works)

> 凭借 C 中的两个属性，设备是有效的、合法的 C：
> 
> *   语言定义中对 switch 语句的宽松规范。在设备发明的时候，这是 C 编程语言的第一版，它只要求 switch 的受控语句是语法上有效的（复合）语句，其中 case 标签可以出现在任何子语句的前缀。结合以下事实，在没有 break 语句的情况下，控制流将从一个 case 标签控制的语句流向下一个 case 标签控制的语句，这意味着代码指定了从顺序源地址到内存映射的输出端口。
> *   在 C 中合法地跳到循环中间的能力。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-06-20T08:11:25.893

1：Duffs 设备是循环展开的一种特殊实现。循环展开是一种优化技术，如果您有一个在循环中执行 N 次的操作 - 您可以通过执行循环 N/n 次然后在循环中内联（展开）循环代码 n 次来交换程序大小以换取速度，例如替换：

```
for (int i=0; i<N; i++) {
    // [The loop code...] 
} 
```

和

```
for (int i=0; i<N/n; i++) {
    // [The loop code...]
    // [The loop code...]
    // [The loop code...]
    ...
    // [The loop code...] // n times!
} 
```

如果 N % n == 0 效果很好 - 不需要 Duff！ **如果那不是真的，那么您必须处理其余部分 - 这是一种痛苦。**

2：Duffs 设备与此标准循环展开有何不同？
当 N % n != 0 时，Duffs 设备只是处理剩余循环周期的一种巧妙方法。整个 do / while 根据标准循环展开执行 N / n 次（因为适用情况 0）。在循环的~~最后~~一次运行中，案例开始运行，我们将循环代码运行“剩余”次数 - 剩余的通过循环运行“正常”运行。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-02-05T01:19:40.777

虽然我不是 100% 确定你要的是什么，但这里有......

Duff 的设备解决的问题是循环展开之一（您无疑会在您发布的 Wiki 链接上看到）。这基本上等同于优化运行时效率，超过内存占用。Duff 的设备处理串行复制，而不仅仅是任何旧问题，而是如何通过减少需要在循环中进行比较的次数来进行优化的经典示例。

作为一个可能更容易理解的替代示例，假设您有一个要循环的项目数组，并且每次都向它们添加 1...通常，您可能使用 for 循环，并循环大约 100 次. 这看起来很合乎逻辑，而且……但是，可以通过展开循环来进行优化（显然不会太远……或者你也可以不使用循环）。

所以一个常规的for循环：

```
for(int i = 0; i < 100; i++)
{
    myArray[i] += 1;
} 
```

变成

```
for(int i = 0; i < 100; i+10)
{
    myArray[i] += 1;
    myArray[i+1] += 1;
    myArray[i+2] += 1;
    myArray[i+3] += 1;
    myArray[i+4] += 1;
    myArray[i+5] += 1;
    myArray[i+6] += 1;
    myArray[i+7] += 1;
    myArray[i+8] += 1;
    myArray[i+9] += 1;
} 
```

Duff 的设备所做的就是在 C 中实现这个想法，但是（正如您在 Wiki 上看到的）使用串行副本。您在上面看到的未展开示例是 10 次比较，而原始版本为 100 次 - 这相当于一个次要但可能很重要的优化。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-03-11T22:40:28.960

这是一个不详细的解释，我认为这是 Duff 设备的症结所在：

问题是，C 基本上是汇编语言的一个很好的外观（具体来说是 PDP-7 汇编；如果你研究过，你会发现它们的相似之处有多么惊人）。而且，在汇编语言中，你并没有真正的循环——你有标签和条件分支指令。所以循环只是整个指令序列的一部分，带有一个标签和一个分支：

```
 instruction
label1: instruction
        instruction
        instruction
        instruction
        jump to label1  some condition 
```

并且 switch 指令在某种程度上向前分支/跳转：

```
 evaluate expression into register r
        compare r with first case value
        branch to first case label if equal
        compare r with second case value
        branch to second case label if equal
        etc....
first_case_label: 
        instruction
        instruction
second_case_label: 
        instruction
        instruction
        etc... 
```

在汇编中很容易想象如何组合这两个控制结构，当你这样想时，它们在 C 中的组合似乎不再那么奇怪了。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-04-23T06:52:54.727

这是我发布的另一个关于 Duff 设备的问题的答案，该问题在作为重复问题被关闭之前得到了一些支持。我认为它在这里提供了一些有价值的背景信息，说明为什么应该避免这种结构。

“这是[Duff 的设备](http://en.wikipedia.org/wiki/Duff's_device)。它是一种展开循环的方法，它避免了必须添加辅助修复循环来处理循环迭代次数不知道是展开因子的精确倍数的情况。

由于这里的大多数答案似乎总体上是积极的，我将强调缺点。

使用此代码，编译器将难以对循环体应用任何优化。如果您只是将代码编写为一个简单的循环，那么现代编译器应该能够为您处理展开。通过这种方式，您可以保持可读性和性能，并希望将其他优化应用于循环体。

其他人引用的维基百科文章甚至说，当从 Xfree86 源代码中删除这种“模式”时，性能实际上得到了改善。

这种结果是盲目手动优化您碰巧认为可能需要它的任何代码的典型结果。它会阻止编译器正常工作，使您的代码可读性降低并且更容易出现错误，并且通常会减慢它的速度。如果你一开始就以正确的方式做事，即编写简单的代码，然后分析瓶颈，然后进行优化，你甚至不会想到使用这样的东西。无论如何，都不是现代 CPU 和编译器。

理解它很好，但如果你真的使用它，我会感到惊讶。”

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-07-20T13:24:27.680

刚刚试验，发现另一种变体在没有交错`switch`语句和`do`-循环的情况下相处`while`：

```
int n = (count + 1) / 8;
switch (count % 8)
{
    LOOP:
case 0:
    if(n-- == 0)
        break;
    putchar('.');
case 7:
    putchar('.');
case 6:
    putchar('.');
case 5:
    putchar('.');
case 4:
    putchar('.');
case 3:
    putchar('.');
case 2:
    putchar('.');
case 1:
    putchar('.');
default:
    goto LOOP;
} 
```

从技术上讲，它`goto`仍然实现了一个循环，但这个变体可能更具可读性。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-08-29T15:55:45.760

这是使用 Duff 设备的 64 位 memcpy 的工作示例：

```
#include <iostream>
#include <memory>

inline void __memcpy(void* to, const void* from, size_t count)
{
    size_t numIter = (count  + 56) / 64;  // gives the number of iterations;  bit shift actually, not division
    size_t rest = count & 63; // % 64
    size_t rest7 = rest&7;
    rest -= rest7;

    // Duff's device with zero case handled:
    switch (rest) 
    {
        case 0:  if (count < 8)
                     break;
                 do { *(((unsigned long long*&)to)++) = *(((unsigned long long*&)from)++);
        case 56:      *(((unsigned long long*&)to)++) = *(((unsigned long long*&)from)++);
        case 48:      *(((unsigned long long*&)to)++) = *(((unsigned long long*&)from)++);
        case 40:      *(((unsigned long long*&)to)++) = *(((unsigned long long*&)from)++);
        case 32:      *(((unsigned long long*&)to)++) = *(((unsigned long long*&)from)++);
        case 24:      *(((unsigned long long*&)to)++) = *(((unsigned long long*&)from)++);
        case 16:      *(((unsigned long long*&)to)++) = *(((unsigned long long*&)from)++);
        case 8:      *(((unsigned long long*&)to)++) = *(((unsigned long long*&)from)++);
                } while (--numIter > 0);
    }

    switch (rest7)
    {
        case 7: *(((unsigned char*)to)+6) = *(((unsigned char*)from)+6);
        case 6: *(((unsigned short*)to)+2) = *(((unsigned short*)from)+2); goto case4;
        case 5: *(((unsigned char*)to)+4) = *(((unsigned char*)from)+4);
        case 4: case4: *((unsigned long*)to) = *((unsigned long*)from); break; 
        case 3: *(((unsigned char*)to)+2) = *(((unsigned char*)from)+2);
        case 2: *((unsigned short*)to) = *((unsigned short*)from); break;
        case 1: *((unsigned char*)to) = *((unsigned char*)from);
    }
}

void main()
{
    static const size_t NUM = 1024;

    std::unique_ptr<char[]> str1(new char[NUM+1]);  
    std::unique_ptr<char[]> str2(new char[NUM+1]);

    for (size_t i = 0 ; i < NUM ; ++ i)
    {
        size_t idx = (i % 62);
        if (idx < 26)
            str1[i] = 'a' + idx;
        else
            if (idx < 52)
                str1[i] = 'A' + idx - 26;
            else
                str1[i] = '0' + idx - 52;
    }

    for (size_t i = 0 ; i < NUM ; ++ i)
    {
        memset(str2.get(), ' ', NUM); 
        __memcpy(str2.get(), str1.get(), i);
        if (memcmp(str1.get(), str2.get(), i) || str2[i] != ' ')
        {
            std::cout << "Test failed for i=" << i;
        }

    }

    return;
} 
```

它处理零长度情况（在原始 Duff 的设备中假设 num>0）。函数 main() 包含 __memcpy 的简单测试用例。

# silverlight - 在 Silverlight 中单击 HyperlinkBut ton 时如何避免蓝色边框？

> ID：514120
> 
> 赞同：6
> 
> 时间：2009-02-05T01:06:53.407
> 
> 标签：silverlight, hyperlink

我的应用程序有一个以图像为背景的 Silverlight 菜单。我在特定位置和大小使用一些空的 HyperlinkBut​​ton 来模拟图像上的真实按钮（认为是 HTML 图像映射）：

```
<HyperlinkButton x:Name="Portfolio" Width="86" Height="40" Canvas.Top="50" NavigateUri="/portfolio"/>
<HyperlinkButton x:Name="Analysis" Width="79" Height="40" Canvas.Top="50" Canvas.Left="124" NavigateUri="/analysis" BorderThickness="0"/>
<HyperlinkButton x:Name="News" Width="77" Height="40" Canvas.Top="50" Canvas.Left="240"  NavigateUri="/news"/>
<HyperlinkButton x:Name="Questions" Width="80" Height="40" Canvas.Top="50" Canvas.Left="357" NavigateUri="/questions"/>
<HyperlinkButton x:Name="Companies" Width="80" Height="40" Canvas.Top="50" Canvas.Left="477" NavigateUri="/companies"/> 
```

问题是当我单击这些按钮时，它会在单击事件期间显示与超链接按钮区域相对应的蓝色边框。有一种方法可以避免显示吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2010-08-22T16:18:27.920

我在其他博客中找到了答案，只需在 HyperLinkBut​​ton 实例中设置 IsTabStop="False"。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-05T19:27:42.233

有关样式控件的信息，请参阅[http://weblogs.asp.net/scottgu/pages/silverlight-tutorial-part-7-using-control-templates-to-customize-a-control-s-look-and-feel .aspx](http://weblogs.asp.net/scottgu/pages/silverlight-tutorial-part-7-using-control-templates-to-customize-a-control-s-look-and-feel.aspx)（向下跳到使用控件模板自定义控件部分的一半）。如果你想从默认样式开始（通常是一个好主意——从这里开始并添加/更改/删除东西，直到你得到你想要的东西）看看这里：http: [//msdn.microsoft.com/en-us/library /cc296242(VS.95).aspx](http://msdn.microsoft.com/en-us/library/cc296242(VS.95).aspx)。

在这种情况下，我认为罪犯是“FocusVisualElement”。您可以更改它的颜色，将可见性设置为“已折叠”，或者删除/更改“聚焦”状态，这样故事板就不会运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-08-14T14:58:23.810

您可以在 Blend 中编辑 HyperlinkBut​​ton 的模板： 1.右键单击控件选择“编辑模板->编辑副本” 2.在“状态”面板中单击“已按下” 3.更改名为“FocusVisualElement”的矩形的属性“描边”从纯色到“无刷”

[http://silverlight.net/forums/t/40896.aspx](http://silverlight.net/forums/t/40896.aspx)

# asp.net - Webforms 应用布局意见？

> ID：514130
> 
> 赞同：1
> 
> 时间：2009-02-05T01:08:37.397
> 
> 标签：asp.net, web-applications

我有一个非常简单的网络表单应用程序，允许现场技术人员从仓库订购零件。
本质上它是这样工作的：

1.  用户从过滤器下拉列表中选择一个类别，然后将该类别的项目绑定到 gridview 控件

2.  用户在 gridview 中找到一个项目并输入所需的数量（在每行模板字段的文本框中）

3.  用户根据需要重复 1 和 2

4.  用户看到完整申请的摘要

5.  用户确认项目并提交申请以进行处理

到目前为止，我的 UI 设计是通用的 dropdown-above-a-gridview，其中有一个类别下拉列表可以过滤 gridview，就像在引人注目的 asp.net ado 教程中一样：

    [http://static.asp.net/asp.net/images/dataaccess/15fig01vb.png](http://static.asp.net/asp.net/images/dataaccess/15fig01vb.png)

每个 gridview 行（在我的应用程序中，而不是在上图中）列出了项目的详细信息，并且如果用户想要申请该项目，则可以接受模板文本框中的数量输入。

鉴于用户在一次使用会话期间会想要来自不同类别的物品，我试图找出一种好的、用户友好的方式来允许用户输入一个物品的数量，有一种温暖的模糊感觉，他们的输入有被接受/存储，然后更改类别过滤器（从而将gridview绑定到不同的数据集）并根据需要多次从gridview中选择其他项目，然后总结它们的顺序并提交它。

我考虑过在第一个网格下方放置另一个网格，并在用户选择每个项目时动态添加项目。但这似乎很尴尬。网格下的无序列表或类似的简单结构同上。

我还考虑过将用户的选择存储在视图状态或会话状态中，并在另一个页面上显示摘要，有点像购物车之类的功能。也许这样做并在主页上使用某种 ajaxy goodness 在输入数量时显示一些温暖和模糊的东西？

世界青年会？你会怎么做？

TIA。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-05T18:29:17.170

可能是因为你的两个选择都很好——这取决于个人喜好。购物车的想法是众所周知的。但有时如果您必须在购物车和商品选择之间来回走动，它就会变老。

单独的网格有什么问题？- 这样您就可以将选择列表与订购的项目列表分开？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T04:55:17.007

为什么要让用户选择正确的类别，然后选择数量并点击按钮？

为什么不使用某种类型的自动完成搜索，这样他们就可以输入他们想要的产品名称？然后用户可以键入“widg”，得到一个下拉选项，点击标签进入数量字段，输入一个数字，然后点击回车。

也可以使用 aucocomplete 显示快速预览，例如单行数据。

如果它是应用程序的关键部分，则将所有这些放入页面顶部的另一个网格中，如果您认为实际的网格结果很重要，则可能在底部。

我不喜欢类别下拉列表的原因是熟悉他们的工作或公司的人通常知道他们正在尝试做的事情的名称甚至是 skus 编号。让他们选择一个类别而不是打字只会减慢他们的速度。我也讨厌遇到“这是哪个类别？” 片刻。例如，鸡是宠物、食物、牲畜还是食物生产者？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-06T05:07:47.180

我非常同意你的第一选择：用户需要在某个地方看到他们选择了什么，否则他们可能会继续选择它，认为它失败了。等待在摘要页面上显示它甚至不应该是一种选择。我认为绑定到另一个网格并没有什么问题，尽管中继器也是一个不错的选择。好吧，有很多选择。无论如何，如果有空间在一侧或另一侧进行此操作-尤其是左侧-我肯定会这样做，而不是在底部。此外，无论您选择在何处显示，用户都可以更改他们已经选择的项目的数量（或全部删除），从而获得奖励积分。

我喜欢搜索的想法，但要小心自动完成。谷歌风格很好，它在下面显示结果，但我看到人们开发了一些过于激进并且喜欢在你输入的内容上写的东西：这太糟糕了。祝你好运。

# objective-c - Objective-C中括号中的星号......这是什么意思？

> ID：514139
> 
> 赞同：3
> 
> 时间：2009-02-05T01:10:33.743
> 
> 标签：objective-c

来自 Objective-C 初学者的一个快速问题：括号中的星号在以下示例代码中是什么意思？是指针吗？提前致谢。

```
#import <Foundation/Foundation.h>

@interface Tire : NSObject
@end
@implementation Tire

- (NSString *) description
{
   return (@"I am a tire.");
}

@end 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-02-05T01:25:59.767

你是对的。* 表示描述返回一个指向 NSString 对象的指针。

# .net - 是否可以将多个模型对象发送到 ASP.NET MVC 视图？

> ID：514144
> 
> 赞同：4
> 
> 时间：2009-02-05T01:13:32.287
> 
> 标签：.net, asp.net-mvc, entity-framework, datamodel

在我的起始页上，我想显示我在其他页面上拥有的几个不同列表中的第一个项目 - 有点像 SO 上的“最近”页面显示最近的帖子和最近的评论。就我而言，我想在留言簿中列出最近的两个帖子，以及下一个即将发生的事件。

为了做到这一点，我怎样才能将几个模型对象传递给我的视图？甚至可能吗？如果没有，应该怎么做？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-02-05T01:43:02.477

tvanfosson 的解决方案的替代方案是创建一个强类型视图，以便您获得 cvompile-time 检查和更少的“魔术字符串”。

例子...

假设您有课程：

```
public class FrontPageViewData
{
    public List<Post> Posts { get; set; }
    public List<Comment> Comments { get; set; }
} 
```

然后在你的控制器中......

```
public ActionResult Index()
{
    FrontPageViewData viewData = new FrontPageViewData();
    viewData.Posts = DB.Posts.ToList();
    viewData.Comments = DB.Comments.ToList();
    return View(viewData);
} 
```

最后……在你看来。如果您设置视图注册行以使用它，这将允许您使用智能感知访问传入的视图数据（注意部分。这意味着 Model 属性将是传入 viewdata 参数的实例到您的 VIew 方法中控制器。

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<FrontPageViewData>" %>
<asp:Content ID="MainContent" ContentPlaceHolderID="MainContent" runat="server">
<%= Model.Posts.Count().ToString(); %>
<%= Model.Comments.Count().ToString(); %>
</asp:Content> 
```

当然，这只是一个演示，我不会逐字使用此代码。

# ruby-on-rails - 在 Rails 应用程序中使用 BigDecimal 与 Integer 的性能影响

> ID：514149
> 
> 赞同：1
> 
> 时间：2009-02-05T01:15:09.943
> 
> 标签：ruby-on-rails, ruby

在 Rails 应用程序中将某些字段存储为 BigDecimal 而不是 Integer 的效率会降低多少？

将使用这些值完成一些计算（一堆算术）。

这会影响 Rails、数据库或 Ruby 的性能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-05T01:34:39.840

在大多数重要的方面，BigDecimal 的效率都低于整数。它们占用更多空间，并且浮点数学比整数数学慢。

话虽如此，除非您进行大量计算，否则使用 BigDecimal 可能没问题，您可能不会注意到。

# php - 通过 .htaccess 在 PHP 中延长会话超时

> ID：514155
> 
> 赞同：7
> 
> 时间：2009-02-05T01:16:57.710
> 
> 标签：php, session, timeout

我想延长我的用户在一段时间不活动后保持登录到我的网站而不会自动注销的时间。我正在使用 PHP 会话跟踪登录状态。

我该如何设置它，我试图从我的 .htaccess 文件中控制它。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-02-05T01:22:58.820

~~您不能从 htaccess 文件中执行此操作，但~~您可以在`php.ini`文件中更改此行。

```
session.gc_maxlifetime = 1440 
```

更新：这似乎是可能的，所以我更正了

```
php_value session.gc_maxlifetime 3600 
```

我还没有尝试过。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-02-05T07:41:51.923

您还可以尝试在运行时使用以下方法更改值[`ini_set`](http://php.net/manual/en/function.ini-set.php "PHP 手册 ini_set")：

```
ini_set('session.gc_maxlifetime', '3600'); 
```

# asp.net - HTML文档转PDF？

> ID：514170
> 
> 赞同：6
> 
> 时间：2009-02-05T01:24:50.533
> 
> 标签：asp.net, pdf

我有一个 ASP.NET 网页，它是一个动态生成的报告。出于业务原因，此准确报告需要以 PDF 格式生成。最好的方法是什么？将选定的打印机设置为 Adob​​e PDF 不是一个选项。

学习从头开始以编程方式创建 PDF？有没有办法在某些浏览器控件中呈现它，然后保存输出？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-05T05:50:03.070

[wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/) - 我在 Windows 中编译它并且效果很好。它使用 WebKit（Safari、Chrome 等）将 HTML 页面呈现为 PDF，而且是免费的！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-05T01:29:48.527

如果报告是一个网格（可能是），**[这篇使用 iTextSharp 的博客文章](http://csharpdotnetfreak.blogspot.com/2008/12/export-gridview-to-pdf-using-itextsharp.html)**可能会有所帮助。iTextSharp 很好，是我见过的最完整的 C# PDF API。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-05T01:30:15.590

我不知道 ABCpdf .NET 是否免费，但我听说过它的好消息。我认为它可以直接将 HTML 文件呈现为 PDF。

[http://www.websupergoo.com/abcpdf-5.htm](http://www.websupergoo.com/abcpdf-5.htm)

我使用过 PDFsharp（假设您将 C# 与 ASP 结合使用）并且效果很好。据我所知，它不会呈现 HTML。

[http://pdfsharp.com/PDFsharp/](http://pdfsharp.com/PDFsharp/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-03-27T08:42:33.457

去年我做了一个PDF项目，刚学了PDF格式，很庆幸。

[PDF 规范](http://www.adobe.com/devnet/pdf/pdf_reference.html)是免费提供的，作为程序员，PDF 非常易于访问和理解。PDF 是纯文本文档，可以选择压缩。每页都是一个笛卡尔平面，您可以在其上一个接一个地绘制几何形状。它是低级的，是为软件生成量身定做的。显然有像字形和东西这样的高级东西，但就像任何架构良好的技术一样，如果你愿意，你可以坚持使用抽象层。

是否做直接PDF取决于你文档的复杂程度。对于具有简单图形、文本和图像之类的基本内容（例如，发票是一个很好的候选者），那么我会直接编写 PDF。您将获得良好的体验，并且您将完全掌控。

对于更复杂的东西，如表格和饼图（PDF 太低级而无法直接编写），然后我会研究某种库或工具包。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-27T08:31:11.393

您看过 SQL Server 报告服务吗？如果您使用的是 MSSQL 2005/2008，那么您可能已经拥有报告服务，您只需要对其进行配置。您可以在那里托管您的报告，只需几行代码即可将报告作为 PDF 文件获取。

```
 //create the web request for the report based on a URL that will define export 
    //format, parameter values, etc.
    HttpWebRequest request = (HttpWebRequest)WebRequest.Create(reportUrl);
    //send creditials if necessary
    request.Credentials = new NetworkCredential(userName, password);
    //response will contain the PDF file as a stream
    HttpWebResponse response = (HttpWebResponse)request.GetResponse(); 
```

这是一个可能也有帮助的[链接](https://stackoverflow.com/questions/584609/how-to-display-a-reporting-services-report-as-an-inline-pdf-in-a-asp-net-and-c)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-02-05T01:34:11.870

如果您正在寻找开源解决方案或 $$ 解决方案，您没有提到您？

但这里有一个开源转换器：http: [//sourceforge.net/projects/itextsharp/](http://sourceforge.net/projects/itextsharp/) ，相当不错。

# c - Web 服务器配置 - shttpd/Mongoose

> ID：514180
> 
> 赞同：1
> 
> 时间：2009-02-05T01:31:24.543
> 
> 标签：c, http, mongoose-web-server

[http://code.google.com/p/mongoose/](http://code.google.com/p/mongoose/)
[http://shttpd.sourceforge.net/shttpd.1.txt](http://shttpd.sourceforge.net/shttpd.1.txt)

尝试配置现在称为 mongoose 的轻量级 Web 服务器 shttpd 以在 C 中执行 CGI 脚本。

它需要一个单独的 CGI 解释器吗？

在源代码伪造上下载的 shttpd 有用于 perl 和 php cgi 的单独解释器 exe，但不确定这是否意味着我需要一个 C 语言...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T20:57:51.787

实际上，使用微型 C 编译器 (http://bellard.org/tcc/) 很可能将 .c 文件作为脚本运行。只需`#!/usr/local/bin/tcc -run`在 C 源代码的第一行添加即可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-30T11:25:54.817

我假设，您的 CGI 可执行文件是二进制可执行文件。如果您使用的是 UNIX，请将您的 CGI 可执行文件重命名为具有“.cgi”扩展名。如果您在 Windows 上，并且 CGI 可执行文件具有“.exe”扩展名，请指定服务器选项“-cgi_ext exe”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-30T11:33:33.660

C 不被解释 - 您需要在 CGI 程序运行之前对其进行编译。对于任何特定的 Mongoose 问题，您可能需要使用[http://groups.google.com/group/mongoose-users/topics上的支持小组](http://groups.google.com/group/mongoose-users/topics)

# java - 游戏 AI 的 Java 规则引擎

> ID：514187
> 
> 赞同：11
> 
> 时间：2009-02-05T01:35:41.960
> 
> 标签：java, artificial-intelligence, rule-engine

我想为我的游戏使用规则引擎。它将用于 NPC AI 和 GM AI。

为此目的，什么可能是一个好的和快速的规则引擎？它必须是 Java 和开源的。

我想听听使用 Java Rule Engines for AI 的人的经验。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-02-05T16:01:17.530

我见过两种选择：[Jess](http://herzberg.ca.sandia.gov/jess/)和[Drools](http://jboss.org/drools/)。坦率地说，杰斯有问题。它不是开源的，也不是免费的。它有一个类似于 Lisp 的语法，根据你的观点，可以是加号还是减号。

另一方面，Drools 是免费的、开源的，并且在 JBoss 的保护下，所以它可能会存在一段时间。这些规则使用直接的 Java 调用，但使用非程序员非常直观的 DSL 编写。

我在 Drools 中看到的唯一“问题”是编译规则可能会很慢，因此您需要在启动时或在静态块中运行编译，有时用户不介意稍等片刻。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-05T01:46:11.083

试试[流口水](http://jboss.org/drools/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-02T08:23:50.113

我们将在今年晚些时候尝试解决编译性能问题。这不是我们关注或分析的东西，而是关注运行时性能。

我很想听听你的进展。我正在考虑做一个 Drools PacMan 游戏，以开始探索如何最好地使用游戏规则引擎。由于游戏通常是关于事件和检查对象之间的关系，因此正确调整规则引擎似乎可以提供一些好处。后面的部分，“调整”，将变得很重要，因为在许多情况下，如果引擎预先知道问题空间，它在部分匹配中的效率会高得多。理想情况下，游戏经常会出现这种情况，因此我们可以向引擎提供提示，以便在这些用例的地方对其进行定制。

我们正在进行一些关于增加概率的研究，这对游戏来说也应该很有趣。

无论如何，如果您取得任何进展，请与我联系，redhat d0t com 的 mproctor

# git - 你如何在 Git 项目的文件中包含当前的提交 ID？

> ID：514188
> 
> 赞同：17
> 
> 时间：2009-02-05T01:36:52.770
> 
> 标签：git

我有一个开源静态 JavaScript + HTML 应用程序，现在部署在大约三个不同的地方，一个在我的本地机器上，一个在内部服务器上，一个在稳定的外部服务器上。

我希望能够立即知道哪个版本部署在哪个位置，并且我希望错误报告者能够轻松访问他们报告错误的版本。

理想情况下，作为提交过程的一部分，我希望使用提交的哈希写入文件。当然，根据我对 Git 的了解，这是不可能的，因为在提交中包含计算的哈希作为文件的一部分会改变该提交的计算哈希。

另一方面，我可以将构建它作为构建过程的一部分。不过，我目前没有构建过程，如果可能的话，我想避免添加一个步骤。

最干净的方法是什么？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2009-02-05T05:13:35.313

由于 Git 的性质，这有一些微妙之处。我这样做的方式是复制 Git 开发人员自己的做法。首先，您需要使用带注释的标签，这可能是个好主意。要查看，您可以创建一个新标签，如下所示：

```
$ git tag -a -m "Version 0.2" v0.2 HEAD 
```

然后（正如 Otto 的帖子中所建议的），您可以使用`git describe`一个有用的“版本”字符串，其中包括自标记以来的提交次数和当前提交的 sha1 的前导数字。这是我的一个项目中的一个示例：

```
$ git describe
v1.0-3-gee47184 
```

也就是说，这个副本是在“v1.0”标签之前的 3 次提交，并且提交 sha1 以 ee47184 开头（我不确定它们为什么包含前导 'g'）。

Git 开发人员更进一步，如果工作副本被修改（未提交），还包括一个额外的位。这需要更多步骤，因此它们都包含在他们命名的脚本中`VERSION-GEN`。运行时，它将版本字符串打印到标准输出并创建一个`VERSION-FILE`文件（如果版本没有更改，脚本会小心不要重新接触该文件——因此它对构建工具很友好）。然后，您可以将该`VERSION-FILE`文件包含在您的源代码、帮助文件等中。

使用我的示例`VERSION-GEN`脚本（如下），我上面示例的版本字符串是：

```
$ VERSION-GEN
version: 1.0-3-gee47 
```

如果我修改任何跟踪文件，它看起来像这样：

```
$ VERSION-GEN
version: 1.0-3-gee47-mod 
```

这是我稍微调整的版本`VERSION-GEN`。请注意，它希望标记版本的标签采用 v[0-9]* 形式（例如，v1.0 或 v0.2 或 v12.3.4 或 v12.2-4feb2009 等）

```
#!/bin/sh

# Tag revisions like this:
# $ git tag -a -m "Version 0.2" v0.2 HEAD

VF=VERSION-FILE
DEFAULT_VERSION=UKNOWN

LF='
'

# First see if there is a version file (included in release tarballs),
# then try git-describe, then default.
if test -d .git -o -f .git &&
    VN=$(git describe --abbrev=4 HEAD 2>/dev/null) &&
    case "$VN" in
    *$LF*) (exit 1) ;;
    v[0-9]*)
        git update-index -q --refresh
        test -z "$(git diff-index --name-only HEAD --)" ||
        VN="$VN-mod" ;;
    esac
then
        continue
    #VN=$(echo "$VN" | sed -e 's/-/./g');
else
    VN="$DEFAULT_VERSION"
fi

VN=$(expr "$VN" : v*'\(.*\)')

# Show the version to the user via stderr
echo >&2 "version: $VN"

# Parse the existing VERSION-FILE 
if test -r $VF
then
    VC=$(sed -e 's/^version: //' <$VF)
else
    VC=unset
fi

# If version has changed, update VERSION-FILE
test "$VN" = "$VC" || {
    echo "version: $VN" >$VF
    echo >&2 "($VF updated)"
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-02-05T01:52:44.033

将其添加到您的自动部署系统中。

如果您的部署不是自动化的，则将其自动化并添加到那里。然后您删除了一个步骤。

使它更有用“这是在 x 日期在 y 时间从 z 存储库部署的”。提交的哈希对非开发人员来说并不意味着太多。

# php - 有没有人使用过 patTemplate，我应该担心使用它进行项目吗？

> ID：514189
> 
> 赞同：1
> 
> 时间：2009-02-05T01:36:54.050
> 
> 标签：php

我引用了一个使用[patTemplate](http://trac.php-tools.net/patTemplate)的项目。我想知道是否有人使用过它以及他们对它的看法？

我不是 PHP 模板系统的粉丝，因为 PHP 本身基本上就是一个模板系统，但我想知道 patTemplate 有多糟糕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-24T05:59:28.480

以下是我的经验：

1.  记录不良的项目
2.  现在看起来很不活跃
3.  超大文件
4.  不必要的包括

IMO 使用任何其他模板系统，例如[Zend Framework](http://framework.zend.com/)也使用的[Smarty](http://www.smarty.net/) ，或者像我一样编写自己的模板系统。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-24T10:07:20.870

回到模板大战时代，patTemplate 是真正的参赛者之一。我认为它今天没有多大用处，但它可能相当稳定且功能齐全。我不会选择它作为首选，但我不认为它比其他任何东西都差。patTemplate 最突出的特性（如果我没记错的话）是它是基于 xml 的，尽管我不确定它会带来什么好处。

# visual-studio - 有没有办法将已安装的 VS2005 许可证与盒子上的序列号匹配？

> ID：514191
> 
> 赞同：-1
> 
> 时间：2009-02-05T01:37:09.227
> 
> 标签：visual-studio, visual-studio-2005, licensing

这不是一个严格的编程问题，但对于在团队中工作的开发人员来说可能是一个有用的问题。我敢打赌，有人已经遇到过类似的问题。

我们有几个 VS2005 的许可证。我有一个分配给我，其余的分配给我的同事。作为日常维护的一部分，我刚刚擦除了我的 PC，现在我准备安装 VS2005，但有不止一个盒子可供选择。有没有一种简单的方法可以以*编程*方式（注册表浏览/文件查找等）找出哪个许可证（产品密钥/盒子上的序列号）安装在哪台 PC 上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-05T17:13:21.100

有一个应用程序我过去使用过 MS Office 和 XP 密钥，它看起来已经更新，可以查找任何应用程序的密钥。免费（！）在网站上下载和信息，这里： http: [//www.magicaljellybean.com/keyfinder/](http://www.magicaljellybean.com/keyfinder/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-06T01:36:04.250

显然有一个共享软件可以为我做到这一点：http: [//www.product-key-explorer.com/](http://www.product-key-explorer.com/)。我能够提取密钥的前 4 位数字，这就足够了。

# c++ - 在类型中使用枚举 - 编译器警告 C4482 C++

> ID：514194
> 
> 赞同：66
> 
> 时间：2009-02-05T01:38:48.040
> 
> 标签：c++, enums, compiler-warnings

我在我的一个类的方法中使用枚举的完全限定名称。但我收到编译器警告，上面写着*“警告 C4482: nonstandard extension used: enum 'Foo' used inqualified name”*。在 C++ 中，我们是否需要使用没有限定名的枚举？但是IMO，这看起来很难看。

有什么想法吗？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2009-02-05T01:46:20.130

是的，枚举不会创建新的“命名空间”，枚举中的值在周围范围内直接可用。所以你得到：

```
enum sample {
  SAMPLE_ONE = 1,
  SAMPLE_TWO = 2
};

int main() {
  std::cout << "one = " << SAMPLE_ONE << std::endl;
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2011-08-20T13:25:18.467

要使其清洁，请更换：

```
enum Fruit {

    ORANGE = 0,
    BANANA = 1

}; 
```

和

```
namespace Fruit {

    enum { //no enum name needed

        ORANGE = 0,
        BANANA = 1

    };

};

...

int f = Fruit::BANANA; //No warning 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-04-13T15:12:17.320

虽然某事确实回答了这个问题，但它并没有解决我一直如何使用枚举的问题。尽管它们或多或少只是数字的名称，但我一直使用它们来定义只能具有某些值的类型。

如果枚举是类的一部分，那么这有助于消费者清楚地识别枚举引用：

```
class Apple {
  enum Variety {
    Gala,
    GoldenDelicious,
    GrannySmith,
    Fuji
  }
  ...
}; 
```

然后消费者将能够声明枚举的实例，作为参数传递，并在引用其中一种类型时限定它们。

```
unsigned int GetCountOfApples( Apple::Variety appleVariety );
...
fujiCnt = GetCountOfApples( Apple::Fuji ); 
```

有时你想要一个类之外的枚举或同一个类中的两个枚举，你可以做一些像 Poy 那样的事情。但是，您将无法引用枚举类型，因此只需命名即可。

```
namespace Color {
  enum ColorEnum {
    Blue,
    Red,
    Black
  }; 
```

现在使用枚举和值的工作方式如下：

```
Color::ColorEnum firstColor = Color::Blue;
Color::ColorEnum secondColor = Color::Red;

if( firstColor == secondColor )
.... 
```

现在，如果碰巧有不同的枚举具有相同的名称，它们将始终使用它们的类型来限定。然后你就可以处理赌徒的问题了。

```
BananaColorEnum banCol = BananaColor::Yellow;
TomatoColorEnum tomCol = TomatoColor::Yellow; 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2009-02-05T19:59:00.233

是的。从概念上讲，枚举定义了一种类型，以及该类型的可能值。尽管看起来很自然，但定义`enum foo { bar, baz };`然后引用与引用`foo::baz`是相同的`int::1`。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2012-09-11T19:37:07.330

```
 namespace Company
{
    typedef int Value;
    enum
    {
        Microsoft= 0,
        APPLE = 1, 
    };
};

namespace Fruit
{
    typedef int Value;
    enum
    {
        ORANGE = 0,
        BANANA = 1,
        APPLE = 2, 
    };
};

...

Fruit::Value f = Fruit::BANANA; //No warning
Company::Value f = Company::APPLE; //is different value then Fruit::APPLE 
```

这适用于 GCC 和 MS 编译器以及 Mac。优点是您可以使用命名空间运算符并传递冲突。小缺点是你必须写 Fruit::Value 而不是 Fruit。当您不知道其他类中的枚举是什么时，它在大型项目中更有用。

如果可以改用 C++11，那就简单多了，因为 enum::namespace 语法是可能的。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2012-08-08T20:31:43.420

我发现这样做的最干净的方法是这样定义枚举

```
namespace Samples
{
    enum Value
    {
        Sample1,
        Sample2,
        Sample3
    };
}
typedef Samples::Value Sample; 
```

然后在函数和变量定义中，您可以使用 typedef：

```
void Function(Sample eSample);
Sample m_eSample; 
```

在您的 .cpp 文件中，您可以使用命名空间来分配变量：

```
void Function(Sample eSample)
{
    m_eSample = Samples::Sample1;
    eSample = Samples::Sample2;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-10-19T18:16:14.793

就个人而言，我认为这是一个编译器错误。我已经使用 C++ 很长时间了。遗憾的是，OP 中没有示例代码。Java 人对枚举的解释实际上是正确的 iMO。我的，是这样的……

```
class Foo {
    enum tMyEnum { eFirstVal = 0, eSecondVal = 1};
    // ...
    tMyEnum m_myVal;
};
void Foo::MyMethod() {
    if(m_myVal == tMyEnum::eFirstVal) {
//  ...
    }
} 
```

我也试过了，Foo::tMyEnum::eFirstVal。没有限定符，一切都会编译。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-03-08T01:03:08.063

我有同样的问题，我还没有使用 C++ 11。我自己也更喜欢完全限定的命名空间。

我禁用了这个特定的警告。我敢肯定人们会不喜欢这个主意，但有些人可能会心存感激。

```
#pragma warning( disable : 4482 ) 
```

# c++ - Example of using FindFirstFIleEx() with specific search criteria

> ID：514199
> 
> 赞同：0
> 
> 时间：2009-02-05T01:43:18.733
> 
> 标签：c++, winapi, filesystems, search, wildcard

I asked about finding in subdirs with criteria. First answer was use FindFirstFileEx(). It seems the function is no good for this purpose or I'm using it wrong.

So can someone explain how I would go about searching in a folder, and all it's subfolders for files that match (to give some sample criteria) *.doc;*.txt;*.wri; and are newer than 2009-01-01?

Please give a specific code example for those criteria so I know how to use it.

If it isn't possible, is there an alternative for doing this not-at-all-obscure task??? I am becoming quite baffled that so far there aren't well known/obvious tools/ways to do this.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-05T02:04:04.633

From [MSDN](http://msdn.microsoft.com/en-us/library/aa364419(VS.85).aspx):

If you refer to the code fragment in that page:

```
#include <windows.h>
#include <tchar.h>
#include <stdio.h>

void _tmain(int argc, TCHAR *argv[])
{
   WIN32_FIND_DATA FindFileData;
   HANDLE hFind;

   if( argc != 2 )
   {
      _tprintf(TEXT("Usage: %s [target_file]\n"), argv[0]);
      return;
   }

   _tprintf (TEXT("Target file is %s\n"), argv[1]);
   hFind = FindFirstFileEx(argv[1], FindExInfoStandard, &FindFileData,
             FindExSearchNameMatch, NULL, 0);
   if (hFind == INVALID_HANDLE_VALUE) 
   {
      printf ("FindFirstFileEx failed (%d)\n", GetLastError());
      return;
   } 
   else 
   {
      _tprintf (TEXT("The first file found is %s\n"), 
                FindFileData.cFileName);
      FindClose(hFind);
   }
} 
```

You'll see that you can call FindFirstFileEx, where argv[1](http://msdn.microsoft.com/en-us/library/aa364419(VS.85).aspx) is a string (LPCSTR) pattern to look for, and &FindFileData is a data structure that contains file info of the found data.. hFind is the handle you use on subsequent calls with FindNextFile.. I think you can also add more search parameters by using the fourth and sixth parameter to FindFirstFileEx.

Good luck!

EDIT: BTW, I think you can check a file or dir's attributes by using [GetFileAttributes()](http://msdn.microsoft.com/en-us/library/aa364944(VS.85).aspx) .. Just pass the filename found in FileFindData.. (filename can refer to a file's name or a directory name I think)

EDIT: MrVimes, here's what you could do (in pseudocode)

find the first file (match with *)

*   Check the file find data if it is ".", ".." (these are not really directories or files)
    *   if check passed, check file find data if it has the attributes you are looking for (i.e. check filename, file attributes, **even file creation time can be checked in the file find data**, and what not) and do whatever with it
        *   if check passed, do whatever you need to do with the file
    *   if check failed, either call findnextfile or end, up to you

Something like that..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-05T01:50:17.923

I think you use `FindFirstFile` to find **all** files and ignore the ones whose `WIN32_FIND_DATA` values don't match your search criteria.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-05T02:17:47.087

Well you could use it to search for *.doc, *.txt and *.wri by passing those values as the name to search for:

```
FindFirstFileEx("*.doc", FindExInfoStandard, &fileData, FindExSearchNameMatch, NULL, 0); 
```

To search by date is a little more complicated, but not overly so:

```
SYSTEMTIME createTime;
SYSTEMTIME searchDate;
FILETIME compareTime;
HANDLE searchHandle;

searchDate.wYear = 2009;
searchDate.wMonth= 1;
searchDate.wDay = 1;

SystemTimeToFileTime(searchDate, &compareTime);

searchHandle FindFirstFileEx("*", FindExInfoStandard, &fileData, FindExSearchNameMatch, NULL, 0);

if(searchHandle != INVALID_HANDLE_VALUE)
{
While(searchHandle != ERROR_NO_MORE_FILES)
{
FileTimeToSystemTime(fileData.ftCreationTime, &createTime);

if((ULARGE_INTEGER)compareTime < (ULARGE_INTEGER)createTime)
  printf("%s matches date criteria", fileData.cFileName);

FindNextFile(searchHandle, &fileData);
}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-05T02:23:43.440

You need to do two searches. The first is just to find the subdirs, and you do that without any file spec. The second search for the files uses the file spec.

# ruby-on-rails - Rails“脚本/生成模型”的文档在哪里？

> ID：514216
> 
> 赞同：21
> 
> 时间：2009-02-05T01:51:34.067
> 
> 标签：ruby-on-rails, scriptgenerate

我在跑步

```
ruby script/generate scaffold 
```

或者

```
ruby script/generate model 
```

我知道基本语法，比如

```
ruby script/generate scaffold Dude name:string face:boolean 
```

但我不知道这样的事情：

*   变量的名称应该有下划线还是驼峰式？
*   什么样的变量类型是可以接受的？

我在哪里可以找到这样的信息？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2009-02-05T02:15:56.763

键入不带参数的命令并显示文档：

```
$ script/generate model 
```

您可以使用驼峰或下划线作为模型名称。

*   型号名称是单数；控制器名称是复数。
*   字段名称使用下划线。

我不记得所有可能的字段类型，我只是从上面链接的迁移文档中查找它们。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-02-05T01:56:50.030

这份关于[Rails 迁移](http://dizzy.co.uk/ruby_on_rails/cheatsheets/rails-migrations)的文档会有所帮助。

关于命名约定，我认为 Ruby on Rails 普遍采用的约定是下划线。

要了解哪些变量类型是可接受的，请参阅[数据库映射](http://cheat.errtheblog.com/s/migrations/)部分。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-12-07T00:03:18.460

rails wiki 上有一个资源作为[可用生成器列表](http://wiki.rubyonrails.org/rails/pages/availablegenerators)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-02-05T02:08:40.677

要检查 Rails 命名约定，topfunky 的 Pluralizer[很有](http://nubyonrails.com/tools/pluralize)用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2011-02-15T13:44:25.397

Rails 有一个新的语法是`rails generate`

# sql-server - 使用存储过程从视图中检索或过滤数据是否比使用存储过程从表中获取或过滤数据更快？

> ID：514217
> 
> 赞同：2
> 
> 时间：2009-02-05T01:51:35.440
> 
> 标签：sql-server, stored-procedures, views

使用存储过程从视图中检索和过滤数据而不是从表中检索和过滤数据时是否存在性能问题？

**简化：使用存储过程从视图中检索或过滤数据是否比使用存储过程从表中获取或过滤数据更快？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-05T01:57:57.580

视图的性能取决于定义它的 select 语句的性能特征。[您可以通过索引视图](http://technet.microsoft.com/en-us/library/cc917715.aspx)来提高仅选择本身的性能

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-05T01:55:36.150

简单的回答：没有。

# point-of-sale - Epson POS 打印机 - 自动状态返回规范

> ID：514231
> 
> 赞同：2
> 
> 时间：2009-02-05T01:54:57.617
> 
> 标签：point-of-sale, epson

我正在尝试解释来自 Epson POS 打印机的自动状态返回 (ASB) 数据。我已经使用 UB-E20 技术参考指南 (www.amigopos.com/faq/faq_262.aspx) 中的一些示例代码成功地与打印机取得了联系。不幸的是，该手册仅说明了我的查询返回字符串中的 4 字节 ASB 数据。它没有解释这 4 个字节中每个位代表什么。当我打开打印机盖和/或取出纸张时，我可以看到返回值发生了变化，但我想确定我正在为不同的故障模式寻找正确的值。

我尝试联系爱普生，但没有任何回应。而且我似乎在网上的任何地方都找不到 ASB 的规范。有人在爱普生打印机上使用过 ASB 吗​​？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2011-03-21T20:10:44.043

几个月前我遇到了同样的问题，但我和爱普生的一些人交谈后做了这个。这是如何获取论文的状态，希望对您有所帮助。

' ***** ** *** ** *** ** *** ** *** ** *** ** *** ***** **' 格式 ASCII DLE EOT n
' 十进制 16 4 n
'******* *** ** *** ** *** ** *** ** *** ** *** ** *** ***
'n 功能
'1 传送打印机状态
'2 传送离线状态
'3 传送错误状态
'4 传送纸卷传感器状态
' ***** ** *** ** *** ** *** ** *** ** *** ** *** ********* 

 ***comPort.Write(Chr(16) & Chr(4) & Chr(4))
Dim aReplyBuffer(0) As Byte
Dim intNBytes As Integer = 0
comPort.Read(aReplyBuffer, 0, 1)

这就是回应

'状态响应
'n 名称
'0 错误
'30 无纸
'18 正常

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-06T20:30:12.073

我通过他们的开发者网络直接联系了爱普生。他们让我签署了 NDA，现在我有了规范。我只是将这些信息放在这里，以供将来可能需要它的任何人使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-04T14:39:08.383

如果有人仍在寻找它，您现在可以在以下位置找到它： [https ://reference.epson-biz.com/modules/ref_escpos/index.php?content_id=122](https://reference.epson-biz.com/modules/ref_escpos/index.php?content_id=122)

# php - 确定论坛中的未读项目

> ID：514232
> 
> 赞同：4
> 
> 时间：2009-02-05T01:55:30.500
> 
> 标签：php, mysql, forum

使用 PHP 和 MySQL，我有一个正在尝试构建的论坛系统。我想知道的是，我如何设置它，以便当用户阅读论坛条目时，无论他们在哪个论坛，它都显示为该用户已阅读，直到其他人在其上发帖。

目前，对于每个线程，我都有一个带有 PostID 的表，并且有发布它的用户 ID、链接到它的 ThreadID、实际的帖子（作为文本），然后是发布的日期/时间。

对于每个论坛的帖子列表，有threadID（主键）、ThreadName、所属的ForumID、NumPosts、NumViews、LastPostDateTime、CreateDateTime。有什么帮助吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-02-05T02:31:49.477

传统的解决方案是[连接表](http://en.wikipedia.org/wiki/Junction_table)，类似于：

```
CREATE TABLE topicviews (
    userid INTEGER NOT NULL,
    topicid INTEGER NOT NULL,
    lastread TIMESTAMP NOT NULL,
    PRIMARY KEY (userid, topicid),
    FOREIGN KEY (userid) REFERENCES users(id),
    FOREIGN KEY (topicid) REFERENCES topics(id)
); 
```

每次阅读主题时都会更新 lastread。显示主题列表时，如果topics.lastupdated > topicviews.lastread，则有新帖子。

*传统的解决方案是垃圾，会杀死你的数据库！不要这样做！*

第一个问题是，对每个主题视图的写入很快就会使数据库服务器在繁忙的论坛上陷入瘫痪，尤其是在只有表级锁的 MyISAM 表上。（不要使用 MyISAM 表，对除全文搜索之外的所有内容都使用 InnoDB）。

您可以稍微改善这种情况，只需在主题中实际读取新消息时写完 lastread 时间。如果 topic.lastupdated < topicviews.lastread 更新该值，您将一无所获。即便如此，在一个使用率很高的论坛上，这可能是一个负担。

第二个问题是组合爆炸。每个主题每个用户一行很快加起来：只有一千个用户和一千个主题，您可能有一百万个主题视图行要存储！

您可以通过限制为每个用户记住的主题数量来稍微改善这种情况。例如，您可以在视图表超过某个年龄时从视图表中删除任何主题，并假设所有旧主题都已“阅读”。这通常需要在后台完成清理任务。

其他不太密集的方法包括：

*   每个论坛只存储一个 lastread time
*   仅在整个站点中为每个用户存储一个 lastvisit 时间，这将显示为“新”仅自用户上次访问（会话）以来更新的内容
*   根本不存储任何 lastread 信息，但在主题的 URL 本身中包含最后更新时间。如果用户的浏览器最近看到过该主题，它会记住该 URL 并将其标记为已访问。然后，您可以使用 CSS 将访问的链接设置为“不包含新消息的主题”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-05T02:13:46.750

当用户读取该线程时，可能存储在另一个表 UserID、threadID、LastReadDateTime 中。

```
if (LastPostDateTime > LastReadDateTime) you got an unread post. 
```

可悲的是，您的开销很大，每次读取都会写入。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-05T04:04:17.560

这里的一般想法是正确的，但他们忽略了一些可扩展性问题的明显解决方案。

> @bobince：第二个问题是组合爆炸。每个主题每个用户一行很快加起来：只有一千个用户和一千个主题，您可能有一百万个主题视图行要存储！

如果有人从未查看过该线程，则无需在“topicviews”表中存储记录。如果返回 null 或 last_read 时间 < last_post 时间，您只需将主题显示为有未读帖子。这可能会将“百万”行减少一个数量级。

> @gortok：有很多方法可以做到这一点，但随着用户访问网站，每一种方法都会成倍增长。

在这种情况下，您在发布 n 个帖子或 n 周后归档一个论坛，并在锁定时清理“topicviews”表。

我的第一个建议很明显，没有缺点。我的第二个降低了存档主题的可用性，但对于一个快速的论坛来说，这是一个很小的代价。缓慢的论坛阅读和发布都很痛苦。

但老实说？您可能不需要担心可伸缩性。即使是一百万行也不是那么多。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-05T02:07:39.760

没有简单的方法可以做到这一点。有很多方法可以做到这一点，但随着用户访问网站，每一种方法都会成倍增长。你能做的最好的并且仍然保持性能是有一个时间戳，并将自上次访问以来已更新的所有论坛标记为“未读”。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-06T13:18:52.007

您可以只使用用户浏览器的功能并将链接中的最后一个 postid 附加到线程，如下所示：“thread.php?id=12&lastpost=122”

通过在 CSS 中使用 a:visited，您可以显示用户已经阅读的帖子与他未阅读的帖子不同。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-05T09:21:01.177

Bobince 有很多好的建议。另外一些潜在的优化：

写下新的“这是新的吗？” 信息到 memcached 和 MySQL“ARCHIVE”表。批处理作业可以更新“真实”表。

对于每个用户，保留一个“在 $date 之前读取的所有内容”标志（当单击“标记所有已读”时）。

当发布新内容时，清除所有“它已被读取”标志——这会减少“标志”的数量，并且表格可以只是（topic_id，user_id）——没有时间戳。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-02-06T13:30:48.290

功能用户浏览器的使用，并在帖子的链接中添加最后一个帖子 ID。在 CSS 中使用 a:visited 后，您可以显示所有未由用户阅读的线程。

# c++ - MS SQL 存储过程使用 ODBC 返回结果集

> ID：514239
> 
> 赞同：0
> 
> 时间：2009-02-05T01:58:25.957
> 
> 标签：c++, sql, sql-server, stored-procedures, odbc

我有一个存储过程，如果存储过程这样做：

```
SELECT 0 As Ret
DELETE FROM table where value1 = 1 
```

返回 1 行结果，其值为 0，列名 Ret

但如果我这样做：

```
DELETE FROM table where value1 = 1
SELECT 0 As Ret 
```

我没有返回结果。

我的问题是，如何让第二个变体返回一个值。

我正在使用 C++ 和 ODBC。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-05T02:05:41.667

请参阅 - SET NOCOUNT 的设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-05T02:02:04.247

将变量显式设置为@@RowCount 然后返回

```
Declare @ret int
Select @ret = @@RowCount
Select @ret 
```

**编辑**

它为第二种形式返回 0，因为选择 0 as ret 的行数是 0 行。因此，您需要存储删除后立即返回的行数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-05T03:10:39.070

shahkalpesh 是对的，nocount 应该适用于此，尽管我建议不要使用结果集作为返回值，而是使用 RETURN 语句，并询问 proc 的返回值。

```
SET NOCOUNT ON 
DELETE FROM table where value1 = 1
SET NOCOUNT OFF
SELECT 0 As Ret 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-05T03:20:00.957

好的，我发现您可以使用 ODBC 调用 SQLMoreResults 来获取下一个结果集。因此，您可以继续调用此 SQLMoreResults 函数，直到没有更多结果集为止。

就我而言，在调用 SQLMoreResults 后，我得到了预期的结果集。

这很酷，因为这意味着单个存储过程可以返回多个结果集。我从来不知道它可以。

@Sambo99 和 @shakalpesch 您的建议也有效，并且仅返回 1 个结果。

# asp.net-mvc - ASP.NET MVC 获取用户变量

> ID：514248
> 
> 赞同：0
> 
> 时间：2009-02-05T02:03:18.503
> 
> 标签：asp.net-mvc

刚开始在 ASP.NET 中使用 MVC，我将拥有它，因此用户必须登录才能使用某些功能。现在我有一个将用户存储在一个表中的用户控制器和另一个将数据添加到另一个表的控制器。用户登录后，我如何从添加控制器中的用户表中获取他们的 id，以便将他们的 id 添加到该表中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-05T02:48:15.247

我认为要从上到下解决您的问题，您可能需要研究 ASP.NET MVC 身份验证，而不是自己实现类似的东西。也就是说，如果你有充分的理由继续你正在走的路，那么我有一些建议。

首先，您可能希望考虑使用存储库模式在数据库中添加/删除/获取数据。任何控制器都可以实现它喜欢的任何存储库，因此您的添加控制器只需实现用户存储库即可获取用户。

另外，请记住，在 ASP.NET MVC 中，您可以使用会话变量。如果您需要知道哪个用户在做什么，那么只需将其存储在会话中并从那里检索它。

# enterprise-library - 使用安全应用程序块时到 AzMan XML 存储的相对连接字符串

> ID：514252
> 
> 赞同：5
> 
> 时间：2009-02-05T02:05:16.207
> 
> 标签：enterprise-library, relative-path, azman

是否可以为 AzMan XML 存储指定相对连接字符串？

我当前的连接字符串是`connectionString="msxml://c:/azman.xml"`，但我真的需要将其设为相对，以便其他开发人员和自动构建可以获得最新的授权存储。

MS文档似乎表明`connectionString="msxml://azman.xml"`应该可以工作，但会引发`The request is not supported`错误。

编辑：我意识到我通过企业图书馆安全应用程序块使用 AzMan 对这个问题很重要。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-05T03:58:04.530

可以将令牌 {currentPath} 输入到安全应用程序块使用的连接字符串中。

这给了我我所追求的行为，允许从应用程序文件夹访问 AzMan.xml 文件。

我正在使用的连接字符串是：

```
<authorizationProviders>
  <add storeLocation="msxml://{currentPath}/azman.xml"
    application="My_Application" scope="" auditIdentifierPrefix="AzMan Authorization Provider"
    type="Microsoft.Practices.EnterpriseLibrary.Security.AzMan.AzManAuthorizationProvider, Microsoft.Practices.EnterpriseLibrary.Security.AzMan, Version=3.1.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"
    name="AzMan Provider" />
</authorizationProviders> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-02-05T02:14:57.967

添加 ~ 将使其相对于应用程序

```
<add name="AuthorizationServices" connectionString="msxml://~/App_Data/AzMan.xml"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-03-11T15:29:35.427

如果您使用 {currentPath}，请确保在调用“AuthorizationFactory.GetAuthorizationProvider”之前正确设置了当前目录。我也在使用企业图书馆安全应用程序块。前任。My.Computer.FileSystem.CurrentDirectory = HttpContext.Current.Request.PhysicalApplicationPath

# gwt - GWT 应用程序上的 Selenium 测试 - 请求未发送到服务器

> ID：514263
> 
> 赞同：3
> 
> 时间：2009-02-05T02:11:10.470
> 
> 标签：gwt, selenium

我正在为 GWT 应用程序编写硒测试。它使用 mouseover/mousedown/mouseup 方法来单击按钮。它单击我的应用程序的登录按钮，该按钮调用包含用户 ID 和密码输入字段的 div，效果很好。然后输入用户名和密码，然后单击登录表单的提交按钮。

如果我运行缓慢，我可以看到按钮单击，但请求永远不会被发送到服务器（我正在看电线）。

事实上，如果 selenium IDE 仍处于打开状态，我手动单击按钮，则不会发送请求。如果我然后关闭 selenium IDE 并单击按钮，则请求会正常进行。

有人见过这个吗？看起来真的很奇怪。

更新：

Firebug 显示脚本错误。显然，selenium 脚本与 GWT 脚本有些冲突。这是错误的开始，但整个过程非常冗长：

[异常......“'com.google.gwt.core.client.JavaScriptException：（TypeError）：结果为空文件名：chrome：//selenium-ide/content/recorder.js lineNumber：74堆栈：（[object XMLHttpRequest ],"POST"," [http://localhost:8080/login](http://localhost:8080/login) ",true)@chrome://selenium-ide/content/recorder.js:74 XPC_SJOW_CallWrapper((function (url, windowName, windowFeatures, replaceFlag) { if (self.openCalled) {return self.originalOpen.call(window, url, windowName, windowFeatures, replaceFlag);} else {self.o

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-08T15:14:11.227

好的，我找到了答案。这有点尴尬，但它提供了答案，也很有趣。我会分享答案，这样你就可以避免这个问题，也许可以嘲笑我的付出。:)

答案是你必须编译成 OBF 而不是 PRETTY。下面列出了所有相关链接。他们充分解释了这个问题，以及如何避免它。

这有什么好笑的？好吧，当我进行搜索时，我终于找到了下面的第一个链接。几乎立刻，我意识到，或者至少有一个偷偷摸摸的怀疑，我以前解决过这个问题。果然，原来的问题是10月份发的，我是发帖人。所以，我之前得到了一个答案，完全忘记了。呃，好吧。希望答案对某人有所帮助，我的漫画不幸照亮了你的一天。

[http://clearspace.openqa.org/message/50170](http://clearspace.openqa.org/message/50170)

[http://groups.google.com/group/Google-Web-Toolkit/browse_thread/thread/5d6a9c448a82b916/af62e5877237b107?lnk=raot](http://groups.google.com/group/Google-Web-Toolkit/browse_thread/thread/5d6a9c448a82b916/af62e5877237b107?lnk=raot)

[http://code.google.com/p/google-web-toolkit/issues/detail?id=2861](http://code.google.com/p/google-web-toolkit/issues/detail?id=2861)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-06T19:03:07.443

也许你可以试试 clickAt 或 mouseDownAt，它们的表现似乎有点不同。

# msbuild - 查找 MSBuildProjectDirectory 父目录

> ID：514264
> 
> 赞同：11
> 
> 时间：2009-02-05T02:11:14.540
> 
> 标签：msbuild

微软构建 3.5

我有以下项目结构：

```
trunk/MainSolution.sln
trunk/Build/MyBuild.Proj
trunk/Library/...
trunk/etc... 
```

到目前为止，我一直在使用以下属性来查找项目根文件夹：

```
<RootFolder>$(MSBuildProjectDirectory)\..\</RootFolder> 
```

一切都很好，直到我尝试使用依赖于这条路径的复制任务。它没有正确解决。我基本上最终得到这样的东西是无效的：

```
C:\Projects\MyProject\Trunk\Build\..\CodeAnalysis\myfile.xml 
```

所以基本上，我需要获取（MSBuildProjectDirectory）父级的完整路径。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-02-05T07:37:08.940

项目元数据是您的朋友！

```
<Target Name="GetMSBuildProjectParentDirectory">
  <!-- First you create the MSBuildProject Parent directory Item -->
  <CreateItem Include="$(MSBuildProjectDirectory)\..\">
    <Output ItemName="MSBuildProjectParentDirectory" TaskParameter="Include"/>
  </CreateItem>

  <!-- You can now retrieve its fullpath using Fullpath metadata -->
  <Message Text="%(MSBuildProjectParentDirectory.Fullpath)"/>

  <!-- Create a property based on parent fullpath-->
  <CreateProperty Value="%(MSBuildProjectParentDirectory.Fullpath)">
    <Output PropertyName="CodeFolder" TaskParameter="Value"/>
  </CreateProperty>
</Target> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2022-02-25T15:38:42.317

现在有了 MSBuild 4.0 及更高版本，您不想再使用 CreateItem 或 CreateProperty 任务了。您所要求的可以通过 msbuild 属性函数轻松解决：

```
<!-- Prints the parent directory's full path. -->
$([System.IO.Path]::GetFullPath('$(MSBuildProjectDirectory)\..')) 
```

如果您只想读取父目录的文件夹名称，可以将上述语句与 GetFileName 属性函数结合使用：

```
$([System.IO.Path]::GetFileName('$([System.IO.Path]::GetFullPath('$(MSBuildProjectDirectory)\..'))')) 
```

有点冗长但比其他答案好得多，因为这在目标之外工作并且可以分配给属性。

# eclipse-plugin - 哪个 BugTracker 使用 Eclipse IDE 上传/附加了图像？

> ID：514268
> 
> 赞同：0
> 
> 时间：2009-02-05T02:13:25.987
> 
> 标签：eclipse-plugin, bug-tracking

我已经尝试过 mylyn，但找不到该功能，如果有人有测试 mantis 或 bugzilla，请告诉我其中一个是否有该选项。谢谢！

必须附加代码源并显示任务并将其分配给开发人员。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-05T02:34:11.470

Mylyn 确实有这个选项，AFAIK ......它甚至有一个截图功能。

# ms-word - 如何避免 MS Word 中源代码的拼写检查？

> ID：514283
> 
> 赞同：32
> 
> 时间：2009-02-05T02:21:00.077
> 
> 标签：ms-word, ms-office, spell-checking

当我将源代码复制到 Word 文档或电子邮件时，如果拼写检查可以忽略源代码标记，那就太好了。

是否有忽略文本块的选项？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2009-02-05T02:29:18.780

这个很容易。选择您粘贴的代码，转到工具 -> 语言（或在最新版本的 Word 中，功能区上的等效项）并选中“不检查”复选框。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-12-06T22:21:50.730

要仅关闭文本块的拼写检查，请创建一个名为“代码”的样式。

接下来，修改样式。在样式编辑器中，转到格式子菜单，然后是语言，然后勾选“不检查拼写或语法”。

![编辑样式时的语言子菜单](https://i.stack.imgur.com/CVWUn.png) ![关闭拼写和语法](https://i.stack.imgur.com/L9wsK.png)

现在，无论您在何处应用该样式，Word 都会忽略拼写和语法。完美的源代码！在编辑样式时，设置浅灰色背景，并将字体设置为 Courier New。

这可以防止您在 Word 文档中有源代码的任何地方都必须设置语言（和字体等）。

最终结果如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/KrLbA.png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-02-05T02:29:46.110

突出显示文档中的代码/文本，进入工具菜单>语言>设置语言。将有一个“不检查拼写或语法”复选框

这将标记该区域，以便拼写检查器跳过它

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2011-01-20T22:56:36.133

这是我用分散注意力的红色下划线来涂抹我的设计文档的解决方案。这并不完全符合您的要求，但您可能会发现它已经足够了。

基本上，有一天我在想——“为什么 word 不能像 IntelliJ 那样使拼写错误的标记 SUBTLE？”

好吧，它可以 - 只需将波浪下划线颜色更改为浅灰色而不是红色。

[http://support.microsoft.com/kb/925597](http://support.microsoft.com/kb/925597)

少分心。

IntelliJ 中的拼写检查器所做的另一件事是检测骆驼大写字母并将骆驼大写字母中的每个子词视为一个单独的词......因此它认为 myWordDocument 拼写正确，但会标记 myWerdDocument。如果 word 做到了，那就太好了！

# c# - 更短的类型命名约定

> ID：514284
> 
> 赞同：8
> 
> 时间：2009-02-05T02:22:41.930
> 
> 标签：c#, naming-conventions

我正在开发一个框架，其中一些对象的名称很长。我真的不喜欢这个，但我也不喜欢首字母缩略词。我正在尝试为“EventModelSocket”提供一个更短的名称，它基本上是实现各种事件的 .Net 套接字类的包装器，以及发送文件、对象等的方法。因此，一些对象的名称很长，例如“EventModelSocketObjectReceivedEventArgs”。

从词库到字典，再到坐在这里思考几个小时，我什么都试过了。

当你遇到这样的情况时，最好的命名方式是什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-02-05T02:26:45.743

将其中的一部分推入命名空间。

例如：

```
EventModelSocketObjectReceivedEventArgs 
```

变成

```
EventModel.Sockets.ReceivedEventArgs 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-02-05T02:24:53.780

那么，长名字会伤害什么吗？

（编辑）另外两个想法：

*   在 C# 3.0 中使用`var`- 这将节省一半的宽度
*   如果您在文件中多次使用该类型，请考虑使用类型别名（如果它让您烦恼）：

    `using Fred = Namespace.VeryLongNameThatIsBeingAnnoying;`

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-02-05T02:28:32.760

我只是建议使用描述对象的最简洁的命名。如果`EventModelSocketObjectReceivedEventArgs`这样做，请继续。我的 2 美分。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-02-05T02:34:30.487

几年前，当我在编程课上时，教授引用了一个统计数据，即一段代码通常每被修改一次就会被读取 600 次。如今，我认为这不再正确，尤其是在进行大量重构的 TDD 环境中。尽管如此，我认为一段给定的代码被阅读的次数仍然比被编写的次数多得多。因此，我认为我们应该为可读性而写的格言仍然有效。名称中单词的完整形式更具可读性，因为大脑不必进行转换。理解更快更准确。

我们今天拥有的工具通过自动完成等使这变得如此简单。正因为如此，我现在在变量名中使用完整的单词，我认为这是一个很好的方法。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-02-05T02:56:20.970

如果您需要花费大量精力来寻找替代名称，那么您已经有了正确的名称。对象/方法/属性名称应该是自记录的。如果他们没有描述他们的确切目的，他们就会被错误地命名。如果长名称能够最清楚地理解该对象的用途，那么它们并没有错。

在这个智能感知和大型显示器的时代，真的没有理由不尽可能地描述性命名。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-02-05T03:43:51.953

不要删除元音或类似的疯狂的东西。

我和“坚持长名字”的人在一起。

一种想法是，如果名称那么尴尬，也许需要对系统进行更深入的重新思考。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-02-05T02:26:08.473

我一方面使用长名称。使用智能感知输入名称并不那么重要，除非您使用的是 15 英寸显示器。

如果我不得不减少名称，我可能会选择 EvtMdlSck，只是让工作更短，但仍然可以理解。尽管那不是我的偏好。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-02-05T03:26:44.000

对你命名的一些批评......

为什么您的组件的名称中包含“模型”一词 - 这不是有点多余。

由于您的组件似乎是某种消息传递中心，为什么不在其名称中包含 Message。MessageSender 呢？

为了解决您的问题，我将创建一个接口并为其指定一个通用名称，如 MessageSender 和一个实现，您可以在名称中包含该技术，如 RandomFailingSocketMessageSender。

如果希望获得一个很好的例子，请查看 Java 或 .Net 库。

来自爪哇。接口 - 类/实现... Map - HashMap、LinkedHashMap。列表 - 链表

有关使用的技术或框架的详细信息，例如“Socket”之类的词，或者可能使用人为的示例“MQSeries”，根本不应该是接口名称的一部分。

恕我直言，MessageSender 似乎总结了您的组件的目的。您发送“文件”和“事件”的东西不包含这两个描述性词似乎很奇怪。您在命名中使用的东西是多余的，恕我直言，与您对组件的描述不符。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-02-09T16:05:23.763

总的来说，我相信类名可以准确地描述它们的功能，并且可以使用长名称。如果您认为名称真的很长，我建议您找到一个您的编程团队熟知的概念并将其缩写。因此，如果“事件模型套接字”是每个人都知道的概念，那么将它们缩写为 EMS。如果您有一个完全关于事件模型套接字的包，那么在该包内部的所有类中将它们缩写为 EMS。他们在这里的关键是确保名称对于可能不熟悉该概念的任何人都是完整的，并且对于任何熟悉该概念的人来说都是缩写的。

# security - 您将如何在网络上显示视频？

> ID：514303
> 
> 赞同：1
> 
> 时间：2009-02-05T02:32:06.263
> 
> 标签：security, video, streaming

对不起，如果问题很困惑，因为我自己也很困惑。我正在解决这些要求：

1.  我正在建立一个需要显示视频的公共网站。
2.  我需要控制播放器的外观
3.  我是视频的唯一发布者，这意味着它不能出现在 YouTube 上
4.  在保护内容不被下载方面，我需要尽可能多的保护

所以，我已经阅读了 StackOverflow 和网络，发现了很多建议，比如众多的 flash 播放器、流媒体服务器、DRM 协议、像 Panda 等服务等。

问题是我不明白一切是如何结合在一起的。

例如，是什么让我的视频内容安全？是客户端的播放器吗？是托管内容的服务器吗？是流式处理吗？谁托管流媒体服务器，这有什么不同？

请记住，这是一个非常简单的网站，而不是商业冒险。

如果你按照我的要求工作，你会怎么做？你能在高层次上一步一步地解释吗？

* * *

**编辑：** 仅基于几个答案，我并不是说没有人可以下载我的内容。我意识到这种东西很昂贵。

我只是问，如果你有我的要求，你会怎么做？你能给我解释一下，让我明白吗？

再次感谢

**编辑：** 再次感谢所有反馈，因为我是新用户，所以我无法投票给任何人，但您的回答非常有帮助。

我要说的一件事是，我唯一的要求是尝试安全，这对大多数用户来说是“让它变得困难”……这在软件安全中很常见。

有些建议甚至不尝试。

我的问题实际上是基于这样一个事实，即我对网络上的视频部署一无所知，除了基本的嵌入式 swf flv 组合。

无论如何，您的信息非常有用。我将尝试一个简单的“真实”流媒体服务（而不是 HTTP 流媒体）。

任何其他建议都会很棒

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-05T02:38:08.030

“例如，是什么让我的视频内容安全？” 没有。

“是客户端上的玩家吗？” 两者都不。任何人都可以编写客户端并保留视频内容。记住这一点。任何人都可以编写客户端。该客户端可以吸收并保存您的视频。没有什么能阻止这一切。没有。

“是托管内容的服务器吗？” 不，服务器只是一种安全措施。您必须保护协议。和客户。任何人都可以编写客户端并保留视频内容。

“是流式处理吗？” 不，协议只是一种安全措施。您必须保护服务器、协议和客户端。任何人都可以编写客户端并保留视频内容。

“谁托管流媒体服务器，这有什么不同？” 您托管流媒体视频服务器。否则，您不妨使用 YouTube。

* * *

**编辑**

“问题是我不明白一切是如何结合在一起的。”

“例如，是什么让我的视频内容安全？”

这些是无关的。你一直提到安全性，却不知道“一切”是如何结合在一起的。

这里有一个建议：停止提及安全性——编辑你的问题以消除所有对安全性的引用，看看你是否得到更有用的答案。

许多公司销售流媒体服务器。您将 HTML 放在引用流媒体站点的页面中。

例子。Apple 销售 Quicktime 媒体服务器。阅读[http://developer.apple.com/documentation/QuickTime/Conceptual/QTScripting_HTML/QTScripting_HTML_Document/chapter_1000_section_1.html](http://developer.apple.com/documentation/QuickTime/Conceptual/QTScripting_HTML/QTScripting_HTML_Document/chapter_1000_section_1.html)，了解有关如何从 quicktime 呈现视频的大量信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-05T02:39:37.153

在您过分担心设置这些安全的流媒体协议客户端服务器之前，请确保您权衡了进行此操作的时间成本与下载视频的成本。

只是要明确一点：如果您的服务器正在发送到客户端，那么他们可以复制（下载）它。没有办法解决它。

* * *

*回复您的评论：*

如果您想避免用户下载文件，我可能会尝试这样做（我假设您使用的是 FLV 文件，因为它们是当今网络上的事实标准）：

*   将 FLV 文件放在不可通过 Web 访问的目录中。
*   让文件通过您`player.swf`网站上的脚本请求文件，例如：`video.php?file=myVideo.flv`
*   然后`video.php`可以执行您想要的任何安全检查：例如，要求登录、检查引荐来源网址等。
*   如果安全检查没问题，则通过相应的视频文件。如果没有，那么也许有一个简短的备用视频，它是您网站的广告之类的，上面写着“要观看此视频，请访问 mysite.com！”

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-05T04:15:53.527

[大多数像Hulu这样的视频流媒体网站通过使用RTMP](http://en.wikipedia.org/wiki/Real_Time_Messaging_Protocol)传输视频数据来实现一种穷人的安全性。您需要特殊的服务器软件来通过 RTMP 提供视频，例如 Adob​​e Flash Media Server 或 WebORB。

RTMP 是一个专有协议，所以这是一个[通过默默无闻来保证安全](http://en.wikipedia.org/wiki/Security_through_obscurity)的案例；下载视频的副本并非易事（您不能只从 URL 中获取文件），但是有一些程序能够拦截流并保留副本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-05T13:52:37.587

> 2.我需要控制播放器的外观

下载并自定义[OSFLV](http://www.osflv.com/)等免费播放器。

> 4.在保护内容不被下载方面，我需要尽可能多的保护

忘了它。

FLV 的 DRM 存在，但您必须为 Flash Media Server 和 Flash Media Rights Management Server 向 Adob​​e 支付大量费用，您将失去客户端兼容性和易于部署，最终它仍然是易碎的。老大浪费时间。

接受有些人会下载你的视频，并在它们上加一个大水印，这样至少当他们下载你的视频时，你会得到免费的广告。

# java - 在 Java 中连续处理异步队列的最佳方法是什么？

> ID：514306
> 
> 赞同：7
> 
> 时间：2009-02-05T02:33:08.773
> 
> 标签：java, asynchronous, queue, jms

我很难弄清楚如何构建我系统的最后一部分。目前我正在运行一个 Tomcat 服务器，它有一个响应客户端请求的 servlet。每个请求依次将处理消息添加到异步队列（我可能会通过 Spring 或更可能使用 Amazon SQS 使用 JMS）。

事件的顺序是这样的：

发送方：
1\. 接受客户端请求
2\. 将一些数据添加到与此请求相关的具有唯一 ID 的 DB 中
3\. 将表示此请求的消息对象添加到消息队列

接收方：
1\. 从队列中拉出一个新的消息对象
2\. 打开对象并根据 msg 对象中包含的信息从网站中获取一些信息。
3\. 发送电子邮件警报
4\. 使用已为此请求完成操作的信息更新我的数据库行（相同的唯一 ID）。

我很难弄清楚如何正确处理接收方。一方面，我可能可以创建一个简单的 java 程序，我从命令行启动该程序，该程序选择队列中的每个项目并对其进行处理。那安全吗？让该程序作为 Tomcat 容器内的另一个线程运行是否更有意义？我不想连续执行此操作，这意味着接收端应该能够一次处理多个对象——使用多个线程。我希望它每天 24 小时一直在运行。

构建接收端有哪些选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-05T02:43:24.790

“一方面，我可能会创建一个简单的 java 程序，我从命令行启动该程序，它会选择队列中的每个项目并对其进行处理。这样安全吗？”

它有什么不安全的地方？它工作得很好。

“让该程序作为 Tomcat 容器内的另一个线程运行是否更有意义？”

仅当 Tomcat 有大量空闲时间来处理后台处理时。通常情况**就是**这样——你有空闲时间来做这种处理。

然而，线程并不是最优的。线程共享公共 I/O 资源，您的后台线程可能会减慢前端的速度。

更好的是在“端口 80”前端和单独的后端进程之间有一个 JMS 队列。后端进程启动，连接到队列，获取并执行请求。后端进程可以（如果需要）是多线程的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-05T02:45:43.363

如果您使用 JMS，为什么要将任务放入数据库？

您可以在 JMS 中使用持久队列。即使 JMS 代理死亡，这也会保留任务，直到它们被确认。您可以拥有冗余代理，这样如果一个代理死了，第二个代理就会自动接管。这可能比使用单个数据库更可靠。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-05T02:42:00.593

如果您已经在使用 Spring，请查看[DefaultMessageListenerContainer](http://static.springframework.org/spring/docs/2.0.x/api/org/springframework/jms/listener/DefaultMessageListenerContainer.html)。它允许您创建一个 POJO 消息驱动 bean。这可以在现有应用程序容器（您的 WAR 文件）中使用，也可以作为单独的进程使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-05T02:41:31.313

我已经通过将接收器托管在应用服务器中来完成这种事情，在我的例子中是 weblogic，但是 tomcat 也可以正常工作。不要轮询队列，使用基于事件的模型。这可以是手动编码的，也可以是消息驱动的 Web 服务。如果数据库更新是幂等的，您可以更新数据库并发送电子邮件，然后在队列上发出提交。有几个线程都从同一个队列中读取不是问题。

我使用过各种 JMS 解决方案，包括 tibco、activemq（在 apache 包含它之前）和 joram。Joram 是更可靠的开源解决方案，但现在可能已经改变，因为它是 apache 的一部分。

# c# - C# 中的动态加密

> ID：514307
> 
> 赞同：0
> 
> 时间：2009-02-05T02:34:05.963
> 
> 标签：c#, encryption, cryptography

我正在学习 C#。我想编写一个动态加密程序。类似于[Truecrypt](http://www.truecrypt.org/)的东西。它基本上创建了一个加密容器，可以将其安装为虚拟驱动器，您可以从中即时解密文件，而无需将它们写入硬盘驱动器。Truecrypt 使用一些过滤器驱动程序[我不知道它们是什么]。我需要知道它是否可以在 c# 中实现。我需要学习任何驱动程序编程吗？可以不使用驱动程序来完成吗？我需要学习什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-05T02:42:56.957

您将无法使用 C#（或任何 .NET 语言）执行此操作，因为设备驱动程序必须使用非托管代码编写。

此外，您还有一个更微妙的问题。您可能会将信息保存在内存中，但该内存可能会被分页到磁盘，如果您希望它真正安全，则必须避免这种情况。

# java - 正则表达式的替代品

> ID：514313
> 
> 赞同：15
> 
> 时间：2009-02-05T02:35:27.970
> 
> 标签：java, regex, parsing

我有一组字符串，其中嵌入了数字。它们看起来像 /cal/long/3/4/145:999 或 /pa/metrics/CosmicRay/24:4:bgp:EnergyKurtosis。我想要一个表达式解析器

*   便于使用。举几个例子，某人应该能够形成一个新的表达方式。我希望最终用户能够形成新的表达式来查询这组字符串。有些潜在用户是软件工程师，有些是测试人员，有些是科学家。
*   允许对数字进行限制。类似 '/cal/long/3/4/143:#>100&<1110' 的东西来指定一个带有 '/cal/long/3/4/143:' 的字符串前缀，然后是 (100,1110) 之间的数字是期待。
*   支持'|' 和*。所以表达式 '/cal/(long|short)/3/4/* ' 将匹配 '/cal/long/3/4/1:2' 以及 '/cal/short/3/4/1:2 '。
*   有可用的 Java 实现，或者很容易用 Java 实现。

有趣的替代想法会很有用。我也在考虑只实现我需要的正则表达式子集以及数字约束的想法。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-02-05T03:02:23.970

没有理由重新发明轮子！正则表达式引擎的核心是建立在数学和计算机科学的坚实基础之上的；我们今天继续使用它们的原因是它们主要是健全的，并且在可预见的将来不会得到改进。

如果您确实找到或创建了一些仅涵盖 Regex 可能的子集的替代解析语言，您将很快让用户要求可以在 Regex 中表达的概念，但您的风格只是简单地遗漏了。花时间解决尚未解决的问题！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-05T03:37:47.317

我倾向于同意 Rex M，尽管您对数值约束的第二个要求使事情复杂化。除非您只允许非常基本的约束，否则我不知道用正则表达式简洁地表达它的方法。如果有这样的方法，请忽略我的其余答案并按照此处的其他建议进行操作。:)

您可能需要考虑一个解析器生成器——比如经典的 lex 和 yacc。我对 Java 的选择不是很熟悉，但这里有一个列表：

[http://java-source.net/open-source/parser-generators](http://java-source.net/open-source/parser-generators)

如果您不熟悉，标准方法是首先创建一个[词法分析器](http://en.wikipedia.org/wiki/Lexical_analysis)，将您的字符串转换为标记。然后，您会将这些标记传递给解析器，该解析器将您的语法应用于它们并吐出某种结果。

在您的情况下，我设想解析器会产生正则表达式和附加条件的组合。对于您的数字约束示例，它可能会为您提供正则表达式`\/cal/long/3/4/143:(\d+)\`和一个约束，以应用于`\d+`要求数字介于 100 和 1100 之间的第一个分组（部分）。然后您将 RE 应用于候选字符串，并将约束应用于这些候选人以找到您的匹配项。

这是一个相当复杂的方法，所以希望有一个更简单的方法。我希望这至少能给你一些想法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-02-05T05:10:18.643

Java 约束是一个严重的约束。我建议使用**解析组合**器，但您必须使用类而不是函数将这些想法转换为 Java。关于这个主题有很多很多的论文；最容易接近的方法之一是[Graham Hutton 的*高阶解析函数*](http://www.cs.tufts.edu/~nr/comp150fp/archive/graham-hutton/parsing.ps.gz)。正如您在示例中所展示的，Hutton 的方法使得根据数字大小等条件决定成功或失败变得特别容易。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-05T03:17:45.903

不幸的是，并不是所有的程序员（包括我自己）都像他们应该熟悉的那样熟悉 RegEx。这通常意味着我们最终会编写自己的字符串解析逻辑，否则 RegEx 本来可以很好地为我们服务。

这并不总是坏事。在某些情况下，可以编写更优雅、更易读并满足您的问题域的精确需求的 DSL（一个类，一组有凝聚力的方法）。问题在于，可能需要数十次迭代才能将问题提炼成简单直观的 DSL。只有当 DSL 将在应用程序或大型社区中广泛使用时，才会出现这种麻烦。不要为偶尔出现的问题编写优雅的解决方案。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-15T18:16:49.777

如果您打算使用解析器路线，请查看 GOLD 解析系统。它通常是比 YACC 更好的选择，比纯正则表达式更简洁，并且支持 Java。

[http://goldparser.org/about/how-it-works.htm](http://goldparser.org/about/how-it-works.htm)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-05T03:17:29.867

实际上你描述的是Java[模式](http://java.sun.com/j2se/1.4.2/docs/api/java/util/regex/Pattern.html)匹配器。恰好使用正则表达式作为其语言。

# eclipse - 是否可以在 Eclipse 插件中使用 Spring？

> ID：514314
> 
> 赞同：1
> 
> 时间：2009-02-05T02:36:16.677
> 
> 标签：eclipse, spring, plugins

是否可以从 Eclipse 插件内部为 DI 使用 Spring 容器？

我想知道，因为我知道 Eclipse 在类加载、在插件中查找内容等方面会导致很多问题。

该插件旨在作为 JAR 分发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-05T03:02:16.747

是的，但你需要 Spring DM [http://www.springsource.org/osgi](http://www.springsource.org/osgi)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-05T06:08:32.223

答案是肯定的。您可以使用 Spring DM，但不是必须的。它可能会更好。

我在没有 Spring DM 的情况下做到了，主要关注的是类加载问题（不确定 Spring DM 是否解决了这些问题，但我想应该）。假设您将 Spring JAR 与依赖项捆绑在一个单独的插件中，您将需要使用调用插件的类加载器加载上下文。

例子：

*   插件 A - 你的功能插件
*   Plugin B - 导出 spring 包的 Spring lib 插件

插件 A 依赖于 B。当插件 A 启动时，它将加载应用程序上下文，在调用此加载时，您需要执行以下操作：

```
Thread.currentThread().setContextClassLoader(PluginAActivator.class.getClassLoader()) 
```

这样类的加载将在您自己的类加载器下进行。现在您可以使用 a`ClassPathXmlApplicationContext`从类路径中加载配置 XML。

一个小提示：默认值`ClassPathXmlApplicationContext`会在加载时验证您的 XML。您可能希望禁用它或将您的 XML 指向本地模式（而不是 springframework.org 上的标准 Spring 模式），否则，您将连接到 Internet 以在加载时下载模式文件，并且脱机工作将失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-09-30T11:33:00.670

您的帖子有代码示例吗？这会很棒，因为我在这附近闲逛了一段时间。

干杯!

# .net - 使用 RegEx 解析过滤器表达式

> ID：514320
> 
> 赞同：0
> 
> 时间：2009-02-05T02:37:59.027
> 
> 标签：.net, regex, parsing

我有一个用人类可读语言编写的查询过滤器。我需要解析它并转换为 SQL where 子句。例子是：

```
CustomerName Starts With 'J' 
```

变成

```
CustomerName LIKE 'J%' 
```

和

```
CustomerName Includes 'Smi' 
```

变成

```
CustomerName LIKE '%Smi%' 
```

要解析的完整表达式可能要复杂得多，例如

```
CustomerName Starts With 'J' AND State = 'CA' 
```

应该成为

```
CustomerName LIKE 'J%' AND State = 'CA' 
```

解决此问题的最佳方法是什么？可以用 RegEx 轻松完成吗（我不是 regex 专家）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-05T08:45:30.067

在没有其他答案的情况下，我会投入 2 美分：

在我看来，您实际上是在创建一种新语言，尽管它与现有语言非常相似。因此，我怀疑计算机语言解释领域的许多技术可以使这项任务变得更简单。

需要注意的另一件事是意外（或有意）的 SQL 注入问题。

我还没有处理过这样的任务，但是如果我使用正则表达式来解决这个问题，我会很想为每个新语法都有一个单独的方法，然后将该输入传递给每个方法。例如，这是我可能如何处理“开始于”语法的方式。

```
 public void Main()
    {
        string input = @"CustomerName Starts With 'J' AND State = 'CA'";

        ReplaceStartsWith(ref input);
        //...
        //ReplaceIncludes(ref input);

        Console.WriteLine(input);
        //Returns: CustomerName LIKE 'J%' AND State = 'CA'
    }

    void ReplaceStartsWith(ref string input)
    {
        input = startsWithRegex.Replace(input, match =>
            string.Format("LIKE '{0}%'", match.Groups["literal"]));
    }

    &nbsp;

    static RegexOptions commonOptions =
        RegexOptions.Compiled |
        RegexOptions.ExplicitCapture |
        RegexOptions.IgnoreCase |
        RegexOptions.IgnorePatternWhitespace |
        RegexOptions.Singleline;

    &nbsp;

    static Regex startsWithRegex = new Regex(
        @"\bstarts\s+with\s+'(?<literal>[^']*)'"
        , commonOptions); 
```

# .net - 如何在混淆和调试版本之间保持反序列化兼容性？

> ID：514332
> 
> 赞同：5
> 
> 时间：2009-02-05T02:41:57.117
> 
> 标签：.net, obfuscation, serialization, smartassembly

我正在尝试让 {smartassembly} .NET 混淆器与我的系统一起使用。我目前将用户数据存储在一系列序列化的字典类中，然后反序列化这些类以取回数据。我已经忽略了汇编版本信息，只是因为那样会让生活变得痛苦。该代码[改编自 MSDN](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.serializationbinder.aspx)：

```
//to avoid cross-versioning problems
public sealed class CrossVersionDeserializationBinder : SerializationBinder {
    public override Type BindToType(string assemblyName, string typeName) {
        Type typeToDeserialize = null;

        typeToDeserialize = Type.GetType(String.Format("{0}, {1}",
            typeName, assemblyName));

        return typeToDeserialize;
    }
} 
```

问题是，现在我的混淆应用程序将忽略版本信息，但无法读取非混淆应用程序保存的数据，反之亦然。我们需要一个非混淆版本来调试应用程序，所以这对我们来说是一个相当大的展示。有什么办法可以解决这个问题？我不应该混淆数据类吗？这似乎是一个相当大的安全漏洞。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-02-05T06:32:07.540

也许考虑一个不与类型和字段名称绑定的序列化程序？例如，[protobuf-net](http://code.google.com/p/protobuf-net/)是一个二进制序列化程序，但对每个成员使用数字标签集（通过属性）。这表示：

*   序列化根本不依赖于程序集版本
*   字段名称信息不在序列化文件中
*   （由上述）代码是否被混淆并不重要
*   （并且）该文件不能用于轻易破解混淆（尽管数据可能仍暗示意图，除非加密）

例如：

```
[ProtoContract]
public class Foo {
    [ProtoMember(1)]
    public string Bar {get;set;}
} 
```

在这里，`1`是标识文件中成员的所有内容。这里的关键是它是基于契约的，因此可以在以后使用不相关的类型进行反序列化：

```
[ProtoContract]
public class a12 {
    [ProtoMember(1)]
    public string a {get;set;}
} 
```

（这很好，因为混淆保留了元数据，IIRC）。

将此与其他基于合同的序列化程序（例如`XmlSerializer`or `DataContractSerializer`）进行对比 - 您将被迫将成员名称放在属性中，这几乎会使混淆变得毫无意义：

```
[DataContract]
public class a12 {
    [DataMember(Name="Bar")]
    public string a {get;set;}
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-02-05T02:47:18.353

混淆首先不能提供安全性。因此，您可能需要考虑放弃它，期间。

我看到的两个选项是：

1.  不要混淆这些类型。这将使事情正常进行。
2.  编写您自己的序列化程序代码。

由于您通过混淆一无所获，因此我会选择＃1。

# .net-2.0 - 以多线程方式处理项目列表的最简单方法

> ID：514336
> 
> 赞同：0
> 
> 时间：2009-02-05T02:43:24.023
> 
> 标签：.net-2.0

我有一段代码可以打开数据阅读器，并为每条记录（包含一个 url）下载和处理该页面。

使它成为多线程的最简单方法是什么，比如说，有 10 个插槽可用于同时下载和处理页面，并且当插槽可用时，正在读取下一行等。

我不能使用 WebClient.DownloadDataAsync

这是我试图做的，但它没有奏效（即“工人”从未运行过）：

```
 using (IDataReader dr = q.ExecuteReader())
        {
            ThreadPool.SetMaxThreads(10, 10);
            int workerThreads = 0;
            int completionPortThreads = 0;
            while (dr.Read())
            {
                do
                {
                    ThreadPool.GetAvailableThreads(out workerThreads, out completionPortThreads);

                    if (workerThreads == 0)
                    {
                        Thread.Sleep(100);
                    }
                } while (workerThreads == 0);

                Database.Log l = new Database.Log();
                l.Load(dr);

                ThreadPool.QueueUserWorkItem(delegate(object threadContext)
                {
                    Database.Log log = threadContext as Database.Log;
                    Scraper scraper = new Scraper();
                    dc.Product p = scraper.GetProduct(log, log.Url, true);
                    ManualResetEvent done = new ManualResetEvent(false);
                    done.Set();
                }, l);
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-05T02:53:02.680

您通常不需要使用 Max 线程（我相信它默认为每个 proc 25 个 worker，1000 个 IO）。您可能会考虑设置 Min 线程以确保始终有一个不错的数字可用。

您也不需要调用 GetAvailableThreads。您可以开始调用 QueueUserWorkItem 并让它完成所有工作。您可以通过简单地调用 QueueUserWorkItem 来重现您的问题吗？

您还可以查看[Parallel Task Library](http://msdn.microsoft.com/en-us/concurrency/default.aspx)，它具有帮助方法，使这类东西更易于管理和更容易。

# xml - 在 Atom 提要中，当条目的内容发生更改时可以更改“更新”字段吗？

> ID：514340
> 
> 赞同：0
> 
> 时间：2009-02-05T02:44:29.577
> 
> 标签：xml, atom-feed

如果条目表示某些已更改的文件/资源​​ - 更改更新的字段是否足够？我注意到大多数提要阅读器不会将其显示为“新”，因为它具有相同的 UUID？

[RFC 4287](https://www.rfc-editor.org/rfc/rfc4287)说我可以更改它，但提要阅读器似乎忽略了它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-05T23:43:12.497

从这个角度来看，RFC 4287 表示可以更新资源及其更新的字段。但是，如果您希望提要阅读器将其作为新项目来选择 - 您需要考虑一个表示更改的条目，而不是与基础资源的一对一。

# language-agnostic - Web 编程与后端编程有何不同？

> ID：514347
> 
> 赞同：7
> 
> 时间：2009-02-05T02:47:37.930
> 
> 标签：language-agnostic

在我职业生涯的大部分时间里，我一直从事单线程业务逻辑/后端编程。我现在想学习 Web 编程，但想知道 Web 编程与非 GUI 编程有何不同（例如编写 API 或文件处理应用程序）。我不是在谈论 GUI 设计方面（有人已经[在这里](https://stackoverflow.com/questions/514083/why-is-ui-design-so-hard-for-some-developers)问过这个问题），而是更多关于编程复杂性的问题。

在我做web应用的少数场合，我觉得web应用相对来说更加不确定和不可预测（例如，由于web应用的事件驱动、多线程模型，有几种排列组合需要处理的事件和动作）。

您会说 Web 编程的一些基本功能使其与非 GUI 应用程序不同吗？后端开发人员在开发 Web 应用程序时可能会犯哪些陷阱/错误？

**编辑** 我对后端编程的定义是指非 GUI 应用程序，如 API 或文件处理批处理应用程序，它们解析大型数据文件、读取记录、对数据进行大量数字运算并将结果输出到另一个文件或数据库。另一个示例可能是日期和时间实用程序库。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-02-05T02:52:24.053

Web 编程的最大挑战是处理状态。HTTP 是一种无状态协议。这会使维护状态比在桌面应用程序中更具挑战性。因此，Web 应用程序往往具有不同的生命周期。每个 Web 开发平台处理这个问题的方式都有些不同，但它们都需要以某种方式处理它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-02-05T03:00:08.110

Web 应用程序通常感觉像是单线程应用程序，因为您（应用程序开发人员）很少创建自己的线程。如果有的话，它实际上要容易得多，因为 Web 事务的无状态特性意味着您每次都必须从数据库中加载页面的数据。因此，您不必担心并发性，因为“随便什么”通常就足够了。

Web 开发的最大问题是您必须随着时间的推移积累的所有背景知识。你如何布局网页？你如何使用 CSS 设置样式？如何从查询字符串中获取参数？如何在 JavaScript 中验证字段值？所有这些东西实际上都很容易学习，但是它们太多了，这可能是一个真正的痛苦。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-05T03:22:59.903

我目睹的应用程序开发人员在迁移到 Web 时所犯的最大陷阱是没有考虑他们的代码成本。要么他们滥用 MySQL 使 RDBMS 陷入瘫痪，要么他们编写的代码占用了太多内存，要么他们制作的前端页面太大而无法适应拨号/手机或低端宽带/dsl 管道。

有时在编写繁重的页面时无法避免，但可以考虑尝试尽可能多地缓存，或者在编写会被大量访问的页面时，他们不会在查询之前对查询进行分析和优化出门。

并不是说这些人很愚蠢，只是缺乏经验和意识，他们需要玩得很好，写的代码有点精简。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-05T03:50:21.690

后端编程比 Web 编程简单得多。（你已经被警告过了！）Web 编程是最容易向所有人炫耀的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-05T02:54:18.480

大多数网站也有后端组件。典型的结构将类似于：

1.  用户界面 - html/css/javascript
2.  控制器 - 如果使用 MVC
3.  业务逻辑/服务 - 这是后端
4.  数据库 - 这也是后端

所以建立网站仍然意味着大量的后端工作。关于 UI，主要区别在于您需要对设计和布局有很好的了解才能做好。html/css 技术本身非常简单。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-02-05T03:17:05.127

HTML 实际上是为了传递物理论文而开发的。您仍然可以在一些旧的元标记中看到它。无论如何，不​​同之处在于 Web 编程是无状态的，而胖客户端开发则不是。

正如您熟练地指出的那样，这一切都是由事件驱动的。真正的 javascript 通过创建有状态环境的错觉，使 Web 开发有些混乱，但最终一切都归结为简单的 HTML。

开始学习永远不会太晚，我会说开始制作一些静态 HTML 页面并升级到 MVC 框架，我建议使用 Microsoft MVC 框架。它非常棒，还有其他你可以使用的，比如 ASP.Net Webforms，但你不会通过将东西拖放到设计器上来学习任何东西；）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-02-05T04:27:35.203

Web & GUI 应用程序与人的交互.. 后端应用程序与服务和数据库的交互.. 因此，您的规范需要包括对用户心理模型的重要考虑——使事物按照人们的*期望*行事。这样做——了解用户的想法——并不总是容易或合乎逻辑的。你可能有优雅的算法解决方案，但根本无法参与，因为人们并不总是逻辑思考。很多时候，相当优雅的用户界面在编码方面极其扭曲......这与系统->系统编程非常相反

根据问题空间，其中大部分可能是艺术而不是科学。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-02-05T04:53:40.487

Web 编程的一个考虑因素（在众多考虑因素中）是，用户不仅是愚蠢的（不是他们都是愚蠢的，但你总是必须考虑到这一点），他们有时（总是假设）是彻头彻尾的恶意和讨厌的，并且会尽其所能摧毁你的应用程序、你的数据库、你的周末、你的理智......

在企鹅拍摄时像一个很小的修女一样偏执。不要相信你的用户。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-02-05T03:31:25.893

Web 编程不是后端编程。它在前端，网络上显示东西。

您是否以其他方式定义它？

编辑

**Web 编程使您能够以一致、直观的方式向所有人呈现数据。后端编码意味着以与呈现相同的方式构造该数据，但不呈现它。**

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-02-05T04:11:14.970

另一个考虑因素是根据您的定义进行后端编程更容易测试。

一旦开始 Web 编程，您就会受到各种浏览器对同一代码的不同解释的摆布。此外，用户通过鼠标和键盘的输入，可以通过多种方式破坏您的产品。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-02-05T05:06:14.360

根据您对“后端编程”的定义，您的问题不仅适用于 Web 应用程序，还适用于任何 GUI 应用程序。

这取决于我们谈论的是哪种 GUI 应用程序。例如：

*   内部业务应用程序往往涉及大量业务流程工作流逻辑、记录保存和不同系统之间的互操作性。不需要花哨的算法或数字运算。您的受众有限，因此性能不是什么大问题，但跨平台兼容性很重要，因此这些往往是 Web 应用程序。您主要关心的是如何轻松地将业务系统捆绑在一起，并保持 API 分层以确保 GUI 代码不必处理任何业务逻辑代码。
*   公共网站（例如这个）往往涉及较少的正式架构，而更多的是“让这个很酷的功能发挥作用，这样我们就可以吸引更多的访问者”的心态。同样，除非性能是一个问题，否则没有数字运算或算法。对于 Slashdot 或 Google 等广受欢迎的网站而言，性能更是一个问题，因此，如果您预计快速增长，那么提前设计可扩展性是值得的。
*   公共电子商务网站有点像上述两种情况：功能和性能很重要，但同样重要的是它下面的结构化架构，它将所有商业业务系统（采购、供应商、购物车、支付网关、 ETC。）

对于实际的 GUI 部分，应用程序类型的复杂性决定了 GUI 代码的复杂程度。对于您的需求经常变化的高度复杂的嵌套 GUI，很容易陷入将太多 GUI 内容放在一个页面中的陷阱。很快页面就超过了大多数人的复杂度阈值，使得页面非常难以维护。提前考虑如何将 GUI 的不同部分分成单独的组件，然后将它们绑定在一起是值得的。如果您不熟悉 GUI 编程，请阅读一些关于模型-视图-控制器 (MVC) 模式的文章。

对于大多数页面都相当静态的简单网站，这个问题不会出现太多，因为每个单独的页面都易于维护。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-02-23T15:09:05.743

Most web programming is done in the style popular in the early seventies, before Dijkstra's 'goto considered harmful' was well-known.

# cygwin - Cygwin 上的 startx 发生了什么？

> ID：514358
> 
> 赞同：13
> 
> 时间：2009-02-05T02:54:01.833
> 
> 标签：cygwin, xterm

我刚换了台式电脑。我以前的电脑和这台电脑都有 Windows XP。为了与我们拥有的许多 Linux 服务器一起工作，我安装了 Cygwin 及其 xterm 包。但是，我无法像以前的计算机那样运行 startx 来启动 X-window 服务器。我一直在网上寻找为什么我的安装中缺少 startx，但我还没有找到任何东西。任何帮助将不胜感激。

* * *

[做更多研究] 好吧，我刚刚安装了 xinit 包，我不记得以前必须这样做。（这可能是我上次安装 Cygwin 时对 xterm 包的要求。） startx 现在存在，但我不会说它有效。它启动的 X 窗口服务器创建了一个窗口，该窗口覆盖了我的整个显示器，其中包含三个终端，这与我习惯的旧的 25 行 x 80 列单终端窗口不同。更糟糕的是，我不能像以前那样只生成子窗口，这是将 Cygwin 与 X-windows 结合使用的真正威力。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-02-06T01:58:43.627

好的，经过更多研究并从我的一位同事那里获得帮助后，我找到了解决问题的方法。

发生的事情是，虽然 startx 存在，但它现在默认以全屏模式而不是多窗口模式启动 X 服务器。回想起来，我可能已经将 /etc/X11/xinit/xinitrc 复制到 ~/.xinitrc 并对其进行了自定义。然而，事实证明还有其他更容易修改的 X 服务器启动脚本。（见[http://x.cygwin.com/docs/ug/using.html](http://x.cygwin.com/docs/ug/using.html)。）

在这种情况下，我使用了脚本 startxwin.bat。然后我对 startxwin.bat 进行了一些更改：

*   我在 CYGWIN_ROOT 中添加了一个驱动器号，因为我的工作环境在 C 驱动器之外有我的主目录。
*   我在 xterm 调用中添加了一个“+tb”选项来抑制 X 窗口顶部的菜单栏。

有趣的是，通过转到开始 → 程序 → Cygwin-X → Xwin Server，我可以打开 GUI Cygwin X 窗口，而无需打开标准的 Cygwin 命令行。这绝对不是我之前安装的情况。

我应该补充一点，我在扩展我的包选择后进行了这些更改。我不只是安装 X11 → xterm，而是按照[http://x.cygwin.com/docs/ug/setup-cygwin-x-installing.html](http://x.cygwin.com/docs/ug/setup-cygwin-x-installing.html)的第 15 步中的建议安装了：

*   X11 → X-开始菜单图标
*   X11 → 初始化
*   X11 → xorg-文档
*   X11 → xorg-服务器

（这个选择选择了 X11 → xterm 作为必需的包。）虽然我看不出上面的说明为什么不能只安装 X11 → xterm 和 X11 → xinit 的明显原因，但我没有把这个理论付诸实践，并且我不想吹掉我当前的安装并重建它来证明我的理论。

我希望这可以帮助其他人避免一些痛苦。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-02-05T09:28:00.930

免责声明：我知道这个答案不能直接回答您的问题，但它提供了一个很好的选择。

我使用 Cygwin + [XMing](http://www.straightrunning.com/XmingNotes/)运行远程 X 应用程序：

1.  启动小明
2.  启动我最喜欢的 Cygwin shell (zsh)

    ```
    export DISPLAY=localhost:0
    ssh -X myserver.domain 
    ```

3.  运行 X 程序

奇迹般有效。最好的部分是 XMing 可以巧妙地将 X 窗口集成到 Windows GUI 中，即每个 X 应用程序都有自己的全权窗口。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-07T09:28:17.480

谢谢，这对我有所帮助（了解如何安装**xinit**）。那个新的 startx 窗口真的很糟糕，一位朋友帮我用另一种方式解决了它：从**startxwin.sh**而不是**startx**开始。然后它看起来像“旧”的，并且工作得更好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-05T03:12:57.990

当您安装 Cygwin 时，您是否安装了完整的软件包集？默认情况下仅安装可能不包含 X 的软件包的基线。

再次运行 setup.exe 并确保安装了 X11 软件包。我只需单击“全部”旁边的小双箭头，直到它显示“安装”。可能是您选择了“默认”。

最好进行完整安装，因为我记得过去与 Cygwin 依赖项有问题，现在，当我运行“开始”、“所有程序”、“CygWin-X”、“XWin 服务器”时，它运行良好，打开了一个 shell，然后 'xterm &' 打开另一个 shell。

所以我真的认为你需要安装很多。您至少可以尝试整个 X11 组（不仅仅是 xinit），但您也可以尝试很多，尤其是考虑到您获得的强大命令。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-05T03:27:17.913

我总是运行 Cygwin install 两次……第一次，我只安装默认软件包，第二次，我安装所有东西。下载需要很长时间，但通过这种方式，我总是拥有几乎所有我可能想要的东西。（我喜欢在 Cygwin 上我可以安装所有东西并且没有冲突，这与某些 Linux 发行版不同，其中有些软件包以不同的方式执行相同的操作，但不能同时安装。但当然 Cygwin 更容易这比完整的操作系统更重要……例如，没有 Cygwin sendmail。）

我明天必须在新机器上安装 Cygwin，所以这个问题让我很害怕。如果 startx 不工作，我会死的。我希望事实证明你只是缺少一个包裹。我强烈建议安装所有东西。

# vb.net - MS Excel 与 vb.net 的连接

> ID：514363
> 
> 赞同：0
> 
> 时间：2009-02-05T02:55:54.513
> 
> 标签：vb.net, excel

我使用了下面的连接字符串，但在尝试创建表时出现错误

Dim ConnString As String = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" & strFName + _ ";Extended Properties=""Excel 12.0 Xml;HDR=YES;IMEX=1"""

无法修改表“tablename”的设计。它位于只读数据库中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-05T03:45:18.377

如果数据库是只读的，那么根据定义，您将无法在其中创建任何表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-03-14T16:32:57.633

绝对确定您确实具有对该文件的写入权限。例如，您是否从仅具有有限权限的 IIS 访问它。检查目录的安全性。在同一进程中尝试文件的普通 File.Open()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-12-01T15:25:06.103

你的问题是 IMEX=1。这告诉 excel 以“导入模式”打开，使连接成为只读的。我有同样的问题，奇怪的东西。

把它拿出来，它就像一个魅力。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-18T06:03:36.457

我个人使用以下连接到访问数据库：

```
 _source = "..\db.mdb"
    Dim strconnexion As String
    strconnexion = "Provider=Microsoft.Jet.OLEDB.4.0;"
    strconnexion &= "User ID=Admin;Password=;"
    strconnexion &= "Data source=" & _source
    _cnBd = New OleDbConnection (strconnexion)
    _cnBd.Open() 
```

希望这可以帮助。

# .net-3.5 - .Net 2.0 与 .Net 3.5 的性能对比

> ID：514364
> 
> 赞同：2
> 
> 时间：2009-02-05T02:55:58.150
> 
> 标签：.net-3.5, .net-2.0

微软声称 .Net 3.5 框架比 2.0 有许多速度改进。有没有人能够验证这个说法？

我对计算类型的东西（数学、图形等）特别感兴趣，但也更普遍？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-05T04:48:53.007

对于某些任务，3.5 CLR 似乎确实更快。

这是 2.0 与 3.5 的排序差异的相当简单的比较，显示了 .Net 3.5 中的性能改进。

[http://systematicgaming.wordpress.com/2009/01/13/performance-c-vs-c-part-2/](http://systematicgaming.wordpress.com/2009/01/13/performance-c-vs-c-part-2/)

究竟是什么导致了这些改进尚不清楚，但结构在 2.0 下没有得到很好的处理，而内联在 3.5 中得到了改进，这两者在适当的情况下都会产生很大的不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-05T03:46:46.063

我听说 3.5 JIT 内联函数和命令比 2.0 更智能，这确实有助于内存交换。

如果您对版本之间的特定时间感到好奇，您可能希望自己使用（许多）.NET Profiler 之一对其进行测试。它们对于测量每个函数的 CPU 时间和垃圾收集器中的内存交换非常有用。

CLR 分析器：[http ://www.microsoft.com/Downloads/details.aspx?FamilyID=86ce6052-d7f4-4aeb-9b7a-94635beebdda&displaylang=en](http://www.microsoft.com/Downloads/details.aspx?FamilyID=86ce6052-d7f4-4aeb-9b7a-94635beebdda&displaylang=en)

dotTrace（非常好但付费；10 天试用）： http: [//www.jetbrains.com/profiler/](http://www.jetbrains.com/profiler/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-05T03:09:39.040

如果不对仍然基于 2.0 的 CLR 进行大修，核心计算功能似乎不太可能看到任何重大的性能改进。但是，我读过报告说 3.5 SP1 显着提高了应用程序的启动时间（更多关于资源分配和初始化，而不是计算速度）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-05T03:22:41.603

我知道产生线程实际上已经放慢了速度。您生成的线程越多，延迟就越长。除了我没有发现任何问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-05T04:42:15.720

3.5 还添加了替换 JITter 的 2.0 SP1，x86 平台获得了能够在值类型上内联函数的好处，因此像 Double.Compare(Double) 这样的方法被内联。如果你有对此敏感的代码（主要是数字运算），你会在运行时看到一个很好的加速。

# iphone - 如果手机已经处于待机模式，iPhone 应用程序的 applicationWillResignActive: 方法会在来电时运行吗？

> ID：514366
> 
> 赞同：4
> 
> 时间：2009-02-05T02:57:07.960
> 
> 标签：iphone

我知道如果 iPhone 应用程序被中断（例如，来电、用户点击“睡眠”按钮等），它的 applicationWillResignActive: 方法会被调用。*但是如果手机已经处于睡眠模式，是否也调用此方法？*

例如，如果手机由于不活动而进入待机状态（或者用户通过睡眠按钮手动进行），则调用 applicationWillResignActive: 方法一次。*如果在睡眠状态下收到来电，是否会再次调用它？*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-10T22:44:50.797

不，我终于有时间回到这个问题并做一些测试来回答它。

applicationWillResignActive 在屏幕锁定时调用（通过按下设备顶部的按钮手动或如果您启用了自动锁定功能则自动调用）。如果在屏幕锁定（即黑屏）时收到来电，则不会在应用程序委托上调用任何 applicationWillX 或 applicationDidX 方法。

# memory - 编译器及其他

> ID：514367
> 
> 赞同：0
> 
> 时间：2009-02-05T02:58:09.580
> 
> 标签：memory, compiler-construction, physics, processor

我想回过头来了解更多关于编译器、处理器和内存如何在我的程序上运行的信息。我也对所有这一切所依赖的物理学感兴趣。任何好的参考资料或书籍将不胜感激......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-05T03:01:58.497

对于编译器而言，终极书籍是《[龙之书》](http://en.wikipedia.org/wiki/Dragon_book)，即《编译器设计原理》。一开始有点重，但是每次通过它都会变得更容易。这是一本经典之作，所有认真的编程/计算机科学学生都应该阅读。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-05T04:50:13.003

我的第一个建议是已经建议的[代码。](https://rads.stackoverflow.com/amzn/click/com/0735611319)Hennessey & Patterson的[Computer Organization & Design](https://rads.stackoverflow.com/amzn/click/com/0123744938)是一本更好但更难的关于处理器主题的书。您可能会在 Amazon 或 Half.com 上寻找旧版本。它们会便宜很多，而且信息基本相同。

这些都将教您处理器如何工作、汇编语言等的基础知识。这将帮助您了解如何解释您的程序，以及根据您的设计可能存在什么样的性能瓶颈。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-04T15:13:28.933

在我看来，您想获得计算机科学学位。:-)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-05T03:00:39.123

最简单的介绍，而且写得很好，是 Charles Petzold 的 Code

[替代文字 http://ecx.images-amazon.com/images/I/31t68r9K28L._BO2,204,203,200_PIsitb-sticker-arrow-click,TopRight,35,-76_AA240_SH20_OU01_.jpg](http://ecx.images-amazon.com/images/I/31t68r9K28L._BO2,204,203,200_PIsitb-sticker-arrow-click,TopRight,35,-76_AA240_SH20_OU01_.jpg)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-02-05T03:01:35.313

我通常不会同时想到物理和编译器。

[这个链接](http://oco.uoregon.edu/Group_Pages/Raymer/publications/a_Contents_204a.pdf)可能会让你思考。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-02-05T03:06:09.610

为 C64 之类的东西编写一个简单的模拟器。通过思考如何模拟 CPU、内存和其他芯片，您将了解这些简单机器的工作原理。今天的计算机几乎以相同的方式运行，但复杂性更高，但基本思想是相同的。

您的模拟器不必非常快 - 尝试获取 C64 欢迎信息，如果您的代码正确 - 您应该能够戳和编写基本程序并让它们工作:)

```
10 PRINT "DONT LISTEN TO ME - APPLE //E's RULE" 
```

20 转到 10

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-02-05T03:13:04.090

我建议学习足够的**汇编程序**，以便能够在汇编程序中编写一个简单的*Hello World*程序。

这将准确地教您 CPU 在寄存器和内存级别是如何工作的。

它还将向您很好地介绍如何将源代码转换为目标文件以及链接器如何将所有这些目标文件组合在一起以创建工作程序。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-02-05T05:12:15.767

拿起任何轩尼诗和帕特森的书。 [计算机体系结构 - 定量方法](https://rads.stackoverflow.com/amzn/click/com/1558605967 "计算机体系结构 - 一种定量方法")或[计算机组织与设计 - 硬件接口](https://rads.stackoverflow.com/amzn/click/com/0123706068 "计算机组织与设计 - 硬件接口")

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-05-28T00:33:09.563

[费曼对计算物理学](https://rads.stackoverflow.com/amzn/click/com/0738202967)有很好的了解：

[![](https://i.stack.imgur.com/1nMfn.jpg)](https://i.stack.imgur.com/1nMfn.jpg)

它解决了您问题的第二部分。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-02-05T04:39:04.087

在亚马逊上买一本关于“计算机组织”或“计算机架构”的书。这[是](https://rads.stackoverflow.com/amzn/click/com/0131755633)我上大学时用的。它不太厚，会给你基础知识，从门级一直到内存的组织方式和程序的编写方式。如果在此之后，你想更深入地研究物理学，那么你会想要一本关于半导体物理学的书。（但如果我是你，我会先在维基百科上查找“逻辑门”、“二极管”和“晶体管”！）

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-03-04T15:02:38.103

如果您真的想进入处理器/ IC 的物理领域，您需要具备扎实的电磁学/电路分析背景。这当然不是一件容易的事，也不会真正让你成为一个更好的程序员。如果你真的有兴趣，可以向 EE 朋友借一些书！

一个抽象的层次是门级，程序员通常可以理解它，因为它都是关于逻辑的。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-05-30T15:20:53.040

在阅读了 Steve Yegge 的关于了解编译器的建议后，我做出了类似的决定。我真的很喜欢 Nisan 和 Schocken 的*《计算系统的要素：从第一原理构建现代计算机》*，它首先是一本教科书，其次是针对新生或高年级学生的一个学期课程，第三是提供讲座和交叉课程的网站-平台仿真-仿真软件：[http](http://www1.idc.ac.il/tecs/) ://www1.idc.ac.il/tecs/ (TECS)

主题从 NAND（用 HDL 编程数字逻辑电路）到触发器、ALU 和寄存器、汇编器、解析和编译器、操作系统和 GUI。您，学生，在网站上提供的硬件模拟器或软件模拟器上实现这些主题中的每一个。对我来说，本科生可以在 3--4 个月内深入了解这些想法，这是对人类创造力的一种庆祝。其中一位作者/教授就该主题进行了 Google 技术讲座，如果您有一个小时的时间从他们的课程中抽出时间，那么值得一试。

我不能推荐一个同样引人入胜的计算物理学资源，但我可以敷衍地说，我的电气工程系的前两个核心 EE 课程的学生可以学习（如果他们选择的话，可以同时学习）是电路 1 和半导体 1。前者处理与电压、电流、电感器、电容器、运算放大器等有关——而后者涉及量子力学、晶体、掺杂、电荷载流子等，最直接地涉及数字处理和存储设备的物理学。但是，我很难想象像 TECS 这样的动手模拟环境来解决这样的主题，使它更适合学术而不是业余爱好者/专业学习？

# python - 什么是坏幻数错误？

> ID：514371
> 
> 赞同：356
> 
> 时间：2009-02-05T02:59:47.157
> 
> 标签：python

python中的“坏幻数” ImportError 是什么，我该如何解决？

我可以在网上找到的唯一内容表明这是由编译 .py -> .pyc 文件然后尝试将其与错误版本的 python 一起使用引起的。但是，就我而言，该文件有时似乎可以正常导入，但有时却不行，我不确定为什么。

python在回溯中提供的信息并不是特别有用（这就是我在这里问的原因......），但如果它有帮助的话：

```
Traceback (most recent call last):
  File "run.py", line 7, in <module>
    from Normalization import Normalizer 
```

* * *

## 回答 #1

> 赞同：460
> 
> 时间：2009-02-05T03:09:40.803

幻数来自 UNIX 类型的系统，其中文件的前几个字节包含一个指示文件类型的标记。

`pyc`Python在创建文件时会在其文件中放置一个类似的标记。

然后python解释器在加载它时确保这个数字是正确的。

任何破坏这个幻数的东西都会导致你的问题。这包括编辑`pyc`文件或尝试`pyc`从与解释器不同的 python 版本（通常较晚）运行。

如果它们是*您的* `pyc`文件，只需删除它们并让解释器重新编译`py`文件。在 UNIX 类型系统上，这可能很简单：

```
rm *.pyc 
```

或者：

```
find . -name '*.pyc' -delete 
```

如果它们不是您的，您将不得不获取`py`要重新编译的文件，或者使用可以运行`pyc`具有该特定魔法值的文件的解释器。

一件事可能导致间歇性。`pyc`导致问题的可能仅在某些条件下导入。有时它不太可能导入。当导入失败时，您应该检查实际的完整堆栈跟踪吗？

顺便说一句，我所有`2.5.1(r251:54863)` `pyc`文件的第一个字是`62131`, `2.6.1(r261:67517)`is `62161`。所有幻数的列表可以在 中找到`Python/import.c`，为了完整起见，在此处复制（当前为发布答案时，此后可能已更改）：

```
1.5:   20121
1.5.1: 20121
1.5.2: 20121
1.6:   50428
2.0:   50823
2.0.1: 50823
2.1:   60202
2.1.1: 60202
2.1.2: 60202
2.2:   60717
2.3a0: 62011
2.3a0: 62021
2.3a0: 62011
2.4a0: 62041
2.4a3: 62051
2.4b1: 62061
2.5a0: 62071
2.5a0: 62081
2.5a0: 62091
2.5a0: 62092
2.5b3: 62101
2.5b3: 62111
2.5c1: 62121
2.5c2: 62131
2.6a0: 62151
2.6a1: 62161
2.7a0: 62171 
```

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2010-05-25T14:12:02.980

删除所有 .pyc 文件将修复“Bad Magic Number”错误。

```
find . -name "*.pyc" -delete 
```

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2011-01-31T18:52:09.033

使用 python2加载 python3 生成的`*.pyc`文件也会导致此错误。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-05-28T11:49:00.507

将 pyc 文件带到 Windows 机器上。使用任何十六进制编辑器打开此 pyc 文件。我使用了免费软件“HexEdit”。现在读取前两个字节的十六进制值。就我而言，这些是 03 f3。

打开 calc 并将其显示模式转换为 Programmer（XP 中的科学）以查看十六进制和十进制转换。从单选按钮中选择“十六进制”。首先输入值作为第二个字节，然后输入第一个字节，即 f303 现在单击“Dec”（十进制）单选按钮。显示的值是对应于幻数又名 python 版本的值。

因此，考虑到先前答复中提供的表格

*   1.5 => 20121 => 4E99 所以文件的第一个字节为 99，第二个字节为 4e
*   1.6 => 50428 => C4FC 所以文件的第一个字节为 fc，第二个为 c4

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-10-18T23:38:14.250

如果您使用扩展名 .pyc 手动命名文件，也会发生“错误的幻数”错误

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-10-23T14:04:48.267

这也可能是由于`__init__.py`目录中缺少文件。假设您在 Django 中创建一个新目录以将单元测试分成多个文件并将它们放在一个目录中，那么您还必须`__init__.py`在新创建的测试目录中的所有其他文件旁边创建该文件。否则会出现如下错误：

```
Traceback (most recent call last):
  File "C:\Users\USERNAME\AppData\Local\Programs\Python\Python35\Lib\unittest\loader.py",line 153, in loadTestsFromName
    module = __import__(module_name)
ImportError: bad magic number in 'APPNAME.tests': b'\x03\xf3\r\n' 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-06-24T19:06:29.233

使用非常旧的（1.5.2）实现时，我遇到了一个奇怪的 Bad Magic Number 错误案例。我生成了一个 .pyo 文件并触发了错误。奇怪的是，通过更改模块名称解决了这个问题。有问题的名称是 sms.py。如果我从该模块生成一个 sms.pyo，则结果是 Bad Magic Number 错误。当我将名称更改为 smst.py 时，错误消失了。我来回检查了 sms.py 是否以某种方式干扰了任何其他具有相同名称的模块，但我找不到任何名称冲突。尽管这个问题的根源对我来说仍然是个谜，但我建议尝试更改模块名称。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-12-04T00:35:50.603

在我的情况下，在我重命名自己的模块后，它不是`.pyc`旧的二进制翻译文件，所以在这个模块文件夹中我必须运行`.mo`

```
find . -name \*.po -execdir sh -c 'msgfmt "$0" -o `basename $0 .po`.mo' '{}' \; 
```

（请先备份并尝试修复`.pyc`文件）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2010-05-25T14:18:09.203

这比上面的要有效得多。

```
find {directory-of-.pyc-files} -name "*.pyc" -print0 | xargs -0 rm -rf 
```

`{directory-of-.pyc-files}`包含已编译 python 文件的目录在哪里。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-04-17T11:23:42.393

如果您有错误的 python27.dll 文件（在 Windows 的情况下），也可能发生这种情况，要解决此问题，只需使用确切对应的 dll 版本重新安装（或提取）python。我有过类似的经历。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-08-30T09:52:25.453

我刚刚在 Fedora26 上遇到了同样的问题，其中许多工具（例如 dnf）由于 6 的魔数不好而被破坏。由于未知原因，我有一个文件 /usr/bin/six.pyc，其中包含意外的幻​​数。删除此文件可解决问题

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-07-11T12:03:58.477

就我而言，我有`git clone`一个库，它有一个解释器

```
#!/usr/bin/env python 
```

虽然`python`导致`Python2.7`即使我的主要代码使用 python3.6 运行......它仍然为版本创建了一个`*.pyc`文件......`2.7`

我可以说这个错误可能是 2.7 和 3+ 版本混合的结果，这就是为什么清理（以任何方式你可以想到你正在使用） - 在这里会有所帮助......

*   不要忘记调整那些 Python2x 代码 -> python 3...

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-07-20T21:07:14.690

所以我有同样的错误：`ImportError bad magic number`。这是在 Windows 10 上

这个错误是因为我安装了`mysql-connector`

所以我不得不：

```
pip uninstall mysql-comnector
pip uninstall mysql-connector-python
pip install mysql-connector-python 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2016-09-09T11:39:53.357

不要删除它们！！！直到..........

在你的 git、svn 或复制文件夹上找到一个可以工作的版本。

删除它们，然后恢复所有 .pyc。

这对我有用。

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2019-05-29T16:27:58.000

您需要在环境中的每个路径中运行此命令。

```
>>> import sys
>>> sys.path
['', '/usr/lib/python36.zip', '/usr/lib/python3.6', '/usr/lib/python3.6/lib-dynload', '/usr/local/lib/python3.6/dist-packages', '/source_code/src/python', '/usr/lib/python3/dist-packages'] 
```

然后在此处的每个目录中运行命令

```
find /usr/lib/python3.6/ -name "*.pyc" -delete
find /usr/local/lib/python3.6/dist-packages -name "*.pyc" -delete
# etc... 
```

# vb.net - 以编程方式在 Crystal Reports 中插入分页符

> ID：514373
> 
> 赞同：0
> 
> 时间：2009-02-05T03:00:13.960
> 
> 标签：vb.net, crystal-reports

如何在 Crystal Reports 中插入分页符。使用VB.Net，不在报表定义中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-16T17:45:16.860

我用于此类事情的最佳技术是对公式进行分组。将报表设置为在该公式上中断，然后您可以将 .Net 代码中的公式值设置为将在您想要中断的位置中断的值。

使用这种技术，您可以创建一个报表，并在运行时根据您想要的任何字段（或公式）对其进行动态排序和拆分，这使得报表非常通用。

# javascript - 如何在 Rails 中执行 AJAX-y 条件显示/隐藏表单字段？

> ID：514377
> 
> 赞同：6
> 
> 时间：2009-02-05T03:02:07.043
> 
> 标签：javascript, ruby-on-rails

我想在 Rails 中显示或隐藏表单中的一些字段，具体取决于表单中选择字段的状态。我（当前）不需要对字段进行第二次数据库查找，因此我试图将其全部限制在视图中。我已经勾勒出大纲，但我在实施细节方面遇到了一些麻烦。

我最初的想法是使用`observe_field`和调用 Element.show 等，但后来我必须编写一个 Javascript 条件。这可能必须起作用，但如果可以的话，我想避免它。

另一种方法是使用`observe_field`请求 RJS 模板并`replace_html`插入字段。不错，但由于我使用的是`form_for`块，我要么必须通过 RJS 模板一直传递表单实例才能正确完成。

我还可以在每次通过时更新记录，并在新条件下显示表单，但这就是我要避免的。在视图中完成这一切会简单得多。

我在这里想念什么？Rails 中条件显示/隐藏表单的公认做法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-05T03:17:21.477

作为一名 Rails 开发人员，我建议坚持不显眼的 javascript 原则。对于 Rails，这通常意味着您不应该只编写一个大视图来处理所有功能。这使您的 HTML 视图更易于开发和维护，使您的行为更易于维护，并且通常可以更好地理解您的应用程序正在做什么。在这个程度上，我不惜一切代价避免使用 rails javascript helpers。

我要做的是将您的行为拆分为您自己编写的 javascript 文件。使用诸如 jquery 之类的库（我最喜欢这种事情的是 lowpro，但我将是第一个承认我的方式有点设置的人），将事件处理程序附加到特定元素（或一整类元素一次）。

对于选择框，当用户更改选择时会触发 onChange 处理程序。`selectedIndex`元素上的属性会告诉你选择了哪个选项，而`options`数组会让你查找相关的选项。因此，在您的处理程序中，您可以执行以下操作（使用原型）：

```
function(e) {
  var element = Event.element(e)
  var index = element.selectedIndex
  var option = element.options[index]

  if(option.value == "Show fields")
    $('hidden-fields').show()
  else
    $('hidden-fields').hide()
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-05T04:59:31.223

我用几种不同的方式处理同一件事：

```
<%= link_to_function( check_box_tag "model[attribute_name]" ) do |page| 
    page.toggle :model_attribute_name
end-%>

<span style="display:none;" id="model_attribute_name">  
<%= f.text_area :other_conditional_attribute -%>  
</span> 
```

或者

```
<%= link_to_function "Conditional Item", :class => "your-style-class" do |page| 
    page.insert_html :bottom, :other_conditional_attribute, :partial => 'conditional_attribute_partial', :object => Object.new, :locals => {:local_variable => local_variable}
end-%> 
```

rjs 的东西/原型助手很棒。
[Rails API：PrototypeHelpers](http://api.rubyonrails.com/classes/ActionView/Helpers/PrototypeHelper/JavaScriptGenerator/GeneratorMethods.html)
[Rails API：JavascriptHelpers](http://api.rubyonrails.com/classes/ActionView/Helpers/JavaScriptHelper.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-05T20:56:18.763

我建议使用一个简单的 JQuery 函数，如下所示：

```
$('a#slick-show').click(function() {
    $('#slickbox').show('slow');
    return false;
  }); 
```

对于 Jquery 中显示/隐藏的基础知识，这里有一个[教程](http://www.learningjquery.com/2006/09/slicker-show-and-hide)。

# sql - 如何使用强类型数据集设计器配置多个更新？

> ID：514387
> 
> 赞同：0
> 
> 时间：2009-02-05T03:05:36.850
> 
> 标签：sql, strongly-typed-dataset

我正在使用强类型数据集作为 ORM 来包装我的 Microsoft Access 数据库，现在我正在寻找一种方法来创建等效的

```
UPDATE table1 
SET table1.nationality = 'england'
WHERE table1.nationality in (SELECT table2.nationality 
                             FROM table2
                             WHERE table2.gender ='M'); 
```

在强类型数据集设计器中，但不确定这是否可能。

如果这是不可能的，完成这项任务的最佳方法是什么？我在避免

1.  手工编写 SQL
2.  存储过程

尽我所能。

**编辑**：我并不是说手工编写 SQL 是不允许的，只是它是不可取的。存储过程也是如此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-22T09:01:01.190

就像 steven A low 说的那样……但是您使用 MS 访问权限……所以参数必须是“？”

右击adapter并选择Add Query，选择new Select/Update/SQL statement，然后输入

```
UPDATE table1 SET 
    table1.nationality = ?
WHERE table1.nationality in (
    select table2.nationality 
    from table2 
    where table2.gender = ?
) 
```

给它一个合适的名字，即。按性别更新国籍

```
updateNationalityByGender(string nationality, string gender) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-16T18:58:02.520

你在使用表适配器吗？

如果是这样，你可以不只是右键单击并选择添加查询，选择新的选择/更新/SQL语句，然后输入

```
UPDATE table1 SET 
    table1.nationality = @nationality
WHERE table1.nationality in (
    select table2.nationality 
    from table2 
    where table2.gender = @gender
) 
```

并给它一个合适的名字？这应该生成一个表适配器方法，如

```
updateNationalityByGender(string nationality, string gender) 
```

您需要使用表适配器的命名空间来访问它，例如

```
using your.name.space.datasetname.datasetnametableadapter; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-22T04:55:26.820

**LINQ to DataSet**将是您的最佳选择。

1）它都是强类型的。
2) 您可以使用 IQueryable/LINQ/lambda 进行查询
3) 您可以绑定到 Access 数据库

Sql Express 是免费的，使用它会更好。但如果我被迫使用 Access，我会这样做。

[http://msdn.microsoft.com/en-us/library/bb386977.aspx](http://msdn.microsoft.com/en-us/library/bb386977.aspx)

# silverlight - 我可以在独立的 XAML 文件中使用自定义控件吗？

> ID：514396
> 
> 赞同：1
> 
> 时间：2009-02-05T03:10:05.950
> 
> 标签：silverlight

快速介绍：我有一些人们一直在编辑并放入 HTML 页面的 Silverlight 1 内容。不幸的是，这意味着需要大量重复创建 Storyboard 等。我们可以使用 Silverlight 2，但这里并不是每个人都熟悉 C#/拥有 Visual Studio。我想做的是在 C# 中创建一些自定义控件，输出到 DLL，然后在 XAML 文件中引用 DLL（就像它是 VS 中 Silverlight 项目的一部分一样）。

我试过添加这个：

`xmlns:mycontrol="clr-namespace:MyControl;assembly=../../content_GLOBAL/controls/MyControl/MyControl"`

在作为我的根的 Grid 标记中。我知道 MyControl.dll 的路径是正确的。但是，当我实际尝试使用它时（我添加`<mycontrol:MyControl></mycontrol:MyControl>`到网格中），我得到一个解析器错误。如果我不添加控件，这一切似乎都可以，即使我留在 xmlns 中。

我想在某种程度上，这是有道理的——如果你要构建一些东西，寻找一个程序集很有用，而且由于这个 XAML 不在 VS 中，它实际上并没有构建任何东西。是否有另一种方法可以参考，并在独立 XAML 文件中使用 SL2 中的自定义控件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-08T02:00:09.053

首先让我确保我对您的理解正确：您有一个 Silverlight 应用程序，它不使用任何托管代码并且未打包在 .xap 文件中。<object> 标记引用松散的 xaml 文件。

这是 Silverlight 1 应用程序模型，仍然可以在 SL 2 中使用，并且此类应用程序被称为“v1 风格的应用程序”（即使它们以 SL 2 为目标并且可能使用 v1 中不存在的功能）。当使用这种形式的应用程序时，Silverlight 插件不会加载运行时的任何托管组件（例如 CLR 等），因此从 v1 风格的应用程序引用 dll 将不起作用。

但是，您在这里面临的挑战可能会有变通方法。一种解决方案可能是使用打包到 .xap 中并使用托管程序集的 v2 样式应用程序。您给出的不这样做的原因之一是团队中的其他开发人员不熟悉 C#。这应该不是问题，因为在 SL 中构建应用程序不需要 C#，您可以继续在 JavaScript 中针对它进行编程。如果您只是编写 JavaScript 代码，则不需要 Visual Studio，因为无需编译。他们可以只编辑 .html/.js 文件并使用已编译的 .xap/.dll 文件。这有意义吗？

# java - 在一个类中保存一个 BufferedWriter 实例。任何问题？

> ID：514398
> 
> 赞同：1
> 
> 时间：2009-02-05T03:11:01.783
> 
> 标签：java

我正在创建一个类似于此的服务：

```
interface MyLogger
{
    void logStuff( int id, String message );
} 
```

该实现基本上打开一个文件并在类中缓存 BufferedWriter 的一个实例。该方法是同步的。

可以长期使用 BufferedWriter 来打开文件包装器吗？

logStuff 的简单实现。

```
public void logStuff(...)
{
    try
    {
        this.writer.write( message );
        this.writer.flush();
    }
    catch( IOException ignored ) {}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-05T05:46:56.150

是的，没关系，您只需要注意，当您的服务打开时，其他进程/线程可能无法打开日志文件进行写入。我认为其他进程仍然可以只读方式打开它，但我不知道这是否取决于系统。

如果其他线程/进程确实需要能够写入与您的服务的写入混合的文件，您可以执行诸如在 MyLogger 实例中缓存日志行之类的操作；然后一旦你有，比如说，100，以追加模式打开文件，写出它们，然后关闭文件。不过，这并不是一件特别优雅的事情。

# c# - 尝试创建一些动态 linq

> ID：514399
> 
> 赞同：0
> 
> 时间：2009-02-05T03:11:47.243
> 
> 标签：c#, linq

我正在尝试根据传递给方法的一些动态/可选参数创建一个 linq 查询。

```
User [Table] -> zero to many -> Vehicles [Table]
User [Table] -> zero to many -> Pets 
```

所以我们想要所有用户（包括任何车辆和/或宠物信息）。可选过滤器是

*   车辆号牌
*   爱称

因为车辆和宠物表是零对多的，所以我通常在用户表和车辆|宠物表之间进行外部连接。

*为了加快查询速度，我试图创建动态 linq，如果我们提供了可选参数，则将外连接重新定义为内连接*。

（默认情况下，上下文图会将两个表链接为外部连接。）

这可以做到吗？

我也不确定[这篇 SO 帖子](https://stackoverflow.com/questions/389094/how-to-create-a-dynamic-linq-join-extension-method)是否可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-05T03:15:07.063

如果您尝试在运行时更改 LINQ to SQL 查询的表或连接，则需要通过反射来完成。LINQ 表达式并不特殊；与使用任何其他对象调用相同 - 您可以在运行时更改属性和变量的值，但选择要更改的属性或调用的方法需要反映。

我要补充一点，通过反射动态创建 LINQ 表达式对于大多数（所有？）情况可能有点愚蠢，因为在引擎盖下，表达式基本上反映回 SQL 语句。如果您是即时执行的，不妨自己编写 SQL。LINQ 的重点是从开发人员那里抽象出数据源，而不是最终用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-05T03:36:12.920

我认为你正朝着错误的方向前进。您可以在这里轻松地使用 LINQ 查询是可组合的这一事实。

首先，您将始终使用外连接，并让所有用户拥有适当的车辆和宠物：

```
// Get all the users.
IQueryable<User> users = dbContext.Users; 
```

然后，如有必要，您将添加过滤器：

```
// If a filter on the pet name is required, filter.
if (!string.IsNullOrEmpty(petNameFilter))
{
   // Filter on pet name.
   users = users.Where(u => u.Pets.Where(
     p => p.Name == petNameFilter).Any());
}

// Add a filter on the license plate number.
if (!string.IsNullOrEmpty(licensePlateFilter))
{
  // Filter on the license plate.
  users = users.Where(
    u => u.Cars.Where(c => c.LicensePlace == licensePlateFilter).Any());
} 
```

请注意，这**不会**过滤掉不符合过滤条件的宠物或汽车，因为它只是寻找拥有具有该名称的宠物或具有该牌照的汽车的用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-02T18:12:32.057

这就是我如何做你所要求的......

```
var results = u from dc.Users
join veh from dc.vehicles on u.userId equals v.userId into vtemp from v in vtemp.DefaultIfEmpty()
join pet from dc.pets on u.userId equals p.userId into ptemp from p in ptemp.DefaultItEmpty()
select new { user = u, vehicle = v, pet = p };

if ( !string.IsNullOrEmpty(petName) )
{
 results = results.Where(r => r.pet.PetName == petName);
}
if ( !string.IsNullOrEmpty(licNum) )
{
 results = results.Where(r => r.vehicle.LicNum == licNum);
} 
```

# java - 正则表达式解析选项字符串

> ID：514407
> 
> 赞同：0
> 
> 时间：2009-02-05T03:16:31.260
> 
> 标签：java, regex

我正在使用 Java 匹配器来尝试匹配以下内容：

```
@tag TYPE_WITH_POSSIBLE_SUBTYPE -PARNAME1=PARVALUE1 -PARNAME2=PARVALUE2: MESSAGE 
```

TYPE_WITH_POSSIBLE_SUBTYPE 由带句点的字母组成。

每个参数都必须由字母组成，每个值都必须由数字/字母组成。可以有 0 个或多个参数。在最后一个参数值之后是分号、一个空格，其余的被认为是消息。

一切都需要分组。

我当前的正则表达式（作为 Java 文字）是：

```
(@tag)[\\s]+?([\\w\\.]*?)[\\s]*?(-.*=.*)*?[\\s]*?[:](.*) 
```

但是，我一直将所有参数作为一组。如果可能的话，我如何将每个人作为一个单独的组？

我不太使用正则表达式，所以我总是把事情搞砸。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-05T03:36:05.150

如果要分别捕获每个参数，则必须为每个参数设置一个捕获组。当然，你不能这样做，因为你不知道会有多少参数。我推荐一种不同的方法：

```
Pattern p = Pattern.compile("@tag\\s+([^:]++):\\s*(.*)");
Matcher m = p.matcher(s);
if (m.find())
{
  String[] parts = m.group(1).split("\\s+");
  for (String part : parts)
  {
    System.out.println(part);
  }
}
System.out.printf("message: %s%n", m.group(2)); 
```

数组中的第一个元素是您的 TYPE 名称，其余的（如果有的话）是参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-05T03:27:47.460

试试这个（您可能需要添加额外的 '\' 以使其在字符串中工作。

```
(@tag)\s*(\w*)\s*(-[\w\d]*=[\w\d]*\s*)*:(.*) 
```

顺便说一句，我**强烈**推荐这个网站来帮助你构建正则表达式：[RegexPal](http://www.regexpal.com)。甚至更好的是[RegexBuddy](http://www.regexbuddy.com/)；如果您打算在未来做很多正则表达式，那么这 40 美元是非常值得的。

# c++ - 如何在 C++ 中验证数字输入

> ID：514420
> 
> 赞同：7
> 
> 时间：2009-02-05T03:24:42.380
> 
> 标签：c++, visual-c++

我想知道如何使用`std::cin`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-02-05T03:58:18.007

```
double i;

//Reading the value
cin >> i;

//Numeric input validation
if(!cin.eof())
{
    peeked = cin.peek();
    if(peeked == 10 && cin.good())
    {
             //Good!
             count << "i is a decimal";
        }
        else
        {
             count << "i is not a decimal";
         cin.clear();
         cin >> discard;
        }
} 
```

这也给出了输入 -1a2.0 的错误消息，避免将 -1 分配给 i。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-02-05T03:34:43.687

如果 的后备变量`cin`是数字，并且提供的字符串不是数字，则返回值为 false，因此需要循环：

```
int someVal;

while(!(cin >> someVal)) {
   cin.reset();
   cout << "Invalid value, try again.";
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-12-25T22:45:53.363

结合[这里](https://stackoverflow.com/questions/3273993/how-do-i-validate-user-input-as-a-double-in-c)的最佳答案和[这个](http://www.learncpp.com/cpp-tutorial/135-stream-states-and-input-validation/)网站的技术，我得到 了

输入.h

```
#include <ios>  // Provides ios_base::failure
#include <iostream>  // Provides cin

template <typename T>
T getValidatedInput()
{
    // Get input of type T
    T result;
    cin >> result;

    // Check if the failbit has been set, meaning the beginning of the input
    // was not type T. Also make sure the result is the only thing in the input
    // stream, otherwise things like 2b would be a valid int.
    if (cin.fail() || cin.get() != '\n')
    {
        // Set the error state flag back to goodbit. If you need to get the input
        // again (e.g. this is in a while loop), this is essential. Otherwise, the
        // failbit will stay set.
        cin.clear();

        // Clear the input stream using and empty while loop.
        while (cin.get() != '\n')
            ;

        // Throw an exception. Allows the caller to handle it any way you see fit
        // (exit, ask for input again, etc.)
        throw ios_base::failure("Invalid input.");
    }

    return result;
} 
```

用法

输入测试.cpp

```
#include <cstdlib>  // Provides EXIT_SUCCESS
#include <iostream>  // Provides cout, cerr, endl

#include "input.h"  // Provides getValidatedInput<T>()

int main()
{
    using namespace std;

    int input;

    while (true)
    {
        cout << "Enter an integer: ";

        try
        {
            input = getValidatedInput<int>();
        }
        catch (exception e)
        {
            cerr << e.what() << endl;
            continue;
        }

        break;
    }

    cout << "You entered: " << input << endl;

    return EXIT_SUCCESS;
} 
```

样品运行

输入一个整数：**一个**
无效的输入。
输入一个整数：**2b**
输入无效。
输入一个整数：**3**
您输入了：3。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-05T22:52:00.400

cin 的 >> 运算符通过一次读取一个字符来工作，直到它遇到空格。这将吞噬整个 string `-1a2.0`，这显然不是一个数字，因此操作失败。看起来您实际上有三个字段，-1、a 和 2.0。如果你用空格分隔数据，cin 将能够毫无问题地读取每一个数据。请记住`char`为第二个字段阅读 a 。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-10-10T08:52:51.140

我尝试了许多技术来使用操作符从用户那里读取整数输入`>>`，但在某种程度上，我所有的实验都失败了。

现在我认为该`getline()`函数（不是在 上具有相同名称的方法`std::istream`）和`strtol()`include 中的函数`cstdlib`是该问题唯一可预测的一致解决方案。如果有人证明我错了，我将不胜感激。这是我使用的类似的东西：

```
#include <iostream>
#include <cstdlib>

// @arg prompt The question to ask. Will be used again on failure.
int GetInt(const char* prompt = "? ")
{
    using namespace std; // *1
    while(true)
    {
        cout << prompt;
        string s;
        getline(cin,s);
        char *endp = 0;
        int ret = strtol(s.c_str(),&endp,10);
        if(endp!=s.c_str() && !*endp)
            return ret;
    }
} 
```

*   *1：放置`using namespace whatever;`到全局范围可能会导致大型项目的“统一构建”（google！）损坏，因此应避免。练习不要使用这种方式，即使是在较小的项目中！
*   从文件中读取整数是完全不同的事情。如果工作得当，Raúl Roa 的方法可能会对此有所帮助。我还建议不应该容忍错误的输入文件，但这真的取决于应用程序。
*   请注意，在同一个程序中使用`>>`and会导致一些问题。只使用其中一个，或者谷歌知道如何处理这个问题（不太难）。`getline()``cin`

* * *

## 回答 #6

> 赞同：-5
> 
> 时间：2009-02-05T03:42:49.740

就像是：

```
double a;
cin >> a; 
```

应该阅读您签名的“十进制”罚款。

您需要一个循环和一些代码来确保它以合理的方式处理无效输入。

祝你好运！

# java - 用Scala隐式包装的Java接口实现的工厂方法？

> ID：514428
> 
> 赞同：6
> 
> 时间：2009-02-05T03:28:04.450
> 
> 标签：java, scala, jvm, factory, implicit

我正在使用 Scala 隐式为 Java 接口定义一个丰富的包装器：

```
class RichThing { def richStuff: Unit = {} } 
```

在伴生对象中，我定义了隐式转换和`apply`工厂方法：

```
object RichThing { 
    implicit def rich( thing: JavaThing ) = new RichThing() 
    def apply() = new RichThing()
} 
```

有了这个，我可以实例化接口的 Java 实现并像使用它一样`RichThing`（由于隐式转换）：

```
new JavaThingImpl().richStuff 
```

我还可以`RichThing`使用工厂方法创建一个（由于`apply`方法）：

```
val a = RichThing() 
```

我想做的是以相同的方式实例化接口的任意 Java 实现。这不起作用，因为 Scala 然后寻找实现的伴随对象但​​找不到：

```
val b = JavaThingImpl() // "not found: value JavaThingImpl" 
```

我可以为 Java 实现创建一个 Scala 伴随对象：

```
object JavaThingImpl { def apply() = new RichThing() } 
```

但关键是要使该接​​口适用于任何（特别是未知的）实现。

有没有办法实现这一点？例如，基于对象中的隐式转换为 Java 实现动态创建 Scala 伴生`RichThing`对象？

或者从 Java 端创建 Scala 伴生对象，也许在抽象类中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-05T19:15:55.970

不，这在 Scala 中是不可能的。可能可以将它添加到语言中而不会影响类型的健全性，但我质疑额外的复杂性是否值得。

# c++ - 模板化无分支 int 最大/最小函数

> ID：514435
> 
> 赞同：12
> 
> 时间：2009-02-05T03:34:12.893
> 
> 标签：c++, performance, templates, bit-manipulation

我正在尝试编写一个无分支函数来返回两个整数的 MAX 或 MIN 而不诉诸 if（或？:)。使用[通常的技术](https://stackoverflow.com/questions/227383/how-do-i-programmatically-return-the-max-of-two-integers-without)，对于给定的字长，我可以很容易地做到这一点：

```
inline int32 imax( int32 a, int32 b )
{
    // signed for arithmetic shift
    int32 mask = a - b;
    // mask < 0 means MSB is 1.
    return a + ( ( b - a ) & ( mask >> 31 ) );
} 
```

现在，假设[我](http://en.wikipedia.org/wiki/For_arguing)真的在必要的有序处理器上编写这种应用程序，我的问题是是否有一种方法可以使用 C++ 模板将其推广到所有大小的 int。

当然，**>>31**步骤仅适用于 int32，虽然我可以复制 int8、int16 和 int64 函数的重载，但似乎我应该使用模板函数。但是如何以*位*为单位获取模板参数的大小？

还有比这更好的方法吗？我可以强制对掩码 T 进行签名吗？如果 T 是无符号的，则掩码移位步骤将不起作用（因为它将是逻辑移位而不是算术移位）。

```
template< typename T > 
inline T imax( T a, T b )
{
    // how can I force this T to be signed?
    T mask = a - b;
    // I hope the compiler turns the math below into an immediate constant!
    mask = mask >> ( (sizeof(T) * 8) - 1 );
    return a + ( ( b - a ) & mask );
} 
```

而且，完成上述操作后，我可以防止它被用于除整数类型以外的任何东西（例如，没有浮点数或类）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-02-05T03:47:58.807

**编辑：**这个答案来自 C++11 之前。从那时起，C++11 及更高版本提供`make_signed<T>`了更多作为标准库的一部分

* * *

一般来说，看起来不错，但为了 100% 的可移植性，请将 8 替换为`CHAR_BIT`(or `numeric_limits<char>::max()`)，因为不能保证字符是 8 位的。

任何好的编译器都足够聪明，可以在编译时合并所有数学常量。

您可以使用类型特征库强制对其进行签名。这通常看起来像（假设您的 numeric_traits 库称为 numeric_traits）：

```
typename numeric_traits<T>::signed_type x; 
```

手动滚动 numeric_traits 标头的示例如下所示：[http](http://rafb.net/p/Re7kq478.html) ://rafb.net/p/Re7kq478.html （有很多添加空间，但你明白了）。

或者更好的是，使用 boost：

```
typename boost::make_signed<T>::type x; 
```

编辑：IIRC，有符号的右移不必**是**算术的。这很常见，而且我使用过的每个编译器都是如此。但我相信标准将它留给编译器，无论右移是算术还是有符号类型。在我的标准草案副本中，写着以下内容：

> E1 >> E2 的值是 E1 右移 E2 位位置。如果 E1 具有无符号类型或 E1 具有带符号类型和非负值，则结果的值是 E1 的商除以数量 2 的 E2 次方的整数部分。**如果 E1 具有带符号类型和负值，则结果值是实现定义的**。

但正如我所说，它适用于我见过的每个编译器：-p。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-29T02:12:36.437

这是无分支最大值和最小值的另一种方法。它的好处是它不使用任何小技巧，而且您不必对类型有任何了解。

```
template <typename T> 
inline T imax (T a, T b)
{
    return (a > b) * a + (a <= b) * b;
}

template <typename T> 
inline T imin (T a, T b)
{
    return (a > b) * b + (a <= b) * a;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-05T03:52:24.523

您可能想查看[Boost.TypeTraits](http://www.boost.org/doc/libs/1_37_0/libs/type_traits/doc/html/index.html)库。要检测类型是否已签名，您可以使用[is_signed](http://www.boost.org/doc/libs/1_37_0/libs/type_traits/doc/html/boost_typetraits/reference/is_signed.html)特征。您还可以查看[enable_if/disable_if](http://www.boost.org/doc/libs/1_37_0/libs/utility/enable_if.html)以删除某些类型的重载。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-11-18T01:08:15.490

## tl;博士

为了实现你的目标，你最好只写这个：

```
template<typename T> T max(T a, T b) { return (a > b) ? a : b; } 
```

## 长版

我实现了“幼稚”的实现`max()`以及您的无分支实现。它们都没有模板化，我使用 int32 只是为了简单起见，据我所知，Visual Studio 2017 不仅使幼稚的实现无分支，而且产生的指令也更少。

这是相关的[Godbolt](https://godbolt.org/z/ersx_a)（请检查实现以确保我做对了）。请注意，我正在使用 /O2 优化进行编译。

诚然，我的组装符并不是那么好，所以虽然`NaiveMax()`少了 5 条指令并且没有明显的分支（并且内联我真的不确定发生了什么），但我想运行一个测试用例来明确显示是否天真的实现是更快与否。

所以我建立了一个测试。这是我运行的代码。带有“默认”版本编译器选项的 Visual Studio 2017 (15.8.7)。

```
#include <iostream>
#include <chrono>

using int32 = long;
using uint32 = unsigned long;

constexpr int32 NaiveMax(int32 a, int32 b)
{
    return (a > b) ? a : b;
}

constexpr int32 FastMax(int32 a, int32 b)
{
    int32 mask = a - b;
    mask = mask >> ((sizeof(int32) * 8) - 1);
    return a + ((b - a) & mask);
}

int main()
{
    int32 resInts[1000] = {};

    int32 lotsOfInts[1'000];
    for (uint32 i = 0; i < 1000; i++)
    {
        lotsOfInts[i] = rand();
    }

    auto naiveTime = [&]() -> auto
    {
        auto start = std::chrono::high_resolution_clock::now();

        for (uint32 i = 1; i < 1'000'000; i++)
        {
            const auto index = i % 1000;
            const auto lastIndex = (i - 1) % 1000;
            resInts[lastIndex] = NaiveMax(lotsOfInts[lastIndex], lotsOfInts[index]);
        }

        auto finish = std::chrono::high_resolution_clock::now();
        return std::chrono::duration_cast<std::chrono::nanoseconds>(finish - start).count();
    }();

    auto fastTime = [&]() -> auto
    {
        auto start = std::chrono::high_resolution_clock::now();

        for (uint32 i = 1; i < 1'000'000; i++)
        {
            const auto index = i % 1000;
            const auto lastIndex = (i - 1) % 1000;
            resInts[lastIndex] = FastMax(lotsOfInts[lastIndex], lotsOfInts[index]);
        }

        auto finish = std::chrono::high_resolution_clock::now();
        return std::chrono::duration_cast<std::chrono::nanoseconds>(finish - start).count();
    }();

    std::cout << "Naive Time: " << naiveTime << std::endl;
    std::cout << "Fast Time:  " << fastTime << std::endl;

    getchar();

    return 0;
} 
```

这是我在我的机器上得到的输出：

```
Naive Time: 2330174
Fast Time:  2492246 
```

我已经运行了几次，得到了类似的结果。为了安全起见，我还更改了进行测试的顺序，以防万一它是核心速度加快的结果，从而扭曲了结果。在所有情况下，我都得到与上述类似的结果。

当然，根据您的编译器或平台，这些数字可能都不同。值得自己测试。

## 答案

`max()`简而言之，编写无分支模板函数的*最佳*方法似乎是保持简单：

```
template<typename T> T max(T a, T b) { return (a > b) ? a : b; } 
```

天真的方法还有其他好处：

1.  它适用于无符号类型。
2.  它甚至适用于浮动类型。
3.  它准确地表达了您的意图，而不是需要注释您的代码来描述位旋转正在做什么。
4.  这是一种众所周知且可识别的模式，因此大多数编译器将确切地知道如何优化它，使其更具可移植性。（这是我的直觉，只有编译器的个人经验支持，这让我很惊讶。我愿意承认我在这里错了。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-15T05:49:33.030

我不知道这个位掩码技巧起作用的*确切*条件是什么，但你可以做类似的*事情*

```
#include<type_traits>

template<typename T, typename = std::enable_if_t<std::is_integral<T>{}> > 
inline T imax( T a, T b )
{
   ...
} 
```

其他有用的候选人是`std::is_[un]signed`,`std::is_fundamental`等。[https://en.cppreference.com/w/cpp/types](https://en.cppreference.com/w/cpp/types)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-01T20:03:33.480

除了 tloch14 的回答“tl;dr”之外，还可以使用数组索引。这避免了“无分支最小/最大”的笨拙的比特洗牌；它也可以推广到所有类型。

```
template<typename T> constexpr T OtherFastMax(const T &a, const T &b)
{
    const T (&p)[2] = {a, b};
    return p[a>b];
} 
```

# asp.net-mvc - 如何在 ASP.NET MVC 中不转义 URL 参数？

> ID：514440
> 
> 赞同：7
> 
> 时间：2009-02-05T03:36:40.873
> 
> 标签：asp.net-mvc, routes, urlencode

我注意到 Stackoverflow 登录/注销链接上的 returnurl URL 参数没有被转义，但是当我尝试将路径作为参数添加到路由时，它会被转义。

所以 /login?returnurl=/questions/ask 显示 /login?returnurl=%2fquestions%2fask 有点丑。如何让它不逃避 returnurl 值？

这是我在代码中所做的：

```
Html.ActionLink("Login", "Login", "Account", new { returnurl=Request.Path }, null) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-02-05T08:57:44.237

> 如何让它不逃避 returnurl 值

这个怎么样？

```
var url = Url.Action("Login", "Account", new {returnurl = Request.Path});
var unEncodedUrl = HttpUtility.UrlDecode(url);
Response.Write("<a href='" + unEncodedUrl + "'>...</a>"); 
```

但请确保这是您想要的，[URL 编码有其目的。](http://en.wikipedia.org/wiki/Percent-encoding)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-05T13:34:06.360

我理解关于编码发生的评论之一是有原因的；这只是一个例外，而不是规则。

这是我整理的，如何改进？

```
 public static string ActionLinkNoEscape(this HtmlHelper html, string linkText, string actionName, string controllerName, object values, object htmlAttributes)
    {
        RouteValueDictionary routeValues = new RouteValueDictionary(values);
        RouteValueDictionary htmlValues = new RouteValueDictionary(htmlAttributes);

        UrlHelper urlHelper = new UrlHelper(html.ViewContext.RequestContext, RouteTable.Routes);
        string url = urlHelper.Action(actionName, controllerName);
        url += "?";
        List<string> paramList = new List<string>();
        foreach (KeyValuePair<string, object> pair in routeValues)
        {
            object value = pair.Value ?? "";
            paramList.Add(String.Concat(pair.Key, "=", Convert.ToString(value, CultureInfo.InvariantCulture)));
        }
        url += String.Join("&", paramList.ToArray());

        TagBuilder builder = new TagBuilder("a");
        builder.InnerHtml = string.IsNullOrEmpty(linkText) ? "" : HttpUtility.HtmlEncode(linkText);
        builder.MergeAttributes<string, object>(htmlValues);
        builder.MergeAttribute("href", url);
        return builder.ToString(TagRenderMode.Normal);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-05T13:37:20.253

该参数*不是未*转义的。您会注意到 URL：

```
http://stackoverflow.com/users/login?returnurl=%2fquestions%2fask 
```

确实有效 - SO 正在正常读取和取消转义该参数。如果您想在参数中包含其他越界字符，例如“&”，您仍然必须对它们进行转义。

诀窍仅仅是“/”字符不需要在查询参数中进行 % 转义。它*确实*必须在其他上下文中进行转义，例如在路径部分中，因此 URLEncode 总是对其进行编码，以确保安全。

如果您只是想让 URL 看起来更漂亮，只需像往常一样转义参数（您必须这样做以转义必须正确处理的所有其他字符），然后用 '/' 对 '%2f' 进行字符串替换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-05T03:58:53.717

我对类似问题的解决方案是编写自己的扩展。在挖掘代码之后，我找不到其他方法。你的可能看起来像这样。

```
public static class HtmlHelperExtensions
{
    public static string LoginLinkWithReturnUrl( this HtmlHelper helper,
                                                 string linkText,
                                                 string action,
                                                 string controller,
                                                 string returnUrl,
                                                 object htmlAttributes )
    {
         TagBuilder builder = new TagBuilder("a");
         builder.Attributes.Add( "href",
                                  string.Format( "/{0}/{1}?returnurl={2}",
                                                 controller,
                                                 action,
                                                 returnUrl ) );
         var attrDict = new RouteValueDictionary( htmlAttributes );
         builder.MergeAttributes( attrDict );
         builder.InnerHtml = linkText;
         return builder.ToString();
    }
} 
```

我想我在制作和使用 UrlHelper 时遇到了同样的问题，所以我改用了 string.Format 机制。YMMV。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-05T12:19:04.750

我不相信框架中内置了一种解决方法。URL 的实际构造发生在 System.Web.Routing.ParsedRoute.Bind 方法中，并且没有任何条件用于防止转义。

看起来扩展方法是可行的方法，但比前面提到的方法更健壮。

# architecture - 分布式修订控制系统的分散行为如何工作？

> ID：514442
> 
> 赞同：3
> 
> 时间：2009-02-05T03:37:17.677
> 
> 标签：architecture, dvcs

我想知道分散的 DVCS 是如何工作的？如果没有中央服务器，开发人员机器如何知道存储库并将其与其他开发人员机器的存储库同步。以及如何合并更改？因为在我看来缺少中央服务器，系统可能会导致每个存储库都有不同的修订号。以及如何处理冲突解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-05T03:46:16.520

Scott Chacon 去年在 RailsConf 的演讲非常棒。我见过的最好的计划和信息会谈之一。我会听他的（具体来说，对于您的问题，远程工作流程部分大约在 18 分钟后开始）：

[RailsConf Git 对话](http://gitcasts.com/posts/railsconf-git-talk)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-05T04:39:43.400

我偏爱 Git，但我相信该理论适用于大多数其他系统......

分散式 VCS 旨在通过在每次提交中保留指向先前提交的指针来处理分支和合并作为其 DNA 的一部分，因此任何更改都可以追溯到共同的祖先。

修订版“数字”本身不用于指代提交。显然，如果是这种情况，将会有不止一个序列......在 Git 的情况下，唯一标识任何提交的指针“key”是一个 SHA1 哈希。使整个排列顺序的唯一因素是引用每个提交的父级的指针图。

在实践中，开发人员将他们的工作提交到他们自己的本地副本中，当需要与他人共享时，他们会通过以下三种方式进行：

*   要求其他开发人员直接从他们那里提取更改
*   直接推入其他开发者的副本
*   将更改推送到其他人可以从中提取的中心位置

归根结底，这些实际上是一回事，因为它归结为合并差异。在第三种情况下，中心位置仅充当代理——没有它也可以实现同样的事情。

该系统可以是您选择的集中式或分散式。出于实际原因，大多数项目都有一定程度的集中化，但在任何时候，一个分支都可以成为新的中央存储库，或者开发人员可以选择在他们自己之间临时交换代码。

当提交被提取并合并到您自己的副本中时，它们将应用于您与上游存储库共享的任何共同祖先之上。如果存在冲突，则合并过程会在发生冲突的提交步骤处暂停，并要求您在继续应用其余提交之前解决它。（标准的统一差异标记用于标记冲突。）

大多数合并是自动发生的，但是当发生冲突时，解决起来通常很简单。好消息是您最终不会遇到跨越多个提交的大量冲突：它更容易解决，因为它会在历史中间暂停并让您以更小的逻辑块来处理它。

# php - 获取线程主题中多个用户的信息

> ID：514444
> 
> 赞同：0
> 
> 时间：2009-02-05T03:38:09.763
> 
> 标签：php, mysql, forum

在我正在构建的论坛中，我想获取有关在线程中发布帖子的用户的信息。例如，来自表格 ForumSettings 的签名、他们的论坛排名、帖子数量等。我在一个带有 ID 的表中有线程列表，并且我在一个单独的表中有帖子，其中一个 threadID 列链接到 ThreadList 表。使用 PHP，我怎样才能有效地获取有关用户的信息以显示在他们发布的每个帖子旁边？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-05T03:42:02.830

假设您正在加载 id = 5 的线程

```
SELECT u.`name`, u.`signature`, u.`rank`, COUNT(*) as numPosts
FROM `users` u INNER JOIN `posts` p ON (u.`id` = p.`userId`)
WHERE u.`id` IN (
    SELECT `userId` FROM `posts` WHERE `threadId` = 5
)
GROUP BY u.`name`, u.`signature`, u.`rank` 
```

# python - Python：循环连续字符？

> ID：514448
> 
> 赞同：15
> 
> 时间：2009-02-05T03:41:31.537
> 
> 标签：python, algorithm, python-3.x, character

在 Python（特别是 Python 3.0，但我认为这并不重要）中，如何轻松地在具有连续字符代码的字符序列上编写循环？我想做这样的伪代码：

```
for Ch from 'a' to 'z' inclusive: #
    f(Ch) 
```

示例：下面的一个不错的“pythonic”版本怎么样？

```
def Pangram(Str):
    ''' Returns True if Str contains the whole alphabet, else False '''
    for Ch from 'a' to 'z' inclusive: #
        M[Ch] = False
    for J in range(len(Str)):
        Ch = lower(Str[J])
        if 'a' <= Ch <= 'z':
            M[Ch] = True
    return reduce(and, M['a'] to M['z'] inclusive) # 
```

标有 # 的行是伪代码。当然 reduce() 是真正的 Python！

亲爱的巫师们（特别是年长的白胡子巫师），也许你能看出我最喜欢的语言曾经是 Pascal。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2009-02-05T03:47:46.843

您在字符串模块中有一个名为 的常量`ascii_lowercase`，请尝试一下：

```
>>> from string import ascii_lowercase 
```

然后您可以遍历该字符串中的字符。

```
>>> for i in ascii_lowercase :
...     f(i) 
```

对于您的 pangram 问题，有一种非常简单的方法可以确定字符串是否包含字母表中的所有字母。像以前一样使用 ascii_lowercase，

```
>>> def pangram(str) :
...     return set(ascii_lowercase).issubset(set(str)) 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2009-02-05T04:04:39.540

用你需要的所有字符迭代一个常量是非常 Pythonic 的。但是，如果您不想导入任何内容并且只使用 Unicode，请使用内置的 ord() 及其逆 chr()。

```
for code in range(ord('a'), ord('z') + 1):
     print chr(code) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-02-05T11:00:09.790

你必须抛开 Pascal 主义，以全新的视角学习 Python。

```
>>> ascii_lowercase
'abcdefghijklmnopqrstuvwxyz'
>>> def pangram( source ):
    return all(c in source for c in ascii_lowercase)

>>> pangram('hi mom')
False
>>> pangram(ascii_lowercase)
True 
```

通过将自己限制在 Pascal 提供的东西上，你就错过了 Python 提供的东西。

而且……尽量避免`reduce`。它通常会导致可怕的性能问题。

* * *

编辑。这是另一种表述；这个实现了集合交集。

```
>>> def pangram( source ):
>>>     notused= [ c for c in ascii_lowercase if c not in source ]
>>>     return len(notused) == 0 
```

这为您提供了一条诊断信息，用于确定候选 pangram 中缺少哪些字母。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2011-08-16T19:32:44.380

一个更抽象的答案是这样的：

```
>>> x="asdf"
>>> for i in range(len(x)):
...     print x[i] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-01-11T10:25:48.240

### 哈基

```
method_1 = [chr(x) for x in range(ord('a'), ord('z')+1)]
print(method_1) 
```

### 整洁的

```
# this is the recommended method generally 
from string import ascii_lowercase  
method_2 = [x for x in ascii_lowercase]
print(method_2) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-05T06:20:41.980

我会写一个类似于 Python 的函数`range`

```
def alpha_range(*args):
  if len(args) == 1:
    start, end, step = ord('a'), ord(args[0]), 1
  elif len(args) == 2:
    start, end, step = ord(args[0]), ord(args[1]), 1
  else:
    start, end, step = ord(args[0]), ord(args[1]), args[2]
  return (chr(i) for i in xrange(start, end, step)) 
```

# axapta - 嵌套的 notExists 加入 X++ (Dynamics AX3.0)

> ID：514449
> 
> 赞同：4
> 
> 时间：2009-02-05T03:41:55.483
> 
> 标签：axapta, microsoft-dynamics, x++

当以下代码执行时：

```
 select sum(qty) from inventTrans
        index hint TransTypeIdx
        where inventTrans.ItemId        == itemId
           && inventTrans.TransType     == InventTransType::Sales
           && inventTrans.InventDimId   == inventDimId
        notExists join custTable
        where custTable.AccountNum      == inventTrans.CustVendAC
           && custTable.CustGroup       == custGroupId
        notExists join salesTable
        where salesTable.SalesId        == inventTrans.TransRefId
           && salesTable.Extraordinary  == NoYes::Yes; 
```

生成的 sql 将第二个 notExists 连接 (salesTable) 嵌套到第一个 notExists 连接 (custTable) 的 where 子句中。IE

```
SELECT SUM(A.QTY)
FROM
    INVENTTRANS A
WHERE
    A.DATAAREAID  = 'MyCompany'
AND A.ITEMID      = 'MyItem'
AND A.TRANSTYPE   = 0
AND A.INVENTDIMID = 'SomeValue'
AND NOT EXISTS (SELECT 'x'
                FROM CUSTTABLE C
                WHERE C.DATAAREAID  ='MyCompany'
                AND C.ACCOUNTNUM    =A.CUSTVENDAC
                AND C.CUSTGROUP     ='SomeCustGroup'
                AND NOT EXISTS (SELECT 'x'
                                FROM SALESTABLE B
                                WHERE
                                    B.DATAAREAID    ='MyCompany'
                                AND B.SALESID       =A.TRANSREFID
                                AND B.EXTRAORDINARY =1)) 
```

有什么方法可以编写 X++ 选择查询以将 notExists 连接到 inventTrans 表而不是 custTable，因此生成的 SQL 将类似于以下内容？

```
SELECT SUM(A.QTY)
FROM
    INVENTTRANS A
WHERE A.DATAAREAID     = 'MyCompany'
AND A.ITEMID           = 'MyItem'
AND A.TRANSTYPE        = 0
AND A.INVENTDIMID      = 'SomeValue'
AND NOT EXISTS (SELECT 'x'
                FROM CUSTTABLE C
                WHERE C.DATAAREAID  ='MyCompany'
                AND C.ACCOUNTNUM    =A.CUSTVENDAC
                AND C.CUSTGROUP     ='SomeCustGroup')
AND NOT EXISTS (SELECT 'x'
                FROM SALESTABLE B
                WHERE
                    B.DATAAREAID='MyCompany'
                AND B.SALESID=A.TRANSREFID
                AND B.EXTRAORDINARY=1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:21:38.840

您可能不再等待答案，但在 Axe 2012 上我仍然遇到了同样的问题。

找到了另一种解决方案（除了使用 SQL 语句），不是性能最高的解决方案，但它有效：

*   创建查询： select * from inventTrans noteexists join CustTable ....
*   基于该查询创建视图
*   对 salesTable 做同样的事情
*   更改您的选择语句如下：

    选择 inventTrans

    ...

    存在加入 myCustView

    其中 myCustView.InventTransRecId == inventTrans.RecId

    存在加入 mySalesView

    在哪里 ...

希望这可以帮助，

吨

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-17T06:57:33.657

简短的回答：不！

在您的示例中，您可以使用内部连接重新制定：

```
select sum(qty) from inventTrans
    index hint TransTypeIdx
    where inventTrans.ItemId        == itemId
       && inventTrans.TransType     == InventTransType::Sales
       && inventTrans.InventDimId   == inventDimId
    join salesTable
    where salesTable.SalesId        == inventTrans.TransRefId
       && salesTable.Extraordinary  == NoYes::No;
    notExists join custTable
    where custTable.AccountNum      == inventTrans.CustVendAC
       && custTable.CustGroup       == custGroupId 
```

如果您在开票时不删除销售订单，它应该可以工作。

# ant - 调用 JDeveloper 以使用指定的部署文件创建 EAR 文件的 ANT 作业

> ID：514453
> 
> 赞同：3
> 
> 时间：2009-02-05T03:43:45.167
> 
> 标签：ant, jdeveloper

有人问我是否可以创建一个 ANT 脚本，该脚本可用于复制属性文件（与目标环境相关联）、创建一个 EAR 文件（可能使用 JDeveloper 部署文件）并将该 EAR 文件部署到目标 OC4J 容器。

我在问是否有人通过使用 ANT 使用指定的“部署”文件自动调用 JDeveloper 来创建 EAR 文件？或者是否可以完全绕过调用 JDeveloper。是否有任何示例 ANT 代码片段可以这样做，或者任何可能有用的信息/提示。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2011-03-31T07:06:40.057

如果您使用 ADF 业务组件 (BC)，那么您必须使用 ojdeploy。否则，您的 BC 将不会得到验证，并且您的部署将失败。

ojdeploy 需要安装 JDeveloper（哎呀！），并将根据 JDeveloper 的部署配置文件生成 EAR。

（虽然这是一个旧线程，但我添加了一些你永远不知道的东西。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-06T10:02:57.113

我建议不要使用 JDevelopers 来创建 EAR 文件，因为我坚信构建过程必须是自给自足的（即尽可能少的外部依赖项）。

使用 Ant，您可以简单地使用[Ear 任务](http://ant.apache.org/manual/Tasks/ear.html)（请记住，Ear 任务是[Zip 任务](http://ant.apache.org/manual/Tasks/zip.html)的子任务，即您也可以`zipfileset`在`ear`任务内部使用）。

我从未使用过 OC4J，但通常 EAR 文件的部署只是将文件复制到正确的目录中（所以一个简单的`copy`任务就足够了）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-11-14T23:05:57.523

查看 jdev\bin 目录中的 ojdeploy 命令，它可以让您从命令行使用 JDeveloper 的部署配置文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-02-01T14:41:53.267

我发现jDeveloper使用的所有ant任务都在（默认）目录下：*C:\Oracle\Middleware\jdeveloper\bin*

我相信您可以将它们复制到构建服务器并直接使用它们

它们是您右键单击并从界面中选择**部署时使用的文件**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-24T05:42:24.670

您可以构建自己的 JDeveloper 部署配置文件解释器程序并从部署配置文件生成 Ant 文件。我以前做过。蒂姆

# database - 数据库与纯文本

> ID：514455
> 
> 赞同：34
> 
> 时间：2009-02-05T03:44:26.087
> 
> 标签：database, complexity-theory

在处理小型项目时，您认为将数据存储在简单的文本文件、哈希表等中与使用真实数据库相比，盈亏平衡点是什么？对于具有简单数据管理需求的小型项目，真正的数据库是不必要的复杂性，并且违反了 YAGNI。然而，在某些时候，数据库的复杂性显然是值得的。有哪些迹象表明您的问题对于简单的 ad-hoc 技术来说过于复杂并且需要一个真实的数据库？

注意：对于习惯于企业环境的人来说，这可能听起来像是一个奇怪的问题。但是，我的问题领域是生物信息学。我的大部分编程都是原型，而不是生产代码。我主要是领域专家，其次是程序员。我的大部分代码都是以算法为中心的，而不是以数据管理为中心的。这个问题的主要目的是让我弄清楚如果我学会在我的代码中使用适当的数据库而不是我通常使用的更多临时技术，从长远来看我可以节省多少工作。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-02-05T03:51:33.200

1）并发。您是否有多个人访问同一个数据集？然后，如果您推出自己的系统，它将非常参与以*可扩展的方式代理所有不同的读者和作者。*

2) 格式和关系：您的数据是否与表格结构不完全吻合？长核苷酸序列之类的东西？这不是很方便的表格数据。

另一个例子：没有人会考虑实施像 Photoshop 这样的软件来以关系格式存储 PSD，因为数据结构并不真正适合这种类型的存储或查询模式。

3) ACID（有点像 #1 的推论）：如果原子性、一致性、完整性和持久性不是平面文件的挑战，那么就使用平面文件。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2009-02-05T03:47:25.113

对我来说，一旦我必须以涉及多个关系的方式查询我的数据，就会越界。关联磁盘上的两个平面数据结构相当简单，但是一旦我们超越了这一点，像 SQL 和正式的数据库关系这样的基于集合的语言实际上会降低复杂性。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2009-02-05T03:51:51.750

我认为在某些时候您会错过数据库的查询功能，但您可以考虑一些简约的数据库替代方案：

*   [SQLite](http://www.sqlite.org/)（很棒，几乎符合 SQL-92 标准）
*   [shsql](http://sourceforge.net/projects/shsql/)
*   [SQL Server 紧凑型](http://www.microsoft.com/Sqlserver/2005/en/us/compact.aspx)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-02-05T03:58:19.740

我只会在非常特殊的情况下编写自己的磁盘格式。重用别人的代码几乎总是更快。

对于关系数据，我会使用 SQLite。对于键/值对，我会使用 BerkeleyDB（可能通过 KiokuDB）。对于简单的对象，我会使用 JSON 或 YAML，但前提是我只有几个。

使用 SQLite 和 BDB，“真正的数据库”实际上是两行代码。很难打败它。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-02-05T04:16:34.663

小项目的问题在于它们在我们不知不觉中变得更大。一旦他们这样做了，我们就开始缺少 sql 功能。

始终进行设计，以便以后可以在需要时使用数据库，而无需撕开一半的应用程序。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-02-05T04:10:55.033

这完全取决于特定领域的应用程序需求。很多时候，直接文本文件/二进制文件访问可以非常快速、高效，并为您提供操作系统文件系统的所有文件访问功能。

此外，您的编程语言很可能已经有一个用于特定解析的内置模块（或者很容易制作）。

如果您需要的是许多附加（插入？）和顺序/很少访问很少/没有并发，那么文件就是要走的路。

另一方面，当您对并发性、非顺序读/写、原子性、原子权限、您的数据本质上是关系型等方面的要求时，使用关系型或 OO 数据库会更好。

[使用SQLite3](http://www.sqlite.org/)可以完成很多工作，它非常轻巧（小于 300kb），符合 ACID，用 C/C++ 编写，并且非常普遍（如果它尚未包含在您的编程语言中，例如 Python），肯定有一个可用的）。即使在 1GB 甚至更多的 db 文件上，它也很有用。

如果您的需求更大，甚至不会进行讨论，请选择成熟的 RDBMS。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2010-02-10T17:20:41.387

对于您在生物信息学领域开发的那种应用程序，您经常使用一次性应用程序（通常是定义计算工作流程的脚本）来回答特定问题，并且在您回答问题后不太可能重复使用这些应用程序.
因此，您通常应该避免创建数据库来存储结果，因为毕竟您不会过多地使用它们的功能。

您可能会查询一些 Web 服务、文件或数据库，对从不同来源收集的数据运行一些本地算法，并生成一些表格或结构化输出格式（xml、json 等）。

为此，我建议您使用 Knime 等工作流工具[（或](http://www.knime.org/)[Inforsense KDE](http://www.inforsense.com/products/core_technology/inforsense_platform/)、Accelrys 的[Pipeline Pilot](http://accelrys.com/products/scitegic/)或[Snaplogic](https://www.snaplogic.org/trac)等商业解决方案，因为它们允许您以各种格式和位置（rdbms、平面文件、Web 服务）查询数据)、运行算法并构建功能强大的 Web 应用程序，使您可以轻松地将工作流发布给用户并让他们在特定点进行交互）。

如果您的原型“增长”并且您必须在工作流输出的数据之上构建更多功能，并且如果您的原型输出不太可能每天都在变化，那么将结果的子集存储在数据库。这允许您插入强大的报告工具，如 BusinessObjects、Crystal 报告、jasper 报告或任何可用的报告解决方案，并以比电子表格或 csv 文件更好的形式向您的用户显示数据。

最后，一些开发框架将使您的选择更加明显：如果您使用 MVC 框架构建 Web 应用程序，您的数据很可能将驻留在 RDBMS 中（但请不要将基因组序列放在表列中：- ））。

总而言之，这是一个个案选择，取决于您对每个特定应用程序的需求。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-02-05T03:50:24.810

在软件中，我通常可以将值存储在 XML 配置文件或注册表中，例如软件选项。一旦我需要持久化对象，我就会转移到数据库，因为与关系和报告可以提供的长期影响相比，前期成本并没有那么糟糕。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-02-05T03:51:02.750

对于生物信息学，您可能对此感兴趣：[Blast on DB](http://blastondb.sourceforge.net/)。从事这项工作的人是我的一个朋友，他从事快速相似性序列搜索方面的工作，他发现在这一点上让自己的二进制存储比使用数据库更好。

我不知道他的解决方案的具体细节，但你可能可以交换一两个想法，邮寄给这个人，甚至共享代码。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-02-05T04:10:38.577

您需要/想要 SQL 查询吗？

是否有多个人想要访问数据？

你的数据是相关的吗？

如果您对这些问题的回答是否定的，那么您（可能）不需要完整的数据库。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-02-05T04:17:35.580

首先，我会考虑：

1.  数据库最初将有多大：表数，行数
2.  它会以多快的速度增长？
3.  是否经常查询数据？

例如，如果我要创建一个个人食谱应用程序，我知道我可能会添加 50 个最喜欢的食谱开始，并且每年添加不超过 5 个食谱。话虽如此，我可以在没有数据库的情况下轻松过关，因为数据存储的大小对查询的影响很小。

也就是说，我可能会将数据库用于发生数据输入和查询的任何应用程序（甚至是小型个人食谱应用程序）。我认为它不会增加很多开销，尤其是当您的框架（例如 Rails）允许您保持数据库哑（主要是表、索引和约束）时。如果我决定扩大规模，它减少了我最终必须移植到数据库的机会。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-02-05T09:52:13.190

如果您知道数据的格式，平面文件，如果更快/更容易开发，就可以了。如果您希望您的记录格式在开发过程中经常更改，那么我建议 ALTER TABLE 是您的朋友。除非您希望在许多文件组合中实现等效的连接，否则平面文件也往往会更快（如果您关心速度）。

在开发期间使用 RDBMS 的真正好处是您可以灵活地修改数据模式，并且可以轻松地通过查询访问数据。

良好的设计将确保您保持数据访问层相对隔离（因为关注点分离），因此如果值得的话，以后对数据库进行返工应该是一件相当简单（如果乏味）的事情。或者，当然，如果您使用数据库来开发您的结构，您可以在这些结构结晶后将应用程序带回平面/索引文件以获得性能。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-02-05T03:56:13.753

使用您最熟悉的任何持久性技术，并充分扩展。

YAGNI 至少意味着“不要将新技术添加到您的个人堆栈中，除非您无法使用已经存在的任何东西来提高工作效率。”

对于我们中的许多人（大多数？）来说，我们对数据持久性的舒适区是 SQL。对于某些人来说，它可能是 XML。只是不要自己写，直到（见第 2 段）。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-02-05T04:06:34.293

作为也从事生物信息学研究的人，我建议不要将数据库用于此类原型项目，除非您确定它需要它。如果您犹豫不决，请使用无数据库解决方案并坚持使用平面文件。同样重要的是要注意，传统的生物信息学研究人员走的是平面文件路线，这意味着该领域中大多数类型的数据都有明确定义的文件格式。如果您决定使用数据库解决方案，它可能会损害您与现有研究项目的兼容性。

# python - 使用 re 模块帮助在 python 中构建正则表达式

> ID：514475
> 
> 赞同：1
> 
> 时间：2009-02-05T03:51:27.710
> 
> 标签：python, regex, parsing

我在 python 中编写了一个简单的命题逻辑公式解析器，它使用正则表达式 re 模块和 lex/yacc 模块进行词法分析/解析。最初我的代码可以选择蕴含为 ->，但添加逻辑等价 (<->) 会导致编译表达式出现问题

```
IMPLICATION = re.compile('[\s]*\-\>[\s]*')
EQUIVALENCE = re.compile('[\s]*\<\-\>[\s]*')
...
elif self.IMPLICATION.search(formula[0].strip()):
...
elif self.EQUIVALENCE.search(formula[0].strip()):
... 
```

我最初尝试将 [^<] 添加到 -> 的前面以使其忽略等价实例，但这只是让它根本不接受任何暗示实例。任何可能的帮助都将受到热烈欢迎:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-05T04:59:24.640

据我所知，您的正则表达式等同于以下内容：

```
# This is bad, because IMPLICATION also will match every
# string that EQUIVALENCE matches
IMPLICATION = re.compile("->")
EQUIVALENCE = re.compile("<->") 
```

正如您所写的，您还在and文字之前匹配*零个或多个*空格字符。但是您没有捕获空格，因此指定“匹配是否存在空格”是没有用的。另外，请注意，and不需要在这些正则表达式中进行转义。`->``<->``-``>`

在我看来，你有两个选择。首先是确保`IMPLICATION`不匹配相同的字符串`EQUIVALENCE`

```
# This ought to work just fine.
IMPLICATION = re.compile("[^<]->")
EQUIVALENCE = re.compile("<->") 
```

另一种选择是使用[最大咀嚼法](http://en.wikipedia.org/wiki/Maximal_munch)；即，匹配所有正则表达式，并选择最长的匹配。这将通过赋予 EQUIVALENCE 比 IMPLICATION 更高的优先级来解决歧义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-05T04:00:42.510

我认为您可以简单地通过重新排序检查以首先匹配等价，然后是含义来解决这个问题。但是，这似乎有效：

```
>>> IMPLICATION = re.compile(r'\s*[^\<]\-\>\s*')
>>> EQUIVALENCE = re.compile(r'\s*\<\-\>\s*') 
```

# asp.net-mvc - 控制器如何在模型和视图之间传递信息？

> ID：514477
> 
> 赞同：3
> 
> 时间：2009-02-05T03:51:36.350
> 
> 标签：asp.net-mvc

在 ASP.NET MVC 中，控制器如何在模型和视图之间传递信息？

假设我的数据库中有一个棒球运动员列表。在控制器中使用 LINQ 查询这些球员后，我如何将这些信息传递给查看（我的棒球运动员列表及其统计数据）？

在我将它们传递到视图之后，如何使用视图 html 中的内联代码循环并显示它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-05T04:03:15.877

控制器有一个可以使用的 ViewData 字段。这是一本字典，你可以这样使用：

> ViewData["players"] = yourList;

之后，您可以在视图上访问相同的 ViewData：

```
<? foreach(var player in ViewData["players"] as List) {} ?> 
```

您还可以制作强类型视图，将视图基类从 ViewPage 更改为 ViewPage < T >，其中 T 是您的用户定义类。在控制器上，您通过返回方法 View() 返回类，并使用 ViewModel 属性在视图上访问它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-05T04:17:42.960

查看[http://www.asp.net/learn/mvc/](http://www.asp.net/learn/mvc/)上的 ASP.NET MVC 教程，特别是关于模型、控制器和视图以及它们如何交互的前 3 个教程。

# java - 有人可以向我解释在 Java 中通过“值”而不是“引用”传递的原因是什么？

> ID：514478
> 
> 赞同：8
> 
> 时间：2009-02-05T03:51:40.377
> 
> 标签：java, pass-by-reference, pass-by-value

我对Java相当陌生（多年来一直在写其他东西），除非我遗漏了什么（我很高兴在这里犯错），否则以下是一个致命的缺陷......

```
String foo = new String();
thisDoesntWork(foo);
System.out.println(foo);//this prints nothing

public static void thisDoesntWork(String foo){
   foo = "howdy";
} 
```

现在，我很清楚（措辞相当糟糕的）概念，即在 java 中，所有内容都是通过“值”而不是“引用”传递的，但是 String 是一个对象，并且有各种各样的花里胡哨，所以，人们会期待与 int 不同，用户将能够对传递给方法的内容进行操作（并且不会被重载 = 设置的值所困扰）。

有人可以向我解释这种设计选择背后的原因是什么吗？正如我所说，我不想待在这里，也许我错过了一些明显的东西？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-02-05T03:59:21.907

[这个咆哮](http://javadude.com/articles/passbyvalue.htm)比我什至试图解释得更好：

> 在 Java 中，原语是按值传递的。但是，对象不是通过引用传递的。正确的说法是对象引用是按值传递的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-02-05T03:55:44.737

当您传递“foo”时，您将对“foo”的*引用*作为值传递给 ThisDoesntWork()。这意味着当您在方法内部对“foo”进行赋值时，您只是将局部变量 (foo) 的引用设置为对新字符串的引用。

考虑字符串在 Java 中的行为方式时要记住的另一件事是字符串是不可变的。它在 C# 中的工作方式相同，并且有一些充分的理由：

*   *安全*性：如果没有人可以修改它，没有人可以将数据塞入您的字符串并导致缓冲区溢出错误！
*   *速度*：如果您可以确定您的字符串是不可变的，那么您就知道它的大小始终相同，并且您在操作它时不必移动内存中的数据结构。您（语言设计者）也不必担心将 String 实现为慢速链表。不过，这对双方都有好处。仅使用 + 运算符附加字符串可能会占用大量内存，并且您必须使用 StringBuilder 对象以高性能、内存高效的方式执行此操作。

现在谈谈你更大的问题。为什么对象以这种方式传递？好吧，如果 Java 将您的字符串作为您传统上称为“按值”的方式传递，那么它必须在将整个字符串传递给您的函数之前实际复制整个字符串。这很慢。如果它通过引用传递字符串并让您更改它（就像 C 一样），您就会遇到我刚刚列出的问题。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-02-05T14:38:39.273

由于我最初的答案是“为什么会发生”而不是“为什么语言设计成这样”，所以我会再试一次。

为了简化事情，我将摆脱方法调用并以另一种方式显示正在发生的事情。

```
String a = "hello";
String b = a;
String b = "howdy"

System.out.print(a) //prints hello 
```

为了让最后一条语句打印“hello”，**b必须指向与****a**指向的内存中相同的“洞” （指针）。当您想要通过引用传递时，这就是您想要的。Java 决定不朝这个方向发展有几个原因：

*   *指针令人困惑*Java 的设计者试图删除一些其他语言更令人困惑的东西。指针与运算符重载一样，是 C/C++ 中最容易被误解和使用不当的构造之一。

*   *指针是安全风险*指针在误用时会导致许多安全问题。恶意程序将某些内容分配给该部分内存，然后您认为是您的对象实际上是其他人的。（Java 已经摆脱了最大的安全问题，缓冲区溢出，检查数组）

*   *抽象泄漏*当您开始准确地处理“内存中的内容和位置”时，您的抽象就变得不那么抽象了。虽然抽象泄漏几乎肯定会蔓延到一种语言中，但设计人员并不想直接将其融入其中。

*   *对象就是你所关心* 的 在 Java 中，一切都是对象，而不是对象占用的空间。但是，添加指针会使对象占据的空间变得重要......

您可以通过创建“孔”对象来模拟您想要的。您甚至可以使用泛型使其类型安全。例如：

```
public class Hole<T> {
   private T objectInHole;

   public void putInHole(T object) {
      this.objectInHole = object;
   }
   public T getOutOfHole() {
      return objectInHole;
   }

   public String toString() {
      return objectInHole.toString();
   }
   .....equals, hashCode, etc.
}

Hole<String> foo = new Hole<String)();
foo.putInHole(new String());
System.out.println(foo); //this prints nothing
thisWorks(foo);
System.out.println(foo);//this prints howdy

public static void thisWorks(Hole<String> foo){
   foo.putInHole("howdy");
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-02-05T04:13:05.263

您提出的问题**实际上与按值传递、按引用传递或字符串是不可变的事实**（正如其他人所说）无关。

在该方法中，您实际上创建了一个局部变量（我将其称为“localFoo”），它指向与原始变量（“originalFoo”）相同的引用。

当您将“howdy”分配给 localFoo 时，您不会更改 originalFoo 指向的位置。

如果你做了类似的事情：

```
String a = "";
String b = a;
String b = "howdy"? 
```

你会期望：

```
System.out.print(a) 
```

打印出“你好”？它打印出“”。

您无法通过更改 localFoo 指向的内容来更改 originalFoo 指向的内容。您可以修改两者都指向的对象（如果它不是不可变的）。例如，

```
List foo = new ArrayList();
System.out.println(foo.size());//this prints 0

thisDoesntWork(foo);
System.out.println(foo.size());//this prints 1

public static void thisDoesntWork(List foo){   
    foo.add(new Object);
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-02-05T04:07:09.940

在java中，所有传递的变量实际上都是由值甚至对象传递的。传递给方法的所有变量实际上都是原始值的副本。在您的字符串示例的情况下，原始指针（它实际上是一个引用 - 但为避免混淆，请使用不同的词）被复制到一个新变量中，该变量成为该方法的参数。

如果一切都是参考，那将是一个痛苦。一个人需要在整个地方制作私人副本，这绝对是一种真正的痛苦。每个人都知道，对值类型等使用不变性会使您的程序无限简单和更具可扩展性。

一些好处包括： - 无需制作防御性副本。- 线程安全 - 无需担心锁定，以防万一其他人想要更改对象。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-02-05T04:06:40.923

问题是您正在实例化 Java 引用类型。然后将该引用类型传递给静态方法，并将其重新分配给本地范围的变量。

**它与不变性无关。可变引用类型也会发生完全相同的事情。**

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-02-05T06:05:16.363

如果我们做一个粗略的 C 和汇编类比：

```
void Main()
{ 
     // stack memory address of message is 0x8001\.  memory address of Hello is 0x0001\.  
     string message = "Hello"; 
     // assembly equivalent of: message = "Hello";
     // [0x8001] = 0x0001

     // message's stack memory address
     printf("%d", &message); // 0x8001

     printf("%d", message); // memory pointed to of message(0x8001): 0x0001
     PassStringByValue(message); // pass the pointer pointed to of message.  0x0001, not 0x8001
     printf("%d", message); // memory pointed to of message(0x8001): 0x0001\.  still the same

     // message's stack memory address doesn't change
     printf("%d", &message); // 0x8001
}

void PassStringByValue(string foo)
{
    printf("%d", &foo); // &foo contains foo's *stack* address (0x4001)

    // foo(0x4001) contains the memory pointed to of message, 0x0001
    printf("%d", foo);  // 0x0001
    // World is in memory address 0x0002
    foo = "World";  // on foo's memory address (0x4001), change the memory it pointed to, 0x0002
    // assembly equivalent of: foo = "World":
    // [0x4001] = 0x0002

    // print the new memory pointed by foo
    printf("%d", foo); // 0x0002

    // Conclusion: Not in any way 0x8001 was involved in this function.  Hence you cannot change the Main's message value.
    // foo = "World"  is same as [0x4001] = 0x0002

} 
```

* * *

```
void Main()
{
     // stack memory address of message is 0x8001\.  memory address of Hello is 0x0001\.  
     string message = "Hello"; 
     // assembly equivalent of: message = "Hello";
     // [0x8001] = 0x0001

     // message's stack memory address
     printf("%d", &message); // 0x8001

     printf("%d", message); // memory pointed to of message(0x8001): 0x0001
     PassStringByRef(ref message); // pass the stack memory address of message.  0x8001, not 0x0001
     printf("%d", message); // memory pointed to of message(0x8001): 0x0002\. was changed

     // message's stack memory address doesn't change
     printf("%d", &message); // 0x8001
}

void PassStringByRef(ref string foo)
{
    printf("%d", &foo); // &foo contains foo's *stack* address (0x4001)

    // foo(0x4001) contains the address of message(0x8001)
    printf("%d", foo);  // 0x8001
    // World is in memory address 0x0002
    foo = "World"; // on message's memory address (0x8001), change the memory it pointed to, 0x0002
    // assembly equivalent of: foo = "World":
    // [0x8001] = 0x0002;

    // print the new memory pointed to of message
    printf("%d", foo); // 0x0002

    // Conclusion: 0x8001 was involved in this function.  Hence you can change the Main's message value.
    // foo = "World"  is same as [0x8001] = 0x0002

} 
```

在 Java 中一切都按值传递的一个可能原因是，它的语言设计人员希望简化语言并以 OOP 方式完成所有事情。

他们宁愿让您使用对象设计一个整数交换器，也不愿他们为按引用传递提供一流的支持，委托也是如此（Gosling 对指向函数的指针感到恶心，他宁愿将该功能塞进对象）和枚举。

他们过度简化了语言（一切都是对象），从而损害了大多数语言结构没有一流的支持，例如通过引用传递、委托、枚举、属性。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-02-05T03:59:34.137

你确定它打印空吗？我认为当您初始化提供空字符串的 foo 变量时，它将是空白的。

thisDoesntWork 方法中对 foo 的赋值不会改变类中定义的 foo 变量的引用，因此 System.out.println(foo) 中的 foo 仍将指向旧的空字符串对象。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-02-05T04:13:12.440

戴夫，你必须原谅我（好吧，我猜你不是“必须”，但我宁愿你这样做），但这种解释并不过分令人信服。安全性收益相当小，因为任何需要更改字符串值的人都会找到一种方法来通过一些丑陋的解决方法来做到这一点。还有速度？！您自己（非常正确）断言带有 + 的整个业务非常昂贵。

你们其他人，请理解我知道它是如何工作的，我在问为什么它会这样工作......请停止解释方法之间的区别。

（老实说，我不是在这里寻找任何形式的战斗，顺便说一句，我只是不明白这是一个理性的决定）。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-02-05T05:49:26.113

@Axelle

伙计，您真的知道按值传递和按引用传递之间的区别吗？

在java中，甚至引用也是按值传递的。当您传递对对象的引用时，您将在第二个变量中获得引用指针的副本。Tahts 为什么可以在不影响第一个变量的情况下更改第二个变量。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-02-05T09:11:05.443

这是因为，它在方法内部创建了一个局部变量。什么是简单的方法（我很确定会起作用）是：

```
String foo = new String();    

thisDoesntWork(foo);    
System.out.println(foo); //this prints nothing

public static void thisDoesntWork(String foo) {    
   this.foo = foo; //this makes the local variable go to the main variable    
   foo = "howdy";    
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-02-05T09:36:03.800

如果您认为对象只是对象中的字段，那么在 Java 中对象是通过引用传递的，因为方法可以修改参数的字段，而调用者可以观察到修改。但是，如果您也将对象视为它的标识，那么对象将按值传递，因为方法无法以调用者可以观察到的方式更改参数的标识。所以我会说Java是按值传递的。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-02-05T16:41:00.087

这是因为在“thisDoesntWork”内部，您实际上是在破坏 foo 的本地值。如果你想以这种方式通过引用传递，总是可以将String封装在另一个对象中，比如在一个数组中。

```
class Test {

    public static void main(String[] args) {
        String [] fooArray = new String[1];
        fooArray[0] = new String("foo");

        System.out.println("main: " + fooArray[0]);
        thisWorks(fooArray);
        System.out.println("main: " + fooArray[0]);
    }

    public static void thisWorks(String [] foo){
        System.out.println("thisWorks: " + foo[0]);
        foo[0] = "howdy";
        System.out.println("thisWorks: " + foo[0]);
    }
} 
```

结果如下：

```
main: foo
thisWorks: foo
thisWorks: howdy
main: howdy 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2009-02-05T04:06:11.017

引用类型的参数作为对对象本身的引用（而不是对引用对象的其他*变量*的引用）传递。您可以在已传递的对象上调用方法。但是，在您的代码示例中：

```
public static void thisDoesntWork(String foo){
    foo = "howdy";
} 
```

您只是将对该字符串的引用存储`"howdy"`在该方法的本地变量中。该局部变量 ( `foo`) 在调用方法时被初始化为调用者的值`foo`，但没有引用调用者的变量本身。初始化后：

```
caller     data     method
------    ------    ------
(foo) -->   ""   <-- (foo) 
```

在您的方法中分配之后：

```
caller     data     method
------    ------    ------
(foo) -->   ""
          "hello" <-- (foo) 
```

你还有另一个问题：`String`实例是不可变的（出于安全考虑），所以你不能修改它的值。

如果你真的希望你的方法为你的字符串提供一个初始值（或者在它生命中的*任何*时候，就此而言），那么让你的方法*返回*一个`String`值，你在调用时分配给调用者的变量。像这样的东西，例如：

```
String foo = thisWorks();
System.out.println(foo);//this prints the value assigned to foo in initialization 

public static String thisWorks(){
    return "howdy";
} 
```

* * *

## 回答 #15

> 赞同：-2
> 
> 时间：2009-02-05T03:56:55.077

去太阳网站上做真正的大教程。

您似乎不了解范围变量的差异。“foo”对于您的方法来说是本地的。该方法之外的任何东西都不能改变“foo”点。引用您的方法的“foo”是一个完全不同的字段-它是封闭类上的静态字段。

范围特别重要，因为您不希望系统中的所有其他内容都可以看到所有内容。

# delphi - Delphi“with”关键字是一种不好的做法吗？

> ID：514482
> 
> 赞同：34
> 
> 时间：2009-02-05T03:53:46.223
> 
> 标签：delphi, with-statement

**我一直在阅读有关 delphi 中with**关键字的坏事，但在我看来，如果您不过度使用它。它可以让你的代码看起来很简单。

我经常将我所有的 TClientDataSets 和 TFields 放在 TDataModules 中。所以在我的表格中我有这样的代码

```
procedure TMyForm.AddButtonClick(Sender: TObject);
begin  
  with LongNameDataModule do
  begin
     LongNameTable1.Insert;
     LongNameTable1_Field1.Value := "some value";
     LongNameTable1_Field2.Value := LongNameTable2_LongNameField1.Value;
     LongNameTable1_Field3.Value := LongNameTable3_LongNameField1.Value;
     LongNameTable1_Field4.Value := LongNameTable4_LongNameField1.Value;
     LongNameTable1.Post;
  end
end; 
```

没有**with**关键字我必须写这样的代码

```
 procedure TMyForm.AddButtonClick(Sender: TObject);
    begin            
      LongNameDataModule.LongNameTable1.Insert;
      LongNameDataModule.LongNameTable1_LongNameField1.Value := "some value";

      LongNameDataModule.LongNameTable1_LongNameField2.Value :=
               LongNameDataModule.LongNameTable2_LongNameField1.Value;

      LongNameDataModule.LongNameTable1_LongNameField3.Value :=
               LongNameDataModule.LongNameTable3_LongNameField1.Value;

      LongNameDataModule.LongNameTable1_LongNameField4.Value :=
               LongNameDataModule.LongNameTable4_LongNameField1.Value;

      LongNameDataModule.LongNameTable1.Post;
    end; 
```

**我认为使用with**关键字更容易阅读。

我应该避免使用**with**关键字吗？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2009-02-05T13:46:07.320

除了像“A、B、C、D”这样的病态条件之外，with 的最大危险是你的代码可以在不通知你的情况下默默地改变含义。考虑这个例子：

```
with TFoo.Create
try
  Bar := Baz;
  DoSomething();
finally
  Free;
end; 
```

您编写此代码时知道 Bar 是 TFoo 的属性，而 Baz 是包含具有此代码的方法的类型的属性。

现在，两年后，一些好心的开发人员进来为 TFoo 添加了 Baz 属性。您的代码默默地改变了含义。编译器不会抱怨，但代码现在已损坏。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2009-02-05T09:01:47.677

**with**关键字是一个很好的功能，可以使您的代码更具可读性，但也有一些缺陷。

***调试：***

使用这样的代码时：

```
with TMyClass.Create do
try
  Add('foo');
finally
  Free;
end; 
```

无法检查此类的属性，因此始终声明一个变量并在其上使用**with**关键字。

***接口：***

在**with**子句中创建接口时，它会一直存在到您的方法结束：

```
procedure MemoryHog;
begin
  with GetInterfaceThatTakes50MBOfMemory do
    Whatever;
  ShowMessage('I''m still using 50MB of memory!');
end; 
```

***明晰***

当在**with**子句中使用具有范围内已存在的属性或方法名称的类时，它很容易欺骗您。

```
with TMyForm.Create do
  Width := Width + 2; //which width in this with is width? 
```

当然，当名称重复时，您使用的是在 with 语句 (TMyForm) 中声明的类的属性和方法。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2009-02-05T04:02:03.583

该`with`声明有其位置，但我必须同意过度使用会导致代码模棱两可。一个好的经验法则是确保在添加 with 语句后代码“更”可读和可维护。如果您觉得在添加语句后需要添加注释来解释代码，那么这可能是个坏主意。如果代码在您的示例中更具可读性，请使用它。

顺便说一句：这一直是我在 Delphi 中最喜欢的模式之一，用于显示模态窗口

```
with TForm.Create(nil) do
try
  ShowModal;
finally
  Free;
end 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2009-02-05T08:40:30.917

我倾向于完全禁止 with 声明。如前所述，它会使事情变得复杂，我的经验是它会。很多时候，调试器想要评估值是因为 withs，而且我经常发现嵌套的 withs 会导致代码难以阅读。

Brian 的代码看起来可读且漂亮，但如果您直接对发送者进行类型转换，代码会更短，并且您消除了对您启用的组件的所有疑问：

```
TAction(Sender).Enabled := Something; 
```

如果您担心输入太多，我建议对长名称对象进行临时引用：

```
var
  t: TTable;
begin
  t := theLongNamedDataModule.WithItsLongNamedTable;
  t.FieldByName(' ');
end; 
```

不过，我不明白为什么打字会打扰你。[我们首先是打字员，其次是程序员](http://www.codinghorror.com/blog/archives/001188.html)，代码完成、复制粘贴和按键记录可以帮助您成为更有效的打字员。

更新：刚刚偶然发现一篇长篇文章，其中有一小部分关于 with-statements：[he with 关键字。该语言中最可怕、最危险、最令人发指的功能。](http://www.theregister.co.uk/2009/02/04/verity_stob_delphi_syntax/page2.html):-)

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2009-02-05T06:51:45.053

当我第一次开始 pascal 编程（使用 TurboPascal！）并边走边学时，WITH 看起来很棒。正如您所说，这是繁琐打字的答案，是那些长记录的理想选择。[自从 Delphi 到来以来，我一直在删除它并鼓励其他人放弃它 - Verity 在寄存器](http://www.theregister.co.uk/2009/02/04/verity_stob_delphi_syntax/)中巧妙地总结了 除了降低可读性之外，还有两个主要原因我会避免它：

1.  如果你使用一个类，那么无论如何你都不需要它——只有记录“似乎”从中受益。
2.  使用调试器通过 Ctrl-Enter 跟随代码到声明不起作用。

也就是说，为了便于阅读，我仍然使用以下语法：

```
procedure ActionOnUpdate( Sender : TObject )
begin
  With Sender as TAction do
    Enabled := Something
end; 
```

我还没有看到更好的构造。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2009-02-05T09:12:46.000

在我看来，您的示例（在按钮单击中访问数据模块）是一个设计不佳的示例。如果您将此代码移到它应该在的数据模块中，那么对 WITH 的全部需求就会消失。OnClick 然后只调用 LongNameDataModule.InsertStuff 并且不需要。

With 是一个糟糕的设备，您应该查看您的代码以了解您为什么需要它。你可能做错了什么，或者可以做得更好。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2012-01-17T09:50:37.147

正如 Vegar 所提到的，使用临时引用同样简洁、可读性更强、更易于调试，并且不太容易出现隐蔽问题。

到目前为止，我*从未*发现需要使用*with*。我曾经对它很矛盾，直到我接手了一个经常使用头脑弯曲的**项目**。质疑最初的开发者是打算在第一个还是第二个中引用项目*，*如果那个模棱两可的引用是一个*带有滑动*或笨拙的代码，尝试调试它的痛苦，以及扩展或修改使用这些的类的影响可憎的事不值得任何人花时间。

显式代码*更具*可读性。这样你就可以吃蛋糕并享受它。

```
procedure TMyForm.AddButtonClick(Sender: TObject);
var
  dm: TLongNameDataModuleType
begin  
  dm:=LongNameDataModule;

  dm.LongNameTable1.Insert;
  dm.LongNameTable1_Field1.Value := "some value";
  dm.LongNameTable1_Field2.Value := LongNameTable2_LongNameField1.Value;
  dm.LongNameTable1_Field3.Value := LongNameTable3_LongNameField1.Value;
  dm.LongNameTable1_Field4.Value := LongNameTable4_LongNameField1.Value;
  dm.LongNameTable1.Post;
end; 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2009-02-09T02:19:15.247

我坚信在 Delphi 中删除 WITH 支持。您使用具有命名字段的数据模块的示例用法是我可以看到它起作用的唯一实例。否则，反对它的最佳论点是 Craig Stuntz 给出的——我投了赞成票。

我只是想指出，随着时间的推移，您最终可能（应该）重新处理 OnClick 事件中的所有编码，并且您的代码最终也将从数据模块上的命名字段迁移到使用包装此数据的类，并且使用 WITH 的原因将消失.

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2009-04-29T07:41:30.643

您的问题是“锤子并不总是解决方案”的一个很好的例子。

在这种情况下，'with' 不是你的解决方案：你应该把这个业务逻辑从你的表单移到你的数据模块中。不这样做违反了德[墨忒耳法则，](http://en.wikipedia.org/wiki/Law_of_Demeter)就像[mghie](https://stackoverflow.com/users/30568/mghie) (Michael Hieke) 已经评论过的那样。

也许您的示例只是说明性的，但如果您实际上在项目中使用这样的代码，那么您应该这样做：

```
procedure TLongNameDataModule.AddToLongNameTable1(const NewField1Value: string);
begin  
  LongNameTable1.Insert;
  LongNameTable1_Field1.Value := NewField1Value;
  LongNameTable1_Field2.Value := LongNameTable2_LongNameField1.Value;
  LongNameTable1_Field3.Value := LongNameTable3_LongNameField1.Value;
  LongNameTable1_Field4.Value := LongNameTable4_LongNameField1.Value;
  LongNameTable1.Post;
end; 
```

然后像这样从您的表单中调用它：

```
procedure TMyForm.AddButtonClick(Sender: TObject);
begin  
  LongNameDataModule.AddToLongNameTable1('some value');
end; 
```

这有效地摆脱了您的 with 语句，同时使您的代码更易于维护。

当然，用单引号包围 Delphi 字符串也有助于使其编译；-)

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2009-02-05T04:07:29.610

"with" 的主要问题是你不知道它的作用域在哪里结束，并且你可能有多个重叠的 with 语句。

只要您的代码可读，我认为您不应该避免使用它。

使其更具可读性（并且在更长的代码中减少混淆）的建议之一是，如果 codegear 添加了允许在 with 中使用别名的**选项**，并且可能允许在一个中使用多个 with：

```
procedure TMyForm.AddButtonClick(Sender: TObject);
begin  
  with LongNameDataModule as dm, dm.LongNameTable1 as t1, dm.LongNameTable2 as t2 do
  begin
    t1.Insert;
    t1.FieldByName('Field1').AsString := 'some value';
    t1.FieldByName('Field2').AsString := t2.FieldByName('Field2').AsString;
    t1.Post;
    dm.Connection.Commit;
  end
end; 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2009-02-05T04:42:44.970

就我而言，在您提供的情况下，With 是完全可以接受的。它肯定会提高代码的清晰度。

真正的邪恶是当您同时打开多个 with 时。

另外，我的观点是，你使用 with on 会产生很大的不同。如果它是一个真正不同的对象，那么 with 可能是个坏主意。然而，我不喜欢在一个层次上拥有很多变量，即使这是有意义的——通常是包含整个非常复杂的数据项的数据对象——通常是程序设计用于处理的整个工作。（我认为这种情况不会发生在没有此类项目的应用程序中。）为了让世界更清晰，我经常使用记录来对相关项目进行分组。我发现我使用的几乎所有 withs 都是用于访问此类子组。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2009-02-05T22:10:48.643

关于为什么 with 语句不好，这里有很多很好的答案，所以我会尽量不重复。多年来我一直在使用 with 语句，但我开始回避它。这部分是因为很难确定范围，但我最近开始着手重构，并且没有一个自动重构与 with 语句一起工作 - 并且自动重构很棒。

前段时间，我制作了一个视频，说明为什么 with 语句不好，这不是我最好的作品之一，但[在这里](http://codegearguru.com/index.php?option=com_content&task=view&id=37&Itemid=27)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-05-08T11:47:05.667

仅临时使用`with`（就像您临时注释掉一样）。

它可以帮助您编写代码草图以快速编译和运行。如果您合并解决方案，请清理它！`with`将代码移动到正确的位置时删除。

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2014-03-15T18:52:15.397

当前的 With 语句是“危险的”，但可以大幅改进：

```
 With TForm1.Create (Nil) Do  // New TForm1 instance
    Try
      LogForm (");  // That same instance as parameter to an outer method
      "ShowModal;  // Instance.ShowModal
    Finally
      "Free;  // Instance.Free
    End; 
```

我的建议是：

1.  每个 With 标头不超过一个对象/记录。
2.  不允许嵌套 Withs。
3.  使用 " 表示对象/记录（双引号类似于同上标记：[http](http://en.wikipedia.org/wiki/Ditto_mark) ://en.wikipedia.org/wiki/Ditto_mark ）。

# c# - 如何使用空格作为填充字符来形成初始化 VB.NET 中的控件的字符串

> ID：514484
> 
> 赞同：1
> 
> 时间：2009-02-05T03:55:10.823
> 
> 标签：c#, vb.net, string, padding

我想用空格右填充我的字符串。以下函数适用于除空白以外的所有字符。

```
myString.PadRight(50,"x") 
```

编辑：

myString.PadRight(50) 确实用空格填充字符串，但是当在以下语句中使用此字符串时，空格填充消失了。

```
myCheckBox.Text = myString.PadRight(50) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-05T04:02:21.213

我认为如果您只是省略字符说明符，它将在右侧填充空格。

```
var newString = myString.PadRight(50); 
```

请参阅文档[参考](http://msdn.microsoft.com/en-us/library/system.string.padright.aspx)。不过，它似乎也应该通过指定空格字符来工作。我不知道为什么它会与任何其他 Unicode 字符不同地对待它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-05T12:05:48.537

How do you know the blank padding is wrong? I do not experience this when I try your code in VS 2005 with a dwindows.forms checkbox.

I guess that either the custom control removes the spaces or your observation is incorrect.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-05T04:36:52.173

听起来这是针对 asp.net 页面的，在这种情况下，问题在于 html 如何处理空格。如果您查看源代码，则空间可能会呈现给客户端。但是，浏览器不会显示它们。改为使用元素的 CSS 样式来设置宽度或渲染`&nbsp;`字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-05T04:40:21.667

你真的需要那个填充物吗？也许您只想在控件中设置文本对齐方式？

# sql-server - 如何在 MS-SQL 中更新程序集及其依赖程序集？

> ID：514485
> 
> 赞同：12
> 
> 时间：2009-02-05T03:55:16.283
> 
> 标签：sql-server, sqlclr

这是这种情况：

我有一个 Trigger.dll 和一个 Trigger.XmlSerializer.dll。

我使用 CREATE ASSEMBLY 在 MSSQL 中注册它们。

现在，我已经编译了两者的新版本。

我想使用 ALTER ASSEMBLY 来更新它们，但是您一次只能更新一个。如果您尝试更新具有依赖关系的一个，它会抱怨。这样做有什么诀窍？

我不想删除并重新创建，因为我必须删除所有触发器等，并且存在数据库停机时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-11T00:50:55.717

根据[微软的支持](http://support.microsoft.com/kb/917407)，您可以通过技巧使用它。

笔记

*   这些步骤在“如何升级或降级程序集”部分中描述的方案中升级或降级程序集 A。
*   此示例假定两个程序集的版本都是 1.0.0.0，并且程序集都是用 C# 编写的。当您按照这些步骤操作时，您尝试将程序集 A 和程序集 B 升级到版本 2.0.0.0。

要升级或降级程序集 A，请执行以下步骤。

1.  将程序集 B 的 1.0.0.0 版本备份到文件夹。
2.  修改然后将程序集 B 重新编译到版本 2.0.0.0。
3.  使用 ALTER ASSEMBLY 语句升级 SQL Server 2005 中的程序集 B。
4.  修改程序集 A 并将其重新编译为版本 2.0.0.0。执行此操作时，请从您在步骤 1 中创建的备份中引用程序集 B 的 1.0.0.0 版本。为此，请使用 Csc.exe 编译器工具和 /reference 开关。例如，使用以下命令： csc /target:library /out:AssemblyA.dll AssemblyA.cs AssemblyInfo.cs /reference:"BackupFolder\AssemblyB.dll" 注意 要在程序集 A 的元数据中验证程序集 B 的版本，使用 Ildasm.exe 实用程序打开程序集 A。然后，验证 MANIFEST 部分下所引用程序集的元数据信息。
5.  使用 ALTER ASSEMBLY 语句升级 SQL Server 2005 中的程序集 A。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-05T10:58:47.983

我担心丢掉桌子并重新创建它是唯一的方法。

造成这种情况的主要原因是，如果将程序集更新到新版本，则存储在程序集中的类型中的值将不可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-27T08:51:53.637

两个建议：

1) 通常，您可以通过使用 ILMerge 嵌入和内部化它们来避免依赖关系。所以在大多数情况下，alter 汇编语句应该足够了。我自己还没有用 SQLCLR 尝试过，但我会试一试。

2) 也许不需要 XML 序列化程序集？[本文建议仅在 SQL Server 内部调用外部 Web 服务时才需要](http://blogs.msdn.com/b/sqlclr/archive/2005/07/25/vineet.aspx)。这本身就是一个有问题的设计，除非您是那些想要在 MS SQL Server 产品中托管所有业务服务的人之一，而不是仅仅在 Windows 中编写自己的独立服务（更容易安装、管理和维护），即比“数据层无所不能”反模式更多的 n 层模式。由于您的 DLL 称为 Triggers.dll，因此不建议它声明任何类型或作为 Web 服务代理。如果我错过了使用 XML 序列化程序的其他一些原因，那很公平，请出于兴趣详细说明。

# java - 从 JVM 内部修改 JVM 参数

> ID：514487
> 
> 赞同：3
> 
> 时间：2009-02-05T03:55:44.813
> 
> 标签：java, jvm, vmargs

有没有办法从 jvm 内部修改 jvm args？具体来说，我希望能够从其中更改 jvm 的最大堆大小。这可能吗？

**编辑**：我想我应该添加我想这样做的原因。我有一些在不同机器/平台上运行的 Java 程序。这些程序具有在运行时获取的配置，并且根据程序运行的机器/环境而有所不同。其中一些配置可以在运行时更改，并且各种程序会随着配置的更改而自动更新。

我希望堆大小是这些配置参数之一，它像配置的其余部分一样在运行时获取。如果是这样，那么程序可以启动（使用一些默认的 jvm args）然后根据检索到的配置进行自我调整。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-05T04:08:05.053

这是一个半认真的，完全不合时宜的黑客思想：

...如果您从当前 jvm 生成一个新的 java 实例（使用新设置）然后从新的 jvm 中杀死旧进程怎么办？我不知道这是否有帮助（甚至工作）......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-05T04:13:48.273

您不能仅仅因为它损害系统的安全性而更改这些选项。

如果管理员希望通过设置安全管理器仅允许某个程序具有某些功能，如果您可以将其关闭，那将是一个严重的问题。

无论如何，一个程序不应该在运行时改变它的内存需求——这些东西应该由管理员知道和设置。您的程序没有理由需要在运行时执行此操作。如果它真的需要改变这一点，也许原因是为什么管理员类型的家伙不这样做？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-10T01:51:22.450

使用[JRockit](http://www.oracle.com/technology/software/products/jrockit/index.html)，您至少可以建议堆大小。

```
JVMFactory.getJVM().getMemorySystem().suggestHeapSize(100*1000*1000); 
```

有关更多信息，请参阅[JMAPI](http://download.oracle.com/docs/cd/E13150_01/jrockit_jvm/jrockit/releases/R27/javadoc/manapi/docs/index.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-05T04:03:16.937

> 具体来说，我希望能够从其中更改 jvm 的最大堆大小。这可能吗？

不。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-06-06T17:18:22.137

（多年后），我找到了一个库，可以完成我发布时所需的内容。 [Akuma](http://akuma.kohsuke.org/)是一个用于守护 Java 进程的库。它允许使用新参数重新启动 JVM。

使用它与使用引导程序启动新进程之间的区别在于标准输入/标准输出和其他文件描述符是自动共享的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-10-30T22:20:26.767

例如，动态设置 -Xmx 对于控制长期运行的运行时的预计系统资源（主要是占用空间）非常有帮助。当然，许多后果之一是更大/更长的 GC 开销。

我知道有几台大型服务器机器运行着几十个 1G+ 堆 JVM。如果这些运行时可以在低使用时间缩减其高水位线，那么您可以更好地管理您的系统资源。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-15T09:09:50.907

正如其他人所指出的，这通常只有通过引导程序（Java 或其他语言）才能使用正确的参数调用主 JVM。

也就是说，你确定这是必要的吗？您提到“最大堆大小”。如果您指的是 -Xmx 参数：这只是 VM 永远不会超过的限制。这并不意味着虚拟机*真的*会使用那么多，如果可以的话，它会用更少的。

因此，您始终可以将 -Xmx 设置为系统可以处理的最大值，并让 JVM 决定它真正需要多少。为什么你认为你需要动态设置它？

# windows - 什么是 Windows PowerShell？

> ID：514492
> 
> 赞同：31
> 
> 时间：2009-02-05T03:57:50.583
> 
> 标签：windows, powershell

什么是 PowerShell？

我安装了 Windows 7，我注意到它有 PowerShell。我记得在注册 [Microsoft Azure][1] 时安装了它，但只是因为它是必需的。

用外行的话解释是什么？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2009-02-05T05:07:36.120

PowerShell is a new command shell and scripting language for Windows. It is cool for a lot of reasons:

**The language is sane**, especially when compared to CMD.

**Scripts and command line share a language**. CMD had many small but important differences. CScript and Windows Scripting Host are not interpreted.

**Command line usage can be quick while scripts can be readable**, thanks to the combination of aliases and smart command argument processing. For example, `dir -r .` is the same as `Get-ChildItem -Recurse -Path "."`

**Consistent command argument syntax**, across **all** cmdlets and custom scripts (in V2.0).

**Powerful interaction with other technologies**, most notably .NET. Also, WMI is suddenly convenient and accessible. COM is there, too. [V2 makes Win32 interop easy](http://www.leeholmes.com/blog/PowerShellPInvokeWalkthrough.aspx), too.

**An integrated script editor/interactive shell** in V2 that is very cool.

**Command pipelines work on objects, not strings**, which means you don't need to parse, and you can format text for humans not the next command. In bash I did a lot of `cut`, but in PowerShell I don't have to. The objects are real .NET objects, which is very powerful.

Before PowerShell I managed to become an expert in CMD script writing, but now I can start erasing that part of my brain. Thank goodness.

EDIT: It's worth mentioning that lots of Microsoft products are adding PowerShell support, especially for server products. For example, Exchange ships with PowerShell cmdlets, so you can administer your Exchange server via PowerShell.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-02-05T04:31:34.680

在我看来，最重要的是 PowerShell 传递对象。需要一段时间才能意识到这是多么强大。例如，无需修改实用程序的文本输出，而是在字符 7 到 18 中查找您想要的内容，您只需访问对象的属性即可。这使用起来要快得多，而且如果新版本在输出中添加了额外的字符，它也不会中断。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-05T04:00:59.343

Microsoft PowerShell 是 Microsoft 的新命令行实用程序，旨在为 IT 管理员提供更大的控制和灵活性。

您可以将其视为一个非常复杂的命令提示符版本，专为可重复的任务而设计。

[来自微软的网站](http://www.microsoft.com/windowsserver2003/technologies/management/powershell/default.mspx)：

> Microsoft Windows PowerShell 命令行外壳和脚本语言可帮助 IT 专业人员实现更好的控制和生产力。使用以管理员为中心的新脚本语言、130 多种标准命令行工具以及一致的语法和实用程序，Windows PowerShell 使 IT 专业人员能够更轻松地控制系统管理并加速自动化。Windows PowerShell 易于采用、学习和使用，因为它适用于您现有的 IT 基础结构和现有的脚本投资，并且因为它可以在 Windows XP、Windows Vista 和 Windows Server 2003 上运行。Windows PowerShell 现在作为 Windows 的一部分包含在内Server 2008 并可在 Windows Server 2008 Beta 3 中进行评估。Exchange Server 2007、System Center Operations Manager 2007、System Center Data Protection Manager V2、

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-05T04:38:26.460

这是 .NET 集成/对象挂起的一个很酷的效果：[从命令行调用 web 服务](http://keithhill.spaces.live.com/blog/cns!5A8D2641E0963A97!512.entry)并将结果作为可操作的 .NET 对象处理。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-05T05:52:11.973

The value of PowerShell is less a benefit for end-users, and much more a benefit for system maintainers, because they know it will be installed on every machine that has Windows 7 or later.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-05-27T10:54:54.053

**它是干什么用的？**

Powershell 非常适合在一定程度上控制您通常没有的计算机。它适用于 Windows 用户。

**我该如何使用它？**

如果您有 Windows 7 或更高版本，Powershell 会随您的系统一起安装。如果您在 Windows 7（Vista 和 XP）之前有任何东西，那么建议您更新您的 windows。一旦您能够在开始菜单中找到 Powershell，您就可以开始了！

**它与常规命令提示符有何不同？**

如果您是 Mac 或 Linux 用户，您之前可能使用过其他命令行界面。事实上，如果您是 Linux 用户，您肯定已经使用过它。这就是所谓的 Unix 命令行界面，它与 Powershell 不同，因此 Unix 系统的大多数命令在 Powershell 中不起作用。这是一个与您习惯的系统完全不同的系统。

**在开始使用它之前有什么我应该知道的吗？**

您应该学习一些使用它的命令。您可以从此处获取基本命令列表：[PowerShell 简介：学习使用命令和脚本](https://erainnovator.com/introduction-to-powershell/)

**超级用户应该知道的任何很棒的事情？**

您将在 Powershell 中编写和执行的脚本是 .ps1 脚本，它们通常比 Java 或 Python 等脚本更简单。这些脚本用于执行简单的、通常是自动化的任务，供您的计算机执行。脚本可以做的事情受到 Powershell 自身能力的限制。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-06-05T07:04:11.370

Windows PowerShell 是来自 Microsoft 的任务自动化和配置管理框架。

它具有可扩展的命令外壳和脚本语言，可用于管理或管理 Windows Server、[Exchange](https://en.wikipedia.org/wiki/Microsoft_Exchange_Server)和[SharePoint](http://en.wikipedia.org/wiki/Microsoft_SharePoint) 2010 等服务器环境。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2009-02-05T06:01:06.543

PowerShell is Bash with more annoying syntax.

# html - 了解 CSS 选择器

> ID：514506
> 
> 赞同：3
> 
> 时间：2009-02-05T04:01:14.693
> 
> 标签：html, css, css-selectors

为什么下面的文字使文字变红？

```
#stories li a {color:red}
.default li.expand a {color:green}
li.expand a {color:blue} 
```

* * *

```
<ul id="stories" class="default">
   <li>this is the end</li>
   <li class="expand">this is the end</li> 
```

只有当我将#stories 放在其他人身上时，文本才会改变。# 即使它在 css 中更进一步，它是否具有更多的支配地位？！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-02-05T04:39:04.663

It's a matter of "CSS Specificity". Andy Clarke's article [CSS: Spcificity Wars](http://www.stuffandnonsense.co.uk/archives/css_specificity_wars.html) does a pretty good job explaining it with a little humor. Although Eric Meyer adds more clarity in [his comment](http://www.stuffandnonsense.co.uk/archives/css_specificity_wars.html#comment4).

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-02-05T04:08:14.587

根据[http://htmldog.com/guides/cssadvanced/specificity/](http://htmldog.com/guides/cssadvanced/specificity/)，'#'（一个 id 选择器）具有最高的特异性，所以是的，任何带有 '#' 的东西都会在任何没有的东西之前，如果他们提到对同一件事。

检查该链接以获取更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-05T04:35:14.687

基本：

只要您使用相同的选择器，这是真的：

内联样式的优先级为 1 在 head 中定义的样式具有优先级 2 链接样式表中的样式具有优先级 3

但还有更多的优先规则

如果你只使用链接样式表或在 head 中定义样式，这是真的：

优先级 1：ID（因为只能有一个）
优先级 2：.classes（因为必须添加 .class）
优先级 3：标签（最低优先级，因为没有附加 .class 或 ID）

ID越接近body，优先级越高。

```
<div id="first-id">
  <div id="second-id">
    <div class="someclass">

    </div>
  </div>
</div>

#first-id .someclass {} 
```

节拍

```
.someclass {} 
```

也

```
#second-id .someclass {} 
```

**但**

您可以使用 .someclass 击败 ID

```
.someclass { color:#f00 !important;} 
```

但我不确定 !important 上的浏览​​器支持；

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-05T04:11:25.063

这似乎是它的工作方式（有时令人沮丧），id 选择器比类更*具体。*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-05T04:23:42.293

选择器的工作基于规则的具体程度。一个 id 唯一地标识一个特定的元素，所以它是尽可能具体的。

举个例子：

```
 <ul id="stories" class="default">
   <li>this is the end</li>
   <li class="expand">this is the end</li>
 </ul>
 <ul class="default">
    <li>this is the end</li>
    <li class="expand">this is the end</li>
 </ul>
 <ul>
   <li>this is the end</li>
   <li class="expand">this is the end</li>
 </ul> 
```

如果选择器不能以这种方式工作，您将如何仅针对 #stories 列表？

# wcf - 在新项目中使用 WCF……可行吗？

> ID：514518
> 
> 赞同：2
> 
> 时间：2009-02-05T04:04:52.893
> 
> 标签：wcf, api

我工作的公司开发了一个 C++ 应用程序来管理服务业务（调度、GPS 跟踪、CRM 等）。问题是系统有点太有限了。作为一家相对较小的公司，我们希望拓宽视野并添加一些更现代的功能，例如用于各种其他应用程序（如 Outlook）的 Web 界面和插件，使它们能够与我们应用程序中的数据进行交互。

目前，我正在用 ASP.NET MVC 开发一个 Web 界面，并且已经持续了两个月。然而，这个实现受到了与 C++ 应用程序相同的限制，所以我想更进一步。只是我不确定这是否是一个明智的决定，或者我应该如何说服管理层相信大大增加的开发时间将意味着未来更大的可能性。

我想做的是使用 WCF 实现某种海量 API，允许通过 Web 和桌面应用程序进行访问。我的 Web 界面可能就是这样......并使用诸如 Qooxdoo 或 ExtJS 之类的框架与此 API 交互。但可以添加其他接口，例如 iPhone 应用程序、Adobe AIR 应用程序、iGoogle Widget、Outlook 插件等。

事情是这样的，不过……目前，我只是在说很多话。我对 C# 和 .NET 技术（如 WPF、WinForms、ASP.NET MVC 等）有很好的了解。但是，我一生中从未使用过 WCF。我很确定我可以接受它，但是当我的雇主希望看到快速结果时，是否有可能掌握像 WCF 这样广泛的东西？

我相信我可以展示结果的一种方法是逐步发布 API。例如，第一个“社区技术预览”将包括简单的调度功能，下一个 CTP 将包括销售和营销功能，等等。我真的不认为客户会很快接受它，但它可以让我们在内部开发应用程序，例如 Web 界面和插件。

我看到的一个问题是花费大量时间开发 API，以至于实际使用 API 的应用程序的开发会非常缓慢。我的意思是，我可以向我的老板显示一个返回 JSON 格式的客户列表的 URL，但是如果客户不能用它做任何事情，那对我们真的有什么用呢？

我想我想问的是：放弃对几乎完成的有限 Web 应用程序的开发并开始开发基于 WCF 的 API 以支持未来项目的可行性有多大？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-05T04:13:21.643

好吧，我已经构建了许多 WCF 应用程序，并且入门并不难（有令人讨厌的陷阱，但这就是反复试验的原因！）

也就是说，鉴于您在那里概述的内容，如果您有一些即将完成的事情，并且您的老板追求快速的结果，我建议您不要这样做。如果有可能，为什么不完成您正在处理的应用程序，然后在您已经使用 Web 应用程序的基础上编写一个关于您可以使用 WCF API 完成的文档并将其发送给您的老板/经理？

这不是一个很好的解决方案，因为您当前的 Web 应用程序不会针对它运行，但是（对我而言）最好先得到一些东西，因为设置一个好的 API 的开始并不是我个人喜欢做的事情随着最后期限的临近和很高的期望..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-05T04:13:50.643

好吧，为什么不两者兼得？您可以完成基于 Web 的项目，然后开发 WCF 部分，公开服务端点，以便您可以让不同的应用程序远程连接到它。

然后，如果您真的需要，您可以重构基于 Web 的应用程序以调用 WCF 端点（或者，如果可能，调用它们背后的实现，因为您实际上不需要添加该网络延迟）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-05T04:14:03.157

您听起来好像您的 Web 开发必须完全刷新才能生成您的 WPF 内容。取决于你如何开发它，真的是这样吗？

在开始你的项目之前，我认为你需要在 WCF 上做很多功课，并首先在它中编写更小、更简单的应用程序。在将您的 1.0 版 API 设计强加给您的客户之前先了解一下，否则它真的会成为您所有房屋的瘟疫！

还有一件事……现在是开始真正为您的 API 做 TDD 的好时机。与想要与您的应用程序交互并了解他们的用例并相应地推动您的 API 设计的人合作。在没有消费者的情况下编写单面界面可能不是 IMO 的最佳主意。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-05T05:44:28.760

如果您已经对 C# 非常熟悉，相信您可以在几天内学习 WCF 并实现一个简单的概念验证 WCF 服务。只需从书店中挑选一本好的 WCF 书籍并学习基础知识。您还可以尝试使用 Microsoft 的[Web 服务软件工厂](http://msdn.microsoft.com/en-us/library/bb931187.aspx)按照最佳实践快速构建 WCF 服务。

If you want something even easier and faster, ASMX web services are even easier to create than WCF services. Just make sure your API is using serializable objects, slap a [WebService] attribute on your class, [WebMethod] attribute on your methods, create an ASMX file, and voila, you have a web service! It really is that easy.

# .net - UI 控件库的陷阱

> ID：514533
> 
> 赞同：1
> 
> 时间：2009-02-05T04:11:34.160
> 
> 标签：.net, winforms, controls, user-interface

我正在构建 ac# winform 应用程序，我继承的框架使用来自这个库[LumiSoft](http://lumisoft-ui-controls-1.componentspot.downloadsoftware4free.com/)的 UI 控件这些看起来不错，但老化和错误。以前的开发人员更喜欢它们，因为它们允许的尺寸更小。我最近还免费发现了这些控件：[DevExpress](http://www.devexpress.com/Products/Free/WebRegistration60/)这些更新更全面，功能更齐全。

我的问题是：

1.  如果将两个 ui 控件附加到我的项目有什么缺点？
2.  值得我花时间用 DevExpress 替换所有 Lumisoft 吗？
3.  人们对使用像 DevExpress 这样的 UI 库的一般感受是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-05T04:57:00.010

1）这里的缺点是您最终分发了更多的程序集，因此占用了更大的硬盘空间，因为您使用了两组可能在功能上重叠的控件。根据您的应用程序和目标用户，这可能是也可能不是问题。其次是保持用户界面一致的问题。如果两个库都提供 Office 2007 的外观和感觉，它们的颜色可能不完全匹配，因此您的应用程序可能看起来不一致。

2) 只有您才能知道所花费的时间对于您的项目是否值得。考虑到用来自不同供应商的另一个控件替换控件不太可能是控件类的简单重命名。它们可能有一组不同的属性，因此您需要花时间修改代码，以便再次编译，然后重新测试以确保它按预期工作。除非您的客户要求进行更改，否则与添加新功能所花费的相同时间相比，这样做不太值得。

3) 除非您有一个非常简单的应用程序，否则您几乎可以肯定使用组件库而不是自己编写所有内容来节省时间。这就是为什么 Infragistics、DevExpress、ComponentOne 和许多其他供应商在组件市场上过得很好的原因。此外，还倾向于使他们的库保持最新的外观和感觉，这使得更新您自己的应用程序以模仿相同的外观变得更加容易。

注意还有另一个名为[Krypton Toolkit](http://www.componentfactory.com)的免费控件库，但为了公开，我会指出我自己编写的！所以我偏向于推荐它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-05T05:03:31.980

当我决定使用第三方控件时，我要做的是在我的项目中创建一个自定义控件，作为第三方控件的简单容器。

然后，我创建自己的属性，允许我定义如何完成基础控件的设置和自定义。为什么要这么麻烦？

因为如果我想从第 3 方供应商 A 切换到第 3 方供应商 B，我只需要更改我的自定义控件，所有对供应商 A 控件的引用现在都已消失并替换为供应商 B 控件。

根据您包装的控件的复杂性，这对您来说可能不是一个可行的解决方案。但是，如果您不得不找到所有这些旧控件并将它们切换到其他控件，那么现在可能会提前一点时间可以为您节省任何未来的麻烦，因为您可以找到您更喜欢的其他控件（甚至选择自己实施）。

祝你好运！

# crash - 运行 Windows XP MFC 功能区应用程序的“遇到不正确的参数”

> ID：514535
> 
> 赞同：1
> 
> 时间：2009-02-05T04:11:58.137
> 
> 标签：crash, ribbon

我使用 VS 2008 在 Vista 上开发了一个功能区应用程序。它在 Vista 上运行良好。我静态链接 MFC，以便我也可以在 XP 上运行它。

但是当我在 XP 上运行它时，它会弹出一个对话框，说“所需的资源不可用”。稍后，如果我在此对话框上按 OK，它会显示另一个说“遇到不正确的论点”。许多这样的（“遇到一个......”）对话框（一个接一个）跟随，直到我从任务管理器中终止它。

我注意到的有趣的事情是，当我将鼠标指针放在功能区栏上时，就会发生这种情况。我什么都不做。然后我打开任务管理器，看到使用的内存每秒增加 8 个字节。最终出现了上面的场景。

？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-05T04:21:18.303

很可能该功能区是 Vista 中 Win32 通用控件的一部分（因此在 XP 下不可用）。换句话说，虽然你有静态链接的 MFC，但它可能不是 MFC 持有你正在寻找的资源。

制作社区维基，因为我真的不知道这是否正确:-)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-06T10:15:12.050

我的代码中存在导致此问题的资源泄漏。

我在更新功能区栏控件（ON_UPDATE_COMMAND_UI）时调用了 GetDC()，但没有发布它。使用 ReleaseDC(..) 释放它解决了这个问题。

感谢所有回复。

# binding - 使用 Cayenne 在 IN 子句中绑定整数列表

> ID：514551
> 
> 赞同：2
> 
> 时间：2009-02-05T04:17:12.167
> 
> 标签：binding, apache-cayenne

我正在尝试将整数列表绑定到 SQLTemplate IN 子句中，如下所示：

```
SELECT * FROM table1 WHERE id IN ( #bind($idList) ); 
```

我有一串ID：

```
idList = "1, 2, 3, 4"; 
```

我无法使绑定成功工作，当我将字符串作为要检查的 id 列表传递时，它不返回任何值。

我必须使用字符串连接来运行它（不理想）。

关于如何让它正确绑定的任何想法？

提前致谢。

*（我正在使用 Java/Cayenne/Postgres，并使用作为参数传入的 idList 运行查询，这是一个简化的示例，而不是我正在运行的实际 sql）。*

**更新**我想出了如何去做。下面回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-05T04:35:13.970

好的，我一发布问题就知道该怎么做。

不要使用字符串，而是使用整数列表，如下所示：

```
List<Integer> ids = {1,2,3,4,5} (pseudocode) 
```

要进行绑定，您需要以下内容：

```
SELECT * FROM table1 WHERE id IN ( #bind($idList, 'INTEGER') ); 
```

然后像往常一样传入参数，它就会工作。

# asp.net - 如何检查页面是否已添加书签

> ID：514557
> 
> 赞同：1
> 
> 时间：2009-02-05T04:19:58.383
> 
> 标签：asp.net, web

无需使用 ActiveX 或其他类型的客户端编码：

是否可以确定网站的访问者是通过书签还是主页到达页面？

我个人认为这是不可能的，但我想确定或证明是错误的。

我现在做这样的事情的方式是：

```
Request.UrlReferrer 
```

如果我在那里找不到任何东西，我目前推断用户已将我添加为书签。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-05T04:29:39.380

不是万无一失的方法。但是，您可以将书签设置为具有查询字符串。例如 stackoverflow.com/?bmark=y

在服务器端，您可以检查这一点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-05T04:25:01.447

简短的回答，不。

长答案，不是便携式万无一失的方式。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-05T12:57:13.253

与 Pax 相同的简短答案。

长答案...不幸的是，在 IE 中在某种程度上是可能的。您可以使用[saveFavorite](http://msdn.microsoft.com/en-us/library/ms531069(VS.85).aspx)持久性行为来尝试存储一些数据，然后查看是否稍后将其取回。如果这样做，则您的页面加载来自书签。

您还可以检测您的页面是否是用户的主页——尽管这并不一定意味着他们使用该方法到达了您的页面——在[homePage 行为](http://msdn.microsoft.com/en-us/library/ms531418(VS.85).aspx)上使用 isHomePage 方法。

不过，请不要。这是非常可怕的。IE 的“默认行为”对 Web 来说是可憎的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-05T13:08:21.297

没有，但它需要一个点击流数据仓库，它还以足够的速度解析您的网络服务器日志文件。

我见过的大多数都在 +24 小时例程中对日志文件进行 ETL，所以最好的猜测是这个访问者上次在那里使用了书签。但是，如果您看到他们是否使用书签对业务很重要，则可能有 +Mins ETL 的情况

但这也不是万无一失的，您会遇到 IP 地址范围等问题，但是......

可以使用收藏图标，因为这将是网络服务器上获取 IP 的请求，您也可以绑定该 IP 以登录或其他跟踪机制

# .net-3.5 - 在未安装 .Net Framework 的情况下运行 c# 3 应用程序？

> ID：514564
> 
> 赞同：3
> 
> 时间：2009-02-05T04:21:43.623
> 
> 标签：.net-3.5, deployment, c#-3.0, frameworks

这似乎是一个愚蠢的问题，但是使用 c# 3 (.Net Framework 3.5) 构建的应用程序可以构建并部署到没有安装 3.5 框架的机器上吗？即 bin 部署是否适用于 System.Core 和其他 3.5 dll？

我真的很想使用 lambdas、linq、Func 等构建我的应用程序，但我的客户不允许在他们的机器上安装 3.0 或 3.5 框架（他们确实安装了 2.0 框架）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-02-05T06:10:53.013

您可以使用 C# 3.0 并以 .NET 2.0 为目标。以下 C# 3.0 功能完美运行：

*   隐式类型的局部变量 (var)
*   匿名类型
*   转换为委托的 Lambda 表达式（尽管您不会有 Func/Action 委托 - 不过您可以自己定义这些）
*   集合初始化器
*   对象初始化器
*   隐式类型数组
*   部分方法
*   自动属性

扩展方法需要 System.Core 中的属性，但您可以定义自己的属性。如果可以调用正确的方法，则查询表达式将起作用 - 例如，您可以部署[LINQBridge](http://www.albahari.com/nutshell/linqbridge.aspx#ggviewer-offsite-nav-28314856)并且仍然拥有 LINQ to Objects。

不幸的是，表达式树根本不起作用。

有关更多信息，请参阅[我关于 .NET 版本](http://csharpindepth.com/Articles/Chapter1/Versions.aspx)的文章。

不要尝试在 2.0 系统之上部署 3.0 或 3.5 的*位。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-05T04:28:22.657

不，这是不可能的。它不像复制正确的 dll 并将它们与您的应用程序一起发送那么简单。

话虽如此，如果您的应用程序没有使用很多“新”功能，您可以使用 Mono 来部署您的应用程序。Mono 是一个开源的，我猜它的头部比 .net 框架要小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-05T04:32:23.943

这可以通过一些应用程序虚拟化产品来完成。我知道我们在几年前使用[Thinstall](http://www.thinstall.com/solutions/net_virtual.php)来部署一个 .Net 应用程序，而无需强制用户安装 .net（它是一个 CD 自动播放应用程序）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-05T06:23:46.920

我不确定，但我认为您可以尝试[在 Mono 中进行静态编译](http://tirania.org/blog/archive/2008/Nov-05.html "Mono 中的静态编译")

# com - COM 和 OLE 有什么区别？

> ID：514598
> 
> 赞同：58
> 
> 时间：2009-02-05T04:40:17.877
> 
> 标签：com, ole, dde

COM 和 OLE 之间有什么区别（如果有）？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-01-19T16:35:32.843

*   OLE = 对象链接和嵌入
*   DDE = 动态数据交换
*   COM = 组件对象模型

**OLE：**这是一种将一个文档的部分链接到另一个文档的部分的方法。例如，有一张嵌入了 Excel 图表的 PowerPoint 幻灯片。当 Excel 电子表格更新时，图表也应该更新。当您重新打开 PowerPoint 时，它神奇地出现了！（此示例是链接对象。）嵌入对象相同，只是 Excel 电子表格不存在于外部文件中，电子表格的数据包含在 PowerPoint 文件中。

您可以通过链接对象将 Excel、Word 和 PowerPoint 文档相互嵌入。其他应用程序是专门为支持嵌入 Word 而编写的，例如 Microsoft Equation Editor。

**OLE 1**建立在 DDE 之上，它使用窗口消息在源数据更改时通知应用程序，并且通常使用 HGLOBAL 全局内存句柄传递数据。

**OLE 2**建立在 COM 之上。

**COM**是一种语言中立的、面向对象的组件模型和基于 DCE RPC 的 ABI。作为一个 RPC 系统，它支持同一台机器上的进程之间的远程调用，以及后来使用 DCOM 在不同机器上的远程调用。最初，COM 被用作 MAPI 体系结构的一部分（它使用 COM 对象模型，但不使用 COM 注册服务），然后作为具有注册和对象激活和其他服务的通用对象模型自己正式启动。（例如，名称和结构化存储。）

**OLE 自动化**与 OLE 无关 - 它只是一个品牌连接。OLE 自动化是 COM 的 Visual Basic 兼容子集，它仅支持基本数据类型（例如无符号整数或结构），但包括对象（COM 接口）。

**然而， OLE 控件**与 OLE 相关。从 VB 4 开始，它们是主要针对 Visual Basic 用户的可视化组件，但可视化元素是使用 OLE 2 的嵌入工具提供的。它们也可以由任何能够承载 OLE 2 的东西承载（理论上，如果编写得当）嵌入式对象，也经常用于 C++ 应用程序。他们通常使用 OLE 自动化兼容接口在运行时进行编程。

**ActiveX 控件**是 COM 对象的营销术语，从 Microsoft 试图普及扩展 Web 应用程序的技术开始。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-02-05T04:47:37.317

COM是OLE演变而来的。OLE 是一组接口和数据存储机制，用于促进应用程序之间的数据共享。COM 是使用接口的自然扩展，不仅可以共享数据，还可以共享运行时功能——其中数据以实际机制为前端，以方便使用。我一直把它大致描述为 C 和 C++ 之间的区别，在 C 中，您可以共享头文件和结构，而在 C++ 中，您可以共享封装的对象。

作为一个肥皂盒，我仍然怀念 OLE 结构化存储，因为在协作系统之间共享不透明数据存储有一些好处。看到拖放/剪贴板仍然依赖它，我想知道 .Net 替代品会是什么？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-05T04:49:39.933

OLE 技术比 COM 作为一个单独的实体早了很长一段时间。在此之前，OLE 被实现为嵌入和链接对象的一种方式。典型的例子是在 Word 文档中嵌入电子表格。启用了 COM 的底层技术，以便 VB 等其他语言也可以与这些对象进行交互。

然后，从历史上看，我们有很多服务器类型的程序员羡慕地看着这些很酷的东西，比如语言独立性、引用计数和线程模型，但实际上根本不关心嵌入技术。合乎逻辑的做法是将底层服务器功能拆分为 COM——这是一个更自然的低级 API。

这两种技术仍然存在。如今，OLE 与 ActiveX 有某种联系或可能与 ActiveX 相同。

# sql - 数据库表中的键/值对

> ID：514603
> 
> 赞同：11
> 
> 时间：2009-02-05T04:42:19.167
> 
> 标签：sql, sql-server, tsql, entity-attribute-value

我需要在我的数据库中设计一个键/值表，我正在寻找有关最佳方法的指导。基本上，我需要能够将值与一组动态的命名属性相关联，并将它们应用于外部键。

我需要能够支持的操作是：

*   将键/值对应用于一组项目
*   枚举所有当前活动的键
*   确定具有给定键值的所有项目
*   确定与给定键关联的值与某些条件匹配的所有项目。

似乎最简单的方法是定义一个表：

```
CREATE TABLE KeyValue (
  id    int,
  Key   varchar...,
  Value varchar...
); 
```

看来我可能会在 Key 列中复制大量数据，因为我可能会为大量文档定义任何给定的键。用整数查找替换 Key varchar 到另一个表中似乎可以缓解这个问题（并使枚举所有活动键的效率显着提高），但让我遇到了维护该查找表的问题（只要我想就插入它）定义一个属性并可能在任何时候清除键/值时删除条目）。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2009-02-08T03:17:33.920

您正在使用一个名为[Entity-Attribute-Value](http://en.wikipedia.org/wiki/Entity-attribute-value_model)的数据库模型。这是在关系数据库中存储键/值对的常用方法，但在数据库规范化和效率方面存在许多弱点。

是的，您展示的表格设计是最常见的方法。在此设计中，每个实体的每个属性在`KeyValue`表中都有不同的行。

**将键/值对应用于一组项目：**您需要为组中的每个项目添加一行。

```
INSERT INTO KeyValue (id, key, value) VALUES (101, 'color', 'green');
INSERT INTO KeyValue (id, key, value) VALUES (102, 'color', 'green');
INSERT INTO KeyValue (id, key, value) VALUES (103, 'color', 'green'); 
```

您还可以准备带有参数的 INSERT 语句，并在循环中运行多个项目 ID，或其他任何方式。

**枚举所有当前活动的键：**

```
SELECT DISTINCT Key FROM KeyValue; 
```

**确定具有给定键值的所有项：**

```
SELECT id FROM KeyValue WHERE Key = 'color'; 
```

**确定与给定键关联的值与某些条件匹配的所有项目：**

```
SELECT id FROM KeyValue WHERE Value = 'green'; 
```

Entity-Attribute-Value 的一些问题是：

*   无法确保所有项目的键拼写相同
*   没有办法对所有项目强制使用某些键（即传统表设计中的 NOT NULL）。
*   所有键都必须使用 VARCHAR 作为值；不能为每个键存储不同的数据类型。
*   无法使用参照完整性；无法制作适用于某些键值而不适用于其他键值的 FOREIGN KEY。

基本上，Entity-Attribute-Value 不是规范化的数据库设计。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-02-06T19:20:13.417

除非必须，否则不要优化它。密钥的平均长度是多少？如果您以幼稚的方式实现它，这张表会不会太大而无法全部放入服务器的内存中？我建议以最简单的方式实现它，衡量性能，然后仅在性能出现问题时重新实现。

如果性能是一个问题，那么使用整数键和单独的表可能是可行的方法（整数列上的 JOINS 通常比使用可变长度字符串列的 JOINS 快）。但是优化的第一条规则是测量优先——确保你所谓的优化代码确实让事情运行得更快。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-05T04:50:03.550

一个可能值得探索的选项是在将密钥插入表之前使用 SHA1 或 MD5 对其进行消化。

这将允许您摆脱查找表，但您将无法遍历键，因为它只有一种方式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-05T04:51:28.773

创建[可更新的视图！](http://msdn.microsoft.com/en-us/library/aa258253(SQL.80).aspx). 另[请查看](http://www.novicksoftware.com/UDFofWeek/Vol2/T-SQL-UDF-Vol-2-Num-37-updatable-view.htm)此示例。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-05T05:13:44.533

It seems to me like you might have a couple design choices.

Choice 1: A two table design you hinted at in your answer

```
Keys (
 id int not null auto_increment
 key string/int
)
values (
 id int not null auto_increment
 key_id int
 value string/varchar/int
) 
```

Choice 2: perhaps as sambo99 pointed out you could modify this:

```
keys (
 id int not null auto_increment
 key string/int
 hash_code int -- this would be computed by the inserting code, so that lookups would effectively have the id, and you can look them up directly
)

values (
 id int not null auto_increment -- this column might be nice since your hash_codes might colide, and this will make deletes/updates easier
 key_id int -- this column becomes optional
 hash_code int
 value string/varchar/int...
) 
```

--

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-09T20:39:46.550

键值对一般不是关系数据库的好用处。关系数据库的好处是随之而来的约束、验证和结构。通过在表中使用通用键值结构，您将失去使关系数据库良好的验证和约束。如果您想要灵活地设计键值对，最好使用像 MongoDB 或类似的 NoSQL 数据库。

当底层数据是非结构化、不可预测或经常变化时，键值对（例如 NoSQL 数据库）效果最好。如果您没有结构化数据，那么关系数据库将比它的价值更麻烦，因为您将需要进行大量架构更改和/或跳过箍以使您的数据符合不断变化的结构。

KVP / JSON / NoSql 很棒，因为对数据结构的更改不需要完全重构数据模型。将字段添加到您的数据对象只需将其添加到数据中即可。另一方面，KVP / Nosql 数据库中的约束和验证检查比关系数据库少，因此您的数据可能会变得混乱。

关系数据模型具有性能和节省空间的优势。规范化的关系数据可以更容易地理解和验证数据，因为有表键关系和约束可以帮助您。从长远来看，这将使您的应用程序更易于维护和支持。另一种方法是在代码中使用数据抽象层，例如用于 Python 的 Django 或 SQL Alchemy，用于 .NET 的实体框架。这样，当您的代码更改时，您的数据库将自动随之更改。

我见过的最糟糕的模式之一是试图同时拥有它。试图将键值对放入关系数据库通常会导致灾难。我建议使用最适合您数据的技术。

# asp.net - 如何读取 XML 文档中的多条记录

> ID：514609
> 
> 赞同：0
> 
> 时间：2009-02-05T04:48:26.113
> 
> 标签：asp.net, xml

我可以使用我拥有的一些代码从 Xml 中读取一条记录，但是您如何在 xml 文件中读取多个记录，例如：

```
<?xml version="1.0" encoding="UTF-8"?>

<XXX_XXX_response xmlns="http://example.com/1.0/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://example.com/1.0/ http://example.com/1.0/XXX.xsd" list="true">

  <album>

    <id>7031990242326938677</id>

    <pid>7031990241327042549</pid>

    <owner>1642262814</owner>

    <location>CA</location>

  </album>

  <album>

    <id>7031994332086936240</id>

    <pid>703199322241087005994</pid>

    <owner>1633262814</owner>

    <location/>

  </album>

  <album>

    <id>7031990241086937544</id>

    <pid>7031990241087026027</pid>

    <location/>

  </album>

  <album>

    <id>70319902431086936188</id>

    <pid>7033490241087005114</pid>

    <owner>1633262814</owner>

    <location/>

  </album>

</XXX_XXX_response> 
```

您如何遍历每个专辑以及之后保存该数据的好容器（什么样的列表对象等）？不，我不是在说 DataSet (puke)

我不是一定要寻找确切的代码（如果你有它，谢谢），而是一篇与.NET 中读取多条记录相关或显示示例的文章。

我试图想出最理想的轻量级对象来存储每条记录，以便以后可以遍历它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-05T05:16:41.423

You can read the xml like this and store objects of class Album in a generic list.

```
List<Album> albums = new List<Album>();
XmlDocument xmlDoc = new XmlDocument();
xmlDoc.Load("MyXml.xml");
XmlElement root = doc.DocumentElement;
XmlNodeList nodes = root.SelectNodes("/album"); 
foreach (XmlNode node in nodes)
{   
    Album album = new Album();
    album.id = node["id"].InnerText;
    albums.Add(album);
} 
```

Here's how to search the list [search-for-object-in-generic-list](https://stackoverflow.com/questions/200151/search-for-object-in-generic-list)

Here's how to sort the list [How to sort a generic List](http://dotnetslackers.com/Community/blogs/simoneb/archive/2007/06/20/How-to-sort-a-generic-List_3C00_T_3E00_.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-05T05:06:36.997

XPathDocument (CreateNavigator) & XPathNavigator are the classes you can use.

Also, XPathNavigator has Select method which takes XPath expression (e.g. //album)
Above XPath expression means - get me all the nodes named album anywhere in the document.

Hope this gives you pointers on where to look for

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-05T07:00:44.567

当我需要快速做事时，我总是使用 XmlTextReader，这是解析 XML 文档的最快（仅转发）方法。

# regex - 正则表达式：HTML 白名单

> ID：514610
> 
> 赞同：1
> 
> 时间：2009-02-05T04:48:29.730
> 
> 标签：regex

由于对正则表达式的薄弱，我一直在与他们一起改进。我一直在尝试做的一个概念是删除除了允许的列表之外的所有 HTML 元素。

我设法做相反的事情——删除指定的元素列表：

```
<\/?(strong|em|a)[^>]*> 
```

但是我想要相反的，并删除每个元素但是。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-05T12:39:20.870

不要使用正则表达式来解析 [X]HTML。

绝对不要使用正则表达式来解析 [X]HTML 作为安全措施。

HTML 解析器（或 tidier 后跟 XML 解析器）是唯一可行的白名单方法。

> /<(.|\n)*?>/g 匹配所有 HTML 标签对，包括标签中的属性

不。

```
<a href=">" onmouseover="attackCode()"> 
```

以及其他一千种可能性，包括有效的和格式错误的，但浏览器仍然会理解它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-05T05:49:48.407

[不要尝试使用正则表达式进行解析](http://kore-nordmann.de/blog/do_NOT_parse_using_regexp.html)

而是使用[真正的解析器](http://grom.zeminvaders.net/html-sanitizer)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-05T04:51:14.033

假设 PCRE，使用 (?! *elements* ) 而不是 ( *elements* )。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-05T07:09:08.543

```
/<(.|\n)*?>/g 
```

[匹配所有 HTML 标签对，包括标签中的属性](http://www.pagecolumn.com/tool/all_about_html_tags.htm)

排除标签 strong 和 em

```
(?!strong|em) 
```

匹配所有 HTML 标记对，但 strong 和 em

```
<((?!strong|em).|\n)*?> 
```

# python - 随机名称生成器策略 - 帮我改进它

> ID：514617
> 
> 赞同：4
> 
> 时间：2009-02-05T04:51:24.623
> 
> 标签：python, mysql, random, web.py

我有一个使用 web.py 在 Python 中做的小项目。它是一个名称生成器，使用名称 ( `firstname, middlename, anothername, surname`) 的 4 个“部分”。名称的每一部分都是 MySQL 数据库中的实体集合（`name_part (id, part, type_id)`和`name_part_type (id, description)`）。基本的东西，我猜。

我的生成器随机选择每个“类型”的条目，并组合一个滑稽的名字。现在，我`select * from name_part where type_id=[something] order by rand() limit 1`用来选择每种类型的随机条目（所以我也有 4 个查询运行每个网页浏览，我认为这比一个可能返回数百行的胖查询要好；如果您对如何拉这在一个查询中关闭，我会听 oa sproc）。

显然我想让这更随机。实际上，我想给它更好的覆盖范围，而不一定是随机性。我想确保它使用尽可能多的可能性。这就是我在这个问题中要问的问题，**我可以使用什么样的策略来覆盖大量随机样本**？

我的想法是在每个 上实现一个计数器列`name_part`，并在每次使用时递增它。我需要一些逻辑然后说：“获取一个小于此“name_part_type”的最高“计数器”的name_part，除非没有然后随机选择一个”。我不太擅长SQL，这种逻辑可能吗？我能想到的唯一方法是名称的每个部分最多需要 3 或 4 个查询（因此每个网页浏览最多 12 个查询）。

我可以在这里得到一些关于我的逻辑的输入吗？我是不是想多了？这实际上听起来很适合存储过程......但是你们至少可以帮我解决如何在没有存储过程的情况下做到这一点吗？（我不知道我是否可以将存储过程与 web.py 的内置数据库一起使用）。

我希望这不是非常愚蠢，但提前感谢。

编辑：除了我的具体问题之外，我仍然很好奇是否有任何我可以使用的替代策略可能会更好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-05T04:57:45.563

我想你追求的是：

```
select * from name_part
    where type_id=[something]
    order by used_count asc, rand()
    limit 1 
```

这会将较少使用的名称放在列表的顶部，如果有多个具有相同（最低）used_count 的名称，它们将随机排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-05T05:05:00.603

我同意您的直觉，即使用存储过程是正确的方法，但是，我几乎总是尝试在数据库中实现数据库的东西。

在你的过程中，我会引入某种逻辑，比如说，只有 30% 的机会返回结果实际上会增加计数器。只是为了增加可变性。

# regex - mod_rewrite 正则表达式仅在某个字符串不存在时匹配

> ID：514621
> 
> 赞同：7
> 
> 时间：2009-02-05T04:51:59.460
> 
> 标签：regex, apache, mod-rewrite

查看我的服务器日志，我看到我网站上的很多页面都在请求各种不同目录中的 、 、`favicon.ico`等`favicon.jpg`。`favicon.png`

我不是在每个页面中涉水试图找出每个不正确的请求来自哪里，而是在编写一些 apache 重定向规则来更改对包含`"favicon"`重定向到的任何 url 的请求`/favicon.ico`

我最初的天真尝试是这样的：

```
RewriteRule favicon /favicon.ico [R=301,L] 
```

但这意味着当您实际请求时`/favicon.ico`，它会将您送入无限重定向循环。

基本上我认为我需要的是一个具有这种效果的正则表达式：

```
| Request                | Response     |
|------------------------|--------------|
| favicon.png            | /favicon.ico |
| directory/favicon.png  | /favicon.ico |
| directory/favicon.ico  | /favicon.ico |
| favicon.ico            | <no match>   | 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-02-05T20:07:13.183

我建议进行一些更改以更改[Alex 的出色答案](https://stackoverflow.com/a/514633/31671)：

保持本节相同：

```
RewriteCond %{REQUEST_URI} !^/favicon\.ico [NC] 
```

在请求结束时检查的不仅仅是 .ico 扩展名：

```
RewriteCond %{REQUEST_URI} favicon\.(ico|png|gif)$ [NC] 
```

添加获取当前请求主机名的第三个条件：

```
RewriteCond %{HTTP_HOST} (.+) 
```

最后将最后一个 RewriteRule 更改为使用 %1 （[表示最后匹配条件的反向引用](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritecond)）：

```
RewriteRule (.*) http://%1/favicon.ico [R=301,L] 
```

最终结果将如下所示：

```
RewriteCond %{REQUEST_URI} !^/favicon\.ico [NC]
RewriteCond %{REQUEST_URI} favicon\.(ico|png|gif)$ [NC]
RewriteCond %{HTTP_HOST} (.+)
RewriteRule (.*) http://%1/favicon.ico [R=301,L] 
```

希望这可以帮助某人...

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-02-05T05:01:24.883

试试这个

```
RewriteCond %{REQUEST_URI} !^/favicon\.ico [NC] # if not already going to favicon.ico
RewriteCond %{REQUEST_URI} favicon\.ico [NC] # edit this line to match your favicon matching regex
RewriteRule (.*) http://www.domain.com.au/favicon.ico [R=301,L] #redirect to the real address 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T03:00:54.523

在我的头顶上：

```
RewriteRule favicon[.](\w*)$ /favicon.ico [L] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-05T19:36:25.240

我会使用这个规则：

```
RewriteCond %{REQUEST_URI} !^/favicon\.ico$
RewriteRule favicon /favicon.ico [L,R=301] 
```

# http - 浏览器扩展思路：通过 Web 表单提供 HTTP Auth 值

> ID：514634
> 
> 赞同：2
> 
> 时间：2009-02-05T05:01:33.247
> 
> 标签：http, firefox, browser, rest

我想提出一个想法。十多年来，我一直在构建 Web 服务和 Web 应用程序，最近一直专注于提供尽可能 RESTful 的服务（例如，对浏览器和 API 客户端使用相同的 URI，但让它们修改接受：决定是发送 XML 还是 XHTML）。

使用带有 RESTful 服务的 Web 浏览器的一大症结在于跟踪私有方法上的用户状态。最好的方法是让客户端提供 HTTP 身份验证令牌，但没有多少客户或用户喜欢在浏览器中收到 HTTP 身份验证框的提示，尤其是当他们习惯于基于 Web 表单的登录时。

HTTP auth 还存在其他问题，例如过期支持不佳，但在其他方面比 cookie 会话要好得多。

我的想法是通过执行以下操作允许 Web 表单提交 HTTP 身份验证信息：

*   提供 2 种新的 HTML 输入表单类型，即 type='username' 和 type='auth'
*   当这些类型包含在表单中时，浏览器会将值与请求一起作为 HTTP 身份验证字段而不是 POST 或 GET 值发送到表单 URI。

这可能意味着我们可以同时拥有 RESTful 用户身份验证，但没有标准的浏览器登录框。我已经设计了一个肮脏的 Firefox 插件的原型，可以做到这一点，但目前只支持 BASIC auth（它最终将与 Digest 一起使用）。

我可以看到的问题是这个想法是否行得通，是否将其标准化和批准，以便所有浏览器都支持它以及标准的丑陋盒子。

有人对这个想法有任何反馈，或者知道任何类似的努力吗？

我有一个即将推出的内部网项目，我几乎很想完成插件（以及客户端 SSL 证书支持）并将其用作测试。

我找不到类似的东西，除了几个小项目，其中开发人员使用 Javascript 从表单中读取用户名和密码，然后将它们用作 XMLHTTPRequest 中的 http auth 令牌

## 进一步 - 下一步

在对此进行了大量研究之后，我决定将 1999 年的模板作为向 WHATWG for HTML5 提交的新提案的基础。主要焦点应该是：

*   RESTful
*   方便使用的
*   安全（即支持摘要，不是基本的）
*   向后兼容（即不会破坏以前的版本）
*   完整的原型
*   征求更多反馈

如果其他人（感谢 Julian 的指点）在评论或反馈或任何其他考虑方面有任何补充，请告诉我。一旦我把它排好，我会写博客。

Stackoverflow 可能是这些类型的想法和建议的好地方。

## 堆栈溢出问题

我如何在 Stackoverflow 上引起更多关注 - 大多数人是否使用标签浏览？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-05T08:39:11.403

W3C HTML 工作组（参见[http://www.w3.org/html/wg/tracker/issues/13）、WHAT](http://www.w3.org/html/wg/tracker/issues/13) WG 和 IETF（参见 Internet-Draft [https:// datatracker.ietf.org/doc/html/draft-broyer-http-cookie-auth-00](https://datatracker.ietf.org/doc/html/draft-broyer-http-cookie-auth-00)）。

我建议关注 IETF 讨论（邮件列表： http: [//lists.osafoundation.org/pipermail/ietf-http-auth/](http://lists.osafoundation.org/pipermail/ietf-http-auth/)）。

# xml - Represent space and tab in XML tag?

> ID：514635
> 
> 赞同：54
> 
> 时间：2009-02-05T05:02:00.813
> 
> 标签：xml, tags, special-characters, w3c

How can space and tab be represented in an XML tag?

Are there any special characters that can represent them?

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2009-02-05T05:13:37.030

I think you could use an actual space or tab directly in XML document, but if you are looking for special characters to represent them so that text processors can't mess them up, then it's:

```
space = &#032;
tab   = &#009; 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-06-18T05:38:11.093

为我工作

```
\n = &#xA;
\r = &#xD;
\t = &#x9;
space = &#x20; 
```

这是一个关于如何在 XML 中使用它们的示例

```
<KeyWord name="hello&#x9;" /> 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2017-10-09T00:10:17.350

^(*对一个老的、常见的问题的新的、扩展的答案......*)

## *XML 组件名称*中的空格

 ***摘要：** *XML 元素或属性名称中不允许使用****空格****字符。*

 **以下是与空格相关的主要 Unicode 代码点：

*   `#x0009`字符表
*   `#x0020`空间
*   `#x000A`换行 (LF)
*   `#x000D`回车 (CR)
*   `#x00A0`无休息空间
*   `[#x2002-#x200A]`EN SPACE 到 HAIR SPACE
*   `#x205F`中等数学空间
*   `#x3000`表意空间

*[W3C XML BNF](https://www.w3.org/TR/xml/#NT-NameStartChar)不允许这些代码点*用于*XML 名称：*

 *> ```
> NameStartChar ::= ":" | [A-Z] | "_" | [a-z] | [#xC0-#xD6] | [#xD8-#xF6] |
>                   [#xF8-#x2FF] | [#x370-#x37D] | [#x37F-#x1FFF] |
>                   [#x200C-#x200D] | [#x2070-#x218F] | [#x2C00-#x2FEF] |
>                   [#x3001-#xD7FF] | [#xF900-#xFDCF] | [#xFDF0-#xFFFD] |
>                   [#x10000-#xEFFFF]
> NameChar      ::= NameStartChar | "-" | "." | [0-9] | #xB7 | [#x0300-#x036F] |
>                   [#x203F-#x2040]
> Name          ::= NameStartChar (NameChar)* 
> ```

* * *

## *XML 内容*中的空格（不是组件名称）

**简介：** *当然，在 XML 内容中允许使用****空白****字符。*

 **[W3C XML BNF`Char`](https://www.w3.org/TR/xml/#charsets)允许在 XML 内容中使用上述所有空白代码点：

> ```
> Char ::= #x9 | #xA | #xD | [#x20-#xD7FF] | [#xE000-#xFFFD] | [#x10000-#x10FFFF]
> /* any Unicode character, excluding the surrogate blocks, FFFE, and FFFF. */ 
> ```

Unicode 代码点可以作为[字符引用](https://www.w3.org/TR/xml/#sec-references)插入。支持十进制`&#`十进制`;`和十六进制十六`&#x`进制`;`形式。

*   **十六进制**  **Unicode**  **名称**
*   `&#x09;`   或   `&#09;`     [字符表](https://codepoints.net/U+0009)
*   `&#x0A;`   或   `&#10;`     [换行 (LF)](https://codepoints.net/U+000A)
*   `&#x0D;`   或   `&#13;`     [回车 (CR)](https://codepoints.net/U+00A0)
*   `&#x20;`   或   `&#32;`     [空间](https://codepoints.net/U+0020)
*   `&#xA0;`   或   `&#160;`   [无休息空间](https://codepoints.net/U+00A0)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2009-02-05T09:45:07.120

您不能在 XML 元素的**标记**（即名称）中包含空格和制表符，请参阅规范：[http](http://www.w3.org/TR/REC-xml/#NT-STag) ://www.w3.org/TR/REC-xml/#NT-STag 。除字母数字字符外，名称中允许使用冒号、下划线、破折号和点字符，且首字母不能是破折号或点。某些 unicode 字符也是允许的，实际上没有仔细检查，我会说这些是国际字母。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-02-05T12:33:52.583

如果您正在谈论从**属性值**中专门去除多个和非空格空白字符的问题，那么是的，将它们编码为字符引用，例如 会修复它。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-12-10T12:48:00.043

对我来说，为了让它工作，我需要在 CDATA xml 元素中编码空间的十六进制值，以便解析后它加起来就像在 htm webgae 中一样，在浏览器中查看时只显示一个空格！。（以上所有想法和答案都很有用）

```
<my-xml-element><![CDATA[&#x20;]]></my-xml-element> 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-06-10T14:26:32.803

非法 XML 标记名称字符可以使用 Unicode UCS-2 进行编码。这非常有效。我正在使用它来创建转换为 json 的 XML（与 XPath 相比，JPath 较弱）。*注意空格、(,) 字符的处理。* Unicode UCS-2 代码表： http: [//www.columbia.edu/kermit/ucs2.html](http://www.columbia.edu/kermit/ucs2.html)

```
 tag.Name = tag.Name.Replace(" ", "_x0020_");
        tag.Name = tag.Name.Replace("(", "_x0028_");
        tag.Name = tag.Name.Replace(")", "_x0029_"); 
```

XML:

```
 <Internal_x0020_Chargeback_x0020_ID>{CHARGEBACKCODE}</Internal_x0020_Chargeback_x0020_ID>
  <Bill_x0020_To>{CHARGEBACKCODE}</Bill_x0020_To>
  <Operator_x0020_or_x0020_Directly_x0020_Responsible_x0020_Individual_x0020__x0028_DRI_x0029_>zzz@yyy.gov</Operator_x0020_or_x0020_Directly_x0020_Responsible_x0020_Individual_x0020__x0028_DRI_x0029_> 
```

通过 json.net 转换为 json：

```
 "Internal Chargeback ID": "{CHARGEBACKCODE}",
    "Bill To": "{CHARGEBACKCODE}",
    "Operator or Directly Responsible Individual (DRI)": "xxx@yyy.gov", 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-11-05T23:07:33.893

我遇到了同样的问题，以上答案都没有解决问题，所以我尝试了一些非常简单的方法：我只是把我的`strings.xml` `\n\t`

完整的字符串如下所示`<string name="premium_features_listing_3">- Automatische Aktualisierung der\n\tDatenbank</string>`

结果是：

*   自动化操作

    日期银行

（中间没有多余的线）

也许它会帮助别人。问候

# .net - 是否可以使用 VS.NET 2008 构建 .NET 1.1 应用程序？

> ID：514636
> 
> 赞同：1
> 
> 时间：2009-02-05T05:02:02.420
> 
> 标签：.net, visual-studio-2008

我将为我的客户维护一个现有的 .NET 1.1 应用程序。VS.NET 2008 似乎无法开箱即用地构建 .NET 1.1 项目，但我不想仅为这个特定项目安装 VS.NET 2003。是否可以使用 VS.NET 2008 进行 .NET 1.1 开发？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-05T05:06:06.420

根据我的经验，快速回答是“不”。我强烈建议您安装 VS.Net 2003，因为它可以与 2008 共存（我们在这里的所有机器上都这样做）。

即使您在 2008 年从命令行构建它，您仍然会错过所有 IntelliSense 和向导。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-05T05:06:10.680

根据 Luke H 的博客，没有：

> 否 - Visual Studio 2008 不支持面向 .Net Framework 1.1。这是我们真正希望能够支持的东西——因为我们知道有很多 .NET 开发人员在开发 .NET 1.1 应用程序。但是，返回并支持 .NET 1.1 会更加困难，因为它是一个完全不同的运行时。
> 
> 因此，为了适应这个版本，最终决定要么根本不支持多目标，要么只支持 .NET2.0 和更高版本。因为我们真的希望 Visual Studio 2008 成为至少适用于 .NET 3.0 和 .NET 3.5 的出色工具 - 我们决定在此版本中提供我们可以适应的最多的多目标支持。

[http://blogs.msdn.com/lukeh/archive/2007/06/29/net-framework-multitargeting-in-visual-studio-2008-aka-orcas.aspx#3627411](http://blogs.msdn.com/lukeh/archive/2007/06/29/net-framework-multitargeting-in-visual-studio-2008-aka-orcas.aspx#3627411)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-05T05:34:46.003

如果你真的需要以 1.1 为目标，只需确保不使用任何 2.0 特性，例如泛型和大量其他好东西，然后使用 1.1 目录中的 csc.exe 或 vbc.exe 编译器进行编译。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-05T05:58:31.540

我[最近发布了一个关于将 ASP.NET 1.1 项目升级到 3.5 的类似问题](https://stackoverflow.com/questions/477266/is-there-a-relatively-painless-upgrade-path-from-asp-net-1-1-to-3-5)，最后决定只使用导入向导将项目升级到 VS 2008。这个过程非常简单。就我而言，对于一个由几十个 Web 表单组成的相对简单的 Web 项目，这个过程只用了几分钟，之后在测试中没有遇到任何异常，我松了一口气。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-08T10:26:41.433

如果您的代码符合某些要求，

1.  不偏，
2.  没有泛型，
3.  ……

您可以在这里试用 MSBee

[http://www.codeplex.com/MSBee](http://www.codeplex.com/MSBee)

这将是非常复杂的，而安装 VS2003 是一个更容易的选择。

# c++ - 分支还是乘法更有效？

> ID：514637
> 
> 赞同：9
> 
> 时间：2009-02-05T05:02:15.273
> 
> 标签：c++, c, optimization, if-statement, branch

我正在尝试优化一个小型、高度使用的函数，它使用 unsigned short int 中的高位来指示要加在一起的数组的值。起初我使用的是如下所示的明显方法。请注意，循环展开没有明确显示，因为它应该由编译器完成。

```
int total = 0;
for(unsigned short mask = 0x0001, j = 0; mask != 0; mask <<= 1, j++){
    if (i & mask){
        total += value[j];
    }
} 
```

但是，后来我认为最好删除分支以帮助 CPU 流水线化并提出以下建议。

```
int total = 0;
for(unsigned short mask = 0x0001, j = 0; mask != 0; mask <<= 1, j++){
    total += ((i & mask) != 0) * value[j];
} 
```

请注意，由于 (i & mask) 不会产生布尔答案，因此与 0 的比较会强制结果为 1 或 0。虽然第二种方法消除了这部分代码中的 if 语句，但第二种解决方案需要除了方程的其余部分之外，在每次迭代中运行 0 或 1 的乘法。

哪个代码运行得更快？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-02-05T05:10:06.460

> 哪个代码运行得更快？

测试一下就知道了。

此外，请查看编译器发出的代码的汇编语言版本，因为您可能会在其中看到令您惊讶的东西，并暗示进一步的优化（例如，在使用`short`时使用可能需要比使用更多的指令机器的自然整数大小）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-02-05T05:15:29.240

要么更快。对于某些处理器，实际输入数据可能会改变答案。您将需要使用真实数据来分析这两种方法。以下是一些可能影响 x86 硬件实际性能的因素。

让我们暂时假设您使用的是最新型号的 Pentium 4。该处理器在 CPU 中嵌入了两级分支预测器。如果分支预测器可以正确猜测分支方向，我怀疑第一个将是最快的。如果标志几乎都是相同的值，或者它们大部分时间以非常简单的模式交替出现，则最有可能发生这种情况。如果标志是真正随机的，那么分支预测器将有一半是错误的。对于我们假设的 32 级 Pentium 4，这将影响性能。对于奔腾 3 芯片、酷睿 2 芯片、酷睿 i7 和大多数 AMD 芯片，管道更短，因此错误分支预测的成本要低得多。

如果您的值向量明显大于处理器的缓存，那么任何一种方法都将受到内存带宽的限制。它们都将具有基本相同的性能特征。如果值向量很适合缓存，请注意如何进行任何分析，以免其中一个测试循环因填充缓存而受到惩罚，而另一个则从中受益。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-02-05T05:19:15.737

您可以在没有乘法的情况下使其无分支。看起来对于每个位集，您都使用该位位置作为数组的索引。

首先，您可以轻松地提取位设置：

```
unsigned short set_mask= i & -i;
i&= i - 1; 
```

然后，您可以通过计算 中设置的位来获得位索引`(set_mask - 1)`。这有一个恒定的时间公式。

一些平台还具有获取位集的位索引的内在特性，这可能更快。x86 有`bsr`，PPC 有`cntlz`。

所以答案是无分支无乘法版本可能是最快的:)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-02-05T06:15:16.873

这次改版怎么样？

```
int total = 0;
for (unsigned mask = i & 0xFFFF, j = 0; mask != 0; mask >>= 1, j++){
    total += (mask & 0x0001) * value[j];
} 
```

我已经制作`mask`了一个限制为 16 位无符号范围的副本`i`，但是代码检查是否设置了掩码的最后一位，将数组值乘以该位。这应该更快，因为每次迭代的操作更少，并且只需要主循环分支和条件。`i`此外，如果开始时循环很小，则循环可以提前退出。

* * *

这说明了为什么测量很重要。我正在使用过时的 Sun SPARC。如图所示，我编写了一个测试程序，问题中的两个竞争者作为测试 0 和测试 1，我自己的答案作为测试 2。然后运行计时测试。“总和”被打印为完整性检查 - 以确保算法都给出相同的答案。

64 位未优化：

```
gcc -m64 -std=c99 -I$HOME/inc -o x x.c -L$HOME/lib/sparcv9 -ljl -lposix4

Test 0: (sum = 1744366)  7.973411 us
Test 1: (sum = 1744366) 10.269095 us
Test 2: (sum = 1744366)  7.475852 us 
```

不错：我的比原来的稍快，而加强版的速度较慢。

64 位优化：

```
gcc -O4 -m64 -std=c99 -I$HOME/inc -o x x.c -L$HOME/lib/sparcv9 -ljl -lposix4

Test 0: (sum = 1744366)  1.101703 us
Test 1: (sum = 1744366)  1.915972 us
Test 2: (sum = 1744366)  2.575318 us 
```

该死 - 我的版本现在是最慢的。优化器不错！

32 位优化：

```
gcc -O4 -std=c99 -I$HOME/inc -o x x.c -L$HOME/lib -ljl -lposix4

Test 0: (sum = 1744366)  0.839278 us
Test 1: (sum = 1744366)  1.905009 us
Test 2: (sum = 1744366)  2.448998 us 
```

32 位未优化：

```
gcc -std=c99 -I$HOME/inc -o x x.c -L$HOME/lib -ljl -lposix4

Test 0: (sum = 1744366)  7.493672 us
Test 1: (sum = 1744366)  9.610240 us
Test 2: (sum = 1744366)  6.838929 us 
```

（32 位）Cygwin 和不那么老年笔记本电脑（32 位，优化）上的相同代码

```
Test 0: (sum = 1744366)  0.557000 us
Test 1: (sum = 1744366)  0.553000 us
Test 2: (sum = 1744366)  0.403000 us 
```

现在我的代码*是*最快的。这就是你测量的原因！它还说明了为什么以运行基准为生的人会心烦意乱。

测试工具（如果需要`timer.h`和`timer.c`代码，请大声喊叫）：

```
#include <stdio.h>
#include "timer.h"

static volatile int value[] =
{
    12, 36, 79, 21, 31, 93, 24, 15,
    56, 63, 20, 47, 62, 88,  9, 36,
};

static int test_1(int i)
{
    int total = 0;
    for (unsigned short mask = 0x0001, j = 0; mask != 0; mask <<= 1, j++)
    {
        if (i & mask)
            total += value[j];
    }
    return(total);
}

static int test_2(int i)
{
    int total = 0;
    for (unsigned short mask = 0x0001, j = 0; mask != 0; mask <<= 1, j++)
    {
        total += ((i & mask) != 0) * value[j];
    }
    return(total);
}

static int test_3(int i)
{
    int total = 0;
    for (unsigned mask = i & 0xFFFF, j = 0; mask != 0; mask >>= 1, j++)
    {
        total += (mask & 0x0001) * value[j];
    }
    return(total);
}

typedef int(*func_pointer)(int);

static func_pointer test[] = { test_1, test_2, test_3 };

#define DIM(x)(sizeof(x)/sizeof(*(x)))

int main()
{
    int i, j, k;
    char buffer[32];
    for (i = 0; i < DIM(test); i++)
    {
        Clock t;
        long sum = 0;
        clk_init(&t);
        clk_start(&t);
        for (j = 0; j < 0xFFFF; j += 13)
        {
            int rv;

            for (k = 0; k < 1000; k++)
                rv = (*test[i])(j);
            sum += rv;
        }
        clk_stop(&t);
        printf("Test %d: (sum = %ld) %9s us\n", i, sum,
               clk_elapsed_us(&t, buffer, sizeof(buffer)));
    }
} 
```

我没有花时间弄清楚为什么我的代码在优化时会变慢。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-02-05T05:06:47.400

这**完全**取决于编译器、机器指令集，可能还取决于月相。

因此，没有具体的正确答案。如果您真的想知道，请检查编译器的程序集输出。

从简单的角度来看，我会说第二个比较慢，因为它涉及第一个**加上**乘法的所有计算。但是编译器可能足够聪明，可以优化掉它。

所以正确的答案是：视情况而定。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-02-05T05:07:00.193

尽管第二个示例没有显式分支，但可能有一个隐式分支将比较结果转换为布尔值。通过打开编译器的汇编列表输出并查看它，您可能会获得一些见解。

当然，唯一确定的方法是双向计算一些时间。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-02-05T05:07:21.767

答案肯定是：在目标硬件上试试看。并且一定要遵循过去几周在 SO 上发布的大量微基准/秒表基准问题的建议。

链接到一个基准测试问题：[秒表基准测试是否可以接受？](https://stackoverflow.com/questions/410437/is-stopwatch-benchmarking-acceptable)

就个人而言，我会选择 if，除非有一个真正令人信服的理由来使用“混淆”替代方案。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-02-05T06:11:53.340

确定陈述的真实性的唯一真正方法是测试。考虑到这一点，我同意以前的帖子说试试看！

在大多数现代处理器上，分支是一个代价高昂的过程，尤其是很少采用的分支。这是因为必须刷新流水线，导致 CPU 实际上无法尝试同时执行一条或多条指令——仅仅是因为它不知道下一条指令来自何处。有了几个分支，可能的控制流变得复杂，CPU 需要同时尝试所有可能性，因此它必须执行分支，然后在此之后立即开始执行许多指令。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-02-05T06:16:25.437

为什么不这样做（假设 i 是 32 位）

```
 for (i2 = i; i2; i2 = i3) {
    i3 = i2 & (i2-1);
    last_bit = i2-i3;
    a = last_bit & 0xffff;
    b = (last_bit << 16);
    j = place[a] + big_place[b];
    total += value[j];
  } 
```

其中 place 是大小为 2^15+1 的表，其中 place[0] = 0，place[1] = 1，place[2] = 2，place[4] = 3，place[8] = 4.. .place[15] = 16（其余值无关紧要）。和 big_place 几乎相同：big_place[0] = 0,big_place[1] = 17.... big_place[15] = 32。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-02-05T06:18:42.530

尝试

```
total += (-((i & mask) != 0)) & value[j]; 
```

代替

```
total += ((i & mask) != 0) * value[j]; 
```

这避免了乘法。是否会有分支取决于编译器是否足够聪明，可以为 -(foo != 0) 找到无分支代码。（这是可能的，但我会有点惊讶。）

（当然，这取决于二进制补码表示；C 标准对此是不可知的。）

您可能会像这样帮助编译器，假设 32 位整数并且有符号 >> 传播符号位：

```
total += (((int)((i & mask) << (31 - j))) >> 31) & value[j]; 
```

也就是说，在上述实现定义的假设下，将可能设置的位向左移动到最高有效位置，转换为有符号整数，然后一直向右移动到最低有效位置，产生全 0 或全 1 . （我没有测试过这个。）

另一种可能性：一次考虑（比如说）4位的块。有16种不同的加法序列；您可以为它们中的每一个分派到展开的代码，而在每个代码块中根本不需要测试。这里的希望是一次间接跳转的成本低于 4 个测试和分支。

**更新：**使用 Jonathan Leffler 的脚手架，**每次 4 位的方法**在我的 MacBook 上是最快的。否定和结果与乘法大致相同。我想知道处理器是否会更快地将 0 和 1 之类的特殊情况相乘（或者如果对于大多数位清除或大多数位设置的被乘数来说通常更快，则不是这种特殊情况）。

我没有编写可接受的答案，因为它在这个特定的基准测试中不太可能是最快的（它应该从仅枚举集合位中获得最大的好处，在稀疏集合上做得最好，但完全有一半的位设置在这个基准）。以下是我对 Leffler 代码的更改，以防其他人有奇怪的动机花时间在这上面：

```
#include <stdio.h>
#include <time.h>

static int value[] =
{
    12, 36, 79, 21, 31, 93, 24, 15,
    56, 63, 20, 47, 62, 88,  9, 36,
};

static int test_1(int i)
{
    int total = 0;
    for (unsigned short mask = 0x0001, j = 0; mask != 0; mask <<= 1, j++)
    {
        if (i & mask)
            total += value[j];
    }
    return(total);
}

static int test_2(int i)
{
    int total = 0;
    for (unsigned short mask = 0x0001, j = 0; mask != 0; mask <<= 1, j++)
    {
        total += ((i & mask) != 0) * value[j];
    }
    return(total);
}

static int test_3(int i)
{
    int total = 0;
    for (unsigned mask = i & 0xFFFF, j = 0; mask != 0; mask >>= 1, j++)
    {
        total += (mask & 0x0001) * value[j];
    }
    return(total);
}

static int test_4(int i)
{
    int total = 0;
    for (unsigned mask = i & 0xFFFF, j = 0; mask != 0; mask >>= 1, j++)
    {
        total += -(mask & 0x0001) & value[j];
    }
    return(total);
}

static int test_5(int i)
{
    int total = 0;
    const int *p = value;
    for (unsigned mask = i & 0xFFFF; mask != 0; mask >>= 4, p += 4)
    {
        switch (mask & 0xF)
        {
        case 0x0: break;
        case 0x1: total += p[0]; break;
        case 0x2: total += p[1]; break;
        case 0x3: total += p[1] + p[0]; break;
        case 0x4: total += p[2]; break;
        case 0x5: total += p[2] + p[0]; break;
        case 0x6: total += p[2] + p[1]; break;
        case 0x7: total += p[2] + p[1] + p[0]; break;
        case 0x8: total += p[3]; break;
        case 0x9: total += p[3] + p[0]; break;
        case 0xA: total += p[3] + p[1]; break;
        case 0xB: total += p[3] + p[1] + p[0]; break;
        case 0xC: total += p[3] + p[2]; break;
        case 0xD: total += p[3] + p[2] + p[0]; break;
        case 0xE: total += p[3] + p[2] + p[1]; break;
        case 0xF: total += p[3] + p[2] + p[1] + p[0]; break;
        }
    }
    return(total);
}

typedef int(*func_pointer)(int);

static func_pointer test[] = { test_1, test_2, test_3, test_4, test_5 };

#define DIM(x)(sizeof(x)/sizeof(*(x)))

int main()
{
    int i, j, k;
    for (i = 0; i < DIM(test); i++)
    {
        long sum = 0;
        clock_t start = clock();
        for (j = 0; j <= 0xFFFF; j += 13)
        {
            int rv;

            for (k = 0; k < 1000; k++)
                rv = (*test[i])(j);
            sum += rv;
        }
        clock_t stop = clock();
        printf("(sum = %ld) Test %d: %8.6f s\n", sum, i + 1, 
               (stop - start) / (1.0 * CLOCKS_PER_SEC));
    }
} 
```

结果（`gcc -O4 -std=c99 branchmult2.c`）：

```
(sum = 1744366) Test 1: 0.225497 s
(sum = 1744366) Test 2: 0.221127 s
(sum = 1744366) Test 3: 0.126301 s
(sum = 1744366) Test 4: 0.124750 s
(sum = 1744366) Test 5: 0.064877 s 
```

**编辑 2：**`volatile`我认为没有限定符的测试会更现实。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-02-05T07:41:09.213

要超快，您可以避免循环、移位和乘法 - 使用 switch。

```
switch (i) {
    case 0: break;
    case 1: total = value[0]; break;
    case 2: total = value[1]; break;
    case 3: total = value[1] + value[0]; break;
    case 4: total = value[2]; break;
    case 5: total = value[2] + value[0]; break;
    ...
} 
```

输入很多，但我想它在运行时会快得多。您无法击败查找表的性能！

我宁愿写一个小的 Perl 脚本来为我生成这个代码——只是为了避免输入错误。

如果您认为这有点极端，您可以使用较小的表 - 4 位，并进行多次查找，每次移动掩码。性能会受到一点影响，但代码会小得多。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2011-02-10T11:10:17.433

明显的解决方案：

```
int total = 0;
for(unsigned j = 0; j < 16; j++){
    total += -(i>>j & 1) & value[j];
} 
```

# c# - 使用 StructureMap 的模型-视图-演示者模式中的演示者注入

> ID：514638
> 
> 赞同：6
> 
> 时间：2009-02-05T05:02:27.957
> 
> 标签：c#, dependency-injection, structuremap, mvp

我已经实现了我自己的模型视图演示者模式副本（在 Web 客户端软件工厂的脉络中），因此我可以利用我自己的 DI 框架，而不是绑定到我遇到很多问题的 WCSF 的 ObjectBuilder。我想出了一些方法来做到这一点，但没有一个让我特别高兴。我想知道其他人是否有其他想法。

## 解决方案#1a

使用 HttpModule 拦截 context.PreRequestHandlerExecute 来调用 ObjectFactory.BuildUp(HttpContext.Current.Handler)

```
public partial class _Default : Page, IEmployeeView
{
    private EmployeePresenter _presenter;

    private EmployeePresenter Presenter
    {
        set
        {
            _presenter = value;
            _presenter.View = this;
        }
    }
} 
```

## 解决方案#1b

在页面加载中调用 buildup 而不是使用 HttpModule

```
public partial class _Default : Page, IEmployeeView
{
    private EmployeePresenter _presenter;

    private EmployeePresenter Presenter
    {
        set
        {
            _presenter = value;
            _presenter.View = this;
        }
    }

    protected void Page_Load(object sender, EventArgs e)
    {
        ObjectFactory.BuildUp(this);
    }
} 
```

## 解决方案#1c

如果需要，通过 Property 访问 Presenter 允许 Getter 进行 BuildUp。

```
public partial class _Default : Page, IEmployeeView
{
    private EmployeePresenter _presenter;

    public EmployeePresenter Presenter
    {
        get
        {
            if (_presenter == null)
            {
                ObjectFactory.BuildUp(this);
            }

            return _presenter;
        }
        set
        {
            _presenter = value;
            _presenter.View = this;
        }
    }
} 
```

## 解决方案#2

```
public partial class _Default : Page, IEmployeeView
{
    private EmployeePresenter _presenter;

    private EmployeePresenter Presenter
    {
        get
        {
            if (_presenter == null)
            {
                _presenter = ObjectFactory.GetInstance<EmployeePresenter>();
                _presenter.View = this;
            }

            return _presenter;
        }
    }
} 
```

## 解决方案#2b

```
public partial class _Default : Page, IEmployeeView
{
    private EmployeePresenter _presenter;

    private EmployeePresenter Presenter
    {
        get
        {
            if (_presenter == null)
            {
                Presenter = ObjectFactory.GetInstance<EmployeePresenter>();
            }

            return _presenter;
        }
        set
        {
            _presenter = value;
            _presenter.View = this;
        }
    }
} 
```

**编辑**：添加解决方案 1c、2b

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-02-10T05:38:41.873

我会使用解决方案#1b，并为所有页面创建一个[图层超类型](http://martinfowler.com/eaaCatalog/layerSupertype.html)，以便进一步干燥演示者初始化。像这样：

页面代码：

```
public partial class _Default : AbstractPage, IEmployeeView
{
    private EmployeePresenter presenter;

    private EmployeePresenter Presenter
    {
        set
        {
            presenter = value;
            presenter.View = this;
        }
    }
    protected override void Do_Load(object sender, EventArgs args)
    {
        //do "on load" stuff 
    }

} 
```

摘要页面代码：

```
public abstract class AbstractPage : Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        ObjectFactory.BuildUp(this);
        this.Do_Load(sender,e); 
        //template method, to enable subclasses to mimic "Page_load" event

    }
    //Default Implementation (do nothing)
    protected virtual void Do_Load(object sender, EventArgs e){}
} 
```

使用此解决方案，您只需在一个类中进行演示者初始化（由 ObjectFactory 创建），如果您稍后需要修改它，您可以轻松完成。

**编辑：**

**Do_Load 应该是*抽象*的还是*虚拟*的？**

[模板方法](http://en.wikipedia.org/wiki/Template_method)最初声明该方法应该是抽象的，以强制子类实现它，遵守超类契约。（参见“垄断”<“游戏”的维基百科示例）。

另一方面，在这种特殊情况下，我们不想强制用户类重新定义我们的方法，而是给它这样做的机会。如果您将其声明为抽象的，许多类将不得不重新定义该方法以使其为空（这显然是代码异味）。所以我们提供了一个合理的默认值（什么都不做）并使方法虚拟化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-14T08:02:52.360

我一直在使用一个基页类：

```
protected override void OnInit(EventArgs e)
    {
        StructureMap.ObjectFactory.BuildUp(this);
        base.OnInit(e);
    } 
```

基类方法也适用于用户控件，仅此一项就让我远离模块（不想有两种方法来设置它）。对于页面，它是

```
public partial class Employee : View, IEmployeeView
{
    public ViewPresenter Presenter { get; set; }
    private void Page_Load(object sender, EventArgs e){}
} 
```

我通过构造函数注入视图。为避免结构映射配置上的循环引用问题，只需使用此辅助方法：

```
static T GetView<T>()
{
    return (T) HttpContext.Current.Handler;
} 
```

在结构映射配置中，对演示者和视图注入都使用约定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-14T09:04:03.693

我也建立了自己的 MVP 框架。我发现对我来说最好的方法是将泛型与基页类一起使用。通过在泛型类定义中指定 Presenter 类型，我会错过您的每个提案所需的大部分代码。

但是，有些事情我不喜欢这样做。类定义最终可能看起来相当复杂，并且对于新手来说不容易阅读。我还没有完全找到在基本页面中使用事件模型的好方法。

抱歉，这里没有适合您的代码，但如果您愿意，我可以为您发布一些代码。如果您想看看它是如何工作的，我还在 www.codeplex.com/aspnetmvp 上发布了旧版本的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-15T21:41:38.050

谢谢大家非常宝贵的意见。您的每一个回答都给了我宝贵的想法，可以在我的最终解决方案中结合起来，这就是我想出的：

```
public abstract class ViewBasePage<TPresenter, TView> :
    Page where TPresenter : Presenter<TView>
{
    protected TPresenter _presenter;

    public TPresenter Presenter
    {
        set
        {
            _presenter = value;
            _presenter.View = GetView();
        }
    }

    /// <summary>
    /// Gets the view. This will get the page during the ASP.NET
    /// life cycle where the physical page inherits the view
    /// </summary>
    /// <returns></returns>    
    private static TView GetView()
    {
        return (TView) HttpContext.Current.Handler;
    }

    protected override void OnPreInit(EventArgs e)
    {
        ObjectFactory.BuildUp(this);
        base.OnPreInit(e);
    }
} 
```

并由我的原始页面继承：

```
public partial class _Default : 
    ViewBasePage<EmployeePresenter, IEmployeeView>, IEmployeeView
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            _presenter.OnViewInitialized();
        }

        _presenter.OnViewLoaded();
        Page.DataBind();
    }

    #region Implementation of IEmployeeView

    ...

    #endregion
} 
```

# metaprogramming - 元编程到底是什么？

> ID：514644
> 
> 赞同：164
> 
> 时间：2009-02-05T05:05:08.903
> 
> 标签：metaprogramming

我正在阅读 TheServerSide 上[关于 Java 平台上的多语言编程](http://www.theserverside.com/news/thread.tss?thread_id=47184#240893)的文章。文章中的一些评论将元编程称为生成代码的能力（可能是动态的）。

元编程是动态生成代码的能力，还是在运行时将方法和属性注入现有对象的能力（就像 Python、Ruby 和 Groovy 等一些动态语言所允许的那样）。

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2009-02-05T05:27:51.510

元编程是指程序了解自身或操纵自身的各种方式。

在像 C# 这样的语言中，反射是一种元编程形式，因为程序可以检查有关自身的信息。例如，返回一个对象所有属性的列表。

在 ActionScript 等语言中，您可以在运行时评估函数以创建新程序，例如 eval("x" + i)。当 i 为 1 时 DoSomething() 将影响名为 x1 的对象，当 i 为 2 时将影响名为 x2 的对象。

最后，另一种常见的元编程形式是程序可以以非平凡的方式改变自己。LISP 以这一点而闻名，并且是大约十年前 Paul Graham 所倡导的。我得查一下他的一些具体文章。但想法是程序会根据其状态更改程序的另一部分。这为在运行时做出决策提供了一定程度的灵活性，这在当今大多数流行语言中是非常困难的。

还值得注意的是，在直接汇编编程的好日子里，在运行时改变自己的程序是必要的并且非常普遍。

摘自 Paul Graham 的文章[“Lisp 与众不同的原因”](http://www.paulgraham.com/diff.html)：

> 许多语言都有一个叫做宏的东西。但是 Lisp 宏是独一无二的。信不信由你，他们所做的与括号有关。Lisp 的设计者并没有将所有这些括号放在语言中，只是为了与众不同。对于 Blub 程序员来说，Lisp 代码看起来很奇怪。但是这些括号是有原因的。它们是 Lisp 和其他语言之间根本差异的外在证据。
> 
> Lisp 代码由 Lisp 数据对象组成。并不是说源文件包含字符，字符串是该语言支持的数据类型之一。Lisp 代码在被解析器读取后，由您可以遍历的数据结构组成。
> 
> 如果您了解编译器的工作原理，那么真正发生的并不是 Lisp 具有奇怪的语法，而是 Lisp 没有语法。您在解析树中编写程序，这些程序在解析其他语言时在编译器中生成。但是您的程序可以完全访问这些解析树。您可以编写操作它们的程序。在 Lisp 中，这些程序称为宏。它们是编写程序的程序。
> 
> 编写程序的程序？你什么时候想这样做？如果您在 Cobol 中思考，则不是很常见。一直以来，如果你在 Lisp 中思考的话。如果我能举一个强大的宏的例子，在这里说会很方便！那个怎么样？但如果我这样做了，对于不了解 Lisp 的人来说，这简直就是胡言乱语。这里没有空间来解释您需要知道的所有内容以理解它的含义。在[Ansi Common Lisp](https://rads.stackoverflow.com/amzn/click/com/0133708756)中，我尝试尽可能快地进行操作，即使如此，直到第 160 页我才接触到宏。
> 
> 但我想我可以给出一种可能令人信服的论点。Viaweb 编辑器的源代码大概有 20-25% 的宏。宏比普通的 Lisp 函数更难编写，并且在不需要时使用它们被认为是不好的风格。因此，该代码中的每个宏都存在，因为它必须存在。这意味着该程序中至少 20-25% 的代码正在执行您在任何其他语言中都无法轻松完成的事情。不管 Blub 程序员对我声称的 Lisp 的神秘力量持怀疑态度，这应该让他很好奇。我们写这段代码不是为了自娱自乐。我们是一家很小的初创公司，为了在我们和竞争对手之间设置技术障碍，我们尽可能地努力编程。
> 
> 一个可疑的人可能会开始怀疑这里是否存在某种关联。我们的大部分代码都在做其他语言很难做到的事情。由此产生的软件做了我们竞争对手的软件做不到的事情。也许有某种联系。我鼓励您关注该主题。那个拄着拐杖蹒跚而行的老人可能比我们看到的更多。

* * *

## 回答 #2

> 赞同：81
> 
> 时间：2017-02-14T07:59:25.417

好问题。很遗憾看到目前没有一个答案能真正正确回答您的问题。或许我可以帮...

元编程的定义真的很简单：它意味着操纵程序的程序。

您接受的答案说程序会操纵自己。这些确实是元程序，但它们是所有元程序的子集。

全部：

*   解析器
*   领域特定语言 (DSL)
*   嵌入式领域特定语言 (EDSL)
*   编译器
*   口译员
*   术语重写器
*   定理证明者

是元程序。所以[GCC 编译器](https://gcc.gnu.org/)是一个元程序，[CPython 解释器](https://github.com/python/cpython)是一个元程序，[Mathematica 计算机代数系统](https://www.wolfram.com/mathematica/)是一个元程序，[Coq 定理证明器](https://coq.inria.fr/)是一个元程序等等。

其他答案断言元程序是生成其他程序的程序。这些确实是元程序，但同样，它们是所有元程序的子集。West (FFTW) 库中的[最快傅立叶变换就是这种元程序的一个例子。](http://www.fftw.org/)源代码大部分是用[OCaml](https://ocaml.org/)编写的，它会生成一些 C 代码（称为 codelet），这些代码组合起来可以创建针对特定机器优化的高性能[快速傅立叶变换](http://mathworld.wolfram.com/FastFourierTransform.html)例程。该库实际上用于在 Matlab 中提供 FFT 例程。[自FORTRAN](http://groups.engin.umd.umich.edu/CIS/course.des/cis400/fortran/fortran.html)早期以来，人们一直在编写程序来生成数值方法数十年。

第一种集成了元编程支持的编程语言是 1950 年代后期的 LISt 处理器 (LISP) 语言。[LISP 1.5](http://www.softwarepreservation.org/projects/LISP/book/LISP%201.5%20Programmers%20Manual.pdf)包含许多使元编程更容易的特性。首先，LISP 的核心数据类型是嵌套列表，即树状结构`(a (b c) d)`，这意味着任何 LISP 代码都可以原生地表示为数据结构。这被称为同音性。其次，使用 QUOTE 可以轻松地将 LISP 代码转换为数据。例如，`(+ 1 2 3)`添加 1+2+3 并`(QUOTE (+ 1 2 3))`创建一个在计算时添加 1+2+3 的表达式。第三，LISP 提供了一个元循环评估器，允许您使用主机解释器或编译器在运行时评估 LISP 代码，包括运行时生成的 LISP 代码。LISP 的后代包括[Scheme](http://www.scheme.com/tspl4/)和[Clojure](https://clojure.org/). 在所有这些语言中，元编程最常见的形式是修改自身的程序，通常使用宏。

在 1970 年代，Robin Milner 开发了一种[MetaLanguage](http://web.cs.wpi.edu/~cs4536/c12/milner-type-poly.pdf) (ML)，该语言演变为 ML 编程语言家族，其中包括[标准 ML](http://sml-family.org/)和[OCaml](https://ocaml.org/)，并强烈影响了[Haskell](https://www.haskell.org/)和[F#](http://fsharp.org/)。这些语言使表达其他语言变得容易。在这些语言中，元程序最常见的形式是词法分析器、解析器、解释器和编译器。

1994 年，[Erwin Unruh 发现 C++ 模板系统是图灵完备的，可以用来在编译时执行任意程序](http://www.erwin-unruh.de/primorig.html)。C++ 模板元编程将元编程带给了未洗过的大众，他们（ab）将它用于许多不同的事情，包括在[Blitz++ 库](http://blitz.sourceforge.net/)中生成数值方法。

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2009-02-05T05:33:25.880

好吧，元编程只是编程，但它基本上是*“写代码的代码”*。

您提到的能力，当程序可以观察和修改自己的结构和行为时，称为反射，它是一种元编程。

动态类型语言，具有强大的运行时反射特性，这些语言的解释特性使之成为可能......

静态类型语言还具有强大的元编程技术，例如 C++[模板元编程](http://en.wikipedia.org/wiki/Template_metaprogramming)...

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2009-02-05T05:42:41.137

这只是我个人的看法，这可能是元编程最自由的定义。

我认为包括：

1.  编译代码生成或运行时代码生成（或两者）
2.  面向方面的思考或面向方面的编程
3.  [干](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)思考

我认为您可以通过使用其中任何一种并结合使用来实现：

1.  反射
2.  DSL（领域特定语言）
3.  属性 (.NET) 或注释 (Java)
4.  泛型 (.NET/Java)
5.  模板 (C++)
6.  方法缺失（红宝石）
7.  闭包/一等函数/委托
8.  AOP - 面向方面的编程

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2009-02-05T05:21:30.243

> 元编程是编写或操作其他程序（或它们本身）作为它们的数据的计算机程序，或者在运行时完成部分工作，否则这些工作将在编译时完成。在许多情况下，这允许程序员在与手动编写所有代码相同的时间内完成更多工作，或者它为程序提供了更大的灵活性，无需重新编译即可有效地处理新情况。（[来源](http://en.wikipedia.org/wiki/Metaprogramming)。）

基本上，它是在编写输出更多代码的代码，这些代码是为了完成某个目标而运行的。这通常在同一种语言中完成（使用 javascript 创建一个 javascript 字符串，然后使用`eval`它）或发出另一种语言（使用 .NET 创建一个 Windows 批处理文件）。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2009-02-05T05:27:47.063

元编程是编写一个输出另一个程序的程序。这是像 Lisp 这样的语言非常擅长的。在 Ruby、Lisp、Scheme 等支持真正宏（不是 C++ 宏，而是可以操作它们输出的代码）的语言中比在 Java 等语言中更容易做到这一点。

一种实现是创建“领域特定语言”，这是一种增强编程语言以完成特定任务的方式。如果操作正确，它可能会非常强大。Ruby on Rails 就是这种编程的一个很好的例子。

如果您有兴趣探索这种方法，请查看[计算机程序的结构和解释，](http://mitpress.mit.edu/sicp/)这是涵盖该主题的开创性书籍之一。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2009-02-05T05:21:30.820

[维基百科](http://en.wikipedia.org/wiki/Metaprogramming)有一篇关于这个主题的好文章。不必为某些东西进行运行时修改就可以称为元编程。例如，许多人在编译时使用 C++ 模板进行元编程。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-03-13T00:38:52.780

让我们用简单的例子来理解这一点！

```
template<class T>
class Item{
private:
    std::string name;
    T value;
public:
    Item(std::string name, T value)
        : name{name}, value{value} {}
    std::string get_name() const {return name;}
    T get_value() const {return value;}
}; 
```

在这个例子中，T 可以是任何类型的值。例如，在这种情况下，我们期望整数或双精度数。现在，这将编译，但不会生成任何代码。它只是一个**蓝图**。当用户使用模板或蓝图的**专用**版本时，编译器将使用模板或蓝图生成代码。这就是元编程的全部内容！

# php - 有哪些方法可以找到 Web 应用程序中的瓶颈？

> ID：514653
> 
> 赞同：21
> 
> 时间：2009-02-05T05:06:48.960
> 
> 标签：php, asp.net, performance, web-applications

如何对我的 Web 应用程序的性能进行基准测试？

有没有办法找出 Web 应用程序中的瓶颈？

编辑：我不是在询问任何前端调整，如图像、css 等。我想知道的是如何分析应用程序的后端，以便我知道要修改哪些方法/查询以提高性能。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-02-05T05:51:14.473

关于应用服务器上的瓶颈，您可以使用[分析工具](http://en.wikipedia.org/wiki/Performance_analysis)来查看代码的每个部分花费了多少时间，使用了多少内存等。对于 PHP，[webgrind](http://code.google.com/p/webgrind/)似乎是一种流行的基于 GUI 的方式分析。像[dotTrace](http://www.jetbrains.com/profiler/index.html)这样的东西会对 ASP.NET 应用程序做同样的事情。请注意，当涉及到数据库时，像这样的分析工具只会告诉您哪些数据库查询很慢，而不是*为什么*它们很慢。为此，您需要查看特定于数据库的分析...

Web 应用程序瓶颈的另一个方面是浏览器实际上需要多少时间来下载所有内容（CSS 和 JavaScript 导入、图像等）并呈现页面。有几家像[Keynote](http://www.keynote.com/)一样的公司拥有机器人，它们会从世界各地访问您的网站，分析性能，并为您提供有关可以进行更改的建议，以使您的应用程序输出*到浏览器并尽快呈现*（例如，“使用 gzip 压缩并将您的 JavaScript 放在页面末尾而不是头部”等）。当然，您也可以在更小的范围内自己进行此操作。[例如，像Jiffy](https://addons.mozilla.org/en-US/firefox/addon/7613)和[YSlow](https://addons.mozilla.org/en-US/firefox/addon/5369)这样的Firefox 插件就可以完成这项工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-05T06:46:31.927

对于任何网络应用程序，您都可以尝试使用 Firebug 扩展以及 Yahoo YSlow 扩展（针对 Firebug）。对页面性能非常有帮助。 [http://developer.yahoo.com/yslow/](http://developer.yahoo.com/yslow/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-05T05:09:06.540

[追踪](http://msdn.microsoft.com/en-us/library/y13fw6we(VS.71).aspx)是一个很好的开始

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-05T10:44:55.267

**[Fiddler](http://www.fiddlertool.com/fiddler/)**是流量记录和监控的好工具。它适用于客户端，您可以查看客户端和 Web 服务器之间的请求和响应。您可以轻松分析慢页面并检测原因（对于许多请求，大页面，...）

特别是对于 ASP.Net，有一个跟踪机制，可以为 Web 应用程序创建详细的日志。日志显示时序信息，您可以找到长时间运行的函数。（MSDN 文章：[ASP.NET 跟踪概述](http://msdn.microsoft.com/en-us/library/bb386420.aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-05T16:47:30.310

尝试使用一些测试引擎（例如 PHPUnit）来给您的应用程序施加压力，并使用您的 shell 查看哪些进程需要更长时间才能解决。

在 Unix/Linux 上，你可以使用 'top' 命令

在 Windows 上使用任务管理器（扩展）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-05T05:16:53.700

您能否更具体地了解平台（XP、Vista、Server 2000、2003、2008）和运行应用程序的方法（IIS、Windows 服务）。如上所述，跟踪是一个好的开始，但根据配置 Web 应用程序的环境，还有其他工具。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-05T10:15:09.773

如果你使用 Perl，那么[Devel::NYTProf](http://search.cpan.org/dist/Devel-NYTProf/)是[超级棒](http://blog.timbunce.org/2008/07/15/nytprof-v2-a-major-advance-in-perl-profilers/) [的](http://open.blogs.nytimes.com/2008/07/17/develnytprof-version-2-released-marvel-at-its-greatness/)。

我有一个教程，我在 OSCON 和 MySQL 会议上做过几次关于“ [Real World Web: Performance & Scalability](http://develooper.com/talks/) ”的教程（幻灯片[以 PDF 格式](http://st.pimg.net/devcom/talks/rww-mysql-2008.pdf)提供），您可能会觉得它很有趣。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-02-05T10:40:03.747

相关话题：

*   [Asp.Net 性能资源/书](https://stackoverflow.com/questions/376260/asp-net-performance-resource-book)
*   [ASP.NET 压力测试](https://stackoverflow.com/questions/299518/asp-net-stress-testing)
*   [使用 EQATEC Profiler 分析 ASP.NET 网站](https://stackoverflow.com/questions/378617/profiling-asp-net-websites-with-eqatec-profiler)
*   [负载测试软件](https://stackoverflow.com/questions/356888/load-testing-software)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-02-05T16:45:19.720

打开跟踪功能，如果它是 Web 应用程序，则 trace=true 并在触发的方法的开头和结尾放置跟踪语句。这将为您提供系统中刻度的非常详细的读数，以及每个部分运行所需的时间。

如果您有一个正在调用的库，那么您还可以使用 httpcontext.Current.Trace.Write 在其中进行跟踪，以输出您需要查看的内容。或者，如果您的应用程序真的很挑剔，您可以编写自己的函数来将跟踪语句存储在共享变量中，并在脚本运行后将其写入数据库或其他机制。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-02-05T17:09:14.243

如果您想要找到瓶颈的通用方法，请尝试使用 HTTP 监控工具。这使您可以查看哪些类型的请求需要更长时间，或者它们是否返回错误消息。然后，您可以使用特定于平台的分析工具根据来自该工具的数据对应用程序的特定区域进行归零。

我喜欢使用像[Charles](http://www.charlesproxy.com/download.php)这样的 HTTP 代理工具来进行这种类型的分析。

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2009-02-05T13:03:44.847

第一步是快速而肮脏的。在 iPhone、带 3G 连接的笔记本电脑、带卫星互联网连接的 pc 和 windows mobile PDA 上试用。如果这行得通，你就完成了。如果没有，三角测量。

# .net - Is the DirectX input the right choice for keyboard handling in games?

> ID：514657
> 
> 赞同：2
> 
> 时间：2009-02-05T05:08:12.733
> 
> 标签：.net, windows, directx

What is the prefered way of handling keyboard input in programs like games? Is directX input the easiest choice? What are the other options?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-05T05:18:08.610

DirectInput (if that's what you mean by directX input) has been deprecated. I, personally, find it sufficient to handle the messages sent to the WndProc of your main window. See [WMINPUT](http://msdn.microsoft.com/en-us/library/ms645590(VS.85).aspx), or [WMKEYDOWN](http://msdn.microsoft.com/en-us/library/ms646280(VS.85).aspx) and [WMKEYUP](http://msdn.microsoft.com/en-us/library/ms646281(VS.85).aspx)

EDIT: I was assuming you're making a game using Directx. If you're not, it really depends on how you're making your game to choose input. If you're using a cross-platform existing library it will have a way of handling input that's built in.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-07-29T06:55:38.313

DirectInput 对键盘输入所做的所有工作都是创建一个线程并查看 WM_* 消息并增加额外线程的开销。甚至微软都说你应该只使用 WM_* 消息。我看到一些**EPIC FAIL**，但不是 Windows 消息队列的一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-05T05:19:15.910

It mostly depends on what framework/OS you intend to use for your game.

Options are too numerous to all list here, but include :

*   XNA (Windows + XBox 360)
*   DirectX (Windows)
*   Flash (Cross-Platform)
*   Silverlight (Should be cross-platform)

Various integrated game engines :

*   Torque
*   Dark gdk
*   ...

Cross-Platform libraries

*   Allegro
*   LWJGL
*   ...

Frankly, it's highly unprobable than handling input is going to be your biggest problem, so pick a solution that fits your need (in particular in terms of grahic capability/complexity) and choose your way of handling input from there.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-05T05:33:14.837

Typically you choose the input handling method that best fits your windowing system. If you're using GLUT/SDL/SFML or any of the other windowing toolkits you'll get your input from them. Otherwise if you're rolling your own then it's between using the OS input messages or DirectInput, both of which work swimmingly for games.

If you're thinking about mouse input, do NOT use DirectInput unless you have very specific mouse ballistics you intend to apply. DirectInput mouse motion does not have the user's mouse ballisitics applied to it (set via the mouse control panel) and will feel very awkward for most users.

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-02-05T05:25:43.633

Nothing wrong with DirectInput. Works well and gives you direct access to the hardware via a ... er... "friendly" interface :) Polling the hardware is the only way to go if you want real responsiveness in your game.

Relying on the Windows message pump and handling windows messages is, imho, an **EPIC FAIL**.

# seo - 谷歌索引页面是否包含隐藏的 div？

> ID：514659
> 
> 赞同：26
> 
> 时间：2009-02-05T05:09:32.310
> 
> 标签：seo, google-search

我开始重新设计和开发一个包含大量文本的网站，并且我正在考虑如何组织网站上的信息，使其看起来更干净。在网站的某些部分，我想实现一个 jquery 切换效果，其中一些内容被放置在一个隐藏的 div 中，并且该内容将根据用户的 onclick 事件显示或隐藏。

这种组织内容的技术会极大地损害网站的搜索引擎优化吗？谷歌会在什么时候开始将其视为垃圾邮件并放弃该网站的全部索引？

//更新 - 找到了一些答案。

我想澄清一下，作为对下面一些答案的回应，隐藏 div 的目的是为了组织目的在显示/隐藏内容之间切换，其中任何隐藏的文本最终都会显示给用户。

然而，经过大量挖掘，来自 google 的[Matt Cutts](http://www.stonetemple.com/articles/interview-matt-cutts.shtml)确实说，只要您不使用关键字填充隐藏文本并通过试图欺骗 googlebot 来滥用系统，您通常应该没问题。他还[给出了一个有趣](http://www.mattcutts.com/blog/avoid-keyword-stuffing/)的关键字填充错误示例。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-02-05T05:13:39.807

显然[是](http://groups.google.com/group/Google_Webmaster_Help-Indexing/browse_thread/thread/fd91a80997e531b2/e0fe0c574aa44b8d?lnk=gst&q=)的。

没有什么能逃过索伦的眼睛。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-05T05:15:19.053

如果您出于 SEO 原因隐藏/显示内容，它将被编入索引，但可能会被 Google 不赞成。换句话说，谷歌看到的应该是用户点击链接时看到的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2011-08-19T17:18:58.890

Poe 使用“舞台外” div（负位置）的想法被广泛使用，并且与具有 display:hidden 或 visibility:none 的 div 一样被 Google bot 所熟知。

这是如何做到的：

让您的所有对象在您的 HTML 代码中完全显示并完全可见，并且就在舞台上，就像 Google 想要的那样......但是然后......让您的 javascript onload 事件在浏览器客户端中应用您想要的定位。

结果......完美的搜索引擎优化，并为访问者提供了完美的体验。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-05T07:15:06.270

只要隐藏的内容与页面相关，它就不应该是垃圾邮件。

我在页面上放置了隐藏文本，切换了可见文本，当使用图形作为标题时，我有一个用于 Google 的 CSS 隐藏 H1 标题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-27T16:56:41.900

这绝对没问题，因为我已经做了很多次，没有任何 SEO 处罚。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-01T19:49:32.787

我不会隐藏它。如果人们不想阅读它，他们可以跳过。当我隐藏文本时，Googlebot 以及常规 html 中的文本似乎都看不到它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-01-21T09:15:25.080

我在这里找到了最好和最满意的结果。

隐藏文本和链接 在您的内容中隐藏文本或链接以操纵 Google 的搜索排名可能被视为具有欺骗性，并且违反了 Google 的网站管理员指南。文本（例如过多的关键字）可以通过多种方式隐藏，包括：

使用白色背景上的白色文本 定位图像后面的文本 使用 CSS 将文本置于屏幕外 将字体大小设置为 0 通过仅链接一个小字符（例如，段落中间的连字符）来隐藏链接网站以查看它是否包含隐藏的文本或链接，查找您网站的访问者不容易看到的任何内容。是否有任何文本或链接仅适用于搜索引擎而不是访问者？

但是，并非所有隐藏文本都被视为具有欺骗性。例如，如果您的网站包含搜索引擎难以访问的技术，例如 JavaScript、图像或 Flash 文件，则对这些项目使用描述性文本可以提高您网站的可访问性。请记住，许多使用屏幕阅读器、移动浏览器、没有插件的浏览器和慢速连接的人类访问者也将无法查看该内容，并且也会从描述性文本中受益。您可以通过关闭浏览器中的 JavaScript、Flash 和图像，或使用纯文本浏览器（如 Lynx）来测试网站的可访问性。使您的网站易于访问的一些提示包括：

[https://support.google.com/webmasters/answer/66353?hl=en](https://support.google.com/webmasters/answer/66353?hl=en)

* * *

## 回答 #8

> 赞同：-5
> 
> 时间：2009-04-06T02:12:07.830

也许隐藏您的内容对 SEO 不利，但也许您不必隐藏它。

不要使用“显示：隐藏”，而是使用创意定位。

使用“left：7680px”或“margin-top：-7680px”将您的“隐藏”内容放置在屏幕外 7680 像素处

然后使用您的 java 脚本根据需要更改内容的位置。

# algorithm - 确定对象邻居的算法

> ID：514663
> 
> 赞同：1
> 
> 时间：2009-02-05T05:11:32.383
> 
> 标签：algorithm

我依稀记得读过有关在屏幕上绘制对象的编程练习。如果一个对象的邻居少于 2 个，它会因为孤独而死亡，如果它的邻居超过 3 个，它会因为拥挤而死亡。如果邻居的数量是 2 或 3，那么它将产生孩子。总的想法是看看能持续多少代。

无论如何，有人记得这个练习的名称以及执行它的算法的名称吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-05T05:13:30.180

听起来像[康威的生命游戏](http://en.wikipedia.org/wiki/Conway%27s_Game_of_Life)，至于算法等，如果你只搜索名称，就会有很多来源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-05T05:13:28.293

这是生命的游戏。我不相信该算法有一个特定的名称（除非它是 Life 算法，这听起来像是你从那些深夜的廉价电视广告中购买的东西）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-05T05:38:16.307

更一般地，这些被称为元胞自动机。有很多有趣的元胞自动机，包括可以制作旋转分形几何形状的元胞自动机和其他看起来非常智能的元胞自动机。它们也被用来非常准确地模拟现实生活中的过程，请参阅：[http ://en.wikipedia.org/wiki/Cellular_automaton](http://en.wikipedia.org/wiki/Cellular_automaton)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-09-28T13:14:18.787

在康威生命游戏中确定邻居是微不足道的。整个元胞自动机只是一个大的二维数组，因此您可以通过递增/递减坐标来查找相邻项目。细节取决于实现语言，但您可能会有一些类似于以下的代码......

```
count := previous[x-1,y] + previous[x+1,y] + previous[x,y-1] + previous[x,y+1];
next [x,y] := 1 if ((count >= MIN) and (count <= MAX)) else 0; 
```

我忽略的一个问题是边界检查——确保只使用范围内的坐标。元胞自动机通常是为提高速度而构建的，因此您可能不会在内部循环中进行检查 - 您将使用特殊情况代码来处理角落和沿边缘循环。

这不是我所说的寻找对象邻居的算法。最近邻问题的一种方法是基于[Voronoi 图](http://en.wikipedia.org/wiki/Voronoi_diagram)构建索引。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-05T05:14:46.417

它被称为生命游戏，您可以在[此处](http://www.math.com/students/wonders/life/life.html)找到有关它的更多信息。但是，我不知道执行此操作的算法的名称。

# php - 如何在 PHP 中打开从 X 行到 Y 行的文件？

> ID：514673
> 
> 赞同：13
> 
> 时间：2009-02-05T05:14:37.947
> 
> 标签：php, fopen

我在 PHP 文档中看到的最接近的是 fread() 给定的长度，但这并没有指定从哪一行开始。还有其他建议吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2010-05-11T08:34:50.493

是的，你可以很容易地做到这一点[`SplFileObject::seek`](http://de.php.net/manual/en/splfileobject.seek.php)

```
$file = new SplFileObject('filename.txt');
$file->seek(1000);
for($i = 0; !$file->eof() && $i < 1000; $i++) {
    echo $file->current(); 
    $file->next();
} 
```

这是[SeekableIterator](http://de.php.net/manual/en/class.seekableiterator.php)接口中的一个方法，不要与`fseek`.

而且因为 SplFileObject 是可迭代的，您可以使用以下命令更轻松地完成它[`LimitIterator`](http://de.php.net/manual/en/class.limititerator.php)：

```
$file = new SplFileObject('longFile.txt');
$fileIterator = new LimitIterator($file, 1000, 2000);
foreach($fileIterator as $line) {
    echo $line, PHP_EOL;
} 
```

同样，这是从零开始的，所以它是第 1001 到 2001 行。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-02-05T05:37:46.637

您将无法从第 X 行开始阅读，因为行可以是任意长度。因此，您必须从一开始就读取读取的行数以到达第 X 行。例如：

```
<?php
$f = fopen('sample.txt', 'r');
$lineNo = 0;
$startLine = 3;
$endLine = 6;
while ($line = fgets($f)) {
    $lineNo++;
    if ($lineNo >= $startLine) {
        echo $line;
    }
    if ($lineNo == $endLine) {
        break;
    }
}
fclose($f); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-05T05:44:11.133

不幸的是，为了能够从第 x 行读取到第 y 行，您需要能够检测换行符......并且您必须扫描整个文件。但是，假设您**不是**出于性能原因询问此问题，则可以`x`使用`y`以下内容：

```
$x = 10; //inclusive start line
$y = 20; //inclusive end line
$lines = file('myfile.txt');
$my_important_lines = array_slice($lines, $x, $y); 
```

参见：[array_slice](http://us.php.net/manual/en/function.array-slice.php)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2010-05-11T06:52:43.710

**[这是可能的解决方案:)](https://stackoverflow.com/questions/514673/how-do-i-open-a-file-from-line-x-to-line-y-in-php)**

```
<?php
$f = fopen('sample.txt', 'r');
$lineNo = 0;
$startLine = 3;
$endLine = 6;
while ($line = fgets($f)) {
    $lineNo++;
    if ($lineNo >= $startLine) {
        echo $line;
    }
    if ($lineNo == $endLine) {
        break;
    }
}
fclose($f);
?> 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2010-05-11T06:53:01.853

好吧，您不能使用函数 fseek 来寻找适当的位置，因为它适用于给定的字节数。

我认为如果没有某种缓存或逐行遍历是不可能的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-05T05:40:57.240

如果您要查找行，则不能使用 fread，因为它依赖于字节偏移量，而不是换行符的数量。您实际上必须阅读文件才能找到换行符，因此使用不同的函数更合适。[fgets](http://www.php.net/manual/en/function.fgets.php)将逐行读取文件。将其放入循环中并仅捕获您想要的行。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-05-11T07:12:29.240

我害怕那个......我想这是B计划：S

对于每个 AJAX 请求，我将：

1.  将我要返回给客户端的行数读入一个字符串。
2.  将文件的**其余部分**复制到临时文件中。
3.  返回字符串给客户端。

这很蹩脚，10,000+行文件可能会很慢，但我想这比一遍又一遍地阅读要好，至少每次请求都会使临时文件变短......不是吗？

# sharepoint - 安装 SharePoint 时应如何使用此 SetSPN 命令

> ID：514678
> 
> 赞同：3
> 
> 时间：2009-02-05T05:16:24.510
> 
> 标签：sharepoint, spn

在 SharePoint 安装文档中，我说，

> 如果您将域用户帐户用于 SQL Server 服务帐户，则必须确保该帐户的有效服务主体名称 (SPN) 以及其数据库服务器上的 SQL Server 实例存在于其环境中。无论您对 Office SharePoint Server 2007 使用 NTLM 还是 Kerberos 身份验证，情况都是如此。
> 
> 您必须使用 Setspn.exe 命令行工具为域中的该帐户配置 SPN。Setspn.exe 默认安装在运行 Windows Server 2008 的计算机上。在与用户/服务帐户加入同一域的计算机上运行以下命令。

```
setspn -a <http/<farmclusterdnsname> <serviceaccountname> 
```

在这种情况下，参数应该是什么？

我猜 serviceaccountname 将是 'domain\username' 不确定第一个参数应该是什么。

这是[SetSPN 的 technet 链接](http://technet.microsoft.com/en-us/library/cc773257.aspx)。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-02-05T07:51:15.930

语法如下所示：

```
SetSPN -a http/www.mywebsite.com serviceaccountname 
```

或者

```
SetSPN -a http/www.mywebsite.com domainname\serviceaccountname 
```

试着这样想：您想将 www.mywebsite.com 的 http 服务的所有者注册到 domain\serviceaccountname 目录对象。此 spn 条目允许使用在注册名称 (www.mywebsite.com) 上为服务 (http) 的所有者 (serviceaccountname) 注册的密码对身份验证票证进行加密。

添加 SPN 条目后，您可以通过执行以下命令对所有者 (serviceaccountname) 使用“SetSPN -l”来验证结果：

```
SetSPN -l serviceaccountname 
```

需要指出的一件事。环境中的服务 (http) 和注册名称 (www.mywebsite.com) 只能有一个所有者。可能会意外地得到不止一个。

使用 SetSPN -l 选项查找安装了 SharePoint 的计算机对象的注册条目，以确保没有条目：例如。

```
SetSPN -l SharepointServer.domain.com
SetSPN -l SharepointServer 
```

[您可以在Microsoft TechNet 网站上](http://technet.microsoft.com/en-us/library/cc773257.aspx)阅读有关 SPN 工作原理的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-05T05:59:26.470

我对此不是 100% 确定，但我知道如何使用 Win2k 中的 SetSPN，所以如果你在单个服务器上运行，我会说你想要“http/servername”，其中“servername”是 DNS 名称那个服务器。

如果它不起作用，它不应该破坏任何东西，您可以使用 SetSPN 从主体中删除 spn。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2010-05-24T00:47:55.850

您可以下载 Kerberos SPN 生成工具，该工具可以帮助您解决多个 Microsoft BI 产品的此问题。试试[http://futuresults.com](http://futuresults.com)

# tags - SO 标签排序是否很好地代表了编程语言的流行度？

> ID：514682
> 
> 赞同：0
> 
> 时间：2009-02-05T05:17:40.797
> 
> 标签：tags, popularity, shared-libraries

SO 标签排序是否很好地代表了编程语言的流行度？

我的第一个猜测是它不是，它主要由 Jeff 的粉丝（他们可能会偏向 .Net）和 Joel 的粉丝（他们可能更偏向于 C/C++）。

**有没有办法获得公正的编程语言流行度统计数据？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-02-05T11:26:22.017

我是[LangPop.com](http://LangPop.com)的创建者，它测量了许多指标来尝试衡量受欢迎程度。我的理念是简单地尝试和衡量许多不同的事物，让人们看到结果，并自己判断。所有的指标也都有缺陷、偏见和优势。

在 SO 标签方面，除了 C# 之外，它们看起来相当准确，但存在巨大的 C# 偏差，所以我暂时不认为我会将 SO 包含在 LangPop 结果中。不过，我一直在关注它。另一个我一直关注的例子是 GitHub，它有大量的 Ruby 项目。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-02-05T05:40:04.543

Stackoverflow 是一个非常有偏见的样本，标签计数可能会进一步扭曲数据。因为 Joel Spolsky 是 SO 的主要营销工具，而且他偏爱 Microsoft 技术，所以这里的技术被大大夸大了。当对其他平台感兴趣的人感觉到这个网站不适合他们并停止参与时，这种偏见就会被放大。

[Tiobe 调查](http://www.tiobe.com/index.php/content/paperinfo/tpci/index.html)被广泛认为是衡量语言流行度的一种手段。像任何调查一样，它也有缺陷，但至少它是为了衡量受欢迎程度而设计的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-05T05:44:46.653

有两个很好的网站可以跟踪这类事情......

[LangPop](http://www.langpop.com/)
[TIOBE](http://www.tiobe.com/index.php/content/paperinfo/tpci/index.html)

尽管我希望他们在 Java 中展示 C#，但对于大多数地方仍在使用 Java，或者人们正在搜索 Java，或者有很多 Java 工作，我并不感到惊讶。我没有任何特别的理由认为他们存在不公平的偏见。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-05T05:21:55.890

这可能不是一个很好的表示，除了您发布的原因之外，还可能是某些技术是新的，并且在其他地方几乎没有可用的帮助，最终会更多地出现在 SO 上。某些技术相当稳定，因此问题会更少，您总是有专家在附近，或者一些专门的社区/论坛站点，如 Oracle 或 Microsoft 产品的站点。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-05T05:27:47.437

我希望 SO 标签排序是一个非常非常粗略的语言流行指南。图 +/- 一个因子或 2 或 3，上面带有大数字的标签可能反映了一般现实。然而，具有较小数字的标签可能在其他领域中表现得更充分。

一旦论坛开始显示偏好，人们将或多或少地被吸引到该论坛，具体取决于该偏好与他们的匹配程度。因此，除了您提到的那些之外，还有一个选择效果。有很多地方可以寻求帮助，但有些语言在网络上已有更好的资源。

获得公正的编程语言流行度统计数据确实很困难。我想您可以查看简历以了解人们所知道的广告内容，但这会受到他们认为会让某人雇用他们的方式的影响。您可以查看广告中的工作，但这也有偏见。如果懂一种语言的人换工作的频率是懂另一种语言的人的两倍，那么在其他条件相同的情况下，你会看到前者提供的工作更多。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-02-05T05:33:56.597

我认为它会根据您如何定义“受欢迎程度”而有很大差异，但可能不会有“无偏见”表示。

语言流行度会因您观察到的领域/人群而有很大差异：Web 开发人员可能会大量使用 PHP（如果不是必须流行的话），游戏开发人员可能会告诉您 C++ 和 Flash/AS 是万能*的*。 -所有的编程，Windows 开发人员目前可能正在广泛采用 C#，...

通过查看工作机会、博客、论坛、堆栈溢出可能可以观察到趋势，但你不会得到比趋势更多的东西，而且我认为没有什么真正通用的可以有任何用处。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2009-02-10T17:24:33.090

[ohloh.net](http://www.ohloh.net/)有一些非常好的指标。它从一堆项目的版本控制存储库中读取并提供图表。

[在 Ohloh 比较语言](http://www.ohloh.net/languages/compare)

# c# - UrlEncode - Javascript 与 C#

> ID：514688
> 
> 赞同：6
> 
> 时间：2009-02-05T05:19:34.520
> 
> 标签：c#, javascript, encoding, urlencode

我有一个需要一些参数的 URL。这些参数的值可以是重音字符，所以我绝对需要对它们进行 UrlEncode。奇怪的是，我看到了行为或 Javascript 和 .NET 之间的差异。

假设我尝试对“éléphant”一词进行 UrlEncode。在 JavaScript 中（根据本网站：[http](http://www.albionresearch.com/misc/urlencode.php) ://www.albionresearch.com/misc/urlencode.php ），我得到以下信息：%E9l%E9phant。这对我来说似乎是正确的。但是，在 .NET 中使用此调用 (System.Web.HttpUtility.UrlEncode("éléphant")) 我得到“%c3%a9l%c3%a9phant”。**怎么了？我错过了什么？如果我想在 .NET 中获取 %E9l%E9phant 该怎么办？**

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-02-05T05:31:35.573

System.Web.HttpUtility.UrlEncode 将使用 UTF8（我认为..）作为其默认编码器，您可以通过指定一个来更改它..

```
System.Web.HttpUtility.UrlEncode("éléphant", Encoding.Default); // %e9l%e9phant 
```

尽管最好指定一个实际的代码页或其他代码页，而不是依赖于操作系统默认值。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-02-05T12:27:53.843

> 在 JavaScript 中（根据本网站：[http](http://www.albionresearch.com/misc/urlencode.php) ://www.albionresearch.com/misc/urlencode.php ），我得到以下信息：%E9l%E9phant。

那个页面是错误的。JavaScript 也使用 UTF-8，就像 .NET 默认使用的那样。自己试试：

```
javascript:alert(encodeURIComponent('éléphant'))
%C3%A9l%C3%A9phant 
```

今天的 URL 是 UTF-8。不要再尝试使用 cp1252 了。UTF-8 是你的朋友。相信 UTF-8！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-02-05T05:34:59.670

参考：

```
js:       %E9 l     %E9 phant
.net: %c3 %a9 l %c3 %a9 phant 
```

不同之处在于一个是`UTF-8`URL 编码，而另一个是给你`ANSI`URL 编码。

在 .NET 中，尝试：

```
Dim a As String = System.Web.HttpUtility.UrlEncode( _
    "éléphant", _
    Text.Encoding.Default) 
```

我明白了

```
 %e9 l     %e9 phant 
```

因此。这与您为 JavaScript 提供的字符串匹配，但 Hex Character 大小写除外。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-02-05T05:38:25.277

Encoding.Default 仅适用于系统当前代码页设置为西欧的情况。现在，如果 Javascript 也与 .NET 编码器在同一台机器上运行，这可能很重要，但如果不是，那么您可以将代码页强制为西欧代码页：

```
System.Web.HttpUtility.UrlEncode("éléphant", Encoding.GetEncoding(1252)); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-02-05T06:22:12.570

您也可以尝试对它们进行 base64 编码。

之前有一篇[文章](https://stackoverflow.com/questions/246801/how-can-you-encode-to-base64-using-javascript)涉及在 JavaScript 中执行此操作。

至于在 .NET 中，有很多例子展示了如何做到这一点。这是我[在](http://jasonf-blog.blogspot.com/2005/06/base-64-encodingdecoding-using-net.html)Google 上找到的。

当然，字符串可能比 urlencoding 大一点。但是，它们会被混淆，这可能是一个优势，具体取决于应用程序。

# websphere - 将 WebSphere Portal 6 portlet 部署到 WebSphere Portal 5

> ID：514708
> 
> 赞同：0
> 
> 时间：2009-02-05T05:34:25.647
> 
> 标签：websphere, deployment, portlet, portal

我将 Eclipse 3.2.2 与 WebSphere Portlet Factory Designer 6.0.2 一起使用。

我有一个为 Portal 6 开发的 portlet，它工作正常，我可以构建 portlet War 并很好地部署到 Portal 6 服务器。

但是，我们只有运行 Portal 5 的生产服务器。那么如何构建与 Portal 5 兼容的 War 文件呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-30T00:50:31.760

PF 6.0.2 支持Portal 5，我不明白为什么portlet war 文件会依赖于门户版本。您是否尝试过在门户 5 上部署相同的战争文件？

# java - Java HTTP Snooper（代理）不转发服务器响应

> ID：514714
> 
> 赞同：0
> 
> 时间：2009-02-05T05:36:28.480
> 
> 标签：java, sockets, proxy, monitoring

我正在用 Java 编写一些代理程序。以下是它的工作原理：

1.  浏览器将连接到程序。
2.  浏览器的任何请求都将首先打印到标准输出，然后转发到服务器。
3.  然后服务器返回一个响应，该响应也打印到标准输出，然后转发回浏览器。

我的问题是，第 1 步有效，第 2 步有效，但第 3 步失败。该程序可以获得响应，并将其正确打印到标准输出，但浏览器似乎无法获得它。我已经修改了程序以隔离问题。

它在这里所做的就是将响应直接打印到浏览器：

```
 ServerSocket client = null;
 try {
      client = new ServerSocket(snoopPort);
 } catch (IOException e) {
      System.out.println("ERROR: Could not listen on port: " + snoopPort);
      System.exit(-1);
 }

 Socket clientSocket = null;
 try {
      clientSocket = client.accept();
 } catch (IOException e) {
      System.out.println("ERROR: Accept failed on port: " + snoopPort);
      System.exit(-1);
 }

 PrintWriter snoopOut = new PrintWriter(clientSocket.getOutputStream(), true);

 snoopOut.print("HTTP/1.1 200 OK\r\n");
 snoopOut.print("Date: Thu, 05 Feb 2009 06:37:28 GMT\r\n");
 snoopOut.print("Server: Apache\r\n");
 snoopOut.print("Set-Cookie: Apache=99.245.58.244.1233815848703045; path=/\r\n");
 snoopOut.print("Accept-Ranges: bytes\r\n");
 snoopOut.print("Transfer-Encoding: chunked\r\n");
 snoopOut.print("Content-Type: text/html\r\n");
 snoopOut.print("\r\n");
 snoopOut.print("<html><head><title>test</head><body>hello world!</body></html>\r\n");

 snoopOut.close();

 clientSocket.close();
 client.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-05T05:43:52.663

写入 snoopOut 后尝试刷新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-05T06:05:08.533

尝试改变：

```
snoopOut.write(svrRead); 
```

到

```
snoopOut.println(svrRead); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-05T06:10:13.250

您是否尝试关闭 clientSocket？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-05T06:47:58.040

这是一个理论：程序开始时您是否从代理连接到服务器？如果几秒钟内没有从套接字获取任何数据，许多网络服务器将断开连接（以避免 DOS 攻击等）。如果是这种情况，那么可能会推迟连接到服务器，直到客户端连接并且您已经读取了来自客户端的请求。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-05T07:09:33.503

也许是因为 println() 只在输出中添加了一个换行符 (LF)，而 HTTP 规范希望每一行都以 CRLF 结尾？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-05T17:09:02.607

在您修改后的描述中，我猜您对 http 消息有疑问。这是正确的：“传输编码：分块”？（在我看来并没有分块）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-05T20:20:58.660

好的。我已经半解决了这个问题。编码？这是完美的。一切正常。这是我运行的环境。

我在 vista 机器上测试它，尽管禁用了所有防病毒和防火墙，但它不会让我连接到端口。当我把它带回去工作时，它完美无瑕。为什么？我仍然必须弄清楚。不过谢谢大家的帮助！

# java - 在最近的单词边界上截断字符串

> ID：514721
> 
> 赞同：9
> 
> 时间：2009-02-05T05:39:54.043
> 
> 标签：java, string

是否可以在多个字符后将 Java 字符串截断到最近的单词边界。类似于 PHP wordwrap() 函数，如本[例](https://stackoverflow.com/questions/79960/how-to-truncate-a-string-in-php-to-the-word-closest-to-a-certain-number-of-charac)所示。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-02-05T05:50:22.837

使用 a `java.text.BreakIterator`，如下所示：

```
String s = ...;
int number_chars = ...;
BreakIterator bi = BreakIterator.getWordInstance();
bi.setText(s);
int first_after = bi.following(number_chars);
// to truncate:
s = s.substring(0, first_after); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-05T05:54:04.793

您可以使用正则表达式

```
Matcher m = Pattern.compile("^.{0,10}\\b").matches(str);
m.find();
String first10char = m.group(0); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-12T18:15:29.217

使用第一种方法，您最终会得到比 number_chars 更大的长度。如果您需要一个确切的最大值或更少，例如 Twitter 消息，请参阅下面的实现。

请注意，正则表达式方法使用空格来分隔单词，而 BreakIterator 会分解单词，即使它们有逗号和其他字符。这是更可取的。

这是我的全部功能：

```
/**
     * Truncate text to the nearest word, up to a maximum length specified.
     * 
     * @param text
     * @param maxLength
     * @return
     */
    private String truncateText(String text, int maxLength) {
        if(text != null && text.length() > maxLength) {
            BreakIterator bi = BreakIterator.getWordInstance();
            bi.setText(text);

            if(bi.isBoundary(maxLength-1)) {
                return text.substring(0, maxLength-2);
            } else {
                int preceding = bi.preceding(maxLength-1);
                return text.substring(0, preceding-1);
            }
        } else {
            return text;
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-06T11:08:23.220

当打破句子是 URL 时，解决方案`BreakIterator`并不是很简单，它打破 URL 不是很好的方法。我宁愿使用我的解决方案：

```
public static String truncateText(String text, int maxLength) {
    if (text != null && text.length() < maxLength) {
        return text;
    }
    List<String> words = Splitter.on(" ").splitToList(text);
    List<String> truncated = new ArrayList<>();
    int totalCount = 0;
    for (String word : words) {
        int wordLength = word.length();
        if (totalCount + 1 + wordLength > maxLength) { // +1 because of space
            break;
        }
        totalCount += 1; // space
        totalCount += wordLength;
        truncated.add(word);
    }
    String truncResult = Joiner.on(" ").join(truncated);
    return truncResult + " ...";
} 
```

Splitter/Joiner 来自番石榴。我还在`...`我的用例末尾添加（可以省略）。

# svn - 将 svn 分支导入 git

> ID：514725
> 
> 赞同：3
> 
> 时间：2009-02-05T05:42:48.390
> 
> 标签：svn, git

我是 git 新手，并且有一个 subversion 存储库，我希望能够偶尔导入到 git 存储库（用于部署）。所以我想使用 svn 执行大部分更新，但想看看将它推送到 git 的最佳方法是什么（只是默认/主分支）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-05T06:41:49.410

我知道您只想导入 svn 存储库的 master/trunk 分支，但我想提一下**[svn2git](http://rubyforge.org/projects/svn2git/)**以便将您的 svn 导入 git 存储库。

这比 `git svn clone`因为如果你在 svn 中有这段代码更好：

```
 trunk
    ...
  branches
    1.x
    2.x
  tags
    1.0.0
    1.0.1
    1.0.2
    1.1.0
    2.0.0 
```

**`git-svn`**将通过提交历史来构建一个新的 git repo。
它将**所有分支和标签导入为远程 svn 分支，而您真正想要的是 git-native 本地分支和 git tag objects**。
所以在导入这个项目后，你会得到：

```
 $ git branch
  * master
  $ git branch -a
  * master
    1.x
    2.x
    tags/1.0.0
    tags/1.0.1
    tags/1.0.2
    tags/1.1.0
    tags/2.0.0
    trunk
  $ git tag -l
  [ empty ] 
```

在 svn2git 完成你的项目后，你会得到这个：

```
 $ git branch
  * master
    1.x
    2.x
  $ git tag -l
    1.0.0
    1.0.1
    1.0.2
    1.1.0
    2.0.0 
```

最后，它确保 master 的 HEAD 与 svn repo 的当前主干相同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-05T05:47:39.673

为什么不在你的工作站上用 git 工作呢？那将是最直接的。

*   `git svn clone`将获取您的 SVN 存储库并将修订导入新的 git 存储库。
*   如果您需要推送到远程 git 存储库进行部署，那么`git remote add`将为您添加它。
*   如果您需要推送回 SVN 存储库，那么`git svn dcommit`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-05T06:35:59.280

简而言之：

```
mkdir my_blog_tmp
cd my_blog_tmp
git-svn init http://code.yoursite.net/my_blog/trunk/ --no-metadata
git config svn.authorsfile ~/Desktop/users.txt
git-svn fetch 
```

并恭喜您加入我们的 gits！[这](http://www.gnome.org/~newren/eg/git-for-svn-users.html)是（前）svn 用户的一个很好的备忘单。

# api - Interface Control Document examples?

> ID：514742
> 
> 赞同：4
> 
> 时间：2009-02-05T05:51:09.137
> 
> 标签：api, documentation, interface

I am leading a team of fellow student programmers this semester on a long-term project (long enough that I may graduate before it's done). I've worked with ICD's in an internship, but not everyone on the team has had this experience, and I can't show them the documents I worked with due to a non-disclosure agreement.

Can anyone give links to 'real-world' interface control documents? I could come up with some toy examples on my own, but I would like to show these documents at their most useful.

The main focus of our ICDs will be for interoperability of different hardware components, but all forms of ICD are welcome.

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2011-08-24T17:31:01.143

**知识对象WEB服务接口控制文档**

**愿景**：为 需要访问比索的*已编辑（私人信息）*应用程序提供数据层支持。

[http://localhost:8080/knowledge_objects/application.wadl](http://localhost:8080/knowledge_objects/application.wadl) 返回一个 Web 应用程序描述语言 (WADL) 页面，其中包含有关 Knowledge_objects 方法的信息。

1.  **按日期范围获取密钥** 摘要：http://:/knowledge_objects/keys/{start}/{end} 示例：[http://localhost:8080/knowledge_objects/keys/2009-10-27/2010-01-01](http://localhost:8080/knowledge_objects/keys/2009-10-27/2010-01-01)

示例返回：

```
<Keys> 
  <DocumentID>200800000009</DocumentID> 
  <DocumentID>200800000010</DocumentID> 
  <DocumentID>200800000011</DocumentID> 
  <DocumentID>200800000012</DocumentID> 
  <DocumentID>200800000217</DocumentID> 
  <DocumentID>200800000001</DocumentID> 
</Keys> 
```

1.  **通过id获取知识对象** 摘要：http://:/knowledge_objects/{doc_id} 示例：http://:/knowledge_objects/200910273200 示例返回：

    `<?xml version="1.0" encoding="ISO-8859-1"?> <Report> <Documents>
    *REDACTED (private information)* </Report> </Documents>`

# visual-studio - 为什么在 VS2008 中发布失败而没有错误消息？

> ID：514754
> 
> 赞同：3
> 
> 时间：2009-02-05T06:01:54.153
> 
> 标签：visual-studio, visual-studio-2008, svn, publishing

我有一个正在尝试构建和发布的 Web 应用程序。奇怪的是，当我进行清理、构建或重建时，一切似乎都很好。当我进行发布时，虽然我收到发布失败的消息，但没有得到更多信息：

```
========== Publish: 0 succeeded, 1 failed, 0 skipped ========== 
```

如果在复制部分我选择“源项目文件夹中的所有文件”它工作正常，但如果我选择“仅运行此应用程序所需的文件”或“所有项目文件”我会收到失败的消息，但没有任何更多的信息。

我正在使用颠覆，如果我复制（导出）项目并在源代码控制之外打开它，它似乎确实可以正确发布。是否有一些已知的与颠覆的交互不会让这种情况正确发生？有没有办法通过颠覆获得“仅运行此应用程序所需的文件”？

感谢您的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-16T04:57:31.713

Ankh 似乎引起了一些问题。我发现你必须打开 Visual Studio，然后通过转到工具 -> 选项 -> 源代码控制 -> 选择无作为当前源代码控制插件来禁用 Ankh。然后关闭视觉工作室并重新打开它。然后发布似乎工作......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-05T06:23:53.487

输出窗口 (Ctrl+Alt+O) 在发布期间显示信息性消息和错误。行之间有区别吗

```
------ Publish started: 
```

和

```
========== Publish: 0 succeeded, 1 failed, 0 skipped ========== 
```

在所有提到的情况下？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-18T08:35:47.570

我在安装 Subversion 和 Ankh 时遇到了同样的问题，删除 Ankh 后，发布现在又可以工作了，尽管我不知道是什么让 Ankh 阻碍了发布过程

问候

安德烈亚斯

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-18T08:46:33.567

我的项目也发生了同样的事情：发布文件夹受 svn 控制，如果我选择“仅运行此应用程序所需的文件”或“所有项目文件”，则发布将失败。

我怀疑 VS 试图删除“运行此应用程序不需要”的所有文件，或者至少尝试做一些 SVN 不批准的事情。VS 将无法获得写入磁盘的权限，并且发布将失败（没有错误消息，只是说“失败”）。

我找到的唯一解决方案是在发布文件夹上执行 SVN Clean/Update，关闭 VS 并再次打开它。发布将起作用:-(

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-07-18T15:47:37.240

我遇到了完全相同的问题，但是由于 Alexander Prokofyev 的回复很快就解决了，Ctrl+Alt+O) 很快发现该项目试图发布一些已删除的图像。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-02-26T09:00:44.263

![在此处输入图像描述](https://i.stack.imgur.com/yAdha.png)1.检查您的调试文件夹是否包含一些不需要的文件或不工作的文件。如果找到任何文件意味着从您的项目中排除。

2.然后你检查了调试和发布文件夹。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2010-10-14T19:17:04.357

是的，所有发布消息都显示在“输出”窗口中。您也可以通过从“查看”菜单中选择“输出”来打开它。

# python - 将 Python 正则表达式转换为 Shell

> ID：514767
> 
> 赞同：1
> 
> 时间：2009-02-05T06:10:39.987
> 
> 标签：python, applescript

我正在编写一个 Applescript 播放列表生成器。该过程的一部分是读取 iTunes 库 XML 文件以获取用户库中所有流派的列表。这是 python 实现，它可以按我的意愿工作：

```
 #!/usr/bin/env python

# script to get all of the genres from itunes

import re,sys,sets

## Boosted from the internet to handle HTML entities in Genre names
def unescape(text):
    def fixup(m):
        text = m.group(0)
        if text[:2] == "&#":
            # character reference
            try:
                if text[:3] == "&#x":
                    return unichr(int(text[3:-1], 16))
                else:
                    return unichr(int(text[2:-1]))
            except ValueError:
                pass
        else:
            # named entity
            try:
                text = unichr(htmlentitydefs.name2codepoint[text[1:-1]])
            except KeyError:
                pass
        return text # leave as is
    return re.sub("&#?\w+;", fixup, text)

# probably faster to use a regex than to try to walk
# the entire xml document and aggregate the genres
try:
    xml_path = "/Users/%s/Music/iTunes/iTunes Music Library.xml" % sys.argv[1]
except:
    print '\tUsage: python '+sys.argv[0]+' <your OSX username>'
    raise SystemExit

pattern = "<key>Genre</key><string>([^<]+)</string>" 

try:
    xml = file(xml_path,'r').read()
except:
    print '\tUnable to load your iTunes Library XML file'
    raise SystemExit

matches = re.findall(pattern,xml)
uniques = map(unescape,list(sets.Set(matches)))
## need to write these out somewhere so the applescript can read them
sys.stdout.write('|'.join(uniques))
raise SystemExit 
```

问题是，我希望 Applescript 是独立的，并且不需要存在这个附加文件（我计划将它提供给其他人）。而且，据我所知，Applescript 不提供开箱即用的任何类型的正则表达式功能。我可以遍历库中的每个曲目以获取所有流派，但这是一个非常长的过程，我在构建播放列表时已经做过一次。所以，我正在寻找替代品。

由于 Applescript 允许我运行 shell 脚本并捕获结果，我想我可以使用某种类型的 shell 命令来完成相同的行为，无论是 grep、perl 还是其他命令。我的 *nix 命令行技能非常生疏，我正在寻找一些指导。

所以，简而言之，我想找到一种方法将上面的 python 代码翻译成我可以直接从 shell 调用的东西，并得到类似的结果。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-05T07:30:52.307

为什么要使用正则表达式来解析 XML？为什么不使用适当的 XML 库？Python 有一些很棒的实用程序，比如 ElementTree，它们可以让遍历 DOM 变得更加容易，并且它会生成漂亮、友好的对象，而不是无类型的字符串。

以下是一些使用 Applescript 解析 XML 的方法：

[Applescript XML 解析器](http://lists.apple.com/archives/AppleScript-Studio/2005/Sep/msg00114.html)（显然自 Tiger 起可用）

[您也可以与 Applescript 一起使用的 XML 工具](http://www.latenightsw.com/freeware/XMLTools2/)

请记住，就像 Applescript 可以挂接到 iTunes 一样，它也可以挂接到其他已安装的实用程序，例如这些。

最后，为什么不直接用 Python 编写整个东西，因为它有更好的开发工具用于调试并且运行速度更快。如果您正在运行 Leopard，则您已经预装了 Python 2.5.1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-05T11:58:02.093

创建一个独立的应用程序是解决方案吗？

看看py2app：

py2app，与 py2exe 类似，但针对 Mac OS

[看](https://stackoverflow.com/questions/2933/an-executable-python-app)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-08T12:13:07.083

如果您已经在使用 AppleScript，为什么不直接询问 iTunes？

```
tell application "iTunes" to get genre of every track of library playlist 1 
```

# linux - 相当于 ctrl c 命令取消程序

> ID：514771
> 
> 赞同：79
> 
> 时间：2009-02-05T06:14:16.360
> 
> 标签：linux, command-line, copy-paste

我在远程机器上运行一个很长的 linux 程序，我想停止它，但我的问题是如果我使用 kill 命令，那么程序将退出而不保存结果。通常我完成程序的方法是使用`Ctrl`+ `C`，在这种情况下，程序会保存结果，但现在我不在运行会话的机器上，所以我不能按`Ctrl`+ `C`。

我的问题是：有没有办法以远程方式做相当于`Ctrl`+ `C`？

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2009-02-05T06:28:22.057

尝试：

```
kill -SIGINT processPIDHere 
```

基本上`Ctrl C`发送`SIGINT`（中断）信号，而 kill`SIGTERM`默认发送（终止）信号，除非您指定要发送的信号。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-02-05T06:28:57.173

ctrl c 只是发送一个 SIGINT 信号，但还有一些其他信号更柔和一些。[http://www.gnu.org/software/libtool/manual/libc/Termination-Signals.html](http://www.gnu.org/software/libtool/manual/libc/Termination-Signals.html)

我认为您可以使用 kill 命令发送一些其他信号。（有关更多信息，请参阅 man kill ）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-03-26T22:36:58.807

这是 mongod 的示例

从命令行启动守护进程：

```
mongod & 
```

然后稍后

```
kill -SIGINT `pgrep mongod` 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-02-05T14:57:46.113

如果您控制长时间运行的远程进程，则可以为 SIGTERM 安装一个信号处理程序（参见`man signal`和`man sigaction`以及有关此主题的许多 SO 问题），以便在死前很好地清理。

这是很常见的事情。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-05T15:02:38.553

请记住，在您的信号处理程序中，它就像一个中断处理程序，因为您在不破坏程序其余部分的情况下允许您在其中执行的操作*非常有限。*您可以在这里做的最好的事情是设置 atomic_t "should_quit" 变量。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-06-08T10:31:20.040

我正在按照以下方式做

```
killall -2 <ProgramName> 
```

或者

```
kill -2 <PID of your process> 
```

我曾经忘记信号的名称。即这里的 SIGINT/SIGKILL，所以我使用的是 killall -2 或 killall -9 之类的数字

# javascript - 如何在离开当前页面之前用 JS 触发对话框

> ID：514776
> 
> 赞同：10
> 
> 时间：2009-02-05T06:17:18.977
> 
> 标签：javascript

当用户更改表单中的某些内容，然后单击任何将他定向到另一个页面的链接时，我想触发一个弹出窗口，其中显示“您想在离开前保存吗？” 选项。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-02-05T06:33:18.100

例子：

```
 <script type="text/javascript">
     var shouldConfirm = false;
     window.onbeforeunload = function() {
         if(shouldConfirm) {
             return "You have made unsaved changes. Would you still like to leave this page?";
         }
     }
 </script>

 <input id="FullName" type="text" />
 <script type="text/javascript">
     document.getElementById('FullName').onchange = function() {
         shouldConfirm = true;
     }
 </script> 
```

[4GuysFromRolla.com](http://www.4guysfromrolla.com/webtech/100604-1.shtml)上有一篇完整的文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-05T06:29:15.690

这是可以做到的，但这并不总是可靠的：

```
<html>
<head>
<script type="text/javascript">
function leaving()
 {
    if(confirm("Would you like to save?"))
     {
        //Save info
     }
    else
     {
        //Don't save
     }
 }
</script>
</head>
<body onUnload="leaving()">
<!--Stuff-->
</body>
</html> 
```

# java - How to initialize a value in web.xml from a JNDI variable?

> ID：514777
> 
> 赞同：1
> 
> 时间：2009-02-05T06:17:25.963
> 
> 标签：java, jndi, web.xml, deployment-descriptor

In my Java web application, the NTLM domain controller name is specified in web.xml like this:

```
<filter>
<!-- other code -->
    <init-param>
        <param-name>jcifs.http.domainController</param-name>
        <param-value>DCNAME</param-value>
   </init-param>
<!-- other code -->
</filter> 
```

In the above XML, we've hard-coded the domain controller name (DCNAME) in the param-value tag.

Now, **is it possible to read this 'DCNAME' from a JNDI variable**, instead of hard-coding it in web.xml file?

thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-05T07:01:50.930

请参阅此[链接](http://tomcat.apache.org/tomcat-5.5-doc/jndi-resources-howto.html)。您需要像这样定义环境资源：

```
 <Environment name="myName" value="whatever"
         type="java.lang.String" override="false"/> 
```

然后从代码中读取它：

```
Context initCtx = new InitialContext();
Context envCtx = (Context) initCtx.lookup("java:comp/env");
String myName = (String) envCtx .lookup("myName"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-05T06:42:54.337

可以使用传递此参数的 JNDI 在 servlet 的 init() 中读取它。

# language-agnostic - 截取笔记本电脑上的 Fn 键

> ID：514781
> 
> 赞同：15
> 
> 时间：2009-02-05T06:20:06.177
> 
> 标签：language-agnostic, keyboard, hook, keyboard-hook

有时，当我在 Thinkpads/MSI 笔记本电脑上工作时，`Ctrl`和`Fn`键被交换（`Fn`作为最左边的键），这让我抓狂——我一直在`Fn`按而不是`Ctrl`.

我想知道是否有可能拦截`Fn`密钥。我想写一个交换 `Ctrl / Fn` 密钥的钩子，但似乎`Fn`操作系统根本没有处理它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-02-05T06:27:15.587

对不起。正如您所提到的，`Fn`密钥不是由操作系统处理的，而是作为 `Fn + [key]` . 您可能做的最好的事情是将每个`Fn + [key]` 组合映射到`ctrl`（只有当您从不使用`Fn`键时）。

编辑：找到[这个](https://www.autohotkey.com/docs/KeyList.htm#SpecialKeys)。在你放弃希望之前，不妨试一试。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-01T00:05:32.330

如上所述，`Fn`密钥通常在比操作系统更低的级别上运行，因此会修改其行为通常这取决于制造商。一些不是混蛋的制造商通常会提供允许交换`Fn - Ctrl` 密钥的选项（通常在 BIOS 中）。我还听说有人采取极端的选择，对键盘进行物理修改（打开它们并重新布线晶圆中的电路）来交换`Fn - Ctrl`按键。

特定于 Thinkpad：联想为其 Tx10（或 Tx20？不确定）及以上系列笔记本电脑提供了一个用于`Fn - Ctrl`切换的 bios 选项。

对于较旧的型号，forums.notebookreview.com 上的一位名为 middleton 的用户发布了一系列修改后的 BIOS，适用于交换`Fn - Ctrl`. 毋庸置疑，由于这些完全是非预订的，因此使用风险自负。

[http://forum.notebookreview.com/lenovo-ibm/474396-fn-ctrl-swap-all-lenovo-laptops-solved.html](http://forum.notebookreview.com/lenovo-ibm/474396-fn-ctrl-swap-all-lenovo-laptops-solved.html)

如果我赚了很多钱，我会外包杀手来追查和处决那些违反这些既定标准的人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T15:55:53.167

在我的惠普笔记本电脑上，无论出于何种原因，设计师决定放置一列快速功能的媒体键。所以，在我键盘的最左下角是一个计算器键，而不是`Ctrl`键。

我找到了一个名为[KeyTweak](http://webpages.charter.net/krumsick/)的软件，我用它来将计算器键重新映射到`Ctrl`键。

# algorithm - 解决距离问题的最佳方法

> ID：514794
> 
> 赞同：6
> 
> 时间：2009-02-05T06:25:10.410
> 
> 标签：algorithm

有一组共线的点。问题是添加一个位于同一条线上的新点，以便从新点到现有点的距离之和最小。（假设该点位于一条水平线上）。

我想到的解决方案是：

1.  根据它们的 x 坐标对点进行排序（无论如何 y 都无关紧要）。
2.  如果点数是奇数，则将新点放置在与中间点相同的坐标处。
3.  否则，将该点放在 n/2 和 n/2 + 1 个点的中点。

我无法证明上述方法有效。这是正确的吗？还有更好的方法来解决这个问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-02-05T08:10:32.100

如果我们希望最小化绝对距离的总和，我相信中位数是正确的答案，这是显而易见的解释。如果我们希望最小化距离平方和，则平均值是正确的。对于 y = 0 和 x = 0、1、2、101 处的点，平均值为 26，我们可以将中值设为 1.5。与平均值的绝对距离之和为 149，与中位数的绝对距离之和为 102。

在中位数，您左侧的点数与您右侧的点数相同。向左移动少量会增加到您右侧点的所有距离，并减少到您左侧点的所有距离相同的量 - 没有变化。如果您距离中位数一个点或更多点，您可以通过向有更多点的区域移动来减少绝对距离的总和。这减少了从点数较多的区域的距离总和，而不是增加了从点数较少的区域开始的距离总和 - 所以如果你不在中位数，你可以通过移动来改善事情朝着它。这是统计中相当标准的结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-05T10:18:41.513

我认为您可以通过归纳来证明这一点。我会做一些奇怪的，你可以扩展它：

不失一般性，我们可以说这些点位于 y = 0 线上，并且中心点位于 (0, 0) 处。这是因为像旋转和平移这样的仿射变换不会影响相对距离。

设直线上的点集定义为 P = { (x, 0) <= x is real } 将点 X 的距离定义为 sum( P => |P - X| )

**引理 1**：中心点必须沿着线 y = 0。假设中心点在 (x, y) 处，y != 0。考虑点 (x, 0)。

```
sum(P - (x,y)) = sum( sqrt( (px)*(px) + (0-y)*(0-y) ) )
               = sum( sqrt( p*p - 2xp + x*x + y*y ) )
               > sum( sqrt( p*p - 2xp + x*x + (0-0)*(0-0) ) )
               = 总和（P - (x,0))

```

这是一个矛盾，所以 y = 0 必须为真。

**1 个元素的基本情况**：它是奇数个元素，因此选择它：(0, 0)。假设有一点 X = (x, 0) 使得 x 更接近。那么这意味着 |x - 0| < (0 - 0)，或 |x| < 0，这是不可能的。因此 (0, 0) 是中心点。

**3 个元素的基本情况**：它是奇数个元素，所以选择中间点：(0, 0)。不失一般性，令其他两点为(a<0, 0) 和(b>0, 0)。假设有一个更接近的点 X = (x, 0)。那么这意味着：

|x - 0| + |x - a| + |x - b| < |0 - 0| + |0 - a| + |0 - b|

<=>

|x| + |x - a| + |x - b| < |一个| + |b|

然而：

|x| + |x - a| + |x - b| >= |x| + |一个| + |b| >= |一个| + |b|，这与假设相矛盾，因此 (0, 0) 是中心点。

**有 N 个元素的情况（N 个奇数）**。假设所有奇数组都满足上述条件。设 P 为具有 N 个元素的集合，并按如下方式排列它们：

{ (a, 0), Q={N-2 个元素的集合，中心在 (0, 0)}, (b, 0) }

假设中心点是 X = (x, 0)。

```
总和(P - X) = |xa| + |xb| + 总和（Q - X）
           > |xa| + |xb| + sum(Q - (0,0))
           >= |一个| + |b| + sum(Q - (0,0))
           =总和（P-（0,0））

```

这意味着假设是矛盾的，所以（0,0）必须是中心点。

这证明了所有奇数。偶数应该相似。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-05T07:03:37.790

以下不是最好的解决方案。但给出正确的值。

1.  首先找到你的线的角度，将所有点旋转到该角度的反转，成为一条水平线
2.  对所有 X 点进行排序，因为 Y 在旋转后将保持不变
3.  让它成为 X(1), X(2), X(3), ... X(N)
4.  然后将每个 R 从 1 到 N 的计算距离 D(R) 存储为 [(2R-N)*X(R)] - [X(1)+X(2)+X(3)..+X( R)] + [X(R+1)+X(R+2)+X(R+3)...+X(N)]
5.  获得最低 D(R)。
6.  将 X(R), Y 旋转回原始角度。
7.  那是你的期望值。
8.  如果 D(R) 和 D(R+1) 相同，则 X(R)、Y 和 X(R+1)、Y 之间的所有旋转点将是您的期望值。
9.  有趣的是，如果 R 是中间值，那么答案将是最小的，因为加法数 [X(1)+..X(R)] 和 [X(R+1)+..X(N)] 几乎相等，那么差异是最小值，否则如果一侧的附加项数量较高，则差异总是高于相等附加项的数量。同样，如果有偶数个点，则 (N)/2 到 (N/2)+1 之间的所有点的距离都相同。
10.  因此 MEDIAN 是正确答案。

希望这对你有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-05T08:03:38.200

这是通过找到中位数来解决的。请参阅[http://en.wikipedia.org/wiki/Geometric_median](http://en.wikipedia.org/wiki/Geometric_median)（“属性”部分）。在 x 或 y 坐标上执行计算就足够了。只要沿所选轴的坐标对于该线不是恒定的，就可以使用任何一种。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-05T07:26:20.163

有趣的问题！

编辑：以下是错误的，但我不明白我的错误在哪里。

您在问题中解释的中位数解决方案是不正确的解决方案。

既然你想证明正确性，我想尝试如下解决这个问题：

首先，由于所有点都是共线的，我们可以很容易地将它们分成它们的 X 和 Y 分量。然后我们独立地解决 X 和 Y 的问题。假设我们得到了`V[0] to V[n-1]`n 是点数的值。

现在问题变成了计算 x 从而`SUM( (V[0 ... n-1] - x)^2 )`变得最小。我们构建导数`2*n*x - 2*SUM( V[0 ... n-1] )`。

对于 ，这变为 0 `-n * x + SUM( V[0 ... n-1] )`。因此，`x = SUM( V[0 ... n-1] ) / n`。

因此，只需将所有值相加并除以 n 即可得到正确的最小解。对 x 和 y 执行此操作后，您将获得所需的点。

这也等于我在第一次考虑您的问题时所做的假设，并且它适用于我测试的一些值。希望这可以帮助。:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-08T22:25:14.000

以上，mcdowella、FryGuy 和 ShreevatsaR 在我下面的回复中有想法。

设 n 为直线上的点数。让这些点是 p(1), ..., p(n)，从左到右标记。

案例 n = 1。正确。

案例 n = 2。正确。您可以选择两点之间的任何点。

案例 n >= 3\. 引入 xy 坐标系。旋转平面，使点位于 x 轴上。

与其他点的距离最小的点必须在区间 [p(1), p(n)] 内，原因如下：如果它在 p(1) 的左侧，则将其向右移动一点（足够小以使 x 不会碰到 p(1))，从而减小距离。同样，如果它在 p(n) 的右侧。

选择线上的任意点 x，不一定是 p(1), ..., p(n) 之一。

令 D 为从 x 到其他点的距离之和。

令 L 为 x 左侧的点数。同样，设 R 为右侧的点数。

有三个子情况。

子案例 1：x 是中位数。所以 L = R。如果我们将 x 向左移动少量 e，则距离总和变为 D - Le + Re + e = D + e > D。类似地，向右移动。所以中位数给出了一个局部最小值。

子案例 2：x 在中位数的左侧。类似于下面的子案例。

子案例 3：x 在中位数的右侧。所以 L >= R。有两个点使得 x 在 (p(i), p(i + 1)] 中（左端点被排除，但右端点被包括在内）。令 e = x - p(i ）。

将 x 向左移动 e。我们可以让 x 变成 p(i)。距离总和变为 D - Le + Re = D - (L - R)e <= D。也就是说，我们可能会减少 D。我们不会增加它。

我们继续向左移动 x，可能会减少距离总和，而不是增加它，直到 x 成为中位数。所以中位数给出了一个全局最小值。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2009-02-05T06:28:30.310

好吧，您当然不需要对它们进行排序。只需取它们的 x 和 y 坐标的平均值。只要它们是共线的，这将在 N 维中起作用。

编辑：我意识到我正在计算平均值。如另一个答案所述，您正在计算中位数，这可能更有可能获得到所有点的最小距离。

EDIT2：中位数是奇数点的正确答案。对于偶数个点，它是沿由该区域定义的最内线段上的任何点，两边的点数相同。

证明（ish）：你找到了一个正确的答案，但是对于偶数点有多个。

对于任何两个点，这些点之间的线段上的任何点都将使其到两个点的距离之和相同。该线段之外的任何点的距离都将大于线段上的距离。

因此，要找到与所有共线点的距离最小的点，您需要将问题分解为包含两个点的集合，即完全包含在其他线段中的线段。然后，只取最小的线段（或奇数点的点）并在该线段上选择一个点。该线段上的所有点与该特定配置的所有点的距离都最小。

如果要绘制此图，点图的所有距离都将具有相同的形状：/ 对于线段，距离图将如下所示：_/

本质上，您想要添加所有距离图并找到最小值。

# user-interface - 设计 Adob e AIR 应用程序 - 遵循哪些可用性指南？

> ID：514795
> 
> 赞同：1
> 
> 时间：2009-02-05T06:25:13.373
> 
> 标签：user-interface, air, usability, user-experience, rich-internet-application

Adobe AIR 使我们能够突破浏览器围栏之外创建富 Internet 应用程序 (RIA) 的界限。一些公司已经区分了诸如富桌面应用程序 (RDA) 之类的应用程序。

我们分别为 Web、桌面和 RIA 应用程序提供了可用性指南。但是，由于 Adob​​e AIR 使我们能够使用 Web 技术（HTML、Java 脚本、AJAX、Flex、AS..）创建桌面应用程序，这种类型的应用程序似乎不适合上述任何类别。

所以我的问题是：将 AIR 应用程序与 RIA 区分开来是否正确，因为 AIR 应用程序存在于用户桌面中，并且用户在使用桌面应用程序与浏览器上的应用程序时会有不同的心理模型？

湾。在为 Adob​​e AIR 创建应用程序时需要遵循哪些可用性准则？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-05T06:33:00.503

可用性指南应该是应用程序使用环境的函数，而不是构建应用程序的技术。如果您有桌面应用程序的可用性指南，那么（因为 AIR 提供了允许 Flex 应用程序在桌面上运行的资源），最小意外原则将要求它应该遵循与用 .NET、VB6、C++ 编写的应用程序相同的指南Delphi 等用作桌面应用程序。

更有趣的问题是，为浏览器编写的 Flex 应用程序的指南与普通 Web 指南有何不同，因为它提供了更大粒度的用户控制；但这不是这个问题的目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-07T13:23:03.370

在开发 AIR 应用程序时，我倾向于遵循 Apple 的人机界面指南（甚至包括元素周围的填充量等）。即使您不完全使用它们，它们也绝对值得一读：

[http://developer.apple.com/documentation/userexperience/Conceptual/AppleHIGuidelines/XHIGIntro/chapter_1_section_1.html](http://developer.apple.com/documentation/userexperience/Conceptual/AppleHIGuidelines/XHIGIntro/chapter_1_section_1.html)

# sql - 使用 UNION 创建 MySQL 视图

> ID：514817
> 
> 赞同：12
> 
> 时间：2009-02-05T06:34:28.440
> 
> 标签：sql, mysql, union

我正在尝试为以下查询创建一个视图。

```
SELECT DISTINCT
  products.pid        AS id,
  products.pname      AS name,
  products.p_desc     AS description,
  products.p_loc      AS location,
  products.p_uid      AS userid,
  products.isaproduct AS whatisit
FROM products
UNION
SELECT DISTINCT
  services.s_id       AS id,
  services.s_name     AS name,
  services.s_desc     AS description,
  services.s_uid      AS userid,
  services.s_location AS location,
  services.isaservice AS whatisit
FROM services 
```

但不能这样做。我正在使用 MySql 查询浏览器。我得到的错误是：

> 只能从 SELECT 命令的活动结果集中创建视图

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-02-05T09:34:18.467

```
CREATE VIEW vw_product_services AS
SELECT DISTINCT products.pid AS id,
                products.pname AS name,
                products.p_desc AS description,
                products.p_loc AS location,
                products.p_uid AS userid,
                products.isaproduct AS whatisit
           FROM products
          UNION
          SELECT DISTINCT services.s_id AS id,
                services.s_name AS name,
                services.s_desc AS description,
                services.s_uid AS userid,
                services.s_location AS location,
                services.isaservice AS whatisit
           FROM services 
```

我试过了，它奏效了！感谢大家 ：）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-05T06:38:43.520

您可能希望在第二个选择中切换用户 ID 和位置的顺序。在联合的所有选择中，列名应匹配 1 到 1。

编辑：对于查询浏览器，正如[这](http://www.packtpub.com/article/creating-view-with-mysql-query-browser)指出“要从查询创建视图，您必须已成功执行查询。更准确地说，视图是从最新成功执行的查询创建的，不一定是从当前的查询查询区"

所以您需要先执行查询，然后再在查询浏览器中创建视图。

错误来自查询浏览器而不是 mysql。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-05T06:42:46.803

您将不同的类型合并到同一列中。（名称可以不同，但​​类型必须相同，或者至少可以自动转换。）但正如@Learning 指出的那样，看起来你已经扭曲了 SELECT 列枚举。

以防万一，正确的语法（对我有用）是

```
CREATE VIEW myView 
AS  
SELECT ... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-05T11:24:59.883

关于UNION的一点评论。UNION 仅返回结果集的不同值。所以没有必要将 SELECT DISTINCT 与 UNION 结合使用。不使用 DISTINCT 可能会更好地提高性能。

关于 UNION 的更多信息可以在这里找到：[SQL UNION Operator](https://www.w3schools.com/SQL/sql_union.asp)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-05T08:57:55.733

[错误消息在mysql-gui-tools 的](http://www.sfr-fresh.com/fresh/unix/misc/mysql-gui-tools-5.0r14.tar.gz)一部分“QueryBrowser.pas”中。

```
procedure TQueryBrowserForm.SQLCreateViewClick(Sender: TObject);
// ... 
begin
  if Assigned(ActiveResultset) and (ActiveResultset.ResultSet.query.query_type = MYX_QT_SELECT)then
    // ... 
  else
    ShowError('Creation error', _('A view can only be created from a active resultset of SELECT command.'), []);
end; 
```

它由 a) 没有活动结果集和 b) 查询类型错误触发。

删除“DISTINCT”有什么不同吗？无论如何，这是 QueryBrowser 中的一个错误，而不是一个 MySQL。直接在 MySQL 中创建视图应该足以解决问题。

# linux - 内核和用户应用程序之间的通信方法

> ID：514819
> 
> 赞同：3
> 
> 时间：2009-02-05T06:36:46.330
> 
> 标签：linux, ipc, kernel-module

一般是 Linux 编程的新手。

我正在尝试通过共享内存与内核模块通信，但无法调用用户应用程序中使用的函数，例如 shmget(); 我已经在内核模块源代码中安装了 kernel-headers 和 kernel-devel，并包含了，但是这些头文件不包含任何函数。

是否有在内核中使用共享内存的标准方法？

此外，任何有关如何在相同情况下使用套接字的提示都会有很大帮助。

使用发行版：CentOS 5.2 内核：2.6.18-92.1.22.e15

提前致谢。

//添加//为了澄清，我正在尝试制作一个具有典型嵌入式Linux项目共同特征的演示。最终目标是将其移植到 LynxOS 上，看看在大型项目中这样做会出现什么样的问题。

目前演示的主要特点是多进程、管道、消息队列、共享内存、套接字、多线程。

它有一个用户应用程序和一个可加载的内核模块相互通信。用户应用程序内两个进程之间的管道和消息，以及用户应用程序和内核模块之间的共享内存和套接字。

如果我正在做一些偏离课程的事情，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-05T07:43:54.137

你的目的在我看来不是很清楚。共享内存不是用户空间和内核空间之间通信的一种方式。如果你想访问一些内核分配的内存，一种方法是实现 mmap 系统调用。

如果你真的需要写一些内核代码，推荐阅读： [linux device driver第三版](http://lwn.net/Kernel/LDD3/)，第15章就是你要找的。

一旦你有了共享内存，你可能需要一种方法来进行一些同步，即在内核中的一个部分上工作，而在用户空间中使用另一部分。用户空间/内核共享内存的一个例子是[V4L2 API](http://v4l2spec.bytesex.org/)。更友好的解释可以在[LWN 系列](http://lwn.net/Articles/240667/)中找到。

但是，如果您更具体地了解您想要做什么，那么您会在执行此操作的过程中获得更具体的帮助，如果您真的需要一个内核模块，您可以查看哪些内核代码等等。

对于套接字的事情，我知道的还不够，但你应该google for linux + kernel + netlink。它用于通过“标准”套接字调用从用户空间与内核通信，但我真的不知道如何在模块中使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-05T13:32:08.627

内核可以自动访问用户空间内存，内核中已经有很多这样的例子（提示：open()需要访问用户空间才能读取文件名才能打开）

目前尚不清楚您的用例是什么，请更具体。

用户空间和内核之间的正常通信方式是通过 sys 调用；您可以添加自己的（不一定推荐）或扩展一些现有的（字符设备上的 ioctl 是典型的）。

许多内核模块实现了一个设备特殊文件，这是（大多数）设备驱动程序所做的（除了网络接口，它们在 Linux 下不是设备特殊文件）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-03-12T11:45:58.803

以下是您可以与内核 mmap 设备文件通信的方式（为您编写简单的设备驱动程序，或者您也使用 fifo 文件、Netlink 套接字（网络堆栈）、套接字（网络），或编写您的系统调用……如果您详细告诉我你到底想达到什么我可以帮助你更多。

# struts2 - struts2 问题在行动

> ID：514820
> 
> 赞同：0
> 
> 时间：2009-02-05T06:37:27.530
> 
> 标签：struts2, action

我已经使用 struts 2.0.14 启动了一个应用程序，Web 服务器是 apache tomcat 6.0。我收到一个错误，请帮我解决这个问题。

应用名称：**strutsTest**

欢迎页面：名为“<strong>validTest”的包中的 EmpDetails.jsp 具有如下操作**：**

```
<s:form action="takeAction" method="post> 
```

动作类：Employee.java，我也写了Employee-validation.xml。

现在，当我运行我的应用程序时，它会打开以下网址：`http://localhost:8080/strutsTest/validTest/empDetails.jsp`

empDetails.jsp 中只有一个名为 email 的文本框，我正在使用 employee-validation.xml 验证此文本框。为了测试这一点，我输入了无效的电子邮件，并在同一欢迎页面 (empDetails.jsp) 的顶部收到错误消息。但是这个网址改为： `http://localhost:8080/strutsTest/validTest/takeAction.action`

没什么大不了。现在，我输入了有效的电子邮件并提交，但收到一条错误消息而不是下一页，即thanks.jsp，并且 url 已更改为 -

`http://localhost:8080/strutsTest/takeAction.action`

错误是：

```
HTTP 状态 404 - /strutsTest/thanks.jsp

类型状态报告

消息 /strutsTest/thanks.jsp

描述 请求的资源 (/simpleStruts2.0.14/thanks.jsp) 不可用。

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-05T06:48:36.383

根据您的描述，验证部分被排除在您的问题之外。在您的 struts.xml 文件中，您可能已将结果配置为：

```
<action name="takeAction" ...>           
    <result>/simpleStruts2.0.14/thanks.jsp</result>
</action> 
```

结果页面：/simpleStruts2.0.14/thanks.jsp 不可用（所以 HTTP 404 响应），您可以更改为如下内容：

```
<result>/validTest/thanks.jsp</result> 
```

# 3d - 3D 网站和应用程序

> ID：514822
> 
> 赞同：5
> 
> 时间：2009-02-05T06:37:49.137
> 
> 标签：3d, vrml, x3d

在过去的几年里，我一直在努力理解为什么互联网上真正有用的 3D Web 应用程序如此之少。现在是 2009 年，一切看起来都像是 Sears 目录中的页面。您可以每晚打开电视并找到飞行的标志。之后，您可以怀旧并翻阅 ol' N-64 并玩一些塞尔达或马里奥赛车。在 PC 上，《模拟人生 2》已经接近 6 岁了。然后是《魔兽世界》。当前一代的用户——比方说 Facebook 人群——在处理多维环境时没有问题。

然而，在网络上似乎没有发生真正身临其境的事情。我听说 VRML 和 X3D 至少有 10 年了，而且……噗…… - 那里没有发生任何惊天动地的事情。Java 3D ? .. 凉爽的 ！..但是......仍然......等待和等待。

你认为在人们习惯之前需要一个杀手级网络应用程序，还是会寻求使用更吸引人的网络体验？

我不是在谈论第二人生和其他专门下载的应用程序。我可能更专注于 Lively、SceneCaster 或 Hangout 等应用程序，或者其他六种直接“无痛”交付到网页中的应用程序。

我自己特别感兴趣的是虚拟商店和沉浸式购物领域。试图理解为什么普通用户不想浏览和徘徊在不断变化的商场空间——就像在现实世界中一样——被意想不到的发现所吸引，这是一个挑战。

3D web 总是在未来 5 年吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-02-05T07:31:14.210

3D 商店似乎将现实世界购物中心的缺点带到了互联网上。人们真的想“走”过亚马逊来找到他们想要的东西吗？

滚动浏览页面上的搜索结果列表比浏览三维空间以查看相同的结果要快得多。

先前评论中给出的链接 ( [http://www.windowshop.com/](http://www.windowshop.com/) ) 很好地说明了这一点（尽管它基本上是一个带有缩放功能的 2D 界面）。

3D 在查看单个项目时占有一席之地。一些网站已经展示了他们商品的“全景”。这似乎为客户增加了价值，这就是这样做的原因。

不过，我不太确定 3D 是否是*导航*的好主意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-03-21T12:01:43.767

W3C 和 Web3D 联盟之间正在进行关于将 X3D 集成到 HTML5 的讨论（很像 SVG 是为 HTML4 完成的）。

一个初步项目：[http](http://www.x3dom.org/) ://www.x3dom.org/ 。自去年以来，该项目非常活跃。

在这里阅读论文，这很有趣。鉴于 W3C 似乎密切关注该项目，并且计划使用几个渲染后端（实际上是 WebGL，但后来例如 Google O3D），VRML/X3D 家伙的旧梦想可能会在不远的将来成为现实.

然而，由于它取决于 HTML5 的采用，我认为至少需要 5 年......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-05T06:58:10.047

创建基于 Web 的 3d 用户界面的技术的一些主要问题：

*   破坏浏览器导航
*   对搜索引擎不友好
*   残疾人不易进入

我不认为你会看到亚马逊或 ebay 推动推出 3d 界面，直到谷歌有办法索引它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-05T07:44:29.347

因为使用 3d 不是传达信息列表和表格数据的有效方法。这包括销售产品的电子商务网站。

我不想旋转 3d 摄像机角度，向前移动，最后左转到达 Amazon.com 销售花园软管的部分。我只想输入“花园软管”，然后在搜索结果中查看易于消化的产品列表。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-21T15:30:05.523

您必须等到所有浏览器（以及主要的浏览器）都内置了 3D 支持，就像 3D 图像支持在它真正起飞之前一样。这将需要一种或两种格式来“获胜”，就像 gif 和 jpg 赢得图像竞赛一样。我们可能会通过 Silverlight 和 Adob​​e Air 实现这一目标。

“普通”人不想安装插件和扩展——他们甚至可能不知道如何安装。我们极客和书呆子总是会安装最新的小玩意儿，但我们只是普通民众的一小部分。

编辑：我刚刚意识到已经有一个大多数人都会安装的插件——它叫做 Flash。真正的障碍是没有感知到的需求。

编辑：[Mozilla 和 OpenGL 走到一起](http://dusanwriter.com/index.php/2009/03/25/3d-in-a-browser-mozilla-and-open-gl-to-build-plug-in-free-virtual-world-access/)——这可能是 3D 需要起飞的地方，但我们必须拭目以待。

# c++ - C++ 是否深度初始化类成员？

> ID：514824
> 
> 赞同：2
> 
> 时间：2009-02-05T06:38:55.670
> 
> 标签：c++, data-structures, oop

我在 C++ 中有一个具有以下成员的类：

```
map< someEnum, vector<SomeObject*>* > someMap 
```

所以我有一张地图，它为我拥有的每个枚举提供了一个对象向量。对于我的生活，我无法理解 C++ 是如何初始化这些对象的。默认情况下是否深度初始化它们？如果没有，我需要做什么？

无论我如何尝试这样做（并且我已经尝试了*一切*），我都会遇到分段错误，所以我猜我在概念上遗漏了一些东西。

* * *

我应该注意到我尝试使用：

```
map< someEnum, vector<SomeObject*> > someMap 
```

也一样，但效果不佳。在这种情况下，C++ 是否对向量进行深度初始化？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-02-05T07:21:06.333

规则是：如果 STL 容器包含**指向 objects**的指针，它不会**在**堆上创建对象并将它们分配给这些指针。但是，如果它本身包含**对象**，它**会**调用每个包含对象的默认构造函数，从而初始化它们。

您在这里拥有的是一个包含指针的映射（无论哪种类型）。所以不要指望映射使这些指针指向内存。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-05T06:47:58.133

看起来地图为您提供了指向对象向量的指针。如果您尝试通过以下方式使用地图

`mymap[MY_ENUM]->push_back(whatever);`

在初始化之前，你会得到一个段错误。您要么需要先初始化向量

`mymap[MY_ENUM] = new vector<SomeObject*>;`

或者，*更好*的是，让地图给你一个简单的 ol' 矢量

`map <someEnum, vector<SomeObject*> > mymap;`

当您第一次调用`mymap[MY_ENUM]`时，向量将被默认初始化（大小为零）。问题是您在放大之前尝试使用向量的条目吗，例如，

`mymap[MY_ENUM][2] = whatever;`

你仍然需要使用`push_back`or `resize`，或者一些给你一些空间的东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-05T11:04:06.523

仅通过声明一个对象，您不会将 SomeObject 指针的向量很好地隐藏在该映射中。

相反，您必须像这样进行：

```
map< someEnum, vector< SomeObject* >* > someMap;

someMap [ somevalue ] = new vector< SomeObject* >;

someMap [ somevalue ] -> push_back( new SomeObject ); 
```

你的痛苦不止于此。在地图超出范围之前，您需要正确清理它。

```
// Untested code, may not even compile.
for( map< someEnum, vector< SomeObject* >* >::iterator iter = someMap.begin( ) ; iter != someMap.end( ) ; ++i )
{
     for( vector< SomeObject* >::iterator v = iter -> second -> begin( ) ; v != iter -> second -> end( ) ; ++v )
         delete *v;

     delete iter -> second;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-05T07:06:25.040

您将得到一个空映射，它可以存储由 someEnum 引用的 std::vector*。空地图将不包含向量。您可以创建一个新的矢量对象（使用 new 是最安全的方法）并将其指针存储在地图中。

这可能是吹毛求疵，但如果枚举是固定（小）大小，那么为什么要为它们制作地图？除非您的人口稀少，否则一个简单的数组将更容易让您的面条四处走动，并且可能会提高空间和 CPU 效率。

C++ 无法初始化地图或矢量的内容，因为它不知道*您*要在那里存储什么。

# sql-server - Microsoft SQL Server 2005/2008：XML 与 text/varchar 数据类型

> ID：514827
> 
> 赞同：10
> 
> 时间：2009-02-05T06:41:47.897
> 
> 标签：sql-server, xml, database, sql-server-2005, optimization

以 XML 类型而不是 text/varchar/ntext 存储 XML 是否更有意义（服务器端验证 XML/schema/dtd 除外）？我不打算在数据库端进行任何 XML 操作。

我调查的目的是减少数据库大小。我可以为此目的对无类型 XML使用[XML 数据类型吗？](http://msdn.microsoft.com/en-us/library/ms345117.aspx)优缺点都有什么？

我找到了[一篇与该主题相关](http://searchsqlserver.techtarget.com/tip/0,289483,sid87_gci1296396_mem1,00.html)的文章，但我不确定作者的假设/结论是否正确。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-02-05T06:50:49.423

如果您将 xml 存储在 xml 类型的列中，则数据不会以简单文本的形式存储，如在 nvarchar 情况下，它将存储在某种已解析的数据树中，而该树又将小于未解析的 xml 版本。这不仅减少了数据库的大小，而且还为您提供了其他优势，例如验证、易于操作等（即使您没有使用这些中的任何一个，它们仍然可供将来使用）。

另一方面，服务器必须在插入时解析数据，这可能会减慢您的数据库速度 - 您必须决定速度与大小。

**编辑：**

就个人而言，我认为只有当数据库中的数据具有难以在关系模型中实现的结构时，才应将其存储为 xml，例如布局、样式描述等。通常这意味着不会有太多数据，速度是不是问题，因此添加了 xml 功能，例如数据验证和操作能力（最后但并非最不重要的一点，在管理工作室中单击值并查看格式化的 xml 的能力 - 我真的很喜欢这个功能！），超过成本。

我没有在数据库中存储大量 xml 的直接经验，如果可以选择，我不会这样做，因为它几乎总是比关系模型慢，但如果是这样的话，我d 建议对这两个选项进行分析，并在最适合您需求的大小和速度之间进行选择。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-02-05T15:55:47.870

我的快速调查显示 MS SQL 2005 (Express Edition)

> Microsoft SQL Server 2005 - 9.00.3073.00 (Intel X86) Aug 5 2008 12:31:12 版权所有 (c) 1988-2005 Microsoft Corporation Express Edition on Windows NT 6.0 (Build 6000: )

以大约 70% 的开销存储 XML（可能用于更快的处理/解析）。

转换前我的数据：rows=160320，reserved=178576 KB，data=178184 KB，index_size=272 KB，未使用=120 KB

转换后我的数据：rows=160320, reserved=309702 KB, data=307216 KB, index_size=1672 KB, used=184 KB

**因此，如果您不打算在数据库端使用 XML 技术，那么以 XML 数据类型存储 XML 数据是没有任何意义的。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-08-18T14:05:46.020

我广泛使用 xml 与手持设备进行通信，并且在大多数存储过程中使用 XQuery 来仅从我需要的 XML 中检索数据。效果很好！！我只是担心存储空间，因为只有十万条左右的记录，数据库大小为 1 到 2 GB。我们预计将存储数百万条记录以供日志记录和客户使用。所以在我看到它在空间使用方面实际会做什么之前，这将是令人担忧的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-08T20:33:00.703

使用 XML 数据类型来存储 XML 数据是有意义的，就像在 MS SQL Server 中必须处理 UTF8 到 UTF18 以及反之亦然的转换一样。

# eclipse - 如何在 Eclipse 中删除工作区？

> ID：514833
> 
> 赞同：318
> 
> 时间：2009-02-05T06:43:42.493
> 
> 标签：eclipse, workspace

如何在 Eclipse 中删除工作区？

* * *

## 回答 #1

> 赞同：461
> 
> 时间：2009-02-05T06:47:44.280

只需删除整个目录。这将删除所有项目以及工作区的 Eclipse 缓存和设置。它们保存在`.metadata`Eclipse 工作区的文件夹中。请注意，您也可以将 Eclipse 配置为使用工作区文件夹*之外*的项目文件夹，因此您可能需要验证每个项目的位置。

您可以通过进入首选项的*General/Startup and Shutdown/Workspaces*部分（通过 Preferences > General > Startup & Shudown > Workspaces > [Remove] ）从建议的工作区中删除工作区。请注意，这不会删除文件本身。对于旧版本的 Eclipse，您需要编辑安装目录下的目录`org.eclipse.ui.ide.prefs`中的文件（或在Unix 上，IIRC 中）。`configuration/.settings``~/.eclipse`

* * *

## 回答 #2

> 赞同：280
> 
> 时间：2010-04-23T14:47:28.540

可以在 Eclipse 中删除工作区而不会带来太多麻烦。这些选项在 Preferences->General->Startup and Shutdown->Workspaces 下可用。

请注意，这实际上并没有从系统中删除文件，它只是将其从建议的工作区列表中删除。它`org.eclipse.ui.ide.prefs`从 Eclipse 中更改 Jon 的答案中的文件。

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2011-07-14T02:26:13.067

对于 Mac OS 中的 Eclipse PDT，一旦您删除了实际的工作区目录，选择并切换到该工作区的选项仍然可用，除非您从**Preferences** >> **General** >> **Startup and Shutdown** >> **Workspaces**中删除条目。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2017-03-15T05:41:16.110

我不确定旧版本，但从 NEON 开始，您只需*右键单击工作区*并选择**从启动器选择**选项中删除。

![Eclipse Neon - 删除工作区](https://i.stack.imgur.com/q4CFG.png)

*当然这不会删除原始文件。它只是将其从建议的工作区列表中删除。*

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2015-06-23T09:34:46.897

单击菜单**Window** > **Preferences**并转到**Workspaces**，如下所示：

```
| General
    | Startup and Shutdown
        | Workspaces 
```

选择要删除的工作区，然后单击“**删除**”按钮。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-03-21T05:13:36.907

只需转到 \eclipse-java-helios-SR2-win32\eclipse\configuration.settings 目录并更改或删除**org.eclipse.ui.ide.prefs**文件。

# regex - 易于使用的正则表达式创建工具？

> ID：514834
> 
> 赞同：21
> 
> 时间：2009-02-05T06:43:45.910
> 
> 标签：regex

我尝试了一些正则表达式工具，例如 Regulator、Regulazy 和 RegexBuddy。他们没有做我想做的事，他们希望用户知道正则表达式。

我想要一个傻瓜工具。你告诉工具我需要一个正则表达式，比如“匹配任何以'yes'结尾的东西，并且它至少包含一次出现的短语'/test/'”，它会为你创建正则表达式。

所以我要么用简单的英语或半简单的英语输入我的请求，要么该工具有各种现成的选择，我在它们之间进行选择以创建我想要的临时内容。

有没有这样一个面向非开发人员的工具？我不是在寻找正则表达式测试器。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-02-05T07:27:35.480

我一直是[Ultrapico 的 Expresso](http://www.ultrapico.com/Expresso.htm)应用程序的粉丝。有一个构建器部分可以帮助您（一点）构建表达式的片段。更重要的是，它将逐节解释现有表达式（您自己的或来自内置表达式库的）。

它还包括一个测试和替换部分，用于查看和测试您的表达式。最后，它将生成为 C#、C++ 或 VB.NET 格式化的表达式，以便您确切知道如何将表达式插入到您的项目中。

最棒的是它是免费的。我一直在使用这个工具来帮助了解正则表达式的实际工作原理，尤其是复杂的表达式。不能说它让写表达白痴证明，但它确实让我更容易学习表达......

[Zain Naboulsi 在MSDN 网络广播](http://blogs.msdn.com/zainnab/pages/regular-expression-webcast-series.aspx)中介绍了该工具，可能值得一看。希望这会有所帮助，并祝您的正则表达式之旅好运！

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-02-05T06:55:12.080

[txt2re](http://txt2re.com/)似乎真的很好。我在框中输入“此字符串包含测试并以yes结尾”，单击`test`and `yes`， [得到一个正则表达式](http://txt2re.com/index.php3?s=This%20string%20contains%20test%20in%20it%20and%20ends%20in%20yes&-12&-7)。它不专注于教授如何构建正则表达式，而是向您展示 perl 代码以解析您需要的内容。

该工具的真正强大之处在于它能够识别日期、URL 和标签等内容。然而，空白似乎不太好用，而且它似乎无法处理任何形式的重复。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-02-05T08:34:31.273

我个人非常喜欢 Expresso [http://www.ultrapico.com/Expresso.htm](http://www.ultrapico.com/Expresso.htm) 界面非常干净 - 可以让您测试搜索和替换功能，有很好的帮助，如果您愿意，它还会为您生成 C# 表达式。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-02-05T07:00:09.967

对我来说，最好的工具是[RegexBuilder](http://renschler.net/RegexBuilder/)，它是开源的，用 C# 编写，所以你可以随意定制它；）

享受。;)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-05T04:47:46.153

基于网络（仅一行）：[http ://txt2re.com/](http://txt2re.com/)

离线（可提供全文文件）：Expresso

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-11-01T08:40:03.603

我最喜欢我自己的 RegEx Builder：[http ://www.linuxintro.org/regex](http://www.linuxintro.org/regex)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-02-05T06:53:18.933

我不确定是否存在这样的工具，因为它们通常会做相反的事情：
分析正则表达式并将其翻译成简单的英语。

最接近您需要的解决方案是这个[C# library](http://flimflan.com/blog/ReadableRegularExpressions.aspx)，允许您以半可读的方式编写正则表达式：

而不是这个：

```
const string findGamesPattern = 
@"<div\s*class=""game""\s*id=""(?<gameID>\d+)-game""(?<content>.*?)<!--gameStatus\s*=\s*(?<gameState>\d+)-->"; 
```

你会，使用 ReadableRex：

```
Pattern findGamesPattern = Pattern.With.Literal(@"<div")
    .WhiteSpace.Repeat.ZeroOrMore

    .Literal(@"class=""game""").WhiteSpace.Repeat.ZeroOrMore.Literal(@"id=""")

    .NamedGroup("gameId", Pattern.With.Digit.Repeat.OneOrMore)

    .Literal(@"-game""")

    .NamedGroup("content", Pattern.With.Anything.Repeat.Lazy.ZeroOrMore)

    .Literal(@"<!--gameStatus")

    .WhiteSpace.Repeat.ZeroOrMore.Literal("=").WhiteSpace.Repeat.ZeroOrMore

    .NamedGroup("gameState", Pattern.With.Digit.Repeat.OneOrMore)

    .Literal("-->"); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-02-05T08:31:20.530

我也在使用 Expresso，发现它非常好。在这些工具中对我来说最重要的是验证，而不是用于构建表达式的视觉辅助工具。我只需要一个工具来提醒我一些事情，而不是为我设计它们。

无论如何，这是另一个免费的，我很喜欢。它被称为[Rad Software 正则表达式设计器](http://www.radsoftware.com.au/regexdesigner/)。希望这可以帮助。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2011-09-29T09:33:30.753

试试[RegExr](http://gskinner.com/RegExr/)一个基于 flash 的工具

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-06-04T01:52:26.793

如果你是 Mac 用户，试试这个小部件，虽然它也是一个测试器，但我发现它非常有用，因为它在在线学习正则表达式时非常容易上手

[http://mac.softpedia.com/progDownload/Regex-Widget-Download-28467.html](http://mac.softpedia.com/progDownload/Regex-Widget-Download-28467.html)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-06-05T16:32:23.773

我选择了[RegexBuddy](http://www.regexbuddy.com/)。它有一个调试器、可视化器并将正则表达式翻译成简单的英语。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-08-05T21:12:46.870

直观的**正则表达式分析器和 Composer**类（适用于**PHP**、**Node/JS**和**Python**），[regex composer live example here](http://foo123.github.io/examples/regex-composer/)

[正则表达式分析器 github 存储库](https://github.com/foo123/RegexAnalyzer)

ps我是作者

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-06-25T01:11:53.957

好吧，它仍然是一个非常重要的开发工具，但您可以在[http://www.textpression.com](http://www.textpression.com)上尝试 Textpression披露：我是作者。

Textpression 支持使用拖放编辑器创建可视正则表达式；无需学习正则表达式语法！在撰写本文时，Textpression 仍处于 Alpha 阶段，但请告诉我您的想法！

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-01-26T04:21:40.947

根据您问题中的详细信息，我认为[Regex Builder Tool](https://itsallbinary.com/simply-regex/regex-builder-tool)正是您需要的工具。对于您提出的正则表达式，您会用简单的简单英语给出要求，例如`_Match_anywhere_in_text_ _zero_or_more_of_ ( _any_character_) _then_ _one_or_more_of_ ( _exact_string_ ( test)) _then_ _zero_or_more_of_ ( _any_character_) _then_ _exact_string_ ( yes) _then_ _end_of_line_`

这将自动生成正则表达式`.*test+.*yes$`您还可以使用类似`I did test, results yes`& 的输入在此处测试生成的正则表达式，它会显示生成的正则表达式与您的期望匹配的文本。

# flash - Flv文件下载和浏览器进度条

> ID：514839
> 
> 赞同：1
> 
> 时间：2009-02-05T06:46:47.887
> 
> 标签：flash, browser, download, flv

我刚刚编写了一个基于 Web 的 flv 文件下载实用程序。当我尝试下载 flv 文件时，浏览器没有显示进度条，因为我没有看到剩余的下载时间。我在某处读到，如果您尝试下载的 flv 文件没有与之关联的元标记，则会发生这种情况。[因此，我通过 Perl 模块FLV::Info](http://search.cpan.org/dist/Flv-Info)运行了我的 flv 文件，我看到存在元标记标头。

下面是我看到的 flv 文件的元标记示例：

```
File name          0.360730744040669.flv
File size          167 bytes
Meta               1 event
  canSeekToEnd     1
  filesize         167
  metadatacreator  FLV::File v0.22
  metadatadate     Wed Feb  4 17:00:07 2009 
```

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-05T07:30:46.237

您的 Web 服务器可能没有正确设置 Content-length 标头或类似的东西。

你的文件真的只有 167 字节吗？这似乎有点小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-05T08:31:26.600

正如 jrockway 所说，它可能是 Content-Length 标头 - 我不确定 Firefox 是否默认提供轻松访问，但[Live HTTP Headers](https://addons.mozilla.org/en-US/firefox/addon/3829)插件为您提供访问权限，如果您不使用 Firefox，则可以使用[Wireshark](http://www.wireshark.org/)代替（但它要重得多，并且可能需要一些混乱才能在其余网络流量中找到标头）。一旦您可以看到此标头是否已设置（如果已设置，则它是否是正确的值），您将了解有关如何继续的更多信息。

在从其他站点下载 flv 文件时，验证您是否获得了进度条是值得的，一旦发生这种情况，您就可以开始查看示例文件与正常运行的文件之间的差异。

如果在下载过程中使用文件的内容（FLV::Info 获取其详细信息的地方）来计算进度，我会感到有些惊讶。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-05T10:17:13.717

您阅读的有关元数据的内容可能与 Flash 播放视频的方式有关。Flash 需要元数据来了解电影的长度。这就是元数据通常放在文件开头的原因。在对 H264 视频进行编码时，元数据通过 ffmpeg 等工具放置在文件的末尾，为了让“流媒体”正常工作，您需要将其移到开头。

然而，这应该不会对浏览器中的进度条产生任何影响，这很可能是因为，例如，youtube 没有在标题中设置 Content-Length。

# excel - 如何识别 Excel 文件是否符合 Excel 95 或 Excel 97 规范？

> ID：514847
> 
> 赞同：10
> 
> 时间：2009-02-05T06:49:10.003
> 
> 标签：excel, specifications, file-format

如何识别 Excel 文件在哪里使用 Excel 95 或 Excel 97 规范？即，他们使用哪个版本的 BIFF。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-23T23:29:56.220

[您可以在 Microsoft 提供的MICROSOFT OFFICE EXCEL 97-2007 BINARY FILE FORMAT SPECIFICATION](http://download.microsoft.com/download/0/B/E/0BE8BDD7-E5E8-422A-ABFD-4342ED7AD886/Excel97-2007BinaryFileFormat(xls)Specification.pdf)中找到必要的信息。

有关以下说明，请参见第 11 页：

```
BIFF Microsoft Office Excel 版
-------------------------------------------------- -
BIFF5 Microsoft Excel 5.0 版 (XL5)
BIFF7 Microsoft Excel 95 (XL7)（也称为 Microsoft Excel 版本 7）
BIFF8 Microsoft Excel 97 (XL8)、Microsoft Excel 2000 (XL9)、
           Microsoft Excel 2002 (XL10)、Microsoft Office Excel 2003 (XL11)、
           Microsoft Office Excel 2007 (XL12)

```

> 您可以从所有 BIFF 版本 5、7 和 8 文件中的文件开头 (BOF) 记录识别 XLS 文件中使用的 BIFF 版本。在 BIFF4 及更早的版本中，各种记录（除了 BOF 记录）在其记录号的高位字节中指定了版本信息。这是一种多余的方法，因此对于 BIFF4 之后的 BIFF 版本，Excel 通过读取 BOF 记录来获取 BIFF 版本。

BOF 记录在同一文件的第 43 页有详细描述。

# excel - Excel函数趋势如何使用？

> ID：514852
> 
> 赞同：0
> 
> 时间：2009-02-05T06:52:24.927
> 
> 标签：excel, excel-formula

如何使用 Excel 功能`trend`？你如何填写条件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-05T07:39:26.487

我自己没有使用过，但有两个不错的资源是：

1.  参数的体面解释，带有图形示例： http: [//office.microsoft.com/en-us/excel/HP052093201033.aspx](http://office.microsoft.com/en-us/excel/HP052093201033.aspx)
2.  更长的解释 + 示例（还详细说明 Excel 版本之间的行为变化，您可能需要也可能不需要知道）：http: [//support.microsoft.com/kb/828801](http://support.microsoft.com/kb/828801)

# performance - 虚拟内存在当今廉价 RAM 的世界中是否仍然重要？

> ID：514866
> 
> 赞同：15
> 
> 时间：2009-02-05T07:04:00.300
> 
> 标签：performance, memory-management, operating-system

引入虚拟内存是为了帮助在内存有限的情况下运行更多程序。但是在当今廉价 RAM 的环境中，它仍然有用吗？

如果禁用它就不会访问磁盘并且所有程序都将驻留在内存中，这不会提高性能和程序响应时间吗？

除了如上所述运行更多程序之外，Windows 中的虚拟内存是否有任何基本要求？我们不知道 Windows 内部的东西。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-02-05T13:18:10.433

一些迂腐：虚拟内存不仅仅是页面文件。该术语包含一整套技术，这些技术使程序产生一种错觉，即它具有一个连续的地址空间，其中一些是程序的代码，一些是数据，还有一些是 DLL 或内存映射文件。

因此，对于您的引入问题：是的，需要虚拟内存。这就是现代操作系统工作的原因。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-02-05T07:07:26.707

不要禁用虚拟内存。2GB 甚至不足以考虑这一点。无论如何，即使您*确实有足够的虚拟内存，您也应该**始终*保持打开状态，因为它只会在您真正需要时使用。安全总比抱歉好得多，因为没有激活它意味着您只是碰壁，而激活它意味着您的计算机开始交换到硬盘驱动器但继续运行。

 ** * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-02-05T13:18:52.227

是的，因为它是现代操作系统中发生的所有按需分页的基础，而不仅仅是 Windows。

Windows 将始终使用您的所有内存，如果不是用于应用程序，则用于缓存您从硬盘驱动器读取的任何内容。因为如果不使用该内存，那么您将放弃对内存的投资。基本上，Windows 使用您的 RAM 作为硬盘驱动器的大缓存。这种情况一直在发生，因为相关页面只有在您处理该页面的内容时才会被带入主存。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-02-10T06:18:34.663

问题实际上是考虑到现代计算机有多少内存以及操作系统的底层发生了什么，页面文件的用途是什么。

Windows 任务管理器显示正在使用的物理内存不多是很常见的，但是，您有很多页面错误吗？Win32 永远不会分配它的所有物理内存。它总是为新的资源需求节省一些。对于大页面文件与小页面文件，Win32 将物理内存分配给进程会更慢。

几天来，我一直在 Vista 中使用一个非常小的页面文件（固定为 200 MB），它具有 3GB 的可寻址物理内存。我没有崩溃或问题。还没有尝试过大型视频编辑或同时打开许多不同的进程。我不建议不要使用页面文件，因为操作系统永远无法在物理内存中随机播放页面，从而导致漏洞的发展。如果弹出内存不足警告或操作系统崩溃，对于不知道如何手动增加页面文件的人来说，大页面文件是故障安全的。

几点：内核将使用一些物理内存，这将通过VM映射与所有其他进程共享。其他进程将在剩余的物理内存中。VM 让每个进程看到一个 4GB 的内存空间，操作系统在较低的 2GB。每个进程将需要远少于 4GB 的物理内存，这个数量是它提交的内存需求。编程时，malloc 或 new 将保留内存但不提交。诸如第一次写入内存之类的事情将提交它。操作系统会立即为每个进程提交一些内存。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-02-05T18:00:41.033

正如 kdgregory 所说，您的问题实际上是关于使用页面文件，而不是虚拟内存。虚拟内存最重要的用途可能是让操作系统可以保护一个进程的内存免受另一个进程内存的影响，同时仍然给每个进程一个连续的、平坦的虚拟地址空间的错觉。实际的物理地址可以并且将会变得碎片化，但虚拟地址将显示为连续的。

是的，虚拟内存至关重要。页面文件，也许不是。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-02-05T17:30:51.127

嗯。磁盘空间可能总是比 RAM 便宜。我的一台实验室计算机有 512MB 的 RAM。当我得到它时，这曾经足够了，但现在它已经慢到爬行交换，我需要在其中放入更多 RAM。我现在运行的软件程序并没有比以前多，但是它们都变得更加臃肿，并且它们经常产生更多的“守护程序”程序，这些程序只是坐在那里什么都不做，只是等待一些事件并耗尽内存。我查看了我的进程列表，文件资源管理器的“内存中”列是 40MB。对于 Firefox，它是 162MB。Java 的“更新调度程序”`jusched.exe`使用另外 3.6MB。这只是物理内存，这些数字不包括交换空间。

因此，为无法换出的内存保存更快、更昂贵的内存非常重要。我可以在我的硬盘驱动器上腾出数十 GB 的交换空间。

内存被认为足够便宜，以至于操作系统和许多程序不再尝试优化。一方面它很棒，因为它使程序更易于维护和调试，开发速度更快。但我讨厌不得不继续在我的计算机中放入更多的 RAM。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-02-16T09:44:24.240

[http://blogs.technet.com/markrussinovich/archive/2008/11/17/3155406.aspx](http://blogs.technet.com/markrussinovich/archive/2008/11/17/3155406.aspx)的一个很好的解释

> 要优化分页文件的大小，您应该同时启动所有运行的应用程序，加载典型数据集，然后注意提交费用峰值（或在您知道已达到最大负载的一段时间后查看此值） . 将页面文件最小值设置为该值减去系统中的 RAM 量（如果该值为负数，请选择一个最小大小以允许您配置的故障转储类型）。如果您想为潜在的大量提交需求留出一些喘息的空间，请将最大值设置为该数字的两倍。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-30T17:23:26.463

虚拟内存不仅仅是 RAM 的简单扩展。实际上，虚拟内存是他们虚拟化访问物理内存的系统。应用程序具有完全独立于 RAM 大小的一致环境。除了增加的内存可用性之外，这还提供了许多重要的优势。虚拟内存是操作系统的一个组成部分，不可能被禁用。

页面文件不是虚拟内存。许多消息来源都声称这一点，包括一些微软文章。但这是错误的。您可以禁用页面文件（不推荐），但这不会禁用虚拟内存。

虚拟内存已经在大型系统中使用了大约 40 年，并且不会很快消失。优点实在是太大了。如果消除虚拟内存，所有当前的 32 位应用程序（以及 64 位应用程序）都将过时。

拉里米勒微软 MCSA

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-02-14T12:46:39.900

当没有足够的 RAM 可供所有正在运行的应用程序使用时，虚拟内存是一种安全网。这在前段时间很常见，而今天当您拥有大量系统 RAM 时，情况就不那么普遍了。

有人说不要管页面文件，让它由 Windows 管理。有人说，即使你有大内存，保持大页面文件也不会受到伤害，因为它不会被使用。这是不正确的，因为 Windows 会进行先发制人的分页来为内存需求高峰做准备。如果这种需求永远不会出现，这只是浪费了 HDD 活动，我们都知道 HDD 是任何系统中最慢的组件。具有足够大 RAM 的抢先式分页毫无意义，它唯一能做的就是减慢同时发生的任何其他磁盘活动。更不用说额外的磁盘磨损了。加上大页面文件意味着千兆字节的锁定磁盘空间。

很多人都指向 Mark Russinovich 的[文章](http://blogs.technet.com/b/markrussinovich/archive/2008/11/17/3155406.aspx)来支持他们的坚定信念，即在任何情况下都不应该禁用页面文件，而且微软的许多聪明人已经考虑得如此彻底，以至于我们这些小开发者永远不应该质疑默认的 Windows 策略页面文件大小。但即使是鲁西诺维奇本人也写道：

> 将页面文件的最小值设置为该值（Peak Commit Charge）减去系统中的 RAM 量（如果该值为负数，请选择最小大小以允许您配置的故障转储类型）。

因此，如果您有大量 RAM 并且您的 peek 提交费用永远不会超过您的 RAM 的 50%，即使您一次打开所有应用程序，然后再打开一些，则根本不需要页面文件。因此，在这些情况下，99.99% 的时间你永远不需要比 RAM 更多的内存。

现在我不提倡禁用页面文件，但将它的大小设置为 RAM 或更大只是浪费空间和不必要的活动，可能会减慢其他内容。当系统确实需要更多内存时，页面文件为您提供了一个安全网（具有大量 RAM），并防止其内存不足，这很可能使您的系统不稳定和无法使用。

页面文件唯一真正需要的是内核转储。如果您需要完整的内核转储，则至少需要 400 MB 的页面文件。但是，如果您对迷你转储感到满意，则最小为 16 MB。所以要两全其美

*   几乎没有页面文件
*   虚拟内存安全网

我建议为迷你内核转储配置 Windows，将最小页面文件大小设置为 16 MB，将最大值设置为您想要的任何值。这种方式页面文件实际上不会被使用，但会在第一次内存不足错误后自动扩展，以防止您的系统无法使用。如果您碰巧至少有一个内存不足的问题，您当然应该重新考虑您的最小尺寸。如果您真的想安全，请制作页面文件 min。大小 1 GB。对于服务器，尽管您应该更加小心。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-02-05T13:17:10.717

不幸的是，它仍然是必需的，因为 Windows 操作系统有“过度缓存”的倾向。

另外，如上所述，2GB 还不足以考虑将其关闭。哎呀，在我有 8GB 或更多之前，我可能不会关闭它。

G人

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-05-30T18:56:26.040

> 如果禁用它就不会访问磁盘并且所有程序都将驻留在内存中，这不会提高性能和程序响应时间吗？

我不完全确定其他平台，但我有一台 Linux 机器，其中交换空间被意外禁用。当一个进程使用了​​所有可用内存时，机器基本上冻结了 5 分钟，平均负载达到了荒谬的数字，内核[OOM 杀手](http://linux-mm.org/OOM_Killer)启动并终止了几个进程。重新启用交换完全解决了这个问题。

我从未经历过任何不必要的磁盘交换 - 只有在我使用了所有可用内存时才会发生这种情况。现代操作系统（甚至是 5-10 年前的 Linux 发行版）非常智能地处理交换空间，并且只在需要时使用它。

你可能没有交换空间也能过得去，因为单个进程达到 4GB 的内存使用是非常罕见的。使用 64 位操作系统并说 8GB 的​​ RAM 更加罕见.. 但是，禁用交换空间真的没有意义，你不会获得太多（如果有的话），当你没有它的物理内存用完时，坏事发生..

基本上 - 任何半体面的操作系统都应该只在需要时使用磁盘交换（或虚拟内存）。禁用交换只会阻止操作系统退回到它，这会导致 OOM 杀手罢工（因此在进程终止时会丢失数据）。

# c++ - 有什么方法可以确定 sprintf 将写入多少个字符？

> ID：514870
> 
> 赞同：14
> 
> 时间：2009-02-05T07:06:37.440
> 
> 标签：c++, string, printf

我正在使用 C++。

我想使用 sprintf 编写一个可能很长的格式化字符串（特别是像 _snprintf_s 这样的安全计数版本，但想法是一样的）。近似长度在编译时是未知的，所以我将不得不使用一些动态分配的内存，而不是依赖一个大的静态缓冲区。有什么方法可以确定特定的 sprintf 调用需要多少个字符，这样我就可以始终确定我有足够大的缓冲区？

我的后备方案是我将获取格式字符串的长度，将其加倍，然后尝试。如果有效，那就太好了，如果无效，我将缓冲区的大小加倍，然后再试一次。重复直到合适。不完全是最聪明的解决方案。

看起来 C99 支持将 NULL 传递给 snprintf 以获取长度。我想如果没有别的，我可以创建一个模块来包装该功能，但我对这个想法并不疯狂。

也许 fprintf 到 "/dev/null"/"nul" 可能会起作用？还有其他想法吗？

编辑：或者，有没有办法“分块” sprintf 以便它在写入过程中拾取？如果可能的话，它可以填充缓冲区，处理它，然后从它停止的地方开始重新填充。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-02-05T07:31:28.263

手册页`snprintf`说：

```
   返回值
       成功返回后，这些函数返回的数量
       打印的字符（不包括用于结束的尾随 '\0'
       输出到字符串）。函数 snprintf 和 vsnprintf 不
       写入超过 size 个字节（包括尾随的 '\0'）。如果
       由于此限制，输出被截断，然后返回值
       是字符数（不包括结尾的 '\0'）
       如果足够的话，这将被写入最终字符串
       空间已经可用。因此，大小或更大的返回值
       表示输出被截断。（另见下文
       注意。）如果遇到输出错误，则为负值
       回来。

```

这意味着您可以`snprintf`使用大小为 0 进行调用。不会写入任何内容，返回值会告诉您需要为字符串分配多少空间：

```
int how_much_space = snprintf(NULL, 0, fmt_string, param0, param1, ...); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-02-05T08:16:10.390

正如其他人所提到的，`snprintf()`将返回缓冲区中所需的字符数，以防止输出被截断。您可以简单地使用 0 缓冲区长度参数调用它以获得所需的大小，然后使用适当大小的缓冲区。

为了稍微提高效率，您可以使用对于正常情况来说足够大的缓冲区来调用它，并且仅`snprintf()`在输出被截断时才进行第二次调用。为了确保在这种情况下正确释放缓冲区，我经常使用一个`auto_buffer<>`为我处理动态内存的对象（并且在堆栈上有默认缓冲区以避免在正常情况下进行堆分配） .

如果您使用的是 Microsoft 编译器，则 MS 有一个非标准`_snprintf()`，它具有严重的限制，即并不总是以空值终止缓冲区并且不指示缓冲区应该有多大。

为了解决 Microsoft 的不支持问题，我使用了[Holger Weiss](http://www.jhweiss.de/software/snprintf.html)[的一个几乎公共的域`snprintf()`](http://www.jhweiss.de/software/snprintf.html)。

当然，如果您的非 MS C 或 C++ 编译器丢失`snprintf()`，上述链接中的代码也应该可以正常工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-05T07:18:39.600

我会使用两阶段的方法。通常，大部分输出字符串会低于某个阈值，只有少数会更大。

第 1 阶段，使用大小合理的静态缓冲区，例如 4K。由于`snprintf()`可以限制写入的字符数，因此不会出现缓冲区溢出。如果缓冲区足够大，您*将从*中返回*的*`snprintf()`字符数。

 *如果您的调用`snprintf()`返回小于 4K，则使用缓冲区并退出。如前所述，绝大多数电话都应该这样做。

有些不会，那是您进入第 2 阶段的时候。如果对`snprintf()`4K 缓冲区的调用不适合，那么您至少现在知道需要多大的缓冲区。

使用 分配`malloc()`一个足够大的缓冲区以容纳它，然后再将其分配`snprintf()`给该新缓冲区。完成缓冲区后，释放它。

前几天我们在一个系统上工作，我们通过连接和使用`snprintf()`文件句柄来获得相同的结果。/dev/null 始终保证获取与您提供的数据一样多的数据，因此我们实际上会从中获取大小，然后在必要时分配一个缓冲区。`/dev/null``fprintf()`

保留并非所有系统都有的实物`snprintf()`（例如，我知道它`_snprintf()`在 Microsoft C 中），因此您可能必须找到执行相同工作的函数，或恢复到`fprintf /dev/null`解决方案。

如果数据可以在大小检查`snprintf()`和实际`snprintf()`到缓冲区之间更改（即，注意线程），也要小心。如果大小增加，您将获得缓冲区溢出损坏。

如果您遵循这样的规则，即数据一旦交给一个函数，在交回之前就*专*属于该函数，这不会成为问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-03T23:29:35.757

值得一提的`asprintf`是，管理此功能的 GNU 扩展。它接受一个指针作为输出参数，以及一个格式字符串和可变数量的参数，并将包含结果的正确分配缓冲区的地址写回指针。

你可以像这样使用它：

```
#define _GNU_SOURCE
#include <stdio.h>

int main(int argc, char const *argv[])
{
    char *hi = "hello"; // these could be really long
    char *everyone = "world";
    char *message;
    asprintf(&message, "%s %s", hi, everyone);
    puts(message);
    free(message);
    return 0;
} 
```

希望这对某人有帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-05T19:51:17.940

由于您使用的是 C++，因此实际上不需要使用任何版本的 sprintf。最简单的做法是使用 std::ostringstream。

```
std::ostringstream oss;
oss << a << " " << b << std::endl; 
```

`oss.str()`返回一个 std::string ，其中包含您写入 oss 的内容。用于`oss.str().c_str()`获取`const char *`. 从长远来看，这将更容易处理，并消除内存泄漏或缓冲区溢出。通常，如果您担心 C++ 中的内存问题，那么您并没有充分利用该语言的潜力，您应该重新考虑您的设计。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-05T07:17:41.677

我一直在寻找您正在谈论的相同功能，但据我所知，C99 方法这样简单的东西在 C++ 中不可用，因为 C++ 目前不包含 C99 中添加的功能（例如 snprintf） .

您最好的选择可能是使用 stringstream 对象。这比写得很清楚的 sprintf 调用要麻烦一些，但它会起作用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-05T07:19:25.417

看看[CodeProject: CString-clone Using Standard C++](http://69.10.233.10/KB/string/stdstring.aspx?display=Print)。它使用您建议的解决方案来扩大缓冲区大小。

```
`// -------------------------------------------------------------------------
    // FUNCTION:  FormatV
    //      void FormatV(PCSTR szFormat, va_list, argList);
    //

    // DESCRIPTION:
    //      This function formats the string with sprintf style format-specs. 
    //      It makes a general guess at required buffer size and then tries
    //      successively larger buffers until it finds one big enough or a
    //      threshold (MAX_FMT_TRIES) is exceeded.
    //
    // PARAMETERS: 
    //      szFormat - a PCSTR holding the format of the output
    //      argList - a Microsoft specific va_list for variable argument lists
    //
    // RETURN VALUE: 
    // -------------------------------------------------------------------------`

```
void FormatV(const CT* szFormat, va_list argList)
{
#ifdef SS_ANSI

    int nLen    = sslen(szFormat) + STD_BUF_SIZE;
    ssvsprintf(GetBuffer(nLen), nLen-1, szFormat, argList);
    ReleaseBuffer();
#else
    CT* pBuf            = NULL;
    int nChars          = 1;
    int nUsed           = 0;
    size_type nActual   = 0;
    int nTry            = 0;

    do  
    {
        // Grow more than linearly (e.g. 512, 1536, 3072, etc)

        nChars          += ((nTry+1) * FMT_BLOCK_SIZE);
        pBuf            = reinterpret_cast<CT*>(_alloca(sizeof(CT)*nChars));
        nUsed           = ssnprintf(pBuf, nChars-1, szFormat, argList);

        // Ensure proper NULL termination.
        nActual         = nUsed == -1 ? nChars-1 : SSMIN(nUsed, nChars-1);
        pBuf[nActual+1]= '\0';

    } while ( nUsed < 0 && nTry++ < MAX_FMT_TRIES );

    // assign whatever we managed to format

    this->assign(pBuf, nActual);
#endif
} 
```

# c# - XNA 和 DirectX (C#) 之间的比较

> ID：514872
> 
>         
> 
> 赞同：51
> 
>         
> 
> 时间：2009-02-05T07:08:42.537
> 
>         
> 
> 标签：c#, directx, xna

在PC开发方面（不包括Xbox和Zune），

XNA 和 C# DirectX 有什么区别？C# DirectX 是否比 XNA 具有显着优势（在速度、版税等方面）？

两者与速度非托管 C++ DirectX 相比如何？

游戏编程行业在哪里发展？

* * *

## 回答 #1

> 赞同：54
> 
>             
> 
> 时间：2009-02-05T07:12:54.323

如果您实际上擅长编写非托管代码，那么您可能能够在 DirectX 之上编写更快的图形引擎。然而，对于业余爱好者来说，XNA在 2D 和 3D 游戏开发方面都有*足够的性能。*

[这是一个很好的 Channel 9 视频](http://channel9.msdn.com/posts/Rory/Looking-at-XNA-Part-Two/)，他们在 Xbox 360 上运行 XNA 构建的赛车游戏。即使在全高清下也运行良好。XNA 社区已经开发了一些 Xbox Live Arcade 游戏。

就 C# DirectX 而言，我记得，它被称为托管 DirectX，不再受到官方支持，因为 XNA 基本上取代了它。我可能是错的，我已经很久没有看到它了。

XNA 和 Managed DirectX 之间的性能差异可以忽略不计，因为本质上它们是相同的；XNA 只是有一些方便的位来减少您需要编写的样板代码量。

* * *

## 回答 #2

> 赞同：31
> 
>             
> 
> 时间：2009-02-05T08:55:32.947

Xna 游戏工作室的东西专注于解决以游戏为中心的问题，尽管我会质疑任何海报说 Xna 游戏工作室的东西的性能比托管直接 x 更差，而没有看到一些体面的指标。

MS 之外的一个独立小组创建了一个名为 SlimDx 的项目 - [http://slimdx.mdxinfo.com/](http://slimdx.mdxinfo.com/)
如果您正在编写应用程序而不是游戏（我希望您不是其他问题），那么这可能是值得的考虑。

该行业仍然大量使用 C++ 开发游戏内容，但已经成功发布了使用 XNA Game Studio 在 XBox live 的社区游戏部分以完全托管代码编写的游戏，并在 XBox Arcade 本身上发布。应该很快就会有一些有趣的统计数据来说明人们在社区游戏中赚了多少。

许多全价游戏在某些方面使用 C++，但在实际游戏逻辑中使用诸如 Lua 之类的东西……而 Lua 并不以超快的速度而闻名！

C# 具有良好的学习曲线，并且被行业中的工具程序员使用——这将是一种有用的语言。C++ 将是一门很棒的语言，但它需要更多的纪律来创建功能代码 - 并为新人提供了更多的绳索来吊死自己。C# 可以在运行时而不是编译时动态更改和执行诸如展开循环之类的事情 - 好的 C# 可以与好的可读 C++ 一样快或更快 - 但你必须知道如何使用它。在非常紧密的循环中，C++ 和汇编程序可能会在某些情况下胜出。通常在使用 C++ 的游戏中，自定义分配器是使用自己的内存策略创建的，以尝试帮助由普通分配器引起的碎片......这种事情由 .

如果您正在考虑进入游戏开发并决定使用一种语言（其中，字里行间的阅读似乎是您使用那条提问的地方），那么最好使用的语言是您完成的语言项目要在最后展示，无论是 C++、Objective C、C#、Flash、Silverlight 等。随着语言的变化和流行和失宠，招聘人员通常会寻找经过验证的对不同语言的掌握——这可能会减轻不知道的情况他们目前正在使用的那个——而一组已完成的工作就可以做到这一点。

* * *

## 回答 #3

> 赞同：17
> 
>             
> 
> 时间：2009-02-05T08:29:40.097

1.  XNA 和 DirectX 是解决同一个问题的非常不同的实现 - 高性能图形密集型编程。两者都支持 2D、3D、音频和网络组件。DirectX 仅在 XNA 是托管代码的情况下是非托管的。

2.  有一个 DirectX 的托管实现，它是 DirectX 调用的包装器，但在当前版本之后没有更新，所以我不会打扰它。

3.  XNA 不是非托管 DirectX 的包装器。它确实使用了 DirectX 的一部分，但它不是包装器。

4.  业界似乎仍然非常关注非托管 DirectX - 我这么说是因为所有主要引擎公司仍在使用 C++、ASM 进行编码并支持 DirectX（单独或与 OpenGL 一起用于 Linux/Mac 版本）。微软正在“放弃” DirectX 托管包装器并告诉人们宁愿使用 XNA，这表明他们正在推动托管开发人员。

* * *

## 回答 #4

> 赞同：5
> 
>             
> 
> 时间：2012-03-06T16:48:19.697

目前，微软似乎不打算在 Metro 风格的应用程序中支持 XNA。XNA 和现已弃用的“托管 DirectX”的替代方案是[SharpDx](http://code.google.com/p/sharpdx)。这可用于创建 Metro 风格的应用程序，并且已针对 XNA、SlimDX 和 windows API 代码包进行了良好的[基准测试。](http://code4k.blogspot.com/2011/03/benchmarking-cnet-direct3d-11-apis-vs.html)

# php - 通过 SMS 处理来自手机的输入数据

> ID：514876
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2009-02-05T07:10:07.340
> 
>         
> 
> 标签：php, sms

我目前有一个 php 脚本，可以读取从手机发送的电子邮件，然后将它们发布到互联网上......

我想做同样的事情，但我不想阅读电子邮件，而是想通过短信处理数据。

因此，如果有人向 X 号码发送短信，我的程序将通过此 X 号码获取消息并在站点中使用它。

我需要什么？

* * *

## 回答 #1

> 赞同：6
> 
>             
> 
> 时间：2009-02-05T07:38:49.530

你在这里有很多选择。一般来说，您首先需要获取人们可以发送短信的号码。之后，当有人发送 SMS 和您的 PHP 脚本可以处理该消息并弄清楚如何处理它时，将向您发出回调。

您基本上有几个选项可以公开 SMS

1.  使用专用的短代码。例如，有人向 53234 发送了一条短信，您将收到一个回调来处理它。这是一个昂贵的选择。不包括每次消息传递费用，您通常每月至少要花费 2500 美元左右。您可以通过 Open Market 等提供商申请短代码。您必须获得可能需要长达 6 周的短代码的批准。

2.  使用共享的短代码。这要便宜一些——您为每条消息付费，它的成本通常在 0.02 - .10 /msg 之间，具体取决于您的消息量。您会得到一个关键字，例如 DOLLY，人们必须在发短信之前为其添加前缀。因此，他们现在会将 DOLLY INPUT TEXT HERE 发送至 53234，您将收到带有 INPUT TEXT HERE 的回调。Celltrust 和其他公司提供共享短代码。

3.  使用允许人们通过诸如 TextMarks 之类的东西输入文本的公共 api。Textmarks 就像一个共享的短代码，需要关键字使用 + 用户订阅。然而它是免费的，它很棒并且有一个很好的回调 API。我相信名为 Mozes 的服务也提供类似的服务。最后，如果您愿意，您可以设置一个 Twitter 帐户并让人们发短信到他们的号码。Facebook 还有一个类似的 API，允许您使用他们的 FBOOK 短代码。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-02-05T08:03:12.863

伊什的回答很棒。我想指出一个额外的免费选项。

大多数运营商允许您向电子邮件地址发送 SMS 消息。SMS 文本被插入到电子邮件的正文中，并且主题取决于运营商。一旦电子邮件进入您的收件箱，您就可以通过您选择的方法访问它。

这种方法在一个需要与我的计算机进行远程通信的个人项目中对我有用，当时我只有一部没有互联网功能的手机。

这个[维基百科页面](http://en.wikipedia.org/wiki/SMS_gateways)显示有多少载体支持这一点（几乎全部）。

尽量不要违反任何人的服务条款，您始终可以自己托管电子邮件帐户。

# wpf - 在 WPF 中将就地转换应用于 3D 模型

> ID：514877
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-02-05T07:10:39.133
> 
>         
> 
> 标签：wpf, 3d, rotation

我有一个简单的 3D 立方体，可以使用以下代码进行旋转：

```
void mui3D_MouseDown(object sender, System.Windows.Input.MouseButtonEventArgs e)
{
            RotateTransform3D rotation = new RotateTransform3D(new AxisAngleRotation3D(new Vector3D(0, 1, 0), 0), mui.Model.Bounds.Location);

            DoubleAnimation rotateAnim = new DoubleAnimation(0, 130d TimeSpan.FromMilliseconds(3000));

            rotateAnim.Completed += new EventHandler(rotateAnim_Completed); 

            mui.Transform = rotation;

            rotation.Rotation.BeginAnimation(AxisAngleRotation3D.AngleProperty, rotateAnim);
    } 
```

每次执行时，此代码使用动画围绕 Y 轴从 0 到 130 度的角度旋转立方体。  

但是，我想“累积”应用旋转，以便考虑任何先前的旋转，并且立方体从完成前一个旋转的角度开始每次旋转。

例如：动画构造函数不需要角度的“from”和“to”值，而是简单地根据当前旋转角度将立方体再旋转 130 度。

我可以轻松地使用包含当前角度的成员变量，将其传递给动画，然后在动画完成时更新它。但我想知道是否有使用 WPF 的标准方法来实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-02-05T07:24:15.563

我确信有一种方法可以从对象的变换矩阵中检索当前的欧拉旋转角度（以度为单位）。然后，您可以将其用作“from”值并为“to”值设置动画。

如果做不到这一点，只需在应用程序的某处创建一个变量，该变量会记住立方体旋转的度数。每次运行该函数时，只需添加您希望它旋转的度数，然后将结果存储回您的变量中。

一些伪代码：

```
angle = 0
function onClick:
    new_angle = angle + 30
    Animate(angle, new_angle)
    angle = new_angle 
```

# c# - 解析 XPath 表达式

> ID：514879
> 
>         
> 
> 赞同：6
> 
>         
> 
> 时间：2009-02-05T07:10:56.340
> 
>         
> 
> 标签：c#, xpath, xpathnavigator

我正在尝试为 XPath 创建一个“AET”（抽象表达式树）（因为我正在编写一个 WYSIWYG XSL 编辑器）。在过去的三到四个小时里，我一直在用 XPath BNF 撞墙。

我想到了另一种解决方案。我想我可以编写一个实现 IXPathNavigable 的类，它在调用 CreateNavigator 时返回我自己的 XPathNavigator。这个 XPathNavigator 在任何方法调用上总是会成功，并且会跟踪这些调用——例如，我们移动到客户节点，然后是客户节点。然后我可以（希望）使用这些信息来创建“AET”（这样我们现在就可以在对象模型中拥有客户/客户了）。

唯一的问题是：我到底如何通过 XPathExpression 运行*IXPathNavigable*？

我知道这太懒了。但是有没有其他人经过努力并编写了 XPath 表达式解析器？我还没有对我可能的解决方案进行 POC，因为我无法对其进行测试（因为我无法针对 IXPathNavigable 运行 XPathExpression），所以我什至不知道我的解决方案是否会起作用。

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-02-06T22:37:59.367

[这里](https://github.com/antlr/grammars-v4/blob/master/xpath/xpath.g4)有一个 antlr xpath 语法。由于它的许可证允许，我在这里复制了整个语法以避免将来链接腐烂。

```
grammar xpath;

/*
XPath 1.0 grammar. Should conform to the official spec at
http://www.w3.org/TR/1999/REC-xpath-19991116\. The grammar
rules have been kept as close as possible to those in the
spec, but some adjustmewnts were unavoidable. These were
mainly removing left recursion (spec seems to be based on
LR), and to deal with the double nature of the '*' token
(node wildcard and multiplication operator). See also
section 3.7 in the spec. These rule changes should make
no difference to the strings accepted by the grammar.
Written by Jan-Willem van den Broek
Version 1.0
Do with this code as you will.
*/
/*
    Ported to Antlr4 by Tom Everett <tom@khubla.com>
*/

main  :  expr
  ;

locationPath 
  :  relativeLocationPath
  |  absoluteLocationPathNoroot
  ;

absoluteLocationPathNoroot
  :  '/' relativeLocationPath
  |  '//' relativeLocationPath
  ;

relativeLocationPath
  :  step (('/'|'//') step)*
  ;

step  :  axisSpecifier nodeTest predicate*
  |  abbreviatedStep
  ;

axisSpecifier
  :  AxisName '::'
  |  '@'?
  ;

nodeTest:  nameTest
  |  NodeType '(' ')'
  |  'processing-instruction' '(' Literal ')'
  ;

predicate
  :  '[' expr ']'
  ;

abbreviatedStep
  :  '.'
  |  '..'
  ;

expr  :  orExpr
  ;

primaryExpr
  :  variableReference
  |  '(' expr ')'
  |  Literal
  |  Number  
  |  functionCall
  ;

functionCall
  :  functionName '(' ( expr ( ',' expr )* )? ')'
  ;

unionExprNoRoot
  :  pathExprNoRoot ('|' unionExprNoRoot)?
  |  '/' '|' unionExprNoRoot
  ;

pathExprNoRoot
  :  locationPath
  |  filterExpr (('/'|'//') relativeLocationPath)?
  ;

filterExpr
  :  primaryExpr predicate*
  ;

orExpr  :  andExpr ('or' andExpr)*
  ;

andExpr  :  equalityExpr ('and' equalityExpr)*
  ;

equalityExpr
  :  relationalExpr (('='|'!=') relationalExpr)*
  ;

relationalExpr
  :  additiveExpr (('<'|'>'|'<='|'>=') additiveExpr)*
  ;

additiveExpr
  :  multiplicativeExpr (('+'|'-') multiplicativeExpr)*
  ;

multiplicativeExpr
  :  unaryExprNoRoot (('*'|'div'|'mod') multiplicativeExpr)?
  |  '/' (('div'|'mod') multiplicativeExpr)?
  ;

unaryExprNoRoot
  :  '-'* unionExprNoRoot
  ;

qName  :  nCName (':' nCName)?
  ;

functionName
  :  qName  // Does not match nodeType, as per spec.
  ;

variableReference
  :  '$' qName
  ;

nameTest:  '*'
  |  nCName ':' '*'
  |  qName
  ;

nCName  :  NCName
  |  AxisName
  ;

NodeType:  'comment'
  |  'text'
  |  'processing-instruction'
  |  'node'
  ;

Number  :  Digits ('.' Digits?)?
  |  '.' Digits
  ;

fragment
Digits  :  ('0'..'9')+
  ;

AxisName:  'ancestor'
  |  'ancestor-or-self'
  |  'attribute'
  |  'child'
  |  'descendant'
  |  'descendant-or-self'
  |  'following'
  |  'following-sibling'
  |  'namespace'
  |  'parent'
  |  'preceding'
  |  'preceding-sibling'
  |  'self'
  ;

  PATHSEP 
       :'/';
  ABRPATH   
       : '//';
  LPAR   
       : '(';
  RPAR   
       : ')';
  LBRAC   
       :  '[';
  RBRAC   
       :  ']';
  MINUS   
       :  '-';
  PLUS   
       :  '+';
  DOT   
       :  '.';
  MUL   
       : '*';
  DOTDOT   
       :  '..';
  AT   
       : '@';
  COMMA  
       : ',';
  PIPE   
       :  '|';
  LESS   
       :  '<';
  MORE_ 
       :  '>';
  LE   
       :  '<=';
  GE   
       :  '>=';
  COLON   
       :  ':';
  CC   
       :  '::';
  APOS   
       :  '\'';
  QUOT   
       :  '\"';

Literal  :  '"' ~'"'* '"'
  |  '\'' ~'\''* '\''
  ;

Whitespace
  :  (' '|'\t'|'\n'|'\r')+ ->skip
  ;

NCName  :  NCNameStartChar NCNameChar*
  ;

fragment
NCNameStartChar
  :  'A'..'Z'
  |   '_'
  |  'a'..'z'
  |  '\u00C0'..'\u00D6'
  |  '\u00D8'..'\u00F6'
  |  '\u00F8'..'\u02FF'
  |  '\u0370'..'\u037D'
  |  '\u037F'..'\u1FFF'
  |  '\u200C'..'\u200D'
  |  '\u2070'..'\u218F'
  |  '\u2C00'..'\u2FEF'
  |  '\u3001'..'\uD7FF'
  |  '\uF900'..'\uFDCF'
  |  '\uFDF0'..'\uFFFD'
// Unfortunately, java escapes can't handle this conveniently,
// as they're limited to 4 hex digits. TODO.
//  |  '\U010000'..'\U0EFFFF'
  ;

fragment
NCNameChar
  :  NCNameStartChar | '-' | '.' | '0'..'9'
  |  '\u00B7' | '\u0300'..'\u036F'
  |  '\u203F'..'\u2040'
  ; 
```

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2012-01-16T21:30:23.377

我已经编写了 XPath 解析器和 IXPathNavigable 的实现（我曾经是[XMLPrime](http://www.xmlprime.com/)的开发人员）。两者都不容易；而且我怀疑 IXPathNavigable 不会是您希望的廉价胜利，因为在不同方法之间的交互中有很多微妙之处 - 我怀疑成熟的 XPath 解析器会更简单（并且更可靠）。

不过要回答你的问题：

```
var results xpathNavigable.CreateNavigator().Evaluate("/my/xpath[expression]"). 
```

您可能需要枚举结果才能导航节点。

如果您总是返回 true，那么您对以下 XPath 的了解就是它会查找 foo 的 bar 子项：`foo[not(bar)]/other/elements`

如果你总是返回固定数量的节点，那么你永远不会知道这个 XPath 的大部分内容`a[100]/b/c/`

本质上，这是行不通的。

# java - 使用java解析Pdf文件并在word文件中写入内容

> ID：514885
> 
>         
> 
> 赞同：7
> 
>         
> 
> 时间：2009-02-05T07:13:18.723
> 
>         
> 
> 标签：java, pdf, ms-word

如何使用 Java 解析 PDF 文件并将内容写入 word 文件？

* * *

## 回答 #1

> 赞同：9
> 
>             
> 
> 时间：2009-02-05T07:24:01.023

要在 Java 中解析 PDF 文件，可以使用 Apache PDFBox：http: [//incubator.apache.org/pdfbox/](http://incubator.apache.org/pdfbox/)

要在 Java 中读取/写入 Word（或其他 Office）文件格式，请尝试 POI： http: [//poi.apache.org/](http://poi.apache.org/)

两者都是免费的。

* * *

## 回答 #2

> 赞同：5
> 
>             
> 
> 时间：2009-02-05T08:02:45.533

尝试[iText](http://www.lowagie.com/iText/) java 库：

> **对于希望通过动态 PDF 文档生成和/或操作**来增强 Web 和其他应用程序的开发人员来说，iText 是一个理想的库。

它可用于您的解析步骤。

至于生成 Word 文档 - [OpenOffice Java API](http://api.openoffice.org/docs/java/ref/overview-summary.html)可能能够生成与 Word 兼容的文档（没有使用此 API 的个人经验）。

* * *

## 回答 #3

> 赞同：3
> 
>             
> 
> 时间：2009-02-05T07:24:21.413

您可能想尝试以下任何一种：

*   [http://incubator.apache.org/pdfbox/](http://incubator.apache.org/pdfbox/)

*   [https://pdf-renderer.dev.java.net/](https://pdf-renderer.dev.java.net/)

阅读 PDF 文件的内容后，您也可以将它们存储在 ODT 文件或文本文件中。对于 ODT 文件，请尝试[http://odftoolkit.openoffice.org](http://odftoolkit.openoffice.org)。

最好的！

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2010-08-12T10:14:16.267

如果源 PDF 主要是文本，您可以使用 iText。解析时图像等很难处理。如果只是文本，那么就像 10 行代码一样简单。有关示例，请参阅 iText 手册。

对于编写 word 文件，只有 Apache POI。弄清楚可能有点棘手，但对于如此简单的任务，它应该没有任何问题。

# bookmarklet - 基本小书签帮助

> ID：514891
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-02-05T07:16:40.180
> 
>         
> 
> 标签：bookmarklet

我想创建一个将页面设置为可编辑的书签，即运行此代码：

```
javascript:document.body.contentEditable=true; 
```

当我为此制作书签时，我可以看到该页面非常短暂地变得可编辑，然后整个内容被替换为“真实”一词。

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-02-26T15:45:07.990

Bookmarklets have to evaluate to void for the browser stay on the same page. Just end it with a void(0):

```
javascript:document.body.contentEditable=true;void(0); 
```

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-02-05T07:18:26.840

经过一些随机试验和错误，我发现这有效：

```
javascript:(function() { document.body.contentEditable=true; })() 
```

还有其他方法吗？

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-02-05T07:33:13.270

# c# - 如何使用参数发出 HTTP get 请求

> ID：514892
> 
>         
> 
> 赞同：66
> 
>         
> 
> 时间：2009-02-05T07:16:50.650
> 
>         
> 
> 标签：c#, httpwebrequest, get

是否可以通过`HTTP`get 请求传递参数？如果是这样，我应该怎么做？我找到了一个`HTTP`帖子请求（[链接](http://msdn.microsoft.com/en-us/library/debx8sh9.aspx)）。在该示例中，字符串`postData`被发送到网络服务器。我想用*get*来做同样的事情。`HTTP`谷歌在get [here](http://support.microsoft.com/kb/307023)上找到了这个例子。但是，不会将参数发送到 Web 服务器。

* * *

## 回答 #1

> 赞同：145
> 
>             
> 
> 时间：2013-06-20T16:59:18.807

我的首选方式是这样。它为您处理转义和解析。

```
WebClient webClient = new WebClient();
webClient.QueryString.Add("param1", "value1");
webClient.QueryString.Add("param2", "value2");
string result = webClient.DownloadString("http://theurl.com"); 
```

* * *

## 回答 #2

> 赞同：97
> 
>             
> 
> 时间：2009-02-05T07:27:08.210

首先`WebClient`是更容易使用；GET 参数在查询字符串中指定 - 唯一的技巧是记住转义任何值：

```
 string address = string.Format(
            "http://foobar/somepage?arg1={0}&arg2={1}",
            Uri.EscapeDataString("escape me"),
            Uri.EscapeDataString("& me !!"));
        string text;
        using (WebClient client = new WebClient())
        {
            text = client.DownloadString(address);
        } 
```

* * *

## 回答 #3

> 赞同：39
> 
>             
> 
> 时间：2009-02-05T07:20:53.433

在 GET 请求中，您将参数作为查询字符串的一部分传递。

```
string url = "http://somesite.com?var=12345"; 
```

* * *

## 回答 #4

> 赞同：8
> 
>             
> 
> 时间：2014-07-09T15:51:54.520

WebRequest 对象对我来说似乎工作量太大。我更喜欢使用 WebClient 控件。  

要使用此函数，您只需要创建两个 NameValueCollections 来保存您的参数和请求标头。

考虑以下函数：

```
 private static string DoGET(string URL,NameValueCollection QueryStringParameters = null, NameValueCollection RequestHeaders = null)
    {
        string ResponseText = null;
        using (WebClient client = new WebClient())
        {
            try
            {
                if (RequestHeaders != null)
                {
                    if (RequestHeaders.Count > 0)
                    {
                        foreach (string header in RequestHeaders.AllKeys)
                            client.Headers.Add(header, RequestHeaders[header]);
                    }
                }
                if (QueryStringParameters != null)
                {
                    if (QueryStringParameters.Count > 0)
                    {
                        foreach (string parm in QueryStringParameters.AllKeys)
                            client.QueryString.Add(parm, QueryStringParameters[parm]);
                    }
                }
                byte[] ResponseBytes = client.DownloadData(URL);
                ResponseText = Encoding.UTF8.GetString(ResponseBytes);
            }
            catch (WebException exception)
            {
                if (exception.Response != null)
                {
                    var responseStream = exception.Response.GetResponseStream();

                    if (responseStream != null)
                    {
                        using (var reader = new StreamReader(responseStream))
                        {
                            Response.Write(reader.ReadToEnd());
                        }
                    }
                }
            }
        }
        return ResponseText;
    } 
```

像这样将您的查询字符串参数（如果需要）添加为 NameValueCollection。

```
 NameValueCollection QueryStringParameters = new NameValueCollection();
        QueryStringParameters.Add("id", "123");
        QueryStringParameters.Add("category", "A"); 
```

像这样将您的 http 标头（如果需要）添加为 NameValueCollection。

```
 NameValueCollection RequestHttpHeaders = new NameValueCollection();
        RequestHttpHeaders.Add("Authorization", "Basic bGF3c2912XBANzg5ITppc2ltCzEF"); 
```

* * *

## 回答 #5

> 赞同：1
> 
>             
> 
> 时间：2017-04-19T19:13:57.787

您也可以直接通过 URL 传递值。

如果你想调用方法
`public static void calling(string name){....}`

那么你应该调用 using`HttpWebRequest webrequest = (HttpWebRequest)WebRequest.Create("http://localhost:****/Report/calling?name=Priya);
webrequest.Method = "GET";
webrequest.ContentType = "application/text";`

只需确保您  `?Object = value`在 URL中使用

# c# - 有没有办法在不显式创建 DLL 项目的情况下从 Visual Studio Express 生成 DLL 文件？

> ID：514900
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-02-05T07:19:48.227
> 
>         
> 
> 标签：c#, .net, dll

有没有办法在不显式创建 DLL 项目的情况下从 Visual Studio Express 生成 DLL 文件？

编辑：也许我的思维过程已经误入歧途，但我正在尝试设置 NUnit，并且认为需要一个 dll 来运行它......如果我错了，请纠正我。

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-02-05T07:22:40.170

是的，您可以将项目属性|应用程序|输出类型更改为 Windows 应用程序、控制台应用程序或类库，因此通过选择类库，您将输出一个 DLL。

我很难想到你为什么要这样做？

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-02-05T07:22:45.210

你是什​​么意思？你到底在追求什么？

您可以创建一个 exe 项目并更改输出类型（项目属性）...或者您可以`csc /target:library`在命令行中使用...

# c++ - 在 C++ 中返回对象列表的最佳方法？

> ID：514908
> 
>         
> 
> 赞同：24
> 
>         
> 
> 时间：2009-02-05T07:24:58.963
> 
>         
> 
> 标签：c++, arrays, memory-management

自从我用 C++ 编程以来已经有一段时间了，在从 python 出来之后，我觉得穿着一件直筒夹克，好吧，我不会咆哮。

我有几个函数充当“管道”，接受一个列表作为输入，返回另一个列表作为输出（基于输入），

这是概念上的，但在实践中，我`std::vector`用来表示列表，这可以接受吗？

此外，我没有使用任何指针，所以我将`std::vector<SomeType> the_list(some_size);`其用作变量，并直接返回它，即`return the_list;`

PS到目前为止一切正常，项目规模很小，这似乎不会影响性能，但我仍然想就此获得一些输入/建议，因为我觉得我正在用 C++ 编写 python。

* * *

## 回答 #1

> 赞同：18
> 
>             
> 
> 时间：2009-02-05T07:33:05.780

我唯一能看到的是您强制返回您返回的列表的副本。执行以下操作会更有效：

```
 void DoSomething(const std::vector<SomeType>& in, std::vector<SomeType>& out)
  {
  ...
  // no need to return anything, just modify out
  } 
```

因为您传入了要返回的列表，所以您避免了额外的副本。

编辑：这是一个旧的答复。如果您可以使用具有移动语义的现代 C++ 编译器，则无需担心这一点。当然，如果您返回的对象没有移动语义，这个答案仍然适用。

* * *

## 回答 #2

> 赞同：13
> 
>             
> 
> 时间：2009-02-05T09:51:27.777

如果您真的需要一个新列表，我会简单地返回它。在大多数情况下，返回值优化不会处理不必要的副本，并且您的代码保持非常清晰。

话虽如此，获取列表并返回其他列表确实是 C++ 中的 python 编程。

A，对于 C++，更合适的范例是创建采用一系列迭代器并改变底层集合的函数。

例如

```
void DoSomething(iterator const & from, iterator const & to); 
```

（迭代器可能是一个模板，取决于您的需要）

链接操作就是在 begin() 和 end() 上调用连续方法的问题。如果您不想更改输入，请先自己制作副本。

```
std::vector theOutput(inputVector); 
```

这一切都来自 C++ “不要为不需要的东西付费”的理念，你只会在你真正想要保留原件的地方创建副本。

* * *

## 回答 #3

> 赞同：4
> 
>             
> 
> 时间：2009-02-05T12:26:58.540

我会使用通用方法：

```
template <typename InIt, typename OutIt>
void DoMagic(InIt first, InIt last, OutIt out)
{
  for(; first != last; ++first) {
    if(IsCorrectIngredient(*first)) {
      *out = DoMoreMagic(*first);
      ++out;
    }
  }
} 
```

现在你可以调用它了

```
std::vector<MagicIngredients> ingredients;
std::vector<MagicResults> result;

DoMagic(ingredients.begin(), ingredients.end(), std::back_inserter(results)); 
```

您可以轻松更改使用的容器，而无需更改使用的算法，而且返回容器没有开销也很有效。

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2009-02-05T07:30:37.127

如果你想成为真正的铁杆，你可以使用[boost::tuple](http://www.boost.org/doc/libs/1_37_0/libs/tuple/doc/tuple_users_guide.html)。

```
tuple<int, int, double> add_multiply_divide(int a, int b) {
  return make_tuple(a+b, a*b, double(a)/double(b));
} 
```

但是，由于您的所有对象似乎都是单一的非多态类型，因此 std::vector 一切都很好。如果您的类型是多态的（基类的继承类），那么您需要一个指针向量，并且您需要记住在丢弃向量之前删除所有分配的对象。

* * *

## 回答 #5

> 赞同：1
> 
>             
> 
> 时间：2009-02-05T07:34:38.883

在许多情况下，使用 std::vector 是最好的方法。它保证使用连续的内存，因此对 L1 缓存很满意。

当您的返回类型为 std::vector 时，您应该知道会发生什么。幕后发生的事情是 std::vector 是递归复制的，所以如果 SomeType 的复制构造函数很昂贵，“return 语句”可能是一个冗长且耗时的操作。

如果您在列表中搜索和插入很多内容，您可以查看 std::set 以获得对数时间复杂度而不是线性时间复杂度。（std::vectors insert 在超过其容量之前是恒定的）。

您是说您有许多“管道函数”……听起来像是 std::transform 的绝佳场景。

* * *

## 回答 #6

> 赞同：0
> 
>             
> 
> 时间：2009-02-05T09:49:28.047

返回对象列表的另一个问题（与处理一个或两个列表相反，正如 BigSandwich 指出的那样）是，如果您的对象具有复杂的复制构造函数，则这些构造函数将为容器中的每个元素调用。

如果您有 1000 个对象，每个对象都引用了一大块内存，并且它们将该内存复制到对象 a、b 上；a=b; 这对您来说是 1000 个内存副本，仅用于返回包含在容器中的它们。如果您仍然想直接返回容器，请考虑这种情况下的指针。

* * *

## 回答 #7

> 赞同：0
> 
>             
> 
> 时间：2009-02-05T14:54:19.210

它的工作原理非常简单。

```
list<int> foo(void)
{
    list<int> l; 
    // do something
    return l;
} 
```

现在接收数据：

```
list<int> lst=foo(); 
```

完全最优，因为编译器知道优化 lst 的构造函数。并且不会导致复制。

其他方法，更便携：

```
list<int> lst;
// do anything you want with list
lst.swap(foo()); 
```

会发生什么： foo 已经优化，因此返回值没有问题。当您调用 swap 时，您将 lst 的值设置为 new，因此不要复制它。现在 lst 的旧值被“交换”并被破坏。

这是完成这项工作的有效方法。

# vim - 如何使用 memdeltas 为 xdebug 跟踪文件编写 Vim foldexpr

> ID：514909
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-02-05T07:25:41.630
> 
>         
> 
> 标签：vim, trace, xdebug, folding

我对 Vim 表达式一无所知。我有一个 vim foldexpr，它带有一个用于 xdebug 跟踪文件的语法文件。现有表达式如下所示：

```
foldexpr=strlen(substitute(substitute(substitute(substitute(getline(v:lnum),'^TR.*$','',''),'\\s>=>','->',\"g\"),'^\\s.\\{20\\}\\(\\s\\+\\)\\?->.*$','\\1',''),'\\s\\s','\',\"g\"))-2 
```

这适用于默认跟踪文件，如下所示：

```
0.0974    3908596     -> GenericDispatcher->dispatch() /home/tomw/source/public_html/main.php:49
0.0975    3908676       -> ReflectionClass->getMethods() /home/tomw/source/presentation/framework/routing/GenericDispatcher.php:59
0.0975    3910532       -> ReflectionFunctionAbstract->getName() /home/tomw/source/presentation/framework/routing/GenericDispatcher.php:60 
```

等等

但是，如果您将 Xdebug 配置为在跟踪中显示内存增量，则跟踪文件最终会像这样（注意带有内存增量的额外列，例如 +80）：

```
0.0964    3908336      +84     -> GenericDispatcher->dispatch() /home/tomw/source/public_html/main.php:49
0.0965    3908416      +80       -> ReflectionClass->getMethods() /home/tomw/source/presentation/framework/routing/GenericDispatcher.php:59
0.0965    3910272    +1856       -> ReflectionFunctionAbstract->getName() /home/tomw/source/presentation/framework/routing/GenericDispatcher.php:60 
```

谁能告诉我如何修改原始表达式以便折叠在第二个示例中正常工作？我无法确定它的头或尾。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-02-05T15:18:50.690

读取的部分

```
'^\\s.\\{20\\}\\(\\s\\+\\)\\?->.*$' 
```

正在搜索行首 [ `^`]，然后是 1 个空格 [ `\\s`]，然后是 20 次重复的任何字符 [ `.\\{20\\}`]，然后是可选的一个或多个记住的空格以供以后使用 [ `\\(\\s\\+\\)\\?`]，最后是一个箭头以及行尾的任何其他内容[ `->.*$`]。如果您总是要使用额外的列，我只需将 20 个字符的搜索更改为 30，如下所示：

```
'^\\s.\\{30\\}\\(\\s\\+\\)\\?->.*$' 
```

否则，您可以尝试一个范围，如下所示：

```
'^\\s.\\{20,30\\}\\(\\s\\+\\)\\?->.*$' 
```

我实际上还没有测试过这些，所以你可能需要稍微调整一下数字，但这应该能让你开始让它工作。

# python - 基于 Web 的 Python 向导

> ID：514912
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-02-05T07:27:05.060
> 
>         
> 
> 标签：python, xml-rpc, wizard

在 Python 中创建一个五页向导的好/简单方法是什么，其中 Web 服务器组件通过调用 XML-RPC 后端来获取数据，主要是动态地组成向导页面内容。我对 XML-RPC Python 模块有一些经验，但我不知道哪个 Python 模块将提供 Web 服务器，如何为向导创建静态内容，我不知道如何扩展 Web 服务器组件使 XML-RPC 从 Web 服务器调用到 XML-RPC 后端，以便能够创建动态内容。

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-02-05T08:51:02.330

如果我们分解为您需要的组件，我们会得到：

1.  HTTP 服务器接收来自客户端浏览器的请求。

2.  一个 URL 路由器，用于查看从客户端浏览器发送的 URL，并调用您的函数/方法来处理该 URL。

3.  一个 XML-RPC 客户端库，用于获取该 URL 的数据。

4.  将获取的数据呈现为 HTML 的模板处理器。

5.  一种将呈现的 HTML 作为响应发送回客户端浏览器的方法。

这些组件由几乎所有（如果不是全部）Python Web 框架处理。XML-RPC 客户端可能会丢失，但您可以使用您已经知道的标准 Python 模块。

[Django](http://www.djangoproject.com/)和[Pylons](http://pylonshq.com/)有很好的文档记录，可以轻松处理这类项目，但它们也会有很多你不需要的东西。如果您想要非常简单和绝对最低限度，请查看使用[juno](http://github.com/breily/juno/tree/master)，它最近刚刚发布并且引起了一些关注。

这些框架将处理 #1 并为您提供指定 #2 的方法，因此您需要编写处理传入请求的函数/方法（在 Django 中，这称为“视图”）。

您要做的就是通过 XML-RPC 获取数据，用该数据填充字典（在 Django 中，此字典称为“上下文”），然后通过调用该框架的模板引擎将上下文中的模板渲染为 HTML .

您的函数只会将 HTML 返回到框架，然后框架会将其正确格式化为 HTTP 响应并将其发送回客户端浏览器。

简单的！

更新：这里描述了如何[在 Django 中创建向导样式的多步表单](http://superjared.com/entry/formwizard-multiple-step-forms-django/)，应该可以帮助您。

# c# - 连接到 csv 文件时出现连接错误

> ID：514916
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-02-05T07:29:32.027
> 
>         
> 
> 标签：c#, .net

我有以下代码，执行时出现“未指定错误”。

```
OleDbConnection ExcelConnection = new oleDbConnection(@"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + pathName + ";    Extended Properties=Text;");
ExcelConnection.Open(); 
```

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-02-05T07:38:04.803

对于加载 csv，请考虑[CsvReader](http://www.codeproject.com/KB/database/CsvReader.aspx) - 完全托管、非常快速且强大。我在许多项目中使用过。更重要的是，不要弄乱 OLEDB。

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-02-05T09:54:14.213

假设连接字符串很好，调用之前是否已经打开了 csv 文件？如果如此接近然后重试。

# java - 如何将输出文本属性值作为超链接？

> ID：514926
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-02-05T07:33:07.293
> 
>         
> 
> 标签：java, html, jsf

我应该将书签显示为超链接。所以单击书签会将我带到相应的网页。谁能告诉我应该如何实现我的目标？谢谢。

```
<html>
  <f:view>
    <head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
      <title>Insert title here</title>
    </head>
    <body>
      <h:form>
        <h1>Welcome to bookmark page</h1>
        <h:dataTable value="#{table.bookmark}" var="item" border="1" rows="10">
          <f:facet name="header">
            <h:outputLabel value="Bookmark table"></h:outputLabel>
          </f:facet> 
          <h:column>
            <f:facet name="header">
              <h:outputLabel value="Edit"></h:outputLabel>
            </f:facet>
            <h:selectBooleanCheckbox value="#{item.editBookmark}" onclick="submit">
            </h:selectBooleanCheckbox>
          </h:column>
          <h:column> 
            <f:facet name="header">
              <h:outputLabel value="Sno"></h:outputLabel>
            </f:facet>
            <h:inputText value="#{item.sno}" rendered="#{item.editBookmark}" size="10">      
            </h:inputText>
            <h:outputText value="#{item.sno}" rendered="#{not item.editBookmark}">
            </h:outputText>
          </h:column>
          <h:column>
            <f:facet name="header">
              <h:outputLabel value="Bookmarks"></h:outputLabel>
            </f:facet>
            <h:inputText value="#{item.bookmark}" rendered="#{item.editBookmark}" size="10">
            </h:inputText>
            <h:outputText value="#{item.bookmark}" rendered="#{not item.editBookmark}">
            </h:outputText>
          </h:column>
        </h:dataTable>
        <h:commandButton value="submit">
        </h:commandButton>
      </h:form>
    </body>
  </f:view>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-02-05T07:57:53.220

看看`h:outputLink`：

```
<h:outputLink value="#{item.sno}" rendered="#{not item.editBookmark}"><f:verbatim>#{item.sno}</f:verbatim></h:outputLink> 
```

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-02-05T09:22:06.730

```
<h:outputLink value="#{item.bookmark}" rendered="#{not item.editBookmark}" <h:outputText value = "#{item.bookmark}" ></h:outputText> </h:outputLink> 
```

# mysql - 按两列对 MySQL 表排序

> ID：514943
> 
>         
> 
> 赞同：278
> 
>         
> 
> 时间：2009-02-05T07:49:49.053
> 
>         
> 
> 标签：mysql, sql-order-by

如何按两列对 MySQL 表进行排序？

我想要的是首先按最高评分排序的文章，然后是最近的日期。例如，这将是一个示例输出（左 # 是评分，然后是文章标题，然后是文章日期）

```
+================+==============================+== =============+
| article_rating | 文章 | 文章时间 |
+================+==============================+== =============+
| 50 | 这篇文章震撼 | 2009 年 2 月 4 日 |
+----------------+-----------------------------+-- ------------+
| 35 | 这篇文章不错| 2009 年 2 月 1 日 |
+----------------+-----------------------------+-- ------------+
| 5 | 这篇文章不那么热了| 2009 年 1 月 25 日 |
+================+==============================+== =============+

```

我正在使用的相关 SQL 是：

```
ORDER BY article_rating, article_time DESC 
```

我可以按其中一个排序，但不能同时排序。

* * *

## 回答 #1

> 赞同：573
> 
>             
> 
> 时间：2009-02-05T07:51:35.883

默认排序是升序，您需要在两个订单中添加关键字 DESC：

```
ORDER BY article_rating DESC, article_time DESC 
```

* * *

## 回答 #2

> 赞同：41
> 
>             
> 
> 时间：2009-02-05T07:55:05.580

```
ORDER BY article_rating, article_time DESC 
```

仅当有两篇具有相同评分的文章时才会按 article_time 排序。从我在你的例子中可以看到，这正是发生的事情。

```
↓ primary sort                         secondary sort ↓
1\.  50 | This article rocks          | Feb 4, 2009    3.
2\.  35 | This article is pretty good | Feb 1, 2009    2.
3\.  5  | This Article isn't so hot   | Jan 25, 2009   1. 
```

但考虑：

```
↓ primary sort                         secondary sort ↓
1\.  50 | This article rocks          | Feb 2, 2009    3.
1\.  50 | This article rocks, too     | Feb 4, 2009    4.
2\.  35 | This article is pretty good | Feb 1, 2009    2.
3\.  5  | This Article isn't so hot   | Jan 25, 2009   1. 
```

* * *

## 回答 #3

> 赞同：18
> 
>             
> 
> 时间：2009-02-05T07:54:07.330

```
ORDER BY article_rating ASC , article_time DESC 
```

`DESC`最后将按两列降序排序。您必须指定`ASC`是否要否则

* * *

## 回答 #4

> 赞同：8
> 
>             
> 
> 时间：2012-04-20T09:19:12.103

这可能会帮助那些正在寻找按两列但以并行方式对表格进行排序的方法的人。这意味着使用聚合排序功能组合两种排序。例如，在使用全文搜索检索文章以及涉及文章发布日期时，它非常有用。

这只是一个例子，但如果你抓住了这个想法，你会发现很多聚合函数可以使用。您甚至可以对列进行加权，使其更喜欢一秒。我的函数在这两种情况下都取了极端，因此最有价值的行位于顶部。

抱歉，如果有更简单的解决方案来完成这项工作，但我没有找到任何解决方案。

```
SELECT
 `id`,
 `text`,
 `date`
 FROM
   (
   SELECT
     k.`id`,
     k.`text`,
     k.`date`,
     k.`match_order_id`,
     @row := @row + 1 as `date_order_id`
     FROM
     (
       SELECT
         t.`id`,
         t.`text`,
         t.`date`,
         @row := @row + 1 as `match_order_id`
         FROM
         (
           SELECT
             `art_id` AS `id`,
             `text`   AS `text`,
             `date`   AS `date`,
             MATCH (`text`) AGAINST (:string) AS `match`
             FROM int_art_fulltext
             WHERE MATCH (`text`) AGAINST (:string IN BOOLEAN MODE)
             LIMIT 0,101
         ) t,
         (
           SELECT @row := 0
         ) r
         ORDER BY `match` DESC
     ) k,
     (
       SELECT @row := 0
     ) l
     ORDER BY k.`date` DESC
   ) s
 ORDER BY (1/`match_order_id`+1/`date_order_id`) DESC 
```

* * *

## 回答 #5

> 赞同：6
> 
>             
> 
> 时间：2013-09-29T04:15:53.583

以下将根据两列按降序排列您的数据。

```
ORDER BY article_rating DESC, article_time DESC 
```

# c# - 读取和写入 XLS 文件

> ID：514944
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-02-05T07:50:20.550
> 
>         
> 
> 标签：c#, .net, import, export, xls

我正在寻找一个 .Net 组件来从正在处理的应用程序中读取和写入 xls 文件。我不想在 Excel 中使用自动化。

它应该支持读写 Excel 97 和更新版本。如果它是开源或免费的，那就太好了，因为它是一个预算非常低的项目。

我找到了这个：[MyXLS](http://myxls.in2bits.org/)，看起来很有前途。

你知道任何替代方案吗？

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-08-29T18:34:31.440

[SpreadsheetGear for .NET](http://www.spreadsheetgear.com/)读取和写入 CSV / XLS / XLSX 并执行更多操作。

[您可以在此处](https://www.spreadsheetgear.com/downloads/register.aspx)查看带有 C# 和 VB 源代码的实时 ASP.NET 示例，并[在此处](http://www.spreadsheetgear.com/support/samples/)下载免费试用版。

免责声明：我拥有 SpreadsheetGear LLC

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2011-04-13T06:56:12.840

作为替代方案，我可以建议 Excel Jetcell .NET 组件。它漂亮的 Excel 组件。它不使用 Jet 驱动程序和 excel 自动化。所有信息请参见：

> [http://www.devtriogroup.com/ExcelJetcell](http://www.devtriogroup.com/ExcelJetcell/Default.aspx)

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2012-04-05T14:22:57.070

您可以使用 EasyXLS。该组件从 Excel 97 读取 xls 文件，从 Excel 2007-2010 读取 xlsx/xlsb 文件。

[www.easyxls.com](http://www.easyxls.com)

您可以在他们的网站上找到如何使用的示例。

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-02-05T07:54:19.013

首先 - 您必须支持哪个版本的 Excel？例如，xslx (2007) 只是一个包含 xml 文件的 zip 文件 - 所以您应该能够使用[#ZipLib](http://www.icsharpcode.net/OpenSource/SharpZipLib/)和 xml 生成/复制。

另一种选择是编写 CSV 并让用户将其导入 - 显然更适合数据而不是计算。

还有 2003 xml 电子表格格式 - 内容如下：

```
<Table ss:ExpandedColumnCount="3" ss:ExpandedRowCount="1" x:FullColumns="1"
   x:FullRows="1" ss:DefaultRowHeight="15">
   <Row>
    <Cell><Data ss:Type="Number">1</Data></Cell>
    <Cell><Data ss:Type="Number">2</Data></Cell>
    <Cell ss:Formula="=RC[-2]+RC[-1]"><Data ss:Type="Number">3</Data></Cell>
   </Row>
  </Table> 
```

很容易手工制作...

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2009-02-05T07:55:07.983

我工作的地方有这个：[http ://www.syncfusion.com/products/xlsio/backoffice/default.aspx](http://www.syncfusion.com/products/xlsio/backoffice/default.aspx)

已经用过几次了，用起来还是蛮方便的。

* * *

## 回答 #6

> 赞同：0
> 
>             
> 
> 时间：2009-02-05T08:04:56.137

我和 aspose 合作了很长时间，真的可以推荐它。

[http://www.aspose.com/categories/file-format-components/aspose.cells-for-.net-and-java/default.aspx](http://www.aspose.com/categories/file-format-components/aspose.cells-for-.net-and-java/default.aspx)

*   商业产品

*   大力支持

*   Excel 97-2007

*   100% 原生 .net

* * *

## 回答 #7

> 赞同：0
> 
>             
> 
> 时间：2009-02-05T11:19:34.807

[这一定是 SO 上被问得最多的问题之一](https://stackoverflow.com/search?q=excel+c%23+export)。

# inversion-of-control - 使用 IOC 容器的优缺点是什么？

> ID：514948
> 
>         
> 
> 赞同：12
> 
>         
> 
> 时间：2009-02-05T07:52:33.493
> 
>         
> 
> 标签：inversion-of-control, ioc-container

使用 IOC 容器会降低应用程序的速度，因为它们中的大多数都在后台使用反射。它们还可以使您的代码更难理解（？）。光明的一面; 它们帮助您创建更松散耦合的应用程序并使单元测试更容易。使用/不使用 IOC 容器还有其他优点和缺点吗？

* * *

## 回答 #1

> 赞同：19
> 
>             
> 
> 时间：2009-02-05T07:58:58.630

如果您以简单的方式使用 IOC 容器，则反射仅在启动时使用 - 应用程序已连接以启动，然后它正常运行而无需容器的任何干预。当然，如果您在开始运行后使用 IOC 来解决依赖关系，那可能会略有不同 - 尽管我仍然希望它能够延迟解析并缓存，除非您已将其配置为每个都创建新实例时间。

至于让代码更难理解——恰恰相反！明确说明依赖关系后，更容易理解每​​个组件，并且配置文件清楚地表明了整个应用程序是如何连接在一起的。

* * *

## 回答 #2

> 赞同：7
> 
>             
> 
> 时间：2009-02-05T07:57:52.360

好吧，我想我经历过的一个骗局是一些开发人员似乎无法掌握 IoC。我们有一些人无缘无故地反对它，除了他们不理解它们。（并不是说这是反对某事的坏理由，一点也不。）

它确实增加了一些抽象，似乎总是设法使某人或其他人感到困惑，但我想说在大多数情况下，利远大于弊。

* * *

## 回答 #3

> 赞同：7
> 
>             
> 
> 时间：2009-02-05T11:38:10.650

我认为公平地说，如果您对如何使用 IOC 有专业的了解并且倾向于编写好的代码，那么 IOC 将使您的代码在除最小系统之外的所有系统上更易于理解。

但是，如果您在大多数类/方法都非常大并且重构的概念尚未掌握的地方工作，那么尝试使用 IOC 可能只会使软件更难理解。国际奥委会还必须被所有参与该项目的人所借鉴，因此这可能是一个考虑因素。

我认为国际奥委会是锦上添花；我喜欢糖霜，但只在一个漂亮的蛋糕上。如果蛋糕一开始不好吃，先把蛋糕整理好。

至于使用 IOC 的性能开销，在大多数情况下我不认为这是一个问题。开销不需要很大，并且考虑到当今 CPU 的速度，大多数人的运行时间很可能是数据访问。如果 IOC 被证明对于给定的代码位变慢，我会考虑添加一些返回对象的缓存，或者仅从那段代码中删除*IOC*。

* * *

## 回答 #4

> 赞同：4
> 
>             
> 
> 时间：2009-02-05T08:40:39.047

我相信关于降低执行速度的假设与“C 比 C#/Java 更快”的论点大致相同。虽然这种说法对于特定的操作和/或结构简单的任务*可能*是正确的，但在复杂性上升的时候情况并非如此。

DI 框架让您专注于对象创建和依赖关系的方式可以在代码大小增加时创建更高效​​的系统。对于大型应用程序，我几乎可以肯定基于 DI 框架的代码将胜过任何替代解决方案。运行时的冗余太少了，很难提高效率！大多数额外开销也只是在第一次加载时。

高级 DI 容器还可以让您实现“范围”魔术，这是您在没有容器的情况下只能梦想的。使用范围代理，[spring](http://www.springsource.org/)可以执行以下操作：

```
 A Singleton
 |
 B Singleton
 |
 C Prototype (per-invocation)
 |
 D Singleton
 |
 E Session scope (web app)
 |
 F Singleton 
```

实际上，您可以拥有十层单例对象，并且突然之间出现了一些会话范围。

可以以与其他方式完全不同的方式注入安全性之类的东西。通常有一个经典的悖论：GUI 层通常需要对安全权限有复杂的了解。服务层通常也需要这个，但通常在不同的细节级别（通常不如 gui 详细）。经典的方法是将其作为参数发送，将其放在线程本地或询问服务。使用弹簧，您可以将其直接注入您需要的地方，而其他人不需要知道。

这实际上改变了整个应用程序开发。我真的很难适应这一点，但在经历了这种痛苦之后，我发现它确实更接近于事情应该如何（而不是我们学会如何去做）。

所以我认为 DI 框架有可能改变你制作程序的方式，其影响远不止 DI。这不仅仅是调用**new**的一种美化方式。

* * *

## 回答 #5

> 赞同：3
> 
>             
> 
> 时间：2009-02-05T08:03:51.723

我同意到目前为止的所有答案。

我想补充的是，它会产生一些开销，因此它并不真正适合小型应用程序。

中型和大型应用程序从使用 IoC 中获益最多。

您还可以查看这个问题以获取有关利弊的更多信息：[温莎城堡有什么缺点吗？](https://stackoverflow.com/questions/388355/castle-windsor-are-there-any-downsides)

* * *

## 回答 #6

> 赞同：2
> 
>             
> 
> 时间：2009-02-05T07:57:49.600

在大多数情况下，您甚至不会注意到性能损失，因为对于“单例”对象，所有初始化只执行一次。我还认为 IoC 使理解代码变得不同：相反，IoC 风格的开发迫使您创建小的连贯类，而这些类反过来更容易理解。

* * *

## 回答 #7

> 赞同：1
> 
>             
> 
> 时间：2009-02-05T18:22:44.220

如果您正在编写业务应用程序，则使用控制反转和依赖注入容器（结合其他敏捷实践和工具）将帮助您提高生产力和可靠性。

此外，您的应用程序可能会花费其大部分 CPU 时间来等待资源或等待人机交互，而没有做任何有用的事情。您的应用程序应该有足够的能力来进行几微秒的反射。

# unit-testing - 我应该为所有内容编写单元测试吗？

> ID：514953
> 
>         
> 
> 赞同：25
> 
>         
> 
> 时间：2009-02-05T07:56:45.437
> 
>         
> 
> 标签：unit-testing, tdd, mocking

我想知道我是否应该为所有内容编写单元测试。有一些类是很难写单元测试的。例如，我正在编写一些处理音频的程序。从麦克风捕获音频的类，以及向扬声器播放音频的类，我如何为这些类编写单元测试？我无法获得这些类的输出和输入，所以几乎不可能测试它们？我唯一能做的测试是 getter 和 setter，那些无聊的测试。那么问题来了，编写单元测试的指导方针是什么？而我应该如何处理这些难以测试的类？

* * *

## 回答 #1

> 赞同：47
> 
>             
> 
> 时间：2009-02-05T08:01:02.650

在有意义的地方使用单元测试——不要以 100% 的覆盖率为目标。主要指导方针是*思考*而不是应用教条或懒惰。

话虽如此：如果您有自然难以测试的课程，请尽量减少他们必须做的事情。隔离不可测试的代码并将其 API 分离到一个接口中。然后针对模拟或存根测试*使用该 API 的逻辑。*

* * *

## 回答 #2

> 赞同：14
> 
>             
> 
> 时间：2009-02-05T08:08:58.080

我只在我知道可以节省时间的地方编写单元测试。当我开始进行单元测试时，这只是类的一小部分（那些糟糕的 ejb ！！）。*今天，我几乎测试了所有东西，并且在我所做的每一件事*上都节省了总的开发时间。如果有一种通过麦克风测试用户输入的有效方法，我也会这样做。但据我所知，以节省我时间的方式是不可能的。

因此，我认为您应该对当前“测试能力”中的所有内容进行单元测试。您应该尝试扩展此功能，但过度扩展确实会发出错误优先级的信号；很可能还有其他一些值得您关注的测试。（从技术上讲，我被*测试感染*但没有*感染 TDD*）

收益递减法则适用于单元测试和任何其他测试一样；最后 5% 的回报非常低，而且成本很高。

* * *

## 回答 #3

> 赞同：6
> 
>             
> 
> 时间：2009-02-05T08:16:04.650

我用于决定是否开发单元测试的一条规则：如果你的类（或任何单元）将被“发布到野外”，那么你绝对应该考虑编写单元测试。

“在野外”，我的意思是：一旦你的代码将处于你无法预测或控制事物如何与之交互的情况。因此，通过 API 公开的类或向用户输入公开的类可能应该进行单元测试。

就个人而言，我认为为*所有内容*编写单元测试可能是在浪费您的时间。这确实是一个复杂的问题，您需要考虑：

*   类有多复杂？死简单的类可能不值得测试。

*   课堂有多重要？在 ATM 上运行的代码有望进行单元测试。

*   你对如何使用类有多少控制权？

然后总是：

*   项目截止日期是什么时候？

*   您投入了多少人力来创建测试？

*   您的要求是具体而详细的，还是课程仍然经常变化？

至于困难的课程，也许可以阅读一些关于[fuzz testing](http://en.wikipedia.org/wiki/Fuzzing)的内容。

* * *

## 回答 #4

> 赞同：3
> 
>             
> 
> 时间：2009-02-05T08:01:37.907

简短的回答是，不，但是当你问“所有事情都应该使用 IX 吗？”时，这适用于编程中的所有事情。

更长的答案是您至少应该考虑它，您正在这样做。为什么你不能模拟录音课的输入？为什么不让课程绕过麦克风录音以从文件加载音频并将输出转到文件而不是扬声器。该测试可以将输出结果与已知的正确结果进行比较。

有关哲学方面的更多信息，请参阅[此](http://www.joelonsoftware.com/items/2009/01/31.html)。

* * *

## 回答 #5

> 赞同：2
> 
>             
> 
> 时间：2009-02-05T12:50:44.403

无法对捕获和重放音频的代码进行单元测试（尽管您可以测试当类未成功绑定到资源时调用捕获方法时是否返回错误）。

但是，除非您只是将捕获的声音写入磁盘，否则调用您的捕获和播放类的代码当然可以。

两条忠告：

*   不要测试编译器（例如 getter 和 setter）

*   测试所有可能破坏的东西

* * *

## 回答 #6

> 赞同：2
> 
>             
> 
> 时间：2009-02-05T13:34:29.870

便宜的答案：[测试所有可能破坏的东西](http://c2.com/cgi-bin/wiki?TestEverythingThatCouldPossiblyBreak "测试所有可能破坏的东西")

最终，尽管您需要了解您编写的测试的商业价值——这与您花费的任何其他努力、您承诺维护的任何其他代码库没有什么不同。

* * *

## 回答 #7

> 赞同：2
> 
>             
> 
> 时间：2013-03-26T09:57:53.093

我测试大多数东西。

每当我编写测试时，我也会认为测试是关于如何使用我的代码的文档或说明，供我和其他人在未来阅读。

虽然我不测试实现。我希望能够在不更改测试的情况下更改实现。

我已经使用 TDD 可能有一两年了，所以也许我会成熟并停止。不过，到目前为止，我仍在学习并认为我没有编写足够的测试。

* * *

## 回答 #8

> 赞同：1
> 
>             
> 
> 时间：2009-02-05T08:04:09.417

要回答您的具体问题，请使用环回电缆。将扬声器连接到麦克风输入。编写一个渲染到扬声器并从麦克风捕获并验证您播放的相同内容被捕获的测试。我的建议是使用简单的正弦音，以便 FFT 可以告诉您是否捕获了相同的内容。

更一般的问题的答案是肯定的，您应该对所有可能的东西进行单元测试。这样做会为以后留下遗产，因此可以放心地完成未来的更改。它确保您的代码按预期工作。它还记录了接口的预期用途。最后，它强制更好的编码风格。通常难以进行单元测试的东西也设计得很差。为可测试性而写作意味着为更好的设计而写作。

* * *

## 回答 #9

> 赞同：1
> 
>             
> 
> 时间：2009-02-05T08:22:07.943

其他例子：如果你开发一个游戏引擎，你想测试你的阴影和其他功能，但你必须在视觉上确认——这不是经典的 UnitTest 可以决定的。

*您的案例：*随着您的应用程序变得越来越复杂，总是通过点击您的 UI 来测试您的所有功能会变得很痛苦。

我会编写一个“交互式测试套件”，其中仅显示您需要测试的功能的各种虚拟对话框（为每个测试用例定制）。关闭对话框后，系统将提示您该行为是否符合预期。但我不确定是否有可用的解决方案可以在这里提供帮助。

* * *

## 回答 #10

> 赞同：1
> 
>             
> 
> 时间：2009-02-05T10:13:48.810

您可能想在我的博客中查看我的系列“测试不可能”，了解如何测试的一些想法。

在您的情况下，我建议遵循[Steve Rowe 的想法，](https://stackoverflow.com/questions/514953/should-i-write-unit-test-for-everything/514974#514974)编写一个设置扬声器和麦克风的测试，并使用环回电缆测试硬件设置代码以及允许通过扬声器发出数据并从中读取数据的 API麦克风。

这是一个单元测试，但不是自动化的。将其移至不与其他自动测试一起运行的独立测试套件中。如果您想使其自动化，请使用正确的配置（加上环回电缆）设置第二台 PC，然后远程运行测试。

之后，您确定硬件设置工作正常，您可以发送和接收音频。这使您可以独立于硬件测试数据处理类。使用模型来模拟扬声器和麦克风。

* * *

## 回答 #11

> 赞同：1
> 
>             
> 
> 时间：2009-02-05T13:17:10.593

我倾向于尽可能多地编写测试。不仅要证明某事有效，而且要在其他人后来不可避免地破坏它时使其显而易见。

我有一个 1 行长的方法。在我的应用程序的类似地方，我编写了单元测试，但我很着急，我认为它不可能失败。我错了，它没有用:-)

编写单元测试的另一个好处不仅是测试你的代码，而且让以前从未见过你的代码的人可以阅读测试并理解你的代码在特定场景下应该如何工作......比如规范。

* * *

## 回答 #12

> 赞同：0
> 
>             
> 
> 时间：2009-02-05T07:59:37.520

如果您在设置特定区域的代码进行测试时遇到困难，那么可能值得研究一个模拟框架，例如[jMock](http://www.jmock.org/)或[EasyMock](http://www.easymock.org/)。

* * *

## 回答 #13

> 赞同：0
> 
>             
> 
> 时间：2009-02-06T12:54:40.467

设计测试是一种后天习得的技能——你测试得越多，你就会越擅长。有些事情似乎很难测试，但如果你考虑几分钟，你通常会找到一种方法。

测试可能很混乱——例如，java 程序可以启动解释器，甚至可以启动 shell（如 bash），然后启动一系列 unix 过滤器，您希望这些过滤器输出相同的二进制文件。不过不用担心——测试代码的质量不必像成品中的代码那么高。

# windows - 如何从屏幕上获取文本

> ID：514959
> 
>         
> 
> 赞同：4
> 
>         
> 
> 时间：2009-02-05T07:59:07.413
> 
>         
> 
> 标签：windows, winapi, ocr

有一些 Win OS API 调用可以让人们从屏幕上获取文本

不是通过获取快照然后对其进行 OCR，而是通过 API

这个想法是获取用户指向并单击的鼠标下的文本。

这就是像 Babylon ( [http://www.babylon.com](http://www.babylon.com) ) 和 1-Click Answers ( [http://www.answers.com/main/download_answers_win.jsp](http://www.answers.com/main/download_answers_win.jsp) ) 等工具以及许多其他工具的工作原理。

有人可以指出我获得此功能的正确方向吗？

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-02-05T08:09:23.350

没有直接的方法来获取文本。应用程序可以以无数种不同的方式呈现文本（Windows API 就是其中之一），并且在呈现之后 - 它只是一堆像素。

但是，您可以尝试的一种方法是直接在鼠标下方找到窗口并尝试从中获取文本。这在大多数标准 Windows 控件（标签、文本框等）上都可以正常工作。但在 Internet 浏览器上却不行。

我认为您能做的最好的事情就是使您的应用程序以上述方式支持尽可能多的不同（通用）控件。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-02-05T08:10:08.530

您可以使用 GetWindowText API 获取每个窗口的文本。可以使用 GetCursorPos API 找到鼠标位置。  

在 Delphi 中，您可以使用此功能（感谢下面的彼得）

```
Function ChildWindowUnderCursor: HWND;
Var
  hw, lasthw: HWND;
  pt, clientpt: TPoint;
Begin
  Result := 0;
  GetCursorPos( pt );
  // find top-level window under cursor
  hw := WindowFromPoint( pt );
  If hw = 0 Then Exit;

  // look for child windows in the window recursively
  // until we find no new windows
  Repeat
    lasthw := hw;
    clientpt := Pt;
    Windows.ScreenToClient( lasthw, clientpt );
    // Use ChildwindowfromPoint if app needs to run on NT 3.51!
    hw := ChildwindowFromPointEx( lasthw, clientpt, CWP_SKIPINVISIBLE );
  Until hw = lasthw;
  Result := hw;
End; 
```

问候，

利文

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2017-10-27T23:18:58.920

Windows 具有可访问性工具的 API，例如盲人屏幕阅读器。（较新的版本也用于其他目的，例如 UI 自动化和测试。）它适用于许多应用程序，甚至大多数浏览器都可以在不使用标准 Windows 控件的情况下呈现自己的内容。它不适用于所有应用程序，但在大多数情况下可用于找出鼠标下的文本。

当前的 API 称为[Windows 自动化 API](https://msdn.microsoft.com/en-us/library/windows/desktop/ff486375(v=vs.85).aspx)。通常描述如何执行此操作超出了 Stack Overflow 答案的范围，因此我只是提供了文档的链接。

首次发布此问题时广泛使用的旧 API 称为[Microsoft Active Accessibility API](https://msdn.microsoft.com/en-us/library/windows/desktop/dd373592(v=vs.85).aspx)。与现代 API 一样，这里的范围过于广泛，无法在此详述。

请注意，这两个 API 的文档既是为构建无障碍工具（如屏幕阅读器）的开发人员编写的，也是为编写希望与这些无障碍工具兼容的应用程序的开发人员编写的。

基本思想是辅助工具获取目标应用程序窗口提供的 COM 接口，它可以使用这些接口来确定控件及其文本以及它们在逻辑和空间上的关系。由标准 Windows 控件组成的应用程序大多是自动支持的。具有自定义 UI 实现的应用程序必须努力提供这些接口。幸运的是，主流浏览器等重要的浏览器已经完成了支持这些接口的工作。

* * *

## 回答 #4

> 赞同：-1
> 
>             
> 
> 时间：2009-02-05T08:07:01.360

我认为它称为剪贴板。我敢打赌这些程序会注入点击和双击和键盘事件，然后将项目复制到那里以供检查。或者，他们开始使用 Windows 文本控件，并以这种方式获取内容。我怀疑由于安全问题，这些工具在 vista 中运行也存在问题。

# c# - 网络服务减速

> ID：514963
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-02-05T08:00:40.390
> 
>         
> 
> 标签：c#, service, gsoap

我的网络服务速度变慢了。我的（网络）服务在 gsoap 和托管 C++ 中。它不是托管的 IIS/apache，而是使用 xml。我的客户端在 .NET 中，服务计算时间很短（<0.1s 准备回复）。我希望该服务能够顺利、快速并具有良好的可用性。我有大约 100 个客户，响应时间是 1 秒。客户每分钟大约有 1 个请求。客户端通过 tcp 开放端口测试检查 Web 服务是否存在。因此，为了避免可能的拥塞，我将 gSoap KeepAlive 设置为 false。直到一切正常：我在 TCPView (sysinternals) 中看到连接

新的特殊同步程序现在循环调用该服务。它的负载更高，但所有内容都在不到 30 秒的时间内处理完毕。使用 sysinternals TCPView，我看到大约 1000 个连接处于 TIME_WAIT 中。他们减慢了服务速度，现在服务需要几秒钟才能回复。

难道是我需要重置 SoapHttpClientProtocol 连接？有人有 TIME_WAIT 鬼和一个循环的 Web 服务调用？

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-02-05T08:23:59.873

听起来您没有在通话后关闭连接并在每个请求上打开新连接。关闭连接或重用打开的连接。

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2010-12-31T20:12:31.617

对上面提到的实现要非常小心。他们有严重的问题。

1.  yakkowarner.blogspot.com/2008/11/calling-web-service-in-loop.html（上面的评论）中描述的实现：

    **问题：**下次您使用 wsdl.exe 重新生成 Web 服务时，您的所有工作都将被清除，并且您将忘记您没有提到此修复程序依赖于消息字符串来采取行动的方法。

2.  forums.asp.net/t/1003135.aspx（上面的评论）中描述的实现：

    **问题：**您正在选择一个介于 5000 和 65535 之间的端点，因此从表面上看，这看起来是个好主意。如果您考虑一下，就没有办法（至少我想不到）您可以保留端口以供以后使用。您如何保证列表中的下一个端口当前未使用？您正在按顺序选择要使用的端口，如果其他一些应用程序选择了您列表中的下一个端口，那么您就完蛋了。或者，如果在您的客户端计算机上运行的其他一些应用程序开始使用随机端口进行连接怎么办——您将在不可预测的时间点被淹没。您会随机收到一条错误消息，例如“无法访问或不可用远程主机” - 更难排除故障。

尽管我无法为您提供解决此问题的正确方法，但您可以做的一些事情是：

1.  尽量减少 Web 服务请求的数量或将它们分散到更长的时间段内

2.  对于您的应用程序类型，Web 服务可能不是正确的架构 - 对于 1 毫秒响应时间的东西，您应该使用消息传递系统 - 而不是 Web 服务

3.  使用注册表将您的操作系统允许的连接数设置为 65K，就像在 Windows 中一样

4.  将您操作系统的套接字保留在 TIME_WAIT 中的时间设置为某个较低的数字（这提出了自己的问题列表）

# vim - 使 Vim 补全工作更像在 Visual Studio 中

> ID：514967
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-02-05T08:01:55.223
> 
>         
> 
> 标签：vim, code-completion

我希望[Vim](http://en.wikipedia.org/wiki/Vim_%28text_editor%29)的完成菜单更像 Visual Studio 中的完成菜单。我希望能够编写变量的开头（或可以完成的东西），点击全能完成键并获得完成菜单。现在我希望完成菜单突出显示最佳匹配但不将其添加到缓冲区。现在我希望能够按 ENTER 输入所选元素或输入更多字母以进一步过滤完成菜单（可能突出显示完成菜单中的新项目），然后按 Enter 插入。

[http://vim.wikia.com/wiki/Make_Vim_completion_popup_menu_work_just_like_in_an_IDE](http://vim.wikia.com/wiki/Make_Vim_completion_popup_menu_work_just_like_in_an_IDE)的 wiki 页面/提示应该这样做，但我无法让它工作。其他人是否尝试过该提示中的代码并使其按照我的描述工作？

* * *

## 回答 #1

> 赞同：5
> 
>             
> 
> 时间：2009-02-05T10:37:58.090

引用的 wiki 页面包含损坏的映射。一位用户 (Spiiph) 将 Vim 代码更改为对他来说更好看但不正确的代码。我撤销了他所做的更改，现在*inoremap*语句应该可以工作了。

为避免混淆，恕我直言，这些是正确的命令：

```
inoremap <expr> <c-n> pumvisible() ? "\<lt>c-n>" : "\<lt>c-n>\<lt>c-r>=pumvisible() ? \"\\<lt>down>\" : \"\"\<lt>cr>"
inoremap <expr> <m-;> pumvisible() ? "\<lt>c-n>" : "\<lt>c-x>\<lt>c-o>\<lt>c-n>\<lt>c-p>\<lt>c-r>=pumvisible() ? \"\\<lt>down>\" : \"\"\<lt>cr>" 
```

* * *

PS：当谈到使用 Vim 的补全功能时，我发现[SuperTab 脚本](http://www.vim.org/scripts/script.php?script_id=1643)
  非常方便。在这种情况下，也许这个脚本对你来说也很有趣......

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-09-21T10:43:57.423

我使用我非常喜欢的 supertab，以下似乎效果很好：

```
imap <expr> <Tab> pumvisible() ? "<Tab>" : "<Tab><Down>" 
```

供参考：我正在运行 debian sid，这适用于 vim 7.2.245 和我修补的 7.2.259。

# delphi - 如何使用 Delphi2007 运行非提升的进程

> ID：514968
> 
>         
> 
> 赞同：6
> 
>         
> 
> 时间：2009-02-05T08:02:41.557
> 
>         
> 
> 标签：delphi, windows-vista

我有一个类似安装程序的应用程序，我必须在 Vista 上以提升的方式运行。但是从那里我必须开始一个非提升的新过程。任何提示如何使用 Delphi2007 做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
>             
> 
> 时间：2011-11-06T21:33:35.377

我[为 C++ 找到了一个很好的示例，](http://www.codeproject.com/Messages/3264682/Here-the-cleaned-and-bugfixed-code.aspx)并将其改编为 Delphi：

```
unit MediumIL;

interface

uses
  Winapi.Windows;

function CreateProcessMediumIL(lpApplicationName: PWChar; lpCommandLine: PWChar; lpProcessAttributes: PSecurityAttributes; lpThreadAttributes: PSecurityAttributes; bInheritHandle: BOOL; dwCreationFlags: DWORD; lpEnvironment: LPVOID; lpCurrentDirectory: PWChar; const lpStartupInfo: TStartupInfoW; var lpProcessInformation: TProcessInformation): DWORD;

implementation

type
  TOKEN_MANDATORY_LABEL = record
    Label_: SID_AND_ATTRIBUTES;
  end;

  PTOKEN_MANDATORY_LABEL = ^TOKEN_MANDATORY_LABEL;

  TTokenMandatoryLabel = TOKEN_MANDATORY_LABEL;
  PTokenMandatoryLabel = ^TTokenMandatoryLabel;

  TCreateProcessWithTokenW = function (hToken: THandle; dwLogonFlags: DWORD; lpApplicationName: LPCWSTR; lpCommandLine: LPWSTR; dwCreationFlags: DWORD; lpEnvironment: LPVOID; lpCurrentDirectory: LPCWSTR; const lpStartupInfo: TStartupInfoW; out lpProcessInfo: TProcessInformation): BOOL; stdcall;

const
  SECURITY_MANDATORY_UNTRUSTED_RID = $00000000;
  SECURITY_MANDATORY_LOW_RID = $00001000;
  SECURITY_MANDATORY_MEDIUM_RID = $00002000;
  SECURITY_MANDATORY_HIGH_RID = $00003000;
  SECURITY_MANDATORY_SYSTEM_RID = $00004000;
  SECURITY_MANDATORY_PROTECTED_PROCESS_RID = $00005000;

function GetShellWindow: HWND; stdcall; external 'user32.dll' name 'GetShellWindow';

// writes Integration Level of the process with the given ID into dwProcessIL
// returns Win32 API error or 0 if succeeded
function GetProcessIL(dwProcessID: DWORD; var dwProcessIL: DWORD): DWORD;
label
  _CleanUp;
var
  hProcess: THandle;
  hToken: THandle;
  dwSize: DWORD;
  pbCount: PByte;
  pdwProcIL: PDWORD;
  pTIL: PTokenMandatoryLabel;
  dwError: DWORD;
begin
  dwProcessIL := 0;

  pTIL := nil;

  hProcess := OpenProcess(PROCESS_QUERY_INFORMATION, False, dwProcessID);
  if (hProcess = 0) then
    goto _CleanUp;

  if (not OpenProcessToken(hProcess, TOKEN_QUERY, hToken)) then
    goto _CleanUp;

  if (not GetTokenInformation(hToken, TokenIntegrityLevel, nil, 0, dwSize) and (GetLastError() <> ERROR_INSUFFICIENT_BUFFER)) then
    goto _CleanUp;

  pTIL := HeapAlloc(GetProcessHeap(), 0, dwSize);
  if (pTIL = nil) then
    goto _CleanUp;

  if (not GetTokenInformation(hToken, TokenIntegrityLevel, pTIL, dwSize, dwSize)) then
    goto _CleanUp;

  pbCount := PByte(GetSidSubAuthorityCount(pTIL^.Label_.Sid));
  if (pbCount = nil) then
    goto _CleanUp;

  pdwProcIL := GetSidSubAuthority(pTIL^.Label_.Sid, pbCount^ - 1);
  if (pdwProcIL = nil) then
    goto _CleanUp;

  dwProcessIL := pdwProcIL^;
  SetLastError(ERROR_SUCCESS);

  _CleanUp:
  dwError := GetLastError();
  if (pTIL <> nil) then
    HeapFree(GetProcessHeap(), 0, pTIL);
  if (hToken <> 0) then
    CloseHandle(hToken);
  if (hProcess <> 0) then
    CloseHandle(hProcess);
  Result := dwError;
end;

// Creates a new process lpApplicationName with the integration level of the Explorer process (MEDIUM IL)
// If you need this function in a service you must replace FindWindow() with another API to find Explorer process
// The parent process of the new process will be svchost.exe if this EXE was run "As Administrator"
// returns Win32 API error or 0 if succeeded
function CreateProcessMediumIL(lpApplicationName: PWChar; lpCommandLine: PWChar; lpProcessAttributes: PSecurityAttributes; lpThreadAttributes: PSecurityAttributes; bInheritHandle: BOOL; dwCreationFlags: DWORD; lpEnvironment: LPVOID; lpCurrentDirectory: PWChar; const lpStartupInfo: TStartupInfoW; var lpProcessInformation: TProcessInformation): DWORD;
label
  _CleanUp;
var
  hProcess: THandle;
  hToken: THandle;
  hToken2: THandle;
  bUseToken: BOOL;
  dwCurIL: DWORD;
  dwErr: DWORD;
  f_CreateProcessWithTokenW: TCreateProcessWithTokenW;
  hProgman: HWND;
  dwExplorerPID: DWORD;
  dwError: DWORD;
begin
  bUseToken := False;

  // Detect Windows Vista, 2008, Windows 7 and higher
  if (GetProcAddress(GetModuleHandleA('Kernel32'), 'GetProductInfo') <> nil) then
  begin
    dwErr := GetProcessIL(GetCurrentProcessId(), dwCurIL);
    if (dwErr <> 0) then
    begin
      Result := dwErr;
      Exit;
    end;
      if (dwCurIL > SECURITY_MANDATORY_MEDIUM_RID) then
        bUseToken := True;
  end;

  // Create the process normally (before Windows Vista or if current process runs with a medium IL)
  if (not bUseToken) then
  begin
    if (not CreateProcessW(lpApplicationName, lpCommandLine, lpProcessAttributes, lpThreadAttributes, bInheritHandle, dwCreationFlags, lpEnvironment, lpCurrentDirectory, lpStartupInfo, lpProcessInformation)) then
    begin
      Result := GetLastError();
      Exit;
    end;

    CloseHandle(lpProcessInformation.hThread);
    CloseHandle(lpProcessInformation.hProcess);
    Result := ERROR_SUCCESS;
    Exit;
  end;

  f_CreateProcessWithTokenW := GetProcAddress(GetModuleHandleA('Advapi32'), 'CreateProcessWithTokenW');

  if (not Assigned(f_CreateProcessWithTokenW)) then // This will never happen on Vista!
  begin
    Result := ERROR_INVALID_FUNCTION;
    Exit;
  end;

  hProgman := GetShellWindow();

  dwExplorerPID := 0;
  GetWindowThreadProcessId(hProgman, dwExplorerPID);

  // ATTENTION:
  // If UAC is turned OFF all processes run with SECURITY_MANDATORY_HIGH_RID, also Explorer!
  // But this does not matter because to start the new process without UAC no elevation is required.
  hProcess := OpenProcess(PROCESS_QUERY_INFORMATION, False, dwExplorerPID);
  if (hProcess = 0) then
    goto _CleanUp;

  if (not OpenProcessToken(hProcess, TOKEN_DUPLICATE, hToken)) then
    goto _CleanUp;

  if (not DuplicateTokenEx(hToken, TOKEN_ALL_ACCESS, nil, SecurityImpersonation, TokenPrimary, hToken2)) then
    goto _CleanUp;

  if (not f_CreateProcessWithTokenW(hToken2, 0, lpApplicationName, lpCommandLine, dwCreationFlags, lpEnvironment, lpCurrentDirectory, lpStartupInfo, lpProcessInformation)) then
    goto _CleanUp;

  SetLastError(ERROR_SUCCESS);

  _CleanUp:
  dwError := GetLastError();
  if (hToken <> 0) then
    CloseHandle(hToken);
  if (hToken2 <> 0) then
    CloseHandle(hToken2);
  if (hProcess <> 0) then
    CloseHandle(hProcess);
  CloseHandle(lpProcessInformation.hThread);
  CloseHandle(lpProcessInformation.hProcess);
  Result := dwError;
end;

end. 
```

要在您的项目中使用它，只需使用单元 MediumIL：

```
uses MediumIL;

…

procedure TForm1.FormCreate(Sender: TObject);
var
  StartupInfo: TStartupInfo;
  ProcessInfo: TProcessInformation;
begin
  ZeroMemory(@StartupInfo, SizeOf(StartupInfo));
  ZeroMemory(@ProcessInfo, SizeOf(ProcessInfo));
  CreateProcessMediumIL('C:\Windows\notepad.exe', nil, nil, nil, False, 0, nil, nil, StartupInfo, ProcessInfo);
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-02-05T08:16:04.603

这篇博文很详细，很有用

[http://developersoven.blogspot.com/2007/02/leveraging-vistas-uac-with-delphi-part.html](http://developersoven.blogspot.com/2007/02/leveraging-vistas-uac-with-delphi-part.html)

这个想法是使用具有低权限的应用程序和具有提升权限的 COM Dll。然后，当您需要提升时，您只需启动 COM。帖子中包含完整的 MPL 源链接。

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-02-06T08:31:58.700

您可以使用[CreateProcessWithLogonW()](http://msdn.microsoft.com/en-us/library/ms682431(VS.85).aspx) API 调用：

```
function CreateProcessWithLogonW(lpUsername: PWideChar; lpDomain: PWideChar;
  lpPassword: PWideChar; dwLogonFlags: DWORD; lpApplicationName: PWideChar;
  lpCommandLine: PWideChar; dwCreationFlags: DWORD; lpEnvironment: Pointer;
  lpCurrentDirectory: PWideChar; const lpStartupInfo: TStartupInfo;
  var lpProcessInformation: TProcessInformation): BOOL; stdcall;
  external 'advapi32.dll' name 'CreateProcessWithLogonW';

procedure RunAs(AUsername, APassword, ADomain, AApplication: string);
const
  LOGON_WITH_PROFILE = $00000001;
var
  si: TStartupInfo;
  pi: TProcessInformation;
begin
  ZeroMemory(@si, SizeOf(si));
  si.cb := SizeOf(si);
  si.dwFlags := STARTF_USESHOWWINDOW;
  si.wShowWindow := SW_NORMAL;
  ZeroMemory(@pi, SizeOf(pi));

  if not CreateProcessWithLogonW(PWideChar(WideString(AUsername)),
    PWideChar(WideString(ADomain)), PWideChar(WideString(APassword)),
    LOGON_WITH_PROFILE, nil, PWideChar(WideString(AApplication)),
    0, nil, nil, si, pi)
  then
    RaiseLastOSError;

  CloseHandle(pi.hThread);
  CloseHandle(pi.hProcess);
end; 
```

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2009-02-05T15:53:44.583

请注意确定这是否会有所帮助，但在 c#.net 中也有类似的问题[，](https://stackoverflow.com/questions/196949/how-to-run-not-elevated-in-vista-net)但它可能会为您提供一些线索，或者您可以尝试使用 Delphi 的端口。

只是提示尽量不要在应用程序文件名中包含更新/安装/设置，因为 vista 会自动将安全图标添加到 exe 中。

* * *

## 回答 #5

> 赞同：1
> 
>             
> 
> 时间：2012-10-27T21:52:34.393

Aaron Margosis 的以下文章正好涵盖了这个主题：[常见问题解答：如何以桌面用户身份从提升的应用程序启动程序？](http://blogs.msdn.com/b/aaron_margosis/archive/2009/06/06/faq-how-do-i-start-a-program-as-the-desktop-user-from-an-elevated-app.aspx)

基本思想是获取shell进程的用户令牌，即`explorer.exe`从中制作一个主令牌，最后用该令牌启动新进程。

这篇文章包含一些 C++ 代码，这些代码应该很容易转换为 Delphi。它还包括以下列出该方法的分项清单：

> 1.  在您当前的令牌中启用 SeIncreaseQuotaPrivilege
> 
> 2.  获取代表桌面外壳的 HWND (GetShellWindow)
> 
> 3.  获取与该窗口关联的进程的进程 ID (PID) (GetWindowThreadProcessId)
> 
> 4.  打开那个进程（OpenProcess）
> 
> 5.  从该进程获取访问令牌 (OpenProcessToken)
> 
> 6.  使用该令牌制作主令牌（DuplicateTokenEx）
> 
> 7.  使用该主令牌启动新进程 (CreateProcessWithTokenW)

* * *

## 回答 #6

> 赞同：1
> 
>             
> 
> 时间：2015-06-17T16:23:05.330

我想在上面的[Elçins 回答](https://stackoverflow.com/a/8030558/2246380)中添加：

如果代码行：

```
 if (not DuplicateTokenEx(hToken, TOKEN_ALL_ACCESS, nil, SecurityImpersonation, TokenPrimary, hToken2)) then
goto _CleanUp; 
```

返回错误`5 (Access Denied)`，然后`TOKEN_ALL_ACCESS`需要`OR`用`TOKEN_ADJUST_SESSIONID`(0x100) 编辑。

在 Delphi 2010 上，更改`LPVOID`为`POINTER`.

# c++ - 调用基类函数

> ID：514977
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-02-05T08:06:45.963
> 
>         
> 
> 标签：c++

我有以下课程。

```
class A
{

public:

void fun();

}

class B: public A
{

}

class C: public A
{

}

A * ptr = new C; 
```

可以做下面的事情吗？如果在基类中引入一些虚函数，我会遇到一些问题吗？

```
((B *)ptr)->fun(); 
```

这可能看起来很愚蠢，但我有一个通过 B 调用 A 的函数的函数，我不想改变它。

* * *

## 回答 #1

> 赞同：7
> 
>             
> 
> 时间：2009-02-05T08:11:12.490

您不能将指向 C 类的 A* 转换为 B*，因为 C 类与 B 类没有任何关系。您将得到未定义的行为，这可能是调用的错误函数和堆栈损坏。

如果您打算让 C 类从 B 类派生，那么您可以。但是，您不需要这样做。如果类 C 没有定义 fun()，它将继承 A。虽然你没有声明 fun() 虚拟，所以如果你实现 C::fun() 或 B::fun()，你会得到奇怪的行为。您几乎肯定希望 fun() 被声明为虚拟的。

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-02-05T08:16:43.493

您不必进行强制转换 (B*) ptr->fun(); 因为 fun() 已经在基类中。在您的示例中，B 类或 C 类的两个对象都将调用相同的 fun() 函数。

我不确定当你覆盖 B 类中的 fun() 函数时会发生什么......

但在我看来，试图从另一个类（不是基类）调用函数是不好的 OO。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-02-05T08:20:33.190

我在这里猜测，但我怀疑它的行为可能取决于您使用的编译器以及它如何决定组织 vf 指针表。

我还要指出，我认为您正在做的是一个坏主意，可能会导致各种噩梦般的问题（使用 static_cast 和 dynamic_cast 之类的东西通常是个好主意）。另一件事是因为 fun() 是在基类中定义的（并且它不是虚拟的） ptr->fun() 将始终调用 A::fun() 而不必将其强制转换为 B*。

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-02-05T15:33:34.200

您可以从 A * 转换为 B *，如果原始指针是 B *，它应该可以工作。

```
A* p = new B;
B* q = static_cast<B*>(p); // Just work (tm) 
```

但在这种情况下，它是一个 C *，并且不能保证工作，你会以一个悬空指针结束，如果你幸运的话，你会遇到访问冲突，如果不是，你最终会默默地破坏你的内存。

```
A* p = new C;
B* q = static_cast<B*>(p); // Owned (tm) 
```

# mysql - 并发 SQL 插入同一个表在事务上是安全的吗？

> ID：514980
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-02-05T08:07:31.687
> 
>         
> 
> 标签：mysql, database, concurrency

我在 MySql 中有一个简单的表，它的存在理由是存储日志。该表具有自动递增序列，并且所有其他列对其他表的引用完整性为零。任何列上都没有唯一键或索引。具有自动增量的列是主键。

并发 INSERT 是否会相互干扰？我将**干扰**定义为丢失数据。

我为此插入使用 autocommit=true。

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-02-05T09:24:27.830

您永远不会因为同时插入而丢失数据。如果您使用交易，您可能会“丢失”一些 ID，但不会丢失实际数据。（假设您启动一个事务，插入几行，然后进行回滚。InnoDB 将分配 auto_increment IDs ，但没有具有这些 ID 的行，因为您进行了回滚）。

由于您不需要索引，因此您应该查看 ARCHIVE 表引擎。它的速度快得惊人——而且你的表变得更小，这反过来又使你稍后读取表时扫描表的速度要快得多。

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-02-05T08:13:44.840

是的。对于 InnoDB ，[这里有更多信息](http://dev.mysql.com/doc/refman/5.1/en/innodb-auto-increment-handling.html)

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2009-02-05T08:14:37.943

[来自MyISAM 存储引擎](http://dev.mysql.com/doc/refman/5.1/en/myisam-storage-engine.html)的 MySQL 手册：

```
"MyISAM supports concurrent inserts..." 
```

# c++ - C++模板书的建议？

> ID：514981
> 
>         
> 
> 赞同：29
> 
>         
> 
> 时间：2009-02-05T08:08:13.790
> 
>         
> 
> 标签：c++, templates, resources

我正在学习模板。做模板编程有什么书值得买？

我已经有了[The C++ Programming Language](http://en.wikipedia.org/wiki/The_C%2B%2B_Programming_Language)和[Effective C++](http://en.wikipedia.org/wiki/Scott_Meyers#Publications)。

* * *

## 回答 #1

> 赞同：43
> 
>             
> 
> 时间：2009-02-05T08:19:15.657

这两本书在我看来都很好，对我帮助很大

> *   [*C++ 模板：* David Vandevoorde 和 Nicolai M. Josuttis的完整指南](https://rads.stackoverflow.com/amzn/click/com/0201734842)
> 
> *   [*Andrei Alexandrescu 的*现代 C++ 设计**](https://rads.stackoverflow.com/amzn/click/com/0201704315)

 *第一个解释了模板的工作原理。第二本书更多地是关于*如何*使用它们。我建议您在开始使用 Modern C++ Design 之前阅读第一本书，因为那是沉重的东西。  

* * *

## 回答 #2

> 赞同：10
> 
>             
> 
> 时间：2009-02-05T08:15:14.587

如果您只是在学习，可能有点令人难以置信，但是在您提到的书籍之后，您可能想阅读 Andrei Alexandrescu 的[Modern C++ Design](https://rads.stackoverflow.com/amzn/click/com/0201704315)，如果只是为了了解可以通过模板完成的工作。此外，它还精彩地讨论了模板的许多高级方面。

* * *

## 回答 #3

> 赞同：8
> 
>             
> 
> 时间：2011-09-20T16:04:31.600

搜索[Davide Di Gennaro 的近期书籍“高级 C++ 元编程”](https://rads.stackoverflow.com/amzn/click/com/1460966163)

* * *

## 回答 #4

> 赞同：5
> 
>             
> 
> 时间：2009-02-05T08:16:04.883

[现代 C++ 设计](https://rads.stackoverflow.com/amzn/click/com/0201704315)和[C++ 模板元编程](https://rads.stackoverflow.com/amzn/click/com/0321227255)都是关于该主题的非常好的（并且非常先进的）书籍。我对第一个有强烈的个人偏好。

* * *

## 回答 #5

> 赞同：2
> 
>             
> 
> 时间：2009-02-05T08:15:32.403

[C++ 模板：完整指南](https://rads.stackoverflow.com/amzn/click/com/0201734842)是您最好的选择。您还可以了解大量使用模板的[标准库。](https://stackoverflow.com/questions/171802/where-can-i-learn-about-the-c-standard-template-library-stl/)

* * *

## 回答 #6

> 赞同：1
> 
>             
> 
> 时间：2009-02-05T12:27:56.260

[“C++ 模板：完整指南 (Vandevoorde & Josuttis)”](https://rads.stackoverflow.com/amzn/click/com/0201734842)非常适合该理论。然后，您可以通过查看模板在[Boost 库](http://www.boost.org/)中的使用方式来了解更多关于实际模板实践的信息。

* * *

## 回答 #7

> 赞同：1
> 
>             
> 
> 时间：2009-02-05T13:32:59.420

C++ 模板中隐藏着一个很少有人知道的宝藏：[C++ 常识：基本的中级编程](https://rads.stackoverflow.com/amzn/click/com/0321321928)。

这本书的最后 15 章在某些方面都对*C++ 模板元编程进行了更好的教学和补充。*我强烈建议任何学习模板的人首先阅读这本书。

* * *

## 回答 #8

> 赞同：0
> 
>             
> 
> 时间：2009-02-05T20:32:59.807

斯科特迈耶斯的[有效 STL](https://rads.stackoverflow.com/amzn/click/com/0201749629)

# apache-flex - Flex : 在页面中显示高级 DataGrid 数据

> ID：514994
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-02-05T08:11:57.887
> 
>         
> 
> 标签：apache-flex, datagrid

我有一个 flex 应用程序，我在其中使用高级数据网格显示登录数据。是否可以通过页面方式显示此高级数据网格中的数据？如果是这样，您是否有任何示例编码来执行此操作。谢谢

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-02-05T18:59:26.580

这是我认为可能对您有所帮助的示例：http: [//gurufaction.blogspot.com/2007/02/flex-datagrid-paging-example-with.html](http://gurufaction.blogspot.com/2007/02/flex-datagrid-paging-example-with.html)

SWF: [http://develop.gurufaction.com/App.swf](http://develop.gurufaction.com/App.swf)

MXML：http: [//develop.gurufaction.com/src/App.mxml](http://develop.gurufaction.com/src/App.mxml)

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-02-16T16:19:06.367

You can use the "filterFunction".
Write a custom function to filter data according on which "page" you are browsing.

Another solution is to split the original array to get several array which will be assigned according to the current page.* 
```*************