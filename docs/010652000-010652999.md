# StackOverflow 问答 10652000-10652999

# powershell - psexec 无法识别

> ID：10652000
> 
> 赞同：5
> 
> 时间：2012-05-18T11:42:37.587
> 
> 标签：powershell, psexec

我正在使用 Microsoft Server 2008 机器。出于某种原因，命令“psexec”在这台机器上的 powershell 中不起作用。

当我尝试运行它时，我得到了这个：

```
PS C:\> psexec
The term 'psexec' is not recognized as the name of a cmdlet, function, script file, or operable program. Check the spelling of the name, or
if a path was included, verify that the path is correct and try again.
At line:1 char:7
+ psexec <<<<
    + CategoryInfo          : ObjectNotFound: (psexec:String) [], CommandNotFoundException
    + FullyQualifiedErrorId : CommandNotFoundException

PS C:\> 
```

它正在运行 powershell 2.0。我通过这样做发现了这一点：

```
PS C:\> $Host.Version

Major  Minor  Build  Revision
-----  -----  -----  --------
2      0      -1     -1

PS C:\> 
```

有什么想法吗？我需要这个命令，而且我真的不想使用“解决方法”。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-20T01:01:13.670

完成答案：

您必须从下面的链接下载 PSEXEC 并保留从 Powershell 或任何命令提示符启动的路径： [http ://technet.microsoft.com/en-us/sysinternals/bb897553](http://technet.microsoft.com/en-us/sysinternals/bb897553)

# routing - 在zend框架v2的重定向中设置url参数

> ID：10652001
> 
> 赞同：12
> 
> 时间：2012-05-18T11:42:38.637
> 
> 标签：routing, url-routing, zend-route, zend-framework2

我的控制器中有以下重定向脚本（Zend Framework 2）

```
return $this->redirect()->toRoute('default', array(
                        'controller' => 'admin',
                        'action' =>  'index'
)); 
```

目前重定向到`localhost/zf2/public/admin/index`

如何使用额外的参数重定向？

喜欢：

`localhost/zf2/public/admin/index/update/1`

或者`localhost/zf2/public/admin/index/page/2`

我试过这个：

```
return $this->redirect()->toRoute('default', array(
                        'controller' => 'admin',
                        'action' =>  'index'
                            'param' => 'updated/1'
                        )); 
```

但是被重定向到`localhost/ttacounting/public/admin/index/updated%2F1`

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-10-06T01:30:26.697

这是一个工作示例。路由脚本

```
$this->redirect()->toRoute('myaccount', array(
    'controller' => 'admin',
    'action' =>  'index',
    'param1' =>'updated',
    'param2'=>'1'
)); 
```

然后，在 module.config.php 中设置参数

```
'myaccount' => array(
    'type' => 'Segment',
    'options' => array(
    'route'    => '/myaccount[/:action][/:param1][/:param2]',
    'defaults' => array(
            'controller' => 'Main\Controller\MyAccount',
            'action'     => 'index',
        ),
    ),
), 
```

这会将您带到 MyAccountController、indexAction，param1='updated' 和 param2='1'。但在您的示例情况下，操作应使用参数名称“更新”和参数值“1”进行更新

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-19T12:57:24.243

This works for me.

The route:

```
'user_view' => array(
    'type'    => 'Segment',
    'options' => array(
        'route' => '/user/view[/:user_id]',
        'defaults' => array(
            'controller' => 'user',
            'action'     => 'viewUser',
        ),
    ),
), // End of user_view route 
```

And the Redirect from the controller:

```
return $this->redirect()->toRoute('user_view', array('user_id'=>$user_id)); 
```

Notice that the Array key in the redirect statement correspond to the route segment: [/:user_id] = 'user_id'=>$user_id

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-11-16T09:45:14.333

另一种方法是将其作为第三个参数传递（在 ZF3 上测试），而不是更新路由：

```
$this->redirect()->toRoute('dashboard', [], ['query' => ['welcome' => 1]]); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T16:44:51.220

此语句将您重定向到 localhost/leads/edit/112345：

```
return $this->redirect()->toRoute('leads', array(
                'action' => 'edit',
                'id' => 112345
            )); 
```

id 是我期望在editAction 中的参数。

希望能帮助到你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-31T04:34:27.790

我从上述解决方案中尝试了一些，但没有一个对我有用。我带来了以下内容。

```
//Return to specific product pricing 
return $this->redirect()->toRoute('showpricing', array('id' => $form_values['id']));

  /* show pricing */
          'showpricing' => array(
              'type' => 'Zend\Mvc\Router\Http\Segment',
              'options' => array(
                  'route'   => '/product/showpricing[?id=:id]',
                  'defaults' => array(
                      'controller' => 'Product\Controller\Product',
                      'action'     => 'showpricing',
                  )
              )
          ), 
```

希望这会对某人有所帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-18T15:43:30.787

试试这条路线而不是你以前的路线

```
return $this->redirect()->toRoute('default', [
    'controller' => 'admin',
    'action' =>  'index'
    'updated' => '1'
]); 
```

# c# - 响应在 asax 文件中的此上下文中不可用

> ID：10652006
> 
> 赞同：5
> 
> 时间：2012-05-18T11:43:10.470
> 
> 标签：c#

我有一个仅适用于 Firefox 的登录页面。它不适用于任何其他浏览器。

当我检查事件日志时，我看到“当前上下文中没有响应”。它告诉我错误在 global.asax 文件中，在 response.redirect 行：

```
void Session_End(object sender, EventArgs e) 
{
     Response.Redirect("~/Login.aspx?li=1");
    // Code that runs when a session ends. 
    // Note: The Session_End event is raised only when the sessionstate mode
    // is set to InProc in the Web.config file. If session mode is set to StateServer 
    // or SQLServer, the event is not raised.

} 
```

可能是什么问题呢？

我已按照建议尝试了 httpcontext.Current 但随后出现空引用异常，对象引用未设置为对象的实例

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:45:10.697

尝试使用`HttpContext.Current.Response`它肯定会起作用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-18T11:45:38.900

您是否尝试过使用 HttpContext.Current.Response？

编码快乐！！

# mysql - 我无法让这个 mysql 连接查询产生所需的结果

> ID：10652009
> 
> 赞同：3
> 
> 时间：2012-05-18T11:43:20.767
> 
> 标签：mysql

**三张表的结构。**

预订

```
CREATE TABLE `booking` (
`bookingID` int(11) NOT NULL AUTO_INCREMENT,
`receipt_no` int(11) NOT NULL,
`client` varchar(32) NOT NULL,
`operator` varchar(32) NOT NULL,
`discount` int(11) NOT NULL,
`total_amount` int(64) NOT NULL,
`amount_paid` int(32) NOT NULL,
`balance` int(32) NOT NULL,
`date` date NOT NULL,
PRIMARY KEY (`bookingID`)
ENGINE=InnoDB AUTO_INCREMENT=209 DEFAULT CHARSET=latin1 
```

职称

```
CREATE TABLE `jobtitle` (
`jobtitleID` int(11) NOT NULL AUTO_INCREMENT,
`jobtitle` varchar(255) NOT NULL,
`quantity` int(11) NOT NULL,
`amount` varchar(255) NOT NULL,
`jobtypeID` int(11) NOT NULL,
`bookingID` int(11) NOT NULL,
PRIMARY KEY (`jobtitleID`)
ENGINE=InnoDB AUTO_INCREMENT=463 DEFAULT CHARSET=latin1 
```

First_graphics_debtors

```
CREATE TABLE `first_graphics_debtors`
`id` int(11) NOT NULL AUTO_INCREMENT,
`receipt_no` int(11) NOT NULL,
`date_paid` date NOT NULL,
`old_balance` int(32) NOT NULL,
`debtor_amount_paid` int(32) NOT NULL,
`new_balance` int(32) NOT NULL,
PRIMARY KEY (`id`)
ENGINE=InnoDB AUTO_INCREMENT=16 DEFAULT CHARSET=latin1 
```

**插入少量数据后**

预订

```
+-----------+------------+----------+----------+----------+--------------+-------------+---------+------------+
| bookingID | receipt_no | client   | operator | discount | total_amount | amount_paid | balance | date       |
+-----------+------------+----------+----------+----------+--------------+-------------+---------+------------+
|       205 |  156872940 | Osaro    | Obi      |       10 |       156380 |      135000 |    5742 | 2012-05-15 |
|       206 |  227349168 | Amaka    | Stephen  |        4 |        73250 |       70320 |       0 | 2012-05-15 |
|       207 |  155732278 | Aghahowa | Ibori    |        0 |       116836 |       15000 |  101836 | 2012-05-15 |
|       208 |  753263343 | Chaka    | Stephen  |       10 |       231290 |       56000 |  152161 | 2012-05-15 |
+-----------+------------+----------+----------+----------+--------------+-------------+---------+------------+ 
```

职称

```
+------------+---------------------------+----------+--------+-----------+-----------+
| jobtitleID | jobtitle                  | quantity | amount | jobtypeID | bookingID |
+------------+---------------------------+----------+--------+-----------+-----------+
|        454 | A1 Full Colour            |       10 | 4334   |         1 |       205 |
|        455 | Complementry Card         |       20 | 5652   |         2 |       205 |
|        456 | A4 Printout (graphics)B/W |       25 | 2930   |         4 |       206 |
|        457 | Scan                      |        2 | 4334   |         5 |       207 |
|        458 | A4 Full Colour            |      199 | 500    |         3 |       207 |
|        459 | ID Card                   |        2 | 4334   |         2 |       207 |
|        460 | A3 Full Colour            |       10 | 4334   |         3 |       208 |
|        461 | Flex Banner               |       20 | 2930   |         2 |       208 |
|        462 | A2 Single Colour          |      199 | 650    |         1 |       208 |
+------------+---------------------------+----------+--------+-----------+-----------+ 
```

First_graphics_debtors

```
+----+------------+------------+-------------+--------------------+-------------+
| id | receipt_no | date_paid  | old_balance | debtor_amount_paid | new_balance |
+----+------------+------------+-------------+--------------------+-------------+
|  7 |  156872940 | 2012-05-15 |        5742 |               5000 |         742 |
|  8 |  156872940 | 2012-05-15 |        5742 |               5742 |           0 |
|  9 |  753263343 | 2012-05-15 |      152161 |             152161 |           0 |
| 13 |  753263343 | 2012-05-15 |      152161 |              14524 |      137637 |
| 14 |  753263343 | 2012-05-15 |      152161 |               2000 |      150161 |
| 15 |  753263343 | 2012-05-15 |      152161 |               1000 |      151161 |
+----+------------+------------+-------------+--------------------+-------------+ 
```

**当我运行此查询时：**

```
SELECT `booking`.`receipt_no`, `client`, `operator`, `discount`, `total_amount`,
       `amount_paid`, `balance`, `date`, `jobtitle`, `quantity`, `amount`,
       `date_paid`, `old_balance`, `debtor_amount_paid`, `new_balance`
  FROM (`booking`)
  JOIN `jobtitle` ON `jobtitle`.`bookingID` = `booking`.`bookingID`
  JOIN `first_graphics_debtors`
    ON `first_graphics_debtors`.`receipt_no` = `booking`.`receipt_no`
 WHERE `booking`.`receipt_no` =  '753263343'
   AND `first_graphics_debtors`.`receipt_no` =  '753263343'
 GROUP BY `jobtitle`.`quantity` 
```

**我得到这个输出：**

```
+------------+--------+----------+----------+--------------+-------------+---------+------------+------------------+----------+--------+------------+-------------+--------------------+-------------+
| receipt_no | client | operator | discount | total_amount | amount_paid | balance | date       | jobtitle         | quantity | amount | date_paid  | old_balance | debtor_amount_paid | new_balance |
+------------+--------+----------+----------+--------------+-------------+---------+------------+------------------+----------+--------+------------+-------------+--------------------+-------------+
|  753263343 | Chaka  | Stephen  |       10 |       231290 |       56000 |  152161 | 2012-05-15 | A3 Full Colour   |       10 | 4334   | 2012-05-15 |      152161 |             152161 |           0 |
|  753263343 | Chaka  | Stephen  |       10 |       231290 |       56000 |  152161 | 2012-05-15 | Flex Banner      |       20 | 2930   | 2012-05-15 |      152161 |             152161 |           0 |
|  753263343 | Chaka  | Stephen  |       10 |       231290 |       56000 |  152161 | 2012-05-15 | A2 Single Colour |      199 | 650    | 2012-05-15 |      152161 |             152161 |           0 |
+------------+--------+----------+----------+--------------+-------------+---------+------------+------------------+----------+--------+------------+-------------+--------------------+-------------+ 
```

下面列的数据重复了三遍，而不是从与receipt_no相关的四行中获取数据

```
date_paid, old_balance, debtor_amount_paid, new_balance 
```

**预期结果**

```
+------------+--------+----------+----------+--------------+-------------+---------+------------+------------------+----------+--------+------------+-------------+--------------------+-------------+
| receipt_no | client | operator | discount | total_amount | amount_paid | balance | date       | jobtitle         | quantity | amount | date_paid  | old_balance | debtor_amount_paid | new_balance |
+------------+--------+----------+----------+--------------+-------------+---------+------------+------------------+----------+--------+------------+-------------+--------------------+-------------+
|  753263343 | Chaka  | Stephen  |       10 |       231290 |       56000 |  152161 | 2012-05-15 | A3 Full Colour   |       10 | 4334   | 2012-05-15 |      152161 |             152161 |           0 |
|  753263343 | Chaka  | Stephen  |       10 |       231290 |       56000 |  152161 | 2012-05-15 | Flex Banner      |       20 | 2930   | 2012-05-15 |      152161 |             14524  |     137637  |
|  753263343 | Chaka  | Stephen  |       10 |       231290 |       56000 |  152161 | 2012-05-15 | A2 Single Colour |      199 | 650    | 2012-05-15 |      152161 |             2000   |      150161 |
+------------+--------+----------+----------+--------------+-------------+---------+------------+------------------+----------+--------+------------+-------------+--------------------+-------------+ 
```

虽然，预期的输出不完整，但也许你可以从数据中得到`debtor_amount_paid`图片`new_balance`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T02:45:33.510

您可能想使用 FULL JOIN 来对齐那些连接的行，但由于 MySQL 上没有 FULL JOIN，您必须与 UNION 抗衡：

压缩代码以避免滚动条：

```
select bx.*, null as sepy, booking_particulars.*
from booking bx 
join (
  select same_n, 
     max(Receipt_No) as Receipt_No, max(Quantity) as Quantity,  
     max(Amount) as Amount, 
     null as sepx, -- separator      
     max(Date_Paid) as Date_Paid, max(Old_Balance) as Old_Balance, 
     max(Debtor_Amount_Paid) as Debtor_Amount_Paid, 
     max(New_Balance) as New_Balance
  from (
    select *                
    from (
      select b.Receipt_No, j.Quantity, j.Amount,           
        null as Date_Paid, null as Old_Balance, null as Debtor_Amount_Paid, 
        null as New_Balance, @j_rn := @j_rn + 1 as same_n            
      from (booking b, (select @j_rn := 0) as vars) 
      join jobtitle j ON j.bookingID = b.bookingID
      where b.receipt_no =  '753263343' 
      order by j.JobTitleId
    ) as jx
    union all
    select * from (
      select f.Receipt_No, null as Quantity, null as Amount,             
        f.Date_Paid, f.Old_Balance, f.Debtor_Amount_Paid, 
        f.New_Balance, @f_rn := @f_rn + 1 as same_n          
      from (first_graphics_debtors f, (select @f_rn := 0) as vars)
      where f.receipt_no = '753263343' 
      order by f.id
    ) as fx
  ) as z
  group by same_n order by same_n
) as booking_particulars on booking_particulars.receipt_no = bx.receipt_no 
```

输出：

```
| BOOKINGID | RECEIPT_NO | CLIENT | OPERATOR | DISCOUNT | TOTAL_AMOUNT | AMOUNT_PAID | BALANCE |                       DATE |   SEPY | SAME_N | QUANTITY | AMOUNT |   SEPX |                  DATE_PAID | OLD_BALANCE | DEBTOR_AMOUNT_PAID | NEW_BALANCE |
|-----------|------------|--------|----------|----------|--------------|-------------|---------|----------------------------|--------|--------|----------|--------|--------|----------------------------|-------------|--------------------|-------------|
|       208 |  753263343 |  Chaka |  Stephen |       10 |       231290 |       56000 |  152161 | May, 15 2012 08:00:00-0700 | (null) |      1 |       10 |   4334 | (null) | May, 15 2012 08:00:00-0700 |      152161 |             152161 |           0 |
|       208 |  753263343 |  Chaka |  Stephen |       10 |       231290 |       56000 |  152161 | May, 15 2012 08:00:00-0700 | (null) |      2 |       20 |   2930 | (null) | May, 15 2012 08:00:00-0700 |      152161 |              14524 |      137637 |
|       208 |  753263343 |  Chaka |  Stephen |       10 |       231290 |       56000 |  152161 | May, 15 2012 08:00:00-0700 | (null) |      3 |      199 |    650 | (null) | May, 15 2012 08:00:00-0700 |      152161 |               2000 |      150161 |
|       208 |  753263343 |  Chaka |  Stephen |       10 |       231290 |       56000 |  152161 | May, 15 2012 08:00:00-0700 | (null) |      4 |   (null) | (null) | (null) | May, 15 2012 08:00:00-0700 |      152161 |               1000 |      151161 | 
```

现场测试和查询进展：[http ://www.sqlfiddle.com/#!2/d8d3b/45](http://www.sqlfiddle.com/#!2/d8d3b/45)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T13:07:09.643

我相当肯定你的问题是因为你的`GROUP BY`条款。不确定您使用它的目的是什么，但请尝试不使用它。如果您得到重复的行，请尝试使用`SELECT DISTINCT`. 如果您的目标是根据该列对结果进行排序，请使用`ORDER BY`.

此外，`receipt_no`在子句中指定两次`WHERE`是多余的。这两个表已经由该列连接，因此您只需将其过滤到一个表中即可。除了一些特殊的例外情况，例如列名中的空格或逗号，或者与保留字命名相同的列（可能还有其他一些），反引号实际上并不是必需的。您唯一看起来需要反引号的列是该`date`列，但即使在该列中排除它们，您仍然应该没问题。我只是发现到处都是反引号使查询变得更长且更难阅读。他们在那里不会伤害任何东西，所以如果这是你的偏好，你可以离开他们，但就个人而言，我不是粉丝。

我用上面提到的修改重写了您的查询，另外我给了表别名以进一步缩短它。这不会提高性能或任何东西，只是让 IMO 更容易阅读：

```
SELECT DISTINCT
    b.receipt_no, client, operator, discount, total_amount,
    amount_paid, balance, `date`, jobtitle, quantity,
    amount, date_paid, old_balance, debtor_amount_paid, new_balance
FROM
    booking b
    INNER JOIN jobtitle jt ON jt.bookingID = b.bookingID
    INNER JOIN first_graphics_debtors fgd ON fgd.receipt_no = b.receipt_no
WHERE
    b.receipt_no = '753263343'
ORDER BY
    jt.quantity 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T19:22:36.293

我完全同意[Travesty3](https://stackoverflow.com/users/259457/travesty3)关于表别名和反引号的说法。

我认为，您的问题是，您正试图将“应该”是两个单独的查询合并为一个。对于任何给定的预订，您可以拥有任意数量的职位名称条目，并且完全独立于职位名称信息，您可以拥有任意数量的 First Graphics Debtors 条目。在示例 Receipt 753263343 的示例数据中，您有一个 Booking、三个 Job Title 条目和 4 个 First Graphic Debtors 条目。

默认情况下（没有 GROUP BY 子句），您将获得 12 个条目，对应于三组行 (1 x 3 x 4) 的叉积。

MySQL 中的 GROUP BY 与大多数其他 DBMS 不同；标准 SQL 不允许您从 GROUP BY 子句中省略非聚合列（并且所有列都是非聚合列）。

我认为您所追求的是类似于（使用 FGD 作为 First Graphics Debtors 的缩写）的输出结果集：

```
+-------------------+---------------------+---------------+
| Data from Booking | Data from Job Title | Data from FGD |
+-------------------+---------------------+---------------+
| Booking ID 208... | Job Title ID 460... | FGD ID 9      |
| Booking ID 208... | Job Title ID 461... | FGD ID 13     |
| Booking ID 208... | Job Title ID 462... | FGD ID 14     |
| Booking ID 208... | ...?????????????... | FGD ID 15     |
+-------------------+---------------------+---------------+ 
```

问号最合理的一组值可能是一组 NULL。

不过，使用两个单独的查询可能会更好，一个用于获取职位信息，一个用于获取 FGD 信息（两者中只有一个需要返回预订信息）。然而，你必须在你的应用程序代码中做一些演示工作（这是应该完成演示工作的地方，但这是一个不同的讨论）。

因此，对于胆小的人，我建议使用两个查询。对于勇敢的人，请继续阅读...

* * *

## 勇敢者

*更新：*直到 TDQD 的材料**——包括测试**是轻微错误的。

首先，让我声明：如果这就是你所追求的，那么虽然可以做到，但它是相对艰苦的工作。其次，使用 DBMS 中的 OLAP 函数，它是一个更简单的堆。使用 MySQL（和其他一些 DBMS），您可以使用临时表来保存中间结果。

您在 Booking ID 上加入 Booking 和 Job Title。您在 Receipt No 上加入 Booking 和 FGD。假设我们创建两个中间结果集：

```
SequencedJobTitles(Booking ID, Job_Seq_No)
SequencedReceipts(Receipt No, Rec_Seq_No) 
```

其中，第一个中的作业序列号从每个预订 ID 的 1..N 开始，收据序列号从每个收据号的 1..M 开始。

现在我们可以写：

```
SELECT B.*, J.*, R.*
  FROM Booking AS B
  LEFT JOIN (SELECT J1.*, J2.Job_Seq_No
               FROM SequencedJobTitles AS J2
               JOIN JobTitle           AS J1 ON J2.BookingID = J1.BookingID
            ) AS J
    ON B.BookingID = J.BookingID
  LEFT JOIN (SELECT R1.*, R2.Rec_Seq_No
               FROM SequencedReceipts      AS R2
               JOIN First_Graphics_Debtors AS R1 ON R1.Receipt_No = R2.Receipt_No
            ) AS R
 WHERE J.Job_Seq_No = R.Rec_Seq_No
   AND B.Receipt_No = 753263343
 ORDER BY B.BookingID, COALESCE(J2.Job_Seq_No, R2.Rec_Seq_No); 
```

是的，使用`*`是懒惰的；我会改进它以列出我在生产查询中想要的列的确切列表。对于调试，它可以确保您看到所有数据，这可能会有所帮助。

如何创建两个中间结果集？

在没有 OLAP 功能的情况下，您可以使用以下命令生成 SequencedJobTitles：

```
SELECT J1.BookingID, COUNT(*) AS Job_Seq_No
  FROM JobTitle AS J1
  JOIN JobTitle AS J2
    ON J1.BookingID = J2.BookingID
 WHERE J1.JobTitleID <= J2.JobTitleID
 GROUP BY J1.BookingID; 
```

与 SequencedReceipts 类似：

```
SELECT R1.Receipt_No, COUNT(*) AS Rec_Seq_No
  FROM First_Graphics_Debtors AS R1
  JOIN First_Graphics_Debtors AS R2
    ON R1.Receipt_No = R2.Receipt_No
 WHERE R1.ID <= R2.ID
 GROUP BY R1.Receipt_No; 
```

这些表达式使用带有非等值连接的自连接，这是相当昂贵的。如果表格很大，您可能希望将相关的预订 ID 或收据编号限制在子查询中。请注意，您可以单独测试这些子查询；这对于 TDQD（测试驱动查询设计）来说是个好主意。

但是，我们可以简单地将这些子查询插入到之前开发的主查询中：

```
SELECT B.*, J.*, R.*
  FROM Booking AS B
  LEFT JOIN (SELECT J1.*, J2.Job_Seq_No
               FROM (SELECT J1.BookingID, COUNT(*) AS Job_Seq_No
                      FROM JobTitle AS J1
                      JOIN JobTitle AS J2
                        ON J1.BookingID = J2.BookingID
                     WHERE J1.JobTitleID <= J2.JobTitleID
                     GROUP BY J1.BookingID
                    ) AS J2
               JOIN JobTitle AS J1 ON J2.BookingID = J1.BookingID
            ) AS J
    ON B.BookingID = J.BookingID
  LEFT JOIN (SELECT R1.*, R2.Rec_Seq_No
               FROM (SELECT R1.Receipt_No, COUNT(*) AS Rec_Seq_No
                      FROM First_Graphics_Debtors AS R1
                      JOIN First_Graphics_Debtors AS R2
                        ON R1.Receipt_No = R2.Receipt_No
                     WHERE R1.ID <= R2.ID
                     GROUP BY R1.Receipt_No
                    ) AS R2
               JOIN First_Graphics_Debtors AS R1 ON R1.Receipt_No = R2.Receipt_No
            ) AS R
    ON J.Job_Seq_No = R.Rec_Seq_No
 WHERE B.Receipt_No = 753263343
 ORDER BY B.BookingID, COALESCE(J2.Job_Seq_No, R2.Rec_Seq_No); 
```

**注意：未经测试的 SQL！**

*更新：* 这个警告并不是随便放在那里的。无论我多么努力，我都不相信自己第一次就能准确地编写复杂的查询。而且我没有尝试生成我之前展示的大纲结果（我一直使用两个单独的查询并在演示工具方法中组合数据），所以我认为错误是不可避免的。

## TDQD——包括测试

Real TDQD 显示序列查询很接近，但不正确。虽然我把`<=`条件变成了`>=`条件，但这更像是表面上的而不是实质上的。正确的查询如下：

```
SELECT J1.BookingID, J1.JobTitleID, COUNT(*) AS Job_Seq_No
  FROM JobTitle AS J1
  JOIN JobTitle AS J2
    ON J1.BookingID = J2.BookingID
 WHERE J1.JobTitleID >= J2.JobTitleID
 GROUP BY J1.BookingID, J1.JobTitleID;

SELECT R1.Receipt_No, R1.ID, COUNT(*) AS Rec_Seq_No
  FROM First_Graphics_Debtors AS R1
  JOIN First_Graphics_Debtors AS R2
    ON R1.Receipt_No = R2.Receipt_No
 WHERE R1.ID >= R2.ID
 GROUP BY R1.Receipt_No, R1.ID; 
```

这两个结果可以分别和对应的表join回来，但是join条件和我原来写的不一样：

```
SELECT J4.*, J3.Job_Seq_No
  FROM (SELECT J1.BookingID, J1.JobTitleID, COUNT(*) AS Job_Seq_No
          FROM JobTitle AS J1
          JOIN JobTitle AS J2
            ON J1.BookingID = J2.BookingID
         WHERE J1.JobTitleID >= J2.JobTitleID
         GROUP BY J1.BookingID, J1.JobTitleID
        ) AS J3
  JOIN JobTitle AS J4
    ON J3.BookingID  = J4.BookingID
   AND J3.JobTitleID = J4.JobTitleID
 ORDER BY J4.BookingID, J3.Job_Seq_No;

SELECT R4.*, R3.Rec_Seq_No
  FROM (SELECT R1.Receipt_No, R1.ID, COUNT(*) AS Rec_Seq_No
          FROM First_Graphics_Debtors AS R1
          JOIN First_Graphics_Debtors AS R2
            ON R1.Receipt_No = R2.Receipt_No
         WHERE R1.ID >= R2.ID
         GROUP BY R1.Receipt_No, R1.ID
        ) AS R3
   JOIN First_Graphics_Debtors AS R4
     ON R3.Receipt_No = R4.Receipt_No
    AND R3.ID         = R4.ID
  ORDER BY R4.Receipt_No, R3.Rec_Seq_No; 
```

然后你可以运行这个查询：

```
SELECT B.*, J.*, R.*
  FROM Booking AS B
  LEFT JOIN (SELECT J4.*, J3.Job_Seq_No
               FROM (SELECT J1.BookingID, J1.JobTitleID, COUNT(*) AS Job_Seq_No
                       FROM JobTitle AS J1
                       JOIN JobTitle AS J2
                         ON J1.BookingID = J2.BookingID
                      WHERE J1.JobTitleID >= J2.JobTitleID
                      GROUP BY J1.BookingID, J1.JobTitleID
                     ) AS J3
               JOIN JobTitle AS J4
                 ON J3.BookingID  = J4.BookingID
                AND J3.JobTitleID = J4.JobTitleID
            ) AS J
    ON B.BookingID = J.BookingID
  LEFT JOIN (SELECT R4.*, R3.Rec_Seq_No
               FROM (SELECT R1.Receipt_No, R1.ID, COUNT(*) AS Rec_Seq_No
                       FROM First_Graphics_Debtors AS R1
                       JOIN First_Graphics_Debtors AS R2
                         ON R1.Receipt_No = R2.Receipt_No
                      WHERE R1.ID >= R2.ID
                      GROUP BY R1.Receipt_No, R1.ID
                     ) AS R3
                JOIN First_Graphics_Debtors AS R4
                  ON R3.Receipt_No = R4.Receipt_No
                 AND R3.ID         = R4.ID
            ) AS R
    ON B.Receipt_No = R.Receipt_No
 WHERE B.Receipt_No = 753263343
   AND J.Job_Seq_No = R.Rec_Seq_No
 ORDER BY B.BookingID, NVL(J.Job_Seq_No, R.Rec_Seq_No); 
```

不幸的是，它只在样本数据上产生了三行；它省略了 4 个收据编号中的最后一个。这就是我做TDQD的原因；当我走捷径时，我发现有问题。

最后一个查询的结构需要使 J 和 R 子查询使用 FULL OUTER JOIN（通常）连接，因此它们需要共同的收据编号或预订 ID。我选择将 Receipt Number 添加到 JobTitle 信息中；添加到第一图形债务人信息中的预订 ID 可以正常工作；对称性建议两者都做，但这也可能被认为是矫枉过正。

```
SELECT B.Receipt_No, J4.*, J3.Job_Seq_No
  FROM (SELECT J1.BookingID, J1.JobTitleID, COUNT(*) AS Job_Seq_No
          FROM JobTitle AS J1
          JOIN JobTitle AS J2
            ON J1.BookingID = J2.BookingID
         WHERE J1.JobTitleID >= J2.JobTitleID
         GROUP BY J1.BookingID, J1.JobTitleID
        ) AS J3
  JOIN JobTitle AS J4
    ON J3.BookingID  = J4.BookingID
   AND J3.JobTitleID = J4.JobTitleID
  JOIN Booking  AS B
    ON B.BookingID = J4.BookingID
 ORDER BY J4.BookingID, J3.Job_Seq_No; 
```

然后，将两个有序列表与 FULL OUTER JOIN 结合起来：

```
SELECT *
  FROM (SELECT B.Receipt_No, J4.*, J3.Job_Seq_No
          FROM (SELECT J1.BookingID, J1.JobTitleID, COUNT(*) AS Job_Seq_No
                  FROM JobTitle AS J1
                  JOIN JobTitle AS J2
                    ON J1.BookingID = J2.BookingID
                 WHERE J1.JobTitleID >= J2.JobTitleID
                 GROUP BY J1.BookingID, J1.JobTitleID
                ) AS J3
          JOIN JobTitle AS J4
            ON J3.BookingID  = J4.BookingID
           AND J3.JobTitleID = J4.JobTitleID
          JOIN Booking  AS B
            ON B.BookingID = J4.BookingID
       ) AS J
  FULL OUTER JOIN
       (SELECT R4.*, R3.Rec_Seq_No
          FROM (SELECT R1.Receipt_No, R1.ID, COUNT(*) AS Rec_Seq_No
                  FROM First_Graphics_Debtors AS R1
                  JOIN First_Graphics_Debtors AS R2
                    ON R1.Receipt_No = R2.Receipt_No
                 WHERE R1.ID >= R2.ID
                 GROUP BY R1.Receipt_No, R1.ID
                ) AS R3
           JOIN First_Graphics_Debtors AS R4
             ON R3.Receipt_No = R4.Receipt_No
            AND R3.ID         = R4.ID
       ) AS R
    ON J.Receipt_No = R.Receipt_No AND J.Job_Seq_No = R.Rec_Seq_No
ORDER BY NVL(J.Receipt_No, R.Receipt_No), NVL(J.Job_Seq_No, R.Rec_Seq_No); 
```

## 最终样本查询

最后将其嵌入到主查询中会给出（一个非常详细的版本）所需的结果：

```
SELECT B.*, JR.*
  FROM Booking AS B
  JOIN (SELECT NVL(J.Receipt_No, R.Receipt_No) AS Rec_No,
               NVL(J.Job_Seq_No, R.Rec_Seq_No) AS Seq_No,
               J.*, R.*
          FROM (SELECT B.Receipt_No, J4.*, J3.Job_Seq_No
                  FROM (SELECT J1.BookingID, J1.JobTitleID, COUNT(*) AS Job_Seq_No
                          FROM JobTitle AS J1
                          JOIN JobTitle AS J2
                            ON J1.BookingID = J2.BookingID
                         WHERE J1.JobTitleID >= J2.JobTitleID
                         GROUP BY J1.BookingID, J1.JobTitleID
                        ) AS J3
                  JOIN JobTitle AS J4
                    ON J3.BookingID  = J4.BookingID
                   AND J3.JobTitleID = J4.JobTitleID
                  JOIN Booking  AS B
                    ON B.BookingID = J4.BookingID
               ) AS J
          FULL OUTER JOIN
               (SELECT R4.*, R3.Rec_Seq_No
                  FROM (SELECT R1.Receipt_No, R1.ID, COUNT(*) AS Rec_Seq_No
                          FROM First_Graphics_Debtors AS R1
                          JOIN First_Graphics_Debtors AS R2
                            ON R1.Receipt_No = R2.Receipt_No
                         WHERE R1.ID >= R2.ID
                         GROUP BY R1.Receipt_No, R1.ID
                        ) AS R3
                   JOIN First_Graphics_Debtors AS R4
                     ON R3.Receipt_No = R4.Receipt_No
                    AND R3.ID         = R4.ID
               ) AS R
            ON J.Receipt_No = R.Receipt_No AND J.Job_Seq_No = R.Rec_Seq_No
       ) AS JR
    ON B.Receipt_No = JR.Rec_No
 WHERE B.Receipt_No = 753263343
 ORDER BY B.BookingID, Seq_No; 
```

使用这样一个更具选择性的列列表：

```
SELECT B.BookingID    AS Booking,
       B.Receipt_No   AS Receipt,
       B.Client       AS Client,
       JR.JobTitleID  AS Title
       JR.JobTitle    AS JobTitle,
       JR.Old_Balance AS Old_Balance,
       JR.New_Balance AS New_Balance
  FROM Booking AS B
... 
```

## 最终样本输出

我从样本数据中得到的结果数据是：

```
booking   receipt    client  title  jobtitle            old_balance new_balance
208       753263343  Chaka   460    A3 Full Colour      152161      0
208       753263343  Chaka   461    Flex Banner         152161      137637
208       753263343  Chaka   462    A2 Single Colour    152161      150161
208       753263343  Chaka                              152161      151161 
```

唯一的遗留问题是 MySQL 是否支持 FULL OUTER JOIN 表示法。如果没有，您可以在此示例数据上使用 RIGHT OUTER JOIN（其中职位信息中的行数少于 FGD 信息中的行数）。

* * *

### 使用 OLAP 函数

*更新：*这是基于现在已知的错误查询。必须在此处进行类似的更改以使其按要求工作。

使用 OLAP 函数，我认为您可以创建这样的排序结果集：

```
SELECT BookingID,
       ROW_NUMBER() OVER (PARTITION BY BookingID ORDER BY JobTitleID) AS Job_Seq_No
  FROM JobTitle;

SELECT Receipt_No,
       ROW_NUMBER() OVER (PARTITION BY Receipt_No ORDER BY ID) AS Rec_Seq_No
  FROM First_Graphics_Debtors; 
```

但是，我对这部分 SQL 的信心要小得多。但是，生成的大查询更简单：

```
SELECT B.*, J.*, R.*
  FROM Booking AS B
  LEFT JOIN (SELECT J1.*, J2.Job_Seq_No
               FROM (SELECT BookingID,
                            ROW_NUMBER()
                            OVER (PARTITION BY BookingID ORDER BY JobTitleID)
                            AS Job_Seq_No
                       FROM JobTitle
                    ) AS J2
               JOIN JobTitle AS J1 ON J2.BookingID = J1.BookingID
            ) AS J
    ON B.BookingID = J.BookingID
  LEFT JOIN (SELECT R1.*, R2.Rec_Seq_No
               FROM (SELECT Receipt_No,
                            ROW_NUMBER() OVER (PARTITION BY Receipt_No ORDER BY ID)
                            AS Rec_Seq_No
                       FROM First_Graphics_Debtors
                    ) AS R2
               JOIN First_Graphics_Debtors AS R1 ON R1.Receipt_No = R2.Receipt_No
            ) AS R
 WHERE J.Job_Seq_No = R.Rec_Seq_No
   AND B.Receipt_No = 753263343
 ORDER BY B.BookingID, COALESCE(J2.Job_Seq_No, R2.Rec_Seq_No); 
```

注意：更多未经测试的 SQL！

# php - 在 php 中向数组中添加额外的键值对会在 Android 端解析时提示 JSONException

> ID：10652011
> 
> 赞同：0
> 
> 时间：2012-05-18T11:43:27.733
> 
> 标签：php, android

通常，我向 PHP 服务器发布请求以查询 mysql 表的数据集，然后它将发送回 Andorid 以解析响应字符串（JSONArray 字符串）而没有问题。使用的 PHP 代码部分如下：

```
....
if($result = mysql_query($sql, $link))
{
    if (mysql_num_rows($result) != 0) 
    {   
      while($row2 = mysql_fetch_array($result,MYSQL_ASSOC))
      {
          $data[]=$row;
      }
    }
}

print_r(urlencode(json_encode($data))); 
if (is_resource($result)) 
mysql_free_result($result);
mysql_close($link); 
```

但是，如果我在使用下面的 php 代码中的方法完成 sql 查询后，再向 $data 数组添加一个键值字符串：

```
$data['new_key'] = "new_value"; 
```

android端解析新的JSONArray String时会有JSONArry Exception提示：.....（值部分为双字节汉字）

```
Value {"new_key":"new_value","0":{"old_key1":"old_value1" ,"old_key2":"old_value2","old_key3":"old_value3",.....}} of type org.json.JSONObject cannot be converted to JSONArray 
```

如果您不介意，请帮助并指出我错在哪里以及如何解决，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T12:40:47.750

试试这个：

```
$data[]['new_key'] = "new_value"; 
```

另外我认为您需要删除 print_r 并用 echo 替换它：

```
echo urlencode(json_encode($data)); 
```

（你也可以顺便去掉urlencode。）

# jquery - 样式表未启用

> ID：10652021
> 
> 赞同：0
> 
> 时间：2012-05-18T11:44:28.827
> 
> 标签：jquery, html, css

对于我的最新项目，我有 3 个样式表，一个全局样式表，一个用于屏幕尺寸小于 960 的样式表，一个用于移动设备。一切都几乎正常运行，但是在移动设备上尝试该网站时我遇到了问题。应该发生的是，当您在移动设备上访问该网站时，一点点 jQuery 会检查您是否在移动/平板电脑上，如果是，则启用移动样式表并禁用全局样式表，但是当我在我的 android 设备上查看时移动样式表未启用，我不知道为什么。

这是我在样式表的 html 中的示例：

```
<link rel="stylesheet" href="css/global.css" media="all" id="global">
<link rel="stylesheet" href="css/mob_global.css" media="all" id="mob_global">
<link rel="stylesheet" href="css/layout.css" media="all and (min-width: 33.236em)"> 
```

这是随附的 jQuery：

```
$('#mob_global').attr('disabled', 'disabled');
var isMobile=false;(function(a,b){if(/android.+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))isMobile=true})(navigator.userAgent||navigator.vendor||window.opera,'http://detectmobilebrowser.com/mobile');

// If we are on a mobile browser then disable standard style and re-enable mobile style
if (isMobile==true) {
    $('#global').attr('disabled', 'disabled').next().removeAttr('disabled');
} 
```

您可以按原样访问该网站以进行自己的测试：http: [//beta.residencyradio.com](http://beta.residencyradio.com)

在任何人指出之前，我知道浏览器嗅探并不是最好的做法，但是我的主站点使用视差滚动，并且它在移动设备上的功能非常糟糕，因此嗅探是更好的选择。

如果有人知道为什么会这样做，那将是一个很大的帮助！

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T11:47:14.760

```
<link rel="stylesheet" href="../css/global.css" media="all" id="global">
<link rel="stylesheet" href="..css/mob_global.css" media="all" id="mob_global">
<link rel="stylesheet" href="../css/layout.css" media="all and (min-width: 33.236em)"> 
```

像这样使用............检查href之后............

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T11:57:07.563

为什么不使用@media 屏幕？

例子 `@media screen and (max-width: 1024px){ ... ... }`

您的网站：调整浏览器的大小工作 ios-phone 不工作。

# ruby-on-rails - ruby 真的是一门完全面向对象的语言吗？

> ID：10652023
> 
> 赞同：5
> 
> 时间：2012-05-18T11:44:32.430
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

Ruby 是**完全面向对象的语言**。在 ruby​​ 中，一切都是对象，因此属于某个类。例如`5`属于`Object class`

```
1.9.3p194 :001 > 5.class
 => Fixnum 
1.9.3p194 :002 > 5.class.superclass
 => Integer 
1.9.3p194 :003 > 5.class.superclass.superclass
 => Numeric 
1.9.3p194 :005 > 5.class.superclass.superclass.superclass
 => Object 
1.9.3p194 :006 > 5.class.superclass.superclass.superclass.superclass
 => BasicObject 
1.9.3p194 :007 > 5.class.superclass.superclass.superclass.superclass.superclass
 => nil 
```

因此，我们必须通过在类/对象名称前面加上前缀来调用所有方法，如`Object_name#method_name`. 例子：

```
5.times{|i| puts i} 
```

现在，rails 有这些所谓的助手，比如`stylesheet_link_tag`,等`javascript_include_tag`，`form_for`它们确实遵循这种`Object_name#method_name`语法，所以我猜它们只是普通函数。

所以我的问题是

1.  这些导轨助手是什么？
2.  如果它们只是功能并且不从任何类继承。这不与声称的说法相矛盾 - 在红宝石中，`everything a object & there are no primitives`. 例如，人们引用`5.+(6)`说即使运算符也只是简单的方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-18T11:50:32.260

*   [ActionView::助手](http://apidock.com/rails/ActionView/Helpers/)
*   [ActionController::Helpers](http://apidock.com/rails/ActionController/Helpers)

对于其他没有接收器调用的东西，请查看`Kernel`模块，其中`puts`定义了类似的东西。由于该模块包含在 中`Object`，因此其方法随处可用。这与 - 恕我直言过度使用 - 声称一切都是对象的说法究竟有何矛盾？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-18T12:39:00.523

这些 rails assets 标签助手是 ActionView 的一个子模块，`ActionView::Helpers::AssetTagHelper`它提供了生成 HTML 的方法，这些 HTML 将视图链接到图片、javascript、样式表和提要等资产。

作为一个超类，这意味着 AssetTagHelpers 也将拥有`modules`它`class`

```
irb(main):016:0> ActionView::Helpers::AssetTagHelper
=> ActionView::Helpers::AssetTagHelper
irb(main):017:0> ActionView::Helpers::AssetTagHelper.class
=> Module
irb(main):018:0> ActionView::Helpers::AssetTagHelper.class.superclass
=> Object
irb(main):019:0> ActionView::Helpers::AssetTagHelper.class.superclass.superclass
=> BasicObject
irb(main):020:0> ActionView::Helpers::AssetTagHelper.class.superclass.superclass.superclass
=> nil 
```

注意：为简单起见，我将只关注 JavascriptIncludeTag，但它们都非常相似。

在这里，您将找到一个名为`ActionView::Helpers::AssetTagHelper::JavascriptIncludeTag`

你可以实例化哪个

```
JavascriptIncludeTag.new(config, asset_paths) 
```

JavascriptIncludeTag 类有一个方法被调用`asset_tag`，然后调用一个`content_tag`方法并返回正确的标签。

路径：/actionpack/lib/action_view/helpers/asset_tag_helpers/javascript_tag_helpers.rb

```
require 'action_view/helpers/asset_tag_helpers/asset_include_tag'

# NOTE: on the 'action_view/helpers/asset_tag_helpers/asset_include_tag' it requires '/actionpack/lib/action_view/helpers/tag_helper.rb' so now all this files are connected :)
.
.
.
def asset_tag(source, options)
  content_tag("script", "", { "src" => path_to_asset(source) }.merge(options))
end 
```

路径：/actionpack/lib/action_view/helpers/tag_helper.rb

```
def content_tag(name, content_or_options_with_block = nil, options = nil, escape = true, &block)
  if block_given?
    options = content_or_options_with_block if content_or_options_with_block.is_a?(Hash)
    content_tag_string(name, capture(&block), options, escape)
  else
    content_tag_string(name, content_or_options_with_block, options, escape)
  end
end 
```

因此，它们的工作方式就更少了。

注意：如果您发现我的解释有点棘手，请告诉我，我会进行编辑以提供更好的解释

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-18T12:07:46.950

当您看到没有显式接收器的方法调用时，接收器是`self`. 对象可以通过许多不同的方式获取方法。一，最明显的是，当您自己定义方法时。然后您还可以包含模块。

```
class Person
  # this adds a bunch of methods to Person, making it a Mongoid model
  include Mongoid::Document
end 
```

您包含的模块和您继承的类可以以相同的方式获取功能。

所以，当你看到没有接收器的方法时，想一想“`self`此时是什么？它的类是什么？它定义了哪些方法？它包含哪些模块？” 你会发现很多关于 ruby​​ 和 rails 的有趣的东西。:)

# android - 是否可以在录制的视频上添加时间戳：android

> ID：10652026
> 
> 赞同：2
> 
> 时间：2012-05-18T11:44:38.350
> 
> 标签：android, video-capture

我正在录制视频并将录制保存在 sdcard 内的文件夹中。现在当我从 sdcard 播放视频时，我想在视频视图中添加日期和时间，我完成了图像意味着能够使用帧布局在图像视图中添加时间戳和 Z-index，但是如何通过视频录制来完成 .. 是否可能？如果是，请提出任何建议..我在图像中添加时间戳的代码如下所示，参考网址为 ..：

[http://www.ilovefreesoftware.com/29/android-2/how-to-auto-capture-date-and-time-on-photos-taken-from-android.html](http://www.ilovefreesoftware.com/29/android-2/how-to-auto-capture-date-and-time-on-photos-taken-from-android.html)

**现在如何为视频做同样的事情？**

任何帮助都会在这里得到极大的赞赏......

```
 Bitmap src = BitmapFactory.decodeResource(getResources(), R.drawable.splashmodified); // the original file is cuty.jpg i added in resources
  Bitmap dest = Bitmap.createBitmap(src.getWidth(), src.getHeight(), Bitmap.Config.ARGB_8888);

  SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
  String dateTime = sdf.format(Calendar.getInstance().getTime()); // reading local time in the system

  Canvas cs = new Canvas(dest);
  Paint tPaint = new Paint();
  tPaint.setTextSize(35);
  tPaint.setColor(Color.BLUE);
  tPaint.setStyle(Style.FILL);
  cs.drawBitmap(src, 0f, 0f, null);
  float height = tPaint.measureText("yY");
  cs.drawText(dateTime, 20f, height+15f, tPaint);
  try {
      dest.compress(Bitmap.CompressFormat.JPEG, 100, new FileOutputStream(new File("/sdcard/timeStampedImage.jpg")));
  } catch (FileNotFoundException e) {
      // TODO Auto-generated catch block
      e.printStackTrace();
  }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T12:21:53.510

如果您要问如何简单地在视频上显示某些内容，答案是肯定的...只需使用相对布局并将您的 TextView 放置在与您用于相机预览的 SurfaceView 相同的坐标中...只要它在 XML 中的 SurfaceView 之后，它就会在它上面绘制。

或者，如果您坚持将文本绘制到 Canvas，请将您的绘图表面视图放在相机预览的顶部。无论哪种方式，只要将它添加到 Cam 表面之后的父视图，它就会在其上绘制。

# hibernate - JBoss AS 7 + Spring + JPA EntityManager 空指针异常

> ID：10652035
> 
> 赞同：3
> 
> 时间：2012-05-18T11:44:58.137
> 
> 标签：hibernate, spring-mvc, jboss7.x, entitymanager

我在这方面工作了一段时间。我想为我的公共服务器使用 OpenShift。所以在本地我也使用 JBoss AS 7。我阅读了很多论坛，一些类似的问题，但没有一个能解决我的问题。我使用 JPA，Spring 3，休眠。我认为我在 springDispatcher-servlet.xml 中有问题。

什么问题？！在我使用 EntityManager 的 DAO 中，当我想对其使用查询时，我得到 nullpointerException。但是 entityManager 本身不为空。让我告诉你，我有什么。

我的 springDispatcher-servlet.xml 的一部分

```
<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalEntityManagerFactoryBean" >
           <property name="persistenceUnitName" value="primary"/>
    </bean>

    <bean class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor" />

    <context:component-scan base-package="com.company.db" />

    <tx:annotation-driven transaction-manager="transactionManager"/>

<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager"
        p:entityManagerFactory-ref="entityManagerFactory" /> 
```

我想使用在standalone.xml 中为我提供jboss 的数据源。所以我使用persistence.xml 进行设置。这是 ..-servlet.xml 中给出的 persistenceUnitName

```
<persistence-unit name="primary" transaction-type="JTA">
    <jta-data-source>java:jboss/datasources/MysqlDS</jta-data-source>
    <properties>
        <!-- Properties for Hibernate -->
        <property name="hibernate.hbm2ddl.auto" value="create-drop" />
        <property name="hibernate.show_sql" value="true" />
    </properties>
</persistence-unit> 
```

我有数据库连接。由于上面的“create-drop”设置，它会在开始时创建带注释的表。所以很好。

com.company.db 包下的类非常简单：

DAO接口：

```
 public interface LocationDAO {

    public List<Location> getList();

} 
```

DAO 实现：

```
 @Repository("locationDAO")
public class LocationDAOImpl implements LocationDAO {

    @PersistenceContext
    private EntityManager entityManager;

    @SuppressWarnings("unchecked")
    @Override
    public List<Location> getList() {
        List<Location> retVal = new ArrayList<Location>();

        Query query = entityManager.createQuery("select l from Location l");
        if (query != null) {
            retVal = query.getResultList();
        }

        return retVal;
    }

    public void setEntityManager(EntityManager entityManager) {
        this.entityManager = entityManager;
    };

} 
```

这是问题所在。当从 entityManager 调用 createQuery 时（entityManager 不为空）。

我的交易界面：

```
 public interface LocationDataService {

    public List<Location> getLocations();

} 
```

和实施：

```
 @Service("locationDataService")
@Transactional(propagation = Propagation.SUPPORTS, readOnly = true)
public class LocationDataServiceImpl implements LocationDataService {

    @Autowired
    private LocationDAO locationDAO;

    public LocationDataServiceImpl() {
    }

    @Override
    public List<Location> getLocations() {
        List<Location> retVal = new ArrayList<Location>();

        retVal = locationDAO.getList();

        return retVal;
    }

} 
```

而且我几乎忘记了 Location 类：

```
 @Entity
@Table(name = "location")
public class Location {

    @Id
    @GeneratedValue
    @Column(name = "id")
    private Integer id;

    @Column(name = "country")
    private String country;

    @Column(name = "city")
    private String city;

    @Column(name = "post_code")
    private String postCode;

    public Location() {

    }

    public Location(Integer id, String country, String city, String postCode) {
        this.id = id;
        this.country = country;
        this.city = city;
        this.postCode = postCode;
    }

 //getters, setters are here
} 
```

您有什么建议吗，我在配置中遗漏了什么？

这将非常有帮助，因为我认为此时我只需要进行一些修改。

这是堆栈跟踪：

```
14:10:16,924 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/].[springDispatcher]] (http-localhost-127.0.0.1-8080-1) Servlet.service() for servlet springDispatcher threw exception: java.lang.NullPointerException
at org.hibernate.engine.transaction.internal.jta.JtaStatusHelper.getStatus(JtaStatusHelper.java:73) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
at org.hibernate.engine.transaction.internal.jta.JtaStatusHelper.isActive(JtaStatusHelper.java:115) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
at org.hibernate.engine.transaction.internal.jta.CMTTransaction.join(CMTTransaction.java:149) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
at org.hibernate.ejb.AbstractEntityManagerImpl.joinTransaction(AbstractEntityManagerImpl.java:1207) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
at org.hibernate.ejb.AbstractEntityManagerImpl.postInit(AbstractEntityManagerImpl.java:176) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
at org.hibernate.ejb.EntityManagerImpl.<init>(EntityManagerImpl.java:89) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
at org.hibernate.ejb.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:125) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
at org.hibernate.ejb.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:120) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.6.0_31]
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) [rt.jar:1.6.0_31]
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) [rt.jar:1.6.0_31]
at java.lang.reflect.Method.invoke(Unknown Source) [rt.jar:1.6.0_31]
at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.invokeProxyMethod(AbstractEntityManagerFactoryBean.java:423) [spring-orm-3.0.5.RELEASE.jar:3.0.5.RELEASE]
at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean$ManagedEntityManagerFactoryInvocationHandler.invoke(AbstractEntityManagerFactoryBean.java:485) [spring-orm-3.0.5.RELEASE.jar:3.0.5.RELEASE]
at $Proxy38.createEntityManager(Unknown Source) at org.springframework.orm.jpa.EntityManagerFactoryUtils.doGetTransactionalEntityManager(EntityManagerFactoryUtils.java:195) [spring-orm-3.0.5.RELEASE.jar:3.0.5.RELEASE]
at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:211) [spring-orm-3.0.5.RELEASE.jar:3.0.5.RELEASE]
at $Proxy39.createQuery(Unknown Source) at com.company.db.dao.LocationDAOImpl.getList(LocationDAOImpl.java:31) [classes:]
at com.company.db.service.LocationDataServiceImpl.getLocations(LocationDataServiceImpl.java:33) [classes:]
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.6.0_31]
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) [rt.jar:1.6.0_31]
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) [rt.jar:1.6.0_31]
at java.lang.reflect.Method.invoke(Unknown Source) [rt.jar:1.6.0_31]
at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:309) [spring-aop-3.0.5.RELEASE.jar:3.0.5.RELEASE]
at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183) [spring-aop-3.0.5.RELEASE.jar:3.0.5.RELEASE]
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150) [spring-aop-3.0.5.RELEASE.jar:3.0.5.RELEASE]
at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110) [spring-tx-3.0.5.RELEASE.jar:3.0.5.RELEASE]
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172) [spring-aop-3.0.5.RELEASE.jar:3.0.5.RELEASE]
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202) [spring-aop-3.0.5.RELEASE.jar:3.0.5.RELEASE]
at $Proxy40.getLocations(Unknown Source)    at com.company.something.SomethingSearchController.populateLocationList(SomethingSearchController.java:117) [classes:]
at com.company.something.SomethingSearchController.initForm(SomethingSearchController.java:58) [classes:]
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.6.0_31]
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) [rt.jar:1.6.0_31]
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) [rt.jar:1.6.0_31]
at java.lang.reflect.Method.invoke(Unknown Source) [rt.jar:1.6.0_31]
at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176) [spring-web-3.0.5.RELEASE.jar:3.0.5.RELEASE]
at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:426) [spring-webmvc-3.0.5.RELEASE.jar:3.0.5.RELEASE]
at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:414) [spring-webmvc-3.0.5.RELEASE.jar:3.0.5.RELEASE]
at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:790) [spring-webmvc-3.0.5.RELEASE.jar:3.0.5.RELEASE]
at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719) [spring-webmvc-3.0.5.RELEASE.jar:3.0.5.RELEASE]
at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644) [spring-webmvc-3.0.5.RELEASE.jar:3.0.5.RELEASE]
at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:549) [spring-webmvc-3.0.5.RELEASE.jar:3.0.5.RELEASE]
at javax.servlet.http.HttpServlet.service(HttpServlet.java:734) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
at org.jboss.weld.servlet.ConversationPropagationFilter.doFilter(ConversationPropagationFilter.java:62) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:368) [spring-security-web-3.0.5.RELEASE.jar:3.0.5.RELEASE]
at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109) [spring-security-web-3.0.5.RELEASE.jar:3.0.5.RELEASE]
at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83) [spring-security-web-3.0.5.RELEASE.jar:3.0.5.RELEASE]
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380) [spring-security-web-3.0.5.RELEASE.jar:3.0.5.RELEASE]
at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97) [spring-security-web-3.0.5.RELEASE.jar:3.0.5.RELEASE]
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380) [spring-security-web-3.0.5.RELEASE.jar:3.0.5.RELEASE]
at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:100) [spring-security-web-3.0.5.RELEASE.jar:3.0.5.RELEASE]
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380) [spring-security-web-3.0.5.RELEASE.jar:3.0.5.RELEASE]
at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54) [spring-security-web-3.0.5.RELEASE.jar:3.0.5.RELEASE]
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380) [spring-security-web-3.0.5.RELEASE.jar:3.0.5.RELEASE]
at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:35) [spring-security-web-3.0.5.RELEASE.jar:3.0.5.RELEASE]
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380) [spring-security-web-3.0.5.RELEASE.jar:3.0.5.RELEASE]
at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:177) [spring-security-web-3.0.5.RELEASE.jar:3.0.5.RELEASE]
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380) [spring-security-web-3.0.5.RELEASE.jar:3.0.5.RELEASE]
at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187) [spring-security-web-3.0.5.RELEASE.jar:3.0.5.RELEASE]
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380) [spring-security-web-3.0.5.RELEASE.jar:3.0.5.RELEASE]
at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105) [spring-security-web-3.0.5.RELEASE.jar:3.0.5.RELEASE]
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380) [spring-security-web-3.0.5.RELEASE.jar:3.0.5.RELEASE]
at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79) [spring-security-web-3.0.5.RELEASE.jar:3.0.5.RELEASE]
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380) [spring-security-web-3.0.5.RELEASE.jar:3.0.5.RELEASE]
at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:169) [spring-security-web-3.0.5.RELEASE.jar:3.0.5.RELEASE]
at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237) [spring-web-3.0.5.RELEASE.jar:3.0.5.RELEASE]
at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167) [spring-web-3.0.5.RELEASE.jar:3.0.5.RELEASE]
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
at org.tuckey.web.filters.urlrewrite.UrlRewriteFilter.doFilter(UrlRewriteFilter.java:391) [urlrewritefilter-3.2.0.jar:3.2.0]
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88) [spring-web-3.0.5.RELEASE.jar:3.0.5.RELEASE]
at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76) [spring-web-3.0.5.RELEASE.jar:3.0.5.RELEASE]
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
at java.lang.Thread.run(Unknown Source) [rt.jar:1.6.0_31] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T18:05:04.413

问题解决了。

我现在必须更改的两个 xml 文件如下所示：

springDispatcher-servlet.xml 片段：

```
 <context:component-scan base-package="com.company.db" />

<tx:annotation-driven />

    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="persistenceUnitName" value="primary" />
    </bean>

    <bean id="transactionManager" class="org.springframework.transaction.jta.JtaTransactionManager">
        <property name="transactionManagerName" value="java:/TransactionManager" />
    </bean> 
```

持久性.xml：

```
 <?xml version="1.0" encoding="UTF-8"?>
<persistence version="1.0"
    xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd">
    <persistence-unit name="primary" transaction-type="JTA">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <jta-data-source>java:jboss/datasources/MysqlDS</jta-data-source>
        <class>com.company.db.Location</class>

        <properties>
            <property name="hibernate.transaction.manager_lookup_class"
                value="org.hibernate.transaction.JBossTransactionManagerLookup" />
            <property name="hibernate.dialect" value="org.hibernate.dialect.MySQL5Dialect" />
            <property name="hibernate.hbm2ddl.auto" value="create-drop" />
            <property name="hibernate.show_sql" value="true" />
            <property name="hibernate.format_sql" value="true" />
            <!-- Auto-detect entity classes -->
            <property name="hibernate.archive.autodetection" value="class, hbm" />

        </properties>
    </persistence-unit>

</persistence> 
```

就这样。现在我可以将 MySQL DB 与 Hibernate 和 JBoss AS 7 一起使用。

# php - PHP：分钟到年月日小时分钟

> ID：10652036
> 
> 赞同：0
> 
> 时间：2012-05-18T11:44:59.853
> 
> 标签：php, math, time

我正在制作一个基于文本的 PHP 游戏。每一秒都有一个更新，并且更新，`time`从数据库中选择行，例如包含`548991`. 这意味着`548991`分钟已经过去，这意味着例如它的第一年、第一个月、第 4 天、第 7 小时和第 51 分钟。我该如何计算，以便数字 548991使用 PHP 代码生成：**第 1 年、第 1 个月、第 4 天、上午 7 点 51 分？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T14:15:36.957

花费了很多额外的精力来回答这个问题。另外，Thew，我知道你没有放弃，所以当你找到解决方案时回答你自己的问题会对你的 Karma 有好处。

我祖父曾经告诉我，你可以用蜂蜜捕捉更多的苍蝇。我明白这些人在说什么，但我只是认为我们都应该对彼此好一点。

用一些标签回答...

[格式](/questions/tagged/format "显示标记为“格式”的问题") [日期差异](/questions/tagged/date-diff "显示标记为“日期差异”的问题")

用一些代码回答......

```
$datetime1 = new DateTime('now - {$minutes}minutes');
$datetime2 = new DateTime('now');
$interval = date_diff($datetime2,$datetime1);
echo $interval->format('%r Year %y, Month %m, Day %d, %H:%I %a'); 
```

回答会将此问题从未回答列表中删除...

和平

# sql - 如何将字段名称作为参数传递给存储过程

> ID：10652037
> 
> 赞同：1
> 
> 时间：2012-05-18T11:45:00.010
> 
> 标签：sql, sql-server

我正在使用一个存储过程，我在其中发送`@columnname`它的数据库类型，`float`并且我还声明了 parameter `float`。
当我将列名作为浮点数传递时，它会给出错误：

> 消息 8114，将数据类型 nvarchar 转换为浮点数时出错。

这是我的测试查询

```
Declare @column float
set @column = 'S_E1'
select Avg(@column) from TBL_SENSORS 
```

当我将参数类型更改为`varchar`then 它给了我这个错误：

> 消息 8117，操作数数据类型 varchar 对 avg 运算符无效。

```
Declare @column varchar
set @column = 'S_E1'
select Avg(@column) from TBL_SENSORS 
```

我该如何解决这个问题？

**更新 ：**

这是我的存储过程：

```
ALTER PROCEDURE [dbo].[getAvgColumn]
    @ColumnName float,
    @StartDate DateTime,
    @EndDate DateTime,
    @Start int,
    @End int
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

    declare @Skip int = 0
    declare @Take int = 4
    declare @count int = 0

    set @count = (select count(@ColumnName) from TBL_SENSORS Where RECORD_TIMESTAMP Between   @StartDate and @EndDate And ( @ColumnName Between @Start And @End ))

    while(@Skip < @count)
    Begin
        select avg(@ColumnName)
        from 
            (select 
                 @ColumnName as cc,
                 row_number() over (order by RECORD_TIMESTAMP) as rn
             from 
                 TBL_SENSORS 
             Where 
                 RECORD_TIMESTAMP Between @StartDate and @EndDate 
                 And (@ColumnName Between @Start And @End)
            ) T
    where 
        rn > @Skip and 
        rn <= @Skip + @Take

    set @Skip = @Skip + @Take
end
END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T11:53:39.407

你需要动态sql。

```
DECLARE @SQL NVARCHAR(4000)
Declare @column varchar 
set @column = 'S_E1' 

SET @SQL = 'select Avg(' + quotename(@column) + ') from TBL_SENSORS'

EXEC sp_executesql @SQL 
```

更新：应用了两个建议`quotename`和`sp_executesql`

新过程：您可以使用动态 SQL 将数据放入具有已知架构的临时表中。参考基于别名的列：ColumnToAvg。使用 #TempSensors 代替 TBL_SENSORS。

注意：在生产中，您需要检查#TempSensors 是否存在，如果存在则删除。

```
SET @SQL = 'Select RECORD_TIMESTAMP, '
    + quotename(@ColumnName)   
    + ' as ColumnToAvg 
       INTO #TempSensors
       from TBL_SENSORS
       Where RECORD_TIMESTAMP Between @StartDate and @EndDate 
       And @ColumnName Between @Start And @End'

EXECUTE sp_executesql @sqlCommand
    , N'@StartDate datetime, @EndDate datetime, @Start int, @End int'
    , @StartDate , @EndDate, @Start, @End 
```

# c++ - 线程安全挂钩功能

> ID：10652038
> 
> 赞同：1
> 
> 时间：2012-05-18T11:45:01.017
> 
> 标签：c++, windows, winapi, assembly, hook

我正在实现一个小监控应用程序，所以我在进程中连接 CreateWindowExA/W，所以我可以控制窗口的创建。我用来挂钩的方法是用汇编程序 JMP 指令将调用中的前 5 个字节替换为我的挂钩函数。（是的，我知道汇编程序，我以前多次使用相同的方法）。我在挂钩代码的开头使用 EnterCriticalSection 并使用 InterlockedExchange 来恢复被盗字节，也就是将我在 CreateWindowExA/W 开头写的 JMP 替换为真正的 5 个字节，这样我就可以正确调用该函数。根据我的经验，一切都必须没问题，但发生的情况是，当我刚刚用真实字节替换 JMP 时，其他一些线程/s 调用该函数，看起来字节也被替换了...... .

我知道我可以使用 IAT/EAT 表挂钩，但我想知道我当前的方法有什么问题......也许 InterlockedExchange 不起作用的问题是，从 dll 调用 CreateWindowExA/W(comctl32.dll,shell32.dll ...) 但不是主要的可执行模块。

我希望有人帮助我，如果你不明白我的解释，请询问，我会重新解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T12:12:01.003

如果您要挂钩 Windows 功能，IAT 挂钩会更好、更安全。但是，如果您坚持使用 detours，通常最好使用 windows 端的内置热补丁（这使得编写 detour 可以原子地编写，不需要同步）。

您的问题正如您所说，您的锁只会暂停您的执行线程，而不是那些由您控制的线程。要解决这个问题，您需要暂停所有这些线程（通过 PSAPI/toolhlp32），或者更有效地，向您绕道的函数添加一个检查，以检查被调用者地址是否位于您想要绕道的模块的地址空间中，这个可以使用 GetModuleHandle、WinNT 中的一些 PE 函数和`_ReturnAddress`内部函数来完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T13:00:33.387

一旦您更改回字节，挂钩就会丢失，并且关键部分将无济于事，因为这是在 jmp 之后。

看看[DXHooks中的](http://code.google.com/p/dxhook/)[http://dxhook.googlecode.com/svn/trunk/dxhook.cpp](http://dxhook.googlecode.com/svn/trunk/dxhook.cpp)，因为我认为它可以满足您的需求

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T12:11:32.710

如果您可以控制对 CreateWindowEx 的每一次调用，那么您可以用关键部分包装它们。但是，如果你能做到这一点，那么你就不需要挂钩该函数。

剩下的就是在任何其他线程启动之前挂钩该函数。在您的应用程序开始时执行此操作，可能通过使用静态初始化。

另一个人想到了这个特殊的功能。在许多应用程序中，所有窗口都是在主线程中创建的。如果这对您来说是这样，那么您无需同步。

# r - R：对聚合函数使用多个标准

> ID：10652045
> 
> 赞同：1
> 
> 时间：2012-05-18T11:45:28.607
> 
> 标签：r, aggregate, plyr, data.table

我正在寻找一种解决方案，如何使用聚合函数来总结其他列中给定几个条件的列。R 应该在一列中选择一个范围，并在考虑另一行的值的情况下在同一行中执行操作。

我试图解决的实际问题如下：我得到了一份两年内每天每 15 分钟测量一次的电力负荷清单。它看起来像这样：

日期***_* __ *_* __***时间*****__ *_* __ *_***加载
01-01-2010 00:00-00:15 1234**

 **01-01-2010 00:15-00:30 2313

01-01-2010 ...

01-01-2010 23:30-23:45 2341

...

31-12-2011 23:30-23:45 2347

我的目标是计算所谓的“峰值负载”和“非峰值负载”峰值是从早上 8 点到晚上 8 点。非高峰期则相反。所以我想计算每天的高峰和非高峰。因此，我需要每天 8:00 到 20:00 的聚合并计算当天的剩余负载。

我也很开心

谢谢你的帮助！

最好的，F

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T11:53:53.353

我认为你在这里的层次结构的心理模型使这种方式过于复杂。您不必按天然后按高峰/非高峰进行子集化。只是联合子集。

**使用`ddply`：**

```
dat <- data.frame(date=rep(seq(5),5),time=runif(25),load=rnorm(25))
library(plyr)
dat$peak <- dat$time<.5
ddply(dat, .(date,peak), function(x) mean(x$load) )

> ddply(dat, .(date,peak), function(x) mean(x$load) )
   date  peak           V1
1     1 FALSE -1.064166845
2     1  TRUE  0.172868201
3     2 FALSE  0.638594830
4     2  TRUE  0.045538051
5     3 FALSE  0.201264770
6     3  TRUE  0.054019462
7     4 FALSE  0.722268759
8     4  TRUE -0.490305933
9     5 FALSE  0.003411591
10    5  TRUE  0.628566966 
```

**使用`aggregate`：**

```
> aggregate(dat$load, list(dat$date,dat$peak), mean )
   Group.1 Group.2            x
1        1   FALSE -1.064166845
2        2   FALSE  0.638594830
3        3   FALSE  0.201264770
4        4   FALSE  0.722268759
5        5   FALSE  0.003411591
6        1    TRUE  0.172868201
7        2    TRUE  0.045538051
8        3    TRUE  0.054019462
9        4    TRUE -0.490305933
10       5    TRUE  0.628566966 
```

**只是为了好玩，基准测试**

*首先，使用上面的 5x5 条目：*

```
> microbenchmark(
+   ddply(dat, .(date,peak), function(x) mean(x$load) ),
+   aggregate(dat$load, list(dat$date,dat$peak), mean )
+   )
Unit: milliseconds
                                                 expr      min       lq   median       uq      max
1 aggregate(dat$load, list(dat$date, dat$peak), mean) 1.323438 1.376635 1.445769 1.549663 2.853348
2 ddply(dat, .(date, peak), function(x) mean(x$load)) 4.057177 4.292442 4.386289 4.534728 6.864962 
```

![5x5 基准测试](../Images/8a78143e4521eeab3e0417bbbe997314.png)

*接下来使用 500x500 条目*

```
> m
Unit: milliseconds
                                                 expr      min       lq   median       uq      max
1 aggregate(dat$load, list(dat$date, dat$peak), mean) 558.9524 570.7354 590.4633 599.4404 634.3201
2 ddply(dat, .(date, peak), function(x) mean(x$load)) 317.7781 348.1116 361.7118 413.4490 503.8540 
```

![500x500 基准](../Images/c42d92e73e1d5a697d3d4bd7f3fe4bad.png)

*50x50 基准*

```
n <- 50
dat <- data.frame(date=rep(seq(n),n),time=runif(n),load=rnorm(n))
dat$peak <- dat$time<.5

library(plyr)
library(microbenchmark)
library(data.table)
DT <- as.data.table(dat)
m <- microbenchmark(
  ddply(dat, .(date,peak), function(x) mean(x$load) ),
  aggregate(dat$load, list(dat$date,dat$peak), mean ),
  DT[,.Internal(mean(load)),keyby=list(date,peak)]
  )
m
plot(m) 
```

![50x50](../Images/97d02e03d73b8f7bd48d47b371454763.png)

因此，对于小问题，聚合更快（大概是因为加载所有机器的开销更少），而对于大问题（速度很重要），ddply 更快。Data.table 把一切都吹走了（像往常一样）。**

# javascript - Jquery - 如果显示 DIV //做某事

> ID：10652048
> 
> 赞同：1
> 
> 时间：2012-05-18T11:45:40.533
> 
> 标签：javascript, jquery

我这里有一个老虎机插件，它可以旋转 UL 并随机显示其中一个。

我希望显示的 UL 设置一个值。

像这样的东西：

```
if ($("#1").is(":visible") == true) {
 dial.setValue(8);
}; 
```

希望你能帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:48:35.843

`onEnd :function() { ... },`似乎是你需要你的功能的地方

```
// Function: run on spin end. It is passed (finalNumbers:Array).
// finalNumbers gives the index of the li each slot stopped on in order. 
```

不太清楚为什么我只得到一个项目，但这是有效的代码

[演示](http://jsfiddle.net/mplungjan/MW7pc/)

```
onEnd: function(finalNumbers) { 
         if (finalNumbers[0]==1) dial.setValue(8); // found 1st li
       } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T11:55:32.000

在onEnd参数上添加一个函数，函数中传入的变量就是spinner中的最终值

```
 // --------------------------------------------------------------------- //
    // DEFAULT OPTIONS
    // --------------------------------------------------------------------- //

    $.jSlots.defaultOptions = {
        number : 1,          // Number: number of slots
        spinner : '',        // CSS Selector: element to bind the start event to
        spinEvent : 'click', // String: event to start slots on this event
        onStart : $.noop,    // Function: runs on spin start,
        onEnd :   function handleEnd($finalNumber){alert(finalNumber);},      // Function: run on spin end. It is passed (finalNumbers:Array). finalNumbers gives the index of the li each slot stopped on in order.
        onWin : $.noop,      // Function: run on winning number. It is passed (winCount:Number, winners:Array)
        easing : 'swing',    // String: easing type for final spin
        time : 7000,         // Number: total time of spin animation
        loops : 6            // Number: times it will spin during the animation
    }; 
```

# jquery-deferred - 延迟加载 javascript 文件

> ID：10652050
> 
> 赞同：-1
> 
> 时间：2012-05-18T11:45:41.117
> 
> 标签：jquery-deferred

```
<form id="form1" runat="server">
<div id="chart1">
</div>
</form>

<script type="text/javascript">

    // Add a script element as a child of the body 

    function downloadJSAtOnload() {

        var element1 = document.createElement("script");
        element1.src = "js/jquery-1.7.2.js";
        document.body.appendChild(element1);
        var element2 = document.createElement("script");
        element2.src = "js/jquery.jqplot.js";
        document.body.appendChild(element2);
        var element3 = document.createElement("script");
        element3.src = "js/jqplot.canvasTextRenderer.js";
        document.body.appendChild(element3);
        var element4 = document.createElement("script");
        element4.src = "js/jqplot.canvasAxisLabelRenderer.js";
        document.body.appendChild(element4);
        var element5 = document.createElement("script");
        element5.src = "js/deferredfunction.js";
        document.body.appendChild(element5);
        //setTimeout("Func1()", 2000);
        //Func1();
        //            $(window).bind("load", function() {
        //                Func1();
        //            });

    }

    function Func1() {

        var plot1 = $.jqplot('chart1', [[3, 7, 9, 1, 4, 6, 8, 2, 5]]);

    }

    // Check for browser support of event handling capability
    function chk_comp() {
        if (window.addEventListener)
            window.addEventListener("load", downloadJSAtOnload, false);
        else if (window.attachEvent) {
            debugger;
            window.attachEvent("onload", downloadJSAtOnload);
        }
        else window.onload = downloadJSAtOnload;
    }

    chk_comp();
</script> 
```

我收到错误。我想在页面加载完成后调用要调用的 jquery 函数，它会在加载所有必需的 .js 文件后自动触发函数“func1()”，但它没有发生。请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T06:38:12.067

我不明白您为什么要等待页面完全加载，然后再开始加载其他脚本。您应该同时加载所有脚本，它会更快。

然后，如果浏览器支持事件，您可以触发*func1()*。

如果您经常遇到条件加载问题，我建议您使用一些东西来轻松实现它：http: [//yepnopejs.com/](http://yepnopejs.com/)

# sql - SQL小数的问题

> ID：10652051
> 
> 赞同：2
> 
> 时间：2012-05-18T11:45:42.663
> 
> 标签：sql, sql-server-2005

我在 SQL Server Management Studio 2005 中运行了一个 SQL 查询，当我的结果来自我的`Total_Cost`列时，我的列没有按照我想要的格式进行格式化。

我曾尝试添加一个`Declare @TOTAL_COST decimal(12,2)`子句，但似乎无法使其正常工作，因此再次将其取出。

我的查询是：-

```
SELECT     
   vwREP_GP_ContractProjectPurchaseCostCatID.PACOSTCATID AS COST_CAT_CODE, 
   vwREP_GP_ContractProjectPurchaseCostCatID.PACOSTCATNME AS COST_CAT_NAME, 
   vwREP_GP_ContractProjectPurchaseRpt.COST, 
   vwREP_GP_ContractProjectPurchaseRpt.ITEMDESC AS ITEM, 
   vwREP_GP_ContractProjectPurchaseRpt.CREDITOR, 
   vwREP_GP_ContractProjectPurchaseRpt.DOC_NUM AS DOCUMENT_NUMBER, 
   vwREP_GP_ContractProjectPurchaseRpt.DESCRIPTION, 
   vwREP_GP_ContractProjectPurchaseRpt.DOC_DATE AS DATE,  
   vwREP_GP_ContractProjectPurchaseRpt.PROJECT AS JOB_CODE_STAGE, 
   vwREP_GP_ContractProjectPurchaseRpt.COMPOUNDNAME AS CATEGORY_DESCRIPTION
FROM         
   vwREP_GP_ContractProjectPurchaseCostCatID 
INNER JOIN
   vwREP_GP_ContractProjectPurchaseRpt ON vwREP_GP_ContractProjectPurchaseCostCatID.PACOSTCATID = vwREP_GP_ContractProjectPurchaseRpt.PACOSTCATID

SELECT  
   CATEGORY_DESCRIPTION, SUM(COST) AS TOTAL_COST 
FROM    
   (SELECT 
        COMPOUNDNAME AS CATEGORY_DESCRIPTION, COST 
    FROM   
        vwREP_GP_ContractProjectPurchaseRpt 
   ) A
GROUP BY 
    CATEGORY_DESCRIPTION 
```

这给了我我正在寻找的结果，但`Total_Cost`产生的数字是 5 位十进制格式。

例如：

```
156713.55000 
```

获得结果以阅读以下内容的最佳方法是什么 -

```
156713.55 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:46:46.077

```
SELECT     vwREP_GP_ContractProjectPurchaseCostCatID.PACOSTCATID AS COST_CAT_CODE, 
           vwREP_GP_ContractProjectPurchaseCostCatID.PACOSTCATNME AS COST_CAT_NAME, 
           vwREP_GP_ContractProjectPurchaseRpt.COST, 
           vwREP_GP_ContractProjectPurchaseRpt.ITEMDESC AS ITEM, 
           vwREP_GP_ContractProjectPurchaseRpt.CREDITOR, 
           vwREP_GP_ContractProjectPurchaseRpt.DOC_NUM AS DOCUMENT_NUMBER, 
           vwREP_GP_ContractProjectPurchaseRpt.DESCRIPTION, 
           vwREP_GP_ContractProjectPurchaseRpt.DOC_DATE AS DATE,  
           vwREP_GP_ContractProjectPurchaseRpt.PROJECT AS JOB_CODE_STAGE, 
           vwREP_GP_ContractProjectPurchaseRpt.COMPOUNDNAME AS CATEGORY_DESCRIPTION

FROM         vwREP_GP_ContractProjectPurchaseCostCatID INNER JOIN
                      vwREP_GP_ContractProjectPurchaseRpt ON vwREP_GP_ContractProjectPurchaseCostCatID.PACOSTCATID = vwREP_GP_ContractProjectPurchaseRpt.PACOSTCATID

SELECT  CATEGORY_DESCRIPTION, CAST(SUM(COST) AS DECIMAL(12, 2)) AS TOTAL_COST

FROM    (  
        SELECT COMPOUNDNAME AS CATEGORY_DESCRIPTION, COST 
        FROM   vwREP_GP_ContractProjectPurchaseRpt 
        ) A
GROUP BY 
        CATEGORY_DESCRIPTION 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T11:55:07.127

如果您只存储 2 位小数，那么我不会担心。几乎我所知道的每种语言都会丢弃多余的零（SQL除外）:)

另一方面，如果您要存储超过 2 个小数（即 123.456），那么我会使用 round() 来代替准确性。

```
 ...

SELECT  CATEGORY_DESCRIPTION, round(SUM(COST), 2) AS TOTAL_COST  

FROM    (   
        SELECT COMPOUNDNAME AS CATEGORY_DESCRIPTION, COST  
        FROM   vwREP_GP_ContractProjectPurchaseRpt  
        ) A 

GROUP BY  
        CATEGORY_DESCRIPTION 
```

# c++ - 如何在 C++ 中将对象创建限制为仅指针

> ID：10652052
> 
> 赞同：2
> 
> 时间：2012-05-18T11:45:52.180
> 
> 标签：c++, pointers

考虑到 A 类，我想将它的创建限制为新的。那是

```
A* a = new A; // Would be allowed.
A a;  // Would not be allowed. 
```

这怎么可能实现？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-18T11:47:12.670

您可以将构造函数设为私有并提供一个`static`返回动态分配实例的工厂方法：

```
class A
{
public:
    static A* new_instance() { return new A(); }
private:
    A() {}
}; 
```

与其返回原始指针，不如考虑返回智能指针：

```
class A
{
public:
    static std::shared_ptr<A> new_instance()
    {
        return std::make_shared<A>();
    }
private:
    A() {}
}; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-18T11:47:18.210

一种选择是将构造函数设为私有，并使用静态辅助函数：

```
class A {
private:
    A() {}          // Default constructor
    A(const A &a);  // Copy constructor

public:
    static A *create() { return new A; }
};

...

A a;                // Won't compile
A *p = A::create(); // Fine 
```

尽管您应该强烈考虑返回智能指针而不是原始指针。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-18T11:46:53.497

**是的，您可以使用工厂模式**来做到这一点。

```
class A
{
    A() {}  //private by default
    friend struct AFactory;
};
struct AFactory
{
    static A* newA() { return new A; }
}; 
```

或类似的`static`成员函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-18T13:28:21.333

这实际上非常简单。将您的析构函数设为私有。不能在堆栈上创建具有私有析构函数的对象，因此创建它们的唯一方法是通过调用“new”。您需要提供另一种删除对象的机制，例如调用“delete self”的“delete()”方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T13:22:06.810

我假设您正在尝试控制客户可以对您的班级做什么。这里的答案使用了稍微神秘的技术。隔离系统的一种常用方法是使用接口。

你可以做一个摘要：

```
class A
{
public:
    virtual void doSomething() = 0;
    virtual ~A() {}
}; 
```

并至少进行一种实现：

```
class A_impl : public A
{
public:
    virtual void doSomething()
    {
         // behaviour
    }
}; 
```

`A_impl`然后按照其他答案的建议，使用（智能）指针向客户端返回一个实例。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-18T11:58:25.647

你不能只做：

```
A* a; 
```

? 那只是声明一个指向`A`对象的指针。它还没有被初始化，所以你可能应该这样做

```
A* a = NULL; 
```

那是指向类型对象的指针，`A`但指向已知（非）值。

编辑：鉴于此处其他答案的复杂性，也许我没有掌握完整的问题。

EDIT2：他是否在问您是否可以阻止在堆栈上创建对象并只允许堆创建对象并通过指针访问？如果是这样的话，我的投票将投向工厂模式。

# jquery - 验证字段后，从 Twitter Bootstrap 中的提交按钮中删除属性“已禁用”

> ID：10652058
> 
> 赞同：1
> 
> 时间：2012-05-18T11:46:18.957
> 
> 标签：jquery, twitter-bootstrap

在表单中，我想在表单验证通过后删除属性 disabled="disabled" 。

验证本身有效，但我的提交按钮不起作用。只有当所有字段都为绿色时，它才必须处于活动状态。

jsfiddle中的代码：

[http://jsfiddle.net/7FYPY/](http://jsfiddle.net/7FYPY/)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T12:28:29.990

对不起，冗长的代码，但这似乎工作（删除`return`s 并检查`empty`，并替换`blur`为`bind('blur keyup')`）

```
$(document).ready(function() {
    var name_error = 1;
    var email_error = 1;
    var message_error = 1;

    // Check name field
    $('#name').bind('blur keyup', function() {
        $('#name_msg').html("");
        var name = $('#name').val();

        if (name === '') {
            name_error = 1;
            $('#name-group').addClass('error');
            $('#name_msg').append('Field is empty');
        } else if (name.length < 2) {
            name_error = 1;
            $('#name-group').addClass('error');
            $('#name_msg').append('Must be at leas 2 characters long');
        } else {
            name_error = 0;
            $('#name-group').removeClass('error');
            $('#name-group').addClass('success');
        }
        enableButton();
    });

    // check email field
    $('#email').bind('blur keyup', function() {
        $('#email_msg').html("");
        var email = $('#email').val();

        var reEmail = /^[A-Za-z0-9._-][a-zA-Z0-9._-][A-Za-z0-9._-]+@([a-zA-Z0-9.-]+\.)+[a-zA-Z0-9.-]{2,4}$/;

        if (email === '') {
            email_error = 1;
            $('#email-group').addClass('error');
            $('#email_msg').append('Field is empty');
        } else if (!reEmail.test(email)) {
            email_error = 1;
            $('#email-group').addClass('error');
            $('#email_msg').append('Email is not valid');
        } else {
            email_error = 0;
            $('#email-group').removeClass('error');
            $('#email-group').addClass('success');
         }
        enableButton();
    });

    // check message field
    $('#message').bind('blur keyup', function() {
        $('#message_msg').html("");
        var message = $('#message').val();

        if (message === '') {
            message_error = 1;
            $('#message-group').addClass('error');
            $('#message_msg').append('Field is empty');
        } else if (message.length < 6) {
            message_error = 1;
            $('#message-group').addClass('error');
            $('#message_msg').append('Must be at leas 6 characters long');
        } else {
            message_error = 0;
            $('#message-group').removeClass('error');
            $('#message-group').addClass('success');
        }
        enableButton();
    });

    // verzendknop pas activeren nadat alles is ingevuld en gecontroleerd
    function enableButton() {
        if (name_error!== 0 || email_error!== 0 || message_error !== 0) {
            $('#sendit').attr('disabled', 'disabled');
        } else {
            $('#sendit').removeAttr('disabled');
        }
    };
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T12:09:28.037

问题是您用于 keyup 绑定的选择器： $('form > input') 该选择器将应用于表单标记正下方的所有输入字段。有关子选择器的更多信息，请阅读[http://api.jquery.com/child-selector/](http://api.jquery.com/child-selector/)

如果您将其更改为以下内容，它应该可以工作：

```
// verzendknop pas activeren nadat alles is ingevuld en gecontroleerd
    $('form  input').keyup(function() {
        var empty = 0;
        $('form  input').each(function() {
            if ($(this).val() === '') {
                empty = 1;
                return empty;
            }
        });

        if (empty || name_error || email_error || message_error !== 0) {
            $('#sendit').attr('disabled', 'disabled');
        } else {
            $('#sendit').removeAttr('disabled');
        }
    }); 
```

# regex - 使用正则表达式进行 Nutch 爬行

> ID：10652059
> 
> 赞同：0
> 
> 时间：2012-05-18T11:46:35.820
> 
> 标签：regex, web-crawler, nutch

我想抓取一个网站，但只保存那些网页，例如：

A 类：http: [//mywebsite.com/page.html](http://mywebsite.com/page.html)

任何其他链接。: [http://mywebsite.com/a/b/](http://mywebsite.com/a/b/)或[http://mywebsite.com/a/](http://mywebsite.com/a/) 或任何类似的东西都应该在队列中被 crwaled ，但它们应该只是用来获取更多的 url 喜欢“类型A”但未存储。

如何在 nutch 的 regex-urlfilter.txt 中使用正则表达式。

或在 RegexUrlNormalizer.xml

" 我 认为 整体 爬行 会 是 更好 的 选择 . 但 我 也 希望 在 爬行 的 时候 那样 . 如果 URL 有 锚 链接 类型 A : [http://mywebsite.com/page.html](http://mywebsite.com/page.html) . 我 想 存储 那个 链接 A 是通过这个网页获得。所以在我爬取之后，我可以删除页面并只获取A类页面，我有这个A类网页是从哪个特定网页获得的。我可以配置nutch来这样做吗？，如果是，一些提示.我需要修改源代码吗？用nutch写我自己的插件。？”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T12:11:48.623

我对 nutch 一无所知，但我可以帮助处理正则表达式。根据我上面的评论，现在我很清楚你想要匹配什么。

从你到目前为止的例子中：

```
".*\.html" will match anything that ends ".html" 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-19T17:18:18.610

您希望[http://mywebsite.com/a/b/](http://mywebsite.com/a/b/)或[http://mywebsite.com/a/](http://mywebsite.com/a/)被抓取并仅存储 Type A url，即。[http://mywebsite.com/page.html](http://mywebsite.com/page.html)？

并且不清楚您所说的存储是什么意思：是关于段还是 crawldb？请注意，如果您抓取这些页面以发现 A 类 URL，则内容将存储在分段中。你逃不掉的。

我的建议：抓取整个东西。稍后，通过设置正则表达式 urlfilter 文件并运行[updatedb](http://wiki.apache.org/nutch/bin/nutch_updatedb)和[updatesegs](http://wiki.apache.org/nutch/IntranetRecrawl)命令来删除不需要的东西。

# java - 哪些标准 Java 集合在迭代期间是可移除的？

> ID：10652061
> 
> 赞同：6
> 
> 时间：2012-05-18T11:46:36.993
> 
> 标签：java

使用`for(Type x:collection){...}`哪些广泛使用的集合类型可以`x`在迭代期间安全地删除？

在 JavaDocs 中是否有一个技术术语需要注意？

**澄清：**

我最初只询问使用 for-each 语法`for(Type x:collection){...}`。然而，更完整的答案将描述这种风格并使用存在差异的普通基于迭代器的循环......问题更多关于哪些标准集合允许我在迭代期间删除元素，以及如何执行迭代以允许这样做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T11:53:36.940

一个这样的集合是[`CopyOnWriteArrayList`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CopyOnWriteArrayList.html)。包中的其他集合`java.util.concurrent`共享此功能。

他们的迭代器从不抛出 a 的事实是`ConcurrentModificationException`此类的写时复制语义的副作用：每次修改它时，都会复制底层数组。这样做是为了允许快速并发访问经常读取但很少修改的列表。

JavaDoc 是这样解释的（强调我的）：

> “快照”风格的迭代器方法使用对创建迭代器时数组状态的引用。这个数组在迭代器的生命周期内永远不会改变，所以干扰是不可能**的，并且迭代器保证不会抛出`ConcurrentModificationException`**。

除了更新的高成本之外，这种实现还有一些进一步的缺点：

> 自创建迭代器以来，迭代器不会反映对列表的添加、删除或更改。不支持迭代器本身（ 、 和 ）`remove`上`set`的元素更改操作。`add`这些方法抛出`UnsupportedOperationException`.

请注意，这些集合*并不是*用来允许“简单”循环和删除的实用程序，而是*专门*用于高并发情况下的集合，其中许多线程需要并发访问仍然可以更改的数据（但通常很少更改） . **不要**简单地将 every 替换`ArrayList`为`CopyOnWriteArrayList`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T21:37:53.183

As a rule of the thumb: Anything w/ Concurrent or Blocking in its name, aka. `ConcurrentLinkedList`, `ConcurrentSkipListSet`, `LinkedBlockingDeque`, `LinkedBlockingQueue`, etc. The keySet(), values() of ConcurrentHashMap and ConcurrentSkipListMap and so on. Most java.util.concurrent is `ConcurrentModificationException` and that is good.

COWArrayList is usually useful for either smaller sized collections or rarely modified ones... and you should avoid the explicit `set` method.

One important note: using iterator.remove should be always favored to Collection.remove (except CHM.entrySet() which is impl. in a buggy way) [*when availble*, COWArrayList iterator does not support remove]. All non-random access structures will benefit from not having to look up the element which can be O(n).

Overall `ConcurrentModificationException` was a half-baked idea and its impl. involves some side effects, incl. preventing hardware-transaction-memory to operate. It imposes extra performance costs that are rarely needed. `HashMap` has a terrible impl. w/ a volatile modCount (which is written on modification and read on each itearyion, read is sorta free on x86, though).

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-06-15T18:46:23.153

答案可能有点晚，但是 Java 8 使得在迭代时从集合中删除元素变得更加容易：

```
removeIf(Predicate<? super E> filter) 
```

删除此集合中满足给定谓词的所有元素。

# jquery - jquery selectedIndex 不起作用

> ID：10652063
> 
> 赞同：0
> 
> 时间：2012-05-18T11:46:44.370
> 
> 标签：jquery

我有一个带有许多选择标签的标签，当用户提交表单时，我想检查用户是否为所有选择标签选择了一个选项，这是我的 jquery 代码

```
$('#apForm select').each(function(){
            var $this = $(this);
            if ($this.selectedIndex == 0){
                var error = 'fill this please' ;
                $this.next('span').text(error);
                errorCount = errorCount + 1;   
            }
        }); 
```

我试过这样

```
$this.attr("selectedIndex") 
```

我只是给你我的代码，我的问题是我是否应该提供更多代码告诉我

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T11:48:12.137

```
var $this = $(this);
if($this.get(0).selectedIndex == 0) {

} 
```

或者只是简单

```
this.selectedIndex; // not $this / $(this) 
```

如果没有`option`，它将返回`-1`

**[在这里，我展示了上述所有案例](http://jsfiddle.net/thecodeparadox/HvG99/5/)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T11:52:59.750

这是 this.selectedIndex，而不是 $this.selectedIndex :)

*   这是 HTMLDomElement
*   $this 是 jQuery 对象

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T11:53:20.480

如果您使用的是 1.6 以上的 jQuery 版本？那么你可以使用

```
if ( $this.prop('selectedindex') == 0 ){ /* handle */ } 
```

# android - 谁能告诉我为什么我会在 logcat 中收到此错误？

> ID：10652064
> 
> 赞同：0
> 
> 时间：2012-05-18T11:46:45.757
> 
> 标签：android, android-logcat

我是 Android 的新手。请告诉我以下 log cat 错误是什么意思，我该如何摆脱它？在我的应用程序中，我正在做的是阻止不需要的呼叫。当我在使用我的应用程序时按下后退按钮时，我收到了这个错误。请帮忙

```
05-18 16:58:32.614: E/ActivityThread(3265): Activity com.deepthi.blockmycalls.BlockMyCallsActivity has leaked IntentReceiver com.deepthi.blockmycalls.BlockMyCallsActivity$1@44f03d18 that was originally registered here. Are you missing a call to unregisterReceiver()?
05-18 16:58:32.614: E/ActivityThread(3265): android.app.IntentReceiverLeaked: Activity com.deepthi.blockmycalls.BlockMyCallsActivity has leaked IntentReceiver com.deepthi.blockmycalls.BlockMyCallsActivity$1@44f03d18 that was originally registered here. Are you missing a call to unregisterReceiver()?
05-18 16:58:32.614: E/ActivityThread(3265):     at android.app.ActivityThread$PackageInfo$ReceiverDispatcher.<init>(ActivityThread.java:939)
05-18 16:58:32.614: E/ActivityThread(3265):     at android.app.ActivityThread$PackageInfo.getReceiverDispatcher(ActivityThread.java:734)
05-18 16:58:32.614: E/ActivityThread(3265):     at android.app.ContextImpl.registerReceiverInternal(ContextImpl.java:791)
05-18 16:58:32.614: E/ActivityThread(3265):     at android.app.ContextImpl.registerReceiver(ContextImpl.java:778)
05-18 16:58:32.614: E/ActivityThread(3265):     at android.app.ContextImpl.registerReceiver(ContextImpl.java:772)
05-18 16:58:32.614: E/ActivityThread(3265):     at android.content.ContextWrapper.registerReceiver(ContextWrapper.java:318)
05-18 16:58:32.614: E/ActivityThread(3265):     at com.deepthi.blockmycalls.BlockMyCallsActivity.onCheckedChanged(BlockMyCallsActivity.java:155)
05-18 16:58:32.614: E/ActivityThread(3265):     at android.widget.CompoundButton.setChecked(CompoundButton.java:124)
05-18 16:58:32.614: E/ActivityThread(3265):     at android.widget.CompoundButton.toggle(CompoundButton.java:86)
05-18 16:58:32.614: E/ActivityThread(3265):     at android.widget.CompoundButton.performClick(CompoundButton.java:98)
05-18 16:58:32.614: E/ActivityThread(3265):     at android.view.View$PerformClick.run(View.java:8816)
05-18 16:58:32.614: E/ActivityThread(3265):     at android.os.Handler.handleCallback(Handler.java:587)
05-18 16:58:32.614: E/ActivityThread(3265):     at android.os.Handler.dispatchMessage(Handler.java:92)
05-18 16:58:32.614: E/ActivityThread(3265):     at android.os.Looper.loop(Looper.java:123)
05-18 16:58:32.614: E/ActivityThread(3265):     at android.app.ActivityThread.main(ActivityThread.java:4627)
05-18 16:58:32.614: E/ActivityThread(3265):     at java.lang.reflect.Method.invokeNative(Native Method)
05-18 16:58:32.614: E/ActivityThread(3265):     at java.lang.reflect.Method.invoke(Method.java:521)
05-18 16:58:32.614: E/ActivityThread(3265):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-18 16:58:32.614: E/ActivityThread(3265):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-18 16:58:32.614: E/ActivityThread(3265):     at dalvik.system.NativeStart.main(Native Method)
05-18 16:58:32.614: E/ActivityThread(3265): Activity com.deepthi.blockmycalls.BlockMyCallsActivity has leaked IntentReceiver com.deepthi.blockmycalls.BlockMyCallsActivity$1@44efa3a8 that was originally registered here. Are you missing a call to unregisterReceiver()?
05-18 16:58:32.614: E/ActivityThread(3265): android.app.IntentReceiverLeaked: Activity com.deepthi.blockmycalls.BlockMyCallsActivity has leaked IntentReceiver com.deepthi.blockmycalls.BlockMyCallsActivity$1@44efa3a8 that was originally registered here. Are you missing a call to unregisterReceiver()?
05-18 16:58:32.614: E/ActivityThread(3265):     at android.app.ActivityThread$PackageInfo$ReceiverDispatcher.<init>(ActivityThread.java:939)
05-18 16:58:32.614: E/ActivityThread(3265):     at android.app.ActivityThread$PackageInfo.getReceiverDispatcher(ActivityThread.java:734)
05-18 16:58:32.614: E/ActivityThread(3265):     at android.app.ContextImpl.registerReceiverInternal(ContextImpl.java:791)
05-18 16:58:32.614: E/ActivityThread(3265):     at android.app.ContextImpl.registerReceiver(ContextImpl.java:778)
05-18 16:58:32.614: E/ActivityThread(3265):     at android.app.ContextImpl.registerReceiver(ContextImpl.java:772)
05-18 16:58:32.614: E/ActivityThread(3265):     at android.content.ContextWrapper.registerReceiver(ContextWrapper.java:318)
05-18 16:58:32.614: E/ActivityThread(3265):     at com.deepthi.blockmycalls.BlockMyCallsActivity.onCheckedChanged(BlockMyCallsActivity.java:155)
05-18 16:58:32.614: E/ActivityThread(3265):     at android.widget.CompoundButton.setChecked(CompoundButton.java:124)
05-18 16:58:32.614: E/ActivityThread(3265):     at android.widget.CompoundButton.toggle(CompoundButton.java:86)
05-18 16:58:32.614: E/ActivityThread(3265):     at android.widget.CompoundButton.performClick(CompoundButton.java:98)
05-18 16:58:32.614: E/ActivityThread(3265):     at android.view.View$PerformClick.run(View.java:8816)
05-18 16:58:32.614: E/ActivityThread(3265):     at android.os.Handler.handleCallback(Handler.java:587)
05-18 16:58:32.614: E/ActivityThread(3265):     at android.os.Handler.dispatchMessage(Handler.java:92)
05-18 16:58:32.614: E/ActivityThread(3265):     at android.os.Looper.loop(Looper.java:123)
05-18 16:58:32.614: E/ActivityThread(3265):     at android.app.ActivityThread.main(ActivityThread.java:4627)
05-18 16:58:32.614: E/ActivityThread(3265):     at java.lang.reflect.Method.invokeNative(Native Method)
05-18 16:58:32.614: E/ActivityThread(3265):     at java.lang.reflect.Method.invoke(Method.java:521)
05-18 16:58:32.614: E/ActivityThread(3265):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-18 16:58:32.614: E/ActivityThread(3265):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-18 16:58:32.614: E/ActivityThread(3265):     at dalvik.system.NativeStart.main(Native Method)
05-18 16:59:55.812: D/dalvikvm(3265): GC_EXPLICIT freed 4770 objects / 267120 bytes in 592ms 
```

我的代码：

```
 @Override
    public void onCheckedChanged(CompoundButton arg0, boolean arg1) {
        // TODO Auto-generated method stub

         CallBlocker =new BroadcastReceiver()
         {
           @Override
            public void onReceive(Context context, Intent intent) {

                Bundle extra=intent.getExtras();//new
                telephonyManager = (TelephonyManager)context.getSystemService(Context.TELEPHONY_SERVICE);
                if(extra!=null)//new=== getting the blocked number
                {
                     state=extra.getString(telephonyManager.EXTRA_STATE);

                    if(state.equals(telephonyManager.EXTRA_STATE_RINGING))
                    {
                        number=extra.getString(telephonyManager.EXTRA_INCOMING_NUMBER);
                        Log.w("NUMBER",number);
                    }
                }
                Class c = null;
                try {
                        c = Class.forName(telephonyManager.getClass().getName());
                } catch (ClassNotFoundException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                }
               Method m = null;
                try {
                        m = c.getDeclaredMethod("getITelephony");
                } catch (SecurityException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                } catch (NoSuchMethodException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                }
        m.setAccessible(true);
        try {
            telephonyService = (ITelephony)m.invoke(telephonyManager);
        } catch (IllegalArgumentException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (InvocationTargetException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        telephonyManager.listen(new MyPhoneStateListener(), PhoneStateListener.LISTEN_CALL_STATE);
        }//onReceive()

         class MyPhoneStateListener extends PhoneStateListener
            {
                public void onCallStateChanged(int state, String incomingNumber)
                {

                    switch (state)
                    {
                        case TelephonyManager.CALL_STATE_RINGING:
                           if (true) // if incomingNumber need to be blocked
                           {
                               if(Enable_chkbox.isChecked())
                               {
                                try {
                                 end_call=telephonyService.endCall();
                                 if(end_call==true)
                                 {                          
                                     android.telephony.SmsManager sms = android.telephony.SmsManager.getDefault();
                                     sms.sendTextMessage(number, null, SMS, null, null);
                                 }
                                 Toast.makeText(getApplicationContext(),"Enabled", Toast.LENGTH_LONG).show();
                                } catch (Exception e) {
                                // TODO Auto-generated catch block
                                e.printStackTrace();
                                   }//try catch
                             }//if chkbox enabled
                           }
                           break;
                        default:
                           break;
                     }
                  }
                }

            };//Broadcast receiver
            IntentFilter filter= new IntentFilter("android.intent.action.PHONE_STATE");
            registerReceiver(CallBlocker, filter);

    } 
```

注销：

```
@Override
protected void onDestroy() {
    // TODO Auto-generated method stub
    super.onDestroy();
    unregisterReceiver(CallBlocker);
    this.finish();
        Toast.makeText(getApplicationContext(), "text", Toast.LENGTH_LONG).show();
        } 
```

除非我按后退按钮，否则一切正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:52:14.903

您没有显示您的代码，所以这是一个猜测。

线索在这里：

05-18 16:58:32.614: E/ActivityThread(3265): Activity com.deepthi.blockmycalls.BlockMyCallsActivity 泄露了最初在此处注册的 IntentReceiver com.deepthi.blockmycalls.BlockMyCallsActivity$1@44efa3a8。您是否错过了对 unregisterReceiver() 的调用？

当您的活动结束时，您是否正在注销您的接收器？

```
@Override
protected void onPause(){

    super.onPause();

    if (myMessageReceiver != null){
        unregisterReceiver(myMessageReceiver );
        myMessageReceiver = null;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T11:51:58.190

是的，您有一个不释放/取消注册的资源需要更多代码来具体说明

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T11:53:54.630

如果您可以发布您的代码，也许会更容易为您提供帮助，但您似乎注册了您的接收器两次。

# c#-4.0 - 无法通过代码 C# 获取 X509Certificate2 证书

> ID：10652073
> 
> 赞同：3
> 
> 时间：2012-05-18T11:47:00.503
> 
> 标签：c#-4.0, x509certificate2

我想从我的商店中找到证书，但使用以下代码我无法获得证书。它总是返回 null。

![通过指纹获取证书的代码](../Images/46c9d8b20304eff8b8ca67fbcc04dd31.png)

我的代码有什么问题？

**更新：**

我通过探索存储对象复制了我的证书指纹并将其与我的指纹字符串进行比较，它返回 false！我认为在 VS2010 IDE 中解释字符串的问题或复制粘贴问题你可以在下图中看到。因此，它应该忽略列表中的证书。有没有人遇到过这种类型的问题？

![在此处输入图像描述](../Images/08cd8cbcc1252ec266ecc9a543c06199.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T12:01:28.670

那么证书集合是空的，因为没有带有该指纹的证书。查看：

*   证书存在于您当前的用户中

*   证书存储在个人文件夹中

尝试：

*   使用 mmc 验证上述事情

*   使用`X509Store store = new X509Store(StoreName.Root, StoreLocation.CurrentUser);`

**编辑：**

以下是否返回任何有用的信息：

```
X509Certificate2Collection col = store.Certificates;

foreach (var currCert in col)
{
     var currThumbprint = currCert.Thumbprint;
     if (thumbprint.ToUpperInvariant() == currThumbprint)
     {
         x509Certificate2= currCert;
         break;
     }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T10:21:56.040

您的指纹中可能有不可见/零长度的字符，尤其是在开头或结尾处。测量您提供的指纹长度（“35ED..”）。它应该比出现的要大。

# php - php函数中多字符串的输出

> ID：10652080
> 
> 赞同：-1
> 
> 时间：2012-05-18T11:47:39.853
> 
> 标签：php, string, function

我想输出这三个字符串，我使用这段代码

```
function sectionString()
{ 

$section_a = 'Khan live in india<br/>';

$section_b = 'Khan live in Australia<br/>';

$section_c = 'Khan live in Pakistan';

return $section_a

return $section_b

return $section_c

turn $section_c
}
echo sectionString(); 
```

在这里它输出像这样**的汗生活在印度**，但我想像这样输出

**汗住在印度**

**汗住在澳大利亚**

**汗住在巴基斯坦**

我应该在这段代码中修改什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:50:43.663

您不了解正确使用`return`. return 将结束您的函数，并且函数内除了该行代码之外的任何内容都将被执行。[在这里](http://php.net/manual/en/function.return.php)阅读更多

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T11:51:49.247

一旦您的代码达到第一个“返回”它，嗯..返回，这意味着该函数将不再处理。将所有三个字符串放在一个变量中并返回它。

一个数组（更好）或只是一个带中断的字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T11:53:01.997

在 PHP 中，在函数执行期间遇到的第一个“return”将停止函数的执行并返回其关联值。

如果你想返回几个部分，你可以例如代码

```
function sectionStrings() {
    $section_a = 'Khan live in india';
    $section_b = 'Khan live in Australia';
    $section_c = 'Khan live in Pakistan';
    $output = array($section_a, $section_b, $section_c);
    return $output;
}

echo implode("<br>", sectionStrings()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T11:54:29.310

您应该将此字符串连接成一个：

```
function sectionString()
{ 

$section_a = 'Khan live in india<br/>';

$section_b = 'Khan live in Australia<br/>';

$section_c = 'Khan live in Pakistan';

return $section_a.$section_b.$section_c;
}
echo sectionString(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T11:54:30.217

你必须这样做： -

```
function sectionString()
{ 
$a= array();
$section_a = 'Khan live in india<br/>';

$section_b = 'Khan live in Australia<br/>';

$section_c = 'Khan live in Pakistan';

$a[]=$section_a;

$a[]=$section_b;

$a[]= $section_c;
return $a;
}
print_r(sectionString()); 
```

# ruby-on-rails - 错误：link_to 删除重定向以显示操作，而不是在 rails 3.1.1 中销毁操作

> ID：10652085
> 
> 赞同：0
> 
> 时间：2012-05-18T11:47:49.080
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

link_to delete 重定向以显示操作而不是在 rails 3.1.1 中破坏操作

这是我的代码

看法：-

> :delete, :confirm => "你确定..!", :alt => "删除", :title => "删除" %>

控制器：-

> def destroy @industry = Industry.find(params[:id]) if @industry.destroy flash[:notice] = "已成功删除名称为 #{@industry.name} 的行业" else flash[:error] = "发生错误正在删除行业，请重试。” 结束重定向到行业路径
> 结束

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T12:14:07.740

您是否加载了默认的 JavaScript 库？

如果没有，这就是原因 - 您不能通过浏览器发送 DELETE 请求，因为它不受支持 - 所以当单击删除链接时，Rails 会自动创建一个表单并以这种方式发送。但是它是用 JS 来做的，所以如果它没有加载，你什么也得不到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T11:36:48.023

检查以下代码，如果路线有

```
DELETE  /industry/:id   destroy . 
```

然后

```
<%= link_to 'Destroy', industry, confirm: 'Are you sure?',
                                     method: :delete %> 
```

# deployment - 生成 NAnt 脚本的文档

> ID：10652086
> 
> 赞同：2
> 
> 时间：2012-05-18T11:47:50.330
> 
> 标签：deployment, build, nant

我正在编写有关我们使用的构建和部署脚本的文档。我希望有一个类似于 Sandcastle 或 ndoc 但用于 NAnt 脚本的工具。我已经搜索过这个，但我得到的结果告诉我如何使用 NAnt 来记录 C# 或 VB 代码。

我现在可能已经编写了很多文档，但是如果我们有一个可以重新生成文档的工具，那么保持我们的文档最新会带来一些痛苦！

有任何想法吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T12:39:10.183

据我所知，不存在特殊的 nant 文档工具。您可以使用 XSL 样式表将构建脚本的目标映射到 HTML 并将`comment(node)`函数用作文档。

# javascript - 像 500px.com 或 Lightbox 这样的图像网格。com？

> ID：10652087
> 
> 赞同：5
> 
> 时间：2012-05-18T11:47:50.577
> 
> 标签：javascript, jquery, html, image, jquery-ui

[一直在尝试实现与500px.com](http://500px.com)和[lightbox.com](http://lightbox.com/spotlight)上类似的图像网格，但没有成功。

我想知道那个网格类型叫什么，是否有任何解决方案可以学习/弄清楚如何创建类似的东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-18T12:18:16.287

我认为 Masonry 是您正在寻找的，但是您有几个不错的 jquery 插件。

在这里查看一些：

[http://masonry.desandro.com/](http://masonry.desandro.com/)

[http://isotope.metafizzy.co/](http://isotope.metafizzy.co/)

[http://css-tricks.com/seamless-responsive-photo-grid/](http://css-tricks.com/seamless-responsive-photo-grid/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T20:04:43.777

这种风格最直接的 jquery 库可能是 Lightbox2：

[http://lokeshdhakar.com/projects/lightbox2/](http://lokeshdhakar.com/projects/lightbox2/)

# c - 在C中的数组中交换对象

> ID：10652089
> 
> 赞同：-4
> 
> 时间：2012-05-18T11:48:12.000
> 
> 标签：c

我试图搜索这个，因为我认为它必须在这里，但我无法弄清楚。

无论如何，如果我在 C 中有一个结构数组，例如：

```
struct structName array[]; 
```

我想交换 array[i] 和 array[i+1] 的值我该怎么做？我在其他地方看到过 int array[] 但由于指针，它似乎不能正确应用。有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T11:49:15.010

就像你交换任何东西一样：

```
struct structName tmp = array[i];
array[i] = array[i+1];
array[i+1] = tmp; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T11:52:36.597

```
1.Copy structure #1 to a temporary structure variable;
2.Copy structure #1 to structure #2;
3.Copy the temporary structure variable into structure #2. 
```

需要注意的是，必须一次复制一个结构的每个成员。如果结构中有嵌套结构，则必须以相同的方式复制这些结构。这使得这个过程更加复杂，也更加乏味。

# python - 在单元测试中模拟时间的流逝

> ID：10652097
> 
> 赞同：20
> 
> 时间：2012-05-18T11:48:38.400
> 
> 标签：python, testing, mocking, integration-testing, celery

我已经为客户建立了一个付费的 CMS + 发票系统，我需要对我的测试进行更严格的测试。

我将所有数据保存在 Django ORM 中，并有一堆以不同时间间隔运行的 Celery 任务，以确保在用户不支付发票时发送新发票和发票提醒并切断访问权限。

例如，我希望能够运行以下测试：

1.  创建一个新用户并为 X 天访问该站点生成发票

2.  模拟 X + 1 天的过去，并运行我在 Celery 中设置的所有任务。

3.  检查是否已向用户开具其他 X 天的新发票。

到目前为止，我提出的 KISS 方法是在单独的机器上进行所有测试，并在操作系统级别实际操作日期/时间。所以测试脚本会：

1.  将系统日期设置为第 1 天

2.  创建一个新用户并为 X 天的访问生成第一张发票

3.  提前系统日期 1 天。运行我所有的芹菜任务。重复直到 X + 1 天“过去”

4.  检查是否已开具新发票

这有点笨拙，但我认为它可能会起作用。关于如何完成它的任何其他想法？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-18T12:29:12.897

您可以使用[mock](http://www.voidspace.org.uk/python/mock/)更改用于获取时间的函数的返回值（`datetime.datetime.now`例如）。

有多种方法可以做到这一点（请参阅模拟文档），但这里有一种：

```
import unittest
import datetime
from mock import patch

class SomeTestCase(unittest.TestCase):
    def setUp(self):
        self.time = datetime.datetime(2012, 5, 18)
        class fakedatetime(datetime.datetime):
            @classmethod
            def now(cls):
                return self.time
        patcher = patch('datetime.datetime', fakedatetime)
        self.addCleanup(patcher.stop)
        patcher.start()

    def test_something(self):
        self.assertEqual(datetime.datetime.now(), datetime.datetime(2012, 5, 18))
        self.time = datetime.datetime(2012, 5, 20)
        self.assertEqual(datetime.datetime.now(), datetime.datetime(2012, 5, 20)) 
```

因为我们不能直接替换`datetime.datetime.now`，所以我们创建了一个假的 datetime 类，它以相同的方式执行所有操作，除了在调用 now 时返回一个常量值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-18T13:28:41.980

在不使用特殊的模拟库的情况下，我建议准备代码以处于模拟模式（可能通过全局变量）。在模拟模式下，您可以调用模拟时间函数，而不是调用正常的时间函数（如 time.time() 或其他），它会在特殊情况下返回您需要的任何内容。

我会否决更改系统时间。这看起来不像是单元测试，而是像功能测试，因为它不能与该机器上的其他任何东西并行完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-12T15:35:05.410

您还可以查看`freezegun`模块。Github - [https://github.com/spulec/freezegun](https://github.com/spulec/freezegun)

从他们的文档

```
from freezegun import freeze_time
import datetime

@freeze_time("2012-01-14")
def test():
    assert datetime.datetime.now() == datetime.datetime(2012, 1, 14) 
```

# javascript - 使用Jquery比较两个日期N次

> ID：10652102
> 
> 赞同：1
> 
> 时间：2012-05-18T11:49:02.793
> 
> 标签：javascript, jquery, html

在这里，使用了一个名为 to[0] 的字段...但实际上我将它们“N”次使用索引中的 +1（to[1]、to[2] 等）...由于克隆而生成。 .. 同样适用于 [0]。from[0] 是开始日期，to[0] 是结束日期。我正在比较这两个日期的结束日期不小于开始日期。这里的前 2 个代码块工作正常，因为每个代码块都是一行。但是，每当我尝试为“N”行制作它时，它就不起作用，即最后一个代码块不起作用。

我没有办法选择这些元素，因为名称是动态生成的......

jQuery代码是：

```
 $(document).ready(function() {
                $("input[name='to[0]']").blur( function() {
                    if ($("input[name='to[0]']").val() != 'To' && $("input[name='from[0]']").val() != 'From') {
                        var a1 = $("input[name='from[0]']").val();
                        var b1 = $("input[name='to[0]']").val();
                        alert(b1);alert(a1);
                        if (a1 > b1) {
                                    alert("Invalid Date Range!\nStart Date cannot be after End Date!");
                        }
                    }
                });
                $("input[name='to[1]']").blur( function() {
                    if ($("input[name='to[1]']").val() != 'To' && $("input[name='from[1]']").val() != 'From') {
                        var a1 = $("input[name='from[1]']").val();
                        var b1 = $("input[name='to[1]']").val();
                        alert(b1);alert(a1);
                        if (a1 > b1) {
                                    alert("Invalid Date Range!\nStart Date cannot be after End Date!");
                        }
                    }
                });
                $("td.date").click( function() {
                    var n = $('#table2 tbody>tr').length - 2;
                    var r=2;
                    $("td.date>input:first").next().blur( function() {
                        while(r<n) {
                            if ($("input[name='to[r]']").val() != 'To' && $("input[name='from[r]']").val() != 'From') {
                                var a1 = $("input[name='from[r]']").val();
                                var b1 = $("input[name='to[r]']").val();
                                alert(b1);alert(a1);
                                if (a1 > b1) {
                                            alert("Invalid Date Range!\nStart Date cannot be after End Date!");
                                }
                            }
                            r++;
                        }
                    });
                }); 
```

HTML是..

```
 <td width="15%" align="center" >
            <input class="f" style="width:70px" type="text" size="12" name="from[0]"  value="From" readonly="readonly"  />
            <a class="datepicker" href="#"><img alt="Pick a date" src="js/date.gif" border="0" width="17" height="16" /></a>
         </td>
         <td width="15%" align="center" >
            <input style="width:70px" class="f" type="text" size="12" name="to[0]" value="To" readonly="readonly" />
              <a class="datepicker" href="#"><img alt="Pick a date" src="js/date.gif" border="0" width="17" height="16" /></a>
         </td>

  <td width="15%" align="center" class="date" >
            <input style="width:70px" type="text" size="12" name="from[1]"  value="From" readonly="readonly"  />
            <a class="datepicker" href="#"><img alt="Pick a date" src="js/date.gif" border="0" width="17" height="16" /></a>
         </td>
         <td width="15%" align="center" class="date" >
            <input style="width:70px" class="f" type="text" size="12" name="to[1]" value="To" readonly="readonly" />
              <a class="datepicker" href="#"><img alt="Pick a date" src="js/date.gif" border="0" width="17" height="16"  /></a>
         </td> 
```

包含 td for from[1] 和 to[1] 的最后一行被克隆，在最后一行被克隆之后......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T11:53:58.763

您需要将计数器作为选择器的一部分，但您将其硬编码为`r`. 试试这个：

```
while(r<n) {
    if ($('input[name="to\\[' + r + '\\]"]').val() != 'To' && $('input[name="from\\[' + r + '\\]"]').val() != 'From') {
        var a1 = $('input[name="from\\[' + r + '\\]"]').val();
        var b1 = $('input[name="to\\[' + r + '\\]"]').val();
        alert(b1);alert(a1);
        if (a1 > b1) {
            alert("Invalid Date Range!\nStart Date cannot be after End Date!");
        }
    }
    r++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T12:03:17.583

只需更改您的选择器，然后您就不需要复制代码。试试这个：

```
//^= means name starts with, so we are selecting all inputs with that matcher
$("input[name^='to['").blur( function() {
    //first we get the name in a variable (just for shortness)
    var thisName = $(this).prop("name");
    //we then get the numbered index, by splitting the id of the current item
    var index = thisName.substring(thisName.indexOf("[") + 1).replace("]", "");
    //based on the index, we now can get the corresponding "from" field
    var correspondingFromField = $("input[name='from[" + index + "]']");
    //now we just do your logic:
    if ($(this).val() != 'To' && correspondingFromField.val() != 'From') {
        var a1 = correspondingFromField.val();
        var b1 = $(this).val();
        alert(b1);alert(a1);
        if (a1 > b1) {
            alert("Invalid Date Range!\nStart Date cannot be after End Date!");
        }
    }
}); 
```

# java - 如何从java类的服务层函数再次调用ajax来显示页码状态？

> ID：10652103
> 
> 赞同：1
> 
> 时间：2012-05-18T11:49:02.997
> 
> 标签：java, javascript, ajax

代码：

```
function importData(pageForm, menuNavigationId, pageId) 
{
showMessageHtml('messageDiv', "Importing data ........");
var url = getURLString(pageForm);
var urlstr = "importTemplate.do?userAction=importData&"
        + url.substring(0, url.length - 1);
ajaxFunction();
xmlHttp.onreadystatechange = function() {
    if (xmlHttp.readyState == 4) {
        if (xmlHttp.status == 200) {
            document.getElementById('messageDiv').style.display = 'none';
            if (xmlHttp.responseText == "success") {
                alert("Data file read and saved successfully.");
            } else {
                alert("Error while Importing data: " + xmlHttp.responseText);
            }
            returnToPageUrl("page?pageId=" + pageId
                    + "&opType=entry&modType=add&menuNavigationId="
                    + menuNavigationId + "&menuPageId=" + pageId);
        }
    }
}
xmlHttp.open("POST", urlstr, true);
xmlHttp.setRequestHeader("Content-Type", "application/plain");
xmlHttp.send(null);
} 
```

代替“导入数据............”我想传递一个显示页码的字符串......你能帮我如何再次调用 ajax 以获取页面状态。我从服务层函数传递这个字符串........需要尽快回复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T11:53:07.487

使用 setTimeout（方法，频率）；

其中方法是您的 Ajax 调用，频率是您想要再次调用 ajax 方法的时间段。

编辑根据评论：

假设您的 ajax 调用将调用一个 servlet，然后在您的 servlet 中获取响应的输出流并为您写入数据：

```
httpServletResponse.getOutputStream(10); 
```

然后在您的 javascript 中，您可以像这样访问它：

```
xmlHttp.responseText 
```

只需将其显示在您的页面中即可。

# symfony - Symfony2 监听器与 DataFixtures

> ID：10652109
> 
> 赞同：2
> 
> 时间：2012-05-18T11:49:29.400
> 
> 标签：symfony, listener, fixtures

我已将以下侦听器注册为服务。这将保存登录用户。它完美地工作。保存实体后，用户 ID 位于 createdBy 和 updatedBy 中。好的一个小问题：命令“php应用程序/控制台学说：fixtures：load”抛出错误“调用非对象上的成员函数getUser（）。这是可以理解的。只是现在我每次都必须禁用之前的服务？你有其他解决方案吗？

```
类 UserListener 实现 EventSubscriber
{
    受保护的$容器；

    公共函数 __construct(ContainerInterface $container)
    {
        $this->container = $container;
    }

    公共函数 getSubscribedEvents()
    {
        返回数组（
            事件::prePersist,
            事件::更新前
        );
    }

    公共函数 prePersist(LifecycleEventArgs $args)
    {
        $entity = $args->getEntity();

        if ($entity instanceof Post) {

            $user = $this->container->get('security.context')->getToken()->getUser();

            if (!is_object($user) || !$user instanceof User) {
                抛出新的 AccessDeniedException();
            }

            $entity->setCreatedBy($user);
            $entity->setUpdatedBy($user);
        }
    }

    /**
     * @param PreUpdateEventArgs $args
     */
    公共函数 preUpdate(PreUpdateEventArgs $args)
    {
        $entity = $args->getEntity();

        $em = $args->getEntityManager();

        if ($entity instanceof Post) {

            $user = $this->container->get('security.context')->getToken()->getUser();

            if (!is_object($user) || !$user instanceof User) {
                抛出新的 AccessDeniedException();
            }

            $entity->setUpdatedBy($user);

            $uow = $em->getUnitOfWork();
            $meta = $em->getClassMetadata(get_class($entity));
            $uow->recomputeSingleEntityChangeSet($meta, $entity);
        }
    }
}

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T14:18:19.743

当您调用命令 load-fixtures 时，您没有登录。也许`$this->container->get('security.context')->getToken()`返回 null ？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-12T09:01:47.823

我有一个类似的听众，并试图保存一个（模拟）实体（在你的例子中是“发布”）。当然，从控制台启动命令时我没有登录。

我向监听器添加了一个条件：

```
if ($entity instanceof Post) {
    if (null !== $entity->getUser() {
        return;
    }
} 
```

现在我可以在我的装置内的 Post 实体上设置一个（模拟）用户：

```
$user = $em->getReference('Application\Sonata\UserBundle\Entity\User', 1);
$post = new Post();
$post->setUser($user); 
```

仍然不确定在实体侦听器中设置用户是否是一种好习惯。

我想目前大多数人会建议使用 ValueObject 来表示“Post”，或者至少是一个需要设置例如“名称”和“用户”的构造函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-17T20:12:07.313

我的最终代码（Symfony 2.6）：

1) 听众：

```
<?php

namespace AppBundle\Listener;

use AppBundle\Entity\Post;
use AppBundle\Entity\Comment;

use Doctrine\ORM\Event\LifecycleEventArgs;
use Symfony\Component\Security\Core\Authentication\Token\Storage\TokenStorageInterface;

/**
 * Class BlameableListener
 *
 * @package AppBundle\Listener
 */
class BlameableListener
{
    private $tokenStorage;

    public function __construct(TokenStorageInterface $tokenStorage)
    {
        $this->tokenStorage = $tokenStorage;
    }

    public function prePersist(LifeCycleEventArgs $args)
    {
        $entity = $args->getEntity();

        if ($entity instanceof Post || $entity instanceof Comment) {
            // is authentication information available?
            if (null !== $this->tokenStorage->getToken()) {
                // get User
                $user = $this->tokenStorage->getToken()->getUser();
                if (is_object($user)) {
                    $entity->setAuthorEmail($user->getEmail());
                }
            }
        }
    }
} 
```

2) 配置为服务

```
services:
    app.blameable.listener:
        class: AppBundle\Listener\BlameableListener
        arguments:
            - "@security.token_storage"
        tags:
            - { name: doctrine.event_listener, event: prePersist } 
```

# javascript - 如何在更新时从 mongodb 集合中删除字段？

> ID：10652110
> 
> 赞同：1
> 
> 时间：2012-05-18T11:49:32.153
> 
> 标签：javascript, node.js, mongodb

我知道如何从集合中删除字段：

```
db.example.update({},{$unset: {field_to_del:1}},false,true) 
```

但是我想在更新文档时删除长度为零的所有文档字段。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-05-18T14:21:48.620

我认为您可以采用以下两种方式之一：

1）在您的应用程序中了解哪些字段已被删除，并在更新时将其删除，就像您在问题中所做的那样。

2）将其编写为批处理作业。这可能满足您的需要：它强制删除集合中任何文档中的任何空字段（即空字符串值）（在这种情况下为集合'so'）

```
var updateEmptyField = function(o){ 
   for (var f in o){ 
      if (o[f] === ''){ 
         eval ("db.so.update({},{$unset: {" + f + ":1}},false,true);");
      }
   }
}

db.so.find().forEach(updateEmptyField); 
```

您需要在此处使用 eval 来使用保存字段名称的变量。

# wordpress - 降级 wordpress 插件以使用旧版本的 php

> ID：10652114
> 
> 赞同：0
> 
> 时间：2012-05-18T11:49:48.347
> 
> 标签：wordpress, background-image

我在 wordpress 中开发了一个网站并使用了几个插件。其中一个插件是[http://wordpress.org/extend/plugins/background-manager/](http://wordpress.org/extend/plugins/background-manager/)

在我的机器上一切正常。但是当我将它上传到客户端服务器时。由于PHP版本较低，整个网站都卡住了。这个插件需要`PHP 5.3`并且在我们拥有的服务器上`PHP 5.2`。由于它是一个共享服务器，我们无法升级它的 PHP。

`PHP 5.3`然后我查看了它使用功能的这个插件的代码`namespaces`。有没有办法降级这个插件可以使用`PHP 5.2`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T02:59:16.290

这是一个非常棘手的问题，当然，将旧代码用于插件是非常非常糟糕的做法，因为它们可能已经修复了安全漏洞或其他严重问题。将站点移动到具有更新 PHP 的服务器会更好。

但是，在给出重要警告后，您可以浏览到插件存储库中的 tags 目录并提取您想要的先前版本的文件。插件历史是公开的并且始终保持不变。

例如，对于您提到的插件，您可以访问插件存储库的 SVN 部分：http: [//plugins.svn.wordpress.org/background-manager/](http://plugins.svn.wordpress.org/background-manager/)

您会在“tags”文件夹下找到以前的版本，以它们的版本命名。

# wampserver - wamp 服务器的黄色图标

> ID：10652115
> 
> 赞同：6
> 
> 时间：2012-05-18T11:49:50.663
> 
> 标签：wampserver

wamp服务器的图标是黄色的，我试过了：

1.通过wamp托盘图标打开文件httpd.conf

寻找：

```
# onlineoffline tag - don't remove
Order Deny,Allow
Deny from all
Allow from 127.0.0.1 
```

改成：

```
# onlineoffline tag - don't remove
Order Deny,Allow
Allow from all 
```

没变！

2.左键点击wamp图标>上线

没有变化，仍然在线放黄色图标->本地主机不起作用

3.apache-->服务-->启动服务-->不工作
4.apache-->服务-->测试80端口-->

您实际使用的端口：服务器：Microsoft

我不知道该怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T00:40:29.307

好的，我想通了。发生的事情是 Skype 阻止了端口 80。因此，您必须执行以下操作：

1.  右键单击Skype。
2.  单击退出并允许它退出。
3.  左键单击 Wamp 服务器图标
4.  单击启动所​​有服务。
5.  而已！如果您想使用Skype，请执行所有步骤（1-4），然后再次启动Skype。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-08T17:58:18.763

这是我自己的问题并解决了。单击开始并键入 servicesp-> 打开它并停止它（在 r8 端）。单击黄色图标并获得 apache--> 服务--> 测试端口 80--> 如果可用，则再次转到 apache--> 服务和--> 安装服务

通过单击 wamp 图标重新启动所有服务，然后您会发现绿色

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-01T15:01:09.527

我确实遇到了这种复杂情况，我确实尝试了所有使 wamp 服务器变为绿色的解决方案，但它没有工作，一切都没有，但是，当我点击 apache 上的测试端口 80 时，它会使用你的端口 80通过 http/api2.0 。从这里我从网站 [http://theandystratton.com/2012/wampapache-broken-from-microsoft-httpapi-2-0-using-port-80](http://theandystratton.com/2012/wampapache-broken-from-microsoft-httpapi-2-0-using-port-80)的贡献者那里找到了答案 ，这是解决方案：

关闭 Microsoft HTTP/API 2.0

1.  打开控制面板（开始 > 控制面板）

2.  将视图设置从类别更改为小图标或大图标

3.  打开管理工具

4.  开放服务

5.  在列表中找到“Web 部署服务代理”

6.  右键单击并选择属性

7.  单击停止

8.  将它的启动值更改为“手动”</p>

9.  点击应用/确定以保存更改

10.  转到 WAMP 并重新启动所有服务

这应该这样做。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-11T20:40:12.967

我在 VirtualBox 上发现了一个修复了我的问题。由于某种原因，WAMP 安装程序从未安装过该服务。要修复它，左键单击任务栏区域中的黄色 wamp 图标，选择 Apache>>Service>>Install Service，然后按照 DOS 屏幕中的说明进行操作。

接下来回到 Apache>>Service>> 并选择“Start/Resume Service”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T08:28:17.097

尝试这个，

1.  左键单击 wamp 图标，转到 apache，然后测试端口 80。
2.  如果它显示 apache，那么它工作正常，如果它显示 MicrosoftApi 等，然后转到服务 --> 搜索 web 部署代理服务并停止它。
3.  重新启动 wamp，希望它对你有用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-25T18:22:44.247

尝试安装**WAMP 2.1** 我也尝试了所有方法，但安装 WAMP 2.1，避免使用 2.2，

[http://sourceforge.net/projects/wampserver/files/WampServer%202/WampServer%202.1/](http://sourceforge.net/projects/wampserver/files/WampServer%202/WampServer%202.1/)

有一个 gr8 时间

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-03-15T12:43:30.023

有很多模糊的事情会导致这种情况，在我的情况下，我启用了 PHP zip 扩展，它导致黄色图标并且服务没有启动。由于服务未启动，它不会让我禁用扩展，必须手动编辑 php.ini 并将其注释掉。然后wamp开始很好。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-12-18T04:57:53.207

以下是找出 wampserver 错误的步骤

1.  转到控制面板-> 事件查看器
2.  在“管理事件摘要”中找到“Apache 服务”，然后双击它
3.  查看错误并修复它们。

希望这有帮助！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-06-17T20:06:05.693

重新安装 WAMP 并尝试在关闭机器之前关闭 WAMP，并且不要在关闭时强制停止，如果 WAMP 已打开，您以后将不会处理此问题。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-12-13T17:58:09.293

我在 wamp 设置中单击了“允许 VirtualHost 本地 ip 不是 127.*”。

它与（绿色托盘图标）一起工作正常

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-03-19T22:20:55.560

您可以通过像这样重新启动apache服务来简单地修复它

**第一步：安装服务**

**第 2 步：**然后再次转到相同的菜单（如图所示）并选择**“启动/恢复服务”**

[![在此处输入图像描述](../Images/99b3bf828157ca41f67a280af759fc74.png)](https://i.stack.imgur.com/7MGaz.png)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-09-09T07:29:06.430

**如何解决 WAMP-SERVER 的任何问题：**

转到**控制面板-> 事件查看器**在**“管理事件摘要**”中 找到**“Apache 服务”**，然后双击它。

 ****查看错误并修复它们。**

我的错误是：MySQL 没有工作，mariaDB 阻塞了端口 3306。我不得不去服务并结束服务。之后，我从左键菜单（wamp 图标）再次安装了 MySQL 服务。然后我启动了所有服务，它又是绿色的 :)

干杯@Tin Nguyen

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-06-11T00:03:02.763

我的解决方案是使用不同的端口而不是 80。

1.  左键单击“W”图标
2.  选择 Apache > 使用 80 以外的端口
3.  8080 对我来说很好用

祝你好运！

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-07-14T16:01:29.657

就我而言，我点击黄色图标，然后点击启动所有服务，试试它可能会对你有所帮助。

享受您的技术之旅；）

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2015-11-04T12:15:18.827

我有同样的问题，点击 wamp 图标 => apache => 服务 => 安装服务

但是避免安装 64 位 wamp，有时它会引发 dll 错误，我推荐 Laragon**

# ruby-on-rails - 强制重新加载自动加载的库文件所需的库文件

> ID：10652116
> 
> 赞同：5
> 
> 时间：2012-05-18T11:50:00.817
> 
> 标签：ruby-on-rails, ruby-on-rails-3

**导轨 3.2.3**。`/lib`我的自动加载路径中有一个 Rails 应用程序。我的一个库文件需要一堆像这样的文件

```
Dir[Rails.root.join("lib/foo/*.rb")].each { |f| require f } 
```

在开发中，如果我更改这些文件，它们不会重新加载。例如，如果我修改`/lib/foo/bar.rb`，我将不得不重新启动服务器才能看到这些更改。任何人都可以提出一种方法，以便在每次请求时正确重新加载它们吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T15:36:32.477

`require`不能很好地与 rails 的自动加载系统配合使用。

`require_dependency`将做几乎需要做的事情，但将自动加载系统保持在循环中，以便加载的常量将在请求结束时卸载。您可能需要确保文件位于 rails 的自动加载路径中

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T14:48:28.373

如果您的自动加载路径中有这些文件：

```
config.autoload_paths += %W(#{config.root}/lib) 
```

那么你不应该需要它们。你试过[这个](https://stackoverflow.com/a/4368838/233720)吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T10:08:23.213

您必须添加或取消注释该行。

**config.autoload_paths += %W(#{config.root}/lib)**

到 config/application.rb 中的 Application 类

# android - 微调器在平板电脑上显示空值，但在手机上工作正常

> ID：10652120
> 
> 赞同：1
> 
> 时间：2012-05-18T11:50:11.450
> 
> 标签：android, android-spinner

`selectQType`一个简单的微调器。这些值是从数据库中填充的，它们很好。

```
 ArrayAdapter<String> spinnerArrayAdapter1 = 
            new ArrayAdapter<String>(SpotlighterBasicActivity.this,
                    android.R.layout.simple_spinner_item, spinnerQTypeList);
     spinnerArrayAdapter1.setDropDownViewResource( android.R.layout.simple_spinner_dropdown_item); 
     Spinner selectQType=(Spinner) findViewById(R.id.spinnerInputQType);

     selectQType.setPrompt("QType");// logcat points warning on this line.
     selectQType.setAdapter(spinnerArrayAdapter1);
     selectQType.setSelection(QTypeIndex);
     selectQType.setOnItemSelectedListener(new OnItemSelectedListener() {
     ...
     } 
```

这是我为平板电脑得到的输出：

![在平板电脑上输出](../Images/b78569f29c36e4a888d5b06637c05f55.png)

奇怪的是，它对于模拟器和设备的**移动类别运行良好，但对****平板电脑**类别的模拟器和设备发出警告。

以下是 logcat 详细信息：

```
05-18 16:47:29.284: E/SpotlighterBasicActivity(481): QTypeIndex=0
05-18 16:47:29.284: E/SpotlighterBasicActivity(481): spinnerArrayList[1]=Type 1, spinnerQTypeID=5853, defaultQType=6307
05-18 16:47:29.294: E/SpotlighterBasicActivity(481): spinnerArrayList[2]=Type 2, spinnerQTypeID=6308, defaultQType=6307
05-18 16:47:29.304: W/System.err(481): java.lang.NullPointerException
05-18 16:47:29.304: W/System.err(481):  at in.varit.spotlighter.basic.SpotlighterBasicActivity.loadQTypeSpinners(SpotlighterBasicActivity.java:334)
05-18 16:47:29.304: W/System.err(481):  at in.varit.spotlighter.basic.SpotlighterBasicActivity.onCreate(SpotlighterBasicActivity.java:203)
05-18 16:47:29.304: W/System.err(481):  at android.app.Activity.performCreate(Activity.java:4397)
05-18 16:47:29.304: W/System.err(481):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1048)
05-18 16:47:29.313: W/System.err(481):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1779)
05-18 16:47:29.313: W/System.err(481):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1831)
05-18 16:47:29.313: W/System.err(481):  at android.app.ActivityThread.access$500(ActivityThread.java:122)
05-18 16:47:29.313: W/System.err(481):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1024)
05-18 16:47:29.325: W/System.err(481):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-18 16:47:29.325: W/System.err(481):  at android.os.Looper.loop(Looper.java:132)
05-18 16:47:29.325: W/System.err(481):  at android.app.ActivityThread.main(ActivityThread.java:4123)
05-18 16:47:29.325: W/System.err(481):  at java.lang.reflect.Method.invokeNative(Native Method)
05-18 16:47:29.325: W/System.err(481):  at java.lang.reflect.Method.invoke(Method.java:491)
05-18 16:47:29.334: W/System.err(481):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
05-18 16:47:29.334: W/System.err(481):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
05-18 16:47:29.334: W/System.err(481):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:59:01.293

`selectQType is null`和

检查使用`if(null!=selectQType)`

并检查 id`selectQType`是否正确来自 layout.xml？

# jquery - 如何将设计添加到我的 jquery 自动完成功能？

> ID：10652124
> 
> 赞同：0
> 
> 时间：2012-05-18T11:50:25.457
> 
> 标签：jquery, asp.net, autocomplete

我创建了一个 jquery 自动完成功能，但我需要对其进行设计以使其看起来像样。谁能指导我设计？

我真的不知道你是否需要我的代码，但这是我的自动完成的 jquery 代码：

```
 $.ajax({
        url: "webservices/wbFilters.asmx/getAutoComplete",
        data: jsonData,
        type: "POST",
        dataType: "json",
        contentType: "application/json; charset=utf-8",
        success: function (mydata) {

            var resultsArr = [];

            for (var i = 0; i < mydata.d.length; i++) {
                resultsArr.push(mydata.d[i].results)
            }

            alert(resultsArr);

            $("#tags").autocomplete({
                delay: 10,
                source: resultsArr
            });
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:58:01.950

自动完成插件是官方 jquery UI 的一部分。

如果你所说的“设计”是指 CSS，你可以在这里为你的 jQuery UI 设计你自己的主题：

[http://jqueryui.com/themeroller/](http://jqueryui.com/themeroller/)

对于已经制作的主题，请使用 Google 库：

```
<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/themes/ui-lightness/jquery-ui.css" type="text/css" media="all"/> 
```

干杯!

# c# - 从 SQL Server 2008 到 PictureBox 的图像加载失败

> ID：10652127
> 
> 赞同：0
> 
> 时间：2012-05-18T11:50:38.203
> 
> 标签：c#, .net, winforms, visual-studio-2010, sql-server-2008

我无法从 SQL Server 2008 数据库中读取图像并将其加载到 Windows Forms`PictureBox`中。这是从数据库中检索图像的代码：

```
//UI Button Binded Code
private void LoadImage_Click(object sender, RoutedEventArgs e)
{
   DataSet data = DBClient.GetEmployee(_EID[0]);
   //...
   //...
   byte[] pic = (byte[])data.Tables[0].Rows[0]["Picture"];

   EmployeeCardForm ef = new EmployeeCardForm(name, fname, nic, deptt, desig, doj, address, ecode, pic);
   ef.Show();
}

 //EmployeeCardForm Constructor File Code
 public EmployeeCardForm(String name, String fname, String nic, String deptt, String desig, String doj, String address, String ecode, byte[] pic)
 {
        InitializeComponent();
        this.MaximizeBox = false;
        label18.Text = "Record has been successfully Saved. Please take Print out by pressing Print Button below!";
        try
        {
            pictureBox1.Image = Image.FromStream(new MemoryStream(pic));
            //Some code here
        }
        catch (IOException e)
        {
            MessageBox.Show("Some Error occurred!");
        }
        //declare event handler for printing in constructor
        printdoc1.PrintPage += new PrintPageEventHandler(printdoc1_PrintPage);
    } 
```

当我运行该程序并单击按钮以加载图像时，应用程序变得无响应。调试后才知道下面这行代码有问题：

```
pictureBox1.Image = Image.FromStream(new MemoryStream(pic)); 
```

当我使用 try/catch 块时，它向我显示了以下异常：
`System.ArgumentException: Parameter is not valid. at System.Drawing.Image.FromStream(Stream stream, Boolean useEmbeddedColorManagement, Boolean validateImageData) at System.Drawing.Image.FromStream(Stream stream) at SimpleReport.EmployeeCardForm..ctor(String name, String fname, String nic, String deptt, String desig, String doj, String address, String ecode, Byte[] pic) in D:\O Projects\EM\SimpleReport\EmployeeCardForm.cs:line 60`

这就是我将图像保存到数据库中的方式：

```
private void SaveImage_Click(object sender, RoutedEventArgs e)
{
     Picture_Path= filename;
     FileStream fs;
     fs = new FileStream(@Picture_Path, FileMode.Open, FileAccess.Read);
     //a byte array to read the image
     byte[] picbyte = new byte[fs.Length];
     fs.Read(picbyte, 0, System.Convert.ToInt32(fs.Length));
     fs.Close();
     DBClient.AddEmployee(ecode, emp_name.Text, fname, nic, deptt, desig, doj, address, picbyte);
} 
```

请帮帮我！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T13:37:17.763

经过一番交谈，问题是图片二进制文件以不正确的格式存储在数据库中。可能有几个问题：

1.  表格字段的类型/大小不正确。
2.  字节读取不正确

首先检查您是否有`varbinary(max)`数据表字段的类型\大小。

第二 - 这是您如何读取文件的所有字节的方法：

```
private void SaveImage_Click(object sender, RoutedEventArgs e)
{
    byte[] allFileBytes = File.ReadAllBytes(filename); 
    DBClient.AddEmployee(ecode, emp_name.Text, fname, nic, deptt, desig, doj, address, allFileBytes);
} 
```

# extjs - 从 DataStore 声明全局变量

> ID：10652131
> 
> 赞同：-1
> 
> 时间：2012-05-18T11:50:53.343
> 
> 标签：extjs

我想声明一个从 DataStore 获取值的全局变量。

```
var myStore = new Ext.data.Store({
        id: 'ID_myStore',
        proxy: new Ext.data.HttpProxy({
                url: 'get.php',      
                method: 'POST'
            }),
        baseParams:{task: "LIST"}, 
        reader: new Ext.data.JsonReader({   
                    root: 'results',
                    totalProperty: 'total',
                    id: 'id'
                },[ 
                   {name: 'Class', type: 'string', mapping: 'class'}
              ])
    });

        var BestClass = myStore.getAt(0).get('Class'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T12:13:48.913

哦，异步问题。

你需要听回调，然后去做。

```
var myStore = new Ext.dataStore({......
});
var bestClass;
myStore.on('load',function(store,record){
 bestClass = store.getAt(0).get('Class');
},this) 
```

请注意，虽然这是关于如何执行此操作的答案，但它不会与其他所有内容同时被调用，它是一个事件（您正在收听），因此在服务器响应之前该变量将是未定义的。

# c++ - 分配内存并将其分配给指针 C++

> ID：10652133
> 
> 赞同：0
> 
> 时间：2012-05-18T11:51:02.413
> 
> 标签：c++, pointers

如果我这样做有什么区别

```
 int *i = new int;
  *i = 5;
  *(i+1) = 20; 
```

和

```
 int *i2 = new int [2];
  i2[0] = 5;
  i2[1] = 20; 
```

我可以以相同的方式访问和使用这两个指针，但是这两个示例之间有什么区别，如果我没有分配足够的内存，会发生什么错误，如第一个示例所示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T11:52:06.740

不同之处在于第一个调用**未定义的行为**。任何事情都可能发生，包括程序崩溃、数据损坏，甚至只是“工作”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T11:53:28.897

第一个选项写入尚未分配的内存。这可能会导致不可预知的行为，例如崩溃。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T11:54:33.010

在第一种情况下，我们为一个整数分配了内存。所以我们不能做 *(i+1) 它将移动到下一个具有未定义行为的位置，即它可能会立即或稍后崩溃。

在后一种情况下，我们为两个整数分配内存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T11:54:58.957

最可能的事情是数据损坏，但通常它是未定义的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T11:57:29.637

您访问的元素没有区别。语法`*(i+1)`（指针表示法）和`i[1]`（数组元素访问表示法）是相同的。在这种情况下，您可以将指针和数组视为等效（因此访问同一元素的两种方式）

正如其他人所提到的，如果您（尝试）访问未正确分配的内存，您将有未定义的行为。

# c# - 如何从 excel 2010 中获取选择范围？

> ID：10652134
> 
> 赞同：8
> 
> 时间：2012-05-18T11:51:08.180
> 
> 标签：c#, visual-studio-2010, excel

我无法从 excel 中获取选择范围。我正在使用下面的代码块，我可以得到这样的活动表。但我只需要选择范围。我怎样才能做到这一点？

```
Microsoft.Office.Interop.Excel.Application ExApp = Globals.ThisAddIn.Application as Microsoft.Office.Interop.Excel.Application;
Microsoft.Office.Interop.Excel.Worksheet ExWorksheet = ExApp.ActiveSheet as Microsoft.Office.Interop.Excel.Worksheet;
Microsoft.Office.Interop.Excel.Range activeSheet = ExWorksheet.UsedRange as Microsoft.Office.Interop.Excel.Range; 
```

谢谢你的建议。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-18T12:21:35.857

选择是应用程序的一个属性，所以你应该使用类似的东西：

```
Microsoft.Office.Interop.Excel.Application ExApp = Globals.ThisAddIn.Application as Microsoft.Office.Interop.Excel.Application;
Microsoft.Office.Interop.Excel.Range SelectedRange = ExApp.Selection as Microsoft.Office.Interop.Excel.Range; 
```

请注意，Selection 返回的对象可能与 Range 不同（例如，它可能是 Chart），因此您应该检查 SelectedRange 的空值。

# html - 如何在表单提交上发布多个值？

> ID：10652136
> 
> 赞同：1
> 
> 时间：2012-05-18T11:51:14.323
> 
> 标签：html

我正在做一个调查。

一个问题被构建为一个矩阵，其中有行和列。

您可以在下面看到一个插图：

![在此处输入图像描述](../Images/a2d568e366ec3a02ecbaf2e1f739a662.png)

当我提交表格时，我必须保存每一行的答案。

问题 1 和 2 很简单。为了保存答案，我只需要知道行的 ID 和列的 ID。我可以使用“name”属性保存行 ID，使用“id”属性保存列 ID。这将通过 POST 方法发回。

但是，问题 #3 有一个额外的字段，除了列 ID 和行 ID（文本输入值）之外，我还需要将其发回。

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T11:58:39.750

我认为您可以将 4 个值发布到服务器，列 id、行 id、值和类型，这样如果类型是单选按钮或复选框，服务器将忽略 val 字段，如果类型是文本框，服务器将得到值字段中的值。这对你有帮助吗？！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-23T19:57:16.317

只需使用 HTML`name`函数命名所有内容，然后在 mysqli 上进行相同的基本设置，并使用 php 设置相同的 pos 和标记所有内容...

# c# - 删除 Highcharts 图表上条形下方的类别文本

> ID：10652137
> 
> 赞同：1
> 
> 时间：2012-05-18T11:51:17.157
> 
> 标签：c#, javascript, css, charts, highcharts

我有一个看起来像这样的图表：

![](../Images/eb1b01fbb5b16b3a40783f8e6e96a488.png)

我想删除栏下的文本，“ödmjukhet”，“engagemang”等。但是当用户将鼠标悬停在栏上时，我仍然想在标签上显示类别名称。我怎样才能做到这一点？

这是我在 C# 中的代码

```
 Highcharts chart1 = new Highcharts("Chart")
        .SetXAxis(new XAxis { Categories = averageGrades.Select(averageGrade => averageGrade.CoreValue.Name).ToArray(), })
        .SetYAxis(new YAxis { Min = 0, Max = 10, TickInterval = 1, Title = new YAxisTitle { Text = "Betygskalan" } })
        .SetSeries(new Series { Data = data, Name = "Snittbetyg" })
        .SetLegend(new Legend { Enabled = false, Layout = Layouts.Horizontal})
        .SetTitle(new Title { Text = "" })
        .InitChart(new Chart { DefaultSeriesType = ChartTypes.Column, Height = 300, Width = 200}); 
```

这是javascript输出代码的代码：

```
var Chart;
$(document).ready(function() {
    Chart = new Highcharts.Chart({
        chart: { renderTo:'Chart_container', defaultSeriesType: 'column', height: 300, width: 200 }, 
        legend: { enabled: false, layout: 'horizontal' }, 
        title: { text: '' }, 
        xAxis: { categories: ['Engagemang', 'Kompetens', 'Lönsamhet', 'Ödmjukhet'] }, 
        yAxis: { max: 10, min: 0, tickInterval: 1, title: { text: 'Betygskalan' } }, 
        series: [{ data: [{ color: '#FF9980', y: 4 }, { color: '#A6FF80', y: 8 }, { color: '#FF9980', y: 3 }, { color: '#A6FF80', y: 9 }], name: 'Snittbetyg' }]
    });
}); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T12:02:36.227

消除

```
 xAxis: { categories: ['Engagemang', 'Kompetens', 'Lönsamhet', 'Ödmjukhet'] }, 
```

从你的代码

或者在你的风格中添加类，如果你想继续悬停，请参阅[演示](http://jsfiddle.net/gh/get/jquery/edge/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/column-stacked/)

```
.highcharts-axis{
    display: none;
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T15:56:44.400

这样做的最好方法可能是在 xaxis 上内置标签对象。

[http://www.highcharts.com/ref/#xAxis-labels--启用](http://www.highcharts.com/ref/#xAxis-labels--enabled)

以下应该可以解决问题，而无需像 Rab 的回答那样依赖于覆盖他们的样式。这显然是首选，因为 API 比它们的 HTML 格式更固定。

```
xAxis: { 
    categories: ['Engagemang', 'Kompetens', 'Lönsamhet', 'Ödmjukhet'],
    labels: {enabled: false}
}, 
```

# php - 如何访问放射科订单中包含的图像？HL7、鬣蜥、dcm4chee、dcm4che2？

> ID：10652139
> 
> 赞同：0
> 
> 时间：2012-05-18T11:51:21.940
> 
> 标签：php, dicom

我正在为 EHR 系统构建一个 PACS 查看器。他们让鬣蜥在奔跑，我看到了一些关于放射科的命令。我认为这是 HL7 驱动的。所以我的问题是如何访问订单中包含的图像？我看到的 HL7 消息中是否有更多信息，或者我是否需要某种类型的配置来告诉我在哪里连接以获取图像？我已经做了很多研究，如果有人能阐明这一点，我觉得我已经接近理解了，我提前感谢你。

我需要 dcm4chee 或 dcm4che2 来完成这个吗？我的应用程序是 PHP，将在自定义 linux 服务器上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T20:16:39.937

如果存在带有图像的放射学订单，则图像位于两个位置之一，或两者兼有。

需要考虑的两个地方是：

1.  模态，表示用于获取图像的扫描仪。例如，CT 或超声波机器。
2.  DICOM 服务器，有时称为“PACS 服务器”。

如果我们假设图像已到达位置 (2)，则使用 dcm4che 之类的工具可以获得所需的图像信息。例如，使用 dicom 查询来请求您感兴趣的研究数据。一些独特的识别、研究特定的信息应该在您手头的 HL7 消息中找到。

我的理解是 Radiology HL7 消息中不包含图像数据。HL7 可用于表示“事件”已经发生（研究已经开始，研究完成）。HL7 消息可用于启动 dicom 研究从 (1) 到 (2) 的移动或传输。然而，HL7 消息本身并不包含图像数据。图像数据将驻留在 (1) 或 (2) 中。

# c - 16F819 原始类型问题中的 GPS SD 卡数据记录器

> ID：10652141
> 
> 赞同：0
> 
> 时间：2012-05-18T11:51:33.000
> 
> 标签：c, gps, pic

我用 PIC 16F819 做了一个 GPS 数据记录器应用程序，我的 sd 卡格式类型为 fat32。我运行我的应用程序并将 gps 记录发送到 sd 卡。然后，我看不到任何文本文件或文件。它保存了它可能是原生原始类型。我使用了十六进制编辑器，但这没有向我显示相关字符。我用过的项目[http://www.gedanken.demon.co.uk/gps-sd-logger/](http://www.gedanken.demon.co.uk/gps-sd-logger/) 我怎么能看到数据！！..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:57:18.390

从链接页面（强调我的），

> 数据以 512 字节的块（本机 SD 卡块大小）写入 SD 卡。每秒写入一个块并用零字节填充到 512 字节。启动和停止由 SD 卡中的空白块记录。**SD 卡上没有文件系统，因此需要逐字节读取（在 Linux 中使用 USB 适配器和读取原始设备很容易）。**为了读取卡片，我有一个简单的 C 程序，它提取 NMEA 数据并在盒子每次唤醒时写入一个文件。

您需要直接读取卡片，这在 Linux 或 OS X 上很容易，但在平台之间会有所不同。将二进制数据提供给他也应该在网站上发布的 C 程序。（我没看。）

这假设硬件和一切都正常工作，这对于仅根据在线说明构建的项目来说不是一个安全的假设。可能您应该联系该页面的作者，他可能不介意提供一点帮助。

# m2eclipse - 使用 m2e 进行 IDL 编译失败，但没有错误

> ID：10652160
> 
> 赞同：1
> 
> 时间：2012-05-18T11:53:04.607
> 
> 标签：m2eclipse, idl, m2e

我有一个可用的 Maven 项目设置，包括使用 org.codehaus.mojo:idlj-maven-plugin 进行 IDL 编译。如果我在控制台上运行 mvn compile，IDL 编译器就可以正常工作。如果我在 Eclipse Indigo (3.7.2) 中使用 m2e (1.0.1) 执行此操作，首先我会收到以下消息（原始路径替换为~~~）：

```
18.05.12 13:13:55 MESZ: [INFO] Processing 1 grammar files to ~~~/target/generated-sources/idl
18.05.12 13:13:55 MESZ: [DEBUG] Processing: ~~~/src/main/idl/MyRegistry.idl 
```

这与我在控制台上获得的相同以及相同的配置参数信息。

但在 m2e 流程结束时，我得到了这一行：

```
18.05.12 13:13:55 MESZ: [DEBUG] Created marker 'IDL Compilation failure (org.codehaus.mojo:idlj-maven-plugin:1.1:generate:default:generate-sources)' on resource '/mypackage.myregistry/pom.xml'. 
```

但是没有错误或类似的东西出现，表明出了什么问题。

在 Eclipse 中，我已经将 Maven 运行时从内部切换到了我也在控制台上使用的外部。

# sql - SELECT FROM WHERE IN 与多个表上的 SELECT FROM 相比

> ID：10652168
> 
> 赞同：18
> 
> 时间：2012-05-18T11:53:29.350
> 
> 标签：sql

我在学校参加数据库课程。老师给了我们一个简单的练习：考虑以下简单的模式：

```
Table Book:
    Column title (primary key)
    Column genre (one of: "romance", "polar", ...)

Table Author:
    Column title (foreign key on Book.title)
    Column name
    Primary key on (title, name) 
```

问题包括以下一个：

> 编写返回写过言情小说的作者的查询。

我提出了这个答案：

```
select distinct name 
from Author where title in (select title from Book where genre = "romance") 
```

但是老师说错了，正确答案是：

```
select distinct name 
from Book, Author 
where Book.title = Author.title 
  and genre = "romance" 
```

当我要求解释时，我得到的只是*“如果你对这门课多加注意，你就会知道为什么”*。杰出的。

那么，为什么我的答案不正确？*这些查询之间到底*有什么区别？在数据库引擎级别，他们到底做了什么*？*

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-18T12:06:05.100

> *那么，为什么我的答案不正确？*

你的回答**是**正确的。

我猜为什么老师将其标记为错误，他/她试图练习使用该问题的连接。但如果它是有意的，那应该是问题的一部分。

> *这些查询之间到底有什么区别*

从技术上讲，它们确实不同。具有简单查询优化器的 DBMS 将以不同于老师答案的连接方式检索子选择。

如果具有良好优化器的 DBMS 实际上可能为两个查询提供相同的执行计划，我不会感到惊讶。

## 编辑

我创建了一些包含 50000 本书、50000 位作者和 7 种不同类型的测试数据来测试（较小的数字实际上没有意义，因为优化器往往会简单地抓取整个表格）。该语句将返回 7144 行。

### PostgreSQL

执行计划与“join”方法的一些小变化几乎相同。

这是子选择版本的计划：[http://explain.depesz.com/s/eov](http://explain.depesz.com/s/eov)
这是加入版本的计划： http: [//explain.depesz.com/s/aTI](http://explain.depesz.com/s/aTI)

令人惊讶的是，加入版的成本价值*略高。*

### 甲骨文

两个计划都是 100% 相同的：

```
-------------------------------------------------- ----------------------------------
| 身份证 | 操作 | 姓名 | 行 | 字节 |TempSpc| 成本 (%CPU)| 时间 |
-------------------------------------------------- ----------------------------------
| 0 | 选择声明 | | 6815 | 399K| | 273 (2)| 00:00:04 |
| 1 | 哈希唯一 | | 6815 | 399K| 464K| 273 (2)| 00:00:04 |
|* 2 | 哈希连接 | | 6815 | 399K| | 172 (2)| 00:00:03 |
|* 3 | 表访问已满| 书 | 6815 | 166K| | 69 (2)| 00:00:01 |
| 4 | 表访问已满| 作者 | 50000 | 1708K| | 103 (1)| 00:00:02 |
-------------------------------------------------- ----------------------------------

```

使用时查看统计数据`autotrace`也没有任何区别。我没有费心去实际创建一个跟踪文件来分析它，因为我不希望在那里看到差异。

如果添加了索引，事情并没有真正改变`book.genre`。Oracle 坚持使用全表扫描（即使是 100000 行）。可能是因为表格不是很宽，并且很多行适合单页。

PostgreSQL does use the index for both statements but there is still no real difference between the plans.

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-05-18T11:57:55.243

两个查询都有效并且返回相同。

您的老师使用了相当过时（尽管仍然有效）的联接语法，并且您使用的结构在某些数据库中效率较低（`MySQL`例如 ）。

如果我是你的老师，我会这样写查询：

```
SELECT  DISTINCT name
FROM    books b
JOIN    authors a
ON      a.title = b.title
WHERE   b.genre = 'romance' 
```

但如果课程不是针对`MySQL`优化的，仍然接受您和您老师的查询。

老师说的注意力不就是这个意思吗？

**更新：**

在数据库引擎级别，两个查询都将被优化为使用相同的计划，除非数据库引擎是`MySQL`.

在`MySQL`中，您的查询将被强制`Authors`用作前导表，而对于您的老师的查询，优化器可以根据表的统计信息选择要作为前导的表。

# php - 检查行mysql中的值

> ID：10652172
> 
> 赞同：1
> 
> 时间：2012-05-18T11:53:39.473
> 
> 标签：php, mysql

我有这样的表结构

```
id  1   2   3   4   5   6   7   8   9   10  11  ..... till  50 or 60
1   A   B   C   D   E   F   G   H   I    J   K
2   G   H   A   B   C   D   L   M   N    O   P
3   So on .. 
```

现在我想找出第一行是否有值 G 。帮助 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T11:59:29.640

你可以使用[CONCAT](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_concat)。我相信这样的事情是你所追求的？

```
SELECT id FROM table WHERE CONCAT(1,2,3,4,5,6......50) LIKE '%G%';

SELECT id, LOCATE('G', CONCAT(1,2,3,4,5,6......50)) FROM table WHERE CONCAT(1,2,3,4,5,6......50) LIKE '%G%'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T13:38:23.847

你的结构不应该是这样的：

```
ValueMatrix Struc
----------------------
row_id      INT
column_id   INT
value       VARCHAR(1) 
```

并输入如下数据：

```
ValueMatrix Data
----------------------
row_id      column_id   value
1           1           A
1           2           B
1           3           C
2           1           G
2           2           H
2           3           A 
```

因此查询以检索值 G：

```
SELECT *
FROM ValueMatrix
WHERE row_id = 1 AND value='G' 
```

# javascript - 如何删除 DOJO 数据存储添加到我获取的项目中的所有额外字段？

> ID：10652173
> 
> 赞同：2
> 
> 时间：2012-05-18T11:53:48.593
> 
> 标签：javascript, rest, dojo, datastore

从 DOJO 数据存储中获取项目时，DOJO 会为其添加大量额外字段。它还改变了数据的结构方式。

我知道我可以手动将任何项目重建为其初始形式（这将要求我每次更改 REST 对象时都更新两个 JS 代码），但肯定有更好的方法。

也许是 store.detach(item) 或类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T14:03:28.057

`dojo.data`API 正在逐步淘汰，部分原因是额外的字段。您可以考虑使用新的`dojo.store`API。store api 不添加额外的字段。

我写了一个函数来做你想做的事情。它跟随。需要注意的一点是，我的函数将子对象转换为`{ _reference: 'id' }`符号。您可能想要不同的行为。

```
Util._detachItem = function(item) {
    var fnIncludeProperty = function(key) {
        return key !== '_0'
            && key !== '_RI'
            && key !== '_RRM'
            && key !== '_S'
            && key !== '__type'
    };

    var store = item._S;

    var fnCreateItemReference = function(itm) {
        if (store.isItem(itm)) {
            return { _reference: itm.id[0] };
        }
        return itm;
    };

    var fnProcessItem = function(itm) {
        var newItm = {};
        for(var k in itm) {
            if(fnIncludeProperty(k)) {
                if (dojo.isArray(itm[k])) {
                    // TODO this could be a problem with arrays with a single item
                    if (itm[k].length == 1) { 
                        newItm[k] = fnCreateItemReference(itm[k][0]);
                    } else {
                        var valArr = [];
                        dojo.forEach(itm[k], function(arrItm) {
                            valArr.push(fnCreateItemReference(arrItm));
                        });
                        newItm[k] = valArr;
                    }
                } else {
                    newItm[k] = fnCreateItemReference(itm[k]);
                }
            }
        }
        return newItm;
    };

    return fnProcessItem(item);
}; 
```

注意：这个函数是根据我最初写的修改的，我没有测试上面的代码。

# osgi - OSGi 的替代品？

> ID：10652183
> 
> 赞同：1
> 
> 时间：2012-05-18T11:54:07.300
> 
> 标签：osgi, firmware, software-update

我需要实现一个远程管理系统，在远程设备上执行以下任务 - 1）安装软件，固件。2) 安装软件、固件的升级。3) 监控已安装软件、固件的状态。

OSGi 可以是实现这一点的框架之一，但它只支持用 Java 编写的包（C/C++ 的实现可用，但还不成熟）。我想知道是否有任何其他替代方案可以管理以任何语言编写的软件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T10:20:46.267

我经常看到这个问题出现，但我认为没有，而且我怀疑会有，尤其是在移动设备上。获得一个无论语言如何都“感觉良好”的 API 几乎是不可能的，您需要与特定平台如何处理其更新进行交互。配置 OSGi 组件与更新 iOS 应用程序有着根本的不同。

再说一次，我很想在这个问题上被证明是错误的；-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:21:06.490

也许你可以看看 MEF（托管可扩展性框架）。它用于 dotNet 开发，类似于 OSGi。但是我对 OSGi 比对 MEF 更熟悉，所以我无法区分它们。我只从 C# 专业人士那里听说他们有 MEF 而不是 OSGi ^^

# android - ActionScript 3 FlashDevelop 和 Air 应用程序发布 - xml 清单设置/包问题

> ID：10652184
> 
> 赞同：2
> 
> 时间：2012-05-18T11:54:14.053
> 
> 标签：android, actionscript-3, air, flashdevelop

我对使用 FlashDevelop(FD) 和 Air 发布应用程序还很陌生，我和我的同事在发布应用程序之前遇到了一些设置问题。

所以，这里的主要问题是，你需要做什么才能在 application.xml 的清单部分的包中获得一个像样的设置，它与 .apk 文件“合并”？我在我的 FD 项目中使用的包是否与中的包相对应？我是否正确假设 package="some.package" 也与应用程序实际安装在移动设备上的位置有关？

我的意思是，如果我正在编写一个非常简单的应用程序，它只包含在单个 Main 类中的 100 行代码中，那么我不会在 FD 项目中使用任何包......那么清单包在哪里从中获取它的字符串值？

现在在网上搜索了一段时间，它开始变得有点烦人......这有点像丛林，很难通过android的网络和adobe air的网络找到具体的答案。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T12:00:57.250

如果我正确理解您的问题，不，您的 Flash 中的包名称与您的 apk 的包名称无关。

当您单击 File-> Air for Android Settings 时，这是在设置中设置的

在 General 下的那个对话框中，有一个以 air 开头的 App ID 字段。然后它说你应该用你希望应用程序拥有的任何包名称填写它。

它最终会成为 air.your.package.name

至于参考，你是对的，网络上没有很多，但这本书非常方便： http: [//books.google.com/books/about/Developing_Android_Applications_With_Fle.html ?id=KGmmyBns0ngC](http://books.google.com/books/about/Developing_Android_Applications_With_Fle.html?id=KGmmyBns0ngC)

或者，如果您要使用直接 Flash： [http ://shop.oreilly.com/product/0636920013884.do](http://shop.oreilly.com/product/0636920013884.do)

# iphone - iPhone应用程序中的动画gif

> ID：10652185
> 
> 赞同：1
> 
> 时间：2012-05-18T11:54:19.217
> 
> 标签：iphone, ios, splash-screen

我想在加载应用程序时在启动屏幕上显示加载动画。如果没有，是否可以在 iOS 中添加 .gif 动画，那么请建议我如何显示进度 HUD 或一系列图像以看起来像加载应用程序的其他方式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T11:55:34.200

您不能在启动画面期间制作动画图形。

初始屏幕是您提供的静态图像，也称为[“启动图像”](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/IconsImages/IconsImages.html)（我已经为您链接了文档，因此您可以看到我在说什么）。

如果您想在启动画面消失后制作动画，当然欢迎您这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T12:15:37.823

只需输入此代码及其工作

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.

    splash = [[UIImageView alloc] initWithFrame:self.window.frame];
    splash.image = [UIImage imageNamed:@"splash"];
     hud = [[MBProgressHUD alloc] initWithView:splash];
     [splash addSubview:hud];
     hud.delegate = self;
    [hud show:YES];
    [self.window addSubview:splash];

    [self performSelector:@selector(Load_FirstView) withObject:nil afterDelay:3];
    [self.window makeKeyAndVisible];
    return YES;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T11:59:33.770

子类 UIView 并创建您的自定义启动屏幕视图。您需要将该 SplashView 加载到 -`(BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions`作为窗口对象的子视图。比创建一个 3-6 秒的计时器并使用 removeFromSuperView 方法删除该 SplashView 。

您可以在自定义启动视图中放置任何类型的动画，但不支持 GIF 动画。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-17T04:51:57.790

我的建议是准备启动图像和启动/加载屏幕，以使启动图像（可能是徽标）与启动/加载屏幕中的 UIImageView 相同，并且效果很好。然后在启动/加载屏幕中，在进度条中设置动画，增加进度条，然后启动主应用程序。

诀窍在于启动图像与启动/加载屏幕中的 UIImageView 相同：对用户来说，它甚至看起来不像是过渡，它是如此无缝。

# javascript - 需要 Ext JS 库

> ID：10652200
> 
> 赞同：1
> 
> 时间：2012-05-18T11:55:08.750
> 
> 标签：javascript, extjs

我下载了 ExtJS 库，但它不包含适配器文件夹。

你能给我一个链接来下载完整的 Ext JS 包/库吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T12:21:24.057

当 ExtJs 仍然基于其他框架时，Adapter 是一个遗留的 js 文件。

您可能正在查看[http://www.sencha.com/learn/html-page-setup/](http://www.sencha.com/learn/html-page-setup/)的等价物，它与 ExtJS 2 & [3 在此处下载 ExtJs 3](http://www.sencha.com/products/extjs3/download/)相关。

ExtJS 3 将具有适配器文件等，但是 ExtJS 4 不使用或不需要一个。

如果您的向导使用的是 ExtJs 3，也许可以使用它，但请记住，ExtJS 4 是最新最好的，并且每次都发生了很大变化。

[这](http://docs.sencha.com/ext-js/4-0/#!/guide/application_architecture)是关于如何安装和使用 ExtJS 4.x 的官方指南

```
<link rel="stylesheet" type="text/css" href="./js/ExtJS/resources/css/ext-all.css" />

<script type="text/javascript" src="./js/ExtJS/bootstrap.js"></script>

<script type="text/javascript"> 
Ext.create('Ext.Panel',{
    renderTo:Ext.getBody(),
    html:'hello world'
})</script> 
```

这几乎是它需要的外观，但再次阅读学习中心！Sencha 为 extjs 4 的教程和 api 文档做了大量工作，他们比我更好地握住你的手（[http://docs.sencha.com/ext-js/4-0/#!/guide/getting_started](http://docs.sencha.com/ext-js/4-0/#!/guide/getting_started) )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T11:57:05.783

[http://www.sencha.com/products/extjs/download/](http://www.sencha.com/products/extjs/download/)

# css - 两列中的响应式“列表”

> ID：10652202
> 
> 赞同：1
> 
> 时间：2012-05-18T11:55:15.083
> 
> 标签：css, twitter-bootstrap

我正在尝试构建两种类型的项目的列表，我们称它们为绿色和红色。在低于 980 的分辨率中，我希望它们堆叠在一列中，在高于 980 的分辨率中，我希望它们堆叠在两列中。

这是我到目前为止得到的：http: [//kristofferk.se/list-test/](http://kristofferk.se/list-test/) （玩弄你的浏览器宽度来查看一/两列的东西。）

**我的问题**：是否有一种简单的方法可以仅使用 CSS 使项目堆叠（中间没有垂直空间）？对 jQuery 等不感兴趣。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T12:05:19.447

您可以通过**CSS 媒体查询**来实现您的结果， 这就是我在下面提到的大致想法：-

```
 @media screen and (max-width: 980px)
 {
      .class {
        background: #ccc;
      }
    } 
```

阅读有关媒体查询的更多信息：- [http://webdesignerwall.com/tutorials/css3-media-queries](http://webdesignerwall.com/tutorials/css3-media-queries)

**更新**

只需**明确：**您的**.in 类** 将删除垂直空间......

```
.in {
    clear: right;
    color: green;
    float: right;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T12:39:13.610

你可以这样写：

```
.in {
    clear: right;
    color: green;
    float: right;
}
.in + .in {
 margin-bottom:-30px;
} 
```

# c# - 如何处理 WPF DataGrid 中的组小计和目标行？

> ID：10652203
> 
> 赞同：13
> 
> 时间：2012-05-18T11:55:17.190
> 
> 标签：c#, wpf, datagrid, wpfdatagrid

我正在实现一个 WPF DataGrid，其中包含具有许多关键数据的项目。项目按项目类别分组。

每个类别应该有：

1.  在每个关键值列中显示该列所有行的总和的行。
2.  不属于绑定到的数据源网格的目标行。目标行告诉每一列今年的目标是什么（例如要花多少钱）。

这些行应始终在每个组的顶部（排序过滤）。

我的第一个解决方案是将这些数据放在组标题中。这不是一个好的解决方案，因为组标题不支持列。即它应该通过获取列宽来构造。

这可以做到，但是当用户想要重新排序和隐藏列时它会变得复杂。

DataGrid 正在使用 CollectionViewSource，因此它没有填充 C# 代码。基本上我正在扩展这个例子：http: [//msdn.microsoft.com/en-us/library/ff407126.aspx](http://msdn.microsoft.com/en-us/library/ff407126.aspx)

谢谢和最好的问候-马蒂

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T14:40:30.953

在我的一个项目中，我有一个与组小计行一起被破解的 DataGrid。我们并不关心您提出的一些问题，例如隐藏和排序列，所以我不确定它是否可以扩展。我也意识到大型集合可能会出现性能问题（我的窗口正在运行 32 个单独的 DataGrids - 哎哟）。但这与我见过的其他解决方案的方向不同，所以我想我会把它扔在这里，看看它是否对你有帮助。

我的解决方案由 2 个主要组件组成：
1\. 小计行不是主 DataGrid 中的行，而是单独的 DataGrid。实际上，我在每个组中有 2 个额外的网格：1 个在标题中，仅在组折叠时显示，一个在 ItemsPresenter 下方。小计 DataGrids 的 ItemsSource 来自一个 Converter，它获取组中的项目并返回一个聚合视图模型。小计网格的列与主网格完全相同（在 DataGrid_Loaded 中填写，尽管我确信它也可以在 xaml 中完成）。

```
 <GroupStyle>
                <GroupStyle.ContainerStyle>
                    <Style TargetType="{x:Type GroupItem}">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="{x:Type GroupItem}">
                                    <Expander Background="Gray" HorizontalAlignment="Left" IsExpanded="True"
                                              ScrollViewer.CanContentScroll="True">
                                        <Expander.Header>
                                            <DataGrid Name="HeaderGrid" ItemsSource="{Binding Path=., Converter={StaticResource SumConverter}}"
                                                        Loaded="DataGrid_Loaded" HeadersVisibility="Row"
                                                        Margin="25 0 0 0" PreviewMouseDown="HeaderGrid_PreviewMouseDown">
                                                <DataGrid.Style>
                                                    <Style TargetType="DataGrid">
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType=Expander}, Path=IsExpanded}"
                                                                            Value="True">
                                                                <Setter Property="Visibility" Value="Collapsed"/>
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </DataGrid.Style>
                                            </DataGrid>
                                        </Expander.Header>
                                        <StackPanel>
                                            <ItemsPresenter/>
                                            <DataGrid Name="FooterGrid" ItemsSource="{Binding ElementName=HeaderGrid, Path=ItemsSource, Mode=OneWay}"
                                                            Loaded="DataGrid_Loaded" HeadersVisibility="Row"
                                                            Margin="50 0 0 0">
                                                <DataGrid.Style>
                                                    <Style TargetType="DataGrid">
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType=Expander}, Path=IsExpanded}"
                                                                         Value="False">
                                                                <Setter Property="Visibility" Value="Collapsed"/>
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                            </DataGrid>
                                        </StackPanel>
                                    </Expander>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </GroupStyle.ContainerStyle>
            </GroupStyle> 
```

2\. 然后问题是如何让所有 DataGrids 表现得好像它们是一个网格一样。我已经通过在一个模拟 Grid 类的 SharedSizeGroup 行为的类中子类化`DataGridTextColumn`（在这种情况下我们只有文本，但其他列类型也应该工作）来处理这个问题。`DataGridSharedSizeTextColumn`它有一个带有组名的字符串依赖属性，并跟踪同一组中的所有列。当`Width.DesiredValue`一列发生变化时，我会更新所有其他列中的 MinWidth 并强制使用`DataGridOwner.UpdateLayout()`. 此类还涵盖列重新排序，并在 DisplayIndex 更改时进行组范围的更新。我认为这种方法也适用于任何其他列属性，只要它有一个设置器。

选择、复制等还有其他烦人的事情需要解决。但结果证明，使用 MouseEntered 和 MouseLeave 事件以及使用自定义 Copy 命令很容易处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T17:44:03.643

一种选择可能是在数据源中添加具有特殊值的行，用于 Name 和其他没有意义的字段，并使用 DataTrigger 以特殊颜色或其他颜色显示它们。

无论如何，过滤都是在 C# 中完成的，因此它不会影响这些行。

排序是这里唯一的问题。只是告诉某些行在组中的顺序为 0 和顺序为 1，那就太酷了。但是因为我不知道该怎么做，所以我必须在 C# 中对所有列进行自定义排序，而不仅仅是声明排序：

```
<CollectionViewSource.SortDescriptions>
   <!-- Requires 'xmlns:scm="clr-namespace:System.ComponentModel;assembly=WindowsBase"' declaration. -->
    <scm:SortDescription PropertyName="ProjectName"/>
    <scm:SortDescription PropertyName="Complete" />
    <scm:SortDescription PropertyName="DueDate" />
</CollectionViewSource.SortDescriptions> 
```

编辑：除此之外，与我的第一个解决方案（组标题中的总和信息）相比，它有一个主要缺点，因为在过滤更改时，我应该更新仅针对可见行计算的总和。

所以这个答案是一个完整的黑客，缺乏所有的优雅，并且没有使用 WPF 应该有的好功能:(

# php - 在db中存储文本：如何选择varchar大小（考虑格式），单独存储格式？

> ID：10652204
> 
> 赞同：0
> 
> 时间：2012-05-18T11:55:19.000
> 
> 标签：php, database, validation, database-design, input

考虑到用户也可能使用格式（html/bb 代码/...），这对用户不可见，并且不应影响最大 500 个字符的文本大小...？？

1) 理论上，为了防止任何错误，varchar 大小必须几乎是无穷无尽的，如果用户例如使用 20 个这样的链接（http://[huge number of chars]）或其他什么...... - 或者不是？

2）您应该/可以将格式保存在单独的列中，例如不给出索引（如 FULLTEXT）错误值（包含在格式中但不在实际文本中的单词）？

如果是，如何最好地做到这一点？你还记得在什么时候使用了格式，保存这一点和格式，并在输出时将这些信息放在一起？

(php/mysql, java 脚本, jquery)

非常感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T12:53:28.347

一个好的解决方案是考虑格式化字符的数量。

如果不这样做，为避免数据丢失，您需要在数据库中为文本使用更多空间，并在保存或使用全文之前检查先前记录的长度。

在一个表中保留相同的数据两次不是一个好的解决方案，这完全取决于您的项目，但通常更好的是在 php 上进行过滤器格式。

# sql - 按新选择的列排序

> ID：10652208
> 
> 赞同：2
> 
> 时间：2012-05-18T11:55:32.620
> 
> 标签：sql, sql-server, sql-order-by

我有一个像这样的查询：

```
SELECT 
    R.*     
FROM 
    (SELECT A, B, 
            (SELECT smth from another table) as C,
     ROW_NUMBER() OVER (ORDER BY C DESC) AS RowNumber 
     FROM SomeTable) R
WHERE 
     RowNumber BETWEEN 10 AND 20 
```

这给了我一个错误`ORDER BY C DESC`。

我理解为什么会导致这个错误，所以我考虑添加另一个`SELECT`，`ORDER BY`而不是选择从 10 到 20 的行。但我认为拥有 3 个嵌套`SELECT`命令并不好。

还有什么办法可以选择这些行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T12:10:13.007

列不能引用同一级别的别名，您必须先对其进行表派生，或者使用 CTE。

```
SELECT 
    R.* , ROW_NUMBER() OVER (ORDER BY C DESC) AS RowNumber     
FROM 
    (SELECT A, B, (SELECT smth from another table) as C
     FROM SomeTable) R
-- WHERE 
     -- but you still cannot do this
     -- RowNumber BETWEEN 10 AND 20 
```

需要这样做：

```
select S.*
from
(
    SELECT 
        R.* , ROW_NUMBER() OVER (ORDER BY C DESC) AS RowNumber     
    FROM 
        (SELECT A, B, 
                (SELECT smth from another table) as C
         FROM SomeTable) R
) as s
where s.RowNumber between 10 and 20 
```

为避免深度嵌套并使其至少看起来令人愉悦，请使用 CTE：

```
with R as
(
     SELECT A, B, (SELECT smth from another table) as C
     FROM SomeTable
)
,S AS 
(
    SELECT R.*, ROW_NUMBER() OVER (ORDER BY C DESC) AS RowNumber
    FROM R
)
SELECT S.*
FROM S
WHERE S.RowNumber BETWEEN 1 AND 20 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T12:00:00.997

您不能在同一个中使用别名列`SELECT`，但您可以将其包装到另一个选择中以使其工作：

```
SELECT R.*
FROM (SELECT ABC.A, ABC.B, ABC.C, ROW_NUMBER() OVER (ORDER BY C DESC) AS RowNumber
      FROM (SELECT A, B, (SELECT smth from another table) as C FROM SomeTable) ABC 
) R
WHERE R.RowNumber BETWEEN 10 AND 20 
```

# database - phonegap 支持哪些浏览器和数据库

> ID：10652212
> 
> 赞同：-2
> 
> 时间：2012-05-18T11:55:42.383
> 
> 标签：database, browser, cordova

phone gap 支持哪些浏览器，phone gap 支持哪些数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T11:59:29.933

直接来自 Phonegap 网站 -

> PhoneGap 是一个 HTML5 应用程序平台，允许您使用 Web 技术编写本机应用程序并访问 API 和应用程序商店。

这意味着它不依赖于浏览器。代码编译为本机应用程序。您不需要浏览器来运行它。

# java - Eclipse RCP 应用程序中的项目特定首选项页面

> ID：10652221
> 
> 赞同：2
> 
> 时间：2012-05-18T11:56:47.930
> 
> 标签：java, eclipse, rcp

我想为我们的产品启用基于项目的首选项对话框。我偶然发现了两个不同的问题：

我如何存储这些项目相关信息。作为一个有根据的猜测，我会尝试这个：

*   `IPreferenceStore store = new ScopedPreferenceStore(new ProjectScope(project.getIProject()), Activator.PLUGIN_ID)`;
*   然后根据需要设置“项目商店”（例如在偏好页面中作为商店）

如何仅为项目启用首选项页面？我知道我可以使用`PreferenceUtils.createPreferenceDialogOn(…)`. 不幸的是，偏好页面的 ID 必须在`org.eclipse.ui.preferencePages`扩展点中定义。但如果它们在这个扩展点内，这些页面也在产品的全局“首选项”中。如果在 EP 中未指定它们，则不会显示页面。

有什么提示吗？提前致谢 ：）

**编辑：**我真正想要的是一个属性对话框，而不是首选项对话框。如果您正在使用属性页，则 PreferenceUtils 根本不起作用。如果您通过`org.eclipse.ui.propertyPages`它提供一个属性页面，它适用于标准的 eclipse 导航器 - 但是我如何在自定义导航器（通用导航器框架）中处理这个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T17:05:44.737

例如，您将需要子类化`PropertiesPage`，然后在您的 plugin.xml 中添加对它的引用。这使用两个不同的属性页面，一个在选择项目时显示，另一个用于文件。它们都只存在于具有指定项目性质的项目中。

```
<extension point="org.eclipse.ui.propertyPages">
    <page
        class="com.oaklandsw.transform.editor.TransformProjectPropertiesPage"
    id="com.oaklandsw.transform.filePropPage"
    name="%appHandle">
    <enabledWhen>
    <and>
            <instanceof
             value="org.eclipse.core.resources.IProject">
        </instanceof>
            <adapt type="org.eclipse.core.resources.IResource" >
                <test
                 property="org.eclipse.core.resources.projectNature"
                value="com.oaklandsw.transform.runtime.nature">
                </test>
            </adapt>   
    </and>
    </enabledWhen>
    </page> 
    <page class="com.oaklandsw.transform.editor.TransformFilePropertiesPage"
        id="com.oaklandsw.transform.projectPropPage" name="%appHandle">
        <enabledWhen>
            <and>
        <instanceof
            value="org.eclipse.core.resources.IFile">
        </instanceof>
            <adapt type="org.eclipse.core.resources.IResource" >
                <test property="org.eclipse.core.resources.projectNature"
                    value="com.oaklandsw.transform.runtime.nature" />
            </adapt>        
            </and>
        </enabledWhen>
    </page>
</extension> 
```

# c# - 如何将数据库从 Orchard 1.2 迁移到 Orchard 1.4.1？

> ID：10652222
> 
> 赞同：1
> 
> 时间：2012-05-18T11:56:50.027
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, orchardcms

我将 Orchard 1.2 用于我的一个 Web 应用程序，我将把它升级到 Orchard 1.4.1。我已经完成了必要的代码迁移但是..

Q1：如何将现有数据库迁移到更新版本？如果我通过连接现有（旧 1.2 版本）数据库运行较新版本，则会发生如下服务器错误

> “'/' 应用程序中的服务器错误。找不到资源。说明：HTTP 404。您要查找的资源（或其依赖项之一）可能已被删除、更改名称或暂时不可用。请查看以下 URL 并确保其拼写正确。
> 
> 请求的 URL：/http404error”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T12:03:46.967

检查源包，总是有迁移脚本。但似乎你必须从 1.2 迁移到 1.3，并且只有在 1.3 到 1.4 之后。但再次检查包，可能有从 1.2 到 1.4 的迁移脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T05:02:38.730

是的，我得到了线索。Orchard 1.4.1 中有一个名为 UpgradeTo14 的模块。该模块用于将数据库升级到新的果园版本。

有关详细信息： http: [//www.sarasota.me/blog/orchard-website-upgraded-to-1.4-autoroute-projector-module-and-new-fields](http://www.sarasota.me/blog/orchard-website-upgraded-to-1.4-autoroute-projector-module-and-new-fields)

# c - 为什么 pthread 不使用给定的堆栈空间？

> ID：10652226
> 
> 赞同：2
> 
> 时间：2012-05-18T11:56:57.780
> 
> 标签：c, memory, pthreads, stack

当创建一个新的`pthread`并传递一个用`pthread_attr_getstack`它修改的参数时，似乎没有使用定义的堆栈空间。

```
void* thread_function(void * ptr)
{
  int a;
  printf("stack var in thread %p\n",&a);
}

int main( int argc , char **argv )
{
  pthread_t thread;
  void * ptr = NULL;
  const int stack_size = 10*1024;

  void * stack = malloc(stack_size);
  printf("alloc=%p\n",&stack);

  pthread_attr_t attr;
  pthread_attr_init(&attr);
  pthread_attr_setstack( &attr , stack , stack_size );

  if (pthread_create(&thread, &attr, &thread_function , ptr ) ) {
    printf("failed to create thread\n");
    return 1;
  }

  pthread_attr_destroy(&attr);
  pthread_exit( 0 );
  return 0;
} 
```

不幸的是，输出是：

```
alloc=0x7fff48989bc8
stack var in thread 0x7f6e6f0d2ebc 
```

即使堆栈向后增长（我不确定）指针值差异很大，也只希望创建的线程使用不同的虚拟内存地址空间。但我认为情况并非如此。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T12:03:36.747

你打印错了，

```
printf("alloc=%p\n",&stack); 
```

打印本地堆栈变量的地址，而不是分配的内存。你所要做的

```
printf("alloc=%p\n",stack); 
```

此外，您需要检查错误：

> 错误
> 
> ```
>  pthread_attr_setstack() can fail with the following error:
> 
>    EINVAL stacksize is less than PTHREAD_STACK_MIN (16384) bytes.  On some
>           systems, this error may also occur if stackaddr or
>           stackaddr + stacksize is not suitably aligned. 
> ```

您只设置了 10kB 的堆栈，因此请使用更大的堆栈重试，并检查 pthread_attr_setstack 的返回值。

我可能会尝试使堆栈页面也对齐。

# opengl - 如何在 glsl 中切换着色器程序

> ID：10652227
> 
> 赞同：1
> 
> 时间：2012-05-18T11:57:00.780
> 
> 标签：opengl, glsl, volume, raycasting

我想使用可编程管道（使用 glsl）而不是固定管道进行体积渲染。我用 2 个着色器程序和 2 个通道来实现它，`exitPointProg`并且`rayCastProg`. 第一遍是获取立方体边界框的出口点（即背面），它将在下一次进行光线投射的过程中用作纹理。进行光线投射体积渲染的想法来自[这里](http://www.daimi.au.dk/~trier/?page_id=98)。我认为我已经做了大部分正确的事情，因为我已经使用固定管道和可编程管道实现了这一点。让我感到困惑的是，我在第一帧就达到了效果，并且随着闪光灯的闪烁，屏幕上的显示变成了全白（我设置了`glClearColor(1.0f, 1.0f, 1.0f, 1.0f)`. 我认为着色器程序或 FBO 的切换可能存在一些问题。这是我在 render() 函数中所做的。

1.  第一遍，使用着色器程序渲染到绑定了纹理的 fbo`exitPoints`以获得立方体边界框的出口点`exitPointProg`。
2.  2ed pass，将`exitPoints`纹理（绑定到）作为统一的 sampler2D 变量映射`GL_TEXTURE1`到着色器程序中，该变量将在着色器中使用。`rayCastProg`这里是`setupFBO`and`render`和两个子例程：`setupFBO()`函数：

    ```
    void SimpleRayCasting::setupFBO()
    {
        GLuint textureHandles[1];
        glGenTextures(1, textureHandles);
        entryPoints = textureHandles[0];

        glActiveTexture(GL_TEXTURE1);
        glBindTexture(GL_TEXTURE_2D, exitPoints);
        glTexEnvi(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_REPLACE);
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_BORDER);
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_BORDER);
        glTexImage2D(GL_TEXTURE_2D, 0,GL_RGBA16F, width, height, 0, GL_RGBA, GL_FLOAT, NULL);

        GLuint depthRenderBuffer;
        glGenRenderbuffers(1, &depthRenderBuffer);
        glBindRenderbuffer(GL_RENDERBUFFER, depthRenderBuffer);
        glRenderbufferStorage(GL_RENDERBUFFER, GL_DEPTH_COMPONENT, width, height);

        glGenFramebuffers(1, &frameBuffer);
        glBindFramebuffer(GL_FRAMEBUFFER, frameBuffer);
        glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, 
                        exitPoints, 0/* level */);
        glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, GL_RENDERBUFFER, 
                        depthRenderBuffer);

        checkFramebufferState(__FILE__, __LINE__);
        GLenum drawbufs[] = {GL_COLOR_ATTACHMENT0};
        glDrawBuffers(1, drawbufs);
        glBindFramebuffer(GL_FRAMEBUFFER,0);
    } 
    ```

    `render()`功能：

    ```
    void SimpleRayCasting::render()
    {
        getExitPoints();
        GLUtils::checkForOpenGLError(__FILE__,__LINE__);
        rayCasting();
        GLUtils::checkForOpenGLError(__FILE__,__LINE__);
    } 
    ```

    `getExitPoints()`功能：

    ```
    void SimpleRayCasting::getExitPoints() 
    {
        // render to the texture
        glBindFramebuffer(GL_FRAMEBUFFER, frameBuffer);
        glEnable(GL_DEPTH_TEST);
        glViewport(0, 0, width, height);
        // checkFramebufferState(__FILE__, __LINE__); 
        glClearColor(0.2f, 0.2f, 0.2f, 1.0);
        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
        exitPointsProg.use();
        // note that the model will recalculated.
        model = mat4(1.0f);
        model *= glm::rotate(angle , vec3(0.0f,1.0f,0.0f));
        model *= glm::rotate(90.0f, vec3(1.0f, 0.0f, 0.0f));
        model *= glm::translate(vec3(-0.5f, -0.5f, -0.5f));
        view = glm::lookAt(vec3(0.0f,0.0f,2.0f), vec3(0.0f,0.0f,0.0f), vec3(0.0f,1.0f,0.0f));
        projection = mat4(1.0f);
        projection = glm::perspective(60.0f, (float)width/(float)height,0.01f, 400.0f);   
        setMatrices(exitPointsProg);
        glEnable(GL_CULL_FACE);
        glCullFace(GL_FRONT);
        drawBoundBox();
        glDisable(GL_CULL_FACE);
        glBindFramebuffer(GL_FRAMEBUFFER, 0);
    } 
    ```

    `rayCasting`功能：

    ```
    void SimpleRayCasting::rayCasting()
    {
        // Directly render to the screen
        glBindFramebuffer(GL_FRAMEBUFFER, 0);
        glEnable(GL_DEPTH_TEST);
        glViewport(0, 0, width, height);
        glClearColor(1.0f, 1.0f, 1.0f, 1.0);
        glClear(GL_COLOR_BUFFER_BIT |  GL_DEPTH_BUFFER_BIT);
        rayCastProg.use();
        model = mat4(1.0f);
        model *= glm::rotate(angle, vec3(0.0f,1.0f,0.0f));
        model *= glm::rotate(90.0f, vec3(1.0f, 0.0f, 0.0f));
        model *= glm::translate(vec3(-0.5f, -0.5f, -0.5f));
        view = glm::lookAt(vec3(0.0f,0.0f,2.0f), vec3(0.0f,0.0f,0.0f), vec3(0.0f,1.0f,0.0f));
        projection = mat4(1.0f);
        projection = glm::perspective(60.0f, (float)width/(float)height,0.01f, 400.0f);   
        setMatrices(rayCastProg);
        rayCastProg.setUniform("StepSize", stepSize);
        glActiveTexture(GL_TEXTURE1);
        glBindTexture(GL_TEXTURE_2D, exitPoints);
        rayCastProg.setUniform("ExitPoints", 1);
        glActiveTexture(GL_TEXTURE4);
        glBindTexture(GL_TEXTURE_3D, volume_to);
        rayCastProg.setUniform("VolumeTex", 4);
        glActiveTexture(GL_TEXTURE5);
        glBindTexture(GL_TEXTURE_1D, transferFunc_to);
        rayCastProg.setUniform("TransferFunc", 5);
        glEnable(GL_CULL_FACE);
        glCullFace(GL_BACK);
        drawBoundBox();
        glDisable(GL_CULL_FACE);
        glBindFramebuffer(GL_FRAMEBUFFER, 0);
    } 
    ```

    我在 Qt 中使用从 QGLWidget 继承的类。正如我之前提到的，我只用第一帧就得到了正确的结果，然后它很快就消失了，变成了全白。不知道这是怎么回事，是shader程序的切换还是FBO的东西有问题？我一直在研究这个很长时间，但无法弄清楚，任何帮助将不胜感激！

**编辑询问** 是否有任何演示或教程演示如何将多个 glsl 着色器程序与 FBO 一起使用？

# php - php 获取 mysql 结果不是作为数组，而是作为文本

> ID：10652238
> 
> 赞同：-2
> 
> 时间：2012-05-18T11:57:57.753
> 
> 标签：php, mysql

我想得到如下文本结果：

```
+----+-------+----------------------------------+----+
| id | login | pwd                              | su |
+----+-------+----------------------------------+----+
|  1 | root  | c4ca4238a0b923820dcc509a6f75849b |  1 |
+----+-------+----------------------------------+----+
1 row in set (0.00 sec) 
```

在 PHP（字符串）中。

php中的示例：

```
$query = mysql_query("SELECT * FROM users");
for (; $row = mysql_fetch_assoc($query); $data[] = $row); 
```

我得到数组数组（$data）：

```
$data = 
   0 => (id=>1, login=>root..) 
```

但我想把它作为**字符串**：

```
+----+-------+----------------------------------+----+
| id | login | pwd                              | su |
+----+-------+----------------------------------+----+
|  1 | root  | c4ca4238a0b923820dcc509a6f75849b |  1 |
+----+-------+----------------------------------+----+
1 row in set (0.00 sec) 
```

顺便说一句，查询“insert into users set login = 'sp', pwd = 1, su = 0”，这个字符串必须是“Query OK, 1 row affected, 2 warnings (0.18 sec)”。

像 sql 终端虽然 php！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T12:04:16.507

要么调用`mysql`客户端作为外部命令，要么自己构建 ASCII 绘图表。你不能纯粹通过使用 PHP 的 MySQL 库函数来获得它。从我的头顶，

```
$result = `echo 'SELECT * FROM users' | mysql --user=username --password=password dbname`; 
```

（丑陋，缓慢，不安全，不推荐）；或者简单地将它作为数组，迭代，并用模仿什么的加号装饰`mysql`（推荐）。这真的很容易。

但是，我不知道您为什么要这样做，除非您将 PHP 程序用作命令行工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T12:50:04.650

将数据库结果收集到数组数组中（您的 $data 变量是正确的）

```
echo ascii_table($data); 
```

我从一个叫 stereofrog 的人那里偷了以下东西

```
function ascii_table($data) {

    $keys = array_keys(end($data));

    # calculate optimal width
    $wid = array_map('strlen', $keys);
    foreach($data as $row) {
        foreach(array_values($row) as $k => $v)
            $wid[$k] = max($wid[$k], strlen($v));
    }

    # build format and separator strings
    foreach($wid as $k => $v) {
        $fmt[$k] = "%-{$v}s";
        $sep[$k] = str_repeat('-', $v);
    }
    $fmt = '| ' . implode(' | ', $fmt) . ' |';
    $sep = '+-' . implode('-+-', $sep) . '-+';

    # create header
    $buf = array($sep, vsprintf($fmt, $keys), $sep);

    # print data
    foreach($data as $row) {
        $buf[] = vsprintf($fmt, $row);
        $buf[] = $sep;
    }

    # finis
    return implode("\n", $buf);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T01:45:35.520

您可以查询以下sql：

```
SELECT GROUP_CONCAT(id, ' | ', login, ' | ', pwd, ' | ', su) 
```

`AS 'User Object' FROM users group by id`

结果将是：

![在此处输入图像描述](../Images/97c4206a25ab3c94381b22d49c51ca10.png)

# asp.net - 如何选择当前会话的最近插入的记录 ID？

> ID：10652239
> 
> 赞同：2
> 
> 时间：2012-05-18T11:57:59.840
> 
> 标签：asp.net, sql-server, sql-server-2008-r2, asp.net-4.0

我正在使用带有 SQL Server 2008 R2 和 PetaPoco ORM 的 ASP.NET 4.0。

Web 表单由选项卡面板组成，例如：

-- 员工一般信息

- 约定

- 教育

每个选项卡面板条目都转到 SQL Server 中的特定表。我有一个主表employee，主键empID。其他表，即约会，教育等都与empID相关。

我有多种方法可以在各个表中保存记录：

**AddGeneralInformation**保存常规信息选项卡面板记录。

**AddAppointment**保存约会详情等。

该应用程序在多个用户插入或更新记录的并发环境中使用。

对于插入新记录的第二种和第三种方法，这些方法必须具有正确的 empID。一旦第一种方法（一般信息）保存了记录，empID 将用于其他方法。

问题是，如果我使用：

```
Select max(empID) 
```

那么它不会选择正确的empID，因为许多用户正在插入记录。

在解决方案上，我觉得是使用包含 SessionID 的另一列并使用此查询：

```
Select max(empID) where sessionID = SessionID 
```

有没有更可靠的方法来做到这一点？

** 已编辑 **

```
 protected void btnSave_Click(object sender, EventArgs e)
    {
        Session.Add("TaskFlag", "New");
        AddUpdateEmployee();
        AddUpdateAddress();
    }

protected void AddUpdateEmployee()
{
    var db = new PetaPoco.Database("cnWeb");   
    var emp = new employee();                  */

    using (TransactionScope scope = new TransactionScope())
    {
        db.BeginTransaction();

        emp.deptcode = txtEmpCode.Text.TrimEnd();
        emp.empname = txtEmpName.Text.TrimEnd();
        emp.guardianname = txtGuardian.Text.TrimEnd();
        emp.relationwithemployee = ddlRelation.Text.TrimEnd();
        emp.gender = ddlGender.SelectedItem.Text;
        emp.dateofbirth = Convert.ToDateTime(txtDOB.Text.TrimEnd());

        if (Session["TaskFlag"].ToString() == "New")
            db.Insert(emp);
        else if (Session["TaskFlag"].ToString() == "Update")
            db.Update<employee>("SELECT * FROM employee WHERE empid = @0", Session["EmployeeID"]);

        reuse.CustomClientMessage("Record Saved", this.Page);
        ClearFields();
        /* Commit Transaction */
        db.CompleteTransaction();
        scope.Complete();
    }
}

protected void AddUpdateAddress()
{
    var db = new PetaPoco.Database("cnWeb");    
    var addr = new emp_address();

    using (TransactionScope scope = new TransactionScope())
    {
        db.BeginTransaction();

        /* Permanaent Address */
        addr.perm_houseno = txtPermHouse.Text.TrimEnd();
        addr.perm_street = txtPermStreet.Text.TrimEnd();
        addr.perm_place = txtPermCity.Text.TrimEnd();
        addr.perm_pincode = txtPermPincode.Text.TrimEnd();
        addr.perm_landlinephone = txtPermLandline.Text.TrimEnd();
        addr.perm_mobilephone = txtPermMobile.Text.TrimEnd();

        if (Session["TaskFlag"].ToString() == "New")
            db.Insert(addr);
        else if (Session["TaskFlag"].ToString() == "Update")
            db.Update<emp_address>("SELECT * FROM emp_address WHERE empid = @0", Session["EmployeeID"]);

        /* Commit Transaction */
        db.CompleteTransaction();
        scope.Complete();
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T12:00:15.240

最佳解决方案：将您的`EmpID`列设为`INT IDENTITY`SQL Server 并让数据库处理详细信息。

您在代码中梦想的任何东西（T-SQL 或 C#）很可能会出现一些问题，并且在负载下无法正常工作 - 为什么不直接使用现有的、有效的和经过数十万用户测试的东西呢？

将行插入到具有`INT IDENTITY`列的表中后，您可以使用

```
DECLARE @NewEmpID INT
SELECT @NewEmpID = SCOPE_IDENTITY() 
```

或者，您可以在声明中使用该`OUTPUT`子句`INSERT`

```
INSERT INTO dbo.YourTableHere(List of columns)
OUTPUT Inserted.EmpID
VALUES(list of value here) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T12:08:43.237

`created_date`在 Employee General Information 表中创建一个新列，如datetime 并获取最新记录。

试试这个程序

```
create Procedure Get_LastRow 
```

`(`

`-- Table name to retrieve last record`

`@Tname Varchar(50)`

`)`

`AS`

`BEGIN`

```
EXECUTE ('DECLARE GETLAST CURSOR DYNAMIC FOR SELECT * FROM ' + @Tname) 
```

`OPEN GETLAST`

`FETCH LAST FROM GETLAST`

`CLOSE GETLAST`

`DEALLOCATE GETLAST`

`END`

执行这样的程序。

```
EXEC Get_LastRow 'dbo.TableA' 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-18T12:04:34.510

就在插入查询之后，您是**SELECT @@IDENTITY**。您字段 EmpID 需要是 IDENTITY 才能工作。

# iphone - 在 UIScrollView 中使用滑动手势而不禁用水平和垂直滚动

> ID：10652241
> 
> 赞同：2
> 
> 时间：2012-05-18T11:58:03.417
> 
> 标签：iphone, uiscrollview, scroll, gesture, swipe

我查看了其他解决方案，但我找不到适合自己的解决方案。我有一个`UIImageView`inside a `UIScrollView`，我在其中展示大图。

我在我`UIScrollView`的左右滑动手势识别器中启用了捏合手势。

现在，scrollview 的平移手势似乎禁用（或损坏）滑动手势。我不想在我的 上禁用水平或垂直滚动`UIScrollView`​​，并且我的照片的初始缩放太大而无法禁用水平滚动。

**我想要做的是当我来到 UIScrollView 的边缘时触发滑动手势。**

这里有一些代码；

```
- (void)viewDidLoad
{
    // recognizer for pinch gestures
    UIPinchGestureRecognizer *pinchRecognizer =[[UIPinchGestureRecognizer alloc]initWithTarget:self action:@selector(handlePinch:)];
    [self.myScrollView addGestureRecognizer:pinchRecognizer];
    [self.myScrollView setClipsToBounds:NO];

    // recognizer for swipe gestures
    UISwipeGestureRecognizer *recognizer;

    // left and right swipe recognizers for left and right animation
    recognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(handleLeftSwipe:)];
    [recognizer setDirection:(UISwipeGestureRecognizerDirectionRight)];
    [[self myScrollView] addGestureRecognizer:recognizer];

    recognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(handleRightSwipe:)];
    [recognizer setDirection:(UISwipeGestureRecognizerDirectionLeft)];
    [[self myScrollView] addGestureRecognizer:recognizer];
    .... 
```

我的左滑动处理程序，目前左右滑动没有任何附加功能

```
-(void)handleLeftSwipe:(UISwipeGestureRecognizer *)recognizer
{    
    if(!self.tableView.hidden) self.tableView.hidden = YES;
    [self showRequiredStuff];
    CATransition *transition = [CATransition animation];
    transition.duration = 0.75;
    transition.timingFunction = [CAMediaTimingFunction     functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
    transition.type = kCATransitionPush;
    transition.subtype =kCATransitionFromLeft;
    transition.delegate = self;
    [self.view.layer addAnimation:transition forKey:nil]; 
```

我的初始屏幕尺寸；

```
#define IMAGE_VIEW_WIDTH 320.0
#define IMAGE_VIEW_HEIGHT 384.0 
```

我对图片使用缩放，使它们尽可能小，但大多数是宽图像，在这种情况下启用水平滚动，禁用垂直滚动。虽然我的滑动处理程序也是水平的。

我想我已经清楚地解释了发生了什么以及我需要什么。我发布了代码，因为我是 iphone 应用程序开发的新手，我都想帮助其他人尽可能多地看到代码，也许有人会指出任何不好的编程，我们都会从中受益。

相关解决方案的其他发现；设置后；

```
@interface myViewController () <UIScrollViewDelegate> 
```

和

```
self.myScrollView.delegate = self; 
```

水平检测是否到达边缘

```
- (BOOL) hasReachedAHorizontalEdge {
    CGPoint offset = self.myScrollView.contentOffset;
    CGSize contentSize = self.myScrollView.contentSize;
    CGFloat height = self.myScrollView.frame.size.height;
    CGFloat width  = self.myScrollView.frame.size.width;

if ( offset.x == 0 || 
    (offset.x + width) == contentSize.width ) {
    return YES;
}

    return NO; 
```

}

```
- (void) scrollViewDidScroll:(UIScrollView *)scrollView {
    if ( [self hasReachedAHorizontalEdge] ) {
        NSLog(@"Reached horizontal edge.");
        // required here 
    }
} 
```

此时，我只需要禁用到达末端的滚动，等等。如果我到达滚动的右边缘，我只需要禁用右滚动，这样就会触发滑动。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-09T02:54:15.490

我在滚动视图的边缘添加了一个薄 UIView 并让它们识别滑动。我无法让 scrollView 与另一个滑动手势识别器合作。这并不理想，但它现在有效。我将不得不调查是否有办法覆盖滚动视图的滑动手势识别器。

诀窍是检查滑动是否在边缘附近开始，然后决定是调用滚动视图还是我的滑动识别器。

# android - NFC 标签的应用程序与移动网站的优缺点

> ID：10652252
> 
> 赞同：0
> 
> 时间：2012-05-18T11:58:43.600
> 
> 标签：android, ios, blackberry, mobile, nfc

我目前正在研究构建一个适用于近场通信 (NFC) 标签的移动解决方案。

这将主要用于大城市，以允许用户快速接收指向移动网站的 URL。

第一个阶段必须是移动网络，因为 NFC 标签无法启动应用程序，但是对于第二组交互和持续保留，使用移动网站而不是原生应用程序的主要优点/缺点是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T02:45:03.677

对于任何大规模部署解决方案，带有 URL NDEF 记录的标记将是唯一的选择，因为您无法对应用程序是否已安装这一事实做出任何假设。标签也可以被不同操作系统的NFC手机读取，最好有移动优化的网站。

至于 Android，我相信在 2012 年底几乎每部手机都将配备 NFC - 现在有大约 20 种型号可供选择，并且新型号即将推出，NFC 已在许多 RIM 和 Symbian（以及 N9 MeeGo）设备上使用，诺基亚正在启动在 WP7 中使用 NFC（请参阅 Lumia 610）。iPhone 有 iCarte 配件，但并未大规模部署，但传闻称 iPhone5 配备 NFC ......

当然，您可以通过链接到适当的应用程序商店在移动网站上提供应用程序下载。

BR 斯坦

# c# - 控件的命名

> ID：10652258
> 
> 赞同：0
> 
> 时间：2012-05-18T11:59:21.727
> 
> 标签：c#

我的项目中有一个名为 PM_WorkOrders.ascx 的 .ascx 控件。出现错误时，名称称为 PM_WorkOrders_ascx。什么时候在我的项目中重命名该控件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T12:00:56.877

它是从 Visual Studio 生成的名为的类，您可以根据需要从后面的代码中更改它并更新控制指令以指向新的类名

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T12:04:26.857

ASP.NET 网站中的用户控件类背后的代码由 MSBuild 编译为 MyUserControl_ascx，并位于命名空间 ASP 中。我认为解决它的唯一方法是让您的网站成为 Web 应用程序，但不能 100% 确定这一点。

# php - MySQL 5.5 信号和 PDO 异常

> ID：10652273
> 
> 赞同：0
> 
> 时间：2012-05-18T12:00:20.573
> 
> 标签：php, mysql

我有一个 MySQL 表的触发器，当提供的数据有问题时，它会引发 SIGNAL 异常。如何使用 PDO 在 PHP 中捕获此异常？

提前致谢。

更新

关于我的问题的更多信息：我在一个事务中执行多个查询，如果其中一个因为有信号而失败，我想回滚事务。当前激活了一个信号，但执行了所有其他查询。

另一个更新

到目前为止，我有：

```
try {
  $db->beginTransaction();

  if (!$db->query('UPDATE accounts SET amount = amount - 10 WHERE id = 1')) {
    throw new Exception($db->errorInfo()[2]);
  }

  if (!$db->query('UPDATE accounts SET amount = amount + 10 WHERE id = 2')) {
    throw new Exception($db->errorInfo()[2]);
  }

  $db->commit();
} catch (Exception $e) {
  $db->rollback();
  echo 'There was an error: ' . $e->getMessage();
} 
```

这是处理异常进行事务的正确方法吗？对不起，如果我的问题太宽泛了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T12:07:11.427

尝试类似：

```
$ls_error = "";
$mysqli->autocommit(FALSE);
// first sql
if (!$mysqli->query($sql)) {
    $ls_error .= sprintf("Error: %d: %s\n",$mysqli->errno,  $mysqli->error);
    $mysqli->rollback();
}
// second one
if ($ls_error == "") {
    if (!$mysqli->query($sql)) {
        $ls_error .= sprintf("Error: %d: %s\n",$mysqli->errno,  $mysqli->error);
        $mysqli->rollback();
    }
}

// third one
if ($ls_error == "") {
    if (!$mysqli->query($sql)) {
        $ls_error .= sprintf("Error: %d: %s\n",$mysqli->errno,  $mysqli->error);
        $mysqli->rollback();
    }
}
if ($ls_error == "") {
    $mysqli->commit();
} else {
    echo $ls_error;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-11T21:07:31.973

抽象的例子。我的解决方案没有任何问题。

扳机：

```
IF NEW.value < 0 THEN
  SET @msg = CONCAT('Wrong count_from value! ', NEW.value);
  SIGNAL SQLSTATE 'HY000' SET MESSAGE_TEXT = @msg;
END IF; 
```

php (PDO):

```
try {
  $conn->query('INSERT INTO `table` SET `value` = -1');
} catch (Exception $err) {
  $error_message = $conn->query('SELECT @msg')->fetchColumn();
} 
```

# ios - 关闭已交付的 UILocalNotification？

> ID：10652274
> 
> 赞同：11
> 
> 时间：2012-05-18T12:00:25.307
> 
> 标签：ios, uilocalnotification, uiapplication

是否有可能做到这一点？`UIApplication's` `scheduledLocalNotifications`似乎没有返回已经发送到用户通知中心的通知，所以我认为这可能是设计使然，但我找不到任何有据可查的证据。

有人知道吗？

谢谢！

编辑：发现这个：

> 您可以通过在应用程序对象上调用 cancelLocalNotification: 来取消特定的计划通知，并且您可以通过调用 cancelAllLocalNotifications 来取消所有计划的通知。这两种方法也以编程方式关闭当前

这里：http: [//developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/IPhoneOSClientImp/IPhoneOSClientImp.html](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/IPhoneOSClientImp/IPhoneOSClientImp.html)

但是，如果`scheduledLocalNotifications`没有给我已经发送的通知，我如何获得对已发送通知的引用？

编辑2：

在我注册了一些通知之后，这就是我想要做的事情：

```
UIApplication *app = [UIApplication sharedApplication];

for (UILocalNotification *localNotification in app.scheduledLocalNotifications) 
{
     if (someCondition) {
            [app cancelLocalNotification:localNotification];
        }
     }
} 
```

问题是，一旦它们被交付，它们就不再处于“scheduledLocalNotifications”中。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-27T09:37:13.590

您可以通过将新创建的通知添加到您自己`NSMutableArray`的通知中来解决此问题，并检查该数组而不是`app.scheduledLocalNotifications`. 像这样的东西：

`NSMutableArray`在您的 Viewcontrollers .h 文件中添加一个：

```
NSMutableArray *currentNotifications; 
```

在启动 ViewController 时启动它

```
currentNotifications = [[NSMutableArray alloc] init]; 
```

启动通知时，还将其添加到您的数组中：

```
UILocalNotification *notification = [[UILocalNotification alloc] init];
...
[currentNotifications addObject:notification];
[[UIApplication sharedApplication] presentLocalNotificationNow:notification]; 
```

稍后当您想取消该通知时，请改为在您的数组中查找它。也将其从您的阵列中删除：

```
for (UILocalNotification *notification in currentNotifications) {
    if (someCondition) {
        [[UIApplication sharedApplication] cancelLocalNotification:notification];
        [currentNotifications removeObject:notification];
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-02-07T12:53:06.390

从 iOS10 开始，如果您已经过渡到使用`UNUserNotificationCenter`.

苹果文档状态：

`func getDeliveredNotifications(completionHandler: @escaping ([UNNotification]) -> Void)`

> 为您提供仍显示在通知中心的应用通知列表。

`func removeDeliveredNotifications(withIdentifiers: [String])`

> 从通知中心删除指定的通知。

`func removeAllDeliveredNotifications()`

> 从通知中心删除所有应用程序的通知。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-18T21:59:14.163

我也一直在寻找这个问题的答案。我的问题是我想“清理”通知中心中所有与应用程序相关的通知，以防用户从其停靠图标打开应用程序（因为这对先前触发的通知没有*任何作用......）*

幸运的是，这似乎`cancelAllNotifications`不仅取消了预定的，而且还取消了一切。所以我只是在爆破它们之前保留对现有预定通知的参考，然后相应地重新安排它们：

```
UIApplication *app = [UIApplication sharedApplication];

NSLog(@"\nScheduled notif count (prior) = %d", app.scheduledLocalNotifications.count);

NSArray *scheduledNotifs = app.scheduledLocalNotifications; // hold on to a reference

[[UIApplication sharedApplication] cancelAllLocalNotifications]; // blast everything

NSLog(@"\nScheduled notif count (post-wipeout) = %d", app.scheduledLocalNotifications.count);

for (UILocalNotification *notif in scheduledNotifs) {
    [app scheduleLocalNotification:notif]; // put them back
}

NSLog(@"\nScheduled notif count (post-repopulation) = %d", app.scheduledLocalNotifications.count); 
```

不确定这是否对任何人有帮助，但这对我的情况很有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-18T12:17:33.957

试试这个链接：

[苹果文档](https://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html)

[一些教程](http://www.iostipsandtricks.com/ios-local-notifications-tutorial/)

并且本地通知正在注册到设备通知中心，而不是在您的应用程序中。

但是，如果您的应用程序正在运行，并且是通知时间，那么您可以在游戏中获取通知参数：

```
-(void) application:(UIApplication*)app didReceiveLocalNotification:(UILocalNotification*) notification
{
// local notification is geted
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-09-04T04:36:18.977

如果您还将通知保存在 NSUserDefaults 中，则可以在安排通知时执行此操作，使用 NSKeyedArchiver 将其转换为 NSData。

要将其作为 UILocalNotification 取回，请使用 NSKeyedUnarchiver。然后，您可以使用 cancelLocalNotification 方法将其删除。

[在这里](https://stackoverflow.com/a/32389835/2829102)充分解释（Swift 版本 + 原始 Obj-C 解决方案的链接）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-18T13:51:24.900

看到您更新的代码后，您似乎有兴趣在 for 循环中取消所有通知，因此您可以使用 -

```
 [[UIApplication sharedApplication] cancelAllLocalNotifications]; 
```

# jquery - 如何让数据线从 0 开始并转到第一个数据点 Flot

> ID：10652276
> 
> 赞同：2
> 
> 时间：2012-05-18T12:00:27.653
> 
> 标签：jquery, flot

![在此处输入图像描述](../Images/ec14261145d48fd01c77f8d24c25a8ba.png)

在图表的开头，我希望线条从 0 到第一个数据点。这在 FLOT 中是否可能。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T12:03:17.420

```
$.plot($('#placeholder'), [data]); // is the format 
```

在`data`数组中，您需要像`[0,0]`最初一样推送一个数组。例如，`data`数组将如下所示：

```
[0, 0], [1, 10],... 
```

# facebook-graph-api - Graph API速率限制，邮箱API

> ID：10652280
> 
> 赞同：0
> 
> 时间：2012-05-18T12:00:47.487
> 
> 标签：facebook-graph-api, limit

我正在从事具有 3 个主要流程的 CRM 项目

1.  向我们的客户发送消息

    我读过 Facebook 目前出于垃圾邮件的原因禁止通过 API 发送消息。有什么选择吗？也许使用对话 API？使用 Dialogues API 仍然可能是垃圾邮件？但这不是垃圾邮件。我们有仔细的内在过程。

2.  在服务器上为许多身份验证帐户张贴在墙上（我/朋友）。

    其他帖子（[Facebook's Graph API 上的发布限制](http://facebook.stackoverflow.com/questions/3465719/publish-limit-on-facebooks-graph-api)）说有一个发布限制（每个令牌/配置文件的存储桶分配。当时每天 20-24 个）。这仍然有效吗？这包括在我的墙上和朋友上发布吗？还是只有朋友？我？

3.  从我们的客户那里获得对服务器上许多身份验证帐户的响应。

    也可能存在一些限制。我读到有 600/600 秒的 API 限制。这是每个访问令牌吗？还是每个 IP？每个应用程序？那是 GET 请求吗？POST或两者兼而有之？

谢谢

# javascript - 在另一个选择框被更改后获取选择框的值

> ID：10652284
> 
> 赞同：0
> 
> 时间：2012-05-18T12:01:05.803
> 
> 标签：javascript, html

我正在尝试实现闰年下拉 DOB 选择器。

所以我按这个顺序有三个选择框：

```
<select id='selectYear' >
//php to populate this list
</select>

<select id='selectMonth'>
//php to populate this list
</select>

<select id='selectDate' >
//php to populate this list
</select> 
```

我想要做的甚至是在月份 DDL 中添加一个 onChange，在该 DDL 中它获取选定的值以及 selectYear DDL 的选定值，这样我就可以填充 selectDate DDL。

如何获取 selectYear DDL 的值，以便将其作为参数发送？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T12:04:52.747

你的意思是：

```
<select id='selectMonth' onchange="doSometing(this.value);">
....
</select>

function doSometing(selectedMonth) {
    var year = document.getElementById("selectYear");
    var selectedYear = year.options[year.selectedIndex].value;
    console.log("My Selected Month:"+selectedMonth);
    console.log("My Selected year:"+selectedYear);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T12:05:06.857

关于该主题的一个很好的[链接。](http://www.codeboss.in/web-funda/2009/10/30/get-selected-index-and-option-text-with-javascript/)简单来说：

```
var element = document.getElementById("selectYear");
var value = element.selectedIndex < 0 ? null : element.options[element.selectedIndex].value; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T12:06:54.470

如果您使用的是 JQuery：

```
$("#selectMonth").change( function() {
  //This is the value of the selectlist
  val = $(this).val();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T12:07:15.080

如果您使用的是简单的 javascript，那么您可以使用元素的“selectedIndex”属性：

在此链接上查找示例：http: [//www.w3schools.com/jsref/prop_select_selectedindex.asp](http://www.w3schools.com/jsref/prop_select_selectedindex.asp)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T12:23:33.743

你可以这样做：---

```
<select id='selectYear' >
        //php to populate this list
        </select>

        <select id='selectMonth'>
        //php to populate this list
        </select>

        <select id='selectDate' >
        //php to populate this list
        </select> 
```

你的脚本：--

```
 jQuery('#selectYear, #selectMonth, #selectDate').change(function() {
                var selectYear = '';
                var selectMonth = '';
                var selectDate = '';
            var selectYear= jQuery('#selectYear').val();
            var selectMonth= jQuery('#selectMonth').val();
            var selectDate= jQuery('#selectDate').val();
var format= selectYear + selectMonth + selectDate;
alert(format);
            }); 
```

# iphone - ImageIO：CGImageRead_mapData 'open' failed error = 2 on app start

> ID：10652289
> 
> 赞同：1
> 
> 时间：2012-05-18T12:01:38.230
> 
> 标签：iphone, crash, javax.imageio, libpng

我制作了一个 iphone 应用程序并使用 5.0.0 构建它。在 5.0.1 上它工作正常。当我尝试在 5.1 或 5.1.1 上打开应用程序时，应用程序会立即崩溃。

在日志中有以下条目：

`ImageIO: CGImageRead_mapData 'open' failed '/Applications/myApp.app/Icon.png' error = 2 (No such file or directory) libpng error: No IDATs written into file`

我打开了文件夹，Icon.png 存在！！

希望可以有人帮帮我 ：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T11:08:23.917

请在您的应用程序 plist 文件中的行**图标文件**下添加 icon.png 。![在此处输入图像描述](../Images/24f3349bc3e6678d675cf231f88a573d.png)

# asp.net - 在 asp.net 页面中禁用验证控件

> ID：10652291
> 
> 赞同：0
> 
> 时间：2012-05-18T12:02:03.583
> 
> 标签：asp.net, vb.net, validation, button

我的`asp.net`页面有多个`text-boxes`，并且`DropDownLists`都有必填字段验证器。

我的网站还有多个页面，您可以通过单击按钮在它们之间移动。（所有页面都有所有按钮）当一个页面加载并决定我想转到另一个页面而不在表单中输入信息时，我单击一个按钮移动到一个单独的页面并且弹出验证并且我无法更改页面，它每次都阻止我？

关于如何阻止这种情况的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-16T17:48:37.903

我知道您已经找到了解决方案，但我只是想提供另一种方法供人们查看。使用验证器时，通常使用 ValidationGroups。当一个验证器属于一个 ValidationGroup 时，它只会被该验证组中的另一个控件触发。例如：

```
<asp:TextBox ID="NameBox" runat="server"/>
<asp:RequiredFieldValidator ID="NameVal" ControlToValidate="NameBox"
    ValidationGroup="ValSubmit" runat="server"/>
//...More input fields and validators...

<asp:Button ID="SubmitButton" ValidationGroup="ValSubmit" runat="server"/> 
```

使用此方法，任何具有“ValSubmit”ValidationGroup 的验证器将仅由 SubmitButton 触发，而不会由其他控件触发。现在，您不必将 CausesValidation="false" 放在导致回发的所有其他内容上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T12:12:07.103

正如其他人所提到的，将 CausesValidation 属性设置为 false。

```
<asp:Button ID="MyButton" Text="Go Back" CausesValidation="False" /> 
```

这直接来自[Microsoft 帮助页面](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.causesvalidation.aspx)：

默认情况下，单击 Button 控件时会执行页面验证。页面验证确定与页面上的验证控件关联的输入控件是否都通过验证控件指定的验证规则。

您可以使用 CausesValidation 属性指定或确定在单击 Button 控件时是否在客户端和服务器上执行验证。要防止执行验证，请将 CausesValidation 属性设置为 false。

注意：当您使用 PostBackUrl 属性回发到不同的页面时，您应该将 CausesValidation 属性设置为 false。回发到其他页面时，您应该明确检查验证。有关示例，请参阅 PostBackUrl 属性的备注部分。对于重置或清除按钮，此属性通常设置为 false，以防止在单击按钮时执行验证。

当 CausesValidation 属性的值设置为 true 时，您还可以使用 ValidationGroup 属性来指定 Button 控件对其进行验证的验证组的名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T12:06:39.237

将属性设置`CausesValidation = "false"`为您不想触发验证的按钮

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T12:06:55.353

`CausesValidation="false"`在按钮上；）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T12:08:25.357

```
<asp:Button CausesValidation="True|False" /> 
```

***获取或设置一个值，该值指示单击 Button 控件时是否执行验证。***

阅读有关[Button.CausesValidation 属性的更多信息](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.causesvalidation.aspx)

# python - 阅读包括俄语、韩语等多种语言的网页

> ID：10652306
> 
> 赞同：1
> 
> 时间：2012-05-18T12:03:12.510
> 
> 标签：python

每个人。

对于我的研究项目，我收集了一些网页。

例如，[http ://git.gnome.org/browse/anjuta/commit/?id=d17caca8f81bb0f0ba4d341d6d6132ff51d186e3](http://git.gnome.org/browse/anjuta/commit/?id=d17caca8f81bb0f0ba4d341d6d6132ff51d186e3)

正如你在上面的网页中看到的，提交者的名字不是英文的。

其他网页也有提交者的名字，用各种语言而不是英语写成。

以下代码用于处理提交者的姓名。

```
import csv
import re
import urllib

def get_page (link):
    k = 1
    while k == 1:
        try:
            f = urllib.urlopen (link)
            htmlSource = f.read()
            return htmlSource
        except EnvironmentError:
            print ('Error occured:', link)
        else:
            k = 2
    f.close()

def get_commit_info (commit_page):
    commit_page_string = str (commit_page)

    author_pattern = re.compile (r'<tr><th>author</th><td>(.*?)</td><td class=', re.DOTALL)
    t_author = author_pattern.findall (commit_page_string)

    t_author_string = str (t_author)
    author_point = re.search (" &lt;", t_author_string)
    author = t_author_string[:author_point.start()]

    print author

git_url = "http://git.gnome.org/browse/anjuta/commit/?id=d17caca8f81bb0f0ba4d341d6d6132ff51d186e3"
commit_page = get_page (git_url)
get_commit_info (commit_page) 
```

'print author' 的结果如下：

\xd0\x9c\xd0\xb8\xd1\x80\xd0\xbe\xd1\x81\xd0\xbb\xd0\xb0\xd0\xb2 \xd0\x9d\xd0\xb8\xd0\xba\xd0\xbe\xd0 \xbb\xd0\xb8\xd1\x9b

如何准确打印名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T12:39:50.117

嗯......这会做你想要的

```
author = 'Мирослав Николић'
print author.decode('utf8') # Мирослав Николић 
```

但如果编码不是 UTF8，它也将不起作用......

大多数事情使用utf8。大多。

Unicode 是一种复杂的东西，让你难以理解。'author' 是一个包含字节的字符串对象。这些字节中没有任何信息可以告诉您这些字节代表什么。绝对没有。你必须告诉 Python 这个字节串是 UTF8 中的代码点。对于您遇到的每个字节，在 UTF8 代码表中查找它，看看它代表的是哪个 UTF8 unicode 字形。

您可以通过查看元标记来检测每个页面的编码。在 html5 中，它们看起来像这样：

```
<meta charset="utf-8">. 
```

# java - CellEditor 简单组合框 保存数据以存储

> ID：10652309
> 
> 赞同：0
> 
> 时间：2012-05-18T12:03:18.293
> 
> 标签：java, user-interface, gxt

最终的解决方案看起来像这样：

```
grid.addListener(Events.AfterEdit, new Listener<GridEvent<BeanModel>>() {
    @Override
    public void handleEvent(GridEvent<BeanModel> be) {
        try{
             // get column where combo box is, in this case, column 2
             if (be.getColIndex == 2) {
                  BeanModel m = be.getModel();
                  DataObjectInStore data = be.getBean();
                  // convert bean model to object if needed before saving to data
                  ValueObject v = (ValueObject) be.getValue();
                  data.setComboValue(v);
} 
```

==================================================== =================================

我创建了一个 CellEditor，它是一个 SimpleComboBox 对象。`grid.getStore().getModels()`看起来它工作正常，但是当我执行 a并检索数据时，我似乎错过了一步。从组合框中选择的值不会保存到存储中。我怎样才能让它正确保存到商店？

网格本身非常复杂。我将尝试提供一个相同的简化版本。

```
editor = new CellEditor(comboBox) {
@Override 
public Object preProcessValue(Object value) {  
   if (value == null) {  
     return  null;  
}  
return comboBox.findModel(null);  
 }  

  @Override  
  public Object postProcessValue(Object value) {  
    if (value == null) {  
      return null;  
    }  
    SimpleComboBox<BeanModel> bean = (SimpleComboBox<BeanModel>) value;
      return bean.getValue().getBean();
}  
};  

configs.setEditor(editor) // configs = ColumnConfig

cm = new ColumnModel(configs);
grid = new Grid<BeanModel>(cm, store); 
```

网格的存储是 GridDataObject 的 BeanModel，其中包含字符串和数据对象等变量。`comboBox`是dataObject的BeanModel的集合。dataObject 的值包含标识数据库中的条目的 id 和 stringvalue。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T13:07:27.827

我遇到的问题是，当下拉完成编辑时，它没有正确读取值，因为它是 beanmodel 中的一个对象，所以我必须添加一个 gridevent 侦听器，它会在每次完成编辑时检查并设置正确的当时的价值。

# android - Android/Java：我如何实现 AsyncTask？

> ID：10652320
> 
> 赞同：0
> 
> 时间：2012-05-18T12:04:17.560
> 
> 标签：android, crash, android-asynctask

我制作了一个应用程序，它以指定的时间间隔向网络服务器发送请求并获取 XML 数据。然后它解析 XML 数据，从电话中获取信息（短信、联系人或类似的东西），并通过 http post 请求将其发送回服务器。

问题是应用程序通常需要几秒钟才能获取信息，这通常会使应用程序崩溃。出现一个对话框，说应用程序已无响应，并询问我是否要关闭应用程序或等待，如果我按下等待它最终会再次开始工作。

AsyncTask 是解决这个问题的正确方法吗？

我不太了解的另一件事是 AsyncTask 的实际工作原理。假设我有两种方法可以做很多工作并使应用程序崩溃，我可以将它们都放在一个 AsyncTask 中并从 doInBackground() 中调用它们吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T12:16:08.583

我也实现了你正在尝试的类似的东西。即向服务器发送请求，接收 XML 响应，解析 XML，显示结果。[查看这个](https://stackoverflow.com/questions/8941796/asynctask-or-handler-which-one-is-better-for-time-consuming-network-interaction)。我为此使用了 AsyncTask。

这是我使用 AsynTask 实现它的方式

```
private class AsyncClass extends AsyncTask<Void, Void, Bundle>{
    @Override
protected Bundle doInBackground(Void... arg0) {
    Bundle b=startProcess();        

// startBundle() method do all the processing and return result in a bundle. You can as many methods from within startBundle() method

    return b;
}       

@Override
protected void onPostExecute(Bundle result) {
    Log.d(TAG , "In onPostExecute");
    dialog.dismiss();
    if(result==null)
        Toast.makeText(cont, "Can't process query.\nTry again later.", Toast.LENGTH_LONG).show();
    else{
        Intent in = new Intent(cont, QueryResultDisplay.class);
        Log.d(TAG , "Displaying");
        in.putExtras(result);        
        cont.startActivity(in);           
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T12:33:50.883

我给你简要描述一下你的问题。

有很多可能您没有从服务器获取数据

1.  如果您的网络速度很慢，并且您尝试从服务器和 XML 数据中获取所有信息，那么在这种情况下，如果网络崩溃，则会显示错误

2.  如果您向不在服务器中的页面发出请求

现在，如果您在代码中遇到问题，那么我会为您提供我在项目中实现的 AsyncTask 类的完整代码，它工作正常。

```
private class GetLoginResponse extends AsyncTask<Void, Void, Boolean> {
    private ProgressDialog progressDialog;
    private String email;
    private String password;

    public GetLoginResponse(String emailId, String paswd) {
        this.email = emailId;
        this.password = paswd;
    }

    @Override
    protected void onPreExecute() {
        progressDialog = ProgressDialog.show(LoginActivity.this, "",
                "Loading....", true, false);
    }

    @Override
    protected Boolean doInBackground(Void... params) {

        try {
            DefaultHttpClient httpclient = new DefaultHttpClient();
            HttpGet httpGet = new HttpGet(url);
                            HttpResponse response = httpclient.execute(httpGet);
        //here u can check the reponse is ok and 200 
                         } catch (NetworkException e) {
            isNetworkError = true;
        }
        return false;
    }

    @Override
    protected void onPostExecute(Boolean data) {
        progressDialog.dismiss();
        System.out.println("lOGIN RESPONSE for email = " + email + data);
    }
}// end AsyncTask 
```

这将解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T12:08:04.883

是的，您可以使用 AsyncTask。

在 doInBackground() 中调用的代码不得接触 UI。

您可以使用 publishProgress() 触摸 UI 线程。

# domain-driven-design - CQRS & DDD - 使用 cqrs 读取模型的域模型业务规则验证

> ID：10652329
> 
> 赞同：3
> 
> 时间：2012-05-18T12:04:43.737
> 
> 标签：domain-driven-design, cqrs

我是 DDD 和 CQRS 模式的新手，我想听听您的意见，如何验证域实体。我将使用常见示例 Order->OrderLine，其中 Order 是 AR。

聚合中业务规则的验证是通过 AR 来解决一致性问题的。如何验证需要订单聚合之外的数据的业务规则？

我也在使用 CQRS 方法，我认为使用 ReadModel 获取我需要验证我的业务规则的数据不是一个糟糕的选择......你怎么看？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T12:40:05.500

根据我对 CQRS 的经验，我认为 ReadModel 是最终一致的，因此我不会 100% 相信代表系统当前状态的 ReadModel。当您想要分发和复制您的 ReadModels 时，情况就更是如此。

我只想使用 ReadModel 来限制发送到您的应用程序的无效命令的数量。

在我看来，您想开始考虑域服务，它可用于封装位于单个聚合/实体/值对象边界之外的域逻辑。

正如大卫在此处将[域服务作为存储库的扩展方法指出的](https://stackoverflow.com/questions/4574125/implement-domain-services-as-extension-methods-for-the-repository/10649540#10649540)那样，Jimmy Bogard 有一个定义[http://lostechies.com/jimmybogard/2008/08/21/services-in-domain-driven-design/](http://lostechies.com/jimmybogard/2008/08/21/services-in-domain-driven-design/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-18T12:24:13.453

是的，使用读取模型进行命令验证。我称之为“命令上下文”——世界的当前状态，基于哪个命令可能有效或无效。在 CQRS 中，世界的当前状态在您的读取模型中表示。用户正在根据它做出决定，应该发出什么命令。

您还可以考虑各种方式来指导用户决策，以便他不会发出无效命令（如果用户名不是唯一的，请提前警告等）。

# java - 用 Java 编写 PDF/E

> ID：10652333
> 
> 赞同：2
> 
> 时间：2012-05-18T12:05:12.567
> 
> 标签：java, pdf, pdf-generation

ISO 24517-1:2008 指定称为 PDF/E 的子集。它的用途是用于工程和技术文档，其基本原理是长期保存。

我的问题是，是否有用于编写 PDF/E 兼容文档的 Java 的 PDFWriter？

iText 尚不支持：“iText 中尚无对 PDF/E 的直接支持。但已经添加了一些 PDF/UA 必需的功能”-iText in Action, 2nd ed

链接：

[http://www.adobe.com/enterprise/pdfs/pdf-eready-guide-ue.pdf](http://www.adobe.com/enterprise/pdfs/pdf-eready-guide-ue.pdf)
[http://en.wikipedia.org/wiki/PDF/E](http://en.wikipedia.org/wiki/PDF/E)
[http://what-when-how.com/ itext-5/pdf-why-and-how-itext-5/](http://what-when-how.com/itext-5/pdf-why-and-how-itext-5/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T08:35:48.230

您是否需要某些关于 PDF/E 的特定内容而不是长期保存？PDF/A（关于长期保存）是否足够？PDF/E 似乎是关于“工程工作流程”而不是长期存储。

如果您需要 PDF/A，[Docmosis](http://www.docmosis.com)和[JODReports](http://jodreports.sourceforge.net)是您可以使用 Java 生成 PDF 文档（包括 PDF/A）的库。请注意，PDF/A 作为长期安全存储原则会禁用某些 PDF 功能，例如外部超链接和密码。

# java - 表存在时的SQL异常

> ID：10652341
> 
> 赞同：4
> 
> 时间：2012-05-18T12:06:00.977
> 
> 标签：java, sql, database, postgresql, jdbc

我想用 JDBC 输入一个命令来创建一个表，但是在第一次编译之后，当表已经生成时，下一个都会抛出异常。我不明白这怎么可能，因为我已经把 [IF NOT EXISTS] 术语放在那里，所以应该没有 SQL 错误。

```
public class Test 
{
    public static void main(String[] args) 
    {
        try
        {
            Connection conn = BazaDanych.Polacz();
            Statement stat = conn.createStatement();

           String command = "CREATE TABLE [IF NOT EXISTS] testowatabela2 (id INTEGER, wartosc DOUBLE PRECISION);";

            stat.execute(command);
        }
        catch(SQLException e)
        {
            System.out.println("SQL Exception in Test");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T12:47:00.957

可能，包含该子句的括号`IF NOT EXISTS`逐字逐句来自文档： [http ://www.postgresql.org/docs/9.1/static/sql-createtable.html](http://www.postgresql.org/docs/9.1/static/sql-createtable.html)

但它们不能出现在实际`CREATE TABLE`语句中，因为括号表示该子句是**可选**的。

另一件需要考虑的事情是这`IF NOT EXISTS`是 PostgreSQL 9.1 的一个新特性，所以它会在旧版本中失败。如果您不确定您使用的版本，请在 SQL 中运行：`select version()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T12:10:31.670

尝试

```
IF NOT EXISTS (SELECT 1 
           FROM sysobjects 
           WHERE xtype='u' AND name='testowatabela2')
    CREATE TABLE testowatabela2 (id INTEGER, wartosc DOUBLE PRECISION) 
```

## 编辑

只留下`[IF NOT EXISTS]`部分。根据[这个答案](https://stackoverflow.com/a/435471/575376)，表是否存在并不重要。

# spring - Spring中MultipartResolver之前无法调用拦截器

> ID：10652344
> 
> 赞同：0
> 
> 时间：2012-05-18T12:06:13.517
> 
> 标签：spring, spring-mvc

在我的 spring-3 应用程序中，我有一个 AuthenticationInterceptor（它基本上是一个拦截器）来检查用户的权限。我正在使用 Spring`MultipartResolver`尝试将文件上传到服务器。我现在面临的问题是我希望根据用户权限执行不同的操作，以防`MaxUploadSizeExceededException`. 但是我看到这个异常发生在 DispatcherServlet 级别并且被`HandlerExceptionResolver` 我希望能够在任何这种情况发生之前调用我的 AuthenticationInterceptor 捕获？有没有直截了当的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T21:29:03.467

问题是在请求被分派到控制器之前发生异常，因此，您的拦截器也永远不会触发。我想你已经弄清楚了那部分。

想要绕过那个...

对于初学者，我将通过使用 servlet 过滤器将身份验证机制移出 servlet 的前面。话虽这么说，当像 Spring Security 这样的优秀产品可以为您做到这一点时，在该领域推出您自己的解决方案几乎没有意义。

一旦您转换到 Spring Security（或类似的），用户的 SecurityContext（角色、权限等）将在异常发生并被捕获时得到解决。

现在，如果我正确阅读了您的问题，您似乎可能希望根据用户的角色、权限等以不同的方式响应异常。此时应该可以。您将实现一个自定义的 HandlerExceptionResolver 来检查 SecurityContext 以查看用户是否具有特定的角色或权限，然后做出相应的响应。

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T15:21:58.147

在调用 Handler 代码之前，有两种基本的方式来处理流内的操作：

1.  实现接口，并在方法`HandlerInterceptor`中编写要运行的代码`preHandle`
2.  `@Aspect`使用并配置切入点创建一个切面以运行`@Before`方法调用

无论哪种情况，您都可以使用检查登录用户的角色`SecurityContextHolder.getContext().getAuthentication().getAuthorities()`，然后根据角色成员资格决定要做什么。

# postgresql - PostgreSQL，lo_export 查询到存储过程

> ID：10652345
> 
> 赞同：0
> 
> 时间：2012-05-18T12:06:36.700
> 
> 标签：postgresql, delphi, stored-procedures, plpgsql, psql

我正在开发一个使用 PostgreSQL 9.0 的 Delphi 7 应用程序。我有一些图像存储在数据库中，`OID`并且应用程序远程连接到 PostgreSQL。

我正在使用这个查询：

```
"C:\Program Files\PostgreSQL\9.0\bin\psql.exe" -h 192.168.1.12 -p 5432 -d MyDB -U myDB_admin -c  "\lo_export 16848379 'C://leeImage.jpeg'" 
```

并在表格上显示图像。这工作正常，但执行和显示图像大约需要 1 秒左右。

所以我试图将查询转换为这样的存储过程：

```
CREATE OR REPLACE FUNCTION GET_FISHIMAGE(path TEXT ,Host TEXT,DatabaseName TEXT,userName TEXT,outputpath TEXT) RETURNS text AS $$
BEGIN
  //perform this..!!!
  //"C:\Program Files\PostgreSQL\9.0\bin\psql.exe" -h 192.168.1.12 -p 5432 -d myDB -U myDB_admin -c  "\lo_export 16848379 'C://leeImage.jpeg'"

END;
$$ LANGUAGE plpgsql; 
```

我在互联网上搜索过，但无法确定是否可以进行转换。谁能告诉我如何将上述查询转换为存储过程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T17:32:42.863

无法从编写的服务器函数启动外部程序`plpgsql`，即使切换到支持它的语言，例如`plperlu`，也无法解决问题，因为：

*   它的性能与从客户端计算机执行时一样差，因为启动 psql 和建立连接的开销是相同的。

*   该`\lo_export`命令将在数据库服务器上创建文件，而您在客户端计算机上需要它。否则，您可以调用[lo_export()](http://www.postgresql.org/docs/9.1/static/lo-funcs.html) SQL 函数，并且`psql`一开始就不需要为了检索图像而启动。

解决该问题的简单、架构清晰的解决方案是使用 Delphi 数据库驱动程序可能公开的 BLOB API 将二进制数据从服务器传输到客户端。

万一 API 中根本没有任何东西来获取二进制数据，仍然可以将服务器端函数将二进制大对象编码为具有`base64`或类似的文本编码版本，然后在客户端对其进行解码-边。这仍然比每次需要检索图片时启动 psql 更有效。

# asp.net-mvc-3 - 为 MVC3 禁用了 Glimpse 执行选项卡

> ID：10652347
> 
> 赞同：0
> 
> 时间：2012-05-18T12:06:39.523
> 
> 标签：asp.net-mvc-3, glimpse

我刚刚从 nuget 安装了 Glimpse for MVC3，我在 web 配置中将 logginEnabled 设置为 true，但仍然没有得到“执行”选项卡。这是在 IIS Express 上。

我有另一个不使用 IIS Express 的项目（使用 Visual Studio 开发 Web 服务器），我可以看到执行选项卡。

我检查了我的 web.config 并且配置了所有部分。

有任何想法吗？

# php - PDO PHP Mysql 在特定查询上很慢

> ID：10652352
> 
> 赞同：1
> 
> 时间：2012-05-18T12:07:17.303
> 
> 标签：php, mysql, pdo

我在 php 中使用 PDO for Mysql 遇到了一个非常奇怪的问题。

我有一张桌子，里面有大约 30,000 行。

如果我尝试运行此查询：

> SELECT card_data.name, max(card_data.set_order) FROM card_data, theme_decks WHERE card_data.name = 'Mana Leak' and card_data.enabled = 1 GROUP BY card_data.name ORDER BY card_data.name

（这个怎么做的）

```
SELECT card_data.name, max(card_data.set_order) FROM card_data, theme_decks  
WHERE card_data.name = ? and
card_data.enabled = 1 GROUP BY card_data.name  ORDER BY card_data.name ASC

$paramArray = array("Mana Leak");
$sth->execute($paramArray); 
```

通过 PDO 执行大约需要 10 秒！但是，如果我通过 phpmyadmin 运行相同的查询，则只需不到一秒钟的时间..

奇怪的是，下面的这个查询虽然 PDO 只需要不到一秒钟的时间：

```
SELECT card_data.name, max(card_data.set_order) FROM card_data, theme_decks  WHERE 
(card_data.name = 'Extraplanar Lens' OR card_data.name = 'Mana Leak' OR card_data.name = 
'overgrowth')  and card_data.enabled = 1 GROUP BY card_data.name  ORDER BY card_data.name ASC 
```

（这个怎么做的）

```
 SELECT card_data.name, max(card_data.set_order) FROM card_data, theme_decks  WHERE 
    (card_data.name = ? OR card_data.name = ? OR card_data.name = 
    ?)  and card_data.enabled = 1 GROUP BY card_data.name  ORDER BY card_data.name ASC

    $paramArray = array("Extraplanar Lens","Mana Leak","overgrowth");
    $sth->execute($paramArray); 
```

我一生都无法锻炼，为什么搜索单个“名称”需要 10 秒，而搜索多个名称只需要大约 0.4 秒...

编辑：情节变厚。我删除了参数化语句并硬编码了要搜索的文本

```
SELECT card_data.name, max(card_data.set_order) FROM card_data, theme_decks WHERE
card_data.name = Mana Leak and card_data.enabled = 1 GROUP BY card_data.name ORDER BY 
card_data.name ASC 
```

使用 PDO 查询需要 0.000384092330933 秒！

但

```
SELECT card_data.name, max(card_data.set_order) FROM card_data, theme_decks WHERE
card_data.name = 'Mana Leak' and card_data.enabled = 1 GROUP BY card_data.name ORDER BY 
card_data.name ASC 
```

用 PDO 查询需要 11.00254 秒！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T12:36:08.963

慢通常意味着您需要索引。我看到你`max()`在`card_data.set_order`. 这意味着您的数据库必须检查每条记录才能找到最大的记录。

查看该字段是否有索引。如果没有，请添加一个，看看是否可以改善它

# android - SimpleCursorAdapter.getItemId() 到 detailFragment。如何传递_id？

> ID：10652353
> 
> 赞同：1
> 
> 时间：2012-05-18T12:07:17.877
> 
> 标签：android, android-fragments, simplecursoradapter, android-listfragment

我正在写一个`FragmentActivity`我有一个`ListFragment`（使用 a `SimpleCursorAdapter`）、一个*detailsFragment*和一个*detailActivity*（当手机处于纵向时使用，嵌入*detailsFragment*）的地方。
当我单击列表中的一个项目时，它应该使用来自第二个光标的数据填充*detailFragment*，使用`_id`所选项目的作为 selectionArgs 构建。
但是，`_id`似乎没有通过，我在`ListFragment`显示`_id`所选项目的地方敬酒（这是正确的），但在*detailsFragment*中`_id`永远不会到达（它仍然等于`0`，发送一个`NullPointerException`）。我错在哪里？

编辑：我也忘了说，当我使用*后退*按钮从 detailsActivity 返回时，列表是空的，它说明了数据库正在关闭。
Logcat 消息可以在我的帖子末尾找到。

家长活动

```
package com.gmail.david.corsalini.sportscout;

import android.os.Bundle;
import android.support.v4.app.FragmentActivity;

public class MatchesRugbyPage extends FragmentActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.matches_rugby);
    }
} 
```

MatchesListFragment（我的 ListFragment）

```
package com.gmail.david.corsalini.sportscout;

import android.content.Intent;
import android.database.Cursor;
import android.os.Bundle;
import android.support.v4.app.FragmentTransaction;
import android.support.v4.app.ListFragment;
import android.util.Log;
import android.view.View;
import android.widget.ListView;
import android.widget.SimpleCursorAdapter;
import android.widget.Toast;

/**
 * This is the "top-level" fragment, showing a list of items that the user can
 * pick. Upon picking an item, it takes care of displaying the data to the user
 * as appropriate based on the current UI layout.
 */
public class MatchesListFragment extends ListFragment {
    boolean mDualPane;
    private Cursor cursor;
    private SimpleCursorAdapter myAdapter;
    private long MATCH_ID;
    private int selected;

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        // Database
        DBSportScout db = new DBSportScout(getActivity());
        db.open();
        // Cursor
        String[] selection = { DBSportScout.MatchMetaData.KEY_MNAME,
                DBSportScout.MatchMetaData.KEY_MROWID };
        cursor = db.fetch(DBSportScout.MatchMetaData.DATABASE_TABLE_MATCH,
                selection, null, null, null, null, null, null);
        getActivity().startManagingCursor(cursor);
        // Adapter
        String[] columns = { DBSportScout.MatchMetaData.KEY_MNAME };
        int[] to = { R.id.tv1ListItem };
        myAdapter = new SimpleCursorAdapter(getActivity(),
                R.layout.ss_list_item, cursor, columns, to);
        setListAdapter(myAdapter);
        db.close();

        // Check to see if we have a frame in which to embed the details
        // fragment directly in the containing UI.
        View detailsFrame = getActivity().findViewById(R.id.detailsFrame);
        mDualPane = detailsFrame != null
                && detailsFrame.getVisibility() == View.VISIBLE;

        if (savedInstanceState != null) {
            // Restore last state for checked position.
            MATCH_ID = savedInstanceState.getLong("curChoice", 0);
        }

        if (mDualPane) {
            // In dual-pane mode, the list view highlights the selected item.
            getListView().setChoiceMode(ListView.CHOICE_MODE_SINGLE);
            // Make sure our UI is in the correct state.
            showDetails(MATCH_ID);
        }
    }

    @Override
    public void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        outState.putLong("curChoice", MATCH_ID);
    }

    @Override
    public void onListItemClick(ListView l, View v, int position, long id) {
        selected = position;
        MATCH_ID = myAdapter.getItemId(position);
        Toast.makeText(getActivity(), "Partita n. " + Long.toString(MATCH_ID),
                Toast.LENGTH_SHORT).show();
        showDetails(MATCH_ID);
        Log.i("Partita", "ID Partita selezionata= " + MATCH_ID);
    }

    /**
     * Helper function to show the details of a selected item, either by
     * displaying a fragment in-place in the current UI, or starting a whole new
     * activity in which it is displayed.
     */

    public void showDetails(long matchid) {

        if (mDualPane) {
            // We can display everything in-place with fragments, so update
            // the list to highlight the selected item and show the data.
            getListView().setItemChecked(selected, true);

            // Check what fragment is currently shown, replace if needed.
            MatchDetailsFragment f = (MatchDetailsFragment) getFragmentManager()
                    .findFragmentById(R.id.detailsFrame);
            if (f == null || f.getMATCH_ID() != matchid) {
                // Make new fragment to show this selection.
                f = new MatchDetailsFragment();

                // Supply index input as an argument.
                Bundle args = new Bundle();
                args.putLong("matchid", matchid);
                f.setArguments(args);

                // Execute a transaction, replacing any existing fragment
                // with this one inside the frame.
                FragmentTransaction ft = getFragmentManager()
                        .beginTransaction();
                ft.replace(R.id.detailsFrame, f);
                ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
                ft.addToBackStack(null);
                ft.commit();
            }

        } else {
            // Otherwise we need to launch a new activity to display
            // the dialog fragment with selected text.
            Intent intent = new Intent();
            intent.setClass(getActivity(), MatchDetailsActivity.class);
            intent.putExtra("index", matchid);
            startActivity(intent);
        }
    }

} 
```

MatchDetailFragment（我的 detailsFragment）

```
package com.gmail.david.corsalini.sportscout;

import com.gmail.david.corsalini.sportscout.DBSportScout.MatchMetaData;

import android.database.Cursor;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;
import android.widget.Toast;

/**
 * This is the secondary fragment, displaying the details of a particular item.
 */
public class MatchDetailsFragment extends Fragment {

    /**
     * Create a new instance of DetailsFragment, initialized to show the text at
     * 'matchid'.
     */
    public static MatchDetailsFragment newInstance(long matchid) {
        MatchDetailsFragment f = new MatchDetailsFragment();

        // Supply index input as an argument.
        Bundle args = new Bundle();
        args.putLong("matchid", matchid);
        f.setArguments(args);
        return f;
    }

    private TextView tvfTriesA;
    private TextView tvfTriesB;
    private TextView tvfName;
    private long MATCH_ID;
    public long getMATCH_ID() {
        MATCH_ID = getArguments().getLong("matchid", 0);
        return MATCH_ID;
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        if (container == null) {
            // We have different layouts, and in one of them this
            // fragment's containing frame doesn't exist. The fragment
            // may still be created from its saved state, but there is
            // no reason to try to create its view hierarchy because it
            // won't be displayed. Note this is not needed -- we could
            // just run the code below, where we would create and return
            // the view hierarchy; it would just never be used.
            return null;
        }
        View view = inflater.inflate(R.layout.match_summary, container, false);
        populateDetails(MATCH_ID);
        return view;
    }

    public void populateDetails(long matchid) {

        // Create textviews
        tvfName = (TextView) getActivity().findViewById(R.id.tvfName);
        tvfTriesA = (TextView) getActivity().findViewById(R.id.tvfTriesA);
        tvfTriesB = (TextView) getActivity().findViewById(R.id.tvfTriesB);
        tvfName.setText(Long.toString(MATCH_ID));

        // Populate textviews
        DBSportScout db = new DBSportScout(getActivity());
        db.open();
        String selectionmatchid = Long.toString(matchid);
        String[] columns = { DBSportScout.MatchMetaData.KEY_MNAME,
                DBSportScout.MatchMetaData.KEY_MDATE,
                DBSportScout.MatchMetaData.KEY_MSTATUS,
                DBSportScout.MatchMetaData.KEY_MSUMMARY,
                DBSportScout.MatchMetaData.KEY_MTEAM_A_ID,
                DBSportScout.MatchMetaData.KEY_MTEAM_B_ID,
                DBSportScout.MatchMetaData.KEY_MCHAMP_ID,
                DBSportScout.MatchMetaData.KEY_MTURN,
                DBSportScout.MatchMetaData.KEY_MSPORT_ID,
                DBSportScout.MatchMetaData.KEY_MSCORE_A,
                DBSportScout.MatchMetaData.KEY_MSCORE_B,
                DBSportScout.MatchMetaData.KEY_MSTAT1_A,
                DBSportScout.MatchMetaData.KEY_MSTAT1_B,
                DBSportScout.MatchMetaData.KEY_MSTAT2_A,
                DBSportScout.MatchMetaData.KEY_MSTAT2_B,
                DBSportScout.MatchMetaData.KEY_MSTAT3_A,
                DBSportScout.MatchMetaData.KEY_MSTAT3_B,
                DBSportScout.MatchMetaData.KEY_MSTAT4_A,
                DBSportScout.MatchMetaData.KEY_MSTAT4_B,
                DBSportScout.MatchMetaData.KEY_MSTAT5_A,
                DBSportScout.MatchMetaData.KEY_MSTAT5_B,
                DBSportScout.MatchMetaData.KEY_MSTAT6_A,
                DBSportScout.MatchMetaData.KEY_MSTAT6_B,
                DBSportScout.MatchMetaData.KEY_MSTAT7_A,
                DBSportScout.MatchMetaData.KEY_MSTAT7_B,
                DBSportScout.MatchMetaData.KEY_MSTAT8_A,
                DBSportScout.MatchMetaData.KEY_MSTAT8_B,
                DBSportScout.MatchMetaData.KEY_MSTAT9_A,
                DBSportScout.MatchMetaData.KEY_MSTAT9_B,
                DBSportScout.MatchMetaData.KEY_MSTAT10_A,
                DBSportScout.MatchMetaData.KEY_MSTAT10_B,
                DBSportScout.MatchMetaData.KEY_MSTAT11_A,
                DBSportScout.MatchMetaData.KEY_MSTAT11_B,
                DBSportScout.MatchMetaData.KEY_MSTAT12_A,
                DBSportScout.MatchMetaData.KEY_MSTAT12_B,
                DBSportScout.MatchMetaData.KEY_MSTAT13_A,
                DBSportScout.MatchMetaData.KEY_MSTAT13_B,
                DBSportScout.MatchMetaData.KEY_MSTAT14_A,
                DBSportScout.MatchMetaData.KEY_MSTAT14_B,
                DBSportScout.MatchMetaData.KEY_MSTAT15_A,
                DBSportScout.MatchMetaData.KEY_MSTAT15_B,
                DBSportScout.MatchMetaData.KEY_MSTAT16_A,
                DBSportScout.MatchMetaData.KEY_MSTAT16_B,
                DBSportScout.MatchMetaData.KEY_MSTAT17_A,
                DBSportScout.MatchMetaData.KEY_MSTAT17_B,
                DBSportScout.MatchMetaData.KEY_MSTAT18_A,
                DBSportScout.MatchMetaData.KEY_MSTAT18_B,
                DBSportScout.MatchMetaData.KEY_MSTAT19_A,
                DBSportScout.MatchMetaData.KEY_MSTAT19_B,
                DBSportScout.MatchMetaData.KEY_MSTAT20_A,
                DBSportScout.MatchMetaData.KEY_MSTAT20_B,
                DBSportScout.MatchMetaData.KEY_MSTAT21_A,
                DBSportScout.MatchMetaData.KEY_MSTAT21_B,
                DBSportScout.MatchMetaData.KEY_MSTAT22_A,
                DBSportScout.MatchMetaData.KEY_MSTAT22_B,
                DBSportScout.MatchMetaData.KEY_MSTAT23_A,
                DBSportScout.MatchMetaData.KEY_MSTAT23_B,
                DBSportScout.MatchMetaData.KEY_MSTAT24_A,
                DBSportScout.MatchMetaData.KEY_MSTAT24_B,
                DBSportScout.MatchMetaData.KEY_MSTAT25_A,
                DBSportScout.MatchMetaData.KEY_MSTAT25_B,
                DBSportScout.MatchMetaData.KEY_MSTAT26_A,
                DBSportScout.MatchMetaData.KEY_MSTAT26_B,
                DBSportScout.MatchMetaData.KEY_MSTAT27_A,
                DBSportScout.MatchMetaData.KEY_MSTAT27_B,
                DBSportScout.MatchMetaData.KEY_MSTAT28_A,
                DBSportScout.MatchMetaData.KEY_MSTAT28_B,
                DBSportScout.MatchMetaData.KEY_MSTAT29_A,
                DBSportScout.MatchMetaData.KEY_MSTAT29_B,
                DBSportScout.MatchMetaData.KEY_MSTAT30_A,
                DBSportScout.MatchMetaData.KEY_MSTAT30_B,
                DBSportScout.MatchMetaData.KEY_MSTAT31_A,
                DBSportScout.MatchMetaData.KEY_MSTAT31_B,
                DBSportScout.MatchMetaData.KEY_MSTAT32_A,
                DBSportScout.MatchMetaData.KEY_MSTAT32_B,
                DBSportScout.MatchMetaData.KEY_MSTAT33_A,
                DBSportScout.MatchMetaData.KEY_MSTAT33_B,
                DBSportScout.MatchMetaData.KEY_MSTAT34_A,
                DBSportScout.MatchMetaData.KEY_MSTAT34_B,
                DBSportScout.MatchMetaData.KEY_MSTAT35_A,
                DBSportScout.MatchMetaData.KEY_MSTAT35_B,
                DBSportScout.MatchMetaData.KEY_MSTAT36_A,
                DBSportScout.MatchMetaData.KEY_MSTAT36_B,
                DBSportScout.MatchMetaData.KEY_MSTAT37_A,
                DBSportScout.MatchMetaData.KEY_MSTAT37_B,
                DBSportScout.MatchMetaData.KEY_MSTAT38_A,
                DBSportScout.MatchMetaData.KEY_MSTAT38_B,
                DBSportScout.MatchMetaData.KEY_MSTAT39_A,
                DBSportScout.MatchMetaData.KEY_MSTAT39_B,
                DBSportScout.MatchMetaData.KEY_MSTAT40_A,
                DBSportScout.MatchMetaData.KEY_MSTAT40_B };
        String[] selectionArgs = { selectionmatchid };

        Cursor c = db.fetch(DBSportScout.MatchMetaData.DATABASE_TABLE_MATCH,
                columns, DBSportScout.MatchMetaData.KEY_MROWID + "=?",
                selectionArgs, null, null, null, null);
        c.moveToFirst();

        tvfName.setText(c.getInt(c.getColumnIndexOrThrow(DBSportScout.MatchMetaData.KEY_MNAME)));
        tvfTriesA.setText(c.getInt(c.getColumnIndexOrThrow(DBSportScout.MatchMetaData.KEY_MSTAT1_A)));
        tvfTriesB.setText(c.getInt(c.getColumnIndexOrThrow(DBSportScout.MatchMetaData.KEY_MSTAT1_B)));
        db.close();
    }
} 
```

DBSportScout 的 fetch() 方法

```
public Cursor fetch(String table, String[] columns, String selection,
        String[] args, String groupby, String having, String orderby,
        String limit) { // metodo per fare la query di tutti i dati
    Cursor cursor = mDb.query(table, columns, selection, args, groupby,
            having, orderby, limit);
    if (cursor != null) {
        cursor.moveToFirst();
    }
    return cursor;
} 
```

最后是 LogCat

```
FATAL EXCEPTION: main
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.gmail.david.corsalini.sportscout/com.gmail.david.corsalini.sportscout.MatchesRugbyPage}: java.lang.NullPointerException
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
    at android.app.ActivityThread.access$600(ActivityThread.java:123)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:4424)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
    at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NullPointerException
    at com.gmail.david.corsalini.sportscout.MatchDetailsFragment.populateDetails(MatchDetailsFragment.java:77)
    at com.gmail.david.corsalini.sportscout.MatchDetailsFragment.onCreateView(MatchDetailsFragment.java:64)
    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:870)
    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1080)
    at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:622)
    at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1416)
    at android.support.v4.app.FragmentActivity.onStart(FragmentActivity.java:505)
    at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1133)
    at android.app.Activity.performStart(Activity.java:4475)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1929)
    ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T12:14:03.827

进行查询时，您不会要求投影中的 _ID 列

```
String[] selection= {DBSportScout.MatchMetaData.KEY_MNAME, DBSportScout.MatchMetaData.KEY_MROWID }; 
```

所以它总是为零，我想也许你需要覆盖你的适配器来返回你选择的 id，或者在你的表中添加一个 _id 列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T13:13:15.100

除非我开始一项新活动，否则我从未使用过捆绑包。我通常做的（我并不是说这是最好的方法，但它对我有用）是定义一个公共静态变量来保存行 ID，然后使用它。

一个例子（只是相关的位）。

片段 1（成员列表）：

```
public static Long mRowId;

@Override
public void onListItemClick(ListView l, View v, int position, long id) {
    mRowId = id;
    MemberDisplayFragment memberdisplay = new MemberDisplayFragment();
    getFragmentManager().beginTransaction().replace(R.id.rightpane, memberdisplay).commit();
} 
```

片段 2（会员详情展示）：

```
Cursor memberdisplay = mDbHelper.fetchMember(MemberListFragment.mRowId);
getActivity().startManagingCursor(memberdisplay);
memberdisplay.moveToFirst(); 
```

希望这可以帮助！

# java - 具有静态内容选择器的类

> ID：10652354
> 
> 赞同：0
> 
> 时间：2012-05-18T12:07:35.467
> 
> 标签：java

可以说我有两个类似的课程：

```
public class First {

    public static final String ONE = "1";
    public static final String TWO = "2";
    public static final String THREE = "3";
}

public class Second {

    public static final String ONE = "one";
    public static final String TWO = "two";
    public static final String THREE = "three";
} 
```

现在在其他班级我使用其中之一：

```
public class Third {

    //....
    @Override
    public String toString()
    {
        System.out.println( First.ONE );
    }
} 
```

但是我现在要做的是制作一种选择器，可以说类 Third 的构造函数获取布尔值并基于它选择使用哪个类，但我不想在任何地方都制作 if (..) 语句，因为它简直太多了。

所以抽象地说，我想要这样：

```
public class Third {

    //some global var with reference? to static class

    public Third(boolean first)
    {
        if( first ) {
           //set class First as source of static fields
        } else {
           //set class Second
        }
    }

    //....
    @Override
    public String toString()
    {
        System.out.println( globalVariableWithReference.ONE );
    }
} 
```

不考虑这些课程是否有可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T12:13:41.783

您可以使用带有 getter 方法的接口，然后让两个类实现该接口（并在调用 getter 方法时返回它们各自的值）。然后你可以创建一个映射来映射布尔值和两个实现类（通过接口），并调用映射到布尔值的对象。当然，这要求您为每个类创建一个对象，但您会得到相同的行为。

另一种选择是创建一个包装类，将`if`/`else`逻辑包装到自己的静态方法中，并根据布尔值从两个类中返回适当的值。虽然您需要为此包装类编写`if`/`else`逻辑，但您不需要多次编写，只需调用包装类的方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T12:20:54.087

您可以使用反射：

```
Class x = if (first) First.class : Second.class;
String one = (String) x.getField("ONE").get(null); 
```

# java - 如何使用 Hibernate 选择列？

> ID：10652358
> 
> 赞同：37
> 
> 时间：2012-05-18T12:08:00.757
> 
> 标签：java, mysql, hibernate, hibernate-criteria

我想使用 Hibernate 选择单个列而不是整个对象。到目前为止，我有这个：

```
 List<String> firstname = null;

 firstname = getSession().createCriteria(People.class).list(); 
```

我的问题是上面的代码将整个 People 表作为对象返回，而不仅仅是“名字”。我不确定如何指定只返回“名字”而不是整个对象。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-05-18T12:11:39.133

您可以为此设置投影：

```
.setProjection(Projections.property("firstname")) 
```

有了这个，你只能得到名字作为回报。

我在堆栈上找到了另一个具有相同场景的链接。希望这也将有所帮助[如何使用休眠条件仅返回对象的一个​​元素而不是整个对象？](https://stackoverflow.com/questions/58561/hibernate-criteria-how-to-use-criteria-to-return-only-one-element-of-an-object)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-11-21T03:10:19.633

如果您需要查询 2 列或更多列并从查询中获取值，可以这样做：

```
....
crit.setProjection(Projections.property("firstname"));
crit.setProjection(Projections.property("lastname"));

List result = crit.list();

...

for (Iterator it = result.iterator(); it.hasNext(); ) {
    Object[] myResult = (Object[]) it.next();
    String firstname = (String) myResult[0];
    String lastname = (String) myResult[1];

    ....
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-03T10:53:27.983

如果你想要条件基础投影，你可以使用 ProjectionList，例如

```
 ProjectionList prjection = Projections.projectionList();
if(abc){
    prjection.add(Projections.property("firstname"));
}
else if(xyz){
    prjection.add(Projections.property("lastname"));
}

    ........

    criteria.setProjection(prjection); 
```

# c# - Quartz.net v1.0 cron 触发间歇性触发

> ID：10652365
> 
> 赞同：1
> 
> 时间：2012-05-18T12:08:43.897
> 
> 标签：c#, asp.net-mvc-3, sql-server-2008, quartz.net, crontrigger

我们目前在带有 SQL Server 2008 的 MVC3 网站上使用 Quartz.net v1.0.3.3。

该网站在 IIS7 上运行，我们将 Idle Timeout 属性设置为 0。我们还安装了 App Warmup Module。作为安全网，我们还设置了一个 Windows 计划任务，以每 5 分钟下载一个页面（使用 powershell 脚本）以确保站点处于唤醒状态，因为我们不确定应用程序预热模块是否正常工作。

我们有 13 个 cron 触发器分散在每天的不同时间点运行。有的每天开火一次，有的每小时开火，有的每 10/15 分钟开火一次（都很简单）。没有触发器使用与另一个相同的作业，因此每个作业都有自己的触发器，据我所知，阻塞不是问题。

我们记录每次作业开始和结束的时间，以及可能发生的任何异常。当作业运行时，没有人抛出异常，因此我们知道作业没有被触发，然后静默失败。

所有作业都运行。问题在于频率。昨天一个小时工（0 0 * * * ？）在早上 2、5、6 和 8 点运行，然后直到下午 3 点才再次运行。在此期间，其他不相关的作业运行，因此站点处于唤醒状态并触发触发器。

我们的 web.config 的石英部分如下（我已经删除了我们的连接字符串节点）：

```
 <quartz>
    <add key="quartz.threadPool.type" value="Quartz.Simpl.SimpleThreadPool, Quartz" />
    <add key="quartz.threadPool.threadCount" value="25" />
    <add key="quartz.threadPool.threadPriority" value="Normal" />
    <add key="quartz.jobStore.misfireThreshold" value="60000" />
    <add key="quartz.jobStore.useProperties" value="true" />
    <add key="quartz.jobStore.type" value="Quartz.Impl.AdoJobStore.JobStoreTX, Quartz" />
    <add key="quartz.jobStore.driverDelegateType" value="Quartz.Impl.AdoJobStore.SqlServerDelegate, Quartz" />
    <add key="quartz.jobStore.tablePrefix" value="[qrtz]." />
    <add key="quartz.jobStore.dataSource" value="default" />
    <add key="quartz.dataSource.default.provider" value="SqlServer-20" />
    <add key="quartz.jobStore.lockHandler.type" value="Quartz.Impl.AdoJobStore.UpdateLockRowSemaphore, Quartz" />
    <add key="quartz.jobStore.acquireTriggersWithinLock" value="true" />
  </quartz> 
```

我们最初将 ThreadPriority 设置为“Low”，将 ThreadCount 设置为 5，但后来将其提高到“Normal”，而 25 无济于事。

我意识到我们使用的是旧版本的quartz.net，但我们不希望升级，因为我们的数据库和我们所有的工作都是针对 v1.0 进行编码的，并且鉴于我们的时间限制，重新实现工作和数据库不是一个选项。

我已经搜索了互联网，虽然有很多问题是 cron 触发器没有触发，但我找不到任何解决零星或间歇性触发器的方法

非常感谢您阅读这个冗长的问题，并提前感谢您的帮助。

# node.js - socket.io nodejs：使用数据库存储所有套接字客户端？

> ID：10652367
> 
> 赞同：2
> 
> 时间：2012-05-18T12:08:51.443
> 
> 标签：node.js, socket.io

目前，我为每个**客户端存储****套接字**以发出。

 **```
clients[myID] = socket; 
```

但我想知道如果有很多用户这将是一个问题。将**客户端**存储在数据库中，比如 express store sessionID (使用 redis) 是否可以？

（我必须储存整个**插座**才能使其工作？所以，它很大！）

*最好的方法是什么？*

我看到有一段时间可以做这样的事情：

```
sio.set('store',... 
```

*它是什么 ？如何使用它 ？*

*或者，我可以正常使用redis存储？*

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T20:34:09.810

您可以只存储套接字 id，然后稍后使用`io.sockets.sockets[id]`.

如果您尝试将套接字存储在一个进程中，然后在另一个进程中处理它，那显然无论如何都会失败。**

# c++ - SSL 证书验证失败：使用 OpenSSL

> ID：10652369
> 
> 赞同：2
> 
> 时间：2012-05-18T12:08:53.580
> 
> 标签：c++, c, openssl, ssl-certificate

我正在使用这段代码：

```
void check_cert(SSL* ssl)
{

//ssl initiation
SSL_library_init();
SSL_load_error_strings();
const SSL_METHOD *meth;
meth = SSLv3_method();
SSL_CTX *ctx;
SSL *_ssl;
ctx = SSL_CTX_new(meth);
int result = 0;
//getting the CA certificate

result = SSL_CTX_load_verify_locations(ctx1, "cacert.pem", NULL);
//result = SSL_CTX_load_verify_locations(ctx, NULL, "/home/cdac/Desktop/test/cert");
printf("\nCA load result = %d", result);

//_ssl = SSL_new(ctx);
SSL_CTX_set_verify(ctx1, SSL_VERIFY_PEER, NULL);

SSL_CTX_set_verify_depth(ctx1, 1);
int result_long = SSL_get_verify_result(ssl);
printf("\nCertificate Check Result: %d", result_long);
if (SSL_get_verify_result(ssl) != X509_V_OK)
    {
        printf("\nCertiticate Verification Failed\n");
        //exit(1);
    }
    else
    {
        printf("\nCertiticate Verification Succeeded");
    }
} 
```

cacert.pem 是 CA 证书。当我执行这个我得到这个：

```
CA load result = 1
Certificate Check Result: 20
Certiticate Verification Failed 
```

代码 20 表示：

```
X509_V_ERR_UNABLE_TO_GET_ISSUER_CERT_LOCALLY: unable to get local issuer certificate

the issuer certificate could not be found: this occurs if the issuer certificate of an untrusted certificate cannot be found. 
```

那么任何人都可以帮助我吗？这在哪里失败？

CA 证书加载正常。（加载结果返回 1）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T12:52:09.847

如果您从对等端获取根 CA 并且该根 CA 未加载到您端，则可能会发生这种情况。

# winapi - 窗口消息优先级权威描述

> ID：10652371
> 
> 赞同：0
> 
> 时间：2012-05-18T12:09:02.610
> 
> 标签：winapi, windows-ce

我发现[一些提到窗口消息的](http://www.laser.ru/evgen/articles/ARTofOS2/aos2p_11.html) [地方](https://stackoverflow.com/questions/7216161/determine-priority-of-a-window-message)是由 GetMessage 按优先级顺序返回的，这些优先级是从它们以`SendMessage`最高的发送方式得出的，而不是`PostMessage`仅比用户输入。但是我在这方面找不到任何**权威参考**，即来自微软。明显的[页面](http://msdn.microsoft.com/en-us/library/ms644927(v=vs.85))似乎明确否认它（说消息按 FIFO 顺序处理，很少有例外），我找不到任何其他参考。

但是，我有一个应用程序行为表明存在优先级（每秒处理几个 WM_USER*线程消息，但单击有时需要几秒钟才能得到处理）。*因此，我想从权威来源了解它的预期行为，以便我可以修复应用程序。

注意：消息是用 发送的`PostThreadMessage`。我正在观看来自 的消息`GetMessage`，因此非排队消息不会在这里发挥作用。线程和窗口消息之间可能存在差异。

注意：该应用程序在 WinCE 上运行，尤其是在重要的 5.0 上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T12:19:03.607

[汉斯的回答](https://stackoverflow.com/a/7216350/366904)[与链接的 MSDN 文档](http://msdn.microsoft.com/en-us/library/ms644927#queued_messages)没有什么不同。

消息按照先进先出的顺序处理，就像标准队列一样，有一些特殊的例外，如`WM_TIMER`和`WM_PAINT`消息。Hans 将这类消息称为“从窗口状态合成”的消息；MSDN 只是明确地把它们叫出来：

> 除了[`WM_PAINT`](http://msdn.microsoft.com/en-us/library/dd145213)消息、[`WM_TIMER`](http://msdn.microsoft.com/en-us/library/ms644902)消息和[`WM_QUIT`](http://msdn.microsoft.com/en-us/library/ms632641)消息之外，系统始终将消息发布在消息队列的末尾。这可确保窗口以正确的先进先出 (FIFO) 顺序接收其输入消息。但是，`WM_PAINT`消息、`WM_TIMER`消息和`WM_QUIT`消息都保存在队列中，并且仅当队列不包含其他消息时才转发到窗口过程。此外，`WM_PAINT`同一窗口的多条消息合并为一条`WM_PAINT`消息，将客户区的所有无效部分合并为一个区域。组合`WM_PAINT`消息减少了窗口必须重绘其客户区内容的次数。

问题是发送的消息`SentMessage`没有排队，而发送的消息`PostMessage` *是*。MSDN 上的同一篇文章在[下一节](http://msdn.microsoft.com/en-us/library/ms644927#nonqueued_messages)中说了这么多：

> 未排队的消息立即发送到目标窗口过程，绕过系统消息队列和线程消息队列。
> 
> [...]
> 
> 发送非排队消息的一些函数是`BroadcastSystemMessage`、`BroadcastSystemMessageEx`、**`SendMessage`**、`SendMessageTimeout`和`SendNotifyMessage`。

没有“优先事项”。但是，您描述的行为很容易解释。最有可能的是，`WM_USER`消息是通过调用`SendMessage`函数发送的，该函数绕过消息队列并将消息直接发送到目标窗口的窗口过程。这使得它们看起来以更高的“优先级”进行处理，因为它们在`SendMessage`函数返回之前立即被处理，有效地绕过了队列的其余部分。

这反过来解释了为什么单击事件需要更长的时间来处理 - 因为它们只是与所有其他输入消息一起被推入队列，因此窗口在处理消息之前不会处理它们通过调用 直接发送给它`SendMessage`。

[**Important caveat:** I know nothing about Windows CE, which your question indicates you're talking about specifically. The behavior I describe here is accurate for desktop versions of Windows, but if there are any differences between that behavior and that of Windows CE, I wouldn't know and I might have gotten something wrong.]

# c - ANSI C - 替换空白字符而不使用数组

> ID：10652374
> 
> 赞同：0
> 
> 时间：2012-05-18T12:09:15.357
> 
> 标签：c, ansi, getchar, putchar

我已经开始学习 Dennis Ritchie 和 Brian W.Kernighan 的“The ANSI C Programming Language”。到目前为止，我刚刚学习了 getchar()、putchar()、while、for、if。有一个练习，我必须只使用我现在学到的东西来做。以上是我唯一知道的。这是书中出现的练习：

练习 1-9。编写一个程序，将其输入复制到其输出，用一个空格替换每个包含一个或多个空格的字符串。

我知道 C#、Pascal、Objective-C 和一些 Java，但我不明白如何在不使用数组的情况下解决这个问题。我知道数组，但由于作者尚未涵盖数组，但我认为我不能使用它们。数组将在下一章中讲授。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T12:24:06.963

实现 Nikolai 的解决方案，因为在代码中可能更容易理解，

```
#include <stdio.h>
#include <stdbool.h> /* C99, but a good idea to use nonetheless */

int main() {
    bool was_space; /* state variable */
    char c; /* one-character buffer */

    while ( ( c = getchar() ) != EOF ) {
        if ( ! was_space || c != ' ' ) putchar( c );
        was_space = c == ' ';
    }
    return 0;
} 
```

[http://ideone.com/LLmBh](http://ideone.com/LLmBh)

如果你真的想避免`bool`，你可以`int`改用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T12:13:41.080

打印您看到的第一个空格（空白）字符，跳过其余部分。这意味着有一个布尔变量，`false`当你看到一个非空白字符时设置为，并`true`在你点击并打印第一个空格时设置为。如果该变量是 ，则不要打印`true`。一种两态“状态机”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T15:19:02.257

基于我的评论的示例：

```
#include <stdio.h>

int main()
{
    int previous_char = 0;
    int latest_char;

    while ((latest_char = getchar()) != EOF)
    {
        if (' ' != previous_char || ' ' != latest_char)
        {
            putchar(latest_char);
        }
        previous_char = latest_char;
    }
    return 0;
} 
```

请注意，`getchar()`返回并`putchar()`接受一个`int`，而不是`char`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T06:05:12.973

After some time I realised that I'd misunderstood the question and this misunderstanding was because I did not fully understand the mechanism of getchar() and putchar() functions. At first I thought I had to take the whole string and then itearte through it. But then I understood that "while ((input_char = getchar()) != EOF)" does some kind of iteration (maybe a simulation of iteration, don't know for sure). After that the rest is just a normal logic. When you look at the code you'll probably notice that I did not use if-else pattern. That's simply because "If" is the only thing that I've got so far and I should not use anything else that I know from other programming languages(although I'm sure if-else is found in any language). We have not seen &&,||,boolean either. And also I used ++counter instead of counter++. That's also because we have not yet come to post increment. I know it's the simplest logic that everyone knows but I wanted to share anyway.

```
#include <stdio.h>
int main()
{
   int input_char;
   int counter = 0;
   while ((input_char = getchar()) != EOF)      
   {
     if (input_char == ' ')
     {
        ++counter;
        if (counter == 1)
          putchar(input_char);
     }

     if (input_char != ' ')
     {
        putchar(input_char);
        counter = 0;
     }
   }
  return 0;
} 
```

# java - 无法删除带有图像的目录

> ID：10652378
> 
> 赞同：1
> 
> 时间：2012-05-18T12:09:29.700
> 
> 标签：java, directory

我正在尝试删除包含少量文件的目录内容，但无法删除它。当我尝试这些方法`.delete()`时，它返回一个`false`, 但是`.canWrite()`，`.canRead()`方法返回`true`代码。

我在系统中的文件路径是：

E:\PROJECT01022012\.metadata\.plugins\org.eclipse.wst.server.core\tmp4\wtpwebapps\realmap\PHOTO\VFIN5CT5651842012\Inspirational-GravityHighRes.jpg

我试过[这个](http://www.java2s.com/Tutorial/Java/0180__File/Removeadirectoryandallofitscontents.htm) 和[这个](https://stackoverflow.com/questions/991489/i-cant-delete-a-file-in-java)，但没有运气。

```
public static boolean removeDirectory(File directory){

 if (directory.isDirectory())
    {
     File[] fls=directory.listFiles();

     for (int i = 0; i < fls.length; i++) {
          fls[i].delete();

     }
     } 

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T12:45:09.787

如果文件已在别处打开，则无法删除该文件。例如，在 Java 中由未关闭的`FileInputStream`或未`FileOutputStream`关闭的，或在最终用户的图像查看器/编辑器中的 Java 上下文之外。

在 Java 方面，请确保您没有在任何地方打开文件。确保该文件上的任何`FileInputStream`和`FileOutputStream`在使用后都被`close()`阻止`finally`。确保最终用户本身没有在某些图像查看器/编辑器中打开图片。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T12:48:04.240

也许您在目录中的文件是只读的？如果是，您可以尝试 setReadOnly(false) - 但我记得那不起作用。它实际上不会从文件中重置只读标志。好吧，可以使用命令调用 Runtime.exec 来解决一些问题，以删除操作系统的文件：

```
// For windows - option /F to force delete read-only files:
Runtime.getRuntime().exec("DEL /F E:\PROJECT01022012\.metadata\.plugins" +
    "\org.eclipse.wst.server.core\tmp4\wtpwebapps\realmap\PHOTO\VFIN5CT5651842012" +
    "\Inspirational-GravityHighRes.jpg"); 
```

# ios - 为 UITableViewCell 上的特定按钮删除 UIButton 事件的链接

> ID：10652379
> 
> 赞同：0
> 
> 时间：2012-05-18T12:09:31.770
> 
> 标签：ios, cocoa-touch, uibutton

我`UITableViewCell`在`UITableView`. 每行有 2 个按钮。我想显示所有的`UIButton`s，但我想要特定按钮上的指定按钮事件。如何摆脱其余`UIButton`的事件？请协助。

**编辑**`UIButton`如果展览禁用该事件， 我会询问任何有效的属性。喜欢选择。选择类似的东西。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T12:18:21.810

创建该按钮时，为该按钮添加一个标签：

```
button.tag = i; 
```

然后，查看发件人的标签：

```
UIButton *clickedButton = sender;
int buttonNo = clickedButton.tag; 
```

对于特定的按钮不，您可以做某事或不做。

# mysql - 计算每个组的字段出现次数？

> ID：10652385
> 
> 赞同：1
> 
> 时间：2012-05-18T12:09:49.803
> 
> 标签：mysql, sql

我正在做一个非常复杂的查询，我在最后一步滑倒了。

我设法做到了这一点：

```
id  refid           system_id   item_description_id   system_component_id   current_status
711 4fb62cece5313   49          NULL                  711                   RUNNING
712 4fb62cece547d   49          NULL                  712                   STOPPED
713 4fb62cece5616   50          NULL                  713                   RUNNING
714 4fb62cece5803   50          NULL                  714                   STOPPED
716 4fb62cece5ab8   51          NULL                  716                   RUNNING 
```

这些是每个系统的每个组件的当前状态。接下来是按系统对它们进行分组并计算“已停止”的出现次数。

我的问题是，如果系统从未更新过，某些系统将没有任何带有“已停止”的行，或者根本没有任何行。然而，我仍然必须将它们作为结果的一部分。仅按系统对它们进行分组适用于除这两种情况之外的所有情况，其中即使根本没有停止的组件，结果值为“1”。

我怎样才能进行查询，将返回如下内容：

```
system_id    status_count
49           1
50           1
51           0 
```

并不是：

```
system_id    status_count
49           1
50           1
51           1 
```

与上表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T12:18:59.727

你必须使用`SUM(boolean)`，像这样：

```
select system_id, 
  sum(current_status = 'STOPPED') AS stopped_count, 
  sum(current_status = 'RUNNING') as running_count
from tbl
group by system_id 
```

布尔值在 MySQL 中自动减少为整数

输出：

```
| SYSTEM_ID | STOPPED_COUNT | RUNNING_COUNT |
|-----------|---------------|---------------|
|        49 |             1 |             1 |
|        50 |             1 |             1 |
|        51 |             0 |             1 | 
```

现场测试：[http ://www.sqlfiddle.com/#!2/d3bcc/2](http://www.sqlfiddle.com/#!2/d3bcc/2)

如果 COUNT（或与此相关的任何聚合函数）来自 LEFT JOIN，则必须用 COALESCE 或 ISNULL 将结果括起来：

```
select system_id, 
  isnull( sum(current_status = 'STOPPED') , 0 ) AS stopped_count, 
  isnull( sum(current_status = 'RUNNING') , 0 ) as running_count
from tbl
group by system_id 
```

ANSI SQL 兼容：

```
select system_id, 
  coalesce( sum(current_status = 'STOPPED') , 0 ) AS stopped_count, 
  coalesce( sum(current_status = 'RUNNING') , 0 ) as running_count
from tbl
group by system_id 
```

* * *

一些数据库虽然有点冗长。Postgresql：[http ://www.sqlfiddle.com/#!1/d3bcc/2](http://www.sqlfiddle.com/#!1/d3bcc/2)

```
select system_id, 
  sum((current_status = 'STOPPED')::int) AS stopped_count, 
  sum((current_status = 'RUNNING')::int) as running_count
from tbl
group by system_id 
```

其他数据库：[http ://www.sqlfiddle.com/#!3/d3bcc/2](http://www.sqlfiddle.com/#!3/d3bcc/2)

```
select system_id, 
  count(case when current_status = 'STOPPED' then 1 end) AS stopped_count, 
  count(case when current_status = 'RUNNING' then 1 end) as running_count
from tbl
group by system_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T12:36:16.160

```
select system_id, 
IF( if(currentstaus = 'RUNNING',0.5,0) + if(currentstaus = 'STOPPED',0.5,0)=1,1,0) 
AS status_count from table_name group by system_id 
```

试试这个查询并告诉我它是否有效。

# python - 索引，for循环，让事情看起来更干净

> ID：10652388
> 
> 赞同：1
> 
> 时间：2012-05-18T12:10:01.237
> 
> 标签：python, django

我有许多代表不同版本字母的对象。其中一些版本已印刷（加盖时间戳）。如果已经打印了一封信（及其所有版本），我需要获取最后一个打印版本的时间戳（很容易完成），然后是最后一个打印版本的版本号（目前使我的代码看起来像 C++{shiver} ）。

那么我如何让这个看起来更像pythonic（更干净）

```
try:
    # get the lastest letter version that has been printed
    lv_temp = LV.objects.filter(letter=letter.id,printed_last__isnull=False).latest('id')
    # get the id's of all the letter versions for a particular letter
    lv_temp2 = LV.objects.filter(letter=letter.id).order_by('id')
    lv_temp4 = []
    # get all the letter version for a particular letter
    for lv_temp3 in lv_temp2:
        lv_temp4.append(lv_temp3.id)
    # get an array of the indexes and the pks
    for i,v in enumerate(lv_temp4) :
        # if the pk of the last printed version is the same one as in the loop...
        if lv_temp.id == v :
            # ...save the index as the version number
            lv_printed_ver = i
    lv_printed = lv_temp.printed_last
except ObjectDoesNotExist:
    lv_printed = None
    lv_printed_ver = None 
```

*（我用过`lv_temp...`是因为我生气了多少次我不得不传递东西）*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T12:26:11.683

生成 id 列表的更 Pythonic 方式是列表推导，替换

```
lv_temp2 = LV.objects.all().order_by('id')
lv_temp4 = []
for lv_temp3 in lv_temp2:
    lv_temp4.append(lv_temp3.id) 
```

和

```
lv_temp4 = [i.id for i in LV.objects.all().order_by('id')] 
```

然后，假设我正确理解了您的代码并且您正在列表中查找与 id 匹配的索引，您可以执行以下操作：

```
lv_printed_ver = lv_temp4.index(lv_temp.id) 
```

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T12:37:30.087

我猜这是一些 django 代码。

在这种情况下，你有一个比语法更大的问题：你向我们展示的那段代码得到一个完整的表，然后在 python 代码中过滤它。你不应该那样做。

您的问题是您将 sql 表中的位置用作有意义的东西。您应该做的是在`LV`对象中明确显示版本号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T13:39:48.603

我想这一切都错了。代替：

```
# get the last printed letter version for a letter
# get all the letter versions for a letter
# loop over all the letter versions for a letter and extract their id
# loop over the letter versions id's and compare them to the id of the...
#     ... last printed letter version
# if they match save the position in the loop as the version number 
```

并且应该这样想：

```
# get the last printed letter version for a letter
# count all the letter versions for a particular letter where their...
#    ... id's are less then the id of the last printed letter version...
#    ... and use this as the version number 
```

这种不同的思维方式使我最终得到：

```
try:
    # get the lastest letter version that has been printed
    lv_temp = LV.objects.filter(letter=letter.id,printed_last__isnull=False).latest('id')
    # count the number of letter versions for a particular letter whos...
    #      ... id is less then the id of the last printed letter version
    lv_printed_ver = LV.objects.filter(letter=letter.id,id__lte=lv_temp.id).count()
    lv_printed = lv_temp.printed_last
except ObjectDoesNotExist:
    lv_printed = None
    lv_printed_ver = None 
```

# java - java对象列表比较

> ID：10652389
> 
> 赞同：2
> 
> 时间：2012-05-18T12:10:07.073
> 
> 标签：java, comparator, compareto

我有`List<Student> stud1 = new ArrayList<Student>();` 和`List<Student> stud2 = new ArrayList<Student>();`

并且`Student`班级有**姓名**，**地址**等成员。

我要做的是，我必须列出 stud1 中的学生（如果**stud1 的学生名称**等于**stud2 的学生名称**）。

如何做到这一点？

我想知道，有没有像**ListUtil这样的现有****Java 库**来解决这个问题？

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T12:12:59.613

只需遍历它们并检查并继续添加结果列表如果你想优化它然后

创建地图

```
Map<String, List<Student>> dictionaryMapOfStudents; 
```

然后选择`HashMap`实现，只寻找名字匹配的学生，

例如

```
A Asdahd, Aasldfalf, Aero
B Baksd, Bajsr, Biro 
```

所以现在你不会搜索完整列表，缩小搜索范围

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T12:14:23.810

这个例子可能对你有帮助

```
import java.util.Collection;
import java.util.ArrayList;
import java.util.Arrays;

public class Repeated {
public static void main( String  [] args ) {
    Collection listOne = new ArrayList(Arrays.asList("milan","dingo", "elpha", "hafil", "meat", "iga", "neeta.peeta"));
    Collection listTwo = new ArrayList(Arrays.asList("hafil", "iga", "binga", "mike", "dingo"));

    listOne.retainAll( listTwo );
    System.out.println( listOne );
} 
```

}

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-18T12:16:51.017

你可以做：

1.  构造一个`HashSet<String>`包含所有`Student`s名称的 a`stud2`
2.  对于每个`Student`in `stud1`，检查他的名字是否在集合中，如果是，则将其添加到列表中以返回。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T12:16:05.773

那么有很多方法可以比较集合中的元素，如果您只需要比较可以迭代和比较两个列表中的名称的学生的姓名，但我认为实现 Comparable 并在您的 Student 类中创建您的 compare_to 方法更优雅.

更多信息在这里：[http ://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Comparable.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Comparable.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T12:33:11.803

这里有一些算法给你：

*   为 stud3 创建数组列表
*   基于 stud1 从 int i = 0 到 i = (stud1.size() - 1) 的循环
    *   基于 stud2 从 int j = 0 到 j = (stud2.size() - 1) 的循环
        *   检查 stud1.get(i).getName() 是否等于 stud2.get(j).getName()
            *   检查 stud1.get(i) 是否已经在 stud3
                *   继续
            *   别的
                *   将 stud1.get(i) 添加到 stud3

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-18T12:57:57.990

您可以使用 HashSet 进行查找名称匹配：

```
class Student {
    private String name;
    private String address;

    public Student(String name, String address) {
        this.name = name;
        this.address = address;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getAddress() {
        return address;
    }

    public void setAddress(String address) {
        this.address = address;
    }
}

public class Program {
    public static void main(String[] args) {
        List<Student> s1 = new ArrayList<Student>();
        List<Student> s2 = new ArrayList<Student>();

        // generate data
        for (int i = 0; i < 5; i++) {
            Student s = new Student("Student" + i, "");
            s1.add(s);
        }
        for (int i = 0; i < 10; i++) {
            Student s = new Student("Student" + i, "");
            s2.add(s);
        }

        // create a lookup HashSet
        Set<String> nameSet = new HashSet<String>();
        for (Student s : s2) {
            nameSet.add(s.getName());
        }

        List<Student> result = new ArrayList<Student>();
        // perform lookup
        for (Student s : s1) {
            if (nameSet.contains(s.getName())) {
                // add the matching student to the result list
                result.add(s);
            }
        }
    }
} 
```**

# ruby-on-rails-3 - Rails 国际化 (I18n)：url 中的语言环境

> ID：10652395
> 
> 赞同：3
> 
> 时间：2012-05-18T12:10:49.257
> 
> 标签：ruby-on-rails-3, internationalization

我是 rails 新手（使用 3.2.1），我正在关注[rails guides](http://guides.rubyonrails.org/i18n.html)上的 i18n-guide 。

我在这部分遇到问题：

> 您可能希望 URL 看起来像这样：www.example.com/en/books（加载英语语言环境）和 www.example.com/nl/books（加载荷兰语言环境）。这可以通过上面的“覆盖 default_url_options”策略来实现：您只需以这种方式使用 path_prefix 选项设置路由

但是当我在视图中使用 <%= products_path %> 时，它会返回：**/products?locale=en** 并且我希望它返回**/nl/products**

当我在浏览器中输入 url (fe localhost:3000/nl/products) 时，页面会显示正确的语言环境。

我错过了什么？

应用控制器：

```
class ApplicationController < ActionController::Base
  before_filter :set_locale

  def set_locale
    I18n.locale = params[:locale] || I18n.default_locale
  end

  def default_url_options(options = {})
    { :locale => I18n.locale }
  end
end 
```

路线：

```
 scope "/:locale" do
    resources :products
  end

  match '/:locale' => 'products#index' 
```

耙路线：

```
 products GET    /products(.:format)                  products#index
             POST   /products(.:format)                  products#create
 new_product GET    /products/new(.:format)              products#new
edit_product GET    /products/:id/edit(.:format)         products#edit
     product GET    /products/:id(.:format)              products#show
             PUT    /products/:id(.:format)              products#update
             DELETE /products/:id(.:format)              products#destroy
             GET    /:locale/products(.:format)          products#index
             POST   /:locale/products(.:format)          products#create
             GET    /:locale/products/new(.:format)      products#new
             GET    /:locale/products/:id/edit(.:format) products#edit
             GET    /:locale/products/:id(.:format)      products#show
             PUT    /:locale/products/:id(.:format)      products#update
             DELETE /:locale/products/:id(.:format)      products#destroy
                    /:locale(.:format)                   products#index
        root        /                                    products#index 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T03:35:31.490

如何改用该`path_prefix`选项

```
def default_url_options(options = {})
  { :path_prefix => I18n.locale }
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T17:29:05.073

我最终使用了[rails-translate-routes gem](https://github.com/francesc/rails-translate-routes "轨道翻译路线宝石")。

它给了我预期的结果+可以翻译路线，这是一个很大的盈余。

# mysql - 例如，在 MySQL GROUP BY 中，如何选择第 n 个值——不是最大值或最小值，而是第二个？

> ID：10652397
> 
> 赞同：1
> 
> 时间：2012-05-18T12:11:06.400
> 
> 标签：mysql, select, group-by, denormalization

具体来说，我有多次点击与会话相关联，并且每次点击都有一个日期时间。对于每个会话，我想选择字段“first_click_datetime”、“second_click_datetime”、“third_click_datetime”等。

到目前为止，我有这样的事情：

```
SELECT session_id, 
min(click_datetime) as first_click_datetime,
CASE
  when total_number_of_clicks = 2 then max(click_datetime)
/* when total_number_of_clicks >2 then ???? */
  else null
END as second_click_datetime
FROM table1 GROUP BY 1; 
```

如何获得第 2、第 3、第 4 等 click_datetime？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T12:22:09.663

```
SELECT  session_id,
        (
        SELECT  click_datetime
        FROM    table1 t1
        WHERE   t1.session_id = td.session_id
        ORDER BY
                session_id DESC, click_datetime DESC, id DESC
        LIMIT   1
        ) AS first_click,
        (
        SELECT  click_datetime
        FROM    table1 t1
        WHERE   t1.session_id = td.session_id
        ORDER BY
                session_id DESC, click_datetime DESC, id DESC
        LIMIT   1, 1
        ) AS second_click,

        (
        SELECT  click_datetime
        FROM    table1 t1
        WHERE   t1.session_id = td.session_id
        ORDER BY
                session_id DESC, click_datetime DESC, id DESC
        LIMIT   2, 1
        ) AS third_click
FROM    (
        SELECT  DISTINCT session_id
        FROM    table1
        ) td 
```

为此创建一个索引以`(session_id, click_datetime, id)`使其快速工作。

# ios - iOS 上的 Google Analytics API 只能提供 24 小时的数据？

> ID：10652399
> 
> 赞同：1
> 
> 时间：2012-05-18T12:11:09.897
> 
> 标签：ios, google-analytics

我有一个使用谷歌分析的 iPad 应用程序。

当用户离线时，数据会留在 iPad 本地的“Google 数据库”中。并在下一次在线时发送应用推送数据。

非常大的问题是，如果数据超过 24 小时，分析根本就不会收到它！

你见过这个问题吗？任何解决方法\解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T12:23:57.597

我知道这并不能直接回答您的问题，但这只是一个建议。我使用 Localytics ( [http://www.localytics.com](http://www.localytics.com) ) 比使用 iOS 应用程序中的 Google Analytics 更幸运。您可能想改用 Localytics。（我与这两种产品都没有从属关系，我只是一个满意的 Localytics 用户）。

# java - 分发软件更新的库

> ID：10652401
> 
> 赞同：2
> 
> 时间：2012-05-18T12:11:13.250
> 
> 标签：java, deployment, software-distribution, automatic-updates

我们为 Windows、OS X 和 Linux 提供 Java 桌面软件。目前，当更新可用时，我们的客户必须从我们的网站下载新的软件包并手动安装。这意味着在 Windows 上，他们必须在 OS X 和 Linux 上启动设置以提取 tar.gz 文件。这通常没什么大不了的，但我们仍然希望简化这个过程。

在我们开始重新发明轮子之前，我想知道是否已经有可用的解决方案可以针对特定平台执行正确的步骤。Java Web Start 之类的东西，但对它有更多的控制，不需要在系统上安装它。我知道像 Apache Felix 这样的 OSGi 平台可以做到这一点，但我认为它们是矫枉过正的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T12:12:53.077

Java Web Start 非常适合这个！

[http://www.oracle.com/technetwork/java/javase/tech/index-jsp-136112.html](http://www.oracle.com/technetwork/java/javase/tech/index-jsp-136112.html)

它允许您通过网络分发桌面应用程序，并允许您轻松更新它们。这是一项非常方便的技术。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T12:13:27.603

使用[Java Web Start](https://stackoverflow.com/tags/java-web-start/info)安装和启动应用程序。

> Java Web Start (JWS) 是 Oracle Corporation 的技术，用于直接**从网络或 Internet 链接启动富客户端（Swing、AWT、SWT）****桌面应用程序**。它为支持 Java 的平台提供“一键式”安装。
> 
>  **JWS 提供了许多吸引人的功能，包括但不限于启动屏幕、桌面集成、文件关联、**自动更新**（包括延迟下载和更新的编程控制）、按平台、架构或 Java 版本、配置划分本地和其他资源下载运行时环境（最低 J2SE 版本、运行时选项、RAM 等），使用扩展轻松管理公共资源。**

 *** * *

> 类似 Java Web Start 的东西，但对它有更多的控制，不需要在系统上安装它

1.  如果安装了 Java 1.5+，那么肯定会安装 JWS。从信息。页。

    > JWS 在 Java 1.2 发布两年后于 2001 年 3 月 14 日首次作为单独下载提供，并且可以作为自由浮动实体启动应用程序和小程序。该功能与 J2SE 1.4.2 捆绑在一起。

2.  究竟控制什么？JWS 提供程序化控制：
    *   [`DownloadService`](http://docs.oracle.com/javase/7/docs/jre/api/javaws/jnlp/javax/jnlp/DownloadService.html)可以控制应用程序的方式/时间。已更新。
    *   最新[`IntegrationService`](http://docs.oracle.com/javase/7/docs/jre/api/javaws/jnlp/javax/jnlp/IntegrationService.html)的为桌面集成提供了相同的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T12:15:28.120

除了提到的 Java Web Start 技术之外，Eclipse RCP（基于 SWT 的 RCP）和 NetBeans 平台（基于 Swing 的 RCP）还提供更新管理器。**

# html - HTML5 - 将视频下载到本地设备，然后再播放

> ID：10652402
> 
> 赞同：1
> 
> 时间：2012-05-18T12:11:15.843
> 
> 标签：html, video, download

就像在 App Store 上可用的一些现有应用程序（可能是本机应用程序）一样，我的任务是下载视频内容到移动/平板电脑应用程序，并且能够在离线时播放相同的内容。要求是在 HTML5 上。虽然我研究了各种指导使用视频标签的文章，但似乎浏览器会流式传输视频或按需下载视频。我还没有找到我的特定问题的答案，即视频下载是与播放相同的单独活动。还查看了 FileSystem API，但似乎最新的 iOS 或 Android 浏览器尚不支持该 API。任何建议/指针都会很棒。每个视频文件通常 > 20 Mbs。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T08:09:21.397

# Not possible

That kind of functionality does not exist. My gut says it may never exist with iOS devices. You're going to need to find another approach.

# java - EJB QL 语法错误

> ID：10652405
> 
> 赞同：1
> 
> 时间：2012-05-18T12:11:30.740
> 
> 标签：java, exception, syntax, jpql, ejbql

在我的应用程序中，我有以下 2 个实体：

```
@Entity
@Inheritance(strategy=InheritanceType.JOINED)
public class Commentable implements Serializable {

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    protected Long id;
    protected long createdDate;
    ...
}

@Entity
public class Announcement extends Commentable implements Serializable { 

    private int    type;  
    private String title;
    @Column(columnDefinition = "MEDIUMTEXT")
    private String content;
    ...
} 
```

当我尝试从 Announcement 表中获取一些行时，我不断收到以下行的语法错误：

```
Query q = em.createQuery("SELECT A FROM Announcement A JOIN Commentable C ON A.id = C.id WHERE A.type=:type ORDER BY C.createdDate DESC"); 
```

这是堆栈跟踪：

```
Caused by: Exception [EclipseLink-8023] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.JPQLException
Exception Description: Syntax error parsing the query [SELECT A FROM Announcement A JOIN Commentable C ON A.id = C.id WHERE A.type=:type ORDER BY C.createdDate DESC].
Internal Exception: org.eclipse.persistence.internal.libraries.antlr.runtime.EarlyExitException 
```

如果您能告诉我我在这里做错了什么，我将不胜感激。

最好的问候，詹姆斯·特兰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T12:20:23.313

JPQL中没有`ON`子句。这不是必需的，因为您只能连接两个在它们之间具有关联的实体，并且关联的映射已经包含了解必须在哪些列上进行连接所需的必要信息。因此，以下内容就足够了：

```
SELECT a FROM Announcement a JOIN a.commentable c
WHERE a.type = :type ORDER BY c.createdDate DESC 
```

这假设您在`Announcement`和之间有一个 ToOne 关联`Commentable`。

编辑：公告扩展可评论。所以你不需要任何加入。JPA 引擎为您执行连接（如果需要连接，取决于继承策略）：

```
SELECT a FROM Announcement a WHERE a.type = :type ORDER BY a.createdDate DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T12:28:41.573

如果 Announcement 扩展 Commentable，则不需要加入：

```
select a from Announcement a where a.type = :type order by a.createdDate desc 
```

# windows - 我需要解析 OpenType 文件中的 GSUB 和 GPOS 表。有没有可用的软件可以做到这一点？

> ID：10652412
> 
> 赞同：0
> 
> 时间：2012-05-18T12:11:52.300
> 
> 标签：windows, visual-c++, fonts, opentype

我需要以更人性化的方式检查 OpenType 字体文件中 GSUB 和 GPOS 表的二进制内容。有没有可用的软件可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T14:52:45.930

[fonttools/TTX](https://github.com/fonttools/fonttools)可以做你想做的。它是一个基于 Python 的字体操作库。TTX 组件可以将字体（TTF 或 OTF）转储到 XML，允许您以抽象的方式查看 GSUB 和 GPOS（以及许多其他表）。

# c++ - boost::mutex 在模板中使用时不起作用

> ID：10652417
> 
> 赞同：2
> 
> 时间：2012-05-18T12:12:14.433
> 
> 标签：c++, templates, boost, mutex

我正在尝试编写一个类模板：

```
template<typename ObjType> class SharedBuffer: private boost::noncopyable 
```

我正在使用 boost::mutex 来同步对缓冲区数据的访问：

```
private: boost::mutex myMonitor; 
```

但是当我创建锁时，我得到一个奇怪的编译错误：

```
template<typename ObjType>
inline void SharedBuffer<ObjType>::clear(void){
  boost::mutex::scoped_lock lk(myMonitor);
  myBuffer.clear();
} 
```

```
Error   9   error C2664: 
'boost::unique_lock<Mutex>::unique_lock(boost::unique_lock<Mutex> &)' :
 cannot convert parameter 1 from
 'const boost::mutex' to 'boost::unique_lock<Mutex> &' 
```

我不知道为什么会这样。我没有将 myMonitor 声明为常量。我正在使用 VS2010 并提升 1.4.9

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T12:53:49.147

问题是：

> 无法将参数 1 从“ **const** boost::mutex”转换为“boost::unique_lock &”

解决方案是：

> 私有的：**可变**的 boost::mutex myMonitor；

# iphone - 在 UITableviewController 中调用 viewWillAppear

> ID：10652420
> 
> 赞同：3
> 
> 时间：2012-05-18T12:12:25.317
> 
> 标签：iphone, objective-c, ios, xcode, uitableview

我正在尝试`[MyTableviewController.tableview reloaddata]`为我的 UITableView 调用该函数。我认为最好的 `-(void) viewWillAppear`方法是 UITableViewController 子类的方法。

不知何故，在创建类时没有创建代码，我试图实现该方法，但收效甚微。

在对 SO 和其他各种网站进行一些研究后，我发现提示问题可能在于 UIViewController 子类是导航控制器的一部分，而导航控制器又是标签栏控制器的一部分。发布的一般建议和代码是将控制器中的一个（哪个？）子类化并实现`-viewWillAppear`消息。

我的问题是： 1\. 有没有办法在不继承另一个控制器的情况下调用这个急需的方法？2.如果是这样，我该怎么做？3.如果没有，你能否向我解释一下我必须做什么，更重要的是，为什么我必须这样做？

下面是 UITableViewController 的完整代码：

```
//
//  OverViewController.m
//  NoificationTest
//
//  Created by Mirko Winckel on 15.03.12.
//  Copyright (c) 2012 __MyCompanyName__. All rights reserved.
//

#import "OverViewController.h"
#import "SecondOverViewController.h"
#import "Globals.h"

@interface OverViewController ()

@end

@implementation OverViewController

@synthesize entrys;

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:UITableViewStyleGrouped];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    [self.tableView reloadData];

    if (entrys == nil) 
    {

    NSString* filePath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSString* fileName = [[Globals sharedGlobals].selectedProject stringByAppendingString:@".csv"];
    NSString* fileAtPath = [filePath stringByAppendingPathComponent:fileName];
    NSString* content = [[NSString alloc] initWithData:[NSData dataWithContentsOfFile:fileAtPath] encoding:NSUTF8StringEncoding];
    NSString *stringToFind =@"\n";
    entrys = [content componentsSeparatedByString:stringToFind];

    }

    /* Uncomment the following line to preserve selection between presentations.
    // self.clearsSelectionOnViewWillAppear = NO;

    // Uncomment the following line to display an Edit button in the navigation bar for this view controller.
    // self.navigationItem.rightBarButtonItem = self.editButtonItem;*/
}

- (void)viewDidUnload{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{

    int weeks = 1+1;

    return weeks;
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section{

    NSString *sectionHeader = nil;

    if ( section == 0 ) {

       sectionHeader = @"Refresh - test";

    }

    if (  section == 1 ) {
        if ( [Globals sharedGlobals].selectedProject != nil){

            NSString* temp = @"Current in project ";
            [temp stringByAppendingString:[Globals sharedGlobals].selectedProject];

            sectionHeader = temp;

        }

        else {
            sectionHeader = @"No project selected";
        }
    }

    if (  section == 2 ) {
        sectionHeader = @"Week 3";
    }

    if (  section == 3 ) {
        sectionHeader = @"Week 4";
    }

    if (  section == 4 ) {
        sectionHeader = @"Week 5";
    }

    return sectionHeader;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    int rows;

    if (section == 0){
        rows = 1;
    }

    if (section == 1 ){
        rows = [entrys count] -1;
    }

    return rows ;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
     static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
           cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    NSString *oneLine = [entrys objectAtIndex:indexPath.row];
    NSArray *lineComponents = [oneLine componentsSeparatedByString:@";"];

    cell.textLabel.text = [lineComponents objectAtIndex:0];
    cell.textLabel.textColor = [UIColor colorWithRed:0.0 green:0.8 blue:0.2 alpha:1.0];

    return cell;
}

/*
// Override to support conditional editing of the table view.
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the specified item to be editable.
    return YES;
}
*/

/*
// Override to support editing the table view.
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        // Delete the row from the data source
        [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
    }   
    else if (editingStyle == UITableViewCellEditingStyleInsert) {
        // Create a new instance of the appropriate class, insert it into the array, and add a new row to the table view
    }   
}
*/

/*
// Override to support rearranging the table view.
- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)fromIndexPath toIndexPath:(NSIndexPath *)toIndexPath
{
}
*/

/*
// Override to support conditional rearranging of the table view.
- (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the item to be re-orderable.
    return YES;
}
*/

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

    if (indexPath.section == 0) {

        [self.tableView reloadData];

        [tableView deselectRowAtIndexPath:indexPath animated:YES];

    }

    if (indexPath.section == 1) {

    [tableView deselectRowAtIndexPath:indexPath animated:YES];

    SecondOverViewController *anotherViewController = [[SecondOverViewController alloc] initWithStyle:UITableViewStylePlain];

    NSArray *rowArray = [[entrys objectAtIndex:indexPath.row] componentsSeparatedByString:@";"];

    anotherViewController.oneRow = rowArray;

    [self.navigationController pushViewController:anotherViewController animated:YES];

    } 

    // Navigation logic may go here. Create and push another view controller.
    /*
     <#DetailViewController#> *detailViewController = [[<#DetailViewController#> alloc] initWithNibName:@"<#Nib name#>" bundle:nil];
     // ...
     // Pass the selected object to the new view controller.
     [self.navigationController pushViewController:detailViewController animated:YES];
     */

}

@end 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T12:20:24.477

如果您的 ViewController 是从 UITableViewController 派生的，请尝试以这种方式调用 reloadData 函数：

```
[self.tableView reloadData]; 
```

**另外，我建议在viewDidLoad**下调用 reloadData而不是**viewDidAppear**。后者可以被意外调用多次（例如当另一个视图从堆栈中弹出时），而前者只被调用一次。

例如：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    [self.tableView reloadData];
} 
```

# reflection - 符号功能的对立面是什么？

> ID：10652422
> 
> 赞同：1
> 
> 时间：2012-05-18T12:12:29.507
> 
> 标签：reflection, lisp, common-lisp

虽然`(symbol-function '1+)`将函数绑定到 symbol `#<function 1+>`，但获取特定函数绑定的符号的方法是什么？像：`(function-symbol #'1+)`=> `'1+`？还是我必须自己在当前包中搜索它？（希望不是...）

谢谢！

**编辑：**

这是原型（但它不起作用，因为如果函数未定义但已绑定，我会收到错误 - 我不太明白）

```
(defun function-symbol (searched)
  (loop for f being the symbols in *package*
       do (format t "f: ~s~&" f)
       when (and (fboundp f)
         (eq searched (symbol-function f)))
       collect f)) 
```

**更多编辑：** 似乎`symbol-value`正在抛出，删除该检查似乎有效，但我仍然想找到更好的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T19:22:13.347

如果您的 Common Lisp 支持它，则有 ANSI Common Lisp 函数`FUNCTION-LAMBDA-EXPRESSION`。它的第三个值是名称。

使用 LispWorks：

```
CL-USER 95 > (defun my-foo () )
MY-FOO

CL-USER 96 > (nth-value 2 (function-lambda-expression #'my-foo))
MY-FOO 
```

# codeigniter - 带有绑定的 Codeigniter 选择查询

> ID：10652423
> 
> 赞同：1
> 
> 时间：2012-05-18T12:12:35.480
> 
> 标签：codeigniter, binding

我有一个大问题，我无法解决。在 codeigniter 中，我创建了一个模型，他这样做了：

```
public function listazas($mettol, $mennyit, $feltetel)
    {
        $query = "SELECT * FROM vicc ORDER BY ? DESC LIMIT ?,?";
        $query = $this->db->query($query, array($feltetel, $mettol, $mennyit));

        return $query->result_array();
    } 
```

在控制器中我使用它：

```
 $viccek = $this->index_model->listazas(0, 10, "ertekeles");

   $this->load->view('index/index', array(
       'viccek' => $viccek
   )); 
```

而这里的sql不按部分进行排序......为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T12:36:04.177

嗯，这是因为你正在做 a`ORDER BY 'column'`而不是`ORDER BY column`.

您必须使用以下方法替换当前功能：

```
public function listazas($mettol, $mennyit, $feltetel)
{
    $feltetel = $this->db->escape_like_str($feltetel);
    $query = "SELECT * FROM vicc ORDER BY {$feltetel} DESC LIMIT ?,?";
    $query = $this->db->query($query, array($mettol, $mennyit));

    return $query->result_array();
} 
```

基本上你在它周围`query()`转义了`$feltetel`，`''`使它像一个字符串而不是一个列名。

对于像这样简单的查询，您可以通过[Active Records](http://codeigniter.com/user_guide/database/active_record.html#select)更轻松地完成它。

您也可以尝试通过`echo $this->db->last_query();`在 the 之后运行`$this->db->query()`并比较结果来自行解决此问题。
然后你会注意到`''`after `ORDER BY`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-02T12:04:20.390

```
$sql = "INSERT INTO tbl_user (name, age, groupname)
        VALUES (?, ?, ?)";
$this-> db-> query($sql,array('codeigniter', 35, 'Group 1')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-08T09:48:24.770

**看这个例子**很容易，只是控制器中的模型你只需要使用这些参数调用方法以获得更详细的解决方案，你可以问我****

 **```
public function read_all($limit,$start){
    $this->db->select('*');        
    $this->db->from('postes');
    $this->db->order_by('id', 'ASC');
    $this->db->limit($limit, $start);    
    $q = $this->db->get();
    return $q->result_array();
} 
```**

# visual-studio-2010 - LINQ 查询无法正常工作

> ID：10652427
> 
> 赞同：0
> 
> 时间：2012-05-18T12:12:54.403
> 
> 标签：visual-studio-2010, linq, entity-framework, linq-to-entities

**LINQ 查询无法正常工作**

我想做如下，我想在某些条件下从访问者表中访问访问者记录

我想获取访问过该地点的最后 5 位不同访客的列表

我正在使用以下查询来获取结果，但是当涉及 distinct() 时会导致问题， distinct() 会破坏现有订单。

```
var result = ObjPlace.visitorlist
.where(visitpalce => visitplace.name == Placename)
.OrderByDescending(visitor => visitor.visitdate)
.Select(x => x.visitorID)
.Distinct()
.take(5); 
```

当我删除 distinct() 它完美地工作......

我怎样才能达到同样的效果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T13:00:14.727

```
 var query = from v in ObjPlace.visitorlist
             where v.name == Placename
             group v by v.visitorID into g
             let lastVisit = g.Max(x => x.visitdate)
             orderby lastVisit descending
             select g.First(v => v.visitdate == lastVisit); 
```

这将返回按上次访问排序的不同实体列表。然后只取其中的前五名：

```
query.Take(5) 
```

您需要在这里进行分组，因为一位访问者可以在前 5 条记录中进行多次访问。因此，首先您要按地名过滤列表。然后按访客对所有访问进行分组。即您有访问组。在每个组中定义访问者的最后访问时间，然后只需选择组中的第一个访问实体，其时间等于该访问者的最后访问日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T12:16:54.963

您可以尝试更改顺序：

```
var result = ObjPlace.visitorlist
               .Where(visitpalce => visitplace.name == Placename)
               .Distinct()
               .OrderByDescending(visitor => visitor.visitdate)
               .Select(x => x.visitorID)
               .Take(5); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T12:58:06.940

您要获取的不同数据是什么？

如果您的对象实现了 IEquatable，那么所有字段都将被比较 - 即，如果两个对象中的日期不同，它们将是不同的，但如果任何其他字段不同，则对象将被视为不同。

你能发布你的输入数据的样本，你得到的输出和预期的输出吗？

# jasper-reports - Jasper 报告找不到子报告路径

> ID：10652431
> 
> 赞同：1
> 
> 时间：2012-05-18T12:13:14.890
> 
> 标签：jasper-reports, classpath, subreport

我有一个带有一些子报告的 jasperreport。我想将 .jasper 文件存储在类路径中。

实际上我的报告在 com/myapp/reports 中。

我可以使用此路径成功加载主报告：

```
 private static String D1_PACKAGE = "/com/myapp/report/d1.jasper";
...
    InputStream reportD1 = ReportProvider.class.getResourceAsStream(D1_PACKAGE);
    bytes = JasperRunManager.runReportToPdf(reportD1, params, new JREmptyDataSource()); 
```

但问题是当它查找子报表时。它们在文件夹中，但我尝试使用以下路径之一更改参数 SUBREPORT_DIR 但没有人工作：

```
./
/com/myapp/report
com/myapp/report 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T10:23:26.160

我应该使用 class.getResourceAsStream 加载子报表，而不是将其作为参数传递给主报表。

# iphone - SBJSON 链接错误

> ID：10652444
> 
> 赞同：0
> 
> 时间：2012-05-18T12:13:54.467
> 
> 标签：iphone, linker, sbjson

我正在使用 googles GdataStatic lib 在我的项目中集成 youtube 服务。我还在使用 JSON 库来解析 JSON 文件。我的问题是当我构建项目时它显示错误，如`_OBJC_METACLASS_$_SBJsonParser`发现重复符号。发生的情况是，当我构建库时，它创建了 SBJSONParser.o，当我再次构建它时，它创建了新的 SBJSONParser.o，并且链接器报告错误，因为它有两个相同的输入。我如何解决这个错误？我使用了 -allLoad -objC 等链接标志（我不确定那里的标志的意义是什么），我得到了同样的错误。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T21:50:32.100

这大概是因为 GdataStatic 已经链接到 SBJson。你能简单地使用他们发布的版本吗？您可以仅包含 SBJson 标头，但不能包含源。

# java - 使用 JAXB 解组 XML 时出现 ClassCastException

> ID：10652447
> 
> 赞同：4
> 
> 时间：2012-05-18T12:14:02.890
> 
> 标签：java, xml, xsd, jaxb, unmarshalling

我已经使用`xjc`根元素类型为 的 xsd`A`生成了 java 类`AType`。

jaxb 生成的根元素是`AType`& 没有`A`生成任何类。

当我尝试解组与该 xsd 对应的 xml 并转换 JaxbElement 时，它会引发转换异常：

片段：

`JAXBContext jaxbContext = JAXBContext.newInstance(Class.forName("AType"));
Unmarshaller unmarshaller = jaxbContext.createUnmarshaller();
AType aType = (AType) unmarshaller.unmarshal(new ByteArrayInputStream(xmlString.getBytes()));`

例外：

`java.lang.ClassCastException: javax.xml.bind.JAXBElement`

其他情况的相同代码可以正确执行并成功反序列化。

我怎样才能找到`unmarshal()`给我什么类型的对象？我不知道在这种情况下出了什么问题，我试过打印出其中的字段，`jaxbElement`但它不是很有用！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-18T12:24:19.283

如果根元素的类（此处为：AType）不包含[XmlRootElement -注释](http://docs.oracle.com/javase/7/docs/api/javax/xml/bind/annotation/XmlRootElement.html)，则返回的根元素将包装在 JAXBElement 中，您必须使用其[getValue()](http://docs.oracle.com/javase/7/docs/api/javax/xml/bind/JAXBElement.html#getValue%28%29) -方法来获取根元素。

AFAIK，如果根元素的类型是匿名类型，XJC 只会生成 XmlRootElement-annotation。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T12:18:51.547

您可以尝试这样做：

```
Object o = unmarshaller.unmarshal(...);
System.out.println(o.getClass().getName()); 
```

# youtube - 视频播放完毕后摆脱嵌入式 YouTube 播放器

> ID：10652459
> 
> 赞同：4
> 
> 时间：2012-05-18T12:14:32.093
> 
> 标签：youtube, youtube-javascript-api

我目前有以下代码可以在页面上播放 youtube 视频。

```
<div id="player"></div>
<script>
//Load player api asynchronously.
var tag = document.createElement('script');
tag.src = "http://www.youtube.com/player_api";
var firstScriptTag = document.getElementsByTagName('script')[0];
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
var player;
function onYouTubePlayerAPIReady() {
    player = new YT.Player('player', {
      height: '390',
      width: '640',
      videoId: 'JW5meKfy3fY',
      playerVars: { 'autoplay': 1, 'rel': 0, 'showinfo': 0, 'egm': 0, 'showsearch': 0, },
      events: {
        'onReady': onPlayerReady,
        'onStateChange': onPlayerStateChange
      }
    });
}
function onPlayerReady(event) {
    event.target.playVideo();
}
function onPlayerStateChange(event) {
    //When the video has ended
    if (event.data == YT.PlayerState.ENDED) {
        //Get rid of the player
    }
} 
```

onPlayerStateChange 函数找出播放器何时播放完视频。那么我怎样才能让这个播放器消失呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T17:56:00.040

如果您使用的是 IFRAME API：

```
function onPlayerStateChange(event) {
    //When the video has ended
    if (event.data == YT.PlayerState.ENDED) {
        //Get rid of the player
        event.target.destroy();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T12:20:21.190

也许像

```
function onPlayerStateChange(event,element) {
    //When the video has ended
    if (event.data == YT.PlayerState.ENDED) {
        //Get rid of the player
        element.style.display = "none";
    }
} 
```

# sql - SQL Server 2008 中的索引视图

> ID：10652461
> 
> 赞同：4
> 
> 时间：2012-05-18T12:14:52.217
> 
> 标签：sql, sql-server-2008, indexing

我有一个包含几亿行数据的表。有一个字段称为`EventId`整数字段。

我有许多不同的视图，它们只会返回具有特定 EventId 的数据

如果我运行查询

```
SELECT TOP 1000 * FROM vw_MyView 
```

返回行需要 5 分钟。我需要向什么添加索引？当前在主表上有索引用于主键（clustered on `LogId`）和 non-clustered on `EventId`，因为每个视图的 where 子句中都使用了该索引。

我知道可以索引视图 - 我应该在视图中索引哪些字段？我应该只运行 DB Engine Tuning Wizard 并查看它的内容吗？

**更新以下反馈**

我的包含所有数据的主表符合以下模式

```
LogId (int) PK
EventId (int)
Param1 varchar(255)
Param2 varchar(255)
..
..
..
Param24 varchar(255) 
```

每种事件类型都有不同的参数，因此主表中的通用字段名称。

我对每种类型的事件都有一个视图，其中主表中的 ParamX 字段通过视图获得了正确的字段名称。

因此，一个事件的视图将类似于

```
SELECT LogId, Param1 AS Name, Param2 AS Address1, Param3 AS Address2
WHERE EventId = 10 
```

我试过查询

```
SELECT TOP 1000 LogId from vw_MyView 
```

而且效果很快。其他领域正在减慢速度，我认为这是由于索引不佳？

**更新 2 - 更多信息**

以前，每个事件的数据都存储在每个事件的表中。这意味着添加新事件需要为每个事件创建一个新表。

我将数据批量导入临时表，然后将其移至我的主表中。批量导入使其速度更快，但我担心拥有如此大的主表可能意味着查询它变得如此缓慢以至于无法使用。

数百万行数据超过 10 年左右，因此我可能会将前 8 年的数据移至另一个数据库以进行存档，以便仅保留最近的 2 年。

所以问题是我是继续使用不需要维护但可能需要大量索引的主表方法，还是回到每个事件都有一个表的原始方法？

感谢各位大侠的反馈，真的很感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T12:29:51.740

通常，视图包含的列多于满足许多不同查询所需的列，在这些查询中，直接针对相关表和列可能会更好地受益。（[我在 2010 年写过关于这个的博客。](https://sqlblog.org/2010/03/07/bad-habits-to-kick-creating-the-uber-view)）在你的情况下，我认为索引视图不会对你有帮助......你正在编写的查询只会扫描该索引而不是基表上的聚集索引（和由于您没有进行聚合，因此行数将相同，但页面可能更少）。我认为更好的解决方案是优化基础表上的索引。

我可能建议的索引应该极大地帮助您在视图中显示的事件 10 的查询：

```
CREATE NONCLUSTERED INDEX Index_ForViewOnEvent10 
ON dbo.MasterTable(LogID)
INCLUDE(Param1, Param2, Param3)
WHERE EventID = 10; 
```

由于该索引涵盖了查询，并且由于过滤器大大减少了必须扫描的行数，因此这应该是一个显着的改进。

您可以尝试使用/不使用 INCLUDE 部分。从聚集索引中提取它们可能足够有效。但我认为以上将是最好的选择。

现在，不要在这里胡说八道——正如我在下面解释的那样，你并不总是想在一个表上抛出 100 个索引来完美地满足 100 个不同的查询——在满足查询和不让你的写入之间找到平衡成糖浆。

* * *

我将分享一些关于数据库引擎优化顾问 (DTA) 的内容。

这个巫师不是魔法。运行它并查看它所说的内容并没有什么坏处，但您不应该只接受它的所有建议并实施它们。使用此工具时，我建议几件事：

*   确保以*完整*的工作量呈现它。如果您向它提供一个查询并告诉它根据使该查询执行得更好的因素来创建索引，那么它会在不考虑其他查询可能*不会*从此类索引中受益的情况下这样做，或者其他查询可能会从该索引中受益有这个或那个其他专栏。
*   非常注意 DTA 将提供的重复项。它可能提供两个或三个索引，它们具有相同的四个前导键，而尾随键或 INCLUDE 列中只有一个差异。它还喜欢鼓励大量使用 INCLUDE 列，您也需要注意这一点。
*   添加索引会增加 DML 执行的工作（插入/更新/删除），因此您还应该记住工作负载的这些部分。

[DBSophic](http://www.dbsophic.com/)拥有比索引调优向导更好的工具——它们考虑了整个工作负载并且不提供冗余索引。Qure Analyzer 是免费的，并提供 Qure Optimizer 中可用功能的子集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T12:20:27.847

我认为您将[Indexed Views](http://msdn.microsoft.com/en-us/library/dd171921%28v=sql.100%29.aspx)与[Views](http://msdn.microsoft.com/en-us/library/ms187956.aspx)混淆了。索引视图当然可以（必须）有索引，但这并不意味着您必须使用索引视图才能让 SQL Server 使用索引。如果它认为使用索引会更快，它将使用常规视图中基础表上存在的任何索引。

因此，首先检查您的视图的 SQL，并确定哪些索引可以帮助该查询更快地执行。如果您发布视图的 SQL，我们可能会提出一些想法。

此外，您的 select 语句不包含 ORDER BY 子句，因此它是一个非确定性查询。换句话说，即使数据没有改变，您在后续运行中也可能会得到不同的结果。

关于`EventId`列，您可以尝试为其添加索引，但这可能无济于事。这取决于该列中数据的基数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T13:45:45.513

您不应该在具有“数亿行数据”的表上创建索引视图。常规视图只是存储在数据库中的 SQL 语句，因此如果您运行 select * from `your_view`，sql server 只需更改`your_view`其选择。

如果要索引视图，则必须将数据持久化在数据库中，这意味着在数据库上制作索引列的物理副本。可以想象，如果您有这么多行，它将大大增加存储大小，特别是如果您将那个大表与其他表连接起来

# php - 显示正确的结果，但我想将它们限制为相同的值

> ID：10652467
> 
> 赞同：0
> 
> 时间：2012-05-18T12:15:21.657
> 
> 标签：php, mysql, collation

我有这个查询，它在动态表中显示我的“页面”，但是它显示了所有页面，我想限制“页面”仅在其“活动 ID”列与当前“活动”列匹配时显示，将有人有想法么。

这是显示数据的查询：

```
 $counter=1;               $userID=PageDB::getInstance()->get_user_id_by_name($_SESSION['user']);              $result=PageDB::getInstance()->get_pages_by_campaign_id($campaignID);
            $i=0;
                while ($row = mysqli_fetch_array($result)):
                 $style = "";
                    if($i%2==0)
    {
        $style = ' style="background-color: #EFEFEF"';
    }
    echo "<tr".$style.">";
                echo "<td>" . htmlentities($row['pid']) . "</td>";
                echo "<td>". htmlentities($row['id']) . "</td>";
                ?>
                <td>
                <form style="display:none;"></form>
                    <form name="editPage" action="editPage.php" method="GET">
                        <input type="hidden" name="pageID" value="<?php echo $pageID = $row['pid']; ?>" />
                        <input type="submit" name="editPage"  value="<?php echo "Page "  . $counter; ?>" style="padding-top:4px; padding-bottom:6px;background:none;border:none; cursor:pointer"/>
                    </form> 
    </td>           
                <?php
                $pageID = $row['pid'];  
                $counter++;
                $i++;

                echo "</tr>\n";
            endwhile;
            mysqli_free_result($result);              
?> 
```

这就是我查询数据库的方式。

```
public function get_pages_by_campaign_id($campaignID) {
    $campaignID = $this->real_escape_string($campaignID);
    return $this->query("SELECT pid,campaignid,id,campaign_name FROM pages,campaigns WHERE pages.campaignid = campaigns.id ORDER BY campaigns.id LIMIT 1,10");
    } 
```

正如我所说，它返回了正确的数据，但我只想显示以下数据：pages.campaignid =campaign.id [1] 或 pages.campaignid =campaigns.id [r] 等...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T12:23:28.287

您需要循环`if-else`内的其他条件。`while`该`if-else`语句将比较当前行是否等于campaigns.id

# php - mysql中的外键引用问题

> ID：10652468
> 
> 赞同：1
> 
> 时间：2012-05-18T12:15:22.433
> 
> 标签：php, mysql, database, zend-framework

我有一个名为 mail 的表，其中包含一个名为 deletedBy 的外键列，它通过 pk 引用 users 表。当我创建新邮件时，我想将此字段设置为 null，因为邮件未删除，但是当我这样做时，我收到外键约束失败错误。

我完全理解这个错误，但我该如何解决呢？

桌子：-

```
CREATE TABLE `mail` (
  `pk` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `from` int(11) unsigned NOT NULL,
  `to` int(11) unsigned NOT NULL,
  `subject` varchar(255) NOT NULL,
  `message` text NOT NULL,
  `dt` datetime NOT NULL,
  `read` enum('0','1') NOT NULL DEFAULT '0',
  `deletedby` int(11) unsigned DEFAULT '0',
  PRIMARY KEY (`pk`),
  KEY `from_mail__users_pk` (`from`),
  KEY `to_mail__users_pk` (`to`),
  KEY `deletedby_mail__users_pk` (`deletedby`),
  CONSTRAINT `deletedby_mail__users_pk` FOREIGN KEY (`deletedby`) REFERENCES `user` (`pk`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `from_mail__users_pk` FOREIGN KEY (`from`) REFERENCES `user` (`pk`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `to_mail__users_pk` FOREIGN KEY (`to`) REFERENCES `user` (`pk`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=8 DEFAULT CHARSET=utf8 COLLATE=utf8_bin 
```

错误信息：-

```
 ERROR 1452: Cannot add or update a child row: a foreign key constraint fails (`ajfit`.`mail`, CONSTRAINT `deletedby_mail__users_pk` FOREIGN KEY (`deletedby`) REFERENCES `user` (`pk`) ON DELETE NO ACTION ON UPDATE NO ACTION)
SQL Statement:
 INSERT INTO `ajfit`.`mail` (`from`, `to`, `subject`, `message`, `read`) VALUES (31, 30, 'test', 'test', '0') 
```

谢谢

安德鲁

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T12:18:13.547

因为您没有提供 的值`deletedby`，所以使用的`DEFAULT`值`0`。但是（可能）`user`表中没有 a`pk`为 0 的记录，因此外键约束（正确）失败。

正如您自己所说，您希望`deletedby`有一个`DEFAULT`值，`NULL`以便在提供替代值之前不检查外键约束：

```
ALTER TABLE mail MODIFY deletedby int(11) unsigned DEFAULT NULL; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T09:07:39.050

表中的deletedby列`mail`应包含表中id列的值，因为表的id列上`user`有外键`user`。

由于外键约束接受 NULL 值，一种方法是在`mail`表中插入新行时为 deletedby 列设置 NULL 值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T12:19:24.170

用户表中是否有附加代码 0 的条目？因为在我看来，该表试图找到条目 0 却没有运气。

# android - 单击时如何更改选项卡的颜色？

> ID：10652476
> 
> 赞同：-1
> 
> 时间：2012-05-18T12:16:12.783
> 
> 标签：android, android-animation, android-tabhost

```
 TabWidget tw = getTabWidget();

   for (int i = 0; i < tw.getChildCount(); i++) {
        View v = tw.getChildAt(i);

         v.setBackgroundColor(Color.parseColor("#666666"));
    }
    tw.getChildAt(0).setBackgroundColor(Color.parseColor("#B21206")); 
```

我的活动中有两个选项卡。此代码将第一个选项卡的颜色固定为“RED”，但不会使第二个选项卡在单击时更改为“RED”。应该对代码进行哪些更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T12:30:13.710

在您的 tabactivity 类中尝试此代码.. 它可能对您有帮助...

```
 for(int i = 0; i < getTabWidget().getChildCount(); i++)
    {
        if(getTabWidget().getChildAt(i).isSelected())
        {
            //selected tab
            getTabWidget().getChildAt(i).setBackgroundColor(Color.RED);
        }
        else
        {
            //un-selected tabs
            getTabWidget().getChildAt(i).setBackgroundColor(Color.GREEN);
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T12:18:47.220

为您的任务使用 xml bg 选择器，这是做您想做的更好的方式。

如果你想在代码中试试这个代码

在 settabColor(yourtabhost) 中传递您的标签主机；

```
public static void setTabColor(TabHost tabhost) {
    for(int i=0;i<tabhost.getTabWidget().getChildCount();i++)
    {
        tabhost.getTabWidget().getChildAt(i).setBackgroundColor(Color.parseColor("#FF0000")); //unselected
    }
    tabhost.getTabWidget().getChildAt(tabhost.getCurrentTab()).setBackgroundColor(Color.parseColor("#0000FF")); // selected
} 
```

# c++ - 如何修复堆错误？

> ID：10652481
> 
> 赞同：1
> 
> 时间：2012-05-18T12:16:26.683
> 
> 标签：c++, c, visual-studio-2010, visual-c++

我在 C++ 中运行一个迭代过程，在第一次迭代按预期完成后，从第二个开始出现以下错误：

> 00000000212005D0 处的堆块在 0000000021200674 处修改，超过 94 Windows 的请求大小已触发 myProject.exe 中的断点。
> 
> 这可能是由于堆损坏，这表明 myProject.exe 或其已加载的任何 DLL 中存在错误。
> 
> 这也可能是由于用户在 myProject.exe 获得焦点时按 F12。
> 
> 输出窗口可能有更多诊断信息。

在显示此错误时，visual-c++ 打开 dbgheap.c，突出显示给出的部分：

```
extern "C" _CRTIMP int __cdecl _CrtIsValidHeapPointer(
        const void * pUserData
        )
{
        if (!pUserData)
            return FALSE;

        if (!_CrtIsValidPointer(pHdr(pUserData), sizeof(_CrtMemBlockHeader), FALSE))
            return FALSE;

        return HeapValidate( _crtheap, 0, pHdr(pUserData) );
} 
```

这个错误的原因可能是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T12:18:14.307

该部分是检查堆有效性的方法，它不是问题的根源。

您很可能正在处理**内存损坏**，这可能很难调试。您最好的选择是运行内存分析工具（例如 Purify），或者，如果代码库很小，则自己查看它，删除部分直到找到源代码。

当然，任何类型的未定义行为都可能导致这种情况。最常见的来源是：

*   忘记从定义返回类型的函数返回
*   多次删除对象
*   通过指向没有`virtual`析构函数的基类的指针删除派生对象
*   强制转换的无效使用（C 风格的强制转换`const_cast`，, `reinterpret_cast`）
*   访问您不拥有的内存（写入超出分配内存的范围）
*   等（*随时在此处添加*）

不过，我会从全面重建开始……你永远不知道！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T12:39:59.837

我想补充一点，如果您无法访问 purify，那么 valgrind 也是一个很好的工具，并且很可能会捕获此错误。

此外，使用 valgrind，您不需要再次构建您的项目（就像 purify 的情况一样）。您可以简单地使用 valgrind 运行调试可执行文件，而且 valgrind 也很快。

# visual-studio-2010 - VS2010 解决方案的更改不会提交到 GitHub 存储库

> ID：10652483
> 
> 赞同：1
> 
> 时间：2012-05-18T12:16:40.530
> 
> 标签：visual-studio-2010, git, github

自从我开始使用 Git 以来，我一直很难使用它。这是我想要克服的学习曲线。我已经阅读了手册和常见问题解答以及其他几个网站，但我仍然没有看到我期望的行为，并且希望将 VS2010 与 GiHub 一起使用的人不能给我我需要的魔法指针。

这些是我创建新项目/存储库的步骤。

**1\. 在 GitHub 上创建新存储库**-*为其命名并创建它*

**2.在VS2010中创建我的解决方案**

**3\. 第一次提交**

这些是我第一次提交解决方案的步骤：（我安装了 git 和 git 扩展，并且创建了一个 VS 工具栏，允许我从 VS2010 中弹出 git bash）

我单击在工具栏上创建的 Git 控制台按钮，我得到 bash 窗口，当前目录是我的解决方案的根目录

然后我执行这些命令将我的解决方案提交到 GitHub 站点上的 GitHub 存储库

**1\. git init** -*工作正常*

**2\. 混帐添加。**-*工作正常*

**3\. git commit -m 'First commit'** -*工作正常*

**3\. git remote add origin git@github.com:alfalfastrange/RepositoryName.git** -*工作正常*

**4\. git push -u origin master** -*然后我收到一条拒绝消息和一个关于快进等的错误，等等......*

**5\. git pull origin master** -*工作正常*

**6\. git push -u origin master** -*提交工作，然后我可以在 GitHub 上在线查看整个解决方案*

现在我遇到的问题是从这里开始......如果我对我的解决方案进行更改，我无法将它们放入 GitHub。例如，我删除文件、添加文件和添加代码等，然后我准备好提交所有这些更改

我已经尝试了这些事件序列并且没有运气

**1\. 混帐添加。**

**2\. git commit -m 'Second commit'** -*将更改添加到本地存储库*

**3\. git push -u origin master** -*收到消息说一切都是最新的，我检查了在线存储库，没有进行任何更改*

**4\. git pull origin master** -*我告诉一切已经是最新的*

**5\. git push -u origin master** -*收到消息说一切都是最新的，我检查了在线存储库，没有进行任何更改*

**6\. git push origin master** -*收到消息说一切都是最新的，我检查了在线存储库，没有进行任何更改*

从那时起，似乎所有提交所做的只是将更改提交到本地存储库，而我尝试过的所有命令都不会将更改推送到 GitHub 存储库。

所以在这一点上，我有点恼火，这并不容易。使用我的 Ankh SVN 和 Codesion 设置，我所要做的就是单击 Commit 或 Update 以推送更改或从在线存储库中提取最新信息。

我错过了什么？因为我希望能够成功地使用 Git，而不必担心我所有的个人项目。提前致谢！

**更新**

运行 git branch -avv 命令后，结果如下

![在此处输入图像描述](../Images/738d3dd9cbdd237e7854edb02a0296c8.png)

**更新 2**

运行步骤 1 - 6 并将 -f 添加到步骤 3 后

![在此处输入图像描述](../Images/5c489ac91c77c25f20634318bfdc6009.png)

**更新 3**

从答案运行命令序列后

![在此处输入图像描述](../Images/27d1ca11f215722737f30d82ab68f8b3.png)

这对我来说没有任何意义，因为我们已经做了所有这些......我只使用 Git Bash

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T12:58:26.803

您的第一条错误消息肯定是：

```
$ git push origin master
To ../remote/
 ! [rejected]        master -> master (non-fast forward)
error: failed to push some refs to '../remote/' 
```

这是正常的，考虑到您有两个平行的历史：GitHub（空仓库）和本地仓库中的一个。另请参阅“[我无法在 git 上推送？](https://stackoverflow.com/questions/3598355/i-am-not-able-to-push-on-git) ”
一旦你`git pull`，你将 GitHub 的初始历史合并到本地 repo 中，并成功进行第一次推送。

现在如果下一个 git push （不需要再添加`-u`一次）报告一切都是最新的，请检查您是否处于[分离`HEAD`模式](https://stackoverflow.com/questions/999907/git-push-says-everything-up-to-date-even-though-i-have-local-changes)。
这意味着 git branch 将不显示当前分支（`*`前面带有“ ”）。
其他原因：“ [git 说一切都是最新的](https://stackoverflow.com/questions/7372106/git-says-everything-up-to-date)”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T03:40:58.147

这样人们就不必滚动浏览评论：

运行`git fetch origin`以将远程分支提取到本地存储库中。（您也可以将此步骤滚动到`git remote add`带有`-f`标志的步骤中。）完成后，您可以使用本地主机跟踪远程主机。

一切就绪后，最简单的工作流程如下所示：

```
# assuming an up-to-date branch and a dirty working copy
git add .   # Add changes under the current directory to the index
git commit -m "Commit message"
git push origin 
```

`add`您也可以将and滚动`commit`到一个步骤中：

```
git commit -am "Commit message" # Commit changes in tracked files to your local repo 
```

请记住，我不知道 Gitextensions 是如何工作的。它可能为此有自己的插件。

# actionscript-3 - 使用 as3 将本地 mpg 文件发布到 red5 服务器

> ID：10652489
> 
> 赞同：0
> 
> 时间：2012-05-18T12:17:10.270
> 
> 标签：actionscript-3, red5, publishing, flash-cs3, mpeg

我的系统中有一个 mpg 文件，我想将它发布到 Red5 服务器，以便我可以通过我的网络广播它。经过一些研究工作后，我无法找到解决方案，你们中有人尝试过吗这个。我的意思是从本地系统发布文件到red5服务器。谁能指导我正确的方向。我正在使用Flash CS3和AS3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T06:42:39.853

您可以使用 FileReference.browse() 来获取对话框/系统弹出窗口以选择文件。你监听它上面的 SELECT 事件（这意味着用户选择了一个文件），然后你可以调用它的上传。您将需要某种服务器端脚本来接受该文件并将其保存到 Red5 服务器指向的位置以提供其文件（PHP、Java，无论应该做什么）。

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/FileReference.html#browse](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/FileReference.html#browse) ()

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/FileReference.html#upload](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/FileReference.html#upload) ()

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T19:05:37.827

@Vipin您最好的选择是使用[ffmpeg](http://ffmpeg.org/)之类的东西，以简化编程、质量和转码速度，如果您想要一个不错的 API，[xuggler 之](http://www.xuggle.com/xuggler/)类的东西看起来是个不错的方法，虽然我从未使用过它，但我已经从人们所做的事情中读到很多关于它的好东西，就像你正在尝试做的事情一样。我最近成功地使用 ffmpeg 完成了与您想要从 Ruby 后端执行的操作类似的操作，并且没有理由相信您在 Java 中执行此操作会变得不那么容易或可用。要使用`runtime.exec()`执行ffmpeg，试试[这个。](http://old.nabble.com/java-call-ffmpeg-ts15886850.html) 如果您执行其中任何一个，则不应有任何理由不能选择 FLV，因为我确信 ffmpeg 会执行此操作。这是一个有点旧的帖子，但是[这篇文章](http://www.johnrockefeller.net/using-ffmpeg-to-convert-mpg-or-mov-to-flv/)介绍了如何设置对 ffmpeg 的命令行 exec 调用，以便像你想要的那样去 mpg -> flv，不过我想如果你使用 xuggler，它会更多地内置在 API 中。涵盖这两种方法的另一个 SO 答案在[这里。](https://stackoverflow.com/a/1281454/586726)

# java - 没有适用于桌面 Java 的 Adob e AIR 本机扩展的替代方案

> ID：10652490
> 
> 赞同：1
> 
> 时间：2012-05-18T12:17:10.737
> 
> 标签：java, air, flex4

**背景**

我们有一个由 Java 后端支持的 AIR 客户端应用程序。

在我们的应用程序中，我们有一个复杂的数据网格，可以一次捕获大量数据。每个单独的数据单元格都可能触发繁重的计算/处理。这将重复发生，直到用户满意并保存最终版本。

某些处理的性质要求其中很大一部分由 Java 完成。添加大量用户，我们有一个明确的服务器性能问题。

我们需要将大部分处理转移到客户端。

**问题**

现在，当用户提交最后一组输入时，服务器将在持久化它们之前执行最后一次计算。这意味着我们需要一组 Java 类来执行所有需要的计算/处理。

由于我们已经在编写 Java 类，理想的做法是在客户端将它们作为库重用，而不是在 Flex 中重新编写它们并同时维护它们。

我们认为 Adob​​e AIR 的本机扩展将是完美的 - 直到我们发现 Windows 上只支持 DLL。由于我们的交付机制，我们也不能使用 NativeProcess（Java 库没有 .exe）。

**问题**

到目前为止，我们已经尝试过 Merapi，但考虑到它已经有一段时间没有使用了，我们担心未来的兼容性。我们想知道默拉皮是否有其他替代品？

或者更好的是，尝试在 AIR 应用程序和 Java 库之间创建通信桥的问题的任何其他潜在方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T05:41:47.677

你有一些选择，取决于你愿意做多少工作。

**如果您愿意考虑 FLEX 以外的其他东西...**

您可以选择 Applet，因为：

它在浏览器中运行，可以与您的应用程序进行通信，并使用客户端上的浏览器资源来执行计算。

或者，这是我最喜欢的，您可以编写一个 Java Webstart 部署的桌面应用程序。这将完全在客户端上运行，它不会消耗服务器上的资源，可以通过 RMI 或简单的消息传递与服务器通信，尽可能接近本地桌面应用程序并自行更新，因此不会出现部署问题。

第三个选项比较棘手，但理论上，您可以使用 GWT 之类的东西用 Java 编写应用程序，然后通过 GWT 将其转换为 Javascript 应用程序。它在浏览器中运行，但它有严重的限制，在我看来，GWT Javascript 几乎不可读且难以定制。

**替代方案：**

将应用程序编写为标准 Web 应用程序并使用 Javascript 在客户端执行计算。问题是您将无法重用您的 Java 类。

**结论**（应阅读，最谦虚的意见）

总而言之，通过 Webstart 部署的 Java 桌面应用程序看起来是最好的解决方案。它将允许您重用您的计算代码，它还将充分利用客户端资源。

# tfs - TFS 2010 并通过 VPN 隧道跨两个域连接

> ID：10652491
> 
> 赞同：2
> 
> 时间：2012-05-18T12:17:11.573
> 
> 标签：tfs

当我让用户从远程位置连接到 TFS 2010 时，我收到了可怕的 TF30063 错误。确切的错误是

> TF30063: 您无权访问 Microsoft-IIS/7.5

设置如下：

DomainA 和 LocationA 中的 TFS DomainB 和 LocationB 中的 UserA 两个位置之间的 VPN 隧道 UserA 在 DomainA 和 DomainB 中有一个帐户，DomainB 凭据存储在 TFS 服务器的 Windows 凭据管理器中，因此当 Visual Studio 启动时它会自动连接到 TFS 而不会提示证书。

问题：

UserA可以浏览源代码没有问题。但是然后在有大量子文件夹或代码的文件夹上运行获取最新版本，下载大约 1 分钟后出现上述错误，并且用户 A 不再能够浏览源代码文件夹或运行任何获取最新版本. 用户需要重新启动 VS 才能再次浏览代码。

除了在两个域之间设置信任之外，我们已经用尽互联网的解决方案并尝试了所有解决方案。以前有人遇到过同样的问题吗？快要拔掉我剩下的小头发了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-28T21:16:56.577

也许有点晚了，但也许这会有所帮助：

[通过 UAG 发布 Visual Studio 的 Team Foundation 服务器](http://myitforum.com/cs2/blogs/forefrontsecurity/archive/2010/01/05/publishing-visual-studio--team-foundation-server-through-uag.aspx)

# arrays - Bash Autocompletion - 如何将此数组传递给 compgen 而不会折叠大量空白？

> ID：10652492
> 
> 赞同：16
> 
> 时间：2012-05-18T12:17:14.370
> 
> 标签：arrays, bash, bash-completion

以下 bash 补全将一组可能的单词（即补全）传递给 compgen。

```
basenames=("foo" "fu bar" "baz");

COMPREPLY=($(compgen -W "${basenames[*]}" -- "${COMP_WORDS[COMP_CWORD]}")) 
```

问题是数组元素中的空格没有被保留，也就是说，由于分词，“foo bar”被视为元素。有没有办法保留空白，以便显示 3 个元素，而不是 4 个？

**编辑**

`basenames`包含文件名，即几乎每个字符（除了 / 和 \0）都是允许的。

**编辑 2**

-W 标志需要一个单词，例如`foo bar foobar`. 将多个元素传递给它（这是`${basenames[@]}`会做的）将不起作用。

**编辑 3**

*更改了示例 basenames 数组（因此 the`foo`和`foo`from`foo bar`不会被折叠）。*

使用换行符分隔单词有效：

```
local IFS=$'\n'
COMPREPLY=($(compgen -W "$(printf "%s\n" "${basenames[@]}")" --  ${COMP_WORDS[COMP_CWORD]}")) 
```

使用`\0`不会：

```
local IFS=$'\0'
COMPREPLY=($(compgen -W "$(printf "%s\0" "${basenames[@]}")" --  ${COMP_WORDS[COMP_CWORD]}")) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-14T09:26:27.553

为什么要打扰`compgen`？只需手动将它们添加到 COMPREPLY。以下将完成匹配的文件名`/some/path`，安全地处理文件名。

```
some_completion_function() {
    local files=("/some/path/$2"*)
    [[ -e ${files[0]} ]] && COMPREPLY=( "${files[@]##*/}" )
} 
```

不可能`compgen`安全地处理文件名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T18:47:28.583

也许这可能会：

```
COMPREPLY=($(compgen -W "$(printf "%q " "${basenames[*]}")" -- "${COMP_WORDS[COMP_CWORD]}")) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-06T03:16:04.523

[在那里](https://stackoverflow.com/questions/1146098/properly-handling-spaces-and-quotes-in-bash-completion)阅读更好的解决方案

使用`readarray`和`printf`

```
readarray -t words < /etc/passwd
compgen -W  "$(printf "'%s' " "${words[@]}")" -- "man"
# OUTPUTS: man:x:6:12:man:/var/cache/man:/usr/sbin/nologin 
```

*   **readarray：**避免处理 IFS
*   **printf:** Escape: 或者`@Q`bash 4.4后的参数转换（20170`man bash`搜索 `parameter@operator`

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-05-18T17:32:18.677

您几乎应该总是使用 at 符号而不是星号来为数组下标。

```
COMPREPLY=($(compgen -W "${basenames[@]}" -- "${COMP_WORDS[COMP_CWORD]}")) 
```

来自[`man bash`](http://tiswww.case.edu/php/chet/bash/bash.html#lbAX)（或参见[Bash 参考手册](http://tiswww.case.edu/php/chet/bash/bashref.html#SEC86)）：

> 如果下标是`@`或`*`，则单词扩展为 name 的所有成员。只有当单词出现在双引号中时，这些下标才会有所不同。如果单词是双引号，则`${name[*]}`扩展为单个单词，其中每个数组成员的值由 IFS 特殊变量的第一个字符分隔，并将`${name[@]}`name 的每个元素扩展为单独的单词。

换句话说，at 符号形式“扁平化”了数组。星号形式保留它。

# asp.net-mvc - ASP.NET MVC 4 EF 更新操作

> ID：10652502
> 
> 赞同：1
> 
> 时间：2012-05-18T12:18:00.313
> 
> 标签：asp.net-mvc, entity-framework

假设我有一个包含 30 个字段的表，我想显示（Edit.cshtml）2 个字段（GET）和更新（public ActionResutl Edit（items，items））只有 4 个字段

Edit.cshtml：RegNo = 1002 | 值 = 50

项目控制器：

```
 public ActionResult Edit(items items)
        {
           if (ModelState.IsValid)
           {
              db.items.Attach(items);
              items.DateAdd = DateTime.Now;
              items.Status = 2;
              db.SaveChanges();
           }
        } 
```

**问：**如何仅更新 30 的这 4 个字段？

我是否必须添加 26 个 Html.HiddenFor() 助手？|| 创建一个包含 4 个字段的小类并尝试更新它（*TryUpdateModel、ApplyCurrentValues*）？

编辑：我只更新一行。

SQL：

```
UPDATE dbo.items SET Status = 2, RegNo = items.RegNo WHERE id = items.id -- i don't care about the other fields 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T12:29:52.313

这是我在控制器的 actionresult 方法中所做的

```
[HttpPost]
public ActionResult Edit(Items items)
{
db.Items.Single(ItemID => ItemID.ID == items.ID).<First Column to update> = <the value needed>;
db.Items.Single(ItemID => ItemID.ID == items.ID).<Second Column to update> = <the value needed>;
db.Items.Single(ItemID => ItemID.ID == items.ID).<Third Column to update> = <the value needed>;
db.Items.Single(ItemID => ItemID.ID == items.ID).<Fourth Column to update> = <the value needed>;
db.SaveChanges();
return RedirectToAction("index");
} 
```

所以让我们继续举例

```
[HttpPost]
public ActionResult Edit(Items items)
{
db.Items.Single(ItemID => ItemID.ID == items.ID).Status = 2;
db.Items.Single(ItemID => ItemID.ID == items.ID).Barcode = Abc12345;
db.Items.Single(ItemID => ItemID.ID == items.ID).RegNo = 1002;
db.Items.Single(ItemID => ItemID.ID == items.ID).Manufacturer = Tomato Soup Inc;
db.SaveChanges();
return RedirectToAction("index");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T12:29:17.267

您需要包含所有字段或在回帖中查找对象，并且只更改感兴趣的字段。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-09T06:11:05.693

MVC4 EF 中只有单个字段更新，并且此代码正确工作。

```
db.Booking_transactions.Single(b => b.BookingId == booking_transaction.BookingId ).booking_status = 2; 
```

# c# - 在 c# 中使用 ewp api 获取分发列表列表

> ID：10652507
> 
> 赞同：0
> 
> 时间：2012-05-18T12:18:15.380
> 
> 标签：c#

我想使用 c# 中的 ewp api 获取所有分发列表和这些列表的成员。我已连接到 Outlook 服务器，我可以使用 c# 获取我的日历信息。但我找不到获取分发列表的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T10:58:56.157

最后我发现我们无法获取分发列表。因为分发列表不存储在交换服务器中。它们是一个单独的概念，必须使用其他方法来获取列表。

# php - 自动登录前一个用户的注册表单

> ID：10652512
> 
> 赞同：0
> 
> 时间：2012-05-18T12:18:33.547
> 
> 标签：php, sql

我创建了一个注册表单，将用户放入数据库并在注册后直接自动登录（或者它假设）

问题是当他们注册一个帐户时，自动登录会重定向以前注册的用户。

我认为这是因为以前的用户已经登录了 id.. 但是如果没有人登录，我会收到一条我自己的错误消息，上面写着“用户不存在”

不能真正弄清楚什么问题。

有任何想法吗 ？

这是我的一些代码。

```
if(empty($errors)){
                add_user($_POST['username'], $_POST['password']);
                $_SESSION['uid'] = fetch_user_id($_SESSION['username']);
                $_SESSION['username'] = htmlentities($_POST['username']);

                header("Location: profile.php?uid=" . $_SESSION['uid']);

                die(); 
```

我的功能

```
//fetches profile information for the given user
function fetch_user_info($uid){
    $uid = (int)$uid;

        $sql = "SELECT
        `user_name` AS `username`,
        `user_email` AS `email`
    FROM `users`
    WHERE `user_id` = {$uid} ";

    $result = mysql_query($sql);

    return mysql_fetch_assoc($result);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T12:21:15.417

你可能的意思是：

```
$_SESSION['uid'] = fetch_user_id($_POST['username']); 
```

代替：

```
$_SESSION['uid'] = fetch_user_id($_SESSION['username']); 
```

# javascript - HTML5 动态创建画布

> ID：10652513
> 
> 赞同：84
> 
> 时间：2012-05-18T12:18:33.840
> 
> 标签：javascript, html, canvas

您好，我有一个关于使用 javascript 动态创建画布的问题。

我创建一个这样的画布：

```
var canvas = document.createElement('canvas');
canvas.id     = "CursorLayer";
canvas.width  = 1224;
canvas.height = 768;
canvas.style.zIndex   = 8;
canvas.style.position = "absolute";
canvas.style.border   = "1px solid"; 
```

但是当我尝试找到它时，我得到了一个`null`值：

```
cursorLayer = document.getElementById("CursorLayer"); 
```

我做错了吗？有没有更好的方法来使用 JavaScript 创建画布？

* * *

## 回答 #1

> 赞同：136
> 
> 时间：2012-05-18T12:22:19.053

问题是您没有在文档正文中插入画布元素。

只需执行以下操作：

```
document.body.appendChild(canvas); 
```

例子：

```
var canvas = document.createElement('canvas');

canvas.id = "CursorLayer";
canvas.width = 1224;
canvas.height = 768;
canvas.style.zIndex = 8;
canvas.style.position = "absolute";
canvas.style.border = "1px solid";

var body = document.getElementsByTagName("body")[0];
body.appendChild(canvas);

cursorLayer = document.getElementById("CursorLayer");

console.log(cursorLayer);

// below is optional

var ctx = canvas.getContext("2d");
ctx.fillStyle = "rgba(255, 0, 0, 0.2)";
ctx.fillRect(100, 100, 200, 200);
ctx.fillStyle = "rgba(0, 255, 0, 0.2)";
ctx.fillRect(150, 150, 200, 200);
ctx.fillStyle = "rgba(0, 0, 255, 0.2)";
ctx.fillRect(200, 50, 200, 200);
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-17T00:26:47.117

通过jQuery：

```
$('<canvas/>', { id: 'mycanvas', height: 500, width: 200}); 
```

[http://jsfiddle.net/8DEsJ/736/](http://jsfiddle.net/8DEsJ/736/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-02T16:07:55.737

发生这种情况是因为您在 DOM 加载之前调用它。首先，创建元素并为其添加属性，然后在 DOM 加载后调用它。在您的情况下，它应该如下所示：

```
var canvas = document.createElement('canvas');
canvas.id     = "CursorLayer";
canvas.width  = 1224;
canvas.height = 768;
canvas.style.zIndex   = 8;
canvas.style.position = "absolute";
canvas.style.border   = "1px solid";
window.onload = function() {
    document.getElementById("CursorLayer");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-29T21:41:32.150

# 选择

使用在现代浏览器`.innerHTML=`中[相当快的元素](https://stackoverflow.com/a/51140250/860099)

```
document.body.innerHTML = "<canvas width=500 height=150 id='CursorLayer'>";

// TEST

var ctx = CursorLayer.getContext("2d");
ctx.fillStyle = "red";
ctx.fillRect(100, 100, 50, 50);
```

```
canvas { border: 1px solid black }
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-21T06:54:42.140

```
 <html>
 <head></head>
 <body>
 <canvas id="canvas" width="300" height="300"></canvas>
 <script>
  var sun = new Image();
  var moon = new Image();
  var earth = new Image();
  function init() {
  sun.src = 'https://mdn.mozillademos.org/files/1456/Canvas_sun.png';
  moon.src = 'https://mdn.mozillademos.org/files/1443/Canvas_moon.png';
  earth.src = 'https://mdn.mozillademos.org/files/1429/Canvas_earth.png';
  window.requestAnimationFrame(draw);
  }

  function draw() {
  var ctx = document.getElementById('canvas').getContext('2d');

  ctx.globalCompositeOperation = 'destination-over';
  ctx.clearRect(0, 0, 300, 300);

  ctx.fillStyle = 'rgba(0, 0, 0, 0.4)';
  ctx.strokeStyle = 'rgba(0, 153, 255, 0.4)';
  ctx.save();
  ctx.translate(150, 150);

  // Earth
  var time = new Date();
  ctx.rotate(((2 * Math.PI) / 60) * time.getSeconds() + ((2 * Math.PI) / 60000) * 
  time.getMilliseconds());
  ctx.translate(105, 0);
  ctx.fillRect(10, -19, 55, 31); 
  ctx.drawImage(earth, -12, -12);

   // Moon
  ctx.save();
  ctx.rotate(((2 * Math.PI) / 6) * time.getSeconds() + ((2 * Math.PI) / 6000) * 
  time.getMilliseconds());
  ctx.translate(0, 28.5);
  ctx.drawImage(moon, -3.5, -3.5);
  ctx.restore();

  ctx.restore();

   ctx.beginPath();
   ctx.arc(150, 150, 105, 0, Math.PI * 2, false);
   ctx.stroke();

   ctx.drawImage(sun, 0, 0, 300, 300);

   window.requestAnimationFrame(draw);
    }

   init();
   </script>
   </body>
   </html> 
```

# bash - 如何在一行 bash 中进行 hg 更新或克隆？

> ID：10652515
> 
> 赞同：3
> 
> 时间：2012-05-18T12:18:35.853
> 
> 标签：bash, mercurial

我正在寻找一个选项来对存储库进行 hg 更新或在它不存在时克隆它。因此，仅当出现问题（克隆或更新）时，该命令才会失败。

这必须工作`bash`，最好是如果你`set -e`已经配置好了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T13:23:22.097

bash 中的析取运算符`||`, 可以做到这一点：尝试第一个命令，如果失败则尝试第二个命令，如果*失败*则返回错误代码。具体到这个问题，

```
hg update || hg clone <source> 
```

会尝试更新；如果失败，它会尝试克隆。如果克隆失败，则整行退出并显示克隆的错误代码。

> 当命令成功时，我不希望在输出中看到任何错误。

为什么命令成功时会出现错误？

`>/dev/null`您可以通过;杀死输出 `2>/dev/null`您可以通过;杀死错误 无论是单独在每个组件上，还是通过将整行括在括号中并将重定向放在后面。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T16:24:22.413

```
cd <directory> && hg update || hg clone <source> 
```

如果 cd 由于目录不存在而失败，则 hg 克隆从正确的目录级别运行。

# asp.net - Asp.Net 应用程序性能

> ID：10652517
> 
> 赞同：1
> 
> 时间：2012-05-18T12:18:49.580
> 
> 标签：asp.net, .net, asp.net-mvc, asp.net-mvc-3, asp.net-4.0

我看到 .Net 中的 Web 开发世界现在分为 Asp.Net Webforms 和 MVC，并且有第 3 类更喜欢在同一个应用程序中使用两者。

我的问题：ViewState 通常被视为邪恶，是大多数应用程序的主要性能瓶颈。但是，如果我们正确使用它，那么我根本看不到任何问题。关于 Asp.Net MVC 3.0/4.0 beta 的讨论太多了，而且它没有 ViewState。

但是我担心的是，Asp.Net MVC 如何帮助提高性能，因为在我看来，我们将控件绑定在

```
if (!IsPostback) {} 
```

在 Asp.Net MVC 中，我们每次都绑定控件，并且每次发布表单时都可能发出数据库请求。Asp.Net Winforms 在这方面不占上风吗？能否保证 Asp.Net MVC 在所有情况下都表现得更好？

**编辑：**我不想引发任何争议，而且我只是在谈论 Asp.Net 代码，而不是关于 Javascript 缩小、CSS 缩小和所有其他技巧之后的性能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T12:25:40.933

我不能说 MVC 的优势在于性能，尽管我认为它可能更快。它的优点是不处理控件的类似 winforms 的生命周期。单个页面上的内容越多，开发并不会变得越复杂，在控件中，如果操作不当，它们的生命周期事件经常会相互影响。

关于性能，MVC 的生命周期是静态的。发生了一些事件，但这并没有太大变化。性能问题存在于您的操作方法中。使用 web 表单，每次回发时都会发生多个事件和控件重新创建，通常即使控件未使用或不可见。Web 表单中的浪费要多得多，这使得 MVC 相比之下更精简，并且可以提供更好的性能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T12:30:20.410

mvc（无论是 MS 还是任何其他框架）更符合 web 的无状态性质和概念。

webforms 旨在使 Web 开发的行为更像一个有状态的桌面客户端。这就是页面事件、回发和视图状态存在的原因。

我已经看到了 50MB 的视图状态。这肯定会损害性能。使用 mvc 框架，您可以相当快地减小页面大小。然而，mvc 的优点是 1\. 它的简单性（与 webforms 页面生命周期相比）和 2\. 它的可扩展性。

如果您不喜欢控制器工厂、验证或视图引擎的默认实现，您可以在 mvc 中将其换掉。使用您无法使用的网络表单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T16:15:59.497

这里有所有优秀的答案，但我也会投入 2 美分。

当您使用 绑定控件时`if (!IsPostBack)`，您正在将加密的视图状态字段写入 Web 表单页面。在下一个请求期间，所有这些状态都被发送到您的服务器并被解密/反序列化。如果您在页面上有一个 GridView，它的所有行都将处于视图状态，因此您无需再次发出 db 请求来再次对其进行数据绑定。

从这个意义上说，它*可以使**您的服务器上的*性能更好。但是，正如这里的其他人所说，您将所有视图状态发送到服务器会受到网络冲击。此外，您需要将状态向下推。听起来您故意保持视图状态轻，以克服潜在的视图状态滥用并使 Web 表单性能更好。这绝对是一个好习惯，因为视图状态经常被滥用甚至被忽略。

考虑将分页的 GridView 下推到客户端的示例。如果您的 GV 包含 15 行，您可能会通过将其全部推送到客户端、在返回的途中反序列化它并且在第一次加载后不访问数据库来获得更好的性能。但是，当您的 GV 包含 1500 行时，如果您不在视图状态下发送它，最终用户可能会看到更好的性能，而是在每个分页请求期间点击数据库。（但是，一旦他们从 GV 链接到详细信息页面，然后单击“返回”按钮，他们就会被要求重新发布他们的数据——这总是很烦人，不管有多少行）。

最终，当您在提供和使用 Web 表单页面的机器上进行开发时，性能可能看起来更好。但是根据您的视图状态的大小，通过网络访问内容的人可能看不到您的速度。[这完全取决于您的视图状态有多胖](https://stackoverflow.com/a/10652699/304832)。

我认为很多 MVC 爱好者喜欢它的原因之一是因为他们[只需要向服务器发送执行特定操作所需的最小请求](https://stackoverflow.com/a/10652628/304832)。我们可以拆分表单并仅将部分或块发送到不同的操作，而不是反序列化整个表单，而不是使用 1 个单一的表单来提交页面上所有 Web 控件的所有数据和状态。

As others have said here, the short answer to your question is NO, MVC will not always be faster or perform better than webforms. There is no black and white. In many cases it can and does, but again as others have said, [some apps are better suited for webforms](https://stackoverflow.com/a/10652589/304832). Also, is performance your only concern? MVC does have black & white advantages over webforms in other areas, even if performance may always "depend".

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T12:23:41.653

我个人认为 MVC 更适合需要显示较轻内容的网站。但是，如果您需要为日间交易者构建网格，那么 Web 表单会占上风。

ASP.net MVC 不像 asp.net web 表单那样绑定控件。

您需要使用 JQuery 来执行此操作。Jquery 具有出色的性能。

[http://www.codeproject.com/Articles/305308/MVC-Techniques-with-JQuery-JSON-Knockout-and-Cshar](http://www.codeproject.com/Articles/305308/MVC-Techniques-with-JQuery-JSON-Knockout-and-Cshar)

同样重要的是要提到 MVC\jquery 需要更高级别的专业知识。因此，在成本方面，您必须注意底线。成本通常被程序员忽略，但它在任何项目中都扮演着重要的角色。

# string - 如何用数值表示句子？

> ID：10652518
> 
> 赞同：2
> 
> 时间：2012-05-18T12:18:50.067
> 
> 标签：string, similarity, numerical, sentence

我们如何使用唯一的数值来表示一个句子，使得相似的句子必须有最接近的值。

例子 。sentence1== 史密斯访问洛杉矶。sentence2== 约翰访问加利福尼亚。

对于这两个句子 1 和 2，它们的数值必须更接近才能表示这两个句子包含相似的消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T12:39:30.073

您正在谈论理解句子的语义，[自然语言处理](http://en.wikipedia.org/wiki/Natural_language_processing)，这不是一项简单的任务。除非您的句子数据遵循**非常** [严格的结构](http://en.wikipedia.org/wiki/Subject%E2%80%93verb%E2%80%93object)和[类似的模式](http://en.wikipedia.org/wiki/Stochastic_grammar)；我认为您所问的可能超出了当前的技术水平，当然也超出了博士水平的研究水平。

我能想到的唯一方法是使用已映射到语义感知的有[向图的已知字典来使用自然语言](http://en.wikipedia.org/wiki/Directed_acyclic_graph)[压缩。](http://en.wikibooks.org/wiki/Data_Compression/Dictionary_compression)

然后，您可以评估每个句子（图中的路径）与另一个句子的距离并分配一个累积权重。

# objective-c - 在 Objective-C 中声明我的班级代表持有的对象的所有权

> ID：10652524
> 
> 赞同：1
> 
> 时间：2012-05-18T12:19:07.867
> 
> 标签：objective-c, ios, automatic-ref-counting

我的代表创建的 ALAsset 的所有权存在问题。我的委托是一个模态视图，当它被解除时，它返回一个 ALAsset，但资产需要比委托长。
在委托回调中，我只需将 ALAsset 放在一个 NSMutableArray 中，该数组由我的应用程序的控制单例拥有`[OrderManager sharedOrderManager]`

```
-(void)elcImagePickerController:(ELCImagePickerController *)picker didFinishPickingPictureWithAsset:(ALAsset *)asset    
{
    [[[[OrderManager sharedOrderManager] currentOrder] assets] addObject:asset];
} 
```

后来，（在委托被解雇后）我使用数组中的资产构建了一个表格视图

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Photos View Cell Identifier";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    UIButton *imageButton;
    imageButton = (UIButton *)[cell.contentView viewWithTag:kImageButton_TAG];
    ALAsset *imageAsset = [[[[OrderManager sharedOrderManager] currentOrder] assets] objectAtIndex:indexPath.section];
    [imageButton setImage:[UIImage imageWithCGImage:[asset aspectRatioThumbnail]] forState:UIControlStateNormal];
    return cell;
} 
```

当然，由于委托不再存在，并且委托是资产的所有者，`*imageAsset`现在是一个 nil 指针。我的问题是，如何让我的表格视图控制器或我`sharedOrderManager`的 ALAsset 的所有者？

编辑：为了澄清，我正在使用 ARC。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T13:00:45.297

检查`NSMutableArray*`返回的`assets`是否已初始化（可能在单例实现或在它之后调用的任何其他方法）。

看起来是`nil`，不是`addObject:`，也`objectAtIndex:`不能返回任何东西。`NSMutableArray`保留添加的对象，在您自己过度释放之前不应释放它们。

# javascript - 在 Firefox 中使用 document.frames 打印 iFrame

> ID：10652525
> 
> 赞同：3
> 
> 时间：2012-05-18T12:19:11.577
> 
> 标签：javascript, jquery, pdf, iframe, printing

这真让我抓狂。

我在这里和其他网站上遇到了几个问题，但无法让它发挥作用。

我的父页面中有一个 iFrame，其中包含一个 PDF 文档。

iFrame（和 PDF）很小，因此 Adob​​e Reader 导航是隐藏的，因此在 Adob​​e Reader 中使用打印功能是不切实际的。

`Print`所以，我想要一个可以在 iFrame 窗口上触发的按钮（必须在父框架中） 。

[在 Firefox 中打印 PDF Iframe](https://stackoverflow.com/questions/10165821/print-a-pdf-iframe-in-firefox)

[如何在 ie6 中使用 javascript 在 iframe 中打印 pdf？](https://stackoverflow.com/questions/7130299/how-to-print-pdf-in-iframe-using-javascript-in-ie6)

和其他一些人有类似的建议。

使用**火狐**

```
document.getElementById('loyaltyBadge').focus();
document.getElementById('loyaltyBadge').contentWindow.print(); 
```

什么也没做

```
document.frames['loyaltyBadge'].focus();
document.frames['loyaltyBadge'].contentWindow.print(); 
```

什么也没做

```
document.frames.loyaltyBadge.focus();
document.frames.loyaltyBadge.contentWindow.print(); 
```

返回`document.frames is undefined`... 一样：

```
document.loyaltyBadge.print(); 
```

虽然这适用于`Chrome`

我不想在加载时自动打印，但我需要一个打印按钮。

上面的所有行都被包裹在：

```
$('#printFrame').click(function () {  }); 
```

具有 id 的按钮`printFrame`和框架本身的 ID（和名称）为`loyaltyBadge`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T14:09:56.553

以下在 Firefox 11 中适用于我：

```
window.frames.loyaltyBadge.focus();
window.frames.loyaltyBadge.print(); 
```

# powershell - 如何在 PowerShell 中获取当前文件位置

> ID：10652536
> 
> 赞同：2
> 
> 时间：2012-05-18T12:19:52.640
> 
> 标签：powershell

我想知道如何获取我正在运行或编写的脚本的位置。我们将一组 .NET 程序集放在与当前 PowerShell 脚本相同的目录中，我们希望从脚本中加载它们。现在我使用固定路径来定位程序集，但我们想从当前文件位置加载它们。

```
[System.Reflection.Assembly]::LoadFrom
("C:\Work\Scripts\Assemblies\DynamicOps.ManagementModel.Client.dll")

[System.Reflection.Assembly]::LoadFrom
("C:\Work\Scripts\Assemblies\DynamicOps.Repository.dll") 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-18T12:24:36.967

```
$MyInvocation 
```

包含具有有关当前命令的信息的对象，例如脚本、函数或脚本块。您可以使用对象中的信息，例如脚本的路径和文件名 ( `$myinvocation.mycommand.path`) 或函数的名称 ( `$myinvocation.mycommand.name`) 来识别当前命令。这对于查找正在运行的脚本的名称特别有用。您将通过[about_Automatic_Variables](http://technet.microsoft.com/en-us/library/dd347675.aspx)获得有关自动变量的全面帮助：

```
get-help about_Automatic_Variables -full 
```

* * *

（已编辑）要获取当前目录，您需要使用 CmdLet`Get-Location`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T12:24:26.447

`$MyInvocation.MyCommand.Path`也许？

# javascript - 事件处理程序与 ajax 加载页面的绑定和解除绑定

> ID：10652538
> 
> 赞同：0
> 
> 时间：2012-05-18T12:20:07.730
> 
> 标签：javascript, jquery, javascript-events

在动态加载（ajax）页面中处理 javascript 事件的“线程良好的路径”是什么。

我有一个应用程序，它有一个标签栏控制器，它通过 ajax 拉入子视图，这些视图有自己的 js，第一次很好，但是如果有人要长时间使用该应用程序并循环浏览所有选项卡视图重复，事件将不断地被绑定，这似乎非常低效，特别是考虑到这些子视图可能有他们自己管理的子视图，其中一些可能有很多事件处理程序。

有哪些更优雅的方法可以解决这个问题？（顺便说一句，我正在使用 jQuery）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T12:22:45.867

这取决于场景，您甚至没有显示一行代码，但是您可以`unbind`在绑定新回调之前使用：

```
$('#foo').unbind('click').click(handler);
...
$('#foo').unbind('click').click(handler)
...
$('#foo').unbind('click').click(handler)
...

$('#foo').click(); // handler fire one time only. 
```

# php - php 的 escapeshellarg 不能与 exec 一起使用（字符串未封装在引号中）

> ID：10652539
> 
> 赞同：0
> 
> 时间：2012-05-18T12:20:17.193
> 
> 标签：php, shell, escaping, exec

我有一个简单的两行脚本：

```
<?
        $str = '"<!DOCTYPE><html><head></head><body><h1>FOOO</h1></body></html>"';
        exec('phantomjs '.escapeshellarg(dirname(__FILE__).'/render.js ').''.escapeshellarg($str));
?> 
```

从控制台运行它时，我得到：

`Can't open '/Users/me/render.js <!DOCTYPE><html><head></head><body><h1>FOOO</h1></body></html>'`

所以字符串没有像应该的那样封装在引号中。我在这里做错什么了吗？系统是 OSX 10.7, php 5.3.6 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:35:39.183

当我在 OS X 10.7（相同的 php 版本）上尝试此操作时，我得到了按预期用单引号括起来的字符串。但是，输出可能不是您所期望的。我会先回显您传递给 exec 的命令，然后尝试将该命令复制粘贴到终端中以查看它是否有效。这样你会更好地看到这个问题。这是我根据您的代码所做的：

```
$str = '"<!DOCTYPE><html><head></head><body><h1>FOOO</h1></body></html>"';
$command = 'phantomjs '.escapeshellarg(dirname(__FILE__).'/render.js ').
           ''.escapeshellarg($str);
echo "$command\n"; 
```

我懂了：

```
phantomjs '/Users/me/render.js ''"<!DOCTYPE><html><head></head><body><h1>FOOO</h1></body></html>"' 
```

如果它是正确的并且仍然不起作用，您应该检查您的路径并确保文件位于脚本认为它们所在的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T14:13:20.150

最后的工作命令：

```
$str = '"<!DOCTYPE><html><head></head><body><h1>FOOO</h1></body></html>"';
$command = 'phantomjs '.dirname(__FILE__).'/render.js '.$str;

exec($command); 
```

# android - 在 Eclipse 中从现有源创建 android 项目

> ID：10652549
> 
> 赞同：0
> 
> 时间：2012-05-18T12:20:51.407
> 
> 标签：android, eclipse

我尝试从现有源创建一个 android 项目，当我选择文件夹时出现错误：必须指定现有目录名称。

我不明白为什么会出现此错误，我选择了项目的目录。

图片链接：http: [//i.stack.imgur.com/bZLDR.png](http://i.stack.imgur.com/bZLDR.png)

我真的需要帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-17T20:22:14.283

解决方法是选择父目录。所以如果你已经有一个结构

```
parent
    project
        <AndroidManifest.xml and friends> 
```

然后选择“父”而不是“项目”。使用“浏览”按钮而不是复制粘贴路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T12:26:25.670

好吧，在您从目录中选择项目后，您仍然会看到错误符号，

现在根本不要对目录进行任何更改，而是尝试切换单选按钮，如果可能的话，甚至尝试选中和取消选中复选框，最后将所有内容保持原样.....取消选中复选框，然后单选从选择的现有源创建一个android项目的按钮，你会看到错误消失了，这发生在我的eclipse中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T12:27:38.627

去：

> 文件 > 导入 > 现有项目到工作区

并选择项目的根文件夹。

# ruby - 如果已经安装了devkit，那么如何卸载呢？

> ID：10652554
> 
> 赞同：3
> 
> 时间：2012-05-18T12:21:20.010
> 
> 标签：ruby

如何[在 Windows 上卸载 Ruby 的开发工具包](https://github.com/OneClick/RubyInstaller/wiki/Development-Kit)？我必须重新安装 ruby​​，因为它的安装路径包含一个空格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T14:51:25.793

如果您只是要重新安装它和 Ruby，则不必删除它；只需重新安装 Ruby，然后在命令提示符窗口中，`cd`进入 DevKit 目录并运行`ruby dk.rb init`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T14:46:07.457

从您发布的链接。

> • 如果您之前安装了旧版 DevKit devkit-3.4.5r3-20091110.7z，则其工件会被提取到每个 Ruby 安装中，并且需要手动删除。对于使用旧版 DevKit 的每个 Ruby 安装，删除 \bin 和 \devkit 子目录中的 gcc.bat、make.bat 和 sh.bat 存根批处理文件。
> 
> •如果您之前安装了旧版自解压DevKit 之一，请按照SFX DevKit 升级说明进行操作。

可以在[此处](https://github.com/oneclick/rubyinstaller/wiki/FAQ#wiki-upgrade_dk)找到 SFX 升级说明。

# c# - 发布我的第一个应用程序-> 权限被拒绝

> ID：10652556
> 
> 赞同：2
> 
> 时间：2012-05-18T12:21:25.323
> 
> 标签：c#, sql, sql-server, asp.net-mvc-3, entity-framework

我已经创建了我的第一个 c#MVC3 EntityFramework 应用程序并移入 IIS 文件夹......在本地运行它之后

> 数据库“master”中的 CREATE DATABASE 权限被拒绝。

问题是我已经在 MS SQL Management Studio 中创建了 SQL 帐户，并且我的连接字符串的登录名和密码输入如下：

```
<connectionStrings>
<add name="ApplicationServices" connectionString="data source=.\SQLEXPRESS;user id=kwestionariusz;password=PASSWORD;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|aspnetdb.mdf;User Instance=true" providerName="System.Data.SqlClient" />
</connectionStrings> 
```

另外，我在其中添加了相同的内容，但我不知道是否有必要：

```
<entityFramework>
<defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework">
  <parameters>
    <parameter value="Data Source=.\SQLEXPRESS; user id=kwestionariusz; password=PASSWORD; Integrated Security=True; MultipleActiveResultSets=True" />
  </parameters>
</defaultConnectionFactory>
</entityFramework> 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T12:41:20.447

如果您首先使用代码，请确保用户具有创建数据库的权限。

```
class BlogContext : DbContext
{
        public DbSet<BlogEntry> BlogEntires
        {
            get;
            set;
        }
} 
```

连接的名称必须与 db 上下文的类名匹配：

```
<configuration>
  <connectionStrings>
    <add
      name="BlogContext"
      providerName="System.Data.SqlClient"
      connectionString="Server=(local);Database=ef4;Trusted_Connection=true;"/>
  </connectionStrings>
</configuration> 
```

如果您的数据库已经存在，请修改 DbContext 的构造函数：

```
 class BlogContext : DbContext
    {

        public BlogContext()
        {
           System.Data.Entity.Database.SetInitializer(
             new CreateDatabaseIfNotExists<BlogContext>());
        }

        public DbSet<BlogEntry> BlogEntires
        {
            get;
            set;
        }
    } 
```

# android - 从 android 发送 oauth 令牌会导致 KeyNotFoundException

> ID：10652557
> 
> 赞同：1
> 
> 时间：2012-05-18T12:21:34.807
> 
> 标签：android, wcf, soap, dotnetopenauth

我们目前正在开发一个应用程序，该应用程序使用 DotNetOpenAuth 库通过 OAuth 保护 wcf SOAP Web 服务。整个事情在IIS7上运行。Web 服务和 DotNetOpenAuth 库运行平稳，至少在 PC 上运行时是这样。但是，从 android 平台调用该服务会导致一些问题。有时它会运行得很好，有时它会导致异常说“序列不包含元素”。

不幸的是，我没有所有详细信息，因为我自己实际上没有可用的 android。但是，在阅读我的同事创建的日志文件时，有几件事很突出。

Windows 事件日志表明这是一个 KeyNotFoundException，这是因为令牌被识别（实际上，令牌*存在*于数据库中，所以这不应该发生 - 我已经检查过）。

此外，真正有趣的是，仅当 oauth_token 参数中出现 + 或 / 符号时才会发生此异常。我有点倾向于认为这是两个字符编码不正确的编码问题。检查 Windows 事件日志时，只要 oauth_token 参数包含 + 或 /，它就会被空格替换。但是我不知道这是在哪里编码的，为什么这两个字符被替换为空格，最重要的是现在，如何修复它。

我还启用了 log4net 日志记录，这表明 oauth_token 变量与数据库中的内容相同。但是，它确实显示构造的签名基本字符串包含 oauth_token，只有 / 字符被替换为 %252F。然而，在下面几行，oauth_token 变量是单独显示的（即不是作为基本字符串的一部分，而是在变量的摘要中），并且 / 实际上显示为 /。

对此问题的任何帮助将不胜感激。

**编辑**

*从 log4net 检索的日志*

```
2012-05-18 13:05:21,588 (GMT+2) [5] DEBUG DotNetOpenAuth.Messaging.Channel - Preparing to send UnauthorizedTokenResponse (1.0.1) message.
  2012-05-18 13:05:22,099 (GMT+2) [5] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.OAuth.ChannelElements.TokenHandlingBindingElement applied to message.
  2012-05-18 13:05:22,100 (GMT+2) [5] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.OAuth.ChannelElements.OAuthHttpMethodBindingElement did not apply to message.
2012-05-18 13:05:22,102 (GMT+2) [5] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.Messaging.Bindings.StandardReplayProtectionBindingElement did not apply to message.
2012-05-18 13:05:22,104 (GMT+2) [5] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.Messaging.Bindings.StandardExpirationBindingElement did not apply to message.
2012-05-18 13:05:22,109 (GMT+2) [5] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.OAuth.ChannelElements.SigningBindingElementChain did not apply to message.
2012-05-18 13:05:22,113 (GMT+2) [5] INFO  DotNetOpenAuth.Messaging.Channel - Prepared outgoing UnauthorizedTokenResponse (1.0.1) message for <response>: 
    oauth_token: LgelzDbE0hd8Z+HrRQWD63SzNA8=
    oauth_token_secret: eK1sVTQvF6LrHqrtDGXe4LpLunI=
    oauth_callback_confirmed: true

2012-05-18 13:05:22,113 (GMT+2) [5] DEBUG DotNetOpenAuth.Messaging.Channel - Sending message: UnauthorizedTokenResponse
2012-05-18 13:05:22,463 (GMT+2) [5] INFO  DotNetOpenAuth.Messaging.Channel - Scanning incoming request for messages: https://websrv.hszuyd.nl/serviceprovider/v2/OAuth.ashx?oauth_token=LgelzDbE0hd8Z+HrRQWD63SzNA8=
2012-05-18 13:05:22,996 (GMT+2) [5] ERROR DotNetOpenAuth.OAuthServiceProvider - An unhandled exception occurred in ASP.NET processing: DotNetOpenAuth.Messaging.ProtocolException: A token in the message was not recognized by the service provider. ---> System.Collections.Generic.KeyNotFoundException: Unrecognized token ---> System.InvalidOperationException: Sequence contains no elements
   at System.Data.Linq.SqlClient.SqlProvider.Execute(Expression query, QueryInfo queryInfo, IObjectReaderFactory factory, Object[] parentArgs, Object[] userArgs, ICompiledSubQuery[] subQueries, Object lastResult)
   at System.Data.Linq.SqlClient.SqlProvider.ExecuteAll(Expression query, QueryInfo[] queryInfos, IObjectReaderFactory factory, Object[] userArguments, ICompiledSubQuery[] subQueries)
   at System.Data.Linq.SqlClient.SqlProvider.System.Data.Linq.Provider.IProvider.Execute(Expression query)
   at System.Data.Linq.Table`1.System.Linq.IQueryProvider.Execute[TResult](Expression expression)
   at System.Linq.Queryable.First[TSource](IQueryable`1 source, Expression`1 predicate)
   at OAuthServiceProvider.Code.DatabaseTokenManager.GetRequestToken(String token) in C:\Program Files\TimeTableWebService\sp\Code\DatabaseTokenManager.cs:line 31
   --- End of inner exception stack trace ---
   at OAuthServiceProvider.Code.DatabaseTokenManager.GetRequestToken(String token) in C:\Program Files\TimeTableWebService\sp\Code\DatabaseTokenManager.cs:line 35
   at DotNetOpenAuth.OAuth.ChannelElements.OAuthServiceProviderMessageFactory.GetNewRequestMessage(MessageReceivingEndpoint recipient, IDictionary`2 fields) in c:\BuildAgent\work\a02b428f36957bca\src\DotNetOpenAuth\OAuth\ChannelElements\OAuthServiceProviderMessageFactory.cs:line 80
   --- End of inner exception stack trace ---
   at DotNetOpenAuth.OAuth.ChannelElements.OAuthServiceProviderMessageFactory.GetNewRequestMessage(MessageReceivingEndpoint recipient, IDictionary`2 fields) in c:\BuildAgent\work\a02b428f36957bca\src\DotNetOpenAuth\OAuth\ChannelElements\OAuthServiceProviderMessageFactory.cs:line 100
   at OAuthServiceProvider.Code.CustomOAuthMessageFactory.GetNewRequestMessage(MessageReceivingEndpoint recipient, IDictionary`2 fields) in C:\Program Files\TimeTableWebService\sp\Code\CustomOAuthTypeProvider.cs:line 24
   at DotNetOpenAuth.Messaging.Channel.Receive(Dictionary`2 fields, MessageReceivingEndpoint recipient) in c:\BuildAgent\work\a02b428f36957bca\src\DotNetOpenAuth\Messaging\Channel.cs:line 713
   at DotNetOpenAuth.OAuth.ChannelElements.OAuthChannel.ReadFromRequestCore(HttpRequestInfo request) in c:\BuildAgent\work\a02b428f36957bca\src\DotNetOpenAuth\OAuth\ChannelElements\OAuthChannel.cs:line 194
   at DotNetOpenAuth.Messaging.Channel.ReadFromRequest(HttpRequestInfo httpRequest) in c:\BuildAgent\work\a02b428f36957bca\src\DotNetOpenAuth\Messaging\Channel.cs:line 422
   at OAuth.ProcessRequest(HttpContext context) in d:\oauthSiteTest\serviceprovider\v2\OAuth.ashx:line 21
   at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)
DotNetOpenAuth.Messaging.ProtocolException: A token in the message was not recognized by the service provider. ---> System.Collections.Generic.KeyNotFoundException: Unrecognized token ---> System.InvalidOperationException: Sequence contains no elements
   at System.Data.Linq.SqlClient.SqlProvider.Execute(Expression query, QueryInfo queryInfo, IObjectReaderFactory factory, Object[] parentArgs, Object[] userArgs, ICompiledSubQuery[] subQueries, Object lastResult)
   at System.Data.Linq.SqlClient.SqlProvider.ExecuteAll(Expression query, QueryInfo[] queryInfos, IObjectReaderFactory factory, Object[] userArguments, ICompiledSubQuery[] subQueries)
   at System.Data.Linq.SqlClient.SqlProvider.System.Data.Linq.Provider.IProvider.Execute(Expression query)
   at System.Data.Linq.Table`1.System.Linq.IQueryProvider.Execute[TResult](Expression expression)
   at System.Linq.Queryable.First[TSource](IQueryable`1 source, Expression`1 predicate)
   at OAuthServiceProvider.Code.DatabaseTokenManager.GetRequestToken(String token) in C:\Program Files\TimeTableWebService\sp\Code\DatabaseTokenManager.cs:line 31
   --- End of inner exception stack trace ---
   at OAuthServiceProvider.Code.DatabaseTokenManager.GetRequestToken(String token) in C:\Program Files\TimeTableWebService\sp\Code\DatabaseTokenManager.cs:line 35
   at DotNetOpenAuth.OAuth.ChannelElements.OAuthServiceProviderMessageFactory.GetNewRequestMessage(MessageReceivingEndpoint recipient, IDictionary`2 fields) in c:\BuildAgent\work\a02b428f36957bca\src\DotNetOpenAuth\OAuth\ChannelElements\OAuthServiceProviderMessageFactory.cs:line 80
   --- End of inner exception stack trace ---
   at DotNetOpenAuth.OAuth.ChannelElements.OAuthServiceProviderMessageFactory.GetNewRequestMessage(MessageReceivingEndpoint recipient, IDictionary`2 fields) in c:\BuildAgent\work\a02b428f36957bca\src\DotNetOpenAuth\OAuth\ChannelElements\OAuthServiceProviderMessageFactory.cs:line 100
   at OAuthServiceProvider.Code.CustomOAuthMessageFactory.GetNewRequestMessage(MessageReceivingEndpoint recipient, IDictionary`2 fields) in C:\Program Files\TimeTableWebService\sp\Code\CustomOAuthTypeProvider.cs:line 24
   at DotNetOpenAuth.Messaging.Channel.Receive(Dictionary`2 fields, MessageReceivingEndpoint recipient) in c:\BuildAgent\work\a02b428f36957bca\src\DotNetOpenAuth\Messaging\Channel.cs:line 713
   at DotNetOpenAuth.OAuth.ChannelElements.OAuthChannel.ReadFromRequestCore(HttpRequestInfo request) in c:\BuildAgent\work\a02b428f36957bca\src\DotNetOpenAuth\OAuth\ChannelElements\OAuthChannel.cs:line 194
   at DotNetOpenAuth.Messaging.Channel.ReadFromRequest(HttpRequestInfo httpRequest) in c:\BuildAgent\work\a02b428f36957bca\src\DotNetOpenAuth\Messaging\Channel.cs:line 422
   at OAuth.ProcessRequest(HttpContext context) in d:\oauthSiteTest\serviceprovider\v2\OAuth.ashx:line 21
   at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)

2012-05-18 13:05:27,382 (GMT+2) [6] DEBUG DotNetOpenAuth.Messaging.Channel - Preparing to send UnauthorizedTokenResponse (1.0.1) message.
2012-05-18 13:05:27,430 (GMT+2) [6] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.OAuth.ChannelElements.TokenHandlingBindingElement applied to message.
2012-05-18 13:05:27,430 (GMT+2) [6] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.OAuth.ChannelElements.OAuthHttpMethodBindingElement did not apply to message.
2012-05-18 13:05:27,430 (GMT+2) [6] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.Messaging.Bindings.StandardReplayProtectionBindingElement did not apply to message.
2012-05-18 13:05:27,430 (GMT+2) [6] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.Messaging.Bindings.StandardExpirationBindingElement did not apply to message.
2012-05-18 13:05:27,430 (GMT+2) [6] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.OAuth.ChannelElements.SigningBindingElementChain did not apply to message.
2012-05-18 13:05:27,430 (GMT+2) [6] INFO  DotNetOpenAuth.Messaging.Channel - Prepared outgoing UnauthorizedTokenResponse (1.0.1) message for <response>: 
    oauth_token: tdKwMhsNOyQPTiz+K5th/RZr0F8=
    oauth_token_secret: UtfdLNG0VqrTGinchsNfjbyFBtE=
    oauth_callback_confirmed: true

2012-05-18 13:05:27,430 (GMT+2) [6] DEBUG DotNetOpenAuth.Messaging.Channel - Sending message: UnauthorizedTokenResponse
2012-05-18 13:05:27,503 (GMT+2) [6] INFO  DotNetOpenAuth.Messaging.Channel - Scanning incoming request for messages: https://websrv.hszuyd.nl/serviceprovider/v2/OAuth.ashx?oauth_token=tdKwMhsNOyQPTiz+K5th/RZr0F8=
2012-05-18 13:05:27,512 (GMT+2) [6] ERROR DotNetOpenAuth.OAuthServiceProvider - An unhandled exception occurred in ASP.NET processing: DotNetOpenAuth.Messaging.ProtocolException: A token in the message was not recognized by the service provider. ---> System.Collections.Generic.KeyNotFoundException: Unrecognized token ---> System.InvalidOperationException: Sequence contains no elements
   at System.Data.Linq.SqlClient.SqlProvider.Execute(Expression query, QueryInfo queryInfo, IObjectReaderFactory factory, Object[] parentArgs, Object[] userArgs, ICompiledSubQuery[] subQueries, Object lastResult)
   at System.Data.Linq.SqlClient.SqlProvider.ExecuteAll(Expression query, QueryInfo[] queryInfos, IObjectReaderFactory factory, Object[] userArguments, ICompiledSubQuery[] subQueries)
   at System.Data.Linq.SqlClient.SqlProvider.System.Data.Linq.Provider.IProvider.Execute(Expression query)
   at System.Data.Linq.Table`1.System.Linq.IQueryProvider.Execute[TResult](Expression expression)
   at System.Linq.Queryable.First[TSource](IQueryable`1 source, Expression`1 predicate)
   at OAuthServiceProvider.Code.DatabaseTokenManager.GetRequestToken(String token) in C:\Program Files\TimeTableWebService\sp\Code\DatabaseTokenManager.cs:line 31
   --- End of inner exception stack trace ---
   at OAuthServiceProvider.Code.DatabaseTokenManager.GetRequestToken(String token) in C:\Program Files\TimeTableWebService\sp\Code\DatabaseTokenManager.cs:line 35
   at DotNetOpenAuth.OAuth.ChannelElements.OAuthServiceProviderMessageFactory.GetNewRequestMessage(MessageReceivingEndpoint recipient, IDictionary`2 fields) in c:\BuildAgent\work\a02b428f36957bca\src\DotNetOpenAuth\OAuth\ChannelElements\OAuthServiceProviderMessageFactory.cs:line 80
   --- End of inner exception stack trace ---
   at DotNetOpenAuth.OAuth.ChannelElements.OAuthServiceProviderMessageFactory.GetNewRequestMessage(MessageReceivingEndpoint recipient, IDictionary`2 fields) in c:\BuildAgent\work\a02b428f36957bca\src\DotNetOpenAuth\OAuth\ChannelElements\OAuthServiceProviderMessageFactory.cs:line 100
   at OAuthServiceProvider.Code.CustomOAuthMessageFactory.GetNewRequestMessage(MessageReceivingEndpoint recipient, IDictionary`2 fields) in C:\Program Files\TimeTableWebService\sp\Code\CustomOAuthTypeProvider.cs:line 24
   at DotNetOpenAuth.Messaging.Channel.Receive(Dictionary`2 fields, MessageReceivingEndpoint recipient) in c:\BuildAgent\work\a02b428f36957bca\src\DotNetOpenAuth\Messaging\Channel.cs:line 713
   at DotNetOpenAuth.OAuth.ChannelElements.OAuthChannel.ReadFromRequestCore(HttpRequestInfo request) in c:\BuildAgent\work\a02b428f36957bca\src\DotNetOpenAuth\OAuth\ChannelElements\OAuthChannel.cs:line 194
   at DotNetOpenAuth.Messaging.Channel.ReadFromRequest(HttpRequestInfo httpRequest) in c:\BuildAgent\work\a02b428f36957bca\src\DotNetOpenAuth\Messaging\Channel.cs:line 422
   at OAuth.ProcessRequest(HttpContext context) in d:\oauthSiteTest\serviceprovider\v2\OAuth.ashx:line 21
   at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)
DotNetOpenAuth.Messaging.ProtocolException: A token in the message was not recognized by the service provider. ---> System.Collections.Generic.KeyNotFoundException: Unrecognized token ---> System.InvalidOperationException: Sequence contains no elements
   at System.Data.Linq.SqlClient.SqlProvider.Execute(Expression query, QueryInfo queryInfo, IObjectReaderFactory factory, Object[] parentArgs, Object[] userArgs, ICompiledSubQuery[] subQueries, Object lastResult)
   at System.Data.Linq.SqlClient.SqlProvider.ExecuteAll(Expression query, QueryInfo[] queryInfos, IObjectReaderFactory factory, Object[] userArguments, ICompiledSubQuery[] subQueries)
   at System.Data.Linq.SqlClient.SqlProvider.System.Data.Linq.Provider.IProvider.Execute(Expression query)
   at System.Data.Linq.Table`1.System.Linq.IQueryProvider.Execute[TResult](Expression expression)
   at System.Linq.Queryable.First[TSource](IQueryable`1 source, Expression`1 predicate)
   at OAuthServiceProvider.Code.DatabaseTokenManager.GetRequestToken(String token) in C:\Program Files\TimeTableWebService\sp\Code\DatabaseTokenManager.cs:line 31
   --- End of inner exception stack trace ---
   at OAuthServiceProvider.Code.DatabaseTokenManager.GetRequestToken(String token) in C:\Program Files\TimeTableWebService\sp\Code\DatabaseTokenManager.cs:line 35
   at DotNetOpenAuth.OAuth.ChannelElements.OAuthServiceProviderMessageFactory.GetNewRequestMessage(MessageReceivingEndpoint recipient, IDictionary`2 fields) in c:\BuildAgent\work\a02b428f36957bca\src\DotNetOpenAuth\OAuth\ChannelElements\OAuthServiceProviderMessageFactory.cs:line 80
   --- End of inner exception stack trace ---
   at DotNetOpenAuth.OAuth.ChannelElements.OAuthServiceProviderMessageFactory.GetNewRequestMessage(MessageReceivingEndpoint recipient, IDictionary`2 fields) in c:\BuildAgent\work\a02b428f36957bca\src\DotNetOpenAuth\OAuth\ChannelElements\OAuthServiceProviderMessageFactory.cs:line 100
   at OAuthServiceProvider.Code.CustomOAuthMessageFactory.GetNewRequestMessage(MessageReceivingEndpoint recipient, IDictionary`2 fields) in C:\Program Files\TimeTableWebService\sp\Code\CustomOAuthTypeProvider.cs:line 24
   at DotNetOpenAuth.Messaging.Channel.Receive(Dictionary`2 fields, MessageReceivingEndpoint recipient) in c:\BuildAgent\work\a02b428f36957bca\src\DotNetOpenAuth\Messaging\Channel.cs:line 713
   at DotNetOpenAuth.OAuth.ChannelElements.OAuthChannel.ReadFromRequestCore(HttpRequestInfo request) in c:\BuildAgent\work\a02b428f36957bca\src\DotNetOpenAuth\OAuth\ChannelElements\OAuthChannel.cs:line 194
   at DotNetOpenAuth.Messaging.Channel.ReadFromRequest(HttpRequestInfo httpRequest) in c:\BuildAgent\work\a02b428f36957bca\src\DotNetOpenAuth\Messaging\Channel.cs:line 422
   at OAuth.ProcessRequest(HttpContext context) in d:\oauthSiteTest\serviceprovider\v2\OAuth.ashx:line 21
   at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)
2012-05-18 13:05:30,486 (GMT+2) [5] INFO  DotNetOpenAuth.Messaging.Channel - Scanning incoming request for messages: https://websrv.hszuyd.nl/serviceprovider/v2/OAuth.ashx
2012-05-18 13:05:30,487 (GMT+2) [5] DEBUG DotNetOpenAuth.Messaging.Channel - Incoming request received: RequestScopedTokenMessage
2012-05-18 13:05:30,487 (GMT+2) [5] INFO  DotNetOpenAuth.Messaging.Channel - Processing incoming RequestScopedTokenMessage (1.0.1) message:
    scope: http://tempuri.org/DataApi/retrieveTimeTable
    oauth_callback: x-oauthflow://callback/
    oauth_consumer_key: sampleconsumer
    oauth_nonce: 913320039
    oauth_signature_method: HMAC-SHA1
    oauth_signature: yfPMlcFo6/NgJltyCLc++RMyQCY=
    oauth_version: 1.0
    oauth_timestamp: 1337339130 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T01:15:09.457

我们需要一个异常的调用堆栈来确定。很可能这个异常只是一个内部异常（ASP.NET 习惯于报告内部异常而不是外部异常）并且外部异常也可能会添加我们需要的上下文。由于您已经[启用了 logging](http://tinyurl.com/dnoalogs)，我希望您应该能够从那里获取所有异常详细信息。

如果`/`和`+`字符没有在 HTTP URL 中编码，那是客户端中的一个错误，应该修复。

# mysql - MySQL 查询未选择正确的日期范围

> ID：10652562
> 
> 赞同：2
> 
> 时间：2012-05-18T12:21:38.257
> 
> 标签：mysql, date

我目前正在尝试运行 SQL 查询以在某个日期之间导出数据，但它可以正常运行查询，只是不是日期选择，我无法弄清楚出了什么问题。

```
SELECT 
    title AS Order_No, 
    FROM_UNIXTIME(entry_date, '%d-%m-%Y') AS Date, 
    status AS Status,
    field_id_59 AS Transaction_ID,  
    field_id_32 AS Customer_Name, 
    field_id_26 AS Sub_Total, 
    field_id_28 AS VAT, 
    field_id_31 AS Discount, 
    field_id_27 AS Shipping_Cost, 
    (field_id_26+field_id_28+field_id_27-field_id_31) AS Total 
FROM 
    exp_channel_data AS d NATURAL JOIN
    exp_channel_titles AS t
WHERE 
    t.channel_id = 5 AND FROM_UNIXTIME(entry_date, '%d-%m-%Y') BETWEEN '01-05-2012' AND '31-05-2012' AND status = 'Shipped'  
ORDER BY 
    entry_date DESC 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T12:22:45.197

如[手册中所述](http://dev.mysql.com/doc/en/date-and-time-literals.html)，日期文字应采用`YYYY-MM-DD`格式。另外，请记住@ypercube 在[他的回答](https://stackoverflow.com/a/10652693/623041)中提出的观点，您想要：

```
WHERE t.channel_id = 5
  AND entry_date >= UNIX_TIMESTAMP('2012-05-01')
  AND entry_date <  UNIX_TIMESTAMP('2012-06-01')
  AND status = 'Shipped' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T12:29:59.940

除了日期格式还有另一个问题。为了有效地使用 上的任何索引，当您在, or子句`entry_date`中使用条件时，不应将函数应用于该列（如果您需要与默认格式不同的显示格式，则可以使用列表中的格式）。编写该部分查询的有效方法是：`WHERE``GROUP BY``HAVING``SELECT`

```
 (  entry_date >= '2012-05-01'  
AND entry_date < '2012-06-01' 
 ) 
```

It works with `DATE`, `DATETIME` and `TIMESTAMP` columns.

# jquery - 在 .toggle() 用户在 jQuery 中使用 .mouseleave() 后单击两次

> ID：10652563
> 
> 赞同：1
> 
> 时间：2012-05-18T12:21:51.083
> 
> 标签：jquery, return, toggle, mouseleave

当用户切换`$('#menu');`按钮时，他们没有问题。但是，当用户离开`$('#dropdown');`鼠标然后单击返回时，`$('#menu');`他们必须单击两次才能使切换再次起作用。难道我做错了什么？

[jsfiddle 演示](http://jsfiddle.net/BF8p6/)

===========HTML============

```
<a class="" href="javascript:;" id="menu"></a>
<div style="display: none;" id="dropdown">
  <div id="wrap">
    <div class="menu-section">
      <div class="menu-header-section">
        <h3>Header</h3>
      </div>
      <div class="menu-list">
        <ul class="list">
          <li><a href="#">link</a></li>
          <li><a href="#">link</a></li>
        </ul>
      </div>
    </div>
  </div>
  <a href="javascript:;" class="closeThis">close</a> </div>
</div> 
```

===========jQuery===========

```
 //menu
var menu = $('#menu');
var dropdown = $('#dropdown');

menu.toggle(function () {
    menu.addClass('active');
    dropdown.fadeIn();
}, function () {
    menu.removeClass('active');
    dropdown.fadeOut();
    return false;
});
dropdown.mouseleave(function () {
    menu.removeClass('active');
    dropdown.fadeOut();
    return menu;
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T12:54:00.737

[文档](http://api.jquery.com/toggle-event/)解释了这一切：

> **.toggle( handler(eventObject), handler(eventObject) [, handler(eventObject)] ) handler(eventObject)**每次点击元素时执行的函数。 **handler(eventObject)**每次单击元素时执行的函数。
> 
> .toggle() 方法为点击事件绑定了一个处理程序，因此这里也适用于触发点击的规则。

换句话说，`toggle()`基于偶数和奇数`click`事件的交替。所以：

*   单击[奇数]：显示
*   点击[偶数]：隐藏

*   点击1：显示

*   点击1：显示
*   点击2：隐藏
*   点击3：显示
*   点击4：隐藏
*   点击5：显示
*   mouseleave：隐藏
*   click 6: Hide // 注意`#dropdown`这里已经隐藏了，但无论如何，这是一个**偶数**点击。单击一次，您将再次隐藏它。
*   click 7: Show // 点击两次显示。

无论如何，这就是你的问题的解释。致力于解决方案。

* * *

**解决方案**

手动触发`click`事件。

代替：

```
dropdown.mouseleave(function () {
    menu.removeClass('active');
    dropdown.fadeOut();
    return menu;
}); 
```

和：

```
dropdown.mouseleave(function () {
    menu.trigger('click');
}); 
```

演示：http: [//jsfiddle.net/aymansafadi/BF8p6/2/](http://jsfiddle.net/aymansafadi/BF8p6/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T12:38:19.640

逻辑上，

您**首先**单击`menu`，`dropdown`出现 。你（它消失了）`mouseleave`。`dropdown`

现在，当您`menu` **第二次**单击 时，它会执行函数的“第二半” （`.toggle()`即）。`.fadeOut()``dropdown`

在此之后，当您`menu`再次单击时，它会执行“前半部分”，`.toggle()`一切看起来都很愉快。

**编辑**

您可以尝试使用`flag`.

```
var menu = $('#menu');
var dropdown = $('#dropdown');
var flag = 'reset';

menu.click(function () {
    if(flag == 'reset')
    {
        menu.addClass('active');
        dropdown.fadeIn();
        flag = 'set';
    }
    else if(flag =='set')
    {
        flag = 'reset'; 
        menu.removeClass('active');
        dropdown.fadeOut();                               
        return false;
    }
});

dropdown.mouseleave(function () {
    flag = 'reset';
    menu.removeClass('active');
    dropdown.fadeOut();
    return menu;
}); 
```

jsfiddle：http: [//jsfiddle.net/BF8p6/1/](http://jsfiddle.net/BF8p6/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T12:57:25.197

希望这会奏效。

```
$('#menu').click(
function () {

if ($("#dropdown:visible"))
{
$('.mapNavLeft').removeClass("active");
$(this).next('#dropdown')fadeOut();
} else {
$(this).addClass("active");
$(this).next('#dropdown')fadeIn();
}

});

$("#dropdown").hover(
function () {
  return false;
},
function () {
  $(this).fadeOut();
}
); 
```

# javascript - 相同的 jquery 代码在文件和控制台中的工作方式不同

> ID：10652566
> 
> 赞同：0
> 
> 时间：2012-05-18T12:22:00.117
> 
> 标签：javascript, jquery, firebug, google-chrome-devtools

为什么当我执行

```
$(".b").show(1000); 
```

在 chrome 开发工具的控制台中它动画但是当我把它放在 js 文件中它只是显示元素？

提前谢谢

UPD

`<div class="b"></div>`是在 html

```
 $.ajax({
        url: "/some/url.php",

        }).done(function ( data ) {
            $(".b").show(1000);
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T12:35:57.967

好的，这是一个清单：

*   DOM 上执行的代码准备好了吗？

*   执行期间元素是否存在于 DOM 上？如果不是，则不显示任何内容。

*   是 div 样式还是不为空？没有填充、没有背景、没有边框和/或`0`高度的空 div 不会出现。

*   **AJAX 是否返回成功？**

*   控制台说什么？404？跨域受限？语法错误/意外的标记在..？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T12:37:39.370

这有帮助吗？

```
$.ajax({
        url: "/some/url.php",

        }).done(function ( data ) {
            $(".b")live().show(1000);
        }); 
```

# cakephp-2.0 - 如何在表 cakephp 2 中使用 counterCache 更新两个字段？

> ID：10652571
> 
> 赞同：1
> 
> 时间：2012-05-18T12:22:36.403
> 
> 标签：cakephp-2.0

我想在 CakePHP 2.x 中使用 counterCache 更新两个字段。我试过这段代码：

```
public $belongsTo = array(
    'Table2' => array(
        'className' => 'Table2',
        'counterCache' => 'downvote_count',
        'counterScope' => array('Table2.id' => 0)
    ),
    'Table2' => array(
        'className' => 'Table2',
        'counterCache' => 'upvote_count',
        'counterScope' => array('Table2.id' => 2)
    )
); 
```

..但它只更新最后一个字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T00:20:56.193

```
public $belongsTo = array(
    'Table2' => array(
        'className' => 'Table2',
        'counterCache' => array(
            'downvote_count' => true,
            'upvote_count' => true
        )
    )
); 
```

# c++ - 为程序使用预分配内存空间

> ID：10652573
> 
> 赞同：6
> 
> 时间：2012-05-18T12:22:41.017
> 
> 标签：c++, memory-management

**在我的 Windows 的 C++ 程序中，我通过调用new CMyClass()**在堆上分配了几个小对象（数千个）

 **性能似乎因此受到影响。

有没有办法在堆中预先分配一些最小内存供程序使用，以便操作系统在我调用**new CMyClass()**以提高性能时开始从这个预先分配的空间分配？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-18T12:23:36.597

您似乎正在寻找一个**内存池**- [http://www.codeproject.com/Articles/27487/Why-to-use-memory-pool-and-how-to-implement-it](http://www.codeproject.com/Articles/27487/Why-to-use-memory-pool-and-how-to-implement-it)

请注意，您可以预先分配一些内存，然后使用placement new 来防止多次分配。**

# iphone - SIGABRT 错误和应用程序崩溃

> ID：10652574
> 
> 赞同：0
> 
> 时间：2012-05-18T12:22:41.700
> 
> 标签：iphone

这是我的代码`SIGABRT error`

```
p3=@"0123456789";
[password appendFormat: @"%C", [p3 characterAtIndex: arc4random() % [p3 length]]]; 
```

如何解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T12:49:16.383

当随机数为0时，索引为字符串长度，超出限制。所以只需少用一个长度作为`index = arc4random() % ([str length]-1;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T12:42:47.997

```
p3=@"0123456789";
[password appendFormat: @"%C", [p3 characterAtIndex: arc4random() % ([p3 length]-1])]; 
```

似乎您超出了索引数组的范围，从 0 开始。添加 -1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T12:50:23.763

尝试这个 ：

```
 NSString *p3=@"0123456789"; 
    int t = arc4random() % [p3 length];
    NSLog(@"%@",[p3 substringWithRange:NSMakeRange(t, 1)]);

    NSMutableString * password = [[NSMutableString alloc] init];
    [password appendFormat:[NSString stringWithFormat:@"%@",[p3 substringWithRange:NSMakeRange(t, 1)]]]; 
```

# java - 以编程方式使用 ImageJ 查找边缘

> ID：10652578
> 
> 赞同：2
> 
> 时间：2012-05-18T12:23:07.583
> 
> 标签：java, edge-detection, imagej

我想使用**ImageJ**的 find edges 选项，拥有 edges-found 数组并以编程方式将其保存到另一个文件中。

```
ImagePlus ip1 = IJ.openImage("myimage.jpg");
ImageProcessor ip = new ColorProcessor(ip1.getWidth(), ip1.getHeight());
ip.findEdges(); 
```

但是，函数**findEdges**是抽象的，我无法获得边缘找到的图像。

**编辑：**

我写了以下几行：

```
ip.findEdges();
BufferedImage bimg = ip.getBufferedImage(); 
```

但是，当我尝试打印 BufferedImage 的 RGB 值时，它只为每个像素 RGB 打印“-16777216”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T12:46:57.947

好的，我得到了解决方案，问题是我没有将 ColorProcessor 与图像连接起来。

```
ColorProcessor ip = new ColorProcessor(ImageIO.read(new File("my_image.jpg")));
ip.findEdges();
BufferedImage bimg = ip.getBufferedImage(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T12:32:24.143

ImageProcessor 是一个抽象类，它让派生类提供适当的实现。您需要声明`ip`为 type `ColorProcessor`：

```
ColorProcessor ip = new ColorProcessor(ip1.getWidth(), ip1.getHeight()); 
ip.findEdges(); 
```

# php - 仅允许某些用户访问某些文件夹/文件

> ID：10652591
> 
> 赞同：5
> 
> 时间：2012-05-18T12:23:51.310
> 
> 标签：php, apache, .htaccess, permissions, web

我有一个 Weblication，它只向某些用户提供对某些页面的访问。现在这些页面上链接了一些文件。如果有人有 URL，每个人都可以访问这些文件（在这种情况下是搜索引擎）。这应该改变！如何保护这样的目录？我想到了两种可能：

*   htaccess：每次创建新用户时输入用户名+密码->不适合该类型的项目（还需要第二次登录）
*   download.php?file=xxx: 不知道如何在 Weblication 中的所有链接（静态页面）中包含这样一个

还有其他可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T10:04:03.830

[从此链接](http://dev4.weblication.de/wDev/knowledgebase/articles/20040609_artikel_persausgabe_modrewrite.php)获取并翻译（但仅在[WaybackMachine](https://web.archive.org/web/20140301134309/http://dev4.weblication.de/wDev/knowledgebase/articles/20040609_artikel_persausgabe_modrewrite.php)中可用）。

# 借助 mod_rewrite 进行个性化输出

借助功能`wCheckPermissionViewFile`php 文件可以个性化。在文件头中执行权限检查以抑制输出就足够了。如果需要个性化其他文件类型（例如 ZIP、PDF、...），`wPermission.cgi`或者可以使用自定义 php 文件。

`wPermission.cgi`为了在每个指向二进制文件的个性化链接之前为编辑器节省一些编写工作，`mod_rewrite`可以使用 Apache 模块。有了这个，可以在执行之前转换每个访问的链接。例如，您可以`wPermission.cgi`在每个网络服务器调用之前定义它。直接执行也可以在 php 文件的帮助下重定向（没有`wPermission.cgi`必要）。

## `.htaccess`通过 Perl ( `wPermission.cgi`)检查的文件示例

```
#Alle Dateien mit angegebener Endung über wPermission.cgi aufrufen.
RewriteEngine on
RewriteCond %{REQUEST_URI} .pdf$ [NC,OR]
RewriteCond %{REQUEST_URI} .doc$ [NC,OR]
RewriteCond %{REQUEST_URI} .xls$ [NC,OR]
RewriteCond %{REQUEST_URI} .ppt$ [NC,OR]
RewriteCond %{REQUEST_URI} .pps$ [NC,OR]
RewriteCond %{REQUEST_URI} .zip$ [NC,OR]
RewriteCond %{REQUEST_URI} .jpg$ [NC,OR]
RewriteCond %{REQUEST_URI} .jpeg$ [NC,OR]
RewriteCond %{REQUEST_URI} .png$ [NC,OR]
RewriteCond %{REQUEST_URI} .gif$ [NC]
RewriteRule (.*) /cgi-bin/wPermission.cgi?file=/de/dokumente/$1 
```

## `.htacces`通过 PHP 进行检查的文件示例（例如*download.php*，见下文）

```
#Alle Dateien mit angegebener Endung über die angegebene PHP-Datei aufrufen.
RewriteEngine on
RewriteCond %{REQUEST_URI} .pdf$ [NC,OR]
RewriteCond %{REQUEST_URI} .doc$ [NC,OR]
RewriteCond %{REQUEST_URI} .xls$ [NC,OR]
RewriteCond %{REQUEST_URI} .ppt$ [NC,OR]
RewriteCond %{REQUEST_URI} .pps$ [NC,OR]
RewriteCond %{REQUEST_URI} .zip$ [NC,OR]
RewriteCond %{REQUEST_URI} .jpg$ [NC,OR]
RewriteCond %{REQUEST_URI} .jpeg$ [NC,OR]
RewriteCond %{REQUEST_URI} .png$ [NC,OR]
RewriteCond %{REQUEST_URI} .gif$ [NC]
RewriteRule (.*) /de/download.php?path=/de/dokumente/$1 
```

## 解释

如果您想在`/de/dokumente`不更改链接的情况下个性化目录中的所有 PDF 和 ZIP 文件，您可以将`.htaccess`文件放入该目录。在这个文件中定义了重定向规则。

规则可以用任意文件扩展名进行扩展，`NC`代表*不区分大小写*。请注意，这些规则也会继承到子目录中。

二进制文件本身必须签入并提供相应的个性化设置。

如果您想检查文件是否处于有效的发布时间段（例如在线或离线），请在通过 PHP API 进行权限检查之前进行检查`wIsOnline`。

### 示例：*download.php*用于实现“`.htacces`通过 PHP 检查的文件（例如*download.php*）”

```
<?php

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
// Dieses Skript erzwingt den Download von Dokumenten. PDF, DOC, XLS und PPT Dokumente werden je nach Browser angezeigt.
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

// Einlesen der Weblication(r) 4.x API:
require_once ($_SERVER["DOCUMENT_ROOT"]."/weblication/lib/WAPI/WAPI.inc");

$filenameRel = str_replace("..", "", $_GET['path']);
$filename    = $_SERVER['DOCUMENT_ROOT'].$filenameRel;

if(preg_match("/\.\w+$/", $filename) && !preg_match("/\.(php|php5|php4|xml|xsl|cgi|pl)$/", $filename) && !preg_match("/\/weblication\//", $filename) &&  file_exists( $filename ) ){
  if(wCheckPermissionViewFile($filenameRel) == 1){
    header("Pragma: no-cache");
    header("Expires: 0");
    header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
    header("Cache-Control: private", false);
    if(preg_match("/\.pdf/i", $filenameRel)){
      header("Content-Type: application/pdf");
    }
    else if(preg_match("/\.doc/i", $filenameRel)){
      header("Content-Type: application/msword");
    }
    else if(preg_match("/\.xls/i", $filenameRel)){
      header("Content-Type: application/msexcel");
    }
    else if(preg_match("/\.ppt/i", $filenameRel)){
      header("Content-Type: application/mspowerpoint");
    }
    else if(preg_match("/\.pps/i", $filenameRel)){
      header("Content-Type: application/mspowerpoint");
    }
    else if(preg_match("/\.jpg/i", $filenameRel)){
      header("Content-Type: image/jpg");
    }
    else if(preg_match("/\.jpeg/i", $filenameRel)){
      header("Content-Type: image/jpeg");
    }
    else if(preg_match("/\.png/i", $filenameRel)){
      header("Content-Type: image/png");
    }
    else if(preg_match("/\.gif/i", $filenameRel)){
      header("Content-Type: image/gif");
    }
    else{
      header("Content-Type: application/force-download");
      header("Content-Disposition: attachment; filename=\"".basename($filename)."\";" );
      header("Content-Transfer-Encoding: binary");
      header("Content-Length: ".filesize($filename));
    }
    readfile($filename);
  }
  else{
    print "Permission Denied!";
  }
}
else {
  print 'Sorry, wrong path or file does not exist on the server!';
  print '<br/><a href="javascript:history.back();">back</a>';
}
exit;

?> 
```

对于`Weblication` [此链接](https://dev.weblication.de/dev/blog/download-von-sensiblen-daten-sicher-umsetzen.php)的较新版本可能会有所帮助。它是德语，因为制造商的主要语言是德语。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T13:19:26.230

您可以将所有文件存储在***非公共***目录中，然后编写一个页面（就像您使用 download.php?file=xxx 所说的那样）检查用户是否有权访问该文件，然后输出到浏览器。

***编辑：***

当您使用 CMS 时，我会假设用户有一个不错的 GUI，他们可以单击以选择他们希望插入/链接到的文件？如果是这种情况，您可能会找到它用于创建链接的代码，然后`http://www.whatever.com/download.php?file=`添加到文件名中，然后通过您的脚本路由下载。

# javascript - event.target 没有给出想要的输出

> ID：10652592
> 
> 赞同：4
> 
> 时间：2012-05-18T12:23:52.387
> 
> 标签：javascript, jquery, html

我的代码是

```
<div id="hello">
<div>A</div></div>
<script>
$(function(){
$(document).mousedown(function(event){alert(event.target.id);});
});</script> 
```

现在，当我单击 div id“hello”时，它会提示 null，因为它正在获取中心 div 的 id，但我想要外部 div 的 id。如何实现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T12:28:19.327

因为目标是最里面的 div

[试试这个](http://jsfiddle.net/fPtSS/)：

```
event.target.parentNode.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T12:29:06.207

尝试稍微更改您的代码：

```
<div id="hello">
<div>A</div></div>
<script>

$(function(){
    //You can change the selector to what suits you best here
    $("body>div").mousedown(function(event){alert(event.currentTarget.id);});

    //it is safer to use currentTarget when you have nested elements
});</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T12:27:05.933

采用`event.target.parentNode.id`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T12:29:31.470

您应该将事件绑定到您感兴趣的 div。在您的情况下，您应该将其绑定到`$('#hello')`

如果您有多个 div 想要绑定该事件，请向它们添加一个类，并将 mousedown 事件绑定到该类，并在您的回调函数中检查 event.target 的 id。

# c - 在循环中运行的程序意外终止

> ID：10652601
> 
> 赞同：2
> 
> 时间：2012-05-18T12:24:20.653
> 
> 标签：c, linux, ubuntu-11.10

这是我用来执行 shell 命令的清理代码。
虽然`isExit`总是 0 并且循环应该运行，只要它是`!isExit`，我的程序在一个循环后终止，命令`ls`作为要执行的参数。
有谁有想法吗？输出正常（ls），但随后程序终止。代码是在 Eclipse 上用 C 语言编写的。
在 Ubuntu 12 上运行，该 Ubuntu 12 在 Windows 7 上的 VM 上运行。

```
int main() {
    int numberOfCommands, numOfWords, i, isExit = 0, isBackGround = 0, isSucces;
    char input[256];
    char *cmdAndArgs[256];
    char *commands[256];
do{
    // gets and parses user command...
    ExecuteCmd(cmdAndArgs);
    } while (!isExit);
    return EXIT_SUCCESS;
}

void ExecuteCmd(char *cmdAndArgs[]){
    pid_t pid;
    pid = fork();
    if (pid != 0) {
        execvp(cmdAndArgs[0], cmdAndArgs);
        exit(0);
    } else {
        waitpid(pid, &status, 0);
    } 
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-18T12:33:39.003

您正在父进程中运行 execvp，而不是在子进程中。逻辑：

```
pid_t pid;
pid = fork();
if (pid != 0) {
    execvp(cmdAndArgs[0], cmdAndArgs);
    exit(0);
} else {
    waitpid(pid, &status, 0);
} 
```

应反转为：

```
pid_t pid;
pid = fork();
if (pid == 0) { /* Child */
    execvp(cmdAndArgs[0], cmdAndArgs);
    exit(0);
} else if (pid == -1) {
    perror("fork");
} else {
    waitpid(pid, &status, 0);
} 
```

来自的返回码`fork()`是：`-1`== fork failed（用于`errno`确定原因）。`0`==我是孩子。`> 0`== 我是家长。请参阅返回值部分下的[fork 参考。](http://pubs.opengroup.org/onlinepubs/009695399/functions/fork.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T12:27:41.433

是否有可能出现缓冲区溢出`// gets and parses user command...`？如果你写超出了分配的空间，你最终可能会覆盖`isExit`

# android - 如何创建显示我项目的所有活动的自定义主页按钮？

> ID：10652604
> 
> 赞同：-1
> 
> 时间：2012-05-18T12:24:29.213
> 
> 标签：android, android-homebutton

![在此处输入图像描述](../Images/d8b58bd1a7fa8fe46dc42a1d4a976cc8.png)

如何创建为我的项目的所有活动显示的主页按钮的图片类型。我有 4 或 5 个活动。

我想单击该按钮返回主窗口。请给我代码

首先如何创建主页按钮

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T14:44:36.937

[操作栏](http://developer.android.com/design/patterns/actionbar.html)和仪表板可能更适合您尝试执行的操作，或者仅使用选项菜单。在 youtube 上查看[“Google I/O 2010 - Android UI 设计模式” 。](http://www.youtube.com/watch?v=M1ZBjlCRfz0)这将帮助您提出更清晰的问题。Motodev Studio 将帮助您开始学习视频中的内容（但我个人不喜欢生成的代码）。

如果在观看了上面的视频之后，您仍然想要像屏幕截图一样的主页按钮，您可能会使用相对布局，其中布局包含或片段与底部对齐，包含或片段包含图像按钮。

实际上，上述两种方法都需要类似的代码，但操作栏*很酷*。

# c# - 用不同的键值解析 Json 数组

> ID：10652607
> 
> 赞同：0
> 
> 时间：2012-05-18T12:24:33.297
> 
> 标签：c#, json

在我的一个项目中，我想解析一个具有不同键名的 JSON 数组。例如

```
{ "details": [ 
    { "state": "myState1",
      "place": [
        { "name": "placeName" } ] },
    { "state": "myState2",
      "place": [
        { "name1": "placeName" } ] },
    { "state": "myState3", 
      "place": [
        { "name2": "placeName" } ] } } 
```

所以在这个 JSON 中，请查看 place 数组。每个时间键都像 name1,name2,name3..., 。而且没有必要一直获取相同的 JSON。在某些时候只有 state1 或 state1 和 state3，在某些时候 state1 到状态 50。

那么我如何识别和解析这个数组中的确切数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T15:51:21.813

首先，您的 JSON 格式不正确。您在最后一个右大括号之前错过了一个`]`右方括号`}`。

然后，您不能将变量名属性解析为静态类，但可以将它们转换为字典。下面是一个使用 variable 的映射类示例`places`：

```
public class Details
{
    public string state { get; set; }
    public List<Dictionary<string, string>> place { get; set; }
}
public class Wrap
{
    public Details[] details { get; set; }
}

static void Main(string[] args)
{
    string txt = File.ReadAllText("MyJSONFile.txt");
    JavaScriptSerializer ser = new JavaScriptSerializer();
    var data = ser.Deserialize<Wrap>(txt);
} 
```

如果`place`属性也会更改名称，我认为解析它的最简单方法是使用以下类型非常松散的类：

```
public class Wrap
{
   public List<Dictionary<string,object>> details { get; set; }
} 
```

根据 JSON 中的值，字典中的对象将是字符串或属性字典。

# visual-studio-2010 - 我怎样才能避免让两个不同部分的行交替出现？

> ID：10652611
> 
> 赞同：0
> 
> 时间：2012-05-18T12:24:50.420
> 
> 标签：visual-studio-2010, crystal-reports

首先，我真的是 Cystal Reports 的新手，所以请耐心等待。

所以，我必须显示两个独立的列表，一个在另一个之下。为了做到这一点，我设法插入了两个细节部分，它们都具有来自不同命令的属性。

![](../Images/f659e694479108d540ed3758a44cda34.png)

但是预览并没有显示我所期望的......

![在此处输入图像描述](../Images/3fa73fdd3a51ec5b34c1535f1c66b363.png)

正如您从突出显示的行中看到的那样，两个列表都是混合的，这不是我想要的。

谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T12:37:47.020

这是水晶报表的默认行为。分别在详细部分添加两个链接的子报告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T12:36:17.653

如果要显示两个未链接的数据集，最好的选择是使用 (a) 子报表。

在主报告中放置一个命令以返回您可以在详细部分显示的第一个数据集。

将带有第二个命令的子报表放置在报表页脚部分之一中（在子报表中，您可以将数据集字段放置在详细信息部分中）。

# android - 没有图形更改我们可以翻转图像以供左右使用吗

> ID：10652613
> 
> 赞同：0
> 
> 时间：2012-05-18T12:24:54.850
> 
> 标签：android, android-layout, graphics

我有一张朝左的图像。

我希望该图像面向正确的方向。

我们可以在没有任何图形更改的情况下做到这一点。

通过动画还是其他方式？

我不想通过 Photoshop 来增加我的应用程序大小。

![在此处输入图像描述](../Images/21852682228526fbc3129ac56500c4ca.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T12:44:59.367

您要做的是使用[此方法](http://developer.android.com/reference/android/graphics/Bitmap.html#createBitmap%28android.graphics.Bitmap,%20int,%20int,%20int,%20int,%20android.graphics.Matrix,%20boolean%29)创建一个新的位图，其矩阵可以翻转您的原始位图，例如这个：

```
| -1 0 0 |
|  0 1 0 |
|  0 0 1 | 
```

这是执行此操作的代码：

```
final Matrix m = new Matrix();
m.setValues(new float[] { -1, 0, 0, 0, 1, 0, 0, 0, 1});
final Bitmap normalBitmap = BitmapFactory.decodeResource(context.getResources(), R.drawable.arrow);
final Bitmap flippedBitmap = Bitmap.createBitmap(normalBitmap, 0, 0, normalBitmap.getWidth(), normalBitmap.getHeight(), m, true); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T12:32:42.607

你可以通过 CSS 做到这一点

```
img
{
transform:rotate(7deg);
-ms-transform:rotate(7deg); /* IE 9 */
-moz-transform:rotate(7deg); /* Firefox */
-webkit-transform:rotate(7deg); /* Safari and Chrome */
-o-transform:rotate(7deg); /* Opera */
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T12:38:12.973

```
<set xmlns:android="http://schemas.android.com/apk/res/android"
         android:shareInterpolator="false">
      <translate
       android:fromXDelta="100%" android:toXDelta="0%"
       android:fromYDelta="0%" android:toYDelta="0%"
       android:duration="700" />
    </set> 
```

将此 xml 编码设置为从右向左移动以查看图像希望这会对您有所帮助

# ios - 设置 ViewController 的 managedObjectContext

> ID：10652615
> 
> 赞同：3
> 
> 时间：2012-05-18T12:25:03.027
> 
> 标签：ios, core-data

我正在使用 CoreData 并设置了`NSManagedObjectContext`in`AppDelegate`文件。

我需要在导航树中的许多级别的 ViewController 中获取 managedObjectContext。显然，我不想将它传递给所有的 init 方法。

我已经尝试过`[[[UIApplication sharedApplication] delegate] managedObjectContext];`，但我收到此错误“**选择器'managedObjectContext'没有已知的实例方法**”

有人可以指导我如何获取 managedObjectContext吗`AppDelegate`？`ViewContoller`

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-18T12:44:33.437

首先，您需要创建一个属性，`AppDelegate.h`如下所示：

```
@property (nonatomic, retain, readonly) NSManagedObjectContext *managedObjectContext; // or strong if you ARC instead of retain 
```

使用`readonly`防止您在外部修改上下文。

在`AppDelegate.m`合成它像：

```
@synthesize managedObjectContext; 
```

始终在`AppDelegate.m`覆盖 getter 方法之内

```
- (NSManagedObjectContext *)managedObjectContext
{    
    if (managedObjectContext != nil) return managedObjectContext;

    NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];
    if (coordinator != nil) {

        managedObjectContext = [[NSManagedObjectContext alloc] init];
        [managedObjectContext setPersistentStoreCoordinator:coordinator];
    }
    return managedObjectContext;
} 
```

完成后，您将拥有一个`managedObjectContext`可以在任何地方访问的属性

```
AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
NSManagedObjectContext* context = appDelegate.managedObjectContext; 
```

一种更酷的方法可能是在您的类中创建一个类方法，`AppDelegate.h`如下所示：

```
+ (AppDelegate *)sharedAppDelegate; 
```

然后`AppDelegate.m`执行以下操作：

```
+ (AppDelegate *)sharedAppDelegate
{
    return (AppDelegate *)[[UIApplication sharedApplication] delegate];
} 
```

现在，在导入`AppDelegate`标题 ( `#import "AppDelegate.h"`) 之前，您可以在任何地方执行以下操作：

```
AppDelegate* appDelegate = [AppDelegate sharedAppDelegate];
NSManagedObjectContext* context = appDelegate.managedObjectContext; 
```

## **笔记**

使用这种方法会导致您的应用程序变得僵化。为了克服这个问题，我建议您阅读Marcus Zarra[的有关在 iPhone 上传递 nsmanagedobjectcontext 的文章。](http://www.cimgf.com/2011/01/07/passing-around-a-nsmanagedobjectcontext-on-the-iphone/)

希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T12:41:58.710

您需要将全局 sharedApplication 变量转换为您自己的应用程序的`AppDelegate`类。这是一个例子：

```
AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];            
// Now you can access appDelegate.managedObjectContext; 
```

注意：您需要`#import "AppDelegate.h"`在使用此代码的 .m 文件中。

# sql - 如何在 Oracle 数据库上使用 LinqToSQL？

> ID：10652616
> 
> 赞同：0
> 
> 时间：2012-05-18T12:25:06.857
> 
> 标签：sql, linq, entity-framework, linq-to-sql

如何在 Oracle 数据库或 MySQL 数据库上使用 Linq to SQL，并且仍然获得与使用 SQL Server 相同的功能和性能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T12:46:19.380

阅读此[oracle ，您可以从此](http://www.datadirect.com/resources/ado-net/oracle-console/index.html)[linqtooracle](http://linqtooracle.codeplex.com/)获得相同的功能（与标准 LINQ）

# javascript - 在没有 JavaScript 的情况下更改表单操作目标

> ID：10652617
> 
> 赞同：4
> 
> 时间：2012-05-18T12:25:07.340
> 
> 标签：javascript, forms, select, dynamic, action

我有一个带有选择框的表格。启用 JavaScript 后，我​​使用*change*事件将选项值定义为 location.hrefs：

```
$('select').change(function(){
    window.location.href = $(this).val();
}); 
```

关闭 JavaScript 后，我​​有一个带有提交按钮的基本表单。要遵循选项值中给出的目标，我必须将它们设置为表单操作。您是否知道我如何才能将选定的选项作为表单目标，例如使用任何 CSS 选择器或类似的东西？

表格：

```
<form action="test-1.html">
    <fieldset>
    <select id="lorem">
       <option value="test-1.html">test1</option>
       <option value="test-2.html">test2</option>
       <option value="test-3.html">test3</option>
    </select>
    <input type="submit" value="senden" class="submit" />
    </fieldset>
 </form> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T12:27:47.880

您必须在服务器端代码中执行此操作。如果不启用 JavaScript，就无法动态更改 HTML DOM 中的任何内容。

因此，提交到某个中间页面，其唯一目的是重定向并在那里执行逻辑。

# iphone - 想要使用 json for ios5 获取对象数组

> ID：10652619
> 
> 赞同：-2
> 
> 时间：2012-05-18T12:25:09.170
> 
> 标签：iphone, objective-c

我搜索了完整的谷歌搜索。但没有找到答案。我在从 json 结果解析对象数组时遇到问题。我有这样的json结果：

> [{"created_at":"Sat Apr 28 13:36:24 +0000 2012", "text":"@LisaPrejean 爱你的工作！做得很好！", "source":"web","user":{ "id":478983313,"name":"3rd Dimension Media", "created_at":"Mon Jan 30 21:51:20 +0000 2012","favourites_count":0}, "retweet_count":0}]

＆从结果中我只想提取“created_at”和“text”

> *   (void)connectionDidFinishLoading:(NSURLConnection *)connection {
>     NSString *jsonString = [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding]; NSLog(@"%@", jsonString); self.jsonData = nil;
>     
>     
>     
>     ```
>     NSArray *tweetArray = [jsonString JSONValue]; 
>      tweetTextArray = [NSMutableArray array];
>     for (NSDictionary *tweet in tweetArray) 
>     ```
>     
>     
>     
>     { [tweetTextArray addObject:[tweet objectForKey:@"text"]]; [tweetCreated_atArray addObject:[tweet objectForKey:@"created_at"]]; } }

但在线出现 EXC_bad_access 错误： NSArray *tweetArray = [jsonString JSONValue];

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-18T12:38:06.840

尝试这个

```
NSString *responseString = [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding]; 
SBJSON *parser = [[SBJSON alloc] init];
NSDictionary *data = (NSDictionary *) [parser objectWithString:responseString error:nil];
NSString *text = (NSString *) [data objectForKey:@"text"];
NSLog(@"textvalue= %@",text);
NSString * created_at = (NSString *) [data objectForKey:@"created_at"];
NSLog(@"created_at= %@",created_at); 
```

# asp.net - UrlRewriting.Net 即使进行简单的重写也无法正常工作

> ID：10652620
> 
> 赞同：1
> 
> 时间：2012-05-18T12:25:20.810
> 
> 标签：asp.net, c#-4.0, iis-7, url-rewriting, iis-6

我想使用[UrlRewriteNet](http://urlrewriting.net/160/en/documentation.html)模块进行 URL 重写。

虽然我已经添加了所有必需的配置设置，但即使是简单的重写，似乎也没有采取任何行动。

网络配置：

```
<configuration>
    <configSections>
        <!-- URL Rewriting.NET -->
        <section name="urlrewritingnet"
            restartOnExternalChanges="true"
            requirePermission="false"
            type="UrlRewritingNet.Configuration.UrlRewriteSection, UrlRewritingNet.UrlRewriter" />
    </configSections>
    <system.web>
        <httpModules>
            <add name="UrlRewriteModule" type="UrlRewritingNet.Web.UrlRewriteModule, UrlRewritingNet.UrlRewriter"/>
        </httpModules>
    </system.web>
    <system.webServer>
        <modules runAllManagedModulesForAllRequests="true">
            <remove name="UrlRewriteModule"/>
            <add name="UrlRewriteModule" type="UrlRewritingNet.Web.UrlRewriteModule, UrlRewritingNet.UrlRewriter" />
        </modules>
    </system.webServer>
    <urlrewritingnet
        xmlns="http://www.urlrewriting.net/schema/config/2006/07">
        <rewrites>
            <add name="GeneralRewrite"
                virtualUrl="^~/Default.aspx"
                rewriteUrlParameter="ExcludeFromClientQueryString"
                destinationUrl="~/MyDefault.aspx"
                ignoreCase="true"
            />
        </rewrites>
    </urlrewritingnet>
</configuration> 
```

据我了解，只需将 Deafault.aspx 页面重写为 MyDefault.aspx，就不需要更多了。所以我希望我的 URL 从[https://server.address/Project.SiteName/Default.aspx](https://server.address/Project.SiteName/Default.aspx)简单地变成[https://server.address/Project.SiteName/MyDefault.aspx](https://server.address/Project.SiteName/MyDefault.aspx)。

我在本地 IIS 7 Windows 7 开发电脑中使用开发，但发布生产服务器将是 IIS 6，这就是为什么我将这两种配置都包含在 web.config 中的原因。

不幸的是，在没有任何原因的错误的情况下，检查 IIS 并看到该模块已在“模块”部分注册，但引擎从未运行！

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T07:13:39.120

按照以下方式进行上述操作

```
 <configuration>
     <configSections>
     <section name="urlrewritingnet"
     restartOnExternalChanges="true"
     requirePermission ="false"
     type="UrlRewritingNet.Configuration.UrlRewriteSection,
     UrlRewritingNet.UrlRewriter" />
     </configSections>
 </configuration> 
```

然后是重写部分来重写 url

```
 <urlrewritingnet>
   <rewrites> 
```

您要重写的网址将映射到此处.....

```
 </rewrites>
   </urlrewritingnet> 
```

最后需要 http 模块来监听请求。

```
<system.web>
  <httpModules>
  <add name="UrlRewriteModule"
  type="UrlRewritingNet.Web.UrlRewriteModule, UrlRewritingNet.UrlRewriter" />
  </httpModules>
</system.web> 
```

除此之外，无需在 web.config 中进行任何配置，只需引用智能感知的 dll（强制）和 .xsd 文件即可 [http://blog.vizioz.com/2009/11/add-intellisense-when-using-url.html](http://blog.vizioz.com/2009/11/add-intellisense-when-using-url.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-18T08:25:19.487

打开 Web.config 并添加模块

```
<configuration>
<system.webserver> 

<modules>

<add name="UrlRewriteModule" type="UrlRewritingNet.Web.UrlRewriteModule, UrlRewritingNet.UrlRewriter"/>
<remove name="Session"/>
<add name="Session" type="System.Web.SessionState.SessionStateModule"/>

</modules>

</system.webServer>
</configuration> 
```

# regex - .htaccess rewriterule 围绕 url 交换

> ID：10652622
> 
> 赞同：1
> 
> 时间：2012-05-18T12:25:23.703
> 
> 标签：regex, .htaccess, mod-rewrite, rewrite

试图 htaccess 重写 old-url-part/qwerty/999-yuiop ...to... new-url-part/yuiop-999/qwerty

```
RewriteRule ^old-url-part/(.*)/([0-9]+)-(.*)/?$ /new-url-part/$3-$2/$1/ [R=301,L] 
```

以下部分工作正常，但在上面的行中挣扎

```
RewriteRule ^old-url-part/?$ /new-url-part/ [R=301,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T13:28:01.583

这是您需要的规则：

```
RewriteRule ^old-url-part/([^/]+)/([^/]+)/?$ new-url-part/$2/$1/ [R=301,L,NC] 
```

# android - 确定 Android 权限级别

> ID：10652623
> 
> 赞同：7
> 
> 时间：2012-05-18T12:25:30.857
> 
> 标签：android, permissions, android-permissions

我有一些 Android 权限，我想知道它们属于哪个权限保护级别。有人知道如何检查吗？例如，我需要知道`android.permission.RECEIVE_BOOT_COMPLETED`权限的保护级别，但我想检查更多。

**编辑：**

我看到我没有说清楚：我的意思不是引入权限的API级别，而是权限保护级别，四个之一：Normal，Dangerous，Signeture，Signature或System。例如，它确定在应用程序安装期间如何将此权限呈现给用户。如何检查某个权限属于哪个保护级别？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-18T02:53:38.123

可以在此处的最新源中找到具有相关保护级别的默认权限列表：

[https://github.com/android/platform_frameworks_base/blob/master/core/res/AndroidManifest.xml](https://github.com/android/platform_frameworks_base/blob/master/core/res/AndroidManifest.xml)

例子：

```
<permission android:name="android.permission.INTERNET"
    android:permissionGroup="android.permission-group.NETWORK"
    android:protectionLevel="dangerous"
    android:description="@string/permdesc_createNetworkSockets"
    android:label="@string/permlab_createNetworkSockets" /> 
```

请记住，OEM 可以更改它们。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-10T03:34:37.453

```
getPackageManager().getPermissionInfo(name,  0).protectionLevel 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T12:50:14.447

在[此链接](http://developer.android.com/reference/android/Manifest.permission.html)中，您可以看到 android 的所有权限。您在此处标记的级别：

![](../Images/60395bf6e1cff0a7b5c93826d672d233.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T12:44:09.553

对于`Android-Permission`..

*   为了强制执行权限，系统的各个部分调用权限验证机制来检查给定应用程序是否具有指定的权限。权限验证机制作为可信系统进程的一部分实现，权限验证机制的调用遍布整个 API。调用 API 时没有用于检查权限的集中策略。相反，调解取决于权限验证调用的正确放置。

    ![在此处输入图像描述](../Images/72fda8174bcaf9c65b84923e6464c8da.png)

*   **权限检查放在系统进程中的 API 实现中。**必要时，API 实现会调用权限验证机制来检查调用应用程序是否具有必要的权限。在某些情况下，API 库也可能会冗余检查这些权限，但不能依赖此类检查：应用程序可以通过 RPC 存根直接与系统进程通信来绕过它们。因此，API 库中不应进行权限检查。相反，系统进程中的 API 实现应该调用权限验证机制。

也只需通过此文档了解更多信息[Android-Permission](http://www.cs.berkeley.edu/~afelt/android_permissions.pdf)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-23T23:54:32.673

[您可以在权限文档](http://developer.android.com/reference/android/Manifest.permission.html)中找到保护级别

[![安卓网站](../Images/09794318547f794eeeedb5bf36878587.png)](https://i.stack.imgur.com/tZ825.png)

# iphone - 高分提交到游戏中心不起作用

> ID：10652624
> 
> 赞同：3
> 
> 时间：2012-05-18T12:25:31.667
> 
> 标签：iphone, ipad, game-center

我正在做一个基于数学的ios应用程序..我已经完成了将高分上传到游戏中心的代码..但这不起作用..它总是显示0作为高分..这是我的代码...

```
[[GKLocalPlayer localPlayer]authenticateWithCompletionHandler:^(NSError *error)
      {
            if (error ==nil) 
            {
                 CCLOG(@"Success");
            } else 
            {
                 CCLOG(@"Fail");
            }
       }];

.
.
.
.
.

-(void)showLeaderboard
{   
    if( ! gameCenterViewController_ )
        gameCenterViewController_ = [[GameCenterViewController alloc] init];

    [gameCenterViewController_ showLeaderboard];
}

-(void)submitMyScore1:(int)score1
{
    CCLOG(@"submitMyScore1--%d",score1);
    //This is the same category id you set in your itunes connect GameCenter LeaderBoard
    GKScore *myScoreValue = [[[GKScore alloc] initWithCategory:@"bigwizlist"] autorelease]; 
    myScoreValue.value = score1;

    [myScoreValue reportScoreWithCompletionHandler:^(NSError *error){
        if(error != nil)
        {
            CCLOG(@"Score Submission Failed");
        } else
        {
            CCLOG(@"Score Submitted");
        }

    }];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T19:37:38.073

我认为您需要为您的方法使用**int64_t**！我使用这种方法，它工作得很好:-)

```
-(void)submitScore:(int64_t)score category:(NSString*)category{

GKScore *gkScore = [[[GKScore alloc]initWithCategory:category]autorelease];
gkScore.value = score;

[gkScore reportScoreWithCompletionHandler:^(NSError* error)
 {
     [self setLastError:error];
     bool sucess = (error == nil);
     [delegate onScoresSubmitted:sucess];

 }];
} 
```

问候

安瑟伦

# html - 通过 CSS / CSS :before 和 :after 装饰 DIV 并使用整个页面宽度

> ID：10652625
> 
> 赞同：3
> 
> 时间：2012-05-18T12:25:34.937
> 
> 标签：html, css

我正在写一个看起来像代码一样的页面

```
<div class="green">  
  <span class="orange">s1</span>
  <span class="orange">s2</span>
</div> 
```

但这应该通过 CSS 格式化，例如： ![布局说明](../Images/8209deb946b42fb5282e985712a493e4.png)

*   周围的黑框显示浏览器中的整个页面。（想想`<body></body>`）
*   红框是固定宽度和固定高度基本上是空白空间，应该由 CSS 添加`.green:before`（我正在使用它的能力来格式化它的边框以获得视觉效果）
*   绿框显示真实内容，应尽可能宽以将两者包含`<span>`在一行中
*   蓝色框架应该由 CSS 创建`.green:after`，具有固定的高度，并且应该占据页面右边框之前的所有空间 - 即它必须具有可变宽度。

所需的浏览器是最新版本中的现代浏览器（Firefox、Chrome、Safari、Opera）。无需照顾IE。不过，移动浏览器会很棒。

我怎样才能做到这一点？（我所有的尝试迟早都会失败......）

带有此示例代码的 jsFiddle 位于[http://jsfiddle.net/X2MDG/](http://jsfiddle.net/X2MDG/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T14:43:22.300

恐怕没有办法满足你*所有*的限制。似乎没有 CSS 解决方案的主要事情是：

*   `:before`在不影响红色和蓝色`:after`内容的宽度的情况下，无法仅控制绿色位的宽度。正如您在问题的评论中提到的那样，使用不同的 DOM 结构不是一种选择。
*   蓝色 ( `:after`) 内容应占用绿色（主要）内容不需要的所有空间。
*   红色/蓝色的固定高度可能需要清除整个 div 下方的元素。

因此，据我所知，您提出的问题并没有 100% 令人满意的答案。无论哪种方式，这是我研究这个问题的代码，也许它可以帮助你或其他人在这个问题上绊倒。请参阅[此 jsfiddle](http://jsfiddle.net/pLZDH/)或以下代码：

```
<div id="page">
    <div class="green">
        <span>Orange 1.</span>
        <span>Orange 2\. Which can be really wide.</span>
    </div>
    <p style="clear: both;">Black is the page. Clearing is
            needed because the red and blue boxes are not in the 
            flow but do have quite some height.</p>
</div> 
```

CSS：

```
div#page { 
    border: 2px solid black;
    width: 80%;
    padding: 2px;
}

div.green:before {
    content: 'red / before';
    border: 2px solid red;
    float: left;
    display: inline-block;
    width: 140px;
    height: 200px;
}

div.green {
    border: 2px solid green;
}

div.green:after {
    content: 'blue / after';
    border: 2px solid blue;
    display: inline-block;
    float: right;
    height: 60px;
}

div.green span {
    border: 2px solid orange;
} 
```

# c# - SNIReadSync 需要很长时间

> ID：10652629
> 
> 赞同：1
> 
> 时间：2012-05-18T12:25:41.653
> 
> 标签：c#, sql-server

我们推迟了我们的申请。数据库在 300 毫秒内响应，然后总响应时间为 6.4 秒。SNIReadSync 方法花费了 6.1 秒。我完全理解链接中关于缓存计划的评论：[Ado.net 性能：SNIReadSync 做什么？](https://stackoverflow.com/questions/2354346/ado-net-performancewhat-does-snireadsync-do). 我不明白的是，如果缓存计划是错误的，不应该在数据库上花费更多时间。

在这里，将数据从数据库读取到应用服务器需要时间。

# postgresql - 选择使用“current_date”作为标准？

> ID：10652633
> 
> 赞同：0
> 
> 时间：2012-05-18T12:25:57.230
> 
> 标签：postgresql

如果我一直在记录带有时间戳的数据。如何查询今天的数据？类似于此示例的内容。

```
SELECT * FROM table WHERE recorded_time = current_date; 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T12:28:30.507

```
DATE_TRUNC('day', recorded_time) = CURRENT_DATE 
```

应该这样做。

# objective-c - CoreData 序列化 NSDate 转换回真实日期

> ID：10652634
> 
> 赞同：0
> 
> 时间：2012-05-18T12:26:06.987
> 
> 标签：objective-c, ios, date, nsdate

我使用 CoreData 来存储我从服务器获取的对象。

我在某处发生了故障，无法弄清楚出了什么问题。但看起来它与存储在 CoreData 数据库中的日期有关。所以我打开了 sqllite 数据库并尝试比较日期，但因为它们对我来说不是人类可读的，有没有办法将序列化的 NSDate 转换回人类可读的日期？（例如年月日）

我在 CoreData 数据库中有以下日期。如何将它们转换回人类可读的日期格式？在线转换会很棒，因为很难为此编写一个应用程序。

![coredata 数据库值](../Images/ea3ff9b5bb78bd348042d95962879851.png)

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T12:34:56.920

它们只是自间隔参考日期以来的时间戳。这是您可以用来解码它们的代码：

```
NSNumber *time = [NSNumber numberWithDouble:(d - 3600)];
NSTimeInterval interval = [time doubleValue];    
NSDate *online = [NSDate dateWithTimeIntervalSinceReferenceDate:interval];
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"MM/dd/yyyy HH:mm:ss.SSS"];

NSLog(@"result: %@", [dateFormatter stringFromDate:online]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T12:37:51.740

为什么不直接使用 NSLog 来查看代码实际运行的日期呢？运行您的 fetch 查询，然后在调试器中输出日期：

```
NSDate *myDate; // This is whatever you fetched from your database.

// Show myDate in the debug console.
NSString *output = [NSDateFormatter localizedStringFromDate:myDate
                                                  dateStyle:NSDateFormatterMediumStyle 
                                                  timeStyle:NSDateFormatterMediumStyle];
NSLog(@"%@", output); 
```

# php - 查询不给出空记录

> ID：10652637
> 
> 赞同：1
> 
> 时间：2012-05-18T12:26:13.547
> 
> 标签：php, mysql, wordpress

我有这个非常简单的查询。我无法弄清楚为什么我的查询没有返回空记录。

```
SELECT table1.name, table2.name 
FROM table 
LEFT OUTER JOIN table2 
ON table1.id = table2.id 
WHERE table1.someid='2' 
AND table2.someid=2 
ORDER BY table1.order 
```

我还尝试使用 LEFT JOIN、JOIN、INNER JOIN、FULL OUTER JOIN 给出错误。

这个简单的查询返回所有必需的值。

```
SELECT table1.name 
FROM table 
WHERE table1.someid='2' 
ORDER BY table1.order 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T12:32:37.513

无论您在 where 子句中放置什么，都将强制结果集从受影响的表中返回行。

在您的情况下，您要求 table2.someid=2，这对于 mysql 意味着 table2 必须返回一行，有或没有左连接。

解决方案：在左连接中使用此过滤器而不是 where 子句

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T12:36:17.377

您需要弄清楚您要在哪个表中搜索“2”。使用您的两个子句，您基本上将其转换为 INNER JOIN 查询。您需要搜索一个表或另一个。

有道理？

* * *

```
SELECT
    table1.name,
    table2.name
FROM
    table
LEFT JOIN
    table2
    ON table1.id = table2.id
WHERE
    table1.someid = '2'

-- This clause is basically turning this query into an inner join.
-- AND
--     table2.someid = 2

ORDER BY
    table1.order 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T13:06:58.533

你的语法错误...

检查这个小提琴：[http ://sqlfiddle.com/#!2/c368d/1](http://sqlfiddle.com/#!2/c368d/1)

我已经为你写了这个，也许它会有所帮助。

```
SELECT table1.name, table2.cute 
FROM table1 INNER JOIN table2 ON table1.id_table1 = table2.id_table1
ORDER BY table1.name 
```

# c# - wpf中的ItemsPanelTemplate选择器？

> ID：10652639
> 
> 赞同：8
> 
> 时间：2012-05-18T12:26:20.037
> 
> 标签：c#, wpf

我需要根据控件上的依赖属性设置列表框的 ItemsPanelTemplate 属性。如何使用 DataTemplateSelector 来做到这一点？

我有类似的东西：

```
<ListBox.ItemsPanel>
    <ItemsPanelTemplate>
        <!-- Here I need to replace with either a StackPanel or a wrap panel-->
    </ItemsPanelTemplate>
</ListBox.ItemsPanel> 
```

谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-18T13:28:36.917

没有`ItemsPanelSelector`（可能是因为它不是`DataTemplate`），但您可以绑定它或使用`Trigger`

*`Binding`例子*

```
<ListBox ItemsPanel="{Binding RelativeSource={RelativeSource Self},
                              Path=Background,
                              Converter={StaticResource MyItemsPanelConverter}}"> 
```

*`Trigger``Style`例如_*

```
<ListBox ItemsSource="{Binding Source={x:Static Fonts.SystemFontFamilies}}">
    <ListBox.Style>
        <Style TargetType="ListBox">
            <Setter Property="ItemsPanel">
                <Setter.Value>
                    <ItemsPanelTemplate>
                        <StackPanel/>
                    </ItemsPanelTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <!-- Your Trigger.. -->
                <Trigger Property="Background" Value="Green">
                    <Setter Property="ItemsPanel">
                        <Setter.Value>
                            <ItemsPanelTemplate>
                                <WrapPanel/>
                            </ItemsPanelTemplate>
                        </Setter.Value>
                    </Setter>
                </Trigger>
            </Style.Triggers>
        </Style>
    </ListBox.Style>
</ListBox> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T13:28:04.727

我认为这里最好的方法是为您的 ListBox 使用 Style 并设置触发器，根据您引用的 DependencyProperty 更改 ItemsPanel。

# html - 我可以“预生成”我的“动态”网站的所有可能的静态 html 页面吗？

> ID：10652654
> 
> 赞同：0
> 
> 时间：2012-05-18T12:27:23.797
> 
> 标签：html, ruby-on-rails, search-engine, generator, static-html

一些网站，例如[http://www.idealo.co.uk](http://www.idealo.co.uk)似乎只提供服务`static html`，尽管它们的内容是动态的。

例如，如果我浏览某个类别，我会得到一个`static html`页面链接：

[http://www.idealo.co.uk/cat/5666/electric-guitars.html](http://www.idealo.co.uk/cat/5666/electric-guitars.html)

现在，如果我应用自定义过滤器，我会再次获得指向以下内容的链接`static html`：

[http://www.idealo.co.uk/cat/5666F456496-735760-1502100/electric-guitars.html](http://www.idealo.co.uk/cat/5666F456496-735760-1502100/electric-guitars.html)

这是如何实现的？是否有任何框架可以帮助“预生成”所有可能的动态页面，这样只要给出新的输入，页面就已经存在（即`static html`已经可用）？

背景：我们运行一个小型的房地产报价搜索引擎。**我们的抓取工具**每天更新一次优惠（内容全天都是静态的）。内容可在 Ruby-on-Rails 网站上搜索。随着流量的增加，性能正在成为一个问题。我想知道是否有任何框架/工具可以批量生成我们所有的搜索，以便我们可以提供`static html`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T12:30:13.150

他们的网站不是动态的。他们正在使用 URL 重写（例如`mod_rewrite`）将输入的 URL 转换为脚本可以满足的请求。

例如：

```
/cat/5666/electric-guitars.html 
```

可能改写为：

```
/cat.php?id=5666 
```

测试这个的一个快速技巧是去`/cat/5666/foo.html`

在这种情况下，使用`.html`可能是为了隐藏在他们的网站上使用了什么样的脚本，作为一种通过隐蔽的弱安全措施。

针对您的问题 - 不，没有（简单的）方法可以将所有可能的结果生成到静态 HTML 文件中。您正在查看潜在的数十亿个排列。如果您遇到性能问题，请查看性能分析、缓存、查询优化等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T13:10:17.290

从某种意义上说，您所描述的是缓存。通过缓存，您的应用程序将仅在其内容发生更改时生成页面（甚至部分页面）。Rails 内置了很多缓存功能，您可以对其进行调整以满足您的需求。首先阅读[关于缓存的 Rails 指南，](http://guides.rubyonrails.org/caching_with_rails.html)该指南描述了 Rails 的功能以及常见的附加组件。谷歌搜索“Rails 3 缓存”——那里有大量信息。最后，您可以将软件添加到执行额外缓存的服务器堆栈，例如 Squid 和 Varnish。使用正确的工具（和研究），您可以获得静态网站 95% 的好处，而无需手动将您的网站变成准静态的 Frankenapp。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-17T09:21:54.557

我终于找到[了这篇博文](http://stevelosh.com/blog/2010/01/moving-from-django-to-hyde/)，其中指出了一些可以满足我需求的工具。我在这里添加它只是为了将来参考：

## [海德](http://github.com/lakshmivyas/hyde/)

*“Hyde 是一个由 Python 和 Django 提供支持的静态网站生成器。Hyde 支持所有 Django 模板标签和过滤器，甚至还有一些自己的。内置的 Web 服务器 + 自动生成器提供即时刷新和无限的灵活性...... "*

## [杰基尔](http://jekyllrb.com/)

*“Jekyll 是一个简单的、支持博客的、静态站点生成器。它采用包含各种格式的原始文本文件的模板目录，通过 Markdown（或 Textile）和 Liquid 转换器运行它，并吐出一个完整的、准备发布的适合与您最喜欢的网络服务器一起服务的静态网站..."*

## [布拉特](https://bitbucket.org/jek/blatter/)

*“Blatter 是一个小型工具，用于创建和发布由动态模板构建的静态网站……”*

# activerecord - 组件数据库查询 (Yii)

> ID：10652665
> 
> 赞同：0
> 
> 时间：2012-05-18T12:27:50.137
> 
> 标签：activerecord, yii, components

我将首先描述我最初的问题 - 我有一些站点全局变量（例如我是否在线/离线，商品的价格等）。我想知道如何最好地存储/检索这些需要它们在大多数页面上。

最后，经过一些指导，我选择将它们存储在数据库中并创建一个组件类（在 Yii 中）以从任何地方访问它们：例如 `echo Yii::app()->variables->price`

我是 Yii 的新手，我一直在四处寻找，但找不到如何正确地将数据库（AR 样式）连接与组件连接。到目前为止，我已经创建了一个模型类和带有列的数据库`'id', 'name', 'value'`

只是为了掌握它，我正在编写一个方法：`getTestValue()`在我的组件类中，但我只是不知道如何`test`使用 Yii 的 ActiveRecord 检索带有名称的行。有人可以指出我正确的方向吗？:)

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T12:38:31.930

这应该有效：

```
function getTestValue(){
  $myvalobj = YourModelClass::model()->findByAttributes(array('name'=>'test'));
  if($myvalobj!==null)
     return $myvalobj->value;
  return null;
} 
```

# java - Java 可以在循环中优化“变异”BigInteger 操作吗？

> ID：10652673
> 
> 赞同：10
> 
> 时间：2012-05-18T12:28:41.630
> 
> 标签：java

我需要处理很多比 long (>10^200) 大得多的大数字，所以我使用 BigIntegers。我执行的最常见操作是将它们添加到累加器中，例如：

```
BigInteger A = new BigInteger("0");
for(BigInteger n : nums) {
    A = A.add(n);
} 
```

当然，为破坏性操作制作副本是一种浪费（好吧，只要有足够大的缓冲区可用），所以我想知道 Java 是否可以以某种方式优化它（我听说有一个 MutableBigInteger 类没有被 math.java 公开）或者我是否应该编写自己的 BigInteger 类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T13:44:38.930

是的，有一个`java.math.MutableBigInteger`类`BigInteger`用于计算密集型操作。不幸的是，它被声明为包私有，所以你不能使用它。Apache Commons 库中还有一个“MutableBigInteger”类，但它只是 BigInteger 的可变包装器，对您没有帮助。

> 我想知道Java是否可以以某种方式优化它......

不...不能承受上述情况。

> 或者我是否应该编写自己的 BigInteger 类。

这是一种方法。

另一种是下载 OpenJDK 源代码，找到 的源代码`java.math.MutableBigInteger`，更改其包名称和访问权限，并将其合并到您的代码库中。唯一的障碍是 OpenJDK 在 GPL（我认为是 GPL-2）下获得许可，如果您曾经使用修改后的类分发代码，这会产生影响。

也可以看看：

*   [java.math.MutableBigInteger 的目的是什么？](https://stackoverflow.com/questions/890968/what-is-the-purpose-of-java-math-mutablebiginteger)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T09:43:57.050

一个更快的解决方案是绕过 java 包的可见性。您可以通过在自己的项目中创建一个名为 java.math 的包并创建一个公开包 private MutableBigInteger 的公共类来做到这一点，如下所示：

```
package java.math;

public class PublicMutableBigInteger extends MutableBigInteger {

} 
```

然后你可以导入 java.math.PublicMutableBigInteger; 并将其用作任何其他类。此解决方案快速且不会强加给您任何特定的许可。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-19T10:19:46.893

编译器能做的不多，因为它不知道`add`方法做了什么。这是循环体的生成代码。如您所见，它只是调用`add`并存储结果。

```
 25:  iload   5
   27:  iload   4
   29:  if_icmpge       51
   32:  aload_3
   33:  iload   5
   35:  aaload
   36:  astore  6
   38:  aload_1
   39:  aload   6
   41:  invokevirtual   #5; //Method java/math/BigInteger.add:(Ljava/math/BigInteger;)Ljava/math/BigInteger;
   44:  astore_1
   45:  iinc    5, 1
   48:  goto    25 
```

理论上，Java 虚拟机运行时系统可以更聪明。例如，它可以检测到一个对象不断地覆盖另一个刚刚分配的对象，并为它们交换两个分配缓冲区。但是，正如我们在启用垃圾收集日志记录的情况下运行以下程序所看到的那样，遗憾的是情况并非如此

```
import java.math.BigInteger;
import java.util.ArrayList;
import java.util.Random;

class Test {
    public static void main(String[] args) {
    ArrayList <BigInteger> nums = new ArrayList<BigInteger>();
    final int NBITS = 100;
    final int NVALS = 1000000;

    System.out.println("Filling ArrayList");
    Random r = new Random();
    for (int i = 0; i < NVALS; i++)
        nums.add(new BigInteger(NBITS, r));

    System.out.println("Adding ArrayList values");
    BigInteger A = new BigInteger("0");
    for(BigInteger n : nums) {
        A = A.add(n);
    }

    System.gc();
    }
} 
```

在添加过程中查看垃圾收集调用。

```
C:\tmp>java -verbose:gc Test
Filling ArrayList
[GC 16256K->10471K(62336K), 0.0257655 secs]
[GC 26727K->21107K(78592K), 0.0304749 secs]
[GC 53619K->42090K(78592K), 0.0567912 secs]
[Full GC 42090K->42090K(122304K), 0.1019642 secs]
[GC 74602K->65857K(141760K), 0.0601406 secs]
[Full GC 65857K->65853K(182144K), 0.1485418 secs]
Adding ArrayList values
[GC 117821K->77213K(195200K), 0.0381312 secs]
[GC 112746K->77245K(228288K), 0.0111372 secs]
[Full GC 77245K->137K(228288K), 0.0327287 secs]

C:\tmp>java -version
java version "1.6.0_25"
Java(TM) SE Runtime Environment (build 1.6.0_25-b06)
Java HotSpot(TM) 64-Bit Server VM (build 20.0-b11, mixed mode) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T10:28:56.233

Java 不会针对这种情况做任何特殊的优化。BigInteger 通常被视为与任何其他类一样的普通类（例如，与 String 不同，当您连接许多字符串时，它有时会得到一些特殊的优化）。

但在大多数情况下，BigInteger 足够快，无论如何都无关紧要。如果您真的认为这可能是一个问题，我建议您分析您的代码并找出需要时间的地方。

如果添加 BigIntegers 确实是您的瓶颈，那么使用自定义可变大整数类作为累加器*可能是有意义的。*但在您证明这确实是主要瓶颈之前，我不会这样做。

# c++ - 使用 std::sort 对 std::list 进行排序

> ID：10652674
> 
> 赞同：17
> 
> 时间：2012-05-18T12:28:41.740
> 
> 标签：c++, list, sorting, std

> **可能重复：**
> [使用 stl 排序函数对列表进行排序](https://stackoverflow.com/questions/2432857/sort-list-using-stl-sort-function)
> [为什么只有 std::list::sort()？](https://stackoverflow.com/questions/7996116/why-only-stdlistsort)

我的问题是我们可以使用 std::sort 函数对两个 std::lists 进行排序吗？我有 2 个字符串列表

```
 std::list<std::string>list1, list2;
  .....//entering values to list
  std::sort(list1.begin(), list1.end());

  std::sort(list2.begin(), list2.end()); 
```

当我对这些列表进行排序时，我遇到了错误。我尝试使用 std::vector，此时排序有效。

错误就像

> C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\xutility(1158) ：请参阅 'std::operator -' 1>C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC 的声明\include\algorithm(3642): error C2784: '_Base1::difference_type std::operator - (const std::_Revranit<_RanIt,_Base> &,const std::_Revranit<_RanIt2,_Base2> &)' : 不能用 1> [ 1> _Mylist=std::_List_val> 1> 从 'std::_List_iterator<_Mylist>' 1> 推导出 'const std::_Revranit<_RanIt,_Base> &' 的模板参数

我必须知道只有 std::sort 支持列表？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-05-18T12:30:27.817

您不能使用`std::sort`to sort `std::list`，因为`std::sort`要求迭代器是随机访问的，并且`std::list`迭代器只是双向的。

但是，`std::list`有一个成员函数`sort`可以对其进行排序：

```
list.sort();
// if you want to use a comparator different from the default one:
// list.sort(comparator); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-18T12:30:26.293

您应该使用`list::sort`，它可能使用不同的算法。`std::sort`需要随机访问迭代器（支持任意大小的跳转），而列表迭代器一次只能向前或向后移动一个链接。

参见 C++11 25.4.1.1：

```
template<class RandomAccessIterator> void sort(RandomAccessIterator first, 
         RandomAccessIterator last); 
```

和 23.3.5.5/27（成员`std::list`）：

```
void sort();
template <class Compare> void sort(Compare comp); 
```

# python - 用 scipy 的 fsolve 求解方程

> ID：10652675
> 
> 赞同：0
> 
> 时间：2012-05-18T12:28:47.073
> 
> 标签：python, scipy, nonlinear-functions

我正在尝试解方程`f(x) = x-sin(x) -n*t -m0`

在这个等式中，`n`和`m0`是属性，在我的班级中定义。此外，`t`是等式中的常数整数，但每次都必须更改。

我已经解决了这个方程，所以我得到了一个“新方程”。我已经导入了 scipy.optimize

```
def f(x, self):
    return (x - math.sin(x) -self.M0 - self.n*t)

def test(self,t):
    return fsolve(self.f, 1, args=(t)) 
```

有什么更正和建议可以让它发挥作用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T12:45:49.100

我至少可以看到两个问题：您混淆了 的参数顺序`f`，并且您没有提供对`f`的访问权限`t`。像这样的东西应该工作：

```
import math
from scipy.optimize import fsolve

class Fred(object):
    M0 = 5.0
    n = 5

    def f(self, x, t):
        return (x - math.sin(x) -self.M0 - self.n*t)

    def test(self, t):
        return fsolve(self.f, 1, args=(t)) 
```

[注意我是懒惰`M0`和`n`班员]

这使：

```
>>> fred = Fred()
>>> fred.test(10)
array([ 54.25204733])
>>> import numpy
>>> [fred.f(x, 10) for x in numpy.linspace(54, 55, 10)]
[-0.44121095114838482, -0.24158955381855662, -0.049951288133726734,
 0.13271070588400136, 0.30551399241764443, 0.46769772292130796, 
 0.61863201965219616, 0.75782574394219182, 0.88493255340251409, 
 0.99975517335862207] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T12:46:24.917

您需要`f()`像这样定义：

```
 def f(self, x, t):
    return (x - math.sin(x) - self.M0 - self.n * t) 
```

换句话说：

1.  `self`先到先得（总是如此）；
2.  然后是`x`;的当前值
3.  然后是你提供的论点`fsolve()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T12:32:42.687

您正在使用某种寻根算法。有几种常用的，所以知道哪一种会很有帮助。

你需要知道三件事：

1.  您正在使用的算法
2.  你正在寻找根源的方程
3.  您正在查找的初始猜测和范围

您需要知道某些组合可能没有任何根。

可视化感兴趣的功能可能会有所帮助。你有两个：一个线性函数和一个正弦函数。如果你要绘制这两者，哪组常数会给你交叉点？交点是您要寻找的根。

# google-maps - 我想调用 map.checkResize() 但我不知道我的代码在哪里调用它

> ID：10652676
> 
> 赞同：0
> 
> 时间：2012-05-18T12:28:58.053
> 
> 标签：google-maps

我想调用 map.checkResize(); // 但我不知道在我的代码（v2）中的哪个位置调用它，它是否在 Map obj 上？

**症状：**地图仅显示在 div 右下角显示 google 使用条款的 div 水平方向的 20-35%。

[http://www.polisphotos.com/jQueryPb/HFjQ-ch11-end/sightings-w-map.html](http://www.polisphotos.com/jQueryPb/HFjQ-ch11-end/sightings-w-map.html) // 结帐 // 这里没有服务器端代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T14:00:23.307

您的地图通过单击链接显示，该链接运行以下代码：

```
javascript:changeDisplay('givemap') 
```

这样做：

```
if (element.style.display == 'none')
{
element.style.display = 'block';
} 
```

将该行添加到该代码块中，以便*在*显示元素（从而更改其大小）后触发事件以使 API 使用新大小。

# eclipse - 我应该在我的新机器上使用 Eclipse 32 位还是 64 位？

> ID：10652677
> 
> 赞同：7
> 
> 时间：2012-05-18T12:29:04.437
> 
> 标签：eclipse, 32bit-64bit

这可能是一个愚蠢/幼稚的问题，如果是，请原谅:)

我有一台具有以下规格的全新机器：

*   英特尔酷睿 i7 2600@3.4GHz
*   内存 8 GB
*   Windows 7的

该机器具有 64 位架构。

在我以前的机器上，我曾经安装 32 位版本的 Eclipse 并使用 32 位 JRE 运行它，而我当前的 Eclipse 设置在新机器上完美运行。

我尝试安装 64 位版本的 Eclipse，并使用 64 位 JRE 运行它，我想知道是否有任何令人信服的理由来切换到这种设置或坚持我现有的安装。我想我必须重新安装所有插件，并且可能会发现其中一些与 64 位版本的 Eclipse 不兼容。

到目前为止，64 位版本似乎比 32 位版本需要更多的 RAM，这是我所预料的，但似乎没有任何改进。

谢谢你的建议！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T12:56:38.127

一般来说，我使用 64 位 Eclipse 没有问题，但插件可能会出现问题，例如：

*   Adobe Flash Builder 仅适用于 32 位
*   Subversion 插件 Subclipse 需要单独安装本机 64 位版本的 Subversion

可能还有更多，但这些是我过去遇到的。

迁移到 64 位可以让您访问更多可寻址内存，但它不会加快任何速度，事实上它可能会在某些情况下降低性能（但我认为这对我所做的没有什么意义）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T13:01:08.373

唯一可以改进的是您能够利用 64 位的优势。除此之外，我不知道有任何改进。

例如，64 位更好的是，如果您有一个非常大的项目集，您将能够更轻松地处理它。有关 64 位的更多信息，请查看[此处](http://www.google.ch/url?url=http://en.wikipedia.org/wiki/64-bit%23Pros_and_cons&rct=j&q=64bits+pros+cons&usg=AFQjCNFBUoh7E-gI8qFyuij-sjvXZ_g7rA&sa=X&ei=zEe2T8TTIJKo8QOSsYWTCg&ved=0CGIQygQwAQ&cad=rja)

如果您想走在技术的前沿，您的选择当然是 64 位设置。

关于 ram，这是意料之中的，因为一些数据类型现在使用 64 位，因此存储在内存中的容量更大。

对于大多数插件，您将获得 64 位版本或替代版本，到目前为止，对于我所使用的它一直有效。

# scala - 过滤 Scala 选项[Set]

> ID：10652683
> 
> 赞同：4
> 
> 时间：2012-05-18T12:29:22.983
> 
> 标签：scala, filtering, option

我有一个类型的 Scala 值`Option[Set[String]]`，我试图在收集`filter`方法中使用它：

```
val opt: Option[Set[String]] = ...

collection.filter {
  value =>
  opt match {
    case Some(set) => set.contains(value)
    case None => true
  }
} 
```

如果`opt`值为`Some(...)`我想使用封闭`Set`来过滤集合，否则我想包含集合中的所有项目。

是否有更好（更惯用）的方式来使用`Option`（`map`、、、`filter`等`getOrElse`）？

来自`opt`一个可选的命令行参数，其中包含要包含的术语列表。如果缺少命令行参数，则包括所有术语。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-18T12:35:54.377

`Set[A]`我会使用扩展`A => Boolean`并将常量函数返回`true`到的事实`getOrElse`：

```
val p: String => Boolean = opt.getOrElse(_ => true) 
```

或者：

```
val p = opt.getOrElse(Function.const(true) _) 
```

现在你可以只写`collection.filter(p)`. 如果您想要单线，以下任一方法也可以：

```
collection filter opt.getOrElse(_ => true)
collection filter opt.getOrElse(Function.const(true) _) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-18T13:12:41.427

过滤似乎有点浪费，`_ => true`所以我更喜欢

```
opt match {
  case Some(s) => collection filter s
  case None    => collection
} 
```

我想这相当于：

```
opt map (collection filter) getOrElse collection 
```

# java - Android 中的多点触控手势和图像

> ID：10652686
> 
> 赞同：0
> 
> 时间：2012-05-18T12:29:35.807
> 
> 标签：java, android, image, gallery

我需要在允许用户放大和缩小的视图中显示一个非常大的图像（例如 8000x8000）。

我已经检查了几个用于检测用户触摸并据此转换图像的选项。例如：

[如何在 Android 中使用多点触控](http://www.zdnet.com/blog/burnette/how-to-use-multi-touch-in-android-2-part-2-building-the-touch-example/1763?tag=content;siu-container)

以及其他使用手势/触摸检测器等的人。

问题是他们都不关心位图的大小和可能的崩溃，因为位图不适合内存。

所以我正在寻找的是如何像 Android 的 Gallery 那样实现它。放大图像时不会损失质量，当然也不会崩溃

有任何想法吗？根据答案的复杂性和质量，将获得最多 300 分的完整有效答案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T18:07:42.993

尝试仅显示位图的缩放子集并尽可能少地解码。我管理了类似的事情。这些是对我帮助很大的代码片段：

要计算您需要的所有值（例如比例因子、像素数等），您可以使用 inJustDecodeBounds 来获取位图的大小，而无需分配任何内存。：

```
BitmapFactory.Options opt = new BitmapFactory.Options();
opt.inJustDecodeBounds = true;
BitmapFactory.decodeFile(path, opt);
int width = opt.outWidth;
int height = opt.outHeight; 
```

要仅解码位图的子集，请使用以下命令：

```
Bitmap.createBitmap(
    source, 
    xCoordinateOfFirstPixel, 
    yCoordinateOfFirstPixel, 
    xNumberOfPixels, 
    yNumberOfPixels
); 
```

要创建缩放位图：

```
Bitmap.createScaledBitmap(
    source, 
    dstWidth, 
    dstHeight, 
    filter
); 
```

要绘制位图的子集：

```
Canvas.drawBitmap(
    source, 
    new Rect(
        subsetLeft, 
        subsetTop, 
        subsetRight, 
        subsetBottom
    ), 
    new Rect(0,0,dstWidth, dstHeight), 
        paint
); 
```

编辑：我忘了提到这个用于创建缩放图像的片段。为了节省内存，这就是您想要的：

```
BitmapFactory.Options opt = new BitmapFactory.Options();
options.inSampleSize = 2;
Bitmap scaledBitmap = BitmapFactory.decodeFile(path, opt); 
```

因为 inSampleSize 必须是一个整数，所以我使用 createScaledBitmap 来稍微调整位图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T12:37:56.677

[http://www.anddev.org/large_image_scrolling_using_low_level_touch_events-t11182.html](http://www.anddev.org/large_image_scrolling_using_low_level_touch_events-t11182.html)

可能吗？

网站目前已关闭，因此最终可能与您无关，但我认为我应该发布它。

还

" ZOOM CONTROL (Widget) 监听 OnTouch 事件来处理平移 "

最后：

[https://github.com/MikeOrtiz/TouchImageView](https://github.com/MikeOrtiz/TouchImageView)

据我所知，^^ 可能正是您正在寻找的 2.0+

失败了，一个webview并像这样加载文件。

# java - 如何在不使用 AlertDialog.Builder 的情况下使用 ListView 创建 AlertDialog？

> ID：10652688
> 
> 赞同：3
> 
> 时间：2012-05-18T12:29:49.813
> 
> 标签：java, android, android-listview, android-alertdialog

我有一个子类，`AlertDialog`它应该显示范围内所有可用 Wifi 网络的列表。

我希望对话框本身负责启动 Wifi 扫描并接收结果。

出于这个原因，我不能使用`AlertDialog.Builder`来设置`ListView`项目，因为在创建对话框时我还没有它们，它们可能会在演示过程中发生变化。

所以我要问的是如何使用内置支持`AlertDialog`来呈现单个选择列表，而不需要`AlertDialog.Builder`?

如果不可能，如何创建自己的 ListView 并将其设置为对话框的内容视图？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T12:43:59.763

见下面的代码：

```
public void show_alert() {
    // TODO Auto-generated method stub

    final Dialog dia = new Dialog(this);
    dia.setContentView(R.layout.alert);
    dia.setTitle("Select File to import");
    dia.setCancelable(true);

    list_alert = (ListView) dia.findViewById(R.id.alert_list);
    list_alert.setAdapter(new ArrayAdapter<String>(getApplicationContext(),
            android.R.layout.simple_list_item_1,
            main_genral_class.file_list));
    list_alert.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> arg0, View arg1, int pos,
                long arg3) {
            String fname = main_genral_class.file_list.get(pos);
            dia.dismiss();

        }
    });
    dia.show();
} 
```

布局文件名`alert.xml`

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/linearLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@+id/alert_list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >
    </ListView>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T12:44:20.167

你可以选择一个对话

```
 final Dialog _dialog1 = new Dialog(this);
  _dialog1.requestWindowFeature(Window.FEATURE_NO_TITLE);
   _dialog1.setContentView(R.layout.your_own_listView);

in setContentView() u can put ur own listView 
```

# c# - 需要 StatusStrip 从右到左填充其项目

> ID：10652691
> 
> 赞同：2
> 
> 时间：2012-05-18T12:29:54.597
> 
> 标签：c#, winforms

当我在表单中添加一个 StatusStrip 并开始在其中创建一些标签时，它们从 helf 到右显示，有没有办法可以在这个 statusstrip 内从右到左显示它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T12:51:16.413

尝试设置以下属性：

```
statusStrip1.RightToLeft = RightToLeft.Yes; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T12:32:58.530

将`Alignment`设计器中的属性从“左”设置为“右”。

# javascript - 如何在 Extjs4 中使用负载监听器

> ID：10652702
> 
> 赞同：0
> 
> 时间：2012-05-18T12:30:28.977
> 
> 标签：javascript, extjs

我正在学习如何利用加载事件..我如何去捕捉数据的加载..我只是举了一个示例..了解它是如何工作的以及如何在回调函数中操作数据

谢谢

```
store.addListener("load", dataLoadCallback);

function dataLoadCallBack((store, records, success))

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T12:43:45.713

```
store.on('load',/*event*/,dataLoadcallback /*function called*/, this/*scope called*/) 

function dataLoadBackCalled(store, records){ //dont stress about success just yet.
  store.each(function(record)){
      console.log(record.get('id');
  }
} 
```

这是一篇关于如何做听众的好帖子：http: [//mitchellsimoens.com/2011/12/ext-js-4/ext-define-and-listeners-as-a-property-bad/](http://mitchellsimoens.com/2011/12/ext-js-4/ext-define-and-listeners-as-a-property-bad/)

# ios - 对触摸反应良好

> ID：10652703
> 
> 赞同：0
> 
> 时间：2012-05-18T12:30:34.480
> 
> 标签：ios, cocoa-touch, audiounit, touchesbegan, glkit

我正在开发一个音乐应用程序，所以我真的不能批准任何延迟。

我正在使用心爱的 touchesBegan/Moved/Ended 来处理我的触摸。一切都很顺利，我设法合成了一个音调（使用 AudioUnit）并在手指下显示了一个发光（使用 GLKit），如果同时击中的音符/触摸少于 4-7 个，这一切都很好，然后它会发疯并使应用程序卡住。

我明白这是因为我正在做很多工作（使用 GLKit 界面和我为合成引擎制作的界面）并且我需要一种方法来修复它。

我的代码是这样构建的：

```
 - (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    for(UITouch *touch in touches)
    {
        CGPoint lePoint = [touch locationInView:self.view];

        doing some calculataions for synth engine.......
        actually making the sound avilable to play through the interface........

        then I start to create the sprite object for the glow
        attaching it to the nsarray of the shapes
        //rejoycing in the awesomness of the sound

        adding the touch to the active touches array

    }

} 
```

我在touchesEnded中做完全相反的事情。

因此，在我试图让它更好地工作时，我尝试将 GCD 用于 GLKit 的东西，这样它就可以异步发生，它起作用了，但有时我会看到屏幕上出现发光，因为它不在数组中时touchesEnded 试图删除它。

所以这没有用，我有点无能为力，如果有人能帮助我，我会很感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T22:51:43.950

使用 GCD，但请确保使用并发队列，以便可以同时提交所有触摸。如果您需要等待它们完成，请使用 dispatch_apply，否则只需异步启动它们。

一旦安排好一个块，你就不能取消它，所以你可能想检查一下触摸是否已经结束或取消，并让块立即返回。

例如，类似...

```
for (UITouch *touch in touches) {
    NSValue *key = [NSValue valueWithPointer:(__bridge void*)touch];
    MyData *data = [dictionary objectForKey:key];
    // set whatever attributes you want in the data for this touch
    // You may want to have a cancel flag in there, so you can set it later...
    CGPoint touchPoint = [touch locationInView:self.view];
    dispatch_async(someConcurrentQueue, ^{
        // If only one thing to do, check the flag at beginning, if it is a long task
        // may want to check it periodically so you cancel as soon as possible.
        if (data.touchHasEnded) return;
    }); 
```

另一种方法是每次触摸都有一个队列。您在 touchesBegan 中创建调度队列，然后将任务扔在上面。您可以让它们全部完成，或者也许其中一些应该在 touchesEnd 中取消。

例如，如果状态已经更改为其他状态，则处理中间的剩余触摸可能没有意义。

我已经像这样进行了线条平滑。

无论哪种方式，如果您正在进行密集处理，您应该让系统弄清楚如何管理它。只要确保您可以在适当的情况下终止您正在做的事情。

确保将状态标记为完成，并且在 touchesEnd 之后不处理任何其他内容...毕竟，您只是使用指针作为字典的键...

# php - 使用 php SoapClient “获取 http 正文时出错”

> ID：10652705
> 
> 赞同：4
> 
> 时间：2012-05-18T12:30:42.073
> 
> 标签：php, soap, soa

我在使用 Soap 将用户数据提交到服务器时遇到了一些问题。我得到的只是：
**获取http正文时出错，没有内容长度，连接关闭或分块数据** 我做错了什么吗？

```
$client = new SoapClient(APPPATH.'my.wsdl',array(
    'login' => 'user',
    'password' => 'pass',
    'location' => 'http://gimmeyadata.com/crm/regserv?wsdl',
    'trace' => true,
    )
);
$result = $client->register(array(
    'Email' => 'me@mail.com',
    'Gender' => 'm',
    'First name' => 'Oliver',
    'Last name' => 'Liermann',
    'Language code' => 'de-de',
)); 
```

最后一个响应头：HTTP/1.1 200 OK X-SiteConfidence: jenppb601 Content-Location: http:// ***。*** *****。*** /general/html/pages/layouts/columnContent.jsp 内容语言：de-DE 内容类型：text/html;charset=UTF-8 日期：2012 年 5 月 18 日星期五 15:50:01 GMT 传输编码：分块连接：保持活动连接：传输编码集 Cookie：JSESSIONID=0a6d28f530d798c4676f59494491a82035d98e25ff6f.e38Ka38Sax4TbO0MaheKbhaTbh8Te6fznA5Pp7ftolbGmkTy；path=/ 缓存控制：私有

最后一个请求标头：POST /html/de_DE/index_DE/index.html HTTP/1.1 主机：***.* ****。***连接：Keep-Alive 用户代理：PHP-SOAP/5.2.13 内容类型：text/xml；charset=utf-8 SOAPAction: "" Content-Length: 937 Authorization: Basic c3RyZ19ka29zaGF2ZTpsNFB3TVZqDlRhZUc1cg== Cookie: JSESSIONID=0a6e28e930d70301b8f6dd3e8a2598bff7cef065809a.e38Pa3mLbx4Oci0Mah4Qb34TbxmOe6fznA5Pp7etoltGmkTy;BIGipServerPirobase=254438666.20480.0000;

PHP版本：5.2.13

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-16T22:38:37.620

尝试使用 PHP 5.3

```
$client = new SoapClient("< some url  >", 
    array(
        'trace' => 1,
        'stream_context' => stream_context_create(
            array(
                'http' => array(
                    'protocol_version' => 1.0,
                ),
            )
        ),
    )
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-04T11:12:20.470

在 PHP 5.4.4 中，没有它就无法工作`Transfer-Encoding: chunked`：

```
$client = new SoapClient("< some url  >", 
    array(
        'trace' => 1,
        'stream_context' => stream_context_create(
            array(
                'http' => array(
                    'protocol_version' => 1.0,
                    'header' => "Transfer-Encoding: chunked\r\n",
                ),
            )
        ),
    )
); 
```

# jquery - jQuery 输入验证器和 asp:CustomValidator

> ID：10652706
> 
> 赞同：0
> 
> 时间：2012-05-18T12:30:53.180
> 
> 标签：jquery

我正在用 jquery 创建输入字段

```
var randomNum = Math.ceil(Math.random() * 99999);        
    $("<p class='" + randomNum + "'>First name: <input type='text'  name='kontaktFormaIme" + randomNum + "' class='required' id='kontaktFormaIme" + randomNum + "' maxlength='50' /></p>").appendTo(".kontakt");
    $("<p class='" + randomNum + "'>Last NameIme: <input type='text'  name='kontaktFormaPrezime" + randomNum + "' class='required' id='kontaktFormaPrezime" + randomNum + "'  /></p>").appendTo(".kontakt"); 
```

有了这个，我可以创造尽可能多的东西

什么是检查每个 ID 以“kontaktFormaIme”开头或具有“必需”类的简单方法

[这是一个很好的例子](https://stackoverflow.com/questions/1854556/how-to-check-if-inputs-are-empty-with-jquery)

但我不知道如何制作通用检查器，我尝试过类似的方法但它不起作用

```
function ValidateKontakt(source, args) {
    var isFormValid = true;
    $(".required input").each(function () {
        if ($.trim($(this).val()).length == 0) {                
            $(this).addClass("highlight");
            isFormValid = false;
        }
        else {
            $(this).removeClass("highlight");
        }
    });
    args.IsValid = isFormValid;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T12:46:05.440

您可以使用 jQuery startsWith 选择器选择 HTML 元素。

```
$("input[id^='kontaktFormaIme']") 
```

我可能对引号有误。请照顾好它...

# validation - 升级后 Grails 验证不起作用

> ID：10652708
> 
> 赞同：6
> 
> 时间：2012-05-18T12:31:16.347
> 
> 标签：validation, grails, constraints, grails-orm

我正在将我的 Grails 1.3.7 应用程序升级到 2.0.3，并且我已经修复了大部分问题。但是，我有用于创建用户并将其保存到数据库的代码。代码不应通过验证，因为我正在重用已使用的用户名并且用户名存在唯一约束。`.validate()`返回 true，但随后代码在`user.save()`调用 MySql 唯一约束错误时实际上会爆炸。

应该抛出一个错误：

```
def submitSignup = {
        def user = new User(params)

        user.validate()
        if (!user.hasErrors()) {
            ...
            // This line bombs with the MySql unique constraint I would have expected .validate() to get
            user.save()
        }
} 
```

在 User.groovy 中：

```
static constraints = {
    username(blank: false, unique: true);
    ...
} 
```

有任何想法吗？

编辑：我也在从 Acegi 升级到 Spring Security 插件。我认为这无关紧要，但我想我会提到它。

[我在https://github.com/skazzaks/Grails-Unique-Test](https://github.com/skazzaks/Grails-Unique-Test)上放置了一个遇到问题的示例， 这使它看起来绝对像一个错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T20:11:18.353

几天前，我在从 1.3.7 升级到 2.0.3 时遇到了类似的奇怪验证问题。

对我来说诀窍是手动清除我的目标目录。显然，重新编译所有类使应用程序重回正轨。

不知道它是否适用于您的情况，但可能值得一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T19:48:40.863

我相信这是一个错误，因为我的域类位于`src/groovy`.

# git - 推送子分支而不变基

> ID：10652710
> 
> 赞同：0
> 
> 时间：2012-05-18T12:31:17.980
> 
> 标签：git, rebase

假设我们有这个拓扑：

```
X--X--X--             origin/master
    \     
     \     
      \--X--X--X--             b1 (private - not to be shared)
             \
              \
               \--X--X--X--    b2 (to be shared upstream) 
```

我们只想分享 b2 而不是 b1，所以我们可以这样做：

```
git rebase --onto origin/master b1 b2
git push origin b2 
```

是否可以在不使用 rebase 和更改本地历史的情况下实现相同的目标？（推动 b2 没有 b1 提交）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T12:38:14.457

不，那是不可能的。有些`b1`提交在`b2`'s 的历史中，所以你必须重写历史来摆脱那些。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T14:58:31.517

它有助于不考虑单个文件，而是将提交对象视为一个整体。要进入 b2，您需要第二行中的一些提交对象。

```
A--B--C--                  master
    \
     \--D--E--F--          b1
            \
             \--G--H--I--  b2 
```

为了获得 I 提交，您需要所有提交对象 A、B、D、E、G、H、I。

因此，除非您从 B 中变基 G，否则您将无法排除 D、E 提交。

# c++ - WM_INPUT 有缺陷

> ID：10652713
> 
> 赞同：0
> 
> 时间：2012-05-18T12:31:36.563
> 
> 标签：c++, winapi, input, window

我想捕捉按键发送到我的窗口，以存储每个键的状态，并区分键的左右实例，例如`WM_LCONTROL`和`WM_RCONTROL`。

由于`WM_KEYUP/DOWN`不提供此功能，所以我转向原始输入，我需要处理`WM_INPUT`。

[问题是此处](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645575%28v=vs.85%29.aspx)`RAWKEYBOARD`描述的结构中的标志不能正常工作。

当我按下右控制键时，`RI_KEY_E0`设置为左键版本，当我按下左控制键时，既不设置`RI_KEY_E0`也不`RI_KEY_E1`设置。alt 键的性能类似，但我可以解决这个问题，因为左键仍然提供与右键不同的标志。

但是对于左右移位键，没有设置任何标志来区分左版本和右版本，所以我对它们无能为力。

到货时给出的虚拟键码`WM_INPUT`不区分左右键，`MapVirtualKey`在扫码上使用也不行。

原始输入的这种非正统行为是怎么回事？

一些代码：

注册：

```
RAWINPUTDEVICE rid;
rid.usUsagePage=0x01;
rid.usUsage=0x06;
rid.dwFlags=0; // I also tried RIDEV_APPKEYS,RIDEV_NOHOTKEYS,RIDEV_NOLEGACY, none fixed the problem
rid.hwndTarget=hwnd;
if(!RegisterRawInputDevices(&rid,1,sizeof(RAWINPUTDEVICE)))
    ExitError("Failed to register raw input device",true); //displays error and exits 
```

处理 WM_INPUT：

```
case WM_INPUT:
{    
    RAWINPUT rw;
    UINT sz=sizeof(rw);
    u_char vk; //used to make code shorter
    USHORT flag; //used to make code shorter

    if(!GetRawInputData((HRAWINPUT)lparam,RID_INPUT,&rw,&sz,sizeof(RAWINPUTHEADER)))
        break;

    vk=rw.data.keyboard.VKey;
    flag=rw.data.keyboard.Flags;

    ...Process flags and save the actual key pressed in vk...

    keys[vk]=!(flag&RI_KEY_BREAK); //save key's state
    break;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T12:42:00.823

`WM_KEYDOWN/-UP`确实提供了您想要的信息，您只需阅读 MSDN 中的说明。

检查 lParam 参数的第 24 位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T12:48:08.663

[`WM_KEYDOWN`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646280.aspx)并在按下任一控制键时[`WM_KEYUP`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646281.aspx)发送给您。要了解是否按下了右手控制键，请阅读[MSDN 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646280.aspx)中所述的第24 位。第 24 位是这样描述的：`VK_CONTROL``wParam``lParam`

> 指示键是否为扩展键，例如出现在增强的 101 或 102 键键盘上的右手 ALT 和 CTRL 键。如果是扩展键，则值为 1；否则为 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-20T16:19:00.070

RAWKEYBORAD 的文档是错误的。常量`RI_KEY_E0`和`RI_KEY_E1`不适用于键的*左*或*右*版本；相反，它们适用于扫描码扩展。

转储到的虚拟键值是`RAWKEYBOARD::VKey`指通用值，如`VK_SHIFT`、`VK_CONTROL`或`VK_MENU`。

为了纠正这个问题，可以使用`RAWKEYBOARD::VKey`和`RAWKEYBOARD::MakeCode`成员。不同的键以不同的方式区分不同的面：

*   对于 shift 键，使用`MapVirtualKey`和传递`RAWKEYBOARD::MakeCode`and`MAPVK_VSC_TO_VK_EX`作为参数重新分配，以及
*   对于基于`RI_KEY_E0`标志的 control 和 alt 键映射（`key.VKey = key.Flags & RI_KEY_E0 ? VK_RCONTROL : VK_LCONTROL`例如）。

您希望从数字键盘获得的值取决于您是否将 NUMLK 视为打开或关闭。

我和你有同样的困惑，我仍在学习键盘如何传输数据，但我发现[这篇关于](http://molecularmusings.wordpress.com/2011/09/05/properly-handling-keyboard-input/)*Molecular Musings*的博客文章特别有用。这种方法背后的原因可以在[这篇](https://stackoverflow.com/a/5920881/2379628)文章中找到。

# sql - 按周分组天数

> ID：10652716
> 
> 赞同：-3
> 
> 时间：2012-05-18T12:31:41.867
> 
> 标签：sql, sql-server, sql-server-2005

有没有办法在 SQL Server 中按月份对日期进行分组？

例如

```
Week 2: 05/07/2012 - 05/13/2012
Week 3: 05/14/2012 - 05/20/2012 
```

但使用 Sql server 语句

我试过了

```
SELECT SOMETHING, 
     datediff(wk, convert(varchar(6), getdate(), 112) + '01', getdate()) + 1 AS TIME_
FROM STATISTICS_
GROUP BY something, TIME_
ORDER BY TIME_ 
```

但它返回月份的周数。（表示 3）

如何获得本周的天数？

例如，现在我们在第三 (3rd) 周，**我想展示** `05/14/2012 - 05/20/2012`

我***以某种方式***解决了：

```
SELECT DATEADD(ww, DATEDIFF(ww,0,<my_column_name>), 0)

select DATEADD(ww, DATEDIFF(ww,0,<my_column_name>), 0)+6 
```

然后我会得到两天，稍后我会连接它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T13:31:25.533

好吧，在这里忍受我。我们将构建一个代表本月的临时日历表，包括该月之前和之后属于您定义的一周（星期一 - 星期日）的天数。我做了很多步骤来尝试使过程清晰，但在这种情况下我可能并不擅长这一点。

然后，我们可以生成不同周的范围，您可以使用它加入您的其他表格。

```
SET DATEFIRST 7;
SET NOCOUNT ON;

DECLARE @today SMALLDATETIME, @fd SMALLDATETIME, @rc INT;

SELECT @today = DATEADD(DAY, DATEDIFF(DAY, 0, GETDATE()), 0), -- today
    @fd = DATEADD(DAY, 1-DAY(@today), @today), -- first day of this month
    @rc = DATEPART(DAY, DATEADD(DAY, -1, DATEADD(MONTH, 1, @fd)));-- days in month

DECLARE @thismonth TABLE (
    [date]       SMALLDATETIME,
    [weekday]    TINYINT,
    [weeknumber] TINYINT 
);

;WITH n(d) AS (
    SELECT TOP (@rc+12) DATEADD(DAY, ROW_NUMBER() OVER 
    (ORDER BY [object_id]) - 7, @fd) FROM sys.all_objects
)
INSERT @thismonth([date], [weekday]) SELECT d, DATEPART(WEEKDAY, d) FROM n;

DELETE @thismonth WHERE [date] < (SELECT MIN([date]) FROM @thismonth WHERE [weekday] = 2)
                     OR [date] > (SELECT MAX([date]) FROM @thismonth WHERE [weekday] = 1);

;WITH x AS ( SELECT [date], weeknumber, rn = ((ROW_NUMBER() OVER 
   (ORDER BY [date])-1) / 7) + 1 FROM @thismonth ) UPDATE x SET weeknumber = rn; 
```

- 现在，给出所有这些的最终查询（我只是将其分解以摆脱垂直滚动条）：

```
;WITH ranges(w,s,e) AS (
    SELECT weeknumber, MIN([date]), MAX([date]) FROM @thismonth GROUP BY weeknumber
)
SELECT [week] = CONVERT(CHAR(10), r.s, 120) + ' - ' + CONVERT(CHAR(10), r.e, 120)

 --, SOMETHING , other columns from STATISTICS_?

 FROM ranges AS r

 -- LEFT OUTER JOIN dbo.STATISTICS_ AS s
 -- ON s.TIME_ >= r.s AND s.TIME_ < DATEADD(DAY, 1, r.e) 

 -- comment this out if you want all the weeks from this month: 
 WHERE w = (SELECT weeknumber FROM @thismonth WHERE [date] = @today)

 GROUP BY r.s, r.e --, SOMETHING
 ORDER BY [week]; 
```

带有 WHERE 子句的结果：

```
week
-----------------------
2012-05-14 - 2012-05-20 
```

没有 WHERE 子句的结果：

```
week
-----------------------
2012-04-30 - 2012-05-06
2012-05-07 - 2012-05-13
2012-05-14 - 2012-05-20
2012-05-21 - 2012-05-27
2012-05-28 - 2012-06-03 
```

请注意，我故意选择了 YYYY-MM-DD。您应该避免像 M/D/Y 这样的区域格式，尤其是对于输入和显示。无论您*认为*您的受众有多么有针对性，总会有人认为 2012 年 5 月 7 日是 7 月 5 日，而不是 5 月 7 日。使用 YYYY-MM-DD 没有任何歧义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T12:40:35.640

创建一个[日历表](https://stackoverflow.com/questions/2459260/calendar-table-week-number-of-month)，然后您可以查询周数、特定周和月的第一天/最后一天等。您还可以加入它查询以获取日期范围等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T12:38:41.177

案例陈述如何？

```
case when datepart(day, mydatetime) between 1 and 7 then 1
     when datepart(day, mydatetime) between 8 and 14 then 2
     ... 
```

除非您希望所有第 1 周都在同一组中，否则您还必须包括年份和月份。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T12:40:40.323

不清楚您是否要“按周对日期进行分组”，或者“从给定的一周中选择数据”

如果你的意思是“组”，这个小片段应该让你得到“每月的一周”：

```
SELECT   <stuff>
FROM     CP_STATISTICS
WHERE    Month(<YOUR DATE COL>) = 5 --april
GROUP BY  Year(<YOUR DATE COL>), 
          Month(<YOUR DATE COL>),
          DATEDIFF(week, DATEADD(MONTH, DATEDIFF(MONTH, 0, <YOUR DATE COL>), 0)
           , <YOUR DATE COL>) +1 
```

或者，如果您想要“4 月第 1 周的销售，按日期排序”，您可以执行类似的操作。

```
DECLARE @targetDate datetime2 = '5/3/2012'
DECLARE @targetWeek int = DATEDIFF(week, DATEADD(MONTH, 
                             DATEDIFF(MONTH, 0, @targetDate), 0), @targetDate) +1

SELECT   <stuff>
FROM     CP_STATISTICS
WHERE    MONTH(@targetDate) = Month(myDateCol) AND
         YEAR(@targetDate)  = Year (myDateCol) AND 
         @targetWeek = DATEDIFF(week, DATEADD(MONTH, 
                                DATEDIFF(MONTH, 0, myDateCol), 0), myDateCol) +1
ORDER BY myDateCol 
```

请注意，如果您使用非标准周数，或者想要跨月边界的周数进入前一个月的几天，事情会变得更加复杂。

**编辑 2**

通过查看您的“现在已解决”部分。我认为您的问题是“如何从给定一周的表格中获取数据？”

您的解决方案似乎是：

```
DECLARE @targetDate datetime2 = '5/1/2012'
DECLARE @startDate  datetime2 = DATEADD(ww, DATEDIFF(ww,0,targetDate), 0)
DECLARE @endDate    datetime2 = DATEADD(ww, DATEDIFF(ww,0,@now), 0)+6

SELECT  <stuff>
FROM    STATISTICS_
WHERE   dateStamp >= @startDate AND dateStamp <= @endDate 
```

请注意，如果日期是 5 月 1 日，则此解决方案会导致开始日期为“2012 年 4 月 30 日”。我指出这一点是因为您的解决方案跨越了月份的界限。这可能是可取的，也可能不是可取的。

# hibernate - Hibernate 集合映射

> ID：10652717
> 
> 赞同：0
> 
> 时间：2012-05-18T12:31:49.183
> 
> 标签：hibernate

我对 Hibernate 集合映射有点迷失。尝试在 Eclipse Hibernate 透视图中添加持久性配置会引发以下问题：

```
Invalid ORM mapping file.
Error parsing XML (line14 : column 16): The content of element type "list" must match "(meta*,subselect?,cache?,synchronize*,comment?,key,(index|list-index),(element|one-to-many|many-to-many|composite-element|many-to-any),loader?,sql-insert?,sql-update?,sql-delete?,sql-delete-all?,filter*)".
Error parsing XML (line17 : column 15): The content of element type "map" must match "(meta*,subselect?,cache?,synchronize*,comment?,key,(map-key|composite-map-key|map-key-many-to-many|index|composite-index|index-many-to-many|index-many-to-any),(element|one-to-many|many-to-many|composite-element|many-to-any),loader?,sql-insert?,sql-update?,sql-delete?,sql-delete-all?,filter*)". 
```

实际映射配置如下：

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping>
    <class name="core.Server" table="server" schema="imdb">
        <id name="serverId" type="java.lang.Integer">
            <column name="SERVER_ID" />
            <generator class="identity" />
        </id>   
        <list name="sessions" inverse="true">
            <key column="serverID" not-null="true"/>
            <list-index column="SERVER_SESSION_NUMBER" />           
            <one-to-many class="core.Session"/>
        </list> 
        <map name="users" inverse="true">
            <key column="serverID" not-null="true"/>
            <map-key type="string" column="SERVER_USER_NUMBER"/>
            <one-to-many class="core.User"/>
        </map>  
    </class>
</hibernate-mapping>

<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping>
    <class name="core.User" table="user" schema="imdb">
        <id name="userId" type="java.lang.Integer">
            <column name="USER_ID" />
            <generator class="identity" />
        </id>   
        <property name="login" column="LOGIN" type="string" />          
        <property name="online" column="ONLINE" type="boolean" />   
        <property name="last_message" column="LAST_MESSAGE" type="string" />  
        <property name="newmessage" column="NEW_MESSAGE" type="boolean" />  
        <many-to-one name="serverID" column="SERVER_ID" class="core.Server"/>
        <list name="sessions" inverse="true">
            <key column="USER_ID" not-null="true"/>
            <one-to-many class="core.Session"/>
            <list-index column="USER_SESSION_NUMBER" />
        </list>     
    </class>
</hibernate-mapping>

<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping>
    <class name="core.Session" table="session" schema="imdb">
        <id name="sessionID" type="java.lang.Integer">
            <column name="SESSION_ID" />
            <generator class="identity" />
        </id>   
        <many-to-one name="serverID" column="SERVER_ID" class="core.Server"/>
        <many-to-one name="userID" column="USER_ID" class="core.User/>
    </class>
</hibernate-mapping> 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T12:48:08.827

订单是特定的（并在错误消息中提供给您）。这不是一个休眠的东西，它是一个 XML 模式的东西。

所以让标签的顺序正确，例如： <list-index> 需要在 <one-to-many > 之前

编辑：并非所有表格都是错误的。第一个没问题。第二个有两个错误，应该是

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping>
    <class name="core.User" table="user" schema="imdb">
        <id name="userId" type="java.lang.Integer">
            <column name="USER_ID" />
            <generator class="identity" />
        </id>   
        <property name="login" column="LOGIN" type="string" />          
        <property name="online" column="ONLINE" type="boolean" />   
        <property name="last_message" column="LAST_MESSAGE" type="string" />  
        <property name="newmessage" column="NEW_MESSAGE" type="boolean" />  
        <list name="sessions" inverse="true">
            <key column="USER_ID" not-null="true"/>
            <list-index column="USER_SESSION_NUMBER" />
            <one-to-many class="core.Session"/>          
        </list>   
        <many-to-one name="serverID" column="SERVER_ID" class="core.Server"/>
    </class>
</hibernate-mapping> 
```

你的第三个是错误的，因为它在 class="core.User 之后缺少引号 - 应该是

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping>
    <class name="core.Session" table="session" schema="imdb">
        <id name="sessionID" type="java.lang.Integer">
            <column name="SESSION_ID" />
            <generator class="identity" />
        </id>   
        <many-to-one name="serverID" column="SERVER_ID" class="core.Server"/>
        <many-to-one name="userID" column="USER_ID" class="core.User"/>
     </class>
</hibernate-mapping> 
```

# visual-studio-2010 - 所有 Visual Studio 2010 vcprojects 都失败，没有错误代码

> ID：10652720
> 
> 赞同：0
> 
> 时间：2012-05-18T12:32:07.703
> 
> 标签：visual-studio-2010, build

有没有人经历过这个？突然之间，我所有的 C/C++ 项目都无法构建，并且没有显示错误代码。我最近没有安装任何新软件。我的 C-Sharp 项目仍在建设中。

有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T22:51:11.137

我找到了原因，以防其他人遇到同样的问题。它是 VMWare 集成调试器。我禁用了它，现在我的项目构建正常。

# jquery - 移除包装标签

> ID：10652722
> 
> 赞同：-6
> 
> 时间：2012-05-18T12:32:10.197
> 
> 标签：jquery, css

这是我的代码如何删除包装跨度标签（不要删除文本）

```
 <ul>
      <li>
        <a href="#">
        </a>
        <ul>
            <li>
                <a href="#">
                    <span>Removce wraper tag</span>
                </a>
            </li>
        </ul>
      <li>
    </ul> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T12:34:05.710

您可以为此使用 jQuery [`unwrap`](http://api.jquery.com/unwrap/)。只需使用任何可以识别`span`, 然后调用`unwrap`. 例如，如果您提供`span`一个 ID（这只是一个示例），那么：

```
$("#theid").unwrap(); 
```

[实例](http://jsbin.com/erozox)| [资源](http://jsbin.com/erozox/edit)

# iphone - 如何在 NSDictonary iOS 中存储 100 个 iPad CGImages

> ID：10652732
> 
> 赞同：0
> 
> 时间：2012-05-18T12:32:44.027
> 
> 标签：iphone, objective-c, cgimage

我有 100 个 iPad 图像，想将它们存储在字典中...如果我将它们存储在我的 NSMutable 字典应用程序中，则会崩溃..

示例代码是：

```
NSMutableDictionary *workingDictionary = [[NSMutableDictionary alloc] initWithCapacity:[_assets count]];
[workingDictionary setObject:@"JPEG" forKey:@"UIImagePickerControllerMediaType"];
[workingDictionary setObject:[UIImage imageWithCGImage:[[asset defaultRepresentation] fullScreenImage]] forKey:@"UIImagePickerControllerOriginalImage"];
[workingDictionary setObject:[[asset valueForProperty:ALAssetPropertyURLs] valueForKey:[[[asset valueForProperty:ALAssetPropertyURLs] allKeys] objectAtIndex:0]] forKey:@"UIImagePickerControllerReferenceURL"]; 
```

# c# - 查找两个 SQL 表之间的重复项

> ID：10652741
> 
> 赞同：0
> 
> 时间：2012-05-18T12:33:16.157
> 
> 标签：c#, asp.net, sql, select, duplicates

我有两个具有相同主键的表（Table1 和 Table2），比如说 Key1 和 Key2。我需要做的是将 Table1 中的记录分成两组，重复项（在 Table2 中找到的记录）和非重复项。我知道我可以使用以下内容，但这似乎臃肿且重复。有没有更简洁的方法可以做到这一点，可能只需要一个电话？

```
SELECT Key1, Key2 FROM Table1 WHERE Key1 IN (SELECT Key1 FROM Table2) AND Key2 IN (SELECT Key2 FROM Table2);
SELECT Key1, Key2 FROM Table1 WHERE Key1 NOT IN (SELECT Key1 FROM Table2) AND Key2 NOT IN (SELECT Key2 FROM Table2); 
```

;

此调用是从 C# ASP.NET 代码隐藏页面进行的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T12:37:59.400

此查询执行左外连接以确保返回 table1 中的所有记录。它在 Table2 上连接，如果没有匹配项，则 Table2 中的任何列对于该行都将为 NULL。在 CASE 语句中使用此行为来设置一个标志，告知 Table1 行是否存在于 Table2 中：

```
select t1.*,
    case when t2.Key1 is null then 'false' else 'true' end as IsDuplicate
from Table1 t1
left outer join Table2 t2 on t1.Key1 = t2.Key1
    and t1.Key2 = t2.Key2 
```

然后，您可以根据该`IsDuplicate`列在您的应用程序中进行过滤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T12:40:49.870

检查 SQL2008 中新的 upsert 语句 SQL2008 中的 [Upsert](http://www.databasejournal.com/features/mssql/article.php/3739131/UPSERT-Functionality-in-SQL-Server-2008.htm)

# javascript - 直接通过 nodejs 上的 .js AKA javascript 文件安装模块

> ID：10652742
> 
> 赞同：0
> 
> 时间：2012-05-18T12:33:23.963
> 
> 标签：javascript, node.js, module

我正在尝试在我的 nodejs 上安装一个模块。

我研究了安装模块的教程，但只能通过命令提示符找到简单的安装方法。

我需要安装以下模块：[https](https://gist.github.com/1510680) ://gist.github.com/1510680 （它们是 javascript 文件）。但是作为我对节点的新手，我不知道该怎么做。

我一直在寻找很长一段时间，如果有人能提供一个非常外行的指南，我真的很感激，如果有人能给我一个虚拟证明的逐步指南来“安装”这个模块，那对我来说意义重大（我以前从未安装过任何模块，只是最近才偶然进入 node js 的世界并仍在探索）感谢您的帮助，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T14:55:46.610

查看[节点 API](http://nodejs.org/api/modules.html)文档。我已经直接链接到模块部分，它包含了您需要了解的大部分内容。

不过，简而言之，您可以通过调用`require(...)`. 如果你想要的 JS 文件已经是 common.js 形式，你可以简单地将文件保存在你的项目文件夹中，并通过将 require 调用的结果分配给局部变量来使用它。例如，要使用您链接到的 SimpleCluster 模块，您可以在主脚本中添加以下行：

```
 var SimpleCluster = require('./SimpleCluster.js') 
```

以上将实例化在当前目录中找到的文件“SimpleCluster.js”，并且它导出的任何内容都可以通过您的本地`SimpleCluster`变量访问。由于您链接到的要点是 common.js 格式，因此上述内容应该适用于您，无需修改 SimpleCluster.js。

如果您需要更多信息，我建议您从[nodebeginner.org](http://www.nodebeginner.org/)开始。虽然上述建议应该足以让您入门，但它可能很脆弱。如果您阅读 Manuel Kiessling 的小书（并且您可以在线阅读所有内容，尽管我相信如果您购买了它，他会很感激），您将获得 node 的包管理器 NPM 的介绍，它是处理依赖关系的首选方式。

# php - 使用 php 为 html 页面中的下拉菜单设置 cookie

> ID：10652744
> 
> 赞同：-1
> 
> 时间：2012-05-18T12:33:35.953
> 
> 标签：php, html, cookies

我想在 html 表单中为下拉菜单设置一个 cookie，当刷新页面时，我应该得到存储在下拉框中 cookie 中的值。我为输入框编写了如下代码：

```
<script type="text/javascript">
 function setCookie(c_name,value,exdays)
{

var exdate=new Date();
exdate.setDate(exdate.getDate() + exdays);
var c_value=escape(value) + ((exdays==null) ? "" : "; expires="+exdate.toUTCString());
document.cookie=c_name + "=" + c_value;
}
</script>

<input name="order_num" type="text" size="10" value="<?php if(isset($_COOKIE["order_num"])) echo $_COOKIE["order_num"];?>" onblur="setCookie(this.name,this.value,60*60*2)" /> 
```

以类似的方式，我想为下拉框编写 cookie。下拉菜单的代码如下：

```
<select name="quality" onChange="setCookie('quality',this.value,60*60*2)" selected="" >
<option >Select One</option>  
<option value="good" selected="good">Good</option>
<option value="ok" selected="ok">A bit low but we can use it</option>
...

</select>

<input type="checkbox" name="proceed_opt[]" value="I will upload new Image" onblur="setCookie(this.name,this.value,60*60*2);>
         Insert Option &quot;I will upload new Image&quot;</td></tr>

         <input type="checkbox" name="proceed_opt[]" value="I approve this sample for a Night Light" onblur="setCookie(this.name,this.value,60*60*2);>
         Insert Option &quot;<font face="Arial, Helvetica, sans-serif" size="2">I approve this sample for a Night Light</font>&quot; 
```

任何人都帮我设置cookie....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T12:53:15.337

您应该检查 cookie 值是否等于选择项。如果是这样，则为项目赋予 HTML`selected`属性。

```
$choices = array(
  'good' => 'Good',
  'ok'   => 'A bit low but we can use it'
);

<select name="quality" onChange="setCookie('quality', this.value, 60*60*2)">
  <option>Select One</option>

  <?php foreach ($choices as $value=>$select): ?>

    <option value="<?php echo $value ?>"
      <?php if(isset($_COOKIE["quality"]) && $_COOKIE["quality"] == $value): ?>
        selected="selected"
      <?php endif; ?>
    >
      <?php echo $select ?>
    </option>

  <?php endforeach; ?>

</select> 
```

这段代码可能需要一些修改，因为我没有测试它。但主要思想就在那里。

* * *

编辑：复选框示例：

```
$choices = array(
  'good' => 'Good',
  'ok'   => 'A bit low but we can use it'
);

<?php foreach ($choices as $value=>$choice): ?>

  <input type="checkbox" value="<?php echo $value ?>"
    onclick="setCookie('checkbox', this.value, 60*60*2)"
    <?php if(isset($_COOKIE["checkbox"]) && $_COOKIE["checkbox"] == $value): ?>
      checked="checked"
    <?php endif; ?>
  >
  <?php echo $select ?>

<?php endforeach; ?> 
```

此代码的问题在于，如果用户不单击复选框，而是使用键盘选择它，它将无法工作。

# sql-server - SQL Server 数据库中所有依赖项的树

> ID：10652746
> 
> 赞同：15
> 
> 时间：2012-05-18T12:33:41.047
> 
> 标签：sql-server, database, parsing, text

我必须维护一个没有文档的旧项目，并且有一个包含很多表和函数以及存储过程的数据库。我想在表和存储过程之间建立一个依赖树，例如，这个过程执行这些过程并使用这些表。

1.  有什么工具可以帮助我

2.  如果没有，这些算法的起点是什么？我的意思是我可以从数据库中获取所有过程的源代码，然后解析它以获取所有“exec #”、“update #”、“insert into #”等等。在这种情况下，解决这个问题的最佳方法是什么（可能是正则表达式，或者一些特殊算法......）？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2017-01-16T14:01:42.153

Higarian，您的代码对我非常有用。我对其进行了一些改进，以消除循环依赖，包括表引用，并按 ObjectPath 排序。

```
;with ObjectHierarchy ( Base_Object_Id , Base_Cchema_Id , Base_Object_Name , Base_Object_Type, object_id , Schema_Id , Name , Type_Desc , Level , Obj_Path) 
as 
    ( select  so.object_id as Base_Object_Id 
        , so.schema_id as Base_Cchema_Id 
        , so.name as Base_Object_Name 
        , so.type_desc as Base_Object_Type
        , so.object_id as object_id 
        , so.schema_id as Schema_Id 
        , so.name 
        , so.type_desc 
        , 0 as Level 
        , convert ( nvarchar ( 1000 ) , N'/' + so.name ) as Obj_Path 
    from sys.objects so 
        left join sys.sql_expression_dependencies ed on ed.referenced_id = so.object_id 
        left join sys.objects rso on rso.object_id = ed.referencing_id 
    where rso.type is null 
        and so.type in ( 'P', 'V', 'IF', 'FN', 'TF' ) 

    union all 
    select   cp.Base_Object_Id as Base_Object_Id 
        , cp.Base_Cchema_Id 
        , cp.Base_Object_Name 
        , cp.Base_Object_Type
        , so.object_id as object_id 
        , so.schema_id as ID_Schema 
        , so.name 
        , so.type_desc 
        , Level + 1 as Level 
        , convert ( nvarchar ( 1000 ) , cp.Obj_Path + N'/' + so.name ) as Obj_Path 
    from sys.objects so 
        inner join sys.sql_expression_dependencies ed on ed.referenced_id = so.object_id 
        inner join sys.objects rso on rso.object_id = ed.referencing_id 
        inner join ObjectHierarchy as cp on rso.object_id = cp.object_id and rso.object_id <> so.object_id 
    where so.type in ( 'P', 'V', 'IF', 'FN', 'TF', 'U') 
        and ( rso.type is null or rso.type in ( 'P', 'V', 'IF', 'FN', 'TF', 'U' ) ) 
        and cp.Obj_Path not like '%/' + so.name + '/%' )   -- prevent cycles n hierarcy
select   Base_Object_Name 
    , Base_Object_Type
    , REPLICATE ( '   ' , Level ) + Name as Indented_Name 
    , SCHEMA_NAME ( Schema_Id ) + '.' + Name as object_id 
    , Type_Desc as Object_Type 
    , Level 
    , Obj_Path 
from ObjectHierarchy as p 
order by Obj_Path 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-03-20T19:21:33.267

在这里， max(level) 应该可以解决您的问题而无需外部工具

```
;WITH   cte ( [ID] ,IDSchema,Nome,Tipo,level, SortCol)
AS     (SELECT [so].[object_id] AS ID
               ,so.[schema_id],so.[name],so.[type]
               ,0 AS [Level]     
               ,CAST ([so].[object_id] AS VARBINARY (MAX)) AS SortCol
          FROM [sys].[objects] so
            LEFT JOIN  sys.sql_expression_dependencies ed ON [ed].[referenced_id]=[so].[object_id]
            LEFT JOIN [sys].[objects] rso ON rso.[object_id]=[ed].referencing_id
            --in my database, if i insert tables on the search, it gets more tham 100 levels of recursivity, and that is bad
        WHERE [rso].[type]  IS NULL AND [so].[type] IN ('V','IF','FN','TF','P')

        UNION ALL
        SELECT [so].[object_id] AS ID
            ,so.[schema_id],so.[name],so.[type]
               ,Level + 1
               ,CAST (SortCol + CAST ([so].[object_id] AS BINARY (4)) AS VARBINARY (MAX))
        FROM   [sys].[objects] so
               INNER JOIN  sys.sql_expression_dependencies ed ON [ed].[referenced_id]=[so].[object_id]
               INNER JOIN [sys].[objects] rso ON rso.[object_id]=[ed].referencing_id
               INNER JOIN cte AS cp ON rso.[object_id] = [cp].[ID]
            WHERE [so].[type] IN ('V','IF','FN','TF','P')
            AND  ([rso].[type] IS NULL OR  [rso].[type]  IN ('V','IF','FN','TF','P'))
            )

--CTE
SELECT  ID, IDSchema,
    REPLICATE('   ',level)+nome AS Nome,'['+SCHEMA_NAME(IDSchema)+'].['+nome+']' AS Object,Tipo,Level,SortCol
FROM     cte AS p
ORDER BY  sortcol 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-18T12:42:12.550

有像 redgate 这样的付费工具，但如果你愿意，你可以随时右键单击一个对象并选择“查看依赖项”。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-18T12:50:10.987

您可以使用如下所示的 sys.dm_sql_referenced_entities 来获取任何对象的所有依赖项

`SELECT * FROM sys.dm_sql_referenced_entities('dbo.myStoredProcedure', 'OBJECT')`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-10T21:05:05.630

有人提到了 Redgate 的付费插件。ApexSQL 是另一家为 SQL Server 制作附加组件的公司。其中一些需要花钱，但其他一些是免费的，仍然非常有用。

**ApexSQL 搜索**是免费的搜索之一。它的2个主要特点是：

1.  允许您在数据库的数据或结构中搜索某些文本。
2.  可以为一个或多个对象（您想要的）构建依赖关系的图形树。

安装后，只需右键单击对象或数据库并单击`View dependencies`（靠近底部，旁边有一个图标）。不要混淆它`View Dependencies`（靠近顶部，旁边没有图标），它是 SQL Server 中内置的。我发现层次图布局是最有用的。

**链接：**

*   [带有良好视频演示的产品页面](https://www.apexsql.com/sql_tools_search.aspx)
*   [关于依赖映射特性的文章](https://solutioncenter.apexsql.com/how-to-visualize-sql-database-objects-dependencies/)
*   [下载页面](https://www.apexsql.com/Download.aspx)

# c++ - eclipse ubuntu 中无法解析 std::string

> ID：10652750
> 
> 赞同：-1
> 
> 时间：2012-05-18T12:34:22.897
> 
> 标签：c++, eclipse, include, std, include-path

我已经尝试搜索问题，甚至在以下位置看到了类似的问题：

[Eclipse for C++ 中的“字符串无法解析”错误（Eclipse 无法解析标准库）](https://stackoverflow.com/questions/7905025/string-could-not-resolved-error-in-eclipse-for-c)

但他安装 mingw 的解决方案不起作用。（什么是 msys？aptitude 没有找到任何具有该名称的包）

所以即使有 Eclipse 确实识别的#include，我也会收到 std::string 问题的错误消息。我已将 /usr/include/c++/4.6.3 放入 GNU c++ 的包含中，但问题没有解决……我还能做什么？

代码很简单：

```
#include<string> 
. 
. 
std::string var; 
```

我得到的错误是：“类型 std::string 无法解析”

代码由很多类组成，所以我不能全部粘贴。我已将现有项目中的所有内容添加到 Eclipse 中。我对 uint_32t 和 uint_64t 也有同样的问题，但没有解决

回答：我解决了这个问题。因为我从现有项目创建了一个新项目，所以它只是没有向包含目录添加任何内容，所以我创建了一个新的空项目并只包含了其中包含的所有内容并解决了它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T13:11:30.383

清理项目并关闭它并重新打开它。重新启动 Eclipse。甚至完全关闭 Eclipse 并杀死与之相关的所有进程。Eclipse 已经对我做了几次，并且重新启动成功了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T14:33:23.697

您可以尝试在包含中使用“”而不是 <>。您也可以使用包含字符串的 iostream (#include "iostream") 更改字符串

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-23T17:49:27.060

我解决了这个问题，它并不像我想象的那么简单。

由于我从现有项目创建了一个新项目，因此它只是没有向包含目录添加任何内容。Linux/Eclipse 太乱了，它甚至不能递归地添加文件夹？

我刚刚创建了一个新的空项目并复制了我需要的内容并完成了它。

# asp.net - Web.Config 文件中的多行文本

> ID：10652751
> 
> 赞同：5
> 
> 时间：2012-05-18T12:34:38.123
> 
> 标签：asp.net, web-config, multiline

我需要在网页上显示欢迎消息。我希望将消息文本保存在 Web.Config 文件中。文本将包含换行符。

例如

```
<appSettings>
<add key="Test" value="Hello 

     There

     How are you?"/>
</appSettings> 
```

但是，当我显示它时，一切都回到了 1 行。

有人可以帮忙吗？

我正在使用 ASP.Net 4.0

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T12:49:37.370

你可以像 Niek 所说的那样做，但我更喜欢将常量放在你的应用程序中：App_GlobalResources 或 App_LocalResources。

然后你可以支持多种语言并且一切都很干净......但是如果你不想在每次更改常量时都重新构建，那么你可以将文本放入数据库或 xml 文件中。

web.config 中的 Appsettings 更多的是用于应用程序中的设置

# magento - 如何在 Magento 1.6.2 中覆盖核心模块

> ID：10652754
> 
> 赞同：0
> 
> 时间：2012-05-18T12:34:53.993
> 
> 标签：magento, magento-1.6

我在法师中创建了一个像客户一样的模块，我想在我的法师模块之前使用我按照此处显示的步骤 [Magento：覆盖客户帐户控制器](https://stackoverflow.com/questions/9350044/magento-overriding-customer-account-controller)

但它不适合我..我是magento 1.6.2.0。

版本是否会对此有任何问题..？

```
 <frontend>
<routers>
<customer>
<args>
<modules>
<Gmodule_Customer before="Mage_Customer">Gmodule_Customer</Gmodule_Customer>
</modules>
</args>
</customer>
</routers>
</frontend> 
```

# html - 今天在 HTML5 中结束空标签的正确方法是什么

> ID：10652758
> 
> 赞同：0
> 
> 时间：2012-05-18T12:35:01.603
> 
> 标签：html

如何结束**HTML5**`link`之类`input`的标签。

 **这个

```
<input type='text' size='10'> 
```

或这个

```
<input type='text' size='10'/> 
```

> **复制更多解释**
> 
> [HTML5 中的结束标签](https://stackoverflow.com/questions/10598501/closing-tags-in-html5)

**结论：** ***你可以使用任何一个。***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T12:38:24.067

推荐中的方法是：

```
<input type='text' size='10'> 
```**

# xml - 带有 xml 的多语言程序

> ID：10652759
> 
> 赞同：0
> 
> 时间：2012-05-18T12:35:06.270
> 
> 标签：xml, parsing, multilingual

我想在我的程序中实现多种语言。我正在使用这样的 xml 文件：

```
 <?xml version="1.0" encoding="utf-8"?>
<root> 
 <language id="EN">
 <String id="rxtst_found">.rxtst found</String>
 <String id="exe_found">.exe found</String>
 <String id="rxtst_not_found">No .rxtst found</String>
 <String id="exe_not_found">No .exe Found</String>
 </language>
 <language id="DE">
    <String id="exe_found">.exe gefunden</String>
    <String id="rxtst_found">.rxtst gefunden</String>
    <String id="rxtst_not_found">Keine .rxtst gefunden</String>
    <String id="exe_not_found">Keine .exe gefunden</String>
 </language>
     </root> 
```

我想这样称呼语言：

```
getStringValue(String string_id, language lang) ... 
```

正确解析语言的最佳方法是什么？我想到了类似的东西

```
 XmlNodeList xmlNodesByLanguage = xdoc.GetElementsByTagName("language");
...
           String tempLang =  xmlNodesByLanguage.Item(i).Attributes["id"].Value; 
```

但是我一点头绪都没有...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T14:00:12.717

您可以改用 SelectSingleNode 方法，并为要查询的节点提供有效的 XPath。

以下示例运行良好。但是它在 VB.NET 中

```
Dim string_id As String = "rxtst_found"
Dim language As String = "DE"

Dim xdoc As XmlDocument = New XmlDocument
xdoc.Load("C:\\sample.xml")

Dim xPath = "root/language[@id='" + language + "']/String[@id='" + string_id + "']"
Dim languageNode = xdoc.SelectSingleNode(xPath)
Dim result = languageNode.InnerText 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T09:06:26.573

我使用 xsd.exe 反序列化了我的 xml，并使用以下代码读取数据：

```
 //deserializes language xml

            XmlSerializer ser = new XmlSerializer(typeof(root));
            String asdf = Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location);

 FileStream fs = new FileStream(asdf + "\\XML\\language.xml", FileMode.Open);

                XmlReader reader = new XmlTextReader(fs);
                //root = head node of the xml file

 root ts = (root)ser.Deserialize(reader);
            fs.Close();
            //sprachennummer nach enum in Siro_Settings
            int languageNr = (int)lang;

            //sucht nach dem passenden Value zu der stringID und gibt ihn zurück
            for (int j = 0; j < ts.Items[languageNr].String.Length; j++)
            {
                if (ts.Items[languageNr].String[j].id.Equals(stringID))
                {
                    return ts.Items[languageNr].String[j].Value;
                }

            } 
```

# php - 有没有办法检索或导出原始 SoundCloud API 波形数据？

> ID：10652763
> 
> 赞同：2
> 
> 时间：2012-05-18T12:35:37.497
> 
> 标签：php, javascript, soundcloud, waveform

我正在创建一个使用 SoundCloud API 流式传输艺术家曲目的 Web 应用程序。我知道如何获得波形 PNG 图像（`http://w1.sndcdn.com/fxguEjG4ax6B_m.png`例如），但我实际上需要某种波形数据（歌曲中什么时候高，什么时候低？）。

我无法访问像 LAME 之类的音频库或类似的东西，因为我的网络托管不允许它。是否有可能

1.  以某种方式直接从 SoundCloud API 获取这些数据。
2.  在 PHP 或 JavaScript 中处理波形 PNG 图像以检索所需数据？（是否有某种库可用于这种处理？）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-08-14T15:17:22.063

Soundcloud 开始提供浮点数，但尚未正式发布。只是一个小技巧，当你有你的 PNG 时：

```
https://w1.sndcdn.com/XwA2iPEIVF8z_m.png 
```

**将“ w1** ”更改为“ **wis** ”，将“ **png** ”更改为“ **json** ”：

```
https://wis.sndcdn.com/XwA2iPEIVF8z_m.json 
```

你明白了！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-22T20:05:38.697

可以解析波形 PNG 图像以将其转换为点数组。图像是垂直对称的，要找到峰值，您只需检查 alpha 值即可计算距图像顶部有多少不透明像素。这就是为[小部件](http://blog.soundcloud.com/2011/11/03/html5/)和[Next SoundCloud](http://web.archive.org/web/20121127074600/http://next.soundcloud.com/)呈现波形的方式。

在 PHP 中，您可以使用[ImageMagick](http://www.imagemagick.org/)或[GD 图形库](http://www.boutell.com/gd/)来读取这些值，而在 Javascript 中，可以通过将图像放在画布对象上，然后从那里检查图像数据。我不会过多介绍这些细节，但如果你遇到困难，你当然可以问另一个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-01T05:19:07.113

`https://wis.sndcdn.com/XwA2iPEIVF8z_m.json`虽然没有官方方法可以直接从 SoundCloud API 请求中获取原始波形数据，但有一种方法可以使用这样的代码在 PHP中的非官方端点（又名：类似的东西）中获取 SoundCloud 显示的完全相同的数据。只需更改值`$image_file`以匹配您拥有的任何 SoundCloud 1800 宽 x 280 高 PNG 图像，您就可以开始了：

```
$source_width = 1800;
$source_height = 140;
$image_file = 'https://w1.sndcdn.com/XwA2iPEIVF8z_m.png';
$image_processed = imagecreatefrompng($image_file);
imagealphablending($image_processed, true);
imagesavealpha($image_processed, true);

$waveform_data = array();

for ($width = 0; $width < $source_width; $width++) {

  for ($height = 0; $height < $source_height; $height++) {

    $color_index = @imagecolorat($image_processed, $width, $height);

    // Determine the colors—and alpha—of the pixels like this.
    $rgb_array = imagecolorsforindex($image_processed, $color_index);

    // Peak detection is based on matching a transparent PNG value.
    $match_color_index = array(0, 0, 0, 127);
    $diff_value = array_diff($match_color_index, array_values($rgb_array));
    if (empty($diff_value)) {
      break;
    }

  } // $height loop.

  // Value is based on the delta between the actual height versus detected height.
  $waveform_data[] = $source_height - $height;

} // $width loop.

// Dump the waveform data array to check the values.
echo '<pre>';
print_r($waveform_data);
echo '</pre>'; 
```

这种方法的好处是，虽然该`https://wis.sndcdn.com/`URL 很有用，但不知道 SoundCloud 是否/何时会改变来自它的数据结构。从官方波形 PNG 导出数据提供了一些长期稳定性，因为它们不仅会在没有向 SoundCloud API 最终用户发出公平警告的情况下更改该 PNG 图像。

另外，请注意，虽然`$source_width`是 1800`$source_height`是 140，因为虽然 SoundCloud PNG 文件的高度为 280 像素，但下半部分基本上只是上半部分的翻转/镜像副本。因此，只需测量 0 到 150 之间的值即可为您提供必要的波形数据值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T08:43:12.963

很抱歉碰到一个旧线程 - 以防万一你正在寻找类似的东西并偶然发现这篇文章：现在可以根据这个链接：[波形，让我们谈谈它们](http://developers.soundcloud.com/blog/waveforms-let-s-talk-about-them)。

它是在这个帖子之后不久发布的——所以再次为撞到一个旧帖子而道歉。

# iphone - iPhone Sencha Touch - 如何在 sencha touch 中将表格视图添加到拆分视图

> ID：10652764
> 
> 赞同：1
> 
> 时间：2012-05-18T12:35:40.353
> 
> 标签：iphone, cordova, sencha-touch, extjs, sencha-touch-2

我`Tabbar`在 sencha touch 中实现了没有任何内容如下：

使用代码

```
Ext.ns('sink', 'demos', 'Ext.ux');
Ext.ux.UniversalUI = Ext.extend(Ext.Panel,
                                {
                                  fullscreen: true,
                                  layout: 'hbox',
                                  items:

                                  [
                                     //Root view 
                                     {
                                       xtype: 'panel',
                                       html: 'TableView/Rootview goes here ...',
                                       flex: 1
                                   },

                                    //Details view
                                   {
                                       xtype: 'panel',
                                        html: 'Message Detail view goes here ....',
                                       flex: 2
                                   }
                                  ]

                                }); 
```

但是我需要两个`Tableviews`一个，`Rootview`另一个`Detailsview`如下

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T23:02:14.240

您需要使用[Ext.List](http://docs.sencha.com/touch/2-0/#!/api/Ext.dataview.List)。因此，您可以添加以下内容，而不是左侧面板（注释为 //Root 视图）：

```
{
  xtype:'list',
  id: 'navigation',
  data: [
    { title: 'Page 1'},
    { title: 'Page 2'},
    { title: 'Page 3'},
    { title: 'Page 4'},
    { title: 'Page 5'}
  ],
  itemTpl: new Ext.XTemplate('{title}'),
} 
```

我让你猜猜你必须为第二个视图做什么；）

希望这可以帮助

# mod-rewrite - mod_rewrite 达到 LimitInternalRecursion

> ID：10652777
> 
> 赞同：1
> 
> 时间：2012-05-18T12:36:21.993
> 
> 标签：mod-rewrite, apache2

我有一个 VServer，我在 /var/www/ 中有一些管理应用程序，在 /var/customers/webs/web001/ 中有其他常见的东西。

我想对所有不存在的文件和目录进行重定向

```
 /var/www/ -> /var/customers/webs/web001/ 
```

这样我就可以将域名用于 root 和 web001 客户。

我不确定实现这一目标的最佳方法是什么。我尝试使用 mod_rewrite，但有内部重定向达到了递归限制。

我做错了什么？

.htaccess

```
 # allow psydo-location (not existing folder)
            Options +FollowSymLinks

            # Turn on URL rewriting engine
            RewriteEngine On

            # Folder of this htaccess-file in not root-folder
            RewriteBase /var/www/

            # Disable rewriting for existing files or directories
            RewriteCond %{REQUEST_FILENAME} !-f
            RewriteCond %{REQUEST_FILENAME} !-d
            RewriteCond %{REQUEST_FILENAME} !^/var/customers/webs/web001/

            # redirect all other requests to index.php
            rewriteRule ^.*$ /var/customers/webs/web001/index.php [DPI,L] 
```

apache2/error.log

```
 Request exceeded the limit of 10 internal redirects 
            due to probable configuration error. 
            Use 'LimitInternalRecursion' to increase the limit if necessary. 
            Use 'LogLevel debug' to get a backtrace.
            redirected from r->uri = /var/customers/webs/web001/index.php
            redirected from r->uri = /var/customers/webs/web001/index.php
            redirected from r->uri = /var/customers/webs/web001/index.php
            redirected from r->uri = /var/customers/webs/web001/index.php
            redirected from r->uri = /var/customers/webs/web001/index.php
            redirected from r->uri = /var/customers/webs/web001/index.php
            redirected from r->uri = /var/customers/webs/web001/index.php
            redirected from r->uri = /var/customers/webs/web001/index.php
            redirected from r->uri = /var/customers/webs/web001/index.php
            redirected from r->uri = /index.php 
```

重写日志

```
 (3) [perdir /var/www/] strip per-dir prefix: /var/www/index.php -> index.php
            (3) [perdir /var/www/] applying pattern '^.*$' to uri 'index.php'
            (4) [perdir /var/www/] RewriteCond: input='/var/www/index.php' pattern='!-f' => matched
            (4) [perdir /var/www/] RewriteCond: input='/var/www/index.php' pattern='!-d' => matched
            (4) [perdir /var/www/] RewriteCond: input='/var/www/index.php' pattern='!^/var/customers/webs/web001/' => matched
            (2) [perdir /var/www/] rewrite 'index.php' -> '/var/customers/webs/web001/index.php'
            (2) [perdir /var/www/] trying to replace prefix /var/www/ with /var/www/
            (1) [perdir /var/www/] internal redirect with /var/customers/webs/web001/index.php [INTERNAL REDIRECT]
            (3) [perdir /var/www/] add path info postfix: /var/www/var -> /var/www/var/customers/webs/web001/index.php 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T23:41:11.233

好的。我找到了解决方案。它不在 .htaccess 中，而是在 httpd.conf 中。使用适当的 DocumentRoot 设置，几乎所有请求都将通过 /var/customers/webs/web001/ 传递，除了那些将被 Alias-Directives 排除在外的请求。

/etc/apache2/httpd.conf 看起来像这样：

```
 #NameVirtualHost SERVER_IP:PORT
            <VirtualHost SERVER_IP:PORT>
                ServerName SERVER_IP
                ServerAlias DOMAIN.TLD

                # instead of DocumentRoot "/var/www/"
                DocumentRoot "/var/customers/webs/web001/"

                # add Aliases for each Application in the /var/www
                Alias /URL_SUB_PATH_APP_1 "/var/www/URL_SUB_PATH_APP_1"
                Alias /URL_SUB_PATH_APP_2 "/var/www/URL_SUB_PATH_APP_2"
            </VirtualHost>

            Include /etc/apache2/vhosts.conf 
```

就像 Gerben 所说，.htaccess 文件对此没有帮助。

# objective-c - 如何解码特殊字符

> ID：10652778
> 
> 赞同：2
> 
> 时间：2012-05-18T12:36:33.900
> 
> 标签：objective-c, ios

我正在开发一个 iOS 应用程序，我正在使用这个：

```
mutableString = [mutableString stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; 
```

但问题是，当我`mutableString`包含这样的字符串“...a '连接方式'...”或像这样的字符“-”时，`stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding`返回一个`null`值。

我如何解码字符“'”和“-”？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:27:47.800

该格式`%uxxxx`是百分比编码[的非标准实现](http://en.wikipedia.org/wiki/Percent-encoding#Non-standard_implementations)，不受`NSString`s支持`stringByReplacingPercentEscapesUsingEncoding:`。如果您需要处理这些编码，您将需要找到可以为您执行此操作的第 3 方代码或实施您自己的解决方案。

# jquery - jQuery 这不适用于我的代码

> ID：10652779
> 
> 赞同：0
> 
> 时间：2012-05-18T12:37:04.427
> 
> 标签：jquery, this

我有以下标记；

```
<tbody>
        <tr>
            <td class="expand">Showroom area - New Display Zone</td>
            <td>300</td>
            <td>350</td>
            <td class="shortfall">50</td>
        </tr>
        <tr class="hidden">
            <td>Core Display</td>
            <td>9</td>
            <td>10</td>
            <td>1</td>
        </tr>
        <tr class="hidden">
            <td>R8</td>
            <td>0</td>
            <td>0</td>
            <td>1</td>
        </tr>
        <tr class="hidden">
            <td>Highlight Car</td>
            <td>1</td>
            <td>1</td>
            <td>0</td>
        </tr>
        <tr>
            <td class="expand">Showroom - Handover Bay</td>
            <td>300</td>
            <td>350</td>
            <td class="shortfall">50</td>
        </tr>
        <tr class="hidden">
            <td>Core Display</td>
            <td>9</td>
            <td>10</td>
            <td>1</td>
        </tr>
        <tr class="hidden">
            <td>R8</td>
            <td>0</td>
            <td>0</td>
            <td>1</td>
        </tr>
        <tr class="hidden">
            <td>Highlight Car</td>
            <td>1</td>
            <td>1</td>
            <td>0</td>
        </tr> 
```

和 jQuery：

```
$(function () {

    $('td.expand').click(function () {

        $(this).parents().siblings('tr.hidden').toggle();
        $(this).toggleClass("active");
    });
}); 
```

我希望此代码将前 3 个 tr.hidden 类切换为与第一个 td.expand 类直接相关，但运行代码会切换所有 tr.hidden 类以显示。

谁能看到我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T12:42:29.903

基本上，你做错的不是告诉 jQuery 你只想处理一些*元素*`tr.hidden`。您还在`parents`几乎肯定想要`parent`（单数）的地方使用（复数）。

您可以使用`nextUntil`来收集元素，直到条件匹配。在这种情况下，您可以使用`nextUntil`来收集行，直到找到不是`tr.hidden`. 所以：

```
$(this).parent().nextUntil(':not(tr.hidden)').toggle(); 
```

[实例](http://jsbin.com/etixef)| [资源](http://jsbin.com/etixef/edit)

* * *

或者——这将是我的首选解决方案——你可能会考虑稍微改变你的结构，并使用多个`tbody`元素，一个用于每个展开/折叠组：

```
<tbody>
  <tr>
    <td class="expand">...</td>
    ...
  </tr>
  <tr class="hidden">
  ...
  </tr>
  ...
</tbody>
<tbody>
  <tr>
    <td class="expand">...</td>
    ...
  </tr>
  <tr class="hidden">
  ...
  </tr>
  ...
</tbody> 
```

这大大简化了事情：

```
$(this).closest('tbody').find('tr.hidden').toggle(); 
```

[实例](http://jsbin.com/ofeqah/2)| [资源](http://jsbin.com/ofeqah/2/edit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T12:41:21.307

你想使用`parent()`而不是`parents()`

# iphone - 刷新 TabView 的内容

> ID：10652784
> 
> 赞同：1
> 
> 时间：2012-05-18T12:37:41.233
> 
> 标签：iphone, objective-c, xcode

好的，在进行网络通话后，我正在尝试刷新每个选项卡的选项卡内容，并且我尝试了很多不同的方法来做到这一点，但我已经记不清了。有人可以告诉我这是怎么可能的吗？

Web 调用只是从服务器调用 JSON 并使用它来更新选项卡的内容。出于测试目的，我在设置类中设置了一个按钮。设置类是主页选项卡中的一个视图，其中有一个名为刷新的按钮。单击此按钮时，设备上存储的 JSON 与应用程序启动时从 Web 调用中调用的不同。这让我不必更改服务器上的 JSON。

我将带您了解我尝试过的一些技术，如果有人能告诉我我做错了什么，我将不胜感激。

我尝试制作一个类的实例并像这样调用刷新方法

```
DashboardVC *db = [[DashboardVC alloc] init];
[db refreshMe]; 
```

仪表板类中的刷新方法是这样的

```
-(void) refreshMe
{     
     [self loadView];
     [self viewDidLoad];
} 
```

然而没有运气。如果我在 Dashboard 类中调用它，此方法将起作用，但如果我从另一个类调用它，则不会起作用。我认为它已经成为我正在实例化一个新类并调用它的刷新。所以我放弃了这种技术并转向下一个方法

这会遍历所有 tabBars 并更改 tabTitles 没有任何问题，所以我知道它肯定会正确循环 ViewControllers。

我还尝试了各种视图方法，如 ViewDidAppear、viewWillAppear 等，但没有运气。

我还尝试像这样通过 tabController 访问我在 dashBoard 类中创建的 refreshMe 方法

```
[[[self.tabBarController viewControllers] objectAtIndex:0] refreshMe]; 
```

但同样没有运气，这只会导致我的应用程序崩溃。

我通读了本指南

[https://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewControllerPGforiOSLegacy/TabBarControllers/TabBarControllers.html](https://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewControllerPGforiOSLegacy/TabBarControllers/TabBarControllers.html)

在苹果网站上，但似乎没有涵盖如何刷新单个标签内容。

我只想让每个单独的选项卡在进行网络通话后刷新其内容，并且花了很长时间试图弄清楚这一点，但没有任何效果。

如果有人能告诉我我做错了什么，我将不胜感激？

提前谢谢....

编辑：

扩展我尝试过的内容

在与 Michael 讨论后，我意识到您永远不应该根据 Apple 指南调用 loadView。所以我删除了对 LoadView 的所有引用。我现在在所有主要的 ViewController 中放置了一个名为 RefreshMe 的方法，它在类中设置视图、图像文本等。而这个方法是放在ViewDidLoad里面的。现在我希望能够在发生网络调用后调用这些方法，从而有效地刷新应用程序。

我的 viewDidLoad 现在在我所有的主要课程中看起来都是这样的。

```
- (void) viewDidLoad {
     [super viewDidLoad];
     [self refreshMe];
} 
```

然后 refreshMe 方法包含设置屏幕的代码。

从 Web 调用中提取的 JSON 数据将设置 5 个选项卡中每个选项卡的内容，因此需要在 Web 调用后将它们全部刷新。

我尝试遍历 viewControllers 并调用 viewDidLoad，这又应该调用设置类的 refreshMe 方法，但是没有任何反应。我使用的代码是这个

```
NSArray * tabBarViewControllers = [self.tabBarController viewControllers];

for(UIViewController * viewController in tabBarViewControllers)
{
    [viewController viewDidLoad];
} 
```

暂时我也包括了

```
NSLog(@"Method called"); 
```

在每个类的 viewDidLoad 中测试它是否被调用。但是，仅当我第一次加载应用程序或重新输入应用程序时才会打印出该消息。在我单击设置屏幕中的刷新按钮后应该调用此方法，但它不是，我不知道为什么。

任何人都知道为什么这不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T12:40:21.040

与其在更新标签栏顺序时刷新视图控制器，不如通过实现子类 UIViewController 的方法在视图出现之前简单地刷新视图[`viewWillAppear:`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/viewWillAppear%3a)？

这意味着每次您的视图即将出现时，您都可以更新视图以获取新的和更新的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T09:53:33.783

从问题和您的评论来看，听起来至少有两个问题：

1.  您无法访问由应用的标签栏控制器管理的视图控制器。

2.  您似乎正在违反视图控制器的正常操作。

第一部分应该很容易整理。如果您有一个指向对象的指针，您可以向该对象发送消息。如果相应的方法没有执行，那么要么指针没有指向你认为它执行的位置，要么对象没有你认为它执行的方法。让我们看看你的代码：

```
NSArray * tabBarViewControllers = [self.tabBarController viewControllers];

for(UIViewController * viewController in tabBarViewControllers)
{
    [viewController viewDidLoad];
} 
```

此代码应该调用`-viewDidLoad`由某个选项卡栏控制器管理的每个视图控制器。暂时搁置这样做的智慧，我们可以说*如果* `self.tabBarController`指向您认为的对象，则该代码应该按预期工作。您没有说此代码存在于您的应用程序中的什么位置——它是您的应用程序委托的一部分、由相关选项卡栏控制器管理的视图控制器之一的一部分，还是其他地方？使用调试器单步执行代码。在第一行之后，是否`tabBarViewControllers`包含视图控制器数组？视图控制器的数量是否正确，它们是否属于预期类型？如果`-viewDidLoad`您的视图控制器的方法没有被调用，那么答案肯定是“不”，所以找出`self.tabBarController`原因

现在，绝对值得指出（正如迈克尔所做的那样）你`-viewDidLoad`一开始就不应该跟注。视图控制器将在创建视图后将该方法发送给自己（从 .xib/storyboard 文件加载或以编程方式创建）。如果你调用`-viewDidLoad`自己，它要么在视图创建之前运行，要么第二次运行，这些都没有帮助。

此外，尝试抢先“刷新”每个视图控制器的视图也没有多大意义。如果您的应用程序正在从 Web 服务（或其他任何地方）检索一些数据，它应该使用结果数据来更新其模型，即应用程序管理的数据对象。选择视图控制器时，标签栏控制器将显示其视图，并且视图控制器的`-viewWillAppear`方法将在视图显示之前被调用。使用该方法从模型中获取您需要的数据并更新视图。这样做，你知道：

*   视图控制器的视图已经被创建

*   视图中显示的数据将是最新的，即使其他视图控制器之一修改了数据

*   您永远不会花时间更新用户可能永远不会查看的视图

同样，如果用户可以对显示的数据进行任何更改，则应确保在进行更改时或在视图控制器的`-viewWillDisappear`方法中更新模型，以便下一个视图控制器可以使用正确的数据。

# jquery-ui - 默认 JQuery UI 选项卡

> ID：10652787
> 
> 赞同：1
> 
> 时间：2012-05-18T12:37:54.600
> 
> 标签：jquery-ui, smalltalk, pharo, seaside

我正在使用加载最新海边的 Pharo smalltalk 图像。

我已经在我的项目中加载了 JQBaseTheme。

我应该怎么做才能绕过UITab的彩色大视图并显示一个简单的UITab，如 [http://jqueryui.com/demos/tabs/default.html所示](http://jqueryui.com/demos/tabs/default.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:14:13.067

如果您查看 JQBaseTheme>>updateRoot: 方法，您会看到它为该主题添加了样式表 url。

```
anHtmlRoot styleSheet url: 'https://ajax.googleapis.com...' 
```

您可以在 Seaside 组件中使用 implelement updateRoot: 来添加您引用的页面的样式表 url 或您想使用的任何其他可用 css 资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T09:04:52.553

除了 JQueryUI 的默认样式之外，您还可以提供自己的样式，根据需要设置 font-family 和 font-size。在您提到的页面上，他们使用带有以下 CSS 规则的[http://jqueryui.com/demos/demos.css ：](http://jqueryui.com/demos/demos.css)

```
body {
  font-size: 62.5%;
  font-family: "Trebuchet MS", "Helvetica", "Arial",  "Verdana", "sans-serif";
} 
```

# c# - 从纹理创建法线贴图背后的逻辑是什么？

> ID：10652797
> 
> 赞同：3
> 
> 时间：2012-05-18T12:38:19.820
> 
> 标签：c#, xna, textures, hlsl

我在谷歌上看过，但我唯一能找到的是一个关于如何使用 Photoshop 创建一个的教程。不感兴趣！我需要它背后的逻辑。（而且我不需要如何“使用”凹凸贴图的逻辑，我想知道如何“制作”一个！）

我正在编写自己的 HLSL 着色器，并且已经意识到在两个像素之间存在某种渐变，这将显示其正常 - 因此可以根据光线的位置进行照明。

我想实时执行此操作，以便当纹理发生变化时，凹凸贴图也会发生变化。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-03-20T16:01:19.707

我意识到我参加这个聚会已经很晚了，但我最近在尝试为 3ds max 编写自己的法线贴图生成器时也遇到了同样的情况。C# 有庞大且不必要的库，但没有任何基于数学的简单解决方案。

所以我运行了转换背后的数学：Sobel 算子。这就是您希望在着色器脚本中使用的内容。

下面的类是关于我见过的 C# 最简单的实现。它完全完成了它应该做的事情并准确地实现了所期望的：基于高度图、纹理甚至是您提供的以编程方式生成的程序的法线贴图。

正如您在代码中看到的那样，我已经实现了 if / else 以减轻边缘检测宽度和高度限制引发的异常。

它的作用：对每个像素/相邻像素的 HSB 亮度进行采样，以确定输出色调/饱和度值的比例，这些值随后转换为 RGB 以进行 SetPixel 操作。

顺便说一句：您可以实现输入控件来缩放输出色相/饱和度值的强度，以缩放输出法线贴图将提供几何/照明的后续影响。

就是这样。不再需要处理那个已弃用的小窗口 PhotoShop 插件。天空是极限。

C# winforms 实现截图（源码/输出）：

[![在此处输入图像描述](../Images/a029cad52fa93f7bfef3897828d69781.png)](https://i.stack.imgur.com/woBCM.jpg)

C# 类从源图像实现基于 Sobel 的法线贴图：

```
using System.Drawing;
using System.Windows.Forms;

namespace heightmap.Class
{
    class Normal
    {
        public void calculate(Bitmap image, PictureBox pic_normal)
        {
            Bitmap image = (Bitmap) Bitmap.FromFile(@"yourpath/yourimage.jpg");
            #region Global Variables
            int w = image.Width - 1;
            int h = image.Height - 1;
            float sample_l;
            float sample_r;
            float sample_u;
            float sample_d;
            float x_vector;
            float y_vector;
            Bitmap normal = new Bitmap(image.Width, image.Height);
            #endregion
            for (int y = 0; y < w + 1; y++)
            {
                for (int x = 0; x < h + 1; x++)
                {
                    if (x > 0) { sample_l = image.GetPixel(x - 1, y).GetBrightness(); }
                    else { sample_l = image.GetPixel(x, y).GetBrightness(); }
                    if (x < w) { sample_r = image.GetPixel(x + 1, y).GetBrightness(); }
                    else { sample_r = image.GetPixel(x, y).GetBrightness(); }
                    if (y > 1) { sample_u = image.GetPixel(x, y - 1).GetBrightness(); }
                    else { sample_u = image.GetPixel(x, y).GetBrightness(); }
                    if (y < h) { sample_d = image.GetPixel(x, y + 1).GetBrightness(); }
                    else { sample_d = image.GetPixel(x, y).GetBrightness(); }
                    x_vector = (((sample_l - sample_r) + 1) * .5f) * 255;
                    y_vector = (((sample_u - sample_d) + 1) * .5f) * 255;
                    Color col = Color.FromArgb(255, (int)x_vector, (int)y_vector, 255);
                    normal.SetPixel(x, y, col);
                }
            }
            pic_normal.Image = normal; // set as PictureBox image
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T12:53:29.417

用于读取高度或深度图的采样器。

```
/// same data as HeightMap, but in a format that the pixel shader can read
/// the pixel shader dynamically generates the surface normals from this.
extern Texture2D HeightMap;
sampler2D HeightSampler = sampler_state
{
    Texture=(HeightMap);
    AddressU=CLAMP;
    AddressV=CLAMP;
    Filter=LINEAR;
}; 
```

请注意，我的输入图是 512x512 单分量灰度纹理。从中计算法线非常简单：

```
#define HALF2 ((float2)0.5)
#define GET_HEIGHT(heightSampler,texCoord) (tex2D(heightSampler,texCoord+HALF2)) 
///calculate a normal for the given location from the height map 
/// basically, this calculates the X- and Z- surface derivatives and returns their  
/// cross product. Note that this assumes the heightmap is a 512 pixel square for no particular  
/// reason other than that my test map is 512x512\. 
float3 GetNormal(sampler2D heightSampler, float2 texCoord) 
{ 

      /// normalized size of one texel. this would be 1/1024.0 if using 1024x1024 bitmap. 
    float texelSize=1/512.0; 

    float n = GET_HEIGHT(heightSampler,texCoord+float2(0,-texelSize)); 
    float s = GET_HEIGHT(heightSampler,texCoord+float2(0,texelSize)); 
    float e = GET_HEIGHT(heightSampler,texCoord+float2(-texelSize,0)); 
    float w = GET_HEIGHT(heightSampler,texCoord+float2(texelSize,0)); 

    float3 ew = normalize(float3(2*texelSize,e-w,0)); 
    float3 ns = normalize(float3(0,s-n,2*texelSize)); 
    float3 result = cross(ew,ns); 

    return result; 
} 
```

和一个像素着色器来调用它：

```
#define LIGHT_POSITION (float3(0,2,0))

float4 SolidPS(float3 worldPosition : NORMAL0, float2 texCoord : TEXCOORD0) : COLOR0
{
    /// calculate a normal from the height map    
    float3 normal = GetNormal(HeightSampler,texCoord);
    /// return it as a color. (Since the normal components can range from -1 to +1, this 
      /// will probably return a lot of "black" pixels if rendered as-is to screen.
    return float3(normal,1);        
} 
```

`LIGHT_POSITION`可以（并且可能应该）从您的主机代码输入，尽管我在这里作弊并使用了一个常量。

请注意，此方法每个法线需要 4 次纹理查找，而不是计算一次来获取颜色。这对你来说可能不是问题（取决于你在做什么）。如果这对性能造成太大影响，您可以在纹理更改时调用它，渲染到目标，然后将结果捕获为法线贴图。

一种替代方法是将具有高度图纹理的屏幕对齐四边形绘制到渲染目标，并使用`ddx`/ `ddy`HLSL 内在函数来生成法线，而无需重新采样源纹理。显然，您将在预传递步骤中执行此操作，读取生成的法线贴图，然后将其用作后续阶段的输入。

无论如何，这对我来说已经足够快了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T23:04:51.463

简短的回答是：没有办法可靠地做到这一点，从而产生良好的结果，因为没有办法区分由于凹凸而导致颜色/亮度变化的漫反射纹理与颜色/亮度变化的漫反射纹理之间的区别。亮度，因为此时表面实际上是不同的颜色/亮度。

更长的答案：

如果您假设表面实际上是恒定的颜色，那么颜色或亮度的任何变化都必须是由于凹凸造成的阴影效果。根据实际表面颜色计算每个像素的亮/暗程度；较亮的值表示表面“朝向”光源的部分，而较暗的值表示表面“远离”光源的部分。如果您还指定了光线来自的方向，您可以计算纹理上每个点的表面法线，这样它就会产生您计算的着色值。

这就是基本理论。当然，在现实中，表面几乎*从来都不*是一个恒定的颜色，这就是为什么这种纯粹使用漫反射纹理作为输入的方法往往效果不佳的原因。我不确定像 CrazyBump 这样的事情是如何做到的，但我认为他们正在做一些事情，比如在图像的局部部分而不是整个纹理上平均颜色。

通常，法线贴图是从表面的实际 3D 模型创建的，这些模型“投影”到较低分辨率的几何体上。毕竟，法线贴图只是一种伪造高分辨率几何图形的技术。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-23T12:18:28.447

快速回答：这是不可能的。
一个简单的通用（漫反射）纹理根本不包含此信息。我还没有仔细研究 Photoshop 是如何做到的（曾经被艺术家使用过），但我认为他们只是简单地执行了类似“depth=r+g+b+a”之类的操作，它基本上返回了一个高度图/渐变。然后使用简单的边缘检测效果将高度图转换为法线贴图以获得切线空间法线贴图。

请记住，在大多数情况下，您使用法线贴图来模拟高分辨率 3D 几何网格，因为它填充了顶点法线留下的空白点。如果您的场景严重依赖照明，这是不行的，但如果它是一个简单的定向光，这“可能”工作。当然，这只是我的经验，你也可以从事一个完全不同类型的项目。

# nginx - 动态 404 上的 nginx try_files

> ID：10652799
> 
> 赞同：0
> 
> 时间：2012-05-18T12:38:21.743
> 
> 标签：nginx

我正在尝试将两个 PHP 框架混合到一个安装中。一个是我们的旧站点，它有大量代码……另一个是新站点，它是一个完全独立的代码库。两者都动态处理请求。

我想做的是这样的：

```
try_files framework1.php?$uri framework2.php?$uri 
```

所以第一个框架处理请求，如果它返回 404 错误，它应该尝试 framework2.php

那可能吗？Nginx 有什么方法可以拦截 404 请求（或任何，就此而言）并尝试下一个位置？

如果没有 - 任何解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:26:25.920

明显的解决方案是捕获所有 404 错误并将它们处理到第二个框架：

```
error_page  404 =200 /framework2.php; 
```

但它会导致真正的 404 页面出现问题，因此如果存在真正的 404 错误，您必须使用框架本身返回真正的 404。

# open-source - 重构软件时版本号发生变化

> ID：10652808
> 
> 赞同：1
> 
> 时间：2012-05-18T12:39:00.833
> 
> 标签：open-source, semantic-versioning

我们正在开源一个以前专有的 Java 软件系统。我们松散地遵循了 Tom Preston-Werner 的[语义版本控制](http://www.semver.org)，其中：

*   错误修复意味着补丁更新（例如，1.0.X）
*   对向后兼容的公共 API 的更改意味着较小的更新（例如 1.X.0）
*   对向后不兼容的公共 API 的更改意味着重大更新（例如 X.0.0）

开源系统的任务需要我们重命名包。我们还认为我们应该整合以前存在的大部分模块。

重组任务不会改变公共 API，但会改变 API 用户的依赖关系。

重组/包重命名在哪里适合语义版本控制？在知名的开源项目中如何处理这样的重组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T12:48:35.387

如果必须更改客户端代码以使用新版本，则这是不兼容的 API 更改。

# c# - 我什么时候应该在 IEnumerable 的上下文中使用 .Count() 和 .Count

> ID：10652809
> 
> 赞同：9
> 
> 时间：2012-05-18T12:39:04.237
> 
> 标签：c#, .net, linq, generics, collections

我知道这`.Count()`是 LINQ 中的一种扩展方法，并且从根本上说它使用`.Count`，所以我想知道，我应该什么时候使用`Count()`，什么时候应该使用`.Count`？主要是`.Count()`为尚未执行的可查询集合更好地保存，因此还没有枚举？我总是使用扩展方法*更安全*`.Count()`吗，反之亦然？还是这完全取决于收藏？

非常感谢任何建议或文章。

## 更新 1

在 LINQ 中反编译扩展方法后，如果is an or ，`.Count()`它似乎正在使用该`.Count` **属性**，这是大多数答案所建议的。现在我能看到的唯一真正的开销是额外的 null 和类型检查，我想这不是很大，但如果性能至关重要，仍然可以产生少量的差异。`IEnumerable<T>``ICollection<T>``ICollection`

这是`.Count()`.NET 4.0 中反编译的 LINQ 扩展方法。

```
public static int Count<TSource>(this IEnumerable<TSource> source)
{
    if (source == null)
    {
        throw Error.ArgumentNull("source");
    }

    ICollection<TSource> collection = source as ICollection<TSource>;
    if (collection != null)
    {
        return collection.Count;
    }

    ICollection collection2 = source as ICollection;
    if (collection2 != null)
    {
        return collection2.Count;
    }

    int num = 0;
    checked
    {
        using (IEnumerator<TSource> enumerator = source.GetEnumerator())
        {
            while (enumerator.MoveNext())
            {
                num++;
            }
        }
        return num;
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-18T12:41:20.260

扩展方法适用于任何方法，`IEnumerable<T>`但成本很高，因为它通过迭代来计算序列。如果序列`ICollection<T>`意味着集合的长度是已知的，则存在优化。然后`Count`使用该属性，但这是一个实现细节。

最好的建议是`Count`出于性能原因使用该属性（如果可用）。

> .Count() 主要是为尚未执行的可查询集合更好地保存，因此还没有枚举？

如果您的集合是`IQueryable<T>`而不是，`IEnumerable<T>`那么查询提供程序可能能够以某种有效的方式返回计数。在这种情况下，您不会遭受性能损失，但这取决于查询提供程序。

An`IQueryable<T>`将没有`Count`属性，因此在使用扩展方法和属性之间没有选择。但是，如果您的查询提供者没有提供一种有效的计算方式，`Count()`您可能会考虑使用`.ToList()`将集合拉到客户端。这实际上取决于您打算如何使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T12:41:09.247

当您只有一个不公开 Count 或 Length 属性的接口时，您应该使用 Count()，例如`IEnumerabe<T>`.

如果您正在处理集合或集合接口（例如`List<T>`或`ICollection`），那么您可以简单地使用 Count 属性，同样如果您有一个数组，请使用 Length 属性。

Count() 扩展属性的实现将使用基础集合的`Count`属性（如果可用）。否则将枚举集合以计算计数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T12:46:03.580

Count 从列表中检索属性（已计算）。Count() 是一个聚合，如 Sum()、Average() 等。它的作用是对 enumerable 中的项目进行计数（如果 enumerable 是列表，我相信它在内部使用 Count 属性）。

这是 Count() 方法的具体使用示例，当它不只是使用 Count 属性时：

```
var list = new List {1,2,3,4,5,6,7,8,9,10};

var count = list.Where(x => x > 5).Count(); 
```

此外， Count() 有一个重载，它将计算与谓词匹配的项目：

```
var count = list.Count(x => x > 5); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-18T12:46:34.593

同意`.Count`它是否可用的评论（即`ICollection<T>`在引擎盖下实现的对象）。

But they are wrong about `.Count()` being 'costly'. `Enumerable.Count()` will check if the object implements `ICollection<T>.Count` before it enumerates the elements and count them.

I.e. something like,

```
public int Enumerable.Count<TSource>(IEnumerable<TSource> source)
{
    var collection = source as ICollection
    if (collection != null)
    {
        return collection.Count;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T12:45:02.237

我不确定这是否重要，因为 Count() 可能只是读取 Count 属性。性能差异确实可以忽略不计。使用任何你喜欢的。我尽可能使用 Count() 以保持一致。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-18T13:07:57.140

As others have said, if you have an `ICollection<T>`, use the Count property.

I would suggest that the `IEnumerable.Count()` method is really intended for use when the **only** thing you want to do with the elements of an enumeration is count them. The equivalent of SQL "SELECT COUNT(...".

If in addition you want to do something else with the elements of an enumeration, it makes more sense to generate a collection (usually a list using `ToList()`), then you can use the Count property and do whatever else you want to do.

# mysql - 如何部署在亚马逊 ec2 实例上运行的 war 文件 tomcat

> ID：10652813
> 
> 赞同：4
> 
> 时间：2012-05-18T12:39:40.617
> 
> 标签：mysql, amazon-ec2, tomcat6, cloud-hosting

我已经在 amazon linux 实例上安装了 tomcat 6.0 和 mysql 5.5。现在我想在亚马逊实例上运行的 mysql 上的 tomcate 和 .sql 文件上部署 war 文件。我是亚马逊服务的新手。请提供有关程序的详细信息。请帮助我。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T01:42:08.750

简单的方法是使用 scp 或 rsync 上传文件并重新启动 Tomcat。但是，如果您有许多服务器或 WAR，甚至更复杂的情况，请考虑其他方式：

1.  使用 jenkins 部署
2.  编写由 python-fabric 使用的部署脚本

您应该设计自己的部署过程来克服遇到的困难。在我的情况下，每个 ec2 实例都是现货实例，它们是由脚本或自动缩放创建的。我们应该使用最新的软件和 JAR 来运行网络爬虫，让每个新的 Spot 实例更新保持最新状态。我们的设计非常简单。只是一个从 S3 下载文件并解压缩的脚本：

1.  ec2 点实例完成启动
2.  运行软件更新脚本
3.  运行从更新程序获取的软件脚本

在您的情况下，您没有弄清楚一些关键点：

1.  应该更新多少个 ec2 实例？
2.  一个 ec2 实例如何知道它需要更新。
3.  （许多其他点）

部署 WAR 的最佳方式是什么？这取决于你的情况。

# magento - Magento OnePageCheckout 在“下订单”点击后重定向

> ID：10652815
> 
> 赞同：1
> 
> 时间：2012-05-18T12:39:44.283
> 
> 标签：magento, redirect

任何人都可以帮助解决以下问题。

一旦 onepagecheckout 中的客户单击“立即订购”按钮，我想显示一个自定义页面 2-3 秒，然后转发到支付提供商或感谢页面。

目前我在“checkout_type_onepage_save_order_after”上有一个观察者调用我的自定义模型/方法。

在这个模型/方法中，我做了一个......

```
$this->_forward($url); //with $url being a custom controller/method
$res->sendResponse();
exit; 
```

在这个自定义控制器/方法中，我加载并渲染我的布局，显示我的 *.phtml – 文件，然后......

```
$url = Mage::getUrl("???");
$this->_forward($url);<
$res = Mage::app()->getResponse();
$res->sendResponse(); 
```

这就是我迷失的地方（或者我可能完全错了）。首先，控制器根本不转发（无论给出什么 url 或控制器）。其次，我怎么知道重定向到哪里（如果是其支付提供商或感谢页面）

有没有更好的方法在用户单击“立即订购”之后“简单地”加载 *.phtml，然后再将他重定向到感谢页面或付款提供商。

phtml 是用户加载跟踪代码，必须在 html 中放置和加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T00:57:00.437

我建议您考虑执行以下操作：

*   在订单审核中向下订单按钮添加 javascript 操作，这将有效地发出屏幕内模式或弹出窗口
*   发出模式的单击将设置 3000 毫秒（3 秒）的超时，然后触发 Magento 使用的提交 Ajax 的订单。这很重要，因为订单提交和重定向依赖于 AJAX。

这个示例 jQuery 脚本（需要将 jQuery 添加到您的 Magento 站点，这不是标准的）将设置超时，发出模态/弹出窗口我会将此代码添加到以下文件中：

`/app/design/frontend/[your theme]/template/checkout/onepage/review/button.phtml`

向这一行添加一个类并删除 onclick 事件，以便您可以捕获单击并插入超时：

```
<button type="submit" title="<?php echo $this->__('Place Order') ?>" class="btn-place-order button btn-checkout"><span><span><?php echo $this->__('Place Order') ?></span></span></button>

<script>
    $('#myform').submit(function(event) {
        event.preventDefault();
        //issue the popup - put your html in here:
        var html = '<div style="position:absolute; top:0; left:0; min-height: 100%; width: 100%; background-color:white;"><h1>I am a popup</h1></div>';
        $('body').append(html);
        var self = this;
        window.setTimeout(function() {
        review.save();
        }, 3000);
    });
</script> 
```

# java - 如何检测对 Java 中 REST 服务器的调用是否来自移动设备？

> ID：10652816
> 
> 赞同：2
> 
> 时间：2012-05-18T12:39:45.500
> 
> 标签：java, rest, jax-ws, user-agent

我已经为 Android 设备和桌面设备开发了一个基于 Java 的 REST 服务器，现在我想在这两个实体之间有所作为。

我想知道 Android 设备何时访问方法（创建/读取/更新/删除）以及桌面 Web 应用程序何时访问。

这是我的代码的快照：

```
@Path("/v2")
public class RESTfulGeneric {

@GET
@Produces(MediaType.APPLICATION_JSON)
@Path("/get")
public Response Get() {
        ResponseBuilder builder = Response.status(Response.Status.OK);
        ....
        return builder.build();
    }

@POST
@Consumes({MediaType.APPLICATION_JSON })
@Path("/create/{Name}")
public Response Post(String Table, @PathParam("Name") String Name) {

        ResponseBuilder builder = Response.status(Response.Status.OK);
        ..........
            return builder.build();
    } 
```

}

我怎么知道，或者应该验证什么才能知道 Android 设备正在调用这些方法？

我知道有这个`request.getHeader("User-Agent")`可以帮助我，但这个请求仅在 Servlet 中可用。

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T12:53:08.113

您可以通过向请求处理方法添加参数来从请求中获取用户代理标头，即

```
public Response Post(String Table, @PathParam("Name") String Name, @HeaderParam("user-agent") String userAgent) {
    if (userAgent.contains("Android")) {
        // mobile specific logic
    }
} 
```

这是一个有用的 Android 用户代理列表...

[http://www.gtrifonov.com/2011/04/15/google-android-user-agent-strings-2/](http://www.gtrifonov.com/2011/04/15/google-android-user-agent-strings-2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-12T19:59:32.053

如果使用 spring mvc，您可以使用 @RequestHeader 注释

# python - django 1.4 - 无法比较 offset-naive 和 offset-aware 日期时间

> ID：10652819
> 
> 赞同：89
> 
> 时间：2012-05-18T12:39:51.020
> 
> 标签：python, django, timezone

我正在将应用程序从 django 1.2 迁移到 1.4。

我有一个每日任务对象，其中包含该任务应完成的时间：

```
class DailyTask(models.Model):
    time = models.TimeField()
    last_completed = models.DateTimeField()
    name = models.CharField(max_length=100)
    description = models.CharField(max_length=1000)
    weekends = models.BooleanField()

    def __unicode__(self):
        return '%s' % (self.name)

    class Meta:
        db_table = u'dailytask'
        ordering = ['name'] 
```

为了检查今天是否仍然需要完成任务，我有以下代码：

```
def getDueDailyTasks():
    dueDailyTasks=[]
    now = datetime.datetime.now()
    try:
        dailyTasks = DailyTask.objects.all()
    except dailyTask.DoesNotExist:
        return None
    for dailyTask in dailyTasks:
        timeDue = datetime.datetime(now.year,now.month,now.day,dailyTask.time.hour,dailyTask.time.minute,dailyTask.time.second)
        if timeDue<now and timeDue>dailyTask.last_completed:
            if dailyTask.weekends==False and now.weekday()>4:
                pass
            else:
                dueDailyTasks.append({'id':dailyTask.id,
                            'due':timeDue,
                             'name': dailyTask.name,
                             'description':dailyTask.description})
    return dueDailyTasks 
```

这在 1.2 下工作得很好，但在 1.4 下我得到了错误：

```
can't compare offset-naive and offset-aware datetimes 
```

由于线路

```
if timeDue<now and timeDue>dailyTask.last_completed 
```

并且两个比较子句都会引发此错误。

我尝试通过添加 pytz.UTC 作为参数来使 timeDue 时区感知，但这仍然会引发相同的错误。

我已经阅读了一些关于时区的文档，但是对于我是否只需要让 timeDue 时区知道，或者我是否需要对我的数据库和现有数据进行根本性更改感到困惑。

* * *

## 回答 #1

> 赞同：179
> 
> 时间：2012-05-18T13:01:09.933

检查[详尽的文档](https://docs.djangoproject.com/en/dev/topics/i18n/timezones/)以获取详细信息。

通常，用于`django.utils.timezone.now`制作可感知偏移的当前日期时间

```
>>> from django.utils import timezone
>>> timezone.now()
datetime.datetime(2012, 5, 18, 13, 0, 49, 803031, tzinfo=<UTC>) 
```

并`django.utils.timezone.make_aware`制作一个偏移感知日期时间

```
>>> timezone.make_aware(datetime.datetime.now(), timezone.get_default_timezone())
datetime.datetime(2012, 5, 18, 21, 5, 53, 266396, tzinfo=<DstTzInfo 'Asia/Shanghai' CST+8:00:00 STD>) 
```

然后，您可以比较两个可感知偏移的日期时间而不会遇到麻烦。

`datetime.datetime.now()`此外，您可以通过剥离时区信息将偏移感知日期时间转换为偏移天真日期时间，然后可以在 UTC 下与 normal 进行比较。

```
>>> t = timezone.now() # offset-awared datetime
>>> t.astimezone(timezone.utc).replace(tzinfo=None)
datetime.datetime(2012, 5, 18, 13, 11, 30, 705324) 
```

`USE_TZ`是`True`“默认情况下”（实际上是`False`默认情况下，但是通过将其设置为`settings.py`生成的文件），那么如果您的数据库支持时区感知时间，则与时间相关的模型字段的值将是时区感知的。您可以通过在设置中设置（或简单地删除）来禁用它。`django-admin.py startproject``True``USE_TZ=False``USE_TZ=True`

# linux - 如何在上传时自动合并

> ID：10652821
> 
> 赞同：0
> 
> 时间：2012-05-18T12:39:54.770
> 
> 标签：linux, version-control, upload, merge, compare

我正在寻找一种在上传时自动合并文件的解决方案。

更准确地说，我们是在小组中进行 Web 开发，远程在我们的 Debian 服务器上的同一个文件夹上工作，所以问题当然是如果我们经常遇到这种情况，最多需要 3 个人写同一个 php 文件，目前我们正在尝试协调何时允许哪个人处理它。

所以我的想法是如果有一个类似颠覆的解决方案，每次我们通过 sshfs 保存文件时就合并。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T12:44:09.570

您应该使用版本控制。这里有一些选项。您应该使用哪一种取决于多种因素。

*   [水银](http://mercurial.selenic.com/)
*   [吉特](http://git-scm.com/)
*   [颠覆](http://subversion.apache.org/)

然后，您可以从存储库中拉取您的站点所在的服务器。

# android - Android：UI老界面

> ID：10652825
> 
> 赞同：1
> 
> 时间：2012-05-18T12:40:01.067
> 
> 标签：android, android-layout

对于某些活动，我正在使用@Theme/Dialog，但这看起来像旧的 UI 2.3。如果我将 Manifest 中的 Activity 主题设置为 Holo/Dialog，那么这可以正常工作，但当然这不适用于旧设备。

如何在可用时强制使用 Holo 主题？

我尝试使用自定义 MyTheme，但所有具有 @android:style/Theme.Dialog 的活动仍然像旧主题一样出现。

我的活动如下所示：

```
 <activity
        android:name=".audio.TempoManager"
        android:label="Tempo Manager"
        android:theme="@android:style/Theme.Dialog" /> 
```

如果我将其更改为 @android:style/Theme.Holo.Dialog 那么在旧设备上，活动将不会作为对话框打开，而是作为简单活动打开。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T12:53:50.477

参考这篇博文。它回答了你的问题：[holo-everywhere](http://android-developers.blogspot.com/2012/01/holo-everywhere.html)

**主要是：** 1\. 你为所有pre-3.0 android 版本
编写一个`theme.xml`定义一个`MyTheme`in的文件。2.为 3.0+ android 版本`res/values/`编写一个`themes.xml`定义`MyTheme`in的文件。 3.在定义应用程序主题为。`res/values-v11/`
`AndroidManifest.xml``MyTheme`

第一个主题继承自`@android:style/Theme`.
第二个主题继承自`@android:style/Theme.Holo`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T12:43:50.887

如果 ICS 在设备上可用，它将默认为 Holo，

例如，如果您想在所有设备上通用地创建 ICS 字体，您将需要提供 ttf 字体文件资产并在自定义文本视图和/或按钮等中使用它。

# extjs - 尝试更新一个简单的仪表控件

> ID：10652829
> 
> 赞同：0
> 
> 时间：2012-05-18T12:40:13.130
> 
> 标签：extjs, extjs4

我的简介是（相对）简单的：从打开的 WebSocket 接收数值，并在收到数字时更新仪表。

**除了**能够将新号码加载到商店并让仪表响应之外，我拥有一切。

从长远来看，我想编写自己的代理来与 websocket 连接进行交互，但为了帮助理解 Ext.JS，我想手动执行此操作。

如果手动编辑的值直接反映在 Ext.JS 图表中，谁能推荐资源？

非常欢迎您提供线索，

M。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T12:54:30.657

`store.getAt(0).record.set('myGaugeVal', 10)`

试图将图表与商店分离听起来会带来痛苦。只需手动覆盖商店本身的价值

# jquery - 使用 jquery / javascript 从 href 替换或删除字符串

> ID：10652835
> 
> 赞同：0
> 
> 时间：2012-05-18T12:40:39.197
> 
> 标签：jquery, replace, href

我正在尝试使用 replace() 从我的 html 页面上的超链接中删除特定字符串。我遇到了几篇展示如何做到这一点的帖子，他们都在使用 replace() 来实现这一点。它适用于 IE，但在 FireFox 中不起作用。这是我要替换（删除）的带有字符串的代码。

在我的 html 页面上，我有指向外部网站的链接，这些链接由 pl 脚本附加，以便可以对其进行处理。我想从超链接中删除此脚本引用。

例子：`<a href="/cgi-bin/redir.pl?http://www.google.com/" target="_new">Google Search</a>`

我希望它是：`<a href="http://www.google.com/" target="_new">Google Search</a>`

`$("a[href*='/cgi-bin/redir.pl?']").attr('href', function() { return this.replace('/cgi-bin/redir.pl?',''); });`

此代码在 IE 中有效，但在 FireFox 中无效。我尝试了此代码的许多不同变体，但没有成功。我希望有人给我提示，告诉我如何让它在 FireFox 中也能工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T12:42:52.690

尝试类似的东西

```
$('a[href^="/cgi-bin/redir.pl?"]').each(function() {
    this.href = this.href.replace(/^\/cgi-bin\/redir\.pl\?/, '');

    // or $(this).attr('href', this.href.replace(/^\/cgi-bin\/redir\.pl\?/, ''));
    // or this.href = this.href.substring(18);
}); 
```

# javascript - 通过 jquery 访问类名

> ID：10652837
> 
> 赞同：0
> 
> 时间：2012-05-18T12:40:46.640
> 
> 标签：javascript, jquery

我有一个包含 3 个类的 div，例如：

```
 <div class = "a b c"> .. </div> 
```

现在我只想`class b`通过 .attr() 访问，这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T12:41:50.770

我不知道您所说的“访问”是什么意思。你可以检查一个元素是否有一个类：

```
if ($(elem).hasClass("b")) { ... } 
```

或者

```
if ($(elem).is(".b")) { ... } 
```

您可以使用简单的选择器按该类查找您的元素：

```
var with_class_b = $('.b'); 
```

如果您使用 jQuery，最好不要自己弄乱“className”属性（而不是属性）。你当然*可以*，但真的没有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T12:45:57.023

你可以使用这样的东西：

```
var classB = $('#element_id').attr('class').split(' ')[1]; 
```

# tsql - 在Access 2010中过滤包含外来字符（中文）的字段？

> ID：10652842
> 
> 赞同：1
> 
> 时间：2012-05-18T12:40:58.820
> 
> 标签：tsql, special-characters, filtering, ms-access-2010

我有一个包含外来字符的 access 2010 数据库，需要对这些数据进行过滤、搜索等...

数据使用 NVARCHAR 存储在 SQL 数据库中。从视觉上看，它们看起来不错，但是当我去搜索具有这些字符的字段时，我无法使用类似的功能。我可以得到一个精确的匹配。

我能够在 SQL 中搜索外来字符。

在我过滤这些列时附加的前端访问 2010 数据库中，我无法获得完全匹配或类似匹配。

看起来排序功能正常工作。

如何让过滤、排序等功能在 Access 2010 中正常运行？

谢谢您的帮助。

# linux - 在 Ubuntu Natty 上使用 gearmand 运行 supervisord 时出错

> ID：10652849
> 
> 赞同：0
> 
> 时间：2012-05-18T12:41:21.793
> 
> 标签：linux, ubuntu, gearman, supervisord

我正在使用 Ubuntu Natty。

我正在尝试使用 supervisord 来对 gearmand 进行去魔化。我已经安装了 gearmand 和 supervisord。

但是，每当我启动 supervisord 时，我都会收到以下日志条目：

```
2012-05-18 12:23:29,219 CRIT Supervisor running as root (no user in config file)
2012-05-18 12:23:29,287 INFO RPC interface 'supervisor' initialized
2012-05-18 12:23:29,287 CRIT Server 'unix_http_server' running without any HTTP authentication checking
2012-05-18 12:23:29,293 INFO daemonizing the supervisord process
2012-05-18 12:23:29,294 INFO supervisord started with pid 16596
2012-05-18 12:23:30,302 INFO spawned: 'gearman' with pid 16599
2012-05-18 12:23:30,312 INFO exited: gearman (exit status 127; not expected)
2012-05-18 12:23:31,318 INFO spawned: 'gearman' with pid 16630
2012-05-18 12:23:31,329 INFO exited: gearman (exit status 127; not expected)
2012-05-18 12:23:33,337 INFO spawned: 'gearman' with pid 16631
2012-05-18 12:23:33,346 INFO exited: gearman (exit status 127; not expected)
2012-05-18 12:23:36,355 INFO spawned: 'gearman' with pid 16632
2012-05-18 12:23:36,365 INFO exited: gearman (exit status 127; not expected)
2012-05-18 12:23:37,366 INFO gave up: gearman entered FATAL state, too many start retries too quickly 
```

下面是我在 supervisord.conf 中的 gearmand 程序条目

```
[program:gearman]
command=/usr/sbin/gearmand -u root
numprocs=1
directory=/usr/local/php
stdout_logfile=/var/log/supervisord.log
autostart=true
autorestart=true
user=root
stopsignal=KILL 
```

当我`/usr/sbin/gearmand -u root`在命令行中运行命令时，它可以正常工作。

不知道我做错了什么，希望得到一些帮助。

谢谢。

# linux - 创建设备文件：Linux设备驱动

> ID：10652850
> 
> 赞同：0
> 
> 时间：2012-05-18T12:41:40.710
> 
> 标签：linux, kernel, driver, device

当我不知道次要号码和主要号码（即使用动态注册）而不使用`mknod`or时如何创建设备文件`MAKEDEV`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T20:05:23.867

假设您想在插入时将主设备号动态分配给 char 设备，请使用：

int alloc_chrdev_region(dev_t *dev, unsigned int firstminor, unsigned int count, char *name);

来自 Linux 设备驱动程序第 3 版。谷歌它你可以免费获得整本书以及大量用于搞乱驱动程序的优秀源代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-17T11:55:28.447

此外，LDD3 中提供的代码现在已过时。所以，使用这个 github repo 下载 LDD3 的示例代码：[https ://github.com/martinezjavier/ldd3](https://github.com/martinezjavier/ldd3)

# c# - String.Compare 不同重载的区别

> ID：10652851
> 
> 赞同：6
> 
> 时间：2012-05-18T12:41:46.417
> 
> 标签：c#, .net, string-comparison

具体有什么区别

*   [`String.Compare(String, String, StringComparison)`](http://msdn.microsoft.com/en-us/library/e6883c06.aspx)和
*   [`String.Compare(String, String, CultureInfo, CompareOptions)`](http://msdn.microsoft.com/en-us/library/cc190529.aspx)

我觉得第二个提供了比第一个[更多的](http://msdn.microsoft.com/en-us/library/system.stringcomparison.aspx)[选项](http://msdn.microsoft.com/en-us/library/system.globalization.compareoptions.aspx)（使用任何文化而不是仅使用当前文化或不变的文化进行比较，忽略特殊字符，忽略片假名的宽度（！！）等...）。两者都已在 .NET 2.0 中引入，所以我想这不是向后兼容性的问题。

那么有什么区别，什么时候应该使用第一个，什么时候应该使用第二个？

我看过[这篇文章](https://stackoverflow.com/questions/44288/differences-in-string-compare-methods-in-c-sharp)和这篇[文章](http://msdn.microsoft.com/en-us/library/dd465121.aspx)，但我认为他们处理的问题略有不同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T12:49:26.430

您的答案在第二次重载的备注中。

[http://msdn.microsoft.com/en-us/library/cc190529.aspx](http://msdn.microsoft.com/en-us/library/cc190529.aspx)

*“比较使用文化参数来获取特定于文化的信息，例如大小写规则和单个字符的字母顺序。例如，特定文化可以指定某些字符组合被视为单个字符，即大写和小写字符以特定方式进行比较，或者字符的排序顺序取决于其前面或后面的字符。”*

另一个重载仅使用默认区域性。

# jquery - jQuery：在 blur() 事件之前触发 click()

> ID：10652852
> 
> 赞同：140
> 
> 时间：2012-05-18T12:41:49.530
> 
> 标签：jquery, click, onblur

我有一个输入字段，我尝试在其中提出自动完成建议。代码看起来像

```
<input type="text" id="myinput">
<div id="myresults"></div> 
```

在输入的`blur()`事件中，我想隐藏结果的 div：

```
$("#myinput").live('blur',function(){
     $("#myresults").hide();
}); 
```

当我在输入中写入内容时，我向服务器发送请求并获得 json 响应，将其解析为 ul->li 结构并将此 ul 放入我的`#myresults`div。

当我单击此解析的 li 元素时，我想将 li 的值设置为输入并隐藏`#myresults`div

```
$("#myresults ul li").live('click',function(){
     $("#myinput").val($(this).html());
     $("#myresults").hide();
}); 
```

一切都很顺利，但是当我点击我的 li`blur()`事件之前触发`click()`并且输入的值没有得到 li 的 html。

之前如何设置`click()`活动`blur()`？

* * *

## 回答 #1

> 赞同：329
> 
> 时间：2012-05-18T13:02:25.773

### 解决方案 1

听`mousedown`而不是`click`。

`mousedown`和`blur`事件在你按下鼠标按钮时一个接一个地发生，但只有`click`在你松开它时才会发生。

### 解决方案 2

您可以阻止下拉菜单窃取焦点`preventDefault()`。`mousedown`轻微的好处是当鼠标按钮被释放时该值将被选中，这就是原生选择组件的工作方式。[JSFiddle](http://jsfiddle.net/6yyv4rd7/)

```
$('input').on('focus', function() {
    $('ul').show();
}).on('blur', function() {
    $('ul').hide();
});

$('ul').on('mousedown', function(event) {
    event.preventDefault();
}).on('click', 'li', function() {
    $('input').val(this.textContent).blur();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T13:19:24.457

```
$(document).on('blur', "#myinput", hideResult);

$(document).on('mousedown', "#myresults ul li", function(){
     $(document).off('blur', "#myinput", hideResult); //unbind the handler before updating value
     $("#myinput").val($(this).html()).blur(); //make sure it does not have focus anymore
     hideResult(); 
     $(document).on('blur', "#myinput", hideResult);  //rebind the handler if needed
});

function hideResult() {
     $("#myresults").hide();
} 
```

[**小提琴**](http://jsfiddle.net/yjFAV/8/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-13T10:06:26.810

我遇到了这个问题，使用`mousedown`不是我的选择。

我通过`setTimeout`在处理程序函数中使用解决了这个问题

```
 elem1.on('blur',function(e) {

            var obj = $(this);

            // Delay to allow click to execute
            setTimeout(function () {
                if (e.type == 'blur') {

                  // Do stuff here

                }
            }, 250);
        });

        elem2.click( function() {
            console.log('Clicked');
        }); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-10-10T21:51:46.753

我刚刚回答了一个类似的问题：[https ://stackoverflow.com/a/46676463/227578](https://stackoverflow.com/a/46676463/227578)

mousedown 解决方案的替代方法是让它忽略由单击特定元素引起的模糊事件（即，在你的模糊处理程序中，如果它是单击特定元素的结果，则跳过执行）。

```
$("#myinput").live('blur',function(e){
     if (!e.relatedTarget || !$(e.relatedTarget).is("#myresults ul li")) {
         $("#myresults").hide();
     }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-12T16:29:53.433

当我单击非按钮元素时，Mousedown 解决方案对我不起作用。所以这是我在代码中使用模糊功能所做的：

```
.on("blur",":text,:checkbox,:radio,select",function() {
/*
* el.container 
* container, you want detect click function on.
*/
            var outerDir = el.container.find(':hover').last();
            if (outerDir.length) {
                if ($.inArray(outerDir.prop('tagName'), ["A","SELECT"] ) != -1 || outerDir.prop('type') == 'button' || outerDir.prop('type') == 'submit') {
                    outerDir.click();
                }
                if (outerDir.prop('type') == 'checkbox') {
                    outerDir.change();
                }
                return false;
            }
/*          
* YOUR_BLUR_FUNCTION_HERE;
*/
}); 
```

# javascript - JavaScript 变量 not 在 IE9 中未定义

> ID：10652856
> 
> 赞同：0
> 
> 时间：2012-05-18T12:42:00.433
> 
> 标签：javascript, jquery

你好我有下一个 JS 代码（这个代码不是我自己的）

```
 function somename(f) 
    var procName = "";
    var procParams = new Array();
    var parseEl = "";
    var parseEls = new Array();
    var parseInd = 0;
    var procParamsInd = 0;
    var IsValRead = false;
    for (i = 0; i < f.length; i++) {
        if (f[i] == "(")
            break;
        else
            procName = procName + f[i];
    }

} 
```

我将重做它以更好地在“（”之前查找数据，但我不明白为什么 procName 变量在所有浏览器中的 IE9 中始终未定义，所有浏览器都运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T14:11:41.727

我有一个模糊的回忆，至少某些版本的 IE 不支持索引来访问字符串字符。尝试使用 charAt 代替；或者更好的算法。几乎可以肯定是 f[x] 导致了你的未定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T12:47:56.417

之前获取子字符串的更好[方法](http://jsfiddle.net/gbW83/)`(`是：

```
var f = "name(2,4,5)",
    procName = f.slice(0, f.indexOf('(')); //slice from start until before "("

console.log(procName)​; //name 
```

# php - 更改时区时 strtotime() 返回零

> ID：10652858
> 
> 赞同：1
> 
> 时间：2012-05-18T12:42:03.393
> 
> 标签：php, timezone

```
$t = '01:00:00';
strtotime('January 1, 1970,'.$t) 
```

一旦我将时区更改为：

```
date_default_timezone_set('Europe/Stockholm'); 
```

怎么来的？我想以秒为单位获取存储在 $t 中的时间量。

谢谢/ E

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T12:48:22.220

1970 年 1 月 1 日，01:00 斯德哥尔摩时间**应**返回 0。UTC 时间为 1970 年 1 月 1 日 00:00。

# opengl - GLSL，信号量？

> ID：10652862
> 
> 赞同：11
> 
> 时间：2012-05-18T12:42:29.727
> 
> 标签：opengl, concurrency, glsl

我以前已经遇到了我想通过执行以下操作在图像单元中混合颜色值的问题：

```
vec4 texelCol = imageLoad(myImage, myTexel);
imageStore(myImage, myTexel, texelCol+newCol); 
```

在多个片段可以为“myTexel”具有相同值的情况下，这显然是不可能的，因为无法在 imageLoad 和 imageStore 命令之间创建原子性，并且其他着色调用可能会更改其间的纹素颜色。

现在有人告诉我，人们正在通过使用 uint 纹理上的原子命令创建信号量来解决这个问题，这样着色器会在一段时间循环中以某种方式等待，然后再访问 texel，并且一旦它空闲，就以原子方式将其写入整数纹理来阻止其他片段着色器调用，处理颜色纹素，并在完成后再次原子地释放整数纹素。

但是我无法思考这如何真正起作用以及这样的代码会是什么样子？

真的有可能做到这一点吗？可以将 GLSL 片段着色器设置为在 while 循环中等待吗？如果可能的话，有人可以举个例子吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-18T13:58:08.570

基本上，您只是在实现一个[spinlock](http://en.wikipedia.org/wiki/Spin_lock)。只是不是一个锁变量，而是整个纹理的锁。

从逻辑上讲，你在做什么是有道理的。但就 OpenGL 而言，这*实际上是行不通*的。

看，OpenGL 着色器执行模型声明调用以相对于彼此在很大程度上未定义的顺序执行。但是自旋锁只有在保证各个线程之间的向前进展的情况下才起作用。基本上，自旋锁要求正在旋转的线程不能使执行系统无法执行它正在等待的线程。

OpenGL*不提供这样的保证*。这意味着一个线程完全有可能锁定一个像素，然后停止执行（无论出于何种原因），而另一个线程出现并阻塞该像素。被阻塞的线程永远不会停止执行，拥有锁的线程永远不会重新开始执行。

这在真实系统中如何发生？好吧，假设您有一个片段着色器调用组在三角形的一些片段上执行。它们都锁定了像素。但是由于锁定区域内的条件分支，它们在执行中出现了分歧。执行的分歧可能意味着其中一些调用被转移到不同的执行单元。如果目前没有可用的，那么它们会有效地暂停，直到有一个可用。

现在，假设出现了一些其他片段着色器调用组，并在发散组*之前分配了一个执行单元。*如果该组试图对来自发散组的像素进行自旋锁定，那么它实质上是在使发散组的执行时间处于饥饿状态，等待永远不会发生的偶数。

现在显然，在真正的 GPU 中存在不止一个执行单元，但您可以想象，由于存在大量调用组，这种情况完全有可能偶尔阻塞工作。

# c# - 用 MySql 分配变量

> ID：10652867
> 
> 赞同：1
> 
> 时间：2012-05-18T12:42:48.757
> 
> 标签：c#, mysql

我想通过我在 MySql DB 中获得的值来分配我的变量 [vPrenom_id_obtenu] ...使用以下代码，我收到一条错误消息：

> 不包含“ExecuteScalar”的定义....

```
string vFistNam_id_get;
string connDataBaseStr = "server=myserver;user=####;database=myDataBase;port=3306;password=dsdfsdfsdf123;";
string sqlDataBaseSelect = "SELECT column_fistname_id FROM table_identy WHERE column_famillyname='" + vFamillyName + "'";

MySqlConnection connDataBase = new MySqlConnection(connDataBaseStr); 
connDataBase.Open();
vFistNam_id_get = (string)connDataBase.ExecuteScalar();
connDataBase.Close(); 
```

如何检索“column_fistname_id”中的值？我的表的两列的类型

Le type de deux Colonnes de ma table [column_fistname_id] 和 [column_famillyname] 是 «text'。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T12:44:58.180

ExecuteScalar 是一种调用 MySqlCommand 实例而不是 MySqlConnection 实例的方法

正确的做法是：

```
using(MySqlConnection connDataBase = new MySqlConnection(connDataBaseStr))
{
   connDataBase.Open(); 
   MySqlCommand cmd = new MySqlCommand(sqlDataBaseSelect, connDataBase);
   vFistNam_id_get = (string)cmd.ExecuteScalar(); 
} 
```

但是，由于另一个原因，您的代码是错误的。

这个 sql 字符串

```
string sqlDataBaseSelect = "SELECT column_fistname_id FROM table_identy " + 
                           "WHERE column_famillyname='" + vFamillyName + "'"; 
```

引领[SqlInjection](http://en.wikipedia.org/wiki/SQL_injection)

你应该以这种方式重写它

```
string sqlDataBaseSelect = "SELECT column_fistname_id FROM table_identy " + 
                           "WHERE column_famillyname=?family"; 
```

然后在调用 ExecuteScalar 之前向命令添加一个参数

```
cmd.Parameters.AddWithValue("?family", vFamillyName); 
```

作为附加值，您不必担心数据类型分隔符（在这种情况下为单引号）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T12:45:21.580

您需要使用 MySqlCommand 才能使用 ExecuteScalar。您还缺少源代码中的 SQL，即 select * from something 或存储的过程名称。

```
public static int GetNumRows(String OrchardName) 
{ 
// Create Connection 
MySqlConnection con = new MySqlConnection(_connectionString); 

// Create Command 
MySqlCommand cmd = new MySqlCommand(); 
cmd.Connection = con; 
cmd.CommandText = "SELECT COUNT(*) FROM orchards WHERE OrchardName = @OrchardName";
 cmd.Parameters.Add("@OrchardName", OrchardName); 

// Return Count 
con.Open(); 
Int32 NumRows = (Int32)cmd.ExecuteScalar(); 
return NumRows; 

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T12:46:03.927

例子：

```
MySqlConnection connDataBase = new MySqlConnection(connDataBaseStr);
connDataBase.Open();
MySqlCommand command = connection.CreateCommand();
command.CommandText = "SELECT column_fistname_id FROM table_identy WHERE column_famillyname='" + vFamillyName + "'";
MySqlDataReader reader = command.ExecuteReader();
string vFistNam_id_get = null;
while (reader.Read())
{   
    vFistNam_id_get = (int)reader["column_fistname_id"];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T12:47:12.577

您使用的 ADO.NET 类型错误。最简单的方法是使用 MySqlHelper 静态方法，如下所示：

```
string vFistNam_id_get = (string)
                    MySqlHelper.ExecuteScalar(dbConnString, "select `col1` from `table1`"); 
```

# codeigniter - CodeIgniter：自定义验证规则不能在助手中？

> ID：10652870
> 
> 赞同：1
> 
> 时间：2012-05-18T12:42:55.517
> 
> 标签：codeigniter, codeigniter-2

我创建了一个“验证助手”，它应该有我所有的自定义验证规则。问题是当我在表单验证中使用它们时，它们似乎被忽略了。如果我在进行表单验证的控制器中移动函数，一切都会像魅力一样工作。我的验证助手是自动加载的。

如果我将它们放在帮助器中，是否有任何理由似乎无法使用这些验证功能？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T12:46:49.320

助手和控制器中的功能明显不同。

在您的 中创建一个[扩展](http://codeigniter.com/user_guide/general/creating_libraries.html) ，在其中添加函数，最后设置*没有*函数名的规则。`MY_Form_validation.php``libraries/` *`callback_`*

 ***例子：**

```
<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class MY_Form_validation extends CI_Form_validation {

    /* set_rule('custom_require') */
    function custom_require($str) {

        return (bool)$str;

    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T13:18:11.893

罗宾的回答是最简单的处理方法；但是，您不能这样做的*原因是：*

查看您的系统/库/Form_Validation.php，行：587

```
if ( ! method_exists($this->CI, $rule))
{
  continue;
} 
```

此检查对所有回调进行。助手不是类，也不是加载到 CI 实例中 - 因此不能从 Form_Validation 库中获得（因为它是在这个方法中专门编码的方式）*

# matlab - Matlab：为什么输入错误？

> ID：10652878
> 
> 赞同：-2
> 
> 时间：2012-05-18T12:43:28.947
> 
> 标签：matlab, input

我有一个名为“binary3.tiff”的图像。

![这是我的形象](../Images/34db3179172e60a90c43ba3f55d430f1.png)

我被问到：“在以下函数（称为 func）中，图像以双精度矩阵的形式给出。在这些图像中，1 代表对象，0（黑色）代表背景。”

输入应该是什么？我试过了：

```
img = imread('binary3.tiff');
img2 = double(img)/255;
newimg = func(img2); 
```

但它不起作用。

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T14:53:58.803

如果没有有关您遇到的错误的作用和性质的更多详细信息`func`，我无法为您提供太多帮助，但您可以这样做：

```
img2 = double(img > 0); 
```

确保输入图像中的值是二进制的，然后再试一次。请注意，`0`您当然可以将任何阈值数字置于其被视为“背景”的阈值以下，而不是您。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T14:59:06.313

问题可能是由于 imread 假设 tiff 图像使用 CMYK 颜色空间而不是 RGB 颜色空间，因此制作`img=imread('image.tiff')`了一个矩阵，其第三维的大小为 4，而不是 3，因此，某些功能不起作用`img`例如，正确打开`image(img)`会引发错误，这可能就是您将输入解释为不正确的原因。

的格式`img=imread('image.tiff')`是 uint8，这意味着每个值都是 0 到 255 之间的整数，如果要将它们转换为 0 到 1 之间的双精度数，则正确的做法`img2=double(img)/255`是，将矩阵除以标量与将每个元素除以那个标量。

最后，如果您确定您的图像在 RGB 颜色空间中，您可以简单地丢弃矩阵的第 4 个颜色层，`img=imread('image.tif')`然后`img=img(:,:,1:3)`如果您这样做，并且图像确实是 RGB，则诸如此类的命令`image(img)`可以正常工作。

# knockout.js - 如何防止表单提交

> ID：10652881
> 
> 赞同：5
> 
> 时间：2012-05-18T12:43:37.230
> 
> 标签：knockout.js, sammy.js

我将 KnockoutJS 与 SammyJS 一起用于一页应用程序。

在 html 中，我有如下的表单标签

```
<form data-bind='submit: search'>
  <label>Find user:</label>
  <input data-bind='value: name' />
</form> 
```

在我的视图模型中，声明了两个函数和 sammy route url

```
function ViewModel() {
    var self = this;
    self.name = ko.observable("");
    self.search = function () {
      alert(self.name);
    };

    Sammy(function () {
        this.get('#:id', function () {
           //do something....
        });           
    }).run();
}

ko.applyBindings(new ViewModel()); 
```

所有代码都运行良好，直到我在文本框中输入内容然后提交表单。我希望在警报窗口后没有 url 浏览，但 url 更改为类似“http://localhost:8258/undefined?”的内容 我的原始网址是“http://localhost:8258”

我怀疑 sammy url 路由，所以从 javascript 代码中删除了 sammy 代码，然后 url 在警报窗口后不会改变。也许我不明白 sammy 是如何工作的。

在这种情况下如何防止 url 改变呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T22:22:23.440

Sammy 将自己绑定到表单，以便您也可以为它们注册路由。

```
<form action="#1234" method="post"> 
```

JS：

```
Sammy(function() {
    this.post('#:id', function() {
        // do something...

        return false; // avoid form submission
    });

    // ...
}).run(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-18T16:54:42.323

我也有这个问题，我在[这个答案](https://stackoverflow.com/a/14861466/1537441)中找到了解决方案。以下是如何让 Sammy.js 不理会表单：

```
Sammy(function() {

    // Your routing.. 
    this.get('#:id', function () {
       //do something....
    }); 

    // Make Sammy.js leave the forms alone!
    this._checkFormSubmission = function(form) {
        return false;
    };

}).run(); 
```

像它应该的那样工作:)

# javascript - 可以在它之外使用ajax响应吗？

> ID：10652887
> 
> 赞同：2
> 
> 时间：2012-05-18T12:44:01.363
> 
> 标签：javascript, jquery, ajax, post, global-variables

有什么办法使用`data_response`外部的`$.post()`？

这是我使用的代码的一部分：

```
$.post('do.php', { OP: "news_search", category: cat_id },
    function(data_response){
        var response = data_response; //I need to access this variable outside of $.post()
    }
}, "json");

console.log(response); //response is not defined, is what I get for now 
```

## 更新

有没有办法在全球范围内获得这种响应？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T13:03:59.037

不; `$.post`异步执行，因此当您调用 时`console.log`，AJAX 请求仍在运行，尚未产生响应。这就是回调函数的目的：提供在请求完成*后运行的代码。*如果您`console.log`进入回调函数，它应该可以工作：

```
$.post('do.php', { OP: "news_search", category: cat_id },
    function(data_response){
        var response = data_response; //I need to access this variable outside of $.post()
        console.log(response);
    }
}, "json"); 
```

* * *

**更新：**如果您希望响应数据全局可用，您可以在全局范围内声明变量，如下所示：

```
var response = null;
$.post('do.php', { OP: "news_search", category: cat_id },
    function(data_response){
        response = data_response;
        console.log(response);
    }
}, "json"); 
```

当然，唯一可以确定`response`实际填充了值的上下文是在 `$.post`line 之后提供的回调函数`response = data_response;`。如果您想在脚本的任何其他阶段使用它，那么您必须先检查它的值；像这样的东西：

```
if (response !== null)
{
    console.log(response);
} 
```

请注意，如果您直接在`$.post`调用之后放置此代码，它将不会做任何事情；它只有在 POST 请求完成后执行时才有用，在其他异步回调中（可能是某种 UI 交互事件）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T13:04:20.167

只需在回调之外声明变量，以便将其范围限定为您可以从中访问它的代码的一部分：

```
var response;

$.post('do.php', { OP: "news_search", category: cat_id },
    function(data_response){
    response = data_response; 
    }
}, "json");

console.log(response); //response is now defined - It won't be populated yet though. 
```

正如上面代码中所指出的，虽然响应将被定义，但在您调用 console.log 时它不会被填充，但是如果您在回调触发后的某个时间访问该变量，它将被填充。

如果您沿着这条路线走，您可能希望使用模块模式或闭包来避免将响应变量放在全局范围内（为了公平起见，您可能无论如何都希望这样做）

Crockford 的模块模式：[http ://www.yuiblog.com/blog/2007/06/12/module-pattern/](http://www.yuiblog.com/blog/2007/06/12/module-pattern/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T13:09:28.253

您可以使用 aa 变量，并在脚本中的任何位置检查 done()，如果完成，它将立即执行，如果没有，它将在 ajax 调用完成后执行。

```
var XHR = $.post('do.php', { OP: "news_search", category: cat_id },
    function(data_response){
        // do somehing with data_response
    }
}, "json");

function doSomethingElse() {
    XHR.done(function(response) {
        console.log(response);
    });
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T13:14:27.970

如果您需要在 $.post() 之外使用响应，并且您需要确保在 $.post() 调用之后立即填充此值，您可以尝试以同步方式进行“POST”调用。这不能用 $.post() 来实现，但可以用 $.ajax() 来实现：

```
var returnedData = null;

$.ajax({
  type: 'POST',
  url: 'do.php', 
  data: { OP: "news_search", category: cat_id },
  success: function (response) {
            returnedData = response;
        },
  dataType: "text"
});

console.log(returnedData ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-29T04:54:07.700

我让它像这样工作：

```
var returnedData = {}; //Declaring Object var not just var
$.ajax({
type: 'POST',
url: 'do.php',
data: { OP: "news_search", category: cat_id },
success: function (response) {
returnedData.result1=response;  //Add response into the Object created outside the ajax
},
dataType: "json"
});
console.log(returnedData);//inside it you can get returnedData.result1 
```

# html - 为什么下面的 html+css 会创建一个脱离屏幕底部的 div？

> ID：10652894
> 
> 赞同：0
> 
> 时间：2012-05-18T12:44:24.293
> 
> 标签：html, css

我试图为此创建一个 jsFiddle，但它无法重现我的问题。问题是，当我在 webkit（XP 上的 Chrome 或 iOS 上的 Safari）中打开以下页面时，第三个（蓝色）div 位于页面底部，而我想要的是它位于底部。

我知道我应用了一些不必要的样式；那是因为我已经从需要设置这些属性的页面中尽可能地简化了它，并且删除会停止重现问题。

页面代码为：

```
<html>
  <head>
    <style type="text/css">
      body {
        margin: 0;
      }
      .A {
        background: red;
        float: left;
        -webkit-transform-style: preserve-3d;
      }
      .B {
        background: green;
        height: 100%;
      }
      .C {
        background: blue;
        position: fixed;
        bottom: 0px;
      }
    </style>
  </head>
  <body>
    <div class="A">
      1
      <div class="B">
        2
      </div>
      <div class="C">
        3
      </div>
    </div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T12:51:21.063

将您的`height: 100%`从移动`.B`到`.A`

问题是你的包含元素（div A）没有定义高度，所以会自动调整大小以适应它的内容。div B 嵌套在其中并定义了 100% 的高度，因此 div A 将是 100% + div C，导致 div C 离开屏幕底部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T12:52:00.367

> 将此类应用于要在页面底部显示的最后一个 div

```
.footer
 {
    width:100%;
    height:30px;
    float:left; 
    z-index:999;
    text-align: center;
    line-height:30px;
    position:fixed;
    bottom:0px; 
```

}

# asp.net - 如何使 CSS 和 JS 不随每个请求提交 cookie？

> ID：10652898
> 
> 赞同：3
> 
> 时间：2012-05-18T12:44:53.070
> 
> 标签：asp.net, .net, iis-7, asp.net-4.0

CSS 和 JS 文件携带带有单独请求的 cookie。是否有任何技巧可以禁用带有单个标头的携带 cookie 以及请求和响应标头？对于 JS 和 CSS 文件，应该不需要携带这些。

我正在使用 IIS 7 和 Asp.Net 4.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T13:00:57.877

您需要使用不同的域，即通常网站会设置`static.yourwebsite.com`.

只要 cookie 域设置为仅原始域，就不会发送到`static.bla.com`

`static.bla.com`当然可以指向同一个站点/服务器，但对于浏览器来说，它是一个不同的域。

# symfony - 使用“命名空间”在 Symfony2 中使用 Doctrine 创建新实体

> ID：10652899
> 
> 赞同：4
> 
> 时间：2012-05-18T12:44:53.237
> 
> 标签：symfony, doctrine-orm

您知道在 Symfony2 中可以定义一个新实体，如下例所示：

```
use Acme\StoreBundle\Entity\Product;

public function defaultController() {
    $product = new Product();
    $product->setName('Pippo');
    $product->setPrice(19.99);
    ....
    // Use Doctrine EntityManager to store the Product object
} 
```

假设您知道*Product*类具有以下命名空间：“ **AcmeHomeBundle:Product** ”。通过使用命名空间（例如，使用 EntityManager 或类似的东西）来创建*$product对象会很不错。*

```
public function defaultController() {
    $item = createObjectFromNamespace("AcmeHomeBundle:Product");
    $item->setName('Pippo');
    $item->setPrice(19.99);
    ....
    // Use Doctrine EntityManager to store the Item object
} 
```

你知道这是否可能吗？

假设您有一个提供实体类型的字符串

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-22T12:18:17.873

你应该做这个...

```
$entityInfo = $this->em->getClassMetadata("entityNameSpace:entityName");
$entityMember = $entityInfo->newInstance(); 
```

如果你想通过字符串使用 setter 方法：

```
$entitySetMethod = "set".\ucfirst("entityDataMemberName");
\call_user_func(array($entityMember, $entitySetMethod), $parameter); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T16:28:50.687

如果你真的想要，你可以这样做：

```
$product = new Acme\JournalBundle\Entity\Product();
$article = new Acme\JournalBundle\Entity\Article(); 
```

但是每次您想在该命名空间中创建一个新实体时都必须输入它。如果您只是在类的顶部使用了 use 语句：

```
use Acme\JournalBundle\Entity\Product,
    Acme\JournalBundle\Entity\Article; 
```

然后，您可以使用简单的方法创建新文章和产品：

```
$product = new Product();
$article = new Article(); 
```

他们做同样的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T13:21:32.763

*Acme\StoreBundle\Entity\Product* **是**您实体的命名空间。*AcmeStoreBundle:Product*只是命名空间的别名，在 DQL 中用作真实命名空间的更短替代方案。

为什么要创建具有别名命名空间的对象？我想您可以使用别名创建某种工厂，将其映射到真正的命名空间，创建一个对象并返回它。但有什么意义呢？

实体别名通过配置定义：http: [//www.doctrine-project.org/api/orm/2.2/source-class-Doctrine.ORM.Configuration.html#153](http://www.doctrine-project.org/api/orm/2.2/source-class-Doctrine.ORM.Configuration.html#153)

您不仅可以设置它们，还可以检索它们，因此如果您确实需要此功能，您应该能够使用 Configuration 实例来执行此操作。

在 Doctrine 文档中很难找到有关实体别名的任何信息。Symfony 文档[稍微解释了它的目的](http://symfony.com/doc/current/reference/configuration/doctrine.html#mapping-configuration)：

> alias - Doctrine 提供了一种将实体命名空间别名为更简单、更短的名称的方法，以便在 DQL 查询或存储库访问中使用。使用捆绑包时，别名默认为捆绑包名称。

# java - jboss 5.1 服务器

> ID：10652912
> 
> 赞同：1
> 
> 时间：2012-05-18T12:45:34.257
> 
> 标签：java, jboss5.x

jboss 4.2.2 和 jboss 5.1 的体系结构略有不同。jboss 5.1中“F:\jboss-4.2.2.GA\server\default\deploy\jboss-web.deployer\conf\web.xml”的相关架构是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:38:57.623

您要查找的部署程序文件位于：

```
jboss-5.1.0.GA/server/default/deployers/jbossweb.deployer 
```

# c# - SpecsFor 是否与 MSTest 一起使用？

> ID：10652915
> 
> 赞同：1
> 
> 时间：2012-05-18T12:45:58.350
> 
> 标签：c#, mstest, bdd

.NET的[SpecsFor](http://specsfor.com/)行为驱动开发框架与 NUnit 一起打包并显然利用了 NUnit。

我喜欢 MSTest 集成到 Visual Studio 中的方式，但我也对 SpecFor 的规范测试方法感兴趣。

所以问题是：

SpecsFor 与 MSTest 兼容吗？它需要 NUnit 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T16:32:34.140

查看它的[源代码](https://github.com/MattHoneycutt/SpecsFor)与`SpecsFor`高度集成，`NUnit`所以恐怕但没有简单的方法来使用`MSTest`.

但是，您可以使用[TDD.Net](http://www.testdriven.net/)或[Resharper](http://www.jetbrains.com/resharper/features/unit_testing.html)等商业测试运行器之一在 VS 中使用`NUnit`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-19T22:14:02.293

请访问以下链接，您将得到答案：

[https://github.com/MattHoneycutt/SpecsFor/issues/86](https://github.com/MattHoneycutt/SpecsFor/issues/86)

谢谢。

# sql - T-SQL 将行分组为列

> ID：10652921
> 
> 赞同：9
> 
> 时间：2012-05-18T12:46:15.097
> 
> 标签：sql, sql-server-2008, tsql, grouping

如何将（未知）数量的行分组到设置列确定分组的单行中？

例如，移位

```
Ref      Name            Link
==============================
1        John            L1
1        John            L2
1        John            L8
2        Steve           L1
2        Steve           L234 
```

进入

```
Ref      Name            ...    ...    ...
==========================================
1        John            L1     L2     L8
2        Steve           L1     L234   NULL 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-18T13:08:09.923

您可以使用 row_number() 作为列名的来源来旋转表：

```
select *
from
(
  select ref, 
         name, 
         link,
         row_number() over (partition by ref, name order by link) rn
  from table1
) s
pivot (min (link) for rn in ([1], [2], [3], [4])) pvt 
```

如果您有更多行，只需扩展数字列表。

[现场测试是@Sql Fiddle](http://sqlfiddle.com/#!3/79e65/11)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-18T13:07:53.160

如果不同链接的数量未知，则需要动态完成。我认为这将按要求工作：

```
DECLARE @SQL NVARCHAR(MAX) = ''
SELECT  @SQL = @SQL + ',' + QUOTENAME(Rownumber)
FROM    (   SELECT  DISTINCT ROW_NUMBER() OVER(PARTITION BY Ref, Name ORDER BY Link) [RowNumber]
            FROM    yourTable
        ) d

SET @SQL = 'SELECT  *
            FROM    (   SELECT  Ref, 
                                name, 
                                Link, 
                                ROW_NUMBER() OVER(PARTITION BY Ref, Name ORDER BY Link) [RowNumber]
                        FROM    yourTable
                    ) data
                    PIVOT
                    (   MAX(Link)
                        FOR RowNumber IN (' + STUFF(@SQL, 1, 1, '') + ')
                    ) pvt'

EXECUTE SP_EXECUTESQL @SQL 
```

它与通常的 PIVOT 函数略有不同，因为通常`link`位于列标题中。它基本上确定了所需的列数（即每个引用/名称的链接的最大不同值），然后将值旋转到这些列中。

# javascript - 为什么我的 favicon 没有出现在 Firefox 和 IE 中？

> ID：10652922
> 
> 赞同：1
> 
> 时间：2012-05-18T12:46:15.433
> 
> 标签：javascript, jquery, css, html

我在该`<head>`区域指定了这样的网站图标：

```
<link href="/Content/images/icons/tick-circle.png" type="image/x-icon" rel="shortcut icon">
<link href="/Content/images/icons/tick-circle.png" type="image/png" rel="icon"> 
```

位置是正确的，但是当我打开一个页面时，我仍然看不到我的图标。我认为这是为最新版本的 IE 和 Firefox 指定 ico 的两种最新方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T13:13:36.270

尽管您的 favicon 可以是 png，但在我看来，以 .ico 结尾的实际文件效果最好。此外，使用完整的域名（即[http://www.domain.com/images/favicon.ico](http://www.domain.com/images/favicon.ico)），不要依赖相对链接。如果您尝试在浏览器中加载网站图标但失败，则只需刷新页面就不会重新加载它。清除浏览器的缓存，然后尝试查看图标是否出现。

以下 3 个图标链接适用于 FF、Opera、Chrome、IE 和 Apple 产品

您的代码“应该”如下所示：

```
<link rel="icon" href="http://www.domain.com/content/images/icons/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="http://www.domain.com/content/images/icons/favicon.ico" />
<link rel="apple-touch-icon" href="http://www.domain.com/content/images/icons/favicon.ico"> 
```

如果您想保留没有 .ico 扩展名的相对链接：

```
<link rel="icon" href="/content/images/icons/tick-circle.png" type="image/x-icon" />
<link rel="shortcut icon" href="/content/images/icons/tick-circle.png" />
<link rel="apple-touch-icon" href="/content/images/icons/tick-circle.png"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T13:03:34.760

您的 .htaccess 中是否有类似的内容以及已编辑的图像或其他内容

```
# Sample of what if have in mine. this restricts the download the time you specify
# 480 weeks
<FilesMatch "\.(ico|pdf|flv|jpg|jpeg|png|gif|swf)$">
Header set Cache-Control "max-age=290304000, public"
</FilesMatch> 
```

远程是你的问题。但这样的事情可能会阻止浏览器检索这些文件扩展名。在这种情况下，尝试清除浏览器的缓存？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T12:52:47.287

favicon 是那些奇怪的问题之一。

在网站的根目录上制作网站图标并将其命名为`favicon.ico`ie

```
<link href="/favicon.ico" rel="shortcut icon" rel="icon" /> 
```

请参阅 Wikipedia [http://en.wikipedia.org/wiki/Favicon中的“可访问性”部分](http://en.wikipedia.org/wiki/Favicon#Accessibility)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T12:56:45.053

试试下面的代码。

```
<link rel="shortcut icon" href="your icon path"> 
```

确保完成后删除所有缓存并重新启动浏览器。添加后，只有 chrome 会在现场显示。

也尝试使用 ico 文件而不是 png 或其他文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T12:57:17.303

较旧的浏览器希望这是`.ico`格式，而不是 png。考虑改变它。

您可以通过转换器简单地做到这一点，比如[这个](http://www.convertico.com/)。

Appart from that, 按照上面提到的那样做，并喜欢它

```
 <link href="\favicon.ico" rel="shortcut icon" rel="icon" /> 
```

反而。

为了解决这个问题，清空所有缓存而不仅仅是最后几个小时可能会奏效。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-18T13:20:35.717

PNG 从未在 IE 中用于网站图标。就在昨天，我读到 Firefox 更改为仅使用 .ico 格式，但我无法确认这一点。我试过了，发现 png 在 FF 中也对我不起作用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-18T13:24:45.540

我不确定 IE，但出于安全原因，FireFox 已决定不再显示网站图标（即，您可以将绿色“锁”作为您的网站图标，并可能误导用户相信您的网站是安全的。）

这是一篇文章：http: [//www.neowin.net/news/firefox-removing-favicons-from-the-address-bar](http://www.neowin.net/news/firefox-removing-favicons-from-the-address-bar)

**更新**：至于图标...使用此标记：

```
<link rel="shortcut icon" href="images/favicon.png" type="image/x-icon" /> 
```

`Content`我相信您原始代码的问题是在指向图标的路径中之前的“/” 。

# function - 在 Corona 中一个接一个地正确执行功能？

> ID：10652925
> 
> 赞同：0
> 
> 时间：2012-05-18T12:46:19.803
> 
> 标签：function, coronasdk

所以我已经尝试了几天来解决这个问题。我正在用 Corona 制作一种简单的块代码游戏，但我无法让播放按钮的功能按顺序实际播放。我有九个不同的盒子，它们应该一个接一个地播放放入其中的动作，但相反，所有东西都在一个大糊状物中一起播放。它的代码有点长，因为它应该检测什么块函数存在或不存在。

```
---------------------------------------------

-----button image------

local play = display.newImage ("GoButton.png")
    play.x = display.contentWidth /2 - 140
    play.y = display.contentHeight /2 + 20

------later used Variables---

local b1 = 0
local b2 = 0
local b3 = 0
local b4 = 0
local b5 = 0
local b6 = 0
local b7 = 0
local b8 = 0
local b9 = 0

-----Play button code-----

function play:tap ( event ) 

function play1 ()
-------------------------Box 1------------------------------------------
    if b1 == 0 then
        Mascot.alpha = 1
        end

    if b1 == 1 then
        Mascot:applyLinearImpulse( 1, 0, Mascot.x, Mascot.y )
        end

    if b1 == 2 then
        Mascot:applyLinearImpulse( -1, 0, Mascot.x, Mascot.y )
    end

    if b1 == 3 then 
        Mascot:applyLinearImpulse( 0, -1, Mascot.x, Mascot.y )
    end

    if b1 == 4 then
        Mascot.alpha = 0.5
    end

    if b1 == 5 then
            Mascot.xScale = -1
        end
    end

function play2 ()
-------------------------Box 2------------------------------------------
    if b2 == 0 then
        Mascot.alpha = 1
        end

    if b2 == 1 then
        Mascot:applyLinearImpulse( 1, 0, Mascot.x, Mascot.y )
        end

    if b2 == 2 then
        Mascot:applyLinearImpulse( -1, 0, Mascot.x, Mascot.y )
    end

    if b2 == 3 then 
        Mascot:applyLinearImpulse( 0, -1, Mascot.x, Mascot.y )
    end

    if b2 == 4 then
        Mascot.alpha = 0.5
    end

    if b2 == 5 then
            Mascot.xScale = -1
        end

end
timer.performWithDelay( 5000, play2)

function play3 ()
-------------------------Box 3------------------------------------------
    if b3 == 0 then
        Mascot.alpha = 1
        end

    if b3 == 1 then
        Mascot:applyLinearImpulse( 1, 0, Mascot.x, Mascot.y )
        end

    if b3 == 2 then
        Mascot:applyLinearImpulse( -1, 0, Mascot.x, Mascot.y )
    end

    if b3 == 3 then 
        Mascot:applyLinearImpulse( 0, -1, Mascot.x, Mascot.y )
    end

    if b3 == 4 then
        Mascot.alpha = 0.5
    end

    if b3 == 5 then
            Mascot.xScale = 1
        end
end
timer.performWithDelay( 5000, play3)

function play4 ()
-------------------------Box 4------------------------------------------
    if b4 == 0 then
        Mascot.alpha = 1
        end

    if b4 == 1 then
        Mascot:applyLinearImpulse( 1, 0, Mascot.x, Mascot.y )
        end

    if b4 == 2 then
        Mascot:applyLinearImpulse( -1, 0, Mascot.x, Mascot.y )
    end

    if b4 == 3 then 
        Mascot:applyLinearImpulse( 0, -1, Mascot.x, Mascot.y )
    end

    if b4 == 4 then
        Mascot.alpha = 0.5
    end

    if b4 == 5 then
            Mascot.xScale = -1
        end

end
timer.performWithDelay( 5000, play4)

function play5 ()
-------------------------Box 5------------------------------------------
    if b5 == 0 then
        Mascot.alpha = 1
        end

    if b5 == 1 then
        Mascot:applyLinearImpulse( 1, 0, Mascot.x, Mascot.y )
        end

    if b5 == 2 then
        Mascot:applyLinearImpulse( -1, 0, Mascot.x, Mascot.y )
    end

    if b5 == 3 then 
        Mascot:applyLinearImpulse( 0, -1, Mascot.x, Mascot.y )
    end

    if b5 == 4 then
        Mascot.alpha = 0.5
    end

    if b5 == 5 then
            Mascot.xScale = -1
        end

end
timer.performWithDelay( 5000, play5)

function play6 ()
-------------------------Box 6------------------------------------------
    if b6 == 0 then
        Mascot.alpha = 1
        end

    if b6 == 1 then
        Mascot:applyLinearImpulse( 1, 0, Mascot.x, Mascot.y )
        end

    if b6 == 2 then
        Mascot:applyLinearImpulse( -1, 0, Mascot.x, Mascot.y )
    end

    if b6 == 3 then 
        Mascot:applyLinearImpulse( 0, -1, Mascot.x, Mascot.y )
    end

    if b6 == 4 then
        Mascot.alpha = 0.5
    end

    if b6 == 5 then
            Mascot.xScale = -1
        end
end
timer.performWithDelay( 5000, play6)

function play7 ()
-------------------------Box 7------------------------------------------
    if b7 == 0 then
        Mascot.alpha = 1
        end

    if b7 == 1 then
        Mascot:applyLinearImpulse( 1, 0, Mascot.x, Mascot.y )
        end

    if b7 == 2 then
        Mascot:applyLinearImpulse( -1, 0, Mascot.x, Mascot.y )
    end

    if b7 == 3 then 
        Mascot:applyLinearImpulse( 0, -1, Mascot.x, Mascot.y )
    end

    if b7 == 4 then
        Mascot.alpha = 0.5
    end

    if b7 == 5 then
            Mascot.xScale = -1
        end

end
timer.performWithDelay( 5000, play7)

function play8 ()
-------------------------Box 8------------------------------------------
    if b8 == 0 then
        Mascot.alpha = 1
        end

    if b8 == 1 then
        Mascot:applyLinearImpulse( 1, 0, Mascot.x, Mascot.y )
        end

    if b8 == 2 then
        Mascot:applyLinearImpulse( -1, 0, Mascot.x, Mascot.y )
    end

    if b8 == 3 then 
        Mascot:applyLinearImpulse( 0, -1, Mascot.x, Mascot.y )
    end

    if b8 == 4 then
        Mascot.alpha = 0.5
    end

    if b8 == 5 then
            Mascot.xScale = -1
        end
end
timer.performWithDelay( 5000, play8)

function play9 ()
-------------------------Box 9------------------------------------------
    if b9 == 0 then
        Mascot.alpha = 1
        end

    if b9 == 1 then
        Mascot:applyLinearImpulse( 1, 0, Mascot.x, Mascot.y )
        end

    if b9 == 2 then
        Mascot:applyLinearImpulse( -1, 0, Mascot.x, Mascot.y )
    end

    if b9 == 3 then 
        Mascot:applyLinearImpulse( 0, -1, Mascot.x, Mascot.y )
    end

    if b9 == 4 then
        Mascot.alpha = 0.5
    end

    if b9 == 5 then
            Mascot.xScale = -1
        end 

 b1 = 0
 b2 = 0
 b3 = 0
 b4 = 0
 b5 = 0
 b6 = 0
 b7 = 0
 b8 = 0
 b9 = 0

    if walk == 1 then
        walkSpawn:removeSelf()
        walk = 0
    end

    if attack == 1 then
        attackSpawn:removeSelf()
        attack = 0
    end

    if jump == 1 then
        jumpSpawn:removeSelf()
        jump = 0
    end

    if flip == 1 then
        flipSpawn:removeSelf()
        flip = 0
    end

    if face == 1 then
        faceSpawn:removeSelf()
        face = 0
    end

end
timer.performWithDelay( 5000, play9)

print ("derp")

Runtime:addEventListener("enterFrame", play1)
Runtime:addEventListener("enterFrame", play2)
Runtime:addEventListener("enterFrame", play3)
Runtime:addEventListener("enterFrame", play4)
Runtime:addEventListener("enterFrame", play5)
Runtime:addEventListener("enterFrame", play6)
Runtime:addEventListener("enterFrame", play7)
Runtime:addEventListener("enterFrame", play8)
Runtime:addEventListener("enterFrame", play9)

end

play:addEventListener("tap", play)

--------------------------------------- 
```

如果有人能帮忙，那将是一个巨大的帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T06:44:11.723

好的！首先，我认为您不了解“enterFrame”侦听器的作用。添加代码时

```
Runtime:addEventListener("enterFrame", play1) 
```

对于游戏的每一帧（每秒大约执行 30 帧），函数 play1 被执行。在上面的代码中，您**为每个函数**和每次**点击事件**添加了一个“enterFrame”侦听 器。因此每个函数将在每一帧被多次调用。除非我大错特错，否则这可能不是您想要的。

由于您已经使用

```
timer.performWithDelay( 5000, play<n>) 
```

您应该删除 Enterframe 侦听器。

你到底想在这里实现什么？如果您可以更具体，它会更容易帮助你

# ios - 在 ios 中是否有可能以编程方式呼叫一个人，然后让他/她听到预先录制的语音/音频？

> ID：10652935
> 
> 赞同：1
> 
> 时间：2012-05-18T12:46:51.993
> 
> 标签：ios

我想知道是否可以使用公共 API 以编程方式呼叫一个人，然后她一拿起电话，就让她听到预先录制的语音消息/音频？

在我收到诸如我为什么要这样做，或者它的用户体验不好之类的评论之前，我只想澄清一下，这个问题更多的是在技术方面而不是在实施方面，所以如果你有任何指示，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T12:51:24.533

我知道给某人打电话的唯一方法是 `openURL`使用`UIApplication`该 `tel:`方案。

这将启动 Call 应用程序，该应用程序获得焦点，您无法使用它播放自己的消息。

你可能已经知道了，`openURL`但我想我会提到它以防万一，即使它不能帮助你播放预先录制的消息。

# jquery - jquery 自动完成源重定向

> ID：10652938
> 
> 赞同：1
> 
> 时间：2012-05-18T12:47:00.307
> 
> 标签：jquery, jsp, redirect, autocomplete, jsonp

我遇到了 jquery 自动完成功能的问题。如果我指定一个不重定向的源，我的自动完成工作没有问题（这是在我的测试环境中）。对于生产，这必须在我们的工作流工具中工作。

jquery 源的页面也写在这个工作流工具中，并输出数据。唯一的问题是，当我使用 GET 参数调用此输出页面时，它会将我重定向到另一个包含 JSON 结果的页面。

jquery 似乎对此有点问题，因为我没有得到任何建议。

这是输入字段的 jquery：

```
$(function() {
        $("#unameLeiter").autocomplete({
            source: function(request, response) {
                $.ajax({
                    url: "http://localhost:8082/ivy/pro/designer/ldapCurrent2/137553578A7A2B3F/persons.ivp",
                    dataType: "jsonp", 
                    data: {
                        search: request.term
                    },
                    success: function(data) {
                        response($.map(data.persons, function(item) {
                            return {
                                label: item.cn,
                                value: item.imPersonalNumber
                            }
                        })); 
                    }

   });
        },
        minLength: 0,
        select: function(event, ui) {
            $("<div/>").text(ui.item.label + " " + ui.item.value).prependTo("#output");
        }
    })
}) 
```

HTML 看起来很糟糕，但这不是重要的部分，因为只有输入字段和输出 div。当我查看网络请求时，我可以看到 jquery 正确调用了“源”url，但随后被重定向到另一个 URL（显示的结果就是我搜索的结果）。

那么，如何在 jquery 中处理重定向到实际输出的源？

总结

1.  jquery 发送这样的数据`http://source/persons.ivp?callback=jquery87346&search=John`
2.  工作流工具获取参数、处理它们并重定向到新的 url`http://source/L84FJ8LA4LS/CMSObject.ivc?taskId=84&processId=LKIA47&pid=KS4U6T84LSZ`
3.  新 URL 包含参数的结果`John`
4.  `302 permanently moved`由于重定向，jQuery 不处理结果。

我无法更改此工作流工具的行为。所以我必须用 jQuery 来解决这个问题。

**更新**：我注意到输出 JSON 数据的 JSP 文件对我的输出进行 html 编码，这似乎扰乱了 jquery。有谁知道我如何在**没有**html 编码的情况下在 JSP 中打印数据？

当我查看输出页面的源代码时它的外观： `jquery1234({&quot;total&quot;:&quot;2&quot;, &quot;persons&quot;:[{&quot;cn&quot;:&quot;John Smith&quot;, &quot;imPersonalNumber&quot;:&quot;5616&quot;},{&quot;cn&quot;:&quot;Peter Jackson&quot;, &quot;imPersonalNumber&quot;:&quot;7016743&quot;}]})`

正常的样子：

```
jquery1234({"total":"2", "persons":[{"cn":"John Smith", "imPersonalNumber":"5616"},{"cn":"Peter Jackson", "imPersonalNumber":"7016743"}]}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T09:43:53.027

事实证明，问题不在于重定向。事实是该工具逃脱了整个数据。在我发现如何阻止他这样做之后，一切都很好。

# c# - 比较 MongoDB 中的字段值

> ID：10652946
> 
> 赞同：0
> 
> 时间：2012-05-18T12:47:14.070
> 
> 标签：c#, mongodb, indexing

我有两个集合 A 和 B 用于 A 包含

```
{
  "_id" : ObjectId("4fb2143af31dfd122ce39c4b"),
  "Name" : "Freelander 2.2D",
  "Manufacture" : "Landrover"
} 
```

和乙，

```
{
  "_id" : ObjectId("4fb21439f31dfd122ce39c4a")      
  "Name" : "Rangerover",
  "Manufacture" :  "Landrover",

} 
```

让我知道如何检查 C# 驱动程序中 A 和 B 的字段值是否相同（这里是“名称”具有不同的值）。如果发现差异，我也需要更新

请对此有所了解，在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T12:49:35.137

您不能执行涉及多个集合的查询。一个查询 - 一个集合，一个时期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T15:32:18.820

好吧，Sergio 基本上是对的（我看不到使用语言驱动程序的方法），但可以使用 shell：

```
var a_in_b = function(o){ 
   var numB = db.B.find({Name:o.Name}).count();
   if (numB > 0) print (o.Name + " is in both A and B");
} 

> db.A.find()
{ "_id" : ObjectId("4fb2143af31dfd122ce39c4b"), "Name" : "Freelander 2.2D", "Manufacture" : "Landrover" }
> db.B.find()
{ "_id" : ObjectId("4fb667d60569d84fec6ef57e"), "Name" : "Rangerover", "Manufacture" : "Landrover" }
{ "_id" : ObjectId("4fb66a830569d84fec6ef57f"), "Name" : "Freelander 2.2D", "Manufacture" : "Landrover" }
> db.A.find().forEach(a_in_b);
Freelander 2.2D is in both A and B 
```

如果您的要求是与管理员相关的，那么这可能就是您正在寻找的。如果您想从 C# 驱动程序中执行此操作（我猜像 SQL 连接），那么不，您不能。

# javascript - 在 JavaScript 中使用正则表达式

> ID：10652953
> 
> 赞同：0
> 
> 时间：2012-05-18T12:47:46.907
> 
> 标签：javascript, regex, xul

我正在尝试开发一个以以下模式选择单词的应用程序：`([az] * \. [az] *)`，制作了以下 JavaScript 函数并在 XUL Explorer 中执行它。

```
<?xml-stylesheet href="chrome://global/skin/" type="text/css"?>
<window id="yourwindow"
        xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
        xmlns:html="http://www.w3.org/1999/xhtml"
        xmlns:h="http://www.w3.org/1999/xhtml">
  <button label="click" oncommand="fpatt()" />

  <script type="text/javascript"> <![CDATA[ // put some js code here
    function fpatt(){
      var text = "supermercardo, tooc hip.ermercadotoooooc, mercado"; 
      var patt = "([a-z]*\.[a-z]*)"; 
      alert( text.match( patt ) );
    }
  ]]> </script>
</window> 
```

结果在警报中：`supermercardo,, supermercardo,`; 当我在所选站点上运行相同的脚本时，结果是 regexpal.com: `ip.mercadotoooooc`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:31:10.030

`"([a-z]*\.[a-z]*)"`不是正则表达式 - 它是一个字符串。并且在一个字符串`\.`中是完全一样的`.`。要将您的正则表达式解释为正则表达式，您应该将其指定为正则表达式文字：

```
var patt = /([a-z]*\.[a-z]*)/; 
```

有关此更改的代码，请参见[http://jsfiddle.net/N6qj7/](http://jsfiddle.net/N6qj7/)（并且 - 不，这与 XUL 完全无关，只是旧的纯 JavaScript）。

[文档](https://developer.mozilla.org/en/JavaScript/Guide/Regular_Expressions)

# centos - 我的应用程序停止使用 xulrunner 10.0.4

> ID：10652954
> 
> 赞同：0
> 
> 时间：2012-05-18T12:47:51.440
> 
> 标签：centos, xulrunner, centos6

当我升级到`centos 6`and`xulrunner 10.0.4`时，我的应用程序停止工作。Xulrunner 只是挂了。

我的目录结构：

```
.
|-- application.ini
|-- chrome
|   |-- chrome.manifest
|   `-- content
|       |-- main.xul
|       `-- main.xul.tpl.org
|-- defaults
|   `-- preferences
|       `-- prefs.js 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:27:45.890

根据 developer.mozilla.org 的[示例应用程序](https://developer.mozilla.org/en/Getting_started_with_XULRunner)，您的应用程序缺少包含以下内容`chrome.manifest`的兄弟文件`application.ini`：

```
manifest chrome/chrome.manifest 
```

有趣的是它适用于 xulrunner 12.0，但不适用于 10.0。只需添加文件，您的应用程序就可以工作了。

# jquery-mobile - JqueryMobile ListView中列表项之间的虚线

> ID：10652963
> 
> 赞同：1
> 
> 时间：2012-05-18T12:48:19.003
> 
> 标签：jquery-mobile, cordova, windows-mobile

我正在使用jquery mobile listview，它工作正常。在列表项之间的 jquery 列表中，我可以看到一些看起来像分隔符的空间。我想用列表项之间的虚线而不是那个空格来分隔它们。我怎样才能做到这一点？谁能帮帮我吗。我希望我的问题很清楚。

像这样的东西：

```
List1
...........................
List2
...........................
List3
........................... 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T13:49:54.260

你可以使用这样的东西：

```
 .dotted-list li{
            border-style:dotted;
            border-color:#000;
        }
        .dotted-list li:first-of-type{
            border-style:solid ;
            border-color:#ff0000;
        }

        .dotted-list li:last-of-type{
            border-bottom-style:solid ;
            border-bottom-color:#ff0000;
        } 
```

列表定义为：

```
 <ul data-role="listview" class="dotted-list">
        <li><a href="#">Test1</a></li>
        <li><a href="#">Test2</a></li>
        <li><a href="#">Test3</a></li>
        <li><a href="#">Test4</a></li>
        <li><a href="#">Test5</a></li>
      </ul> 
```

这里有一个演示 - [http://jsfiddle.net/wYSqk/](http://jsfiddle.net/wYSqk/)

# velocity - 新结构字段不为空

> ID：10652966
> 
> 赞同：1
> 
> 时间：2012-05-18T12:48:23.820
> 
> 标签：velocity, liferay-6, liferay-velocity

我正在通过为结构添加新字段来更改我的 liferay 速度模板。例如'heading1'，然后将这个新字段添加到模板中：

```
<h1>Heading is: $heading1.data</h1> 
```

但如果结构字段尚未填充，则结果为：

> 标题是：$heading1.data

所以我想我可以通过以下方式解决这个问题：

```
#if($heading1.data!="")<h1>Heading is: $heading1.data</h1>#end 
```

但结果还是：

> 标题是：$heading1.data

如果我打开 Web 内容并发布它，那么结果是正确的，它不会显示任何内容，但我不想找到所有类似的 Web 内容并开始手动发布它们。

那么有没有办法检查标题是否没有填充？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T06:26:23.387

您可以使用*静默引用*来告诉 Velocity 不要显示空引用：

```
<h1>Heading is: $!heading1.data</h1> 
```

也可以直接测试其内容是否存在：

```
#if($headings1.data) <h1>Heading is: $heading1.data</h1> #end 
```

在 Velocity 1.7 之前，如果引用为 null 或未初始化，此测试将为 false，但如果引用包含空字符串，则仍然为 true。在下一个版本中，空字符串也将评估为 false。

# spring - jsf2 spring托管bean调用构造函数和postconstruct仅在tomcatstartup上

> ID：10652967
> 
> 赞同：1
> 
> 时间：2012-05-18T12:48:24.683
> 
> 标签：spring, jsf-2, managed-bean

我正在使用 JSF+Spring 项目我的 spring maanged bean 是 ViewScoped

我的储蓄状态是客户。

```
<context-param>
        <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
        <param-value>client</param-value>
    </context-param> 
```

以下是我的bean，我发现bean的构造函数和postconstruct方法仅在tomcat启动时调用，当它是spring托管bean时，如果它是JSF托管bean构造函数，并且postconstruct在每次页面刷新时调用。如果我想在 Spring 托管 bean 下每次都在页面刷新上调用方法，这是真正的行为吗？ id 应该做什么？

```
@Component
@ViewScoped
public class DataTableBean implements Serializable{

public DataTableBean() {
        super();
}

@PostConstruct
    private void loadDataData(){
        System.out.println("Post constructing");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T12:54:37.067

这`@Component`是一个 Spring 特定的注解，用于通过 Spring 管理 bean。这`@ViewScoped`是一个特定于 JSF 的注释，用于指定 JSF 托管 bean 的范围`@ManagedBean`。JSF 特定范围注释根本不适用于 Spring 托管 bean。您应该改用 Spring 特定的`@Scope`注释。

所以，要么只通过 JSF 管理 bean：

```
@ManagedBean
@ViewScoped 
```

或者[自制](http://comdynamics.net/blog/109/spring3-jsf2-view-scope/)一个 Spring“视图”范围（这不是 Spring 中可用的默认范围之一）：

```
@Component
@Scope("view") 
```

# ios - 移动 Web 应用积分错误的解决方法？

> ID：10652968
> 
> 赞同：1
> 
> 时间：2012-05-18T12:48:30.813
> 
> 标签：ios, html, mobile, facebook-credits

两个相关的问题。第一：这对你来说是复制品还是我的 iPhone 上的本地东西？[https://developers.facebook.com/bugs/172749669520391](https://developers.facebook.com/bugs/172749669520391)

其次，有人有解决该错误的方法吗？既然平台上的移动 Web 应用程序需要 FB Credits，这对于我们来说是找到解决方法的绝对关键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T04:47:52.240

Facebook 在错误报告中发布了回复，指出这是一个已知问题。

> 这是一个已知问题，我们有一个解决方法：
> 
> 不要调用 FB.login，而是将 document.location 设置为直接重定向到 /dialog/oauth 端点，并使用您自己的页面作为 redirect_uri，这将重定向回用户来自的页面。

# android - 在android中是否有可能以编程方式呼叫一个人，然后让他/她听到预先录制的语音/音频？

> ID：10652969
> 
> 赞同：5
> 
> 时间：2012-05-18T12:48:33.600
> 
> 标签：android

我想知道是否可以使用公共 android API 以编程方式呼叫一个人，然后她一拿起电话，就让她听到预先录制的语音消息/音频？

在收到诸如我为什么要这样做或用户体验不佳之类的评论之前，我只想澄清一下，问题更多的是技术方面而不是实施，因此如果您有任何指示，请告诉我。

谢谢你的时间！

# php - Shoppingcart 提供相同的产品 PHP

> ID：10652977
> 
> 赞同：0
> 
> 时间：2012-05-18T12:49:14.893
> 
> 标签：php, shopping-cart, webshop

下午，

我的**网上商店****购物**车有些困难。在我的 cartArr （具有从我的数据库中获取的产品 ID 的数组）中，有我购买的产品的正确 ID。我的 productspage 上还有一个购物车，其中计算了我的 cartArr 中正确数量的物品（到目前为止一切都很好）。

 **当我想展示我的产品时，他只显示我点击的最后一个产品 * 次我买了东西。合乎逻辑，因为他在我的会话数组中不记得它。

我知道我的问题是什么，但我不知道如何解决它。

```
/*Shoppingcart.php*/
<?php

$id = '';

    if(isset($_POST['shoppingCart']['btnSubmit']))
        {
            $id = $_POST['shoppingCart']['id'];

            $productDAO = new ProductDAO();
            $result = $productDAO->getProductById($id);

                if( in_array($id,$_SESSION['cartArr']))
            {
               array_push($_SESSION['cartArr'], $id);

            echo '<pre>';
            print_r('Hallo');
            echo '</pre>';

            }
        }

$smarty -> assign('arrProducts',$result);
$smarty -> assign('id',$id);
$smarty -> assign('cartArr',$_SESSION['cartArr']);
$smarty -> assign('product',$result)

/*Shoppingcart.tpl*/
{foreach $cartArr as $item}
    <div class="winkelkarItem">
        <img src="{$arrProducts.image}" class="winkelkarImgPosition" 
            alt="chimay" title="chimay"/>

        <ul class="winkelkarBeschrijving">
            <li>{$arrProducts.naam}</li>
            <li>{$arrProducts.prijs}&euro;</li>
            <li><input class="winkelkarAmmount" type="text" value="2"/></li>
            <li>7.08&euro;</li>
        </ul>
    </div>
{/foreach}

/*SQL statement to get my products out of my database in a seperate file ProductDAO*/

public function getProductById($id)
    {
         try
        {
            $sql = 'SELECT *
                    FROM tblProduct
                    WHERE id = :id';
            $stmt = $this->dbh->prepare($sql);
            $stmt->bindValue(':id',$id);
            $stmt->execute();
            $result = $stmt->fetch();
        }
        catch(PDOException $e)
        {
            echo $e->getMessage();
        }

        return $result;
    }
?> 
```

提前谢谢所有帮助。

简短：Arrproducts 必须进入我的会话 通过 foreach 我需要制作我的物品 @ shoppingcart.tpl 我点击的产品的 id 在 cartArr 中。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T13:08:53.800

第一次，

```
if( in_array($id,$_SESSION['cartArr'])) {
    array_push($_SESSION['cartArr'], $id);
} 
```

如果`$id`在`$_SESSION['cartArr']`，为什么还要再推一次？

第二次，您在“shoppingCart”中插入的最后一个项目是`$result`（获取数组），并且您的“shoppingCart”在会话中存储的 id 数组中。
因此，在您的模板 Shoppingcart.tpl 中，当您循环时`$cartArr`，`$item`是您的“产品”的 id，而不是包含您的“产品”数据的变量。然后，在您的`foreach`循环中，您放置`$arrProducts.attribute`, 但`$arrProducts`对应于您的最后一个插入项。

因此，您必须获取循环中传递的每个 id 的数据：（
我不确定 smarty 模板语法，但请尝试理解我的意思）

```
 {$productDAO = new ProductDAO();}
            {foreach $cartArr as $item_id}
                {$item = $productDAO->getProductById($item_id);}
                <div class="winkelkarItem">
                    <img src="{$item.image}" class="winkelkarImgPosition"  alt="chimay" title="chimay"/>

                    <ul class="winkelkarBeschrijving">
                        <li>{$item.naam}</li>
                        <li>{$item.prijs}&euro;</li>
                        <li><input class="winkelkarAmmount" type="text" value="2"/></li>
                        <li>7.08&euro;</li>
                    </ul>
                </div>

            {/foreach} 
```

**编辑：**
另一种解决方案，用每个“产品”的数据构造另一个数组，并将其传递给您。

在“Shoppingcart.php”中：

```
$productDAO = new ProductDAO();
$items_datas = array();
foreach($_SESSION['cartArr'] as $item_id) {
    $items_datas[] = $productDAO->getProductById($item_id);
}
$smarty->assign("items_datas",$items_datas); 
```

在您的“Shoppingcart.tpl”中：

```
 {foreach $items_datas as $item}

                <div class="winkelkarItem">
                    <img src="{$item.image}" class="winkelkarImgPosition"  alt="chimay" title="chimay"/>

                    <ul class="winkelkarBeschrijving">
                        <li>{$item.naam}</li>
                        <li>{$item.prijs}&euro;</li>
                        <li><input class="winkelkarAmmount" type="text" value="2"/></li>
                        <li>7.08&euro;</li>
                    </ul>
                </div>

            {/foreach} 
```**

# actionscript-3 - as3 播放影片剪辑一次

> ID：10652979
> 
> 赞同：2
> 
> 时间：2012-05-18T12:49:19.083
> 
> 标签：actionscript-3, flash, loader, movieclip

如果您能帮我解决这个问题，我将不胜感激。我正在尝试在我的 ipad 一个 MovieClip 应用程序中播放一次。我试图以这种方式停止，但电影不会停止

```
var loader:Loader = new Loader();
var swfFile:URLRequest= new URLRequest("/test.swf");
loader.load(swfFile);

movieClip = new MovieClip();
movieClip.addChild(loader);
movieClip.addFrameScript(movieClip.totalFrames - 1, callbackFunc);
movieClip.play();
private function callbackFunc():void
{
movieClip.stop();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T13:50:39.507

```
var loader:Loader = new Loader();
var swfFile:URLRequest= new URLRequest("/test.swf");
loader.contentLoaderInfo.addEventListener(Event.COMPLETE, onFileLoaded);
loader.load(swfFile);

//I assume you have declared 'movieClip'?
//if not do:
//var movieClip:MovieClip;

private function onFileLoaded(e:Event):void
{
    movieClip = loader.content;
    addChild(movieClip);
    movieClip.play();
    addEventListener(Event.ENTER_FRAME, onEnter, true, 0, false);
}

private function onEnter(e:Event):void
{
    if (movieClip.currentFrame == movieClip.totalFrames)
    {
        movieClip.stop();
        removeEventListener(Event.ENTER_FRAME, onEnter, true, 0, false);
        //do other stuff
    }
} 
```

这应该做你需要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T13:51:08.467

```
var loader:Loader = new Loader(); 
var swfFile:URLRequest= new URLRequest("/test.swf"); 
loader.contentLoaderInfo.addEventListener(Event.COMPLETE, onCompleteHandler);
loader.load(swfFile); 

private function callbackFunc():void 
{ 
    movieClip.stop(); 
} 

function onCompleteHandler(loadEvent:Event)
{
    movieClip = MovieClip(loadEvent.currentTarget.content);
    addChild(movieClip);

    movieClip.addFrameScript(movieClip.totalFrames - 1, callbackFunc); 
    movieClip.play(); 
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-18T13:54:01.820

您的代码将不起作用，因为它不是`movieClip`播放的，而是您加载到其中的外部 SWF 将播放它的关键帧。创建的`movieClip`只有 1 个关键帧，并且在 1 个关键帧上放置了外部 SWf。您应该将该`stop()`函数添加到外部 SWF 中。如果您这样做更正外部 SWF 播放一次，然后停止。

您还可以将外部 SWF 包装到一个新的 MovieClip 中，然后将您已有的代码放入其中...

或者，如果您想要完全控制，您可以调整外部 SWF 代码，以便在播放最后一帧时调度一个事件。在 SWF 上提供自定义停止/重播功能，然后您可以从父 SWF 调用该功能。

祝你好运！

# c# - UI 建议：上移/下移按钮的放置位置

> ID：10652980
> 
> 赞同：1
> 
> 时间：2012-05-18T12:49:22.937
> 
> 标签：c#, winforms, user-experience

它很难看，但我找不到更好的地方来放置“上移”和“下移”按钮。你的建议是什么？

![在此处输入图像描述](../Images/87684552483b0812500d027a7094a073.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T13:16:55.937

我会说删除它们并使其可拖放:) 当然这对用户来说不是那么直观，但也许你可以有一个标签说你可以拖动它们来移动它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T13:03:13.600

只需删除它们，它们是多余的。用户已经可以直接单击该项目，可以使用向上/向下箭头键并具有滚动条。够了。

它不仅没有必要，而且实际上是劣等的。因为除非用户在其上敲击鼠标按钮并且它会从列表中窃取焦点，否则该键不会重复。这些问题有一些解决方法，但这只是你不应该首先编写的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T12:52:27.317

按钮的位置是正确的。

要获得更引人注目的 UI，请使用 Webdings/Wingdings 字体中的向上箭头和向下箭头。

顺便说一句，这个问题更适合[这里](https://ux.stackexchange.com/)。（[https://ux.stackexchange.com/](https://ux.stackexchange.com/)）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-18T13:18:26.323

我认为您可以删除文本（向上移动，向下移动）-箭头对人们来说很直观。还要考虑微软如何在`Edit columns`网格对话框中实现相同的功能：

![在此处输入图像描述](../Images/fd0a4f48c4449c0b9c95cec58811544b.png)

顺便说一句，IMO 的最佳选择是拖放行（根本没有按钮）。但是您应该以某种方式向用户提供信息（光标、边框、工具提示），这是可能的。

# javascript - 如何将数组插入到zend_form中的javascript中

> ID：10652987
> 
> 赞同：0
> 
> 时间：2012-05-18T12:49:58.490
> 
> 标签：javascript, arrays, zend-framework

我需要将一个数组从我的 zend 操作传递到视图，可能是通过使用尚未决定的 ajax。为了做到这一点，我需要插入一个脚本元素并在其中定义 javascript 变量，然后我会将我的 php 数组传递给该变量，但我无法将脚本元素插入到 zend_form 中。将此代码包含到我的 phtml 脚本中的最简单方法是什么：

```
<script type="text/javascript">
    var obj = <?php echo json_encode($php_array); ?>;
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T14:07:20.347

您可以使用视图助手[inlineScript()](http://framework.zend.com/manual/en/zend.view.helpers.html#zend.view.helpers.initial.inlinescript)将 java 脚本传递给您的视图。

在你的行动中`$this->inlineScript()->setScript('java script here');`

在你的视野中呼应这个 `<?php echo $this->inlineScript() ?>`

您还可以使用[json()](http://framework.zend.com/manual/en/zend.view.helpers.html#zend.view.helpers.initial.json)助手将 json 传递给您视图中的 java 脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T18:54:48.760

RockyFord 的解决方案过于复杂 IMO。只需将 PHP 数组分配给任何视图变量，并将您发布的代码（修改为使用视图变量）添加到视图脚本的末尾 - 就在回显表单之后。

```
//controller
$this->view->php_array = array(...);

//view
echo $this->form;
<script type="text/javascript">
    var obj = <?php echo json_encode($this->php_array); ?>;
</script> 
```

它将按您的预期工作。

使用 JSON 视图助手并不理想，因为它会修改标题并默认禁用布局。即使没有在 PHP 中加载 json_extension，您也可以替换`json_encode`为`Zend_Json::encode`使其工作。

# java - 从另一个具有相同锁的同步块调用同步块

> ID：10652988
> 
> 赞同：3
> 
> 时间：2012-05-18T12:50:02.930
> 
> 标签：java, multithreading, deadlock

我有这堂课：

```
public class MyClass {

    public MyClass(){}

    public void actionA(){
        synchronized(MyClass.class){
            System.out.print("A");
        }
    }

    public void actionB(){
        synchronized(MyClass.class){
            actionA();
        }
    }

} 
```

哪一个（如果有的话）是真的？

1.  调用 actionB() 将导致死锁，因为 actionA() 永远无法获取与 MyClass.class 关联的锁
2.  调用 actionB() 不会导致死锁，因为它已经获得了与 MyClass.class 关联的锁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T12:51:59.557

`#2`会发生，因为调用线程有锁。

但是，如果代码看起来像这样：

```
public void actionB(){
    synchronized(MyClass.class) {
      Thread thread = new Thread(new Runnable { run() { actionA(); }});
      thread.start();
      thread.join();
    }
} 
```

那么你就会陷入僵局。`locks`是在每个线程的基础上获取的。

我发现一个有用的心理画面是挂锁的共享钥匙。一次只能有一个线程拥有密钥，但显然同一个密钥会打开它适合的任何锁（该密钥适合使用相同同步对象的任何锁）。

顺便说一句，在任何公开可见的字段上同步都是不好的做法，因为另一段远离的代码可能会锁定同一个对象，从而导致不必要的争用和可能的死锁。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T12:54:43.210

`#2`将会发生。

[可重入同步](http://docs.oracle.com/javase/tutorial/essential/concurrency/locksync.html)

> 回想一下，一个线程不能获得另一个线程拥有的锁。但是线程可以获取它已经拥有的锁。允许一个线程多次获取同一个锁可以实现重入同步。这描述了一种情况，同步代码直接或间接调用一个也包含同步代码的方法，并且两组代码都使用相同的锁。如果没有可重入同步，同步代码将不得不采取许多额外的预防措施来避免线程导致自身阻塞。

# ruby - 选择块内的嵌套扫描块

> ID：10652993
> 
> 赞同：1
> 
> 时间：2012-05-18T12:50:15.250
> 
> 标签：ruby

我是 Ruby 新手，我想从文件中选择一些与正则表达式匹配的行，然后存储到列表中。

所以我写了以下代码：

```
 def get_valid_instr istream
         p istream.select { |line| line.scan(/(^\s*\w+\s*;\s*\w+\s*$)/){|instr| instr[0].upcase.strip.split(";")}}
    end

   trace_instr = File.open("#{file_name}", "r"){|stream|  get_valid_instr stream} 
```

输出只是所有文件的显示。如果我在扫描块中打印，我会确切地看到我想要的。还有其他方法可以做到这一点（填写外部列表），但我想知道为什么它不起作用以及是否有 ruby​​ 方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T13:12:10.933

如果将块传递给`scan`，它将返回与不传递块不同的内容：

```
"abc".scan(/./)
# => ["a", "b", "c"]

"abc".scan(/./) {|l| puts l }
# a
# b
# c
# => "abc" 
```

使用时需要注意这一点`scan`。

但是，比您当前的解决方案更好的是使用[`grep`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-grep). 您可以将正*则*表达式和块传递给`grep`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T13:07:00.080

查看您想要测试的一些数据会很有帮助。

数据是否按行拆分？我不确定你是否用分号分开。这是什么原因？如果您可以发布一些示例数据和一些示例输出，我将能够提供进一步的帮助。

这是我试图解释你想要达到的目标，但它可能会很好，因为我没有看到真实的数据。谢谢！

```
def get_valid_instr(lines)
  regex = /(^\s*\w+\s*;\s*\w+\s*$)/
  lines.inject([]) do |matched_lines, line| 
    if match = line.match(regex)
      p match[0]
      matched_lines << match[0].upcase.strip.split(";") 
    end
    matched_lines
  end
end
trace_instr = get_valid_instr(File.readlines(file_name))
pp trace_instr 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T13:28:00.113

```
def get_valid_instr istream
  istream.grep(/^\s*\w+\s*;\s*\w+\s*$/).map do |instr|
    instr.upcase.strip.split(";")
  end
end 
```

# html - Selenium IDE 不会记录来自服务器的事件，而是来自磁盘

> ID：10652996
> 
> 赞同：1
> 
> 时间：2012-05-18T12:50:24.650
> 
> 标签：html, selenium, automated-tests, selenium-ide

我遇到了Selenium IDE 似乎没有在真实的网络服务器上**记录特定事件的问题。**

但是，如果我通过 firefox**将页面（包括所有资源）完全保存****到磁盘**，在浏览器中打开保存的文件并尝试记录相同的问题，**Selenium IDE 现在可以正常工作**并按预期记录事件。

我不确定是什么导致了这种行为 - 可能 Selenium IDE 中存在一些竞争条件（来自真实网络服务器的延迟高于本地文件 URL），或者它可能与 URL 有关 - 但这些只是很快猜测。

**有人对如何追踪此类 Selenium IDE 问题有一些建议/最佳实践吗？**

**更新：**

**我发现了我的根本问题**，只有反复试验，但成功了。
**[我在 selemium 项目中提交了一个错误](http://code.google.com/p/selenium/issues/detail?id=3929)**。

它在本地工作的原因是表单提交后未找到文件，而该文件未在服务器端发生。似乎找不到文件错误奇怪地阻止了该错误的发生。

**但是，这个问题的主要部分还没有真正回答**，下次我仍然不知道如何快速追踪这些问题。所以现在，我会保持开放。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T17:44:16.943

我有类似的问题。Selenium IDE 不会记录来自该网站“http://suppliers.inwk.com”的任何内容。您可能没有凭据来获取登录访问权限，但如果您可以获取登录页面本身记录在 Selenum IDE 中，那么我认为我们可以找到根本原因，或者至少得到一个线索。

# actionscript-3 - 拦截值提交事件后，列表中的选择突出显示不会消失

> ID：10652998
> 
> 赞同：1
> 
> 时间：2012-05-18T12:50:34.463
> 
> 标签：actionscript-3, flash, apache-flex

我正在使用火花列表，并希望在更改作为数据提供者的列表内容后保持选择。如果您设置一个新的数据提供者，List 会将其 selectedIndex 设置回 -1。我们通过拦截当 List 想要将自身设置回 -1 并设置先前选择的项目（如果新的数据提供者仍然包含它）时触发的 valueCommit 事件来解决这个问题。到目前为止这有效，但我们得到了奇怪的行为：

*   最初，先前选择的项目仍被选中并按预期突出显示
*   如果选择了另一个项目，突出显示将停留在初始项目上。不管我多久选择另一个，初始项目仍然突出显示但未选择。新选择的项目实际上已被选中并突出显示。
*   如果再次选择初始项目，则列表再次表现正常。当我在重新选择第一个项目后选择另一个项目时，突出显示消失。

List 在 MXML 中声明，如下所示：

```
<s:List dataProvider="{model.dataProvider}"
selectedIndex="@{model.selectedIndex}"
valueCommit="model.handleInputObjectListValueCommit(event)"/> 
```

模型类中的代码非常复杂，但这应该是相关部分：

```
[Bindable]
public var dataProvider:ArrayCollection;

[Bindable]
public var selectedIndex:int;

private var _indexToSelect:int = -1;

public function setNewContent(newContent:ArrayCollection):void {

    undoManager.ignore(function ():void {

        dataProvider.removeAll();
        dataProvider.addAll(newContent);

        _indexToSelect = selectedIndex;
    });
}

public function handleValueCommit(event:Event):void {
    if (_indexToSelect != -1) {
        const localIndex:int = _indexToSelect;
        _indexToSelect = -1;
        selectedIndex = localIndex;
    }
} 
```

undManager 是一个负责撤销/重做的类。ignore 函数注意 undoManager 不会将 dataProvider 中的更改注册为可撤消的操作，因为只有用户交互应该是可撤消的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T14:58:11.057

我在捕获更改事件时得到了描述的结果，并且在那里修复它需要一个 hackish 解决方案或自定义 UI 组件来修复 List 组件中看似错误的问题。但是，如果您在更改数据提供者而不是尝试捕获事件时处理逻辑，它似乎可以工作：

```
public function setDataProvider(data:IList):void {
    var previous:Object = theSparkList.selectedItem;
    theSparkList.dataProvider = data;
    var index:int = theSparkList.dataProvider.getItemIndex(previous);
    if (index > -1) {
        theSparkList.selectedIndex = index;
    }
} 
```

这可能仍然需要一些重构，并且它可能不适用于您的架构 - 您可能需要提供更多详细信息。捕获事件是唯一的选择吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T14:00:34.793

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
               xmlns:s="library://ns.adobe.com/flex/spark"
               xmlns:mx="library://ns.adobe.com/flex/mx"
               creationComplete="_creationCompleteHandler()">
    <s:layout>
        <s:HorizontalLayout />
    </s:layout>
    <fx:Declarations>
        <s:ArrayList id="d1">
            <fx:Object label="Obj1" />
            <fx:Object label="Obj2" />
            <fx:Object label="Obj3" />
            <fx:Object label="Obj4" />
            <fx:Object label="Obj5" />
            <fx:Object label="Obj6" />
            <fx:Object label="Obj7" />
            <fx:Object label="Obj8" />
            <fx:Object label="Obj9" />
            <fx:Object label="Obj10" />
            <fx:Object label="Obj11" />
            <fx:Object label="Obj12" />
            <fx:Object label="Obj13" />
            <fx:Object label="Obj14" />
        </s:ArrayList>

        <s:ArrayList id="d2">
            <fx:Object label="AA1" />
            <fx:Object label="AA2" />
            <fx:Object label="AA3" />
            <fx:Object label="AA4" />
            <fx:Object label="AA5" />
            <fx:Object label="AA6" />
            <fx:Object label="AA7" />
            <fx:Object label="AA8" />
            <fx:Object label="AA9" />
        </s:ArrayList>
    </fx:Declarations>

    <fx:Script>
        <![CDATA[
            import mx.collections.IList;
            import mx.events.PropertyChangeEvent;
            import spark.events.IndexChangeEvent;

            [Bindable]
            public var listDataProvider:IList;

            private var _lastSelectedItemIndex:int = -1;

            private function _creationCompleteHandler():void
            {
                list.addEventListener(IndexChangeEvent.CHANGE, _list_changeHandler);

                addEventListener(PropertyChangeEvent.PROPERTY_CHANGE, _propertyChangeHandler);
                listDataProvider = d1;
            }

            private function changeButt_clickHandler():void
            {
                listDataProvider = d2;
            }

            private function _propertyChangeHandler(event:PropertyChangeEvent):void
            {
                list.selectedIndex = _lastSelectedItemIndex;
            }

            private function _list_changeHandler(event:IndexChangeEvent):void
            {
                _lastSelectedItemIndex = list.selectedIndex;
            }
        ]]>
    </fx:Script>

    <s:List id="list"
            dataProvider="{listDataProvider}"
            height="200" />
    <s:Button label="changeButt"
              click="changeButt_clickHandler()" />
</s:Application> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T13:23:33.450

也许在更改 dataProvider 时，重新实例化列表控件...... list = new List();，或者类似的东西来清除该控件的设置。