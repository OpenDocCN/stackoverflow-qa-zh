# StackOverflow 问答 12257000-12257999

# jakarta-ee - 程序化对话查找

> ID：12257006
> 
> 赞同：4
> 
> 时间：2012-09-04T04:55:05.057
> 
> 标签：jakarta-ee, cdi, lookup, conversation-scope

是否有可能以`CDI conversation`编程方式获取一个实例，只知道当前`thread`是用于处理`CDI request`与所需对话相关联的实例？如果可能的话怎么办？

特别是，我想做的是：

```
@ConversationScoped
public class UnitOfWork {...}

public class Client {
    @Inject transient UnitOfWork uof;
...
}

public class Room {
    @Inject transient UnitOfWork uof;
...
} 
```

但是使用编程机制来初始化`uof`实例变量而不是应用 @Inject 注释（因为`Client`和`Room`是实体并且它们不支持注入）。 我已经尝试通过以下静态方法获得的
注入：`UnitOfWork``BeanManager`

```
public static <B> B getManagedBean(Class<B> type, Annotation... qualifiers) {
    try {
        BeanManager beanManager = InitialContext.doLookup("java:comp/BeanManager");
        Set<Bean<?>> beans = beanManager.getBeans(type, qualifiers);
        Bean<B> bean = (Bean<B>) beanManager.resolve(beans);
        CreationalContext<B> cc = beanManager.createCreationalContext(bean);
        return bean.create(cc);
    } catch (NamingException e) {
        throw new RuntimeException("", e);
    }
} 
```

但问题是通过上述方法给出的bean是新的（每次调用都会给出一个新实例），我需要它`Client`并`Room`共享相同的会话范围实例`UnitOfWork`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T09:19:56.293

抱歉，这不是一个真正的答案，但在评论中写得太多了：

**实体不支持依赖注入**是有原因的——主要是因为它们的生命周期与托管 bean 的生命周期是分离的。

虽然我当然在实体中看到了 DI 的用例，但我会加倍（和三倍）检查这种方法的好处是否超过风险。您可能会发现自己在某种二级缓存地狱中破解了持久性上下文；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T01:58:27.153

答案非常接近，但我忽略了它。是的，可以通过 BeanManager 获取任何活动上下文（与当前线程关联的上下文）包含的任何 bean 的 bean 类实例。这种方法可以完成这项工作：

```
public static <B> B getContextualBeanInstance(Class<B> type, Annotation... qualifiers) {
    try {
        BeanManager beanManager = InitialContext.doLookup("java:comp/BeanManager");
        Set<Bean<?>> beans = beanManager.getBeans(type, qualifiers);
        Bean<?> bean = beanManager.resolve(beans);
        CreationalContext<?> cc = beanManager.createCreationalContext(bean);
        return (B) beanManager.getReference(bean, type, cc);
    } catch (NamingException e) {
        throw new RuntimeException("", e);
    }
} 
```

与我在问题帖子中提到的方法的唯一区别是这个方法使用`BeanManager#getReference(..)`而不是`Bean#create(..)`.

如果要支持参数化 bean 类型，请将`type`参数的类型从更改`Class<B>`为`Type`。

如果 bean 是 @Dependent 作用域的，则应注意销毁 bean 类实例以避免内存泄漏。[在这里](https://stackoverflow.com/questions/8420070/how-to-create-and-destroy-cdi-weld-managed-beans-via-the-beanmanager/15184167#15184167)，我解释了如何很好地做到这一点。

# ios - 使用长按手势重新排序表格视图中的单元格？

> ID：12257008
> 
> 赞同：26
> 
> 时间：2012-09-04T04:55:13.083
> 
> 标签：ios, uitableview, long-press

我希望能够使用 longPress 手势（而不是标准的重新排序控件）重新排序 tableview 单元格。识别出 longPress 后，我希望 tableView 基本上进入“编辑模式”，然后重新排序，就好像我正在使用 Apple 提供的重新排序控件一样。

有没有办法做到这一点而无需依赖第 3 方解决方案？

提前致谢。

编辑：我最终使用了已接受答案中的解决方案，并依赖于第 3 方解决方案。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2019-07-26T19:05:43.577

他们在 iOS 11 中添加了一种方式。

首先，启用拖放交互并设置拖放代理。

然后实现 moveRowAt，就好像您使用重新排序控件正常移动单元格一样。

然后实现拖放委托，如下所示。

```
tableView.dragInteractionEnabled = true
tableView.dragDelegate = self
tableView.dropDelegate = self

func tableView(_ tableView: UITableView, moveRowAt sourceIndexPath: IndexPath, to destinationIndexPath: IndexPath) { }

extension TableView: UITableViewDragDelegate {
func tableView(_ tableView: UITableView, itemsForBeginning session: UIDragSession, at indexPath: IndexPath) -> [UIDragItem] {
        return [UIDragItem(itemProvider: NSItemProvider())]
    }
} 

extension TableView: UITableViewDropDelegate {
    func tableView(_ tableView: UITableView, dropSessionDidUpdate session: UIDropSession, withDestinationIndexPath destinationIndexPath: IndexPath?) -> UITableViewDropProposal {

        if session.localDragSession != nil { // Drag originated from the same app.
            return UITableViewDropProposal(operation: .move, intent: .insertAtDestinationIndexPath)
        }

        return UITableViewDropProposal(operation: .cancel, intent: .unspecified)
    }

    func tableView(_ tableView: UITableView, performDropWith coordinator: UITableViewDropCoordinator) {
    }
} 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2017-07-12T17:26:09.553

**Swift 3 并且没有第三方解决方案**

首先，将这两个变量添加到您的类中：

```
var dragInitialIndexPath: IndexPath?
var dragCellSnapshot: UIView? 
```

然后添加`UILongPressGestureRecognizer`到您的`tableView`：

```
let longPress = UILongPressGestureRecognizer(target: self, action: #selector(onLongPressGesture(sender:)))
longPress.minimumPressDuration = 0.2 // optional
tableView.addGestureRecognizer(longPress) 
```

手柄`UILongPressGestureRecognizer`：

```
// MARK: cell reorder / long press

func onLongPressGesture(sender: UILongPressGestureRecognizer) {
  let locationInView = sender.location(in: tableView)
  let indexPath = tableView.indexPathForRow(at: locationInView)

  if sender.state == .began {
    if indexPath != nil {
      dragInitialIndexPath = indexPath
      let cell = tableView.cellForRow(at: indexPath!)
      dragCellSnapshot = snapshotOfCell(inputView: cell!)
      var center = cell?.center
      dragCellSnapshot?.center = center!
      dragCellSnapshot?.alpha = 0.0
      tableView.addSubview(dragCellSnapshot!)

      UIView.animate(withDuration: 0.25, animations: { () -> Void in
        center?.y = locationInView.y
        self.dragCellSnapshot?.center = center!
        self.dragCellSnapshot?.transform = (self.dragCellSnapshot?.transform.scaledBy(x: 1.05, y: 1.05))!
        self.dragCellSnapshot?.alpha = 0.99
        cell?.alpha = 0.0
      }, completion: { (finished) -> Void in
        if finished {
          cell?.isHidden = true
        }
      })
    }
  } else if sender.state == .changed && dragInitialIndexPath != nil {
    var center = dragCellSnapshot?.center
    center?.y = locationInView.y
    dragCellSnapshot?.center = center!

    // to lock dragging to same section add: "&& indexPath?.section == dragInitialIndexPath?.section" to the if below
    if indexPath != nil && indexPath != dragInitialIndexPath {
      // update your data model
      let dataToMove = data[dragInitialIndexPath!.row]
      data.remove(at: dragInitialIndexPath!.row)
      data.insert(dataToMove, at: indexPath!.row)

      tableView.moveRow(at: dragInitialIndexPath!, to: indexPath!)
      dragInitialIndexPath = indexPath
    }
  } else if sender.state == .ended && dragInitialIndexPath != nil {
    let cell = tableView.cellForRow(at: dragInitialIndexPath!)
    cell?.isHidden = false
    cell?.alpha = 0.0
    UIView.animate(withDuration: 0.25, animations: { () -> Void in
      self.dragCellSnapshot?.center = (cell?.center)!
      self.dragCellSnapshot?.transform = CGAffineTransform.identity
      self.dragCellSnapshot?.alpha = 0.0
      cell?.alpha = 1.0
    }, completion: { (finished) -> Void in
      if finished {
        self.dragInitialIndexPath = nil
        self.dragCellSnapshot?.removeFromSuperview()
        self.dragCellSnapshot = nil
      }
    })
  }
}

func snapshotOfCell(inputView: UIView) -> UIView {
  UIGraphicsBeginImageContextWithOptions(inputView.bounds.size, false, 0.0)
  inputView.layer.render(in: UIGraphicsGetCurrentContext()!)
  let image = UIGraphicsGetImageFromCurrentImageContext()
  UIGraphicsEndImageContext()

  let cellSnapshot = UIImageView(image: image)
  cellSnapshot.layer.masksToBounds = false
  cellSnapshot.layer.cornerRadius = 0.0
  cellSnapshot.layer.shadowOffset = CGSize(width: -5.0, height: 0.0)
  cellSnapshot.layer.shadowRadius = 5.0
  cellSnapshot.layer.shadowOpacity = 0.4
  return cellSnapshot
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-12T19:22:14.890

除非您想从头开始将您自己的 UITableView + Controller 组合在一起，否则您无法使用 iOS SDK 工具来做到这一点，这需要大量的工作。您提到不依赖 3rd 方解决方案，但我的自定义 UITableView 类可以很好地处理这个问题。随意检查一下：

[https://github.com/bvogelzang/BVReorderTableView](https://github.com/bvogelzang/BVReorderTableView)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-05T21:39:31.107

所以本质上你想要[“清除”式的行重新排序](http://www.youtube.com/watch?v=S00H-rz7fGo)对吗？（大约 0:15）

[这篇 SO 帖子可能会有所帮助。](https://stackoverflow.com/questions/9516584/uitableview-reorder-like-clear-app)

不幸的是，我认为您无法使用当前的 iOS SDK 工具来做到这一点，除非您从头开始将 UITableView + Controller 组合在一起（您需要自己创建每一行并让 UITouch 响应与您的 row-to 的 CGRect 相关的-移动）。

这会非常复杂，因为当您移动要重新排序的行时，您需要让行的动画“让开”。

cocoas 工具看起来很有前途，至少去看看源代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-26T15:41:37.727

现在有一个很棒的 Swift 库，现在称为[`SwiftReorder`](https://github.com/adamshin/SwiftReorder)MIT 许可，因此您可以将其用作第一方解决方案。这个库的基础是它使用`UITableView`扩展将控制器对象注入到任何符合以下条件的表视图中`TableViewReorderDelegate`：

```
extension UITableView {

    private struct AssociatedKeys {
        static var reorderController: UInt8 = 0
    }

    /// An object that manages drag-and-drop reordering of table view cells.
    public var reorder: ReorderController {
        if let controller = objc_getAssociatedObject(self, &AssociatedKeys.reorderController) as? ReorderController {
            return controller
        } else {
            let controller = ReorderController(tableView: self)
            objc_setAssociatedObject(self, &AssociatedKeys.reorderController, controller, .OBJC_ASSOCIATION_RETAIN_NONATOMIC)
            return controller
        }
    }

} 
```

然后委托看起来有点像这样：

```
public protocol TableViewReorderDelegate: class {

    // A series of delegate methods like this are defined:
    func tableView(_ tableView: UITableView, reorderRowAt sourceIndexPath: IndexPath, to destinationIndexPath: IndexPath)

} 
```

控制器看起来像这样：

```
public class ReorderController: NSObject {

    /// The delegate of the reorder controller.
    public weak var delegate: TableViewReorderDelegate?

    // ... Other code here, can be found in the open source project

} 
```

* * *

实现的关键是当快照单元格出现在触摸点时，有一个“间隔单元格”被插入到表格视图中，因此您需要在`cellForRow:atIndexPath:`调用中处理间隔单元格：

```
func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -> UITableViewCell {
    if let spacer = tableView.reorder.spacerCell(for: indexPath) {
        return spacer
    }
    // otherwise build and return your regular cells
} 
```

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2012-09-04T05:14:44.690

当然有办法。在您的手势识别器代码中调用方法 setEditing:animated:，这将使表格视图进入编辑模式。在苹果文档中查找“管理行的重新排序”以获取有关移动行的更多信息。

# ruby-on-rails - 在 Migration PostgreSQL 上设置主键值 0 并自动递增

> ID：12257021
> 
> 赞同：2
> 
> 时间：2012-09-04T04:56:58.840
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql

我有一个有 2 个字段的模型 => :name 和 :age

我需要做一个迁移，添加一个列 :position 需要自动递增并从 0（零）开始。

我尝试了这些方式：

```
class AddPosition < ActiveRecord::Migration
  def up
    add_column :clientes, :position, :integer, :default => 0, :null => false
    execute "ALTER TABLE clientes ADD PRIMARY KEY (position);"
  end 
```

但它不起作用，因为它不会自动递增。如果我尝试使用主键作为类型：

```
class AddPosition < ActiveRecord::Migration
  def up
    add_column :clientes, :position, :primary_key, :default => 0, :null => false
  end
end 
```

rake db:migrate 不运行，因为有多个值。

任何人都可以解释一种在带有 Rails 3.2 的主键上设置零和自动增量的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T09:18:15.273

以下是在 PostgreSQL 中设置自动增量列的方法：

```
# in migration:
def up
  execute <<-SQL
    CREATE SEQUENCE clients_position_seq START WITH 0 MINVALUE 0;
    ALTER TABLE clients ADD COLUMN position INTEGER NOT NULL DEFAULT nextval('clients_position_seq');
  SQL
end 
```

但不幸的是，它可能不是您所需要的。如果您`clients`使用 SQL 将值插入到表中，则上述方法将起作用：`INSERT INTO clients(name, age) VALUES('Joe', 21)`，并且 rails 不能以这种方式工作。

第一个问题是 rails 期望调用主键`id`。虽然您可以覆盖此约定，但它会导致比它解决的问题更多的问题。如果要将位置绑定到主键值，更好的选择是向模型添加虚拟属性，方法如下：

```
def position
  id.nil? ? nil : id - 1
end 
```

但是让我们假设您已经拥有常规的主键`id`并想要添加`position`字段，以便您可以在创建客户端后重新排序客户端，**而无需**更改其 ID（这始终是一个好主意）。第二个问题出现了：rails 不会识别和尊重`DEFAULT nextval('clients_position_seq')`，即它不会从 PG 支持的序列中提取值，并且会尝试`NULL`默认输入`position`。

我想建议将[acts_as_list gem](https://github.com/rails/acts_as_list)视为更好的选择。这将使数据库序列操作变得不必要。不幸的是，它`1`用作初始值，`position`但可以通过设置列表位置字段的自定义名称和定义方法来解决，如上所示。

# java - 如何从 html 页面上的套接字读取数据

> ID：12257025
> 
> 赞同：-1
> 
> 时间：2012-09-04T04:57:34.027
> 
> 标签：java, javascript, jquery, ajax

我有一个 HTML 页面（用 JSP 编写，但还没有任何 JSP 元素），现在有一个长进程在服务器上运行，并将其各个完成阶段写入套接字上。我需要阅读该套接字并在我的 HTML 页面上显示阶段完成的时间戳。如果有人可以建议如何实现这一点，或者是否有任何方法可以捕获这样的套接字事件？

任何帮助，将不胜感激。

PS为了让你开始，我在网上搜索了太多，有彗星编程，socket.io等。实际上我在HTML，Ajax方面不太好......我是一个Java人，所以不太喜欢网站开发和东西...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T06:12:25.973

如何在不使用任何 JSP 标签的情况下实现这一点？我确实考虑过使用 Javascript，但这个脚本也应该使用 JSP 从服务器获取数据。

# xcode - Phonegap2.0.0 缺少 CordovaLib

> ID：12257027
> 
> 赞同：3
> 
> 时间：2012-09-04T04:57:39.323
> 
> 标签：xcode, cordova

我正在通过在线教程学习phonegap。[我按照https://github.com/davejohnson/phonegap-plugin-facebook-connect](https://github.com/davejohnson/phonegap-plugin-facebook-connect)提供的分步教程，使用 phonegap 在 xcode 中创建 facebook 集成虚拟应用程序

我能够设置所有内容，但要求我将 CordovaLib 类路径添加到 XCODE 的一步对我不起作用，我尝试使用下载和提取的 phonegap(2.0.0) 搜索 CordovaLib，但找不到相同的。

最后，在 google 上花了很多时间后，我可以从 GITHUB 获得 CordovaLib，并能够编译我的项目并使其工作。

我的问题是，如果必须将 CordovaLib 用于 phonegap 与 Xcode 的集成，为什么不附带 phonegap 下载？

将来为较新的 phonegap 版本获取 CordovaLib 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T02:53:22.927

没有必要了。

> 注意：从 Cordova 2.2 开始，项目中将包含 CordovaLib 的副本，而不是依赖于 Cordova 安装中的 CordovaLib 副本。

[guide_getting-started_ios](http://docs.phonegap.com/en/2.2.0/guide_getting-started_ios_index.md.html#Getting%20Started%20with%20iOS)

# android - 如何在android的gridview中排列行和列？

> ID：12257030
> 
> 赞同：1
> 
> 时间：2012-09-04T04:57:54.823
> 
> 标签：android, xml, gridview

> **可能重复：**
> [如何在 android 中为网格视图设置一行？](https://stackoverflow.com/questions/12248891/how-to-set-a-row-for-grid-view-in-android)

现在我将 XML 文件中的数据显示到 android 的网格视图中。这是确切的 xml 文件链接

“ [http://54.251.60.177/StudentWebService/StudentDetail.asmx/GetTMSOrders](http://54.251.60.177/StudentWebService/StudentDetail.asmx/GetTMSOrders) ”

我想展示的。我已经成功地完成了这个概念，但问题是，我没有得到如下图所示的答案

我需要在android中显示如下图

![在此处输入图像描述](../Images/bb8a3ac4a1eacb215f7b72bccdc4a0c3.png)

但我得到的只是下图...... ![在此处输入图像描述](../Images/81602876e1fe0301255829b062dcd848.png)

![在此处输入图像描述][3]

如何克服这个概念？有人可以让我清楚吗？

感谢您宝贵的时间！..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T06:26:40.863

坚持使用 gridview ，并通过扩展自定义 xml 文件来更改子视图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T05:29:18.393

在你的代码中尝试下面的布局有 grid_layout.xml，它可能会帮助你一段时间。最好使用 Listview 进行这些实现。

```
 <?xml version="1.0" encoding="utf-8"?>
    <GridView xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/grid_view"
        style="@style/gridViewStyle" /> 
```

在styles.xml 下放置以下代码

```
<?xml version="1.0" encoding="utf-8"?>
<resources xmlns:android="http://schemas.android.com/apk/res/android">
    <!-- GridView Style -->
    <style name="gridViewStyle">
        <item name="android:layout_width">fill_parent</item>
        <item name="android:layout_height">fill_parent</item>
        <item name="android:columnWidth">60dp</item>
        <item name="android:gravity">center</item>
        <item name="android:horizontalSpacing">10dp</item>    
        <item name="android:numColumns">3</item>
        <item name="android:padding">10dp</item>
        <item name="android:stretchMode">columnWidth</item>
        <item name="android:verticalSpacing">10dp</item>
    </style>
</resources> 
```

将您的相关列表项放在您的 grid_items.xml 中，如下所示

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/widget44"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_x="201px"
    android:layout_y="165px"
    android:gravity="center_horizontal"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/icon_image"
        style="@style/wrapViewScale"/ >

    <TextView
        android:id="@+id/icon_text"
        style="@style/wrapViewScale"
        android:gravity="center_horizontal"
        android:textColorHighlight="@color/text_color_highlight" />

</LinearLayout> 
```

# javascript - 如何在 SQLite 中只选择一项？（本地存储）

> ID：12257031
> 
> 赞同：4
> 
> 时间：2012-09-04T04:58:02.500
> 
> 标签：javascript, html, sqlite, cordova

我试图通过更具体的 SQL 查询来使我的代码更好：

以下代码有效，我可以处理结果。但可能不是最有效的：

```
function queryDB(tx) {
    tx.executeSql('SELECT * FROM foo', [], querySuccess);
}

function querySuccess(tx, results) {
    console.log(results.rows.item(0).name);
}

OUTPUT: JOHN 
```

* * *

所以当我尝试：

```
function queryDB(tx) {
    tx.executeSql('SELECT id FROM foo WHERE id = 1', [], querySuccess);
}

function querySuccess(tx, results) {
    console.log(results.rows.item(0).name);
}

OUTPUT: undefined 
```

我尝试在查询和数组上使用不同的数字，但没有任何效果。我假设查询是错误的。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T05:01:56.593

那么，首先你*有没有*ID 为 1 的行？

其次，由于您只`id`在第二个语句中选择列，为什么您认为您将能够访问`name`？

第三，将查询限制在没有`order by`子句的第一行是没有意义的。如果没有该子句，SQL 可以自由地以它想要的任何顺序返回行。

如果您真的想要表中第一个 ID 的名称，例如：

```
select name from foo order by id limit 1 
```

应该做的伎俩。很少有有意义的用例`select *`。

如果您想要第四行，请使用以下内容：

```
select name from foo order by id limit 1 offset 3 
```

有关更多详细信息，请参见[此处](http://www.sqlite.org/lang_select.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T05:00:39.890

添加`LIMIT 1`到您的查询。这是示例：

```
SELECT * FROM foo LIMIT 1 
```

# mysql - Propel Criteria::setLimit() like LIMIT 0,6

> ID：12257035
> 
> 赞同：3
> 
> 时间：2012-09-04T04:58:48.507
> 
> 标签：mysql, symfony1, symfony-1.4, propel

在我使用 Symfony 1.4/Propel 1.4 的查询中，出于分页目的，我需要设置限制，例如

```
Page1: LIMIT 0,6
Page2: LIMIT 6,6
Page3: LIMIT 12,6
.... & so on 
```

我试试

```
$c->setLimit(6); 
```

哪个正在生成

```
LIMIT 6 
```

我也没有找到带有两个参数或类似函数的 setLimit 方法来设置起始限制。这是非常常见的操作，我确信 Propel 中必须提供，但直到现在我都无法弄清楚。

有人可以建议如何设置所需的限制**（LIMIT 0,6）**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-04T07:37:33.060

你应该使用`limit()`and `offset()`，[这里](http://www.propelorm.org/reference/model-criteria.html#more_complex_queries)描述。

为了

```
LIMIT 12,6 
```

使用（如果您使用的是 1.6 ModelCriteria）

```
$c->limit(6);
$c->offset(12); 
```

如果您使用旧标准：

```
$c->setLimit(12);
$c->setOffset(12); 
```

顺便说一句，你为什么要建立自己的寻呼机？Symfony 提供了一个 sfPager（通用）和一个[sfPropelPager](http://www.symfony-project.org/api/1_4/sfPropelPager)，它们处理得很好（即使您使用自定义标准，您也可以使用 定义它`setCriteria()`）。

# android - 菜单不显示

> ID：12257037
> 
> 赞同：0
> 
> 时间：2012-09-04T04:58:57.870
> 
> 标签：android

我添加了一个简单的菜单，但它没有显示出来。

这是 menu.xml 文件-

```
<?xml version="1.0" encoding="utf-8"?>
    <menu xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:id="@+id/settings"
    android:alphabeticShortcut="@string/settings_shortcut"
    android:title="@string/settings_label"></item>
    </menu> 
```

这是 main.java 文件-

```
 @Overridek
    public boolean onCreateOptionsMenu(Menu menu) {
        super.onCreateOptionsMenu(menu);
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.menu, menu);
        return true;
    } 
```

我只是想保持简单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T05:01:34.000

通过这个来扩展文件中的菜单选项`.java`-

```
// Initiating Menu XML file (menu.xml)
@Override
public boolean onCreateOptionsMenu(Menu menu)
{
    MenuInflater menuInflater = getMenuInflater();
    menuInflater.inflate(R.layout.menu, menu);
    return true;
} 
```

希望[这](http://www.androidhive.info/2011/09/how-to-create-android-menus/)对你有很大帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T05:09:13.997

你应该删除这一行： super.onCreateOptionsMenu(menu);

```
 @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        //super.onCreateOptionsMenu(menu);
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.menu, menu);
        return true;
    } 
```

# c# - 从用户那里获取输入以填写 C# 中的列表

> ID：12257043
> 
> 赞同：2
> 
> 时间：2012-09-04T04:59:29.157
> 
> 标签：c#, arrays, visual-studio-2010, input

好的，我刚开始 C# 并试图从 C++ 的基本方面过渡。我正在上课（不是为了成绩，这是一项学习任务），除了获取用户输入之外，我已经完成了所有设置。我正在尝试使用列表而不是数组，但我不知道如何让它让用户输入价格。

这是一个简单寄存器的项目。用户必须输入价格。这里将少于 100 个项目。

**这是我到目前为止所拥有的：**

```
 static void Main()
 { 
      double i;

      Console.Writeline("Enter Item Prices\n");
      List<double> items = new List<double>[i];
      Console.ReadLine(items);
      Console.WriteLine("{0}: ", i, items[i]);
      for (double i = 0; i < 100; i++)
      {
           items.Add(i);
      }
      return 0;
  } 
```

我已经设置了所有的计算，只是无法获得价格所需的输入。我知道有些事情`i`是错误的。此外，我认为它的`WriteLine`and`ReadLine`取代了`cout`and`cin`这让我很困惑。

我只需要弄清楚如何获取价格并将它们放入我的公式中。

我会给出最好的答案道具来帮助我的程序评论。

**编辑：**

我需要它返回并检查用户是否要继续

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T05:06:59.467

顺序有点乱。为您修复它：

```
 Console.Writeline("Enter Item Prices\n");
  List<double> items = new List<double>();
  for (double i = 0; i < 100; i++)
  {
       string userInput;
       double newItem;

       // repeatedly ask for input from the user until it's a valid double
       do 
       {
           Console.Write(string.Format("Enter item #{0}: ", i));
           // read from console into userInput
           userInput = Console.ReadLine();
       } while (!double.TryParse(userInput, out newItem))

       // add the new item to the array
       items.Add(newItem);
  }

  // output all the items to the console, separated by commas
  Console.WriteLine(
      string.Join(", ", 
          items.Select(item => item.ToString())
      )
  ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T05:09:14.293

最小的例子。

```
 class Program
{
    static void Main(string[] args)
    {
        //reading the input and assign it to s
        string s = Console.ReadLine();
        //writing the input
        Console.WriteLine(s);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-22T05:16:22.157

您可以将由空格分隔的多个项目（来自用户输入）添加到列表中，如下所示：

```
string[] arrItems = Console.ReadLine().Split(' ');
List<double> lstItems = new List<double>(Array.ConvertAll(arrItems, arrTemp =>
Convert.ToDouble(arrTemp))); 
```

# ios - 当我将自定义对象拖入 UIScrollView 时，xCode 崩溃

> ID：12257049
> 
> 赞同：-1
> 
> 时间：2012-09-04T05:00:53.453
> 
> 标签：ios, xcode, crash, interface-builder

我有一个自定义按钮，它是一个子类`UIButton`。当我尝试将它拖入`UIScrollView`IB Xcode 中时，它会立即崩溃。是什么赋予了？

我有这个自定义按钮`UIScrollView`在我的应用程序的至少一个其他位置中工作。有任何想法吗？

![Xcode 崩溃](../Images/c1bab79e0304c70084a533a51fcb15e4.png) ![在此处输入图像描述](../Images/8666d7403847feada33b57e572cd4b6b.png)

* * *

**更新：** 取消选中文件检查器中的“使用自动布局”可修复此问题。请参阅下面的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T05:15:43.177

> 我有这个自定义按钮在我的应用程序中至少一个其他位置的 UIScrollView 内工作。有任何想法吗？

我可以像这样使几个 Java 编辑器崩溃。问题出在我的自定义组件代码中：我添加了代码，设计器（界面生成器）已执行该代码以显示我的组件。

请特别注意Button 代码中`init`的`viewDidLoad`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T05:55:02.923

不知道确切，但是曾经发生过同样的问题。我的问题是我的一些绘图方法被递归调用，导致 Xcode 崩溃。我处理了那些递归调用，问题得到了解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T07:35:52.503

**解决方案：取消选中文件检查器中的“使用自动布局”**

感谢@BornCoder，我决定尝试在运行 Xcode 4.4 的笔记本电脑上运行它。当我尝试构建时，我收到一条错误消息，提示此版本的 Xcode 不支持 Autolayout。我不打算使用 Autolayout，看起来 Xcode 4.5 会自动使用。取消选中该框即可修复它。

# javascript - 使用rotateY（）css翻转过渡时有什么方法可以防止内容镜像？

> ID：12257050
> 
> 赞同：0
> 
> 时间：2012-09-04T05:00:57.133
> 
> 标签：javascript, css, css-transitions

使用 rotateY() css 翻转动画时，我动态设置要显示到图像的一侧的背景，但由于一切都被翻转，图像是向后的。我在内部创建新元素并将它们的内容/背景设置为图像，但它们也会被翻转。有什么解决办法吗？

更多信息我基本上是在做这个[http://www.inserthtml.com/2011/09/css3-3d-transforms-keyframes/](http://www.inserthtml.com/2011/09/css3-3d-transforms-keyframes/)但是当另一个动画使用 boardCard.addEventListener('transitionend',函数（事件{boardCard.style.MozTransform='rotateY(-180deg)';

在这一点上，我还想动态设置可以正常工作的背景，除了里面的所有东西都被翻转了，所以图像是错误的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T18:05:18.307

你需要做的是让被翻转元素的背面已经被翻转，这样当你翻转主要元素时，背面的元素实际上会被翻转回它们的正常方向。

这里有一个非常好的示例和教程：http: [//desandro.github.com/3dtransforms/docs/card-flip.html](http://desandro.github.com/3dtransforms/docs/card-flip.html)

你会看到他们添加了 transform: rotateY( 180deg ); 提前到卡片的 .back 面，这样当他们将 .flipped 类添加到主卡片上时，它会将卡片的 .back 面翻转回正常方向。

# php - 在特定关键字 php mysql 上显示图像

> ID：12257053
> 
> 赞同：0
> 
> 时间：2012-09-04T05:01:22.587
> 
> 标签：php, mysql, image, position

有一个表格。它有**文本区域**、**文本字段**和上传图片选项。

我希望如果用户写了一些段落并希望图像正好显示在下一段的上方，那么他/她在**文本区域和文本字段中**写一个独特的关键字，如“imagehere” 。此唯一文本将存储在另一列中。

然后在从数据库中检索文本时，如果有这样的关键字，则将其替换为

`<img src="path">`

标签

这是根据用户定义的位置显示图像的正确方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T06:24:14.343

有用！
我想这样做是为了避免要求用户写

```
<img src="photos/uploadedimage"> 
```

在文本区域。因此，如果用户编写特定关键字，然后使用
**str_replace**，您可以轻松地将特定关键字替换为 img src 标签
并显示这些图像。

# android - 从该视图访问使用自定义视图扩展布局的活动的正确方法/逻辑是什么？

> ID：12257054
> 
> 赞同：0
> 
> 时间：2012-09-04T05:01:23.250
> 
> 标签：android, android-custom-view

我正在开发一个应用程序，其中有一个带有 4 个按钮的仪表板。每个按钮都会为不同的 Activity 启动一个新的 Intent。每个 Activity 都会扩展包含自定义视图的相同布局。在自定义视图中是一个 ViewPager。在 ViewPager 中，我想显示一个驻留在上述活动数组中的字符串。我应该将这些数组传递给自定义视图并将其显示在 ViewPager 中吗？如果是这样，我怎样才能通过它们？自定义视图如何知道它们来自哪个活动？我知道“发件人”活动将是当前正在运行的活动，但我该如何检查呢？或者我应该让数组静态并轻松访问它们？在这种情况下，我还需要知道要访问哪个活动。请告知，或者也许有更好的方法来实现它。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T06:23:06.120

Intents 允许您[启动其他活动](http://developer.android.com/guide/components/activities.html#StartingAnActivity)，还允许您将原语、原语数组/列表以及自定义`Parcelable`对象传递给其他活动。

您可以在此处传递数组数据、启动活动名称等。或者您可以使用[getCallingActivity()](http://developer.android.com/reference/android/app/Activity.html#getCallingActivity%28%29)来了解发件人活动。

更新：

`onCreate()`如果您在自定义视图类中有设置方法，则可以将数据传递给自定义视图。

对于更复杂的通信，将您的活动连接到其子视图，如下所示：

界面：

```
public interface CustomViewParent {
    //----add as many communication methods you want---
    public String[] getData();
    public void doSomething();
} 
```

活动：

```
public class MyActivity extends Activity implements CustomViewParent {

// ------------------------ INTERFACE METHODS ------------------------

// --------------------- Interface CustomViewParent ---------------------

    @Override
    public String[] getData() {
        return new String[]{"data1","data2"};
    }

    @Override
    public void doSomething() {
        Toast.makeText(this,"Custom view called me !",Toast.LENGTH_SHORT).show();
    }

// -------------------------- OTHER METHODS --------------------------

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        //----here we set the parent--
        ((CustomView)findViewById(R.id.my_custom_view)).setParent(this);
    }
} 
```

在自定义视图中接受并使用此接口：

```
public class CustomView extends ViewPager {
// ------------------------------ FIELDS ------------------------------

    private CustomViewParent parent;

// --------------------------- CONSTRUCTORS ---------------------------

    public CustomView(Context context) {
        super(context);
        init();
    }

    public CustomView(Context context, AttributeSet attrs) {
        super(context, attrs);
        init();
    }

// --------------------- GETTER / SETTER METHODS ---------------------

    public void setParent(CustomViewParent parent) {
        this.parent = parent;
    }

// ---------------------------- INITIALIZE-----------------------------
    private void init() {
    //-----initialize/inflate custom views-----

    //-----calls to parent, !! do not forget the null check !! ----
        if(parent != null){
            String[] data = parent.getData();

            parent.doSomething();
        }

    //----add data from parent to Views etc---

    }
} 
```

# c++ - 我不知道如何处理我的非默认构造函数中传递的指针

> ID：12257055
> 
> 赞同：0
> 
> 时间：2012-09-04T05:01:22.877
> 
> 标签：c++, oop, pointers

我不知道应该如何在我的非默认构造函数中处理传递的对象指针。我做错了这个程序，因为我觉得我不知道自己在做什么。

我已经坚持了一天半，我只是不明白。我将发布我必须使用默认构造函数和非默认构造函数的大部分作业。我还将包括我正在使用的类图，以便您了解变量/类/方法的功能。

我应该如何处理非默认构造函数中传递的指针？我无法通过这里分配任何值，因为它会告诉我它无法访问。在这段代码中：

```
Book::Book(string title, Author *pAuthor, Publisher *pPublisher, double price)
    {
        setTitle(title);
        setPrice(price);
    } 
```

知道如何使用这些指针吗？现在我可以使用默认构造函数正确传递所有内容，但我可能做错了，因为我正在使用其他对象。基本上我不应该有两条线，`Author author;`但`Publisher publisher;`我现在不在乎。

请帮忙！

Book.cpp 文件

```
#include <iostream>
#include <sstream>
using namespace std;

#include "Book.h"
#include "Publisher.h"
#include "Author.h"

class Book
{
    public:
        Book();
        Book(string title, Author *pAuthor, Publisher *pPublisher, double price);
        ~Book();
        void setTitle(string title);
        void setAuthorName(string first, string last);
        void setPublisher(string name, string address, string city);
        void setPrice(double price);
        string convertDoubleToString(double number);
        string getBookInfo();

    private:
        string title;
        double price;
        Author *pAuthor;
        Publisher *pPublisher;

    Author author;
    Publisher publisher;
};

Book::Book()
{
}

Book::Book(string title, Author *pAuthor, Publisher *pPublisher, double price)
{
    setTitle(title);
    setPrice(price);
}

Book::~Book()
{
}

void Book::setTitle(string  title)
{
    this->title = title;
}

void Book::setAuthorName(string first, string last)
{
    author.setFirstName(first);
    author.setLastName(last);
}

void Book::setPublisher(string name, string address, string city)
{
    publisher.setName(name);
    publisher.setAddress(address);
    publisher.setCity(city);
}

void Book::setPrice(double price)
{
    this->price = price;
}

string Book::convertDoubleToString(double number)
{
    return static_cast<ostringstream*>( &(ostringstream() << number) ) -> str();
}

string Book::getBookInfo()
{
    return title + "\n" + author.getFullName() + "\n" + publisher.getPublisherInfo() + "\n" + "$" + convertDoubleToString(price);
} 
```

Main.cpp 文件：

```
#include <iostream>
#include <string>
using namespace std;

#include "Book.h"

int main()
{
    system("cls");

    cout << "Book 1" << endl;

    Author *pAuthor = new Author("John", "Doe");
    Publisher *pPublisher = new Publisher("Wrox", "10475 Crosspoint Blvd.", "Indianapolis");
    Book *pBook = new Book("Memory Management", pAuthor, pPublisher, 39.99);

    cout << pBook->getBookInfo() << endl;

    cout << endl << "Book 2" << endl;

    Book book;

    book.setTitle("Advanced C++ Programming");
    book.setAuthorName("Linda", "Smith");
    book.setPublisher("Microsoft Press", "One Microsoft Way", "Redmond");
    book.setPrice(49.99);

    cout << book.getBookInfo() << endl << endl;

    system("pause");

    return 0;
}; 
```

作者.cpp 文件：

```
#include <iostream>
#include <string>
using namespace std;

class Author
{
    public:
        Author();
        Author(string first, string last);
        string getFullName();
        void setFirstName(string first);
        void setLastName(string last);

    private:
        string firstName;
        string lastName;
};

Author::Author()
{
}

Author::Author(string first, string last)
{
    setFirstName(first);
    setLastName(last);
}

string Author::getFullName()
{
    return firstName + " " + lastName;
}

void Author::setFirstName(string first)
{
    this->firstName = first;
}

void Author::setLastName(string last)
{
    this->lastName = last;
} 
```

类图：

![在此处输入图像描述](../Images/2bc984fac4d63e34aed233a2e39188a6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T05:04:51.620

您需要为指针成员分配足够的内存来保存通过指针传递的数据，然后将传递的指针指向的数据复制到成员指针变量中。

简而言之，您需要对传递的指针成员执行***深层复制***。这样您的指针成员就***拥有***他们指向的数据。

**编辑：**
虽然你发布的灵魂似乎有效，但它仍然存在问题：

```
Book::Book() 
{     
    pAuthor = new Author();     
    pPublisher = new Publisher(); 
} 
```

为类指针成员动态分配内存，它们确实需要自己的内存分配，因为您的类应该***拥有***并控制这些成员的***生命周期。***
您可能想看看***[Member Initializer Lists](https://stackoverflow.com/questions/1711990/what-is-this-weird-colon-member-syntax-in-the-constructor)***。但是，接受 4 个参数的类的参数化构造`Book`函数仍然不分配任何内存。它仍然执行传递给它的指针的***浅拷贝***。

> **什么是浅拷贝？**

浅拷贝只不过是简单地指向某个地址的指针。这意味着您的指针不仅仅控制指向的对象。如果指向同一对象的其他指针释放了该对象（*通过调用 `delete 等*），那么你是一个指向不再存在的东西的指针，也就是一个***悬空指针***。

当你这样做时会发生这种情况：

```
Book::Book(string title, Author* pAuthor, Publisher* pPublisher, double price) 
{
    ....
    this->pPublisher = pPublisher;           
    this->pAuthor = pAuthor;     
    ....
} 
```

您需要避免这种情况的是***Deep Copy***。

> **什么是深拷贝？**

深度复制意味着，将您的指针分配一个单独的内存，然后将另一个指针的内容复制到您自己对象的内存中（*与浅拷贝不同*）。这将指针指向的对象的生命周期与指针的生命周期分开它是创建的。

为此，您应该为指针成员分配单独的内存，然后为`=`类的重载运算符分配内存，`Author`并且`Publisher`应该复制各个类的每个成员。查看***[复制和交换习语](https://stackoverflow.com/questions/3279543/what-is-the-copy-and-swap-idiom)***，了解如何在 C++ 中正确实现这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T06:03:13.050

除非赋值要求您使用指针数据成员，否则最好的解决方案是简单地将它们完全删除，并修改相关的构造函数，您也可以通过使用初始化列表来改进：

```
class Book {

  ....
 public:
  Book(std::string title, const Author& author, const Publisher& publisher, double price);
 private:
  // use some convention for private data member names, here trailing _
  std::string title_;
  double price_;
  Author author_;
  Publisher publisher_;

};

Book::Book(string title, const Author& author, const Publisher& publisher, double price)
 : title_(title), price_(price), author_(author), publisher_(publisher) 
{

} 
```

**编辑**：由于似乎需要使用指针，并且由于`Book`该类具有尝试修改`Author`and的方法`Publisher`，因此您需要对输入指针指向的对象进行深层复制。这意味着动态分配一个对象，`new`并将指向它的指针分配给您的指针数据成员之一。例如，

```
class A { .... }; // class with copy constructor

A* a1; // pointer to an A, points to nothing.
a = new A(); // a1 now points to dynamically allocated A. You are in charge of deleting!
A* a2(new A); // pointer to an A, initialized to point to dynamically allocated A. 
```

但是随后您负责`deleting`动态分配的对象，并且必须修改您的类以使副本构造和分配合理，即遵循[三规则](http://en.wikipedia.org/wiki/Rule_of_three_%28C%2B%2B_programming%29)。希望您会看到在这种特殊情况下使用指针会导致比其价值更多的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T01:00:14.320

与我的同学交谈几分钟后，我发现我遗漏了几行重要的代码。

我想我的问题的问题是我不明白我应该怎么做。在教授和同学的一些提示之后，我知道我在默认和非默认构造函数中缺少几行代码。

在这里，我将展示我正在寻找的内容：

**Main.cpp**文件：

```
#include <iostream>
#include <string>
using namespace std;

#include "Book.h"

int main()
{
    system("cls");

    cout << "Book 1" << endl;

    Author *pAuthor = new Author("John", "Doe");
    Publisher *pPublisher = new Publisher("Wrox", "10475 Crosspoint Blvd.", "Indianapolis");
    Book *pBook = new Book("Memory Management", pAuthor, pPublisher, 39.99);

    cout << pBook->getBookInfo() << endl;

    cout << endl << "Book 2" << endl;

    Book *book = new Book();

    book->setTitle("Advanced C++ Programming");
    book->setAuthorName("Linda", "Smith");
    book->setPublisher("Microsoft Press", "One Microsoft Way", "Redmond");
    book->setPrice(49.99);

    cout << book->getBookInfo() << endl << endl;

    system("pause");

    return 0;
}; 
```

**Book.cpp**文件：

```
#include <iostream>
#include <sstream>
using namespace std;

#include "Book.h"

Book::Book()
{
    pAuthor = new Author();
    pPublisher = new Publisher();
}

Book::Book(string title, Author* pAuthor, Publisher* pPublisher, double price)
{
    this->title = title;
    this->price = price;

    this->pPublisher = pPublisher;
    this->pAuthor = pAuthor;
}

Book::~Book()
{
    delete pAuthor;
    delete pPublisher;
}

void Book::setTitle(string  title)
{
    this->title = title;
}

void Book::setAuthorName(string first, string last)
{
    pAuthor->setFirstName(first);
    pAuthor->setLastName(last);
}

void Book::setPublisher(string name, string address, string city)
{
    pPublisher->setName(name);
    pPublisher->setAddress(address);
    pPublisher->setCity(city);
}

void Book::setPrice(double price)
{
    this->price = price;
}

string Book::convertDoubleToString(double number)
{
    return static_cast<ostringstream*>( &(ostringstream() << number) ) -> str();
}

string Book::getBookInfo()
{
    return title + "\n" + pAuthor->getFullName() + "\n" + pPublisher->getPublisherInfo() + "\n" + "$" + convertDoubleToString(price);
} 
```

# regex - reg exp 在一行中查找单词的子序列

> ID：12257060
> 
> 赞同：0
> 
> 时间：2012-09-04T05:01:43.663
> 
> 标签：regex

有很多 reg exp 可以在一行中找到一个单词，但我一直在弄清楚如何找到一个 reg exp，它给了我一行中一个单词的子字符串。

例如：#if (! ( ((定义 COA_MODEL)||(定义 DIA_MODEL)) && (CFG_STATISTICAL_DATA)) )

仅当行以“#if”开头并具有“！”时，我才需要查找此行是否具有 _MODEL/_model ，我该怎么做？

我尝试使用 ^#if(.*?(\b_MODEL\b)[^$]*)$ 并没有成功。

感谢和问候拉贾斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T05:17:34.110

这应该根据您的标准工作：

[http://regexr.com?321fs](http://regexr.com?321fs)

`^#if(.*?(\w+_MODEL\b)[^$]*)$`

# html - 如何在 QTWidget 应用程序中在 Qt 和 HTML 页面之间进行通信

> ID：12257061
> 
> 赞同：1
> 
> 时间：2012-09-04T05:01:47.710
> 
> 标签：html, qt

我正在尝试找到一种方法将 HTML 中的按钮连接到我的 C++/Qt 应用程序中的操作。我使用 QTextBrowser 对象在 QT 应用程序中加载了一个 HTML 文件。如果我单击此 HTML 文件中的按钮，Qt 应用程序应该响应。我也可能希望反之亦然：这样 Qt 应用程序中的操作会导致 HTML 页面中的响应。请提出合适的解决方案。

我的示例代码是：

```
QWebView view;
view.setStyleSheet(
  "background-color:rgb(150,147,88); padding: 7px ; color:rgb(255,255,255)");
view.load(QUrl("test.html"));
view.show(); 
```

有没有像信号/插槽这样的机制？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T08:02:42.540

有几种方法可以做到这一点，因为您的示例使用的是*QWebView*而不是*QTextBrowser*，我假设您使用的是*QWebView*。

[`QWebView::linkClicked(const QUrl& url)`](http://qt-project.org/doc/qt-4.8/qwebview.html#linkClicked)单击链接时会触发页面到应用程序信号，`QWebView::load(const QUrl& url)`并将更改页面。

如果您正在创建 JavaScript 应用程序，请查看[QtWebKit Bridge](http://qt-project.org/doc/qt-4.8/qtwebkit-bridge.html)文档。这允许与在页面上运行的 JavaScript 进行两种方式的通信。

# install4j - 如何在 os x 的 info.plist 中添加“StartOnMainThread”

> ID：12257066
> 
> 赞同：0
> 
> 时间：2012-09-04T05:02:14.317
> 
> 标签：install4j

我想在 OX S 上制作 info.plist 文件

我想添加

> dict标签的Java键中的StartOnMainThread键

我已经编写了“StartOnMainThread”目录条目。 ![在此处输入图像描述](../Images/6e99245c339914e8af2af6f1326e3557.png)

它失败了。

================= 我想做这个info.plist文件======================== ======= ![在此处输入图像描述](../Images/1ea51df7cc841f30fcdf3fc769b613be.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T14:57:26.087

只需编辑您的启动器并选择“使用 SWT 或 QT”，然后 StartOnMainThread 将被添加到 Info.plist 文件中。

如果确实需要手动修改 Info.plist 文件，请转到“Executable options->Mac OS X options”添加一个片段，该片段将添加到 Info.plist 文件中。

# android - 在 viewpager 中可以实现这种效果吗？

> ID：12257067
> 
> 赞同：4
> 
> 时间：2012-09-04T05:02:19.007
> 
> 标签：android, android-viewpager, android-animation

我正在使用`ViewPager`. `Activity`我需要在翻页之间产生这种效果。

![这个效果](../Images/f728ebef8c05006126f9c0a4f953b612.png)

除了在Android的主屏幕之间翻转之外，我从未见过这样的效果。如果你用过这个动画或者你听说过动画的名字，请帮助我。我对这部动画没有任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T05:25:21.827

它实际上是一个扩展`SmoothPagedView`-> `PagedView`->的自定义视图`ViewGroup`。一个很好的地方是查看 Android 启动器源。它实际上相当复杂，但Android 4.1.1 中的[`com.android.launcher2.Workspace`[link]](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/4.1.1_r1/com/android/launcher2/Workspace.java?av=f)应该让您了解所做的工作。

您看到的看起来 3D 的轮廓似乎是由 创建的`HolographicOutlineHelper`，并且有 3D 效果应用于各个`CellLayout`s（或页面）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T11:17:49.093

这种效应称为覆盖流。在[此链接](http://www.inter-fuser.com/2010/02/android-coverflow-widget-v2.html)中，您可以找到制作封面流效果的代码。

Android 中还有另一种动画效果，称为页面卷曲。如果您对另一种动画风格感兴趣，请查看它。

# jsf - 如何使 Primefaces selectonemenu 处于禁用状态？

> ID：12257069
> 
> 赞同：6
> 
> 时间：2012-09-04T05:02:31.947
> 
> 标签：jsf, primefaces

我需要使用 p:selectonemenu 并将其禁用，即它应该在发布期间提交，但它应该是只读的。请注意，我不想使用 disabled 属性，因为这会阻止发布。

我在这个论坛上读到这可以通过使用隐藏字段来实现，但是我不明白如何实现。如果有人可以在这方面为我提供一些帮助，我将不胜感激。

```
<p:inputText id="cpr" value="#{customerbean.customer.cpr}">
    <p:ajax event="change" listener="#{customerbean.fetchCustomerDatafromCBS}" update="nationality address passportno name nationality dob address mailingaddress gender mobileno landlineno otherno email maritalstatus nochildren" immediate="true" >
         <f:param name="cprNumber" value="#{customerbean.customer.cpr}"/>
    </p:ajax>                 
    <f:validator validatorId="cprValidator" />                    
</p:inputText>   

<p:selectOneMenu id="gender" value="#{customerbean.customer.gender}" required="!#{customerbean.disabled}" requiredMessage="#{text['validation.error.required.gender']}" disabled="#{customerbean.disabled}">                      
    <f:selectItem itemLabel="Select One" itemValue="" noSelectionOption="true" />  
    <f:selectItem itemLabel="Male" itemValue="Male" />  
    <f:selectItem itemLabel="Female" itemValue="Female"  />  
</p:selectOneMenu>                

<p:inputText  type="hidden" value="#{customerbean.customer.gender}" /> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T13:44:04.123

> 我在这个论坛上读到这可以通过使用隐藏字段来实现，但是我不明白如何实现。

使`<p:selectOneMenu>`禁用，并创建一个`<p:inputText type="hidden" value="#{bean.property}" />`. 该`value`属性必须与`<p:selectOneMenu>`. 如有必要，请使用相同的转换器。

这样，`<p:selectOneMenu>`将对用户禁用，但值将由 hidden 提交`<p:inputText />`。

* * *

请记住，隐藏的输入仍然是 a `<p:inputText />`，因此需要在其值更改时对其进行更新。为其分配一个 ID，并确保将其添加到`update`您的`<p:ajax />`.

# php - 如何在 Joomla 2.5 自定义组件的前端显示编辑器

> ID：12257073
> 
> 赞同：3
> 
> 时间：2012-09-04T05:02:48.187
> 
> 标签：php, joomla, editor

我无法在我的自定义组件中将编辑器添加到我的前端，也无法在线找到任何帮助。它应该是非常简单的东西吗？

我从某个地方得到了这段代码，但即使这显示了简单的文本区域，我也检查了用户的编辑器选项并尝试手动将其设置为 TinyMCE，但它仍然显示简单的纯文本区域

```
 jimport( 'joomla.html.editor' );
        $editor =& JEditor::getInstance();
        echo $editor->display("jobdesc", ""/*$itemData['body']*/, "400", "100", "150", "10", 1, null, null, null, array('mode' => 'advanced')); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T02:24:25.343

您可以使用 JFactory 加载编辑器。

```
$editor = JFactory::getEditor();
echo $editor->display("jobdesc", ""/*$itemData['body']*/, "400", "100", "150", "10", 1, null, null, null, array('mode' => 'advanced')); 
```

[http://docs.joomla.org/JFactory/getEditor](http://docs.joomla.org/JFactory/getEditor)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-15T11:09:10.573

在您的 xml 文件中创建一个表单，您必须输入“type=editor”。

# android - 方向问题

> ID：12257075
> 
> 赞同：1
> 
> 时间：2012-09-04T05:03:03.927
> 
> 标签：android

我正在尝试在活动中调用对话框。每当我更改自动旋转已打开并且我已将其设为横向，然后将其恢复为纵向时，它会导航到先前的活动。请帮助我。请找到对话框的代码。

```
public class TransSuccessfullyDialog extends Dialog implements OnClickListener
    {

        public  TransSuccessfullyDialog(Context context)
        {

            super(context);

            requestWindowFeature(Window.FEATURE_NO_TITLE);

            if(statusString.equals("1")){

                setContentView(R.layout.transaction_complete);
                //@Override

                ImageView img = (ImageView) findViewById(R.id.imageView1);    
                //Bitmap src = null;

                Bitmap bmp = BitmapFactory.decodeFile("data/data/com.android.epaisa/logo.jpg");
                Bitmap resizedBitmap=Bitmap.createScaledBitmap(bmp, 50, 50, true);
                img.setImageBitmap(resizedBitmap);

                refNo=(TextView)findViewById(R.id.textView1);
                refNo.setText("Thank you!");

                                card=(TextView)findViewById(R.id.textView3);
                card.setText(" Number "+ RefNo);

                actfail_btn=(Button) findViewById(R.id.addfromcontactsbtn);
                actfail_btn.setOnClickListener(this);

            }

        }
        public void onBackPressed() {
            // Do as you please
        }
        public void onClick(View v) 
        {
            if(v==actfail_btn)
            {
startActivity(intent);

            }
        }

    } 
```

文件

```
<?xml version="1.0" encoding="UTF-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/relativeLayout1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/background" >

    <Button
        android:id="@+id/addfromcontactsbtn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:gravity="center"
        android:text="  Ok  "
        android:textSize="22sp"
        android:textStyle="bold" />

    <ImageView
        android:id="@+id/imageView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignRight="@+id/addfromcontactsbtn"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="75dp"
        android:background="@drawable/success"
        android:gravity="left" />

    <TextView
        android:id="@+id/textView4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:text="Success"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/textView1"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/textView1"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="175dp"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/textView2"
        android:layout_centerHorizontal="true"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textStyle="bold" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/addfromcontactsbtn"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="20dp" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T05:15:37.123

这是 MessageBox 的一个示例。使用它或将其与您自己的 Dialog 进行比较并纠正您的问题：

```
import java.util.ArrayList;

import org.mabna.order.R;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.LinearLayout;
import android.widget.TextView;
import android.widget.Toast;

public class MessageBox {

    static ArrayList<AlertDialog> arrAlertDialog = new ArrayList<AlertDialog>();
    static OnMyDialogResult mDialogResult; // the callback

    public enum MessageBoxState {
        OK, YesNo
    }

    public enum MessageBoxResult {
        OK, Cancel, Yes, No
    }

    public final static void show(final Activity parent, String title,
            String message, MessageBoxState state) {

        // if (alertDialog != null)
        // {
        // alertDialog.dismiss();
        // }

        AlertDialog.Builder builder;

        LayoutInflater inflater = (LayoutInflater) parent
                .getSystemService(Activity.LAYOUT_INFLATER_SERVICE);
        View layout = inflater.inflate(R.layout.dialog_messagebox,
                (ViewGroup) parent.findViewById(R.id.layout_root));
        layout.setMinimumWidth(400);

        TextView tvTitle = (TextView) layout.findViewById(R.id.tvTitle);
        tvTitle.setText(Farsi.Convert(title));

        tvTitle.setPadding(10, 10, 10, 10);

        TextView tvMessage = (TextView) layout.findViewById(R.id.tvMessage);
        tvMessage.setText(message);

        tvMessage.setPadding(10, 10, 10, 10);

        Button btnOK = (Button) layout.findViewById(R.id.btnOK);
        Button btnYes = (Button) layout.findViewById(R.id.btnYes);
        Button btnNo = (Button) layout.findViewById(R.id.btnNo);
        Button btnCancel = (Button) layout.findViewById(R.id.btnCancel);
        btnOK.setText("OK");

        LinearLayout.LayoutParams lp = (LinearLayout.LayoutParams) btnOK
                .getLayoutParams();
        lp.setMargins(10, 10, 10, 10);
        btnOK.setLayoutParams(lp);

        btnYes.setText("Yes");

        lp = (LinearLayout.LayoutParams) btnYes
                .getLayoutParams();
        lp.setMargins(10, 10, 10, 10);
        btnYes.setLayoutParams(lp);

        btnNo.setText("No");

        btnNo.setPadding(10, 10, 10, 10);
        lp = (LinearLayout.LayoutParams) btnNo
                .getLayoutParams();
        lp.setMargins(10, 10, 10, 10);
        btnNo.setLayoutParams(lp);

        btnCancel.setText("Cancel");

        btnCancel.setPadding(10, 10, 10, 10);
        lp = (LinearLayout.LayoutParams) btnCancel
                .getLayoutParams();
        lp.setMargins(10, 10, 10, 10);
        btnCancel.setLayoutParams(lp);

        btnOK.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                btnOK_onClick();
            }
        });
        btnYes.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                btnYes_onClick();
            }
        });
        btnNo.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                btnNo_onClick();
            }
        });
        btnCancel.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                btnCancel_onClick();
            }
        });

        LinearLayout layout_OK = (LinearLayout) layout
                .findViewById(R.id.layout_OK);
        LinearLayout layout_YesNo = (LinearLayout) layout
                .findViewById(R.id.layout_YesNo);

        switch (state) {
        case OK:
            layout_YesNo.setVisibility(LinearLayout.GONE);
            layout_OK.setVisibility(LinearLayout.VISIBLE);
            break;
        case YesNo:
            layout_YesNo.setVisibility(LinearLayout.VISIBLE);
            layout_OK.setVisibility(LinearLayout.GONE);
            break;
        default:
            break;
        }

        builder = new AlertDialog.Builder(parent);
        builder.setView(layout);

        AlertDialog alertDialog;

        alertDialog = builder.create();
        alertDialog.setCancelable(false);
        alertDialog.show();
        mDialogResult = null; // causes each messageBox instance has its own
                                // DialogResult because it removes previous
                                // DialogResults

        arrAlertDialog.add(alertDialog);
        return;
    }

    private static AlertDialog getLastDialog() {
        if (arrAlertDialog.size() > 0)
        {
            AlertDialog dialog = arrAlertDialog.get(arrAlertDialog.size() - 1);
            arrAlertDialog.remove(dialog);
            return dialog;
        }
        return null;
    }

    private final static void btnOK_onClick() {
        AlertDialog currentdialog = getLastDialog();
        if (mDialogResult != null) {
            mDialogResult.finish(MessageBoxResult.OK);
            if (currentdialog != null)
                currentdialog.dismiss();
            mDialogResult.dialogClosed();
        } else {
            if (currentdialog != null)
                currentdialog.dismiss();
        }
    }

    private final static void btnYes_onClick() {
        AlertDialog currentdialog = getLastDialog();
        if (mDialogResult != null) {
            mDialogResult.finish(MessageBoxResult.Yes);
            if (currentdialog != null)
                currentdialog.dismiss();
            mDialogResult.dialogClosed();
        } else {
            if (currentdialog != null)
                currentdialog.dismiss();
        }
    }

    private final static void btnNo_onClick() {
        AlertDialog currentdialog = getLastDialog();
        if (mDialogResult != null) {
            mDialogResult.finish(MessageBoxResult.No);
            if (currentdialog != null)
                currentdialog.dismiss();
            mDialogResult.dialogClosed();
        } else {
            if (currentdialog != null)
                currentdialog.dismiss();
        }
    }

    private final static void btnCancel_onClick() {
        AlertDialog currentdialog = getLastDialog();
        if (mDialogResult != null) {
            mDialogResult.finish(MessageBoxResult.Cancel);
            if (currentdialog != null)
                currentdialog.dismiss();
            mDialogResult.dialogClosed();
        } else {
            if (currentdialog != null)
                currentdialog.dismiss();
        }
    }

    public final static void setDialogResult(OnMyDialogResult dialogResult) {
        mDialogResult = dialogResult;
    }

    public interface OnMyDialogResult {
        void finish(MessageBoxResult result);

        void dialogClosed();
    }

} 
```

它的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layout_root"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@color/white"
    android:orientation="vertical"
    android:padding="10dp" >

    <TextView
        android:id="@+id/tvTitle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="right"
        android:layout_weight="1"
        android:text="TextView"
        android:textStyle="bold" >
    </TextView>

    <TextView
        android:id="@+id/tvLine"
        android:layout_width="fill_parent"
        android:layout_height="2dip"
        android:layout_weight="1"
        android:background="@color/black"
        android:text="" >
    </TextView>

    <TextView
        android:id="@+id/tvMessage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="right"
        android:layout_weight="1"
        android:text="TextView" >
    </TextView>

    <LinearLayout
        android:id="@+id/layout_YesNo"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="center_horizontal"
        android:gravity="center" >

        <Button
            android:id="@+id/btnCancel"
            android:layout_width="70dip"
            android:layout_height="40dip"
            android:text="Button" >
        </Button>

        <Button
            android:id="@+id/btnNo"
            android:layout_width="70dip"
            android:layout_height="40dip"
            android:text="Button" />

        <Button
            android:id="@+id/btnYes"
            android:layout_width="70dip"
            android:layout_height="40dip"
            android:text="Button" >
        </Button>
    </LinearLayout>

    <LinearLayout
        android:id="@+id/layout_OK"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:baselineAligned="true"
        android:orientation="vertical" >

        <Button
            android:id="@+id/btnOK"
            android:layout_width="80dip"
            android:layout_height="40dip"
            android:layout_gravity="center"
            android:gravity="center"
            android:text="Button" >
        </Button>
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-04T05:15:24.390

您只需在清单中定义 android:screenOrientation 属性，如下所示。

```
<activity android:name=".YourActivity" android:screenOrientation="landscape"/>. 
```

# gwt - 如何从 GWT EXT 中的网格中获取文本字段

> ID：12257077
> 
> 赞同：0
> 
> 时间：2012-09-04T05:03:22.240
> 
> 标签：gwt, gridview, extjs, gwt2, gxt

我有一个 Grid，其中包含 4 列，某列包含 TextField 和某处 ComboBox，我通过调用特定 ColumnConfig 的渲染器来实现这一点。每行都有一个名为“保存”的按钮。

用户甚至可以对 textField 的内容进行更改，我现在想要该 textField 内容，如何获取它。

我无法获取![在此处输入图像描述](../Images/1fc39c33ccdfd9ce8e5223dd8f9d9173.png)文本字段本身。当我尝试使用 store.getAt(0) 获取文本字段时，它给了我最初的 TextField 内容，而不是用户现在修改的内容。

服务器代码

```
 List<AccountResult> results = new ArrayList<AccountResult>();

for (int i = 0; i < listAccounts.size(); i++) {

Account account = listAccounts.get(i);

AccountResult accountResult=new AccountResult();
accountResult.setActionId(account.getId());
accountResult.setAccountName(account.getAccountName());
accountResult.setEmailId(account.getAccountEmail());
accountResult.setMobileNo(account.getAccountcontactNum());
accountResult.setAccountDescription(account.getAccountDesc());

results.add(accountResult);
} 
```

客户端代码

```
ListStore<AccountResult> store = new ListStore<AccountResult>();
store.add(response.getAccountDetails());

List<ColumnConfig> configs = new ArrayList<ColumnConfig>();

ColumnConfig accountNameColumn = new ColumnConfig();
accountNameColumn.setId(AccountResult.ACCOUNT_NAME);
accountNameColumn.setHeader(Constants.VA_ACCOUNT_NAME);
accountNameColumn.setWidth(110);
accountNameColumn.setRenderer(getTextAndViewRenderer());
configs.add(accountNameColumn); 
```

在 getTextAndViewRenderer() 函数中

```
accountNameTextField = getTextField(null, data, 80, Constants.VA_ACCOUNT_NAME_ID+rowIndex, Constants.VA_ACCOUNT_NAME_ID, false, false);
hp.add(accountNameTextField); 
```

在我的按钮的句柄事件中，我应该写什么来获取 TextField 或它的内容

```
private Listener<ButtonEvent> getActionListener(final Action action, final AccountResult result, final ListStore<AccountResult> store, final Grid<AccountResult> grid, final String property,final ColumnData config, final int rowIndex) {
return new Listener<ButtonEvent>() {

public void handleEvent(ButtonEvent be) {

}
};
} 
```

请帮助我.....谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T09:05:59.327

您正在渲染 TextField 单元格小部件，但在更改文本字段中的值后您缺少更新模型。为什么不直接使用默认的网格编辑技术？ [http://staging.sencha.com:8080/examples-dev/#ExamplePlace:inlineeditablegrid](http://staging.sencha.com:8080/examples-dev/#ExamplePlace:inlineeditablegrid)

# c++ - CreateRemoteThread 在 win7 64 位上返回 ERROR_ACCESS_DENIED (5)

> ID：12257079
> 
> 赞同：0
> 
> 时间：2012-09-04T05:03:28.197
> 
> 标签：c++, xcode, windows-7, 64-bit, 32-bit

我该如何解决这个问题？代码运行良好，因为我在 32 位计算机上对其进行了测试，但我的 64 位计算机使用 getlasterror() 返回了该错误；

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T06:10:00.193

部分信息：

当我`CreateRemoteThread`在 Win2000 上工作时，一切正常，除了我在属于不同终端服务器会话的进程中启动远程线程的情况。在 Win2003（及更高版本）上，所有系统进程都在与您当前登录的交互式会话不同的 TS 会话 0 中工作。当时我还没有设法解决 TS 会话边界问题。这是您可能需要首先检查的内容。

这更有可能不是 32/64 位问题，而是某种需要特殊特权和/或权限的安全问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T15:14:42.723

我猜你的目标进程是一个托管可执行文件，为“任何 CPU”编译......

如果是这样，当您在 64 位 Windows 上启动该 exe 时，它​​将 JIT 编译为 64 位代码，从而成为一个 64 位进程。

然后，您不能从 32 位进程对其调用 CreateRemoteThread。

在 32 位 Windows 上启动的相同托管 exe 将 JIT 到 32 位代码，因此可以工作。

如果是这种情况，并且您是相关托管 exe 的作者，请为 x86 重建它。

# c# - 将具有动态元素名称的表单绑定到MVC c#中的模型类

> ID：12257080
> 
> 赞同：1
> 
> 时间：2012-09-04T05:03:30.800
> 
> 标签：c#, asp.net-mvc, dynamic, model

我试图将此表单的后数据绑定到 MVC 模型类，

```
<form>
  <div criteriaid=”59”&gt;
    <input type="hidden" value="FRON 01" name="criteriaProduct[59]">
    <input type="hidden" value="FRON 02" name="criteriaProduct[59]">  
    <input type="hidden" value="FRON 04" name="criteriaProduct[59]">
  <div>

  <div criteriaid=”60”&gt;
    <input type="hidden" value="FRON 02" name="criteriaProduct[60]">
    <input type="hidden" value="FRON 01" name="criteriaProduct[60]">  
    <input type="hidden" value="FRON 04" name="criteriaProduct[60]">
  <div>

  <div criteriaid=”61”&gt;
    <input type="hidden" value="FRON 05" name="criteriaProduct[61]">
    <input type="hidden" value="FRON 06" name="criteriaProduct[61]">  
    <input type="hidden" value="FRON 01" name="criteriaProduct[61]">
  <div>
</form> 
```

问题是标准 ID 是动态的，产品必须按标准 ID 分组。我试过

```
Class
{
    public string[][] criteriaProduct { get; set; }  // not working
    public string[] criteriaProduct { get; set; } // not working
} 
```

任何人都可以帮忙吗？谢谢我知道这个数组名称在 PHP 中是可以的，但是 c# 呢？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-04T05:25:39.823

关于数组绑定的完整信息在[Hancelman 博客文章中](http://www.hanselman.com/blog/ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx)

# python - Django Admin - 覆盖 get_form 后缺少内联表单

> ID：12257081
> 
> 赞同：1
> 
> 时间：2012-09-04T05:03:40.360
> 
> 标签：python, django, django-forms, django-admin

如果登录的用户不是超级用户，我需要在 Django Admin 上的表单中隐藏一些字段。这就是我想出的：

```
 def get_form(self, request, obj=None, **kwargs):
        form = super(RestauranteAdmin, self).get_form(request, obj, **kwargs)
        if not request.user.is_superuser:
            form.base_fields.pop('approved')
            form.base_fields.pop('day_of_the_week')
            form.base_fields.pop('photo')
        form.label_suffix = ''
        return form 
```

这确实隐藏了必要的字段，但由于某种原因，如果用户不是超级用户，管理员也会停止呈现我的内联。据我所知，这种方法应该与内联无关。我错过了什么吗？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T04:02:15.250

只需在调用父方法之前将其排除

希望能帮助到你

```
def get_form(self, request, obj=None, **kwargs):
    if not request.user.is_superuser:              
       self.exclude = []
    else:    
       self.exclude = ['approved','day_of_the_week','photo']

    return super(RestauranteAdmin, self).get_form(request, obj, **kwargs) 
```

# c - 从C中的字符串中删除重复的单词

> ID：12257083
> 
> 赞同：-6
> 
> 时间：2012-09-04T05:03:43.113
> 
> 标签：c, string

我有一个类似`"one two one three"`or的字符串`"one|two|three|two"`。

关于从 C 中的字符串中删除重复单词的任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T05:13:32.820

伪代码：

```
hare=tortoise=str;  /* let str = your starting string. */
while (hare != NULL):
  if !(been_seen(current_word(hare))):
    word_copy(tortoise, hare);
    advance_to_next_word(hare);
  advance_to_next_word(hare);
*tortoise = NULL; 
```

解释：快速移动的“野兔”指针在字符串中前进，一次一个字。当它遇到一个以前看不见的单词时，将该单词复制到尾随的“乌龟”指针，然后将其推进到该单词的末尾。这会破坏性地修改原始字符串。

要实现这种方法，您需要实现`advance_to_next_word()`（必须检测由您的一个分隔符标记的单词边缘），`word_copy()`最重要的是，一个必须在第一次将任何单词作为参数传递时`been_seen()`返回的函数，然后在具有相同参数的任何后续调用中。任何关联数组（字典）数据结构都可以。`false``true`

# ruby-on-rails - 在 Rails 中，使用 simple_nested_form 时如何自定义 link_to_add 布局

> ID：12257088
> 
> 赞同：1
> 
> 时间：2012-09-04T05:04:24.740
> 
> 标签：ruby-on-rails, ruby, nested-forms, simple-form

我正在尝试确定在 Rails 3 中使用nested_form/simple_form gem 时是否有办法自定义由 link_to_add 插入的 HTML。

目前它生成一个 div，但我希望它生成一个表格行。

我看过一个使用 Cocoon gem 的例子，但我更喜欢使用 nested_form。

当前代码非常简单：

```
table.table.table-striped
  tr 
    th Name
    th Notes
    th $ Value
    th
    = f.simple_fields_for :client_contracted_rates do |ccr|
      tr
        td = ccr.text_field :name, :class => "span2"
        td = ccr.text_field :notes, :class => "span2"
        td = ccr.text_field :value, :class => "span1"
        td = ccr.link_to_remove "x", :class => "btn btn-mini btn-danger"

= f.link_to_add "+ Add Contracted Rate", :client_contracted_rates, :class => "btn pull-right" 
```

我希望生成一个表格行，或者至少与 div 和输入默认值不同。

干杯，

城野

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T03:53:57.213

我最终没有使用**f.link_to_add**而是使用了**= link_to**方法。

这使我可以根据需要将**= link_to**包装在表格行内。

# wordpress - 如何显示来自相关自定义分类的自定义帖子

> ID：12257090
> 
> 赞同：0
> 
> 时间：2012-09-04T05:04:30.010
> 
> 标签：wordpress, taxonomy, custom-post-type, custom-taxonomy

我创建了两种不同的自定义帖子类型：“视频”和“位置”。
然后，我创建了一个名为“Video_Categories”的自定义分类法。
我已将此自定义分类法分配给两种自定义帖子类型。

我想要做的是在位置上显示彼此具有相同术语的视频。

例如：

**视频帖子：**

*   名称：视频1；Video_Category：昆士兰布里斯班；
*   名称：视频2；Video_Category：昆士兰黄金海岸；
*   名称：视频3；Video_Category：昆士兰州阳光海岸；

**位置贴：**

*   名称：布里斯班；Video_Category：布里斯班；

我想从查看此帖子的分类并返回具有相同分类的视频帖子的位置页面创建一个查询。

在上面的示例中，“视频 1”视频帖子将被返回并显示在位置页面上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T06:30:50.043

好问题，这与获取相关类别或标签有点不同，尽管仍然使用类似的前提。有几种方法可以做到这一点，但最简单的方法之一可能是使用自定义函数，该函数利用`WP_Query`. 将以下代码添加到您的`functions.php`文件中。

```
// Create a query for the custom taxonomy
function related_posts_by_taxonomy( $post_id, $taxonomy, $args=array() ) {
    $query = new WP_Query();
    $terms = wp_get_object_terms( $post_id, $taxonomy );

    // Make sure we have terms from the current post
    if ( count( $terms ) ) {
        $post_ids = get_objects_in_term( $terms[0]->term_id, $taxonomy );
        $post = get_post( $post_id );
        $post_type = get_post_type( $post );

        // Only search for the custom taxonomy on whichever post_type
        // we AREN'T currently on
        // This refers to the custom post_types you created so
        // make sure they are spelled/capitalized correctly
        if ( strcasecmp($post_type, 'locations') == 0 ) {
            $type = 'videos';
        } else {
            $type = 'locations';
        }

        $args = wp_parse_args( $args, array(
                'post_type' => $type,
                'post__in' => $post_ids,
                'taxonomy' => $taxonomy,
                'term' => $terms[0]->slug,
            ) );
        $query = new WP_Query( $args );
    }

    // Return our results in query form
    return $query;
} 
```

显然，您可以更改此函数中的任何内容以获得您正在寻找的确切结果。查看[http://codex.wordpress.org/Class_Reference/WP_Query](http://codex.wordpress.org/Class_Reference/WP_Query)以供进一步参考。

有了它，您现在可以访问该`related_posts_by_taxonomy()`功能，您可以在其中传递您想要查找相关帖子的任何分类。因此，在您`single.php`或任何用于自定义帖子类型的模板中，您可以执行以下操作：

```
<h4>Related Posts</h3>
<ul>
<?php $related =  related_posts_by_taxonomy( $post->ID, 'Video_Categories' );
    while ( $related->have_posts() ): $related->the_post(); ?>
        <li><?php the_title(); ?></li>
    <?php endwhile; ?>
</ul> 
```

# php - 二维关联数组中相似元素的总和 - PHP

> ID：12257091
> 
> 赞同：0
> 
> 时间：2012-09-04T05:04:36.557
> 
> 标签：php, multidimensional-array, foreach, associative-array

我有一个如下所示的数组

```
Array (
        [0]=> Array
                (
                   [employee_num]  =>1009
                   [employee_name] =>Jane Doe
                   [amount]        =>4500.00
                )
        [1]=> Array
                (
                   [employee_num]  =>1009
                   [employee_name] =>Jane Doe
                   [amount]        =>2500.00
                )
        [2]=> Array
                (
                   [employee_num]  =>1033
                   [employee_name] =>Test User
                   [amount]        =>3455.50
                )
        [3]=> Array
                (
                   [employee_num]  =>1009
                   [employee_name] =>Jane Doe
                   [amount]        =>5500.00
                )
        [4]=> Array
                (
                   [employee_num]  =>1033
                   [employee_name] =>Test User
                   [amount]        =>7500.00
                )
     ) 
```

我想要得到的是一个像下面这样的数组：（每个用户一个条目**及其金额值的总和**。）我知道我必须使用一个 for-each，但不能真正理解如何合并 [employee_num] 的条目和 [employee_name]。我事先不知道数组中类似条目的数量或其索引。

```
Array (
        [0]=> Array
                (
                   [employee_num]  =>1009
                   [employee_name] =>Jane Doe
                   [amount]        =>12500.00
                )
        [1]=> Array
                (
                   [employee_num]  =>1033
                   [employee_name] =>Test User
                   [amount]        =>10955.50
                )
      ) 
```

我怎样才能做到这一点？任何人都可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T05:11:54.057

```
function sumAmount($data)
{
    $rst=array();
    foreach($data as $info)
    {
        if(!isset($rst[$info["employee_num"]]))
            $rst[$info["employee_num"]]=$info;
        else
            $rst[$info["employee_num"]]["amount"]+=$info["amount"];
    }
    return array_values($rst);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T05:11:32.933

假设 $array 是原始数组：

```
$outputArray = array();
foreach ($array as $employeeArray) {
    $outputArray[$employeeArray['employee_name']]['employee_num'] = $employeeArray['employee_num'];
    $outputArray[$employeeArray['employee_name']]['employee_name'] = $employeeArray['employee_name'];
    $outputArray[$employeeArray['employee_name']]['amount'] += $employeeArray['amount'];
}
print_r($outputArray); 
```

的键`$outputArray`是员工的姓名。如果您想通过employee_num 进行匹配，只需使用`$outputArray[$employeeArray['employee_num']]`而不是`$outputArray[$employeeArray['employee_name']]`.

# css - 页脚在某些页面上浮动偏离位置

> ID：12257103
> 
> 赞同：0
> 
> 时间：2012-09-04T05:06:09.940
> 
> 标签：css, html, footer

[我的博客](http://speechnotrecognised.blogspot.com)页脚在帖子页面上很好，但在主页上，它实际上将自己置于不同的元素（主包装器）中。

我能够使用 Chrome 的开发者工具确定这一点。

我开始认为我的 html 存在严重问题，因为我的侧边栏也有奇怪的位置问题。

CSS：

```
#footer {
  width:1100px;
  height:26pt;
  padding:10px;
  margin:20px auto 0px;
  font-family: 'Source Sans Pro', sans-serif;
  font-size:12pt;
  text-align: center;
  background:#ffffff;
-moz-border-radius: 5px;
border-radius: 5px;
  line-height:1.4em;
  clear:both;
  display:block;
} 
```

HTML：

```
 <body>

  <div id='outer-wrapper'>

   <div id='content-wrapper'>

      <div id='crosscol-wrapper' style='text-align:center'>
        <b:section class='crosscol' id='crosscol'/>
      </div>

 <div id='sidebar-wrapper'>
        <b:section class='sidebar' id='sidebar' preferred='yes'>

<b:widget id='HTML5' locked='false' title='MRS SPEECH&apos;S RECIPE OF THE WEEK' type='HTML'>
<b:includable id='main'>

  <div class='widget-content'>
    <data:content/>
  </div>

  <b:include name='quickedit'/>
</b:includable>
</b:widget>
</b:section>
      </div>

      <div id='main-wrapper'>
        <b:section class='main' id='main' showaddelement='no'>
<b:widget id='Blog1' locked='true' title='Blog Posts' type='Blog'>
<b:includable id='nextprev'>

      <div class='clear'>&#160;</div>
  <div class='blog-pager' id='blog-pager'>
    <b:if cond='data:newerPageUrl'>
      <span id='blog-pager-newer-link'>
      <a class='blog-pager-newer-link' expr:href='data:newerPageUrl' expr:id='data:widget.instanceId + &quot;_blog-pager-newer-link&quot;' expr:title='data:newerPageTitle'><img src='http://i1252.photobucket.com/albums/hh569/speechnotrecognised/9f703b71.png'/></a>
      </span>
    </b:if>
    <b:if cond='data:olderPageUrl'>

      <span id='blog-pager-older-link'>
      <a class='blog-pager-older-link' expr:href='data:olderPageUrl' expr:id='data:widget.instanceId + &quot;_blog-pager-older-link&quot;' expr:title='data:olderPageTitle'><img src='http://i1252.photobucket.com/albums/hh569/speechnotrecognised/54059f04.png'/></a>
      </span>
    </b:if>

    <b:if cond='data:mobileLinkUrl'>
      <div class='blog-mobile-link'>
        <a expr:href='data:mobileLinkUrl'><data:mobileLinkMsg/></a>
      </div>
    </b:if>

  </div>
  <div class='clear'/>
</b:includable>

<b:includable id='mobile-main' var='top'>
    <!-- posts -->

<b:includable id='post' var='post'>

<b:if cond='data:post.isFirstPost'>

  <div class='post1 hentry'>

    <a expr:name='data:post.id'/>

    <div class='post1-header'>

<div class='post1-header-line'>

    <b:if cond='data:post.title'>
      <h3 class='post1-title entry1-title'>
      <b:if cond='data:post.link'>
        <a expr:href='data:post.link'><data:post.title/></a>
      <b:else/>
        <b:if cond='data:post.url'>
          <b:if cond='data:blog.url != data:post.url'>
            <a expr:href='data:post.url'><data:post.title/></a>
          <b:else/>
            <data:post.title/>
          </b:if>
        <b:else/>
          <data:post.title/>
        </b:if>
      </b:if>
      </h3>

    </b:if>

<div class='comments1'>

<b:if cond='data:blog.pageType != &quot;static_page&quot;'><b:if cond='data:post.allowComments'><center><a class='comment-link' expr:href='data:post.addCommentUrl' expr:onclick='data:post.addCommentOnclick'>

<b:if cond='data:post.numComments == 0'>0</b:if>
<b:if cond='data:post.numComments == 1'>1</b:if>
<b:if cond='data:post.numComments &gt; 1'><data:post.numComments/></b:if></a></center>
            </b:if>
          </b:if>

</div>
</div>

<div class='post1-header-line'>

<div class='date1-header'>
<b:if cond='data:post.isDateStart'>   
        <b:if cond='data:post.dateHeader'>
          <data:post.dateHeader/>

        </b:if>

        </b:if>

</div>
<span style='margin:0 15px 0 15px;  float:left;'>/</span>
<div class='post1-labels'>
        <b:if cond='data:post.labels'>
          <data:postLabelsLabel/>
          <b:loop values='data:post.labels' var='label'>
            <a expr:href='data:label.url' rel='tag'><data:label.name/></a><b:if cond='data:label.isLast != &quot;true&quot;'>,</b:if>
          </b:loop>
        </b:if>
      </div>

    </div>

    </div>

    <div class='post1-body entry-content' expr:id='&quot;post-body-&quot; + data:post.id'>

<div class='post1-header-line'>

<b:if cond='data:blog.pageType != &quot;static_page&quot;'> <iframe allowTransparency='true' expr:src='&quot;http://www.facebook.com/plugins/like.php?href=&quot; + data:post.canonicalUrl + &quot;&amp;send=false&amp;layout=button_count&amp;show_faces=false&amp;width=90&amp;action=like&amp;font=arial&amp;colorscheme=light&amp;height=21&quot;' frameborder='0' scrolling='no' style='border:none; overflow:hidden; width:90px; height:21px;'/> </b:if>

<a class='twitter-share-button' data-count='standard' data-lang='en' data-via='' expr:data-text='data:post.title' expr:data-url='data:post.url' href='http://twitter.com/share' rel='nofollow'>Tweet</a>

    </div>

<script src='http://platform.twitter.com/widgets.js' type='text/javascript'>

</script>

<data:post.body/>

<b:if cond='data:post.hasJumpLink'>
      <div class='jump-link'>
        <a expr:href='data:post.url + &quot;#more&quot;' expr:title='data:post.title'><img src='http://i1252.photobucket.com/albums/hh569/speechnotrecognised/2395f7fb.png'/></a>
      </div>
    </b:if>

<!-- Related Posts with Thumbnails Code Start-->
<!-- remove --><b:if cond='data:blog.pageType == &quot;item&quot;'>
<div id='related-posts'>
<b:loop values='data:post.labels' var='label'>
<b:if cond='data:label.isLast != &quot;true&quot;'>
</b:if>
<script expr:src='&quot;/feeds/posts/default/-/&quot; + data:label.name + &quot;?alt=json-in-script&amp;callback=related_results_labels_thumbs&amp;max-results=6&quot;' type='text/javascript'/></b:loop>
<script type='text/javascript'>
removeRelatedDuplicates_thumbs();
printRelatedLabels_thumbs(&quot;<data:post.url/>&quot;);
</script>
</div><div style='clear:both'/>
<!-- remove --></b:if>
<!-- Related Posts with Thumbnails Code End-->

    </div>

    <div class='post1-footer'>

    <div class='post1-footer-line post1-footer-line-1'>

      </div>

      <div class='post1-footer-line post1-footer-line-2'> </div>

      <div class='post1-footer-line post1-footer-line-3'/>
    </div>
  </div>

<b:else/>

  <div class='post hentry' itemscope='itemscope' itemtype='http://schema.org/BlogPosting'>
    <a expr:name='data:post.id'/>
    <b:if cond='data:post.title'>
      <h3 class='post-title entry-title' itemprop='name'>
      <b:if cond='data:post.link'>
        <a expr:href='data:post.link'><data:post.title/></a>
      <b:else/>
        <b:if cond='data:post.url'>
          <b:if cond='data:blog.url != data:post.url'>
            <a expr:href='data:post.url'><data:post.title/></a>
          <b:else/>
            <data:post.title/>
          </b:if>
        <b:else/>
          <data:post.title/>
        </b:if>
      </b:if>
      </h3>
    </b:if>

    <div class='post-header'>
    <div class='post-header-line-1'/>
    </div>

    <div class='post-body entry-content' expr:id='&quot;post-body-&quot; + data:post.id' itemprop='articleBody'>
      <data:post.body/>
    </div>

    <div class='post-footer'>

      <div class='jump-link'>
        <a expr:href='data:post.url + &quot;#more&quot;' expr:title='data:post.title'><img src='http://i1252.photobucket.com/albums/hh569/speechnotrecognised/2395f7fb.png'/></a>
      </div>

    </div>
  </div>

  </b:if>

</b:includable>
<b:includable id='comment_picker' var='post'>
  <b:if cond='data:post.commentSource == 1'>
    <b:include data='post' name='iframe_comments'/>
  <b:else/>
    <b:if cond='data:post.showThreadedComments'>
      <b:include data='post' name='threaded_comments'/>
    <b:else/>
      <b:include data='post' name='comments'/>
    </b:if>
  </b:if>
</b:includable>
<b:includable id='status-message'>
  <b:if cond='data:navMessage'>
  <div class='status-msg-wrap'>
    <div class='status-msg-body'>
      <data:navMessage/>
    </div>
        <div class='status-msg-hidden'><data:navMessage/></div>
      </div>
  <div style='clear: both;'/>
  </b:if>
</b:includable>
<b:includable id='comment-form' var='post'>
  <div class='comment-form'>
    <a name='comment-form'/>
    <b:if cond='data:mobile'>
      <h4 id='comment-post-message'>
        <a expr:id='data:widget.instanceId + &quot;_comment-editor-toggle-link&quot;' href='javascript:void(0)'><data:postCommentMsg/></a></h4>
      <p><data:blogCommentMessage/></p>
      <data:blogTeamBlogMessage/>
      <a expr:href='data:post.commentFormIframeSrc' id='comment-editor-src'/>
      <iframe allowtransparency='true' class='blogger-iframe-colorize blogger-comment-from-post' frameborder='0' height='410' id='comment-editor' name='comment-editor' src='' style='display: none' width='200px'/>
    <b:else/>
      <h4 id='comment-post-message'/>
      <p><data:blogCommentMessage/></p>
      <data:blogTeamBlogMessage/>
      <a expr:href='data:post.commentFormIframeSrc' id='comment-editor-src'/>
      <iframe allowtransparency='true' class='blogger-iframe-colorize blogger-comment-from-post' frameborder='0' height='410' id='comment-editor' name='comment-editor' src='' width='830px'/>
    </b:if>
    <data:post.friendConnectJs/>
    <data:post.cmtfpIframe/>
    <script type='text/javascript'>
      BLOG_CMT_createIframe(&#39;<data:post.appRpcRelayPath/>&#39;, &#39;<data:post.communityId/>&#39;);
    </script>
  </div>
</b:includable>
<b:includable id='threaded_comments' var='post'>
  <div class='comments' id='comments'>
    <a name='comments'/>

<b:if cond='data:post.numComments == 0'><div class='head'>Then leave the first comment!</div></b:if>

<b:if cond='data:post.numComments == 1'><div class='head'>Then be the second commenter!</div></b:if>

<b:if cond='data:post.numComments == 2'><div class='head'>Then write the third comment!</div></b:if>

<b:if cond='data:post.numComments == 3'><div class='head'>Then leave comment #4!</div></b:if>

<b:if cond='data:post.numComments == 4'><div class='head'>Then be the fifth to comment!</div></b:if>

<b:if cond='data:post.numComments == 5'><div class='head'>Then leave the sixth comment!</div></b:if>

<b:if cond='data:post.numComments == 6'><div class='head'>Then be #7 to comment!</div></b:if>

<b:if cond='data:post.numComments == 7'><div class='head'>Then write the 8th comment!</div></b:if>

<b:if cond='data:post.numComments == 8'><div class='head'>Then leave the ninth comment!</div></b:if>

<b:if cond='data:post.numComments &gt; 8'><div class='head'>Then leave another comment!</div></b:if>

    <div class='comments-content'>
      <b:if cond='data:post.embedCommentForm'>
        <b:include data='post' name='threaded_comment_js'/>
      </b:if>
      <div id='comment-holder'>
         <data:post.commentHtml/>
      </div>
    </div>

    <p class='comment-footer'>
      <b:if cond='data:post.allowNewComments'>
        <b:include data='post' name='threaded-comment-form'/>
      <b:else/>
        <data:post.noNewCommentsText/>
      </b:if>
    </p>

    <b:if cond='data:showCmtPopup'>
      <div id='comment-popup'>
        <iframe allowtransparency='true' frameborder='0' id='comment-actions' name='comment-actions' scrolling='no'>
        </iframe>
      </div>
    </b:if>

    <div id='backlinks-container'>
    <div expr:id='data:widget.instanceId + &quot;_backlinks-container&quot;'>
       <b:if cond='data:post.showBacklinks'>
         <b:include data='post' name='backlinks'/>
       </b:if>
    </div>
    </div>
  </div>
</b:includable>
<b:includable id='backlinkDeleteIcon' var='backlink'>
  <span expr:class='&quot;item-control &quot; + data:backlink.adminClass'>
    <a expr:href='data:backlink.deleteUrl' expr:title='data:top.deleteBacklinkMsg'>
      <img src='//www.blogger.com/img/icon_delete13.gif'/>
    </a>
  </span>
</b:includable>
<b:includable id='mobile-nextprev'>
  <div class='blog-pager' id='blog-pager'>
    <b:if cond='data:newerPageUrl'>
      <div class='mobile-link-button' id='blog-pager-newer-link'>
      <a class='blog-pager-newer-link' expr:href='data:newerPageUrl' expr:id='data:widget.instanceId + &quot;_blog-pager-newer-link&quot;' expr:title='data:newerPageTitle'>&amp;lsaquo;</a>
      </div>
    </b:if>

    <b:if cond='data:olderPageUrl'>
      <div class='mobile-link-button' id='blog-pager-older-link'>
      <a class='blog-pager-older-link' expr:href='data:olderPageUrl' expr:id='data:widget.instanceId + &quot;_blog-pager-older-link&quot;' expr:title='data:olderPageTitle'>&amp;rsaquo;</a>
      </div>
    </b:if>

    <div class='mobile-link-button' id='blog-pager-home-link'>
    <a class='home-link' expr:href='data:blog.homepageUrl'><data:homeMsg/></a>
    </div>

    <div class='mobile-desktop-link'>
      <a class='home-link' expr:href='data:desktopLinkUrl'><data:desktopLinkMsg/></a>
    </div>

  </div>
  <div class='clear'/>
</b:includable>
<b:includable id='mobile-post' var='post'>
  <div class='date-outer'>
    <div class='date-posts'>
      <div class='post-outer'>

        <div class='post hentry uncustomized-post-template' itemscope='itemscope' itemtype='http://schema.org/BlogPosting'>
          <a expr:name='data:post.id'/>
          <b:if cond='data:post.title'>
            <h3 class='post-title entry-title' itemprop='name'>
              <b:if cond='data:post.link'>
                <a expr:href='data:post.link'><data:post.title/></a>
              <b:else/>
                <b:if cond='data:post.url'>
                  <b:if cond='data:blog.url != data:post.url'>
                    <a expr:href='data:post.url'><data:post.title/></a>
                  <b:else/>
                    <data:post.title/>
                  </b:if>
                <b:else/>
                  <data:post.title/>
                </b:if>
              </b:if>
            </h3>
          </b:if>

          <div class='post-header'>
            <div class='post-header-line-1'/>
          </div>

          <div class='post-body entry-content' expr:id='&quot;post-body-&quot; + data:post.id' itemprop='articleBody'>
            <data:post.body/>
          </div>

          <div class='post-footer'>
            <div class='post-footer-line post-footer-line-1'>
              <span class='post-author vcard'>
                <b:if cond='data:top.showAuthor'>
                  <b:if cond='data:post.authorProfileUrl'>
                    <span class='fn'>
                      <a expr:href='data:post.authorProfileUrl' itemprop='author' rel='author' title='author profile'>
                        <data:post.author/>
                      </a>
                    </span>
                  <b:else/>
                    <span class='fn'><data:post.author/></span>
                  </b:if>
                </b:if>
              </span>

              <span class='post-timestamp'>
                <b:if cond='data:top.showTimestamp'>
                  <data:top.timestampLabel/>
                  <b:if cond='data:post.url'>
                    <a class='timestamp-link' expr:href='data:post.url' itemprop='url' rel='bookmark' title='permanent link'><abbr class='published' expr:title='data:post.timestampISO8601' itemprop='datePublished'><data:post.timestamp/></abbr></a>
                  </b:if>
                </b:if>
              </span>

              <span class='post-comment-link'>
                <b:if cond='data:blog.pageType != &quot;item&quot;'>
                  <b:if cond='data:blog.pageType != &quot;static_page&quot;'>
                    <b:if cond='data:post.allowComments'>
                    </b:if>
                  </b:if>
                </b:if>
              </span>
            </div>

            <div class='post-footer-line post-footer-line-2'>
              <b:if cond='data:top.showMobileShare'>
                <div class='mobile-link-button goog-inline-block' id='mobile-share-button'>
                  <a href='javascript:void(0);'><data:shareMsg/></a>
                </div>
              </b:if>
              <b:if cond='data:top.showDummy'>
                <div class='goog-inline-block dummy-container'><data:post.dummyTag/></div>
              </b:if>
            </div>

          </div>
        </div>

        <b:if cond='data:blog.pageType == &quot;static_page&quot;'>
          <b:if cond='data:post.showThreadedComments'>
            <b:include data='post' name='threaded_comments'/>
          <b:else/>
            <b:include data='post' name='comments'/>
          </b:if>
        </b:if>
        <b:if cond='data:blog.pageType == &quot;item&quot;'>
          <b:if cond='data:post.showThreadedComments'>
            <b:include data='post' name='threaded_comments'/>
          <b:else/>
            <b:include data='post' name='comments'/>
          </b:if>
        </b:if>
      </div>
    </div>
  </div>
</b:includable>
<b:includable id='postQuickEdit' var='post'>
  <b:if cond='data:post.editUrl'>
    <span expr:class='&quot;item-control &quot; + data:post.adminClass'>
      <a expr:href='data:post.editUrl' expr:title='data:top.editPostMsg'>
        <img alt='' class='icon-action' height='18' src='http://img2.blogblog.com/img/icon18_edit_allbkg.gif' width='18'/>
      </a>
    </span>
  </b:if>
</b:includable>
<b:includable id='main' var='top'>
  <b:if cond='data:mobile == &quot;false&quot;'>

    <!-- posts -->
    <div class='blog-posts hfeed'>

      <b:include data='top' name='status-message'/>

      <data:defaultAdStart/>
      <b:loop values='data:posts' var='post'>

        <b:if cond='data:post.isDateStart'>
          &lt;div class=&quot;date-posts&quot;&gt;
        </b:if>
        <div class='post-outer'>
        <b:include data='post' name='post'/>
        <b:if cond='data:blog.pageType == &quot;static_page&quot;'>
          <b:if cond='data:post.showThreadedComments'>
            <b:include data='post' name='threaded_comments'/>
          <b:else/>
            <b:include data='post' name='comments'/>
          </b:if>
        </b:if>
        <b:if cond='data:blog.pageType == &quot;item&quot;'>
          <b:if cond='data:post.showThreadedComments'>
            <b:include data='post' name='threaded_comments'/>
          <b:else/>
            <b:include data='post' name='comments'/>
          </b:if>
        </b:if>
        </div>
        <b:if cond='data:post.includeAd'>
          <b:if cond='data:post.isFirstPost'>
            <data:defaultAdEnd/>
          <b:else/>
            <data:adEnd/>
          </b:if>
          <div class='inline-ad'>
            <data:adCode/>
          </div>
          <data:adStart/>
        </b:if>
      </b:loop>
      <b:if cond='data:numPosts != 0'>
        &lt;/div&gt;&lt;/div&gt;
      </b:if>
      <data:adEnd/>
    </div>

    <!-- navigation -->
    <b:include name='nextprev'/>

    <!-- feed links -->
    <b:include name='feedLinks'/>

    <b:if cond='data:top.showStars'>
      <script src='//www.google.com/jsapi' type='text/javascript'/>
      <script type='text/javascript'>
        google.load(&quot;annotations&quot;, &quot;1&quot;, {&quot;locale&quot;: &quot;<data:top.languageCode/>&quot;});
        function initialize() {
          google.annotations.setApplicationId(<data:top.blogspotReviews/>);
          google.annotations.createAll();
          google.annotations.fetch();
        }
        google.setOnLoadCallback(initialize);
      </script>
    </b:if>

  <b:else/>
    <b:include name='mobile-main'/>
  </b:if>

  <b:if cond='data:top.showDummy'>
    <data:top.dummyBootstrap/>
  </b:if>

</b:includable>
<b:includable id='commentDeleteIcon' var='comment'>
  <span expr:class='&quot;item-control &quot; + data:comment.adminClass'>
    <b:if cond='data:showCmtPopup'>
      <div class='goog-toggle-button'>
        <div class='goog-inline-block comment-action-icon'/>
      </div>
    <b:else/>
      <a class='comment-delete' expr:href='data:comment.deleteUrl' expr:title='data:top.deleteCommentMsg'>
        <img src='//www.blogger.com/img/icon_delete13.gif'/>
      </a>
    </b:if>
  </span>
</b:includable>
<b:includable id='feedLinks'>
  <b:if cond='data:blog.pageType != &quot;item&quot;'> <!-- Blog feed links -->
    <b:if cond='data:feedLinks'>
      <div class='blog-feeds'>
        <b:include data='feedLinks' name='feedLinksBody'/>
      </div>
    </b:if>

    <b:else/> <!--Post feed links -->
    <div class='post-feeds'>
      <b:loop values='data:posts' var='post'>
        <b:if cond='data:post.allowComments'>
          <b:if cond='data:post.feedLinks'>
            <b:include data='post.feedLinks' name='feedLinksBody'/>
          </b:if>
        </b:if>
      </b:loop>
    </div>
  </b:if>
</b:includable>
<b:includable id='threaded-comment-form' var='post'>
  <div class='comment-form'>
    <a name='comment-form'/>
    <b:if cond='data:mobile'>
      <p><data:blogCommentMessage/></p>
      <data:blogTeamBlogMessage/>
      <a expr:href='data:post.commentFormIframeSrc' id='comment-editor-src'/>
      <iframe allowtransparency='true' class='blogger-iframe-colorize blogger-comment-from-post' frameborder='0' height='410' id='comment-editor' name='comment-editor' src='' style='display: none' width='200px'/>
    <b:else/>
      <p><data:blogCommentMessage/></p>
      <data:blogTeamBlogMessage/>
      <a expr:href='data:post.commentFormIframeSrc' id='comment-editor-src'/>
      <iframe allowtransparency='true' class='blogger-iframe-colorize blogger-comment-from-post' frameborder='0' height='410' id='comment-editor' name='comment-editor' src='' style='margin:0 0 0 48px' width='675px'/>
    </b:if>
    <data:post.friendConnectJs/>
    <data:post.cmtfpIframe/>
    <script type='text/javascript'>
      BLOG_CMT_createIframe(&#39;<data:post.appRpcRelayPath/>&#39;, &#39;<data:post.communityId/>&#39;);
    </script>
  </div>
</b:includable>
<b:includable id='mobile-index-post' var='post'>
  <div class='mobile-date-outer date-outer'>
    <b:if cond='data:post.dateHeader'>
      <div class='date-header'>
        <span><data:post.dateHeader/></span>
      </div>
    </b:if>

    <div class='mobile-post-outer'>
      <a expr:href='data:post.url'>
        <h3 class='mobile-index-title entry-title' itemprop='name'>
          <data:post.title/>
        </h3>

        <div class='mobile-index-arrow'>&amp;rsaquo;</div>

        <div class='mobile-index-contents'>
          <b:if cond='data:post.thumbnailUrl'>
            <div class='mobile-index-thumbnail'>
              <div class='Image'>
                <img expr:src='data:post.thumbnailUrl'/>
              </div>
            </div>
          </b:if>

          <div class='post-body'>
            <b:if cond='data:post.snippet'><data:post.snippet/></b:if>
          </div>
        </div>

      </a>

      <div class='mobile-index-comment'>
        <b:if cond='data:blog.pageType != &quot;static_page&quot;'>
          <b:if cond='data:post.allowComments'>
            <b:if cond='data:post.numComments != 0'>
              <a class='comment-link' expr:href='data:post.addCommentUrl' expr:onclick='data:post.addCommentOnclick'>
                <data:post.commentLabelFull/>:
              </a>
            </b:if>
          </b:if>
        </b:if>
      </div>
    </div>
  </div>
</b:includable>
<b:includable id='iframe_comments' var='post'>

  <b:if cond='data:post.allowComments'>
    <script expr:src='data:post.commentSrc' type='text/javascript'/>
    <div class='cmt_iframe_holder'/>

    <b:if cond='data:post.embedCommentForm == &quot;false&quot;'>
      <a expr:href='data:post.addCommentUrl' expr:onclick='data:post.addCommentOnclick'><data:postCommentMsg/></a>
    </b:if>
  </b:if>
</b:includable>
<b:includable id='feedLinksBody' var='links'>
  <div class='feed-links'>
  <data:feedLinksMsg/>
  <b:loop values='data:links' var='f'>
     <a class='feed-link' expr:href='data:f.url' expr:type='data:f.mimeType' target='_blank'><data:f.name/> (<data:f.feedType/>)</a>
  </b:loop>
  </div>
</b:includable>
<b:includable id='comments' var='post'>
  <div class='comments' id='comments'>
    <a name='comments'/>
    <b:if cond='data:post.allowComments'>

<b:if cond='data:post.numComments == 0'><div class='head'>Then leave the first comment!</div></b:if>

<b:if cond='data:post.numComments == 1'><div class='head'>Then be the second commenter!</div></b:if>

<b:if cond='data:post.numComments == 2'><div class='head'>Then write the third comment!</div></b:if>

<b:if cond='data:post.numComments == 3'><div class='head'>Then leave comment #4!</div></b:if>

<b:if cond='data:post.numComments == 4'><div class='head'>Then be the fifth to comment!</div></b:if>

<b:if cond='data:post.numComments == 5'><div class='head'>Then leave the sixth comment!</div></b:if>

<b:if cond='data:post.numComments == 6'><div class='head'>Then be #7 to comment!</div></b:if>

<b:if cond='data:post.numComments == 7'><div class='head'>Then write the 8th comment!</div></b:if>

<b:if cond='data:post.numComments == 8'><div class='head'>Then leave the ninth comment!</div></b:if>

<b:if cond='data:post.numComments &gt; 8'><div class='head'>Then leave another comment!</div></b:if>

      <div expr:id='data:widget.instanceId + &quot;_comments-block-wrapper&quot;'>
        <dl expr:class='data:post.avatarIndentClass' id='comments-block'>

          <b:loop values='data:post.comments' var='comment'>
            <dt expr:class='&quot;comment-author &quot; + data:comment.authorClass' expr:id='data:comment.anchorName'>
              <b:if cond='data:comment.favicon'>
                <img expr:src='data:comment.favicon' height='16px' style='margin-bottom:-2px;' width='16px'/>
              </b:if>
              <a expr:name='data:comment.anchorName'/>
              <b:if cond='data:blog.enabledCommentProfileImages'>
                <data:comment.authorAvatarImage/>
              </b:if>
              <b:if cond='data:comment.authorUrl'>
                <a expr:href='data:comment.authorUrl' rel='nofollow'><data:comment.author/></a>
              <b:else/>
                <data:comment.author/>
              </b:if>
              just had to say...
            </dt>
            <dd class='comment-body' expr:id='data:widget.instanceId + data:comment.cmtBodyIdPostfix'>
              <b:if cond='data:comment.isDeleted'>
                <span class='deleted-comment'><data:comment.body/></span>
              <b:else/>
                <p>
<span class='comment-timestamp'>
                <a expr:href='data:comment.url' title='comment permalink'>
                  <data:comment.timestamp/>
                </a>
                <b:include data='comment' name='commentDeleteIcon'/>
              </span>

                  <data:comment.body/>
                </p>
              </b:if>
            </dd>
            <dd class='comment-footer'>

            </dd>
          </b:loop>
        </dl>
      </div>

      <b:if cond='data:post.commentPagingRequired'>
        <span class='paging-control-container'>
          <a expr:class='data:post.oldLinkClass' expr:href='data:post.oldestLinkUrl'>
            <data:post.oldestLinkText/>
          </a>
          <a expr:class='data:post.oldLinkClass' expr:href='data:post.olderLinkUrl'>
            <data:post.olderLinkText/>
          </a>
          <data:post.commentRangeText/>
          <a expr:class='data:post.newLinkClass' expr:href='data:post.newerLinkUrl'>
            <data:post.newerLinkText/>
          </a>
          <a expr:class='data:post.newLinkClass' expr:href='data:post.newestLinkUrl'>
            <data:post.newestLinkText/>
          </a>
        </span>
      </b:if>

      <p class='comment-footer'>
        <b:if cond='data:post.embedCommentForm'>
          <b:if cond='data:post.allowNewComments'>
            <b:include data='post' name='comment-form'/>
          <b:else/>
            <data:post.noNewCommentsText/>
          </b:if>
        <b:else/>
          <b:if cond='data:post.allowComments'>
            <a expr:href='data:post.addCommentUrl' expr:onclick='data:post.addCommentOnclick'><data:postCommentMsg/></a>
          </b:if>
        </b:if>

      </p>
    </b:if>
    <b:if cond='data:showCmtPopup'>
      <div id='comment-popup'>
        <iframe allowtransparency='true' frameborder='0' id='comment-actions' name='comment-actions' scrolling='no'>
        </iframe>
      </div>
    </b:if>

    <div id='backlinks-container'>
    <div expr:id='data:widget.instanceId + &quot;_backlinks-container&quot;'>
       <b:if cond='data:post.showBacklinks'>
         <b:include data='post' name='backlinks'/>
       </b:if>
    </div>
    </div>
  </div>
</b:includable>
</b:widget>
</b:section>
      </div> 

      <!-- spacer for skins that want sidebar and main to be the same height-->
      <div class='clear'>&#160;</div>

    </div> <!-- end content-wrapper -->

 <!-- end outer-wrapper --> 

    </div>

<div id='footer-wrapper'>

      <b:section class='footer' id='footer'>
<b:widget id='HTML3' locked='false' title='' type='HTML'>
<b:includable id='main'>
  <!-- only display title if it's non-empty -->
  <b:if cond='data:title != &quot;&quot;'>
    <h2 class='title'><data:title/></h2>
  </b:if>
  <div class='widget-content'>
    <data:content/>
  </div>

  <b:include name='quickedit'/>
</b:includable>
</b:widget>
</b:section>

</div>

  <b:include data='blog' name='google-analytics'/>

</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T05:25:05.633

检查此代码结构。特别是页脚 div。

```
<div id="content-wrapper">
  <div id="crosscol-wrapper" style="text-align:center">//your code</div>
  <div id="sidebar-wrapper">//your code</div>
  <div id="main-wrapper">//your code</div>
  <div id="footer-wrapper">//your code</div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T05:10:38.277

您好，现在替换您的页脚

```
<div id="main-wrapper"></div>
than this
<div id="footer-wrapper"></div> 
```

像这样

你的代码是这样的

```
<div id="main-wrapper">
<div id="main" class="main section">
<div id="footer-wrapper">  // remove this code here 
<script src="http://code.jquery.com/jquery-latest.js">
<script>
<script type="text/javascript">
<script src="//www.blogger.com/static/v1/widgets/3809499334-widgets.js" type="text/javascript">
<script type="text/javascript">
</div>
------------------------------------------------------------------------
<div id="footer-wrapper">  // add here footer code in your html 
```

现在

![在此处输入图像描述](../Images/867e689e1cc2f0a0d0a53bdcf53eb0cd.png)

# entity-framework - 实体框架 5 和字符枚举

> ID：12257104
> 
> 赞同：4
> 
> 时间：2012-09-04T05:06:23.283
> 
> 标签：entity-framework, enums, char, entity-framework-5

实体框架 5 可以处理字符枚举吗？我让它使用 int，但使用 char 我在数据库中的列是 char(1) 的地方得到错误。

```
The 'Gender' property on 'Division' could not be set to a 'String' value. You must set this property to a non-null value of type 'Gender'.

public enum Gender
{
    Male = 'M',
    Female = 'F'
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T18:10:09.720

您的枚举类型不是 char 类型，而是 int 类型。以下行将向您展示：

```
Console.WriteLine(typeof(Gender).GetEnumUnderlyingType());

System.Int32
Press any key to continue . . . 
```

您的枚举成员的值实际上分别是 77 和 70：

```
Console.WriteLine((int)Gender.Male);
Console.WriteLine((int)Gender.Female);

77
70
Press any key to continue . . . 
```

C#/VB.NET 中唯一有效的基础枚举类型是 byte、sbyte、short、ushort、int、uint、long 和 ulong。如果您尝试放置不在此列表中的基础类型，如下所示：

```
public enum Gender : char
{ 
    Male = 'M', 
    Female = 'F' 
} 
```

您将看到以下编译错误：

```
error CS1008: Type byte, sbyte, short, ushort, int, uint, long, or ulong expected 
```

这是 C# 中枚举背后的理论。现在 EF 部分 - EF 目前仅支持以下枚举类型：Edm.Byte、Edm.SByte、Edm.Int16、Edm.Int32 和 Edm.Int64（Edm 类型系统没有无符号类型）。对于枚举属性，数据库中的相应列必须与属性的枚举类型的基础类型匹配（即，如果您的枚举属性的基础类型是 Edm.Int32，那么该列应该是 int 类型）。

在您的情况下-如果您真的想使用枚举类型，则数据库中的列应该是 int 类型。添加实体时，您应该会在列中看到值 70 和 77。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-29T12:23:31.360

这是我第一次使用 EF，我从 EF5 开始。所以当我试图解决这个问题时，我最终来到了这里。其他地方有非常令人困惑的答案，但对我来说最明显的答案是下面的答案。

我确实希望这是准确的，但似乎对我来说效果很好。

我从 Postgres 导入了我的数据库

在您的上下文中，您可以在一个空间中定义列，它们需要映射到与变量名称或类似名称不同的名称。

您可以在此空间中进行转换。请参阅下面的博客以获得更好的解释。

[https://blog.bitscry.com/2019/07/29/converting-a-char-character-to-an-enum-in-entity-framework/](https://blog.bitscry.com/2019/07/29/converting-a-char-character-to-an-enum-in-entity-framework/)

我的比它需要的要复杂一些。

这是我的枚举表

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Threading.Tasks;

namespace DevDBStub.Models.DB
{
    public class PreparationScreen
    {
        public enum CompleteMethods
        {
            Button = 'B',
            Timer  = 'T'
        }

        public int Id { get; set; }
        public string Descr { get; set; }
        public int NumberOfColumns { get; set; }
        public CompleteMethods CompleteMethod { get; set; }
        public int TimerSeconds { get; set; }
        public string DoneBy { get; set; }
        public DateTime TmStamp { get; set; }
    }
} 
```

现在对于我的上下文

```
using System;
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Metadata;

#nullable disable

namespace DevDBStub.Models.DB
{
    public partial class ReactContext : DbContext
    {
        public ReactContext()
        {
        }

        public ReactContext(DbContextOptions<ReactContext> options)
            : base(options)
        {
        }

        public virtual DbSet<PreparationProfile> PreparationProfiles { get; set; }

        protected override void OnModelCreating(ModelBuilder modelBuilder)
        {
            modelBuilder.HasAnnotation("Relational:Collation", "en_ZA.UTF-8");

            modelBuilder.Entity<PreparationScreen>(entity =>
            {
                entity.ToTable("preparationscreen");

                entity.Property(e => e.Id).HasColumnName("id");

                entity.Property(e => e.CompleteMethod)
                    .HasConversion<char>(p => (char)p, p => (PreparationScreen.CompleteMethods)p)
                    .HasColumnName("completemethod");

                entity.Property(e => e.Descr)
                    .IsRequired()
                    .HasMaxLength(50)
                    .HasColumnName("descr");

                entity.Property(e => e.DoneBy)
                    .IsRequired()
                    .HasMaxLength(16)
                    .HasColumnName("doneby");

                entity.Property(e => e.NumberOfColumns).HasColumnName("numberofcolumns");

                entity.Property(e => e.TimerSeconds).HasColumnName("timerseconds");

                entity.Property(e => e.TmStamp).HasColumnName("tmstamp");
            });
        }

        partial void OnModelCreatingPartial(ModelBuilder modelBuilder);
    }
} 
```

# java - 如何打开具有特定光标偏移位置的新 Eclipse 编辑器

> ID：12257105
> 
> 赞同：8
> 
> 时间：2012-09-04T05:06:36.203
> 
> 标签：java, eclipse-plugin, editor

我想以编程方式执行上述操作。

我查看了[How to get cursor position in an eclipse TextEditor](https://stackoverflow.com/questions/6827797/how-to-get-cursor-position-in-an-eclipse-texteditor)和[Eclipse-plugin how to get current text editor corsor position](https://stackoverflow.com/questions/1619623/eclipse-plugin-how-to-get-current-text-editor-corsor-position)所以我知道如何从**当前**打开的编辑器中获取光标偏移量。但是，我正在尝试在我以编程方式打开的新编辑器中设置光标偏移量。

我目前打开新编辑器的方式如下：

```
IWorkbenchWindow win = PlatformUI.getWorkbench().getActiveWorkbenchWindow();
    IWorkbenchPage page = win.getActivePage();
    if (page != null) {
        IEditorPart editor = page.getActiveEditor();
        if (editor != null) {
            IEditorInput input = editor.getEditorInput();
            if (input instanceof IFileEditorInput) {
                String fileLocation = ((IFileEditorInput) input).getFile().getLocation().toOSString();
                String newFileLocartion = generateNewFileLocation(fileLocation);
                File file = new File(newFileLocartion);
                IFileStore fileStore = EFS.getLocalFileSystem().getStore(file.toURI());
                try {
                    IDE.openEditorOnFileStore(page, fileStore);
                } catch (PartInitException e) {
                    // TODO error handling
                }
            }
        }
    } 
```

有没有办法打开将新编辑器设置为以特定偏移量打开（假设我已经提前知道偏移量）？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-02-22T20:38:31.733

我使用了以下，这比以前的答案更简单。假设你有`int offset`, `IWorkbenchPage page`and `IFile file`（而且它们似乎都存在于 OP 的问题中）：

```
ITextEditor editor = (ITextEditor) IDE.openEditor(page, file);
editor.selectAndReveal(offset, 0); 
```

[我从这个答案中](https://stackoverflow.com/questions/8775630/eclipse-plugin-how-to-programmatically-select-text-in-editor/8776449#8776449)找到了如何做到这一点。（但通过将*selectAndReveal*的第二个参数设置为零，不会突出显示任何文本）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T06:38:00.720

它使用此代码段导航到文件中的指定行。

```
public static void navigateToLine(IFile file, Integer line)
{
    HashMap<String, Object> map = new HashMap<String, Object>();
    map.put(IMarker.LINE_NUMBER, line);
    IMarker marker = null;
    try {
        marker = file.createMarker(IMarker.TEXT);
        marker.setAttributes(map);
        try {
            IDE.openEditor(getActivePage(), marker);
        } catch ( PartInitException e ) {
            //complain
        }
    } catch ( CoreException e1 ) {
        //complain
    } finally {
        try {
            if (marker != null)
                marker.delete();
        } catch ( CoreException e ) {
            //whatever
        }
    }
} 
```

可能不完全是您需要的，但可能很有用。（//抱怨替换了特定于使用它的产品的错误处理代码）

# javascript - 如何从谷歌浏览器启用本地文件系统读写访问？

> ID：12257109
> 
> 赞同：3
> 
> 时间：2012-09-04T05:07:06.713
> 
> 标签：javascript, html, google-chrome

我需要使用 HTML/Javascript 代码从 Google-Chrome 启用本地文件系统读/写访问。我正在使用存储在本地系统中的一组 html 页面（即 file://c:/project1/page.html ...）。

我目前的观察是，我们可以使用 FileReader javascript 类进行本地文件读取操作，而无需在浏览器中进行任何额外的配置或设置。但是，当我尝试使用一些 JS 代码写入本地文件时，它会通过向用户显示每次写入操作的警告框来不断请求许可。

所以我的问题是，**有什么方法可以禁用这种从 google-chrome 进行文件写入操作的提示？** 我已经看到 chrome 将浏览器配置存储在**master_preferences**文件和位于 chrome 安装文件夹内的**Preferences**文件中，但找不到同样的条目/记录。

感谢和问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T05:12:06.103

我喜欢为此目的使用[JQuery.twFile 。](http://jquery.tiddlywiki.org/twFile.html)这对于从本地 flesystem 读取和写入它都非常有用。

它不会在读取或写入文件时向您显示任何错误或提示。

它可能会在 Chrome 中显示一些其他类型的提示。（Java相关提示）

在使用它时，为了防止出现 Java 相关提示，我以这种方式启动 Chrome：

C:\Users\WHATEVER\AppData\Local\Google\Chrome\Application\chrome.exe --allow-outdated-plugins --allow-file-access-from-files

此外，请务必执行以下操作：

转到 URL：chrome://plugins/ 然后，在 Java 下，确保选中“始终允许”复选框

# visual-studio - 您可以强制 Visual Studio 在 Windows 8 中始终以管理员身份运行吗？

> ID：12257110
> 
> 赞同：1057
> 
> 时间：2012-09-04T05:07:37.353
> 
> 标签：visual-studio, windows-8, uac

在 Windows 7 中，您可以进入程序兼容性设置并勾选始终以管理员身份运行。Windows 8 中是否有类似的选项？

我一直在我的机器上禁用 UAC，并且在我的 Windows 8 升级后也这样做了，或者我是这么认为的。事实证明，没有`off`选择，只能关闭通知。

这意味着尽管在管理员组中，但没有任何内容以管理员身份运行。当我尝试调试（附加到进程，而不是`F5`）时，我需要继续关闭并重新打开我的控制台\Visual Studio，这非常令人沮丧。

我需要记住采取额外步骤以管理员身份打开它，或者在我第一次去调试时告诉它关闭并重新打开，这真的很烦人。

* * *

## 回答 #1

> 赞同：2085
> 
> 时间：2012-10-12T12:42:04.550

在 Windows 8 和 10 中，您必须右键单击`devenv.exe`并选择“疑难解答兼容性”。

1.  选择“故障排除程序”
2.  勾选“程序需要额外权限”
3.  点击下一步”
4.  单击“测试程序...”
5.  等待程序启动
6.  点击下一步”
7.  选择“是，保存此程序的这些设置”
8.  点击“关闭”

如果，当您打开 Visual Studio 时，它要求保存对 devenv.sln 的更改，请参阅此答案以禁用它：

[禁用 Visual Studio devenv 解决方案保存对话框](https://stackoverflow.com/questions/13595999/disable-visual-studio-devenv-solution-save-dialog)

* * *

如果您改变主意并希望撤消“以管理员身份运行”兼容性设置，请在此处查看答案：[How to Fix Unrecognized Guid format in Visual Studio 2015](https://stackoverflow.com/a/41602199/741136)

* * *

## 回答 #2

> 赞同：176
> 
> 时间：2012-09-04T05:39:01.960

在查看超级用户后，我发现[了这个问题](https://superuser.com/questions/462912)，它解释了如何使用开始屏幕上的快捷方式执行此操作。同样，当 Visual Studio 固定到任务栏时，您也可以这样做。在任一位置：

1.  右键单击 Visual Studio 图标
2.  去`Properties`
3.  在`Shortcut tab`选择下`Advanced`
4.  查看`Run as administrator`

[![在管理员模式下设置默认操作](../Images/b4e65e1196c306922b501715779b8fef.png)](https://i.stack.imgur.com/PwMjI.png)

与 Windows 7 不同，这仅在您从更改的快捷方式启动应用程序时才有效。更新两个 Visual Studio 快捷方式后，当您从资源管理器打开解决方案文件时，它似乎也可以工作。

**更新警告：** 看起来以提升的权限运行 Visual Studio 的主要缺陷之一是因为资源管理器没有与它们一起运行，您无法将文件拖放到 Visual Studio 中进行编辑。您需要通过文件打开对话框打开它们。你也不能双击任何与 Visual Studio 关联的文件并在 Visual Studio 中打开它（除了看起来的解决方案），因为你会收到一条错误消息，说`There was a problem sending the command to the program.`一旦我取消选中总是以提升的权限开始（使用 VSCommands）然后我' m 能够直接打开文件并将它们放入 Visual Studio 的打开实例中。

**The Daring 更新：** 尽管没有像过去那样关闭 UAC 的 UI，但至少我看到了，你仍然可以通过注册表来关闭 UAC。编辑的关键是：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\System
EnableLUA - DWORD 1-Enabled, 0-Disabled 
```

更改此 Windows 后会提示您重新启动。重新启动后，如果您是管理员，您将回到以管理员权限运行的所有内容。我上面报告的问题现在也消失了。

* * *

## 回答 #3

> 赞同：61
> 
> 时间：2012-09-04T07:35:06.423

**注意**在最近的 VS 版本（2015+）中，此扩展似乎不再存在/具有此功能。

* * *

您还可以下载Squared Infinity[的 VS2012 的 VSCommands](http://visualstudiogallery.msdn.microsoft.com/a83505c6-77b3-44a6-b53b-73d77cba84c8)，它具有将其更改为以管理员身份运行的功能（以及其他一些很酷的点点滴滴）

![在此处输入图像描述](../Images/4ef7d6b36732fa178e067b87dbc51fa3.png)

**更新**

`Tools`可以使用->`Extensions and Updates`选择`Online`和搜索从 Visual Studio 菜单栏中安装命令`vscommands`，然后`VSCommands for Visual Studio 20XX`根据是使用 2012 还是 2013（或更高版本）进行选择，然后下载并安装。

* * *

## 回答 #4

> 赞同：36
> 
> 时间：2012-10-30T01:00:45.990

1.  在 Windows 8 开始菜单上选择所有应用程序
2.  右键单击 Visual Studio 2010 图标
3.  选择打开文件位置
4.  右键单击 Visual Studio 2010 快捷方式图标
5.  单击高级按钮
6.  选中以管理员身份运行复选框
7.  点击确定

* * *

## 回答 #5

> 赞同：24
> 
> 时间：2012-11-30T17:25:39.630

这是[我对 SuperUser 上类似帖子的回答](https://superuser.com/questions/462912/always-start-visual-studio-as-an-administrator-on-windows-8/512928#512928)的副本：

## 选项 1 - 将 VSLauncher.exe 和 DevEnv.exe 设置为始终以管理员身份运行

要让 Visual Studio**在打开任何 .sln 文件时**始终以管理员身份运行：

1.  导航到`C:\Program Files (x86)\Common Files\Microsoft Shared\MSEnv\VSLauncher.exe`。
2.  右键单击`VSLauncher.exe`并选择**疑难解答兼容性**。
3.  选择**疑难解答程序**。
4.  勾选**该程序需要额外的权限**，然后点击下一步。
5.  单击“**测试程序...”**按钮以启动 VS。
6.  单击下一步，然后单击**是，保存此程序**的这些设置，然后单击**关闭**按钮。

**要让 Visual Studio在直接打开 Visual Studio 时**始终以管理员身份运行，请对 DevEnv.exe 文件执行相同的操作。这些文件位于：

### 视觉工作室 2010

`C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\devenv.exe`

### 视觉工作室 2012

`C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\devenv.exe`

### 视觉工作室 2013

`C:\Program Files (x86)\Microsoft Visual Studio 12.0\Common7\IDE\devenv.exe`

### 视觉工作室 2015

`C:\Program Files (x86)\Microsoft Visual Studio 14.0\Common7\IDE\devenv.exe`

### 视觉工作室 2017

`C:\Program Files (x86)\Microsoft Visual Studio\2017\[VS SKU]\Common7\IDE\devenv.exe`

## 选项 2 - 为 Visual Studio 使用 VSCommands 扩展

为 Visual Studio安装免费的[VSCommands 扩展](https://superuser.com/questions/462912/always-start-visual-studio-as-an-administrator-on-windows-8/512928#512928)（它位于[Visual Studio Extensions Gallery](http://visualstudiogallery.msdn.microsoft.com/site/search?query=VSCommands&f%5B0%5D.Value=VSCommands&f%5B0%5D.Type=SearchText&ac=4)中），然后通过转到 Tools -> VSCommands -> Options -> IDE Enhancements -> General 并将其配置为始终以管理员权限启动 Visual Studio 并勾选`Always start Visual Studio with elevated permissions`并单击保存按钮。

**注意：** VSCommands 目前不适用于 VS 2015，但他们的网站表示他们正在努力更新它以支持 VS 2015。

## 我的意见

我更喜欢选项 2，因为：

*   它还允许您轻松关闭此功能。
*   VSCommands 带有许多其他很棒的功能，所以无论如何我总是安装它。
*   它比选项1更容易做到。

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2012-10-11T21:06:14.027

当我在 Visual Studio 2012 旁边安装 Visual Studio 2010 时，VSCommands 对我不起作用并导致了问题。

经过一些实验，我发现了诀窍：

转到`HKEY_CURRENT_USER\Software\Microsoft\Windows NT\CurrentVersion\AppCompatFlags\Layers`并添加一个带有名称`"C:\Program Files (x86)\Common Files\Microsoft Shared\MSEnv\VSLauncher.exe"`和值的条目`"RUNASADMIN"`。

这应该可以解决您的问题。我也[写过博客](http://daniellang.net/always-run-visual-studio-as-administrator-in-windows-8/)。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2014-12-22T19:15:29.307

我知道这有点晚了，但我只是想出了如何通过修改（读取，“黑客”）devenv.exe 文件的清单来做到这一点。我应该先来这里，因为所述解决方案似乎更容易一些，并且可能更受 Microsoft 的支持。:)

我是这样做的：

1.  在 VS 中创建一个名为“Exe Manifests”的项目。（我认为任何版本都可以，但我使用的是 2013 Pro。另外，你给它起什么名字并不重要。）
2.  “添加现有项目”到项目中，浏览到 Visual Studio exe，然后单击“确定”。就我而言，它是“C:\Program Files (x86)\Microsoft Visual Studio 12.0\Common7\IDE\devenv.exe”。
3.  双击现在应该在项目中作为文件列出的“devenv.exe”文件。它应该在资源编辑器中调出 exe。
4.  展开“RT_MANIFEST”节点，然后双击该节点下的“1”。这将在二进制编辑器中打开可执行文件的清单。
5.  找到requestedExecutionLevel 标记并将“asInvoker”替换为“requireAdministrator”。啦啦： `<requestedExecutionLevel level="requireAdministrator" uiAccess="false"></requestedExecutionLevel>`
6.  保存文件。

您刚刚保存了添加到项目中的可执行文件的副本。现在您需要备份原始文件并将*修改后*的exe 复制到您的安装目录。

正如我所说，这可能不是*正确*的方法，但它似乎有效。如果有人知道需要发生任何负面影响或必要的手腕拍打，请插话！

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2013-05-09T10:59:15.747

如果您像我一样使用**Total Commander ，您应该为 Total Commander 始终以管理员身份运行。**然后，您将能够在同一个 SQL Server 管理实例中双击打开 sql 文件，或者双击打开任何 Visual Studio 文件而不打开多个实例。

此疑难解答程序将注册表值添加到任何程序的 HKEY_CURRENT_USER\Software\Microsoft\Windows NT\CurrentVersion\AppCompatFlags\Layers，因此，如果您想直接编写它，您可以。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2016-05-25T07:38:42.620

我在EightForums（[选项8](http://www.eightforums.com/tutorials/9564-run-administrator-windows-8-a.html)）上找到了一种简单的方法，在HKEY_CURRENT_USER\Software\Microsoft\Windows NT\CurrentVersion\AppCompatFlags\Layers 下创建一个字符串值。将名称设置为程序的路径，并将值设置为 ~RUNASDMIN。下次打开程序时，它将以管理员身份打开

```
[HKEY_CURRENT_USER\Software\Microsoft\Windows NT\CurrentVersion\AppCompatFlags\Layers]
    "C:\\Program Files (x86)\\Microsoft Visual Studio 12.0\\Common7\\IDE\\devenv.exe"="~RUNASADMIN" 
```

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2016-07-08T21:47:50.910

此外，您可以检查**[兼容性故障排除](https://spgeeks.devoworx.com/this-task-requires-the-application-to-have-elevated-permissions/)**

*   右键单击 Visual Studio > 选择疑难解答兼容性。
*   选择故障排除程序。
*   检查程序需要额外的权限。
*   单击测试程序。
*   稍等片刻，直到程序启动。点击下一步。
*   选择是，保存此程序的这些设置。
*   等待解决问题。
*   确保最终状态是固定的。单击关闭。

> 检查详细步骤，以及在 Visual Studio 中始终以管理员身份打开 VS 的其他方法**[要求应用程序具有提升的权限](https://spgeeks.devoworx.com/this-task-requires-the-application-to-have-elevated-permissions/)。**

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2013-06-25T16:59:41.040

只需在 Program Files 目录（或其他位置）中找到该程序。右键单击EXE文件，在底部的第二个选项卡上选中强制以管理权限运行该程序的复选框。从现在开始，exe 文件的所有快捷方式都将以管理权限触发:)

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2016-06-17T11:27:01.450

如果项目的应用程序清单指定了管理，Visual Studio 会自动提升自身`requestedExecutionLevel`，因此您只需对其进行编辑。Visual Studio 将检测到这一点，并在需要时以管理员身份重新启动。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2021-06-27T22:46:45.627

这些都不适合我。我以管理员身份始终启动它的方式是修改注册表。

```
1\. Just start regedit.exe.
2\. Navigate to Computer\HKEY_CURRENT_USER\Software\Microsoft\Windows NT\CurrentVersion\AppCompatFlags\Layers
3\. Right Click New->String Value
4\. Add C:\Program Files (x86)\Microsoft Visual Studio\2019\Enterprise\Common7\IDE\devenv.exe (or the correct path for your system)
5\. Right Click on this entry and select Modify.
6\. Add for Value Data: ~ RUNASADMIN. 
```

全部做完。

# asp.net - 解析 XML linq 命名空间问题

> ID：12257111
> 
> 赞同：1
> 
> 时间：2012-09-04T05:07:38.537
> 
> 标签：asp.net, xml, linq, linq-to-xml

跟随我正在使用 Linq to XML 解析的 XML。使用下面的代码但一无所获。

```
<?xml version="1.0" encoding="utf-8"?> 
    <!--ADOR Acknowledgement 2-->  
    <AckTransmission xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.irs.gov/efile"> 
      <TransmissionHeader recordCount="1"> 
        <Jurisdiction>ALABAMA</Jurisdiction> 
        <TransmissionId>1946157056</TransmissionId> 
        <Timestamp>2012-08-16T01:25:47-05:00</Timestamp> 
        <Transmitter> 
          <ETIN>00000</ETIN> 
        </Transmitter> 
        <ProcessType>T</ProcessType> 
        <AgentIdentifier>ACK</AgentIdentifier> 
      </TransmissionHeader> 
      <Acknowledgement> 
        <SubmissionId>X1684956672</SubmissionId> 
        <EFIN>X16849</EFIN> 
        <GovernmentCode>ALST</GovernmentCode> 
        <SubmissionType>XMLTOM</SubmissionType> 
        <TaxYear>9999</TaxYear> 
        <SubmissionCategory>MFET</SubmissionCategory> 
        <AcceptanceStatus>A</AcceptanceStatus> 
        <ContainedAlerts>0</ContainedAlerts> 
        <StatusDate>2012-08-16</StatusDate> 
      </Acknowledgement> 
    </AckTransmission> 
```

我正在尝试使用 Linq 来解析这个 XML

使用

```
var 

q1 = from c1 in TheDocument1.Descendants("{http://www.irs.gov/efile}AckTransmission")
                         select new
                         {
                             Jurisdiction = c1.Element("{http://www.irs.gov/efile}Jurisdiction").Value,
                             TransmissionId = c1.Element("{http://www.irs.gov/efile}TransmissionId").Value,
                             ETIN = c1.Element("{http://www.irs.gov/efile}Transmitter").Element("{http://www.irs.gov/efile}ETIN").Value,
                             lTimestamp = c1.Element("{http://www.irs.gov/efile}Timestamp").Value,
                             ProcessType = c1.Element("{http://www.irs.gov/efile}ProcessType").Value,
                             AgentIdentifie = c1.Element("{http://www.irs.gov/efile}AgentIdentifier").Value,

                             GovernmentCode = c1.Element("{http://www.irs.gov/efile}GovernmentCode").Value,
                             SubmissionType = c1.Element("{http://www.irs.gov/efile}SubmissionType").Value,
                             TaxYear = c1.Element("{http://www.irs.gov/efile}TaxYear").Value,
                             StatusDate = c1.Element("{http://www.irs.gov/efile}StatusDate").Value
                         }; 
```

但是一无所获，我尝试了很多东西，却输了。请帮我。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T05:11:27.390

创建命名空间对象并将其与元素/节点一起使用。

```
 XNamespace ns = "http://www.irs.gov/efile";
 XDocument doc=XDocument.Load(file);

 var result = doc.Descendants(ns + "AckTransmission").Select(p => new
 {
  Jurisdiction = (string)p.Element(ns + "TransmissionHeader").Element(ns + "Jurisdiction"),
  TransmissionId = (string)p.Element(ns + "TransmissionHeader").Element(ns + "TransmissionId")
 }); 
```

# javascript - Google 文档电子表格

> ID：12257114
> 
> 赞同：-2
> 
> 时间：2012-09-04T05:07:48.010
> 
> 标签：javascript, google-docs

单击按钮时，我想在电子表格中插入一个新行，并将所有公式从上面的行复制到添加的行。

前任：

```
Column A                Column B

2                           2+1
3                           3+1 
```

在第 2 行和第 3 行之间插入一行时，应自动复制 B 列中的公式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T05:15:10.860

这是我的应用程序的一个片段。在这种情况下，第 7 行的 copyTo 正在复制一个单元格，但您可以修改范围，或复制该行以复制任意数量的单元格

```
var ss=SpreadsheetApp.getActiveSpreadsheet(); 
  var sss=ss.getActiveSheet();
  ss.insertRowAfter(1);  // insert a blank row, 
  rowIndex++; // to adjust for the new blank row
  // set up the new blank row
  // ... nominal code with validation
  sss.getRange(rowIndex, colIndex).copyTo(sss.getRange(rowIndex-1, colIndex)); 
```

# mysql - MySQL保存textarea的价值

> ID：12257115
> 
> 赞同：0
> 
> 时间：2012-09-04T05:07:49.430
> 
> 标签：mysql, string, function

我有一个填充了值的文本区域。在提交按钮上，我使用以下代码将 textarea 的值保存在单独的行中：

```
echo "<center><textarea name='resulta' id='result' style='height:200px; width:350px' readonly=readonly></textarea></center>";
echo "<form><center><input type=submit name=subs value='Submit'></center></form>";
$val=$_POST['resulta'];

    if (isset($_POST['subs']))
    {

        $lines = explode("\n", $val);

    foreach ($lines as $line) 
    {
        mysql_query("insert into postflight (sample_lang) values ('$line')") or die(mysql_error());

    } 
```

如果我在 textarea 中输入了以下内容：

```
Tokyo - London -> 10:00:00
London - Tokyo -> 11:00:00 
```

postflight 表会分别有这些数据，

```
sfno  || bltime   || sample_lang
00001 || 00:00:00 || Tokyo - London -> 10:00:00
00002 || 00:00:00 || London - Tokyo -> 11:00:00 
```

但是，我想要做的是，添加到 sample_lang 列“东京 - 伦敦”，然后添加到 bltime 列“10:00:00”。postflight 中的数据应如下所示：

```
sfno  || bltime   || sample_lang
00001 || 10:00:00 || Tokyo - London
00002 || 11:00:00 || London - Tokyo 
```

我已经尝试了几个 MySQL 字符串函数，如爆炸、定位、修剪，但无法使其正常工作。我对 MySQL 字符串函数不太熟悉，所以我很难让它工作。任何关于如何做到这一点的想法将不胜感激。非常感谢！

编辑：我并没有将可能的解决方案仅限于 MySQL 字符串函数。当然，我也对 PHP 解决方案持开放态度。我只是说明了到目前为止我为完成这项工作所做的工作。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T05:14:39.677

虽然这在技术上完全可以在 MySQL 中完成，但是是什么让您认为这是您唯一的选择？

在 PHP 中进行字符串解析确实容易得多。

```
foreach ($lines as $line) 
{
    $fields = explode('->', $line);
    $sample_lang = trim($fields[0]);
    $bltime = trim($fields[1]);
    mysql_query("insert into postflight (bltime, sample_lang) values ('".mysql_escape_string($bltime)."','".mysql_escape_string($sample_lang)."' )") or die(mysql_error());

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T05:15:12.093

您必须在您的代码中使用一些逻辑，将字符串（textarea 中的文本输入）拆分为两个值（一个应该插入到 sample_lang 列中，一个应该插入到 bltime 中）然后将这些值分别插入这些列中。

# python - Django：什么时候设置 sessionid cookie？[是否默认可用？]

> ID：12257116
> 
> 赞同：2
> 
> 时间：2012-09-04T05:07:51.003
> 
> 标签：python, database, django, session, session-cookies

我正在尝试跟踪用户 - 无需登录。为此，我尝试使用`sessionid`或 django 会话。

**看法：**

```
# Associating data with sessionid
ob = MyModel(session_key=request.session.session_key, data='abc')
ob.save() 
```

目的是为每个浏览器会话保存特定数据。

**引发错误：**

```
# session_key not found 
```

我检查了浏览器上的 cookie，只有`csrftoken`. `sessionid`不在 cookie 列表中。

我认为`sessionid`无论如何都保持不变？但似乎并非如此。

那么，什么时候`sessionid`创建？如何在`session`没有用户登录的情况下进行管理？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T05:18:38.057

`session`默认行为是仅在您访问或修改dict-like 对象中的键时才填充会话。

为了避免这种行为[`SESSION_SAVE_EVERY_REQUEST`](https://docs.djangoproject.com/en/dev/topics/http/sessions/#session-save-every-request)在`True`您的`settings.py`文件中设置。这可以确保在每个请求上都保存一个会话，即使您没有修改会话对象。

身份验证中间件与会话无关；默认情况下，django 支持匿名会话。

# jquery - Jplayer 中是否有任何方法作为 stopOthers/resetOthers 而不是 pauseOthers？

> ID：12257117
> 
> 赞同：1
> 
> 时间：2012-09-04T05:08:01.190
> 
> 标签：jquery, jplayer

我在一页上实现了多个 jplayer 实例。但是，当其中一个视频/音频开始播放时，我无法停止其他播放器。我试图改变下面的代码，`jquery.jplayer.js`但它只在桌面浏览器中工作。在**ipad/手机**上它不工作。

```
pauseOthers: function() {
            var self = this;
            $.each(this.instances, function(i, element) {
                if(self.element !== element) { // Do not this instance.
                    if(element.data("jPlayer").status.srcSet) { // Check that media is set otherwise would cause error event.
                        element.jPlayer("**stop**"); //element.jPlayer("**pause**");
                    }
                }
            });
        }, 
```

# java - 了解 StreamGobbler

> ID：12257123
> 
> 赞同：1
> 
> 时间：2012-09-04T05:08:56.110
> 
> 标签：java, runtime.exec, outputstream

我正在`mailx`通过 Runtime.exec 实现一个命令，并遇到了这篇文章，它解释了正确的做法。

[JavaWorld：运行时.exec](http://www.javaworld.com/jw-12-2000/jw-1229-traps.html?page=4)

我浏览了这些示例，发现它们引入了一个新类`StreamGobbler`，该类接受 InputStream 并打印输出。但是我不明白为什么要引入这个。谁能解释一下。

同样作为我的代码的一部分，我编写了以下内容

```
OutputStreamWriter osw = new OutputStreamWriter(proc.getOutputStream())
osw.write(mailBody)
osw.close 
```

这个实现是正确的还是有任何陷阱？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T05:30:55.323

由于您的程序可能会成功（这意味着程序的输出将在 上可用`Process'` `getInputStream()`）或它可能会失败（这意味着程序的错误将`Process'` `getErrorStream()`在由`StreamGobbler`该类实现的单独线程。希望这在一定程度上澄清。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T20:45:10.237

假设您不使用 StreamGobbler 解决方案，而只是使用`getInputStream()`来获取程序产生的标准输出。如果程序的执行只产生标准错误输出，当你试图读取`InputStream`由`getInputStream()`. 我说“可能挂起”是因为我相信行为可能会因您的执行环境而异。我在执行 JUnit 测试时遇到了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-13T16:22:34.243

ProcessBuilder 具有将错误流重定向到输入流 ( [ProcessBuilder.redirectErrorStream](https://docs.oracle.com/javase/6/docs/api/java/lang/ProcessBuilder.html#redirectErrorStream%28%29) ) 的方法，因此您不需要单独的线程来并行读取流。但是，InputStream.read 可能会阻塞并且不能通过 Thread.interrupt[中断](http://bugs.java.com/bugdatabase/view_bug.do?bug_id=4514257)，因此如果您需要对读取设置超时，您可能需要使用单独的线程“StreamGobbler”。

# group-by - 带有子查询的 DISTINCT 或 GROUP BY

> ID：12257127
> 
> 赞同：2
> 
> 时间：2012-09-04T05:09:25.667
> 
> 标签：group-by, subquery, distinct

你好我有这个查询：

```
SELECT DISTINCT a.id, a.runcd, 
(SELECT SUM(b.CALVAL) FROM GRS b 
WHERE b.PCode=11000 
AND a.id = b.id 
AND a.runcd=b.runcd) AS qval
FROM GRS a
WHERE a.crt = k04 
```

这是一样的吗：

```
SELECT a.id, a.runcd,
(SELECT SUM(b.CALVAL) FROM GRS b 
WHERE b.PCode=11000 
AND a.id = b.id 
AND a.runcd=b.runcd) AS qval
FROM GRS a
WHERE a.crt = k04
GROUP BY id,runcd 
```

到目前为止，这会返回相同的结果，但我不知道这是否是正确的选择。谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T04:59:29.813

> `GROUP BY`允许您使用聚合函数，如`AVG`, `MAX`, `MIN`, 等`SUM`，`COUNT`同时`DISTINCT`仅删除重复项。

请参阅[SQL SERVER – DISTINCT 和 GROUP BY 之间的区别 – Distinct vs Group By。](http://blog.sqlauthority.com/2007/03/29/sql-server-difference-between-distinct-and-group-by-distinct-vs-group-by/)
在您的情况下，即使您使用子查询，它也会给您相同的结果，因为您只检索`SUM(b.CALVAL)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T04:51:33.807

对于这个特定的查询，无论数据库供应商如何，它们的行为总是完全相同的（至少我想不出这个使用 mysql、sql server、postgres 或 oracle 的查询有什么问题）。

# android - 无法取消 PendingIntents - Android

> ID：12257128
> 
> 赞同：1
> 
> 时间：2012-09-04T05:09:31.207
> 
> 标签：android, alarmmanager, android-pendingintent, android-alarms

我已经编写了一个警报系统，它与信息所在的服务器同步。

有时，在服务器上的更新中，一些警报会被删除。现在，它已从数据库 db4o 中很好地删除，但我无法取消已编程的pendingIntents。

现在，我有以下代码：

```
PendingIntent pendingIntent;
public class xxx{

public void updateObjects(){

alarmManager.cancel(pendingIntent);//delete all alarms
(...)
for(...){
    //Update each object ofdb4o with the new object value's.
    (...)
    doIntents(context,mil,obj);
    }
            (...)
    }

public void doIntents(Context context, long mil, ClassObjects obj){
(...)
pendingIntent = PendingIntent.getBroadcast(context, obj.getId(), intent, PendingIntent.FLAG_UPDATE_CURRENT);
(...)
}
} 
```

任何人都可以帮我取消那些我已经不需要的未决意图吗？

谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T05:26:39.700

要取消 PendingIntent，您必须通过与`ID`您在设定时间内通过的相同。

```
 PendingIntent pendingIntent = PendingIntent.getBroadcast(context, obj.getId(), intent, PendingIntent.FLAG_UPDATE_CURRENT);
            AlarmManager alarmManager = (AlarmManager) context.getSystemService(ALARM_SERVICE);
            alarmManager.cancel(pendingIntent); 
```

# ruby-on-rails - Twitter 在 Rails 3 中引导语言环境选择器下拉菜单

> ID：12257130
> 
> 赞同：0
> 
> 时间：2012-09-04T05:09:33.250
> 
> 标签：ruby-on-rails, ruby-on-rails-3, drop-down-menu, internationalization, twitter-bootstrap

我在其他通常是 Bootstrapped Rails 3 应用程序中有一个非 Bootstrapped 语言环境选择器，我想引导它。对于如何在下拉菜单中的表单中制作（我假设）无序列表，我有点难过。

### **TL;DR**转到此问题底部的编辑 3 以获取完整的解决方案。

当前代码的实现方式如下：

**应用程序/视图/布局/_header.html.haml**

```
%header.navbar.navbar-fixed-top
  .navbar-inner
    .container
      # ...
      %nav
        %ul.nav.pull-right
          # ...
          %li= render 'layouts/locale_selector',
                       controller: controller, 
                       action: action
          # (controller, action params passed in from application.html.haml) 
```

**应用程序/视图/布局/_locale_selector.html.haml**

```
= form_tag({ controller: controller,
             action: action },
             method: 'get',
             class: 'locale') do
  = select_tag 'set_locale',
               options_for_select(locale_languages, I18n.locale)
  = hidden_field_tag 'page', params[:page] if params[:page]
  = submit_tag 'submit' 
```

**app/helpers/application_helper.rb**

```
module ApplicationHelper
  # ...
  def locale_languages
    [
      [t('locale_selector.en'), 'en'],
      [t('locale_selector.it'), 'it'],
      [t('locale_selector.ja'), 'ja']
    ]
  end
end 
```

**应用程序/资产/样式表/bootstrap_and_overrides.css.scss**

```
# ...
.locale {
  padding-top: 5px;
  padding-left: 5px;
  margin: -0.25em;
  #set_locale {
    width: 85px;
    height: 36px;
    color: $grayLight;
    border: none;
    background: none;
    text-align: center;
    &:hover {
      color: $white;
      text-decoration: none;
    }
  }
} 
```

**应用程序/资产/javascripts/application.js.coffee**

```
$ ->
  $(".locale input").hide()
  $("#set_locale").change ->
    $(this).closest("form").submit() 
```

通过阅读[Bootstrap 组件文档](http://twitter.github.com/bootstrap/components.html)，我已将**header.html.haml**更改为下面的代码，以获取显示我想要的下拉列表，但它正在获取 等显示/正常工作的内容`select_tag`，`options_for_select`我不是肯定：

**应用程序/视图/布局/_header.html.haml**

```
# ...
%li#fat-menu.dropdown
  %a.dropdown-toggle{"data-toggle" => "dropdown", href: "#"}
    = t('.language')
    %b.caret
  .dropdown-menu
    = render 'layouts/locale_selector',
              controller: controller,
              action: action 
```

我试图[在表单的 Bootstrap 文档](http://twitter.github.com/bootstrap/base-css.html#forms)中查找信息，并通过搜索 StackOverflow 和 Google，但无济于事。我敢打赌我错过了一些简单和/或微不足道的东西，但是任何 Bootstrap 专家都可以帮助我吗？

### 编辑

更改了 2 个文件以使下拉列表看起来不错，但它仍然没有提交...

**app/helpers/application_helper.rb**

```
module ApplicationHelper
  # ...
  def locale_languages
    [
      { label: t('locale_selector.en'), locale: 'en' },
      { label: t('locale_selector.it'), locale: 'it' },
      { label: t('locale_selector.ja'), locale: 'ja' }
    ]
  end
end 
```

**应用程序/视图/布局/_locale_selector.html.haml**

```
= form_tag({ controller: controller,
             action: action },
             method: 'get',
             class: 'locale') do
  - locale_languages.each do |language|
    %li= link_to language[:label], '#', value: language[:locale]
  = hidden_field_tag 'page', params[:page] if params[:page]
  = submit_tag 'submit' 
```

### 编辑 2

**应用程序/资产/javascripts/application.js.coffee**

```
$ ->
  $(".locale input").hide()
  $(".locale").click ->
    $(this).closest("form").submit() 
```

现在它提交了，但我对`params[:set_locale]`in my的所有原始后端处理都`ApplicationController`被破坏了（不会把代码放在这里，但对于好奇的人[来说，它是](https://github.com/paulfioravanti/sample_app/blob/master/app/controllers/application_controller.rb)），所以语言环境不会改变。需要尝试让它传回一个`params[:set_locale]`值......

## 编辑 3：完成的解决方案

完全摆脱了表格，正如@simbirsk 和@quick_brown_fox 指出的那样，我首先应该这样做。非常感谢，伙计们。这是最终代码：

**应用程序/视图/布局/_header.html.haml**

```
%header.navbar.navbar-fixed-top
  .navbar-inner
    .container
      # ...
      %nav
        %ul.nav.pull-right
          # ...
          %li= render 'layouts/locale_selector',
                       controller: controller, 
                       action: action
          # (controller, action params passed in from application.html.haml) 
```

**应用程序/视图/布局/_locale_selector.html.haml**

```
%li#fat-menu.dropdown
  %a.dropdown-toggle{"data-toggle" => "dropdown", href: "#"}
    = t('.language')
    %b.caret
  %ul.dropdown-menu
    - locale_languages.each do |language|
      %li
        = link_to language[:label],
                  controller: controller,
                  action: action,
                  set_locale: language[:locale],
                  page: params[:page] 
```

**app/helpers/application_helper.rb**

```
module ApplicationHelper
  # ...
  def locale_languages
    [
      { label: t('locale_selector.en'), locale: 'en' },
      { label: t('locale_selector.it'), locale: 'it' },
      { label: t('locale_selector.ja'), locale: 'ja' }
    ]
  end
end 
```

上面提到的**app/assets/stylesheets/bootstrap_and_overrides.css.scss**和**app/assets/javascripts/application.js.coffee**中的代码已经被完全删除，因为它变得多余了。

**更新**：这似乎得到了很多意见，所以：

*   [您可以在](https://github.com/paulfioravanti/sample_app)我为 Michael Hartl 的[Rails 教程](http://ruby.railstutorial.org/)制作的应用程序中找到 locale 下拉菜单的完整实现，包括控制器中的代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T06:59:55.503

我认为没有办法`<select>`通过 Bootstrap 将元素设置为下拉菜单。与其使用表单，不如使用无序列表中的链接并稍微更改您的控制器？

或者——如果这不是解决方案，你可能不得不使用一些 JavaScript 魔法或创建某种 POST 链接（我现在不太喜欢 Rails 以准确记住你是如何做到的，但你可以，对吧？）

（不确定我的问题是否正确……）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T09:18:31.937

您的`<select>`解决方案看起来不错，但不幸的是这不是 Bootstrap 原生的。
如文档中所述，导航栏下拉菜单的标记如下：

```
<div class="dropdown">
    <a class="dropdown-toggle" id="dLabel" role="button" data-toggle="dropdown" data-target="#" href="/page.html">
        Language
        <b class="caret"></b>
    </a>
    <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
        <li><a href="#">English</a></li>
        <li><a href="#">Portuguese</a></li>
        ...
    </ul>
</div> 
```

因此，如果您想保持“自举”，请调整您的代码并生成（如果您愿意的话）`<li>`包含指向每种语言的链接的集合。您可以使用发布您需要的任何数据`<%= link_to %>`

# android - Android PopUpWindow 问题

> ID：12257132
> 
> 赞同：0
> 
> 时间：2012-09-04T05:10:00.363
> 
> 标签：android, popupwindow, android-menu

这是我的问题。我有一个 PopupWindow 将在单击按钮时显示。我已经添加了`setOutsideTouchable(true)`，所以当用户在 PopupWindow 之外单击时，PopupWindow 将被关闭。

现在的问题是，当我的弹出窗口显示时，我点击了按钮，它所做的就是关闭我的弹出窗口并再次显示它（它实际上应该做的只是关闭弹出窗口）。它关闭了我的弹出窗口，因为单击按钮算作外部（`setOutsideTouchable(true)`），然后再次显示它，因为我的 onclick 代码告诉了它。

无论如何我可以将我的按钮包含在 PopupWindow 的范围内，所以当点击它时它不会关闭它？

非常感谢。感谢帮助。}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T05:23:22.327

声明

```
private LayoutInflater inflater;
private PopupWindow pw;
private View popupView 
```

在 oncreate 方法中

```
inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
popupView = inflater.inflate(R.layout.menu_layout, null, false); 
```

按钮的 onclick 方法

```
public void showPopup(View view) {
    pw = new PopupWindow(getApplicationContext());
    pw.setTouchable(true);
    pw.setFocusable(true);
    pw.setOutsideTouchable(true);
    pw.setTouchInterceptor(new OnTouchListener() {
       public boolean onTouch(View v, MotionEvent event) {
           if (event.getAction() == MotionEvent.ACTION_OUTSIDE) {
                pw.dismiss();

                return true;
            }

            return false;
        }
    });

    pw.setWidth(WindowManager.LayoutParams.WRAP_CONTENT);
    pw.setHeight(WindowManager.LayoutParams.WRAP_CONTENT);
    pw.setOutsideTouchable(false);
    pw.setContentView(popupView);
    pw.showAsDropDown(view, 0, 0);

} 
```

这是我用来实现相同的代码。

**您可以在此处找到[示例代码](http://androidsamplecodes4u.blogspot.in/2012/05/popup-menu-android-sample-code.html)**

# facebook - 使用 facebook 身份验证进行浏览器扩展

> ID：12257135
> 
> 赞同：6
> 
> 时间：2012-09-04T05:10:32.323
> 
> 标签：facebook, oauth, facebook-javascript-sdk, authentication, browser-extension

我想知道为浏览器扩展实现 Facebook 连接的最佳方式是什么。
我想到的两个选择是：

*   直接在扩展上下文中实现 Oauth 协议 (http://developer.chrome.com/extensions/tut_oauth.html)
*   在网站中实现它，然后以某种方式将访问令牌传递给扩展程序以进行 API 调用

您认为每种方法的优缺点是什么？
也很想得到一些使用 Facebook 进行身份验证的浏览器扩展的例子（显然没有太多容易找到的......）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T08:37:32.653

老实说，在不知道您的扩展程序实际上会做什么的情况下权衡利弊有点困难，因为身份验证的实现只是难题的一部分（其中很小的一部分）。无论如何，我会采取赌注并假设大多数情况下您的扩展程序不会对用户数据进行处理，除非他们打开浏览器窗口。

**1.客户端身份验证（您的第一个选项）**

*优点*

*   更易于开发和维护，因为您将所有应用程序逻辑都集中在一个地方并用一种语言 (JavaScript) 编写

*缺点*

*   访问令牌存储在用户浏览器中，因此您无法执行自主服务器端操作（除非您将该令牌传递给您的服务）

**2\. 服务器端身份验证（您的第二个选项）**

根据我上面的回答，这个的利弊非常明显。一般来说，您唯一需要使用服务器端身份验证的情况是，如果您的大部分应用程序逻辑已经在服务器上，因此（通常）在服务器上也有这方面是有意义的。

> **注意：**无论您选择哪个选项，您最终仍需要向用户显示身份验证弹出窗口，他们将在其中选择接受或拒绝使用您的应用程序。

# objective-c - 更改 ivar 布局时遗留运行时和重新编译继承的类

> ID：12257140
> 
> 赞同：0
> 
> 时间：2012-09-04T05:10:48.147
> 
> 标签：objective-c, objective-c-runtime

在阅读 Objective-C 运行时指南时，我遇到了以下语句：

> 在旧版运行时中，如果更改类中实例变量的布局，则必须重新编译从它继承的类。
> 
> 在现代运行时，如果您更改类中实例变量的布局，则不必重新编译从它继承的类。

有人可以为此提供一个例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T05:49:16.350

当然。如果 Apple 要发布一个包含新实例变量的 AppKit.framework `NSView`，则每个包含子类（直接或间接）的单个 3rd 方库、框架或应用程序`NSView`（在该子类中也有实例变量）将具有重新编译，否则应用程序将不再工作。

在现代运行时，这不再是真的。Apple 可以使用附加的实例变量发布一个新的 NSView 实现，并且*不会*破坏子类。

或者，正如格雷格·帕克所说，“这一切都是为了不杀死小猫。”。

# c# - 如何通过自定义 Asp.net 页面将页面分配给成员资格和角色中的用户角色

> ID：12257141
> 
> 赞同：1
> 
> 时间：2012-09-04T05:10:50.283
> 
> 标签：c#, asp.net, asp.net-membership

我正在创建一个 Web 应用程序，并且我已经创建了用于创建角色的页面。但我希望管理员应该决定哪些角色是角色经过身份验证的页面或模块。我正在使用内置的成员资格和角色。

对于菜单，我使用站点地图进行安全修剪，它工作正常。我只是想让那个东西可定制。

我可以选择在 web.config 中硬编码，但我想让它可定制。

```
<location path="Upload.aspx">
  <system.web>
    <authorization>
      <allow roles="Uploader"/>
      <deny users="*" />
    </authorization>
  </system.web>
</location> 
```

有什么方法可以让我们定制这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T14:26:55.533

查看 UDRI 的基于 Web 的开源网站管理工具：http: [//udriwsat.codeplex.com/](http://udriwsat.codeplex.com/)

我相信他们已经建立了这样的规则。

# nicedit - nicEdit 工具栏按钮部分可见

> ID：12257142
> 
> 赞同：1
> 
> 时间：2012-09-04T05:10:54.530
> 
> 标签：nicedit

只是顶部的工具栏按钮图像是可见的。哪里可能有问题？

```
$ ->
  ne = new nicEditor({iconsPath: '/assets/nicEditorIcons.gif'})
  ne.panelInstance('answer_comment') 
```

![nicEdit工具栏问题](../Images/eab8d78fc210efde5851a0258b204cc6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T17:38:09.177

在开发阶段缓存存在一些神秘问题。如果您遇到此问题，请删除 rails 缓存，重新启动服务器并硬刷新浏览器。

# html - 为什么 CSS 不加载？

> ID：12257149
> 
> 赞同：7
> 
> 时间：2012-09-04T05:11:47.960
> 
> 标签：html, css

在我发现某些网站（例如 Facebook）的某些 Internet 连接上，CSS 不会加载。但是在这些相同的连接上，某些站点（例如 StackOverflow）仍然​​可以正常工作。

我的问题是，为什么它会这样？以及如何以像 StackOverflow 一样加载的方式进行编程？

根据第一个问题的答案，第二个问题可能并不完全相关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T12:51:38.597

如果 CSS 在 CDN 上被某些路由器设置过滤，CSS 可能会被过滤，CSS（在 facebook 的情况下）可能会被更新并且一瞬间不可用。

在这种情况下，最好的办法是更新有问题的浏览器，按 Ctrl + F5（Windows、Linux）或 Cmd + R（Mac）并强制刷新内容并查看 CSS 是否出现故障。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T05:46:21.563

我在浏览网站时得到了很多。还有你的 Facebook 例子，是的，这是动态网页中的一个常见问题。但是，第一个可能的原因是样式表没有正确的 MIME 类型，或者根本没有设置。一些浏览器不会解析这个，所有导入/链接/内联样式表都应该在其标签中将属性“type”设置为“text/css”。另一个原因是它是页面，有时动态页面（例如用 PHP 编写的页面）被编程为在特定条件下动态链接到特定样式表，如果事情没有正确完成，脚本可能永远不会真正加载样式-床单。

如果您想（仅帮助）确保您的样式表已加载，请确保您的动态脚本始终加载样式表，和/或您的样式表如下所示：

```
<link rel="stylesheet" type="text/css" href="theme.css" /> 
```

或者如果它是内联的

```
<style type="text/css">
    p {
        margin-left:20px;
    }
    body {
        background-image:url("img_bg.png");
    }
</style> 
```

# arrays - 比较一个对象以查看它是否是一个集合而不使用 TypeName 并将其作为字符串进行比较？

> ID：12257154
> 
> 赞同：3
> 
> 时间：2012-09-04T05:12:29.433
> 
> 标签：arrays, object, collections, vb6, compare

[以下是在 VB6 中，我有一个集合数组，我想测试以确保某些内容属于集合类型]

我查看了几年前编写的一些代码，我正在执行以下操作以查看它是否是 Collection：

```
If TypeName(obj) = "Collection" Then ' Makes me feel uncomfortable. 
```

但是，我不喜欢进行字符串比较的想法（根据 MSDN，会降低性能并且让我感到不舒服）并且更愿意做这样的事情：

```
If obj Is Collection Then 
```

但是，这一行在 VB6 中会产生一个运行时错误，指出“编译器错误：变量未定义”。显然，因为“Is”运算符比较的是值而不是类型，所以这样做不会产生运行时错误，但无论如何都会返回 False（即使我之前 Set obj = New Collection）：

```
Dim obj As Collection
Set obj = New Collection
If obj Is New Collection Then ' Returns False under every condition. 
```

这是因为“新集合”将始终是一个新实例，因此是内存中的一个新位置（即使值相同）。

当然，我可以（并且确实）使用以下内容，但我追求的不仅仅是测试 Nothing 更具体：

```
If Not obj Is Nothing Then ' We can just assume it is a Collection Type. 
```

但是，我正在寻找一种更好的方法来测试某物是否属于 Collection 类型，而不仅仅是假设它不是 Nothing。

感谢您的预期帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T07:31:05.833

使用`TypeOf`. 例如：

`If TypeOf obj Is Collection Then`

`TypeOf`[在 VB6 文档](http://msdn.microsoft.com/en-us/library/aa243382%28v=vs.60%29.aspx)的“If ... Then ... Else”主题中进行了描述。*感谢迪安娜指出这一点！*

# windows-phone-7 - 如何计算隔离存储设置的行数？

> ID：12257156
> 
> 赞同：0
> 
> 时间：2012-09-04T05:12:43.217
> 
> 标签：windows-phone-7, isolatedstorage

我在隔离存储设置中存储了多个数据，但是当时检索数据时只显示一个数据

我使用 for 循环，但它没有给出完美的输出

c#代码是：

```
 for (int i = 0; i <= IsolatedStorageSettings.ApplicationSettings.Count; i++)
    {
      cityname = IsolatedStorageSettings.ApplicationSettings["CityDetail"] as string;
      ads.Add(new Transaction(cityname));
    } 
```

保存隔离存储设置的代码

```
 if (!setting.Contains("CityDetail"))
 {
   setting.Add("CityDetail", cityname);
 }
 else
 {
   setting["CityDetail"] = cityname; 
 }
 setting.Save(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T05:49:37.343

[隔离存储](http://msdn.microsoft.com/en-us/library/system.io.isolatedstorage%28v=vs.95%29.aspx)使用*键值*对来保存数据。
因此，例如，如果您这样做：

```
 if (!setting.Contains("CityDetail"))
 {
   setting.Add("CityDetail", "abc");
 }
 else
 {
   setting["CityDetail"] = "abc"; 
 }
 setting.Save(); 
```

所以在这样做之后，键**- CityDetail的****值**是**abc**。

 ****在此之后，如果您这样做：

```
 if (!setting.Contains("CityDetail"))
 {
   setting.Add("CityDetail", "def");
 }
 else
 {
   setting["CityDetail"] = "def"; 
 }
 setting.Save(); 
```

然后，键**CityDetail的****值**将被替换，新**值**将是**def**。 本质是**“在Key-Value存储方式中，一个key只能有一个value”。**

 ******要针对单个键保存多个值，您可以执行以下操作：

```
 void addCityName(string cityName)
{
    List<string> existingList = getCityNames();
        if(existingList==null)
        {
             existingList = new List<string>();
             existingList.Add(cityName);
        }
        string json = JsonConvert.SerializeObject(exitingList);
        if(!IsolatedStorageSettings.ApplicationSettings.Contains("CityDetails"))
    {
        IsolatedStorageSettings.ApplicationSettings.Add("CityDetails",json);    
    }
    else 
    {
        IsolatedStorageSettings.ApplicationSettings["CityDetails"] = json;
    }
}

List<string> getCityNames()
{
    string json = IsolatedStorageSettings.ApplicationSettings["CityDetails"] as string;
    if(json == null)
        return null;
    JArray arr = JArray.parse(json);
        List<string> list = new List();
    for(int i=0; i < arr.length; i++)
    {
        list.add(arr[i].toString());
    }
    return list;
} 
```

为此，您需要[Json.Net](http://json.codeplex.com/releases/view/92198)库。**********

# android - Android：将自定义视图添加到空的 GridLayout

> ID：12257157
> 
> 赞同：0
> 
> 时间：2012-09-04T05:12:57.110
> 
> 标签：android, android-gridlayout

在我的应用程序中，我必须显示一个 ListView，listview 的每一行都应该包含一个 GridLayout。并且网格布局的项目是通过适配器类动态添加的。

```
@Override
    public View getView(int position, View convertView, ViewGroup parent) {
        final ViewHolder holder;

        // if it's not create convertView yet create new one and consume it
        if (convertView == null) {
            // instantiate convertView using our list_item
            convertView = inflater.inflate(R.layout.order_grid_list_view, null);
            // get new ViewHolder
            holder = new ViewHolder();
            holder.order_row = (GridLayout) convertView
                    .findViewById(R.id.order_row);
            holder.order_no = (TextView) convertView
                    .findViewById(R.id.order_no);
            holder.order_date = (TextView) convertView
                    .findViewById(R.id.order_date);
            holder.complete = (Button) convertView
                    .findViewById(R.id.order_btn);
        }
        // if it's exist convertView then consume it
        else {
            Log.d("ListAdaptor", "convertView is not null");
            holder = (ViewHolder) convertView.getTag();
        }

        orderno_ = data.get(position).getNo() + "";
        // set data to holder
        holder.order_no.setText(data.get(position).getNo() + "");
        holder.order_date.setText(data.get(position).getDateTime());
        if (mode.equalsIgnoreCase("Y")) {
            holder.complete.setText("InComplete");

        } else {
            holder.complete.setText("Complete");
            holder.complete.setBackgroundDrawable(context.getResources()
                    .getDrawable(R.drawable.green_button_bg));
        }
        for (int i = 0; i < data.get(position).getItems().size(); i++) {
            holder.order_row.addView(getChildView(position, i));
        }

        holder.complete.setOnClickListener(new ButtonOnClickListener(
                clickListener, orderno_));
        return convertView;
    }

    private View getChildView(int pos, int i) {
        View child = inflater.inflate(R.layout.order_item, null);
        InnerViewHolder inholder = new InnerViewHolder();
        inholder.name = (TextView) child.findViewById(R.id.order_name);
        inholder.items = (ListView) child.findViewById(R.id.order_list);

        inholder.name.setText(data.get(pos).getItems().get(i).getItemName());
        inholder.items.setAdapter(new OrderItemOptionAdapter(context, data
                .get(pos).getItems().get(i).getOptions()));

        return child;
    }

    static class ViewHolder {
        GridLayout order_row;
        TextView order_no, order_date;
        Button complete;

    }

    static class InnerViewHolder {
        TextView name;
        ListView items;
    } 
```

但我看不到任何网格项目。请为我提供正确的实施方式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T08:22:24.793

在 getChildView() 我写了这段代码。现在它显示网格。但我不想使用硬编码值。

**child.setLayoutParams(new GridLayout.LayoutParams(new LayoutParams(250,300)));**

任何有效的答案表示赞赏

# css - 在 Chrome 上缩放会导致 CSS 定位问题

> ID：12257158
> 
> 赞同：6
> 
> 时间：2012-09-04T05:12:57.593
> 
> 标签：css, google-chrome, resize, positioning, zooming

当我在谷歌浏览器中放大和缩小我的网页时，相互精确定位的项目会改变位置。这会导致很多问题：例如，在特定的缩放级别，一个 div 将与其包含的 div 重叠，刚好足以隐藏一个边框。同样，有时 100% 标记不会与 100% 点精确对齐。

有什么方法可以确保页面放大或缩小时项目之间的相对位置不会改变？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-04T05:17:05.730

您可以使用 em 定位，它将根据字体大小重新定位和大小。因此，当人们喜欢 control + 或 command + 时，页面将自动调整大小。这是一个关于弹性布局的页面。希望这可以帮助。

[http://v1.jontangerine.com/log/2007/09/the-incredible-em-and-elastic-layouts-with-css](http://v1.jontangerine.com/log/2007/09/the-incredible-em-and-elastic-layouts-with-css)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-09T19:28:59.647

根据我的经验，使用`left:`px 值和`top:`与左/右下/下或右/上相比的 px 值似乎可以解决问题。这适用于 Chrome 和 FF，不能评论 IE。

例如：

```
#my-element
{
  list-style-type: none;
    position: fixed;
    left: 54px;
    top: 40px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-20T10:40:40.697

虽然这是一个老话题，但我偶然发现了这个问题。通过将包装容器添加到“难以捉摸的”元素来修复。因此，在尝试修复元素 css 之前，可能首先检查并确保内容包装器。

# android - 在android中打印时如何更改字体大小？

> ID：12257164
> 
> 赞同：11
> 
> 时间：2012-09-04T05:13:57.497
> 
> 标签：android, printing, bluetooth

我通过我的安卓手机将文本发送到蓝牙打印机。打印机和我的设备都**通过蓝牙连接。** 它工作正常，我在纸上得到了所需的文字。

**我的问题是：**

打印机采用默认*`font size`*文本。我想更改要打印的文本的字体大小。

我怎样才能做到这一点？

这是我在蓝牙连接后打印文本的代码：

```
private void connect_print(BluetoothDevice bluetoothDevicess)  {
    // some code
    printData();
    // some code
} 
```

**printData() 方法**

```
private void printData() {
    // TODO Auto-generated method stub
    String str = new String("This is the text sending to the printer");
    String newline = "\n";
    try {
        out.write(str.getBytes(),0,str.getBytes().length);
        Log.i("Log", "One line printed");
    } catch (IOException e) {
        Toast.makeText(BluetoothDemo.this, "catch 1", Toast.LENGTH_LONG).show();
        e.printStackTrace();
        Log.i("Log", "unable to write ");
        flagCheck = false;
    }
    try {
        out.write(newline.getBytes(),0,newline.getBytes().length);
    } catch (IOException e) {        
        Log.i("Log", "Unable to write the new line::");
        e.printStackTrace();
        flagCheck = false;
    }
    flagCheck = true;
} 
```

我想更改发送到打印机进行打印的文本的`font size`和。`font style`请帮助我实现这一目标。如果有人可以建议任何链接，那么我也会很感激他/她。 **帮助我找到解决此问题的方法**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-18T19:44:57.100

嗨，你写下我对同一主题的回答：

> 我已经在这里的这个帖子中问过同样的问题，但还没有得到任何回应。只有一个答案，但这对我没有帮助。
> 
> 让我们看看它是否对你有帮助。这里
> 
> 如果你已经完成了，请在我的帖子中回答我。我一定会很感激你的。

*现在我知道该怎么做，我必须应用反向工程并从市场上反编译一个 .apk，在 linux 上使用 dex2jar，然后用 java 反编译器打开 jar……试试这个……当你写这个命令时：*

> `out.write(str.getBytes(),0,str.getBytes().length);`

你正在向方法发送一个 byte[] 数组，你可以在发送真正的 byte[] 数组之前修改格式发送另一个 byte[] 数组...

默认格式 byte[] 数组是这样的：

> `byte[] arrayOfByte1 = { 27, 33, 0 };`

所以你可以试试这个：

```
byte[] format = { 27, 33, 0 };

out.write(format);

out.write(str.getBytes(),0,str.getBytes().length); 
```

这些行我会打印你的默认格式文本，但你会这样做：

```
 byte[] format = { 27, 33, 0 };

format[2] = ((byte)(0x8 | arrayOfByte1[2]));

out.write(format);

out.write(str.getBytes(),0,str.getBytes().length); 
```

它将以粗体样式打印文本...您可以尝试这种其他格式的数组：

```
 // Bold
            format[2] = ((byte)(0x8 | arrayOfByte1[2]));

            // Height
            format[2] = ((byte)(0x10 | arrayOfByte1[2]));

            // Width
            format[2] = ((byte) (0x20 | arrayOfByte1[2]));

            // Underline
            format[2] = ((byte)(0x80 | arrayOfByte1[2]));

            // Small
            format[2] = ((byte)(0x1 | arrayOfByte1[2])); 
```

你也可以组合它，如果你喜欢小而粗的文本，取消注释这些数组分配，例如：

```
 byte[] format = { 27, 33, 0 };

    // Bold
format[2] = ((byte)(0x8 | arrayOfByte1[2]));
// Height
format[2] = ((byte)(0x10 | arrayOfByte1[2]));
// Width
format[2] = ((byte) (0x20 | arrayOfByte1[2]));
// Underline
// format[2] = ((byte)(0x80 | arrayOfByte1[2]));
// Small
// format[2] = ((byte)(0x1 | arrayOfByte1[2]));
    out.write(format);
    out.write(str.getBytes(),0,str.getBytes().length); 
```

最后一个代码打印出最大的文本大小......我希望这可以帮助你......

Pdta：对不起我的英语

Pdta2：**我正在尝试打印图像，你知道吗？**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T07:51:43.303

我不确定，但您可以使用 Java`span`设置字体样式的方法来实现这一点。

尝试这样的事情：

```
int start=editbox.getSelectionStart();

int end=editbox.getSelectionEnd();

Spannable span=(Spannable)editbox.getText();

StyleSpan f = new StyleSpan( 
                        Typeface.createFromAsset(getAssets(),
                         "fonts/genbkbasr.ttf"));

span.setSpan(f, start,end, 0); 
```

同样，您可以应用字体样式、字体颜色等...

有关更多详细信息，请检查以下内容：

[Android 开发：如何用 Spannable 替换 EditText 的一部分](https://stackoverflow.com/questions/7338697/android-development-how-to-replace-part-of-an-edittext-with-a-spannable)

[如何在 android 中使用 SpannableString 和正则表达式？](https://stackoverflow.com/questions/7364119/how-to-use-spannablestring-with-regex-in-android/7365113#7365113)

# php - 约定框架和配置框架之间的区别

> ID：12257170
> 
> 赞同：0
> 
> 时间：2012-09-04T05:14:34.420
> 
> 标签：php, frameworks

> **可能的重复：**
> [“约定优于配置”范式的好处](https://stackoverflow.com/questions/4347015/benefits-of-the-convention-over-configuration-paradigm)

约定框架和配置框架有什么区别？请列出这两种情况下的一些示例，尤其是对于 PHP。提前致谢

# django - 让 __unicode__ 出现在 Django 的搜索字段中

> ID：12257174
> 
> 赞同：0
> 
> 时间：2012-09-04T05:14:53.450
> 
> 标签：django, django-admin

我想根据班级的`__unicode__`. 因此，我需要上课`__unicode__`才能出现在搜索字段中。

我试过这个：

```
class ExampleAdmin(admin.ModelAdmin):
    search_fields = ['__unicode__',] 
```

但是当我基于**unicode**搜索时，我得到了这个错误：

```
Cannot resolve keyword '' into field. 
```

我该如何解决这个错误？需要一些指导...

该`__unicode__`方法如下所示：

```
 def __unicode__(self):
        return self.user.username + ' ' + self.firstname + ' ' + self.lastname + ' ' + self.email 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T06:34:53.090

你不能那样做。搜索是在数据库级别完成的，而`__unicode__`不是数据库字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T06:38:30.677

你的模型的`__unicode__`方法是做什么的？

最有可能的是，它将一些手工挑选的模型字段组合成一个字符串以用于显示目的。在这种情况下，合理的做法是将这些相同的字段放入`search_fields`中，然后让数据库搜索这些字段。

# active-directory - Ldap DN/RDN 长度限制

> ID：12257178
> 
> 赞同：3
> 
> 时间：2012-09-04T05:15:15.667
> 
> 标签：active-directory

有谁知道win08r2或08的DN或RDN的最大长度是多少。

我从网上搜索有人说的。

```
RDN length * max tree search = DN length  <---- is it true ? 
```

因为无法验证。

参考。[http://technet.microsoft.com/en-us/library/cc977992.aspx](http://technet.microsoft.com/en-us/library/cc977992.aspx)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-11-04T22:59:15.160

对于它的价值，我刚刚创建了一个嵌套 OU 和 Active Directory 的树，最终在 32768 处阻塞，这是 2^15 或有符号 16 位整数的最大值。

然后，我能够在该 OU 中创建一个用户，给他一个略高于 32768 的专有名称。

然而，在您达到此限制之前，诸如 Active Directory 用户和计算机之类的 GUI 工具就会崩溃。这样的壮举只能以编程方式实现。

这样的场景在现实世界中是相当荒谬的，但你问的是理论上的极限。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T08:16:46.650

根据[http://technet.microsoft.com/en-us/library/active-directory-maximum-limits-scalability(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/active-directory-maximum-limits-scalability(v=ws.10).aspx)，DN 的最大长度为 255 个字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-12T19:37:19.493

（无法评论）

确认这将很有趣，并且在这种情况下它也适用于身份验证。很有趣的原因，如果它有效。

[http://technet.microsoft.com/en-us/library/active-directory-maximum-limits-scalability(v=ws.10).aspx#BKMK_NameLimits](http://technet.microsoft.com/en-us/library/active-directory-maximum-limits-scalability%28v=ws.10%29.aspx#BKMK_NameLimits)

“您可以通过确保尝试绑定到您的目录的应用程序、脚本和实用程序使用安全的 LDAP 绑定来避免此问题。”

# clojure - 如何将优先级映射扩展为可简化

> ID：12257184
> 
> 赞同：2
> 
> 时间：2012-09-04T05:15:48.183
> 
> 标签：clojure, extend, reduce

我注意到[优先级映射](https://github.com/clojure/data.priority-map/blob/master/src/main/clojure/clojure/data/priority_map.clj)没有实现reduce（如果您尝试，则为AbstractMethodError） - 我该如何扩展它以便它可以？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T09:40:08.243

这对我有用：

```
(ns reducing
   (:use clojure.data.priority-map)
   (:import (clojure.data.priority_map PersistentPriorityMap)))

(extend-type PersistentPriorityMap
   clojure.core.protocols/CollReduce
   (coll-reduce
      ([this f] (reduce f (seq this)))
      ([this f val] (reduce f (seq this) val))))

(def p (priority-map :a 2 :b 1 :c 3 :d 5 :e 4 :f 3))

(reduce conj [] p) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T18:18:38.970

这是由 clojure.core 对集合实现做出的一些隐含假设引起的，据我所知，这些假设在任何地方都没有编纂。具体来说，它假设所有的 java 集合接口也都实现了，但实际上并没有扩展这些接口。因此，可能会忘记实现其中的一些，然后让事情正常工作，直到你得到一些假设它们已实现的代码。

在这种情况下，遗漏的接口（或至少其中一个）是 Iterable：reduce 可以在任何 Iterable 上工作，而无需了解更多信息。我将看到如何应用补丁以使优先级映射实现 Iterable。

# php - yii 邮件扩展：如何一次发送多个电子邮件地址

> ID：12257185
> 
> 赞同：2
> 
> 时间：2012-09-04T05:15:57.093
> 
> 标签：php, yii, sendmail, mailer, yii-extensions

问：如何一次发送多个地址？

状态：我正在使用邮件扩展。当我发送到单个地址时它正在工作。但是当我发送到多个地址时。它不工作。

这个正在工作。

```
$mailer->AddAddress("aa@gmail.com"); 
```

以下不工作。

```
$mailer->AddAddress("aaa@gmail.com, bbbb@gmail.com");
$mailer->AddAddress("'aaa@gmail.com', 'bbbb@gmail.com'");
$mailer->AddAddress("\"aaa@gmail.com\", \"bbbb@gmail.com\""); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T05:32:17.707

您只需多次调用“addAddress”函数：

```
$mailer->AddAddress("aaa@gmail.com");
$mailer->AddAddress("bbbb@gmail.com"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T07:13:03.020

修改 Mailer 类如下。[访问此线程以获取更多信息](http://www.yiiframework.com/forum/index.php/topic/18500-problems-with-php-mailer/)

```
<?php

Yii::import('application.extensions.PHPMailer_v5.1.*');

class Mailer {

    private $mail;

    public function initialise() {
        try {
            require Yii::getPathOfAlias('application.extensions') . '/PHPMailer_v5.1/class.phpmailer.php';
            $this->mail = new PHPMailer(TRUE);
            $this->mail->IsSMTP();                           // tell the class to use SMTP
            $this->mail->SMTPDebug = 0;
            $this->mail->SMTPAuth = true;                  // enable SMTP authentication
            $this->mail->Port = 25;                    // set the SMTP server port
            $this->mail->Host = "smtp.test.net"; // SMTP server
            $this->mail->Username = "test.com";      // SMTP server username
            $this->mail->Password = "test";            // SMTP server password
            $this->mail->Mailer = "smtp";
            $this->mail->From = 'info@test.com';
            $this->mail->FromName = 'test@net.com';
        } catch (Exception $e) {
            echo $e->getTraceAsString();
        }
    }

    public function email($message, $sendTo, $subject) {
        try {
            $this->mail->AddAddress($sendTo);
            $this->mail->Subject = $subject;
            $body = $message;
            $this->mail->MsgHTML($body);
            $this->mail->IsHTML(true); // send as HTML
            $this->mail->Send();
            $this->mail->ClearAllRecipients();
        } catch (Exception $e) {
            echo $e->getTraceAsString();
        }
    }

}

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T15:10:10.760

理解单个电子邮件的简单方法...

```
$emailaddress="johndoe@domain.com"
$username="John Doe"

$mail->AddAddress($emailaddress,$username); 
```

对于多个电子邮件...

```
$mail->AddAddress("johndoe@domain.com");
$mail->AddAddress("johnsmith@domain.com"); 
```

或者您需要数组中的多封电子邮件...

```
foreach ($array as $value) {

$mail->AddAddress($array[$value]);

} 
```

并在满足您要求的任何循环条件下。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-09-14T16:07:11.540

此外，您可以通过 Yii::app->mailer->newMessage. 创建消息。这允许您设置电子邮件消息值。例如：

```
$emailAddresses = array(
    'to'    => array('email@blah.com','email2@blah.com'),
    'bcc'   => array('multiple emails','separated','by','commas'),
    'reply' => $replyEmail,
);

// Generate the message with appropriate fields
$message = Yii::app->mailer->newMessage; //Swift_Message::newInstance()
$message->setSubject($subject);
$message->setFrom(array($emailAddress => 'administration'));
$message->setTo( $emailAddresses['to'] );
$message->setBcc( $emailAddresses['bcc'] );
$message->setReplyTo( $emailAddresses['reply'] );
$message->setBody('<h1>'.$header.'</h1><p>'.$bodyHtml,'text/html');

//Send message
$mailer = Yii::app()->mailer->getInstance($email);

$mailer->send($message,$failures); 
```

# android - 在android中从url加载图像时出现IO异常

> ID：12257192
> 
> 赞同：0
> 
> 时间：2012-09-04T05:16:38.533
> 
> 标签：android, image, url

我正在尝试从 url 加载图像，我可以在 Imageview 中显示其中一些。我的问题是我得到

09-04 10:18:25.739: W/System.err(913): java.io.IOException: 预期为十六进制块大小，但为

在解码某些图像时无法显示相同的图像。

这是我的代码

公共类 downloadTask 扩展 AsyncTask {

```
 @Override
    protected Void doInBackground(Void... params) {
        // TODO Auto-generated method stub

        URL link = null;
        for(int i = 0; i < 5; i++)
        {
            try {
                link = new URL(url_Link[i]);

            } catch (MalformedURLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            try {
                //bm[i] = BitmapFactory.decodeStream((InputStream) link.getContent());
                bm[i] = BitmapFactory.decodeStream(link.openConnection().getInputStream());

            } catch (IOException e) {
                // TODO Auto-generated catch block
                System.out.println("entered"+e);
                e.printStackTrace();
            }

            publishProgress(i);
        }
        return null;
    }

    @Override
    protected void onProgressUpdate(Integer... values) {
        // TODO Auto-generated method stub
        iv[values[0]].setImageBitmap(bm[values[0]]);
        super.onProgressUpdate(values);
    }

} 
```

这有什么问题？

任何人都请帮忙..Thanx提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T05:21:58.137

我认为[这个](http://www.mediafire.com/?xlt6s61v14d38x7)和[这个](http://www.mediafire.com/?gv1bo5m8ewjhdyf)例子对你的帮助比我能解释的要多:) [代码是最好的文档：P]

# javascript - 可以呈现 JSON 和非转义字符串的 Express.js 模板引擎

> ID：12257195
> 
> 赞同：3
> 
> 时间：2012-09-04T05:16:55.637
> 
> 标签：javascript, json, node.js, express, template-engine

我正在寻找满足特定条件的模板引擎：

*   它可以直接渲染 JSON。例如：

这个：

`template.render("This is a json object: {{jsonObject}}", {jsonObject : {property: "string"}})`

会输出这个：

"这是一个 json 对象：{jsonObject : {property: "string"}}"

而不是这个：

“这是一个 json 对象：[对象对象]”

但是，我仍然应该能够做到这一点：

`template.render("This is a property: {{jsonObject.property}}", {jsonObject : {property: "string"}})`

得到这个：

“这是一个属性：字符串”

*   它适用于 express.js

*   它使用普通的 HTML。没有什么像haml /玉。

*   它可以呈现未转义的值，样板越少越好。

原因：我正在做一个项目，我希望有人能够创建一个 html 文档，该文档在其脚本标签内使用传入的 JSON 对象。我意识到有更简单的方法可以实现该目标，例如对象可以被字符串化，但我认为能够使用模板引擎操作该对象也会有一些好处。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-14T17:45:48.863

有“JSON模板”，但我不确定“作为快速引擎”我肯定会建议（使用）swig - [http://paularmstrong.github.io/swig/](http://paularmstrong.github.io/swig/)

作者在这里解释了它 - 它非常简单;)： [使用 swig-template 访问 json 数据](https://stackoverflow.com/questions/19283250/access-json-data-using-swig-template)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T21:15:43.670

试试[https://github.com/visionmedia/ejs](https://github.com/visionmedia/ejs)它是渲染引擎，在客户端和服务器端都可以工作

# cocoa - 有什么方法可以将代码附加到 NSTreeController / NSOutlineView 选择更改事件？

> ID：12257199
> 
> 赞同：2
> 
> 时间：2012-09-04T05:17:28.833
> 
> 标签：cocoa, nsoutlineview, nstreecontroller

我有一个简单的 NSOutlineView 绑定到一个 NSTreeController ，它提供对我的分层数据模型的访问。我想让它成为一个主/详细视图，并在某些绑定视图中显示有关所选节点的一些信息。但是，我遇到了一堆死胡同：

1) NSOutlineView 的文档是这样写的：

> > 一些委托方法尚未迁移到 NSOutlineViewDelegate 协议，包括：
> > 
> > 大纲视图SelectionDidChange：
> > 
> > 大纲视图选择变化：

...这几乎正是我想要捕获的事件。尽管文档没有注明日期，但我认为我应该将“尚未迁移”理解为“不要屏住呼吸”。

2) 将大纲视图附加到 IBOutlet 提供了一些选择事件处理 - 但仅在单击鼠标时。使用键盘光标键导航层次结构不会产生任何事件。

3) NSTreeController 似乎没有为这个非常基本的功能提供任何支持。

所以......我错过了什么吗？或者有没有比继承 NSTreeController 更简单的方法来完成这个任务？

提前致谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T05:46:53.587

你应该做更多的试验——事实上 outlineViewSelectionDidChange: 和 outlineViewSelectionIsChanging: 现在都在工作（至少在 OSX 10.8 中）。如果你使用的任何版本的 OS X 没有这些委托方法，你仍然可以添加一个观察者来获取通知——它们从 10.0 开始就存在了

# big-o - 这个函数的计算复杂度是多少？

> ID：12257204
> 
> 赞同：0
> 
> 时间：2012-09-04T05:17:43.767
> 
> 标签：big-o, asymptotic-complexity

我想知道这个函数的计算复杂度是多少？

> 2^(log(n)-1)

日志以 2 为底。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T05:21:39.580

这取决于使用什么算法来计算所有对数和幂。如果您足够聪明地注意到这个函数本质上是除以 2，那么您可以`O(1)`通过右移来在常数时间内（即 ）为整数实现它。

# maven - 编译的类与 maven 目标“编译”不同，并在目标文件夹中自动生成

> ID：12257205
> 
> 赞同：1
> 
> 时间：2012-09-04T05:17:58.960
> 
> 标签：maven, maven-compiler-plugin

在 Spring3+Maven+Tomcat6 Web 项目中..

我尝试在 REST api Controller 中使用相同的 RequestMapping。
因为..我需要不同用途的不同战争。

所以，我生成了同名控制器，但不同的包。
例如...
1\. xxx.controller.agent.UserController
2\. xxx.controller.console.UserController

在 pom.xml..
1\. maven -> build(war:war) -> get console.war include xxx.controller.agent.UserController
2\. 取消注释 testExcludes 中
的注释行并排除 3\. 注释 testExcludes 中未注释的行并排除
4\. maven -> 更新项目配置
5\. maven -> build (war:war) -> get agent war include xxx.controller.console.UserController

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <configuration>
        <testExcludes>
            <exclude>com/test/store/controller/agent/*.java</exclude>
            <exclude>com/test/rbac/controller/agent/*.java</exclude>
            <!-- <exclude>com/test/store/controller/console/*.java</exclude>
            <exclude>com/test/rbac/controller/console/*.java</exclude> -->
        </testExcludes>
        <excludes>
            <exclude>com/test/store/controller/agent/*Controller.java</exclude>
            <exclude>com/test/rbac/controller/agent/*Controller.java</exclude>                      
            <!-- <exclude>com/test/store/controller/console/*Controller.java</exclude>
            <exclude>com/test/rbac/controller/console/*Controller.java</exclude> -->
        </excludes>
        <source>1.6</source>
        <target>1.6</target>
    </configuration>
</plugin> 
```

但是，我不想为每个战争版本编辑 pom.xml。我尝试使用 Maven 配置文件元素构建每个战争文件。所以，我编辑了我的 pom.xml，如下所示..

```
<properties>
<exclude.console.store>com/test/store/controller/agent/**</exclude.console.store>
<exclude.console.rbac>com/test/rbac/controller/agent/**</exclude.console.rbac>
<exclude.agent.store>com/test/store/controller/console/**</exclude.agent.store>
<exclude.agent.rbac>com/test/rbac/controller/console/**</exclude.agent.rbac>
</properties>
...
<profiles>
    <profile>
        <id>console</id>
        <build>
            <plugins>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-war-plugin</artifactId>
                    <version>2.2</version>
                    <configuration>
                        <packagingExcludes>
                            WEB-INF/classes/${exclude.console.store},
                            WEB-INF/classes/${exclude.console.rbac}
                        </packagingExcludes>
                    </configuration>
                </plugin>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-compiler-plugin</artifactId>
                    <configuration>
                        <testExcludes>
                            <exclude>${exclude.console.store}</exclude>
                            <exclude>${exclude.console.rbac}</exclude>                      
                        </testExcludes>
                        <excludes>
                            <exclude>${exclude.console.store}</exclude>
                            <exclude>${exclude.console.rbac}</exclude>                      
                        </excludes>
                        <source>1.6</source>
                        <target>1.6</target>
                        <encoding>UTF-8</encoding>
                    </configuration>
                </plugin>
            </plugins>
        </build>    
    </profile>

    <profile>
        <id>agent</id>
        <build>
            <plugins>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-war-plugin</artifactId>
                    <version>2.2</version>
                    <configuration>
                        <packagingExcludes>
                            WEB-INF/classes/${exclude.agent.store},
                            WEB-INF/classes/${exclude.agent.rbac},
                            WEB-INF/classes/spring/task.xml
                        </packagingExcludes>
                    </configuration>
                </plugin>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-compiler-plugin</artifactId>
                    <configuration>
                        <testExcludes>
                            <exclude>${exclude.agent.store}</exclude>
                            <exclude>${exclude.agent.rbac}</exclude>                        
                        </testExcludes>
                        <excludes>
                            <exclude>${exclude.agent.store}</exclude>
                            <exclude>${exclude.agent.rbac}</exclude>                        
                        </excludes>
                        <source>1.6</source>
                        <target>1.6</target>
                        <encoding>UTF-8</encoding>
                    </configuration>
                </plugin>
            </plugins>
        </build>    
    </profile>
</profiles> 
```

和 Maven 构建..（goal="package" 或 "compile war:war", profile="console" 或 "agent" 在每种情况下）
构建成功..（无编译错误）但战争异常。
我将war文件复制到tomcat webapp目录，并执行startup.bat文件。
在控制台日志中..发生了很多错误。
也许我认为 maven compile 有一些问题。
我解压了每个构建方法的war文件（使用配置文件和旧方法）。
但是，类文件的数量不同......

感谢您的帮助，非常感谢！

# sql - show-csv 在 Aviarc 中没有返回任何结果

> ID：12257208
> 
> 赞同：2
> 
> 时间：2012-09-04T05:18:20.660
> 
> 标签：sql, aviarc

我正在使用 show-csv 向用户提供报告结果。当我直接对数据库运行此查询时，它会返回正确的结果：

```
SELECT *
FROM ticket
WHERE date_raised >= '2011-01-01'
AND date_raised <= '2011-06-30'
AND severity = 3
ORDER BY problem_no 
```

但是当根据参数运行查询时，它会执行并给我一个没有结果的文件：

```
<show-csv query="get-range-csv" filename="{$query.filename}">
    <param name="start-date" value="{$query.start-date}" />
    <param name="end-date" value="{$query.end-date}" />
    <param name="severity" value="{$query.severity}" />
</show-csv>

SELECT *
FROM ticket
WHERE date_raised >= {$start-date}
AND date_raised <= {$end-date}
AND severity = {$severity}
ORDER BY problem_no 
```

相关屏幕代码：

```
<container position="relative" height="46">
    <container left="0">
        <text-static left="0" width="80" text="Start date:" />
        <date-select field="query.start_date" left="80" />
    </container>
    <container left="210">
        <text-static left="0" width="70" text="End date:" />
        <date-select field="query.end_date" left="70" />
    </container>
</container> 
```

任何想法为什么我没有得到任何结果？

我已经通过调试器运行了它，并且在运行时正确设置了查询数据集变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T05:19:33.233

看起来问题是屏幕使用 start_date 和 end_date（带下划线），而 show-csv 命令使用 start-date 和 end-date（带破折号）。

# java - 如何使用弹簧表单标签将复选框选择的选项放在列表中

> ID：12257215
> 
> 赞同：0
> 
> 时间：2012-09-04T05:19:04.077
> 
> 标签：java, forms, spring, jsp, tags

再会。

我有一个名为 Group 的类，它由一个列表组成。

```
<c:forEach items="${group.accounts}" var="data">
        <div class="account-no-list">
            <form:checkbox name="account-no-checkbox" value="${data.accountNumber}" path="accounts"/> 
            <span>${data.accountNumber}</span>
        </div>
        <div class="clear"><!--  --></div>
</c:forEach> 
```

上面的代码是我试图将复选框中的选定选项放到组内的列表中，但它不起作用。

任何帮助表示赞赏。感谢堆栈溢出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T08:50:26.750

我认为您需要使用“已检查”属性而不是值。为此，您可以使用 EL

像这样：

```
<form:checkbox name="account-no-checkbox" value="" checked="${data.accountNumber eq true ? 'true' : 'false'}" /> 
```

# javascript - 带有 IE 的画布无法正常工作

> ID：12257217
> 
> 赞同：0
> 
> 时间：2012-09-04T05:19:08.413
> 
> 标签：javascript, html, internet-explorer-9

互联网上是否有任何支持 IE 的特定画布可用。我想在画布上画一些东西并将其保存为图像。我有几个画布，但是当我尝试在 IE9 上工作时它失败了。帮助真的很感激！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T05:32:25.913

IE9 支持“画布”，但某些 API 的实现可能不可用。

*   您可以从以下[链接](http://risingtrends.com/blog/learning-html5-canvas-through-jsfiddle-examples/)访问示例。

*   另外，请注意 HTML5/canvas
    的一些规范仍在草稿中。

*   请参阅[此](http://en.wikipedia.org/wiki/Canvas_element)内容以了解各种浏览器如何支持“画布”。

*   “caniuse.com”是检查兼容性[caniuse
    画布的好地方](http://caniuse.com/#search=canvas)

# c# - 如何实现一个可编辑的 UITableView，类似于 Safari 书签？

> ID：12257220
> 
> 赞同：1
> 
> 时间：2012-09-04T05:19:43.000
> 
> 标签：c#, ios, uitableview, xamarin.ios, xamarin

我正在尝试实现一个非常类似于 Mobile Safari 中的书签视图的列表。单击编辑时，您将获得以下信息：

![在此处输入图像描述](../Images/7e00fefdb6e41b90c4f45f9a394cbc0e.png)

在此屏幕中，您可以删除项目并更改其属性（通过右侧的 DisclosureIndicator）。我按照 Xamarin 的[教程](http://docs.xamarin.com/ios/tutorials/Working_with_Tables_and_Cells/Part_4_-_Editing)进行操作，但是当表格处于编辑模式时，我无法确切知道如何添加 DisclosureIndicator。我将在 ObjC 或 C# 中采用解决方案。

我在这里错过了一些简单的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:57:37.063

在 iOS 中，这是通过以下方法完成的：

```
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath {
    return YES;
}

- (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath {
    return NO;
}

- (UITableViewCellEditingStyle)tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath {
    return UITableViewCellEditingStyleDelete;
}

- (void) setEditing:(BOOL)editing animated:(BOOL)animated {
    [super setEditing: editing animated: animated];
    [self.tableView setEditing:editing animated:animated];
}

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {

    if (editingStyle == UITableViewCellEditingStyleDelete) {
             //delete rows
    }
} 
```

公开指示器是电池附件。您可以在`cellForRowAtIndexPath`方法中设置它。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }

    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-07T09:14:43.733

利用

```
cell.Accessory = UITableViewCellAccessory.DisclosureIndicator; 
```

在 GetCell 方法中

# android - 将标题添加到android中的多列列表视图

> ID：12257221
> 
> 赞同：0
> 
> 时间：2012-09-04T05:20:10.973
> 
> 标签：android, xml, listview

我在这个论坛中尝试了以下问题 [在 Listview 中添加标题](https://stackoverflow.com/questions/3110949/how-to-add-header-to-multicolumn-listview)

但问题是一样的，我使用了一个线性布局，它有三个文本视图作为我的多列列表视图的标题，但问题是这些列没有在标题下对齐自己如何为多列列表视图的每一列提供单独的标题

或者

是否有支持列标题的多列列表的开源实现？提前致谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T06:07:04.283

考虑使用[ExpandableListView](http://developer.android.com/reference/android/widget/ExpandableListView.html)。

*   当您在列表视图中处理“部分”时，它提供了许多方便的方法。

# database - 我已在 vm ware 虚拟机中安装了进度数据库，但无法从主机连接

> ID：12257223
> 
> 赞同：0
> 
> 时间：2012-09-04T05:20:19.793
> 
> 标签：database, vmware, openedge, database-connectivity, progress-db

我已经在我的 vmware linux 机器上安装了进度 opensge 数据库，但我无法通过主机 winodws 7 登录。我尝试使用 datadirect 和 opensge 数据管理工具。甚至可以请指导我如何做到这一点。我的 connectiong 正在从 windows 工作到 vm ware linux。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T18:05:41.807

您可以从您的 Linux 环境中进行连接吗？IOW——这行得通吗：

```
proenv> sqlexp -db DBNAME -S PORT# -user USERNAME -password PASSWORD 
```

如果这不起作用，那么您是否尝试从 Windows7 连接并不重要。

# sql-server-2008 - 如何将表数据从 sql server 2008 复制到 sql server 2005 db？

> ID：12257226
> 
> 赞同：0
> 
> 时间：2012-09-04T05:20:36.133
> 
> 标签：sql-server-2008, sql-server-2005

有谁知道如何将数据从 sql server 2008 db 复制到 sql server 2005 db？我尝试使用 sql server 导出向导无济于事:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T05:36:05.430

这是一个教程链接，该教程将引导您为包含数据的表生成脚本。这有利于一次性操作。

[使用数据遍历脚本表](http://blog.sqlauthority.com/2009/07/29/sql-server-2008-copy-database-with-data-generate-t-sql-for-inserting-data-from-one-table-to-another-table/)

...当您有许多需要编写脚本的表时，这非常有用，但要注意 2GB 的限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T06:23:50.020

试试这个：

1.如果两个服务器在同一个网络中，创建链接服务器并使用 select * into tblename from servername.dbname.dob.tblname

2.或者你可以使用SSIS来传输数据

3.使用sql server的导出向导

# java - 什么可能导致并行 Java 程序的运行时间在运行之间存在很大差异？

> ID：12257230
> 
> 赞同：1
> 
> 时间：2012-09-04T05:21:08.383
> 
> 标签：java, multithreading, performance, optimization, parallel-processing

我知道有很多因素会影响 Java 程序的运行时间。我试图消除其中的一些，包括：

*   热身跑被考虑但不计算在内。
*   `System.gc()`在任意两次运行之间调用。

但我发现数据仍然有很大差异。这是使用 10 个线程时的示例：

```
157th run
0 run time: 9106171
1 run time: 9084652
2 run time: 8990820
3 run time: 8989474
5 run time: 9062850
4 run time: 9302010
9 run time: 9454475
8 run time: 9506585
7 run time: 9494990
6 run time: 9491779
total time: 31 ms

158th run
2 run time: 14754858
5 run time: 14865035
0 run time: 15759180
1 run time: 15988056
3 run time: 16660592
8 run time: 16340240
9 run time: 16544479
6 run time: 17280122
7 run time: 17249778
4 run time: 18026322
total time: 19 ms 
```

我发现对于大多数运行，它们花费了大约 17~20 毫秒，但对于 <5% 的运行，它们花费了大约 25~31 毫秒。更有趣的是，在后面的情况下，每个线程的运行时间更**短**了！

这个程序中的主线程只有线程`start()`，`join()`没有更多的工作要做。

谁能提供一些想法/提示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T07:18:49.823

我注意到您正在启动和停止线程。由于测试时间很短，这些线程只有时间分配给一个（或少数）CPU 安排。这种安排可能意味着更多的线程同时运行，但使用超线程，一个核心的两个 cpu 都被使用。发生这种情况时，每个线程都会减慢（因为它必须共享一个内核、缓存等），但吞吐量会随着线程上下文切换的减少和内核的更有效使用而增加。在另一种安排中，每个核心可能只有一个 cpu 繁忙，这意味着每个线程更快，但总运行时间更长。

我会尝试使用 ExecutorService，使用与 cpus（或多个）相同数量的任务并重新使用线程。这将使您在运行之间更加一致，并且操作系统将有时间以更有效的方式放置您的线程。

我编写了一个库，它允许您将线程分配给不同的 cpu 布局。例如共享或不共享内核。[https://github.com/peter-lawrey/Java-Thread-Affinity](https://github.com/peter-lawrey/Java-Thread-Affinity)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T06:12:35.053

假设在第 157 次运行中，所有线程都在一个核心上运行。瓶颈只是他们像排队一样等待对方。每个人的运行速度都很快，因为他们对内存资源拥有唯一的控制权，但总的来说，速度很慢，因为他们都排着队等待轮到自己。

假设第 158 次运行分布在多个内核上。所有人都会同时竞争内存/缓存资源，因此每个线程单独花费​​的时间更长。但是因为他们都在同一时间工作，所以这个过程通常完成得更快。

为了检验这个假设，在运行之间重用一个线程池，并以一种或另一种方式手动设置它们的亲和性。

这只是一种可能的解释，可能还有其他因素，这都是非常不确定的。例如，您的操作系统可能同时安排了一些其他程序（例如 cron 作业）。

# spring - Apache Extras Cassandra-JDBC 的 Bean 配置

> ID：12257231
> 
> 赞同：2
> 
> 时间：2012-09-04T05:21:10.627
> 
> 标签：spring, jdbc, cassandra, javabeans

我浏览了他们的网站[http://code.google.com/a/apache-extras.org/p/cassandra-jdbc/](http://code.google.com/a/apache-extras.org/p/cassandra-jdbc/)但找不到任何用于配置数据源 bean 的文档，例如

```
 <spring:bean id="mySqlDataSource"
         class="com.mysql.jdbc.jdbc2.optional.MysqlXADataSource">
         <spring:property name="url"
              value="jdbc:mysql://${mysql.host}:${mysql.port}/${mysql.database}?user=${mysql.user}&amp;password=${mysql.pwd}" />
    </spring:bean> 
```

是否有任何文档，或者有人知道如何编写文档吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T05:49:09.470

CassandraDataSource 似乎没有默认构造函数，因此您需要传入所有内容：

```
<spring:bean id="cassDataSource"
     class="org.apache.cassandra.cql.jdbc.CassandraDataSource">
     <constructor-arg value="host">
     <constructor-arg type="int" value="port">
     <constructor-arg value="keyspace">
     <constructor-arg value="user">
     <constructor-arg value="password">
     <constructor-arg value="version">
</spring:bean> 
```

（我没有对此进行测试，但这基本上是您需要做的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-13T13:51:41.087

我在谷歌上找到了这个，信息有点过时了，所以我想我会更新它。论据已经改变。我发现找出它所期望的参数的最好方法是使用源代码，您可以使用以下地址从 GitHub 下载它：

[https://code.google.com/a/apache-extras.org/p/cassandra-jdbc/source/browse/src/main/java/org/apache/cassandra/cql/jdbc/CassandraDataSource.java?name= v1.2.5](https://code.google.com/a/apache-extras.org/p/cassandra-jdbc/source/browse/src/main/java/org/apache/cassandra/cql/jdbc/CassandraDataSource.java?name=v1.2.5)

该页面上有一个选择器，您可以在其中选择下载的版本号（该链接将您带到 1.2.5）。您需要满足所有构造函数参数。

# asp.net-mvc-4 - 使用 simplemembership 的新 MVC 4 Internet 模板中基于角色的身份验证

> ID：12257232
> 
> 赞同：53
> 
> 时间：2012-09-04T05:21:11.520
> 
> 标签：asp.net-mvc-4, roles, simplemembership

我喜欢 MVC 4 互联网模板中新的 simplemembership 功能，其中包含指向 VS 2012 RTM 中外部登录的 OAuth 的链接。大多数情况下，身份验证功能都在工作。但是，即使在此花费了 8 多个小时后，我也无法实施基于角色的授权来在我的控制器上工作。事实证明，SimpleMembership 绝非简单。

我搜索了 stackoverflow，谷歌搜索并阅读了[John Galloway](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx)的最新文章，尝试了许多建议，但仍然无法解决这个问题。这一切都始于出现 Sql 连接错误，并且无法弄清楚为什么连接字符串和其他一切都很好。花了好几个小时才弄清楚是 Roles 类导致了问题。

控制器上的 [Authorize] 属性与以前一样用于基本身份验证。但是每当我尝试使用角色时，它都会出现 sql 连接错误（因为它会恢复为旧的 DefaultRolesProvider，它试图连接到默认的 SqlExpress aspnetdb 文件并失败）。所以像：

```
[Authorize(Roles="admin")] 
```

不起作用。如果我回到旧的 asp.net 会员提供程序，它会起作用，但是我会丢失简单的数据库表、基于令牌的确认和恢复、更安全的密码散列以及更重要的是通过 OAuth 进行的外部登录。

在代码和剃刀视图中唯一有效的是

```
User.IsInRole("admin") 
```

这对于菜单项等来说是可以的，但是在控制器中的每个动作中实现非常麻烦（而且我不喜欢它一次只测试一个角色）。

我将非常感谢任何解决此问题的指导。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-09-04T16:12:11.727

[在这里找到了 Mehdi Golchin](https://stackoverflow.com/questions/12254701/simplemembershipprovider-not-working?rq=1)的答案，似乎可以解决：

```
[Authorize(Roles="admin,editor,publisher")] 
```

如果我也将它添加到家庭控制器：

```
 [InitializeSimpleMembership] 
```

因为此属性位于 Accounts 控制器上，所以 SimpleMembership 数据库仅在第一次使用帐户控制器（如登录/注册）后才会初始化。即使当前用户从 cookie 登录，数据库也不会初始化，因此会引发错误。一种解决方案是将此属性放在我启动网站时调用的主控制器上。但是，它需要放置在每个控制器上，因为我检查角色并根据角色显示不同的菜单项。

这是一个糟糕的设计，因为数据库应该在 App_Start 上初始化，而不是在第一次使用时初始化。

我确实尝试过

```
WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", "UserId", "UserName", autoCreateTables: true); 
```

在 中`Global.asax` `Application_Start()`，它使用 来处理菜单项中的角色检查`User.IsInRole("admin")`，但随后在任何具有属性的控制器中抛出错误`[Authorize(Roles="admin")]`，即使应用了附加属性`[InitializeSimpleMembership]`也是如此。

因此，现在的解决方案是将 `[InitializeSimpleMembership] 放在所有控制器上，因为用户最初可能会使用外部链接登陆任何页面。

它仍然不知道如何初始化 SimpleRolesProvider 类来做更多的角色管理，而不仅仅是`User.IsInRole()`.

这些东西在 webmatrix 网页站点中效果更好，显然 MVC 端口并不完整。它与默认的 asp.net 会员提供程序发生冲突并混淆。

**编辑** 好的我不认为`[InitializeSimpleMembership]`可以通过将此行放在`FilterConfig.cs`App_Start 文件夹中来全局应用过滤器：

```
filters.Add(new InitializeSimpleMembershipAttribute()); 
```

这可以解决这个问题。现在需要一个 SimpleRolesProvider 初始化的解决方案，否则我将不得不编写自己的角色提供程序。

## **更新：**

[Scott Allen 的](http://odetocode.com/Blogs/scott/archive/2012/08/31/seeding-membership-amp-roles-in-asp-net-mvc-4.aspx)这篇文章解决了我所有的问题。

通过将其包含在 web.config 中：

```
<roleManager enabled="true" defaultProvider="simple">
  <providers>
    <clear/>
    <add name="simple" type="WebMatrix.WebData.SimpleRoleProvider,               WebMatrix.WebData"/>
  </providers>      
</roleManager>
<membership defaultProvider="simple">
  <providers>
    <clear/>
    <add name="simple" type="WebMatrix.WebData.SimpleMembershipProvider,                          WebMatrix.WebData"/>
  </providers>
</membership> 
```

Roles 和 Membership 类的所有方法都可用，并且可以在代码中初始化，如下所示：

```
var roles = (SimpleRoleProvider) Roles.Provider;
var membership = (SimpleMembershipProvider) Membership.Provider; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-28T15:30:39.663

当我将我的 Web 应用程序从 VS2010/MVC3 移动到 VS2012/MVC4 时遇到了同样的问题。

并且无法让 [InitializeSimpleMembership] 工作。

发现将其添加到您的 web.config 可以解决问题：

```
 <appSettings>
    <add key="enableSimpleMembership" value="false" />
  </appSettings> 
```

一切都像以前一样正常。

# sql-server - 根据条件更改从子句

> ID：12257234
> 
> 赞同：1
> 
> 时间：2012-09-04T05:21:27.047
> 
> 标签：sql-server, sql-server-2005

我有一个包含 2000 多行代码的存储过程。我需要`from clause`根据条件更改表名。两个表中的列名将保持不变。

例如：-

```
 Declare @condition char(1)
   set @condition=(Select close_flg from log 
                   where  last_run_dt >= 
                  (Select  cur_dt from dt) 
                  )

  --If @condition is 'A' then below sql will execute

   Select a.columnA,
        Case 
         when  @condition='A' then  'D'
         Else 'M'
         END,
         b.ColumnC
   from TableA as a
   inner join TableB as b
   on a.Column=b.Column 
```

现在如果@condition 是'B'，那么我需要将sql更改为（只有内部连接不同，其余选择查询中的所有列都相同）

```
 Select 
   -- the same columns as above 
   from TableC as c
   inner join TableD as d
   on c.Column=d.Column 
```

我想让我的 SQL 通用以减少重复代码。是否有可能这样做。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T05:28:57.257

您可以对您的场景使用动态查询，如下所示：

```
DECLARE @sqlCommand varchar(1000)
DECLARE @TableName varchar(75)

--If @condition is 'A' then 
Set @TableName = 'your table name'
--else
Set @TableName = 'your other table name'

SET @sqlCommand = 'select * from '+@TableName
EXEC (@sqlCommand) 
```

现在根据您的场景转换上述技术。

# java - Java 如何确定“file.encoding”系统属性？

> ID：12257235
> 
> 赞同：10
> 
> 时间：2012-09-04T05:21:28.863
> 
> 标签：java, encoding, locale

我认为 Java 通过系统语言环境确定“file.encoding”系统属性。

但在我的系统中，系统区域设置为“ko_kr.UTF-8”，“file.encoding”为“ANSI_X3.4-1968”。

Java 如何确定“file.encoding”系统属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:53:17.943

来自以下链接的本机代码填充属性（适用于 solaris、Linux 操作系统）

在本机方法加载系统属性下方。

```
private static native Properties initProperties(Properties props); 
```

下面的链接是加载属性的本机代码链接（在第 187 行之后）

[设置java属性的源码](http://hg.openjdk.java.net/jdk6/jdk6/jdk/file/b3f231f73076/src/solaris/native/java/lang/java_props_md.c)

# sql - 需要有关 SELECT DISTINCT 查询的帮助

> ID：12257237
> 
> 赞同：3
> 
> 时间：2012-09-04T05:21:47.693
> 
> 标签：sql, firebird

我正在使用 Firebird 2.1 来执行这个查询：

```
SELECT DISTINCT INVOICES.INVNO,INVOICES.DEPNO,INVOICES.INVN,INVOICES.CONTNO,SYSPROF.NAME
FROM INVOICES
LEFT JOIN INVSPEC ON (INVOICES.INVNO = INVSPEC.INVNO) AND (INVOICES.DEPNO = INVSPEC.DEPNO)
LEFT JOIN SYSPROF ON (INVSPEC.SYSNO = SYSPROF.SYSNO) WHERE
(INVOICES.INVNO = 17 AND INVOICES.DEPNO = 6555)
OR(INVOICES.INVNO = 16 AND INVOICES.DEPNO = 6555); 
```

它返回给我这些记录：

![在此处输入图像描述](../Images/d297d75ad902be8c4f02a0b27cb59a15.png)

请帮助我构建一个将返回这些记录的查询：

![在此处输入图像描述](../Images/f41761b7e0960740fbab8880249b1349.png)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T05:28:28.100

例如：

```
SELECT INVOICES.INVNO,min(INVOICES.DEPNO),min(INVOICES.INVN),min(INVOICES.CONTNO),min(SYSPROF.NAME)
FROM INVOICES
LEFT JOIN INVSPEC ON (INVOICES.INVNO = INVSPEC.INVNO) AND (INVOICES.DEPNO = INVSPEC.DEPNO)
LEFT JOIN SYSPROF ON (INVSPEC.SYSNO = SYSPROF.SYSNO) WHERE
(INVOICES.INVNO = 17 AND INVOICES.DEPNO = 6555)
OR(INVOICES.INVNO = 16 AND INVOICES.DEPNO = 6555);
GROUP BY INVOICES.INVNO 
```

此查询为每张发票返回一行，并从 sysprof 中获取任何名称。

# cordova - 为 jquery mobile 修改内部 anology

> ID：12257241
> 
> 赞同：3
> 
> 时间：2012-09-04T05:22:31.983
> 
> 标签：cordova, jquery-mobile, jquery

我们如何在 jquery mobile 中实现内部事件行为的修饰。

我希望它的行为与本机 ios 按钮完全一样。我们可以点击并按住点击并在按钮内移动手指**事件只有在我在按钮内释放时才会触发。如果我在外面释放，请取消**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T06:53:28.473

jQuery Mobile 启用了几个新的触摸事件类别：

**tap：** 一个点击事件，当用户点击一个元素时触发

**taphold：** 点击并按住事件，当用户点击并按住元素大约第二次滑动时触发滑动事件，当用户垂直（20 或更少像素）或水平（30 或更多像素）滑动时触发

**swipeleft：** 向左滑动，当用户向左滑动 30 或更多像素时触发

**swiperight：** 向右滑动，当用户向右滑动 30 或更多像素时触发所有这些事件都可以使用常用的 jQuery 绑定、实时或委托方法绑定到元素。

如何使用这些触摸事件。

```
<script>
$("ul").delegate("li", "swiperight", function() {
// The user has swiped to the right on a list view item. Show an edit menu.
$(this).find(".menu-edit").show();
})
</script> 
```

# jquery - 为什么我的 jquery 在我添加时不起作用 标签？

> ID：12257246
> 
> 赞同：0
> 
> 时间：2012-09-04T05:23:25.127
> 
> 标签：jquery

我有一个简单的表单，它在打开和关闭时显示动画：

```
<html><head><style type="text/css">
#contactFormContainer
            {
                width:300px;
                margin-top:15px;
            }
            #contactForm
            {
                margin-top:15px;
                width:300px;
                border:solid 1px #4d3a24;
                display:none;
            }
            #contactForm fieldset
            {
                padding:20px;
                border:none;
            }      
            #contactForm label
            {
                display:block;
            }      
            #contactForm input[type=text]
            {
                display:block;
                border:solid 1px #4d3a24;
                width:100%;
                margin-bottom:10px;
                height:24px;
            }  
            #contactForm textarea
            {
                display:block;
                border:solid 1px #4d3a24;
                width:100%;
                margin-bottom:10px;
            }  
            #contactForm input[type=submit]
            {
                background-color:#4d3a24;
                border:solid 1px #23150c;
                color:#FFFFFF;
                padding:5px;
                cursor:pointer;
                float: right;
            }                
            #contactLink
            {
                height:15px;
                width:218px;
                background-image:url('../images/signup.png');
                cursor:pointer;
            }
            #messageSent
            {
                color:#bc0d1b;
                display:none;
            }
</style>
<script src="jquery-1.8.1.min.js" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function(){

    $("#contactLink").click(function(){
        if ($("#contactForm").is(":hidden")){
            $("#contactForm").slideDown("slow");
        }else{
            $("#contactForm").slideUp("slow");
        }
    });

});

function closeForm(){
    $("#messageSent").show("slow");
    setTimeout('$("#messageSent").hide();$("#contactForm").slideUp("slow")', 2000);
}
</script>

</head><body>

    <div id="contactFormContainer">
        <div id="contactLink"></div>
        <div id="contactForm">
            <form action="test2.php" enctype="multipart/form-data" method="post">
            <fieldset>
                <label for="name">Name *</label>
                <input id="name" type="text" name="name" />
                <label for="email">Email address *</label>
                <input id="email" type="text" name="email" />
                <input id="sendMail" type="submit" name="signupSubmit" />
                <span id="messageSent"></span>
            </fieldset>
            </form>
        </div>
    </div>

</body>
</html> 
```

问题是，如果我`<form action="test2.php" enctype="multipart/form-data" method="post">`在第一个字段集上方添加 - 然后关闭表单......我的关闭动画不再起作用。

**TL;博士**

1.  我单击提交，表单以漂亮的动画关闭
2.  我添加了一个`<form>`标签，以便我可以处理 POST
3.  结束动画不再有效

为什么，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T05:29:49.783

当您有一个表单时，按下按钮会被转换为表单提交，而不是 onclick。您需要像这样拦截表单提交事件：

```
$("form").submit(function(event) { do animation here } ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T05:59:51.257

Freenode 的#jquery 频道中的冷头回答如下：http: [//jsfiddle.net/d9AfJ/7/](http://jsfiddle.net/d9AfJ/7/)

# ios - 将核心数据对象保存在多个商店中

> ID：12257247
> 
> 赞同：0
> 
> 时间：2012-09-04T05:23:37.537
> 
> 标签：ios, core-data, synchronization, nspersistentstore

我正在使用 Core Data 开发一个 iOS 应用程序。我想让持久存储位于共享位置，例如网络驱动器，以便多个用户可以处理数据（在不同的时间，即并发不是问题的一部分）。

但我也想提供“离线”处理数据的能力，即通过在 iPad 上保留一个本地持久存储。到目前为止，我读到我可以通过使用持久存储协调器的迁移功能在某种程度上做到这一点，但这似乎意味着旧存储随后失效。此外，我不一定要移动整个商店“离线”，而只是移动其中的一部分：使用 Apple 提供的简单“公司部门”示例，我希望用户能够检查一个部门，同时与该部门关联的所有员工（以及与每个员工关联的所有属性）。然后，用户可以在他们的 iPad 上本地处理部门数据，一段时间后，将这些更改同步回服务器的持久存储。

因此，我需要将核心数据对象从一个存储复制到另一个存储，以及通过关系引用的所有对象。并且这个复制过程还需要确保如果目标持久存储中已经存在一个对象，它会被覆盖而不是添加到存储中的新对象（我已经为每个对象提供了一个 UID 出于另一个原因，所以我可能能够重新使用 UID）。

到目前为止，我所看到的似乎没有简单的方法来同步或复制 Core Data 持久存储，这是一个公平的评估吗？

那么我真的需要编写一段代码来执行以下操作：

*   通过 MOC 检索对象“A”
*   在所有实体中检索与对象“A”有关系的所有对象
*   为目标持久存储实例化一个新的 MOC
*   对于检索到的每个对象，检查目标存储是否存在该对象
*   如果对象存在，则使用在步骤 1 和 2 中检索到的对象的属性覆盖它
*   如果对象不存在，则创建它并根据在步骤 1 和 2 中检索到的对象设置所有属性

虽然这不是世界上最复杂的事情，但我仍然认为“在线/离线编辑”的这种要求足够普遍，以至于某些标准功能可用于同步部分持久性存储？

非常感谢您的观点，谢谢，da_h-man

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T14:17:42.773

从我目前所见，我认为最好的方法是[RestKit](http://restkit.org)。它提供了一个核心数据包装器，它使用 JSON 在远程和本地存储之间移动数据。我还没有完全尝试过，但从文档中读取的内容来看，它听起来非常强大并且非常适合我的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-14T11:14:50.633

你绝对应该检查这些事情：

**Parse.com** - 基于云的数据存储

**PFIncrementalStore** [https://github.com/sbonami/PFIncrementalStore](https://github.com/sbonami/PFIncrementalStore) - NSIncrementalStore 的子类，它允许您的 Persistent Store Coordinator 同时在本地和远程（在 Parse Cloud 上）存储数据

所有这些东西都有据可查。Parse.com 还将发布 iOS 本地数据存储 SDK [http://blog.parse.com/2014/04/30/take-your-app-offline-with-parse-local-datastore/](http://blog.parse.com/2014/04/30/take-your-app-offline-with-parse-local-datastore/)这将有助于保持您的数据已同步。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T07:26:25.287

我对上面的评论只是半开玩笑。您确实在描述一个非常困难的问题 - 很难确定这种同步，而且在任何开发环境中，很少有会成为“正常工作”的交钥匙解决方案。我认为您上面的伪代码描述非常准确地描述了您需要做什么。尽管可以概括一些遍历关系和检查现有对象的工作，但您谈论的是一些潜在复杂的异常处理情况 - 例如，如果更新一个对象，并且只有 5 个相关对象中的 1 个在某种程度上已过时，您是丢弃更新还是应用部分更新？您说“并发”不是问题的一部分，但是如果多个用户可以“签出”

需要检查的是 Core Data 中用于利用 iCloud 的新功能 - 我怀疑这会帮助解决您的问题，但它通常是相关的。

既然你想带着你的数据上网，另一件要考虑的事情是 Core Data 是否适合你的问题。由于 Core Data 在很大程度上是一种旨在支持 UI 和 MVC 模式的技术，如果您的数据需求不是特别绑定到 UI，您可能会考虑另一种类型的 DB 解决方案。

如果您实际上以超越建模的重要方式利用 Core Data，在驱动您的 UI 方面，并且您想坚持使用它，我认为您的分析是正确的：您将不得不推出自己的解决方案. 我认为构建和测试将是一件不平凡的事情。

可以考虑的一个选项是 CouchDB 和一个称为 TouchDB 的 iOS 实现。这意味着对您的问题采用更多面向文档（JSON）的方法，根据您所描述的内容，这实际上可能是合适的。

# bash - bash 历史 CTRL+R 行为

> ID：12257248
> 
> 赞同：4
> 
> 时间：2012-09-04T05:23:39.727
> 
> 标签：bash, bash-completion

有时我尝试通过`CTRL`+搜索某些命令`R`但没有找到，而我最近使用它或通过`CTRL`+搜索`R`成功。

在我运行“历史”之后，我能够再次找到该命令。

这种行为正常吗？如何改变？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T06:26:54.873

`Ctrl`+*从历史中的当前位置*`R`向后搜索，所以如果你已经移动了那个位置，你会错过最后的部分。

 *例如：

```
themel@kallisti: ~ $ foob
bash: foob: command not found
themel@kallisti: ~ $ barz
bash: barz: command not found
themel@kallisti: ~ $ barq
bash: barq: command not found
themel@kallisti: ~ $ quarg
bash: quarg: command not found 
```

Ctrl+R,bar 产生：

```
(reverse-i-search)`bar': barq 
```

但也会*移动到历史上的那个点*- 如果您随后执行 Ctrl+R 并搜索`quarg`，您将找不到它。这可以通过使用`end-of-history`（M-> 默认情况下）重新设置索引来修复。*

# selenium - Capybara 规范在单独运行时通过，但在作为套件的一部分运行失败时失败

> ID：12257249
> 
> 赞同：2
> 
> 时间：2012-09-04T05:23:53.790
> 
> 标签：selenium, capybara, rspec2, poltergeist

任何人都知道为什么请求规范在运行时从不通过`bundle exec rspec spec`但在直接运行时通过的任何特殊原因`bundle exec rspec spec/requests/models_spec.rb`？

我已经在 selenium 和 poltergeist 中尝试过规范，但得到了相同的结果。当我运行整个测试套件时，规范失败，当我单独运行它时，它通过了。

我有一个关于模型规范的相关问题[为什么 RSpec 会报告同一类型的多个验证错误？](https://stackoverflow.com/questions/12254501/why-would-rspec-report-multiple-validation-errors-of-the-same-type)这可能是相关的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:22:14.833

有趣但简单。线程似乎已经交织在一起，一个应该说添加的按钮说的是管理。临时修复是在运行每个规范之前从数据库中删除所有内容。

# jquery - 我在使用 jQuery 的下拉菜单中选择了问题设置

> ID：12257261
> 
> 赞同：0
> 
> 时间：2012-09-04T05:25:21.673
> 
> 标签：jquery, forms, selectedvalue

[请参见此处](http://utsarotaract.org/officers.php)的示例。单击`[Email Me]`总统的标题应该会打开`Webmaster`从下拉列表中选择的联系表格，但这并没有发生。

我知道这应该是微不足道的，但事实并非如此。`get`里面的东西`email()`工作正常，但是当它选择一个`option`时，代码就会出错。所有相关代码如下。

我的 HTML：

```
<form method="get">
    <select name="to" id="to-field">
      <option name="President" value="President">President</option>
      <option name="Webmaster" value="Webmaster">Webmaster</option>
    </select>
</form> 
```

我的 JS/jQuery：

```
function email(to){
    $(document).ready(function() {
         $.get('/inc/email.php', 
               function(data){
                    $('#email-form').html(data);
                    $('#email-form form').submit( function(){
                        var d = $('#email-form form').serialize();
                        $.ajax({
                          type:     'GET',  
                          url:      '/inc/email.php?submit=true&'+d,
                          success:  function(data) {
                                        $('#email-form').html(data);
                          }
                        });
                        return false;
                    });
            }
         );
     });

    if(to !== undefined){
        $('select#to-field').val(to);
        console.log( 'item selected -> ' + $('select#to-field').val() );
    }
} 
```

这是由以下原因触发的：

```
<span onclick="javascript:email('Webmaster');">[Email Me]</span> 
```

并且`console.log()`正在返回：

```
item selected -> undefined 
```

我也试过使用这个选择设置：

```
$("select#to-field[value=" + to + "]").attr("selected","selected"); 
```

甚至这是一个很好的衡量标准：

```
$("select#to-field[value=" + to + "]").attr("selected",true); 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T05:46:13.827

你的 $.get 是一个异步事件！！事实上，你的

```
if(to !== undefined){
        $('select#to-field').val(to);
        console.log( 'item selected -> ' + $('select#to-field').val() );
    } 
```

将在内部电子邮件页面甚至完成加载之前执行！将该部分 *放入*您的 $.get 回调中，以便在电子邮件页面加载后完成！

像这样放在中间

```
$('#email-form').html(data);
//RIGHT HERE
    if(to !== undefined){
            $('select#to-field').val(to);
            console.log( 'item selected -> ' + $('select#to-field').val() );
        } 
//
$('#email-form form').submit( function(){... 
```

# version-control - 使用 VSS 2005 配置 VB6

> ID：12257262
> 
> 赞同：1
> 
> 时间：2012-09-04T05:25:22.640
> 
> 标签：version-control, vb6, visual-sourcesafe-2005

我已经用 VSS 2005 配置了 VB6，以下功能运行良好：

1.  签入和签出代码
2.  获取最新版本
3.  其他用户签出代码时显示错误。
4.  如果使用尝试在没有签入的情况下编辑代码时显示错误（仅当用户使用最新版本时）

我在带有 VSS 的 VB.Net 和 VB6 配置中发现的区别是：

1.  当用户尝试编辑代码时，代码没有自动签入，没有签入代码。
2.  不允许用户在 1 或 2 天后保存更改和签入代码。用户在关闭代码之前需要签入代码。
3.  显示 .vbp 文件的“路径/文件访问错误：”。当用户尝试在机器上保存代码时。
4.  当用户第一次打开代码时，允许用户在不签入的情况下编辑代码。

我做了[这个](https://stackoverflow.com/questions/2421291/how-do-i-get-vb6-to-integrate-with-visual-source-safe-6-0)链接中提到的所有设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T16:25:57.043

正如 MarkJ 提到的，vbp 文件总是在应用程序运行时保存。无论如何，您都可以取消对话框以运行项目，但这比右键单击项目根目录并签出更麻烦。

我将 Team Foundation Server 与我的 VB6 项目一起使用，并且其中也没有自动签出。恐怕您将不得不忍受它，直到您将代码移植到 .NET

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T07:22:18.310

正如我在[这里提到的](http://connect.microsoft.com/VisualStudio/feedback/Workaround.aspx?FeedbackID=196185)[死链接：[WayBack 版本](http://web.archive.org/web/20100327000853/http://connect.microsoft.com/VisualStudio/feedback/details/196185/vss-2005-add-in-for-vb6-does-not-display-glyphs-unless-all-files-in-the-project-are-in-vss)]当您有一些不在 SourceSafe 中的文件或文档时也会出现问题。

具体来说（正如我仍然[在此处](http://www.ozemail.com.au/~markhurd/)记录的那样），当项目的某些文件不与 SourceSafe 关联时，通常没有文件显示其 SourceSafe 状态字形。

我发现的解决方法是显示“添加文件”对话框，然后将其取消。我提供[了我的公共域加载项，](http://www.ozemail.com.au/~markhurd/VssFixAddIn.zip)它会自动实现此解决方法。

顺便说一句，请确保您安装了最新的 VSS Service Pack。

# javascript - 如何通过backbone.js打印“this”列表项的文本？

> ID：12257263
> 
> 赞同：0
> 
> 时间：2012-09-04T05:25:22.723
> 
> 标签：javascript, backbone.js, backbone-views

我是 Backbone.js 的新手。我在这个 keyworks 上遇到了一些问题。我有一个 Backbone 视图打击：

```
 var print = Backbone.View.extend({
    el : $('ul li.newItem'),  
    events : { 'click li.newItem':'printText'},
    initialize:function(){ 
      _.bind(printText,this);  // does 'this' refer to the li.newItem ?
      alert(1233); // init does't work.
    },
    printText : function(){
      //I wanna print the hello world text each list item when clicked.
    }
  });

 var print = new print(); 
```

这是我的演示：http: [//jsbin.com/evoqef/3/edit](http://jsbin.com/evoqef/3/edit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T06:11:26.757

您有两个问题使您`initialize`无法工作：

1.  范围内没有`printText`。
2.  [`_.bind`](http://underscorejs.org/#bind)并且[`_.bindAll`](http://underscorejs.org/#bindAll)表现不同。

第一个很容易修复，你想用`this.printText`，而不仅仅是`printText`。

`_.bind`将单个函数绑定到 a`this`并*返回*该绑定函数；`_.bindAll`另一方面，将多个命名函数绑定到 a`this`并将绑定的函数附加到指定的`this`. 所以，这样做：

```
_.bind(printText, this); 
```

当您丢弃绑定函数时，它没有做任何有用的事情。你想这样做：

```
this.printText = _.bind(this.printText, this); 
```

或者在 Backbone 应用程序中更常见的是，您会使用`_.bindAll`：

```
_.bindAll(this, 'printText'); 
```

现在你有一个功能`initialize`，你将拥有`this`里面的权利`printText`，我们可以继续修复`printText`。我认为您想从`<li>`单击的文本中提取文本；你可以这样做：

```
printText: function(ev) {
    console.log($(ev.target).text());
} 
```

但这仍然行不通，我们想知道这里发生了什么。好吧，Backbone 将事件绑定到视图`el`，所以让我们看一下：

```
var print = Backbone.View.extend({
    el : $('ul li.newItem'),
    //... 
```

当它`Backbone.View.extend`运行时，DOM 中不会有任何`li.newItem`元素，因此您不会`el`在该视图中获得有用的信息。这里通常的方法是有一个看起来像这样的视图：

```
var Print = Backbone.View.extend({
    tagName: 'li',
    events: {
        'click': 'printText'
    },
    render: function() {
        this.$el.text('Hello world ' + this.options.i);
        return this;
    },
    printText: function(e){
        console.log($(e.target).text());
    }
}); 
```

我们设置`tagName`并`'li'`让 Backbone`<li>`自己创建。然后我们将计数器值`Print`作为参数传递给视图，`this.options.i`当我们说`new Print({ i: ... })`.

现在我们只需要调整`addItem`你的方法`ListView`来创建新`Print`的并将它们添加到`<ul>`：

```
addItem: function(){
    this.counter++;
    var v = new Print({ i: this.counter });
    this.$('ul').append(v.render().el);
} 
```

更新演示：http: [//jsbin.com/evoqef/10/edit](http://jsbin.com/evoqef/10/edit)

我还进行了一些其他更改：

1.  使用[`this.$el`](http://backbonejs.org/#View-%24el)而不是`$(this.el)`，无需创建已经可用的东西。
2.  使用[`this.$()`](http://backbonejs.org/#View-dollar)而不是`$('ul', this.el)`，相同的结果，但`this.$()`不会在`$()`函数调用结束时隐藏上下文，并且`this.$()`在 Backbone 中更惯用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T05:53:55.213

在你的`_.bind(printText, this);`

`printText`超出了 init 函数的范围。`this`因为您的第二个参数代表打印 Backbone.View。

你可以这样做：

```
_.bind(this.printText, this); 
```

并可能摆脱`init()`错误。但是您可以`this`在 printText 内部使用，它无论如何都会代表您的视图。

```
printText: function() {
    console.log(this);  // this represents your view
} 
```

# svg - 是否有事件侦听器来检测点/SVG 图上的鼠标点击？

> ID：12257273
> 
> 赞同：3
> 
> 时间：2012-09-04T05:26:25.020
> 
> 标签：svg, graphviz, dot

我正在玩生成点文件，然后将它们转换为具有很多节点的 SVG 图。

我的问题是是否有事件侦听器来检测鼠标单击点/SVG 图形节点？

例如，在SVG图中的一个节点上右击，我做一些事情（可能从节点获取相关信息然后做一些事情），

那么如何生成点文件或者SVG文件来实现呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T06:55:51.553

有几种方法可以创建交互式 SVG 图：

*   使用 SMIL，一个 svg 的扩展（示例教程[http://apike.ca/prog_svg_smil.html](http://apike.ca/prog_svg_smil.html)）
*   Javascript（[Raphael](http://raphaeljs.com/)库非常好）
*   CSS 动画

在任何情况下，您都必须在支持任何这些技术（浏览器）的客户端中显示 svg 图，并且除了 graphviz 创建的 svg 输出之外，您还必须对其进行编码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-09-28T06:15:28.767

关于这个的另一个想法（意识到这个问题很老，但也许它可以帮助某人遇到）。

根据您想要做什么，将事件处理与绘图分离可能是最简单的。我的意思是，您可以找出 graphviz 将节点（以及边、标签等）放置在哪里，例如，请参阅[这篇关于如何在 python 中执行此操作的帖子](https://stackoverflow.com/questions/13938770/how-to-get-the-coordinates-from-layout-from-graphviz)。然后，您可以在所使用的任何 GUI 的背景中绘制图形，并使用其本机事件处理`on_click`通过在节点上放置不可见的可点击对象来做出反应。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-04T08:35:11.053

如果您想要交互式图表，那么 graphviz 可能不是最佳选择。

我建议看看[D3.js](http://d3js.org/)。也许您可以在 json 中构建图形数据并使用 D3 加载它们？

# php - 如何使用可选字段创建 WordPress 自定义帖子类型

> ID：12257274
> 
> 赞同：1
> 
> 时间：2012-09-04T05:26:29.967
> 
> 标签：php, wordpress, field, custom-post-type, optional

在 wordpress 中为动态项目（例如投资组合项目）创建自定义帖子类型时，某些字段可能对某些投资组合项目不可用。但是，如果您忽略此字段，则会在 wordpress 中出现验证错误，因为根据 WordPress，该字段是必需的。有人如何将自定义帖子类型中的某些字段设为可选？所以不会发生验证错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T05:36:12.013

要使该字段可选，只需转到管理仪表板，向下滚动左侧导航面板并单击自定义字段。然后，单击您要编辑的帖子类型。单击要设为可选的字段，您将看到是或否的复选框——单击否。单击更新。该字段将不再需要！

# html - Nexus 7 screen.width 返回 800 但媒体查询 max-width: 720px 仍然适用

> ID：12257279
> 
> 赞同：21
> 
> 时间：2012-09-04T05:26:42.297
> 
> 标签：html, css, responsive-design, media-queries

我有一个用于测试一些响应式设计的 Google Nexus 7 平板电脑。在 Javascript 中`screen.width`，按预期返回 800 像素（本机分辨率）。

当屏幕的最大宽度> 720px时，平板电脑为什么会拾取以下媒体查询？

```
@media only screen and (max-width: 720px) and (orientation: portrait) {
    .test{ background: red;}
} 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-09-07T03:34:44.627

Android 确实以密度缩放为目标，以适应 Android 生态系统的不同屏幕密度。默认情况下，Android 浏览器以中等屏幕密度为目标，试图模拟元素的大小，就好像屏幕是 MDPI 屏幕一样。

使用[这个网站](http://responsejs.com/labs/dimensions/)，你可以看到这个缩放的结果是`device-width`在Nexus 7上。因此，它在你的声明范围内，背景显示为红色。`601 px``device-height``880 px``max-width: 720px`

![截屏](../Images/9de1f223e12027f7db143feec4e7802b.png)

`window.screen.width`并`.height`始终返回实际的屏幕尺寸。您必须记住，**视口大小**和**屏幕大小**完全是两个不同的东西。

**如果您不希望这种行为，您可以添加`target-densitydpi=device-dpi`到您的`<meta name="viewport">`标签。这将禁用 Android 目标密度缩放：`device-width`并`device-height`报告设备的本机屏幕分辨率。**

有关 Android 目标密度缩放的更多信息，请参阅[Android 开发者文档](http://developer.android.com/guide/webapps/targeting.html#ViewportDensity)。

# javascript - Javascript - 拖放和选择能力

> ID：12257280
> 
> 赞同：0
> 
> 时间：2012-09-04T05:27:18.293
> 
> 标签：javascript, jquery, drag, multi-select

我正在寻找允许用户按下鼠标并拖动以选择多个项目的功能。该操作基本上就是您在 Mac Finder 或 Windows 资源管理器中看到的内容。

这可能是[JavaScript Drag & Select 功能正确完成](https://stackoverflow.com/questions/5851156/javascript-drag-select-functionality-done-right)的副本，并且答案[http://threedubmedia.com/code/event/drop/demo/selection](http://threedubmedia.com/code/event/drop/demo/selection)不错，但有点错误。

任何人都知道任何好的解决方案？

# c++ - boost message_queue如何传递一个指针？

> ID：12257285
> 
> 赞同：1
> 
> 时间：2012-09-04T05:27:46.450
> 
> 标签：c++, boost

这是代码

我想知道 boost 消息队列如何传输指针。既然我是菜鸟，能不能详细解释一下？

谢谢

```
#include <boost/interprocess/ipc/message_queue.hpp>

struct sss{
    int a;
    double s;
};

int main() {
    using namespace boost::interprocess;
    message_queue mq(create_only, "message_queue", 8, 8);
    sss as;
    as.a = 2;
    as.s = 4;

    const void* addr = static_cast<const void*>(&as);
    mq.send(static_cast<const void*>(&addr), sizeof(addr), 0);

    struct sss* ptr;
    int s;
    int q;
    mq.receive(static_cast<const void*>(&ptr), sizeof(ptr), s, q);
    cout << ptr-> a << ptr->s << endl;
    return 0;
} 
```

# asp.net-mvc-3 - 在 ASP.Net MVC3 中提交列值

> ID：12257287
> 
> 赞同：1
> 
> 时间：2012-09-04T05:28:09.247
> 
> 标签：asp.net-mvc-3, foreach, model, html-table, submit

我正在使用 ASP.Net MVC3，我有一个视图，其中显示了一个带有模型数据的简单表，如下所示：

```
+-------+---------------+----------------+
| 身份证 | 姓名 | 订购 |
+-------+---------------+----------------+
| 身份证 | 姓名 | 文本框 val=1 |
+-------+---------------+----------------+
| 身份证 | 姓名 | 文本框 val=3 |
+-------+---------------+----------------+
| 身份证 | 姓名 | 文本框 val=2 |
+-------+---------------+----------------+

+--------+ +--------------+
|提交 | | 更新订单 |
+--------+ +--------------+

```

在这里，Order 列包含带有 Order 值（1、3、2 等）的输入框。我需要`[Item {ID, Name, Order}]`通过阅读订单列来更新我的模型。

意思是，我需要通过读取 HTML 表格列将订单值提交给模型。这个怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T06:47:40.817

为每个项目创建一个视图模型：

```
 public class ItemViewModel
    {
        public string Id { get; set; }
        public string Name { get; set; }
        public string Value { get; set; }
    } 
```

以及行动的模型：

```
 public class EditViewModel
    {
        public IEnumerable<ItemViewModel> Items { get;set; }
        public int Index { get; set; }
    } 
```

像这样渲染行：

```
 @foreach (var item in Model.Items)
    {
        <tr>
            <td><input type="hidden" name="Id[@Model.Index]" value="@item.Id" />@item.Id</td>
            <td>@item.Name</td>
            <td><input type="text" name="Value[@Model.Index]" value="@item.Value" /></td>
        </tr>
        @{ Model.Index = Model.Index + 1 }
    } 
```

最后接收如下行：

```
 [HttpPost]
    public ActionResult Edit(ItemViewModel[] items)
    {

    } 
```

# ajax - 仅刷新 Aviarc 数据集的当前行？

> ID：12257290
> 
> 赞同：1
> 
> 时间：2012-09-04T05:28:32.167
> 
> 标签：ajax, dataset, aviarc

TLDR：是否可以刷新单个数据集行？在 ajax 工作流运行后，我想刷新数据库中的当前行，而不是整个数据集（因为它可能非常大并且运行整个查询很慢）。

* * *

我有一个带有记录表的屏幕，它显示一个可能非常大的数据集，还有一个按钮，它针对数据集的当前行运行验证例程。最初我通过屏幕操作运行验证工作流程，但这意味着验证完成后整个屏幕将重新加载，当只有一行发生更改时刷新整个数据集。

问题是我无法轻松访问将更改提​​交到数据库的数据集；它与 ajax 调用提交的数据集不同，因此当 ajax 请求完成时，更改不会自动发送回屏幕。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T05:55:49.210

通常我会做的是在提交工作流期间手动将更改从单行编辑数据集复制回列表数据集，并避免对数据库运行单独的查询以在稍后阶段获取更新的行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T06:31:30.287

由于我无权访问编辑该行的数据集，因此我需要先从数据库中检索已编辑的行，然后将该行复制回屏幕上显示的实际数据集。例如：

```
<!-- retrieve just the edited row -->
<dataset name="temp-foo" databroker="bar" query="get-bar-by-id">
  <param name="id" value="{$foo.id}" />
</dataset>

<!-- copy the result back to the original dataset -->
<copy-row from-dataset="temp-foo" to-dataset="foo" /> 
```

目前还没有一个`<refresh-dataset>`等效的单行，因此您需要使用临时数据集（或编辑的数据集）并将结果复制回原始数据集。

# mysql - sql/mysql 过滤器仅包括最大值

> ID：12257291
> 
> 赞同：6
> 
> 时间：2012-09-04T05:28:47.640
> 
> 标签：mysql, sql

我有一个这样的结果集：

```
ID | name  | myvalue
 1 | A1    | 22
 2 | A2    | 22
 3 | A3    | 21
 4 | A4    | 33
 5 | A5    | 33
 6 | A6    | 10
 7 | A7    | 10
 8 | A8    | 10
 9 | A9    | 5 
```

我想要的是仅包含包含最高可用“myvalue”的行（在前面的示例中为 33），然后：

```
ID | name  | myvalue
 4 | A4    | 33
 5 | A5    | 33 
```

IE 查询应该选择可用的最高“myvalue”（IE 33），它应该删除 myvalue < 33 的行

```
SELECT ..... WHERE myvalue = THE_HIGHEST_OF(myvalue) 
```

希望清楚...

先感谢您

* * *

编辑：

我目前的查询是

```
SELECT 
    *,
    (very long code that returns a integer as relevance score) AS myvalue
FROM
    mytable
HAVING
    myvalue = ?????
ORDER BY
    myvalue DESC 
```

现在最高的 myvalue 可以是 10、20、30，任何数字......在最终结果集中，我只想包含具有最高相关性分数的行

我尝试使用 GROUP BY，但我总是需要重复...

```
 (very long code that returns a integer as relevance score) AS myvalue 
```

...两次

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-04T05:38:00.013

```
SELECT * FROM t WHERE myValue IN (SELECT max(myValue) From t); 
```

###[*看到这个 SQLFiddle*](http://sqlfiddle.com/#!9/6135ad/1)

编辑：

根据[与 OP 的讨论。](https://chat.stackoverflow.com/rooms/16232/discussion-between-hims056-and-topeerornottopeer) OP 想在子句中使用*别名。*`WHERE`但是您只能在 、 或 子句中使用`GROUP BY`列`ORDER BY`别名`HAVING`。
看看[这个答案。](https://stackoverflow.com/questions/942571/using-column-alias-in-where-clause-of-mysql-query-produces-an-error/942592#942592)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-04T05:30:19.867

试试这个，

```
SELECT  *
FROM    tableName
WHERE   myValue = (SELECT max(myValue) From tableName) 
```

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!2/180ba/1)

感谢 hiss056 的 DDL

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-04T05:31:20.817

```
select * 
from mytable a
where my_value = (select max(myvalue) from my_table b 
                  --where  b.name = a.name
                  ) 
```

（如果您使用注释代码，将获得每个名称的最大值:)）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-07-25T10:48:10.950

```
SELECT 
    *,
    (very long code that returns a integer as relevance score) AS myvalue
FROM
    mytable
HAVING
    myvalue = MAX(myvalue) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-04T05:34:27.273

另一种方法是：

```
select * 
from myTable m1 
where not exists (select 1 from myTable where myValue > m1.myValue) 
```

# javascript - 在 Android 的 Webview 中添加 Javascript

> ID：12257292
> 
> 赞同：5
> 
> 时间：2012-09-04T05:28:50.390
> 
> 标签：javascript, android

我想在 web 视图中添加引线横幅广告。下面是广告代码

```
<script type="text/javascript" src="http://ad.leadboltads.net/show_app_ad.js?section_id=xxxxxxxxx"></script> 
```

我将如何添加这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T05:40:48.020

WebView have a method called loadData(). Allow webview load html code directly.You could have a try.

```
String js_str = "<script type='text/javascript' src='http://ad.leadboltads.net/show_app_ad.js?section_id=xxxxxxxxx'></script>"

WebView webview = new WebView();

webview.loadData(js_str, null, null); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T19:24:35.540

尝试这个

```
WebView wv = (WebView)findViewById(R.id.webViewad); 
wv.getSettings().setJavaScriptEnabled(true);
StringBuilder htmlData = new StringBuilder("<html>"); 
htmlData.append("<head><title>Ad</title></head>"); 
htmlData.append("<body>"); 
htmlData.append("<script type=\"text/javascript\" 
src=\"http://ad.leadboltads.net/show_app_ad.js?section_id=YOUR_ID\"></script>"); 
htmlData.append("</body>"); 
htmlData.append("</html>"); 
wv.loadData(htmlData.toString(),"text/html", "ISO 8859-1"); 
```

# sql-server - SQL Server BULK INSERT 从不同的架构

> ID：12257293
> 
> 赞同：0
> 
> 时间：2012-09-04T05:28:51.297
> 
> 标签：sql-server, bulkinsert

我有一个数据库，可以从两个外部方更新数据。每一方都发送一个管道分隔的文本文件，该文件被 BULK INSERTED 插入到临时表中。我现在想通过添加几列来更改其中一方的方案，但不幸的是，即使新列都添加为 NULLABLE，这也会破坏另一方的 BULK INSERT。

有什么明显的解决方案吗？

表模式：

```
CREATE TABLE [dbo].[CUSTOMER_ENTRY_LOAD](
[CARD_NUMBER] [varchar](12) NULL,
[TITLE] [varchar](6) NULL,
[LAST_NAME] [varchar](34) NULL,
[FIRST_NAME] [varchar](40) NULL,
[MIDDLE_NAME] [varchar](40) NULL,
[NAME_ON_CARD] [varchar](26) NULL,
[H_ADDRESS_PREFIX] [varchar](50) NULL,
[H_FLAT_NUMBER] [varchar](5) NULL,
[H_STREET_NUMBER] [varchar](10) NULL,
[H_STREET_NUMBER_SUFFIX] [varchar](5) NULL,
[H_STREET] [varchar](50) NULL,
[H_SUBURB] [varchar](50) NULL,
[H_CITY] [varchar](50) NULL,
[H_POSTCODE] [varchar](4) NULL,
[P_ADDRESS_PREFIX] [varchar](50) NULL,
[P_FLAT_NUMBER] [varchar](5) NULL,
[P_STREET_NUMBER] [varchar](10) NULL,
[P_STREET_NUMBER_SUFFIX] [varchar](5) NULL,
[P_STREET] [varchar](50) NULL,
[P_SUBURB] [varchar](50) NULL,
[P_CITY] [varchar](50) NULL,
[P_POSTCODE] [varchar](4) NULL,
[H_STD] [varchar](3) NULL,
[H_PHONE] [varchar](7) NULL,
[C_STD] [varchar](3) NULL,
[C_PHONE] [varchar](10) NULL,
[W_STD] [varchar](3) NULL,
[W_PHONE] [varchar](7) NULL,
[W_EXTN] [varchar](5) NULL,
[DOB] [smalldatetime] NULL,
[EMAIL] [varchar](50) NULL,
[DNS_STATUS] [bit] NULL,
[DNS_EMAIL] [bit] NULL,
[CREDITCARD] [char](1) NULL,
[PRIMVISACUSTID] [int] NULL,
[PREFERREDNAME] [varchar](100) NULL,
[STAFF_NUMBER] [varchar](50) NULL,
[CUSTOMER_ID] [int] NULL,
[IS_ADDRESS_VALIDATED] [varchar](50) NULL
) ON [PRIMARY] 
```

批量插入声明：

```
SET @string_temp = 'BULK INSERT customer_entry_load FROM '+char(39)+@inpath
+@current_file+'.txt'+char(39)+' WITH (FIELDTERMINATOR = '+char(39)+'|'+char(39)
+', MAXERRORS=1000,  ROWTERMINATOR = '+char(39)+'\n'+char(39)+')'
SET DATEFORMAT dmy
EXEC(@string_temp) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T20:07:56.533

最后，我使用两个不同的 BULK INSERT 语句（取决于正在处理的文件）处理了两种不同的情况。似乎没有办法做我试图用一个语句做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T08:37:42.593

使用带有 BULK 的[OPENROWSET](http://msdn.microsoft.com/en-us/library/ms190312.aspx)允许您在查询中使用您的文件。您可以使用它来格式化数据并仅选择您需要的列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T22:57:11.530

您可以使用@Pondlife 提供的格式文件创意。

根据输入文件名动态调整您的插入（前提是外部各方之间存在独特的差异）。使用 CASE 语句，只需根据文件名中的唯一标识符选择正确的格式文件。

```
DECLARE @formatFile varchar (max);

Set @formatFile =
CASE 
    WHEN @current_file LIKE '%uniqueIdentifier%'
    THEN 'file1' 
    ELSE 'file2'
END

SET @string_temp = 'BULK INSERT customer_entry_load FROM '+char(39)+@inpath
+@current_file+'.txt'+char(39)+' WITH (FORMATFILE = '+char(39)+@formatFile+char(39)
')'
SET DATEFORMAT dmy
EXEC(@string_temp) 
```

希望有帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T08:31:17.053

该[文档](http://msdn.microsoft.com/en-us/library/ms179250.aspx)描述了如何使用格式文件来处理目标表的列多于源文件的情况。有时更容易的替代方法是在表上创建一个视图并`BULK INSERT`进入视图而不是表；这种可能性在同一文档中进行了描述。

请始终提及您的 SQL Server 版本。

# android - WI-FI 已开启但未连接到网络

> ID：12257295
> 
> 赞同：1
> 
> 时间：2012-09-04T05:28:54.623
> 
> 标签：android

我正在开发一个需要检查互联网连接的 android 应用程序。当设备的 WI-FI 关闭时，它工作得很好，但是当我打开 Wi-Fi 但没有连接到可用网络时，它会强制关闭。可能是什么问题？请帮助 boolean isNetworkConnectionAvailable() {

```
 boolean connected = false;

    ConnectivityManager cm =(ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);

    if (cm != null) {
        NetworkInfo ni = cm.getActiveNetworkInfo();

        if(ni != null){

                if(ni.isConnected())
                connected = true;
                else
                    connected=false;

           }

    }

    return connected; 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T05:38:04.863

您的问题是当您的设备连接到 WIFI 但 WIFI 未连接到互联网时返回 true。您可以通过以编程方式执行 ping 命令来解决此问题。

主意：

1) 检查您是否连接到 WIFI。

2）如果您连接到 wifi ping 以检查网络可用性。

**代码：**

```
public static boolean isOnline(Context con,String url){

    ConnectivityManager cm = (ConnectivityManager)con.getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo netInfo = cm.getActiveNetworkInfo();
    if (netInfo != null && netInfo.isConnectedOrConnecting()) { 
        if(u!=null){
            return ping(url);
        }else{
            return true;
        }
    }else{
        return false;
    }
} 
```

平方法：

```
public static boolean ping(String u) { 
        try {
            URL url = new URL(u);
            HttpURLConnection urlc = (HttpURLConnection) url.openConnection();
            urlc.setConnectTimeout(500); // Time is in Milliseconds to wait for ping response
            urlc.connect();
            if (urlc.getResponseCode() == 200) {
                Log.i(TAG, "* ping  with ResponseCode: "+urlc.getResponseCode());
                return true;
            }else{
                Log.i(TAG, "* Connection is too slow with ResponseCode: "+urlc.getResponseCode());
                return false;
            }
        }catch (MalformedURLException e1){
            Log.e(TAG,"Erroe in URL to ping"+e1);
            return false;
        }catch (IOException e){
            Log.e(TAG,"Error in ping"+e);
            return false;
        }
    } 
```

# c# - C# winform 中的数据网格视图

> ID：12257298
> 
> 赞同：0
> 
> 时间：2012-09-04T05:29:20.953
> 
> 标签：c#

我们如何从 Excel 或 Access 文件中导出或导入数据到 Datagridview？我需要知道导出和导入的代码..请任何人帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T05:49:55.877

尝试这个：

```
using System;
using System.Data;
using System.Windows.Forms;
using System.Data.SqlClient;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            System.Data.OleDb.OleDbConnection MyConnection;
            System.Data.DataSet DtSet;
            System.Data.OleDb.OleDbDataAdapter MyCommand;
            MyConnection = new System.Data.OleDb.OleDbConnection(@"provider=Microsoft.Jet.OLEDB.4.0;Data Source='c:\csharp.net-informations.xls';Extended Properties=Excel 8.0;");
            MyCommand = new System.Data.OleDb.OleDbDataAdapter("select * from [Sheet1$]", MyConnection);
            MyCommand.TableMappings.Add("Table", "Net-informations.com");
            DtSet = new System.Data.DataSet();
            MyCommand.Fill(DtSet);
            dataGridView1.DataSource = DtSet.Tables[0];
            MyConnection.Close();
        }
    }
} 
```

[这是另一个教程](http://www.c-sharpcorner.com/uploadfile/ankurmee/import-data-from-excel-to-datagridview-in-C-Sharp/) 或只是使用[谷歌](http://en.wikipedia.org/wiki/Google)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-03T19:01:51.170

我将尝试使用**Access**示例扩展之前的帖子：

```
 DataTable LoadSchemaFromAccess(string szFilePath)
    {

    System.Data.OleDb.OleDbCommand cmd;
    try
    {
        System.Data.OleDb.OleDbConnection cnn  = new    System.Data.OleDb.OleDbConnection(string.Format("Provider=Microsoft.ACE.OLEDB.12.0;Data  Source={0};Persist Security Info=False;", szFilePath));
            cnn.Open();
            System.Data.DataTable schemaTable = cnn.GetSchema("Tables");

            cnn.Close();
            return schemaTable;
    }
    catch (exception e)
    {
        MessageBox.Show(e.Message);
        return null;
    }
    finally
    {
        if (cmd != null)
        {
            cmd.Dispose();
        }
    }
}

    string LoadDataFromAccess(string szTableName )
    {
 string   GetData = L"SELECT * FROM " + szTableName;
 System.Data.OleDb.OleDbCommand cmd;
 string szColumns = "";
try
{
    System.Data.OleDb.OleDbConnection cnn = new      System.Data.OleDb.OleDbConnection
        (string.Format(L"Provider=Microsoft.ACE.OLEDB.12.0;Data Source={0};Persist Security Info=False;", szPath));
    cnn.Open();
    System.Data.DataTable dt = new System.Data.DataTable();
    OleDbCommand  cmd = new OleDbCommand();
    cmd.Connection = cnn;
    cmd.CommandType = CommandType.Text;
    cmd.CommandText = GetData;
    OleDbDataAdapter adt = new OleDbDataAdapter(cmd);
    adt.SelectCommand = cmd;
    adt.Fill(dt);
     cnn.Close();
     return dt;
}
catch (exception e)
{
    MessageBox.Show(e.Message);
    return null;
}
finally
{
    if (cmd != null)
     {
        cmd.Dispose();
    }
}
} 
```

希望这有帮助。

# ios5 - Spotify 曲目列表

> ID：12257299
> 
> 赞同：1
> 
> 时间：2012-09-04T05:29:29.050
> 
> 标签：ios5, xcode4.3, spotify

全部！

...我`integrated Spotify`在我的应用程序中使用了 Sample Spotify 示例。我`able to play track`使用的是 Spotify 的默认控制器。现在我的问题是：目前我只能播放一首曲目。如果我想看怎么办`entire playlist track`？

提前谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T08:11:35.643

使用当前的 API，您需要自己执行此操作。我不知道你是如何播放的，但是当当前曲目结束时，你应该准备下一首曲目并播放它。目前 CocoaLibSpotify 没有内置“播放此列表”API。

# sql-server - 在存储在数据库中的树的一部分中查找从根到叶子的所有路径

> ID：12257300
> 
> 赞同：0
> 
> 时间：2012-09-04T05:29:29.527
> 
> 标签：sql-server, tree

假设存储在数据库（MS SQL Server）中的树具有以下结构

```
CREATE TABLE Nodes(
   NodeId int PRIMARY KEY, 
   NodeValue varchar(50));

CREATE TABLE Adjacencies(
   ParentId int REFERENCES Nodes(NodeId), 
   -- every adjacence is unique for specified child node
   ChildId int PRIMARY KEY REFERENCES Nodes(NodeId), 
   Weight int); 
```

现在我们有一个表*Foo*，它使用了这棵树中的值（具有*多对多*关系）

```
CREATE TABLE Foo(FooId int PRIMARY KEY);
CREATE TABLE Foo_Nodes(
   FooId int REFERENCES Foo(FooId), 
   NodeId int REFERENCES Nodes(NodeId),
   CONSTRAINT PK_Foo_Nodes PRIMARY KEY (FooId,NodeId)) 
```

现在对于指定的*FooId*，我们有树节点的子集（在*FooNodes*表中），我们的任务是从这个子集中找到所有“根叶”路径（这个子集不需要仍然是树，而是子树的集合）。

有没有最好的方法使用 SQL 语法来做到这一点？

例如，路径的结果表`{{1,2,3}, {1,4}, {5,6}, {9}}`可以具有这样的结构

```
PathId    NodeId    Level
---------------------------
1         1         1       |
1         2         2       | first path
1         3         3       |
2         1         1           | second path
2         4         2           |
3         5         1                | third path
3         6         2                |
4         9         1                      | fourth path 
```

PS 这个任务在命令式语言中相当明显：我们只需要枚举所有结果子树中的所有“根叶”路径并将这些路径集合并。

# java - 如何使用 JSch 的 SCP 支持在服务器上复制文件？

> ID：12257302
> 
> 赞同：1
> 
> 时间：2012-09-04T05:29:36.430
> 
> 标签：java, ssh, scp, jsch

我设法创建了一种将文件上传到目录的方法。

我将如何更改它以便我可以通过 JSch 将文件从 /123.html 复制到 /en/123.html？

```
public void upFile(String source, String fileName, String destination) throws Exception {
    try {

        try {
            // 改变当前路径
            client.cd(destination);
        } catch (Exception e) {
            System.out.println("当前目录不存在，新建目录！");
            JschCreateDir.createDir(host, port, username, password, destination);
            client.cd(destination);
        }

        // 上传本地文件 到当前目录
        File file = new File(source + fileName);
        client.put(new FileInputStream(file), fileName);

    } catch (Exception e) {
        logout();
        throw e;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T17:47:00.167

我了解您的问题，您希望将服务器上的文件从一个目录复制到另一个目录（而不是将本地文件复制到服务器，您的代码似乎已经这样做了）。

不幸的是，SFTP 协议（​​由 JSch 的 ChannelSFTP 类实现）不支持直接在服务器上复制。您当然可以结合`put`和`get`将文件从一个位置复制到另一个位置，但这将通过线路将内容从服务器两次发送到客户端并返回。

更好的方法是使用`exec`通道，直接发出服务器系统的复制命令。在 unixoid 服务器上，这将是`cp /123.html /en/123.html`. （这假设您对服务器具有 shell 访问权限，而不是仅 sftp 访问，正如我已经在某处看到的那样。）

这是一些代码（未经测试，您可能需要添加异常处理）：

```
public void copyFile(Session session, String sourceFile, String destinationFile) {
    ChannelExec channel = (ChannelExec) session.openChannel("exec");
    channel.setCommand("cp " + sourceFile + " " + destinationFile);
    channel.connect();
    while(channel.isConnected()) {
        Thread.sleep(20);
    }
    int status = channel.getExitStatus();
    if(status != 0)
      throw new CopyException("copy failed, exit status is " + status);
} 
```

# spring - JavaMailSender 返回空指针异常

> ID：12257304
> 
> 赞同：5
> 
> 时间：2012-09-04T05:29:44.247
> 
> 标签：spring, tomcat, jakarta-mail, jndi

我正在尝试使用 JavaMailSender 在我的 Spring MVC Web 应用程序和 Tomcat 7 中发送注册确认电子邮件，但它总是返回 NullPointerException。谁能帮我找出为什么我得到空指针？以下是我的配置设置：

web.xml

```
<!-- jndi mail session -->
<resource-ref>
    <description>
        Resource reference to a factory for javax.mail.Session
        instances that may be used for sending electronic mail
        messages, preconfigured to connect to the appropriate
        SMTP server.
    </description>
    <res-ref-name>mail/Session</res-ref-name>
    <res-type>javax.mail.Session</res-type>
    <res-auth>Container</res-auth>
</resource-ref> 
```

应用程序-servlet.xml

```
 <!-- Mail Sender bean definition -->

<bean id="smtpSession" class="org.springframework.jndi.JndiObjectFactoryBean">
        <property name="jndiName" value="java:comp/env/mail/session"/>
</bean>

<bean id="mailSender" class="org.springframework.mail.javamail.JavaMailSenderImpl">
    <property name="session" ref="smtpSession"/>
     <!--
    <property name="host" value="smtp.gmail.com" />
    <property name="port" value="465" />
    <property name="username" value="abc@gmail.com" />
    <property name="password" value="test123" />
    <property name="protocol" value="smtp" />

    <property name="defaultEncoding" value="UTF-8"/> 

    <property name="javaMailProperties">
        <props>
            <prop key="mail.smtp.auth">true</prop>
            <prop key="mail.smtp.connectiontimeout">5000</prop>
            <prop key="mail.smtp.sendpartial">true</prop>
            <prop key="mail.smtp.userset">true</prop>
            <prop key="mail.mime.charset">UTF-8</prop>
            <prop key="mail.smtp.isSecure">true</prop>
            <prop key="mail.smtp.requiresAuthentication">true</prop>
            <prop key="mail.smtp.auth">true</prop>
            <prop key="mail.smtp.port">465</prop>
            <prop  key="mail.smtp.socketFactory.class">javax.net.ssl.SSLSocketFactory</prop>
            <prop key="mail.smtp.socketFactory.fallback">false</prop>
            <prop key="mail.smtp.starttls.enable">true</prop>
            <prop key="mail.debug">true</prop>
        </props>
    </property>
     -->
</bean>

<bean id="simpleMailMessage" class="org.springframework.mail.SimpleMailMessage">
    <property name="from" value="abc@hotmail.com"/>       
</bean> 
```

context.xml（在 tomcat conf 文件夹中）

```
<Context path="/MVC" docBase="MVC" debug="5" crossContext="false">
<Resource name="mail/session" 
    auth="Container"
        type="javax.mail.Session"
        username="abc@gmail.com"
        password="test23"
        mail.debug="true"
        mail.user="abc@gmail.com"
        mail.password="test123"
        mail.transport.protocol="smtp"
        mail.smtp.host="smtp.gmail.com"
        mail.smtp.auth="true"
        mail.smtp.port="25"
        mail.smtp.starttls.enable="true"
/> 
```

发送邮件.java

```
import javax.mail.Message;
import javax.mail.MessagingException;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeMessage;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.mail.MailException;
import org.springframework.mail.MailParseException;
import org.springframework.mail.MailSender;
import org.springframework.mail.SimpleMailMessage;
import org.springframework.mail.javamail.JavaMailSender;
import org.springframework.mail.javamail.MimeMessageHelper;
import org.springframework.mail.javamail.MimeMessagePreparator;
import org.springframework.stereotype.Service;

import com.wbkit.mvc.domain.User;

@Service
public class SendMail 
{
@Autowired
private JavaMailSender mailSender;
@Autowired
private SimpleMailMessage simpleMailMessage;

public void confirmRegistrationMail(User user)
{

    MimeMessage message = mailSender.createMimeMessage();

    try
    {
        MimeMessageHelper helper = new MimeMessageHelper(message, true);

        helper.setFrom(simpleMailMessage.getFrom());
        helper.setTo(user.getEmail());
        helper.setSubject("MVC Registration");
        helper.setText("Hello " + user.getFirstName() + " "
              + user.getLastName() + ", \n" +
              " Your MVC Account Registration was successful. Your user ID is "
              + user.getEmail() + " and your password is "
              + user.getUserPass() + ".\n" +
              "You can now access the mobile applicatoin or the web application " 
              + " your user name (email) and password.");

    }
    catch (MessagingException e) 
    {
        throw new MailParseException(e);
    }
    mailSender.send(message);

}

public void requireApprovalMail(final User user)
{

}

} 
```

堆栈跟踪：

```
4-Sep-2012 7:47:16 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [MVC] in context with path [/MVC] threw         exception [Request processing failed; nested exception is java.lang.NullPointerException]  with root cause
java.lang.NullPointerException
at com.wbkit.mvc.util.SendMail.confirmRegistrationMail(SendMail.java:79)
at com.wbkit.mvc.web.main.RegisterController.save(RegisterController.java:276)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at      org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)
at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:436)
at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:424)
at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1812)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

com.wbkit.mvc.util.SendMail.confirmRegistrationMail(SendMail.java:79) 处的 java.lang.NullPointerException 指向

```
MimeMessage message = mailSender.createMimeMessage(); 
```

在 SendMail.java 中。我删除了一些我拥有的注释代码。

感谢您的建议和帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-22T17:32:03.093

我有同样的错误。它来自将 JavaMailSender bean 作为自动装配字段的类的手动实例化。在 OP 发布的代码中，这将是`SendMail`服务类。

[这个问题](https://stackoverflow.com/questions/19896870/why-is-my-spring-autowired-field-null)揭示了这一现象：手动创建的对象的自动装配字段没有收到对 JavaMailSender bean 的任何实际引用，因为 Spring 不知道它应该在那时发挥它的魔力。之后就很明显了。

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T06:36:25.387

除了异常的详细信息之外，您似乎已经包含了所有内容。

此外，看起来您只是在编造属性名称。配置中的一堆属性不是有效的 JavaMail 属性。此外，请参阅此[常见错误](http://www.oracle.com/technetwork/java/javamail/faq/index.html#commonmistakes)列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T06:00:08.653

在应用程序启动时检查您的日志记录，看看您是否可以看到 JavaMailSender 被连接到 SendMail。您可能必须将 org.springframework 日志记录设置为 DEBUG。

在我看来，您的接线一定是错误的，尽管我还不明白为什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-09T20:00:40.557

删除`@Autowired`from`SimpleMailMessage`并在`confirmRegistrationMail()`方法内部创建它的对象：

```
public void confirmRegistrationMail(User user) {
    SimpleMailMessage simpleMailMessage = new SimpleMailMessage();
} 
```

这可能是因为建议使用`@Autowire`for 接口。例如`JavaMailSender`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-01-23T00:41:25.807

在您已完成自动装配的助手类上编写 @Service 注释。然后在您使用该类的类中使用@autowire 注释。

# php - 仅在第一个结果中显示/隐藏 mysql 结果函数

> ID：12257305
> 
> 赞同：1
> 
> 时间：2012-09-04T05:29:45.867
> 
> 标签：php, javascript, jquery

```
<script type='text/javascript' src='http://code.jquery.com/jquery-1.4.2.js'></script>
<script type='text/javascript'>
$(window).load(function(){
$('#varx2').click(function() {
    $("#txt").toggle(this.checked);
});
});
</script>

<?php
print "<table>";
if($items)
foreach($items as $i){
print "<tr>";
print"<td><input type='checkbox' id='varx2' name='checkbox[]' value='$i->logi_id'/></td>"; //CHECKBOX
print "<td id='txt' style='display:none'>$i->logi_jo</td>";
print "<td>$i->logi_cntrlnum</td>";
print "</tr>";
}
print "</table>";
?> 
```

gud day，这是一个显示/隐藏java脚本..当我单击或选中复选框时，该行将在旁边扩展，问题只是第一行/结果正在扩展..你能帮帮我吗.. ty

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T05:34:01.080

ID*必须*是唯一的，ID 选择器只选择具有特定 ID 的第一个元素，您应该使用类来代替：

```
print "<td class='txt' style='display:none'>$i->logi_jo</td>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T05:37:06.713

删除 id 并将其作为一个类。

jQuery函数将是

```
$('.varx2').each(function(){
  $(this).click(function(){
// do whatever you want
});
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T05:33:41.213

每个元素的 ID 必须是唯一的。JQuery 将只选择第一个，与类选择器不同，例如将选择具有类的所有元素。尝试将 id 设置为项目 id 或名称或其他独特的东西。

# c# - 如何隐藏和取消隐藏 XtraTabControl 的页面？

> ID：12257309
> 
> 赞同：5
> 
> 时间：2012-09-04T05:29:52.967
> 
> 标签：c#, winforms, devexpress

如何隐藏和取消隐藏 XtraTabControl 的页面？我在 XtraTabControl 中有几个选项卡，如何在单击按钮时隐藏和取消隐藏它们？我正在使用 c# 而 XtraTabControl 是一个 DevExpress 控件。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-04T05:37:54.007

请使用[XtraTabPage.PageVisible](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraTabXtraTabPage_PageVisibletopic)属性：

```
xtraTabPage.PageVisible = !xtraTabPage.PageVisible; 
```

# routing - 广度优先或深度优先，用于枚举多模式公共交通的所有可能路线

> ID：12257310
> 
> 赞同：0
> 
> 时间：2012-09-04T05:30:07.740
> 
> 标签：routing, depth-first-search, breadth-first-search

我正在创建一个多模式旅程规划器应用程序，该应用程序查找用户可以使用不同/指定的公共交通方式（例如火车、公共汽车、吉普车等）从 A 点到达 B 点的所有可能路线。当然，步行边缘是允许的。我打算根据一些标准（成本）对结果进行排序。那么哪个对我来说使用广度优先或深度优先更好？..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T05:33:39.893

如果您打算计算每条路线及其成本，那没关系；但是深度优先将使用更少的资源（如果这对您很重要）。

但是，如果您打算计算到单个目的地的最短路径，那么请选择广度优先，因为它会在找到目的地后停止，并且平均不需要查看每条可能的路径。

# email - 批处理文件编程以获取带有文本文件数据作为电子邮件正文的电子邮件通知

> ID：12257316
> 
> 赞同：0
> 
> 时间：2012-09-04T05:31:10.803
> 
> 标签：email, batch-file

我想要一个批处理文件程序来获取电子邮件。

例如，我有一个包含一些数据的文本文件 main.txt

我想要这个到我的邮件 ID。你能帮我做这个编程吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T17:03:30.833

如果您有一个电子邮件服务器，您可以将电子邮件发送到，我首先推荐 PA 评论中提到的 Blat。

如果您正在运行 Microsoft Outlook 电子邮件客户端，则可以使用 VBScript 脚本来驱动它——严格来说不是批处理文件，但 VBScript 通常是 Windows 的一部分。当然，您可以使用批处理文件来调用具有正确参数的 vbscript 文件。

（我已经使用这种技术在 Outlook 中安排事情 - 安排在特定时间发送具有特定主题的电子邮件。）

```
'SendMail.vbs

option explicit

' Script for sending mails to myself, with given subject and optionally file contents for body

' Note this only works with particular Schedule service settings, i.e.,
' it has to log on as me and have access to the Desktop

dim fso, f, oMailItem, oOlApp

' Create the mail
Set oOlApp = CreateObject("Outlook.Application")
Set oMailItem = oOlApp.CreateItem(0) '0 = olMailItem
oMailItem.Subject = WScript.Arguments(0)
oMailItem.Recipients.Add ("receiver.name@somemailserver.com")
if WScript.Arguments.Count > 1 then
    Set fso = CreateObject("Scripting.FileSystemObject")
    set f = fso.OpenTextFile(WScript.Arguments(1), 1 )
    oMailItem.Body = f.ReadAll
    f.Close
end if   
oMailItem.Send

set f = nothing
set oMailItem = nothing
set oOlApp = nothing 
```

用类似的命令调用它

```
sendmail.vbs My_Subject_Line contents_file.txt 
```

# javascript - 底层对象更改时 ListView 不更新

> ID：12257318
> 
> 赞同：1
> 
> 时间：2012-09-04T05:31:11.690
> 
> 标签：javascript, windows-8, microsoft-metro

我遇到了[ListView](http://msdn.microsoft.com/en-us/library/windows/apps/br211837.aspx)未在其数据源中显示对象的最新详细信息的问题。通过调用WinJS.Binding.List 对象的[createSorted 方法创建数据源。](http://msdn.microsoft.com/en-us/library/windows/apps/hh700743.aspx)每个对象如下所示：

```
var obj = {
    title: 'First item',
    priority: 2
}; 
```

我像这样创建/设置数据源：

```
sortedItemList = itemList.createSorted(function (lhs, rhs) {
    return rhs.priority - lhs.priority;
});
listView.itemDataSource = sortedItemList.dataSource; 
```

ListView 的 itemTemplate 如下所示：

```
<div id="itemTemplate" data-win-control="WinJS.Binding.Template">
    <div>
        <h4 data-win-bind="innerText: title"></h4>
    </div>
</div> 
```

这两个字段的更改处理程序如下所示：

```
titleControl.onchange = function () {
    curItem.title = titleControl.value;
    sortedItemList.notifyMutated(sortedItemList.indexOf(curItem););
};
priorityControl.onchange = function () {
    curItem.priority = priorityControl.value;
    sortedItemList.notifyMutated(sortedItemList.indexOf(curItem););
}; 
```

createSorted 的文档说要确保在对象更改时调用 notifyMutated。如果我更改优先级，则 ListView 将适当地移动项目。但是，如果我编辑标题，则 ListView 不会更新以显示新标题。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T05:31:11.690

当调用其底层数据源的 notifyMutated 时，ListView 似乎没有显式地重新绑定其元素。如果对 notifyMutated 的调用导致元素被移动，那么它将被反弹，因为元素被销毁并重新创建。否则，您需要导致重新绑定发生。我的变更处理程序现在看起来像这样：

```
var notifyMutated = function () {
    var prevIndex,
        postIndex;

    prevIndex = sortedItemList.indexOf(curItem);
    sortedItemList.notifyMutated(prevIndex);
    postIndex = sortedItemList.indexOf(curItem);

    if (postIndex !== prevIndex) {
        WinJS.Binding.processAll(listView.elementFromIndex(postIndex), curItem);
    }
};

titleControl.onchange = function () {
    curItem.title = titleControl.value;
    notifyMutated();
};
priorityControl.onchange = function () {
    curItem.priority = priorityControl.value;
    notifyMutated();
}; 
```

# javascript - 如何在javascript中为全局变量赋值？

> ID：12257320
> 
> 赞同：0
> 
> 时间：2012-09-04T05:31:12.050
> 
> 标签：javascript, jquery, jqgrid

`id`我使用以下脚本函数从网格中获取行。它工作正常。我在`click`函数中获得了 ID。但是，如果我尝试获取函数的外部，它将显示为 Empty。我需要`selr`外部的点击功能值吗？这个怎么做？

```
var selr='';           
$(document).ready(function(){
               $("#datagrid").click(function(e) {
                 row = jQuery(e.target).closest('tr');
                 getId= row.attr("id");//for getting row number
                 selr = $("#datagrid").getCell(getId,'companyid');//getting Row ID
                 alert('alert in'+selr);
                 });
                  alert('alert out'+selr);
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T05:35:10.780

问题是，只有在您启动函数`selr`时才声明的值。`click`所以点击后检查`jqGrid`。

里面的脚本`$(document).ready();`不起作用，并且会显示为空，因为在文档准备好之后，`selr`不会设置。

不要使用简单的变量，而是分配`selr`为全局变量。只需替换`selr`为`window.selr`.

```
window.selr='';           
$(document).ready(function(){
    $("#datagrid").click(function(e) {
     row = jQuery(e.target).closest('tr');
     getId= row.attr("id");//for getting row number
     window.selr = $("#datagrid").getCell(getId,'companyid');//getting Row ID
     alert('alert in'+window.selr);
     });
     alert('alert out'+window.selr);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T05:35:46.287

问题是第二个警报`alert('alert out'+selr);` **将**在 .click 函数执行**之前**被调用。因此，因此`selr`未设置 的值。

`window`如果您找到一种方法来规避这种情况，您可以进一步确保通过使用该对象来访问全局变量。例如

```
window.selr = null
 ...
window.selr = your value 
```

但是，通常应不惜一切代价避免使用此类全局变量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T05:34:42.043

您在*单击处理程序中分配值，因此在用户实际**单击*之前不会设置它。

如果您测试`selr`并发现它仍然等于您将其初始化为 ( `''`) 的值，则您知道用户尚未单击网格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T05:37:48.740

*您已经将变量分配为全局变量。*

问题是变量是在一个函数**内部启动**的，该函数在单击时触发`$("#datagrid")`并`alert('alert out'+selr);`在 DOM 就绪事件时执行，很可能在`click`事件触发之前。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-04T05:34:56.633

您无法在 click 函数之外获取 selr 值，
如果**datagrid**是表 ID，那么 `$("#datagrid tr").eq(0)`会给您第一行

# silverlight - windows phone 7 应用程序中的贝宝

> ID：12257323
> 
> 赞同：0
> 
> 时间：2012-09-04T05:31:39.677
> 
> 标签：silverlight, windows-phone-7, paypal, windows-phone

我正在开发一个 Windows Phone 7 应用程序。在我的应用中，用户可以进行购买。客户需要使用贝宝付款。

我找到了适用于所有其他手机（iPhone、Android、Blackberry）的贝宝 API。但是没有适用于 windows phone 的 API。windows phone 支持paypal 吗？如果没有适用于 windows phone 的 paypal API，还有其他替代方法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T07:53:35.107

我认为应用内购买目前不适用于 Windows Phone 7.5。

这将是 WP8 独有的功能！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T11:04:42.810

我们可以在 webbrowser 控件的帮助下通过 Mobile Express Checkout 方法在 windows phone 7 中使用 paypal。我在 windows phone 中实现并成功了 paypal 的实现。

[https://www.x.com/developers/paypal/documentation-tools/express-checkout/gs_expresscheckout](https://www.x.com/developers/paypal/documentation-tools/express-checkout/gs_expresscheckout)

[https://www.x.com/developers/paypal/products/mobile-express-checkout](https://www.x.com/developers/paypal/products/mobile-express-checkout)

希望以上链接也能帮助其他人在 windows phone 7 中实现 paypal。

谢谢

# numpy - 安装 OS X 10.8 (Mountain Lion) 后我的 ipython 和库被禁用

> ID：12257324
> 
> 赞同：4
> 
> 时间：2012-09-04T05:31:48.310
> 
> 标签：numpy, matplotlib, scipy, upgrade, osx-mountain-lion

我有一个与下面类似的问题：

[OS X 10.8 升级后 Python pip 损坏](https://stackoverflow.com/questions/11704379/python-pip-broken-after-os-x-10-8-upgrade)

安装 ML 后，我无法再使用 iPython、SciPy 或 Matplotlib。我收到此错误：

```
Shanes-MacBook-Pro:~ $ ipython
Traceback (most recent call last):
  File "/usr/local/bin/ipython", line 5, in <module>
    from pkg_resources import load_entry_point
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/pkg_resources.py", line 2603, in <module>
    working_set.require(__requires__)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/pkg_resources.py", line 666, in require
    needed = self.resolve(parse_requirements(requirements))
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/pkg_resources.py", line 565, in resolve
    raise DistributionNotFound(req)  # XXX put more info here
pkg_resources.DistributionNotFound: ipython==0.14.dev 
```

我尝试了以下方法来修复它：

*   使用 sudo ipython
*   安装最新的 Xcode
*   重新安装[SciPy 超级包](https://github.com/fonnesbeck/ScipySuperpack)

当我输入 which python 它说它在`/usr/bin/python`.

额外的信息：

nside /Library/python/2.7/site-packages

里面有以下内容：

```
DateUtils-0.5.2-py2.7.egg
README
easy-install.pth
nose-1.1.2-py2.7.egg
pika-0.9.5-py2.7.egg
pyzmq-2.2.0.1-py2.7-macosx-10.8-intel.egg
tornado-2.3-py2.7.egg 
```

因此，通过这次 ML 升级，它删除了我的 numpy、ipython 等。它不再像使用 lion 那样安装在那里。我如何才能找到它的安装位置，因为当我运行 install_superpack shell 脚本时它似乎正在工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T17:49:29.857

作为更新，我从未修复过这个特定问题。但是，我刚刚从 Enthought 下载了 iPython、SciPy、Matplotlib 等。我在这里回答了其他人关于如何执行此操作的问题：

[如何检查我的机器上是否安装了 IPython 以及安装这些库的顺序？](https://stackoverflow.com/questions/12361500/how-to-check-whether-i-have-ipython-installed-on-my-machine-and-what-sequence-to/12361575#12361575)

# x264 - 加速 x264 编码（使用 libavcodec 的 C++ 代码）

> ID：12257328
> 
> 赞同：2
> 
> 时间：2012-09-04T05:32:10.073
> 
> 标签：x264, libavcodec, libx264

我正在尝试捕获 Windows 屏幕（连续屏幕截图）并将它们编码为 x264。为此，我正在使用 libavcodec 提供的 avcodec_encode_video2 函数。但是，这需要大量时间。编码单个帧的时间在 25 – 1800 毫秒之间波动。

我尝试了在屏幕上录制视频的 1080p 和 720p。

这些是我正在使用的设置。这是在具有 4 GB RAM 的 Windows 7、win32 版本构建上测试的。

bit_rate = 2000, width = 1920, height = 1080 qmin = 0, qmax = 0, max_b_frames = 0, frame_rate = 25, pixel_format = YUV 4:4:4。其余设置是默认设置，使用 avcodec_get_context_defaults3() 获取。

一组 250 帧中 20 帧（连续且随机选择）的样本数据（以毫秒为单位）。{ 121, 106, 289, 126, 211, 30, 181, 58, 213, 34, 245, 50, 56, 364, 247, 171, 254, 83, 82, 229 }

对于应用程序，它必须至少以 15 fps 的速度捕获。有人可以帮忙判断是否可以使用任何选项来提高帧速率。我需要无损编码，但我愿意增加一些文件大小。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T06:13:50.263

该问题的简单解决方案是直接使用libx264，而不是通过avcodec。这使您可以更好地控制 x264，从而提高编码速度。使用 avcodec，它也做了一些不需要的处理。使用 libx264 可以避免这种情况。

讲道理，直接使用x264 API。

# c# - 如果在信号量的情况下多个线程抛出异常怎么办

> ID：12257331
> 
> 赞同：3
> 
> 时间：2012-09-04T05:32:31.330
> 
> 标签：c#, multithreading, semaphore

如果多个线程在信号量中抛出异常会发生什么。

假设一个 sempahore 可以有 10 个线程，它们可以一次进入，线程# 2,5,6,7,9 将抛出异常，那么其他不会抛出异常的线程将成功运行或中止。

它是否与 AggregatedException 类有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T07:23:14.267

假设异常发生时其他线程已经在信号量内，它们将成功运行到完成。如果您希望它们提前终止，请使用带有[取消标记的](http://www.albahari.com/threading/part3.aspx#_Cancellation_Tokens)[SemaphoreSlim](http://www.albahari.com/threading/part2.aspx#_Semaphore)对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T07:25:24.390

我不明白你的意思

> 在信号量中引发异常

但可能

> 在释放信号量之前抛出异常

在这种情况下，10 个组中的其他线程将毫无问题地运行完成。如果之后有其他线程进入，它们可能会由于缺少许可而死锁。

在任何情况下，信号量、锁等都应该在一个`finally`块中释放以防止上述情况，根据以下方案：

```
acquire
try
{
    risky code
}
finally
{
    release
} 
```

# php - Authorize.Net 自定义字段？

> ID：12257333
> 
> 赞同：-3
> 
> 时间：2012-09-04T05:32:57.907
> 
> 标签：php, cakephp, payment-gateway

我正在尝试在 PHP 平台中集成 Web 应用程序的 Authrize.net API AIM 方法我想在我的表单中添加自定义字段，即帐单地址和其他个人信息以及创建我自己的收据任何人都可以指导我如何实现这个目标?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T18:50:40.290

1.  帐单地址和其他个人信息字段不是自定义字段。它们内置在 API 中，因此无需为它们创建自定义字段。
2.  如果您想使用自定义字段信息，您需要做的就是提交自定义字段名称和任何随附的文本以及事务请求字符串。有关这方面的更多信息，请参见[AIM 指南](http://www.authorize.net/content/dam/authorize/documents/AIM_guide.pdf)的第 34 页。
3.  创建收据与创建自己的网页或创建自己的电子邮件没有什么不同。从 Authorize.Net 获得成功回复后，您可以出示收据和/或通过电子邮件发送您自己的收据。

# c# - 如何从xml中获取xlink:title的属性值

> ID：12257334
> 
> 赞同：2
> 
> 时间：2012-09-04T05:33:16.263
> 
> 标签：c#, xml, tridion, tridion-2011

这是我为检索组成员而生成的 xml。我需要从此 xml 中获取值 tech\abc1234。

```
<tcm:Trustee xlink:href="tcm:0-61-65552" xlink:type="simple" xlink:title="tech\abc1234" Type="65552" Icon="T65552L0P0" xmlns:xlink="http://www.w3.org/1999/xlink"  xmlns:tcm="http://www.tridion.com/ContentManager/5.0"></tcm:Trustee> 
```

但是当我尝试获取属性值时：

```
XElement userList = csClient.GetListXml(grpId, members);

foreach (var eachuser in userList.Elements())
       {
            logdetails(eachuser.Attribute("xlink:title").Value.ToString());
       } 
```

我收到以下错误： `error The ':' character, hexadecimal value 0x3A, cannot be included in a name.`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-04T05:38:31.870

目前，您正在使用`string`to`XName`转换，它将该字符串作为元素*的*本地 ID，并且不能包含冒号。

您需要`XName`使用完整的命名空间 + 本地 ID 创建一个。幸运的是，LINQ 让这变得非常简单：

```
XNamespace xlink = "http://www.w3.org/1999/xlink";
XElement userList = csClient.GetListXml(grpId, members);

foreach (var user in userList.Elements())
{
    logdetails(user.Attribute(xlink + "title").Value);
} 
```

请注意，无需调用`ToString()`after `Value`-[`XAttribute.Value`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xattribute.value.aspx)已经返回一个字符串。

# php - 从另一个 PHP 文件中回显一个数组

> ID：12257343
> 
> 赞同：1
> 
> 时间：2012-09-04T05:34:00.830
> 
> 标签：php, arrays

我目前坚持我认为是一个简单的解决方案......我正在使用 PHPFileNavigator，我唯一坚持的是如何回显返回到单独文件上的数组的标题. 每次为上传的文件创建/编辑文件时，当为文件添加标题时，它会在下面生成以下文件。

# 更新

一般来说，我想要做的就是从我的目标文件中返回一个数组值，在这种情况下，它将来自“titulo”键，然后将它打印回我的源文件。

**目标文件**

```
 <?php
 defined('OK') or die();
 return array(
    'titulo' => 'Annual 2011 Report',
    'usuario' => 'admin'
 );
 ?> 
```

**源文件**

```
<?php
  $filepath="where_my_destination_file_sits";
  define('OK', True); $c = include_once($filepath); print_r($c);
?> 
```

**当前结果**

```
Array ( [titulo] => Annual 2011 Report [usuario] => admin ) 
```

**提议的结果**

```
Annual 2011 Report 
```

我只想知道如何将此数组回显到另一个 PHP 页面上的变量中？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T05:38:03.400

假设您的文件保存在`$filepath`

```
<?php
define('OK', True);
$c = include_once($filepath);
print_r($c); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T05:45:09.123

If you know the file name and file path, you can easily capture the returned construct of the php file, to a file.

Here is an example:

```
$filepath = 'path/to/phpfile.php';
$array = include($filepath); //This will capture the array
var_dump($array); 
```

* * *

Another example of include and return working together: [[Source: *php.net*]](http://php.net/manual/en/function.include.php#example-139)

return.php

```
<?php

$var = 'PHP';

return $var;

?> 
```

noreturn.php

```
<?php

$var = 'PHP';

?> 
```

testreturns.php

```
<?php

$foo = include 'return.php';

echo $foo; // prints 'PHP'

$bar = include 'noreturn.php';

echo $bar; // prints 1

?> 
```

* * *

***Update***

To only print a item from the array, you can use the indices. In your case:

```
<?php

$filepath="where_my_destination_file_sits";

define('OK', True); $c = include_once($filepath); print_r($c);
echo $c['titulo']; // print only the title

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T05:58:03.063

首先我们有一个文件（你想在其中初始化数组）`first.php`

（你也可以更专业地玩参数，任何参数函数传递不同的类型或不同的数组）

```
 function first_passing() {
      $yourArray=array('everything you want it's be');
      return $yourArray;
     } 
```

而在`second.php`

```
require 'yourpath/first.php' (or include or include_once or require_once )
//and here just call function
$myArray=first_passing();
//do anything want with $myArray 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-04T05:39:54.247

To print/echo an array in PHP you have to use `print_r($array_variable)` and not `echo $array`

# sharepoint - codeplex.com 中 sharepoint 2010 的示例项目

> ID：12257345
> 
> 赞同：4
> 
> 时间：2012-09-04T05:34:21.920
> 
> 标签：sharepoint, sharepoint-2010, project

我想要任何示例项目来了解有关 sharepoint 2010 的更多信息。我在 google 中进行了搜索。但没有找到任何可下载的项目。[我认为在codeplex.com](http://codeplex.com)中会有，任何人都可以建议我在 codeplex 或任何其他站点中下载的项目名称或链接。codeplex 中有很多项目，所以很难选择一个项目。如果有人知道标题或已经下载，我的工作对许多正在寻找类似东西的人来说会很容易和有用。这个问题可能是题外话，但我没有其他选择来获得帮助。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T10:57:54.713

Microsoft[为 SharePoint 2010 提供了 101 个代码示例](http://code.msdn.microsoft.com/SharePoint-2010-101-Code-da251182)- 下载并研究它们，你会变得更聪明 ;-)

> 每个代码示例都是 SharePoint 2010 101 代码示例项目的一部分。提供了这些示例，以便您可以将它们直接合并到您的代码中。
> 
> 每个代码示例都包含在 Microsoft Visual Studio 2010 中创建的独立项目，并演示了不同的功能或功能集。每个样本都包含描述样本和预期结果的注释。每个示例还包含解释如何设置环境以便示例代码在必要时运行的注释。
> 
> Microsoft SharePoint 2010 为您提供了创建强大应用程序所需的工具。这些托管代码（C#、VB.NET、JavaScript、XML）示例可以帮助您创建自己的应用程序来执行特定功能或作为创建更复杂解决方案的起点。

# javascript - JavascriptExecutor（Selenium WebDriver C#）不断返回空对象

> ID：12257348
> 
> 赞同：2
> 
> 时间：2012-09-04T05:34:29.717
> 
> 标签：javascript, c#, selenium, selenium-webdriver, webdriver

我正在尝试通过 jQuery 检索 HTML 元素，并且在我编写的每个 JavascriptExecutor 语句中，我不断收到空引用点异常。那是我吗？

这是我的代码：

```
List<Object> list= (List<Object>)(IJavaScriptExecutor)Browser).ExecuteScript("$('tbody').find('tr')");
 list.Count.ShouldBeLessThan(rowsWithNewActivity); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T13:56:33.370

您不会从 JavaScript 执行中返回任何内容。试试这个：

```
List<object> list = ((IJavaScriptExecutor)Browser).ExecuteScript("return $('tbody').find('tr');") as List<object>; 
```

这不应再返回空值，而应返回您要查找的列表。

# javascript - 使用 javascript 循环选择选项

> ID：12257356
> 
> 赞同：1
> 
> 时间：2012-09-04T05:35:13.403
> 
> 标签：javascript, for-loop

这是我的代码：

```
<!doctype html>

<html>
<head>
    <meta charset="utf-8">
    <title>Date Picker</title>
</head>
<body>
<p>Click the button to loop through a block of code five times.</p>
<button onclick="myFunction()">Try it</button>
<select id="demo">
</select>
<p id="demo"></p>
<script>
function myFunction()
{
    var i;
    for (i=1;i<=5;i++){
      document.getElementById("demo").innerHTML="<option value="+i+">"+i+"</option>";
    }
}
</script>
</body>
</html> 
```

我想要的是当我按下按钮下拉框会生成一个像这样的选项：

```
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">4</option>
<option value="5">5</option> 
```

但我只得到这个代码

```
<option value="5">5</option> 
```

它只在选项上显示 5。请帮忙..谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T05:39:46.003

您在每次迭代中都覆盖了“演示”的内容。最好使用 DOM 方法向选择添加选项：

```
function myFunction(selector)
{
    var i;
    for (i=1;i<=5;i++){
      selector.options[i-1] = new Option(i,i);
    }
}
//usage:
myFunction(document.getElementById("demo")); 
```

顺便说一句：检查您的 HTML。的`id`元素应该是唯一的。使用您的 HTML，您的脚本如何知道与哪个元素对应`document.getElementById("demo")`？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-04T05:38:46.150

像这样添加要选择的元素对您有用

```
var select = document.getElementById("demo");  

var i=0;
 for(i=1;i<=5;i++){  
     select.options[select.options.length] = new Option(i,i);  

} 
```

# qt - qt : 我可以得到像 QCursor 这样的键盘吗？

> ID：12257357
> 
> 赞同：0
> 
> 时间：2012-09-04T05:35:14.583
> 
> 标签：qt, keyboard

我想在拖放工作中按下键盘。
我做了一个在 dropMimeData() 中拖放的过程。
因此，我无法在该过程中检测到“ctrl”。
如果是鼠标，我可以使用 QCursor 获取信息，对吗？
有没有像 QCursor 这样的键盘方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T06:20:31.630

```
QApplication::keyboardModifiers() == Qt::ControlModifier 
```

# xslt - 如何使用 XSLT 将文本文件编码格式更改为 unicode？

> ID：12257358
> 
> 赞同：0
> 
> 时间：2012-09-04T05:35:32.673
> 
> 标签：xslt, unicode, encoding, xslt-1.0

任何人都可以帮我将文本的编码格式更改为 unicode 吗？我需要查看阿拉伯字符，现在我正在使用 windows-1256 编码，即使在我的文本文件中我可以问号字符，我需要 unicode 格式，如何实现这一点？

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output media-type="text/xml" indent="yes" omit-xml-declaration="yes" encoding ="windows-1256"/> 
```

需要以**Unicode**格式输出

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T07:18:14.350

将 xsl:output 的编码属性设置为您需要的任何值。

请注意，没有“unicode 格式”之类的东西。unicode 数据库中有许多字符集。字符集与编码不同。unicode 字符串可以编码成许多编码。

可能您想以 UTF-8 或 UTF-16LE 输出。这两个都是编码。Windows-1256 也是一种 unicode 编码，但它不是“通用”编码。通用编码是一种将 unicode 数据库中的 Unicode 代码点一对一映射到编码的值空间的编码。

# c# - 与方块碰撞时玩家不会停止

> ID：12257361
> 
> 赞同：0
> 
> 时间：2012-09-04T05:35:52.870
> 
> 标签：c#, collision

我正在努力做到这一点，以便我的球员在击球时完全停止，但如果他按下某个键，他可能会变得不卡住。示例：玩家正在下降并撞到了一个障碍物。他停下来，但如果按 W、A 或 D，他可以向上、向左或向右移动。这是我目前拥有的代码。

在这种情况下，sp 表示速度，blocksp 表示他被阻挡时的速度。(This.Sprite)，在这种情况下，指的是阻止他的块。

```
 bool Blocked = false;
        float Bottom = -32;
        float Left = -32;
        float Right = This.Sprite.GetWidth() - 32;
        float Top = This.Sprite.GetHeight() - 32;
        int x = 0;
        int y = 0;
        float sp = 1.59f;
        float blocksp = 0.00f;
        Sprite Player = This.Game.FindSprite("GuySprite");
        if (This.Sprite.CollisionWithSprite("GuySprite") != null)
        {

            if (Player.Position.Y > Top)
            {
                Blocked = true;
                Player.Velocity = new Point2D(x, y) * blocksp;
                Player.Animation = 0;
                if (This.Game.IsPressed(InputKey.W) || This.Game.IsPressed(InputKey.A) || This.Game.IsPressed(InputKey.D))
                {
                    Blocked = false;
                    Player.Velocity = new Point2D(x, y) * sp;
                    Player.Position.Y -= 0.85f;
                }
            }
            if (Player.Position.Y < Bottom)
            {
                Blocked = true;
                Player.Velocity = new Point2D(x, y) * blocksp;
                Player.Animation = 0;
                if (This.Game.IsPressed(InputKey.S) || This.Game.IsPressed(InputKey.A) || This.Game.IsPressed(InputKey.D))
                {
                    Blocked = false;
                    Player.Velocity = new Point2D(x, y) * sp;
                    Player.Position.Y += 0.85f;
                }
            }
            if (Player.Position.Y < Right)
            {
                Blocked = true;
                Player.Velocity = new Point2D(x, y) * blocksp;
                Player.Animation = 0;
                if (This.Game.IsPressed(InputKey.S) || This.Game.IsPressed(InputKey.A) || This.Game.IsPressed(InputKey.W))
                {
                    Blocked = false;
                    Player.Velocity = new Point2D(x, y) * sp;
                    Player.Position.Y -= 0.85f;
                }
            }
            if (Player.Position.Y > Left)
            {
                Blocked = true;
                Player.Velocity = new Point2D(x, y) * blocksp;
                Player.Animation = 0;
                if (This.Game.IsPressed(InputKey.S) || This.Game.IsPressed(InputKey.W) || This.Game.IsPressed(InputKey.D))
                {
                    Blocked = false;
                    Player.Velocity = new Point2D(x, y) * sp;
                    Player.Position.X += 0.85f;
                }
            }
        } 
```

目前，如果我的玩家接触到方块的任何一侧并继续移动到方块停止，那么玩家将朝一个不稳定的方向移动并且不会在方块处停止。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T05:46:12.513

## 编辑

好的![这是图片。](../Images/eb01ae3e2d5b17d0322c5e16a7297684.png)

玩家正在向街区奔跑，因此他将在接下来的帧中击中左侧。这样下面的条件就会成立。

```
if (This.Sprite.CollisionWithSprite("GuySprite") != null) 
```

现在您必须实现一种方法来找出玩家与哪一侧发生碰撞。实际上，您的代码使我感到困惑，因为：

```
Player.Velocity = new Point2D(x, y) * ...; 
```

将始终是零向量，因为 x = y = 0

我会这样做：

```
float xDistance=0f, yDistance=0f;//this ll be explained later on
If(Player.Velocity.X > 0) //he is running to the right so he can hit the left side
     xDistance=mayHitLeft();
Else If(Player.Velocity.X < 0)
     xDistance=mayHitRight();
If(Player.Velocity.Y > 0) //In my case positive Y means downwards so can hit top
     yDistance=mayHitTop();
Else If(Player.Velocity.Y < 0)
     yDistance=mayHitBot(); 
```

现在我们必须确定玩家是否击中了机器人/上边缘或左/右边缘，或者两者兼而有之。让我们假设他正在摔倒并且之前跑到右边。so`Player.Velocity.X > 0`和`Player.Velocity.Y > 0` 这意味着函数`mayHitLeft();`和`mayHitTop();` 将被调用。我不知道这个`collisionWithSprite`功能是如何工作的。但与往常一样，我们会采取最坏的情况[，比如](https://i.stack.imgur.com/6DNMW.png)蓝色是方块，橙色是玩家。这是击中之前的帧，现在没有检测到碰撞。所以在下一帧中，两个函数都会检测到碰撞，但这是正确的。正如我们所见，它正在与顶部相撞。那么如何检测正确的呢？因此，我们使用距离，或者说我们在哪个方向上有多少重叠。所以较少的重叠是正确的。

所以这两个函数都返回一个双精度值。我们来看看`mayHitTop()`函数

```
private float mayhitTop()
    {
        //remember that the y coordinate goes downwards so we have to add
        float playersBotCoordinate = Player.Position.Y + Player.Sprite.Height;
        //the y position is the top so nothing to change
        float blocksTopCoordinate = Block.Position.Y;
        hitTop=true; //this is a global variable you have 1 for each direction
        return Math.Abs(playersBotCoordinate - blocksTopCoordinate);
    } 
```

所以我们设置了`xDistance`and`yDistance`我们知道它会到达顶部或左侧。

现在我们必须比较一切

```
// this means there could be 2 sides like our case that can be ths possible collision edge
if((hitLeft || hitRight) && (hitTop || hitBot))
{ 
   //we hit the left or right side
   if(xDistance<yDisante)
   {
      Player.Velocity.X = 0;
   }
   //we hit top or bottom
   else
   {         
      Player.Velocity.Y=0;
   }
}
else
{
    if(hitLeft || hitRight)...

} 
```

也许你必须解开播放器。否则我认为可能会有一些问题。

所以我只是在没有任何模板的情况下写了它。不知道有没有语法错误。但这只会给你一个概述如何做到这一点'我们可以预期这是伪代码;）

希望它至少对你有一点帮助。

## 老的

嗯，您正在比较玩家位置。Y 与左右，如果我理解代码，这应该是 X 坐标；）

```
 if (Player.Position.Y < Right) 
```

和

```
if (Player.Position.Y > Left) 
```

# php - 如何在 CakePHP 2.2.1 中手动插入 ACL 表的条目？

> ID：12257369
> 
> 赞同：2
> 
> 时间：2012-09-04T05:37:13.273
> 
> 标签：php, cakephp, cakephp-2.1

我知道我可以`$this->Auth->allow('');`对所有用户的角色进行操作，但我想在 ACL 表中添加操作并从 ACL 表中获取操作权限，而且我有三个组用户 1 Admin、2 Users、3 Guest，我想添加手动为所有用户在表中执行名为“AutoCompleted”的操作的权限。表格如下：

acos、aros 和 aros_acos（通常的 CakePHP 表）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T02:02:58.963

用户的角色使用该`aros_acos`表，这是结构：

![aros_acos 结构](../Images/de7b05db510e6228e2e7a8905dc98124.png)

要在此表中手动插入用户角色，您首先需要了解一些信息：

1.  动作“自动完成”的 ID (acos)
2.  您要分配此新权限的用户组的 ID (aros)

如果你打开你的`acos`表，你会看到：

![acos表数据](../Images/8093b2e3aa745f6a91a4a1682b041bab.png)

在此表的某处，您会发现“AutoCompleted”ID，在此示例中为 35（参见上图）。

现在，打开`aros`包含所有用户组信息的表：

![aros 表数据](../Images/c2febdb5838153ab3b449755c0161596.png)

在此表中的某处，您会找到用户组 ID，在此示例中为 15（参见上图）。

好的，这就是我们所拥有的：

1.  操作 ID (aco_id)：35
2.  用户组 ID (aro_id)：15

有了这些信息，您现在可以在`aros_acos`表中手动插入新权限：

```
INSERT INTO  `sgc`.`aros_acos` (
    `id` ,
    `aro_id` ,
    `aco_id` ,
    `_create` ,
    `_read` ,
    `_update` ,
    `_delete`
)
VALUES (NULL ,  '15',  '35',  '1',  '1',  '1',  '1') 
```

, `_create`, `_read`,接收值`_update`是因为我们希望允许用户执行此操作。`_delete``1`

# android - 有没有可以在android中使用的MFCC库？

> ID：12257374
> 
> 赞同：3
> 
> 时间：2012-09-04T05:37:45.693
> 
> 标签：android, speech-recognition, mfcc

我的团队正在语音应用程序中进行情绪识别。

要获得 mfcc，我们使用 comirva 包。

问题是创建 AudioPreProcessor 所需的 AudioInputStream 不能在 android 中使用。

所以我们一直在寻找某种替代方案。

有没有办法在android中获得mfcc？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T21:34:32.463

您可以在 comirva 源中仅用 InputStream 替换 AudioInputStream，这是一个微不足道的修改。AudioInputStream purepose 只是存储和管理流格式，MFCC 计算不需要它，它可以处理原始数据。

# php - PHP / MySQL 表单：转义、清理、散列......我什至从哪里开始？

> ID：12257386
> 
> 赞同：6
> 
> 时间：2012-09-04T05:39:14.290
> 
> 标签：php, mysql, security, passwords, sql-injection

我通常在自己查找信息方面非常足智多谋，但是当涉及到这个主题时，确实令人生畏，那里有大量的东西。我有点信息过载。

我找到了几十篇关于*个别*安全主题的文章，但我无法了解全局以及它们在实践中*是如何结合在一起的。*

我需要查看鸟瞰路线图。举这个假设的例子：

> ### 一个简单的假设“评论”部分：
> 
> *   注册：创建要安全存储在 MySQL 表中的密码/用户名组合。
>     
>     
> *   登录。
>     
>     
> *   发表评论。

在这个最基本的案例中要遵循的“安全路线图”是什么？

地球上的每本教程和 PHP 书籍都使用 MySQL 扩展并没有帮助，如果我理解正确，这是一个坏主意吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-04T05:48:16.383

## A. 一般来说……</h2>

1.  我在这里假设程序员不是服务器管理员，并且服务器管理员或多或少知道如何在默认情况下正确安全地配置 LAMP。

    当然，如有必要，程序员可以在`php.ini`位于 web 根目录的自定义文件中覆盖大多数 PHP 设置。

2.  使用 MVC 框架。

    我使用 CakePHP。该框架本身在确保基本健全和安全的编码实践方面大有帮助。

## B. 传入数据……</h2>

1.  在以编程方式操作数据之前`$_GET, $_POST, $_COOKIE,`和之前清理和验证包含的所有数据。`$_REQUEST`

2.  SQL 注入

    **定义：**利用应用程序数据库层中出现的安全漏洞的代码注入技术。当用户输入被错误地过滤为嵌入在 SQL 语句中的字符串文字转义字符或用户输入不是强类型并因此意外执行时，就会出现此漏洞。

    **预防：**使用诸如`mysqli`或之类的库的参数化查询`PDO`。请参阅[OWASP SQL 注入备忘单](https://www.owasp.org/index.php/SQL_Injection_Prevention_Cheat_Sheet)`mysql_real_escape_string`（不*推荐*使用字符串转义函数）

3.  跨站脚本 (XSS)

    **定义：**安全漏洞通常存在于 Web 应用程序中，允许恶意 Web 用户将代码注入到其他用户查看的网页中。此类代码的示例包括客户端脚本（即 JavaScript）。

    **预防：** *上下文相关的*输出转义和编码。请参阅[OWASP XSS 预防备忘单](https://www.owasp.org/index.php/XSS_%28Cross_Site_Scripting%29_Prevention_Cheat_Sheet)。

## C. 浏览器请求……</h2>

1.  跨站请求伪造 (CSRF)

    **定义：**恶意利用网站的类型，其中未经授权的命令从网站信任的用户传输。与利用用户对特定站点的信任的跨站点脚本 (XSS) 不同，CSRF 利用站点在用户浏览器中的信任。

    **预防：**生成一个唯一的“令牌”，通常是在浏览器会话开始时。`POST`在所有和`GET`请求中传递令牌。在`POST`/`GET`操作之后，检查会话中是否存在令牌，然后确认`POST`/发送`GET`的令牌与会话中存储的令牌相同。（像 CakePHP 这样的 MVC 框架使得在整个应用程序中统一实现这一点相对容易。）

## D. 会议……</h2>

1.  终止会话时销毁会话数据

    会话完成（“注销”）后，销毁其数据，不要只清除 cookie（否则恶意用户可能只是重新启用 cookie 并再次使用会话）。`$_SESSION`通过将其分配给空数组来取消设置所有索引。

2.  将会话存储为 Web 根目录或数据库中的文件

    在服务器上保存会话的默认路径可能会被劫持——尤其是在共享主机环境中。

## E. 密码……</h2>

1.  强制选择强密码

    *   密码中需要数字、符号、大小写字母

    *   密码长度应在 12 到 14 个字符左右

2.  哈希和加盐所有密码

    **不要使用或`sha1()`散列密码`md5()``hash()`**。它们不是为此而设计的。您将需要使用[bcrypt](https://stackoverflow.com/questions/4795385/how-do-you-use-bcrypt-for-hashing-passwords-in-php?lq=1)或 PBDFK2 之类的函数。关于这个问题有[一些非常好的建议](https://stackoverflow.com/questions/401656/secure-hash-and-salt-for-php-passwords)。您的盐值应该是完全随机的，并存储在数据库中（这不是真正的秘密）。一个额外的秘密值（通常称为“pepper”）可以存储在您的应用程序中，并在使用 bcrypt 之前附加到密码中，但目前尚不清楚这真正增加了多少安全性。

## F. 在`php.ini`位于 Web 根目录的自定义中……</h2>

1.  禁用 register_globals

    **预防：** `register_globals = Off`

2.  禁用魔术引号

    **预防：** `magic_quotes_gpc = Off`

3.  禁用错误报告

    **预防：** `display_errors = Off`

4.  启用错误记录并将日志文件保存到 Web 根目录之上的目录

    **预防：**

    ```
    log_errors = On; 
    ignore_repeated_errors = On; 
    html_errors = Off; 
    error_log = /path/above/webroot/logs/php_error_log 
    ```

5.  将会话数据存储在 Web 根目录上方的目录中

    **预防：** `session.save_path = /path/above/webroot/sessions`

## G. 在`.htaccess`位于 Web 根目录的文件中……</h2>

1.  在站点范围内禁用目录列表

    **预防：** `Options -Indexes`

## H. 有价值/敏感文件……</h2>

1.  通过将此类文件存储在 Web 根目录之上来防止未经授权的访问/下载

    这包括站点管理/仅限成员部分和站点/数据库配置文件！

2.  使用中间脚本内联或作为附件提供文件

3.  更新您的脚本（WordPress、PHPMyAdmin 等）。

4.  只有在使用 PHPMyAdmin 时才允许访问它。这可以防止人们在您的安装中使用零日漏洞。

## 一、上传的文件……</h2>

1.  `$_FILES`在将其用于任何类型的数据操作之前验证存储的文件名

2.  请注意，提供的 mime 类型可能会被欺骗或以其他方式错误

3.  将所有用户上传的文件移动到 web 根目录以上的目录！！！

4.  不要使用 include() 执行/提供上传的文件

5.  尽量不要提供内容类型为“application/octet-stream”、“application/unknown”或“plain/text”的文件</p>

## J. 杂项…</h2>

1.  开发人员在开发站点/应用程序期间创建和使用的 Web 根目录中的所有“实用程序”文件/程序，不打算或不要求将来的站点用户访问，或以其他方式构成某种安全风险，应网站上线时删除。

    例如，这包括一个`phpinfo.php`文件（打印结果的文件`phpinfo()`）、数据库实用程序脚本等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T05:58:10.360

好吧，为了安全起见，首先从构建 mysql 端开始，然后再进行服务器端编程（例如 php）。创建存储过程、视图、准备好的语句……也许是事务。他们是他们使应用程序更安全..太糟糕的 php 程序员不经常使用它们。

然后当你来到服务器端编程时，使用 pdo（我比 mysqli 更喜欢它），它使你能够绑定参数（这也是 asp.net 中使用的一种安全策略）。

您还可以使用验证策略..查看输入是否是电子邮件、信用卡..等，这会给您一个期望的白名单（建立一个黑名单是一个不太安全的想法..我记得从一些黑客书籍）。

可以根据您的需要使用转义和过滤，您可能想要去除标签的密码，但您可能不会使用注释。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T05:52:05.327

通常的建议是清理来自客户端的所有输入。通常，您希望清除输入中的任何形式的代码。这些是目标。以下是可用的防线。

首先，如果程序的设计很紧凑，问题就可以得到缓解——例如，进行适当的表单验证以清除不需要的符号将防止 SQL 注入或跨站点脚本。一个相当开放的输入，比如评论，虽然更狡猾。

其次，你必须清理输入。通常有几道防线。您可以去除标签或逃避它们，尽管这对更复杂的注入没有帮助。您可以在显示它们时转义输出。

第三，您还可以使用参数化查询来保护您存储输入的方式。这主要是防止 SQL 注入。

有一些开源库可以帮助清理您的输入，例如[HTML Purifier](http://htmlpurifier.org/)

所以总结一下：

*   正确建模您的输入。什么输入可以接受，什么不可以

    保存到数据库时剥离或转义输入标签，或在显示时清理它们。

    使用 MySQL 支持的参数化查询

# java - Eclipse 插件中动态生成的 TestNG 测试的名称

> ID：12257387
> 
> 赞同：3
> 
> 时间：2012-09-04T05:39:17.313
> 
> 标签：java, eclipse, testng

我使用`@Factory`注释将动态生成的 JUnit 测试套件转换为 TestNG。通过扫描包含多个测试规范文件（以 DSL 编写）的目录并将它们加载到知道如何执行它们的测试类中来生成​​测试。测试类有一个`@Test`名为的方法，按照建议`test`实现`org.testng.ITest`和覆盖。`getTestName()`

但是，在 TestNG Eclipse UI 中，只显示了工厂和单次执行`test`（尽管按预期执行了多次）。使用 JUnit，我将每个规范的名称列为单独的测试。这非常重要，因为几个测试规范可能会失败，我需要查看所有失败（这在我的 TestNG Eclipse UI 中不起作用）。

如何使用 TestNG 实现类似的功能？我使用 Eclipse TestNG 插件 6.7.0 和 testng 6.7。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T01:07:49.420

尝试在您的测试类中扩展 XmlTest 并调用 setName()。我扩展了 XmlSuite 并使用 setName 来命名我的“测试套件”，这是一个定义了多个测试的类，并且对我有用。事实上，我只是尝试了我在同一堂课上的建议，现在它被称为具有正确名称的测试。我不确定为什么 ITest 接口被忽略，因为我也尝试过这种方法但没有成功。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-07T04:26:23.547

正如 carlin.scott 建议的那样，扩展`XmlTest`可以解决这个问题。但是，我覆盖`toString()`返回测试名称（而不是调用`setName`）。这样做的好处是 TestNG 视图中的测试名称更易于阅读。默认情况下，它包含附加信息，例如参数和元组。

# vb.net - 如何在VB中获取文件的文件名？

> ID：12257388
> 
> 赞同：5
> 
> 时间：2012-09-04T05:39:43.880
> 
> 标签：vb.net

我制作了一个搜索程序来搜索计算机中的文件列表，然后将文件复制到存储文件夹中。文件名可以是“*11*2.txt” 只要程序找到这个模式，就应该复制到store文件夹。问题是我在搜索之前不知道文件的确切名称，我不想重命名文件，我不知道如何保存文件。请帮忙

我使用以下内容来查找文件，该文件可以正常工作

```
Public Sub DirSearch(ByVal sDir As String, ByVal FileName As String)
    Dim To_Path As String
    To_Path = Form1.TextBox5.Text
    For Each foundFile As String In My.Computer.FileSystem.GetFiles(sDir, FileIO.SearchOption.SearchAllSubDirectories, FileName)
        Copy2Local(foundFile, To_Path)
    Next
End Sub 
```

这是 Copy2Local 的当前版本（注意：它不能正常工作）

```
 Public Sub Copy2Local(ByVal Copy_From_Path As String, ByVal Copy_To_Path As String)
    ' Specify the directories you want to manipulate.

    Try
        Dim fs As FileStream = File.Create(Copy_From_Path)
        fs.Close()

        ' Copy the file.
        File.Copy(Copy_From_Path, Copy_To_Path)
    Catch

    End Try
End Sub 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-04T05:57:00.623

首先，您应该检查是否`ToPath`是有效目录，因为它来自`TextBox`：

```
Dim isValidDir = Directory.Exists(ToPath) 
```

其次，您可以使用`Path.Combine`从单独的（子）目录或文件名创建路径：

```
Dim copyToDir = Path.GetDirectoryName(Copy_To_Path)
Dim file = Path.GetFileName(Copy_From_Path)
Dim newPath = Path.Combine(copyToDir, file) 
```

[http://msdn.microsoft.com/en-us/library/system.io.path.aspx](http://msdn.microsoft.com/en-us/library/system.io.path.aspx)

[（免责声明：从手机输入）]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T05:50:21.337

回答您的问题：您可以使用[Path.GetFileName](http://msdn.microsoft.com/en-us/library/system.io.path.getfilename.aspx)获取文件名。例子：

```
Dim fileName As String = Path.GetFileName(foundFile) 
```

* * *

但是，您的代码还有很多其他问题：

1.  这里，

    ```
    Dim fs As FileStream = File.Create(Copy_From_Path)
    fs.Close() 
    ```

    你正在[*覆盖*你的源文件](http://msdn.microsoft.com/en-us/library/d62kzs03.aspx)。这似乎不是一个好主意。;-)

2.  和这里，

    ```
    Try
        ...
    Catch
        ' Do Nothing
    End Try 
    ```

    您正在丢弃可以帮助您发现和诊断问题的异常。不要那样做。它使调试成为一场噩梦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-02T18:28:32.667

在 vb.net 中，我使用以下代码来查找文件名

```
Textbox1.Text = New FileInfo(OpenFileDialog.FileName).Name 
```

此代码适用于打开文件对话框

# javascript - JCrop，如何清除所有 div 宽度/高度标记？

> ID：12257390
> 
> 赞同：5
> 
> 时间：2012-09-04T05:39:47.503
> 
> 标签：javascript, jquery, html, image-uploading, jcrop

我有一个个人资料图片系统，它允许使用 jCrop 进行图像裁剪。我注意到，如果用户多次执行该过程，裁剪尺寸不会被正确计算，因为之前的图像仍然存在。我已经尝试过 API 中的 destroy() 方法，但这并没有从`.jcrop-holder`div 及其子图像元素中清除图像源。

我怎样才能轻松摆脱这种情况？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T21:46:54.107

对你的情况做了一些巨大的假设，我决定你可以尝试这样的事情：<code>$(function(){$(​'.jcrop-holder').removeAttr("style");​​​ ​​​​​​​});​​​​​</code>

如果这不是你需要的，你应该给我们更多的信息！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T03:44:38.383

我在旧版本的 jCrop 上遇到了类似的问题，并创建了一个自定义销毁函数。这是它的要点：

```
function crop_reset()
  {
  //Reset coordinates of thumbnail preview container
  $('#crop_preview').data("coords.x", 0);
  $('#crop_preview').data("coords.y", 0);
  $('#crop_preview').data("coords.w", 0);
  $('#crop_preview').data("coords.h", 0);

  //Reset src of jcrop img and copies bound to page specific full size and preview divs
  $("#crop, #crop_preview, .jcrop-holder img").attr("src", ""); 
  }

function crop_start()
  {
  //Initialize and remove previous jCrop containers using load event callback
  $('#crop').Jcrop({
  onChange: showPreview,
  onSelect: showPreview,
  onLoad: hidePreview,
  aspectRatio: 1,
  setSelect: [0, 0, 50, 50],
  minSize: [50, 50],
  allowResize: false,
  allowMove: true
  },function(){$(".jcrop-holder").not(":last").remove();});

  //Remove previous jCrop containers using timer if callback is not supported
  /*
  window.setTimeout(function noblank(){
    $(".jcrop-holder").not(":last").remove();
    }, 1000);
  */
  } 
```

# java - 如何解决“方法的代码..超过 65535 字节限制”？

> ID：12257398
> 
> 赞同：32
> 
> 时间：2012-09-04T05:41:02.920
> 
> 标签：java, compiler-errors

我有以下代码：

```
public static void main(String[] args) {
    try {
        String[] studentnames = {
            /* this is an array of 9000 strings... */
        };
    }
} 
```

尝试编译时出现以下错误：

```
The code of method main(String[]) is exceeding the 65535 bytes limit 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-04T05:52:41.930

> 在 java 中，方法不能超过 65535 个字节。

因此，要解决此问题，请将您的方法分解`main(String[] args)`为多个子方法。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-04T05:44:46.917

错误代码似乎不言自明。

```
The code of method main(String[]) is exceeding the 65535 bytes limit 
```

这是因为在 Java 中对于方法大小有 64Kb 的任意硬编码限制。（实际上很多其他的东西都限制在 64K 以内，例如方法名称、常量的数量等。有关更多详细信息，请参阅[Java 8 规范](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html)或[Java 7 规范](https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html)。）

要解决这个问题，您所要做的就是将您的`main(String[] args)`方法分解为多个子方法。

* * *

但是为什么不直接从文件中加载名称呢？

按照您目前建议的方式进行操作的一些问题是：

*   首先，您对细节进行了硬编码，这几乎总是一件坏事（请参阅[this](https://en.wikipedia.org/wiki/Hard_coding)）；

*   其次，您会收到该错误消息；和

*   第三，你让你的代码很难阅读。

当然还有更多，但这些是显而易见的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-04T06:33:09.607

初始化 studentnames 数组将计入 main 方法的大小。由于有 9000 个学生姓名，每个姓名只能包含大约 7 个字符，否则空间不足。正如其他人所说，您需要减小方法的大小。正如 Pramod 所说，您可以将其拆分为多个部分，但在这种情况下，该方法的大部分实际上是数据。我会按照 Infiltrator 的说法将名称拆分到一个单独的文件中，然后在您的主文件中读取它。像 commons-io 这样的东西可以用来让你有效地到达你开始的位置。

```
List<String> namelist = FileUtils.readLines(new File("studentnames.txt"));
String[] studentnames = namelist.toArray(new String[0]); 
```

您可能会发现处理列表而不是将其转换为数组很有用，或者您也可以使用 LineIterator

```
LineIterator it = FileUtils.lineIterator(file);
try {
     while (it.hasNext()) {
         String line = it.nextLine();
         // do something with line
     }
 } finally {
     it.close();
 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T05:43:53.267

你的方法太长了。

创建不同的方法来拆分它并使其更具可读性和可维护性。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-04T07:07:54.650

我会从文件中读取学生的姓名，但是可以解决一个问题，这也会使班级变小

```
String[] studentnames= "Student names is an array of :9000".split(" "); 
```

这不是定义和使用 9000 个字符串，而是只使用一个。单个字符串的限制刚刚超过 20 亿。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-06-17T08:46:52.267

**解决方案一：**

```
public static void main(String[] args) {
    int[] num ={100001,100002,.......,...};
} 
```

假设数组`num`包含 100000 个数字，并且您的`main`函数给出错误。在这种情况下，您可以将上述数组分成两部分。现在，您可以声明 2 个不同的数组，而不仅仅是一个数组。例如：

`static int[] num1 ={}`和`static int[] num2={}`

在 main 函数外部声明`num1`，在 main 函数内部声明 num2`num2`将在 main 函数内部替换`num`。

数组的所有元素`num`将被分成两个子数组`num1`和`num2`；以这样一种方式拆分，即静态和非静态数组都可以容纳 8000 和 2000 个元素。

main 方法中的代码可以处理所有 10000 个元素，这只是一个假设：

```
if (n <= 8000) {
    System.out.println(" --->  " + num2[((int) n - 1)]);
} else if (n > 8000 && n <= 10000) {
    n = n - 8000;
    System.out.println(" --->  " + num1[((int) n - 1)]);
} 
```

因此，拆分该数组或将元素分成 8000 和 2000 两部分，可以消除错误。

**解决方案2**：

将数组放在`main`方法之外`num1`，`num2`现在都是静态数组，但 65535 字节的限制也适用于静态初始化数组。拆分您的元素，例如，您可以将 10000 拆分为 8000 和 2000，或者根据您的要求在 main 方法之外的两个静态数组中拆分。

如果存储大小超过 65535 的限制，则此错误与元素的存储`long[]`或`int[]`发生错误的位置有关。在这种情况下，请拆分元素，例如，如果您正在使用`long[]`或`int[]`以合适的数量拆分它们，直到出现错误解决。

换句话说，不强制只将数组分成 2 部分，您也可以将它们分成 4 种不同的大小或不同的相等部分。但同样，您的问题的解决方案可能会根据您的要求而有所不同。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-12-06T16:31:25.900

> 方法 main(String[]) 的代码超出了 65535 字节的限制

正如您的错误所说，主要方法超过了 65535 字节的限制。

**原因：为什么我们的代码中出现此错误？**

*   我们知道数组的内存分配将按顺序完成。IE; 如果 RAM 中连续有如此大量的可用空间，则将为数组分配内存。
*   我们使用了包含一些“9000”字符串的字符串数组——它太大而无法保存在内存中
*   在这段时间里，RAM 可能不会连续有这么大的空间，所以我们可能会遇到这个错误。

**解决方案：那么我该怎么做呢？**

*   为了存储如此巨大的大小值，我们可能更喜欢文件进行读/写 - 所以我们可以在需要时读取文件的一部分
*   我们可以将这些字符串存储在 ArrayList 中，当元素添加到其中时，它会增加内存，而不是最初分配整个内存。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-11-22T18:59:27.067

只需将代码中的字符串外部化为一个 *.properties / xml / json 文件。Netbeans 和/或 Eclipse 可以轻松地为您完成。

# python - Program returns an "IndexError: string index out of range."

> ID：12257400
> 
> 赞同：-2
> 
> 时间：2012-09-04T05:41:15.570
> 
> 标签：python, string

```
from random import shuffle  

alphabet="abcdefghijklmnopqrstuvwxyz"  

def substitution(alphabet,plaintext):  

    # Create array to use to randomise alphabet position  
    randarray=range(0,len(alphabet))  
    shuffle(randarray)  

    key="Zebra"  

    #Create our substitution dictionary  
    dic={}  
    for i in range(0,len(alphabet)):  
        key+=alphabet[randarray[i]]  
        dic[alphabet[i]]=alphabet[randarray[i]]  

    #Convert each letter of plaintext to the corrsponding  
    #encrypted letter in our dictionary creating the cryptext  
    ciphertext=""  
    for l in plaintext:  
        if l in dic:  
            l=dic[l]  
        ciphertext+=l  
    for i in alphabet:  
        print i,  
    print  
    for i in key:  
        print i,  
    print  
    return ciphertext,key  

# This function decodes the ciphertext using the key and creating  
# the reverse of the dictionary created in substitution to retrieve  
# the plaintext again  
def decode(alphabet,ciphertext,key):  

    dic={}  
    for i in range(0,len(key)):  
        dic[key[i]]=alphabet[i]  

    plaintext=""  
    for l in ciphertext:  
        if l in dic:  
            l=dic[l]  
        plaintext+=l  

    return plaintext  

# Example useage  
plaintext="the cat sat on the mat"  
ciphertext,key=substitution(alphabet,plaintext)  
print "Key: ", key  
print "Plaintext:", plaintext  
print "Cipertext:", ciphertext  
print "Decoded  :", decode(alphabet,ciphertext,key) 
```

When I run this code, it returns a `"IndexError: String index out of range"` error. Could someone give me hand troubleshooting it, I can't see the problem.

```
Traceback (most recent call last):
  File"/Users/Devlin/Desktop/Dev/Python/Substitution Cypher.py", line 57, in 
    print "Decoded :", decode(alphabet,ciphertext,key)
  File "/Users/Devlin/Desktop/Dev/Python/Substitution Cypher.py", line 41, in decode
    dic[key[i]]=alphabet[i] IndexError: string index out of range

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T05:52:30.363

问题出在这里：

```
def decode(alphabet,ciphertext,key):  
    dic={}  
    for i in range(0,len(key)):  
        dic[key[i]]=alphabet[i] # this line fails 
```

您`key`此时始终是 31 个字符，即`len('Zebra') + len(alphabet)`. 与`len(alphabet)`往常一样 26，`alphabet[i]`当 i > 25 时失败。

我相信您误解了`key`这里所代表的内容。`substitution`应该*产生*一个随机密钥，它不是密码或任何类型的盐。事实上，如果您查看[从 获得此代码的原始文章](http://www.stealthcopter.com/blog/2009/12/python-cryptography-substitution-cipher-improving-on-the-caesar-cipher/)，您会看到它是`key=""`in`substitution`而不是 some-random-value。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T05:52:42.193

```
for i in range(0,len(key)):  
    dic[key[i]]=alphabet[i] 
```

在这里，`len(key) == len(alphabet) + 5`。因此，`i`（迭代`range(0, len(key))`）比字母表的实际长度更远。这是由于部分

```
key="Zebra"  #HERE, YOU START WITH ZEBRA

#Create our substitution dictionary  
dic={}  
for i in range(0,len(alphabet)):  
    key+=alphabet[randarray[i]]  #AND HERE, YOU ADD TO ZEBRA
    dic[alphabet[i]]=alphabet[randarray[i]] 
```

所以，再一次，你得到的字符`key`比 in 多`alphabet`，这会导致错误。

解决办法是换线

```
key="Zebra" 
```

至

```
key="" 
```

你为什么要它是“斑马”呢？

* *PS`range(x)`与 相同`range(0, x)`，所以你通常应该只写`range(len(key))`etc... **

# jquery - From where can all keywords of jquery

> ID：12257402
> 
> 赞同：0
> 
> 时间：2012-09-04T05:41:19.103
> 
> 标签：jquery

I am searching list of All reserved Keywords of jquery so that I can know which keyword is used where.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T05:47:12.247

jQuery 只使用两个全局标识符；`$`和`jQuery`。

有关所有 jQuery 方法和属性的列表，请参阅[http://api.jquery.com](http://api.jquery.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T05:54:14.420

在这里你会得到任何你想要的：**[JQuery Fundamentals](http://jqfundamentals.com/)**

这些是其中一些：

```
break    export    return
case     for       switch
comment  function  this
continue if        typeof
default  import    var
delete   in        void
do       label     while
else     new       with 
```

# java - 对 2D 数组排序或对 1D 排序 + 线性搜索。

> ID：12257403
> 
> 赞同：0
> 
> 时间：2012-09-04T05:41:42.480
> 
> 标签：java, arrays, performance, search, sorting

只是一个快速的问题。

哪个选项会更有效？

1.  对 2D 数组进行排序（数组第 1 维中的每个值都链接到第 2 维中的值，因此它们必须被同等排序 [value and ID number] ）。

或者

1.  对一维数组进行排序，然后将值与另一组值进行比较（使用线性搜索）以检查它们是否匹配（以查找与每个值对应的 ID 号）。

所有的值都保证是不同的，所以没有重复数字的问题。就算有也没关系。

有没有办法找出这两种方法在调试器中的效率？

谢谢大家的时间。=]

塞布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T06:01:47.987

我认为在使用比较器的帮助下使用二维数组排序技术会更有效率。在这种技术中，数组按每个 2D 数组的一个比较单位一次性排序，在第二种方法中，您首先对 1D 数组进行排序，然后再次搜索以映射关联的值。

示例：[在 java 中对 String 的二维数组进行排序](https://stackoverflow.com/questions/5064027/sorting-2d-array-of-string-in-java?rq=1)

您可以通过在排序之前和排序后打印上述两种方法的时间戳来尝试自己排序所需的时间。

# python - py2app Application closes on open

> ID：12257404
> 
> 赞同：0
> 
> 时间：2012-09-04T05:41:50.267
> 
> 标签：python, python-2.7

I wrote a simple ' Hello, World! ' programme in Python 2.7 to play around with py2app. I made the setup.py file and then I ran python setup.py helloWorld.py

Now it created a build folder and a dist folder and inside the dist folder is the .app application of my helloWorld python script.

Now, here is the issues. Everytime that I try to run said .app, it opens and closes instantly.

What is happening? Is it printing Hello, World and then closing too fast for me to see it? Is there a way to prevent it from closing?

Thanks in Advance!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T06:05:30.593

`>> Is there a way to prevent it from closing?"`

this code will wait for user input and after it will closes

```
>>> print 'Hello World'
Hello World
>>> raw_input('press any key to exit')
press any key to exit
''
>>> 
```

# blackberry - Push Notification Usage limit

> ID：12257405
> 
> 赞同：0
> 
> 时间：2012-09-04T05:41:55.390
> 
> 标签：blackberry

I am developing an application to display push notifications.From different website I have learned that there are 2 types of push notifications (essential and plus). I would like to know the usage cost for these 2 push notifications.

# java - Deploy Eclipse 4.1 Project

> ID：12257407
> 
> 赞同：0
> 
> 时间：2012-09-04T05:41:58.847
> 
> 标签：java, eclipse, deployment

I have create a simple program using Eclipse 4.1.. I wanted to build or deploy my project into a .jar. I also added external libraries in my project. I wanted the output same as in Netbeans with the .jar file and lib folder in the dist folder, but there should be also a folder named help and lang.. How can I do this with eclipse?!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T06:19:13.790

按照[此处](https://www.cs.utexas.edu/~scottm/cs307/handouts/Eclipse%20Help/jarInEclipse.htm)提供的步骤操作。或者，如果您不想使事情复杂化，请选择`Runnable JAR file`而不是设置要写入`JAR file`的目录，然后单击。`.jar``Finish`

Eclipse 将为`[Project Name]_lib`项目中包含的外部库创建目录。

# facebook - Facebook iOS SDK 3.0 - save and reload .selection in FBFriendPickerViewController

> ID：12257408
> 
> 赞同：4
> 
> 时间：2012-09-04T05:42:06.513
> 
> 标签：facebook, facebook-ios-sdk

FBFriendPickerViewController seems pretty straightforward. However, it may not be designed for the scenario I want.

Essentially, I want to save a list of friends the user selects to disk. On subsequent app launches, I want to show the FBFriendPickerViewController with these "saved" friends as being already selected.

Since the .selection attribute is readonly, I'm not sure how I can load a new instance of FBFriendPickerViewController with a subset of friends already "selected".

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-27T17:44:18.810

最后我找到了解决方案。

我有一个 NSDictionary `dict`，其键是 facebook 用户 ID，值是名称。粗略地说，这是代码：

```
NSMutableArray *results = [[NSMutableArray alloc] init];
for (id key in dict) {
  NSString *name = [dict valueForKey:key];
  id<FBGraphUser> user = (id<FBGraphUser>)[FBGraphObject graphObject];
  user.id = key;
  [user setName:name]; // This is not mandatory
  if (user) {
    NSLog(@"adding user: %@", user.name);
    [results addObject:user];
  }
}
// And finally set the selection property
friendPickerController.selection = results; 
```

**更新：**似乎它无法正常工作....您会看到正确检查了朋友，但是当`.selection`您完成选择后去解析时，您只会得到您在 UI 中检查的朋友，而不是预装的...

**更新 2：如果您填写**[FBGraphUser.h](https://github.com/facebook/facebook-ios-sdk/blob/master/src/FBGraphUser.h)头文件中列出的所有字段，它似乎工作正常

# mysql - mysql：查找用户名

> ID：12257410
> 
> 赞同：0
> 
> 时间：2012-09-04T05:42:35.523
> 
> 标签：mysql

我在我的 Mac 上安装了 mysql，当我检查系统偏好设置时，它显示它正在运行。

当我尝试学习教程时，我尝试创建一个数据库

```
mysql> create database tinyclone; 
```

我收到这个错误

```
mysql> create database tinyclone;
ERROR 1044 (42000): Access denied for user ''@'localhost' to database 'tinyclone' 
```

在创建数据库之前，本书的作者

```
mysql –u <username> -p <password> 
```

但是，我不知道我的用户名，我也不是 100% 确定我知道我的密码。

我试着做

```
sudo create database tinyclone; 
```

我收到了不同的错误消息。不确定我的语法有什么问题

```
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'sudo create database tinyclone' at line 1 
```

问题，以便我可以跟随本书的作者，有谁知道我怎样才能找到我的 mysql 用户名和密码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T05:47:07.500

C.5.4.1.3。重置 Root 密码：通用说明 [http://dev.mysql.com/doc/refman/5.0/en/resetting-permissions.html](http://dev.mysql.com/doc/refman/5.0/en/resetting-permissions.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T05:50:26.350

您错过了 CREATE 特权。

以 root 用户身份连接，创建新用户并授予 CREATE 权限 -

```
CREATE USER 'user1'@'localhost';
SET PASSWORD FOR 'user1'@'localhost' = PASSWORD ('your_password');
GRANT Create ON *.* TO 'user1'@'localhost' 
```

然后连接为 'user1'@'localhost' -

```
mysql> --user=user1 --p=your_password 
```

...并创建新数据库 -

```
CREATE DATABASE tinyclone; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T05:50:54.060

通常，当您安装 mySQL 时，如果您跳过它，系统会提示您输入管理员用户 (root) 的密码，当前唯一可用于 mysql 的用户是 root，并且该用户没有启用密码（这对于生产来说不是一个好主意环境）
所以，你应该做的是：

```
~$ mysql -u root 
```

然后

```
create database tinyclone 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T05:55:05.827

> 我收到这个错误
> 
> mysql> 创建数据库 tinyclone；
> 
> 错误 1044 (42000): 用户 ''@'localhost' 拒绝访问数据库 'tinyclone'

您没有以任何用户身份登录（因此有 ''@'localhost' 位）。正如其他人建议的那样，尝试做`mysql -uroot -proot`or `mysql -uroot`。

> 但是，我不知道我的用户名，我也不是 100% 确定我知道我的密码。

（几乎）总是默认创建一个“root”用户，通常没有密码，除非您在最初安装/配置 mysql 时指定了一个。

> 我试着做
> 
> sudo 创建数据库 tinyclone；
> 
> 我收到了不同的错误消息。不确定我的语法有什么问题 ERROR 1064 (42000): You have an error in your SQL syntax; 检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“sudo create database tinyclone”附近使用正确的语法

`sudo`不是 SQL 命令。你不能在 mysql 中使用它。而是使用“root”用户登录 sql。

另外，请注意mysql root 用户**与您计算机的root 用户不同。**

# components - How can we migrate inventory of files and components from one teamsite server to another? (unix box)

> ID：12257414
> 
> 赞同：0
> 
> 时间：2012-09-04T05:43:02.577
> 
> 标签：components, migrate, dct, teamsite

I have certain list of files (and components). We basically have two environments - test and prod. The new site has been set up in test and needs to migrate to prod.

Any way to do this? Also does this migration not impact UIDs (unique Ids/internal IDs)?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T17:45:38.550

根据您使用的版本和环境，您有几个选择。任何 6.7.X 或更低版本的一个选项是使用内容迁移工作流程（可能需要开发），它将内容从一台服务器迁移到另一台服务器。另一种选择是从命令行运行 rysnc（语法如下）：

```
rsync -rpog -e ssh user@servername:/path/syncing/from.* /path/syncing/to 
```

同样有一个安全复制命令（如下所示）。但是，虽然安全副本保留了日期，但 rsync 的工作速度更快。

```
scp -p user@servername:/path/copying/from.* /path/copying/to 
```

对于 7.X 环境，您的最后一个选择是构建和运行一个 spar，如白皮书所示，它也会迁移内容。

# c# - How to display the result of adding two counters in sharepoint 2010 webpart?

> ID：12257417
> 
> 赞同：0
> 
> 时间：2012-09-04T05:43:45.757
> 
> 标签：c#, sharepoint, sharepoint-2010, web-parts, sharepoint-list

I took some code for displaying the content of a sharepoint 2010 list in a webpart based on a CAML query and modified it to display the same thing from two lists instead of one in a table. Now I want to further modify the code in order to get the number of incomplete tasks across both lists. to do that I added counters to the loops that populate the table and stored the result in another variable c. Now, the table is populated fine and does what i want it to do, but the value of the variable c is not displayed... can anyone help? I'll be really thankfull. Here is the code:

```
using System;
using System.ComponentModel;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using Microsoft.SharePoint;
using Microsoft.SharePoint.WebControls;

namespace SharePoint365.WebParts.OutstandingTasks
{
  [ToolboxItemAttribute(false)]
  public class OutstandingTasks : WebPart
  {
    int a; // HERE (1)
    int b; // HERE (1)
    int c; // HERE (1)
    protected override void CreateChildControls()
    {
      /*int a;
      int b;
      int c;*/
      SPList taskList = SPContext.Current.Web.Lists["test list 1"];
      SPList taskList1 = SPContext.Current.Web.Lists["test list 2"];

      SPQuery query = new SPQuery();
      query.Query = "<Where><Neq><FieldRef Name='Status' />";
                   +"<Value Type='Text'>Completed</Value></Neq></Where>";
      query.ViewFields = "<FieldRef Name='Title' /><FieldRef Name='Status'/>";

      SPListItemCollection tasks = taskList.GetItems(query);
      SPListItemCollection tasks1 = taskList1.GetItems(query);
      string htmlTable = "<table border='1'>";  
      htmlTable += "<tr><td>Title</td><td>Status</td></tr>";  

      foreach (SPListItem aTask in tasks)  
      {  
        htmlTable += string.Format("<tr><td>{0}</td><td>{1}</td></tr>",
                       aTask["Title"], aTask["Status"]);
        a++;  // HERE (2)
      }
      foreach (SPListItem aTask in tasks1)
      {
        htmlTable += string.Format("<tr><td>{0}</td><td>{1}</td></tr>",
                       aTask["Title"], aTask["Status"]);
        b++; // HERE (3)
      }

      htmlTable += "</table>";  

      c = a + b;            // HERE (4)
      Console.WriteLine(c); // HERE (4)

      LiteralControl tableControl = new LiteralControl(htmlTable);  
      this.Controls.Add(tableControl); 
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T06:11:49.373

您不能使用 Console.WriteLine 来显示 c。您需要像使用其他字符串一样使用 LiteralControl：

```
c = a + b;
LiteralControl totals = new LiteralControl(c.ToString());
this.Controls.Add(totals); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T18:37:44.477

也许你得到了答案，但是。您过滤两个表的方法是错误的。您需要使用 **SPSiteDataQuery**对象，我们可以使用它来查询多个共享点列表。

SPContext.Current.Web.GetSiteData(SPSiteDataQuery 对象);

按照以下链接了解更多信息 [http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spsitedataquery.aspx](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spsitedataquery.aspx)

# machine-learning - 将来自一般集合 S 的观察显式映射到内积空间

> ID：12257421
> 
> 赞同：0
> 
> 时间：2012-09-04T05:44:31.357
> 
> 标签：machine-learning, svm

我正在学习SVM 的**“Kenel Tricks”**。当我搜索时，我必须阅读[Wiki](http://en.wikipedia.org/wiki/Kernel_trick)中的段落如下：

```
“对于机器学习算法，内核技巧是一种映射观察的方式
从一般集合 S 到内积空间 V（配备其自然范数），
无需显式计算映射，希望
观测值将在 V 中获得有意义的线性结构"

```

我的问题是：

1.  **“显式计算映射”**是什么意思？

任何人都可以用一些实时示例来定义它或给我一些参考网站。所以这将有助于理解内核。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T23:11:18.907

答案就在同一篇文章中：

> 避免显式映射的技巧是使用只需要 V 中向量之间的点积的学习算法，并选择映射，以便可以通过核函数在原始空间内计算这些高维点积。

这意味着可以避免计算 [多维] 内核空间中数据点的图像，而只计算这些图像的成对点积，这通常会更便宜。[这里](http://www.cogsys.wiai.uni-bamberg.de/teaching/ss06/hs_svm/slides/SVM_and_Kernels.pdf)有一个例子，几乎**所有**关于 SVM 的书中都有。

# java - Setting multiple timezones in Java Scheduler Quartz Cron

> ID：12257428
> 
> 赞同：4
> 
> 时间：2012-09-04T05:45:18.960
> 
> 标签：java, cron, timezone, quartz-scheduler

I need to run a CRON at midnight which auto-assigns some periodic tasks for the people working in my company. The situation I am facing is that my company basically has offices all around US, which has more than 1 timezone. So basically I would want the job to be done timezone-specific. Also, my server is running by UTC.

If I set EDT as the base timezone (which is 4 hours behind UTC) and set the CRON to be triggered at midnight, the CRON time would be

> 0 0 4 * * ?

The possible way that I think can be is that instead of setting it just once, I set it to be triggered 7 times at the following times:

```
0 0 4 * * ? [EDT]
0 0 5 * * ? [CDT]
0 0 6 * * ? [MDT]
0 0 7 * * ? [PDT]
0 0 8 * * ? [AKDT]
0 0 9 * * ? [HADT]
0 0 10 * * ? [HST] 
```

So once any of it triggers, it would check which of my offices come under this time zone and will do the job.

This may work, as I believe, but does anyone else have any other option instead of this? Also, I would need to fix for the Daylight saving, which I am not really sure about how I would want to do.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T05:47:46.757

我认为最简单的方法可能是有一个每小时运行一次的工作，然后遍历*所有*办公室，并找到现在在晚些时候到工作最后一次运行的那个。（当然，您需要维护它以及办公室的时区。）这将为您解决 DST 问题，并应对调度程序停机一段时间的情况 - 下一次出现时，它会“赶上”它错过的所有办公室。

# iphone - 如何修改 GPUImageGaussianSelectiveBlurFilter 以在矩形而不是圆形上进行操作？

> ID：12257429
> 
> 赞同：1
> 
> 时间：2012-09-04T05:45:21.343
> 
> 标签：iphone, ios, instagram, gpuimage

我已经使用 GPUImage 框架来实现类似于 Instagram 应用程序的模糊效果，在该应用程序中，我创建了一个视图，用于从照片库中获取图片，然后对其进行效果。

其中一种效果是选择性模糊效果，其中只有一小部分图像清晰，其余部分模糊。GPUImageGaussianSelectiveBlurFilter 选择图像的圆形部分不被模糊。

我怎样才能改变它以使尖锐区域的形状改为矩形？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T00:04:16.853

因为 Gill 的回答并不完全正确，而且这似乎被一遍又一遍地问到，所以我将在上面澄清我的评论。

默认情况下，选择性模糊的片段着色器具有以下代码：

```
 varying highp vec2 textureCoordinate;
 varying highp vec2 textureCoordinate2;

 uniform sampler2D inputImageTexture;
 uniform sampler2D inputImageTexture2; 

 uniform lowp float excludeCircleRadius;
 uniform lowp vec2 excludeCirclePoint;
 uniform lowp float excludeBlurSize;
 uniform highp float aspectRatio;

 void main()
 {
     lowp vec4 sharpImageColor = texture2D(inputImageTexture, textureCoordinate);
     lowp vec4 blurredImageColor = texture2D(inputImageTexture2, textureCoordinate2);

     highp vec2 textureCoordinateToUse = vec2(textureCoordinate2.x, (textureCoordinate2.y * aspectRatio + 0.5 - 0.5 * aspectRatio));
     highp float distanceFromCenter = distance(excludeCirclePoint, textureCoordinateToUse);

     gl_FragColor = mix(sharpImageColor, blurredImageColor, smoothstep(excludeCircleRadius - excludeBlurSize, excludeCircleRadius, distanceFromCenter));
 } 
```

该片段着色器从原始清晰图像和图像的高斯模糊版本中获取像素颜色值。然后它根据最后三行的逻辑在这些之间进行混合。

这些行中的第一行和第二行计算从您指定的中心坐标（图像死点默认为标准化坐标中的 (0.5, 0.5)）到当前像素坐标的距离。最后一行使用`smoothstep()`GLSL 函数在距中心点的距离在两个阈值之间行进时在 0 和 1 之间进行平滑插值，即内部清晰圆和外部完全模糊圆。操作员然后从模糊和锐利的颜色像素颜色之间`mix()`获取输出并淡化以产生适当的输出。`smoothstep()`

如果您只想修改它以生成方形而不是圆形，则需要调整片段着色器中的两条中心线，以使距离基于线性 X 或 Y 坐标，而不是与中心点的毕达哥拉斯距离。为此，请将着色器更改为：

```
 varying highp vec2 textureCoordinate;
 varying highp vec2 textureCoordinate2;

 uniform sampler2D inputImageTexture;
 uniform sampler2D inputImageTexture2; 

 uniform lowp float excludeCircleRadius;
 uniform lowp vec2 excludeCirclePoint;
 uniform lowp float excludeBlurSize;
 uniform highp float aspectRatio;

 void main()
 {
     lowp vec4 sharpImageColor = texture2D(inputImageTexture, textureCoordinate);
     lowp vec4 blurredImageColor = texture2D(inputImageTexture2, textureCoordinate2);

     highp vec2 textureCoordinateToUse = vec2(textureCoordinate2.x, (textureCoordinate2.y * aspectRatio + 0.5 - 0.5 * aspectRatio));

     textureCoordinateToUse = abs(excludeCirclePoint - textureCoordinateToUse);
     highp float distanceFromCenter = max(textureCoordinateToUse.x, textureCoordinateToUse.y);

     gl_FragColor = mix(sharpImageColor, blurredImageColor, smoothstep(excludeCircleRadius - excludeBlurSize, excludeCircleRadius, distanceFromCenter));
 } 
```

Gill 提到的这些行只是过滤器的输入参数，根本不控制它的循环性。

我将进一步修改它以生成一个通用的矩形形状作为读者的练习，但这应该为你如何做到这一点提供一个基础，并更多地解释这个着色器中的线条做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T06:15:08.697

做到了吗...矩形效果的代码就在这两行

```
blurFilter = [[GPUImageGaussianSelectiveBlurFilter alloc] init];
        [(GPUImageGaussianSelectiveBlurFilter*)blurFilter      setExcludeCircleRadius:80.0/320.0];
        [(GPUImageGaussianSelectiveBlurFilter*)blurFilter setExcludeCirclePoint:CGPointMake(0.5f, 0.5f)];
       // [(GPUImageGaussianSelectiveBlurFilter*)blurFilter setBlurSize:0.0f];            [(GPUImageGaussianSelectiveBlurFilter*)blurFilter setAspectRatio:0.0f]; 
```

# java - 创建自定义注释

> ID：12257431
> 
> 赞同：6
> 
> 时间：2012-09-04T05:45:22.903
> 
> 标签：java, annotations

注释如何与 Java 一起工作？以及如何创建这样的自定义注释：

```
@Entity(keyspace=':')
class Student
{
  @Id
  @Attribute(value="uid")
  Long Id;
  @Attribute(value="fname")
  String firstname;
  @Attribute(value="sname")
  String surname;

  // Getters and setters
} 
```

基本上，我需要的是这个 POJO 在持久化时像这样被序列化：

```
dao.persist(new Student(0, "john", "smith")); 
dao.persist(new Student(1, "katy", "perry")); 
```

这样，实际生成/持久的对象是`Map<String,String>`这样的：

```
uid:0:fname -> john
uid:0:sname -> smith
uid:1:fname -> katy
uid:1:sname -> perry 
```

任何想法如何实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T05:49:58.367

如果您创建自定义注释，则必须使用`Reflection`API [Example Here](http://www.java2s.com/Tutorial/Java/0020__Language/ObtainingAllAnnotationsgetAnnotations.htm)来处理它们。您可以参考[如何声明注释。](http://docs.oracle.com/javase/1.5.0/docs/guide/language/annotations.html) 这是 java 中的示例注释声明的样子。

```
import java.lang.annotation.*;

/**
 * Indicates that the annotated method is a test method.
 * This annotation should be used only on parameterless static methods.
*/
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.METHOD)
public @interface Test { } 
```

`Retention`并且`Target`被称为`meta-annotations`。

`RetentionPolicy.RUNTIME`表示要在运行时保留注解，并且可以在运行时访问它。

`ElementType.METHOD`表示您只能在方法上声明注释，类似地您可以为类级别、成员变量级别等配置注释。

每个反射类都有方法来获取声明的注解。

```
public <T extends Annotation> T getAnnotation(Class<T> annotationClass)
Returns this element's annotation for the specified type if such an annotation is present, else null.

public Annotation[] getDeclaredAnnotations()
Returns all annotations that are directly present on this element. Unlike the other methods in this interface, this method ignores inherited annotations. (Returns an array of length zero if no annotations are directly present on this element.) The caller of this method is free to modify the returned array; it will have no effect on the arrays returned to other callers. 
```

您会发现这些方法存在于`Field`, `Method`,`Class`类中。

例如在运行时检索指定类上存在的注释

```
 Annotation[] annos = ob.getClass().getAnnotations(); 
```

# selenium - Selenium-Webdriver Java 框架 - TestNG 还是 JUnit？

> ID：12257435
> 
> 赞同：0
> 
> 时间：2012-09-04T05:45:36.333
> 
> 标签：selenium, junit, automation, testng

除了我在[这里](https://stackoverflow.com/questions/12140344/write-testcases-using-pagefactory-selenium-webdriver-advantages)的一个基本疑问（不幸的是没有引起太多关注）之外，我还有一个关于为 Selenium-WebDriver 准备 Java 框架的基本疑问。[我对这里](https://stackoverflow.com/questions/10522807/advice-with-selenium-project)的答案不满意，需要一些关于真实案例场景最佳实践的高质量建议。（指望SO）

主要问题是 - 哪个更适合 Selenium？TestNG 还是 JUnit？为什么？

我在[这里](https://stackoverflow.com/questions/6658/junit-vs-testng)、[这里](https://stackoverflow.com/questions/3767129/i-am-new-to-automated-testing-in-java-which-tool-should-i-prefer-junit-or-test)有一些基本的区别（对于自动化但不清楚的答案 - 都要求选择一个）等等。寻找更多细节来帮助我做出更好的决定。

PS：我有使用 Selenium+JUnit 的经验。如果我走同样的路，我会后悔吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T06:49:23.677

JUnit 的简单性与 TestNG 的可调整性 - 仅此而已

首先，两者都工作得很好。

如果您想缩减执行时间并有足够的时间找出可能的最佳配置，我建议您使用 TestNG。在并行化的情况下，这是您的工具

如果您更喜欢自上而下执行的简洁性，JUnit 就是您正在寻找的

- 编辑 -

**关于 JUnit 3**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-07T01:23:48.687

我现在正在通过一个项目从 JUnit 切换到 TestNG。它从一个实验开始，直到切换完全成为我心中的“完成交易”。一些卖给我的东西是能够轻松标记测试（组），轻松创建依赖项（除非测试 x 首先成功，否则不要运行测试 y），更强大的开箱即用报告（强大可能不是正确的词，但我发现它们更容易阅读和管理），而且一般来说只是更多的快速选项，易于使用和扩展。我在这个过程的早期，可能会后悔并转回去，但除非前方的道路上潜伏着一些不可预见的重大灾难，否则我不这么认为。如果您确实进行了切换，请查找 Eclipse 插件。将其应用于现有测试，并确保删除对 JUnit 的任何引用。

还要记住，stock 断言与 JUnit 断言具有相同的名称，但是两者之间的预期值和实际值的顺序是相反的。深入研究一下，你就会明白我的意思了。同样，没什么大不了的，只需要意识到这一点。

最好的祝福，无论你选择。你可以做任何你想做的事，我只是发现 TestNG 更灵活一些......令人惊喜，在 Java 领域时不时地体验一下真是太好了！;)

# swig - SWIG typedef 识别

> ID：12257437
> 
> 赞同：1
> 
> 时间：2012-09-04T05:45:55.697
> 
> 标签：swig, typedef

我也在尝试在 PHP 中使用我的 C++ 类。在我的 C++ 代码中，我将 typedef 声明为：

```
typedef unsigned char byte; 
```

所以我打算让 SWIG 在包装类中考虑我的 typedef，我的接口文件是这样的：

```
%module xxx

typedef unsigned char byte;

%include "xxx.h"

....

%{

typedef unsigned char byte;

#include "xxx.h"

%} 
```

在我的测试代码中，我将类型称为：

```
byte *data; 
```

但我有以下错误：

```
Fatal error: Class 'unsigned_char' not found in xxx.php 
```

PS：我还在我的接口文件中包含“stdint.i”但得到了同样的错误

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T07:54:20.010

我可以确认您显示的界面是可行的并且适用于简单的情况，例如我编写了以下头文件进行测试：

```
byte *make() { return NULL; }
void consume(byte *data) {} 
```

并使用了界面：

```
%module xxx

typedef unsigned char byte;

%include "xxx.h"

%{
typedef unsigned char byte;

#include "xxx.h"
%} 
```

我能够使用以下 PHP 进行编译和测试：

```
<?php
include("xxx.php");
$r = xxx::make();
xxx::consume($r);
?> 
```

它按预期工作。

不过有几点需要注意：

1.  一般来说，我倾向于编写您想要传递给模块的代码（`%{ %}`即`%include`.
2.  `byte`我倾向于使用标准的 int 类型之一，而不是使用您自己的 typedef ，例如`uint8_t`
3.  从您的问题中不清楚您打算如何使用`byte *data`- 大概它是一个数组，在这种情况下，您需要在界面中[添加更多代码。](http://www.swig.org/Doc1.3/Library.html#Library_carrays)（或者更好地使用`std::vector<byte>`，因为它是 C++）：

    ```
    %module xxx

    %{
    typedef unsigned char byte;

    #include "xxx.h"
    %}

    %include <carrays.i>

    %array_class(byte,ByteArray);

    typedef unsigned char byte;

    %include "xxx.h" 
    ```

    然后可以在 PHP 中用作：

    ```
    $a = new ByteArray(100);
    $a->setitem(0, 1);
    $a->setitem(1, 2); //...
    xxx::consume($a->cast()); 
    ```

    `ByteArray`是 SWIG 提供的实用程序类，用于保存和包装`byte`s 的原始 C 数组。

# iphone - RestKit 的词法解析器问题

> ID：12257445
> 
> 赞同：2
> 
> 时间：2012-09-04T05:46:30.150
> 
> 标签：iphone, cocoa-touch, ios5, restkit

找不到词法解析器问题“RestKit/RKSearchEngine.h”文件

但是，我已在项目和应用程序中将标题搜索路径设置为以下内容。

"$(BUILT_PRODUCTS_DIR)/../../Headers" "$(BUILT_PRODUCTS_DIR)/../../three20" $(SOURCE_ROOT)/RestKit/Build

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T08:34:32.973

首先，我建议升级到 RestKit 0.10.1。他们做了很多改进，其中一个较小的改进是您不再需要导入各种 RestKit 文件，您应该能够导入`<RestKit/RestKit.h>`.

如果这不是您的选择，那么您可以尝试查看 RestKit 项目文件以找到 RKSearchEngine 的位置并导入该特定位置。在升级我的 RestKit 版本之前，我记得有一些用于 JSONParser 和一两个其他文件的长 RestKit 导入路径。

# php - 使用 AJAX 返回的 PHP 会话 ID 变量

> ID：12257446
> 
> 赞同：1
> 
> 时间：2012-09-04T05:46:32.017
> 
> 标签：php, javascript, ajax

我正在使用 AJAX 登录系统，但不确定如何将 PHP 会话变量从 AJAX 返回到登录页面。我的问题是，如果可能的话，我如何将 php 变量返回到登录页面。下面是我创建的示例。

登录页面

```
<?php

session_start();

?>

<form>

    <input type="text" id="username" />

    <input type="text" id="password"/>

    <input type="button" id="submit" />

</form>

<script type="text/javascript" >

    $('#submit').click(function() {

var username = $('#username').val();

var password = $('#password').val();

    $.post('ajax_file.php', 
    {
    username: username,
    password:password,
    }, 
    function (data) {

    /* what do I do here that will return the php variable 
    $_SESSION['user_id'] and let the user be logged in when
    they go to homepage.php*/
    setTimeout('window.location.href="homepage.php"', 2000);
    });});

</script> 
```

这是ajax页面。我知道会话变量突然弹出的逻辑没有意义，让我们假设它是在页面的前面创建的。

```
$username = $_POST['username'];

$password = $_POST['password'];

if(login($username, $password)) {

    return $session_user_id = $_SESSION['user_id']; 

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T05:50:34.297

您可以只做 AJAX 帖子，将会话变量设置为接收帖子的页面中的会话，它将存储在会话中（它是同一个会话）。在 AJAX 回调中将用户转发到主页。

当然，您必须考虑登录凭据不正确的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T06:20:49.653

诀窍是你的 JavaScript 甚至根本不需要知道会话。[您可以通过相应的 ini 设置](http://sg2.php.net/manual/en/session.configuration.php#ini.session.cookie-httponly)将 PHP 配置为使用`HttpOnly`cookie 进行会话管理。

我会像这样实现 AJAX 脚本：

```
session_start(); // start the session

if (login($username, $password)) {
    // alter session to hold user id
    $_SESSION'user_id'] = $user_id_from_database_or_something;
    return true;
} else {
    return false;
} 
```

AJAX 完成处理程序查看返回值并重定向到主页（如果是）`true`。类似下面的东西（我假设 PHP`return`被翻译成类似的东西`echo json_encode($return_value)`：

```
if (data) {
    // do redirect
} else {
    // login failed
} 
```

然后，当用户访问主页时，他们的浏览器会发送一个会话 cookie，以便您确定他们是否已登录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T05:59:05.950

改进答案

对于 Jquery，使用下面的函数

```
function sendAjax(showAllExist, controller) 
{

   $.ajax({
   type: "post",
   url: login.php,
   data: yourformdatacomeshere,
   beforeSend:  function() {
         //do whatever you want to do before request
    },

    error: function() {
        //display in case of error
    },

    success:  function(data) {       
       //display in case of error
    if(data!=""){
        //redirect use to home pahe
        window.location.href ='homepage.php';
    }else{
        //display login is not correct
    }

    },

    complete:  function() {
        //hide any event which you have started on beforeSend 
    }

 });     
    return true;    
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T06:15:06.530

你不能这样做：

```
 $.post('ajax_file.php', 
    {
    username: username,
    password:password,
    loginSession: <?php echo  $_SESSION['user_id']; ?>
    }, 
    function (data) {
    //Check here if login is correct.
    if correct, create this variable:
   var logged= "?logged="+data.SessionID;
    /* what do I do here that will return the php variable 
    $_SESSION['user_id'] and let the user be logged in when
    they go to homepage.php*/
    setTimeout('window.location.href="homepage.php"+logged+"'", 2000);
    });}) 
```

当数据返回时，返回带有 sessionID 的 homepage.php。

在 php 脚本上执行以下操作：

```
if(isset($_GET['logged'])){
  start_session();
  $_Session['LOGGED']='true';
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-04T07:12:01.597

使用这种在shail答案之上即兴创作的方法。

你的ajax文件代码

```
$username = $_POST['username'];

$password = $_POST['password'];

if(login($username, $password)) {
  $session_user_id = $_SESSION['user_id'];// this is from your code
  $responseArray = array("message"=>"success","sessionId"=>$session_user_id);
}
else
{
  $session_user_id = "";
  $responseArray = array("message"=>"error","sessionId"=>$session_user_id);
}
echo json_encode ( $responseArray );
die (); 
```

然后在 ajax 函数中进行以下更改。

```
 var frmdata = jQuery("#logindata").serialize(); // which contains the data of username and password
 jQuery.ajax({
     type : "POST"
    ,url :'ajax_file.php'
    ,data :frmdata
    ,dataType: "json"
    ,success : function(data){               

        if(data.message == "success")
            {
                //redirect it to your desire page
            }
            else
            {
                //redirect it to your login page
            }

       }
 ,beforeSend: function(html){
        // some loader goes here while ajax is processing.
       }
}); 
```

希望这有助于随时为这个答案提出任何问题。

# php - 使用 php 在网站上显示存储在 AWS S3 中的图像

> ID：12257449
> 
> 赞同：2
> 
> 时间：2012-09-04T05:46:58.453
> 
> 标签：php, web, amazon-s3, amazon-web-services, photo

我正在 AWS EC2 实例上构建一个 MYSQL 数据库驱动的网站。用户可以提交他们的数据，我们会自动为他们创建一个网页。该网页将显示他们提交的数据，包括照片。在原始提交用户数据后，我们使用 AWSSDKforPHP 将照片存储在 S3 中。当管理员批准他们的信息时，将通过 php 脚本创建一个网页。

我已经尝试过生成签名网址的方法。然而，这需要一个到期时间。有没有解决的办法？它还在请求中包含您的访问权限和密钥。不确定这是否是最安全的做事方式。我希望该方法尽可能安全，因此我不想公开存储桶。除非有办法使存储的图像仅供查看。

在这种情况下使用的最佳方法是什么？谢谢你的帮助！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T05:55:17.570

基本上，亚马逊 S3 存储桶的 URL 是 s3.amazonaws/bucket_name/key_name 您需要做的就是确保这些存储桶上的内容是公开可用的，并且这些键的 mime 类型确实是图像（图像/jpeg 或图像/png）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-07T09:24:53.657

我使用[这个网络工具](https://www.backand.com/)来管理我的网站。我只打开了我的存储桶到它的 ip，现在我可以控制工具的限制，对于基本查看器，我只授予读取权限

# android - 首选项屏幕选项未显示

> ID：12257459
> 
> 赞同：1
> 
> 时间：2012-09-04T05:48:04.287
> 
> 标签：android

我的首选项屏幕选项未显示，它显示应用程序。莫名其妙停了。。

这是我的 Preference.java-

```
public class Prefs extends PreferenceActivity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    addPreferencesFromResource(R.id.settings);

} 
```

}

这是首选项的设置-

```
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >
<CheckBoxPreference 
 android:key="music"
 android:title="@string/music_title"
 android:summary="@string/music_summary" 
 android:defaultValue="true"/>
<CheckBoxPreference 
    android:defaultValue="true"
     android:summary="@string/hints_summary"
     android:title="@string/hints_title"
     android:key="hints"/>
 </PreferenceScreen> 
```

这是项目选择事件-

```
public boolean onOptionsItemSelected(MenuItem item) {
    if(item.getItemId()==R.id.settings)
    {
        startActivity(new Intent(this,Prefs.class));

        return true;
    }
    return false;
} 
```

并且该活动已在清单文件中很好地注册。

```
<activity
        android:name=".Prefs"
        android:label="@string/settings_title" >

    </activity> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T06:07:39.043

```
addPreferencesFromResource() 
```

方法应该加载包含首选项的 XML 文件。因此，在你的代码替换

```
addPreferencesFromResource(R.id.settings) 
```

和

```
addPreferencesFromResource(R.xml.yourPreferenceSettingsFileHere) 
```

这将解决你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T06:19:14.340

请替换**addPreferencesFromResource(R.id.settings);** 与 **addPreferencesFromResource(R.layout.settings);**

其中 settings 是首选项 xml。

而不是使用**onOptionsItemSelected()**
使用
**onPreferenceTreeClick(PreferenceScreen preferenceScreen, Preference preference) {**

```
 final String key = preference.getKey(); 

 if(key.equal("music"){
     /ur implementaion
     }
 }** 
```

# sorting - sas中更快的排序选项？

> ID：12257464
> 
> 赞同：0
> 
> 时间：2012-09-04T05:48:56.067
> 
> 标签：sorting, sas

我有一个包含 1.2 千万行的大型数据集，使用通常的**SAS proc sort进行****排序**大约需要 30 分钟。**sas**中是否有更快的算法/选项？库伯

 ***** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T06:57:12.770

如果没有关于如何使用排序数据集以及组成数据集的字段和长度的更多详细信息，您可以尝试以下几件事：

*   使用`tagsort`proc 排序中的选项。当数据集很宽时，这很有用。
*   创建索引而不是排序。如果您只是要按组进行一些处理，那么这会更快并且效果也很好。
*   如果您正在排序以进行合并，请考虑使用 SQL 连接（可能不需要对尽可能多的数据进行排序）或哈希表（可用于合并并且不需要排序的数据）。
*   压缩输出数据集（如果您还没有）和/或输入数据集。这将减少IO。

但是要回答您的问题， sas then 中没有更快的排序过程`proc sort`。根据以下 PDF：*SAS® 排序例程的顺序为 O(NlogN)，与比较排序一样快。*

如果您在获得同步排序许可的站点工作，那么这可以加快速度，但这通常默认启用。

[http://www2.sas.com/proceedings/sugi26/p121-26.pdf](http://www2.sas.com/proceedings/sugi26/p121-26.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T14:42:41.483

如果您需要对数据集进行排序的原因是将其与另一个数据集合并，您可能会考虑使用[HASH](http://www2.sas.com/proceedings/sugi30/236-30.pdf)对象进行合并/查找。那么您可能不需要对其进行排序。****

# c# - 使用 fluentmigrator 用每行的新值更新行数据

> ID：12257465
> 
> 赞同：8
> 
> 时间：2012-09-04T05:48:57.453
> 
> 标签：c#, fluent-migrator

我正在使用 fluentmigrator 向表中添加一个新列。然后，我想用该列的唯一值更新表中的每一行。

目前当我使用：

```
Update.Table("Foo").InSchema("dbo").Set(new { Bar = Bar.Generate() }).AllRows(); 
```

它为所有行提供相同的值。

如何确保它为每一行调用该方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-04T15:39:00.903

我不确定 Bar.Generate 做了什么，但我猜它会创建一个 GUID 或唯一 ID。

如果是这样，那么您可以使用：

```
Execute.Sql("update dbo.Foo set Bar = NEWID()"); 
```

或者，如果您想要顺序 guid，那么您可以使用[NEWSEQUENTIALID()](http://msdn.microsoft.com/en-us/library/ms189786.aspx)。

如果要为此唯一标识符添加新列，那么您需要做的就是指定新列 .AsGuid()

编辑：FluentMigrator 是一个小的流利的 dsl，并不意味着涵盖这样的复杂案例。没有办法（据我所知）用一个 sql UPDATE 来做到这一点，因此用 FluentMigrator 也没有简单的方法来做到这一点。您必须使用 ADO.NET 或 ORM（Dapper/NHibernate）获取表的行数，然后遍历每一行并使用自定义唯一标识符更新 Bar 列。因此，如果您有一百万行，那么您将不得不进行一百万次 sql 更新。如果您可以将 Bar.Generate() 方法重写为基于 NEWID() 函数的 Sql 函数，[那么](https://stackoverflow.com/questions/5003028/how-can-i-fill-a-column-with-random-numbers-in-sql-i-get-the-same-value-in-ever)您可以将其作为一个 UPDATE 语句执行，并使用 FluentMigrator 的 Execute.Sql 方法调用它[。](https://stackoverflow.com/questions/5809542/tsql-foreach-query?lq=1)

您还没有提到您正在使用哪个数据库。但是像 Postgres 这样的一些[非标准功能](https://stackoverflow.com/questions/8677481/update-with-function-called-once-for-each-row-in-postgres-8-4)可以帮助您。

# ipad - iPad你管视频

> ID：12257466
> 
> 赞同：0
> 
> 时间：2012-09-04T05:49:08.973
> 
> 标签：ipad

我正在开发一个仅支持纵向模式的 ipad 应用程序，但它具有播放电子管视频的功能。我在 webview 上播放它们。

当视图控制器仅支持纵向模式时，我如何为您的管视频支持横向？

# android - 0.99 美元无法配置应用内产品

> ID：12257472
> 
> 赞同：0
> 
> 时间：2012-09-04T05:49:39.567
> 
> 标签：android, in-app

在 play.google.com 上配置应用内产品时，我无法为我的应用内产品收取 0.99 美元。那是因为澳大利亚加拿大瑞士丹麦日本挪威瑞典等国家对其货币的期望最低。我被迫为我的应用内产品收取 1.99 美元（最低为 1.27）。

有没有办法让我从 0.99 美元选项中取消选择这些国家？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T06:26:42.417

一种解决方案是将该国的成本提高到最低限度。

# java - 如何在 Log4j 中使用 SizeBasedTriggeringPolicy 和 TimeBasedRollingPolicy？

> ID：12257477
> 
> 赞同：9
> 
> 时间：2012-09-04T05:50:14.603
> 
> 标签：java, log4j, rollingfileappender

嗨，我正在使用 Log4j 进行日志记录。下面是我的配置。

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">
<log4j:configuration debug="true"
xmlns:log4j='http://jakarta.apache.org/log4j/'>

<appender name="FileAppender_Comp3" class="org.apache.log4j.rolling.RollingFileAppender"> 

<rollingPolicy name="file" class="org.apache.log4j.rolling.TimeBasedRollingPolicy"> 
<param name="FileNamePattern" value="log/Comp3_%d{dd-MM-yyyy HH-mm-ss}.log" />
</rollingPolicy> 

<triggeringPolicy class="org.apache.log4j.rolling.SizeBasedTriggeringPolicy">
<param name="MaxFileSize" value="3kb"/>
</triggeringPolicy>

<layout class="org.apache.log4j.PatternLayout">
<param name="ConversionPattern" value="%d %5p [%t] %c (%F:%L) - %m%n"/>
</layout>

</appender> 
```

但是当我运行文件时，它会抛出错误。

```
log4j:WARN Failed to set property [maxFileSize] to value "3kb". 
```

我怎样才能解决这个问题。请帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-07-03T17:12:24.517

如果您使用的是[Log4j 2](http://logging.apache.org/log4j/2.x/)，则可以以 KB 或 MB 为单位指定大小。

下面是相关的 XML。

```
<Policies>
    <!-- Starts a new log on tomcat start -->
    <OnStartupTriggeringPolicy /> 
    <!--  Starts a new file when size reaches threshold -->
    <SizeBasedTriggeringPolicy size="10 MB" /> 
    <!-- causes a rollover once the date/time pattern no longer 
       applies to the active file -->
    <TimeBasedTriggeringPolicy /> 
</Policies 
```

有关详细信息，请参阅[https://logging.apache.org/log4j/2.x/manual/appenders.html 。](https://logging.apache.org/log4j/2.x/manual/appenders.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-10-16T18:49:44.297

根据文档，MaxFileSize 必须是长值。请查看[https://logging.apache.org/log4j/extras/apidocs/org/apache/log4j/rolling/SizeBasedTriggeringPolicy.html](https://logging.apache.org/log4j/extras/apidocs/org/apache/log4j/rolling/SizeBasedTriggeringPolicy.html)

因此，在这种情况下，该值应该是 3072 而不是 3kb。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-11T08:46:19.137

恰好遇到这个问题，并认为我应该分享解决方案：

将 MaxFileSize 参数设置为以字节为单位的值，因此对于您的示例，您可以将其设置为

```
<param name="MaxFileSize" value="3072"/> 
```

[这](https://stackoverflow.com/questions/24157371/unable-to-set-maxfilesize-to-value-100mb-in-log4j)是确认此解决方案的类似问题。

# c# - 如何将任何日期格式转换为 yyyy-MM-dd

> ID：12257483
> 
> 赞同：16
> 
> 时间：2012-09-04T05:50:51.290
> 
> 标签：c#

我的应用程序解析字符串数据，提取日期并识别日期格式并将其转换为 yyyy-MM-dd。

源日期可以是任何石灰 dd-mm-yyyy、dd/mm/yyyy、mm-dd-yyyy、mm/dd/yyyy 甚至 yyyy-MM-dd。

除了使用 switch case 尝试不同的排列和组合之外，还有其他有效的方法吗？

```
string sourceDate = "31-08-2012";
String.Format("{0:yyyy-MM-dd}", sourceDate); 
```

上面的代码只返回相同的 sourceDate “31-08-2012”。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-04T05:57:43.327

```
string DateString = "11/12/2009";
IFormatProvider culture = new CultureInfo("en-US", true); 
DateTime dateVal = DateTime.ParseExact(DateString, "yyyy-MM-dd", culture); 
```

这些链接也可能对您有所帮助

[DateTime.ToString() 模式](http://www.geekzilla.co.uk/View00FF7904-B510-468C-A2C8-F859AA20581F.htm)

[日期时间的字符串格式 [C#]](http://www.csharp-examples.net/string-format-datetime/)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-04T05:52:29.583

将您的字符串转换为`DateTime`然后使用`DateTime.ToString("yyyy-MM-dd");`

```
DateTime temp = DateTime.ParseExact(sourceDate, "dd-MM-yyyy", CultureInfo.InvariantCulture);
string str = temp.ToString("yyyy-MM-dd"); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-04T05:53:54.183

```
string sourceDateText = "31-08-2012";
DateTime sourceDate = DateTime.Parse(sourceDateText, "dd-MM-yyyy")
string formatted = sourceDate.ToString("yyyy-MM-dd"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-05-05T07:46:36.410

您可以通过以下方式将日期格式从更改`dd/MM/yyyy`为：`yyyy-MM-dd`

```
string date = DateTime.ParseExact(SourceDate, "dd/MM/yyyy", CultureInfo.InvariantCulture).ToString("yyyy-MM-dd"); 
```

在这里，`SourceDate`是变量，您将在其中获得选定的日期。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-04T05:54:03.403

您需要将输入解析为 DateTime 对象，然后将其转换为您想要的任何文本格式。

如果您不确定您将获得什么格式，您可以通过使用验证或 datetimePicker 或其他一些组件将用户限制为固定格式。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-04T06:02:53.730

这是您的主要问题：

> 源日期可以是 dd-mm-yyyy、dd/mm/yyyy、mm-dd-yyyy、mm/dd/yyyy 甚至 yyyy-MM-dd。

如果给你`01/02/2013`，是 1 月 2 日还是 2 月 1 日？你应该先解决这个问题，解析输入会容易得多。

我建议您退后一步，更详细地探索您要解决的问题。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-02-12T12:54:08.143

试试这个代码：

```
 lblUDate.Text = DateTime.Parse(ds.Tables[0].Rows[0]["AppMstRealPaidTime"].ToString()).ToString("yyyy-MM-dd"); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-08-27T12:15:28.330

您可以将可能的日期格式写入数组并解析日期，如下所示：

```
public static void Main(string[] args)
        {
            string dd = "12/31/2015"; //or 31/12/2015
            DateTime startDate;
            string[] formats = { "dd/MM/yyyy", "dd/M/yyyy", "d/M/yyyy", "d/MM/yyyy",
                                "dd/MM/yy", "dd/M/yy", "d/M/yy", "d/MM/yy", "MM/dd/yyyy"};

            DateTime.TryParseExact(dd, formats, 
            System.Globalization.CultureInfo.InvariantCulture,
            System.Globalization.DateTimeStyles.None, out startDate);

            Console.WriteLine(startDate.ToString("yyyy-MM-dd"));

        } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-11-18T10:33:30.293

```
if (DateTime.TryParse(datetoparser, out dateValue))
{
   string formatedDate = dateValue.ToString("yyyy-MM-dd");
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-06-25T08:07:53.067

```
string sourceDate = "15/06/2021T00.00.00";
DateTime Date = DateTime.Parse(sourceDate)
string date = Date.ToString("yyyy-MM-dd"); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-10-09T05:38:29.143

```
Convert.toDateTime(sourceDate).toString("yyyy-MM-dd"); 
```

# php - 雅虎股票的官方 Stock api

> ID：12257487
> 
> 赞同：1
> 
> 时间：2012-09-04T05:51:41.437
> 
> 标签：php, yahoo, yahoo-api

您可能会发现此问题已重新发布，但没有一个答案令人满意。

我想知道来自 YAHOO FINANCE 的合法和受支持的股票获取 php api 是什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T06:35:08.397

为什么不使用`YQL`- yahoo 查询语言。(http://developer.yahoo.com/yql/)

这里的例子 -

```
http://developer.yahoo.com/yql/guide/yql-code-examples.html
http://www.yqlblog.net/blog/2009/06/02/getting-stock-information-with-yql-and-open-data-tables/ 
```

# forms - 覆盖 symfony2 上的表单验证消息

> ID：12257491
> 
> 赞同：10
> 
> 时间：2012-09-04T05:52:27.160
> 
> 标签：forms, html, validation, symfony

如何覆盖 symfony2 中的表单验证消息。虽然有一个validation.xml 文件相关的模型类。我认为它验证了基于 html5 的表单。

“请匹配要求的格式”，“请填写此字段”。有什么方法可以覆盖此验证消息。

请在这方面帮助我，我被困了一天多，因为我对 symfony 完全陌生

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-04T07:31:15.890

您看到的那些消息是由浏览器创建的 HTML5 验证消息。如果要覆盖它们，则需要将 oninvalid 属性添加到与该字段关联的输入标记。您可以通过两种方式做到这一点：

在您的控制器或表单类型中，将此属性添加到表单字段：

```
$builder->add('email', 'email',array(
    'attr'=>array('oninvalid'=>"setCustomValidity('Would you please enter a valid email?')")
)); 
```

或者，在您的 twig 模板中，在呈现表单字段时添加此属性：

```
{{ form_row(form.email, { 'attr': {'oninvalid': "setCustomValidity('Please give me a nice email')"} }) }} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T07:31:32.903

由于声明断言时的 message 选项，您可以更改每个验证器的消息：

```
/**
     * @ORM\Column(type="string", length=255, unique=true)
     * @Assert\NotBlank(
     *     message="You have to choose a username (this is my custom validation message).",
     *     groups={"registration", "account", "oauth"}
     * ) 
```

您也可以通过创建文件 MyBundle/Resources/translations/validators.fr.xliff 来应用翻译

# android - Android中的时间跟踪器独立于系统时间

> ID：12257494
> 
> 赞同：1
> 
> 时间：2012-09-04T05:52:29.060
> 
> 标签：android, datetime

我试过用谷歌搜索，但仍然找不到最佳答案。

我想要的很简单，我是 Android 新手，我正在开发一款游戏，如果他每天玩的话，它会给用户一些每日奖励。我的代码是：

```
date = new Date();
    dateFormate = new SimpleDateFormat("yyyy/MM/dd");
    dateString = dateFormate.format(date);
        if(!sharedPreferences.getString("date").equals(dateString))
    {
            sharedPreferences.putString("date", dateString).commit();
            ... Here I give Bonus to user
        } 
```

但问题是，此代码取决于系统日期。用户可以轻松更改日期并获得每日奖励。一旦他开始玩游戏，我想跟踪 24 小时的时间。任何人都可以帮助我吗？这将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T06:01:38.847

如果您的应用程序可以访问互联网，您可以从自己的服务器获取时间，而不是用户时间。

只有当您收到此意图时，您才能收听`Intent.ACTION_TIME_CHANGED`并与服务器时间同步。除非用户手动更改时间，否则您不会与服务器同步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T06:39:31.310

而不是比较该日期已更改，您可以检查是否

*   日期大于上一个：分配奖金并记住日期
*   日期小于上一个：用户作弊-删除所有奖金并且不更新旧日期

这个解决方案当然不是防弹的，但比你以前的更安全

# jira - JQL：过滤其他查询

> ID：12257496
> 
> 赞同：26
> 
> 时间：2012-09-04T05:52:36.197
> 
> 标签：jira, jql

我有一个来自另一个用户的已保存查询，显示了我们开发人员的所有未处理票证。

我想要做的是过滤此查询以获取我的票：

```
ticket in (other query) and assignee = currentUser() 
```

在 JQL 中这样的事情可能吗？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-09-04T12:52:17.613

与其他 JQL 查询一起使用`AND`，例如，如果原始查询是：

```
project =  Development and status = open 
```

现在您希望选择属于您的问题：

```
project =  Development and status = open and assignee = currentUser() 
```

如果保存了其他查询，您可以使用过滤器名称：

```
filter = "Dev open issues" and assignee = currentUser() 
```

或按过滤器 ID：

```
filter = "10302" and assignee = currentUser() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-03T10:48:37.087

您可以使用以下 JQL 来实现它：

```
filter = "Your saved filter name here" AND assignee = currentUser() 
```

# vb.net - vb.net windows 应用程序条码扫描器

> ID：12257502
> 
> 赞同：0
> 
> 时间：2012-09-04T05:52:54.283
> 
> 标签：vb.net, webcam, barcode

我正在创建一个扫描条形码并识别产品的 Windows 应用程序。为此，我打算暂时使用网络摄像头。我想知道如何将我的网络摄像头与应用程序连接起来。网络摄像头是 USB 的。

该应用程序类似于当今智能手机上可用的应用程序。

请帮忙。

谢谢你！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T11:31:40.247

您可以使用 WIA 方法或 DirectShow，具体取决于您的网络摄像头驱动程序。在这两种情况下，除非您非常熟悉这两种方法，否则您可能需要使用第三方库。我们正在使用名为 Leadtools 的第三方多媒体工具包来控制我们的网络摄像头。您可以查看此[论坛帖子](http://support.leadtools.com/CS/forums/10345/ShowPost.aspx)以获取更多信息。此外，该工具包支持读取条形码。有关更多信息，请参阅本[教程](http://www.leadtools.com/help/leadtools/v175/dh/to/leadtools.topics.barcode~ba.topics.readingbarcodes.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T07:25:01.690

您需要使用**Windows Image Acquisition (WIA)**

以下是您可以使用的几个资源。

[**如何在 C# 中通过 .NET Framework 4.0 和 Microsoft Expression Encoder 4 使用网络摄像头**](http://www.codeproject.com/Articles/202464/How-to-use-a-WebCam-in-C-with-the-NET-Framework-4)

[**C# WebCam 用户控件源**](http://blogs.msdn.com/b/markhsch/archive/2007/11/19/c-webcam-user-control-source.aspx)

[**如何在 .NET 中连接到 USB 网络摄像头？**](https://stackoverflow.com/questions/113426/how-do-i-connect-to-a-usb-webcam-in-net)

或 DirectShow.Net

[**使用 DirectShow.NET 的网络摄像头**](http://www.codeproject.com/Articles/18511/Webcam-using-DirectShow-NET)

# javascript - jQuery .on 点击 事件不会发生

> ID：12257509
> 
> 赞同：0
> 
> 时间：2012-09-04T05:53:22.380
> 
> 标签：javascript, onclick, jquery, jquery-on

您好，感谢您的阅读。我一直在尝试避免使用 HTML`onclick="__"`引用，而是将这些事件放在我的 .js 文件中。在阅读了 jQuery 的 .click() 和 .on() 事件之后，我尝试在我的代码中使用它作为按钮。

***编辑***在我匆忙弥补`<p>`没有其余内容的情况下，我输入了“name”而不是“id”。许多答案建议我切换到 a`p[name=p+`或`#p+`引用，但我的主要问题是我什至无法在引用 id/name 之前点击警报。再次感谢您的回答。

HTML：

```
<p name="pBananas"> junk </p> 
<button class="deleter" id="dBananas" name="Bananas">Delete</button> 
```

JS：

```
$(document).ready(function() {
    $('.deleter').click(function() {
        alert('click function works');
        $("p" + $(this).attr("name")).remove();
    });
}); 
```

当我单击按钮时，上面的代码甚至不会发出警报。我还尝试按名称和 ID 引用按钮，然后按`$(document).ready($('.deleter')___`.

我也尝试使用该`$(handler)`格式在文档准备好后设置点击事件。两种方法似乎都行不通。此时，我求助于`onclick="deleteButton()"`并在我的 .js 文件中有一个`deleteButton()`函数，但该函数不会检测到`$(this)`，只会删除所有`<p>`标签。

我的 javascript 的其余部分正在工作。我没有尝试`.on()`在 HTML 的底部包含它，但我也在尝试避免在我的 HTML 中使用脚本。为了完整起见，我一直在 Chrome 和 Firefox 上进行测试，使用 .jsp 文件呈现 HTML。

再次感谢。

编辑

这是我引用我的 jquery 和 js 的方式，直接复制粘贴。

```
<script type="text/javascript"
src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript" src="javascript/index.js"></script>
</head> 
```

这是我的 html 指向 div 的样子

插入：

```
<body>
    <div id="wrapper">
        <div id="header">Card Draw Probability Calculator</div>
        <div id="main">
            <div id="cardList">
                <fieldset>
                    <legend> Select cards for probability calculation</legend>

                        <div id="innerCardList"></div> 
```

下面是它的`<p>`生成方式：

```
function newestCardListLineMaker() {
    var $newLine = $('<p id="newestPara"><input type="checkbox" name="new" value="none"/> <input class="cardText" type="text" maxlength="30" name="newestCard" /> Quantity <input type="text" maxlength="1" class="quantityText" name="newestQuant" /><button class="deleter" id="newestDelete">Delete</button><br/></p>');

    $("#innerCardList").append($newLine); 
```

**另一方面，我之前应该看到它很重要：`.click`or`.on(click, handler)`引用的 HTML 是由另一个 js 函数创建的。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T06:02:34.913

**[工作演示](http://jsfiddle.net/ka5zU/1/)**

```
<p id="pBananas"> junk </p> 
    <button class="deleter" id="dBananas" name="Bananas">Delete</button>​

    $(document).ready(function() {
        $('.deleter').click(function() {
            alert('click function works');
            $("#p" + $(this).attr("name")).hide();
        });
    });​ 
```

编辑**[过的 Jsfiddle](http://jsfiddle.net/RvuN9/2/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T06:30:35.310

尝试使用 .on() 函数，这样您的代码将是：

```
$(document).ready({
  $('.deleter').on('click', function(){
     //do stuff here
  });
}); 
```

更好的是：

```
$(document).ready({
   $('div_above_.deleter').on('click', '.deleter', function(){
     // do stuff here
   });
}); 
```

希望这对您有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T06:32:37.447

我已经修改了你的 javascript 代码检查它。

```
$('.deleter').click(function() {
        alert('click function works');
        var p="p"+$(this).attr("name");
        $('p[name='+p+']').remove();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T05:59:02.070

对我来说它有效。虽然没有删除 Paragraph 元素，所以您的代码应该如下所示：

```
<p id="pBananas"> junk </p> 
<button class="deleter" id="dBananas" name="Bananas">Delete</button> 
```

和

```
$(document).ready(function() {
    $('.deleter').click(function() {
        alert('click function works');
        $("#p" + $(this).attr("name")).remove();
    });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-04T06:08:11.203

```
$(document).ready(function() {
    $('.deleter').click(function() {
        alert('click function works');
        //alert($(this).attr("name"));
        $("p[name=p" + $(this).attr("name") + "]").remove();
    });
});​ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-05T20:33:11.937

我用来完成`.on('click')`活动的最终代码是：

```
$(document).ready(function() {
    $("div#innerCardList").on("click", "button.deleter", function() {
        var paraName = $(this).closest("p").attr("id");
        $("#" + paraName).remove();
    });

}); 
```

我想分配点击事件的 HTML 元素是在页面加载后生成的。我需要将事件委托给包含的 div。

感谢所有的帮助和不同的观点！

# configuration - 如何在 hadoop-evn.sh 中设置内存

> ID：12257510
> 
> 赞同：0
> 
> 时间：2012-09-04T05:53:22.900
> 
> 标签：configuration, hadoop

如何在 hadoop-env.sh 中设置内存？

```
# Extra Java runtime options
# export HADOOP_OPTS=-server 
```

如果我想设置NN:20G DN:4G，我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T16:51:05.893

您可以将它们设置在`hadoop-env.sh`.

```
export HADOOP_NAMENODE_OPTS="-Xmx20G ... "
export HADOOP_DATANODE_OPTS="-Xmx4G ... " 
```

# html - 填充浮动元素之间的空间

> ID：12257517
> 
> 赞同：4
> 
> 时间：2012-09-04T05:54:12.337
> 
> 标签：html, css, css-float

我有容器 div（灰色框），里面有浮动元素：![在此处输入图像描述](../Images/b73ed5f595c104e2f2fd166d57502751.png)

条向左浮动，如果向右浮动，则为按钮。现在我希望文本框填充栏和按钮之间的空白区域。

**请注意，在打字过程中，条数可能会有所不同，因此文本框应该能够相应地调整大小。**因此，具有静态宽度的解决方案（即使它们以 % 表示）将不起作用。

我该怎么做？

**编辑：**

这是我的代码：

HTML：

```
<div id="dp-container">
    <ol id="tag-list">
        <li dp-item class="dp-bar-table">sales</li>
        <li dp-item class="dp-bar-field">cost</li>
    </ol>

    <input id="dp-input-str" type="text">
    <input type="button" value="GO" style="float: right;">
    <div style="clear:both;"></div>
</div>​ 
```

CSS：

```
body {
    font-family: "Lucida Grande", Verdana, Arial, Helvetica, sans-serif;
}

ol {
    display: inline;
    margin: 0;
    padding: 0;
    vertical-align: middle;
    list-style-type: none;
}

li[dp-item] {
    background-color: #e0ffff;
    display: inline-block;
    float: left;
    padding: 3px;
    margin: 2px;
    background-image: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#FEFEFE), to(#EBEBEB));
    border: 1px solid lightgray;
    border-radius: 3px;
}

.dp-bar-table {
    color: blue;
    font-weight: bold;
}

.dp-bar-field {
    color: blue;
}

#dp-input-str {
    border: none;
    display: inline-block;
    margin-left: 5px;
    margin-top: 3px;
    width: auto;
    outline: none;
    font-size: 12pt;
    vertical-align: middle;
    line-height: 25px;
    box-shadow: none;

#dp-container {
    display: inline-block;
    border: 1px solid #d3d3d3;
    height: 32px;
    padding: 3px;
    width: 90%;
}

#dp-find-str {
    color: gray;
    float: left;
    margin-top: 10px;
    margin-right: 8px;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T06:14:44.130

可能是你想要检查这个[http://jsfiddle.net/bYmM4/7/](http://jsfiddle.net/bYmM4/7/)。像这样写：

**HTML**

```
<div class="main">
 <input type="button" value="test" />
 <input type="button" value="test" />
    <input type="button" value="Go" class="go"/>
    <div class="textbox">
     <input type="text" />
    </div>
</div> 
```

**CSS**

```
.main{position:relative; border:#333 1px solid}
input[type="button"]{width:8%; float:left;}
.textbox{
    background-color:grey;
    overflow:hidden;
    position:relative;
}
.textbox input{
    width:100%;
    -moz-box-sizing:border-box;
    -webkit-box-sizing:border-box;
    box-sizing:border-box;
}
input.go{float:right} 
```

# android - 我们可以在 android 小部件中显示广告吗

> ID：12257520
> 
> 赞同：1
> 
> 时间：2012-09-04T05:54:39.303
> 
> 标签：android

我正在创建一个免费版本的 android 小部件，我想在其中显示广告。但是当我们在 xml 中添加 Google Adsense 时

```
 <com.google.ads.GoogleAdView
    android:id="@+id/adview"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" /> 
```

它显示以下错误。（我也添加了jar文件）

```
09-04 11:14:00.418: W/AppWidgetHostView(2561): updateAppWidget couldn't find any view, using error view
09-04 11:14:00.418: W/AppWidgetHostView(2561): android.view.InflateException: Binary XML file line #16: Error inflating class com.google.ads.GoogleAdView
09-04 11:14:00.418: W/AppWidgetHostView(2561):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:576)
09-04 11:14:00.418: W/AppWidgetHostView(2561):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
09-04 11:14:00.418: W/AppWidgetHostView(2561):  at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
09-04 11:14:00.418: W/AppWidgetHostView(2561):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
09-04 11:14:00.418: W/AppWidgetHostView(2561):  at android.widget.RemoteViews.apply(RemoteViews.java:930)
09-04 11:14:00.418: W/AppWidgetHostView(2561):  at android.appwidget.AppWidgetHostView.updateAppWidget(AppWidgetHostView.java:219)
09-04 11:14:00.418: W/AppWidgetHostView(2561):  at android.appwidget.AppWidgetHost.updateAppWidgetView(AppWidgetHost.java:250)
09-04 11:14:00.418: W/AppWidgetHostView(2561):  at android.appwidget.AppWidgetHost$UpdateHandler.handleMessage(AppWidgetHost.java:73)
09-04 11:14:00.418: W/AppWidgetHostView(2561):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-04 11:14:00.418: W/AppWidgetHostView(2561):  at android.os.Looper.loop(Looper.java:123)
09-04 11:14:00.418: W/AppWidgetHostView(2561):  at android.app.ActivityThread.main(ActivityThread.java:4627)
09-04 11:14:00.418: W/AppWidgetHostView(2561):  at java.lang.reflect.Method.invokeNative(Native Method)
09-04 11:14:00.418: W/AppWidgetHostView(2561):  at java.lang.reflect.Method.invoke(Method.java:521)
09-04 11:14:00.418: W/AppWidgetHostView(2561):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
09-04 11:14:00.418: W/AppWidgetHostView(2561):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
09-04 11:14:00.418: W/AppWidgetHostView(2561):  at dalvik.system.NativeStart.main(Native Method)
09-04 11:14:00.418: W/AppWidgetHostView(2561): Caused by: java.lang.ClassNotFoundException: com.google.ads.GoogleAdView in loader dalvik.system.PathClassLoader[.]
09-04 11:14:00.418: W/AppWidgetHostView(2561):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
09-04 11:14:00.418: W/AppWidgetHostView(2561):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
09-04 11:14:00.418: W/AppWidgetHostView(2561):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
09-04 11:14:00.418: W/AppWidgetHostView(2561):  at android.view.LayoutInflater.createView(LayoutInflater.java:466)
09-04 11:14:00.418: W/AppWidgetHostView(2561):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:565)
09-04 11:14:00.418: W/AppWidgetHostView(2561):  ... 15 more 
```

任何人都建议是否可以以任何其他方式在 android 小部件中显示广告。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T06:14:29.817

小部件用于`RemoteViews`显示其屏幕。`RemoteViews`通常要求所有显示类都可用，而无需加载整个 APK。[http://developer.android.com/guide/topics/appwidgets/index.html#CreatingLayout](http://developer.android.com/guide/topics/appwidgets/index.html#CreatingLayout)向您展示了您可以使用哪些 View 类：您目前无法使用任何自定义视图，因此目前无法使用`com.google.ads.GoogleAdView`in一个小部件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-02T01:07:52.173

实际上，您可以在小部件中显示[自定义原生广告](https://developers.google.com/mobile-ads-sdk/docs/dfp/android/native#loading_custom_native_ad_formats)。它们不会强迫您使用任何特定类型的视图，而不是[横幅广告](https://developers.google.com/mobile-ads-sdk/docs/dfp/android/banner#app_events)或[插页式广告。](https://developers.google.com/mobile-ads-sdk/docs/dfp/android/interstitial)

但是，请记住，在这种情况下，您将面临另外两个问题：

1.  您的应用现在负责显示广告内容、处理点击并通知 sdk。
2.  小部件特定问题。您应该记住，当您的应用程序被系统杀死时，您的内容数据对象可能会被破坏。但是小部件上的广告内容仍然会显示。这可能会导致应用程序行为不当，因为。

*所以，在决议中：*

我同意现在看起来我们不能在小部件中使用普通广告。但是，如果您只需要显示一些不需要用户交互或向 sdk 报告点击的图像或文本 - 您可以尝试使用自定义原生广告并将该内容集成到您的小部件中。

# ios - 如何更改 NavigationBar 上 BarButtonItem 的文本？

> ID：12257522
> 
> 赞同：11
> 
> 时间：2012-09-04T05:54:52.973
> 
> 标签：ios, xamarin.ios, uinavigationbar, uibuttonbaritem

我正在尝试创建一个可以编辑的项目列表。像这样的东西：

![在此处输入图像描述](../Images/188b4c8038e4fdb487908ba5224c102b.png)

为此，我在视图顶部添加了一个 NavigationBar，然后在 XCode 设计器中添加了 2 个 Bar Button Items。我将左侧按钮的标识符设置为添加，右侧按钮的标识符设置为编辑。

当我单击编辑时，我想将文本更改为完成。我尝试了各种方法，例如`btnEdit.Title = "Done"`，但它根本不需要。

我看过几篇推荐 .SetTitle 的博客文章，但 UIButtonBarItem 没有该方法（至少在 MonoTouch 中）。

那么，如何更改“编辑”按钮的标题？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-16T22:32:06.697

我解决了。关键是我将“编辑”按钮的标识符设置为系统值（例如 UIBarButtonSystemItemEdit），而您无法更改它们的文本（现在有意义）。我将标识符改回自定义并设置 .Title 工作正常。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-04T06:03:18.727

Why don't you try changing the `navigationItem.rightbarButtonItem` property ?

**1.** Set up two buttons, one for edit and one for done

```
 UIBarButtonItem*editButton=[[UIBarButtonItem alloc] initWithTitle:@"Edit" style:UIBarButtonItemStylePlain target:self action:@selector(editAction)];

 UIBarButtonItem*doneButton=[[UIBarButtonItem alloc] initWithTitle:@"Done" style:UIBarButtonItemStylePlain target:self action:@selector(doneAction)]; 
```

**2.** And wherever necessary, in `editAction` preferrably change the `rightBarButtonItem` like:

```
self.navigationItem.rightBarButtonItem=doneButton; 
```

And if you need the `editButton` back

```
 self.navigationItem.rightBarButtonItem=editButton; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-04T06:04:01.763

```
if ([self.navigationItem.rightBarButtonItem.title isEqualToString:@"Edit"]) 
{
    self.navigationItem.rightBarButtonItem.title= @"Done";
} 
```

hope this helps. happy coding :)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-04T06:02:47.770

像**UIBarButtonItem *btnEdit**这样对我有用；是.h中的类memember；

```
btnEdit = [[UIBarButtonItem alloc]initWithTitle:@"Edit" style:UIBarButtonItemStyleBordered target:self action:@selector(btnEditClicked)];
self.navigationItem.leftBarButtonItem = btnEdit;
//[btnEdit release]; 
```

现在调用的选择器将是：

```
-(void)btnEditClicked
{
  if([btnEdit.title isEqualToString:@"Edit"])
  {
    [btnEdit setTitle:@"Done"];
  }
  else
  {
    [btnEdit setTitle:@"Edit"];
  }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-01-22T06:41:52.027

控制从栏按钮拖动到文件（使用助手编辑器），创建出口（在这种情况下，它称为“barButton”。然后，添加：

斯威夫特 3.0：

```
self.barButton.title = "New title" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-16T10:56:14.360

重新新建按钮，如下所示。.

```
self.navigationItem.leftBarButtonItem = UIBarButtonItem(title: "title", style: UIBarButtonItemStyle.plain, target: self, action: #selector(actionMethod)) 
```

# android - android 中的更新列表视图，因为适配器在单独的类中定义

> ID：12257526
> 
> 赞同：2
> 
> 时间：2012-09-04T05:55:11.330
> 
> 标签：android, listview, adapter

当我经历了许多关于如何在我的应用程序中刷新我的列表视图但仍然无法做到这一点的问题时。

我可以使用的帖子中给出的建议数量，`mylist.NotifydataSetCahnged()`但我仍然无法解决在哪里应用它。因为我的适配器是在单独的活动中定义的。

我在列表项的每一行都有一个文本视图和一个加号按钮。

单击加号按钮时，我希望它在不刷新整个活动的情况下异步更新相应文本视图中的值。加号按钮单击事件在我的 baseadapter 类中单独声明。

我不知道如何更新我的列表视图，因为我在每次单击加号按钮时都调用意图来刷新我的列表视图。

帮帮我吧。

```
public class MyOrderList extends Activity {

    public Cursor food_items = null;
    private String item_name;
    private String item_descrp;
    private String item_price;
    private ArrayList<ItemDetails> image_details;

    private String item_id;
    private Cursor order_item;
    private Button order_btn;
    private Button cancel_btn;
    private SQLiteDatabase db;

    private AlertDialog mydialog;
    protected String table_no;
    protected String order_no;
    protected int quantity;
    protected int itemid;
    protected Cursor temp_item;
    public float Total = 0;
    private ListView lv1;
    public int bill_count = 100;
    private Cursor fav_item;
    private String table_name;
    private Calendar c;
    private TextView Title_txt;
    private String device_id;
    private String print_order_items = "";
    private String col_name;

    public static String APP_ID = "346381592110362"; // Replace your App ID

    public Facebook facebook;
    public AsyncFacebookRunner mAsyncRunner;
    String FILENAME = "AndroidSSO_data";
    public SharedPreferences mPrefs;
    private AlertDialog noItemalert;
    private Dialog checkOut;
    private Cursor mac;
    private String Main_table = "T1";

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.layout_myorder_view);
        db = openOrCreateDatabase("restaurant", MODE_WORLD_READABLE, null);
        c = Calendar.getInstance();

        // ----initilaizee facebook objects-
        facebook = new Facebook(APP_ID);

        mAsyncRunner = new AsyncFacebookRunner(facebook);
        SessionStore.restore(facebook, this);

        SessionEvents.addAuthListener(new SampleAuthListener());
        SessionEvents.addLogoutListener(new SampleLogoutListener());
        table_name = getIntent().getStringExtra("table_name");
        // WifiManager wifiManager = (WifiManager)
        // getSystemService(Context.WIFI_SERVICE);
        // WifiInfo wInfo = wifiManager.getConnectionInfo();
        // String macAddress = wInfo.getMacAddress();
        //
        // Log.d("IMEI no.", macAddress);
        // mac = db.rawQuery("select * from imei_tbl where imei_code='"
        // + macAddress + "'", null);
        // mac.moveToFirst();
        // if (mac != null)
        // Main_table = mac.getString(1);

        lv1 = (ListView) findViewById(R.id.myorder_lv);
        Title_txt = (TextView) findViewById(R.id.myorder_total);
        Title_txt.setText("Total :" + Total);

        order_btn = (Button) findViewById(R.id.myorder_btn);
        cancel_btn = (Button) findViewById(R.id.myorder_backbtn);

        cancel_btn.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                Intent intent = new Intent(MyOrderList.this,
                        FoodCategoryTabs.class);
                Bundle extras = new Bundle();
                extras.putString("category_id", "food_category");
                extras.putString("category_name", "food_category_id");
                intent.putExtras(extras);
                startActivity(intent);

            }
        });

        // ----------------on order click--------------
        order_btn.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                int flagx = 0;
                if (food_items.getCount() != 0)
                    showpopup();
                else
                    checkOutPopUp(flagx);

            }

        });

    }

    protected void showpopup() {
        final int flag = 1;

        mydialog = new AlertDialog.Builder(this)
                .setTitle("My Order Alert")
                .setMessage(
                        "Thank you Dear Customer, Your Order will processed soon Would you like to proceed further...")
                .setPositiveButton("Ok", new AlertDialog.OnClickListener() {

                    public void onClick(DialogInterface dialog, int which) {

                        continueFunction();
                        checkOutPopUp(flag);
                    }
                })
                .setNeutralButton("Discard", new AlertDialog.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                        mydialog.dismiss();

                    }
                })

                .create();
        mydialog.show();
    }

    protected void checkOutPopUp(final int flag_value) {
        checkOut = new AlertDialog.Builder(MyOrderList.this)
                .setTitle("CheckOut Alert !")
                .setMessage(
                        "Would you like to continue to add items or checkout..")
                .setPositiveButton("Continue",
                        new AlertDialog.OnClickListener() {

                            public void onClick(DialogInterface dialog,
                                    int which) {

                                Intent intent = new Intent(MyOrderList.this,
                                        FoodCategoryTabs.class);
                                Bundle extras = new Bundle();
                                extras.putString("category_id", "food_category");
                                extras.putString("category_name",
                                        "food_category_id");
                                intent.putExtras(extras);
                                startActivity(intent);

                            }

                        })
                .setNegativeButton("Checkout",
                        new AlertDialog.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                    int which) {
                                if (flag_value != 0) {
                                    Toast.makeText(getApplicationContext(),
                                            "checkout click", Toast.LENGTH_LONG)
                                            .show();
                                    DBConnection dbConnection = new DBConnection(

                                    getApplicationContext());
                                    try {

                                        dbConnection.createSocket();
                                        dbConnection.dataOutputStream
                                                .writeUTF("3");
                                    } catch (Exception e) {

                                    }

                                    db.delete(table_name, "order_id=100", null);

                                    Cursor fav_cursor = db.rawQuery(
                                            "select * from temp_favourite_tbl",
                                            null);
                                    fav_cursor.moveToFirst();
                                    int length = fav_cursor.getCount();
                                    try {
                                        dbConnection.dataOutputStream
                                                .write(length);
                                    } catch (IOException e1) {
                                        // TODO Auto-generated catch block
                                        e1.printStackTrace();
                                    }

                                    if (fav_cursor != null) {
                                        do {
                                            try {
                                                String query = "insert into favourite_tbl values('";
                                                query = query
                                                        + fav_cursor
                                                                .getString(0)
                                                        + "','"
                                                        + fav_cursor
                                                                .getString(1)
                                                        + "')";
                                                dbConnection.dataOutputStream
                                                        .writeUTF(query);
                                            } catch (Exception e) {

                                            }

                                        } while (fav_cursor.moveToNext());
                                    }
                                    db.execSQL("DROP TABLE IF EXISTS temp_favourite_tbl");
                                    db.execSQL("create table if not exists temp_favourite_tbl(item_id varchar2,user_id varchar2,primary key(item_id))");
                                }
                                if (HeaderFooterActivity.facebook != null) {
                                    if (HeaderFooterActivity.facebook
                                            .isSessionValid()) {
                                        ContentValues cv = new ContentValues();
                                        cv.put("login_txt", "Login");
                                        cv.put("username", "");
                                        cv.put("user_id", "");
                                        db.update("login_tbl", cv, null, null);

                                        HeaderFooterActivity.mAsyncRunner
                                                .logout(getApplicationContext(),
                                                        new LogoutRequestListener());

                                    }
                                } else {

                                    Log.d("logout me exeption", "");
                                }

                                Intent intent = new Intent(MyOrderList.this,
                                        GridViewMenu.class);

                                startActivity(intent);

                            }
                        })

                .create();
        checkOut.show();

    }

    @Override
    protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();
        table_name = getIntent().getStringExtra("table_name");
        getFoodItems(table_name);
        // calculateOrder();
        final ListView lv1 = (ListView) findViewById(R.id.myorder_lv);
        MyOrderAdapter ad = new MyOrderAdapter(this, image_details, table_name);
        ad.notifyDataSetChanged();
        lv1.setAdapter(ad);
    }

    public void continueFunction() {
        try {
            Cursor customer_order = db.rawQuery(
                    "select bill_no from auto_bill", null);
            customer_order.moveToFirst();

            String bill_no = Main_table + customer_order.getCount();
            DBConnection dbConnection = new DBConnection(
                    getApplicationContext());
            dbConnection.createSocket();

            dbConnection.dataOutputStream.writeUTF("2");

            dbConnection.dataOutputStream
                    .writeUTF("insert into auto_bill(bill_no) values('"
                            + bill_no + "')");
            db.execSQL("insert into auto_bill(bill_no) values('" + bill_no
                    + "')");

            System.out.println("passed");

            dbConnection.dataOutputStream
                    .writeUTF("insert into CUSTOMER_BILL(table_no,bill_no,status,price,day,month,year) values('"
                            + Main_table
                            + "','"
                            + bill_no
                            + "','UNPAID',"
                            + Total
                            + ",'"
                            + c.get(Calendar.DAY_OF_MONTH)
                            + "','"
                            + (c.get(Calendar.MONTH) + 1)
                            + "','"
                            + c.get(Calendar.YEAR) + "')");
            Log.d("Month", "" + c.get(Calendar.MONTH));
            ArrayList<String> specialReq = new ArrayList<String>();
            ArrayList<String> quantityList = new ArrayList<String>();
            ArrayList<String> itemNameList = new ArrayList<String>();
            String tempItemId = null;
            Cursor cursor_order = db
                    .rawQuery(
                            "select item.Item_name, order_tbl.special_request,order_tbl.quantity from item, order_tbl where order_tbl.item_id=item.item_code",
                            null);
            cursor_order.moveToFirst();
            if (cursor_order != null) {
                do {

                    itemNameList.add(cursor_order.getString(0));
                    quantityList.add(cursor_order.getInt(2) + "");

                    specialReq.add(cursor_order.getString(1));
                } while (cursor_order.moveToNext());
                dbConnection.dataOutputStream.write(itemNameList.size());
                for (int l = 0; l < itemNameList.size(); l++) {
                    dbConnection.dataOutputStream.writeUTF(Main_table);
                    dbConnection.dataOutputStream.writeUTF(itemNameList.get(l));
                    dbConnection.dataOutputStream.writeUTF(specialReq.get(l));
                    dbConnection.dataOutputStream.writeUTF(quantityList.get(l));
                }
            }

        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            Log.d("EDC", "" + e);
        }

        db.delete(table_name, col_name + " = '" + order_no + "'", null);

    }

    public void getFoodItems(String tableName) {

        food_items = db.rawQuery("select * from " + tableName, null);
        food_items.moveToFirst();
        image_details = getFavResults();
        if (food_items.getCount() != 0) {
            Log.d("count khali nahi h", "bilkl nai h");

            calculateOrder();

        }

    }

    public void calculateOrder() {
        Cursor order;

        Cursor customer_order;
        String bill_no;

        int count;
        Cursor favourite_cursor;

        try {
            DBConnection dbcon = new DBConnection(getApplicationContext());
            db = dbcon.getConnection();
            food_items.moveToFirst();

            col_name = food_items.getColumnName(0);
            Log.d("----------------col_name", col_name);

            if (food_items != null) {
                food_items.moveToFirst();
                Log.d("----------------col_name", "" + food_items.getCount());
                order_no = food_items.getString(0);

                do {
                    order = db.rawQuery(
                            "select item_price,item_name from item where item_code='"
                                    + food_items.getString(1) + "'", null);
                    order.moveToFirst();
                    quantity = food_items.getInt(3);
                    Total += quantity * order.getInt(0);
                    Title_txt.setText("Total :" + Total);
                    Log.d("-------to", "" + Total);
                } while (food_items.moveToNext());
            }

        } catch (Exception e) {
            Log.d("dialog error", e.toString());
        }

    }

    private ArrayList<ItemDetails> getFavResults() {
        ArrayList<ItemDetails> results = new ArrayList<ItemDetails>();

        try {
            if (food_items != null) {
                Log.d("order_tbl ID", "" + food_items.getString(1));
                do {
                    fav_item = db.rawQuery(
                            "select * from item where item_code='"
                                    + food_items.getString(1) + "'", null);
                    fav_item.moveToFirst();
                    item_id = fav_item.getString(1);
                    item_name = fav_item.getString(0);
                    item_descrp = fav_item.getString(2);
                    item_price = fav_item.getString(17);
                    ItemDetails item_details = new ItemDetails();
                    item_details.setName(item_name);
                    item_details.setItem_id(item_id);
                    item_details.setItemDescription(item_descrp);
                    item_details.setPrice(item_price);
                    item_details.setImage(fav_item.getBlob(10));
                    item_details.setcount(food_items.getInt(3));
                    results.add(item_details);
                } while (food_items.moveToNext());

            }
        } catch (Exception e) {
            Log.d("Coooooool Errorrrrrrrrrrrr", e.toString());
        }
        db.close();
        return results;
    }

//-----and myOrderAdapter class----------------------------

public class MyOrderAdapter extends BaseAdapter {

    @Override
    public void notifyDataSetChanged() {
        // TODO Auto-generated method stub
        super.notifyDataSetChanged();
    }

    private static ArrayList<ItemDetails> itemDetailsrrayList;

    private Integer[] imgid = { R.drawable.coffee, R.drawable.coffee,
            R.drawable.coffee, R.drawable.coffee, R.drawable.coffee,
            R.drawable.coffee };

    private LayoutInflater l_Inflater;

    private Context context;

    private String table_name;

    public MyOrderAdapter(Context context, ArrayList<ItemDetails> results,
            String table_name) {
        itemDetailsrrayList = results;
        l_Inflater = LayoutInflater.from(context);
        this.context = context;
        this.table_name = table_name;

    }

    public int getCount() {
        return itemDetailsrrayList.size();
    }

    public Object getItem(int position) {
        return itemDetailsrrayList.get(position);
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder = new ViewHolder();
        if (convertView == null) {
            convertView = l_Inflater.inflate(R.layout.layout_myorder, parent,
                    false);

            holder.txt_itemName = (TextView) convertView
                    .findViewById(R.id.myorder_titletag);

            holder.txt_itemPrice = (TextView) convertView
                    .findViewById(R.id.myorder_price);
            holder.txt_itemQuantity = (TextView) convertView
                    .findViewById(R.id.myorder_quantity);
            holder.itemImage = (ImageView) convertView
                    .findViewById(R.id.myorder_food_img);
            holder.plusBtn = (ImageButton) convertView
                    .findViewById(R.id.myorder_plus_btn);
            holder.minusBtn = (ImageButton) convertView
                    .findViewById(R.id.myorder_minus_btn);
            holder.removeBtn = (Button) convertView
                    .findViewById(R.id.myorder_remove_btn);
            holder.edittext = (TextView) convertView
                    .findViewById(R.id.myorder_edit_txt);

            holder.plusBtn.setOnClickListener(new View.OnClickListener() {

                private SQLiteDatabase db;
                private ItemDetails item_list;
                private ContentValues cv;
                int count = 1;

                @Override
                public void onClick(View v) {
                    item_list = itemDetailsrrayList.get((Integer) v.getTag());
                    count = item_list.getcount();
                    count++;

                    try {
                        DBConnection dbcon = new DBConnection(context);
                        db = dbcon.getConnection();
                        cv = new ContentValues();
                        cv.put("quantity", count);
                        db.update(table_name, cv,
                                "item_id='" + item_list.getItem_id() + "'",
                                null);
                        Intent intent = new Intent(context
                                .getApplicationContext(), MyOrderList.class);
                        intent.putExtra("table_name", table_name);
                        context.startActivity(intent);
                    } catch (Exception e) {
                        Log.d("Count", "" + e);
                    }

                }
            });

            holder.minusBtn.setOnClickListener(new View.OnClickListener() {

                private SQLiteDatabase db;
                private ItemDetails item_list;
                private ContentValues cv;
                int count;

                @Override
                public void onClick(View v) {

                    item_list = itemDetailsrrayList.get((Integer) v.getTag());
                    count = item_list.getcount();

                    if (count > 1)
                        count--;
                    else
                        count = 1;

                    try {
                        DBConnection dbcon = new DBConnection(context);
                        db = dbcon.getConnection();
                        cv = new ContentValues();
                        cv.put("quantity", count);
                        db.update(table_name, cv,
                                "item_id='" + item_list.getItem_id() + "'",
                                null);
                        Intent intent = new Intent(context
                                .getApplicationContext(), MyOrderList.class);
                        intent.putExtra("table_name", table_name);
                        context.startActivity(intent);

                    } catch (Exception e) {
                        Log.d("Count", "" + e);
                    }

                }
            });

            holder.removeBtn.setOnClickListener(new View.OnClickListener() {

                private SQLiteDatabase db;

                private ItemDetails item_list;
                private ContentValues cv;

                @Override
                public void onClick(View v) {

                    try {
                        item_list = itemDetailsrrayList.get((Integer) v
                                .getTag());

                        DBConnection dbcon = new DBConnection(context);
                        db = dbcon.getConnection();

                        db.delete(table_name,
                                "item_id='" + item_list.getItem_id() + "'",
                                null);
                        db.close();

                        Intent intent = new Intent(context
                                .getApplicationContext(), MyOrderList.class);
                        intent.putExtra("table_name", table_name);
                        context.startActivity(intent);

                    } catch (Exception e) {
                        Log.d("errorrrrrr", e.toString());
                    }

                }
            });

            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }

        holder.txt_itemName
                .setText(itemDetailsrrayList.get(position).getName());
        holder.txt_itemQuantity.setText("Quantity");

        holder.txt_itemPrice.setText("Rs :"
                + itemDetailsrrayList.get(position).getPrice());
        holder.itemImage.setImageBitmap(itemDetailsrrayList.get(position)
                .getImage());

        holder.edittext.setText(Integer.toString(itemDetailsrrayList.get(
                position).getcount()));

        holder.plusBtn.setTag(position);
        holder.minusBtn.setTag(position);

        holder.removeBtn.setText("Remove");
        holder.removeBtn.setTag(position);

        return convertView;
    }

    public class ViewHolder {

        public TextView edittext;
        public TextView txt_itemQuantity;
        public ImageButton minusBtn;
        public ImageButton plusBtn;
        public Button removeBtn;

        TextView txt_itemName;
        TextView txt_itemDescription;
        TextView txt_itemPrice;
        ImageView itemImage;

        public ViewHolder() {
            // TODO Auto-generated constructor stub
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T06:57:06.747

我已经这样做了几次，在一个单独的类中定义我的适配器并刷新它的数据。不确定这是否是正确的方式，但至少它对我来说就像一种魅力。

我正在做的事情是清除我用来填充列表视图的所有 ArrayList，而不是添加所有新项目并设置`adapter.notifySetDataChanged();`到我的适配器。

这是一个示例：

如果我在 onCreate 中像这样填充我的列表视图，例如：

```
ArrayList<String> ids = new ArrayList<String>();
ids.add("one");
ids.add("two");
ids.add("three");

ListView lview = (ListView) findViewById(R.id.mylist);
CustomAdapter adapter = new CustomAdapter(ids);
lview.setAdapter(adapter); 
```

例如，如果我想在按钮单击或任何其他事件上更新我的列表视图，我只需这样做：

```
 ids.clear();
   ids.add("four");
   ids.add("five");
   ids.add("six");

   adapter.notifySetDataChanged(); 
```

瞧！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-29T16:12:09.990

每当您想更新**列表视图**或**网格**视图时， 您必须**创建一个**带有更新数组的新适配器。

```
listView.setAdapter(new adapter());
listView.invalidateViews(); 
```

# batch-file - 如何从 bat 文件运行 skype.exe

> ID：12257530
> 
> 赞同：0
> 
> 时间：2012-09-04T05:55:33.000
> 
> 标签：batch-file

我想在 bat 文件中运行以下（工作）Windows 命令

```
C:\Program Files\Skype\Phone\Skype.exe /secondary 
```

我已在 bat 文件中放置了以下说明，但它没有运行

```
start "My Skype Runner" "C:\Program Files\Skype\Phone\Skype.exe" "secondary" 
```

有人可以指导我做错了什么以及如何纠正它。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T06:48:02.577

我试过以下并且它有效：

```
start "My Skype Runner" "C:\Program Files\Skype\Phone\Skype.exe" "/secondary" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T06:06:50.153

Write the following command in batch file:

```
"C:\Program Files\Skype\Phone\Skype.exe" /secondary 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-19T18:33:00.037

我在记事本中写了这个，把它保存为 3skypes.bat 可能不是最漂亮但有效！输入您自己的 Skype 用户和密码，只是说...

```
start "Open3Skypes" "C:\Program Files (x86)\Skype\Phone\skype.exe" /username:XXX /password:YYY

ping -n 10 localhost 

start "" "C:\Program Files (x86)\Skype\Phone\skype.exe" /secondary /username:AAA password:BBB

ping -n 10 localhost 

start "" "C:\Program Files (x86)\Skype\Phone\skype.exe" /secondary /username:CCC /password:DDD 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-06T17:56:56.173

我试过这个，但 Windows 8.1 的唯一有效解决方案是：

> 开始 C:\"程序文件 (x86)"\Skype\Phone\Skype.exe

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-04T05:59:28.090

你为什么不简单地尝试：

```
"C:\Program Files\Skype\Phone\Skype.exe" /secondary 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-04T06:00:56.757

我不确定您的计算机，但在我的计算机上，Skype 位于：

```
"C:\Program Files (x86)\Skype\Phone\Skype.exe" 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-12-16T10:05:16.220

伙计们，我在周末为此编写了一个小型 c# 控制台应用程序。用户需要安装Skype桌面，而不是最新Skype 8+的UWP版本。我已经为项目根目录中的 *86 版本和 *64 版本生成了 2 个批处理文件。从解决方案资源管理器中，文件的选项是构建操作：编译并复制到输出目录：不要复制。[VS解决方案图片](https://i.stack.imgur.com/lPs3a.png)也可以从以下位置下载代码： [https ://drive.google.com/open?id=1XmdnPr03WLkPbh9M2IHHPu05Mkmkzlc5](https://drive.google.com/open?id=1XmdnPr03WLkPbh9M2IHHPu05Mkmkzlc5)

```
namespace MultipleSkype
{
    class Program
    {
        static void Main(string[] args)
        {

            int InstanceNumbers = 0;
            Console.WriteLine("Please Enter Instances of Skype to Open");
            InstanceNumbers = Convert.ToInt32(Console.ReadLine());

            createInstances(InstanceNumbers);

        }

        private static void createInstances(int instanceNumbers)

        {

            string fileName="";
            string x86 = @"C:\Program Files\Skype\Phone\skype.exe";
            string x64 = @"C:\Program Files (x86)\Microsoft\Skype for 
            Desktop\Skype.exe";

            Console.WriteLine("Checking Version of Skype...");
            if (checkIf86OR64(x86)) { fileName = "skype86.bat"; } else if 
            (checkIf86OR64(x64)) { fileName = "skype.bat"; }

            for (int i = 0; i < instanceNumbers; i++)
            {
                Process proc = null;
                try
                {

                    proc = new Process();

                    proc.StartInfo.FileName = fileName;
                    proc.StartInfo.CreateNoWindow = false;
                    proc.Start();
                    proc.WaitForExit();

                }
                catch (Exception ex)
                {
                    Console.WriteLine(ex.StackTrace.ToString());

                }
            }
        }
        //Check that dir exists
        private static bool checkIf86OR64(string dir)
        {
            if (File.Exists(dir))
            {
                return true;
            }

            return false;
        }
    }
} 
```

# android - 获取当前铃声的内容：// Uri

> ID：12257531
> 
> 赞同：2
> 
> 时间：2012-09-04T05:55:36.170
> 
> 标签：android, audio, uri, ringtone, android-contentresolver

我正在尝试获取`content://media/external/...`当前铃声的内容 uri ( )。

我得到这样的当前设备铃声：

```
Uri uri = RingtoneManager.getActualDefaultRingtoneUri(context, RingtoneManager.TYPE_RINGTONE);` 
```

但是，调用`uri.getPath()`返回`external/audio/media/50`。它`content://media/`在它面前不见了。我曾考虑过手动将其粘贴到开头，但这似乎是错误的。

如何正确获取`content://`当前铃声的 uri？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T06:17:03.037

使用`uri.toString()`而不是`uri.getPath()`.

`uri.getPath()`当 ContentProvider 想要解码 uri 并创建查询时，通常会使用它。

# django-views - 如何编写一个 HTML 文件，显示使用 Django 传递给它的 HttpResponse 对象

> ID：12257533
> 
> 赞同：0
> 
> 时间：2012-09-04T05:55:45.510
> 
> 标签：django-views, httpresponse, http-redirect

我是 Django 和 HTML 的新手，我正在尝试显示从 HttpResponseRedirect 页面上的表单派生的数据列表。我一直在阅读 Django API，但我仍然不确定如何使用 HttpResponse() 和 HttpResponseRedirect()。

截至目前，我了解 response = HttpResponse() 生成 HttpResponse 对象， HttpResponseRedirect('results') 将浏览器重定向到新的 html 模板页面。我不知道如何编写 results.html 以显示在我的浏览器上。

我需要有关如何编写 HTML 页面的帮助。

我还需要有关如何将数据列表传递到该 html 页面的帮助。

我也可以在表单所在的同一 html 页面上显示列表，而不是加载新页面。

当前代码：def 联系人（请求）：

```
if request.method == 'POST': # If the form has been submitted...
    form = ContactForm(request.POST) # A form bound to the POST data
    chosen = []
    if form.is_valid():
        strt = time.time()
        form = form.cleaned_data
        parameters = organize(form)
        print 'input organized'
        chosen, companies = multiple(parameters)
        end = time.time()
        pp.pprint(companies)
        print 'companies matching search filters: ' , len(companies)

        print 'total time: ' , str(end-strt)

    response = HttpResponse(chosen)
    return HttpResponseRedirect('results') # Redirect after POST 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T18:30:01.667

我认为你想要的是 Django 的[render_to_response](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#django.shortcuts.render_to_response)快捷方式。第一个参数是要使用的 html 模板，第二个参数是要传递给该模板的值字典。

在您的 views.py 文件的顶部，包括：

```
from django.shortcuts import render_to_response 
```

并修改您的代码以阅读：

```
if request.method == 'POST': # If the form has been submitted...
    form = ContactForm(request.POST) # A form bound to the POST data
    chosen = []
    if form.is_valid():
        strt = time.time()
        form = form.cleaned_data
        parameters = organize(form)
        print 'input organized'
        chosen, companies = multiple(parameters)
        end = time.time()
        pp.pprint(companies)
        print 'companies matching search filters: ' , len(companies)
        print 'total time: ' , str(end-strt)
    return render_to_response('results.html', {'chosen':chosen,'companies':companies,'start':start,'end':end}) # Redirect after POST 
```

请注意，第二个参数是您要传递给模板的值的字典。按照我的编写方式，您传递了 4 个值（`chosen`, `companies`, `start`, `end`），但您可以包含任意数量的值。

`results.html`然后在您的 Templates 目录中创建一个名为的文件（在文件中的`TEMPLATE_DIRS`变量中指定`settings.py`）。它可能看起来像这样：

```
<!DOCTYPE html>
<body>
<h1>Results</h1>
<p>Chosen: {{chosen}}</p>
<p>Companies: {{companies}}</p>
<p>Start: {{start}}</p>
<p>End: {{end}}</p>
</body> 
```

Django 模板语法使用双花括号`{{}}`来显示传递给模板的变量。

请注意，此方法不会更改 URL。如果您需要这样做，请尝试查看[此](https://stackoverflow.com/questions/1463489/how-do-i-pass-template-context-information-when-using-httpresponseredirect-in-dj).

# xslt - Aviarc REST Databroker 的 XSL 转换错误

> ID：12257536
> 
> 赞同：2
> 
> 时间：2012-09-04T05:55:50.783
> 
> 标签：xslt, aviarc

在 REST 数据代理的 XSL 转换中出现以下错误：

```
org.w3c.dom.DOMException: HIERARCHY_REQUEST_ERR: An attempt was made to insert a node where it is not permitted. 
```

这是 XSL：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:template match="PCIresponse">
    <dataset>
     <xsl:for-each select="account-set/account">
      <row> 
         <xsl:element name="field">
           <xsl:attribute name="name">name</xsl:attribute>
           <xsl:attribute name="value"><xsl:value-of select="Account_Name" /></xsl:attribute>
         </xsl:element>
      </row>
     </xsl:for-each>
  </dataset>
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T05:59:38.927

事实证明，Java XSL 处理程序不喜欢生成转换的第一个节点之前的任何空白。

要解决此问题，您首先使用其自己的顶级模板设置根节点（即节点），然后从那里使用 apply-templates。工作版本如下所示：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:template match="account-set">
     <xsl:for-each select="account">
      <row> 
            <xsl:element name="field">
                  <xsl:attribute name="name">name</xsl:attribute>
                  <xsl:attribute name="value"><xsl:value-of select="Account_Name" /></xsl:attribute>
                </xsl:element>          
      </row>
     </xsl:for-each>
 </xsl:template>

 <xsl:template match="PCIresponse">
    <dataset>
      <xsl:apply-templates/>
    </dataset>
  </xsl:template>

</xsl:stylesheet> 
```

此解决方案的最佳摘要位于：[http ://servicemix.apache.org/servicemix-saxon-orgw3cdomexception-hierarchyrequesterr.html](http://servicemix.apache.org/servicemix-saxon-orgw3cdomdomexception-hierarchyrequesterr.html)

# codeigniter - 在Application目录外调用CodeIgniter的Controller方法

> ID：12257538
> 
> 赞同：3
> 
> 时间：2012-09-04T05:55:58.460
> 
> 标签：codeigniter

我有一个目录“Store”，它位于 CodeIgniter 的应用程序目录之外。这里我需要从“Store”目录调用一个控制器方法。

是否可以从应用程序目录之外的目录调用控制器方法？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T07:10:51.883

据我所知，使用`$this->load`（Loader class ie），你不能。即使您通过以下方式直接包含like：

*应用程序/控制器/test.php*

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

require('/absolute/path/to/dummy.php');

class Test extends CI_Controller {
    public function handle(){
        $d = new Dummy();
        $d->handle();
    }
} 
```

* * *

*假人.php*

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Dummy extends CI_Controller {
    public function handle(){
        // do something here
    }
} 
```

**它（包括）不起作用，因为您明确禁止直接访问！**但是，如果您不禁止这样做，那么*您的控制器代码很容易被利用*，**并且您不会有问题**。

* * *

因此，如果另一个 codeigniter 项目的另一个控制器部分是使用命令行，那么一种方法是使用命令行。

*假人.php*

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access 

class Test extends CI_Controller {
    public function handle(){
        $d = new Dummy();
        $d->handle();
    }
} 
```

*应用程序/控制器/test.php*

```
public function handle(){
    exec("cd /absolute/path/to/dummyproject; php index.php dummy handle;");
} 
```

您还可以进一步了解如何传递命令行参数。

# asp.net-mvc - WebAPI vs MVC 4 控制器，用于 jquery 调用我返回 json 的方法

> ID：12257541
> 
> 赞同：1
> 
> 时间：2012-09-04T05:56:22.273
> 
> 标签：asp.net-mvc, asp.net-mvc-3, web-services

我正在阅读以下“WebAPI 非常适合构建 HTTP 服务”，所以我想了解更多关于此的信息，现在我正在更改为 MVC4。

我的 Web 应用程序使用 jQuery 来调用我的控制器上返回 json 结果的方法。这是否意味着我将来使用 WebAPI 控制器会更好？

对传统控制器的调用和对 WebAPI 控制器的调用之间的缓存有什么区别吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T06:09:26.380

`My web application uses jQuery to make calls to methods on my controller that return json results. Does this mean it would be better for me in future to use the WebAPI controllers?`

不一定，您也可以使用 MVC 返回 JSON。Web.API 为您提供了许多开箱即用的功能，您必须使用 MVC 自己实现它。

`Is there any difference in caching between a call made to a traditional controller and a call made to a WebAPI controller?`

缓存是一个非常广泛的概念。您可以将 OutputCaching 与 MVC 一起使用，也可以对 web.api 采用输出缓存。看看[这里](http://www.strathweb.com/2012/05/output-caching-in-asp-net-web-api/)。

但是，除了 OutputCaching 之外，还有各种缓存技术，例如拥有自己的缓存和管理缓存容器等。

对我来说，web.api 可用于单页应用程序、数据层或服务层。

# javascript - Javascript for 循环返回“副本”作为值

> ID：12257550
> 
> 赞同：1
> 
> 时间：2012-09-04T05:57:08.850
> 
> 标签：javascript, jquery

我有一个以空开头的数组 - `var currentChatSessions = []`;

然后填充 - `currentChatSessions[privateSessionID]=targetUser;`（这是一个字符串，例如'myName'）

我有一个遍历数组的函数-

```
function checkExisting(from){//check for existing chats with that user
        var oldId=0;
//*         
        for(var index in currentChatSessions) { 
            console.log('checkExisting index: ' + index);
            console.log('checkExisting data: ' + currentChatSessions[index]);

            if (currentChatSessions[index] == from){
                oldId=index;
                console.log('check Existing: ' + oldId);
            }
            break;

        }
//*/        
        console.log('check existing oldId: ' + oldId);
        return oldId;
    }; 
```

并将其记录到控制台 -`checkExisting index: copy`和 `checkExisting data: function (){var i=new Array();for(var I=0,l=this.length;I<l;I++){i[I]=this[I]}return i}`

我知道字符串是作为变量传入的，因为我在其他地方调用它们，并返回正确的字符串。

为什么它会返回一个函数而不是一个字符串？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T06:02:20.397

`for (var x in array)`将迭代数组上的所有属性设置为可枚举，而不仅仅是数组元素。这可以包括价值将是可以解释您所看到的代码的方法。我猜您可能正在使用一些代码（库或只是代码）以使它们可枚举的方式将方法添加到您的数组中。

`0`您应该仅按索引从to迭代数组`.length - 1`。有几种方法可以做到这一点，但经典的方法是：

```
for (var i = 0; i < array.length; i++) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T06:02:18.143

看起来你真正想做的是：

```
var currentChatSessions = {}; 
```

注意乳头支架而不是牙套。

您可能有一个扩展 Array 原型的库。当您对一个对象执行 for-in 时，它会显示该对象上的所有方法。`Array.prototype.something = function() {};`当您循环遍历任何数组时，有人可能正在这样做，`for in`您将获得该功能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T05:59:34.557

对于数组，您必须使用另一种循环方式 - 而不是`for ... in`：

```
for(var index=0;index<currentChatSessions.length;index+=1) { /*...*/ } 
```

否则，Array 的其他[可枚举属性](http://www.2ality.com/2011/07/js-properties.html)会包含在循环中，从而导致您遇到不可预知的结果。

# java - Java JTable 显示数据库记录

> ID：12257553
> 
> 赞同：0
> 
> 时间：2012-09-04T05:57:17.540
> 
> 标签：java, database, swing, jtable, resultset

我在获取数据库记录时遇到问题，在 JTable 中显示数据库记录的最佳方法是什么，所以现在我使用结果集来获取记录并将其存储在 Object[][] 数组中，我想要这个变量让说 Object[][] data 它的值要显示在 JTable 上，我不知道我这样做是否正确。以及如何根据数据库中的记录初始化我的 Object[][] 数据大小。谢谢

这是我的代码：

```
ResultSet rs = null;
Statement sql = null;
Object[][] data = new Object[100][100];

        String query = "SELECT * FROM INVENTORY";
        sql = con.createStatement();
        sql.executeQuery(query);
        rs = sql.getResultSet();

        while(rs.next()){
            for(int i = 0; i < data.length; i++){
                for(int j = 0; j < data[i].length; j++){
                    int valId = rs.getInt(1);
                    String valName = rs.getString(2);
                    String valCat = rs.getString(3);
                    String valDesc = rs.getString(4);
                    double  valPrice = rs.getDouble(5);
                    int valstock = rs.getInt(6);
                    int valSupply = rs.getInt(7);

                    System.out.println(valId);
                    System.out.println(valName);
                    System.out.println(valCat);
                    System.out.println(valDesc);
                    System.out.println(valPrice);
                    System.out.println(valstock);
                    System.out.println(valSupply); 
```

正如您所看到的，我使用多个 for 循环来获取记录，使用多个 for 循环是否正确？或者有什么简单的方法吗？如何根据数据库上的总记录初始化我的 Object[][] 数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T06:09:30.313

你应该使用 ArrayList

首先创建数据持有者：

```
ArrayList<Object[]> data = new ArrayList<Object[]>(); 
```

然后逐行遍历 resultSet 并在每次要保存该行时创建一个新的 Object[] 数组。表中的项目数应该是行中的列数：

```
while(rs.next()){
    Object[] row = new Object[]{rs.getInt(1), 
                    rs.getString(2), 
                    rs.getString(3), 
                    rs.getString(4),
                    rs.getDouble(5),
                    rs.getInt(6),
                    rs.getInt(7)};
    data.add(row);
}
Object[][] realData = data.toArray(new Object[data.size()][]); 
```

如果您将 SQL 查询更改为不使用“*”并仅列出字段，那也很棒。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T06:17:30.150

正如我在之前的回答中开始的那样。

您可能不会提前知道有多少行来自数据库。您可以使用一些技术，但它们充其量只是猜测（请注意，我已经有一段时间没有使用 JDBC）了。

在不预先知道行数的情况下，您需要某种动态数组。有趣的是，Java 提供了一个。它被称为[ArrayList](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)。这使您可以在不知道实际需要多少元素的情况下向其中添加元素。

其次，我会将你的行结果存储在一个最能代表该对象的对象中，这将大大降低数据结构的复杂性，并使代码更容易采用更改，因为 x 列将是你的值多长时间再期待……

就像是

```
public class Inventory {

    private int id;
    private String name;
    private String catagory;
    private String description;
    private double  price;
    private int stock;
    private int supply;

    public Inventory(int id, String name, String catagory, String description, double price, int stock, int supply) {
        this.id = id;
        this.name = name;
        this.catagory = catagory;
        this.description = description;
        this.price = price;
        this.stock = stock;
        this.supply = supply;
    }

    public void setCatagory(String catagory) {
        this.catagory = catagory;
    }

    public void setDescription(String description) {
        this.description = description;
    }

    public void setId(int id) {
        this.id = id;
    }

    public void setName(String name) {
        this.name = name;
    }

    public void setPrice(double price) {
        this.price = price;
    }

    public void setStock(int stock) {
        this.stock = stock;
    }

    public void setSupply(int supply) {
        this.supply = supply;
    }

    public String getCatagory() {
        return catagory;
    }

    public String getDescription() {
        return description;
    }

    public int getId() {
        return id;
    }

    public String getName() {
        return name;
    }

    public double getPrice() {
        return price;
    }

    public int getStock() {
        return stock;
    }

    public int getSupply() {
        return supply;
    }

} 
```

例如。

我会将此信息存储到[列表中](http://docs.oracle.com/javase/7/docs/api/java/util/List.html)

```
List<Inventory> inventoryList = new ArrayList<Inventory>(50); // This is a "seed" value to helps performance
while(rs.next()){
    Inventory inventory = new Inventory(rs.getInt(1),
        rs.getString(2),
        rs.getString(3),
        rs.getString(4),
        rs.getDouble(5),
        rs.getInt(6),
        rs.getInt(7))
    inventoryList.add(inventory);
} 
```

基本上从那里开始，我很想简单地使用该列表。这意味着您可能需要实现我们自己的[AbstractTableModel](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/AbstractTableModel.html)，但从长远来看它对您更有用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T06:10:50.600

确保`data`使用适当的行数和列数初始化大小。要获取行数，您可以按照[此处](http://www.coderanch.com/t/303346/JDBC/databases/find-number-rows-resultset)设置的程序进行操作。要获得列数，可以在[JavaDocs](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/ResultSetMetaData.html)上找到答案。

通过这种方式，您可以删除上面的循环之一。只留下你

```
final int columnCount = rs.getMetaData().getColumnCount();
int row = 0;
while(rs.next()) {
   for(int index = 0; index < columnCount; index ++) {
      data[row][index] = rs.getObject(index);
   }
   row ++;
} 
```

或者不使用`Object[][]`，而是使用遵循 MVC 架构的`List<Model>`其中。`Model`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T06:18:22.177

使用`Vectors`from`java.util.collection`将解决您的问题.....

**看到这个很好的例子：**

[http://chang.advits.com/populate-data-from-database-into-jtable-in-netbeans](http://chang.advits.com/populate-data-from-database-into-jtable-in-netbeans)

# jquery - 未在 SaveRow 上调用 jqgrid aftersavefunc

> ID：12257555
> 
> 赞同：1
> 
> 时间：2012-09-04T05:57:20.003
> 
> 标签：jquery, asp.net-mvc-3, jqgrid

我正在使用 jqGrid 的 onSelectRow 方法并调用 aftersavefunc 但是当成功保存行时此函数不执行，我们正在使用 clientarray 来保存数据。

在 jqgrid 文档中写到它也可以与 clientarray 一起使用。

使用的代码如下：-

```
onSelectRow: function (id) {
            $('#grdTasks').jqGrid('saveRow', lastsel, true, 'clientArray', false, 
             { aftersavefunc: function () 
             {
                alert('saved');
             }
            }) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T06:51:30.420

尝试使用对象设置参数：

```
saveparameters = {
    "successfunc" : null,
    "url" : 'clientArray',
    "extraparam" : {},
    "aftersavefunc" : function( response ) {
                          alert('saved');
                      },
    "errorfunc": null,
    "afterrestorefunc" : null,
    "restoreAfterError" : true,
    "mtype" : "POST"
}

$('#grdTasks').jqGrid('saveRow', rowid, saveparameters ); 
```

# ruby-on-rails - 如何为具有自己的路由、视图和模型的 Rails 应用程序制作 gem

> ID：12257561
> 
> 赞同：0
> 
> 时间：2012-09-04T05:58:05.273
> 
> 标签：ruby-on-rails, plugins, gem

我正在创建一个应用程序，并想为它创建一个专门的 gem，因为并非应用程序的所有部署都需要隐藏在 gem 中的功能，被 gemified 的功能将有自己的 MVC，所以它更像是一个可拆卸的小型 Rails 应用程序。

为了说明起见，说它是一个博客应用程序，博客应用程序的核心特征显然是成为一个博客。

我想在这个应用程序中添加一个时事通讯功能。这需要

1.  订阅注册页面，时事通讯编辑页面
2.  上述页面的路线
3.  模型来保存订阅者，也许是为了保存时事通讯本身

理想情况下，我希望能够将一个专门的 gem 'blog_newsletter' 添加到博客应用程序中，安装，并且能够访问订阅注册页面，编写一个并发送时事通讯。

有没有可以参考的宝石？或一些教程？我可以找到普通 gems 的教程和示例，但不是这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T06:08:43.570

通常它是 Rails 引擎，通过谷歌搜索可以找到关于 Rails 引擎的各种文章，但您可以查看[forem](https://github.com/radar/forem) gem 以获得确切的想法

# javascript - 如何进行自定义分页

> ID：12257566
> 
> 赞同：-2
> 
> 时间：2012-09-04T05:58:46.493
> 
> 标签：javascript, jquery, pagination

我正在尝试为我的网站配置一个 jQuery 分页。我已经配置了一个基于计数`<p>`标签的分页。但要求是自定义分页。就像使用一些`<!--pagebreak-->`标签或类似的东西。如何使用 jQuery 和自定义`<!--pagebreak-->`标签进行自定义分页。`<!--pagebreak-->`请建议使用 jQuery 和自定义标签的任何分页脚本

```
<div class="storybody">
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec lobortis lacinia ante sit amet porta. Vivamus ut interdum massa. Etiam feugiat commodo accumsan. Suspendisse vulputate faucibus erat, non eleifend arcu iaculis et. Nulla at eros eu velit gravida ullamcorper nec id erat. In in velit mauris, vitae pretium purus. Ut scelerisque pellentesque fermentum. Curabitur nec mauris eu diam pulvinar cursus. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Suspendisse eu ipsum augue. Vivamus id elementum sem.</p>
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec lobortis lacinia ante sit amet porta. Vivamus ut interdum massa. Etiam feugiat commodo accumsan. Suspendisse vulputate faucibus erat, non eleifend arcu iaculis et. Nulla at eros eu velit gravida ullamcorper nec id erat. In in velit mauris, vitae pretium purus. Ut scelerisque pellentesque fermentum. Curabitur nec mauris eu diam pulvinar cursus. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Suspendisse eu ipsum augue. Vivamus id elementum sem.</p>
    <!--pagebreak-->
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec lobortis lacinia ante sit amet porta. Vivamus ut interdum massa. Etiam feugiat commodo accumsan. Suspendisse vulputate faucibus erat, non eleifend arcu iaculis et. Nulla at eros eu velit gravida ullamcorper nec id erat. In in velit mauris, vitae pretium purus. Ut scelerisque pellentesque fermentum. Curabitur nec mauris eu diam pulvinar cursus. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Suspendisse eu ipsum augue. Vivamus id elementum sem.</p>
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec lobortis lacinia ante sit amet porta. Vivamus ut interdum massa. Etiam feugiat commodo accumsan. Suspendisse vulputate faucibus erat, non eleifend arcu iaculis et. Nulla at eros eu velit gravida ullamcorper nec id erat. In in velit mauris, vitae pretium purus. Ut scelerisque pellentesque fermentum. Curabitur nec mauris eu diam pulvinar cursus. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Suspendisse eu ipsum augue. Vivamus id elementum sem.</p>
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec lobortis lacinia ante sit amet porta. Vivamus ut interdum massa. Etiam feugiat commodo accumsan. Suspendisse vulputate faucibus erat, non eleifend arcu iaculis et. Nulla at eros eu velit gravida ullamcorper nec id erat. In in velit mauris, vitae pretium purus. Ut scelerisque pellentesque fermentum. Curabitur nec mauris eu diam pulvinar cursus. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Suspendisse eu ipsum augue. Vivamus id elementum sem.</p>
    <!--pagebreak-->
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec lobortis lacinia ante sit amet porta. Vivamus ut interdum massa. Etiam feugiat commodo accumsan. Suspendisse vulputate faucibus erat, non eleifend arcu iaculis et. Nulla at eros eu velit gravida ullamcorper nec id erat. In in velit mauris, vitae pretium purus. Ut scelerisque pellentesque fermentum. Curabitur nec mauris eu diam pulvinar cursus. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Suspendisse eu ipsum augue. Vivamus id elementum sem.</p>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T16:38:51.807

我自己做了一些事情。您可以检查 Jsfiddle 中的[代码](http://jsfiddle.net/AAbhishekk/NeHxy/18/)。我用过 Jquery1.3.2。和 [jquery.pajinate.js](http://dl.dropbox.com/u/4151695/html/pajinate/examples/js/jquery.pajinate.js)。

HTML：

```
<div id="paging_container8" class="container">

                <div class="page_navigation"></div>
                <div class="storybody">
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec lobortis lacinia ante sit amet porta. Vivamus ut interdum massa. Etiam feugiat commodo accumsan. Suspendisse vulputate faucibus erat, non eleifend arcu iaculis et. Nulla at eros eu velit gravida ullamcorper nec id erat. In in velit mauris, vitae pretium purus. Ut scelerisque pellentesque fermentum. Curabitur nec mauris eu diam pulvinar cursus. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Suspendisse eu ipsum augue. Vivamus id elementum sem.</p>
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec lobortis lacinia ante sit amet porta. Vivamus ut interdum massa. Etiam feugiat commodo accumsan. Suspendisse vulputate faucibus erat, non eleifend arcu iaculis et. Nulla at eros eu velit gravida ullamcorper nec id erat. In in velit mauris, vitae pretium purus. Ut scelerisque pellentesque fermentum. Curabitur nec mauris eu diam pulvinar cursus. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Suspendisse eu ipsum augue. Vivamus id elementum sem.</p>
                    <!--pagebreak-->
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec lobortis lacinia ante sit amet porta. Vivamus ut interdum massa. Etiam feugiat commodo accumsan. Suspendisse vulputate faucibus erat, non eleifend arcu iaculis et. Nulla at eros eu velit gravida ullamcorper nec id erat. In in velit mauris, vitae pretium purus. Ut scelerisque pellentesque fermentum. Curabitur nec mauris eu diam pulvinar cursus. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Suspendisse eu ipsum augue. Vivamus id elementum sem.</p>
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec lobortis lacinia ante sit amet porta. Vivamus ut interdum massa. Etiam feugiat commodo accumsan. Suspendisse vulputate faucibus erat, non eleifend arcu iaculis et. Nulla at eros eu velit gravida ullamcorper nec id erat. In in velit mauris, vitae pretium purus. Ut scelerisque pellentesque fermentum. Curabitur nec mauris eu diam pulvinar cursus. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Suspendisse eu ipsum augue. Vivamus id elementum sem.</p>
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec lobortis lacinia ante sit amet porta. Vivamus ut interdum massa. Etiam feugiat commodo accumsan. Suspendisse vulputate faucibus erat, non eleifend arcu iaculis et. Nulla at eros eu velit gravida ullamcorper nec id erat. In in velit mauris, vitae pretium purus. Ut scelerisque pellentesque fermentum. Curabitur nec mauris eu diam pulvinar cursus. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Suspendisse eu ipsum augue. Vivamus id elementum sem.</p>
                    <!--pagebreak-->
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec lobortis lacinia ante sit amet porta. Vivamus ut interdum massa. Etiam feugiat commodo accumsan. Suspendisse vulputate faucibus erat, non eleifend arcu iaculis et. Nulla at eros eu velit gravida ullamcorper nec id erat. In in velit mauris, vitae pretium purus. Ut scelerisque pellentesque fermentum. Curabitur nec mauris eu diam pulvinar cursus. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Suspendisse eu ipsum augue. Vivamus id elementum sem.</p>
                    </div>

            </div> ​ 
```

JavaScript

```
<script>
var str= $(".storybody").html();
var substr=str.split( "<!--pagebreak-->" );
var txt="<ul class='storycontent'><li>";
var x=0;
for (x in substr)
  {
    if(x==0){
        txt=txt+substr[x];
    }
    else{
          txt=txt+"</li><li>"+substr[x];
    }
  }
var paginated=txt+"</li></ul>";
$('div.storybody').replaceWith(paginated);

$(document).ready(function(){
                $('#paging_container8').pajinate({
                    num_page_links_to_display : 2,
                    items_per_page : 1 ,
                    item_container_id : '.storycontent'
                });
            });
​&lt;/script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T08:12:02.550

举个例子：

评论标签`nodeType == 8`基于您的输入，您可以通过以下方式阅读：

```
var el = []; //[2,3,1]

var sum = 0;

$(".storybody").contents().filter(function(){
    if($(this).is("p")) sum++; //how many p before a comment
    if(this.nodeType === 8){
        el.push(sum);
        sum = 0;
    }
}); 
```

例如，基于 el 数组，这可能是 next 和 prev 函数，但**可以以更好的方式完成**，但这只是一个示例；-)

```
//Next and Prev function
var curr = 0;
var k = 0;

$("#next").on("click", function(){
    if(curr < el.length){
        $(".storybody p").hide();
        var e = range(k, el[curr], ".storybody p", "next");
        $(e).each(function(){$(this).show()});                
        k += el[curr];                    
        curr++;
    }else{
        console.log("last page!");         
    }                  
});

$("#prev").on("click", function(){
    if(curr > 0){
        $(".storybody p").hide();
        var e = range(k, el[curr-1], ".storybody p", "prev");
        $(e).each(function(){$(this).show()});
        k -= el[curr-1];                    
        curr--;
    }else{
        console.log("first page!");         
    }
});

function range(s,e,sel,ac){

    if(ac == "next"){
        var elms = [];
        for(var i = s; i < (e+s); i++){
            elms.push($(sel).eq(i));
        }
    }else if(ac == "prev"){
        var elms = [];
        for(var i = (s-e); i < s; i++){
            elms.push($(sel).eq(i));
        }
    }
    return elms;
} 
```

PS：假设我在`<!--pagebreak-->`p 标签的末尾添加了另一个（之前）

# c++ - 用 C++ 编写的程序如何工作？

> ID：12257567
> 
> 赞同：17
> 
> 时间：2012-09-04T05:58:52.370
> 
> 标签：c++, installation

如果没有安装 JRE，当我们运行 java 程序时，它不起作用。
我发现大多数著名的应用程序（例如 Google chrome 浏览器）都是用 C++ 编写的。那么，Windows 是如何在没有任何 C++ 运行时环境的情况下运行这样的程序的呢？安装时到底发生了什么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-04T06:01:28.137

> 那么windows如何在没有任何C++运行时环境的情况下运行这样的程序呢？

问题的前提实际上是不正确的。至少在 Windows 上，实际上存在 C++ 的运行时环境。此运行时的一个组件（可能是最重要的一个）称为 C 运行时或 CRT。:-)

通常在您的程序甚至进入`main()`函数之前，CRT 会执行一堆初始化例程，当您从`main()`函数返回时，它会自行清理。这种舞蹈的全部意义在于提供几乎所有 C 和 C++ 程序都需要的标准功能。

如果您在启动 Windows 程序时遇到过包含缺失`msvcrt.dll`或类似情况的错误（例如`msvcr110.dll`，对于较新的程序），那么程序所抱怨的就是缺少 CRT。`msvcrt.dll`是实现 CRT 的文件。它代表“Microsoft Visual C 运行时”。

显然，`msvcrt.dll`它的亲戚随 Windows 操作系统一起提供，这就是为什么您通常不会遇到与 JRE 不同的缺少运行时环境的问题，JRE 必须由用户或计算机制造商安装。

但是，Windows C++ 应用程序被编译为使用特定版本的 MSVCRT，如果您的MSVCRT 版本*错误*，那么操作系统会以与丢失相同的方式抱怨。* 安装程序通常做的是检查操作系统具有正确的版本，如果没有，它会从自己的安装文件将其复制到您计算机上的某个位置。

然而，MSVCRT 并不是所有 Windows 程序都能正常工作的必要或充分条件。完全有可能编写一个不依赖于 MSVCRT 的程序，也完全有可能一个 Windows 程序将具有 MSVCRT 以外的依赖项。几乎所有重要的 Windows 程序都将依赖于 MSVCRT 和其他操作系统组件。程序的安装程序也会检查这些。

JRE 和 MSVCRT 之间有一些重要的区别。一个很大的区别是JRE为Java应用程序实现了一个虚拟机环境（这就是它实现“跨平台”能力的方式），这可能涉及即时编译等，而MSVCRT只提供标准功能，什么都不做关于 C++ 程序的汇编代码。

* * *

*这并不完全正确，因为 C++ 应用程序可以*静态*链接到不依赖于 DLL 的 MSVCRT。但是，大多数 Windows C++ 应用程序*动态*链接到它，在这种情况下需要正确的 DLL。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T06:59:58.650

这个问题似乎很明显，但如果我们深入挖掘，它似乎远非显而易见。让我给你一个更抽象的观点：

每种语言都可以由合适的机器“执行”，该机器将语言指令连接到“执行”操作的特定硬件。不同之处在于“连接”是如何完成的：它有多*直接*以及*何时*设置向上。

Windows（但同样适用于 linux）机器至少是一组由某些“重要”DLL（例如 Kernel.dll）公开的函数，这些函数将被处理器机器代码调用。

C 程序通常在编译时被翻译成机器代码，以放置尊重该“协议”的系统调用。不需要任何其他功能的程序可以在该环境中本地执行。

需要其他功能的程序可以：

*   静态链接到将函数实现为机器代码的库（实际上合并了它们的代码）：这使得程序仍然可以本地执行。
*   动态链接到这些库：程序需要在启动或执行期间加载和链接这些库：如果这些库本身已经是操作系统的一部分，则程序刚刚运行，否则，这些库必须以某种方式放置在某处程序可以找到它们（这是 C 运行时支持的情况，对于用于编译操作系统本身的版本以外的版本）

顺便说一下，Java 语言的设计和实现方式，Java 程序并不直接翻译成机器代码。它翻译成一种中间语言（字节码），必须用作interpeter（java机器）的“输入”，通过在底层机器上执行机器代码来实际执行其指令。

由于 Windows 本身不是用 Java 编写的，因此它本身不需要这样的解释器，因此您无法直接在 Windows 安装中找到它，但如果需要，您必须将它放在那里。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T06:05:03.493

to clarify that, a java program is compiled to bytecode via jdk and then runs in the jre

a c++ programm is directly compiled to machine readable code, just like the jre has to be compiled to run in windows

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-04T06:24:03.757

运行时（或 C 或 C++ 标准库）通常随操作系统（glibc、msvcrt...）一起安装。

C/C++ 程序也可以“静态”编译，其中程序使用的库部分被链接（合并）到可执行文件中，因此程序在它自己的二进制文件中有库。

至于执行Java代码的“虚拟机”。C++ 通常被编译成将要运行的系统的本机机器代码。CPU是将运行它的非虚拟机。

也可以将 C++ 程序编译成各种“字节码”（.NET CLR、LLVM），但这并不常见。

# java - 一对多关系中为子实体生成的更新 sql 不正确

> ID：12257569
> 
> 赞同：2
> 
> 时间：2012-09-04T05:59:04.590
> 
> 标签：java, spring, hibernate

我在父子关系中有两个类，ElwInfo 和 ElwUnderlyingAsset。表名是 ELW_INFO、ELW_UNDERLYING_ASSET 和 ELW_UNDERLYING_ASSET 通过列 INSTRUMENT_CD 引用 ELW_INFO。

我已经在文件'Elw.hbm.xml'中映射了两个类，如下所示

```
<class name="ElwInfo" table="ELW_INFO" >

    <id name="instrumentCode" column="INSTRUMENT_CD" ><generator class="assigned"/></id>
    <property name="instrumentName" column="INSTRUMENT_NM"/>
    <property name="ccyCode"        column="CCY_CD"/>

    <one-to-one name="instrumentCommon" 
                class="InstrumentCommon"
                cascade="save-update" lazy="false" />

    <one-to-one name="instrumentClass" 
                class="InstrumentClass"
                cascade="none" lazy="false" />

    <property name="issueDate"      column="ISSUE_DT"/>
    <property name="maturityDate"   column="MRTY_DT"/>
    <property name="convertRatio"   column="CONVERT_RATIO"/>
    <property name="strike"         column="STRIKE"/>
    <property name="koBarrier"      column="KO_BARRIER"/>
    <property name="minRebateRate"  column="MIN_REBATE_RT"/>
    <property name="addRebate"      column="ADD_REBATE"/>

    <many-to-one class="com.fistglobal.riskcraft.market.web.domain.instrument2.common.ExchangeInfo" 
                 name="exchangeInfo" column="EXCH_CD" lazy="false" cascade="none" 
                 unique="true" />
    <many-to-one class="com.fistglobal.riskcraft.market.web.domain.instrument2.common.ElwTypeInfo" 
                 name="elwType" column="ELW_TYPE_CD" lazy="false" cascade="none" 
                 unique="true" />
    <many-to-one class="com.fistglobal.riskcraft.market.web.domain.instrument2.common.OptionTypeInfo" 
                 name="optionType" column="OPTION_TYPE_CD" lazy="false" cascade="none" 
                 unique="true" />
    <many-to-one class="com.fistglobal.riskcraft.market.web.domain.instrument2.common.ExerciseTypeInfo" 
                 name="exerciseType" column="EXERCISE_TYPE_CD" lazy="false" cascade="none" 
                 unique="true" />

    **<bag name="underlyingAssetList" cascade="save-update" table="ELW_UNDERLYING_ASSET" lazy="false" >
        <key column="INSTRUMENT_CD"/>
        <one-to-many class="ElwUnderlyingAsset" not-found="ignore"/>
    </bag>**

</class>

<class name="ElwUnderlyingAsset" table="ELW_UNDERLYING_ASSET" >
    <composite-id name="id" class="ElwUnderlyingAsset$Id">
        <key-property name="instrumentCode" column="INSTRUMENT_CD"/>
        <key-property name="underlyingAssetCode" column="UNDERLYING_ASSET_CD"/>
        <generator class="assigned"/>
    </composite-id>

    <property name="qty"   column="UNDERLYING_ASSET_QTY"/>
</class>

<class name="ElwData" table="ELW_DATA">
    <composite-id name="key" class="InstrumentDataKey">
        <key-property name="dt"             column="DT"/>
        <key-property name="instrumentCode" column="INSTRUMENT_CD"/>
    </composite-id>
    <property name="barrierHitYn"   column="BARRIER_HIT_YN"/>
    <property name="barrierHitDate" column="BARRIER_HIT_DT"/>
    <property name="amOrPm"         column="AM_OR_PM"/>
    <property name="maxPrice"       column="MAX_PRICE"/>
    <property name="minPrice"       column="MIN_PRICE"/>
</class> 
```

两个类如下

```
public class ElwInfo extends InstrumentInfo {

private ExchangeInfo exchangeInfo;
private List<ElwUnderlyingAsset> underlyingAssetList;
private ElwTypeInfo elwType;
private OptionTypeInfo optionType;
private ExerciseTypeInfo exerciseType;

private String issueDate;
private String maturityDate;
private Double convertRatio;
private Double strike;
private Double koBarrier;
private Double minRebateRate;
private Double addRebate;

public ElwInfo() {
    exchangeInfo = new ExchangeInfo();
    underlyingAssetList = new ArrayList<ElwUnderlyingAsset>();
    elwType = new ElwTypeInfo();
    optionType = new OptionTypeInfo();
    exerciseType = new ExerciseTypeInfo();
}

public ExchangeInfo getExchangeInfo() {
    return exchangeInfo;
}

public void setExchangeInfo(ExchangeInfo exchangeInfo) {
    this.exchangeInfo = exchangeInfo;
}

public List<ElwUnderlyingAsset> getUnderlyingAssetList() {
    return underlyingAssetList;
}

public void setUnderlyingAssetList(List<ElwUnderlyingAsset> underlyingAssetList) {
    this.underlyingAssetList = underlyingAssetList;
}

public ElwTypeInfo getElwType() {
    return elwType;
}

public void setElwType(ElwTypeInfo elwType) {
    this.elwType = elwType;
}

public OptionTypeInfo getOptionType() {
    return optionType;
}

public void setOptionType(OptionTypeInfo optionType) {
    this.optionType = optionType;
}

public ExerciseTypeInfo getExerciseType() {
    return exerciseType;
}

public void setExerciseType(ExerciseTypeInfo execType) {
    this.exerciseType = execType;
}

public String getIssueDate() {
    return issueDate;
}

public void setIssueDate(String issueDate) {
    this.issueDate = issueDate;
}

public String getMaturityDate() {
    return maturityDate;
}

public void setMaturityDate(String maturityDate) {
    this.maturityDate = maturityDate;
}

public Double getConvertRatio() {
    return convertRatio;
}

public void setConvertRatio(Double convertRatio) {
    this.convertRatio = convertRatio;
}

public Double getStrike() {
    return strike;
}

public void setStrike(Double strike) {
    this.strike = strike;
}

public Double getKoBarrier() {
    return koBarrier;
}

public void setKoBarrier(Double koBarrier) {
    this.koBarrier = koBarrier;
}

public Double getMinRebateRate() {
    return minRebateRate;
}

public void setMinRebateRate(Double minRebateRate) {
    this.minRebateRate = minRebateRate;
}

public Double getAddRebate() {
    return addRebate;
}

public void setAddRebate(Double addRebate) {
    this.addRebate = addRebate;
}

}

public class ElwUnderlyingAsset {

public static class Id implements Serializable {

    private static final long serialVersionUID = -8296040137055492597L;

    private String instrumentCode;
    private String underlyingAssetCode;

    public String getInstrumentCode() {
        return instrumentCode;
    }
    public void setInstrumentCode(String instrumentCode) {
        this.instrumentCode = instrumentCode;
    }
    public String getUnderlyingAssetCode() {
        return underlyingAssetCode;
    }
    public void setUnderlyingAssetCode(String underlyingAssetCode) {
        this.underlyingAssetCode = underlyingAssetCode;
    }

    public boolean equals(Object o) {
        if (o != null && o instanceof Id) {
            Id that = (Id)o;
            return this.instrumentCode.equals(that.instrumentCode) && this.underlyingAssetCode.equals(that.underlyingAssetCode);
        } else {
            return false;
        }
    }

    public int hashCode() {
        if (instrumentCode!= null && underlyingAssetCode != null)
            return instrumentCode.hashCode() + underlyingAssetCode.hashCode();
        else
            return -1;
    }

    public String toString() {
        return ToStringBuilder.reflectionToString(this, ToStringStyle.MULTI_LINE_STYLE);
    }

}

public ElwUnderlyingAsset() {
    this.id = new Id();
}

private Id id;
private Double qty;

public Id getId() {
    return id;
}
public void setId(Id id) {
    this.id = id;
}

public Double getQty() {
    return qty;
}
public void setQty(Double qty) {
    this.qty = qty;
}

public String toString() {
    return ToStringBuilder.reflectionToString(this, ToStringStyle.MULTI_LINE_STYLE);
}
} 
```

当我打电话时

```
ElwInfo newInfo = .....// info instance is constructed purely from http request parameters .
getHibernateTemplate().saveOrUpdate(newInfo); 
```

我得到以下生成的 SQL 和 Oracle 本机异常。生成的 SQL 非常荒谬，我无法弄清楚我做错了什么。

```
Hibernate: 
update
    ELW_UNDERLYING_ASSET 
set
    INSTRUMENT_CD=null 
where
    INSTRUMENT_CD=? 
```

我期望的是

```
Hibernate: 
update
    ELW_UNDERLYING_ASSET 
set
    QTY = ?
where
    INSTRUMENT_CD=?
    and UNDERLYING_ASSET_CD=? 
```

因为表 ELW_UNDERLYING_ASSET 具有复合键 (INSTRUMENT_CD, UNDERLYING_ASSET_CD)。

如果我如下修改我的客户端代码，

```
ElwInfo newInfo = .....// info instance is constructed purely from http request 
ElwInfo info = (ElwInfo)getHibernateTemplate().get(entityInfo.getClass(),entityInfo.getInstrumentCode());
info.setAddRebate(0.0);
info.getUnderlyingAssetList().clear();
info.getUnderlyingAssetList().addAll(newInfo.getUnderlyingAssetList());
getHibernateTemplate().saveOrUpdate(info); 
```

我得到以下生成的 SQL；

```
Hibernate: 
update
    ELW_INFO 
set
    INSTRUMENT_NM=?,
    CCY_CD=?,
    ISSUE_DT=?,
    MRTY_DT=?,
    CONVERT_RATIO=?,
    STRIKE=?,
    KO_BARRIER=?,
    MIN_REBATE_RT=?,
    ADD_REBATE=?,
    EXCH_CD=?,
    ELW_TYPE_CD=?,
    OPTION_TYPE_CD=?,
    EXERCISE_TYPE_CD=? 
where
    INSTRUMENT_CD=?

Hibernate: 
update
    ELW_UNDERLYING_ASSET 
set
    INSTRUMENT_CD=null 
where
    INSTRUMENT_CD=? 
    and UNDERLYING_ASSET_CD=? 
```

第一个生成的 sql 没问题，但第二个生成的 sql 仍然是错误的，尽管它与前一个有点不同。

提前感谢您的麻烦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:49:43.317

I've added attribute **inverse="true"** in the bag mapping, and no more errors occurred.

```
<bag name="underlyingAssetList" inverse="true" cascade="save-update" table="ELW_UNDERLYING_ASSET" lazy="false" >
        <key column="INSTRUMENT_CD"/>
        <one-to-many class="ElwUnderlyingAsset" not-found="ignore"/>
</bag> 
```

I'm quoting the following from the book "Java Persistence with Hibernate, p266".

> Without the inverse attribute, Hibernate tries to execute two different SQL statements, both updating the same foreign key column, when you manipulate the link between two instances. By specifying inverse="true", you explicitly tell Hibernate which end of the link it should not synchronize with the database. In this example, you tell Hibernate that it should propagate changes made at the (ElwUnderlyingAsset) end of the association to the database, ignoring changes made only to the (underlyingAssetList) collection.

# c# - 结合年份和月份

> ID：12257570
> 
> 赞同：-1
> 
> 时间：2012-09-04T05:59:05.490
> 
> 标签：c#, asp.net

我有 2 个 dropdowmlist，它的 aspx 代码在哪里

```
 <asp:DropDownList ID="ddlexpyear" runat="server" Width="50px" TabIndex="4"
                   DataTextField="" DataValueField="" AppendDataBoundItems="true"           
                   ValidationGroup="userinfo" DataSourceID="objectdatasource1" 
                   onselectedindexchanged="ddlexpyear_SelectedIndexChanged">
      <asp:ListItem Value="-1">--- Please select ---</asp:ListItem>                       
 </asp:DropDownList>
 <asp:Label ID="Label4" runat="server" Text="(Year)"></asp:Label>
 <asp:DropDownList ID="ddlexpmonth" runat="server" 
        AppendDataBoundItems="true" DataSourceID="objectdatasource2"
        DataTextField="" DataValueField="" TabIndex="4" 
        ValidationGroup="userinfo" Width="50px" 
        onselectedindexchanged="ddlexpmonth_SelectedIndexChanged">
     <asp:ListItem Value="0">--- Please select ---</asp:ListItem>
 </asp:DropDownList>
 <asp:Label ID="Label5" runat="server" Text="(Month)"></asp:Label>
 <sup style="color: Red;">*</sup> </td> 
```

在这里，如果我选择`year as 2`和 `month as 5`我`want to save it as 2.5`。如果 ii 选择`year as 3`和`month as 9`i`want to save it as 3.9`并且喜欢那样。

请帮我解决这个问题。

好的建议是可观的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T06:08:10.133

您必须简单地`combine`选择值，然后将其转换为`Double`.

```
lblSave.Text = ddlexpyear.SelectedItem.Text + "." + ddlexpmonth.SelectedItem.Text;
double save = Convert.ToDouble(lblSave.Text); 
```

如果你有`DataValueField`那么：

```
lblSave.Text = ddlexpyear.SelectedValue + "." + ddlexpmonth.SelectedValue;
double save = Convert.ToDouble(lblSave.Text); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T06:23:47.203

你必须通过两种方式做到这一点

(1) 一种使用`dropdownlist` `SelectedItem`property的方式

```
lbltest.Text = ddlexpyear.SelectedItem.Text + "." + ddlexpmonth.SelectedItem.Text;
double test = Convert.ToDouble(lbltest.Text); 
```

(2)另一种使用`dropdownlist` `SelectedValue`property的方式

```
 lbltest.Text = ddlexpyear.SelectedValue + "." + ddlexpmonth.SelectedValue;
 double test= Convert.ToDouble(lbltest.Text); 
```

如果谷歌那么你肯定找到了。

我希望它对你有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T07:39:48.043

你可以这样使用：

```
protected void ddlexpyear_SelectedIndexChanged(object sender, EventArgs e)
{
   Label4.Text = ddlexpyear.SelectedValue + "." + ddlexpmonth.SelectedValue;
} 
protected void ddlexpmonth_SelectedIndexChanged(object sender, EventArgs e)
{
   Label4.Text = ddlexpyear.SelectedValue + "." + ddlexpmonth.SelectedValue;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T06:10:05.240

您应该执行以下操作。
如果你不是设置`"datavaluefield"`和`"datatextfield"`代码端，那么设置这两个参数。
在 Datavaluefiled 中，您应该输入需要保存的参数（例如 1、2、3），并且 datatextfield 应该是需要在下拉列表中显示给用户的值（例如 1 月、2 月、...）

保存时执行以下操作。

检查两者是否都设置为 index `-1`。
应该有任何非负整数值。

```
string Savevalue =  `ddlExpYear.selectedvalue.toString() + "." + 
.selectedvalue.tostring()` 
```

希望它会有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-04T06:10:58.117

我不明白为什么这对你来说是个问题！

```
string year=ddlexpyear.SelectedValue.ToString();
string month=ddlexpmonth.SelectedValue.ToString();
string TotalExp=year + "." + month; 
```

这应该可以解决您的问题

# c - 将 C 转换为汇编

> ID：12257572
> 
> 赞同：0
> 
> 时间：2012-09-04T05:59:07.537
> 
> 标签：c, assembly, mips

在我的课程笔记中，我得到了以下信息：

C：

```
thisthread.id = 4711; 
```

汇编器：

```
.text
.align 2
movia r8,thisthread
movi r9,4711
stw r9,4(r8) # id after sp that takes 4 bytes 
```

但是 sp 不占用 4 位吗？我认为偏移量是按位指定的，而不是按字节指定的。我弄错了吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T06:05:14.157

You are mistaken. The offset is indeed in bytes.

# jsf - JSF 数据表优化

> ID：12257574
> 
> 赞同：0
> 
> 时间：2012-09-04T05:59:11.340
> 
> 标签：jsf, optimization, datatable, grid

我正在使用一个数据表，它的元素是从不同的来源生成的：xml 文件、数据库记录，甚至从系统中的特定路径检查文件名......问题是当系统查询 xml 和文件名数据时，因为它得到网格第一次显示时的所有信息，它甚至不显示该信息，因为超过一千行，网格只显示前十行，所以我应该使用什么或我需要哪种数据表方法当用户通过网格的内容导航时，覆盖以仅查询十乘十的元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T06:40:47.630

听起来像是延迟加载数据表模型的工作

Primefaces 有它：[DataTable - 延迟加载](http://www.primefaces.org/showcase/ui/datatableLazy.jsf)

> DataTable 具有处理庞大数据集的内置支持。为了启用延迟加载，需要实现一个 LazyDataModel 以在分页、排序、过滤或实时滚动发生时查询数据源。此示例演示使用内存中的列表来模拟数据库等真实数据源。

# c# - 如何在不维护会话的情况下避免比较？

> ID：12257575
> 
> 赞同：0
> 
> 时间：2012-09-04T05:59:16.927
> 
> 标签：c#

我有一个网页，它显示了之前捕获的数据。现在这个数据来自数据库，属于数据库表的多条记录。当用户更新这些数据时，我们必须更新我们的数据库记录。问题是我无法跟踪哪些记录已被修改，因为我们没有会议。所以我再次获取所有记录并与网页中的数据进行比较。如果有人知道更好的方法（避免比较），请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T06:00:51.647

使用记录的主键来识别它。当您呈现用于编辑记录的表单时，您可以在隐藏字段中输出主键。

如果您有一个允许同时更新多条记录的页面，那么您可以跳过比较并始终更新所有记录 - 如果您使用 MSSQL 2008 或更高版本，您可以使用表值参数将*所有*记录一次性传递给 DB调用并使用 MERGE 命令进行批量更新。

您还可以编写将在每次输入编辑时触发的 javascript，并为修改后的记录（隐藏字段）设置一个“脏”标志。您将知道编辑了哪些行。

# html - html5会话存储范围

> ID：12257576
> 
> 赞同：2
> 
> 时间：2012-09-04T05:59:26.623
> 
> 标签：html, session

我正在使用 html5 会话存储在会话中存储一些数据。但问题是它只将数据保留到当前选项卡中。当我打开一个新选项卡时，那里的数据不再可用。那我们怎么能说这是一个会话？？？是否有可能所有选项卡都可以访问数据

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T06:15:08.817

会话存储只能在存储数据的窗口内接受。[在这里阅读](https://developers.google.com/web-toolkit/doc/latest/DevGuideHtml5Storage#Overview)

如果您希望数据通过多个窗口/选项卡持久存在，我建议您使用本地存储。

# php - 如何检测虚假用户（爬虫）和 cURL

> ID：12257584
> 
> 赞同：41
> 
> 时间：2012-09-04T05:59:56.787
> 
> 标签：php, curl, spam-prevention

其他一些网站使用 cURL 和假 http 引用来复制我的网站内容。我们有什么方法可以检测 cURL 或不是真正的网络浏览器吗？

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-09-13T07:18:06.093

没有避免自动爬行的神奇解决方案。凡是人类能做到的，机器人也能做到。只有让工作变得更难的解决方案，如此之难，以至于只有技术过硬的极客可能会试图通过它们。

几年前我也遇到了麻烦，我的第一个建议是，如果你有时间，自己做一个爬虫（我假设“爬虫”是爬你网站的人），这是该学科最好的学校。通过爬取几个网站，我学到了不同类型的保护，并且通过将它们关联起来，我一直很有效率。

我给你一些你可以尝试的保护例子。

* * *

# 每个 IP 的会话数

如果用户每分钟使用 50 个新会话，您可以认为该用户可能是不处理 cookie 的爬虫。当然，curl 可以完美地管理 cookie，但是如果您将它与每个会话的访问计数器（稍后解释）相结合，或者如果您的爬虫是 cookie 问题的新手，它可能会很有效。

很难想象同一共享连接的 50 个人会同时访问您的网站（这当然取决于您的流量，这取决于您）。如果发生这种情况，您可以锁定您网站的页面，直到验证码被填充。

主意 ：

1）您创建 2 个表：1 个保存被禁止的 ip，1 个保存 ip 和会话

```
create table if not exists sessions_per_ip (
  ip int unsigned,
  session_id varchar(32),
  creation timestamp default current_timestamp,
  primary key(ip, session_id)
);

create table if not exists banned_ips (
  ip int unsigned,
  creation timestamp default current_timestamp,
  primary key(ip)
); 
```

2）在脚本的开头，您从两个表中删除了太旧的条目

3）接下来你检查你的用户的IP是否被禁止（你设置一个标志为真）

4）如果没有，你计算他有多少会话为他的 ip

5）如果他有太多的会话，你将它插入你的禁止表并设置一个标志

6）如果尚未插入，则在每个 ip 表的会话中插入他的 ip

我写了一个代码示例以更好地展示我的想法。

```
<?php

try
{

    // Some configuration (small values for demo)
    $max_sessions = 5; // 5 sessions/ip simultaneousely allowed
    $check_duration = 30; // 30 secs max lifetime of an ip on the sessions_per_ip table
    $lock_duration = 60; // time to lock your website for this ip if max_sessions is reached

    // Mysql connection
    require_once("config.php");
    $dbh = new PDO("mysql:host={$host};dbname={$base}", $user, $password);
    $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

    // Delete old entries in tables
    $query = "delete from sessions_per_ip where timestampdiff(second, creation, now()) > {$check_duration}";
    $dbh->exec($query);

    $query = "delete from banned_ips where timestampdiff(second, creation, now()) > {$lock_duration}";
    $dbh->exec($query);

    // Get useful info attached to our user...
    session_start();
    $ip = ip2long($_SERVER['REMOTE_ADDR']);
    $session_id = session_id();

    // Check if IP is already banned
    $banned = false;
    $count = $dbh->query("select count(*) from banned_ips where ip = '{$ip}'")->fetchColumn();
    if ($count > 0)
    {
        $banned = true;
    }
    else
    {
        // Count entries in our db for this ip
        $query = "select count(*)  from sessions_per_ip where ip = '{$ip}'";
        $count = $dbh->query($query)->fetchColumn();
        if ($count >= $max_sessions)
        {
            // Lock website for this ip
            $query = "insert ignore into banned_ips ( ip ) values ( '{$ip}' )";
            $dbh->exec($query);
            $banned = true;
        }

        // Insert a new entry on our db if user's session is not already recorded
        $query = "insert ignore into sessions_per_ip ( ip, session_id ) values ('{$ip}', '{$session_id}')";
        $dbh->exec($query);
    }

    // At this point you have a $banned if your user is banned or not.
    // The following code will allow us to test it...

    // We do not display anything now because we'll play with sessions :
    // to make the demo more readable I prefer going step by step like
    // this.
    ob_start();

    // Displays your current sessions
    echo "Your current sessions keys are : <br/>";
    $query = "select session_id from sessions_per_ip where ip = '{$ip}'";
    foreach ($dbh->query($query) as $row) {
        echo "{$row['session_id']}<br/>";
    }

    // Display and handle a way to create new sessions
    echo str_repeat('<br/>', 2);
    echo '<a href="' . basename(__FILE__) . '?new=1">Create a new session / reload</a>';
    if (isset($_GET['new']))
    {
        session_regenerate_id();
        session_destroy();
        header("Location: " . basename(__FILE__));
        die();
    }

    // Display if you're banned or not
    echo str_repeat('<br/>', 2);
    if ($banned)
    {
        echo '<span style="color:red;">You are banned: wait 60secs to be unbanned... a captcha must be more friendly of course!</span>';
        echo '<br/>';
        echo '<img src="http://4.bp.blogspot.com/-PezlYVgEEvg/TadW2e4OyHI/AAAAAAAAAAg/QHZPVQcBNeg/s1600/feu-rouge.png" />';
    }
    else
    {
        echo '<span style="color:blue;">You are not banned!</span>';
        echo '<br/>';
        echo '<img src="http://identityspecialist.files.wordpress.com/2010/06/traffic_light_green.png" />';
    }
    ob_end_flush();
}
catch (PDOException $e)
{
    /*echo*/ $e->getMessage();
}

?> 
```

* * *

# 参观柜台

如果您的用户使用相同的 cookie 来抓取您的页面，您将能够使用他的会话来阻止它。这个想法很简单：你的用户有可能在 60 秒内访问 60 个页面吗？

主意 ：

1.  在用户会话中创建一个数组，它将包含访问时间（）。
2.  删除此数组中超过 X 秒的访问
3.  为实际访问添加一个新条目
4.  计算此数组中的条目
5.  如果他访问了 Y 个页面，则禁止您的用户

示例代码：

```
<?php

$visit_counter_pages = 5; // maximum number of pages to load
$visit_counter_secs = 10; // maximum amount of time before cleaning visits

session_start();

// initialize an array for our visit counter
if (array_key_exists('visit_counter', $_SESSION) == false)
{
    $_SESSION['visit_counter'] = array();
}

// clean old visits
foreach ($_SESSION['visit_counter'] as $key => $time)
{
    if ((time() - $time) > $visit_counter_secs) {
        unset($_SESSION['visit_counter'][$key]);
    }
}

// we add the current visit into our array
$_SESSION['visit_counter'][] = time();

// check if user has reached limit of visited pages
$banned = false;
if (count($_SESSION['visit_counter']) > $visit_counter_pages)
{
    // puts ip of our user on the same "banned table" as earlier...
    $banned = true;
}

// At this point you have a $banned if your user is banned or not.
// The following code will allow us to test it...

echo '<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>';

// Display counter
$count = count($_SESSION['visit_counter']);
echo "You visited {$count} pages.";
echo str_repeat('<br/>', 2);

echo <<< EOT

<a id="reload" href="#">Reload</a>

<script type="text/javascript">

  $('#reload').click(function(e) {
    e.preventDefault();
    window.location.reload();
  });

</script>

EOT;

echo str_repeat('<br/>', 2);

// Display if you're banned or not
echo str_repeat('<br/>', 2);
if ($banned)
{
    echo '<span style="color:red;">You are banned! Wait for a short while (10 secs in this demo)...</span>';
    echo '<br/>';
    echo '<img src="http://4.bp.blogspot.com/-PezlYVgEEvg/TadW2e4OyHI/AAAAAAAAAAg/QHZPVQcBNeg/s1600/feu-rouge.png" />';
}
else
{
    echo '<span style="color:blue;">You are not banned!</span>';
    echo '<br/>';
    echo '<img src="http://identityspecialist.files.wordpress.com/2010/06/traffic_light_green.png" />';
}
?> 
```

* * *

# 要下载的图像

当爬虫需要做他的脏活时，那是为了大量的数据，并且在尽可能短的时间内。这就是为什么他们不下载页面上的图像；它需要太多的带宽并使爬行变慢。

这个想法（我认为最优雅和最容易实现）使用[mod_rewrite](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)将代码隐藏在 .jpg/.png/... 图像文件中。此图像应在您要保护的每个页面上都可用：它可能是您的徽标网站，但您将选择一个小尺寸的图像（因为不得缓存此图像）。

主意 ：

1/ 将这些行添加到您的 .htaccess

```
RewriteEngine On
RewriteBase /tests/anticrawl/
RewriteRule ^logo\.jpg$ logo.php 
```

2/ 安全地创建你的 logo.php

```
<?php

// start session and reset counter
session_start();
$_SESSION['no_logo_count'] = 0;

// forces image to reload next time
header("Cache-Control: no-store, no-cache, must-revalidate");

// displays image
header("Content-type: image/jpg");
readfile("logo.jpg");
die(); 
```

3/ 在您需要添加安全性的每个页面上增加您的 no_logo_count，并检查它是否达到您的限制。

示例代码：

```
<?php

$no_logo_limit = 5; // number of allowd pages without logo

// start session and initialize
session_start();
if (array_key_exists('no_logo_count', $_SESSION) == false)
{
    $_SESSION['no_logo_count'] = 0;
}
else
{
    $_SESSION['no_logo_count']++;
}

// check if user has reached limit of "undownloaded image"
$banned = false;
if ($_SESSION['no_logo_count'] >= $no_logo_limit)
{
    // puts ip of our user on the same "banned table" as earlier...
    $banned = true;
}

// At this point you have a $banned if your user is banned or not.
// The following code will allow us to test it...

echo '<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>';

// Display counter
echo "You did not loaded image {$_SESSION['no_logo_count']} times.";
echo str_repeat('<br/>', 2);

// Display "reload" link
echo <<< EOT

<a id="reload" href="#">Reload</a>

<script type="text/javascript">

  $('#reload').click(function(e) {
    e.preventDefault();
    window.location.reload();
  });

</script>

EOT;

echo str_repeat('<br/>', 2);

// Display "show image" link : note that we're using .jpg file
echo <<< EOT

<div id="image_container">
    <a id="image_load" href="#">Load image</a>
</div>
<br/>

<script type="text/javascript">

  // On your implementation, you'llO of course use <img src="logo.jpg" />
  $('#image_load').click(function(e) {
    e.preventDefault();
    $('#image_load').html('<img src="logo.jpg" />');
  });

</script>

EOT;

// Display if you're banned or not
echo str_repeat('<br/>', 2);
if ($banned)
{
    echo '<span style="color:red;">You are banned: click on "load image" and reload...</span>';
    echo '<br/>';
    echo '<img src="http://4.bp.blogspot.com/-PezlYVgEEvg/TadW2e4OyHI/AAAAAAAAAAg/QHZPVQcBNeg/s1600/feu-rouge.png" />';
}
else
{
    echo '<span style="color:blue;">You are not banned!</span>';
    echo '<br/>';
    echo '<img src="http://identityspecialist.files.wordpress.com/2010/06/traffic_light_green.png" />';
}
?> 
```

* * *

# 饼干检查

您可以在 javascript 端创建 cookie 以检查您的用户是否会解释 javascript（例如，使用 Curl 的爬虫不会）。

这个想法很简单：这与图像检查大致相同。

1.  将 $_SESSION 值设置为 1 并在每次访问中递增
2.  如果确实存在 cookie（在 JavaScript 中设置），则将会话值设置为 0
3.  如果此值达到限制，则禁止您的用户

代码 ：

```
<?php

$no_cookie_limit = 5; // number of allowd pages without cookie set check

// Start session and reset counter
session_start();

if (array_key_exists('cookie_check_count', $_SESSION) == false)
{
    $_SESSION['cookie_check_count'] = 0;
}

// Initializes cookie (note: rename it to a more discrete name of course) or check cookie value
if ((array_key_exists('cookie_check', $_COOKIE) == false) || ($_COOKIE['cookie_check'] != 42))
{
    // Cookie does not exist or is incorrect...
    $_SESSION['cookie_check_count']++;
}
else
{
    // Cookie is properly set so we reset counter
    $_SESSION['cookie_check_count'] = 0;
}

// Check if user has reached limit of "cookie check"
$banned = false;
if ($_SESSION['cookie_check_count'] >= $no_cookie_limit)
{
    // puts ip of our user on the same "banned table" as earlier...
    $banned = true;
}

// At this point you have a $banned if your user is banned or not.
// The following code will allow us to test it...

echo '<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>';

// Display counter
echo "Cookie check failed {$_SESSION['cookie_check_count']} times.";
echo str_repeat('<br/>', 2);

// Display "reload" link
echo <<< EOT

<br/>
<a id="reload" href="#">Reload</a>
<br/>

<script type="text/javascript">

  $('#reload').click(function(e) {
    e.preventDefault();
    window.location.reload();
  });

</script>

EOT;

// Display "set cookie" link
echo <<< EOT

<br/>
<a id="cookie_link" href="#">Set cookie</a>
<br/>

<script type="text/javascript">

  // On your implementation, you'll of course put the cookie set on a $(document).ready()
  $('#cookie_link').click(function(e) {
    e.preventDefault();
    var expires = new Date();
    expires.setTime(new Date().getTime() + 3600000);
    document.cookie="cookie_check=42;expires=" + expires.toGMTString();
  });

</script>
EOT;

// Display "unset cookie" link
echo <<< EOT

<br/>
<a id="unset_cookie" href="#">Unset cookie</a>
<br/>

<script type="text/javascript">

  // On your implementation, you'll of course put the cookie set on a $(document).ready()
  $('#unset_cookie').click(function(e) {
    e.preventDefault();
    document.cookie="cookie_check=;expires=Thu, 01 Jan 1970 00:00:01 GMT";
  });

</script>
EOT;

// Display if you're banned or not
echo str_repeat('<br/>', 2);
if ($banned)
{
    echo '<span style="color:red;">You are banned: click on "Set cookie" and reload...</span>';
    echo '<br/>';
    echo '<img src="http://4.bp.blogspot.com/-PezlYVgEEvg/TadW2e4OyHI/AAAAAAAAAAg/QHZPVQcBNeg/s1600/feu-rouge.png" />';
}
else
{
    echo '<span style="color:blue;">You are not banned!</span>';
    echo '<br/>';
    echo '<img src="http://identityspecialist.files.wordpress.com/2010/06/traffic_light_green.png" />';
} 
```

* * *

# 防止代理

关于我们可能在网上找到的不同类型的代理的一些话：

*   “普通”代理显示有关用户连接的信息（特别是他的 IP）
*   匿名代理不显示 IP，但会在标头上提供有关代理使用情况的信息。
*   高匿名代理不显示用户 IP，也不显示浏览器可能不会发送的任何信息。

找到连接任何网站的代理很容易，但很难找到高匿名代理。

如果您的用户位于代理后面，则某些 $_SERVER 变量可能包含键（详尽列表取自[此问题](https://stackoverflow.com/questions/5421144/php-get-real-ip-proxy-detection)）：

*   CLIENT_IP
*   转发
*   FORWARDED_FOR
*   FORWARDED_FOR_IP
*   HTTP_CLIENT_IP
*   HTTP_FORWARDED
*   HTTP_FORWARDED_FOR
*   HTTP_FORWARDED_FOR_IP
*   HTTP_PC_REMOTE_ADDR
*   HTTP_PROXY_CONNECTION'
*   HTTP_VIA
*   HTTP_X_FORWARDED
*   HTTP_X_FORWARDED_FOR
*   HTTP_X_FORWARDED_FOR_IP
*   HTTP_X_IMFORWARDS
*   HTTP_XROXY_CONNECTION
*   通过
*   X_FORWARDED
*   X_FORWARDED_FOR

`$_SERVER`如果您在变量上检测到其中一个键，您可能会为您的反爬网证券提供不同的行为（下限等） 。

* * *

# 结论

有很多方法可以检测您网站上的滥用行为，因此您肯定会找到解决方案。但是您需要准确地知道您的网站是如何使用的，这样您的证券就不会对您的“普通”用户产生攻击性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T06:05:40.920

Remember: HTTP is not magic. There's a defined set of headers sent with each HTTP request; if these headers are sent by web-browser, they can as well be sent by any program - including cURL (and libcurl).

Some consider it a curse, but on the other hand, it's a blessing, as it greatly simplifies functional testing of web applications.

**UPDATE:** As unr3al011 rightly noticed, curl doesn't execute JavaScript, so in theory it's possible to create a page that will behave differently when viewed by grabbers (for example, with setting and, later, checking a specific cookie by JS means).

Still, it'd be a very fragile defense. The page's data still had to be grabbed from server - and this HTTP request (and it's *always* HTTP request) can be emulated by curl. Check [this answer](https://stackoverflow.com/a/10891354/1229023) for example of how to defeat such defense.

... and I didn't even mention that some grabbers *are* able to execute JavaScript. )

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T07:47:46.713

避免虚假推荐人的方法是跟踪用户

您可以通过以下一种或多种方法跟踪用户：

1.  使用一些特殊代码（例如：上次访问的 url，时间戳）在浏览器客户端中保存一个 cookie，并在服务器的每个响应中验证它。

2.  与以前相同，但使用会话而不是显式 cookie

对于 cookie，您应该添加加密安全性，例如。

```
[Cookie]
url => http://someurl/
hash => dsafdshfdslajfd 
```

哈希是通过这种方式在 PHP 中计算的

```
$url = $_COOKIE['url'];
$hash = $_COOKIE['hash'];
$secret = 'This is a fixed secret in the code of your application';

$isValidCookie = (hash('algo', $secret . $url) === $hash);

$isValidReferer = $isValidCookie & ($_SERVER['HTTP_REFERER'] === $url) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-10T23:58:41.227

您可以通过以下方法检测 cURL-Useragent。但请注意，用户代理可能会被用户覆盖，无论如何默认设置都可以通过以下方式识别：

```
function is_curl() {
    if (stristr($_SERVER["HTTP_USER_AGENT"], 'curl'))
        return true;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-12T17:19:39.060

正如一些人提到的那样，cURL 无法执行 JavaScritp（据我所知），因此您可以尝试像raina77ow 建议的那样设置一些东西，但这对于其他抓取器/donwloader 来说是行不通的。

我建议您尝试构建一个[机器人陷阱](http://www.kloth.net/internet/bottrap.php)，以处理可以执行 JavaScript 的抓取器/下载器。

我不知道有任何一种解决方案可以完全防止这种情况，所以我最好的建议是尝试多种解决方案：

1) 在你的.htaccess 文件中只允许已知的用户代理，例如所有主流浏览器

2) 设置您的 robots.txt 以防止机器人

3) 为不尊重 robots.txt 文件的机器人设置机器人陷阱

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2012-09-05T08:04:57.647

将其作为文件放入根文件夹`.htaccess`。它可能会有所帮助。我在一个虚拟主机提供商网站上找到了它，但不知道这意味着什么:)

```
SetEnvIf User-Agent ^Teleport graber   
SetEnvIf User-Agent ^w3m graber    
SetEnvIf User-Agent ^Offline graber   
SetEnvIf User-Agent Downloader graber  
SetEnvIf User-Agent snake graber  
SetEnvIf User-Agent Xenu graber   
Deny from env=graber 
```

# c# - 从 DLL 设置 exe 主程序图标

> ID：12257586
> 
> 赞同：0
> 
> 时间：2012-09-04T06:00:17.073
> 
> 标签：c#, .net, dll, compilation, icons

这是我的问题：我有一个 .NET 应用程序，我的所有资源（图标、图像）都存储在一个单独的 DLL 文件中。现在，虽然很容易在运行时检索所有这些资源，但我想知道是否有办法从 DLL 中设置 Visual Studio 的应用程序属性中的主程序图标（在“图标和清单”下）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T15:59:32.280

您可以在 Windows 资源管理器中手动执行此操作，在 EXE 的文件属性对话框中，这是我知道的唯一方法。但您也可以为 exe 本身添加一个图标，Windows 资源管理器将自动使用它。如果您向 EXE 添加多个图标，Windows 资源管理器将使用它找到的第一个图标，但您可以将其更改为您想要的图标，方法与从 DLL 设置图标相同。

如果您想以编程方式执行此操作，例如使用您提供的安装程序，请使用 Google 了解如何确定需要更改的适当注册表项。但要小心，只有在你真的知道自己在做什么的情况下才写入注册表，否则你可能会破坏你的系统！

# iphone - 从 NSInvocation 或 NSNotificationCentre 或 Delegate 方法中使用哪一个更好

> ID：12257589
> 
> 赞同：6
> 
> 时间：2012-09-04T06:00:37.970
> 
> 标签：iphone, ios, delegates, nsnotificationcenter, nsinvocation

在整个项目中，哪一个更适合用于将数据从一个类流向另一个类？

`NSInvocation`

`NSNotificationCentre`

`delegate`方法

或通过我不知道的任何其他方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T06:08:02.287

它们都存在，因为它们都服务于不同的目的。简要地：

**NS调用**

抽象消息发送到一个对象，带有可选参数，表示为一个对象。不经常使用，尤其是在引入块之后。

也可以用作避免创建`NSOperation`子类的便捷方式（请参阅 参考资料`NSIvocationOperation`）。

**NSNotificationCenter**

向任意数量的未知“听众”广播消息。一对多。广播者不需要了解听众。包括用于补充信息的用户信息字典。最重量级/最慢的 - 不经常需要，但为了方便而经常看到。

在许多情况下，代表是足够的替代品。

**委托方法**

通常是一个抽象对象，通常采用特定协议。一对一的关系。处理动作而不是子类化的常用方法。

* * *

> 或通过我不知道的任何其他方法？

**块** `(^)`也可以用作回调/处理程序，并且通常作为 NSInvocations 的更类型安全的替代品。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T06:07:32.947

如果您只想与一个对象交谈，请使用委托。例如，一个 tableView 有一个委托 - 只有一个对象应该负责处理它。

如果您想告诉所有人发生了什么事，请使用通知。例如，在内存不足的情况下，会发送一条通知，告诉您的应用程序存在内存警告。因为您的应用程序中的许多对象可能希望降低其内存使用量，所以这是一个通知。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T06:16:00.790

只是添加到其他人编写的所有内容中，NSInvocation 不属于这一类，它只是存储了一个带有参数的方法的调用和可能的目标。NSNotificationCeter 使用它来完成它的工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T06:04:27.907

I use delegation. It's portable across platforms and tighter (not all going through a central dispatching system).

# java - 使用Java在图像上查找匹配图像模式坐标的区域

> ID：12257590
> 
> 赞同：2
> 
> 时间：2012-09-04T06:00:43.637
> 
> 标签：java, image-processing

我正在尝试编写一个小类，它将给定图像的部分与另一个图像匹配。

可以说，我有一个 1024x1024 的图像，以及另一个大小为 512x512 的图像。我想在大尺寸图像中找到小尺寸图像部分匹配模式的坐标。

是否有任何可用的库或框架？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T06:07:40.007

唯一想到的是将源图像和目标图像分成大小相等的片段，然后比较这些片段。此操作的结果将是某种百分比的相似度，其中具有较高百分比的源段通常获胜。这种技术（我认为）称为 WISARD 或 WIZARD（尽管我在网上找不到任何具体的东西）。

请注意，根据您所追求的，从图像中删除任何颜色也可能是一个好主意。此外，与任何图像比较过程一样，此过程对任何图形操作操作（例如倾斜和旋转）都高度敏感。

# ruby-on-rails - 在 irb 中需要“文件名”

> ID：12257594
> 
> 赞同：0
> 
> 时间：2012-09-04T06:01:14.093
> 
> 标签：ruby-on-rails, ruby, sinatra

我正在关注一本书，该书正在构建一个带有多个 mysql 数据库表的 Sinatra 应用程序。它给了我制作 mysql 数据库的说明，我做了，然后它告诉我进入 IRB 并做

```
require 'tinyclone' 
```

根据这本书，输入该命令将“需要创建数据库表的必要类”，之后我应该运行

```
Datamapper.auto_migrate! 
```

但是，当我尝试做 require 'tinyclone' 时，我收到了这个错误

```
LoadError: cannot load such file -- tinyclone
    from /Users/mm/.rvm/rubies/ruby-1.9.3-rc1/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /Users/mm/.rvm/rubies/ruby-1.9.3-rc1/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from (irb):1
    from /Users/mm/.rvm/rubies/ruby-1.9.3-rc1/bin/irb:16:in `<main>' 
```

我在 tinyclone.rb 所在的同一目录中的 IRB 会话中打开，所以我认为这不是问题所在。

谁能帮我一把？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T06:36:21.467

我不得不把完整的路径

需要'/Users/me/sites/cloning/tinyclone.rb'

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T06:42:06.657

除了包含完整路径，ruby 1.9 引入了一种新的方法来做到这一点。

```
require_relative 'tinyclone' 
```

这将需要当前文件的相对目录中的 tinyclone.rb 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T06:37:54.813

我们需要指定文件的完整路径，所以你需要像下面这样指定，

```
require './tinyclone' 
```

或者您可以指定完整路径，如下所示，

```
require '/home/user/tinyclone' 
```

# javascript - 在谷歌地图上找到最近的别针

> ID：12257605
> 
> 赞同：2
> 
> 时间：2012-09-04T06:01:58.503
> 
> 标签：javascript, google-maps, google-maps-api-3, geocoding

我一直在使用 javascript Google Maps API 来构建以下地图：[http](http://springhillfarm.com.au/locations-map/) ://springhillfarm.com.au/locations-map/现在我想在用户在搜索栏中搜索他们的位置时列出最近的 5 个引脚.

尝试进入像“North Epping”这样的郊区，地图将使用以下功能很好地移动：

```
$("#searchclick").click(function(){

    var address = document.getElementById('searchbar').value;

    var address = address + " Australia";

    var geocoder = new google.maps.Geocoder();

    geocoder.geocode( { 'address': address}, function(results, status) {

        if (status == google.maps.GeocoderStatus.OK) {

            var latitude2 = results[0].geometry.location.lat();
            var longitude2 = results[0].geometry.location.lng();
            var relocate = new google.maps.LatLng(latitude2, longitude2);
            map.setCenter(relocate);

            map.setZoom(12);

            } //when status is OK

        }); // geocode
    }); 
```

但现在我真的希望它返回最近的 5 个引脚。

这在javascript中怎么可能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T07:16:57.523

我在您的生产代码中注意到-我可能会/应该对其进行大量优化！- 你有你的位置和一堆标记使用以下：

```
var myLatlng = new google.maps.LatLng(-37.5759571, 143.8064523);
var marker0 = new google.maps.Marker({ position: new google.maps.LatLng(-37.7994512, 144.9643374), map: map, title:"Toothpicks, 720 Swanston Street Carlton 3052 VIC", icon:image });
var marker1 = new google.maps.Marker({ position: new google.maps.LatLng(-31.9097004, 115.8485327), map: map, title:"Good Life Shop, Shop 7 Dog Swamp Shopping Centre, Yokine WA 6060", icon:image }); 
```

ETC...

如果您在数组中有这些标记，例如：

```
var markers = [ marker0, marker1, etc... ] 
```

一个简单的方法是使用一些毕达哥拉斯来获取您当前位置和所有标记之间的距离。就像是：

```
// make a new array of markers since you probably don't want to modify the existing array
var markersByDistance = [];
for ( var i = 0; i < markers.length; i++ ) {
    var marker = markers[i];

    // using pythagoras does not take into account curvature, 
    // but will work fine over small distances.
    // you can use more complicated trigonometry to 
    // take curvature into consideration
    var dx = myLatlng.longitude - marker.longitude;
    var dy = myLatlng.latitude - marker.latitude;
    var distance = Math.sqrt( dx * dx + dy * dy );

    markersByDistance[ i ] = marker;
    markersByDistance[ i ].distance = distance;

}

// function to sort your data...
function sorter (a,b) { 
    return a.distance > b.distance ? 1 : -1;
}

// sort the array... now the first 5 elements should be your closest points.
markersByDistance.sort( sorter ); 
```

这一切都可能毫无意义，因为 Google Maps API 可能会为您本地执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T06:25:17.740

我不确定如果用户搜索仅显示 5 个图钉是否有意义 - 他可能会移动地图，然后他仍然只会看到 5 个图钉......

相反，我会采用不同的方法：如果加载完整的图钉集（如现在）太慢，只需将 Google 地图视口发送到 AJAX 脚本并让此脚本返回当前视口中的所有图钉。然后，您只能绘制与当前地图相关的图钉。当用户搜索他的位置时，视口发生变化（您缩放到新位置），您请求 AJAX 脚本并获取该区域中的所有图钉。这使得它更简单，更具可扩展性。

# php - 如何通过我的应用查看谁在线？

> ID：12257610
> 
> 赞同：0
> 
> 时间：2012-09-04T06:02:22.050
> 
> 标签：php, android, mysql

我用php和mysql在android中制作了一个服务器-客户端应用程序。当任何新用户注册并单击提交按钮时，他/她的信息将转到 php 并存储在 Internet 上的 mysql 数据库中。

然后我在列表视图中获得了之前在我的应用程序中注册的人员列表，在列表视图中我可以看到所有这些人，但现在我想添加一个功能，可以检查谁现在在我的应用程序中在线。我将制作两个按钮 ONLINE 和 OFFLINE。当我按下 ONLINE 按钮时，应该只显示那些现在正在使用这个应用程序的人。

我也在网上搜索过这个，但我找不到任何合适的结果，所以请任何以前做过这个的人给我一些想法或关于这个的教程链接。感谢您的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T06:32:30.040

在您的数据库中，添加一个名为 (last_login as DateTime) 的字段。每次用户登录应用程序并启动新会话时，都会更新此字段。使用类似于下面的查询。

`UPDATE tbl_users SET last_login=NOW() WHERE ID_FIELD = $USER_ID`

每当用户单击（谁在线）按钮时，都会调用一个 PHP 脚本，该脚本会查询 last_login 字段包含值（例如小于 3 小时）的所有用户。

您可以使用的查询

`SELECT * FROM tbl_users WHERE TIMESTAMPDIFF(HOUR,last_login,NOW()) <=3`

# c# - 实体框架、二进制数据和 LOH

> ID：12257613
> 
> 赞同：1
> 
> 时间：2012-09-04T06:02:39.297
> 
> 标签：c#, .net, entity-framework, large-object-heap

我需要在数据库（MS SQL）中存储大量二进制数据，并通过 EF 与该数据库进行交互。不幸的是，EF 不支持 FILESTREAM（更准确地说，没有流支持）。

所以，我决定将数据存储在块中。Chunk 只是一个实体类型：

```
public class Data
{
  public int Id { get; set; }
  public Collection<Chunk> Chunks { get; set; }
}

public class Chunk
{
  public int Id { get; set; }
  public int DataId { get; set; }
  public byte[] Content { get; set; }
} 
```

首先，我想通过某个最佳值来限制块大小，比如 1 Mb。
但后来我想起了大物体和 LOH。

据我了解，每个`Chunk.Content`实例都将被视为具有以下后果的大对象（尤其是内存碎片）。`Chunk`因此，最终会导致对象的密集创建`OutOfMemoryException`（它是“24/7”应用程序，使用该二进制数据是应用程序的主要目的）。

我不能为数据块重用任何缓冲区，因为我正在使用 EF...
我应该减小块大小，使其更低，然后是 85K？
或者是偏执狂？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T07:18:12.110

仅当您同时在内存中有太多块时，才会出现 LOH 碎片问题，但从您的描述看来，每个“进程”都会有一个块。您期望有多少个并发进程？如果您希望拥有许多进程，您很可能还希望硬件具有足够的处理能力和内存（64 位平台）。处理这么多并行块不是硬件的真正限制吗？

无论如何，如果您需要将流存储到数据库，您应该`FILESTREAM`在没有 EF 的情况下简单地使用。不惜一切代价坚持使用 EF 是架构失败。

# javascript - Node.js：在修改时确定文件大小

> ID：12257615
> 
> 赞同：4
> 
> 时间：2012-09-04T06:02:43.430
> 
> 标签：javascript, node.js, filesystems

我正在查看 Node.js 中的文件，并希望在每次文件更改时获取文件的大小。如何做到这一点`fs.watchFile`？

这就是我目前正在做的事情：

```
fs.watchFile(file, function(curr, prev) {
  // determine file size
}); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-04T06:07:41.960

```
var fs = require('fs');

fs.watchFile('some.file', function () {
    fs.stat('some.file', function (err, stats) {
        console.log(stats.size);
    });
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-20T03:29:18.577

我错过了返回`curr`的变量是. 这将是最佳解决方案：`prev``fs.watchFile``fs.Stats`

```
var fs = require('fs');

fs.watchFile('file', function (curr, prev) {
  console.log(curr.size);
}); 
```

但是，从 Node v0.8.0 开始，`fs.watchFile`不再使用`IOWatcher`，现在使用 stat 轮询，速度慢且不提供实时更新。这在[GitHub 上](https://github.com/joyent/node/issues/3348)进行了讨论。

从节点[更改日志](http://nodejs.org/changelog.html)：

> 弃用 iowatcher、fs：修复 fs.watchFile() (Ben Noordhuis)

相反，另一种解决方案是现在`fs.watch`和`fs.stat`：

```
var fs = require('fs');

fs.watch('file', function (curr, prev) {
  fs.stat('file', function (err, stats) {
    console.log(stats.size);
  });
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T06:05:26.097

Use `fs.stat` in the callback: `watchFile` just lets you know it changed, it doesn't report the change details.

# php - MySQL 身份验证在 php 上失败，但在 phpmyadmin 中失败

> ID：12257617
> 
> 赞同：0
> 
> 时间：2012-09-04T06:02:50.047
> 
> 标签：php, mysql, authentication, phpmyadmin

我正在开发一个具有 MySQL 访问权限的 PHP 网站。我的托管站点是共享的，我从`phpmyadmin`安装在共享托管服务器上的数据库创建了一个数据库。我创建了 2 个用户，一个具有管理权限，另一个只有读/写权限。我可以使用两个帐户成功连接 phpmyadmin，但是当我尝试使用相同的帐户和使用相同的凭据访问 mysql 时，php 给了我一个：

```
Database connection failed: Access denied for user 'myusername'@'localhost' (using password: YES) 
```

这很奇怪。`PHPMyAdmin`说服务器是本地主机，这意味着我`mysql_connect`在 php 中使用正确的服务器参数来执行我的函数。

有谁知道出了什么问题？有没有可能只为 PHPMyAdmin 启用 mysql（这很荒谬）？

非常感谢您，我将不胜感激。:)

这是一个示例代码（出于安全目的，替换了用户名和密码）：

```
defined('DB_SERVER') ? null : define("DB_SERVER", "localhost");
defined('DB_USER')   ? null : define("DB_USER", "host_admin");
defined('DB_PASS')   ? null : define("DB_PASS", "mysuperpassword");
defined('DB_NAME')   ? null : define("DB_NAME", "mydb_inhostingserver");

...

$this->connection = mysql_connect(DB_SERVER, DB_USER, DB_PASS);

if (!$this->connection) {
    die("Database connection failed: " . mysql_error());
} else {
    $db_select = mysql_select_db(DB_NAME, $this->connection);

    if (!$db_select) {
    die("Database selection failed: " . mysql_error());
    }
} 
```

...

```
Database connection failed: Access denied for user 'host_admin'@'localhost' (using password: YES) 
```

我还回应了 4 个常量，它们的值是正确的！我真的迷路了……

## 附加信息：

*   FTP地址为：ftp.thewebsiteimtalkingabout.com
*   PhpMyAdmin 地址为：mysql.thewebsiteimtalkingabout.com

那么这是否意味着我的代码和 MySQL 的 phpmnyadmin 运行在同一台主机上？

## 回答：

好的，所以我正在测试他们在不同服务器中的理论，尽管他们的域是相同的。我提取了它们各自的ip地址，发现它们是不同的。然后我将“localhost”参数替换为 phpmyadmin 所在的 ipaddress，然后繁荣！它现在已连接。非常感谢大家的回复！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T06:17:04.510

Eepot - 这并不意味着您的应用程序与 mySQL 数据库位于同一台服务器上。

例如，在我的主机上，它在另一台服务器上的数据库 - 但 phpmyadmin 也在该服务器上。这意味着“phpmyadmin”将服务器报告为“localhost”——但我的应用程序需要使用完整的服务器名称连接到服务器。

您需要向您的托管服务提供商询问连接到您的 mySQL 服务器的详细信息。

# python - django request.POST 包含

> ID：12257618
> 
> 赞同：5
> 
> 时间：2012-09-04T06:02:51.590
> 
> 标签：python, django, apache, django-views, mod-python

我有一个 django 表单来获取用户名、密码。当用户发布数据时，我看到帖子字典包含以下内容（回溯），回溯（最近一次调用）：

```
File "/usr/lib/python2.4/site-packages/django/core/handlers/base.py", line 111, in get_response
response = callback(request, *callback_args, **callback_kwargs)

File "/usr/lib/python2.4/site-packages/django/views/decorators/csrf.py", line 39, in wrapped_view
resp = view_func(*args, **kwargs)

File "/usr/lib/python2.4/site-packages/django/views/decorators/csrf.py", line 52, in wrapped_view
return view_func(*args, **kwargs)

File "/public/gdp/trunk/src/ukl/lis/process/utils/error_handler.py", line 17, in __call__
return self.function(*args, **kwargs)

File "/usr/lib/python2.4/site-packages/django/views/decorators/cache.py", line 66, in _cache_controlled
response = viewfunc(request, *args, **kw)

File "/public/gdp/trunk/src/ukl/lis/process/authentication/views.py", line 530, in process_login
form = loginForm(request.POST)

File "/usr/lib/python2.4/site-packages/django/core/handlers/modpython.py", line 101, in _get_post
self._load_post_and_files()

File "/usr/lib/python2.4/site-packages/django/http/__init__.py", line 270, in _load_post_and_files
if self.META.get('CONTENT_TYPE', '').startswith('multipart'):

AttributeError: 'NoneType' object has no attribute 'startswith'

<ModPythonRequest
path:/login.html,
GET:<QueryDict: {}>,
POST:<could not parse>,
COOKIES:{'__utma': '115966011.1553834174.1346687405.1346687405.1346687045.1',
'__utmb': '115962011.4.10.1346687045',},
META:{'AUTH_TYPE': None,
'CONTENT_LENGTH': '85',
'CONTENT_TYPE': None,
'GATEWAY_INTERFACE': 'CGI/1.1',
'HTTP_ACCEPT': 'text/html, application/xhtml+xml, */*',
'HTTP_ACCEPT_ENCODING': 'gzip, deflate',
'HTTP_ACCEPT_LANGUAGE': 'en-GB',
'HTTP_CACHE_CONTROL': 'no-cache',
'HTTP_CONNECTION': 'Keep-Alive',
'HTTP_CONTENT_LENGTH': '85',
'HTTP_COOKIE': 'flavor=desktop; sessionid=4a2f2ab6f61315493f3038338524cfc7;    tmsid=e7c921af-9cae-4f58-8825-13f9bc2ba95f; uniqid=6f69c607-6aca-4e92-a112-b83691805155; __utma=115962011.1553833174.1346687005.1346687005.1346687005.1; __utmb=115962011.4.10.1346687005; __utmz=115962011.1346687005.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); __utmc=115962011',
'HTTP_HOST': 'example.com',
'HTTP_REFERER': 'http://example.com/',
'HTTP_USER_AGENT': 'Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64;  Trident/5.0)',
'PATH_INFO': u'/login.html',
'PATH_TRANSLATED': None,
'QUERY_STRING': None,
'REMOTE_ADDR': 'xx.xx.xx.xx',
'REMOTE_HOST': None,
'REMOTE_IDENT': None,
'REMOTE_USER': None,
'REQUEST_METHOD': 'POST',
'SCRIPT_NAME': '',
'SERVER_NAME': 'example.com',
'SERVER_PORT': 443,
'SERVER_PROTOCOL': 'HTTP/1.1',
'SERVER_SOFTWARE': 'mod_python'}> 
```

为什么 post dict 有“<could not parse>”，为什么 CONTENT_TYPE 没有？这可以防止我越过登录页面。

这是我的表格

```
 <form method="POST">{% csrf_token %}
       <tr>
     <td><label>Email Id</label></td>
     <td>{{form.username}}</td>
     <td><label>Password</label></td>
     <td>{{form.password}}</td>
   </tr>
    <input type="submit" name="btn_login" id="btn_login" class="btn_login" value="Login" /></td>

  </form> 
```

表格.py：

```
class loginForm(ModelForm):
    username = forms.CharField(max_length=50)
    password = forms.CharField(max_length=50, widget=forms.PasswordInput(attrs=  {"autocomplete":"off"}))

    class Meta:
        model = User 
```

看法：

```
def login(request):
 if request.method == "POST":
   log.inof(request)
 else:
  request.session.set_test_cookie()
  form = loginForm()
  return render_to_response('login.html', {'form':form},context_instance=RequestContext(request)) 
```

注意：我还发现所有请求都来自移动设备，尤其是黑莓。似乎还有一个用户有同样的问题

参考：[https ://stackoverflow.com/questions/12471661/mod-python-could-not-parse-the-django-post-request-for-blackberry-and-some-andro](https://stackoverflow.com/questions/12471661/mod-python-could-not-parse-the-django-post-request-for-blackberry-and-some-andro)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T16:07:37.117

由于您的开发堆栈上不会发生该错误，因此*有时*在生产中我怀疑它是否在您的 Django 代码中。

你是如何联系机器的？请求将发送到本地主机。您是在生产机器上运行浏览器，还是在它前面有一些代理或负载均衡器？

在我看来，在您的请求到达 mod_python 之前，有些东西正在破坏您的请求，无论是代理还是配置错误的 ssl。

症状是您收到中断的请求。问题可能出在您的 python 应用程序的任何地方，从您端的所有 OSI 层到客户端的所有 OSI 层。尝试全面了解介于两者之间的所有事物并系统地排除它们。

您的 TCP/IP 堆栈似乎工作正常，否则您会看到其他请求和服务也受到影响。所以我们可以排除会话层以下的一切。剩下的是表示层 (SSL) 和应用层 (HTTP)。

1.  SSL

    SERVER_PORT 是 443，SSL 在这里起作用。请求标头（HTTP_REFERER 等）包含有效字符串，因此 SSL 似乎工作正常。但我以前见过一些奇怪的混乱的 TLS 会话。

2.  HTTP

    这一层的玩家：

    *   你的 Apache httpd
    *   您的任何反向代理
    *   您和客户之间的任何转发代理。REMOTE_ADDR 是否都在同一个子网中，是否有一些移动运营商的代理损坏？
    *   客户端用户代理。所有的黑莓都坏了吗？尝试使用您认为最失败的浏览器。

您的负载均衡器在哪一层运行？

似乎主要问题是 POST 请求中缺少 Content-Type 标头，因此在 Python 表示的 POST 内容上的值无法使用 pprint 打印出来，更不用说您的应用程序使用了。

忽略[我](https://stackoverflow.com/questions/12257618/django-request-post-contains-could-not-parse/12463129#comment16785396_12257618)在 Blackberry developer ref 中找到的内容：您是否尝试过按照[Simon 的建议](https://stackoverflow.com/questions/12257618/django-request-post-contains-could-not-parse/12463129#comment16668943_12257618)明确设置 enctype ？尝试改变`application/x-www-form-urlencoded`和`multipart/form-data`。

最重要的是尝试自己复制它。尝试制作一个记录此类请求的[tcpdump](http://www.tcpdump.org/)。[您可以使用wireshark](http://www.wireshark.org/)分析记录的转储。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-18T18:26:44.993

您可以尝试使用 mod_wsgi 而不是 mod_python 进行部署吗？我将从那里开始，它可能不是 django 错误，否则每个人都会收到错误，而不仅仅是破解莓用户。Mod_python 已经很老了，我遇到了更多关于 mod_wsgi 的问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-13T11:56:32.397

django/core/handlers/wsgi.py 似乎把消息放在那里；你可以破解代码并将str（异常）也放在那里。

但是，我的猜测是您没有正确指定字符集；django 假设为 UTF-8，并且表单以 python 无法解码的一些完全随机的字符集提交，也许？此外，您可能想尝试删除 CSRF 中间件一段时间，并尝试在没有它的情况下它是否可以工作。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-18T08:02:20.430

也许黑莓客户端 gzip 他们的 POST 正文以节省带宽？Django 不会自动解码 gzip 压缩的消息（至少在 Django 1.3.1 中）。在您看来，尝试[解码原始 POST 数据](https://stackoverflow.com/questions/2695152/in-python-how-do-i-decode-gzip-encoding)：

```
import zlib
post_data = zlib.decompress(request.raw_post_data, 16+zlib.MAX_WBITS) 
```

通常，`HTTP_CONTENT_ENCODING`应该设置 HTTP 标头，但负载均衡器可能会不小心将其剥离？

# iphone - How can I convert images to bytes and bytes to image?

> ID：12257619
> 
> 赞同：3
> 
> 时间：2012-09-04T06:02:51.917
> 
> 标签：iphone, ios

How to convert images to bytes and send out to a stream, then receive bytes from the input stream, and convert the bytes into images again?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T06:07:01.880

For getting bytes from an image:

```
NSData *imageData = UIImageJPEGRepresentation(image, imageQuality); 
```

For getting an image from bytes:

```
UIImage *image = [UIImage imageWithData: imageData]; 
```

BTW, If you need the bytes from the NSData just call its bytes method.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T06:09:28.970

将图像转换为字节，如下所示：

```
NSData *imageData = UIImagePNGRepresentation(yourImage.image);  
NSUInteger len = [imageData length];
Byte *byteData= (Byte*)malloc(len);
[imageData  getBytes:byteData length:len]; 
```

现在像这样字节成图像：

```
NSData *pictureData = [NSData dataWithBytes:byteData];
UIImage *image = [[UIImage alloc]initWithData:pictureData]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T06:18:39.650

`UIImage`到字节数组

```
UIImage *image = [UIImage imageNamed:@"image.png"];
NSData *data = UIImagePNGRepresentation(image);
NSString *byteArray  = [data base64Encoding]; 
```

字节数组到`UIImage`

```
+ (UIImage *)imageWithData:(NSData *)data;
NSData *data = [NSData dataWithBytes:YOUR_BYTE_ARRAY length:ARRAY_LENGTH];
UIImage *img = [UIImage imageWithData:data];
UIImageView *imgView = [[UIImageView alloc]initWithImage:img]; 
```

希望您找到解决方案。

# android - as3 get zip file on phone from app - file path then unzip

> ID：12257626
> 
> 赞同：1
> 
> 时间：2012-09-04T06:03:23.557
> 
> 标签：android, actionscript-3, flash, actionscript, zip

The following code when run in air works great on the desktop. It allows you to select the file and unzip it and write it.

However, when I run it on my phone only "Audio", "Video" , "Images" files become avail able and I can't access a zip file I want to unzip from my phone. Here is the full code:

```
import com.coltware.airxzip.ZipEntry;
import com.coltware.airxzip.ZipError;
import com.coltware.airxzip.ZipFileReader;
import com.coltware.airxzip.*;

import flash.filesystem.File;
import flash.utils.ByteArray;
import flash.net.FileReference;
import flash.net.FileFilter;
import flash.filesystem.FileStream;
import flash.filesystem.FileMode;

var file:File;
var fileReference:FileReference;
var fileFilter:FileFilter;
var baseDir:File = File.documentsDirectory;

function unzip_init():void{

    fileFilter = new FileFilter("selected your zip file.", "*");
    file = new File();

    **// This next line did not work and the one below that either. mistakes here!
    //file.browseForDirectory("Choose a directory");**
    file.browseForOpen("file://mnt/sdcard/", [fileFilter]);
    file.addEventListener(Event.SELECT, onSelectedFile);
}

function onSelectedFile(e:Event):void
{

    trace(file.nativePath);
    var reader:ZipFileReader = new ZipFileReader();
    reader.open(file);

    var list:Array = reader.getEntries();
    var i:int = 0;

    for each(var entry:ZipEntry in list)
    {
        var filename:String = entry.getFilename();

        if(entry.isDirectory())
        {

            trace("DIR  --->" + entry.getFilename());
            //  If entry is directory
            var dir:File = baseDir.resolvePath(filename);
            dir.createDirectory();
        }
        else
        {
            trace("FILE --->" + entry.getFilename() + "(" + entry.getCompressRate() + ")");
            var unzippedBytes:ByteArray = reader.unzip(entry);
            //trace("btyes --->" + unzippedBytes);
            var file:File = File.userDirectory.resolvePath(entry.getFilename());
            var fs:FileStream = new FileStream();
            fs.open(file,FileMode.WRITE);
            fs.writeBytes(unzippedBytes,0,unzippedBytes.length);
            fs.close();
        }
    }
    reader.close();
}

unzip_init(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:49:36.180

您必须使用 flash.filesystem.File 类编写自己的文件浏览器。

以下是我自己的 FileBrowser 类中的一些方法：

```
/**
 * Displays root directories
 */
public function showRootFolders():void
{
    if (!m_oLocation) m_oLocation = new File();
    var rootDirs:Array = File.getRootDirectories();
    if (!m_vRootDirs) m_vRootDirs = new Vector.<File>();

    for (var i:int = 0; i < rootDirs.length; i++)
    {
        var item:File = rootDirs[i];
        if (i < m_vRootDirs.length) m_vRootDirs[i] = item;
        else m_vRootDirs.push(item);
    }

    if (contains(m_oLevelUp)) removeChild(m_oLevelUp);
    m_oFolderName.setLabel("ROOT");
    m_oFolderInfo.setLabel(rootDirs.length + " Folder(s), " + 0 + " File(s)");

    displayList(m_vRootDirs);
}

/**
 * <p>Gets all files from requested location (File) and updates list view.</p>
 * @param    p_oLocation
 * @param    p_bLinkToParent
 */
public function listLocation(p_oLocation:File, p_bLinkToParent:Boolean=false):void
{
    trace("listLocation(p_oLocation:File):void");
    //folder or file
    if (p_oLocation.isDirectory)
    {
                    clear()://clear list view
        var _vItems:Vector.<File> = new Vector.<File>();

        var files:Array = p_oLocation.getDirectoryListing();

        trace("files.length:"+files.length);
        var _nFiles:int = 0;
        var _nFolders:int = 0;

        for (var i:int = 0; i < files.length; i++)
        {
            var item:File = files[i];

            if (item.isDirectory) _nFolders++;
            else _nFiles++;

            _vItems.push(item);
        }

        if (p_bLinkToParent)
        {
            if (p_oLocation.parent != null || m_vRootDirs.length > 0)
            {
                //return button
                m_oParent = p_oLocation.parent;

                addChild(m_oLevelUp);
            }
            else
            {
                if (contains(m_oLevelUp)) removeChild(m_oLevelUp);
            }
        }
        else
        {
            m_vRootDirs.length = 0;
            if (contains(m_oLevelUp)) removeChild(m_oLevelUp);
            m_oParent = null;
        }

        m_oFolderInfo.setLabel(_nFolders + " Folder(s), " + _nFiles + " File(s)");

        m_oFolderName.setLabel(p_oLocation.name);

        displayList(_vItems);
    }
}

/**
 * <p>Display given file list in the list view</p>
 * @param    p_vFileList
 */
protected function displayList(p_vFileList:Vector.<File>):void
{
    trace("displayList(p_vFileList:Vector.<File>):void");
    clear();//clear list view
    //sort
    p_vFileList = p_vFileList.sort(sortByName)
    //[...]
    //build
    var data:Vector.<ListItemData> = new Vector.<ListItemData>();

    var p:Point = new Point();
    for (var i:int = 0; i < p_vFileList.length; i++)
    {
        var item:File = p_vFileList[i];
                    //here do what ever you like with the list of files
                    //e.g. populate the list view with different type based on the file extension, type etc.
        }
} 
```

希望对你有一点帮助

此致

# python - Python import: from django import template: module object 'template' has no attribute 'loader'

> ID：12257630
> 
> 赞同：0
> 
> 时间：2012-09-04T06:03:49.617
> 
> 标签：python, import, openshift

I'm developing a Django project and deploying it to OpenShift PaaS. At first everything worked, but after some changes irrelevant to template system (I added django-hosts) something broke there and a `"module object 'template' has no attribute 'loader'"` error started to appear. What was even stranger, it appeared only two times after each wsgi app restart, and on 3rd request everything started to work. I went back to last commit before breakage, but the problem persisted. I recreated project from scratch and reinstalled my Django app, but it didn't go either; error started appearing every time, not just with first 2 requests. `from django import template` really imports template module object, but this object lacks about 5 attributes, including `loader`, as compared to what expected.

Then I noticed that same thing happens if I try to run the same code from Django shell locally. But it still works in my app's views.py with local Django development server. And in used to work in OpenShift initially. I tried replacing `from django import template` with `from django.template import loader` and calling `loader` directly - and EVERYTHING WORKED

I think I don't understand something about Python import. What's the difference between

```
import a
a.b 
```

and

```
from a import b
b 
```

?

Why can a.b in first example miss attributes b has in second one?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T06:16:09.130

发生这种情况是因为 template 是 django 中的一个包，而 loader 是一个模块，而您期望模板是一个模块，而 loader 是它的属性之一。它按预期工作。

# maven - 如何仅使用公司本地关系存储库

> ID：12257633
> 
> 赞同：12
> 
> 时间：2012-09-04T06:04:03.023
> 
> 标签：maven

我想使用 nexus 创建公司本地 maven 存储库。存储库不应从公共 Internet 下载任何内容，所需的一切都添加到 repo。开发人员的本地 maven 实例应从公司 nexus 下载所需的库和工具。我已经设法通过在 settings.xml 中使用这样的镜像来做到这一点：

```
<mirror>
  <id>company-repository</id>
  <name>Company releases repository</name>
  <url>http://nexus.company.com/nexus/content/repositories/releases</url>
  <mirrorOf>*</mirrorOf>
</mirror> 
```

这个解决方案的问题是我只能指向发布存储库，我还想包括第三方和快照存储库来搜索。有谁知道应该怎么做？镜像标签只需要一个 url。

我也尝试过像这样定义默认配置文件：

```
<profile>            
    <id>defaultProfile</id>
    <activation>
        <activeByDefault>true</activeByDefault>
    </activation>
    <repositories>
        <repository>
            <id>company-thirdparty-repo</id>
            <url>http://nexus.company.com//nexus/content/repositories/thirdparty</url>
            <releases>
                 <checksumPolicy>fail</checksumPolicy> 
            </releases>
            <snapshots>
                <enabled>false</enabled>
            </snapshots>
        </repository>
        <repository>
            <id>company-releases-repo</id>
            <url>http://nexus.company.com/nexus/content/repositories/releases</url>
            <snapshots>
                <enabled>true</enabled>
                <updatePolicy>always</updatePolicy>
                <checksumPolicy>fail</checksumPolicy>
            </snapshots>
            <releases>
                <enabled>true</enabled>
                <checksumPolicy>fail</checksumPolicy>
            </releases>
        </repository>
    </repositories>
    <pluginRepositories>
        <pluginRepository>
            <id>central</id>
            <url>http://nexus.company.com/nexus/content/repositories/central</url>
            <releases>
                <enabled>true</enabled>
                <checksumPolicy>fail</checksumPolicy>
            </releases>
            <snapshots>
                <checksumPolicy>fail</checksumPolicy>
            </snapshots>
        </pluginRepository>
    </pluginRepositories>            
</profile> 
```

该解决方案的问题在于，如果 Maven 从这些存储库中找不到某些东西，它仍然会从 repo.maven.apache.org 下载它。我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T06:55:19.840

您可以使用两者的组合：

为远程公共 repo 的代理创建一个存储库组（假设您将其称为 public）。使用它来镜像 Maven 的唯一默认存储库，即“中央”

对于其他存储库，只需将其添加为存储库/插件存储库

settings.xml 如下所示：

```
<settings>
    <mirrors>
        <mirror>
            <id>nexus</id>
            <mirrorOf>central</mirrorOf>
            <url>http://your/nexus/groups/public</url>
        </mirror>
    </mirrors>

    <profiles>
        <profile>
            <id>nexus</id>
            <repositories>
                <repository>
                    <!-- for you to override settings of central -->
                    <id>central</id>
                    <url>http://a.fake.host</url>
                    <releases><enabled>true</enabled></releases>
                    <snapshots><enabled>true</enabled></snapshots>
                </repository>
                <repository>
                    <id>anotherRepo</id>
                    <url>http://your/nexus/groups/anotherRepo</url>
                    <releases><enabled>true</enabled></releases>
                    <snapshots><enabled>true</enabled></snapshots>
                </repository>

            </repositories>
            <pluginRepositories>
                <pluginRepository>
                    <!-- for you to override settings of central -->
                    <id>central</id>
                    <url>http://a.fake.host</url>
                    <releases><enabled>true</enabled></releases>
                    <snapshots><enabled>true</enabled></snapshots>
                </pluginRepository>

                <pluginRepository>
                    <id>anotherRepo</id>
                    <url>http://your/nexus/groups/anotherRepo</url>
                    <releases><enabled>true</enabled></releases>
                    <snapshots><enabled>true</enabled></snapshots>
                </pluginRepository>
            </pluginRepositories> 
        </profile>
    </profiles>

    <activeProfiles>
        <activeProfile>nexus</activeProfile>
    </activeProfiles>
</settings> 
```

# c - 需要在linux内核驱动中定义ioctl

> ID：12257635
> 
> 赞同：0
> 
> 时间：2012-09-04T06:04:11.527
> 
> 标签：c, linux, linux-kernel, ioctl

我已经开始学习ioctl

我有这个例子

[http://tldp.org/LDP/lkmpg/2.6/html/x892.html](http://tldp.org/LDP/lkmpg/2.6/html/x892.html)

我得到了 ioctal 的全部工作，但我不明白为什么以及在哪里需要为我们的驱动程序定义 ioctal。？

对于那个例子

而不是打电话 `ioctl(file_desc, IOCTL_SET_MSG, message);`

为什么我们不能直接使用

```
device_write(file, message, size, 0); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T06:15:28.563

我很确定这只是因为它的教程性质。它试图向您展示如何使用`ioctl`. 实际上，`ioctl`将用于配置设备驱动程序或它背后的设备，并且您将使用“正常”方法（可能`write`）写入数据。

而且，事实上，这就是您提供的链接中的代码所做的事情，它只是将信息传递给内核在将您的数据复制到内核空间*后*`device_write`所做的事情。

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T06:17:16.110

关键是 ioctl 可以从用户空间调用，但 device_write 只能从内核内部调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T06:48:51.987

`ioctl`主要用于设置或获取有关设备的特定参数或标志，例如读取或写入设备寄存器。

想象一下你有一个旧的软盘驱动器。它有特殊的寄存器来控制“打开或关闭电机”、“每个扇区的位数”等。要设置这些寄存器，您可以使用该`ioctl`功能。要写入您使用的实际磁盘，例如`device_write`.*

# c# - Difference in SocketAsyncEventArgs for services? C#

> ID：12257641
> 
> 赞同：0
> 
> 时间：2012-09-04T06:04:36.537
> 
> 标签：c#, multithreading, asynchronous

I'm building a windows service in C# to work as a server, I first built it as a regular application and it works like a charm, but when I transferred it to the service I get no connections, everything seems to be set up fine. But when I connect I get nothing, no event is triggered... Is there a difference that I need to keep in mind?

/Nick

```
public void start()
    {
            try
            {

                int port = DEFAULT_PORT;
                Int32 numConnections = DEFAULT_NUM_CONNECTIONS;
                Int32 bufferSize = DEFAULT_BUFFER_SIZE;

                SocketListener sl = new SocketListener(numConnections, bufferSize, parent);

                sl.Start(port); 

                Console.WriteLine("Server listening on port {0}. Press any key to terminate the server process...", port);
                Console.Read();

                sl.Stop();

            }

            catch (Exception ex)
            {
                parent.logger.WriteLogg(ex.ToString(), Logger.LoggType.Debug);
            }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T06:18:50.513

由于该服务不执行 Console.Write/Read 所以在服务中我关闭了 SocketListener 但在应用程序中它停止在 Console.Read()

# ubuntu - GPG 错误“没有足够的随机字节可用。请做一些其他工作让操作系统有机会收集更多”

> ID：12257653
> 
> 赞同：67
> 
> 时间：2012-09-04T06:05:41.627
> 
> 标签：ubuntu, gnupg

我在用：

```
 gpg --gen-key 
```

有没有更好的方法来创建 PGP 密钥？这个程序想要什么？一个完全猛烈的服务器？

> 没有足够的随机字节可用。请做一些其他的工作，让操作系统有机会收集更多

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-10-03T21:04:42.477

根据您的系统硬件，使用硬件 TRNG（真随机数生成器）和内核熵池之间的桥梁可能会获得更可靠的成功。

我发现通过在 Universe 存储库中使用 rng-tools 可以显着提高速度，可以使用 Synaptic 或其他 GUI 包管理器或通过命令行安装它：

```
sudo apt-get install rng-tools 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2014-05-25T09:26:13.807

在后台执行以下命令对我有用：

```
sudo find / -type f | xargs grep somerandomstring > /dev/null 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-09-04T06:08:45.373

您可以四处移动鼠标、浏览互联网、玩游戏、让您的电脑开机一夜。有很多方法可以生成随机字节。您不需要照看 gpg 进程。

编辑：我应该澄清一下：您不需要注意甚至不需要输入 gpg 正在运行的终端。（无论如何，输入该终端是一个非常糟糕的主意。）

如果您在远程服务器上，并且无法以其他方式生成工作，您可以试试这个：[http](http://packages.debian.org/squeeze/stress) ://packages.debian.org/squeeze/stress 。 **不过要小心**。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-03-03T15:00:22.807

我发现即使在 ssh 界面上也可以**将程序移到后台：**

1.  将任务移至后台 ( `Ctrl`+ `z`)
2.  执行一些简短的任务 ( `cd ~ && ./my-time-waster.sh`)
3.  将任务移至前台 ( `fg`)
4.  等一两分钟

*我正在使用 CentOS5 和 CentOS6。*

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-11-10T16:00:22.140

尝试使用`rngd`，但如果没有 ，`-r /dev/random`您会经常看到人们建议（这将导致 GPG 密钥不安全）。在我的机器上，只要安装`rngd`就会安装一个守护进程，它可以快速、安全地填充我的熵。

# excel - 如何在没有 Windows 屏幕更新的情况下导入工作表？

> ID：12257654
> 
> 赞同：1
> 
> 时间：2012-09-04T06:05:42.073
> 
> 标签：excel, vba

我需要从另一本书导入一张纸

```
Application.ScreenUpdating = False
Workbooks.Open fileName:=ThisWorkbook.path & "\temp01.xlsx"
Workbooks("temp01.xlsx").Sheets.Copy before:=ThisWorkbook.Sheets("adm")
Workbooks("temp01.xlsx").Close False
Application.ScreenUpdating = True 
```

但在 Windows 任务栏中可以看到这本书 si 打开，几秒钟后 - 关闭。
有没有办法在不打开目标书的情况下导入工作表，或者在没有更新任务栏的情况下打开它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:34:10.340

您可以将此行添加到代码的开头。

```
Application.Visible = False 
```

这个列表到你的代码末尾

```
Application.Visible = True 
```

当您的代码运行时，它将隐藏任务栏上的 Excel 应用程序。

# php - MySQL 更新重复事件

> ID：12257667
> 
> 赞同：1
> 
> 时间：2012-09-04T06:07:05.127
> 
> 标签：php, mysql, recurring-events

我已经为此苦苦挣扎了一段时间，并且会喜欢一些新鲜的想法。

我有一个包含重复事件的事件日历。当我尝试更新重复事件时遇到了一些问题。

我有一个简单的表格，我在其中询问用户一周中的某一天和开始日期。

我想在开始日期之后获得一周的第二天（这里没问题）并将该周的退出事件更新到新的开始日期（仍然没问题）。然后我想将之后的所有其他事件增加到事件之前的 7 天。（<--问题）

```
<?php
session_start();
require_once '../../../config/db-config.php';
    $weekday = $_POST['weekday'];        // day of the week the event should take place on
    $start_date = $_POST['start-date'];      //new starting date of the event 
       if (date('N', strtotime($start_date)) == $weekday)
        {
        $start_date = $_POST['start-date'];
        }
       else
        {
         $start_date = date('Y-m-d', strtotime("next $weekday", strtotime($start_date)));   //gets the first day of the week after the starting date. First event should start on this day.
        }  
    $start_time = $_POST['start-time'];
    $end_time = $_POST['end-time'];

    $start = $start_date . " " . $start_time;  //'yyyy-dd-mm hh:mm:ii' format
    $end = $start_date . " " . $end_time;

    $repeats = $_POST['repeats'];             // 1 for repeats 0 for no repeats
    $repeat_freq = $_POST['repeat-freq'];    //7 for 7 days, 14 for 14 days etc
    $parent_id = $_POST['parent-id'];        //common parent_id to the event group

    $stmt = $dbh->prepare("
                        UPDATE events
                        SET  start = :start, end = :end
                        WHERE parent_id = :parent_id AND WEEK(start) =WEEK(:start)");     //This updates the existing event of that week to the new starting date

        $stmt->bindParam(':start', $start);
        $stmt->bindParam(':end', $end);
        $stmt->bindParam(':parent_id', $parent_id);
        $stmt->execute();

        } 
```

现在我需要在这个事件之后循环遍历每个事件（具有相同的 parent_id）并将其增加 7 天（或者我的 repeat_freq 是什么）。我试过使用

```
UPDATE events
SET  start = :start + INTERVAL 7 DAY, end = :end + INTERVAL 7 DAY 
```

但这只是将所有事件更新到新开始日期后的 7 天，而不是从最后一个事件的 7 天开始。如果我可以把它放在一个循环中，而不必引用特定的事件 id 并按顺序进行，那就太好了。不过，我对任何解决方案都持开放态度。谢谢阅读。

**模式更新**

我的 parent_events 表有

```
parent_id (auto increment) | start_date | repeats | repeat_freq | 
```

我的事件表有以下

```
event_id (auto increment) | parent_id | start | end | 
```

创建新的重复事件时，我在 parent_events 表中插入一行。我使用 lastInsertId() 获取新的 parent_id 并在我将所有重复实例（该父事件的）插入事件表时使用它。基本上，事件表包含特定（父）事件的所有实例。

**工作代码更新**

```
$stmt = $dbh->prepare("
            SELECT event_id
            FROM events
            WHERE parent_id = :parent_id AND WEEK(start) >=WEEK(:start)");

        $stmt->bindParam(':start', $start_date);
        $stmt->bindParam(':parent_id', $parent_id);
        $stmt->execute();
        $updateArray = array();
        $last_class = 0;
        while ($row = $stmt->fetch(PDO::FETCH_ASSOC)) {
            if ($last_event != $row['event_id']) {
                $last_event  = $row['event_id'];
                    $updateArray[$last_event] = array('event_id' => $row['event_id']);
            }
        }

        foreach($updateArray as $update){
            $event_id = $update['event_id'];
            $stmt = $dbh->prepare("
                            UPDATE events
                            SET title = start = :start, end=:end
                            WHERE event_id = :event_id");

            $stmt->bindParam(':start', $start);
            $stmt->bindParam(':end', $end);
            $stmt->bindParam(':event_id', $event_id);
            $stmt->execute();

            $new_start = strtotime($start . '+' . $repeat_freq . 'DAYS'); 
            $new_end = strtotime($end . '+' . $repeat_freq . 'DAYS'); 
            $start = gmdate("Y-m-d H:i", $new_start);
            $end = gmdate("Y-m-d H:i", $new_end);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T13:49:47.160

我认为最简单的方法是通过 PHP 循环遍历事件集。

我将在下面写下重要的代码：

```
$sql='SELECT event_id AS id from events WHERE parent_id=:parent_id AND start=:start 
```

运行此查询将获得一个包含所有需要更新的 ID 的数组

```
 $mysqli = new mysqli("localhost", "my_user", "my_password", "world");
 if (mysqli_connect_errno()) {
  printf("Connect failed: %s\n", mysqli_connect_error());
  exit();
 }
 $row_date=array();
 $row_date[0]=$start  //get start date
 foreach ($rows as $row)

  $sql_date="SELECT TIMESTAMPADD(week,1,$row_date[0])"; //increment start date by 1 week
  $date =  $mysqli->query($sql_date);
  $row_date = $result->fetch_array(MYSQLI_NUM); //Set the start date as Start date + 1 week to reflect in the next loop.

  $sql_update="UPDATE events SET start=$row_date[0] WHERE event_id=$row['id']";
  $mysqli->query($sql_update);
 end foreach 
```

我需要对代码进行一些调整，但我认为它有助于实现这个想法。

# ckeditor - 如何在 CKEditor 的段落中添加 CSS 类和 ID？

> ID：12257668
> 
> 赞同：7
> 
> 时间：2012-09-04T06:07:09.983
> 
> 标签：ckeditor

如何将自定义类或 ID 添加到 CKEditor 中的文本段落？我想从 DB 中加载可能的类，并将它们写入到加载 CKE 时它们所在的列表中。身份证只需当场制作。类和 ID 将用于将一段文本标记为脚注或标题。

* * *

为了清楚起见，我不想使用下拉框更改文本的可见样式，我想添加可用于设置元素样式的 CSS 类 保存后 - 取决于它的使用位置。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T12:26:16.633

干得好。此代码将使用后续 id 为您的段落编号，它还将为尚未分配的每个段落附加一个自定义类。

```
var idCounter = 0,
    pClass = 'myCustomClass',
    pClassRegexp = new RegExp( pClass, 'g' );

CKEDITOR.replace( 'editor1', {
    on: {
        instanceReady: function() {
            this.dataProcessor.htmlFilter.addRules({
                elements: {
                    p: function( element ) {
                        // If there's no class, assing the custom one:
                        if ( !element.attributes.class )
                            element.attributes.class = pClass;

                        // It there's some other class, append the custom one:
                        else if ( !element.attributes.class.match( pClassRegexp ) )
                            element.attributes.class += ' ' + pClass;

                        // Add the subsequent id:
                        if ( !element.attributes.id )
                            element.attributes.id = 'paragraph_' + ++idCounter;
                    }
                }
            });
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-01T11:50:12.650

我已经四处走动并做了这样的事情（我使用的是CKeditor 4.4.7）：

```
editor.addCommand('colSm1', {
    exec: function (editor) {
    var $element = editor.elementPath().block;

    if ($element.getAttribute('class') == null) {
        $element.addClass('col-sm-1');
    }
}); 
```

# gwt - GWT 编译时间性能改进

> ID：12257675
> 
> 赞同：0
> 
> 时间：2012-09-04T06:07:42.620
> 
> 标签：gwt, compilation, performance

我们在当前项目中使用 GWT 2.4 版。在服务器端，我们使用 Spring & Custom JDBC 框架。

我们使用 Maven 作为我们的构建工具。该应用程序正在 JBOSS 7 服务器上部署。

目前，我们在一个 Eclipse 项目中拥有一切。表示一个 Application.gwt.xml 文件和一个用于 spring 的 ApplicationContext.xml。我们有大约 2000 个 Java 文件，其中大约 1500 个用于 GWT 相关的源文件。

随着源文件的增多，该项目仍在增长。

我们对 Java 到 Javac [类文件] 编译时间的时间安排很好。但是当涉及到 Java 到 JavaScript 时，这是一个问题。

我们已经使用了 GWT 论坛中提到的所有 hack。

喜欢。

1.  只为一个本地编译
2.  只为一个浏览器编译

但是编译仍然需要 4-6 分钟。有时甚至需要 7 分钟。

有了这个问题，我想知道可用于改进的选项。

我们正在考虑像这样拆分项目：

*   模块 1（JAR 构建）
*   模块 2（JAR 构建）
*   主模块（WAR 构建）。这将包含继承模块 1 和模块 2 的 Application.gwt.xml 文件。

现在问题来了：

**1）这会帮助我们改善编译时间吗？**

**2) 如果我们只更改模块 2，然后编译模块 Main，GWT 是否仍会编译模块 1，因为它是由模块 Main 继承的？**

请分享您对上述情况的看法。我们甚至尝试过 GWT 2.5 选项，但对性能改进没有帮助。

谢谢，尼拉吉·萨洛特。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T08:04:42.747

我将首先回答您的第二个问题，因为它不是特定于 GWT 的。考虑到您的项目的结构是这样的：

```
project-root    
  |- module1 (jar)
  |- module2 (jar)
  L moduleMain (gwt + war) 
```

如果您在 中进行了一些更改`module2`，并且不想重新编译`module1`，您可以使用选项`-pl`从构建过程中跳过它（从`project-root`文件夹启动的命令）：

```
mvn clean install -pl module2,moduleMain 
```

这将重新编译`module2`，然后`moduleMain`，无需重新编译`module1`。

**这会帮助我们提高编译时间吗？**

这取决于有多大`module1`以及与之`module2`相比`moduleMain`......但我对 GWT 的经验是，通常花费大量时间将 java 客户端代码编译成 javascript。此操作仍然发生在您`moduleMain`的 .

此外，我建议您使用一个配置文件来控制`gwt-maven-plugin`内部的激活/停用`moduleMain`。

在`moduleMain`pom.xml 中，将 GWT 插件移动到配置文件中，这样：

```
<profiles>
        <profile>
            <id>GWTBuild</id>
            <activation>
                <activeByDefault>true</activeByDefault>
            </activation>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.codehaus.mojo</groupId>
                        <artifactId>gwt-maven-plugin</artifactId>
                        <version>2.4.0</version>
                        <executions>
                            <execution>
                                <goals>
                                    <goal>compile</goal>
                                    <goal>generateAsync</goal>
                                    <goal>test</goal>
                                </goals>
                            </execution>
                        </executions>
                        <configuration>
                            <runTarget>com.yoururlroot/index.html</runTarget>
                        </configuration>
                    </plugin>
                </plugins>
            </build>
        </profile>
    </profiles> 
```

然后，如果你只是想重建你的战争，因为`module2`已经改变但没有重建`module1`和重新编译所有 GWT 的东西，只需启动：

```
mvn clean install -pl module2,moduleMain -P!GWTBuild 
```

在此命令中，GWT 插件被停用，因此 maven 只会重建战争。

告诉我这是否适合你。

# xcode - 无法在 XCode 中创建 SVN 存储库

> ID：12257676
> 
> 赞同：0
> 
> 时间：2012-09-04T06:07:53.907
> 
> 标签：xcode, svn, version-control

我在 XCode 中创建了一个项目并尝试将其添加到 SVN。我去了文件-> 源代码管理-> 存储库。在 Add a Repository 对话框中，我输入如下 URL：

名称：测试位置： http: [//xxx.xxx.x.xxx](http://xxx.xxx.x.xxx:8080) :8080 类型：Subversion

单击“添加”后，IDE 似乎正在执行某些操作，并不断向我显示进度条。而且我没有收到任何错误消息。

任何人都知道如何解决这个问题？

谢谢，

# c# - 数据网格视图内的组合框项目选择的事件冒泡

> ID：12257686
> 
> 赞同：0
> 
> 时间：2012-09-04T06:08:47.783
> 
> 标签：c#, events, datagridview

我有一个数据网格组合框列，将一些数据从数据库绑定到组合框列我必须引发一个选择组合框项目的事件请帮助我，我在 program.cs 中使用了以下代码

`this.datagrdADDTEMP.SelectionChanged+= new System.EventHandler(this.dgv_SelectionChanged);`

在 form.cs 中

`void dgv_SelectionChanged(object sender, EventArgs e){}`

但是当我单击单元格时它会引发事件，我想在我从组合框中选择项目时引发事件。请帮助我这个概念事件冒泡的新手

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:43:36.720

它不起作用，因为您使用的是 DataGridView 的 SelectionChanged 事件，而不是 ComboBox 事件。

尝试处理 EditingControlShowing 事件（确保将其实际连接到代码或设计器中）：

```
 string str = null;

    private void dataGridView1_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
    {
        var cell = e.Control as ComboBox;
        if (cell != null)
        {
            cell.SelectedIndexChanged -= doWork;
            cell.SelectedIndexChanged += doWork;
        }
    }

    private void doWork(object sender, EventArgs e)
    {
        var tb = dataGridView1.EditingControl as ComboBox;
        if (tb != null)
            str = tb.SelectedValue != null ? tb.SelectedValue.ToString() : null;
    } 
```

# spring - Spring RestTemplate PostforObject：不支持的媒体类型

> ID：12257689
> 
> 赞同：4
> 
> 时间：2012-09-04T06:09:15.973
> 
> 标签：spring, http, rest

我正在尝试执行 RESTful Web 服务，但是，当我发送请求时，发生 HttpClientErrorException 并显示“415 Unsupported Media Type”作为消息。

这是服务调用的代码：

```
MultiValueMap<String, String> request = new LinkedMultiValueMap<String, String>();
request.add(val1, "xxxxx");
request.add(val2, "************");
request.add(val3, "xxx");
request.add("type", "AUTHENTICATE");

String response = restTemplate.postForObject(url, request, String.class);
System.out.println(response.toString()); 
```

restTemplate 是从 applicationContext.xml 连接的，FormHttpMessageConverter 作为它的 messageConverter。

```
<bean id="restTemplate" class="org.springframework.web.client.RestTemplate">
<constructor-arg name="requestFactory" ref="httpClientFactory"/>
<property name="messageConverters">
    <list>
        <bean class="org.springframework.http.converter.FormHttpMessageConverter"/>
</list>
</property>
</bean>

<bean id="httpClientFactory" class="org.springframework.http.client.CommonsClientHttpRequestFactory">
    <constructor-arg ref="httpClient"/>
</bean>
<bean id="httpClientParams" class="org.apache.commons.httpclient.params.HttpClientParams">
    <property name="authenticationPreemptive" value="true"/>
    <property name="connectionManagerClass"
                  value="org.apache.commons.httpclient.MultiThreadedHttpConnectionManager"/>
</bean>
<bean id="httpClient" class="org.apache.commons.httpclient.HttpClient">
    <constructor-arg ref="httpClientParams"/>
</bean> 
```

这是发生的异常：

```
Exception in thread "main" org.springframework.web.client.HttpClientErrorException: 415 Unsupported Media Type
    at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:76)
    at org.springframework.web.client.RestTemplate.handleResponseError(RestTemplate.java:486)
    at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:443)
    at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:401)
    at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:279)
    at ph.com.smart.drawbridge.commons.diameter.DiameterClient.post(DiameterClient.java:21) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-05T09:08:46.777

当您的客户端发送服务器不知道如何处理的媒体类型的请求时，就会发生此问题。例如，您处理的服务器方法`url`可以处理类型的请求，`application/json`但您发送了`text/xml`. 服务器无法处理此类请求。为了解决这个问题，找出`content-type`服务器期望的（媒体类型），在你的`restTemplate`对象中设置一个标头来设置`content-type:application/json`（替换`application/json`为服务器期望的任何内容）。此外，请确保以正确的格式发送请求（如果我们正在谈论`json`您需要具有`jackson`可以将对象序列化为对象的依赖项`json`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-22T15:37:45.273

您现在可能不需要这个，但我会为将来遇到此类问题的任何人分享这个。

正如@Avi 指出的那样，当您的服务器期望与您在请求中发送的媒体类型不同时，确实会发生此问题。

就我而言，我正在发送表单数据，`MediaType.APPLICATION_JSON`而我的服务器需要 Mutipart 表单数据。在我的请求中添加以下标头解决了我的问题：

```
HttpHeaders headers = getBasicAuthHttpHeaders();
headers.setContentType(MediaType.MULTIPART_FORM_DATA); 
```

# asp.net - 在与另一个连接的表中按组排序

> ID：12257690
> 
> 赞同：0
> 
> 时间：2012-09-04T06:09:19.327
> 
> 标签：asp.net, sql, vb.net

我有 2 个表，其中一个是查找表，另一个是事务日志。

```
Lookup table User: UserId, Name and Department.
Transaction log table EntryLog:  LogID, UserId, TimeIn, TimeOut 
```

我正在尝试检索报告以查看用户表中所有用户（唯一）的最后一次看到时间（TimeIn 或 TimeOut）。

我尝试了以下查询，但没有看到工作：

```
SELECT DISTINCT (A.UserID), TimeIn, TimeOut, B.Name, B.Department FROM EntryLog A
  INNER JOIN User B ON B.UserId = A.UserId
  ORDER BY TimeOut DESC, TimeIn DESC 
```

不知何故，结果似乎从事务日志中检索了所有记录（包括重复的 UserId）。我不擅长 SQL 语句，正在寻找类似的问题而无济于事。非常感谢任何建议。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T06:18:38.573

`Distinct`不仅过滤掉`UserId`所有重复的行。

你想`GROUP BY UserID`改为。如果您使用的是 SQL-Server >= 2005，则可以使用带有 ROW_NUMBER 函数的 CTE：

```
WITH CTE AS
(
   SELECT A.UserID, TimeIn, TimeOut, B.Name, B.Department 
      , ROW_NUMBER()OVER(PARTITION BY UserID Order By Timeout DESC, TimeIn Desc)AS RN
   FROM EntryLog A INNER JOIN User B ON B.UserId = A.UserId 
)
SELECT * FROM CTE WHERE RN = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T06:15:45.173

您应该使用 GROUP BY 按用户 ID 和 HAVING 子句对 TimeIn 和 TimeOut 进行分组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T06:16:33.663

试试这个，

```
SELECT  a.UserID, b.TimeIN, b.TimeOut,
        a.Name, a.Department
FROM    Usertable a
            INNER JOIN logTable b
                ON a.userID = b.userid
            INNER JOIN
            (
                SELECT      UserID, MAX(TimeIN) as maxTimeIN
                FROM        logTable
                GROUP BY    UserID
            ) c ON b.userID = c.userID AND
                   b.TimeIN = c.MaxTimeIN 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T06:16:45.237

您可以使用`GROUP BY`子句而不是使用，`DISTINCT`因为`DISTINCT`将删除重复的行而不是重复的列。你可以这样做：

```
SELECT A.UserID, TimeIn, TimeOut, B.Name, B.Department FROM EntryLog A
INNER JOIN User B ON B.UserId = A.UserId
GROUP BY A.UserID, TimeIn, TimeOut, B.Name, B.Department
ORDER BY TimeOut DESC, TimeIn DESC 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-04T06:19:19.617

尝试这个

```
SELECT A.UserID, TimeIn, TimeOut, B.Name, B.Department 
FROM EntryLog A INNER JOIN User B ON B.UserId = A.UserId 
where A.LogID in (select MAX(LogID) from EntryLog group by USERID) 
```

# android - 用于证书的 Android Mime 类型。

> ID：12257698
> 
> 赞同：2
> 
> 时间：2012-09-04T06:10:02.510
> 
> 标签：android, android-intent

您好我正在尝试编写一个处理“.p12”文件的应用程序

在下面的代码中，我对文件方案施加了一个限制，只有当它是“.p12”类型时，您才能使用我的应用程序打开它。

这工作正常，但是当我通过电子邮件发送“.p12”文件并尝试打开它时。

它不会随我的应用程序打开，因为在内容方案中，我已将其限制为“.p12”，并且当您的电子邮件到达时，附件会扩展为更多值。

为了克服这个错误，我已经删除了内容方案的限制，但是如果我这样做，当我点击我的联系人时，它会询问我是否必须使用我的应用程序打开它或查看联系人，这不是一个好的行为，所以如何检查电子邮件类型并使用我的应用程序打开“.p12”格式。

我认为变化很小，主要是 android:mime 类型，但无法弄清楚。

```
<intent-filter>
<data android:scheme="file" android:host="*" android:mimeType="*/*"  android:pathPattern=".*\\.p12" />
<action android:name="android.intent.action.VIEW" />
<category android:name="android.intent.category.BROWSABLE" />
<category android:name="android.intent.category.DEFAULT" />
</intent-filter>

<intent-filter>
<data android:scheme="content" android:host="*" android:mimeType="*/*" android:pathPattern=".*\\.p12"/>
<action android:name="android.intent.action.VIEW" />
<category android:name="android.intent.category.BROWSABLE" />
<category android:name="android.intent.category.DEFAULT" />
</intent-filter> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T07:32:31.643

> android:mimeType = "应用程序/keychain_access，应用程序/x-pkcs12"

在**内容方案中**解决了这个问题。

# java-me - 使 j2me Alert Dismiss 按钮不可见

> ID：12257701
> 
> 赞同：1
> 
> 时间：2012-09-04T06:10:09.763
> 
> 标签：java-me, alert, midp, lcdui, dismiss

当我将警报设置为 FOREVER 时，有什么方法可以不显示默认的关闭按钮？

我正在关注以下帖子，但它向我显示了一个没有字符的按钮。
[http://code-gotcha.blogspot.com/2011/09/dismiss-button-in-nokia-alert.html?showComment=1346738220258#c4876777871081894195](http://code-gotcha.blogspot.com/2011/09/dismiss-button-in-nokia-alert.html?showComment=1346738220258#c4876777871081894195)

```
alert.addCommand(new Command("\u200B", Command.OK, 1));
//we dont like to see the DISMISS command, so adding an invisible command 
```

我正在使用 LWUIT 表单，但刚刚调用了 j2me 本机警报来为应用程序提供本机外观。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T20:19:17.547

MIDP 2 API 没有可移植的方式来做到这一点。

[警报](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/Alert.html "API 文档")和[命令](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/Command.html "API 文档")都没有任何功能可以以某种方式确保应用程序开发人员对命令标签的特定技巧会使其按钮不可见。

即使某些 hack 适用于特定设备，也不能保证它适用于其他设备。即使您仅将自己限制为诺基亚设备，这也适用 - 诺基亚 MIDP 实施者不受任何规范的约束，以遵守`"\u200B"`曾经在特定设备上使用过的有趣技巧，他们“有权”在任何其他设备中更改它设备，甚至更多，在同一设备的任何较新版本的固件中。

* * *

至于给*应用程序一个原生的外观和感觉*，如果你想要的话，我强烈建议你在使用你提到的黑客之前三思而后行，因为这些很可能会产生相反的效果。

想想看，那些认为 Alert 外观和感觉很熟悉的用户，很可能从多个其他 MIDlet 中习惯了它。但问题是，当解除命令出现在特定上下文中时，大多数*其他*midlet 最有可能使用具有明确行为的非黑客警报。

现在想想你的应用与这些典型的常规 midlet 相比会有什么感觉？是的，警报看起来很熟悉，但行为会**有所不同**。在用户希望 Alert 具有解除命令的情况下，它不会。这基本上是一条让用户感到困惑并对意外行为感到难过的王道。

> 哦*，那个*应用程序，常规屏幕以错误方式运行的应用程序......

# javascript - Jquery - 将字符串转换为 reg exp 对象

> ID：12257703
> 
> 赞同：0
> 
> 时间：2012-09-04T06:10:19.867
> 
> 标签：javascript, jquery, html, regex, expression

我的正则表达式是`/^([a-zA-Z0-9])+([a-zA-Z0-9\._-])*@([a-zA-Z0-9_-])+([a-zA-Z0-9\._-]+)+$/`并且在 html 中我将它添加为隐藏元素，元素的值设置为上述模式

当我这样做时：

```
var regex = /^([a-zA-Z0-9])+([a-zA-Z0-9\._-])*@([a-zA-Z0-9_-])+([a-zA-Z0-9\._-]+)+$/ 
var text = $(this).val() 
```

然后用`regex.test(text)`它测试工作正常。

但是当我像这样分配正则表达式时：

```
var regex = $("#m"+id).val() // (my hidden element) 
```

然后它不起作用。我也尝试过使用新的 RegExp 分配它，但也没有工作。我认为它正在这样做，因为它将值作为字符串返回`$("#m"+id).val()`（我在这里返回了正确的值），但不确定将其解析为什么。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T06:14:09.343

如果你想从字符串构建正则表达式，然后使用 RegExp 类的构造函数，它需要没有斜杠的字符串，所以你应该删除它们。`.slice(1, -1)`删除第一个和最后一个字符。尝试使用这个：

```
var regex = new RegExp($("#m"+id).val().slice(1, -1)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T06:15:52.350

尝试：

```
var regex = new RegExp($("#m"+id).val()) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T06:16:40.277

The slashes at the beginning and the end are only used when it is a regex literal. Remove them to get the actual regular expression, then you can use `new RegExp(str)` to turn the string into a regex object.

# iphone - 如何让几个按钮都连接到同一个视图控制器？

> ID：12257711
> 
> 赞同：7
> 
> 时间：2012-09-04T06:11:18.923
> 
> 标签：iphone, ios, ios5, storyboard

我是 iOS 和故事板的新手，我需要一些关于设计新应用程序架构的可能方法的建议。我将在数据库中保存一些数据，我将有一个 UIViewController 页面，其中只有一些按钮，这些按钮具有某些类别的名称。当假设单击“全部”或单击“业务”时，它将根据该类别将数据显示获取到 UITableViewController。

现在我在一方面感到困惑：

1.  在故事板中是否允许从不同按钮到同一个 ViewController 类创建多个 segue？因此，如果不允许这样做，我是否必须创建 6 个不同的 UITableViewController 类来为 6 个类别制作 segues？

2.  如果允许从多个按钮到单个 UIViewController 进行转场，我如何在情节提要中发送参数以使其意识到我单击了特定按钮以转到 UIViewController。

我应该在 UITableViewController 中创建一个带有参数的自定义构造函数，然后我将从其他按钮单击方法初始化该构造函数吗？以便它按类别显示结果？或者有没有办法让故事板更容易做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-04T06:24:23.343

1.  当然，你可以这样做。

2.  创建所有按钮后，从每个按钮控制拖动到下一个视图控制器并创建（例如）“推”segue。接下来，单击 segue 图形以选择 segue。切换到属性检查器并给 segue 一个标识符，如“All”或“Business”。您可以在您的`-prepareForSegue:`方法中查看 segue 的标识符，以确定哪个 segue 导致了转换，从而确定要显示哪个类别。

不过，我不推荐这种方法。没有必要创建六个都做完全相同的事情的 segue。我会使用触发单个 segue 的操作：

*   将`tag`每个按钮的属性设置为唯一值，以便您可以区分按钮。

*   向您的第一个视图控制器（管理按钮的控制器）添加一个操作方法，命名为`-(IBAction)switchToCategoryFromButton:(id)sender`.

*   将所有按钮连接到该单个操作。

*   实现该操作，使其查看`sender.tag`按下哪个按钮，使用该按钮确定要加载的类别，然后以编程方式触发*一个*到下一个视图控制器的 segue。

由一个动作触发一个单一的转场似乎比许多转场要整洁得多。执行此操作的代码可能如下所示：

```
- (IBAction)switchToCategory:(UIControl*)sender
{
    // map the tapped button to a category
    switch (sender.tag) {
        case kAllButton: {
            self.category = kAllCategories;
            break;
        }
        case kBusinessButton: {
            self.category = kBusinessCategory;
            break;
        }
        default: {
            self.category = kAllCategories;
            break;
        }
    }

    // start the segue
    [self performSegueWithIdentifier:kCategorySegue sender:self];
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    // tell the destination view controller what category to display
    if ([segue.identifier isEqualToString:kCategorySegue]) {
        [(NextViewController*)segue.destinationViewController setCategory:self.category];
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-23T22:02:07.697

在您的事件下使用
self.performSegueWithIdentifier("yourViewSegue", sender: sender) 来处理按钮的点击，例如：

> ```
>  @IBAction func redButtonClicked(sender: AnyObject) {
>         self.performSegueWithIdentifier("redView", sender: sender)
>     } 
> ```

redView 是 segue 标识符。

您可以对按钮事件处理使用相同的功能，并且可以通过为其分配不同的标签来区分按钮触摸。

# apache - 您可以使用 mod_rewrite 删除用户代理吗

> ID：12257715
> 
> 赞同：3
> 
> 时间：2012-09-04T06:11:31.387
> 
> 标签：apache, mod-rewrite, web, user-agent

我们的应用程序有一个过滤器，如果合适的话，它使用传入请求的用户代理重定向到我们的移动站点。我们最近向我们的 Web 应用程序添加了一个页面，所有类型都应该引用该页面。从长远来看，我们将向过滤器添加白名单功能，但在短期内，我们想要一种简单的方法来阻止过滤器触发。

如果我们可以从请求中删除或覆盖用户代理，我们将实现我们的短期目标，但这需要以这样的方式完成，以避免重新部署。像 mod_rewrite 规则这样的东西是理想的。

mod_rewrite 或类似的东西可以完成这项工作吗？它需要是一个标准的 apache 模块，所以我们只需添加一两行 config.xml 即可。

**附录：**

看起来我们可以使用以下组合（或类似的东西）

```
SetEnvIf REQUEST_URI "special/uri/path" delete_user_agent
RequestHeader unset User-Agent env=delete_user_agent 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T06:24:09.413

不，你不能这样做`mod_rewrite`：它可以在条件中使用`User-Agent`标题，但不能更改它。您可能需要的是[mod_headers](http://httpd.apache.org/docs/2.2/mod/mod_headers.html)。

> 该模块提供指令来控制和修改 HTTP 请求和响应标头。标题可以合并、替换或删除。

该指令可能如下所示：

```
RequestHeader unset User-Agent 
```

（您可能需要先使用`early`此处来处理此标头`mod_rewrite`）。

# json - 从 couchdb 渲染附件名称而不进行转换

> ID：12257716
> 
> 赞同：1
> 
> 时间：2012-09-04T06:11:31.743
> 
> 标签：json, couchdb, mustache, handlebars.js

从 couchdb 渲染附件名称，**无需**使用车把或 mustache 模板进行转换。

```
{
   "_id":"123",
   "_attachments":{
      "evil.jpg":{
         "content_type":"image/jpeg",
         "revpos":32,
         "digest":"md5-CKtT5WWRLkmGDD3/DhK6FQ==",
         "length":41915,
         "stub":true
      }
   }
} 
```

我认为这是[Getting key's in handlebar 的](https://stackoverflow.com/questions/12032851/getting-keys-in-handlebar)副本。

```
// based on the `#each` helper, requires jQuery (for jQuery.extend)
Handlebars.registerHelper('each_hash', function(context, options) {
    var fn = options.fn, inverse = options.inverse;
    var ret = "";

    if(typeof context === "object") {
        for(var key in context) {
            if(context.hasOwnProperty(key)) {
                // clone the context so it's not
                // modified by the template-engine when
                // setting "_key"
                var ctx = jQuery.extend(
                    {"_key":key},
                    context[key]);

                ret = ret + fn(ctx);
            }
        }
    } else {
        ret = inverse(this);
    }
    return ret;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T04:59:59.743

车把的开发人员正在讨论[将其放入](https://github.com/wycats/handlebars.js/pull/272)

如果您只想添加它，该助手无论如何都应该完成这项工作。您的模板将是这样的。

```
{{#each_hash _attachments}}
    {{_key}} - {{content_type}}
{{else}}
    You didn't pass in an object!
{{/each_hash}} 
```

助手本质上只是遍历对象并即时进行转换。它遍历对象并将键添加为 _key 变量。您不必包含 else 语句，默认情况下它不会返回任何内容。

# c# - 如何在视图之间传递数据

> ID：12257725
> 
> 赞同：2
> 
> 时间：2012-09-04T06:13:21.493
> 
> 标签：c#, asp.net-mvc-3, razor

我有我的控制器，它传递数据以查看如下：

```
IEnumerable<MovieDetails> jsonData = default(IEnumerable<MovieDetails>);

#region Constructor Request to get all Data
public MoviesController()
{
    jsonData = GetJsonValues(URL);
}
public ActionResult Index()
{
    return View(jsonData);
} 
```

现在我的观点是将控件呈现为：

```
@model IEnumerable<VikiMVC.Models.MovieDetails>

@foreach (var movieDetails in Model)
{
    <!--Deleted Divs for Simplicity -->
    <img src = @movieDetails.Thumbnail alt = @movieDetails.Thumbnail 
          class="imgStyle"onclick="playMovie(this)" alt=@movieDetails.MovieURI/>     
} 
```

现在单击图像我想打开另一个视图并访问与该特定项目相关的@movieDetails。

我的电影详细信息课程如下：

```
public class MovieDetails
{
   public string Title { get; set; }
   public string Thumbnail { get; set; }
   // public string URI { get; set; }
   public string Description { get; set; }
   public string MovieURI { get; set; }
   // public List<Response> Response { get; set; }
} 
```

因此，当我单击图像时，我应该能够访问特定于该特定图像的 MovieURI。我们可以使用 querystring 来做到这一点，但 Razor 肯定有更好的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T06:32:00.177

为什么你在图像上有两次alt？试试这个：

```
@foreach (var movieDetails in Model)
{
    <!--Deleted Divs for Simplicity -->
    <img src = @movieDetails.Thumbnail class="imgStyle" onclick="playMovie('@movieDetails.MovieURI')" alt=@movieDetails.MovieURI/>     
} 
```

在js中：

```
function playMovie(uri){
    window.location.href = uri;
} 
```

但我会建议这样的事情（在模型中添加 Id 字段）：

```
@foreach (var movieDetails in Model)
{
    <!--Deleted Divs for Simplicity -->
    <a href="/Mycontroller/Movie/@movieDetails.Id">
        <img src = @movieDetails.Thumbnail class="imgStyle" alt=@movieDetails.MovieURI/>   
    </a>  
} 
```

行动：

```
public ActionResult Movie(int id)
{
    var movieModel = context.Movies.GetById(id);
    return View(movieModel);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T06:35:21.360

过境有什么问题`QueryString`？

我将通过`MovieURI`或`MovieDetails`ID`QueryString`传递，然后将其传递到您要显示的视图中。

Razr 是一个视图引擎。它不会改变您在视图之间传递数据的方式。`TempData`除非我绝对不能以任何其他方式这样做，否则我会避免使用其他人建议的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T06:31:06.907

您可以`TempData`用于在不同视图之间传递数据。看看[这个链接](http://rachelappel.com/when-to-use-viewbag-viewdata-or-tempdata-in-asp.net-mvc-3-applications)

# android - 平台的 API 文档在哪里

> ID：12257727
> 
> 赞同：0
> 
> 时间：2012-09-04T06:13:26.260
> 
> 标签：android

我使用 SDK 管理器安装了适用于 android 2.2 的 sdk 平台和 Google API，但是那个 API 文档在哪里，我想离线浏览这些 API，可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T06:21:19.537

您可以在以下位置找到 Android 平台的文档

> SDK/文档

文件夹

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T06:21:31.387

您将在 Android SDK 文件夹内的 Docs 文件夹中获得所有文档。如果它不存在，那么您一定没有安装文档。转到 Android SDK Manager 并检查 Android 2.2 的 Android SDK 文档选项。然后安装选定的软件包。

# sqlite - sqlite中奇怪的数据类型不匹配

> ID：12257730
> 
> 赞同：0
> 
> 时间：2012-09-04T06:13:43.090
> 
> 标签：sqlite, sql-update, type-mismatch

我面临着有史以来最奇怪的错误：

至于许多其他表，我首先创建了 num_iterations 表。然后在我需要更新值的地方，UPDATE 子句导致类型不匹配错误，奇怪的是更新为负值工作得很好！我独立于数据库中的其他表运行以下三行，没有问题！

```
CREATE TABLE num_iterations(val INTEGER);
INSERT INTO num_iterations VALUES (0);
UPDATE num_iterations SET val = 1; 
```

请指教！谢谢

# c# - checkBalance(ref bool) 不是所有的代码路径都返回一个值？

> ID：12257731
> 
> 赞同：-2
> 
> 时间：2012-09-04T06:13:51.300
> 
> 标签：c#, boolean

我刚刚开始学习 C#，所以很新……我正在尝试编写 Check balance 的方法，但不断收到我在标题中所说的错误……我知道代码还没有完成，但只是想能够暂时返回帐户类型菜单？？

还有人能够解释“静态无效开始（参考布尔尺寸更新）”这一行我真的不知道这是做什么的。谢谢！！

```
class Program
{
   static void start(ref bool dimensionsUpdated){
        int userOption = 0;

        //Repeats the loop until the user wishes to exit
        do
        {
        Console.WriteLine("Welcome to EziTeller ATM Machine\n\n");

        Console.WriteLine("Transaction Menu"
                        + "\n================\n"
                        + "\n1) Check Balance"
                        + "\n2) Withdraw"
                        + "\n3) Transfer");
        Console.WriteLine("\n\nPlease Enter Your Option: 1, 2, 3 or 0 to exit: ");

        //Read in the users choice
        userOption = int.Parse(Console.ReadLine());

            Console.ReadKey(); 

            //Run a series of checks to see what the user chose.
            //Open the desired method, otherwise show error message
            //Asking the user to input a VALID option.
            if (userOption == 0)
            {
                Console.WriteLine("Thank you for using EziTeller!");
                Environment.Exit(0);
            }
            else if (userOption == 1){
                checkBalance(ref dimensionsUpdated);
            }
            else if (userOption == 2){
                withdrawMoney(ref dimensionsUpdated);
            }
            else if (userOption == 3){
                transferMoney(ref dimensionsUpdated);
            }
            else Console.WriteLine("\n\nPlease enter a valid option, either 1, 2, 3, or 0 to exit\n\n");
        }   while (userOption != 0);
   }
    public static double checkBalance(ref bool dimensionsUpdated){
        Console.WriteLine("Account Types"
                        + "\n============\n"
                        + "\n1) Savings Account"
                        + "\n2) Debit Card"
                        + "\n3) Credit Card"
                        + "\n4) Line of Credit");
        Console.WriteLine("\n\nPlease Enter Your Option: 1...4 or 0 to exit: "); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T06:18:09.643

您可以（暂时）放在`return 0;`末尾以禁用错误。`checkBalance`

发生的事情是，如果您将函数声明为返回双精度值，但实际上并没有返回任何内容，c# 会认为您有错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T06:18:12.523

那是因为您的方法正在返回一个`double`值，而您没有从您的方法中返回任何内容。

```
public static double checkBalance(ref bool dimensionsUpdated) 
```

由于问题中没有完整的代码，您可以发布完整的代码。

可能是您在 a 中返回一个`double`值`if statement`，如果是这样，您需要确保您的任何方法路径都应该返回一个双精度值。

或者，如果这是您的`checkBalance`方法的完整代码并且您没有从中返回任何内容，那么您可以更改方法签名以返回`void`

```
public static void checkBalance(ref bool dimensionsUpdated) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T06:19:05.657

checkBalance 函数在任何情况下都应该返回值。

```
public static double checkBalance(ref bool dimensionsUpdated){
    if(...){
        return 1;
    }
    else if(...){
        return 1;
    }
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T06:32:44.790

我认为您应该阅读一些有关[面向对象的基础知识](http://en.wikipedia.org/wiki/Object-oriented_programminghttp://en.wikipedia.org/wiki/Object-oriented_programming)。

要回答您的问题：

*   您的方法`checkBalance`似乎没有返回一个值，尽管它的签名声明它会返回一个“double”类型的数字。但是我们不能确定，因为方法的结尾在您发布的代码中被切断了。
*   `static void start(ref bool dimensionsUpdated)`是返回类型为“void”的名为“start”的方法的另一种方法声明（即它不返回任何内容）。它有一个名为“dimensionsUpdated”的“布尔”类型的[参考参数](http://msdn.microsoft.com/en-us/library/14akc2c7.aspx)

# jquery - jQuery 1.8.1 .load html>body

> ID：12257732
> 
> 赞同：3
> 
> 时间：2012-09-04T06:13:53.600
> 
> 标签：jquery, ajax, cordova

```
$("#loader").load(someurl, null, function ()
{
    var html = $("#loader").html(); 
    alert(html);  //works 
}); 
```

然而，

```
$("#loader").load(someurl, "body", function ()
{
    var html = $("#loader").html(); 
    alert(html);  //does NOT work 
}); 
```

我尝试在 phonegap/cordova 上获取外部主机 html 数据。

`filetransfer.download`API 不适用于我的 html 获取，我发现 jQuery .load 函数运行良好并认为它很有用，因为不涉及文件管理，而只涉及内存。

一个问题是，由于整个 HTML 一次加载到某些`$("#loader")`css/样式表上，以`html.body`解决层冲突和混乱。

因此，我尝试仅获取 html [http://api.jquery.com/load/的正文部分](http://api.jquery.com/load/)

```
.load( url [, data] [, complete(responseText, textStatus, XMLHttpRequest)] ) 
```

但是，`[, data]`选项永远不会起作用。

`"html>body"`不起作用，或者任何选择器似乎都不起作用。

这是bug吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T06:16:18.933

选择器应附加到 url（用空格分隔）。

```
$("#loader").load(someurl + ' body', function (){
    var html = $("#loader").html(); 
    alert(html);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T06:18:27.997

data 参数用于发出加载请求，如果要过滤页面中的内容，则必须将选择器添加到 url 的末尾，以空格分隔。

```
$("#loader").load(someurl + ' body', function (){
    var html = $("#loader").html(); 
    alert(html);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T06:20:18.713

您可以使用 load 方法仅加载页面的一部分。您需要在第一个参数中提供选择器。（参见[Load() api](http://api.jquery.com/load/)`Loading Page Fragments`部分）

```
$('#loader').load('ajax/test.html body',function(){
var html = $("#loader").html();
alert(html);

}); 
```

# macos - 可可：我应该使用哪种方法来初始化属性而不是 awakeFromNib

> ID：12257733
> 
> 赞同：0
> 
> 时间：2012-09-04T06:14:01.907
> 
> 标签：macos, cocoa

![在此处输入图像描述](../Images/046dbacdf4f1b48ba923da5ab5345e5e.png)

TableData 是 NSObject 的子类，作为基于视图的表的数据源和表委托。TableData的`awakeFromNib`方法会运行很多次，因为我使用的是基于视图的表。如果 TableData 是 NSViewController 的子类，我可以`loadView:`用来完成我的任务，但 TableData 是 NSObject 的子类，我的问题是：

1.  我应该使用哪种方法而不是`awakeFromNib`初始化 TableData 属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T08:25:46.787

我不知道你如何创建你的窗口，但你可以这样做：

AppDelegate.m

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification {
    // Insert code here to initialize your application

    fMainWinDelegate = nil;
    fMainWinDelegate = [[MainWinDelegate alloc] init];
    [fMainWinDelegate showWindow];
} 
```

MainWindowDelegate.m

```
- (id)initWithWindow:(NSWindow *)AWindow
{
    NSLog(@"MainWinDelegate::initWithWindow");
    self = [super initWithWindow:AWindow];
    if (self) {
        // Initialization code here.
        NSLog(@"MainWinDelegate::initWithWindow, we have self!");
    }

    return self;
}

- (void)awakeFromNib 
{
    NSLog(@"MainWinDelegate::awakeFromNib");
    // only for debug and to be sure that is called many times
}

- (void)showWindow {
    NSLog(@"MainWinDelegate::showWindow");

    if (!self.window) {
        [NSBundle loadNibNamed:@"MainWin" owner:self];

        NSLog(@"MainWinDelegate::showWindow init part");
        // do your init here
    }

    [self.window makeKeyAndOrderFront:self];

    NSLog(@"MainWinDelegate::showWindow end");
} 
```

这是日志：

```
MainWinDelegate::initWithWindow
MainWinDelegate::initWithWindow, we have self!
MainWinDelegate::showWindow
MainWinDelegate::awakeFromNib
MainWinDelegate::showWindow init part
MainWinDelegate::showWindow end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T06:51:57.883

您可以选择：

```
@interface MONTableData : NSObject

// a designated initializer:
- (id)init;
- (id)initWithCoder:(NSCoder *)pCoder;

// or when the `TableData`'s input data source is set:
- (void)setPhotoAlbum:(MONPhotoAlbum *)pPhotoAlbum;

@end 
```

# arrays - 检测序列的排列

> ID：12257735
> 
> 赞同：4
> 
> 时间：2012-09-04T06:14:06.303
> 
> 标签：arrays, algorithm, language-agnostic, permutation

我有一个这样的数字列表（数组）

```
1 2 3 4 
```

所以我的目标是检查给定的另一个数组，如果这个数组是原始示例的排列，则数组和`(3 4 1 2)`是否`(1 2 4 3)`是原始示例的排列。`(1 2 1 1)``(1 5 4 3)`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T06:16:09.827

两种可能的解决方案是：

**(1)** `O(n)`空间和平均时间解决方案将是基于哈希表创建数据的直方图 - 并检查直方图是否相同[。](http://en.wikipedia.org/wiki/Histogram)这个想法是 - 计算每个元素在每个列表中出现的次数，然后检查每个元素在每个数组中出现的次数*完全相同。*

伪代码：

```
map1 = new map //first histogram
map2 = new map //second histogram
for each element in arr1: //create first histogram
   if (element in map1):
         map1.put(element,map1.get(element)+1)
   else:
         map1.put(element,1)
for each element in arr2: //create second histogram
   if (element in map2):
         map2.put(element,map2.get(element)+1)
   else:
         map2.put(element,1)
for each key in map 1: //check all elements in arr1 appear in arr2
   if map1.get(key) != map2.get(key):
        return false
//make sure the sizes also match, it means that each element in arr2 appears in arr1.
return arr1.length == arr2.length 
```

**(2)** `O(nlogn)`时间解决方案是对两个数组进行排序，然后迭代并检查它们是否相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-31T00:58:40.583

如果您确实有一个序列，您可以检查给定数组的排列是否更快。只需计算序列中所有元素的总和，并将其与给定数组中的元素总和进行比较。

```
bool is_permutation(vector<int> &v, vector<int> &s) {
    // size of the sequence
    int v_size = v.size();
    // size of probable permutation.
    int s_size = s.size();
    // Calculate a sum of all elements of the sequence
    int sum_of_sequence = (v_size * (1 + v_size)) / 2;
    // Count actual sum of elements
    int sum_of_all_elements = std::accumulate(v.begin(), v.end(), 0);
    // If the sums are equal the array contains a permuted sequence
    return sum_of_sequence == sum_of_all_elements;
} 
```

# opencv - 我在哪里可以找到与opencv一起使用的面部基准点haarcascade

> ID：12257737
> 
> 赞同：0
> 
> 时间：2012-09-04T06:14:10.587
> 
> 标签：opencv, face-detection, face-recognition

我正在寻找已经训练过的面部基准点的haarcascades（左眼的左眼角，左眼的右眼角，右眼的左眼角，右眼的右眼角，左嘴角，右嘴角，左，中心和鼻子右侧）。
有谁知道我在哪里可以下载已经训练过的 haarcascades 以与 OpenCV 的 VJ 功能一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T11:24:19.970

如果我没记错的话，HaarCascade 可以处理没有特定点的对象。opencv 数据文件夹中已经有鼻子、眼睛和嘴巴的分类器。您可以用它们检测眼睛、鼻子和嘴巴，而不是通过使用专门精心设计的检测算法（利用您的想象力和头脑）找到它们的角落。

这是一个例子；

```
CascadeClassifier cascade;  
cascade.load("haarcascade_eye.xml");

Mat im = imread("photo.jpg",0); //0 flag for grayscale

vector<Rect> eyes;
cascade.detectMultiScale(im, eyes, 1.2, 3);

for (int i = 0; i < eyes.size(); i++)
{
    Rect r = eyes[i];
    rectangle(im, Point(r.x, r.y), Point(r.x + r.width, r.y+r.height),CV_RGB(0,255,0));
}

imshow("im",im); 
```

此示例在加载的图像中找到眼睛。寻找口鼻也是类似的。它发现它们为矩形，我们将这些矩形绘制成图像。我不知道这些矩形对你来说是否足够，但如果你想要更具体的点，比如鼻子的中心；您将需要进行更多处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-10T05:04:54.653

[在这个答案](https://stackoverflow.com/a/15493592/4391129)中，我找到了两个库链接，可以根据 opencv 查找面部特征点：

这是两个库：

*   第一个[地标](http://cmp.felk.cvut.cz/~uricamic/flandmark/)
*   第二个[ASM/AAM](https://code.google.com/p/asmlib-opencv/)

# ios - iOS 比较 GPS 位置

> ID：12257741
> 
> 赞同：2
> 
> 时间：2012-09-04T06:14:50.013
> 
> 标签：ios, gps, cllocationmanager

我正在创建一个应用程序，该应用程序需要确定我的当前位置（在 didUpdateLocation 中记录：）是否存在于我拥有的一组地理坐标中。现在我明白了比较 double/float 值是否相等可能容易出错，因为地理坐标中涉及的精度非常高。GPS 中的轻微不准确可能会使我的算法偏离轨道。因此，我需要将它与一些误差幅度进行比较。

如何将 2 个 CLLocations 与误差幅度进行比较？或者确定位置读取中的错误（我认为这是不可能的，因为 CLLocationManager 会纠正它）。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T06:32:52.173

在每个`CLLocation`实例中，都有一个属性声明为`@property(readonly, nonatomic) CLLocationAccuracy horizontalAccuracy;`您可以做的就是创建一个例程，例如：

```
-(BOOL)isLocation:(CLLocation*)location inRangeWith:(CLLocation*)otherLocation{
    CLLocationDistance delta = [location distanceFromLocation:otherLocation];
    return (delta < location.horizontalAccuracy);
} 
```

您可以制作更复杂的逻辑，因为两个位置都具有该属性...

干杯。【ツ】</p>

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T06:27:47.737

您可以使用 CoreLocation 方法`distanceFromLocation:`来查找用户位置与另一个点之间的距离。如果距离小于您决定的任何阈值，那么您可以假设位置是相同的。

```
CLLocationDistance threshold = 5.0;  // threshold distance in meters

// note: userLocation and otherLocation are CLLocation objects
if ([userLocation distanceFromLocation:otherLocation] <= threshold) {
    // same location
} 
```

# extjs - 如何在 ExtJS 4.1 MVC 中的控制器内实现 selectionModel 的侦听器

> ID：12257743
> 
> 赞同：1
> 
> 时间：2012-09-04T06:15:02.667
> 
> 标签：extjs

我有一个`checkboxmodel`应用了选择模型的网格。有没有办法在控制器`control()`方法中放置监听器？

至于[DOCS](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.app.Controller)所说`refs`的属性仅用于引用组件。SelectionModel 不是组件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T08:23:46.907

只需使用控制器提供的 control() 方法将您的侦听器注册到包含此模型的网格。据我所知，checkboxmodel 中的所有事件都会冒泡到网格中。至少 selectionchange 事件有效，因为我自己使用这个事件和一个复选框模型。

```
'grid': {select: this.onSelect, selectionchange: this.onSelectionChange} 
```

我不建议在这种情况下使用 refs。

编辑：

正如您可能在[API](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.selection.CheckboxModel-event-selectionchange)中看到的，复选框 checkboxmodel 不是 Ext.form.field.Checkbox 类型。因此，您可能想到的复选框中没有单个事件。

要使用复选框强制选择，请使用

```
checkOnly: true 
```

这将仅通过单击组合来强制选择

# python - 在 Python 中将文件路径永久添加到 sys.path

> ID：12257747
> 
> 赞同：128
> 
> 时间：2012-09-04T06:15:17.747
> 
> 标签：python, sys.path

我有一个名为 的文件`example_file.py`，我想从其他各种文件中使用它，所以我决定在另一个文件中添加`example_file.py`并`sys.path`导入该文件以使用该文件。为此，我在 IPython 中运行了以下命令。

```
import sys
sys.path
sys.path.append('/path/to/the/example_file.py')
print(sys.path) 
```

我可以看到我刚刚添加的路径，当我尝试从另一个目录路径导入此文件时，如下所示：

```
import example_file 
```

它工作得很好，但是一旦我从 IPython 出来，再次输入它并检查`sys.path`，我发现我添加的路径不存在，那么如何在 Python 中永久添加 sys.path 的路径？

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2012-09-04T06:20:08.697

有几种方法。最简单的方法之一是创建一个`my-paths.pth`文件（如此[处](http://docs.python.org/library/site.html)所述）。这只是一个带有`.pth`您放入系统`site-packages`目录的扩展名的文件。在文件的每一行上，您放置一个目录名称，因此您可以在其中放置一行，`/path/to/the/`它将将该目录添加到路径中。

您还可以使用 PYTHONPATH 环境变量，它类似于系统 PATH 变量，但包含将添加到`sys.path`. 请参阅[文档](http://docs.python.org/tutorial/modules.html#the-module-search-path)。

请注意，无论您做什么，都`sys.path`包含*目录*而不是文件。您不能“将文件添加到`sys.path`”。您始终添加其目录，然后您可以导入该文件。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2020-05-01T11:32:30.087

这种方式对我有用：

添加您喜欢的路径：

```
export PYTHONPATH=$PYTHONPATH:/path/you/want/to/add 
```

检查：您可以运行 'export' cmd 并检查输出，或者您可以使用此 cmd 检查它：

```
python -c "import sys; print(sys.path)" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-11-19T08:56:25.357

解决此问题的另一种方法是将文件安装为单个模块。

创建如下安装程序文件（名为 pysetup.py）：

```
import setuptools

module_name = input("Enter module name: ")
setuptools.setup(
    name=module_name,
    py_modules=[module_name],
) 
```

然后，您可以在出现提示时使用`python pysetup.py install`Then 自行安装此安装程序 enter `pysetup`。

现在要安装您可以键入`python -m pysetup install`的任何文件，然后输入文件名。您也可以替换`install`为`develop`以开发模式安装并继续编辑文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-02T23:37:31.373

在以下文件中的一个 Windows 发行版中： `<python_root_installation_directory>/python38._pth`

有以下几行：

```
python38.zip
.
./lib
./lib/site-packages

# Uncomment to run site.main() automatically
#import site 
```

因此，有了这个内容，就会产生以下结果：

```
Python 3.8.2 (tags/v3.8.2:7b3ab59, Feb 25 2020, 23:03:10) [MSC v.1916 64 bit (AMD64)] on win32
>>> import sys
>>> sys.path
['C:\\Program Files\\Applications\\python_3_8_2\\python38.zip', 'C:\\Program Files\\Applications\\python_3_8_2', 'C:\\Program Files\\Applications\\python_3_8_2\\./lib', 'C:\\Program Files\\Applications\\python_3_8_2\\./lib/site-packages'] 
```

所以在将这一行添加到文件中之后：`./lib/site-packages/win32ctypes`它存在于路径中：

```
Python 3.8.2 (tags/v3.8.2:7b3ab59, Feb 25 2020, 23:03:10) [MSC v.1916 64 bit (AMD64)] on win32
>>> import sys
>>> sys.path
['C:\\Program Files\\Applications\\python_3_8_2\\python38.zip', 'C:\\Program Files\\Applications\\python_3_8_2', 'C:\\Program Files\\Applications\\python_3_8_2\\./lib', 'C:\\Program Files\\Applications\\python_3_8_2\\./lib/site-packages', 'C:\\Program Files\\Applications\\python_3_8_2\\./lib/site-packages/win32ctypes'] 
```

这样，您不需要`PYTHONPATH`在系统上存在变量，您仍然可以拥有该功能。缺点是这是特定于安装的，所以如果您的系统上有 3 个不同的发行版，这将只影响所选的安装，而同时`PYTHONPATH`影响所有的安装。

# json - 有没有办法使用 spring mvc 3.1 将 json 反序列化为复杂对象？

> ID：12257748
> 
> 赞同：2
> 
> 时间：2012-09-04T06:15:26.813
> 
> 标签：json, spring-mvc, jackson

我正在尝试找出一种通过 json 和 spring mvc 3.1 传递复杂对象的方法。我也在使用knockoutjs，所以把ko.toJSON 等同于JSON.stringify。

部署T

这是ajax调用：

```
$.ajax({
            url: "/doAction",
            type: "post",
            data: ko.toJSON({"complexObjectA": ko.toJSON(self.complexObjectA()), "complexObjectB": ko.toJSON(self.complexObjectB()), "id": "", "text": ""}),
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            // callback handler that will be called on success
            success: function (response, textStatus, jqXHR) {
                //dosomething
            },
            // callback handler that will be called on error
            error: function (jqXHR, textStatus, errorThrown) {
                // log the error to the console

            },
            // callback handler that will be called on completion
            // which means, either on success or error
            complete: function () {
                //dosomething
            }
        }); 
```

弹簧控制器代码如下所示：

```
 @RequestMapping(value = "/doAction", method = RequestMethod.POST)
    @ResponseBody
    public String doAction(@RequestBody MyForm form, HttpServletRequest request, HttpServletResponse response) { 
```

并且 MyForm 被定义为：

```
public class MyForm {
private ComplexObjectA complexObjectA;
private ComplexObjectB complexObjectA;
private String id;
private String text; 
```

使用适当的公共 getter/setter。

当我尝试进行此调用时，我收到错误 400 客户端发送的请求在语法上不正确 ()。

复杂的对象都是通过更早的 json get 获得的，它们可以很好地从对象序列化到 json 和 js 对象。

为了做到这一点，我是否需要用 Jackson 创建一个特殊的反序列化器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T15:06:41.650

正如您所说，您的复杂对象之前已成功序列化，我可以猜测您的 Spring 配置文件没有问题，并且 Jackson 配置正确。我认为您不需要为 MyForm 类创建单独的序列化器/反序列化器。

例如，如果您在用户单击具有非空 href 的链接时进行 jQuery AJAX 调用，则可能会出现 400 错误“错误请求”，因此浏览器会尝试执行默认操作。在这种情况下，您可以看到请求标头仍然具有“text/html”类型，尽管您正在尝试发送“application/json”。

# iis-7 - 网址路由在本地主机上工作但不在服务器上

> ID：12257750
> 
> 赞同：0
> 
> 时间：2012-09-04T06:15:28.313
> 
> 标签：iis-7, url-routing, asp.net-3.5, windows-server-2008-r2

我使用 asp.net 3.5 构建我的应用程序，我在其中使用 URL 路由，它在我的本地主机中工作正常在我的 web.config 文件中，我执行以下设置

```
 <system.web>
    <httpModules>
         <add name="ScriptModule" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral,                 PublicKeyToken=31BF3856AD364E35"/>
       <add name="RoutingModule" type="System.Web.Routing.UrlRoutingModule, System.Web.Routing, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
    </httpModules>
    </system.web>

    <system.webServer>
    <validation validateIntegratedModeConfiguration="false"/>
    <modules runAllManagedModulesForAllRequests="true">
    <remove name="UrlRoutingModule"/>
    <add name="UrlRoutingModule"
    type="System.Web.Routing.UrlRoutingModule,
    System.Web.Routing, Version=3.5.0.0,
    Culture=neutral,
    PublicKeyToken=31BF3856AD364E35" />
    </modules>

    <handlers>
   <remove name="UrlRoutingHandler"/>
    <add name="UrlRoutingHandler"
    preCondition="integratedMode"
    verb="*" path="UrlRouting.axd"
    type="System.Web.HttpForbiddenHandler,
    System.Web, Version=2.0.0.0, Culture=neutral,
    PublicKeyToken=b03f5f7f11d50a3a" />
    </handlers>
    </system.webServer> 
```

但是，当我在具有 IIS 7 和 windows 2008 r2 的服务器上部署应用程序时，路由在那里不起作用。我想我必须做一些 iis 设置或更改一些 web.config 代码....

所以请任何人给我一些答案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:13:32.770

您是否考虑过从您的网络应用程序实现[页面路由](http://msdn.microsoft.com/en-us/library/cc668201%28VS.100%29.aspx)？

您可能会遇到的一个问题是，如果您使用 AJAX（工具包或扩展），您将需要实现：

```
'Ignores any Resource cache references, used heavily in AJAX interactions.
rts.Ignore("{resource}.axd/{*pathInfo}") 
```

为了`Sys is undefined`避免在调试时出错。

# spring - 添加@Autowire时“找不到当前线程的会话”

> ID：12257752
> 
> 赞同：2
> 
> 时间：2012-09-04T06:15:33.847
> 
> 标签：spring, hibernate

我见过几个类似的问题，但没有一个建议的解决方案对我有帮助。

摘要：当我在 .xml 上创建和注入 bean 时，它可以工作；但是当我使用@Autowire 或@Resource 时，它​​不会。

环境：Spring3、Hibernate4、Tomcat7。

详细信息：以下设置确实有效：

`web.xml`：

```
 <context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
      /WEB-INF/spring/root-context.xml
      /WEB-INF/spring/security-context.xml
      /WEB-INF/spring/users-context.xml
    </param-value>
  </context-param> 
```

`root-context.xml`：

```
 <bean id="dataSource"
    class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="com.mysql.jdbc.Driver" />
    <property name="url" value="jdbc:mysql://localhost:3306/venus" />
    <property name="username" value="root" />
    <property name="password" value="" />
  </bean>

  <bean id="sessionFactory"
    class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="packagesToScan" value="com.airbus.genesis.marte.dal" />
    <property name="hibernateProperties">
      <props>
        <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
        <prop key="hibernate.show_sql">true</prop>
      </props>
    </property>
  </bean>

  <tx:annotation-driven transaction-manager="txManager" />
  <bean id="txManager"
    class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory" />
  </bean> 
```

`users-context.xml`：

```
 <bean id="usersDAO" class="com.airbus.genesis.marte.dal.users.UsersDAO">
    <property name="sessionFactory" ref="sessionFactory" />
  </bean> 
```

BL对象：

```
@Service("usersManager")
@Transactional(readOnly = true)
public class UsersManager implements IUsersManager {
  @Autowired
  @Qualifier("usersDAO")
  private IUsersDAO usersDAO;

  @Override
  public List<User> getUsers() {
    return usersDAO.getUsers();
  }

} 
```

DAO 对象（注意 @Repository 和 @Resource 已注释）：

```
//@Repository("usersDAO")
@Transactional(readOnly = true)
public class UsersDAO implements IUsersDAO {

  // @Resource(name = "sessionFactory")
  private SessionFactory sessionFactory;

  @Override
  public List<User> getUsers() {
    @SuppressWarnings("unchecked")
    List<User> res = (List<User>) getSessionFactory().getCurrentSession()
        .createQuery("from User").list();
    return res;
  }

  public SessionFactory getSessionFactory() {
    return sessionFactory;
  }

  public void setSessionFactory(SessionFactory sessionFactory) {
    this.sessionFactory = sessionFactory;
  }
} 
```

但是以下一个不起作用：

`users-context.xml`：

```
<!-- 
  <bean id="usersDAO" class="com.airbus.genesis.marte.dal.users.UsersDAO">
    <property name="sessionFactory" ref="sessionFactory" />
  </bean>
--> 
```

DAO 对象（注意 @Repository 和 @Resource 现在没有注释）：

```
@Repository("usersDAO")
@Transactional(readOnly = true)
public class UsersDAO implements IUsersDAO {

  @Resource(name = "sessionFactory")
  private SessionFactory sessionFactory;

  @Override
  public List<User> getUsers() {
    @SuppressWarnings("unchecked")
    List<User> res = (List<User>) getSessionFactory().getCurrentSession()
        .createQuery("from User").list();
    return res;
  }

  public SessionFactory getSessionFactory() {
    return sessionFactory;
  }

  public void setSessionFactory(SessionFactory sessionFactory) {
    this.sessionFactory = sessionFactory;
  }
} 
```

`org.hibernate.HibernateException: No Session found for current thread`提出：

```
org.hibernate.HibernateException: No Session found for current thread
    org.springframework.orm.hibernate4.SpringSessionContext.currentSession(SpringSessionContext.java:97)
    org.hibernate.internal.SessionFactoryImpl.getCurrentSession(SessionFactoryImpl.java:941)
    com.airbus.genesis.marte.dal.users.UsersDAO.getUsers(UsersDAO.java:23)
    com.airbus.genesis.marte.bl.users.UsersManager.getUsers(UsersManager.java:22)
[...] 
```

如果我使用@Autowire 而不是@Resource，也会发生同样的情况。

我想这是我这边的某种误解，但找不到在哪里。任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T07:18:13.180

问题很可能是在 dispatcher-servlet.xml 配置`@Repository`中`@Service`提取了注释（您使用`context:component-scan`吗？），因此这些 bean 是在调度程序 servlet 上下文而不是根 Web 应用程序上下文中创建的。

一个好的做法是将您的服务层对象放到专用包中，并使用特定的包名称作为`<context:component-scan`/>`base-package`限定符（如“com.myproject.services”）。您还可以使用过滤器表达式来包含和排除元素，请参见此处的示例：[@Service 被构造两次和](https://stackoverflow.com/questions/4333390/service-are-constructed-twice)[Spring 文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-scanning-filters) 的 4.10.3 部分

另请参阅[Spring Framework 中 applicationContext.xml 和 spring-servlet.xml 之间的区别](https://stackoverflow.com/questions/3652090/difference-between-applicationcontext-and-spring-servlet-xml-in-spring)

# xml - 使用样式表将 Excel 数据转换为 XML

> ID：12257753
> 
> 赞同：0
> 
> 时间：2012-09-04T06:15:35.720
> 
> 标签：xml, excel, xsd

有没有办法在 Excel (2010) 中创建一种“模板”来获取一个或多个电子表格中的数据，然后基于 XML 模式将该数据转换为 XML？或者 Excel 中的任何类似功能？

我知道 Excel 中有几个 XML 功能，但还没有找到我想要在上面做的事情。

答案和评论表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T11:49:15.450

很久以前做过类似的事情。可能不是你想要的，但希望能让你朝着正确的方向开始。

*   首先启用功能区中的开发人员选项卡。一个简单的谷歌搜索应该会告诉你如何做到这一点。
*   在“开发人员”选项卡中，单击“导入”按钮（在“XML”子选项卡中）。这应该允许您导入现有的 XML（数据）文件。这会将数据导入为具有适当列名的表。这将是您的“模板”。
*   现在您可以向该表添加/修改行，完成后，右键单击（在表内）并在上下文菜单中使用 XML->Export。

已经很长时间了，但请记住面对更复杂的 XML 文件（多个一对一关系或其他东西）的问题，因此这种方法可能仅适用于相对简单的 XML 模式（除非您将其与 XSL 转换结合使用）。

# java - Java中的串行转换器

> ID：12257754
> 
> 赞同：11
> 
> 时间：2012-09-04T06:15:37.937
> 
> 标签：java, serial-port, communication, rs485, industrial

我正在寻找工业串行到 USB 转换器。我想在我的 JAVA 应用程序中使用它来与各种设备进行通信。因此串口适配器必须提供 RS232、RS422 和 RS485 的模式。此外，应该有一个库可以让我启用和禁用串行适配器中的缓冲区。

我尝试了 MOXA Uport 1150，它做得很好。这个适配器的问题是，串行模式 (232,422,485) 不能在 Java 应用程序中更改，并且 MOXA 的缓冲区也不能启用/禁用。

我希望有一个人可以帮助我！

迈克尔

# c# - 从网络浏览器中选择下拉选项

> ID：12257756
> 
> 赞同：5
> 
> 时间：2012-09-04T06:15:45.463
> 
> 标签：c#

我的目标是我需要选择第二个选项。

我尝试了以下方法，但无法设置选定值。没有错误出现，选择只是没有发生。我自己对 HTML 非常熟悉，我知道“selected”和“selected="selected"' 有效，但不确定为什么它不适用于我的 C# 代码。有什么问题？

```
webBrowser1.Document.GetElementById("field_gender1").
       Children[1].SetAttribute("selected", "selected"); 
```

HTML是

```
<select name="gender1" id="field_gender1" class="select">
        <option selected="selected" value="1">val1</option>
        <option value="2">val2</option>
</select> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T16:28:07.467

从 WebBrowser_DocumentComplete(...) 执行此操作

```
var htmlDocument = webBrowser1.Document as IHTMLDocument2;
  if (htmlDocument != null)
  {
     var dropdown = ((IHTMLElement)htmlDocument.all.item("field_gender1"));
     var dropdownItems = (IHTMLElementCollection)dropdown.children;

     foreach(IHTMLElement option in dropdownItems)
     {
        var value = option.getAttribute("value").ToString();
        if(value.Equals("2"))
           option.setAttribute("selected", "selected");
     }

  } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T07:02:43.887

如果您的代码位于合适的位置，它应该可以正常工作，例如：button1_Click 事件、webBrowser1_DocumentCompleted 事件等。

# html - 仅使用视频标签实时流式传输到 HTML5（没有 webrtc）

> ID：12257762
> 
> 赞同：14
> 
> 时间：2012-09-04T06:16:08.983
> 
> 标签：html, real-time, mp4, ogg, webm

我想将实时编码数据包装到 webm 或 ogv 并将其发送到 html5 浏览器。

webm 或 ogv 可以做到这一点，Mp4 由于其 MDAT 原子而无法做到这一点。（不能实时包装 h264 和 mp3 并将其包装并发送给客户端）假设我正在输入来自我的网络摄像头的输入和来自我的内置麦克风的音频。碎片化的 mp4 可以处理这个问题，但是要找到库来做到这一点很麻烦）。

我需要这样做，因为我不想单独发送音频和视频。

如果我确实单独发送它，通过音频标签发送音频和通过视频发送视频>（音频和视频被解复用并发送）我可以使用 javascript 在客户端浏览器上同步它们吗？我看到了一些例子，但还不确定。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-16T15:04:24.827

我使用在 Ubuntu 上运行的 ffmpeg/ffserver 执行此操作，如下所示用于 webm（mp4 和 ogg 更容易一些，并且应该在同一服务器上以类似的方式工作，但您应该使用所有 3 种格式以实现跨浏览器的兼容性）。

首先，从源代码构建 ffmpeg 以包含 libvpx 驱动程序（即使您使用具有它的版本，您也需要最新的（截至本月）来流式传输 webm，因为它们只是添加了包含全局标头的功能）。我在 Ubuntu 服务器和桌面上执行此操作，[本指南向我展示了如何](http://ffmpeg.org/trac/ffmpeg/wiki/UbuntuCompilationGuide)[在此处找到](http://ffmpeg.org/trac/ffmpeg/wiki/CompilationGuide)其他操作系统的说明。

一旦你获得了适当版本的 ffmpeg/ffserver，你就可以将它们设置为流式传输，在我的例子中，这是按如下方式完成的。

在视频捕获设备上：

```
ffmpeg -f video4linux2 -standard ntsc -i /dev/video0 http://<server_ip>:8090/0.ffm 
```

*   其中的“-f video4linux2 -standard ntsc -i /dev/video0”部分可能会根据您的输入源而改变（我的是用于视频采集卡）。

相关 ffserver.conf 摘录：

```
Port 8090
#BindAddress <server_ip>
MaxHTTPConnections 2000
MAXClients 100
MaxBandwidth 1000000
CustomLog /var/log/ffserver
NoDaemon

<Feed 0.ffm>
File /tmp/0.ffm
FileMaxSize 5M
ACL allow <feeder_ip>
</Feed>
<Feed 0_webm.ffm>
File /tmp/0_webm.ffm
FileMaxSize 5M
ACL allow localhost
</Feed>

<Stream 0.mpg>
Feed 0.ffm
Format mpeg1video
NoAudio
VideoFrameRate 25
VideoBitRate 256
VideoSize cif
VideoBufferSize 40
VideoGopSize 12
</Stream>
<Stream 0.webm>
Feed 0_webm.ffm
Format webm
NoAudio
VideoCodec libvpx
VideoSize 320x240
VideoFrameRate 24
AVOptionVideo flags +global_header
AVOptionVideo cpu-used 0
AVOptionVideo qmin 1
AVOptionVideo qmax 31
AVOptionVideo quality good
PreRoll 0
StartSendOnKey
VideoBitRate 500K
</Stream>

<Stream index.html>
Format status
ACL allow <client_low_ip> <client_high_ip>
</Stream> 
```

*   请注意，这是为 feeder_ip 上的服务器配置的，以执行上述 ffmpeg 命令，并为 server_ip 上的服务器配置，因此通过 client_high_ip 服务器到 client_low_ip，同时在 server_ip 上处理 mpeg 到 webm 的对话（下文继续）。

这个 ffmpeg 命令在以前称为 server_ip 的机器上执行（它处理实际的 mpeg --> webm 转换并将其反馈到不同源的 ffserver 中）：

```
ffmpeg -i http://<server_ip>:8090/0.mpg -vcodec libvpx http://localhost:8090/0_webm.ffm 
```

一旦这些都启动了（首先是 ffserver，然后是 feeder_ip ffmpeg 进程，然后是 server_ip ffmpeg 进程），您应该能够访问 http://:8090/0.webm 上的实时流并检查 http 上的状态://:8090/

希望这可以帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-03-17T20:35:43.530

埃夫伦，

由于您最初提出了这个问题，因此媒体源扩展 [https://www.w3.org/TR/media-source/](https://www.w3.org/TR/media-source/)已经足够成熟，能够播放非常短（30 毫秒）的 ISO-BMFF 视频/mp4 片段，只需一点缓冲。

参考 [HTML5 直播](https://stackoverflow.com/questions/5858936/html5-live-streaming/39750043#39750043)

所以你的陈述

> （不能实时打包 h264 和 mp3 打包发送给客户端）

现在已经过时了。是的，你可以用 h264 + AAC 做到这一点。

那里有几种实现；看看虚幻媒体服务器。来自虚幻媒体服务器常见问题解答： http: [//umediaserver.net/umediaserver/faq.html](http://umediaserver.net/umediaserver/faq.html)

> **Unreal HTML5 直播与 MPEG-DASH 有何不同？** 与 MPEG-DASH 不同，Unreal Media Server 使用 WebSocket 协议在 Web 浏览器中实时流式传输到 HTML5 MSE 元素。这比通过每个 MPEG-DASH 的 HTTP 请求获取片段更有效。此外，虚幻媒体服务器发送持续时间最短的片段，低至 30 毫秒。这允许低延迟的亚秒级流式传输，而 MPEG-DASH 与其他基于 HTTP 块的实时流式传输协议一样，无法提供低延迟式实时流式传输。

他们的演示网页有一个来自 RTSP 摄像头的实时 HTML5 提要： [http](http://umediaserver.net/umediaserver/demos.html) ://umediaserver.net/umediaserver/demos.html 请注意，HTML5 播放器中的延迟与 Flash 播放器中的延迟相当。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T18:11:03.067

不是 100% 确定你能做到这一点。HTML5 尚未批准任何直播机制。您可以使用 websockets 并将数据实时发送到浏览器来执行此操作。但是您必须自己编写解析逻辑，而且我不知道当数据到达播放器时您将如何提供数据。

至于视频和音频标签：视频标签可以播放同时具有音频和视频的容器文件。因此，将您的内容包装在兼容的容器中。如果您修改浏览器以将实时流写入此视频文件，因为实时内容不断进入并为浏览器请求的每个字节流式传输该数据，这可以完成。但这绝对不是微不足道的。

# mysql - 选择字符串中所有子字符串出现的位置

> ID：12257766
> 
> 赞同：1
> 
> 时间：2012-09-04T06:16:39.790
> 
> 标签：mysql, replace

我正在尝试获取数据库字段中所有出现的子字符串以及每个后下一个索引的位置。到目前为止，我所做的是获取第一次出现和下一个字符串的位置，如下所示：

```
SELECT dataset.id,
       SUBSTRING(dataset.text, LOCATE('XXXX', dataset.text) + LENGTH('XXXX')) 
FROM datatable as dataset 
```

任何帮助请得到所有的事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T18:30:28.370

也许这会有所帮助：

```
delimiter //
CREATE FUNCTION getpos(haystack VARCHAR(255), search VARCHAR(10))
RETURNS VARCHAR(255)
BEGIN
    DECLARE ret VARCHAR(255);
    DECLARE pos INT;
    SET ret = "";
    SET pos = LOCATE (search, haystack);
    WHILE (pos > 0) DO
        SET ret = CONCAT_WS (',', ret, pos);
        SET pos = LOCATE (search, haystack, pos+1); 
    END WHILE;
    RETURN ret;
END// 
```

然后进行选择：

```
SELECT dataset.id, getpos (dataset.text, 'XXXX') FROM datatable as dataset 
```

# android - 如何在 Android 中编辑弹出菜单项的尺寸？

> ID：12257769
> 
> 赞同：5
> 
> 时间：2012-09-04T06:16:58.107
> 
> 标签：android, xml, menu, popupmenu

我有一个弹出菜单，当我单击按钮时会下拉。但是我觉得这个菜单中的项目相对于我的应用程序的整体视图看起来不太好。我想知道是否可以编辑菜单中项目的尺寸。如果可能的话，也许让每个项目的高度更短。

```
PopupMenu popup = new PopupMenu(this, settingsButton);
MenuInflater inflater = popup.getMenuInflater();
inflater.inflate(R.menu.settings_menu, popup.getMenu()); 
```

然后在按钮的 onClick() 方法中我调用 show()

```
popup.show(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-06-03T21:02:15.613

您无法自定义 PopupMenu，因此请改用 Popup 窗口。请找到以下工作代码。

```
 PopupWindow popup;

       LayoutInflater mInflater = (LayoutInflater) getApplicationContext()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View layout = mInflater.inflate(R.layout.popuprow, null); //popup row is item xml

        layout.measure(View.MeasureSpec.UNSPECIFIED,
                    View.MeasureSpec.UNSPECIFIED);
            popup = new PopupWindow(layout, FrameLayout.LayoutParams.WRAP_CONTENT,
                    FrameLayout.LayoutParams.WRAP_CONTENT,true);

     final TextView popupMenuitem = (TextView) layout.findViewById(R.id.popupTitle);
     // set click on listner on item where you can close the popup by dismiss()

    popup.showAsDropDown(filtericon,5,5); // filtericon is button name , clicking 
    which popup will launch.

    popup.dismiss();  // to close popup call this 
```

# java - Java Melody 与非 WEB 应用程序的集成

> ID：12257772
> 
> 赞同：4
> 
> 时间：2012-09-04T06:17:10.200
> 
> 标签：java

java melody 真的只能与 Java EE Web 应用程序集成吗？

我希望它监控我的应用程序，该应用程序是使用 jpos 框架构建的，即给定 mbean 的 jpos 在那里。我可以将它与基于 jpos (mBeans) 的应用程序集成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-02-14T09:46:02.213

在 Java Melody 高级用户指南中，有一节解释了如何监控非 webapp/no-server 独立应用程序：

[在独立应用程序中嵌入 JavaMelody](https://github.com/javamelody/javamelody/wiki/UserGuideAdvanced#embedding-javamelody-in-a-standalone-app)

为了在浏览器中显示 JavaMelody 分析，建议包括一个 Jetty 服务器。为此，您需要创建一个“EmbeddedServer”类，并从应用程序运行它：`EmbeddedServer.start(8080, parameters);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-11T18:06:31.457

如果您使用的是 EJB，您所要做的就是添加旋律 jar 文件，然后在您使用的 eja-jar.xml 文件中添加：

```
...
<interceptors>
    <interceptor>
        <interceptor-class>net.bull.javamelody.MonitoringInterceptor</interceptor-class>
    </interceptor>
</interceptors>
<assembly-descriptor>
    <interceptor-binding>
        <ejb-name>*</ejb-name>
        <interceptor-class>net.bull.javamelody.MonitoringInterceptor</interceptor-class>
    </interceptor-binding>
</assembly-descriptor>
.... 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-03-19T15:21:04.867

你可以使用 javamelody 来监控几乎任何东西，只是集成起来可能有点困难。

# mysql - 如何在 mysql 查询中使用正则表达式删除假名？

> ID：12257774
> 
> 赞同：0
> 
> 时间：2012-09-04T06:17:20.907
> 
> 标签：mysql, regex

我想删除可能使用假名注册的名称。

由于开发人员忘记对表单注册进行验证。现在我想删除假名。

为了检查这个名字是否是假的，我正在检查这个名字是否包含任何数字？

这是我写的查询，但它不起作用......

```
SELECT registration.regi_id, student.first_name, 
student.cont_no, student.email_id, 
registration.college, 
registration.event_name, 
registration.accomodation
FROM student, registration
WHERE student.stud_id = registration.stud_id
    AND student.first_name NOT RLIKE '%[0-9]%' 
```

如何解决这个问题？

对不起，我的语言问题，

**PS** “first_name”字段中有很多名字，比如**“asdfasdf12323”**，我不希望这种名字显示在列表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T06:23:33.180

您的列也可能包含字母数字字符。您需要同时过滤数字和字母数字字符

对于字母数字字符，请尝试 REGEXP '^[A-Za-z0-9]+$'

对于数字尝试 REGEXP '[0-9]'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T06:24:31.783

就涉及到正则表达式而言，您的表达式只是在寻找一个数字。此外，我相信您的 'NOT RLIKE' 没有使用正则表达式，而是对文字 '[0-9]' 进行基本字符串搜索。MySql 支持正则表达式，您的最后一个子句如下所示：`AND student.first_name NOT REGEXP '[0-9]*'`

# configuration - dbFit 的 FitNesse 配置

> ID：12257776
> 
> 赞同：1
> 
> 时间：2012-09-04T06:17:36.047
> 
> 标签：configuration, fitnesse, fitsharp, dbfit

我有以下页面进行 FitNesse 测试：

```
!define COMMAND_PATTERN {%m -r fitnesse.fitserver.FitServer,FitSharp\fit.dll %p}
!define TEST_RUNNER {FitSharp\Runner.exe}
!define PATH_SEPARATOR {;}
!path FitSharp\dbfit.sqlserver.dll

!|dbfit.SqlServerTest|
!|Connect|data source=(local);integrated security=SSPI;database=mydatabase;|

!|Insert|MonthEnd|
|Date|
|31-Jul-2012|

...Tests... 
```

有没有一种方法可以从外部配置文件中获取连接字符串，而不是将其嵌入页面中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T11:38:41.607

您可以使用[`Connect using file`](http://dbfit.github.io/dbfit/docs/reference.html#connect-using-file).

```
...
!|dbfit.SqlServerTest                        |
|Connect using file|DatabaseConnection.config|
... 
```

在 DatabaseConnection.config 文件中包含以下内容

```
# DBFit connection properties
connection-string=data source=(local);integrated security=SSPI;database={databaseName}; 
```

# java - 如何在 WEB_INF 中包含来自不同目录的页面

> ID：12257785
> 
> 赞同：1
> 
> 时间：2012-09-04T06:18:14.597
> 
> 标签：java, jsp, jakarta-ee, include

![文件夹结构](../Images/0556c898766d3ca306a376b94a5065ea.png)

这是我的文件夹结构我想包含页面“common/tray.jsp”表单“plan/add_edit.jsp”页面

我已经`<!-- Tray --> <%@ include file="/common/tray.jsp" %> <!-- END Tray -->` 在 plan/add_edit.jsp 页面中完成了但是给了我

```
org.apache.jasper.JasperException: /plan/add_edit.jsp (line: 47, column: 9) File "/plan/common/tray.jsp" not found 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T06:25:17.990

```
<%@ include file="../common/tray.jsp" %> 
```

# android - 在Android应用程序中存储200多个情感图标的有效方法是什么

> ID：12257786
> 
> 赞同：0
> 
> 时间：2012-09-04T06:18:18.650
> 
> 标签：android

我的应用程序中有超过 200 个情感图标。
我把它们放进去`res/drawable`。
它确实使可绘制文件夹如此之大，尽管每个图标只有 1-3K。
有没有其他好的方法来存储这些图标而不是将它们存储在可绘制文件夹中？
此外，我将在网格视图中显示这些图标以供用户选择。
将所有内容存储在可绘制文件夹中并将它们放在网格视图中是否很好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T07:10:20.280

您可以将所有图像合并到一个位图中。如果保持大小固定，则可以在循环中使用 Bitmap.createBitmap() 来生成位图数组。

按照本教程拆分位图。

[在 Android 中将图像分割/分割成更小的块/块](http://androidattop.blogspot.com/2012/05/splitting-image-into-smaller-chunks-in.html)

[如何在 Android 中将位图拆分为多个部分](http://asimkhatri90.wordpress.com/2011/01/30/how-to-split-a-bitmap-into-pieces-in-android/)

# python - Mailjet REST API - 它甚至可以运行吗？

> ID：12257789
> 
> 赞同：1
> 
> 时间：2012-09-04T06:18:27.590
> 
> 标签：python, mailjet

我正在使用mailjet Python API，我有点困惑。

[https://www.mailjet.com/docs/api/lists/contacts](https://www.mailjet.com/docs/api/lists/contacts)

使用这个 API 类来调用 mailjets 的 GET 方法似乎是不可能的。任何人都可以确认是这种情况吗？

```
api.lists.Contacts(id='foo') # causes POST, thus 405 
```

这是他们的 API 类。我什至没有看到`ApiMethodFunction`将选项传递给`connection`班级。

```
class ApiMethod(object):
    def __init__(self, api, method):
        self.api = api
        self.method = method

    def __getattr__(self, function):
        return ApiMethodFunction(self, function)

    def __unicode__(self):
        return self.method

class ApiMethodFunction(object):
    def __init__(self, method, function):
        self.method = method
        self.function = function

    def __call__(self, **kwargs):
        response = self.method.api.connection.open(
            self.method,
            self.function,
            postdata=kwargs,
        )
        return json.load(response)

    def __unicode__(self):
        return self.function 
```

这似乎是一个关键功能，所以我倾向于认为我只是在错误地使用它，但可能吗？

`id`如果在 GET 参数中需要，您应该如何列出联系人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T07:50:23.650

python 库现已修复。根据作者的说法，您现在可以传递一个参数来指定请求是 POST 还是 GET

[https://github.com/WoLpH/mailjet](https://github.com/WoLpH/mailjet)

# perl - 检查到 websocket 的连接是否仍然使用 Net::Async::WebSocket 打开

> ID：12257796
> 
> 赞同：4
> 
> 时间：2012-09-04T06:19:08.683
> 
> 标签：perl, connection, websocket, eof, reconnect

我是 Perl 初学者，目前我正在与 websockets 作斗争。经过大量阅读、尝试和复制粘贴后，我得到了这段代码：

```
use strict;
use warnings;
use utf8;
use Data::Dumper;
use IO::Async::Loop;
use IO::Async::Timer::Periodic;
use Net::Async::WebSocket::Client;
use Protocol::WebSocket::URL;

my ($url, $msg, $last_update);
$url  = 'ws://127.0.0.1/stream';
$msg  = 'get_lists';

my $uri = Protocol::WebSocket::URL->new->parse($url);
my $loop = IO::Async::Loop->new;
my $client = Net::Async::WebSocket::Client->new(
        on_frame => sub {
                my ($self, $frame) = @_; 
                chomp($frame);
                $last_update = time(); # use this in timer below

                # do something else
        }   
);
$loop->add($client);

$client->connect(
        host    => $uri->host, 
        service => $uri->port, 
        url     => $url, 
        on_connected => sub {
                warn "Connection established";

                if ($msg) {
                        $client->send_frame("$msg\n");
                }   
        },  
        on_connect_error=> sub { die "CONNECT: ".Dumper \@_; },
        on_resolve_error=> sub { die "RESOLVE: ".Dumper \@_; },
        on_fail         => sub { die "FAIL: ".Dumper \@_; },
        on_read_eof     => sub {
                $loop->remove($client);

                # reconnect?
        }   
);

# is the connection to socket is still open?
# check every 30 seconds if $last_update was not updated
my $timer = IO::Async::Timer::Periodic->new(
        interval=> 30,
        on_tick => sub {
                if (!$last_update || time()-30 > $last_update) {
                        warn "Connection probably dead. No new data for 20 seconds.";

                        ## check connection

                        ## and reconnect if needed
                }
        },
);
$timer->start;
$loop->add($timer);

$loop->loop_forever; 
```

我还需要一件事，但我不知道如何解决这个问题：

我找到了一些信息，例如[https://stackoverflow.com/a/12091867/1645170](https://stackoverflow.com/a/12091867/1645170)，但我不明白如何将 SO_KEEPALIVE 放入我的代码中。我可能应该建立自己的 IO::Socket 连接并以某种方式将其传递给 Async::Net::WebSocket 但我无法做到。其实我真的不知道我应该怎么做。显然是初学者的问题。

我尝试了第二种方法，它应该每 30 秒检查一次连接是否打开（如果没有新数据通过套接字）。同样，同样的问题，但另一方面：不确定如何使用上面的代码检查连接是否打开。

我可以建立一个基本的 IO::Socket 连接，但我想以某种方式使用上面的代码，因为我喜欢 Net::Async::WebSocket 如何处理事件（on_read-eof、on_frame 等）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T12:33:19.860

如何检查它是否仍然有效？

创造一个“心跳”。每隔 x 秒从客户端发送一次“ping”，然后等待“pong”返回。如果超时，则死亡。

在服务器上，您可以添加自己的套接字（来自示例之一）。

如果希望它会帮助你。

```
my $serversock = IO::Socket::INET->new(
   LocalHost => "127.0.0.1",
   Listen => 1,
) or die "Cannot allocate listening socket - $@";

$serversock->setsockopt(SOL_SOCKET, SO_KEEPALIVE, 1);

my @serverframes;

my $acceptedclient;
my $server = Net::Async::WebSocket::Server->new(
   handle => $serversock, 
```

# php - 注册表单的 PHP 验证

> ID：12257797
> 
> 赞同：-6
> 
> 时间：2012-09-04T06:19:08.823
> 
> 标签：php, registration

我有一个问题，我创建了一个注册表单并给出了数据库连接和数据库字段值以在表中输入值。在这里，我可以在表格中输入所有字段值。如果该字段为空，则输入空值，因此我需要验证注册表单。如果用户输入空值，它应该显示错误。如果输入了所有字段，那么只有这样才能将数据提交到数据库。我还需要显示用户是否已经存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T06:24:56.697

您可以使用`required`属性在 html 上使用必填字段验证标准（使用`<!DOCTYPE html>`html 页面顶部的声明）

`<input type="text" name="usrname" required="required" />`

或者您可以使用 jQuery 使用此示例进行更详细的验证。 [http://www.codeproject.com/Articles/213138/An-Example-to-Use-jQuery-Validation-Plugin](http://www.codeproject.com/Articles/213138/An-Example-to-Use-jQuery-Validation-Plugin)

这是一个关于如何验证用户名或电子邮件的很棒的教程：

[http://www.codeforest.net/username-availability-check-using-php-and-jquery](http://www.codeforest.net/username-availability-check-using-php-and-jquery)

# android - 在我的应用中查看我的 android 应用评分

> ID：12257803
> 
> 赞同：0
> 
> 时间：2012-09-04T06:19:30.497
> 
> 标签：android

我想在某些应用程序中加载我在 android 市场中上传的应用程序的评级。这该怎么做？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T06:24:37.880

**没有规定从用户那里获得评级或评论作为输入。**

**您只能将其重定向到 android 市场 URL。**

# c# - 在 System.Data.Entity.Database 上第二次调用 ExecuteSqlCommand 时出错

> ID：12257804
> 
> 赞同：3
> 
> 时间：2012-09-04T06:19:43.503
> 
> 标签：c#, entity-framework, ado.net, entity-framework-5

我使用的是 EF5 代码优先，因此我有一个带有 System.Data.Entity.Database 类型的数据库属性的 ​​DbContext。

我发现的问题是，当您使用相同的参数多次调用同一个 SP 时，它会引发异常并显示消息：“SqlParameter 已被另一个 SqlParameterCollection 包含”。

这可以用下面的代码来演示。首先创建一个 DbContext 派生并将其连接到数据库。代码中的存储过程不必存在。第*一次*调用 SP 会出错，说 SP 不存在，但是，第二个异常是我们感兴趣的异常。

```
var pa = new SqlParameter[] 
        { 
            new SqlParameter("@Name", SqlDbType.NVarChar) { Value = "test" }
        };
        var dc = new MyWebContext(); // derived from DbContext
        try
        {
            dc.Database.ExecuteSqlCommand("spImport @Name", pa);
        }
        catch { }
        dc.Database.ExecuteSqlCommand("spImport @Name", pa); // fails with "The SqlParameter is already contained by another SqlParameterCollection" 
```

有时，我确实需要用相同的参数调用相同的 SP 两次或更多次。这是一个有效的要求。我的假设是调用 ExecuteSqlCommand 是非常短暂的，应该可以在同一个上下文中多次调用。

上下文似乎挂在第一个调用的参数信息上，这导致第二个调用出现问题。

这是堆栈跟踪：

> 在 System.Data.SqlClient.SqlParameterCollection.Validate(Int32 index, Object value) 在 System.Data.SqlClient.SqlParameterCollection.AddRange(Array values) 在 System.Data.Objects.ObjectContext.CreateStoreCommand(String commandText, Object[] 参数)在 System.Data.Objects.ObjectContext.ExecuteStoreCommand(String commandText, Object[] 参数) 在 System.Data.Entity.Internal.InternalContext.ExecuteSqlCommand(String sql, Object[] 参数) 在 System.Data.Entity.Database.ExecuteSqlCommand （字符串 sql，Object[] 参数）在 EF5ExecuteSqlCommandBugReproduction.Program.Main(String[] args) 在 c:\EF5ExecuteSqlCommandBugReproduction\EF5ExecuteSqlCommandBugReproduction\Program.cs：System.AppDomain._nExecuteAssembly 的第 26 行（RuntimeAssembly 程序集，String[] args）在 System.AppDomain。Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly() 在 System.Threading.ThreadHelper.ThreadStart_Context(Object state) 在 System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback 的 ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)在 System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state) 在 System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx) 在 System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state) Threading.ThreadHelper.ThreadStart()ThreadHelper.ThreadStart_Context(Object state) at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx) at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx) at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state) at System.Threading.ThreadHelper.ThreadStart()ThreadHelper.ThreadStart_Context(Object state) at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx) at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx) at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state) at System.Threading.ThreadHelper.ThreadStart()Boolean preserveSyncCtx) at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state) at System.Threading.ThreadHelper.ThreadStart()Boolean preserveSyncCtx) at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state) at System.Threading.ThreadHelper.ThreadStart()

我会很感激任何指导。如果您认为这是 EF 的错误，那么我会报告它。非常感谢

* * *

解决方案：将参数列表创建和 ExecuteSqlCommand 封装到一个内联函数中，然后重新调用它，而不是重新调用 ExecuteSqlCommand。这将确保创建一个新的 SqlParameter 数组。var dc = new SpondleWebContext(); // 派生自 DbContext

```
 Action act = () =>
        {
            var pa = new SqlParameter[]  { new SqlParameter("@Name", SqlDbType.NVarChar) { Value = "test" } };
            dc.Database.ExecuteSqlCommand("spImport @Name", pa);
        };

        try { act(); } catch { }
        act(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T06:41:43.937

我没有在此处安装 EntityFramework，但我非常确定 ExecuteStoreCommand 方法每次都会创建一个新的 DbCommand 对象。您传递的参数集合不是在框架内创建的，而是由多个命令重用。因此你得到了错误。

您必须在第二次调用之前克隆参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T06:25:11.993

不要重用参数，它以某种方式连接到命令，为每次调用重新创建它`ExecuteSqlCommand`

# android - 我的列表视图不滚动

> ID：12257808
> 
> 赞同：-1
> 
> 时间：2012-09-04T06:20:14.873
> 
> 标签：android, listview, android-layout

我想在单击“**保存**”按钮时显示项目列表，但它们不会滚动。 ![在此处输入图像描述](../Images/d81b7e9e1b57675261f80b8fa7783129.png) ![在此处输入图像描述](../Images/48c75157b8cc0a82e4a36cf7a3c8ca56.png)

`ListView`不在此屏幕上滚动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T06:38:15.627

您可以使用此方法将您的 ListView 放入 ScrollView：

```
private void setListViewScrollable(final ListView list) {
        list.setOnTouchListener(new OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                listViewTouchAction = event.getAction();
                if (listViewTouchAction == MotionEvent.ACTION_MOVE)
                {
                    list.scrollBy(0, -1);
                }
                return false;
            }
        });
        list.setOnScrollListener(new OnScrollListener() {
            @Override
            public void onScrollStateChanged(AbsListView view,
                    int scrollState) {
            }

            @Override
            public void onScroll(AbsListView view, int firstVisibleItem,
                    int visibleItemCount, int totalItemCount) {
                if (listViewTouchAction == MotionEvent.ACTION_MOVE)
                {
                    list.scrollBy(0, 1);
                }
            }
        });

    } 
```

在活动中：

```
@Override
    public void onCreate(Bundle savedInstanceState) {
//...
setListViewScrollable(myListView);
} 
```

享受！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T07:11:59.973

```
lisview.setOnTouchListener(new OnTouchListener(){
            public boolean onTouch(View v, MotionEvent event) {
                if(event.getAction() == MotionEvent.ACTION_MOVE){
                    return true;
                }
                return false;
            }
        }); 
```

# android - 两个并行活动上的 Android 活动 startActivity

> ID：12257810
> 
> 赞同：0
> 
> 时间：2012-09-04T06:20:29.483
> 
> 标签：android, android-activity

我有两个相互平行的活动 A 和 B。A可以随时切换到B，反之亦然。我不希望每次调用 startActivity 时都重新创建 A 或 B。到目前为止，我发现实现这一目标的唯一方法是将 A 设置为“singleTask”，将 B 设置为“singleInstance”，但这对我来说似乎是一个巨大的黑客攻击，因为在某处我读到 singleTask 和 singleInstance 不应该出现在相同的应用程序。任何人都可以用正确的方法启发我让两个活动相互启动而不创建任何一个活动的新实例吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T06:26:18.843

使用以下方式启动两个活动：

```
Intent i = new Intent(contexts, AorB.class);
i.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
startActivity(i); 
```

# visual-studio-2012 - Visual Studio 2012 RTM 智能感知：修复“挂起/暂停”？

> ID：12257814
> 
> 赞同：8
> 
> 时间：2012-09-04T06:20:51.863
> 
> 标签：visual-studio-2012

我刚刚在 Windows 7 x64 桌面上安装了 Visual Studio 2012 RTM。

不幸的是，我对开箱即用安装的性能非常失望。每次我尝试在解决方案资源管理器中重命名文件、更改为 MVC cshtml 编辑器、打开设计器视图或开始使用 c# 编辑器键入时弹出智能感知，整个 Visual Studio 应用程序都会挂起 5-10 秒。

此处启用的自定义、插件、扩展不适用于标准安装。

有没有其他人经历过这个？有没有其他人找到一种方法来记录发生的应用程序故障或检测挂起。我需要一些方法来确定出了什么问题，以便确定需要更改哪些内容来纠正安装。

* * *

## 回答 #1

> 赞同：-7
> 
> 时间：2012-09-12T13:33:23.437

问题是您正在消耗系统的更多资源，这导致 VS 处于挂起状态。请关闭使用更多 RAM 的任何其他应用程序。您可以借助任务管理器关闭这些应用程序。请记住，如果您正在运行 SQL 独立数据库实例服务，那么它也会导致手部问题。最好的办法是让您的系统免于运行无用的应用程序或进行系统升级。:-)

# c++ - C++ 中的字符串管理

> ID：12257815
> 
> 赞同：4
> 
> 时间：2012-09-04T06:21:00.320
> 
> 标签：c++, string

在使用 Java 一段时间后，我决定回到 C++，现在我对字符串在 C++ 中的工作方式感到非常困惑。

首先，假设我们有一个函数：

```
void fun() {
   int a = 1;
   Point b(1,2);
   char c[] = "c-string";
} 
```

据我了解，`a`并`b`分配在堆栈上。`c`（指针）也在堆栈上分配，但内容（“c-string”）在堆上愉快地生活。

**Q1：**函数结束`c`时会自动释放内容吗？`fun`

其次，假设我们有一个 c++ `string`：

```
void fun2() {
  (1) string s = "c++ string";
  (2) s += "append";
  (3) s = "new contents";
  (4) s = "a" + s + "c";
} 
```

[字符串文档](http://www.cplusplus.com/reference/string/string/)对字符串的工作方式并不太具体，所以这里有一些问题：

**Q2：**结束后的内容会`s`自动释放`fun2`吗？

**Q3：**当我们连接两个字符串时会发生什么？我应该关心内存使用情况吗？（第 2 行）

**Q4：**当我们覆盖字符串的内容（第 3 行）时会发生什么 - 内存呢，我应该担心吗？最初分配的空间是否被重复使用？

**Q5：**如果我构造一个这样的字符串会怎样（第 4 行）。这个很贵吗？字符串文字 ( `"a"`, `"c"`) 是池化的（就像在 Java 中一样）还是在整个最终可执行文件中重复？

我最终要学习的是如何在 C++ 中正确使用字符串。

感谢您阅读本文，
魁魁格

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T06:26:32.760

> 据我了解， a 和 b 是在堆栈上分配的。c（指针）也在堆栈上分配，但内容（“c-string”）在堆上愉快地存在。

这是错误的，它们都存在于自动内存（堆栈）中。连`char`阵。在 C++ 中，字符串是类型的对象`std::string`。

> Q1：函数fun结束时c的内容会自动释放吗？

是的。

> Q2：fun2结束后s的内容会自动释放吗？

是的。

> Q3：当我们连接两个字符串时会发生什么？我应该关心内存使用情况吗？（第 2 行）

它们是连接在一起的，并且内存是自动管理的。（假设我们在谈论`std::string`而不是`char[]`or `char*`。

> Q4：当我们覆盖字符串的内容（第 3 行）时会发生什么 - 内存呢，我应该担心吗？最初分配的空间是否被重复使用？

实施细节。它可以重复使用，如果以前的内存不能容纳新的内容，它可以重新分配。

> Q5：如果我构造一个这样的字符串会怎样（第 4 行）。这个很贵吗？字符串文字（“a”，“c”）是池化的（就像在 Java 中一样）还是在整个最终可执行文件中重复？

**可以**合并字符串文字，但这不是必需的。对于大型连接，通常使用 a`std::stringstream`代替（类似于 Java）。但是首先要配置文件，不要过早进行优化。并不是说这些都不是字符串文字。

```
char* pStr = "this is a string literal"; 
```

它驻留在只读内存中，无法修改。

> 我最终要学习的是如何在 C++ 中正确使用字符串。

使用`std::string`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-04T06:29:29.530

**`c`不是指针。**它是一个*数组*。你可以说它是一个数组，因为它有方括号，而指针有一个星号。由于`c`是一个自动变量，它不需要任何手动生命周期或内存管理。

广告Q2：`s`也是一个自动变量，因为它是一个精心设计的类类型，这意味着你不需要手动处理任何事情。

广告 Q3：本地字符串对象被适当修改以包含新字符串；在此过程中，在连接表达式期间可能存在也可能不存在临时字符串对象。（这仅适用于第 4 行；第 2 行没有临时性。）

广告 Q4：一切正常，按预期工作；见第二季度。原始内存可能会被使用，也可能不会被使用，这取决于分配的细节。在您的示例中，原始内存可能会被覆盖；在类似的情况下`s = std::string("hello");`，两个字符串的缓冲区可能会被交换。

广告 Q5：字符串字面量是只读的全局常量，编译器可以按照自己喜欢的方式实现。细节不是那么重要；你肯定会`string`在`s`. 请参阅第三季度关于临时对象。

要“学习如何在 C++ 中使用字符串”，只需去使用它们。将它们视为整数。它会是正确的。标准库的美妙之处在于你真的不需要知道“事情是如何工作的”；当您以惯用的 C++ 方式使用标准库类时，所有资源管理都会自动且高效地为您完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T06:26:20.217

Q1：是的，它已被取消分配。字符数组驻留在函数的堆栈中。

Q2：是的，`std::string`负责在销毁时释放其所有资源，这发生在离开范围时，就像对所有自动分配的变量一样。

Q3：不，你不应该担心，除非分析告诉你应该担心。

Q4：您不用担心，原来的空间可能会被重复使用，也可能不会被重复使用。在任何情况下，字符串使用的所有空间都会在退出函数时释放。

Q5：考虑到优化，允许编译器做出确定 X 是否比 Y 更昂贵的唯一方法是分析它们两者。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T06:29:57.503

**Q1**应该注意文字`"c++ string","append","new contents","a","c"`在静态内存中

# visual-studio-2012 - Visual Studio 2012 无法创建项目

> ID：12257817
> 
> 赞同：8
> 
> 时间：2012-09-04T06:21:11.387
> 
> 标签：visual-studio-2012, windows-8

我刚刚从 Windows 7 升级到 Windows 8。Visual Studio 2010 完全崩溃了。那好吧。我删除了 vs2012 并安装了 Visual Studio 2012，这就是痛苦的开始。我一直在重新安装 vs 2012 几次。但是，症状保持不变。当我尝试创建一个新项目时`(FILE -> New -> Project or ctrl + N)`。
它弹出一个错误消息对话框，上面写着
`"Failed to create a ImageSource from the text '..\Images\Medium.png'.`
“我喜欢`@#*%&^@*#@#`（。所以谁能告诉我我的 Visual Studio2012 发生了什么？顺便说一句，我可以毫无问题地打开和运行现有`vs2010`项目。
我绝对不想重新安装`windows 8`也不回滚到我的`windows 7.` 干杯，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T17:36:55.000

为了解决这个问题，我更改了文件上“所有人”的“修改”权限

> c:\windows\microsoft.net\framework\v2.0.50727\config\machine.config

和

> c:\windows\microsoft.net\framework\v4.0.30319\config\machine.config

不知道这是否是最好的方法，但至少它有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-19T13:23:30.580

此问题的痕迹导致 Windows 映像组件（提出的一种解决方案是删除 FastPictureViewer，该编解码器会影响 WIC，但我的情况并非如此）。我使用 procmon 记录了所有文件和注册表调用，发现 VS2012 在以下键处绊倒：

```
HKLM\SOFTWARE\Classes\.png - REG_SZ Content Type 
```

我很惊讶地看到 .png 的内容类型被设置为*应用程序*（对于 .jpg 它也是*应用程序*）。将其更正为 image/png 后，不仅 VS2012 成功启动，而且 VS2010 也在 Win8 上显示“在 System.Windows.Baml2006.TypeConverterMarkupExtension 上提供值引发异常”，并导致我尝试 VS2012。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-17T14:37:23.693

对我来说，这发生在我在我的机器上安装 mysql 时，它在我的机器配置中添加了一个额外的连接字符串。但是，由于我为 configSource 使用了单独的文件，因此导致我的机器配置损坏。

将新的配置键从 32 位机器配置移动到我的配置源解决了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-26T07:42:52.690

我在使用 Visual Studio 13 时遇到了同样的问题。卸载/重新安装 VS13 并且所有共享包都没有解决问题。

最后，我尝试以管理员身份运行它，如上所述并且它有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T05:54:01.297

您的系统上是否安装了任何编解码器包？我有一个用于在资源管理器中查看 RAW 文件的 WIC 编解码器包，它导致了与您描述的相同的问题。卸载编解码器为我修复了 Visual Studio。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-04T21:40:20.223

我遇到了各种问题，包括上述问题。

为了解决 VS 2012 的 Windows 8 上的问题，将其设置为以管理员身份运行解决了我的问题。

```
Launch icon properties->Advanced Properties->Run as administrator 
```

我希望这有帮助。

干杯，肖恩

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-24T01:54:17.820

刚刚发生在我身上。正如 Eric Aubry 所说，检查 machine.config 文件。在我的情况下，这不是权限错误，而是文件在内部被破坏的事实。通过重命名 machine.config.default 一切都已修复。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-09-10T18:11:03.790

正如我在那个[问题](https://stackoverflow.com/questions/32493701/failed-to-create-imagesource-from-the-text-images-medium-png/32508905#32508905)中提到的，

我尝试了几乎所有找到的解决方案。

我想分享一下，我尝试过什么但没有奏效，什么有效并解决了问题。

**以下是对我不起作用**但声称**它们对某些人有效**的“解决方案” 。

1) 删除 FastPictureViewer 编解码器包（尚未安装）

2）对每个人都有修改权限

```
c:\windows\microsoft.net\framework\v2.0.50727\config\machine.config 
```

和

```
c:\windows\microsoft.net\framework\v4.0.30319\config\machine.config 
```

3) 使用[Procmon](https://technet.microsoft.com/en-us/Library/bb896645.aspx)查看损坏的注册表

4）卸载/重新安装VS13和所有共享包

5) 将 machine.config.default 重命名为 machine.config

6) 以管理员身份运行 Visual Studio

**这就是它解决的问题：**

只需安装 Windows 8.1 的所有更新（不仅是重要更新，还有可选更新）并重新启动。花费数小时后听起来很疯狂，但这解决了我的问题。

祝你好运！

# objective-c - 如何取消之前的 Facebook 重新授权通话？

> ID：12257821
> 
> 赞同：12
> 
> 时间：2012-09-04T06:21:36.183
> 
> 标签：objective-c, ios, facebook

一个关于 iOS 版 Facebook SDK 的快速问题。我正在尝试为用户实现授予我的应用程序访问扩展权限的功能。

虽然当用户接受扩展权限请求（从用户被重定向到的 Facebook iOS 应用程序）时代码工作正常，但我无法检测到用户何时返回应用程序而既没有接受权限，也没有单击取消然后返回应用程序。

如果我单击“取消”并将多任务返回应用程序，则不会记录任何内容，屏幕上也不会显示任何内容。当我再次尝试重新授权时，Facebook SDK 会抛出异常：

> FBSession：当先前的重新授权调用尚未完成时，重新授权无效。

虽然我可以捕捉到异常，但它仍然无济于事，因为我不知道如何停止先前的调用以允许用户再次尝试重新授权。

这是我目前正在使用的代码：

```
@try {
    [[FBSession activeSession] reauthorizeWithPermissions:[self requiredPermissions]
                                             behavior:FBSessionLoginBehaviorWithFallbackToWebView
                                    completionHandler:^(FBSession *session, NSError *error) {
        if (!error) {
            [self fetchUserPermissionsWithCompletionHandler:^(BOOL extendedGranted) {
                if (extendedGranted) {
                    [self setCanPostToActivityStream:YES];
                }
            }];
        }
        else {
            NSLog(@"%@", [error localizedDescription]);
        }
    }];
}
@catch (NSException *exception) {
    NSLog(@"%@", exception);
} 
```

现在，问题不在于上面的代码 - 代码工作正常。我再次遇到的问题是，当用户在允许权限后没有成功返回应用程序时，取消**之前**的重新授权调用。Facebook SDK 本身似乎并没有以任何方式提醒应用程序这种情况。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-08T13:14:47.057

从您的应用程序的委托中，当`- (void)applicationDidBecomeActive:(UIApplication*)application`被调用时，您需要调用活动会话的`handleDidBecomeActive`方法。一旦你这样做了，与你的`reauthorizeWithPublishPermissions`调用关联的完成处理程序将被调用，并提供适当的错误。

```
- (void)applicationDidBecomeActive:(UIApplication*)application
{
    [[FBSession activeSession] handleDidBecomeActive];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T04:22:40.617

您应该看到从 SDK 返回的是来自重新授权完成处理程序的错误。

```
{
    "com.facebook.sdk:ErrorLoginFailedReason" = "com.facebook.sdk:ErrorReauthorizeFailedReasonUserCancelled";
} 
```

我使用以下设置测试了类似的东西：Xcode 4.5、iOS 5、针对 m.facebook.com 授权。初始授权后，我输入代码以重新授权，然后单击取消并收到此错误。

```
 [FBSession.activeSession
     reauthorizeWithPublishPermissions:
     [NSArray arrayWithObject:@"publish_actions"]
     defaultAudience:FBSessionDefaultAudienceFriends
     completionHandler:^(FBSession *session, NSError *error) {
        if (!error) {
            // Success case
        } else {
            // Check the error, info
            // [[error userInfo] objectForKey:@"com.facebook.sdk:ErrorLoginFailedReason"]
        }
    }]; 
```

如果您没有看到这个，那么这是一个错误，您可能需要将其提交给 Facebook。

# c# - 如何获取 SQLCe sdf 数据库语言环境标识符？

> ID：12257823
> 
> 赞同：1
> 
> 时间：2012-09-04T06:21:46.713
> 
> 标签：c#, windows-mobile, compact-framework, sql-server-ce

我正在尝试使用如下连接字符串读取数据库：

> "数据源 = '" + _SourceDirectory + "'; LCID=SomeLocale"

我的问题是，当我尝试连接到从 Windows Mobile 设备复制的 SDF 数据库时，我收到不支持区域设置 ID 的错误（当我未指定时为 -1）。我需要能够打开数据库并从中读取。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T07:18:40.370

好的，我“修复”了这个问题，SDF 文件可能已经损坏，因为我从设备中抓取了一个新文件后它可以正常工作。

# sql - 比较 sqlserver 中的两个列并返回剩余数据

> ID：12257826
> 
> 赞同：0
> 
> 时间：2012-09-04T06:22:12.237
> 
> 标签：sql, sql-server

我有两张桌子。第一个是学生表，他可以选择两门选修课，另一个表是当前学期的选修课列表。

每当学生选择一门课程时，都会插入行，其中包含基本详细信息，例如卷号、插入时间、所选课程和状态为“1”。当取消选择所选课程时，该行的状态设置为“0”。

假设学生选择了课程 ID 1 和 2。

现在使用这个查询

```
select SselectedCourse AS [text()] FROM  Sample.dbo.Tbl_student_details where var_rollnumber = '020803009' and status = 1 order by var_courseselectedtime desc FOR XML PATH('') 
```

这会给我结果为“12”，其中 1 是物理，2 是社会。

第二个表包含 1-9 的值 例如 course id

```
1 = physics
2 = social
3 = chemistry
4 = geography
5 = computer
6 = Spoken Hindi
7 = Spoken English
8 = B.EEE
9 = B.ECE 
```

现在当前学生选择了 1 和 2。所以在第一列，我得到“12”，第二列我需要得到“3456789”（剩余课程）。如何为此编写查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T12:42:55.100

这不是单个查询，但很简单。

* * *

```
DECLARE @STUDENT AS TABLE(ID INT, COURSEID INT)
DECLARE @SEM AS TABLE (COURSEID INT, COURSE VARCHAR(100))

INSERT INTO @STUDENT VALUES(1, 1)

INSERT INTO @STUDENT VALUES(1, 2)

INSERT INTO @SEM VALUES(1, 'physics')

INSERT INTO @SEM VALUES(2, 'social')

INSERT INTO @SEM VALUES(3, 'chemistry')

INSERT INTO @SEM VALUES(4, 'geography')

INSERT INTO @SEM VALUES(5, 'computer')

INSERT INTO @SEM VALUES(6, 'Spoken Hindi')

INSERT INTO @SEM VALUES(7, 'Spoken English')

INSERT INTO @SEM VALUES(8, 'B.EEE')

INSERT INTO @SEM VALUES(9, 'B.ECE')

DECLARE @COURSEIDS_STUDENT VARCHAR(100), @COURSEIDS_SEM  VARCHAR(100)

SELECT @COURSEIDS_STUDENT = COALESCE(@COURSEIDS_STUDENT, '') + CONVERT(VARCHAR(10), COURSEID) + ' ' FROM @STUDENT

SELECT @COURSEIDS_SEM = COALESCE(@COURSEIDS_SEM , '') + CONVERT(VARCHAR(10), COURSEID) + ' ' FROM @SEM WHERE COURSEID NOT IN (SELECT COURSEID FROM @STUDENT)

SELECT @COURSEIDS_STUDENT COURSEIDS_STUDENT, @COURSEIDS_SEM COURSEIDS_SEM 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T07:09:59.137

尝试这个：

```
;WITH CTE as (select ROW_NUMBER() over (order by (select 0)) as rn,* from Sample.dbo.Tbl_student_details)

,CTE1 As(
select rn,SselectedCourse ,replace(stuff((select ''+courseid  from course_details for xml path('')),1,1,''),SselectedCourse,'') as rem from CTE a 
where rn = 1
union all
select c2.rn,c2.SselectedCourse,replace(rem,c2.SselectedCourse,'') as rem 
from CTE1 c1 inner join CTE c2
on c2.rn=c1.rn+1

)

select STUFF((select ''+SselectedCourse from CTE1 for xml path('')),1,0,''),(select top 1 rem from CTE1 order by rn desc) 
```

# php - 生成输出格式的文件的原始预览

> ID：12257829
> 
> 赞同：0
> 
> 时间：2012-09-04T06:22:27.133
> 
> 标签：php

在我的应用程序中构建`Raw`文本视图，就像 pastebin 一样：

[http://pastebin.com/raw.php?i=nfVT7b0Z](http://pastebin.com/raw.php?i=nfVT7b0Z)

因此，我编写了只是回显 的脚本`$contents`，但没有继续执行换行符、空格和制表符。查看上面的 pastebin 源代码，您会注意到它们不会将文本包装在任何 HTML 标记中，例如`<pre>`. 那么他们如何让文本格式化？

他们是否使用了一些特殊的标题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T06:28:32.017

您看到的内容不是 HTML。是文字。您可以使用以下标头来实现与 php.ini 发送的输出相同的结果。

```
Content-Type: text/plain; charset=utf-8 
```

**例子：**

```
<?php
header('Content-Type: text/plain; charset=utf-8');
echo "First Line\nSecond Line";
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T06:31:06.067

卷曲是我在这里的朋友。我在响应中注意到这个标题：

```
Content-Type: text/plain; charset=utf-8 
```

所以只需这样做：

```
 header("Content-Type: text/plain; charset=utf-8"); 
```

在输出任何文本之前。

# ruby-on-rails - Ruby 调试器安装错误

> ID：12257830
> 
> 赞同：1
> 
> 时间：2012-09-04T06:22:43.663
> 
> 标签：ruby-on-rails, ruby, debugging

安装 ruby​​ 调试器时出现以下错误

在我添加的 gemfile

```
 gem 'ruby-debug19', :require => 'ruby-debug' 
```

并运行

```
 bundle install

Installing linecache19 (0.5.12) with native extensions
   Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.
   /usr/local/bin/ruby extconf.rb
   checking for vm_core.h... no
   checking for vm_core.h... no
   *** extconf.rb failed ***
   Could not create Makefile due to some reason, probably lack of
   necessary libraries and/or headers.  Check the mkmf.log file for more
   details.  You may need configuration options.
   Provided configuration options:
   --with-opt-dir
   --without-opt-dir
   --with-opt-include
   --without-opt-include=${opt-dir}/include
   --with-opt-lib
   --without-opt-lib=${opt-dir}/lib
   --with-make-prog
   --without-make-prog
   --srcdir=.
   --curdir
   --ruby=/usr/local/bin/ruby
   --with-ruby-dir
   --without-ruby-dir
   --with-ruby-include
   --without-ruby-include=${ruby-dir}/include
   --with-ruby-lib
   --without-ruby-lib=${ruby-dir}/lib 
```

错误的原因是什么

如何安装调试器..???

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T06:12:49.943

您必须首先在环境变量**中设置 DevKit 的路径**

然后运行

```
gem install linecache19
gem install ruby-debug-base19
gem install ruby-debug-ide 
```

通过命令提示符

愿这项工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T06:29:18.453

“在 Ubuntu 上，本机编译步骤会下载 ruby​​ 1.9.2 源代码并尝试将其解压缩到您当前用户*可能*没有写入权限的目录中。” - 达伦（参考：http: [//isitruby19.com/linecache19](http://isitruby19.com/linecache19)）

在这种情况下，请尝试`sudo bundle install`.

* * *

如果问题是它无法解决`vm_core.h`文件依赖关系，您可以使用特定版本和 ruby​​ 源的路径运行安装：

```
sudo -E gem install linecache19 -v=0.5.11 -- --with-ruby-include=path_to/ruby-1.9.1-p378/
sudo -E gem install ruby-debug-base19 -v=0.11.23 -- --with-ruby-include=path_to/ruby-1.9.1-p378/
sudo -E gem install ruby-debug-ide -v=0.4.9 -- --with-ruby-include=path_to/ruby-1.9.1-p378/ 
```

参考：http: [//isitruby19.com/linecache19](http://isitruby19.com/linecache19)

请注意，将 , 替换`path_to/ruby-1.9.1-p378/`为您安装 ruby​​ 的路径。

要找出安装 ruby​​ 的位置，请尝试运行：

```
which ruby 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T06:34:31.297

从 RVM 网站：

如果您在安装 ruby​​-debug19 时遇到问题，请尝试使用以下命令进行安装：

```
$ rvm reinstall 1.9.3 --patch debug --force-autoconf
$ gem install ruby-debug19 -- --with-ruby-include="${MY_RUBY_HOME/rubies/src}" 
```

# tcp - 我可以直接操纵 Internet 协议来重塑 TCP 吗？

> ID：12257832
> 
> 赞同：0
> 
> 时间：2012-09-04T06:23:01.393
> 
> 标签：tcp, ip

我对 TCP 的一些算法不满意，我知道[在 UDP 中实现 TCP 是不可能的](https://stackoverflow.com/questions/10680592/can-tcp-be-implemented-via-udp)。但我想与其他依赖传统 TCP 的服务器建立兼容层。

所以我问，我可以直接在 Linux 或其他 *nix 操作系统上操作 IP 吗？

我知道[udt](http://udt.sourceforge.net/)和其他类似的项目。我只需要保持兼容性，这样我就不需要为这么多的服务器做太多的工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:31:05.353

如果您想与其他实现标准 TCP 的端点保持兼容，那么我假设您想在线上使用相同的协议并对其进行增量改进。

您的内核现有的 TCP 实现在内核中。如果你想改进它，我会说你最好在那里做出改变而不是重新发明它。如果你想重新发明它并在用户空间中实现一个完整的 TCP 堆栈，那么，当然，你可以做到，但这将是很多工作。

# css - 悬停时带有单行的 CSS 网格

> ID：12257837
> 
> 赞同：2
> 
> 时间：2012-09-04T06:23:40.257
> 
> 标签：css, grid, hover, border, margin

我在[http://jsfiddle.net/TsRJy/](http://jsfiddle.net/TsRJy/)上创建了一个带有 div 框的网格。

**问题**

我不知道如何使 a:hover 工作。

**信息**

*   将 HTML 代码重写为表格对我来说不是一个选项。
*   [http://www.normann-copenhagen.com/Products](http://www.normann-copenhagen.com/Products)成功解决了这个问题。
*   在 Javascript 之前，我更喜欢 CSS。

**HTML（以防 jsfiddle 不起作用）**

```
<div class="container">
    <div class="grid">
        <div class="item">
            <a href="#">
            </a>
        </div>
        <div class="item">
            <a href="#">
            </a>
        </div>
        <div class="item">
            <a href="#">
            </a>
        </div>
        <div class="item">
            <a href="#">
            </a>
        </div>
        <div class="item">
            <a href="#">
            </a>
        </div>
        <div class="item">
            <a href="#">
            </a>
        </div>
        <div class="item">
            <a href="#">
            </a>
        </div>
    </div>
</div> 
```

**CSS**

```
.container {
    margin: 0 auto;
    width: 500px;
}

.item {
    border: 1px solid #ccc;
    float: left;
    margin: 0 -1px -1px 0;
}

.item a {
    display: block;
    height: 100px;
    width: 100px;
    background: #f5f5f5;
}
.item a:hover {
    border: 1px solid black;
}​
​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T06:28:06.430

您可以为此使用**box-sizing**属性。像这样写：

```
.item a:hover {
    border: 1px solid black;
    -moz-box-sizing:border-box;
    -webkit-box-sizing:border-box;
    box-sizing:border-box;
} 
```

检查这个[http://jsfiddle.net/TsRJy/1/](http://jsfiddle.net/TsRJy/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T06:33:38.743

由于您已放置边框，因此悬停效果无法正常工作。

```
.item a:hover {
    box-shadow: 2px 2px 2px #333;
    background-color:Teal
}​ 
```

看看这个[小提琴](http://jsfiddle.net/TsRJy/2/)

这里还有一个有用的[链接](http://css-tricks.com/examples/InnerBorderImages/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T06:38:49.127

另一种方法是，将边框颜色设置为与框的背景颜色相同的颜色，并在悬停时将其更改为黑色：

```
.item a {
    display: block;
    height: 100px;
    width: 100px;
    background: #f5f5f5;
    border: 1px solid #f5f5f5;
}
.item a:hover {
    border-color: black;
}​ 
```

演示：http: [//jsfiddle.net/TrXT9/1/](http://jsfiddle.net/TrXT9/1/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T06:50:50.240

我看到您的包装器的宽度为 500 像素。如果你制作一个宽度为 100px、边框为 1px、margin-right 为 -1px 的 div，则该 div 仍然是 101px。

`box-sizing:border-box`是解决这个问题的好方法，但在 IE7 中不支持

如果你想要支持 IE7，你需要像这样调整你的宽度和高度：http:
[//jsfiddle.net/TsRJy/5/](http://jsfiddle.net/TsRJy/5/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-04T08:49:33.837

试试这个，只是css的微小变化

```
.container {
    margin: 0 auto;
    width: 500px;
}

.item { float: left; }

.item a {
    display: block;
    height: 99px;
    width: 99px;
    background: #f5f5f5;
    border: solid 1px #d6d6d6;
    border-width: 0 1px 1px 0;
}

.item a:hover {
    border: solid 1px #f00;
    margin: -1px 0 0 -1px;
} 
```

[http://jsfiddle.net/GtR3P/](http://jsfiddle.net/GtR3P/)

为了获得更准确的结果，试试这个也希望这个能解决你的问题

```
.container {
    margin: 0 auto;
    width: 506px;
}

.item { float: left; }

.item a {
    display: block;
    height: 100px;
    width: 100px;
    background: #f5f5f5;
    border: solid 1px #d6d6d6;
    border-width: 0 1px 1px 0;
}

.item a:hover {
    border: solid 1px #f00;
    margin: -1px 0 0 -1px;
}

.grid .item:nth-child(5n+1) a { border-left-width:1px; }

.grid .item:nth-child(5n+1) a:hover { margin:-1px 0 0 0; } 
```

# php - 如何在父目录中创建文件夹？

> ID：12257845
> 
> 赞同：0
> 
> 时间：2012-09-04T06:24:14.240
> 
> 标签：php, mkdir

我的 php 脚本位于**`/var/www/html/users/dev`**. 我需要在其中创建一个文件夹**`/var/www/images/`**- 类似于`/var/www/images/test/test/`并在此处存储一些图像。

但是当我尝试在`mkdir($file_dir, 0777);`哪里`$file_dir`时，**`/var/www/images/test/test/`**我收到一个错误：

> 警告：mkdir()：/var/www/html/users/dev/classes/sites.class.php 中没有这样的文件或目录...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T06:29:00.563

因为`"/var/www/images/test"`不存在，所以不能`mkdir("/var/www/images/test/test")`

您可以指定`"$recursive"`to `TRUE`，它将起作用，如下所示：

`mkdir($file_dir, 0777, TRUE);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T06:33:08.370

如果是 Linux，您已经设置了对父目录 1st 的权限。

```
sudo chmod -R 777 /path of ur directory. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T06:30:33.687

尝试

```
mkdir($file_dir, 0777, true); 
```

第三个参数（'recursive'）允许您指定将创建所有目录的路径。如果不这样做，则只会创建最后一个目录（'test'），并且之前的整个路径必须存在。

[PHP 文档](http://php.net/manual/en/function.mkdir.php)对此非常清楚。

# .net - WinForms 应用程序 GUI 更新（WPF、WEB）

> ID：12257847
> 
> 赞同：0
> 
> 时间：2012-09-04T06:24:22.867
> 
> 标签：.net, wpf, winforms, user-interface, optimization

我正在开发中型 WinForms ERP 解决方案。最近有人提出了一个问题，即我们将整个 GUI 从 WinForms 更改为 WPF（例如）需要多长时间。

我看到的问题之一是我们的表单还包含业务代码，这意味着除了设计更新和事件处理之外，我们还需要重写一些业务逻辑。

我想看看究竟有多少表单包含业务代码，但是手动检查每个表单的想法似乎不太吸引人。

关于如何更优雅地完成此操作的任何建议？（任何工具，使用图表？）

任何其他关于此 GUI 更新的想法、提示和提示将不胜感激。

谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T06:52:46.700

根据您的应用程序 UI 复杂性，这可能会很困难，因为学习 WPF 并不像 winforms 那样容易。MVVM 通常更喜欢保持业务逻辑和 UI 分开。

例如，在我的项目中，我将业务逻辑与 UI 分开，我可以非常轻松地切换它们，而无需任何重写（UI）。那是 MVVM :)

# asp.net - asp.net 中正则表达式中使用的字母数字代码

> ID：12257852
> 
> 赞同：4
> 
> 时间：2012-09-04T06:24:39.450
> 
> 标签：asp.net

我需要字母数字的代码，它在 asp.net 的正则表达式中用于在文本框中输入数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T06:34:13.673

字母数字的正则表达式：
`"^[a-zA-Z0-9]*$"`
如果您不想要空字符串，请使用 + 而不是 *。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T06:34:43.543

我想下面应该足够了。

```
^[0-9A-Za-z]*$ 
```

这是分解

```
^ indicates start of the string
0-9 all number from 0 to 9
A-Z all Upper case character
a-z all small case character
* indicates 0 or more character
$ end of string 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T06:33:21.187

使用这个`ValidationExpression="^[a-zA-Z0-9.@]{0,25}$"`。它也接受`.`和`@`象征。如果不删除它们

```
<asp:RegularExpressionValidator id="RegularExpressionValidator1" runat="server" ControlToValidate="TextBox1" ValidationExpression="^[a-zA-Z0-9.@]{0,25}$" ErrorMessage="Only Alphanumeric"></asp:RegularExpressionValidator> 
```

# c# - 在对象列表中搜索非空属性

> ID：12257854
> 
> 赞同：0
> 
> 时间：2012-09-04T06:24:42.217
> 
> 标签：c#, linq

我正在搜索某个属性的对象列表。我正在为很多属性重复此代码，因此我试图使属性的读取尽可能紧凑。

这是我目前拥有的：

```
value = ReadValue(p => p.ProductCatalogId != 0, p => p.ProductCatalogId);

public T ReadValue<T>(Func<MyType, bool> predicate, Func<MyType, T> selector)
{
    return m_settingsPages.Where(predicate).Select(selector).FirstOrDefault();
} 
```

我总是比较类型的默认值，并且总是比较不等式。我想删除谓词参数。我可以使用部分应用程序或类似的技术来摆脱谓词参数吗？

伪代码：

```
value = ReadFirstValue(p => p.ProductCatalogId);

public T ReadFirstValue<T>(Func<MyType, T> selector) where T : IEquatable<T>
{
    var predicate = selectorToPredicate(selector); //Compare with default(T) for non equality
    return m_settingsPages.Where(predicate).Select(selector).FirstOrDefault();
} 
```

selectorToPredicate 的外观如何，我该如何称呼它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T06:30:04.150

听起来你可以做一些简单的事情：

```
Func<MyType, bool> SelectorToPredicate<T>(Func<MyType, T> selector)
{
    EqualityComparer<T> comparer = EqualityComparer<T>.Default;
    return x => !comparer.Equals(selector(x), default(T));
} 
```

需要注意的一件事 - 如果您的属性是字符串属性，这*将*返回空字符串。那是你要的吗？

# svn - 用户锁定了 Sparx EA 中的版本控制包。如何打破锁定以允许用户编辑包？

> ID：12257855
> 
> 赞同：1
> 
> 时间：2012-09-04T06:24:49.153
> 
> 标签：svn, enterprise-architect

我已经在我的公司推出了 EA。我在使用 svn 存储库进行团队编辑时遇到问题。其中一位用户在周五检查了一家分店，但在周末发生了事故，几天内无法使用。我确信这是一个非常常见的场景。因为我是 EA 管理员而不是 svn 管理员，所以我们被锁定在签出分支之外。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-07T07:48:02.577

1.  使用上下文菜单“包控制>文件属性”...获取锁定文件的名称
2.  在本地 SVN 中找到此文件
3.  使用 SVN 上下文菜单，“SVN Get Lock”，选中“Steal the locks”选项
4.  然后你可以通过“释放锁...”释放SVN中的锁或直接使用EA等检查。

也许更好的做法：

1.  EA：使用上下文菜单“包控制>文件属性”...获取锁定文件的名称
2.  在本地 SVN 中找到此文件
3.  SVN：使用 SVN 上下文菜单，“SVN Get Lock”，选中“Steal the locks”选项
4.  EA：使用上下文菜单“Package control > Re-synch Status With VC Provider”，然后您可以使用 Check in EA

注意：我使用的是 Tortoise SVN。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T08:25:30.563

如果“锁定”是指“结帐”（“锁定”在 EA 中具有不同的含义），那么您不能。EA 管理员无法为其他用户签入或撤消签出。这是因为这些操作需要您登录到版本控制存储库。

如果您确定可以安全地覆盖用户在其签出版本中所做的任何更改，解决方法是关闭包的版本控制或制作副本并将其作为单独的版本控制包签入。

如果您这样做，请非常小心地先进行备份，因为当第一个用户返回时很可能会出现问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T12:31:35.030

锁定的包在 --> 项目 --> 安全 --> 管理锁中是否可见？

它是组锁定的或用户锁定的。作为管理员，您可以解锁软件包..

# apache - 要求我的 bash 跳过 ssl 检查

> ID：12257856
> 
> 赞同：0
> 
> 时间：2012-09-04T06:24:50.903
> 
> 标签：apache, bash, ubuntu, ssl

我有一台机器，其中正在运行 apache。我将 apache 配置为从 location 获取 ssl 证书`/ssl`。我可以访问我的网站`www.batman.com`，并且我的浏览器中没有 ssl 错误。

但是当我尝试时：

```
wget localhost 
```

我得到一个巨大的错误：

```
ERROR: no certificate subject alternative name matches
    requested host name `localhost'.
To connect to localhost insecurely, use `--no-check-certificate'. 
```

我知道我的 ssl 证书与名称不匹配`localhost`。但我的问题是我正在运行从[这里](http://exchange.nagios.org/directory/Plugins/Web-Servers/Apache/check_apache2-2Esh/details)下载的脚本。

当我运行时：

```
./check_apache2.sh -H localhost -P 8443 
```

我收到一个错误：

```
(standard_in) 2: syntax error
OK - Apache serves  Requests per second with an average CPU utilization of 0.5%. Busy workers: , idle:  | 'cpu_load'=0.5 'req_psec'= 'bytes_psec'= 'bytes_preq'= 'workers_busy'= 'workers_idle'= 
```

我猜这个错误是由于 ssl 证书的原因。

有没有办法说我的脚本不做 ssl 证书检查与`wget`提供的相同`no-check-certificate`？

我是 bash 的新手。请帮助

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T06:35:09.330

尝试：

```
./check_apache2.sh -H localhost -P 8443 -S 
```

根据文档，`-S`执行 https 并使用`--no-check-certificate`标志调用 wget。

# python - python latin2 到非 ISO 扩展 ASCII 文本

> ID：12257861
> 
> 赞同：0
> 
> 时间：2012-09-04T06:25:13.413
> 
> 标签：python, unicode, ascii, codepages

嗨，我从 web 编写脚本 prasing 文本，我的 otput 文件必须是非 ISO 扩展 ASCII 文本，带有 CRLF、LF 行终止符我如何将文件写入此代码页？

```
def save_file(potoczek,  nazwapliku):
    file = open(nazwapliku,"w")
    file.write(potoczek)
    file.close()
        return()
#...
t1='"'+tab[0]+'\"\n'+naglowek+wykli(zawartosc0).encode('latin2')
t2='"'+tab[1]+'\"\n'+naglowek+wykli(zawartosc1).encode('latin2')
t3='"'+tab[2]+'\"\n'+naglowek+wykli(zawartosc2).encode('latin2')
t4='"'+tab[3]+'\"\n'+naglowek+wykli(zawartosc3).encode('latin2')

TRAKTOR = t1+t2+t3+t4

print udata
save_file(TRAKTOR,PLIK_SCIEZKA) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T06:50:17.983

这种情况下的一般规则是“在内部使用 Unicode；在 I/O 边界进行编码”——您也可以轻松地将这一理念扩展到行尾。

```
import io # for Python 2.6+; not needed in Python 3

def save_file(potoczek,  nazwapliku): # data, filename
    file = io.open(nazwapliku, mode="w", newline="\r\n") # in Python 3, just "open"
    file.write(potoczek.encode('latin2'))
    file.close()
    return() 
```

然后只需将您的数据构建为常规的 unicode 字符串，由标准换行符 ( `\n`) 分隔，save_file 函数将负责所需的翻译。

# html - 黑莓 phonegap 应用程序不支持低版本？

> ID：12257862
> 
> 赞同：0
> 
> 时间：2012-09-04T06:25:14.757
> 
> 标签：html, cordova

我是黑莓 phonegap 应用程序的新手，我开发了 blackberry phonegap 应用程序，它在 5.0 版的黑莓曲线 8520 中运行良好，但在较低版本 4..0 中无法运行。请帮我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T06:51:13.000

根据[文档](http://docs.phonegap.com/en/2.0.0/guide_getting-started_blackberry_index.md.html#Getting%20Started%20with%20Blackberry)：

> 用于 BlackBerry 的 Cordova 使用 BlackBerry WebWorks 框架。BlackBerry WebWorks 工具可用于 Windows 或 Mac 环境。**WebWorks 应用程序只能部署到运行 OS 5.0 或更高版本的 BlackBerry 设备或 BlackBerry PlayBook 操作系统。**

# r - 将列表中的数据框导出为 Excel 文件中的工作表

> ID：12257865
> 
> 赞同：2
> 
> 时间：2012-09-04T06:25:52.553
> 
> 标签：r, dataframe

应该是一个简单的任务，但我到目前为止无法找到如何。

**样本数据：**

```
var1 <- list('2003' = 1:3, '2004' = c(4:3), '2005' = c(6,4,1), '2006' = 1:4 ) 
```

**不成功的代码：**

```
library("XLConnect")
wb <- loadWorkbook("var1.xlsx", create = TRUE)
wb <- lapply(var1, function(x) {createSheet(wb, name = x)})
saveWorkbook(wb) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T06:59:43.140

@Andrie 答案的更简洁版本，因为 XLConnect API 是矢量化的：

```
wb <- loadWorkbook("var1.xlsx", create = TRUE)
createSheet(wb, names(var1))
writeWorksheet(wb, var1, names(var1),header=FALSE)
saveWorkbook(wb) 
```

# android - 弹出窗口的事件方法未触发

> ID：12257867
> 
> 赞同：2
> 
> 时间：2012-09-04T06:26:18.573
> 
> 标签：android

当我单击缩略图时，会打开一个弹出窗口。我想在`onTouch`方法中解除它，但问题是该`onTouch`方法没有被调用。那么我怎样才能让它运行呢？如何关闭弹出窗口？

我的代码是：

```
public void onItemImageClicked(View view)
{
    LinearLayout layout = (LinearLayout)     getLayoutInflater().inflate(R.layout.popup,null); 
    ImageView fullSizeImg = (ImageView) layout.findViewById(R.id.fullSizeImage);
    fullSizeImg.setImageBitmap(bitmap);
    fullSizeImg.setFocusable(false);
    Display display = getWindowManager().getDefaultDisplay(); 
    int deviceWidth = display.getWidth()-40; 
    int deviceHeight = display.getHeight()-70; 
    popupWindow = new PopupWindow(layout, deviceWidth, deviceHeight, true);
    // display the popup in the center
    popupWindow.showAtLocation(layout, Gravity.CENTER, 0, 0);
    popupWindow.getMaxAvailableHeight(new View(this));
    popupWindow.setFocusable(true);
    popupWindow.setTouchInterceptor(new View.OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            // TODO Auto-generated method stub
            popupWindow.dismiss();
            return false;
        }
    });
    popupWindow.setTouchable(true);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T07:48:50.443

试试这个

```
 View popupView = globalconstant.layoutInflater.inflate(R.layout.popup, null);  
                popupWindow = new PopupWindow(popupView,globalconstant.displayWidth-20,480,true);
                popupWindow.setOutsideTouchable(true);
                popupWindow.setBackgroundDrawable(new BitmapDrawable()); 
```

和`onClickEvent`

```
popupWindow.showAtLocation(v, Gravity.CENTER, 0, 15); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-22T02:52:18.510

```
private void initPopupWindow() {  
// TODO Auto-generated method stub  

View view = getLayoutInflater().inflate(R.layout.main_choice, null);  

ListView main_menu_listview = (ListView) view.findViewById(R.id.main_menu_listview);  

ShowMainChoice madapter = new ShowMainChoice(context);
main_menu_listview.setAdapter(madapter);

int width = (int)getWindowManager().getDefaultDisplay().getWidth()/2;
popupWindow = new PopupWindow(view, width,WindowManager.LayoutParams.WRAP_CONTENT);  
popupWindow.setBackgroundDrawable(new BitmapDrawable());//this is important，如果缺少这句将导致其他任何控件及监听都得不到响应
popupWindow.setOutsideTouchable(true);
popupWindow.setFocusable(true);

main_menu_listview.setOnItemClickListener(new OnItemClickListener() {

    @Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,long arg3) {
        // TODO Auto-generated method stub

        Log.e("++++++>", arg2+"");

    }
}); 
```

}

> 这个问题是popupwindow的消息机制决定的，因为它是阻尼式的。是因为弹出窗口不响应onTouch或onKey事件，除非它的背景是!= null。查看我编写的一些代码来帮助解决这个问题。在基本情况下，您可以调用 PopupWindow#setBackgroundDrawable(new BitmapDrawable()) 来强制它按照您期望的方式运行。您不需要自己的 onKey 侦听器。如果您希望它在用户单击窗口边界之外时消失，您可能还需要调用 PopupWindow#setOutsideTouchable(true)。

这是[链接](https://stackoverflow.com/questions/3121232/android-popup-window-dismissal)，祝你好运！

# mysql - mysql在多行中搜索

> ID：12257872
> 
> 赞同：0
> 
> 时间：2012-09-04T06:26:40.617
> 
> 标签：mysql, search

**问：**如何在多行中进行mysql查询搜索

我要进行脚本搜索的是：

```
if kat_preces_params.params_id is equal to 124 AND kat_preces_params.nosaukums is  LIKE '%$make%',

AND if kat_preces_params.params_id is equal to 125 AND kat_preces_params.nosaukums is LIKE '%$model%' 

AND IF kat_preces_params.params_id is equal to 126 AND kat_preces_params.nosaukums <=2009 AND kat_preces_params.nosaukums >=2000 
```

**我是如何尝试的（我知道这是错误的，因为它没有显示正确的值......）：**

PHP检查年份：

```
if($year == '2010 - ...'){
    $gads = 'kat_preces_params.nosaukums <=2010';
}
elseif($year == '2000 - 2009'){
    $gads = 'kat_preces_params.nosaukums <=2009 AND kat_preces_params.nosaukums >=2000';
}
elseif($year == '2000 - 2004'){
    $gads = "kat_preces_params.nosaukums <=2004 AND kat_preces_params.nosaukums >= 2000";
}
elseif($year == '... - 1999'){
    $gads = "kat_preces_params.nosaukums <=1991";

} 
```

而且我有一个如下所示的 mysql 查询：

```
SELECT kat_prece.*, kat_preces_params.* FROM kat_prece, kat_preces_params WHERE pamat_kat_sad = '$cat_mod_id' 
AND kat_prece.preces_id = kat_preces_params.preces_id 
AND ((
    kat_preces_params.params_id=124 
    AND kat_preces_params.nosaukums LIKE '%$make%'
    ) 
    || (
        kat_preces_params.params_id=125 
        AND kat_preces_params.nosaukums LIKE '%$model%'
        ) 
    AND kat_preces_params.params_id=126 
    AND $gads
    ) 
```

`$model`并且`$make`是请求值

也许有可能`INNER JOIN`或以某种方式（对内部连接一无所知）？

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T06:37:39.800

*   `$gads`将定义更改为：`kat_preces_params.nosaukums BETWEEN 2000 AND 2009`等等。
*   从您的第一组先决条件开始，我认为您需要的是：`kat_preces_params.params_id IN (124, 125, 126) AND kat_preces_params.nosaukums LIKE '%$make%' OR kat_preces_params.nosaukums LIKE '%$model%'`.

我不明白的是，`kat_preces_params.nosaukums`您曾经将它们比较为**INTEGER**和另一次比较为**STRINGS**的地方有什么类型的数据。

# mysql - 使用 PHP 搜索 MySQL 数据库

> ID：12257877
> 
> 赞同：0
> 
> 时间：2012-09-04T06:27:03.837
> 
> 标签：mysql, codeigniter

我使用 CodeIgniter + MySQL。

我成功地运行了这个查询并解析了结果。

```
$var1 = $this->db->query("select title from stores where title like \"" . $str . "%\" union select title from coupons where title like \"" . $str . "%\"");
return $var1; 
```

在控制器中，我`result()`将此查询解析为 JSON 文件，使用`json_encode`

但是当我在另一个表上运行相同的查询并按照相同的解析步骤进行解析时，我遇到了解析问题。

```
$var1 = $this->db->query("select tagword from tags where tagword like \"" . $str ."%\""); 
```

我在这里做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T07:04:22.130

尝试回显您的 SQL 语句

```
echo  $this->db->last_query(); 
```

然后尝试在您的数据库上运行 SQL 查询/查询以进行调试

# mysql - MySQL - 修复多条记录

> ID：12257878
> 
> 赞同：1
> 
> 时间：2012-09-04T06:27:18.167
> 
> 标签：mysql

```
SELECT cf.FK_collection, c.collectionName,
  uf.FK_userMe, uf.FK_userYou,
  u.userId, u.username
FROM userFollows as uf
INNER JOIN collectionFollows as cf ON uf.FK_userMe = cf.FK_user
INNER JOIN collections as c ON cf.FK_collection = c.collectionId
INNER JOIN users as u ON uf.FK_userYou = u.userId
WHERE uf.FK_userMe = 2 
```

大家好。

我正在尝试进行此查询，它当然不会按我的意愿执行，因为它返回多行，这在某种程度上是我想要的，但事实并非如此。让我试着解释一下：

我试图同时获取 collectionFollows 和 userFollows，以显示网站上的用户活动。但是这样做时，即使用户只关注 1，我也会从 userFollows 获得多行。发生这种情况是因为我关注了多个 collectionFollows。

所以当我显示我的结果时，它会像这样返回：

```
John is following 'webdesign'
John is following 'Lisa'
John is following 'programming'
John is following 'Lisa' 
```

我想知道我是否必须进行多个查询或使用子查询？什么是最佳实践？那么我将如何编写查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T06:43:43.693

您实际上是在组合两个完全不相关的查询。我会将它们保留为单独的查询，特别是因为您也这样报告它们。如果您愿意，可以使用 UNION ALL 来组合这些查询。这样，您就只有一个您关注的项目名称列表，而不管它是什么类型的项目。如果你愿意，你也可以指定。

```
SELECT 
  cf.user, 
  cf.FK_collection as followItem, 
  c.collectionName as followName,
  'collection' as followType
FROM collectionFollows as cf
INNER JOIN collections as c ON cf.FK_collection = c.collectionId
WHERE cf.user = 2
UNION ALL
SELECT 
  uf.FK_userMe, 
  u.userId, 
  u.username
  'user' as followType
FROM userFollows as uf
INNER JOIN users as u ON uf.FK_userYou = u.userId
WHERE uf.FK_userMe = 2 
```

另一种方法是过滤 PHP 中的唯一值，但即便如此，您的查询也会失败。由于内部连接，如果用户只关注其他用户或只关注集合，您将不会得到任何结果。您至少需要两者之一才能获得任何结果。您可以将 INNER JOIN 更改为 LEFT JOIN，但是您仍然需要对查询进行后处理以过滤双精度并过滤掉 NULL 值。

UNION ALL 很快。它只是将两个查询结果粘在一起而无需进一步处理。这与 UNION 不同，UNION 也会过滤双倍（如 DISTINCT）。在这种情况下，它是不需要的，因为我假设一个用户只能关注一个集合或其他用户一次，所以这些查询永远不会返回重复的记录。如果确实如此，UNION ALL 会做得很好，并且会比 UNION 更快。

除了 UNION ALL 之外，两个单独的查询也可以。

# iphone - iPhone：查看加载但不是查看控制器

> ID：12257879
> 
> 赞同：0
> 
> 时间：2012-09-04T06:27:20.813
> 
> 标签：iphone, objective-c, xcode, cocoa-touch

我遇到了一个项目出现可怕的“错误：无法附加到进程 ID 0”的问题。尽我所能，它不想与我有任何关系。所以我开始了一个新项目并阅读了我所有的文件和框架以及其中没有的内容。

现在我的项目运行。它向我展示了故事板中的第一个屏幕。但是，附加到窗口的 ViewController 类没有加载，导航控制器也没有附加 NavController 类。我在 Identity Inspector 中重置了课程，但它仍然与我无关。

我添加了一些 NSLog(@"Test"); 在我的两个类的 viewDidLoad 方法中，它们没有被调用。但是，我将同一行添加到 AppDelegate applicationDidFinishLoadingWithOptions 并且确实在调试器中弹出了该行。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T06:35:24.120

我之前遇到过这个问题，可能是Xcode的一些错误，以下步骤对我有用：

*   退出模拟器
*   清洁项目
*   删除项目的派生数据
*   退出 Xcode
*   如果愿意，请重新启动 Mac

然后重新打开 Xcode，一切正常。

# xml - 在 Aviarc 中找不到锁定错误工作流

> ID：12257880
> 
> 赞同：1
> 
> 时间：2012-09-04T06:27:26.500
> 
> 标签：xml, aviarc

有人可以告诉我以下错误的原因。谢谢。

```
HTTP ERROR: 500
An error has occurred     : CommandException: No locking-error workflow found: tried 'system/locking-error' and 'locking-error'
caused by                 : NoSuchWorkflowException: Unable to retrieve workflow 'system/locking-error': No workflow called "system/locking-error"

Source context:
Application    : crm-test
Workflow    : settings
Element        : atomic-commit
URI            :
Line           : 6
Column        : -1
Path        : /workflow[1]/atomic-commit[1]
  settings.xml : line 1 : <workflow>
  main-page.xml : line 2 : <show-screen>
  main-page.xml : line 1 : <workflow>
  start.xml : line 3 : <call-workflow>
  start.xml : line 1 : <workflow>

Request context:
Request URI: /aviarc/crm-test/22A91EF8DA66B0544BE7F58B3FC011F7 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T06:48:10.130

这里实际上有两个错误：

1.  **期间出现问题`<atomic-commit>`。**由于某种原因，您的更新没有影响任何行。
2.  **您尚未在 workflows/system/locking-error.xml 中创建锁定错误处理程序工作流。**如果您正在实现乐观锁定，[那么创建一个](http://dev.aviarc.com/docs/aviarc/dev_guide/optimistic_locking).

在任何情况下，此错误通常是由*锁定错误以外的其他*原因引起的。查看您的创建/更新/删除查询；也许您认为它会更新一行，但您的查询中存在逻辑错误并且它影响零行。

如果您不打算使用乐观锁定，则可以为特定提交禁用它，如下所示：

```
<atomic-commit optimistic-locking="n">
  <dataset name="foo"/>
</atomic-commit> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T06:38:31.607

默认情况下，atomic-commit 假定所有提交都将使用乐观锁定进行，如果数据库告诉它提交查询没有影响任何行，它会假定锁定失败并尝试调用系统工作流“locking-error” '。

# wolfram-mathematica - 用 Simplify 求解产生真正的解，用 FullSimplify 求解一个复杂的解？

> ID：12257883
> 
> 赞同：0
> 
> 时间：2012-09-04T06:27:46.927
> 
> 标签：wolfram-mathematica

Mathematica 8 中的 DSolve[] 命令有问题。求解以下 4 阶微分方程会产生一个复杂的解，尽管它应该是一个真实的解。方程是：

```
y''''[x] + a y[x] == 0 
```

手动求解这个方程会产生一个只有实部的解。所有常数和边界条件也是实数。

我手动得到的解决方案是：

```
y1[x_] = (C[5] E^(Power[a, (4)^-1]/Power[2, (2)^-1] x) + 
  C[6] E^(-(Power[a, (4)^-1]/Power[2, (2)^-1]) x)) Cos[
 Power[a, (4)^-1]/Power[2, (2)^-1]
   x] + (C[7] E^(Power[a, (4)^-1]/Power[2, (2)^-1] x) + 
  C[8] E^(-(Power[a, (4)^-1]/Power[2, (2)^-1]) x)) Sin[
 Power[a, (4)^-1]/Power[2, (2)^-1] x]; 
```

现在我必须求解常数 C[5]...C[8]。这会产生类似的问题。我使用带有边界条件的 Solve[] 命令

```
Solve[{y1''[-c] == ic0, y1''[c] == ic0 , y1'''[-c] == ic1 , 
y1'''[c] == - ic1 }, {C[5], C[6], C[7], C[8]} ]; 
```

如果使用 //Simplify，常数 C[5]...C[8] 现在为实数，如果使用 //FullSimplify，则为复数。

知道原因是什么吗？可以在以下位置下载带有我计算的笔记本：http: [//dl.dropbox.com/u/4920002/DGL_4th_Order_with_own_solution.nb](http://dl.dropbox.com/u/4920002/DGL_4th_Order_with_own_solution.nb)

在进一步的工作中，我必须使用 DSolve[] 并且我想在这里了解这个问题。

谢谢，

安德烈亚斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T08:11:05.043

我认为你的一些陈述取决于细节。例如，`C[]`如果您选择，某些参数可以是复数`a<0`：

```
parS = Solve[{y1''[-c] == ic0, y1''[c] == ic0, y1'''[-c] == ic1, 
    y1'''[c] == -ic1}, {C[5], C[6], C[7], C[8]}] // Simplify;
parFS = Solve[{y1''[-c] == ic0, y1''[c] == ic0, y1'''[-c] == ic1, 
    y1'''[c] == -ic1}, {C[5], C[6], C[7], C[8]}] // FullSimplify

parS /. {a -> -2, c -> 10, ic0 -> 1, ic1 -> -1} // N
parFS /. {a -> -2, c -> 10, ic0 -> 1, ic1 -> -1} // N

(* {{C[5] -> -0.35876 - 2.498*10^-15 I,  C[6] -> -0.35876 - 2.498*10^-15 I, 
     C[7] -> 2.27596*10^-15 - 0.358762 I, C[8] -> -2.27596*10^-15 + 0.358762 I}}

   {{C[5] -> -0.35876 + 5.10703*10^-15 I, C[6] -> -0.35876 + 5.10703*10^-15 I, 
     C[7] -> 2.35922*10^-15 - 0.358762 I, C[8] -> -2.19269*10^-15 + 0.358762 I}} *) 
```

除了这一点，您可以在一行中获得问题的解决方案，并且确实它似乎是一个真正的功能（除了数字）：

```
sol[a_, ic0_, ic1_, c_, x_] = y[x] /. DSolve[{y''''[x] + a y[x] == 0, y''[-c] == ic0, 
     y''[c] == ic0, y'''[-c] == ic1, y'''[c] == -ic1}, y[x], x][[1]] ;

Plot[Im[sol[-2.0, 1.0, -1.0, 10., x]], {x, -10., 10.}]
Plot[Re[sol[-2.0, 1.0, -1.0, 10., x]], {x, -10., 10.}] 
```

![我是](../Images/b251487f0471e4e4018d8fa2f7f117e4.png) ![回覆](../Images/a322679aa03ac2528eac464ecd99be25.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:09:29.453

由于您将问题交叉发布到[Mathematica.SE](https://mathematica.stackexchange.com/questions/10253/dsolve-gives-complex-function-although-the-solution-is-a-real-one)，我在那里给出了答案。关键在于，即使 有一个实数和正值`a`，**四阶微分方程的一般解也是复杂的**。时期。如果您碰巧只对真正的解决方案感兴趣，[则可以提取它们](https://mathematica.stackexchange.com/questions/10253/dsolve-gives-complex-function-although-the-solution-is-a-real-one)。

# objective-c - iOS中凸圆柱投影上的翘曲图像

> ID：12257885
> 
> 赞同：1
> 
> 时间：2012-09-04T06:27:47.423
> 
> 标签：objective-c, ios, xcode, image-processing, opencv

我想在凸圆柱投影上扭曲图像。

我发现了这个问题：

[在圆柱投影中出现扭曲图像](https://stackoverflow.com/questions/12017790/warp-image-to-appear-in-cylindrical-projection)

这解决了凹圆柱投影的问题。

我希望这是凸圆柱投影。

有人可以告诉我如何使用 OpenCV 或任何其他框架来做到这一点

# java - 锁定 Java EE 应用程序

> ID：12257888
> 
> 赞同：1
> 
> 时间：2012-09-04T06:28:14.220
> 
> 标签：java, hibernate, jakarta-ee, concurrency, jpa-2.0

我将 Java EE 6 与 JBOSS7 和 JPA2 + Hibernate 一起使用。对于我的客户，我提供了一个 REST api。

我关心的是如何有效地确保没有资源同时被修改。应该经常发生，但如果发生，我想确保正确处理。

到目前为止我的方法：

1.  `Map<String, ReentrantLock>`存储锁。（我的 id 始终 `UUID`是 s）如果地图中缺失，则根据需要创建锁。在这种方法中，我喜欢并发访问将被阻止，并且我可以控制其他线程尝试锁定资源的时间。

2.  使用 JPA2 乐观锁定。

你会推荐哪一个？还是有更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T06:43:32.833

1.  似乎容易出错，而且它可能无法扩展。我从未见过这样的设计，我会劝阻它。
2.  具有乐观锁定的事务是一个可行的选择。在这种情况下，某些事务可能会失败，您将需要处理错误并重试。
3.  带有悲观锁定的事务是另一个可行的选择。就像 1) 但使用数据库来锁定和排序操作。AFAIK，JPA 也支持悲观锁定。否则，您可以使用 `SELECT FOR UPDATE`（大多数 DBMS 支持）显式获取行锁。确保您确定一个方案是按一致的顺序获取锁，以避免死锁。

2-3 之间的选择取决于用例，例如，是否预计争用会很高，或者是否容易重试失败的事务。

# perl - 在 Perl 中创建、填充和访问多维数组

> ID：12257890
> 
> 赞同：0
> 
> 时间：2012-09-04T06:28:28.093
> 
> 标签：perl, multidimensional-array

我有数据结构（如下所示），您能否让我知道如何填充以及随时以最简单的形式访问元素。哪种是最好的实现方式，例如哈希哈希或数组数组或其他任何东西？数组中不会有太多元素，唯一的问题是它是一种多级数组

```
%Array = (

    'Item0' => {
        'Name' => 'Item0_Name',
        'Attribs' => {
            'Attr1' => {
                'Name' => 'Attr1_Name',
                'Num'   => 'Attr1_Num'
            },      
            'Attr2' => {
                'Name' => 'Attr2_Name',
                'Num'   => 'Attr2_Num'
            }       
        }       
    },

    'Item1' => {
        'Name' => 'Item1_Name',
        'Attribs' => {
            'Attr1' => {
                'Name' => 'Attr1_Name',
                'Num'   => 'Attr1_Num'
            },      
            'Attr2' => {
                'Name' => 'Attr2_Name',
                'Num'   => 'Attr2_Num'
            }       
        }       
    }

); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T07:39:37.140

这方面的官方资源是 Perl Data Structure Cookbook ( [`perldoc perldsc`](http://perldoc.perl.org/perldsc.html))。

对于显示的数据，似乎一个 hashrefs 数组就足够了，因为 OP 中显示的键只是一个字符串化索引。同样的评论适用于“属性”：

```
my @array = (
              {
                  'Name' => 'Item0_Name',
                  'Attribs' => [
                                  {
                                      'Name' => 'Attr1_Name',
                                      'Num'  => 'Attr1_Num'
                                  },      
                                  {
                                      'Name' => 'Attr2_Name',
                                      'Num'   => 'Attr2_Num'
                                  }       
                               ],
              },
              {
                  'Name' => 'Item1_Name',
                  'Attribs' => [
                                  {
                                      'Name' => 'Attr1_Name',
                                      'Num'  => 'Attr1_Num'
                                  },      
                                  {
                                      'Name' => 'Attr2_Name',
                                      'Num'   => 'Attr2_Num'
                                  }       
                               ],
              },
           ); 
```

# symfony - mopabootstrap 包和 symfony2 问题

> ID：12257898
> 
> 赞同：2
> 
> 时间：2012-09-04T06:29:29.297
> 
> 标签：symfony, twitter-bootstrap

我正在使用这个[mopabootstrap bundle](https://github.com/phiamo/MopaBootstrapBundle)，并按照所有说明进行操作。我收到以下错误：

```
An exception has been thrown during the compilation of a template ("Unable to find file "@MopaBootstrapBundle/Resources/bootstrap/js/bootstrap-transition.js".") in "MopaBootstrapBundle::base.html.twig". 
```

我在这里找到了似乎也可以解决我的[问题](https://groups.google.com/forum/?fromgroups=#!topic/symfony2/Z6PDpimBzMk)的线程，但是我尝试了它，它仍然给了我同样的错误。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-30T06:49:40.160

如果您使用的是最新版本的 MopaBootstrap 和 Symfony 2.1 或 2.2，则`twitter/bootstrap`文件似乎没有正确安装和符号链接。

也许你错过了这个`composer.json`部分：

```
{
    "scripts": {
        "post-install-cmd": [
            "Mopa\\Bundle\\BootstrapBundle\\Composer\\ScriptHandler::postInstallSymlinkTwitterBootstrap"
        ],
        "post-update-cmd": [
            "Mopa\\Bundle\\BootstrapBundle\\Composer\\ScriptHandler::postInstallSymlinkTwitterBootstrap"
        ]
    }
} 
```

[来自 MopaBootstrap 文档](https://github.com/phiamo/MopaBootstrapBundle/blob/master/Resources/doc/1-installation.md)

这些命令从 vendor 文件夹创建符号链接：`/vendor/twitter/bootstrap` 到 MopaBootstrap 文件夹：

```
/vendor/mopa/bootstrap-bundle/Mopa/BootstrapBundle/Resources/bootstrap 
```

* * *

请务必在您的 composer.json 中安装 twitter/bootstrap：

```
{
    "require": {
        "mopa/bootstrap-bundle": "dev-master",
        "twitter/bootstrap": "dev-master"
    }
} 
```

# iphone - 在 iPhone 上显示和创建 gif 图像

> ID：12257902
> 
> 赞同：3
> 
> 时间：2012-09-04T06:29:52.117
> 
> 标签：iphone, ios, gif

我正在谷歌搜索过去几个小时的答案。我知道 Apple 和 Facebook 不支持 gif 图像，我想在 iPhone 应用程序中显示和创建 gif 图像，我找到了制作图像序列并提供动画的替代解决方案。我想从这些图像中创建 GIF 图像并在 Facebook 墙上发布。

当我在谷歌上搜索 Facebook 和 Apple 时，它​​显示了 2 年前的答案。可能现在苹果和Facebook改变了他们的政策，这是否可以在iPhone App上创建GIF图像并发布到Facebook上？

根据这里的堆栈溢出问题[，](https://stackoverflow.com/questions/9744682/display-animated-gif-in-ios) Apple 是否支持 gif 图像？

```
UIImageView* animatedImageView = [[UIImageView alloc] initWithFrame:self.view.bounds];
animatedImageView.animationImages = [NSArray arrayWithObjects:    
                           [UIImage imageNamed:@"image1.gif"],
                           [UIImage imageNamed:@"image2.gif"],
                           [UIImage imageNamed:@"image3.gif"],
                           [UIImage imageNamed:@"image4.gif"], nil];
animatedImageView.animationDuration = 1.0f;
animatedImageView.animationRepeatCount = 0;
[animatedImageView startAnimating];
[self.view addSubview: animatedImageView]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T06:51:55.713

我已经能够使用 ImageMagick 在 iOS 上创建动画 gif。那里有很多教程。这是[一个](https://web.archive.org/web/20130103092706/http://brainbowapps.com:80/articles/2010/using-imagemagick-to-create-animated-gifs-on-the-iphone.html)。这是[为 iOS 编译的 ImageMagick](https://www.imagemagick.org/script/download.php#iOS)。

我无法解决（由于时间原因）是如何通过使用调色图像和其他 gif 压缩方法来获得压缩的好处。这将是值得研究的事情，因为我发现我能够创建的图像非常大。

# android - actionbarsherlock 使用 tabnavigation 棕褐色导航

> ID：12257906
> 
> 赞同：1
> 
> 时间：2012-09-04T06:30:04.413
> 
> 标签：android, actionbarsherlock

我有一个需要标签导航的后期需求更改。我已经在我的应用程序中使用了 ActionBarSherlock。以前我的 UI 由活动组成。但是从我读到的 TabBar 需要片段活动？有什么办法可以保留现有代码并实现 TabBar，或者这需要完全重写我的应用程序吗？我的所有活动都扩展了 SherlockActivity ？

亲切的问候，

```
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;
import android.support.v4.app.FragmentTransaction;
import android.support.v4.view.ViewPager;

import com.actionbarsherlock.app.ActionBar;
import com.actionbarsherlock.app.ActionBar.Tab;
import com.actionbarsherlock.app.SherlockFragmentActivity;

public class NewMainActivity extends SherlockFragmentActivity implements ActionBar.TabListener,
        ViewPager.OnPageChangeListener
{
    private ViewPager mViewPager;

    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.textlayout);
        mViewPager = (ViewPager) findViewById(R.id.pager);
        mViewPager.setAdapter(new MainPagerAdapter(getSupportFragmentManager()));
        mViewPager.setOnPageChangeListener(this);
        //mViewPager.setPageMarginDrawable(R.drawable.border);
        mViewPager.setPageMargin(16);
        final ActionBar actionBar = getSupportActionBar();
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
        actionBar.addTab(actionBar.newTab().setText("First Tab").setTabListener(this));
        actionBar.addTab(actionBar.newTab().setText("Second Tab").setTabListener(this));
        actionBar.addTab(actionBar.newTab().setText("Third Tab").setTabListener(this));
    }

    @Override
    public void onPageScrollStateChanged(int arg0)
    {
        // TODO Auto-generated method stub

    }

    @Override
    public void onPageScrolled(int arg0, float arg1, int arg2)
    {
        // TODO Auto-generated method stub

    }

    @Override
    public void onPageSelected(int arg0)
    {
        // TODO Auto-generated method stub

    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft)
    {
        mViewPager.setCurrentItem(tab.getPosition());

    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft)
    {
        // TODO Auto-generated method stub

    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft)
    {
        // TODO Auto-generated method stub

    }

    private class MainPagerAdapter extends FragmentPagerAdapter
    {
        public MainPagerAdapter(FragmentManager fm)
        {
            super(fm);
        }

        @Override
        public Fragment getItem(int position)
        {
            switch (position)
            {
            case 0:
                // return (mFragmentA = new FragmentA());

            case 1:
                // return (mFragmentB = new FragmentB());

            case 2:
                // return (mFragmentC = new FragmentC());

            }
            return null;
        }

        @Override
        public int getCount()
        {
            return 3;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T06:59:47.997

当然，您不必重新编写应用程序。你只需要一些折射就可以了。

首先，您应该首先将代码移动到`SherlockFragment`(s)。

因此，假设您有 3 个活动`ActivityA`：`ActivityB`和`ActivityC`。

1 - 创建 3 个 SherlockFragments `FragmentA`：`FragmentB`和`FragmentC`。

2 - 将您的代码移动到片段并进行必要的修改（例如覆盖、上下文引用等）。

3 - 现在使用选项卡导航设置您的主要 FragmentActivity：

```
public class MainActivity extends SherlockFragmentActivity implements
        ActionBar.TabListener, ViewPager.OnPageChangeListener {

    private FragmentA mFragmentA;
    private FragmentB mFragmenB;
    private FragmentC mFragmentC;

    private ViewPager mViewPager;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main_layout);
        mViewPager = (ViewPager) findViewById(R.id.pager);
        mViewPager.setAdapter(new MainPagerAdapter(
                getSupportFragmentManager()));
        mViewPager.setOnPageChangeListener(this);
        mViewPager.setPageMarginDrawable(R.drawable.border);
        mViewPager.setPageMargin(16);
        final ActionBar actionBar = getSupportActionBar();
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
        actionBar.addTab(actionBar.newTab().setText(R.string.tab_a_title)
                .setTabListener(this));
        actionBar.addTab(actionBar.newTab().setText(R.string.tab_b_title)
                .setTabListener(this));
        actionBar.addTab(actionBar.newTab()
                .setText(R.string.tab_c_title).setTabListener(this));
    }

    @Override
    public void onPageSelected(int position) {
        getSupportActionBar().setSelectedNavigationItem(position);
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        mViewPager.setCurrentItem(tab.getPosition());
    }

    @Override
    public void onPageScrollStateChanged(int arg0) {
    }

    @Override
    public void onPageScrolled(int arg0, float arg1, int arg2) {
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {
    }

    private class MainPagerAdapter extends FragmentPagerAdapter {
        public MainPagerAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public Fragment getItem(int position) {
            switch (position) {
            case 0:
                return (mFragmentA = new FragmentA());

            case 1:
                return (mFragmentB = new FragmentB());

            case 2:
                return (mFragmentC = new FragmentC());

            }
            return null;
        }

        @Override
        public int getCount() {
            return 3;
        }
    }
} 
```

**main_layout.xml**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

<android.support.v4.view.ViewPager
    android:id="@+id/pager"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="1" />

</LinearLayout> 
```

# wpf - 如何在 WPF 中裁剪图像并保存到 ImageSource 中？

> ID：12257908
> 
> 赞同：9
> 
> 时间：2012-09-04T06:30:13.603
> 
> 标签：wpf, image, crop

我是 WPF 的新手。在这里我有一个问题。我有一个图像，宽度：360，高度：360。在这里，我想裁剪此图像，如下所示：

(0,0) 到 (120,120) 保存到第一个 ImageSource 对象，

(120,0) 到 (240,120) 保存到第二个 ImageSource 对象，

(240,0) 到 (360,120) 保存到第三个 ImageSource 对象；，

……</p>

请在下图中查看更多详细信息： ![在此处输入图像描述](../Images/3c14b8626cd96eca6d84c37b2bc3b4c9.png)

我的代码示例如下：

```
 private void CutImage(string img)
    {
        int iLeft = 0;
        int iTop = 0;
        int count = 0;

        Image thisImg = new Image();
        BitmapImage src = new BitmapImage();
        src.BeginInit();
        src.UriSource = new Uri(img, UriKind.Relative);
        src.CacheOption = BitmapCacheOption.OnLoad;
        src.EndInit();
        thisImg.Source = src;

        for (int i = 0; i < 3; i++)
        {
            iTop = i * 120;
            for (int j = 0; j < 3; j++)
            {
                iLeft = j * 120;

                Canvas canvas = new Canvas();

                Rectangle destRect = new Rectangle();
                destRect.SetValue(Canvas.LeftProperty, (double)0);
                destRect.SetValue(Canvas.TopProperty,(double)0);
                destRect.Width = destRect.Height = 120;

                Rect srcRect = new Rect();
                srcRect.X = iLeft;
                srcRect.Y = iTop;
                srcRect.Width = srcRect.Height = 120;

                thisImg.Clip = new RectangleGeometry(srcRect);

                thisImg.Clip.SetValue(Canvas.TopProperty, (double)iTop);
                thisImg.Clip.SetValue(Canvas.LeftProperty, (double)iLeft);
                thisImg.Clip.SetValue(Canvas.WidthProperty, (double)120);
                thisImg.Clip.SetValue(Canvas.HeightProperty,(double)120);

                objImg[count++] = (ImageSource)thisImg.GetValue(Image.SourceProperty);
            }
        }
      } 
```

但它不像我预期的那样工作，似乎所有 ImageSource 对象都存储相同的图像，而不是 corping 部分。任何人都可以帮助我吗？谢谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-04T07:25:56.370

使用[CroppedBitmap](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.croppedbitmap.aspx)执行此操作：

```
private void CutImage(string img)
{
    int count = 0;

    BitmapImage src = new BitmapImage();
    src.BeginInit();
    src.UriSource = new Uri(img, UriKind.Relative);
    src.CacheOption = BitmapCacheOption.OnLoad;
    src.EndInit();

    for (int i = 0; i < 3; i++)
        for (int j = 0; j < 3; j++)
            objImg[count++] = new CroppedBitmap(src, new Int32Rect(j * 120, i * 120, 120, 120));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T06:49:41.897

做就是了：

```
private static BitmapSource CaptureScreen(Visual target, double dpiX, double dpiY)
{
    if (target == null)
    {
        return null;
    }
    Rect bounds = VisualTreeHelper.GetDescendantBounds(target);
    RenderTargetBitmap rtb = new RenderTargetBitmap((int)(bounds.Width * dpiX / 96.0),
                                                    (int)(bounds.Height * dpiY / 96.0),
                                                    dpiX,
                                                    dpiY,
                                                    PixelFormats.Pbgra32);
    DrawingVisual dv = new DrawingVisual();
    using (DrawingContext ctx = dv.RenderOpen())
    {
        VisualBrush vb = new VisualBrush(target);
        ctx.DrawRectangle(vb, null, new Rect(new Point(), bounds.Size));
    }
    rtb.Render(dv);
    return rtb;
}

VisualBrush part1 = new VisualBrush(yourVISUAL);
part1.ViewBoxUnits = ..Absolute;
part1.ViewBox = new Rect(x, y, width, height);
BitmapSource bitmapSource = CaptureScreen(part1, 96, 96);
    using (var fileStream = new FileStream(filePath, FileMode.Create))
    {
        BitmapEncoder encoder = new PngBitmapEncoder();
        encoder.Frames.Add(BitmapFrame.Create(bitmapSource));
        encoder.Save(fileStream);
    } 
```

# php - 动态/php创建文本的Magento翻译失败

> ID：12257910
> 
> 赞同：0
> 
> 时间：2012-09-04T06:30:25.853
> 
> 标签：php, magento, csv, translation

我有一个功能，可以在注册表单中添加带有数字的标签以形成字段。对于每个额外的输入字段，它会添加一个标签，如地址 2、地址 3 等。我想使用 CSV 翻译文件将这些标签从“地址 2”更改为“数字”，将“地址 3”更改为“地区” "等，但它不起作用。我有正确的 CSV 路径，因为文件中有其他文本已正确翻译。

我正在使用以下代码：

```
<?php for ($_i=2, $_n=$this->helper('customer/address')->getStreetLines(); $_i<=$_n; $_i++): ?>
<label for="<?php echo $this->getPrefix();?><?php echo $this->__('_street%s', $_i) ?>" <?php echo $this->__('Address %s', $_i) ?>
</label>
<?php endfor;?> 
```

但我认为 Magento 不会翻译这些标签，因为 %s 变量是翻译的一部分。

我在 CSV 文件中尝试了不同的组合，例如“地址 2”、“地址“2””，但它不起作用。有关如何翻译此内容的任何想法或建议（通过 CSV 或更改 PHP 代码本身）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T11:45:45.227

通常，您可以将实体数据的翻译存储在数据库中，然后按存储范围检索它。这是EAV存储的用途之一。

另一种方法是将这些翻译存储在自定义主题中，并在每个商店中更改主题。

在您的情况下，对我来说，决定因素是（1）您存储在数据库中的这些表格是否真的可以任意配置，或者（2）如果这是一个分布式模块 - 这些都表明 EAV 存储。否则，走主题翻译路线。

**根据 OP 评论更新**

“我需要翻译的变量”意味着您（通常）仅限于使用存储范围将翻译存储在数据库中针对实体。您可以通过多种方式执行此操作，但鉴于这是对另一个扩展的扩展，搞乱 DB 模式似乎是不可能的。您也可以操纵内联翻译，但这似乎很骇人听闻（好奇地听到了其他）。

这是`core_block_abstract_to_html_after`可以使用事件的情况。该事件接受块实例和呈现的 html。在您的事件观察器中，您可以通过字符串替换执行翻译，但由于此事件会针对所有块触发，您希望将其配置为单例并测试块类型。

```
<?php

class Ns_Mn_Model_FormTranslate
{
    public function translateLabelValues(Varien_Event_Observer $o)
    {
        if ($o->getBlock() instanceof The_Specific_Block_Class) {
            $html = $o->getHtml();

            $html = //your translation logic here

            $o->setHtml($html); //this will be used
        }
    }
} 
```

这里的主要警告是`block_html`缓存不会包含这个转换后的输出。或者，使用基于配置的类重写重写原始类，并将转换逻辑添加到`_html()`方法中。

# php - 在 Symfony2 中使用 JOIN 标准的 findBy

> ID：12257911
> 
> 赞同：7
> 
> 时间：2012-09-04T06:30:29.957
> 
> 标签：php, symfony, doctrine, doctrine-orm

我有 3 个简单的表：用户、角色、具有多对多关系的 user_x_role。我有 2 个实体：用户和角色。用户实体具有带有关系注释的 $userRoles 属性。在控制器中，我需要获取所有具有特定角色的用户。但我不知道如何在控制器中使用 JOIN。当前错误代码：

```
$role = $this->getDoctrine()->getRepository('TestBackEndBundle:Role');
$roles = $role->findBy(array('name' => 'ROLE_PARTNER'));

$user = $this->getDoctrine()->getRepository('TestBackEndBundle:User');
$partners = $user->findBy(array('userRoles' => $roles)); 
```

它抛出“未定义的索引：joinColumns in ...”。但我在用户实体中有 joinColumns：

```
/**
 * @ORM\ManyToMany(targetEntity="Role")
 * @ORM\JoinTable(name="user_x_role",
 *     joinColumns={@ORM\JoinColumn(name="user_id", referencedColumnName="id", onDelete="CASCADE", onUpdate="CASCADE")},
 *     inverseJoinColumns={@ORM\JoinColumn(name="role_id", referencedColumnName="id", onDelete="CASCADE", onUpdate="CASCADE")}
 * )
 * @var ArrayCollection
 */
protected $userRoles; 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-04T06:58:35.113

IMO 最好的方法是为用户实体创建自己的存储库。然后在该存储库中创建诸如“getUsersByRole”之类的方法，您可以在其中使用查询生成器进行所需的查询。

```
 $qb = $this->getEntityManager()->createQueryBuilder();
 $qb->select('u')
     ->from('\namespace\for\User', 'u')
     ->join('u.roles', 'r')
     ->where(...)

 return $qb->getQuery()->getResult(); 
```

# php - 在chrome中ajax上传后上传的图片不显示

> ID：12257914
> 
> 赞同：0
> 
> 时间：2012-09-04T06:30:41.213
> 
> 标签：php, firefox, google-chrome, ajax-upload

我使用 php 进行了 ajax 上传。在 Firefox 中，一切都将是完美的。

但是当我在 chrome 浏览器中测试它时它不能正常工作。

这意味着它显示： ![在此处输入图像描述](../Images/6d0865dcec9e6577467006fb787f2604.png)

这是我的ajax上传代码：

```
$(function(){
        var cntUp = 0;
        var btnUpload=$('#upload0');
        var status=$('#status');
        var state='left_front';

        new AjaxUpload(btnUpload, {
            action: 'upload-file.php',
            data: {saleid: $("#hid_saleid").val(),imag_state:state,custom:$('#custom').val()},
            name: 'uploadfile',
            onSubmit: function(file, ext){
                 if (! (ext && /^(jpg|png|jpeg|gif)$/.test(ext))){ 
                    // extension is not allowed 
                    alert('Only JPG, PNG or GIF files are allowed');
                    return false;
                }
                this.setData({
                    'saleid': $("#hid_saleid").val(),
                    'imag_state':'left_front',
                    'custom':$('#custom').val()
                });

                status.text('Uploading...');
            },
            onComplete: function(file, response){
                var array_data=response.split('***');   
                var  fname= array_data[1];  
                var rand=Math.floor((Math.random()*10)+1); 
                var saleid = $("#hid_saleid").val();
                var custom = $('#custom').val();
                //On completion clear the status
                status.text('image uploaded');
                cntUp++;
                //console.log(cntUp);
                //Add uploaded file to list
                if (response.toLowerCase().indexOf("success") >= 0 ) {
                    var image='<img src="uploads/'+saleid+'/'+fname+'" alt=""  width="131px" height="125px"/>';
                    $("#img0").html(image);

                }  else{
                    $('<li></li>').appendTo('#files').text(file).addClass('error');
                    //alert('error');
                }
            }
        });

    }); 
```

这是html代码：

```
<div class="brwse_box">
<div style="float:left;" id="upload0">
<h3>Left Front</h3>

<img src="images/upload.gif" />
</div>
<div style="float:right; width:131; height:125" id="img0">
<?php if($l_ft==''||$l_ft==NULL) { ?>
  <img src="images/no-photo-lft-frnt.jpg"  id="bg"/>
<?php } if($l_ft!=''||$l_ft!=NULL){?>
   <img src="uploads/<?php echo $var_sid;?>/<?php echo $l_ft;?>" id="bg" width="131px" height="125px"/>
<?php }?>
</div>
</div><!--browse_box ENDS--> 
```

我该如何解决这个问题？

它在firefox中显示图像。但在chrome中不显示图像而不是显示图像标签的html。

编辑：

这是`fname`变量中的返回值：

`left_front.jpg<div id=isChromeWebToolbarDiv" style="display:none"></div>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T06:48:51.780

看来您的 src 字符串有问题。检查它是否有转义字符......我会说它可能`fname`包含引号......

编辑： [什么“isChromeWebToolbarDiv”？](https://stackoverflow.com/questions/7074334/what-ischromewebtoolbardiv)

```
fname = fname.replace(new RegExp("<div id=isChromeWebToolbarDiv(.*)</div>"),''); 
```

或者干脆

```
fname = fname.replace(new RegExp("<div(.*)</div>"),''); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T06:57:46.780

在您对问题进行**编辑**之后，它才知道

**进来了 `src`**

 **这是由名为**DVDvideosoftTB**的 Chrome 扩展程序引起的。它似乎将上述 HTML 附加到文件上传请求中。您可以轻松禁用它：

*   点击扳手图标
*   点击“**工具**”
*   点击“**扩展**”
*   禁用 DVDvideosoftTB**

# c++ - 被释放的指针不是为指针分配分配的

> ID：12257916
> 
> 赞同：3
> 
> 时间：2012-09-04T06:30:50.387
> 
> 标签：c++, pointers, new-operator

我试图将 ListNode 结构更改为类格式，但在测试时遇到了一些问题。

获取 a.out(7016) malloc: *** 对象 0x7fff65333b10 的错误：未分配被释放的指针 ***在 malloc_error_break 中设置断点以进行调试

```
chainLink.hpp 
#ifndef CHAINLINK_H
#define CHAINLINK_H

using namespace std;
#include <iostream>
#include <cstdlib>

template <typename Object>

class chainLink
{
    private:
        Object storedValue;
        chainLink *nextLink;
    public:
            //Constructor
        chainLink(const Object &value = Object()): storedValue(value)
        {
            nextLink = NULL;
        }
        /* Postcondition:   returns storedValue;
         */     
        Object getValue()
        {
            return storedValue;
        }

        /* Postcondition:   sets storedValue = value
         */
        void setValue(Object &value)
        {
            storedValue = value;
        }

        /* Postcondition:   sets nextLink to &value
         */
        void setNextLink(chainLink* next)
        {
            nextLink = next;
        }

        chainLink* getNext()
        {
            return nextLink;
        }
        ~chainLink()
        {
            delete nextLink;
        }
};
#endif 
```

我的测试文件，假设包括

```
int main()
{
    chainLink<int> x(1);
    cout << "X: " << x.getValue() << " "<< endl;
    chainLink<int> y(2);
    cout << "Y: " << y.getValue() << " "<< endl;
    chainLink<int>* z = &y;
    cout << &y << " " << z << endl;
    x.setNextLink(z);
} 
```

输出：X：1 Y：2 0x7fff65333b10 0x7fff65333b10 a.out(7016) malloc：*** 对象 0x7fff65333b10 的错误：未分配被释放的指针 ***在 malloc_error_break 中设置断点以调试 Abort 陷阱：6

该错误似乎是由 setNextLink 函数引发的。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T06:34:40.797

在您的最后一行中，`main`您`setNextLink`使用指向具有自动存储持续时间的对象的指针进行调用（`z`保存地址`y`）。您的列表在销毁时尝试删除该指针，因此错误（`y`尚未动态分配，因此无法动态删除）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T06:35:07.910

您正在给出`setNextLink`一个指向自动分配变量的指针，

```
x.setNextLink(z); // z points to automatic object y 
```

您尝试在构造函数中删除它。

```
~chainLink() {
    delete nextLink; // attempts to delete automatic object y
} 
```

您需要将指针传递给动态分配的对象，或者让您自己的 insde`chainLink`类。

**注意**：在C++中，`struct`s和`class`es是一样的吧[有些区别](https://stackoverflow.com/questions/92859/what-are-the-differences-between-struct-and-class-in-c)。可以使用两者中的任何一个来实现等效类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T06:42:23.380

后线`x.setNextLink(z);` `x.nextLink`指向`z`，后者又指向`y`。而是`y`一个**局部对象**。它分配在堆栈上而不是堆上。所以调用它是违法的`delete`。

# java - 如何从 MyBatis Java 调用存储过程？

> ID：12257921
> 
> 赞同：4
> 
> 时间：2012-09-04T06:31:21.747
> 
> 标签：java, spring, stored-procedures, mybatis

我收到错误消息：

> org.mybatis.spring.MyBatisSystemException：嵌套异常是 org. 阿帕奇。伊巴蒂斯。异常.PersistenceException：

和

> java.lang.IllegalArgumentException：映射语句集合不包含 .. 的值

当我使用 Java 从 mybatis 调用存储过程时。

我使用*PostgreSQL*作为数据库和*Spring MVC*框架。为此，我调用存储过程的 DAO 类是：

```
Orders orders=new Orders(); 
```

值以编程方式设置在 order 变量中。

```
Integer insert= getSqlSession().insert("records",orders);** 
```

我的 mybatis 文件是这样的：

```
<insert id="records" parameterType="Orders" statementType="CALLABLE">
 {call fn_records_tbl(#{rId,javaType=Integer,jdbcType=INTEGER,mode=IN},#{state,javaType=String,jdbcType=CHAR,mode=IN},#{uId,javaType=Integer,jdbcType=INTEGER,mode=IN},#{status,javaType=String,jdbcType=CHAR,mode=IN})}
</insert> 
```

我的存储过程语法是：

```
CREATE OR REPLACE FUNCTION fn_records_tbl(rId integer, state character,uId integer, status character)

RETURNS void AS

$BODY$
DECLARE

    -- my code
BEGIN

    -- my code
END

$BODY$

LANGUAGE plpgsql VOLATILE
COST 100;

ALTER FUNCTION fn_records_tbl(integer, character, integer, character)
OWNER TO mydba; 
```

我传递参数的实体类是：

```
 public class Orders implements Serializable {

  private static final long serialVersionUID = 267216928694677437L;
  private Integer uId;
  private Integer rId;
  private String status;
  private String state;

     // here are my setter and getter
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T05:21:55.663

> **我调用存储过程的语法在 MyBatis 和存储过程中都是正确的。**

由于我使用的是 Spring 框架，因此由于一些传递依赖，我的存储过程没有从 java 中的 MyBatis 调用。

因此，我检查了我的 pom.xml 文件以查找传递依赖项，然后我排除了 MyBatis 的所有这些依赖项，并将最新版本的 MyBatis 用于 Spring 框架。

现在它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T04:15:23.670

尝试将您的配置从更改`insert`为`select`

```
<select id="records" parameterType="Orders" statementType="CALLABLE">
 {call fn_records_tbl(#{rId,javaType=Integer,jdbcType=INTEGER,mode=IN},#{state,javaType=String,jdbcType=CHAR,mode=IN},#{uId,javaType=Integer,jdbcType=INTEGER,mode=IN},#{status,javaType=String,jdbcType=CHAR,mode=IN})}
</select> 
```

# android - 如何在android中访问NTFS格式文件系统？

> ID：12257923
> 
> 赞同：0
> 
> 时间：2012-09-04T06:31:31.593
> 
> 标签：android, usb, ntfs

我们的安卓平板电脑（版本 4.0.3 - IceCreamSandwich）中有一个 USB 端口。

我正在使用 Windows 7 和 Eclipse 来开发我的 android 应用程序。

我想通过 android 平板电脑访问 NTFS 文件系统格式。我要执行的文件操作是创建、读取、更新和删除。我知道 Linux 内核不支持 NTFS 文件系统格式。

我需要学习，我也渴望知道。NTFS 文件系统用于访问 android 平板电脑中的文件操作。

我知道这是可能的。但我不知道如何访问 NTFS 文件系统以通过编程方式访问文件操作。

请为我提供帮助和指导。我需要示例代码。

谢谢

问候
巴拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T06:34:20.720

您需要做的就是通过 Wifi 网络设置 Windows 共享。问题解决了 ：）

# jsp - 将异常从 servlet 转发到 jsp 页面的好方法是什么？

> ID：12257928
> 
> 赞同：4
> 
> 时间：2012-09-04T06:31:57.747
> 
> 标签：jsp, exception, tomcat, servlets

我知道我可以像这样在 web.xml 中放一些东西

```
<error-page>  
   <exception-type>java.lang.Throwable</exception-type>  
   <location>/error.jsp</location>  
</error-page> 
```

然而，jsp 页面不会显示任何构造信息，因为它不会得到异常的确切含义。我知道我们可以通过不同的方式将不同的异常转发到不同的页面，`exception-type`但这在 web.xml 中写得太多了。我希望一页就足够了，另一页可以处理 404 之类的错误。

那么应该如何将异常信息传递给jsp页面呢？使用会话？

理想的情况可能是页面获取异常信息并显示一些关于它的相关消息，而不向用户透露异常。相反，它可以将其记录到文件中以供将来参考。实现这一目标的最佳方法是什么？谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-04T11:58:02.540

多个请求属性**已经**提供了有关异常的信息。[您可以在`RequestDispatcher`javadoc](http://docs.oracle.com/javaee/6/api/javax/servlet/RequestDispatcher.html#ERROR_EXCEPTION)中找到所有这些属性的名称：

*   `ERROR_EXCEPTION`-[`javax.servlet.error.exeption`](http://docs.oracle.com/javaee/6/api/constant-values.html#javax.servlet.RequestDispatcher.ERROR_EXCEPTION)
*   `ERROR_EXCEPTION_TYPE`-[`javax.servlet.error.exception_type`](http://docs.oracle.com/javaee/6/api/constant-values.html#javax.servlet.RequestDispatcher.ERROR_EXCEPTION_TYPE)
*   `ERROR_MESSAGE`-[`javax.servlet.error.message`](http://docs.oracle.com/javaee/6/api/constant-values.html#javax.servlet.RequestDispatcher.ERROR_MESSAGE)
*   `ERROR_REQUEST_URI`-[`javax.servlet.error.request_uri`](http://docs.oracle.com/javaee/6/api/constant-values.html#javax.servlet.RequestDispatcher.ERROR_REQUEST_URI)
*   `ERROR_SERVLET_NAME`-[`javax.servlet.error.servlet_name`](http://docs.oracle.com/javaee/6/api/constant-values.html#javax.servlet.RequestDispatcher.ERROR_SERVLET_NAME)
*   `ERROR_STATUS_CODE`-[`javax.servlet.error.status_code`](http://docs.oracle.com/javaee/6/api/constant-values.html#javax.servlet.RequestDispatcher.ERROR_STATUS_CODE)

因此，简而言之，这个 JSP 示例应该显示所有可能的异常详细信息：

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
...
<ul>
    <li>Exception: <c:out value="${requestScope['javax.servlet.error.exception']}" /></li>
    <li>Exception type: <c:out value="${requestScope['javax.servlet.error.exception_type']}" /></li>
    <li>Exception message: <c:out value="${requestScope['javax.servlet.error.message']}" /></li>
    <li>Request URI: <c:out value="${requestScope['javax.servlet.error.request_uri']}" /></li>
    <li>Servlet name: <c:out value="${requestScope['javax.servlet.error.servlet_name']}" /></li>
    <li>Status code: <c:out value="${requestScope['javax.servlet.error.status_code']}" /></li>
</ul> 
```

此外，您还可以显示以下有用信息：

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt" %>
<jsp:useBean id="date" class="java.util.Date" />
...
<ul>
    <li>Timestamp: <fmt:formatDate value="${date}" type="both" dateStyle="long" timeStyle="long" /></li>
    <li>User agent: <c:out value="${header['user-agent']}" /></li>
</ul> 
```

具体`Exception`实例本身在 JSP 中仅`${exception}`在您将页面标记为错误页面时可用：

```
<%@ page isErrorPage="true" %>
...
${exception} 
```

仅当您使用 EL 2.2 或更新版本时，您才可以打印其堆栈跟踪，如下所示：

```
<%@ page isErrorPage="true" %>
...
<pre>${pageContext.out.flush()}${exception.printStackTrace(pageContext.response.writer)}</pre> 
```

或者，如果您还没有使用 EL 2.2，请为此创建一个[自定义 EL 函数](https://stackoverflow.com/questions/6395621/how-to-call-a-static-method-in-jsp-el/6396886#6396886)：

```
public final class Functions {

    private Functions() {}

    public static String printStackTrace(Throwable exception) {
        StringWriter stringWriter = new StringWriter();
        exception.printStackTrace(new PrintWriter(stringWriter, true));
        return stringWriter.toString();
    }

} 
```

注册于`/WEB-INF/functions.tld`：

```
<?xml version="1.0" encoding="UTF-8" ?>
<taglib 
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-jsptaglibrary_2_1.xsd"
    version="2.1">

    <display-name>Custom Functions</display-name>    
    <tlib-version>1.0</tlib-version>
    <uri>http://example.com/functions</uri>

    <function>
        <name>printStackTrace</name>
        <function-class>com.example.Functions</function-class>
        <function-signature>java.lang.String printStackTrace(java.lang.Throwable)</function-signature>
    </function>
</taglib> 
```

并且可以用作

```
<%@ taglib prefix="my" uri="http://example.com/functions" %>
...
<pre>${my:printStackTrace(exception)}</pre> 
```

至于异常的日志记录，最简单的地方是一个[过滤器](https://stackoverflow.com/tags/servlet-filters/info)，它映射到一个 URL 模式`/*`并且基本上执行以下操作：

```
try {
    chain.doFilter(request, response);
} catch (ServletException e) {
    log(e.getRootCause());
    throw e;
} catch (IOException e) { // If necessary? Usually not thrown by business code.
    log(e);
    throw e;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T06:42:24.753

是的，我认为 session 是存储与当前请求相关的异常的好地方。

完成处理后不要忘记清除异常。

**此外，您可以将来自支持代码的错误代码**而不是异常传递给您的表示层，在那里可以使用属性文件将其转换为某种对用户意味着完全错误的含义。

# android - 在webview android上显示部分网页

> ID：12257929
> 
> 赞同：11
> 
> 时间：2012-09-04T06:31:59.280
> 
> 标签：android, webview, android-webview

我想制作一个应用程序，将网页中的内容加载到 webview 中。我只想在整个 webview 中显示特定的东西，而不是网页的全部内容。

这是一个例子。如果我使用：[http ://us.m.yahoo.com/w/sea​​rch%3B_ylt=A2KL8xs0vUBQMg0AwAkp89w4?submit=oneSearch&.intl=us&.lang=en&.tsrc=yahoo&.sep=fp&p=digital+cameras&x=0&y= 0](http://us.m.yahoo.com/w/search%3B_ylt=A2KL8xs0vUBQMg0AwAkp89w4?submit=oneSearch&.intl=us&.lang=en&.tsrc=yahoo&.sep=fp&p=digital+cameras&x=0&y=0)作为 webview 的 URL，它在 webview 上加载页面的所有内容。但我想删除页面的横幅并将其显示在我的应用程序的 webview 上。

我曾尝试使用带有 CSS 标签的广告拦截器，但这对我没有帮助。请给我一些克服这个问题的想法。

谢谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-04T15:24:24.047

谢谢Zyber的回答。我已经通过在 android 中的 WebView 代码中注入 JavaScript 来解决它。

```
final WebView webview = (WebView)findViewById(R.id.browser);
webview.getSettings().setJavaScriptEnabled(true);
webview.setWebViewClient(new WebViewClient() {
 @Override
public void onPageFinished(WebView view, String url)
{
    webview.loadUrl("javascript:(function() { " +
            "document.getElementsByTagName('header')[0].style.display="none"; " +
            "})()");
}
});
webview.loadUrl("http://code.google.com/android"); 
```

这解决了我的目的，而且很容易使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-04-12T11:23:47.173

我得到了添加这个的解决方案：

```
view.getSettings().setJavaScriptEnabled(true);
        view.setWebViewClient(new WebViewClient() {

            @Override
            public void onPageFinished(WebView view, String url)
            {
                view.loadUrl("javascript:(function() { " +
                        "var head = document.getElementsByClassName('header')[0].style.display='none'; " +
                        "var head = document.getElementsByClassName('blog-sidebar')[0].style.display='none'; " +
                        "var head = document.getElementsByClassName('footer-container')[0].style.display='none'; " +
                        "})()");

            }
        });
        view.loadUrl("your url");
```

添加 (var head =) 看起来像是在 webview 中隐藏我的类。

我希望这对某人有帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-04T13:27:19.517

检查[Jsoup](http://jsoup.org/ "汤")它提供了一个库，它提供了一种从网页中提取 Html 元素的简单方法

```
DefaultHttpClient client = new DefaultHttpClient();
HttpGet get = new HttpGet(url.toURI());
HttpResponse resp = client.execute(get);

String content = EntityUtils.toString(resp.getEntity());
Document doc = Jsoup.parse(content);
Elements ele = doc.select("div.classname"); 
```

此示例执行一个 Http GET，然后提取一个具有类“classname”的 Div 元素，然后您可以将其加载到您的 web 视图中

# php - Apache mod_rewrite 和正则表达式

> ID：12257932
> 
> 赞同：0
> 
> 时间：2012-09-04T06:32:13.443
> 
> 标签：php, regex, .htaccess, mod-rewrite

在我的 HTML 中，我想像这样引用我的图像：

```
/images/articles/this-is-the-page-title-dgj4klci5j4.jpg
/images/articles/thumbs/this-is-the-page-title-dgj4klci5j4.jpg
/images/gallery/this-is-the-page-title-qj3k56l6kfm.jpg 
```

但它们实际上位于：

```
/_pics/articles/dgj4klci5j4.jpg
/_pics/articles/thumbs/dgj4klci5j4.jpg
/_pics/gallery/qj3k56l6kfm.jpg 
```

我的 .htaccess 文件当前位于站点的根目录中，如下所示：

```
RewriteEngine On

RewriteCond %{HTTP_HOST} ^website\.com [NC]
RewriteRule ^(.*)$ http://www.website.com/$1 [R=permanent,L]

RewriteRule ^articles/ user/articles.php [L]
RewriteRule ^gallery/ info/gallery.php [L] 
```

我必须这样做，因为在最后一刻，客户决定他想要更清晰的图像文件名，这似乎是一个快速合理的修复。

我想我可以将 /images 中的所有内容重定向到 /_pics 并仅使用 mod_rewrite 将页面标题取出。问题是我不太擅长正则表达式，而且我不完全理解 mod_rewrite 的工作方式。我能得到一些帮助吗？谢谢

真实图片文件名只包含字母和数字，可以是jpg或png。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T06:40:40.797

尝试在 htaccess 文件中添加此规则：

```
RewriteRule ^images/(.+)/[^/]+-([^/-]+)\.(jpe?g|gif|png)$ /_pics/$1/$2.$3 [L] 
```

# java - 通过 2 次鼠标单击绘制一条线

> ID：12257933
> 
> 赞同：0
> 
> 时间：2012-09-04T06:32:24.053
> 
> 标签：java, awt, graphics2d, java-2d, mouselistener

我试图从一系列鼠标点击中画一条线。

例如，当我从屏幕上的一个点单击到下一个点时，它会连接线，然后我可以继续单击下一个点，它会继续绘制一条连续的绘图线。

一个例子在这里： http: [//oneslime.net/java/Tutorial_2](http://oneslime.net/java/Tutorial_2)在**练习 2下**

我相信我的逻辑有一些错误（不画线，只是一个点），但我似乎找不到它！

有人可以帮帮我吗？

这是我的代码：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;

public class RoadCreator extends JPanel {

    private MouseHandler mouseHandler = new MouseHandler();

    private Point previousPoint = new Point();
    private Point nextPoint = new Point();
    private boolean drawing;

    public RoadCreator() {
        this.setPreferredSize(new Dimension(640, 480));
        this.addMouseListener(mouseHandler);
       this.addMouseMotionListener(mouseHandler);
    }

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        Graphics2D g2d = (Graphics2D) g;
        g2d.setColor(Color.blue);
        g2d.setRenderingHint(
            RenderingHints.KEY_ANTIALIASING,
            RenderingHints.VALUE_ANTIALIAS_ON);
        g2d.setStroke(new BasicStroke(8,
            BasicStroke.CAP_ROUND, BasicStroke.JOIN_BEVEL));
        g.drawLine(previousPoint.x, previousPoint.y, nextPoint.x, nextPoint.y);
    }

    private class MouseHandler extends MouseAdapter {

        @Override
        public void mousePressed(MouseEvent e) {
            drawing = true;
            nextPoint = e.getPoint();
            repaint();
            previousPoint = e.getPoint();

        }
    }

    public void display() {
        JFrame f = new JFrame("Road Creator");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(this);
        f.pack();
        f.setVisible(true);
    }

    } 
```

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T07:00:51.937

使用[`GeneralPath`](http://docs.oracle.com/javase/7/docs/api/java/awt/geom/GeneralPath.html)or`Path2D`代替。

> 该类`GeneralPath`表示由直线、二次和三次 (Bézier) 曲线构成的几何路径。*它可以包含多个子路径。*

![在此处输入图像描述](../Images/ee66bc090d84f4069c3e8c9eb2aa1a87.png)

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.awt.geom.GeneralPath;

public class RoadCreator extends JPanel {

    private MouseHandler mouseHandler = new MouseHandler();

    GeneralPath path = null;
    private boolean drawing = false;

    public RoadCreator() {
        this.setPreferredSize(new Dimension(320, 200));
        this.addMouseListener(mouseHandler);
        this.addMouseMotionListener(mouseHandler);
    }

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        Graphics2D g2d = (Graphics2D) g;
        g2d.setColor(Color.blue);
        g2d.setRenderingHint(
                RenderingHints.KEY_ANTIALIASING,
                RenderingHints.VALUE_ANTIALIAS_ON);
        g2d.setStroke(new BasicStroke(8,
                BasicStroke.CAP_ROUND, BasicStroke.JOIN_BEVEL));
        if (path!=null) {
            g2d.draw(path);
        }
    }

    private class MouseHandler extends MouseAdapter {

        @Override
        public void mousePressed(MouseEvent e) {
            Point p = e.getPoint(); 
            if (!drawing) {
                path = new GeneralPath();
                path.moveTo(p.x, p.y);
                drawing = true;
            } else {
                path.lineTo(p.x, p.y);
            }

            repaint();
        }
    }

    public void display() {
        JFrame f = new JFrame("Road Creator");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(this);
        f.pack();
        f.setVisible(true);
    }

    public static void main(String[] args) {
        RoadCreator rc = new RoadCreator();
        rc.display();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T06:45:11.983

这行不通。

```
public void mousePressed(MouseEvent e) {
    drawing = true;
    nextPoint = e.getPoint();
    repaint();
    previousPoint = e.getPoint();
} 
```

您假设这`repaint`是一个内联调用（即它在返回之前绘制）。它不会，`repaint`将向重绘管理器的请求排队，该请求将在将来的某个时间更新。

```
public void mousePressed(MouseEvent e) {
    drawing = true;
    previousPoint = nextPoint
    nextPoint = e.getPoint();
    repaint();
} 
```

应该可以工作，请注意，previousPoint 将为空，直到用户第二次单击。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T16:28:20.083

我找到了一种以尽可能少的努力完成这项任务的方法。然而，这并不等同于创建应用程序的“好”方式。您需要考虑未来的可扩展性，例如绘制其他对象的能力......等等。因此，让我们开始了解如何使其工作。

1）让我们省略paintComponent方法......我相信这应该是paint（）。

```
 //@Override
    /*protected void paintComponent(Graphics g) {
         //Do Something...
      }*/ 
```

2）让我们添加这个方法：

```
 public void drawLineHelper(Point prev, Point next){
        Graphics g = getGraphics();
        g.setColor(Color.blue);
        g.drawLine(previousPoint.x, previousPoint.y, nextPoint.x, nextPoint.y);
    } 
```

3) 最后，我们需要对 mouseHandler 类进行一些更改：

```
 private class MouseHandler extends MouseAdapter {
        //twoPoints make sure we have two points.
        boolean twoPoints=false;

        @Override
        public void mousePressed(MouseEvent e) {
            if(twoPoints==false){
                nextPoint = e.getPoint();
                twoPoints = true;
            }
            else{
                //Set previous to next from now on.
                previousPoint = nextPoint;

                //Get a new next point.
                nextPoint = e.getPoint();

                //Helper method will draw the line each time.
                drawLineHelper(previousPoint,nextPoint);
                //repaint() no longer necessary.

            }
        }
    } 
```

这是对另一个具有相同问题的示例的快速参考。页面上的最后一篇文章解释了同样的方法：[http ://www.ozzu.com/programming-forum/java-repainting-problem-t49362.html](http://www.ozzu.com/programming-forum/java-repainting-problem-t49362.html)

# objective-c - 获取特定时区中两个 NSDate 日期之间的天数

> ID：12257937
> 
> 赞同：8
> 
> 时间：2012-09-04T06:32:34.653
> 
> 标签：objective-c, datetime, nstimezone

[我在这里](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/DatesAndTimes/Articles/dtCalendricalCalculations.html)找到了计算两个日期之间天数差异的代码。
我写了一个方法：

```
-(NSInteger)daysWithinEraFromDate:(NSDate *) startDate toDate:(NSDate *) endDate
{
    NSCalendar *gregorian = [[NSCalendar alloc]
                             initWithCalendarIdentifier:NSGregorianCalendar];
    NSInteger startDay=[gregorian ordinalityOfUnit:NSDayCalendarUnit
                                            inUnit: NSEraCalendarUnit forDate:startDate];
    NSInteger endDay=[gregorian ordinalityOfUnit:NSDayCalendarUnit
                                          inUnit: NSEraCalendarUnit forDate:endDate];
    return endDay-startDay;
} 
```

这种方法有一个问题：它不能考虑时区的事情。即使我添加这样的一行：

```
[gregorian setTimeZone:[NSTimeZone localTimeZone]]; 
```

我的测试代码是这样的：

```
 NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
    [dateFormat setDateFormat:@"yyyy-MM-dd HH:mm:ss"];
    NSString *strDate = @"2012-09-03 23:00:00";
    NSDate *dateStart = [dateFormat dateFromString:strDate];
    strDate = @"2012-09-04 01:00:00";
    NSDate *dateEnd = [dateFormat dateFromString:strDate];
    NSLog(@"Days difference between %@ and %@  is:  %d days",[dateFormat stringFromDate:dateStart],[dateFormat stringFromDate:dateEnd],[self daysWithinEraFromDate:dateStart toDate:dateEnd]); 
```

结果是：

> 2012-09-03 23:00:00 和 2012-09-04 01:00:00 之间的天数差异为：0 天

我想通过两个日期之间的午夜数得到 1 天。我的时区是 GMT +8。但是这个计算是基于格林威治标准时间的，所以我得到了错误的天数。有没有办法解决这个问题？谢谢你。

* * *

[Scott Lemmon](https://stackoverflow.com/users/1642982/scott-lemmon)的方法可以解决我的问题。我像这样重写我的代码：

```
-(NSInteger)daysWithinEraFromDate:(NSDate *) startDate toDate:(NSDate *) endDate
{
    NSCalendar *gregorian = [[NSCalendar alloc]
                             initWithCalendarIdentifier:NSGregorianCalendar];
    [gregorian setTimeZone:[NSTimeZone localTimeZone]];
    NSDate *newDate1 = [startDate dateByAddingTimeInterval:[[NSTimeZone localTimeZone] secondsFromGMT]];
    NSDate *newDate2 = [endDate dateByAddingTimeInterval:[[NSTimeZone localTimeZone] secondsFromGMT]];

    NSInteger startDay=[gregorian ordinalityOfUnit:NSDayCalendarUnit
                                            inUnit: NSEraCalendarUnit forDate:newDate1];
    NSInteger endDay=[gregorian ordinalityOfUnit:NSDayCalendarUnit
                                          inUnit: NSEraCalendarUnit forDate:newDate2];
    return endDay-startDay;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T07:01:44.353

如果时区偏移不起作用，那么手动添加或减去它怎么样？

在您的情况下`NSDate *newDate = [oldDate dateByAddingTimeInterval:(-8 * 60 * 60)];`，减去您的 +8 小时。

或者，如果您也想自动查找 GMT 偏移量，那么它就是`NSDate *newDate = [oldDate dateByAddingTimeInterval:(-[[NSTimeZone localTimeZone] secondsFromGMT])`

另一个想法：一个可能更简单的解决方案是完全忽略时间信息。只需将两个日期设置为相同的任意数字，那么只要日期来自同一时区，无论格林威治标准时间偏移如何，您将始终获得正确的午夜数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T06:38:07.973

您真正想要的是`NSDate`方法[`timeIntervalSinceDate:`](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSDate_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDate/timeIntervalSinceDate:)，并获取该结果，如果它大于 0 但小于 86400（一天中的秒数），那就是一天。否则，将您的结果除以 86400，您将得到天数。

按照您目前拥有代码的方式，两天之间只有 2 小时，这就是为什么您看到的结果是 0 而不是 1。

编辑 - 为了确定是否发生了午夜，让我们试试我刚刚写下的这个函数：

```
- (NSDate *) getMidnightDateFromDate: (NSDate *) originalDate
{
    NSDateComponents *components = [[NSCalendar currentCalendar] components:NSIntegerMax fromDate:originalDate];
    [components setHour:0];
    [components setMinute:0];
    [components setSecond:0];
    NSDate *midnight = [[NSCalendar currentCalendar] dateFromComponents:components];
    return(midnight);
}

- (BOOL) howManyDaysDifferenceBetween: startDate and: endDate
{
    NSDate * firstMidnight = [self getMidnightDateFromDate: startDate];
    NSDate * secondMidnight = [self getMidnightDateFromDate: endDate];
    NSTimeInterval timeBetween = [firstMidnight timeIntervalSinceDate: secondMidnight];

    NSInteger numberOfDays = (timeBetween / 86400);

    return(numberOfDays);
} 
```

我基于[Dave Delong 对这个问题的回答](https://stackoverflow.com/questions/8087900/how-to-retrieve-number-of-hours-past-midnight-from-an-nsdate-object)。不能保证我的代码会起作用（我没有测试它），但我认为这个概念是合理的。

# c# - 将图像写入 Process.StandardInput.BaseStream 的更快方法

> ID：12257939
> 
> 赞同：5
> 
> 时间：2012-09-04T06:32:43.790
> 
> 标签：c#, image, ffmpeg, stdin, binarywriter

我试图将大量桌面捕获的图像发送到编码器（FFmpeg）标准输入。

以下代码示例有效。

该`CaptureScreen()`功能在 5-10 毫秒内提供图像。

如果我将图像保存在 MemoryStream 中，几乎不需要时间。

> 但我只能每 45 毫秒将 1 个图像保存到 proc.StandardInput.BaseStream。

```
public void Start(string bitrate, string buffer, string fps, string rtmp, string resolution, string preset)
{
    proc.StartInfo.FileName = myPath + "\\ffmpeg.exe";
    proc.StartInfo.Arguments = "-f image2pipe -i pipe:.bmp -vcodec libx264 -preset " + preset + " -maxrate " + bitrate + "k -bufsize " +
    buffer + "k -bt 10 -r " + fps + " -an -y test.avi"; //+ rtmp;
    proc.StartInfo.UseShellExecute = false;
    proc.StartInfo.RedirectStandardInput = true;
    proc.StartInfo.RedirectStandardOutput = true;

    proc.Start();

    Stopwatch st = new Stopwatch();
    BinaryWriter writer = new BinaryWriter(proc.StandardInput.BaseStream);
    System.Drawing.Image img;

    st.Reset();
    st.Start();

    for (int z = 0; z < 100; z++)
    {
        img = ScrCap.CaptureScreen();
        img.Save(writer.BaseStream, System.Drawing.Imaging.ImageFormat.Bmp);
        img.Dispose();
    }

    st.Stop();
    System.Windows.Forms.MessageBox.Show(st.ElapsedMilliseconds.ToString());
} 
```

问题是：

我可以更快地完成保存过程吗？

我尝试以这种方式获得稳定的 60 fps

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T07:22:03.130

这里的瓶颈是 ffmpeg 读取数据的速度与压缩为 .avi 的速度相同，这很慢。因此，您的`img.Save`方法会阻塞，直到流的缓冲区中有一些空间可以写入其数据。

你无能为力。实时压缩 60 fps 高清视频需要巨大的处理能力。

# google-analytics - 谷歌分析登陆页面=（未设置）

> ID：12257942
> 
> 赞同：3
> 
> 时间：2012-09-04T06:32:52.150
> 
> 标签：google-analytics, analytics

在报告`All Traffic`中，如果我选择主要维度，因为`"Landing Page"`我看到一些（未设置）条目。为什么会发生？它的条目也有`page/visits=0, % new visits < 2% and bounce rate = 0%.`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T17:39:30.130

您是否过滤掉了综合浏览量，但事件或社交互动仍在通过过滤器并点击 GA，从而产生没有综合浏览量的新访问？然后（未设置）可能意味着您组合的维度没有真正的关系。另一个原因可能是 GA 无法查找该维度的数据，并且可能会发生一些不同的原因。

[http://analytics.blogspot.com/2009/08/back-to-basics-not-set-entries.html](http://analytics.blogspot.com/2009/08/back-to-basics-not-set-entries.html) [http://support.google.com/analytics/bin/answer.py?hl=en&answer=2820717](http://support.google.com/analytics/bin/answer.py?hl=en&answer=2820717)

# ruby - NoMethodError 如果用户输入随机 URL

> ID：12257943
> 
> 赞同：0
> 
> 时间：2012-09-04T06:32:55.020
> 
> 标签：ruby, ruby-on-rails-3, ruby-on-rails-3.1

当用户在网站 url 中输入任何随机字符串时，即`localhost:3000/rfgfgh`会`localhost:3000/gfgfgf/fhh`引发此随机错误。

我理解为什么它会引发此错误，因为我正在检查用户是否`contracter`在视图中以及它们是否显示特定的承包商代码。我还使用 slugs 来显示承包商特定的内容。如果用户去`localhost:3000/contracter`它检查蛞蝓承包商，然后呈现页面。

有哪些解决方案可以消除此错误？是否可以将用户重定向到主页？

```
NoMethodError in Users#show

undefined method `contractor?' for nil:NilClass

1: <% if @user.contractor? %>
2:  <% title "#{@user.name}" %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T06:44:07.617

根据您看到的错误，这意味着您正在调用类似的东西`@myuser.contracter?`，其中`@myuser`是 nil。

如果用户不在数据库中，它将找不到用户，并将 nil 放入`@myuser`对象中。

要将用户重定向到主页，只需检查控制器中的变量是否为零，并在必要时重定向，例如：

```
@myuser = User.find(params[:id]) # or params[:username]
if @myuser.nil? # check if nil
  redirect_to root_url, :notice => "User does not exist!" # redirect to home page
end 
```

# java - 如何将jsp表单传递到两个页面？

> ID：12257944
> 
> 赞同：0
> 
> 时间：2012-09-04T06:32:56.210
> 
> 标签：java, javascript, jsp, jsp-tags

我有一个jsp表单

```
<form action="../sup/Processor.jsp" method="POST" name="ProjectKey" id="Proje"> 
```

我想把它从 in 发送到另一个 jsp 页面。我怎样才能做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T08:06:23.417

我从您的问题中了解到，您想`<form>`在其他 JSP 中重复使用该代码段。

[如果这不是您想要的，请纠正我，我建议**在您的问题中提供更多信息，**说明您到底想要做什么以及为什么。谢谢]

因此，您可以`form`在 JSP 中使用您的，`my_form.jsp`然后使用`my_form.jsp`以下任何一种方式重用：

1.  使用`include`指令即静态包含

    ```
    <%@ include file="my_form.jsp" %> 
    ```

2.  使用[`jsp:include`](http://java.sun.com/products/jsp/tags/11/syntaxref1112.html "来自官方网站的解释")标准操作，这将`my_form.jsp`在运行时将表单包含在任何页面中。

    ```
    <jsp:include page="my_form.jsp" /> 
    ```

此外，这里还有一些可以帮助您更好地理解这一点的链接：

1.  [包括指令和`<jsp:include>`](https://stackoverflow.com/q/1271329/468763 "堆栈溢出讨论")
2.  [包含指令和标准操作之间的区别](http://javapapers.com/jsp/difference-between-jsp-include-directive-and-jsp-include-action/ "一个很好的博客解释了差异")

我建议您阅读一些关于[web 应用程序](/questions/tagged/web-application "显示标记为“网络应用程序”的问题")概念和使用[jsp](/questions/tagged/jsp "显示标记为“jsp”的问题")和[servlets](/questions/tagged/servlets "显示标记为“servlet”的问题")的好教程。[我们在stackoverflow](https://stackoverflow.com/tags "StackOverflow 的标签列表")上的标签提供了有关阅读内容以及如何深入研究该主题的良好信息。

希望这可以帮助。

# objective-c - 了解是使用协议还是继承（或两者兼而有之？）

> ID：12257945
> 
> 赞同：0
> 
> 时间：2012-09-04T06:33:01.910
> 
> 标签：objective-c

我的游戏中有一种类型的对象，它只是水平移动。它有一个这样的方法：

```
-(void)moveLeftWithBlock:(void(^)())block {
    self.targetX = self.position.x - MOVE_AMOUNT;
    id action = [CCMoveTo actionWithDuration:0.125f position:ccp(self.targetX, self.targetY)];
    id ease   = [CCEaseInOut actionWithAction:action rate:4];
    [self runAction: [CCSequence actions: ease,
                  [CCCallBlock actionWithBlock:block], nil]];
} 
```

...

现在，我想做第二种完全一样的对象，除了它也可以垂直移动......我最初的想法是子类化该对象的类，并覆盖 moveLeftWithBlock 并更新它的 targetY.. 但不仅我不喜欢那个解决方案吗，因为我仍然在两个类中得到 99% 的重复代码，而且还因为我的游戏需要在调用 moveLeftWithBlock 方法之前设置 Y 位置。

所以接下来我想——好的，所以我可以让我的游戏调用一个 prepareToMove 方法，它可以进行任何可能需要的设置……对于主要对象类型，什么都没有……对于第二个对象类型，设置目标Y。

然而，我立即开始思考——等等——我知道协议是关于显式定义可选或必需的方法，这让我觉得也许我应该在这里使用它，但我不确定如何使用。

那么，任何人都可以向我解释在这种情况下如何使用协议 - 以及它是否是“要走的路”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T06:40:28.393

这些中的任何一个都可以。您可以添加到此 andAlsoMoveVertically: (bool) isVertical 然后在函数的 if 语句中添加垂直移动。

# ios - iOS：内存中的导航控制器对象

> ID：12257955
> 
> 赞同：0
> 
> 时间：2012-09-04T06:33:45.487
> 
> 标签：ios

我正在开发一个 iOS 导航控制器应用程序并且有疑问。我在任何地方都找不到它。当我创建导航控制器并使用多个其他视图控制器进行导航时，这些视图控制器如何准确存储在内存中，当我们单击后退按钮等时，导航控制器可以导航到前一个控制器。有人可以解释一下吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T06:46:45.527

UINavigationController 存储其他视图控制器。显示视图控制器时，将其推送到导航控制器：

```
[navigationController pushViewController:viewController animated:YES]; 
```

这意味着导航控制器保留对您的视图控制器的引用，因此它不会被释放。同样，您弹出一个视图控制器以显示前一个。此时对当前视图控制器的引用被释放。请注意，即使您的视图控制器不会被释放，它仍可能像往常一样被卸载和重新加载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T07:41:25.977

这个概念很简单，就像一个堆栈。你推一个对象，你也可以弹出它。当你使用

```
[navigationController pushViewController:viewController animated:YES]; 
```

它将对象（此处为视图控制器）推送到您可以使用的视图控制器堆栈中`[navigationController viewControllers];`

你可以检查现有的控制器：

`NSLog("view controllers %@", [navigationController viewControllers]);`

viewControllers 是一个将所有对象推入其中的 NSArray。因此对特定控制器的引用始终存在，因此您可以导航回任何视图控制器

单击后退按钮会弹出`topViewController`数组。 `popToRootViewController` 将 u 弹出到 viewController 数组中添加的第一个控制器。

您还可以使用弹回数组中的特定控制器

```
[self.navigationController popToViewController: animated:]; 
```

您需要从已经提到的 NSArray(viewControllers) 传递参数，例如：

```
[self.navigationController popToViewController:[[navigationController viewControllers] objectAtIndex:1] animated:YES]; 
```

希望能帮助到你。快乐编码:)

# java - 有没有办法使用通用代码库在 Java 和 JavaScript 中进行输入验证？

> ID：12257958
> 
> 赞同：5
> 
> 时间：2012-09-04T06:34:15.087
> 
> 标签：java, javascript, spring-mvc, hibernate-validator

对于 java web 应用程序，通常我们需要在前端使用 javascript 进行验证，然后在后端使用 java 进行验证，一些 java 验证工具，如 hibernate 验证器可以在后端使用，而在客户端有 jquery 表单验证,

但问题是，有没有更简单的方法可以将两者结合起来？例如，当使用带有hiberate验证器的springmvc时，前端验证会自动出现吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T06:48:32.283

不要忘记，有两种截然不同的验证形式。

首先，验证以确保用户做出*明智*的输入。考虑通常的密码/确认密码系统。确认密码字段的唯一意义是防止用户意外给*自己带来不便。*

类似地，检查有效的电子邮件地址、必填字段等等——它们只是为了确保用户输入他真正的意思。

其次，有验证以确保仅对系统进行*合法*更改。一个用户不能更改属于另一个用户的数据，员工不能给自己加薪，等等。

第一类验证只需要在 Javascript 中完成。如果他愿意，用户可以击败他们，但他不会伤害任何人，只会伤害自己。

第二种验证*必须*在后端完成。通常，但并非总是如此，没有必要优雅地犯错。如果用户已经绕过 UI，或者对 AJAX 进行了逆向工程，您不必客气。只需返回 500 并记录入侵。

有*一些*重叠。例如，如果用户正在创建一个（假定的）唯一用户名，那么在通过所有 Javascript 检查后，唯一性检查可能会在最后一秒失败，因为其他人使用了以前未使用的名称。

但这是例外，而不是规则。大多数后端验证只是非常薄的安全性或类似安全性的检查，与前面所做的非常不同。

# php - 为什么 Apache 在执行以下 PHP 代码时会崩溃？

> ID：12257965
> 
> 赞同：-2
> 
> 时间：2012-09-04T06:34:41.170
> 
> 标签：php, arrays, apache

```
$reset_Array=(); // I forgot to put the keyword "array" 
```

正确的方法应该是

```
$rest_Array= array(); 
```

为什么`Apache`当我尝试执行错误的代码时会崩溃。

内部发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T06:50:21.337

我认为 Apache 不会崩溃。发生的情况是您的 PHP 执行中止，导致您看到`500 Internal server error`. 这是因为语法

```
$reset_Array=(); 
```

在 PHP 中无效。PHP 试图解析这一行并遇到错误。它返回此错误并中止执行。尝试以下操作：将以下内容放入新文件`test.php`中：

```
<?php

$reset_Array=();

?> 
```

并使用带有`-l`参数的命令行解释器执行此操作（*lint* - 语法检查）：

```
$ php -l test.php 
```

您将收到以下错误：

```
$ php -l publish/test.php 
PHP Parse error:  parse error in test.php on line 3
Errors parsing test.php 
```

一旦 PHP 遇到这个错误，它就无法继续执行脚本，因为它无法解析它。因此，当您尝试在 Apache 下执行它时会收到错误消息。

PS 上面的命令是从 unix/linux shell 显示的。如果您在 Windows 下运行，那么您的提示可能类似于`C:\Documents >`而不是`$`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T06:57:01.707

阿帕奇没有崩溃。只是没有显示错误。

您可以查看文件中的错误，该`error_log`文件与您的 php 脚本位于同一目录中。

您可以做的是在您的`php.ini`文件中查找未注释的行`error_reporting = foo`。将其更改`foo`为`E_ALL`.

然后它应该显示错误，而不仅仅是所谓的“崩溃”。

# objective-c - NSMutableURLRequest 获取的 NSString 中的管道

> ID：12257967
> 
> 赞同：1
> 
> 时间：2012-09-04T06:34:49.723
> 
> 标签：objective-c, pipe, nsmutableurlrequest

我有以下方法从网络服务器获取名为 parsertest.html 的文件的内容。但是大约每 5 次我运行我的程序，获取的 NSString 在最后包含一行管道

> |||||||||||||||||||||||||||||||||||||||||||||||| ||||||||||||||||||||

这是我的代码：

```
-(NSString *)fetchTest
 {

NSURL* url = [NSURL URLWithString:@"http://www.mywebserver.com/parsertest.html"];

NSMutableURLRequest* request = [[NSMutableURLRequest alloc] initWithURL:url];
[request setValue:scraperUserAgent forHTTPHeaderField:@"User-Agent"];

NSURLResponse* response = nil;
NSError* error = nil;
NSData* data = [NSURLConnection sendSynchronousRequest:request
                                     returningResponse:&response
                                                 error:&error];

NSString *dataInStringFormat = [NSString stringWithUTF8String:[data bytes]];

NSLog(@"%@",dataInStringFormat);
return dataInStringFormat;

} 
```

scraperUserAgent 设置为`"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:15.0) Gecko/20100101 Firefox/15.0"`

这是parsertest.html的内容

```
<parse>HELLO</parse>
<parse>World</parse>
<parse>digit</parse>
<parse>wow</parse>
<parse>hellonewitem</parse>
<parse>lastitem</parse> 
```

这是发生错误时 NSLog 的完整输出：

```
<parse>HELLO</parse>
<parse>World</parse>
<parse>digit</parse>
<parse>wow</parse>
<parse>hellonewitem</parse>
<parse>lastitem</parse>
|||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||| 
```

谢谢你的帮助！

马蒂亚斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T07:03:00.530

`stringWithUTF8String`需要一个以 NULL 结尾的 C 字符串，但`[data bytes]`不是以 NULL 结尾的。采用

```
NSString *dataInStringFormat = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding]; 
```

反而。

# ssh - 如何在 SSH 会话中转发本地密钥对？

> ID：12257968
> 
> 赞同：62
> 
> 时间：2012-09-04T06:34:50.220
> 
> 标签：ssh, ssh-keys

我通过 SSH 手动部署网站，我在 github/bitbucket 中管理源代码。对于每个新站点，我目前正在服务器上生成一个新的密钥对并将其添加到 github/bitbucket，以便我可以从服务器中获取机会。

我在 capistrano 中发现了一个使用本地机器的密钥对来拉取更新到服务器的功能，它是`ssh_options[:forward_agent] = true`

我该如何做这样的事情并将我的本地机器的密钥对转发到我正在通过 SSH 连接的服务器，这样我就可以避免将密钥添加到每个新站点的 github/bitbucket 中。

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-09-13T15:02:30.620

原来这很简单，完整的指南在这里[使用 SSH 转发](https://help.github.com/articles/using-ssh-agent-forwarding)

`~/.ssh/config`本质上，如果文件不存在，您需要创建一个文件。

然后，添加主机（文件中的域名或IP地址并设置`ForwardAgent yes`）

示例代码：

```
Host example.com
    ForwardAgent yes 
```

使 SSH 生活变得更加轻松。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2017-09-18T21:20:34.360

1.  创建 ~/.ssh/config
2.  填写它（主机地址是您希望允许将凭据转发到的主机的地址）：

    ```
    Host [host address]
         ForwardAgent yes 
    ```

3.  如果您尚未运行 ssh-agent，请运行它：

    ```
    ssh-agent 
    ```

4.  获取该命令的输出并将其粘贴到终端中。这将设置代理转发工作需要设置的环境变量。或者，您可以将此和步骤 3 替换为：

    ```
    eval "$(ssh-agent)" 
    ```

5.  添加要转发到 ssh 代理的密钥：

    ```
    ssh-add [path to key if there is one]/[key_name].pem 
    ```

6.  登录远程主机：

    ```
    ssh -A [user]@[hostname] 
    ```

7.  从这里，如果您登录到另一个接受该密钥的主机，它将正常工作：

    ```
    ssh [user]@[hostname] 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-24T08:47:55.230

配置文件非常有用，但代理转发的技巧就是`ssh-add`命令。似乎这必须在任何远程连接之前或重新启动计算机之后初始触发。要永久添加密钥，请尝试用户 daminetreg 的以下解决方案： [在 Ubuntu 上使用 ssh-add 永久添加私钥](https://stackoverflow.com/questions/3466626/add-private-key-permanently-with-ssh-add-on-ubuntu)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-17T18:06:30.117

要使用默认身份（id_rsa）简单地使用它，您可以使用以下几个命令：

```
ssh-add
ssh -A [username]@[server-address] 
```

# itunes-search-api - 过滤 iTunes 搜索 API 结果

> ID：12257975
> 
> 赞同：14
> 
> 时间：2012-09-04T06:35:09.870
> 
> 标签：itunes-search-api

似乎 iTunes 搜索 API 返回的结果与在 iPhone 设备上搜索时返回的结果不同（结果的顺序也不同）。

假设我希望结果与 iPhone 设备相同，我该如何使用官方搜索 API 做到这一点？

另外，有没有办法从搜索结果中过滤掉非 iPhone 应用程序？

[搜索 API 网址](http://itunes.apple.com/search?term=cat%20physics&country=us&entity=software&limit=10)

[iPhone 搜索网址](http://ax.search.itunes.apple.com/WebObjects/MZSearch.woa/wa/search?media=software&term=cat%20physics&src=hint&submit=edit)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-06T05:37:00.417

为商店开发的搜索堆栈是与开发人员工具的搜索堆栈不同的算法。

也就是说，了解以下一些有用的开发人员工具（搜索 API）功能：

*   “sort=popular”是返回结果的默认顺序。“排序=最近”是另一种选择。

*   "entity=software" 将返回 iPhone、iPod touch 和通用应用程序（在 iPad 上运行）上可用的应用程序，但如果你想要所有 iOS 应用程序，你应该使用 "entity=software,iPadSoftware"

*   将您的搜索词集中在您尝试定位的属性上。如果您知道您的搜索词是歌曲名称（而不是专辑名称或艺术家姓名），请使用“attribute=songTerm”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T22:36:45.743

您可以使用以下 API URL 发出应用商店搜索请求。去年收购 Chomp 后，有报道称苹果正在改进其内部 App Store 搜索算法。这可能与您使用 iTunes 搜索 API 和 App Store 使用的任何 API 看到的差异有关。Apple 可能专门为应用程序开发了一个单独的 API，并在 App Store 中使用，不包括音乐等其他产品，以提高性能。

```
http://itunes.apple.com/search?term=SEARCHTERM&country=us&entity=software&limit=100 
```

因此，您可以执行以下操作，以仅获取搜索词为“Gameloft”的 iPhone、iPod touch 和 Universal 应用程序的软件。

[http://itunes.apple.com/search?term=Gameloft&country=us&entity=software&limit=100](http://itunes.apple.com/search?term=Gameloft&country=us&entity=software&limit=100)

要在搜索中包含 iPad 应用程序，请使用：

[http://itunes.apple.com/search?term=Gameloft&country=us&entity=software,iPadSoftware&limit=100](http://itunes.apple.com/search?term=Gameloft&country=us&entity=software,iPadSoftware&limit=100)

查看[Apple 的文档](http://www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html)以获取更多选项。

您可以在此处尝试我将 iTunes 搜索 API 放在一起的工作示例。[示例搜索工具](http://jakesankey.com/projects/js/appster/)

# shell - 我有两个文件，我应该如何使用 shell 和 awk 脚本比较这些文件

> ID：12257976
> 
> 赞同：0
> 
> 时间：2012-09-04T06:35:10.597
> 
> 标签：shell, shell-exec

我有两个文件

文件 A 的内容

```
paybackFile_537214-760887_000_20120801.xml
paybackFile_354472-544899_000_20120801.xml
paybackFile_62-11033_000_20120801.xml
paybackFile_831669-837544_000_20120801.xml
===========================================
Total file(s) - 4
=========================================== 
```

文件 B 的内容

```
14/08/2012 12:36:01: MSG: File paybackFile_537214-760887_000_20120801.xml.gpg decrypted successfully.
13/08/2012 11:36:01: MSG: File paybackFile_62-11033_000_20120801.xml.gpg not decrypted successfully. 
```

这里我有*.xml 文件的名称。从文件 A 我们检查 ** *.xml 文件是否存在于文件 B 中，并检查它是否已成功解密。

你能帮我解决这个问题吗？

提前致谢。

问候， 斯米塔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T07:18:10.183

```
awk 'FNR==NR{a[$2".gpg"];next}(($5 in a) && ($0~/decrypted/))' filea fileb 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T11:17:46.320

这是一个脚本：

```
#!/bin/sh

FILEA=fileA
FILEB=fileB

awk -F" " ' { print $2 } ' $FILEA > .tmpfileA 
awk -F" " ' { print $5 } ' $FILEB | sed 's/\.gpg//' | grep 'decrypted successfully' > .tmpfileB

diff .tmpfileA .tmpfileB

rm -f .tmpfileA
rm -f .tmpfileB 
```

您需要更改的只是变量 FILEA 和 FILEB

当使用您提供的输入执行它时，它会给出以下结果：

```
$ testAB.ksh 
2d1
< paybackFile_521000-845442_000_20120701.xml
$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T09:29:22.673

创建一个名为 compare.awk 的脚本。把这个粘贴到里面：

```
FILENAME=="fileB" && $5 ~ /xml/ {
     if ($6 == "decrypted" && $7 == "successfully.") {
         decrypted_file[$5] = 1;
     } else {
         decrypted_file[$5] = 2;
     }
}
FILENAME=="fileA" && $2 ~ /xml/ {
    if (decrypted_file[$2".gpg"] == 1) {
        print $2" exist and decrypted";
    } else if (decrypted_file[$2".gpg"] == 2) {
        print $2" exist but not decrypted";
    } else {
        print $2" not exist in fileB";
    }
} 
```

通过以下方式调用它：

```
awk -F' ' -f compare.awk fileB fileA 
```

[编辑] 对于没有 awk 脚本的 shell，（仍然需要 grep、sed、cut 和 wc tho）：

```
#!/bin/bash

TESTA=`grep ".xml" fileA | cut -d' ' -f2`
TESTB=`grep ".xml" fileB | cut -d' ' -f5,6,7 | sed 's/ /-/g'`
DECRYPT_YES=""
DECRYPT_NO=""

for B in ${TESTB}
do
 DECRYPT_B=`echo ${B} | sed 's/.*gpg-decrypted-successfully\./1/'`
 if [ ${DECRYPT_B} == "1" ]
 then
   DECRYPT_YES=${DECRYPT_YES}" "`echo ${B} | sed 's/\.gpg.*//g'`
 else
   DECRYPT_NO=${DECRYPT_NO}" "`echo ${B} | sed 's/\.gpg.*//g'`
 fi
done

for FILE_A in ${TESTA}
do
 if [ `echo ${DECRYPT_YES} | grep "${FILE_A}" | wc -l` == 1 ]
 then
  echo ${FILE_A}" exist and decrypted"
 elif [ `echo ${DECRYPT_NO} | grep "${FILE_A}" | wc -l` == 1 ]
 then
  echo ${FILE_A}" exist but not decrypted"
 else
  echo ${FILE_A}" not exist"
 fi
done 
```

# android - 如何在editText中显示相同的值返回上一个Activity？

> ID：12257978
> 
> 赞同：0
> 
> 时间：2012-09-04T06:35:14.617
> 
> 标签：android

我正在使用两个 editText 框，例如“table no”和“no of guest”。如果我填充 editText 框并在 listView 中选择一些项目，然后转到下一个活动并再次返回上一个活动，其中 EditText 框可用，则值为空。我的要求是，当我回到上一个活动时，EditText 会显示我之前输入的数据。

发送编辑文本数据：

```
 b1.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {

                    //for (int i=0;i<GlobalClass.myval.length;i++){

                   //System .out.println("Clicked-->"+GlobalClass.myval[i]);

                    //}

            String tno = e1.getText().toString();
            int tn = Integer.parseInt(tno);

            Intent i=new Intent(getApplicationContext(),TicketActivity.class);
            Bundle b=new Bundle();
            b.putInt("Table No:", tn);
            i.putExtras(b);
            String et= e2.getText().toString();
            int et1 = Integer.parseInt(et);
            Bundle be=new Bundle();
            be.putInt("Guest:", et1);
            i.putExtras(be); 

            startActivity(i);

        }
    }); 
```

第二个活动：

```
 public void onCreate(Bundle savedInstanceState){
super.onCreate(savedInstanceState);
setContentView(R.layout.ticket);

t1=(TextView)findViewById(R.id.textView3);
t2=(TextView)findViewById(R.id.textView5);
l1=(ListView)findViewById(R.id.listView1);
or=(ImageButton)findViewById(R.id.imageButton7);
ho=(ImageButton)findViewById(R.id.imageButton4);
de=(ImageButton)findViewById(R.id.imageButton1);
pl=(ImageButton)findViewById(R.id.imageButton2);
mi=(ImageButton)findViewById(R.id.imageButton3);
pa=(ImageButton)findViewById(R.id.imageButton5);
pr=(ImageButton)findViewById(R.id.imageButton6);
// l1.setItemsCanFocus(false);
//l1.setFocusable(true);
//l1.setClickable(true);

//Get the Table no Value From Edit Text

Intent i1=getIntent();
Bundle b=i1.getExtras();
int num=b.getInt("Table No:");
pno=Integer.toString(num);
t1.setText(pno);

//Get The Guest Value From Edit Text
 Intent i2=getIntent();
 Bundle b1=i2.getExtras();
 int num1=b1.getInt("Guest:");
 pno1=Integer.toString(num1);
 t2.setText(pno1);

// List<String> st=GlobalClass.myval;

   //ArrayAdapter<String> ada = new ArrayAdapter<String>( this, android.R.layout.simple_list_item_1,st);

    l1.setAdapter(new EfficientAdapter(TicketActivity.this));

     l1.setOnItemClickListener(new OnItemClickListener(){
 public void onItemClick(AdapterView<?> parent,View view,int position,long id){

 st2=HomeActivity.select1[position];

    Toast.makeText(getApplicationContext(), "Selected:" + st2, Toast.LENGTH_SHORT).show();

    }
    });

 //GO TO PREV ACTIVITY:

    ho.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {
        Intent o2=new Intent(TicketActivity.this,HomeActivity.class);

        startActivity(o2);

    }
  });

      }

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T06:45:42.787

在调用活动中

```
Intent i = new Intent(A.this, B.class);
i.putExtra("string", editText.getText());
startActivity(i); 
```

在被调用的活动中，有一个字符串来获取这个额外的并再次将它传递给 when onStop()

```
Bundle extras = getIntent().getExtras();
String str = extras.getString("string"); 
```

在家庭活动中：

```
public void onCreate(Bundle savedInstanceState){
....
  if(getIntent().getExtras()!=null) {
     Bundle extras = getIntent().getExtras();
     if(extras.getInt("TableNo") != null && extras.getInt("Guest") != null) }
        e1.setText(extras.getInt("TableNo").toString());
        e2.setText(extras.getInt("Guest").toString());
     }
  }
....
}

   b1.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {

                //for (int i=0;i<GlobalClass.myval.length;i++){

               //System .out.println("Clicked-->"+GlobalClass.myval[i]);

                //}

        String tno = e1.getText().toString();
        int tn = Integer.parseInt(tno);
        String et= e2.getText().toString();
        int et1 = Integer.parseInt(et);

        Intent i=new Intent(getApplicationContext(),TicketActivity.class);
        i.putExtras("TableNo", tn);
        i.putExtras("Guest", et1); 

        startActivity(i);

    }
}); 
```

第二个活动：

```
 public void onCreate(Bundle savedInstanceState){
super.onCreate(savedInstanceState);
setContentView(R.layout.ticket);

t1=(TextView)findViewById(R.id.textView3);
t2=(TextView)findViewById(R.id.textView5);
l1=(ListView)findViewById(R.id.listView1);
or=(ImageButton)findViewById(R.id.imageButton7);
ho=(ImageButton)findViewById(R.id.imageButton4);
de=(ImageButton)findViewById(R.id.imageButton1);
pl=(ImageButton)findViewById(R.id.imageButton2);
mi=(ImageButton)findViewById(R.id.imageButton3);
pa=(ImageButton)findViewById(R.id.imageButton5);
pr=(ImageButton)findViewById(R.id.imageButton6);
// l1.setItemsCanFocus(false);
//l1.setFocusable(true);
//l1.setClickable(true);

//Get the Table no Value From Edit Text

Intent i1=getIntent();
Bundle b=i1.getExtras();
int num=b.getInt("TableNo"); 
pno=Integer.toString(num);
t1.setText(pno);

//Get The Guest Value From Edit Text
 Intent i2=getIntent();
 Bundle b1=i2.getExtras();
 int num1=b1.getInt("Guest");
 pno1=Integer.toString(num1);
 t2.setText(pno1);

// List<String> st=GlobalClass.myval;

   //ArrayAdapter<String> ada = new ArrayAdapter<String>( this, android.R.layout.simple_list_item_1,st);

    l1.setAdapter(new EfficientAdapter(TicketActivity.this));

     l1.setOnItemClickListener(new OnItemClickListener(){
 public void onItemClick(AdapterView<?> parent,View view,int position,long id){

 st2=HomeActivity.select1[position];

    Toast.makeText(getApplicationContext(), "Selected:" + st2, Toast.LENGTH_SHORT).show();

    }
    });

 //GO TO PREV ACTIVITY:

    ho.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {

        String tno = t1.getText().toString();
        int tn = Integer.parseInt(tno);
        String et= t2.getText().toString();
        int et1 = Integer.parseInt(et);

        Intent o2=new Intent(TicketActivity.this,HomeActivity.class);
        i.putExtras("TableNo", tn);
        i.putExtras("Guest", et1);
        startActivity(o2);

    }
  });

      }

    } 
```

**此外，尝试从逻辑上命名变量。随机命名不是一个好的编程习惯，可能会妨碍代码的可维护性。**

注意：请纠正一些小错误（如果有）。我现在没有 android sdk，所以无法编译这段代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T06:57:57.387

转到下一个活动时保存 EditText 字段的值。然后在您返回之前的活动时检索该值。两步：

1.  您需要覆盖 onSaveInstanceState(Bundle savedInstanceState) 并保存 EditText 字段的值：

    @Override
    public void onSaveInstanceState(Bundle savedInstanceState)
    {
    super.onSaveInstanceState(savedInstanceState);
    savedInstanceState.putString("MyString", "EditText value");
    }

2.  Bundle 本质上是一种存储 NVP（“名称-值对”）映射的方式，它将被传递给 onCreate 和 onRestoreInstanceState，您可以在其中提取如下值：

    @Override
    public void onRestoreInstanceState(Bundle savedInstanceState)
    {
    super.onRestoreInstanceState(savedInstanceState);
    String myString = savedInstanceState.getString("MyString");
    }

您通常会使用这种技术来存储应用程序的实例值（选择、未保存的文本等）。

回答礼貌：[使用 Save Instance State 保存 Android Activity 状态](https://stackoverflow.com/questions/151777/saving-activity-state-in-android/151940#151940)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T09:55:54.153

声明一个类并声明一个静态变量并将值存储在静态变量中 像这样

```
public class globalconstant 
{ 
  public static String edtStr; 
} 
```

储存价值

```
globalconstant.edtStr = edt.getText().toString(); 
```

当你想使用时，只需调用`globalconstant.edtStr`

# sql-server - 创建动态 sql server 表的示例代码

> ID：12257980
> 
> 赞同：0
> 
> 时间：2012-09-04T06:35:22.063
> 
> 标签：sql-server

我试图建立一个使用电子货币的网站。例如，WebMoney 货币有自己的一组参数，如 wmid 等。而 uKash 有自己的参数，还有一系列其他参数，如电子邮件等。现在不清楚引入了多少货币站点管理员，而未知参数 我心想，银行币应该构建在一个动态的表中，用户可以设置参数。知道我不知道如何实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:12:22.050

Tables can't have dynamic columns

You can add a table for each form of web currency that contains the parameters those currencies require = ie: A WebMoney table, a uKash table, etc.

Or you can add an XML column to your main table that contains the variable data information for the specific web currency in question. eg:

```
<webcurrency type="webmoney">
    <wmid>1</wmid>
<webmoney> 
```

and

```
<webcurrency type="uKash">
    <email>bob@ukash.com</email>
<webmoney> 
```

Given your intention to allow for future currencies, perhaps the second choice is preferable.

# android - 将数组列表从弹出窗口传递给父活动

> ID：12257982
> 
> 赞同：1
> 
> 时间：2012-09-04T06:35:33.193
> 
> 标签：android, arrays

我有一个弹出活动窗口（使用充气机）和一个数组

```
public class PopUp extends Activity{

ArrayList<String> nameSave = new ArrayList<String>();
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.popup_layout);
    getActionBar().setDisplayHomeAsUpEnabled(true);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.popup_layout, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case android.R.id.home:
            NavUtils.navigateUpFromSameTask(this);
            return true;
    }
    return super.onOptionsItemSelected(item);
}
public void upload(View view)
{

    EditText editText = (EditText) findViewById(R.id.nameBox);  
    String name = editText.getText().toString();        
    nameSave.add(name);

} 
```

首先，我什至不确定我的数组/列表是否正常工作。基本上，当该人点击“上传”按钮时，我希望它获取名称并将其添加到数组中。然后我希望将该数组发送回具有 2 个片段的上一个活动（启动）。一个片段是一个列表视图，我想将数组的内容放入该片段中。我该如何传递这个数组？就像把它放在一个意图中一样简单吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T06:54:11.507

是的，您可以输入您的意图，并在您完成此操作时`putStringArrayListExtra(name, value)`传递意图。您可以通过下面描述的方法获取意图，因为该方法将在您当前完成时调用。因此，获取所需的数据并使用这些数据做任何你想做的事情。或者您也可以将数组放入意图中。`startActivityForResult(intent, requestCode)``Activity``Activity`

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    if (requestCode == REQUEST_CODE && resultCode == RESULT_OK) {
        get your data here and do what ever you want to do with it
    }
} 
```

在之前的活动中。我是这会帮助你。

# vb.net - VB.NET 中的“提取接口”？

> ID：12257983
> 
> 赞同：3
> 
> 时间：2012-09-04T06:35:39.283
> 
> 标签：vb.net, refactoring, visual-studio-2005

有没有办法`Extract Interface`在 in 时使用重构选项`VB.NET`？

我注意到`Refactor`在 VB.NET 中的右键单击上下文菜单中没有显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T06:56:59.433

自 VS 2005 以来，Microsoft 与 DevExpress 达成协议，为 Visual Basic 提供免费的重构工具。对于 VS 2005/2008 寻找 Refactor!，对于较新的版本，请尝试 CodeRush Express。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-22T14:59:51.943

在 VB.net 2015 中，使用`Edit`> `Refactor`> `Extract Interface`。已添加此功能。

# sql - ID 最高的行

> ID：12257984
> 
> 赞同：-3
> 
> 时间：2012-09-04T06:35:47.177
> 
> 标签：sql

您有三个字段 ID、日期和总计。您的表格包含同一天的多行，这是有效数据，但出于报告目的，您每天只需要显示一行。应该返回每天 ID 最高的行，其余的应该对用户隐藏（不返回）。为了更好地描绘下面的问题是示例数据和示例输出：

```
ID, Date, Total
1, 2011-12-22, 50
2, 2011-12-22, 150 
```

正确的结果是：

```
2, 2012-12-22, 150 
```

正确的输出是 2011-12-22 日期的单行，选择该行是因为它具有最高 ID (2>1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T06:39:12.153

```
SELECT *
FROM table
WHERE ID IN ( SELECT MAX(ID)
              FROM table
              GROUP BY Date ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T06:39:41.950

这将起作用。

```
SELECT  *
FROM    tableName a
            INNER JOIN
            (
                SELECT `DATE`, MAX(ID) maxID
                FROM tableName
                GROUP BY `DATE`
            ) b ON a.id = b.MaxID AND
                a.`date` = b.`date` 
```

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!2/3aaa9/5)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T06:41:42.203

*假设*您有一个支持窗口函数的数据库，并且该`date`列确实只是`date`（而不是`datetime`），那么类似于：

```
SELECT
    * --TODO - Pick columns
FROM
    (
       SELECT ID,[Date],Total,ROW_NUMBER() OVER (PARTITION BY [Date] ORDER BY ID desc) rn
       FROM [Table]
    ) t
WHERE
   rn = 1 
```

应该每天产生一行 - 任何给定日期的选定行都是具有最高`ID`值的行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T06:38:25.010

```
Select MAX(ID),Data,Total from foo 
```

对于 MySQL

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-04T06:38:45.177

大概

```
SELECT * FROM your_table ORDER BY ID DESC LIMIT 1 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-20T06:26:59.240

另一种简单的方法是

```
SELECT TOP 1 * FROM YourTable ORDER BY ID DESC 
```

而且，我认为这是最简单的方法！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-03-07T19:58:03.377

```
SELECT * FROM TABLE_SUM S WHERE S.ID = 
( 
SELECT MAX(ID) FROM TABLE_SUM
WHERE CDATE = GG.CDATE
GROUP BY CDATE 
) 
```

# vba - Outlook VBA - 每半小时运行一次代码

> ID：12257985
> 
> 赞同：25
> 
> 时间：2012-09-04T06:35:58.530
> 
> 标签：vba, outlook

我想每半小时在 Outlook(VBA) 中运行一个特定的代码。

此外，Outlook 用户在代码运行时不应受到干扰。它应该只在后端运行。

有一个事件叫`Application_Reminder`. 它在 Outlook 中每次出现提醒时运行。但这仍然涉及用户交互。我想要一个完整的后端程序。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-04T17:33:06.317

[http://www.outlookcode.com/threads.aspx?forumid=2&messageid=7964](http://www.outlookcode.com/threads.aspx?forumid=2&messageid=7964)

将以下代码放入 ThisOutlookSession 模块（工具->宏->VB 编辑器）：

```
Private Sub Application_Quit()
  If TimerID <> 0 Then Call DeactivateTimer 'Turn off timer upon quitting **VERY IMPORTANT**
End Sub

Private Sub Application_Startup()
  MsgBox "Activating the Timer."
  Call ActivateTimer(1) 'Set timer to go off every 1 minute
End Sub 
```

将以下代码放入新的 VBA 模块中

```
Declare Function SetTimer Lib "user32" (ByVal hwnd As Long, ByVal nIDEvent As Long, ByVal uElapse As Long, ByVal lpTimerfunc As Long) As Long
Declare Function KillTimer Lib "user32" (ByVal hwnd As Long, ByVal nIDEvent As Long) As Long

Public TimerID As Long 'Need a timer ID to eventually turn off the timer. If the timer ID <> 0 then the timer is running

Public Sub ActivateTimer(ByVal nMinutes As Long)
  nMinutes = nMinutes * 1000 * 60 'The SetTimer call accepts milliseconds, so convert to minutes
  If TimerID <> 0 Then Call DeactivateTimer 'Check to see if timer is running before call to SetTimer
  TimerID = SetTimer(0, 0, nMinutes, AddressOf TriggerTimer)
  If TimerID = 0 Then
    MsgBox "The timer failed to activate."
  End If
End Sub

Public Sub DeactivateTimer()
Dim lSuccess As Long
  lSuccess = KillTimer(0, TimerID)
  If lSuccess = 0 Then
    MsgBox "The timer failed to deactivate."
  Else
    TimerID = 0
  End If
End Sub

Public Sub TriggerTimer(ByVal hwnd As Long, ByVal uMsg As Long, ByVal idevent As Long, ByVal Systime As Long)
  MsgBox "The TriggerTimer function has been automatically called!"
End Sub 
```

关键点：

1) 此定时器功能不需要打开特定的窗口；它在后台工作

2）如果您在应用程序关闭时不停用计时器，它可能会崩溃

3) 该示例显示了在启动时激活的计时器，但它可以很容易地被不同的事件调用

4）如果你没有看到提示定时器在启动时被激活的消息框，你的宏安全设置太高了

5) 要在时间间隔的一次迭代后停用计时器，请添加： If TimerID <> 0 Then Call DeactivateTimer 在 sub TriggerTimer 中的 msgbox 语句之后

别人建议

“需要注意的一点，如果您不检查 TimerID 是否与 TriggerTimer 中的 idevent 相同，那么您会经常获得，而不是您要求的时间。”

```
Public Sub TriggerTimer(ByVal hwnd As Long, ByVal uMsg As Long, ByVal idevent As Long, ByVal Systime As Long)
    'keeps calling every X Minutes unless deactivated
    If idevent = TimerID Then
        MsgBox "The TriggerTimer function has been automatically called!"
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-05-05T23:32:19.037

对于 Win64，我需要将其更改为：

```
Declare PtrSafe Function SetTimer Lib "user32" (ByVal hwnd As LongLong, ByVal nIDEvent As LongLong, ByVal uElapse As LongLong, ByVal lpTimerfunc As LongLong) As LongLong
Declare PtrSafe Function KillTimer Lib "user32" (ByVal hwnd As LongLong, ByVal nIDEvent As LongLong) As LongLong

Public TimerID As LongLong 'Need a timer ID to eventually turn off the timer. If the timer ID <> 0 then the timer is running

Public Sub TriggerTimer(ByVal hwnd As Long, ByVal uMsg As Long, ByVal idevent As Long, ByVal Systime As Long)
  MsgBox "The TriggerTimer function has been automatically called!"
End Sub

Public Sub DeactivateTimer()
Dim lSuccess As LongLong
  lSuccess = KillTimer(0, TimerID)
  If lSuccess = 0 Then
    MsgBox "The timer failed to deactivate."
  Else
    TimerID = 0
  End If
End Sub

Public Sub ActivateTimer(ByVal nMinutes As Long)
  nMinutes = nMinutes * 1000 * 60 'The SetTimer call accepts milliseconds, so convert to minutes
  If TimerID <> 0 Then Call DeactivateTimer 'Check to see if timer is running before call to SetTimer
  TimerID = SetTimer(0, 0, nMinutes, AddressOf TriggerTimer)
  If TimerID = 0 Then
    MsgBox "The timer failed to activate."
  End If
End Sub 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-03-22T02:12:36.127

更正 64 位的上层答案：

```
Declare PtrSafe Function SetTimer Lib "user32" (ByVal hwnd As LongLong, ByVal nIDEvent As LongLong, ByVal uElapse As LongLong, ByVal lpTimerfunc As LongLong) As LongLong
Declare PtrSafe Function KillTimer Lib "user32" (ByVal hwnd As LongLong, ByVal nIDEvent As LongLong) As LongLong

Public TimerID As LongLong 'Need a timer ID to eventually turn off the timer. If the timer ID <> 0 then the timer is running

Public Sub TriggerTimer(ByVal hwnd As Long, ByVal uMsg As Long, ByVal idevent As Long, ByVal Systime As Long)
  MsgBox "The TriggerTimer function has been automatically called!"
End Sub

Public Sub DeactivateTimer()
Dim lSuccess As LongLong              '<~ Corrected here
  lSuccess = KillTimer(0, TimerID)
  If lSuccess = 0 Then
    MsgBox "The timer failed to deactivate."
  Else
    TimerID = 0
  End If
End Sub

Public Sub ActivateTimer(ByVal nMinutes As Long)
  nMinutes = nMinutes * 1000 * 60 'The SetTimer call accepts milliseconds, so convert to minutes
  If TimerID <> 0 Then Call DeactivateTimer 'Check to see if timer is running before call to SetTimer
  TimerID = SetTimer(0, 0, nMinutes, AddressOf TriggerTimer)
  If TimerID = 0 Then
    MsgBox "The timer failed to activate."
  End If
End Sub 
```

# java - 如何重新安排 Quartz 中的作业执行间隔？

> ID：12257990
> 
> 赞同：6
> 
> 时间：2012-09-04T06:36:39.387
> 
> 标签：java, quartz-scheduler

我对石英有点陌生。有没有办法更新已经提交的 Quartz 作业的作业执行间隔？这个间隔会立即更新吗？重新安排工作后是否必须重新开始工作？

我找到了以下链接，但我不知道代码引用了哪些库，因为我的石英罐不包含链接中使用的某些类。另外，triggerKey 方法是从哪里来的？这是某种静态导入吗？

[http://www.quartz-scheduler.org/documentation/2.4.0-SNAPSHOT/cookbook/UpdateTrigger.html](http://www.quartz-scheduler.org/documentation/2.4.0-SNAPSHOT/cookbook/UpdateTrigger.html)

我想在我的一个 JUnit 测试用例中将作业执行间隔更新为一个非常大的数字，因为我不希望作业干扰被测类的状态。测试用例完成后，我想将作业执行间隔重置为将在生产中使用的实际值

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-28T02:08:49.420

您必须通过创建新触发器来重新安排作业。

```
public void execute(JobExecutionContext context) throws JobExecutionException {
    Trigger newTrigger = what_ever_you_want;
    Trigger oldTrigger = context.getTrigger();
    Scheduler scheduler = StdSchedulerFactory.getDefaultScheduler();
    scheduler.rescheduleJob(oldTrigger.getKey(), newTrigger);
} 
```

这将用新的触发器触发时间替换相同的作业。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-05T05:19:15.467

也许在 Quartz 库的某个地方有一个静态方法 triggerKey()。但是，我设法重新安排了现有的 Quartz 作业（使用 Quartz 2.3.2），而不使用这种（潜在的）方法，而是使用 TriggerKey 类，如下所示：

```
 boolean updateExisting = true; // try it also with false
    int aveId = 1234; // change it as you wish
    java.util.Date closeDate = new java.util.Date(); // change it as you wish

    SchedulerFactory sf = new StdSchedulerFactory("... /quartz_priority.properties");
    Scheduler scheduler = sf.getScheduler();

    TriggerKey triggerKey = new TriggerKey("trigger" + aveId, "group1");

    if (updateExisting) {
        Trigger oldTrigger = scheduler.getTrigger(triggerKey);
        TriggerBuilder oldTriggerBuilder = oldTrigger.getTriggerBuilder();

        Trigger newTrigger = oldTriggerBuilder.startAt(closeDate).build();
        scheduler.rescheduleJob(triggerKey, newTrigger);

    } else {
        Trigger trigger = TriggerBuilder.newTrigger().withIdentity(triggerKey).startAt(closeDate).build();

        // Define job instance
        JobDetail job1 = JobBuilder.newJob(<YOUR_JOB_CLASS_NAME>.class).withIdentity("job" + aveId, "group1").build();

        JobDataMap map = job1.getJobDataMap();
        map.put(<PARAMETER_NAME>, aveId);

        // Schedule the job with the trigger
        scheduler.scheduleJob(job1, trigger);
    } 
```

# java - 如何在java中的结果集中添加列？

> ID：12257993
> 
> 赞同：2
> 
> 时间：2012-09-04T06:36:45.553
> 
> 标签：java, sql, resultset

我有表员工

我将列检索为 `select emp_name,emp_add from employee`

```
while(iResultSet1.next())
            {
                List expRptColWise = new ArrayList();

                for(Integer i=1;i<=iResultSet1.getMetaData().getColumnCount();i++){

                        expRptColWise.add(iResultSet1.getString(i));

                }

                expRptRowWise.add(expRptColWise); 
```

有了上面的片段，我得到

```
emp_name | emp_add |
A        | add1    |
B        | add2    | 
```

我想在结果集中添加序列号列，以便我得到结果

```
emp_name | emp_add |Sr_No|
A        | add1    |1    |
B        | add2    |2    | 
```

请指导我如何在结果集或集合对象中动态添加列，这里我使用了 ArrayList。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-04T06:44:32.343

使用以下查询

```
 select emp_name,emp_add, (ROW_NUMBER() OVER ( ORDER BY emp_name)) AS sr_no from employee 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-04T06:48:58.383

在 While 循环中设置一个计数器，每次递增并在输出中使用它：

```
int j = 0;
while(iResultSet1.next())
{
   j++;
   List expRptColWise = new ArrayList();
   for(Integer i=1;i<=iResultSet1.getMetaData().getColumnCount();i++)
   {
      expRptColWise.add(iResultSet1.getString(i));
   }
   expRptColWise.add(j);
   expRptRowWise.add(expRptColWise);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-04T06:48:58.443

我更喜欢 DinupKandel 的回应，但这只是因为我们不应该把所有的鸡蛋放在同一个篮子里

```
int row = 0;
while(iResultSet1.next())
{
    List expRptColWise = new ArrayList();
    for(Integer i=1;i<=iResultSet1.getMetaData().getColumnCount();i++){
        expRptColWise.add(iResultSet1.getString(i));
    }
    expRptColWise.add(++row);
    expRptRowWise.add(expRptColWise);
} 
```

可能对你有用

# database - 减少表列数

> ID：12257994
> 
> 赞同：1
> 
> 时间：2012-09-04T06:36:53.477
> 
> 标签：database, sqlite, normalization

我正在尝试将庞大的数据电子表格转换为数据库以使数据分析更容易，但我遇到了列太多的问题。我已经尽力了解规范化，但我很难将它应用到这个用例中。

## 设想

我们正在对矩形块执行 N 个*独立测量。*测量包括：

*   长度（或测量 0）
*   宽度（或测量 1）
*   高度（或测量 2）
*   质量（或测量 3）
*   颜色（或测量 4）
*   ...
*   测量 N

有超过 7000 个测量值（复杂的块）！测量有限制。如果一个块未能通过一次或多次测量，则重复所有测量以进行验证。如果再次失败，则该块被视为失败。

这些块是序列化的，并且有数千个。

## 数据源

一个巨大的电子表格（表格）。这些字段是：块编号、长度、宽度、高度、质量、颜色、...、测量 N。每一行代表一次测试运行或所有测量的执行。由于我们有重新测试策略，因此可能有多个行的结果来自同一个块。

## 帮助！

此源表似乎是一种直观的格式，但似乎不是数据库的最佳格式。起初我试图把它放在一个 SQLite 数据库中并遇到了 2000 列的限制。是的，我可以用更多列重新编译 SQLite 或使用另一个数据库引擎，但这听起来更像是一个数据库设计问题。你有更好的设计理念吗？

PS抱歉这么久，但感谢阅读！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T07:37:50.547

听起来您需要一个`MeasurementType`表格来保存所有测量的名称以及您可能想要存储的有关测量的任何其他信息。

然后你会有一个`Measurement`表同时引用`MeasurementType`你的电子表格的“原始”表（即与`Block Number`列一起离开的表）：

```
CREATE TABLE MeasurementType (
    MeasurementTypeId INTEGER PRIMARY KEY AUTOINCREMENT,
    MeasurementType TEXT NOT NULL);

CREATE TABLE OriginalTable (
    OriginalTableId INTEGER PRIMARY KEY AUTOINCREMENT,
    BlockNumber INTEGER NOT NULL);

CREATE TABLE Measurement (
    MeasurementTypeId INTEGER NOT NULL,
    OriginalTableId INTEGER NOT NULL,
    MeasurementValue,
    PRIMARY KEY (MeasurementTypeId, OriginalTableId),
    FOREIGN KEY (MeasurementTypeId) REFERENCES MeasurementType (MeasurementTypeId),
    FOREIGN KEY (OriginalTableId) REFERENCES OriginalTable (OriginalTableId)); 
```

# iphone - ZBar API 嵌入式扫描仪模糊问题

> ID：12257995
> 
> 赞同：0
> 
> 时间：2012-09-04T06:37:00.080
> 
> 标签：iphone, ios5, barcode-scanner, zbar-sdk

我在我的一个项目（iOS SDK 5.1、XCode 4.4.1 和运行 iOS 5.5.1 的设备）中使用 ZBar iPhone SDK。我正在使用 SDK 本身提供的示例中的嵌入式扫描仪。

现在我面临的问题是我成功扫描了条形码并移动到另一个视图控制器（使用导航控制器）。当我回来（弹出第二个视图控制器）扫描仪即**ZBarReaderView**不扫描后续条形码时，实际上覆盖显示扫描条形码的模糊图像并且永远无法正确扫描它。

这就是我所实施的。在`BarScannerViewController.h`我已经宣布

```
ZBarReaderView*             readerView; 
```

有财产

```
@property (nonatomic , retain)    IBOutlet UIImageView* imgvScannedBarCode; 
```

现在这已连接到 xib 中的视图之一。

最后我使用设置所需的方法如下 -

```
- (void)viewDidLoad {
    [super viewDidLoad];

    // the delegate receives decode results
    readerView.readerDelegate = self;
    [readerView start];
}

- (void) viewDidAppear: (BOOL) animated {
    // run the reader when the view is visible
    [activityIndicatorScanning startAnimating];
    [readerView start];
}

- (void) viewWillDisappear: (BOOL) animated {
    [activityIndicatorScanning stopAnimating];
    [readerView stop];
} 
```

完成所有这些设置后，当我第一次扫描任何条码时说 EAN123

```
- (void) readerView: (ZBarReaderView*) view
     didReadSymbols: (ZBarSymbolSet*) syms
          fromImage: (UIImage*) img
{
    // do something useful with results
    ZBarSymbol *symbol = nil;
    for(symbol in syms) {
        barCodeFound = YES;
        break;
    }
    // EXAMPLE: do something useful with the barcode data
    NSLog(@"%@",symbol.data);
} 
```

但是在随后的运行中（在我推送视图并再次返回此屏幕后）我的视图变得模糊。

![在此处输入图像描述](../Images/510ae02e7d5f079ae574dcbd42d603ae.png)

![在此处输入图像描述](../Images/0bf6438f1a5b653319c6d707dd3e6716.png)

我在这里错过了什么吗？任何帮助/建议/评论都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T12:02:02.107

我可以通过在我的项目中重新配置 SDK 来解决模糊问题。我按照 ZBarSDk 上提供的嵌入式扫描仪示例进行操作。我想我可能在之前配置时错过了一些基本设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T10:26:13.173

这是我用来启动（并无休止地重新启动）扫描仪的代码。有趣的是，我注意到我从不停止扫描，但它的工作非常可靠。

```
- (void) startScan
{
    ZBarReaderViewController *reader = [ZBarReaderViewController new];

    reader.readerDelegate = self;

    ZBarImageScanner *scanner = reader.scanner;

    [scanner setSymbology: ZBAR_I25
                   config: ZBAR_CFG_ENABLE
                   to: 0];

    // present and release the controller
    [self presentViewController:reader animated:YES completion:nil]; // Modal
    [reader release];
} 
```

# linux - Linux 如何安装udev？

> ID：12257997
> 
> 赞同：-1
> 
> 时间：2012-09-04T06:37:19.840
> 
> 标签：linux

我下载了udev-172，但是不知道怎么安装。

以下是我下载的文件：

```
 -003:~/Downloads/udev-172$ ls
aclocal.m4  config.h.in   extras        libudev      NEWS    TODO
autogen.sh  configure     gtk-doc.make  m4           README  udev
build-aux   configure.ac  init          Makefile.am  rules   udev.conf
ChangeLog   COPYING       INSTALL       Makefile.in  test 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T13:59:16.887

好吧，对于那个愚蠢的新手问题，我很抱歉。

```
./configure
make
make install 
```