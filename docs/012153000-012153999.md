# StackOverflow 问答 12153000-12153999

# php - jEditable 选择数据源

> ID：12153000
> 
> 赞同：0
> 
> 时间：2012-08-28T04:55:58.570
> 
> 标签：php, jquery, mysql, jeditable

我正在尝试使用 jEditable 选择更新字段。我正在从我的数据库中提取 jEditable 选择的数据。查询数组如下所示：

Array ([0] => Array([conference_id] => 1 [conference_name] => Allegheny Mountain) 等等……</p>

我想在下拉列表中显示会议名称，但使用会议 ID 作为插入数据库的值。目前我得到的只是一个选择值的空白列表。有人对我如何让它做我想做的事情有任何想法吗？

这是我在下面的代码：

```
<?php
try {
    // Connect to the database
    $db = new PDO('mysql:host=localhost;dbname=football;', 'fbdbuser', 'fbdbpass');
} catch(PDOException $e) {
    echo $e->getMessage();
}
try {
    // Retrieve all team information
    $query = $db->prepare("SELECT * FROM team ORDER BY team_name");
    $query->execute();
    $result = $query->fetchAll(PDO::FETCH_ASSOC);
    // Retrieve all conferences
    $query_conference = $db->prepare("SELECT conference_id, conference_name FROM conference ORDER BY conference_name");
    $query_conference->execute();
    $result_conference = $query_conference->fetchAll(PDO::FETCH_ASSOC);
} catch(PDOException $e) {
    echo $e->getMessage();
}
?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <script src="js/jquery.js"></script>
    <script src="js/jeditable.js"></script>
    <script>
    $(document).ready(function() {
        $(".editable_conference").editable('update_conference.php', {
            data        : '<?php echo json_encode($result_conference); ?>',
            type        : 'select',
            indicator   : 'Saving...', 
            submit      : "OK", 
            tooltip     : "Click to Update" 
        });
    });
    </script>
    <title></title>
</head>
<body>
<h1 align="center">Update Teams Below</h1>
<?php //echo '<pre>' . print_r($result_conference) . '</pre>'; ?>
<table align="center" width="90%" border="1" cellpadding="5" cellspacing="0">
<tr bgcolor="#CCCCCC">
    <td>TEAM</td>
    <td>MASCOT</td>
    <td>STATE</td>
    <td>CONFERENCE</td>
    <td>DISTRICT</td>
    <td>CLASS</td>
</tr>
<?php foreach ($result as $value) { ?>
    <tr>
        <td><?php echo $value['team_name']; ?></td>
        <td class="editable_mascot" id="<?php echo $value['team_id']; ?>"><?php echo $value['team_conference']; ?></td>
        <td class="editable_state" id="<?php echo $value['team_id']; ?>"><?php echo $value['team_mascot']; ?></td>
        <td class="editable_conference" id="<?php echo $value['team_id']; ?>"><?php echo $value['team_state']; ?></td>
        <td class="editable_district" id="<?php echo $value['team_id']; ?>"><?php echo $value['team_district']; ?></td>
        <td class="editable_classification" id="<?php echo $value['team_id']; ?>"><?php echo $value['team_classification']; ?></td>
    </tr>
<?php } ?>
</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T06:20:12.430

你应该了解的现象`jeditable`。

您正在使用`<?php echo json_encode($result_conference); ?>`并且此变量是多维数组。您可以将其设为一维并传递可以正常工作的数据。

```
$result_conference = $query_conference->fetchAll(PDO::FETCH_ASSOC);
$conf = array();
foreach($result_conference as $val){
    $conf[$val['conference_id']] = $val['conference_name'];
} 
```

使用`$conf`变量来代替`$result_conference`

# vba - vba PowerPoint 2010 打开多个文件，复制模块和用户表单，另存为.pptm

> ID：12153002
> 
> 赞同：4
> 
> 时间：2012-08-28T04:56:06.940
> 
> 标签：vba, save, powerpoint

标题说得差不多了。

1.  我需要在一个目录中递归地打开所有的 PowerPoint 文件（完成）。
2.  我需要从已经打开的文件中复制用户表单和模块。
3.  我需要将原始目录中的所有 PowerPoint 文件重新保存为启用宏的 PowerPoint 文档。

对于加分**，我如何确保所有文件都具有与原始文件相同的母版幻灯片，并且当母版更改时幻灯片会更新**。

这是打开文件的代码。有用。

```
Sub OpenAllFiles()

Dim colFiles As New Collection
Dim vFile As Variant
RecursiveDir colFiles, "C:\Users\Debra\Dropbox\School\Mathematics\Notes", "*.pptx", True
For Each vFile In colFiles    
        Presentations.Open (vFile)
Next vFile
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T09:15:39.973

您提出的问题（在*奖金*之前）

这段代码

*   打开`strDir` ie *c:\temp*下的所有文件
*   从当前 PPT 文件中导出一个模块*Module1*和一个*用户窗体 UserForm*
*   将这些文件保存`strDir`为*pptm*文件
*   删除原始*pptx*文件

**代码**

```
Sub OpenAllFiles()
Dim ppPres As Presentation
Dim fName As String
Dim strDir As String
Dim VbComp1
Dim VbComp2
Set VbComp1 = ActivePresentation.VBProject.VBComponents("Module1")
Set VbComp2 = ActivePresentation.VBProject.VBComponents("UserForm1")
strDir = "c:\temp\"
VbComp1.Export strDir & "\mod1.bas"
VbComp2.Export strDir & "\uf1.frm"

fName = Dir(strDir & "\*.pptx")
Do While fName <> vbNullString
Set ppPres = Presentations.Open(strDir & "\" & fName, msoFalse)
With ppPres
.VBProject.VBComponents.Import strDir & "\mod1.bas"
.VBProject.VBComponents.Import strDir & "\uf1.frm"
.SaveAs Replace(ppPres.Name, "pptx", "pptm"), ppSaveAsOpenXMLShowMacroEnabled
.Close
'remove original pptx file
Kill Dir(strDir & "\*.pptx")
fName = Dir
End With
Loop
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T07:48:35.550

如果您获得对`Presentation`从您返回的对象的引用，则`Presentations.Open`可以直接操作打开的演示文稿。否则，您必须在打开 Presentations 对象后循环它们。当你有一个`Presentation`对象时，你可以看到`SlideMaster`used for that `Presentation`。至于复制 VBA 代码，您可以尝试类似[http://www.cpearson.com/excel/vbe.aspx](http://www.cpearson.com/excel/vbe.aspx)或[http://www.mrexcel.com/articles/copy-vb ​​a-module.php](http://www.mrexcel.com/articles/copy-vba-module.php)

例子：

```
Option Explicit

Sub Test()
    'Declare variables
    Dim oPres As Presentation
    Dim oMaster As Master

    'Get presentation
    Set oPres = Presentations.Open("Gud vilken härlig powerpoint.pptx")

    'Get master
    Set oMaster = oPres.SlideMaster

    'Do something
    Debug.Print oPres.Name
    Debug.Print oMaster.Name

    'Save as macro-ppt
    Call oPres.SaveAs("NEW-FILE-NAME.pptm", ppSaveAsOpenXMLPresentationMacroEnabled)

    'Clean up
    Set oMaster = Nothing
    Set oPres = Nothing

End Sub 
```

# nhibernate - Nhibernate中的一对零或一个映射

> ID：12153005
> 
> 赞同：1
> 
> 时间：2012-08-28T04:56:30.533
> 
> 标签：nhibernate, nhibernate-mapping

我有 Person 和 LoginAccount 类，我想在其中进行一对零或一对一的映射。即一个人可以有零个或只有一个登录帐户。

我试过这个.. Person.hbm.xml

```
<?xml version="1.0" encoding="utf-8" ?> 
```

```
<id name="PersonID">
  <generator class="native" />
</id>

<property name="Title" />
<property name="FirstName"  />
<property name="SecondName"  />
<property name="ThirdName"  />
<property name="LegalFullName"  />
<property name="LegalFullNameLocal"  />
<property name="AliasFullName"  />
<property name="Suffix"  />
<property name="PreviousLegalName"  />
<property name="ReasonForNameChange"  />
<many-to-one class="OESPCS.Model.LoginAccount" column="LoginAccountID" name="LoginAccount"  foreign-key="fk_LoginAccountID_Person"  unique="true">

</many-to-one> 
```

登录帐户.hbm.xml

```
<?xml version="1.0" encoding="utf-8" ?> 
```

```
<class name ="LoginAccount">

  <id name="LoginAccountID">
    <generator class="native" />
  </id>

  <property name="LoginId" unique="true" />
  <property name="Password" />
  <property name="SaltKey" />
  <property name="PasswordChangedOnDate"/>
  <property name="IsPasswordChangeRequired" />
  <property name="IsKeepSignedIn" />
  <property name="IsMultiSessionAllowed" />

  <property name="PrivacyPolicyVersion" />
  <property name="IsLocked"  />
  <property name="LockedOnDate" />
  <property name="LockedTillDate" />
  <property name="IsDisabled" />
  <property name="DisabledOnDate"  />
  <property name="DisabledTillDate" />

  <property name="LoginFailAttempts" />

  <one-to-one class="OESPCS.Model.Person" name="person"  foreign-key="fk_LoginAccount_PersonID"/>

</class> 
```

在 DB 中，此映射为我提供了一对一的映射，但在我的项目中，人可能没有 LoninAccount，因此在个人表中 LoginAccountId 可以为空，但正如我们所说的 unique=true 个人 hbm 所以它不允许多次。

所以我需要做一对零或一个映射这可能吗？

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T11:29:31.380

当您不熟悉 NHibernate 时，您应该考虑使用按代码映射的技术，例如 Fluent NHibernate 或 NH 集成的自动映射（在 3.2 中引入）。

以下示例代码 (Fluent NHibernate) 应该可以帮助您入门：

```
public class LoginAccount 
{
public virtual Int Id  { get; set; };
public virtual string Password { get; set; };
public virtual string Saltkey { get; set; };

public virtual Person BelongsTo{ get; set; }

  public LoginAccount()
  {
  }
}

public class LoginAccountMap: ClassMap<LoginAccount>
{
  public LoginAccountMap()
  {
    Id(x => x.Id);
    Map(x => x.Password);
    Map(x => x.Saltkey);

    References(c => c.BelongsTo).Cascade.None().Fetch.Join().NotFound.Ignore();
  }
}

public class Person
{
public virtual Int Id  { get; set; };
public virtual string FirstName  { get; set; };
public virtual string SureName  { get; set; };

public virtual LoginAccount UserAcc{ get; set; }

  public Person()
  {
  }
}

public class PersonMap: ClassMap<Person>
{
  public PersonMap()
  {
    Id(x => x.Id);
    Map(x => x.FirstName);
    Map(x => x.SureName);

    References(c => c.UserAcc).Cascade.SaveUpdate().Fetch.Join().NotFound.Ignore();
  }
} 
```

# c - 使用 EVP 接口的 AES-GCM 的 OpenSSL C 示例

> ID：12153009
> 
> 赞同：15
> 
> 时间：2012-08-28T04:57:12.937
> 
> 标签：c, openssl, aes, aes-gcm

对于 AES-GCM 加密/解密，我试过这个，但它有一个问题。

```
ctx     = EVP_CIPHER_CTX_new();

//Get the cipher.
cipher  = EVP_aes_128_gcm ();

#define     GCM_IV      "000000000000"
#define     GCM_ADD     "0000"
#define     TAG_SIZE    16
#define     ENC_SIZE    64

//Encrypt the data first.
//Set the cipher and context only.
retv    = EVP_EncryptInit (ctx, cipher, NULL, NULL);

//Set the nonce and tag sizes.
//Set IV length. [Optional for GCM].

retv    = EVP_CIPHER_CTX_ctrl (ctx, EVP_CTRL_GCM_SET_IVLEN, strlen((const char *)GCM_IV), NULL);

//Now initialize the context with key and IV. 
retv    = EVP_EncryptInit (ctx, NULL, (const unsigned char *)keybuf, (const unsigned char *)GCM_IV);

//Add Additional associated data (AAD). [Optional for GCM]
retv    = EVP_EncryptUpdate (ctx, NULL, (int *)&enclen, (const unsigned char *)GCM_ADD, strlen(GCM_ADD));

//Now encrypt the data.
retv    = EVP_EncryptUpdate (ctx, (unsigned char *)encm, (int *)&enclen, (const unsigned char *)msg, _tcslen (msg) *sizeof(Char));

//Finalize.
retv    = EVP_EncryptFinal (ctx, (unsigned char *)encm + enclen, (int *)&enclen2);
enclen  += enclen2;

//Append authentication tag at the end.
retv    = EVP_CIPHER_CTX_ctrl (ctx, EVP_CTRL_GCM_GET_TAG, TAG_SIZE, (unsigned char *)encm + enclen);

//DECRYPTION PART
//Now Decryption of the data.
//Then decrypt the data.
//Set just cipher.
retv    = EVP_DecryptInit(ctx, cipher, NULL, NULL);

//Set Nonce size.
retv    = EVP_CIPHER_CTX_ctrl (ctx, EVP_CTRL_GCM_SET_IVLEN, strlen((const char *)GCM_IV), NULL);

//Set Tag from the data.
retv    = EVP_CIPHER_CTX_ctrl (ctx, EVP_CTRL_GCM_SET_TAG, TAG_SIZE, (unsigned char *)encm + enclen);

//Set key and IV (nonce).
retv    = EVP_DecryptInit (ctx, NULL, (const unsigned char*)keybuf, (const unsigned char *)GCM_IV);

//Add Additional associated data (AAD).
retv    = EVP_DecryptUpdate (ctx, NULL, (int *)&declen, (const unsigned char *)GCM_ADD,
                             strlen((const char *)GCM_ADD));

//Decrypt the data.
retv    = EVP_DecryptUpdate (ctx, decm, (int *)&declen, (const unsigned char *)encm, enclen);

//Finalize.
retv    = EVP_DecryptFinal (ctx, (unsigned char*)decm + declen, (int *)&declen2); 
```

这段代码工作正常（有一些修改）。它正在加密和解密消息。问题是在解密之前修改密文时，它仍然解密文本（但是，错误）。根据我对认证加密的理解，在这种情况下，它不应该解密修改后的密文。

我哪里错了？我可以使用 OpenSSL 的 EVP 接口获得任何合适的 AES-GCM 示例吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-24T08:09:58.340

这是一个每次调用更新加密和解密 128 字节的示例，例如：

```
 int howmany, dec_success, len;
  const EVP_CIPHER *cipher;
  switch(key_len)
  {
  case 128: cipher  = EVP_aes_128_gcm ();break;
  case 192: cipher  = EVP_aes_192_gcm ();break;
  case 256: cipher  = EVP_aes_256_gcm ();break;
  default:break;
  }
  // Encrypt
  EVP_CIPHER_CTX *ctx = EVP_CIPHER_CTX_new();
  EVP_EncryptInit (ctx, cipher, KEY, IV);
  EVP_EncryptUpdate (ctx, NULL, &howmany, AAD, aad_len);
  len = 0;
  while(len <= in_len-128)
  {
     EVP_EncryptUpdate (ctx, CIPHERTEXT+len, &howmany, PLAINTEXT+len, 128);
     len+=128;
  }
  EVP_EncryptUpdate (ctx, CIPHERTEXT+len, &howmany, PLAINTEXT+len, in_len - len);
  EVP_EncryptFinal (ctx, TAG, &howmany);
  EVP_CIPHER_CTX_ctrl (ctx, EVP_CTRL_GCM_GET_TAG, 16, TAG);  
  EVP_CIPHER_CTX_free(ctx);
  // Decrypt
  ctx = EVP_CIPHER_CTX_new();      
  EVP_DecryptInit (ctx, cipher, KEY, IV);
  EVP_CIPHER_CTX_ctrl (ctx, EVP_CTRL_GCM_SET_TAG, 16, ref_TAG);
  EVP_DecryptInit (ctx, NULL, KEY, IV);
  EVP_DecryptUpdate (ctx, NULL, &howmany, AAD, aad_len);
  len = 0;
  while(len <= in_len-128)
  {
     EVP_DecryptUpdate (ctx, decrypted_CT+len, &howmany, CIPHERTEXT+len, 128);
     len+=128;
  }
  EVP_DecryptUpdate (ctx, decrypted_CT+len, &howmany, CIPHERTEXT+len, in_len-len);
  dec_success = EVP_DecryptFinal (ctx, dec_TAG, &howmany);
  EVP_CIPHER_CTX_free(ctx); 
```

最后，您应该检查 dec_success 的值是否为 1。如果您修改 CIPHERTEXT，在解密之前，您应该得到值 0。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-08-20T04:14:58.513

为现代性编辑的答案：

您必须检查调用 EVP_DecryptFinal()（或 EVP_DecryptFinal_ex()）的返回值，以确定您是否已成功解密密文。

OpenSSL 现在提供了一个功能完善的 AES GCM 示例，用 C 编写。它甚至包括测试向量。你可以在这里找到它[https://github.com/openssl/openssl/blob/master/demos/evp/aesgcm.c](https://github.com/openssl/openssl/blob/master/demos/evp/aesgcm.c)或搜索“openssl evp aesgcm.c”

最初 5 年前的问题及其接受的答案显示了使用 EVP_*Init() 和 EVP_*Final() API 的代码。这些已被 EVP_*Init_ex() 和 EVP_*Final_ex() 弃用并取代，“因为它们可以重用现有上下文，而无需在每次调用时分配和释放它。” （[openssl 引用](https://www.openssl.org/docs/man1.1.0/crypto/EVP_EncryptInit_ex.html)）

根据我的经验，如果您正在为这些调用编写包装函数，**请不要**使用 NULL 和 0 调用 EVP_EncryptUpdate_ex() 用于 AAD。这可能在较新版本的 OpenSSL 中发生了变化，但截至 2013 年，它导致了加密失败。

这远远超出了这个问题的范围，但如果它对任何人都有帮助，这里有一个使用 OpenSSL API 的有效 iOS / Objective C 实现。

```
#include <openssl/rand.h>
#include <openssl/ecdsa.h>
#include <openssl/obj_mac.h>
#include <openssl/err.h>
#include <openssl/pem.h>
#include <openssl/evp.h>

#define AES_256_KEY_LENGTH      32
#define AES_256_KEY_LENGTH_BITS 256
#define AES_256_IVEC_LENGTH     12
#define AES_256_GCM_TAG_LENGTH  16

// encrypt plaintext.
// key, ivec and tag buffers are required, aad is optional
// depending on your use, you may want to convert key, ivec, and tag to NSData/NSMutableData
+ (BOOL) aes256gcmEncrypt:(NSData*)plaintext
               ciphertext:(NSMutableData**)ciphertext
                      aad:(NSData*)aad
                      key:(const unsigned char*)key
                     ivec:(const unsigned char*)ivec
                      tag:(unsigned char*)tag {

    int status = 0;
    *ciphertext = [NSMutableData dataWithLength:[plaintext length]];
    if (! *ciphertext)
        return NO;

    // set up to Encrypt AES 256 GCM
    int numberOfBytes = 0;
    EVP_CIPHER_CTX *ctx = EVP_CIPHER_CTX_new();
    EVP_EncryptInit_ex (ctx, EVP_aes_256_gcm(), NULL, NULL, NULL);

    // set the key and ivec
    EVP_CIPHER_CTX_ctrl(ctx, EVP_CTRL_GCM_SET_IVLEN, AES_256_IVEC_LENGTH, NULL);
    EVP_EncryptInit_ex (ctx, NULL, NULL, key, ivec);

    // add optional AAD (Additional Auth Data)
    if (aad)
        status = EVP_EncryptUpdate( ctx, NULL, &numberOfBytes, [aad bytes], [aad length]);

    unsigned char * ctBytes = [*ciphertext mutableBytes];
    EVP_EncryptUpdate (ctx, ctBytes, &numberOfBytes, [plaintext bytes], (int)[plaintext length]);
    status = EVP_EncryptFinal_ex (ctx, ctBytes+numberOfBytes, &numberOfBytes);

    if (status && tag) {
        status = EVP_CIPHER_CTX_ctrl (ctx, EVP_CTRL_GCM_GET_TAG, AES_256_GCM_TAG_LENGTH, tag);
    }
    EVP_CIPHER_CTX_free(ctx);
    return (status != 0); // OpenSSL uses 1 for success
}

// decrypt ciphertext.
// key, ivec and tag buffers are required, aad is optional
// depending on your use, you may want to convert key, ivec, and tag to NSData/NSMutableData
+ (BOOL) aes256gcmDecrypt:(NSData*)ciphertext
                plaintext:(NSMutableData**)plaintext
                      aad:(NSData*)aad
                      key:(const unsigned char *)key
                     ivec:(const unsigned char *)ivec
                      tag:(unsigned char *)tag {

    int status = 0;

    if (! ciphertext || !plaintext || !key || !ivec)
        return NO;

    *plaintext = [NSMutableData dataWithLength:[ciphertext length]];
    if (! *plaintext)
        return NO;

    // set up to Decrypt AES 256 GCM
    int numberOfBytes = 0;
    EVP_CIPHER_CTX *ctx = EVP_CIPHER_CTX_new();
    EVP_DecryptInit_ex (ctx, EVP_aes_256_gcm(), NULL, NULL, NULL);

    // set the key and ivec
    EVP_CIPHER_CTX_ctrl(ctx, EVP_CTRL_GCM_SET_IVLEN, AES_256_IVEC_LENGTH, NULL);
    status = EVP_DecryptInit_ex (ctx, NULL, NULL, key, ivec);

    // Set expected tag value. A restriction in OpenSSL 1.0.1c and earlier requires the tag before any AAD or ciphertext
    if (status && tag)
        EVP_CIPHER_CTX_ctrl(ctx, EVP_CTRL_GCM_SET_TAG, AES_256_GCM_TAG_LENGTH, tag);

    // add optional AAD (Additional Auth Data)
    if (aad)
        EVP_DecryptUpdate(ctx, NULL, &numberOfBytes, [aad bytes], [aad length]);

    status = EVP_DecryptUpdate (ctx, [*plaintext mutableBytes], &numberOfBytes, [ciphertext bytes], (int)[ciphertext length]);
    if (! status) {
        //DDLogError(@"aes256gcmDecrypt: EVP_DecryptUpdate failed");
        return NO;
    }
    EVP_DecryptFinal_ex (ctx, NULL, &numberOfBytes);
    EVP_CIPHER_CTX_free(ctx);
    return (status != 0); // OpenSSL uses 1 for success
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-10-21T17:39:18.410

OpenSSL 有一个关于使用 AES-GCM 密码的不错的 wiki 页面。还提供了代码示例。该页面的链接是[Authenticated_Decryption_using_GCM_mode](https://wiki.openssl.org/index.php/EVP_Authenticated_Encryption_and_Decryption#Authenticated_Decryption_using_GCM_mode)

我关注了这个 wiki 并为 AES-GCM 进行了解密。代码段复制如下

```
int decrypt(unsigned char *ciphertext, int ciphertext_len, unsigned char *aad,
    int aad_len, unsigned char *tag, unsigned char *key, unsigned char *iv,
    unsigned char *plaintext)
{
    EVP_CIPHER_CTX *ctx;
    int len;
    int plaintext_len;
    int ret;

    /* Create and initialise the context */
    if(!(ctx = EVP_CIPHER_CTX_new())) handleErrors();

    /* Initialise the decryption operation. */
    if(!EVP_DecryptInit_ex(ctx, EVP_aes_256_gcm(), NULL, NULL, NULL))
        handleErrors();

    /* Set IV length. Not necessary if this is 12 bytes (96 bits) */
    if(!EVP_CIPHER_CTX_ctrl(ctx, EVP_CTRL_GCM_SET_IVLEN, 16, NULL))
        handleErrors();

    /* Initialise key and IV */
    if(!EVP_DecryptInit_ex(ctx, NULL, NULL, key, iv)) handleErrors();

    /* Provide any AAD data. This can be called zero or more times as
     * required
     */
    if(!EVP_DecryptUpdate(ctx, NULL, &len, aad, aad_len))
        handleErrors();

    /* Provide the message to be decrypted, and obtain the plaintext output.
     * EVP_DecryptUpdate can be called multiple times if necessary
     */
    if(!EVP_DecryptUpdate(ctx, plaintext, &len, ciphertext, ciphertext_len))
        handleErrors();
    plaintext_len = len;

    /* Set expected tag value. Works in OpenSSL 1.0.1d and later */
    if(!EVP_CIPHER_CTX_ctrl(ctx, EVP_CTRL_GCM_SET_TAG, 16, tag))
        handleErrors();

    /* Finalise the decryption. A positive return value indicates success,
     * anything else is a failure - the plaintext is not trustworthy.
     */
    ret = EVP_DecryptFinal_ex(ctx, plaintext + len, &len);

    /* Clean up */
    EVP_CIPHER_CTX_free(ctx);

    if(ret > 0)
    {
        /* Success */
        plaintext_len += len;
        return plaintext_len;
    }
    else
    {
        /* Verify failed */
        return -1;
    }
} 
```

此外，正如人们指出的那样，您应该检查从 EVP_DecryptFinal_ex() 返回的值。如果你的密文稍作修改，仍然可以解密，但最终返回值不会为真，因为无法验证身份验证标签（或mac）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-16T14:32:29.247

OpenSSL 不负责身份验证。您应该检查`EVP_DecryptFinal`. 如果为 1，则解密数据的身份验证 TAG 等于您提供的 TAG。

如果标签不同，则应将解密数据视为伪造而丢弃。如果标签相等，则数据正常。

由于身份验证是增量的，并且可以多次调用 Update，因此必须先解密数据，然后才能完成身份验证。

# freeswitch - 使用 dahdi 和 freeswitch 记录 ISDN 事件

> ID：12153010
> 
> 赞同：0
> 
> 时间：2012-08-28T04:57:16.507
> 
> 标签：freeswitch, isdn

我正在`freeswitch`使用`dahdi`. `freeswitch`我需要为 PBX ( )上的所有呼叫记录 ISDN 事件。有没有办法做到这一点？我衷心感谢您的帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T20:33:27.877

切换到您的 dahdi 源目录并发出：

```
apt-get install libpcap-dev || yum install libpcap-devel
sed 's/^.*\(\#define\s\+CONFIG_DAHDI_MIRROR\).*$/\1/' linux/include/dahdi/dahdi_config.h
make clean
make all
make install
cd tools
make dahdi_pcap 
```

如果编译没有错误，您现在拥有一个名为 dahdi_pcap 的工具，您可以将信号捕获到 pcap 文件并使用wireshark 对其进行分析。用法示例：

```
./dahdi_pcap -p lapd -c 1 -f isdn.pcap 
```

# vb6 - Legacy VB6.0 应用程序中的圈复杂度

> ID：12153012
> 
> 赞同：2
> 
> 时间：2012-08-28T04:57:16.493
> 
> 标签：vb6, code-analysis, fxcop, cyclomatic-complexity

建议任何 **应该支持VB6.0的工具**

我正在寻找以下指标

1.  代码分析

2.  代码可维护性指数

3.  圈复杂度

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T19:27:46.557

你试过工具[VBDepend](http://www.vbdepend.com/)吗？它确实支持 VB6 代码的循环复杂度、更多代码度量和静态分析。

*免责声明：我与该工具的一位开发人员合作。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T07:43:12.933

我使用[Aivosto Project Analyzer](http://www.aivosto.com/)并觉得它令人满意。它也适用于 VB.Net，适用于任何时候进行移植。

# assembly - 两个反汇编器可以为同一个可执行文件生成不同的反汇编吗？

> ID：12153013
> 
> 赞同：1
> 
> 时间：2012-08-28T04:57:17.870
> 
> 标签：assembly, decompiling, disassembly

我有一个可执行文件，我正在使用两个不同的反汇编程序进行反汇编。我知道指令可能不同，但两个 dis 程序集中的操作码必须相同。但我观察到操作码不一样。有什么具体原因吗？它取决于反汇编程序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T07:06:18.847

两个反汇编程序产生不同输出的原因可能有很多。

错误的操作码解析，用宏替换操作码，反反汇编技巧（例如'跳转'或'调用'到操作码中间），解析swich-case代码的困难，处理器架构版本的错误识别，忽略“无意义”的操作码，错误的对齐方式，错误的程序开始标识，错误的文件持有者解析等等……每一个都可能导致不同的输出。

如果您对此感兴趣，这是另一个有趣的事情，但在另一个方向： [http ://accessomat.wordpress.com/2010/11/08/x86-assembler-is-not-injective/](http://accessomat.wordpress.com/2010/11/08/x86-assembler-is-not-injective/)

# java - 具有变化对象的连续线程

> ID：12153016
> 
> 赞同：3
> 
> 时间：2012-08-28T04:57:29.047
> 
> 标签：java, android, multithreading, asynchronous

我有以下课程：

```
public class MovementThread extends Thread {

    private float[] myObject;

    @Override
    public void run() {

    }

    public void setMyObject(float[] array) {
        myObject = array;
    }
} 
```

问题是**MovementThread**应该一直在运行，所以我考虑`while(true)`在`Run method`. 但是，`myObject`将从另一个更新`Thread`，因此如果`Thread`卡在`Run method`. 此外，run 方法中的代码在执行时也不应该`myObject`被执行。

他们有什么不复杂的方法吗？
我只是想知道在这种情况下的最佳实践，我认为这必须经常发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T05:18:02.173

首先，现在的标准做法是实现可运行而不是扩展线程（请参阅[“实现可运行”与“扩展线程”](https://stackoverflow.com/questions/541487/java-implements-runnable-vs-extends-thread)）。

A`while(true)`是在 run 方法中放入什么的正确想法。最终，您将切换到 a`while(someBooleanVariable)`以便提供一种杀死您的 MovementThread 的方法。

当前确保来自 MovementThread 运行的线程与来自其他线程的其他成员调用不冲突的当前方法是使用同步。对于简单的使用，您通常可以在函数声明前加上 synchronized，所有这些函数都不会交织在一起。

您的样品进行了所有这些修改：

请注意，myObject 的所有读取和写入都在标记为同步的函数中。

```
public class MovementThread extends Runnable{

    private float[] myObject;
    volatile boolean stillAlive = true;

    @Override
    public void run() {
       while (stillAlive)
       {
          processMyObject();
          Thread.sleep(1000);
       }

    }

    private synchronized void processMyObject()
    {
       // Modify or read myObject
    }

    public void kill()
    {
       stillAlive = false;
    }  

    public synchronized void setMyObject(float[] array) {
        myObject = array;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T05:26:52.067

您的问题属于线程的[生产消费者](http://en.wikipedia.org/wiki/Producer-consumer_problem)模式。在您的情况下，生产者是`1`，消费者是`1`。

你会在这里找到一个很好的例子来说明如何使用`Concurrent`包来做到这[一点](http://www.java2s.com/Code/Java/Threads/ProducerconsumerforJ2SE15usingconcurrent.htm)

将`BlockingQueue`替换`Object`与您的 double[] 一起使用，您就完成了。

```
Producer(BlockingQueue theQueue) { this.queue = theQueue; }
queue.put(justProduced);
Consumer(BlockingQueue theQueue) { this.queue = theQueue; }
Object obj = queue.take(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T05:24:59.243

由于您有两个不同的线程来修改和使用同一个对象，因此最好在您的程序中引入同步。您应该在同步块内编写代码。

现在，如果您想几乎立即为其他线程更新变量。您可以将此变量保持为 volatile。在这种情况下，一旦修改器线程更改了 myObject 值，它就会在执行器线程内更改。见伪代码：-

```
//Modifier thread 

synchronized(myObject){
        // do something and update the myObject
        myObject.setSomething(someValue);
}

//Executor thread

synchronized(myObject){
        //do something 
        if(myObject.getSomeValue()==someMeaningfulValue){
             myObject.execute() 
        }
}

   // To immediately update myObject, you can declare it as 

    private volatile MyObjectClassName myObject; 
```

如果它没有用更多细节更新您的问题，那应该可以。

# entity-framework - 实体框架中的十进制日期时间转换和比较

> ID：12153020
> 
> 赞同：0
> 
> 时间：2012-08-28T04:57:48.553
> 
> 标签：entity-framework, datetime, decimal

我有一些数据库值存储休息的开始时间及其持续时间，但时间值存储为小数。举个例子

```
12.45 = 12:45 PM
12:59 = 12:45 PM
13.0  = 13:00 PM 
```

持续时间存储为 int；30 = 30 分钟

在这里我必须检查特定时间是否在范围之间，所以我使用了 C# 和实体框架，并且我使用了以下代码，但它给出了一个错误，即 DateTime.Parse 无法被 LINQ 识别。

STAR_TIME 是存储为 12.45 的时间，DURATION 存储为 30，timeE 是日期时间类型

```
meal ml = HRM.meals.SingleOrDefault(p => p.SHIFTCODE == ShiftCode
                               && DateTime.Parse(p.STAR_TIME.ToString().Replace(".", ":")) <= timE
                               && DateTime.Parse(p.STAR_TIME.ToString().Replace(".", ":")).AddMinutes(int.Parse(p.DURATION.ToString())) >= timE
                              ); 
```

然后我没有转换，而是尝试乘以 60 并尝试比较如下值，但它的逻辑是错误的。这里使用 12.59 作为时间

```
 meal ml = HRM.meals.SingleOrDefault(p => p.SHIFTCODE == ShiftCode
  && p.STAR_TIME*60 <= new Decimal(12.59)*60
  && p.STAR_TIME*60 + p.DURATION >= new Decimal(12.59) * 60 
                             ); 
```

STAR_TIME -- 12.45 * 60 -- 747 持续时间 -- 30 结束时间 -- 747+ 30 = 777

但实际上结束时间应该是 13.15, 13.15 *60 -- 789

有人可以建议任何方法来解决这种情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T07:16:38.543

用小数来表示时间会让生活变得艰难。简单地乘以 60 不会在几小时和几分钟内给出答案。例如，考虑：0.02 * 60。作为小数，它给出的值是 1.20。但是，这应该是 2 分钟，而不是 1.20 分钟。

您可能需要从整数中拆分分数。让我们考虑 2.03（凌晨 2:03）。将整数乘以 60；距离午夜还有 120 分钟。将 0.03 乘以 60；给你1.80；将其除以 0.60（因为 60 分钟由分数 0.60 表示）得到 3，因此从午夜开始的总时间为 123 分钟。当然，您可以简单地将分数乘以 100；这给出了相同的结果。如果你有 IF（意思是整数 I 和分数 F），你从 (60 * I + 100 * F) 获得自午夜以来的总分钟数。

现在假设你也有区间 V。这是整数分钟数。

鉴于：

*   `I = 12`
*   `F = 0.45`
*   `V = 30`

你想要`I.F + V`一个时间的价值。

*   `M = 60 * I + 100 * F + V`
*   `M = 720 + 45 + 30`
*   `M = 795`从午夜开始

要回到答案`H.M`，您需要将 M / 60 除以得到 H，然后将余数 M % 60 除以 100 得到分数：

*   `H = 795 / 60 = 13`
*   `M = (795 % 60) / 100 = 15 / 100 = 0.15`

因此，答案是`H + M = 13.15`下午 13:15。

是的，这是一项艰苦的工作。但那是因为使用的表示确实不适合手头的任务。

# iphone - UIPageViewControllerSpineLocation 委托未调用

> ID：12153033
> 
> 赞同：0
> 
> 时间：2012-08-28T04:59:57.093
> 
> 标签：iphone, orientation, uipageviewcontroller

*   (UIPageViewControllerSpineLocation)pageViewController:(UIPageViewController *)pageViewController spinLocationForInterfaceOrientation:(UIInterfaceOrientation)orientation

这个代表没有打电话......

我也用过

```
NSDictionary *options =[NSDictionary dictionaryWithObject:[NSNumber numberWithInteger:UIPageViewControllerSpineLocationMid]forKey: UIPageViewControllerOptionSpineLocationKey]; 
```

调用 UIPageViewControllerSpineLocationMid 方法

UIPageViewControllerSpineLocationMin 和 UIPageViewControllerSpineLocationMax 方法正在调用..

代码在我单独运行时运行良好......但是当我集成代码时 UIPageViewControllerSpineLocationMid 不起作用并且该委托没有调用......

为什么会这样……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T05:40:17.140

我可以在类 ref 中看到

[http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIPageViewControllerDelegateProtocolRef/UIPageViewControllerDelegate.html](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIPageViewControllerDelegateProtocolRef/UIPageViewControllerDelegate.html)

仅当您获得转换样式 UIPageViewControllerTransitionStylePageCurl 时才会调用委托。可能那是你的问题。

> **讨论**
> 
> 使用此方法可以在设备方向更改时更改脊椎位置，以及设置新的视图控制器和更改双面状态。仅当过渡样式为 UIPageViewControllerTransitionStylePageCurl 时才调用此方法。

# java - 在 GWT 应用程序中从不同类调用方法

> ID：12153035
> 
> 赞同：0
> 
> 时间：2012-08-28T05:00:22.047
> 
> 标签：java, gwt, uibinder, entry-point

我在 GWT 应用程序中创建了两个带有 UIBinder 的 java 类。我想借助在 EntryPoint 类中声明的通用方法将一个页面导航到另一个页面。

但是，我无法在 UIBinder 类的按钮单击事件上访问 EntryPoint 类的方法。

我的代码：

```
HelloUIBinder hb;
@UiField Button btnLogin;

public Test2() {
    initWidget(uiBinder.createAndBindUi(this));

    btnLogin.addClickHandler(new ClickHandler() {

        @Override
        public void onClick(ClickEvent event) {
            // TODO Auto-generated method stub

            strEmail = txtEmail.getText().toString();
            strPass = txtPass.getText().toString();

            Window.alert(strEmail);
            Window.alert(strPass);

            hb.onLogin(strEmail, strPass);
        }
    });
} 
```

在 HelloUIBinder 类中，

登录方法：

```
public void onLogin(String email, String pass)
{
    Window.alert(email);
    Window.alert(pass);

    if(email == "abc@yahoo.com" && pass == "abc123")
    {
        RootPanel.get().clear();

        tp = new TestPage();
        RootPanel.get().add(tp);

        animationHelper.goTo(tp, Animation.SLIDE);
    }
    else
    {
        Window.alert("Authentication Failed");
    }
} 
```

但是，虽然这种方法我收到 UmbrellaException 错误消息。如果我会在 UIBinder 类中编写相同的逻辑，那么它将可以正常进行条件检查。

现在我想通过使用类对象来使用来自不同类的方法。

有人知道吗？

请帮助解决从不同类调用方法的此错误。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T16:02:28.540

您应该从 Umbrella 异常和可能的 UIBinder 模板中发布您的堆栈跟踪。

我真的建议使用地点更改事件和历史映射器来进行活动更改。你应该看看 Ray Ryan 的视频

Google I/O 2009 - 架构 GWT 应用程序的最佳实践 [http://www.youtube.com/watch?v=PDuhR18-EdM](http://www.youtube.com/watch?v=PDuhR18-EdM)

Google I/O 2010 - 构建 GWT 应用程序 [http://www.youtube.com/watch?v=M5x6E6ze1x8](http://www.youtube.com/watch?v=M5x6E6ze1x8)

我们一直在为我们的许多项目使用 MVP 和位置历史，它运行得非常好。您可以使用简单导航或使用 placeContorller.goTo(new Place()); 方法。这也使书签和后退按钮能够正常工作。

另一种选择是您可以在入口点中构造一个 ClientFactory 单例实现，并使用它来处理简单的导航事件。但是，如果您的应用程序将来会变得更加复杂，那么控制器就是您要走的路。

# iis-7.5 - WCF 服务适用于 IIS Express，但不适用于服务器上的 IIS7（同一域）

> ID：12153037
> 
> 赞同：3
> 
> 时间：2012-08-28T05:00:30.207
> 
> 标签：iis-7.5, wcf-data-services, iis-express

经过几次演练，我使用 EF 创建了一个 WCF 服务来连接 Northwind 数据库。在一台开发机器上使用了 Visual Studio 2010、SQL Server 2012 Express 和 IIS 7.5 Express。

使用 IE9，我可以连接到服务并请求单个表，如下所示：

![在此处输入图像描述](../Images/cd1b29f3501d10ba33ef6d0fec4111b4.png)

此外，使用 OData Explorer（Silverlight 应用程序），我可以添加到本地 IIS 的新连接，还可以查看 Northwind 表；例如员工表：

![在此处输入图像描述](../Images/748a3d874a9a7f2129c2ac61d1e4d65e.png)

但是，当我将服务移动到运行 IIS 7.0 的同一域上的服务器时，我可以浏览到服务根目录，如下所示：

![在此处输入图像描述](../Images/b8416ee4f62076e53302696e365d7325.png)

但是，当我请求客户表时，服务没有响应：

![在此处输入图像描述](../Images/02083b3d6e06fa78304205ccf8e13a43.png)

虽然我可以在 OData Explorer 中创建新连接，但当我请求单个表时，会出现未知错误：

![在此处输入图像描述](../Images/45345a5da0253909254dd95e72fd2807.png)

显示了错误的完整描述，但链接已过时且不可用：

> [HttpWebRequest_WebException_RemoteServer] 参数：NotFound 调试资源字符串不可用。通常，关键和论据提供了足够的信息来诊断问题。请参阅[SL_OData_Explorer.Views.ODataExplorer](http://go.microsoft.com/fwlink/?linkid=106663&Version=5.1.10411.0&File=System.Windows.dll&Key=HttpWebRequest_WebException_RemoteServer) 上 System.Net.Browser.ClientHttpWebRequest.EndGetResponse(IAsyncResult asyncResult) 上的 http://go.microsoft.com/fwlink/?linkid=106663&Version=5.1.10411.0&File=System.Windows.dll&Key=HttpWebRequest_WebException_RemoteServer .<>c__DisplayClass1e.<>c__DisplayClass20.b__1d()

谷歌搜索后，我发现了几篇关于 clientaccesspolicy.xml 和 crossdomain.xml 文件应该放在网站根目录的帖子。虽然我知道这是银光特有的，并且确实放置了上述文件，但正如预期的那样，它们没有任何效果。

当我比较来自本地机器的响应时：

![在此处输入图像描述](../Images/61e5e15d46b9e6a8721cb43f1b8d0a4c.png)

与服务器上的 IIS 相比，很明显该服务存在但找不到表。

![在此处输入图像描述](../Images/a84ce5277e8eaca916580ffacf0b0342.png)

因此，在这两种情况下，我都可以浏览到服务的根目录，但只有在本地才能超越根目录并查看各个表。

可以肯定的是，这似乎是一个配置问题，但尝试查找有关此未公开错误的信息充其量是困难的。有谁知道在这种情况下发生了什么？

谢谢，

格雷格

# crystal-reports - 如何显示字符串值而不是空白字段

> ID：12153044
> 
> 赞同：0
> 
> 时间：2012-08-28T05:01:33.340
> 
> 标签：crystal-reports

使用水晶报表 7

我想显示 '-' 而不是 0，我创建了这样的公式

```
if {pay_latecomededuct.upto15d} = 0 then
  '-'
else
  {pay_latecomededuct.upto15d} 
```

上面的公式显示错误为“这里需要一个字符串”

如果我更改数字而不是'-'，没有显示任何错误，即使我也尝试使用 totext / tonumber，结果是一样的......

如何解决这个问题呢。

需要水晶报表帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:49:57.527

您的公式需要返回一致的值。在这种情况下，那将是一个字符串。

将以下内容添加到字段的显示字符串公式中：

```
If {pay_latecomededuct.upto15d} = 0 Then
  '-'
Else
  ToText({pay_latecomededuct.upto15d}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T05:06:05.853

而是尝试格式化该字段。

右键单击并选择`Format Field`

在`Number`选项卡上单击`Customize`

在`Custom Styles`窗口中，单击`Number Tab`

查找选项`Show Zero Value as`并将其从更改`Default Format`为`-`

# iphone - 将 int 转换为 NSString

> ID：12153051
> 
> 赞同：30
> 
> 时间：2012-08-28T05:02:05.557
> 
> 标签：iphone, nsstring, int

我想在 中转换一个随机 int 数，`NSString`然后将 NSString 分配给另一个`NSString`，但它会使应用程序崩溃

我正在做以下事情

```
int mynumber =(arc4random() % 1000 );

unique = [NSString stringWithFormat:@"%d",mynumber];

   NSLog(unique)

   NSString*test=unique; 
```

当我写最后一行时它会崩溃；

当我 nslog`unique`字符串时，它也会打印值。

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-08-28T05:12:10.703

如果要将 int 更改为 string

```
NSString *strFromInt = [NSString stringWithFormat:@"%d",yourintvalue]; 
```

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2014-01-21T12:44:33.583

这也有效：

```
NSString *str = [@(number) stringValue]; 
```

或者，如果您更喜欢点表示法：

```
NSString *str = @(number).stringValue; 
```

这将`NSNumber`使用表达式装箱语法将原始值装箱为 a `@(...)`，然后使用它的`stringValue`方法将其转换为`NSString`. 这也适用于其他原始值（`NSInteger`, `float`, `double`, `long`, ...）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T05:08:10.040

```
NSString *anotherStr;
int myNumber = (arc4random() % 1000 );
NSString *stringNum = [NSString stringWithFormat:@"%i", myNumber];
anotherStr = stringNum; //assign NSString to NSString
// Here you can convert NSString to Int if you want.
NSLog(@"My number as NSString = %@", stringNum);
int getNumFromString = [stringNum intValue];

NSLog(@"My number from NSString = %i", getNumFromString); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T05:09:56.943

您错误地使用了 NSLog 语句。它应该像下面这样使用。

`NSLog(@"%@",unique);`

# android - Android webservice ksoap2 - pojo 内部的字节 [] 错误

> ID：12153053
> 
> 赞同：0
> 
> 时间：2012-08-28T05:02:17.247
> 
> 标签：android, ksoap2

我正在使用 kvm 序列化从我的 android 应用程序调用 java soap webservices。我的 pojo 类和代码如下，

数据集.java

```
public class DataSet implements KvmSerializable{

public String client = null;
public Photo[] images;
public String userId = null;

@Override
public Object getProperty(int arg0) {
    switch (arg0){
    case 0:
        return client;      
    case 1:
        return images;
    case 2:
        return userId;
     default:
         return null;
    }
}

@Override
public int getPropertyCount() {
    // TODO Auto-generated method stub
    return 3;
}

@Override
public void getPropertyInfo(int index, Hashtable arg1, PropertyInfo info) {
    switch(index)
    {
    case 0:
        info.type = PropertyInfo.STRING_CLASS;
        info.name = "client";
        break;        
    case 1:
        info.type = Photo.class;
        info.name = "images";
    case 2:
        info.type = PropertyInfo.STRING_CLASS;
        info.name = "userId";
    default:
        break;
    }

}

@Override
public void setProperty(int index, Object value) {
    switch(index)
    {
    case 0:
        client = value.toString();
        break;
    case 1:
        images = (Photo[]) value;
        break;
    case 2:
        userId = value.toString();
        break;
    default:
        break;
    }

} 
```

}

和 Photo.java

```
public class Photo implements KvmSerializable{

public byte[] data;
public String name;

@Override
public Object getProperty(int arg0) {
    switch (arg0){
    case 0:
        return data;        
    case 1:
        return name;        
     default:
         return null;
    }
}

@Override
public int getPropertyCount() {
    // TODO Auto-generated method stub
    return 2;
}

@Override
public void getPropertyInfo(int index, Hashtable arg1, PropertyInfo info) {
    switch(index)
    {
    case 0:
        info.type = byte[].class;
        info.name = "data";
        break;        
    case 1:
        info.type = PropertyInfo.STRING_CLASS;
        info.name = "name";
    default:
        break;
    }

}

@Override
public void setProperty(int index, Object value) {
    switch(index)
    {
    case 0:
        data = (byte[])value;
        break;
    case 1:
        name = value.toString();
        break;
    default:
        break;
    }

} 
```

在此我将图像和名称存储到 Photo.java POJO 中，然后设置为 DataSet POJO，

```
public class Sample implements Runnable {
    ...
    ...
    Photo[] photoArr = new Photo[3];
    int count = 0;

public void run() {
  while (count < 3) {
    ....
    ....
    ....
    byte[] byteArray = stream.toByteArray();
    Photo photo = new Photo();
    photo.data = byteArray;
    photo.name = "img"+count;
    photoArr[count] = photo;
    count++;
 }
       if(count == 2)
         {
            SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
            new MarshalBase64().register(envelope);   //serialization
            envelope.encodingStyle = SoapEnvelope.ENC;

            PropertyInfo pi = new PropertyInfo();
            DataSet dataSet = new DataSet();
            dataSet.client = "1";
            dataSet.userId = "1";
            dataSet.images = photoArr;

            pi.setName("dataSet");
            pi.setValue(dataSet);
            pi.setType(dataSet.getClass());
            request.addProperty(pi);

            envelope.setOutputSoapObject(request); 
            envelope.addMapping(NAMESPACE, "dataSet", DataSet.class);
            envelope.addMapping(NAMESPACE, "images", Photo.class);

            AndroidHttpTransport httpTransport = new AndroidHttpTransport(URL);
            httpTransport.debug = true;                         
            httpTransport.call(SOAP_ACTION, envelope);

            SoapObject result = (SoapObject) envelope.bodyIn;
        Log.d("Result: ", result.toString());
         } 
```

}

但我收到以下错误**无法序列化：[Lcom.common.Photo;@41221270**。

我的代码有什么问题。我已经搜索过这个问题。但是我没有得到正确的答案。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T10:32:15.173

在 Photo 类的 getPropertyInfo 方法中，将数据属性的类型从

`byte[].class`

到

`MarshalBase64.BYTE_ARRAY_CLASS`.

将 setProperty 中的赋值更改为

`data = Base64.decode(value.toString(), Base64.DEFAULT);`

编辑以回应您的评论：

您还需要创建一个 PhotoList 类：

```
public class PhotoList extends Vector<Photo> implements
    KvmSerializable {

private static final long serialVersionUID = 12345L;  // you can let the IDE generate this

@Override
public Object getProperty(int index) {
    return this.get(index);
}

@Override
public int getPropertyCount() {
    return this.size();
}

@Override
public void setProperty(int index, Object value) {
    this.add((Photo) value);
}

@Override
public void getPropertyInfo(int index, Hashtable properties,
        PropertyInfo info) {
    info.name = "Photo";
    info.type = Photo.class;
}
} 
```

更改您的 DataSet 类实现，使图像的类型为 PhotoList 并对其进行初始化。还要更改 getPropertyInfo/setProperty 方法中的类型。

```
PhotoList images = new PhotoList();
...
info.type = PhotoList.class;
...
images = (PhotoList)value; 
```

您还需要将 PhotoList 映射添加到您的 SOAP 信封。

# ruby - '干燥'我的 Ruby 语法

> ID：12153055
> 
> 赞同：3
> 
> 时间：2012-08-28T05:02:33.090
> 
> 标签：ruby, dry

我有一个重复的比较，我必须检查三个变量是否等于某个变量。为简单起见，我将创建一个场景来说明我遇到的问题。

```
if time == -1 and day_of_week == -1 and month == -1 
```

我想知道是否有一种简洁的、逻辑上等效的方法可以在不重复的情况下实现同一行代码。

现在我正在使用一种迂回的方式来做这件事，如下所示：

```
all_equal = true
[time_now, day_of_week, month].each { |value| all_equal = false if value != -1 }
if all_equal .... 
```

哈，显然它非常过分（而且显然效率较低），但我发现缺乏重复更令人赏心悦目。

你会推荐一个更好的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T05:06:46.070

使用[`Enumerable#all?`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-all-3F)：

```
if [time_now, day_of_week, month].all? { |value| value == -1 }
  # do something
end 
```

# iphone - 如何在 iphone sdk 中编辑后保存图像？

> ID：12153059
> 
> 赞同：1
> 
> 时间：2012-08-28T05:03:01.093
> 
> 标签：iphone

我想将旋转后的图像保存到照片库。我有一个 UIImageView 显示图像。我使用下面的代码片段来翻转图像。由于我转换了图像视图，旋转的图像确实会显示出来。但是在保存图像时，我得到了原始图像（未翻转）。如何保存翻转的图像？

```
CGAffineTransform transform =  CGAffineTransformMakeRotation(DEGREES_TO_RADIANS(degrees));
   image.transform = transform; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T05:07:02.537

只需截取图像或保存它的视图的屏幕截图，无论它已被旋转还是翻转，它都会被保存下来......这里提供了一些代码......

```
-(IBAction)saveToPhotoGallery:(id)sender
{
    UIGraphicsBeginImageContext(baseView.frame.size);
    [baseView.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *attachimage = [[UIImage alloc]initWithData:Data];
    UIImage *viImage=UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    attachimage = viImage;
    UIImageWriteToSavedPhotosAlbum(viImage, nil, nil, nil);

    UIAlertView *alert=[[UIAlertView alloc] initWithTitle:@"Save" message:@"Saved to photo gallery" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil,nil];
    [alert show];
}
} 
```

希望这可以帮助 ！！！

# android - 如何让选项菜单在android 4.0+上垂直显示

> ID：12153060
> 
> 赞同：1
> 
> 时间：2012-08-28T05:03:01.640
> 
> 标签：android, android-4.0-ice-cream-sandwich, optionmenu

android 上的原始选项菜单在 android 2.3 或更早版本上是水平的，在 android 4.0 或更高版本上是垂直的（我不知道它在 android3.0+ 上是什么样子）。

我创建了一个使用主题的项目：默认情况下为“android:Theme.Holo.Light.DarkActionBar”，并且选项菜单在 android 4.0+ 上垂直显示。但是当我将其更改为“android:Theme.Light”时，选项菜单会水平显示。

如何在不修改主题的情况下使其在 android 4.0+ 上再次垂直？

# haskell - 这个haskell样本可以更短吗？

> ID：12153064
> 
> 赞同：5
> 
> 时间：2012-08-28T05:03:22.700
> 
> 标签：haskell

这是我从 YAHT 锻炼的解决方案：

> 练习 4.6 编写一个数据类型 Tuple，它可以包含一个、两个、三个或四个元素，具体取决于构造函数（也就是说，应该有四个构造函数，每个参数数量一个）。还提供函数 tuple1 到 tuple4 ，它们接受一个元组并返回该位置的值，或者如果数字有效则返回 Nothing（即，您要求元组上的 tuple4 只包含两个元素）。

当我写第一行时，我对与 C# 相比的简单性感到兴奋

```
    数据元组 abcd = Tuple1 a | 元组2 ab | 元组3 abc | 元组4 abcd

    -- 类 Tuplex<a,b,c,d> {
    -- Tuplex(a p1){ _p1 = p1; }
    -- Tuplex(a p1, b p2){ _p1 = p1; _p2 = p2; }
    -- Tuplex(a p1, b p2, c p3){ _p1 = p1; _p2 = p2; _p3 = p3; }
    -- Tuplex(a p1, b p2, c p3, d p4){ _p1 = p1; _p2 = p2; _p3 = p3; _p4 = p4; }
    -- 公共 Nullable<a> _p1;
    -- 公共 Nullable<b> _p2;
    -- 公共 Nullable<c> _p3;
    -- 公共 Nullable<d> _p4;
    -- }

```

在 C# 中，我可以毫无问题地访问任何字段，但在这里我应该编写一个“访问器函数”，对吧？这里的代码量让我很难过。

我可以在这里有更短的代码吗？

```
    tuple1 ∷ 元组 abcd → 可能 a
    tuple2 ∷ 元组 abcd → 也许 b
    tuple3 ∷ 元组 abcd → 可能 c
    tuple4 ∷ 元组 abcd → 可能 d
    tuple1 (Tuple1 a) = 只是一个
    tuple1 (Tuple2 ab) = 只是一个
    tuple1 (Tuple3 abc) = 只是一个
    tuple1 (Tuple4 abcd) = 只是一个
    tuple2 (Tuple1 a) = 无
    tuple2 (Tuple2 ab) = 只是 b
    tuple2 (Tuple3 abc) = 只是 b
    tuple2 (Tuple4 abcd) = 只是 b
    tuple3 (Tuple1 a) = 没有
    tuple3 (Tuple2 ab) = 没有
    tuple3 (Tuple3 abc) = 只是 c
    tuple3 (Tuple4 abcd) = 只是 c
    tuple4 (Tuple1 a) = 无
    tuple4 (Tuple2 ab) = 没有
    tuple4 (Tuple3 abc) = 没有
    tuple4 (Tuple4 abcd) = Just d

    -- 单元测试
    prop_tx1 = tuple1 (Tuple1 4) ≡ 仅 4
    prop_tx2 = tuple1 (Tuple2 4 'q') ≡ 只有 4
    prop_tx3 = tuple2 (Tuple1 4) ≡ (Nothing ∷ Maybe Char)
    prop_tx4 = tuple2 (Tuple2 4 'q') ≡ Just 'q'

```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T13:18:52.580

这是一种方法：集中您的模式匹配。

```
unTuplex f1 f2 f3 f4 t = case t of
    Tuple1 a       -> f1 a
    Tuple2 a b     -> f2 a b
    Tuple3 a b c   -> f3 a b c
    Tuple4 a b c d -> f4 a b c d

tuple1 = unTuplex (\a -> Just a ) (\a _ -> Just a ) (\a _ _ -> Just a ) (\a _ _ _ -> Just a)
tuple2 = unTuplex (\_ -> Nothing) (\_ b -> Just b ) (\_ b _ -> Just b ) (\_ b _ _ -> Just b)
tuple3 = unTuplex (\_ -> Nothing) (\_ _ -> Nothing) (\_ _ c -> Just c ) (\_ _ c _ -> Just c)
tuple4 = unTuplex (\_ -> Nothing) (\_ _ -> Nothing) (\_ _ _ -> Nothing) (\_ _ _ d -> Just d) 
```

或者，您可以显式表达嵌套结构：

```
{-# LANGUAGE NoMonomorphismRestriction #-}
data DONE = DONE -- could just use (), but this is a pretty descriptive name
type Tuplex a b c d = Maybe (a, Maybe (b, Maybe (c, Maybe (d, DONE))))

tuple1 x = x >>= return . fst -- or tuple1 = fmap fst
tuple2 x = x >>= tuple1 . snd
tuple3 x = x >>= tuple2 . snd
tuple4 x = x >>= tuple3 . snd 
```

然后`tuple1`（除其他外）具有类型`Tuplex a b c d -> Maybe a`，并且在`tuple4`其上具有（再次，除其他外）类型`Tuplex a b c d -> Maybe d`。

编辑：...实际上，这表明第一种方法的替代延续。

```
import Control.Monad

decrement :: Tuplex a b c d -> Maybe (Tuplex b c d t)
decrement (Tuple1 a) = Nothing
decrement (Tuple2 a b) = Just (Tuple1 b)
decrement (Tuple3 a b c) = Just (Tuple2 b c)
decrement (Tuple4 a b c d) = Just (Tuple3 b c d)

zero :: Tuplex a b c d -> a
zero (Tuple1 a) = a
zero (Tuple2 a b) = a
zero (Tuple3 a b c) = a
zero (Tuple4 a b c d) = a

tuple1 = Just . zero
tuple2 = decrement >=> tuple1
tuple3 = decrement >=> tuple2
tuple4 = decrement >=> tuple3 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-28T20:52:49.423

我会尽量保持简单：

```
data Tuplex a b c d = Tuple1 a | Tuple2 a b | Tuple3 a b c | Tuple4 a b c d

toMaybes (Tuple1 p)       = (Just p, Nothing, Nothing, Nothing)
toMaybes (Tuple2 p q)     = (Just p, Just  q, Nothing, Nothing)
toMaybes (Tuple3 p q r)   = (Just p, Just  q, Just  r, Nothing)
toMaybes (Tuple4 p q r s) = (Just p, Just  q, Just  r, Just  s)

tuple1 t = p where (p,_,_,_) = toMaybes t 
tuple2 t = q where (_,q,_,_) = toMaybes t 
tuple3 t = r where (_,_,r,_) = toMaybes t 
tuple4 t = s where (_,_,_,s) = toMaybes t 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T05:14:21.110

只需给您的元组字段名称！

```
data Tuplex a b c d = Tuple1 { tuple1 :: a }
                    | Tuple2 { tuple1 :: a
                             , tuple2 :: b }
                    | Tuple3 { tuple1 :: a
                             , tuple2 :: b
                             , tuple3 :: c }
                    | Tuple4 { tuple1 :: a
                             , tuple2 :: b
                             , tuple3 :: c
                             , tuple4 :: d } 
```

因此，您具有以下类型的功能：

```
tuple1 :: Tuplex a b c d -> a
tuple2 :: Tuplex a b c d -> b
-- etc 
```

在 Haskell 中使用这样的记录字段名称实际上不如您在 Haskell 中预期的那么常见，因为模式匹配很容易，并且至少在某些圈子中，`RecordWildCard`扩展的受欢迎程度允许您执行以下操作：

```
function (Tuples3 {..}) =
-- now you have variables tuple1 :: a, tuple2 :: b, etc. 
```

（使用记录通配符时，最好将元组字段命名为更简单的名称，例如 tupA、tupB、tupC、tupD）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T16:05:44.937

```
import Safe (atMay) -- from the 'safe' package

toList (Tuple1 a) = [a]
toList (Tuple2 a b) = [a, b]
toList (Tuple3 a b c) = [a, b, c]
toList (Tuple4 a b c d) = [a, b, c, d]

tuple n t = atMay (toList t) n

[tuple1, tuple2, tuple3, tuple4] = map tuple [1..4] 
```

编辑：Vitus 正确地指出这仅适用于同质元组，因此这不是正确答案。在那种情况下，我会听从丹尼尔的回答。

# .htaccess - 试图在 htaccess 中重写 url

> ID：12153066
> 
> 赞同：0
> 
> 时间：2012-08-28T05:03:30.023
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

我有网址

```
http://www.url.com/business/index.php?biz=andrewliu 
```

我正在努力完成，所以它将是

```
http://www.url.com/business/andrewliu 
```

我试图有这个：

```
RewriteRule ^/?([a-z0-9_-]+)/?$ /index.php?biz=$1 [L] 
```

或者

```
RewriteRule ^/?([a-z0-9_-]+)/?$ /business/index.php?biz=$1 [L] 
```

不工作？

帮我？

编辑：

我有这个

```
RewriteEngine on 
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteCond %{REQUEST_FILENAME}\.php -f 
```

在重写之前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T05:07:26.220

这取决于您的`.htaccess`文件在哪个目录中。

对于根目录，试试这个：

```
RewriteRule ^/?business/([a-zA-Z0-9_-\.]+)/?$ /business/index.php?biz=$1 [L] 
```

如果您的`.htaccess`文件在业务目录中，那么您的声明应该可以正常工作：

```
RewriteRule ^/?([a-zA-Z0-9_-\.]+)/?$ /index.php?biz=$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T05:07:49.487

重写规则 ^business/([_0-9a-zA-Z-]+)/?$ business/index.php?b=$1 [L]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T05:09:06.647

从您的示例中不清楚您是想要“biz”还是“business”还是“b”。我猜你想要“biz”，在这种情况下你的规则应该是：

```
RewriteRule business/(.*) /index.php?biz=$1 [L] 
```

或者，也许你想要：

```
RewriteRule ([^\/]*)/(.*) /index.php?$1=$2 [L] 
```

# android - 处理 TelephonyManager（处理来电、已拨电话、未接来电）：这在 Android 2.3 版本中是否可行

> ID：12153070
> 
> 赞同：0
> 
> 时间：2012-08-28T05:03:47.333
> 
> 标签：android

我听说我们不能使用 TelephonyManager 来检测来自 Android 2.3 及更高版本的来电/未接/已拨电话。这是真的？如果是的，我们是否有任何解决方法来处理电话？请建议。我急需它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T05:16:21.890

**检查[这篇](https://stackoverflow.com/questions/6446580/android-get-call-history-of-contact)文章。这会有所帮助**。

你可以查询一下。

请找到使用 TelephonyManager 的代码。我在 2.3.3 中尝试过并且正在为我工​​作：

```
public class MainActivity extends Activity {

private TelephonyManager telephonyManager;
private PhoneStateListener listener;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // Get the telephony manager
    telephonyManager = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);

    // Create a new PhoneStateListener
    listener = new PhoneStateListener() {

        @Override
        public void onCallStateChanged(int state, String incomingNumber) {
            String stateString = "N/A";
            switch (state) {
            case TelephonyManager.CALL_STATE_IDLE:
                stateString = "Idle";
                break;
            case TelephonyManager.CALL_STATE_OFFHOOK:
                stateString = "Off Hook";
                break;
            case TelephonyManager.CALL_STATE_RINGING:
                stateString = "Ringing";
                break;
            }
            Log.i("DEMO",
                    String.format("\nonCallStateChanged: %s", stateString));
        }
    };

    telephonyManager.listen(listener, PhoneStateListener.LISTEN_CALL_STATE);

} 
```

在 Manifest 中，您需要输入权限：

```
<uses-permission android:name="android.permission.READ_PHONE_STATE"/> 
```

# android - 从片段内部获取父 ViewPager 视图

> ID：12153076
> 
> 赞同：35
> 
> 时间：2012-08-28T05:04:55.503
> 
> 标签：android, android-fragments, android-viewpager

我正在尝试从片段内部访问父 viewpager，但我不知道该怎么做。我需要在片段内的 onClick 事件之后切换 ViewPager 上的 currentItem。

有任何想法吗？

编辑：

我想访问父视图（ViewPager View），以便我可以从我的一个片段内部更改可见的 currentItem。

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-08-28T05:10:35.617

从片段中，调用 getActivity() 它将为您提供托管片段的活动。然后调用 findViewById(ViewPagerId) 来获取 ViewPager。

```
ViewPager vp=(ViewPager) getActivity().findViewById(ViewPagerId); 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2015-01-10T17:16:30.903

编辑：我必须补充一点，即使 Eldhose 的回答有效，我也会捍卫我的方法。因为片段对包含它的 Activity 了解得越少越好。通过这样做，您可以在不依赖 ID 的情况下获取父视图，即使它不是 ViewPager，您仍然可以从中获取信息。

您可以在 Fragment 的`onCreateView`方法中获取。

`container`参数是父视图，在这种情况下，是一个 ViewPager 。

在 Java 中：

```
 @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                             Bundle savedInstanceState) {

        ViewPager pager = (ViewPager) container;
        //.... Rest of your method
    } 
```

科特林版本：

```
 override fun onCreateView(inflater: LayoutInflater, container: ViewGroup, 
    savedInstanceState: Bundle) {

        val pager = container as ViewPager
        //.... Rest of your method
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-21T12:51:53.893

方法`onCreateView`和`onViewCreated`被`onAttach`调用得太早。

`onResume`该视图在片段的方法中肯定附加到其父视图。这是一个很好的地方然后使用`getView().getParent()`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-29T22:01:40.853

另一种帮助我的方法：

```
 List<Fragment> fragment = getActivity().getSupportFragmentManager().getFragments();
                for (Fragment f:fragment) {
                    if (f instanceof CreatCheckInFragment){
                        ((ParentFragment) f).viewPager.arrowScroll(View.FOCUS_LEFT);
                    }
                } 
```

# resque - 在 before_enqueue 中修改 resque gem 中的 args 参数，并将修改后的 args 传递给执行

> ID：12153089
> 
> 赞同：0
> 
> 时间：2012-08-28T05:07:25.680
> 
> 标签：resque, ruby-on-rails-2

有没有办法在 before_enqueue 方法的 resque enqueue 方法的 *args 参数中添加一些 args 并将添加的参数传递给 before_perform 方法。

或者有什么方法可以独立地将一些数据从 before_enqueue 方法发送到 before_perform 方法？

例如：

```
class Action
    :queue queueName

    def self.before_enqueue(*args)
        param1 = 1
        param2 = 2
        args.push(param1, param2) 
        # I know this is not the correct way as args is a local variable here. 
        #But something like this
    end

    def self.before_perform(*args)
        puts args.inspect # I need the added args here
    end

    def self.perform(params)
        #some code here
    end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T07:18:51.747

发现无法在 before_enqueue 中添加额外的参数。但相反，我们可以修改现有参数。因此，我们可以在 enqueue 调用中传递一个空哈希作为参数，并将参数作为键值对添加到 before_enqueue 的这个空哈希中。我说的是关于 Resque 1.20.0 的一切

调用入队方法：

```
Resque.enqueue(class_name, {}) 
```

在 resque 执行类中：

```
self.before_enqueue(*args)
  args[0][:param1] = 1
  args[0][:param2] = 2
end 
```

上述参数也将在 before_perform 中可用。

# javascript - mac 上 safari 中的断断续续、缓慢的“点滚动”动画

> ID：12153097
> 
> 赞同：1
> 
> 时间：2012-08-28T05:08:16.897
> 
> 标签：javascript, performance, firefox, optimization, safari

我目前正在完成[这个网站](http://www.pickmixmagazine.com/wordpress)：

在 Mac 上使用 firefox 或 safari 时，与 Chrome 相比，“点到滚动”的运行速度非常慢。在 Windows 7 上，它在 Chrome 和 Firefox 中运行良好，但在 Safari 中运行良好，任何想法都将不胜感激，我用于滚动功能的代码如下：

```
function handleMouse(e) {
  if (x && y) {
      var diffX=e.clientX-x;
      var diffY=e.clientY-y;
      window.scrollBy(diffX, diffY);}
      x = e.clientX;
      y = e.clientY;
}

document.onmousemove = handleMouse; 
```

# cocoa - 如何使两个 NSWindow 看起来具有相同的顺序？

> ID：12153100
> 
> 赞同：0
> 
> 时间：2012-08-28T05:08:36.850
> 
> 标签：cocoa, user-interface, nswindow, shadow

我有两个`NSWindow`s，其中一个是另一个的孩子。基本上我想要完成的是让孩子弹出并似乎扩展了父母。如果你愿意，可以把它想象成打开一本书：封面翻开并以与扉页相同的 Z 顺序结束。

但是我有一个问题，其中一个窗口总是在另一个窗口上投下阴影。有没有办法让它们在同一个 Z 上，这样既不会在另一个上投下阴影，又会在它们下方的窗户上投下阴影？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T06:17:40.920

这能行吗？使用现有的子窗口，并使用 setShadow:false 调用移除阴影。同时在两个现有窗口后面创建第三个虚拟窗口 Z-ordered。使该窗口始终与真正的子窗口具有相同的大小和形状，并留下阴影。

这有两个可能的问题：（1）在两个阴影相交的点处有一个奇怪的“双阴影”。(2)有焦点的窗口投射的阴影远大于没有焦点的窗口投射的阴影。因此，如果焦点在两个窗口之间转移，阴影可能会改变大小。不知道你会如何解决这个问题。

否则，您唯一的选择可能是将关闭阴影的两个窗口放在一个会投射一个阴影的令人讨厌的容器窗口中。这将是一个非常激进的 UI 更改，但在我的经验中，修补应用程序“外边缘”的默认外观或尝试在不使用操作系统功能的情况下编写自己的部分透明度的应用程序很少能顺利运行。

# python - 仅当它不存在时才创建新对象的最快方法（SQLAlchemy）

> ID：12153106
> 
> 赞同：23
> 
> 时间：2012-08-28T05:09:16.570
> 
> 标签：python, database, postgresql, sqlalchemy, flask-sqlalchemy

我正在寻找创建新 SQLAlchemy 对象的*最快*方法，前提是它在数据库中尚不存在。

我现在这样做的方式是首先获取查询的计数以查看它是否存在，如果不存在 - 然后我创建它。例如：

```
if not User.query.filter(email=user.email).count():
    db.session.add(user)
    db.session.commit() 
```

这是最好的方法吗？希望得到一些反馈。谢谢！

# python - python自动完成跳过并调用函数

> ID：12153107
> 
> 赞同：0
> 
> 时间：2012-08-28T05:09:20.633
> 
> 标签：python, autocomplete, gtk

我有一个小 GUI，它有一个这样的自动完成设置：

```
 completion_liststore = create_completion_model()
    completion = Gtk.EntryCompletion()
    completion.set_model(completion_liststore)
    completion.set_text_column(0)
    completion.set_match_func(match_anywhere, None)
    builder.get_object('student_change').set_completion(completion)
    completion.connect('match-selected', self.populate_main) 
```

在我的处理程序类中，完成模型和匹配如下所示：

```
def create_completion_model():
    db = sqlite3.connect('gradebook.db')
    cursor = db.cursor()
    cursor.execute('SELECT * from students')
    students = cursor.fetchall()
    names = Gtk.ListStore(str)
    for student in students:
        names.append([student[5]])
    cursor.close()
    return names

def match_anywhere(completion, entrystr, iter, data):
    modelstr = completion.get_model()[iter][0]
    return entrystr in modelstr.lower() 
```

非常直截了当，效果很好。我想做的只是直接调用我的 populate_main 函数，但它似乎只能通过我的自动完成来工作。我的 populate_main 函数如下所示：

```
 def populate_main(self, completion, treemodel, treeiter):
        name = treemodel[treeiter][completion.get_text_column()]
        db = sqlite3.connect('gradebook.db')
        db.row_factory = dict_factory
        cursor = db.cursor()
        t = (name,)
        cursor.execute('SELECT * from students WHERE name=?', t)
        .... <-- and so on, filling in my form 
```

有没有办法重用这个函数，而不仅仅是复制/粘贴到一个新函数中，只是将名称发送给函数

# geospatial - 如何使用基于 GUI 的工具在没有 GDAL 的情况下裁剪 Geotiff？

> ID：12153108
> 
> 赞同：2
> 
> 时间：2012-08-28T05:09:23.747
> 
> 标签：geospatial, gdal, geotiff

我需要在不使用命令行 GDAL 的情况下裁剪 Geotiff 文件。我正在寻找基于 GUI 的 Geotiff 或相关文件编辑器。我需要自由选择要裁剪的任何区域。我需要保留经纬度信息，以便可以合并多个 Geotiff 文件。我不介意将 Geotiff 文件转换为其他格式，然后裁剪并转换为 Geotiff。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T07:36:42.800

您需要一个桌面 GIS。Qgis：[http](http://www.qgis.org/) : //www.qgis.org/ 将与无数其他 mappy 东西一起使用，或者有 gvSIG、OpenJUMP、uDIG 等，请参阅 www.osgeo.org 或搜索。我有没有提到这些都是免费和开源的？

另一个想法是使用 R，统计包。它可以在 Geotiffs 中读取、绘制它们、允许从图形窗口中进行选择、子集和保存，但它是一种编程语言，因此需要进行一些输入。该过程将是这样的：

```
r = raster("myraster.tiff")
plot(r)
bounds = locator(2) # you then click corners for cropping
c = crop(r,bounds)  # might be 'extract' or 'mask' or something...
plot(c) 
writeRaster(c,"clipped.tiff") 
```

原谅含糊不清。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-15T16:24:59.857

对于那些可能感兴趣的人，我们已经开始使用 GDAL 和 Qt 框架开发一个开源 GUI 实用程序**Rasterix 。**

它可以执行一些已经在几个 GDAL 命令行实用程序中实现的任务，用于光栅处理，但使用友好的图形用户界面。

**适用于 Windows、Linux 和 macOS**的完整**源代码**和预构建的二进制文件托管在 github 上，网址为[https://github.com/mogasw/rasterix](https://github.com/mogasw/rasterix)。

 **我们将在未来添加更多功能，但如果您对某些特别感兴趣，请使用 github 的问题让我们知道。**

# doctrine-orm - Doctrine 2 更新不止一栏？

> ID：12153111
> 
> 赞同：2
> 
> 时间：2012-08-28T05:09:35.617
> 
> 标签：doctrine-orm, sql-update, updates

如何将同一个元组上的这两个更新组合成一个操作？

```
$q = $this->em->createQuery('update \Entity\UserEn u set u.last = :last where u.name = :name');
$q->setParameters( array(
    'last'  => new \DateTime($newLast),
    'name'  => $theUser,

));
$q->getResult();

$q = $this->em->createQuery('update \Entity\UserEn u set u.contribution = :contribution where u.name = :name');
$q->setParameters( array(
    'contribution'  => $this->rContributionUser($theUser),
    'name'          => $theUser,

));
$q->getResult(); 
```

我认为一次更新比两次更新便宜。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T05:11:57.237

使用逗号分隔两个分配：

```
$q = $this->em->createQuery('update \Entity\UserEn u set u.last = :last, u.contribution = :contribution where u.name = :name');
$q->setParameters( array(
    'last'         => new \DateTime($newLast),
    'contribution' => $this->rContributionUser($theUser),
    'name'         => $theUser,
));
$q->getResult(); 
```

# ruby-on-rails - Rails 嵌套不相关的表单

> ID：12153116
> 
> 赞同：1
> 
> 时间：2012-08-28T05:10:10.640
> 
> 标签：ruby-on-rails, simple-form

我有一个嵌套在另一个表单中。内部形式如下所示：

```
= simple_form_for @new_player, url: register_player_path, remote: true, do |pf|
    ...
    = pf.button :submit 
```

但是，当我单击`submit`内部按钮时，它会尝试提交外部表单。我怎样才能解决这个问题？我想保留两个提交按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T05:23:06.747

Railscasts.com 上有一些关于嵌套表单的好视频。我相信你可以得到一个解决方案来观察他们：

[http://railscasts.com/episodes/196-nested-model-form-part-1](http://railscasts.com/episodes/196-nested-model-form-part-1)

[http://railscasts.com/episodes/197-nested-model-form-part-2](http://railscasts.com/episodes/197-nested-model-form-part-2)

# java - 我的服务器看到我的路由器的 IP 而不是客户端的

> ID：12153120
> 
> 赞同：0
> 
> 时间：2012-08-28T05:10:35.010
> 
> 标签：java, tomcat, servlets, ip

我有一个位于路由器后面的网络服务器。该服务器上的其中一个 servlet 依赖于用户的 IP 地址，但是，我经常获得路由器的 IP（即 192.168.1.1）而不是真实 IP。

我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T05:20:24.073

听起来你的“路由器”实际上就像一个反向代理。

您不太可能在 Java 中解决这个问题……甚至在您的服务器机器上。这听起来像一个路由器配置问题。您最好寻求有关“超级用户”或“服务器故障”的帮助。

要记住的一件事是，通过 IP 地址识别客户端总是有点狡猾。即使您已经解决了当前的问题，真实的客户端 IP 地址也可能由于各种原因无法使用：

*   客户端的 IP 可能已经过 NAT。

*   客户端可能正在通过一系列 HTTP 代理与您的网络服务器通信。

*   客户端可能在欺骗其 IP 地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T05:18:08.237

从[http://www.whatismyip.com/ 获取](http://www.whatismyip.com/)您的全球 IP ，我认为您可能还需要在具有 servlet 的用户的路由器上配置端口转发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T05:19:26.910

我建议访问[http://wwww.whatismyip.com](http://wwww.whatismyip.com)以获取 IP 地址，以防您没有尝试过这种方式。您将从这个链接中获得更多想法。

[在 Java 中获取“外部”IP 地址](https://stackoverflow.com/questions/2939218/getting-the-external-ip-address-in-java)

# html - 如何在 TBody 中将 TH Header 与 TD 对齐

> ID：12153125
> 
> 赞同：20
> 
> 时间：2012-08-28T05:11:33.323
> 
> 标签：html, css

我在尝试使用一些 CSS 将表格嵌入现有 HTML 页面时遇到问题。

默认情况下，此 CSS 隐藏表格的标题，其样式定义如下：

```
.tablestuff thead {
     display: none;
} 
```

但我希望表格显示，所以我尝试使用“display：block”（使用javascript）在thead元素上设置样式。这使得标题显示，但标题的列不与 td 列对齐。

我已将我的 HTML 缩减为以下内容（希望拼写错误最少），并在 javascript 设置的 thead 元素上显示样式。

```
<div class="tablestuff">
<table border="1">
<thead style="display:block">
<tr>
<th id="th1" style="width: 20px"></th>
<th id="th2" style="width: 20px"></th>
</tr>
</thead>
<tbody>
<tr>
<td headers="th1" style="width: 20px"></td>
<td headers="th2" style="width: 20px"></td>
</tr>
</tbody>
</table>
</div> 
```

如何使标题显示并与 td 列正确对齐？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-08-28T05:23:26.210

CSS 包含比常用的 、 、 和 更多`none`的`inline`显示`inline-block`模式`block`。事实上，有[不少](http://www.w3schools.com/cssref/pr_class_display.asp)。

在这种情况下，您想使用的是什么而不是`display:block;`is `display:table-header-group;`。

以下是应用于您的表格的不同样式的一些示例：

[http://jsfiddle.net/CrYdz/1](http://jsfiddle.net/CrYdz/1)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-28T05:23:40.520

问题是由`display:block`thead 的样式属性引起的。

将其更改为`display:table-header-group`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-28T05:22:52.247

当您想显示 thead 元素时，请使用此值：`display: table-header-group;`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-11-18T11:27:15.637

为表格中的表格标题和表格主体设置相同的宽度：

```
<table style="table-layout:fixed"> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T05:24:36.417

也许 TH 的内容比 TD 的内容更宽，实际上宽度不是设置的 20 像素。

因此，因为您首先加载页面时没有使用thead，所以表格会获得 TD 的宽度。然后，当您通过 js 显示 THEAD 时，表格宽度仍然相同，但可能 TH 具有不同的宽度。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-07T10:56:40.303

默认情况下，`th`应该`td`对齐。如果您想将其保留为默认值，只需输入`display: unset`：

```
.tablestuff thead {
     display: unset;
} 
```

## 纯 JavaScript：

```
document.querySelector("thead").style.display = "unset"; 
```

## jQuery：

要使 jQuery 的`$(".tablestuff thead").show()`方法起作用，您`css`需要像这样定义：

```
.tablestuff thead[style*='display: block'] {
    display: unset !important;
} 
```

这是因为默认情况下`.show()`将设置`display`为`block`。上面`css`将它设置回`unset`每当它设置为`block`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-04T15:15:43.567

万一没有什么能解决它。将您的`<tr>`内部移动`thead`到`tbody`.

这是我的唯一解决方案，因为我已经有很多并发症了。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-08-28T05:25:28.723

使用 css 显示和隐藏 th 而不是 thead

```
/* to hide */
.tablestuff thead th{
     display: none;
}

/* to show */
.tablestuff thead th{
     display: table-cell;
} 
```

# android - 在手机模拟器上运行时视图正在切割

> ID：12153126
> 
> 赞同：1
> 
> 时间：2012-08-28T05:11:35.340
> 
> 标签：android, datetimepicker

我正在为手机开发一个应用程序，因为我需要一个日期和时间选择器，并且由于 android 不提供两者，我创建了我的自定义一个。但是当我同时添加日期选择器和时间选择器时，时间选择器正在减少。我不知道为什么。虽然它在平板电脑上运行良好（正如我尝试过的那样），但在手机上它的切割显然是有原因的。有谁能够帮助我。

这就是我得到的。![我的形象](../Images/fd082fbb5ffc80a522a3b5bd467f4c70.png)

我的代码是

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:padding="5dp" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:orientation="horizontal" >
        <DatePicker
            android:id="@+id/dp_date"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal" />
        <TimePicker
            android:id="@+id/tp_time"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >
        <Button
            android:id="@+id/btn_date_time_ok"
            style="@style/Text.Medium"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:layout_weight="1"
            android:text="@string/ok" />
        <Button
            android:id="@+id/btn_date_time_cancel"
            style="@style/Text.Medium"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:layout_weight="1"
            android:text="@string/cancel" />
    </LinearLayout>

</LinearLayout> 
```

任何人都可以建议我一些选择器自行调整以适应屏幕的东西。或者我错过了什么。任何帮助将不胜感激。提前致谢。

***编辑***

有没有办法减少日期和时间选择器中使用的文本大小？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T05:22:18.893

试试这个 ：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal"
    android:orientation="horizontal"
    android:weightSum="10" >

    <DatePicker
        android:id="@+id/dp_date"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:layout_weight="5" />

    <TimePicker
        android:id="@+id/tp_time"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:layout_weight="5" />
</LinearLayout>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/btn_date_time_ok"
        style="@style/Text.Medium"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:text="@string/ok" />

    <Button
        android:id="@+id/btn_date_time_cancel"
        style="@style/Text.Medium"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:text="@string/cancel" />
</LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T06:38:52.187

我认为你应该使用`android:margin`而不是`android:padding`希望它有帮助:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T07:40:43.667

问题是您的日期和时间选择器的大小。在您的代码中，线性布局父级的方向设置为水平，但水平空间中没有足够的空间。即使方向设置为垂直，问题也可能再次出现。
解决这个问题的两种方法：

*   使用大小比例：您可以将 layout_weight 分配给子项，这将保持大小比例并相应地调整子项（视图）的大小。根据您的要求，您可以对日期选择器和时间选择器使用
    **layout_weight = 1**（大小相等）。
*   使用 srollView：您可以使用 Horizo​​ntalScrollView（如果方向是水平的）或 ScrollView（如果方向是垂直的）。不管意见有多大，都会被这些照顾。

我希望这有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T10:34:29.583

感谢所有答案，Bu终于解决了我的问题。我正在为我的手机设备使用不同的布局文件，以便布局以适当的方式出现。感谢所有的努力

# yahoo - 使用 Yahoo! 的问题 Web 服务和 API (YQL)

> ID：12153132
> 
> 赞同：-2
> 
> 时间：2012-08-28T05:12:32.417
> 
> 标签：yahoo, yql, yahoo-api, yahoo-finance

我正在使用 Yahoo Api 和 Web 服务..

例如：

```
http://query.yahooapis.com/v1/public/yql?q=select symbol,DaysLow,DaysHigh,PreviousClose from yahoo.finance.quotes where symbol in ("INDUSINDB.NS,YESBANK.NS,CANBK.NS,AXISBANK.NS,SBIN.NS,KOTAKBANK.NS,HDFCBANK.NS,BANKBAROD.NS,UNIONBANK.NS,BANKINDIA.NS,ICICIBANK.NS,PNB.NS")&diagnostics=false&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys

http://query.yahooapis.com/v1/public/yql?q=select symbol,DaysLow,DaysHigh,PreviousClose from yahoo.finance.quotes where symbol in ("ACC.NS,AMBUJACEM.NS,ASIANPAIN.NS,AXISBANK.NS,BAJAJAUTO.NS,BANKBAROD.NS,BHARTIART.NS,BHEL.NS,BPCL.NS,CAIRN.NS,CIPLA.NS,COALINDIA.NS,DLF.NS,DRREDDY.NS,GAIL.NS,GRASIM.NS,HCLTECH.NS,HDFC.NS,HDFCBANK.NS,HEROHONDA.NS,HINDALCO.NS,HINDUNILV.NS,ICICIBANK.NS,IDFC.NS,INFY.NS,ITC.NS,JINDALSTE.NS,JPASSOCIA.NS,KOTAKBANK.NS,LT.NS,M%26M.NS,MARUTI.NS,NTPC.NS,ONGC.NS,PNB.NS,POWERGRID.NS,RANBAXY.NS,RELIANCE.NS,RELINFRA.NS,SAIL.NS,SBIN.NS,SESAGOA.NS,SIEMENS.NS,STER.NS,SUNPHARMA.NS,TATAMOTOR.NS,TATAPOWER.NS,TATASTEEL.NS,TCS.NS,WIPRO.NS")&diagnostics=false&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys 
```

这些 Web 服务返回给我 Xml。但有时它不会返回任何结果。

表明

> 此 XML 文件似乎没有任何与之关联的样式信息。文档树如下所示。

有人可以帮我吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T07:16:25.827

第一：`This XML file does not appear to have any style information associated with it. ...`不阻止文件显示结果。看起来流量很大，查询时间太长。

YQL 数据表只是 csv 转换。这样就可以直接查询后面的csv了。此外，当流量很大时，YQL 数据表通常会关闭，而 csv 文件几乎是最新的。

您可以使用以下查询执行相同的操作（CSV 而不是 XML）：

```
http://download.finance.yahoo.com/d/quotes.csv?f=smp&s=INDUSINDB.NS,YESBANK.NS,CANBK.NS,AXISBANK.NS,SBIN.NS,KOTAKBANK.NS,HDFCBANK.NS,BANKBAROD.NS,UNIONBANK.NS,BANKINDIA.NS,ICICIBANK.NS,PNB.NS 
```

CSV 文件更可靠（信息的直接来源而不是转换）和更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-12T08:14:48.843

您提供的代码段对所有字段都返回 N/A。一般来说，雅虎 API 似乎对西方以外的交易所有严重的限制。我已经尝试过 YQL 以及 REST api，但无法访问印度股票的数据。

尝试将 RIL.BO 替换为此处的大多数示例：http: [//www.gummy-stuff.org/Yahoo-data.htm](http://www.gummy-stuff.org/Yahoo-data.htm)

适用于 GOOG、YHOO 和 AAPL。对于像 RIL.BO 这样的印度股票，我得到的只是 N/As。您的查询重复返回：

```
INDUSINDB.NS    N/A - N/A   N/A
YESBANK.NS      N/A - N/A   N/A
CANBK.NS        N/A - N/A   N/A
AXISBANK.NS     N/A - N/A   N/A
SBIN.NS         N/A - N/A   N/A
KOTAKBANK.NS    N/A - N/A   N/A
HDFCBANK.NS     N/A - N/A   N/A
BANKBAROD.NS    N/A - N/A   N/A
UNIONBANK.NS    N/A - N/A   N/A
BANKINDIA.NS    N/A - N/A   N/A
ICICIBANK.NS    N/A - N/A   N/A
PNB.NS          N/A - N/A   N/A 
```

遗憾！雅虎！对他们的 API 似乎并不认真，否则这可能非常有用。文档也没有帮助。

# c# - 使用用户输入在 Active Directory 中搜索计算机名称

> ID：12153133
> 
> 赞同：7
> 
> 时间：2012-08-28T05:12:52.953
> 
> 标签：c#, active-directory

您好，我一直在尝试向我的 Windows 窗体程序添加一个功能，该功能允许用户在文本框中键入他们想在 Active Directory 中搜索的计算机或计算机。用户将在文本框中输入搜索字符串，然后点击按钮，匹配该搜索结果的计算机将出现在单独的搜索框中。到目前为止，这是我的代码。

我还希望每台计算机名称都位于单独的行上，例如：

```
computername1            
computername2        
computername3 
```

谢谢！

这是按钮内部的样子：

```
List<string> hosts = new List<string>();
DirectoryEntry de = new DirectoryEntry();
de.Path = "LDAP://servername";

try
{
    string adser = txtAd.Text; //textbox user inputs computer to search for

    DirectorySearcher ser = new DirectorySearcher(de);
    ser.Filter = "(&(ObjectCategory=computer)(cn=" + adser + "))"; 
    ser.PropertiesToLoad.Add("name");

    SearchResultCollection results = ser.FindAll();

    foreach (SearchResult res in results) 
    //"CN=SGSVG007DC" 
    {
       string computername = res.GetDirectoryEntry().Properties["Name"].Value.ToString();
       hosts.Add(computername);
       //string[] temp = res.Path.Split(','); //temp[0] would contain the computer name ex: cn=computerName,..
       //string adcomp = (temp[0].Substring(10));
       //txtcomputers.Text = adcomp.ToString();
    }

    txtcomputers.Text = hosts.ToString();
}
catch (Exception ex)
{
    MessageBox.Show(ex.ToString());
}
finally
{
    de.Dispose();//Clean up resources
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-28T05:18:41.353

如果您使用的是 .NET 3.5 及更高版本，则应查看`System.DirectoryServices.AccountManagement`(S.DS.AM) 命名空间。在这里阅读所有相关信息：

*   [在 .NET Framework 3.5 中管理目录安全主体](https://docs.microsoft.com/en-us/archive/msdn-magazine/2008/january/managing-directory-security-principals-in-the-net-framework-3-5)
*   [`System.DirectoryServices.AccountManagement`命名空间上的 MSDN 文档](https://docs.microsoft.com/en-us/dotnet/api/system.directoryservices.accountmanagement)

基本上，您可以定义域上下文并在 AD 中轻松找到用户和/或组：

```
// set up domain context
using (PrincipalContext ctx = new PrincipalContext(ContextType.Domain))
{
   // find a computer
   ComputerPrincipal computer = ComputerPrincipal.FindByIdentity(ctx, "SomeComputerName");

   if (computer != null)
   {
       // do something here....     
   }
} 
```

如果您不需要查找单台计算机，而是搜索整个计算机列表，则可以使用新`PrincipalSearcher`界面，它基本上允许您设置一个“QBE”（按示例查询）对象查找、定义搜索条件，然后搜索这些条件的匹配项。

新的 S.DS.AM 命名空间使得在 AD 中玩弄用户和组变得非常容易！

# asp.net-mvc - 保存带有标签的文本时出错

> ID：12153135
> 
> 赞同：0
> 
> 时间：2012-08-28T05:13:12.140
> 
> 标签：asp.net-mvc, entity-framework-4

我正在使用 EF 4.0 开发 MVC 应用程序。

我正在尝试将值`<test>`添加到地址字段，但在保存它时会出现以下错误，如何解决？

从客户端检测到潜在危险的 Request.Form 值 (Address=" `<test>`")。

**编辑**

请检查以下代码

```
namespace CEntities
{
    [MetadataType(typeof(EmployeeMetaData))]
    public partial class Employee
    {
    }

     /// <summary>
     /// Holds the validations for Employee class
     /// </summary>
     public class EmployeeMetaData
     {
         [Key]
         public int Id { get; set; }
         [Required]
         [StringLength(50, ErrorMessage = "First name can accept maximum 50 characters.")]
         public string FirstName { get; set; }

         [StringLength(50, ErrorMessage = "Last name can accept maximum 50 characters.")]
         public string LastName { get; set; }

         [StringLength(1000, ErrorMessage = "Address can accept maximum 1000 characters.")]
         public string Address { get; set; }
      }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T05:41:43.510

请检查以下代码

> 命名空间实体

{

```
[MetadataType(typeof(EmployeeMetaData))] 
```

公共部分类员工

```
{

} 
```

> ```
>  /// <summary>
>  /// Holds the validations for Employee class
>  /// </summary>
>  public class EmployeeMetaData
>  {
>      [Key]
>      public int Id { get; set; }
>      [Required]
>      [StringLength(50, ErrorMessage = "First name can accept maximum 50 characters.")]
>      public string FirstName { get; set; } 
> ```

```
 [StringLength(50, ErrorMessage = "Last name can accept maximum 50 characters.")]
     public string LastName { get; set; }

     [StringLength(1000, ErrorMessage = "Address can accept maximum 1000 characters.")]
     public string Address { get; set; }

  } 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T05:51:16.443

@YograjGupta 给了你一个很好的答案，我不确定为什么`[AllowHtml]`不起作用。另一个选项是在控制器中，如果您将 保存`EmployeeMetaData`到数据库中，您可以 `db.Configuration.ValidateOnSaveEnabled = false;`在保存更改之前添加 ,。您还必须删除该`if(ModelState.IsValid)`部分。

另一种选择是将`<`and`>`替换为`employeeMetaData.Address.Replace("<", "&lt;").Replace(">", "&gt;")`

请记住，如果您使用该`[AllowHtml]`属性，它会使您更容易受到黑客攻击，因此您可能希望在最终发布之前将其删除。或者您可以添加`Microsoft.Security.Application`并执行一些操作，例如`Sanitizer.GetSafeHtmlFragment(address)`删除不安全的 html。

**编辑**

您的控制器应如下所示：

```
public ActionResult Create(Employee employee)
{
    employee.Address = employee.Address.Replace("<", "&lt;").Replace(">", "&gt;");
    if(ModelState.IsValid)
    {
        db.Employees.Add(employee);
        db.SaveChanges();
        return RedirectToAction("Index");
    }
} 
```

或者你可以试试这个：

```
public ActionResult Create(Employee employee)
{
    db.Configuration.ValidateOnSaveEnabled = false;
    db.Employees.Add(employee);
    db.SaveChanges();
    return RedirectToAction("Index");
} 
```

`db`是您的数据库，并且`Employee`是您数据库中的 Employee 表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T05:19:06.007

您可以使用`ValidateInput(false)`关闭`Request Validation`，也可以将`[AllowHtml]`属性添加到模型属性

**编辑**：

在地址模型属性上添加`[AllowHtml]`属性。

```
[StringLength(1000, ErrorMessage = "Address can accept maximum 1000 characters.")]
[AllowHtml]
public string Address { get; set; } 
```

`using System.Web.Mvc;` 并在顶部添加指令。

您使用的是 Assembly System.Web.Mvc.dll，版本 4 还是版本 2。

`[AllowHtml]`属性在`Assembly System.Web.Mvc.dll, version 4`. 检查您的程序集版本以应用它。

# html - IE7中的列表项间距问题

> ID：12153137
> 
> 赞同：2
> 
> 时间：2012-08-28T05:13:22.743
> 
> 标签：html, css

在我的网页中，有一些项目是这样列出的，

*   项目 1
*   第 2 项
*   第 3 项

我想知道，它在 IE7 中占用了很多空间（我还没有在其他版本的 IE 浏览器上检查它），而在 FF 和 Chrome 中它很好。我在我的 CSS 中给出了“list-style-type: none”。仍然无法猜测为什么它会占用空间。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T05:32:57.210

在您的 HTML 页面中链接[**规范化 CSS**](http://necolas.github.com/normalize.css/)，并且您的页面应该在所有主要浏览器中呈现相同。

Normalize.css 使浏览器更一致地呈现所有元素并符合现代标准。它仅针对需要规范化的样式。

**编辑：**

边距和填充可能存在问题，请将其保持为 0-

```
ul, li{
  margin: 0;
  padding: 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-28T22:00:07.210

这个对我有用：

```
li { display:inline; } 
```

# php - codeigniter 像核心 php 中的 flashdata

> ID：12153140
> 
> 赞同：8
> 
> 时间：2012-08-28T05:14:05.753
> 
> 标签：php, session

有什么方法可以像在 codeigniter 中一样创建 flash 会话数据，
我想在核心 php 中创建它。

我不想使用 GET 方法，使用 url 传递变量会导致我的应用程序出现问题。
那么，我该怎么做呢？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-28T05:35:25.167

使用 PHP 会话创建 Flash 消息类非常容易。

```
class FlashMessage {

    public static function render() {
        if (!isset($_SESSION['messages'])) {
            return null;
        }
        $messages = $_SESSION['messages'];
        unset($_SESSION['messages']);
        return implode('<br/>', $messages);
    }

    public static function add($message) {
        if (!isset($_SESSION['messages'])) {
            $_SESSION['messages'] = array();
        }
        $_SESSION['messages'][] = $message;
    }

} 
```

确保你`session_start()`先打电话。然后您可以使用添加消息`FlashMessage::add('...');`

然后，如果您重定向，您可以在下次渲染页面时渲染消息`echo FlashMessage::render()`。这也将清除消息。

见[http://php.net/manual/en/features.sessions.php](http://php.net/manual/en/features.sessions.php)

# html - Rails：从表单输出创建 HTML 文件

> ID：12153144
> 
> 赞同：0
> 
> 时间：2012-08-28T05:14:23.357
> 
> 标签：html, ruby-on-rails, mailer

我正在尝试创建一个 HTML 文件以从 Rails 应用程序上传到不同的服务器。我需要一个类似于 Rails 中的邮件程序的解决方案。有谁知道实现这一目标的可行方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T05:34:03.013

如果您尝试在服务器之间发送文件，最简单的方法是在允许上传文件的另一台服务器上创建 API 端点并使用 API 密钥来保护连接。您可以非常轻松地使用 HTTP POST 方法来执行传输 ( [https://rubygems.org/gems/httmultiparty](https://rubygems.org/gems/httmultiparty) )。如果需要先生成文件：

```
data = render_to_string("post/show")
HTTParty.post('http://other.host/posts', contents: data) 
```

# iphone - 像邮件应用一样在 UITableViewCell 上绘图

> ID：12153149
> 
> 赞同：0
> 
> 时间：2012-08-28T05:15:33.663
> 
> 标签：iphone, quartz-2d

所以我正在尝试做一些“简单”的事情，比如邮件应用程序，其中我的 UITableVieCell 子类告诉用户有多少项目属于该对象。所以一旦我抓住我的手机，我就会这样做：

```
if ([map.locations count] > 0) {
        UIView *locationsView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, LOCATIONS_VIEW_LENGTH, LOCATIONS_VIEW_LENGTH)]; // LOCATIONS_VIEW_LENGTH is 20.0
        locationsView.frame = CGRectMake((cell.contentView.frame.size.width - 45), (cell.contentView.frame.size.height - locationsView.frame.size.height) / 2, LOCATIONS_VIEW_LENGTH, LOCATIONS_VIEW_LENGTH);
        locationsView.layer.backgroundColor = [UIColor grayColor].CGColor;
        [locationsView.layer setCornerRadius:3];

        UIFont *arialFont = [UIFont systemFontOfSize:12.0];
        NSString *locationsText = [NSString stringWithFormat:@"%i", [map.locations count]];
        CGSize locationsLabelSize = [locationsText sizeWithFont:arialFont constrainedToSize:locationsView.frame.size lineBreakMode:UILineBreakModeTailTruncation];
        UILabel *numLocationsLabel = [[UILabel alloc] initWithFrame:CGRectMake((locationsView.frame.size.width - locationsLabelSize.width) / 2, (locationsView.frame.size.height - locationsLabelSize.height) / 2, locationsLabelSize.width, locationsLabelSize.height)];
        numLocationsLabel.text = locationsText;
        numLocationsLabel.textColor = [UIColor whiteColor];
        numLocationsLabel.font = arialFont;
        numLocationsLabel.backgroundColor = [UIColor clearColor];
        [locationsView addSubview:numLocationsLabel];

        [cell.contentView addSubview:locationsView];
    } 
```

我最初尝试将此代码放在 UITableViewCell 的 awakeFromNib 方法中，但`[map.locations count]`即使在我的 configureCell 方法中它不是，我也总是小于 0。不知道为什么，无论如何，我在我的 cellForRowAtIndexPath 方法中调用 configureCell 并且它执行上述代码。它看起来非常可怕。

截图： ![在此处输入图像描述](../Images/b8aceadf530f607bec932e533a9aa1b0.png)

Apple 做了什么让他们的邮件变得这么好？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T05:23:22.793

请参考[simple-table-badges](http://www.tuaw.com/2010/01/07/iphone-devsugar-simple-table-badges/)链接，因为它也包含源代码。希望有帮助。

另请参阅链接中的[@RedBlueThing 答案](https://stackoverflow.com/questions/3689546/display-badge-info-on-uitableview)

# c++ - 通过函数初始化变量

> ID：12153155
> 
> 赞同：1
> 
> 时间：2012-08-28T05:16:35.693
> 
> 标签：c++, pointers, reference

我正在学习指针和参考，但我无法掌握这个概念。我需要在我的主函数中声明一个变量，然后通过用户输入通过函数对其进行初始化，而不返回任何内容。我试过了：

```
#include <iostream>
using namespace std;

void input(int &num){
   cout << "Enter A Number" << endl;
   cin >> static_cast<int>(num);
}
int main(){
   int x;
   input(x);
   cout << "The Number You Entered Was " << x << "!" << endl;
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T05:19:15.663

你做对了，除了`static_cast<int>`那里。它在那里做什么？是什么让你使用这个演员阵容？

摆脱那个演员阵容，它应该可以工作。这

```
cin >> num; 
```

是你所需要的全部。

**PS**请记住，在 C++ 术语中，术语*初始化*具有非常特定的含义。形式上，*初始化*始终是变量*定义*的一部分。定义后对该变量所做的任何更改都不再是*初始化*。在您的情况下，变量`x`声明时没有初始化，这意味着它的生命开始时*未初始化*（具有不确定的值）。稍后您`x`通过从 中读取某些特定值`cin`，但这不再是*初始化*（在 C++ 术语的含义中）。

`x`用一些确定的初始值声明你可能是个好主意，比如

```
int x = 0; 
```

虽然我个人不是“虚拟”初始化程序的忠实粉丝。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T05:19:03.033

你应该放弃`static_cast`.

```
cin >> num; 
```

[std::cin 的 operator>>](http://en.cppreference.com/w/cpp/io/basic_istream/operator_gtgt)具有采用整数类型的重载。

请注意，您根本没有通过函数初始化变量。您通过将变量的引用传递给函数来为变量赋值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T05:20:13.753

不需要这些`static_cast`东西。您的函数获得了对 an的*引用*`int`，而您想要读取`int`. 由于您已经传递了对变量的引用，因此在您的`input`函数中对其所做的更改将反映在调用者中。

# c# - C#以高分辨率打印有理数

> ID：12153157
> 
> 赞同：1
> 
> 时间：2012-08-28T05:16:44.990
> 
> 标签：c#, decimal-point, rational-numbers

我有以下难题。在 C# 中，我想存储一个有理数并获得它的十进制表示法的字符串表示。

通常我只会使用`float`或`double`存储数字并获取字符串，但我想要一个“高分辨率”十进制表示法。`double`数据类型在它的字符串表示中最多只能提供大约 16 个字符。我正在寻找十进制表示法的字符串表示以包含更多字符，大约 30-50 是理想的。我需要“高分辨率”来检查重复的子序列。

有理数可能很简单，但我希望字符串表示非常详细

示例：`1/7`=>`0.1428571428571428571428571428`

**我的问题：** .NET 库中是否有 C# 数据结构可以存储和打印我上面描述的有理数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T05:21:16.067

基[类库的 CodePlex 站点](http://bcl.codeplex.com/)包含一个[BigRational 类型](http://bcl.codeplex.com/releases/view/42782)，它提供“任意精度的有理数类型”。这应该提供您希望的细节和精度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-05T04:46:51.467

我能找到的唯一使用此功能的现有工作是[Ken Johnson 提供](http://www.codeproject.com/Articles/88980/Rational-Numbers-NET-4-0-Version-Rational-Computin)[的`Rational`](http://www.codeproject.com/Articles/88980/Rational-Numbers-NET-4-0-Version-Rational-Computin)类。

这是一个实现您想要的示例：

```
[TestMethod]
public void FormatsAsDecimal()
{
    var oneSeventh = new Rational(1, 7);
    var oneSeventhAsDecimal = oneSeventh.ToString(EApproxmationType.DecimalPlaces, 28, true);
    oneSeventhAsDecimal.Should().Be("0.1428571428571428571428571428");
} 
```

# java - JSP 中的服务器端重定向和客户端重定向 - 哪个更好？

> ID：12153161
> 
> 赞同：0
> 
> 时间：2012-08-28T05:17:18.200
> 
> 标签：java, jsp, servlets

有没有理由相信服务器端重定向比客户端更好？服务器端重定向是否更安全？我知道服务器端重定向用于数据的多阶段处理。但是是否可以使用它而不是客户端重定向仅用于页面重定向（而不是多阶段处理）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T05:23:50.963

出于安全原因，我建议进行服务器端重定向，因为服务器负责应用程序中发生的每一个操作。这样你就可以更好地控制敏感数据。如果你的数据非常敏感，最好选择服务器侧重定向，因为您将有机会清理您的输入。

# java - 接口方法和抽象方法怎么调用默认？

> ID：12153164
> 
> 赞同：0
> 
> 时间：2012-08-28T05:17:32.013
> 
> 标签：java, swing, interface, actionlistener

当我们实现Listener、Renderer或者Editor的时候，Java里面的方法是怎么自动调用的呢？

代码：

```
Class A implements ActionListener{
   A(){
    //bla bla
    //bla bla 
    this.addActionListener(btn);

   }
   public void actionPerformed(ActionEvent e){**// How actionPerformed method called        //automatically if we register button**

   }
} 
```

注册按钮对象后如何自动调用**actionPerformed方法？**我们只是将 btn 对象传递给**addActionListener(btn)**。它怎么调用那个方法呢？

我检查了netbeans里面的`addActionListener`方法*。没有**method的调用`actionPerformed`方法**。此外，如果我们注册它会继续工作。**它是在内部的任何地方通过线程**调用吗？但我检查了源代码。**什么都没有**。如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T05:26:17.853

[使用API](http://docs.oracle.com/javase/7/docs/api/javax/swing/event/EventListenerList.html)中概述并在[此处](https://stackoverflow.com/q/2159803/230513)讨论的约定[`EventListenerList`](http://docs.oracle.com/javase/7/docs/api/javax/swing/event/EventListenerList.html)从父级拥有的调度事件。[*编辑器和渲染器*](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)由拥有的视图组件调用。`JComponent`[](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)

 *附录：*我们可以创建和原来一样的界面吗？如何？*

是的，[`JFreeChart`](https://stackoverflow.com/tags/jfreechart/info)这是一个相当容易理解的例子。尽管图表本身不是 a `JComponent`，但它对自己的[事件使用](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/event/package-summary.html)[相同的模型](http://docs.oracle.com/javase/7/docs/api/javax/swing/event/EventListenerList.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T05:26:09.477

在 Java 中，任何 Windows 组件上发生的任何事情都由[Event Dispatcher Thread](http://en.wikipedia.org/wiki/Event_dispatching_thread)处理：

> 事件分派线程 (EDT) 是 Java 中用于处理来自抽象窗口工具包 (AWT) 图形用户界面事件队列的事件的后台线程。这些事件主要是导致用户界面组件重绘自身的更新事件，或来自输入设备（如鼠标或键盘）的输入事件。

每当您单击或执行某些事件时，都是 EDT 启动动作侦听器，这就是为什么`Thread.sleep`在您的动作侦听器中执行任何操作最终都会冻结 UI 一段时间。

由于您的类实现了给定的接口，因此您的类将向 EDT 保证它将具有一系列方法，EDT 可以使用这些方法来完成它需要的任何事情。

有关 EDT 的更多信息，请查看[此](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)Oracle 文档。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T05:28:04.843

这是魔法。

事件处理由`AWT`API 为您处理。然后将这些事件排队并分派到各个组件（通过一系列步骤）。然后，每个相关方都会处理他们感兴趣的请求，然后再将它们传递到食物链上，直到到达您手中。

问题是，你应该关心吗？

在某些方面是的，但你关心电力是如何工作的，还是只关心你可以打开电灯开关？

我敢肯定有更好的文档，但你可以看看[http://docs.oracle.com/javase/1.3/docs/guide/awt/designspec/events.html](http://docs.oracle.com/javase/1.3/docs/guide/awt/designspec/events.html)对于初学者......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T05:23:15.467

当动作发生时，Swing 会自动调用您的 ActionListener。实际的方法调用位于 Swing 源代码的深处。*

# actionscript-2 - 将 ItemClick 事件处理委托给子项的单击事件处理（scaleform）

> ID：12153165
> 
> 赞同：0
> 
> 时间：2012-08-28T05:17:34.607
> 
> 标签：actionscript-2

ItemClick 事件属于 gfx.control.ScrollingList。这个 ScrollingList MovieClip 有两个子按钮。

我想处理这些孩子的点击事件。

```
private function configUI() {
  super.configUI();
  // MyList : ScrollingList;
  MyList.addEventListener( "itemClick", this, "OnListItemClicked" );
}
private function OnListItemClicked( e : Object ) {
    // how???
    // e.renderer?
} 
```

e.renderer 的类型为“MyListItemRenderer extends ListItemRenderer”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T23:14:21.307

如果您使用的是 CLIK AS3，则事件实际上应该是 scaleform.clik.events.ListEvent 类型 它包括单击列表项的“itemData”（您提供的列表数据对应于用户单击的条目）和'index' 被点击的索引。此外，默认情况下，列表将单击的项目标记为“已选择”，因此您只需询问列表：

```
private function OnListItemClicked( e : ListEvent ) 
{
    var myDataObj:Object = e.itemData;

    var clickedIdx:int = e.index;
    // or
    clickedIdx = MyList.selectedIndex;
} 
```

如果您使用的是 AS2 CLIK，我想它是相似的，但我没有使用过那个版本，所以不能肯定地说。

# javascript - 使用 Javascript 的图形编辑器

> ID：12153171
> 
> 赞同：0
> 
> 时间：2012-08-28T05:18:21.700
> 
> 标签：javascript

我想做一个在线制卡应用程序。它基本上应该允许用户将可用的图像放入卡片的模板中，在上面写文字并装饰它——基本的卡片定制。什么 javascript 图形库对这个项目有用？最后，我想要一个高分辨率/矢量图像作为可以轻松打印的输出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T05:21:39.947

Raphael 非常适合 SVG 等。[http://raphaeljs.com](http://raphaeljs.com)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T05:25:08.730

要获得高分辨率/矢量图像，您必须使用 SVG（可缩放矢量图形），目前 Web 浏览器仅支持此功能。有两种方法可以做到这些。

*   寻找画布库。我更喜欢[Raphael](http://raphaeljs.com/)，因为它也支持 SVG 和动画。
*   使用 HTML5 及其 Canvas 功能，您也可以创建这样的系统。

# codeigniter - Comet 与 Code Igniter 的聊天集成

> ID：12153174
> 
> 赞同：0
> 
> 时间：2012-08-28T05:18:34.830
> 
> 标签：codeigniter

我正在使用 Code Igniter 2.0 的彗星聊天。

问题-

我有一个列出所有用户的列表页面，我需要在他们的名字旁边显示他们的彗星聊天状态（“在线”或“离线”）。

为此，我们在用户表中有一个数据库字段（'chat_status'），我们通常在用户登录时将此字段设置为“0”或“1”，我们将此字段设置为“1”，当用户注销时，我们设置此字段为“0”。我只想使用彗星聊天回调，它将返回数组中的所有在线用户 ID，因此我将在我们的用户表中将他们的“聊天状态”更改为“1”。

我找不到任何可以一次性返回所有在线用户的彗星聊天功能或查询。

你能帮我解决这个问题吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T05:53:46.237

**集成**文件中有一个函数[在我的例子中，它在它的**integration.php**中]

`function getFriendsList()`在线显示所有朋友，但如果您想显示所有用户的朋友，请参考[链接中的说明](http://www.cometchat.com/documentation/installing-cometchat/custom-coded-site/php-site)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T18:24:31.137

您只需通过更改用户名字段来编辑 integration.php 函数中的 3 个 sql 查询。

您可以编写一个子查询并获取用户的状态，这将非常容易。

# c - 实现：udp接收队列丢包

> ID：12153177
> 
> 赞同：0
> 
> 时间：2012-08-28T05:18:46.993
> 
> 标签：c, sockets, network-programming, udp, freebsd

如何实现以下场景？

我希望我的 FreeBSD 内核在高负载时丢弃 UDP 数据包。

我可以将`sysctl`net.inet.udp.recvspace 设置为非常低的数字以丢弃数据包。但是我该如何实现这样的应用程序呢？

我假设我需要某种客户端/服务器应用程序。

任何指针表示赞赏。

ps 这*不是*作业。而且我*不是*在寻找确切的代码。我只是在寻找*想法*。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T05:21:42.770

它会自动执行此操作。你根本不需要做任何事情，更不用说摆弄内核参数了。

大多数关于 UDP 的帖子都在寻找*阻止*UDP 丢弃数据包的方法！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T20:18:32.867

使用`(SOL_SOCKET, SO_RCVBUF)`套接字选项通过`setsockopt()`更改套接字*缓冲区*的大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T08:01:27.410

调整发送应用程序以“丢弃”偶尔的数据包，或者如果不可能，则通过执行相同操作的代理连接 UDP 消息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T13:31:30.510

我要做的是执行以下操作。我不知道您是否需要内核模块或程序。

假设您在收到 UDP 数据报时有一个函数调用，然后您可以选择要做什么、丢弃它或处理它。并且进程函数可以触发多个线程。

```
EVER:
    DATAGRAM := DEQUE()
    IF(HIGHLOAD > LIMIT)
       SEND(HIGH_LOAD_TO(DATAGRAM.SOURCE))
       CONTINUE //Start from the biggining
    HIGLOAD := HIGHLOAD + 1 
    PROCESS(DATAGRAM)

PROCESS(DATAGRAM):
   ...PROCESS DATAGRAM...
   HIGHLOAD := HIGHLOAD - 1 
```

你可以随心所欲地调整这个，但这是一个想法。当你开始处理一个包裹时，你计数，当这个过程完成时，你递减。所以你基本上可以选择你现在处理多少包。

# android - 当已安装的应用程序有可用更新时通知用户

> ID：12153178
> 
> 赞同：0
> 
> 时间：2012-08-28T05:18:50.903
> 
> 标签：android, google-play, auto-update

我想在警报对话框中通知用户，当用户启动应用程序时，如果我的应用程序在 Play 商店中有更新。

是否有任何服务可以调用并从特定应用的 Play 商店获取更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T05:30:28.750

我编写了一个提供此功能的库。您需要自己的服务器来托管它需要的代码文件版本，但它非常易于使用。您可以在[此处](https://github.com/RaghavSood/AppaholicsUpdateChecker)找到它以及文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T05:42:16.630

一种简单的方法：
1\. 构建一个 Web 服务并将您的版本号保存在数据库中。
2\. 在应用程序启动时检查您的数据库是否有版本更新。
3\. 如果更新，请显示通知对话框。

# groovy - 从 1.4 升级到 1.5.1 时 Smooks GroovyContentHandlerFactory 异常？

> ID：12153183
> 
> 赞同：1
> 
> 时间：2012-08-28T05:19:18.850
> 
> 标签：groovy, freemarker, smooks

我最近将我的 Smooks 应用程序从 1.4 升级到 1.5.1，但我不断收到以下异常：

**处理 EDI 文件 org.milyn.cdr.SmooksConfigurationException 时出错：在类“org.milyn.smooks.scripting.groovy.GroovyContentHandlerFactory”上调用@Initialize 方法“initialize”时出错。**

我对 Smooks 和 Groovy 很陌生，但这是我的代码的摘录，它在 1.4 版中运行。我的类路径中还有所有 1.5.1 类，包括我尝试加载的 1.5 EDI 定义。

```
Smooks smooks = null;
try { 
 smooks = new Smooks();
}
catch(Exception exception) { System.out.println("Error " + exception); }  
try { 

smooks.setReaderConfig(new UNEdifactReaderConfigurator("urn:org.milyn.edi.unedifact:d01b-mapping:*"));  

// Create an exec context - no profiles....

ExecutionContext executionContext = smooks.createExecutionContext();
DOMResult domResult = new DOMResult();

// Configure the execution context to generate a report...

executionContext.setEventListener(new HtmlReportGenerator("EDI/reports/report.html"));

smooks.filterSource(new StreamSource((InputStream) bufferedinputstream), domResult); 
```

**从 GroovyContentHandlerFactory 中提取**

```
@Initialize 
public void initialize() throws IOException { 
String templateText = StreamUtils.readStreamAsString(getClass().getResourceAsStream("ScriptedGroovy.ftl")); 
classTemplate = new FreeMarkerTemplate(templateText); 
```

任何帮助或想法将不胜感激，因为我花了几个小时试图弄清楚这一点。

干杯，马特

# c# - 如何获取 SQL CLR 程序集中发生的异常的堆栈跟踪

> ID：12153185
> 
> 赞同：3
> 
> 时间：2012-08-28T05:19:26.497
> 
> 标签：c#, .net, sql-server, sqlclr, clrstoredprocedure

我正在尝试使用 SQL CLR 程序集，但它会导致一些异常。但是，SQL Server Management Studio 只说：

```
Msg 10329, Level 16, State 49, Line 7
.Net Framework execution was aborted. 
The statement has been terminated. 
```

有没有办法获取堆栈跟踪？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T06:46:03.963

您将无法在 T-SQL 中检索 CLR 堆栈。您有两种途径可供选择：

1.  修改 CLR 代码，在 CLR 代码中添加 *块*`try ... catch ...`并将堆栈跟踪到 catch 块的输出，使用. 这将在您的 T-SQL 环境中将堆栈打印为信息消息，您可以在客户端中捕获它*[`SqlPipe.Send`](http://msdn.microsoft.com/en-us/library/ms127319.aspx)[`SqlConnection.InfoMessage`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.infomessage.aspx)*

**   将调试器附加到 SQL Server 并捕获*第一次机会*CLR 异常（即引发异常时）。这将允许您解决问题并修复它，但显然不是生产的解决方案。SQL Server 在调试器下停止时将*冻结*，因此请确保在受控环境中执行此操作。* 

 ** * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-28T05:47:24.677

直接从 SSMS 调用 CLR 应该返回异常和堆栈跟踪，但如果它是从存储过程中调用的，则不会返回错误消息。在这种情况下，您应该使用`TRY CATCH`来捕获异常。

```
BEGIN TRY
    EXEC myproc     
END TRY
BEGIN CATCH
    -- insert the error message into a log table here
    SELECT ERROR_MESSAGE(); 
END CATCH 
```*

# linux - Old style PCI probing

> ID：12153190
> 
> 赞同：1
> 
> 时间：2012-08-28T05:20:11.677
> 
> 标签：linux, driver, pci

Starting from Linux kernel 3.0, pci probing is automatic with: `pci_register_driver(&pci_driver);`

Linux kernel 2.6 and older, programmers had to create a character device, and walk through the PCI list, select appropriate PCI and doing work with it. Can you tell me how the steps of this procedure, why the initialization of a character device is need before working with the PCI driver and why it is unnecessary to register a character driver anymore.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T07:29:34.833

I think you refer to linux 2.4 or older. Current kernel device model with busses, devices and drivers has always been part of the 2.6 series.

What is your question exactly ?

A list of PCI devices is made at boot time. Then when a driver is registered, the `pci_driver` structure `id_table` field is used to match with the devices present on the bus. Then the pci_driver probe function is called with a pointer to the device structure that matched.

*   pci_driver is registered
*   for each device present on the bus, id element of the device(product id and vendor id) are compared to id element in the id_table provided by pci_driver
*   if there is a match, the pci_driver probe function is called, and in this probe function you can register a char device, or a block device etc ..

So it is not very different from 2.4, except all the probing, matching driver and devices, etc... is handled by the "device core" and not by the pci driver.

For a detailed explanation, see [this PDF](http://www.kernel.org/doc/ols/2002/ols2002-pages-368-375.pdf) and [this page](http://www.makelinux.net/ldd3/chp-14-sect-4)

# c# - 数据表到 SQL 表失去精度

> ID：12153193
> 
> 赞同：0
> 
> 时间：2012-08-28T05:20:34.647
> 
> 标签：c#, asp.net, excel

我有一个数据表，其值包含超过 12 个小数位（例如`451234.123456789012`），我从 Excel 工作表中获取。我正在使用用户定义的表将数据表中的值插入到 SQL 表中。

在我的存储过程中，我有一个声明，例如，

```
insert into tblMytable(fld1, fld2..)
Select fld1, fld2,.. from @MyUDT 
```

问题：

1.  假设所有 Excel 单元格类型都是“常规”，我在数据表中获得了完整的精度，但是当我将其插入到 SQL 表中时，我失去了除了 2 个精度之外的所有精度。

2.  假设所有 Excel 单元格类型都是“文本”，我得到的整个值只有 12 位，包括非十进制。小数部分。例如对于`451234.123456789012`，我正在进入`451234.12345`我的 C# 数据表。我在插入 SQL 表后得到的结果也是一样的。

在我的 UDT 中，字段定义为`varchar(20)`，我检查过`varchar(45)`但没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T10:54:12.137

我已经处理了这个问题，

由于我在读取与 C# 数据表一样通用的 excel 类型时获得了完整的精度，因此我通过将列类型单独更改为字符串来创建数据表克隆，这样我将获得所有字符串类型以及完整的值精度，然后我将数据表传递给 SQL 2008 表而不会丢失精度，现在它工作正常。

代码：

```
dt= ds.Tables[0].Clone();
for (ICol = 0; ICol < ds.Tables[0].Columns.Count; ICol++)
    dt.Columns[ICol].DataType = typeof(string);
    foreach (DataRow row in ds.Tables[0].Rows) 
    {
        dt.ImportRow(row); 
} 
```

# iphone - iOS 位置选择器

> ID：12153194
> 
> 赞同：0
> 
> 时间：2012-08-28T05:20:35.537
> 
> 标签：iphone, ios, xcode, ios4

![在此处输入图像描述](../Images/dd0eb7ea6fd410aadc1fcd7efd690288.png)我想要一个位置选择器，比如 appstore 上的 iPhone Flava 应用程序。事实上，它上面有一个图像，它的中心到 iPhone 屏幕的中心。用户滚动地图，每当按下添加位置按钮时，当前中心点将被添加为位置。见附图。谁能告诉我我怎么能得到这个？？？

提前谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T06:52:37.683

对于十字准线：在`MKMapView`.

对于中心，请参见`MKMapView`'s property [`centerCoordinate`](http://developer.apple.com/library/ios/DOCUMENTATION/MapKit/Reference/MKMapView_Class/MKMapView/MKMapView.html#//apple_ref/doc/uid/TP40008205-CH3-SW48)。

要从该坐标在地图上进行注释，请阅读 Apple 文档中的[注释地图](http://developer.apple.com/library/ios/DOCUMENTATION/MapKit/Reference/MKMapView_Class/MKMapView/MKMapView.html#//apple_ref/doc/uid/TP40008205-CH3-SW26)。

# iis-7.5 - 403 禁止所有 *.axd 文件 - 啊

> ID：12153195
> 
> 赞同：4
> 
> 时间：2012-08-28T05:20:38.433
> 
> 标签：iis-7.5, httphandler, webresource.axd

![令人沮丧的 .axd 资源被禁止](../Images/9c8014f807486e1ce687cc066e95305d.png)

我可以在我的开发机器上运行该应用程序。当我将它发布到我的生产机器时，它不起作用。表示禁止使用 .axd 文件。

有任何想法吗？我越来越沮丧！

编辑：

作为测试，我已更改为“storage=file;”。当我向服务器发送生成图表的请求时，图表实际上出现在我的文件夹中 - 它只是没有在请求中被发送回浏览器。

啊！到底是怎么回事！？！？！

添加了 web.config

```
<?xml version="1.0"?>
<configuration>
  <appSettings>
    <add key="ChartImageHandler" value="storage=memory;"/>
  </appSettings>
  <connectionStrings>
    <add name="VS265178_1ConnectionString" connectionString="Data Source="HIDDEN"/>
  </connectionStrings>

  <system.web>

    <httpHandlers>
      <add path="ChartImg.axd" verb="GET,HEAD,POST" type="System.Web.UI.DataVisualization.Charting.ChartHttpHandler, System.Web.DataVisualization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
        validate="false" />
    </httpHandlers>
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Web.DataVisualization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add assembly="System.ComponentModel.DataAnnotations, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add assembly="System.Data.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
        <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
      </assemblies>
    </compilation>

    <authentication mode="Forms">
      <forms loginUrl="Login.aspx" name=".CFCASPXFORMSAUTH" defaultUrl="Default.aspx"/>
    </authentication>
    <authorization>
      <deny users="?"/>
    </authorization>
    <machineKey validationKey="HIDDEN" decryptionKey="HIDDEN" validation="SHA1"/>
    <!-- Custom Membership Provider Configuration -->
    <membership defaultProvider="CFMembershipProvider" userIsOnlineTimeWindow="15">
      <providers>
        <clear/>
        <add name="CFMembershipProvider" passwordFormat="Clear" type="HIDDEN" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" writeExceptionsToEventLog="false"/>
      </providers>
    </membership>

    <profile defaultProvider="CFProfileProvider">
      <providers>
        <add name="CFProfileProvider" type="HIDDEN"/>
      </providers>
    </profile>
    <pages>
      <controls>
        <add tagPrefix="asp" namespace="System.Web.UI.DataVisualization.Charting" assembly="System.Web.DataVisualization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
      </controls>
    </pages>
  </system.web>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false"/>
    <handlers>
      <remove name="ChartImageHandler"/>
      <add name="ChartImageHandler" preCondition="integratedMode" verb="GET,HEAD" path="ChartImg.axd" type="System.Web.UI.DataVisualization.Charting.ChartHttpHandler, System.Web.DataVisualization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
    </handlers>
  </system.webServer>
</configuration> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-05T13:35:11.603

网站上的 URL 重写由所有子应用程序继承。一种解决方案是将其添加到您的应用程序 web.config 中：

```
<system.webServer>
  <rewrite>
    <rules>
      <!-- remove parent rewrite rules -->
      <clear/>
    </rules>
  </rewrite>        
</system.webServer> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-29T04:40:42.297

所以答案。

URL 重写是一个杀手。

我在我遇到问题的应用程序上方的 Web 应用程序上安装了 wordpress。wordpress 安装实际上是在进行重写，因为它不是文件或目录（wordpress 默认），它正在重写任何没有物理对应文件或文件夹的请求。

如果您遇到随机错误，并且您正在使用子应用程序 - 请查看 REWRITES！

# apache - Apache2 重写故障转移域

> ID：12153200
> 
> 赞同：0
> 
> 时间：2012-08-28T05:21:36.673
> 
> 标签：apache, mod-rewrite

我想知道 Apache2 重写模块是否支持两个 URL。

我的意思是当 RewriteRule 指向 www1.example.com 时，如果无法访问 www1.example.com，RewriteRule 将指向 www2.example.com。

那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T05:25:58.400

你会想把它们锁起来。将 301 重定向放在 ww1.test.com 的 404 响应中。

# python - 如何在pyQt4的不同线程中清除QTextEdit

> ID：12153203
> 
> 赞同：3
> 
> 时间：2012-08-28T05:21:41.537
> 
> 标签：python, multithreading, pyqt4

我在程序的“主”线程中创建了一个 QTextEdit 组件，然后我启动另一个线程，它将每 x 秒更新一次此 QTextEdit，但随后出现此错误：

```
QObject: Cannot create children for a parent that is in a different thread. 
```

这就是我这样做的方式：

```
def initGui():
   #some gui components
   global txt_list

   txt_list = QtGui.QTextEdit(w)
   txt_list.resize(580,400)
   txt_list.move(50, 50)
   txt_list.setReadOnly(1)
   txt_list.setFont(font_consolas)
   #more gui components

def update_list():
   t_monitor = threading.Thread(target=monitor_vector)
   t_monitor.daemon = True
   t_monitor.setName('monitor')
   t_monitor.start()

def monitor_vector():
   #retrieve info...
   lock = threading.Lock
   lock = True
   txt_list.clear() #clear list, to set the new one
   txt_list.setText('updated list')
   lock = False 
```

最后两行代码给了我上面提到的错误。有人可以告诉我如何处理这个问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T06:01:09.227

关于 Qt 的主要问题之一是您不能从除主 GUI 线程之外的任何线程调用任何 QWidget 方法。您的所有通信都必须通过从额外线程发出信号来完成，这些信号将转发到主 gui。

首先，我看到您使用的是全局变量，并且缺少`self`关键字，所以我假设您没有使用类。我的示例也将包含一个类示例。

这是一个简单的例子，就像你的一样，概述了你可能想要采取的方向：

```
from PyQt4 import QtGui, QtCore

class MyWidget(QtGui.QWidget):

    def __init__(self, parent=None):
        super(MyWidget, self).__init__(parent)

        ...
        self.txt_list = QtGui.QTextEdit(self)
        self.txt_list.resize(580,400)
        self.txt_list.move(50, 50)
        self.txt_list.setReadOnly(1)
        self.txt_list.setFont(font_consolas)
        ...
        self.monitor = Monitor()
        self.monitor.updateText.connect(self._handleTextUpdate)
        self.monitor.update_list()

    def _handleTextUpdate(self, txt):
        self.txt_list.clear()
        self.txt_list.setText(txt)

class Monitor(QtCore.QObject):

    updateText = QtCore.pyqtSignal(str)

    def update_list(self):
        t_monitor = Thread(self.monitor_vector, parent=self)
        t_monitor.daemon = True
        t_monitor.setName('monitor')
        t_monitor.start()

    def monitor_vector(self):
        ...
        self.updateText.emit('updated list')

class Thread(QtCore.QThread):

    def __init__(self, fn, args, kwargs, parent=None):
        super(Thread, self).__init__(parent)
        self._fn = fn 
        self._args = args 
        self._kwargs = kwargs 

    def run(self):
        self._fn(*self._args, **self._kwargs) 
```

需要注意的主要是线程中运行的函数正在发出信号。他们不了解其他类中的 QWidget。您的`MyWidget`课程将信号连接到可以更新 QLineEdit 的插槽。当线程发出信号时，它会被排入主线程并由接收槽执行。

我还创建了一个简单的 QThread 子类，它可以采用函数和参数，复制标准 lib Thread 类的工作方式。您应该坚持使用 QThread，因为它是 QObject 的子类，并且支持信号并且可以运行事件循环。

# hadoop - 如何与亚马逊弹性 mapreduce 共享 jar 库？

> ID：12153211
> 
> 赞同：1
> 
> 时间：2012-08-28T05:22:43.130
> 
> 标签：hadoop, amazon-ec2, elastic-map-reduce

为了加快 jar 到 s3 的上传速度，我想将所有常见的 jar 复制到普通 hadoop 中的“$HADOOP_HOME/lib”之类的东西。我是否可以在预装这些库的情况下创建自定义 EMR hadoop 实例。还是有更简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T22:04:15.967

您可以将此作为引导操作。就像放置一个脚本来复制到 S3 一样简单，然后如果您从命令行启动 EMR，请添加如下参数：

```
--bootstrap-action 's3://my-bucket/boostrap.sh' 
```

或者，如果您通过 Web 界面进行操作，只需在相应字段中输入位置即可。

# objective-c - 执行模态segue时SplitViewContoller为零？

> ID：12153219
> 
> 赞同：2
> 
> 时间：2012-08-28T05:23:23.440
> 
> 标签：objective-c, ios, storyboard, uisplitviewcontroller, segue

我有一个使用 SplitViewController 作为根视图的应用程序。但我想要一个登录视图，然后再转到主目录。我的解决方案是在登录视图中隐藏主视图。检查用户信息后，我执行模态搜索（我在 iOS 5.0 中使用情节提要）。我还将委托更新为详细视图，如下所示： [iOS - UISplitViewController with storyboard - multiple master views and multiple detail views](https://stackoverflow.com/questions/10538231/ios-uisplitviewcontroller-with-storyboard-multiple-master-views-and-multiple)：

但是在详细视图中， splitViewController 仍然是 nil ??? 我使用描述登录，发现prepareForSegue（在LoginView.m）中的splitViewController.delegate与ViewDidload（在DetailView.m）中的DetaiView描述相同。而且我还确定 splitViewController 在prepareForSegue 中不为零。那么，这有什么问题？？为什么 splitViewController 在 detailView 中为零？（我的 masterview 在 detailView 中也为零）。

请帮我解决这个问题，非常感谢

# python - 打开xml文件错误记录

> ID：12153221
> 
> 赞同：0
> 
> 时间：2012-08-28T05:23:26.000
> 
> 标签：python, logging, exception-handling

当我在命令行中运行我的 python 脚本时，我在尝试检索 xml 文件时收到错误输出。我想将此错误消息写入日志文件。

```
import logging
logger = logging.getLogger('fileChecker')
hdlr = logging.FileHandler('./fileChecker.log')
formatter = logging.Formatter('%(asctime)s %(levelname)s %(message)s')
hdlr.setFormatter(formatter)
logger.addHandler(hdlr)
logger.setLevel(logging.WARNING)

try:
    fileXML = mylibrary.getXML(enf, name)
    logger.info('got xml file ok')
except TypeError:
    errorCount += 1
    logger.error('we have a problem') 
```

mylibrary.getXML() 在这里抛出一个错误，我可以在命令行输出中看到。如何将其写入我的日志文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T05:32:15.013

您可以捕获引发的异常对象：

```
try:
    fileXML = myLibrary.getXML(enf, name)
    logger.info('got xml file ok')
except TypeError, e:
    errorCount += 1
    logger.error('We have a problem: ' + str(e)) 
```

请注意，如果您使用的是 Python`logging`模块，还有[Logger.exception](http://docs.python.org/library/logging.html#logging.Logger.exception)方法。

# uialertview - UIAlertView 按钮不起作用

> ID：12153222
> 
> 赞同：1
> 
> 时间：2012-08-28T05:23:29.180
> 
> 标签：uialertview, xcode4.4

我正在使用警报视图在未连接互联网时提醒用户。我在警报视图中有两个按钮，它们似乎都不起作用。我已经在 .h 文件中实现了。我使用 NSLog 检查单击时它是否响应。它在控制台中响应，但在按下按钮时什么也不做。这是我的代码片段。

```
- (IBAction)startButton:(id)sender 
   {
     if (![self connectedToNetwork])
     {
       UIAlertView *internetAlert = [[UIAlertView alloc] initWithTitle: @"Network Error!" message: @"You are not connected to the internet" delegate: self cancelButtonTitle: @"OK" otherButtonTitles: @"Open Settings", nil];
       [internetAlert show];
     }
   }

- (void)alertView: (UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex
  { 
     if (buttonIndex == 0)
     {
        NSLog(@"Ok clicked");
        HomeViewController *blah = [self.storyboard instantiateViewControllerWithIdentifier:@"HomeViewController"];
       [self.view addSubview: blah.view];
     }

     else if (buttonIndex == 1)
     {
        NSLog(@"Settings clicked");
        [[UIApplication sharedApplication] openURL: [NSURL URLWithString:@"prefs:root=WIFI"]];
     }
} 
```

我使用 [self.contentView addSubview: blah.view] 因为我没有导航控制器。关于我做错了什么的任何想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T05:31:46.670

在这里，您使用了错误的方法来单击 UIAlertView 按钮。您必须使用 UIAlertView 的另一种方法。

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex 
```

请更改为以下代码，它将起作用。

```
- (IBAction)startButton:(id)sender 
{
    if (![self connectedToNetwork])
    {
        UIAlertView *internetAlert = [[UIAlertView alloc] initWithTitle: @"Network Error!" message: @"You are not connected to the internet" delegate: self cancelButtonTitle: @"OK" otherButtonTitles: @"Open Settings", nil];
        [internetAlert show];
    }
}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{ 
    if (buttonIndex == 0)
    {
        NSLog(@"Ok clicked");
        HomeViewController *blah = [self.storyboard instantiateViewControllerWithIdentifier:@"HomeViewController"];
        [self.view addSubview: blah.view];
    }

    else if (buttonIndex == 1)
    {
        NSLog(@"Settings clicked");
        [[UIApplication sharedApplication] openURL: [NSURL URLWithString:@"prefs:root=WIFI"]];
    }
} 
```

如果您还有任何问题，请告诉我。

# iphone - animationDidStop 中键值的标识

> ID：12153223
> 
> 赞同：0
> 
> 时间：2012-08-28T05:23:32.180
> 
> 标签：iphone, ios, core-animation, subview, uiviewanimation

我有几个动画，我想在 animationDidStop 中获取 addAnimation 名称和 forKey 值的值。你们中的任何人都知道我怎样才能获得这些价值观？

```
 [subView.layer addAnimation:group forKey:@"flightAnimation"]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T06:30:31.100

您可以在 animationDidStop 事件中执行以下操作来检索动画对象的键并隐式检查非零：

```
if (yourAnimation == [[subView layer] animationForKey: @"flightAnimation"]) {...} 
```

但这只有在我认为，如果您`removedOnCompletion`将动画的属性明确设置为`NO`. 如果没有，您的动画将在完成之前被删除，并且回调将找不到它。

为什么要首先获取动画键名？你想用它做什么，键名不会因为某种原因在你脚下改变？

# php - 性能比较 mPDF 与 tcPDF

> ID：12153228
> 
> 赞同：4
> 
> 时间：2012-08-28T05:24:02.323
> 
> 标签：php, javascript, html, tcpdf, mpdf

我正在使用 mPDF 从 html 生成 PDF，因为我觉得它很容易使用，我从一位资深人士那里听说它比 tcPDF 慢。

但是在阅读了 mPDF 和 tcPDF 论坛/文档并从网络搜索之后，我得出结论，两者都使用相同的 fPDF，而 fPDF 在后端使用 PDFlib 库，而不是它们的性能有何不同。

如果有任何区别，任何人都可以清除它吗？

# android - 不使用异步任务上传图片

> ID：12153229
> 
> 赞同：0
> 
> 时间：2012-08-28T05:24:23.760
> 
> 标签：android, facebook, android-asynctask, android-service

我正在构建一个使用 facebook 将照片上传到用户墙上的应用程序。我已经使用在后台运行的 android 的 asynctask 完成了这项工作。

但是，当我们上传图片时，我不想像 instagram 一样使用 asynctask，它在后台运行，并且在上传图片之前不会阻止用户使用应用程序。

任何人对此有任何想法，我已经搜索了整个地方，但我可以得到一个。请帮助我克服这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T05:30:38.173

尝试使用[IntentService](http://developer.android.com/reference/android/app/IntentService.html)。我希望它会有所帮助。

# java - 幽灵4J。java.lang.UnsatisfiedLinkError：无法加载库“gsdll64”

> ID：12153235
> 
> 赞同：2
> 
> 时间：2012-08-28T05:25:18.933
> 
> 标签：java, ghostscript, jvm-arguments, unsatisfiedlinkerror

我使用 Maven 包含`Ghost4J 0.45`在我的项目中，并将 Ghostscript 安装到`C:\Program Files\gs\gs9.06`.

但我仍然得到一个错误 `java.lang.UnsatisfiedLinkError: Unable to load library 'gsdll64'`。

我添加到`PATH`位于“gsdll64.dll”（即`C:\Program Files\gs\gs9.06`）的环境变量目录中。还尝试使用`-Djava.library.path=/path/to/dir`.

但我总是得到`UnsatisfiedLinkError`（但是当我使用 JVM 参数启动时出现异常（Eclipse 找不到主类，但是当我启动我的应用程序时我手动将 Eclipse 指向主类））/`-Djava.library.path``ClassNotFound`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T05:56:22.947

如果你复制`gsdll64`到你的工作目录，它会起作用吗？:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T11:05:33.207

如果你想使用系统属性 `-Djna.library.path=/path/to/dir`，应该使用而不是 `-Djava.library.path=/path/to/dir`

# javascript - 根据选定的下拉列表值创建动态复选框

> ID：12153239
> 
> 赞同：0
> 
> 时间：2012-08-28T05:26:03.170
> 
> 标签：javascript, html, forms

我想根据下拉列表中的选定值文本创建一个动态复选框。

例如，下拉列表将具有：

( `test1`, `test2`, `test3`)

因此，如果我选择`test2`它将创建一个名为的复选框`test2`，因此将动态创建复选框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T06:17:14.803

HTML

```
<div id="selectContainer">
    Step 1: 
    <select id="testSelect" name="test">
        <option></option>
        <option value="test1">Test 1</option>
        <option value="test2">Test 2</option>
        <option value="test3">Test 3</option>
    </select>
</div>
<div id="checkboxContainer"></div>​ 
```

JS

```
function callback(event) {
    var input     = document.createElement('input'),
        container = document.getElementById('checkboxContainer');

    if (!this.value &&  !event.srcElement.value) {
        return false;
    }

    input.type = 'checkbox';
    input.name = this.value || event.srcElement.value;

    container.innerHTML = '';
    container.appendChild(input);
}

try {
    // W3C
    document.getElementById('testSelect').addEventListener('change', callback);
} catch (e) {
    // Microsoft
    document.getElementById('testSelect').attachEvent('onchange', callback);
} 
```

演示：http: [//jsfiddle.net/VGAMR/](http://jsfiddle.net/VGAMR/)

# continuous-integration - 如何在 Perforce 中实现持续集成？

> ID：12153241
> 
> 赞同：5
> 
> 时间：2012-08-28T05:26:15.703
> 
> 标签：continuous-integration, perforce

我们使用 Perforce 来管理我们的软件配置。

我的问题是如何在 Perforce 中实现持续集成？
是否有任何基于 Perforce 构建的工具来运行持续集成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T06:44:22.433

官方是[Electric Cloud](http://www.electric-cloud.com)，通过其[“持续交付”功能](http://www.electric-cloud.com/solutions/continuous-delivery.php)。请参阅[2012 年 5 月的新闻稿](http://www.electric-cloud.com/news/2012-0522.php)。

但是，工具本身只是该过程的一部分。另一个是如何使用 Perforce 访问代码：博客文章[“大规模自动化：敏捷、持续集成和 Perforce](http://www.electric-cloud.com/news/2012-0522.php) ”详细介绍了如何：

> 自动化，尤其是这种规模的自动化，给 SCM 服务器带来了巨大的负载。构建自动化可以占 Perforce 服务器负载的 50% 以上，这可能会开始影响最终用户体验

所以它坚持副本的存在，以减轻中央 Perforce 服务器的负担。

![改进的自动化复制支持](../Images/2b43177549ce82703480317b9537d5fb.png)

[您可以在文章“分隔式持续集成](http://www.perforce.com/user-conferences/2011/compartmentalized-continuous-integration)”中看到另一个使用 Perforce 的 CI 流程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T20:07:20.100

Perforce 在此处提供了其构建合作伙伴的完整列表（有*很多*）：

[http://www.perforce.com/product/components/integrations/build_tools](http://www.perforce.com/product/components/integrations/build_tools)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T05:38:31.803

[Jenkins](http://jenkins-ci.org/)是一个很棒且被广泛使用的持续集成工具。
有一个 perforce 插件（在许多其他有价值的插件中）。

# java - 如何检查字符串是否在某个范围内。（爪哇）

> ID：12153244
> 
> 赞同：6
> 
> 时间：2012-08-28T05:26:22.723
> 
> 标签：java, string

我需要检查给定的字符串是否在字符串范围之间。

我在一个文件中有两个字符串（stringA 和 stringB），我的程序将允许我输入一个名称并测试它是否适合 stringA 和 stringB 的范围。

例如，如果文件有 Adam 和 William，并且我测试了 John，它会返回 true，而不是 Zane，它落在外面并会返回 false。

我希望这是有道理的，并感谢您的帮助。

瑞安。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-28T05:28:06.583

您可以使用 String 类的`compareTo`方法来实现此功能，如下所示：

```
public boolean inRange(String lowerBound, String upperBound, String input) {
    // (First, be sure to check for null values)
    return input.compareToIgnoreCase(lowerBound) >= 0 && input.compareToIgnoreCase(upperBound) <= 0
} 
```

# ruby-on-rails - 我在哪里可以找到（并更改）“渲染'闪烁'”使用的标记？

> ID：12153246
> 
> 赞同：1
> 
> 时间：2012-08-28T05:26:31.397
> 
> 标签：ruby-on-rails, render, renderpartial

这是我第一个使用 Ruby on Rails 的项目，我正在编写前端代码；后端开发人员也是 Rails 的新手。一个模板包含代码`render 'flashes'`，当表单提交出错时触发该代码；但它生成的标记搞砸了，我想修复它。这是一个例子。`<!-- comments -->`是我的：

```
<div id="flash">
    <div class="wrapper">
      <div title="Error" class="error"></div>  <!-- Empty div -->
        <p>Please enter a valid email</p>      <!-- p element sibling of div.error -->
      </div>                                   <!-- Closes div.wrapper -->
    </div>                                     <!-- Closes div#flash -->
</div>                                         <!-- Extra /div closes parent div --> 
```

我更喜欢使用一个`div`作为消息，但最大的问题是末尾的额外结束`div`标记，它关闭了父分区，弄乱了布局。

我看到错误消息在控制器中定义为`flash[:error] = "Please enter a valid email"`，但我不知道 rails 从哪里得到这个虚假标记。`_flashes`我可以编辑部分内容来解决此问题吗？我仔细研究了项目的文件系统，我不清楚这个标记在哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T06:10:18.590

Rails 源代码中没有`_flashes.html.erb`文件。如果你看到

```
render 'flashes' 
```

在您的应用程序中，您或您运行的某些生成器将其放在那里。查看包含您在问题中提供的标记的`app/views/`被调用文件。`_flashes.html.erb`找到该文件后，您应该能够对其进行修改，但是您需要修复损坏的 HTML 问题。

如果您在那里找不到它，请查看您的宝石列表`Gemfile`，特别是与主题/模板相关的宝石列表。您可能已经包含了一个包含此模板文件的 gem *（尽管比存在于 中的文件可能性要小得多`app/views/`）*。

# opencv - 如何将 SSSE3 与 OpenCV 一起使用？

> ID：12153247
> 
> 赞同：0
> 
> 时间：2012-08-28T05:26:31.623
> 
> 标签：opencv

在freak_demo.cpp 中有这样的评论：

```
// MATCHER
// The standard Hamming distance can be used such as
// BruteForceMatcher<Hamming> matcher;
// or the proposed cascade of hamming distance using SSSE3 
```

但是如何使用SSSE3？最好此注释还包含示例代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T06:12:53.323

据我记得，在使用 CMake 生成 OpenCV 项目然后编译 OpenCV 时，您应该能够设置 SSE 支持。可能已经使用此设置编译了一些分发的 OpenCV 二进制版本。

这也很有帮助——OpenCV[安装指南](http://opencv.willowgarage.com/wiki/InstallGuide)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T13:06:21.160

据我所知（我自己并没有编写 FREAK 代码，但不得不经常与 fREAK 人一起工作）来自 OpenCV 的 BruteForceMatcher 类在最新版本中被更改或删除。无论如何，如果您使用最新的稳定版本（2.4.3）并且有一些错误请求来更新它，这部分代码会被破坏，但我不知道它是否在管道中。

# java - 与默认类加载器和 PlayFramework 自定义类加载器冲突

> ID：12153248
> 
> 赞同：0
> 
> 时间：2012-08-28T05:26:34.370
> 
> 标签：java, playframework, classloader, guice, playframework-1.x

我正在开发一个项目，我们将播放框架（play-1.2.5）与自定义的基于 Google GUICE 的应用程序模块一起使用。

我的代码中出现了当前异常：

```
play.exceptions.JavaExecutionException: loader constraint violation: when resolving method "mypackage.Runner.queueJob(Lmodels/Job;)V" the class loader (instance of play/classloading/ApplicationClassloader) of the current class, controllers/Jobs, and the class loader (instance of sun/misc/Launcher$AppClassLoader) for resolved class, mypackage/Runner, have different Class objects for the type models/Job used in the signature
    at play.mvc.ActionInvoker.invoke(ActionInvoker.java:237)
    at Invocation.HTTP Request(Play!)
Caused by: java.lang.LinkageError: loader constraint violation: when resolving method "mypackage.Runner.queueJob(Lmodels/Job;)V" the class loader (instance of play/classloading/ApplicationClassloader) of the current class, controllers/Job, and the class loader (instance of sun/misc/Launcher$AppClassLoader) for resolved class, mypackage/Runner, have different Class objects for the type models/Job used in the signature
    at controllers.Jobs.listJobs(Jobs.java:19)
    at play.mvc.ActionInvoker.invokeWithContinuation(ActionInvoker.java:557)
    at play.mvc.ActionInvoker.invoke(ActionInvoker.java:508)
    at play.mvc.ActionInvoker.invokeControllerMethod(ActionInvoker.java:484)
    at play.mvc.ActionInvoker.invokeControllerMethod(ActionInvoker.java:479)
    at play.mvc.ActionInvoker.invoke(ActionInvoker.java:161)
    ... 1 more 
```

根据我目前的分析，问题似乎与源文件夹结构以及应用程序的初始化方式有关。

我有以下结构：

project/app/{播放控制器和模型等} project/src/{我的项目特定类实现业务逻辑}

启动播放应用程序时，我还会在我的“src”文件夹中启动作业（从播放管理的应用程序类之外）。似乎发生的事情是这些作业访问的模型和其他类此时使用默认的类加载器加载，当我尝试从播放应用程序类（视图等）中使用这些时，我收到这个错误告诉我使用的类是使用不同的类加载器创建的，因此具有不同的签名。

因此，总而言之，默认类加载器和播放类加载器都加载相同的类，并且根据我调用它们的方式，我会收到不匹配的错误。

我已经能够通过简单地将所有源文件移动到项目/应用程序/源文件夹中来解决这个问题，但我想将 src 文件夹与播放应用程序文件夹分开。

1.  有人知道我的分析是否正确吗？
2.  如果 1\. 为“是”，有没有办法将播放配置为不仅从 app 文件夹加载类，还从我的 src 文件夹加载类？

任何输入表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T06:01:27.160

您可以尝试将您的“src”文件夹附加到 Play.javaPath 列表中，让 Play 编译和加载您的类。

# c# - 服务参考安全标头

> ID：12153250
> 
> 赞同：1
> 
> 时间：2012-08-28T05:26:42.893
> 
> 标签：c#, service, wcf-client

尝试使用服务引用时出现以下错误：

```
Urgent: wsdoallreceiver incoming message does not contain required security header 
```

我的配置文件有以下内容：

```
<configuration>
    <configSections>
    </configSections>
    <system.serviceModel>
        <bindings>                
            <basicHttpBinding>
                <binding name="ProjectServiceSOAP11Binding" closeTimeout="00:01:00"
                    openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                    allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                    maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                    messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
                    useDefaultWebProxy="true">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                    <security mode="None">
                        <transport clientCredentialType="None" proxyCredentialType="None"
                            realm="" />
                        <message clientCredentialType="UserName" algorithmSuite="Default" />
                    </security>
                </binding>
            </basicHttpBinding>
            <customBinding>
                <binding name="ProjectServiceSOAP12Binding">
                    <textMessageEncoding maxReadPoolSize="64" maxWritePoolSize="16"
                        messageVersion="Soap12" writeEncoding="utf-8">
                        <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                            maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                    </textMessageEncoding>
                    <httpTransport manualAddressing="false" maxBufferPoolSize="524288"
                        maxReceivedMessageSize="65536" allowCookies="false" authenticationScheme="Anonymous"
                        bypassProxyOnLocal="false" decompressionEnabled="true" hostNameComparisonMode="StrongWildcard"
                        keepAliveEnabled="true" maxBufferSize="65536" proxyAuthenticationScheme="Anonymous"
                        realm="" transferMode="Buffered" unsafeConnectionNtlmAuthentication="false"
                        useDefaultWebProxy="true" />
                </binding>
            </customBinding>
        </bindings>
        <client>
            <endpoint address="(address here)"
                binding="basicHttpBinding" bindingConfiguration="ProjectServiceSOAP11Binding"
                contract="ProjectService.ProjectServicePortType" name="ProjectServiceSOAP11port_http" />
            <endpoint address="(address here)"
                binding="customBinding" bindingConfiguration="ProjectServiceSOAP12Binding"
                contract="ProjectService.ProjectServicePortType" name="ProjectServiceSOAP12port_http" />
        </client>
    </system.serviceModel>
</configuration 
```

我正在尝试像这样进行身份验证：

```
 ProjectServicePortTypeClient myProjectClient = new ProjectServicePortTypeClient("ProjectServiceSOAP11Binding");
    myProjectClient.ClientCredentials.SupportInteractive = true;
    myProjectClient.ClientCredentials.UserName.UserName = myLogInEmail;
    myProjectClient.ClientCredentials.UserName.Password = myPassword; 
```

我犯了一个明显的错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T21:44:27.550

经过数小时的额外研究，我确定我可能需要这样做：http: [//msdn.microsoft.com/en-us/library/ms731075.aspx](http://msdn.microsoft.com/en-us/library/ms731075.aspx)

# r - 如何查看R中的最近邻居？

> ID：12153255
> 
> 赞同：15
> 
> 时间：2012-08-28T05:27:01.403
> 
> 标签：r, kaggle

首先让我说我一般没有 R、KNN 或数据科学方面的经验。我最近发现了[Kaggle](http://kaggle.com)，并且一直在玩[数字识别](http://www.kaggle.com/c/digit-recognizer)竞赛/教程。

在本教程中，他们提供了一些示例代码来帮助您开始基本提交：

```
# makes the KNN submission

library(FNN)

train <- read.csv("c:/Development/data/digits/train.csv", header=TRUE)
test <- read.csv("c:/Development/data/digits/test.csv", header=TRUE)

labels <- train[,1]
train <- train[,-1]

results <- (0:9)[knn(train, test, labels, k = 10, algorithm="cover_tree")]

write(results, file="knn_benchmark.csv", ncolumns=1) 
```

我的问题是：

1.  如何查看为特定测试行选择的最近邻居？
2.  如何修改为我选择的这十个中的哪一个`results`？

这些问题可能过于宽泛。如果是这样，我会欢迎任何可以为我指明正确道路的链接。

我**很**可能在这里说了一些没有意义的话。如果是这种情况，请纠正我。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-28T06:03:41.197

1）您可以获得给定行的最近邻居，如下所示：

```
k <- knn(train, test, labels, k = 10, algorithm="cover_tree")
indices <- attr(k, "nn.index") 
```

然后，如果您希望训练集中第 20 行的 10 个最近邻居的索引：

```
print(indices[20, ]) 
```

（您将获得 10 个最近的邻居，因为您选择了`k=10`）。例如，如果您只使用训练和测试集的前 1000 行（以使其在计算上更容易）：

```
train <- read.csv("train.csv", header=TRUE)[1:1000, ]
test <- read.csv("test.csv", header=TRUE)[1:1000, ]

labels <- train[,1]
train <- train[,-1]

k <- knn(train, test, labels, k = 10, algorithm="cover_tree")
indices = attr(k, "nn.index")

print(indices[20, ])
# output:
#  [1] 829 539 784 487 293 882 367 268 201 277 
```

这些是 1000 个训练集中最接近测试集第 20 行的索引。

2）这取决于你所说的“修改”是什么意思。对于初学者，您可以像这样获取每行最接近的 10 个标签中的每一个的索引：

```
closest.labels = apply(indices, 2, function(col) labels[col]) 
```

然后，您可以看到距离第 20 个训练点最近的 10 个点的标签，如下所示：

```
closest.labels[20, ]
# [1] 0 0 0 0 0 0 0 0 0 0 
```

这表明最接近第 20 行的所有 10 个点都在标记为 0 的组中。`knn`只需通过多数票选择标签（随机打破平局），但如果您愿意，可以选择某种加权方案。

ETA：如果您有兴趣在投票方案中更重地加权较近的元素，请注意，您还可以像这样获得到每个 k 个邻居的距离：

```
dists = attr(k, "nn.dist")
dists[20, ]
# output:
# [1] 1238.777 1243.581 1323.538 1398.060 1503.371 1529.660 1538.128 1609.730
# [9] 1630.910 1667.014 
```

# c#-4.0 - 如何在 Access 数据库的子查询中使用联合

> ID：12153257
> 
> 赞同：3
> 
> 时间：2012-08-28T05:27:09.567
> 
> 标签：c#-4.0, ms-access-2007

我正在开发带有 Access 数据库的 WinForms 应用程序。请纠正我。

```
Select * 
from EMP 
where Empid in 
    (Select id 
     from Test1 
     where pin=4 
     UNION 
     Select id 
     from Test2 
     where pin=4) 
```

当我尝试在 Access 数据库上执行此操作时，它给了我这个错误：

> 子查询中不允许操作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-27T23:43:23.980

您还可以使用两个标准 SQL where 条件，如下所示。我已经测试了这种方法，它似乎可以按预期工作

```
SELECT x, y, z
WHERE x NOT IN (SELECT x FROM b)
AND NOT IN (SELECT x FROM c) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T05:46:09.330

我尝试如下，它的工作。

```
Select * 
from EMP where Empid in (Select id from Test1  where pin=4 ) UNION 
Select * 
from EMP where Empid in(Select id  from Test2  where pin=4) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-02T09:17:17.137

真的很晚了，但这有效

```
Select * 
from EMP 
where Empid in 
    (SELECT id FROM ( 
    Select id from Test1  where pin=4 
    UNION  Select id from Test2 where pin=4 ) ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T05:34:15.590

像这样的东西怎么样

```
Select  e.* 
from    EMP e INNER JOIN
        (
            Select  id 
            from    Test1 
            where   pin=4 
            UNION   
            Select  id 
            from    Test2 
            where pin=4
        ) subSelect ON e.Empid = subSelect.id 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-14T11:03:07.830

据我所知，子查询中不允许联合操作，相反，您可以创建一个命名联合查询并包含在子查询表达式中

# java - 登录java应用程序

> ID：12153262
> 
> 赞同：0
> 
> 时间：2012-08-28T05:27:45.993
> 
> 标签：java, logging, hsqldb

我创建了一个单例记录器以在我的 java 应用程序中使用。连接到 hsql 独立数据库之前的所有语句都工作正常，即正在记录消息。但是连接到数据库之后的日志记录语句没有被记录。如果我删除了连接语句，或者如果与数据库的连接失败，则该连接语句之后的语句正常工作。

为什么会这样？？

```
ORLogger.getLogger().log(Level.INFO, "Trying to connect databse . . .");
        Class.forName("org.hsqldb.jdbc.JDBCDriver").newInstance();
        ORLogger.getLogger().log(Level.INFO, "HSQL driver loaded . . .");
        dbConnection = DriverManager.getConnection("jdbc:hsqldb:file:db/db", "username", "password");
        ORLogger.getLogger().log(Level.INFO, "Connected to databse."); 
```

在日志文件中，日志消息由以下语句组成

```
HSQL driver loaded . . . 
```

但是，在那之后，日志文件中没有添加任何日志消息。if 去掉连接语句，即

```
dbConnection = DriverManager.getConnection("jdbc:hsqldb:file:db/db", "username", "password"); 
```

上述连接语句之后的所有消息都运行良好。

与数据库的连接没有问题。所有与数据库相关的工作都很好。除了此日志记录无法正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:23:58.847

如果您使用 log4J 或 JDK 日志记录，HSQLDB 将更改设置，除非您有系统属性告诉它不要这样做。看这里：

[http://hsqldb.org/doc/2.0/guide/management-chapt.html#mtc_jdc_logging](http://hsqldb.org/doc/2.0/guide/management-chapt.html#mtc_jdc_logging)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T06:03:46.260

您是否使用调试器来检查调用是否`DriverManager.getConnection`实际返回？听起来它在尝试打开连接时卡住了，并且您不会看到记录下一行，因为程序被卡住等待打开连接。

检查您的连接字符串，首先尝试使用类似的`jdbc:hsqldb:mem:testdb`内容，如果可行，则可能是 hsqldb 无法打开您尝试用于数据库的文件。

# string - Bash 脚本参数，要求或填写特定字符

> ID：12153264
> 
> 赞同：0
> 
> 时间：2012-08-28T05:28:03.853
> 
> 标签：string, bash

我正在编写一个 bash 脚本，它将 .tgz 文件输出到特定目录，默认情况下是 /tmp/ 我想提供一个选项来覆盖这个目录，我选择使用命令行提供的参数来这样做

```
 while getopts d: option
    do
    case "${option}" in
    d) dir=${OPTARG};;
    esac
    done 
```

如所写，这是可行的，但我遇到了一个障碍，具体取决于用户输入我的 .tgz 文件的名称也是一个变量，我将这一切结合在一起的代码是

```
 output="$dir""$name" 
```

我遇到的问题是如果用户运行

```
 ./script -d /home/user 
```

我生成的路径和文件名最终为

```
 /home/userfilename.tgz 
```

如果用户没有，我需要强制执行尾随 / 或插入一个要求。虽然它有效，但如果我将输出变量更改为

```
 output="$dir"/"$name" 
```

如果用户确实提供了尾随 / 我最终会得到这样的结果，并且我正在努力保持我的输出美观。

```
 /home/user//filename.tgz 
```

任何投入将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T05:33:47.250

添加行

```
output="${output//\/\///}" 
```

加入后`dir`和`name`。

它看起来很复杂，但它的作用是将两个斜线替换为一个。

[您可以在这里](http://tldp.org/LDP/abs/html/refcards.html#AEN22587)找到更多信息。

# dictionary - 如何将简单的单词转换为 Sphinx4 WSJ，如 Dictionary Prounounciation？

> ID：12153267
> 
> 赞同：0
> 
> 时间：2012-08-28T05:28:52.673
> 
> 标签：dictionary, speech-recognition, cmusphinx, sphinx4

我刚刚完成了这个 Sphinx4 语音识别，我已经用 sphinx4 的 helloworld 演示实现了它，现在想要的是创建一个动态字典对于作为输入给出的文本文件，现在我需要做的就是创建一个文本文件并在 IMTOOLS 中上传，然后他们为我提供了一个 .Dict 文件。

但是我的要求就像用户在文本框中键入任何文本并单击转换按钮，然后它会自动将该单词转换为 WSJ Dcitionary，例如发音单词，\ EG 用户在文本框中键入他想要识别的单词让我们说它是“ ANKIT" 然后它会自动将该单词转换为 wsj 字典格式，如 "AE NG K AH T" 。请任何人都可以帮助我吗？或有任何建议吗？我想这样做...希望我以良好的方式解释，您可以以适当的方式理解并给我答复..”

如果有人通过付款提供此服务。那么即使它还可以...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-07T20:34:49.660

这是一个简单的网站，可让您创建 .dic 文件：[http](http://www.speech.cs.cmu.edu/tools/lmtool-new.html) ://www.speech.cs.cmu.edu/tools/lmtool-new.html 。只需上传一个 .txt 文件，其中包含您想要添加到字典中的内容。如果您有超过几千个句子，您可以多次执行此操作，然后将它们合并到一个文件中。

# excel - 如何通过在另一列中固定特定的对应参考值来打印列的输出值

> ID：12153269
> 
> 赞同：0
> 
> 时间：2012-08-28T05:29:04.253
> 
> 标签：excel, excel-2003, vba

```
 A       B       C

 x=value at C corresponding to A at 0.5

 0      5655     0
 0.25   6757     545
 0.5    7856     5776
 0.75   9866     5644 
```

请帮我在 B 列（比如 B2）的某处打印值（比如“x”）。它应该选择 C ​​列的值始终对应于 A 列的 0.5，并且 0.5 值将根据给定的输入步骤从一个位置波动到另一个位置。所以无论它是什么，最终输出必须始终是对应于 0.5 的值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T06:02:30.330

这样做：

```
Sub UseSelection()
    Dim r As Long

    r = ActiveSheet.UsedRange.Rows.Count
    Range("A1").Select
    Do Until Selection.Row > r
    If Selection.Value = 0.5 Then
        Range("B2") = Range("C" & Selection.Row).Value
    End If
    Selection.Offset(1, 0).Select
Loop

End Sub 
```

或使用 Vlookup：

```
Sub UseVlookup()
    Range("B2") = Application.WorksheetFunction.Vlookup(0.5, Range("A:C"), 3, False)
End Sub 
```

或者，

```
Sub Another()
    Range("B2") = "=VLOOKUP(0.5,A:C,3,FALSE)"
End Sub 
```

或者将公式放在单元格本身中（不灵活）

```
=VLOOKUP(0.5,A:C,3,FALSE) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T05:53:56.987

听起来您正在寻找[VLOOKUP](http://office.microsoft.com/en-us/excel-help/vlookup-HP005209335.aspx)公式。简而言之，它完全符合您的要求 - 匹配一列中的值并返回右侧列中的值。在这种情况下，假设您的公式在 cell 中`D2`，请尝试以下操作：

```
=VLOOKUP(0.5, A:C, 3, FALSE) 
```

这将在 A 列中查找值 0.5 并在 C 列中返回相应的值。请注意，如果有多个 0.5，它将返回第一个匹配项。

# fluent-nhibernate - Fluent nHibernate：为什么不在 Column() 中使用 lambda 表达式

> ID：12153270
> 
> 赞同：0
> 
> 时间：2012-08-28T05:29:10.780
> 
> 标签：fluent-nhibernate

如果我希望我的对象使用“foo_key”字段引用“foo”对象，我将其编码如下：

参考文献(x => x.foo) .Column("foo_key");

我的问题是我更喜欢 fluent 的编译时安全性，当我知道有一个同名的属性时，我讨厌看到硬编码的字符串“foo_key”。我想改用这个：

参考文献(x => x.foo) .Column(x=> x.foo.foo_key);

我在 Fluent nHibernate 中遗漏了什么吗？这应该是不可能的，并且是强烈希望的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T05:43:35.020

列不是属性，它是数据库中列的名称。它必须是一个字符串。

# python - Python 将“ó”存储为“Ã³”

> ID：12153271
> 
> 赞同：0
> 
> 时间：2012-08-28T05:29:11.717
> 
> 标签：python, mysql, encoding

我使用scrapy从一个网站上获取信息，根据w3验证器是utf-8 ..

我的python项目有

```
# -*- coding: utf-8 -*- 
```

我收到了一些像 López J 这样的名字，当我打印出来时，它显示得很好......

但是当我想将它存储到 mysql 中时，我收到一些关于 ascii 无法编码 blah blah blah 的错误......

如果我使用`.encode ('ascii', 'ignore')`我得到：`Lpez J` 如果我使用`.encode ('ascii', 'replace')`我得到：`LÃ³pez J` 如果我使用`.encode ('utf-8')`我得到：`LÃ³pez J`

我应该怎么办？我在这里遇到了大麻烦:'(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T05:40:17.643

当您连接到数据库时使用`charset='utf-8', use_unicode=True`与其他关键字来`connect()`方法。这应该使 dababase 接受并返回 unicode 值，因此您不必（也不应该）手动编码它们。

例子：

```
>>> import MySQLdb
>>> conn = MySQLdb.connect(... , use_unicode=True, charset='utf8')
>>> cur = conn.cursor()
>>> cur.execute('CREATE TABLE testing(x VARCHAR(20))')
0L
>>> cur.execute('INSERT INTO testing values(%s)', ('López J',))
1L
>>> cur.execute('SELECT * FROM testing')
1L
>>> print cur.fetchall()[0][0]
López J 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T05:32:50.973

检查您的[服务器、数据库、表、列](http://dev.mysql.com/doc/refman/5.0/en/charset-syntax.html)和[连接](http://dev.mysql.com/doc/refman/5.0/en/charset-connection.html)字符集。

作为快速测试，尝试执行

```
SET NAMES 'utf8'; 
```

连接后立即。

# iphone - 为 twitter 实现处理两个不同操作系统的不同情况

> ID：12153275
> 
> 赞同：0
> 
> 时间：2012-08-28T05:30:19.507
> 
> 标签：iphone, objective-c, twitter

我想为 iOS 5 和 iOS 6 实现连接到 twitter 功能。为这两种方式集成解决方案的最佳方法是什么？

请让我知道你的想法。

谢谢，
吉姆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T05:36:00.640

您可以使用以下方式获取 IOS 版本：

```
 [[UIDevice currentDevice] systemVersion] 
```

例如，像这样检查它是哪个 IOS 版本并根据您的要求使用：

```
 if([[[UIDevice currentDevice] systemVersion] isEqualToString:@"5.0"] || [[[UIDevice currentDevice] systemVersion] isEqualToString:@"5.1"])
 {
    //twitter functionality for iOS 5 
 }
 else if([[[UIDevice currentDevice] systemVersion] isEqualToString:@"6.0"])
 {
    //twitter functionality for iOS 6
 } 
```

# vb.net - VB.net 中 Windows 应用程序中的文本编辑器控件

> ID：12153279
> 
> 赞同：0
> 
> 时间：2012-08-28T05:30:56.253
> 
> 标签：vb.net, richtextbox, text-editor

我正在使用 Windows 应用程序进行开发。我有一个功能，用户可以在其中输入任何内容，然后编辑它们，如粗体、斜体、下划线、前景色、背景色、插入图像、编辑字体大小、更改字体类型等。它就像 MS Word。

目前我正在使用 RTF（富文本框）控件。但它使用起来很复杂。现在我想要其他方式来做到这一点。

任何人都可以建议我任何可以完全满足我的要求或任何其他方式的第三方控制吗？我已经准备好通过第三方控制，如 MS Word 功能。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T06:30:01.077

尝试从[http://www.devexpress.com](http://www.devexpress.com)或[http://www.telerik.com控制](http://www.telerik.com)

# javascript - javascript中不同父级下的新子窗口

> ID：12153282
> 
> 赞同：-2
> 
> 时间：2012-08-28T05:31:07.057
> 
> 标签：javascript, window.open

我有 2 个不同的应用程序服务器 URL。第一个应用程序的页面上有一个链接，单击此链接我必须在第二个应用程序下使用href链接（可能是window.open（））打开一个新窗口（不是同一父级的新选项卡或子窗口）。单击第一个 URL 页面上的链接时，父窗口应该是第二个 URL。它应该是一个弹出窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T05:36:31.713

[您可以通过将strWindowName 参数更改为 window.open()](https://developer.mozilla.org/en-US/docs/DOM/window.open)来控制是否创建新窗口

对于[锚点，您可以使用目标属性](https://developer.mozilla.org/en-US/docs/HTML/Element/a)并提供[浏览上下文名称](http://dev.w3.org/html5/markup/datatypes.html#common.data.browsing-context-name-or-keyword)

# macos - 如何在mac上安装weinre？

> ID：12153283
> 
> 赞同：0
> 
> 时间：2012-08-28T05:31:09.757
> 
> 标签：macos, remote-debugging, weinre

我想调试将在移动设备或模拟器（如 iOS 模拟器）上运行的移动 Web 应用程序。在谷歌上搜索很多时，我遇到了 Weinre，但不知道如何在我的 macbook 上安装。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T05:31:09.757

[我能够按照页面http://blog.joelambert.co.uk/2012/05/17/installing-weinre-on-mac-os-x/](http://blog.joelambert.co.uk/2012/05/17/installing-weinre-on-mac-os-x/)上的说明轻松安装 weinre 。

安装后，我执行`weinre`了启动服务器的命令`http://localhost:8080`。我在桌面浏览器上输入了相同的内容，这给了我进一步的说明。它要求我将脚本标签（类似于 ）复制粘贴到我尝试远程调试`<script src="http://localhost:8080/target/target-script-min.js#anonymous"></script>`的页面（ ）中。`http://myMobApp.local`我这样做并在我的 iOS 模拟器上打开了移动应用程序页面。在模拟器中加载后，我打开`http://localhost:8080/client/#anonymous`说明页面上显示的调试客户端用户界面链接（类似于 ）。它给了我一个漂亮的界面来调试在模拟器上运行的 web 应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-13T12:33:54.320

简短的更新：虽然 Goje87 的回答非常准确，但我想指出，从 iOS 6 开始，Apple 已经增强了 Safari 的网络检查器，以便能够检查在 iOS 设备上的应用程序中运行的 HTML 页面。

与 Weinre 相比的优势在于您甚至可以调试 JS 脚本（断点、监视等）。

这是有关使这项工作的指南：http: [//moduscreate.com/enable-remote-web-inspector-in-ios-6/](http://moduscreate.com/enable-remote-web-inspector-in-ios-6/)

**编辑：**你需要一台 Mac。

# python - 在 Windows 7 上升级权限后，Esky 冻结

> ID：12153285
> 
> 赞同：5
> 
> 时间：2012-08-28T05:31:12.977
> 
> 标签：python, windows

我们即将开始使用[Esky](https://github.com/cloudmatrix/esky)将更新部署到我们的应用程序。在 Windows 7 上，Esky 似乎无法获得安装更新所需的升级权限。

我已将其范围缩小到这个简单的脚本。它要求升级权限，但会冻结，或与下面的堆栈跟踪崩溃。

## 脚本

```
import esky
import esky.sudo

class MyProgram(object):

    @esky.sudo.allow_from_sudo()
    def do_stuff(self):
        pass

app = MyProgram()

sapp = esky.sudo.SudoProxy(app)

sapp.start()
sapp.do_stuff()
sapp.drop_root() 
```

## 堆栈跟踪

```
$ python test.py
Traceback (most recent call last):
  File "test.py", line 16, in <module>
    sapp.start()
  File "c:\Python27\lib\site-packages\esky\sudo\__init__.py", line 125, in start
    raise RuntimeError("sudo helper process terminated unexpectedly")
RuntimeError: sudo helper process terminated unexpectedly

$ python test.py
Traceback (most recent call last):
  File "test.py", line 16, in <module>
    sapp.start()
  File "c:\Python27\lib\site-packages\esky\sudo\__init__.py", line 140, in start
    self.close()
  File "c:\Python27\lib\site-packages\esky\sudo\__init__.py", line 156, in close
    self.pipe.read()
  File "c:\Python27\lib\site-packages\esky\sudo\sudo_base.py", line 123, in read
    raise EOFError
EOFError 
```

有谁知道解决方案，或者有什么建议？

使用：

*   蟒蛇2.7.3
*   esky 0.9.7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-18T18:10:56.437

3年了，没有答案，很伤心:(

这是 esky 中的一个错误。

除了升级权限失败之外，Esky 对我来说很好用。

我习惯于在 python3 中编程......所以一旦我完成更新 Esky 以兼容 python 2 和 3，我将解决这个问题。

如果有人想解决这个问题，让我们摇滚吧！到 github 问题跟踪器！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-05-21T12:37:45.367

这是超级晚了，但是如果将来有人遇到这个问题，请尝试运行`sudo python your_program.py`。

# numpy - 加载 np 数组非常慢

> ID：12153291
> 
> 赞同：1
> 
> 时间：2012-08-28T05:32:23.787
> 
> 标签：numpy, python-2.7

python新手（非常酷），第一个问题。我正在读取一个 50+ mb 的 ascii 文件，扫描属性标签并将数据解析为一个 numpy 数组。我在整个循环中放置了计时报告，并找到了罪魁祸首，即使用 np.append() 的 while 循环。想知道有没有更快的方法。

这是一个带有用于调试的假数据的示例输入文件格式：

...标签参数字符名称“Poro”数组浮点数据100
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 38,8071 72 73 74 75 76 77 78 79 80 86 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 尾标 ...

这是代码片段，其中 350k 元素数组的 while 循环需要 70 秒：

```
def readParameter(self, parameterName):
    startTime = time.time()
    intervalTime = time.time()
    token = "tag parameter"
    self.inputBuffer.seek(0)
    for lineno, line in enumerate(self.inputBuffer, 1):
        if token in line:
            line = self.inputBuffer.next().replace('"', '').split()
            elapsedTime = time.time() - intervalTime
            logging.debug("    Time to readParameter find token: " + str(elapsedTime))
            intervalTime = time.time()
            if line[2] == parameterName:
                line = self.inputBuffer.next()
                line = self.inputBuffer.next()
                np.parameterArray = np.fromstring(line, dtype=float, sep=" ")
                line = self.inputBuffer.next()

                **while not "endtag" in line:
                    np.parameterArray = np.append(np.parameterArray, np.fromstring(line, dtype=float, sep=" "))
                    line = self.inputBuffer.next()**

                elapsedTime = time.time() - startTime
                logging.debug("    Time to readParameter load array: " + str(elapsedTime))
                break
    elapsedTime = time.time() - startTime
    logging.debug("    Time to readParameter: " + str(elapsedTime))
    logging.debug(np.parameterArray)
    np.parameterArray = self.make3D(np.parameterArray)
    return np.parameterArray 
```

谢谢，杰夫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T05:54:33.603

追加到数组需要调整数组的大小，这通常需要分配一个足够大的新内存块来容纳新数组，将现有数组复制到新位置，并释放它曾经使用的内存。所有这些操作都很昂贵，而且您正在为每个元素执行这些操作。使用 350k 个元素，它基本上是垃圾收集器内存碎片压力测试。

预先分配您的数组。你有 count 参数，所以创建一个大小的数组，在你的循环中，只需将新解析的元素分配给数组中的下一个位置，而不是附加它。您必须保留自己的计数器来计算已填充的元素数量。（您可以改为遍历空白数组的元素并替换它们，但这会使添加错误处理有点棘手。）

# django - 如何使用 timefield__week_day__lt？

> ID：12153295
> 
> 赞同：0
> 
> 时间：2012-08-28T05:32:34.637
> 
> 标签：django, filter, django-queryset

我需要使用以下句子：

```
qs = FamilyActivity.objects.all()
qs = qs.filter(Q(end_time__week_day__lt = F('start_time__week_day')) or Q(F('end_time')-        F('start_time')>=timedelta(days=5)) or Q(end_time__week_time__gte=6)) 
```

但我做不到。我想寻找包括周末活动在内的未来。不能`__week_day__lt`用吗？

我的模型.py：

```
class FamilyActivity(models.Model):                
    org = models.ForeignKey(Org)
    name = models.CharField(verbose_name=_('name'), max_length=200)
    start_time = models.DateTimeField(verbose_name=_('start_time'))
    end_time = models.DateTimeField(verbose_name=_('end_time'))
    cost = models.CharField(verbose_name=_('cost'), max_length=4000) 
```

我的意见.py：

```
def search_fa_Map(request, cat=''):
    qs = FamilyActivity.objects.all()
    if cat != '':
        cat_ids = cat.split("-")
        try :
            if(len(cat_ids) >= 6):
                fa_district_id = int(cat_ids[0])
                fa_time_id = int(cat_ids[1])                
                fa_type_id = int(cat_ids[2])
                fa_age_id = int(cat_ids[3])
                fa_cost_id = int(cat_ids[4])
                fa_state_id = int(cat_ids[5])
                fa_block_id = 0
                if(len(cat_ids) >= 7):
                    fa_block_id = int(cat_ids[6])
                if fa_time_id != 0:
                    now = datetime.datetime.now()
                    oneday = datetime.timedelta(days=1)

                    if fa_time_id == 45:#today
                        qs = qs.filter(Q(start_time__lte=now,end_time__gte=now))
                    elif fa_time_id == 46:#weekend
                        qs = qs.filter(Q(end_time__week_day__lt = F('start_time__week_day')) or Q(F('end_time')-F('start_time')>=timedelta(days=5)) or Q(end_time__week_time__gte=6)) 
```

我只想下面这句话可以工作。

```
qs = qs.filter(Q(end_time__week_day__lt = F('start_time__week_day')) or Q(F('end_time')-F('start_time')>=timedelta(days=5)) or Q(end_time__week_time__gte=6)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:25:15.383

`or` is the wrong operator. You want `|`.

# asp.net - 在 ASP.NET 中以增量方式获取和绑定数据

> ID：12153296
> 
> 赞同：1
> 
> 时间：2012-08-28T05:32:38.050
> 
> 标签：asp.net, data-binding, asynchronous, fetch

在我的 ASP.NET 应用程序的一个页面中，我需要从具有大量数据的表中查询数据。我想异步获取数据并将其增量绑定到我的页面。

有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T15:30:53.247

我使用了类似于增量页面显示模式的东西，但使用 SignalR 来实现它。因为，SignalR 的调用是异步的，我认为它适合我的场景。

# android - 在应用计费实现中，从免费版本购买付费应用

> ID：12153297
> 
> 赞同：1
> 
> 时间：2012-08-28T05:32:40.830
> 
> 标签：android, in-app-purchase

我在单一发布者帐户中有付费版和免费版应用程序。现在我已经在免费版本中实现了应用内计费实现我已经添加了应用内产品并在应用程序代码中完成了实现。但我想要的是用户应该能够使用应用内计费购买从免费版应用程序购买付费应用程序。我不知道如何在应用产品中添加付费应用，一旦用户购买付费版本，付费应用就会被下载。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T05:59:37.873

您不能添加任何其他应用程序，例如“应用内购买”。在您的情况下，有两种可能性：

1.  [将用户重定向](https://stackoverflow.com/questions/1964819/start-android-market-from-app)到市场。在这种情况下，您必须在应用程序之间提供共享数据（例如游戏进度或其他东西，这是在免费版本中完成的）

2.  您可以在“免费”版本中提供所有可能性，并将其锁定，而用户不购买“解锁完整版”购买。

更多信息可以在[这里](https://stackoverflow.com/questions/11170466/in-app-purchases-to-unlock-paid-functions)找到。

# php - 使用 concat 的 pdo 更新语句不起作用

> ID：12153302
> 
> 赞同：1
> 
> 时间：2012-08-28T05:33:14.587
> 
> 标签：php, mysql, pdo

我还是 PDO 的新手，无法让下面的更新语句正常工作。我希望能够通过用逗号和新名称附加到当前值来更新名称字段。生成的名称字段应该像 james、doug、paul 等。这可能是一个简单的答案，但我无法通过大量谷歌搜索找到解决方案！

提前致谢

```
 $stmt = $db->prepare('UPDATE table SET name = concat(name, ',' :name) WHERE id = :id');
    $stmt->execute( array('name' => $name, 'id' => $id) ); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T05:36:19.757

您的连接中缺少逗号。

```
 $stmt = $db->prepare("UPDATE table SET name = concat(name, ',', :name) WHERE id = :id");
                      ^                                        ^ here                 ^ 
```

# mysql - 如何在 MySQL 中创建唯一的组合约束/索引？（不是排列）

> ID：12153304
> 
> 赞同：0
> 
> 时间：2012-08-28T05:33:35.640
> 
> 标签：mysql, indexing, constraints, combinations

如何在 MySQL 中创建唯一的组合约束/索引？我不是指置换。顺序无关紧要。

例如：我有两个用户，我想用一个链接表进行匹配。该表只有两列，它们都是外键，对应于用户表上的主键。

如何创建一个索引以确保该对在任一顺序中都保持唯一？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T05:36:56.723

据我了解你的问题。您想添加合并两列的唯一约束。所以试试

```
ALTER TABLE `tableName` ADD UNIQUE (
`first_column` ,
`second_column`
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T20:07:50.797

在您的应用程序中强制 col1 < col2 - 这提供了一致的顺序并确保只会生成单个链接行。这与您的先决条件（“以任一顺序”）不符，但听起来它应该适合您的情况。在项目需求更改为非对称用户关系（例如 Twitter）之前，我遇到过类似的问题。

# javascript - Dojo 1.1：离开/切换标签时的事件？

> ID：12153310
> 
> 赞同：0
> 
> 时间：2012-08-28T05:34:04.450
> 
> 标签：javascript, dojo

我们必须使用旧的 Dojo 版本 1.1.x，我们的问题是找到一个在选项卡更改时触发的事件（用户离开选项卡）。

场景：Tab 里面有一个 Form，数据被编辑，tab 没有保存，现在我们正在寻找一种方法来防止这种情况。

```
 dojo.connect(this.myTabPoint, "onShow", function(evt){
        alert('X');
    }); 
```

工作正常，但是我们必须在每个其他选项卡上实施检查 (;

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T07:54:14.847

`_hideChild(/*Widget*/ page)`在 Dojo 1.1.2中有一个方法`dijit.layout.StackContainer`（即 的超类），如果存在`dijit.layout.TabContainer`，它将调用`onHide`页面/选项卡（例如）的方法。`ContentPane`

问题是 中没有`onHide`方法`dijit.layout.ContentPane`，因此您应该`onHide`在代码早期的某处将存根方法添加到 ContentPane：

```
dojo.extend(dijit.layout.ContentPane, {
    onHide: function() {
        // stub method
    }
}); 
```

然后，您需要做的就是`dojo.connect`在`onHide`特定选项卡/ContentPane 上执行方法：

```
dojo.connect(dijit.byId("tab1"), "onHide", function() {
    console.log("tab1 is hidden now");
}); 
```

# android - 如何使用monkeyrunner寻找视频android ics

> ID：12153314
> 
> 赞同：1
> 
> 时间：2012-08-28T05:34:36.200
> 
> 标签：android, testing, android-4.0-ice-cream-sandwich, monkeyrunner

我正在`(.mp4 file)`通过桌面版本附带`monkeyrunner`的组件播放视频。`gallery3d/MovieActivity``android ics-x86`

我想*使用*. `monkeyrunner`有什么办法吗？如果是，如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T07:36:11.867

您可以尝试使用关键事件向前和向后搜索：

```
device.press('KEYCODE_MEDIA_FAST_FORWARD', MonkeyDevice.DOWN)
device.press('KEYCODE_MEDIA_REWIND', MonkeyDevice.DOWN) 
```

# iphone - 是否可以在所有 iPad 版本中运行 App？

> ID：12153319
> 
> 赞同：0
> 
> 时间：2012-08-28T05:35:22.637
> 
> 标签：iphone, ios, ipad

我正在为 iPhone 和 iPad 开发应用程序，并且我使用 iOS 5.1 的部署目标构建应用程序，现在我很困惑该应用程序是否将在所有版本的 iPad 中运行。抱歉这个新手问题，因为我是开发新手。请帮助我提供有价值的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T05:38:02.903

如果您的应用程序在 iOS 5.1 上运行，它将在任何运行 iOS 5.1 的设备上运行，无论是 iPad 还是 iPhone。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T05:38:26.290

使用 iOS 5.1 目标，是的。（它将在所有具有 iOS 5.1*或更高版本*的 iPad 上运行）。

但请注意，第一代 iPad 将不再支持 iOS 6，并且第一代 iPad 的内存比后来的型号少很多，如果您的应用程序“重”，您可能需要考虑到这一点.

# javascript - 离线保存包含 javascript 的网页

> ID：12153322
> 
> 赞同：0
> 
> 时间：2012-08-28T05:35:31.040
> 
> 标签：javascript, html, css

[http://www.arabicreader.net](http://www.arabicreader.net) 我想用文件夹/ja​​vascript 离线保存上面的网页。我尝试使用“另存为”、httrack 和 firefox 插件，但是某些链接（如“读取”）不起作用。我正在尝试离线添加和使用该网站并一次在线更新。希望找到任何可行的解决方案，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T05:55:26.470

你需要有一个`developer tool`，然后你就可以保存每一页。

```
Chome -> Chrome Developer tool -> Resources
Firefox -> Firebug 
```

希望这可以帮助。

# mysql - mysql中一个事件触发了多少次

> ID：12153338
> 
> 赞同：0
> 
> 时间：2012-08-28T05:37:35.213
> 
> 标签：mysql

我在 MYSQL 中创建了一个带有计划日期的事件。例如，事件在当前月份的第一个日期触发。

我正在使用以下查询来选择当前月份的第一个日期

```
select CAST(DATE_FORMAT(NOW(),'%Y-%m-01') as DATE) 
```

我的疑问是该事件在该日期触发了多少次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:53:01.893

您可以使用分析您的查询[`EXPLAIN`](http://dev.mysql.com/doc/refman/5.0/en/explain.html)

```
"EXPLAIN SELECT CAST(DATE_FORMAT(NOW(),'%Y-%m-01') as DATE)"; 
```

## 选择：

如果你想找到当月的第一天，那么你可以创建一个自定义函数

```
DELIMITER ;;
CREATE FUNCTION FIRST_DAY(day DATE)
RETURNS DATE DETERMINISTIC
BEGIN
  RETURN ADDDATE(LAST_DAY(SUBDATE(day, INTERVAL 1 MONTH)), 1);
END;;
DELIMITER ;
That way: 
```

[**参考**](https://stackoverflow.com/questions/3298288/how-to-get-first-day-of-every-corresponding-month-in-mysql)

然后打电话

```
SELECT FIRST_DAY(DATE(NOW())); 
```

# javascript - 同时删除数组中的两个元素

> ID：12153339
> 
> 赞同：0
> 
> 时间：2012-08-28T05:37:41.050
> 
> 标签：javascript, arrays, multidimensional-array

所以我正在用 JavaScript 设计一个游戏，我在删除与我的碰撞检测功能相关的东西的方式上遇到了一些麻烦。它是小行星，因此一些物体被相应地命名。

我的碰撞检测功能旨在检查玩家与小行星之间是否存在碰撞，或者子弹与小行星之间是否存在碰撞。在子弹和小行星的情况下，人们会期望子弹和小行星都会消失。

然而，考虑到我如何检查碰撞，移除子弹和它所碰撞的小行星似乎是一个挑战。这是我的相关代码：

```
for (var i=0;i<$_.mapObjs.length;i++) { //get one object to check
    var superBox = $_.mapObjs[i].hitBox; //get it's properties
    var objectName = $_.mapObjs[i].name;
    var isAsteroid =(objectName.indexOf("asteroid") == -1)?false:true; //is the object an asteroid?
    for (var y=0;y<$_.mapObjs.length;y++) { //get the object to check it against
        if (objectName !== $_.mapObjs[y].name) { //if we are not checking the object against its self
            var subName = $_.mapObjs[y].name;
            var subIsAsteroid = (subName.indexOf("asteroid") == -1)?false:true; //is the second object an asteroid?
            if (!(isAsteroid) || !(subIsAsteroid)) { //if we are not checking two asteroids against each other
                var subBox = $_.mapObjs[y].hitBox;
                var collision = rectIntersectsRect(superBox,subBox); //check for a collision using rectIntersectsRect
                if (collision) { //if there is a collision
                    if ((objectName == "player" && subIsAsteroid) || (isAsteroid && subName == "player")) { //if either of the objects are the player, then the player dies
                        if (!player.invincible)
                            player.death(); 
                    } else if ((objectName == "blankObject" && subIsAsteroid) || (isAsteroid && subName == "blankObject")) { //if either of the objects are a bullet, then we destroy the asteroid
                        Console.log(i + "," + y); //this is the problem area
                        Console.log("getting rid of " + objects[i].name + " and " + objects[y].name);
                        if (subIsAsteroid) { //splice the asteroid out of the second array
                            objects.splice(y,1);
                        } else { //splice the asteroid out of the first array
                            objects.splice(i,1);
                        }
                    }
                }
            }
        }
    }
} 
```

现在，因为我需要小行星和子弹在它们碰撞时消失，所以我改变了

```
if (subIsAsteroid) {
    objects.splice(y,1);
} else {
    objects.splice(i,1);
} 
```

至

```
objects.splice(y,1);
objects.splice(i,1); 
```

但是，每当发生碰撞时，该函数会从数组中随机删除两个对象，即使两者的位置都指向子弹和小行星对象`y`。`i`我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T05:59:44.017

`.splice()`不只是删除随机元素，而且在`.splice(y,1)`操作删除一个元素之后，所有元素的索引`y`将比之前少一个 - 所有这些后面的元素都“向上移动”。因此，如果`i`大于`y`它将不再引用您想要的元素。

如果您首先删除具有更高索引的任何元素，则应该没问题：

```
objects.splice(Math.max(y,i), 1);
objects.splice(Math.min(y,i), 1); 
```

话虽如此，我无法从您的代码中看出和之间的关系`$_.mapObjs`是什么，`objects`但我认为这可能会导致问题。`$_.mapObjs`您已经使用`y`和作为循环索引迭代了嵌套循环，`i`但随后您`objects`根据. 这两个数组是否具有相同顺序的相同元素？**这可以解释您的“随机”元素删除。**你应该拼接出来吗？如果是这样，您需要在删除之后进行调整，以免在下一次循环迭代时跳过元素。`y``i``$_.mapObjs`**`$_.mapObjs``y``i`**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T05:41:31.217

这可能是因为当您拼接第一个索引时，您的数组发生了变化。这意味着第二个索引可能正确也可能不正确；因为元素的索引已经改变。我建议你做这样的事情：

```
objects[y] = null;
objects[i] = null;

while( (remIndex = objects.indexOf(null)) !== -1 ){
    objects.splice(remIndex, 1);
} 
```

[演示](http://jsfiddle.net/daSyq/1)**

# c# - 如何将十六进制字符串转换为单精度浮点数

> ID：12153340
> 
> 赞同：2
> 
> 时间：2012-08-28T05:37:41.330
> 
> 标签：c#, .net, string, floating-point, hex

我有一个字符串类型的 4 字节十六进制代码，我需要将其转换为浮点数，符合 IEEE 754 [Single-Precision floating-point format](http://en.wikipedia.org/wiki/Single-precision_floating-point_format)。

我认为 Java 有一个库可以轻松做到这一点，但我不确定 C# 是否有一个。解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T05:54:11.340

因为听起来你是从一个十六进制字符串开始的：

```
string hex = "0a0b0c0d";
byte[] raw = new byte[hex.Length / 2];
for (int i = 0; i < raw.Length; i++)
{
    // THEN DEPENDING ON ENDIANNESS
    raw[i] = Convert.ToByte(hex.Substring(i * 2, 2), 16);
    // OR
    raw[raw.Length - i - 1] = Convert.ToByte(hex.Substring(i * 2, 2), 16);
}
float f = BitConverter.ToSingle(raw, 0); 
```

如果您实际上是从 a 开始`byte[]`，那么您可以跳过前几个步骤。

# c - linux上PPC64下一个进程可以拥有多少内存

> ID：12153345
> 
> 赞同：0
> 
> 时间：2012-08-28T05:37:58.707
> 
> 标签：c, linux, memory, linux-kernel, powerpc

我看了一个 linux 的测试用例。它测试`mmap`如下：

```
#define HIGH_ADDR       (void *)(0x1000000000000)
addr = mmap(HIGH_ADDR, map_sz, PROT_READ,
                MAP_SHARED | MAP_FIXED, fildes, 0); 
```

在**PPC64**下的这种情况下，**预期结果**是得到一个 errno `ENOMEM`。
但是**PPC64**下的**实际结果**是得到一个 errno 。 无论如何，它在**X86_64 arch**上运行良好。我想也许 PPC64 没有分配足够的内存。因此，我尝试将's 定义修改为： 但它仍然得到. 我只是想知道，PPC64 的 linux 如何管理他的内存。我的意思是，我想知道用户空间程序的内存地理。或者我应该使用什么 MAX 地址。**`Invalid argument`
**`HIGH_ADDR`
`#define HIGH_ADDR (void *)(0x7FFFFFFFFFF)`
`Invalid argument`**** 

 ***** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T05:47:25.670

来自`man 2 mmap`：

```
       EINVAL 我们不喜欢 addr、length 或 offset（例如，它们太大，
              或未在页面边界上对齐）。

       EINVAL（自 Linux 2.6.12 起）长度为 0。

       EINVAL 标志既不包含 MAP_PRIVATE 或 MAP_SHARED，也不包含
              这两个值。

```

因此，如果太大`mmap`，则会发出错误信号。因此，这是预期的行为。`EINVAL``addr`

**建议：**不要使用`MAP_FIXED`，除非你有很好的理由。

**脚注：**并非所有 64 位架构都支持 64 位地址。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T05:51:58.780

像这样使用`MAP_FIXED`是无效的。即使它有效，它也可能会映射到您不想破坏的东西之上，例如加载的共享库或动态链接器。唯一安全的使用方法`MAP_FIXED`是映射已经分配给程序的地址范围的顶部（例如，通过事先调用`mmap`without `MAP_FIXED`）。****

# encryption - 我应该使用哪种数据加密技术？

> ID：12153352
> 
> 赞同：0
> 
> 时间：2012-08-28T05:38:28.677
> 
> 标签：encryption, md5, sha

我是数据加密的新手。我研究了数据加密，主要发现了 md5 和 SHA 算法。您认为哪种技术最适合数据存储/安全性，为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T05:47:43.400

MD5 和 SHA 是散列函数，它们从一堆数据中创建指纹 - 固定长度表示。例如，它们被广泛用作检查许多开源产品的 iso 映像下载的一致性的一种方式，但这意味着您可以使用它们从任何字节选择中创建指纹。所以他们不加密。

如果要加密，则应检查加密算法。我认为现在最可行的是 AES（高级加密标准），如果您寻找对称加密算法（例如，加密和解密的密钥相同或容易从另一个计算）或 RSA，如果您寻找非对称（您有2个密钥-公钥和私钥，从公钥计算私钥是一项艰巨的任务）。

如果您要创建数字签名，您可能需要检查诸如 DSA（数字签名算法）和 ECDSA（椭圆曲线上的 DSA）之类的内容。请注意，非对称算法适用于具有扩展精度的数字 - 例如 512、1024、2048 位等。您需要可以处理此类数字的特殊库。如果你使用 C++，我可以推荐你尝试 Crypto++。查找其他语言的类似内容。

我希望这对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T06:01:42.127

如果您的数据是密码，并且您想将其存储在某个位置，则使用`MD5`或`SHA`散列。这些有两个好处。

1.  哈希无法解密以恢复旧值，因此即使您向某人提供密码的 MD5/SHA 哈希，您的密码也永远不会被破解 :)
2.  特定字符串的哈希值始终相同，因此您可以根据哈希值比较密码。

AES：

1.  对称算法这么快
2.  与 PKCS5Padding 和 CBC 模式一起使用
3.  始终存储 IV
4.  对称，因此您在解密加密文本时需要相同的密钥，因此您根本无法共享密钥。

RSA

1.  用于交换密钥的 PKI 基础设施
2.  慢的

还有其他算法，例如 DES（不那么安全）、3DES（通常称为三重 DES - 与 DES 相比不够安全）

# qt - 我在 QPushButton 后面得到一个矩形

> ID：12153354
> 
> 赞同：1
> 
> 时间：2012-08-28T05:38:54.943
> 
> 标签：qt, qpushbutton

我是 QT 的新手。我使用以下代码将按钮添加到 QGraphicScene

```
QGraphicsScene* scene = new QGraphicsScene;

QPushButton *btnuser = new QPushButton();

btnuser->resize(32, 32);
btnuser->setGeometry(QRect(QPoint(50, 50),QSize(32, 32)));

btnuser->setText("1");
btnuser->setAccessibleName("1");
connect(btnuser, SIGNAL( clicked() ), this, SLOT( on_btnProcess_clicked() ) );

scene->addWidget(btnuser); 
```

但是在输出中，按钮后面有一个矩形。我怎样才能删除它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T00:45:29.270

我通过设置最小宽度和高度解决了这个问题。

```
QPushButton *btnuser = new QPushButton();
btnuser->setMinimumHeight(20);
btnuser->setMinimumWidth(20); 
```

然后我在 setGeometry 方法中为按钮设置相同的宽度和高度

```
btnuser->setGeometry(QRect(QPoint(pointx,pointy),QSize(20, 20))); 
```

# javascript - 如何注册 document.onkeypress 事件

> ID：12153357
> 
> 赞同：43
> 
> 时间：2012-08-28T05:39:18.593
> 
> 标签：javascript, events, cross-browser

我想使用 javascript 为文档注册按键事件。

我用过：

```
document.attachEvent("onkeydown", my_onkeydown_handler); 
```

它适用于 IE，但不适用于 Firefox 和 Chrome。

我也试过：

```
document.addEventListener("onkeydown", my_onkeydown_handler, true); 
// (with false value also) 
```

但它仍然不适用于 Firefox 和 Chrome。

有没有解决方案，我错过了什么？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-08-28T05:45:59.967

您正在寻找：

**编辑：**

Javascript：

```
document.addEventListener("keydown", keyDownTextField, false);

function keyDownTextField(e) {
var keyCode = e.keyCode;
  if(keyCode==13) {
  alert("You hit the enter key.");
  } else {
  alert("Oh no you didn't.");
  }
} 
```

演示： [JSFIDDLE](http://jsfiddle.net/9ZDxw/1/)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-28T05:42:12.730

您可能正在寻找：

```
document.body.addEventListener('keydown', function (e) {
    alert('hello world');
});​​​​​​​ 
```

但是几乎可以肯定的是，使用现有的库来抽象出许多浏览器的问题是值得的。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-08-28T05:45:40.867

请通过以下链接了解详细说明。

[https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener?redirectlocale=en-US&redirectslug=DOM%3Aelement.addEventListener](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener?redirectlocale=en-US&redirectslug=DOM%3Aelement.addEventListener)

[http://www.reloco.com.ar/mozilla/compat.html](http://www.reloco.com.ar/mozilla/compat.html)

简而言之，将处理程序写为

```
function myFunction(e)
{
    ///For IE
    if(!e)
        e=window.event;

    // use e as event in rest of code.
} 
```

# android - Google Weather API 不工作，发送奇怪的响应

> ID：12153359
> 
> 赞同：1
> 
> 时间：2012-08-28T05:39:30.127
> 
> 标签：android, google-weather-api

我有时会使用 Google Weather API，但从昨天开始，我收到了奇怪的消息`"Unsupported API"`。
我在谷歌上搜索过，但没有找到任何官方声明。
有没有人遇到同样的问题或我一个人的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T05:44:18.360

Google 计划完全关闭 iGoogle，并在准备这样做时关闭 iGoogle 使用的天气 API。

事实上，iGoogle 已经转而使用 wunderground.com 的 api，直到该服务在 2013 年完全退役。

您可以从此[状态板](http://status-dashboard.com/32226/47728)看到 API 已停止响应 27 日的请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T06:53:51.100

是的 wunderground.com 是一个很好的天气 api 站点。您可以使用 wunderground.com 提供的 API 之一是[http://api.wunderground.com/api/431c96428597b3ce/conditions/autocomplete/forecast/q/India/Bangalore.json](http://api.wunderground.com/api/431c96428597b3ce/conditions/autocomplete/forecast/q/India/Bangalore.json)

# iphone - 向 mpmovieplayerviewcontroller 添加计时器

> ID：12153360
> 
> 赞同：0
> 
> 时间：2012-08-28T05:39:37.870
> 
> 标签：iphone, objective-c

我`MPMoviePlayerViewController`用于播放声音和视频。我正在从 url 流式传输歌曲。它工作正常。但问题是，`MPMoviePlayerViewController`没有显示我播放的歌曲的时间进度。该栏已禁用。如何使时间进度条处于活动状态？我有以下代码来播放这首歌。

```
 mediaPlayerController = [[MPMoviePlayerViewController alloc] initWithContentURL:songUrl];
    [self presentModalViewController:mediaPlayerController animated:YES];
    [[mediaPlayerController moviePlayer] play]; 
```

![在此处输入图像描述](../Images/d6a17be2f0192623991ee15be8a13882.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T05:51:23.870

如果您想以您自己的自定义方式显示当前进度时间，您可以使用协议`currentPlaybackTime`中的属性来显示它`MPMediaPlayback`为您提供该信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T06:10:50.137

你使用 AVPlayer 播放直播。参考[这个](https://stackoverflow.com/questions/6431517/http-live-streaming-with-avplayer-in-ios-4-0)链接。

另请参阅Apple 的[StitchedStreamPlayer](http://developer.apple.com/library/ios/#samplecode/StitchedStreamPlayer/Introduction/Intro.html)链接示例代码。

* * *

为 mediaPlayerController 设置 controlStyle：

```
 [mediaPlayerController moviePlayer].controlStyle = MPMovieControlStyleFullscreen 
```

# asp.net - 部署时 WebMethod 不工作

> ID：12153365
> 
> 赞同：0
> 
> 时间：2012-08-28T05:40:28.380
> 
> 标签：asp.net, jquery-ui-autocomplete, webmethod

我有一个 jQuery UI 自动完成小部件，它通过调用 WebMethod 填充了对象列表。

我正在使用 C#、.NET 4.0。

这*“在我的机器上工作”*（在这里插入嘲笑的鼻息），但是当部署到服务器时，由于 WebMethod 失败，自动完成不会填充。我可以在 IE DevTools 的控制台窗口中看到以下错误：

```
Sys.Net.WebServiceFailedException: The server method 'SearchEmployees' failed with the following error: -- There was an error processing the request. 
```

这是 Firebug 对 WebMethod 的 POST 响应中的错误：

```
A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. 
```

我的页面上有一个 ScriptManager，EnablePageMethods="true"

我的方法是公开的并且具有`[ScriptMethod()]`and`[WebMethod]`属性。

检查了在 WebMethod 中调用的数据库的权限（有点争议，因为它甚至还没有进入数据库调用）。

检查我有`using System.Web.Services;`和`using System.Web.Script.Services;`

检查 IIS 中给定 AppPool 的目标框架。

我的 javascript/jQuery:

```
PageMethods.SearchEmployees(function (results) {
    $("#txtMessageFor").autocomplete({
        source: results,
        delay: 0,
        autoFocus: true,
        select: function (event, ui) {
            $('#hfEmployeeEmail').val(ui.item.Email);
        }
    });
}); 
```

我在 CodeBehind 中的 WebMethod：

```
[ScriptMethod()]
[WebMethod]
public static List<Employee> SearchEmployees()
{
    try
    {
        using (SqlConnection conn = new SqlConnection())
        {
            conn.ConnectionString = ConfigurationManager.ConnectionStrings["ConnStr"].ConnectionString;
            using (SqlCommand cmd = new SqlCommand())
            {
                cmd.CommandText = "SELECT Name, Email FROM TableName";
                cmd.Connection = conn;
                conn.Open();
                List<Employee> contacts = new List<Employee>();
                using (SqlDataReader sdr = cmd.ExecuteReader())
                {
                    while (sdr.Read())
                    {
                        Employee employee = new Employee();
                        employee.label = sdr["Name"].ToString();
                        employee.value = sdr["Name"].ToString();
                        employee.Name = sdr["Name"].ToString();
                        employee.Email = sdr["Email"].ToString();
                        contacts.Add(employee);
                    }
                }
                conn.Close();
                return contacts;
            }
        }
    }
    catch (Exception ex)
    {
        throw new Exception(ex.Message);
    }
} 
```

web.config 中的连接字符串

```
<connectionStrings>
    <add name="ConnStr" connectionString="Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\FakeDBName.mdf;Integrated Security=True;User Instance=True" providerName="System.Data.SqlClient" /> 
</connectionStrings> 
```

那么，任何人都可以帮助解决为什么 WebMethod 在部署时无法工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T06:08:36.323

在 Firefox 中使用 fiddler 或 Firebug 来检查发送到 web 服务的请求的状态，这两个工具可以给你一个更好的主意。我建议首先尝试使用 firebug 作为提琴手，你必须进行安装。

我想给您的另一个建议是，`List<Employee>`您必须返回以下内容，而不是返回：

```
public class ReturnEmployee
{
    public List<Employee> Employees {get; set;}

    public string ErrorMessage {get; set;}
} 
```

这种方法对问题识别有很大帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T06:49:41.147

正如我之前提到的，它可能是一个 SQL 异常，既然你发现了它，这里有一些要检查的内容：

> “ 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。找不到服务器或无法访问服务器。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。”

这是一个简短的提示：

[你需要检查的7件事](http://www.sswug.org/articlesection/default.aspx?TargetID=44331)

但是最好看看消息末尾的代码是什么。

# matlab - 套接字编程可以在matlab中完成

> ID：12153368
> 
> 赞同：-2
> 
> 时间：2012-08-28T05:41:12.853
> 
> 标签：matlab

我们可以在 MATLAb 中进行套接字编程吗，还有什么知道在 GUI 中使用列表框的代码，当我们编写用于将数据或值从列表框传输到编辑框的代码时，由于按下按钮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T05:48:03.850

是的，你可以。

您可以使用 MPI 风格的编程在两个 MATLAB 进程之间发送数据。您可以使用如下函数

```
 labSend and labReceive 
```

发送和接收数据。

还检查这个因为你需要这个[并行计算工具箱](http://www.mathworks.in/products/parallel-computing/)和[MATLAB 分布式计算服务器](http://www.mathworks.in/products/distriben/)

更多细节到 [这里](https://stackoverflow.com/questions/3164348/socket-programming-in-matlab)

# android - 带加载的圆形进度条.... Android 中的文本

> ID：12153374
> 
> 赞同：0
> 
> 时间：2012-08-28T05:42:04.790
> 
> 标签：android, android-layout, android-progressbar

我想在我的应用程序中使用`progress bar with rounded circle`and 和`loading....`文本。我已经搜索了更多。但仍然没有得到明确的想法。

**默认栏：**

![在此处输入图像描述](../Images/7d70052df948fa769c20b0e8dd21d011.png)

**预期酒吧：**

![在此处输入图像描述](../Images/6ce7fa9a8ab4863957513892cb410d93.png)

注意：我只想在 webview 的 xml 文件中执行此操作。有人可以帮我吗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T06:01:37.917

*您应该编写自定义[webview 客户端](http://developer.android.com/reference/android/webkit/WebViewClient.html)，您可以在其中实现逻辑以在页面加载时显示自定义对话框并在页面完成时隐藏。*

看看[Android WebView 和 Indeterminant Progress 解决方案](http://www.chrisdanielson.com/2010/05/04/android-webview-and-the-indeterminant-progress-solution/)

```
I want to do this only in xml file for webview. Could anybody please help me 
```

这是什么意思？是否要更改进度条的 UI？

*如果是，请查看我的博客[自定义圆形进度条](http://pankajchunchun.wordpress.com/2011/09/10/customization-of-spinner-progress/)，它可以帮助您更改 UI。*

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-28T05:59:03.257

试试下面的代码：

布局：main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<WebView
    android:id="@+id/webView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" />

<LinearLayout
    android:id="@+id/llProgress"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:gravity="center"
    android:orientation="horizontal" 
    android:visibility="gone" >

    <ProgressBar
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <TextView
        android:id="@+id/tvMessage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_margin="5dp" />
</LinearLayout>

</FrameLayout> 
```

代码：MainActivity.java

```
public class MainActivity extends Activity {

private LinearLayout llProgress;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    llProgress = (LinearLayout) findViewById(R.id.llProgress);
    showProgress("Loading...");
}

private void showProgress(String message) {
    ((TextView) llProgress.findViewById(R.id.tvMessage)).setText(message);
    llProgress.setVisibility(View.VISIBLE);

}

private void hideProgress() {
    ((TextView) llProgress.findViewById(R.id.tvMessage)).setText("");
    llProgress.setVisibility(View.GONE);
}

} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-28T05:56:30.700

**`MyProgressDialog.class`**:- 调用时将返回循环对话框的类。

```
import android.app.Dialog;
import android.content.Context;
import android.view.ViewGroup.LayoutParams;
import android.widget.ProgressBar;

public class MyProgressDialog extends Dialog {
public static MyProgressDialog show(Context context, CharSequence title,
        CharSequence message) {
    return show(context, title, message, false);
}

public static MyProgressDialog show(Context context, CharSequence title,
        CharSequence message, boolean indeterminate) {
    return show(context, title, message, indeterminate, false, null);
}

public static MyProgressDialog show(Context context, CharSequence title,
        CharSequence message, boolean indeterminate, boolean cancelable) {
    return show(context, title, message, indeterminate, cancelable, null);
}

public static MyProgressDialog show(Context context, CharSequence title,
        CharSequence message, boolean indeterminate,
        boolean cancelable, OnCancelListener cancelListener) {
    MyProgressDialog dialog = new MyProgressDialog(context);
    dialog.setTitle(title);
    dialog.setCancelable(cancelable);
    dialog.setOnCancelListener(cancelListener);
    /* The next line will add the ProgressBar to the dialog. */
    dialog.addContentView(new ProgressBar(context), new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    dialog.show();

    return dialog;
}

public MyProgressDialog(Context context) {
    super(context, R.style.NewDialog);
}
} 
```

**NewDialog 的**Style 应该放在**`String.xml`**

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<!--=====This is the Style for the progressBar====================  -->
  <style name="NewDialog">
    <item name="android:windowFrame">@null</item>
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:windowIsFloating">true</item>
    <item name="android:windowContentOverlay">@null</item>
    <item name="android:windowTitleStyle">@null</item>
    <item name="android:windowAnimationStyle">@android:style/Animation.Dialog</item>
    <item name="android:windowSoftInputMode">stateUnspecified|adjustPan</item>
    <item name="android:backgroundDimEnabled">false</item>
    <item name="android:background">@android:color/transparent</item>
  </style>
<!--============================================== -->
</resource> 
```

## 现在，如何称呼这个**`ProgressDialog`**？是这样的：-

```
Dialog pd;   // Declare it on the Top of the Activity using it to make it Global.  

//Start of Dialog
pd=MyProgressDialog.show(ActivityName.this, "Loading", "");     

// To Stop the Dialog
pd.dismiss(); 
```

# php - DOMElement 类的错误对象无法转换为字符串

> ID：12153378
> 
> 赞同：1
> 
> 时间：2012-08-28T05:42:47.617
> 
> 标签：php, xml

我正在用 to item、一个英语单词和一个希伯来语单词向 xml 文件写入一条新记录。

但是该行
`$newWord->appendChild($prop.$new_line);`
导致此错误 **“DOMElement 类的对象无法转换为字符串”**

参数**$new_line**等于`$new_line = "\n";`。

我在这里想念什么？

我的代码是：

```
<?php

  /*$wordH=$_GET['varHeb'];
  $wordE=$_GET['varEng'];*/
    $wordH="newhebWord";
    $wordE="newengWord";
  $new_line =  "\n";

$doc='';

        if(!$doc)
        {
            $doc = new DOMDocument();
            // we want a nice output
            $doc->formatOutput = true;
            $doc->load('Dictionary_user.xml');
        }
        $Dictionary_user = $doc->documentElement;

        $newWord = $doc->createElement('newWord');

        $prop = $doc->createElement('Heb', $wordH);
        $newWord->appendChild($prop.$new_line);
        $prop = $doc->createElement('Eng',$wordE);
        $newWord->appendChild($prop.$new_line);

        $Dictionary_user->childNodes->item(0)->parentNode->insertBefore($newWord,$Dictionary_user->childNodes->item(0));
        header("Content-type: text/xml");

        $doc->save("Dictionary_user.xml");
    echo $doc->saveXML();

    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T05:45:05.193

您不需要附加换行符，您处理的是真实的数据结构（A [DOMDocument](http://php.net/manual/en/class.domdocument.php)）而不是字符串。

# string - 通过文本实现 MS Access 组合框选择

> ID：12153382
> 
> 赞同：1
> 
> 时间：2012-08-28T05:43:10.550
> 
> 标签：string, ms-access, select, combobox, row

我只想根据字符串值而不是索引位置在组合框中选择一行。

我有一个包含 3 列的组合框，第一列是 ID 字段，另外两个分别是名字和姓氏。

当盒子准备好时，我已经准备好 ID 字段值，但不知道如何选择它而不进行一次检查每个值的愚蠢循环。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T10:14:56.657

对于绑定和未绑定的组合框，您可以将值设置为与绑定列匹配的任何值，并且将显示相应的行。

```
 Row source : SELECT ID, Surname FROM Table
 Bound Column : 1
 Column count : 2
 Column Widths : 0,2 
```

要设置组合：

```
 Me.MyCombo = 21 
```

ID 为 21 的记录中的姓氏将显示在组合中。

要以编程方式将组合设置为其中一列，您可以使用 DlookUp 进行基于表的组合：

```
Me.MyCombo = DLookup("ID", "Table", "Surname='" & MyString & "'") 
```

# php - php 爆炸 vs 列

> ID：12153384
> 
> 赞同：0
> 
> 时间：2012-08-28T05:43:32.760
> 
> 标签：php, mysql, database, explode, cells

好的，这可能是一个核心问题？我只是想知道数据库中的爆炸与列是否存在“收支平衡”点。

例如：

爆炸 100 次或从 100 列中获取“更好/更快”的数据？

真实世界的示例是 last_name,first_name 与 2 列的单个列。（我想人们还必须考虑是否需要更改这些数据。）

我的理解是，explode 使用客户端资源，而从数据库中提取数据使用服务器端。

只是想知道是否有“经验法则”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T05:49:27.937

在适用的情况下，您应该始终将数据拆分为单独的列。

不是因为性能，而是因为数据库规范化的规则。

[http://en.wikipedia.org/wiki/Database_normalization](http://en.wikipedia.org/wiki/Database_normalization)

性能方面，它是主观的。这取决于您对数据的处理方式，以及您提供给我们的有限信息我们无法猜测的许多其他因素。但我的预感是列会更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T05:49:54.897

从科学上讲，一个会比另一个快。但实际上，我不确定有什么区别。还要记住，PHP 是一种服务器端技术，因此您所要求的都不是在客户端完成的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T05:51:57.253

记住**规范化的经验法则**：

> 切勿将逗号分隔值（多个值）放在单个列中。

并且为了基于客户端/服务器的性能。

**PHP**也使用客户端资源

# sql - 如何对同一张表中三个不同查询的结果求和

> ID：12153385
> 
> 赞同：2
> 
> 时间：2012-08-28T05:43:32.523
> 
> 标签：sql, sum, hp-quality-center

我正在尝试对同一张表上以下三个查询的结果求和以生成一份报告。

```
SELECT b.BG_SEVERITY as Severity, count (b.BG_BUG_ID) as Total
FROM BUG b where
 b.BG_USER_12='QA3'
 group by b.BG_SEVERITY

SELECT s.BG_SEVERITY as Severity, count (s.BG_BUG_ID) as Total
FROM BUG s where
 s.BG_USER_12='QA1'
 group by s.BG_SEVERITY

SELECT a.BG_SEVERITY as Severity, count (a.BG_BUG_ID) as Total
FROM BUG a where
 a.BG_USER_12='QA2'
 group by a.BG_SEVERITY 
```

每个查询的结果如下所示：

```
Severity   Total
1-Critical  4
2-High      94
3-Medium    23
4-Low       45 
```

我正在寻找合并/总结上述三个查询中的“总计”列。我可以使用 SQL 的哪些功能来执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T05:48:20.583

如果使用 sql-server，您可以尝试使用 union。像这样的东西：

```
SELECT
    Severity,
    SUM(Total)
FROM
    (
    SELECT b.BG_SEVERITY as Severity, count (b.BG_BUG_ID) as Total FROM BUG b where b.BG_USER_12='QA3' group by b.BG_SEVERITY
    UNION ALL
    SELECT s.BG_SEVERITY as Severity, count (s.BG_BUG_ID) as Total FROM BUG s where s.BG_USER_12='QA1' group by s.BG_SEVERITY    
    UNION ALL 
    SELECT a.BG_SEVERITY as Severity, count (a.BG_BUG_ID) as Total FROM BUG a where a.BG_USER_12='QA2' group by a.BG_SEVERITY
    ) tbl
GROUP BY
    Severity 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T05:48:54.687

你可以`IN`在你的条件下使用。

```
SELECT   b.BG_SEVERITY as Severity, 
         COUNT(b.BG_BUG_ID) as Total
FROM     BUG b 
WHERE    b.BG_USER_12 IN ('QA3','QA1','QA2')
GROUP BY b.BG_SEVERITY 
```

# sql - 在多列和多个 LIKE 上进行全文搜索的正确语法

> ID：12153387
> 
> 赞同：0
> 
> 时间：2012-08-28T05:43:37.177
> 
> 标签：sql, full-text-search

我正在尝试正确执行此查询

```
foreach(explode(" ", trim($words) ) as $word) $where[] = "LIKE '%$word%'";
$wheresql = implode(" OR ", $where);
$q  = "SELECT item_id, name, price, details, img FROM items WHERE (details $wheresql) OR (name $wheresql) OR (description $wheresql)";
$rows = $this->dba->rawSelect($q); 
```

**查询现在看起来像这样**

```
SELECT item_id, name, price, details, img 
FROM items 
WHERE (details LIKE '%someword%' OR LIKE '%someword%') 
   OR (name LIKE '%someword%' OR LIKE '%someword%') 
   OR (description LIKE '%someword%' OR LIKE '%someword%') 
```

我不确定是否必须为每个指定列`LIKE`或执行其他操作

谢谢，理查德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T05:49:47.430

我认为您必须为每个 LIKE 指定列。顺便说一句，为什么不尝试运行 sql 呢？它会告诉你一切。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T06:56:35.943

```
foreach(explode(" ", trim($words) ) as $word) $where[] = "LIKE '%$word%'";
$q = "SELECT item_id, name, price, details, img FROM items WHERE (details ".implode(" OR  details ",$where).") OR (name ".implode(" OR names ",$where).") OR (description ".implode(" OR description ",$where).")";
$rows = $this->dba->rawSelect($q); 
```

# c++ - 如何在计算机上找到 MSWord 的版本？

> ID：12153389
> 
> 赞同：1
> 
> 时间：2012-08-28T05:43:56.267
> 
> 标签：c++, windows, visual-c++, ms-word

有人可以帮忙吗，拜托。如何查看计算机上安装的 msword 版本？如果它的版本很少，请找出默认打开“.doc”的版本。有人可以为此任务建议一些 C++ 函数或算法吗？抱歉英语不好:(谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T16:02:59.747

当有可用的 API 时，请不要在注册表中翻找。使用适当的 API 将有助于确保您的测试适用于所有版本的 Windows 和 Word。

要找出注册了哪个可执行文件来处理某种文件类型（如 .doc），请使用[AssocQueryString](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773471%28v=vs.85%29.aspx)。获得可执行文件的路径后，您可以使用[GetFileVersionInfo](http://msdn.microsoft.com/en-us/library/windows/desktop/ms647003%28v=vs.85%29.aspx)和[VerQueryValue](http://msdn.microsoft.com/en-us/library/windows/desktop/ms647464%28v=vs.85%29.aspx)检查其版本号。

如果您只想找出安装了哪些版本（无论哪个应用程序与 .doc 关联），您可能可以查询 Windows Installer。查看[MsiEnumProductsEx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370102%28v=vs.85%29.aspx)和[MsiGetProductInfo](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370130%28v=vs.85%29.aspx)。

可能还有一种方法可以使用 WMI 查询这些东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T14:16:12.180

如果我想知道 Word 的版本，我会查看注册表项 HKEY_CLASSES_ROOT\Word.Application\CurVer

它将为您提供一个 ProgId，例如：Office 2010、2007 和 2003 分别为“Word.Application.14”、“Word.Application.12”或“Word.Application.11”。最后一个“.”右侧的部分。给出版本。如果您查看“Word.Document”，它不会总是给出正确的答案，因为可以安装一些功能包，允许旧版本的 Word 读取新版本的 Word 文档。这些功能包会更新 Word.Document 的一些注册表设置，但不会单独使用 Word.Application。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T06:16:32.290

您可以从路径中读取注册表项。为了.....

*   办公室 2003 = 11
*   办公室 2007 = 12
*   办公室 2010 = 14

    HKLM\Software\Microsoft\Office\12.0\Word\Registration{-------------}\AccessNameVersion

    HKLM\Software\Microsoft\Office\12.0\Word\Registration{-------------}\ExcelNameVersion

    HKLM\Software\Microsoft\Office\12.0\Word\Registration{-------------}\OutlookNameVersion

    HKLM\Software\Microsoft\Office\12.0\Word\Registration{-------------}\PowerPointNameVersion

# iphone - UIImagePicker 自定义“移动和缩放”

> ID：12153390
> 
> 赞同：2
> 
> 时间：2012-08-28T05:44:07.987
> 
> 标签：iphone, image, uiimagepickercontroller, scale

我正在尝试使用 UIImagePicker 进行移动和缩放。

我想更改“移动和缩放”字符串并将取消和选择按钮标题更改为另一个字符串。有什么办法吗？

有关更多详细信息，请查看这些

![](../Images/e8975e6e5e6024e7eaa20fa17740ba95.png)

# java - 如何在java中检查两个用户定义的对象

> ID：12153394
> 
> 赞同：0
> 
> 时间：2012-08-28T05:44:26.130
> 
> 标签：java, string

我有一个班级，我想比较该班级的两个对象。有什么方法可以比较两个用户定义的对象。我不想手动做。

```
public class NewClass {

    private String name;
    private String surnamename;
    private String address;

    public NewClass(String name)
    {
        this.name = name;
    }

    public NewClass(String name, String surname, String address)
    {
        this.name = name;
        this.surnamename = surname;
        this.address = address;
    }

    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public String getSurnamename() {
        return surnamename;
    }
    public void setSurnamename(String surnamename) {
        this.surnamename = surnamename;
    }
    public String getAddress() {
        return address;
    }
    public void setAddress(String address) {
        this.address = address;
    }
} 
```

我想比较这个类的两个对象。我怎么能做到这一点？

```
NewClass newClass1 = new NewClass("kshitij", "solanki", "nadiad");      
NewClass newClass2 = new NewClass("kshitij", "solanki", "nadiad");

    String s1 = new String("kshitij");
    String s2 = new String("kshitij");

    NewClass s3 = new NewClass("kshitij");
    NewClass s4 = new NewClass("kshitij");

    System.out.println(s1.hashCode());
    System.out.println(s2.hashCode());

    System.out.println(s3.hashCode());
    System.out.println(s4.hashCode());

    System.out.println(newClass1 == newClass2);
    System.out.println(newClass1.toString() == newClass2.toString());
    System.out.println(newClass1.toString().equals(newClass2.toString())); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T05:50:04.523

你想实现`equals`and `hashCode`，例如

```
public boolean equals(final Object other) {
  if (other instanceof NewClass) {
    final NewClass _other = (NewClass) other;
    return name.equals(_other.name)
      && (surname == null && surname == _other.surname
        || surname.equals(_other.surname))
      && (address == null && address == _other.address
        || address.equals(_other.address));
  } else {
    return false;
  }
}

public int hashCode() {
  return name.hashCode() * 961
    + (surname == null ? 0 : surname.hashCode()) * 31
    + (address == null ? 0 : address.hashCode());
} 
```

现在，您可以按*语义*`NewClass`比较实例，例如

 *```
/* they are equal */
assert new NewClass("A", "B", "C").equals(new NewClass("A", "B", "C")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T05:45:32.193

这就是目的`equals()`和`hashcode()`方法。

覆盖`equals()`和`hashcode()`方法`NewClass`

在`equals()`方法内部编码您的相等条件并使用相同的变量进行[hashcode()](http://www.xyzws.com/javafaq/why-always-override-hashcode-if-overriding-equals/20)计算。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T06:29:31.930

你可以使用`equals()`方法。

该方法可用于`java.lang.Object`

此方法基本上用于比较两个对象。

可以出于特殊目的重写此方法。

并且该方法基本上返回`boolean`值。*

# c# - 从内容页面启用母版页中的超链接时出现问题

> ID：12153402
> 
> 赞同：0
> 
> 时间：2012-08-28T05:45:46.617
> 
> 标签：c#, asp.net

我编写了代码来从内容页面启用和禁用母版页上的超链接。一切正常，调用`DisableHyperlinkInMasterPage`方法后超链接也被禁用。当我调用该`EnableHyperlinkInMasterPage`方法时，超链接仍然不起作用。如果我们要离开该页面，那么我发现超链接开始工作。我的问题是在调用该`EnableHyperlinkInMasterPage` 方法后，在不离开页面的情况下，超链接仍然被禁用并且无法正常工作，并且在离开页面后它被启用。请帮助我解决这个问题。我调试代码并没有发现任何`EnableHyperlinkInMasterPage`方法错误。

```
private void DisableHyperlinkInMasterPage()
    {
        AssociateMaster mymaster = (AssociateMaster)Page.Master;
        HyperLink home = (HyperLink)mymaster.FindControl("Home");
        home.Enabled = false;
        HyperLink profile = (HyperLink)mymaster.FindControl("ProfileLink");
        profile.Enabled = false;
        HyperLink report = (HyperLink)mymaster.FindControl("Report");
        report.Enabled = false;
        HyperLink signout = (HyperLink)mymaster.FindControl("SignOut");
        signout.Enabled = false;
    }

    private void EnableHyperlinkInMasterPage()
    {
        AssociateMaster mymaster = (AssociateMaster)Page.Master;
        HyperLink home = (HyperLink)mymaster.FindControl("Home");
        home.Enabled = true;
        HyperLink profile = (HyperLink)mymaster.FindControl("ProfileLink");
        profile.Enabled = true;
        HyperLink report = (HyperLink)mymaster.FindControl("Report");
        report.Enabled = true;
        HyperLink signout = (HyperLink)mymaster.FindControl("SignOut");
        signout.Enabled = true;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T06:22:30.507

尝试使用属性来启用和禁用链接。并尝试尽可能少地使用 FindControl。假设您的 MasterPage 中有一个名为 lnkTest 的链接。在您的母版页中编写此代码：

```
 public bool TestLinkEnabled
 {
      get { return lnkTest.Enabled; }
      set {lnkTest.Enabled = value; }
 } 
```

然后在您的内容页面中将此行添加到您的页面后：

```
 <%@ MasterType VirtualPath="~/MasterPage.master" %> 
```

使用以下命令启用和禁用此链接：

```
 Master.TestLinkEnabled = true;
  Master.TestLinkEnabled = false; 
```

# git - 如何管理一个项目的多个版本？

> ID：12153405
> 
> 赞同：52
> 
> 时间：2012-08-28T05:46:02.217
> 
> 标签：git, version-control, project-management

`git`我有一个用于修订控制的开源项目。很快，我也将发布该项目的高级托管版本，但是将专门针对高级托管版本（性能等）对代码进行更改，这些更改不应该存在于开源版本中。

我想避免有两个单独的目录/项目，因为如果我修复了开源版本中的错误，那么该错误很可能也出现在高级托管版本中。我不想在两个地方进行更改。

管理此问题的最佳方法是什么？简单地分支是`git`行不通的，因为有些文件需要有 2 个版本：一个开源版本和一个高级托管版本。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-08-28T06:00:15.870

然而，分支应该可以工作，并且允许您维护两个单独的版本。

如果您有适用于高级版本的错误，请在 上修复它，然后在分支上`master`合并它。 Git 只会合并自从你在and之间分支以来发生的变化，即你的错误修复。 另一种发布修补程序的方法是在共同祖先中发布修补程序：请参阅“ [Git 将修补程序合并到多个分支](https://stackoverflow.com/a/10761836/6309)”。`premium`
`master``premium`
`master``premium`

* * *

2015 年更新：git 2.5（2015 年 7 月）已替换`git-new-workdir`为新命令[`git worktree add <path> [<branch>]`](https://github.com/git/git/blob/68a2e6a2c80303144807c8c91a087427e3c8e727/Documentation/git-checkout.txt#L228-L233)。

有关更多信息，请参阅“[**使用 Git 的多个工作目录？**](https://stackoverflow.com/a/30185564/6309) ”。

* * *

2012年原始答案：

[我在](https://stackoverflow.com/users/220155/me-and)[评论](https://stackoverflow.com/questions/12153405/how-to-manage-multiple-versions-of-a-project-in-git/12153522#comment16269524_12153522)中提到了命令 **[git-new-workdir](http://www-cs-students.stanford.edu/~blynn/gitmagic/ch07.html#_building_on_git)**。
看：

*   [使用`git-new-workdir`](http://kohei.us/2010/11/16/working-with-a-branch-using-git-new-workdir/)“
*   《[核乌贼`git-new-workdir`](http://nuclearsquid.com/writings/git-new-workdir/)》

> 一种解决方案是简单地创建存储库的另一个本地克隆。Git 在本地克隆时会自动使用硬链接，因此克隆速度非常快。
> 但是这样做有一个问题：您现在有另一个单独的存储库，您需要保持最新状态。
> 
> 这就是它的`git-new-workdir`用武之地。它
> 无需对存储库进行完整的克隆，而是为您简单地设置一个新的工作目录（具有自己的索引）。
> 实际存储库本身在原始工作目录和新工作目录之间共享。这表示：
> 
> *   如果您更新一个存储库，新的提交也会立即在所有其他工作目录中可见。
> *   在您的一个工作目录中创建一个新的提交或分支，它们立即在所有工作目录中可用。
> 
> 注意：即使提交是自动存在的，如果您已签出相同的分支，Git 也不会更新工作副本。你必须自己做。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2017-07-21T05:26:52.830

`worktree`为此目的最好使用。

就我而言，我有两个版本的相同软件，基本相同，但每个版本都有一些不同的功能。

所以我创建了两个`worktree`，这意味着，在 master 旁边创建两个相关的长期运行的分支。

```
$git worktree add -b version-silver ..\version-silver master
$git worktree add -b version-gold ..\version-gold master 
```

然后我有：

```
$git branch
master  # base stuff here
version-silver # some normal features
version-gold # some better features 
```

有一个存储库，但对于上面的每个分支，我有 3 个单独的文件夹并排放置。并在master中进行通用更改。然后将其与其他两个版本合并。

```
cd master
vim basic.cpp
git add .
git commit -m "my common edit on basic.cpp"
cd ..\version-silver
vim silver.cpp
git add .
git commit -m "my specific edit on silver.cpp"
git merge master # here i get the basic.cpp latest changes for silver project
cd ..\version-gold
git merge master # here i get the basic.cpp latest changes for gold project 
```

每个版本的具体改动也会放在对应的文件夹中，每个项目的作品都是独立的，不会混淆IDE。

希望有帮助。

# objective-c - 填充表格视图的更好方法

> ID：12153406
> 
> 赞同：0
> 
> 时间：2012-08-28T05:46:06.893
> 
> 标签：objective-c, ios, uitableview, core-data, nsmutablearray

我正在实现一个表格视图，它为我提供搜索查询的结果。到目前为止，我能够使用 SAX 解析器解析响应并获得一个字典对象数组。每次用户点击搜索时，我都需要进行服务器调用。因此，将结果数组存储在数据库中不是一种选择。对于带有响应对象的数组很大的情况。以下是我能想到的两种方法：

```
1\. I should save each result (dictionary object) while parsing in local database and then   load the tableview when the request completes.

2\. Load the tableview using the array of dictionary objects after the request completes 
```

鉴于我的本地数据库已经处理其他操作，从内存和性能的角度来看，哪种方法更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T06:35:30.707

选项编号 2是最好的方法。在这里，您可以将响应数据保存在字典中。您可以根据字典中的值重新加载表。每次在数据库中保存数据会减慢搜索过程并增加不必要的开销。

# java - 编译 Ragel 6.7 生成的 java 代码时出错

> ID：12153413
> 
> 赞同：1
> 
> 时间：2012-08-28T05:47:46.410
> 
> 标签：java, compiler-construction, ragel

我正在尝试使用 Ragel 编写一个简单的 Lexer，并将其输出为 Java 有效代码，但生成的代码无法编译。

这是我正在使用的 Lexer.rl：

```
public class Lexer {
    %%{
      machine simple_lexer;

      integer     = ('+'|'-')?[0-9]+;
      float       = ('+'|'-')?[0-9]+'.'[0-9]+;
      assignment  = '=';
      identifier  = [a-zA-Z][a-zA-Z_]+; 

      main := |*
        integer => { emit("integer"); };
        float => { emit("float"); };
        assignment => { emit("assignment"); };
        identifier => { emit("identifier"); };
        space => { emit("space"); };
      *|;

    }%%

    %% write data;

    public static void emit(String token) {
        System.out.println(token);
    }

    public static void main(String[] args) {
        %% write init;

        %% write exec;
    }
} 
```

生成的文件和错误输出在：[https](https://gist.github.com/3495276) ://gist.github.com/3495276 （因为太大，这里贴不上 =S ）

那么，我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T16:33:40.817

您需要声明将在生成的代码中使用的某些变量。请参阅用户指南的第 5.1 节“Ragel 使用的变量”。

`main`应该是这样的：

```
public static void main(String[] args) {
    int cs; /* state number */
    char[] data = "xy = 22 wq = 11.46".toCharArray(); /* input */
    int p = 0, /* start of input */
        pe = data.length, /* end of input */
        eof = pe,
        ts, /* token start */
        te, /* token end */
        act /* used for scanner backtracking */;

    %% write init;

    %% write exec;
} 
```

此外，不确定您是否真的希望标识符至少有两个符号长。

```
identifier  = [a-zA-Z][a-zA-Z_]+; 
```

可能应该是

```
identifier  = [a-zA-Z][a-zA-Z_]*; 
```

# c# - 如何在 Metro 风格应用程序中访问基于 PHP 的服务

> ID：12153414
> 
> 赞同：0
> 
> 时间：2012-08-28T05:47:46.643
> 
> 标签：c#, php, service, microsoft-metro

我们有一个 Web 服务，应用程序将使用它与服务器交互。

该服务是基于 PHP 的服务。当我们将其添加为 Metro 风格应用程序中的服务引用时，我们无法访问任何方法。

我们在其他应用程序中尝试了相同的 URL 作为服务引用，并且我们能够访问这些方法。

服务 URL 是[http://sanity-free.org/services/ws.php?wsdl](http://sanity-free.org/services/ws.php?wsdl)

请让我知道我们如何在我们的应用程序中访问此方法。

谢谢

玛尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T06:02:57.417

我会向你描述我的情况。我希望它有所帮助。

我有一个通过 asp webapi 与 azure sql 通信的 Metro 应用程序。webapi 托管在云中，它是 Metro 到我的数据库的连接器。

这与您的情况非常相似。创建可从世界获得的公共方法。比您只需要确保数据以良好的格式返回（通过您的 php 服务）。我更喜欢 json 因为它很容易编码，解码它很简单（这在 webapp 中非常重要）。

我通过以下方式连接我的 api：[http](http://domain.com/api/Content/get) ://domain.com/api/Content/get或[http://domain.com/api/content/getbyname/my+name](http://domain.com/api/content/getbyname/my+name)

使用此网址，我将按标题获取全部内容或内容

这不是您问题的 100% 答案，但可以解决它:)

# yacc - LOGO（或 Turtle）编程语言的 Lex/Yacc 语法文件

> ID：12153415
> 
> 赞同：4
> 
> 时间：2012-08-28T05:47:51.557
> 
> 标签：yacc, lex, logo-lang

我想知道是否已经存在描述 Lex 和 Yacc 令牌以及[LOGO](http://en.wikipedia.org/wiki/Logo_%28programming_language%29)解析规则的文件。

我将使用[PLY](http://www.dabeaz.com/ply/ply.html) for Python 来解析 LOGO 命令。我必须将文件转换为 Python，所以我希望更多地使用这些文件作为指南。

我在这里搜索并用谷歌搜索，但找不到任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T21:52:20.547

LOGO 不存在 Lex/Yacc 配置文件。LOGO 不能与 Lex 一起使用，因为该语言没有明确定义的函数参数。根据上下文使参数与函数的匹配变得惰性。Lex 仅适用于明确定义的参数结构。

# ruby-on-rails - 捆绑安装不起作用

> ID：12153421
> 
> 赞同：0
> 
> 时间：2012-08-28T05:48:29.203
> 
> 标签：ruby-on-rails, ruby

我目前正在安装 Redmine 并按照[以下步骤](http://www.redmine.org/projects/redmine/wiki/RedmineInstall)操作（并且我正在**安装过程中-> step2**），当我尝试这样做时，`bundle install --without development test rmagick`出现如下错误。

**输出**

> $sudo bundle install --without development test rmagick
> 
> [从http://rubygems.org/](http://rubygems.org/)获取 gem 元数据.... 使用 rake (0.9.2.2) 使用 activesupport (2.3.14)
> 使用 rack (1.1.3) 使用 actionpack (2.3.14)
> 使用 actionmailer ( 2.3.14) 使用activerecord (2.3.14)
> 使用activeresource (2.3.14) 使用coderay (1.0.7) 使用fastcsv (1.5.5) 使用i18n (0.4.2) 使用原生扩展安装mysql (2.8.1) Gem ::Installer::ExtensionBuildError: 错误: 无法构建 gem 原生扩展。
> 
> ```
>  /usr/bin/ruby1.8 extconf.rb --with-mysql-config=/usr/local/mysql/bin/mysql_config extconf.rb:10: command not found: /usr/local/mysql/bin/mysql_config --cflags 
> ```
> 
> *** extconf.rb 失败 *** 由于某种原因无法创建 Makefile，可能缺少必要的库和/或头文件。检查 mkmf.log 文件以获取更多
> 详细信息。您可能需要配置选项。
> 提供的配置选项： --with-opt-dir --without-opt-dir
> --with-opt-include
> --without-opt-include=${opt-dir}/include
> --with-opt-lib -- without-opt-lib=${opt-dir}/lib
> --with-make-prog --without-make-prog
> --srcdir=. --curdir --ruby=/usr/bin/ruby1.8
> --with-mysql-config
> 
> Gem 文件将继续安装在 /var/lib/gems/1.8/gems/mysql-2.8.1 中以供检查。结果记录到 /var/lib/gems/1.8/gems/mysql-2.8.1/ext/mysql_api/gem_make.out
> 
> 安装 mysql (2.8.1) 时出错，Bundler 无法继续。`gem install mysql -v '2.8.1'` 在捆绑之前确保成功。

然后我按照[这个](http://www.redmine.org/boards/2/topics/29070)教程删除`.bundle/config`并再次尝试，但它仍然无法正常工作。

而且[这个](https://stackoverflow.com/questions/9134113/i-cant-run-bundler-keep-getting-error)也没有帮助（同样的错误）。

这是**/var/lib/gems/1.8/gems/mysql-2.8.1/ext/mysql_api/gem_make.out的 CAT**

![在此处输入图像描述](../Images/bdfd8af1a96c51f1d8712908276328a0.png)

**更新：1**

但我没有文件夹**mysql**文件夹，`/usr/local/`我也不能`locate bin/mysql_config`

* * *

* * *

**更新：2**

我遇到了第一个问题（mysql 问题，这是一个路径问题），最后我遇到了另一个问题：请检查：

```
sudo bundle install --without development test rmagick    
Fetching gem metadata from http://rubygems.org/.......    
Using rake (0.9.2.2) 
Using activesupport (2.3.14) 
Using rack (1.1.3) 
Using actionpack (2.3.14) 
Using actionmailer (2.3.14) 
Using activerecord (2.3.14) 
Using activeresource (2.3.14) 
Using coderay (1.0.7) 
Using fastercsv (1.5.5) 
Using i18n (0.4.2) 
Using mysql (2.8.1) 
Using net-ldap (0.3.1) 
Installing pg (0.14.0) with native extensions 
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        /usr/bin/ruby1.8 extconf.rb 
checking for pg_config... no
No pg_config... trying anyway. If building fails, please try again with
 --with-pg-config=/path/to/pg_config
checking for libpq-fe.h... no
Can't find the 'libpq-fe.h header
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --without-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/usr/bin/ruby1.8
    --with-pg
    --without-pg
    --with-pg-dir
    --without-pg-dir
    --with-pg-include
    --without-pg-include=${pg-dir}/include
    --with-pg-lib
    --without-pg-lib=${pg-dir}/lib
    --with-pg-config
    --without-pg-config
    --with-pg_config
    --without-pg_config

Gem files will remain installed in /var/lib/gems/1.8/gems/pg-0.14.0 for inspection.
Results logged to /var/lib/gems/1.8/gems/pg-0.14.0/ext/gem_make.out
An error occured while installing pg (0.14.0), and Bundler cannot continue.
Make sure that `gem install pg -v '0.14.0'` succeeds before bundling. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T06:07:58.873

注意它说“找不到命令：.../mysql_config”这意味着它试图运行`mysql_config`程序，但它不存在（在您的系统上不存在，或者安装在其他地方）。它甚至可以正确猜测“可能缺少必要的库和/或头文件”的问题。Rubygems 不知道它失败的原因，只知道它失败了（因为在运行 makefile 时会发生这种情况，并且 Rubygems 不知道每个 gem 的特定构建问题和依赖项），但它会记录所有信息以供您查看了解更多。请注意，它说要检查“/var/lib/gems/1.8/gems/mysql-2.8.1/ext/mysql_api/gem_make.out”文件以获取更多信息。你可以`cat /var/lib/gems/1.8/gems/mysql-2.8.1/ext/mysql_api/gem_make.out`看到更多，但在这一点上，你似乎很清楚你缺少 mysql。

我不知道如何为您的系统安装 mysql，但应该有某种包管理器可以为您完成。我知道 apt-get 很常见，而且我认为 Ubuntu 有类似突触的东西，而且我还听说过一种叫做 pacman 的东西。无论您使用什么来在系统上安装东西，它都应该能够为您安装 mysql，所以我将从那里开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T05:56:03.787

您可能需要先安装 mysql 服务器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T06:04:15.843

运行这个，然后运行 ​​bundle install

sudo apt-get install build-essential zlib1g-dev libssl-dev libreadline-dev libruby1.9

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-06T17:46:14.047

对你的问题很简单看看这一步

1>>>/opt/metasploit/msf3# gem unpack bundle install Unpacked gem: '/opt/metasploit/msf3/bundle-0.0.1' 错误: Gem 'install' 未安装也无法获取。

2>>>

root@bt:/opt/metasploit/msf3# bundle install 从 https://rubygems.org/ 获取 gem 元数据…… 从[https://rubygems.org/](https://rubygems.org/)[获取](https://rubygems.org/)gem 元数据5.3) 安装 simplecov (0.5.4) 安装 timecop (0.6.3) 安装 yard (0.8.7) 使用 bundler (1.3.5) 你的包已经完成了！采用`bundle show [gemname]`查看捆绑的 gem 的安装位置。

3>>>成功你的metasploit工作

root@bt:/opt/metasploit/msf3# msfconsole 注意：ALTER TABLE 将为串行列“vulns_refs.id”创建隐式序列“vulns_refs_id_seq” 注意：ALTER TABLE / ADD PRIMARY KEY 将为表“vulns_refs”创建隐式索引“vulns_refs_pkey” " 注意：CREATE TABLE 将为串行列 "task_creds.id" 创建隐式序列 "task_creds_id_seq" 注意：CREATE TABLE / PRIMARY KEY 将为表 "task_creds" 创建隐式索引 "task_creds_pkey" 注意：CREATE TABLE 将创建隐式序列 "task_hosts_id_seq"对于串行列“task_hosts.id”注意：CREATE TABLE / PRIMARY KEY 将为表“task_hosts”创建隐式索引“task_hosts_pkey”注意：CREATE TABLE 将创建隐式序列“串行列“task_services.id”的 task_services_id_seq” 注意：CREATE TABLE / PRIMARY KEY 将为表“task_services”创建隐式索引“task_services_pkey” 注意：ALTER TABLE 将为串行列“hosts_tags.id”创建隐式序列“hosts_tags_id_seq” 注意： ALTER TABLE / ADD PRIMARY KEY 将为表“hosts_tags”创建隐式索引“hosts_tags_pkey”注意：CREATE TABLE 将为串行列“task_sessions.id”创建隐式序列“task_sessions_id_seq”注意：CREATE TABLE / PRIMARY KEY 将创建隐式索引“task_sessions_pkey” " 对于表 "task_sessions" _ _ / \ /\ __ _ __ /对于串行列“task_services.id” 注意：CREATE TABLE / PRIMARY KEY 将为表“task_services”创建隐式索引“task_services_pkey” 注意：ALTER TABLE 将为串行列“hosts_tags.id”创建隐式序列“hosts_tags_id_seq” 注意：ALTER TABLE / ADD PRIMARY KEY 将为表“hosts_tags”创建隐式索引“hosts_tags_pkey” 注意：CREATE TABLE 将为串行列“task_sessions.id”创建隐式序列“task_sessions_id_seq” 注意：CREATE TABLE / PRIMARY KEY 将为表创建隐式索引“task_sessions_pkey”表“task_sessions”_ _ / \ /\ __ _ __ /对于串行列“task_services.id” 注意：CREATE TABLE / PRIMARY KEY 将为表“task_services”创建隐式索引“task_services_pkey” 注意：ALTER TABLE 将为串行列“hosts_tags.id”创建隐式序列“hosts_tags_id_seq” 注意：ALTER TABLE / ADD PRIMARY KEY 将为表“hosts_tags”创建隐式索引“hosts_tags_pkey” 注意：CREATE TABLE 将为串行列“task_sessions.id”创建隐式序列“task_sessions_id_seq” 注意：CREATE TABLE / PRIMARY KEY 将为表创建隐式索引“task_sessions_pkey”表“task_sessions”_ _ / \ /\ __ _ __ /CREATE TABLE / PRIMARY KEY 将为表 "task_services" 创建隐式索引 "task_services_pkey" 注意： ALTER TABLE 将为串行列 "hosts_tags.id" 创建隐式序列 "hosts_tags_id_seq" 注意： ALTER TABLE / ADD PRIMARY KEY 将创建隐式索引 "hosts_tags_pkey" " 对于表 "hosts_tags" 注意：CREATE TABLE 将为串行列 "task_sessions.id" 创建隐式序列 "task_sessions_id_seq" 注意：CREATE TABLE / PRIMARY KEY 将为表 "task_sessions" 创建隐式索引 "task_sessions_pkey" _ _ / \ /\ __ _ __ /CREATE TABLE / PRIMARY KEY 将为表 "task_services" 创建隐式索引 "task_services_pkey" 注意： ALTER TABLE 将为串行列 "hosts_tags.id" 创建隐式序列 "hosts_tags_id_seq" 注意： ALTER TABLE / ADD PRIMARY KEY 将创建隐式索引 "hosts_tags_pkey" " 对于表 "hosts_tags" 注意：CREATE TABLE 将为串行列 "task_sessions.id" 创建隐式序列 "task_sessions_id_seq" 注意：CREATE TABLE / PRIMARY KEY 将为表 "task_sessions" 创建隐式索引 "task_sessions_pkey" _ _ / \ /\ __ _ __ /ALTER TABLE 将为串行列“hosts_tags.id”创建隐式序列“hosts_tags_id_seq”注意：ALTER TABLE / ADD PRIMARY KEY 将为表“hosts_tags”创建隐式索引“hosts_tags_pkey”注意：CREATE TABLE 将为串行创建隐式序列“task_sessions_id_seq”列“task_sessions.id”注意：CREATE TABLE / PRIMARY KEY 将为表“task_sessions”创建隐式索引“task_sessions_pkey”_ _ / \ /\ __ _ __ /ALTER TABLE 将为串行列“hosts_tags.id”创建隐式序列“hosts_tags_id_seq”注意：ALTER TABLE / ADD PRIMARY KEY 将为表“hosts_tags”创建隐式索引“hosts_tags_pkey”注意：CREATE TABLE 将为串行创建隐式序列“task_sessions_id_seq”列“task_sessions.id”注意：CREATE TABLE / PRIMARY KEY 将为表“task_sessions”创建隐式索引“task_sessions_pkey”_ _ / \ /\ __ _ __ /注意：CREATE TABLE 将为串行列“task_sessions.id”创建隐式序列“task_sessions_id_seq” 注意：CREATE TABLE / PRIMARY KEY 将为表“task_sessions”创建隐式索引“task_sessions_pkey”_ _ / \ /\ __ _ __ /注意：CREATE TABLE 将为串行列“task_sessions.id”创建隐式序列“task_sessions_id_seq” 注意：CREATE TABLE / PRIMARY KEY 将为表“task_sessions”创建隐式索引“task_sessions_pkey”_ _ / \ /\ __ _ __ /*/ _* | |\ / | **\ \* *****_*** | | / \ _ \ \ | | /| | | ***\ |- -| /\ / _* \ | -** / | || | || | |- -| |_| | | | *|* _ | |_ / -\ **\ \ | | | | __/| | | |_ |/ |_****/ _* _/ /\ \_ **/ / __| |_\ _** \****

 ****```
 =[ metasploit v4.9.0-dev [core:4.9 api:1.0] 
```

+ -- --=[ 1236 个漏洞利用 - 676 个辅助 - 197 个帖子 + -- --=[ 326 个有效载荷 - 31 个编码器 - 8 个 nops

我希望你的问题解决了****

# wordpress - wordpress 上的缩略图不会调整大小

> ID：12153423
> 
> 赞同：0
> 
> 时间：2012-08-28T05:48:55.647
> 
> 标签：wordpress, resize, thumbnails

我的缩略图没有在我的 wordpress 网站上调整大小。我有以下代码：

```
add_theme_support( 'post-thumbnails' );
set_post_thumbnail_size( 66, 66, true ); 
```

我不知道还能做什么.. 当我上传图片时，它仍然是原始大小。我还在管理员的媒体中将缩略图大小设置为 66、66。依然没有。我所有的其他图像都可以很好地调整大小，而不是缩略图/特色图像。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T07:40:55.057

您可以上传新图片并使用[此](http://wordpress.org/extend/plugins/ajax-thumbnail-rebuild/) 插件重新调整旧图片的大小吗 谢谢

# c++ - C++ - 循环依赖（在模板化基类中使用子类的内部类型）

> ID：12153424
> 
> 赞同：7
> 
> 时间：2012-08-28T05:49:01.230
> 
> 标签：c++, templates, circular-dependency, crtp, incomplete-type

我在模板类中遇到了循环依赖问题。有一个代码示例：

```
template <typename T> struct A 
{
  typedef typename T::C D;
  //typename T::C c;
};

struct B : public A<B>
{
  struct C {};
}; 
```

当我尝试实例化 B 时，我收到编译器错误：*“C”不是“B”的成员*（MSVC）或 *不完整类型“struct B”*（GCC）的使用无效。
更改样本以使其正常工作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T06:29:44.190

```
struct B_base { struct C {}; };
strucr B : A<B_base>, B_base { }; 
```

# ios - Facebook iOS SDK 3.0 中的深度链接和 FBSessionDelegate

> ID：12153427
> 
> 赞同：0
> 
> 时间：2012-08-28T05:49:10.140
> 
> 标签：ios, facebook, facebook-graph-api, facebook-ios-sdk, deep-linking

我已经阅读了[http://developers.facebook.com/docs/howtos/link-to-your-native-app/](http://developers.facebook.com/docs/howtos/link-to-your-native-app/)并且对应该如何处理 3.0 中的深度链接感到困惑。假设用户为我的应用点击了一个 appRequest，FB 用一个特殊的 URL 打开了我的应用。我有我的 Appdelegate 的 openURL 方法：

```
return [FBSession.activeSession handleOpenURL:url]; 
```

教程说：

```
If your app requires an authorized user, handle the processing of the target URL in the
SDK callbacks implemented after a successful login, the fbDidLogin method. 
```

但是，不再调用 fbDidLogin 委托方法，因为在 3.0 中我们切换到使用 FBSession.activeSession 而不是使用 facebook.m 对象。事实上，任何 FBSessionDelegate 方法都不会被调用，因为 facebook 对象的状态永远不会改变。那么我应该在哪里处理 URL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T22:46:33.683

您可能会在打开会话时设置的处理程序中处理此问题。

例如，您使用以下内容打开会话：

```
[FBSession openActiveSessionWithReadPermissions:nil
                                      allowLoginUI:YES
                                 completionHandler:^(FBSession *session,
                                                     FBSessionState state,
                                                     NSError *error) {
                                     [self sessionStateChanged:session
                                                         state:state
                                                         error:error];
                                 }]; 
```

您可以将深度链接处理代码放在方法集中以处理您可以定义的会话更改，例如：

```
- (void)sessionStateChanged:(FBSession *)session
                      state:(FBSessionState) state
                      error:(NSError *)error
{
    switch (state) {
        case FBSessionStateOpen:
            if (!error) {
                // Handle deep link      
            }
            break;
        case FBSessionStateClosed:
            self.user = nil;
            break;
        case FBSessionStateClosedLoginFailed:
            self.user = nil;
            [FBSession.activeSession closeAndClearTokenInformation];
            break;
        default:
            break;
    }

    if (error) {
        UIAlertView *alertView = [[UIAlertView alloc]
                                  initWithTitle:@"Error"
                                  message:error.localizedDescription
                                  delegate:nil
                                  cancelButtonTitle:@"OK"
                                  otherButtonTitles:nil];
        [alertView show];
    }
} 
```

要查看深度链接处理的工作示例，请参阅[https://github.com/fbsamples/ios-social-cafe/](https://github.com/fbsamples/ios-social-cafe/)

# python - 有没有使用像emacs这样的python到lisp的编辑器？

> ID：12153429
> 
> 赞同：1
> 
> 时间：2012-08-28T05:49:30.410
> 
> 标签：python, emacs, ide

我喜欢 Emacs 的概念和可扩展性

但我不擅长 Lisp。所以我正在使用 python 找到类似的东西。

在那儿？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T06:12:06.750

有[pymacs](http://pymacs.progiciels-bpi.ca/index.html)允许您使用 python 扩展 emacs。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T05:52:29.580

有[vim](http://www.vim.org/)。您可以直接在 vim 脚本中使用 python 来编写自己的函数、插件等。

看看[这个链接](http://brainacle.com/how-to-write-vim-plugins-with-python.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T05:53:52.933

好吧，有[用于 python](https://github.com/gabrielelanaro/emacs-for-python)、[eclipse](http://www.eclipse.org/)和大量其他 ide 的 Emacs。对于 Eclipse，您需要获取[pydev](http://pydev.org/)。我在这里包括[vim](http://www.vim.org/scripts/script.php?script_id=790)，但据我所知，Emacs 用户不喜欢 vim。查看[这篇文章](https://stackoverflow.com/questions/81584/what-ide-to-use-for-python)了解更多信息

# drupal - 在drupal 7中更改表单元素的“必需”属性

> ID：12153433
> 
> 赞同：0
> 
> 时间：2012-08-28T05:49:56.240
> 
> 标签：drupal, drupal-7, drupal-forms, form-api, hook-form-alter

我有一些某种形式的需要字段，我希望它们在某个地方需要，而在另一个地方不需要（我想要它们，也许你建议我在 cck 中使用存在字段，但这个字段不在 cck 中。）我使用了 profile2 模块对于某些配置文件类型，我希望在配置文件类型编辑页面中作为示例`name`字段是必需的，并且在用户注册`name`字段中不需要。我尝试在表单更改中更改字段的`#require`属性`name`，它已正确更改，但在验证中告诉我该`name`字段是必需的。

在

```
 function mymodule_form_alter(&$form,&$form_state) {
            if ($form_id == 'user_register_form') {
              $form['profile_detailp']['field_name']['und']['#required']=0;
              ...
              }

      } 
```

任何的想法 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T19:10:00.720

您的方法没问题，并且必须有效，但可能会在另一个模块中`require`再次使用。

```
 function mymodule_form_alter(&$form,&$form_state) {
        if ($form_id == 'user_register_form') {
          $form['profile_detailp']['field_name']['und']['#required']=0;
          ...
          }

  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-13T07:48:35.450

文本字段需要这样做

```
function mymodule_form_alter(&$form,&$form_state) {
  if ($form_id == 'user_register_form') {
    $form['profile_detailp']['field_name']['und'][0]['value']['#required']=0;
  }
} 
```

# java - 缺少 jdbc.artifact.groupid:jdbc-driver:jar:1.0 的依赖信息

> ID：12153435
> 
> 赞同：3
> 
> 时间：2012-08-28T05:50:24.753
> 
> 标签：java, hibernate, maven, maven-plugin, hbm2java

我正在尝试使用 hbm2java Maven 插件进行休眠。对于 mvn hibernate3:hbm2cfgxml 目标，我面临以下错误。

```
[INFO] Scanning for projects...
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building my-app-hadoop 1.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO]
[INFO] >>> hibernate3-maven-plugin:2.2:hbm2cfgxml (default-cli) @ my-app-hadoop >>>
[INFO]
[INFO] <<< hibernate3-maven-plugin:2.2:hbm2cfgxml (default-cli) @ my-app-hadoop <<<
[INFO]
[INFO] --- hibernate3-maven-plugin:2.2:hbm2cfgxml (default-cli) @ my-app-hadoop ---
[WARNING] The POM for jdbc.artifact.groupid:jdbc-driver:jar:1.0 is missing, no dependency information available
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 0.454s
[INFO] Finished at: Tue Aug 28 11:14:20 IST 2012
[INFO] Final Memory: 3M/6M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.codehaus.mojo:hibernate3-maven-   plugin:2.2:hbm2cfgxml (default-cli) on project my-app-hadoop: Ex
ecution default-cli of goal org.codehaus.mojo:hibernate3-maven-plugin:2.2:hbm2cfgxml   failed: Plugin org.codehaus.mojo:hibernate3-m
aven-plugin:2.2 or one of its dependencies could not be resolved: Failure to find  jdbc.artifact.groupid:jdbc-driver:jar:1.0 in htt
p://repo.maven.apache.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval
of central has elapsed or updates are forced -> [Help 1]
[ERROR]
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR]
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginResolutionException 
```

我在 POM.xml 中添加了以下插件配置以使用 hbm2java 功能。

```
<build>
<plugins>
  <plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>hibernate3-maven-plugin</artifactId>
    <version>2.2</version>
    <configuration>
      <components>
        <component>
          <name>hbm2ddl</name>
          <implementation>jdbcconfiguration</implementation>
        </component>
        <component>
          <name>hbm2hbmxml</name>
          <outputDirectory>src/main/resources</outputDirectory>
        </component>
      </components>
      <componentProperties>
        <drop>true</drop>
        <configurationfile>/src/main/resources/hibernate.cfg.xml</configurationfile>
      </componentProperties>
    </configuration>
    <dependencies>
      <dependency>
        <groupId>jdbc.artifact.groupid</groupId>
        <artifactId>jdbc-driver</artifactId>
        <version>1.0</version>
      </dependency>
    </dependencies>
  </plugin>
</plugins> 
```

我在哪里可以找到 jdbc.artifact.groupid 以及我的 pom.xml 中缺少什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T06:41:35.867

您必须将 jdbc.artifact.groupid:jdbc-driver:1.0 替换为真正的供应商工件。例如

```
<dependency>
    <groupId>org.hsqldb</groupId>
    <artifactId>hsqldb</artifactId>
    <version>2.2.8</version>
</dependency> 
```

如果你使用 hsqldb。

**编辑**

正如您在评论中提到的那样，您在评论中使用了 Oracle ... Oracle db 的 jdbc jar 随您的 Oracle 发行版一起提供。您也可以[在此处](http://www.oracle.com/technetwork/database/enterprise-edition/jdbc-112010-090769.html)下载。下载后，您必须手动将其放入本地 Maven 存储库中（如果您有 Maven 存储库管理器（Nexus、Archiva...），您也可以将其存储在 Maven 存储库管理器的第三方存储库中。另一种方法是使用`systemPath`声明添加依赖项：

```
<dependency>
   <groupId>com.oracle.jdbc</groupId>
   <artifactId>ojdbc6_g</artifactId>
   <version>11.2.0.2.0</version>
   <systemPath>"C:/ThirpartyJars/Oracle/ojdbc6_g.jar"</systemPath>
</dependency> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T06:52:34.013

替换你的依赖

```
 <dependency>
    <groupId>jdbc.artifact.groupid</groupId>
    <artifactId>jdbc-driver</artifactId>
    <version>1.0</version>
  </dependency> 
```

至

```
 <dependency>
     <groupId>com.oracle</groupId>
        <artifactId>ojdbc6</artifactId>
         <version>11.2.0</version>
   </dependency> 
```

# jmeter - JMeter - 非 HTTP 响应消息：URI 不能为空

> ID：12153436
> 
> 赞同：0
> 
> 时间：2012-08-28T05:50:32.510
> 
> 标签：jmeter

我需要使用 jmeter 测试 Web 登录，但这是结果树中的响应：

```
Thread Name: Thread Group 1-1
Sample Start: 1970-01-01 05:30:00 IST
Load time: 0
Latency: 0
Size in bytes: 1089
Headers size in bytes: 0
Body size in bytes: 1089
Sample Count: 1
Error Count: 1
Response code: Non HTTP response code: java.lang.IllegalArgumentException
Response message: Non HTTP response message: URI can't be null. 
```

响应标头：

```
HTTPSampleResult fields:
ContentType: 
DataEncoding: null 
```

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T06:02:01.790

您在 http 采样器中输入了错误的 url，检查字段：

*   主持人

*   港口

*   小路

另一种选择是阅读：

*   [http://jmeter.apache.org/usermanual/jmeter_proxy_step_by_step.pdf](http://jmeter.apache.org/usermanual/jmeter_proxy_step_by_step.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-28T08:58:13.963

我自己解决了这个问题，经过多次测试。尝试在记事本中打开文件并检查它，

链接应该是这种格式

“得到 /

“获取 /css/bootstrap.min.css

"GET /theme/css/daterangepicker/daterangepicker+AC0-bs3.css

并在访问日志采样器服务器中：如果您输入 ip，则仅适用于托管站点..example test.com。test.com 的地址根据我的测试它不起作用

# javascript - 显示较大的初始图像

> ID：12153438
> 
> 赞同：1
> 
> 时间：2012-08-28T05:50:52.417
> 
> 标签：javascript, jquery

我在页面加载时显示了第一个较大的图像，但是我想在单击缩略图时显示更大的图像，最初我不想在加载页面时显示任何更大的图像。最初只应显示缩略图。

这是尝试过的链接：

[http://jsfiddle.net/L7yKp/37/](http://jsfiddle.net/L7yKp/37/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T05:55:41.730

听起来你想要的是这样的：

[http://jsfiddle.net/L7yKp/38/](http://jsfiddle.net/L7yKp/38/)

```
$("#panel img").hide(); //<= remove the :not(first-child) filter

$("#thumbs .UiUx3DSSVFlow").click(function(){
    getIndex = $(this).index();
    $("#thumbs .clicked").removeClass('clicked');
    $("#panel img").fadeOut('fast').eq(getIndex).fadeIn();  
    $(this).addClass('clicked');     
});

//$("#thumbs .UiUx3DSSVFlow:first").click(); //<= don't simulate the first click
$(['next','prev']).each(function(){
    var that=this;
    $('.'+that).click(function(){
        $('#thumbs .clicked')[that]().click();
    });
});
​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T06:00:27.157

你只需要评论这一行 -

```
//$("#thumbs .UiUx3DSSVFlow:first").click(); 
```

并`$('#panel img').hide();`在开头添加

[**工作小提琴**](http://jsfiddle.net/L7yKp/39/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T06:18:39.167

在每个缩略图 div 中添加类似这样的内容：

```
rel="http://images1.videolan.org/images/largeVLC.png" 
```

要得到：

```
<div class="UiUx3DSSVFlow UiUx3DSSVItem UiUx3DSSVSelected" id="__item0-__set0-0" data--ui="__item0-__set0-0" rel="http://images1.videolan.org/images/largeVLC.png"> 
```

然后使用如下代码来延迟加载图像：

```
$("#thumbs .UiUx3DSSVFlow").click(function(){
    getIndex = $(this).index();
    $("#thumbs .clicked").removeClass('clicked');
    $("#panel img").attr("src",$(this).attr("rel")); 
    $(this).addClass('clicked');     
}); 
```

这里演示：

[http://jsfiddle.net/webwarrior/L7yKp/55/](http://jsfiddle.net/webwarrior/L7yKp/55/)

最初，您可以隐藏以下行以不显示任何内容：

```
//$(".displayimage").attr("src",$($("#thumbs .UiUx3DSSVFlow")[0]).attr("rel")); 
```

hth

# mysql - 对于基于回合的 Flash 游戏，轮询 MySQL 数据库是否足够？

> ID：12153439
> 
> 赞同：2
> 
> 时间：2012-08-28T05:51:02.040
> 
> 标签：mysql, actionscript-3, polling, multiplayer

我想将我的游戏开发扩展到多人游戏领域，但是我没有资金购买具有套接字的适当服务器，也没有时间了解它们的工作原理以及如何正确和安全地使用它们。

然而，我完全有能力通过 PHP 在 Flash 和 MySQL 之间以各种格式发送和接收数据。

如果我要创建一个回合制游戏，以这种方式（通过 PHP）轮询 MySQL 数据库是否合适？目前我正在考虑这些方面：

1.  两个玩家通过开放游戏的全球列表（相当标准的方法）等方式找到对方。
2.  在数据库中创建**遭遇**或类似行。
3.  该行将以 JSON 或 XML 格式存储有关轮到谁以及游戏当前状态的信息。该行还将包含来自每个玩家的时间戳，表示他们最后一次轮询数据库以获取游戏状态信息。当玩家完成他们的回合时，“回合”字段将切换。
4.  每个玩家都会轮询数据库，看看是否轮到他们了。如果是，则游戏状态信息将与他们结束最后一轮之前的游戏状态信息进行比较，并且将在屏幕上发生动作以反映差异。然后轮到他们开始并重复该过程。
5.  在轮询数据库时，如果对手没有在 120（任意）秒内轮询数据库，玩家将收到另一个玩家离开/超时/其他任何情况的通知。

这会太慢或不可靠吗？或者是否还有其他可以预见的问题，例如两个玩家同时轮询数据库的结果（不确定这是否重要）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T08:08:27.183

而不是轮询，我建议您研究一种允许将数据从服务器推送到 Flash 客户端的技术。最常见的两个选项是套接字连接或使用[实时消息传递协议](http://en.wikipedia.org/wiki/Real_Time_Messaging_Protocol)，[有关更多详细信息，请参阅此问题](https://stackoverflow.com/questions/7049018/realtime-update-and-push-data-in-as3)。这是使用 Flash 构建实时游戏的默认方法。

对于 PHP，有许多开源产品或框架支持基于 RTMP 的[AMF](http://en.wikipedia.org/wiki/Action_Message_Format)协议：

1.  [用于 PHP 的 WebORB](http://www.themidnightcoders.com/products/weborb-for-php/overview.html)
2.  [Zend Framework AMF](http://framework.zend.com/download/amf) Adob​​e Systems 为 Zend Framework 提供了对其开放的二进制操作消息格式 (AMF) 协议的支持。如果您已经使用 Zend Framework，这将非常有用。
3.  [amfPHP](http://www.silexlabs.org/amfphp/)
4.  [剑鱼](http://osflash.org/sabreamf)

我个人使用 Zend Framework AMF 效果很好，也听说过关于 WebORB 的好消息。我没有使用过其他 AMF 库。

关于您的具体问题：我不会将信息作为 JSON 或 XML 存储在数据库中，因为您想查询数据。将数据存储为本机 SQL 数据的效率要高得多。

这是一个[简短的示例，向您展示如何使用 Zend Framework AMF](http://corlan.org/2008/11/13/flex-and-php-remoting-with-zend-amf/)让您了解它的工作原理。

# opencl - __constant 内存的访问性能和 OpenCL 上的 __global 内存一样吗

> ID：12153443
> 
> 赞同：3
> 
> 时间：2012-08-28T05:51:23.093
> 
> 标签：opencl

我所知。CUDA 上的常量内存是一个特定的内存。它比全局内存更快。但在 OpenCL 的规范中。我得到以下的话。

> 或`__constant`常量地址空间名称用于描述分配在全局内存中并且在内核内部作为只读变量访问的变量

所以`__constant`记忆来自`__global`记忆。这是否意味着它与`__global`内存具有相同的访问性能？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T06:23:53.157

这取决于您使用的 OpenCL 平台的硬件和软件架构。例如，可以设想一种具有不需要参与缓存一致性的只读缓存的体系结构。这些缓存可用于常量内存，但不能用于全局内存。因此，您可能会看到对常量内存的更快访问。

话虽如此，我熟悉的架构都不是以这种方式运行的。所以这只是假设。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T09:05:13.363

OpenCL 标准没有指定如何实现常量内存，但在 NVIDIA GPU 中缓存常量内存。我不知道AMD是做什么的。

# java - 如何使用资源包设置 fx:value？

> ID：12153446
> 
> 赞同：3
> 
> 时间：2012-08-28T05:51:53.257
> 
> 标签：java, internationalization, javafx-2, fxml

在 java fx 中，可以使用 i18n 标签为组件使用`%key`符号。

例如 -

```
<Label layoutX="151.0" layoutY="14.0" text="%windowTitle">
   <font>
     <Font size="22.0" />
   </font>
</Label> 
```

是否可以将 i18n 用于组件值？

以下代码不起作用 -

```
<ChoiceBox layoutX="140.0" layoutY="67.0" prefWidth="164.0">
   <items>
     <FXCollections fx:factory="observableArrayList">
       <String fx:value="%listValue1" />
       <String fx:value="%listValue2" />
       <String fx:value="%listValue3" />
       <String fx:value="%listValue4" />
     </FXCollections>
   </items>
</ChoiceBox> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T13:05:28.407

AFAIK FXML 不支持元标记中的资源 ID，例如`fx:value`. 例如，请参阅[http://javafx-jira.kenai.com/browse/DTL-3699](http://javafx-jira.kenai.com/browse/DTL-3699)。

您可能需要在[http://javafx-jira.kenai.com提交增强请求](http://javafx-jira.kenai.com)

# android - Android：ProgressDialog 未显示在适配器类中

> ID：12153449
> 
> 赞同：5
> 
> 时间：2012-08-28T05:51:59.713
> 
> 标签：android, android-asynctask, android-adapter, android-context

在我的应用程序中，我有一个列表视图，每个项目都有一个按钮。如果用户单击按钮，我想执行一些 http 连接。所以我在 Adapter 类中使用 AsyncTask。现在的问题是没有显示进度对话框。

```
private class MyClass extends AsyncTask<Void, Long, Boolean> {
        private Context context;
        private ServerCall call = new ServerCall();
        private ProgressDialog progressDialog1;

        public MyClass(Context context) {
            this.context = context;
        }

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            try {
                progressDialog1 = ProgressDialog.show(context, "",
                        "Please wait...", true);
                progressDialog1.setIndeterminate(true);

            } catch (final Throwable th) {

            }

        }

        @Override
        protected void onProgressUpdate(Long... values) {

            super.onProgressUpdate(values);
        }

        @Override
        protected Boolean doInBackground(Void... params) {
            //some tasks

            return true;
        }

        @Override
        protected void onPostExecute(Boolean result) {
            if (mode.equalsIgnoreCase("History")) {

                Intent order = new Intent(context, ActicityA.class);
                order.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                context.startActivity(order);

            } else {
                Intent order = new Intent(context, ActivityB.class);
                order.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                context.startActivity(order);
            }

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:02:26.757

```
<pre><code>
public MyClass(Context context) {
        this.context = context;
        progressDialog1=new ProgressDialog(context);
    } 
```

@Override 受保护的无效 onPreExecute() {

```
 progressdialog1.setMessage("please wait while loading");
    progressdialog1.setIndeterminate(true);

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T06:11:25.500

试试这个

```
protected void onPreExecute() {
        dialog = new ProgressDialog(Activity.this);
        dialog.setMessage("Please wait...");
        dialog.setIndeterminate(true);
        //dialog.setCancelable(false);
        dialog.show();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T06:26:19.993

```
 Follow this steps 
    [0] start showing progressbar
    [1] Execute AsyncTask class
    [2] in this class one interface for post the response in main class 
    [3] Declare one interface class
    [4] get Reponse in Main Clss using interface 
    [5] dismiss Progressbar and Bind your Data 

    ex. 
    [0]

            progr.setVisibility(View.VISIBLE);
    [1]
                    MyTask task = new MyTask();
                task.setdata(new SendData() {
    [4]             @Override
                    public void GetStringResponse(String str) {
                        Log.i(General.TAG, TAG + " Overide GetString-"+str);                    
                        final String GetResponse=str;
                    // here you get response and parse it   
   [5]                               // here you can dismiss your progress bar                          
                    }
                });
                task.execute(new String[] {Newsurl[Id]});

    [2] Add interface here with Method

    SendData  objsend;

    @Override 
        protected void onPostExecute(String Result)
        {
            Log.i("**********", Result);        
            objsend.GetStringResponse(Result);  
        }

        public void setdata(SendData  sendd)
        {
            Log.i(General.TAG,TAG+"Initialise Interface object");
            objsend = sendd;
        }

 [3] interface class
     public interface SendData {    
    public  abstract void GetStringResponse(String str);
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-28T05:58:29.690

确实该`ProgressDialog.show()`方法返回一个`ProgressDialog`对象，但最好先创建一个 ProgressDialog 对象，例如：

```
ProgressDialog progressDialog1 = new ProgressDialog(); 
```

接着

```
progressDialog1 = ProgressDialog.show(context, "",
                        "Please wait...", true); 
```

而且，尝试通过调用它的方法来完成`progressDialog1`。`onPostExecute()``dismiss()`

# python - Celery - RabbitMQ 中的消息可以同时由两个或多个工作人员使用吗？

> ID：12153451
> 
> 赞同：13
> 
> 时间：2012-08-28T05:52:36.023
> 
> 标签：python, rabbitmq, celery, django-celery

也许我问这个问题很愚蠢，但在我做进一步的工作之前，我需要先了解基本概念。

我正在处理几千个 RSS 提要，使用多个 Celery 工作节点和一个 RabbitMQ 节点作为代理。每个提要的 URL 都作为消息写入队列中。工作人员只是从队列中读取 URL 并开始处理它。**我必须确保两个工作人员不会同时处理单个 RSS 提要。**

[确保一次只执行一个任务一](http://celery.readthedocs.org/en/latest/tutorials/task-cookbook.html#ensuring-a-task-is-only-executed-one-at-a-time)文提出了一种基于 Memcahced 的解决方案，用于在处理提要时锁定提要。

但我想了解的是，为什么我需要使用 Memcached（或其他东西）来确保 RabbitMQ 队列上的消息不会被多个工作人员同时使用。我可以在 RabbitMQ（或 Celery）中进行一些配置更改以实现此目标吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T09:29:30.063

在正常工作设置中，多个消费者肯定不会看到单个 MQ 消息。您必须为涉及失败/崩溃工人的案例做一些工作，阅读自动确认和消息拒绝，但基本案例是合理的。

我在您链接的文章中没有看到同步队列（阅读：MQ），因此（据我所知）他们使用锁定机制（阅读：memcache）进行同步，作为替代方案。我可以想到一些在适当的 MQ 设置中不会出现的问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T10:07:04.713

正如其他人所指出的，您正在混合苹果和橙子。

作为 celery 任务和 MQ 消息。

您可以确保一条消息将仅由一个工作人员同时处理。

例如。

```
@task(...)
def my_task(

my_task.apply(1) 
```

.apply 将消息发布到您正在使用的消息代理（rabbit，redis ...）。然后消息将被路由到一个队列并由一个工作人员使用。您不需要为此锁定，您可以免费获得它:)

celery cookbook 上的示例显示了如何防止两条类似的消息 (my_task.apply(1)) 同时运行，这是您需要在任务本身中确保的内容。

当然，您需要可以从所有工作人员（memcached，redis ...）访问的东西，因为它们可能在不同的机器上运行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T06:10:51.127

提到的示例通常用于其他目标：它​​阻止您使用具有相同含义的不同消息（不是相同的消息）。例如，我有两个进程：第一个进程将一些 URL 放入队列，第二个进程 - 从队列中获取 URL 并获取它们。如果第一个进程将一个 URL 排队两次（甚至更多次）会怎样？

PS我用于此目的的`Redis`存储和`setnx`操作（只能设置一次密钥）。

# java - 减少 getTableCellRendererComponent 调用次数

> ID：12153452
> 
> 赞同：5
> 
> 时间：2012-08-28T05:52:40.330
> 
> 标签：java, swing, jtable, tablecellrenderer

我正在使用实现 TableCellRenderer 并为每一行显示 JTextArea（而不是 JLabel）的自定义单元格渲染器。我基本上用我的方法覆盖了 getTableCellRendererComponent(...) 方法，它每行做了一些额外的计算。每次表更新时，这些计算只需进行一次。由于每次鼠标移动都会调用 getTableCellRendererComponent 方法，因此会出现延迟。所以我想我应该阻止调用 getTableCellRendererComponent 以避免滞后。

注意事项：

1）我的表只有 1 列，没有标题。

2) 我的数据是静态的，通过实现 AbstractTableModel 的自定义 tablemodel 类中的 getValueAt(int row, int column) 方法从 ArrayList 中读取。

3）我不需要监视鼠标运动事件。

4）我不希望有太多数据，所以我可能想一次显示整个表格或完全缓存它。

5）大多数延迟是由于每次从getTableCellRendererComponent返回时设置文本造成的，因为有些行使用从右到左的字符，而RTL文本需要额外的时间来渲染。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T05:58:56.293

不要试图限制`getTableCellRendererComponent`呼叫次数。相反，通过缓存计算结果来更好地实现渲染器。

您可以轻松地向 tablemodel 添加侦听器，以便您的渲染器知道模型何时更新。只有这样它才应该标记存储的计算结果无效，并在下次`getTableCellRendererComponent`调用时重新计算它们。

# multidimensional-array - 从 numpy 数组的每一列中查找值是基于比较另一个 numpy 数组的总和

> ID：12153453
> 
> 赞同：0
> 
> 时间：2012-08-28T05:52:41.733
> 
> 标签：multidimensional-array, filter, numpy, sum

我有形状为 3x3x3 的 numpy 整数数组“A”（例如）：

```
[[[***0***,1,0], [1,1,0], [0,1,1]]

[[***1***,1,0], [0,1,1], [0,0,1]]

[[***0***,1,0], [1,0,0], [1,0,0]]] 
```

另一个具有相同形状的浮点数组“B”：

```
[[[ ***0.19***,0.02,0.65],[ 0.88,0.11,0.07],[ 0.26,0.88,0.17]]

 [[ ***0.13***,0.20,0.48],[ 0.40,0.07,0.67],[ 0.31,0.47,0.01]]

 [[ ***0.40***,0.31,0.92],[ 0.45,0.26,0.53],[ 0.46,0.24,0.47]]] 
```

我需要以下内容：

- 沿第一个数组中的某个轴计算唯一值`A`（例如，, `value(0,0,0)`, :`value(1,0,0)``value(2,0,0))`

```
0, 1, 0 = > "0" - 2 values  and "1" – 1 value. 
```

- 从数组计算适当的总和`B`：

```
0 => 0.19+0.4 = 0.59; 1 => 0.13 
```

- 在数组 A 中找到最大和的值`B`：

```
0.59>0.13 => value 0 
```

对数组中的所有值进行此类计算的最有效方法是什么`A`？

我需要获取结果数组`([***0***,1,0,1,0,1,0,1,0])` ，例如数据。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T06:31:38.233

由于您必须读取每个值以求和或比较，因此该算法预计具有 O(n) 复杂度（其中 n 是矩阵中的项目总数）。在这里，您可以找到在 O(n) 时间内计算所需内容的过程：

对于矩阵`A[x][y][z]`，`B[x][y][z]`。假设 A 中的值在 0 到 9 之间变化。

由于您计算每个 y 轴的值，因此我们将获得`[x,z]`对的值：

```
x: order of tuple in horizontal 
z: order of value in that tuple 
```

首先，定义一个加权和数组，该数组保存每个 Y 轴上 A 中每个值的和值：`W[x][z][value]`

计算权重如下：

```
for(x=0; x<3; x++) 
{
    for(z=0; z<3; z++) 
    {
        for(y=0; y<3; y++) 
        {
            val = A[x][y][z];
            W[x][z][val] += B[x][y][z];
        }
    }
} 
```

然后使用这个加权和数组来计算 A 中的主要值：

```
for(x=0; x<3; x++) 
{
    for(z=0; z<3; z++) 
    {
        maxSum = 0;
        dominantValue = 0;
        for(val=0; val<10; val++)
        {
            if(W[x][z][val] > maxSum)
            {
                maxSum = W[x][z][val];
                dominantValue = val;
            }
        }
        result[x][z] = val;
        //OR: result[3*x+z] = val;
    }
} 
```

# asp.net - 从网络计算机访问 IIS 网站

> ID：12153454
> 
> 赞同：2
> 
> 时间：2012-08-28T05:52:46.103
> 
> 标签：asp.net, iis-7.5

我已经在我的本地电脑（IIS）中设置了一个网站。我可以使用我的计算机使用“http://localhost:8088”和“http://myip:8088”访问该站点，但我无法从网络中的另一台计算机访问该站点。谁能告诉我我该怎么做？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T05:57:49.930

如果您的 PC 在域中，您需要在位于另一台 PC的**hosts文件中添加您的 PC 的名称/网络名称和 IP。**`C:\Windows\System32\drivers\etc`还要确保在远程 PC 上打开的端口**8080可用。**如果 ICMP 数据包关闭，请确保另一台 PC 可以 ping 您的 PC 或至少连接到它。对于域中的多台 PC，我建议正确设置 DNS 和 IIS 设置，以便将您的 PC 暴露给所有人。

# sharepoint-2010 - 尝试在 sharepoint 中显示带有文本值和 url 的网格时使用什么功能？

> ID：12153457
> 
> 赞同：0
> 
> 时间：2012-08-28T05:53:23.443
> 
> 标签：sharepoint-2010

我是 sharepoint 2010 的新手，因此不确定要使用什么功能来进行以下操作：我正在尝试创建某种网格，其中包含文本值作为列标题和包含 URL 链接的行，但为了清楚起见，使用一些文本命名。例如：

Header1
link1
link2
我想要有多个这样的标题和行。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:12:37.500

您可能会发现使用 itemTemplate 查看名为 listview 的控件会很有帮助。它可以让您创建像名片或非常简单的行的外观

看看这里他们展示了他们所做的一些格式

[http://blogs.msdn.com/b/mikeormond/archive/2008/01/23/some-asp-net-3-5-listview-control-examples.aspx](http://blogs.msdn.com/b/mikeormond/archive/2008/01/23/some-asp-net-3-5-listview-control-examples.aspx)

# visual-studio-2010 - 视觉源安全到塑料 SCM 迁移

> ID：12153461
> 
> 赞同：1
> 
> 时间：2012-08-28T05:53:47.833
> 
> 标签：visual-studio-2010, version-control, visual-sourcesafe, plasticscm

我有一个由 3 名开发人员组成的团队，包括我自己，目前我们使用 VSS。当我们需要在开发生命周期中分支代码时，我们遇到了 VSS 问题。

在浏览了各种单片机的文档后，我们决定改用塑料单片机。

我们需要从 VSS 迁移到 Plastic SCM，在那里我们所有的变更控制历史也成功地迁移到新的 PLastic SCM 系统中。我找不到任何有关迁移到具有历史记录的塑料的文档。

在这方面的任何投入将不胜感激。

提前感谢您查找我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T09:14:44.973

没有直接的应用程序可以从 Visual Source Safe 迁移到 Plastic 4.0

您可以通过几个步骤来完成： 1.- 从 VSS 到 Git：因为没有从 VSS 迁移到 Git 格式的好方法。你可以找到像 vss2git (http://code.google.com/p/vss2git/) 这样的应用来制作这个部分。2.- 导出到快速导出 3.- 快速导入到 Plastic SCM v4

当你从 VSS 迁移到 Git 时，你可以阅读这篇文章，其中我们解释了如何从 git 导入或导出 repo：http: [//codicesoftware.blogspot.com/2011/10/connecting-plastic-scm- to-github.html](http://codicesoftware.blogspot.com/2011/10/connecting-plastic-scm-to-github.html)

如果您有任何问题，请随时与我们联系。塑料单片机论坛：[http ://www.plasticscm.net/](http://www.plasticscm.net/)

# php - AJAX json 数据不会在 PHP 中打印

> ID：12153465
> 
> 赞同：0
> 
> 时间：2012-08-28T05:54:05.770
> 
> 标签：php, javascript, arrays, json

我在 Javascript 中有一个 JSON 数据，使用 JSON.stringify 制作表单数组

```
{
   "user":"Mark",
   "id":"80",
   "0":["age","=","twenty four","varchar"],
   "1":["prefix","=","Mr.","enum"]
} 
```

我通过 AJAX 将其发送到 PHP 文件。当我回显 POST 时，我得到了值

```
echo (serialize($_POST['data']));

s:263:
"{
    "user":"Mark",
    "id":"80",
    "0":["age","=","twenty four","varchar"],
    "1":["prefix","=","Mr.","enum"]
 }"; 
```

如何在数组或对象中获取 POSTed 数据。我试过做

> var_dump(json_decode($_POST['data']));
> AND
> var_dump(json_decode(serialize($_POST['data']))); AND var_dump(json_decode($_POST['data'],true));

但他们没有工作。输出为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T05:58:07.937

如果您的 PHP 版本 >=5.2.0，您可以使用以下内置 PHP 函数来解码 JSONS

```
json_decode($_POST['data']) 
```

它返回 Array 和 StdClass 对象。

编辑：您是如何发现 json_decode 不起作用的。请尝试 ver_dump 或 print_r。希望你的 PHP 版本 >=5.2.0

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T05:58:21.210

[json_decode()](http://php.net/manual/en/function.json-decode.php)应该为您解决问题，但取决于您的服务器配置（如果[magic_quotes_gpc](http://php.net/manual/en/security.magicquotes.php)已打开），您可能需要在解码之前使用[stripslashes() 。](http://php.net/manual/en/function.stripslashes.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T05:58:49.077

你必须把它存储到某个东西上。

```
$posted = json_decode($_POST['data']);
var_dump($posted); 
```

# winapi - GetDC 与 BeginPaint 性能注意事项

> ID：12153472
> 
> 赞同：3
> 
> 时间：2012-08-28T05:55:00.747
> 
> 标签：winapi, gdi+, gdi, wm-paint

MSDN 和许多帖子都建议在 WM_PAINT 中使用 BeginPaint/EndPaint。我还看到很多地方表明如果在绘画中使用双缓冲，那么在 WM_CREATE 中初始化 DC 和内存分配并在 WM_PAINT 中重用这些句柄会更有意义。

例如，使用 BeginPaint，我通常会看到：

```
case WM_PAINT:
hdc = BeginPaint(hWnd, &ps);
MemDC = CreateCompatibleDC(hdc);
bmp = CreateCompatibleBitmap(hdc, width, height);
oldbmp = SelectObject(MemDC,bmp);
g = new Graphics(MemDC);

//do paint on bmp
//blt bmp back to hdc

EndPaint(hWnd, &ps);
DeleteObject(bmp);
g->ReleaseHDC(MemDC);
DeleteDC(MemDC);
delete g; 
```

为了保存初始化和拆除，是否可以这样做：

```
case WM_CREATE:
hdc   = GetDC(hWnd);
//create memDC and graphics object references ...
case WM_DESTROY
//delete memDC and graphics object references...
case WM_PAINT
BeginPaint(hWnd, &ps);
//use previously create mem and graphics object to paint 
EndPaint(hWnd, &ps); 
```

所以我们只使用 EndPaint 来清除更新区域，但将绘图委托给先前创建的对象。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T06:11:08.830

不，这是一个非常糟糕的做法。这首先是由于设备上下文具有错误的剪辑区域而出错，当用户调整窗口大小时，您无法正确绘制窗口。

第二个问题是更新区域裁剪不会生效，PAINTSTRUCT.rcPaint。当更新区域只是窗口的一部分时，防止 Windows 可能自动执行的任何可能的绘制优化。

第三个问题是您不必要地持有操作系统资源。所有 GDI 对象都分配在单个堆中，该堆由运行在同一桌面上的所有进程共享。

创建 HDC 非常便宜，需要时创建。更不用说 PAINTSTRUCT.hdc 了，你会得到一个盘子，随时可以使用。

# jquery - jQuery 移动日期框

> ID：12153473
> 
> 赞同：0
> 
> 时间：2012-08-28T05:55:03.823
> 
> 标签：jquery, jquery-mobile, datebox

我正在使用jquery-mobile datebox 插件，即slidebox 模式。问题是我只需要选择一个分钟范围（0-15、15-30、30-45、45-60）。是否有可能以某种方式将默认分钟范围更改为上面给出的？

# javascript - 登录网站后如何跟踪用户？

> ID：12153476
> 
> 赞同：0
> 
> 时间：2012-08-28T05:55:36.367
> 
> 标签：javascript, google-analytics, google-analytics-api

下面是跟踪有多少客人访问了我的页面的代码？

```
<script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-18841631-1']);

    _gaq.push(['_setCustomVar',1,'Status','Logged-in',1]);

    _gaq.push(['_trackPageview']);

    (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
         })();
    </script> 
```

登录网站后如何跟踪用户？

登录后跟踪用户的所有步骤都必须遵循......请指导我......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T07:20:55.430

用户登录后跟踪的最佳方式是 session 。当用户成功登录时，只需根据您的需要创建和维护会话变量。

# jquery - jquery：我的 jquery“悬停在插件上”的 X 和 Y 坐标不起作用

> ID：12153483
> 
> 赞同：2
> 
> 时间：2012-08-28T05:56:13.070
> 
> 标签：jquery, plugins

我有一个 jquery 插件，它为 A 标签创建一个悬停在文本框上。

该插件的工作原理是从 A 标签的“标题属性”中提取文本，然后将其放入 div 标签（称为#hoverText）中。#hoeverText div 标签“绝对定位”距离 A 标签的 X 和 Y 坐标 10px。

但是，我的这部分代码不起作用，我不知道如何修复它。hoverText div 标签似乎停留在页面顶部。因此，如果我在页面底部有一个 A 标签，则 hoverText div 标签将不可见，因为它位于页面顶部

我已在此页面底部放置了我的插件的副本，非常感谢任何建议或帮助。

```
(function ($) {

$.fn.hoverText= function() {

 $(this).after('<div id="hoverText"></div>' );

//  if (title != undefined || title != ''){
    $(this).mouseover(function(){

      title = $(this).attr ('title');
      $(this).attr( 'title', '');  

    }).mousemove(function(e) {

    var top= e.clientY + 10;
    var left= e.clientX + 10;

//  $('#pos').text(top + '  ' + left );

$('#hoverText').css('top', top).css('left', left ).text(title).show();
}).mouseout(function() {

    $(this).attr('title',  title );
    $('#hoverText').hide(); 

    });

}
}) (jQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T06:26:05.900

变量 title、top 和 left 必须声明为全局变量，以便它们可以在每个函数中使用。

# android - 运行应用程序后如何显示通知？

> ID：12153487
> 
> 赞同：1
> 
> 时间：2012-08-28T05:56:44.500
> 
> 标签：android, leadbolt

嗨，我是 android 编程和leadbolt 方面的新手。

我已经成功地为广告、横幅和墙壁创建了示例应用程序。现在我正在为我真的有问题的通知创建。

我使用最新的leadbolt sdk（3.06）和通知我使用**pubxapp.jar**。

在我的设置中，我将通知类型设置为**按需**，这样我就可以在我的应用程序运行时看到通知。

在我的主要活动课上：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // I used the actual leadbolt section id in my actual sample app.
    myController = new AdController(getApplicationContext(), "MY_LEADBOLT_SECTION_ID");
    myController.loadNotification();
} 
```

在我的清单中：

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
<uses-permission android:name="android.permission.WAKE_LOCK" />
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />

<application
    ...
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <receiver android:name="com.pad.android.xappad.AdNotification" />
    <receiver android:name="com.pad.android.xappad.AdReminderNotification" />
    <receiver android:name="com.example.leadbolttestappnotification.BootReceiver" >
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED" />
        </intent-filter>
    </receiver>
</application> 
```

# email - 如何将我的域添加到 Google 的 TXT SPF 记录？

> ID：12153488
> 
> 赞同：0
> 
> 时间：2012-08-28T05:56:51.090
> 
> 标签：email, sendmail, record, google-apps, spf

我已经为我的 Google Apps 邮件设置了 SPF TXT 记录，一切正常，但是我需要使用 php 的 mail() 从我的 webapp 发送电子邮件，所以我需要将我的主机域（比如`entity.ca`）添加为允许的发件人. 我该怎么做呢？

如果 Google Apps 文档中的原始记录是`v=spf1 include:_spf.google.com ~all`，则以下内容对于添加我的域是否正确：

```
v=spf1 a:entity.ca include:_spf.google.com ~all 
```

抱歉，我找到了[http://www.zytrax.com/books/dns/ch9/spf.html](http://www.zytrax.com/books/dns/ch9/spf.html)和[我的域的 SPF 记录应该使用什么？](https://stackoverflow.com/questions/8543259/what-should-i-use-for-spf-record-of-my-domain)在谷歌上，但它很混乱。

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T05:58:05.007

这是不可能的。只需使用一个不错的 smtp 库并通过 google 邮件 smtp 服务器发送您的邮件。

```
require_once "Mail.php";

$from = "Sandra Sender <sender@example.com>";
$to = "Ramona Recipient <recipient@example.com>";
$subject = "Hi!";
$body = "Hi,\n\nHow are you?";

$host = "mail.example.com";
$username = "smtp_username";
$password = "smtp_password";

$headers = array ('From' => $from,
   'To' => $to,
   'Subject' => $subject);
$smtp = Mail::factory('smtp',
   array ('host' => $host,
     'auth' => true,
     'username' => $username,
     'password' => $password));

$mail = $smtp->send($to, $headers, $body);

if(PEAR::isError($mail)) {
    echo("<p>" . $mail->getMessage() . "</p>");
} else {
    echo("<p>Message successfully sent!</p>");
} 
```

[[来源和更多信息]](http://email.about.com/od/emailprogrammingtips/qt/PHP_Email_SMTP_Authentication.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T06:51:42.130

使用[http://www.kitterman.com/spf/validate.html （在](http://www.kitterman.com/spf/validate.html)[http://www.gadgetwiz.com/network/netmask.html](http://www.gadgetwiz.com/network/netmask.html)的帮助下），这是我想出的：

`v=spf1 ip4:68.178.232.100 include:_spf.google.com ~all`

希望这可以帮助同一泡菜中的任何人。:D

# c# - 可更改的配置值

> ID：12153489
> 
> 赞同：0
> 
> 时间：2012-08-28T05:57:12.257
> 
> 标签：c#, asp.net, configuration, configuration-files

我需要存储一些将由应用程序管理员更改的配置值。我不想将它们存储在 web.config 文件中，因为无论何时编辑 web.config 文件，系统都会重新编译应用程序。

DBA 不允许我创建一个表来将其存储在数据库中。

你能建议一些我可以存储这个可编辑值的方法吗？

感谢您的建议。

它是一个 ASP.NET 应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T05:59:26.403

您可以将它们存储在您自己的配置文件中。例如，您可以将此文件放在`~/App_Data`文件夹中，然后在需要值时读取配置文件。就这个文件的格式而言，您有很多选择：纯文本、XML、JSON，任何您喜欢的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T06:06:17.583

作为替代方案，您可以编写自己的`ConfigSection`并设置`restartOnExternalChanges="false"`.

然后，在阅读具有`ConfigurationManager.GetSection("yourSection")`设置的部分时，将自动刷新而无需重新启动应用程序。

如果您仍然希望保持 web.config 不变，您可以使用[configSource](http://msdn.microsoft.com/en-us/library/system.configuration.sectioninformation.configsource.aspx)属性来设置将保留您的设置的外部文件。

要设计一个新部分，您可以使用此工具：[http ://csd.codeplex.com/](http://csd.codeplex.com/)

# php - 在 exec 上结合 unix 命令

> ID：12153496
> 
> 赞同：0
> 
> 时间：2012-08-28T05:57:52.290
> 
> 标签：php, unix, exec, cp

我`exec()`用来执行这个`cp`UNIX 命令：

```
 $path = "/var/www/copy_dir/";
  $pp = "cp -R /var/www/top_folder/mid_folder/base_folder/".$user_id."/* ".$path;
  exec($pp, $ax, $ay);
  if($ay === 0) {
    return "done";
  } else {
    return "error";
    exit;
  } 
```

这很好用，它可以满足我的需要，但是，我想在复制之前首先执行`rm -rf`（或其他更安全的方法来清除目录的内容） 。`$path`我可以把它和我的电流结合起来`$pp`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T06:01:30.933

是的，如果您想无条件地执行这两个命令，只需使用分号即可。或者（如 g13n 所述）双 & 号，如果第一个命令成功，它将只执行第二个命令。

```
$path = "/var/www/copy_dir/";
$pp = "rm -rf '$path*' && cp -R /var/www/top_folder/mid_folder/base_folder/".$user_id."/* ".$path;
exec($pp, $ax, $ay);
if($ay === 0) {
    return "done";
} else {
    return "error";
    exit;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T06:01:01.057

你的意思是先清除目录吗？

```
$pp = "rm -rf $path && cp -R /var/www/top_folder/mid_folder/base_folder/$user_id/* $path"; 
```

# twitter-bootstrap - Twitter 引导模式外部 URL 不起作用

> ID：12153503
> 
> 赞同：11
> 
> 时间：2012-08-28T05:58:32.487
> 
> 标签：twitter-bootstrap, modal-dialog

Twitter 引导模态不会在模态中加载外部 URL。

示例代码：[jsFiddle](http://jsfiddle.net/kV8hB/2/)

```
<a data-toggle="modal" class="btn" href="http://stackoverflow.com" data-target="#myModal">click me</a>
<div class="modal hide fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel">Modal header</h3>
  </div>
  <div class="modal-body">
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-28T06:19:10.513

这不起作用，因为您违反了阻止您发送跨域 AJAX 请求的[同源策略限制，而这正是引导程序在此处使用的。](http://en.wikipedia.org/wiki/Same_origin_policy)因此，一种可能性是将外部内容加载到`<iframe>`：

```
$('a.btn').on('click', function(e) {
    e.preventDefault();
    var url = $(this).attr('href');
    $('.modal-body').html('<iframe width="100%" height="100%" frameborder="0" scrolling="no" allowtransparency="true" src="' + url + '"></iframe>');
});​ 
```

请注意，某些网站（例如 google、stackoverflow、facebook、...）无法加载到 iframe 中。他们将`X-Frame-Options`响应 HTTP 标头设置为`SAMEORIGIN`并检查它们是否加载到`iframe`.

你可以在这个小提琴中看到它的作用：http: [//jsfiddle.net/f2Fcd/](http://jsfiddle.net/f2Fcd/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T12:20:02.840

试试这个：

```
<script type="text/javascript" charset="utf-8">
$(function() {
 $('*[data-modal]').click(function(e) {
 e.preventDefault();
 var href = $(e.target).attr('href');
  if (href.indexOf('#') == 0) {
   $(href).modal('show');
  } else {
    $.get(href, function(data) {
    $('<div class="modal">' + data + '</div>').modal('show').appendTo('body');
                        });
                    }
                });
            });
        </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-04T11:13:17.157

此代码段有助于通过 Ajax 获取模式内容：

```
$.get(href, function(response) {
     $("#myModal .modal-content").html(response);
}); 
```

请记住，`response`获取的 HTML 必须包含通常存在于“modal-content”元素中的 dom 元素：

```
 <div class="modal-header">HEADER</div>
 <div class="modal-body">BODY</div>
 <div class="modal-footer">
     <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
     <button type="button" class="btn btn-primary">Do It</button>
 </div> 
```

# macos - 在沙盒应用中访问桌面

> ID：12153504
> 
> 赞同：6
> 
> 时间：2012-08-28T05:58:36.997
> 
> 标签：macos, sandbox, nsmetadataquery

我正在构建一个具有打开新截屏功能的应用程序。我想使用 Mac App Store 分发它。不幸的是，它需要被沙盒化。

为了找到新的截图，我运行了一个 NSMetaDataQuery。它返回一些条目，但不幸的是我无法获取它们的 URL，因为它们在桌面上（在我的应用程序的沙箱之外）。

我怎样才能解决这个问题 ？

这是一些代码

```
query = [[NSMetadataQuery alloc] init];

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(queryUpdated:) name:NSMetadataQueryDidStartGatheringNotification object:query];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(queryUpdated:) name:NSMetadataQueryDidUpdateNotification object:query];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(queryUpdated:) name:NSMetadataQueryDidFinishGatheringNotification object:query];

[query setDelegate:self];
[query setPredicate:[NSPredicate predicateWithFormat:@"kMDItemIsScreenCapture = 1"]];
[query startQuery]; 
```

* * *

```
numberOfScreenshots = [query resultCount];
[self uploadToAmazonS3:[[[query results]objectAtIndex:([query resultCount]-1)]valueForAttribute:NSMetadataItemURLKey]]; 
```

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-28T08:41:20.473

无需征得用户许可，您只能访问“音乐”、“电影”、“图片”和“下载”文件夹。 ![权利](../Images/bd6b69148a282bb90618911e36438a08.png)

您必须要求用户授予您对桌面文件夹的访问权限。然后使用称为*Security-Scoped Bookmarks 的机制，在*[AppSandboxDesignGuide](http://developer.apple.com/library/mac/#documentation/Security/Conceptual/AppSandboxDesignGuide/DesigningYourSandbox/DesigningYourSandbox.html)中阅读更多信息。

1.  使用 NSOpenPanel 选择目录。
2.  保存书签以备将来使用，例如在 NSUserDefaults 中。
3.  获取访问权限

1 和 2

```
 NSOpenPanel *openPanel = [[NSOpenPanel alloc] init];
    [openPanel setCanChooseFiles:NO];
    [openPanel setCanChooseDirectories:YES];
    [openPanel setCanCreateDirectories:YES];

    [openPanel beginWithCompletionHandler:^(NSInteger result){
        if (result == NSFileHandlingPanelOKButton) {
            for (NSURL *fileURL in [openPanel URLs]) {
                NSString *filename = [fileURL path];
                [[NSUserDefaults standardUserDefaults] setObject:filename forKey:@"PathToFolder"];

                NSError *error = nil;
                NSData *bookmark = [fileURL bookmarkDataWithOptions:NSURLBookmarkCreationWithSecurityScope
                     includingResourceValuesForKeys:nil
                                      relativeToURL:nil
                                              error:&error];
                if (error) {
                    NSLog(@"Error creating bookmark for URL (%@): %@", fileURL, error);
                    [NSApp presentError:error];
                } else {
                    [[NSUserDefaults standardUserDefaults] setObject:bookmark forKey:@"PathToFolder"];
                    [[NSUserDefaults standardUserDefaults] synchronize];
                }
                break;
            }
        }        
}]; 
```

3.

```
 NSError *error = nil;
    NSData *bookmark = [[NSUserDefaults standardUserDefaults] objectForKey:@"PathToFolder"];
    bookmarkedURL = [NSURL URLByResolvingBookmarkData:bookmark options:NSURLBookmarkResolutionWithSecurityScope relativeToURL:nil bookmarkDataIsStale:nil error:&error];
    BOOL ok = [bookmarkedURL startAccessingSecurityScopedResource];
    NSLog(@"Accessed ok: %d %@", ok, [bookmarkedURL relativePath]); 
```

所以，就这样吧。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-18T02:31:36.587

允许访问后，您还需要获取真实主文件夹的路径 - 所有其他文件 API 仅提供沙盒文件夹的路径，即使启用了对真实主文件夹的访问也是如此。为了解决这个烦人的问题，Apple 建议这样做来获取真正的主文件夹：

```
#include <sys/types.h>
#include <pwd.h>

const char *home = getpwuid(getuid())->pw_dir;
NSString *path = [[NSFileManager defaultManager] 
                  stringWithFileSystemRepresentation:home
                  length:strlen(home)];
NSString *realHomeDirectory = [[NSURL fileURLWithPath:path isDirectory:YES] path]; 
```

# android - 如何在运行时更改进度对话框的内容？

> ID：12153509
> 
> 赞同：0
> 
> 时间：2012-08-28T05:59:03.913
> 
> 标签：android, dialog

我需要在同步活动运行时更改进度对话框的内容，它在完成后显示“同步数据”，它用于另一个后台活动，并且仍然显示相同的文本我想要的是在它进入其他背景时更改文本任务？

```
protected void onPreExecute() {
        mDialog = ProgressDialog.show(viewContext, "", "Synchronizing Data",
                true);

    };

    /*
     * (non-Javadoc)
     * 
     * @see android.os.AsyncTask#doInBackground(Params[])
     */
    @Override
    protected Boolean doInBackground(Void... arg0) {
        if (type.contains("ferry")) {
            return SynchronizeRepositoryFerry(false);

        } else {
            boolean value = SynchronizeRepositories(false, initialSync);
            mDialog.setTitle("Loading Images");//FROM HERE I WANT TO CHANGE DIALOG

            com.jumbybay.businessobjects.User user = new com.jumbybay.businessobjects.User();
            DatabaseHelper dbHelper = new DatabaseHelper(viewContext);
            IUserRepository repository = dbHelper.getUserRepository();
            List<com.jumbybay.businessobjects.User> imageList;
            try {
                int id;
                String url = "http://i.zdnet.com/blogs/3-29-androids.jpg";
                imageList = repository.Retrieve();
                for (int i = 0; i < imageList.size(); i++) {
                    user = imageList.get(i);
                    // url = user.getPicture();
                    id = user.getId();
                    fetchImage fetch = new fetchImage();
                    fetch.savesd(id, url);

                }
            } catch (SQLException e) {
                // TODO Auto-generated catch block// url = user.getPicture();
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            return value;

        }

    }

    protected void onProgressUpdate(Integer... progress) {
        mDialog.setTitle("lOADING IMAGES...");

    }
    /*
     * (non-Javadoc)
     * 
     * @see android.os.AsyncTask#onPostExecute(java.lang.Object)
     */
    @Override
    protected void onPostExecute(Boolean result) {
        this.syncComplete = result;
        mDialog.dismiss();
        Intent intent = new Intent();
        intent.setClass(viewContext, classType);
        viewContext.startActivity(intent);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T06:16:35.477

你试过这样用吗

```
mDialog.setTitle("Loading Images");
 mDialog.show(); 
```

# iphone - iOS：将所有 gmail 联系人提取到您的 iOS 应用程序中

> ID：12153510
> 
> 赞同：0
> 
> 时间：2012-08-28T05:59:06.877
> 
> 标签：iphone, ios, xcode, gdata

我已经通过 gdata-objectivec-client 但我没有任何方法将 gdata api(framework) 包含到我的 iPhone 应用程序中，因为 Gdata.framework 文件为红色意味着下载的源代码中缺少

我还下载了示例代码（http://gdata-objectivec-client.googlecode.com/svn/trunk/），但它们都没有在模拟器上运行

请帮助我提供任何教程或示例代码提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T06:40:41.433

嗨，Dinesh，我不确定您是否已经解决了您的问题，但要解决这个问题，您可以做的是打开 Xcode 主页窗口，选择名为“连接到存储库”的第二个选项并将链接粘贴到位置，然后单击结帐。选择要导入的目的地。你完成了。它对我来说效果很好。希望能帮助到你

# c# - Windows 应用程序将数据保存到多个表中

> ID：12153513
> 
> 赞同：0
> 
> 时间：2012-08-28T05:59:17.827
> 
> 标签：c#, c#-4.0, entity-framework-4.1

我目前正在使用实体框架开发 C#，

我有 2 个名为`Tab_1`和的表`Tab_2`。单击保存按钮时，表格`Tab_1`保存，之后我必须添加`Tab_1's`最后输入的主键值，以保存到`Tab_2`.

我试过这个，但我得到了错误。

示例代码：

```
Tab_1 t1 = new Tab_1();
//t1.a1 is auto generated primary key
t1.a = txt1.Text;
t1.b = text = txt2.Text;
context.tab_1.AddObject(t1);
context.savechanges();

Tab_2 t2 = new Tab_2();
t2.id = t1.a1;
t2.name = txt3.Text;
context.savechanges(); 
```

不幸的是，最后一行`context.savechanges()`引发了以下错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 ' 附近使用的正确语法

# php - 对等方重置连接：mod_fcgid：从 FastCGI 服务器读取数据时出错

> ID：12153518
> 
> 赞同：55
> 
> 时间：2012-08-28T05:59:45.270
> 
> 标签：php, apache, mod-fcgid

我在 PHP 上遇到问题，我的应用程序尝试运行 php 备份文件并突然收到 HTTP 错误 500 代码。我检查了日志，这就是它所说的。

> [Tue Aug 28 14:17:28 2012] [warn] [client xxxx] (104) Connection reset by peer: mod_fcgid: error reading data from FastCGI server, referer: [http://example.com/backup/backup.php](http://example.com/backup/backup.php)
> [2012 年 8 月 28 日星期二 14:17:28] [错误] [客户端 xxxx] 脚本头过早结束：backup.php，引用者：[http ://example.com/backup/backup.php](http://example.com/backup/backup.php)

任何人都知道如何解决这个问题？我真的被困在这里，无法在互联网上找到解决方案。

希望任何人都可以分享他们的知识。

谢谢。詹姆士

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-30T08:15:34.640

I managed to solved this by adding **FcgidBusyTimeout** . Just in case if anyone have similar issue with me.

Here is my settings on my apache.conf:

```
<VirtualHost *:80>
.......
<IfModule mod_fcgid.c>
FcgidBusyTimeout 3600
</IfModule>
</VirtualHost> 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-10-07T09:53:57.683

我在 Apache2 日志文件中有非常相似的错误：

```
(104)Connection reset by peer: mod_fcgid: error reading data from FastCGI server
Premature end of script headers: phpinfo.php 
```

检查包装脚本和 Apache2 设置后，我意识到 /var/www/ 没有一致的权限。因此根本无法读取 FCGId Wrapper 脚本。

```
ls -la /var/www
drwxrws---  5 www-data     www-data     4096 Oct  7 11:17 . 
```

当然，我的场景`chmod -o+rx /var/www`是必需的，因为使用的 SuExec 用户不是`www-data`用户组的成员 - 当然，出于安全原因，他们不应该是成员。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-07-09T17:04:34.350

如果要安装 PHP 版本 < 5.3.0，则必须替换

```
--enable-cgi 
```

和：

```
--enable-fastcgi 
```

在您的`./configure`声明中，摘自 php.net 文档：

```
--enable-fastcgi 
```

如果启用，CGI 模块也将支持 FastCGI。自 PHP 4.3.0 起可用

自 PHP 5.3.0 起，此参数不再存在，而是由 --enable-cgi 启用。编译后`./php-cgi -v`应该是这样的：

```
PHP 5.2.17 (cgi-fcgi) (built: Jul  9 2013 18:28:12)
Copyright (c) 1997-2010 The PHP Group
Zend Engine v2.2.0, Copyright (c) 1998-2010 Zend Technologies 
```

通知 (cgi-fcgi)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-09-27T08:06:21.630

我遇到了这个问题，并意识到文件 cgi-bin/php-fcgi 没有执行权限。

它有 644 模式，而应该有 755 模式。

设置正确的模式是不可能的（可能是因为文件已打开或某事），所以我从另一个域目录复制了该文件，该目录已经设置了正确的权限并修复了所有问题。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-07-03T14:36:13.180

我用不同的简单解决方案遇到了同样的问题。

### 问题

[我在 Ask Ubuntu 上](https://askubuntu.com/questions/756181/installing-php-5-6-on-xenial-16-04)接受了这个问题的答案后安装了 PHP 5.6 。在使用 Virtualmin 将特定虚拟服务器从 PHP 5.5 切换到 PHP 5.6 后，我收到了 500 Internal Server Error 并且在 apache 错误日志中有相同的条目：

```
[Tue Jul 03 16:15:22.131051 2018] [fcgid:warn] [pid 24262] (104)Connection reset by peer: [client 10.20.30.40:23700] mod_fcgid: error reading data from FastCGI server
[Tue Jul 03 16:15:22.131101 2018] [core:error] [pid 24262] [client 10.20.30.40:23700] End of script output before headers: index.php 
```

### 原因

简单：**我没有安装`php5.6-cgi`数据包**。

### 使固定

安装数据包并重新加载 apache 解决了问题：

*   `sudo apt-get install php5.6-cgi`如果您使用的是**PHP 5.6**

*   `sudo apt-get install php5-cgi`如果您使用**不同的 PHP 5 版本**

*   `sudo apt-get install php7.0-cgi`如果您使用的是**PHP 7**

然后用于`service apache2 reload`应用​​配置。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-28T06:34:04.280

Not in [this questions askers case](https://stackoverflow.com/a/12192622/367456) but often:

> What does the *"premature end of script headers"* error mean?

That error means that the FCGI call was exited unexpectedly.

In some cases it means that the script "backup.php" did crash.

> How to fix this?

If the crash of a script was the cause, fix the script so that it does not crash. Then this error is fixed, too. To find out *if* and *why* a script crashes, you need to debug it. For example you can check the PHP error log. Errors logged to STDERR normally go into the error handler of the FCGI.

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-03-24T03:14:10.723

著名的 Moodle "replace.php" 脚本也可以产生这种情况。对我来说，它需要很长时间才能运行，然后在浏览器中出现 500 条消息并且在我的 apache 错误日志文件中出现上述错误消息。

我跟进了@james-wise 的回答： 在[Apache 文档](http://httpd.apache.org/mod_fcgid/mod/mod_fcgid.html#fcgidbusytimeout)`FcgidBusy`中有可读的描述。我试过这个：通过在 /etc/apache2/mods-available/fcgid.conf 中插入以下行，将 apache 给我的脚本运行的时间加倍

```
FcgidBusyTimeout 600 
```

然后我重新启动 Apache 并尝试再次运行我的 replace.php 脚本。

幸运的是，这次脚本实例运行完成，因此出于我的目的，这是一个解决方案。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-02-14T13:16:56.607

对于长时间运行的脚本，我遇到了同样的问题，在 error_log 中出现错误消息“脚本头过早结束：index.php”和“对等方重置连接：mod_fcgid：从 FastCGI 服务器读取数据时出错”。经过数小时的测试，这对我有帮助（CentOS 6、PHP-FPM 7、Plesk 12.5.30）：

编辑配置文件：

> > /etc/httpd/conf.d/fcgid.conf

设置更高的运行时间。在我的情况下 600 秒

创建新条目：

> > FcgidBusyTimeout 600

调整以下条目：

> > FcgidIO超时 600
> > 
> > FcgidConnectTimeout 600

重启httpd：

> > 服务 httpd 重启

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-09-20T11:48:29.320

我在调试 virtualmin/apache 相关错误时遇到了这个问题。

就我而言，我正在运行 virtualmin 并在我的虚拟机的 php.ini 中设置了 safe_mode=On。

在我的虚拟机的错误日志中，我得到了对等方重置的 fcgi 连接：mod_fcgid：从 FastCGI 服务器读取数据时出错

在我的主要 apache 错误日志中，我得到： PHP Fatal error: Directive 'safe_mode' is no longer available in PHP in Unknown on line 0

就我而言，我只是在我的 php.ini 中设置了 safe_mode = Off 并重新启动了 apache。

stackoverflow.com/questions/18683177/where-to-start-with-deprecated-directive-safe-mode-on-line-0-in-apache-error

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-02-01T08:31:01.197

在 CentOS 发行版中，suexec 被编译为仅在 /var/www 中运行。如果您尝试在其他地方设置 DocumentRoot，则必须重新编译它 - apache 日志中的错误是：(104)Connection reset by peer: mod_fcgid: error reading data from FastCGI server Premature end of script headers: php5.fcgi

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-10-19T21:22:09.313

只需在 debian 中安装 php5-cgi

```
sudo apt-get install php5-cgi
```

在 Centos

```
须藤百胜安装php5-cgi
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-12-30T11:04:43.050

检查 /var/lib/php/session 及其权限。该目录应该是用户可写的，以便可以存储会话

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-06-20T16:34:23.997

如前所述，这可能是由于 fcgi 处理程序权限问题而发生的。如果您使用的是 suexec - 不要忘记检查 apache 是否启用了此模块。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-03-09T20:24:57.227

如果您在像我这样的共享服务器上，主机说这是达到内存限制的结果，因此他们会杀死脚本，从而导致在此错误中看到“脚本头过早结束”。他们向我推荐了这个：

[https://help.dreamhost.com/hc/en-us/articles/216540488-Why-did-procwatch-kill-processes-on-my-Shared-serv](https://help.dreamhost.com/hc/en-us/articles/216540488-Why-did-procwatch-kill-processes-on-my-Shared-serv)

考虑到内存的增加，问题就解决了。我认为 wordpress 上的备份插件 Updraft 可能在其职责/设置方面过于热情。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-03-11T13:50:50.360

在我的例子中，我为我的 PHP 文件使用了自定义扩展，我必须编辑`/etc/apache2/conf-available/php7.2-fpm.conf`并添加以下代码：

```
 <FilesMatch ".+\.YOUR_CUSTOM_EXTENSION$">
        SetHandler "proxy:unix:/run/php/php7.2-fpm.sock|fcgi://localhost"
    </FilesMatch> 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-06-17T22:08:05.243

我已经尝试了我在这个问题上找到的大多数答案。我的问题是 wp-cron.php 执行特定功能。

我正在开发 Plesk CentOS7，Apache 服务器。

我使用[了这个相关的问题和建议的答案](https://stackoverflow.com/questions/14488567/premature-end-of-script-headers-index-php-mod-fcgid-read-data-timeout-in-61-s)来帮助我了解如何使用命令行调整 fcgid.conf 内存限制。

在尝试对 fcgid.conf 文件 ( `/etc/httpd/conf.d/fcgid.conf`) 的限制进行故障排除并优雅地重新启动 apache 时，我发现没有任何变化。

在看到其他 cron 作业正常运行后，我决定回顾我声明的函数`functions.php`，发现声明的一些参数没有正确指定，因此发生了一个循环，最终导致超时。

修复此问题并再次运行 cron 后，它按应有的方式运行。

希望这可以帮助处于类似位置的其他人！

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2018-01-04T16:56:56.837

我将最大执行时间增加到 600 秒完成！

![plesk 17 - 受域影响](../Images/541865f03585811cd6cfc72c2f021d96.png)

* * *

## 回答 #18

> 赞同：-2
> 
> 时间：2015-03-23T11:13:07.517

我遇到了同样的问题（安装了 Plesk 12）。但是，当我从将 PHP 作为 FastCGI 执行切换到 Apache 模块时，该网站可以正常工作。

检查了我的 suexec 日志：

```
$ cd /var/log/apache2/
$ less suexec.log 
```

当你发现这样的事情时：

```
[2015-03-22 10:49:00]: directory is writable by others: (/var/www/cgi-bin/cgi_wrapper)
[2015-03-22 10:49:05]: uid: (10004/gb) gid: (1005/1005) cmd: cgi_wrapper 
```

试试这个命令

```
$ chown root:root /var/www/cgi-bin/cgi_wrapper
$ chmod 755 /var/www/cgi-bin/cgi_wrapper
$ shutdown -r now 
```

作为根。

我希望它可以帮助你。

# perl - 从催化剂控制器调用子程序

> ID：12153523
> 
> 赞同：0
> 
> 时间：2012-08-28T06:00:24.233
> 
> 标签：perl, catalyst

我正在研究催化剂来设计数据库的前端。我是 perl 和催化剂的新手。我在控制器中遇到了一个错误。

我想从一个表中获取基因名称并将每个基因名称传递给将执行某些功能的子程序gene_name（调用子程序gene_name）。我知道如何获取带有基因名称的列，但它们是以哈希引用的形式对其他表进行的。我对gene_name 的调用不起作用。

知道如何将值传递给子程序而不是引用吗？我的代码如下：

```
my @gene_list = $c->model('Gene::GeneTable')->search({      
},{
                column =>[qw/symbol/],
}
);
foreach my $gene (@gene_list){
push @gene_aliases, &gene_name($gene);
} 
```

执行代码后我得到的错误如下：

```
DBIx::Class::ResultSet::find(): Can't bind a reference (MyApp::Model::Gene::GeneTable=HASH(0x7ff6d88b7c58)) 
```

**更新**

我的gene_name() 子程序位于控制器中包含的另一个模块中。现在我已经改变了for循环（在控制器中）如下，目前它正在将基因名称传递给gene_name（）以获取别名（但查询保持不变）：

```
foreach my $gene (@gene_list){
push @gene_aliases, &gene_name($gene-> symbol);
} 
```

我正在访问我的视图文件中的@gene_aliases，如下所示：

```
[% FOREACH g in gene_aliases -%]
[% g %]
[% END -%] 
```

上面的代码是在页面中获取哈希引用而不是名称。我无法在网页上显示基因名称。如果我在 for 循环中给出 [% g.symbol %] 则页面将为空且没有错误消息。希望这将是回答我的问题的足够信息。如果不是，我会详细说明。

我的 SQL 查询如下：

```
Select Symbol from GeneTable; 
```

提前致谢

**更新2**

由于我不是全职程序员，所以我在博客上提出这些问题。请帮助我解决我的问题。如果我有从用户获取基因名称的搜索表单，并且该基因名称必须传递给gene_name（）子例程，我该如何传递它（到控制器以及如何调用gene_name（））。请帮助我解决这个问题。我在 view.tt 中的表格如下：

```
<form method="post" action "[% c.uri_for('/gene')%]">
<input type="text" name="search_alias">
<input type="submit" name="alias_search" value="Search">
</form> 
```

我所有的别名都在另一个名为 Alias 的表中，该表在gene_name() 子例程中使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T07:55:04.967

该`gene_name()`函数需要期望传递给它的 GeneTable 对象，或者您可以这样调用它`gene_name($gene->symbol)`：

话虽如此，根据您提供的有限信息，Controller 看起来并不合适。

将gene_name 作为其自身的方法会更有意义`Gene::GeneTable`，即：

```
package GeneTable;

...

sub gene_name {
    my $self = shift;
    my $gene_name = ... # do something with $self->symbol
    $gene_name
}

... 
```

这样该`->gene_name`方法可用于任何上下文中的任何 GeneTable 对象。

***在 OP 最初的两条评论之后***更新****

 ***听起来`gene_name()`（可能应该被称为`gene_aliases()`）是 Gene 对象的一种方法。将这样的转换放入 Controller 并不符合良好的 MVC 理念。

大概你在某处有模型代码 - MyApp/Model/Gene/ 很可能 - 这个子应该存在于`Gene/GeneTable.pm`. 然后你可以这样使用它：

```
[%- FOREACH g IN gene_list -%]
    [% g.symbol %]<br/><ul>
    [%- FOREACH gn IN g.gene_name -%]
    <li>[% gn %]</li>
    [%- END -%]
    </ul>
[%- END -%] 
```

在您的模板中，以及您拥有 GeneTable 对象或其集合的任何其他地方。

**更新#2** *更新后的问题*

`DBIx:Class`像您一样在列表上下文中调用时将返回一个对象数组。也许您需要添加一些`Data::Dumper->Dumper()`调用来处理每个步骤返回给您的内容。

我建议您在致电后**立即**添加以下行`->search()`：

```
$c->log->debug("gene_list contains: ", Data::Dumper->Dumper(\@gene_list)); 
```

...在您填充之后，可能还有对 @gene_aliases 的等效调试。

这可能会让您更清楚地了解您从搜索中得到的结果，但我会冒险猜测您正在获取`Gene::GeneTable`对象。***

# java - 使用泛型改进类

> ID：12153526
> 
> 赞同：0
> 
> 时间：2012-08-28T06:00:35.550
> 
> 标签：java, generics

我有很多相同的课程。我想使用泛型改进它：

```
public class PingInitializer extends AbstractHandler implements    DataWarehouseInitializer<PingInteraction, PingInvocation> {

    @Handler
    @Override
    public PingInteraction handle(Message message) throws IOException, MessageException {
        checkMessageIsNotNull(message);
        PingInvocation invocation = construct(message.getBody().toString());
        l.debug("handling in initializer...  {}", invocation);
        return new PingInteraction(invocation);
    }

    public PingInvocation construct(String message) throws IOException, MessageException {
        ObjectMapper mapper = new ObjectMapper();
        PingInvocation invocation;
        try {
            invocation = mapper.readValue(message, PingInvocation.class);
        } catch (IOException e) {
             throw new MessageException("Can't deserialize message", e);
        }
        return invocation;
    }
} 
```

我想创建新的抽象类 AbstractInitializer 并且所有子类只需要指定泛型类型：

```
public abstract class AbstractInitializer<INTERACTION, INVOCATION> extends AbstractHandler {

    @Handler
    public INTERACTION handle(Message message) throws IOException, MessageException {
        checkMessageIsNotNull(message);
        INVOCATION invocation = construct(message.getBody().toString());
        l.debug("handling in initializer...  {}", invocation);
        return **new INTERACTION(invocation)**; //HERE!
    }

    public INVOCATION construct(String message) throws IOException, MessageException {
        ObjectMapper mapper = new ObjectMapper();
        INVOCATION invocation;
        try {
            invocation = mapper.readValue(message, **INVOCATION.class** /*<- and HERE */);
        } catch (IOException e) {
            throw new MessageException("Can't deserialize message", e);
        }
        return invocation;
    }
} 
```

但我有两个编译器错误，不知道如何绕过这个问题。我在代码中标记它们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T06:08:36.627

出于兼容性原因， Java 泛型是通过*类型擦除*实现的，这最终意味着您不能仅使用类型参数来实例化新对象。

你需要做的是`AbstractInitializer`稍微修改...

```
private final Class<INTERACTION> interactionType;
private final Class<INVOCATION> invocationType;
private final Constructor<INTERACTION> interactionConstructor;

public AbstractInitializer(final Class<INTERACTION> interactionType,
    final Class<INVOCATION> invocationType) throws NoSuchMethodException {
  this.interactionType = interactionType;
  this.invocationType = invocationType;
  interactionConstructor = interactionType.getConstructor(invocationType);
}

public INTERACTION handle(Message message) throws IOException, MessageException,
        InvocationTargetException, InstantiationException, IllegalAccessException {
  checkMessageIsNotNull(message);
  INVOCATION invocation = construct(message.getBody().toString());
  l.debug("handling in initializer...  {}", invocation);
  return interactionConstructor.newInstance(invocation);
}

public INVOCATION construct(String message) throws IOException, MessageException {
  ObjectMapper mapper = new ObjectMapper();
  INVOCATION invocation;
  try {
    invocation = mapper.readValue(message, invocationType);
  } catch (IOException e) {
    throw new MessageException("Can't deserialize message", e);
  }
  return invocation;
} 
```

然后，例如

```
public final class PingInitializer
    extends AbstractInitializer<PingInteraction, PingInvocation> {

  public PingInitializer() {
    super(PingInteraction.class, PingInvocation.class);
  }
} 
```

或者，您可以放弃制作它`abstract`并像使用它一样使用它...

```
public static GenericInitializer<A, B> createInitializer(final Class<A> a,
    final Class<B> b) {
  return new GenericInitializer<A, B>(a, b);
}

final GenericInitializer<PingInteraction, PingInvocation> pingInitializer
    = createInitializer(PingInteraction.class, PingInvocation.class); 
```

我**相信**这一切都应该是可能的。然而，我可能犯了一些愚蠢的错误，因为我很匆忙在响应框中输入了这个。

# c# - 如何从命令行使用 XAML 编译代码隐藏文件？

> ID：12153527
> 
> 赞同：2
> 
> 时间：2012-08-28T06:00:37.043
> 
> 标签：c#, .net, wpf, command-line

我有这个 XAML 文件 (MainWindow.xaml)：

```
<Window xmlns ="http://schemas.microsoft.com/winfx/2006/xaml/presentation">
 <Button>
   Click!
 </Button>
</Window> 
```

我有这个 MainWindow.xaml.cs 文件（上述 xaml 的代码隐藏）：

```
class MainWindow : Window{
} 
```

我有这个`.cs`启动应用程序的文件（Driver.cs）：

```
using System;
using System.Windows;

class EntryPoint{
[STAThread]
 public static void Main(){
  Application app = new Application();
  app.StartupUri = new Uri(@"path\to\MainWindow.xaml");
  app.Run();
 }
} 
```

这是我的命令：

```
csc /target:exe /r:<dll list> Driver.cs 
```

我想做的是从命令行“连接”我的 xaml 和代码隐藏文件。我不明白如何`x:Class`在 xaml 中指定值并将三个文件编译在一起。现在，上面的命令工作正常，但没有代码隐藏。我怎么做铅垂？我试图了解如何在没有 VS 的帮助下创建一个基本的 WPF 应用程序。

# java - NSIS Eclipse 插件在 Helios 和 Linux 平台上不起作用

> ID：12153528
> 
> 赞同：0
> 
> 时间：2012-08-28T06:00:43.017
> 
> 标签：java, eclipse, nsis

我想在 Eclipse Helios 和 GNU/Linux 平台中使用 NSIS Eclipse 插件。我已按照使用[此链接](http://eclipsensis.sourceforge.net/index.shtml)的步骤进行操作。

我按照以下步骤操作：

1.  转到帮助-> 安装新软件。
2.  给了更新软件链接[http://eclipsensis.sf.net/update](http://eclipsensis.sf.net/update)。
3.  我按下下一个按钮，我收到以下错误：

    > 无法完成安装，因为某些依赖项无法满足 net.sf.eclipsensis.feature.group [0.9.8.1] 无法在此环境中安装，因为其过滤器不适用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T10:45:19.003

嗯，请参阅[http://nsis.sourceforge.net/Docs/Chapter2.html#2.4](http://nsis.sourceforge.net/Docs/Chapter2.html#2.4) “它还可以在 Linux、BSD 或 Mac OS X 服务器上编译 Windows 安装程序。”

所以 NSIS 编译器*不仅仅是*Windows。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T16:07:09.593

您不能再将它安装在 Linux 上，因为插件本身在其依赖项中明确要求 Windows 平台，并且还在其主页上明确指出 Windows 操作系统为要求。

您现在可能会争辩说编辑 NSIS 脚本应该仍然可以正常工作，但根据我的经验，您必须编译和测试 NSIS 脚本很多次，如果没有 NSIS 编译器，这真的不会带来愉快的体验。NSIS 编译器仅适用于 Windows。

# linux - 我应该在 clone(2) 中设置哪些标志，以便它与 pthread_create() 一样工作？

> ID：12153530
> 
> 赞同：1
> 
> 时间：2012-08-28T06:00:54.753
> 
> 标签：linux, multithreading, pthreads, clone

我做了`strace(1)`一个`pthread_create(3)`。它间接调用`clone(2)`系统调用。

它将在那里设置以下标志：（我使用的是 i386 GNU/Linux (Mint 13)）

```
CLONE_VM | CLONE_FS | CLONE_FILES | CLONE_SIGHAND | CLONE_THREAD | CLONE_SYSVSEM | CLONE_SETTLS | CLONE_PARENT_SETTID | CLONE_CHILD_CLEARTID 
```

我对所有这些标志都很满意。但我的问题是为什么要`pthread_create()`设置`CLONE_CHILD_CLEARTID`标志？据我所知`CLONE_CHILD_SETTID`，将在子内存中的位置 ctid 设置子线程 id，并`CLONE_CHILD_CLEARTID`在子退出时将其擦除。

（因为没有`CLONE_CHILD_SETTID`设置标志，那为什么`CLONE_CHILD_CLEARTID`？）

真的需要吗？`pthread_create()`当我们想要实现using的功能时，我们应该设置哪些理想的标志`clone(2)`？

该领域的初学者。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T06:28:55.173

好吧，您不能`pthread_create`仅使用`clone`. `clone`是为了支持库的使用而编写的，例如由 pthreads 编写，但它本身基本上是一个非常可定制的线程分叉函数。

`CLONE_CHILD_CLEARTID`例如，旨在支持`pthread_join`. 它本质上所做的是将 处的值归零`ctid`，然后唤醒在该地址上调用了 futex_wait 的线程。因此，`pthread_join`可以通过简单地检查是否`ctid`为零（如果是则立即返回状态），然后在必要时执行 futex_wait 来实现（假设正确同步）。

基本上，`clone`是不可分割的一部分，`pthread_create`但不是唯一的部分。为了支持更高级的使用，就像 pthreads 给你的所有东西一样，你必须在`clone`其他调用之上编写库代码。

# lua - 错误：尝试索引字段“？” （零值）

> ID：12153537
> 
> 赞同：3
> 
> 时间：2012-08-28T06:01:31.053
> 
> 标签：lua

我的 Lua 代码中出现以下错误：

> 尝试索引字段“？” （零值）

它发生在下面的粗体行。我该如何解决？

```
function SendMessageToAdmins(color1, color2, color3, msg)
    for i = 0, maxSlots - 1 do
        **if Account[i] and Account[i].Admin >= 1 or Account[i] and Account[i].GameMaster >= 1 then**
            SendPlayerMessage(i, color1, color2, color3, string.format("%s", msg))
        end
    end
end
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T13:49:45.047

this error usually comes from trying to index a field on something that isn't a table, or nil. chances are that whatever is at `Account[i]` when the error happens, isn't a table or userdata, but a built in type like a string or number.

i'd start with checking the type of whatever is in `Account[i]` when you get that error, and going from there.

the two most common ways to see this error (that i know of) are below:

```
local t = { [1] = {a = 1, b = 2}, [2] = {c = 3, d = 4} }
-- t[5] is nil, so this ends up looking like nil.a which is invalid
-- this doesn't look like your case, since you check for 
-- truthiness in Account[i]
print(t[5].a) 
```

the case you are probably experiencing, is most likely this one:

```
local t =
{
    [1] = {a = 1, b = 2},
    [2] = 15, -- oops! this shouldn't be here!
    [3] = {a = 3, b = 4},
}
-- here you expect all the tables in t to be in a consistent format.
-- trying to reference field a on an int doesn't make sense.
print(t[2].a) 
```

# ubuntu - 在 ubuntu 12.04 上使用 melt 将媒体文件转换为 h.264 编码

> ID：12153539
> 
> 赞同：1
> 
> 时间：2012-08-28T06:01:39.293
> 
> 标签：ubuntu, h.264, mlt

我正在开发一个小型命令行视频编辑工具。我已经创建了几乎所有东西，但我被困在将结果文件编码为 H.264 中。我从Debian存储库安装了melt。编码不起作用，所以我尝试自己构建融化。但它在禁用 qimage 时显示了一些错误，我无法弄清楚。

以下是一个示例命令：

```
melt Wildlife.wmv -consumer avformat:test.mp4 vcodec=libx264 
```

Tt 开始处理，但显示：

> [消费者 avformat] 视频编解码器 libx264 无法识别 - 忽略

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:10:29.113

您需要在系统上安装 libx264。你有吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-17T05:51:32.787

我通过从存储库中删除安装的 melt 和 ffmpeg 并手动编译它来修复它。它修复了该问题，并且还提供了包含一些错误修复和新功能的最新版本。在存储库上它是 0.0.7，但如果手动编译它现在是 0.8.9。

这是编译melt的说明。 [融化脚本](http://www.mltframework.org/bin/view/MLT/BuildScripts)

使用融化部分仅编译命令行视频编辑器使用任何其他安装任何 gui 视频编辑器，如 OpenShot 或 kdenlive

# android - 如何使用 RelativeLayout 使视图居中？

> ID：12153540
> 
> 赞同：17
> 
> 时间：2012-08-28T06:01:38.637
> 
> 标签：android, android-layout, android-relativelayout

我想知道如何使用 RelativeLayout 在其他两个视图之间（或视图和父边缘之间）居中视图。

例如，如果我有以下...

![在此处输入图像描述](../Images/dc6a90294eaacf68ffee5c8637f41bf6.png)

如何使用**RelativeLayout**在 ImageView 和屏幕底部之间垂直居中 Button ？

我正在寻找一个解决方案...

*   Button 不会以任何方式拉伸
*   没有嵌套布局

我正在尝试在 XML 布局中执行此操作（不是以编程方式）。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-28T06:04:29.363

您可以使用以下内容：

```
<RelativeLayout 
        android:layout_below="@id/theImageView"
        android:align_parentBottom="true"
        android:layout_width="match_parent"
        android:layout_height="200dp" >    

        <Button 
            android:id="@+id/btn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true"
            android:layout_centerVertical="true"            
            android:onClick="onClickButton"
            android:textSize="20sp"
            android:text="Go"/>

    </RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-18T22:19:58.320

不幸的是，没有简单的方法可以做到这一点。您可以嵌套布局，也可以在运行时进行。最简单的方法是嵌套布局：

```
<LinearLayout
    android:width="match_parent"
    android:height="match_parent"
    android:orientation="vertical">
    <ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/my_top_image"/>
    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="0dip"
        android:layout_weight="1">
        <Button
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true"
            android:text="@string/my_button_label"/>
    </RelativeLayout>
</LinearLayout> 
```

这会将图像置于顶部。在此之下，`layout_height=0`和`layout_weight=1`属性`RelativeLayout`导致它占用了所有剩余空间。然后，您可以将按钮居中在`RelativeLayout`. 您可以在按钮上使用填充以使其达到您想要的大小。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-28T06:22:53.130

为此使用下面的 XML 代码，它将解决您的问题。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:id="@+id/mLlayout1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <ImageView
            android:id="@+id/mImgView1"
            android:layout_width="fill_parent"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:src="@drawable/ic_launcher" />

        <RelativeLayout
            android:layout_width="fill_parent"
            android:layout_height="match_parent"
            android:layout_weight="2" >

            <Button
                android:id="@+id/Btn1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_centerInParent="true"
                android:text="Dipak" />
        </RelativeLayout>
    </LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-28T06:12:02.507

在 XML 文件中使用这个**android:layout_centerInParent="true"** ..

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:weightSum="1.0" >

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="0dip"
        android:layout_weight="0.8"
        android:background="#00ff00" >

        <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true" />
    </RelativeLayout>

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="0dip"
        android:layout_weight="0.2" >

        <Button
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true"
            android:text="Button" />
    </RelativeLayout>

</LinearLayout> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-28T06:18:37.453

@Gus您可以在其他两个视图之间创建中心视图...这不准确，您必须尝试这种方式....

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="120dp"
        android:layout_height="120dp"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:background="#00ccFF"
        android:orientation="horizontal" >
    </LinearLayout>

    <LinearLayout
        android:layout_width="59dp"
        android:layout_height="59dp"
        android:layout_alignRight="@+id/linearLayout1"
        android:layout_alignTop="@+id/linearLayout1"
        android:layout_marginRight="-21dp"
        android:layout_marginTop="-21dp"
        android:background="#FFccFF"
        android:orientation="vertical" >
    </LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-11T09:12:36.223

我认为您只需要像往常一样对齐图像视图并使用 layout_below 对齐按钮，无需硬编码或使用嵌套视图在您完成的按钮上使用**android:gravity="center"**

```
 <RelativeLayout 
    android:layout_below="@id/theImageView"
    android:align_parentBottom="true"
    android:layout_width="match_parent"
    android:layout_height="200dp" >    

   <ImageView
       android:id="@+id/imgview"
        android:layout_width="match_parentmat"
        android:layout_height="wrap_content"  />
    <Button 
        android:id="@+id/btn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:layout_below="@+id/imgview"
        android:gravity="center"        
        android:onClick="onClickButton"
        android:textSize="20sp"
        android:text="Go"/>

</RelativeLayout> 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-28T06:15:32.233

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="300dp"
        android:layout_height="300dp"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="20dp"
        android:src="@drawable/wood" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/imageView1"
        android:layout_below="@+id/imageView1"
        android:layout_marginLeft="101dp"
        android:layout_marginTop="53dp"
        android:text="Image Button" />
</RelativeLayout> 
```

# iphone - Master-Details SplitViewController 自定义 UINavigationBar

> ID：12153543
> 
> 赞同：0
> 
> 时间：2012-08-28T06:01:51.503
> 
> 标签：iphone, objective-c, ios, uinavigationbar

我有一个 Master-Details 项目设置并在 XCode 中运行，完全没有问题，一切正常。但是，当我尝试将 NavigationBar 的右上角和左上角变圆时，它会产生非常奇怪的效果。它基本上抵消了细节视图上“后退”左按钮的“触摸”响应。

该按钮仍然有效，但似乎 iPhone 只能在用户单击 NavigationBar 正下方而不是按钮本身时获取用户的触摸。

我的代码是：

```
// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect
{
    UIColor *color = [UIColor darkGrayColor];
    UIImage *img = [UIImage imageNamed:@"nav-bar"];
    [img drawInRect:CGRectMake(0, 0, self.frame.size.width, self.frame.size.height)];
    self.tintColor = color;

    // Create mask to round corners
    CGRect bounds = CGRectMake(0, 0, self.frame.size.width, self.frame.size.height);
    UIBezierPath *maskPath = [UIBezierPath bezierPathWithRoundedRect:bounds byRoundingCorners:(UIRectCornerTopLeft | UIRectCornerTopRight) cornerRadii:CGSizeMake(10.0, 10.0)];

    CAShapeLayer *maskLayer = [CAShapeLayer layer];
    maskLayer.frame = bounds;
    maskLayer.path = maskPath.CGPath;

    // Apply mask to navigation bar
    [self.layer addSublayer:maskLayer];
    self.layer.mask = maskLayer;

    // Apply logo to navigation bar
    UIImageView *imageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"logo"]];
    self.topItem.titleView = imageView;
} 
```

这是我的意思的屏幕截图，仅当我触摸箭头指向的位置时按钮才会响应：

![接触点](../Images/48d4d48cd8738144275b514fa13f1d5f.png)

- - 更新 - -

经过一些测试，我发现问题出在“self.layer.mask = maskLayer”行上。我已经重构了代码并在另一个只使用 xib 文件而不是故事板的项目中进行了测试，并且没有任何问题，但它仍然无法在当前项目中工作。

```
CGRect bounds = CGRectMake(0, 0, navigationController.navigationBar.bounds.size.width,
                                   navigationController.navigationBar.bounds.size.height);
        UIBezierPath *maskPath = [UIBezierPath bezierPathWithRoundedRect:bounds byRoundingCorners:(UIRectCornerTopLeft | UIRectCornerTopRight) cornerRadii:CGSizeMake(10.0, 10.0)];

        CAShapeLayer *maskLayer = [CAShapeLayer layer];
        maskLayer.frame = bounds;
        maskLayer.path = maskPath.CGPath;

        // Apply mask to navigation bar
        //navigationController.navigationBar.layer.mask = maskLayer;
        [navigationController.navigationBar.layer addSublayer:maskLayer];
        navigationController.navigationBar.layer.mask = maskLayer; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T06:05:09.347

使用`self.bounds`而不是`self.frame`. 您可能希望相对于您自己的坐标系而不是相对于您自己的父视图进行绘制。

# html - Windows 8 中的菜单项？

> ID：12153549
> 
> 赞同：0
> 
> 时间：2012-08-28T06:02:08.090
> 
> 标签：html, windows-8, microsoft-metro, winjs

我正在尝试设计我的地铁应用程序，例如，在我的主页中，我需要在页面左侧的菜单中显示项目列表，当我们单击每个项目时，每个项目都需要导航单独的页面并包含一些数据。可以有人建议我应该采取哪种控制来开始我的场景？工作示例对我真的很有帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T10:30:51.273

WinRT 应用程序中的导航不使用菜单/菜单项隐喻。您可以添加一个从屏幕底部向上滑动的应用栏，用于放置上下文控件，例如与当前页面或所选项目相关的按钮。您还可以将全局设置添加到从右侧滑入的“设置”超级按钮。

您所描述的内容听起来像是 Visual Studio 2012 开箱即用的“拆分应用程序”模板。它由屏幕左侧的项目列表组成，选中后会更改右侧的内容-屏幕的手侧。尝试创建一个新的拆分应用程序，看看是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T12:49:11.490

在我看来，您所说的是 SplitApp 视图。查看此链接，列出的第二个模板，就在 GridView 下方：

[http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh768232.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh768232.aspx)

您会发现在 Modern/Metro 中，诸如菜单之类的事情是通过窗口内容区域中的上下文列表视图或通过 AppBar 上的超级按钮（阅读图标）来处理的。许多人现在听到菜单并畏缩，只是由于 Chrome/Menu 免费应用程序的样式指南。

如果您不希望内容显示在链接旁边，就像 SplitApp 视图那样，您应该考虑为您的链接设置一个常规列表视图，根据您的喜好设置样式并设置为垂直显示，点击事件将您带到任何详细信息您要访问的页面视图。Metro App 中的导航非常简单。

C# 示例：

```
this.Frame.Navigate(typeof(MyDetailPage),myContentId); 
```

然后在您的详细信息页面上，您可以在导航到以下位置时获取参数：

```
protected override void OnNavigatedTo(NavigationEventArgs e)
{
    var myContentId = e.Parameter;
    ...   
} 
```

如果以上都没有帮助，请尝试查看这些示例。我知道您可能没有制作 RSS 阅读器，但它们会带您了解各种视图和导航的基础知识。

使用 C#/VB & XAML 创建博客阅读器：

[http://msdn.microsoft.com/en-us/library/windows/apps/br211380.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/br211380.aspx)

使用 JS & Html5 创建博客阅读器：

[http://msdn.microsoft.com/en-us/library/windows/apps/hh974582.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh974582.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T06:15:00.810

这不是一个完整的工作示例，但我建议查看两个项目：

*   WinJS.Navigation 的[MSDN 文档](http://msdn.microsoft.com/en-us/library/windows/apps/hh452768.aspx)
*   导航应用程序的MSDN[示例](http://code.msdn.microsoft.com/windowsapps/Navigation-sample-cf242faa)

这些应该可以为您提供所需的解决方案——示例非常完整，可以根据您的需要进行定制。

# x11 - X11显示数字有多高？

> ID：12153552
> 
> 赞同：10
> 
> 时间：2012-08-28T06:02:29.160
> 
> 标签：x11

displayno 是 X11[显示名称](http://linux.die.net/man/7/x)的一部分。

我已经看到了几个解释它是从 0 向上的数字的定义，但是我还没有看到任何解释是否存在最大显示数字的文档。

最高显示编号是多少？它在哪里定义？

* * *

这个问题的背景是我试图了解[PyVirtualDisplay](https://github.com/ponty/PyVirtualDisplay)的显示编号分配算法。我还没有理解 /tmp/.X*lock 文件的作用，但看起来分配例程会选择总是增加显示数量，这表明在重复调用的某个阶段它可能会达到限制并跌倒，特别是如果它很小。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-29T00:57:05.273

简短的回答：定义不明确。

更长的答案：这取决于您碰巧使用的流协议。在 TCP 中，它恰好被简单地添加到基本端口号 6000，这意味着服务器将无法在显示号 59535 附近的某个位置启动。在 unix 域套接字上，它只是一个附加到套接字名称下的整数`/tmp/.X11-unix`（所以如果你是与您一起启动服务器`-nolisten tcp`可能有几十亿左右）。在 DECnet……嗯，我不知道，但如果你发现自己处于需要关心的境地，我很抱歉。

可能为后代提供更好的答案：如果您使用的是足够新的 X 服务器，您可以使用`-displayfd <n>`参数告诉服务器只需**选择**一个可用的显示编号，然后在该文件描述符上将其写回给您。认为这是 xserver 1.13 中的新功能，应该会在 2012 年末发布。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-10-07T12:29:01.467

`2147483647`这是`2**31 - 1`

```
Xephyr :2147483647
Xephyr :2147483648 # Bad display name 
```

用蛮力发现：

```
for ((i=4153577566; i > 0; i -= 10000000 )); do echo $i; Xephyr :$i 2>/dev/null && break; done
for ((i=2153577566; i > 0; i -= 100000 )); do echo $i; Xephyr :$i 2>/dev/null && break; done
for ((i=2147577566; i > 0; i -= 1000 )); do echo $i; Xephyr :$i 2>/dev/null && break; done
... 
```

# c++ - 从类访问主场景/图层

> ID：12153561
> 
> 赞同：1
> 
> 时间：2012-08-28T06:03:18.583
> 
> 标签：c++, cocos2d-x

我有 3 个不同的课程`Tree`,`Fruit`和`Basket`。他们每个人都有自己的`CCSprite`成员，我可以通过这些成员访问`getSprite( )`（每个班级都有自己的成员`getSprite( )`）。此外，每个类都有一个`draw( )`设置`CCSprite`纹理、位置和其他`CCSprite`相关内容的方法。当我创建这些类的实例时，我总是需要`addChild( )`主层中的每个精灵。它实际上并没有什么问题，但我想要它，以便每个`draw( )`方法都是处理`addChild( )`主层方法的方法。

我的代码是这样的：

```
// Tree.cpp
#include "Tree.h"
#include "cocos2d.h"

using namespace cocos2d;

Tree::Tree( ) {
   draw( );
}

CCSprite * Tree:getSprite( ) {
   return m_TreeSprite;
}
void Tree::draw( ) {
   m_TreeSprite = CCSprite::create( "tree.png" );
   m_TreeSprite -> setPosition ( 100, 100 );
}

/*
 * The other classes have similar structure. Will take a long long post if I write them all.
 */ 

// MainLayer.cpp
void MainLayer::drawScreenObjects( ) {
   m_Tree = Tree( );
   this -> addChild( m_Tree.getSprite( ) );

   m_Basket = Basket( );
   this -> addChild( m_Basket.getSprite( ) );
} 
```

我想要它，以便该`draw( )`方法看起来类似于：

```
void Tree::draw( ) {
   m_TreeSprite = CCSprite::create( "tree.png" );
   m_TreeSprite -> setPosition( 100, 100 );
   MainLayer -> addChild( m_TreeSprite );
} 
```

我正在考虑的解决方案是

1.  将引用传递`MainLayer`给每个类，并有一个成员变量保存该引用。
2.  使所有类都从 CCNode 继承，以便它们可以拥有自己的子级。

还有其他可能的解决方案吗？我只是觉得我目前的设置很脏而且不稳定。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T20:40:09.903

我真的不知道任何 c++，但也许尝试使用 MainLayer 作为参数创建一个构造函数，然后使用引用调用 addChild。您也不需要成员变量来保存引用，您可以改为调用 removeFromParentAndCleanup。

您还可以创建一个包含对当前 MainLayer 的引用的单例对象，然后您可以从任何地方调用单例，但这听起来更昂贵。我会选择你的#1 解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T01:53:27.940

怎么样 ：

主层.h

```
public:
static MainLayer* me = 0; 
```

init() 中的 MainLayer.cpp

```
MainLayer::me = this; 
```

然后在你的 draw()

```
if(MainLayer::me){
    MainLayer::me->addChild();
} 
```

# c# - 如何从包含 c#.net 中的 2 个元素的列表中单独获取第二个元素？

> ID：12153562
> 
> 赞同：11
> 
> 时间：2012-08-28T06:03:19.103
> 
> 标签：c#, .net, list, element

这是我的列表定义

```
public class EventsList
    {
        public int EventID { get; set; }
        public string EventName { get; set; }
    } 
```

这是 C# 代码

```
string strCurrentUser = CommonWeb.GetLoginUser();
        EventsClass EventObj = new EventsClass();
        DataSet ds;
      List< EventsList> eventList = new List<EventsList>();
       EventsList eventobj = new EventsList();
       ds=EventObj.GetEvents(strCurrentUser); 
```

我有一个下拉菜单，它应该单独显示 EventName。我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-08-28T06:06:50.497

您的问题不清楚，但听起来它可能就像使用[索引器`List<T>`](http://msdn.microsoft.com/en-us/library/0ebtbkkc.aspx)一样简单，这使得访问元素看起来像数组访问：

```
List<string> values = ...;
string name = values[1]; // Index is 0-based 
```

对于更一般`IEnumerable<string>`的情况，您可以使用[`ElementAt`](http://msdn.microsoft.com/en-us/library/bb299233.aspx)扩展方法：

```
using System.Linq;

...
IEnumerable<string> values = ...;
string name = values.ElementAt(1); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T06:12:49.757

```
.Select(i => i.Name); 
```

例如

```
static void Main(string[] args)
        {
            var records = GetPersonRecords();

            var onlyName = records.Select(i => i.Name);
        }

        private static List<Person> GetPersonRecords()
        {
            var listPerson = new List<Person>();

            listPerson.Add(new Person { Id = 1, Name = "Name1" });
            listPerson.Add(new Person { Id = 2, Name = "Name2" });

            return listPerson;
        }
    }

    class Person
    {
        public int Id { get; set; }
        public string Name { get; set; }
    } 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T06:19:56.453

我们的力量`Linq`可以做到这一点...

下面的示例我单独检索特定的属性..

```
List<Item> oListItem = new List<Item>() {
    new Item("CD", "001CD", Enum.GroupTYPE.FAST_MOVING),
    new Item("TV", "002CD", Enum.GroupTYPE.FAST_MOVING),
    new Item("CD", "001CD", Enum.GroupTYPE.FAST_MOVING),
    new Item("LAPTOP", "003CD", Enum.GroupTYPE.FAST_MOVING),
    new Item("MOBILE", "004CD", Enum.GroupTYPE.NORMAL),
    new Item("CHARGER", "005CD", Enum.GroupTYPE.LEAST_MOVING)
}; 
```

*仅从 Collection 中检索 Name 属性*

```
var Item = from Item oname in oListItem select oname.ItemName; 
```

# xpath - 如何排除最后一个节点

> ID：12153563
> 
> 赞同：0
> 
> 时间：2012-08-28T06:03:28.307
> 
> 标签：xpath

我有以下 html 标签结构。

```
<?xml version="1.0" encoding="UTF-8"?><div class="MainContentTextContainer">
<br/> To break the stalemate of heavy competition and low growth in the traditional orthopedic implant markets, the major orthopedic companies are turning to biologics. This white paper provides some information on this trend. Information from this White Paper was obtained from Kalorama's full market study on this market 'The World Market for Orthopedic Biomaterials SKU KLI6329663," as well as news media sources. <br/>
<br/>
<p> "We also feature department and global pricing for reports that we be utilized by more than one user at your company."
</p>
<p>
<b>Related Reports:</b>
</p>
<!-- [PID:6921310] -->
<a href="http://www.kaloramainformation.com/Global-Medical-Devices-6921310/" class="StandardLink DkBlueType">The Global Market for Medical Devices, 3rd. Edition</a>
<br/>May 2, 2012 - KLI3873247 - $1,995.00<br/>
<br/>

</div> 
```

`<p>`以上是我的 html 节点结构。我想返回 MainContentTextContainer 节点，该节点在包含“相关报告：”的最后一个标记之后不包含节点。

意味着我希望预期的输出为：

```
<div class="MainContentTextContainer">
    <br/> To break the stalemate of heavy competition and low growth in the traditional orthopedic implant markets, the major orthopedic companies are turning to biologics. This white paper provides some information on this trend. Information from this White Paper was obtained from Kalorama's full market study on this market 'The World Market for Orthopedic Biomaterials SKU KLI6329663," as well as news media sources. <br/>
    <br/>
    <p> "We also feature department and global pricing for reports that we be utilized by more than one user at your company."
    </p>   
    </div> 
```

我使用了以下xpath：

```
//div[@class='MainContentTextContainer']/*[not(self::p[last()])] 
```

但它不工作。请用正确的xpath指导我。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T08:09:09.853

此 XPath 表达式返回 中的所有文本和元素节点`div`，后跟 a `p`，这意味着`p`不包括最后一个节点和它后面的节点：

```
(//div[@class='MainContentTextContainer']/* | //div[@class='MainContentTextContainer']/text())[following-sibling::p] 
```

# nginx - 如何配置 nginx 和 uwsgi 以将调用从路径重定向到子域？

> ID：12153570
> 
> 赞同：2
> 
> 时间：2012-08-28T06:04:27.197
> 
> 标签：nginx, flask, uwsgi

我在 uwsgi 和 nginx 上运行烧瓶应用程序。他们的网站有两个功能：

*   `/admin`：用于后端管理
*   `/api`: 用于休息 api

我希望所有 api 调用都通过子域：api.mysite.com。

如果我调用 api like ，它运行得很好`www.mysite.com/api/v1/cities`。

如果我想以这种方式调用 api`api.mysite.com/v1/cities`怎么办？

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T08:45:36.923

我设法通过在 nginx conf 上设置 proxy_pass 来让它工作：

```
server {
    listen 80;
    server_name localhost;
    location / {
        include uwsgi_params;
        uwsgi_pass unix:/tmp/app.sock;
    }
}
server {
    listen 80;
    server_name api.mysite.com;
    location / {
        proxy_pass http://localhost/api/;  
    }
} 
```

还在考虑它是否是最好的解决方案，服务器是否有任何开销？

# c++ - C++11 regex_token_iterator

> ID：12153573
> 
> 赞同：5
> 
> 时间：2012-08-28T06:04:32.850
> 
> 标签：c++, regex, c++11, copy

嗯……我以为我理解正则表达式，我以为我理解迭代器，但是 C++11 的正则表达式实现让我感到困惑……

我不明白的一个领域：阅读[regex token iterators](http://en.cppreference.com/w/cpp/regex/regex_token_iterator)时，我遇到了以下示例代码：

```
#include <fstream>
#include <iostream>
#include <algorithm>
#include <iterator>
#include <regex>
int main()
{
   std::string text = "Quick brown fox.";
   // tokenization (non-matched fragments)
   // Note that regex is matched only two times: when the third value is obtained
   // the iterator is a suffix iterator.
   std::regex ws_re("\\s+"); // whitespace
   std::copy( std::sregex_token_iterator(text.begin(), text.end(), ws_re, -1),
              std::sregex_token_iterator(),
              std::ostream_iterator<std::string>(std::cout, "\n"));
   ...
} 
```

我不明白以下输出如何：

```
Quick
brown
fox. 
```

由上面的 std::copy() 函数创建。我看不到循环，所以我对迭代是如何发生的感到困惑。或者换一种说法，多行输出是如何产生的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T06:06:54.523

`std::copy`将元素从输入范围复制到输出范围。在您的程序中，输入范围是使用正则表达式分隔符提取的三个标记。这些是打印到输出的三个单词。输出范围是`ostream_iterator`简单地获取给定的每个元素并将该元素写入输出流。

如果您逐步`std::copy`使用调试器，您会看到它在输入范围的元素上循环。

# java - 使用 Objectify 进行查询过滤

> ID：12153576
> 
> 赞同：1
> 
> 时间：2012-08-28T06:04:58.993
> 
> 标签：java, google-app-engine, objectify

我有一个问题，我需要使用 Objectify 过滤查询结果。通常，存储实体上的 String @Key 字段如下所示：

*   `uid:jamesm:points`
*   `uid:jsmith:points`
*   `uid:jax:points`
*   `uid:ken:points`

现在我想为 @Key 字段做一个这样的查询过滤器：

```
uid:j*:points 
```

在哪里，我希望获得上面列出的前三 (3) 个实体。Objectify 可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T13:51:01.737

[如前所述](https://stackoverflow.com/questions/11902019/what-is-the-best-filter-to-query-a-full-name-datastore-property-using-only-the-f/11902668#11902668)，您可以这样做，但前提是您比较字符串的开头：`uid:j*`

```
ofy.query(EntityClass.class).filter("property >=", "uid:j")
                            .filter("property <", "uid:j" + "\ufffd"); 
```

# mysql - 在 linux 中调整 mysql 服务器

> ID：12153577
> 
> 赞同：0
> 
> 时间：2012-08-28T06:05:03.947
> 
> 标签：mysql, database, linux

我在 linux 平台上有一个 mysql 服务器。我需要在作为 innodb 引擎的 mysql 服务器中进行性能调整。我想知道 my.cnf 文件中的手动配置。那么，要配置的所有重要的 innodb 参数是什么？因为 innodb 和 myisam 引擎有不同的调优操作。请告诉一些有用的事情要做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T06:10:07.640

我会推荐使用[MySQL Tuner](http://mysqltuner.pl/mysqltuner.pl)`MySQL`这是性能调优 的一个很好的起点。

您还应该运行某种能够绘制`MySQL`健康图表的监控软件。当出现性能问题时，这非常有用。我建议您`munin`使用`MySQL` [plugins](http://munin-monitoring.org/)。

问候——卢克

# extjs - json 数组未显示在 extjs 网格中

> ID：12153579
> 
> 赞同：0
> 
> 时间：2012-08-28T06:05:11.310
> 
> 标签：extjs, store, jsonstore, loaddata

我使用以下 Ext 函数从 json 数组绑定 ext 网格中的值。我从 URL 获取 json 数组。它可以正常工作，这意味着我得到了值。我的问题是如果我尝试**绑定Extjs 网格中的值我无法在该网格中添加 json 数组值。**如何解决这个问题？

```
Ext.onReady(function(){

    var proxy=new Ext.data.HttpProxy({url:'http://someurl'});

    var reader=new Ext.data.JsonReader({},[
          {name: 'User_Id', mapping: 'User_Id'},
          {name: 'First_Name', mapping: 'First_Name'},            
          {name: 'Last_Name', mapping: 'Last_Name'}, 
          {name: 'Notes', mapping: 'Notes'} 
     ]);
     //alert(reader);
     var store=new Ext.data.Store(    {
         proxy:proxy,
         reader:reader
     });

    store.load();

    // create the grid
    var grid = new Ext.grid.GridPanel({
        store: store,
        columns: [
            {header: "User_Id", width: 60, dataIndex: 'User_Id', sortable: true},
            {header: "First_Name", width: 60, dataIndex: 'First_Name', sortable: true},
            {header: "Last_Name", width: 60, dataIndex: 'Last_Name', sortable: true},
                           {header: "Notes", width:80, dataIndex: 'Notes', sortable: true}

        ],
        renderTo:'example-grid',
        width:2000,
        height:1000
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T06:14:20.653

您可以发布从“http://someurl”获得的 JSON 响应吗？

我希望您的 JSON 响应具有以下键“User_Id”、“First_Name”、“Last_Name”、“Notes”的键值对。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T06:44:17.790

ExtJS 期望这样的 json 响应：

```
{
    "ResponseCode": "111",
    "success": true,
    "total": 1,
    "data": [{
        "User_Id": 1,
        "First_Name": "abcd",
        "Last_Name": "efgh",
        "Notes": null
    }]
}​ 
```

# ruby-on-rails - 如何验证用户只编辑自己的传记

> ID：12153581
> 
> 赞同：0
> 
> 时间：2012-08-28T06:05:33.793
> 
> 标签：ruby-on-rails

我有两个模型*user*和*bio*，它们都有一对一的关联。

每个用户都有一个传记。我的问题是，我想允许用户只编辑他们自己的传记，但一个用户可以从 url 编辑其他人的传记

例如“0.0.0.0:3000/biographies/8/edit”。在这里，用户可以轻松更改 id。

我怎么能阻止这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T07:50:21.110

```
before_filter :fetch_bio, :only => [:edit, :update]

def fetch_bio
  @biography = current_user.biographies.find(params[:id])
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T06:11:03.927

在您的`biographies`控制器中，在“编辑”操作（以及更新）下，将其插入到您的调用下方`@biography = Biography.find(params[:id])`：

```
unless @biography.user == current_user
    redirect_to root_path, notice: "You cannot do that" and return
end 
```

# php - symfony2 路由问题

> ID：12153583
> 
> 赞同：0
> 
> 时间：2012-08-28T06:05:42.403
> 
> 标签：php, symfony

我收到以下错误：

```
The autoloader expected class "Acme\HelloBundle\Controller\HelloController" to be defined in file "/var/www/Symfony/app/../src/Acme/HelloBundle/Controller/HelloController.php". The file was found but the class was not in it, the class name or namespace probably has a typo. 
```

我拥有的控制器代码实际上是：

```
namespace Acme\HelloBundle\Controller;

use Symfony\Component\HttpFoundation\Response;

class HelloController
{
    public function indexAction($name)
    {
        return new Response('<html><body>Hello '.$name.'!</body></html>');
    }
} 
```

知道这是为什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T02:39:29.153

`<?php namespace Acme\HelloBundle\Controller; ....`

只需在开头添加 "*LESS_THAN*"?php 标签。试试看是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T07:33:33.457

你的控制器应该扩展`Symfony\Bundle\FrameworkBundle\Controller\Controller`

```
namespace Acme\HelloBundle\Controller;

use Symfony\Component\HttpFoundation\Response;
use namespace Acme\HelloBundle\Controller;

class HelloController extends Controller
{
    public function indexAction($name)
    {
        return new Response('<html><body>Hello '.$name.'!</body></html>');
    }
} 
```

# php - PayPal 立即购买按钮：添加我自己的价格？

> ID：12153585
> 
> 赞同：0
> 
> 时间：2012-08-28T06:05:47.447
> 
> 标签：php, api, variables, paypal

我有一个用户在到达 PayPal Buy Now 按钮之前填写的表格。该表单包含用户姓名和他们将支付的金额等信息（在隐藏字段中）。

我知道可能有一种方法可以使用高级变量功能将名称变量传递给 PayPal，但是有没有办法改变按钮价格？

我可以使用 PHP 变量来做到这一点吗？

例如：`item_name=<?php $myitem ?>`

任何建议都会很棒！谢谢

编辑：按要求填写

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="hosted_button_id" value="XXXX">
<input type="image" src="https://www.paypalobjects.com/en_AU/i/btn/btn_buynowCC_LG.gif" border="0" name="submit" alt="PayPal — The safer, easier way to pay online.">
<img alt="" border="0" src="https://www.paypalobjects.com/en_AU/i/scr/pixel.gif" width="1" height="1">
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T06:30:00.383

如果我正确理解您的问题，您必须将`amount`隐藏字段放在贝宝表单上。例如

```
<input type="hidden" name="amount" value="100">
<input type="hidden" name="currency_code" value="USD"> 
```

此表格将提示贝宝向买家索要 100 美元。

当然，您可以在那里添加自己的 var，例如

```
<input type="hidden" name="amount" value="<?php echo $amount;?>"> 
```

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T10:51:21.767

我什至无法使用非托管按钮进行此操作。Paypal 似乎从不允许您更改金额。我是这样看的：

托管按钮：金额在“托管按钮 id”指向的代码中设置 非托管按钮：PayPal 加密信息，其中金额是其中的一部分

因此，无论哪种情况，您都无法更改它，或者至少，我无法做到这一点。

话虽如此，您可以使用一个名为“金额”的变量。所以，我对此感到非常困惑。

# jquery - 如何从 jquery 样板中调用变量

> ID：12153586
> 
> 赞同：0
> 
> 时间：2012-08-28T06:06:01.207
> 
> 标签：jquery, jquery-plugins, boilerplate

任何人都知道如何将默认值传递给元素。这是在 Jquery 样板中。例如，propertyname 现在应该是“这是一个测试”。TIA

```
;(function ( $, window, undefined ) {

var pluginName = 'defaultPluginName',
    document = window.document,
    defaults = {
        propertyName: "value"
    };

function Plugin( element, options ) {
    this.element = element;
    this.options = $.extend( {}, defaults, options) ;
     _option = option;
    this._defaults = defaults;
    this._name = pluginName;

    this.init();

}

Plugin.prototype.init = function () {
     $("#test").text(_option.propertyName);
    // code goes here   

};//init

$.fn[pluginName] = function ( options ) {
    return this.each(function () {
        if (!$.data(this, 'plugin_' + pluginName)) {
            $.data(this, 'plugin_' + pluginName, new Plugin( this, options ));
        }
    });
  };

}(jQuery, window));

$('#test').defaultPluginName({propertyName: "this is a test"}); 
```

# jquery - Magento巧克力店

> ID：12153587
> 
> 赞同：0
> 
> 时间：2012-08-28T06:06:07.133
> 
> 标签：jquery, html, css, magento

我们正在创建一个 magento 巧克力商店，问题是我们想要实现一个巧克力盒，用户可以在其中选择巧克力盒（4 件，9 件等），选择后产品应添加到购物车中。任何建议和方法.

这类似于此[线程](https://stackoverflow.com/questions/4624758/magento-creating-a-drag-and-drop-chocolate-box-picker)

但是那里的答案没有达到我的目的

谢谢卡提克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:27:30.223

你必须使用火箭科学。:)

不，认真的。你会编程很多。
您将需要一个拖放库，如 jQuery UI 为您提供的。
将其集成到您的 magento 模板中，然后根据对 magento 的 AJAX 调用响应用户操作。

所以涉及到很多技术。JavaScript，一个 JavaScript 库，AJAX，magento，...

或者也许有 magento 插件可以解决您的问题。

# java - 从不同包中的类加载包内的 Java 图像

> ID：12153590
> 
> 赞同：16
> 
> 时间：2012-08-28T06:06:28.197
> 
> 标签：java, image, bufferedimage

我有一个名为 MyProject 的 Java 项目。我有几个不同的包（为了这个问题的目的保持名称简单），如下所示：

```
src/PackageA
src/PackageA/PackageAa
src/PackageA/PackageAa/PackageAaa
src/PackageB
src/PackageB/PackageBa
src/PackageB/PackageBa/PackageBaa 
```

我有一堂课

```
src/PackageA/PackageAa/PackageAaa/MyJavaFile.java 
```

我有一个图像

```
src/PackageB/PackageBa/PackageBaa/MyImage.png 
```

在里面`MyJavaFile.java`，我想声明一个 Image 对象`MyImage.png`

```
Image img = new Image(....what goes here?...) 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-28T06:13:27.760

您可以调用`Class.getResource`并指定以 开头的路径`/`，也可以`ClassLoader.getResource`不打扰`/`：

```
URL resource = MyJavaFile.class
      .getResource("/PackageB/PackageBa/PackageBaa/MyImage.png"); 
```

或者：

```
URL resource = MyJavaFile.class.getClassLoader()
      .getResource("PackageB/PackageBa/PackageBaa/MyImage.png"); 
```

基本上`Class.getResource`将允许您指定相对于类的资源，但我*认为*它不允许您使用“..”等进行目录导航。

当然，如果您知道正确包中的类，则可以使用：

```
URL resource = SomeClassInPackageBaa.class.getResource("MyImage.png"); 
```

（我假设您可以将 a 传递给有问题`URL`的`Image`构造函数。还有`getResourceAsStream`和。）`Class``ClassLoader`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-10-01T23:24:29.850

您可以使用相对路径，因为相对路径是项目文件夹。

```
 ImageIcon img = new ImageIcon("src/PackageB/PackageBa/PackageBaa/MyImage.png"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-28T06:12:34.913

```
/folderB/folderBa/folderBaa/MyImage.png 
```

图像可以存储到项目文件夹位置。例如：`/images/MyImage.png`

然后尝试：

```
Image img = new Image(/images/MyImage.png); 
```

运行 jar 文件中的程序时，无法使用文件路径，尤其是当程序作为 applet 或 WebStart 应用程序加载时，您可以使用 ClassLoader 获取图像。

**使用以下代码加载图像：**

```
ClassLoader cldr = this.getClass().getClassLoader();

java.net.URL imageURL = cldr.getResource("/PackageB/PackageBa/PackageBaa/MyImage.png");
ImageIcon aceOfDiamonds = new ImageIcon(imageURL); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-30T22:57:21.507

**这是处理 JAR 应用程序中所有图像和图标的最佳方式。**

一旦您将所有图像和图标压缩到其自己的 JAR 文件中 - 通过将图像 JAR 文件添加到您的库选项卡中来配置您的构建路径，以便它现在包含在您的类路径中。

然后只需在构造函数的开头使用以下**3x 行代码**来访问您需要的任何图像，包括不接受简单 I​​mageIcon 作为其主图标的 SystemTray 图像（我知道很奇怪）。3x 行是：

```
 URL iconUrl = this.getClass().getResource("/image-iconb.png");
  Toolkit tk = this.getToolkit();
  imageIcon = tk.getImage(iconUrl); 
```

（imageIcon 只是一个构造函数声明的 Image 变量） **现在您可以**简单地设置窗口图标：

```
setIconImage(imageIcon ); 
```

**同时**在设置 System TrayIcon 时使用相同的变量，方法是声明：

```
 trayIcon = new TrayIcon(imageIcon, "SystemTray Demo", popupMenu); 
```

以上允许您轻松集中地声明图像或图像图标，而不会冒没有将图像资源保存在正确位置的风险。它保持整洁，JAR 包含在运行时自动编译的所有图像和程序的分发。

**作为奖励**，一旦 JAR 在您的类路径中注册 - 您可以随时将任何其他图像添加到同一个 JAR 中而无需大惊小怪 - 一切正常，添加的图像立即可用于您的应用程序。

在我看来好多了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-09T10:07:31.843

使用 getResource 方法读取 src 根目录内的资源。例如，以下代码从文件夹 src/images 中检索图像。

```
// Get current classloader
ClassLoader cl = this.getClass().getClassLoader();
// Create icons
Icon saveIcon  = new ImageIcon(cl.getResource("images/save.gif"));
Icon cutIcon   = new ImageIcon(cl.getResource("images/cut.gif")); 
```

该示例假定应用程序的 JAR 文件中存在以下条目：

```
images/save.gif
images/cut.gif 
```

# javascript - 如何在其他公共站点中提取外部网站 URL？

> ID：12153597
> 
> 赞同：0
> 
> 时间：2012-08-28T06:07:04.413
> 
> 标签：javascript, json, api

我正在做一个小部件类的项目。我有一个外部 URL - [http://live.cricnepal.com](http://live.cricnepal.com)。这是板球（比赛）的记分卡。现在我想将此网址分享给公众，例如：制作小部件、插件等。

我目前正在 iframe(http://www.cricnepal.com)、(http://www.digitec.com.np) 的帮助下提取 url，并且还使用 iframe 在 wordpress 中开发了一个简单的插件。我需要你们的帮助，了解如何通过 javascript api、json/np 等提取 url，以便我可以将此小部件分享给其他网站所有者/板球爱好者。

期待您的帮助。干杯! 祝你有美好的一天。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T06:19:21.060

这就是如何提取 URL 并编写它。

```
<script>

document.write(location.href);

</script> 
```

# javascript - 父级和 iframe 中的 Bootstrap.js 文件

> ID：12153598
> 
> 赞同：1
> 
> 时间：2012-08-28T06:07:06.113
> 
> 标签：javascript, web, twitter-bootstrap, javascript-framework

我正在使用 twitter 的引导程序创建一个 Web 应用程序。该应用程序包含一个页面，该页面在 iframe 中加载同一域的另一个页面。现在我的问题是，如果我在 iframe 中加载的页面也包含 bootstrap.js 文件，它开始与应用程序冲突。例如，我的应用程序有一个使用数据属性构建的手风琴（折叠） [http://twitter.github.com/bootstrap/javascript.html#collapse 。](http://twitter.github.com/bootstrap/javascript.html#collapse)加载带有 bootstrap.js 的页面后，折叠事件开始被触发两次。所以类似于

```
<head>//Bootstrap css and js files included</head>
<body>
   <div>
     //Collapsible Menu #1
   </div>
   <iframe>
       <head>
           //BootStrap.js script from same location as parent
       </head>
       <body>
           // Another Collapsible Menu #2
       </body>
    `  </head> 
   </iframe>
</body> 
```

在这里，当我尝试单击菜单 #1 时，Bootstrap.js 的代码被触发两次，最终显示然后隐藏菜单。但我的问题不仅限于菜单。我需要能够在我的应用程序中使用 bootstrap.js，并且还允许在 iframe 中加载已经包含 bootstrap.js 的页面。

有没有办法解决这个问题或者我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-07T04:49:37.993

发现了问题..它对我的应用程序非常具体。它的工作方式是 - 有一个包含的 JS 文件来触发“目标”网页内的应用程序。JS 文件不会从页面中删除所有内容并构建一个 iframe 以将“目标”的内容加载到 iframe 中。现在在这种情况下，我让 BootstrapJS 在 app.js 文件之前运行，这反过来导致在“父”框架中执行，然后当应用程序加载时它被重新加载导致冲突（或由于多次包含而导致的多个事件） .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T10:42:25.777

我只在 IE9 中遇到了同样的问题。

我在 IFRAME 对话框中打开了我的网站的一个实例。这意味着有 2 个 Bootstrap 实例，如上所示。

当我将鼠标移出 IFRAME 时，它会调整底层布局的大小以匹配 IFRAME 中较小布局的宽度。

为了解决这个问题，我不得不使用 javascript 禁用打开页面 bootstrap-responsive.js 样式表。然后，您可以在关闭 IFRAME 对话框时重新打开它。

```
if(navigator.userAgent.indexOf("Trident/5")>-1){
    window.parent.document.getElementById("responsiveCSS").sheet.disabled = true;
} 
```

可怕的黑客攻击，我知道。

# database - 如何在 sqlite 表中查找特定主键的所有引用？

> ID：12153600
> 
> 赞同：3
> 
> 时间：2012-08-28T06:07:14.840
> 
> 标签：database, sqlite, foreign-keys, primary-key, constraints

我已经设定`PRAGMA foreign_keys=ON;`

我正在尝试删除 sqlite3 表中的一些记录并显示`Error: constraint failed`

```
sqlite> delete from auth_user where id = 110;
Error: constraint failed 
```

如果`PRAGMA foreign_keys`关闭，它会起作用。数据库有很多表，错误很模糊。如果我们尝试删除，我认为其他数据库系统会列出引用主键的表。

我可以找到引用该特定主键 id=110 的所有表的有效方法是什么？

架构：

```
CREATE TABLE "auth_user" (
    "id" integer NOT NULL PRIMARY KEY,
    "username" varchar(30) NOT NULL UNIQUE,
    "first_name" varchar(30) NOT NULL,
    "last_name" varchar(30) NOT NULL,
    "email" varchar(75) NOT NULL,
    "password" varchar(128) NOT NULL,
    "is_staff" bool NOT NULL,
    "is_active" bool NOT NULL,
    "is_superuser" bool NOT NULL,
    "last_login" datetime NOT NULL,
    "date_joined" datetime NOT NULL
); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T09:10:09.003

我认为没有一种明确的方法可以使用 SQLite 列出外键约束。但是，您可以列出所有具有此类约束的表，如下所示。然后，您可以解析返回的 SQL 以找到约束。

假设您有两个父子表：

```
sqlite> PRAGMA foreign_keys=ON;
sqlite> create table Parent (
   ...>     Id INTEGER PRIMARY KEY AUTOINCREMENT, 
   ...>     foo TEXT);
sqlite> create table Child (
   ...>     Id INTEGER PRIMARY KEY AUTOINCREMENT, 
   ...>     ParentId INTEGER NOT NULL, 
   ...>     bar TEXT,
   ...>     FOREIGN KEY (ParentId) REFERENCES Parent(Id)); 
```

您可以列出`CREATE TABLE`具有外键的语句：

```
sqlite> SELECT sql FROM sqlite_master WHERE sql LIKE '%REFERENCES%';
CREATE TABLE Child (
    Id INTEGER PRIMARY KEY AUTOINCREMENT, 
    ParentId INTEGER NOT NULL, 
    bar TEXT,
    FOREIGN KEY (ParentId) REFERENCES Parent(Id)) 
```

您可能已经知道这一点，但是在关闭外键时删除受某些外键约束的行会破坏数据库的引用完整性，所以我只能建议您不要这样做。

# python - 如何从 Fabric 的本地命令中捕获 stderr？

> ID：12153601
> 
> 赞同：19
> 
> 时间：2012-08-28T06:07:20.237
> 
> 标签：python, python-2.7, fabric, stderr

Fabric v1.4.3 不捕获“python --version”的输出

```
def python_v():
    m = local('python --version', capture=True)
    print(m) 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-28T07:14:23.050

`local`with`capture=True`返回命令的`stdout`; 一个简单的测试显示在 .`python --version`上打印版本信息`stderr`。因此，您可以尝试在命令中重定向`stderr`到`stdout`：

```
m = local('python --version 2>&1', capture=True) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-07-30T06:57:39.333

我发现以下方式比接受的答案更干净：

`print m.stderr`

（谢谢雷莫苏！）

# android - 安装从 .net Web 服务下载的 .apk 时出现问题

> ID：12153605
> 
> 赞同：0
> 
> 时间：2012-08-28T06:07:54.803
> 
> 标签：android, asp.net, web-services

场景：我正在从 asp.net Web 服务下载一个文件到我的 android 应用程序中。Web 服务返回一个字节数组。我能够将文件下载到特定位置。但是当我在 Android 中运行它时，它给出的信息是：

> “解析包的问题”

这是我的网络服务代码和 Android 代码：

**网络服务代码：**

```
 [WebMethod]
        public byte[] GetApkFile(string deviceID)
        {
                try
                {
                        string path = "D:\\Users\\CHAITANYA\\Documents";
                        string fileName = path + "\\sample.apk";
                        FileStream fileStream = File.OpenRead(fileName);
                        return ConvertStreamToByteBuffer(fileStream);
                }
                catch (Exception ex)
                {
                        throw ex;

            }

        }

        public byte[] ConvertStreamToByteBuffer(System.IO.Stream theStream)
        {
                int b1;
                System.IO.MemoryStream tempStream = new System.IO.MemoryStream();
                while ((b1 = theStream.ReadByte()) != -1)
                {
                        tempStream.WriteByte(((byte)b1));
            }
                    return tempStream.ToArray();
        } 
```

**安卓代码：**

```
 package com.example.dwnload;

    import java.io.BufferedOutputStream;
    import java.io.BufferedReader;
    import java.io.File;
    import java.io.FileOutputStream;
    import java.io.FileReader;
    import java.io.IOException;

    import org.ksoap2.SoapEnvelope;
    import org.ksoap2.serialization.MarshalBase64;
    import org.ksoap2.serialization.SoapObject;
    import org.ksoap2.serialization.SoapSerializationEnvelope;
    import org.ksoap2.transport.HttpTransportSE;

    import android.app.Activity;
    import android.os.Bundle;
    import android.os.Environment;
    import android.telephony.TelephonyManager;
    import android.view.View;
    import android.widget.Button;
    import android.widget.TextView;

    public class FileDownloadActivity extends Activity 
    {
            /** Called when the activity is first created. */

        TextView tv;
        Button dwnload;

            @Override
            public void onCreate(Bundle savedInstanceState) 
            {
                    super.onCreate(savedInstanceState);
                    setContentView(R.layout.main);
                    dwnload=(Button)this.findViewById(R.id.button1);
                    tv=(TextView)this.findViewById(R.id.textView1);
                    dwnload.setOnClickListener(new View.OnClickListener()
                    {

                public void onClick(View arg0)
                {

                    TelephonyManager TelephonyMgr = (TelephonyManager)getSystemService(TELEPHONY_SERVICE);
                            String deviceId = TelephonyMgr.getDeviceId(); 
                            String SOAP_ACTION = "http://tempuri.org/GetApkFile";       
                            String METHOD_NAME = "GetApkFile";
                            String NAMESPACE = "http://tempuri.org/";
                            final String URL = "http://10.0.2.2/Dashboard/Service.asmx";

                            SoapObject request = new SoapObject(NAMESPACE,METHOD_NAME);
                            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
                            //new MarshalBase64().register(envelope); 
                            envelope.encodingStyle = SoapEnvelope.ENC;
                            request.addProperty("deviceID", deviceId);  
                            //tv.setText(deviceId.toString());
                            envelope.setOutputSoapObject(request);
                            envelope.dotNet = true;
                            envelope.setOutputSoapObject(request);
                            HttpTransportSE httpTransport = new HttpTransportSE(URL);
                            try 
                            {
                                httpTransport.call(SOAP_ACTION, envelope);
                                //SoapObject response = (SoapObject)envelope.getResponse();
                                Object response = envelope.getResponse();
                                byte[] b=response.toString().getBytes();
                                String s = new String(b);

                                try 
                                {
                                            String filePath = Environment.getExternalStorageDirectory()+ "/myappdir/" + "sample.apk" ;

                                                          File file = new File(filePath);
                                            file.getParentFile().mkdirs();
                                            file.createNewFile();

                                            BufferedOutputStream objectOut = new BufferedOutputStream(new FileOutputStream(file));
                                            objectOut.write(b);
                                            objectOut.close();

                                           }
                                catch (Exception e) 
                                {
                                            e.printStackTrace();
                                }

                        }   

                            catch (Exception exception) 
                            {
                                exception.toString();           
                            }
                }
            });
                } 

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:45:26.187

你在android上有一条线

```
byte[] b=response.toString().getBytes(); 
```

应该替换为

```
byte[] b=Base64.decode(response.toString()); 
```

因为肥皂信封会将其编码为 <base64Binary>
并且不要忘记`import org.kobjects.base64.Base64;`

刚刚发现了一些关于 .net 部分的信息。您的文件读取方法没有正确传输文件...而不是 ReadByte 我使用了 Read 并传递了数组（作为参考），然后返回了包含正确数据的数组：

```
[WebMethod]
public byte[] GetApk()
{
    string file = "file name goes here";
    FileStream stream = File.OpenRead(file);

    byte[] buffer = new byte[stream.Length];
    stream.Read(buffer, 0, (int)stream.Length);

    return buffer;
} 
```

为我工作......现在我的应用程序可以自动更新;）我希望它也适合你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T06:48:33.150

我建议您遵循一些调试步骤。

首先验证您的 Web 服务是否按预期工作。
您可以通过编写一个基于 .net 的客户端来完成此操作，该客户端将下载您的文件并将其写入磁盘。您可以进行二进制比较以查看您是否获得了预期的文件。

如果您确实按预期获得了文件，那么您的 Web 服务工作正常。

现在将此文件与使用 android 下载的文件进行比较。

这应该可以帮助您隔离错误。

# objective-c - 如何在我的 ios 应用程序中不调用触摸事件的情况下为球体添加 3D 变换动画

> ID：12153607
> 
> 赞同：1
> 
> 时间：2012-08-28T06:08:03.677
> 
> 标签：objective-c, ipad, core-animation

如何在我的 iPad 应用程序中不进行任何触摸的情况下将连续 3D 变换动画应用到视图。在我的应用程序中，我有一个球形视图，我想在 x 轴上连续旋转该视图，而无需任何用户交互。请帮我。

谢谢拉克希米

# c# - svn 使用 C# 程序签出

> ID：12153608
> 
> 赞同：2
> 
> 时间：2012-08-28T06:08:06.743
> 
> 标签：c#, svn, command-prompt

我正在编写一个小实用程序来使用 c# 程序执行 svn 命令

这是我程序中的关键行

System.Diagnostics.Process.Start("CMD.exe", @"svn checkout C:\TestBuildDevelopment\Code");

正如我所假设的，上面的代码应该能够进行 svn check out 并将所有代码下载到上面提到的本地路径。但是发生的事情是，命令提示符以 c# 项目的默认路径打开，并且什么也不做。

如果我在命令行中运行这个 svn 命令，它工作正常。但是当我使用 C# 运行时，它只是弹出命令提示符而不执行 svn checkout 操作。关于出了什么问题的任何想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T06:12:28.950

您不必运行 CMD.exe。CMD.exe 只是一个调用其他程序集的程序。您可以使用参数 checkout 直接调用 svn.exe ...（但是否缺少 url？）

```
Process.Start("svn.exe", @"checkout C:\TestBuildDevelopment\Code"); 
```

你也可以试试这个：

```
Process proc = new Process();
ProcessStartInfo startInfo = new ProcessStartInfo();
startInfo.RedirectStandardOutput = true;
startInfo.WindowStyle = ProcessWindowStyle.Hidden;
startInfo.FileName = "svn.exe";
startInfo.CreateNoWindow = true;
startInfo.Arguments = "checkout ...";

proc.StartInfo = startInfo;
if(proc.Start()) {
    proc.WaitForExit();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T06:10:59.330

您需要添加参数`/c`。尝试：

```
Process.Start("CMD.exe", @"/c svn checkout C:\TestBuildDevelopment\Code"); 
```

该参数`/c`表示cmd应该执行命令并退出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T06:13:11.753

正如 Jon 所说，在这里 svnsharp 将是一个不错的选择。但 IMO 的问题是炮击 cmd.exe，而不是你实际想要运行的 exe：

```
Process.Start(@"path\to\svn.exe", @"checkout ""C:\TestBuildDevelopment\Code"""); 
```

虽然 a`ProcessStartInfo`会更容易设置工作路径等。

# blackberry - 黑莓分辨率

> ID：12153613
> 
> 赞同：1
> 
> 时间：2012-08-28T06:08:48.217
> 
> 标签：blackberry, blackberry-simulator, blackberry-playbook

黑莓中是否有任何分辨率为 680x800 的模拟器？

我已经搜索了很多..但我无法得到具体的结果..

我下载 Simulaors 的站点不提供分辨率信息。

[http://swdownloads.blackberry.com/Downloads/contactFormPreload.do?code=060AD92489947D410D897474079C1477&dl=7A51789FDE2B3B44C6ED1BA5D80D53CB&check1=A](http://swdownloads.blackberry.com/Downloads/contactFormPreload.do?code=060AD92489947D410D897474079C1477&dl=7A51789FDE2B3B44C6ED1BA5D80D53CB&check1=A)

请帮我...

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-24T13:59:58.377

我不相信有具有该分辨率的黑莓设备。以下是一些旧版 BB 设备的列表：http: [//supportforums.blackberry.com/t5/Java-Development/List-of-Blackberry-Devices-with-resolution/td-p/556066](http://supportforums.blackberry.com/t5/Java-Development/List-of-Blackberry-Devices-with-resolution/td-p/556066)

黑莓 Playbook 使用 1024 x 600。Z10 为 768 x 1280 Q10 为 720 x 720

此外，gsmarena.com 上没有针对具有“680 x 800”或“800 x 680”屏幕的设备的结果。

# python - 解析参数字符串的最佳pythonic方法？

> ID：12153614
> 
> 赞同：2
> 
> 时间：2012-08-28T06:09:09.433
> 
> 标签：python, string, parsing

从某处接收一个字符串，该字符串是一系列参数。参数由空格分隔。任务是将字符串解析为参数列表，所有参数都是字符串类型。

例如：

```
input : "3 45 5.5 a bc"
output : ["3","45","5.5","a","bc"] 
```

如果需要传输包含空格的字符串，则事情变得有点复杂，用于`"`引用。

```
input: "3 45 5.5 \"This is a sentence.\" bc"
output: ["3","45","5.5","This is a sentence.","bc"] 
```

但是，如果句子恰好包含引号怎么办？使用转义字符：`\"`-> `"`, `\\`->`\`

```
input: "3 45 5.5 \"\\\"Yes\\\\No?\\\" it said.\" bc"
output: ['3','45','5.5','"Yes\\NO?" it said.','bc'] 
```

python是否有一种优雅的方式来完成这项工作？

PS。我不认为正则表达式可以解决这个问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T06:23:21.990

使用[`shlex.split()`功能](http://docs.python.org/library/shlex.html#shlex.split)：

```
>>> import shlex
>>> shlex.split("3 45 5.5 a bc")
['3', '45', '5.5', 'a', 'bc']
>>> shlex.split("3 45 5.5 \"This is a sentence.\" bc")
['3', '45', '5.5', 'This is a sentence.', 'bc']
>>> shlex.split("3 45 5.5 \"\\\"Yes\\\\No?\\\" it said.\" bc")
['3', '45', '5.5', '"Yes\\No?" it said.', 'bc'] 
```

[`shlex.shlex`您可以使用function](http://docs.python.org/library/shlex.html#shlex.shlex)创建一个可自定义的解析器，然后通过设置其属性来改变它的行为。例如，您可以将`.whitespace`属性设置`', \t\r\n'`为允许逗号分隔单词。然后只需将`shlex`实例转换回列表以拆分输入。

# objective-c - 如何通过 NSArrayController 从 Core Data 填充 NSTableView？

> ID：12153616
> 
> 赞同：1
> 
> 时间：2012-08-28T06:09:21.603
> 
> 标签：objective-c, core-data, nstableview, nsarraycontroller

最初我是通过一个插座填充我的 NSTableView 并将表的 dataSource 设置为我的控制器类。我正在尝试切换到使用 NSArrayController，以便可以在我的应用程序中启用按列排序。

在 IB 中，我添加了一个数组控制器对象。我将排序描述符绑定连接到共享用户默认控制器，以便排序列可以在我的应用程序启动之间保持不变。我将表的每一列都绑定到数组控制器，控制器键设置为“arrangedObjects”，模型键路径设置为应该呈现的字段的名称。

我的数据来自核心数据，我试图显示的实体与另一个实体有关系。第二个实体上的属性需要显示为表列之一的值。有人对我在这里缺少的东西有任何想法/建议吗？

主窗口控制器.h

```
#import <Cocoa/Cocoa.h>
#import "Notification.h"

@class AppDelegate;

@interface MainWindowController : NSWindowController <NSTableViewDataSource, NSTableViewDelegate> {
    AppDelegate <NSApplicationDelegate> *appDelegate;
}

//@property NSMutableArray *userNotifications;

@property (weak) IBOutlet NSTableView *notificationsTable;
@property (weak) IBOutlet NSArrayController *notificationsController;

@end 
```

主窗口控制器.m

```
#import "AppDelegate.h"
#import "MainWindowController.h"
#import "Utils.h"

@implementation MainWindowController

//@synthesize userNotifications;

@synthesize notificationsTable;
@synthesize notificationsController;

- (void) doubleClick:(id)sender
{
    NSInteger row = [notificationsTable clickedRow];

//  Notification *clickedNotification = [userNotifications objectAtIndex:row];
//  Notification *clickedNotification = 

//  [appDelegate redirectToBrowser:clickedNotification];
}

- (id) initWithWindowNibName:(NSString *)windowNibName
{
    self = [super initWithWindowNibName:windowNibName];
    if (self) {
//      userNotifications = [[NSMutableArray alloc] init];
        appDelegate = (AppDelegate *) [[NSApplication sharedApplication] delegate];
        [notificationsController setManagedObjectContext:[appDelegate managedObjectContext]];
        [notificationsController setEntityName:@"Notification"];
        [notificationsController setAutomaticallyPreparesContent:YES];

        [notificationsController fetch:self];
        [notificationsTable reloadData];
    }
    return self;
}

- (void)windowDidLoad
{
    [super windowDidLoad];

    // Implement this method to handle any initialization after your window controller's window has been loaded from its nib file.

    [notificationsTable reloadData];
}

- (void)awakeFromNib
{
    [notificationsTable setTarget:self];
    [notificationsTable setDoubleAction:@selector(doubleClick:)];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T19:58:44.183

这个问题有两种解决方案：

1.  通过添加新对象并将类设置为*AppDelegate*将 App Delegate 对象添加到 IB 。
2.  通过将以下代码添加到 .h 和 .m 文件中，将 App Delegate 分配为呈现窗口的控制器的实例变量*appDelegate ：*

控制器.h

```
@class AppDelegate;

@interface Controller : NSWindowController {
    AppDelegate <NSApplicationDelegate> *appDelegate;
} 
```

控制器.m

```
#import "AppDelegate.h"

- (id) initWithWindowNibName:(NSString *)windowNibName
{
    self = [super initWithWindowNibName:windowNibName];
    if (self) {
        appDelegate = (AppDelegate *) [[NSApplication sharedApplication] delegate];
    }
    return self;
} 
```

无论哪种情况，您都需要为阵列控制器添加一个新绑定。导航到 Inspector 中的 Binding 窗格并将 Managed Object Context（在 Parameters 下）设置为 Bind to (1) App Delegate 或 (2) File's Owner，然后将 Model Key Path 设置为 (1) self.managedObjectContext 或 ( 2) self.appDelegate.managedObjectContext

# entity-framework - 用于记录的实体框架多个上下文

> ID：12153619
> 
> 赞同：3
> 
> 时间：2012-08-28T06:09:35.013
> 
> 标签：entity-framework, datacontext

我看过相当多的文章/帖子建议在使用 EF 时每个请求不要有多个上下文。

有第二个上下文用于记录目的是否有效，例如“用户 x 做了 y”、“从 z 登录失败”等。

这背后的基本原理是，即使在使用“主要”上下文时出现错误，我也希望记录这些错误，即。外键问题等

有没有其他方法可以做到这一点，或者如果我沿着这条路走，有什么可以尝试避免的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T08:25:56.763

如果您的应用程序逻辑确实需要它们，您总是可以拥有更多的上下文实例，并且即使主上下文中的数据无效，也可以将日志持久化到数据库的能力可以被认为是这种情况。您只需要确保您的更新不会在同一个事务中运行（它们也必须使用不同的数据库连接） - 这应该是默认行为，除非您使用`TransactionScope`.

# java - 如何在窗口关闭时关闭 JavaFX 应用程序？

> ID：12153622
> 
> 赞同：84
> 
> 时间：2012-08-28T06:10:00.050
> 
> 标签：java, javafx, javafx-2, javafx-8

在 Swing 中，您可以简单地使用`setDefaultCloseOperation()`在窗口关闭时关闭整个应用程序。

但是在 JavaFX 中我找不到等价物。我打开了多个窗口，如果窗口关闭，我想关闭整个应用程序。在 JavaFX 中这样做的方法是什么？

编辑：

我知道我可以重写`setOnCloseRequest()`以在关闭窗口时执行一些操作。问题是应该执行什么操作来终止整个应用程序？

```
stage.setOnCloseRequest(new EventHandler<WindowEvent>() {
    @Override
    public void handle(WindowEvent event) {
        stop();
    }
}); 
```

`stop()`类中定义的方法`Application`什么都不做。

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-08-28T06:50:31.823

当最后一个`Stage`关闭时，应用程序会自动停止。此时`stop()`，您的`Application`类的方法被调用，因此您不需要等效于`setDefaultCloseOperation()`

如果您想在此之前停止应用程序，您可以调用`Platform.exit()`，例如在您的`onCloseRequest`调用中。

您可以在以下的 javadoc 页面上获得所有这些信息：http `Application`: [//docs.oracle.com/javafx/2/api/javafx/application/Application.html](http://docs.oracle.com/javafx/2/api/javafx/application/Application.html)

* * *

## 回答 #2

> 赞同：77
> 
> 时间：2015-07-20T14:25:17.930

提供的一些答案对我不起作用（关闭窗口后 javaw.exe 仍在运行），或者 Eclipse 在应用程序关闭后显示异常。

另一方面，这完美地工作：

```
primaryStage.setOnCloseRequest(new EventHandler<WindowEvent>() {
    @Override
    public void handle(WindowEvent t) {
        Platform.exit();
        System.exit(0);
    }
}); 
```

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2015-05-08T09:50:01.177

作为参考，这里是使用 Java 8 的最小实现：

```
@Override
public void start(Stage mainStage) throws Exception {

    Scene scene = new Scene(new Region());
    mainStage.setWidth(640);
    mainStage.setHeight(480);
    mainStage.setScene(scene);

    //this makes all stages close and the app exit when the main stage is closed
    mainStage.setOnCloseRequest(e -> Platform.exit());

    //add real stuff to the scene...
    //open secondary stages... etc...
} 
```

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2015-06-09T05:49:55.890

```
stage.setOnCloseRequest(new EventHandler<WindowEvent>() {
    @Override
    public void handle(WindowEvent event) {
        Platform.exit();
        System.exit(0);
    }
}); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-28T06:19:00.807

你试过这个.. [setOnCloseRequest](http://docs.oracle.com/javafx/2/api/javafx/stage/Window.html#setOnCloseRequest%28javafx.event.EventHandler%29)

```
setOnCloseRequest(EventHandler<WindowEvent> value) 
```

有一个[例子](https://forums.oracle.com/forums/thread.jspa?threadID=2335823)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-10-11T21:23:55.100

使用 Java 8 这对我有用：

```
@Override
public void start(Stage stage) {
    Scene scene = new Scene(new Region());
    stage.setScene(scene);

    /* ... OTHER STUFF ... */

    stage.setOnCloseRequest(e -> {
        Platform.exit();
        System.exit(0);
    });
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-05-31T03:57:42.233

与其玩弄 onCloseRequest 处理程序或窗口事件，我更喜欢调用`Platform.setImplicitExit(true)`应用程序的开头。

根据JavaDocs：

> “如果此属性为真，JavaFX 运行时将在最后一个窗口关闭时隐式关闭；JavaFX 启动器将调用 Application.stop() 方法并终止 JavaFX 应用程序线程。”

例子：

```
@Override
void start(Stage primaryStage) {
    Platform.setImplicitExit(true)
    ...
    // create stage and scene
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-04-06T06:12:43.080

对我来说，只有以下工作：

```
primaryStage.setOnCloseRequest(new EventHandler<WindowEvent>() {
    @Override
    public void handle(WindowEvent event) {

        Platform.exit();

        Thread start = new Thread(new Runnable() {
            @Override
            public void run() {
                //TODO Auto-generated method stub
                system.exit(0);     
            }
        });

        start.start();
    }
}); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-04-11T15:35:26.500

这似乎对我有用：

```
EventHandler<ActionEvent> quitHandler = quitEvent -> {

        System.exit(0);

    };
    // Set the handler on the Start/Resume button
    quit.setOnAction(quitHandler); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-05-08T11:23:20.747

尝试

```
 System.exit(0); 
```

这应该终止线程主程序并结束主程序

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-05-29T16:50:45.840

getContentPane.remove(jfxPanel);

尝试一下 （：

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2021-05-08T11:36:43.780

在行动按钮试试这个：stage.close();

* * *

例子：

阶段阶段=新阶段（）；

BorderPane root=new BorderPane();

场景场景=新场景（）；

按钮 b= new Button("名称按钮");

```
 b.setOnAction(new EventHandler<ActionEvent>() {

       @Override
        public void handle(ActionEvent event) {

                 stage.close();

            }
            }); 
```

root.getChildren().add(b);

stage.setTitle("");

stage.setScene(场景);

舞台.show();

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2017-06-06T14:26:59.233

您必须覆盖应用程序实例中的“stop()”方法才能使其正常工作。如果您甚至覆盖了空的“stop()”，那么应用程序会在最后一个阶段关闭后优雅地关闭（实际上最后一个阶段必须是主要阶段才能使其完全按预期工作）。在这种情况下，不需要任何额外的 Platform.exit 或 setOnCloseRequest 调用。

# windows-8 - 文本服务和输入法编辑器有什么区别？

> ID：12153625
> 
> 赞同：2
> 
> 时间：2012-08-28T06:10:17.900
> 
> 标签：windows-8, text-services-framework

我是 Windows8 Metro 应用程序开发的新手，文本服务和输入法编辑器是否相似，我不明白其中的区别。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T10:54:16.827

文本服务框架 (TSF) 和输入法版本 (IME) 与 TSF 一起处理由 IME 提供的输入。

[在http://msdn.microsoft.com/en-us/library/hh848069(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/hh848069(v=vs.85).aspx)中有一个很好的关于 Windows 8 中的 IME 的概述

# php - 通过数组在文本框结果旁边添加“删除”链接

> ID：12153627
> 
> 赞同：1
> 
> 时间：2012-08-28T06:10:19.573
> 
> 标签：php, jquery, html, forms

[+] //每次单击此按钮时，文本框都会生成，我希望在每个文本框旁边都有一个链接，当我单击“删除”时，链接是“删除”，文本框将删除..

[hello1] 删除

[hello2] 删除

[hello3] 删除

```
<HTML>
<HEAD>
<SCRIPT LANGUAGE="JavaScript">
var i=0,j=0;
var t1= new Array(); 
function createtext(){
  i++;
  t1[i]=document.createElement('input');
  t1[i].type='text';
  t1[i].name='text'+i;
  t1[i].value = "hello"+i;
  t1[i].size = 10;
  document.forms[0].appendChild(t1[i]);
  var mybr=document.createElement("br");
  document.forms[0].appendChild(mybr);
}
</SCRIPT>
</HEAD>
<BODY >
  <form action="" method="get" name="f1">

    <input name="b1" type="button" onClick="createtext()" value="+">

    <input name="b1" type="Submit"><br>

  </form>
</BODY>
</HTML> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T06:20:32.863

这很简单。

只需在您的文本字段数组中添加一个 id 属性，该属性将分配给每个新创建的文本区域，如下所示：

```
t1[i].id='some_unique_suffix'+i
t1[i].onClick='remove("some_unique_suffix"'+i+')' 
```

然后，您可以通过循环在每个文本字段之后继续创建删除链接，并将该特定文本字段的 id 传递给删除函数，该函数将在单击删除链接时调用，如下所示：

```
function remove(id)
{
    $('#some_unique_suffix'+id).remove(); 
} 
```

希望你能明白。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T06:24:37.537

您可以像这样添加一个删除按钮以及输入标签：

```
var i=0,j=0;
var t1= [];

function add(){
    i++;
    var parent = document.forms[0];
    var div = document.createElement('div');
    var input = document.createElement('input');
    input.type='text';
    input.name='text'+i;
    input.value = "hello"+i;
    input.size = 10;
    t1.push(input);
    div.appendChild(input);
    var removeButton = document.createElement("button");
    removeButton.innerHTML = "Remove";
    removeButton.onclick = function(e) {
        this.parentNode.parentNode.removeChild(this.parentNode);
        return(false);
    };
    div.appendChild(removeButton);
    parent.appendChild(div);
} 
```

工作演示：http: [//jsfiddle.net/jfriend00/ky9nv/](http://jsfiddle.net/jfriend00/ky9nv/)

此代码通过将输入元素及其关联按钮包含在包含 div 中，可以更轻松地删除它们。然后，单击的按钮可以获取它的父容器并将其删除。

而且，由于您的问题是用 jQuery 标记的（认为它不会在这里为您节省很多），所以这是一个使用 jQuery 的版本：

```
var i=0,j=0;
var t1= [];

function add(){
    i++;
    var div = $('<div>');
    var input = $('<input>')
        .attr({
            size: '10',
            type: 'text',
            name: 'text' + i,
            value: 'hello' + i
        }).appendTo(div).get(0);
    t1.push(input);
    $('<button>Remove</button>')
        .click(function() {
            $(this).parent().remove();
        }).appendTo(div);
    $("#myForm").append(div);
}

add();
add();

$("#add").click(add); 
```

工作示例：http: [//jsfiddle.net/jfriend00/nbXak/](http://jsfiddle.net/jfriend00/nbXak/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T06:40:18.377

```
<script type="text/javascript">
var i=0;
function createtext() {
    i++;
    $('<div id="field'+i+'">​&lt;input type="text" name="text'+i+'" value="Hello'+i+'" size="10" /> <a href="#" onclick="removeField(\'field'+i+'\');">Remove</a></div>').appendTo('#inputsPlaceholder');
}
function removeField (id) {
    $('#'+id).remove();
}
</script> 
```

HTML：

```
<form action="" method="get" name="f1" id="f1">
<input name="b1" type="button" onclick="createtext();" value="+" />
<div id="inputsPlaceholder"></div>
<input name="b1" type="submit" />
</form> 
```

试试看：http: [//jsfiddle.net/Z3L5C/](http://jsfiddle.net/Z3L5C/)

# php - mysql服务器消失错误

> ID：12153630
> 
> 赞同：-1
> 
> 时间：2012-08-28T06:10:26.233
> 
> 标签：php, mysql, curl

> **可能重复：**
> [MySQL 服务器已消失](https://stackoverflow.com/questions/4655165/mysql-server-has-gone-away)
> [间歇性 MySQL 服务器已消失错误](https://stackoverflow.com/questions/12149838/intermittent-mysql-server-has-gone-away-error)

插入 curl 响应详细信息时出现 mysql 服务器消失错误。我检查了 mysql 连接是否处于活动状态。mysql 连接仍然处于活动状态，但出现上述错误。

请有任何建议

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T06:14:12.020

您可以轻松找到许多“如何修复‘MySQL 服务器已消失’（错误 2006）”的链接。例如：

*   [http://bogdan.org.ua/2008/12/25/how-to-fix-mysql-server-has-gone-away-error-2006.html](http://bogdan.org.ua/2008/12/25/how-to-fix-mysql-server-has-gone-away-error-2006.html)

*   [http://www.codingforums.com/showthread.php?t=177965](http://www.codingforums.com/showthread.php?t=177965)

*   [MySQL 错误 2006：mysql 服务器已消失](https://stackoverflow.com/questions/7942154/mysql-error-2006-mysql-server-has-gone-away)

*   [http://dev.mysql.com/doc/refman/5.5/en/gone-away.html](http://dev.mysql.com/doc/refman/5.5/en/gone-away.html)

这是一个配置/网络问题。

首先要看的是你的wait_timeout。

# sql-server - 生成自定义唯一标识符 sql server

> ID：12153639
> 
> 赞同：0
> 
> 时间：2012-08-28T06:11:16.643
> 
> 标签：sql-server, uniqueidentifier

我使用 sql server 2012，是否可以基于两个或三个值（主要是 varchars 或十进制）生成唯一标识符值，我的意思是任何采用 0-9 和 az 的数据类型。

通常唯一标识符因系统而异。对于我的要求，我需要一个自定义的，当我调用这个函数时，它应该在所有系统中得到相同的值。

我一直在考虑将这些值转换为 varbinary 并获取其中的某些部分并生成一个唯一标识符。这种方法有多好。

我仍在研究这种方法。

请提供您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T06:20:39.370

Uniqueidentifier 的标准文档详细说明了它们是如何生成的。[http://www.ietf.org/rfc/rfc4122.txt](http://www.ietf.org/rfc/rfc4122.txt)

我会读一读（尤其是 4.1.2。因为它破坏了应该如何生成 guid），也许我会继续使用时间戳组件，但硬编码您的网络位置元素，这将为您提供所需的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T06:33:50.537

您描述的是值的*哈希*值。使用[`HASHBYTES`](http://msdn.microsoft.com/en-us/library/ms174415.aspx)函数将您的值消化成散列。*但是您对问题的定义与唯一性*要求相矛盾， 因为根据定义，将大小为 M 的输入减少为大小为 N 的散列，其中 N < M，可能会产生冲突。如果您真的需要唯一性，那么以至少*允许*唯一性的方式重新定义要求。也就是说，必须放弃对它的要求*应该在所有系统中让我获得相同的值，因为保证它的**唯一*方法是准确输出输入。如果您删除此要求，则新要求满足[`NEWID()`](http://msdn.microsoft.com/en-us/library/ms190348.aspx)（是的，它不考虑输入，但它不*必须*满足您的要求）。

# css - 填充大小设置为 100%，但覆盖了页面的一半？

> ID：12153642
> 
> 赞同：0
> 
> 时间：2012-08-28T06:11:20.983
> 
> 标签：css

我已经设置了一个 div 的样式，这样我就可以在页面顶部有一个用于站点导航的栏。一切都很好，但是栏的填充拒绝覆盖整个页面？当我重新加载页面时，我可以看到条形闪烁以覆盖整个页面，但随后它被重新调整为我浏览器的 50% 左右。

这是我的代码：

```
div.title_main
{
    background-color:rgb(40,40,40);
    position:fixed;
    right:50%;
    top:-1%;
    padding:0.1% 100%;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T06:15:57.313

删除`right: 50%;`然后它应该工作。

看到这个[jsFiddle](http://jsfiddle.net/QfNyq/1/)

# ruby-on-rails - ruby on rails 中是否有类似分钟的方法

> ID：12153644
> 
> 赞同：0
> 
> 时间：2012-08-28T06:11:40.150
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我想知道是否有类似 Time.now.hour 的分钟？我真的很想知道 Time.now.minutes 没有用

感谢您的回答！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T06:12:56.203

`Time.now.min`我想这就是你要找的东西。

# javascript - Javascript：如何从 URL 中获取片段并将其写入一些 PHP？

> ID：12153645
> 
> 赞同：1
> 
> 时间：2012-08-28T06:11:50.063
> 
> 标签：javascript, query-string, window.location

在客户端，我想从窗口位置获取完整的 URL，并将其写入一个简单的 PHP 函数，这样我就可以在 HTML 中将#fragments 回显给用户。

我的网址结构如下：

```
http://example.com/filename.html#var1=FOO&var2=BAR 
```

注意没有`?`。`#`如果这会影响您提出的解决方案，则 使用的查询字符串定界符必须是。

我想完全按照它在窗口位置中显示的完整 url 将其写入这个简单的 PHP 函数::

```
<?php
parse_str (parse_url ("$_want_to_write_the_full_URL_here", PHP_URL_FRAGMENT ), $args);
    echo $args['var1'], ' ', $args['var2'];
?> 
```

我知道我可以像这个例子一样获取窗口位置：

```
<script>alert(window.location);</script> 
```

但是如何在客户端使用 javascript 将其放入 PHP 中？

提前感谢所有巫师！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T06:14:47.293

由于服务器端 PHP 在任何客户端 JavaScript 运行之前运行，因此将数据返回给 PHP 的唯一方法是发出新的 HTTP 请求。

有几种方法可以做到这一点，包括：

*   [XMLHttpRequest](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Using_XMLHttpRequest)对象_
*   动态生成脚本元素（根据[JSONP](http://en.wikipedia.org/wiki/JSONP)）
*   动态生成 iframe/img/etc
*   分配一个新的 URI[`location`](https://developer.mozilla.org/en-US/docs/DOM/window.location)以便浏览器离开当前页面
*   动态生成表单并调用其`submit()`方法

# c++ - 从 C++ 自动化 Microsoft Outlook

> ID：12153648
> 
> 赞同：0
> 
> 时间：2012-08-28T06:12:03.403
> 
> 标签：c++, mfc, outlook-addin

我想在 C++ 中开发一个 Outlook 插件，以获取一些信息，如主题、收件人、抄送和附件，为此我指的是一个链接，即[http://www.olivierlanglois.net/Outlook_Automation_with_cpp_2.html#Usingthecode2](http://www.olivierlanglois.net/Outlook_Automation_with_cpp_2.html#Usingthecode2)。我也从这个链接下载了源代码，但是在我的机器上构建时（visual studio 2008）我遇到了一个错误，即致命错误 LNK1104: cannot open file 'mfc71.lib' 所以请通过该链接并提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T09:01:54.313

您正在使用 Visual Studio 2008。MFC 7.1 对您来说已经“过时”了。您拥有（并且应该使用）的版本是 9.0。因此，您必须尝试链接到`mfc90.lib`。我不确定是否需要进一步的代码调整，只是准备好代码不一定能开箱即用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T09:13:13.337

您需要导入 MSO.dll、VB6EXT.olb 和 MSOUTL.olb。它们位于办公室安装目录中。

如果你想要一个加载项，你在 Visual Studio 中的“其他项目类型”->“可扩展性”->“共享加载项”中有一个模板。

在那里，您可以为 C++ 中的 Outlook 加载项选择模板。请注意，您选择制作加载项的应用程序之间没有区别，它只是告诉 Visual Studio 在调试期间他们应该执行哪个应用程序，以及他们应该为您注册加载项的哪个应用程序。

创建并加载模板后，您可以将 IDispatch* 获取到 Outlook 应用程序对象。应用程序对象在 MSOUTL.olb 中声明。

希望能帮助到你！:-)

# python - 如何将 perl 正则表达式转换为 python？

> ID：12153650
> 
> 赞同：0
> 
> 时间：2012-08-28T06:12:14.300
> 
> 标签：python, regex, perl, python-3.x

我正在尝试将此正则表达式从 Perl 转换为 Python：

```
if ($line !~ /^\*NODE/i || $line !~ /^\*ELEMENT OUTPUT/i)
{
    print $line;
} 
```

我已经编写了这个 Python 代码，但它失败了：

```
if (re.search("^!\*ELEMENT OUTPUT | ^!\*NODE", line)):
   print line 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T06:27:00.120

准确的翻译是：

```
node_pattern = re.compile("^\*NODE", re.I)
element_pattern = re.compile("^\*ELEMENT OUTPUT", re.I)

if (not re.search(node_pattern, line) or not re.search(element_pattern, line)):
    print line 
```

根据您要尝试做的事情`or`，中间可能会更好，`and`但如果不了解整个问题，我无法确定。希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T15:20:48.357

在 python 中，有比正则表达式更好的方法：

```
if not line.lower().startswith ('*node') or not line.lower ().startswith ('*element output'):
    print (line) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T10:28:40.557

在我看来，原文的逻辑是错误的。我想这样做的目的是只打印不开头或不带`*NODE`或不带`*ELEMENT OUTPUT`（不区分大小写）的行。但是，该条件适用于任何行。如果它开始于`*NODE`那么它不会开始于`*ELEMENT OUTPUT`，反之亦然。这样，条件总是被评估为`True`。

结论，在原著中一定有`and`代替。`or`

此外，您必须使用原始字符串（例如`r'your pattern'`在 Python 中，或者您必须将反斜杠加倍。我相信，您不想在正则表达式中加倍反斜杠。

您可以尝试以下代码段：

```
import re

simulated_file_content = [
  'line 1\n',
  '*NODE line 2\n',
  'line 3\n',
  '*eLeMent Output line 4\n',
  'line 5\n',
  ]

rex = re.compile(r'^\*(NODE)|(ELEMENT OUTPUT)', re.IGNORECASE)

for line in simulated_file_content:
    line = line.rstrip()
    if not rex.search(line):
        print line 
```

它显示：

```
c:\tmp\___python\FaisalSashmi\so12153650>python a.py
line 1
line 3
line 5 
```

# windows - 具有自定义操作和 InstallState 文件的 .net 2.0 安装项目

> ID：12153653
> 
> 赞同：0
> 
> 时间：2012-08-28T06:12:32.543
> 
> 标签：windows, installation

在我的应用程序中，我有一个 Windows 窗体应用程序和两个 Windows 服务。目前我正在使用 .net 安装项目来安装应用程序和 Windows 服务。我添加了自定义操作，它打开 Windows 窗体并接受 SQL 服务器详细信息来为应用程序创建 SQL 数据库。 如果用户关闭或单击表单上的取消按钮以取消设置向导，
我将引发**InstallException 。**
我面临的问题是在使用 InstallException 取消设置向导后，它给出了错误“错误 1001。找不到文件'C:\Program Files (x86)\MyApp\MyService1.InstallState'。” 为我的两个 Windows 服务一个一个。
对于临时解决方案，我保留了两个 InstallState 文件并在我的安装项目中手动添加，这将两个 InstallState 文件添加到安装目录中。
它工作了几个月。但是在应用程序进行了一些更改之后，它开始给我一些其他错误“错误 1001。找不到元素 ArrayOfKeyValueOfanyTypeanyType System.Collections.Hashtable 的对象类型”
我发现它需要再次添加新的 InstallState 文件以进行更改。

我认为这不是手动添加 InstallState 文件的正确方法。在我的设置项目中是否有其他想法可以解决这个问题？

如果用户在安装时取消安装向导并且如果用户取消卸载向导它不应该删除数据库，我需要回滚 SQL 数据库更改（创建数据库）。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T10:06:06.640

我自己解决了这个问题。自定义操作序列是

1）自定义操作 dll
2）Windows 服务 1
3）Windows 服务 2

我将顺序更改为
1）Windows 服务 1
2）Windows 服务 2
3）自定义操作 dll

我认为它试图回滚 Windows 服务状态并且在第一种情况下没有安装 Windows 服务

# python - 导入 Pygame：奇怪的 DLL 错误

> ID：12153655
> 
> 赞同：0
> 
> 时间：2012-08-28T06:12:34.520
> 
> 标签：python

我最近第一次在这台电脑上下载了 Pygame。当我尝试运行使用“import pygame”的脚本时，它给了我这个错误：

```
Traceback (most recent call last):
   File "graphs.py", line 1, in <module>
    import pygame
   File "C:\Python27\lib\site-packages\pygame\__init__.py", line 95, in <module>
    from pygame.base import *

ImportError: DLL load failed: %1 is not a valid Win32 application. 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T06:20:36.470

此错误消息几乎总是暗示您正在使用包含已编译 DLL 的扩展模块，用于 64 位版本的 Python，但您正在运行 32 位版本的 Python。或相反亦然。

# mysql - 将 TXT 文件导入 MySQL - 由于导入文件中包含“\”和“/”而导致错误

> ID：12153660
> 
> 赞同：0
> 
> 时间：2012-08-28T06:12:54.587
> 
> 标签：mysql

我正在尝试导入一系列大文件，并且由于每一行数据都具有以下字符

`\`和`/`

当我将每一行导入mysql时，每一行都会失败（即使我忽略了错误）。有没有我可以用来解决这个问题的功能？（很高兴在导入时用另一个字符替换）。

我当然可以在导入之前手动准备文件 - 但这是不切实际的。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T08:23:37.713

Have a look at this example with [LOAD DATA INFILE](http://dev.mysql.com/doc/refman/5.1/en/load-data.html) command -

File 'cik.csv':

```
1000275;"ROYAL BANK OF CANADA";FWP;20120706;edgar/data/1000275/0001214659-12-002969.txt
1000276;"ROYAL BANK OF CANADA";FWP;20120706;edgar/data/1000275/0001214659-12-002969.txt 
```

Table definition:

```
CREATE TABLE cik(
  CIK INT(11) DEFAULT NULL,
  Company VARCHAR(30) DEFAULT NULL,
  Form VARCHAR(30) DEFAULT NULL,
  `Date` DATE DEFAULT NULL,
  Filename VARCHAR(250) DEFAULT NULL
) 
```

Import command:

```
LOAD DATA INFILE 'cik.csv' INTO TABLE cik
FIELDS TERMINATED BY ';' OPTIONALLY ENCLOSED BY '"'
LINES TERMINATED BY '\r\n' 
```

Also, you can use Data Import tool in [dbForge Studio for MySQL](http://www.devart.com/dbforge/mysql/studio/).

# php - 如何在 symfony2 的“create_query”中使用 if 条件

> ID：12153662
> 
> 赞同：0
> 
> 时间：2012-08-28T06:12:59.523
> 
> 标签：php, symfony, doctrine-orm

在我的表单生成器中，我正在尝试使用它

```
'query_builder' => function(EntityRepository $er) {
                                 return $er->createQueryBuilder('u')
                                 if(var)                                     
                                  ->where('u.id = 3') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T06:28:10.103

```
'query_builder' => function(EntityRepository $er) {
    $qb = $er->createQueryBuilder('u');

    if ($someCondition) {
        $qb->where('u.id = 3');
    }

    return $qb;
} 
```

# web-services - 使用 JSON API 访问 Liferay Web 服务

> ID：12153663
> 
> 赞同：0
> 
> 时间：2012-08-28T06:13:00.390
> 
> 标签：web-services, liferay, portal, liferay-6

嗨，我创建了一个插件 portlet。在 JSP 中，我使用 JSON API 访问所有国家/地区列表。它对登录用户工作正常。但对于访客用户，我无法访问网络服务。我正在使用 Liferay 6.0.6。以下是我的代码。

```
Liferay.Service.Portal.Country.getCountries(
            {}, 
            function(result) {
                for(var count=0;count< result.length;count++){
                    alert(result[count].name);
                    var option = document.createElement("option");

                }
            }
        ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T06:48:04.437

假设您使用的是 Liferay 6.1，您可以通过在 portal-ext.properties 文件中添加一个属性来实现它

```
json.service.public.methods=getCountries 
```

如果您需要检查整个流程结帐

```
JSONServiceAction 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T16:25:51.193

我找到了解决上述问题的方法。我无法访问 JSON API，因为 Liferay 正在使用 A.io.request 进行 AJAX 调用，该调用仅适用于登录用户。所以我准备了以下代码。

```
jQuery.ajax({
                    type: "POST",  
                    url: '<%=themeDisplay.getURLPortal() %>'+'/tunnel-web/json?serviceClassName=com.liferay.portal.service.CountryServiceUtil&serviceMethodName=getCountries',

                    dataType: 'json',
                    success: function(countriesList) {
                        alert(countriesList);
                        alert(countriesList[0].countryId);
                        }

                    }       
            }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T10:13:53.720

我认为您需要将具有权限的 serviceContext 传递给服务。

您可以尝试将 communityPermissions 和 guestPermissions 设置为 VIEW 吗？

```
Liferay.Service.Portal.Country.getCountries(
        {

        serviceContext: jQuery.toJSON(
            {
                communityPermissions: communityPermission,
                guestPermissions: guestPermission,
                scopeGroupId: themeDisplay.getScopeGroupId()
            }
        )

        }, 
        function(result) {
            for(var count=0;count< result.length;count++){
                alert(result[count].name);
                var option = document.createElement("option");

            }
        }
    ); 
```

# iphone - 在点击按钮时访问在 viewDidLoad 中创建的 NSMutableArray

> ID：12153670
> 
> 赞同：0
> 
> 时间：2012-08-28T06:13:31.477
> 
> 标签：iphone, objective-c, ios, xcode, ipad

在我的应用程序中，我有一个动画，当用户点击一个按钮时播放。在按钮点击的 IBAction 方法中，我让它创建一个 NSMutable 数组，将图像加载到数组中，然后循环浏览图像。

这导致按钮点击和动画播放之间存在相当大的延迟，但之后的每次点击都很好，因为数组已经用图像创建了。

我尝试将数组创建和图像加载放在 vieDidLoad 方法中，但由于某种原因，IBAction 方法（循环图像的调用所在）无法访问数组。我将如何使阵列可供它使用？

```
- (IBAction)tap {

NSMutableArray *anim = [[NSMutableArray alloc]initWithObjects:[UIImage      imageNamed:@"0001.png"], ...(x30)... nil];

type.animationImages  = anim;
    type.animationDuration = 1.0;
    type.animationRepeatCount = 1;

    [type startAnimating];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T06:18:54.377

定义`NSMutableArray *anim`到您的`UIViewController` `.h`文件中。它将使其可供全球访问到您的`.m`文件的任何位置。

```
- (void) viewDidLoad
{
    anim = [[NSMutableArray alloc]initWithObjects:[UIImage imageNamed:@"0001.png"], ...(x30)... nil];
}

- (IBAction)tap 
{

    type.animationImages  = anim;
    type.animationDuration = 1.0;
    type.animationRepeatCount = 1;

    [type startAnimating];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T06:18:08.340

在 .h 文件中定义 NSMutableArray *anim 即类成员变量

在 viewDidLoad 方法中定义如下：

```
anim = [[NSMutableArray alloc]initWithObjects:[UIImage      imageNamed:@"0001.png"], ...(x30)... nil]; 
```

在按钮事件中这样使用：

```
 - (IBAction)tap 
{
  type.animationImages  = anim;
  type.animationDuration = 1.0;
  type.animationRepeatCount = 1;
  [type startAnimating];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T06:18:12.783

试试这个简单的代码可能对你有帮助。第一次点击时数组分配一次。

```
if(!anim)
{
NSMutableArray *anim = [[NSMutableArray alloc]initWithObjects:[UIImage      imageNamed:@"0001.png"], ...(x30)... nil];

   NSLog(@"array allocate");
}else
    {
       NSLog(@"array already allocated");
     } 
```

# python - 用scrapy创建一个简单的python爬虫

> ID：12153671
> 
> 赞同：1
> 
> 时间：2012-08-28T06:13:31.420
> 
> 标签：python, scrapy, web-crawler

我目前正在尝试使用 Scrapey 在 python 中制作一个简单的爬虫。我想要它做的是阅读链接列表并保存它们链接到的网站的 html。现在，我能够获取所有的 URL，但我无法弄清楚如何下载该页面。到目前为止，这是我的蜘蛛的代码：

```
from scrapy.spider import BaseSpider
from scrapy.selector import HtmlXPathSelector
from tutorial.items import BookItem

# Book scrappy spider

class DmozSpider(BaseSpider):
    name = "book"
    allowed_domains = ["learnpythonthehardway.org"]
    start_urls = [
        "http://www.learnpythonthehardway.org/book/",
    ]

    def parse(self, response):
        filename = response.url.split("/")[-2]
        file = open(filename,'wb')
        file.write(response.body)
        file.close()

        hxs = HtmlXPathSelector(response)
        sites = hxs.select('//ul/li')
        items = []
        for site in sites:
            item = BookItem()
            item['title'] = site.select('a/text()').extract()
            item['link'] = site.select('a/@href').extract()
            items.append(item)
        return items 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T06:22:34.550

在您的`parse`方法中，返回`Request`返回项目列表中的对象以触发下载：

```
for site in sites:
    ...
    items.append(item)
    items.append(Request(item['link']), callback=self.parse) 
```

这将导致爬虫`BookItem`为每个链接生成一个，但也会递归并下载每本书的页面。当然，`self.parsebook`如果您想以不同的方式解析子页面，您可以指定不同的回调（例如）。

# java - JavaFX Fxml 项目的 Hello World

> ID：12153672
> 
> 赞同：1
> 
> 时间：2012-08-28T06:13:35.467
> 
> 标签：java, javafx, scenebuilder

今天我要使用 JavaFX Fxml 项目创建 Hello World 应用程序。这里是代码。示例.fxml

```
<?xml version="1.0" encoding="UTF-8"?>
<?import java.lang.*?>
<?import javafx.scene.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<AnchorPane id="AnchorPane" prefHeight="200" prefWidth="320" xmlns:fx="http://javafx.com/fxml" fx:controller="temp.Temp">
<children>
    <Button id="button" layoutX="126" layoutY="90" text="Click Me!" onAction="#handleButtonAction" fx:id="button" />
    <Label id="label" layoutX="126" layoutY="120" minHeight="16" minWidth="69" prefHeight="16" prefWidth="69" fx:id="label" />
</children>
</AnchorPane> 
```

示例.java

```
package temp;
import java.net.URL;
import java.util.ResourceBundle;
import javafx.event.ActionEvent;
import javafx.fxml.FXML;
import javafx.fxml.Initializable;
import javafx.scene.control.Label;
public class Sample implements Initializable {

@FXML
private Label label;

@FXML
private void handleButtonAction(ActionEvent event) {
    System.out.println("You clicked me!");
    label.setText("Hello World!");
}

@Override
public void initialize(URL url, ResourceBundle rb) {
    // TODO
}    
} 
```

Temp.java

```
package temp;
import javafx.application.Appl
import javafx.scene.Parent;
import javafx.scene.Scene;
import javafx.stage.Stage;
public class Temp extends Application {
public static void main(String[] args) {
    Application.launch(Temp.class, args);
}
@Override
public void start(Stage stage) throws Exception {
    try{
    Parent root = FXMLLoader.load(getClass().getResource("Sample.fxml"));
    stage.setScene(new Scene(root));
    stage.show();
    }
    catch(Exception e){
        System.out.print(e);
    }      
}
} 
```

但它给出错误/Users/apple/NetBeansProjects/Temp/nbproject/jfx-impl.xml:1757：执行此行时发生以下错误：/Users/apple/NetBeansProjects/Temp/nbproject/jfx-impl.xml： 1392：jarsigner 返回：1 BUILD FAILED（总时间：६ 秒）

但是当我使用异常处理时，它会给出未找到的位置？请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T08:58:43.923

您正在尝试从`fx:controller="temp.Temp"`. 这不是您的控制器类，您应该使用它`fx:controller="temp.Sample"`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-14T11:07:23.230

您还[需要](https://stackoverflow.com/questions/2343187/loading-resources-using-getclass-getresource)一个前导正斜杠来加载包资源。假设您在 temp 包中有 Sample.fxml，它看起来像这样：

```
Parent root = FXMLLoader.load(getClass().getResource("/temp/Sample.fxml")); 
```

# java - libGDX 示例中的滑块

> ID：12153675
> 
> 赞同：0
> 
> 时间：2012-08-28T06:13:45.290
> 
> 标签：java, android, animation, widget, libgdx

我正在使用 libGDX 创建基于不同图像的动画，我已经成功实现了该动画，但是滑块小部件不断显示 nullPointer 异常错误（线程“Thread-2”中的异常 javax.media.opengl.GLException: java.lang.NullPointerException ...引起：java.lang.NullPointerException ...在 com.alex.SpriteBatch.SpriteBatchMain.render(SpriteBatchMain.java:259))。我通过 ApplicationListener 类中的阶段性 setInputProcessor 将滑块小部件添加为演员。我似乎找不到关于在 libGDX 中使用滑块的好例子。谁能给我看一个使用滑块的例子，使用命令应该在哪个类和方法中编写等等？（比如在 Create 方法或 Render 方法或 Resize 方法中应该是什么，或者如果在 Screen 类中的 Show 方法中）我只需要几个图像的动画由滑块控制。有人可以通过示例帮助我解决 libgdx 中动画的滑块小部件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:19:53.343

在初始化之前尝试访问图形上下文时，我看到了这种错误。

您可以在此处查看滑块的示例：http: [//www.netthreads.co.uk/2012/06/24/libgdx-audio-tonome/](http://www.netthreads.co.uk/2012/06/24/libgdx-audio-tonome/)

我还没有将它更新到最新版本的 LIbGDX，但它仍然应该适用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T04:46:00.743

现在可以了。我错过了一个初始化命令行，因为每次都会弹出 nullPointerException 错误。从@alrutherford 的[http://www.netthreads.co.uk/2012/06/24/libgdx-audio-tonome/](http://www.netthreads.co.uk/2012/06/24/libgdx-audio-tonome/)和此链接中的博客 - [http://webcache.googleusercontent.com/search中找到了一些示例?q=cache:http://programmer-blog.com/index.php/2009/10/31/tutorial-on-libgdx-the-creation-of-user-interfaces-part-1/](http://webcache.googleusercontent.com/search?q=cache:http://programmer-blog.com/index.php/2009/10/31/tutorial-on-libgdx-the-creation-of-user-interfaces-part-1/)（点击链接到从 Google 缓存中获取），并从此处获取 libGDX 的 UITest - [https://github.com/libgdx/libgdx/blob/master/tests/gdx-tests/src/com/badlogic/gdx/tests/UITest.java](https://github.com/libgdx/libgdx/blob/master/tests/gdx-tests/src/com/badlogic/gdx/tests/UITest.java)

# c# - 如何使用 oracle commandbuilder 使用数据表更新 oracle 表？

> ID：12153683
> 
> 赞同：-1
> 
> 时间：2012-08-28T06:14:47.010
> 
> 标签：c#, asp.net, oracle, rad-controls

我想通过传递数据表来使用命令生成器更新表 throw datatable 所以我实现了这个但是发生了一些错误请告诉我如何纠正它下面是我的代码。

```
 public int Updateoutlettubscans(DBS objDbo)
        {
            DataTable dt = new DataTable("emp");
            String connString = strDBConnection;

            String sqlSelect = "select * from emp; 
            DataSet ds = new DataSet();

            OracleDataAdapter da = new OracleDataAdapter(sqlSelect, connString);
            OracleCommandBuilder cb = new OracleCommandBuilder(da);
            da.Fill(ds, "emp");
            dt = objDbo.DataTableName;
            //dt=dt.copy();
            ds.Tables.Add(dt);
            da.Update(ds, "Table");
} 
```

错误是 DataTable 已经属于另一个 DataSet。如果我使用 dt.copy() 方法，那么没有错误，但表没有用新数据更新，我该如何更新我的表，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T10:32:56.360

检查以下链接

[http://docs.oracle.com/html/B10961_01/client3.htm](http://docs.oracle.com/html/B10961_01/client3.htm)

# c# - 使用 webkitbrowser 在网络上加载共享文件 - C#

> ID：12153689
> 
> 赞同：1
> 
> 时间：2012-08-28T06:15:25.933
> 
> 标签：c#, winforms, webkit

我想在 winform C#中加载一个在网络中与**webkitbrowser****共享的 HTML 文件。**例如：

 **文件：///10.10.10.10/files/index.html

我也试过：file://///10.10.10.10//files//index.html

webkitbrowser 不加载 html 文件。在本地，没有问题。我使用这个网址：file:///c://index.html

**WinAPP, C#, 视觉工作室 2010**

提前致谢**

# android - 以编程方式创建没有相应布局的按钮

> ID：12153694
> 
> 赞同：1
> 
> 时间：2012-08-28T06:15:49.873
> 
> 标签：android, android-button

我是安卓新手。我需要开发一个基本的演示来动态创建一个按钮而不创建相应的布局。我有两个活动。在我的第一个活动中，我有具有相对布局的按钮，当我单击该按钮时，我应该能够进入第二个活动，而无需在第二个活动中创建相应的布局，并且通过在那里创建一个动态按钮，我应该能够返回到我的第一个活动活动。可以同样创建一个按钮吗？

线性布局布局 = 新线性布局（这个）；layout.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));

```
Button button = new Button(this);
button.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
button.setText("Previous");
layout.addView(button); 
```

当我在 Eclipse 中编写相同的代码时，我会在 FILL_PARENT 上标记行？为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T07:36:50.047

代码结束后，只需添加：

```
setContentView(layout); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T06:20:39.060

FILL_PARENT 已弃用，请使用 MATCH_PARENT

# c++ - 减少父子类代码重复

> ID：12153695
> 
> 赞同：0
> 
> 时间：2012-08-28T06:15:55.437
> 
> 标签：c++, oop, parent-child

我遇到了多态性和父子关系的问题。采取以下两个类，并想象在我的应用程序中我创建了一个“孩子”对象。在对象之外，我调用的唯一函数是 update()，它反过来调用对象中我需要的所有其他内容。在这一系列调用中，“父”和“子”中唯一不同的函数是 dosomething2()。

```
class parent 
{
    public:
        void dosomething1() {}; //amongst other things, calls dosomething2
        void dosomething2() {};
        void update() {}; //amongst other things, calls dosomething1
}

class child : public parent
{
    void dosomething2() {}
} 
```

我意识到，如果我创建一个 'child' 对象并调用 update()，则只会调用父类函数。我不得不将 update() 和 dosomething1() 复制到子类，然后一切都按预期工作。这不是一个很好的解决方案，因为有很多重复的代码 - 有没有办法改进这个？

**更新：** 感谢提供的答案，我使用虚拟 dosomething2() 函数更新了父类。现在调用了正确的函数，我不必将 dosomething1() 复制到子类。不幸的是，如果我不将 update() 复制到子类，则会出现符号查找错误（父子类都在一个库中）。

```
class parent 
{
    public:
        void dosomething1() {}; //amongst other things, calls dosomething2
        virtual void dosomething2() {};
        void update() {}; //amongst other things, calls dosomething1
}

class child : public parent
{
    void dosomething2() {}
    /*void update() {}; //symbol lookup error if this is left uncommented */
} 
```

**UPDATE2** 符号查找错误与代码无关。我做了一个 make clean，然后 make（它构建了一个 .so 库和可执行文件），现在一切都按预期工作了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T06:17:24.493

您没有将基类中的函数标记为虚拟：

```
class parent 
{
    public:
        virtual void dosomething1() {}; //amongst other things, calls dosomething2
        virtual void dosomething2() {};
        void update() {}; //amongst other things, calls dosomething1
} 
```

另外，仅供参考，您正在做的事情称为[*模板方法模式*](http://en.wikipedia.org/wiki/Template_method_pattern)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T06:18:06.247

`virtual`如果需要，您应该在父类中使用关键字`dynamic-polymorphism`。然后在子类中重新实现或不重新实现虚函数。

```
class parent 
{
    public:
        void dosomething1() {}; //amongst other things, calls dosomething2
        virtual void dosomething2() {};
        void update() {}; //amongst other things, calls dosomething1
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T06:18:22.970

你应该做相关的功能`virtual`。假设您想要`child`'s`doSomething1()`和`doSomething2()`被呼叫到`update()`：

```
class parent 
{
    public:
        virtual void dosomething1() {}; //amongst other things, calls dosomething2
        virtual void dosomething2() {};
        void update() {}; //amongst other things, calls dosomething1
}

class child : public parent
{
    virtual void dosomething2() {}
} 
```

然后，如果可用，对 a 的调用`child`将`update()`调用派生类的方法。请注意，`update() is not virtual, so you should have no filed called`更新`in`child`，否则您将隐藏该名称。

# java - java - 如何开发一个逻辑来从java中的.prn文件中读取数据......？

> ID：12153696
> 
> 赞同：0
> 
> 时间：2012-08-28T06:15:55.160
> 
> 标签：java

如何查看这些 .prn 文件以及之后如何使用 java.. 从中读取数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T06:22:22.850

PRN 是发送到打印机进行打印的字节流。您可以为此使用[Java 打印服务](http://docs.oracle.com/javase/6/docs/technotes/guides/jps/index.html)。

您需要使用 Dos Prompt 复制它。

如果您询问用户有关打印机选择的问题，请使用`PrinterJob`

```
 PrinterJob pj = PrinterJob.getPrinterJob();
    pj.printDialog(); 
```

# api - Flurry Event API 不返回事件参数值

> ID：12153699
> 
> 赞同：1
> 
> 时间：2012-08-28T06:16:00.090
> 
> 标签：api, events, rest, flurry

我一直在尝试使用 EventMerics API 返回详细的事件参数数据。

我已经设置了一个测试应用程序并上传了带有参数的事件数据，我可以在 Web 界面中看到数据。但是，API 似乎没有返回文档所述的参数数据。

以下调用

[http://api.flurry.com/eventMetrics/Event?apiAccessCode=xxx&apiKey=xxx&startDate=2012-08-27&endDate=2012-08-27&eventName=heatmap%20-%20iPhone-Title-all](http://api.flurry.com/eventMetrics/Event?apiAccessCode=xxx&apiKey=xxx&startDate=2012-08-27&endDate=2012-08-27&eventName=heatmap%20-%20iPhone-Title-all)

返回：

```
<eventMetrics type="Event" startDate="2012-08-27" eventName="heatmap - iPhone-Title-all" endDate="2012-08-27" version="1.0" generatedDate="8/27/12 10:45 PM">
<day uniqueUsers="2" totalSessions="12" totalCount="14" date="2012-08-27"/>
<parameters/>
</eventMetrics> 
```

……

参数部分为空，我期待以下参数值：

```
{touchXY : 299,465,2012-08-27 16:40:15 +0100}
{touchXY : 301,461,2012-08-27 16:29:03 +0100}
{touchXY : 192,312,2012-08-27 16:22:54 +0100}
{touchXY : 254,461,2012-08-27 16:23:04 +0100} 
```

有没有人通过 Flurry REST API 返回参数值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T07:41:54.687

您使用的 API 调用是正确的。我建议您写信给 support@flurry.com 以调查为什么没有发生这种情况。（免责声明：我在 Flurry 的支持团队工作）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-14T08:47:47.500

请求中的**事件名称****区分大小写**，因此您应该检查它在网站上的书写方式。我将我的从“编辑器”更改为“编辑器”，问题解决了。

# javascript - 在混合基础 url 下动态加载 require.js 模块

> ID：12153701
> 
> 赞同：1
> 
> 时间：2012-08-28T06:16:11.387
> 
> 标签：javascript, requirejs, js-amd

我们有一个使用 require.js 的应用程序，它同时允许扩展，并且这些扩展的 js 从不同的路径提供服务。所以在我们的配置中，我们有：

```
var require = {
  baseUrl : '/app/js/modules/'
} 
```

但扩展是从`/extension/foo-extension/js/modules/`. 此外，扩展是动态的，以至于它们将一些 html 注入到使用`data-module="foo/bar"`我们选择加载该模块的页面的页面中。

理想情况下，我们能够为 require.js 传递/设置一个上下文，该上下文将以下模块加载范围限定在 baseUrl 内`/extension/foo-extension/js/modules/`。据我所知，我们需要从 foo-extension`require('/extension/foo-extension/js/modules/foo/bar')`加载。`foo/bar`

这是一些伪代码来想象我们需要在哪里处理设置路径/上下文：

```
define(['some-dep'], function(SomeDep) {
    $.get('somepage', function(html) {
        var extension = html.data('extension'); // "foo/bar"
        var extensionBase = html.data('extensionBase'); // extension/foo-extension/js/modules/

        // This is where we need to readjust require to use the base path for any foo module
    });
}); 
```

走绝对路径路线是否有另一种解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T17:27:51.380

requirejs.config() 可以在以后随时调用，加载器会将配置合并在一起。因此，等到您知道要为“扩展”配置路径使用什么就足够了，然后通过另一个 requirejs.config() 调用进行设置，然后使用该路径加载扩展。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T06:29:28.440

听起来您想使用[“路径”配置选项](http://requirejs.org/docs/api.html#config-paths)。例子：

```
var require = {
  baseUrl : '/app/js/modules',
  paths   : {
    'extension' : '/extension/foo-extension/js/modules'  
  }
}; 
```

然后你可以简单地调用`require('extension/foo/bar')`加载`/app/js/modules/extension/foo-extension/js/modules/foo/bar.js`

# java - 命令模式应用的真实世界示例

> ID：12153708
> 
> 赞同：13
> 
> 时间：2012-08-28T06:16:41.437
> 
> 标签：java, oop, design-patterns, transactions, command-pattern

[命令模式](http://en.wikipedia.org/wiki/Command_pattern)可以用来实现`Transactional behavior`（和`Undo`）。
但是我无法通过谷歌搜索找到这些示例。我只能找到一些微不足道的灯的例子，即`switched on`或`off`。
我在哪里可以找到`Java`使用 ? 实现的这种/这些行为的编码示例（最好在 中）`Command Pattern`？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-28T06:25:13.137

在我们的一个项目中，我们有以下要求：

1.  在数据库中创建记录。
2.  调用服务来更新相关记录。
3.  调用另一个服务来记录工单。

为了以事务方式执行此操作，每个操作都被实现为具有撤消操作的命令。在每一步结束时，命令被压入堆栈。如果操作在某个步骤失败，则我们从堆栈中弹出命令，并对弹出的每个命令调用撤消操作。每个步骤的撤消操作都在该命令实现中定义，以反转较早的 command.execute()。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T06:23:55.657

```
public final class Ping implements Callable<Boolean> {

  private final InetAddress peer;

  public Ping(final InetAddress peer) {
    this.peer = peer;
  }

  public Boolean call() {
    /* do the ping */
    ...
  }
}
...
final Future<Boolean> result
    = executorService.submit(new Ping(InetAddress.getByName("google.com")));
System.out.println("google.com is " + (result.get() ? "UP" : "DOWN")); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-24T11:25:51.703

命令模式用在很多地方。

1.  当然，随处可见的是一个非常简单的 GUI 实现示例，开关。它也被广泛用于游戏开发。使用这种模式，用户也可以在屏幕上配置他的按钮。
2.  如果必须将命令传递到另一端，它也用于网络。
3.  当程序员想要存储用户执行的所有命令时，例如，有时游戏让您重播整个关卡。
4.  它用于实现回调。

这是一个提供用于回调的命令模式示例的站点。[http://www.javaworld.com/article/2077569/core-java/java-tip-68--learn-how-to-implement-the-command-pattern-in-java.html?page=2](http://www.javaworld.com/article/2077569/core-java/java-tip-68--learn-how-to-implement-the-command-pattern-in-java.html?page=2)

5.  这是另一个显示带有数据库的命令模式的链接。代码在 C# 中。[http://www.codeproject.com/Articles/154606/Command-Pattern-at-Work-in-a-Database-Application](http://www.codeproject.com/Articles/154606/Command-Pattern-at-Work-in-a-Database-Application)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-28T17:28:24.103

`You have to define undo(), redo() operations along with execute() in Command interface itself`.

例子：

```
interface ChangeI {
    enum State{ READY, DONE, UNDONE, STUCK } ;
    State getState() ;

    void execute() ;    
    void undo() ;    
    void redo() ;
} 
```

`ConcreteCommand`在你的类中定义一个状态。根据`execute`() 方法后的当前状态，您必须决定是否应将命令添加到`Undo Stack`或`Redo Stack`并做出相应的决定。

```
abstract class AbstractChange implements ChangeI {
    State state = State.READY ;

    public State getState() { return state ; }

    public void execute() {
        assert state == State.READY ;
        try { doHook() ; state = State.DONE ; }
        catch( Failure e ) { state = State.STUCK ; }
        catch( Throwable e ) { assert false ; }
    }

    public void undo() { 
        assert state == State.DONE ; }
        try { undoHook() ; state = State.UNDONE ; }
        catch( Failure e ) { state = State.STUCK ; }
        catch( Throwable e ) { assert false ; }
    }

    public void redo() {
        assert state == State.UNDONE ;
        try { redoHook() ; state = State.DONE ; }
        catch( Failure e ) { state = State.STUCK ; }
        catch( Throwable e ) { assert false ; }
    }

    protected abstract void doHook() throws Failure ; 

    protected abstract void undoHook() throws Failure ; 

    protected void redoHook() throws Failure { doHook() ;} ; 
} 
```

请查看此[撤消重做](http://sourcephile.blogspot.in/2011/04/how-to-do-undo-and-redo.html)命令文章以更好地理解。

# objective-c - 如何添加 pdf 文件并在基于页面的应用程序中查看

> ID：12153710
> 
> 赞同：0
> 
> 时间：2012-08-28T06:17:01.853
> 
> 标签：objective-c, ios, xcode, ipad

实际上我想加载一个pdf文件并像基于页面的应用程序一样查看它。所以任何人都可以建议我如何使用示例代码来完成它。我搜索了我没有找到任何文档或任何示例代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T06:19:20.497

您想创建电子书类型的应用程序。[https://github.com/brow/leaves](https://github.com/brow/leaves)链接示例显示了如何加载 pdf 文件并显示。如果您想添加更多动画，例如页面卷曲，请参考此处的示例[http://blog.steventroughtonsmith.com/2010/02/apples-ibooks-dynamic-page-curl.html](http://blog.steventroughtonsmith.com/2010/02/apples-ibooks-dynamic-page-curl.html)

# php - 允许空格、破折号和普通字符的预匹配

> ID：12153715
> 
> 赞同：-1
> 
> 时间：2012-08-28T06:17:28.353
> 
> 标签：php, regex

我非常抱歉问这个！有很多资源，`Regex`但我在使用它和理解文档方面简直糟糕透了。

这有点急。

我拥有一个用户可以上传文件的网站。最近，一位用户开始上传大量名称类似于以下内容的文件：

```
1538æŽä»£æ²«&æ›²å©‰å©·å¯¹å”±ã€Šæˆ‘çš„æ­Œå£°é‡Œã€‹è¿½å¿†ç½—çº³å°”å¤š.flv 
```

他正在做一些非常时髦的事情。

我一直在尝试构建一个可以正常工作并阻止用户上传具有奇怪名称的文件的正则表达式。我从另一个问题中找到了这个：

```
function isValid($str) {
return !preg_match('/[^A-Za-z0-9.#\\-$]/', $str);
} 
```

问题是，这有点太严格了。它不允许有空格。

我需要编辑函数以允许`spaces`, `dashes`,`$ signs`和`single quotes`. 但仅此而已。

我怎样才能做到这一点？

非常感谢您的帮助！我为我糟糕的正则表达式知识道歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T06:27:42.630

要将单引号添加到 PHP 中的字符串（任何字符串），您需要通过在前面添加斜杠来“转义”它：

```
'\''
 ^- slash 
```

这是必需的，否则 PHP 将无法理解字符串定义从哪里到哪里。

`$`和符号在`-`正则表达式的字符类中具有特殊含义，因此它们也需要某种转义。这又是一个`\`斜线，但是要在 PHP 单引号字符串中写一个斜线，它还需要另一个斜线：

```
'\\' 
```

因此，要构建正则表达式，所有这些都需要放在一起（如果将破折号移动到字符类的末尾，它没有特殊含义）：

```
'/[^A-Za-z0-9.# \\$\'-]/'
               ^ ^ ^- slash for the single quote
               | `- slashed slash for the $ sign
               `- space 
```

我没有对此进行测试，但正如您所看到的，它可能会变得有点复杂，因为首先对 PHP 字符串进行了一些转义，然后对正则表达式模式进行了一些转义。

# c++ - boost make_seconds 在哪里？

> ID：12153716
> 
> 赞同：1
> 
> 时间：2012-08-28T06:17:29.943
> 
> 标签：c++, boost, boost-date-time

祝大家有美好的一天！

我尝试从 boost docs pdf 中编译一个小例子：

```
#include "boost/icl/interval.hpp"
#include "boost/icl/interval_set.hpp"
#include "boost/date_time/posix_time/posix_time_duration.hpp"
#include <boost/icl/ptime.hpp>
#include <boost/date_time.hpp>
#include <iostream>
#include <string>
using namespace std;
using namespace boost;
using namespace boost::icl;
using namespace boost::posix_time;
using namespace boost::gregorian;
...
interval<boost::posix_time::seconds>::type news(seconds(), make_seconds("20:15:00"));
interval<seconds>::type talk_show(make_seconds("22:45:30"), make_seconds("23:30:50"));
interval_set<seconds> myTvProgram;
myTvProgram.add(news).add(talk_show);
// Iterating over elements (seconds) would be silly ...
for(interval_set<seconds>::iterator telecast = myTvProgram.begin();
telecast != myTvProgram.end(); ++telecast)
//...so this iterates over
return 0; 
```

我有错误：错误 C3861：'make_seconds'：找不到标识符

如何进行正确的转换？谢谢。

# ios - iOS 故事板：状态栏颜色

> ID：12153720
> 
> 赞同：5
> 
> 时间：2012-08-28T06:17:54.550
> 
> 标签：ios, colors, storyboard, statusbar

我正在尝试更改情节提要中的状态栏颜色，但它不起作用。条是灰色的，但我想要一个黑色的条。我知道，我可以使用以下代码更改它：

```
[[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleBlackOpaque animated:YES]; 
```

但是当应用程序启动时，状态栏会变为灰色，然后变为黑色。那看起来不太好。

我希望你能帮帮我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T07:47:07.767

我建议在项目的 %AppName%-Info.plist 中设置状态栏样式。 ![在此处输入图像描述](../Images/d259612d03ab9e6cfae6072c47581cdc.png)

# ruby-on-rails - 缓存在铁轨上的俄罗斯娃娃

> ID：12153721
> 
> 赞同：1
> 
> 时间：2012-08-28T06:17:56.817
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, caching

我听说 DHH 和其他 37Signal 的大佬谈了很多关于俄罗斯娃娃缓存的话题，我理解它的概念，但我真的不知道如何将它应用到我的代码中。

你会如何应用它？

新编辑：您如何将 gem 应用于包含大量 if 语句的代码？

```
 <% if signed_in? %>
      <div class="timeline">
        <%= link_to image_tag(current_user.avatar), designer_path(current_user), :class => "avatar topimg" %>
        <%= content_tag(:span, "your profile", :class => "description") %>
        <%= link_to "", new_design_path, :class => "upload icon-upload" %>
        <%= content_tag(:span, "upload a new design", :class => "description") %>
        <%= link_to "", designer_path(current_user)+"/favorites", :class => "upload icon-star" unless current_user.followees_by_type("design").blank? %>
        <%= content_tag(:span, "designs you've favorited", :class => "description") unless current_user.followees_by_type("design").blank? %>
        <%= content_tag(:span, current_user.current_invites, :class => "invites_count") unless current_user.current_invites <= 0 || current_user.full_member == false %>
        <%= link_to "", "#", :class => "invite icon-plus "+("blue" unless current_user.current_invites == 0).to_s unless current_user.current_invites < 0 || current_user.full_member == false  %>
        <%= content_tag(:span, "invite a friend ("+current_user.current_invites.to_s+" invites left)", :class => "description") unless current_user.current_invites < 0  %>
        <%= content_tag(:span, activity, :class => "activity_count") unless activity == 0 %>
        <%= link_to "", designer_path(current_user)+"/statistics", :class => "upload icon-activity "+("blue" unless activity == 0).to_s unless activity == 0 %>
        <%= content_tag(:span, ("your activity ("+pluralize(activity, 'new thing')+")"), :class => "description") unless activity == 0%>
      </div>
    <% else %>
      <%= link_to raw('<i class="icon-twitter icon-font"></i><span>login with twitter</span>'), "/auth/twitter", :class => "btn btn-twitter grey-tweet" %>
    <% end %> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T07:13:54.893

查看他们发布[的 Gem](https://github.com/rails/cache_digests)，它有一些不错的文档。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T08:06:41.097

他还在这段视频中解释了它（以及 Basecamp 源代码中的一些其他内容）：

[http://www.youtube.com/watch?v=FkLVl3gpJP4#t=33m38s](http://www.youtube.com/watch?v=FkLVl3gpJP4#t=33m38s)

# iphone - 在用户触摸时使用 opengl 进行图像编辑

> ID：12153736
> 
> 赞同：1
> 
> 时间：2012-08-28T06:18:54.393
> 
> 标签：iphone, objective-c, ios, opengl-es

> **可能重复：**
> [OpenGL ES 2.0 顶点变换算法](https://stackoverflow.com/questions/9777393/opengl-es-2-0-vertex-transformation-algorithms)

![在此处输入图像描述](../Images/55d400fb538f7aba47133ad34267ef2b.png)如何创建一个可以通过用户触摸修改图像的应用程序。我想创建一个整形手术之类的应用程序，用户可以在其中上传他/她的图像并进行编辑以查看它们在手术后的样子。我想通过 opengl 实现这一目标。作为 iphone 编程和 opengl 的新手，我无法开始。请给我一些初步的想法，以便我至少可以开始并尝试实现它。

![在此处输入图像描述](../Images/e061f56b6568b9017fd3655655bd6934.png)

# android - 在android listview中获取行位置

> ID：12153740
> 
> 赞同：1
> 
> 时间：2012-08-28T06:19:07.680
> 
> 标签：android

嗨，这听起来像是一个愚蠢的问题，但它已经困扰了我几天，我还没有在互联网上找到答案。在不覆盖 onItemclick 方法的 android Listview 中，有没有其他方法可以获得行的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:58:18.510

我使用 setTag()/getTag() 方法来获取项目的位置。**在列表适配器的 getView() 方法中，使用setTag("position")**方法将项目的位置设置为行项目的标记（在您的情况下为按钮）。
当单击任何一行中的按钮时，将为该按钮调用 onClick() 方法，在 onClick() 方法中，您可以使用**getTag()**方法来获取位置。对所有行按钮使用与 onClick 例程相同的方法。

示例代码：列表项可能是这样的

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<Button
    android:id="@+id/button1"
    android:layout_width="200dp"
    android:layout_height="200dp"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="117dp"
    android:background="@drawable/grad"
    android:onClick="onButtonClick" /> 
```

getView() 方法可能是这样的：

```
public View getView (int position, View convertView, ViewGroup parent) {
    ...
    ...
    button.setTag(position);
    ...
} 
```

onClick 例程可能是这样的：

```
public void onButtonClick(View v) {
    String tag = v.getTag().toString();
    if(tag != null) {
         int position = Integer.parseInt(tag);
    }
    ...
    ...
} 
```

# extjs - 在 extjs 中的 Textfield 上使用模糊会导致错误

> ID：12153742
> 
> 赞同：1
> 
> 时间：2012-08-28T06:19:13.030
> 
> 标签：extjs, extjs4

我是 extjs 的新手。我正在使用 extjs-4.1.0，我有一个文本字段，我希望在它的模糊事件上调用 trim 方法。我的代码在 mozilla firefox 上运行良好，但是当文本框失去焦点时，会在 IE 上导致 javascript 错误，“对象不支持此属性或方法”。
有没有其他方法可以处理 IE 中的模糊事件？

在下面找到我的代码：

```
{
        flex:1,
        xtype:'textfield',
        fieldLabel: 'Name',
        allowBlank: false,
        maxLength: 50,
        name: 'name',
        maskRe: /[a-zA-Z\s]+$/,
        validator: function(v) {
            if(!(/[a-zA-Z\s]+$/.test(v))){
                return "This Field should be in alphabets";
            }
            return true;
        },
        listeners: {
             render: function(c) {
                Ext.QuickTips.register({
                target: c.getEl(),
                text: 'Format: John/John Kelvin'
                })  
            },
            blur: function(d) {
                var newVal = d.getValue().trim();
                d.setValue(newVal);

            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T06:53:07.413

我将侦听器放在控制器中，并且在 IE 中似乎可以正常工作。

```
Ext.define('BM.controller.FormControl', {
    extend: 'Ext.app.Controller',

   views: [
        'MyForm'
    ],

   init: function() {
        if (this.inited) {
            return;
        }
        this.inited = true;
        this.control({
            'my-form > field': {
                blur: this.outOfFocus
            }
        });
    },

    outOfFocus: function(field, event) {
        var newVal = field.getValue().trim();
        field.setValue(newVal);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-29T14:11:54.593

当文本字段为空时，浏览器 IE 7/8 将文本字段值 (d.getValue()) 返回为*NULL*，因此对 trim() 的方法调用失败，因为没有创建有效对象。

以下解决方案适用于所有浏览器：

```
this.setValue(Ext.util.Format.trim(this.getValue())); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T20:01:53.597

我的猜测是，这与模糊无关，实际上 field.getValue() 在某些情况下不是字符串，例如 null 或 numeric 或沿着这条线的东西。尝试更换 `var newVal = field.getValue().trim();`

和

```
var newVal = Ext.String.trim(field.getValue()); 
```

# java - 在java中制作以api为中心的Web应用程序

> ID：12153743
> 
> 赞同：0
> 
> 时间：2012-08-28T06:19:15.813
> 
> 标签：java, api

我想在 java 中创建一个以 api 为中心的 web 应用程序。我在互联网上搜索，Java 中没有关于以 api 为中心的内容。然后我发现以 api 为中心的 web 应用程序是用 PHP 创建的。如何在java中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T06:25:08.417

[如果以 API 为中心，您的意思是此处](http://net.tutsplus.com/tutorials/php/creating-an-api-centric-web-application/)提到的内容：

> 以 API 为中心的 Web 应用程序是一种 Web 应用程序，它基本上通过 API 调用执行大部分（如果不是）其所有功能。例如，如果您要登录一个用户，您会将他的凭据发送到 API，API 会返回一个结果，说明用户是否提供了正确的用户密码组合。

想到的最接近的事情是使用[Spring Framework](http://www.springsource.org/)。您仍然需要创建自己的逻辑，但您可以通过使用 bean 将这个逻辑公开为 API，您可以从控制器调用它，所以基本上，您可以执行以下操作：

```
...
if (loginService.loginClient(username, password))
{
    //redirect to home page
}

else
{
    //redirect to somewhere else
}
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T08:23:06.647

正如OP在他的评论中引用的[文章所引用的那样](http://net.tutsplus.com/tutorials/php/creating-an-api-centric-web-application/)

> 以 API 为中心的 Web 应用程序是一种 Web 应用程序，它基本上通过 API 调用执行大部分（如果不是）其所有功能。

这描述了每个重要的 Web 应用程序。这可能是 10 到 15 年前的一个相关区别，当时系统更像是孤立的、自给自足的“岛屿”。今天，大多数（如果不是所有）应用程序在构建时都考虑到了互操作性，并且当前的架构模式都在努力构建面向服务/API 的环境。

“以 API 为中心”对我来说毫无意义。

# linux - 列出运行时加载的所有符号

> ID：12153747
> 
> 赞同：0
> 
> 时间：2012-08-28T06:19:22.297
> 
> 标签：linux, unix, solaris

Windows 有一个漂亮的工具 - [Dependency Walker](http://www.dependencywalker.com/) - 它列出了可执行文件中使用的所有符号以及加载它们的动态库。这对于了解丢失的符号和 DLL 非常有用。

*nix/Solaris 是否有类似的实用程序。虽然我们可以通过 ldd 和 nm 的组合来发现这一点，但一个工具会很方便。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:21:17.510

使用 dbx 附加到 pid 并使用[funcs](http://docs.oracle.com/cd/E18659_01/html/821-1380/blazk.html#scrolltoc)命令列出加载的符号。

```
$ dbx "-c funcs; quit "  /usr/bin/bash 4837

Reading bash
Reading ld.so.1
Reading libcurses.so.1
Reading libsocket.so.1
Reading libnsl.so.1
Reading libdl.so.1
Reading libc.so.1
Attached to process 4837
stopped in _waitid at 0xfee0af95
0xfee0af95: _waitid+0x0015:     jae      _waitid+0x21   [ 0xfee0afa1, .+0xc ]
`bash`_start
`bash`_mcount
`bash`__fsr
`bash`main
`bash`exit_shell
`bash`sh_exit
...
`libnsl.so.1`nis_sperror
`libnsl.so.1`nis_lerror
`libnsl.so.1`__nis_group_cache_stats
...
`libc.so.1`mmap64
`libc.so.1`_mmap64
`libc.so.1`_init
`libc.so.1`_fini
detaching from process 4837 
```

# php - 如何在下拉菜单中隐藏 php echo？

> ID：12153748
> 
> 赞同：0
> 
> 时间：2012-08-28T06:19:26.683
> 
> 标签：php, select, option

我有一个下拉框，显示物品的重量以及较重物品的额外费用。我还有 javascript 可以根据下拉列表中选择的值更新页面上的价格。由于 javascript 更新了页面上显示的价格，我想删除选项选项旁边显示的附加价格。

代码是：

```
<?php if ($options) { ?>
    <?php foreach ($options as $option) { ?>
    <?php if ($option['type'] == 'select') { ?>
    <span id="option-<?php echo $option['product_option_id']; ?>" class="option">
      <select name="option[<?php echo $option['product_option_id']; ?>]">
        <?php foreach ($option['option_value'] as $option_value) { ?>
        <option value="<?php echo $option_value['product_option_value_id']; ?>"><?php echo $option_value['name']; ?>
        <?php if ($option_value['price']) { ?>
        (<?php echo $option_value['price_prefix']; ?><span id="newPrice"><?php echo $option_value['price']; ?></span>)
        <?php } ?>
        </option>
        <?php } ?>
      </select>
    </span> 
```

我只想在下拉列表中显示 product_option_id，我不想显示增加的附加价格；我不希望这部分代码可见：

```
<?php if ($option_value['price']) { ?>
        (<?php echo $option_value['price_prefix']; ?><span id="newPrice"><?php echo $option_value['price']; ?></span>)
        <?php } ?> 
```

但是，我有一些 JavaScript 可以根据 $option_value['price'] 更新价格。所以我不能把它抹掉。

有没有办法让输出不回显到屏幕上，但仍然有 javascript 能够找到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T06:22:25.237

是的：

```
<?php if ($option_value['price']) { ?>
        (<?php echo $option_value['price_prefix']; ?><span style="display:none" id="newPrice"><?php echo $option_value['price']; ?></span>)
        <?php } ?> 
```

此外，您应该考虑不要在该跨度上使用 ID，除非您为每个 ID 生成唯一 ID，因为当您尝试使用 document.getElementById() 获取它时会导致问题

# javascript - jQuery Isotope 和 Twitter Bootstraps nav nav-pills

> ID：12153753
> 
> 赞同：0
> 
> 时间：2012-08-28T06:20:08.480
> 
> 标签：javascript, twitter-bootstrap, jquery-isotope

我是 javascript 语言的完全新手。

我按照[本](http://www.designlunatic.com/2011/08/isotope-tutorial/)教程使用同位素。我决定尝试将其与 nav-pills 集成以创建我自己的过滤。它工作得很好，但是在我单击过滤器后菜单弹出窗口不会消失。

请查看我的代码片段：

```
 <ul class="nav nav-pills">

                <li id="isotopedemo"><a href="" data-filter="*">Demo All</a></li>

                <li class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" class="menu">For Sale<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <li id="isotope"><a href="" data-filter=".cat1">Demo 1</a></li>
                        <li id="isotopedemo"><a href="" data-filter=".cat2">Demo 2</a></li>
                        <li id="isotopedemo"><a href="" data-filter=".cat3">Demo 3</a></li>
                        <li id="isotopedemo"><a href="" data-filter=".cat4">Demo 4</a></li>
                        <li id="isotopedemo"><a href="" data-filter=".cat5">Demo 5</a></li>
                        <li id="isotopedemo"><a href="" data-filter=".cat6">Demo 6</a></li>
                    </ul>
                </li>

            </ul>

<script type="text/javascript">
    $(document).ready(function(){
    var $container = $('#content');
    $container.isotope({
        filter: '*',
        animationOptions: {
         duration: 750,
         easing: 'linear',
         queue: false,
       }
    });

    $('#isotopedemo a').click(function(){
      var selector = $(this).attr('data-filter');
        $container.isotope({ 
        filter: selector,
        animationOptions: {
         duration: 750,
         easing: 'linear',
         queue: false,

       }
      });
      return false;
    });
    });
</script> 
```

我只是希望该框在单击后关闭，更令人沮丧的是我不确定要搜索什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T06:56:56.983

试试这个

现场演示：[http ://codebins.com/bin/4ldqp7z](http://codebins.com/bin/4ldqp7z)

```
$(document).ready(function() {
    var $container = $('#content');
    $container.isotope({
        filter: '*',
        animationOptions: {
            duration: 750,
            easing: 'linear',
            queue: false,
        }
    });

  $(".dropdown").click(function(){
        $(".dropdown-menu").show(400);
  });
    $('#isotopedemo a').click(function() {
        var selector = $(this).attr('data-filter');
        $container.isotope({
            filter: selector,
            animationOptions: {
                duration: 750,
                easing: 'linear',
                queue: false,

            }
        });

        $(".dropdown-menu").hide(500);
        return false;
    });
}); 
```

# android - 为什么我通过 AsyncTask 得到 android.os.NetworkOnMainThreadException？

> ID：12153762
> 
> 赞同：10
> 
> 时间：2012-08-28T06:20:45.083
> 
> 标签：android, android-asynctask, networkonmainthread

当我在 AsynkTask 中编写网络操作代码时，我得到了 android.os.NetworkOnMainThreadException。抛出这个异常还有其他原因吗？

**这是我的代码：**

```
public class Background_confirmation extends AsyncTask<Void, Integer, Void> {
        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub
            progressDialog = ProgressDialog.show(Confirmation.this,
                    "Please wait...", "Retrieving data ...", true);
            try {
                HttpClient httpclient = new DefaultHttpClient();

                HttpPost httppost = new HttpPost(
                        "http://68.121.167.160/sip_chat_api/create_account.php?useralias="
                                + useralias + "&cntname=" + cntcode + "");
                HttpResponse response = httpclient.execute(httppost);
                HttpEntity entity = response.getEntity();
                    is = entity.getContent();

            } catch (Exception e) {
                e.printStackTrace();
            }
            if (backgroung_flag == 1) {

            } else {
                if (is != null) {
                    try {
                        BufferedReader reader = new BufferedReader(
                                new InputStreamReader(is, "UTF-8"));
                        StringBuilder sb = new StringBuilder();
                        String line = null;
                        while ((line = reader.readLine()) != null) {
                            sb.append(line + "\n");
                        }
                        is.close();

                        result = sb.toString();
                    } catch (Exception e) {
                        Log.e("log_tag",
                                "Error converting result " + e.toString());
                    }
                }

            }
            super.onPreExecute();
        }

        @Override
        protected Void doInBackground(Void... params) {
            // TODO Auto-generated method stub

            return null;
        }

        @Override
        protected void onPostExecute(Void result) {
            // TODO Auto-generated method stub
            if (progressDialog.isShowing()) {
                progressDialog.dismiss();
                // progressDialog.setCancelable(true);
            }
            super.onPostExecute(result);
        }

    } 
```

我在 OnCreate() 中调用这个类

```
new Background_confirmation().execute(); 
```

但它总是进入 Catch 块并给我[这个](http://pastie.org/4601772)例外[LogCat](http://pastie.org/4601772)
任何建议和想法都会受到赞赏。
谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T06:23:51.960

您使用了错误的 AsyncTask 方法来放置您的网络相关代码。请把它移到`doInBackground`，因为`onPreExecute`发生在主线程上。所以，异常发生了。详情在[这里](http://developer.android.com/reference/android/os/AsyncTask.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T06:42:58.790

```
public class Background_confirmation extends AsyncTask<Void, Integer, String> {
        @Override
        protected void onPreExecute() {
            super.onPreExecute();

            progressDialog = ProgressDialog.show(Confirmation.this, "Please wait...", "Retrieving data ...", true);

        }

        @Override
        protected String doInBackground(Void... params) {

            try {
                HttpClient httpclient = new DefaultHttpClient();

                HttpPost httppost = new HttpPost("http://68.121.167.160/sip_chat_api/create_account.php?useralias=" + useralias + "&cntname=" + cntcode + "");
                HttpResponse response = httpclient.execute(httppost);
                HttpEntity entity = response.getEntity();
                is = entity.getContent();

            } catch (Exception e) {
                e.printStackTrace();
            }
            if (backgroung_flag == 1) {

            } else {
                if (is != null) {
                    try {
                        BufferedReader reader = new BufferedReader(new InputStreamReader(is, "UTF-8"));
                        StringBuilder sb = new StringBuilder();
                        String line = null;
                        while ((line = reader.readLine()) != null) {
                            sb.append(line + "\n");
                        }
                        is.close();

                        result = sb.toString();
                    } catch (Exception e) {
                        Log.e("log_tag", "Error converting result " + e.toString());
                    }
                }
            }
            return result;
        }

        @Override
        protected void onPostExecute(String result) {
            super.onPostExecute(result);

            if (progressDialog.isShowing()) {
                progressDialog.dismiss();
                // progressDialog.setCancelable(true);
            }
        }
    } 
```

你的代码应该像上面一样改变。你必须考虑的事情

*   连接应该在里面编码`doInBackground()`
*   如果你想得到 的结果`doInBackground()`，你必须接受它`onPostExecute()`
*   这意味着您必须返回一个字符串值，`doInBackground()`其中您的类的第三个参数也`AsyncTask`应该是字符串（这不在韦恩的回答中）

在您的代码中，您调用的 a`InputStream`除了在“else”部分中我们看不到。如果您只使用 that `InputStream`，请确保代码始终到达 else 部分。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-28T06:34:26.173

将所有网络请求代码放入`doInBackground`. `onPreExecute`并将`onPostExecute`在 UI 线程（main thead）上运行，因此如果您在这两种方法上请求网络，您将得到一个例外。

```
public class Background_confirmation extends AsyncTask<Void, Integer, Void> {
    @Override
    protected void onPreExecute() {            
        progressDialog = ProgressDialog.show(Confirmation.this,
                "Please wait...", "Retrieving data ...", true);            

    }

    @Override
    protected Void doInBackground(Void... params) {
        // TODO Auto-generated method stub

        try {
            HttpClient httpclient = new DefaultHttpClient();

            HttpPost httppost = new HttpPost(
                    "http://68.121.167.160/sip_chat_api/create_account.php?useralias="
                            + useralias + "&cntname=" + cntcode + "");
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
                is = entity.getContent();

        } catch (Exception e) {
            e.printStackTrace();
        }
        if (backgroung_flag == 1) {

        } else {
            if (is != null) {
                try {
                    BufferedReader reader = new BufferedReader(
                            new InputStreamReader(is, "UTF-8"));
                    StringBuilder sb = new StringBuilder();
                    String line = null;
                    while ((line = reader.readLine()) != null) {
                        sb.append(line + "\n");
                    }
                    is.close();

                    result = sb.toString();
                } catch (Exception e) {
                    Log.e("log_tag",
                            "Error converting result " + e.toString());
                }
            }

        }
    }

    @Override
    protected void onPostExecute(String result) {
        // TODO Auto-generated method stub
        if (progressDialog.isShowing()) {
            progressDialog.dismiss();
            // progressDialog.setCancelable(true);
        }

    }

} 
```

# windows - NSClient++ 未安装在 Windows 中

> ID：12153767
> 
> 赞同：0
> 
> 时间：2012-08-28T06:21:22.007
> 
> 标签：windows, linux, nagios

我已经在 linux 中安装了 Nagios 监控工具，其服务按预期成功运行。

现在根据 NSClient 文档，没有安装 windows 部分。所需的步骤是：

```
(a) Copy pNSClient.exe, pdh.dll, psapi.dll and counters.defs in any directory on the machine you want to monitor. ie. (c:\nsclient).
(b) Open a dos prompt in the installation directory
(c) Run the following command : >pNSClient.exe /install
(d) Type 'net start nsclient' on the command line or start the service 'Nagios Agent' in the services applet of the control panel. 
```

安装将在注册表中为服务创建一个条目，并创建一个新密钥来存储参数。创建的密钥如下：

**HKEY_LOCAL_MACHINE\SOFTWARE\NSClient**

* * *

问题在于按照第一步进行安装，并且“net start nsclient”命令未在命令提示符下执行，其显示的**服务名称无效**

对此有任何帮助吗？M 在 Windows 7 上安装它。只剩下 NSClient 的 Windows 安装部分，但 linux 部分与“check_nt”插件一起正确安装。

提前致谢 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:29:27.147

该文档可能已过时。尝试使用以下文档安装 NSClient++。该文档适用于 Nagios XI，但代理说明应该相同。 [http://assets.nagios.com/downloads/nagiosxi/docs/Installing_The_XI_Windows_Agent.pdf](http://assets.nagios.com/downloads/nagiosxi/docs/Installing_The_XI_Windows_Agent.pdf)

否则，您也可以尝试：

```
 net start nsclient++ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T16:53:31.157

NSClient 已过时且已弃用。您应该使用具有实际安装程序的[NSClient++](http://www.nsclient.org/nscp/) (AKA nscp) 以及[出色的文档](http://www.nsclient.org/nscp/wiki/doc)。

或者，如果您正在处理几十个 Windows 主机，并且正在使用 Active Directory，您可能需要考虑[Nagios-WSC](http://nagios-wsc.sourceforge.net/)。不过，它是否适合您的需求取决于您希望进行哪种检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-11T13:45:23.287

只是一个建议-忘记手动安装）安装 choco

```
iex ((New-Object System.Net.WebClient).DownloadString('https://chocolatey.org/install.ps1')) 
```

重新启动 powershell 会话并安装 nsclient++

```
choco install nscp 
```

# opengl-es - 图像不显示并显示错误，如“cocos2d：CCTexture2D：使用 RGB565 纹理，因为图像没有 alpha”

> ID：12153768
> 
> 赞同：5
> 
> 时间：2012-08-28T06:21:31.743
> 
> 标签：opengl-es, cocos2d-iphone, box2d-iphone, ccsprite, texture2d

我正在使用 Box2D 制作一个应用程序，在该应用程序中我从资源库中获取图像并将它们显示为精灵。

这是我所做的代码：

**从资产库中获取图像：**

```
CGImageRef imgRef = [[mutArrAssetPhotos objectAtIndex:i] thumbnail]; 
```

**创建 Texture2D ：**

```
CCTexture2D *spriteTexture = [[CCTexture2D alloc]initWithCGImage:imgRef resolutionType:kCCResolutionUnknown]; 
```

**从纹理创建精灵：**

```
CCSprite *paddle = [CCSprite spriteWithTexture:spriteTexture]; 
```

这 在控制台中给了我**警告，例如：**

```
"cocos2d: CCTexture2D: Using RGB565 texture since image has no alpha" 
```

仍然在模拟器中，虽然有警告但它工作正常，但在设备图像中没有显示。

但相反，如果我使用：

```
CCSprite *paddle = [CCSprite spriteWithFile:@"img.png"]; 
```

它工作正常，也没有发出任何警告。

任何人都可以帮忙吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T05:01:40.597

我已经解决了。不知何故，我设法重新创建了我正在创建精灵的图像。

```
CGImageRef imgRef = [[mutArrAssetPhotos objectAtIndex:i] thumbnail];
        UIImage *image = [self updateImage:[UIImage imageWithCGImage:imgRef]];
        imgRef = image.CGImage;

        CCSprite *paddle = [CCSprite spriteWithCGImage:image.CGImage key:[NSString stringWithFormat:@"%d",i]]; 
```

为了更新图像，我重新绘制它，这样我就不会收到任何 alpha 警告。更新方法是这样的：

```
-(UIImage *) updateImage:(UIImage *)image
{
    UIImageView *imgView = [[UIImageView alloc] initWithImage:image];
    imgView.frame = CGRectMake(0,50, image.size.width,image.size.height);

    image = [self captureImageFrom:imgView];

    [imgView release];
    return image;
}

-(UIImage *) captureImageFrom:(UIImageView *)view{

    UIGraphicsBeginImageContext(view.frame.size);
    CGContextRef context = UIGraphicsGetCurrentContext();
    [view.layer renderInContext:context];
    UIImage *screenShot = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return screenShot;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T11:51:45.837

我认为（找不到文档来确认很难）缩略图改变了图像格式，所以你得到一个普通的无 alpha 图像参考。

尝试使用以下方法创建正确的图像参考：

```
CGImageRef imgRef = [[[mutArrAssetPhotos objectAtIndex:i] defaultRepresentation] fullResolutionImage]; 
```

Detecting whether javascript script is enabled/disabled in the browser. 我将标签添加到 iframe html 和重定向元标签的内容中，它应该加载到顶部父位置。 知道为什么这不起作用吗？或者我如何让这个东西工作？ 谢谢 使用 xquery 或其他东西编辑 xml 我想更改 xml 文档中某些元素的属性。最简单的方法是什么？（Xquery 是最好的，或者我可以以某种方式处理 python） 更改/root/person[1]/@name为"Jim" 更改/root/person[2]/@name为"John" 示例.xml <root><person name="brian"><number>1</number> <school>Y</school> <age>18</age></person> <person name="brian"><number>1</number> <school>Y</school> <age>18</age></person></root> Sample_result.xml <root><person name="Jim"><number>1</number> <school>Y</school> <age>18</age></person> <person name="John"><number>1</number> <school>Y</school> <age>18</age></person></root> javascripthtml 4 2 回答 2 This answer is useful 1 该base标记仅影响具有作为指定具有 URL 值的属性的内容出现的 URL 的元素，例如href. 处理启用/禁用 JavaScript 的建设性方法是首先设计一个假设 JavaScript 被禁用的页面，然后以不显眼的方式添加 JavaScript。 于 2012-08-28T07:50:53.333 回答 This answer is useful 0 更新：我明白你想要做什么。该base标签仅适用于链接。由于这仅在禁用 JavaScript 时完成，因此 iframe 的 href 不可能更改，并且您不可能“以编程方式单击”可能引用该 JavaScript 错误页面的链接，因此使用base. 请参阅下面的解决方案。 您的代码不起作用的原因是因为大多数浏览器不会单独呈现 2 个标签。 因此，不要写，只需写：  于 2012-08-28T06:26:58.683 回答 Related 1 scala - 为所有子模块生成 jacoco 代码覆盖率报告 4 python - '\b' 不在 PyCharm 控制台中打印退格键 3 php - 如何在 ubuntu 服务器上部署 cakephp 应用程序 2 javascript - 选中加载对象数组中的复选框 1 sql - 在 SQL Server 2008 R2 中创建数据库副本 2 machine-learning - 将分类器导出到人类可读文件 1 sql-server-2008 - 将参数发送到动态 SQL 2 ruby-on-rails - 在 rails 控制台下编辑 .rb 文件 2 java - 为什么我无法读取 sd 中的文本文件？ 0 vb.net - 使用 VB.NET 获取过滤列表 Wordpress 帖子？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641 <link href="../Styles/Style.css" type="text/css" rel="stylesheet">

# javascript - 基本标签没有影响 可能重复： 如何检测 JavaScript 是否被禁用？ 问问题 user658768 问问题 2012-08-28T06:21:37.693 1964 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 可能重复： 如何检测 JavaScript 是否被禁用？ 我需要检测浏览器中是否禁用了javascript。 为此，我在文档中放置了一个 iframe，并以 10 秒的间隔刷新页面。一旦脚本被禁用，它必须使用 javascript 错误 URL 重定向顶级父级。这是我的 iframe 代码：   <title>Detect Script</title> Detecting whether javascript script is enabled/disabled in the browser. 我将标签添加到 iframe html 和重定向元标签的内容中，它应该加载到顶部父位置。 知道为什么这不起作用吗？或者我如何让这个东西工作？ 谢谢 使用 xquery 或其他东西编辑 xml 我想更改 xml 文档中某些元素的属性。最简单的方法是什么？（Xquery 是最好的，或者我可以以某种方式处理 python） 更改/root/person[1]/@name为"Jim" 更改/root/person[2]/@name为"John" 示例.xml <root> <person name="brian"> <number>1</number> <school>Y</school> <age>18</age> </person> <person name="brian"> <number>1</number> <school>Y</school> <age>18</age> </person> </root> Sample_result.xml <root> <person name="Jim"> <number>1</number> <school>Y</school> <age>18</age> </person> <person name="John"> <number>1</number> <school>Y</school> <age>18</age> </person> </root> javascripthtml 4 2 回答 2 This answer is useful 1 该base标记仅影响具有作为指定具有 URL 值的属性的内容出现的 URL 的元素，例如href. 处理启用/禁用 JavaScript 的建设性方法是首先设计一个假设 JavaScript 被禁用的页面，然后以不显眼的方式添加 JavaScript。 于 2012-08-28T07:50:53.333 回答 This answer is useful 0 更新：我明白你想要做什么。该base标签仅适用于链接。由于这仅在禁用 JavaScript 时完成，因此 iframe 的 href 不可能更改，并且您不可能“以编程方式单击”可能引用该 JavaScript 错误页面的链接，因此使用base. 请参阅下面的解决方案。 您的代码不起作用的原因是因为大多数浏览器不会单独呈现 2 个标签。 因此，不要写，只需写：  于 2012-08-28T06:26:58.683 回答 Related 1 scala - 为所有子模块生成 jacoco 代码覆盖率报告 4 python - '\b' 不在 PyCharm 控制台中打印退格键 3 php - 如何在 ubuntu 服务器上部署 cakephp 应用程序 2 javascript - 选中加载对象数组中的复选框 1 sql - 在 SQL Server 2008 R2 中创建数据库副本 2 machine-learning - 将分类器导出到人类可读文件 1 sql-server-2008 - 将参数发送到动态 SQL 2 ruby-on-rails - 在 rails 控制台下编辑 .rb 文件 2 java - 为什么我无法读取 sd 中的文本文件？ 0 vb.net - 使用 VB.NET 获取过滤列表 Wordpress 帖子？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：12153769
> 
> 赞同：0
> 
> 时间：
> 
> 标签：javascript, html

> **可能重复：**
> [如何检测 JavaScript 是否被禁用？](https://stackoverflow.com/questions/121203/how-to-detect-if-javascript-is-disabled)

我需要检测浏览器中是否禁用了javascript。

为此，我在文档中放置了一个 iframe，并以 10 秒的间隔刷新页面。一旦脚本被禁用，它必须使用 javascript 错误 URL 重定向顶级父级。这是我的 iframe 代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<base href="http://localhost/test/" target="_top" />
<noscript>
<meta http-equiv="refresh" content="1; URL=http://localhost/test/javascript_error.php" />
</noscript>
<meta http-equiv="refresh" content="10" />
<title>Detect Script</title>
</head>
<body style="text-align:center;">
    Detecting whether javascript script is enabled/disabled in the browser.
</body>
</html> 
```

我将标签添加到 iframe html 和重定向元标签的内容中，它应该加载到顶部父位置。

知道为什么这不起作用吗？或者我如何让这个东西工作？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T07:50:53.333

该`base`标记仅影响具有作为指定具有 URL 值的属性的内容出现的 URL 的元素，例如`href`.

处理启用/禁用 JavaScript 的建设性方法是首先设计一个假设 JavaScript 被禁用的页面，然后以不显眼的方式添加 JavaScript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T06:26:58.683

**更新：**我明白你想要做什么。该`base`标签仅适用于链接。由于这仅在禁用 JavaScript 时完成，因此 iframe 的 href 不可能更改，并且您不可能“以编程方式单击”可能引用该 JavaScript 错误页面的链接，因此使用`base`. 请参阅下面的解决方案。

您的代码不起作用的原因是因为大多数浏览器不会`<meta http-equiv="refresh">`单独呈现 2 个标签。

因此，不要写`<meta http-equiv="refresh" content="10" />`，只需写：

```
<script type="text/javascript">
setTimeout(function () {
window.location.reload();
}, 10000);
</script> 
```

# sql-server - 递归选择

> ID：12153770
> 
> 赞同：3
> 
> 时间：2012-08-28T06:21:39.790
> 
> 标签：sql-server, database-design

我尝试使用创建 SQL 语句，`WITH`但我无法正确使用。

我得到了以下表格；

组（ID、名称）

```
1, 'My app'
2, 'Local admins'
3, 'Global admins' 
```

用户（1，姓名）

```
1, 'Arne' 
```

GroupOwners（GroupId、OwnerType、OwnerId）

```
1, 'Group', 2 
```

GroupMembers (GroupId、MemberType、MemberId)

```
2, 'Group', 3
3, 'User', 1 
```

我正在尝试查找所有`Arne`属于其所有者的组。在这种情况下，它是`My App`. 但问题是`Local Admins`被设置为所有者。并且`Global admins`是`Local admins`. 并`Arne`终于成为`Global admins`.

![在此处输入图像描述](../Images/225d1016a6bdda29971aee4825cfa3ab.png)

*没关系钻石，它们是不正确的*

嵌套因组而异。（有些用户直接在 GroupOwners 中，而其他用户可能有一个用户作为成员的组）

是否可以用一个 SQL 语句的母亲来解决？附加约束：`Groups`/`Users`在系统的其他地方使用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T08:06:06.980

这是递归 cte，它将首先找到组`Arno`是其中的成员，然后匹配所有直接或间接包含这些组的组。结果最终加入到 GroupOwners 以限制结果。注意：如果`Arno`可能是组的所有者，但不是该组的成员，则此查询也需要 UNION 来附加这些组。

```
declare @UserID int = 1

; with allTheGroups as (
  select gm.GroupID
    from GroupMembers gm
   where gm.MemberType = 'User'
     and gm.MemberID = @UserID
  union all
  select gm.GroupID
    from GroupMembers gm
   inner join allTheGroups
      on gm.MemberID = allTheGroups.GroupID
   where gm.MemberType = 'Group'
)
select Groups.*
  from Groups
 inner join GroupOwners gow
    on Groups.ID = gow.GroupID
   and gow.OwnerType = 'Group'
 inner join allTheGroups a
    on gow.OwnerID = a.GroupID 
```

[带有示例的 Sql Fiddle 在这里](http://sqlfiddle.com/#!3/d6f1d/2)。

用于检索直接拥有添加的组的用户的联合示例。需要附加到上面的查询（当然选择列表调整）。

```
union
select gow.OwnerID, Users.Name
  from GroupOwners gow
 inner join Users
    on gow.OwnerID = Users.ID
   and gow.OwnerType = 'User'
 where gow.OwnerID = @UserID 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-28T06:32:43.150

是的，您的表格建模不正确。你只需要有两张桌子。组和管理员（或用户，取决于您的方案）。

然后，您将诸如“本地”或“全局”或名称 (Arne) 之类的内容存储在 Admin/User 表中。然后它只是两个表之间的简单选择或连接。无需嵌套/递归。

如果您需要我为您绘制 ERD 或其他内容来解释，请告诉我。

# c# - 使用外键将 SQL Server 2012 数据库导出为 XML

> ID：12153773
> 
> 赞同：2
> 
> 时间：2012-08-28T06:22:13.847
> 
> 标签：c#, xml, ssis, sql-server-2012

[除了在这个线程SQL DB to XML](https://stackoverflow.com/questions/3952469/export-xml-from-sql-server)中导出到 xml 之外，我希望做的是，对于作为外键的每一行，我还想包含该引用的 xml 表示。

例如员工表：

```
EID(PK)   Name  Supervisor(FK)  
  1       John       NULL  
  2       Kevin       1 
```

应将 XML 输出为：

```
<Employees>  
    <Employee> 
       <EID>1</EID>  
       <Name>John</Name>
       <Supervisor>NULL</Supervisor>
    </Employee>
    <Employee>
       <EID>2</EID>
       <Name>Kevin</Name>
       <Supervisor>
            <EID>1</EID>
            <Name>John</Name>
               <Supervisor>NULL</Supervisor>
       </Supervisor>
    </Employee>
</Employees> 
```

我正在寻找 C#（如果我能找到一种方法来知道 DataColumn 是外键）或 SSIS 中的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T06:45:17.270

试试这个代码，[也在 SQL Fiddle 上](http://sqlfiddle.com/#!3/e0730/8)。通过在指令上指定可选`XSINIL`参数`ELEMENTS`，您可以请求也为该`NULL`值创建一个元素。`NULL`在这种情况下，将为每个列值返回一个 xsi:nil 属性设置为 TRUE 的元素，`xmlns namespace`并将在根处创建对 的引用。

```
DECLARE @Employee TABLE([EID] INT, [Name] NVARCHAR(5), [Supervisor] INT);

INSERT INTO @Employee
    ([EID], [Name], [Supervisor])
VALUES
    (1, 'John', NULL),
    (2, 'Kevin', 1),
    (3, 'Paul', 1),
    (4, 'Joe', 2);

SELECT T1.EID, T1.[Name],
    (SELECT T2.EID, T2.[Name]
       FROM @Employee T2
      WHERE T2.EID = T1.Supervisor
        FOR XML PATH('Supervisor'),TYPE)
  FROM @Employee T1
   FOR XML PATH('Employee'), ROOT ('Employees'), Elements XSINIL 
```

回报：

```
<Employees xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <Employee>
    <EID>1</EID>
    <Name>John</Name>
  </Employee>
  <Employee>
    <EID>2</EID>
    <Name>Kevin</Name>
    <Supervisor>
      <EID>1</EID>
      <Name>John</Name>
    </Supervisor>
  </Employee>
  <Employee>
    <EID>3</EID>
    <Name>Paul</Name>
    <Supervisor>
      <EID>1</EID>
      <Name>John</Name>
    </Supervisor>
  </Employee>
  <Employee>
    <EID>4</EID>
    <Name>Joe</Name>
    <Supervisor>
      <EID>2</EID>
      <Name>Kevin</Name>
    </Supervisor>
  </Employee>
</Employees> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T16:34:22.853

我构建了一个表，它结合了 KEY_COLUMN_USAGE 和 REFERENTIAL_CONSTRAINTS 来从外键（依赖列）跟踪到主键（主列），然后当我想跟踪引用时，我使用这个表进行查找。

我无法共享代码，但这是一个简单的查询。

# xml - 使用 xquery 或其他东西编辑 xml

> ID：12153774
> 
> 赞同：0
> 
> 时间：2012-08-28T06:22:18.123
> 
> 标签：xml, xquery, xquery-update

我想更改 xml 文档中某些元素的属性。最简单的方法是什么？（Xquery 是最好的，或者我可以以某种方式处理 python）

更改`/root/person[1]/@name`为`"Jim"`
更改`/root/person[2]/@name`为`"John"`

**示例.xml**

```
<root>
    <person name="brian">
    <number>1</number>
    <school>Y</school>
    <age>18</age>
    </person>
    <person name="brian">
    <number>1</number>
    <school>Y</school>
    <age>18</age>
    </person>
</root> 
```

**Sample_result.xml**

```
<root>
    <person name="Jim">
    <number>1</number>
    <school>Y</school>
    <age>18</age>
    </person>
    <person name="John">
    <number>1</number>
    <school>Y</school>
    <age>18</age>
    </person>
</root> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:41:38.037

在 XSLT 中最容易对 XML 文档进行小的更改：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <!-- By default, copy elements and attributes unchanged -->
  <xsl:template match="node()|@*">
    <xsl:copy>
      <xsl:apply-templates select="node() | @*"/>
    </xsl:copy>
  </xsl:template>

  <!-- Change /root/person[1]/@name to "Jim" -->
  <xsl:template match="/root/person[1]/@name">
    <xsl:attribute name="name">Jim</xsl:attribute>
  </xsl:template>

  <!-- Change /root/person[2]/@name to "John" -->
  <xsl:template match="/root/person[2]/@name">
    <xsl:attribute name="name">John</xsl:attribute>
  </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T10:26:22.200

如果您的实现支持它，请尝试[XQuery Update 。](http://docs.basex.org/wiki/Updates#replace)

```
replace value of node /root/person[1]/@name with "Jim",
replace value of node /root/person[2]/@name with "John" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T07:25:51.493

嗯，也许只是重建它并在 FLOWR 中进行更改？-->

```
element root {
    for $person at $i in doc('Sample.xml')/root/person
    let $new-name := if($i eq 1) then "Jim" else "John"
    return 
        element person {
            attribute name { $new-name },
            $person/*
        }
} 
```

# c# - 在 VS2012 中使用 EF 4.4 而不是 5.0

> ID：12153781
> 
> 赞同：5
> 
> 时间：2012-08-28T06:22:35.800
> 
> 标签：c#, .net, entity-framework, orm

我们将一些项目从 VS2010 迁移到 VS2012，但仍然使用 .NET 4.0 而**不是**.NET 4.5

当我添加新的 EDMX 时，VS2012 使用 EF 5.0 但我想继续使用 4.x 版本，这是第一点。

第二点是5.0版，继承自DbContext，而不是像4.x版那样的ObjectContext。在 5.0 版中，我看不到任何将连接字符串作为参数传递的方法。

如何在 VS2012 中使用具有相同 EDMX 设计器行为的 4.x 版？

谢谢，

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-28T07:48:42.650

正如评论中提到的，你真的得到的是 EF 4.4，而不是 EF 5.0。然而，令人困惑的是，EF 4.4 包含在 NuGet EntityFramework 5.0 包中。

对于您的其他问题，您可以在设计器中打开 EDMX，将“代码生成策略”从“无”恢复为“默认”，然后在解决方案资源管理器中删除`.tt`文件。现在你将`ObjectContext`再次拥有你的，如果你愿意，你可以从你的项目中删除 EntityFramework 包。

我不确定是否有任何方法可以更改添加 NuGet 包的默认行为。

# database - 示例数据库

> ID：12153782
> 
> 赞同：1
> 
> 时间：2012-08-28T06:22:36.653
> 
> 标签：database, oracle10g

我是甲骨文的新手。我想要一个巨大的样本数据库（有一百万个元组）。我找不到任何使用谷歌。我正在使用 oracle 10g .. 你们知道我可以从哪里下载吗？

谢谢 ..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T06:55:28.397

我不知道有任何这种大小的“现成”样本数据库

据我所知，您有两种选择：

1.  使用[PolePosition](http://www.polepos.org/)创建示例数据库。它最初是一个基准框架，但带有自己的数据库模式和*生成*大型数据库的必要工具（您可以定义哪个大小）
2.  使用像[Benerator](http://databene.org/databene-benerator.html)这样的测试数据生成器从头开始完全创建您的测试数据。一开始看起来有点吓人，但它是一个非常强大的工具。它还具有生成有意义的名称、邮政编码等的生成器。因此，您将获得“看起来”真实且不含乱码的测试数据。

下面的 benerator 脚本为表生成一百万行，其中`items`的每一行`items`生成 10 行`item_details`（所以你最终得到 100 万和 1000 万行）

```
<?xml version="1.0" encoding="iso-8859-1"?>
<setup  xmlns="http://databene.org/benerator/0.7.0"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://databene.org/benerator/0.7.0 http://databene.org/benerator-0.7.0.xsd">

    <import defaults="true"/>
    <import platforms="csv"/>

    <generate type="items" count="1000000">
        <consumer class="org.databene.platform.csv.CSVEntityExporter">
            <property name="uri" value="items.csv"/>
            <property name="separator" value="|"/>
            <property name="encoding" value="ISO-8859-1"/>
        </consumer>

        <id name="item_id" type="big_integer" generator="IncrementalIdGenerator"/>
        <attribute name="item_name" type="string" pattern="[A-Z][a-z ]{6,25}"/>

        <generate type="item_details" count="10">
            <consumer class="org.databene.platform.csv.CSVEntityExporter">
                <property name="uri" value="item_details.csv"/>
                <property name="separator" value="|"/>
                <property name="encoding" value="ISO-8859-1"/>
            </consumer>
            <id name="item_detail_id" type="big_integer" generator="IncrementalIdGenerator"/>
            <attribute name="item_id" script="items.item_id"/>
            <attribute name="sort_sequence" type="int" />
        </generate>

    </generate>
</setup> 
```

如果您想要更“真实”的名称，请查看以下脚本，该脚本会生成具有有效 EAN 代码和一些“正常”外观的制造商名称的产品：

```
<?xml version="1.0" encoding="iso-8859-1"?>
<setup  xmlns="http://databene.org/benerator/0.7.0"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://databene.org/benerator/0.7.0 http://databene.org/benerator-0.7.0.xsd">

    <import platforms="csv"/>
    <import domains="product"/>
    <import domains="organization" />

    <setting name="product_count" value="100000"/>

    <generate type="product" count="{product_count}">
        <consumer class="CSVEntityExporter">
            <property name="uri" value="products.csv" />
            <property name="separator" value=","/>
        </consumer>

        <id name="id" type="long"/>
        <attribute name="ean_code" unique="true" generator="EANGenerator"/>
        <attribute name="product_code" unique="true" pattern="[A-Z]{3}[0-9]{6}"/>
        <variable name="cust" generator="CompanyNameGenerator" dataset="DE" locale="de_DE"/>
        <attribute name="manufacturer_name" source="cust.shortName"/>
    </generate>

</setup> 
```

创建数据文件后，您可以使用 SQL*Loader 将它们导入数据库。

这种方法的优点是您可以完全控制测试数据库中的表，并且可以根据您尝试使用它来调整它们。

# iphone - 苹果会从 iTunes 中删除应用更新的核心数据吗？

> ID：12153787
> 
> 赞同：2
> 
> 时间：2012-08-28T06:23:21.410
> 
> 标签：iphone, objective-c, ios

我在我的应用程序的第一个版本中使用 sqlite 来存储一些数据，现在我必须更改一些表的结构。

请注意，我之前发布了新版本，并注意到更新后数据库已被删除，因为更新后我没有看到数据库记录，并且它再次开始注册行。

我的问题是我是否需要在更新时处理表删除，为什么苹果会删除上次更新中的表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T06:31:39.413

这取决于数据库文件的名称、表名和位置。

来自 Apple 的编程指南：当用户下载应用更新时，iTunes 会在新的应用目录中安装更新。然后它将用户的数据文件从旧安装移动到新的应用程序目录，然后再删除旧安装。以下目录中的文件保证在更新过程中被保留：

```
<Application_Home>/Documents
<Application_Home>/Library 
```

尽管其他用户目录中的文件也可能被移动，但您不应依赖它们在更新后存在。

参考：http: [//developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/PerformanceTuning/PerformanceTuning.html](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/PerformanceTuning/PerformanceTuning.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T06:36:29.930

更新后没有看到任何数据的可能原因有多种。例如，第二次更新中的代码可能更改了数据库文件的名称，或者某些表或字段的名称。

原则上，旧的 sqlite 存储应该在更新后存在。

您将不得不手动编写迁移代码：在更新后首次启动时，创建一个新存储，从旧存储读取每条记录，并以新格式将其保存在新存储中。

# iphone - NSManagedObject 解析与 RestKit 映射

> ID：12153788
> 
> 赞同：0
> 
> 时间：2012-08-28T06:23:36.673
> 
> 标签：iphone, ios, ios4, restkit

下面是我用于类的代码：

```
@interface DBUser : NSManagedObject
@property (nonatomic, retain) NSString * username;
@property (nonatomic, retain) NSString * email;
@property (nonatomic, retain) NSString * accessToken;
@property (nonatomic, retain) NSNumber * userID;
@end

@implementation DBUser
@dynamic username;
@dynamic email;
@dynamic userID;
@dynamic accessToken;
@end 
```

这是我的映射：

```
RKManagedObjectMapping* userMapping = [RKObjectMapping mappingForClass:[DBUser class]];
userMapping.setDefaultValueForMissingAttributes = NO;
[userMapping mapKeyPathsToAttributes:
 @"id", @"userID",
 @"email", @"email",
 @"username", @"username",
 @"access_token", @"accessToken",
 nil];

 [objectManager.mappingProvider registerMapping:userMapping withRootKeyPath:@"user"]; 
```

和路线：

```
[objectManager.mappingProvider registerMapping:userMapping withRootKeyPath:@"user"]; 
```

这是从服务返回的 json 对象：

```
{
"user": {
"id": 1,
"username": "username",
"email": "email@email.com",
"access_token": "59f99efcffa9af7252d5ce1839082bd7e740e289e2577dda592c68647dc4e0db"
}
} 
```

但是在`objectDidLoad`方法中我遇到了一些数据失败：

```
<DBUser: 0x5939cc0> (entity: DBUser; id: 0x4f432e0 <x-coredata://6F302428-0538-41D0-9627-81C80E905DA8/DBUser/p11> ; data: <fault>) 
```

在这里，我附上了跟踪的完整日志。它可以很好地检测对象映射，但是当我得到`self`它时不显示任何数据。

[http://goo.gl/OcouL](http://goo.gl/OcouL)

这段代码有什么问题或我在其中缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:49:43.513

这不是数据故障。该对象作为 FAULT 返回。这并不意味着它们是数据故障。尝试将returnsObjectsAsFaults 属性设置为NO。

# c# - 指数数组的边界之外

> ID：12153790
> 
> 赞同：-9
> 
> 时间：2012-08-28T06:23:51.647
> 
> 标签：c#, arrays

非常简单的问题。但仍然无法解决。

我将消息传递给数组

`feet nimantha 1 2 3 4 5 6 7 8 120827`

我已经像这样声明了数组，

```
string[] arr1 = new string[10]; 
```

在那之后，我尝试了

```
string[] arr1 = new string[11]; 
```

但两者都向我展示了这个例外 -`Index was outside the bounds of the array`

代码在这里。

```
protected void Page_Load(object sender, EventArgs e) {
  try {
    string mobileNo = Request.QueryString["msisdn"];
    int  dest = int.Parse(Request.QueryString["shortcode"].ToString());
    string messageIn = Request.QueryString["msg"];
    string operatorNew = Request.QueryString["operator"];

    // Label1.Text = "ok";
    WriteToFile(mobileNo, dest, messageIn, operatorNew);
    if (messageIn != null) {
      string[] arr1 = new string[11];
      arr1 = messageIn.Split(' ');
      int size = arr1.Length;
      string arrmsg = "";
      foreach (string _element in arr1) {
        if (arrmsg == "")
          arrmsg = _element;
        else {
          arrmsg = arrmsg + "/" + _element;
        }
      }
    }
  } catch {}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T06:31:19.790

（编辑为问题添加了更多代码）：

尝试替换这个：

```
string[] arr1 = new string[11]; 
arr1 = messageIn.Split(' '); 
```

具有以下内容：

```
string[] arr1 = messageIn.Split(new char[]{' '}); 
```

这很可能会导致数组长度超过 11，但这并不重要——您无需在此处填充数组之前指定长度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T06:31:21.053

我认为您将其与字符数组混淆了。在你的情况下，我会简单地做：

```
arr1[0] = "feet nimantha 1 2 3 4 5 6 7 8 120827"; 
```

如果那不是您想要的，请查看 Kjartan。对不起，我写的不对，代码是在我写完之后出现的。:(

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-20T16:21:59.913

如果您需要的结果是

```
arrmsg = "feet/nimantha/1/2/3/4/5/6/7/8/120827" 
```

并且您有例外，因为您的字符串数组 arr1 的长度与带有空格的字符串拆分结果不匹配，那么您可以声明并分配您的字符串数组来存储字符串拆分结果

```
//string[] arr1 = new string[11];
string[] arr1 = messageIn.Split(' '); 
```

然后 arr1 可以根据字符串拆分结果具有不同的数组大小。例如，

```
string messageIn ="feet nimantha 1 3 4 5 6 7 8 120827";
//arr1 is string[10] here
string[] arr1 = messageIn.Split(' ');

messageIn = "feet nimantha 1 3 4 5 6 7 8 120827 2132144";
//arr1 is string[11] here
arr1 = messageIn.Split(' '); 
```

因此您不必担心字符串数组 arr1 的大小与字符串拆分的结果不匹配。

# python - 传递星号时的python行为

> ID：12153793
> 
> 赞同：0
> 
> 时间：2012-08-28T06:24:21.533
> 
> 标签：python, input, parameter-passing

我正在写一个小脚本，应该能够处理多个文件。所以我添加了文件可以以逗号分隔传递，并执行 arg.split(',') 然后处理每个文件。

现在我想添加星号作为输入可能性，例如

```
python myPythonScript.py -i folder/* 
```

如果我在第一次访问它时打印选项 -i 的参数

```
folder/firstFileInFolder.txt 
```

但是如果我用

```
python myPythonScript.py -i someFolder/someFile,folder/* 
```

它工作得很好。有谁知道，为什么 python 可能会那样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T06:46:26.427

尝试运行此脚本

```
import sys

for arg in sys.argv:
    print arg 
```

蟒蛇脚本.py *

你的 shell 在 python 看到它之前扩展了星号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T09:59:43.400

如评论中所述，您的外壳正在扩展非逗号分隔大小写的星号。如果您知道用户可以像第二个示例中那样将星号指定为文件名的一部分，则可以让 Python 使用[glob](http://docs.python.org/library/glob.html#module-glob)模块进行路径扩展。

```
from glob import glob
glob('*') 
```

允许 shell 或 Python 进行星号扩展的代码可能如下所示：

```
import glob
file_list = []
for pattern in sys.argv[1:]:
    file_list.extend(glob.glob(pattern)) 
```

在您的情况下，使用逗号作为分隔符会阻止您使用逗号作为文件名的一部分。

# ios - 使用 XMPP 传输文件（扩展 XEP-0065）

> ID：12153795
> 
> 赞同：0
> 
> 时间：2012-08-28T06:24:35.407
> 
> 标签：ios, xmpp, openfire, xmppframework

不知道为什么我的转套接字失败（调用了 turnSocketDidFail）。任何人都可以帮我解决这个问题吗？请指出我在这里做错了什么。我知道有很多这样的问题，我已经检查了所有这些问题，而且我已经得到了一点帮助。一个客户端是 Spark，另一个是模拟器。

**设置：**
服务器：testXyz
Senderjid：user1@testXyz
Receiverjid：user2@testXyz

```
XMPPJID *jid = [XMPPJID jidWithString:Receiverjid];
[TURNSocket setProxyCandidates:[NSArray arrayWithObjects:Receiverjid, nil]];
TURNSocket *turnSocket = [[TURNSocket alloc] initWithStream:self.chatManager.xmppStream toJID:jid];
[turnSocket startWithDelegate:self delegateQueue:dispatch_get_main_queue()]; 
```

**控制台日志**

```
SEND: 
<iq type="get" to="Receiverjid" id="C15C428D-6007-4B4E-96D5-65F7A307121A"><query xmlns="http://jabber.org/protocol/disco#items"/></iq>

RECV:
<iq xmlns="jabber:client" type="result" id="C15C428D-6007-4B4E-96D5-65F7A307121A" from="Receiverjid" to="Senderjid/4840c8ae">
<query xmlns="http://jabber.org/protocol/disco#items">
<item jid="Receiverjid" node="http://jabber.org/protocol/tune"/>
<item jid="Receiverjid/Spark 2.6.3"/>
</query>
</iq>

SEND: 
<iq type="get" to="Receiverjid" id="A4D8B427-B323-4152-8B19-7B55164E9C4B">
<query xmlns="http://jabber.org/protocol/disco#info"/>
</iq>

RECV: 
<iq xmlns="jabber:client" type="result" id="A4D8B427-B323-4152-8B19-7B55164E9C4B" from="Receiverjid" to="Senderjid/4840c8ae">
<query xmlns="http://jabber.org/protocol/disco#info">
<identity category="account" type="registered"/>
<identity category="pubsub" type="pep"/>
<feature var="http://jabber.org/protocol/disco#info"/>
</query>
</iq>

SEND: 
<iq type="get" to="Receiverjid/Spark 2.6.3" id="2DE55487-9203-4266-A559-1B1D3DC5FBF4">
<query xmlns="http://jabber.org/protocol/disco#info"/>
</iq>

RECV:
<iq xmlns="jabber:client" id="2DE55487-9203-4266-A559-1B1D3DC5FBF4" to="Senderjid/4840c8ae" type="result" from="Receiverjid/Spark 2.6.3">
<query xmlns="http://jabber.org/protocol/disco#info">
<identity category="client" name="Smack" type="pc"/>
<feature var="http://www.xmpp.org/extensions/xep-0166.html#ns"/>
<feature var="urn:xmpp:tmp:jingle"/>
</query>
</iq>

RECV:
<iq xmlns="jabber:client" id="2DE55487-9203-4266-A559-1B1D3DC5FBF4" to="Senderjid/4840c8ae" type="result" from="Receiverjid/Spark 2.6.3">
<query xmlns="http://jabber.org/protocol/disco#info">
<identity category="client" name="Smack" type="pc"/>
<feature var="http://jabber.org/protocol/xhtml-im"/>
<feature var="http://jabber.org/protocol/muc"/>
<feature var="http://jabber.org/protocol/bytestreams"/>
<feature var="http://jabber.org/protocol/commands"/>\
<feature var="http://jabber.org/protocol/si/profile/file-transfer"/>
<feature var="http://jabber.org/protocol/si"/>
<feature var="http://jabber.org/protocol/ibb"/>
</query> 
</iq> 
```

**更新**

如果我要改变：

`[TURNSocket setProxyCandidates:[NSArray arrayWithObjects:Receiverjid, nil]];`

到：

`[TURNSocket setProxyCandidates:[NSArray arrayWithObjects:Server, nil]];`

它给了我：

`<error code="503" type="cancel"><service-unavailable xmlns="urn:ietf:params:xml:ns:xmpp-stanzas"/></error>`.

正如在解决此错误的堆栈问题之一中所建议的那样，我已将 Receiverjid: 'user2@testXyz' 替换为 'user2@testXyz/spark' 但仍然遇到相同的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T11:59:32.327

不知道在 setProxyCandidates 中设置什么，但我正在设置我的服务器名称。

`<error code="503" type="cancel"><service-unavailable xmlns="urn:ietf:params:xml:ns:xmpp-stanzas"/></error>`

**解决方案：**传递完整的 jabber id：*username@domain/resource。* 就我而言，我更改了 'user2@testXyz/spark; 到'user2@testXyz/Spark 2.6.3'

我不知道如何找到这些资源参数。我检查了 XMPPJID 类的资源参数，但它是 nil。我通过查看一些控制台日志找到了这些参数。如果有人知道如何从任何 xmpp 类中找到它，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-19T06:08:17.660

[TURNSocket setProxyCandidates:[NSArray arrayWithObjects:Receiverjid, nil]]; 在此将“Receiverjid”替换为主机名，例如：sa.com，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-20T08:07:54.563

iducool，你可以在下面的 AppDelegate 方法中找到完整的 jid 资源。

```
- (void)xmppStream:(XMPPStream *)sender didReceivePresence:(XMPPPresence *)presence
{
    DDLogVerbose(@"%@: %@ - %@", THIS_FILE, THIS_METHOD, [presence fromStr]);

  //  NSString *presenceType = [presence type]; // online/offline
    NSString *myUsername = [[sender myJID] user];
    NSString *presenceFromUser = [[presence from] user];

    NSLog(@" Printing full jid of user %@",[[sender myJID] full]);
    NSLog(@"Printing full jid of user %@",[[sender myJID] resource]);
    NSLog(@"From user %@",[[presence from] full]);
    senderFullID=[[presence from] full];
} 
```

# linux - DECLARE_WORK 中函数的 Linux 传递参数

> ID：12153797
> 
> 赞同：3
> 
> 时间：2012-08-28T06:24:41.600
> 
> 标签：linux, linux-kernel, linux-device-driver, embedded-linux

我尝试对事件工作队列进行编程，但遇到了一些问题。

我使用 Linux 2.6.36 内核。并且 DECLARE_WORK 函数从 3 个参数变为 2 个。

问题是，旧的声明是

```
 DECLARE_WORK  (struct work_struct name,  void (*func)(void *),  void *data); 
```

而新的是

```
 DECLARE_WORK  (struct work_struct name,  void (*func)(void *)); 
```

我认为 void *data 指针是为了给 func 参数。是对的吗？以及如何使用新版本的 DECLARE_WORK 来做到这一点？

谢谢您的帮助

彼得

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T07:22:35.597

`DECLARE_WORK`主要用于不需要实例数据的静态工作项。你想要`INIT_WORK`。使用它来初始化作为`work_struct`另一个结构（您选择）的成员的 a，然后`container_of`在回调中使用以获取指向包含结构的指针。这种`container_of`模式在 Linux 内核中非常常见，因此最好熟悉它！

`wl1271_netstack_work`您可以通过查看[初始化点](http://lxr.linux.no/linux+v3.5.3/drivers/net/wireless/ti/wlcore/main.c#L5102)和[回调](http://lxr.linux.no/linux+v3.5.3/drivers/net/wireless/ti/wlcore/main.c#L518)来查看一个示例。

# drupal - Druapal Ajax 注册表

> ID：12153803
> 
> 赞同：0
> 
> 时间：2012-08-28T06:25:24.533
> 
> 标签：drupal, module, drupal-modules

我正在使用 Drupal 7 我正在使用 Ajax 注册模块。它在所有页面上都可以正常工作，但不能在主页上工作。

这是链接ot网站[点击这里](http://indivar.info/t2c)

现在在这里我们在左上角登录时单击它重定向到登录页面但它应该像所有其他页面一样打开一个弹出窗口

任何人都对此有想法

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T07:30:22.740

我猜你正在使用该模块的开发版本请使用推荐的一个它会正常工作。因为它也可以在我的机器上正常工作

# salesforce - 检查是否存在或捕获异常？

> ID：12153806
> 
> 赞同：2
> 
> 时间：2012-08-28T06:25:43.863
> 
> 标签：salesforce, apex-code, soql

如果记录存在，我想更新记录，如果不存在，我想插入新记录。

最好的方法是什么？

做一个`Select Count()`如果返回零然后插入，如果一个则查询记录，修改和更新，或者我应该尝试查询记录并捕获任何system.queryexception？

这一切都在 Apex 中完成，而不是来自 REST 或 JS API。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T20:43:40.747

添加到这里已经说过的内容，您希望在这些情况下使用 FOR UPDATE 以避免 superfell 所指的内容。所以，

```
Account theAccount;
Account[] accounts = [SELECT Id FROM Account WHERE Name = 'TEST' LIMIT 1 FOR UPDATE];
if(accounts.size() == 1)
   theAccount = accounts[0];
else
   theAccount = new Account();

// Make modifications to theAccount, which is either:
// 1\. A record-locked account that was selected OR
// 2\. A new account that was just created with new Account()

upsert theAccount; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T16:08:34.357

如果可能的话，您应该使用[upsert](http://www.salesforce.com/us/developer/docs/apexcode/index_Left.htm#StartTopic=Content/apex_dml_upsert.htm)调用，一旦您进入并发调用领域，选择然后插入/更新方法就会出现问题，除非您遇到了将父行正确锁定为 select 调用的一部分的麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T06:48:24.103

我会尝试使用列表和`isEmpty()`函数：

```
List<Account> a = [select id from account where name = 'blaahhhh' Limit 1];

if(a.isEmpty()){
    System.debug('#### do insert'); 
}
else{
    System.debug('#### do update'); 
} 
```

# php - 使用隐藏的输入表单评论 ID 是否安全？

> ID：12153807
> 
> 赞同：2
> 
> 时间：2012-08-28T06:25:46.657
> 
> 标签：php, html, hidden-field, hiddenfield

我正在开发一个类似 facebook 的墙，而且我有点诚恳，使用存储流 id 的隐藏输入是否安全？

因此，在我的评论数据库中，我有 4 个字段，`the comment id, stream id, user id, and comment text`流 id 用于定位哪个墙帖有评论，我会将其存储在表单的隐藏输入中。

安全吗？或者我应该考虑另一个想法？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T06:31:08.590

好吧，您必须以某种方式确定墙用户发布的内容，因此您必须以 GET 参数或其他方式（在您的情况下使用 POST）传递该参数。我不认为这有什么问题。如果有人可以在知道该数据的情况下造成损害，那么您的应用程序中存在安全问题。

通过隐藏输入或 GET 参数传递数据的安全级别是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T06:32:45.063

The safest way I can think of solving this problem is by using a [session store](http://php.net/manual/en/reserved.variables.session.php) if possible, unless I'm misunderstanding something.

# python - 如何在 python 中正确编写全局变量？

> ID：12153810
> 
> 赞同：0
> 
> 时间：2012-08-28T06:26:26.160
> 
> 标签：python, sqlalchemy, global-variables

我正在使用 sqlalchemy 进行连接池，并且我想让一个引擎对象可用于其他模块。我为其他模块需要的实用程序创建了一个模块，它看起来像这样：

```
from sqlalchemy import [...]

_engine = create_engine(url)
_meta = MetaData()
_meta.bind = _engine

def get_meta():
       return _meta

def get_engine():
       return _engine 
```

我以前尝试在没有前导下划线的情况下这样做，但它没有用。我的印象是前导下划线只是python中私有变量的传统样式，但显然它会影响代码的解释方式？无论如何，我只是想让一个特定的实时引擎对象（控制对数据库连接池的访问）可用于其他模块，并且想知道这样做的最佳实践，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T06:36:53.003

来自[PEP008](http://www.python.org/dev/peps/pep-0008/)：

> `_single_leading_underscore`：弱“内部使用”指标。例如`from M import *`，不导入名称以下划线开头的对象。

所以是的，解释器处理带有前导下划线的标识符与没有标识符不同。

# iphone - 从 PDF 文件中搜索字符串/文本并在 iPhone/iPad 应用程序中列出所有匹配的字符串

> ID：12153811
> 
> 赞同：2
> 
> 时间：2012-08-28T06:26:47.070
> 
> 标签：iphone, ios, ipad, search, pdf

我已经实现了一个 iPad 应用程序，它实际上是读取 PDF 文件（使用石英）。现在我想实现搜索功能，为此我检查了一些教程，其中一些提到了使用quartz，一些提到了FastPdfKit。但我不知道哪个会更好。我见过石英（[https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/dq_pdf_scan/dq_pdf_scan.html](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/dq_pdf_scan/dq_pdf_scan.html)）。我对此有些怀疑。

1.  “操作员回调”我们使用什么以及为什么使用它？
2.  “运营商表”这样做的目的是什么？和
3.  我们将放置搜索文本的位置。

请在这方面向我提出建议或提供我可以使用的任何其他开源。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T06:37:33.673

`CGPDFScanner`是一个相当低级的 API，它允许您有选择地扫描各种 PDF 运算符并在每个运算符上调用回调。它确实需要您对 PDF 结构有一定的了解，但它会完成这项工作。PDF 操作符是 PDF 文件中的一个命令，它执行某些操作（通常是操作绘图状态，例如写入文本、绘制线条、更改图形状态等）。

本质上，您告诉扫描仪您对哪些 PDF 运算符感兴趣，并告诉它您要调用什么回调。在您的情况下，您对文本运算符`TJ`,`Tj`感兴趣 有关使用此 API 的工作文本搜索示例，请参阅[此页面](http://web.archive.org/web/20131122162015/http://blog.random-ideas.net/?p=184)，有关文本搜索的其他答案，请参阅此[问题。](https://stackoverflow.com/questions/1686924/which-are-the-pdf-operators-needed-to-do-a-search-feature-in-a-pdf-in-iphone-sdk)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T06:46:28.550

您可以在[FastPdfKit](https://github.com/mobfarm/FastPdfKit)获得答案。如果您还有更多信息，请告诉我。我认为这将解决您的目的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-08T04:31:47.280

@Subodh S：目前，PDFKitten 不支持多词查询。因此，您的关键字不会被搜索和突出显示。您必须在源代码中处理自己，甚至更改 PDFKitten 中的某些点。

# java - Java Regex 查找以 SDPCDR_ 开头的字符串

> ID：12153812
> 
> 赞同：2
> 
> 时间：2012-08-28T06:26:47.530
> 
> 标签：java, regex

我应该使用什么正则表达式来匹配以格式开头`SDPCDR` 并包含日期`20120826`并以 结尾的字符串`.asn`？

一个示例字符串是`SDPCDR_delsdp3a_6091_20120826-042451.asn`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T06:33:12.363

This would work:

```
^SDPCDR\w+(\d{8})-\w+.asn$ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T06:34:53.330

```
"^SDPCDR.*\\d{8}.*\\.asn$" 
```

日期部分相当慷慨，但字符串可能已经足够具体以避免错误匹配。如果您正在寻找子字符串而不是尝试匹配整个字符串，请改用

```
"SDPCDR.*?\\d{8}.*?\\.asn" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T06:45:07.607

```
SDPCR_[a-z_]*[0-9]{8,8}-[a-z_]*\\\\.asn 
```

# ruby-on-rails - 尝试部署到 Heroku 时不断收到“错误 H10（应用程序崩溃）-> GET”

> ID：12153818
> 
> 赞同：0
> 
> 时间：2012-08-28T06:26:59.503
> 
> 标签：ruby-on-rails, heroku

因此，我一直在尝试将 rails 应用程序部署到 heroku 并且遇到了一些问题。我在日志和 SO 上做了很多探索，但找不到任何可以为我指明正确方向的东西。再说一次，我可能会遗漏一些明显的东西。无论如何，任何帮助将不胜感激。

命令

```
git push -f heroku master 
```

日志

```
2012-08-28T05:56:30+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
2012-08-28T05:56:30+00:00 app[web.1]:   from /app/config.ru:1:in `new'
2012-08-28T05:56:30+00:00 app[web.1]:   from /app/config.ru:1:in `<main>'
2012-08-28T05:56:30+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:40:in `eval'
2012-08-28T05:56:30+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:40:in `parse_file'
2012-08-28T05:56:30+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:200:in `app'
2012-08-28T05:56:30+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/commands/server.rb:46:in `app'
2012-08-28T05:56:30+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:301:in `wrapped_app'
2012-08-28T05:56:30+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:252:in `start'
2012-08-28T05:56:30+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/commands/server.rb:70:in `start'
2012-08-28T05:56:30+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/commands.rb:55:in `block in <top (required)>'
2012-08-28T05:56:30+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/commands.rb:50:in `tap'
2012-08-28T05:56:30+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/commands.rb:50:in `<top (required)>'
2012-08-28T05:56:30+00:00 app[web.1]:   from script/rails:6:in `require'
2012-08-28T05:56:30+00:00 app[web.1]:   from script/rails:6:in `<main>'
2012-08-28T05:56:31+00:00 heroku[web.1]: Process exited with status 1
2012-08-28T05:56:31+00:00 heroku[web.1]: State changed from starting to crashed
2012-08-28T05:56:36+00:00 heroku[slugc]: Slug compilation started
2012-08-28T05:57:19+00:00 heroku[api]: Release v6 created by raphael.shejnberg@gmail.com
2012-08-28T05:57:19+00:00 heroku[api]: Deploy 8bc52ce by raphael.shejnberg@gmail.com
2012-08-28T05:57:19+00:00 heroku[web.1]: State changed from crashed to starting
2012-08-28T05:57:20+00:00 heroku[slugc]: Slug compilation finished
2012-08-28T05:57:21+00:00 heroku[web.1]: Starting process with command `bundle exec rails server -p 6287`

2012-08-28T05:57:27+00:00 app[web.1]: => Rails 3.2.3 application starting in production on http://0.0.0.0:6287
2012-08-28T05:57:27+00:00 app[web.1]: => Ctrl-C to shutdown server
2012-08-28T05:57:27+00:00 app[web.1]: Exiting
2012-08-28T05:57:27+00:00 app[web.1]: => Booting WEBrick
2012-08-28T05:57:27+00:00 app[web.1]:   from /app/app/models/project.rb:1:in `<top (required)>'
2012-08-28T05:57:27+00:00 app[web.1]: /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.3/lib/active_record/dynamic_matchers.rb:50:in `method_missing': undefined method `has_attached_file' for #<Class:0x00000003d3b3e8> (NoMethodError)
2012-08-28T05:57:27+00:00 app[web.1]: => Call with -d to detach
2012-08-28T05:57:27+00:00 app[web.1]:   from /app/app/models/project.rb:4:in `<class:Project>'
2012-08-28T05:57:27+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
2012-08-28T05:57:27+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:236:in `load_dependency'
2012-08-28T05:57:27+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `block in require'
2012-08-28T05:57:27+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
2012-08-28T05:57:27+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:359:in `require_or_load'
2012-08-28T05:57:27+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:502:in `load_missing_constant'
2012-08-28T05:57:27+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:190:in `each'
2012-08-28T05:57:27+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:192:in `block in const_missing'
2012-08-28T05:57:27+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:190:in `const_missing'
2012-08-28T05:57:27+00:00 app[web.1]:        from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/inflector/methods.rb:229:in `block in constantize'
2012-08-28T05:57:27+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/inflector/methods.rb:228:in `each'
2012-08-28T05:57:27+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/inflector/methods.rb:228:in `constantize'
 2012-08-28T05:57:27+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/inflector/methods.rb:259:in `safe_constantize'
2012-08-28T05:57:27+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/core_ext/string/inflections.rb:66:in `safe_constantize'
 2012-08-28T05:57:27+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_controller/metal/params_wrapper.rb:152:in `_default_wrap_model'
2012-08-28T05:57:27+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_controller/metal/params_wrapper.rb:169:in `_set_wrapper_defaults'
2012-08-28T05:57:27+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_controller/metal/params_wrapper.rb:133:in `inherited'
2012-08-28T05:57:27+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/abstract_controller/railties/routes_helpers.rb:7:in `block (2 levels) in with'
2012-08-28T05:57:27+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_controller/railties/paths.rb:7:in `block (2 levels) in with'
2012-08-28T05:57:27+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
2012-08-28T05:57:27+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:236:in `load_dependency'
2012-08-28T05:57:27+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `block in require'
2012-08-28T05:57:27+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
2012-08-28T05:57:27+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:359:in `require_or_load'
2012-08-28T05:57:27+00:00 app[web.1]:   from /app/app/controllers/projects_controller.rb:1:in `<top (required)>'
2012-08-28T05:57:27+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:313:in `depend_on'
2012-08-28T05:57:27+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/engine.rb:438:in `each'
2012-08-28T05:57:27+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/engine.rb:436:in `eager_load!'
2012-08-28T05:57:27+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/engine.rb:439:in `block (2 levels) in eager_load!'
2012-08-28T05:57:27+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/engine.rb:438:in `block in eager_load!'
2012-08-28T05:57:27+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/engine.rb:436:in `each'
2012-08-28T05:57:27+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:225:in `require_dependency'
2012-08-28T05:57:27+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/application/finisher.rb:53:in `block in <module:Finisher>'
2012-08-28T05:57:27+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/initializable.rb:55:in `block in run_initializers'
2012-08-28T05:57:27+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/initializable.rb:54:in `each'
2012-08-28T05:57:27+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/initializable.rb:30:in `instance_exec'
2012-08-28T05:57:27+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/initializable.rb:30:in `run'
2012-08-28T05:57:27+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/initializable.rb:54:in `run_initializers'
2012-08-28T05:57:27+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/application.rb:136:in `initialize!'
2012-08-28T05:57:27+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/railtie/configurable.rb:30:in `method_missing'
2012-08-28T05:57:27+00:00 app[web.1]:   from /app/config.ru:4:in `block in <main>'
2012-08-28T05:57:27+00:00 app[web.1]:   from /app/config/environment.rb:5:in `<top (required)>'
2012-08-28T05:57:27+00:00 app[web.1]:   from /app/config.ru:4:in `require'
2012-08-28T05:57:27+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
2012-08-28T05:57:27+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
2012-08-28T05:57:27+00:00 app[web.1]:   from /app/config.ru:1:in `new'
2012-08-28T05:57:27+00:00 app[web.1]:   from /app/config.ru:1:in `<main>'
2012-08-28T05:57:27+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:40:in `eval'
2012-08-28T05:57:27+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:40:in `parse_file'
2012-08-28T05:57:27+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/commands/server.rb:46:in `app'
2012-08-28T05:57:27+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:200:in `app'
2012-08-28T05:57:27+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:301:in `wrapped_app'
2012-08-28T05:57:27+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/commands/server.rb:70:in `start'
2012-08-28T05:57:27+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:252:in `start'
2012-08-28T05:57:27+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/commands.rb:55:in `block in <top (required)>'
2012-08-28T05:57:27+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/commands.rb:50:in `tap'
2012-08-28T05:57:27+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/commands.rb:50:in `<top (required)>'
2012-08-28T05:57:27+00:00 app[web.1]:   from script/rails:6:in `<main>'
2012-08-28T05:57:27+00:00 app[web.1]:   from script/rails:6:in `require'
2012-08-28T05:57:28+00:00 heroku[web.1]: Process exited with status 1
2012-08-28T05:57:28+00:00 heroku[web.1]: State changed from starting to crashed
2012-08-28T05:57:38+00:00 heroku[router]: Error H10 (App crashed) -> GET floating-sierra-9248.herokuapp.com/ dyno= queue= wait= service= status=503 bytes=
  2012-08-28T05:57:38+00:00 heroku[router]: Error H10 (App crashed) -> GET floating-sierra-   9248.herokuapp.com/favicon.ico dyno= queue= wait= service= status=503 bytes= 
```

我必须删除部分日志才能使其格式正确且可读，这是一个弃用警告

```
2012-08-28T05:57:24+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5) 
```

（从 /app/config/environment.rb:5 调用）

环境.rb

```
# Load the rails application
require File.expand_path('../application', __FILE__)

# Initialize the rails application
Blog::Application.initialize! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T15:47:43.630

我相信问题出在日志的这一行：

```
2012-08-28T05:57:27+00:00 app[web.1]: /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.3/lib/active_record/dynamic_matchers.rb:50:in `method_missing': undefined method `has_attached_file' for #<Class:0x00000003d3b3e8> (NoMethodError) 
```

也许您用来操作上传和文件的 gem 没有安装。请记住，如果不将文件上传到另一台服务器，您将无法使用此 gem。

# jquery - jquery 定时器函数

> ID：12153821
> 
> 赞同：0
> 
> 时间：2012-08-28T06:27:25.393
> 
> 标签：jquery

我正在研究 jQuery 函数，我有一个在触发 mouseover 事件时工作的函数，但我的要求是它不应该在鼠标悬停时调用，它应该每 5 秒调用一次，但我无法实现这一点。如何解决这个问题？

我已经添加了片段供您参考..

```
f.children(a.childSelector).each(function(h) {
        jQuery(this).mouseover(function(i) {
                var j = (a.reflect === true) ? 360 - (g * h) : g * h;
            j = jQuery.roundabout_toFloat(j);
            if (!jQuery.roundabout_isInFocus(f, j)) {
                i.preventDefault();
                if (f.data("roundabout").animating === 0) {
                    f.roundabout_animateAngleToFocus(j)
                }
                return false
            }
        })  
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T21:09:33.467

看看 jQuery-Timers： http: [//archive.plugins.jquery.com/project/timers](http://archive.plugins.jquery.com/project/timers)

```
$(document).everyTime(1000, "tag", function(i) { // every 1000ms
   // do something
}, 200); // 200 times 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T06:33:34.397

```
var repeatFunction = setInterval(function(){
    //do something here
}, 5000); //repeats after interval of 5 second (atleast) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T06:34:06.720

> it should call every 5 seconds

Use `setInterval(..)` or for more flexibility imitate the functionality using `setTimeout(..)`.

Something like:

```
f.children(a.childSelector).each(function(h) {
        setInterval(function() {
            var j = (a.reflect === true) ? 360 - (g * h) : g * h;
            j = jQuery.roundabout_toFloat(j);
            if (!jQuery.roundabout_isInFocus(f, j)) {
                if (f.data("roundabout").animating === 0) {
                    f.roundabout_animateAngleToFocus(j)
                }
            }
        },5000);  
    }) 
```

# java - java可以处理MS SQL Server RAISEERROR命令引起的异常吗？

> ID：12153823
> 
> 赞同：2
> 
> 时间：2012-08-28T06:27:27.310
> 
> 标签：java, sql-server-2008, exception-handling, raiserror

不幸的是，我被推到了一种情况，这使我使用 java 在 MS SQL Server 中执行一些存储过程。发生异常时，我在 SP 中使用 RAISEERROR 命令。问题是 java 似乎无法捕获这些异常。我的示例 SP：

```
ALTER PROCEDURE [dbo].[sp_test] 
    @fname nchar(30),
    @lname nchar(30)
AS
BEGIN

    BEGIN TRY
        IF (@fname) = 'something'
        BEGIN
            RAISERROR (N'First name is not valid!',16,1, N'number', 5);
            RETURN
        END
        Insert into [users] (
            [id]
          ,[fname]
          ,[lname]
          )
       Values
        (
            '1',
            @fname,
            @lname
        )
    END TRY
    BEGIN CATCH

    END CATCH   
END 
```

我的Java代码：

```
try {
                // Establish the connection.
                Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
                    con = DriverManager.getConnection(connectionUrl);
                    //------- Call a sp
                    String SPsql="EXEC sp_test ?,?"; //String SPsql="EXEC <sp_test> ?,?";
                    PreparedStatement ps=con.prepareStatement(SPsql);
                    ps.setEscapeProcessing(true);
                    ps.setQueryTimeout(20);
                    ps.setString(1, "something");
                    ps.setString(2, "12346");
                    //ps.setString(parameterIndex, x)
                   ps.execute();

                    }
            }
        catch (SQLException e) {
            e.printStackTrace();
        }catch (Exception e) {
            e.printStackTrace();
        } 
```

SP 正常执行，但 java 中没有发现异常！

那么，java可以处理这些异常吗？我在这里做错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T06:39:20.273

`RAISERROR ..`由于`nchar`（固定长度字符串） ，语句未执行。将其更改为`nvarchar`.

```
ALTER PROCEDURE [dbo].[sp_test] 
    @fname nvarchar(30),
    @lname nvarchar(30)
AS 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T06:48:45.717

对不起，我的坏人，我忘了在 SP 中填写 catch 部分，所以把 RAISEERROR 放在那里解决了我的问题：

```
.
.
.
    BEGIN CATCH
        RAISERROR (N'ERROR OCCURED!!! %s %d.', 16, 1, N'number', 5); 
    END CATCH 
```

# c# - 枚举类调用

> ID：12153824
> 
> 赞同：0
> 
> 时间：2012-08-28T06:27:40.800
> 
> 标签：c#, enums

我在数据访问层中创建了 LeaveReason 的枚举类，具有病假、计划休假或其他原因的值现在我想将此枚举类调用到我的自定义类型层但如何调用它？？？请帮忙，因为我是 C# 的新手...

这是我的代码看起来像.....

**在数据访问层：**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Sherserve.DataAccessLayer
{

    public enum LeaveReason
    {
        Sick,
        Planned,
        Other

    }

} 
```

**在数据自定义类型层：**

现在我想访问我在自定义类型层的数据访问层中创建的枚举类。您可以看到我添加了数据访问层的引用，但它显示错误..

请纠正这个并告诉我如何在自定义类型层中调用枚举类。

```
using System;
using System.Collections.Generic;

using System.Text;
using Sherserve.DataAccessLayer;

namespace Sherserve.CustomTypeLayer
{
    public class EmployeeLeave
    {
        public LeaveReason LeaveType { get; set; }
        public int EmployeeId { get; set; }
        public DateTime DateFrom { get; set; }
        public DateTime DateTo { get; set; }
        public string Reason { get; set; }
    }
} 
```

我的问题是我无法从数据访问调用枚举类到自定义类型，也无法将数据访问类的引用添加到自定义类型...请正确指导我..

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T06:33:32.447

You need to add a reference to the `Sherserve.DataAccessLayer` in the `Sherserve.CustomTypeLayer`. Typically the `Sherserve.CustomTypeLayer` would be a class library project that its output is a .dll file that you add to the other dataaccess layer from references -> add reference.

# java - 等待回调而不暂停调用线程。我这样做对吗？

> ID：12153828
> 
> 赞同：0
> 
> 时间：2012-08-28T06:27:46.857
> 
> 标签：java, java.util.concurrent

```
 public class Threadz implements Callable<String>{
    private boolean flag = false;

    @Override
    public String call() throws Exception {
        // TODO Auto-generated method stub
        for(int i = 0; i < 3; i++){
            Thread.sleep(2000);
        }
        flag = true;
        return "Done";
    }

    public boolean isDone(){
        return flag;
    }
}

    public class MyMain {
    public static void main(String[] args) {
        ExecutorService exe = Executors.newSingleThreadExecutor();
        Threadz threadz = new Threadz();
        Callable<String> cthread = threadz;
        Future<String> fut = exe.submit(cthread);

        while(true){
            try {
                if(!threadz.isDone())
                    System.out.println("Do something while waiting...");
                else{
                    System.out.println(fut.get());
                    System.out.print("Do something with the result...");
                    break;
                }
                Thread.sleep(1000);
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }
} 
```

我使用上述代码的目标是生成一个将返回结果的线程，但在等待结果时不应暂停调用线程。这实际上有效，但我这样做正确吗？有没有正确的方法来做到这一点？而且，在返回结果后，可调用线程是否会自动死亡（释放资源和内存）？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T06:38:19.930

```
String callbackReturn = threadz.get(); 
```

如果需要，它会等待计算完成，然后检索其结果。

```
 ExecutorService exe = Executors.newSingleThreadExecutor();
        Threadz threadz = new Threadz();
        Callable<String> cthread = threadz;
        Future<String> fut = exe.submit(cthread);
        String callbackReturn = threadz.get(); 
```

当前线程将在此处等待。如果您不想暂停它，则处理它会导致其他线程。

# php - Cron 作业不运行

> ID：12153830
> 
> 赞同：0
> 
> 时间：2012-08-28T06:27:57.513
> 
> 标签：php, ubuntu, cron, crontab

我正在运行 ubuntu 服务器，并且我尝试每小时运行一个脚本。我尝试的是：

```
sudo crontab -e 
```

然后我将其添加到文件的末尾：

```
MAILTO="info@email.com"
30 * * * * /usr/bin/php /var/www/scripts/cronscript.php 
```

该脚本似乎没有运行，并且我没有收到电子邮件。
我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T06:31:22.630

使用`-f`php 的标志告诉它将该文件作为输入：

```
MAILTO="info@email.com"
30 * * * * /usr/bin/php -f /var/www/scripts/cronscript.php 
```

也就是说，当然，如果您的 php*实际上*位于`/usr/bin`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T03:18:19.300

使用：

```
30 * * * * /usr/bin/wget "http://example.com/scripts/cronscript.php" 
```

为我工作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-21T15:31:23.300

您还可以使用 cURL，如下所示：

```
curl http://foobar.com/scripts/cronscript.php 
```

如果您需要它静默运行：

```
curl --silent http://foobar.com/scripts/cronscript.php 
```

添加 Gzip 处理：

```
curl --compressed http://foobar.com/scripts/cronscript.php 
```

我通常同时使用两者，例如： curl --silent --compressed [http://foobar.com/scripts/cronscript.php](http://foobar.com/scripts/cronscript.php)

# jquery - Jquery - 按 ID 的 SerializeArray()

> ID：12153831
> 
> 赞同：2
> 
> 时间：2012-08-28T06:27:57.827
> 
> 标签：jquery, json, serializearray

我有这个问题，我使用serializearray() jquery将Form的所有字段序列化为Json。如果在输入中输入名称属性，它可以正常工作，但如果我只想输入 ID 属性，它不起作用。

名称的好功能[名称类似：'#myformnameid']：

```
function formToJson(nameForm)
{
 var jsonForm={};
 var queryFrom = $(nameForm).serializeArray();

 for (i in queryFrom) {
   jsonForm[queryFrom[i].name] = queryFrom[i].value;
  }
 return jsonForm;
} 
```

我尝试了使用 attr 的 ID 解决方案。

```
function formToJson(nameForm)
{
 var jsonForm={};
 var queryFrom = $(nameForm).serializeArray();

 for (i in queryFrom) {
   jsonForm[queryFrom[i].attr("id")] = queryFrom[i].value;
  }
 return jsonForm;
} 
```

任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T14:34:21.817

所做的是`serializeArray`采用表单输入对象并将它们转换为 javascript 对象数组。从[文档](http://api.jquery.com/serializeArray/)中，表单类似于

```
[
  {
    name: "a",
    value: "1"
  },
  {
    name: "b",
    value: "2"
  },
  {
    name: "c",
    value: "3"
  }    
] 
```

您可以按名称或值遍历此数组，就像您正在做的那样，它将返回正确的数据。

您遇到的问题是您不再迭代实际元素，只是来自这些元素的数据。如果您想遍历元素，您需要执行以下操作：

```
function formToJson(nameForm)
{
 var jsonForm={};
 $("input", $(nameForm)).each(function(index){
   jsonForm[$(this).attr("id")] = this.value;
 })
 return jsonForm;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-04-23T18:48:16.687

这是一个旧帖子，但我想我会添加我的想法。从下面的链接复制源代码，您将能够将您想要的任何元素属性添加到返回的数组中。这样你的实现就是 jQuery 的。是的，如果更新了 jQuery 源，您将需要手动更新代码，但这与其他解决方案相同。

[https://searchcode.com/codesearch/view/25323764/](https://searchcode.com/codesearch/view/25323764/)

```
var
  rbracket = /\[\]$/,
  rCRLF = /\r?\n/g,
  rsubmitterTypes = /^(?:submit|button|image|reset|file)$/i,
  rsubmittable = /^(?:input|select|textarea|keygen)/i,
  rcheckableType = /^(?:checkbox|radio)$/i;

$.fn.extend({
  customSerializeArray: function() {
    return this.map(function() {

      // Can add propHook for 'elements' to filter or add form elements
      var elements = $.prop(this, 'elements');
      return elements ? $.makeArray(elements) : this;
    })
    .filter(function() {
      var type = this.type;

      // Use .is(':disabled') so that fieldset[disabled] works
      return this.name && !$(this).is(':disabled') &&
        rsubmittable.test(this.nodeName) && !rsubmitterTypes.test(type) &&
        (this.checked || !rcheckableType.test(type));
    })
    .map(function(i, elem) {
      var val = $(this).val();

      if (val == null) {
        return null;
      }

      if ($.isArray(val)) {
        return $.map(val, function(val) {
          return { name: elem.name, value: val.replace(rCRLF, '\r\n') };
        });
      }

      return { name: elem.name, value: val.replace(rCRLF, '\r\n') };
    }).get();
  }
}); 
```

# javascript - 基于自上而下的 RPG 式网格滚动的最佳技术？

> ID：12153832
> 
> 赞同：3
> 
> 时间：2012-08-28T06:27:58.083
> 
> 标签：javascript, jquery, html, canvas

基于浏览器的应用程序，目前在 php/js/html5 上运行，jquery 是我使用的唯一框架。

如果我有足够的 64x64 图像来填充我的屏幕大约 100 倍，你会推荐什么技术来移动图像以使其看起来像滚动？

如果你愿意的话，想想老式的自上而下的 RPG。

我目前正在考虑的：

*   HTML5 画布
*   array1 包含所有图像，数组键是每个图像的坐标
*   array2 仅包含*当前屏幕上的图像*
*   向左移动时：
    *   将所有图像向右移动 64 像素（使其以增量方式移动）
    *   从 array1 中获取缺少的图像，剥离掉屏幕上的图像
    *   从画布上删除掉出屏幕的图像

这不是一个真正的游戏，但这**就是**我想要达到的效果。

我会为此提供任何提示/提示；从“使用 html 表格而不是 Canvas”到“无法为网络简化这一点”。

我主要关心的是：速度。我也希望能够缩小到在屏幕上使用更多图像（32x32，甚至可能是 16x16）的程度，但我知道基于浏览器的应用程序可能无法启动到那个任务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T06:56:24.300

我建议使用[MelonJS 框架](http://www.melonjs.org/)为您处理这个问题。它可以使用[Tiled Map Editor](http://www.mapeditor.org/)中的地图，这简直太棒了。

# exception-handling - Biztalk exception-自我修复orchestartion

> ID：12153837
> 
> 赞同：2
> 
> 时间：2012-08-28T06:28:21.640
> 
> 标签：exception-handling, biztalk, biztalk2006r2, self-healing

我们的主编排有多个子编排。所有根编排都是事务类型：无，因此所有子编排也具有相同的性质。现在，任何异常都会在主编排的父范围内被捕获，并且我们有一些步骤，例如日志记录。使用来自 App SQL 的消息激活编排。所以每次发生异常时，比如说由于间歇性的事情，比如无法连接到 Web 服务。我们以后去手动重新触发。

我正在考虑将 orch 修改为自我修复，例如从异常捕获块中它根据说明问题的条件重新初始化消息，问题是间歇性的。像 app issue-null reference 这样的东西，我们不想重新发送消息，因为 orch 永远不会工作。

有一个称为补偿的概念，但这是基于事务的 orch-n 步骤，如果任何 1 失败，则执行 m 其他步骤（这将执行替代操作或清理）。

我唯一的想法是根据异常中的关键字进行查找并决定重新发送消息。但我希望 some1 挑战这一点或提出更好的方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T09:02:41.097

我一直认为最好离线处理故障。因此，如果编排失败，请终止它。但在您终止之前，请发送一条消息。如果事实证明存在导致失败的临时问题，此消息将包含恢复消息处理所需的所有信息。消息可以由负责恢复的“看守”进程使用。

这类似于 Erlang OTP 框架实现高可用性的方式。流程快速失败，看守流程确保恢复发生。

# objective-c - 自定义 uitabbaritem

> ID：12153838
> 
> 赞同：0
> 
> 时间：2012-08-28T06:28:24.853
> 
> 标签：objective-c, ios, uitabbaritem

您好，我一直在尝试自定义 UItabBarItem，我发现一些代码可以自定义 UItabbaritem，但它们不只是在为我工作。当我使用这两个代码中的任何一个时，什么都没有发生。任何帮助将不胜感激。提前谢谢

```
[yourTabBarItem setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys:
[UIColor whiteColor], UITextAttributeTextColor, 
[NSValue valueWithUIOffset:UIOffsetMake(0,0)], UITextAttributeTextShadowOffset, 
[UIFont fontWithName:@"Helvetica" size:18.0], UITextAttributeFont, nil]
forState:UIControlStateNormal]; 
```

我也试过这个，但这个也不起作用。

```
 [[UITabBarItem appearance] setTitleTextAttributes:
         [NSDictionary dictionaryWithObjectsAndKeys:
          [UIColor blackColor], UITextAttributeTextColor, 
          [UIColor whiteColor], UITextAttributeTextShadowColor, 
          [NSValue valueWithUIOffset:UIOffsetMake(0, 1)], UITextAttributeTextShadowOffset, 
          [UIFont fontWithName:@"Rok" size:0.0], UITextAttributeFont, 
          nil] 
                                              forState:UIControlStateNormal]; 
```

这是我的代码

视图控制器.h

```
//  ViewController.h

#import <UIKit/UIKit.h>

@interface ViewController : UIViewController

{
    UIImage *img;
    UITabBarItem *tabBarItem;

}

@end 
```

我的 ViewController.m

```
//  ViewController.m

#import "ViewController.h"

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    [self.view setBackgroundColor:[UIColor purpleColor]];
    img=[UIImage imageNamed:@"image2.jpg"];
    //[[UITabBarItem appearance] setTintColor:[UIColor yellowColor]];
   // [tabBarItem setTitleTextAttributes:<#(NSDictionary *)#> forState:<#(UIControlState)#>
 //   tabBarItem=[[UITabBarItem alloc]initWithTitle:@"View1" image:img tag:0];

    [[UITabBarItem appearance] setTitleTextAttributes:
     [NSDictionary dictionaryWithObjectsAndKeys:
      [UIColor blackColor], UITextAttributeTextColor, 
      [UIColor whiteColor], UITextAttributeTextShadowColor, 
      [NSValue valueWithUIOffset:UIOffsetMake(0, 1)], UITextAttributeTextShadowOffset, 
      [UIFont fontWithName:@"Rok" size:0.0], UITextAttributeFont, 
      nil] 
                                             forState:UIControlStateNormal];
    self.tabBarItem=tabBarItem;
}

@end 
```

还有我的 AppDelegate.h

```
//  AppDelegate.h

#import <UIKit/UIKit.h>
#import "ViewController.h"
#import "ViewController1.h"
#import "ViewController2.h"

@interface AppDelegate : UIResponder <UIApplicationDelegate>

{
    UITabBarController *tabBarController;
}
@property (strong, nonatomic) UIWindow *window;
@property (strong, nonatomic) ViewController *vc;
@property (strong, nonatomic) ViewController1 *vc1;
@property (strong, nonatomic) ViewController2 *vc2;

@end 
```

AppDelegate.m

```
//  AppDelegate.m

#import "AppDelegate.h"

@implementation AppDelegate

@synthesize window = _window,vc,vc1,vc2;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    tabBarController=[[UITabBarController  alloc]init];
    vc=[[ViewController alloc]init];
    vc1=[[ViewController1 alloc]init];
    vc2=[[ViewController2 alloc]init];
//    CGRect frame = CGRectMake(0.0, 0.0, 32, 48);
//    UIView *v=[[UIView alloc]initWithFrame:frame];
//    v.backgroundColor=[UIColor redColor];
   // tabBarController.view.backgroundColor=[UIColor redColor];
 //   [tabBarController adds
    NSArray *controllersArray=[[NSArray alloc]initWithObjects:vc,vc1,vc2, nil];
    // Override point for customization after application launch.
    tabBarController.viewControllers=controllersArray;
    tabBarController.selectedViewController=vc;
    [self.window setRootViewController:tabBarController];
    self.window.backgroundColor = [UIColor whiteColor];
    [self.window makeKeyAndVisible];
    return YES;
}
@end 
```

我还有其他 ViewContoller 但现在我的重点是一个 viewController ，如果我可以自定义一个，那么我可以为其他人做同样的事情，以节省空间和时间。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T06:50:09.953

可以使用[教程完成 UI 元素定制](http://www.raywenderlich.com/4344/user-interface-customization-in-ios-5)

# javascript - 在 IE7 中防止默认输入按键

> ID：12153844
> 
> 赞同：1
> 
> 时间：2012-08-28T06:28:53.030
> 
> 标签：javascript, jquery

我正在解决 IE7 中默认提交按钮的问题。当我在输入字段中按“输入”键时，会单击页面上的某个按钮。所以我找到了解决方案：

```
 $(document).bind("keypress", function(ev) {
     ev.keyCode == 13 && ev.preventDefault();  
 }); 
```

但是这段代码存在问题：textarea 标签没有得到“新行”。所以我尝试了这个：

```
 $(document).bind("keypress", function(ev) {
     if (ev.keyCode == 13 && ev.target.type != "textarea")
         ev.preventDefault();  
 }); 
```

它有效，但看起来很脏。问题是：您能否为该问题提出更好的解决方案？

先感谢您。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T06:46:49.730

如果只是为了防止在输入键上提交表单，请在表单尝试提交时在按键上进行测试...

```
$(your_form).submit(function(ev){
    if (ev.keyCode == 13){
        // Prevent form submission behaviors if the event was fired by enter keypress
        ev.preventDefault();return false;
    }
    // And code for form submission here, or just keep the return true to make it behave normally.
    return true;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T06:31:06.023

这并不脏。但是如果你想要一条线，你仍然可以这样做：

```
ev.keyCode == 13 && ev.target.type != "textarea" && ev.preventDefault(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T06:48:59.313

更优雅的解决方案是使用[jQuery 的提交处理程序](http://api.jquery.com/submit/)并返回 false：

```
$('#myForm').submit(function(ev){
  // custom form handling code here

  return false;// prevent browser default form submission
}); 
```

或者，您也可以调用`.preventDefault()`传递给提交处理程序的事件对象。

# zk - 覆盖 ZK 中的“处理”

> ID：12153847
> 
> 赞同：2
> 
> 时间：2012-08-28T06:29:03.427
> 
> 标签：zk, zul

```
<?page id="p" title="Data Profiling Home" contentType="text/html;charset=UTF-8"?>
    <zk>
        <button label="Procesing" onClick="Clients.showBusy(null)"></button>    
    </zk> 
```

OnClick 按钮我看到了这个：

![在此处输入图像描述](../Images/6b0c458f6dd425e345b702da11bf4c4e.png)

我想覆盖处理小部件，以便实现这一点。![在此处输入图像描述](../Images/4e264e73652997d18a727d28dc85e8c0.png)

我在 ZK 文档中进行了搜索，但没有找到任何帮助，有没有人之前尝试过这个或任何提示、链接或参考，这可以在 ZK 中实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T01:38:34.770

请试试

```
<zk>
    <button label="busy">
        <attribute name="onClick">
            busyWin.doModal();
            Div div = busyWin.getFellow("div");
            Clients.showBusy(div, null);
        </attribute>
    </button>
    <window id="busyWin" visible="false" position="center"
        border="normal" title="busy..." xmlns:w="client">
        <attribute w:name="bind_">
            function (desktop, skipper, after) {
                this.$bind_(desktop, skipper, after);
                if (this._drag)
                    this._drag.opts.ignoredrag = true; // prevent dragging
            }
        </attribute>
        <hbox>
            <div id="div" height="30px" width="30px" style="color: transparent;">a</div>
            <button label="abort">
                <attribute name="onClick">
                    Clients.clearBusy(div);
                    busyWin.setMode("embedded");
                    busyWin.setVisible(false);
                </attribute>
            </button>
        </hbox>
    </window> 
</zk> 
```

编辑：新样本

```
 <zk>
    <script type="text/javascript"><![CDATA[
        function showBusy () {
            // show busy mask
            zAu.cmd0.showBusy('Loading...');
            // move abort button under busy message
            jq('.z-loading')[0].appendChild(jq('$abortButton')[0]);
        }
        function clearBusy () {
            // move abort button back under abort div
            jq('$abortDiv')[0].appendChild(jq('$abortButton')[0]);
            // clear busy mask
            zAu.cmd0.clearBusy(null);
        }
    ]]></script>
    <zscript><![CDATA[
        class AbortableRunnable implements Runnable {
            boolean aborted = false;
            int i = 0;
            public void run () {
                while (true) {
                    // do somoething
                    i++;
                    try {
                        Thread.sleep(1000);
                    } catch (Exception e) {
                        System.out.println(e);
                    }
                    // finish
                    if (i == 5 || aborted)
                        break;
                }
            }
            public void abort () {
                aborted = true;
            }
            public int getI () {
                return i;
            }
        }
        AbortableRunnable ar = new AbortableRunnable();

        void start () {
            // start
            System.out.println("started");
            new Thread(ar).start();
        }
        void abort () {
            // abort
            System.out.println("aborted");
            ar.abort();
            // reset
            ar = new AbortableRunnable();
        }
        void finish () {
            // finish
            System.out.println("finished");
            // reset
            ar = new AbortableRunnable();
        }
    ]]></zscript>
    <!-- abort div to keep the abort button,
        display outside the screen -->
    <div id="abortDiv" style="position: absolute; left: -1000px; top: -1000px">
        <button id="abortButton" label="abort">
            <attribute name="onClick">
                // abort the running process
                abort();
                // stop the checking timer
                checkTimer.stop();
                // move self element back to abort div
                // and clear the busy mask
                Clients.evalJavaScript("clearBusy();");
            </attribute>
        </button>
    </div>
    <button label="do something long">
        <attribute name="onClick">
            // start to run the process
            start();
            // start the checking timer
            checkTimer.start();
            // show busy mask and move
            // the element of abort button under busy message
            Clients.evalJavaScript("showBusy();");
        </attribute>
    </button>
    <timer id="checkTimer" running="false" repeats="true" delay="1000">
        <attribute name="onTimer">
            // check whether it is finished
            // similar to the abort part
            if (ar.getI() == 5) {
                finish();
                self.stop();
                Clients.evalJavaScript("clearBusy();");
            }
        </attribute>
    </timer>
</zk> 
```

问候，

本

# java - 无法读取带有地址的电子名片

> ID：12153852
> 
> 赞同：0
> 
> 时间：2012-08-28T06:29:35.400
> 
> 标签：java, mobile, netbeans, io, libraries

请看下面的代码

```
package vcardtest;

import java.io.*;
import java.util.Iterator;
import java.util.logging.Level;
import java.util.logging.Logger;
import net.sourceforge.cardme.engine.VCardEngine;
import net.sourceforge.cardme.vcard.VCard;
import net.sourceforge.cardme.vcard.features.*;
import net.sourceforge.cardme.vcard.types.parameters.TelephoneParameterType;
import net.sourceforge.cardme.vcard.types.parameters.XTelephoneParameterType;

public class VCardTest 
{

    public static void main(String[] args) 
    {
        File vcardFile = new File("C:/Users/yohan/Contacts/Akon Kon.vcf");
        VCardEngine vcardEngine = new VCardEngine();
        try 
        {
            VCard vcard = vcardEngine.parse(vcardFile);
            String name = vcard.getName().getGivenName();

            if(vcard.hasEmails())
            {
                 EmailFeature email = vcard.getEmails().next();
                String sEmail = email.getEmail();
                   System.out.println(sEmail);
            }

            if(vcard.hasNicknames())
            {
            NicknameFeature nickName = vcard.getNicknames();
            Iterator<String> nicknames = nickName.getNicknames();
            String sNickName = nicknames.next();  
             System.out.println(sNickName);
            }

           // if(vcard.hasAddresses())
            //{
            //Iterator<AddressFeature> addresses = vcard.getAddresses();
            //AddressFeature address = addresses.next();
            //String streetAddress = address.getStreetAddress();
            //System.out.println(streetAddress);
            //}
            String telephone = "";

            //Getting the phone numbers

            Iterator<TelephoneFeature> itNumbers = vcard.getTelephoneNumbers();

            while (itNumbers.hasNext()) 
            {

                TelephoneFeature next1 = itNumbers.next();
                telephone = next1.getTelephone();

           //     System.out.println(telephone);
                System.out.println("types = " + next1.getExtendedTelephoneParameterSize());

                Iterator<XTelephoneParameterType> itTypes = next1.getExtendedTelephoneParameterTypes();

                Iterator<TelephoneParameterType> itNTypes = next1.getTelephoneParameterTypes();

                while (itNTypes .hasNext()) 
                {

                        TelephoneParameterType next = itNTypes .next();
                        System.out.println(" - " + next.getType() + " / " + next.getDescription());

                        if(next.getType().equals("CELL"))
                        {
                            System.out.println("Cell Phone Number: " + next1.getTelephone());
                        }
                        else if(next.getType().equals("HOME"))
                        {
                            System.out.println("Home Number is: " + next1.getTelephone());
                        }

                }

            }

            System.out.println("---------------------------------------------------------------------");
            System.out.println( name );

            //System.out.println(streetAddress);

        } catch (IOException ex) 
        {
           ex.printStackTrace();
        }
    }
} 
```

如果我传递带有地址的 VCard，则会生成以下错误

> 运行：线程“main”中的异常 java.lang.NoClassDefFoundError: org/apache/commons/codec/net/QuotedPrintableCodec at net.sourceforge.cardme.engine.VCardEngine.parseLabelType(VCardEngine.java:1432) at net.sourceforge.cardme .engine.VCardEngine.parseLine(VCardEngine.java:523) 在 net.sourceforge.cardme.engine.VCardEngine.parseVCard(VCardEngine.java:348) 在 net.sourceforge.cardme.engine.VCardEngine.parse(VCardEngine.java:254 ) 在 vcardtest.VCardTest.main(VCardTest.java:22) 引起：java.lang.ClassNotFoundException: org.apache.commons.codec.net.QuotedPrintableCodec at java.net.URLClassLoader$1.run(URLClassLoader.java:366)在 java.net.URLClassLoader$1.run(URLClassLoader.java:355) 在 java.security.AccessController.doPrivileged(Native Method) 在 java.net.URLClassLoader。findClass(URLClassLoader.java:354) at java.lang.ClassLoader.loadClass(ClassLoader.java:423) at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308) at java.lang.ClassLoader.loadClass(ClassLoader .java:356) ... 5 更多 Java 结果：1 构建成功（总时间：2 秒）

在我使用的测试 VCard（由我的手机生成）之后，发送到笔记本电脑并转换为 .contact，然后使用 windows 的联系人文件夹中的选项手动转换回 .vcf。

```
BEGIN:VCARD
VERSION:2.1
N:Kon;Akon
FN:Akon Kon
TEL;CELL;VOICE:0711111111
ADR;HOME:;;195;Colj;Sri lanka
LABEL;HOME;ENCODING=QUOTED-PRINTABLE:195=0D=0AColj, Sri lanka
EMAIL;PREF;INTERNET:akok@a.com
REV:20120828T061900Z
END:VCARD 
```

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T07:11:25.673

您似乎缺少[Apache Commons Codec 库](http://commons.apache.org/codec/)

您需要下载它及其依赖项并将它们添加到您的类路径

# java - 覆盖方法但参数为 arg0

> ID：12153856
> 
> 赞同：6
> 
> 时间：2012-08-28T06:29:54.610
> 
> 标签：java, android, eclipse

我使用eclipse自动覆盖一个方法：

```
@Override
public void draw(Canvas arg0, MapView arg1, boolean arg2) {
    // TODO Auto-generated method stub
    super.draw(arg0, arg1, arg2);
} 
```

你看，参数是arg0，arg1，arg2，很难阅读。我想如果我的eclipse有错误，因为我认为它应该给我：

```
draw(Canvas canvas, MapView mapview, boolean flag) 
```

所以我的问题是为什么我的日食给我 arg0 等等，如何解决？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T06:51:38.033

如果您通过“Android SDK Manager”安装“Android SDK 文档”，它将被修复。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T16:38:36.887

这完全取决于 Eclipse 是否在该项目**的构建路径上有可用的**第三方代码**源**。在您的情况下，它只有二进制类文件，并且只能为您提供类型，因为参数名称不再是二进制文件的一部分。

 **那就是，请

*   安装你的 Android 目标的源代码
*   让 Maven 下载您在 Maven 中使用的工件源
*   将源附加到您使用的第三方库
*   安装用作目标平台的 Eclipse 插件的 SDK 版本

在不同的环境中解决这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T06:32:38.120

没有任何错误。这是 Eclipse 命名变量的方式。但建议将它们更改为专有名称。

> *旁注*：要使用 Eclipse 重命名代码中的变量：`Right click on the variable => Refactor => Rename`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T06:34:08.170

它没有任何区别。但是以这样的方式编写代码始终是一个好习惯，以便它应该是自我解释的。

Imp 是“类型”，没有。在方法中传递参数，它们应该是正确的，我猜是。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-08-28T06:38:42.983

参数的名称是什么并不重要。只要确保您传递了正确的变量/参数值。**

# javascript - 如何在 javascript、phonegap (cordova) 中将 json 对象插入到 sqlite 表中

> ID：12153857
> 
> 赞同：5
> 
> 时间：2012-08-28T06:29:56.673
> 
> 标签：javascript, json, sqlite, cordova

我正在尝试在 javascript 中使用 sqlite 实现缓存。我有一个 json 对象，我试图将其转换为字符串并输入到数据库中，但不断收到语法错误。

该表由两个字段组成，一个 md5 字符串和一个 json 字符串，这是我定义数据库和表的方式

```
 db = window.openDatabase("Database", "1.0", "Cordova Demo",10485760);

    db.transaction(function(tx){
         tx.executeSql('DROP TABLE IF EXISTS CACHE_DATA');
         tx.executeSql('CREATE TABLE IF NOT EXISTS CACHE_DATA (md5 TEXT UNIQUE, data TEXT)');
    },function(tx,error){
        console.log('tx error: ' + error);
    },function(){
        console.log('tx success');
    }); 
```

这就是我尝试输入变量 d.data 是 json 对象的数据的方式。

```
 var jsonString = JSON.stringify(d.data, null, '');

            db.transaction(function(tx){
                tx.executeSql('INSERT OR REPLACE INTO CACHE_DATA (md5, data) VALUES ("'+hash+'", "'+jsonString+'")');
            },function(tx,error){
                console.log(JSON.stringify(tx.message));
                console.log(JSON.stringify(error));
            },function(){
                console.log('tx success');
            });

             console.log(jsonString); 
```

哪个会抛出错误

```
08-27 23:19:55.702: E/SQLiteLog(29831): (1) near "networks": syntax error 
```

我要输入的实际字符串如下所示

```
08-27 23:19:55.652: D/CordovaLog(29831): {"networks":[{"id":"66","name":"Test"}],"expires":1346138396} 
```

我在想它与 json 字符串中的引号有关，但字段类型只是文本，所以我不确定语法错误可能是什么。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T11:13:43.063

我发现JSON字符串在变成字符串后需要转义

```
 var jsonString = escape(JSON.stringify(d.data));

            db.transaction(function(tx){
                tx.executeSql('INSERT OR REPLACE INTO CACHE_DATA (md5, json, expires) VALUES ("'+hash+'", "'+jsonString+'","'+expireStamp+'")');
            },function(tx,error){
                console.log(JSON.stringify(tx.message));
                console.log(JSON.stringify(error));
            },function(){

                }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T07:55:44.203

您是否尝试过将它们作为数组传递：

```
var valuesInArray = [hash, JSON.stringify(d.data, null, "");

tx.executeSql("INSERT OR REPLACE INTO CACHE_DATA (md5, data) VALUES (?, ?)", valuesInArray, function(tx, result)  {
  // Success Callback
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-06T10:05:14.030

我们也可以尝试`encodeURI()`和`decodeURI()`。这是一个简单的例子：

var jsonString = encodeURI(JSON.stringify(d.data, null, ''));

```
 db.transaction(function(tx){
            tx.executeSql('INSERT OR REPLACE INTO CACHE_DATA (md5, data) VALUES ("'+hash+'", "'+jsonString+'")');
        },function(tx,error){
            console.log(JSON.stringify(tx.message));
            console.log(JSON.stringify(error));
        },function(){
            console.log('tx success');
        }); 
```

并用于解码

```
var data = JSON.parse(decodeURI(sqlData.data)); 
```

注意：**escape()**和**unescape()**可能有效。但`escape()`函数在 JavaScript 1.5 版中已被弃用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-22T19:35:18.933

@布莱恩

**第一个问题** - 是否可以将 json 对象转换为字符串并将该字符串存储到 sqlite 数据库中？

**第二个问题**

*   如果 json 包含多个图像的 url。然后在在线模式下，它将从网络上获取 url 图片。但是如果我们将这些 url 存储在 sqlite 数据库中，那么是否可以在 cordova 应用程序中以离线模式显示这些图像？

如果是，那么我们将如何存储这些图像

**科尔多瓦的初学者**

将在线应用程序转换为离线应用程序所需的帮助。 **离子角 2 应用程序**

# visual-studio-2010 - 是否可以将 Windows Phone 6 SDK 与 VS 2010 或 VS 2012 一起使用？

> ID：12153862
> 
> 赞同：2
> 
> 时间：2012-08-28T06:30:04.677
> 
> 标签：visual-studio-2010, visual-studio-2012, windows-phone

我需要将旧的 Windows Phone 6 应用程序从 Visual Studio 2008 转换为 Visual Studio 2010 或 Visual Studio 2012。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-11T12:46:33.793

不，您必须使用 Visual Studio 2008。您可以看到此网址（西班牙语） [http://msdn.microsoft.com/es-es/library/vstudio/sa69he4t (v=vs.100).aspx](http://msdn.microsoft.com/es-es/library/vstudio/sa69he4t(v=vs.100).aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T06:41:03.873

从论坛我了解到 Windows Phone 6 SDK 在 2010 及更高版本中不再支持

[windows mobile 6 标准 sdk 未检测到已安装的 Visual Studio 2010 beta](http://social.msdn.microsoft.com/Forums/pl-PL/vssetup/thread/f2a5feba-2424-4dc7-95c6-a411f24498cd)

[Visual Studio 2010 不支持 WM 6.x 应用程序开发](http://news.softpedia.com/news/Visual-Studio-2010-Lacks-Support-for-WM-6-x-App-Development-139781.shtml)

# c# - c# winforms 在表单加载时验证 XML 文件

> ID：12153864
> 
> 赞同：0
> 
> 时间：2012-08-28T06:30:12.317
> 
> 标签：c#, xml, winforms, file, validation

我如何验证表单加载上的 XML 文件？（XML 文件为空）

```
private void Form1_Load(object sender, EventArgs e)
{
    // --------------- Read XML File / Data: Settings_General
    String xmlfile = "Settings_General.xml";
    XmlDocument doc = new XmlDocument();

    doc.Load(xmlfile);

    XmlNode comboBox4Value = doc.SelectSingleNode("XMLFILE/Active");
    if (comboBox4Value != null)
    {
        comboBox4.SelectedIndex = Convert.ToInt32(comboBox4Value.InnerText);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T06:34:13.847

If xml is in invalid format then `doc.Load(xmlfile);` will throw exception.

# java - 是否可以通过命令提示符创建 Solr 索引？

> ID：12153865
> 
> 赞同：2
> 
> 时间：2012-08-28T06:30:13.823
> 
> 标签：java, apache, solr, indexing, solrj

我想知道如何通过命令提示符创建 Solr 索引...？

如果我的 apache_solr 是在远程机器上配置的，并且我无法在那里运行浏览器......那么如果我想创建索引，我该怎么做？

我有一个可以进行索引的 servlet，但我想知道是否可以通过命令提示符或有任何其他方式来做同样的事情......？谢谢...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T09:59:11.730

使用 curl 您可以直接从命令行发出命令，例如

```
curl http://localhost:8983/solr/db/dataimport?command=full-import 
```

如果你愿意，你可以把它包装成小的 bash 脚本并放在 /usr/local/bin 下。例如：

```
#!/bin/bash
curl http://localhost:8983/solr/db/dataimport?command=$1 
```

这样您就可以从命令行发出命令：

```
$ my-indexing-script.sh full-import 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T13:17:03.697

您可以考虑使用[Solr 4.0 Beta Release](http://lucene.apache.org/solr/solrnews.html#14-august-2012-apache-solr-40-beta-available)。由于 Solr 4.0 中的新管理控制台提供对大多数 API 功能的直接访问，以创建核心、加载数据、管理我们的索引等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T06:54:33.443

您不需要任何浏览器即可使用您的 Solr-Server。我建议将 http API 与您想要的任何编程语言或脚本一起使用。使用 shell 命令并不是很好（嗯……至少对我来说）。有很多库可以处理 http 请求，或者如果你真的想使用命令提示符，你可以通过[http://curl.haxx.se/](http://curl.haxx.se/)来完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-06T05:46:40.917

E:\SolrRestInteraction\solr-4.2.1\example\exampledocs>java -Durl=http://"ip 地址":8983/solr/update/extract -Dparams=literal.id=Technology -Dtype=text/html - jar post.jar Technology.html

在这里，我提供了 comad 提示解决方案，其中“literal.id”是要索引的 html 文件的唯一 id，最后您需要提供 html 文件名。上面的目录结构是关于我的 Windows 机器的，其中“solr-4.2.1”是下载的文件夹...您遇到的任何问题请告诉我.. Dis 将在启动 solr 实例后完成

# ios - 隐藏 AdMob 上的“完成”按钮

> ID：12153870
> 
> 赞同：-1
> 
> 时间：2012-08-28T06:30:34.063
> 
> 标签：ios, admob

我可以在 AdMob 中将“完成”按钮（如下所示）隐藏 3 到 4 秒吗？

![](../Images/d9901fbaa6abf9db477d5f7ce30aacc2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T16:50:16.973

不要认为这是一件容易做到的事情。AdMob SDK 不会让您直接处理该模式视图。

如果在显示模式视图后发送回调，您可以递归地遍历视图层次结构，查找带有“完成”标签的 UIButton 并将其隐藏。但是，在呈现完整模式视图后不会触发回调，只有之前调用过的回调。

# android - 在android中显示条之间的空格

> ID：12153871
> 
> 赞同：2
> 
> 时间：2012-08-28T06:30:36.470
> 
> 标签：android, bar-chart

如何在android中提及条形图的条之间的空间？

![在此处输入图像描述](../Images/baf697168c33e3972e537575654197ae.png) 提前致谢！..

上面的图片会让你清楚我的怀疑。即。

蓝色条实际上不适合对应的 x 轴值，这里是 (Ord_1,Ord_2,Ord_3,Ord_4)。

我需要显示这些带有 x 轴值的条形。如何做到这一点？

请在下面找到我的来源

**条形图.java**

```
public class BarChart extends Activity 
{
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    Intent intent = createIntent();
    startActivity(intent);
}

public Intent createIntent() 
{
    String[] titles = new String[] { "Profits per order", " " };

    List<double[]> values = new ArrayList<double[]>();

    values.add(new double[] { 6, 9, 21, 3 });
    values.add(new double[] { 0, 0, 0, 0});

    int[] colors = new int[] { Color.BLUE, Color.BLACK };

    XYMultipleSeriesRenderer renderer = buildBarRenderer(colors);
    renderer.setOrientation(Orientation.HORIZONTAL);

    setChartSettings(renderer, "Profit of the year 2012", " ", " ", 0,30, 0,30, Color.GRAY, Color.LTGRAY);

    renderer.setXLabels(1);
    renderer.setYLabels(10);

    renderer.addXTextLabel(2.75, "Ord_1");
    renderer.addXTextLabel(6.75, "Ord_2");
    renderer.addXTextLabel(10.75, "Ord_3");
    renderer.addXTextLabel(14.75,"Ord_4");

    renderer.setBarSpacing(-1.75);

    int length = renderer.getSeriesRendererCount();

    for (int i = 0; i < length; i++) 
    {
      SimpleSeriesRenderer seriesRenderer = renderer.getSeriesRendererAt(i);
      seriesRenderer.setDisplayChartValues(false);
    }

    return ChartFactory.getBarChartIntent(this, buildBarDataset(titles, values), renderer,
        Type.DEFAULT);
  }

protected XYMultipleSeriesRenderer buildBarRenderer(int[] colors) 
{

    // creates a SeriesRenderer and initializes it with useful default values as well as colors

    XYMultipleSeriesRenderer renderer = new XYMultipleSeriesRenderer();

    renderer.setAxisTitleTextSize(16);
    renderer.setChartTitleTextSize(20);
    renderer.setLabelsTextSize(15);
    renderer.setLegendTextSize(15);

    int length = colors.length;

    for (int i = 0; i < length; i++) 
    {
      SimpleSeriesRenderer r = new SimpleSeriesRenderer();
      r.setColor(colors[i]);
      renderer.addSeriesRenderer(r);
    }
    return renderer;
  }

protected void setChartSettings(XYMultipleSeriesRenderer renderer, String title, String xTitle,
          String yTitle, double xMin, double xMax, double yMin, double yMax, int axesColor,
          int labelsColor) 
{
// sets lots of default values for this renderer

    renderer.setChartTitle(title);
    renderer.setXTitle(xTitle);
    renderer.setYTitle(yTitle);
    renderer.setXAxisMin(xMin);
    renderer.setXAxisMax(xMax);
    renderer.setYAxisMin(yMin);
    renderer.setYAxisMax(yMax);
    renderer.setAxesColor(axesColor);
    renderer.setLabelsColor(labelsColor);

    renderer.setApplyBackgroundColor(true);
    renderer.setBackgroundColor(Color.BLACK);

}

protected XYMultipleSeriesDataset buildBarDataset(String[] titles, List<double[]> values) 
{

    // adds the axis titles and values into the dataset

    XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
    int length = titles.length;

    for (int i = 0; i < length; i++) 
    {
      CategorySeries series = new CategorySeries(titles[i]);
      double[] v = values.get(i);
      int seriesLength = v.length;

      for (int k = 0; k < seriesLength; k++) 
      {
        series.add(v[k]);
      }
      dataset.addSeries(series.toXYSeries());
     }
    return dataset;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T10:16:12.967

您正在调用`setChartSettings`一些参数，这些参数将 X 轴视觉范围设置在 0 到 30 之间，并且 Y 轴的视觉范围相同。您可以调整这些参数以获得更好的放松显示。

你`renderer.setBarSpacing()`用负值跟注。只需使用正数，从`0.5f`（这意味着间距等于钢筋厚度的一半）开始，然后根据您的需要进行调整。

# c# - 使用 ParseExact 的 C# 字符串到日期时间转换问题

> ID：12153887
> 
> 赞同：0
> 
> 时间：2012-08-28T06:32:25.907
> 
> 标签：c#, parsing, datetime

我正在从文本框中获取日期并通过函数将其传递给 dateTime，

**但它给了我两个不同的结果**

```
DateTime Fromdate1 = devTools.ParseDate(datepicker1.Text); 
```

文本框--->输出

02/09/2012 --> 2/9/2012 12:00:00 AM

2012 年 8 月 30 日 --> 2012 年 8 月 30 日上午 12:00:00

```
public DateTime ParseDate(string s)
    {
        DateTime result;
        if (!DateTime.TryParse(s, out result))
        {
            string[] formats = { "dd'/'MM'/'yyyy" };
            result = DateTime.ParseExact(s, formats, new CultureInfo("en-US"), DateTimeStyles.None);
            //result = DateTime.ParseExact(s, "dd'/'MM'/'yyyy", System.Globalization.CultureInfo.InvariantCulture);
            //result = result.AddDays(1);
        }
        return result;
    } 
```

这里有什么问题，是否有一种正确的方法来获得恒定的输出类型，它也会在 DB 中产生问题，因为 08/09 将与 09/08 进行检查，反之亦然！

**SQL 中的另一个问题：**

```
Select convert(nchar(10),FromDate, 103) AS FromDate,convert(nchar(10),ToDate, 103) AS ToDate FROM Tbl_PropertyRoomSeasonPrices 
```

输出 ：

28/08/2012 | 2012 年 9 月 1 日

dd/mm/yyyy | mm/dd/yyyy
（正确）（错误）

但是 fromDate 的 103 和 toDate 的 101 使它都相同，为什么会有变化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T06:36:55.953

在我看来，这里的“问题”就是你如何解释输出。你的方法返回一个`DateTime`- 不是一个字符串 - 所以当你写的时候。"02/09/2012 --> 2/9/2012 12:00:00 AM" 你大概的意思是字符串 "02/09/2012" 的输入会给你一个结果`DateTime`，它*恰好有一个字符串表示*为 "2 /9/2012 12:00:00 AM" 以任何方式将其转换为字符串，例如通过查看调试器。这将使用当前的文化和默认格式——但这不是`DateTime`价值本身的一部分。

查看 的属性，`DateTime`您会发现它已被正确解析。

> 它也会在数据库中产生问题，因为 08/09 将与 09/08 进行检查，反之亦然

不，不会的。如果您正确地做事 - 使用参数化 SQL 并指定`DateTime`属性的值，则不会。如果您将值直接包含在 SQL 中，这很可能会给您带来问题，但无论如何这都是个坏主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T06:37:29.290

尝试使用接受 IFormatProvider 的重载 Parse 方法；例如;

```
DateTime.TryParse(s, CultureInfo.InvariantCulture, DateTimeStyles.AssumeLocal, out result); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T06:38:11.820

```
DateTime.ParseExact(DateTime.Now, new string[]{ "dd/MM/yyyy" }, ...); 
```

# javascript - 使用 pop/push 创建表/行的问题

> ID：12153888
> 
> 赞同：1
> 
> 时间：2012-08-28T06:32:26.233
> 
> 标签：javascript, html

我正在尝试使用 javascript 在 HTML 中创建一个表格。它有一个添加新行的添加按钮和一个删除行的删除按钮。它看起来像这样：

![桌子](../Images/517942af7205cd61d4304198e3c74953.png)

数字是ID

```
 <table id = "table1" border = 2>
        <tr>
            <td> <img id="add" src="images/add_over.png" onclick=help() /> </td>
        </tr>
    </table> 
```

* * *

基本上我试图删除整个表并重新创建它少一行。

```
var array1 = new Array();

function help() {
    addRow();
    push();
}

function addRow() {
    var tableId= "table1";
    var number= array1.length;
    var newRow = document.getElementById(tableId).insertRow(number+ 1);

    var newData = document.createElement("td");
    var newDiv= document.createElement("div");
    newDiv.innerHTML = array1.length;
    newData.appendChild(newDiv);

    var newCellDeleteButton = document.createElement("td");
    var deleteButtonImg = document.createElement('img');
    deleteButtonImg.id = number;
    deleteButtonImg.border = '0';
    deleteButtonImg.src = "images/delete_up.png";
    deleteButtonImg.onmouseover = function() {
        this.src = 'images/delete_over.png';
    };
    deleteButtonImg.onmouseout = function() {
        this.src = 'images/delete_up.png';
    };
    deleteButtonImg.onclick = function() {
        deleteRow(number);
    };
    newCellDeleteButton.appendChild(deleteButtonImg);
    newRow.appendChild(newRow);
    newRow.appendChild(newCellDeleteButton);
}

function deleteRow(rowID) {
    var tempHelpRow = array1.length;
    pop(rowID);

    for (var i = 1; i <= tempHelpRow ; i++) {
        document.getElementById("table1").deleteRow(1);
    }

    for (var i = 0; i <= array1.length; i++) {
        addRow();
    }

}

function pop(ID) {

    array1.pop(ID);
}

function push() {

    var test = new objectt();
    array1.push(test);
}

function objectt() {

} 
```

问题是，如果我尝试删除一行，它会删除所有内容。

# android - angle attribute in android gradient

> ID：12153890
> 
> 赞同：77
> 
> 时间：2012-08-28T06:32:34.227
> 
> 标签：android, android-layout, gradient, android-shape

I am going through test example. Where for some Image background they are using gradient, the code goes like this

```
<?xml version="1.0" encoding="utf-8"?>

  <shape xmlns:android="http://schemas.android.com/apk/res/android">
    <gradient
        android:startColor="#ff0000"
        android:centerColor="#00ff00"
        android:endColor="#0000ff"
        android:angle="180"/>
    <corners android:radius="5dp" />
   </shape> 
```

In the above xml I didn't get `angle` attribute. but when I change the value of `angle` slightly the pattern slants. Can anyone explain me how exactly it works?

* * *

## 回答 #1

> 赞同：176
> 
> 时间：2012-08-28T08:35:48.627

梯度基本上表示任何数量的空间（方向）变化。用颜色表示颜色强度在以角度表示的方向上的变化。这里有一些图表来表示这个概念：
![在此处输入图像描述](../Images/5b15a10bf16f3bc3a48fd6d0ffdf51f8.png)

这里的图显示了水平方向的颜色变化（角度设置为 0）。
XML 代码：

```
 <shape xmlns:android="http://schemas.android.com/apk/res/android">
    <gradient
        android:startColor="#000000"
        android:angle="0"/>
   </shape> 
```

![在此处输入图像描述](../Images/18d1de169571559c0ea885ebf4548d47.png)

图中显示了垂直方向的颜色变化（角度设置为 90）。
XML 代码：

```
<shape xmlns:android="http://schemas.android.com/apk/res/android">
<gradient
    android:startColor="#000000"
    android:angle="90"/>
 </shape> 
```

您还可以使用不同的颜色作为开始、中心和结束颜色。您附加的代码包含所有这些元素。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-06-11T03:19:59.570

指定形状的渐变颜色。属性：

安卓：角度整数。渐变的角度，以度为单位。0 是从左到右，90 是从下到上。它必须是 45 的倍数。默认为 0。

似乎文档中的描述与卡恩的回答相矛盾？？

[您可以在文档](https://developer.android.com/guide/topics/resources/drawable-resource.html#Shape)中找到更多详细信息

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-07-06T18:30:09.393

您可能想从代码中创建对角渐变。这要容易得多，并且您可以从那里打开很多选项。这个片段帮助了我

```
public void SetGradient(View view) {
        GradientDrawable gd = new GradientDrawable(
                GradientDrawable.Orientation.TL_BR,
                new int[]{0xFF141a24, 0xFF293f49, 0xFF72554c});
        view.setBackground(gd);
    } 
```

GradientDrawable 类的可用方向

```
/*public enum Orientation {
        *//** draw the gradient from the top to the bottom *//*
        TOP_BOTTOM,
        *//** draw the gradient from the top-right to the bottom-left *//*
        TR_BL,
        *//** draw the gradient from the right to the left *//*
        RIGHT_LEFT,
        *//** draw the gradient from the bottom-right to the top-left *//*
        BR_TL,
        *//** draw the gradient from the bottom to the top *//*
        BOTTOM_TOP,
        *//** draw the gradient from the bottom-left to the top-right *//*
        BL_TR,
        *//** draw the gradient from the left to the right *//*
        LEFT_RIGHT,
        *//** draw the gradient from the top-left to the bottom-right *//*
        TL_BR,
    }*/ 
```

并且您从片段中的 onCreate 或 onCreateView 调用该方法并传递父视图（在我的情况下）。

```
 @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                             Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.dialog_view_parent, container);           
        ...

        SetGradient(view);

        return view;
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-05-24T07:44:57.310

更简单地说，给出相对于您希望它开始的点的角度值。

[![在此处输入图像描述](../Images/5d8a134e002b48c02ec43c0125404530.png)](https://i.stack.imgur.com/hOdmR.png)

它将根据**角度**值从 startColor 开始。

90 的示例：

[![在此处输入图像描述](../Images/8f1e1990961e05cec802e1bafaea3f85.png)](https://i.stack.imgur.com/upT8R.png)

270 的示例：

[![在此处输入图像描述](../Images/a9613ebf79b4750378ab5a551ee712cf.png)](https://i.stack.imgur.com/8p8o6.png)

# iphone - 如何从一个 UITextField 获取值到另一个 UITextField ？

> ID：12153899
> 
> 赞同：0
> 
> 时间：2012-08-28T06:33:09.557
> 
> 标签：iphone, objective-c, ios, xcode, uitextfield

我有 2 个 UITextFields。一个是 $，另一个是 Riel。当我输入 textfield$ 时，我想自动查看 textfieldRiel 中的值。怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T06:38:12.017

看一下[UITextFieldDelegate](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html)协议，遵守它并使您的控制器类成为第一个 ($) UITextField 的委托。然后例如在`textField:shouldChangeCharactersInRange:replacementString:`每当用户键入新字符时调用的方法中，根据您的要求填充另一个 UITextField ！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T06:39:08.153

首先在你的接口文件中声明。

然后实现 uitextfielddelegate 方法

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{

textfieldRiel.text=string;
return TRUE;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T06:43:02.933

只是简单地认为您需要实现 UiTextfields 的委托方法。

下面是当在一个文本字段中键入时的代码，该文本也会自动写入瑞尔文本字段。

```
 - (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
    {
           self.txtRiel.text=textField.text
           return YES;

    } 
```

另请参阅 Apple 文档中的此方法

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string;
- (void)textFieldDidBeginEditing:(UITextField *)textField;
- (void)textFieldDidEndEditing:(UITextField *)textField; 
```

另请参阅此处的 Apple[文档](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T06:43:15.173

实现 uitextfielddelegate 方法

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
   textFieldRiel.text = textField.text;
   return YES;
} 
```

# php - 如何根据当前数据和时间在php中生成唯一ID？

> ID：12153902
> 
> 赞同：5
> 
> 时间：2012-08-28T06:33:15.083
> 
> 标签：php, date, datetime, time, unique-key

我需要根据当前日期和时间在 php 中生成一个唯一 ID，以记录我何时运行代码。即每次我运行代码时，它都应该能够根据当前日期和时间生成一个唯一的 ID。

希望我对我的问题很清楚。怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T06:42:05.697

使用 time() 创建可排序的唯一 ID

连接字符串还将进一步随机化您想要的结果并仍然保持可排序。手册[在这里](http://php.net/manual/en/function.mt-rand.php)

```
$uniqueId= time().'-'.mt_rand(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T06:55:12.270

您可以像这样使用`uniqid()`和的组合：`time()`

```
$s = uniqid(time(), true); 
```

示例输出：

```
1346136883503c6b3330caf5.19553126 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T06:34:43.910

这是你要找的吗？ [uniqid()](http://php.net/manual/en/function.uniqid.php)

从文档：

根据当前时间（以微秒为单位）获取带前缀的唯一标识符。

# php - joomla k2 tag cloud random

> ID：12153903
> 
> 赞同：1
> 
> 时间：2012-08-28T06:33:22.527
> 
> 标签：php, sql, tag-cloud, joomla-k2

I am trying to use K2 Tool's tag cloud function on my joomla website but the only setting I can pick is by X Popular Tags which doesn't actually specific what makes the tag popular.

So I am trying to make it so that the tag cloud works as X Random instead. So everytime the page/module is reloaded, X say 20 would display 20 randomly chosen tags.

I look through the module's code and found the function in helper.php but I don't understand how the code select the tags. My guess is if I want to change it to use X random instead of X popular, I would need to change the query for $query?

```
function tagCloud(&$params) {

    $mainframe = &JFactory::getApplication();
    $user = &JFactory::getUser();
    $aid = (int) $user->get('aid');
    $db = &JFactory::getDBO();

    $jnow = &JFactory::getDate();
    $now = $jnow->toMySQL();
    $nullDate = $db->getNullDate();

    $query = "SELECT i.id FROM #__k2_items as i";
    $query .= " LEFT JOIN #__k2_categories c ON c.id = i.catid";
    $query .= " WHERE i.published=1 ";
    $query .= " AND ( i.publish_up = ".$db->Quote($nullDate)." OR i.publish_up <= ".$db->Quote($now)." ) ";
    $query .= " AND ( i.publish_down = ".$db->Quote($nullDate)." OR i.publish_down >= ".$db->Quote($now)." )";
    $query .= " AND i.trash=0 ";
    if(K2_JVERSION=='16'){
        $query .= " AND i.access IN(".implode(',', $user->authorisedLevels()).") ";
    }
    else {
        $query .= " AND i.access <= {$aid} ";
    }
    $query .= " AND c.published=1 ";
    $query .= " AND c.trash=0 ";
    if(K2_JVERSION=='16'){
        $query .= " AND c.access IN(".implode(',', $user->authorisedLevels()).") ";
    }
    else {
        $query .= " AND c.access <= {$aid} ";
    }

    $cloudCategory = $params->get('cloud_category');
    if(is_array($cloudCategory)) {
        $cloudCategory = array_filter($cloudCategory);
    }
    if ($cloudCategory) {
        if(!is_array($cloudCategory)){
            $cloudCategory = (array)$cloudCategory;
        }
        foreach($cloudCategory as $cloudCategoryID){
            $categories[] = $cloudCategoryID;
            if($params->get('cloud_category_recursive')){
                $children = modK2ToolsHelper::getCategoryChildren($cloudCategoryID);
                $categories = @array_merge($categories, $children);
            }
        }
        $categories = @array_unique($categories);
        JArrayHelper::toInteger($categories);
        if(count($categories)==1){
            $query .= " AND i.catid={$categories[0]}";
        }
        else {
            $query .= " AND i.catid IN(".implode(',', $categories).")";
        }
    }

    if(K2_JVERSION == '16') {
        if($mainframe->getLanguageFilter()) {
            $languageTag = JFactory::getLanguage()->getTag();
            $query .= " AND c.language IN (".$db->Quote($languageTag).", ".$db->Quote('*').") AND i.language IN (".$db->Quote($languageTag).", ".$db->Quote('*').") ";
        }
    }

    $db->setQuery($query);
    $IDs = $db->loadResultArray();

    $query = "SELECT tag.name, tag.id
    FROM #__k2_tags as tag
    LEFT JOIN #__k2_tags_xref AS xref ON xref.tagID = tag.id 
    WHERE xref.itemID IN (".implode(',', $IDs).") 
    AND tag.published = 1";
    $db->setQuery($query);
    $rows = $db->loadObjectList();
    $cloud = array();
    if (count($rows)) {

        foreach ($rows as $tag) {

            if (@array_key_exists($tag->name, $cloud)) {
                $cloud[$tag->name]++;
            } else {
                $cloud[$tag->name] = 1;
            }
        }

        $max_size = $params->get('max_size');
        $min_size = $params->get('min_size');
        $max_qty = max(array_values($cloud));
        $min_qty = min(array_values($cloud));
        $spread = $max_qty - $min_qty;
        if (0 == $spread) {
            $spread = 1;
        }

        $step = ($max_size - $min_size) / ($spread);

        $counter = 0;
        arsort($cloud, SORT_NUMERIC);
        $cloud = @array_slice($cloud, 0, $params->get('cloud_limit'), true);
        uksort($cloud, "strnatcasecmp");

        foreach ($cloud as $key=>$value) {
            $size = $min_size + (($value - $min_qty) * $step);
            $size = ceil($size);
            $tags[$counter]-> {'tag'} = $key;
            $tags[$counter]-> {'count'} = $value;
            $tags[$counter]-> {'size'} = $size;
            $tags[$counter]-> {'link'} = urldecode(JRoute::_(K2HelperRoute::getTagRoute($key)));
            $counter++;
        }

        return $tags;
    }
} 
```

# ruby-on-rails - rails 3缓存 - 有没有宝石？

> ID：12153908
> 
> 赞同：0
> 
> 时间：2012-08-28T06:33:53.647
> 
> 标签：ruby-on-rails, caching, ruby-on-rails-3.2

再会！目前我正在考虑在网站上实现缓存。我读过一篇关于它的文章[http://guides.rubyonrails.org/caching_with_rails.html](http://guides.rubyonrails.org/caching_with_rails.html) 我想知道是否有用于缓存 Rails 应用程序的 gem？是的，Rails 提供了很多方法来做到这一点，但我感兴趣的是有宝石或类似的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T07:12:24.020

DHH 最近谈到了 37Signals 在 Basecamp Next 中使用的一种新的缓存方法（“俄罗斯娃娃缓存”）。

他们甚至为它发布了一个 gem，你可以[在这里看到](https://github.com/rails/cache_digests)。

要查看他正在解释它并接下来展示 Basecamp 的视频，请在[此处观看](http://www.youtube.com/watch?v=FkLVl3gpJP4&t=33m)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T06:52:40.653

这是您的选择：
[render-cachce](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=4&cad=rja&ved=0CEkQFjAD&url=https%3A%2F%2Fgithub.com%2Fryanb%2Frender-caching%2F&ei=fGg8UKbMJKWTiAKJ4oCIDw&usg=AFQjCNEnwUtQvH_BBMHl9W8xmi9eFom8Ng)
[rails-settings-cached](https://github.com/huacnlee/rails-settings-cached)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T06:58:29.877

在 Rails 中实现缓存机制有很多 gems，列表是 memcached、cache、memcache-client。参考 ruby​​gems.org，然后搜索像缓存这样的宝石。

# ruby-on-rails - OmniAuth with Twitter Strategy intermittent "invalid_credentials" failure for some users

> ID：12153914
> 
> 赞同：2
> 
> 时间：2012-08-28T06:34:05.903
> 
> 标签：ruby-on-rails, oauth, twitter, omniauth, twitter-oauth

I've implemented OmniAuth + Twitter strategy. It works most of the time for most users. But some users have been getting a consistent failure, and I have not been able to reproduce it or track it down. After logging in to twitter, the user is redirected to

```
/auth/failure?message=invalid_credentials 
```

I was able to run an HTTP debugger on one users machine during a failure to see the web traffic, and saw the following:

```
302 GET       myserver.com/auth/twitter
    CONNECT   api.twitter.com:443
401 GET       myserver.com/auth/twitter/callback?oauth_token=....&oauth_verifier=....
302 GET       myserver.com/auth/twitter/callback?oauth_token=....&oauth_verifier=....
401 GET       myserver.com/auth/failure?message=invalid_credentials&strategy=twitter
302 GET       myserver.com/auth/failure?message=invalid_credentials&strategy=twitter 
```

Once this starts happening for a user, it happens consistently over and over, and even clearing cookies and restarting the browser doesn't fix it. Not sure - but it may be only happening to a user that has logged in the day before and kept their browser open.

I implemented the twitter login in a very lightweight method as you'll see:

user.rb:

```
class User

  attr_accessor :name, :screen_name, :twitter_secret, :twitter_token

  def initialize(auth)
    @screen_name = auth['info']['nickname']
    @twitter_secret = auth["credentials"]["secret"]
    @twitter_token = auth["credentials"]["token"]
    @name = auth["info"]["name"]
  end

end 
```

session_controller.rb:

```
class SessionsController < ApplicationController

  def reset_and_auth
    reset_session
    redirect_to '/auth/twitter?force_login=true'
  end

  def create
    user = User.new(request.env["omniauth.auth"])
    session[:current_user] = user
    redirect_to root_path, :notice => "Signed in!"
  end

  def destroy
    session.delete(:current_user)
    redirect_to root_path, :notice => "Signed out!"
  end

  def failure
    flash[:auth_failure] = params[:message]
    redirect_to root_path
  end

end 
```

relevant parts of application_controller.rb:

```
helper_method :current_user 
```

and

```
def current_user
  session[:current_user]
end 
```

initializers/omniauth.rb:

```
twitter_config = YAML.load_file(File.join(Rails.root,'config','twitter.yml'))[Rails.env]

Rails.application.config.middleware.use OmniAuth::Builder do
  provider :twitter, twitter_config['consumer_key'], twitter_config['consumer_secret']
end 
```

Other notes of interest (after much googling)

*   This is running on Heroku, so I don't think server Time sync could be the issue
*   The app on dev.twitter.com is configured with a matching callback URL, and a matching hostname
*   The keys and tokens are obviously correct, because it works for most users, most of the time
*   This can't be a problem of *actual* wrong credentials, because in that case the user gets a message about the password being wrong on the twitter login page and doesn't get redirected
*   Once this happens to one user, it happens consistently and they can't login on that browser. However they can login on a different browser. Also about a day or so later they can login again
*   From browsing the source of the oauth gem, I *think* it is raising an ::OAuth::Unauthorized exception here [https://github.com/intridea/omniauth-oauth/blob/master/lib/omniauth/strategies/oauth.rb](https://github.com/intridea/omniauth-oauth/blob/master/lib/omniauth/strategies/oauth.rb)

Gem versions:

```
oauth (0.4.6)
omniauth (1.1.0)
  hashie (~> 1.2)
  rack
omniauth-oauth (1.0.1)
  oauth
  omniauth (~> 1.0)
omniauth-twitter (0.0.12)
  multi_json (~> 1.3)
  omniauth-oauth (~> 1.0)
rails (3.2.6) 
```

# java - Android中的SparseArray克隆

> ID：12153921
> 
> 赞同：2
> 
> 时间：2012-08-28T06:34:27.560
> 
> 标签：java, android, sparse-array

我正在尝试遍历[SparseArray](http://developer.android.com/reference/android/util/SparseArray.html)并删除一些项目。

> 私有 SparseArray 记录；

```
 int size = record.size();
        for (int index = 0; index < size; index++) {
            if (record.valueAt(index) < threshold){
                record.delete(record.keyAt(index));
            }
        } 
```

但是如果我在迭代过程中删除项目，大小会改变，所以我不能使用它。我试图事先克隆稀疏数组。但是日食给了我错误

```
The method clone() from the type object is not visible 
```

但是 SparseArray 的 api doc 和 Source code 都表明它存在并且是公开的。方法克隆也有一个注释`@SuppressWarnings("unchecked")`

抑制会改变方法的可见性吗？
任何人都知道如何解决这个问题或克隆 SparseArray？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T06:38:14.017

根据[SDK 14 的 Android API 更改](http://developer.android.com/sdk/api_diff/14/changes.html)，我们发现[`SparseArray`已修改为包含`public` `clone`](http://developer.android.com/sdk/api_diff/14/changes/android.util.SparseArray.html).

编辑

在我的项目中，我为 SB 数组实现了自己的克隆代码：[Source code here](http://code.google.com/searchframe#y41LDfyHz_M/trunk/AndroidBindingV30/src/gueei/binding/v30/viewAttributes/absListView/Helper.java&q=SparseBooleanArray%20package%3aandroid-binding%5C.googlecode%5C.com)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T06:45:50.183

你为什么不像这样得到数组的大小？还是只使用大小- 每当您删除记录时？

```
 for (int index = 0; index < record.size(); index++) {
        if (record.valueAt(index) < threshold){
            record.delete(record.keyAt(index));
            index--;
        }
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-23T05:29:16.113

仅供参考，在 support-v4 中，SparseArrayCompat 可用于解决此问题等等：

[http://developer.android.com/reference/android/support/v4/util/SparseArrayCompat.html](http://developer.android.com/reference/android/support/v4/util/SparseArrayCompat.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T06:42:41.890

`Clone`方法受`Object`类保护，因此任何类都必须显式提供它，但是我在文档中看到了这个方法，而不是在源代码中。似乎 My `API Level`is`10`和 docs `API level`is `16`。所以请先检查你的`API Level`。

`@SuppressWarnings("unchecked")`是因为返回的`Clone`方法从 doc 似乎返回，这导致内部方法转换为不安全的转换`Object``Object``SparseArray<E>``Object``SparseArray<E>`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-08-07T13:20:02.043

克隆仍然没有在 Android 文档的 API 中更新，也没有在使用 API 9 编译时显示任何警告

所以我编写了自己的代码来克隆对象

```
public static SparseBooleanArray getClone(SparseBooleanArray sparseBooleanArray) {
    if (Build.VERSION.SDK_INT >= android.os.Build.VERSION_CODES.ICE_CREAM_SANDWICH)
        return sparseBooleanArray.clone();
    return getCloneof(sparseBooleanArray);
}

private static SparseBooleanArray getCloneof(SparseBooleanArray sparseBooleanArray) {

    SparseBooleanArray temp = new SparseBooleanArray();
    try {
        int[] mKeys;
        boolean[] mValues;
        int mSize;
        Field mKeysField = sparseBooleanArray.getClass().getDeclaredField("mKeys");
        Field mValuesField = sparseBooleanArray.getClass().getDeclaredField("mValues");
        Field mSizeField = sparseBooleanArray.getClass().getDeclaredField("mSize");

        mKeysField.setAccessible(true);
        mValuesField.setAccessible(true);
        mSizeField.setAccessible(true);

        mKeys = (int[]) mKeysField.get(sparseBooleanArray);
        mValues = (boolean[]) mValuesField.get(sparseBooleanArray);
        mSize = (int) mSizeField.getInt(sparseBooleanArray);

        Field mKeysFieldtemp = temp.getClass().getDeclaredField("mKeys");
        Field mValuesFieldtemp = temp.getClass().getDeclaredField("mValues");
        Field mSizeFieldtemp = temp.getClass().getDeclaredField("mSize");

        mKeysFieldtemp.setAccessible(true);
        mValuesFieldtemp.setAccessible(true);
        mSizeFieldtemp.setAccessible(true);

        mKeysFieldtemp.set(temp, mKeys);
        mValuesFieldtemp.set(temp, mValues);
        mSizeFieldtemp.setInt(temp, mSize);

    } catch (Exception e) {
        e.printStackTrace();
    }
    return temp;
} 
```

# android - Facebook 登录事件监听器不使用 Facebook 登录按钮

> ID：12153922
> 
> 赞同：1
> 
> 时间：2012-08-28T06:34:28.670
> 
> 标签：android, facebook, titanium-mobile, addeventlistener

我已将 Facebook 登录按钮添加到视图（也尝试将其添加到窗口）。该按钮用于调出 Facebook 登录模式，但在成功登录后，什么也没有发生……它不会更改登录按钮的状态（注销）或触发“登录”事件监听器。

有人可以看看我做错了什么吗？

```
exports.login = function()
{
    Titanium.Facebook.appid = "XXXXXXXXX";
    Titanium.Facebook.permissions = ['publish_stream', 'read_stream','email'];

    Ti.App.viewLogin = Ti.UI.createView({
        top: Math.round((80 * Ti.Platform.displayCaps.dpi)/160),
        left:0,
        right:0,
        bottom: 0,
        backgroundImage:'../images/background.png',
        zIndex:99
    });

    // Main View
    var loginView = Titanium.UI.createScrollView({
        contentWidth: 'auto',
        contentHeight: 'auto',
        top:'0dp',
        layout:'vertical',
        showVerticalScrollIndicator: true
    });

    var fbLogin = Titanium.Facebook.createLoginButton({
        style:'wide',
        top:'85dp',
    });

    Ti.App.viewLogin.add(loginView);
    Ti.App.viewLogin.add(fbLogin);

    Ti.UI.currentWindow.add(Ti.App.viewLogin);

    Titanium.Facebook.addEventListener('logout', function(e){
        alert("Logout");
    });

    Ti.Facebook.addEventListener('login',function(e){
        if(Titanium.Facebook.loggedIn)
        {
            Titanium.Facebook.requestWithGraphPath('me', {}, 'GET', function(e) {
                var userInfo = JSON.parse(e.result);
                alert(userInfo.id);
            });
        }   
    });
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T15:07:07.250

您是否尝试过仅使用

```
 Ti.Facebook.authorize() 
```

而不是facebook按钮？

**编辑**

也试试：

```
 Ti.Facebook.logout() 
```

在任何身份验证发生之前 - 无论您是使用按钮还是 .authorize() 调用。

# json - 使用 VBScript 解码/编码 JSON

> ID：12153925
> 
> 赞同：19
> 
> 时间：2012-08-28T06:35:07.423
> 
> 标签：json, vbscript

我有一个 ERP 系统的快速开发工具，它只允许使用 vbscript。我正在尝试使用 VBS 创建一个简单的 AJAX 请求。这适用于“Microsoft.XMLHTTP”-对象。

下一步是使用 json 从网络服务器接收数据。但在 VBS 中似乎没有像“json_decode”这样的功能。

有谁知道解决方案？还是开发自己的 json 函数的唯一选择？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-28T09:15:02.030

由于 JSON 是一种分层数据格式，因此正如 Peter 建议的那样，使用正则表达式和 Split() 不会让您走得太远。

如果您的环境允许，`CreateObject()`您可以使用用另一种语言编写的现成 COMponent（例如，将标准 json2.js 包装在 .WSC 中或 COM 启用 .NET DLL）。另一种选择是通过 Microsoft Script Control 使用另一种语言。这种方法的缺点是您必须处理由其他语言提供的对象/数组（在彼得提到的主题中可以找到一些提示）。

可以在[此处](http://demon.tw/my-work/vbs-json.html)找到纯 VBScript 解决方案。我无法阅读文档，但代码可以编译并“有效”用于简单的测试用例 - YMMV。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-09-03T00:30:16.303

用 ASPJSON 做这个怎么样？
可从[http://www.aspjson.com/](http://www.aspjson.com/)

我将使用它作为一个非常旧的站点的解决方案，将带有编码数据的 ajax 调用（使用 Jquery）发送到 MongoDB，以进行测试。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-29T06:10:36.163

我有一个类似的问题，所以我在 VBScript 中为我的一个项目编写了一个 JSONtoXML 函数。对此脚本不作任何保证（它按原样提供并且具有已知限制，例如不处理所有类型的转义序列）：

```
Const stateRoot = 0
Const stateNameQuoted = 1
Const stateNameFinished = 2
Const stateValue = 3
Const stateValueQuoted = 4
Const stateValueQuotedEscaped = 5
Const stateValueUnquoted = 6
Const stateValueUnquotedEscaped = 7

Function JSONToXML(json)
  Dim dom, xmlElem, i, ch, state, name, value
  Set dom = CreateObject("Microsoft.XMLDOM")
  state = stateRoot
  For i = 1 to Len(json)
    ch = Mid(json, i, 1)
    Select Case state
    Case stateRoot
      Select Case ch
      Case "["
        If dom.documentElement is Nothing Then
          Set xmlElem = dom.CreateElement("ARRAY")
          Set dom.documentElement = xmlElem
        Else
          Set xmlElem = XMLCreateChild(xmlElem, "ARRAY")
        End If
      Case "{"
        If dom.documentElement is Nothing Then
          Set xmlElem = dom.CreateElement("OBJECT")
          Set dom.documentElement = xmlElem
        Else
          Set xmlElem = XMLCreateChild(xmlElem, "OBJECT")
        End If
      Case """"
        state = stateNameQuoted 
        name = ""
      Case "}"
        Set xmlElem = xmlElem.parentNode
      Case "]"
        Set xmlElem = xmlElem.parentNode
      End Select
    Case stateNameQuoted 
      Select Case ch
      Case """"
        state = stateNameFinished
      Case Else
        name = name + ch
      End Select
    Case stateNameFinished
      Select Case ch
      Case ":"
        value = ""
        State = stateValue
      End Select
    Case stateValue
      Select Case ch
      Case """"
        State = stateValueQuoted
      Case "{"
        Set xmlElem = XMLCreateChild(xmlElem, "OBJECT")
        State = stateRoot
      Case "["
        Set xmlElem = XMLCreateChild(xmlElem, "ARRAY")
        State = stateRoot
      Case " "
      Case Chr(9)
      Case vbCr
      Case vbLF
      Case Else
        value = ch
        State = stateValueUnquoted
      End Select
    Case stateValueQuoted
      Select Case ch
      Case """"
        xmlElem.setAttribute name, value
        state = stateRoot
      Case "\"
        state = stateValueQuotedEscaped
      Case Else
        value = value + ch
      End Select
    Case stateValueQuotedEscaped ' @@TODO: Handle escape sequences
      value = value + ch
      state = stateValueQuoted
    Case stateValueUnquoted
      Select Case ch
      Case "}"
        xmlElem.setAttribute name, value
        Set xmlElem = xmlElem.parentNode
        state = stateRoot
      Case "]"
        xmlElem.setAttribute name, value
        Set xmlElem = xmlElem.parentNode
        state = stateRoot
      Case ","
        xmlElem.setAttribute name, value
        state = stateRoot
      Case "\"
         state = stateValueUnquotedEscaped
      Case Else
        value = value + ch
      End Select
    Case stateValueUnquotedEscaped ' @@TODO: Handle escape sequences
      value = value + ch
      state = stateValueUnquoted
    End Select
  Next
  Set JSONToXML = dom
End Function

Function XMLCreateChild(xmlParent, tagName)
  Dim xmlChild
  If xmlParent is Nothing Then
    Set XMLCreateChild = Nothing
    Exit Function
  End If
  If xmlParent.ownerDocument is Nothing Then
    Set XMLCreateChild = Nothing
    Exit Function
  End If
  Set xmlChild = xmlParent.ownerDocument.createElement(tagName)
  xmlParent.appendChild xmlChild
  Set XMLCreateChild = xmlChild
End Function 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-06-15T16:25:49.110

查看[https://github.com/rcdmk/aspJSON](https://github.com/rcdmk/aspJSON)

不确定这是否与 Logan 的回答中提到的 www.ASPJSON.com （现已不复存在）有任何关系。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T08:22:24.557

您最好根据此处对 json 和 asp 的查询推出自己的。像这样一个 [在经典 ASP 中解析 JSON 的任何好的库？](https://stackoverflow.com/questions/1019223/any-good-libraries-for-parsing-json-in-classic-asp/10478483#10478483) 大多数时候使用 json2 库，但这是基于 jscript 的，所以你没有选择。大多数情况下，这种 JSON 具有固定的结构，因此使用正则表达式解析应该不那么困难，就像我在上面的几个答案中展示的那样。您可以发布一些 JSON，以便我们可以使用一些例程对其进行测试。

# android - 我的应用从 google play 安装了多长时间？

> ID：12153929
> 
> 赞同：-2
> 
> 时间：2012-08-28T06:35:21.987
> 
> 标签：android, google-play

我一周前将我的应用程序上传到 google play，我想知道应用程序从 google play 安装了多少时间？接近写成 12 的评分，但我认为这是评论数，不是吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T06:41:07.727

在右侧查找“Installs”，在其下方，将有一个数字

例如[https://play.google.com/store/apps/details?id=com.zeptolab.ctrexperiments.ads&feature=banner#?t=W251bGwsMSwyLDIwMSwiY29tLnplcHRvbGFiLmN0cmV4cGVyaW1lbnRzLmFkcyJd](https://play.google.com/store/apps/details?id=com.zeptolab.ctrexperiments.ads&feature=banner#?t=W251bGwsMSwyLDIwMSwiY29tLnplcHRvbGFiLmN0cmV4cGVyaW1lbnRzLmFkcyJd)

安装：500,000 - 1,000,000

# android - onUpgrade() 方法无法正常工作

> ID：12153933
> 
> 赞同：1
> 
> 时间：2012-08-28T06:35:43.943
> 
> 标签：android, database, sqlite, sql-update

我试图调用 onUpgrade() 来用几列更新我的表。但是，当我运行该应用程序时，我在插入语句中收到错误消息，指出此表中不存在列（我尝试在 onUpgrade() 中添加的列。我非常感谢您的帮助。这是我的 SQLite 助手类：/ /更新和工作

```
public class TasksSQLiteOpenHelper extends SQLiteOpenHelper {
public static final int VERSION = 3;
public static final String DB_NAME = "tasks_db.sqlite";
public static final String TASKS_TABLE = "tasks";
public static final String TASK_ID = "id";
public static final String TASK_NAME = "name";
public static final String TASK_RESPONSIBLE = "responsible";
public static final String TASK_PRIORITY = "priority";
public static final String TASK_DATETIME = "taskdatetime";

public TasksSQLiteOpenHelper(Context context) {
    super(context, DB_NAME, null, VERSION);
}

@Override
public void onCreate(SQLiteDatabase db) {
    createTables(db);
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

    Log.v("test",Integer.toString(oldVersion));
    Log.v("test", Integer.toString(newVersion));
switch(oldVersion){

case 1: db.execSQL("ALTER TABLE "+ TASKS_TABLE +" ADD COLUMN "+ TASK_RESPONSIBLE +" TEXT");
        db.execSQL("ALTER TABLE "+ TASKS_TABLE +" ADD COLUMN "+ TASK_PRIORITY +" TEXT");
        Log.v("test","res + pri created");
        break;

case 2: db.execSQL("ALTER TABLE "+ TASKS_TABLE +" ADD COLUMN "+ TASK_DATETIME +" TEXT");
        Log.v("test","date created");
        break;
    }
}

    protected void createTables(SQLiteDatabase db) {
        db.execSQL(
        "create table " + TASKS_TABLE+" (" + 
        TASK_ID + " integer primary key,"+ 
        TASK_NAME + " text"+ 
        ");"
        );
} 
```

这是我的应用程序类//更新和工作解决方案

```
 public class TaskManagerApplication extends Application {

private ArrayList<Task> currentTasks;
public SQLiteDatabase database;

@Override
public void onCreate() {
    super.onCreate();
    TasksSQLiteOpenHelper helper = new TasksSQLiteOpenHelper(this);
    database = helper.getWritableDatabase();
    if (null == currentTasks) {
        loadTasks();
    }
}
private void loadTasks() {
    currentTasks = new ArrayList<Task>();
    Cursor tasksCursor = database.query(TASKS_TABLE, new String[] {TASK_ID, TASK_NAME,TASK_RESPONSIBLE,TASK_PRIORITY,TASK_DATETIME}, null, null, null, null, null);
    tasksCursor.moveToFirst();
    Task t; 
    if (! tasksCursor.isAfterLast()) {
        do {
            long id = tasksCursor.getLong(0);
            String name  = tasksCursor.getString(1);
            String responsible  = tasksCursor.getString(2);
            String priority  = tasksCursor.getString(3);
            String datetime = tasksCursor.getString(4);
            t = new Task(name, priority, responsible, datetime);
            t.setId(id);
            currentTasks.add(t);
        } while (tasksCursor.moveToNext());
    }
    tasksCursor.close();
}

public void setCurrentTask(ArrayList<Task> currentTask) {
    this.currentTasks = currentTask; // set tasks in array
}

public ArrayList<Task> getCurrentTasks() {
    return currentTasks; //call back tasks
}

public void addTask(Task t) { // add new t of type Task
    assert(null != t); //check for null entries - avoid crashing
    ContentValues values = new ContentValues();
    values.put(TASK_NAME, t.getName());
    values.put(TASK_PRIORITY, t.getPriority());
    values.put(TASK_RESPONSIBLE, t.getResponsible());
    values.put(TASK_DATETIME, t.getDatetime());
    //Log.v("test", TASK_DATETIME);
    t.setId(database.insert(TASKS_TABLE, null, values));
    currentTasks.add(t);
}

public void remove(long id){
    //remove statement from table using where statement id
    database.delete(TASKS_TABLE, TASK_ID +" ="+ id, null);
} 
```

}

这也是我的 logcat 输出

```
 08-28 16:30:41.170: I/Database(8931): sqlite returned: error code = 1, msg = table      tasks has no column named datetime
    08-28 16:30:41.190: E/Database(8931): Error inserting datetime=Aug 28, 2012 4:30:41    PM responsible=Me priority=Medium name=go chi
    08-28 16:30:41.190: E/Database(8931): android.database.sqlite.SQLiteException: table   tasks has no column named datetime: , while compiling: INSERT INTO tasks(datetime,     responsible, priority, name) VALUES(?, ?, ?, ?);
    08-28 16:30:41.190: E/Database(8931):   at     android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
    08-28 16:30:41.190: E/Database(8931):   at  android.database.sqlite.SQLiteCompiledSql.compile(SQLiteCompiledSql.java:92)
    08-28 16:30:41.190: E/Database(8931):   at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:65)
    08-28 16:30:41.190: E/Database(8931):   at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:83)
    08-28 16:30:41.190: E/Database(8931):   at android.database.sqlite.SQLiteStatement.<init>(SQLiteStatement.java:41)
    08-28 16:30:41.190: E/Database(8931):   at android.database.sqlite.SQLiteDatabase.compileStatement(SQLiteDatabase.java:1290)
    08-28 16:30:41.190: E/Database(8931):   at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1710)
  08-28 16:30:41.190: E/Database(8931):     at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1567)
  08-28 16:30:41.190: E/Database(8931):     at com.id11078995.ghnaim.exercise1.TaskManagerApplication.addTask(TaskManagerApplication.java:64)
  08-28 16:30:41.190: E/Database(8931):     at com.id11078995.ghnaim.exercise1.AddTaskActivity.addTask(AddTaskActivity.java:59)
  08-28 16:30:41.190: E/Database(8931):     at com.id11078995.ghnaim.exercise1.AddTaskActivity.onOptionsItemSelected(AddTaskActivity.java:134)
  08-28 16:30:41.190: E/Database(8931):     at and roid.app.Activity.onMenuItemSelected(Activity.java:2211)
  08-28 16:30:41.190: E/Database(8931):     at com.android.internal.policy.impl.PhoneWindow.onMenuItemSelected(PhoneWindow.java:775)
  08-28 16:30:41.190: E/Database(8931):     at com.android.internal.view.menu.MenuItemImpl.invoke(MenuItemImpl.java:143)
  08-28 16:30:41.190: E/Database(8931):     at com.android.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java:860)
  08-28 16:30:41.190: E/Database(8931):     at com.android.internal.view.menu.IconMenuView.invokeItem(IconMenuView.java:532)
  08-28 16:30:41.190: E/Database(8931):     at com.android.internal.view.menu.IconMenuItemView.performClick(IconMenuItemView.java:122)
  08-28 16:30:41.190: E/Database(8931):     at android.view.View$PerformClick.run(View.java:9152)
  08-28 16:30:41.190: E/Database(8931):     at android.os.Handler.handleCallback(Handler.java:587)
  08-28 16:30:41.190: E/Database(8931):     at android.os.Handler.dispatchMessage(Handler.java:92)
  08-28 16:30:41.190: E/Database(8931):     at android.os.Looper.loop(Looper.java:130)
  08-28 16:30:41.190: E/Database(8931):     at android.app.ActivityThread.main(ActivityThread.java:3691)
  08-28 16:30:41.190: E/Database(8931):     at java.lang.reflect.Method.invokeNative(Native Method)
  08-28 16:30:41.190: E/Database(8931):     at java.lang.reflect.Method.invoke(Method.java:507)
  08-28 16:30:41.190: E/Database(8931):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
  08-28 16:30:41.190: E/Database(8931):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
  08-28 16:30:41.190: E/Database(8931):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:10:49.320

我想这太明显了，但是您是否更改了数据库版本？如果不是 onUpgrade() 方法将不起作用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T07:06:10.443

如果不需要保存旧数据，我认为这是更新数据库的一种更简单的方法：

```
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
  Log.w(MySQLiteHelper.class.getName(),
    "Upgrading database from version " + oldVersion + " to "
        + newVersion + ", which will destroy all old data");
  db.execSQL("DROP TABLE IF EXISTS " + TABLE_TASKS);
  onCreate(db);
}

@Override
public void onCreate(SQLiteDatabase database) {
  database.execSQL(DATABASE_CREATE);
} 
```

您的最终字符串 DATABASE_CREATE 包括所有字段。删除主键定义中的“NOT NULL”和“autoincrement”。

*   清理你的项目
*   卸载您的应用程序
*   重新安装它。

欲了解更多信息：[沃杰拉](http://www.vogella.com/articles/AndroidSQLite/article.html)

在不丢失数据的情况下尝试此解决方案：

```
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
  Log.w(MySQLiteHelper.class.getName(),
    "Upgrading database from version " + oldVersion + " to "
        + newVersion);
  boolean lDateTimeExists = isColumnExisting(TASK_DATETIME);
  boolean lResponsible = isColumnExisting(TASK_RESPONSIBLE);
  boolean lPrio = isColumnExisting(TASK_PRIORITY);
  if (!lDateTime){
    db.execSQL("ALTER TABLE "+ TASKS_TABLE +" ADD COLUMN "+ TASK_DATETIME +" TEXT"); 
  }
  if (!lResponsible){
    db.execSQL("ALTER TABLE "+ TASKS_TABLE +" ADD COLUMN "+ TASK_RESPONSIBLE);       
  }
  if (!lPrio){
    db.execSQL("ALTER TABLE "+ TASKS_TABLE +" ADD COLUMN "+ TASK_PRIORITY +"   TEXT");       
  }
}

private boolean isColumnExisting(String pColumnName){
  try{
    db.execSQL("SELECT "+pColumnName+" from "+TABLE_TASKS);
  }catch(Exception e){
    return false;
  }
  return true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T07:28:38.680

只需卸载并重新安装该应用程序，希望它会起作用。

# objective-c - 刷新一个 UITextView

> ID：12153939
> 
> 赞同：2
> 
> 时间：2012-08-28T06:36:23.970
> 
> 标签：objective-c, ios, cocoa-touch

我想在 UITextview 中写一些日志文本。例如：加载 x 图像，创建 y 对象等。我的问题是：插入一行后 UITextView 不刷新。我认为当插入结束时，所有新文本都会同时显示。

```
append = [@"" stringByAppendingFormat:@"\n%@ file is dowloading...", refreshName]
logTextView.text = [logTextView.text stringByAppendingString: append]; 
```

下载后我保存文件并

```
append = [@"" stringByAppendingFormat:@"\n%@ file saved", refreshName];
logTextView.text = [logTextView.text stringByAppendingString: append]; 
```

我试过

```
[logTextView setNeedsDisplay] 
```

或者

```
[logTextView performSelectorOnMainThread:@selector(setNeedsDisplay) withObject:nil waitUntilDone:YES]; 
```

但它没有用:(

会议将是：

1.  在 textview 中插入新行（下载）
2.  显示此文本
3.  下载文件（几秒钟）
4.  在 UITextView 中插入新行（下载完成）
5.  显示文本

它发生的是：

1.  下载文件（几秒钟）
2.  UITextView 显示行（下载ig，下载完成）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:54:04.293

文本只会在下一次通过主线程的 runloop 更新。如果您在主循环上有一个长时间运行的任务，并且它一直在写入 textView，那么在您的任务结束之前不会显示任何内容。

我可以想出几种方法来解决这个问题：

*   在普通调度队列上运行大任务，并使用 dispatch_async(dispatch_get_main_queue(), append this new text) 向 textView 发送消息；这个想法是您的任务在辅助线程上执行（因此它不能直接向 UI 发送消息），而是通过向主队列发送短块来更新 UI。

*   将您的大任务分解成块，每个块都可以由一个方法启动。在这种情况下，您在主队列中执行第一个，然后使用更新的 UITextView 文本向主队列分派一个块，然后执行下一个工作块。那是：

    dispatch_async(dispatch_get_main_queue(), ^ { update textView text; [self doTask1:maybeSomeDictionary]; }

当 doTask1 完成时，它调度下一个块：

```
dispatch_async(dispatch_get_main_queue(), ^
{
    update textView text again;
    [self doTask2:maybeSomeDictionary];
} 
```

当最后的任务完成时，你就完成了。

# jquery - 调整窗口大小时调整 Div 大小

> ID：12153940
> 
> 赞同：2
> 
> 时间：2012-08-28T06:36:26.420
> 
> 标签：jquery, html, css

你好朋友我带着困惑来到这里我发现一个网页包含两个容器，一个是左侧，第二个是右侧，当我在一个限制右侧 div 移动到左侧 div 下方后重新使用浏览器的宽度时，它非常奇怪对我来说，我第一次看到这个我试图弄清楚他们是怎么做到的，但没有得到相同的结果。只需通过链接[http://jquerymobile.com/demos/1.2.0-pre/](http://jquerymobile.com/demos/1.2.0-pre/)

我希望你们能理解我要解释的内容。只需打开链接并在限制后减少浏览器的宽度，您就可以看到我在说什么

请分享您的看法

提前致谢 ......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T06:38:11.913

他们使用[CSS 媒体查询](http://www.w3.org/TR/css3-mediaqueries/)。

[http://jsfiddle.net/xPMqm/1/](http://jsfiddle.net/xPMqm/1/)

HTML：

```
<div id="chameleon"></div>​ 
```

CSS：

```
#chameleon{
    width:100px;
    height:100px;
    background-color:yellow;
}

@media all and (min-width:600px) {
    #chameleon{
        background-color: blue;
        height: 200px;
    }
}

@media all and (min-width:800px) {
    #chameleon{
        background-color: green;
        height:300px;
    }
}

@media all and (min-width:1000px) {
    #chameleon{
        background-color: orange;
        height: 400px;
    }
}

​ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T06:43:28.720

它被称为响应式网页设计。您可以为所有不同的屏幕尺寸创建一个网站。（桌面、标签和移动设备。）

可以通过应用媒体查询来控制布局，其中根据屏幕宽度指定 css。

例如：@media screen and (min-width: 900px) { .class { background: #666; } }

这里媒体类型是屏幕，指定的 css 将应用到宽度为 900 像素或更多。一旦屏幕宽度小于 900px，媒体查询中指定的 css 就不会被应用。

# android - 我正在尝试从服务启动活动，但应用程序强制关闭。我正在从广播接收器启动服务

> ID：12153943
> 
> 赞同：1
> 
> 时间：2012-08-28T06:36:41.787
> 
> 标签：android, service, broadcastreceiver, android-activity

广播接收器的代码是

```
public class MyBroadcastreceiver extends BroadcastReceiver {

public void onReceive(Context context, Intent intent) {
    Intent startServiceIntent = new Intent(context, MyService.class);
    startServiceIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    context.startService(startServiceIntent);

   }
 } 
```

该服务的代码是

```
public class MyService extends Service {

 String tag="TestService";
 @Override
  public void onCreate() {

     Toast.makeText(this, "Service created...", Toast.LENGTH_LONG).show();      
  // Log.i(tag, "Service created...");
    }

   @Override
   public void onStart(Intent intent, int startId) {      
   super.onStart(intent, startId);  
   Intent dialogIntent = new Intent(getBaseContext(), LocationStat.class);
   dialogIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
   getApplication().startActivity(dialogIntent);
   }

  @Override
  public int onStartCommand(Intent intent, int flags, int startId) {

   Toast.makeText(this,"task perform in service",Toast.LENGTH_LONG).show();
  /* startActivity(new Intent(MyService.this,LocationStat.class));*/
     return super.onStartCommand(intent, flags, startId);
   }
   @Override
   public void onDestroy() {
   super.onDestroy();
   Toast.makeText(this, "Service destroyed...", Toast.LENGTH_LONG).show();
   }

   @Override
   public IBinder onBind(Intent intent) {
   return null;
   }
 } 
```

我试图从服务开始的活动是

```
public class LocationStat extends Activity {
double logi;
double lat;
long MINIMUM_DISTANCE_CHANGE_FOR_UPDATES = 1; // in Meters
long MINIMUM_TIME_BETWEEN_UPDATES = 1000; // in Millisecon
Location loc;
LocationManager manager;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    manager=(LocationManager)getSystemService(Context.LOCATION_SERVICE);
    manager.requestLocationUpdates(
            LocationManager.GPS_PROVIDER, 
            MINIMUM_TIME_BETWEEN_UPDATES, 
            MINIMUM_DISTANCE_CHANGE_FOR_UPDATES,
            new MyLocationListener()
    );
   Toast.makeText(this,"activity created...",Toast.LENGTH_LONG).show();
   loc=manager.getLastKnownLocation(LocationManager.GPS_PROVIDER);

   String s;
   if(loc!=null)
   {
     logi=loc.getLongitude();
     lat=loc.getLatitude();
      s="Lat:" + lat + "\nLong:" + logi;

   }
   else
   {
    s ="no location found";
   }

   Toast.makeText(LocationStat.this,"Your Current Position is:\n" +
           s,Toast.LENGTH_LONG).show();
   webcall(logi,lat);
   //getLoc();

}
public void webcall(double logi,double lat)
    {
        InputStream is=null;
        String result = "";
        //the year data to send
        ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
        nameValuePairs.add(new BasicNameValuePair("logitude",Double.toString(logi)));
        nameValuePairs.add(new BasicNameValuePair("latitude",Double.toString(lat)));

        //http post
        try{
                HttpClient httpclient = new DefaultHttpClient();
                HttpPost httppost = new HttpPost("http://10.0.2.2/location.php");
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                HttpResponse response = httpclient.execute(httppost);
                HttpEntity entity = response.getEntity();
                is = entity.getContent();
        }catch(Exception e){
                Toast.makeText(LocationStat.this,"Error in http connection "+e.toString(),Toast.LENGTH_LONG).show();
        }
        //convert response to string
        try{
                BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
                StringBuilder sb = new StringBuilder();
                String line = null;
                while ((line = reader.readLine()) != null) {
                        sb.append(line + "\n");
                }
                is.close();

                 result=sb.toString();

                Toast.makeText(LocationStat.this,result,Toast.LENGTH_LONG).show();
        }catch(Exception e){
                Toast.makeText(LocationStat.this,"Error converting result       "+e.toString(),Toast.LENGTH_LONG).show();
        } 
```

清单看起来像这样

```
<service android:enabled="true" android:name=".MyService">
            <intent-filter >
                <action android:name="com.android.trace.MyService"/>

            </intent-filter>
        </service>

        <receiver android:name="com.android.trace.MyBroadcastReceiver">  
            <intent-filter>  
              <action android:name="android.intent.action.BOOT_COMPLETED" />  
             </intent-filter>  
        </receiver> 

    <activity
        android:name=".LocationStat"
        android:label="@string/title_activity_location_stat" >
        <intent-filter>
             <action android:name="android.intent.action.MAIN" />  

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

</application>
 <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
  <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
  <uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" /> 
```

**日志猫是**：

```
08-28 06:47:07.388: E/AndroidRuntime(265): FATAL EXCEPTION: main
08-28 06:47:07.388: E/AndroidRuntime(265): java.lang.RuntimeException: Unable to instantiate receiver com.android.trace.MyBroadcastReceiver: java.lang.ClassNotFoundException: com.android.trace.MyBroadcastReceiver in loader dalvik.system.PathClassLoader[/data/app/com.android.trace-1.apk]
08-28 06:47:07.388: E/AndroidRuntime(265):  at android.app.ActivityThread.handleReceiver(ActivityThread.java:2789)
08-28 06:47:07.388: E/AndroidRuntime(265):  at android.app.ActivityThread.access$3200(ActivityThread.java:125)
08-28 06:47:07.388: E/AndroidRuntime(265):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2083)
08-28 06:47:07.388: E/AndroidRuntime(265):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-28 06:47:07.388: E/AndroidRuntime(265):  at android.os.Looper.loop(Looper.java:123)
08-28 06:47:07.388: E/AndroidRuntime(265):  at android.app.ActivityThread.main(ActivityThread.java:4627)
08-28 06:47:07.388: E/AndroidRuntime(265):  at java.lang.reflect.Method.invokeNative(Native Method)
08-28 06:47:07.388: E/AndroidRuntime(265):  at java.lang.reflect.Method.invoke(Method.java:521)
08-28 06:47:07.388: E/AndroidRuntime(265):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
08-28 06:47:07.388: E/AndroidRuntime(265):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
08-28 06:47:07.388: E/AndroidRuntime(265):  at dalvik.system.NativeStart.main(Native Method)
08-28 06:47:07.388: E/AndroidRuntime(265): Caused by: java.lang.ClassNotFoundException: com.android.trace.MyBroadcastReceiver in loader dalvik.system.PathClassLoader[/data/app/com.android.trace-1.apk]
08-28 06:47:07.388: E/AndroidRuntime(265):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
08-28 06:47:07.388: E/AndroidRuntime(265):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
08-28 06:47:07.388: E/AndroidRuntime(265):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
08-28 06:47:07.388: E/AndroidRuntime(265):  at android.app.ActivityThread.handleReceiver(ActivityThread.java:2780)
08-28 06:47:07.388: E/AndroidRuntime(265):  ... 10 more 
```

我已经在清单中为广播接收器和服务获取了所有必要的权限，但是当应用程序在设备启动时启动并立即强制关闭

请帮帮我，在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T07:00:03.037

您还没有`MyBroadcastreceiver`在 Manifest 上注册。

`MyBroadcastreceiver`!=`MyBroadcastreceiver`

```
<receiver android:name="com.android.trace.MyBroadcastreceiver ">  
        <intent-filter>  
          <action android:name="android.intent.action.BOOT_COMPLETED" />  
         </intent-filter>  
</receiver> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T07:12:10.700

使用`com.android.trace.MyBroadcastreceiver`而不是`com.android.trace.MyBroadcastReceiver`在 manifast.xml 中注册广播接收器。

# ruby-on-rails - 轨道调试器错误

> ID：12153950
> 
> 赞同：0
> 
> 时间：2012-08-28T06:37:19.307
> 
> 标签：ruby-on-rails, ruby, debugging, ruby-on-rails-3.2, ruby-debug

试图让 Rails 调试器工作。我做了以下工作：

宝石安装调试器

在 Gemfile 中添加

宝石“调试器”，“〜> 1.2.0”

捆绑安装 - 没有错误

现在我将调试器放在我的一个控制器中

```
def show
    require 'debugger'; debugger
    @user = User.find(params[:id])

    respond_to do |format|
       format.html # show.html.erb
       format.json { render json: @user }
    end
end 
```

当我指向我的浏览器时，我在浏览器上收到以下错误

```
LoadError in UsersController#show

cannot load such file -- debugger 
```

我正在使用 ruby​​ 1.9.3p194（2012-04-20 修订版 35410）[x86_64-linux] 和带有 Phusion 乘客的 Rails 3.2.6

知道有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T08:28:30.820

不完全确定要如何使用调试器 gem，但它非常适合在活动代码中创建停止点。在 Rails 3 中，您只需要在您的 routes.rb 中：

```
gem 'debugger' 
```

它在生产中没有任何影响，并且要让它在任何时候停止您的代码，只需输入“调试器”，您的服务器控制台就会让您访问代码中的那个点。此时，要检查变量的状态，您需要访问 IRB，因此只需输入“irb”。在“显示”操作中，您可以检查参数的值以及是否会填充 @user。

```
def show
  debugger
  @user = User.find(params[:id])
  ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T06:54:43.600

删除 require 语句并使用调试器选项启动 rails 服务器

导轨服务器--调试器

# javascript - html5画布和纯Javascript/GWT的游戏性能

> ID：12153951
> 
> 赞同：3
> 
> 时间：2012-08-28T06:37:23.983
> 
> 标签：javascript, gwt, html5-canvas, html5-animation

我想编写一个动画游戏，它需要一直运行很多动画，比如在老虎机中滚动卡片/图像。我想知道我是否应该主要使用纯 GWT/Javascript 来运行动画，或者使用 HTML5 Canvas 或 HTML5 动画来实现这一点。我知道如果我使用 HTML5 画布，我可能能够制作更多精美的动画或图形，但我也更关心性能，因为有几个“动画”同时运行，就像在 5 列插槽中滚动这么多图像一样机器。在这种情况下，我认为性能是最重要的。

我听说用 Canvas 画东西真的很贵。所以我不确定在 Canvas 中滚动图像是否也很昂贵。

1.  你认为我应该使用哪种技术来编写像老虎机这样的游戏？HTML5-Canvas、纯 JS/GWT-animation 还是 HTML5-animation？

2.  我需要为游戏使用一些音频，但我对此很陌生，我不知道我可以使用哪些库或技术来制作音频。请给我一些建议。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T06:49:51.910

如果您有很多图形动画，Canvas 2D 将是一个不错的选择。如果您正在处理矢量形状，则可以选择简单的动画 SVG。我不会选择 GWT，因为 Java 的抽象层可能会妨碍您使用 HTML/CSS/JS 的全部功能。

如果您选择纯 JS 和 Canvas，请确保使用基本游戏库。我使用了适合简单游戏的[jawsjs 。](http://jawsjs.com/)如果您需要参考，请查看并观察以下基于 Canvas 2D 的游戏的性能。如果您需要它的代码作为参考，请告诉我。

[http://99challenge.com/_index.html](http://99challenge.com/_index.html)

在音频方面，几乎没有挑战。Firefox 的行为与所有其他浏览器不同，并且音频支持非常不稳定。您可能需要寻找 Flash 支持以使音频在 FF 上正常工作。

# iphone - 如何自定义UAModalPanel

> ID：12153955
> 
> 赞同：1
> 
> 时间：2012-08-28T06:37:47.423
> 
> 标签：iphone, xcode, uitableview, uiviewcontroller, modalviewcontroller

我在下面的链接中看到了一个非常好的[UAmodalPanel示例代码。](http://code.coneybeare.net/uamodalpanel-an-open-source-modal-panel-alter)但是在我下载了代码之后，我不知道如何在我的项目中实现。

![在此处输入图像描述](../Images/d8754d6e45ae203ab145e1f7961f2f68.png)

我需要在我的项目中单独实现上面的屏幕，如果我们点击 tableview 中的任何行，我还需要执行操作。如果有人知道请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T13:06:27.297

我是 UAModalPanel 的开发者。如果您阅读主页上的[README ，它清楚地显示了如何自定义面板，包括边框颜色。](https://github.com/coneybeare/UAModalPanel)还有一个示例项目，它准确显示了如何实现您的要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T07:09:53.977

在这个例子中，我也指导你，

按照步骤获取点击事件

在UAExampleModelPanel.h 下面的代码中使用。

```
 #import "UATitledModalPanel.h"

    @interface UAExampleModalPanel : UATitledModalPanel <UITableViewDataSource,UITableViewDelegate>//Implement UITableViewDelegate.
 {
        UIView          *v;
        IBOutlet UIView *viewLoadedFromXib;
    }

    @property (nonatomic, retain) IBOutlet UIView *viewLoadedFromXib;

    - (id)initWithFrame:(CGRect)frame title:(NSString *)title;
    - (IBAction)buttonPressed:(id)sender;

    @end 
```

在UAExampleModelPanel.m 下面的代码中使用。

将以下代码实现到 - (id)initWithFrame:(CGRect)frame title:(NSString *)title

```
 UITableView *tv = [[[UITableView alloc] initWithFrame:CGRectZero] autorelease];
        [tv setDataSource:self];
        [tv setDelegate:self];  //Implement Following statement for the set delegates. 
```

现在实现 UItableview 的 Delegate 方法

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
    NSLog(@"Tapped");
} 
```

它可能对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T07:09:14.033

我遵循了这个 [LeveyPopListView](https://github.com/jerometonnelier/LeveyPopListView) 示例代码。它也像 UAModalPanel 一样，LeveyPopListView 简单易懂，通过遵循这个示例我实现了我想要的。

# backbone.js - Backbone.js - 大型站点的动态路由

> ID：12153956
> 
> 赞同：9
> 
> 时间：2012-08-28T06:37:53.100
> 
> 标签：backbone.js, requirejs, backbone-routing

我计划将主干 + 要求用于具有 30 多个模块的应用程序。我打算创建类似这样的东西，而不是为每个模块创建单独的路线。

不确定这是最佳实践。请指导。

```
routes: {
  ":module"                   : "routeLevelOne",
  ":module/:id"               : "routeLevelTwo",
},

routeLevelOne: function(module){
    require(['views/' + module + 'View',],
        function(){
          require('views/' + module + 'View').render();  
       }
    );
},

routeLevelTwo: function(module, id){
    require(['views/' + module + 'View',],
        function(){
          require('views/' + module + 'View').renderWithId(id);  
       }
    );
}, 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T16:40:32.693

我写了[一篇](http://www.geekdave.com/?p=13)关于这个主题的博客文章。单路由器方法可能会工作一段时间，但您担心将来会出现可扩展性问题是对的。

正如上面提到的@shacki，请查看我的[Backbone.Subroute](https://github.com/ModelN/backbone.subroute)插件以使其更具可扩展性，并将子路由的负担转移给开发这些模块的开发人员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T06:42:26.980

从我的角度来看，这完全没有问题，并且是最佳实践。它使您的代码保持简洁和干净，并且很容易理解应该发生的事情。

对我来说唯一的替代选择是[subroutes](https://github.com/ModelN/backbone.subroute)。但是由于您的“调度”逻辑在所有模块中似乎都是相同的，因此可能不需要。

# function - 传递多个参数

> ID：12153967
> 
> 赞同：2
> 
> 时间：2012-08-28T06:38:53.710
> 
> 标签：function, variables, module, erlang

我正在尝试将现有的 C 函数转换为 Erlang，但在理解它将如何工作时遇到了一些麻烦。假设我在 C 中有以下函数：

```
 void(int *x,int *y,int z,int a)
    {
     if(z<a)
      {
     *x = z + a;
     *y = z - a;
      }
     } 
```

我将如何在 Erlang 中将类似的东西作为功能模块编写？我知道通常你编写你的函数，它会返回一个操作。但是如果我必须对多个变量进行计算怎么办？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T07:02:11.773

你可以返回一个像这样的元组：{X, Y}

这是一个将作为输入的两个值加倍的函数：

```
-module(my_module).
-export([doubleus/2]).

doubleus(X, Y) ->
    {X*2, Y*2}. 
```

在外壳中：

```
1> c(my_module).
{ok, my_module}
2> {A, B} = my_module:doubleus(3,4).
{6, 8} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T08:09:06.313

使用指针操作 - 意味着您可以更改内存中某个位置的状态（对于顺序流来说还不错）。

但是在并发环境中，这可能会间接导致指向该位置的每个进程发生不可预测的变化（尤其是在竞争条件下）。

这就是为什么Java中有这么多面向并发的机制。

但这不是 Erlang 的方式。一般来说 - Erlang 中没有指针，也没有共享内存。

例如，您可以将**state**`{ X, Y, Z, A }`存储在 tuple中，并将其从一个函数传递到另一个函数。有时你的函数会返回**新的**状态元组。

在上述上下文中，您的函数可能如下所示：

```
-module( my_module ).
-export( [ f/1 ] ).

f( { _X, _Y, Z, A } ) when Z < A -> { Z + A, Z - A, Z, A };
%% othervise - don't change the state
f( State ) -> State. 
```

# c# - C# 中的正则表达式（来自 PHP 的正则表达式）

> ID：12153968
> 
> 赞同：0
> 
> 时间：2012-08-28T06:39:02.493
> 
> 标签：c#, php, regex

我有一个小问题。我尝试编写一个函数来提取 C# 中的某些内容（我必须将正则表达式从 PHP 转换为 C#）。

我一般是这样写的：

```
public static class ExtensionMethods
{
  public String PregReplace(this String input, string[] pattern, string[] replacements)
  {
    for (var i = 0; i < pattern.Length; i++)
    {
        input = Regex.Replace(input, pattern[i], replacements[i]);
    }

    return input;
  }
} 
```

但我对这些示例有疑问（PHP 中的代码）

```
preg_replace('@<head[^>]*?>.*?</head>@siu', ' ', $result);
preg_replace('@</?((frameset)|(frame)|(iframe))@iu', "\n\$0", $result); 
```

但是当我在 C# 中使用这个正则表达式时

```
String[] pattern = new String[2]{"@<head[^>]*?>.*?</head>@siu", "@</?((frameset)|(frame)|(iframe))@iu"};
String[] replace = new String[2]{" ", "\n\$0"};
input.PregReplace(pattern , replace );  //my new function 
```

我的输入没有任何差异（我没有捕捉到正则表达式）。你能帮我完成我的功能吗？我在正则表达式中有错误吗？

编辑：我将代码更改为：

```
String[] pattern = new String[2]{"<head[^>]*?>.*?</head>", "</?((frameset)|(frame)|(iframe))"};
String[] replace = new String[2]{" ", "\n\\$0"};

input = "input = "><head><title>something</title></head><body>sdegsehgaeg<frame>aggsd</frame></";
string s = input.PregReplace(pattern, replace); 
```

在回答我得到

```
> <body>sdegsehgaeg
\<frame>aggsd
\</frame></ 
```

这是

```
> <body>sdegsehgaeg\n\\<frame>aggsd\n\\</frame></ 
```

对于\n\$0，这只是很多字符\。如果我将 \n\$0 更改为 \n\$0 我会收到错误（无法识别的转义序列）

好的，我解决了问题 (\n$0)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T06:45:18.723

删除`@`代码中的 ，以及`siu`最后`iu`一个`@`. 在 php 中，您需要这些修饰符，在 C# 中，`RegexOptions`如果需要，您会调用一些修饰符。

# c# - 将富文本框保存为 pdf 文件并发送带有附件的电子邮件

> ID：12153969
> 
> 赞同：0
> 
> 时间：2012-08-28T06:39:05.333
> 
> 标签：c#, winforms, pdf-generation, richtextbox

我想将富文本框保存为 pdf 文件。每次我保存文件时，Adobe Reader 都无法打开它。

```
private void button3_Click(object sender, EventArgs e)
{
   SaveFileDialog MyFiles = new SaveFileDialog();
   MyFiles.Filter = "PDF Files|*.pdf";
   MyFiles.Title = "Save As...";
   MyFiles.DefaultExt = "*.pdf";

   if (MyFiles.ShowDialog() == DialogResult.OK) 
   {
      richTextBox1.SaveFile(MyFiles.FileName, RichTextBoxStreamType.PlainText);
      richTextBox3.SaveFile(MyFiles.FileName, RichTextBoxStreamType.PlainText);
      richTextBox4.SaveFile(MyFiles.FileName, RichTextBoxStreamType.PlainText);
      richTextBox5.SaveFile(MyFiles.FileName, RichTextBoxStreamType.PlainText);
   }
} 
```

* * *

我还制作了发送按钮来发送带有附件的电子邮件，但问题是我无法发送电子邮件：

```
 MailMessage MyMail = new MailMessage(richTextBox1.Text, richTextBox4.Text);
        MyMail.To.Add(new MailAddress(richTextBox4.Text));
        MailAddress mail = new MailAddress(richTextBox1.Text);
        MyMail.From = mail;
        MyMail.Subject = richTextBox5.Text;
        MyMail.Body = richTextBox3.Text;
        MyMail.Attachments.Add(new Attachment(richTextBox2.Text));
        SmtpClient MySmtp = new SmtpClient(TheServer.Text);
        MySmtp.UseDefaultCredentials = true;
        MySmtp.EnableSsl = true;
        MySmtp.Port = Convert.ToInt32(ThePort.Text);
        MySmtp.Send(MyMail); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:01:21.913

正如大家所说，您不能简单地保存 RTF 并更改扩展名来制作 PDF，它们是不兼容的格式。在众多可用的商业组件中，AbcPdf 允许您阅读 RTF，然后将输出保存为 PDF：[http ://www.websupergoo.com/abcpdf-11.htm#note](http://www.websupergoo.com/abcpdf-11.htm#note)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T06:49:36.240

问题是，使用该方法，您无法将 RichTextBox 的内容保存为 PDF 格式。

在这里您可以找到可以使用的当前可用的流格式类型：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.richtextboxstreamtype.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.richtextboxstreamtype.aspx)。

如您所见，主要支持的类型是 RTF（富文本格式），一种纯文本多平台格式：这与 PDF 非常不同。看看[这里](http://it.wikipedia.org/wiki/Rich_Text_Format)和[这里](http://it.wikipedia.org/wiki/Portable_Document_Format)。

**编辑：**我只是回答提问者的评论，要求提供一些帮助代码：

```
// This method opens a dialog and save the content of the passed RichTextBox
private bool ShowRichTextBoxSaveDialog(RichTextBox richTextBox)
{
    SaveFileDialog newFileDialog = new SaveFileDialog();
    newFileDialog.Filter = "PDF Files|*.pdf";
    newFileDialog.Title = "Save As...";
    newFileDialog.Filter = "*.pdf";

    // If the user confirm the dialog window...
    if (newFileDialog.ShowDialog() == DialogResult.OK)
    {
        try
        {
            richTextBox.SaveFile(newFileDialog.FileName, RichTextBoxStreamType.PlainText);

            // Success!
            return true;
        }
        catch(Exception e)
        {
            // Error during saving!
            MessageBox.Show(String.Concat("Error during saving: ", e.Message));

            return false;
        }
    }
    else
            // Aborted by the user!
            return false;
}

private void button3_Click(object sender, EventArgs e)
{
   // NEXT WILL SHOW UP 4 DIALOGS, FOR ASKING THE USER 4 FILES TO SAVE!
   this.ShowRichTextBoxSaveDialog(richTextBox1);
   this.ShowRichTextBoxSaveDialog(richTextBox3);
   this.ShowRichTextBoxSaveDialog(richTextBox4);

   // HERE I ALSO CHECK IF THE SAVING IS SUCCESSFUL..
   if (this.ShowRichTextBoxSaveDialog(richTextBox5))
       MessageBox.Show("Success in saving :)");
   else
       MessageBox.Show("Failure in saving :(");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T06:49:47.677

可能是[在 C# 中保存 PDF 和 MS Word 文件](http://www.c-sharpcorner.com/uploadfile/c8b468/save-pdf-and-ms-word-file-in-C-Sharp/)可以帮助您！！！！它使用[iTextSharp](http://sourceforge.net/projects/itextsharp/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T06:49:47.810

使用[这个](http://sourceforge.net/projects/pdflibrary/)或[这个](http://sourceforge.net/projects/pdfsharp/)库可以帮助你。正如@JleruOHeP 在评论中所说，简单地重命名文件是行不通的。

# java - Maven jar-with-dependencies 不会覆盖文件

> ID：12153970
> 
> 赞同：3
> 
> 时间：2012-08-28T06:39:07.417
> 
> 标签：java, maven, maven-3

我的 pom.file 中有这个插件：

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-assembly-plugin</artifactId>
            <executions>
                <execution>
                    <id>package-jar-with-dependencies</id>
                    <phase>package</phase>
                    <goals>
                        <goal>single</goal>
                    </goals>
                    <configuration>
                        <appendAssemblyId>false</appendAssemblyId>
                        <descriptorRefs>
                            <descriptorRef>jar-with-dependencies</descriptorRef>
                        </descriptorRefs>
                        <archive>
                            <manifest>
                                <mainClass>com.doesntwork.App</mainClass>
                            </manifest>
                        </archive>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

到目前为止，这工作得很好。目前，我的两个依赖项使用 META-INF 中某个文件的相同文件名来存储一些数据。不幸的是，插件没有**合并**文件，它只是用第二个覆盖第一个，这使我的应用程序崩溃。

我可以强制 maven 合并碰巧具有相同名称（但来自不同依赖项）的文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T07:05:12.377

[maven-shade-plugin](http://maven.apache.org/plugins/maven-shade-plugin/examples/resource-transformers.html#AppendingTransformer)及其转换器我认为就在你的小巷里。

# android - 在android中从纵向模式更改为横向模式时如何避免更改图像和布局位置

> ID：12153972
> 
> 赞同：0
> 
> 时间：2012-08-28T06:39:17.543
> 
> 标签：android, image, landscape-portrait

我在android中使用横向模式时遇到问题。如何避免在android中将图像位置从纵向模式更改为横向模式。通常横向4和纵向模式很好。如果我们从一种模式转到另一种模式，那么图像的位置就会改变。请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T06:44:00.297

您在其中显示图像的活动，在 Android 清单文件中将该活动注册为：

```
<activity
     android:name="com.android.YourActivity"
     android:screenOrientation="portrait">
</activity> 
```

这样，它将强制活动仅停留在纵向模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T07:20:20.150

方向更改会导致正在运行的 Activity 重新启动。重新启动行为旨在通过使用与新设备配置匹配的替代资源自动重新加载您的应用程序来帮助您的应用程序适应新配置。因此是资源密集型的。
根据您希望应用程序的行为方式和设备性能，您可以通过以下方式处理方向更改（整体配置更改）：

*   固定方向：如果您希望您的应用在横向或纵向模式下具有固定方向。为此，您需要在清单文件中的活动标签下设置此属性。

    > ```
    >  android:screenOrientation="portrait"
    >    or
    >    android:screenOrientation="landscape" 
    > ```

*   自己处理配置更改：如果您的应用程序在特定配置更改期间不需要更新资源并且您有性能限制要求您避免重新启动活动，您可以自己处理方向更改，那么您可以声明您的活动处理配置更改本身，这会阻止系统重新启动您的活动。
    为此，您需要在清单文件中声明：

    ```
    <activity android:name=".MyActivity"
          android:configChanges="orientation|keyboardHidden"
          android:label="@string/app_name"/> 
    ```

    并且您需要覆盖活动的 onConfigurationChanged() 方法。
    **将此作为最后的手段，因为每件事都需要您处理。

*   默认行为：您可以让 android 从资源文件夹中选择替代资源来处理配置更改。您只需为横向和纵向模式提供这些备用资源。

# xcode - Cocos2d 脚步声

> ID：12153975
> 
> 赞同：0
> 
> 时间：2012-08-28T06:39:29.233
> 
> 标签：xcode, cocos2d-iphone

这可能是一个简单的问题，但是每次我的角色与地面接触时尝试播放简单的脚步声时都会遇到问题：

有人可以看看这个：

```
// I want to play a sound when the walk is at frame 4
[[SimpleAudioEngine SharedEngine]playEffect:@"footstep.mp3"];
[pleaseplaymysoundatthisframe@"walk%04d.png"]; 
```

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T11:07:34.183

我认为，更简单的是计算所需的延迟，这将允许在需要的时刻播放你的声音。

或者您可以将动画分成两部分并创建一系列动作。第一个动作将是具有 0-4 帧动画的 CCAnimate，然后是调用方法播放声音的 CCCallFunc 动作，然后是具有其余帧的 CCAnimate 动作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T21:29:39.603

你可以做这样的事情（里程可能会有所不同，这是从我脆弱的记忆中泄露出来的）：

```
// i suppose you have your animFrames in some local var animFrames
// and your CCSprite in some other local/iVar frameOne

float animationDuration=0.8f;
int animationFrames=12;
float fourthFrameTime=animationDuration*4/animationFrames;
float animFrameDelay=animationDuration/animationFrames;

id animateSprite=[CCAnimation animationWithFrames:animFrames delay:animFrameDelay];
id playFootsteps = [CCSequence actions:[CCDelayTime actionWithDuration:fourthFrameTime],
                                       [CCCallFunc actionWithTarget:self
                                                           selector:@selector(playFootSteps)],nil];
id spawn = [CCSpawn actions:animateSprite,playFootsteps,nil];
[frameOne runAction:spawn];

// and somewhere an 

-(void) playFootSteps{
    [[SimpleAudioEngine SharedEngine]playEffect:@"footstep.mp3"];
} 
```

如果这是您的应用程序中反复出现的主题，我建议您创建一个元声音管理器，该管理器可以通过任何对象实例的本地协议/接口调用（通常使用“单例”，以坚持 cocos2d 的一般方法），并且您在那里管理声音开始/停止/恢复的复杂性。

# vba - 如何通过 cmd 或 VBA 删除文件的写保护？

> ID：12153976
> 
> 赞同：1
> 
> 时间：2012-08-28T06:39:29.740
> 
> 标签：vba, cmd

我正在为 word 和 excel 编写宏。输出是应保存的生成文件。由于这些文件已经存在并且受到写保护，我不得不以某种方式删除保护。我在 excel 中发现了一个 unprotect 函数，但它并没有真正起作用。我也没有找到任何通过 cmd o0 取消保护的命令

我考虑在保存新文件之前删除文件。但我想找到解除保护的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T06:45:05.320

在 cmd 中尝试 attrib 命令更改文件属性 `attrib *.xls -r`将帮助您删除只读属性。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-28T06:56:19.993

这是一种使用 FileSystemObject 从 VBA 中删除只读属性的方法：

```
Sub RemoveReadOnly(filePath As String)
    Dim FSO As FileSystemObject
    Dim f As Scripting.File
    Set FSO = New FileSystemObject
    Set f = FSO.GetFile(filePath)

    If fil.Attributes And ReadOnly Then 'It's read-only. Remove that attribute.
        fil.Attributes = fil.Attributes - ReadOnly
    End If
End Sub 
```

用法：

```
RemoveReadOnly "C:\mydir\myReadOnlyFile.dat" 
```

更多信息：http: [//msdn.microsoft.com/en-us/library/5tx15443%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/5tx15443%28v=vs.85%29.aspx)

注意：以上需要如下设置参考：工具 > 参考... > 在 Microsoft Scripting Runtime 旁边设置复选标记。

如果您不想设置引用，请改用后期绑定：

```
Sub RemoveReadOnly(filePath As String)
    Dim FSO As Object
    Dim fil As Object    
    Set FSO = CreateObject("Scripting.FileSystemObject")
    Set fil = FSO.GetFile(filePath)

    If fil.Attributes And 1 Then '1 = ReadOnly
        fil.Attributes = fil.Attributes - 1
    End If
End Sub 
```

# c# - C# 命名空间别名限定符 (::) 与取消引用运算符 (.)

> ID：12153978
> 
> 赞同：28
> 
> 时间：2012-08-28T06:39:38.017
> 
> 标签：c#, namespaces, global, dereference

快速简单的问题。我有点理解命名空间别名限定符的作用，它用于访问命名空间中的成员，但是取消引用运算符也是如此。我真的很困惑这种情况下的区别，为什么你会使用一个而不是另一个，或者他们每个人如何完成同样的事情。

```
using colAlias = System.Collections;

namespace myns
{
    class TestApp
    {
        static void Main()
        {
            colAlias.Hashtable test = new colAlias.Hashtable();
            colAlias::Hashtable test1 = new colAlias::Hashtable();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-28T10:11:00.037

这是一个极端情况`::`（如`@`前缀），用于处理命名空间、类和关键字之间名称冲突的相当罕见的情况。

`::`仅适用于命名空间（和命名空间别名），而`.`. 适用于命名空间和子类。在您需要它的大多数地方，您最好使用不同的名称，但这并不总是一种选择。

`global::`是一种在自动生成的代码中最常见的特殊情况——它将引用的命名空间重置为根。

例如，假设您自动生成一些代码（可能用于表单应用程序、EF 或类似应用程序）并且您的应用程序使用命名空间`YourCompany.Application`。现在您的一位客户（使用您的自动生成）决定在他们的 app 中添加他们自己的命名空间`TheirCompany.YourCompany.Application`。现在*您的*所有自动代码都失败了，因为当它编译时.Net 不知道是使用您的名称空间还是使用他们的名称空间。

要使用 修复此生成代码`global::YourCompany.Application`，那么那些使用您的自动生成器的人可以使用他们喜欢的任何命名空间并且不会发生冲突。

我认为微软添加`global::`是因为他们希望一些 .Net 客户添加像 .Net 这样的命名空间`System`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-28T07:11:13.860

你说：

> 命名空间别名限定符确实如此，它用于访问**命名空间**中的成员，但是取消引用运算符也是如此。

嗯，不。`.`运算符用于访问任何成员，包括函数。你**不能**做`Console::WriteLine();`

`::`仅用于解析命名空间，或者来自这样的命名空间别名：

```
using colAlias = System.Collections;
...
...
colAlias::Hashtable test = new colAlias::Hashtable(); 
```

**或**来自全球。

```
global::System.Console.WriteLine(..); 
```

你**不能**这样做：

```
System.Collections::ArrayList a = new System.Collections.ArrayList(); 
```

但是，如果您有别名，则`.`操作员也可以使用，因此**在您的情况下**，没有区别。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T06:48:51.107

有一个[MSDN 页面](http://msdn.microsoft.com/en-us/library/c3ay4x3d%28v=vs.110%29.aspx)解释了它是如何工作的。

基本上，在您的情况下，它们将实现相同的目标，并且为了代码可读性，最好使用单个`.`.

除了全局命名空间之外，我不会`::`在任何东西上使用运算符，即使这样，也有足够多的方法来解决它。

编辑：操作员所做的更多信息在[:: Operator (C# Reference)](http://msdn.microsoft.com/en-us/library/htccxtad.aspx)文章中进行了解释。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T06:50:29.633

命名空间限定符的一般思想是允许您引用命名空间，即使该名称已在其他地方使用过。如果您声明了一个名为“colAlias”的类，那么 colAlias.Hashtable 将引用该类，但 colAlias::Hashtable 将引用命名空间的值。

这是一个相当狭窄的用例，`global::`也是我见过的唯一典型的这个操作符用例（当试图确保在创建要在未知应用程序中编译的生成代码时不会发生冲突时）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T06:49:23.573

如果您有使用相同命名约定的 CONFLICTING 命名空间，命名空间别名限定符 (::) 可帮助您访问命名空间方法而不会导致错误。

例如，如 msdn [http://msdn.microsoft.com/en-us/library/c3ay4x3d(v=vs.80).aspx中所述](http://msdn.microsoft.com/en-us/library/c3ay4x3d(v=vs.80).aspx)

# c# - 如何使用 ASP.NET 在下拉列表中显示列表项？

> ID：12153980
> 
> 赞同：1
> 
> 时间：2012-08-28T06:39:42.347
> 
> 标签：c#, asp.net, drop-down-menu

这是我的列表定义

```
public class EventsList
    {
        public int EventID { get; set; }
        public string EventName { get; set; }
    } 
```

这是 C# 代码

```
string strCurrentUser = CommonWeb.GetLoginUser();
       EventsClass EventObj = new EventsClass();
       DataSet ds;
       List< EventsList> eventList = new List<EventsList>();
       EventsList eventobj = new EventsList();
       ds=EventObj.GetEvents(strCurrentUser); 
```

我有一个下拉菜单，其中应该将下拉菜单作为 EventName 单独。如何仅从列表中检索 EventName 并将其显示在下拉列表中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T06:42:48.347

要将`EventName`only 显示到下拉列表中，您需要设置以下两个属性：

*   [`DataValueField`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.datavaluefield.aspx)到`EventId`.
*   [`DataTextField`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.datatextfield.aspx)到`EventName`.

就像是：

```
dropdown.DataSource = ds;
dropdown.DataValueField  = "EventID";
dropdown.DataTextField = "EventName";
dropdown.DataBind(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T06:47:56.997

```
ddlName.DataSource = ds;
ddlName.DataTextField= "EventName";
ddlName.DataValueField= "EventID";
ddlName.DataBind(); 
```

此处 DataValueField 由您决定是使用 ID 还是名称本身。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T06:49:32.427

在 asp.net 中，您可以像这样实现

```
DropDownList1.DataSource = ds;
DropDownList1.DataTextField = "EventName";
DropDownList1.DataValueField = "EventID";
DropDownList1.DataBind(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T06:50:20.163

如果数据源中有表，也可以使用 like

```
DropDownlist2.DataSource = dataSet.Tables["Table2"];
Dropdownlist2.DataTextField= "SomeTextFieldInTable2";
Dropdownlist2.DataValueField="SomeValueFieldInTable2";
DropDownlist2.DataBind(); 
```

# java - web.xml 中 servlet 和 servlet-mapping 的说明

> ID：12153981
> 
> 赞同：4
> 
> 时间：2012-08-28T06:39:45.650
> 
> 标签：java, eclipse, jsp, servlets, web.xml

```
<servlet>
    <servlet-name>PerformReg</servlet-name>
    <servlet-class>com.PerformRegistartion</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>PerformReg</servlet-name>
    <url-pattern>/PerformReg</url-pattern>
</servlet-mapping> 
```

根据我的说法，上面的代码用于映射`servlet-class`其`url-pattern`.
但我有一个疑问，为什么他们（java 专家）会这样做（为什么他们制作了`servlet`和`servlet-mapping`两个单独的标签）。
他们本可以做如下所述的事情：

```
<servlet>
    <servlet-class>com.PerformRegistartion</servlet-class>
    <url-pattern>/PerformReg</url-pattern>
</servlet> 
```

这可能会使它更简单。`servlet-name`前面提到的代码中需要什么？

请帮助我消除我的疑问。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T10:11:55.760

名称始终是类的唯一标识。这里 serlvelt-class 可能会出现两次，但是我们所说的 servlet 应该是唯一的。这将由 servlet 名称标识。如果您在 struts1 或 struts2 或 spring 中看到名称，则会在 spring id 中有名称。但无论是姓名还是身份证，都应该是强制性的。

在 servlet 中，servlet 类也是由 servlet 名称触发的，而不是由 servlet 类触发的。因为一个类将执行许多不同的操作。每个动作都应该通过名称来识别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T08:59:41.127

在 web.xml 中，您使用 servlet-name 作为对您的 servlet 的唯一引用。此名称标识 servlet，可与过滤器等一起使用。这不仅仅是将 servlet 映射到特定 URL 的问题。

您可以将其视为别名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T07:13:31.943

在`web.xml`中，我们首先使用`< servlet >`提供唯一名称的元素（即在`< servlet-name >`标签中）配置 servlet，并在标签中写入 servlet 的类名`< servlet-class >`。

`< servlet-mapping >`其次，我们使用元素 将此 servlet 映射到 URL 或 URL 模式。`< servlet-name >`element 用于指定 servlet 的名称，应为与指定为`< url-pattern >`元素值的模式匹配的传入 URL 调用该名称。

# xml - 在 xslt 2.0 中使用 for-each 吗？

> ID：12153982
> 
> 赞同：0
> 
> 时间：2012-08-28T06:39:52.677
> 
> 标签：xml, xslt, xpath, xslt-2.0, xpath-2.0

这是我的 xml 文档。我想使用 xslt2.0 将其转换为另一种 xml 格式。

```
 <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
        <w:document xmlns:w="http://schemas.openxmlformats.org/wordprocessingml/2006/main"
                    xmlns:v="urn:schemas-microsoft-com:vml">
        <w:body>

            <w:tbl/>
            <w:tbl/>
       </w:body>
      </w:document> 
```

这是我的 xslt 2.0 代码片段。

```
<xsl:for-each select="following::node()[1]">
    <xsl:choose>
        <xsl:when test="self::w:tbl and (parent::w:body)">
                <xsl:apply-templates select="self::w:tbl"/>
        </xsl:when>
    </xsl:choose>
</xsl:for-each> 

<xsl:template match="w:tbl">
    <table>
      table data
    </table>
</xsl:template> 
```

**我生成的输出是：**

```
<table>
     table data
   <table>
       table data
    </table>
 </table> 
```

**但我需要的输出是：**

```
<table>
     table data
</table>
<table>
     table data
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T08:35:55.680

您没有说执行 xsl:for-each 时上下文项是什么。您没有向我们提供这些信息这一事实可能表明您还没有理解上下文在 XSLT 中的重要性。在不知道上下文是什么的情况下，不可能更正您的代码。

如果您的代码是正确的，那么整个 for-each 可以简化为

```
<xsl:apply-templates select="following::node()[1][self::w:tbl][parent::w:body]"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T07:52:01.350

如果您要转换作为**w:body**元素的子元素的w **:tbl**元素，您可以让模板与 body 元素匹配，然后查找 tbl 元素

 **```
<xsl:template match="w:body">
   <xsl:apply-templates select="w:tbl"/>
</xsl:template> 
```

匹配**w:tbl**的模板将和以前一样。这是完整的 XSLT：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
   xmlns:w="http://schemas.openxmlformats.org/wordprocessingml/2006/main" 
   exclude-result-prefixes="w">
   <xsl:output method="xml" indent="yes"/>

   <xsl:template match="/*">
      <xsl:apply-templates select="w:body"/>
   </xsl:template>

   <xsl:template match="w:body">
      <xsl:apply-templates select="w:tbl"/>
   </xsl:template>

   <xsl:template match="w:tbl">
      <table> table data </table>
   </xsl:template>
</xsl:stylesheet> 
```

应用于您的示例 XML 时，将输出以下内容

```
<table> table data </table>
<table> table data </table> 
```**

# php - 是否可以在 php 中更改 $_['http_referer'] ？

> ID：12153985
> 
> 赞同：3
> 
> 时间：2012-08-28T06:40:09.583
> 
> 标签：php

> **可能重复：**
> [PHP - 引用重定向脚本](https://stackoverflow.com/questions/857427/php-referer-redirect-script)

例如，我希望制作改变浏览器 http_referer 的脚本

我有链接

[http://www.mysite.com/page.php?changeRefererTo=mysite2.com&redirectTo=www.newwebsite.com](http://www.mysite.com/page.php?changeRefererTo=mysite2.com&redirectTo=www.newwebsite.com)

ChangeRefererTo 持有将改变浏览器 http_referer 代码的值。更改 http_referer 后，它将指向 $redirectTo。

PHP可以吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T06:44:27.247

您不能从服务器更改浏览器的引用者概念。您可以`$_['http_referer']`在 PHP 中进行更改，但这只会影响 PHP 看到的内容，而不影响浏览器看到的内容。如果您能够修改浏览器的引荐来源网址，这将是一个安全问题，因为网站可以强制浏览器使用他们想要的任何引荐来源网址。

但是，您的 PHP 脚本可以使用您想要的任何引荐来源网址获取页面，然后将结果显示给用户。请参阅[PHP - Referer 重定向脚本](https://stackoverflow.com/questions/857427/php-referer-redirect-script)以获取此示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T06:52:05.363

你不能。

引用者由浏览器（即客户端）设置。PHP 在服务器端运行，不能更改客户端信息。

另一种选择是通过 javascript 更改它，但[浏览器不允许您更改它](https://stackoverflow.com/questions/220231/accessing-http-headers-in-javascript)。如果你绝对必须从你那里找到`www.newwebsite.com`一个引用者，`mysite2.com`你可以使用[cURL](http://curl.haxx.se/)或类似的库，它们允许你设置自己的 HTTP 标头。这是假设您无法控制`mysite2.com`. 如果您确实可以控制它，那么您可以重定向到`mysite2.com`from `mysite.com`，然后重定向到`www.newwebsite.com`from `mysite2.com`。

# c++ - Visual Studio 2008 SP1 错误？

> ID：12153991
> 
> 赞同：0
> 
> 时间：2012-08-28T06:41:06.823
> 
> 标签：c++, boost, visual-studio-2008, compiler-construction

我有一个代码片段如下：

```
#include <boost/bind.hpp>
#include <boost/lambda/bind.hpp>
......................
...................
size_t MyCalass::MyFunction() const
{
   using boost::lambda::_1;
   using boost::lambda::_2;
   using boost::lambda::bind;

   return std::accumulate(m_memberObj.begin(), m_memberObj.end(),
      size(), (_1 += bind(&MyCalass::GetLength, _2)));
} 
```

在这里，毫无疑问， boost::lambda::bind 调用写在函数的最后一行。但我得到编译错误。它看起来像这样：

```
Error   70  error C2784: 'const boost::lambda::lambda_functor<boost::lambda::lambda_functor_base<boost::lambda::arithmetic_assignment_action<Action>,boost::tuples::tuple<boost::lambda::lambda_functor<T>,boost::lambda::lambda_functor<Arg>>>> boost::lambda::operator +=(const boost::lambda::lambda_functor<T> &,const boost::lambda::lambda_functor<Arg> &)' : could not deduce template argument for 'const boost::lambda::lambda_functor<T> &' from 'stlp_std::basic_string<_CharT,_Traits,_Alloc>::size_type'   z:\3rdParty\boost_1_41_0_patched\boost\lambda\detail\operator_lambda_func_base.hpp  225 
```

当我像这样更改我的代码时：

```
#include <boost/bind.hpp>
#include <boost/lambda/bind.hpp>
......................
...................
size_t MyCalass::MyFunction() const
{
   using boost::lambda::_1;
   using boost::lambda::_2;
   using boost::lambda::bind;

   return std::accumulate(m_memberObj.begin(), m_memberObj.end(),
      size(), (_1 += boost::lambda::bind(&MyCalass::GetLength, _2)));
} 
```

它编译正确。

这是编译器错误吗？这个有补丁吗？？

# gnu-screen - 如何分离内屏会话

> ID：12153996
> 
> 赞同：15
> 
> 时间：2012-08-28T06:41:13.800
> 
> 标签：gnu-screen

我通常像这样使用 gnu screen： 1\. 为我的所有任务启动一个屏幕会话 2\. 当我登录到一台机器时，我连接到我的同事创建的屏幕会话 (screen -x)（所以这使它成为一个“内部屏幕”）

问题是，当我需要通过“:detach”命令或 ctrl+a+d 与“内屏幕”分离时，我会与主屏幕分离（在 #1 中）。

是否可以脱离“内屏”？

谢谢

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-29T09:07:35.463

使用`ctrl`+ `a`,`a`将`ctrl`+发送`a`到内部屏幕。也就是说，要分离内屏幕按`ctrl`+ `a`, `a`, `d`。或者按`ctrl`+ `a`、`a`和 写`:detach`。

`ctrl`我也使用与您相同的屏幕设置，发现在本地计算机上将+`a`快捷方式更改为`ctrl`+ `l`（小写“L”）更方便。这样您就可以直接使用`ctrl`+`a`而不是繁琐的`ctrl`+ `a`,来访问内部屏幕`a`。为此，请将其添加到您的本地`~/.screenrc`：

```
escape ^La 
```

# c++ - 如何在线程中使用 v8？

> ID：12153998
> 
> 赞同：7
> 
> 时间：2012-08-28T06:41:22.800
> 
> 标签：c++, multithreading, v8

我正在尝试在不是主线程的线程中使用 c++ 中的 v8。就 v8 而言，没有多线程，所有 v8 对象都在该线程中创建和销毁。没有什么是并行运行的，没有什么是共享的。当我从主线程运行我的程序时，一切正常。当我在另一个线程中有 v8 的东西时，我在创建 v8::HandleScope 时出现分段错误。

我找不到任何关于如何使用 v8 实际处理线程的有用文档。搜索时经常弹出“使用隔离物和储物柜”的指令，但我找不到任何关于如何做到这一点的示例。v8::Isolate 上有这个 API 文档，但该页面上没有任何内容告诉我在特定情况下是否需要它们（我不共享内存或并行执行）。v8::Locker() 上的文档甚至没有关于该类的用途的信息。项目中包含的示例也不处理任何这些。

所以我的问题是...

*   我需要在这里使用隔离物和/或储物柜吗？
*   我能得到一个如何使用它们的最小例子吗？即使是伪代码或其他东西也会非常有用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T07:57:54.617

在调用 HandleScope 时，在将使用上下文的方法中确实需要 V8::Locker。[https://github.com/jasondelponte/go-v8/blob/master/src/v8context.cc#L41](https://github.com/jasondelponte/go-v8/blob/master/src/v8context.cc#L41)是我如何将储物柜与 v8 一起使用的示例。在此示例中，它与多个线程一起使用，但我相信该规则也适用于单线程。

仅当您需要多个 v8 实例并行时才需要隔离。

[https://groups.google.com/forum/?fromgroups=#!topic/v8-users/FXpeTYuAqKI](https://groups.google.com/forum/?fromgroups=#!topic/v8-users/FXpeTYuAqKI)是我不久前发现的一个旧线程，它帮助我解决了库在 HandleScope 局部变量出现后立即崩溃的问题创建的。