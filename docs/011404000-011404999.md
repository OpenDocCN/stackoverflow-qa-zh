# StackOverflow 问答 11404000-11404999

# javascript - 使用 Javascript 将 JSON 对象名称传递给函数

> ID：11404000
> 
> 赞同：1
> 
> 时间：2012-07-09T22:17:05.627
> 
> 标签：javascript, json

我正在寻找将字符串传递给函数并返回该字符串名称的 json 对象。

Objname 是一个字符串，例如“ky1”

```
function myFunction(objname) {
    return myjsonobj.objname;
} 
```

我怎样才能让上面的内容正确解析？这是一个简化的示例，但演示了我想要实现的目标。

我没有使用 jQuery，这不是我在这项工作中的选择。

任何帮助都会很棒，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T22:18:15.927

尝试

```
return myjsonobj[objname]; 
```

如果你用点表示法编写它，你正在寻找一个名为“ `objname`”的键，但在你的示例中它只是一个变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T22:19:30.560

我想这就是你想要的。您可以使用方括号对属性进行索引，这与句点表示法相同。

```
myjsonobj["ky1"] == myjosnobj.ky1

function myFunction(objname) {
    return myjsonobj[objname];
} 
```

# javascript - 使用 JavaScript 的正则表达式：用某些东西替换特定的子匹配组

> ID：11404013
> 
> 赞同：2
> 
> 时间：2012-07-09T22:18:12.413
> 
> 标签：javascript, html, regex

这是我的情况。我想为链接识别 Markdown（在这种情况下，只有一种特定样式的链接很好，它是这种格式：`[link text](url "optional title")`，我想要做的是将此 Markdown 文本放入`<pre>`标签中，并将 URL 适当地包裹在`<a>`标签中.

一个伪例子：

转变

```
[link text](url "optional title") 
```

到

```
[link text](<a href='url'>url</a> "optional title") 
```

所以我挖掘了 Markdown 解析器使用的正则表达式，它是这样的：

```
/*
text = text.replace(/
    (                           // wrap whole match in $1
        \[
        (
            (?:
                \[[^\]]*\]      // allow brackets nested one level
                |
                [^\[\]]         // or anything else
            )*
        )
        \]
        \(                      // literal paren
        [ \t]*
        ()                      // no id, so leave $3 empty
        <?(                     // href = $4
            (?:
                \([^)]*\)       // allow one level of (correctly nested) parens (think MSDN)
                |
                [^()\s]
            )*?
        )>?                
        [ \t]*
        (                       // $5
            (['"])              // quote char = $6
            (.*?)               // Title = $7
            \6                  // matching quote
            [ \t]*              // ignore any spaces/tabs between closing quote and )
        )?                      // title is optional
        \)
    )
/g, writeAnchorTag);
*/

text = text.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?((?:\([^)]*\)|[^()\s])*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g, writeAnchorTag); 
```

漂亮评论中的细分有助于了解发生了什么，显然我需要做的就是将`$4`submatch替换为`<a href='$4'>$4</a>`.

但我当然不能这样做`str.replace(re,"<a href='$4'>$4</a>");`，因为那样会用纯链接替换我的整个 Markdown 链接标记（包括链接文本和可选标题）。我希望纯链接显示在原始 Markdown 中，这样它看起来仍然像原来的 Markdown 一样`<pre>`（但现在有一个可点击的链接）。

那么，让我们看看...

提取物`$4`：

```
var group_4 = str.replace(re, "$4"); // Does anybody know a more efficient way to do this? I'm not trying to replace I just need to get the 4th group 
```

好吧，我被卡住了，因为我想坚持`"<a href='"+group_4+"'>"+group_4+"</a>"`作为`$4`.

有人对我有提示吗？我很确定这是可以做到的，我怀疑它也可以优雅地完成。

我已经找到了一种潜在的解决方案（这是错误的），即去掉 group 之外的正则表达式部分`$4`。我认为这还不够，因为它不会根据链接内容进行任何实际的链接检测（即，您可以使用根本不是真正链接的东西来定义 Markdown 链接）。所以我应该使用原始的正则表达式，以确保我转换成的`<a>`实际上是（Markdown 内联样式）链接的一部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T22:56:09.257

我想我有办法用我已经知道的东西来解决这个问题。只需更换原厂零件即可。这意味着必须有其他子匹配项覆盖了 before 和 after 的整个表达式`$4`。假设有一个组`$x`包含从开始到字符串的匹配`$4`，另一个组`$y`包含从字符串结尾`$4`到结尾的匹配，我所要做的就是`str.replace(re,"$x<a href='$4'>$4</a>$y")`完成它。

现在看看是否可以修改我们的正则表达式以不更改其接受的语言，同时为我提供这些组。

更新：再看一会儿它实际上是非常基本的：

```
str.replace(re,"[$2]($4 $5)") 
```

让我以 99% 的方式完全复制原始输入，唯一不正确的部分是之间的空间`$4`和`$5`输入中的空间，`[ \t]*`所以我所要做的就是将其包装到原始输入中的一个新组中正则表达式。我相信它会变成`$5`这样：

```
/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?((?:\([^)]*\)|[^()\s])*?)>?([ \t]*)((['"])(.*?)\6[ \t]*)?\))/g
                                                                      ^      ^ 
```

下面一行上的克拉表示添加括号的位置。

```
str.replace(re,"[$2]($4$5$6)") 
```

应该产生确切的原件，所以

```
str.replace(re,"[$2](<a href='$4'>$4</a>$5$6)") 
```

应该这样做。

现在剩下的就是设计一种仅在这些链接结构之外转义 HTML 的方法，因为我不想转义锚标记。嗯。

# vim - 在终端内运行 MacVim

> ID：11404015
> 
> 赞同：4
> 
> 时间：2012-07-09T22:18:18.437
> 
> 标签：vim, terminal, macvim

我最近从 Vim 切换到 MacVim，因为它支持 Ruby，但是，单独的 UI 非常不方便。有没有办法在终端内运行 MacVim 而不是`mvim`启动单独的 UI？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T23:34:12.610

一种选择是在路径中的某处创建符号链接：

```
ln -s `which mvim` vim 
```

这将在终端中运行 MacVim。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T22:23:21.493

有一种从命令行*启动MacVim 的方法，也许这会让你部分实现你想要的？*

[将其放入您的 .profile 或 .zshrc 文件中]

```
function mvim { /Applications/MacVim.app/Contents/MacOS/Vim -g $*; } 
```

[信用] [http://saikotroid.blogspot.com/2011/10/launching-macvim-from-command-line.html](http://saikotroid.blogspot.com/2011/10/launching-macvim-from-command-line.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-09T22:36:27.527

然后你想用 ruby​​ 支持编译 vim。您可以使用 ruby​​ 支持编译 MacVim，并使用包含在其包中的终端 vim `/Applications/MacVim.app/Contents/MacOS/vim`。本文包括使用 Ruby 编译 MacVim 的说明：http: [//connermcd.wordpress.com/2011/05/04/blogging-with-wordpress-vim-and-markdown/](http://connermcd.wordpress.com/2011/05/04/blogging-with-wordpress-vim-and-markdown/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T23:14:37.793

如果您使用自制软件（如您所愿），那么您可以像我一样使用一个衬垫来获得您想要的东西。我需要 ruby​​ 支持才能使用 command-t 插件，这就是我使用的解决方案。这是我找到此[解决方案的地方](https://www.morethanseven.net/2011/07/31/Vim-with-ruby-support-using-homebrew/)

```
brew install https://raw.github.com/adamv/homebrew-alt/master/duplicates/vim.rb 
```

# ant - ANT 根据模式选择文件，移动到 dest 并重命名

> ID：11404016
> 
> 赞同：4
> 
> 时间：2012-07-09T22:18:21.307
> 
> 标签：ant

我正在尝试复制从以 _${env}.xml 结尾的根文件夹开始的所有目录下的文件，如果找到，则从文件名中删除 _${env} 或复制目录中存在的 xml 文件.我无法让它工作，请帮忙。（可能我需要一个移动和映射器来重命名，但我无法将它们编织在一起。）

```
<target name="main">
    <copy todir="qa-wprelease"> 
        <fileset  dir="bin-debug" includes="**/*.xml"> 
            <or>
                <filename name="*_${env}.xml"/> 
                <filename name="*.xml" />
            </or>
        </fileset>
    </copy> 
</target> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-11T01:44:27.347

检查[`<copy>`](http://ant.apache.org/manual/Tasks/copy.html)任务手册 -`<copy>`可以采用[`<mapper>`](http://ant.apache.org/manual/Types/mapper.html)嵌套元素，它可以在复制过程中使用模式更改文件名。`<mapper>`有很多类型，其中一些你甚至可以使用 javascript 来更改你的文件名。

所以......也许你可以这样做（未经测试，所以不确定它是否有效）：

```
<copy todir="qa-wprelease" includeemptydirs="false">
    <fileset dir="bin-debug" includes="**/*.xml" />
    <globmapper from="*_${env}.xml" to="*.xml"/>
</copy> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T07:15:30.790

First copy all of the XML files under the `bin-debug` directory to `qa-wprelease`. For each XML file in `qa-wprelease` that ends with `_${env}.xml`, use the `<move>` task to remove `_${env}`.

```
<target name="main">
  <mkdir dir="qa-wprelease" />

  <copy todir="qa-wprelease" includeemptydirs="false">
    <fileset dir="bin-debug" includes="**/*.xml" />
  </copy>
  <move todir="qa-wprelease" includeemptydirs="false">
    <fileset dir="qa-wprelease" includes="**/*_${env}.xml" />
    <mapper type="glob" from="*_${env}.xml" to="*.xml"/>
  </move>
</target> 
```

# ios - 在 iOS 上使用 OpenGL ES 保存已编译的 GLSL 二进制文件

> ID：11404022
> 
> 赞同：1
> 
> 时间：2012-07-09T22:18:44.333
> 
> 标签：ios, opengl-es, glsl

我正在使用一些复杂的着色器，在 iOS 设备上编译最多需要 5 秒左右。着色器经过高度优化以减少应用程序的运行时间，但它们越优化，编译时间就越长。

我想知道是否有办法保存着色器的编译版本以在第一次运行后加载，而不是每次运行应用程序时都编译它。关于如何解决这个问题的任何想法都会非常有用。

我相信 OpenGL 4.1 有一个名为“ARB_get_program_binary”的扩展，它允许完成这样的事情，但这绝对不是 iOS 的选择。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T04:51:41.137

OpenGL ES 2 在其核心规范中包含着色器二进制文件。

但是 OpenGL ES 的 iOS 实现的问题在于它不导出任何二进制格式。意思是 glGetInteger(GL_NUM_SHADER_BINARY_FORMATS) 返回 0。

所以在 iOS 上没有二进制着色器格式的运气。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-09-21T16:06:29.947

在 iOS 8 和 OpenGL ES 3.0 之前，没有办法做到这一点。

# apache - mod_wsgi 显示名称似乎没有按预期输出

> ID：11404026
> 
> 赞同：0
> 
> 时间：2012-07-09T22:19:03.350
> 
> 标签：apache, mod-wsgi

我在 WSGIDaemonProcess 配置指令中使用 display-name 选项来显示 python 应用程序的名称。我有点困惑，因为我只看到它在 htop 中输出。当我运行命令检查 apache 时，例如`ps -ylC apache2`所有进程都标识为“apache2”，而不是我在 wsgi 配置中给它们的名称，例如“web”和“internal”。

是否可以通过显示名称显示它们，还是因为它们仍然是 apache 进程而被卡住？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T22:58:20.103

如果您不在使用 BSD 版本/端口的操作系统上`ps`，则显示名称将不会显示在 ps 下。

实际上，您不应该搜索而不是搜索`apache2`or`web`吗`internal`？

# arrays - 从数组中去除度量单位

> ID：11404027
> 
> 赞同：4
> 
> 时间：2012-07-09T22:19:08.657
> 
> 标签：arrays, f#, units-of-measurement

我正在调用需要的外部函数`float[]`，但我的数组是`float<m>[]`. 我怎样才能从数组中删除度量单位？

我需要类似下面的函数，但这不能编译。而且我想避免数组的任何迭代或复制，因为`float<m>`和`float`值是相同的......

```
let demeasure (arr:float<m>[]): float[] = float[] (arr) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T22:26:28.600

我相信演员 to `obj`，然后是动态演员 to`float[]`会起作用，例如

```
(arr :> obj) :?> float[] 
```

因为没有运行时表示。

可能还看到

[F# 度量单位 - 将值“提升”到浮动<something>](https://stackoverflow.com/questions/419521/f-units-of-measure-lifting-values-to-floatsomething)

[如何一般地删除 F# 度量单位](https://stackoverflow.com/questions/412459/how-to-generically-remove-f-units-of-measure)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T22:28:58.970

```
[<Measure>]type m
let f (arr : float[]) : float = 0.0
let arr = [|1.0<m>|]
f (unbox (box arr)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T15:57:38.497

```
let demeasure (arr: float<m>[])  = arr |> Array.map (fun i -> float i) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-02T06:11:25.940

这是任何数字类型、任何度量单位的通用解决方案，但仅适用于数组。如果我们有 Higher Kinds，它也可以在容器上通用：

```
let inline retype (x: 'T) : 'U = (# "" x: 'U #)

module Array =
    let inline stripUoM (x: '``Num<'M>`` []) =
        let _ = Unchecked.defaultof<'``Num<'M>``> * (LanguagePrimitives.GenericOne : 'Num)
        retype x :'Num []
// Usage

[<Measure>]type m

let x = [|34.0<m>; 9.0<m>; 42.0<m> |] |> Array.stripUoM
// val x : float [] = [|34.0; 9.0; 42.0|]

let y = [|34<m>; 9<m>; 42<m> |] |> Array.stripUoM
// val y : int [] = [|34; 9; 42|] 
```

# java - Java 接口 Observable

> ID：11404034
> 
> 赞同：3
> 
> 时间：2012-07-09T22:19:52.117
> 
> 标签：java, interface, observable

我有以下内容：

1.  一个Java类：ClassA实现了Observer

2.  Java 接口：Inter（扩展 Observable，不可能）

3.  一个Java类：ClassB实现Inter extends Observable

4.  一个Java类：ClassC实现Inter extends Observable

现在 ClassA 的代码有点像这样。

```
ClassA{
    Inter anyClass = new ClassB();
           //or it could be
    Inter anyClass = new ClassC();
    //Inter.addObserver(this); //not possible since Interface cannot extend Observable
} 
```

现在，如果某个特定事件发生在 ClassB 或 ClassC 中，我希望 ClassA 知道它。我想过使用观察者/观察者，但问题是接口不能扩展观察者。

如果有人理解这个问题，请帮助我找到在 ClassB 或 ClassC 中发生某些事情时更新 ClassA 的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T22:42:43.950

您不必特别使用内置的 Observer/Observable java 实现。您可以创建自己的接口来使用观察者模式。

使用方法 'update' 或 'notify'（或类似的方法）创建一个接口 Observer，用于 ClassA

然后使用“Inter”接口充当 Observable 确保它实现以下内容：

```
- registerObserver(Observer)
- unregisterObserver(Observer)
- notifyObservers() //(or updateObservers(), which calls the update/notify method for all registered observers) 
```

确保实现“Inter”接口的类也有一个名为observerCollection 的数组列表来跟踪观察者。然后，每当 ClassB 或 ClassC 发生变化并且您想告诉 ClassA（观察者）时，您可以调用 notifyObservers() 让它知道某些事情发生了变化。

看看这个，看看观察者设计模式会发生什么：[http ://en.wikipedia.org/wiki/File:Observer.svg](http://en.wikipedia.org/wiki/File:Observer.svg)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T22:37:01.853

根据第 3 和第 4 个条件，我假设 Observable 是一个类，因为 ClassB 和 ClassC 正在扩展它。那么，为什么不把 addObserver 方法放在 Observable 类中呢？然后您可以将 ClassB 或 ClassC 实例分配给 Observable anyClass 变量，并通过 addObserverMethod 注册观察者：

```
ClassA implements Observer {
    Observable anyClassB = new ClassB();
       //or it could be
    Observable anyClassC = new ClassC();
    anyClassB.addObserver(this);
    anyClassC.addObserver(this);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-23T15:54:57.470

只需使用适当的方法*addObserver*和*deleteObserver*定义您自己的接口*IObservable*：

 **```
public interface IObservable {
    void addObserver(Observer o);    
    void deleteObserver(Observer o);    
} 
```

你的接口可以扩展这个*IObservable*接口：

```
public interface inter extends IObservable {
...
} 
```

在您的 A 类和 B 类中，*addObserver*和*deleteObserver*方法将继承自 Observable 类，不需要定义。

```
public class A extends Observable implements inter {
...
} 
```**

# objective-c - iOS5：如何设置 NavigationBar 和 NavigationToolBar 的样式？（背景和大小）

> ID：11404035
> 
> 赞同：0
> 
> 时间：2012-07-09T22:19:52.413
> 
> 标签：objective-c, ios, ios5, uinavigationcontroller, uinavigationbar

我想做一些我认为很简单但结果非常困难的事情！我想为我的导航控制器的导航栏和工具栏设置样式。我希望他们都有：

1.  自定义背景图像，我知道我可以使用外观代理，但这不符合以下几点的要求。
2.  导航栏和工具栏应该与我为它们设置的背景图像高度相同。我试过设置框架高度，但没有用。
3.  最后，我想向导航栏和工具栏添加一些按钮（具有特定的高度和宽度，而不是固定/标准），但我希望工具栏/导航的行为就像 UIView。

如何实现这三点？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T15:41:26.100

我想添加一个更好的解决方案（在我看来）：为 UINavigationBar 和 UIToolbar 添加一个类别，例如：

**UINavigationBar+myNavBar.m**

```
#import "UINavigationBar+myNavBar.h"

@implementation UINavigationBar (myNavBar)
- (CGSize)sizeThatFits:(CGSize)size {
    UIImage *header = [UIImage imageNamed:@"Images/backgrounds/header"];
    CGSize newSize = CGSizeMake(header.size.width,header.size.height);
    return newSize;
}
- (void)drawRect:(CGRect)rect {
    UIImage *image = [UIImage imageNamed:@"Images/backgrounds/header"];
    [image drawInRect:CGRectMake(0, 0, self.frame.size.width, self.frame.size.height)];
}
@end 
```

**UINavigationBar+myNavBar.h**

```
#import <UIKit/UIKit.h>

@interface UINavigationBar (myNavBar)
- (CGSize)sizeThatFits:(CGSize)size;
@end 
```

UIToolbar 的解决方案几乎完全相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T22:39:53.380

我为此所做的是创建看起来与内置导航栏完全相同的图像。我还创建了一个与默认按钮非常接近的后退按钮。你当然可以为所欲为。这确实花费了相当多的时间，但是一旦你这样做了，你就可以将它们作为 UIImageView 和 UIButton 加载到你的应用程序中。非常简单。并且完全可定制。

```
- (void) viewDidLoad {

    UIView *navBarView = [[UIView alloc] initWithFrame:CGRectMake(0,0,320,44)];

    UIImageView *navBarImg = [[UIImageView alloc] initWithFrame:CGRectMake(0,0,320,44)];
    [navBarImg setImage:[UIImage imageNamed:@"navigationBarImage"]]; // the name of the .png file you made
    [navBarView addSubview:navBarImg];

    UIButton *backButton = [UIButton buttonWithType:UIButtonTypeCustom];
    [backButton setBackgroundImage:[UIImage imageNamed:@"backButtonNormal"] forState:UIControlStateNormal];
    [backButton setBackgroundImage:[UIImage imageNamed:@"backButtonHighlighted"] forState:UIControlStateHighlighted];
    [backButton setFrame:CGRectMake(5,5,40,35)]; //Depends on how you do your button
    [backButton addTarget:self action:@selector(backButtonPressed:) forControlEvents:UIControlEventTouchUpInside];
    [navBarView addSubview:backButton];

    //Repeat for any other buttons you wish to add. 

    [self.view addSubview:navBarView];
}

- (IBAction) backButtonPressed:(id)sender {
   [self.navigationController popViewControllerAnimated:YES];
}

//Pushing VC's
// I usually make a declared property for the VC and then:
- (IBAction) visitNextVC {
   NextVC *_nextVC = [[NextVC alloc] initWithNibName:@"NextVC" bundle:nil];
   [self setNextVC:_nextVC];
   [self.navigationController pushViewController:nextVC animated:YES];
} 
```

# javascript - 使用javascript函数将西里尔文音译为拉丁文

> ID：11404047
> 
> 赞同：19
> 
> 时间：2012-07-09T22:21:22.103
> 
> 标签：javascript, transliteration

我做了这个功能：

```
function transliterate(word){

    var answer = "";

    A = new Array();
    A["Ё"]="YO";A["Й"]="I";A["Ц"]="TS";A["У"]="U";A["К"]="K";A["Е"]="E";A["Н"]="N";A["Г"]="G";A["Ш"]="SH";A["Щ"]="SCH";A["З"]="Z";A["Х"]="H";A["Ъ"]="'";
    A["ё"]="yo";A["й"]="i";A["ц"]="ts";A["у"]="u";A["к"]="k";A["е"]="e";A["н"]="n";A["г"]="g";A["ш"]="sh";A["щ"]="sch";A["з"]="z";A["х"]="h";A["ъ"]="'";
    A["Ф"]="F";A["Ы"]="I";A["В"]="V";A["А"]="A";A["П"]="P";A["Р"]="R";A["О"]="O";A["Л"]="L";A["Д"]="D";A["Ж"]="ZH";A["Э"]="E";
    A["ф"]="f";A["ы"]="i";A["в"]="v";A["а"]="a";A["п"]="p";A["р"]="r";A["о"]="o";A["л"]="l";A["д"]="d";A["ж"]="zh";A["э"]="e";
    A["Я"]="YA";A["Ч"]="CH";A["С"]="S";A["М"]="M";A["И"]="I";A["Т"]="T";A["Ь"]="'";A["Б"]="B";A["Ю"]="YU";
    A["я"]="ya";A["ч"]="ch";A["с"]="s";A["м"]="m";A["и"]="i";A["т"]="t";A["ь"]="'";A["б"]="b";A["ю"]="yu";

for (i in word){

    if (A[word[i]] === 'undefined'){
        answer += word[i];
        }
    else {
        answer += A[word[i]];
        }

return answer;
}
} 
```

现在它应该将西里尔文字音译为拉丁文并让拉丁文简单地通过。但它只能在稍后音译第一个，如果是拉丁语，它会给出未定义的答案。谁能给我一个想法，我做错了什么？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-07-09T22:28:55.003

几件事...

1.  使用未定义而不是“未定义”
2.  不要将 return 放在循环中
3.  使用 hasOwnProperty 过滤掉原型上的函数和属性
4.  使用 [] 而不是 new Array()
5.  使用 {} 而不是 []
6.  使用小写变量而不是大写。大写是为构造函数保留的

这是代码

```
function transliterate(word){
    var answer = ""
      , a = {};

   a["Ё"]="YO";a["Й"]="I";a["Ц"]="TS";a["У"]="U";a["К"]="K";a["Е"]="E";a["Н"]="N";a["Г"]="G";a["Ш"]="SH";a["Щ"]="SCH";a["З"]="Z";a["Х"]="H";a["Ъ"]="'";
   a["ё"]="yo";a["й"]="i";a["ц"]="ts";a["у"]="u";a["к"]="k";a["е"]="e";a["н"]="n";a["г"]="g";a["ш"]="sh";a["щ"]="sch";a["з"]="z";a["х"]="h";a["ъ"]="'";
   a["Ф"]="F";a["Ы"]="I";a["В"]="V";a["А"]="a";a["П"]="P";a["Р"]="R";a["О"]="O";a["Л"]="L";a["Д"]="D";a["Ж"]="ZH";a["Э"]="E";
   a["ф"]="f";a["ы"]="i";a["в"]="v";a["а"]="a";a["п"]="p";a["р"]="r";a["о"]="o";a["л"]="l";a["д"]="d";a["ж"]="zh";a["э"]="e";
   a["Я"]="Ya";a["Ч"]="CH";a["С"]="S";a["М"]="M";a["И"]="I";a["Т"]="T";a["Ь"]="'";a["Б"]="B";a["Ю"]="YU";
   a["я"]="ya";a["ч"]="ch";a["с"]="s";a["м"]="m";a["и"]="i";a["т"]="t";a["ь"]="'";a["б"]="b";a["ю"]="yu";

   for (i in word){
     if (word.hasOwnProperty(i)) {
       if (a[word[i]] === undefined){
         answer += word[i];
       } else {
         answer += a[word[i]];
       }
     }
   }
   return answer;
} 
```

更功能的一个是这样的......

```
var a = {"Ё":"YO","Й":"I","Ц":"TS","У":"U","К":"K","Е":"E","Н":"N","Г":"G","Ш":"SH","Щ":"SCH","З":"Z","Х":"H","Ъ":"'","ё":"yo","й":"i","ц":"ts","у":"u","к":"k","е":"e","н":"n","г":"g","ш":"sh","щ":"sch","з":"z","х":"h","ъ":"'","Ф":"F","Ы":"I","В":"V","А":"a","П":"P","Р":"R","О":"O","Л":"L","Д":"D","Ж":"ZH","Э":"E","ф":"f","ы":"i","в":"v","а":"a","п":"p","р":"r","о":"o","л":"l","д":"d","ж":"zh","э":"e","Я":"Ya","Ч":"CH","С":"S","М":"M","И":"I","Т":"T","Ь":"'","Б":"B","Ю":"YU","я":"ya","ч":"ch","с":"s","м":"m","и":"i","т":"t","ь":"'","б":"b","ю":"yu"};

function transliterate(word){
  return word.split('').map(function (char) { 
    return a[char] || char; 
  }).join("");
} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2016-03-30T13:22:35.397

在我的项目中，我使用这种音译方法：

```
var transliterate = function(text) {

    text = text
        .replace(/\u0401/g, 'YO')
        .replace(/\u0419/g, 'I')
        .replace(/\u0426/g, 'TS')
        .replace(/\u0423/g, 'U')
        .replace(/\u041A/g, 'K')
        .replace(/\u0415/g, 'E')
        .replace(/\u041D/g, 'N')
        .replace(/\u0413/g, 'G')
        .replace(/\u0428/g, 'SH')
        .replace(/\u0429/g, 'SCH')
        .replace(/\u0417/g, 'Z')
        .replace(/\u0425/g, 'H')
        .replace(/\u042A/g, '')
        .replace(/\u0451/g, 'yo')
        .replace(/\u0439/g, 'i')
        .replace(/\u0446/g, 'ts')
        .replace(/\u0443/g, 'u')
        .replace(/\u043A/g, 'k')
        .replace(/\u0435/g, 'e')
        .replace(/\u043D/g, 'n')
        .replace(/\u0433/g, 'g')
        .replace(/\u0448/g, 'sh')
        .replace(/\u0449/g, 'sch')
        .replace(/\u0437/g, 'z')
        .replace(/\u0445/g, 'h')
        .replace(/\u044A/g, "'")
        .replace(/\u0424/g, 'F')
        .replace(/\u042B/g, 'I')
        .replace(/\u0412/g, 'V')
        .replace(/\u0410/g, 'a')
        .replace(/\u041F/g, 'P')
        .replace(/\u0420/g, 'R')
        .replace(/\u041E/g, 'O')
        .replace(/\u041B/g, 'L')
        .replace(/\u0414/g, 'D')
        .replace(/\u0416/g, 'ZH')
        .replace(/\u042D/g, 'E')
        .replace(/\u0444/g, 'f')
        .replace(/\u044B/g, 'i')
        .replace(/\u0432/g, 'v')
        .replace(/\u0430/g, 'a')
        .replace(/\u043F/g, 'p')
        .replace(/\u0440/g, 'r')
        .replace(/\u043E/g, 'o')
        .replace(/\u043B/g, 'l')
        .replace(/\u0434/g, 'd')
        .replace(/\u0436/g, 'zh')
        .replace(/\u044D/g, 'e')
        .replace(/\u042F/g, 'Ya')
        .replace(/\u0427/g, 'CH')
        .replace(/\u0421/g, 'S')
        .replace(/\u041C/g, 'M')
        .replace(/\u0418/g, 'I')
        .replace(/\u0422/g, 'T')
        .replace(/\u042C/g, "'")
        .replace(/\u0411/g, 'B')
        .replace(/\u042E/g, 'YU')
        .replace(/\u044F/g, 'ya')
        .replace(/\u0447/g, 'ch')
        .replace(/\u0441/g, 's')
        .replace(/\u043C/g, 'm')
        .replace(/\u0438/g, 'i')
        .replace(/\u0442/g, 't')
        .replace(/\u044C/g, "'")
        .replace(/\u0431/g, 'b')
        .replace(/\u044E/g, 'yu');

    return text;
}; 
```

运行此示例进行音译：

```
transliterate('абвгдеёжзийклмнопрстуфхцчшщъыьэюяАБВГДЕЁЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ'); 
```

我已经用它们的 unicode 类似物（每个字母以 \u 开头）替换了所有俄语字母，以解决 Javascript 文件中的编码问题。

为了检查执行速度，我选择了这个问题的最佳答案，并将其与我的示例进行了比较。我的方法几次似乎更快（在 Firebug 中为 0.16 毫秒 :-)。

[![firebug中的速度比较](../Images/1b285acc769b30017869f84710c618fc.png)](https://i.stack.imgur.com/aK7QM.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-09T22:27:37.307

请勿将数组用于此任务。不要`for in`用于迭代字符串。不要检查字符串`"undefined"`。不要`return`在`for`循环内。

```
function transliterate(word) {
    var A = {};
    var result = '';

    A["Ё"]="YO";A["Й"]="I";A["Ц"]="TS";A["У"]="U";A["К"]="K";A["Е"]="E";A["Н"]="N";A["Г"]="G";A["Ш"]="SH";A["Щ"]="SCH";A["З"]="Z";A["Х"]="H";A["Ъ"]="'";
    A["ё"]="yo";A["й"]="i";A["ц"]="ts";A["у"]="u";A["к"]="k";A["е"]="e";A["н"]="n";A["г"]="g";A["ш"]="sh";A["щ"]="sch";A["з"]="z";A["х"]="h";A["ъ"]="'";
    A["Ф"]="F";A["Ы"]="I";A["В"]="V";A["А"]="A";A["П"]="P";A["Р"]="R";A["О"]="O";A["Л"]="L";A["Д"]="D";A["Ж"]="ZH";A["Э"]="E";
    A["ф"]="f";A["ы"]="i";A["в"]="v";A["а"]="a";A["п"]="p";A["р"]="r";A["о"]="o";A["л"]="l";A["д"]="d";A["ж"]="zh";A["э"]="e";
    A["Я"]="YA";A["Ч"]="CH";A["С"]="S";A["М"]="M";A["И"]="I";A["Т"]="T";A["Ь"]="'";A["Б"]="B";A["Ю"]="YU";
    A["я"]="ya";A["ч"]="ch";A["с"]="s";A["м"]="m";A["и"]="i";A["т"]="t";A["ь"]="'";A["б"]="b";A["ю"]="yu";

    for(var i = 0; i < word.length; i++) {
        var c = word.charAt(i);

        result += A[c] || c;
    }

    return result;
} 
```

[这是一个 jsFiddle 演示。](http://jsfiddle.net/JVJ8a/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-09T22:26:00.933

你的主要问题是`return`在错误的地方。它*在*你的循环中，所以它在第一次迭代时返回。将其更改为：

```
function transliterate(word){

    var answer = "";

    A = new Array();
    A["Ё"]="YO";A["Й"]="I";A["Ц"]="TS";A["У"]="U";A["К"]="K";A["Е"]="E";A["Н"]="N";A["Г"]="G";A["Ш"]="SH";A["Щ"]="SCH";A["З"]="Z";A["Х"]="H";A["Ъ"]="'";
    A["ё"]="yo";A["й"]="i";A["ц"]="ts";A["у"]="u";A["к"]="k";A["е"]="e";A["н"]="n";A["г"]="g";A["ш"]="sh";A["щ"]="sch";A["з"]="z";A["х"]="h";A["ъ"]="'";
    A["Ф"]="F";A["Ы"]="I";A["В"]="V";A["А"]="A";A["П"]="P";A["Р"]="R";A["О"]="O";A["Л"]="L";A["Д"]="D";A["Ж"]="ZH";A["Э"]="E";
    A["ф"]="f";A["ы"]="i";A["в"]="v";A["а"]="a";A["п"]="p";A["р"]="r";A["о"]="o";A["л"]="l";A["д"]="d";A["ж"]="zh";A["э"]="e";
    A["Я"]="YA";A["Ч"]="CH";A["С"]="S";A["М"]="M";A["И"]="I";A["Т"]="T";A["Ь"]="'";A["Б"]="B";A["Ю"]="YU";
    A["я"]="ya";A["ч"]="ch";A["с"]="s";A["м"]="m";A["и"]="i";A["т"]="t";A["ь"]="'";A["б"]="b";A["ю"]="yu";

    for (i in word){

        if (A[word[i]] === 'undefined'){
            answer += word[i];
            }
        else {
            answer += A[word[i]];
            }

    }
    return answer; // <=== Was *above* the } on the previous line
} 
```

请注意，我已经修复了缩进。一致的缩进可以帮助你避免这些错误。

* * *

注意 1：您的对象***没有任何***使用它是. 您只是将其用作地图。在 JavaScript 中，所有对象都是映射，所以不仅仅是使用.`A``Array``A = new Array();``A = {};`

注意 2：`A`并且从未在您的函数中声明，因此您正在[*成为隐式全局恐怖的*](http://blog.niftysnippets.org/2008/03/horror-of-implicit-globals.html)`i`牺牲品。要修复它，请使用.[](http://blog.niftysnippets.org/2008/03/horror-of-implicit-globals.html)*`var`*

 *注意 3：使用`for..in`循环遍历字符串的字符，也不能使用`[]`索引到字符串，在 JavaScript 引擎中都是可靠的。相反，使用`for (i = 0; i < word.length; ++i)`and then`ch = word.charAt(i);`获取该位置的字符，然后`ch`在循环内的代码中使用。

注意 4：您可以使用[*Curiously 强大的`||`运算符*](http://blog.niftysnippets.org/2008/02/javascripts-curiously-powerful-or.html)来缩短您的代码，例如：

```
answer += A[ch] || ch; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-24T21:26:27.760

js 中的俄语符号在我的系统中根本不起作用。我不知道为什么。所以我为此使用下一个代码：

它不仅会音译，还会用“_”替换所有标点符号并将所有内容小写。

```
function translit(str){
	var sp = '_'; 
	var text = str.toLowerCase();
	var transl = { 
		'\u0430': 'a', '\u0431': 'b', '\u0432': 'v', '\u0433': 'g', '\u0434': 'd', '\u0435': 'e', '\u0451': 'e', '\u0436': 'zh',
		'\u0437': 'z', '\u0438': 'i', '\u0439': 'j', '\u043a': 'k', '\u043b': 'l', '\u043c': 'm', '\u043d': 'n', '\u043e': 'o',
		'\u043f': 'p', '\u0440': 'r', '\u0441': 's', '\u0442': 't', '\u0443': 'u', '\u0444': 'f', '\u0445': 'h', '\u0446': 'c', 
		'\u0447': 'ch', '\u0448': 'sh', '\u0449': 'shch', '\u044a': '\'', '\u044b': 'y', '\u044c': '', '\u044d': 'e', '\u044e': 'yu',
		'\u044f': 'ya',		
		'\u00AB':'_', '\u00BB':'_', // «»
		' ': sp, '_': sp, '`': sp, '~': sp, 
		'!': sp, '@': sp, '#': sp, '$': sp,
		'%': sp, '^': sp, '&': sp, '*': sp, '(': sp, ')': sp, '-': sp, '\=': sp,
		'+': sp, '[': sp, ']': sp, '\\': sp, '|': sp, '/': sp, '.': sp, ',': sp,
		'{': sp, '}': sp, '\'': sp, '"': sp, ';': sp, ':': sp, '?': sp, '<': sp,
		'>': sp, '№': sp					
	}
    var result = '';
	var curent_sim = '';
    for(i=0; i < text.length; i++) {
		if(transl[text[i]] != undefined) {			
			if(curent_sim != transl[text[i]] || curent_sim != sp){
				result += transl[text[i]];
				curent_sim = transl[text[i]];				
			}					
		} else {
			result += text[i];
			curent_sim = text[i];
		}		
    }
	result = result.replace(/^_/, '').replace(/_$/, ''); // trim
	return result
}

var result = translit('Привет Мир!');
document.getElementById('alias').value = result;
```

```
<html>
  <body>
    <input name="name" type="text" id="alias" />
  </body>
</html>
```

代码最初取自这里：[http](http://ajaxs.ru/lesson/js/137-transliteracija_stroki_na_javascript.html) ://ajaxs.ru/lesson/js/137-transliteracija_stroki_na_javascript.html然后重构。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-11-02T07:48:52.597

如果你需要用空字符串替换 'ъ' 和 'ь' ，你应该这样修改@split-your-infinity 解决方案：

```
var a = {"Ё":"YO","Й":"I","Ц":"TS","У":"U","К":"K","Е":"E","Н":"N","Г":"G","Ш":"SH","Щ":"SCH","З":"Z","Х":"H","Ъ":"","ё":"yo","й":"i","ц":"ts","у":"u","к":"k","е":"e","н":"n","г":"g","ш":"sh","щ":"sch","з":"z","х":"h","ъ":"","Ф":"F","Ы":"I","В":"V","А":"a","П":"P","Р":"R","О":"O","Л":"L","Д":"D","Ж":"ZH","Э":"E","ф":"f","ы":"i","в":"v","а":"a","п":"p","р":"r","о":"o","л":"l","д":"d","ж":"zh","э":"e","Я":"Ya","Ч":"CH","С":"S","М":"M","И":"I","Т":"T","Ь":"","Б":"B","Ю":"YU","я":"ya","ч":"ch","с":"s","м":"m","и":"i","т":"t","ь":"","б":"b","ю":"yu"};

function transliterate(word){
  return word.split('').map(function (char) { 
    return a.hasOwnProperty(char) ? a[char] : char; 
  }).join("");
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-10T07:33:42.670

通过结合 Bart Riemens 和 TJ Crowder 的建议，我想出了这个代码，它可以很好地完成这个技巧：

```
 function transliterate(word){

    var answer = "";
    var a = {}

    a["Ё"]="YO";a["Й"]="I";a["Ц"]="TS";a["У"]="U";a["К"]="K";a["Е"]="E";a["Н"]="N";a["Г"]="G";a["Ш"]="SH";a["Щ"]="SCH";a["З"]="Z";a["Х"]="H";a["Ъ"]="'";
    a["ё"]="yo";a["й"]="i";a["ц"]="ts";a["у"]="u";a["к"]="k";a["е"]="e";a["н"]="n";a["г"]="g";a["ш"]="sh";a["щ"]="sch";a["з"]="z";a["х"]="h";a["ъ"]="'";
    a["Ф"]="F";a["Ы"]="I";a["В"]="V";a["А"]="a";a["П"]="P";a["Р"]="R";a["О"]="O";a["Л"]="L";a["Д"]="D";a["Ж"]="ZH";a["Э"]="E";
    a["ф"]="f";a["ы"]="i";a["в"]="v";a["а"]="a";a["п"]="p";a["р"]="r";a["о"]="o";a["л"]="l";a["д"]="d";a["ж"]="zh";a["э"]="e";
    a["Я"]="Ya";a["Ч"]="CH";a["С"]="S";a["М"]="M";a["И"]="I";a["Т"]="T";a["Ь"]="'";a["Б"]="B";a["Ю"]="YU";
    a["я"]="ya";a["ч"]="ch";a["с"]="s";a["м"]="m";a["и"]="i";a["т"]="t";a["ь"]="'";a["б"]="b";a["ю"]="yu";

    for (i = 0; i < word.length; ++i){

        answer += a[word[i]] === undefined ? word[i] : a[word[i]];
    }   
    return answer;
} 
```

比你！*

# compiler-construction - 如何将 OpenCL 内核编译成比特流？

> ID：11404049
> 
> 赞同：7
> 
> 时间：2012-07-09T22:21:23.533
> 
> 标签：compiler-construction, parallel-processing, opencl, gpu

如何将 OpenCL 内核编译成比特流，我以后可以直接加载而无需重新编译？我的平台是带有 APU 和 AMD 独立 GPU 的 AMD 机器。该机器运行支持 OpenCL 1.2 的最新 AMD APP SDK。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-10T00:42:31.977

1) 使用 clCreateProgamWithSource API 调用将内核从源代码编译为程序。使用 clGetProgramBuildInfo API 调用检索编译器错误。

2) 使用 clGetProgramInfo API 调用获取 CL_PROGRAM_BINARY_SIZES。这些是程序二进制文件的大小。2a) 使用 2) 中的大小为二进制文件分配内存

3) 使用 clGetProgramInfo API 调用获取 CL_PROGRAM_BINARIES。这将获得程序二进制文件。

4) 可以通过 API 调用 clCreateProgamWithBinary 将二进制文件转换为 OpenCL 程序对象。

二进制特定于设备的二进制文件，因此在特定设备上编译的二进制文件不会在其他设备上运行。

对于单个流程实例，一旦您拥有环境（平台、设备、上下文和队列），您就可以重新使用 OpenCL 内核对象并通过另一个 clEnqueueNDRange API 调用重新执行该对象。

# google-docs - 编辑 google 表单源，同时将其保留在 google 环境中

> ID：11404055
> 
> 赞同：8
> 
> 时间：2012-07-09T22:22:03.697
> 
> 标签：google-docs, google-apps-script

是否可以编辑 Google 表单以允许数据验证并在其上使用一些 javascript 或类似工具来为表单提供高级感。在确保表单不会从谷歌环境中删除或至少能够将其数据提供给谷歌电子表格的同时。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T23:51:43.427

可以这样做，但这不是一种非常“干净”的方法。您可以使用 Google 表单创建一个表单，并使用 HtmlService 来解析带有链接的 html，然后您可以使用它添加更多的 html/javascript。这个技巧现在是可能的，但如果 Google Form html 结构有任何变化，它就会破坏这个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T21:53:00.890

好的，我想通了。您只需将 ... 中的部分粘贴到您的网页上，它仍会与其 Google 数据源电子表格进行交互。之后您可以使用任何网络工具来编辑表单本身，例如 html、javascript、ajax 等。但是您应该了解有关此方法的一些事项：

1.  如果您想添加一个新字段，您必须在实际的 google 表单中添加该字段，然后再次复制 ... 并重做您之前在其上所做的所有工作。所以如果你知道你会一直添加新字段，那么这是一个不好的方法。

2.  确保您没有更改任何与 google 相关的术语，例如标签的类名、表单操作参数等。我认为您可以对其进行的工作是完全可以接受的，即那些允许更改外观和感觉的工作形式及其周边。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T23:19:24.583

有点... 您可以使用 Google Apps 脚本创建一个非常复杂的表单。对于有经验和图书馆的人来说，这可能短至一个小时。如果您是从头开始，则需要相当多的时间（Apps 脚本新手的学习曲线可能有点高）。

我们发现，如果我们将自定义表单交付给我们域内的人，Google Apps 脚本效果很好。如果我们需要从公众那里收集信息并且可以使用常规的 Google 表单来收集信息，那也很有效。但是，如果我们需要使用 Apps 脚本从我们域外的人那里收集信息，我们会使用其他服务（不是 Google）。

祝你好运。

# sql-server-2005 - SQL Server：多行合二为一的高级报表

> ID：11404062
> 
> 赞同：0
> 
> 时间：2012-07-09T22:22:51.853
> 
> 标签：sql-server-2005

我有代码将来自许多表的数据放在一起，这些数据与用户对特定课程的所有问题的反应有关。响应如下所示：

```
userid|lesson|question |response|label|weight|duration_seconds
========================================================================
bob   |first |loc_nameA|4       |R9   |3.5   |189
bob   |first |loc_nameB|2       |R7   |4.5   |113
… 
```

需要制作一份报告，将所有响应显示在一行中。因此，对于每个问题，我需要将响应与其相应的标签、权重和持续时间一起显示到一列中，如下所示：

```
userid|lesson|1_resp|1_labl|1_weig|1_dura|2_resp|3_labl|3_weig|3_dura|4_resp…
========================================================================
bob   |first |4     |R9    |3.5   |189   |2     |R7    |4.5   |113   |1 
```

或者，使用“问题”列值作为动态列名的一部分。目前它们都有像 L1Q1 这样的逻辑名称，所以只有 1,2,3 就足以作为列名，但情况可能并非总是如此：

```
userid|lesson|loc_nameA_resp|loc_nameA_labl|loc_nameA_weig|loc_nameA_dura|loc_nameB_resp|loc_nameB_labl|loc_nameB_weig|loc_nameB_dura|loc_nameC_resp…
================================================================================================================================================
bob   |first |4             |R9            |3.5           |189           |2             |R7            |4.5           |113           |1 
```

我一直在阅读有关数据透视表的信息，但所有示例似乎都比我所描述的更有限。SQL Server 2005 如何做到这一点？我应该使用别的东西吗？有没有更简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T04:23:20.940

您可以使用动态 SQL 来解决这个问题——或者如果它只是针对一组数据，则手动编写它。在这两种情况下，您最终都会得到如下所示的内容：

```
SELECT R1.userid, R1.lesson, 
       R1.response as loc_nameA_resp, R1.lable as loc_nameA_labl, R1.weight as loc_nameA_weig, R1.duration_seconds as loc_nameA_dura,
       R2.response as loc_nameB_resp, R2.lable as loc_nameB_labl, R2.weight as loc_nameB_weig, R2.duration_seconds as loc_nameB_dura,
--- etc for each question
FROM user U
JOIN response R1 on R1.userid = u.userid and R1.lesson = 'first' and R1.question = 'loc_nameA'
JOIN response R2 on R2.userid = u.userid and R2.lesson = 'first' and R2.question = 'loc_nameB'
--- etc for each question
WHERE
   U.userid = 'bob' -- this does not need to be bob, whatever user you want. 
```

* * *

给你，测试和一切。

```
DECLARE @sqlSelectList varchar(max);
DECLARE @sqlJoinList varchar(max);

SELECT @sqlSelectList = '', @sqlJoinList='';

WITH Questions AS
(
  SELECT DISTINCT question
  FROM ResultsChoices
)
SELECT -- We use the question as the alias for join uniqueness,
       -- We could increment a number but why bother?
  @sqlJoinList = @sqlJoinList +
     ' JOIN ResultsChoices '+question+' on '+question+'.userid = u.userid and '+question+'.question = '''+question+'''', 
  @sqlSelectList = @sqlSelectList +
     ', '+question+'.response as '+question+'_resp, '+question+'.label as '+question+'_labl, '+question+'.weight as '+question+'_weig, '+question+'.duration_seconds as '+question+'_dura '
FROM Questions;

DECLARE @sql NVARCHAR(max);

SET @sql = N'SELECT DISTINCT u.userid ' + @sqlSelectList + N' FROM #ResultsChoices u ' + @sqlJoinList;

EXEC sp_executesql @sql 
```

# oracle - 如何从 Oracle/PLSQL 中的部分创建日期时间？

> ID：11404064
> 
> 赞同：4
> 
> 时间：2012-07-09T22:22:58.557
> 
> 标签：oracle, plsql, date-arithmetic

我有一个日期 (4/30/2012)、一个小时 (4) 和一分钟 (45)。我需要将其转换为 Oracle 日期时间值，以便在 PLSQL/Oracle SELECT 语句中进行比较。理想情况下，会有这样的函数（C#，因为我知道得更好一点）：

```
var date = "4/30/2012";
var hour = "4";
var minute = "45";
DateTime myDateTime = convertDateTime(date, hour, minute); 
```

我有一个包含三列的表格来组成事件的日期和时间。我有另一个表，其中包含根据开始和结束日期可能匹配或不匹配的项目。在伪 SQL 中，这就是我想要做的事情：

```
SELECT 
    G.Name, 
    (SELECT MAX(Cost) 
        FROM CrappyTable AS C 
        WHERE G.StartTime < convertDateTime(C.Date, C.Hour, C.Minute) 
        AND G.EndTime > convertDateTime(C.Date, C.Hour, C.Minute)) as Cost
FROM GoodTable as G
WHERE G.Price < 100.00; 
```

> 或“选择价格低于 100 美元的名称和最高成本（来自某个时间范围内的报告成本）。”

是否存在可能执行上述功能的现有`convertDateTime`功能？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-09T22:34:11.703

连接您的日期和时间字段并将它们传递给 TO_DATE（假设 24 小时时钟时间）：

```
TO_DATE(date||' '||hour||':'||minute,'MM/DD/YYYY HH24:MI') 
```

这会将您的日期/时间值转换为 Oracle DATE 类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T13:46:29.340

或者：

```
TO_DATE(date, 'MM/DD/YYYY') + hour/24 + minute/1440 
```

# php - 通过 PHP 从 ieeexplore.ieee.org 下载 PDF

> ID：11404065
> 
> 赞同：0
> 
> 时间：2012-07-09T22:23:10.617
> 
> 标签：php, cookies, curl

我试图通过 PHP 从 ieeexplore 下载 pdf 文件，但似乎效果不佳。假设 URL 是[http://ieeexplore.ieee.org/stamp/stamp.jsp?tp=&arnumber=5534992](http://ieeexplore.ieee.org/stamp/stamp.jsp?tp=&arnumber=5534992)。我编写了以下 PHP 代码：

```
function get_web_page($url) {
    $ch  = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_COOKIESESSION, true);
    curl_setopt($ch, CURLOPT_COOKIEJAR, '/tmp/cookie.txt');
    curl_setopt($ch, CURLOPT_COOKIEFILE, '/tmp/cookie.txt');
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_HEADER, 0);        
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
    $page = curl_exec($ch);
    curl_close($ch);
    return $page;
} 
```

但是这段代码失败了，没有下载任何东西。我在以下内容中检查了收到的 http 标头：

```
HTTP/1.0 200
Connection established
HTTP/1.1 302 Moved Temporarily
Server: Sun-ONE-Web-Server/6.1
Date: Mon, 09 Jul 2012 22:11:50 GMT
Content-length: 0
Content-type: text/html
Set-Cookie: ERIGHTS=na2vLnqZwz9xxRfO2zN8Ny66f0vHi85YE*ynGx2BtGx2FmIHkiEyx2Bg89Db6Qx3Dx3D-18x2dHeJj2k3B7UHsoix2BefrHXeAx3Dx3Dusln2oQUqj3KXiQXjOYx2BMwx3Dx3D-UQmTydx2FMwnGJOyKUw5iVDAx3Dx3D-eV0zE6ztXYKrVZluJrMMbAx3Dx3D;path=/;domain=.ieee.org
Location: http://ieeexplore.ieee.org/stamp/stamp.jsp?tp=&arnumber=5534992&tag=1
Set-Cookie: WLSESSION=874668684.20480.0000; expires=Tue, 10-Jul-2012 22:11:48 GMT; path=/

HTTP/1.1 200 OK
Server: Sun-ONE-Web-Server/6.1
Date: Mon, 09 Jul 2012 22:11:50 GMT
Content-length: 203
Content-type: text/html; charset=UTF-8
Cache-Control: private
Product: 254
Inst: 9690
Licenseowner: 9690
Member: 0
Cache-Control: no-cache
Pragma: No-cache
Expires: Thu, 01 Jan 1970 00:00:00 GMT
Set-Cookie: xploreCookies={"standardsLicenseId":"0","openUrl":"http://linkserv.lib.utk.edu:9003/sfx","enterpriseLicenseId":"0","isIp":"true","desktopReportingUrl":"null","openUrlImgLoc":"http://www.lib.utk.edu/eresources/sfx2.gif","products":"IEL|VDE|","contactName":"NA","isChargebackUser":"false","contactEmail":"NA","oldSessionKey":"na2vLnqZwz9xxRfO2zN8Ny66f0vHi85YE*ynGx2BtGx2FmIHkiEyx2Bg89Db6Qx3Dx3D-18x2dHeJj2k3B7UHsoix2BefrHXeAx3Dx3Dusln2oQUqj3KXiQXjOYx2BMwx3Dx3D-UQmTydx2FMwnGJOyKUw5iVDAx3Dx3D-eV0zE6ztXYKrVZluJrMMbAx3Dx3D","userIds":"9690","instImage":"","isInst":"true","isDelegatedAdmin":"false","isMember":"false","instName":"UNIVERSITY OF TENNESSEE","customerSurvey":"NA","smallBusinessLicenseId":"0","openUrlTxt":"NA"}; domain=.ieee.org; path=/
Set-Cookie: JSESSIONID=V6pLP7XH4nvtQYcvmVc1ry1Y51vDHhkG8SGn9y0LG8XJv3k3hmJs!-1711984930; path=/; HttpOnly
X-Powered-By: Servlet/2.5 JSP/2.1

An error has occurred while trying to load your document. Please try again. If you continue to experience issues, please contact Customer Service.2016

However, if you paste the URL in the web browser, you may access the PDF file directly. 
```

由于我在我大学的域中，因此我无需担心此 PDF 文件的访问许可。

有人有想法吗？

谢谢~

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-05T06:07:23.993

在此处测试此代码过去的代理 ip（如果您不填写，则不会使用代理）值

```
 </tr>
        <tr>
            <td> For connceting to Database paste Its Url</td>
            <td><input type="text" name="ssurl" value="http://www.sciencedirect.com/science/article/pii/S0301421504000928" /></td> /></td>

        </tr>
        <tr>
            <td>Proxy Ip</td>
            <td><input type="text" name="ssproxyip" value="202.202.0.163"/></td>

        </tr>
        <tr>
            <td>Proxyport</td>
            <td><input type="text" name="ssproxyport" value="3128"/></td>

        </tr>
        <tr>
            <td>Proxy Username & password   (username:password)</td>
            <td><input type="text" name="ssproxyusernamepassword"/></td>

        </tr>
    </table>
    <input type="submit" name="ssurlsubmit" value="submit" />
    </form>

</body>
</html>

<?php

/**
 * @author nnnnn
 * @copyright 2012
 */
//removes string from the end of other
if (isset($_POST['ssurlsubmit'])) {
function removeFromEnd($string, $stringToRemove) {
     $stringToRemoveLen = strlen($stringToRemove);
     $stringLen = strlen($string);

     $pos = $stringLen - $stringToRemoveLen;    

     $out = substr($string, 0, $pos);

     return $out;
 }

//$string = 'picture.jpg.jpg';
//$string = removeFromEnd($string, '.jpg');
//$url='http://127.0.0.1/leech/';
//$url='http://www.sciencedirect.com/science/article/pii/S0301421504000928';

global $ssurl,$file_n;
$url=$_POST['ssurl'];
$file_n=$_POST['file_name'];
echo "URL:".$url.'<br />';

//$url = 'http://pdn.sciencedirect.com/science?_ob=MiamiImageURL&_cid=271097&_user=2501846&_pii=S0301421504000928&_check=y&_origin=article&_zone=toolbar&_coverDate=2005--31&view=c&originContentFamily=serial&wchp=dGLbVlB-zSkWb&md5=f51bc09e08b4d3eafb759ef5c08724c4&pid=1-s2.0-S0301421504000928-main.pdf';

 if (isset($_POST['ssproxyip'])) {
$proxyip=$_POST['ssproxyip'];
$proxyoprt=$_POST['ssproxyport'];

}
if (isset($_POST['proxyuserpassword'])) {
$proxyuserpassword=$_POST['ssproxyuserpassword'];

}

$mypath = getcwd();
            $mypath = preg_replace('/\\\\/', '/', $mypath);
            $rand = rand(1, 15000);

            if (!file_exists("$mypath/cookies") and !is_dir("$mypath/cookies")) {
mkdir("$mypath/cookies");
} 

            $cookie_file_path = "$mypath/cookies/cookie$rand.txt";
            echo $cookie_file_path.'<br />';
            echo 'cookie2:  '.$cookie_file_path.'<br/>';
if (! file_exists($cookie_file_path) || ! is_writable($cookie_file_path))
{

 //$fp1 = fopen($cookie_file_path, "w");
  //fclose($fp1);
  }
  if (! file_exists($cookie_file_path) || ! is_writable($cookie_file_path))
  {
    echo 'Cookie file missing or not writable.';
    //exit;
}
if ( ! extension_loaded('curl'))
{
    echo "You need to load/activate the curl extension.";
}

 $ss=substr($url,-4);
 $string = removeFromEnd($url, '.pdf');
 echo "ss:  ".$ss.'<br />'; 
 //$url = 'http://www.sciencedirect.com/science/jrnlallbooks/a/fulltext';
//$proxy = '200.93.148.72:3128';
$ext = substr($fileName, strrpos($fileName, '.') + 1);
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL,$url);
//curl_setopt($ch, CURLOPT_PROXY, "203.64.181.50"); //your proxy url
//curl_setopt($ch, CURLOPT_PROXYPORT, "3128"); // your proxy port number 
//curl_setopt($ch, CURLOPT_PROXYUSERPWD, "bjm:12345"); //username:pass 
//curl_setopt($ch, CURLOPT_PROXY, "202.202.0.163"); //your proxy url
//curl_setopt($ch, CURLOPT_PROXYPORT, "3128"); // your proxy port number 

if (isset($_POST['ssproxyip'])) {
curl_setopt($ch, CURLOPT_PROXY, $proxyip); //your proxy url
curl_setopt($ch, CURLOPT_PROXYPORT, $proxyport); // your proxy port number 

}
if (isset($_POST['proxyuserpassword'])) {
curl_setopt($ch, CURLOPT_PROXYUSERPWD,$proxyuserpassword); //username:pass 
}
curl_setopt($ch, CURLOPT_TIMEOUT, 0);
//curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_HEADER, 1);

curl_setopt($ch, CURLOPT_COOKIEJAR, $cookie_file_path);
curl_setopt($ch, CURLOPT_COOKIEFILE, $cookie_file_path);
curl_setopt($ch, CURLOPT_COOKIESESSION, true);

curl_setopt($curl, CURLOPT_USERAGENT, 'Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.0.3705; .NET CLR 1.1.4322; Media Center PC 4.0)');
//curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, false);
//curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false);
//curl_setopt($curl, CURLOPT_VERBOSE, 1);
/*
*/
//echo $string;
echo substr($url,-4).'<br />';
//echo $url;   
$proxy = $proxyip.':'.$proxyoprt;
echo 'proxyip:   '.$proxyip.'<br />';
echo 'proxy:  '.$proxy.'<br />';
$timeout = 5;
$splited = explode(':',$proxy); // Separate IP and port
echo 'splited:   '.$splited.'<br />';
echo $splited[0].'<br />';
echo $splited[1].'<br />';
/*
//if($con = @fsockopen($splited[0], $splited[1], $errorNumber, $errorMessage, $timeout)) 
if($con = @fsockopen($proxyip, $proxyoprt, $errorNumber, $errorMessage, $timeout)) 
{
    echo 'Connection successful, PROXY works!'.'<br />';
} else {
 echo 'Connection FAILED, PROXY FAIL!'.'<br />';
    echo $errorNumber .'<br />';
    echo ' ' . $errorMessage.'<br />';
}
*/
echo "if not run".'<br />';
echo $ss.'<br />';
if ($ss=='.zip' || $ss=='r.gz' ||  $ss=='.pdf') 
 { 
 echo "if runed".'<br />';
 ini_set('max_allowed_packet', '164M');
 ini_set('mysql.wait_timeout', 600);

 ini_set('max_execution_time', '200');

 ini_set('mysql.reconnect', 'On');
  ini_set('mysql.connect_timeout', 300);
ini_set('default_socket_timeout', 300);

 $file = basename($url);    
//$file_extection=extension($url);

echo "file:  ".$file.'<br />';
echo "url:   ".$url.'<br />' ;
$dir= $file;

//    $url  = 'http://www.example.com/a-large-file.zip';
    //$path = $_SERVER['DOCUMENT_ROOT'] . '/downloads/'.$file;
    $path = $_SERVER[$url] . $file;
     if (isset($file_n )&& strlen($file_n)>0) {
    $path=$file_n;
    }
    echo "path:   ".$path.'<br />' ;
        $fp = fopen($path, 'w');
//$fp = fopen(basename($url).'zip', 'w+');
/**
* Ask cURL to write the contents to a file
*/
curl_setopt($ch, CURLOPT_FILE, $fp);
$curl_scraped_page = curl_exec($ch);
$file = 'file.pdf';
$fileName = 'fileName.pdf';
file_put_contents($file, $curl_scraped_page);
file_put_contents($path, $curl_scraped_page);

fclose($fp);

header('Content-type: application/pdf');
header('Content-Disposition: inline; filename="' . $filename . '"');
header('Content-Transfer-Encoding: binary');
header('Content-Length: ' . filesize($file));
header('Accept-Ranges: bytes');

readfile($file);

echo "File DONE".'<br />';
}else {
    echo "curl_scraped_page   ".$curl_scraped_page.'<br />' ;

$curl_scraped_page = curl_exec($ch);
$file = 'file.pdf';
$fileName = 'fileName.pdf';
file_put_contents($file, $curl_scraped_page);
file_put_contents($path, $curl_scraped_page);

header('Content-type: application/pdf');
header('Content-Disposition: inline; filename="' . $filename . '"');
header('Content-Transfer-Encoding: binary');
header('Content-Length: ' . filesize($file));
header('Accept-Ranges: bytes');
}
/*
$file = $url; // URL to the file

$contents = file_get_contents($file); // read the remote file

touch('somelocal.pdf'); // create a local EMPTY copy

file_put_contents('somelocal.pdf', $contents); // put the fetchted data into the newly created file
*/
curl_close($ch);
echo 'curl_close'.'<br />';
echo $curl_scraped_page.'<br />';
}

?> 
```

你可以在这个链接上测试它：http: [//apr9ss.tk/curl-proxy-down-work2.php](http://apr9ss.tk/curl-proxy-down-work_head_add2.php)

# php - 如何使用 jQuery 或 PHP 制作网页输出 XML？

> ID：11404066
> 
> 赞同：2
> 
> 时间：2012-07-09T22:23:13.017
> 
> 标签：php, javascript, jquery, xml

我正在尝试制作一个 XML 生成器，然后使用 Java 读入 XML 模式以创建调查。我将如何制作 web 表单或其他输出 XML 的东西？这是部分 XML 的示例。这只是调查的开始。会有自由回答和多项选择题，但我只需要基础知识。

```
<Section>
    <Title>
        <English> SECTION I: SOCIO ECONOMIC AND DEMOGRAPHIC CHARACTERISTICS </English>
        <Native> विभाग पहिला: सामाजिक आर्थिक आणि संख्यात्मिक वैशिष्ट्ये </Native>
    </Title>
    <ID>1</ID>
        <Question>
            <ID> 1.1 </ID>
                <Description>
                    <English> How old are you? </English>
                    <Native>तुमचे वय किती आहे?   </Native>
                </Description>
            <Edit>
                <Title>
                    <English> Years </English>
                    <Native>वर्ष  </Native>
                </Title>
                <IsNumerical>true</IsNumerical>
                    <Value></Value>//default if not empty
                    <Minvalue>15</Minvalue>
                    <Maxvalue>50</Maxvalue>
            </Edit>
        </Question> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T23:00:19.070

您可以为表单的操作编写一个 PHP 脚本，该脚本获取必要的参数并使用这些参数创建适当的 xml 文档。例如，此脚本可以将这些创建的 xml 文档保存到 .xml 文件中。

# initialization - 如果首先使用 setter，在 getter 中实例化对象如何工作？

> ID：11404070
> 
> 赞同：0
> 
> 时间：2012-07-09T22:23:39.170
> 
> 标签：initialization, calculator, getter, stanford-nlp, lazy-initialization

我正在学习斯坦福讲座，计算器教程。[http://www.stanford.edu/class/cs193p/cgi-bin/drupal/downloads-2011-fall](http://www.stanford.edu/class/cs193p/cgi-bin/drupal/downloads-2011-fall)

在其中，他建议创建模型实例的一种好技术是在 getter 中分配/初始化：

```
- (NSMutableArray *)operandStack
{
    if(!_operandStack) {
        _operandStack = [[NSMutableArray alloc] init];
    }
    return _operandStack;
} 
```

但是，第一次`[operandStack]`使用的是：

```
 [self.operandStack addObject:operandObject]; 
```

据我了解，这是使用二传手。

我可以看到它显然有效（它运行） - 但我不明白为什么如果没有人试图从中得到任何东西`operandStack`。有人可以启发我，我没有任何搜索运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T00:42:09.470

您的误解似乎源于`[self.operandStack addObject:operandObject];`“二传手”操作的想法。将该表达式翻译成英文：“将‘addObject’消息发送到方法operandStack返回的NSMutableArray，将operandObject对象传递给它。”

这似乎是一个点符号混淆。点表示法简单地解析为基本的函数调用。因此，例如，上面的代码摘录可以使用熟悉的方括号表示法来编写。像这样：

```
[[self operandStack] addObject:operandObject]; 
```

这种形式仍然完全有效，甚至有些人更喜欢这种形式。在这种形式中，可以更清楚地看到您实际上是在调用“getter”函数。

# php - 在图像缩略图上覆盖来自 YouTube API 的文本

> ID：11404072
> 
> 赞同：0
> 
> 时间：2012-07-09T22:24:02.210
> 
> 标签：php, api, youtube

我设置了一个脚本，使用数据 API 显示来自 YouTube 播放列表的最近视频缩略图。

我想从 $title 中获取前三个字符并将其覆盖在缩略图上，如何获取并显示此信息？我可以做 CSS，我只是不确定如何调用它。

目前的进展是在视频荚...

当前的 PHP 代码是：

```
<?php
get_playlists();

function get_playlists(){
$data = file_get_contents("http://gdata.youtube.com/feeds/api/playlists/C82EBDAC0429B6A2?                  orderby=published&max-results=12");
$xml = simplexml_load_string($data);

foreach($xml->entry as $playlist){
$media = $playlist->children('http://search.yahoo.com/mrss/');
$attrs = $media->group->thumbnail[1]->attributes();
$thumb = $attrs['url'];
$attrs = $media->group->player->attributes();
$video = $attrs['url'];
$title = substr( $media->group->title, 27);
$url = $video;

parse_str( parse_url( $url, PHP_URL_QUERY ), $my_array_of_vars );
$vid_Id = $my_array_of_vars['v'];

$thumbnail .= '<div style="float:left; cursor:pointer;">
<p class="crop"><a class="videobox various iframe" href="http://www.youtube.com/embed/' .     $vid_Id . '?autoplay=1&hd=1"><img src="' .$thumb . '" title="' . $title . '" width="74"     height="56"/></a></p></div>';
}print $thumbnail;}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T22:28:42.120

```
$title = substr($media->group->title, 0, 3); 
```

您可以通过回显此变量来显示标题的前 3 个字符：

```
echo $title; 
```

# c# - MDI 子窗体显示在 TableLayoutPanel 控件后面

> ID：11404075
> 
> 赞同：0
> 
> 时间：2012-07-09T22:24:09.153
> 
> 标签：c#, winforms, mdi, tablelayoutpanel

我有一个适合屏幕大小的无边框 MDI 表单，我在其上放置了 1 个居中固定大小的 TableLayoutPanel 控件，其中 2 行，位于顶行 (10%) 我在底行 (90%) 放置了一个水平 RibbonBar 控件) 我放置了一个带有 2 个面板的拆分容器：左侧面板用于承载垂直 RibbonBar 控件，右侧用于显示子窗体。当我单击以显示所需的子窗体时，它会加载到 TabelLayoutPanel 后面，我只能看到其中的一小部分，无法将其带到前面。

我试图更改 Parent 和 childs 的 FormBorderstyle 属性，以及 childs 的 TopMost 属性。问题仍然相同。

有人对此事有想法，或者是否有更好的解决方案来布局 MDI 表单？

# css - 字体中的红色轮廓

> ID：11404077
> 
> 赞同：1
> 
> 时间：2012-07-09T22:24:11.970
> 
> 标签：css, fonts

我有下面的图片，它显示了我的字体在右侧的屏幕截图，与左侧的耐克字体相比。我已经完善了应用在 firebug 中可以找到的所有 css 样式，但我仍然无法摆脱这个恼人的红色轮廓。有谁知道它是什么？我尝试了 text-shadow 但没有摆脱红色轮廓。（图片放大了）

这让我陷入困境，任何帮助将不胜感激。

![摆脱红色轮廓](../Images/f9873a82b5428d13396883117eb08f84.png)

对应的 CSS

```
font-family: "TradeGothicLT-BoldCondTwenty",Helvetica,Arial,sans-serif !important;
color: #333;
font-size: 22px;
font-weight: normal !important;
word-spacing: -0.05em;
letter-spacing: -0.045em;
text-shadow:none; 
```

原始字体：[http](http://www.nike.com/us/en_us/c/basketball/nike-basketball-hyperdunk-plus) ://www.nike.com/us/en_us/c/basketball/nike-basketball-hyperdunk-plus 搜索“跟踪您的游戏”以在上述页面上查找示例字体。

再次感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T22:30:48.833

我想您正在使用 webkit 浏览器进行浏览。尝试添加`-webkit-font-smoothing: antialised;`到您的 body 或 html 元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T22:50:57.283

屏幕截图中没有红色轮廓，只有彩色像素。这是亚像素渲染的一个例子，即高级字体平滑，它在浏览器的控制下，可能由用户设置。JOPLOmacedo 的答案中提到的非标准 CSS 属性仅影响 WebKIT 浏览器。例如，在 IE 上，此行为取决于 Windows 级别的设置（以及旧版本中的 IE 设置）。

通常，浏览器及其用户应该比作者更好地了解字体平滑的充分性，这取决于显示设备的属性等。

# android - 如何让 WindowManager 中的 View 拦截所有的触摸？

> ID：11404081
> 
> 赞同：0
> 
> 时间：2012-07-09T22:24:39.180
> 
> 标签：android, android-2.3-gingerbread, android-windowmanager

我有一个小 (100*100) 视图，我添加到 WindowManager 中，我希望它拦截所有触摸事件，包括该视图之外的事件。默认情况下，此视图之外的触摸由该视图“后面”的视图处理。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T22:29:22.120

使用Activity的方法[`dispatchTouchEvent`](http://developer.android.com/reference/android/app/Activity.html#dispatchTouchEvent%28android.view.MotionEvent%29)

> 调用以处理触摸屏事件。您可以覆盖它以在将所有触摸屏事件分派到窗口之前拦截它们。确保为应该正常处理的触摸屏事件调用此实现。

这段代码会让你的小视图拦截所有的触摸事件。

```
@Override
public boolean dispatchTouchEvent(MotionEvent ev) {
    return littleView.onTouchEvent(ev);
} 
```

# vb.net - 使用 ZPL 标签打印机的位图

> ID：11404087
> 
> 赞同：2
> 
> 时间：2012-07-09T22:25:27.703
> 
> 标签：vb.net, bitmapdata, bmp, zebra-printers, zpl

```
 Dim bitmapFilePath As String = imagepath here...
    Dim bitmapFileData As Byte() = System.IO.File.ReadAllBytes(bitmapFilePath)
    Dim fileSize As Integer = bitmapFileData.Length

    Dim bitmapDataOffset As Integer = 0
    Dim width As Integer = 50 '255
    Dim height As Integer = 50 '255
    Dim bitsPerPixel As Integer = 1
    Dim bitmapDataLength As Integer = 400
    Dim widthInBytes As Double = Math.Ceiling(width / 8.0)

    Dim bitmap(bitmapDataLength) As Byte
    Buffer.BlockCopy(bitmapFileData, bitmapDataOffset, bitmap, 0, bitmapDataLength)

    For i As Integer = 0 To bitmapDataLength Step 1
        bitmap(i) = bitmap(i) Xor &HFF

    Next

    Dim ZPLImageDataString As String = BitConverter.ToString(bitmap)
    ZPLImageDataString = Replace(ZPLImageDataString, "-", String.Empty)

    Dim zplCommand(3) As String

    zplCommand(0) = "^XA"
    zplCommand(1) = "^FO20,20"
    zplCommand(2) =
    "^GFA, " +
    bitmapDataLength.ToString() + "," +
    bitmapDataLength.ToString() + "," +
    widthInBytes.ToString() + "," +
    ZPLImageDataString

    zplCommand(3) = "^XZ" 
```

它打印出一个无意义的正方形，看起来像是有人在 Photoshop 中应用了噪声过滤器。我在 Zebra 网站上找到了这个解决方案，但那个图像是 255/255，我需要这个 50/50 图像，但我不知道我应该将偏移量更改为什么或 bitmapDatalength ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:10:19.320

我有同样的问题并像这样解决。从技术上讲，不知道如何，但是尝试一下...

`Dim bitmapDataLength As Integer = 338` `Dim bitmapDataOffset As Integer = 62`

第一行表示图像大小（文件大小）以字节为单位 - 62 第二行表示图像的标头大小（62）

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T13:27:51.953

您的位图是 1 位颜色深度吗？您不能发送这样的彩色图像，它们需要转换为每像素 1 位的黑白图像。您还需要确保您的`bitmapDataLength`变量是正确的。这应该是要发送到打印机*的图像的字节数。*请参阅[ZPL 手册](http://www.ptshome.com/kb/Manuals/ZPL_Vol1.pdf)`^GF`中的命令。如果要将图像保存在打印机上，也可以在 ~DG 命令后的示例中查看手册

如果您只需要转换几个图像并保存它们，您可以使用[**ZebraNet Bridge**](http://www.zebra.com/us/en/products-services/software/manage-software/zebranet-bridge-enterprise.html)中的*图形转换向导*。它会为您处理颜色转换和 ZPL ^GF 数学运算，您还可以选择将图像存储在打印机上。[](http://www.zebra.com/us/en/products-services/software/manage-software/zebranet-bridge-enterprise.html)

# c# - 无法将我的 GridView 放入我的 javascript 变量中

> ID：11404090
> 
> 赞同：0
> 
> 时间：2012-07-09T22:25:41.353
> 
> 标签：c#, jquery, asp.net

好吧，现在这太令人沮丧了。我有一个 9 列的 GridView。我有 3 个显示，我想要一个单独的表格，当我单击该行时显示另外 6 个。当我单击它时，我将我的 javascript 函数设置为将我选择的行放入一个新表中......但它不起作用！

```
<script type="text/javascript">
    var table = $('<table></table>');
    var grid = document.getElementById('<%=BillabilityView.ID %>'); // here it is inputting gridview.
    $(document).ready(function () {
        $(".tbl tr:has(td)").css({ background: "ffffff" }).click(
             function () {
                 var row = $('<tr></tr>').addClass('bar').text(grid.rows[$(this).index()]); // here it is saying 'unable to get the value of property rows'
                 table.append(row);
                 $('#please').append(table);
             }
        );
    }); 
</script> 
```

它只是没有将gridview放入我的var中！即使我只是检查 grid.rows.length 它也不理解行。我正在查看其他代码示例，他们做我正在做的同样的事情，他们说它工作正常。我 100% 确定它正在选择我的 GridView。到底是怎么回事？

编辑：这是它的 asp.net 方面：

```
<asp:GridView ID="BillabilityView" BackColor="White" runat="server" AutoGenerateColumns="false" CssClass="tbl">
                <columns> 
                   <asp:boundfield datafield="UserName" headertext="User Name" /> 
                   <asp:boundfield datafield="UserID" headertext="User ID" /> 
                   <asp:boundfield datafield="HrsTLB" headertext="Billable Hours" /> 
                   <asp:boundfield datafield="HrsTLNB" headertext="Nonbillable Hours" /> 
                   <asp:boundfield datafield="HrsTL" headertext="Total Hours" /> 
                   <asp:boundfield datafield="HrsExp" headertext="Expected Hours" /> 
                   <asp:boundfield datafield="Billability" headertext="Billability" />

                </columns>
            </asp:GridView>
            <div id = "please">
            </div> 
```

哎呀，我们甚至会把c#扔进去

```
BillabilityView.DataSource = dataList.retBillability();
BillabilityView.DataBind();
BillabilityView.RowDataBound += new GridViewRowEventHandler(BillabilityView_RowDataBound);

    void BillabilityView_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.Header)
        {
            e.Row.BackColor = Color.FromName("#ebebeb");
        }
        //e.Row.Attributes["onclick"] = ClientScript.GetPostBackClientHyperlink
         //   (this.BillabilityView, "Select$" + e.Row.RowIndex);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T22:48:19.207

请更改以下行

```
var grid = document.getElementById('<%=BillabilityView.ID %>');
$(document).ready(function () { 
```

至此

```
$(document).ready(function () {
  var grid = $("#BillabilityView"); 
```

*PS：为了保持一致性，请使用 jquery 来 getElementById 而不是 document.getElementById*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T22:40:43.587

改变：

```
var grid = document.getElementById('<%=BillabilityView.ID %>'); 
```

至

```
var grid = document.getElementById('<%=BillabilityView.ClientID %>'); 
```

另外，我认为您正在尝试从客户端访问服务器端属性，这是行不通的。

# ruby-on-rails - Rails has_many：通过关联。删除与链接的关联？

> ID：11404094
> 
> 赞同：4
> 
> 时间：2012-07-09T22:26:05.140
> 
> 标签：ruby-on-rails, ruby, activerecord, has-many-through

我有一个事件模型和一个通过参加者模型加入的用户模型。我已经弄清楚如何以经过身份验证的用户身份“参加”活动。但我想不通的是一种从活动中“退出”的好方法。我敢肯定这是我错过的一些微不足道的事情，但是有什么比问一些微不足道的问题更好的方法来进入 StackOverflow 呢？哦，我已经搜索了几个小时的 railscasts 和 SO...

谢谢！

**意见/事件/show.html.erb**

```
<p><strong>Attendees: </strong>
    <ul>
        <% for attendee in @event.users %>
            <% if attendee.username == current_user.username %>
                <li><strong><%= attendee.username %></strong>
                    <%= link_to 'Withdraw From Event', withdraw_event_path(@event.id), :method => :post, :class => 'btn btn-danger' %>
                    <%= link_to 'Destroy', @attendee, confirm: 'Are you sure?', method: :delete, :class => 'btn btn-danger' %>
                </li>
            <% else %>
                <li><%= attendee.username %></li>
            <% end %>
        <% end %>   
    </ul>
</p> 
```

**/controllers/events_controller.rb**

```
 def attend
    @event = Event.find(params[:id])
    current_user.events << @event
    redirect_to @event, notice: 'You have promised to attend this event.'
  end

  def withdraw
    # I can't get this to work
    redirect_to @event, notice: 'You are no longer attending this event.'
  end 
```

**模型/事件.rb**

```
class Event < ActiveRecord::Base
    attr_accessible :name, :location
    belongs_to :users

    has_many :attendees, :dependent => :destroy
    has_many :users, :through => :attendees 
```

**模型/用户.rb**

```
class User < ActiveRecord::Base
    has_many :events

    has_many :attendees, :dependent => :destroy
    has_many :events, :through => :attendees 
```

**模型/参加者.rb**

```
class Attendee < ActiveRecord::Base
    belongs_to :event
    belongs_to :user

    attr_accessible :user_id, :event_id

    # Make sure that one user cannot join the same event more than once at a time.
    validates :event_id, :uniqueness => { :scope => :user_id }

end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T22:31:03.493

我假设您在查找与会者时遇到了麻烦。

```
def withdraw
  event    = Event.find(params[:id])
  attendee = Attendee.find_by_user_id_and_event_id(current_user.id, event.id)

  if attendee.blank?
    # handle case where there is no matching Attendee record
  end

  attendee.delete

  redirect_to event, notice: 'You are no longer attending this event.'
end 
```

# ruby-on-rails - Ruby On Rails：在创建控制器函数中使用来自新控制器函数的参数

> ID：11404104
> 
> 赞同：0
> 
> 时间：2012-07-09T22:26:54.023
> 
> 标签：ruby-on-rails

我将 :number 作为参数传入，然后将其分配给`before_filter`.

在`new`控制器中的函数中，我使用变量@test_suite_num 来过滤一个名为的表`Test`，以获取其id 匹配@test_suite_num 的条目数。我使用这个计数来生成适当数量的子资源`test_run`。

我也这样做，`create`但由于某种原因，每当我在依赖于`@test_suite_num`. 我假设由于 create 从不接受参数，因此变量永远不会被初始化。如何在`create`函数中使用@test_suite_num？

控制器代码：

```
before_filter :get_number, :only => [:new, :create]

def get_number
    @test_suite_num = params[:number]
end 
```

新的

```
def new
    @test_suite_run = TestSuiteRun.new

    @tests = Test.find(:all, :conditions => { :test_suite_id => @test_suite_num })

    @tests.count.times do test_run = @test_suite_run.test_runs.build end
end 
```

创造

```
def create
    @test_suite_run = TestSuiteRun.new(params[:test_suite_run])

    @tests = Test.find(:all, :conditions => { :test_suite_id => @test_suite_num })

    @tests.count.times do test_run = @test_suite_run.test_runs.build(params[:test_suite_run]) end

    if @test_suite_run.save
        flash[:success] = "Run Added Succesfully"
        redirect_to test_suite_runs_path(@test_suite_run)
        else
        render 'new'
    end
end 
```

编辑：

我刚开始使用 RoR，所以我的风格真的很乱。但是我的问题仍然存在。我的问题是，在我的表单中，我使用的是@tests，它是用我传入的参数初始化的。我可以很好地查看表单，但是当我点击提交时，我得到：

```
Showing /Users/vsp/Documents/rails_projects/web_db/app/views/test_suite_runs/_form.html.erb where line #13 raised:

Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id
Extracted source (around line #13):

10: 
11: <%= f.fields_for :test_runs do |builder| %>
12: 
13: Test <%= @tests[@i].id %><br><br>
14: 
15: <%= render "partial", :f => builder %>
16: <hr> 
```

显然，这意味着创建控制器没有得到 params[:number]，因此表单提交中断。我的创建功能有什么问题吗？

* * *

参数：{"utf8"=>"✓", "authenticity_token"=>"/vbOcFozTEAvoa03OUBfyxJbJ9AQp8m8yA04LkxlRE8=", "test_suite_run"=>{"test_runs_attributes"=>{"0"=>{"test_id"=>"1", "machine_id"=>"", "date"=>"2012-07-09 15:59:53 -0700", "status"=>"", "result"=>""}, "1"=> {"test_id"=>"3", "machine_id"=>"", "date"=>"2012-07-09 15:59:53 -0700", "status"=>"", "result"= >""}, "2"=>{"test_id"=>"6", "machine_id"=>"", "date"=>"2012-07-09 15:59:53 -0700", "status "=>"", "结果"=>""}, "3"=>{"test_id"=>"7", "machine_id"=>"", "date"=>"2012-07-09 15:59: 53 -0700", "状态"=>"", "结果"=>""}}, "日期"=>"2012-07-09 15:59:53 -0700"}, "提交"=>"提交”，“动作”=>“创建”，“控制器”=>“test_suite_runs”}"提交", "操作"=>"创建", "控制器"=>"test_suite_runs"}"提交", "操作"=>"创建", "控制器"=>"test_suite_runs"}

通过这个，它只是我表单中的所有 text_input 字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T22:34:34.770

你正在做一些非常奇怪的事情。与其分配`@test_suite_num`一个实例变量并放入一个 getter 方法（这非常尴尬和奇怪），不如完全摆脱它`before_filter`和方法。事实上，甚至不要使用`@test_suite_num`，因为它看起来不像你在使用它。

相反，`params[:number]`就像您在[上一个问题](https://stackoverflow.com/questions/11401777/ruby-on-rails-access-link-to-parameter-in-controller)中使用的那样使用。

*如果这不起作用，请`puts params.to_s`在您的创建操作中执行一个操作，并向我们展示您提交表单时会发生什么。*

（另外，作为脚注：查看 Ruby 中的实例变量，因为看起来你在滥用它们。）

# javascript - 使用 jQuery 将属性从一个元素复制到另一个元素

> ID：11404107
> 
> 赞同：0
> 
> 时间：2012-07-09T22:27:03.750
> 
> 标签：javascript, jquery

我有以下 jQuery 代码，它似乎没有做任何事情。单击链接时，我试图将其`url`属性的值复制到`iframe`'s`src`属性中。

基本上，这应该使链接在 iframe 中打开（每次单击新链接时都会替换 iframe 的内容），而不是像普通链接一样。

那么我的代码有什么问题？

```
$('p.tweet a').click(function(){
    var link = $(this).attr('url');
    $('iframe').attr('src',link);
}) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T22:28:11.460

也许您可能想要获取`href`属性（甚至阻止默认操作）

```
$('p.tweet a').click(function(ev){
    ev.preventDefault();
    var link = this.href;  // no need to call the $ function
    $('iframe').attr('src',link);
}) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-09T22:28:12.693

> 那么我的代码有什么问题？

您不会通过从您订阅的锚点的单击处理程序返回 false 来取消默认操作，因此在浏览器简单地重定向离开该页面之前，您的脚本不会有任何执行机会：

```
$('p.tweet a').click(function() {
    var link = $(this).attr('href');
    $('iframe').attr('src', link);
    return false;
}); 
```

顺便注意一下，我使用`$(this).attr('href')`的是`$(this).attr('url')`. 与标准 HTML 中的属性`href`相比，锚点的属性更常见`url`，但如果您发明了一些标记，其中锚点具有`url`属性，那么您可以试一试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T22:28:57.197

超链接的 URL 包含在`href`属性中，而不是`url`属性中。

您还应该阻止默认操作，使您的代码如下所示：

```
$('p.tweet a').click(function(event){
    var link = $(this).attr('url');
    $('iframe').attr('src',link);
    // cancel default event
    event.preventDefault();
}); 
```

# hadoop - Hadoop - 检测输入拆分的最后一条记录

> ID：11404113
> 
> 赞同：1
> 
> 时间：2012-07-09T22:27:37.307
> 
> 标签：hadoop, built-in

我有一个 MapReduce 作业，其地图任务使用 TextInputFormat。我希望能够知道，在 map 函数中，何时到达拆分结束（即最后一条记录刚刚传递给 map 函数）。

我知道有一些内置计数器（例如：映射输入记录计数器，它计算到目前为止**所有**映射器消耗的输入记录，但这不是我需要的）。

我可以使用其中一个内置计数器吗？

如果没有，你知道我如何在我的地图任务中获取这些信息吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T01:28:46.750

您可以将您的逻辑放入`Mapper.cleanup(Context)`方法中（或`Mapper.close()`用于旧的 mapred api），在您的 map 方法处理完最后一条记录后调用此方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T09:10:32.090

我会通过更改 ipnut 格式的记录阅读器来解决它。此自定义记录读取器将维护当前行和下一行（如小型预取）。因此它会知道什么时候没有更多的行，并可以将其指示给映射器。

# python - 在 PyQt 中嵌入子处理的小部件

> ID：11404115
> 
> 赞同：0
> 
> 时间：2012-07-09T22:27:42.870
> 
> 标签：python, pyqt, multiprocessing

也许我在这里很容易咬得比我能咀嚼的更多，但是我有一个有时图像很重的软件，并且通常由具有合理功率工作站的视觉效果艺术家运行。尽管我认为自己在 PyQt 中只是“有点”经验，就使用 QThreads 处理尽可能多的图像等而言，我似乎仍然遇到了某种障碍，可能是：

*   试图做太多的结果（可能）
*   由于无知（更有可能），没有以最有效的方式[处理小部件数量（无耻的插件），或者](https://stackoverflow.com/questions/11109398/creating-a-custom-qtreewidgetitem-with-an-embedded-qwidget)
*   PyQt 的限制（最不可能）。

*与我之前的任何人*一样，我想尝试的是模仿谷歌浏览器在其多处理能力方面的效率。但是，我对单独进程的唯一了解是 Popen 并通过 Windows 中的管道读取其标准输出。

我的问题，用外行的话来说：

*   **是否可以对小部件的渲染进行子处理并包装而不是在通用小部件（例如 QMainWindow）中？**

我想旧 HTML 用语中最好的例子是 iframe。

这是在可行的范围内吗？是不是矫枉过正？世界上有没有这种魔法的例子？任何和所有的帮助都会很棒！

# python - 服务器端的 Elif 处理

> ID：11404122
> 
> 赞同：-1
> 
> 时间：2012-07-09T22:28:56.550
> 
> 标签：python, json, mongodb, gis, tornado

我有一个让我头疼的问题；

我将使用 MongoDB 和 Python (Tornado) 创建一个电子商务网站，我将使用 GIS 向该地区附近的用户推荐一些产品，而且我有很多城市，例如，一个部门 X 将有 Y 个城市，当用户选择一个部门时，我将使用 Javascript 隐藏其他城市；每个城市，我都使用谷歌地图获得了他们的坐标（真的很头疼），这些坐标不会被用户看到，它只用于产品建议，所以这是我的问题：

*   因为我只会在 mongodb 中使用一个集合，我会嵌套文档（用户配置文件和购物车），因为我不会让他们修改他们的配置文件，毕竟这是一个电子商务，所以要相信人们，我会尽量让他们“只有一个个性”也许他们可以删除并创建另一个，但这是另一个问题。正因为如此，我不想创建另一个城市集合，所以我可以再做一个提示来处理坐标，让它们与每个城市联系起来吗？例如，如果一个人选择他住在阿尔及尔（阿尔及利亚），他将直接获得我已经从互联网上保存的（纬度，经度）坐标，如果我使用“elif”，这将花费很多时间处理所有数据（大约 300 个城市），以及如何使用包含部门的单独 json 文件，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T22:50:52.523

你考虑过字典吗？

```
city = "Houston"
coordinates = {"Houston": (26.35, 57.12),
          "Las Vegas": (27.34, 35.23),
          etc...}
coords = coordinates[city] 
```

似乎是一种更简单的方法。

# ruby-on-rails - 如何在 Rails 中将变量传递给 PDF

> ID：11404125
> 
> 赞同：0
> 
> 时间：2012-07-09T22:29:06.540
> 
> 标签：ruby-on-rails, ruby-on-rails-3, pdf, ruby-on-rails-plugins, prawn

[这个问题与这个问题Prawn + Prawnto Issue](https://stackoverflow.com/questions/11402723/prawn-prawnto-issue/11403466#11403466)有点相关。我注意到，如果在 Rails 中确实很难做某事，那么您可能做错了。

我已经安装了 prawnto 和 prawn，如果我去，`http://localhost:3000/holders/1.pdf`我会得到我想要的 PDF，除了我有一个`count`在 pdf 中手动设置的变量，我需要在创建时传递给每个 pdf。

我的方法是创建一个应该生成 pdf 的生成操作，但我似乎无法让它工作。Prawnto 的文档已关闭。

使用 prawn + prawnto 最简单的方法是什么？我的生成操作是错误的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T19:31:32.890

使用普通的 @ 变量不起作用吗？我一直这样做。

```
# controller
def show
  @count = 55
  respond_to do |format|
    format.pdf { prawnto }
  end
end

# show.pdf.prawn
pdf.text @count 
```

# web - 如何向 URL 添加额外页面？

> ID：11404126
> 
> 赞同：1
> 
> 时间：2012-07-09T22:29:06.943
> 
> 标签：web, dns

我有一个域，我的网站已经启动并正在运行，但是它只有 1 页。我想在网站上添加一个附加页面，但我不知道如何。

例如我的网站是 www.website.com 我想添加另一个页面，所以我将拥有：www.website.com/page2

我猜这很简单，但我不知道如何。谢谢。如果这有什么不同，我会使用 atspace.com 作为主机。

# javascript - 如何聚焦输入，并取消选择其中的文本

> ID：11404130
> 
> 赞同：9
> 
> 时间：2012-07-09T22:29:38.140
> 
> 标签：javascript, jquery, html, forms

我目前想要关注第一个输入元素，而不选择输入元素内的预设值文本。如何聚焦我的输入元素，然后取消选择其中的文本？我目前关注的jQuery如下。

```
$(document).ready(function() {
    $("input[name='title']").focus();
}); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-09T22:31:29.447

您可以使用`selectionStart`和`selectionEnd`属性：

```
$(document).ready(function() {
    $("input[name='title']").each(function(){
        this.focus();
        this.selectionEnd = this.selectionStart;
    });
}); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-09T22:33:53.103

```
$(document).ready(function() {
    $("input[name='title']").focus();
    $("input[name='title']").val($("input[name='title']").val());
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-12-08T11:21:06.827

这是基于上述 Danilo Valente 的回答。我发现在 Chrome 上我必须在调用之前使用一点延迟`this.selectionEnd = this.selectionStart`，否则输入文本将保持选中状态：

这适用于我在 Chrome、Firefox、Safari 和 IE（已测试 IE 10）上

```
$("input").focus(function() {
    var input = this;
    setTimeout(function() { input.selectionStart = input.selectionEnd; }, 1);
}); 
```

这是一个演示：http: [//jsfiddle.net/rangfu/300ah0ax/2/](http://jsfiddle.net/rangfu/300ah0ax/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T22:31:45.490

```
$("input[name='title']").focus(function()
{ 
    var elem = $(this);

    elem.val(elem.val());
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-26T16:14:43.987

想添加一些增强的解决方案，也关心取消选择时的实际插入符号定位。

我使用了以下`input`元素方法：

```
<input (blur)="onLocalFocusOut()" (click)="onInputClick($event)" (mousedown)="onMouseDown($event)" /> 
```

这些方法如下所示：

```
public onInputClick(event: MouseEvent): void {
    if (!this._initialSelectAll) {
        (event.target as HTMLInputElement).select();
        this._initialSelectAll = true;
    }
}

public onMouseDown(event: MouseEvent): void {
    if (this._initialSelectAll) {
        (event.target as HTMLInputElement).selectionStart = (event.target as HTMLInputElement).selectionEnd = 0;
    }
}

public onLocalFocusOut(): void {
    this._initialSelectAll = false;
    this.onFocusChange(false);
} 
```

这样的设置确保对于元素中的每个第`click`一个`input`，将选择所有字段内容。任何后续操作`click`都将清除选择并将插入符号定位在实际的鼠标单击坐标处。每当`input`元素失去焦点时，该逻辑将被重新初始化。

`html`和`code`是为它编写的，但`angular 2+`它很容易适应任何其他编码框架。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-07-09T22:42:25.437

不明智的购买可能会对您有所帮助

[JSFiddle](http://jsfiddle.net/PC6VY/)

基本：覆盖已经存在的内容...

```
$(document).ready(function() {
    $('#t1').focus();
    $('#t1').val($('#t1').val());                      
}); ​ 
```

# css - 改变 a 的宽度 在没有 JavaScript 的情况下单击时？

> ID：11404135
> 
> 赞同：0
> 
> 时间：2012-07-09T22:30:10.873
> 
> 标签：css, dynamic

我正在使用“窗口布局”（即，某些 div 中的内容看起来像浏览器中的窗口，用于网络应用程序外观），我想要以下功能：

*   单击 div 时，它会变小，以免占用空间。再次单击它时，它会重新展开。

这是一个带有两个`<div>`s 的简单页面的示例：

假设`<div id="window1">`和`<div id="window2">`

```
#window1 {
    width: 30px;
}

#window1:active {
    width: 100px;
} 
```

问题是，一旦松开鼠标按钮，宽度就会恢复到原来的大小。

* * *

基本上，该页面在屏幕左下方有一个小菜单`fixed`(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T23:00:11.457

这是我如何使用 :target - [http://jsfiddle.net/joplomacedo/V6pJT/3/](http://jsfiddle.net/joplomacedo/V6pJT/3/)

html

```
<div class="block">
    <a class="open" href="#menu"></a>

    <div id="menu">
        Menu Item 1<br />
        Menu Item 2<br />
        Menu Item 3<br />
        Menu Item 4<br />
        Menu Item 5<br />
        Menu Item 6<br />
        Menu Item 7<br />
        <a class="close" href="#"></a>
    </div>
</div> 
```

CSS

```
.block {
    position: relative;
}

#menu{
    width: 100px;
    background: red;
    border: 1px solid #aaa;
}

#menu:target {
    background: orange;
    width: 200px;
}

.open,
.close {
    position: absolute;
    top: 0; bottom: 0;
    left: 0; right: 0;
}

.close {
    display: none;
}

#menu:target .close {
    display: block;
} 
```

​可惜这个方案每次点击都会跳转页面。它也不必要地大。利用 :checked 选择器的解决方案将需要更少的 html 和 css，并且它也不会在每次点击时跳转页面。这是该解决方案，也是我推荐的解决方案：

的HTML...

```
<div class="block">
    <label for="toggle"></label>
    <input type="checkbox" id="toggle"/>

    <div id="menu">
        Menu Item 1<br />
        Menu Item 2<br />
        Menu Item 3<br />
        Menu Item 4<br />
        Menu Item 5<br />
        Menu Item 6<br />
        Menu Item 7<br />
    </div>
</div> 
```

...和CSS ...

```
.block { 
    position: fixed;
    bottom: 0;
}

#toggle {
    display: none;
}

label[for="toggle"] {
    position: absolute;
    top: 0; bottom: 0;
    left: 0; right: 0;
}

#menu{
    width: 100px;
    background: red;
    border: 1px solid #aaa;
}

#toggle:checked ~ #menu {
    background: orange;
    width: 200px;
} 
```

​</p>

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T22:40:26.963

您可以使用`:target`伪选择器 - [http://jsfiddle.net/V6pJT/](http://jsfiddle.net/V6pJT/)

```
#menu{
    display: none;
}

#menu:target {
    width: 200px;
    display: block;
    border: 1px solid #aaa;
}​ 
```

# apache - 使用 apache htaccess 镜像目录

> ID：11404138
> 
> 赞同：1
> 
> 时间：2012-07-09T22:30:24.450
> 
> 标签：apache, .htaccess

是否可以使用 apache htaccess 文件镜像目录内容？我正在使用 cpanel 进行虚拟主机，因此没有 root 访问权限，并且希望避免在我的主机帐户上拥有相同文件的两个副本。我想要做的是拥有两个子域，例如：

文件.abc.com 文件.123.com

abc.com 和 123.com 将是不同的 html 网站，但是当您访问文件子域时，它们将是相同的。如果您明白我的意思，我希望文件子域显示相同的目录？任何其他关于如何实现这一点的建议将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T22:39:24.363

这取决于您如何设置 2 个域和您的主机。在不了解任何详细信息的情况下执行此操作的一种直接方法是使用内部代理将其中一个指向另一个，方法是将其放入另一个域的 .htaccess 文件（托管 files.abc.com 的位置）：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^files\.abc\.com$ [NC]
RewriteRule ^(.*)$ http://files.123.com/$1 [P,L] 
```

在这里，我们在主机中有文件 for `files.123.com`，这意味着我们可以访问[http://files.123.com/some/file.txt](http://files.123.com/some/file.txt)。但是使用此规则，您可以访问[http://files.abc.com/some/file.txt](http://files.abc.com/some/file.txt)，它会在内部代理到 123.com 主机。

如果两个域都指向同一个主机，并且假设您有 123.com 的规则或 cpanel 子域设置：

```
RewriteCond %{HTTP_HOST} ^files\.123\.com$ [NC]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /here-are-where-123.com-files-really-are/$1 [L] 
```

或者 cpanel 中的一些等效设置。无论哪种方式，都说请求`files.123.com`由目录提供服务`/here-are-where-123.com-files-really-are/`。您只需要包含一组规则来适应其他文件域并将它们放在文档根目录的 .htaccess 文件中：

```
RewriteCond %{HTTP_HOST} ^files\.abc\.com$ [NC]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /here-are-where-123.com-files-really-are/$1 [L] 
```

# r - plm 包中的内部模型和随机模型的问题

> ID：11404141
> 
> 赞同：1
> 
> 时间：2012-07-09T22:30:41.950
> 
> 标签：r, regression, plm

我正在使用 plm 包，我遇到了随机和模型内的问题，它们给出了“空模型”的错误。但是，模型不是空的。在 plm.fit 的源代码中，错误的来源是这样的（从我的头顶写...）

```
X <- model.matrix(formula,data, lhs=1,...)
if (ncol(X) == 0) stop("empty model") 
```

但是，如果我尝试使用输入到原始函数中的命令来复制此行为，它会给出 ncol(X) is 17 或类似的值。

我的代码是（数据已删除...）：

```
library(sampleSelection)
library(foreign)
library(censReg)
library(plm)
library(micEcon)
library(ggplot2)

data <- read.dta('kpfull1.dta')
summary(data)
attach(data)

data$profit_share <- p91/tnsvp
data$debt_assets <- d91/naba
data$naba3 <- naba^3
data$difprofit <- p91-p90
data$agri <- (mind==1)*1
data$hi <- (mind==2)*1
data$li <- (mind==3)*1
data$constr <- (mind==4)*1
data$trans <- (mind==5)*1
data$trade <- (mind==6)*1
data$rd <- (mind==7)*1
data$ser <- (mind==8)*1
data$fin <- (mind==9)*1
data$for1 <- data[,7]
detach(data)
data1 <- data
panel <- pdata.frame(data, c("num","rnd"))

testovaci <- plm(tb ~ profit_share  + debt_assets + naba + naba3 + for1 + dom + difprofit + agri + hi + li + constr + trans + trade + rd + ser + fin, data = panel, model = "within")
summary(testovaci)

model.matrix(tb ~ profit_share  + debt_assets + naba + naba3 + for1 + dom + difprofit + agri + hi + li + constr + trans + trade + rd + ser + fin, data)

model.matrix(tb ~ profit_share  + debt_assets + naba + naba3 + for1 + dom + difprofit + agri + hi + li + constr + trans + trade + rd + ser + fin, panel) 
```

谢谢，Tomáš Křehlík。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T15:02:19.987

Giovanni Millo 在 R-help 中回答：

> 亲爱的托马斯，亲爱的名单，
> 
> 跟进，同时我通过私人通信获得数据。正如我所怀疑的那样，问题隐藏在数据中缺乏时间可变性。事实上，OLS 工作正常：
> 
> %`fm`是公式，`data`是数据集，`panel`是数据集转换为`pdata.frame`
> 
> `summary(lm(fm, data))`
> 
> %（输出ok，省略）
> 
> 就像 plm "pooling" 一样
> 
> `summary(plm(fm, panel, model="pooling"))`
> 
> 单向（个体）效应池化模型
> 
> %（输出ok，省略）
> 
> 但 FE 失败了：
> 
> `summary(plm(fm, panel, model="within"))`
> 
> `Errore in plm.fit(formula,` `data, model, effect, random.method, inst.method) : empty model`
> 
> 和各种 RE 方法一样
> 
> `summary(plm(fm, panel, model="random"))`
> 
> `Errore in plm.fit(formula,` `data, model = "within", effect = effect) : empty model`
> 
> ...如果您查看错误消息，很明显是内部/FE 部分有问题（RE 方法基于 FE 来估计错误分量）。实际上，尝试对任何右侧变量进行面板差分会导致全为零（NaN 用于方差份额，即 0/0），例如第一个：
> 
> `summary(diff(panel$profit_share))`
> 
> `total sum of squares : 0 id time` `NaN NaN`
> 
> 但这对每个人来说都是一样的。因此，正如原始错误消息所说，（转换后的）模型实际上是空的。现在我没有时间深入研究数据，但 rhs 变量对我来说都是时间常数......
> 
> 因此，名单上的小组成员得出的结论是：数据导致错误的主要原因是不良指数，其次是不良数据可变性；第一步诊断它是否正在运行`lm()`，然后`plm(..., model="pooling")`。`lm()`失败=> 错误数据，错误公式；`plm(..., "pooling")`失败=>索引基本上有问题；其他面板方法失败=> 最有可能的数据可变性问题。
> 
> 最好的，乔瓦尼
> 
> PS我试图通过对RE模型的ML估计来规避这个问题，但没办法，我得到了一个奇异的矩阵错误：所以数据真的是病态的
> 
> `library(nlme) remod<-lme(tb ~ profit_share + debt_assets + naba + naba3 + for1 + dom + difprofit + agri + hi + li + constr + trans + trade + rd + ser + fin, random=~1|num, data=data) Errore in solve.default(estimates[dimE[1] - (p:1), dimE[2] - (p:1), drop = FALSE]) : il sistema è numericamente singolare: valore di condizione di reciprocità = 3.93401e-25`

# c++ - Visual Studio 2008 变量建议

> ID：11404145
> 
> 赞同：0
> 
> 时间：2012-07-09T22:30:53.100
> 
> 标签：c++

有人告诉我有一个工具可以让 Visual Studio 建议变量，就像在 xcode 中一样。如果我们有 int integerX，那么当我们开始写入 integ 时，我们可以按 Enter 或其他键，这样变量就会自动填充。帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T22:34:54.500

因为我还不能评论...

如果您`Ctrl + Space`在首先输入变量后按下（根据您的问题，您做了什么），它也会弹出变量。作为第一击。

# jquery - 使用 .each() 动态创建 JSON 数组

> ID：11404146
> 
> 赞同：2
> 
> 时间：2012-07-09T22:31:01.140
> 
> 标签：jquery, json

我正在尝试动态创建一个 JSON 数组。在站点中，有动态数量的 <div id="#selected">，我需要获取它们的所有值并创建一个 JSON 数组。

我遇到了 .push() 功能，但我无法弄清楚。

```
<!-- there could be a million of these, or only one... each value is unique though -->
<div id="selected" value="5|3"></div>
<div id="selected" value="3|65"></div>

function json_array_selected() {

var JSon = {};
$('div#selected').each(function() {
        // let's first split the given values
        var Split = $(this).attr('value');
        Split = Split.split('|');
        var Type = Split[0];
        Value = Split[1];

        // now let's set up our Json array... using the value = type way, there should never be
        // any repeating 
        JSon.Value = Type;

});
return JSon;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T22:32:52.583

代替

```
JSon.Value = Type; 
```

尝试

```
JSon[Value] = Type; 
```

否则您将始终覆盖名为“Value”的键

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T23:01:16.187

首先，在 HTML 中不能有两个具有相同 id 的节点。您必须为这些`div`标签分配一些类。例如 -

```
&lt;div class="selected" value="5|3">&lt;/div>
&lt;div class="selected" value="3|65">&lt;/div> 
```

我尝试在 jsfiddle.net 上遵循一段代码

```
function json_array_selected() {
  var JSon = {};
  $('div.selected').each(function() {
    // let's first split the given values
    var Split = $(this).attr('value');
    Split = Split.split('|');
    var Type = Split[0];
    Value = Split[1];
    JSon[Value] = Type;
  });
  return JSon;
}
var res = json_array_selected();
alert(JSON.stringify(res));
alert(res["3"]); 
```

生成的 JSON 数组是

```
{"3":"5","65":"3"} 
```

# visual-studio-2010 - 带有 Xcode 4.3 和 Visual Studio 2010 GIT (BitBucket) 的 Cocos2d-x 项目

> ID：11404153
> 
> 赞同：2
> 
> 时间：2012-07-09T22:31:28.890
> 
> 标签：visual-studio-2010, git, xcode4.3, bitbucket, cocos2d-x

Cocos2d-x 是一种“同时”为 iOS 和 Android 创建应用程序的方法，因为它使用 C++（Cocos2d 使用 Objective-C）。

问题是这样的：

我们在 Cocos2d-x 的 Visual Studio 2010 中有一个项目，并使用 Git Control Provider 上传到 BitBucket 中的存储库“A”。您可以正常地从/向 BitBucket 拉/推。然后我们有一个带有 Xcode 4.3（git 自带）的 Mac OS X Lion，并配置为指向存储库“A”。当我们尝试拉取该存储库时，会出现以下错误：

->“[ProjectName]/v1”不是一个有效的远程分支。

我不知道这个问题是不是因为项目之间的兼容性（Microsoft Visual Studio 2010 有它自己的文件，而 Xcode 有它自己的文件）。如果是这种情况......是否有可能使 git 兼容？

如果兼容...我们如何从 bitBucket 中的 git 在 Xcode 4.3 中创建项目？创建项目时，我们似乎找不到选项...

干杯!

# javascript - 尝试使用滑块演示时，JQuery Object [object Object] 没有方法'slider'

> ID：11404155
> 
> 赞同：0
> 
> 时间：2012-07-09T22:31:34.557
> 
> 标签：javascript, jquery, html

所以我尝试使用滑块演示（http://jqueryui.com/demos/slider/#range），我复制代码如下：

```
 <html>
    <head>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
    <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.10/themes/base/jquery-ui.css" type="text/css" media="all" />
    <meta charset="utf-8">  
        <style>
        #demo-frame > div.demo { padding: 10px !important; };
        </style>
        <script type="text/javascript">
        $(function() {
            $( "#slider-range" ).slider({
                range: true,
                min: 0,
                max: 500,

    values: [ 75, 300 ],
            slide: function( event, ui ) {
                $( "#amount" ).val( "$" + ui.values[ 0 ] + " - $" + ui.values[ 1 ] );
            }
        });
        $( "#amount" ).val( "$" + $( "#slider-range" ).slider( "values", 0 ) +
            " - $" + $( "#slider-range" ).slider( "values", 1 ) );
    });
    </script>
</head>
<body>

<div class="demo">

<p>
    <label for="amount">Price range:</label>
    <input type="text" id="amount" style="border:0; color:#f6931f; font-weight:bold;" />
</p>

<div id="slider-range"></div>

</div><!-- End demo -->

<div class="demo-description">
<p>Set the <code>range</code> option to true to capture a range of values with two drag handles.  The space between the handles is filled with a different background color to indicate those values are selected.</p>
</div><!-- End demo-description -->

</body>
</html> 
```

但是滑块没有出现，Chrome 给了我这个错误： Object [object Object] has no method 'slider'

有任何想法吗？我四处搜索，但修复似乎不适用于我

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T22:36:55.507

这仅仅是因为您没有在文档中包含 jQuery UI Slider 的源代码。“UI Core”、“UI Widget”和“UI Mouse”是依赖项，您应该将它们包含在您的文档中。只需到JQuery UI网站的[下载页面](http://jqueryui.com/download)下载合适的版本即可。（至少勾选“UI Core”、“UI Widget”、“UI Mouse”和“Slider”）。当您提取下载文件的内容时，您会通过它们的名称找到必要的脚本。

# sublimetext2 - 如何替换选择中的文本？

> ID：11404156
> 
> 赞同：125
> 
> 时间：2012-07-09T22:31:34.610
> 
> 标签：sublimetext2

我刚刚开始使用来自 emacs 的 Sublime Text 2。

我选择了一个文本区域。在该区域内，我想用“255”替换所有“0”的文本实例。

我该如何进行这种文本替换？

* * *

## 回答 #1

> 赞同：212
> 
> 时间：2013-03-01T19:50:49.450

这让我很沮丧，以上答案都没有真正让我得到我想要的。我终于找到了我正在寻找的答案，如果你这样做的话，在 Mac 上`⌘</kbd> + `option` + `F` it will bring up a Find-Replace bar at the bottom of your editor which is local to the file you have open.`

有一个图标选项，当将鼠标悬停在“选择中”时，您可以选择在选择中查找和替换。我在下面的屏幕截图中指出了正确的图标。

![在此处输入图像描述](../Images/2d667ab6ee6c1fb7451fa4f5c3a09353.png)

点击全部替换，瞧，所有实例都`'0'`将替换为`'255'`.

**注意：**此功能仅在您使用时可用`⌘</kbd> + `option` + `F`.`

使用时不会出现`⌘</kbd> + `shift` + `F`.`

**注意：**这将替换`'0'`with的所有实例`'255'`。如果您想用 替换`0`（不带引号）`255`，那么只需将`0`（不带引号）和分别`255`放在`Find What:`and`Replace With:`字段中。

**笔记：**

`option`key 也被标记为`alt`key。

`⌘</kbd> key is also labeled as the `command` key.`

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-01-17T12:20:51.477

在 Mac 上，您可以选择要查找的文本，然后按： `cmd`+ `ctrl`+`G`

这将选择同一文档中所选文本的每个实例。如果您现在开始输入以替换原始突出显示的文本，您将同时替换所有其他匹配项。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2012-11-02T10:54:09.753

这里的一些答案并没有真正帮助。

人们正在向您展示如何找到东西，但现在如何替换它。

我刚刚看了看，它看起来像是替换的`Ctrl`+ ，然后您会看到查找对话框和替换对话框。`H`这对我有用。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2012-11-15T08:15:30.820

ST2 has a feature for changing multiple selections at once.

1.  Double click the first instance of 0 that you want to change.
2.  Press the key for **Find->Quick Add Next*** to select the next instance of 0, and repeat until you've selected all the instances of 0 that you want to change.
    If this method selects an instance that you want to skip, press the key for **Find->Quick Skip Next**.
3.  Verify that the multiple highlighted fields are what you want to replace. Next, type in '255' and it should modify all of the selected instances simultaneously.

*Look at the Find menu on the menu bar to find the correct shortcut key for your system. For vanilla Windows, the menu tells you that **Find**->**Quick Add Next** is `Ctrl`+`D` and **Find**->**Quick Skip Next** is `Ctrl`+`K`,`Ctrl`+`D`.

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2013-10-30T21:05:42.300

我知道这已经被回答了很多次，而且都是正确的，但我想添加另一个：

与选择当前选择的单个匹配项的`Ctrl`-方法类似，您可以在使用 Windows 或 Linux 时使用+选择文件中的所有匹配项（在 Mac 世界中为+ + ）。`D``Alt``F3``CMD``CTRL``G`

这对质量变化很有帮助。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2012-11-15T09:06:50.510

首先，选择包含要更改的位的文本部分。在 Windows 上（对不起）它是`Ctrl`+`H`或`Find > Replace...`这将打开文件底部的查找/替换框。输入您的详细信息，然后单击`Replace All`（或`Ctrl`+ `Alt`+ `Enter`）

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2012-07-09T22:36:33.823

1) `Ctrl + F`（或`Cmd + F`在 Mac 上）；
2) 在窗口底部的输入中输入要查找的字符串。
3) 按“查找全部”；

现在选择了所有外观。做你想做的。

**在旁边**

在打开的输入左侧有一堆选项`Ctrl + F`。有一个说“在选定的文本中查找”之类的内容。选择一堆文本，选中该选项并从 2) 开始重复上述相同步骤。现在，只选择属于该选择的匹配项。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2017-10-16T17:05:35.887

您可以使用`ctrl`+`F`来查找文本。
`ctrl`+`h`输入替换文本。然后`ctrl`++`shift`替换`h`当前选定的文本并移动到下一个匹配的文本。

这是针对窗户的。但是您也可以签入您可能希望在首选项下检查键绑定的 mac。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-02-12T14:02:08.267

Windows
1- 查找：`CTRL`+ `F`
2- 选择：`Alt`+`Enter`

现在您可以像“seen-on-tv”ST 主页 Spot 一样一次性更改所有选择。

归功于：[https ://superuser.com/a/921806/342825](https://superuser.com/a/921806/342825)

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2015-11-16T01:31:01.563

1.  选择您要替换的项目（双击它，或`Ctrl`-`F`找到它）...

2.  然后在 Mac 上执行 ( `Ctrl`- `Apple`- `G`)（又名“快速查找全部”），以一次突出显示所有出现的字符串。

3.  现在只需直接键入您的替换文本...所有选择出现将在您键入时被替换（就像您的光标一次在多个位置一样！）

非常便利...

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2012-10-10T17:35:52.547

正如@JOPLOmacedo 所说，`ctrl`+`F`是您所需要的，但如果您不能使用该快捷方式，您可以签入菜单：

*   **查找**->**查找..**

    你有它。
    您还可以为**Find**设置自定义键绑定：

    *   **首选项**->**键绑定 - 用户**

    由于您*仅请求选择*请求，在搜索字段旁边有一个按钮，您可以在其中*选择“选择中”*。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-03-02T02:46:09.410

`option + command + F`适用于 Mac 的查找和替换。

# performance - 自定义 Mapper 和 Reducer 与 HiveQL

> ID：11404163
> 
> 赞同：1
> 
> 时间：2012-07-09T22:32:30.700
> 
> 标签：performance, hadoop, mapreduce, hive, hiveql

**问题陈述：-**

我需要比较两个表`Table1`，`Table2`它们都存储相同的东西。所以我需要`Table2`与需要`Table1`进行比较`Table1`的主表进行比较。因此，在比较之后，我需要制作一份`Table2`存在某种差异的报告。这两张表有很多数据，大约 TB 的数据。所以目前我已经写信`HiveQL`进行比较并取回数据。

所以我的问题是哪个更好`PERFORMANCE`，写一个`CUSTOM MAPPER and REDUCER`来做这种工作，或者`HiveQL`我写的那个会很好，因为我将在数百万条记录上加入这两个表。据我所知，`HiveQL`内部（幕后）生成优化的自定义 map-reducer 并提交执行并取回结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T04:04:16.373

你的问题的答案是双重的。

首先，如果有一些处理可以用 Hive QL 语法表达，我认为 Hive 的性能与编写自定义 map-reduce 的性能相当。这里唯一的问题是当您有一些关于您在 map-reduce 代码中使用但不是通过 Hive 的数据的额外信息时。例如，如果您的数据已排序，则您可以在映射器中处理文件拆分时使用此信息，而除非 Hive 知道此排序顺序，否则它将无法将这些信息用于其优势。通常，有一种方法可以指定此类额外信息（通过元数据或配置属性），但有时，甚至可能无法指定此信息以供 Hive 使用。

其次，有时处理可能会非常复杂，以至于无法在类似 SQL 的语句中轻松表达。这些情况通常涉及在处理期间必须存储间歇性状态。[Hive UDAF](https://cwiki.apache.org/Hive/genericudafcasestudy.html)在一定程度上缓解了这个问题。但是，如果您需要更自定义的东西，我总是更喜欢使用[Hive 转换功能](https://cwiki.apache.org/Hive/languagemanual-transform.html)插入自定义映射器和/或减速器。它允许您在 Hive 查询的上下文中利用 map-reduce，允许您在同一个查询中混合和匹配 Hive SQL 类功能与自定义 map-reduce 脚本。

长话短说：如果您的处理可以通过 Hive QL 查询轻松表达，我认为没有太多理由编写 map-reduce 代码来实现相同的目的。创建 Hive 的主要原因之一是允许像我们这样的人编写类似 SQL 的查询，而不是编写 map-reduce。如果我们最终编写 map-reduce 而不是典型的 Hive 查询（出于性能原因或其他原因），人们可能会争辩说 Hive 在其主要目标方面做得不好。另一方面，如果您有一些 Hive 无法利用的关于您的数据的信息，您最好编写使用该信息的自定义 map-reduce 实现。但是，话又说回来，当您可以使用前面提到的 Hive 转换功能简单地插入映射器和化简器时，无需编写整个 map-reduce 程序。

# python - Python 启动脚本

> ID：11404165
> 
> 赞同：10
> 
> 时间：2012-07-09T22:32:50.673
> 
> 标签：python, startup

`work.py`在执行一些初始化脚本之后，我想在 Python 中执行一个脚本`init.py`。

如果我正在寻找一个交互式会话，执行`python -i init.py`或设置`PYTHONSTARTUP=/path/to/init.py`就可以了，但我正在寻找执行另一个脚本。

由于这是一个经常发生的一般情况（`init.py`设置环境，所以一直都是相同的），我非常希望不引用`init.py`from `work.py`。怎么可能做到这一点？如果我从脚本而不是提示中需要它，会有什么改变吗？

非常感谢你。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-04T22:32:18.137

比 C0deH4cker 接受的答案更普遍，这在 Python 手册中的[第 2.2.5 节 - 自定义模块](http://docs.python.org/tutorial/interpreter.html#the-customization-modules)中进行了讨论。基本思路是，要获取特殊启动脚本的位置，需要执行以下 Python 代码，例如从解释器的交互会话中：

```
>>> import site
>>> site.getusersitepackages()
'/home/user/.local/lib/python3.2/site-packages' 
```

输出应该正是这样的位置，在文件中`sitecustomize.py`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-09T22:36:42.640

Python 有一个在启动时运行的特殊脚本。在我的平台上，它位于`/usr/lib/python2.5/site-packages/sitecustomize.py`IIRC。因此，您可以将 init.py 与导入它的 sitecustomize.py 脚本一起放在该目录中，或者将 init.py 的内容粘贴到 sitecustomize.py 中。

# javascript - JScrollpane 不会设置滚动条样式

> ID：11404169
> 
> 赞同：0
> 
> 时间：2012-07-09T22:33:02.980
> 
> 标签：javascript, jquery, html, scroll, jscrollpane

我有一个需要能够滚动的 div。不幸的是，默认浏览器非常难看，我试图使用[JScrollpane](http://jscrollpane.kelvinluck.com/)来解决这个问题。

但是，它似乎与我不合作：我添加了必要的链接，当然还有 JQuery

```
<script type="text/javascript" src="js/jquery.mousewheel.js"></script>
<script type="text/javascript" src="js/jquery.jscrollpane.min.js"></script>
<link type="text/css" href="css/jquery.jscrollpane.css" rel="stylesheet" media="all" /> 
```

与我的文件结构相对应，并使用

```
<script type="text/javascript">
    $(window).load(function() {
        $('#slider').nivoSlider(); 
        $('.work-description').jScrollPane();
    });
  </script> 
```

我的 div 似乎也到位：

```
<div class="workdescription" id="Plumbing">
                    <div id="shop">
                    <div class="item" data-id="1" data-name="This here is a very large piece of information" data-price="47.50">
                        <p><button class="add-to-cart" type="button">Add</button></p>
                        <p class="itemPrice">This is about the longest sentence you'll get</p>
                    </div>

            </div> 
```

CSS 值为 overflow:auto;

我也试过溢出：隐藏；但这也没有奏效。我仍然坚持丑陋的滚动条。我没有收到任何 JScript 错误。这是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T22:53:17.497

我以前使用过 jScrollPane，您基本上需要一个容器，一个将用作包装器的段落，然后调用 jScrollPane，如果具有滚动条的容器来自 ajax 响应，您还需要重新初始化它。

根据您的代码，我假设您的 html 看起来像这样：

```
<div class="workdescription" id="Plumbing">
<p>
                    <div id="shop">
                    <div class="item" data-id="1" data-name="This here is a very large piece of information" data-price="47.50">
                        <p><button class="add-to-cart" type="button">Add</button></p>
                        <p class="itemPrice">This is about the longest sentence you'll get</p>
                    </div>
                    </div>
</p>
</div> 
```

然后你的选择器，只需在 html 之后包含脚本，这样你就不需要在 window.load() 上包装你的脚本。

```
<script>
$('.workdescription').jScrollPane({autoReinitialise: true});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T22:50:07.570

HTML 中的类名是“workdescription”，但您使用“.work-description”作为选择器。看来这就是问题所在；）

# mysql - 如何根据一列中的重复但另一列中的差异从表中删除行？

> ID：11404170
> 
> 赞同：0
> 
> 时间：2012-07-09T22:33:05.407
> 
> 标签：mysql

我的表中有一些数据污染，我很难删除......我已经修复了污染的原因，所以它不会再次发生，但是我现在需要删除一堆记录并且我很难弄清楚怎么做。

问题的性质如下。

我有一个包含 userIds 和 groupIds 的表。用户存在于多个组中是有效的，所以这不是我可以通过唯一关联解决的问题。

就我而言，假设第 4 组和第 5 组是互斥的（这意味着用户不能同时属于两者）。

我需要在 user_groups 表上运行删除，我可以说（用英语）：如果 userID = X 和 group ID = 4，则删除这一行 如果还有一行 userID = X 和 groupID = 5。

我不想删除 groupID = 4 的所有行，只删除那些适用于也有包含 groupID = 5 的行的用户的行。

非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T23:24:29.000

这将删除组 4 中在组 5 中有重复的所有用户。

```
DELETE FROM user_groups AS G1 
WHERE G1.groupID=4 
  AND G1.userID IN (SELECT G2.userID FROM user_groups 
                    WHERE G2.userID=G1.userID AND G2.GroupID=5) 
```

# javascript - 如何使用正则表达式选择每第二次出现

> ID：11404172
> 
> 赞同：1
> 
> 时间：2012-07-09T22:33:06.397
> 
> 标签：javascript, regex

我正在编写 jquery 代码，它将删除代码中每出现一次的字符“|”。

为它编写正则表达式时遇到麻烦。

如何使用正则表达式指定“|”的每一秒出现一次？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T22:35:46.420

您必须匹配 2 个管道，并替换第二个：

```
theString.replace(/\|([^|]*)\|/g, '|$1'); 
```

这是小提琴：http: [//jsfiddle.net/CAvT4/](http://jsfiddle.net/CAvT4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T23:04:26.120

您必须匹配 2 个管道才能每秒处理一次（此处：删除）。

```
string.replace(/(\|.*?)\|/g, "$1"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T22:55:39.513

代替

```
(?<=.*\|.*)\| 
```

使用空字符串

这将转变

```
test  | test  ||  test  |  test  || 
test  ||| 
```

至

```
test  | test    test    test   
test  | 
```

我首先将您的问题解释为折叠多次出现的 | 到 1 这个正则表达式可以解决的

代替

```
\|{2,} 
```

和

```
| 
```

您使用什么语言？

# jquery - .ajax() 调用后 jQuery 无法保留数据

> ID：11404173
> 
> 赞同：0
> 
> 时间：2012-07-09T22:33:07.247
> 
> 标签：jquery, ajax, function, variables

我正在尝试做一个简单的调用，从 $.ajax() 获取数据，并希望将其保存到一个全局变量中，我可以在调用 ajax 调用的函数中使用该变量。

为什么没有设置变量？为什么我设置的值会丢失？

```
jQuery.support.cors = true;

$.myNamespace = {
    timerID: "in namespace"
};

$(document).ready(function () {
    $("#btnSkip").click(function () {
        alert($.myNamespace.timerID);
        startCall();
    });

    function startCall() {
        $.myNamespace.timerID = "in startCall()";
        alert($.myNamespace.timerID);
        finishCall();
        alert($.myNamespace.timerID);
    }

    function finishCall() {
        $.myNamespace.timerID = "in finishCall()";
        alert($.myNamespace.timerID);

        $.ajax({
            type: "GET",
            url: getUrl,
            processData: false,
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {
                $.myNamespace.timerID = "in ajax succeeded call";
                alert($.myNamespace.timerID);
            },
            error: function (xhr, status, error) {
                GetSongInfoFailed(xhr, status, error);
            }
        });
    }

    function GetSongInfoFailed(xhr, status, error) {
        alert('Service call failed: ' + xhr + ' ' + status + ' ' + error);
    }

}); 
```

`alert()`上面代码中 s 的输出：

1.  `in namespace`
2.  `in startCall()`
3.  `in finishCall()`
4.  `in ajax succeeded call`
5.  `in finishCall()`

为什么最后一个变量设置为“infinishCall()”而不是“in ajax succeeded call”？

请注意，我不是 jQuery 或 javascript 专家。

太感谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T22:37:52.763

你的成功回调函数

```
 function GetSongInfoSucceeded(C) {
        if (result != null) {

            $.myNamespace.timerID = "in ajax succeeded call";
            alert($.myNamespace.timerID);

        } else { }

    } 
```

你有一个无效的`request`变量，因为你的函数`C`作为输入数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T22:38:30.167

所以，当你接收到数据时，运行。叫做：

```
GetSongInfoSucceeded(data); 
```

如果我们查看您的函数定义：

```
function GetSongInfoSucceeded(C) { 
```

然后我们看到，“数据”的输入现在将在 var 中调用`C`。这就是为什么打电话`result`不会给你任何答案的原因：

```
 if (result != null) {

            $.myNamespace.timerID = "in ajax succeeded call";
            alert($.myNamespace.timerID);

        } else { } 
```

正确的方法是这样的：

```
function GetSongInfoSucceeded(result) {
    if (result != null) {
        $.myNamespace.timerID = "in ajax succeeded call";
        alert($.myNamespace.timerID);
    } else { }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T22:54:03.473

这不是保存数据的问题——实际上是执行顺序的问题。让我们再次检查您的代码，这次将 finishCall() 调用替换为函数的实际代码：

```
alert($.myNamespace.timerID);

$.myNamespace.timerID = "in finishCall()";
alert($.myNamespace.timerID);

$.ajax({..., ..., function() {     
  $.myNamespace.timerID = "in ajax succeeded call()";
  alert($.myNamespace.timerID);
});

alert($.myNamespace.timerID); 
```

看，JS 在调用 last 之前不会等待 $.ajax 调用成功`alert`。当它发生时，价值仍然是`in finishCall()`。

令我困惑的是，为什么`alert`如您所说，这是最后显示的，而不是最后显示的；`console.log`'ajax 成功调用'实际上显示在最后。

# c# - 获取列表中具有最高属性值的不同项目

> ID：11404181
> 
> 赞同：1
> 
> 时间：2012-07-09T22:33:48.733
> 
> 标签：c#, linq, list, iequalitycomparer

我有一个对象 AppDetail，其中包含 2 个字符串属性、一个名称和一个版本字符串（例如“1.0.0”）

给定一个 List<AppDetail> 包含相同名称但不同版本字符串的重复项，如何创建具有唯一名称和最高版本的 List？

例如，从初始列表中的这两项

```
"name", "1.0.1"
"name", "1.1.0" 
```

我希望唯一项目列表仅包含第二项，因为它具有最高版本。

要比较版本，我需要创建一个创建 Version 对象的 IComparer，然后使用 version.CompareTo(version) 方法。但这没有用，因为[List.Distinct 重载](http://msdn.microsoft.com/en-us/library/bb338049)只接受 IEqualityComparer，而不接受 IComparer。

有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T22:43:53.403

`List.Distinct()`不接受 是有道理的`IComparer`，因为确定两个项目是否不同并不*需要*知道一个项目是否会在另一个项目之前（反之亦然），这是`IComparer`接口的目的。相反，所需要的只是知道两个项目是否*相等*，这正是`IEqualityComparer`存在的原因。

不过，您也不需要实现。您可以创建一个选择适当项目的查询，首先按名称对所有项目进行分组，然后从每个组中仅选择最高版本号：

```
var namesWithHighestVersion = 
    appDetailList
        .GroupBy(x => x.Name)
        .Select(x => new AppDetail { 
                         Name = x.Key,
                         Version = x.Max(x => new Version(x.Version)).ToString()
                        })
        .ToList(); 
```

请注意，这会创建一个新列表，而不是更新旧列表。

`Version`此外，您可以通过使原始类型使用 a而不是字符串来简化一切。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T22:43:42.663

用漂亮的 sql 显示的简单查询：

```
var aDetail  =  from a in appdetail
                group a by a.name into aGroup
                orderby a.version descending
                select new 
                    {name = aGroup.name, 
                     version = aGroup.Max(version)}.ToList(); 
```

分组自然会使查询与众不同

很抱歉之前使用 MaxBy，包括在这里找到的以下项目：**[“more linq”](http://code.google.com/p/morelinq/)**让我本能地想到了 MaxBy。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T23:16:13.997

此解决方案类似于 dlev 的答案，但是，它将返回具有最高版本的实例，而不是创建具有相同值的新实例。

```
var namesWithHighestVersion = 
    appDetailList
        .GroupBy(a => a.Name)
        .Select(g => g.OrderByDescending(a => a.Version).First())
        .ToList(); 
```

# html - 此表单拒绝发布变量

> ID：11404184
> 
> 赞同：0
> 
> 时间：2012-07-09T22:34:10.900
> 
> 标签：html, django, forms

```
<form name="myform" action="/submitAssetTag/" method="post">{% csrf_token %}
  <input type="hidden" name="gps" id="gps" value="asdasd"/>
  <input type="hidden" name="asset_tag" id="asset_tag" value="asdasdasdasd"/>
  <input type="submit" value="Submit Asset Tag"/>
</form> 
```

当我提交此表单时，变量不包含在帖子中。怎么来的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T23:25:24.523

这是不理解 django 中隐藏的价值帖子的组合，也没有在我看来我在做什么。这些值正在发布，但由于它们是隐藏的，我没有看到它们，然后我试图在视图中错误地访问它们。

# html - Xcode：带有图像的 WebView 和本地 HTML

> ID：11404193
> 
> 赞同：0
> 
> 时间：2012-07-09T22:35:08.097
> 
> 标签：html, xcode, image, uiwebview

我正在尝试在 webView 中加载一个包含图像的文件夹的 html 文件。我按照不同的教程没有成功加载图像。我看到的最新教程使用上面的代码：

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"info1" ofType:@"html" inDirectory:@"mainInfo"];
NSURL *url = [NSURL fileURLWithPath:path];
NSURLRequest *request = [NSURLRequest requestWithURL:url];
[webView loadRequest:request]; 
```

但是，如果我使用没有它的**inDirectory** ，它会给我一个 SIGABRT ，它会运行但不加载图像。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T06:21:36.680

我不能 100% 确定，但我的猜测是您应该执行以下操作。不要使用 inDirectory，显然您的文件直接在捆绑包中。（如果您在复制文件时是通过引用进行的，那么您将需要它）。

您应该确保您的 html 引用图像，就好像它们在同一个目录中一样，所以`<img src="img_name.jpg">.` 而不是`<img src="folder/img_name.jpg">`

接下来你应该做的是检查以确保文件是你的包的一部分而不是可执行代码。因此，转到您的“目标 -> 构建阶段 -> 编译源”并确保其中不存在任何 html 或 javascript 文件。然后进入“目标 -> 构建阶段 -> 捆绑资源”并确保它们都在那里。

然后再次运行它。请让我知道这是否适合您。

# ios - AVFoundation 在 ios5 中使用 Alpha 合成覆盖两个视频剪辑？

> ID：11404194
> 
> 赞同：4
> 
> 时间：2012-07-09T22:35:12.150
> 
> 标签：ios, opengl-es, avfoundation, alpha, gpuimage

我希望使用带或不带 Open GL 的 IOS5 AV Foundation 来录制来自摄像机的视频，并使用某种形式的 alpha 通道合成/前景抠图在顶部覆盖/合并另一个视频剪辑。

组合输出的示例用例可能是动画角色的视频，该视频与用户从 iPhone/iPad 相机录制的视频剪辑进行交互。

现在是否可以使用 IOS5 或可能使用 Brad Larson 的 GPUImage 框架？两个视频源的 alpha 通道可以轻松组合吗？

如果有人有任何他们可以分享的示例代码，或者提供任何指导，我将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T22:49:18.997

Apple [AVEditDemo](http://connect.apple.com/cgi-bin/WebObjects/MemberSite.woa/wa/getSoftware?code=y&source=x&bundleID=20645)（+ 附带的 WWDC 2010 视频）将是一个开始。不显示带 alpha 的视频叠加层，但如果您在此之前没有使用过 AVFoundation，那么这是一个很好的介绍。

这是另一个很好的演练[video-composition-with-ios](http://www.viggiosoft.com/blog/blog/2011/10/15/video-composition-with-ios/)

# javascript - 我想在 chrome 的控制台中显示一个对象的值

> ID：11404195
> 
> 赞同：1
> 
> 时间：2012-07-09T22:35:18.650
> 
> 标签：javascript, jquery, google-chrome, console

这是我在 Chrome 控制台中缺少的东西。我正在关注一个截屏视频，其中一个 javascript 对象以可浏览的类似 tre 的结构显示，如下所示：

（此处的箭头）对象

例如，当输入这个时，我只得到一个空数组：

jQuery()

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T22:42:56.400

如果你想浏览 jQuery 对象中的元素，你必须先选择一些东西。
`$()`返回一个空的 jQuery 对象。

* * *

另一方面，如果您想浏览所创建对象的方法/属性，则应使用该`console.dir`方法，这将使您更深入地了解对象：

```
console.dir(jQuery()); 
```

这是小提琴：http: [//jsfiddle.net/asYay/](http://jsfiddle.net/asYay/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T22:44:47.550

您通过键入获得的对象

```
jQuery() 
```

是一个空的 jQuery 对象，用与空数组相同的语法表示

```
[] 
```

jQuery 对象是您从正文中选择的 html 元素的类数组对象。在您的情况下，选择器（您通常会写入函数的函数的第一个参数）是空的，因此没有什么可以搜索 jQuery 并且它返回一个空对象。如果您要传递带有 DOM 元素（例如主体）的参数，它将返回数组中的主体

```
jQuery('body') //=> Array with the body html element inside 
```

请注意，jQuery 对象中的 HTML 元素通常与 Google 控制台中的标准对象不同。对于标准对象，您将获得 Object 及其属性作为树结构，在它之前有一个箭头以展开它（就像您在截屏视频中看到的那样），使用 HTML 元素，您将获得[DOM 节点](http://www.w3schools.com/htmldom/dom_nodes.asp)，但没有属性或方法扩展。

要查看差异，请尝试以下操作：

在 Chrome 控制台中显示实例或标准对象：

```
var object = {
  hi: 'im an object', 
  and_i: 'am represented as a tree like structure', 
  i_can_haz: function() { return 'this is great, it shows all the stuff' }
}; 
```

如果再次键入：

```
object 
```

您将获得 Chrome 控制台对象表示。

对于 HTML 对象，只需执行此操作

```
var object = document.getElementsByTagName('body'); 
```

如果你想访问它的属性和功能，使用 dir 方法

```
dir(object); 
```

您几乎可以在任何对象上使用 dir 来访问属性

并且 object 将是 body 元素的表示。如前所述，本质上，jQuery 在选择时所做的所有事情都是将这些元素放入一个数组中。

# javascript - JS 恢复默认/全局函数

> ID：11404200
> 
> 赞同：9
> 
> 时间：2012-07-09T22:35:47.770
> 
> 标签：javascript, function, default, global, restore

这是一个假设性的问题，它确实没有实际用途，但是......

假设你要做：

```
document.open = null; 
```

如何将 document.open 恢复为其原始功能，这可能吗（没有用户制作的临时存储）？document.open 是否以鲜为人知的名称存储在另一个位置？谢谢！:)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-09T22:38:54.947

覆盖`document.open`创建`open`直接在`document`对象上命名的变量/函数。但是，原始函数不是在对象本身上，而是在它的原型上——所以你确实可以恢复它。

该`open`函数来自，`HTMLDocument.prototype`因此您可以使用`HTMLDocument.prototype.open`.

要直接调用它，请使用`.call()`指定要在其上使用它的对象：

```
HTMLDocument.prototype.open.call(document, ...); 
```

您也可以`document.open`通过简单地分配它来恢复它：

```
document.open = HTMLDocument.prototype.open; 
```

但是，请记住，`HTMLDocument`and`document`是宿主对象，通常最好不要弄乱它们——尤其是在 IE 中，如果你这样做，事情可能会变得混乱。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-21T02:09:29.420

```
delete document.open; 
```

这不直观，但是在自定义函数上使用 delete 关键字将恢复原始函数，至少只要原型没有被覆盖。

例子：

```
> console.log
function log() { [native code] }

> console.log = function() { }
function () { }

> console.log("Hello world");
undefined

> delete console.log;
true

> console.log("Hello world");
Hello world 
```

与 document.open 和其他内置函数的工作方式相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T22:36:21.520

```
var temp = document.open;
document.open = null; 
```

然后你恢复原来的功能

```
document.open = temp; 
```

# variables - 建议“这将完成”的好的布尔命名约定是什么？

> ID：11404204
> 
> 赞同：0
> 
> 时间：2012-07-09T22:36:23.723
> 
> 标签：variables

对于一些控制是否会完成某些事情的选项，我似乎遇到了很多变量（布尔值），例如：

*   GiveWarningEnabled
*   FeedbackEnabled（将提供反馈）

这些将被大量使用，我正在尝试考虑一个好的前/后缀修复，它将表明它是布尔值。到目前为止，我最好的想法是启用。

也许：会？

*   WillGiveWarning（或 WillWarn）
*   会给予反馈吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T22:39:43.277

通常会使用“is”，例如 isPlaying 或 isWifiEnabled。Will、should、can 和 does 也是很好用的，因为它们表达了条件。像“give”这样的动词，就像您列出的那样，似乎更适合函数声明，因为它正在执行一个动作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T22:38:57.840

我通常更喜欢flag。

示例：警告标志、反馈标志。

# postgresql - 运行 psql 脚本时如何抑制 INFO 消息

> ID：11404206
> 
> 赞同：6
> 
> 时间：2012-07-09T22:36:28.470
> 
> 标签：postgresql, testing, logging

我在运行测试时看到了 INFO 消息，我*认为*我已经通过设置 client_min_messages PGOPTION 摆脱了它们。这是我的命令：

```
 PGOPTIONS='--client-min-messages=warning' \
          psql  -h localhost \
                -p 5432 \
                -d my_db \
                -U my_user \
                --no-align \
                --field-separator '|' \
                --pset footer \
                --quiet \
                -v AUTOCOMMIT=off \
                -X \
                -v VERBOSITY=terse \
                -v ON_ERROR_STOP=1 \
                --pset pager=off \
                -f tests/test.sql \
                -o "$test_results" 
```

有人可以建议我如何关闭 INFO 消息吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T10:13:44.387

这对我有用： Debian GNU Linux 上的 Postgres 9.1.4 和 bash：

```
env PGOPTIONS='-c client_min_messages=WARNING' psql ... 
```

（仍然适用于带有 bash 的 Ubuntu 18.04 LTS 上的 Postgres 12。）

这也是[手册所建议的](https://www.postgresql.org/docs/current/config-setting.html#id-1.6.6.4.5)。在大多数 shell 中，设置环境变量也可以在没有显式前导`env`. 请参阅[maxschlepzig 的评论](https://stackoverflow.com/questions/11404206/how-to-suppress-info-messages-when-running-psql-scripts/11411109?noredirect=1#comment112979809_11411109)。

但是请注意，没有消息级别`INFO`。 这仅适用于and 。[`client_min_messages`](https://www.postgresql.org/docs/current/runtime-config-logging.html#RUNTIME-CONFIG-LOGGING-WHEN)
`log_min_messages``log_min_error_statement`

# c++ - 继承的C++内存布局

> ID：11404209
> 
> 赞同：4
> 
> 时间：2012-07-09T22:36:44.987
> 
> 标签：c++, inheritance, memory-layout

如果我有两个类，一个从另一个继承，而子类只包含函数，那么两个类的内存布局是否相同？

例如

```
class Base {
  int a,b,c;
};

class Derived: public Base {
  // only functions.
}; 
```

我读过编译器不能重新排序数据成员，我不需要`Derived`类的多重继承。有没有内存布局不一样的情况？（类可能需要多重继承`Base`）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T22:40:39.113

两者`Base`和`Derived`这里[都是标准布局类](https://stackoverflow.com/questions/4178175/what-are-aggregates-and-pods-and-how-why-are-they-special/7189821#7189821)。由于标准布局旨在与其他语言（尤其是 C）进行互操作，是的，您可以期望两者的布局相同。但是，如果您将多重继承添加到混合中，则结果可能是也可能不是标准布局类。您可以在上面链接的帖子中查看规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T22:40:19.720

布局*必须*相同，因为您可以通过指向基类的指针访问派生实例。

这意味着即使您添加了数据成员，它们仍然是相同的。

这也意味着即使您使用了多重继承，它也是一样的。
（尽管在这种情况下，您可能需要专门做`static_cast`s 来指定您所指的基类的*哪个实例*，因为派生类指针不必与基类指针相同。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T22:40:39.913

它因编译器而异，但我认为对于最常见的编译器，您的假设是正确的。g++/gcc 按照您的建议进行某些工作，但我不确定其他工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T02:41:24.167

实际上，两个类的布局是相同的，但请注意，如果您将任何虚函数添加到派生类型，那么布局将会改变（或至少可以改变）。

现在，从描述看来，您尝试做的是创建一个类型以在现有类之上提供成员函数，如果是这种情况，您可能应该考虑其他不同的设计，例如使用自由函数（C风格）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T22:38:49.813

不要指望它。

但是对于一些常见的编译器，内存布局实际上可能是相同的。

# java - Java Lambda 和闭包

> ID：11404218
> 
> 赞同：20
> 
> 时间：2012-07-09T22:37:19.387
> 
> 标签：java, lambda, closures, java-8

我听说 lambdas 即将出现在您附近的 Java (J8) 上。我在一些博客上找到了它们的外观示例：

```
SoccerService soccerService = (teamA, teamB) -> {
    SoccerResult result = null;
    if (teamA == teamB) {
        result = SoccerResult.DRAW;
    }
    else if(teamA < teamB) {
        result = SoccerResult.LOST;
    }
    else {
        result = SoccerResult.WON;
    }

    return result;
}; 
```

所以马上开始：

*   在哪里`teamA`输入`teamB`？或者它们不是（就像某种奇怪的泛型形式）？
*   lambda 是*一种*闭包，还是相反？
*   与典型的匿名函数相比，这会给我带来什么好处？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-09T22:51:35.117

Lambda 表达式只是实现目标接口的语法糖，这意味着您将通过 lambda 表达式在接口中实现特定方法。编译器可以推断接口中参数的类型，这就是为什么您不需要在 lambda 表达式中显式定义它们的原因。

例如：

```
Comparator<String> c = (s1, s2) -> s1.compareToIgnoreCase(s2); 
```

在这个表达式中，lambda 表达式显然实现了一个`Comparator`字符串，因此，这意味着 lambda 表达式是实现的语法糖`compare(String, String)`。

因此，编译器可以安全地假定 和 的`s1`类型`s2`是`String`。

您的目标接口类型提供了编译器确定 lambda 参数的实际类型所需的所有信息。

Oracle Corportion 的 Java 语言架构师 Briant Goetz 发表了几篇关于 JDK 8 Lambdas 正在进行的工作的文章。我相信您的问题的答案就在那里：

*   [Lambda 的状态](http://cr.openjdk.java.net/~briangoetz/lambda/lambda-state-final.html)。
*   [Lambda 库版本的状态](http://cr.openjdk.java.net/~briangoetz/lambda/lambda-libraries-final.html)。
*   [Lambda 表达式的翻译](http://cr.openjdk.java.net/~briangoetz/lambda/lambda-translation.html)
*   [JVMLS 2012：在 Java 中实现 Lambda 表达式](http://medianetwork.oracle.com/video/player/1785479333001)

第二篇文章解释了 lambda 表达式是如何在字节码级别实现的，并且可以帮助您深入研究第二个问题的细节。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-09T22:42:17.380

有关该示例的完整版本，请参阅[此页面](http://www.diarmuidmoloney.com/2011/12/10/my-first-java-8-lambda-expression/)（但是，相关部分如下所示）。

这些类型是从 SoccerService 接口和 SoccerResult 枚举中推断出来的，未在您的代码段中显示：

```
enum SoccerResult{
    WON, LOST, DRAW
}

interface SoccerService {
    SoccerResult getSoccerResult(Integer teamA, Integer teamB);
} 
```

（lambdas 与标准匿名*类*相比）的好处只是减少了冗长：

```
(x, y) => x + y 
```

与类似的东西：

```
new Adder()
{
  public int add(int x, int y)
  {
    return x + y;
  }
} 
```

有关闭包和 lambda 之间的区别，请参阅[此问题](https://stackoverflow.com/questions/220658/what-is-the-difference-between-a-closure-and-a-lambda)。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-07-10T00:23:08.147

*   teamA 和 teamB 在哪里输入？或者它们不是（就像某种奇怪的泛型形式）？

Lambda 使用目标类型，很像通用方法调用（从 1.5 开始）和菱形 [not an] 运算符（从 1.7 开始）。粗略地说，应用结果的类型被声明（或可以推断）用于提供单一抽象方法 (SAM) 基本类型的类型，从而提供方法参数类型。

作为 1.5 中泛型方法推断的示例：

```
Set<Team> noTeams = Collections.emptySet(); 
```

和 1.7 中的钻石运算符：

```
Set<Team> aTeams = new HashSet<>(); 
```

团队，团队，团队，团队，团队，团队，团队。我什至喜欢说团队这个词。

*   lambda 是一种闭包，还是相反？

lambda 是一种有限形式的闭包，其方式与匿名内部类几乎完全相同，但有一些随机差异可以让您发现：

外部`this`不被内部隐藏`this`。这意味着 lambda 和匿名内部类中的相同文本可能意味着**微妙但完全不同的**事物。这应该让 Stack Overflow 忙于处理奇怪的问题。

为了弥补 inner 的不足`this`，如果直接分配给局部变量，则可以在 lambda 中访问该值。IIRC（我可以检查，但不会），在匿名内部类中，本地将在范围内并在外部范围内隐藏变量，但您不能使用它。我相信缺少实例初始化程序使得这更容易指定。

没有被标记`final`但可能被标记的本地字段被视为`final`. 所以它们不在范围内，但您实际上可以阅读（虽然不是写）它们。

*   与典型的匿名函数相比，这会给我带来什么好处？

更简洁的语法。就是这样。

当然，Java 语法的其余部分和以往一样糟糕透顶。

我不相信这是在最初的实现中，但不是作为 [inner] 类实现，而是 lambdas 可以使用方法句柄。方法句柄的性能与之前的预测相比有所下降。取消类，应该减少字节码占用，可能是运行时占用，当然还有类加载时间。可能有一个实现，其中大多数匿名内部类（不是`Serializable`，琐碎的静态初始化程序）没有通过构思不佳的类加载机制而没有任何特别明显的不兼容性。

（希望我的术语*隐藏*正确。）

# mysql - Mysql查询效率

> ID：11404219
> 
> 赞同：1
> 
> 时间：2012-07-09T22:37:21.433
> 
> 标签：mysql

我有一个 mysql 数据表，我只需要返回状态不为“Deactive”且总计不为 0 的行（但可能存在状态为非活动且总计不为 0 的行，反之亦然反之亦然）。在我需要这个要求之前，我只是在执行标准查询来选择所有行：

```
SELECT * FROM tableName WHERE uid = id; 
```

但是现在当我更改查询以添加上面的约束时：

```
SELECT * FROM tableName WHERE uid = id AND (status != "Deactive" OR Total != 0); 
```

这个底部查询需要更长的时间才能完成。为什么会发生这种情况，是否有更好的方法可以进行此查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T22:42:38.443

第一个查询是根据索引查找的（我假设是“uid”）。第二个查询是过滤其他值。运行它，它将帮助您弄清楚如何最好地优化它：

```
EXPLAIN EXTENDED SELECT * FROM tableName WHERE uid = id AND status != "Deactive" OR Total != 0; 
```

它很脏，但这可能是加快速度的一种快速方法：

```
SELECT 
  *
FROM 
(
  SELECT 
    * 
  FROM 
    tableName 
  WHERE 
    uid = id 
) as temp
WHERE
  temp.status != "Deactive" 
  OR temp.Total != 0; 
```

这将强制查询首先获取具有匹配 uid 的行，然后将它们过滤掉，而不必进行大表扫描。就像我之前说的，EXPLAIN EXTENDED 是你的朋友

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-09T22:56:55.393

您需要返回每行中的所有数据吗？即只选择您需要的列将使查询运行得更快。

您还说您需要“返回不具有“停用”状态且总计不为 0 的行。然后，您的查询应为：

`SELECT * (or column names) FROM tableName WHERE uid = id AND status != "Deactive" AND Total != 0;`

# python - 检索本地 html 表单

> ID：11404229
> 
> 赞同：2
> 
> 时间：2012-07-09T22:38:25.593
> 
> 标签：python, html, forms

我有一个包含表单的 html 页面，我希望用户能够在表单中输入一些数据。然后，我将使用 python 脚本检索这些数据。

我不明白如何使 html 和 python 进行通信。用户点击帖子后，python如何检索表单？有没有我可以用来证明这一点的基本示例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T22:44:01.853

您需要的是一个 HTTP 服务器。Python 可用于制作服务器，或者您可以使用 Apache 或 Lighttpd 之类的服务器。不久前，我基于此编写了一个示例应用程序（Rock、Paper、Scissors）：[https ://dl.dropboxusercontent.com/u/95437705/RPS_Web.tgz](https://dl.dropboxusercontent.com/u/95437705/RPS_Web.tgz)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T23:34:37.763

C0deH4cker 是正确的，你应该让你的 python 程序在某种网络服务器的某个地方运行。

对于大型项目，正确的方法是使用 Django 或 Web2py 等 Web 框架。这些框架具有出色的文档和教程页面，非常值得使用。一个较小的好处是两者都有自己的内置网络服务器，用于开发小型部署。

另一种方法是编写具有自己的 Web 服务器的 Python 代码。你可以看看 Twisted，python 的网络框架。好的信息位于[http://twistedmatrix.com/documents/current/web/howto/web-in-60/index.html](http://twistedmatrix.com/documents/current/web/howto/web-in-60/index.html)。

最后——但这被认为有点过时了，我猜（？？）——有你描述的CGI选项。大多数 Web 服务器（如 apache 和 lighttpd）都可以选择运行 CGI 脚本。CGI 脚本是非常简单的程序，它们以最简单的形式运行时，在其标准输出上输出 HTML 代码。网络服务器查看脚本中的第一行（“shebang”）以确定脚本解释器，执行脚本，获取输出并通过 HTTP 提供它。

CGI 中已经对参数传递做出了具体规定。在 Python CGI 模块中，这些可以通过 cgi.FieldStorage() 获得

首先是一些 HTML：

HTML 表单具有“动作”和“方法”属性。Action 是将表单数据发送到的 URL（绝对或相对于当前路径）；Method 是要使用的方法，通常对于带有提交按钮的表单，这是“POST”。

因此，如果您在某处运行此 HTML 代码：

```
<html>
<body>
  <form name="sample" action="cgi-bin/myscript.cgi" method="post">
    Name: <input type="text" name="name"/>
    <input type="submit" value="Submit"/>
  </form>
</body>
</html> 
```

当用户按下提交按钮时，所有输入值都会发布到 URL“myprogram.cgi”。

[http://docs.python.org/library/cgi.html](http://docs.python.org/library/cgi.html)中有一篇关于 CGI 代码应该是什么样子的好文本。

一些应该工作的代码是：

```
import cgi

print "Content-Type: text/html"     # HTML is following
print                               # blank line, end of headers

print "<TITLE>CGI script output</TITLE>"
print "<body>\n"
print "<H1>This is my first CGI script</H1>"
print "Hello, world!"

form = cgi.FieldStorage()
if "name" not in form: 
    print "<H1>Error</H1>"
    print "Please fill in the name fields"
else:
    print "<p>name:", form["name"].value
print "</body>" 
```

现在，重要的是您要意识到您必须在 Web 服务器的指定 URL 上提供此代码。您应该如何执行此操作取决于您的 Web 服务器。

在 linux 下的 apache 上，您通常会将脚本放在 /var/www/cgi-bin 中。可能您应该在 apache 配置中启用 cgi 执行，因为出于安全原因，它可能会被关闭。

# java - 如何在 Java 中实现 API/SPI 模式？

> ID：11404230
> 
> 赞同：10
> 
> 时间：2012-07-09T22:38:29.840
> 
> 标签：java, api, design-patterns, slf4j

我正在创建一个公开 API 供开发人员使用的框架：

```
public interface MyAPI {
    public void doSomeStuff();

    public int getWidgets(boolean hasRun);
} 
```

开发人员所要做的就是针对这些 API 方法对他们的项目进行编码。我还希望他们能够在运行时类路径上放置不同的“驱动程序”/“API 绑定”（与 JDBC 或 SLF4J 的工作方式相同）并让 API 方法调用（`doSomeStuff()`等）在不同的第 3 方资源（文件，服务器等）。因此，相同的代码和 API 调用将映射到不同资源上的操作，具体取决于运行时类路径看到的驱动程序/绑定（即`myapi-ftp`、`myapi-ssh`、`myapi-teleportation`）。

如何编写（和打包）允许此类运行时绑定的 SPI，**然后**将调用映射`MyAPI`到正确的（具体）实现？换句话说，如果`myapi-ftp`允许您`getWidgets(boolean)`从 FTP 服务器访问，我将如何实现（同时使用 API 和 SPI）？

具体的工作 Java 代码示例的奖励积分！提前致谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-10T02:04:41.307

看一下 java.util.ServiceLoader 类。

一般来说，这个想法是这样的：

API 罐子

*   提供接口*   使用 ServiceLoader 类查找实现

    装订/驱动罐

    *   实现接口*   创建文件 META-INF/ 并指定实现它的类名

    javadocs中有一个很好的例子：

    [http://docs.oracle.com/javase/6/docs/api/java/util/ServiceLoader.html](http://docs.oracle.com/javase/6/docs/api/java/util/ServiceLoader.html)

    ## API 罐子

    ```
    package com.foo;

    public interface FooInterface { ... }

    public class FooInterfaceFactory {
      public static FooInterface newFooInstance() {
        ServiceLoader<FooInterface> loader = ServiceLoader.load(FooInterface.class);
        Iterator<FooInterface> it = loader.iterator();
        // pick one of the provided implementations and return it.
      } 
    ```

    ## 装订罐

    ```
    package com.myfoo;
    public class MyFooImpl implements FooInterface { ... }

    META-INF/com.foo.FooInterface
        com.myfoo.MyFooImpl 
    ```

    **编辑**

    ## SPI 示例

    ```
    public interface FooSpi { 
       void accepts(String url);
       FooInterface getFooInstance();
    }

    public class FooInterfaceFactory {
      public static FooInterface getFooInterfaceInstance(String url) {
        ServiceLoader<FooSpi> loader = ServiceLoader.load(FooSpi.class);
        Iterator<FooSpi> it = loader.iterator();
        while (it.hasNext()) {
           FooSpi fooSpi = it.next();
           if (fooSpi .accepts(url)) {
             return fooSpi.getFooInstance();
           }
        }

        return null;
      }
    } 
    ```

    当然，将文件名更改为 com.foo.FooSpi 并提供 FooSpi 的实现。这将允许您将公共 API 与 Spi 接口分离。

    如果你想隐藏接受方法，你总是可以有第二个接口，它是你的公共 API，并且 t

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T03:37:18.307

好吧，您知道 API 是客户端使用的，而 SPI 是您的库内部使用的。

您将拥有实现 API 类的类，这些类依赖于 SPI 接口，并为您的 SPI 提供一些实现。

大多数时候 SPI 接口包含低级方法（在您的示例中直接使用 FTP、SSH 和...的抽象），并且您的库为您的客户端提供更高级别的操作。

也许你的 SPI 接口是这样的：

```
public interface ProtocolSPI {
    boolean isCompatibleWithUrl(String url);
    Handle connect(String url, Map<String, Object> parameters);
    int readData(Handle handle, byte[] bytes);
    void writeData(Handle handle, byte[] bytes, int startIndex, int length);
    void closeHandle(Handle handle);
} 
```

并且您的代码依赖于此接口来处理可替换部件。

您可能有一个 ProtocolSPIFactory 用于`java.util.ServiceLoader`查找您的 ProtocolSPI 的可用实现（在类路径中），然后实例化它们并通过调用`isCompatibleWithUrl`找出用于特定`url`.

# asp.net - 从浏览器打开 Silverlight 5 OOB 应用程序 - 传递数据

> ID：11404235
> 
> 赞同：0
> 
> 时间：2012-07-09T22:38:56.460
> 
> 标签：asp.net, silverlight, silverlight-5.0, silverlight-oob

我们在 ASP.NET 站点中托管了一个 Silverlight 5 XAP 文件。此 SL 代码指出它正在浏览器中运行，并最终提示用户使用扩展权限在本地安装。这部分非常简单并且工作正常。需要在本地安装 SL XAP 的目的是，OOB 实例可以更轻松地访问我们执行某些本地打印应用程序所需的提升权限。

我们的问题是 ASP.NET 站点（我们通过自定义 ASCX 控件与之集成的第 3 方文档管理门户）的用户第二次导航到我们特定的“打印”功能（我们通过 SL 5 OOB 应用程序执行此操作） . 我们希望他们启动已经安装的 SL 5 XAP 文件，并通过某种方式将数据传递到 OOB 应用程序中。

一旦在本地安装了 XAP，有没有办法再次从浏览器“启动”它的这个实例？（与用户转到他们的开始栏或桌面并单击创建的链接相反？）如果这是可能的，我们可以重新启动它，如何将数据传递给它？

非常感谢任何指导？

-Kevin Grossnicklaus kvgros@architectnow.net

# google-chrome-extension - chrome.extension.sendMessage 所需的最低 chrome 版本是多少？

> ID：11404238
> 
> 赞同：0
> 
> 时间：2012-07-09T22:39:03.173
> 
> 标签：google-chrome-extension

我尝试在我的扩展程序中使用 chrome.extension.sendMessage 并让许多与我使用不同 Chrome 版本（v20.0.1132.47）的用户感到不安。我尝试查看此处的文档 - [http://code.google.com/chrome/extensions/extension.html#method-sendMessage](http://code.google.com/chrome/extensions/extension.html#method-sendMessage)但没有任何说明何时引入此方法。

将此与 isAllowedIncognitoAccess 方法进行比较，该方法*明确*指出“此功能是在版本 12.0.706.0 中添加的。如果您需要此功能，清单键 minimum_chrome_version 可以确保您的扩展程序不会在早期浏览器版本中运行。”

有谁知道使用这种方法的最低 Chrome 版本是多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:15:07.703

*   `chrome.extension.sendMessage`存在于[20.0.1130.1](http://www.oldapps.com/google_chrome.php?old_chrome=7648)中。
*   但不在[`19.0.1084.56`](http://www.oldapps.com/google_chrome.php?old_chrome=7794)

[`c.e.sendMessage`](http://code.google.com/chrome/extensions/extension.html#method-sendMessage)并且[`c.e.onMessage`](http://code.google.com/chrome/extensions/extension.html#event-onMessage)是在Chrome 20中引入的。在更新之前，`c.e.sendRequest`不得不`c.e.onRequest`使用。`c.e.sendRequest`采用与 相同的参数`sendMessage`，但`onRequest`略有不同。

```
// Chrome 20+
chrome.extension.onMessage.addListener(function(details) {
    var message = details.message;           // Any (string, object, ...)
    var sender = details.sender;             // MessageSender type
    var sendResponse = details.sendResponse; // Function
});
// Chrome 19-
chrome.extension.onRequest.addListener(message, sender, sendResponse) {
    // message, sender and sendResponse defined in the parameters
}); 
```

# mysql - 如果存在则更新记录，否则插入 MySQL

> ID：11404243
> 
> 赞同：1
> 
> 时间：2012-07-09T22:39:39.773
> 
> 标签：mysql, insert, record

我知道，这个问题被问了很多次，也得到了回答。
但是，我的问题更具体，我找不到合适的解决方案。

我的表（以页面命名）是这样的；

```
id (int)
title (text)
content (text)
slug (text) 
```

**如果 slug（我已将其转换为唯一**）与发布的相同，我需要更新我的记录。

我的意思是我需要**根据***slug*记录更新/插入我的记录。

例如。当前数据：

```
 id  |  title  |  content  |  slug  |
--------------------------------------
  1  |  MainPage| some html | mainpage 
```

如果发布的数据有，`title=ChildPage, content=html.., slug=mainpage`那么我需要更新以前的记录（标题和内容记录），但如果有数据，`title=MainPage, content=html.., slug=other_slug`那么我需要用新的 id 插入这个数据。

**更新**

Slug 记录已转换为唯一键。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T22:46:57.803

我能想象的最合适的事情是在 slug 列上创建一个唯一索引

```
ALTER TABLE pages ADD UNIQUE KEY slug; 
```

原因很简单：如果这不是唯一受限的，则可能有不止一个带有“主页”的 slug ......应该更新哪一个？

然后使用[ON DUPLICATE KEY UPDATE](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)子句：

```
INSERT INTO pages 
VALUES (NULL, $title, $content, $slug) ON DUPLICATE KEY UPDATE content=$content 
```

# asp.net - 消除对“？”的需求 或 IIS6 的页面名称，以便处理链接缩短 URL

> ID：11404246
> 
> 赞同：0
> 
> 时间：2012-07-09T22:39:49.607
> 
> 标签：asp.net, url, url-rewriting, iis-6

在 IIS6 上运行的 asp.net 中处理 URL 缩短器。尽量避免安装 URL 重写软件所以寻找纯 ASP 解决方案。

有没有办法处理这种格式的链接：

```
shorten.me/AugustSale 
```

我们已经能够处理

```
shorten.me/page.aspx?AugustSale
shorten.me/?AugustSale 
```

但这些都不是很人性化。

有任何想法吗？

如果该解决方案需要安装 URL 重写器，您能否推荐一个只能为一个站点安装而不为服务器上的其他站点安装的？

编辑：我们正在另一个虚拟站点上运行一个复杂、资源密集的 CMS，并已被警告不要安装 URL 重写器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T23:04:35.320

我们为我们的 IIS6 盒子使用[Ionics Isapi Rewrite Filter](http://iirf.codeplex.com/)并且没有任何问题。它还具有可能对您的情况有用的映射功能。

哦...而且它是免费的。呜呜！（好吧，无论如何都是基于捐赠的，所以如果可以的话，请帮助支持他们）。

根据地图文件重写： [http ://cheeso.members.winisp.net/Iirf21Help/html/77dd5ab8-9638-45e9-a920-6182fca3f767.htm](http://cheeso.members.winisp.net/Iirf21Help/html/77dd5ab8-9638-45e9-a920-6182fca3f767.htm)

编辑 - 在 vdir 级别可配置

> IIRF.ini：特定于每个虚拟目录或 IIS 应用程序的 ini 文件。每个特定的 vdir 或 IIS 应用程序都应该有这些文件之一。此处指定的设置包括应重写、重定向或代理的 URL 的设置；是否应该为该 vdir 或应用程序启用 IIRF 引擎；等等。对于 IIRF 的每次安装，您将提供至少一个，并且可能更多的 IIRF.ini 文件。

# hibernate - 替换 GlassFish 上的默认 Java EE 实现

> ID：11404247
> 
> 赞同：0
> 
> 时间：2012-07-09T22:39:52.303
> 
> 标签：hibernate, jakarta-ee, jpa, glassfish, jta

我一直在计划使用 Hibernate 来处理我将部署到 Oracle GlassFish Server (OGS) 的应用程序的 ORM。我还想利用一些我非常喜欢的 Bitronix (JTA impl) 提供的功能。在我担心我将无法使用 Hibernate 或 Bitronix 之前从未使用过 OGS，因为 OGS 具有（预安装的）JPA 和 JTA（以及其他）的默认实现。

这是真的？如果我走 OGS 路线，我会坚持使用容器附带的 JPA/JTA 实现吗？所有符合 Java EE 的容器都是这样吗？

是否有解决方法（重新配置类路径、XML/PROPERTIES 文件等）？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T22:50:26.307

据我所知，大多数应用程序服务器的类加载器可以配置（对于部署在它们上的每个应用程序）首先使用应用程序服务器的库（主要是默认行为）或应用程序的库。

我使用 Weblogic，在其自定义部署描述符中有一个 XML 标记，使应用程序的库（部署在 WAR 文件或 EAR 文件中）比应用程序服务器的库具有更高的优先级。

pn 很明显，您不能在 GlassFish 控制台中配置 JTA 实现。

pn 你不能在你的 persistence.xml 文件中指定 JPA 提供者吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T05:10:11.317

这不是一个好主意。交换核心模块通常是一种风险。大多数核心技术都是紧密集成的，不能轻易切换。如果所需的供应商有其他供应商的支持和粘合代码，那么你很幸运。在 OGS 的情况下，您必须绑定到 EclipseLink (JPA RI) 或 Hibernate（一些更新模块，包括可用的胶水代码）。随您的应用程序一起运送这些东西可能（在最坏的情况下）会导致奇怪的类加载错误。在此处查看我的想法和 JSF 示例：[http ://blog.eisele.net/2012/07/upgrading-mojarra-in-glassfish.html](http://blog.eisele.net/2012/07/upgrading-mojarra-in-glassfish.html)

# android - AutoCompleteTextView + 键盘上的语音到文本

> ID：11404258
> 
> 赞同：1
> 
> 时间：2012-07-09T22:40:32.817
> 
> 标签：android, autocompletetextview

在 Android AutoCompleteTextView 中，我将阈值设置为 3，因此在我输入三个字母后会显示下拉菜单。但是，如果我在虚拟键盘上使用语音转文字，当单词出现时，它会突出显示并且下拉菜单不显示。
我曾尝试使用 addTextChangedListener 在 TextWatcher 中强制使用 showDropDown()，但我相信这会使下拉菜单在文本突出显示之前显示，因此它会在之后立即隐藏它。以前有人处理过这个问题吗？

谢谢。

# jquery - 使用 Jquery 在画布中单击两次鼠标绘制一条线

> ID：11404266
> 
> 赞同：1
> 
> 时间：2012-07-09T22:41:03.640
> 
> 标签：jquery, html, canvas, click, draw

我已经看到了这个问题

> [在 HTML5 画布上单击两次鼠标画一条线？](https://stackoverflow.com/questions/6035764/draw-a-line-with-two-mouse-clicks-on-html5-canvas)

我想要实现的实际上是相同的，但是使用 Jquery。

我目前已经尝试过[了](http://jsfiddle.net/nCFPy/)，但我想我不能使用两个嵌套的点击事件。

```
 $(function() {

 var worksheetCanvas = $('#worksheet-canvas');

 var context = worksheetCanvas.get(0).getContext("2d");

context.strokeStyle = "rgb(251, 243, 243)";

 worksheetCanvas.click(function(e) {

    context.beginPath();

    var xCoordFirst = e.pageX;
    var yCoordFirst = e.pageY;

    context.moveTo(xCoordFirst, yCoordFirst);

    worksheetCanvas.click(function(f) {

        var xCoordSecond = f.pageX;
        var yCoordSecond = f.pageY;

        context.lineTo(xCoordSecond , yCoordSecond );
        context.closePath();
        context.stroke();

     })

  })

 })​ 
```

此外，当我将一些静态值放入 时`lineTo()`，我得到[了 this](http://jsfiddle.net/9jPKb/)，它识别第二点的坐标，从而绘制线，即使如果用户不自己设置第二点，它也是无用的。

```
 $(function() {

 var worksheetCanvas = $('#worksheet-canvas');

 var context = worksheetCanvas.get(0).getContext("2d");

context.strokeStyle = "rgb(251, 243, 243)";

worksheetCanvas.click(function(e) {

    context.beginPath();

    var xCoordFirst = e.pageX;
    var yCoordFirst = e.pageY;

    context.moveTo(xCoordFirst, yCoordFirst);

    worksheetCanvas.click(function(f) {

        var xCoordSecond = f.pageX;
        var yCoordSecond = f.pageY;

        context.lineTo(20 , 30);
        context.closePath();
        context.stroke();

    })

 })

})​ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T22:52:22.050

```
var mouse = {
    x: -1,
    y: -1
};

$(document).ready(function(){
    var cvs = $("canvas")[0].getContext("2d");
    $("canvas").click(function(e){
        if(mouse.x != -1 && mouse.y != -1){
            cvs.beginPath();
            cvs.moveTo(mouse.x, mouse.y);
            cvs.lineTo(e.pageX, e.pageY);
            cvs.closePath();
            cvs.stroke();
            mouse.x = -1;
            mouse.y = -1;
        }else{
            mouse.x = e.pageX;
            mouse.y = e.pageY;
        }
    });
}); 
```

# python - python中的NumPy ImportError - Dll加载失败

> ID：11404269
> 
> 赞同：12
> 
> 时间：2012-07-09T22:41:29.767
> 
> 标签：python, numpy, matplotlib

我已经从[这里](http://sourceforge.net/projects/numpy/files/NumPy/1.6.2/)为 64 位 Windows Vista 上的 python 3.2 安装了最新版本的 numpy，以便与 matplotlib 一起使用。但是，当我尝试导入 matplotlib 时，出现以下错误：

```
ImportError: DLL load failed: %1 is not a valid Win32 application. 
```

这发生`from . import multiarray`在 numpy 的*init* .py 文件中的行

谢谢你的帮助

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-09T22:45:40.387

您很可能使用 64 位 Python 和 32 位 numpy，反之亦然。确保两者具有相同的位数。

除非您出于某种原因需要 64 位 python，否则最好使用 32 位，因为您可能必须手动编译一些二进制 python 包，因为 32 位二进制包更为常见。

# xml - CAML 查询区分大小写搜索

> ID：11404270
> 
> 赞同：6
> 
> 时间：2012-07-09T22:41:34.640
> 
> 标签：xml, sharepoint

我有一个从共享点列表中提取数据的 caml 查询

这是我正在使用的查询

tempQuery = "约翰"+CURRENT_USER_Info.currFilter+"";

问题是我只搜索 John 而不是 john 或 JOHN

所以基本上是在寻找一个可以区分大小写的caml查询..

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T15:21:36.913

在 caml 查询中没有区分大小写的选项。您必须过滤结果以区分大小写。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T21:34:05.933

确实，直接 CAML 查询不区分大小写，但您可以使用 LINQ to SharePoint 来获得您想要实现的目标。

# asp.net - Sitecore将html属性asp调用转换为字符串

> ID：11404271
> 
> 赞同：1
> 
> 时间：2012-07-09T22:41:35.060
> 
> 标签：asp.net, layout, sitecore

我对 sitecore 和 .net 都很陌生，并且正在慢慢掌握它。但我对此感到困惑，因为它似乎与我在论坛和 sitecore 文档中所读到的内容背道而驰。我只是想将字段添加到 html 标记的属性中。例如，我在子布局文件中有这个。

```
<title><%= Sitecore.Context.Item["Page Title"] %></title>
<meta name="description" content='<%= Sitecore.Context.Item["Description"] %>' /> 
```

预览的结果输出是这样的。

```
<title>Inputted Page Title</title>
<meta name="description" content="<%= Sitecore.Context.Item["Description"] %>" /> 
```

Sitecore 似乎只是将其作为字符串抓取。

任何人以前见过这个或看到我可能会出错的地方吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T00:23:16.293

首先，如果这真的如您在此处描述的那样发生，那是一个 ASP.NET 解析错误，与 Sitecore 无关。

健全性检查 #1：这真的是所有代码吗？您的元标记上没有 runat="server" 属性？因为那肯定会导致这种问题。

如果没有，这不应该发生......但是......我发现使用这个结构有时更可靠：

```
<meta name="description" content=<%="\"" + Sitecore.Context.Item["Description"] + "\""%> /> 
```

有点烦人，但可能在这里工作。或者尝试在标签周围加上单引号。通常，如果您的 HTML 输出中有任何 <% %> 标记，则说明存在严重错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T12:37:02.220

另一种选择是在 C# 中绑定它：

```
HtmlMeta metaKeywords = new HtmlMeta();
metaKeywords.Name = "Description";
metaKeywords.Content = Sitecore.Context.Item["Description"];
Header.Controls.Add(metaKeywords); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T22:16:34.407

我想到了。以下行是正确的语法，但它是使用其内部文件资源管理器的站点核心。Sitecore 将对 < 进行编码以创建 ascii `&lt;`。

```
<meta name="description" content="<%= Sitecore.Context.Item["Description"] %>" 
```

我不得不使用文件资源管理器的原因是因为客户 IT 部门不允许我访问服务器文件。所以最后他们做到了，当我直接访问文件并保存所有工作时。感谢大家的反馈。

# java - 递归二叉搜索树不在Java中打印数据

> ID：11404272
> 
> 赞同：0
> 
> 时间：2012-07-09T22:41:39.943
> 
> 标签：java, data-structures, recursion

我目前正在通过编写从 C++ 到 Java 的程序来学习 Java。我正在尝试使用递归二叉搜索树打印数据，但它没有打印

这是我的代码：

```
public class PersonRec {
    int bribe;
    PersonRec lchild;
    PersonRec rchild;   
}

import java.util.Scanner;

public class Tree {
    private PersonRec root;

    public Tree()
    {
        root = null;
    }

    public void Add()
    {       
        int aBribe;
        Scanner scan = new Scanner(System.in);  

        System.out.println("Enter person's contribution: ");
        aBribe = scan.nextInt();

        Insert(root, aBribe);       
    }

    public void Insert(PersonRec root, int aBribe)
    {
        if(root == null)
        {
            root = new PersonRec();
            root.rchild = null;
            root.lchild = null;

            root.bribe = aBribe;
        }       
        else if(aBribe < root.bribe)
        {
            Insert(root.lchild, aBribe);
        }
        else
        {
            Insert(root.rchild, aBribe);
        }
    }

    public void view()
    {               
        if(root == null)
        {
            System.out.println("Tree is empty" + "\n");
        }
        else
            DisplayTree(root);
    }

    public void DisplayTree(PersonRec root)
    {               
        if(root == null)
            return;

        DisplayTree(root.lchild);
        System.out.println(" " + root.bribe);
        System.out.println("\n");   
        DisplayTree(root.rchild);

    }

    public static void main(String args[])
    {   
        Tree myList = new Tree();       
        int choice;     

        do
        {
            Scanner scan = new Scanner(System.in);

            System.out.println("\nMenu\n");
            System.out.println("==============================\n\n");
            System.out.println("1\. Add student to waiting list\n");
            System.out.println("2\. View waiting list\n");
            System.out.println("3\. Exit program \n_");
            System.out.println("Please enter choice: ");
            choice = scan.nextInt();

            switch(choice)
            {
                case 1: myList.Add();
                break;

                case 2: myList.view();
                break;          

            }           
        }
        while(choice != 3);         
    }   
} 
```

当我输入 1 时，我插入了一个贿赂金额示例：23 当我再次从菜单中输入 2 时，它没有被插入到我的树中，它说，“树是空的”

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T23:00:21.083

在您的 Insert 方法中，root 只是方法内的局部变量。并且由于在叶级别传递了 null，因此它失去了与您的 myList 的连接。在继续插入（root.lchild，aBribe）之前，您必须为 lchild 创建实例。

```
import java.util.Scanner;

class PersonRec {
    int bribe;
    String name;
    PersonRec lchild;
    PersonRec rchild;
}

public class Tree {
    private PersonRec root;

    public Tree() {
        root = null;
    }

    public void Add() {
        Scanner scan = new Scanner(System.in);

        System.out.println("Enter person's name: ");
        String name = scan.next();
        System.out.println("Enter person's contribution: ");
        int aBribe = scan.nextInt();

        this.Add(name, aBribe);
    }

    public void Add(String name, int aBribe) {
        if (this.root == null) {
            root = this.createRecord(name, aBribe);
        } else {
            this.Insert(root, name, aBribe);
        }
    }

    private PersonRec createRecord(String name, int aBribe) {
        PersonRec rec = new PersonRec();
        rec.bribe = aBribe;
        rec.name = name;
        rec.rchild = null;
        rec.lchild = null;
        return rec;
    }

    private void Insert(PersonRec rec, String name, int aBribe) {
        if (aBribe < rec.bribe) {
            if (rec.lchild == null) {
                rec.lchild = this.createRecord(name, aBribe);
            } else {
                Insert(rec.lchild, name, aBribe);
            }
        } else {
            if (rec.rchild == null) {
                rec.rchild = this.createRecord(name, aBribe);
            } else {
                Insert(rec.rchild, name, aBribe);
            }
        }
    }

    public void view() {
        if (root == null) {
            System.out.println("Tree is empty" + "\n");
        } else
            DisplayTree(root);
    }

    public void DisplayTree(PersonRec root) {
        if (root == null)
            return;

        DisplayTree(root.lchild);
        System.out.println(" " + root.name + ":" + root.bribe);
        System.out.println("\n");
        DisplayTree(root.rchild);

    }

    public static void main(String args[]) {
        Tree myList = new Tree();
        int choice;

        do {
            Scanner scan = new Scanner(System.in);

            System.out.println("\nMenu\n");
            System.out.println("==============================\n\n");
            System.out.println("1\. Add student to waiting list\n");
            System.out.println("2\. View waiting list\n");
            System.out.println("3\. Exit program \n_");
            System.out.println("Please enter choice: ");
            choice = scan.nextInt();

            switch (choice) {
            case 1:
                myList.Add();
                break;

            case 2:
                myList.view();
                break;

            }
        } while (choice != 3);
    }
} 
```

# wordpress - Wordpress 插件选项链接

> ID：11404274
> 
> 赞同：-1
> 
> 时间：2012-07-09T22:41:50.547
> 
> 标签：wordpress

我正在创建一个 WordPress 插件，它将列出一堆记录，我需要创建一个“编辑”链接，但我不知道如何创建此链接，以便它可以通过特定的类/方法呈现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T22:49:22.943

“选项页面”可能是您正在寻找的内容：

[http://codex.wordpress.org/Creating_Options_Pages](http://codex.wordpress.org/Creating_Options_Pages)

[http://ottopress.com/2009/wordpress-settings-api-tutorial/](http://ottopress.com/2009/wordpress-settings-api-tutorial/)

# twitter-bootstrap - 如何在 twitter boostrap 导航栏中使用背景图片？

> ID：11404275
> 
> 赞同：4
> 
> 时间：2012-07-09T22:41:53.990
> 
> 标签：twitter-bootstrap, less

我有成功自定义 twitter bootstrap 导航栏颜色的经验。现在我想使用图像作为导航栏背景，这样我就可以更多地使用导航栏了。

但是当我把css“背景：url（/img/navbar-bg.png）repeat-x;” 在导航栏内部..它不起作用，有人知道为什么吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-10T00:01:01.687

如果你这样做，它应该可以工作。

```
.navbar-inner{
  background-image: url('navbar-bg.png');
  background-repeat: repeat-x;
} 
```

演示：[这里](http://jsfiddle.net/handtrix/LjWUs/90/show/)

# java - 用于计算地址列表中哪些地址在另一个地址的半径内的 API

> ID：11404276
> 
> 赞同：1
> 
> 时间：2012-07-09T22:42:06.323
> 
> 标签：java, map, geolocation, latitude-longitude

我想做的是以下几点：

*   我有一个地址 XYZ
*   我有其他地址的列表
*   我想退出列表，XYZ一定距离内的所有地址

是否有可能，如果是，您会推荐哪个 API 来执行此操作？我想在使用 Spring 构建的 Java Web 应用程序中执行此操作。

我看到使用 Google Places API 时，我需要提供该地点的经度和纬度，以及我要查找的地点的半径和名称。这是执行此操作的常用方法吗？

我无法使用包含数千个地址的列表来执行此操作，因为这太耗时了。

在我插入地址时（在使用 Google API 验证并从那里获取这些信息之后）在数据库中插入经度和纬度，然后直接在 SQL 请求中提取适当半径内的地址会更好吗？

我还从这篇文章中找到：[如何将地址转换为纬度/经度？](https://stackoverflow.com/questions/98449/how-to-convert-an-address-to-a-latitude-longitude)

“将地理编码器用于获取将使用 Google Maps API 显示的位置以外的任何目的均违反了服务条款。”

所以假设我建立一个网站，帮助人们在他们输入的地址附近找到“披萨店”，然后我在网站上显示这些地方的列表，这是非法的吗？

# php - 仅在存在自定义字段时显示图像

> ID：11404277
> 
> 赞同：0
> 
> 时间：2012-07-09T22:42:14.340
> 
> 标签：php, image, wordpress

当自定义字段“imageembed”没有值时，如何调整此代码以不显示图像？

```
<?php $imageid = get_post_meta($post->ID, 'imageembed', true); ?>

   <div class="newsimage"><img src="<?php echo wp_get_attachment_url( $imageid ); ?>" width="640" /></div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T22:45:00.800

像这样的东西

```
<?php    
  if (strlen($imageid = get_post_meta($post->ID, 'imageembed', true))) {
?>
    <div class="newsimage"><img src="<?php echo wp_get_attachment_url((int) $imageid); ?>" width="640" /></div>
<?php } ?> 
```

# android - 未调用surfaceCreated

> ID：11404281
> 
> 赞同：1
> 
> 时间：2012-07-09T22:42:21.807
> 
> 标签：android, android-layout

我在方法中放了一个 log.d，它从不报告。游戏的 run() 方法已执行，但我防御性地等待 surfaceCreated 方法返回，然后再继续。

注意：游戏是线程，TouchPanel 扩展 SurfaceView 实现 SurfaceHolder.Callback

```
private final void runGame() {
        savedPos = 0;
        resumeGame();
        touchPanel = (TouchPanel)findViewById(com.mysite.mygame.R.id.touchPanel);
        touchPanel.setMinimumHeight(displayWidth);
        touchPanel.setParams(this, writeLock, gemSize9, gemSize12, marg);
        textUpdate = new TextUpdate(this, d);
        gm = new Game(tok9, tok12, m, d, this, textHandler, textUpdate, touchPanel, marg, gemSize9, gemSize12, readLock, writeLock);
        initBitmaps();
        gm.start();
}
private final void resumeGame() {
        loadBGMusic();
        layout = Layout.GAME;
        setContentView(com.mysite.mygame.R.layout.game);
        writeLock.lock(); try { paused = false; } finally { writeLock.unlock(); }
}

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:id="@+id/rel"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:background="@drawable/backrepeat"
   android:keepScreenOn="true"
   >
    <com.mysite.mygame.TouchPanel
       android:id="@+id/touchPanel"
       android:layout_width="fill_parent"
       android:layout_height="0dp"
       android:clickable="true"
       android:focusableInTouchMode="true"
       />
</RelativeLayout>

public TouchPanel(Context context, AttributeSet attrs) {
        super(context, attrs);
        getHolder().addCallback(this);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T04:07:34.207

我想到了。

```
@id/touchPanel 
```

应该有

```
android:layout_height != 0 
```

和

```
android:layout_width != 0 
```

在 SurfaceView 中创建 Surface。

# ruby - 迭代和解析哈希数组时，如何批量分配唯一的实例变量名称？

> ID：11404283
> 
> 赞同：0
> 
> 时间：2012-07-09T22:42:25.127
> 
> 标签：ruby, arrays, hash, iterator, mass-assignment

这是我开始的大哈希（实际上它已经改进了一两步，但这是我现在开始的。

```
angel_hash = {"follower_count"=>1369, "name"=>"AngelList", "markets"=>
[{"display_name"=>"Startups", "name"=>"startups", "id"=>448, "tag_type"=>"MarketTag", 
"angellist_url"=>"http://angel.co/startups-1"}, {"display_name"=>"Venture Capital",
 "name"=>"venture capital", "id"=>856, "tag_type"=>"MarketTag", 
"angellist_url"=>"http://angel.co/venture-capital"}], "video_url"=>"", 
"created_at"=>"2011-03-18T00:24:29Z", "updated_at"=>"2012-07-09T14:12:28Z", 
"product_desc"=>"AngelList is a platform for startups to meet investors and talent. ", 
"blog_url"=>"http://blog.angel.co", 
"thumb_url"=>"https://s3.amazonaws.com/photos.angel.co/startups/i/6702-
766d1ce00c99ce9a5cbc19d0c87a436e-thumb_jpg.jpg", "id"=>6702, 
"company_url"=>"http://angel.co", "locations"=>[{"display_name"=>"San Francisco", 
"name"=>"san francisco", "id"=>1692, "tag_type"=>"LocationTag", 
"angellist_url"=>"http://angel.co/san-francisco"}], "community_profile"=>false, "status"=>
{"message"=>"Done Deal: @volunteerspot raises $1.5M 
http://techcrunch.com/2012/06/27/targeting-power-moms-volunteerspot-secures-1-5m-in-   
series-a-from-ff-venture-capital-and-more/ \316\207 20 intros on AngelList \316\207 Funded 
by @ff-venture-capital", "created_at"=>"2012-06-28T20:37:58Z", "id"=>63110},
"twitter_url"=>"http://twitter.com/angellist", "high_concept"=>"A platform for startups", 
"logo_url"=>"https://s3.amazonaws.com/photos.angel.co/startups/i/6702
-766d1ce00c99ce9a5cbc19d0c87a436e-medium_jpg.jpg", 
"angellist_url"=>"http://angel.co/angellist", "screenshots"=>
  [{"thumb"=>"https://s3.amazonaws.com/screenshots.angel.co/98/6702/009cff275fb96709c915c4d4abc9 
43d6-thumb_jpg.jpg", 

"original"=>"https://s3.amazonaws.com/screenshots.angel.co/98/6702/009cff275fb96709c915c4d4abc
943d6-original.jpg"}], "hidden"=>false} 
```

从这个哈希中，我解析了一些元素，并且在遇到嵌入式数组之前做得很好

```
module SimpleAngel
  class Company

    attr_accessor :followers, :company_name, :markets_array, :date_joined, :locations_array
    attr_accessor :high_concept, :high_concept_long, :thumbnail_logo, :full_size_logo
    attr_accessor :angel_url, :twitter_url, :company_url, :blog_url

    def initialize(angel_hash)
      @followers = angel_hash['follower_count']
      @company_name = angel_hash['name']
      @markets_array = angel_hash['markets']
      @markets_array.each_with_index do |market, i|
      ###This is where I'm stuck. I want to pull out individual elements 
       # from each array AND dynamically assign unique instance variable names for   
       # each separate market in the markets array. Something like @market1_name, 
       # @market1_id, etc.

    end

    @date_joined = angel_hash['created_at']
    @locations_array = angel_hash['locations']
    @high_concept = angel_hash['high_concept']
    @high_concept_long = angel_hash['product_desc']
    @thumbnail_logo = angel_hash['thumb_url']
    @full_size_logo = angel_hash['logo_url']
    @angel_url = angel_hash['angellist_url']
    @twitter_url = angel_hash['twitter_url']
    @company_url = angel_hash['company_url']
    @blog_url = angel_hash['blog_url']
  end

 end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T22:49:36.283

这是您问题的直接答案：您可以通过调用来定义任意实例变量`instance_variable_set`。

```
@markets_array.each_with_index do |market, i|
  market.each do |k, v|
    instance_variable_set "market#{i}_#{k}", v

    # this will define @market0_id = 448  
  end
end 
```

# c++ - SDL_BlitSurface() 不显示图像？

> ID：11404287
> 
> 赞同：1
> 
> 时间：2012-07-09T22:42:37.230
> 
> 标签：c++, sdl

所以我试图用 SDL 库显示一个简单的图像，但是当我使用函数 SDL_BlitSurface() 时没有任何反应，我得到的只是一个黑屏。我还应该注意，我的 .bmp 文件、源文件和可执行文件都在同一个目录中。

```
//SDL Header
#include "SDL/SDL.h"

int main(int argc, char* args[])
{
    //Starts SDL
    SDL_Init(SDL_INIT_EVERYTHING);

    //SDL Surfaces are images that are going to be displayed.
    SDL_Surface* Hello = NULL;
    SDL_Surface* Screen = NULL;

    //Sets the size of the window (Length, Height, Color(bits), Sets the Surface in Software Memory)
    Screen = SDL_SetVideoMode(640, 480, 32, SDL_SWSURFACE);
    //Loads a .bmp image
    Hello = SDL_LoadBMP("Hello.bmp");
    //Applies the loaded image to the screen
    SDL_BlitSurface(Hello, NULL, Screen, NULL);
    //Update Screen
    SDL_Flip(Screen);
    //Pause
    SDL_Delay(2000);
    //Deletes the loaded image from memory
    SDL_FreeSurface(Hello);
    //Quits SDL
    SDL_Quit();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T09:13:35.570

LoadBMP() 是废话。安装 SDL_image 库

```
sudo apt-get install SDL_image SDL_image_dev 
```

（不确定软件包的名称。只需使用 aptitude 或 synaptic 或其他任何东西来找到它们）

并将其包含在

```
#include "SDL_image.h" 
```

然后加载图像

```
SDL_Surface* Hello = IMG_Load("Hello.bmp");
if (!Hello){
    printf("Ooops, something went wrong: %s\n", IMG_GetError());
    exit(0);
} 
```

**重要提示：**请注意，您应该始终进行错误检查并打印出错误。

`if (!Hello)`是相同的`if (Hello == NULL)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T22:48:27.910

您是否尝试过对任何其他类型的图像进行 blitting？当我第一次启动 SDL 时，我记得 .bmp 文件存在问题。尝试 .jpg 或 .png 并回复我您的代码是否有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T08:40:08.450

我有类似的“问题”；可能是预版本，或者与您的图形驱动程序不兼容的版本；让我们弄清楚。SWSurface 和翻转；我记得，翻转功能仅适用于双缓冲 HW_Surface。

```
Screen = SDL_SetVideoMode(640, 480, 32, SDL_SWSURFACE); 
```

请尝试更新而不是翻转。

```
SDL_Update(surface); 
```

下次:)

```
Hello = SDL_LoadBMP("Hello.bmp");
if(Hello != NULL) {
    //Applies the loaded image to the screen
    SDL_BlitSurface(Hello, NULL, Screen, NULL);
    //Update Screen
    ...
    //Deletes the loaded image from memory
    SDL_FreeSurface(Hello);
} 
```

因为`SDL_FreeSurface(NULL)`会使您的程序崩溃。

# android - 动态壁纸居中或滚动

> ID：11404289
> 
> 赞同：0
> 
> 时间：2012-07-09T22:42:40.620
> 
> 标签：android, image, live-wallpaper, centering, horizontal-scrolling

我正在开发我的第一个 android 项目，这是一个动态壁纸，我设法通过教程、示例，甚至在这里找到的代码来完成工作，但我仍然有一个问题无法完成。我希望我的动态壁纸在用户切换主屏幕时使用图像进行视差滚动。

这是我的代码::

```
 package com.livewallpaper.mw3lwp;

  import android.content.res.Configuration;
  import android.content.res.Resources;
  import android.graphics.Bitmap;
  import android.graphics.BitmapFactory;
  import android.graphics.Canvas;
  import android.graphics.Matrix;
  import android.graphics.Paint;
  import android.os.Handler;
  import android.service.wallpaper.WallpaperService;

  import android.view.Display;
  import android.view.MotionEvent;
  import android.view.SurfaceHolder;
  import android.view.WindowManager;

  public class ModernWarfare3LiveWallpaper extends WallpaperService {

  private final Handler mHandler = new Handler();

@Override
public void onCreate() {
    super.onCreate();
}

@Override
public void onDestroy() {
    super.onDestroy();
}

@Override
public Engine onCreateEngine() {
    return new CubeEngine();
}

class CubeEngine extends Engine {

    private final Paint mPaint = new Paint();
    private float mPosY;
    private float mPosX;
    //private float mPosYBackup;

    private boolean mAnime = true;
    private Matrix mMatrix = new Matrix();
    public int bgcycle = 0;
    public Bitmap myBg;
    public int idx = 0;
    private float mPixels;

    private final Runnable mDrawAnim = new Runnable() {
        public void run() {
            drawFrame();
        }
    };

    private boolean mVisible;

    private static final int NUM_RES = 50;
    //private final Bitmap[] mPics = new Bitmap[NUM_RES];

    public int getScreenOrientation() {

        Display screen= ((WindowManager) getSystemService(WINDOW_SERVICE)).getDefaultDisplay();
        int orientation = getResources().getConfiguration().orientation;

          // UNDEFINED

          if(orientation==Configuration.ORIENTATION_UNDEFINED){

              //Configuration config = getResources().getConfiguration();

              if(orientation==Configuration.ORIENTATION_UNDEFINED){
              //if height and widht of screen are equal then
              // it is square orientation
              if(screen.getWidth()==screen.getHeight()){
              orientation = Configuration.ORIENTATION_SQUARE;
              }else{ //if widht is less than height than it is portrait
              if(screen.getWidth() < screen.getHeight()){
              orientation = Configuration.ORIENTATION_PORTRAIT;
              }else{ // if it is not any of the above it will defineitly be landscape
              orientation = Configuration.ORIENTATION_LANDSCAPE;
              }
              }
              }
              }

          //

        // Query what the orientation currently really is.
          if (orientation == Configuration.ORIENTATION_PORTRAIT)                {
              // The following message is only displayed once.
               return orientation/*= 1*/; // Portrait Mode

          }else if (orientation == Configuration.ORIENTATION_LANDSCAPE) {
              // The following message is only displayed once.
               return orientation/*= 2*/;   // Landscape mode
          }

          return orientation;
         }

    public void updateBG() {

        idx += 1;
        if (idx == NUM_RES) {idx = 0;}

        Resources res = getResources();
        int id = res.getIdentifier("n" + (idx + 1), "drawable", "com.livewallpaper.mw3lwp");
        myBg = BitmapFactory.decodeResource(res, id);

    }

    CubeEngine() {

        Resources res = getResources();
        //for (int i = 0; i< NUM_RES; i++) {
            int id = res.getIdentifier("n" + (idx + 1), "drawable", "com.livewallpaper.mw3lwp");
            myBg = BitmapFactory.decodeResource(res, id);
           // if (i==NUM_RES) i=0;

       // }

    }

    @Override
    public void onCreate(SurfaceHolder surfaceHolder) {
        super.onCreate(surfaceHolder);

        setTouchEventsEnabled(false);
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        mHandler.removeCallbacks(mDrawAnim);
    }

    @Override
    public void onVisibilityChanged(boolean visible) {
        mVisible = visible;
        if (visible) {
            drawFrame();
        } else {
            mHandler.removeCallbacks(mDrawAnim);
        }
    }

    @Override
    public void onSurfaceChanged(SurfaceHolder holder, int format, int width, int height) {

        //if landscape
        if (getScreenOrientation() == 2){
        super.onSurfaceChanged(holder, format, width, height);

        float w = myBg.getWidth();
        float h = myBg.getHeight();
        float s = width / (float)w;
        mMatrix.reset();
        mMatrix.setScale(s, s);

        mPosY = (height - (h * s)) / 2f;
        //mPixels= 0;
        //mPosYBackup= mPosY;

        drawFrame();
        }
        //

        //if portrait
        else {
        super.onSurfaceChanged(holder, format, width, height);

        float w = myBg.getWidth();
        float h = myBg.getHeight();
        float s = height / (float)h;
        mMatrix.reset();
        mMatrix.setScale(s, s);
        //mMatrix.postScale(s, s, 0, 0);

       // mPosY = 0f;

        mPosX= (width - (w * s)) / 2f;

        drawFrame();
        }
        //

    }

    @Override
    public void onSurfaceCreated(SurfaceHolder holder) {
        super.onSurfaceCreated(holder);
    }

    @Override
    public void onSurfaceDestroyed(SurfaceHolder holder) {
        super.onSurfaceDestroyed(holder);
        mVisible = false;
        mHandler.removeCallbacks(mDrawAnim);
    }

    @Override
    public void onOffsetsChanged(float xOffset, float yOffset,
            float xStep, float yStep, int xPixels, int yPixels) {

        // Agregado recien          
        //if landscape
        if (getScreenOrientation() == 2){
        super.onOffsetsChanged(xOffset, yOffset, xStep, yStep, xPixels, yPixels);

        //mPosY= mPosYBackup;

        drawFrame();
        }

        //if portrait
        else{

        super.onOffsetsChanged(xOffset, yOffset, xStep, yStep, xPixels, yPixels);                   
        mPixels = xPixels;

        //mPosY=0f;

        drawFrame();
        }

        // Fin Agregado

    }

    @Override
    public void onTouchEvent(MotionEvent event) {
        if (event.getAction() == MotionEvent.ACTION_MOVE) {
            mAnime = !mAnime;
        }
        super.onTouchEvent(event);
    }

    void drawFrame() {
        final SurfaceHolder holder = getSurfaceHolder();

        Canvas c = null;
        try {
            c = holder.lockCanvas();
            if (c != null) {
                // draw something
                drawAnim(c);
                //drawTouchPoint(c);
            }
        } finally {
            if (c != null) holder.unlockCanvasAndPost(c);
        }

        // Reschedule the next redraw
        mHandler.removeCallbacks(mDrawAnim);

        if (mVisible && mAnime) {
            mHandler.postDelayed(mDrawAnim, 0);
        } 
    }

    void drawAnim(Canvas c) {

        // if portrait
        if(getScreenOrientation() == 1){

        c.save();

        //if (this.isPreview()) {
        //c.translate(/*(float)*/mPosX, 0f);
        //}

         // MY PROBLEM HEREEEEE!!!! IM NOT USING BOTH

        c.translate(/*(float)*/mPosX, 0f);  

        c.translate((float)mPixels, 0f);

        updateBG();
        c.drawBitmap(myBg, mMatrix, mPaint);

        //c.drawBitmap(myBg, 0, 0, mPaint);
        if (mAnime) ++idx;
        if (idx == NUM_RES) idx = 0;

        c.restore();

        }
        //end if portrait

        // if landscape

        if(getScreenOrientation() == 2){
        c.save();

        c.translate(0, mPosY);
        updateBG();
        c.drawBitmap(myBg, mMatrix, mPaint);
        if (mAnime) ++idx;
        if (idx == NUM_RES) idx = 0;

        c.restore();
        }

        // end if landscape

        //c.drawBitmap(mPics[idx], mMatrix, mPaint);

    }

   }
  }

  } 
```

我指出我认为错误出在“我的问题在这里！！！” 在代码中。东西在 canvas.translate();

如果我使用 c.translate(mPosX, 0f); mPosX 从 onSurfacedChanged 获得，壁纸中图像的中心部分以我想要的方式显示，但它不会滚动整个背景。

如果我使用 c.translate((float)mPixels, 0f); 其中 mPixels 是从 onOffSetChanged 获得的，它只显示壁纸的左侧部分/区域。

最后，如果我将 mPosX 名称更改为 mPixels，c.translate((float)mPixels, 0f); 从 onSurfacedChanged 和 onOffSetChanged 中获取值。它不适用于第一次执行。您可以看到壁纸首先居中，然后返回仅显示壁纸的左侧部分。如果我在 eclipse 上第二次运行它并在我的手机上再次设置它，那么它将按我的意愿工作，中间主屏幕上图像的中心部分，并在切换主屏幕时滚动背景。但问题是它在第一次执行时不起作用，导致导出为 apk 时不起作用。

所以任何人都可以帮助我在切换主屏幕时让我的动态壁纸图像居中显示并滚动。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:15:06.550

好吧，我仍然不知道为什么有时来自 onOffsetChanged 的​​ xPixelOffset 值（我的代码上的 xPixel）返回 0，但我设法为可能发生这种异常的设备找到了替代解决方案。如果这发生在其他人身上，我意识到 xPixelOffset 也可以通过获取设备屏幕宽度并将其乘以来自 onOffsetChanged 的​​ xOffset 来获得。可以从 OnSurfaceChanged 中获取宽度并将其存储在一个新变量中，其中可以获取设备屏幕的宽度和高度。

前任：

```
mPixels = (0- screenWidth)*xOffset; 
```

mPixels 应该从 xPixelOffset （我的代码上的 xPixel ）获取值，而 screenWidth 是通过以下方式从 OnSurfaceChanged 获取的：

```
super.onSurfaceChanged(holder, format, width, height);
screenWidth= width; 
```

# c++ - 从同一文件中定义的类访问外部函数

> ID：11404292
> 
> 赞同：0
> 
> 时间：2012-07-09T22:43:03.727
> 
> 标签：c++, class, function

如果我有一个类定义

```
class myClass
{
  void x(); 
};

void myClass::x()
{
   hello(); // error: ‘hello’ was not declared in this scope
}

void hello()
{
   cout << "Hello\n" << endl;
} 
```

如何调用在类范围之外定义并位于同一文件中的函数？我知道我可以使用`Namespace::function`，但我不确定在这种情况下我应该使用什么`Namespace`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T22:44:48.167

在使用它之前，您至少必须声明它（如果没有定义它）。

通常，如果函数的功能仅在该翻译单元中使用，则这是在匿名命名空间中完成的：

```
class myClass
{
  void x(); 
};

namespace
{
   void hello()
   {
      cout << "Hello\n" << endl;
   }
}

void myClass::x()
{
   hello(); // error: ‘hello’ was not declared in this scope
} 
```

这提供了函数内部链接（类似于声明它`static`）并且仅在该 TU 中可用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-09T22:44:39.893

在文件中定义`hello`函数在它被使用的地方之前 -*在*方法之前`x`-**或者**在它被使用的地方之前提供一个函数原型：

```
void hello();  // function definition is later in the file

void myClass::x()
{
   hello();
} 
```

# c - MSFT 构建、cl 和链接与跨库依赖项

> ID：11404293
> 
> 赞同：0
> 
> 时间：2012-07-09T22:43:04.440
> 
> 标签：c, visual-studio, linker

等级制度

```
\Folder1
    cpu.h
    cpu.c
    sources
\Folder2
    mem.h
    mem.c
    sources
dirs 
```

处理器.h

```
...
#define nope 0
...
int chuckTesta(unsigned int a);
.... 
```

中央处理器

```
#include <cpu.h>
int chuckTesta(unsigned int a){ ... } 
```

内存.c

```
#include <cpu.h> // A
extern int chuckTesta(unsigned int a); // B

cout << nope << endl; // C
cout << chuckTesta(1); // D 
```

有没有办法将 cpu.lib 链接到 Folder2 中的文件并满足这些要求？

*   删除 A 行
*   C线和D线仍然有效
*   编译和链接没有警告（现在我要么得到未解析的外部符号，要么定义错误）

注意：Folder2 的源文件只编译 Folder2 内的文件，并以 Folder1 作为包含路径。与 Folder1 类似。分别创建一个.lib 文件，cpu.lib 和mem.lib。

我正在为 Windows8 使用 LINK、CL 和构建。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T00:41:10.803

删除线 A 的问题是`#define nope 0`。如果您将定义转换为 cpu.lib 中的静态整数（或加一），它应该可以工作。只要确保在最终的可执行文件中链接到 cpu.lib 和 mem.lib 即可。

处理器.h

```
...
#define nope 0
static int cpu_nope = nope;
...
int chuckTesta(unsigned int a);
.... 
```

内存.c

```
extern int chuckTesta(unsigned int a);
extern int cpu_nope;

cout << cpu_nope << endl;
cout << chuckTesta(1); 
```

# java - JTextPane/JEditorPane 和奇怪的文本问题

> ID：11404303
> 
> 赞同：9
> 
> 时间：2012-07-09T22:44:17.907
> 
> 标签：java, swing, jtextpane, jeditorpane

我正在创建一个简单的聊天程序，我希望最终显示 html 链接。我现在的问题是我无法让文本按照我的意愿出现在用户名旁边。

我希望用户名是粗体，并且文本显示在它旁边，但由于某种原因，非粗体文本显示居中。

如果我不加粗用户名，它可以正常工作。前两个是我将名称加粗时的显示方式，中间是名称不加粗时的显示方式，底部显示一个超链接，我希望它看起来像中间两个，但名称加粗。

![在此处输入图像描述](../Images/1e98bad6b4d74368b5fcb147ae2a2931.png)

这是代码，我做错了什么？请注意，我尝试用 JEditorPane 替换 JTextPane 并且发生了同样的事情。

```
package com.test;

import java.awt.BorderLayout;
import java.awt.Color;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTextPane;
import javax.swing.WindowConstants;
import javax.swing.event.HyperlinkEvent;
import javax.swing.event.HyperlinkEvent.EventType;
import javax.swing.event.HyperlinkListener;
import javax.swing.text.BadLocationException;
import javax.swing.text.SimpleAttributeSet;
import javax.swing.text.StyleConstants;
import javax.swing.text.html.HTML;

public class JTextPaneTest extends JPanel {

    JTextPane pane;

    public JTextPaneTest() {
        this.setLayout(new BorderLayout());

        pane = new JTextPane();
        pane.setEditable(false);
        pane.setContentType("text/html");

        JScrollPane scrollPane = new JScrollPane(pane);
        this.add(scrollPane, BorderLayout.CENTER);

        pane.addHyperlinkListener(new HyperlinkListener() {

            @Override
            public void hyperlinkUpdate(HyperlinkEvent e) {
                if (e.getEventType() == EventType.ACTIVATED) {
                    System.out.println(e.getDescription());
                }

            }
        });

    }

    public void chatWithBold(String user, String text) {

        SimpleAttributeSet bold = new SimpleAttributeSet();
        StyleConstants.setBold(bold, true);

        SimpleAttributeSet normal = new SimpleAttributeSet();

        try {
            pane.getDocument().insertString(pane.getDocument().getLength(),
                    user + ": ", bold);
        } catch (BadLocationException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        try {
            pane.getDocument().insertString(pane.getDocument().getLength(),
                    text + "\n", normal);
        } catch (BadLocationException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    public void chatNoBold(String user, String text) {

        SimpleAttributeSet bold = new SimpleAttributeSet();
        StyleConstants.setBold(bold, true);

        SimpleAttributeSet normal = new SimpleAttributeSet();

        try {
            pane.getDocument().insertString(pane.getDocument().getLength(),
                    user + ": ", normal);
        } catch (BadLocationException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        try {
            pane.getDocument().insertString(pane.getDocument().getLength(),
                    text + "\n", normal);
        } catch (BadLocationException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    private void submitALinkWithBold(String user, String link) {
        SimpleAttributeSet bold = new SimpleAttributeSet();
        StyleConstants.setBold(bold, true);

        try {
            pane.getDocument().insertString(pane.getDocument().getLength(),
                    user + ": ", bold);
        } catch (BadLocationException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        SimpleAttributeSet attrs = new SimpleAttributeSet();
        attrs.addAttribute(HTML.Attribute.HREF, link);

        SimpleAttributeSet htmlLink = new SimpleAttributeSet();
        htmlLink.addAttribute(HTML.Tag.A, attrs);
        StyleConstants.setUnderline(htmlLink, true);
        StyleConstants.setForeground(htmlLink, Color.BLUE);
        try {
            pane.getDocument().insertString(pane.getDocument().getLength(),
                    link + "\n", htmlLink);
        } catch (BadLocationException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable(){
            public void run(){

                JFrame frame = new JFrame();

                JTextPaneTest chat = new JTextPaneTest();
                frame.add(chat);
                frame.setDefaultCloseOperation
                    (WindowConstants.DISPOSE_ON_CLOSE);                                                                                                 

                chat.chatWithBold("User1", "Hi everyone");
                chat.chatWithBold("User2", "Hey.. Hows it going");

                chat.chatNoBold("User1", "Hi everyone");
                chat.chatNoBold("User2", "Hey.. Hows it going");

                chat.submitALinkWithBold("User1", "http://www.stackoverflow.com");

                frame.setSize(400, 400);

                frame.setVisible(true);
            }
        });

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T20:55:52.987

我只是玩了一下，搜索了一下，找到了以下解决方案：

`JTextPane` *在设置内容类型后*初始化您的内容，如下所示：

```
final String emptyHtml = "<html><body id='bodyElement'></body></html>";
pane.getEditorKit().read(new StringReader(emptyHtml), pane.getDocument(), 0); 
```

之后初始化以下两个新字段（将在方法中使用，只是为了方便）：

```
this.doc = (HTMLDocument) pane.getDocument();
this.bodyElement = this.doc.getElement("bodyElement"); 
```

现在你可以`submitALinkWithBold`像这样改变你的方法：

```
final String html =  "<p><b>" + user + ": </b>"
    + "<a href='" + link + "'>" + link + "</a></p>";
doc.insertBeforeEnd(bodyElement, html); 
```

您应该也可以将此方案应用于其他两种方法（`chatWithBold`和`chatNoBold`）。

请注意，在您更改所有方法之前，结果看起来并不好（或根本不起作用）。另请注意，即使更改了所有方法，它看起来也不像您的原始示例（更大的行距，其他字体......）。我认为这可以通过转换`pane.getEditorKit()`为 a`HTMLEditorKit`并使用它的`setStyleSheet(…)`方法来解决，但我没有尝试过。

# jquery - KnockoutJS 向导

> ID：11404313
> 
> 赞同：0
> 
> 时间：2012-07-09T22:45:20.730
> 
> 标签：jquery, knockout.js, custom-component

我正在尝试创建一个可重用的向导控件，该控件将显示基于 Knockout 的数据输入表单。本质上，模板永远不会真正改变，而是完全动态的。我设想能够做到以下几点：

*   定义一个简单的模型，其中包含一个步骤列表，本质上是一个步骤 ID，也许还有一些关于该步骤是否可以在完成后返回的逻辑。
*   然后，每个步骤都应该有一组要显示的字段或输入项。这真的分解为一个 HTML 标签和输入框。

我已经把我最初的想法/逻辑放在一起并想出了[这个](http://brntpb.st/MW2QS0)。我在显示字段时遇到问题。步骤标题都正确呈现，但我的 Fields 集合始终为空。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T09:45:41.433

有趣的上下文。我根本无法让它在 Fiddle 中工作，但让它在本地工作。我更改了两件事 - 您需要明确关闭标题的跨度，并且您需要使用 if 来针对每个步骤对象测试字段是否存在，因为并非所有步骤都有字段。像这样：

```
 templateEngine.addTemplate("merlin_wizard", "\
            <div class=\"m-ui-wizard\">\
                <div class=\"m-ui-wizard-steps\" data-bind=\"foreach: steps\">\
                    <div class=\"m-ui-wizard-step\">\
                        <span data-bind=\"text: Title\"></span>\
                        <!-- ko if: $data.Fields -->\
                            <!-- ko foreach: Fields -->\
                                <span data-bind=\"text: Label\" />\
                            <!-- /ko -->\
                        <!-- /ko -->\
                    </div>\
                </div>\
            </div>"); 
```

# c# - 为什么没有将组添加到我的 ListView？

> ID：11404316
> 
> 赞同：0
> 
> 时间：2012-07-09T22:45:33.810
> 
> 标签：c#, winforms, listview, dictionary, listviewitem

使用此代码：

```
Dictionary<int, String> PlatypusAccountsDict = PlatypusSetupData.getPlatypusAccountsForCustomer(kvp.Key);
foreach (KeyValuePair<int, string> entry in PlatypusAccountsDict) {
    int PlatypusAccountNumber = entry.Key;
    string PlatypusAccountName = entry.Value;

    ListViewGroup PlatypusAccountGroup = new ListViewGroup(PlatypusAccountName, HorizontalAlignment.Left)
    {
        Tag = PlatypusAccountNumber,
        Header = PlatypusAccountName
    };
    listViewCustomerDuckBillAccountsClients.Groups.Add(PlatypusAccountGroup);
. . . 
```

...我可以逐步查看“条目”中的值，但没有将任何组添加到我的 ListView 中 - 在此代码运行后，它仍然像一只松鸦一样赤裸裸。我知道这个问题有三个可能的原因：1）我忘记了一个步骤。2) 来自太阳的巨大 EMP 破坏了某些东西，或 3) 我不知道的其他东西。

## 更新

在调用 Groups.Add(PlatypusAccountGroup) 之后添加此测试代码：

```
ListViewItem listViewItem1 = new ListViewItem(new string[] { "Banana", "a" }, -1, Color.Empty, Color.Yellow, null);
ListViewItem listViewItem2 = new ListViewItem(new string[] { "Cherry", "v" }, -1, Color.Empty, Color.Red, new Font("Microsoft Sans Serif", 8.25F, FontStyle.Regular, GraphicsUnit.Point, ((System.Byte)(0))));
ListViewItem listViewItem3 = new ListViewItem(new string[] { "Apple", "h" }, -1, Color.Empty, Color.Lime, null);
ListViewItem listViewItem4 = new ListViewItem(new string[] { "Pear", "y" }, -1, Color.Empty, Color.FromArgb(((System.Byte)(192)), ((System.Byte)(128)), ((System.Byte)(156))), null);

listViewItem1.Group = PlatypusAccountGroup;
listViewItem2.Group = PlatypusAccountGroup;
listViewItem3.Group = PlatypusAccountGroup;
listViewItem4.Group = PlatypusAccountGroup;

this.listViewPlatypusAccounts.Items.AddRange(new ListViewItem[] {listViewItem1,
listViewItem2,
listViewItem3,
listViewItem4}); 
```

...确实添加了我想要/期望的组，但没有在其下方添加这些水果项目。

# c# - 如何在 C# 中停止然后启动 explorer.exe？

> ID：11404317
> 
> 赞同：1
> 
> 时间：2012-07-09T22:45:34.130
> 
> 标签：c#, process, explorer

所以我的电脑有很多错误。99% 的时间，它们是由 explorer.exe 愚蠢造成的。我可以手动停止它们，但我想我可以设置一个每隔 10 分钟左右自动停止和启动的时间表，所以我再也不会遇到任何问题了。我的代码不起作用，但我还是会说：

```
foreach (System.Diagnostics.Process myProc in System.Diagnostics.Process.GetProcesses())
        {
            if (myProc.ProcessName == "explorer.exe")
            {
                myProc.Kill();
            }
        } 
```

当我运行它时，绝对没有任何反应。Visual Studio 不会出错，程序不会崩溃，等等。它什么也不做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T23:09:17.303

请避免使用[反`for-if`模式](http://blogs.msdn.com/b/oldnewthing/archive/2011/12/27/10251210.aspx)：

```
var explorers = Process.GetProcessesByName("explorer");
foreach (var thisExplorer in explorers)
{
    thisExplorer.Kill();
} 
```

编辑：正如评论中所说的charmander。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T23:14:40.043

你也可以用 Linq 的方式来做

```
List<Process> processes = Process.GetProcesses().Where(p => p.ProcessName == "explorer").ToList();

foreach (var process in processes)
{
  process.Kill();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T22:48:56.883

进程名称只是“explorer”

编辑：这在我的盒子上起到了作用：

```
foreach (System.Diagnostics.Process myProc in System.Diagnostics.Process.GetProcesses())
        {
            if (myProc.ProcessName == "explorer")
            {
                myProc.Kill();
            }
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T22:49:44.883

在假设您知道它包含的内容之前，查看特定方法/属性的输出通常是一个好主意。

在这种情况下，`myProc.ProcessName`不包含进程的扩展。因此，与“探索者”相比。

此外，在对集合进行 foreaching 的同时修改集合通常会导致运行时错误。

# iphone - 创建两个xib，一个用于iPhone，一个用于iPad

> ID：11404320
> 
> 赞同：0
> 
> 时间：2012-07-09T22:45:47.063
> 
> 标签：iphone, ios, ipad, interface-builder, xib

我将如何创建设备特定的 xib？我为 iPhone 制作了一个通用的，但是如何使用**单独**的 xib 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T23:04:08.660

来自[Apple 资源编程指南](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/LoadingResources/CocoaNibs/CocoaNibs.html#//apple_ref/doc/uid/10000051i-CH4-SW25)：

> 注意：如果您正在为 iOS 开发通用应用程序，您可以使用特定于设备的命名约定为底层设备自动加载正确的 nib 文件。有关如何命名 nib 文件的更多信息，请参阅“i [OS 支持设备特定资源](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/LoadingResources/Introduction/Introduction.html#//apple_ref/doc/uid/10000051i-CH1-SW2)”。</p>

在“iOS Supports Device-Specific Resources”文档中，它说：

> 要将资源文件与特定设备相关联，请在其文件名中添加自定义修饰符字符串。包含此修饰符字符串会产生具有以下格式的文件名：
> 
> 基本名称 - device.filename_extension
> 
> 该字符串表示资源文件的原始名称。它还代表您从代码访问文件时使用的名称。同样，字符串是用于标识文件类型的标准文件扩展名。该字符串是区分大小写的字符串，可以是以下值之一：
> 
> *   ipad - 资源只能在 iPad 设备上加载。
> *   iphone - 资源只能加载到 iPhone 或 iPod touch 设备上。您可以将设备修饰符应用于任何类型的资源文件。

因此，如果您想要单独的 .xib 文件，您将包括名为“MyView-ipad.xib”的 iPad xib 和名为“MyView-iphone.xib”的 iPhone xib。

一旦您将这些文件包含在您的项目中，当您调用它时：

```
UIViewController *someViewController = [[someViewController alloc] initWithNibName:@"MyView" bundle:nil]; 
```

根据您的应用程序在哪个设备上运行，将加载正确的 xib 文件。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T22:55:59.763

这是创建新项目时的默认设置。举一个具体的例子，我会为 iPhone 和 iPad 创建一个空白项目并深入研究。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T22:59:11.880

如果您已经将项目创建为 iPhone 项目，则需要将其更改为通用应用程序

# magento - 复制站点后 Magento 重定向到旧 URL

> ID：11404323
> 
> 赞同：10
> 
> 时间：2012-07-09T22:46:39.233
> 
> 标签：magento, redirect

我正在为 Magento 多商店安装而苦苦挣扎。旧的设置是一个 Magento 安装，两个站点/商店都指向同一个文件夹。现在客户想要 2 个独立的网站，因此对一个的更改不会弄乱另一个。

无论如何，数据库被复制，文件被复制，var/cache、var/session、var/tmp 被清空。我已经更改了 app/etc/local.xml 中的数据库参数，.htaccess 文件没有任何硬编码规则。

问题是 sitea.com 不断重定向到 siteb.com 并且管理区域无法正常工作，所以我必须在控制台或 phpMyAdmin 中执行所有操作。

我必须在哪些数据库表中进行更改？我错过了什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-10T06:59:13.303

core_config_data 中的 base_url 起到了作用，结合删除 var/cache、var/session、var/tmp 和系统 /tmp 文件夹中的所有内容

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-09T23:27:23.877

在 sitea.com 上，您可能想查看其数据库和`core_config_data`基本 URL 表。或者，您可以尝试执行以下查询：

```
UPDATE `core_config_data` SET `value`='http://sitea.com/' WHERE `value` LIKE 'http://%' LIMIT 2; 
```

在 siteb.com 的数据库上做同样的事情以获得良好的衡量标准

```
UPDATE `core_config_data` SET `value`='http://siteb.com/' WHERE `value` LIKE 'http://%' LIMIT 2; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T21:53:29.013

在 Magento 后端更新配置以传输生产网站时，请谨慎编辑配置面板中的基本 URL 信息。一旦这些值更改，该站点将不再可访问。

我们更喜欢转移站点，然后对 core_config_data 表中的数据库进行这些更改。

如果您被锁定在后端，请更新数据库，删除 var/cache 目录，看看这是否就是您所需要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-24T10:05:40.010

我有同样的问题试试我做了什么：

**步骤1：**

**使用SSH**删除缓存：

```
rm -rf /var/tmp/magento/* 
```

**第2步：**

**PS：**为了使用 Magento Connect Manager，您可能需要重置 PEAR 配置设置。为此，只需删除文件`downloader/pearlib/pear.ini`，就会自动创建一个新文件。

**第 3 步：**

**重置文件权限**

为确保所有 javascript 文件、CSS 和图像正确加载，您应该将文件权限重置为新服务器的推荐设置。

从您的 Magento 根目录（例如 public_html）运行以下命令：

```
find . -type d -exec chmod 755 {} \;
find . -type f -exec chmod 644 {} \; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-04T13:38:21.527

我一遍又一遍地遇到这个问题。我知道它与缓存无关，只是一个数据库问题，因为我可以在 env 中更改数据库名称，但它会中断。

现在，我按照 Seth 之前的说明（查找和更改 DB 值）进行了部分操作。我不确定我是否完全使用了他的代码，但我需要更改 3 行：

*   网络/不安全/base_url
*   网络/安全/base_url
*   网络/不安全/base_link_url

更改 core_config_data 表中的这 3 个就可以了。

# connection - 如何毫不拖延地同时翻译两种语言 例如：“两个不同语言的网络游戏”

> ID：11404324
> 
> 赞同：0
> 
> 时间：2012-07-09T22:46:40.687
> 
> 标签：connection, streaming

我有一个关于编写可以设法以不同代码玩在线游戏的脚本的问题。我认为最容易理解的是，当我说我需要制作一个平台时，Playstation 作为 xbox 玩家可以一起玩在线现代战争 3。

从数学上看，这似乎是可能的：最后你有两个不同的屏幕，它们的投影相同。在平台上，索尼和微软玩家将他们的代码或屏幕流式传输到平台并一起玩。最大的问题是，您必须以 2 种不同的代码交付它，您必须在 0,001 秒内将其翻译成一种语言。

老实说，我必须深入研究这些东西，但我无法走得更远。

对于这个问题，您有任何提示、其他论坛或解决方案吗？也许它正在编写一种新语言？（谷歌在技术上使用它通过电话进行谷歌翻译）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T23:12:37.373

根据游戏的不同，即使在理论上，这也可能是不可能的。许多主机游戏使用点对点锁步同步模型进行多人游戏。使用这种方法的游戏只相互发送来自其他控制台的玩家输入，并依靠确定性模拟（相同的输入产生相同的输出）来保持系统同步。

这仅适用于所有玩家在同一 CPU 上运行完全相同的编译代码时。使用这种网络模型的游戏通常会定期进行不同步检查，以确保不同的系统不会彼此不同步。不同步失败通常被认为是致命错误，或者是游戏中的错误，或者是其中一名玩家试图作弊的证据。

其他多人游戏使用客户端服务器模型，因此理论上可以允许不同的控制台相互对战。然而，对网络协议进行逆向工程将是一项艰巨的技术挑战，并且要使其可靠地工作将是一个难题。

即使您可以解决技术问题，尽管您可能需要克服更大的法律问题。索尼和微软不希望允许跨平台游戏，因此即使理论上可以使用客户端服务器多人游戏开发人员无法实现它。试图完成这项工作的第三方可能不得不应对来自微软、索尼和游戏开发商的法律挑战。

# knockout.js - 仅将绑定应用到 body 标记而不应用任何后代

> ID：11404326
> 
> 赞同：0
> 
> 时间：2012-07-09T22:47:06.053
> 
> 标签：knockout.js, knockout-2.0

我希望将绑定应用到 body 标记，以设置一个 css 类，该类基于一些从嵌套在 body 标记内的视图模型中订阅的 observable。

这是我正在尝试做的一个简短示例。这实际上是一个 jQuery Mobile 应用程序，所以不确定这是否会产生巨大的影响。

[http://jsfiddle.net/aPscQ/](http://jsfiddle.net/aPscQ/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T04:20:11.160

您只是想将文本框添加到列表中吗？

如果是这样

[http://jsfiddle.net/keith_nicholas/3fa6V/](http://jsfiddle.net/keith_nicholas/3fa6V/)

还是您想添加到视图模型然后绑定它？

如果是这样

[http://jsfiddle.net/keith_nicholas/TaDZF/](http://jsfiddle.net/keith_nicholas/TaDZF/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:22:36.770

最后将 Tyrsius 的评论链接到 Ryan N 的文章.. [http://www.knockmeout.net/2012/05/quick-tip-skip-binding.html](http://www.knockmeout.net/2012/05/quick-tip-skip-binding.html)

谢谢！

# java - 代理和备忘录模式

> ID：11404327
> 
> 赞同：1
> 
> 时间：2012-07-09T22:47:21.150
> 
> 标签：java, design-patterns, proxy-pattern, memento

代理 - 什么代码（以及在哪里）将 ProxyService 转换为 RealService 调用？为什么/何时使用这个？层——如何实现？纪念品 - 为什么不将状态保存到缓存或文件中？

我对**代理**模式的理解是你有某种`Service`接口，它有`ProxyService`具体`RealService`的东西。由于某种原因，您无法访问`RealService`, 因此您针对`ProxyService`实例进行编码，然后让框架将代理链接到您的服务的真实实例。只有两个问题：

*   当我可以访问`Service`and时，我想不出一个例子`ProxyService`，但不是`RealService`- 有人可以提供关于何时发生这种情况的例子吗？

这与**Memento**模式有何不同？我对 Memento 定义的理解是，它用于保存对象状态，这是 Proxy 真正在做的事情，是吗？如果不是，请解释 Memento 与 Proxy 有何不同！提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T23:12:39.417

代理是当某人期待某个对象时，你对他撒谎，然后说：是的，你有你的对象，但实际上你给了他别的东西……代理的常见用途：实现延迟初始化：你被要求提供一个代表大文件内容的对象，或者获取非常昂贵的东西，并且您知道此时不需要它，或者实际上可能永远不会真正使用它。因此，您传递了一个代理，该代理仅在 100% 完全必要时才获取资源（您也可以不合时宜地开始获取资源，并使使用代理的进程仅在它真正需要时才开始等待）。这在 ORM 中很常见。还有[期货和承诺](http://en.wikipedia.org/wiki/Futures_and_promises)实现这样的东西来拦截调用：你可以传递一个实际上知道真实对象的代理，并拦截它得到的调用，并做一些有趣的事情，比如记录它们，改变它们中的一些等等......还有很多代理的高级和复杂用法，因为您通常能够确定运行时的行为。很抱歉退出 Java，但在 C# 中，[Castle Proxy](http://stw.castleproject.org/Default.aspx?Page=DynamicProxy&NS=Tools&AspxAutoDetectCookieSupport=1) 用于实现模拟对象以进行测试。您还可以使用代理来实现，例如[在下划线中链接](http://underscorejs.org/#chaining). 您可以使用代理在静态语言中模拟许多“动态语言”功能。您还可以使用代理评估一段代码，该代理实际记录每次调用，并每次返回新代理，通过执行它来重建“原始源代码”。

纪念品模式：完全是另一回事。当您想使用一个对象时，您可以使用它，保存它的当前状态，计算对那个对象的细化，一段时间后您可能想要选择回滚到之前的状态。当很难通过代码撤消事物时，您可以使用它在对象中实现事务行为。您可以使用它来实现撤消和重做功能。（不是保存更改增量，而是保存完整状态）。您可以在模拟中使用它来每次从同一点开始（您可以说源版本服务器每隔一段时间使用一次备忘录[他们通常使用备忘录+增量更改的组合]）。虚拟机的快照或计算机的休眠也是对 memento 模式的使用。并保存某物的状态，

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T23:12:46.427

首先，我要警告我的回答，我不相信关于模式有任何硬性规定——你可以从它们那里得到你需要的东西，仅此而已。我使用某些模式的方式无疑与其他开发人员可能选择使用它们的方式不同。也就是说，这是我对你的问题的看法。

**代理模式解释**

我知道`Proxy`设计模式的方式，你用它来做两件事：

1.  限制对特定对象实例的其他公共方法的访问
2.  通过在第一次调用代理时实例化具体对象，然后将代理上的所有进一步调用传递给您的代理创建的具体实例，防止其他昂贵且不必要的实例化成本。

也许`RealService`有一个`doSomethingReallyDangerous()`你想隐藏的方法。或者甚至更无害，可能有数百个方法，您每次在实例的变量名之后`RealService`键入时都不需要查看这些方法。您可以为此使用代理。`.``RealService`

为了进一步阅读，这篇文章有很多很好的信息：

[http://sourcemaking.com/design_patterns/proxy](http://sourcemaking.com/design_patterns/proxy)

**与备忘录模式的区别**

该`Memento`模式允许您通过在具体对象旁边存储中间状态来将对象回滚到其原始状态或某个先前状态。有点像编程的“撤消”。您可能会使用一种`Proxy`模式来实现`Memento`，但`Proxy`不能保证保存对象状态或回滚 - 如果再次实例化该对象过于昂贵，它只会让您引用同一个对象进行方法调用。

所以希望这会有所帮助——我喜欢将其`Memento`视为功能更全面的版本`Proxy`，但并非所有`Proxy`实现都是`Mementos`.

# datetime - 可以从函数 CreateODBCDate() 进行代码注入吗？

> ID：11404328
> 
> 赞同：0
> 
> 时间：2012-07-09T22:47:42.243
> 
> 标签：datetime, coldfusion, sql-injection

如果`CreateODBCDate`在 SQL 查询中使用返回的数据，我应该清理返回的值还是没有必要？这是[官方文档](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=functions_c-d_19.html)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T23:05:49.510

CreateODBCDate 不需要卫生，但免费使用`<cfqueryparam>`和利用安全性（内置验证）和性能（准备好的语句）将是一件明智的事情。

# android - 选项卡侦听器中的混合片段类型

> ID：11404331
> 
> 赞同：1
> 
> 时间：2012-07-09T22:48:02.017
> 
> 标签：android, android-fragments

我有一个基于 google 提供的文档代码和 sherlock 操作栏类的选项卡侦听器。

我想让我的两个选项卡使用 ListFragment 类，一个使用自定义 GridFragment 类。

但是，选项卡侦听器一次只能除一种类型，我是否需要创建一个标准片段并在其中放置一个列表视图或网格视图？还是我需要为每个创建一个单独的选项卡侦听器？或者有没有办法让选项卡侦听器除了任何类型的片段、标准、列表或网格，只要它继承自片段类。

```
package com.NYXDigital.LookBunnyFind;

import android.app.Activity;
import android.support.v4.app.FragmentTransaction;

import com.actionbarsherlock.app.ActionBar;
import com.actionbarsherlock.app.ActionBar.Tab;
import com.actionbarsherlock.app.SherlockFragment;

public class TabListener<T extends SherlockFragment> implements ActionBar.TabListener {
    private SherlockFragment mFragment;
    private final Activity mActivity;
    private final String mTag;
    private final Class<T> mClass;

    /** Constructor used each time a new tab is created.
      * @param activity  The host Activity, used to instantiate the fragment
      * @param tag  The identifier tag for the fragment
      * @param clz  The fragment's Class, used to instantiate the fragment
      */
    public TabListener(Activity activity, String tag, Class<T> clz) {
        mActivity = activity;
        mTag = tag;
        mClass = clz;
    }

    /* The following are each of the ActionBar.TabListener callbacks */

    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        // Check if the fragment is already initialized
        if (mFragment == null) {
            // If not, instantiate and add it to the activity
            mFragment = (SherlockFragment)SherlockFragment.instantiate(mActivity, mClass.getName());
            ft.add(android.R.id.content, mFragment, mTag);
        } else {
            // If it exists, simply attach it in order to show it
            ft.attach(mFragment);
        }
    }

    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        if (mFragment != null) {
            // Detach the fragment, because another one is being attached
            ft.detach(mFragment);
        }
    }

    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        // User selected the already selected tab. Usually do nothing.
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-08T10:06:17.587

我最终创建了一个通用片段项目类，TabListener 接受它作为它的参数。此类不包括片段类并为您自动创建它。

下面的代码是包含您要添加的每个片段类以及标题的类。对于添加到选项卡侦听器的每个片段，您都需要一个。

```
package com.NYXDigital.LookBunnyFind.Widget;

import android.support.v4.app.Fragment;

public class FragmentViewPagerItem {
    private String title;
    private Class<? extends Fragment> fragmentClass;

    public FragmentViewPagerItem(String title, Class<? extends Fragment> fragmentClass){
        this.title = title;
        this.setFragmentClass(fragmentClass);
    }

    public String getTitle() {
        return title;
    }
    public void setTitle(String title) {
        this.title = title;
    }

    public Class<? extends Fragment> getFragmentClass() {
        return fragmentClass;
    }

    public void setFragmentClass(Class<? extends Fragment> fragmentClass) {
        this.fragmentClass = fragmentClass;
    }

    public Fragment newInstanceOfFragmentClass() throws InstantiationException, IllegalAccessException{
        return this.fragmentClass.newInstance();
    }

} 
```

这个适配器修改为接受上面的 FragmentViewPagerItemClass 的数组

```
import java.util.ArrayList;
import java.util.List;

import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;

import com.NYXDigital.LookBunnyFind.Widget.FragmentViewPagerItem;

public class FragmentViewPagerAdapter extends FragmentPagerAdapter {

    private List<FragmentViewPagerItem> mFragments = new ArrayList<FragmentViewPagerItem>();

    public FragmentViewPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    public void addFragment(FragmentViewPagerItem fragment) {
        if (mFragments == null) {
            mFragments = new ArrayList<FragmentViewPagerItem>();
        }
        mFragments.add(fragment);
        notifyDataSetChanged();
    }

    public Fragment getItem(int position) {
        Fragment fragment = null;

        try {
            fragment = mFragments.get(position % mFragments.size())
                    .newInstanceOfFragmentClass();
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return fragment;
    }

    public int getCount() {
        return mFragments.size();
    }

    public CharSequence getPageTitle(int position) {
        return mFragments.get(position % mFragments.size()).getTitle()
                .toUpperCase();
    }
} 
```

因此，为了使用这些类，您需要为每个 Fragment 创建一个 FragmentViewPagerItem，并为您的 Fragment 传入标题和类。然后像往常一样使用 addFragment 方法将其添加到适配器。然后将其设置为 ViewPager 的 Adapter 并绑定标题指示器以查看标题。

```
// Create adapter for pager and add fragments to be displayed
FragmentViewPagerAdapter adapter = new FragmentViewPagerAdapter(
        getSupportFragmentManager());

// Local
FragmentViewPagerItem localFragment = new FragmentViewPagerItem(
        "Local", BranchListFragment.class);
adapter.addFragment(localFragment);

// Find
FragmentViewPagerItem findFragment = new FragmentViewPagerItem("Find",
        FindFragment.class);
adapter.addFragment(findFragment);

// Events
FragmentViewPagerItem eventsFragment = new FragmentViewPagerItem(
        "Events", EventListFragment.class);
adapter.addFragment(eventsFragment);

// Set the pager with an adapter
ViewPager pager = (ViewPager) findViewById(R.id.pager);
pager.setAdapter(adapter);

// Bind the title indicator to the adapter
TabPageIndicator mIndicator = (TabPageIndicator) findViewById(R.id.indicator);
mIndicator.setViewPager(pager); 
```

我正在考虑开源这个，你们怎么看？

# clojure - Clojure：Clojure 中的 core.logic、prolog、逻辑风格编程

> ID：11404333
> 
> 赞同：7
> 
> 时间：2012-07-09T22:48:19.420
> 
> 标签：clojure

## 语境

我知道core.logic。

我已经通过合理的计划者工作了。

我知道Prolog的存在。

我想*在*Clojure 中更好地进行逻辑风格的编程。

Prolog 书籍比 core.logic 书籍多得多。

## 问题：

我目前正计划使用 clojure 的 core.logic 完成一些 Prolog 书籍。我应该注意哪些事情/哪些事情很难从 Prolog 映射到 core.logic？

（也欢迎其他关于提高逻辑编程能力的建议。）

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T23:23:40.850

逻辑编程 + Clojure 世界的其他部分包括

*   cascalog（Hadoop 上的逻辑编程）
*   datomic（逻辑编程+数据库时间）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T17:45:07.007

我相信相当多的Prolog可以翻译成miniKanren / core.logic。我不知道很多问题（一个是定句语法，但还有其他方法可以在 Clojure 中编写解析器）。如果您遇到困难，请随时向 Clojure 邮件列表发布改进建议。

# c++ - 仅标头 C++ 库的类似 LGPL 的许可证

> ID：11404334
> 
> 赞同：16
> 
> 时间：2012-07-09T22:48:25.197
> 
> 标签：c++, templates, open-source, licensing, libraries

我的理解是，程序可以动态链接到 LGPL 库并包含其标头，可能需要进行修改，而不必在 LGPL 下发布程序，但是必须发布对构建动态库的源代码的任何修改根据 LGPL。

实际上，这允许人们不受限制地*使用*该库，但他们必须回馈他们对其所做的任何*更改*。

我想发布一个我作为 FOSS 编写的 C++ 库，并且我想以同样的精神授权它：允许人们*使用*它而不必发布使用它的代码，但必须发布他们对它所做的任何*更改*它。但是，LGPL 本身并不适合我，因为我的库完全只有标题（它是一个模板库）。

什么许可证可以达到这个目的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T08:36:41.360

[Eigen](http://eigen.tuxfamily.org/)是在 LGPL3 许可下发布的仅标头 C++ 库。[在他们的许可常见问题页面](http://eigen.tuxfamily.org/index.php?title=Licensing_FAQ&oldid=1117)上有关于它的有用信息。

另一种选择是[CDDL](http://www.opensource.org/licenses/cddl1)许可证。它类似于 LGPL，但它是基于文件的许可：您可以以任何您想要的方式*使用*许可文件，只要您不对它们进行任何更改。如果这样做，您将不得不（仅）分享这些更改。与 LGPL 相比的优点之一是您可以静态链接 CDDL 库而不共享任何内容（当然，在这种情况下这无关紧要，因为您的库只是标题）。缺点之一是它与 GPL 许可证不兼容（请参阅[此处](http://www.gnu.org/licenses/license-list.html)的 MPL 许可证）。

另请参阅[CDDL 上的一些常见问题解答](http://hub.opensolaris.org/bin/view/Main/licensing_faq)。

# windows-phone-7 - 如何在后面的代码上设置绑定文本

> ID：11404337
> 
> 赞同：0
> 
> 时间：2012-07-09T22:49:14.900
> 
> 标签：windows-phone-7

我创建了 userControl，其中有两个文本块。我可以在 xaml 页面上设置文本以使用此代码。

```
 <my:Title Title  TitleCaption="test On XMAL"   /> 
```

但是我想在代码上设置文本的值。有人会告诉我如何完成这项任务吗？提前致谢。

有我的用户控件：

```
<UserControl x:Name="TitleSection"  x:Class="CMSPhoneApp.Title"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d"
FontFamily="{StaticResource PhoneFontFamilyNormal}"
FontSize="{StaticResource PhoneFontSizeNormal}"
Foreground="{StaticResource PhoneForegroundBrush}"
d:DesignHeight="480" d:DesignWidth="480">

<Grid x:Name="LayoutRoot" Style="{StaticResource GridTitleStyle1}" >

    <StackPanel>
    <TextBlock  x:Name="ApplictionTtile" Width="350" Text="MyAppTitle " HorizontalAlignment="Left" FontSize="20">
        <TextBlock.Foreground>
            <SolidColorBrush Color="#FFFFFF"/>
        </TextBlock.Foreground>
    </TextBlock>
        <TextBlock   x:Name="PageTtile"  Style="{StaticResource TitleTextBlockStyle}" 
               Text="{Binding Path=TitleCaption, Mode=TwoWay,  ElementName=TitleSection }"      
                     >

         </TextBlock>
    </StackPanel>
</Grid> 
```

以下是此页面背后的代码：

```
namespace CMSPhoneApp
{
    public partial class Title : UserControl
    {
    public Title()
    {
        InitializeComponent();
    }

    public static DependencyProperty TitleCaptionProperty =
 DependencyProperty.Register("TitleCaption", typeof(string), typeof(Title), null);

    public string TitleCaption
    {
        get
        {
            return (string)GetValue(TitleCaptionProperty);
        }
        set
        {
            SetValue(TitleCaptionProperty, value);
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T05:23:25.377

It can be done in a much easier way, your property should be:

```
public string TitleCaption
    {
        get
        {
            return PageTitle.Text;
        }
        set
        {
            PageTitle.Text=value;
        }
    } 
```

Now when you create the control name it:

```
<my:Title Name="myTitle"  TitleCaption="test On XMAL"   /> 
```

Now you can change PageTitle from code by the following code:

```
myTitle.TitleCaption="your Text Goes Here"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T22:54:16.697

从代码中，您可以执行以下操作：

```
PageTtile.Text = "This is from code"; // where PageTile is the x:Name of the TextBlock in XAML 
```

# php - Symfony 路由到外部站点，包括会话值

> ID：11404340
> 
> 赞同：1
> 
> 时间：2012-07-09T22:49:21.353
> 
> 标签：php, symfony1

我正在移植一个使用 Symfony 框架的遗留系统。我几乎没有使用 Symfony 的经验。

我需要覆盖到外部站点的操作的路由，并将会话值作为参数包含在内。

这是当前`routing.yml`代码

```
mysystemtool:
  url:   /:module/mysystemtool/tool/*
  param: { action: mysystemtool } 
```

我需要重定向到一个像`http://thirdpartyurl.com/?session_param=session_value`

知道怎么做吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-09T22:58:56.793

你不能路由它本身，因为路由只用于内部的东西。也就是说，您可以在控制器中重定向：

```
public function executeMysystemtool(sfWebRequest $request) {

    $param = $this->getUser()->getAttribute('session_param', 'default_value');
    $this->redirect('http://thirdpartyurl.com?session_param='.$param);
} 
```

当然，您需要`actions.class.php`在模块中进行设置，以便您可以编写此操作，但如果它是现有操作，那么您只需要更改操作中的逻辑。

# google-app-engine - gae 应用程序未部署

> ID：11404347
> 
> 赞同：4
> 
> 时间：2012-07-09T22:49:55.163
> 
> 标签：google-app-engine, deployment

我不记得经历过寻找唯一应用程序名称的过程。如果这是问题（我选择的名称不是新名称），有人可以提醒我如何启动该过程，除非下面的错误消息表明存在其他问题。

我很确定我以前没有上传过这个应用程序，所以也许“更新”不合适。顺便说一句，我单击了我的 SDK 窗口上的“部署”按钮来启动此过程。

```
*** Running appfg.py with the following flags:
    --no_cookies --email=xxx@gmail.com --passin update
Host: appengine.google.com
Application: youpoll; version: 1

Starting update of app: xxxxxxx, version: 1
Getting current resource limits.
2012-07-09 17:50:44,915 ERROR appcfg.py:2161 An error occurred processing file '': HTTP Error 403: Forbidden. Aborting. 
Error 403: --- begin server output ---
You do not have permission to modify this app (app_id=u'xxxxxxx').
--- end server output ---
Password for xxx@gmail.com: If deploy fails you might need to 'rollback' manually.
The "Make Symlinks..." menu option can help with command-line work.
*** appcfg.py has finished with exit code 1 *** 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-11-10T06:47:13.447

我删除了 ~/.appcfg_oauth2_tokens_java 并解决了我的问题。此外，值得查看此链接[https://cloud.google.com/appengine/docs/java/tools/uploadinganapp](https://cloud.google.com/appengine/docs/java/tools/uploadinganapp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T22:53:27.570

当您在 appengine 网站上创建新项目时，会选择唯一的应用程序名称。如果您还没有这样做，请找到您的应用程序名称/创建您的帐户。另外，请确保您已在 Eclipse 中登录 google。它应该在左下角显示您的谷歌帐户名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T23:07:19.187

按照Java或[Python](https://developers.google.com/appengine/docs/python/gettingstartedpython27/uploading)[入门指南](https://developers.google.com/appengine/docs/java/gettingstarted/uploading)中“注册您的应用程序”部分中的说明进行操作。

# macos - 根据系统时钟在某个时间运行代码

> ID：11404348
> 
> 赞同：1
> 
> 时间：2012-07-09T22:49:56.677
> 
> 标签：macos, cocoa, time, scheduled-tasks

当系统时钟更改为某个时间时，运行代码的最佳方式是什么？显然我可以投票，但这似乎效率低下。

我不想要计时器；我希望能够在（例如）每天晚上 10 点做一些事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T23:04:38.053

`NSTimer`这几乎是你稍后在 Cocoa 中做某事的方式，并且可以创建一个带有“触发日期”的日期，但如果计算机在此期间进入睡眠状态（或者如果时钟发生变化），该日期将被推迟。

通过计时器轮询可能不是一个糟糕的选择；它允许您安排许多事件，但只有一个机制激活它们。每 15 或 30 秒重复一次并查看列表`NSDates`以查看是否应该发生某些事情的计时器不应该对性能产生有意义的影响。

另一种选择是使用 NoodleKit 的`NSTimer`类别来解释时钟变化。有一篇关于它的博客文章：[http](http://www.noodlesoft.com/blog/2010/07/01/playing-with-nstimer/) ://www.noodlesoft.com/blog/2010/07/01/playing-with-nstimer/ ，代码在 GitHub 上可用：[https ://github.com/MrNoodle/ NoodleKit](https://github.com/MrNoodle/NoodleKit)定时器为自己注册`NSWorkspace`睡眠/唤醒通知以及时区更改通知，并相应地调整其触发时间。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-09T23:54:12.617

我不确定这是您正在寻找的东西，但您可能想尝试 automator，如此[处](http://smallbusiness.chron.com/schedule-automator-tasks-mac-os-x-39132.html)所述。

# ruby-on-rails - Rails - 更好的流量控制 - 循环

> ID：11404350
> 
> 赞同：0
> 
> 时间：2012-07-09T22:50:11.047
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在获取值数据：名称、uid、highschool_name、graduateschool_name 如下所示：

```
def add_friends
    facebook.get_connections("me", "friends", :fields => "name, id, education").each do |hash|
      self.friends.where(:name => hash['name'], 
                         :uid => hash['id'], 
                         :highschool_name => hash['education']['school']['name'] unless hash["education"].blank?,
                         :graduateschool_name => hash['education']['school']['name'] unless hash["education"].blank?).
                   first_or_create
    end
end 
```

从哈希数组：

```
"education": [
    {
      "school": {
        "id": "110703012290674", 
        "name": "Kunskapsgymnasiet Malmö"
      }, 
      "year": {
        "id": "136328419721520", 
        "name": "2009"
      }, 
      "type": "High School"
    }, 
    {
      "school": {
        "id": "112812485399398", 
        "name": "Malmö University"
      }, 
      "year": {
        "id": "118118634930920", 
        "name": "2012"
      }, 
      "concentration": [
        {
          "id": "104076956295773", 
          "name": "Computer Science"
        }
      ], 
      "type": "Graduate School", 
      "classes": [
        {
          "id": "165093923542525", 
          "name": "Programmering", 
          "description": "Kursen fokuserar på metoder och tekniker vid utveckling av webbapplikationer med hjälp av HTML5."
        }
      ]
    }
  ], 
```

编辑：此代码无效。我想从这个哈希数组中挑选每个高中和研究生院并保存它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T22:57:10.027

```
high_schools = response['education'].collect{|ed| ed['school']['name'] if ed['type'] == "High School" } 
grad_schools = response['education'].collect{|ed| ed['school']['name'] if ed['type'] == "Graduate School" } 
```

# asp.net-mvc - 如何创建 ASP.NET MVC 控制器从查询字符串接受无限数量的参数

> ID：11404357
> 
> 赞同：4
> 
> 时间：2012-07-09T22:51:03.603
> 
> 标签：asp.net-mvc

URL 示例 http_//host/url/unlimited/index?first=value1&second=value2...&anyvalidname=somevalue

我想采取一项行动，预先接受未知数量的未知名称的参数。像这样的东西：

```
public class UnlimitedController : Controller
{
    public ActionResult Index(object queryParams)
    {

    }

    //or even better
    public ActionResult Index(Dictionary<string, object> queryParams)
    {

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T04:09:44.377

您可以创建一个自定义模型绑定器，将查询字符串转换为字典。

**自定义模型绑定器**

```
 public class CustomModelBinder: IModelBinder
  {
    public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
      var querystrings = controllerContext.HttpContext.Request.QueryString;

      return querystrings.Cast<string>()
        .Select(s => new { Key = s, Value = querystrings[s] })  
        .ToDictionary(p => p.Key, p => p.Value);
    }
  } 
```

**行动**

```
public ActionResult Index([ModelBinder(typeof(CustomModelBinder))]
   Dictionary<string, string> queryParams)
{

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T00:45:53.683

在**HomeController.cs**

```
public ActionResult Test()
{
    Dictionary<string, string> data = new Dictionary<string, string>();
    foreach (string index in Request.QueryString.AllKeys)
    {
        data.Add(index, Request.QueryString[index]);
    }

    StringBuilder sb = new StringBuilder();
    foreach (var element in data)
    {
        sb.Append(element.Key + ": " + element.Value + "<br />");
    }

    ViewBag.Data = sb.ToString();
    return View();
} 
```

在**Test.cshtml**

```
<h2>Test</h2>
@Html.Raw(ViewBag.Data) 
```

**网页**, `http://localhost:35268/Home/Test?var1=1&var2=2`, 显示：

```
var1: 1
var2: 2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T22:55:55.703

为什么不将所需的所有内容保存在单个查询字符串参数中并将其作为字符串在服务器端获取，
然后自行解析字符串并获取您想要的
东西，
`http://example.com?a=someVar&b=var1_value1__var2_value2__var3_value3`
然后在服务器端拆分字符串并获取变量和所有如果你不想要这个值

，那么你可以做的就是
通过 url 调用控制器并手动进入`Request.QueryString[]`集合，你将获得所有变量和那里的值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T22:59:44.157

您的控制器代码可能像

```
 public ActionResult MultipleParam(int a, int b, int c)
            {
                ViewData["Output"] = a + b + c;
                return View();
            } 
```

全球.asax.cs

```
public static void RegisterRoutes(RouteCollection routes)
        {
            routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

                       routes.MapRoute(
                "Parameter",
                "{controller}/{action}/{a}/{b}/{c}",
                new { controller = "Home", action = "MultipleParam", a = 0, b = 0, c = 0 }
        );

        } 
```

如果路由是{controller}/{action}/{id}/{page}，那么/Home/MultipleParam/101/1?showComments=true，那么检索机制就是：

```
public ActionResult MultipleParam(string id /* = "101" */, int page /* = 1 */, bool showComments /* = true */) { } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T14:48:19.110

另一种可能的解决方案是创建自定义路线

```
public class ParamsEnabledRoute : RouteBase
{
    private Route route;

    public ParamsEnabledRoute(string url)
    {
        route = new Route(url, new MvcRouteHandler());
    }

    public override RouteData GetRouteData(HttpContextBase context)
    {
        var data = route.GetRouteData(context);
        if (data != null)
        {
            var paramName = (string)data.Values["paramname"] ?? "parameters";
            var parameters = context.Request.QueryString.AllKeys.ToDictionary(key => key, key => context.Request.QueryString[key]);
            data.Values.Add(paramName, parameters);
            return data;
        }
        return null;
    }

    public override VirtualPathData GetVirtualPath(RequestContext context, RouteValueDictionary rvd)
    {
        return route.GetVirtualPath(context, rvd);
    }
} 
```

用法：

```
 public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.Add(new ParamsEnabledRoute("ParamsEnabled/{controller}/{action}/{paramname}"));
    } 
```

控制器：

```
public class HomeController : Controller
{
    public ActionResult Test(Dictionary<string, string> parameters)
    {
    }
} 
```

网址：

```
http://localhost/ParamsEnabled/Home/Test/parameteres?param1=value1&param2=value2 
```

路线属性：

```
public class RouteDataValueAttribute : ActionMethodSelectorAttribute
{
    private readonly RouteDataValueAttributeEnum type;

    public RouteDataValueAttribute(string valueName)
        : this(valueName, RouteDataValueAttributeEnum.Required)
    {
    }

    public RouteDataValueAttribute(string valueName, RouteDataValueAttributeEnum type)
    {
        this.type = type;
        ValueName = valueName;
    }

    public override bool IsValidForRequest(ControllerContext controllerContext, MethodInfo methodInfo)
    {
        if (type == RouteDataValueAttributeEnum.Forbidden)
        {
            return controllerContext.RouteData.Values[ValueName] == null;
        }
        if (type == RouteDataValueAttributeEnum.Required)
        {
            return controllerContext.RouteData.Values[ValueName] != null;
        }
        return false;
    }

    public string ValueName { get; private set; }
}

public enum RouteDataValueAttributeEnum
{
    Required,
    Forbidden
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-03T06:19:25.843

只需使用[HttpContext](https://msdn.microsoft.com/en-us/library/system.web.httpcontext(v=vs.110).aspx)来收集您的查询字符串。

```
using System.Web;

public class UnlimitedController : Controller
{
    public ActionResult Index(object queryParams)
    {

    }

    //or even better
    public ActionResult Index()
    {
         NameValueCollection queryString = HttpContext.Request.QueryString;
         // Access queryString in the same manner you would any Collection, including a Dictionary.
    }
} 
```

问题问“如何创建 ASP.NET MVC 控制器接受来自查询字符串的无限量参数”？任何控制器都将接受无限数量的参数作为`NamedValueCollection`.

# java - 从 Eclipse 的模拟器控制返回的值不准确

> ID：11404358
> 
> 赞同：0
> 
> 时间：2012-07-09T22:51:10.293
> 
> 标签：java, android, eclipse, google-maps

```
 //Show the current coordinates (Convert to String and round off - 6 decimal places)
        String printLat = new DecimalFormat("0.######").format((double)currentLat);
        String printLon = new DecimalFormat("0.######").format((double)currentLon);

        AlertDialog alert = new AlertDialog.Builder(Main.this).create();
        alert.setTitle("Current Location:");
        alert.setMessage("Latitude: " + printLat+ "\n" + "Longitude: " + printLon);
        alert.setButton("Close", new DialogInterface.OnClickListener()
        {               
            public void onClick(DialogInterface arg0, int arg1)
            {
                // TODO Auto-generated method stub
                //Alert Dialog won't work without a listener
                //Do nothing (This will simply close your alert dialog)
            }
        });     
        alert.show(); 
```

这是我主要课程的一部分。

我应该从我的模拟器中获取我发送的内容。但我没有得到准确的值，而是得到了这个：

纬度 - 14.069315 经度 - 121.323738

但我发送了这个（从我的模拟器控制）纬度 - 14.069316 经度 - 121.323739

这只是一个十进制数和一个小值的问题，但我担心这是否会对我的应用程序上出现的内容产生很大影响，因为我将使用这些值在我的谷歌地图上添加标记。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T23:02:08.480

这对我来说听起来像是舍入错误。

我不会担心这么多的错误，因为[小数点后第六位的数字等于地面不到 1 米（取决于位置所在的纬度）](http://en.wikipedia.org/wiki/Decimal_degrees)。

# java - CardLayout Manager 问题/困惑

> ID：11404366
> 
> 赞同：1
> 
> 时间：2012-07-09T22:52:43.847
> 
> 标签：java, swing, cardlayout

我目前正在开发一个程序，我之前曾问过[涉及](https://stackoverflow.com/questions/11401284/compiler-issues).

从那以后我已经取得了很大的进步，现在我准备开始客户端程序的 infoPanel 部分。我已经阅读了文档和其他问题，但我仍然有点困惑。我如何将面板设置为，你知道的，工作？如何将它与 JList 链接（如果甚至可以使用 JList 而不是组合框），然后如何确定哪些选择引用了哪张卡？

非常感谢您的帮助！

来源：

```
import javax.swing.*;
import java.util.*;
import java.awt.*;

public class ClientApp extends JFrame
{
    public static void main(String[] args)
    {
        new ClientApp();
    }

    public ClientApp()
    {
        this.setSize(320,380);
        this.setTitle("Honeydukes Candy Order");
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        this.setLayout(new BorderLayout());

        JPanel infoPanel = new JPanel(new CardLayout());
        JPanel invntryPanel = new JPanel();

        String[] candy = {"Acid Pops", "Bat's Blood Soup",
                          "Bertie Bott's Every Flavour Beans",
                          "Blood-flavoured Lollipops",
                          "Cauldron Cakes", "Charm Choc",
                          "Chocoballs", "Chocolate Cauldrons",
                          "Chocolate Frogs", "Chocolate Skeletons",
                          "Chocolate Wands", "Choco-Loco", "Cockroach Clusters",
                          "Nougat", "Crystallised Pineapple",
                          "Drooble's Best Blowing Gum", "Exploding Bonbons",
                          "Toffees", "Fizzing Whizzbees",
                          "Fudge Flies", "Ice Mice",
                          "Jelly Slugs", "Liquourice Wands",
                          "Pepper Imps", "Peppermint Toads",
                          "Pink Coconut Ice", "Pixie Puffs",
                          "Pumpkin Fizz", "Salt Water Taffy",
                          "Shock-o-Choc", "Skeletal Sweets",
                          "Splindle's Lick'O'Rish Spiders",
                          "Sugar Quills", "Sugared Butterfly Wings",
                          "Toothflossing Stringmints", "Tooth-Splintering Strongmints",
                          "Treacle Fudge", "Chocolates", "Wizochoc"};
        JList candyList = new JList(candy);
        candyList.setVisibleRowCount(18);
        candyList.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);

        JScrollPane scroll = new JScrollPane(candyList, JScrollPane.VERTICAL_SCROLLBAR_ALWAYS,
                                             JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);
        invntryPanel.add(scroll);

        JPanel startCard = new JPanel();
        JPanel acidPopsCard = new JPanel();
        JPanel batsBloodSoupCard = new JPanel();
        JPanel bertieBottsCard = new JPanel();
        JPanel bloodPopsCard = new JPanel();
        JPanel cauldronCakesCard = new JPanel();
        JPanel charmChocCard = new JPanel();
        JPanel chocoballsCard = new JPanel();
        JPanel chocCauldronsCard = new JPanel();
        JPanel chocFrogsCard = new JPanel();
        JPanel chocSkeleCard = new JPanel();
        JPanel chocWands = new JPanel();
        JPanel chocolocoCard = new JPanel();
        JPanel roachClustersCard = new JPanel();
        JPanel nougatCard = new JPanel();
        JPanel crystalPineappleCard = new JPanel();
        JPanel droobleGumCard = new JPanel();
        JPanel explodeBonbonsCard = new JPanel();
        JPanel toffeesCard = new JPanel();
        JPanel fizzWhizCard = new JPanel();
        JPanel fudgeFliesCard = new JPanel();
        JPanel iceMiceCard = new JPanel();
        JPanel jellySlugsCard = new JPanel();
        JPanel liquorWandsCard = new JPanel();
        JPanel pepImpsCard = new JPanel();
        JPanel pinkCocoIceCard = new JPanel();
        JPanel pixiePuffsCard = new JPanel();
        JPanel pumpkFizzCard = new JPanel();
        JPanel saltTaffeyCard = new JPanel();
        JPanel shockChocCard = new JPanel();
        JPanel skeleSweetsCard = new JPanel();
        JPanel spindleSpidersCard = new JPanel();
        JPanel sugarQuillsCard = new JPanel();
        JPanel sugarWingsCard = new JPanel();
        JPanel flossMintsCard = new JPanel();
        JPanel splintMintsCard = new JPanel();
        JPanel treacleFudgeCard = new JPanel();
        JPanel chocolatesCard = new JPanel();
        JPanel wizochocCard = new JPanel();

        infoPanel.add(startCard);
        infoPanel.add(acidPopsCard);
        infoPanel.add(batsBloodSoupCard);
        infoPanel.add(bertieBottsCard);
        infoPanel.add(bloodPopsCard);
        infoPanel.add(cauldronCakesCard);
        infoPanel.add(charmChocCard);
        infoPanel.add(chocoballsCard);
        infoPanel.add(chocCauldronsCard);
        infoPanel.add(chocFrogsCard);
        infoPanel.add(chocSkeleCard);
        infoPanel.add(chocWands);
        infoPanel.add(chocolocoCard);
        infoPanel.add(roachClustersCard);
        infoPanel.add(nougatCard);
        infoPanel.add(crystalPineappleCard);
        infoPanel.add(droobleGumCard);
        infoPanel.add(explodeBonbonsCard);
        infoPanel.add(toffeesCard);
        infoPanel.add(fizzWhizCard);
        infoPanel.add(fudgeFliesCard);
        infoPanel.add(iceMiceCard);
        infoPanel.add(jellySlugsCard);
        infoPanel.add(liquorWandsCard);
        infoPanel.add(pepImpsCard);
        infoPanel.add(pinkCocoIceCard);
        infoPanel.add(pixiePuffsCard);
        infoPanel.add(pumpkFizzCard);
        infoPanel.add(saltTaffeyCard);
        infoPanel.add(shockChocCard);
        infoPanel.add(skeleSweetsCard);
        infoPanel.add(spindleSpidersCard);
        infoPanel.add(sugarQuillsCard);
        infoPanel.add(sugarWingsCard);
        infoPanel.add(flossMintsCard);
        infoPanel.add(splintMintsCard);
        infoPanel.add(treacleFudgeCard);
        infoPanel.add(chocolatesCard);
        infoPanel.add(wizochocCard);

        this.add(invntryPanel, BorderLayout.WEST);
        this.add(infoPanel, BorderLayout.EAST);
        this.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T23:06:35.763

我将向 JList 添加一个 ListSelectionListener，并在该侦听器内部更改 CardLayout 显示的卡片。

您确实需要先阅读[有关如何使用 CardLayout 的教程，](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)因为您会看到您的 add 方法是错误的。考虑将 JList 保存的字符串用作您在将组件添加到使用 CardLayout 的面板时使用的常量。

# asp.net-mvc - 使用来自外部项目的 Ninject 解决依赖关系

> ID：11404368
> 
> 赞同：1
> 
> 时间：2012-07-09T22:52:49.937
> 
> 标签：asp.net-mvc, asp.net-mvc-3, ninject

我目前正在开发一个项目，我将开发将被预编译的视图，并将成为我无法控制的外部 MVC 3.0 Web 解决方案的一部分。

我的部分要求是我需要访问底层数据库才能获取一些数据。我想根据需要使用 Ninject（我被告知这是外部解决方案使用的）将数据库实例注入我的控制器。

我知道您在 Global.asax 这样的地方添加了绑定，但是我无权访问它，因为这是我无法控制的外部解决方案的一部分。

无论如何，我是否可以在包含预编译视图等的项目中创建此依赖注入，并确保在外部项目加载我们的控制器时解决它？

如果这太模糊，请告诉我，我会尝试提供更多信息。

编辑：最初在接受达林的建议后，我得到了以下例外：

```
System.InvalidOperationException crossed a native/managed boundary
  Message=Sequence contains no elements
  Source=System.Core
  StackTrace:
       at System.Linq.Enumerable.Single[TSource](IEnumerable`1 source)
       at Ninject.Web.Mvc.NinjectMvcHttpApplicationPlugin.Start() in c:\Projects\Ninject\ninject.web.mvc\mvc3\src\Ninject.Web.Mvc\NinjectMvcHttpApplicationPlugin.cs:line 53
       at Ninject.Web.Common.Bootstrapper.<Initialize>b__0(INinjectHttpApplicationPlugin c) in c:\Projects\Ninject\Ninject.Web.Common\src\Ninject.Web.Common\Bootstrapper.cs:line 52
       at Ninject.Infrastructure.Language.ExtensionsForIEnumerableOfT.Map[T](IEnumerable`1 series, Action`1 action) in c:\Projects\Ninject\ninject\src\Ninject\Infrastructure\Language\ExtensionsForIEnumerableOfT.cs:line 32
       at Ninject.Web.Common.Bootstrapper.Initialize(Func`1 createKernelCallback) in c:\Projects\Ninject\Ninject.Web.Common\src\Ninject.Web.Common\Bootstrapper.cs:line 52
       at MyApp.App_Start.NinjectWebCommon.Start() in C:\App\NinjectWebCommon.cs:line 28
  InnerException: 
```

然而，考虑到这一点，引导程序应该已经在我们的外部 MVC 应用程序中初始化（假设他们正在使用我猜的这种方法）。所以我不需要做所有的初始化，我需要做的就是用当前的内核注册我的依赖项。

就像是：

```
public static class NinjectWebCommon
{
    private static readonly Bootstrapper bootstrapper = new Bootstrapper();

    /// <summary>
    /// Starts the application
    /// </summary>
    public static void Start()
    {
        RegisterServices(bootstrapper.Kernel);
    }

    /// <summary>
    /// Load your modules or register your services here!
    /// </summary>
    /// <param name="kernel">The kernel.</param>
    private static void RegisterServices(IKernel kernel)
    {
        kernel.Bind<IDataContext>().To<ApiDataContext>();
    } 
} 
```

当这样做时，我现在得到注入的项目。但是我不是 100% 这是正确的解决方案，但它似乎有效？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T06:25:48.847

> 我知道您在 Global.asax 这样的地方添加了绑定

不必要。您最近是否[`Ninject.MVC3`](http://nuget.org/packages/Ninject.MVC3)在新的 MVC 应用程序中安装了 NuGet？如果你还没有，我现在邀请你这样做。只需使用 Visual Studio 中的 Internet 应用程序模板创建一个新的 ASP.NET MVC 3 项目并安装此 NuGet。准备好？

完成此操作后，您会注意到在`App_Start`项目的文件夹中创建了 NuGet 包。一点都没碰`Global.asax`。现在让我们检查`NinjectWebCommon.cs`添加到此文件夹中的文件的内容：

```
[assembly: WebActivator.PreApplicationStartMethod(typeof(MvcApplication1.App_Start.NinjectWebCommon), "Start")]
[assembly: WebActivator.ApplicationShutdownMethodAttribute(typeof(MvcApplication1.App_Start.NinjectWebCommon), "Stop")]

namespace MvcApplication1.App_Start
{
    using System;
    using System.Web;

    using Microsoft.Web.Infrastructure.DynamicModuleHelper;

    using Ninject;
    using Ninject.Web.Common;

    public static class NinjectWebCommon 
    {
        private static readonly Bootstrapper bootstrapper = new Bootstrapper();

        /// <summary>
        /// Starts the application
        /// </summary>
        public static void Start() 
        {
            DynamicModuleUtility.RegisterModule(typeof(OnePerRequestHttpModule));
            DynamicModuleUtility.RegisterModule(typeof(NinjectHttpModule));
            bootstrapper.Initialize(CreateKernel);
        }

        /// <summary>
        /// Stops the application.
        /// </summary>
        public static void Stop()
        {
            bootstrapper.ShutDown();
        }

        /// <summary>
        /// Creates the kernel that will manage your application.
        /// </summary>
        /// <returns>The created kernel.</returns>
        private static IKernel CreateKernel()
        {
            var kernel = new StandardKernel();
            kernel.Bind<Func<IKernel>>().ToMethod(ctx => () => new Bootstrapper().Kernel);
            kernel.Bind<IHttpModule>().To<HttpApplicationInitializationHttpModule>();

            RegisterServices(kernel);
            return kernel;
        }

        /// <summary>
        /// Load your modules or register your services here!
        /// </summary>
        /// <param name="kernel">The kernel.</param>
        private static void RegisterServices(IKernel kernel)
        {
        }        
    }
} 
```

请注意 WebActivator`PreApplicationStartMethod`和`ApplicationShutdownMethodAttribute`程序集的属性，它们允许您插入分别在 ASP.NET 应用程序启动和关闭时执行的代码。

好的，现在只需将此代码放入您的库中并在`RegisterServices`方法中配置您的内核。

# jboss7.x - JBoss AS7 在使用带有standalone-ha.xml 的集群时共享多播地址

> ID：11404372
> 
> 赞同：0
> 
> 时间：2012-07-09T22:53:26.843
> 
> 标签：jboss7.x, multicast

我正在使用standalone-ha.xml 来集群JBoss 7.1.1.Final。

我可以为所有套接字使用相同的多播地址吗？即 jgroups-diagnostics、jgroups-mping、jgroups-udp、modcluster？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:17:22.027

当然是。只需为每个不同的服务使用唯一的端口。即 jgroups-diagnostics、jgroups-mping、jgroups-udp、modcluster？

# struts2 - 在 Struts2 中为整个应用程序设置浮点格式

> ID：11404375
> 
> 赞同：1
> 
> 时间：2012-07-09T22:53:35.070
> 
> 标签：struts2

我正在使用 Struts2 开发一个应用程序，该应用程序需要**显示**所有浮点数，格式如下：“#.00”，表示整数部分，一个点作为小数分隔符和小数部分的前两位。

有没有办法（可能使用 global.properties 文件）为应用程序设置此行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T07:58:36.417

我认为你应该做的是实现[HttpSessionListener](http://docs.oracle.com/javaee/5/api/javax/servlet/http/HttpSessionListener.html)或[ServletContextListener](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContextListener.html)并将你的浮点格式放在会话或上下文中。然后，您可以使用 ognl 或 struts 2 属性标签在您的 jsp 中访问它们。

# web-services - 如何在 SOA 架构中执行相当于 SELECT .. FRO UPDATE 的操作？

> ID：11404376
> 
> 赞同：-1
> 
> 时间：2012-07-09T22:53:45.700
> 
> 标签：web-services, oracle, transactions, locking, odp.net

标题可能不够明确，所以让我试着解释一下。我正在开发一个基于 .NET 的新项目，它由 WPF 客户端组成，这些客户端使用 WCF Web 服务来访问 Oracle 数据库。问题不在于这个基本架构，而在于它应该如何与已经存在的东西一起工作。

目前，应用程序使用 PowerBuilder 编写并直接连接到数据库。此外，他们广泛使用 Oracle 的`SELECT .. FOR UPDATE`语句通过锁定记录来管理并发性。由于新应用程序必须与旧应用程序并存，因此它们也应该以类似的方式锁定记录，但是依赖于 Web 服务的新架构并不容易做到这一点。

目前，我们正在考虑构建一个“数据服务器”，它将被 Web 服务调用并负责访问数据库。此服务器的目的是维护在多个 Web 服务调用中维护记录锁定所需的打开连接/事务。这是必需的，因为需要操作的“选择”和随后的“更新”部分`SELECT .. FOR UPDATE`最有可能发生在至少两个单独的 Web 服务调用中（“获取记录”和“更新后”。）

我已经在 Internet 上搜索了有关这种情况的文档，但我似乎找不到关于该主题的太多内容。可以做到这一点——即在多个 Web 服务调用中保持打开记录锁——可以吗？适当地？我的方法合适吗？是否有任何已发布的关于此事的“最佳实践”？

**更新：**问题的原标题是*如何使用面向服务的架构维护记录锁定？*我按照约翰的建议更改了它，希望它可以激发一些答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-25T23:45:57.073

一般来说，SOA 已经开启了 XA 事务。因此，您可以从中受益并使用 UPDATE / SELECT / UPDATE 策略。也就是说，您将 UPDATE/SELECT 作为单个 INVOKE 示例执行为：

*   UPDATE MY_TABLE SET state='Working' ... ;
*   SELECT * FROM MY_TABLE WHERE state='Working' ...

然后，您可以处理数据而不必担心其他人会声称该数据，因为它已经处于不同的“状态”，前提是您为每个表编写的服务仅存在一个。

最后，您可以使用 UPDATE ... SET ... state='Complete' where state='Working' 来完成它。顺便说一句，这与 DatabaseAdapter 用于轮询的策略相同。

# css - Jquery-ui 选项卡 CSS 问题

> ID：11404377
> 
> 赞同：0
> 
> 时间：2012-07-09T22:53:52.650
> 
> 标签：css, jquery-ui, tabs

我目前正在为 jquery-ui 选项卡的 css 布局而苦苦挣扎。我正在使用两个 css，我最初将第一个 css 放在一起以获得我想要的标签外观（请看图 2）。为我在网页上使用的警报对话框添加了第二个名为 jquery-ui-1.8rc2.custom.css 的 css。现在，如果我同时使用它们两个 css 选项卡将不成比例（见图 2）。

如何避免/绕过/解决我目前正在处理的这个 CSS 问题？

我想要的标签 CSS 展望： ![在此处输入图像描述](../Images/3a5650c2d711153096f627059bf82657.png)

由 jquery-ui-1.8rc2.custom.css 扭曲的选项卡 CSS 外观： ![在此处输入图像描述](../Images/6fadc09170af579af50b4fe1d9d9380a.png)

我网站中使用 jquery-ui-1.8rc2.custom.css 的警报框：

![在此处输入图像描述](../Images/37c18269806ab4d7d19f5922d9aefb4c.png)

**编辑：**

这是我的 tabs.css

```
<style>

#page-wrap                          { width: 615px; background:#FFF; margin: 10px auto; margin: 0; padding: 0;  }

.ui-tabs                            { zoom: 1;}
.ui-tabs .ui-tabs-nav               { list-style: none; position: relative; overflow:hidden;
                                       z-index: 1000; background: #EBEBEB; margin: 0; padding: 0;}

.ui-tabs .ui-tabs-nav li            { position: relative; float: left; 
                                      border-bottom-width: 0 !important;  margin: 0 0px -1px 0;  background: #EBEBEB;}
.ui-tabs .ui-tabs-nav li a          { float: left; text-decoration: none; padding: 5px 10px ;  outline: medium none; font-weight: bold; font-size:11px; line-height: 
30px;}
.ui-tabs .ui-tabs-nav 
li.ui-tabs-selected                 { border-bottom-width: 0; background: #F9AE5C;   border-top:1px solid #D4D4D4; border-left:1px solid #D4D4D4; border-right:1px solid #D4D4D4; border-bottom:1px solid #FFF; }
.ui-tabs .ui-tabs-nav 
li.ui-tabs-selected a, .ui-tabs 
.ui-tabs-nav li.ui-state-disabled a, 
.ui-tabs .ui-tabs-nav 
li.ui-state-processing a            { cursor: text;  }
.ui-tabs .ui-tabs-nav li a, 
.ui-tabs.ui-tabs-collapsible 
.ui-tabs-nav li.ui-tabs-selected a  { cursor: pointer; color: #222222; } /* first selector in group seems obsolete, but required to overcome bug in Opera applying cursor: text overall if defined elsewhere... */
.ui-tabs .ui-tabs-panel             { padding: 20px; display: block; border-width: 0;  background: none; 
                                       position: relative; min-height: 100px;  border: 1px solid #D4D4D4;  }
.ui-tabs .ui-tabs-hide              { display: none !important; margin: 0; padding: 0;}
.pngIcon{ padding:0px 5px 0px 5px; vertical-align:bottom;}

a.mover                             { background: #900; padding: 6px 12px; position: absolute;
                                      color: white; font-weight: bold; text-decoration: none; }
.next-tab                           { bottom: 0; right: 0; -moz-border-radius-topleft: 10px; -webkit-border-top-left-radius: 10px; border-top-left-radius: 10px; }
.prev-tab                           { bottom: 0; left: 0; -moz-border-radius-topright: 10px; -webkit-border-top-right-radius: 10px; border-top-right-radius: 10px; }
</style> 
```

至于 jquery-ui-1.8rc2.custom.css 这里是[LINK](http://webprolearner2346.zxq.net//TabsNextPrev/css/custom-theme/jquery-ui-1.8rc2.custom.css)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T23:14:32.367

我敢打赌，如果 .custom.css 覆盖了您的 .css 规则，那么您在 head 部分中第二个调用 .custom.css 样式表。首先调用 custom.css，然后调用你的。稍后对 .css 文件的调用应覆盖样式表之间重复的任何规则。研究与多个样式表相关的“特异性”。

# android - 如何使用 SAX Parser 在 android 中解析 xml？

> ID：11404379
> 
> 赞同：0
> 
> 时间：2012-07-09T22:54:09.730
> 
> 标签：android, xml-parsing, saxparser

我是 android 的菜鸟，我正在尝试学习如何使用 SAX 解析器解析 xml。我编写了一个测试应用程序来尝试实现它，但我似乎无法让它工作。我希望我的 textview 显示来自 xml 的相应值，但它不起作用。任何人都可以帮忙吗？

解析器

```
public class ParseTestActivity extends Activity implements View.OnClickListener {
/** Called when the activity is first created. */
final static String TAG = "spotxml";
TextView tv;
WebView xml;
Button help, help2;
int livespot = 0;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    tv = (TextView) findViewById(R.id.textView1parsed);
    help = (Button) findViewById(R.id.button1);
    help2 = (Button) findViewById(R.id.button2);
    help.setOnClickListener(this);
    help2.setOnClickListener(this);
    xml = (WebView) findViewById(R.id.webView1);

    try{
    xml.loadUrl("http://www.xmlcharts.com/cache/precious-metals.xml");
    }catch (Exception e){
        e.printStackTrace();
    }

    try{
        URL xmlcharts = new URL("http://www.xmlcharts.com/cache/precious-metals.xml");  
        //InputSource local = new InputSource(getResources().openRawResource(R.raw.preciousmetals));
        SAXParserFactory spf = SAXParserFactory.newInstance();
        SAXParser sp = spf.newSAXParser();
        XMLReader xr = sp.getXMLReader();
        HandlingXMLStuff doingWork = new HandlingXMLStuff();
        xr.setContentHandler(doingWork);
        xr.parse(new InputSource(xmlcharts.openStream()));  
        //xr.parse(local);
        XMLDataCollected information = doingWork.getInformation(); 
        //String information = doingWork.getInformation();
        tv.setText(information.toString());
        livespot = Integer.parseInt(information.toString());
    }catch(Exception e){
        Toast.makeText(ParseTestActivity.this, "Error", Toast.LENGTH_LONG).show();
        Log.e(TAG, "WeatherQueryError", e);
    }

}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    switch(v.getId()){
    case R.id.button1:
        try{
            URL xmlcharts = new URL("http://www.xmlcharts.com/cache/precious-metals.xml");  
            //InputSource local = new InputSource(getResources().openRawResource(R.raw.preciousmetals));
            SAXParserFactory spf = SAXParserFactory.newInstance();
            SAXParser sp = spf.newSAXParser();
            XMLReader xr = sp.getXMLReader();
            HandlingXMLStuff doingWork = new HandlingXMLStuff();
            xr.setContentHandler(doingWork);
            xr.parse(new InputSource(xmlcharts.openStream()));  
            //xr.parse(local);
            XMLDataCollected information = doingWork.getInformation();
            //String information = doingWork.getInformation();
            tv.setText(information.toString());
            livespot = Integer.parseInt(information.toString());
        }catch(Exception e){
            Toast.makeText(ParseTestActivity.this, "Error", Toast.LENGTH_LONG).show();
            Log.e(TAG, "WeatherQueryError", e);
        }
        break;
    case R.id.button2:
        try{                
            //URL xmlcharts = new URL("http://www.xmlcharts.com/cache/precious-metals.xml");    
            InputSource local = new InputSource(getResources().openRawResource(R.raw.preciousmetals));
            SAXParserFactory spf = SAXParserFactory.newInstance();
            SAXParser sp = spf.newSAXParser();
            XMLReader xr = sp.getXMLReader();
            HandlingXMLStuff doingWork = new HandlingXMLStuff();
            xr.setContentHandler(doingWork);
            //xr.parse(new InputSource(xmlcharts.openStream()));    
            xr.parse(local);
            XMLDataCollected information = doingWork.getInformation();
            //String information = doingWork.getInformation();
            tv.setText(information.toString());
            livespot = Integer.parseInt(information.toString());
        }catch(Exception e){
            Toast.makeText(ParseTestActivity.this, "Error", Toast.LENGTH_LONG).show();
            Log.e(TAG, "WeatherQueryError", e);
        }
        break;
}
}} 
```

内容处理程序

```
import org.xml.sax.Attributes;
import org.xml.sax.SAXException;
import org.xml.sax.helpers.DefaultHandler;

public class HandlingXMLStuff extends DefaultHandler {

        private boolean in_prices = false;
        private boolean in_pricelist = false;
        private boolean in_uspricegold = false;
        private boolean in_uspricesilver = false;
        String gs = null;
        String ss = null;

    private XMLDataCollected info = new XMLDataCollected();

    //public String getInformation(){
    //  return info.datatoString();
    //}
    public XMLDataCollected getInformation(){
        return this.info;
    }

    @Override
    public void startDocument() throws SAXException {
    this.info = new XMLDataCollected();
    }

    @Override
    public void endDocument() throws SAXException {
              // Nothing to do
    }

    @Override
    public void startElement(String uri, String localName, String qName,
            Attributes attributes) throws SAXException {
        // TODO Auto-generated method stub
        if (localName.equalsIgnoreCase("prices")) {
            this.in_prices = true ;
        }else if (localName.equalsIgnoreCase("pricelist")) {
            String attrValue = attributes.getValue("currency");
            if (attrValue.equalsIgnoreCase("usd")){
            this.in_pricelist = true;
        }else if (localName.equalsIgnoreCase("price")){
            String attrValue2 = attributes.getValue("commodity");
            if (attrValue2.equalsIgnoreCase("gold")){
            this.in_uspricegold = true;
        }else if (localName.equalsIgnoreCase("price")){
            String attrValue3 = attributes.getValue("commodity");
            if (attrValue3.equalsIgnoreCase("silver")){
            this.in_uspricesilver = true;
        }
        }}}
    }
     @Override
      public void endElement(String namespaceURI, String localName, String qName)
                    throws SAXException {
             if (localName.equalsIgnoreCase("prices")) {
                 this.in_prices = false;
             }else if (localName.equalsIgnoreCase("pricelist")) {
                 this.in_pricelist = false;
             }else if (localName.equalsIgnoreCase("price")) {
                 this.in_uspricegold = false;
             }else if (localName.equalsIgnoreCase("price")) {
                 this.in_uspricesilver = false;       
             }
     }  

     @Override
     public void characters(char[] ch, int start, int length)throws SAXException {

                    if(this.in_uspricegold) {                       
                    //info.setSpotGold(new String (ch, start, length));                     
                    //} 
                    int spotgold = Integer.parseInt(new String (ch, start, length));                        
                    info.setSpotGold(spotgold);
                    this.in_uspricegold = false;
                    }else{}

                    if(this.in_uspricesilver){                     
                    //info.setSpotSilver(new String(ch, start, length));                      
                    // }    
                    int spotsilver = Integer.parseInt(new String(ch, start, length));                       
                    info.setSpotSilver(spotsilver);
                    this.in_uspricesilver = false;
                    }else{}
            }

    } 
```

收集的数据集

```
public class XMLDataCollected{

 private int spotsilver = 0;
 private int spotgold = 0;

    public int getSpotGold() {
    return spotgold;
    }   
    public void setSpotGold(int spotgold){          
    this.spotgold = spotgold;   
    }

    public int getSpotSilver() {
    return spotsilver;
    }           
    public void setSpotSilver(int spotsilver){      
    this.spotsilver = spotsilver;
    }

    public String toString(){
        return  "gold " + spotgold + " silver "+ spotsilver;

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T23:08:39.690

首先，您的方法字符必须简单得多。它唯一要做的就是读取标签之间的字符。它会是这样的：

```
public void characters(char[] ch, int start, int end) {
    buffer.append(new String(ch, start, end));
} 
```

如您所见，我使用 StringBuffer 作为私有字段。*它在startElement*方法的开头进行实例化，并在*endElement*的开头“重置” 。

```
 value = buffer.toString();
    buffer.setLength(0); 
```

字段*值*实际上会保留字段的真实值。

我所有的课程供参考：

```
private String value;
private StringBuffer buffer;

@Override
public void startElement(
        String nameSpaceURI, 
        String localName, 
        String qName, 
        Attributes atts
        ) {

    buffer = new StringBuffer();

    if(localName.equals("myTag"))
    bean = new Bean();

}

public void endElement(
        String uri, 
        String localName, 
        String qName) {

    value = buffer.toString();
    buffer.setLength(0);

    if(localName.equals("myTag") {
        bean.setSomething(value);
    }

}

public void characters(char[] ch, int start, int end) {
    buffer.append(new String(ch, start, end));
} 
```

希望这可以帮助。:)

**编辑**

这里的代码适应了 op xml。我还没有尝试过，但应该可以。;)

```
private String value;
private StringBuffer buffer;

private XMLCOllected info;
private boolean inPriceList;
private boolean inGold;
private boolean inSilver;

@Override
public void startElement(
        String nameSpaceURI,
        String localName,
        String qName,
        Attributes atts
) {

    buffer = new StringBuffer();

    if(localName.equals("prices")) {
        this.info = new XMLCollected();
    } else if(localName.equals("pricelist")) {
        String attr = atts.getValue("currency");
        if(attr.equals("usd")) {
            this.inPriceList = true;
        }
    } else if(localName.equals("price") && inPrices) {
        String attr = atts.getValue("commodity");
        if(attr.equals("gold")) {
            this.inGold = true;
        } else if(attr.equals("silver")) {
            this.inSilver = true;
        }
    }
}

public void endElement(
        String uri,
        String localName,
        String qName) {

    value = buffer.toString();
    buffer.setLength(0);

    if(localName.equals("price") && inGold && inPriceList) {
        this.info.setSpotGold(value);
        this.inGold = false;
    } else if(localName.equals("price") && inSilver && inPriceList) {
        this.info.setSpotSilver(value);
        this.inSilver = false;
    } else if(localName.equals("pricelist")) {
        this.inPriceList = false;
    }
}

public void characters(char[] ch, int start, int end) {
    buffer.append(new String(ch, start, end));
} 
```

# c# - System.Speech 无法识别

> ID：11404380
> 
> 赞同：0
> 
> 时间：2012-07-09T22:54:10.130
> 
> 标签：c#, speech-to-text

我正在使用 C# 2010 Express，我想做语音识别。但是，当我在文件开头键入以下内容时：

```
using System.Speech; 
```

`System.Speech`不被识别。可以肯定的是，我安装了 Microsoft 的 Speech SDK，但没有发现任何区别。

我正在使用 .NET 4.0 Client Profile 框架，我认为它应该可以正常工作。

我应该怎么做才能解决这个问题？这是 C# Express 的限制吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T23:12:19.130

您必须添加对它的引用。转到解决方案资源管理器：

![在此处输入图像描述](../Images/4b47236a2dd70eebecdf9674d0f39a47.png)

然后右键单击引用项并选择添加引用。确保您在弹出的窗口中位于 .Net 选项卡上。向下滚动直到看到 System.Speech。

![在此处输入图像描述](../Images/b4be94b34e94d8cf19921b3b3a5215e6.png)

选择它并单击确定。现在它将识别语音。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-11T18:38:01.000

它支持 .NET 4.0 和更高版本..您需要从添加引用 .NET 选项卡中显式包含该命名空间

# python - Python 线程——更新 GUI 时崩溃

> ID：11404382
> 
> 赞同：0
> 
> 时间：2012-07-09T22:54:15.600
> 
> 标签：python, multithreading, macos

所以这是我的问题——

我正在使用 wx python 创建一个 python GUI 应用程序。单击进程按钮后，会在幕后进行一些文件创建/编码。最初，这在 GUI 工作时冻结了所有内容，因此我决定在单独的线程上进行文件创建/编码——这就是问题所在，只要创建线程的方法完成——（相对较快）这是实际创建线程的代码：

```
for audiobook in AudioBookObjects:
        thread.start_new(self.createSingleBook, tuple([audiobook])) 
```

所以这是奇怪的部分——在我使用此代码的一台机器上，让一个线程运行，完成并返回而不会冻结 gui。在另一台机器上，它非常快地发射了两个线程，当它们终止时它们崩溃了！有什么东西会改变操作系统之间线程的行为吗？我正在使用相同版本的python。我对此非常肯定。

基本上，我需要知道两件事：在创建它们的方法结束后 python 线程会发生什么，以及如果触发器方法必须坚持让线程优雅地结束，我如何构建一个不会冻结的 GUI！？

提前致谢！如果您需要更多信息，请告诉我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T00:03:41.043

如果我没记错的话，windows 会做“真正的”线程，在 Linux 线程中是进程。不同之处在于，普通线程共享相同的内存而进程不共享。

我猜你的程序在win下崩溃并在linux下运行。如果我没记错的话，很可能您的 createSingleBook-threads 访问的是同一个对象，该对象似乎没有锁定保护。

使用真正的分叉，如果没有明确说明，一切都是重复的。因此，您将获得更多针对锁定和竞争条件的保护。

只是我的初步猜测，有更深入了解的人随时纠正我。否则，我建议对您尝试操作的对象实施锁定。

# javascript - 具有多对多关系的 Knockout JS ObservableArray

> ID：11404387
> 
> 赞同：4
> 
> 时间：2012-07-09T22:54:58.607
> 
> 标签：javascript, mvvm, knockout.js, knockout-mapping-plugin

我正在使用 Knockout.js 创建一个客人列表应用程序，到目前为止一切进展顺利。但是，我有一个最佳实践问题。我的应用程序有几种不同类型的对象：客人和标签。客人可以有多个标签，标签可以有多个客人。在应用程序的不同点，我需要分别显示两个数组。例如，我有一个“客人”视图，可以看到所有客人及其关联的标签，我还有一个“标签”视图，可以看到所有标签及其关联的客人。目前，我为客人添加标签的代码如下所示：

```
var tag = function(opts) {
  this.guests = ko.observableArray()

  // Other tag code here...
}

var guest = function(opts) {
  this.tags = ko.observableArray()
  // Other guest code here...

  var self = this

  this.addTag = function(tag) {
    self.tags.push(tag)
    tag.guests.push(self)
  }
} 
```

我知道除了独立更新每个 observableArray 之外，在 Knockout 中必须有更好的方法来处理这种多对多关系。这也导致了一种递归应用程序结构，其中客人有一个标签属性/数组，其中包含一个标签，它有一个客人属性/数组，其中包含一个客人，它有一个标签属性......你明白了。

现在，ViewModel 结构是这样的：

```
- Parent Object
  - Guests ObservableArray
    - Guest Object
      - Tag Object as property of Guest
  - Tags ObservableArray
    - Tag Object
      - Guest Object as property of Tag 
```

所以我想我的问题是双重的：1）有没有更好的方法来构造我的 ViewModel 以避免递归数组？和 2) 如何更好地使用 Knockout.js 以 DRY 方式更新我的 ViewModel，而不是单独更新标签数组和来宾数组？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T23:45:25.473

可能还有其他方法可以做到这一点，但是这种方法的重复性非常小，而且不会牺牲适当的建模。服务器以这种格式生成数据应该没有问题。

这是在一个（粗略风格的）[小提琴](http://jsfiddle.net/T5mav/1/)中。请注意，单击标签或访客将导致其下方的选择更新（默认选择第一个）。

基本上，通过 id 存储关系，并使用`computed`数组来表示关联。这是一个基本的视图模型：

```
var ViewModel = function(guests, tags) {
    var self = this;
    self.guests = ko.observableArray(
        ko.utils.arrayMap(guests, function(i){ return new Guest(i); }
    ));
    self.tags= ko.observableArray(
        ko.utils.arrayMap(tags, function(i){ return new Tag(i); }
    ));

    self.selectedGuest = ko.observable(self.guests()[0]);
    self.selectedTag = ko.observable(self.tags()[0]);

    self.guestTags = ko.computed(function() {
        return ko.utils.arrayFilter(self.tags(), function(t) {
            return self.selectedGuest().tags().indexOf(t.id()) > -1;
        });        
    });

    self.tagGuests = ko.computed(function() {
        return ko.utils.arrayFilter(self.guests (), function(g) {
            return self.selectedTag().guests().indexOf(g.id()) > -1;
        });        
    });
}; 
```

## 更新

所以我做了一个[新的小提琴](http://jsfiddle.net/tyrsius/EhAqr/1/)来演示一种不同的映射，但是这段代码可以很容易地与上面的视图模型共存；它仅用于演示。它不是处理选择，而是提供一般查找，以便任何代码都可以使用它。下面是来自标签的 HTML（来宾是对称的），以及`guestMap`添加到视图模型中的功能。

您会注意到名称`input`现在是 s，因此您可以更改名称并观察所有绑定保持最新状态。让我知道你的想法：

```
<div>Tags
    <ul data-bind="foreach: tags">
        <li>
            <input data-bind="value: name, valueUpdate: 'afterkeydown'" />
            </br><span>Tags</span>
            <ul data-bind="foreach: guests">
                <li><span data-bind="text: $parents[1].guestMap($data).name()"></span></li>
            </ul>
        </li>
    </ul>
</div> 
```

* * *

```
self.guestMap = function(id) {
        return ko.utils.arrayFirst(self.guests(), function(g) {
            return id == g.id();
        });
    }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T17:24:43.580

我有同样的问题。显示多对多相关的东西。我必须进行“网格”样式显示并在其中具有更新机制。

我最终复制了我在后端数据库中的结构。两个项目表，中间有连接表。从三个数组中提取数据并不断更新“加入”数组。测试数据和我的测试在下面。

```
var items = [{name: "T1",id: 1}, {name: "T2",id: 2}, {name: "T3",id: 3}, {name: "T4",id: 4}];
var cats = [{catname: 'C1', catid: 1}, {catname: 'C2',catid: 2}, {catname: 'C3',catid: 3}, {catname: 'C4',catid: 4}];
var catsItems = [{catid:1,itemid:2},{catid:2,itemid:1},{catid:4,itemid:2},{catid:3,itemid:4},{catid:3,itemid:1},{catid:1,itemid:3},{catid:2,itemid:4}]; 
```

[加入表小提琴](http://jsfiddle.net/telfving/uj4Sc/)

我不确定这种方法在处理大量数据时的效率如何，但做了我需要它做的事情。

# svg - 反转 SVG 剪辑（仅显示外部路径）

> ID：11404391
> 
> 赞同：30
> 
> 时间：2012-07-09T22:55:29.053
> 
> 标签：svg

是否可以使用 SVG 反转剪辑的动作？在下面的示例中，我想显示两个圆圈之间的路径，而不是圆圈内的路径：

```
<svg xmlns="http://www.w3.org/2000/svg" width="985" height="740">
  <g>
    <clipPath id="re8-clip" clip-rule="nonzero">
      <rect id="sa11" x="763.0" y="176.5" width="70.0" height="25.0" rx="50" ry="50" fill="ForestGreen"/>
      <rect id="sa12" x="516.0" y="127.5" width="70.0" height="25.0" rx="50" ry="50" fill="ForestGreen"/>
    </clipPath>
    <rect id="sa11" x="763.0" y="176.5" width="70.0" height="25.0" rx="50" ry="50" fill="ForestGreen"/>
    <rect id="sa12" x="516.0" y="127.5" width="70.0" height="25.0" rx="50" ry="50" fill="ForestGreen"/>
  </g>
  <path stroke="Black" stroke-width="1.5" fill="none" d="M 798.0 189.0 551.0 140.0" clip-path="url(#re8-clip)"/>
</svg> 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-10T08:47:59.137

按照 Duopixel 评论中的链接，可以使用以下方法解决问题`mask`：

```
<svg width="50%" height="50%" viewbox="0 0 985 740" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <rect id="sa11" x="763.0" y="176.5" width="70.0" height="25.0" rx="50" ry="50" />
    <rect id="sa12" x="516.0" y="127.5" width="70.0" height="25.0" rx="50" ry="50" />
  </defs>
  <mask id="re8-clip">
    <rect id="bg" x="0" y="0" width="100%" height="100%" fill="white"/>
    <use xlink:href="#sa11" fill="Black" />
    <use xlink:href="#sa12" fill="Black" />
  </mask>
  <use xlink:href="#sa11" fill="ForestGreen" />
  <use xlink:href="#sa12" fill="ForestGreen" />
  <path stroke="Black" stroke-width="1.5" fill="none" d="M 798.0 189.0 551.0 140.0" mask="url(#re8-clip)"/>
</svg>
```

作为一个未成年人，有没有人知道掩码是否可以默认为白色，所以“bg”矩形不是必需的？

# php - javascript中是否有相当于“新数组（数字）”的PHP？

> ID：11404398
> 
> 赞同：11
> 
> 时间：2012-07-09T22:56:15.517
> 
> 标签：php, javascript, arrays, variables

我试图将基本的 Javascript 函数转换为 PHP，我看到其中一个变量被声明了`var Variable = new Array (13)`。

我知道 PHP 变量的声明如下：`$variable = array()`

但是中的“13”`new Array(13)`呢？这是否转化为`$variable = array(13)`？我已经尝试过了，但它似乎没有用。

这在 Javascript 中

```
var results = new Array (13); 
```

在 PHP 中变成了这个，我正确吗？

```
$results = array(13); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-09T22:59:07.780

实际上，在这种情况下，您正在创建一个 size 数组`13`。

您实际上并不需要在 PHP 中预先分配数组，但您可以执行以下操作：

```
$result = array_fill( 0, 12, null); 
```

这将创建一个包含 13 个元素（索引 0 到 12）的数组，其值为`null`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-09T23:01:26.530

另请注意，有`SplFixedArray`固定大小的数组

```
$array = new SplFixedArray(5); 
```

[http://php.net/manual/en/class.splfixedarray.php](http://php.net/manual/en/class.splfixedarray.php)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-09T22:59:05.857

`new Array(someNumber)`在 JS 中创建一个`someNumber`包含`undefined`. 除非您希望始终使用它`[...]`来创建包含某些元素的数组，因为该语法并不模棱两可，而`new Array()`根据参数的数量和类型的不同，其工作方式也有所不同。

`array(13)`然而，在 PHP 中创建一个包含单个值的数组`13`。

PHP 中一个大致相似的函数是`array_fill(0, 12, null)`. 但是，PHP 可能会分配一个空数组，然后在填充它的同时增加它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T22:58:58.480

不，在 PHP 的括号内放一个数字会为数组添加一个值，即 int 13。而在 JS 中，括号内的数字会生成一个具有该数量未定义值的数组。

PHP 中的数组是动态的，您不需要像有时在 JS 中那样声明它们的大小。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-09T23:03:58.630

这将创建一个包含 13 个未定义值的数组：

```
var results = new Array (13); 
```

这将创建一个第一个索引（索引 0）等于 13 的数组：

```
$results = array(13); 
```

所以这是不正确的。如果你想要与 javascript 相同的结果，你会想要这样的东西：

```
$results = array_fill(0, 13, ''); 
```

您可能还想看看这个问题：

[如何在 PHP 中创建一个具有预定义大小的空数组？](https://stackoverflow.com/questions/5385433/how-to-create-an-empty-array-in-php-with-predefined-size)

# scala - scala中的缩进保留字符串插值

> ID：11404399
> 
> 赞同：4
> 
> 时间：2012-07-09T22:56:17.587
> 
> 标签：scala

我想知道在scala中进行字符串插值时是否有任何方法可以保留缩进。本质上，我想知道是否可以插入自己的 StringContext。宏会解决这个问题，但我想等到它们正式发布。

这就是我要的：

```
val x = "line1 \nline2"
val str = s">       ${x}" 
```

str 应该评估为

```
>       line1
        line2 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-11T06:05:09.127

回答我的问题，并将 Daniel Sobral 非常有用的答案转换为代码。希望它对遇到相同问题的其他人有用。我还没有使用隐式类，因为我仍然是 2.10 之前的版本。

### 用法：

`import Indenter._`并像这样使用字符串插值`e" $foo "`

例子

```
import Indenter._

object Ex extends App {
  override def main(args: Array[String]) {
    val name = "Foo"
    val fields = "x: Int\ny:String\nz:Double"
    // fields has several lines. All of them will be indented by the same amount.
    print (e"""
        class $name {
           ${fields}
        }
        """)  
  }
} 
```

应该打印

```
class Foo
   x: Int
   y: String
   z: Double 
```

### 这是自定义缩进上下文。

```
class IndentStringContext(sc: StringContext) {
  def e(args: Any*):String = {
    val sb = new StringBuilder()
    for ((s, a) <- sc.parts zip args) {
      sb append s

      val ind = getindent(s)
      if (ind.size > 0) { 
        sb append a.toString().replaceAll("\n", "\n" + ind)
      } else {
        sb append a.toString()
      }
    }
    if (sc.parts.size > args.size)
      sb append sc.parts.last

    sb.toString()
  }

  // get white indent after the last new line, if any
  def getindent(str: String): String = {
    val lastnl = str.lastIndexOf("\n")
    if (lastnl == -1) ""
    else {
      val ind = str.substring(lastnl + 1)
      if (ind.trim.isEmpty) ind  // ind is all whitespace. Use this
      else ""
    }
  }
}

object Indenter {
  // top level implicit defs allowed only in 2.10 and above
  implicit  def toISC(sc: StringContext) = new IndentStringContext(sc)
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-10T00:50:42.967

您可以编写自己的插值器，也可以使用自己的插值器遮蔽标准插值器。现在，我不知道您的示例背后的语义是什么，所以我什至不打算尝试。

查看我在Slideshare或[SpeakerDeck上关于 Scala 2.10 的演示](http://www.slideshare.net/dcsobral/scala-210-english)[文稿](https://speakerdeck.com/u/dcsobral/p/scala-2100-english-version)，因为它们包含有关您可以编写/覆盖插值器的所有方式的示例。从幻灯片 40 开始（目前——演示文稿可能会更新到 2.10 最终发布）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-14T18:03:17.223

对于任何寻求 2.10 后答案的人：

```
object Interpolators {
  implicit class Regex(sc: StringContext) {
    def r = new util.matching.Regex(sc.parts.mkString, sc.parts.tail.map(_ => "x"): _*)
  }

  implicit class IndentHelper(val sc: StringContext) extends AnyVal {
    import sc._

    def process = StringContext.treatEscapes _

    def ind(args: Any*): String = {
      checkLengths(args)
      parts.zipAll(args, "", "").foldLeft("") {
        case (a, (part, arg)) =>
          val processed = process(part)

          val prefix = processed.split("\n").last match {
            case r"""([\s|]+)$d.*""" => d
            case _                   => ""
          }

          val argLn = arg.toString
            .split("\n")

          val len = argLn.length

          // Todo: Fix newline bugs
          val indented = argLn.zipWithIndex.map {
            case (s, i) =>
              val res = if (i < 1) { s } else { prefix + s }
              if (i == len - 1) { res } else { res + "\n" }
          }.mkString

          a + processed + indented
      }
    }
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-09T23:37:09.260

这是一个简短的解决方案。[Scastie](https://scastie.scala-lang.org/aaronmcdaid/7dYTU628SNWx5OfVNS0fXg/1)上的完整代码和测试。那里有两个版本，一个普通的`indented`插值器，还有一个稍微复杂一点的`indentedWithStripMargin`插值器，使其更具可读性：

```
assert(indentedWithStripMargin"""abc               
                                |123456${"foo\nbar"}-${"Line1\nLine2"}""" == s"""|abc
                                                                                 |123456foo
                                                                                 |      bar-Line1
                                                                                 |          Line2""".stripMargin) 
```

这里是核心功能：

```
 def indentedHelper(parts: List[String], args: List[String]): String = {
    // In string interpolation, there is always one more string than argument
    assert(parts.size == 1+args.size)

    (parts, args) match {
      // The simple case is where there is one part (and therefore zero args). In that case,
      // we just return the string as-is:
      case (part0 :: Nil, Nil) => part0
      // If there is more than one part, we can simply take the first two parts and the first arg,
      // merge them together into one part, and then use recursion. In other words, we rewrite
      //    indented"A ${10/10} B ${2} C ${3} D ${4} E"
      // as
      //           indented"A 1 B ${2} C ${3} D ${4} E"
      // and then we can rely on recursion to rewrite that further as:
      //              indented"A 1 B 2 C ${3} D ${4} E"
      // then:
      //                 indented"A 1 B 2 C 3 D ${4} E"
      // then:
      //                    indented"A 1 B 2 C 3 D 4 E"
      case (part0 :: part1 :: tailparts, arg0 :: tailargs) => {
        // If 'arg0' has newlines in it, we will need to insert spaces. To decide how many spaces,
        // we count many characters after after the last newline in 'part0'. If there is no
        // newline, then we just take the length of 'part0':
        val i = part0.reverse.indexOf('\n')
        val n = if (i == -1)
                  part0.size // if no newlines in part0, we just take its length
                else
                  i // the number of characters after the last newline
        // After every newline in arg0, we must insert 'n' spaces:
        val arg0WithPadding = arg0.replaceAll("\n", "\n" + " "*n)
        val mergeTwoPartsAndOneArg = part0 + arg0WithPadding + part1
        // recurse:
        indentedHelper(mergeTwoPartsAndOneArg :: tailparts, tailargs)
      }
      // The two cases above are exhaustive, but the compiler thinks otherwise, hence we need
      // to add this dummy.
      case _ => ???
    }
  } 
```

# ruby-on-rails - 在引导数据之前要求经过身份验证的用户

> ID：11404400
> 
> 赞同：0
> 
> 时间：2012-07-09T22:56:22.427
> 
> 标签：ruby-on-rails, ruby-on-rails-3, backbone.js, haml, bootstrapping

我有一个带有 Backbone.js 前端的简单 rails 3.2 应用程序。我`before_filter`在后端定义了以下和助手：

```
# my before_filter placed in most controllers
def require_user
  unless logged_in?
    redirect_to '/#login'
  end
end

def logged_in?
  !!current_user
end

def current_user
  @_current_user ||= session[:user_id] && Appuser.find_by_id(session[:user_id])
end 
```

这对于限制登录用户对大多数操作的访问非常有用。但是，我还在`<script>`我的主应用程序模板 (haml) 底部使用标签将数据引导到我的 Backbone.js 集合中：

```
!!!
%html{:lang => "en"}
  %head
    %title InfoUser
    = stylesheet_link_tag    "application", :media => "all"
    = javascript_include_tag "application"
    = csrf_meta_tags
    %script 
      $(document).ready(function(){ App.init(); });

  %body

    -# Layout markup

    :javascript
      projects.reset(#{Project.all.to_json})
      groups.reset(#{Group.all.to_json})
      users.reset(#{User.all.to_json})

  = render "layouts/templates" 
```

问题是，即使未经身份验证的用户访问应用程序并立即重定向到登录页面，此引导脚本仍会添加到页面底部，并且所有数据都显示在集合中。

有没有办法在haml中检查用户的状态，或者是否有另一种方法我应该处理等待用户通过身份验证的引导？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T23:16:16.873

我不确定您只想在用户登录时执行哪个部分，但您可以这样做：

```
- if logged_in?
  -# code you want to run here 
```

例如，

```
- if logged_in?
  :javascript
    $(document).ready(function(){ App.init(); }); 
```

# java - 当应用程序被销毁时，runOnUiThread 停止工作

> ID：11404404
> 
> 赞同：1
> 
> 时间：2012-07-09T22:57:00.023
> 
> 标签：java, android, multithreading

所以这就是发生的事情：当该类从另一部手机接收消息时，我正在使用 runOnUiThread() 方法从另一个类更改图像视图。我通过使用 mainclass.runOnUiThread(new Runnable...) 等等来调用它。它在应用程序第一次运行时工作，但是当我点击后退按钮退出应用程序，然后再次启动应用程序时，图像视图不再更新。我记录的日志显示一切都很好并且正在运行，但图像视图没有改变。我没有收到任何错误，运行应用程序时它也不会崩溃，只是不会更新图像视图。知道可能是什么原因造成的吗？

编辑*：所以这就是我实际用来更改不扩展 Activity 的类中的 imageView

```
peerActivity.runOnUiThread(

                                new Runnable(){

                                    @Override
                                    public void run() {
                                        Log.v("Thread@", "Thread is running");
                                        Log.v("Thread@2", decodedImage.toString());
                                        // TODO Auto-generated method stub
                                        peerActivity.ivPhoto.setImageBitmap(decodedImage);
                                        Log.v("Thread@3", "Past UI Change");

                                    }

                                }); 
```

peerActivity 保存另一个类引用，而 ivPHoto 是图像视图。我认为我需要做的是在程序关闭时找到一种方法来终止该线程（当我进入程序管理器时，它仍然有“强制关闭”按钮可用）。有没有办法做到这一点？

Edit2 *：所以我尝试了一系列不同的方法来处理 UI 线程，它们都给了我相同的结果：程序在第一次运行时运行良好，但是当我点击后退按钮并关闭它并重新打开时它，图像视图不再更新。如果我强制关闭应用程序，它会再次正常工作，直到我关闭它并重新打开它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T23:04:15.157

尝试改用[View.post(...)](http://developer.android.com/reference/android/view/View.html#post%28java.lang.Runnable%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T20:29:51.017

看起来您的 Runnable 正在关闭对您的活动的引用。当您按下并再次开始您的活动时，您的旧活动将被销毁并创建一个新实例。您的后台线程继续对不再存在的原始活动进行更改，因此对其视图进行更改无效。

您需要在活动暂停或适当停止时停止更新线程，并在活动恢复或启动时重新启动它（再次，酌情），并确保您始终更新实际可见的活动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T14:42:58.160

我使用 new Handler(Looper.getMainLooper()).post(...);

您甚至可以从后台线程创建它。

# iphone - 在连接的 iPhone 上启动已安装的应用程序

> ID：11404410
> 
> 赞同：9
> 
> 时间：2012-07-09T22:58:02.393
> 
> 标签：iphone, ios, ipad

我正在尝试为某些 iOS 应用程序启动自动化测试解决方案。我正在使用 Fruitstrap 将已编译的应用程序传输并安装到连接的 iPhone，但我正在努力寻找一种在安装完成后自动启动应用程序的方法。

Fruitstrap 有一个在 GDB 调试器中运行应用程序的选项，它可以工作。不幸的是，有些测试用例需要在没有附加调试器的情况下运行应用程序（特殊的崩溃处理）。我花了很多时间来处理 Fruitstrap 使用的 MobileDevice Library 上的可用资源，但在启动应用程序时我无法打开任何东西。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T07:22:31.467

您可以通过使用fruitstrap 或Xcode 来启动“引导”程序来做您想做的事情，该程序会导致您的目标应用程序通过Michael 所描述的自定义URL 运行。

当引导程序将在调试器下运行时，URL 调用的程序将正常运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T18:55:13.417

创建一个引导程序并使用 URL Schemes 对某些人来说可能是一种选择，当然应该考虑，但它不符合我的要求。

我最终做的是通过 Fruitstrap 使用调试器启动应用程序。我重新编译了 fruitstrap 以包含以下准备命令（在 GDB_PREP_CMDS 定义中）：

```
handle all noprint pass nostop
continue 
```

句柄会将信号传递给程序，因此自定义信号处理程序（在这种情况下为崩溃处理程序）将处理信号。continue 是我需要的，以便在调试器启动后应用程序真正运行。

这有一个不幸的缺陷，不幸的是我不知道解决方法。GDB 的 ARM7 版本没有 darwin 版本的“set dont_handle_bad_access”命令。由于某种原因，将 EXC_BAD_ACCESS 信号传递给程序不起作用并且应用程序挂起。这很重要，因为这是大多数崩溃的信号。但就目前而言，它是我能做的最好的，至少它处理未捕获的异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T07:51:27.613

我相信您可能正在寻找某种自定义 URL 方案。

查看以下文档并向下滚动到：实现自定义 URL 方案

[http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html)

您还可以在 iOS 中搜索[URL 方案](http://www.google.ca/webhp?sourceid=chrome-instant&ie=UTF-8#hl=en&sclient=psy-ab&q=URL%20Schemes%20on%20iOS&oq=URL%20Schemes%20on%20iOS&gs_l=hp.3..0i22l2.5107.10731.0.10924.7.7.0.0.0.0.171.759.1j5.6.0...0.0...1c.qajX8jE588E&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.,cf.osb&fp=59d56b3aa7ec5b29&biw=1380&bih=872)，看看您是否遇到了与您正在尝试做的类似的事情。

让我知道这是否对您有所帮助。如果你有任何成功的话会很有趣。

干杯。

# ruby - 基于浏览器的在线多人游戏服务器技术？

> ID：11404413
> 
> 赞同：0
> 
> 时间：2012-07-09T22:58:25.343
> 
> 标签：ruby, sockets, node.js, socket.io, multiplayer

我想构建一个简单的跨浏览器多人游戏（如国际象棋或纸牌游戏），它将使用套接字与服务器通信。

我对 Ruby 语言有一些中级知识，但我不太相信它对于多客户端服务器来说是一个很好的解决方案，所以我认为 Node.js 或 Socket.io 可能是一个更好的解决方案。我知道 Java 或 C++ 可能非常适合这项工作，但我对它们都不太满意，所以这就是我转向服务器端 JavaScript 的原因。

我的问题是，您认为像这样的项目的最佳解决方案是什么？我将在其上构建整个游戏和通信逻辑的最佳服务器端技术可能是什么？也许它们的某种组合？任何关于速度、服务器负载、托管解决方案和每种技术的开发速度的评论都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T23:12:47.807

如果您对 JavaScript 很熟悉，那么尝试使用 node.js 不会有任何损失：学习曲线会很平缓。这是一项非常酷的服务器技术。

node js 的唯一缺点当然是它不会像 java 那样扩展。完全没有。这对于 Web 应用程序来说通常很好，因为您可以在前面放置一个缓存层（反向代理），这大大缓解了这种情况。我想这对您的应用程序来说是不合理的，因为游戏状态会过于频繁地变化。

不过，Node js 可以通过启动更多实例来“扩展”。如果一台服务器可以轻松容纳多个“游戏世界”，那么这很简单。如果您需要将游戏世界拆分到多个服务器上，那么服务器必须相互配合。但请注意这种情况，它并不像最初看起来那么简单：它被称为“多主机”问题，并且是饥饿的互联网怪物之一。

# ruby - 随机化 DataMapper 记录的顺序

> ID：11404414
> 
> 赞同：1
> 
> 时间：2012-07-09T22:58:32.083
> 
> 标签：ruby, sqlite, sinatra, datamapper

我只是想以**随机顺序返回 DataMapper 记录**。

这是我的模型（使用带有 sqlite3 数据库的 DataMapper）：

```
class Movie
  include DataMapper::Resource
  DataMapper::Property::String.length(255)

  property :id, Serial
  property :title, String
  property :img, String
  property :description, String
  property :year, String
  property :created_at, DateTime

  has n, :votes 
  belongs_to :user
end 
```

这就是我返回记录的方式（Sinatra）

```
get '/' do
  @movies = Movie.all # <-- What should this look like?
  haml :home
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T07:21:52.203

您也可以在 SQL 中执行此操作，例如：

```
class Movie
  # tons of other stuff here...

  def self.random
    repository(:default).adapter.select <<-SQL
      SELECT * FROM movies ORDER BY RANDOM()
    SQL
  end
end 
```

然后你可以做

```
get '/' do
  @movies = Movie.random
  haml :home
end 
```

乳清你使用 MySQL，你需要替换`RANDOM()`为`RAND()`. 请注意，返回的对象`Movie#random`不是`Movie`对象并且是只读的，但是您可以像读取`Movie`对象一样读取属性，例如`Movie.random.first.title`获取第一部随机电影的标题。

最大的优势是，如果您的数据库中有许多记录并且只想要少数随机`Movie`s，则不必获取所有 Movies 并在之后对其进行排序，但您可以使用如下 SQL 查询：

```
SELECT * FROM movies ORDER BY RANDOM() LIMIT 10 
```

或者你可以将你的方法扩展为这样的：

```
class Movie
  # tons of other stuff here...

  def self.random(opts={})
    query = "SELECT * FROM movies ORDER BY RANDOM()"
    query << " LIMIT #{opts[:limit]}" unless opts[:limit].nil?
    repository(:default).adapter.select(query)
  end
end 
```

它允许编写这样的查询：

```
Movie.random              # get all movies sorted randomly
Movie.random(:limit => 5) # get five random movies 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T06:10:01.523

我相信你可以做到这一点（基于[this](https://stackoverflow.com/questions/2039902/how-does-rubys-sort-by-rand-work)）：

```
@movies = Movie.all.sort_by{rand} 
```

此外，同一篇文章[建议](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-shuffle-21) `Array#shuffle!`使用数组并将其随机排列，因此可能是这样的：

```
@movies = Movie.all.shuffle #no ! since you are not replacing the Array; not sure if DM supports it 
```

- 或者 -

```
@movies = Movie.all
@movies.shuffle! 
```

# javascript - jquery显示不默认为隐藏

> ID：11404415
> 
> 赞同：-1
> 
> 时间：2012-07-09T22:58:32.647
> 
> 标签：javascript, jquery, html

我有这个非常简单的 jquery 示例： http: [//jsfiddle.net/clifgray/NTd95/1/](http://jsfiddle.net/clifgray/NTd95/1/)并且在那个 jsfiddle 中它的工作方式与我想要的完全一样。当我在一个代码差异很小的网页上实现它时，除了一些预先存在的内容外，jquery部分默认显示隐藏div中的内容。当我单击隐藏时它仍然有效，从那里我可以显示和隐藏，但我希望在我启动网页时隐藏它。

您能想到发生这种情况的任何原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T23:03:17.310

您遇到的问题是您对**所有**div 使用一揽子 css 规则，而不是针对您尝试定位的 div。我的猜测是你页面上的某个地方你已经改变了显示`none`

在你的 javascript 之前添加这个：

```
$("#box1, #box2").hide(); 
```

...或将您的 css 规则更改为：

```
div#box1, div#box2 { background:#def3ca; margin:3px; width:80px; display:none; float:left; text-align:center; } 
```

...或将此内联添加到您的 html 中：

```
<div id="box1" style="display:none"> 
```

# extjs-mvc - ExtJs 4 重新加载应用程序

> ID：11404416
> 
> 赞同：1
> 
> 时间：2012-07-09T22:58:37.017
> 
> 标签：extjs-mvc, extjs4.1

在我的应用程序中，所有组件的标题/文本都基于应用程序启动之前加载的商店进行本地化。在应用程序中，我有更改商店 url 并重新加载商店以切换语言的按钮。问题是所有类都已加载，因此组件使用以前的语言环境呈现。这是按钮的代码：

```
tbar: [{
    xtype: 'button',
    id: 'btn-test',
    text: 'xxx',
    handler: function() {
        lang = 'en';        
        i18n.getBundlestore().load({url:'/GSIP/resources/gsip/i18n/bundle-' + lang + '.properties'});

        //bun = Ext.create('I18N.ResourceBundle'); 

        Ext.getCmp('mainview').destroy();

        Ext.create('Ext.container.Viewport', {
            id: 'mainview',
            layout: 'border',
            items: [
                {
                 xtype: 'gsip_mainpanel',
                 region: 'center',
                 items: [{
                     xtype: 'gsip_categoriestabpanel'
                 }]

                }
            ] 
```

完全相同的视口创建在我的 Application.js 中。lang 和 i18n 是全局变量。旧视口被破坏并创建新视口，但如何强制重新加载类。我不想使用 window.location。

代码更新：

```
handler: function() {

        lang = 'en';        

        Ext.getCmp('mainview').destroy();

        i18n.getBundlestore().load({url:'/GSIP/resources/gsip/i18n/bundle-' + lang + '.properties',
            callback: function() {
                Ext.create('Ext.container.Viewport', {
                    id: 'mainview',
                    layout: 'border',
                    items: [
                        {
                         xtype: 'gsip_mainpanel',
                         region: 'center',
                         items: [{
                             xtype: 'gsip_categoriestabpanel'
                         }]

                        }
                    ]            
                });
            }
        });

    } 
```

类别标签面板：

```
Ext.define('GSIP.view.CategoriesTabPanel' ,{
extend: 'Ext.tab.Panel',
alias : 'widget.gsip_categoriestabpanel',   
layout: 'fit',
items: [{
    xtype: 'gsip_planytabpanel',
    title: i18n.getMsg('key-1')
},{
    xtype: 'gsip_adresytabpanel',
    title: i18n.getMsg('key-2')
}],
initComponent: function() {

    this.callParent(arguments);

} 
```

});

和 ResourceBundle（i18n 变量是此类的一个实例）：

```
 Ext.define('I18N.ResourceModel',{

        extend: 'Ext.data.Model',
        fields: ['key', 'value']
    });

    Ext.define('I18N.ResourceStore',{
        extend: 'GSIP.core.RegisteredStore',
        model: 'I18N.ResourceModel',
        autoLoad: true,
        proxy: {
            type: 'ajax',
            url: '/GSIP/resources/gsip/i18n/bundle-' + lang + '.properties',
            reader: {
                type: 'json',
                root: 'pl',
                successProperty: 'success'
            }
        }
    });

    Ext.define('I18N.ResourceBundle' ,{

        config: {
            bundlestore: Ext.create('I18N.ResourceStore'),
        },
        constructor: function(config) {
            this.initConfig(config);

            return this;
        },
        getMsg: function(key) {

            return this.bundlestore.getAt(this.bundlestore.findExact('key', key)).get('value');

        }
        },function(){
            //callback function, called before store load :(
        }
    ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:21:56.517

在 widget.gsip_categoriestabpanel 的定义中，您将项目设置为配置。这意味着它将始终引用相同的对象（而不是更新的对象）。作为第一步，您应该将项目定义移动到 initComponent，您还可以在那里使用 console.log(i18n) 来查看它是正确的。

# c# - 在 WinForms UserControl 构造函数中将 DesignMode 换成 LicenseManager.UsageMode 有什么注意事项吗？

> ID：11404420
> 
> 赞同：5
> 
> 时间：2012-07-09T22:58:52.177
> 
> 标签：c#, winforms, user-controls

如果您有一个显示数据的表单，您可以做的一件事是`this.DesignMode`在构造函数中引用以避免在设计器中填充它：

```
public partial class SetupForm : Form
{
    private SetupItemContainer container = new SetupItemContainer();

    public SetupForm()
    {
        InitializeComponent();
        if (!this.DesignMode)
        {
            this.bindingSource1.DataSource = this.container;
            this.Fill();
        }
    }
 } 
```

但是，如果您决定将该表单重写为 UserControl，并保持相同的构造函数逻辑，则会发生意想不到的事情 -`this.DesignMode`无论如何总是错误的。这导致设计人员调用您的逻辑，这意味着在运行时发生。

我刚刚在一篇博客文章上发现了一条评论，该评论似乎对此进行了修复，但它引用了[LicenseManager](http://msdn.microsoft.com/en-us/library/system.componentmodel.licensemanager.aspx)类的功能，作为在 UserControl 中按预期工作的替代品。

所以对于 UserControl 我可以这样做：

```
public partial class AffiliateSetup : UserControl
{
    private AffiliateItemContainer container = new AffiliateItemContainer();

    public AffiliateSetup()
    {
        InitializeComponent();
        if (LicenseManager.UsageMode == LicenseUsageMode.Runtime)
        {
            this.bindingSource1.DataSource = this.container;
            this.Fill();
        }
    }
} 
```

使用`LicenseManager`而不是`DesignMode`有任何警告或暗示可能会阻止我放入我的生产代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T23:13:15.983

根据对[我对另一个问题的回答](https://stackoverflow.com/a/1166547/116923)发表评论的人所说，使用`LicenseManager`在方法中不起作用`OnPaint`。

# ruby-on-rails - Mongoid：不能在一个数组中嵌入不同的类

> ID：11404423
> 
> 赞同：1
> 
> 时间：2012-07-09T22:59:00.057
> 
> 标签：ruby-on-rails, ruby, mongodb, inheritance, mongoid

我有如下的 Mongoid 类：

```
class Order
  include Mongoid::Document
  embeds_many :animals
end

class Animal
  include Mongoid::Document
  embedded_in :order

  def self.has_gender
    field :gender, type: String
  end
end

class Deer < Animal
  has_gender
end 
```

当我按任何订单召唤动物时，即使是空的：

```
Order.new.animals 
```

我收到以下错误：

```
undefined method `has_gender' for Deer:Class 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T23:27:32.147

问题出在其他地方。您的代码在我的机器上运行。（不过，我使用的是 Mongoid 3.0-rc）。

```
order = Order.new
order.animals << Animal.new
order.animals << Deer.new
order.save

puts Order.first.animals
# >> #<Animal:0x007fca04bae890>
# >> #<Deer:0x007fca04bb4b50> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T23:37:22.020

我认为问题在于我创建子类的方式：

```
class Game
  include Mongoid::Document
  TYPES = {'deer' => Deer, 'pig' => Pig, 'duck' => Duck}
  def self.new_of_type(type, attrs={})
    TYPES[type].new attrs
  end 
```

结尾

因为当我在定义类型时注释掉行时，错误消失了，所以问题可能出在定义类型（鹿，猪，鸭）时调用子类。

关于创建子类的更好解决方案的任何想法？我在控制器中这样做：

```
class GamesController < ApplicationController
  def create
    @game = Game.new_of_type params[:type], params[:game]
    @game.save
  end
end 
```

# apache - 使用 Solr 3.5 和 HttpClient 4.2 通过 HttpClient 对 Solr 执行查询的问题

> ID：11404428
> 
> 赞同：0
> 
> 时间：2012-07-09T22:59:15.703
> 
> 标签：apache, solr, httpclient, response

我正在尝试使用 HttpClient 查询我的本地 Solr 服务器，但我无法弄清楚为什么没有将参数添加到`GET`调用中。

我这样做的代码是：

```
HttpRequestBase request = new HttpGet("http://localhost:8080/solr/select");

HttpParams params = new BasicHttpParams();
params.setParameter("q", query);
params.setParameter("start", String.valueOf(start));
params.setParameter("rows", String.valueOf(rows));

request.setParams(params);

HttpClient httpClient = new DefaultHttpClient();
HttpResponse response = httpClient.execute(request);

HttpEntity entity = response.getEntity();
InputStream is = entity.getContent();

return stringToStreamConversion(is); //500 error, NullPointerException, response is empty 
```

我试图退回几件东西，希望能看到我会得到什么，并试图找出问题出在哪里。我终于意识到我回来的`http://localhost:8080/solr/select`时候才回来

`return request.getURI().toURL().toString();`

我无法弄清楚为什么没有添加参数。如果我做

`return request.getQuery();`

我一无所获……有什么想法吗？我在这里先向您的帮助表示感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T07:02:09.687

更简单的选择是使用我在[HTTPPostScheduler](http://wiki.apache.org/solr/DataImportHandler#HTTPPostScheduler)中使用的方法，如下所示：

```
URL url = new URL(completeUrl);
HttpURLConnection conn = (HttpURLConnection)url.openConnection();

conn.setRequestMethod("POST");
conn.setRequestProperty("type", "submit");
conn.setDoOutput(true);

// Send HTTP POST
conn.connect(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T02:03:17.303

From what I have seen you are not able to associate your paeans with the request.

So, instead of creating a new HttpParams object and associating it with request, can you try the following approach ?

httpCclient.getParams().setParameter("q", query"); ....

# python - Python SSH没有给出完整的输出

> ID：11404435
> 
> 赞同：2
> 
> 时间：2012-07-09T23:00:18.807
> 
> 标签：python, ssh, paramiko

我正在尝试编写一个脚本来登录远程机器，运行命令并返回输出。我正在使用 paramiko 库在 python 中执行此操作。然而，由于某种原因，没有产生完整的输出，只有一行。

为了隔离问题，我创建了一个名为 simple 的本地脚本，它运行命令并将输出发送到文件 remote_test_output.txt。然后我只是简单地 sftp 文件。该文件仅包含相同的一行。唯一的一行输出每次都是一样的：命令的响应码。

当我手动完成所有这些操作（ssh over、登录并运行 ./simple）时，一切都按预期工作并且输出文件是正确的。但是，通过我机器上的脚本执行此操作，它只返回单行。

我的代码：

```
ssh = paramiko.SSHClient()
ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
ssh.load_host_keys(os.path.expanduser(os.path.join("~", ".ssh", "known_hosts")))
ssh.connect(host, username, password)

ssh_stdin, ssh_stdout, ssh_stderr = ssh.exec_command('LD_LIBRARY_PATH=/opt/bin ./simple\n')

print "output:", ssh_stdout.read()+"end" #Reading output of the executed command
print "err:", ssh_stderr.read()#Reading the error stream of the executed command

sftp = ssh.open_sftp()
sftp.get('remote_test_output.txt', 'local_test_output.txt')
sftp.close() 
```

返回的内容：

```
response code: 128 
```

应该返回什么：

```
field1:value1
field2:value2
response code: 128
field3:value3
field4:value4
etc 
```

有谁知道为什么我试图调用的命令没有正常输出？

我必须包含 LD_LIBRARY_PATH 变量赋值，否则我得到一个库不存在错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T09:08:51.143

根据 paramiko 的文档，“exec_command”方法返回一个 Channel 对象。第一个问题：您是否尝试将 bufsize 参数设置为一个？Channel 对象“表现得像一个套接字”。所以它在文档中说：

[http://www.facebook.com/photo.php?fbid=149324975212197&set=a.128010850676943.34896.126277080850320&type=1&ref=nf](http://www.facebook.com/photo.php?fbid=149324975212197&set=a.128010850676943.34896.126277080850320&type=1&ref=nf)

这意味着 recv()（可能还有 read()）只会读取读取缓冲区中的数据。因此，每当您的 read() 调用返回时，并不意味着该进程已经在远程端执行。您应该使用 exit_status_ready() 方法来检查您的命令是否已执行：

[http://www.lag.net/paramiko/docs/paramiko.Channel-class.html#exit_status_ready](http://www.lag.net/paramiko/docs/paramiko.Channel-class.html#exit_status_ready)

只有在那之后，您才能读取所有数据。嗯，这就是我的猜测。我可能错了，但现在我无法检验我的理论。

# c# - 有没有办法区分两个 .NET 可执行文件？

> ID：11404441
> 
> 赞同：8
> 
> 时间：2012-07-09T23:00:53.127
> 
> 标签：c#, .net, visual-studio-2010, disassembly

我们最近有一位开发人员离开了我们的组织。我们不确定他放在生产服务器上的可执行文件版本是否与当前 TFS 中的版本相同。有没有办法（除了使用 Just Compile 或 ILDASM 之类的东西）从 TFS 构建项目并将该可执行文件与我们生产服务器上当前的可执行文件进行比较？

更新：我正在尝试 Just Decompile，并且我已经加载了两个二进制文件，所以我正在逐步检查每个命名空间、成员等以将它们相互比较。我习惯于在 Visual Studio 中使用架构比较来比较 2 个数据库的架构，并查看更新、删除和添加的项目，并突出显示差异。是不是有一些工具可以采用这两个反编译的二进制文件并以某种方式突出差异？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T23:17:24.793

现在我只能想到这种方法：

1.  使用[dotPeek](http://www.jetbrains.com/decompiler/)反编译实时程序集
2.  使用[dotPeek](http://www.jetbrains.com/decompiler/)反编译从 TFS 新构建的相同程序集
3.  在两个反编译的源代码上使用 Beyond Compare 之类的工具
4.  根据需要合并更改

希望这就是你要找的东西？？

其他在版本控制方面可能对未来有益的阅读材料，因此您知道哪些 dll 包含哪些功能（可能对您有用也可能无用，如果我告诉您一些显而易见的事情，请原谅我）：

[维护程序集版本号的最佳实践/指南](https://stackoverflow.com/questions/3768261/best-practices-guidance-for-maintaining-assembly-version-numbers/3905443#3905443)

祝你好运

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-09T23:17:44.397

是的，使用[NDepend](http://www.ndepend.com/Features.aspx#BuildComparison)可以区分两个 .Net 程序集。尽管即使两次编译完全相同的源也不会生成完全相同的程序集。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-09T23:15:58.677

我们用于详细比较（包括二进制文件比较）的产品是[Beyond Compare](http://scootersoftware.com/)。当我们第一次拿到这个产品时，我认为它的用途有限，但它帮助我们解决了一些非常棘手的问题。它比较目录、文本文件、二进制文件、mp3、图片和软件版本。它也不是特别贵。

我刚刚在 Release 和 Debug 中针对应用程序的二进制文件运行了该产品，它突出了每个差异。

我确信您可以针对两个二进制文件运行 ILDASM 并进行眼球比较，但这样的工具可能会一遍又一遍地为自己付出代价。

# php - PHP/MySQL 从表中排序/排列

> ID：11404442
> 
> 赞同：0
> 
> 时间：2012-07-09T23:00:53.423
> 
> 标签：php, mysql, mysqli

我开始学习一些 PHP/Mysql 并且我正在努力如何使它工作。

我有 2 张桌子。一个叫 ALBUM，另一个 TRACKS 在 ALBUM 上我有我需要的所有专辑信息（标题、发行日期、封面），在 TRACKS 上我有所有曲目名称和专辑 ID。

我可以使 SELECT 正常工作并获取所有内容，但是如何按专辑名称过滤并显示与该专辑相关的所有曲目？

现在我有这个

```
define("MYSQLUSER", "root");
define("MYSQLPASS", "root");
define("HOSTNAME", "localhost");
define("MYSQLDB", "music");

$connection = new mysqli(HOSTNAME, MYSQLUSER, MYSQLPASS, MYSQLDB);

if ($connection->connect_error) {
  die('Could not connect: ' . $connection->connect_error);
}else{

$query = "SELECT * from album AS a JOIN tracks AS t ON t.album = a.id ORDER BY a.id,  t.trackNumber, t.album";

$result_obj = '';
$result_obj = $connection->query($query);

while($result = $result_obj->fetch_array(MYSQLI_ASSOC)){
  $items[] = $result;
}

 foreach ($items as $item){
  echo "<ul><li>";
  echo $item['name'];
  echo " - "
  echo $item['file'];
  echo "</li></ul>";
} 
```

问题是这将输出彼此分开的所有专辑/曲目。

像这样：

```
<ul>
<li>Album 1 - file 1</li>
</ul>

<ul>
<li>Album 1 - file 2</li>
</ul>

<ul>
<li>Album 2 - file 1</li>
</ul> 
```

如何在相同的 ul/li 标签上制作专辑？我知道我的 foreach 循环。但我能做什么？

所以会是这样的：

```
<ul>
<li>Album 1 - file 1, Album 1 - file 2, Album 1 - file3</li>
<li>Album 2 - file 1</li>
</ul> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T01:12:29.360

您可以保留查询原样，并按如下方式改进循环：

```
echo "<ul>";
$first = true;
$previous_album = '';
while($result = $result_obj->fetch_array(MYSQLI_ASSOC)){
    if( $previous_album!=$result['album'] ){
        $previous_album = $result['album'];
        if( !$first ){
            echo "</li>";
        }else{
            $first = false;
        }
        echo "<li>";
    }else{
        echo ", ";
    }
    echo $result['name'];
    echo " - ";
    echo $result['file'];
}
echo "</li></ul>"; 
```

另请注意，我只在一个循环中完成所有操作，现在您正在使用两个循环（一个用于从数据库中检索行，另一个用于显示结果）。我在一个循环中完成所有事情，这将提高您的应用程序的性能。

如果您需要进一步的帮助，请告诉我。联邦快递

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T23:06:59.727

您将不得不使用 GROUP BY 指令。

```
SELECT * from album AS a JOIN tracks AS t ON t.album = a.id GROUP BY a.id ORDER BY a.id,  t.trackNumber, t.album 
```

您可以在该指令上使用其他参数，产生不同的结果，选择最适合您的参数。

# c# - Silverlight 中的页面资源

> ID：11404444
> 
> 赞同：0
> 
> 时间：2012-07-09T23:00:56.447
> 
> 标签：c#, silverlight, windows-phone-7

我正在开发基于 C# Silverlight 的 Windows Phone 应用程序。我在想是否有一种方法可以让我将所有页面保存在可以帮助我参考页面的 res 文件中？

我在这里看到有人问这种问题：[这个 XAML 代码可能吗？](https://stackoverflow.com/questions/4905007/is-this-xaml-code-possible)
但是答案太简单了，我无法理解它的用法。因此，如果有人可以分享一些想法或示例，那将非常有帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T06:08:35.387

我也认为你的方法有点奇怪，这样做需要很好的理由。

在您引用用户的 SO 问题中，声明了包含他的 ViewModel 的资源。如果您熟悉[MVVM](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)，那么您就会知道这并不是您要问的，而且他的方法也是“我不会这样做”。在 silverlight 中可以加载多个包含视图或来自某个[流](http://blogs.silverlight.net/blogs/msnow/archive/2008/10/09/silverlight-tip-of-the-day-60-how-to-load-a-control-straight-from-xaml.aspx)的 xap 文件。但我强烈建议您只停留在应用程序开发的主流 - 这对您来说会更容易。

如果您为您的具体场景提供更多解释，我可能会更有帮助。

# java - 如何使用 Jersey UriBuilder 将相对文件名中的不安全字符转换为安全版本？

> ID：11404446
> 
> 赞同：0
> 
> 时间：2012-07-09T23:00:59.177
> 
> 标签：java, file, path, jersey, uri

我有两个字符串。一个命名文件夹的绝对（或相对）路径。另一个命名一个带有潜在不安全字符的文件名：

```
String folder = "C:\a\b\c\dir";

Sting file = "file name: contains-unsafe_characters?" + ".txt" 
```

我想以如下形式将它们粉碎成字符串：

```
String absPath = folder + SYSTEM_INDEPENDENT_PATH_SEPERATOR + convertToPercentOctal(folder); 
```

现在，可能有一百万种方法可以尝试做到这一点：

```
UriBuilder folderBuilder = UriBuilder.fromPath(folder);
UriBuilder fileBuilder   = UriBuilder.fromPath(file);
URI completeFileName = folderBuilder.build().resolve(fileBuilder.build()); 
```

或者：

```
URI completeFileName = UriBuilder.fromPath(folder).path(file).build(); 
```

等等

第一个代码块失败，因为文件名中可能有**:**。如果是这种情况，UriBuilder 将尝试将其解析为可选*方案：* . 第二种方法失败，因为它返回转换为 %octal 表示法的前半部分和后半部分，由系统*相关*的 '/' 字符分隔。

有没有办法连接两个字符串，将结果转换为可写文件名，并返回一个我可以用来创建文件的有效 URI？

# javascript - 没有 getter 的 setter

> ID：11404447
> 
> 赞同：1
> 
> 时间：2012-07-09T23:01:09.460
> 
> 标签：javascript

```
var NS = ( function ( window, document ) {
    // ... snip
    var g_debug;
    function test( value )
    {
        g_debug = value;
    }
    return {
        test: test
    }
} ( window, document ) ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T23:02:45.360

这：

```
NS.test 
```

不**调用**函数。这只是对函数的**引用**，控制台会将函数源打印为控制台命令的值。

当你写：

```
NS.test(true) 
```

在控制台中，控制台打印函数的返回值。由于该函数没有`return`声明，所以它总是`undefined`.

如果你没有，你可能应该`g_debug`在某个地方声明。`var`

# php - PHP/MySQL - 登录系统 - 选择整个数据库是否明智？

> ID：11404450
> 
> 赞同：0
> 
> 时间：2012-07-09T23:01:23.410
> 
> 标签：php, mysql

我正在设计一个相当简单的登录系统，我目前在用户尝试登录时使用以下代码来确定数据库中是否存在与用户尝试登录的用户名匹配的条目。（稍后在代码中，我检查匹配的密码等；我不担心那部分。）

目前，我使用 SELECT 将整个数据库抓取到一个变量（$wholeUserDatabase）中，然后遍历它以确定“用户名”字段是否匹配。

**它现在工作**正常。但是我的数据库现在有三个用户。当我将网站发布给公众并（理论上）获得更多用户时，这种将整个数据库抓取到变量中的方法会变得非常缓慢吗？

```
$connection = mysql_connect($mysql_host,$mysql_user,$mysql_password);

mysql_select_db($mysql_database, $connection);

// Take the whole user database, and store it in $wholeUserDatabase.
$wholeUserDatabase = mysql_query("SELECT * FROM myTable")
    or die(mysql_error());  

$boolFoundUser = false;

/* Iterate once for every entry in the database, storing the current entry 
of the database into a variable $currentEntry, which is an array containing 
everything related to the one user. */
while($currentEntry = mysql_fetch_array($wholeUserDatabase)) {

    /* Does the "username" field of the current entry match the one 
    the user tried to log in with? */
    if ($currentEntry['username'] == $_POST['username']) {

        /* If it does, break the loop so that the $currentEntry variable 
        will contain the information for the user who is trying to log in,
        which I will later need to check passwords, etc. */
        $boolFoundUser = true;
        break;
    }
}

mysql_close($connection); 
```

谢谢你的帮助。如果我需要重新考虑这部分，请告诉我。我希望这对其他人有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T23:02:18.183

是的！这将是可怕的，可怕的缓慢。不要选择整个数据库，只需选择您需要的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T23:06:42.003

我不明白你为什么要这样做。这有点违背了首先拥有数据库的目的。我的意思是，如果你想以这种方式做事，文件 i/o 就足够了（即从纯文本文件中写入/读取）。

你想要做的是一个 SELECT * FROM myTable Where username=$username && password==$password...

这更好，因为（a）您可以在用户名上创建索引，这将使数据库搜索/查找更快，（b）从 i/o 和处理的角度来看，它的成本要低得多，因为（a）您没有推送所有数据（整个数据库）从数据库到应用程序，（b）如果它的索引正确（所以更快），mySQL不需要迭代整个数据库......

问候

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T23:12:03.667

从数据库中获取所有用户显然是一个非常糟糕的主意。了解您将导致多少数据传输。想象一下，您在发布后获得了 10^5 个用户。假设 users 表的模式至少是：users(username varchar(30), password varchar(64))。在这种情况下，您将从数据库机器传输：

10^5 * (30 + 64) * 2 字节 = 18.8 MB 数据。

这适用于 10^5 个用户，您只有一个用户名和一个存储在数据库中的通行证。如果你很幸运并获得了 10^6 或 10^7 个用户怎么办？

通常，您将传输属于此类的数据量：O(users)

# html - 有没有可以用来确保我的网站缩小以适应 iPad 视口的元标记？

> ID：11404452
> 
> 赞同：2
> 
> 时间：2012-07-09T23:01:29.413
> 
> 标签：html, css, ipad, mobile, meta-tags

基本上我现在有一个宽度为 940px 的网站，目前我只需要在 iPad 上查看这个网站，同时我开始添加媒体查询来为每个设备定制网站。是否有我可以使用的元标记，以便我的网站在 iPad 上缩小？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-09T23:26:44.447

我会用这个：

```
<meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, maximum-scale=1" /> 
```

请参阅[developer.mozilla.org/en/Mobile/Viewport_meta_tag/](https://developer.mozilla.org/en/Mobile/Viewport_meta_tag/)。

它将宽度和高度设置为设备的宽度和高度，将初始缩放设置为 1，将最大缩放设置为 1（因此使页面不可缩放）。

**编辑：**如果您希望页面仍然可缩放，请删除`maximum-scale=1`：

```
<meta name="viewport" content="width=device-width, height=device-height, initial-scale=1" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T23:04:39.473

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> 
```

我在我所有的移动网站中都使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T23:06:31.437

iPad 有一个 1024x768 的屏幕。在添加媒体查询之前你应该没问题。

# c# - 底层数据源更改时，DataGridView 不会在 UI 中更新

> ID：11404453
> 
> 赞同：2
> 
> 时间：2012-07-09T23:01:50.540
> 
> 标签：c#, winforms

我正在创建一个小型 Windows 窗体应用程序，它将接收来自后台线程的消息，然后将它们添加到主窗体上的列表中。在表单上，​​我有一个**DataGridView**，其**DataSource**设置为消息列表（*例如`List<Message>`*）

目前，消息堆积如山，但我无法让**DataGridView**在消息出现时呈现消息。这是我使用的方法的摘要。

**1.**初始化主窗体设置绑定并启动消息例程

```
internal Main(IMessageDispatcher messageDispatcher, IMessagePublisher messagePublisher)
{
    InitializeComponent();

    _messageEntries = new List<Message>();

    BindToMessageEntriesList();

    _messageDispatcher = messageDispatcher;
    _messageDispatcher.OnMessageReceived += MessageDispatcher_OnMessageReceived;
    _messageDispatcher.Start();
}

private void BindToMessageEntriesList()
{
    MessageEntriesGrid.DataSource = _messageEntries;
} 
```

**2.**处理收到的消息并添加到内部列表

```
private void MessageDispatcher_OnMessageReceived(Message message)
{
    lock (_logEntries)
    {
        _messageEntries.Add(message);
    }

    var cb = new RefreshListCallbackDelegate(RefreshView);
    this.Invoke(cb);
} 
```

**3.**在主线程上刷新

```
private void RefreshView()
{
    MessageEntriesGrid.Refresh();
} 
```

任何人都可以建议我如何让 UI 反映发生的变化。

*注意：我也尝试过使用 Invalidate 方法和 ResetBindings 方法。我还尝试将列表切换到`ObservableCollection`*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T23:20:42.790

当您将 List 绑定到 DataGridView 并修改原始 List 时，DataGridView 不会自动更新其显示。它只会显示绑定时列表中存在的数据。

如果希望 DataGridView 在绑定集合更改时动态更新，则需要绑定一个实现 IBindingList 的集合（如 BindingList [http://msdn.microsoft.com/en-us/library/ms132679(v=vs.90) .aspx](http://msdn.microsoft.com/en-us/library/ms132679(v=vs.90).aspx)）或 IBindingListView （如 BindingSource [http://msdn.microsoft.com/en-us/library/system.windows.forms.bindingsource(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.bindingsource(v=vs.90).aspx)）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T03:39:27.537

您可以将 替换`List<Message>()`为自定义类并继承`BindingList<T>`并附`Message Dispatcher`加到其中。例子

```
public class MessageList : BindingList<Message>
{
} 
```

在您的主要表单中订阅该`ListChanged`事件，您就可以开始了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T08:11:06.840

当我像这样使用 datagridview 做任何事情时，我使用以下系统：-

我有一个 DataObject，在你的情况下是一个 List 对象。然后我创建一个绑定对象并将其数据源设置为 DataObject。我将 DatagridView 数据源设置为绑定对象。

这样，当您对数据对象进行更改时，它们会自动过滤到数据网格。

在您的情况下，您应该按照 Turbot 所说的那样，创建一个继承 BindingList 对象的类，然后您就可以开始了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T23:11:35.730

尝试使用 a`BindingList`而不是`List`. 它形成双向连接。（它在 ComponentModel 命名空间中）

# xcode - 为模拟器构建工作，但对设备失败

> ID：11404454
> 
> 赞同：-1
> 
> 时间：2012-07-09T23:01:56.060
> 
> 标签：xcode, compiler-errors

我添加了 16,000 个单词`NSArray`，现在当我为模拟器构建它时，它可以工作，但是对于一个设备——iPhone 和 iPad——它给了我这个错误：

> Apple LLVM 编译器 3.1 错误 command/applications/xcode.app/contents/developer/toolchains/xcodedefault.xctoolchain/usr/bin/clang 失败，退出代码为 1

谁能向我解释为什么会发生这种情况以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T23:11:39.747

这两个版本之间有些不同——你需要弄清楚那是什么。

请注意，这是编译错误，而不是运行时错误。换句话说，并不是在你的程序执行过程中出了什么问题；这是编译器甚至无法首先构建您的应用程序。

您是否在方法中指定整个数组，例如：

```
foo = [NSArray arrayWithObjects: obj1, obj2, obj3,...,obj16000, nil];` 
```

不要那样做。你让可怜的编译器头疼。而是从文件或其他东西中读取您的数据。

# php - 使用 PHP 在表单中创建下拉菜单时出错

> ID：11404456
> 
> 赞同：0
> 
> 时间：2012-07-09T23:02:06.733
> 
> 标签：php, forms

这是我的代码：

```
echo '<select  name=\"sv_07\">';   
$vars = array(
'Year' => 'Year'
'-2012' => '2012', 
'-2011' => '2011', 
'-2010' => '2010', 
'-2009' => '2009', 
'-2008' => '2008', 
'-2007' => '2007', 
'-2006' => '2006', 
'-2005' => '2005', 
'Pre 2005' => 'Pre 2005', 
);

foreach($vars as $val => $name){
if($_SESSION['sv_07'] == $val){
    echo '<option value="' . substr($val, 0, 1) . '" selected>' . $name . '</option>';
} else {
    echo '<option value="' . substr($val, 0, 1) . '">' . $name . '</option>';
}
}

echo '</select></div>'; 
```

如您所见，我正在尝试使用 PHP 来回显表单的标签，然后回显两组 HTML 中的一组 - 如果值与先前提交给会话的值匹配，则另一组用于所有其他 HTML。

它不起作用，但是我找不到错误。

我尝试在[http://ideone.com](http://ideone.com)调试它并收到错误消息：

**解析错误：语法错误，意外的 T_ENCAPSED_AND_WHITESPACE，在第 16 行的 /home/4seOiK/prog.php 中需要 T_STRING 或 T_VARIABLE 或 T_NUM_STRING

第 16 行：

```
 if($_SESSION['sv_07'] == $val){ 
```

我尝试了一些手动调试并将 if 要求更改为类似

如果（1>2）

并且错误消失了，但是我一生都无法看到我的语法有什么问题

谁能看到我哪里出错了？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T23:08:25.437

后面缺少逗号`'Year' => 'Year'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T23:12:42.523

我不确定您是否可以用破折号开始数组键（即使它们是字符串）。

# java - Eclipse 拒绝重新编译 Java

> ID：11404460
> 
> 赞同：0
> 
> 时间：2012-07-09T23:02:35.557
> 
> 标签：java, eclipse, compilation

我正在通过 Spring MVC 运行一个 webapp，其后端是用 Java 编写的。我在 Eclipse 中工作。我正在尝试更改 java 代码（我没有编写，但负责编辑）。

但是，我所做的任何更改都没有任何作用。我尝试在 Eclipse 中手动编译项目（项目-> 构建项目），但什么也没发生。我什至尝试取出其中一个 .class 文件，看看它是否会被重新编译，但事实并非如此。应该包含该文件的目录仍然是空的。

我已经检查过了，源和部署路径与我正在使用的 .java 和 .class 文件所在的位置相匹配。Eclipse 到底在做什么，我怎样才能让它编译我的文件？！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T23:22:39.333

看看 [Eclipse 如何使用 Tomcat 部署 Web 应用程序](https://stackoverflow.com/questions/9482763/how-does-eclipse-deploy-web-application-using-tomcat)

您是否删除了以下已部署的应用程序：

{Workspace_location}/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps

# php - 如何在 Eclipse 中设置 Zend 调试器？

> ID：11404461
> 
> 赞同：9
> 
> 时间：2012-07-09T23:02:43.520
> 
> 标签：php, eclipse, debugging, zend-framework

我正在尝试设置我的第一个 PHP 开发环境，但在使 Debug 环境正常工作或更准确地命中断点时遇到了很多问题。

这是我所做的

1.) 确认 php 在我的 Windows Apache 服务器中运行。我通过创建一个包含 phpinfo() 的测试 index.php 文件来做到这一点。

2.) 我已将 Zend 调试器安装到 Eclipse 中。

3.) 我已经使用以下代码设置了我的 php.ini 文件。

```
[Zend]
zend_extension_ts="c:/php/ext/ZendDebugger.dll"
zend_debugger.allow_hosts=127.0.0.1/32
zend_debugger.expose_remotely=always 
```

4.) 我在 windows 防火墙中为调试器打开了一个端口，在我的例子中，Eclipse 说 Zend 正在使用 10000。

5.) 我已将 dummy.php 文件添加到我的文档根目录中。

6.) 在这一切之后，我重新启动了 Apache。

7.) 当我在 Eclipse 中测试我的调试器时，我收到以下错误消息。

![Zend 错误](../Images/92275d80a9f67ade919977a422b00a6b.png)

8.）当我查看建议的部分时。我看到了这个。

![在此处输入图像描述](../Images/a85c74b03a64a4ce18bfe1dbb0cc714c.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T01:22:05.270

最可能的原因是 PHP 配置错误。检查`phpinfo()`您是否有 Zend Debugger 部分并验证您的配置。

![phpinfo() 中的 Zend 调试器条目](../Images/5a0c35892d9fdb3b49e4aa47c38f7de9.png)

请注意，`_ts`后缀 in`zend_debugger_ts`代表线程安全。如果你的 PHP 是 5.3 或更高版本，或者你禁用了线程安全（你可以在 phpinfo() 中检查），你将不得不使用`zend_debugger`指令而不是`zend_debugger_ts`.

还`expose_remotely`确认值`0`(Never)、`1`(Always) 和`2`(Allowed Hosts)；任何其他值都会使 Zend Debugger 无法检测。

# php - 合并超过 1500 个 wav 文件并再次切片（在 PHP 中）

> ID：11404464
> 
> 赞同：0
> 
> 时间：2012-07-09T23:02:47.480
> 
> 标签：php, wav, consolidation

因为我想节省很多工作，所以我尝试创建一个功能来合并每个文件夹的 wav 文件。该文件夹包含大约 100 到 500 个 wav 文件。所有 wav 文件均为立体声、44.100 Hz 和 24 位。

有超过 1500 个丢失的 wav 文件，无法通过批处理进行编辑，因为我正在使用的程序（出于其他特定原因）没有批处理选项。因此我尝试：
-> 合并 wav 文件 + 0.5 秒的静音并制作一个提示列表
-> 编辑大文件（在音乐编辑软件中完成）
-> 通过提示列表将大文件拆分回原始文件（精确）（没有沉默）

在我看来，最好的方法是删除文件头（将其保存在提示中）并加入字节？

到目前为止我知道的唯一语言是 PHP，所以我试图实现的只是 PHP。我发现我缺乏这样做的技能和知识，我希望有人能在这里提供帮助。

我尝试完成的基本事情是： - 制作所有 wav 文件的数组 - 在每个文件（在数组中）之后添加 0.5 秒的静音 - 创建最终数组以将文件转换回原始文件 - 删除文件头 - 创建新的波形文件。

一些基本功能：

```
function wav_scan_dir($directory){  
   $filenames = array();
   $iterator = new DirectoryIterator($directory);
   foreach ($iterator as $fileinfo) {

     if ($fileinfo->isFile() && $fileinfo->getExtension() === "wav") {
       $filenames[$fileinfo->getFilename()] = filesize($directory.$fileinfo->getFilename());
     }
}

    return $filenames;  
}

$directory = dirname(__FILE__)."/WAVES/";
$files = wav_scan_dir($directory); 
```

***由于评论额外信息：**
文件夹包含：01original.wav，02original.wav，03original.wav。
编辑到
onebigfile.wav = 01original.wav +0.5silence, 02original.wav, +0.5silence, 03original.wav。
编辑后返回（与原始 wav 文件完全相同的大小/长度）：
01original.wav、02original.wav、03original.wav。*

# php - 带有 PHP/MySQL 的多级菜单

> ID：11404468
> 
> 赞同：2
> 
> 时间：2012-07-09T23:03:23.287
> 
> 标签：php, mysql, html, menu, multidimensional-array

我正在尝试使用 PHP 创建从 MySQL 数据库中获取数据的动态多级菜单。我已经设法使用这种格式在 php 数组中订购菜单项：

```
-----------------------
Array
(
[1] => Array
    (
        [id] => 1
        [ubicacion] => top_a
        [nivel] => 1
        [parent_id] => 
        [tipo] => link
        [link] => http://www.google.com
        [titulo] => Google
        [alias] => google_es
        [children] => Array
            (
                [3] => Array
                    (
                        [id] => 3
                        [ubicacion] => top_a
                        [nivel] => 2
                        [parent_id] => 1
                        [tipo] => link
                        [link] => http://www.gmail.com
                        [titulo] => Gmail
                        [alias] => gmail
                        [children] => Array
                            (
                                [4] => Array
                                    (
                                        [id] => 4
                                        [ubicacion] => top_a
                                        [nivel] => 3
                                        [parent_id] => 3
                                        [tipo] => link
                                        [link] => www.inbox.gmail.com
                                        [titulo] => Inbox
                                        [alias] => inbox_gmail
                                    )

                            )

                    )

            )
    )

[2] => Array
    (
        [id] => 2
        [ubicacion] => top_a
        [nivel] => 1
        [parent_id] => 
        [tipo] => link
        [link] => http://www.yahoo.com
        [titulo] => Yahoo
        [alias] => yahoo
    )
)
----------------------- 
```

问题是我无法弄清楚如何以适用于 n 级的方式将此数组输出为 HTML 标记。我可以使用固定数量的级别来做到这一点，如下所示：

```
foreach($menu_array as $menu) {
 echo "<li><a href='{$menu['link']}'>{$menu['titulo']}</a>";
 if (array_key_exists('children',$menu)) {
    echo "<ul>";
    foreach ($menu['children'] as $child_menu) {
        echo "<li><a href='{$child_menu['link']}'>{$child_menu['titulo']}</a>";
        if (array_key_exists('children',$child_menu)) {
            echo "<ul>";
            foreach ($child_menu['children'] as $child2_menu) {
                echo "<li><a href='{$child2_menu['link']}'>{$child2_menu['titulo']}</a>";
            }
            echo "</ul>";
        }
    }
    echo "</ul>";
}
echo "</li>";
} 
```

但这仅适用于 3 个级别，我知道应该有办法解决这个问题，我知道我不是第一个面临多维数组的 HTML 输出问题的人。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-09T23:10:05.520

您可以使用一点递归来获得更多级别。

```
function echo_menu($menu_array) {
    //go through each top level menu item
    foreach($menu_array as $menu) {
        echo "<li><a href='{$menu['link']}'>{$menu['titulo']}</a>";
        //see if this menu has children
        if(array_key_exists('children', $menu)) {
            echo '<ul>';
            //echo the child menu
            echo_menu($menu['children']);
            echo '</ul>';
        }
        echo '</li>';
    }
}

echo '<ul>';
echo_menu($menu_array);
echo '</ul>'; 
```

这适用于您想要的任意数量的子级别。

# c++ - 无法在 Visual Studio 2010 中创建 c++ 项目

> ID：11404471
> 
> 赞同：2
> 
> 时间：2012-07-09T23:03:38.163
> 
> 标签：c++, visual-studio-2010

我想由于我安装了 Visual Studio 2012，我无法在 Visual Studio 2010 中创建 C++ 项目。但是，我不确定新安装的 VS 2012 是否与此问题有关。

我真正苦苦挣扎的问题是，当我尝试创建一个新的 C++ 项目时，既没有显示提示消息，也没有显示通知。

我尝试了谷歌的几种方法，甚至包括stackoverflow，但都失败了。

有没有人知道任何解决方案或有任何解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T23:22:35.787

1) 如果安装 MSVS 2012 是罪魁祸首，我一点也不感到惊讶。虚拟机很好:)

2) 您绝对应该查看 Windows 事件日志（如果您还没有）

3) 您还可以运行带有日志记录的 MSVS 2010，如下所示：

*   [http://msdn.microsoft.com/en-us/library/ms241272%28VS.80%29.aspx](http://msdn.microsoft.com/en-us/library/ms241272%28VS.80%29.aspx)

    `Devenv.exe /log "C:\My Files\MyLog.txt"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-23T09:37:49.717

If you have another version (or express edition) of visual studio installed on the same PC that is previously used to create console applications, that might be the issue. I had the same issue and I had Visual C++ 2008 on the same computer and I could either use the visual C++ for console applications or uninstall it completely. Hope this helps!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-05T04:09:55.690

我在“microsoft visual studio express 2012 for windows desktop”中遇到了同样的问题，现在它在通过修复选项后可以正常工作。

# forms - scrapy FormRequest True/False on/'off' 复选框

> ID：11404472
> 
> 赞同：0
> 
> 时间：2012-07-09T23:03:44.123
> 
> 标签：forms, checkbox, scrapy

在类似[的帖子](https://stackoverflow.com/questions/6833868/checkbox-input-using-python-mechanize)中，有人询问了有关将表单值从 [on] 更改为 not on 的问题，这只是设置“True”和“False”值（使用 Mechanize）。

这将如何在 scrapy 中完成`FormRequest.from_response`？

***EDIT***
例如，使用mechanize 获取表单信息，
这是网页表单自带的默认设置。
默认情况下，检查表单上的所有内容：

```
<CheckboxControl(ac=[*on])>
type=checkbox, name=ac value=['on']
<CheckboxControl(<None>=[*on])>
type=checkbox, name=None value=[]
<TextControl(p=)>
type=text, name=p value=
<CheckboxControl(pr[]=[*0, *1, *2])>
type=checkbox, name=pr[] value=['0', '1', '2']
<CheckboxControl(a[]=[*0, *1, *2, *3, *4])>
type=checkbox, name=a[] value=['0', '1', '2', '3', '4']
<CheckboxControl(pl=[*on])>
type=checkbox, name=pl value=['on']
<CheckboxControl(sp[]=[*1, *2, *3])>
type=checkbox, name=sp[] value=['1', '2', '3']
<SelectControl(pp=[0, 1, *2, 3])>
type=select, name=pp value=['2'] 
```

注意' ***ac*** '、' ***`<None>`***'和' ***pl*** '。
它们的值为**[*on]**
目标是关闭它们（？）（取消选中它们）

```
FormRequest.from_response(response, formnumber=0, formdata={'pr[]': '2', 'sp[]': '3', 'pp': '3', 'a[]': ['3', '4']})) 
```

这将返回一个表单，其中包含每个表单数据的修改框。formdata 中未提及的那些键仍会被检查。

按照上面帖子中的示例：

```
FormRequest.from_response(response, formdata={'live': 'False'}) 
```

我已经使用各种值完成了 FormRequest：'False'、'True'、''、['']、'on'、'off' 和 'None'，但似乎无法得到正确的响应。

有什么建议么？

**编辑：**
尝试过：

```
FormRequest(url, formdata = {'pl': 'False'}, callback=parse_this)  
FormRequest(url, formdata = {'pl': 'off'}, callback=parse_this)  
FormRequest(url, formdata = {'pl': ''}, callback=parse_this) 
FormRequest(url, formdata = {'pl': 'None'}, callback=parse_this)
FormRequest(url, formdata = {'pl': None}, callback=parse_this) 

FormRequest.from_response(response, formdata = {'pl': 'False'})  
FormRequest.from_response(response, formdata = {'pl': 'off'})  
FormRequest.from_response(response, formdata = {'pl': '') 
```

默认情况下，网页提供了一个包含已选中复选框的表单。目标是提交表单并“关闭”一些只有两个选项的复选框：“开”/“关”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T04:37:21.487

Checkbox 和其他的一样是一个输入字段，即它有一个`value`属性，它被发送到服务器。唯一的区别是，如果不勾选，则根本不发送，如果勾选，则与其他字段一起发送。我的意思是服务器通常通过简单地检查其名称是否在表单数据中来检查复选框是否被选中。

您想“取消选中”名为“live”的复选框。这意味着，它根本不必发送到服务器。

我会使用一个子类`FormRequest`（未经测试，但你应该明白）：

```
class MyFormRequest(FormRequest):
    """FormRequest subclass which filters from form data submitted to the server None values.
    This allows removing some fields automatically collected from a form by FormRequest.from_response method."""

    def __init__(self, *args, **kwargs):
        formdata = kwargs.get('formdata')
        if formdata: # filter out input fields with None values
            formdata = dict((name, value) for name, value in formdata.iteritems() if value is not None)
            kwargs['formdata'] = formdata

        super(MyFormRequest, self).__init__(*args, **kwargs) 
```

然后使用`MyFormRequest.from_response`代替`FormRequest.from_response`

解决您问题的另一种选择是`FormRequest`手动构建，仅传递所需的表单数据，而不使用 `FormRequest.from_response`.

[这](http://www.html-form-guide.com/php-form/php-form-checkbox.html)是一个未选中复选框的示例：

> 在 PHP 脚本（checkbox-form.php）中，我们可以从 $_POST 数组中获取提交的选项。如果 $_POST['formWheelchair'] 为“是”，则选中该框。如果未选中该复选框，则不会设置 $_POST['formWheelchair']。

# xquery - 带有整洁模块的 Zorba

> ID：11404480
> 
> 赞同：1
> 
> 时间：2012-07-09T23:04:20.190
> 
> 标签：xquery, tidy, zorba

我正在尝试将 tidy 模块与 zorba 库（XQuery 库）一起使用，所以我想构建具有 tidy 支持的 zorba。
我正在按照[这个站点上](http://cf.zorba-xquery.com.s3.amazonaws.com/doc/zorba-0.9.8/zorba/html/util.html#tidyLib)的说明进行操作，但是当我构建它时，cmake 告诉我 ZORBA_WITH_TIDY 被忽略了。你知道在 zorba 中包含 tidy 的任何方法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T06:59:57.593

Tidy 是一个外部模块，可从[https://code.launchpad.net/~zorba-coders/zorba/data-converters-module](https://code.launchpad.net/~zorba-coders/zorba/data-converters-module)获取 有关如何使用非核心模块安装 zorba 的说明，请访问[http://www.zorba -xquery.com/html/documentation/2.5.0/zorba/modules_building_in](http://www.zorba-xquery.com/html/documentation/2.5.0/zorba/modules_building_in)

# parsing - 递归下降解析器和嵌套括号

> ID：11404482
> 
> 赞同：3
> 
> 时间：2012-07-09T23:04:31.180
> 
> 标签：parsing, grammar, recursive-descent

我是语法和解析领域的新手。

我正在尝试编写一个递归下降解析器来评估这样的字符串：

((3 == 5 AND 4 == 5) OR (6 == 6))

在我开始处理嵌套括号之前，一切对我来说都很好。本质上，我发现我过早地到达目标字符串的末尾。

我认为问题是由于当我遇到像“6”或倒数第二个括号这样的标记时，我评估它然后移动到下一个标记。我会删除前进到下一个令牌的代码，但是我不确定我如何前进。

我的语法，例如，看起来像这样（“=>”符号是我自己对规则“翻译”的符号）：

测试：If CompoundSentence Then CompoundSentence | 复合句

CompoundSentence : ( CompoundSentence ) PCSopt |CompoundSentence 连词 |

句子 =>

CompoundSentence = (CompoundSentence) PCSopt | 句子 CSOpt

PCSOpt = Paren连词复合句 PCSOpt| 厄普西隆

CSOpt = 连词 CSOpt| 厄普西隆

Paren连词：And|Or

连词：和|或

句子：主语动词前缀

主题：主题中缀值 | 价值 =>

主题 = 值 SubjectOpt

SubjectOpt = 中缀值 SubjectOpt | 厄普西隆

动词：==|!=|>|<

谓词：谓词中缀值 | 价值 =>

谓词 = 值 PredicateOpt

PredicateOpt = 中缀值 PredicateOpt | 厄普西隆

中缀：+、-、*、/

我的复合句代码如下：

```
 private string CompoundSentence(IEnumerator<Token> ts)
    {
        //  CompoundSentence = ( CompoundSentence ) PCSopt  | Sentence CSOpt

        string sReturnValue = "";

        switch(ts.Current.Category) {

            case "OPENPAREN":
            {
                     //Skip past the open parenthesis
                ts.MoveNext();

                string sCSValue = CompoundSentence(ts);

                if(ts.Current.Category != "CLOSEPAREN") {

                    sReturnValue = "Missing parenthesis at " + ts.Current.OriginalString;
                    return sError;
                }
                else {

                        //Skip past the close parenthesis
                    ts.MoveNext();  
                }

                sReturnValue = PCSOpt(sCSValue, ts);

                break;
            }
            default:
            {
                string sSentenceVal = Sentence(ts);

                    //sSentenceVal is the truth value -- "TRUE" or "FALSE"
                    //of the initial Sentence component
                    //CSOpt will use that value, along with the particular conjunction
                    //and the value of the current token, 
                    //to generate a new truth value.
                sReturnValue = CSOpt(sSentenceVal, ts);

                break;
            }
        }

        return sReturnValue;
    } 
```

正如我所说，我是这个领域的新手，所以我可能不了解一些非常基本的东西。

如果有人能引导我朝着正确的方向前进，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T23:23:05.887

对于表达式，手动编码的递归下降解析器是一件很容易编码的事情。

[有关如何编写递归下降解析器的](https://stackoverflow.com/questions/2245962/is-there-an-alternative-for-flex-bison-that-is-usable-on-8-bit-embedded-systems/2336769#2336769)信息，请参阅我的SO 答案。

一旦你有了解析器的结构，就很容易在解析时评估表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T23:59:03.040

解析要遵循的基本约定是：

1.  在规则开始时，当前标记应该是规则涵盖的第一个标记。

2.  规则应该使用它涵盖的所有令牌。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T00:53:05.027

我认为它非常微妙，但事实证明它非常简单：我的扫描仪没有捕捉到第二个（可能更高）右括号。哎哟。

感谢大家的帮助。

艾拉，我会接受你的回答，因为它提供了关于 RDP 的详细帮助。

# asp.net-mvc - DataAnnotations StringLength 属性 MVC - 没有最大值

> ID：11404486
> 
> 赞同：34
> 
> 时间：2012-07-09T23:04:45.640
> 
> 标签：asp.net-mvc, asp.net-mvc-4, data-annotations, minimum, string-length

我在 MVC4 中使用数据注释进行模型验证，目前正在使用 StringLengthAttribute 但是我不想指定最大值（当前设置为 50），但我想指定最小字符串长度值。

有没有办法只指定最小长度？也许我可以使用另一个属性？

我目前的代码是：

```
 [Required]
    [DataType(DataType.Password)]
    [Display(Name = "Confirm New Password")]
    [StringLength(50, MinimumLength = 7)]
    [CompareAttribute("NewPassword", ErrorMessage = "The New Password and Confirm New Password fields did not match.")]
    public string ConfirmNewPassword { get; set; } 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-07-09T23:13:36.220

> 有没有办法只指定最小长度？也许我可以使用另一个属性？

*使用标准数据注释，否。您必须指定最大长度。只有其他参数是可选的。*

在这种情况下，我会推荐这样的东西：

```
[StringLength(int.MaxValue, MinimumLength = 7)] 
```

您还可以使用像这样的[Regex](https://docs.microsoft.com/en-us/dotnet/standard/base-types/regular-expressions)（正则表达式）属性：

```
[RegularExpression(@"^(?:.*[a-z]){7,}$", ErrorMessage = "String length must be greater than or equal 7 characters.")] 
```

更多信息：[使用正则表达式的密码强度验证](http://www.zorched.net/2009/05/08/password-strength-validation-with-regular-expressions/)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-12-08T19:43:05.087

为此，还有 [MinLength(7)] 属性。

来源：[https ://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.minlengthattribute(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.minlengthattribute(v=vs.110).aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-15T15:44:58.540

您是否考虑过删除数据注释并将 Html 属性添加到视图中的 Html.TextBoxFor 元素？

应该看起来像：

```
@Html.TextBoxFor(model => model.Full_Name, new { htmlAttributes = new { @class = "form-control", @minlength = "10" } }) 
```

或者

```
@Html.TextBoxFor(model => model.Full_Name, new { @class = "form-control",  @minlength = "10" } }) 
```

10 是您选择的最小长度。

我喜欢将 html 属性添加到我的视图中，因为我可以快速看到它的影响。不会弄乱您的数据库，并且如果您使用迁移（代码优先方法），则不需要您运行迁移和数据库更新。

请记住，当您将 EditorFor 更改为 TextBoxFor 时，您将失去样式，但应该很容易修复，您可以再次将样式添加到视图或将样式添加到 CSS 文件。

希望这可以帮助 ：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-09T02:06:11.407

干得好弗朗索瓦，看来您不能使用数据注释在输入字段上发出 maxlength 属性。它只提供客户端验证。使用带有 HTML 属性的 maxlength 创建了正确设置 maxlength 的输入字段。

```
@Html.EditorFor(model => model.Audit_Document_Action, new { htmlAttributes = new { @class = "form-control", @maxlength = "10" } }) 
```

# regex - URL 过滤器的正则表达式，使过滤后的 URL 难以阅读

> ID：11404487
> 
> 赞同：2
> 
> 时间：2012-07-09T23:04:47.997
> 
> 标签：regex

我想插入一个 URL 过滤器，并且我希望该 URL 难以去除。例如`.*porn\.*`，它可能使用 ASCII 码作为十六进制形式的字母。当然，这个例子很明显，我肯定会保留那个例子；）但对于其他人，我希望它们难以阅读！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T00:10:33.187

您可以使用 PHP 中的 $_GET 函数从 URL 中提取一个 ID 并以这种方式显示它，类似于带有“watch?v=”的 Youtube。我最近使用“ [?id=49](http://www.billynair.com/school/musc1010/musicJournal.php?id=49) ”做了一个（我只有几页 ATM，我很快就会有大约 70 页）。我所做的是使用带有 song_id 的数据库来索引信息。我使用相同的基本布局，但您可以使用 ID 访问 PHP 中包装的信息，这样它就不会被发送到浏览器，但仍会显示您想要的页面。

或者，如果您真的希望它看起来很疯狂，您可以使用使用 SHA() 或 MD5() 函数的数据库对其进行加密。你的显示将看起来像 /page.php?id=21a57f2fe765e1ae4a8bf15d73fc1bf2a533f547f2343d12a499d9c0592044d4。

# php - CakePHP - 模型上的附加字段以显示角色列表

> ID：11404490
> 
> 赞同：0
> 
> 时间：2012-07-09T23:05:19.447
> 
> 标签：php, cakephp, model, cakephp-acl

我需要模型中的一个字段（具体来说，它是一个“用户”模型），它将所有角色（ARO）列为分隔字符串（例如“管理员，官员”）。但是，该字段将是只读字段，可以直接在视图上使用。

这就是我现在拥有的：

```
["id"]=>  "1" 
["username"]=> "matt@ruler.us" 
["password"]=> "d1266f045175f0863dfe26d8bdfd9f91f4ca53bb" 
["role_id"]=> "0" 
```

role_id 指的是 ARO 角色。我想要一个只读的查看特定字段来包含角色列表。

如何正确执行此操作？

# ruby-on-rails-3 - Ruby on Rails 教程 Demo_App - rake db：迁移到 Heroku 不起作用

> ID：11404491
> 
> 赞同：0
> 
> 时间：2012-07-09T23:05:24.557
> 
> 标签：ruby-on-rails-3, heroku, railstutorial.org

我正在学习 Michael Hartl 的 Rails 教程，但在演示应用程序的最后阶段遇到了一些问题，即在 Heroku 上运行 rake 命令将数据库迁移到 Web。

带有 --trace 的 rake 命令给出以下结果：

```
$ heroku run rake db:migrate --trace
Running `rake db:migrate --trace` attached to terminal...
/usr/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36: command not found: tput cols
/usr/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36: command not found: tput lines
up, run.1
(in /app)
* Invoke db:migrate (first_time)
** Invoke environment (first_time)
** Execute environment
** Execute db:migrate
rake aborted!
no such file to load -- pg
/app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.0.1/lib/active_support/dependencies.rb:239:in `require'
/app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.0.1/lib/active_support/dependencies.rb:239:in `block in require'
/app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.0.1/lib/active_support/dependencies.rb:227:in `load_dependency'
/app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.0.1/lib/active_support/dependencies.rb:239:in `require'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.0.1/lib/active_record/connection_adapters/postgresql_adapter.rb:9:in `postgresql_connection'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.0.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:230:in `new_connection'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.0.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:238:in `checkout_new_connection'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.0.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:194:in `block (2 levels) in checkout'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.0.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:190:in `loop'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.0.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:190:in `block in checkout'
/usr/local/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.0.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:189:in `checkout'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.0.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:96:in `connection'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.0.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:318:in `retrieve_connection'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.0.1/lib/active_record/connection_adapters/abstract/connection_specification.rb:97:in `retrieve_connection'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.0.1/lib/active_record/connection_adapters/abstract/connection_specification.rb:89:in `connection'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.0.1/lib/active_record/migration.rb:486:in `initialize'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.0.1/lib/active_record/migration.rb:433:in `new'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.0.1/lib/active_record/migration.rb:433:in `up'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.0.1/lib/active_record/migration.rb:415:in `migrate'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.0.1/lib/active_record/railties/databases.rake:142:in `block (2 levels) in <top (required)>'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.8.7/lib/rake.rb:636:in `call'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.8.7/lib/rake.rb:636:in `block in execute'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.8.7/lib/rake.rb:631:in `each'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.8.7/lib/rake.rb:631:in `execute'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.8.7/lib/rake.rb:597:in `block in invoke_with_call_chain'
/usr/local/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.8.7/lib/rake.rb:590:in `invoke_with_call_chain'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.8.7/lib/rake.rb:583:in `invoke'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.8.7/lib/rake.rb:2051:in `invoke_task'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.8.7/lib/rake.rb:2029:in `block (2 levels) in top_level'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.8.7/lib/rake.rb:2029:in `each'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.8.7/lib/rake.rb:2029:in `block in top_level'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.8.7/lib/rake.rb:2068:in `standard_exception_handling'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.8.7/lib/rake.rb:2023:in `top_level'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.8.7/lib/rake.rb:2001:in `block in run'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.8.7/lib/rake.rb:2068:in `standard_exception_handling'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.8.7/lib/rake.rb:1998:in `run'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.8.7/bin/rake:31:in `<top (required)>'
/app/vendor/bundle/ruby/1.9.1/bin/rake:19:in `load'
/app/vendor/bundle/ruby/1.9.1/bin/rake:19:in `<main>' 
```

我认为开头的“找不到命令：tput”的东西可能是我修改过的东西（看起来像“输出”这个词被切断了）所以我从头开始重做了整个章节，但最终结果相同，所以我不认为这是我对代码所做的任何更改。

我使用的是 Windows PC，运行 XP。在本地主机上运行时一切正常，并且我的 Git 存储库完美地推送到 Heroku，所以除了这个 rake 命令之外一切正常。如果您想查看任何其他文件，请访问：[https ://github.com/jimbobsweeney/demo_app](https://github.com/jimbobsweeney/demo_app)

我非常感谢您对此提供的任何帮助。它正在融化我的大脑。

抢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T23:25:11.060

你有安装 Cygwin 吗？[这篇文章](http://d.hatena.ne.jp/seinzumtode/20120120/1327062443) *（日文）*提到了这个错误并指出了[这个 SO question](https://stackoverflow.com/questions/6229560/unable-to-run-on-heroku)，它建议您确保安装了 Cygwin 和可能的 ncurses。那里的评论链接到[这篇文章](http://benscheirman.com/2009/06/getting-started-with-heroku-on-windows)，它也可能有有用的信息。

看起来问题是heroku正在`tput`你的shell中寻找不可用的命令*（我相信它是ncurses附带的）*。

至于堆栈跟踪，看起来`pg`gem 不在您`Gemfile`的生产环境将执行它的地方。不必为了`pg`让部署工作而在 Windows 上安装。为此`:production`在您的组中创建一个组。`Gemfile`

```
group :production do
  gem "pg", "~> 0.11.0"
end 
```

[您可以在bundler 文档](http://gembundler.com/groups.html)中了解有关组的更多信息。

# oauth - OpenID、OpenSSO 和 OAuth

> ID：11404492
> 
> 赞同：4
> 
> 时间：2012-07-09T23:05:46.717
> 
> 标签：oauth, openid, security, opensso

我对 OpenID 的理解是，它提供了一种方法让一个站点包含您所有的身份和外围信息，但让其他符合 OpenID（和用户信任）的站点重新使用该信息来识别和验证用户。从本质上讲，它最大限度地减少了用户在互联网上拥有的登录凭据（用户名和密码）的数量。

我对 OpenSSO 的理解是，它允许您登录到一个站点并自动登录到第一个站点信任的所有其他站点。从本质上讲，它最大限度地减少了用户必须登录这些不同站点的次数。

我对 OAuth 的理解是，它允许用户授予 3rd 方站点对其位于某个特定站点的信息的某些访问权限。本质上，就像 OpenSSO 一样，它最大限度地减少了用户必须登录这些不同站点的次数。与 OpenSSO 的不同之处在于，OpenSSO 一次将用户登录到所有参与站点（打开了完全权限），而 OAuth 授予对这些参与站点的更细粒度的访问权限。

所以，首先，如果我说的有什么不正确的地方，请先纠正我！

假设我或多或少是正确的，那么我对以下项目有以下问题/需要澄清：

*   我什么时候会选择 OpenSSO 而不是 OAuth - 就在我想限制其他参与站点在用户登录其中一个站点时的访问权限时？
*   我将不得不考虑并集成到我的应用程序中的每种技术的不同安全风险 - 或者它们*本身是否被认为是安全的*（基本上我可以放心，如果我的应用程序使用它们，我的应用程序不会开放任何新的攻击）？

由于这些技术密切相关，我很难在这里看到整个“森林穿过树木” - 在此先感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T19:45:56.143

不是真正正确的比较。OpenID 和 OAuth 是协议，OpenSSO（现在的 OpenAM）是这些协议和其他协议（SAML、OAuth 等）的实现

一般来说，OpenID 和 OAuth 的协议是相似的，尽管它们起源于不同的用例。如今，对于联合（身份验证）和授权案例，围绕 OAuth 2.0 有很多融合。[称为OpenID Connect](http://openid.net/wg/connect/)的下一代 OpenID建立在 OAuth 2.0 之上，其前身已经在 Google、Facebook、Twitter 等平台上部署......

至于安全性，总是存在一些风险，尤其是实施错误。选择一个好的实现并阅读规范，以便您了解风险和对策。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T03:25:08.433

OpenSSO 是让您登录到一个站点并登录到多个站点。

OAuth 允许一个站点从第二个站点提取您的数据（提取您的推文或 Facebook 状态），而第一个站点不必知道如何登录到第二个站点。

# c++ - 需要帮助创建一个使用我编写的头文件的简单控制台程序

> ID：11404496
> 
> 赞同：1
> 
> 时间：2012-07-09T23:06:12.233
> 
> 标签：c++, visual-studio-2010, console-application, header-files

我对此感到非常沮丧，所以我真的可以使用一些帮助。

我在视觉工作室创建了一个新项目。我首先创建了一个名为“MyString,h”的新头文件并将其放在头文件夹中。它包含一个名为 String 的类。您可以在本文末尾看到我用于它的代码

我现在在源文件文件夹中也有一个 MyStringTest.cpp 文件。它有以下代码。

```
 #include <iostream>
    #include "MyString.h"
    using namespace std;

    int main() {
            String obj = "Hello";
        cout << obj(1,3);
    } 
```

预期：编译并运行将输出“llo”的控制台程序现实：错误：'标识符'字符串'未定义

这是我在头文件中的一些代码......我真的无法适应所有这些。

```
 //1\. Preprocessor commands - guards against multiple inclusions of the file MyString.h
    #ifdef __MYSTRING_H__
    #define __MYSTRING_H_
    #define _CRT_SECURE_NO_DEPRECATE
    #define _CRT_NONSTDC_NO_DEPRECATE

    //2\. Include Files for String Methods and Assert
    #include<cstring> //strlen, strcpy, strcmp
    #include<cassert> //assert 
    #include<iostream> //cout, cin
    using namespace std;

    //3\. Begin the String Class Interface
    class String{

    //4\. Define the Public Members
    public:

        //5\. Default Constructor
        String(); 

        //6\. Constructor which converts a char* to a String object
        String(const char *s); 
```

……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T23:11:09.750

第一个代码行的一个小错误：你需要

```
#ifndef __MYSTRING_H__ 
```

否则，您将*排除*所有文件内容直到`#endif`

# java - 尝试连接网页时出现 HtmlUnit 错误

> ID：11404498
> 
> 赞同：0
> 
> 时间：2012-07-09T23:06:33.450
> 
> 标签：java, html, htmlunit

`HtmlUnit`我今天在试图弄清楚如何转储网站的源代码时才听说这件事。我想做的是使用脚本从网站转储源代码，但是当我运行它时，会得到一个很长的红色列表。

这是我使用的代码：

```
public static void main(String[] args) throws FailingHttpStatusCodeException, MalformedURLException, IOException {

    String url = "http://www.runelocus.com/forums/member.php?102785&tab=aboutme#aboutme";
    WebClient client = new WebClient(BrowserVersion.FIREFOX_3_6);
    HtmlPage page = client.getPage(url);
    System.out.println(page.getWebResponse().getContentAsString());
} 
```

这是我得到的错误：

```
Exception in thread "main" org.apache.http.client.ClientProtocolException
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:822)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:776)
at com.gargoylesoftware.htmlunit.HttpWebConnection.getResponse(HttpWebConnection.java:152)
at com.gargoylesoftware.htmlunit.WebClient.loadWebResponseFromWebConnection(WebClient.java:1439)
at com.gargoylesoftware.htmlunit.WebClient.loadWebResponse(WebClient.java:1358)
at com.gargoylesoftware.htmlunit.WebClient.getPage(WebClient.java:307)
at com.gargoylesoftware.htmlunit.WebClient.getPage(WebClient.java:373)
at com.gargoylesoftware.htmlunit.WebClient.getPage(WebClient.java:358)
at HTMLDumping.htmlunittest.main(htmlunittest.java:18)
Caused by: org.apache.http.ProtocolException: Invalid header: blcc_proxy
at org.apache.http.impl.io.AbstractMessageParser.parseHeaders(AbstractMessageParser.java:224)
at org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:259)
at org.apache.http.impl.AbstractHttpClientConnection.receiveResponseHeader(AbstractHttpClientConnection.java:281)
at org.apache.http.impl.conn.DefaultClientConnection.receiveResponseHeader(DefaultClientConnection.java:247)
at org.apache.http.impl.conn.AbstractClientConnAdapter.receiveResponseHeader(AbstractClientConnAdapter.java:219)
at org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:298)
at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:125)
at org.apache.http.impl.client.DefaultRequestDirector.tryExecute(DefaultRequestDirector.java:645)
at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:464)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:820) 
```

如果有人可能知道如何解决这个问题，请提出一些建议。接受所有反馈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T11:28:48.740

使用：System.out.println(page.asText());

# ruby-on-rails - Rails 3.2.2 在使用 capistrano 部署后在样式表和 js 资产上获得 404

> ID：11404502
> 
> 赞同：2
> 
> 时间：2012-07-09T23:06:59.790
> 
> 标签：ruby-on-rails, nginx, ruby-on-rails-3.2, unicorn, ubuntu-12.04

用这个拔掉我的头发后，恐怕我将不得不再次将那些知识变得更聪明......再次！

好的，这就是问题所在，我正在关注以下两个railscast：

[在生产中部署到 vps](http://railscasts.com/episodes/335-deploying-to-a-vps?autoplay=true)
[资产管道](http://railscasts.com/episodes/341-asset-pipeline-in-production?autoplay=true)

我的设置：
Ubuntu Server 12.04
nginx
unicorn
ruby​​ 1.9.3p125
rails 3.2.2

广告据我所知，所有内容都遵循了 T（或者 Tea 或者可能是 Tee，我以前从未见过这句话被写下来）。该坐席现在在我的服务器上运行，但未加载样式表和 javascript 文件。[加载公共/资产中存在的 .css 文件时，](https://stackoverflow.com/questions/9419230/rails-3-1-404-error-when-loading-css-files-that-are-present-in-public-assets)它似乎与Rails 3.1 404 错误或[样式表或 JavaScript 文件的 Rails 404 错误](https://stackoverflow.com/questions/3410956/rails-404-error-for-stylesheet-or-javascript-files)相同。虽然第一个没有答案，但后者表明这可能是网络服务器不寻找静态资源的问题，也许不应该。

有谁知道可能是什么原因造成的？

一些事实：

*   首先，我遇到了一些关于预编译的严重错误，并注意到我的个人 css/js 文件已被缩小为它们的应用程序对应文件，因此我在 ruby​​ 助手中更改了它们的声明以反映这一点。

*   当我更改为`config.serve_static_assets = true`in时，该应用程序在本地工作`config/environments/production.rb`

*   这是我服务器上生产.log 的转储

    ```
    Started GET "/main" for 92.237.28.149 at 2012-07-09 23:08:02 +0100
       Processing by MainController#index as HTML
         Rendered shared/_login_form.html.erb (0.4ms)
         Rendered shared/_footer.html.erb (0.4ms)
      Rendered shared/_details_form.html.erb (7.7ms)
      Rendered main/index.html.erb within layouts/main_logged (17.1ms)
    Completed 200 OK in 21ms (Views: 20.5ms | ActiveRecord: 0.0ms)
    Compiled jquery.js  (2ms)  (pid 8253)
    Compiled jquery_ujs.js  (0ms)  (pid 8253)
    Compiled admin_user.js  (227ms)  (pid 8253)
    Compiled construction.js  (227ms)  (pid 8253)
    Compiled google-map.js  (0ms)  (pid 8253)
    Compiled jquery-1.2.6.min.js  (1ms)  (pid 8253)
    Compiled jquery-ui-personalized-1.5.2.packed.js  (0ms)  (pid 8253)
    Compiled login.js  (227ms)  (pid 8253)
    Compiled main.js  (222ms)  (pid 8253)
    Compiled menu.js  (223ms)  (pid 8253)
    Compiled order_steps.js  (225ms)  (pid 8253)
    Compiled register_user.js  (223ms)  (pid 8253)
    Compiled sprinkle.js  (0ms)  (pid 8253)   
    Compiled sticky_basket/jquery.easing.1.3.js  (0ms)  (pid 8253)
    Compiled sticky_basket/stickysidebar.jquery.js  (0ms)  (pid 8253)
    Compiled sticky_basket/stickysidebar.jquery.min.js  (0ms)  (pid 8253)
    Compiled user.js  (292ms)  (pid 8253)
    Compiled application.js  (2155ms)  (pid 8253)
    Compiled admin_user.css  (12ms)  (pid 8253)
    Compiled construction.css  (0ms)  (pid 8253)
    Compiled construction.css  (1ms)  (pid 8253)
    Compiled lightbox.css  (0ms)  (pid 8253)
    Compiled login.css  (1ms)  (pid 8253)
    Compiled main.css  (0ms)  (pid 8253)
    Compiled login.css  (1ms)  (pid 8253)
    Compiled main.css  (0ms)  (pid 8253)
    Compiled main.css  (2ms)  (pid 8253)
    Compiled menu.css  (1ms)  (pid 8253)
    Compiled menu_style.css  (0ms)  (pid 8253)
    Compiled normalise.css  (0ms)  (pid 8253)
    Compiled order_steps.css  (0ms)  (pid 8253)
    Compiled order_steps.css  (1ms)  (pid 8253)
    Compiled register_user copy.css  (0ms)  (pid 8253)
    Compiled register_user.css  (0ms)  (pid 8253)
    Compiled register_user.css  (1ms)  (pid 8253)
    Compiled tab_style.css  (0ms)  (pid 8253)
    Compiled user.css  (1ms)  (pid 8253)
    Compiled application.css  (236ms)  (pid 8253)
    Compiled jquery.js  (2ms)  (pid 8253)
    Compiled jquery_ujs.js  (0ms)  (pid 8253)
    Compiled admin_user.js  (273ms)  (pid 8253)
    Compiled construction.js  (225ms)  (pid 8253)
    Compiled google-map.js  (0ms)  (pid 8253)
    Compiled jquery-1.2.6.min.js  (1ms)  (pid 8253)
    Compiled jquery-ui-personalized-1.5.2.packed.js  (0ms)  (pid 8253)
    Compiled login.js  (269ms)  (pid 8253)
    Compiled main.js  (225ms)  (pid 8253)
    Compiled menu.js  (224ms)  (pid 8253)
    Compiled order_steps.js  (226ms)  (pid 8253)
    Compiled register_user.js  (224ms)  (pid 8253)
    Compiled sprinkle.js  (0ms)  (pid 8253)   
    Compiled sticky_basket/jquery.easing.1.3.js  (0ms)  (pid 8253)
    Compiled sticky_basket/stickysidebar.jquery.js  (0ms)  (pid 8253)
    Compiled sticky_basket/stickysidebar.jquery.min.js  (0ms)  (pid 8253)
    Compiled user.js  (224ms)  (pid 8253)
    Compiled application.js  (2096ms)  (pid 8253)
    Compiled admin_user.css  (12ms)  (pid 8253)
    Compiled construction.css  (0ms)  (pid 8253)
    Compiled construction.css  (1ms)  (pid 8253)
    Compiled lightbox.css  (0ms)  (pid 8253)
    Compiled login.css  (1ms)  (pid 8253)
    Compiled main.css  (0ms)  (pid 8253)
    Compiled login.css  (1ms)  (pid 8253)
    Compiled main.css  (0ms)  (pid 8253)
    Compiled main.css  (1ms)  (pid 8253)
    Compiled menu.css  (2ms)  (pid 8253)
    Compiled menu_style.css  (0ms)  (pid 8253)
    Compiled normalise.css  (0ms)  (pid 8253)
    Compiled order_steps.css  (0ms)  (pid 8253)
    Compiled order_steps.css  (1ms)  (pid 8253)
    Compiled register_user copy.css  (0ms)  (pid 8253)
    Compiled register_user.css  (0ms)  (pid 8253)
    Compiled register_user.css  (1ms)  (pid 8253)
    Compiled tab_style.css  (0ms)  (pid 8253)
    Compiled user.css  (1ms)  (pid 8253)
    Compiled application.css  (179ms)  (pid 8253)

    Started GET "/main" for 92.237.28.149 at 2012-07-09 23:15:00 +0100
    Processing by MainController#index as HTML   
      Rendered shared/_login_form.html.erb (1.2ms)
      Rendered shared/_footer.html.erb (1.1ms)
      Rendered shared/_details_form.html.erb (15.5ms)
      Rendered main/index.html.erb within layouts/main_logged (80.9ms)
    Completed 200 OK in 142ms (Views: 140.4ms | ActiveRecord: 0.0ms)

    Started GET "/main" for 92.237.28.149 at 2012-07-09 23:33:54 +0100
    Processing by MainController#index as HTML
      Rendered shared/_login_form.html.erb (1.2ms)
      Rendered shared/_footer.html.erb (1.1ms)
      Rendered shared/_details_form.html.erb (15.6ms)
      Rendered main/index.html.erb within layouts/main_logged (80.7ms)
    Completed 200 OK in 142ms (Views: 140.0ms | ActiveRecord: 0.0ms) 
    ```

如您所见，没有更多关于预编译的投诉

这是生成的html

```
 <title>HTML Snippet</title>
  <link href="/assets/application-dd445a707b7e96c914afd14bf1f02bbc.css" media="screen" rel="stylesheet" type="text/css" />
  <script src="/assets/application-def3878140cda305cb0ca5ef745fd758.js" type="text/javascript"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js" type="text/javascript"></script>
  <script src="http://cloud.github.com/downloads/malsup/cycle/jquery.cycle.all.latest.js" type="text/javascript"></script> 
```

如果我点击它们，这些链接会生成一个 nginx 404，但是如果我将 url 更改为 `http://<ipaddress>/public/assets/application-dd445a707b7e96c914afd14bf1f02bbc.css`我会生成一个 rails`The page you were looking for doesn't exist.`

这是我服务器上 /public/assets 的重要（我认为）内容

```
application-7c90c01effcf9d8593e28e4c4b716ac2.css
application-7c90c01effcf9d8593e28e4c4b716ac2.css.gz
application.css
application.css.gz
application-dd445a707b7e96c914afd14bf1f02bbc.css
application-dd445a707b7e96c914afd14bf1f02bbc.css.gz
application-def3878140cda305cb0ca5ef745fd758.js
application-def3878140cda305cb0ca5ef745fd758.js.gz
application.js
application.js.gz 
```

最后，我不太清楚的领域，只是它全部覆盖，这里是 railscast 中用于配置 capistrano、nginx 和 unicorn 的文件：

我已取消注释`load 'deploy/assets'`in capfile

部署.rb

```
require "bundler/capistrano"

server "92.237.28.149", :web, :app, :db, primary: true

set :application, "little_oven_deploy"
set :user, "daz"
set :deploy_to, "/home/#{user}/apps/#{application}"
set :deploy_via, :remote_cache
set :use_sudo, false

set :scm, "git"
set :repository, "git@bitbucket.org:DanBaldwin/little_oven_deploy.git"
set :branch, "master"

default_run_options[:pty] = true
ssh_options[:forward_agent] = true

after "deploy", "deploy:cleanup" # keep only the last 5 releases

namespace :deploy do
  %w[start stop restart].each do |command|
    desc "#{command} unicorn server"
    task command, roles: :app, except: {no_release: true} do
      run "/etc/init.d/unicorn_#{application} #{command}"
    end
  end

  task :setup_config, roles: :app do
    sudo "ln -nfs #{current_path}/config/nginx.conf /etc/nginx/sites-enabled/#{application}"
    sudo "ln -nfs #{current_path}/config/unicorn_init.sh /etc/init.d/unicorn_#{application}"
    run "mkdir -p #{shared_path}/config"
    put File.read("config/database.example.yml"), "#{shared_path}/config/database.yml"
    puts "Now edit the config files in #{shared_path}."
  end
  after "deploy:setup", "deploy:setup_config"

  task :symlink_config, roles: :app do
    run "ln -nfs #{shared_path}/config/database.yml #{release_path}/config/database.yml"
  end
  after "deploy:finalize_update", "deploy:symlink_config"

  desc "Make sure local git is in sync with remote."
  task :check_revision, roles: :web do
    unless `git rev-parse HEAD` == `git rev-parse origin/master`
      puts "WARNING: HEAD is not the same as origin/master"
      puts "Run `git push` to sync changes."
      exit
    end
  end
  before "deploy", "deploy:check_revision"
end 
```

nginx.conf

```
upstream unicorn {
  server unix:/tmp/unicorn.little_oven_deploy.sock fail_timeout=0;
}

server {
  listen 80 default deferred;
  # server_name example.com;
  root /home/deployer/apps/blog/current/public;

  location ^~ /assets/ {
    gzip_static on;
    expires max;
    add_header Cache-Control public;
  }

  try_files $uri/index.html $uri @unicorn;
  location @unicorn {
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header Host $http_host;
    proxy_redirect off;
    proxy_pass http://unicorn;
  }

  error_page 500 502 503 504 /500.html;
  client_max_body_size 4G;
  keepalive_timeout 10;
} 
```

独角兽.rb

```
root = "/home/daz/apps/little_oven_deploy/current"
working_directory root
pid "#{root}/tmp/pids/unicorn.pid"
stderr_path "#{root}/log/unicorn.log"
stdout_path "#{root}/log/unicorn.log"

listen "/tmp/unicorn.little_oven_deploy.sock"
worker_processes 2
timeout 30 
```

unicorn_init.sh

```
#!/bin/sh
### BEGIN INIT INFO
# Provides:          unicorn
# Required-Start:    $remote_fs $syslog
# Required-Stop:     $remote_fs $syslog
# Default-Start:     2 3 4 5
# Default-Stop:      0 1 6
# Short-Description: Manage unicorn server
# Description:       Start, stop, restart unicorn server for a specific application.
### END INIT INFO
set -e

# Feel free to change any of the following variables for your app:
TIMEOUT=${TIMEOUT-60}
APP_ROOT=/home/daz/apps/little_oven_deploy/current
PID=$APP_ROOT/tmp/pids/unicorn.pid
CMD="cd $APP_ROOT; bundle exec unicorn -D -c $APP_ROOT/config/unicorn.rb -E production"
AS_USER=daz
set -u

OLD_PIN="$PID.oldbin"

sig () {
  test -s "$PID" && kill -$1 `cat $PID`
}

oldsig () {
  test -s $OLD_PIN && kill -$1 `cat $OLD_PIN`
}

run () {
  if [ "$(id -un)" = "$AS_USER" ]; then
    eval $1
  else
    su -c "$1" - $AS_USER
  fi
}

case "$1" in
start)
  sig 0 && echo >&2 "Already running" && exit 0
  run "$CMD"
  ;;
stop)
  sig QUIT && exit 0
  echo >&2 "Not running"
  ;;
force-stop)
  sig TERM && exit 0
  echo >&2 "Not running"
  ;;
restart|reload)
  sig HUP && echo reloaded OK && exit 0
  echo >&2 "Couldn't reload, starting '$CMD' instead"
  run "$CMD"
  ;;
upgrade)
  if sig USR2 && sleep 2 && sig 0 && oldsig QUIT
  then
    n=$TIMEOUT
    while test -s $OLD_PIN && test $n -ge 0
    do
      printf '.' && sleep 1 && n=$(( $n - 1 ))
    done
    echo

    if test $n -lt 0 && test -s $OLD_PIN
    then
      echo >&2 "$OLD_PIN still exists after $TIMEOUT seconds"
      exit 1
    fi
    exit 0
  fi
  echo >&2 "Couldn't upgrade, starting '$CMD' instead"
  run "$CMD"
  ;;
reopen-logs)
  sig USR1
  ;;
*)
  echo >&2 "Usage: $0 <start|stop|restart|upgrade|force-stop|reopen-logs>"
  exit 1
  ;;
esac 
```

unicorn_init.sh 也是 chmod +x。

抱歉，信息可能会过载，但如果它有助于为您提供我的问题的快照，它有助于获得诊断，非常感谢任何帮助。

提前致谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-26T15:06:06.887

If nginx isn't serving static assets it's probably due to a typo in the `root` directive. Triple check that it's correctly referencing your rails public folder.

In my case, I forgot that I moved my app to a different location. This didn't break the app entirely as nginx was still able to `proxy_pass` requests **via my unicorn socket** which hadn't moved.

Don't assume your app is wired up properly if you get responses from your rails app. The root directive must point to the correct folder to resolve static assets.

```
server {
  ...

  # make absolutely sure this is pointing to your app/public folder
  root /home/deployer/apps/blog/current/public;

  ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T13:04:06.417

不太确定如何执行此操作（我不确定回答您自己问题的礼仪）但我可能已经解决了问题，基本上，我认为虽然 nginx 服务器正在重新启动，但独角兽服务器没有（或者如果所以效果没有生效）。我发现这个帖子[重启独角兽问题（capistrano）](https://stackoverflow.com/questions/9020900/restart-unicorn-issue-capistrano)的解决方案似乎已经成功了。现在我只需要弄清楚如何将它连接到我的代码中！

# android - 创建自定义帐户 Android

> ID：11404504
> 
> 赞同：8
> 
> 时间：2012-07-09T23:07:17.590
> 
> 标签：android, android-account, android-authenticator

在 Android 上创建自定义帐户的最简单方法是什么？到目前为止，我已经阅读了文档：[Creating a Custom Account Type](http://developer.android.com/training/id-auth/custom_auth.html)，但它肯定没有太大帮助（信息太模糊）。我尝试阅读 LastFm 中的示例，但肯定他们做的事情有点过于精细，我不太了解，因为我只是一个有帐户的 Android 初学者。我知道它不像调用那么简单：

```
final Account account = new Account(mUsername, your_account_type);
mAccountManager.addAccountExplicitly(account, mPassword, null); 
```

因为这会引发异常。

到目前为止，我知道我需要使用一个`AccountAuthenticatorActivity`作为身份验证器的服务。任何可以为我指明正确方向的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T23:45:56.587

您是否检查了[示例同步适配器应用程序](http://developer.android.com/samples/BasicSyncAdapter/index.html)？这有点复杂和令人费解，但如果你坚持下去，你可以让事情顺利进行。如果您也想检查一下，[我在我一直](https://github.com/klnusbaum/UDJ-Android-Client)在研究的一个 android 应用程序中有一个稍微简单的实现。

帐户是我真正希望 android 变得更简单的事情之一。它曾经是一个记录不充分但很关键的特性。他们的文档似乎越来越好。

# javascript - 关闭弹出窗口后重新加载父页面

> ID：11404507
> 
> 赞同：2
> 
> 时间：2012-07-09T23:07:48.783
> 
> 标签：javascript, popup, window

我正在尝试让用户通过弹出窗口登录。当他们单击弹出窗口的链接时，该窗口是一个 php 变量，他们可以登录。当窗口关闭时，我希望它重新加载他们最初所在的页面（父页面）。

这是signin.php页面上的代码...

```
<body onunload="opener.location=('')"> 
```

但这所做的只是使登录页面成为用户所在的页面。我想我需要在括号中放一些东西，但我不知道那里有什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T23:11:46.867

要重新加载页面，您可以将 location 属性设置为当前值，如下所示：

```
window.location = window.location; 
```

所以对于你的情况，你会使用，字面意思：

```
onunload="window.opener.location = window.opener.location;" 
```

也可以使用对象的`reload`方法`location`：

```
onunload="window.opener.location.reload();" 
```

这是首选方法。

另外，请参阅您之前问题的已接受答案：[关闭弹出窗口后刷新父窗口](https://stackoverflow.com/questions/11398356/refreshing-parent-window-after-closing-popup)

**文档**

*   `window.location`在 MDN - [https://developer.mozilla.org/en/DOM/window.location](https://developer.mozilla.org/en/DOM/window.location)
*   `window.opener`在 MDN - [https://developer.mozilla.org/Talk:en/DOM/window.opener](https://developer.mozilla.org/Talk:en/DOM/window.opener)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-02-15T13:16:11.197

```
echo '<script>window.opener.location.reload()</script>';
echo '<script>self.close()</script>'; 
```

它适用于所有浏览器。

# zip - 安装 ModX 革命的问题

> ID：11404515
> 
> 赞同：1
> 
> 时间：2012-07-09T23:09:04.343
> 
> 标签：zip, installation, core, modx, modx-revolution

我正在尝试安装 ModX Revolution 2.2 版。一切都很好，直到我收到此错误的最后一步：

```
 The install failed because MODX could not unpack the 
/public_html/core/packages/core.transport.zip package. Make sure that the 
/public_html/core/packages/core.transport.zip file exists and is writable, and that you have made the 
/public_html/core/packages/ directory writable. 
```

我已经检查过，该目录是可写的，并且文件 core.transport.zip 确实存在并且也是可写的。

谁能告诉我发生了什么事？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T11:06:44.037

您在 zip 文件旁边有一个文件夹“核心”吗？如果是，只需使其（以及其中**的每个文件**）可写。为我工作..

# python - 改变 wx.MDIParentFrame 的背景颜色

> ID：11404519
> 
> 赞同：0
> 
> 时间：2012-07-09T23:09:23.697
> 
> 标签：python, wxpython, wxwidgets

wx.MDIParentFrame 背景的默认颜色是深灰色。我想改变那个颜色。

有谁知道怎么做？

[http://wxpython.org/docs/api/wx.MDIParentFrame-class.html](http://wxpython.org/docs/api/wx.MDIParentFrame-class.html) 我看不到更改默认背景的方法，还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T23:16:01.657

因为它继承自 Frame 你不能这样做

```
my_MIDIParentFrame.SetBackgroundColour("black") ? 
```

也许你可以做

```
wx.Frame.SetBackgroundColour(my_MIDI_PARENT_FRAME,"black") 
```

我不确定...但我认为这些会起作用...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T11:28:00.683

您可以使用 MDIAUIParentFrame

[http://www.digipedia.pl/usenet/thread/15083/10202/](http://www.digipedia.pl/usenet/thread/15083/10202/)

# firefox-addon - Firefox 扩展内容脚本调用/生命周期

> ID：11404523
> 
> 赞同：2
> 
> 时间：2012-07-09T23:09:37.840
> 
> 标签：firefox-addon, firefox-addon-sdk

我使用如下的附加 SDK 创建了一个简单的 firefox 附加组件，但它只能工作一次。我正在使用 1.8 版的附加 SDK。

```
$ mkdir test_ext
$ cd test_ext
$ cfx init
$ cat >package.json
  { 
  "name": "no2", 
  "license": "MPL 2.0", 
  "author": "", 
  "version": "0.1", 
  "fullName": "test_ext", 
  "id": "my-id", 
  "description": "a basic add-on"
  }
 $ cat >lib/main.js
   <!-- language: lang-js -->
   require("page-mod").PageMod({
      include: ["*.org"],
      contentScript: 'document.body.innerHTML = ' +
         '"<h1>this page has been eaten</h1>";'
   });
 $ cfx run 
```

现在在浏览器中，如果我去 w3.org 它可以工作。如果我重新加载或转到不同的 .org 域（如 wwf.org），则不会发生任何事情。我怎样才能让它测试并应用任何新页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T00:01:30.447

我写这个的方式是：

```
require("page-mod").PageMod({
  include: ["*.co.uk"],
  contentScript: 'document.body.innerHTML = ' +
             '"<h1>this page has been eaten</h1>";'
}); 
```

我认为您的代码的问题是使用了“新”关键字？

# iphone - 在应用程序中创建的文件的 pathForResource

> ID：11404526
> 
> 赞同：0
> 
> 时间：2012-07-09T23:10:17.150
> 
> 标签：iphone, objective-c, ios, ftp

我已经实现了一些功能，可以将在应用程序中创建的文件上传到 FTP 位置，但是“pathForResource”返回一个错误，它无法找到资源的文件路径。

这是我正在使用的代码：

```
 SCRFTPRequest *ftpRequest = [[SCRFTPRequest alloc] initWithURL:[NSURL URLWithString:@"ftp://79.170.44.42"] 
                                                  toUploadFile:[[NSBundle mainBundle] pathForResource:self.htmlFilePath ofType:@"text/html"]]; 
```

我已经能够上传与我的应用程序一起打包的文件，例如，标准的“info.plist 等”文件。我如何能够指定在应用程序中创建的文件的位置？我是否需要提供完整的资源路径而不仅仅是引用对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T23:33:02.633

`[[NSBundle mainBundle]pathForResource]`仅适用于您添加到 XCode 项目的文件。您需要在创建文件时将其存储在其中的位置查找文件。

# php - 如何在移动应用程序中将用户与 mysql 连接？登录权限

> ID：11404527
> 
> 赞同：1
> 
> 时间：2012-07-09T23:10:24.803
> 
> 标签：php, android, ios, database, database-connection

这是我第一次为用户交互创建数据库，我有一些“愚蠢”的问题，但我不知道如何用谷歌搜索它们以获得正确的答案，所以这里是：

**我想要的是：**

我想要一个数据库，其中会有写评论和文章的用户。我将拥有用户的关键信息，例如姓名和地址，也许还有我必须恢复的信用卡。

**我做了什么**

我创建了一个数据库，其中包含一个包含用户信息的表，然后与一个包含评论的表和另一个与文章相关的表。

**我的问题**

1）当你做一个数据库连接时，你是否每次都使用同一个用户（当然不是root）然后你比较昵称并通过？这就是我所拥有的，但这对我来说很奇怪，因为如果有人知道我的用户并通过连接到 db 将拥有所有信息。我想为每个用户都有一个帐户，但是我如何限制添加//删除/只查看他们帐户的内容？

2）我已经阅读了一些问题，现在我知道我必须存储密码并将它们与 bcrypt 进行比较。另外我知道信用卡不推荐存储，所以我可能不会这样做，但对于其他事情（地址，姓名），这是存储它们的最佳方式吗？

3）如果用户进行连接并且很可能会在短时间内完成更多操作，那么每次关闭和打开连接会更好吗？如何控制会话？代码是用 php 编写的，用于将移动设备连接到 mysql。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T23:15:30.773

您不应该使用从应用程序直接连接到您的 MySQL 服务器 - 这是一个巨大的安全漏洞。用户或黑客既可以嗅探流量以获取凭据，也可以反汇编应用程序来获取它们。相反，当然是通过 PHP 和 https 安全的 HTTP POST 和 GET 在服务器端进行。

您可以在 MySQL 服务器中自动为您的应用程序的每个用户添加一个用户，但这可能会更复杂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T23:20:11.733

首先，不要将信用卡存储在您自己的数据库中。使用诸如[条带](http://www.stripe.com)之类的东西来标记数据（免费注册，任何人都可以接受）。

如果您正在使用自己的用户名和密码做一个移动应用程序，那么使用用户名/密码的远程服务器是可行的方法。散列通常是比加密更好的密码方法，因为散列是一种方法（您可以知道密码是否匹配，但您永远无法将密码作为字符串检索）。

至于连接到你的数据库，不要直接连接到它。通过服务器上的 api / web 服务来完成。

要从服务器获取信息，您可能需要使用 json 并使用 GET 和 POST 请求。这是一个在服务器上处理登录请求的简单示例（从设备发帖）：

```
<?php

if(isset($_POST['username']) && isset($_POST['password']))
{
  //See if the user's auth details are valid
  $auth = auth_model::try_auth(sanitizer($_POST['username']), sanitizer($_POST['password']));

  //If valid
  if($auth)
  {
    echo json_encode(other_model::some_function_that_returns_array());
    exit;
  }
  else
  {
    echo json_encode(array('error' => 'Authentication failed.'));
    exit;
  }
} 
```

请注意，我完全组成了 auth_model、sanitizer 和 other_model，例如它们就在那里。

大多数语言/平台都有使用 json 的库，而且它是一种简单的格式，所以作为一个起点，我认为你会最轻松地使用它。

对于会话/状态，将您的会话存储在数据库表中，并仅将 id（以及其他任何不需要安全的内容）返回给客户端。

# python - 如何将 Gtk 3 代码更改为 pygtk 2.0

> ID：11404528
> 
> 赞同：0
> 
> 时间：2012-07-09T23:10:25.367
> 
> 标签：python, pygtk

如何将此代码从 Gtk 3 更改为 pygtk 2.0？

[https://github.com/sebp/PyGObject-Tutorial/blob/master/examples/cellrenderertoggle_example.py](https://github.com/sebp/PyGObject-Tutorial/blob/master/examples/cellrenderertoggle_example.py)

我有这部分。

```
#!/usr/bin/env python

import pygtk

pygtk.require('2.0')

import gtk

class CellRendererToggle:

    def cell_toggled(self, widget, path):
        self.liststore[path][1] = not self.liststore[path][1]

    def __init__(self):
        window = gtk.Window()
        window.set_default_size(200, 200)
        self.liststore = gtk.ListStore(str, bool, bool)
        self.liststore.append(["Debian", False, False])
        self.liststore.append(["OpenSuse", False, False])
        self.liststore.append(["Fedora", False, False])
        treeview = gtk.TreeView(model=self.liststore)
        cellrenderer_text = gtk.CellRendererText()
        column_text = gtk.TreeViewColumn("Text", cellrenderer_text, text=0)
        treeview.append_column(column_text)
        cellrenderer_toggle = gtk.CellRendererToggle()
        cellrenderer_toggle.connect("toggled", self.cell_toggled)
        column_toggle = gtk.TreeViewColumn("Toggle", cellrenderer_toggle, active=1)
        treeview.append_column(column_toggle)
        renderer_radio = gtk.CellRendererToggle()
        renderer_radio.set_radio(True)
        renderer_radio.connect("toggled", self.cell_radio_toggled)
        column_radio = gtk.TreeViewColumn("Radio", renderer_radio, active=2)
        treeview.append_column(column_radio)
        window.connect("destroy", lambda w: gtk.main_quit())
        window.add(treeview)
        window.show_all()

CellRendererToggle()

gtk.main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T00:05:51.087

我没有用 pygtk 做那么多，但是：

最简单的事情可能是尝试运行代码，看看你在哪里得到回溯。找一个，修一个，找一个，修一个。

很可能有从 2.x 到 3.x 的移植指南，但我怀疑是否有从 3.x 到 2.x 的移植指南。但是，查看 2.x 到 3.x 移植指南可能会有所帮助。

# jquery - 使用 Graph API 和 jQuery 的带有操作链接的 Facebook 提要帖子

> ID：11404529
> 
> 赞同：0
> 
> 时间：2012-07-09T23:10:26.377
> 
> 标签：jquery, facebook, json, facebook-graph-api

我正在尝试使用 Graph API 和 jQuery 通过 POST 请求使用操作链接属性发布提要。该帖子在没有操作链接属性的情况下可以正常工作，但在我包含操作链接时不起作用。与 JS SDK 一起使用时，相同的操作链接属性代码可以正常工作，但我想直接与 Graph API 一起使用。使用 Graph API（并且仅通过 JS SDK）无法使用操作链接属性还是我做错了什么？

```
var graphApiLink = 'https://graph.facebook.com/'+ facebookId +'/feed';
$.post(graphApiLink,{access_token: accessToken, actions: [{'name': 'Action', 'link': 'http://www.example.com'}]},function(resp) {
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T23:42:16.337

您可能想在这里查看信息：http: [//developers.facebook.com/docs/reference/dialogs/feed/#graphapicall](http://developers.facebook.com/docs/reference/dialogs/feed/#graphapicall)

请记住，根据 FB 的错误消息，帖子的链接必须指向应用程序的连接或画布 URL。

# c++-cli - 带有字节数组参数的字典

> ID：11404530
> 
> 赞同：0
> 
> 时间：2012-07-09T23:10:32.313
> 
> 标签：c++-cli

我有一本字典 myResult：

```
Dictionary<String^,array< Byte >^>^ myResult = gcnew Dictionary<String^,array< Byte >^>(); 
```

我宣布

```
array <Byte^>^ a; 
```

然后我将 a 添加到字典的键中

```
myResult->Add("OVERVIEW",a); 
```

我收到一个错误

```
error C2664: 'System::Collections::Generic::Dictionary<TKey,TValue>::Add' : 
cannot       convert parameter 2 from 'cli::array<Type> ^' to 'cli::array<Type> ^'
1>          with
1>          [
1>              TKey=System::String ^,
1>              TValue=cli::array<unsigned char> ^
1>          ]
1>          and
1>          [
1>              Type=System::Byte ^
1>          ]
1>          and
1>          [
1>              Type=unsigned char
1>          ] 
```

感谢任何帮助，因为我对 c++/cli 还不是很熟悉；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T23:13:07.060

```
Dictionary<String^,array< Byte >^>^
                          ^ Uppercase B

array <byte^>^ a;
       ^ Lowercase B 
```

`Byte^`并`byte^`命名不同的类型（实际上，虽然我不是 C++/CLI 专家，但我对后者的编译感到有些惊讶）。前者是一个跟踪句柄`System::Byte`。后者是一个`unsigned char`（显然编译器正在放弃帽子，我认为它这样做是因为它不是 CLI 类型，因此没有资格戴帽子）。

# r - R：ggplot2：将计数标签添加到具有密度叠加的直方图

> ID：11404531
> 
> 赞同：6
> 
> 时间：2012-07-09T23:10:43.620
> 
> 标签：r, ggplot2, label, histogram

我有一个时间序列，我正在检查数据异质性，并希望向一些数据分析师解释其中的一些重要方面。我有一个由 KDE 图覆盖的密度直方图（为了清楚地看到两个图）。但是，原始数据是计数，我想将计数值作为标签放在直方图条上方。

这是一些代码：

```
$tix_hist <- ggplot(tix, aes(x=Tix_Cnt)) 
             + geom_histogram(aes(y = ..density..), colour="black", fill="orange", binwidth=50) 
             + xlab("Bin") + ylab("Density") + geom_density(aes(y = ..density..),fill=NA, colour="blue") 
             + scale_x_continuous(breaks=seq(1,1700,by=100))

    tix_hist + opts(
       title = "Ticket Density To-Date",
       plot.title = theme_text(face="bold", size=18), 
       axis.title.x = theme_text(face="bold", size=16),
       axis.title.y = theme_text(face="bold", size=14, angle=90),
       axis.text.x = theme_text(face="bold", size=14),
       axis.text.y = theme_text(face="bold", size=14)
           ) 
```

我考虑过使用 KDE 带宽等来推断计数值。是否可以对 ggplot 频率直方图的数字输出进行数据框化并将其添加为“层”。我对 layer() 函数还不是很了解，但是任何想法都会有所帮助。非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T15:25:40.030

如果你想让 y 轴显示`bin_count`数字，同时在这个直方图上添加一条密度曲线，

您可以`geom_histogram()`先使用并记录`binwidth`价值！（这很重要！），接下来添加一层`geom_density()`以显示拟合曲线。

如果您不知道如何选择`binwidth`值，您可以计算：

```
my_binwidth = (max(Tix_Cnt)-min(Tix_Cnt))/30; 
```

（这正是`geom_histogram`默认情况下所做的。）

代码如下：

（假设`binwith`你刚刚计算的值是 0.001）

```
tix_hist <- ggplot(tix, aes(x=Tix_Cnt)) ;

tix_hist<- tix_hist + geom_histogram(aes(y=..count..),colour="blue",fill="white",binwidth=0.001);

tix_hist<- tix_hist + geom_density(aes(y=0.001*..count..),alpha=0.2,fill="#FF6666",adjust=4);

print(tix_hist); 
```

# javascript - 检测浏览器是否打开了超过 1 个选项卡/窗口

> ID：11404538
> 
> 赞同：2
> 
> 时间：2012-07-09T23:11:45.357
> 
> 标签：javascript, browser, tabs, sandbox

所以我正在开发一个测验网络应用程序。我想添加一个测验管理员可以设置的设置，以便用户在进行测验时只能打开 1 个窗口/选项卡。

这样做的原因是为了让他们在测验窗口/标签打开时不能像谷歌那样去谷歌和谷歌答案。当然，他们总是可以打开不同的浏览器并这样做，但仍然认为让他们启用这将是一个不错的功能。

现在我不知道这是否会违反安全沙箱（因此根本不可用），但因为我只想检测另一个选项卡或窗口是否打开，而不是获取有关选项卡/窗口的实际信息，我希望这在某种程度上可以使用javascript。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-09T23:23:37.250

您不能，但可能的解决方法是使用新的[HTML5 fullscreen API](http://www.sitepoint.com/html5-full-screen-api/)。您可以使用一个`setInterval`函数定期对其进行测试，`document.fullScreen == true`以确保用户没有关闭全屏。

这仅在现代浏览器中有效，如果用户知道他在 JS 控制台周围的方式，那么解决它是微不足道的，但它似乎确实符合您的要求。

请注意，当前所有全屏 API 实现都是[以供应商为前缀的](https://developer.mozilla.org/en/DOM/Using_full-screen_mode#Browser_compatibility)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-09T23:29:03.990

似乎有一种可行的替代方法来替代以下行描述的方法：使用[Page Visibility API](https://developer.mozilla.org/en-US/docs/Web/API/Page_Visibility_API)，目前所有现代浏览器都支持。这看起来比监听要可靠得多`blur`。有一种可能的方法：

```
// on quiz start
document.addEventListener('visibilitychange', function() {
  if (document.hidden) {
    console.log('Y U hide?');
  }
}); 
```

问题是`visibilitychange`只有当页面从可见变为隐藏时才会触发事件（反之亦然）。它仍然允许用户打开两个浏览器实例 - 例如，一个带有测验页面，一个带有*任何喜欢的搜索引擎*。

* * *

虽然您无法检测到打开的选项卡数量，但您可以尝试使用以下技巧检查用户何时离开测验页面：

```
$(function(){
  $(window).blur(function() {
    console.log('I see what you did here!');
  });
}); 
```

可悲的是，它也会给你很多误报。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-09T23:15:32.623

不能也不应该做。

# cocoa-touch - 如何将数据转发到另一个视图控制器？

> ID：11404540
> 
> 赞同：-2
> 
> 时间：2012-07-09T23:11:48.653
> 
> 标签：cocoa-touch, uiviewcontroller

> **可能重复：**
> [iPhone：如何在标签栏应用程序中的多个视图控制器之间传递数据](https://stackoverflow.com/questions/2363777/iphone-how-to-pass-data-between-several-viewcontrollers-in-a-tabbar-app)

我在一个视图中有一个“进度视图”，它是 0.60、0.40 或 0.30，具体取决于用户输入的内容。如果用户转到下一个视图，我希望进度视图与上一个视图中的值相同。

我搜索了互联网，但没有运气，我尝试了我在互联网上找到的所有东西以及我能想到的所有东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T23:18:26.977

当您在 Objective-C 中编写子类时，您可以向新类添加属性，这些属性可以由父控制器（实例化自定义子类的类）访问和写入。我建议您研究一下 Objective-C 中的属性是如何工作的；它们实际上非常简单。如果你愿意，我可以提供一个简单的例子。让我知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T23:14:36.547

视图控制器是一个对象。所以，首先，你创建一个。这为您提供了对新视图控制器的引用。然后，您可以使用该引用发送控制器消息：

```
MyViewController *myVC = [[MyViewController alloc] initWithNibName:nil bundle:nil];
[myVC setSomeData:someData]; 
```

如果您想要更多，您将不得不编辑您的问题以更具体。

# java - 在应用计费处理程序和处理程序/服务/接收器中

> ID：11404541
> 
> 赞同：0
> 
> 时间：2012-07-09T23:12:00.650
> 
> 标签：java, android, handler, billing

这是我的代码，我有几个问题，因为我对整个服务接收器完全陌生。

它工作正常。我结账，我购买，谷歌说我很快就会收到我的物品。

我的问题是，在应用程序关闭后，或包含处理程序的活动关闭后，我的应用程序仍会收到通知，并且 gem 会更新吗？

任何能更好地帮助我理解这一点的指针或线索都很棒=D

我检查了一下，我的服务仍在后台运行，所以这很好:) 但是更新或*接收需要很长时间*

有人知道吗？

```
Button bPurchase = (Button) findViewById(R.id.bPurchase);

    bPurchase.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            CheckBox confirm = (CheckBox) findViewById(R.id.bConfirm);
                    if (!confirm.isChecked()) {
                        Toast msg = Toast.makeText(PurchaseActivity.this, "Please Check Confirmation box", Toast.LENGTH_SHORT);
                        msg.setGravity(Gravity.CENTER, msg.getXOffset() / 2, msg.getYOffset() / 2);
                        msg.show();
                        return;
                    }
                    if(BillingHelper.isBillingSupported()){
                            BillingHelper.requestPurchase(mContext, "android.test.purchased");

                            // android.test.purchased or android.test.canceled or android.test.refunded
                    } else {
                            Log.i("","Can't purchase on this device");
                    }

        }
    });  

}

public Handler mTransactionHandler = new Handler(){ 
    public void handleMessage(android.os.Message msg) { 
            Log.i("", "Transaction complete"); 
            Log.i("", "Transaction status: "+BillingHelper.latestPurchase.purchaseState); 
            Log.i("", "Item attempted purchase is: "+BillingHelper.latestPurchase.productId); 

            if(BillingHelper.latestPurchase.isPurchased()){ 
                    long g = GemUpgrades.getGems();
                    g = g + 1000; 
                    GemUpgrades.setGems(g);

                    Toast msg1 = Toast.makeText(PurchaseActivity.this, "Received", Toast.LENGTH_SHORT);
                    msg1.setGravity(Gravity.CENTER, msg1.getXOffset() / 2, msg1.getYOffset() / 2);
                    msg1.show();
            } else { 
                   // Failure 
            } 
    };      
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T04:18:48.380

所以我发现我没有接到我的电话，因为我忘记将处理程序设置为处理程序。此外，它似乎在活动之外进行了更新，而且速度也很快。但是如果应用程序在获得更新之前已经关闭，它还会更新吗

# c# - C# MonoTouch 方法重载与泛型方法和具有默认参数的非泛型方法

> ID：11404544
> 
> 赞同：1
> 
> 时间：2012-07-09T23:12:29.417
> 
> 标签：c#, mono, xamarin.ios

..还有一份薯条。

我有一个正在为 Windows 和 MonoTouch 编译的代码库。在凌晨时分，我编写了类似这样的人为示例，它在 MonoTouch 上编译但在 Windows 上失败：

```
void Run()
{
    // okay on both
    exec("hello", 1);

    // okay on MonoTouch
    // compiler error on windows
    exec("hello");
}

interface IFace { void foo(); }

void exec(string s, int n=0) 
{ 
    Console.Write("A");  
}
void exec<T>(T t) where T:IFace
{ 
    Console.Write("B");
} 
```

在 MonoTouch 上，编译并运行，打印：

```
AA 
```

在 Windows 上，此示例给出了编译时错误：

`The type 'string' cannot be used as type parameter 'T' in the generic type or method 'App.Program.exec<T>(T)'. There is no implicit reference conversion from 'string' to 'App.Program.IFace'.`

[7.4.2 Overload Resolution](http://msdn.microsoft.com/en-us/library/aa691336%28v=vs.71%29.aspx)上的 C# 规范说[7.4.2.1 Applicable 函数成员](http://msdn.microsoft.com/en-us/library/aa691337%28v=vs.71%29)必须具有相同数量的参数：

> A 中的参数数量与函数成员声明中的参数数量相同。[7.4.2.1](http://msdn.microsoft.com/en-us/library/aa691337%28v=vs.71%29)

因此，在搜索适用的函数成员时，MonoTouch 编译器似乎正在考虑默认参数，但 Windows 编译器却没有。所以候选函数成员是：

```
// exec with no default parameters. not applicable because no int supplied
void exec(string,int);

// exec with default value for the second parameter. 
// only considered on MonoTouch.
void exec(string,int=0);

// generic exec with string as the type, which is invalid
// due to the IFace constraint. Invalid on both platforms.
void exec<string>(string) : where T:IFace; 
```

那么，这是 MonoTouch 上的 Applicable Function Member 搜索中的错误，还是 Windows 编译器应该将默认参数化的非泛型方法视为有效？

干杯，厘米

**编辑** 在`dlev`回答之后，我测试了受约束和不受约束的泛型方法，看来 Mono 编译器在不受约束的情况下选择了正确的方法。在受约束的情况下，Mono 编译器似乎正在考虑约束或在约束失败时回溯以寻找替代方案。

问题/错误减少为：

```
void Run()
{
    foo(1);
    bar(1);
}

void foo(int a, int b = 0) { print("A"); }
void foo<T>(T t) { print("B"); }

void bar(int a, int b=0) { print("X"); }
void bar<T>(T t) where T : IFace { print("Y"); } 
```

在 Windows 和 MonoTouch 上，都能`foo`正确打印`B`. 但`bar`无法在 Windows 上编译但`X`在 MonoTouch 上打印。

**EDIT2** 对于那些感兴趣的人，我的解决方案是删除默认参数并要求显式调用。在我的实际系统中，类型约束指定了两个接口，所以我不能轻易将泛型调用更改为`exec(IFace t) { ... }`. 我想我可以重构，但这是我系统的核心，以下解决了我当前的编译问题：

```
void exec(string a) { exec(a,0); }
void exec(string a, int b) { ... }
void exec<T>(T t) where T : IFace, IFace2 { ... } 
```

双倍干杯，厘米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T23:28:17.767

规范中第 7.5.3.2 节中的这一行表明这是 Mono 编译器中的错误：

> 否则，如果 MP 的所有参数都有对应的参数，而默认参数需要替换 MQ 中的至少一个可选参数，则 MP 优于 MQ。

换句话说，如果您必须为可选参数替换一个值以使适用的方法调用合法，那么该方法被认为是比不需要这种替换的方法更差的匹配。

此外，[MS C# 编译器不会回溯](http://blogs.msdn.com/b/ericlippert/archive/2010/10/04/no-backtracking-part-one.aspx). 一旦根据重载解决规则确定方法是最佳的，编译就会在该假设下继续进行。如果稍后的分析确定所选方法导致错误（例如因为替换的泛型参数违反了约束），那么您会被告知该错误。

是的，[约束不是签名的一部分](http://blogs.msdn.com/b/ericlippert/archive/2009/12/10/constraints-are-not-part-of-the-signature.aspx)，所以重载决议不考虑约束`T`。

# html - 使用 CSS 将背景图像添加到按钮

> ID：11404545
> 
> 赞同：6
> 
> 时间：2012-07-09T23:12:29.637
> 
> 标签：html, css, button

我正在尝试将背景图像添加到已经具有背景颜色的按钮（或具有相同类的链接）。

这是jsfiddle：http: [//jsfiddle.net/BNvke/](http://jsfiddle.net/BNvke/)

该按钮本身看起来很棒，但我正在尝试使它，以便如果我添加某个类，将调整填充并显示背景图像，但图像不显示。这是CSS / HTML：

```
.button {
    padding: 10px; 
    margin-right: 8px;
    margin-bottom: 10px;
    font-family: Arial, Tahoma, Verdana, FreeSans, sans-serif;
    text-shadow: 0 1px 1px rgba(0, 0, 0, 0.25);
    display: inline-block;
    white-space: nowrap;
    line-height: 1em;
    position: relative;
    outline: none;
    overflow: visible;
    cursor: pointer;
    border-radius: 4px;
    -moz-border-radius: 4px; 
    -webkit-border-radius: 4px; 
    box-shadow: 1px 1px 2px 0 #CCCCCC;
    -moz-box-shadow: 1px 1px 2px 0 #CCCCCC;
    -webkit-box-shadow: 1px 1px 2px 0 #CCCCCC;
}

.button_blue {
    border: 1px solid #305875;
    color: #FBFBFB;
    background-color: #3D6E97;
}

.button_blue:hover {
    color: #FBFBFB;
    opacity: 0.9; 
    filter: alpha(opacity=90);        
}

.button_about { 
    background-image: url(http://i47.tinypic.com/2ni0ahd.png) 3px 5px no-repeat;
    padding-left: 35px;
    padding-right: 15px;
}​ 
```

```
<p><a class="button button_blue">Without Background</a></p>

<p><a class="button button_blue button_about">With Background</a></p>​ 
```

如何让该背景图像显示？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T23:15:03.440

见[http://jsfiddle.net/BNvke/1/](http://jsfiddle.net/BNvke/1/)

只是改变

```
background-image url(http://i47.tinypic.com/2ni0ahd.png) 3px 5px no-repeat; 
```

和

```
background: url(http://i47.tinypic.com/2ni0ahd.png) 3px 5px no-repeat; 
```

并向上移动最后一条规则，以便`background-color`定义的规则`.button_blue`可以应用于级联

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-01T00:07:09.363

```
.button {
    background: url(http://i47.tinypic.com/2ni0ahd.png);
    background-repeat: 3px 5px no-repeat;
} 
```

# jquery - Element with no visible content

> ID：11404553
> 
> 赞同：0
> 
> 时间：2012-07-09T23:13:04.197
> 
> 标签：jquery, html, visibility

I have the following `div` with the following `children`.

```
<div>
  <img src="http://zferral.com">
  <!--zferral is an invisible image analytics tool-->
  <script>Some Comment</script>
</div> 
```

There are 3 things in this div. A `script`, an `image`, and a `comment`.

I need to know if their is something really inside this div and return a Boolean.

I need this to be available to jquery so I can hide the div if their is no visible children.

These should all return `true` (bottom). The top example should return `false`.

```
<div>
  <img src="http://zferral.com">
  <!--zferral is an invisible image analytics tool-->
  <script>Some Comment</script>
  <p>Hello</p>
</div>

<div>
  <img src="http://zferral.com">
  <!--zferral is an invisible image analytics tool-->
  <script>Some Comment</script>
  Hello
</div>

<div>
  <img src="http://zferral.com">
  <!--zferral is an invisible image analytics tool-->
  <script>Some Comment</script>
  <img src="anything other than zferral">
</div> 
```

My Progress

I was using `.clone()` to copy the div find all the script tags remove them.

I need to use regex to parse and remove all the comments.

Then use regex and .find to get images with zferral in the link.

Finally I should have a string `<div></div>` and can confirm that it is empty.

I'm at a standstill and I don't exactly know if this is even the best approach.

```
 part.additional = function(){

   var test = $('.group[style="border: none;"]').clone().find('script').remove().end();

   ((jQuery('#content .group').length > 1 && jQuery('#content .group:nth-child(2)').find('*:visible').length !== 0)) ? jQuery('#content').clone(true).attr('id','additional').find('.group:first').remove().end().find('script').remove().end() : false ;

  }
  var a = jQuery('#content .group').length > 1;
  var b = jQuery('#content').clone(true).attr('id','additional').find('.group:first').remove().end().find('script').remove().end().find('style').remove().end().find('[style="border: none;"]').removeAttr('style').end();
  var c = jQuery('#content').clone(true).attr('id','additional').find('.group:first').remove().end().find('script').remove().end().find('style').remove().end().find('[style="border: none;"]').removeAttr('style').end().html().replace(/\n|\r|(\s\s)/g,'');
  var d = '<div class="group"></div>' == c;
  var e = (!d) ? b : false; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T23:19:24.767

It is not clear what you are trying to do but if you are trying to test whether a div has anything within it, you may be able to do it like this:

```
$("div").contents().length > 0 
```

Keep in mind that $("div") selects multiple divs. If you want this to work reliably, you need some way to distinguish one from the others, maybe by using id attributes.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T00:07:56.563

This should work (provided you dont have line breaks inside `divs`)

```
$('div').clone().each(function(k){ 
    var $div = $(this); 
    $div.contents().each(function(){
        if(this.nodeType === 8 || this.outerHTML === '<img src="http://zferral.com">'){
            return true;
        } 
        if(this.nodeType === 3 ||  $(this).css('display') !== 'none'){ 
            console.log('Visible ' + k);
            return;
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T00:13:16.340

My understanding is that you want to test for each div, if there is something else than the zreferral image and the script (something visible). You could add a div (or a span) inside the div containing the script and zreferral. For example:

```
<div>
  <img src="http://zferral.com">
  <!--zferral is an invisible image analytics tool-->
  <script>Some Comment</script>
  <p>Hello</p>
  <div id="visibleContent1">
  </div>
</div>

<div>
  <img src="http://zferral.com">
  <!--zferral is an invisible image analytics tool-->
  <script>Some Comment</script>
  <p>Hello</p>
  <div id="visibleContent2">
  </div>
</div>

<div>
  <img src="http://zferral.com">
  <!--zferral is an invisible image analytics tool-->
  <script>Some Comment</script>
  <div id="visibleContent3">
  <img src="anything other than zferral">
  </div>
</div> 
```

Then you can get your boolean like this:

```
$('#visibleContent1').html().length>1 //or 0 if you don't put a linebreak 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-08T00:57:08.810

Here's a [working Fiddle](https://jsbin.com/nuhoyuyice/2/edit?html,js,console) of a client-side javascript function `hasVisibleContent` that checks the DOM nodes within a specific div for one where the `display` style is not `none`.

Here's the HTML:

```
<div id="does-not-have-visable-content">
  <img src="https://mbsy.co/embed/v2/img/?mbsy_username=USERNAME&mbsy_campaign_uid=000&mbsy_email=example@example.com&mbsy_revenue=0.00" style="border: none; display: none" alt="" />
  <script>var x = "hello world"</script>
  <!-- hello world -->
</div>

<div id="has-visable-content">
  <img src="https://mbsy.co/embed/v2/img/?mbsy_username=USERNAME&mbsy_campaign_uid=000&mbsy_email=example@example.com&mbsy_revenue=0.00" style="border: none; display: none" alt="" />
  <script>var x = "hello world"</script>
  <p>Visible Content</p>
  <!-- hello world -->
</div> 
```

Here's the javascript:

```
function hasVisibleContent (selector) {
  var ancestor = document.querySelector(selector)
  var descendents = ancestor.getElementsByTagName('*')
  var hasVisableContent = false
  var i, $e, d;
  for (i = 0; i < descendents.length; ++i) {
    $e = descendents[i]
    var display = getComputedStyle($e).getPropertyValue('display')
    if(display !== 'none') hasVisableContent = true
//     console.log([$e.nodeType, $e.tagName, display])
  }
  return hasVisableContent
}

var visibleContent

visibleContent = hasVisibleContent('#does-not-have-visable-content')
if (visibleContent === false) console.log('all good')

visibleContent = hasVisibleContent('#has-visable-content')
if (visibleContent === true) console.log('all good') 
```

# android - 无法从实例状态恢复对象：解析错误

> ID：11404562
> 
> 赞同：0
> 
> 时间：2012-07-09T23:13:57.750
> 
> 标签：android, parsing, serialization

我正在尝试从`savedInstanceState`. 我在这里将每个`Bundle`单独添加：（节奏是对象数组）

```
@Override
public void onSaveInstanceState(Bundle outState){
    outState.putInt("numParts",rhythm.length);
    for(int index = 0;index<rhythm.length;++index){
        outState.putSerializable(""+index,rhythm[index].beat);
    }
    super.onSaveInstanceState(outState);
} 
```

当`onRestoreInstanceState()`调用该方法时，我尝试在这里为我的`rhythm`数组分配来自实例状态的对象：（它不为空）

```
@Override 
public void onRestoreInstanceState(Bundle savedInstanceState){
    rhythm = new Part[savedInstanceState.getInt("numParts")];
    for(int index = 0; index<rhythm.length;++index){
         Object middleMan =savedInstanceState.getSerializable(""+index);
         if(middleMan==null){
             System.out.println("It's null...");
         }
    rhythm[index]=(Part) middleMan;
    }
} 
```

当我每次`ClassCastException`解析为 a 时，它都会抛出 a 。`Part`部分实现`Serializable`。为什么不允许我解析？我需要进行自定义序列化吗？请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T23:32:53.473

我猜 Part 是您创建的类型？所以不要把 Part 当作一个数组

```
rhythm = new Part[savedInstanceState.getInt("numParts")]; 
```

你想像这样实例化一个新的 Part 对象：

```
rhythm = new Part(savedInstanceState.getInt("numParts")); 
```

其他假设：

1.  节奏是成员变量
2.  Part 的构造函数采用单个整数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T00:00:36.400

好吧，我只是把它作为整个阵列做，它起作用了……我真的不知道为什么，但它确实起作用了。感谢您给了我通过整个数组的想法。@错误 454

# apache - Backbone.js 路由器在 localhost 上使用 pushstate 和 XAMPP apache 服务器

> ID：11404567
> 
> 赞同：4
> 
> 时间：2012-07-09T23:14:51.193
> 
> 标签：apache, .htaccess, backbone.js, xampp, backbone-routing

我正在尝试让backbone.js 的路由器在本地主机上与我的XAMPP apache 服务器一起使用。

我需要防止 apache 评估应该去路由器的目录路径，然后将所有内容转发到`/test_backbone/index.html`. 我已经尝试了所有我能找到的东西，没有任何效果。

目前，我在 httpd.conf 文件中有这个：

```
# html5 pushstate (history) support:
<ifModule mod_rewrite.c>
  Options +FollowSymLinks
  IndexIgnore */*
  # Turn on the RewriteEngine
  RewriteEngine On
  #  Rules
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule (.*) /test_backbone/index.html
</ifModule> 
```

我也试过这个：

```
# html5 pushstate (history) support:
<ifModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_URI} !index
    RewriteRule (.*) index.html [L]
</ifModule> 
```

我的印象是，其中一些行应该说加载静态文件（如果存在），但我的 javascript 文件都没有被加载，一切都回到`/test_backbone/index.html`

我也试过`.htaccess`文件。据我所知，我什至没有将这段代码放在正确的位置。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T19:28:24.863

您的配置应该可以工作。修改`httpd.conf`时需要重启apache 修改时不需要重启`.htaccess`。

以防万一，尝试将 '[L]' 标志添加到 中的重写规则`httpd.conf`，以便在匹配后停止处理更多规则。

# jquery - jQuery-File-Upload 点击和响应

> ID：11404571
> 
> 赞同：0
> 
> 时间：2012-07-09T23:15:25.350
> 
> 标签：jquery

我正在使用[jQuery-File-Upload 插件](https://github.com/blueimp/jQuery-File-Upload/wiki)，但无法将其与单击关联并生成响应。在我选择一个文件后，它会自动上传到一个文件夹（所以至少它可以工作），但我更喜欢在点击按钮时上传它。

另外，我需要服务器在图像上传到数据库后返回一个 ID，但我似乎无法得到响应。

我整天都在研究这个，这有点令人沮丧，但我找不到任何其他像这样更新的 jQuery 插件。如果您有其他选择，我将不胜感激。

这是代码：

```
<?php echo form_open_multipart('admin/file/upload', array('id' => 'fileupload'));?>

<input type="file" name="userfile" size="20" multiple />

    <button id="upload_file" type="button" class="btn btn-primary start">
        <i class="icon-upload icon-white"></i> Start upload
   </button>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script  type="text/javascript" src="<?=base_url();?>assets/admin/js/fileupload/vendor/jquery.ui.widget.js"></script>
<script  type="text/javascript" src="<?=base_url();?>assets/admin/js/fileupload/jquery.iframe-transport.js"></script>
<script  type="text/javascript" src="<?=base_url();?>assets/admin/js/fileupload/jquery.fileupload.js"></script>
<script  type="text/javascript" src="<?=base_url();?>assets/admin/js/fileupload/jquery.fileupload-ui.js"></script>

<script>
$(document).ready(function() {
    $('#fileupload').fileupload({
    url: $('#fileupload').attr('action'),
    replaceFileInput: false,
    add: function (e, data) {
         data.submit();
     }

    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T23:45:54.560

我也打算建议uplodify。但是你有没有研究过回调方法？

```
.bind('fileuploadcompleted', function (e, data) {/* ... */}) 
```

[https://github.com/blueimp/jQuery-File-Upload/wiki/Options](https://github.com/blueimp/jQuery-File-Upload/wiki/Options)

如果您希望它在单击按钮后工作，您应该能够执行以下操作：

```
function uploadMe() { 
  $('#fileupload').fileupload({
    autoUpload:false,
    url:$('#fileupload').attr('action'),
    replaceFileInput:false,
    add:function(e, data){
      data.submit();
    }
  });
}

$(".icon-upload").click(uploadMe); 
```

抱歉，我没有测试过。

# haskell - Project Euler 2：Haskell 实现混乱

> ID：11404575
> 
> 赞同：3
> 
> 时间：2012-07-09T23:15:50.570
> 
> 标签：haskell

我正在使用 GHCi 尝试解决 Project Euler 上的问题 2。
[http://projecteuler.net/problem=2](http://projecteuler.net/problem=2)

我将无限列表 fibs 定义为：

> Prelude> let fibs = 1 : 2 : zipWith(+) fibs (tail fibs)

我尝试以下列方式使用列表推导：

> 前奏> [x | x<-fibs, x `mod`2 == 0, x<4000000] [1,2,3,5,8,13,21,34,55,89,144,233,377,610,987,1597,2584,4181,6765,10946,17711,28657, 46368,75025,121393,196418,317811,514229,832040,1346269,2178309,3524578
> 前奏>总和$[x| x <- [1..], x `mod`2 == 0, x<4000000]

但是 shell 挂在第二个命令上。我对为什么列表理解可以构建列表但 sum 函数无法处理它感到困惑。

我发现一个可行的解决方案是

> Prelude> sum $ filter even $ takeWhile (<= 4000000) fibs

但是，当列表理解方法不起作用时，我再次感到困惑。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-09T23:19:35.547

评价时

```
[x | x<-fibs, x mod 2 == 0, x<4000000] 
```

你的程序/Haskell 编译器不知道这个列表实际上是有限的。当您调用一个完全使用列表的函数时，例如`sum`，它只是不断生成斐波那契数，测试它们`x<4000000`（并且每次在某个点之后都失败）。

事实上，Haskell 编译器在一般情况下无法知道理解表达式是否表示有限列表；问题是[不确定](https://en.wikipedia.org/wiki/Undecidable_problem)的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T09:58:08.367

它也挂在第一个命令上，不是吗？:)

带有*test*的列表推导等效于`filter`表达式，而不是`takeWhile`表达式：

```
sum $ [x | x <- [1..], x mod 2 == 0, x<4000000] ===

sum $ filter (<4000000) $ filter even $ [1..] 
```

这清楚地描述了非终止计算。

Haskell 推导式没有 Prolog 的*削减*（即“！”）等价物。在 Prolog 中，我们能够“从测试中”停止计算：

```
sum(I,Acc,Res):- I >= 4000000, !, Res = Acc ;
  Acc2 is Acc+I, sum(I+1,Acc2,Res). 
```

但在 Haskell 中，我们必须使用`takeWhile`, 或来模拟剪切`take`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T23:18:16.763

替换`[1..]`为`fibs`，您的第二个变体将等同于第一个变体。

编辑：哦，对不起，它不会。但这将是“更少”的错误：）我应该更加注意......</p>

# fabric - 带有 Fabric 的 python 守护进程

> ID：11404578
> 
> 赞同：1
> 
> 时间：2012-07-09T23:16:02.393
> 
> 标签：fabric, python-daemon

任何人都可以提供在 fabfile 中实现 python-daemon 的示例吗？我正在努力让它发挥作用，尽管从我读过的内容来看，它似乎是我需要能够在后台对主机运行作业的解决方案。如果有人可以提供使用 daeominzation 对简单 fabfile 进行采样的实际示例，我将不胜感激！

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T20:39:54.900

先搜索。至少[在这里](https://stackoverflow.com/a/11367402/203747)和[这里](https://stackoverflow.com/a/6379537/203747)都回答了这个问题。[它也以两种](http://docs.fabfile.org/en/1.4.3/faq.html#why-can-t-i-run-programs-in-the-background-with-it-makes-fabric-hang)不同的[方式](http://docs.fabfile.org/en/1.4.3/faq.html#init-scripts-don-t-work)出现在常见问题解答中的文档中，具体取决于您尝试使用事物的方式。

# asp.net - 从 DataGrid 减小 ViewState 的大小

> ID：11404579
> 
> 赞同：2
> 
> 时间：2012-07-09T23:16:04.713
> 
> 标签：asp.net, datagrid, viewstate

我正在尝试减少来自我的 DataGrid 的 ViewState 中的负载，但它没有按预期工作。当我的页面最初运行时（并且我的数据网格为空），它的视图状态约为 1794 字节。当我用 填充我的数据网格时`EnableViewState="true"`，ViewState 出现 4,074,656 字节，当我用*相同*的数据填充数据网格但`EnableViewState="false"`，视图状态为 2,477,356 字节。我知道这个数字几乎减半，但它仍然是一个很大的数字（并且与网格的大小成正比）。如果没有来自数据网格的任何东西，我预计这肯定会小于 10,000（不比原来的 1794 大多少）。为什么它仍然这么高？我还必须做些什么来减少来自我的数据网格的视图状态负载吗？顺便说一句，填充后的数据网格大约有 1600 行和 27 列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T00:26:35.757

我意识到我从我的数据层类（用于将我的 DataGrid 绑定到）中检索到的 DataTable 也被存储`ViewState[]`用于排序目的（非常糟糕的做法），我刚刚发现它的所有数据都存储在`__VIEWSTATE`隐藏字段中。

它之所以被存储，是`ViewState[]`因为我懒得存储/检索搜索选项字段并重新查询以进行排序，而没有意识到后果。基本上，有了我的 DataGrid `EnableViewState="true"`，我`__VIEWSTATE`的大小翻了一番。我从这个错误中学到了很多东西，我希望其他任何偶然发现这个错误的人也能学到一些东西。

# c# - AC# Linq to Sql 查询，使用 SUM、Case When、Group by、外连接、聚合和默认值

> ID：11404582
> 
> 赞同：0
> 
> 时间：2012-07-09T23:16:19.503
> 
> 标签：c#, sql, linq, linq-to-sql, c#-4.0

我一直在寻找可能的解决方案并尝试了几个小时但没有运气。任何帮助将不胜感激。

我有一个 Sql 语句，我试图将它组合成一个 C# LINQ 查询。

这是工作 SQL：

```
SELECT up.UserProfileID
    ,up.FirstName
    ,up.LastName
    ,SUM(CASE WHEN ul.CompletionDate IS NULL THEN 0
        ELSE ISNULL(ul.Score, 0)
    END) AS TotalScore
FROM dbo.UserProfile up
    LEFT OUTER JOIN dbo.UserLearning ul ON up.UserProfileID = ul.UserProfileID
WHERE up.ManagerUserProfileID IS NULL
GROUP BY up.UserProfileID, up.FirstName, up.LastName 
```

我尝试了几种不同的方法，但似乎最终得到的不是我想要的语句或没有成功执行的语句

我当前的（非工作）代码如下所示：

```
var pd = from up in db.UserProfiles
     join ul in db.UserLearnings on up.UserProfileID equals ul.UserProfileID into temp
     from upJOINul in temp.DefaultIfEmpty(new UserLearning() { Score = 0 })

     where up.ManagerUserProfileID.Equals(null)

     group up by new
     {
         UserProfileID = up.UserProfileID,
         FirstName = up.FirstName,
         LastName = up.LastName,
         TotalScore = up.UserLearnings.Sum(u => u.Score)
     }; 
```

感谢您的任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T20:01:15.100

经过几次尝试和进一步使用谷歌，我终于设法得到了一个可行的解决方案。我希望它对其他人有用。

```
var pd = db.UserProfiles.AsEnumerable()
    .Where(up => up.ManagerUserProfileID.Equals(null))
    .Select(up => new
    {
        UserProfileID = up.UserProfileID,
        FirstName = up.FirstName,
        LastName = up.LastName,
        TotalScore = up.UserLearnings
            .Where(ul => ul.CompletionDate.HasValue && ul.Score.HasValue)
            .DefaultIfEmpty()
            .Sum(ul => ul != null && ul.Score.HasValue ? ul.Score : 0)
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T23:36:34.347

不是您要求的，但是如果您有一个工作复杂的 SQL 查询，它是相当静态的，请将其放入存储过程中，然后将该 SP 拖到您的 LINQ DataContext 中。

LINQ 提供程序必须在每次调用时将查询编译为 sql，这需要时间和服务器 CPU 周期。如果它是一个复杂的查询，它可能会占用大量资源。也可能会错过一些可以使用直接 SQL 进行的优化。

除非当然有它的目的。

如果您有 ORM 问题，请掌握实际的 SQL 命令，查看它，并与您想要实现的结果进行比较。您能否也显示生成的 SQL，以便我们更容易找到差异？

# android - AsyncTask 作为内部类和静态字段问题

> ID：11404586
> 
> 赞同：2
> 
> 时间：2012-07-09T23:16:35.233
> 
> 标签：android, static, android-asynctask, inner-classes

我有一种方法`searchPlace()`可以`static Arrays`使用谷歌地图更新 A 类（FindItOnMap）中的自定义地点对象，以及`updateMap()`更新各种地理点的方法。我调用这些方法`Button.onClick`并且一切正常。

由于这些方法使用互联网数据，因此此操作可能需要一段时间，我一直在寻找`YourCustomAsyncTask`类 A 内部的内部类 B() 的实现，该类扩展`AsyncTask`以在处理这两种方法期间显示等待对话框

一位用户以这种形式提出了一个解决方案（这显然似乎有效）：

```
public class FindItOnMap extends MapActivity { 
    static Place[] foundResults; 
    private ProgressDialog dialog; 

    @Override 
    public void onCreate(Bundle savedInstanceState) { 
       super.onCreate(savedInstanceState); 
        setContentView(R.layout.ricerca_condominio); 
        mapView = (MapView)findViewById(R.id.mapView); 
             ........... 

        ((ImageButton) findViewById(R.id.btSearch)).setOnClickListener(mSearchListenerListener); 
    } 

    OnClickListener mSearchListener = new OnClickListener() { 
        public void onClick(View v) { 
            String location=editorLocation.getText().toString(); 
            String name=editorName.getText().toString(); 
            //Call the AsyncTask here 
            new YourCustomAsyncTask().execute(new String[] {name, location}); 
        }
    }; 

    private class YourCustomAsyncTask extends AsyncTask <String, Void, Void> {  
        @Override  
        protected void onPreExecute() {  
            dialog = new ProgressDialog(Main.this);  
            dialog.setMessage("Loading....");  
            dialog.setIndeterminate(true);  
            dialog.setCancelable(true);  
            dialog.show(); //Maybe you should call it in ruinOnUIThread in doInBackGround as suggested from a previous answer 
        }  

        @Override  
        protected Void doInBackground(String... strings) {  
            try {  
                search(strings[0], string[1]);  
                return null;
            } catch(Exception e) { 
            } 
        } 

        @Override  
        protected void onPostExecute(Void params) {  
            updateMapWithResult();  
            dialog.dismiss();  
            //result  
        }  
..... 
    } 
```

显示等待对话框并在后台调用方法，但是由于某种奇怪的原因，静态列表`foundResults`结果充满了各种`null`项目......

这怎么可能？

如果我在内部类之外调用方法 search(location, name) 都可以正常工作并`updateMapWithResult();`更新所有地理点，所以这两种方法都可以。只有当我尝试在内部类中调用它时，json 调用似乎正在工作，但静态变量`foundResults`充满了`null`元素并且程序无法正常工作。

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T08:34:59.753

我已经明白问题出在哪里了。您必须在 UI 线程上运行搜索方法。

所以改变这个代码块：

```
 @Override  
        protected Void doInBackground(String... strings) {  
           try {  

              search(strings[0], string[1]);  
              return null;

           } catch(Exception e) { 
           } 

        } 
```

有了这个

```
 @Override  
        protected Void doInBackground(final String... strings) {  
           try {  
              runOnUiThread(new Runnable() {
               public void run() {
                     search(strings[0], string[1]);  
                     return null;
                   }
              });

           } catch(Exception e) { 
                 e.printStackTrace();
           } 
        } 
```

一切都应该正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T23:45:31.940

这是一个问题：

```
OnClickListener mSearchListener = new OnClickListener() { 
        public void onClick(View v) { 
                String Location=editorLocation.getText().toString(); 
                String name=editorName.getText().toString(); 
             //Call the AsyncTask here 
            new YourCustomAsyncTask().execute(new String[] {name, location}); 

        } 
```

你`Location`应该是`location`。

也在这里：

```
@Override  
        protected Void doInBackground(String... strings) {  
           try {  

              search(strings[0], string[1]);  

           } catch(Exception e) { 
           } 

        } 

    @Override  
    protected void onPostExecute(Void params) {  
        updateMapWithResult();  
        dialog.dismiss();  
        //result  

    } 
```

在`doInBackground`您搜索后不分配值。你可以试试这个：

```
@Override  
        protected Void doInBackground(String... strings) {  
           try {  

              search(strings[0], string[1]);  
              String name = string[0];
              String location = string[1]

           } catch(Exception e) { 
           } 

        } 
```

或者其他可以在运行时分配价值的东西。实际上，您似乎只是搜索，然后什么都没有。

原因`foundResults`是`null`因为你从来没有给它赋值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T02:27:58.663

你的没有什么问题`AsyncTask`。请附上`search()`方法。

# multithreading - Cocoa 中的多线程和确定在 Cocoa 中检查了哪些单元格

> ID：11404591
> 
> 赞同：1
> 
> 时间：2012-07-09T23:17:20.760
> 
> 标签：multithreading, cocoa

**问题 1** - 我目前正在编写一个程序，该程序具有一个表视图，该视图加载了磁盘属性列表中的数据。这些单元格中的每一个都有一个与之关联的名称和一个复选框。该程序的目的是有一个“获取”按钮，当按下时，将遍历表格，检查哪些单元格被选中。对于每一个被选中的，它都会抓取它的 URL（这只是辅助单元格）并下载它。

例子

*   x 档案 1
*   _ 文件 2
*   x 文件 3

按“获取”时，它将从 somesite.com/File1.zip、somesite.com/File3.zip 下载文件（文件 1 和 3）。

目前，我所写的只会下载最后一个检查的文件。

**问题 2** - 一旦我弄清楚了，我想知道如何同时下载所有文件，而不是连续下载，因为这就是我的程序现在正在做的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T02:25:23.993

包含按钮调用的代码的类应包含：

```
IBOutlet NSButton *checkbox1; 
```

在其标题的变量区域中（加上复选框2和复选框3）。

此 IBOutlet 应连接到界面布局中的复选框。[在Cocoa Fundamentals Guide](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaFundamentals/CommunicatingWithObjects/CommunicateWithObjects.html)中阅读有关 IBOutlets 的信息。

至于同时下载多个文件……您应该异步使用多个 NSURLConnections。这可能有点棘手。查看[NSURLConnection 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsurlconnection_Class/Reference/Reference.html)。然后还要在此处查看此问题以一次管理多个连接：

[管理多个异步 NSURLConnection 连接](https://stackoverflow.com/a/332483/36103)

# php - 如何将while循环放入变量中？

> ID：11404595
> 
> 赞同：-2
> 
> 时间：2012-07-09T23:17:27.790
> 
> 标签：php

好吧，实际上并不比代码多！

```
$toq = mysql_query("SELECT * FROM users") 
or die(mysql_error());  
$to = while($row = mysql_fetch_array($toq)) { echo "".$row['mail'].", "; };
echo $to; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T23:19:19.103

您想将所有条目保存在一个数组中，如下所示：

```
$to = array();
while($row = mysql_fetch_array($toq)) { 
    $to[] = $row['mail'];
} 
```

然后，要回显为逗号分隔的字符串，请使用[`implode()`](http://php.net/implode)：

```
echo implode( ', ', $to); 
```

这比使用字符串连接的替代方法要好，但不可避免地会在末尾添加一个额外的逗号：

```
$to = '';
while($row = mysql_fetch_array($toq)) { 
    $to  .= $row['mail'] . ',';
} 
```

为了删除尾随逗号，请使用[`rtrim()`](http://php.net/rtrim)：

```
$to = rtrim( $to, ','); 
```

# html - “离线浏览”是 HTML-5 的新功能吗

> ID：11404598
> 
> 赞同：-1
> 
> 时间：2012-07-09T23:17:56.470
> 
> 标签：html, offline

**：：：更新：：：**

我正在阅读有关 HTML-5 及其提供的新功能的信息，其中一项功能是**App Cache**，它在 W3school 网站中定义为*“离线浏览 - 用户可以在离线时使用该应用程序”，，*。

**但这真的是 HTML-5 中的一个新功能，在早期的 HTML 版本中是没有的吗？**因为从很久以前（至少 6 年前）我们就可以选择浏览网站，即使我们处于离线状态，因为 HTML 将被缓存在浏览器中？？那么 HTML-5 中的离线浏览是什么意思？BR

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T02:52:11.037

是的，这是 HTML5 引入的新功能。这**与**您的浏览器缓存站点不同，例如 ole“保存以供离线使用”选项。

一些浏览器的离线缓存机制简直就是不可靠。HTML5 使用清单文件来告诉浏览器它应该使用什么来进行离线存储。

见： [http ://www.html5rocks.com/en/tutorials/appcache/beginner/](http://www.html5rocks.com/en/tutorials/appcache/beginner/)

以及 w3c 工作草案： [http ://www.w3.org/TR/html5/offline.html](http://www.w3.org/TR/html5/offline.html)

我最喜欢的 HTML5 资源（更多关于旧元素的正确使用，以及如何使用新元素）：[http ://html5doctor.com/](http://html5doctor.com/)

最后，正如许多经验丰富的 Web 开发人员会告诉您的那样，**w3schools 很麻烦**。他们因拥有各种误导性和虚假信息而臭名昭著。见[http://w3fools.com/](http://w3fools.com/)

希望这可以帮助。

# mysql - MySql 使用制表符分隔插入位

> ID：11404602
> 
> 赞同：1
> 
> 时间：2012-07-09T23:18:21.807
> 
> 标签：mysql

我正在使用制表符分隔文件将数据插入 MySql 数据库

在位字段中，我得到 0 和 1 作为值，但是当我使用下面的命令将数据插入数据库时​​，它会将 0 转换为 1。

```
load data local infile 'c:/membership.txt' into table membership; 
```

结果，位列在每一行中的值为 1。

表的结构是

```
 Create table Membership
    (
    MemberShipId int not null AUTO_INCREMENT, 
StartDate datetime not null, 
EndDate datetime not null, 
AgeGroup tinyint, 
Newsletter bit, 
Donation decimal(7,2), 
FavouriteShow varchar(50), 
Comments varchar(200), 
MemberId int not null, 
PRIMARY KEY (MemberShipId),
CONSTRAINT fk_Member FOREIGN KEY (MemberId) REFERENCES Member (MemberId)
    ); 
```

样本输入是

```
1   2012-01-01  2012-01-01  0   0   \N  \N  1
2   2012-01-01  2012-01-01  1   0   \N  \N  2
3   2012-01-01  2012-01-01  1   0   \N  \N  3
4   2012-01-01  2012-01-01  1   0   \N  \N  4
5   2012-01-01  2012-01-01  0   0   \N  \N  5
6   2012-01-01  2012-01-01  0   0   \N  \N  6 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:49:30.847

MySql 文档似乎涵盖了这个问题： [http ://dev.mysql.com/doc/refman/5.6/en/load-data.html](http://dev.mysql.com/doc/refman/5.6/en/load-data.html)

在以以下开头的部分查看页面的大约一半：

> 无法使用二进制符号加载 BIT 值...

描述了一个有点笨拙的解决方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T02:16:43.940

导入 CSV 文件时，您的值似乎被隐式引用为字符串。在 MySQL 5.0.3 之后使用`BIT`类型时，它旨在作为位字段（例如 '11001'），而不是布尔类型 1/0。字符串值`'0'`和`'1'`两者似乎都被解释为非空数据，而且你不只是得到一个 0。

相反，您可以使用仅支持数值 1 或 0的`TINYINT(1)`类型或其同义词。`BOOLEAN`

```
Create table Membership
(
  MemberShipId int not null AUTO_INCREMENT, 
  StartDate datetime not null, 
  EndDate datetime not null, 
  AgeGroup TINYINT,
  /* use TINYINT(1) for a boolean  OR use BOOLEAN */ 
  Newsletter TINYINT(1), 
  Donation decimal(7,2), 
  FavouriteShow varchar(50), 
  Comments varchar(200), 
  MemberId int not null, 
  PRIMARY KEY (MemberShipId),
  CONSTRAINT fk_Member FOREIGN KEY (MemberId) REFERENCES Member (MemberId)
); 
```

# jquery - jQuery嵌套ul导航菜单，手风琴还是树形菜单？

> ID：11404603
> 
> 赞同：0
> 
> 时间：2012-07-09T23:18:22.877
> 
> 标签：jquery, navigation, nested, accordion, jstree

我不确定实现侧面导航菜单的最佳选择，它最多有 4 个嵌套的 UL。我遇到的最大问题是一些需要扩展以显示子元素的标题也链接到各个页面。

我认为最好的方法是默认不链接到那个单独的页面，而是在它旁边有一个链接到那个页面的图标。我在这里遇到的问题是手风琴在导航和选择活动项目时似乎不喜欢这样。

我已经对 jQuery Tree 导航菜单进行了一些研究，但我不确定：
1) 它们的可定制性如何，
2) 我可以让标题显示子项并以某种方式转到单个页面。

请问这里对我来说最好的选择是什么？哦，解决方案只需要基于 HTML / CSS / jQuery，谢谢。

HTML（减少，总共大约有 100 个链接）：

```
<ul class="menu">
  <li class="menu_level_1"><a href="/" >Home</a></li>
  <li class="menu_level_1"><a href="/link2" >Link 2</a></li>
  <li class="menu_level_1">
     <a href="#" >Link 3</a>
     <ul class="sub_menu_2">
        <li class="menu_level_2"><a href="/link4" >Link 4</a></li>
        <li class="menu_level_2"><a href="/link5" >Link 5</a></li>
        <li class="menu_level_2">
          <a href="#" >Link 6</a>
          <a href="/link6" >Go to Link 6</a>
          <ul class="sub_menu_3">
            <li class="menu_level_3"><a href="/link7" >Link 7</a></li>
          </ul>
        </li>
     </ul>
  </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:08:22.363

对浮动中的超大内容使用[浮动/下拉](http://www.cssplay.co.uk/menus/basic-float-drop.html)响应来创建菜单，为同时具有子菜单和单个页面链接的标题添加额外`li`内容。以下是一些参考资料：

*   [CSSPlay 4 级 UL Flyout](http://www.cssplay.co.uk/menus/ul-flyout.html)
*   [简化的浮动/下拉菜单](http://thinkhtml.blogspot.com/2009/09/timos-float-drop-css-only-dropdown-menu.html)
*   [原始站点点浮动/删除线程](http://www.sitepoint.com/forums/showthread.php?635116-CSS-Test-Your-CSS-Skills-Number-27/page6)

# maven-plugin - maven创建的xmlbeans类没有放在正确的包结构中

> ID：11404606
> 
> 赞同：1
> 
> 时间：2012-07-09T23:18:42.370
> 
> 标签：maven-plugin

我正在使用 xmlbeans 生成一些 java 类。我在我的项目中使用 maven 3。我已经包含了依赖项和插件详细信息，如下所示。

```
<plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>xmlbeans-maven-plugin</artifactId>
                <version>2.3.3</version>
                <executions>
                    <execution>
                        <goals>
                            <goal>xmlbeans</goal>
                        </goals>
                    </execution>
                </executions>
                <inherited>true</inherited>
                <configuration>
                    <schemaDirectory>src/main/xsd</schemaDirectory>
                </configuration>
            </plugin> 
```

当我运行一个干净的包目标时，我得到编译器错误只是因为在类路径中找不到使用 xmlbeans 生成的引用的类。这是因为 xmlbeans 类没有编译到正确的目录结构中。相反，它只是将它放在 target\classes\aseXMLR30 中（它应该在正式结构中，例如：com.ex.first）

我已经用谷歌搜索并阅读了许多博客，到目前为止没有任何帮助！任何回复/答案都非常感谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-04T15:59:10.443

我知道这个问题已经 4 个月了，但如果您和/或其他人仍在寻找解决方案，[这篇博文](http://www.subshell.com/en/subshell/blog/article-Changing-from-m2eclipse-to-m2e-Eclipse-Indigo100.html)可能会提供线索。

本质上，它所说的是所有对 的引用`org.maven.ide.eclipse`都应替换为`org.eclipse.m2e`. 它引用`.launch`文件，但为了更安全，只需通过 Eclipse 目录和项目递归 grep。

# .htaccess - 子域重定向到 URL 参数，同时保持其他 url 参数不变

> ID：11404608
> 
> 赞同：0
> 
> 时间：2012-07-09T23:19:10.660
> 
> 标签：.htaccess, redirect, url-rewriting, subdomain

对于这个问题的答案，我看起来很疯狂——但我还没有找到答案。如果我错过了什么，我提前道歉。

我希望将子域转换为 url 参数，同时保留其他 url 片段。

如：

[http://sub.domain.tv/value](http://sub.domain.tv/value)重定向到[http://domain.tv/value?campus=sub](http://domain.tv/value?campus=sub)

这是我在浏览了这里的许多帖子后尝试过的：

```
# campus
RewriteCond %{HTTP_HOST} ^sub.domain.tv$ [NC]
RewriteRule ^(.*)$ http://domain.tv/$1/?campus=sub [R=301,L] 
```

这对于将 sub.domain.tv 重定向到 domain.tv?campus=sub 效果很好，但不适用于其余的 URL 参数（因此前往 sub.domain.tv/value 什么都不做）。

我尝试了将 %1 和 $1 用作变量的其他示例，例如这篇文章： [htaccess subdomain redirct with last url parameter](https://stackoverflow.com/questions/1133106/htaccess-subdomain-redirct-with-last-url-parameter)但我不明白其中的区别（并且我尝试过的示例不起作用） .

谢谢参观！:) 非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T23:23:36.670

您是否尝试过 [QSA] 参数。这会将所有剩余的查询参数添加到`campus=sub`

# php - 你会如何结合这个 wordpress 简码模板代码？

> ID：11404613
> 
> 赞同：0
> 
> 时间：2012-07-09T23:19:32.420
> 
> 标签：php, wordpress

我正在使用一个插件来生成我的价格值并将其从数组中提取出来：

```
<?php echo __('Price: ', 'event_espresso'); ?></span> <?php echo 
$org_options['currency_symbol'].$event->event_cost; ?> 
```

我想使用插件“Worldcurrency”将这个生成的价值转换为我的访客自己的货币，具体取决于他们所在的国家/地区

但是，您必须在短代码中输入一个值，如下所示：

```
[worldcurrency curr="EUR" value="25"]
in united states will show:
(~30$ USD) 
```

现在我知道如何在模板 php 文件中使用简码，但我不知道是否可以将我的数组值和货币符号插入到这个简码中。而不是使用`value="25"`我需要使用：

`value="<?php echo $org_options['currency_symbol'].$event->event_cost; ?>"`

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T23:43:23.873

我不确定是否可以在简码中使用 PHP 代码内联 - 我怀疑不是，但是实现这一点的一个简单的方法是编写自己的简码，然后调用另一个简码。

您的简码会生成您想要的文本（例如 '[worldcurrency curr="EUR" value="25"]'），然后调用 "do_shortcode($content)" 这将导致其他插件为您进行货币查找.

你可以把它放在一个插件文件中，它可能会少于 15 行代码。

另一种选择是修改您用来生成所需输出的货币转换插件。

# python - 使用变量“interpolation”创建导入语句

> ID：11404617
> 
> 赞同：1
> 
> 时间：2012-07-09T23:19:46.363
> 
> 标签：python, import, string-interpolation

我有一长串可能需要导入的文件。我只需要其中的 1 个，而且它们都有相同的界面。（选择支付网关来处理支付）

假设我有一个表示所有网关文件名称的字典。

IE

```
gateways = {
   '1' : 'authorize',
   '2' : 'paysimple',
   '3' : 'braintreepayments',
   '4' : 'etc',
} 
```

我根据数据库中的信息知道这本字典的键。因此，如果我收到网关值为 1 的支付流程请求，我知道它需要由 Authorize.net 处理。A 2 将由 Pay Simple 处理。等等。

我希望能够创建一个使用我知道的信息而不是可怕的语句列表构建的导入`elif`语句。

考虑下面的简单方法：

```
# For the purposes of this example assume payment_gateway is defined
# elsewhere and represents the key to the dictionary
gateway_file = gateways.get(payment_gateway)

import_str = "from gateway_interface.%s import process" % gateway_file
gogo(import_str) 
```

where`gogo`是一种使 import 语句实际导入的方法。

这样的事情可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T00:34:11.340

最简单的

```
process = __import__('gateway_interface.'+gateway_file,fromlist=['foo']).process 
```

**编辑**： fromlist 中的 'foo' 可以是任何东西，只要 fromlist 不是空列表。[为什么 Python 的 __import__ 需要来自列表](https://stackoverflow.com/questions/2724260/why-does-pythons-import-require-fromlist)？.

我还必须进行编辑，因为在我的第一篇文章 `__import__`中没有按预期工作，正如[Python 的 __import__ 没有按预期工作](https://stackoverflow.com/questions/211100/pythons-import-doesnt-work-as-expected)中进一步描述的那样。

如果你有 python 2.7

```
import importlib
process = importlib.import_module('gateway_interface.'+gateway_file).process 
```

WAAAAY 很酷的是使用 package_tools （例如`from pkg_resources import iter_entry_points`）

即使它们位于不在 gateway_interface 下的奇数包中，这也可以为您提供找到正确功能的解决方案。如果它们都在一个地方，并且您不需要那种矫枉过正的风格，那么……是的，只是`__import__`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T23:23:03.603

看一下[imp](http://docs.python.org/library/imp.html)模块，它允许您访问 import 语句的内部或[`__import__`](http://docs.python.org/library/functions.html#__import__)方法本身 - 这些中的任何一个都应该允许您实现您所描述的我的想法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T00:25:26.193

内置`__import__`方法应该可以工作：

```
process = __import__(gateways.get(payment_gateway)).process 
```

# maven - 我可以使用 maven javadoc 插件（2.7 版） excludePackageNames 属性来排除一个包而不是它的子包吗？

> ID：11404618
> 
> 赞同：3
> 
> 时间：2012-07-09T23:19:53.300
> 
> 标签：maven, javadoc

我有一组要为其生成 javadoc 的类，其中一些我想从已发布的 javadoc 中排除。结构如下：

```
com.company.package.classA
com.company.package.classB
com.company.package.subpackage.classC
com.company.package.subpackage.classD 
```

我想排除“包”中的所有类并包括“子包”中的所有类。环境：

```
<excludePackageNames>com.company.package</excludePackageNames> 
```

排除包下的所有子包。

除了重构代码，有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:59:35.507

您可以使用 [maven-javadoc-plugin](http://maven.apache.org/plugins/maven-javadoc-plugin/javadoc-mojo.html)为您完成。

2.7 及更高版本支持此功能。

例子：

```
<plugin>
    <artifactId>maven-javadoc-plugin</artifactId>
    <version>2.8.1</version>
    <executions>
      <execution>
        <id>javadoc-jar</id>
        <phase>package</phase>
        <goals>
          <goal>jar</goal>
        </goals>
        <configuration>
          <!-- switch on dependency-driven aggregation -->
          <includeDependencySources>true</includeDependencySources>

          <dependencySourceExcludes>
            <!-- exclude ONLY commons-cli artifacts -->
            <dependencySourceExclude>commons-cli:*</dependencySourceExclude>
          </dependencySourceExcludes>
        </configuration>
      </execution>
    </executions>
  </plugin> 
```

```
 <configuration>
          <!-- switch on dependency-driven aggregation -->
          <includeDependencySources>true</includeDependencySources>

          <dependencySourceIncludes>
            <!-- include ONLY dependencies I control -->
            <dependencySourceInclude>org.test.dep:*</dependencySourceInclude>
          </dependencySourceIncludes>
     </configuration> 
```

# regex - Matlab：提取数字，包括小数和符号

> ID：11404619
> 
> 赞同：0
> 
> 时间：2012-07-09T23:20:01.790
> 
> 标签：regex, matlab

我在 matlab 中有一个字符串，如下所示：

```
str =

    Z   1   -355.66338432    1
    Z   2      1.38339828     412    
    Z   3      9.00000000     412    
    Z   4    -10.27835665     312 22 - 1
    Z   5      3.00000000     612 2   2
    Z   6      6.53259554     612 2   2
    Z   7      5.00000000     812 33 - 2   
    Z   8      0.19040409     812 33 - 2   
    Z   9      2.00000000     812 3   3
    Z  10     -1.00534284     812 3   3
    Z  11      7.27727717     512 64 - 62  1 
```

我想提取第三列中的数字，但我似乎无法弄清楚正则表达式的正确用法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T01:53:21.937

我手边没有 MATLAB，所以无法提供代码。但一般来说：一次遍历字符串，并使用正则表达式：

```
^\s*Z\s*\d+\s*(-?\d+\.\d+).*$ 
```

这将捕获数字作为第一个捕获组，`\1`。正则表达式扩展为：

```
^                  Start of line
\s*Z\s*            First column - whitespace, literal `Z`, whitespace
\d+\s*a            Second column - integer number, whitespace
(-?\d+\.\d+)       Third column - a (possibly negative) decimal number.
.*                 Anything
$                  End of line 
```

看到它在[Regexr](http://regexr.com?31g0l)上工作。

* * *

或者，使用实际适用于这项工作的工具：[`textscan()`](https://stackoverflow.com/questions/1099905/how-to-read-text-fields-into-matlab-and-create-a-single-matrix). （[Mathworks 文档](http://www.mathworks.com.au/help/techdoc/ref/textscan.html)。）

# c++ - bst 比较模板上的错误 C2664

> ID：11404622
> 
> 赞同：0
> 
> 时间：2012-07-09T23:20:18.343
> 
> 标签：c++, set, binary-search-tree

这个错误：

> 错误 C2664: 'Set::Set(int (__cdecl *)(ElemType,ElemType))' : 无法将参数 1 从 'int (__cdecl *)(CorrectionT &,CorrectionT &)' 转换为 'int (__cdecl *)(ElemType ,元素类型)'

是将此比较函数作为基于 BST 的 SET 类的一部分实现的结果，

```
int compareCorr(struct CorrectionT &a, struct CorrectionT &b)
{
    if (a.editDistance < b.editDistance) return -1;
    else if (a.editDistance == b.editDistance) return 0;
    else return 1;
} 
```

类集

```
Set(int (*cmpFn)(ElemType, ElemType) = OperatorCmp); 
```

而Set中比较函数的使用是为了添加

```
template <typename ElemType>
void Set<ElemType>::add(ElemType element) {
    bst.add(element);
} 
```

并添加 bst 类重述头文件

```
BST(int (*cmpFn)(ElemType one, ElemType two) = OperatorCmp); 
```

和功能添加

```
template <typename ElemType>
bool BST<ElemType>::add(ElemType data) {
        bool createdNewNode = false;
        recAddNode(root, data, createdNewNode);
        if (createdNewNode) timestamp++;
        return createdNewNode;
}

template <typename ElemType>
bool BST<ElemType>::recAddNode(nodeT * & t, ElemType & data,
                               bool & createdNewNode) {
        if (t == NULL) {
                t = new nodeT;
                t->data = data;
                t->bf = BST_IN_BALANCE;
                t->left = t->right = NULL;
                createdNewNode = true;
                numNodes++;
                return true;
        }
        int sign = cmpFn(data, t->data);
        if (sign == 0) {
                t->data = data;
                createdNewNode = false;
                return false;
        }
        int bfDelta = 0;
        if (sign < 0) {
                if (recAddNode(t->left, data, createdNewNode)) {
                        bfDelta = -1;   /* left subtree is higher */
                }
        } else {
                if (recAddNode(t->right, data, createdNewNode)) {
                        bfDelta = +1;   /* right subtree is higher */
                }
        }
        updateBF(t, bfDelta);
        return (bfDelta != 0 && t->bf != BST_IN_BALANCE);
} 
```

知道这里发生了什么 - 比较功能有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T23:23:08.113

的类型`compareCorr`是`int(Lexicon::CorrectionT&, Lexicon::CorrectionT &)`。它的参数是参考。

的类型`cmpFn`，即构造函数的参数，是`int(*)(ElemType, ElemType)`。它的参数是对象（不是引用）。

类型必须匹配。假设`ElemType`是`Lexicon::CorrectionT`，您必须要么将函数指针类型更改为具有引用参数类型，要么将比较器类型更改为具有对象参数类型。（如果你走参考路线，它们可能都应该使用 const 引用，因为比较器不应该改变对象。）

或者，您可以做 STL 所做的事情，并使比较器成为类型的一部分，从而允许使用任意函数对象进行比较。然后，比较器只需要具有与被比较对象的类型兼容的类型参数（即，事物不需要完全匹配）。

# oauth-2.0 - Thinktecture.IdentityServer .NET 4.5 的 SslNegotiateCert Web.Config 错误

> ID：11404625
> 
> 赞同：2
> 
> 时间：2012-07-09T23:20:44.790
> 
> 标签：oauth-2.0, claims-based-identity, sts-securitytokenservice

我正在使用 Thinktecture.IdentityServer (OnPremise) .NET 4.5 版本。我需要一些帮助来调试配置问题。当我尝试访问我的 OAuth 端点时，我得到一个

> “HTTP 错误 500.19 - 内部服务器错误无法访问请求的页面，因为该页面的相关配置数据无效。”

这是配置错误：

> 此配置部分不能在此路径中使用。当该部分锁定在父级别时会发生这种情况。锁定是默认情况下 (overrideModeDefault="Deny") 或由具有 overrideMode="Deny" 或旧 allowOverride="false" 的位置标记显式设置的。

web.config 中问题区域的配置源是：

```
34:       <security>
35:         <access sslFlags="SslNegotiateCert" />
36:       </security> 
```

我不确定如何前进。我试过这个解决方案： http: [//blog.thinkoriginally.com/2010/02/17/asp-net-config-error-this-configuration-section-cannot-be-used-at-this-path/](http://blog.thinkoriginally.com/2010/02/17/asp-net-config-error-this-configuration-section-cannot-be-used-at-this-path/)但没有成功

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T20:16:24.553

我可以通过转到 IIS 管理器 > 单击服务器根连接 > 功能委派（在管理下）> 自定义站点委派...（在右侧的操作下）> 选择站点 > 将 SSL 设置更改为读取来解决此问题/写

更多信息可以在这里找到：http: [//davefancher.com/2010/10/29/unlocking-configuration-sections-in-iis-7-x/](http://davefancher.com/2010/10/29/unlocking-configuration-sections-in-iis-7-x/)

# php - 获取选项元素的名称属性并将其放入 php 变量中

> ID：11404627
> 
> 赞同：0
> 
> 时间：2012-07-09T23:20:53.260
> 
> 标签：php, html, ajax, forms, post

所以我有一个在 php.ini 中创建的 HTML 下拉列表。

```
echo '<select id="myselect" name="myselect">';

    while($row = mysql_fetch_array($query)) {
        echo '<option value="'.$row['categories'].'" id="'.$row['categories'].'">'.$row['categories'].'</option>';
    }

    echo '</select>'; 
```

我想要做的是采用选定的选项并将其转换为变量，以便我可以将其传递给另一个 php 页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T23:25:05.333

```
echo '<select id="myselect" name="myselect">';
    echo '<option value="make_selection" id="make_selection" name="make_selection">Choose Your Category</option>';

    while($row = mysql_fetch_array($query)) {
        echo '<option value="'.$row['categories'].'" id="'.$row['categories'].'">'.$row['categories'].'</option>';
    }

    echo '</select>'; 
```

在此之上：

```
if($_POST){
    $selection = $_POST['make_selection'];
    //do something with $selection
    //possibly redirect user using header('Location: page.php');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T23:23:35.117

就您自己的知识而言，这不是 php 的工作方式。运行此脚本后，它会显示在用户浏览器上，如果没有他们提交表单或发送 ajax 请求，您将无法执行任何其他操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T23:23:48.877

您的 PHP 在服务器上运行。用户在其客户端 PC 上的浏览​​器中查看生成的 HTML/JavaScript。您需要通过 HTTP 在两者之间进行通信（例如，通过 Ajax/JavaScript 或与服务器之间的完整往返）。只需在下拉列表的值更改时发送请求。

一个更具体的答案需要一个同等具体的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T23:43:51.220

如果您希望将所选选项传递到下一个 PHP 页面，您还必须`name`在`option`.

```
echo '<select id="myselect" name="myselect">';
while($row = mysql_fetch_array($query)) {
    echo '<option name="option[]" value="'.$row['categories'].'" id="'.$row['categories'].'">'.$row['categories'].'</option>';
    $i++;
}

echo '</select>'; 
```

然后在接收页面上：

```
if(isset($_POST['option'])) {
    // process here
    print_r($_POST['option']);
} 
```

这`[]`意味着 PHP 会将所有选项视为数组中的值，因此可以对其进行迭代。

另外，我建议使用[MySQLi](http://php.net/manual/en/book.mysqli.php)，它代表 MySQL 改进。

# java - 在云端动态调整集群大小

> ID：11404628
> 
> 赞同：0
> 
> 时间：2012-07-09T23:20:54.827
> 
> 标签：java, algorithm, cloud, cluster-computing, jclouds

我是一名 Java 开发人员，正在考虑将 AWS、Rackspace 和 Heroku 作为我的应用程序的潜在云提供商。之前只使用过传统的网络主机（虚拟专用服务器计划），我有点不知所措。

我的理解是，借助云，您可以根据需求生成/终止虚拟设备（具有预配置软件堆栈的虚拟机，例如您的应用服务器、数据库服务器等）。因此，如果它是午夜或假期并且没有人使用我的应用程序，那么我可以减少运行实例的数量并节省一些钱。但是，如果它是星期六早上并且我正接近峰值负载，我可以生成新服务器并放心我的应用程序不会崩溃。

因此，首先，如果我的理解有任何不正确或有缺陷，请先纠正我！

假设我对云的看法或多或少是正确的，那么我应该构建自己的监视器来监视应用程序使用中的突然增加/减少/模式是有道理的（我假设基于网络流量和带宽？！）。当流量增长到某个点时，我应该实例化更多的虚拟机，当流量变慢时反之亦然。

由于 JClouds 允许您执行此操作，因此我的监视器将只使用 JClouds API 来生成/杀死服务器。

我哽咽的是：我应该使用什么算法/公式来告诉我的监视器何时生成/杀死虚拟机？我编写了一个试验性算法，基本上可以确保我始终拥有双倍的“马力”（VM）。监视器大约每 10 秒轮询一次每个节点，如果系统上的当前负载发生了一定的变化，它允许`ClusterResizer`启动并确定我们是否需要更多/更少的节点。

虽然我花了几个小时设计这个动态调整大小系统的轮廓/骨架，但我想在我走得太远之前停下来，在这里做一个健全性检查，以防我做一些不必要的、错误的或简单的事情疯狂的！

其他云应用程序如何监控和调整其 VM 的大小？我应该熟悉哪些算法或最佳实践？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T14:01:47.777

在 Amazon EC2 上，您不需要自己实施监控，有一个称为[cloudwatch](http://aws.amazon.com/cloudwatch/)的功能可以为您进行弹性扩展 - 当负载增加时自动扩展，当负载减少时缩减。所以你不需要自己实现监控服务。在 RackSpace 上有一个名为 Scalr 的自动缩放第三方解决方案。可能还有一个与 Amazon 的 CloudWatch 等效的原生 RackSpace 功能，您应该进行调查以节省自己从头开始构建此基础设施的时间。

# java - 这是糟糕的面向对象编程吗？通过方法传递它

> ID：11404632
> 
> 赞同：6
> 
> 时间：2012-07-09T23:21:28.133
> 
> 标签：java, oop, design-patterns, aggregation

好的，假设我有一个类，X 和 X 是与其他对象具有聚合关系的东西。让我们假设 X 是一个足球场。

X充满了班级观众。但是，每个观众对特定活动的行为不同。而不是 IF 语句，我希望不同的行为出现在观众类中，以便我可以使用动态绑定。

然而，问题在于观众的行为会影响“足球场”类。所以我想把“这个”从足球场类，通过一个方法，传递给观众类，让观众类可以对足球场类做点什么？

```
public class SoccerStadium{
    SpecatorInterface s = new Spectator();

    public void SpectatorBehaviour(){
        s.doSomething(this);
    }

    public void doSomethingthingBySpecator(){
    }
}

public class Spectator implements SpecatorInterface{
    public void doSomething(SoccerStadium s){
        s.doSomethingthingBySpecator();
    }
} 
```

我只想这样做，以便我可以使用动态绑定并更改其中的行为，`Specator.doSomething()`以便我可以将许多不同类型的 SpectatorSuperClass 作为属性传递给 SoccerStadium，然后具有不同的行为。

编辑：如果我通过 Spectator 构造函数将 Stadium 的引用传递给 Specator，而不是传递，会`this`怎样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T23:25:15.817

这与其说是“糟糕的 oo 编程”，不如说它是紧密[耦合](http://en.wikipedia.org/wiki/Coupling_%28computer_programming%29)的。传递指针本质上没有错`this`，但它很快就会变得一团糟。如果没有更多信息，我们真的不能说更多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T23:28:01.013

我认为使用 this 作为参数没有问题。尽管如此，我不喜欢`new Spectator()`在你的`SoccerStadium`课堂上硬编码的电话。我相信您应该有一个带有`createSpectator`方法的工厂，该方法可以接收一个参数，指示您打算创建哪种类型的观众。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T00:28:45.587

对我来说，这种双向循环关系是个坏消息。如果观众想去剧院怎么办？

我将通过让 Stadium 成为 Spectator 调度事件的订阅者来解耦这种关系。

```
public class SoccerStadium
{
    ISpectator s = new Spectator();
    public SoccerStadium()
    {
        s.DidSomething+=DoSomethingthingBySpecator;
    }
    public void SpectatorBehaviour()
    {
        s.DoSomething();
    }
    public void DoSomethingthingBySpecator(object sender,EventArgs e)
    {
        Console.WriteLine("spectator did something");
    }
}
public interface ISpectator
{
    event EventHandler DidSomething;
    void DoSomething();
}
public class Spectator:ISpectator
{
    public event EventHandler DidSomething;
    public void DoSomething()
    {
        var ev=DidSomething;
        if(ev!=null)
        {
            ev(this,EventArgs.Empty);
        }
    }
} 
```

...因此，观众现在有一种与任何感兴趣的人交流的方式，但不需要知道任何事情。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-10T01:45:41.160

正如人们所说，紧耦合和你在做什么绝对没有错。但是，如果您想要一点点解耦，请使用经典的访问者模式。

```
public interface SpectatorVisitor {
  ...
  void visit(Spectator spectator);
}

public class Spectator {
  ...
  public void accept(SpectatorVisitor visitor) {
      visitor.visit(this);
  }
}

public class Stadium {

  ...
  spectator.accept(new StadiumSpectatorVisitor());
} 
```

如果需要，可以更改访问方法签名以接受某种状态对象。否则，您可以简单地在 Spectator 类上定义相关方法，并让访问者收集更改体育场所需的信息。

例如：

```
public class Spectator {
  private Team supports;

  public Team getSupports() {
      return supports;
  }

  public void accept(SpectatorVisitor visitor) {
      visitor.visit(this);
  }
}

public class SupportedTeamVisitor {
  private Map<Team, AtomicLong> supportCount = new HashMap<Team, AtomicLong>();

  public void visit(Spectator spectator) {
     Team supports = spectator.getSupports();
     if (! supportCount.contains(supports)) {
       supportCount.put(team, new AtomicLong(0));
     }
     supports.get(team).incrementAndGet();
  }

  public Map<Team, AtomicLong> getSupportCount() {
     return supportCount;
  }
}

public class Stadium {

  public long getSupportCount(Team team) {
     SupportTeamVisitor visitor = new SupportedTeamVisitor();
     for (Spectator spectator : spectators) {
        spectator.accept(visitor);
     }
     AtomicLong count = visitor.getSupportCount().get(team);
     return (count == null) ? 0 : count.get();
  }
} 
```

有道理？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-09T23:55:52.767

你的实现绝对没问题，我以前见过那种东西。是的，您可以通过将它传递给 Spectator 构造函数来保留 Stadium 引用，这可能比每次需要时都发送引用更干净。

但是，我不太喜欢它；我更喜欢内部类。目前尚不完全清楚您要做什么，但可能会发生这样的事情：

```
public class Outer {

private int someVariable=0;

public void someMethod(){
    ExtendsInner ei = new ExtendsInner();
    ei.innerMethod();
    System.out.println(someVariable);
}

private void anotherMethod(){
    someVariable++;
}

public abstract class Inner {
    public abstract void innerMethod();
}

public class ExtendsInner extends Inner{
    public void innerMethod(){
        anotherMethod();
        someVariable++;
    }
}

public static void main(String[] args){
    Outer o = new Outer();
    o.someMethod();
}
} 
```

不幸的是，您必须将所有“旁观者”类都*放在*另一个类中，这可能会导致一个非常长的文件，从而产生丑陋的代码。

但是，我认为您绝对应该避免同时做这两件事，因为它肯定会使您的代码过于复杂。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-10T02:46:56.767

正如马特所说，您所描述的是访问者模式。尽管如此，我不认为这是你最好的选择（正如 Falmarri 所说，这种设计往往是紧密耦合的，你最终会在你的业务对象中加入很多逻辑，破坏[SoC](http://en.wikipedia.org/wiki/Separation_of_concerns)、[SRP](http://en.wikipedia.org/wiki/Single_responsibility_principle)等。）。每个观众对特定活动的行为不同的事实并不意味着逻辑应该包含（也不通过）观众类。有很多不同的方法可以避免这些 IF 语句。我建议您使用类似[此链接的内容](http://blogs.southworks.net/dgeffner/2011/09/26/implementing-complex-case-analysis/)建议哪个比 if 语句、访问者模式或所有其他替代方案更强大，并且在另一个类中实现它真的很容易，并维护所有这些商品 OOP 原则（这是有原因的）。

# model-view-controller - 如何对多维模型进行排序

> ID：11404633
> 
> 赞同：0
> 
> 时间：2012-07-09T23:21:30.833
> 
> 标签：model-view-controller, qt, pyqt4, pyside

我正在使用 PySide 编写插件浏览器。可用的插件存储在一个三维模型中，如下所示：

```
pluginType/pluginCategory/pluginName 
```

例如：

```
python/categoryA/toolA
python/categoryB/toolAA 
```

等等

在我的自定义视图中，我在列表中显示给定插件类型（即“python”）的所有工具，无论它们的类别如何：

```
(python)
categoryA/toolA
categoryA/toolB
categoryA/toolC
categoryB/toolAA
categoryB/toolBB
categoryB/toolCC 
```

我现在想知道如何最好地对该视图进行排序，因此无论其父类别如何，这些工具都按名称排序。我当前的代理模型中的排序方法会为每个类别生成一个排序列表，就像上面的一样，但我所追求的是：

```
(python)
categoryA/toolA
categoryB/toolAA
categoryA/toolB
categoryB/toolBB
categoryA/toolC
categoryB/toolCC 
```

我是否必须让我的代理模型将多维源模型转换为一维模型才能实现这一点，还是有更好的方法？我希望能够将自定义视图与标准树视图同步，这就是我选择多维模型的原因。

谢谢，坦率

编辑1：这是我作为简化示例的内容。我不确定这是否是解决方法（将模型结构更改为一维模型），如果是，我不确定如何在代理模型中正确创建数据，所以它是按预期与源模型链接。

```
import sys
from PySide.QtGui import *
from PySide.QtCore import *

class ToolModel(QStandardItemModel):
    '''multi dimensional model'''
    def __init__(self, parent=None):
        super(ToolModel, self).__init__(parent)
        self.setTools()

    def setTools(self):
        for contRow, container in enumerate(['plugins', 'python', 'misc']):
            contItem = QStandardItem(container)
            self.setItem(contRow, 0, contItem)
            for catRow, category in enumerate(['catA', 'catB', 'catC']):
                catItem = QStandardItem(category)
                contItem.setChild(catRow, catItem)
                for toolRow, tool in enumerate(['toolA', 'toolB', 'toolC']):
                    toolItem = QStandardItem(tool)
                    catItem.setChild(toolRow, toolItem)

class ToolProxyModel(QSortFilterProxyModel):
    '''
    proxy model for sorting and filtering.
    need to be able to sort by toolName regardless of category,
    So I might have to convert the data from sourceModel to a 1-dimensional model?!
    Not sure how to do this properly.
    '''
    def __init__(self, parent=None):
        super(ToolProxyModel, self).__init__(parent)

    def setSourceModel(self, model):
        index = 0
        for contRow in xrange(model.rowCount()):
            containerItem = model.item(contRow, 0)
            for catRow in xrange(containerItem.rowCount()):
                categoryItem = containerItem.child(catRow)
                for itemRow in xrange(categoryItem.rowCount()):
                    toolItem = categoryItem.child(itemRow)
                    # how to create new, 1-dimensional data for self?

app = QApplication(sys.argv)
mainWindow = QWidget()
mainWindow.setLayout(QHBoxLayout())

model = ToolModel()
proxyModel = ToolProxyModel()
proxyModel.setSourceModel(model)
treeView = QTreeView()
treeView.setModel(model)
treeView.expandAll()
listView = QListView()

listView.setModel(proxyModel)

mainWindow.layout().addWidget(treeView)
mainWindow.layout().addWidget(listView)
mainWindow.show()
sys.exit(app.exec_()) 
```

编辑：或者我应该问如何最好地准备一个源模型，以便 QTreeView 可以使用它，但也可以按上述方式排序以在列表视图中显示？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:30:13.047

使用 QTableView 并按 tool_name 列排序（使用排序代理）。

# ruby - 什么 e.upcase 不返回大写单词

> ID：11404636
> 
> 赞同：0
> 
> 时间：2012-07-09T23:21:45.297
> 
> 标签：ruby, arrays

我想大写一个数组，但得到了这种行为：

```
=> ["this", "set", "of", "words", "is", "in", "a", "certain", "order"] 
```

为了这：

```
%w[this set of words is in a certain order].each {|e| e.upcase} 
```

为什么单词不是大写的？

（在我解决这个问题时，现在忽略实际的订单）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T23:26:04.110

[`String#upcase`](http://ruby-doc.org/core-1.9.3/String.html#method-i-upcase)返回一个新的字符串值，它不会修改接收者。用于[`String#upcase!`](http://ruby-doc.org/core-1.9.3/String.html#method-i-upcase-21)获得您想要的行为，或使用 map 来生成一个新的升值数组。

```
%w[this set of words is in a certain order].each { |e| e.upcase! }

up_words = %w[this set of words is in a certain order].map(&:upcase) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T23:33:05.877

```
irb> %w[this set of words is in a certain order].map {|e| e.upcase}
=> ["THIS", "SET", "OF", "WORDS", "IS", "IN", "A", "CERTAIN", "ORDER"] 
```

`each`丢弃所有结果，为您将所有结果`map`收集到一个新数组中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T23:24:15.383

您没有改变输入数组。尽管每个在迭代时实际上都是大写的，但原始数组将被原封不动地返回。改用`upcase!`：

```
# Modifies the array in place and returns the modified version:
>> %w[this set of words is in a certain order].each {|e| e.upcase!}
=> ["THIS", "SET", "OF", "WORDS", "IS", "IN", "A", "CERTAIN", "ORDER"]

# Assign it to a variable to get the up-cased array:
up_cased = %w[this set of words is in a certain order].each {|e| e.upcase!}
up_cased
# => ["THIS", "SET", "OF", "WORDS", "IS", "IN", "A", "CERTAIN", "ORDER"] 
```

如果要在 中打印它们`each`，它们会被大写，但会返回原始的未变异数组。

```
# Calls upcase for proof, but the original array is still returned:
>> %w[this set of words is in a certain order].each {|e| puts e.upcase}
THIS
SET
OF
WORDS
IS
IN
A
CERTAIN
ORDER
=> ["this", "set", "of", "words", "is", "in", "a", "certain", "order"] 
```

查看是否对变量进行操作会更容易一些：

```
arr = %w[this set of words is in a certain order]
# upcase, but don't modify original
arr.each {|e| e.upcase}
arr.inspect
# ["this", "set", "of", "words", "is", "in", "a", "certain", "order"]

# now modify in place with upcase!
arr.each {|e| e.upcase!}
arr.inspect
# ["THIS", "SET", "OF", "WORDS", "IS", "IN", "A", "CERTAIN", "ORDER"] 
```

# ruby-on-rails - 多个 Elasticsearch 索引

> ID：11404637
> 
> 赞同：1
> 
> 时间：2012-07-09T23:22:05.737
> 
> 标签：ruby-on-rails, ruby-on-rails-3, elasticsearch, tire

我在同一个 Ubuntu 服务器上有一个 Rails 3 应用程序的暂存和生产实例（使用轮胎 gem）。看来这两个实例都共享相同的弹性搜索索引，这显然不是我想要的。

如何让我的生产和暂存实例使用单独的实例？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T07:31:58.743

您需要覆盖索引名称。假设您正在绑定 ActiveRecord，它将根据相关模型创建一个索引名称。您可以使用这样的前缀调整名称；

```
class Article < ActiveRecord::Base

  include Tire::Model::Search
  include Tire::Model::Callbacks

  index_prefix "#{Rails.env}" 

  ... 
```

然后将创建一个名为 的索引`development_articles`，`production_articles`等等。重要的`index_prefix`是轮胎包含之后。

或者完全重命名索引

```
class Article < ActiveRecord::Base

  include Tire::Model::Search
  include Tire::Model::Callbacks

  index_name "My-Development-Article-Index" 

  ... 
```

# algorithm - 下降网格项目的算法

> ID：11404656
> 
> 赞同：13
> 
> 时间：2012-07-09T23:23:51.973
> 
> 标签：algorithm, graph

我不知道如何简明扼要地描述目标，这可能就是为什么尽管搜索了很多，但我仍然无法找到适用的算法，但一张图片清楚地显示了它：

![联锁项目](../Images/7606daa4a47150aa540d2e1aa4dc6ff4.png)

**给定左侧网格中项目的状态，有没有人知道一种算法可以有效地找到右侧网格中显示的结束位置？**在这种情况下，所有项目都“下降”“下降”，但方向当然是任意的。重点是：

*   有一组任意形状的项目，但都由连续的正方形组成
*   项目不能重叠
*   所有项目都应在给定方向上移动最大距离，直到它们接触到墙壁，或者它们正在接触另一个项目，而该项目[...正在无限地接触另一个项目...]正在接触墙壁。

这不是作业，我不是学生。这是为了我自己对几何和编程的兴趣。我没有提到语言，因为它无关紧要。我可以用我正在为我正在从事的特定项目使用的语言实现任何算法。有用的答案可以用文字或代码来描述；重要的是想法。

这个问题可能会被抽象为某种依赖关系和松弛空间的图（在数学意义上），因此也许可以采用旨在最小化滞后时间的算法。

如果您不知道答案但即将尝试在现场编造一个算法，请记住可能存在循环依赖关系，例如互锁的粉红色（向后）“C”和蓝色“T”形状。T 的一部分在 C 之下，C 的一部分在 T 之下。如果互锁的项目通过几个部分的“循环”锁定，这将更加棘手。

适用算法的一些注意事项：由于我构建网格对象管理框架的方式，以下所有操作都非常容易和快速：

*   枚举一块内的各个方块
*   枚举所有片段
*   找到占据整个网格中特定方格的棋子（如果有）

**关于答案的注释：** maniek 首先暗示了它，但 bloops 提供了一个绝妙的解释。我认为绝对关键是所有移动相同数量的部分都保持相互关系的洞察力，因此*不必考虑这些关系*。

对于人口稀少的棋盘，另一个加速方法是移动所有棋子以消除完全空的行。计算空行并识别空行一侧（“上方”）的碎片非常容易。

**最后一点：**我确实实现了 bloops 描述的算法，并进行了一些特定于实现的修改。它工作得很好。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-10T12:05:26.127

## 理念

归纳定义*冻结*对象集如下：

*   接触底部的物体被冻结。

*   躺在冻结对象上的对象被冻结。

直观地说，冻结的物体已经到达了它们的最终位置。调用非冻结对象*active*。

**声明**：所有活动物体可以同时向下下降一个单位。

**证明**：当然，一个活动对象不会撞到另一个活动对象，因为它们相对于彼此的相对位置不会改变。活动对象也不会撞到冻结的对象。如果是这样，那么活动对象实际上是冻结的，因为它位于一个冻结的对象上。这与我们的假设相矛盾。

我们的算法非常高级的伪代码如下：

```
while (there are active objects):
    move active objects downwards simultaneously until one of them hits a frozen object
    update the status (active/frozen) of each object 
```

请注意，在 while 循环的每次迭代中至少有一个对象被冻结。此外，每个对象都会被冻结一次。这些观察将在分析实际算法的运行时复杂度时使用。

## 算法

我们使用*时间*的概念来提高大多数操作的效率。时间从 0 开始测量，活动物体每移动一个单位需要 1 个单位时间。观察到，当我们在 time 时`t`，所有当前在 time 活动的物体的位移`t`，正好是`t`向下的单位。

请注意，在每一列中，每个单元格的相对顺序是固定的。其含义之一是每个单元格最多可以直接阻止另一个单元格下落。这种观察可以用来有效地预测下一次碰撞的时间。我们最多也可以“处理”每个单元格一次。

我们对列进行索引，从 1 开始，从左到右递增；以及高度从 1 开始的行。为了便于实现，引入一个名为`bottom`- 的新对象，它是唯一一个最初被冻结的对象，由高度为 0 的所有单元格组成。

**数据结构** 为了高效的实现，我们维护以下数据结构：

*   `A`包含每个单元格的最终位移的关联数组。如果一个单元格是活动的，它的条目应该是，比如说，`-1`。

*   对于每一列`k`，我们维护`S_k`列中活动单元格的初始行数集`k`。我们需要能够支持对这个集合的后继查询和删除。我们可以使用 Van Emde Boas 树，并回答中的每个查询`O(log log H)`；哪里`H`是网格的高度。或者，我们可以使用平衡二叉搜索树来执行这些操作`O(log N)`；其中`N`是 column 中的单元格数`k`。

*   一个优先级队列`Q`，它将存储活动单元格及其密钥作为其未来碰撞的预期时间。同样，我们可以使用 vEB 树来获取查询时间，`O(log log H)`也可以使用优先级队列来获取`O(log N)`每个操作的时间。

**执行**

该算法的详细伪代码如下：

```
Populate the S_k's with active cells
Initialize Q to be an empty priority queue

For every cell b in bottom:
    Push Q[b] = 0

while (Q is not empty):
    (x,t) = Q.extract_min()     // the active cell x collides at time t
    Object O = parent_object(x)
    For every cell y in O:
        A[y] = t                // freeze cell y at displacement t
        k = column(y)           
        S_k.delete(y)
        a = S_k.successor(y)    // find the only active cell that can collide with y
        if(a != nil):
            // find the expected time of the collision between a and y
            // note that both their positions are currently t + (their original height) 
            coll_t = t + height(a) - height(y) - 1
            Push/update Q[a] = coll_t 
```

可以通过查询`A`属于该对象的任何单元格的位移来获得任何对象的最终位置。

## 运行时间

我们只对每个细胞进行一次处理和冷冻。我们在冻结每个单元格的同时执行恒定数量的查找。我们假设`parent_object`查找可以在恒定时间内完成。整个算法的复杂性取决于`O(N log N)`或`O(N log log H)`取决于我们使用的数据结构。这里，`N`是所有对象的单元格总数。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-10T11:01:47.690

现在完全不同了:)

放在地上的每一块都是固定的。放在固定件上的每一件都是固定的。其余的可以移动。将未固定的部分向下移动 1 格，重复直到没有东西可以移动。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-10T00:56:10.000

我还没有清除所有细节，但我认为以下似乎是一种有点系统的方法：

1.  将整个图片视为图形，您需要的是所有顶点的拓扑排序 - 即项目。如果 A 的任何部分低于 B 的任何部分，则项目 A 应该在排序中的项目 B 之前。然后，当您对项目进行拓扑排序时，您可以按此顺序遍历它们并确定位置 - 作为所有项目在当前的下方已经有固定的位置。
2.  为了能够进行拓扑排序，您需要一个无环图。然后，您可以使用[强连通分量](http://en.wikipedia.org/wiki/Strongly_connected_component)的一些算法来查找所有循环并将它们压缩为单个顶点。然后您可以对结果图执行顶级排序。
3.  要在 SCC 中找到棋子的位置：首先将其视为一个大棋子并确定其最终位置。这将确定一些不能再移动的固定件。移除它们并对本 SCC 中的其余部分（如果有）重复相同的过程，以找出它们的最终位置。

第三部分是唯一看起来计算密集的部分——如果你有一个非常复杂的棋子结构，但它仍然应该比尝试一次移动一个网格的棋子更优化。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-10T04:24:43.390

好的，这似乎如下 -

*   我们一步一步地进行
*   在每一步中，我们构建一个有向图，其顶点是对象集，其边如下 =>

1) 如果 x 和 y 是两个对象，那么如果 x 在 y 移动之前不能移动，则添加一条边 x->y。请注意，我们可以同时拥有 x->y 和 y->x 边。

2）还有一些物体因为它们在底部而不能再移动，所以我们将它们的顶点着色为蓝色。其余顶点为红色。

2）在有向图中，我们使用 Kosaraju 算法/Tarjan 算法等找到所有强连通分量。（如果您不熟悉 SCC，那么它们是非常强大的技术，您可以参考 Kosaraju 算法。）一旦我们得到 SCC我们将它们缩小到一个小顶点，即我们用单个顶点替换 SCC，同时保留所有外部（到 SCC）边。现在，如果 SCC 中的任何顶点为蓝色，则我们将新顶点着色为蓝色，否则为红色。这意味着如果一个对象不能在 SCC 中移动，那么没有一个可以。

3）你得到的图将是一个有向无环图，你可以进行拓扑排序。以顶部编号的递增顺序遍历顶点，只要您看到红色顶点并移动由顶点表示的对象。

继续此步骤，直到您无法再在步骤 3 中移动任何顶点。

如果两个对象 A 和 B 重叠，那么我们说它们相对于彼此不一致。为了证明正确性，请论证以下引理 1）“如果我移动一个 SCC，那么其中的任何对象都不会导致它们之间的不一致。” 2）“当我在步骤 3 中移动一个对象时，我不会导致不一致”

你现在面临的挑战将是正式证明正确性并找到合适的数据结构来有效地解决它。如果您需要任何帮助，请告诉我。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-09T23:30:19.373

编辑了几次。我认为这就是您需要做的所有事情：

1.  找到所有只能相互依赖的部分，并将它们组合成一个等效的更大部分（例如图片中的 the`T`和 backs `C`）。

2.  遍历所有的碎片，在它们撞到东西之前将它们向下移动到最大的方向。重复直到没有任何动作。

# ruby-on-rails - Rspec 测试失败

> ID：11404662
> 
> 赞同：1
> 
> 时间：2012-07-09T23:24:30.120
> 
> 标签：ruby-on-rails, rspec

以下控制器测试失败，我不知道为什么：

```
describe "GET 'index'" do 

    before(:each) do 
        @outings = FactoryGirl.create_list(:outing, 30)
        @user = FactoryGirl.create(:user)
    end 

    it "should be successful" do 
        get :index
        response.should be_success
    end 

end 
```

Rspec 提供了（相当无用的）错误：

```
Failure/Error: response.should be_success
   expected success? to return true, got false 
```

这也是实际控制器的代码：

```
def index
    if @user
        @outings = Outing.where(:user_id => @user.id)
        @outing_invites = OutingGuest.where(:user_id => @user.id)
     else
        flash[:warning] = "You must log in to view your Outings!"
        redirect_to root_path
     end 
end 
```

任何人都知道是什么导致我的测试失败？我认为它可能与 Outing Controller 中的条件有关，但我不知道通过测试会是什么样子......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T23:52:28.717

您在两个单独的类之间混淆了实例变量 - 控制器是它自己的类，而规范是它自己的类。他们不共享状态。你可以试试这个简单的例子来更好地理解......

```
def index
    // obvious bad code, but used to prove a point
    @user = User.first
    if @user
        @outings = Outing.where(:user_id => @user.id)
        @outing_invites = OutingGuest.where(:user_id => @user.id)
     else
        flash[:warning] = "You must log in to view your Outings!"
        redirect_to root_path
     end 
end 
```

我猜这`FactoryGirl.create_list(:outing, 30)`不会创建将第一个用户与郊游相关联的郊游，因为您在创建郊游之后创建用户，因此您`Outing.where`也会失败。

Its important to understand that when you are including the database in your test stack the database needs to contain the data in the way the test expects. So if your controller is querying for outings belonging to a specific user your spec needs to setup the environment such that the user the controller will retrieve (in this case, the terrible line with `User.first` from my example) will also have the outings associated with it that the specification is expecting.

# sql - SQL 更新表中的最新信息，而不是所选记录的最新信息

> ID：11404664
> 
> 赞同：0
> 
> 时间：2012-07-09T23:24:53.927
> 
> 标签：sql, sql-server-2005, max

我需要更新过去 14 天内未参加的会员记录。有两个表：成员和出席。如果最近 14 天的 Attend_Freq 小于 5，我需要使用最新的“Last_Attend_Date”更新会员记录。

```
 Members table:
 ID     Attend_Freq     Last_Attend_Date
123        4              2012-7-5  -- This is the result of the query, the most 
                                       recent date in the table instead of the 
                                       most recent for the member

 Attendance
 ID     Member_ID       Last_Attend_Date
 987      123               2012-6-5
 888      123               2012-6-4
 567      123               2012-6-3
 456      234               2012-6-30
1909      292               2012-7-5 
```

这是查询，但它给了我出席表中最新的 Last_Attend_Date，而不是我需要更新的成员的最新日期。

```
 UPDATE M
 SET Last_Attend_Date = 
 (SELECT Max(Last_Attend_Date) FROM Attendance A 
 JOIN Members M ON A.Member_ID = M.ID 
 WHERE A.Member_ID =M.id )
 FROM Members M
 JOIN Attendance A on A.Member_ID = M.id
 WHERE Attend_Freq <'5' and Last_Attend_Date <getdate()-14 and A.Member_ID = M.ID 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T06:25:24.717

问题是您没有将子查询与外部查询相关联。它有助于为所有涉及的表使用不同的别名，并且`Members`子查询内部的连接似乎没有必要：

```
create table Members (ID int not null,Attend_Freq int not null,Last_Attend_Date datetime not null)
insert into Members (ID,Attend_Freq,Last_Attend_Date) values
(123,4,'19000101')

create table Attendance (ID int not null,Member_ID int not null,Last_Attend_Date datetime not null)
insert into Attendance (ID,Member_ID,Last_Attend_Date) values
(987,123,'20120605'),
(888,123,'20120604'),
(567,123,'20120603'),
(456,234,'20120630'),
(1909,292,'20120705')

update M
set
    Last_Attend_Date =
        (select MAX(Last_Attend_Date)
            from Attendance A2
        where A2.Member_ID = M.ID) --M is a reference to the outer table here
from
    Members M
        inner join
    Attendance A
        on
            M.ID = A.Member_ID
where
    m.Attend_Freq < 5 and
    A.Last_Attend_Date < DATEADD(day,-14,CURRENT_TIMESTAMP)

select * from Members 
```

结果：

```
ID          Attend_Freq Last_Attend_Date
----------- ----------- ----------------
123         4           2012-06-05 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T11:10:31.920

使用该[`ROW_NUMBER()`](http://msdn.microsoft.com/en-us/library/ms186734.aspx "ROW_NUMBER (Transact-SQL)")功能，您可以对每个成员的所有出勤记录进行排名，从最新的开始，然后，对于每个成员，如果是两周前的一天，则获取最新的（即排名最高的）记录。使用结果（例如在连接的帮助下），您现在可以更新`Members`表，另外检查是否`Attend_Freq < 5`：

```
WITH AttendanceRanked AS (
  /* rank the rows per attendance date (in descending order) */
  SELECT
    *,
    rnk = ROW_NUMBER() OVER (PARTITION BY Member_ID
                                 ORDER BY Last_Attend_Date DESC)
  FROM Attendance
),
LastAttendance AS (
  /* get the latest attendance records per member */
  SELECT *
  FROM AttendanceRanked
  WHERE rnk = 1
    AND Last_Attend_Date <= DATEADD(DAY, -14, GETDATE())
)
/* join the latest attendance records with Members and
   update those members that match the additional condition */
UPDATE m
SET Last_Attend_Date = a.Last_Attend_Date
FROM Members m
  INNER JOIN LastAttendance a ON m.Member_ID = a.Member_ID
WHERE m.Attend_Freq < 5
; 
```

# java - 尝试查看所有 XML 文件的图形布局时出现 StackOverFlowError

> ID：11404672
> 
> 赞同：0
> 
> 时间：2012-07-09T23:25:56.917
> 
> 标签：java, android, eclipse, eclipse-adt

昨天，我的应用程序中的 xml 文件的图形布局工作正常，但今天每当我尝试查看任何 xml 文件的图形布局时，我都会收到此错误：

```
main.xml: java.lang.StackOverflowError
java.lang.StackOverflowError

java.lang.StackOverflowError
at java.util.regex.Pattern.atom(Pattern.java:1969)
at java.util.regex.Pattern.sequence(Pattern.java:1851)
at java.util.regex.Pattern.expr(Pattern.java:1769)
at java.util.regex.Pattern.compile(Pattern.java:1477)
at java.util.regex.Pattern.<init>(Pattern.java:1150)
at java.util.regex.Pattern.compile(Pattern.java:840)
at java.lang.String.split(String.java:2304)
at java.lang.String.split(String.java:2346)
at com.android.ide.common.resources.ResourceResolver.findResValue(ResourceResolver.java:206)
at com.android.ide.common.resources.ResourceResolver.resolveResValue(ResourceResolver.java:325)
at com.android.ide.common.resources.ResourceResolver.resolveResValue(ResourceResolver.java:333)
at ... 
```

它一直在重复这行：com.android.ide.common.resources.ResourceResolver.resolveResValue(ResourceResolver.java:333)

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T23:50:21.727

我猜（这里没有发布代码）你的`RegEx`. 由于递归调用，可能存在重复`RegEx`的交替路径。`StackOverflowError`如果可能，请按照[此](https://stackoverflow.com/questions/7509905/java-lang-stackoverflowerror-while-using-a-regex-to-parse-big-strings)问题尝试发布您的代码。

# javascript - jQuery click 事件触发两次

> ID：11404674
> 
> 赞同：4
> 
> 时间：2012-07-09T23:26:02.560
> 
> 标签：javascript, jquery

我正在开发的内容覆盖脚本有问题。似乎我的关闭事件触发了两次，但第一次返回“未定义”（或第二次，取决于您单击的打开链接）。

您可以在 JSFiddle 上找到一个精简的工作示例：http: [//jsfiddle.net/UhSLy/2/](http://jsfiddle.net/UhSLy/2/)

如果您单击*1\. 单击*，然后*单击 2\. 单击*它会先警报*undefined*，然后再单击*Dummy*。

当我删除一个打开链接时，一切正常。但是我必须有多个链接，因为它们会打开不同的叠加层。

是什么导致了问题，我该如何避免？

编辑：来自 JSFiddle 的代码如下：

```
;(function ($, window, document, undefined) {

"use strict";

var pluginName = 'contentOverlay',
    defaults = {
        property:   'value'
    };

function Plugin(element, options) {
    this.element = element;
    this.$element = $(element);

    this.options = $.extend({}, defaults, options);

    this.init();
}

Plugin.prototype = {

    /**
     * Init
     */
    init: function () {
        var self = this;

        // Bind opening method
        this.$element.click(function() {
            self.open();
        });

        // Bind closing method
        $('#close').click(function() {
            self.close();
        });
    },

    /**
     * Open
     */
    open: function () {
        this.overlay = 'Dummy';
    },

    /**
     * Close
     */
    close: function () {
        alert(this.overlay); // <==== PROBLEM: fires twice. returns 'undefined' once
    },

};

$.fn[pluginName] = function (options) {
    return this.each(function () {
        if (!$.data(this, 'plugin_' + pluginName)) {
            $.data(this, 'plugin_' + pluginName,
                new Plugin(this, options));
        }
    });
}

$(function () {
    $('.open').contentOverlay();
});

})(jQuery, window, document); 
```

​</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T23:33:42.880

```
$('#close').click(function() {
    self.close();
}); 
```

您将两个对象`close()`方法绑定到关闭处理程序。基本上，当您单击关闭按钮时，它会运行两个功能，一个用于每个覆盖对象。因为一个覆盖对象不存在，所以它正在返回`undefined`.

您可以通过以下方式解决此问题：

```
close: function () {
    if(this.overlay != undefined){ // Skips over the undefined overlays
        alert(this.overlay);
    }
} 
```

**演示：http:** [//jsfiddle.net/UhSLy/9/](http://jsfiddle.net/UhSLy/9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T23:49:13.210

如果我可以建议在这里查看：http: [//jsfiddle.net/PgbfN/25/](http://jsfiddle.net/PgbfN/25/)

我认为您的这种`if`情况是检查插件是否已初始化，`undefined`因此会运行两次。

为了解决我添加`isApplied`的标志，一旦应用将标志设置为`true`. 休息希望演示会有所帮助`:)`

希望能帮助到你

```
$.fn[pluginName] = function(options) {
        return this.each(function() {
            alert('me ==> ' + (!$.data(this, 'plugin_' + pluginName)) + " ==== " + $.data(this, 'plugin_' + pluginName));
            if (!isApplied) {
                $.data(this, 'plugin_' + pluginName, new Plugin(this, options));

            }
        });
    } 
```

**完整代码**

```
var isApplied = false;

(function($, window, document, undefined) {

    "use strict";

    var pluginName = 'contentOverlay',
        defaults = {
            property: 'value'
        };

    function Plugin(element, options) {
        this.element = element;
        this.$element = $(element);

        this.options = $.extend({}, defaults, options);
        isApplied = true;
        this.init();
    }

    Plugin.prototype = {

        /**
         * Init
         */
        init: function() {
            var self = this;

            // Bind opening method
            this.$element.click(function() {
                self.open();
            });

            // Bind closing method
            $(document).on('click', '#close', function() {
                alert('Close is clicked');
                //self.close(); //<<== Is called
            });
        },

        /**
         * Open
         */
        open: function() {
            this.overlay = 'Dummy';
        },

        /**
         * Close
         */
        close: function() {
            alert(this.overlay); // <==== PROBLEM: fires twice. returns 'undefined' once
        },

    };

   $.fn[pluginName] = function(options) {
        return this.each(function() {
            alert('me ==> ' + (!$.data(this, 'plugin_' + pluginName)) + " ==== " + $.data(this, 'plugin_' + pluginName));
            if (!isApplied) {
                $.data(this, 'plugin_' + pluginName, new Plugin(this, options));

            }
        });
    }

    $(function() {
        $('.open').contentOverlay();
    });

})(jQuery, window, document); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T00:13:32.307

我想出了这个（只有这里的变化）

```
open: function () {
        this.overlay = 'Dummy';
        this.opened=true;
},

$('#close').click(function() {
    if(self.opened) 
    {
        self.opened=false;
        self.close();
    }    
}); 
```

I think code explains everything. The `close` event will never fire if an instance doesn't exist.

[**DEMO.**](http://jsfiddle.net/UhSLy/11/)

# c++ - 顺时针递增我的球坐标

> ID：11404683
> 
> 赞同：0
> 
> 时间：2012-07-09T23:27:33.253
> 
> 标签：c++, opengl

我正在围绕一个球体发射一个射弹。我的代码以逆时针方向移动它就好了。但是，我希望它改为顺时针方向移动。

我猜这是调整我的数学的问题。

```
// these are my stepping and incrementing variables

int goose1_egg1_step = 1;
int &r_goose1_egg1_step = goose1_egg1_step;
float goose1_egg1_divider = 17500;

// the starting theta/phi values are: 5 and 5

int goose1_egg1_theta=5;
int goose1_egg1_phi=5;

// the ending theta/phi values are: 7 and 1
// there is a difference of 2 between the start and end theta values
// there is a difference of 4 between the start and end phi values

float goose1_egg1_theta_increment = 2/goose1_egg1_divider;
float goose1_egg1_phi_increment = 4/goose1_egg1_divider; 
```

这是我的函数，它用球体显示每帧的更新坐标：

```
if (goose1_egg1_step < goose1_egg1_divider)
{
    float goose1_egg1_theta_math = (goose1_egg1_theta+(goose1_egg1_theta_increment* r_goose1_egg1_step))/10.0*M_PI;
    float goose1_egg1_phi_math = (goose1_egg1_phi-(goose1_egg1_phi_increment* r_goose1_egg1_step))/10.0*2*M_PI;
    r_goose1_egg1_x = Radius * sin(goose1_egg1_theta_math) * cos(goose1_egg1_phi_math);
    r_goose1_egg1_y = Radius * sin(goose1_egg1_theta_math) * sin(goose1_egg1_phi_math);
    r_goose1_egg1_z = Radius * cos(goose1_egg1_theta_math); 

    glPushMatrix();
    glTranslatef(r_goose1_egg1_x,r_goose1_egg1_y,r_goose1_egg1_z);
    glColor3f (1.0, 0.0, 0.0);
    glutSolidSphere (0.075,5,5);
    glEnd();
    glPopMatrix();
} 
```

这是我增加步长值的方法：

```
if (r_goose1_egg1_step < goose1_egg1_divider)       
{
    ++(r_goose1_egg1_step);
}    
else
    r_goose1_egg1_step=1; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T23:49:23.747

即使您在谈论球体中的“顺时针运动”，当它只在平面上对我有意义时，在我看来，您想要的只是通过更改您创建的两条线中的信号来`goose1_egg1_theta_math`完成`goose1_egg1_phi_math`，像这样：

```
 float goose1_egg1_theta_math = (goose1_egg1_theta-(goose1_egg1_theta_increment* r_goose1_egg1_step))/10.0*M_PI;
    float goose1_egg1_phi_math = (goose1_egg1_phi+(goose1_egg1_phi_increment* r_goose1_egg1_step))/10.0*2*M_PI; 
```

这应该反转您增加球坐标的方式，为您提供您正在寻找的“逆时针”运动。

# php - 如何使用 jquery ajax 显示 unicode 字符？

> ID：11404685
> 
> 赞同：0
> 
> 时间：2012-07-09T23:28:07.170
> 
> 标签：php, jquery, ajax

这是背景。我尝试在以下代码中使用 php、ajax 和 jquery 从 mysql 服务器检索 unicode 字符。

```
 $.post("test.php",{tableName: A_table}, function(data)
    {
         $.each($(data), function(key, value)
         {
            display data into an UL List and not display weird unicode characters, like            00101C
         }

    }); 
```

根据上面的代码，我如何获得 unicode 字符来显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T23:32:20.307

您应该强制`charset`您的响应标题为`UTF-8`（或其他适合您需要的字符集），或者您之前可以使用[mb_convert_encoding在服务器端转换所有 unicode 字符](http://php.net/manual/en/function.mb-convert-encoding.php)

示例（取自手册页）

```
<?php
$text = "A strange string to pass, maybe with some ø, æ, å characters.";

foreach(mb_list_encodings() as $chr){
    echo mb_convert_encoding($text, 'UTF-8', $chr)." : ".$chr."<br>";   
}
?> 
```

# java - JGroups、兵马俑和榛树

> ID：11404688
> 
> 赞同：15
> 
> 时间：2012-07-09T23:28:31.987
> 
> 标签：java, cluster-computing, terracotta, hazelcast, jgroups

试图围绕这 3 个项目展开思考，它们似乎都处理了尝试集群时出现的略有不同的问题。但是他们的所有文档都是为已经“知道”的开发人员编写的，对于像我这样的新手来说很难理解。

*   他们每个人都试图解决的具体问题是什么，这些问题彼此有何不同？
*   它们各自的集群与集群应用服务器（如 JBoss 或 GlassFish 的内置集群功能）有何不同？
*   这些框架解决的问题是否不同，足以保证它们在同一个项目中的使用？或者他们是彼此的竞争对手，因此对相同/相似的问题有不同的解决方案？

提前感谢您对这些奇怪但难以捉摸的框架的任何洞察！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-10T02:56:56.693

jgroups 更多的是关于任务分配和集群管理，而 hazelcast/terracotta 更多的是分布式缓存（数据网格）——当你比较所有功能时，它们之间肯定有重叠——你需要弄清楚哪些功能更重要，也许更容易实现.

hazelcast 允许通过基于 tcp 的寻址或多播进行集群。它支持地图、多地图、列表、队列、主题——对于基于磁盘的备份，您必须实现加载/存储接口。

使用 EhCache，您可以将 JGroups、JMS 或 RMI 复制用于缓存。

简而言之，如果您正在寻找分布式数据缓存/网格，hazelcast 或 ehcache 将是查看的工具 - 如果您正在寻找使用库的任务分配而不关心现有的数据网格缓存，则 JGroups 可以工作为你。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-11-25T14:30:37.713

可以区分两类技术：*i．*启用程序（即中间件 API）和*ii。*端到端或即用型解决方案（即应用 API）。

JGroups 是一种使能技术，因为它的核心实现了可靠的单播、多播和广播等[组通信原语，它们是更复杂的分布式协议（如](http://www.cs.nuim.ie/~dkelly/CS402-06/Group%20Communication.htm)[原子广播](https://en.wikipedia.org/wiki/Atomic_broadcast)）的构建块；它属于[组通信工具包（GCTs）](https://en.wikipedia.org/wiki/Group_communication_system)的类别。

Hazelcast 和 Terracotta 是端到端服务技术，因为它们为分布式应用程序提供了丰富的服务集；属于[内存数据网格 (IMDG)](https://dzone.com/articles/memory-data-grids)类别，也称为分布式和内存缓存解决方案，非常适合以低延迟计算数据。

在能力方面：

*   **JGroups**提供了一组原语来启用组成员身份，这是任何集群场景中的一个关键概念，其中必须根据生命周期和角色管理一组加入/离开参与者/节点；它允许基于协议内核设计创建一组丰富的协议，方法是在基础 API（如所说的组成员资格）上堆叠微协议，这些协议依赖于 TCP 和 UDP* 上的消息的可靠分发。开箱即用，JGroups 不提供任何复合服务：此类服务可以构建在提供的基本功能之上。*

*   **Hazelcast**提供了一组丰富的分布式数据结构，可以通过隐式复制因子进行完全复制或分片；分布式列表、映射、队列和锁是使用 Java 集合接口实现的基本数据结构的示例，显然分布和复制隐含需要由其引擎提供的组成员服务，特别是由[具有 Cloud Discovery SPI](https://blog.hazelcast.com/hazelcast-discovery-spi/)模块的集群管理器提供. Hazelcast 可以通过IP Multicast、IP Multicast with TCP 和第3 方云服务（例如Zookeeper）实现Group Membership 管理。Hazelcast 可能会使用 JGroups 服务进行节点发现和集群管理（也称为组成员服务）。

*   **另一方面，Terracotta 如果与流行的 Ehcache 相关联，则它提供了分布式缓存服务，该服务又基于一组基本的组成员资格功能**；**在实现方面，[Terracotta Ehcache 可能基于 JGroups 服务](https://www.ehcache.org/documentation/2.7/replication/jgroups-replicated-caching.html)并提供一组特定于缓存系统的特定 API，因此不如 Hazelcast 通用。**

 **考虑到这两种技术之间的关系，JGroups 实际上是*复合服务（即语义丰富的 API）的**支持服务*（即构建块）， 例如 Hazelcast 和 Terracotta，它们为 3rd 提供端到端或即用型服务派对应用程序，在幕后管理所有可靠的分发方面。当然，JGroups 是一个中间件，Hazelcast 和 Terracotta 是可以嵌入自己的集群服务中间件实现的应用程序。**

# jquery - jQuery：如何为当前单击的按钮选择表单元素？

> ID：11404689
> 
> 赞同：0
> 
> 时间：2012-07-09T23:28:47.050
> 
> 标签：jquery

我在这里有一个 jsfiddle - [http://jsfiddle.net/9kKXX/3/](http://jsfiddle.net/9kKXX/3/)

**要求**

每个表单都有一堆动态数据，如视频 ID、标题、视图，我想根据单击的“新建”按钮发送到后端

我怎样才能做到这一点？

小提琴是正确提醒视频的标题，例如

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T23:37:41.647

只需选择父表单，然后您可以从那里选择表单中的其他元素

```
$(function() {
    $('form input[type="text"]').live('keyup', function() {
        var val = $.trim(this.value);
        $('.create-playlist-button', $(this).closest('form')).prop('disabled', val.length == 0);
    });
}); 
```

[http://jsfiddle.net/9kKXX/5/](http://jsfiddle.net/9kKXX/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T23:37:50.503

你可以这样做使用`.closest()`

喜欢：

```
$('form').on('submit', function(){
    console.log($(this).closest('.view-item').find('.title').html());
}); 
```

# c# - 使用简单的键字符串查找列表视图列索引

> ID：11404690
> 
> 赞同：1
> 
> 时间：2012-07-09T23:28:54.557
> 
> 标签：c#, listview

我为 ListView 中的 4 列中的每一列分配了描述性名称：头、嘴、鼻子、眼睛。如何使用该文本访问这些列？我很想找到一种方法来做到这一点，就像在 C 中所做的那样优雅简洁（使用#define）：

```
if (Column[MOUTH] == 6)... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T23:37:35.170

不是很优雅，但这应该可以工作（在这个例子中，我从 listView 中的第一个选定项目中获取文本。您也可以使用 listView.Items）

```
 string selectedItemMouthColumn = listView.SelectedItems[0].SubItems[listView.Columns.IndexOf(MOUTH)].Text; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-02T21:25:12.327

在创建列时包含该列的键。例如：

```
// C# - first string is column key, second is column title
MyListView.Columns.Add("Name","File Name");
MyListView.Columns.Add("Size","File Size"); 
```

然后，您可以使用键字符串来获取列索引。

```
var ColIndex = MyListView.Columns.IndexOfKey("Size"); 
```

或者：

```
// Example: Get name for first selected listview item:
ListView lv = MyListView;
string FName = lv.SelectedItems[0].SubItems[lv.Columns.IndexOfKey("Name")].Text; 
```

# c++ - 使用 boost::random 库获取整数随机值而不是实际值

> ID：11404693
> 
> 赞同：2
> 
> 时间：2012-07-09T23:29:49.437
> 
> 标签：c++, boost, boost-random

我正在尝试使用`boost::random`库获得真正的随机值。这是我的代码：

```
#include <iostream>

#include <boost/random/uniform_real_distribution.hpp>
#include <boost/random/mersenne_twister.hpp>

boost::random::mt19937 eng = boost::random::mt19937();
boost::random::uniform_real_distribution<double> urd =
   boost::random::uniform_real_distribution<double>(0,20);

for (int i = 0; i <= 100; i++)
   std::cout << urd(eng) << std::endl; 
```

但我得到 0 到 20 之间的整数。

我能怎么做？

我还尝试了另一个引擎：

```
#include <iostream>

#include <boost/random/uniform_real_distribution.hpp>
#include <boost/random/lagged_fibonacci.hpp>

boost::random::lagged_fibonacci607 eng = boost::random::lagged_fibonacci607();
boost::random::uniform_real_distribution<double> urd =
   boost::random::uniform_real_distribution<double>(0,20);

for (int i = 0; i <= 100; i++)
   std::cout << urd(eng) << std::endl; 
```

但什么都没有......（总是整数值）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T23:33:55.113

在输出之前设置精度怎么样？`std::cout.precision(15);`?

或使用：

```
std::cout.precision(std::numeric_limits<double>::digits10); 
```

**例子**

```
#include <iostream>
#include <limits>
#include <boost/random/uniform_real_distribution.hpp>
#include <boost/random/mersenne_twister.hpp>

int main()
{
    boost::random::mt19937 eng = boost::random::mt19937();
    boost::random::uniform_real_distribution<double> urd =
    boost::random::uniform_real_distribution<double>(0,20);

    std::cout.precision(std::numeric_limits<double>::digits10);
    for (int i = 0; i <= 100; i++)
    {
       std::cout << urd(eng) << std::endl;
    }
} 
```

的默认精度`std::cout`设置为`6`，所以它应该可以在不设置的情况下工作，但是......

# jquery - jQuery 可调整大小的 se 句柄位置

> ID：11404695
> 
> 赞同：1
> 
> 时间：2012-07-09T23:30:05.363
> 
> 标签：jquery, css, jquery-ui, resizable

我用自定义句柄制作了一个可调整大小的 div。一切正常，但想知道是否有办法修改“se”手柄的位置。它的默认位置在 div 内部，而其他句柄位于 div 外部。这是一个例子：

[http://jsfiddle.net/digitalaxis/aLxjF/](http://jsfiddle.net/digitalaxis/aLxjF/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T23:33:13.757

您可以覆盖css：

```
.ui-resizable-se {
    right: -5px;
    bottom: -5px;
} 
```

# ios - 使用 AVCaptureVideoDataOutput 录制视频

> ID：11404697
> 
> 赞同：1
> 
> 时间：2012-07-09T23:30:20.107
> 
> 标签：ios, avfoundation, avassetwriter

我不确定我应该在方法中添加什么

```
- (void) captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection *)connection; 
```

为了将帧写入视频。任何人都可以与我分享他们的这种方法的代码主体，结果是将帧记录到电影中吗？

我以为我的assetWriter 和videoInput 设置正确，但我得到的只是一帧重复使用的电影。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T15:13:12.907

检查 Apple 示例代码[Rosy Writer](http://developer.apple.com/library/ios/#samplecode/RosyWriter/Introduction/Intro.html#//apple_ref/doc/uid/DTS40011110)。它是您正在寻找的一个很好的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-07T15:35:16.707

您可以使用此方法成功地同时录制视频和抓帧：

```
AVCaptureSession *captureSession = [AVCaptureSession new];
AVCaptureDevice *captureDevice = [AVCaptureDevice new];
AVCaptureDeviceInput *deviceInput = [AVCaptureDeviceInput new];
AVCaptureVideoDataOutput *output = [AVCaptureVideoDataOutput new];

NSDictionary *outputSettings = [NSDictionary dictionaryWithObjectsAndKeys:
[NSNumber numberWithInt:640], AVVideoWidthKey, [NSNumber numberWithInt:480], AVVideoHeightKey, AVVideoCodecH264, AVVideoCodecKey, nil];
AVAssetWriterInput *assetWriterInput = [AVAssetWriterInput  assetWriterInputWithMediaType:AVMediaTypeVideo outputSettings:outputSettings];

/ AVCaptureVideDataOutput /
AVAssetWriterInputPixelBufferAdaptor *pixelBufferAdaptor =
           [[AVAssetWriterInputPixelBufferAdaptor alloc] 
                initWithAssetWriterInput:assetWriterInput 
                sourcePixelBufferAttributes:
                     [NSDictionary dictionaryWithObjectsAndKeys:
                          [NSNumber numberWithInt:kCVPixelFormatType_32BGRA], 
                           kCVPixelBufferPixelFormatTypeKey,
                     nil]];

/* Asset writer with MPEG4 format*/
AVAssetWriter *assetWriterMyData = [[AVAssetWriter alloc]
                                initWithURL:URLFromSomwhere
                                fileType:AVFileTypeMPEG4
                                error:you need to check error conditions,
                                      this example is too lazy];
[assetWriterMyData addInput:assetWriterInput];
assetWriterInput.expectsMediaDataInRealTime = YES;

/ Start writing data /

[assetWriterMyData startWriting];
[assetWriterMyData startSessionAtSourceTime:kCMTimeZero];
[captureSession startRunning];

- (void)        captureOutput:(AVCaptureOutput *)captureOutput 
    didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer 
           fromConnection:(AVCaptureConnection *)connection
{
    CVImageBufferRef imageBuffer = CMSampleBufferGetImageBuffer(sampleBuffer);

    // a very dense way to keep track of the time at which this frame
    // occurs relative to the output stream, but it's just an example!
    static int64_t frameNumber = 0;
    if(assetWriterInput.readyForMoreMediaData)
        [pixelBufferAdaptor appendPixelBuffer:imageBuffer
                         withPresentationTime:CMTimeMake(frameNumber, 25)];
    frameNumber++;
}

/* To stop recording, stop capture session and finish writing data*/

[captureSession stopRunning];
[assetWriterMyData finishWriting]; 
```

# google-docs-api - 集成 Google 文档 API

> ID：11404698
> 
> 赞同：1
> 
> 时间：2012-07-09T23:30:25.857
> 
> 标签：google-docs-api, google-drive-api

我刚开始编程，但我想知道是否可以使用 google docs api 使用 google docs 文本编辑器在另一个站点上制作文档？

有什么方法可以将谷歌文档文本编辑器放到网站上，这样我们就可以用它来创建文档而不是微型 mce？

基本上，所需的功能是创建、公开共享的文档、它的可发布版本（获取 html 代码）——因此它可以在文档显示页面上显示，并且

当然会有谷歌登录和一切，但我只是想看看这是否可行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:49:52.570

不，这是不可能的，对不起。

# c# - 950ko后文件写入不成功

> ID：11404701
> 
> 赞同：-1
> 
> 时间：2012-07-09T23:30:50.573
> 
> 标签：c#

我刚回到 c# 为我的一个项目创建一个 csv 到 sql 的翻译器。但是我遇到了一个奇怪的行为，我的谷歌搜索不成功，所以我需要你的帮助。

这是以下代码（为这个场合整理的，不要我的质量差，我不是 csharp 专家）

```
string line, generated;
System.IO.FileStream fs = new System.IO.FileStream("data.sql", System.IO.FileMode.Create);
System.IO.StreamWriter w = new System.IO.StreamWriter(fs, Encoding.UTF8);
System.IO.StreamReader file = new System.IO.StreamReader("source.txt", System.Text.Encoding.UTF8);
while ((line = file.ReadLine()) != null)
        {
            String[] ar = line.Split('|');
            generated = "INSERT INTO `translation` VALUES('" + ar[0] + "'," + ar[1] + ");";
            w.WriteLine(generated);
        }
// Closing file stuff 
```

文件创建成功，小文件大大生成。但是，当我在大文件上使用它时，结果文件被截断（总是在同一个地方，结果文件为 950ko~）

结果是这样的

```
INSERT INTO `translation` VALUES ( 'trans1', 1 );
INSERT INTO `translation` VALUES ( 'trans2', 2 );
INSERT INTO `translation` VALUES ( 'trans3', 3 );
INSERT INTO `tran 
```

我错过了 6 行。所以如果有人有想法，我会很乐意热切地听

PS：我可以通过分块我的源文件来轻松解决这个问题，但是我真的很好奇这个问题并且不能认为这是一个.Net问题，我一定做错了什么。

问候所有

结束的东西

```
w.Close();
file.Close();
fs.Close(); 
```

编辑：解决方案根据人们的建议，我的问题的解决方案如下

```
// Replacing my FileStream and StreamWriter by the following line
System.IO.StreamWriter w = new System.IO.StreamWriter("data.sql", false, System.Text.Encoding.UTF8);
// Removing the fs.Close() 
```

它现在就像一个魅力。我可以通过使用'using'关键字来避免调用 Close 函数（如 Mehrdad 所说），但我不喜欢添加额外的一组 {}（我的口味）

谢谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:20:16.990

我的问题的解决方案是：

```
string line, generated;
using(System.IO.StreamReader file = new System.IO.StreamReader("source.txt", System.Text.Encoding.UTF8)){
   using(System.IO.StreamWriter w = new System.IO.StreamWriter("data.sql", false, System.Text.Encoding.UTF8)){
     while ((line = file.ReadLine()) != null)
       {
        String[] ar = line.Split('|');
        generated = "INSERT INTO `translation` VALUES('" + ar[0] + "'," + ar[1] + ");";
        w.WriteLine(generated);
       }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T00:36:21.690

确保你`Flush`在`StreamWriter`“文件关闭的东西”之前。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T23:38:44.377

您确定要按顺序关闭`w`和`fs`（即以与打开相反的顺序）吗？

# javascript - 带有缩略图分页的 Jquery Cycle 插件

> ID：11404702
> 
> 赞同：0
> 
> 时间：2012-07-09T23:31:12.757
> 
> 标签：javascript, jquery, thumbnails, cycle

我正在尝试让 jQuery 循环插件在 CMS 中工作（因此标记混乱），并且除了分页缩略图之外一切正常。由于 CMS，我必须将缩略图的 URL 放入相应图像的类中。然后我试图提取这些 URL 并将它们用于分页按钮的图像。正在构建分页包装器，但每个分页按钮都是空的。不知道我做错了什么。

我在同一页面上也有多个循环幻灯片。

这是我的javascript：

```
 (function ($) {
    $('.gallery').each(function (i) {
        $(this).after('<div class="galleryNav galleryNav' + i + '">').cycle({
            fx: 'scrollHorz',
            speed: 'fast',
            timeout: 0,
            pager: '.galleryNav' + i,
            pagerAnchorBuilder: function (idx, slide) {
            var slideImg = $(slide).attr('class');

            if (slideImg == undefined){
            slideImg = "";
            };
            return '<div><a href="#" style="background-image:url(' + slideImg + ');"></a></div>';
            }
        });
    });
})(jQuery); 
```

这是我的 HTML：

```
<div class="row">
 <article class="galleryArticle">
      <div class="galleryWrap">
           <div class="gallery">
                <img src="image1.jpg" class="image1Thumb.jpg" alt="image1" />
                <img src="image2.jpg" class="image2Thumb.jpg" alt="image1" />
                <img src="image3.jpg" class="image3Thumb.jpg" alt="image1" />
                <img src="image4.jpg" class="image4Thumb.jpg" alt="image1" />
           </div>
      </div>
      <header>
           <h1 class="articleTitle">Title</h1>
           <h2 class="eventDate">Date</h2>
      </header>
      <div class="articleContent">Article Content</div>
 </article> 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T10:21:55.223

您为标签指定的类名 `img`无效

类名应以 . 然后是一个名字，但你给的名字是

```
image1Thumb.jpg its invalid 
```

像这样使用

在你的单子上

```
 .image1Thump { your styles goes here } 
```

在你的 html

```
<img src="image1.jpg" class="image1Thumb" alt="image1" /> 
```

然后它应该工作。

# java - 云中的傀儡？

> ID：11404703
> 
> 赞同：0
> 
> 时间：2012-07-09T23:31:18.167
> 
> 标签：java, cloud, puppet, rackspace-cloud, jclouds

是否可以使用 JClouds 在云上实例化新虚拟机的 Puppet 设置，然后通过 Puppet 定义和实现它们的配置（软件堆栈）？

或者 Puppet 的本质是否存在某种固有的东西，阻止了它在 AWS、RackSpace 或 Heroku 等云提供商上的使用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T08:55:13.260

这里涉及两个独立的问题：在云节点上引导 puppet 和在它们之间进行编排（例如，使用数据库的 IP 地址配置应用程序服务器）。

对于引导，有很多可用的工具；AWS CloudFormation 可以使用用户数据进行集成，CloudInit（Ubuntu、ec2-linux AMI 和许多 EL 映像上的默认设置）支持开箱即用的引导 puppet。Puppetlabs 提供[云供应](http://docs.puppetlabs.com/guides/cloud_pack_getting_started.html)商，最后是[Cloudify](http://www.cloudifysource.org/)。除了 CloudFormation 和 Cloudify，大多数工具在引导后不管理您的堆栈，也不提供编排。CloudFormation 本身只提供启动时编排功能，而且非常蹩脚。Puppet 本身在编排方面缺乏（例如与 Chef 出色的搜索功能相比）

Cloudify provides ongoing stack management and fancy orchestration exposed via Puppet integration module. This gives you the ability to pass information between nodes (for service discovery, credential distribution, etc.) and bootstrap your entire system with one command. Plus it supports most clouds in existence.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-10T08:13:19.820

Puppet 是配置云基础设施的绝佳选择，大多数云提供商允许您在首次启动时调用脚本（Ec2 具有用户数据），您可以让此脚本插入一些节点类型的数据，然后克隆 puppet 存储库并应用它，如果您不想运行 puppet master 服务（设置和维护可能很麻烦），您还可以使用 git 将更新推送到配置，甚至在配置更改时生成新图像以允许快速节点启动你最新的设置。看看这个[博客](http://onemanandthecloud.blogspot.co.uk/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T19:23:46.097

我知道的唯一直接宣布 puppet + jclouds 集成的开源工具是 Apache Whirr，但这主要是通过[puppet 应用](https://github.com/apache/whirr/blob/trunk/recipes/puppet-http.properties)与服务器。

由于 puppet 现在有一个[restful 界面](http://docs.puppetlabs.com/guides/rest_api.html)，应该可以像我们为[chef](https://github.com/jclouds/jclouds-chef)一样在 jclouds 中创建原生 puppet 支持。欢迎您帮助[定义](https://groups.google.com/forum/#!forum/jclouds-dev):)

同时，您可以使用 whirr 之类的东西，或者制作指令并在节点创建期间通过 jclouds [TemplateOptions.runScript将它们作为 shell 脚本提供，或者稍后使用](http://demobox.github.com/jclouds-maven-site-1.5.3/1.5.3/jclouds-multi/apidocs/org/jclouds/compute/options/TemplateOptions.html#runScript%28org.jclouds.scriptbuilder.domain.Statement%29)[submitScriptOnNode](http://demobox.github.com/jclouds-maven-site-1.5.3/1.5.3/jclouds-multi/apidocs/org/jclouds/compute/ComputeService.html#submitScriptOnNode%28java.lang.String,%20org.jclouds.scriptbuilder.domain.Statement,%20org.jclouds.compute.options.RunScriptOptions%29)命令（两者目前都通过 ssh 运行）。

# linux - 如何在被单引号包围的 awk 语句中使用单引号？

> ID：11404704
> 
> 赞同：4
> 
> 时间：2012-07-09T23:31:20.720
> 
> 标签：linux, bash, awk, hp-ux

我在实现脚本所需的这个 awk 语句时遇到问题：

```
rsh fooDNS '
    ...

    BROADCAST_IP_ADDRESS=$(/usr/sbin/ifconfig $IF_NAME | grep broadcast |  awk '{print \$6}')
    ...
' 
```

这里的问题是上面的语句包含在一个用单引号括起来的 rsh 命令中。因此，bash 无法解释 {print $6} 周围的单引号，这给我带来了很多问题。到目前为止，我还无法确定如何解决这个问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T23:52:24.833

不能嵌套单引号，但可以结束单引号字符串，包含转义的单引号，然后重新输入引号。试试这个：

```
rsh fooDNS '
    ...

    BROADCAST_IP_ADDRESS=$(/usr/sbin/ifconfig $IF_NAME | grep broadcast |  awk '\''{print $6}'\'')
    ...
' 
```

尽管如此，这种引用疯狂很快就会变得丑陋。如果可能的话，我建议使用 scp/rcp/ftp 将一个普通的 bash 脚本复制到远程，然后运行它。如果做不到这一点，我认为如果你不需要向脚本的标准输入提供任何东西，你可以使用这样的技巧：

```
cat script_file | rsh fooDNS bash 
```

（当然，`rsh fooDNS /bin/sh`如果您的脚本是纯`sh`兼容的并且远程端没有 bash，则使用该脚本。）

作为另一种选择，如果您的代码段很短，您可以在此处使用文档：

```
rsh fooDNS sh <<'EOF'
    ...
    BROADCAST_IP_ADDRESS=$(/usr/sbin/ifconfig $IF_NAME | grep broadcast |  awk '{print $6}')
    ...
EOF 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T23:55:45.590

`'\''`每次用序列替换嵌入的单引号。理论上，你可以这样做：

```
rsh fooDNS '
    ...
    BROADCAST_IP_ADDRESS=$(/usr/sbin/ifconfig $IF_NAME | grep broadcast |
    awk '\''{print $6}'\'')
    ...
' 
```

第一个`'`结束当前的单引号字符串；该`\'`序列添加一个单引号；final`'`重新启动一个新的（但连续的）单引号字符串。所以，这不会引入空格或任何东西。

另一方面，最好避免这样做。当重新解释字符串时，它很容易引起问题。在处理远程 shell 时更是如此。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T00:32:26.493

我通常在手动操作时使用双引号进行深度嵌套，或者自动混合使用双引号和单引号。

如果您手动执行此操作，则使用反斜杠转义嵌套的双引号、撇号和美元符号可能更简单，并避免执行超过一两层的深度。

有时，我不会手动嵌套引号，而是使用： [http](http://stromberg.dnsalias.org/~strombrg/bashquote.html) ://stromberg.dnsalias.org/~strombrg/bashquote.html 它可以自动以指数方式用双引号包裹一个字符串。它混合使用双引号和单引号。

例如。从代码的最小测试：

```
dstromberg@zareason-limbo6000a ~/src/home-svn/bashquote/trunk $ ./bashquote.py
unquoted: 'This is a test'
repetition 0: ''"'"'This is a test'"'"''
repetition 1: ''"'"''"'"'"'"'"'"'"'"'This is a test'"'"'"'"'"'"'"'"''"'"''
repetition 2: ''"'"''"'"'"'"'"'"'"'"''"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'This is a test'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"''"'"'"'"'"'"'"'"''"'"''
Final version: ''"'"''"'"'"'"'"'"'"'"''"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'This is a test'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"''"'"'"'"'"'"'"'"''"'"''
''"'"''"'"'"'"'"'"'"'"''"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'This is a test'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"'"''"'"'"'"'"'"'"'"''"'"'' 
```

这对于跳过 3 个 ssh 并在 4 日执行应该是有好处的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T00:49:44.073

对于 AWK 脚本，我将变量设置为等效的八进制。

但在像你这样的情况下，我会使用双引号，并确保像你所做的那样转义 shell 可能解释的所有内容，例如美元符号。

而且我不会使用`rsh`，因为它不安全。

# javascript - Jquery 文件上传插件进度条

> ID：11404705
> 
> 赞同：3
> 
> 时间：2012-07-09T23:31:23.687
> 
> 标签：javascript, jquery

[这个插件](https://github.com/blueimp/jQuery-File-Upload/wiki)管理网页中的文件上传，并且可以在上传过程中添加很多 UI 元素。

您创建一个输入文件类型元素，然后绑定 js 文件，使用实例化代码和 walla。有用于完成不同功能的选项和 API 说明。

**问题：**

我想为文件上传实现一个进度条，但到目前为止，文档中还没有关于如何做到这一点的真正说明。

我找到了一个选项，您可以通过将此代码粘贴到以下位置来设置：

```
progress: function (e, data) {
var progress = parseInt(data.loaded / data.total * 100, 10); } 
```

但这样做并没有改变任何东西。懂javascript的人可以帮我看看如何实现进度条吗？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T16:56:37.700

好的，在与 Github 上插件的程序员交谈后，他在文档中添加了一个部分，以包含实现基本设置进度条的说明。

我和他之间的会议在这​​里：[https ://github.com/blueimp/jQuery-File-Upload/issues/1451#issuecomment-6869829](https://github.com/blueimp/jQuery-File-Upload/issues/1451#issuecomment-6869829)

文档中的解决方案在这里：[https ://github.com/blueimp/jQuery-File-Upload/wiki/Basic-plugin](https://github.com/blueimp/jQuery-File-Upload/wiki/Basic-plugin)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T00:22:56.923

来自[https://github.com/blueimp/jQuery-File-Upload/wiki/Extended-progress-information](https://github.com/blueimp/jQuery-File-Upload/wiki/Extended-progress-information)看起来 jQuery UI 版本与插件的 jQuery 基本版本不同。您使用的是哪个版本？您显然可以在该页面上看到在基本 jQuery 版本中访问信息的方法，并声称在 UI 版本中您可以自动获取进度信息。

# javascript - 如何使用 jQuery 找到一组元素的父级？

> ID：11404707
> 
> 赞同：3
> 
> 时间：2012-07-09T23:32:03.673
> 
> 标签：javascript, jquery

鉴于此标记：

```
<div class="some_container">
  <p>...</p>
  <p>...</p>
  <p>...</p>
  <p>...</p>
  <p>...</p>
  <p>...</p>
  <p>...</p>
</div> 
```

无论如何，我是否可以使用基本上意味着的规则在 jQuery（或 javascript）中查询集合的父级：

```
Return the parent element that contains 4 or more <p> tags 
```

或者

```
Return a collection of all <p> tags with 4 or more siblings 
```

……然后我就可以打电话`.parent()`了？

我不能简单地搜索，`<div>`因为它在我的用例中是可变的（不同的 id、类，有时甚至不是`<div>`容器）。我需要一种方法来查找一组相关元素，然后找到该集合的父级。这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T23:38:24.657

nth-of-type 可能是您正在寻找的。就像是：

```
$("p:nth-of-type(4)").parent() 
```

这将获取一组元素，每个元素至少有 4 个段落元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T23:39:17.917

```
if ($('p').siblings('p').length > 4) 
{
     // Yay!!!
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T23:39:26.307

我不认为它太高效，但它比查找所有`p`标签和检查兄弟姐妹要快得多：

```
var parents = $("div").filter(function() {
    return $(this).children('p').length > 4;            
}); 
```

# c++ - boost::asio 异步条件

> ID：11404710
> 
> 赞同：6
> 
> 时间：2012-07-09T23:32:42.847
> 
> 标签：c++, multithreading, boost, boost-asio

这个想法是能够在消费者/生产者问题上用 boost::asio 和线程池替换多线程代码。当前，每个消费者线程都在等待`boost::condition_variable`- 当生产者向队列中添加某些内容时，它会调用`notify_one`/`notify_all`来通知所有消费者。现在，当您（可能）拥有 1k+ 消费者时会发生什么？线程不会扩展！

我决定使用`boost::asio`，但后来我发现它没有条件变量。然后`async_condition_variable`诞生了：

```
class async_condition_variable
{
private:
    boost::asio::io_service& service_;
    typedef boost::function<void ()> async_handler;
    std::queue<async_handler> waiters_;

public:
    async_condition_variable(boost::asio::io_service& service) : service_(service)
    {
    }

    void async_wait(async_handler handler)
    {
        waiters_.push(handler);
    }

    void notify_one()
    {
        service_.post(waiters_.front());
        waiters_.pop();
    }

    void notify_all()
    {
        while (!waiters_.empty()) {
            notify_one();
        }
    }
}; 
```

基本上，每个消费者都会调用`async_condition_variable::wait(...)`. 然后，生产者最终会调用`async_condition_variable::notify_one()`or `async_condition_variable::notify_all()`。每个消费者的句柄都会被调用，并且会根据条件采取行动或`async_condition_variable::wait(...)`再次调用。这是可行的还是我在这里疯了？鉴于这将在线程池上运行，应该执行哪种锁定（互斥锁）？

PS：是的，这更像是一个 RFC（征求意见）而不是一个问题 :)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T00:26:17.200

列出事件发生时需要做的事情。具有向该列表添加某些内容的功能以及从该列表中删除某些内容的功能。然后，当事件发生时，让一个线程池处理现在需要完成的作业列表。您不需要专门等待事件的线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T22:56:13.370

Boost::asio 可能有点难以理解。至少，我很难做到。

您不需要让线程等待任何事情。当他们没有任何工作要做时，他们会自己做。看起来像您想要做的示例已将每个项目的工作发布到 io_service。

以下代码的灵感来自[此链接](https://stackoverflow.com/questions/7754695/boost-asio-async-write-how-to-not-interleaving-async-write-calls#7756894)。它实际上让我大开眼界，你可以如何使用它来做很多事情。

我确信这并不完美，但我认为它给出了总体思路。我希望这有帮助。

## 代码

```
#include <iostream>
#include <boost/thread.hpp>
#include <boost/bind.hpp>
#include <boost/asio.hpp>
class ServerProcessor
{
protected:
    void handleWork1(WorkObject1* work)
    {
        //The code to do task 1 goes in here
    }
    void handleWork2(WorkObject2* work)
    {
        //The code to do task 2 goes in here
    }

    boost::thread_group worker_threads_;

    boost::asio::io_service io_service_;
    //This is used to keep io_service from running out of work and exiting to soon.
    boost::shared_ptr<boost::asio::io_service::work> work_;

public:
    void start(int numberOfThreads)
    {
        boost::shared_ptr<boost::asio::io_service::work> myWork(new boost::asio::io_service::work(io_service_));
        work_=myWork;

        for (int x=0; x < numberOfThreads; ++x)
            worker_threads_.create_thread( boost::bind( &ServerProcessor::threadAction, this ) );

    }

    void doWork1(WorkObject1* work)
    {
        io_service_.post(boost::bind(&ServerProcessor::handleWork1, this, work));
    }

    void doWork2(WorkObject2* work)
    {
        io_service_.post(boost::bind(&ServerProcessor::handleWork2, this, work));
    }

    void threadAction()
    {
        io_service_.run();
    }

    void stop()
    {
        work_.reset();
        io_service_.stop();
        worker_threads_.join_all();
    }

};

int main()
{
    ServerProcessor s;

    std::string input;
    std::cout<<"Press f to stop"<<std::endl;

    s.start(8);

    std::cin>>input;

    s.stop();

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-13T04:04:02.187

使用 boost::signals2 怎么样？

它是 boost::signals 的线程安全衍生产品，可让您的客户端订阅要发出的信号的回调。

然后，当信号在 io_service 调度的作业中异步发出时，所有注册的回调将被执行（在发出信号的同一线程上）。

# javascript - 如何以编程方式触发 Bootstrap 模式？

> ID：11404711
> 
> 赞同：237
> 
> 时间：2012-07-09T23:32:45.273
> 
> 标签：javascript, twitter-bootstrap

如果我去这里

[http://getbootstrap.com/2.3.2/javascript.html#modals](http://getbootstrap.com/2.3.2/javascript.html#modals)

然后单击“启动演示模式”，它会执行预期的操作。我在注册过程中使用模式，并且涉及服务器端验证。如果有问题，我想将用户重定向到显示验证消息的相同模式。目前，除了用户的物理点击之外，我无法弄清楚如何让模式显示。如何以编程方式启动模型？

* * *

## 回答 #1

> 赞同：411
> 
> 时间：2012-07-09T23:40:25.383

为了手动显示模态弹出窗口，您必须这样做

```
$('#myModal').modal('show'); 
```

您以前需要对其进行初始化，`show: false`因此在您手动执行之前它不会显示。

```
$('#myModal').modal({ show: false}) 
```

`myModal`模态容器的 id 在哪里。

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2014-09-29T23:24:11.737

您不应该在触发模态的元素（如按钮）中写入**data-toggle="modal" ，并且您可以手动显示模态：**

```
$('#myModal').modal('show'); 
```

并隐藏：

```
$('#myModal').modal('hide'); 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-11-13T06:06:19.950

如果您正在寻找程序化模态创建，您可能会喜欢这个：

[http://nakupanda.github.io/bootstrap3-dialog/](http://nakupanda.github.io/bootstrap3-dialog/)

尽管 Bootstrap 的 modal 提供了 modal 创建的 javascript 方式，但您仍然需要先编写 modal 的 html 标记。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2015-03-13T06:05:50.680

**HTML**

```
<!-- Button trigger modal -->
<button type="button" class="btn btn-primary btn-lg">
  Launch demo modal
</button>

<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Modal title</h4>
      </div>
      <div class="modal-body">
        ...
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>
</div> 
```

**JS**

```
$('button').click(function(){
$('#myModal').modal('show');
}); 
```

[演示 JSFIDDLE](http://jsfiddle.net/tvshajeer/hLxauuaz/)

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2012-07-09T23:39:45.090

您可以通过 jquery (javascript) 显示模型

```
$('#yourModalID').modal({
  show: true
}) 
```

演示：[这里](http://jsfiddle.net/fVgqU/2/)

或者您可以删除“隐藏”类

```
<div class="modal" id="yourModalID">
  # modal content
</div> 
```

​</p>

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2021-04-26T04:34:59.700

这是**没有 jQuery 的 Bootstrap v5**的代码。

```
let myModal = new bootstrap.Modal(document.getElementById('myModal'), {});
myModal.show(); 
```

## 演示

这是一个[代码框](https://idu6i.csb.app/)演示，以编程方式在页面加载时打开模式。

![](../Images/717b261f4c11a75e3c9b156bcf6e4290.png)

[https://idu6i.csb.app/](https://idu6i.csb.app/)

## 参考文献

*   [https://getbootstrap.com/docs/5.0/components/modal/#via-javascript](https://getbootstrap.com/docs/5.0/components/modal/#via-javascript)
*   [https://getbootstrap.com/docs/5.0/components/modal/#show](https://getbootstrap.com/docs/5.0/components/modal/#show)

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2017-10-12T07:49:54.523

我想这样做`angular (2/4)`，这就是我所做的：

```
<div [class.show]="visible" [class.in]="visible" class="modal fade" id="confirm-dialog-modal" role="dialog">
..
</div>` 
```

**需要注意**的重要事项：

*   `visible`是控制模态可见性的组件中的变量（布尔值）。
*   `show`并且`in`是引导类。

一个示例[组件](https://github.com/nivite/nisdk/blob/master/projects/nlib/src/lib/nlib.component.ts#L31)和[html](https://github.com/nivite/nisdk/blob/master/projects/nlib/src/lib/nlib.component.html#L74)

**零件**

```
@ViewChild('rsvpModal', { static: false }) rsvpModal: ElementRef;
..
@HostListener('document:keydown.escape', ['$event'])
  onEscapeKey(event: KeyboardEvent) {
    this.hideRsvpModal();
  }
..
  hideRsvpModal(event?: Event) {
    if (!event || (event.target as Element).classList.contains('modal')) {
      this.renderer.setStyle(this.rsvpModal.nativeElement, 'display', 'none');
      this.renderer.removeClass(this.rsvpModal.nativeElement, 'show');
      this.renderer.addClass(document.body, 'modal-open');
    }
  }
  showRsvpModal() {
    this.renderer.setStyle(this.rsvpModal.nativeElement, 'display', 'block');
    this.renderer.addClass(this.rsvpModal.nativeElement, 'show');
    this.renderer.removeClass(document.body, 'modal-open');
  } 
```

**html**

```
<!--S:RSVP-->
<div class="modal fade" #rsvpModal role="dialog" aria-labelledby="niviteRsvpModalTitle" (click)="hideRsvpModal($event)">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="niviteRsvpModalTitle">

                </h5>
                <button type="button" class="close" (click)="hideRsvpModal()" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary bg-white text-dark"
                    (click)="hideRsvpModal()">Close</button>
            </div>
        </div>
    </div>
</div>
<!--E:RSVP--> 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-12-25T15:37:33.237

以下代码可用于在 openModal() 函数上打开模式并在 closeModal() 上关闭：

```
 function openModal() {
          $(document).ready(function(){
             $("#myModal").modal();
          });
      }

     function closeModal () {
          $(document).ready(function(){
             $("#myModal").modal('hide');
          });  
      } 
```

/* #myModal 是 modal popup 的 id */

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-10-11T21:45:56.463

这样的事情我也经历过。我想通过单击表格行来打开 Bootstrap 模式并获取有关每一行的更多详细信息。我使用了一个技巧来做到这一点，我称之为虚拟按钮！兼容最新版本的 Bootstrap (v5.0.0-alpha2)。它也可能对其他人有用。

预览代码片段： [https ://gist.github.com/alireza-rezaee/c60da1429c36351ef4f071dec0ea9aba](https://gist.github.com/alireza-rezaee/c60da1429c36351ef4f071dec0ea9aba)

概括：

```
let exampleButton = document.createElement("button");
exampleButton.classList.add("d-none");
document.body.appendChild(exampleButton);
exampleButton.dataset.toggle = "modal";
exampleButton.dataset.target = "#exampleModal";

//AddEventListener to all rows
document.querySelectorAll('#exampleTable tr').forEach(row => {
    row.addEventListener('click', e => {
        //Set parameteres (clone row dataset)
        exampleButton.dataset.whatever = e.target.closest('tr').dataset.whatever;
        //Button click simulation
        //Now we can use relatedTarget
        exampleButton.click();
    })
}); 
```

这一切都是为了使用`relatedTarget`财产。（参见[引导文档](https://v5.getbootstrap.com/docs/5.0/components/modal/#varying-modal-content)）

# php - PHP Excel图像更改大小

> ID：11404716
> 
> 赞同：7
> 
> 时间：2012-07-09T23:33:35.097
> 
> 标签：php, phpexcel, xls

开发将使用 PHP Excel 创建 Excel 文件的 PHP 代码。

我需要将图像放入 XLS 文件中。我遇到的问题是图像的尺寸不是我在代码中定义的尺寸：

```
$objDrawing = new PHPExcel_Worksheet_Drawing();
$objDrawing->setName('Water_Level');
$objDrawing->setDescription('Water_Level');
$objDrawing->setPath('img/logo-rab.jpg');
$objDrawing->setHeight(74);
$objDrawing->setCoordinates('A1');
$objDrawing->setWorksheet($objPHPExcel->getActiveSheet()); 
```

此图像远高于 74 像素。也尝试添加高度和宽度，但始终相同。

你能帮我如何在我的 XLS 中添加图像，尺寸是我在 PHP 代码中定义的吗？

先感谢您！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-10-01T08:34:29.637

Have you tried using setWidthAndHeight and set ResizeProportional true?

```
$objDrawing->setWidthAndHeight(148,74);
$objDrawing->setResizeProportional(true); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-11-05T10:41:55.257

我以不同的方式尝试过，但 excel 会自动强制图像缩放。无论如何，我通过首先将“调整大小比例”设置为错误然后为图像设置自定义宽度来解决它

```
/* ADD LOGO */
$objDrawing = new PHPExcel_Worksheet_Drawing();
$objDrawing->setName('Logo');
$objDrawing->setDescription('Logo');
$objDrawing->setPath('../images/logoexcel.png');
$objDrawing->setCoordinates('A1');
// set resize to false first
$objDrawing->setResizeProportional(false);
// set width later
$objDrawing->setWidth(45);
$objDrawing->setWorksheet($objPHPExcel->getActiveSheet());
$objPHPExcel->getActiveSheet()->getRowDimension(1)->setRowHeight(35);
/* END LOGO */ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-23T16:14:59.063

同样的问题，对我来说，我必须像这样设置 setImageResource 后设置 var

```
 ... 
        $this->objPHPExcel->getActiveSheet()->SetCellValue($index, $entry);
        $this->gdImage = imagecreatefromjpeg('/path/img.jpg');
        $this->objDrawing->setCoordinates('C1');
        ...
        }

        function save_excel(){
        $this->objDrawing->setRenderingFunction(PHPExcel_Worksheet_MemoryDrawing::RENDERING_JPEG);
        $this->objDrawing->setMimeType(PHPExcel_Worksheet_MemoryDrawing::MIMETYPE_DEFAULT);    
        $this->objDrawing->setImageResource($this->gdImage);
        $this->objDrawing->setHeight(100); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-05T11:13:44.960

在 PhpSpreadSheet 中类似于 PHPExcel：

```
$drawing = new Drawing();

$drawing->setName( $name );
$drawing->setDescription( $name );
$drawing->setPath( $path );
$drawing->setWorksheet( $sheet );
$drawing->setCoordinates( $cell );

$drawing->setHeight(100);
$drawing->setResizeProportional(true); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-08-15T12:08:12.933

添加这个，可能这会工作

$objDrawing->setOffsetX(110);

# scala - 如何获取指向同一个 servlet 的不同 URL？

> ID：11404722
> 
> 赞同：2
> 
> 时间：2012-07-09T23:34:11.307
> 
> 标签：scala, servlets

我是 Servlet 技术的新手，这*绝对是个基本*问题，但我对那些对我来说太复杂的教程感到困惑。

我有一个新的 servlet `HelloWorldServlet`。在`web.xml`，我有这个

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE web-app
     PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.2//EN"
     "http://java.sun.com/j2ee/dtds/web-app_2_2.dtd">

<web-app>
     <servlet>
         <servlet-name>HelloWorldServlet</servlet-name>
         <servlet-class>cz.hello.HelloWorldServlet</servlet-class>
     </servlet>

     <servlet-mapping>
         <servlet-name>HelloWorldServlet</servlet-name>
         <url-pattern>/HelloWorldServlet</url-pattern>
     </servlet-mapping>
</web-app> 
```

`HelloWorldServlet.scala`（我更喜欢 scala 到 java）看起来像这样

```
package cz.hello

import javax.servlet.http.HttpServlet
import javax.servlet.http.HttpServletRequest
import javax.servlet.http.HttpServletResponse

 class HelloWorldServlet extends HttpServlet {
    override def doGet(req: HttpServletRequest, resp: HttpServletResponse) = {
        resp.setContentType("text/plain")
        resp.getWriter.println("Hello, world")
    }
} 
```

到目前为止一切顺利，servlet 是使用 Jetty 加载的，我很高兴，我可以在`http://localhost:8080/HelloWorldServlet`.

现在，我希望 servlet 能够以不同的方式对 GET 请求做出反应，例如，`http://localhost:8080/HelloWorldServlet/hello`对`http://localhost:8080/HelloWorldServlet/goodbye`它们两者做出反应。例如像（伪代码）

```
 override def doGet(req: HttpServletRequest, resp: HttpServletResponse) = {
        resp.setContentType("text/plain")
        if (req.isAddress("/hello") {
            resp.getWriter.println("Hello, world")
        } else {
            resp.getWriter.println("Goodbye, world")
        }
    } 
```

怎么能达到呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T23:55:15.747

首先，如果你想对 POST 请求做出反应，你应该实现`doPost`方法，而不是`doGet`.

其次，我建议您考虑在不同的 servlet 中处理每个 URL，除非您的代码与您提供的示例一样简单。

在开发实际应用程序时，您的代码可能会变得更加复杂，因此如果您将职责分成两个 servlet，它会更加简洁。如果您同意这种方法，只需在您的 中创建另一个`<servlet>`和另一个`<servlet-mapping>`对象`web.xml`，如下所示：

```
<web-app>
 <servlet>
     <servlet-name>HelloWorldServlet</servlet-name>
     <servlet-class>cz.hello.HelloWorldServlet</servlet-class>
 </servlet>
 <servlet>
     <servlet-name>GoodbyeWorldServlet</servlet-name>
     <servlet-class>cz.hello.GoodbyeWorldServlet</servlet-class>
 </servlet>

 <servlet-mapping>
     <servlet-name>HelloWorldServlet</servlet-name>
     <url-pattern>/hello</url-pattern>
 </servlet-mapping>
 <servlet-mapping>
     <servlet-name>GoodbyeWorldServlet</servlet-name>
     <url-pattern>/goodbye</url-pattern>
 </servlet-mapping>
</web-app> 
```

这样，对的请求`/hello`将由 处理`HelloWorldServlet`，对的请求`/goodbye`将由 处理`GoodbyeWorldServlet`。现在只需定义 GET 还是 POST 对您更有意义，并在您的 servlet 中 实现相应的方法（`doGet`或或两者）。`doPost`

您的想法（比较 servlet 中 URL 的内容）也有效，但不是一个好的设计，因为您最终可能会得到一个巨大的 if/then/else 链，在这种情况下这听起来是个坏主意。

# ruby-on-rails-3 - gmaps4rails 的滑动地图

> ID：11404725
> 
> 赞同：1
> 
> 时间：2012-07-09T23:34:18.883
> 
> 标签：ruby-on-rails-3, coffeescript, openstreetmap, gmaps4rails

我认为在 google API 中使用 OpenStreetMap（或 OpenCycleMap）作为地图图块提供者会很好。以下是如何在纯 javascript 中完成此操作的示例：

```
<script type="text/javascript">
        var element = document.getElementById("map");

        /*
        Build list of map types.
        You can also use var mapTypeIds = ["roadmap", "satellite", "hybrid", "terrain", "OSM"]
        but static lists sucks when google updates the default list of map types.
        */
        var mapTypeIds = [];
        for(var type in google.maps.MapTypeId) {
            mapTypeIds.push(google.maps.MapTypeId[type]);
        }
        mapTypeIds.push("OSM");

        var map = new google.maps.Map(element, {
            center: new google.maps.LatLng(48.1391265, 11.580186300000037),
            zoom: 11,
            mapTypeId: "OSM",
            mapTypeControlOptions: {
                mapTypeIds: mapTypeIds
            }
        });

        map.mapTypes.set("OSM", new google.maps.ImageMapType({
            getTileUrl: function(coord, zoom) {
                return "http://tile.openstreetmap.org/" + zoom + "/" + coord.x + "/" + coord.y + ".png";
            },
            tileSize: new google.maps.Size(256, 256),
            name: "OpenStreetMap",
            maxZoom: 18
        }));
    </script> 
```

[http://wiki.openstreetmap.org/wiki/Google_Maps_Example](http://wiki.openstreetmap.org/wiki/Google_Maps_Example)

这样一来，人们就可以拥有一张 OSM 地图（它看起来更好，例如用于远足或骑自行车），结合谷歌地图类型和更好的谷歌界面，以及仅适用于谷歌地图的所有方法和选项gmaps4rails（例如集群等）。

我试图弄清楚如何实现这一点，但坦率地说，这有点超出我的想象。

有没有其他人试图实现类似的目标？

编辑：我想出了一种方法来实现我想要的。它不漂亮，但我想我还是应该发布它，所以也许其他人可以提出更好的想法。

在`gmaps4rails.base.js.coffee`我添加了这个方法：

```
create_OSM : ->
OSMMapTypeOptions = new google.maps.ImageMapType(
  getTileUrl: (coord, zoom) ->
    "http://tile.openstreetmap.org/" + zoom + "/" + coord.x + "/" + coord.y + ".png"
  tileSize: new google.maps.Size(256, 256)
  name: "OSM"
  maxZoom: 18
)
@serviceObject.mapTypes.set("OSM", OSMMapTypeOptions)
CycleMapTypeOptions = new google.maps.ImageMapType(
  getTileUrl: (coord, zoom) ->
    "http://tile.opencyclemap.org/cycle/" + zoom + "/" + coord.x + "/" + coord.y + ".png"
  tileSize: new google.maps.Size(256, 256)
  name: "Cycle"
  maxZoom: 18
)
@serviceObject.mapTypes.set("OCM", CycleMapTypeOptions)
@serviceObject.setMapTypeId("OSM") 
```

在`js_builder.rb`我`@js << "#{gmap_id}.create_OSM();"`之后添加了这样的方法调用`@js << "#{gmap_id}.initialize();"`。

最后，我的视图代码如下所示：

```
 <%= gmaps("markers" => {"data" => @json},
                "map_options" => {"type" => "TERRAIN", :raw => '{mapTypeControlOptions: {mapTypeIds: [google.maps.MapTypeId.ROADMAP, google.maps.MapTypeId.TERRAIN, "OSM", "OCM"], style: google.maps.MapTypeControlStyle.DROPDOWN_MENU}}'}) %> 
```

它有效，我对结果感到满意。不过需要一些认真的清理和重构。有什么意见吗？

# google-app-engine - 公共/上传的应用程序引擎应用程序是否有交互式控制台？

> ID：11404732
> 
> 赞同：1
> 
> 时间：2012-07-09T23:34:58.587
> 
> 标签：google-app-engine

在本地运行您的应用程序时，用于 google ap 引擎的 SDK 具有“交互式控制台”。我在仪表板中找不到已上传应用程序的等效项。我正在使用 Python 2.7，app_engine sdk 1.70

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T01:32:20.717

实际上，有一种方法可以为您的应用程序提供交互式控制台。

您需要将以下行添加到 app.yaml 文件中。

```
- url: /_ah/admin.*
  script: google.appengine.ext.admin.application
  login: admin 
```

有关更多详细信息，请参阅[此文档（python 2.5）。](https://developers.google.com/appengine/docs/python/config/appconfig#Referring_to_the_Python_Library_Directory)

# geocoding - OpenStreetMap/Nominatim 的地理编码问题

> ID：11404735
> 
> 赞同：10
> 
> 时间：2012-07-09T23:35:19.480
> 
> 标签：geocoding, openstreetmap, nominatim

我有一个网站需要获取客户输入的地址的纬度和经度。

Google/Bing/Yahoo 对我们来说太贵了，所以我们选择了 OpenStreetMap/Nominatim。

不幸的是，虽然它在测试期间运行良好，但它未能找到大约 50% 的输入地址，这是一个大问题。

我有兴趣知道三件事：

1.  处理客户确实输入了错误地址的情况的最佳方法是什么 - 向他们发送电子邮件并要求他们更正？使用地址段直到找到东西？

2.  处理地址很好但我无法使用 OpenStreetMap 找到它的情况的最佳方法是什么？还是我对 Nominatim 的查询做错了什么？

3.  如果 OpenStreetMap 不能胜任这项任务，有谁知道免费/便宜的替代方案？我知道它是一个开源协作，因此不完整，但我认为它确实有很好的覆盖范围，如果它没有确切的位置，它会返回附近的位置 - 也许它确实，也许我正在使用它错误的。

这是一个例子：

> 182 livington ave,奥尔巴尼,纽约,12210,US

谷歌地图很容易找到。Nominatim 一无所获：[http ://nominatim.openstreetmap.org/search?format=xml&addressdetails=0&q=182%20livington%20ave,albany,New%20York,12210,US](http://nominatim.openstreetmap.org/search?format=xml&addressdetails=0&q=182%20livington%20ave,albany,New%20York,12210,US)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-10T00:41:39.540

我认为您正在寻找的是地址验证。Google、Nominatim 和其他公司仅在您不确定地址是什么时才执行地址*近似，这有助于查找地址，但结果只是最佳猜测。*

我帮助开发了一个 API，它根据称为 LiveAddress 的严格 CASS™ 要求验证和地理编码地址。我通过 Google、Nominatim 和 LiveAddress API 运行了您的示例地址，结果如下：

*   尽管“利文斯顿”中有错字，但谷歌还是找到了地址，但无法保证其有效性，称“地址是近似的”。- 再一次，它说几乎每个你尝试的地址。

*   Nominatim 因为错字而没有找到它。也许使用 Nominatim 的一个缺点是它不会尝试补偿拼写错误、验证地址的准确性或完整性等。修复拼写错误会返回一些信息，但任何人都可以猜测必须修复什么以及查询失败的原因反正。

*   由于拼写错误，LiveAddress 无法识别输入的地址。缺少“Livingston”中的“s”是戏剧性的，因为存在名为“Livington”的街道，使得查询不明确，并且根据 CASS™ 规范返回的结果太多不匹配。但是，使用不同的拼写错误“Livingstn”更改名称会产生有效结果，但拼写错误 Nominatim 也不接受：

...出于某种原因，我必须打破我的要点才能正确呈现代码：

```
[
    {
        "input_index": 0,
        "candidate_index": 0,
        "delivery_line_1": "182 Livingston Ave",
        "last_line": "Albany NY 12210-2512",
        "delivery_point_barcode": "122102512824",
        "components": {
            "primary_number": "182",
            "street_name": "Livingston",
            "street_suffix": "Ave",
            "city_name": "Albany",
            "state_abbreviation": "NY",
            "zipcode": "12210",
            "plus4_code": "2512",
            "delivery_point": "82",
            "delivery_point_check_digit": "4"
        },
        "metadata": {
            "record_type": "S",
            "county_fips": "36001",
            "county_name": "Albany",
            "carrier_route": "C011",
            "congressional_district": "21",
            "rdi": "Residential",
            "latitude": 42.66033,
            "longitude": -73.75285,
            "precision": "Zip9"
        },
        "analysis": {
            "dpv_match_code": "Y",
            "dpv_footnotes": "AABB",
            "dpv_cmra": "N",
            "dpv_vacant": "N",
            "active": "Y",
            "ews_match": false,
            "footnotes": "M#"
        }
    }
] 
```

分析脚注“M#”表示通过修复街道名称的拼写来实现匹配。生成的 DPV 脚注“AABB”表示整个地址与国家 ZIP+4 文件中的街道 + 城市/州相匹配。另请注意，Zip9 精度是（当前）最精确的地理编码级别 - 精确到块（或更接近）级别。

因此，在回答您的问题时：

1.  那要看。您的客户是否在网站表单上输入地址？在他们继续之前立即告诉他们该地址无效。~~我们正在开发一个 jQuery 插件，以使每个人都可以轻松地进行剪切和粘贴，但在那之前，您可以在我们的结帐表单中看到我们的概念，它实现了一个漂亮的系统：~~ SmartyStreets 有一个[jQuery 插件，可以验证网站上的地址形式](http://smartystreets.com/kb/liveaddress-api/website-forms)（只是复制和粘贴）。输入地址时，会自动验证。如果错误，他们会向上滑动通知，询问用户是否要修复它。有时他们的地址是不明确的，它会返回一些有效的结果。（试试：“100, new york, ny”）——他们给出了一些建议，你可以选择一个。您修复它，直到用户获得有效地址或说“无论如何使用我的；我保证它是正确的”，表单才会提交。或者，如果地址正确，他们将标准化结果放入地址字段并显示绿色通知：“地址已验证！”

2.  我想我在上面讨论过这个。您的查询很好；这似乎是 Nominatim 的一个缺点。

3.  如建议的那样，您可以尝试 LiveAddress。尝试使用大量地址以获得更好的主意（我承认，仅与一个地址相比，这是一个微弱的迹象）-但到目前为止，根据您的需要，LiveAddress 似乎介于 Google 地图和提名。

* * *

# 在评论中回答问题

我在评论中用完了空间。

## 问：

> 这是另一个导致我们出现问题的地址“7580 E Big Cannon Drive,Anaheim Hills,Anaheim Hills,California,92808,US”甚至“7580 E Big Cannon Drive,California,92808,US”似乎不适用于您的网站。

## A：

我也对 USPS 网站和其他一些服务提供商进行了一些研究。没有返回任何有效的结果或建议。但是我发现您提交的地址有什么问题：

*   **拼写错误的街道名称。**没什么大不了的；LiveAddress 将其更正为 Big Can **y** on。

*   **主号码错误。** [如果主号码不正确，这里就没有太大希望了](http://smartystreets.com/kb/faq/no-results-if-everything-is-right-except-primary-number)。计算机或人类通常无法推断出您的真正意思。在这些情况下，地址将无法验证，用户必须提供有效的*内容*才能继续。我在 7584 找到了一个有效的主号码。

*   **总体规划的社区，而不是市/县。**“阿纳海姆山”是一个总体规划社区的名称。谷歌在其商业列表中找到了它，但这与地址无关。

*   **“阿纳海姆山”两次。**这使解析器感到困惑。不幸的是，有了额外的不必要信息（尤其是在单行地址中），几乎不可能分辨出其中的哪一部分是可疑的。第二个“阿纳海姆山”必须离开，但第一个可以留下来，一切都会好起来的。

*   **国家信息。**我尝试过您的地址的大多数服务都与前面的国家/地区混淆，并将其放在“公司/公司名称”字段中。我们处理美国地址，因此您可以省略国家/地区。它也会减少您的请求的大小。

LiveAddress 实际上能够验证这些表单中的地址，既可以作为单行地址，也可以拆分为组件：

```
7584 E Big Cannon Drive anaheim hills ca 92808
7584 bg cannon 92808
7584 big cannon ave aneheim hills ca 
```

最重要的帮助是找到一个有效的主号码。在没有返回有效地址的情况下，您应该提醒用户并建议修复主号码并确保城市/州（如果给出）与邮政编码一致（因为如果这两个发生争执，也不可能说出你的意思）。

# c# - N-TIER 应用程序中的 STE 更新和删除斗争

> ID：11404739
> 
> 赞同：0
> 
> 时间：2012-07-09T23:36:17.980
> 
> 标签：c#, .net, wcf, entity-framework, self-tracking-entities

我们一直在构建一个包含 2 个部分的应用程序。 **服务器端：** WCF 服务，**客户端：**遵循 MVVM 模式的 WPF 应用程序

所以我们也使用自我跟踪实体来完成一些数据库工作，但我们遇到了困难。

这是一个示例代码：

```
public bool UpdateUser(User userToUpdate)
{
    using (DBContext _context = new DBContext())
    {
        try
        {
            userToUpdate.MarkAsModified();
            _context.Users.ApplyChanges(userToUpdate);
            _context.SaveChanges();
            return true;
        }
        catch (Exception ex)
        {
            // LOGS etc.
            return false;
        }
    }
} 
```

所以当我从客户端调用这个函数时，它给了我们这个异常：

> AcceptChanges 无法继续，因为对象的键值与 ObjectStateManager 中的另一个对象冲突。在调用 AcceptChanges 之前确保键值是唯一的。

“用户”实体有一个“多对 1..0 (UserType)”和五个“0..1 对多”关联。并且“UserType”具有“多对多（模块）”关联。

当我们向这个函数发送一个 User 实例时，UserType 包含在它的模块中。

如果你能指导我解决这个问题，那就太好了。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T23:18:55.937

这就是我解决这个问题的方法，作为其他与我有同样问题的人的参考。

```
public bool UpdateUser(User userToUpdate)
{
    using (DBContext _context = new DBContext())
    {
        try
        {
            User outUser = usersModel.Users.Single(x => x.UserId == userToUpdate.UserId);
            outUser = userToUpdate;
            _context.ApplyCurrentValues("Users", outUser);
            _context.SaveChanges();
            return true;
        }
        catch (Exception ex)
        {
            // LOGS etc.
            return false;
        }
    }
} 
```

# c# - 向列表中的项目添加属性

> ID：11404743
> 
> 赞同：2
> 
> 时间：2012-07-09T23:36:39.537
> 
> 标签：c#, asp.net, asp.net-mvc-3, list, razor

所以我刚开始使用 ASP.NET MVC，我遇到了一个我找不到答案的问题。

我正在从 SQL 数据库中获取一些数据，并使用以下代码将其发送到视图：

```
var listingsQuery = (from s in db.tblListings select s).OrderBy(s => s.listingID).Skip(100).Take(25);
var listings = listingsQuery.ToList();

return View(listings); 
```

这很好用，但我想在结果列表中添加一个值。基本上我想做的是这样的：

```
foreach (var item in listings)
{
    this.Add("propertyType", "Home");
} 
```

但显然这行不通。我试过做 ToArray() 而不是 ToList() 但这让我无处可去。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T00:25:37.217

您想为 List 集合中的每个对象添加一个新属性吗？如果是这样，您可以创建一个继承自列表中任何对象类型的新类型（将鼠标悬停在 ListingsQuery 变量上 - 类型在 <> 符号内）并将新属性添加到它：

```
public class MyNewType : ExistingTableType
{
    public string PropertyType { get; set; }
} 
```

然后在您的查询中，将属性投影到这个新类型中：

```
var listingsQuery = (from s in db.tblListings  
                     orderby s.listingID
                     select new NewType
                     {
                         listingID = s.listingID,
                         someOtherField = s.someOtherField
                     }
                    ).Skip(100).Take(25); 
```

现在您可以循环浏览每条记录并分配一个值：

```
foreach(var record in listings)
{
   record.ProperyType = "Home";
} 
```

还有其他方法可以做到这一点（假设您使用的是 EF），例如，如果您使用原始 SQL，您可以将结果类型直接转换为新类型（无需映射每个字段），但这应该得到你开始了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T23:52:44.780

如果你想在你的列表集合中添加一个新行，你需要做 Listings.Add 而不是 this.Add

如果要修改列表集合中的值，则需要执行

```
 foreach(var item in listings)
     {
       item.PropertyName = value;
     } 
```

# css - CSS 媒体查询：最大宽度或最大高度

> ID：11404744
> 
> 赞同：559
> 
> 时间：2012-07-09T23:37:01.783
> 
> 标签：css, media-queries

在编写 CSS 媒体查询时，有什么方法可以使用“OR”逻辑指定多个条件？

我正在尝试做这样的事情：

```
/* This doesn't work */
@media screen and (max-width: 995px OR max-height: 700px) {
  ...
} 
```

* * *

## 回答 #1

> 赞同：1067
> 
> 时间：2012-07-09T23:40:05.197

使用逗号指定两个（或多个）不同的规则：

```
@media screen and (max-width: 995px), 
       screen and (max-height: 700px) {
  ...
} 
```

来自[https://developer.mozilla.org/en-US/docs/Web/CSS/Media_Queries/Using_media_queries](https://developer.mozilla.org/en-US/docs/Web/CSS/Media_Queries/Using_media_queries)

> 逗号用于将多个媒体查询组合成一个规则。逗号分隔列表中的每个查询都与其他查询分开处理。因此，如果列表中的任何查询为真，则整个媒体语句都返回真。换句话说，列表的行为类似于逻辑或运算符。

* * *

## 回答 #2

> 赞同：291
> 
> 时间：2014-05-07T17:41:07.990

# **CSS 媒体查询和逻辑运算符：简要概述 ;)**

**快速回答。**

用逗号分隔规则： `@media handheld, (min-width: 650px), (orientation: landscape) { ... }`

**长答案。**

这里有很多，但我试图让它信息密集，而不仅仅是蓬松的文字。这是一个学习自己的好机会！*花点时间系统地阅读，我希望它会有所帮助。*

* * *

## 媒体查询

**媒体查询本质上用于网页设计，以创建特定于设备或情境的浏览体验；这是使用页面[CSS](http://en.wikipedia.org/wiki/Css)`@media`中的声明来完成的。**这可用于在多种情况下以不同方式显示网页：无论您使用的是具有不同纵横比的平板电脑还是电视，您的设备是彩色屏幕还是黑白屏幕，或者最常见的情况是，用户更改浏览器的大小或在具有不同屏幕大小的浏览设备之间切换（一般来说，这样的设计被称为[响应式网页设计](http://en.wikipedia.org/wiki/Responsive_Web_Design)）

## 逻辑运算符

在针对这些情况进行设计时，似乎有***四个逻辑运算符***可用于在针对各种设备或[视口](http://en.wikipedia.org/wiki/Viewport#Computing)大小时要求更复杂的需求组合。

*（注意：如果您不了解媒体规则、媒体查询和特征查询之间的区别，请先浏览此答案的底部部分，以更好地了解与媒体查询语法相关的术语*

**1.AND（*和*关键字）**

要求在样式规则生效之前**必须满足所有指定的条件。**

`@media screen and (min-width: 700px) and (orientation: landscape) { ... }`

*除非以下所有*评估为真，否则指定的样式规则不会生效：

*   媒体类型是“屏幕” *，并且*
*   视口至少 700 像素宽*，并且*
*   屏幕方向当前为横向。

注意：我相信这三个*特征查询*一起使用，就构成了一个*媒体查询*。

**2\. OR（*逗号分隔的列表*）**

不是使用*or*关键字，而是使用逗号分隔的列表将多个媒体查询链接在一起以形成更复杂的媒体规则

`@media handheld, (min-width: 650px), (orientation: landscape) { ... }`

***一旦任何一个*****媒体查询评估为 true**，指定的样式**规则就会生效***：*

 *1.  媒体类型是“手持”*或*
2.  视口至少为 650 像素宽*或*
3.  屏幕方向当前为横向。

**3\. NOT（*非*关键字）**

*not*关键字可用于**否定单个*媒体查询***（而不是完整的媒体*规则*——意味着它只否定一组逗号之间的条目，而不是 @media 声明之后的完整媒体规则）。

同样，[请注意](https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Media_queries#not)*not*关键字否定媒体查询，它*不能*用于否定媒体查询中的单个特征查询。*

`@media not screen and (min-resolution: 300dpi), (min-width: 800px) { ... }`

此处指定的样式将生效，如果

1.  媒体类型和最小分辨率*都不*满足他们的要求（分别为“屏幕”和“300dpi”）*或*
2.  视口至少有 800 像素宽。

换句话说，如果媒体类型为“屏幕”且最小分辨率为 300 dpi，则除非视口的最小宽度至少为 800 像素，否则该规则*不会*生效。

（not 关键字可能有点时髦。如果我能做得更好，请告诉我。；）

**4\. ONLY（*唯一*的关键字）**

据我了解，*唯一*的关键字**用于防止旧浏览器将较新的媒体查询误解**为较早使用的较窄媒体类型。如果使用得当，旧的/不兼容的浏览器应该完全忽略样式。

`<link rel="stylesheet" media="only screen and (color)" href="example.css" />`

旧的/不兼容的浏览器会完全忽略这行代码，我相信它会读取*唯一*的关键字并认为它是不正确的媒体*类型*。（有关聪明人的更多信息，请参见[此处](https://stackoverflow.com/a/9286360/1963978)和[此处）](https://stackoverflow.com/q/8549529/1963978)

**了解更多信息**

更多信息（包括更多可查询的功能），请参阅：[https ://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Media_queries#Logical_operators](https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Media_queries#Logical_operators)

* * *

## 了解媒体查询术语

注意：我需要学习以下术语才能理解这里的所有内容，特别是关于*not*关键字。这是我理解的：

**媒体*规则***（MDN 似乎也称这些媒体声明）包括该术语`@media`及其所有随后的媒体查询

`@media all and (min-width: 800px)`

`@media only screen and (max-resolution:800dpi), not print`

`@media screen and (min-width: 700px), (orientation: landscape)`

`@media handheld, (min-width: 650px), (min-aspect-ratio: 1/1)`

**媒体*查询***是一组特征查询。它们可以像一个特征查询一样简单，也可以使用*and*关键字来形成更复杂的查询。媒体查询可以用逗号分隔以形成更复杂的媒体规则（参见上面的*or*关键字）。

`screen`（注意：这里只使用一个特征查询。）

`only screen`

`only screen and (max-resolution:800dpi)`

`only tv and (device-aspect-ratio: 16/9) and (color)`

不是`handheld, (min-width: 650px)`。（注意逗号：这里有两个媒体查询。）

**特征*查询***是媒体规则最基本的部分，仅涉及给定特征及其在给定浏览情况下的状态。

`screen`

`(min-width: 650px)`

`(orientation: landscape)`

`(device-aspect-ratio: 16/9)`

* * *

代码片段和信息来源于：

[Mozilla 贡献者的](https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Media_queries$history?page=1)[CSS 媒体查询](https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Media_queries)（根据[CC-BY-SA 2.5](http://creativecommons.org/licenses/by-sa/2.5/)许可）。使用了一些代码示例，并稍作改动以（希望）增加解释的清晰度。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-10-31T06:30:48.367

在 CSS 中编写正确的媒体查询有两种方法。如果您首先为更大的设备编写媒体查询，那么正确的编写方式是：

```
@media only screen 
and (min-width : 415px){
    /* Styles */
}

@media only screen 
and (min-width : 769px){
    /* Styles */
}

@media only screen 
and (min-width : 992px){
    /* Styles */
} 
```

但是，如果您首先为较小的设备编写媒体查询，那么它将类似于：

```
@media only screen 
and (max-width : 991px){
    /* Styles */
}

@media only screen 
and (max-width : 768px){
    /* Styles */
}

@media only screen 
and (max-width : 414px){
    /* Styles */
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-02-25T16:49:18.727

是的，使用`and`，例如：

```
@media screen and (max-width: 800px), 
       screen and (max-height: 600px) {
  ...
} 
```*

# java - 性能 --- 响应时间变慢

> ID：11404745
> 
> 赞同：0
> 
> 时间：2012-07-09T23:37:03.517
> 
> 标签：java, tomcat, servlets, jdbc, postgresql-8.4

我们有一个在 Apache-tomcat 服务器上运行的 Java EE 应用程序（jsp/servlet，jdbc）。响应时间随时间变慢。当持续工作时，它会以更快的速度减速。

重启服务器后响应时间恢复正常。

我将 Jconsole 连接到服务器，并附上了堆内存使用情况的屏幕截图，当执行密集工作时会上升，垃圾收集器会定期启动，内存使用会下降。然而，当测试接近尾声时，尽管手动启动了垃圾收集器，但响应时间并没有下降。II 还检查了连接，它们似乎正确关闭。即我没有注意到任何zcx ![堆内存使用](../Images/0d98c5647aea23070480d25f420ee71b.png)

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T00:14:30.253

响应时间慢了多少？您是否进行了任何分析或日志记录以帮助了解您的应用程序的哪些部分较慢？设置一个简单的 servlet 以查看它是否也像另一个一样慢下来可能很有用。这可能会告诉您 Tomcat 或您的应用程序中的某些东西是否正在变慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T00:16:34.853

你微调你的tomcat内存设置了吗？也许您需要稍微增加 perm gen 的大小。例如 -XX:MaxPermSize=512M

如果您可以获得堆转储并将其加载到诸如 MemoryAnalyzer 之类的工具中，您就可以肯定地知道它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T08:05:13.917

在 JDK 中使用 jvisualvm 附加。它允许您分析 Tomcat 并找到时间的去向。

我现在的猜测是数据库连接。要么它们变得陈旧，要么游泳池干涸。

# iphone - 使用情节提要在 iPhone 上拆分视图

> ID：11404746
> 
> 赞同：2
> 
> 时间：2012-07-09T23:37:13.860
> 
> 标签：iphone, objective-c, ios, uisplitviewcontroller, tableview

我刚刚在 iPhone 上发现了一些带有 splitview 的代码，但所有这些代码都使用 xib 文件。我想要一个使用故事板的演示。我的意思是拆分视图是像 facebook 这样使用的：http: [//i.stack.imgur.com/lqJW5.png](http://i.stack.imgur.com/lqJW5.png)

如果有人知道一些我可以用于学习的资源，我真的很感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T23:54:56.710

Facebook 应用程序使用的是高度定制的视图控制器。iPhone 没有真正的 UISplitViewController 可用。如果你想要 Facebook 所做的那样，你将不得不从头开始编写它（或几乎如此）。

# heroku - 如何识别我的 heroku 令牌的用户名？

> ID：11404748
> 
> 赞同：6
> 
> 时间：2012-07-09T23:37:32.093
> 
> 标签：heroku

我有一个登录 Heroku 的终端，但我不完全确定在哪个用户 ID 下。我如何检查是否是我（而不是我的同事），以免破坏别人的 heroku 应用程序？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-11T07:41:52.573

```
$> heroku auth:whoami 
```

将显示您当前的身份验证身份。

# php - 如何使用选择查询的结果更新一行的多个 mysql 列？

> ID：11404752
> 
> 赞同：1
> 
> 时间：2012-07-09T23:37:42.720
> 
> 标签：php, mysql, yii

我有一个评论表，其中包含对项目进行评分的三种方式。然后项目本身有三列分别保存每个值的平均值。

我可以在更新查询中使用三个嵌套查询来做到这一点，但我觉得这效率低下......有没有办法一次更新它们？

到目前为止，我已将其用作我的选择查询：

```
SELECT AVG(rating_1),AVG(rating_2),AVG(rating_3) FROM items_reviews WHERE item_id = 1 
```

我只是不知道如何使用该查询的结果来更新项目行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T00:00:35.647

您可以在以下位置使用联接`UPDATE`：

```
UPDATE items a
INNER JOIN
(
    SELECT 
        item_id,
        AVG(rating_1) AS avg1, 
        AVG(rating_2) AS avg2, 
        AVG(rating_3) AS avg3
    FROM items_reviews
    WHERE item_id = 1
    GROUP BY item_id
) b ON a.item_id = b.item_id
SET 
    a.avgrating1 = b.avg1,
    a.avgrating2 = b.avg2,
    a.avgrating3 = b.avg3 
```

# linq - 将实体框架 Linq 查询保存到数据库

> ID：11404757
> 
> 赞同：4
> 
> 时间：2012-07-09T23:37:56.900
> 
> 标签：linq, serialization, entity-framework-4, expression-trees

我想知道我们是否可以在实体框架上转换 Linq 查询，并通过将查询转换为表达式树和序列化来将查询保存到数据库中。有人可以帮我解决这个问题，并为我指明正确的方向，无论这是否可以完成。非常感谢您对此的任何帮助。

谢谢，阿杰。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T10:15:14.043

就在昨天，我为此目的发布了一个库。[序列化.Linq](https://github.com/esskar/Serialize.Linq)。它将 linq 表达式序列化为 xml、json 或二进制文件。

```
using System.Linq.Expressions
using Serialize.Linq.Extensions;

Expression<Func<Person, bool>> query = p => p.LastName == "Miller" 
    && p.FirstName.StartsWith("M");

Console.WriteLine(query.ToJson());
Console.WriteLine(query.ToXml()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T23:41:15.710

您可以将查询转换为字符串，然后保存该字符串。

这是来自Nick [Berardi的](https://stackoverflow.com/users/17/nick-berardi)[回答](https://stackoverflow.com/q/1412863/1026459)：

```
var result = from x in appEntities
         where x.id = 32
         select x;

var sql = ((System.Data.Objects.ObjectQuery)result).ToTraceString(); 
```

查询生成的 sql 可以被存储和重复使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-18T00:42:59.240

使用[Sprint.Filter.OData](https://github.com/artem-sedykh/Sprint.Filter.OData)。它将 a 转换`Func<T,bool>`为字符串并返回代码。

样本：

```
public class TestSprintOData
{
    public static void Run()
    {
        // Parse a Func into string
        var query = Filter.Serialize<User>(u => u.IsActive && u.Email.Contains("@gmail.com"));

        // It'll generate the string "IsActive and substringof('@gmail.com', Email)"

        // Convert back to Expression, perhaps on server
        var query2 = Filter.Deserialize<User>(query);

        // Compiles to Func, so you can use as delegate to Where
        var f = query2.Compile();

        var list = new List<User>
        {
            new User{Name="Johnny", IsActive = true, Email = "johnny@gmail.com"},
            new User{Name="abc", IsActive = false, Email = ""},
            new User{Name="dude", IsActive=true, Email = "dude@gmail.com"}
        };

        var result = list.Where(f);            
    }
}

class User
{
    public string Name;
    public string Phone;
    public string Login;
    public string Email;
    public bool IsActive;
} 
```

您也可以将其用作[Nuget 包](https://www.nuget.org/packages/Sprint.Filter.OData/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-06T18:45:52.970

在这种情况下，您可能需要考虑使用[Entity SQL](http://msdn.microsoft.com/en-us/library/bb387145%28v=vs.110%29.aspx)而不是 LINQ。实体 SQL 是一个字符串查询，它针对您的 EF 概念模型而不是直接针对数据库。

# ruby - 无法在 Eclipse 4.2 上安装 Aptana 插件

> ID：11404760
> 
> 赞同：29
> 
> 时间：2012-07-09T23:38:21.443
> 
> 标签：ruby, eclipse, aptana, eclipse-juno

我已经安装了 Eclipse 4.2 Juno。现在我想安装 aptana 来开发 ruby​​，但我收到以下错误，

> 无法在[http://download.aptana.com/studio3/plugin/install/content.jar](http://download.aptana.com/studio3/plugin/install/content.jar)读取存储库。

无法在[http://download.aptana.com/studio3/plugin/install/content.jar](http://download.aptana.com/studio3/plugin/install/content.jar)读取存储库。读取超时

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-07-15T17:45:19.210

我假设到现在你可能已经解决了这个问题，但是我遇到了完全相同的问题并且经过多次搜索找到了解决方案，所以为了其他人在这里搜索......

您需要在“安装新软件”对话框中输入的 URL 是

```
http://download.aptana.com/studio3/plugin/install 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-12-08T21:31:39.810

以下答案是正确的。我刚刚用 Eclipse Juno 测试了它。

脚步：

1.  打开日食
2.  帮助 -> 安装新软件
3.  添加（在右上角）
4.  为带有 Eclipse Juno 的 Aptana 插件输入以下链接：http: [//download.aptana.com/studio3/plugin/install](http://download.aptana.com/studio3/plugin/install)
5.  点击确定
6.  勾选 Aptana Studio 3
7.  下一步 -> 下一步 -> 完成

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-01-26T12:55:52.240

download.aptana.com/studio3/plugin/install 对我不起作用。我正在使用基于 Eclipse 4.3 的 STS 3.4

相反，我从该站点[Aptana Update Site获得了适当的更新站点链接](http://d1iwq2e2xrohf.cloudfront.net/tools/studio/plugin/install/studio3/3.4.2.201308081736/index.html)

这是 Eclipse 插件更新站点的链接[http://d1iwq2e2xrohf.cloudfront.net/tools/studio/plugin/install/studio3/3.4.2.201308081736/](http://d1iwq2e2xrohf.cloudfront.net/tools/studio/plugin/install/studio3/3.4.2.201308081736/)

还有一个下载插件并通过存档安装的链接。我已经使用了上面的更新站点链接，完全没有问题。

希望这会帮助别人。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-21T02:07:12.047

[添加此答案以防有人在使用 JonB 的答案 ( http://download.aptana.com/studio3/plugin/install](http://download.aptana.com/studio3/plugin/install) )中的正确 URL 时仍然收到此错误

重新启动 Eclipse 并重试。这似乎是一个暂时性问题，如此处所述： [Aptana studio 3 cannot contact download.ecplise.org](https://stackoverflow.com/questions/6607768/aptana-studio-3-cannot-contact-download-ecplise-org)

重试后它对我有用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-10-18T06:29:53.180

我也遇到了同样的问题。但是以下解决方案对我有用，

在 Eclipse 中，转到“Eclipse Marketplace”并搜索 Aptana 3 并单击“安装”按钮。

帮助 -> Eclipse 市场

[Eclipse Marketplace - Aptana 3 Studio 插件](https://i.stack.imgur.com/logYa.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-09T22:05:37.937

我想知道自己是安装独立的还是插件的。我根据 aptanaès 说明尝试了该插件，但第一次尝试失败。

像往常一样，SO 受访者报告了这个问题。

我重新启动了 Eclipse，然后使用 Aptanaès URL 进行了安装

[http://download.aptana.com/studio3/plugin/install](http://download.aptana.com/studio3/plugin/install)

它奏效了。

我的环境是 Eclipse JUNO，

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-01-30T00:18:44.733

截至 2018 年 1 月 29 日和 Eclipse Photon，此处列出的答案中的所有 URL 都不能在 Eclipse 的内置软件源面板中使用。但是，在将 Aptana 的旧下载 URL 与 Appcelerator（于 2015 年收购 Aptana）用于其自己的软件的那些混搭后，经过反复试验，我得到了：

[http://download.appcelerator.com/aptana/studio3/plugin/update/stable](http://download.appcelerator.com/aptana/studio3/plugin/update/stable)

这很有效，完全是即插即用的，而且显然是官方的——不需要去一些阴暗的第 3 方托管站点。我只是希望 Appcelerator 的某个人花了 15 分钟将其发布到某个地方。

# android - Android：如何使用数据库中的文本信息制作按钮列表

> ID：11404769
> 
> 赞同：0
> 
> 时间：2012-07-09T23:39:35.480
> 
> 标签：android, android-layout, android-sqlite

我正在做一个简单的“任务”应用程序。每个任务都包含一份待办事项清单。我想通过显示每个任务标题的按钮显示可用任务列表。

我在数据库中有每个任务及其规格。[按照一些类似的](http://www.vogella.com/articles/AndroidSQLite/article.html)教程，他们使用 ArrayAdapter 来显示列表，但它需要布局中的“textview 资源 ID”。我不知道如何将每个任务的标题（我从数据库中检索）传递给布局并将其放在按钮上，因为我从不使用文本视图。

为清楚起见，这里是我从 de DB 中检索数据的活动代码。

```
public class InProgress extends ListActivity {

    private questspecdao datasource;

    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        datasource = new questspecdao(this);
        datasource.open();

        List<questspec> values = datasource.getAllQuests();

        ArrayAdapter<questspec> adapter = new ArrayAdapter<questspec>(this,
                R.layout.questrow, values);
        setListAdapter(adapter);
    }

    @Override
    protected void onResume() {
        datasource.open();
        super.onResume();
    }

    @Override
    protected void onPause() {
        datasource.close();
        super.onPause();
    }

} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T00:22:47.533

您对 ArrayAdapter 进行了错误的调整。

根据 Android 的官方[文档](http://developer.android.com/reference/android/widget/ArrayAdapter.html)，一个 ArrayAdapter，*“默认情况下，此类期望提供的资源 id 引用单个 TextView”*

这意味着它只支持 TextView 所以你必须像这样实现它：

```
 ArrayAdapter arrayAdapter = new ArrayAdapter(this, android.R.layout.simple_list_item_1, array /** Your data String[] goes here. */);

    /** Sets adapter to your declared ListView. */
    youtListView.setAdapter(arrayAdapter); 
```

如果您想要自定义列表项，则必须创建自己的适配器：

```
public class MyArrayAdapter extends ArrayAdapter<String> {

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            /** Inflate a xml layout to the View. */
        View itemView = inflater.inflate(R.layout.rowlayout, parent, false);

            /**Declare all of your items at the previous defined rowlayout xml file . */
        TextView textView = (TextView) itemView .findViewById(R.id.textView);
        ImageView imageView = (ImageView) itemView .findViewById(R.id.icon);

            /** Set some values to the declared item views. */
        textView.setText(values[position]);
        if (values[position].contains("XXXXXXX")) {
            imageView.setImageResource(R.drawable.x);
        } else {
            imageView.setImageResource(R.drawable.y);
        }

        return itemView;
    }
} 
```

让我知道这是否对您有帮助:)

# javascript - 使用 contentEditable 的 HTML 富文本编辑器

> ID：11404775
> 
> 赞同：2
> 
> 时间：2012-07-09T23:39:59.723
> 
> 标签：javascript, html

多年来，我使用了一些富文本编辑器（CKEditor、Yahoo UI 富编辑器、jQuery wysiwyg 等），它们都有一个共同的特性，这给我带来了麻烦——它们使用 iframes 而不是内联`contentEditable`元素。

有没有使用的编辑器`contentEditable`？我意识到如果需要，我可能可以从头开始开发一个适合我的特定要求的产品，但如果可能的话，我更愿意依靠已经完成的工作来处理浏览器兼容性、调整大小等。

我试图摆脱 iframe 的原因是它们会导致问题，例如，窗口焦点。

# php - Facebook PHP SDK 连接

> ID：11404778
> 
> 赞同：1
> 
> 时间：2012-07-09T23:40:44.967
> 
> 标签：php, facebook, api, sdk

我已经在这个网站上搜索了一段时间的答案，但我无法找到解决这个问题的答案，所以我希望有人能帮帮我。我不是一个经验丰富的 PHP 程序员，所以我正在做的事情可能有严重错误。

无论如何，我正在与另一个根本不使用 PHP 编写代码并且需要访问 Facebook 信息的开发人员一起工作。话虽如此，我正在尝试开发一个封装所有 Facebook 图形调用的 facebook 类，允许我的伙伴调用单个函数并获取他需要的所有信息，而不必担心任何 Facebook PHP SDK 函数一点也不。这个类我放在一个单独的文件中，叫做 CFacebook.php。这个类的代码可以在下面找到（我只是从 facebook 网站上复制了这个例子）

```
<?php
require_once 'facebook.php';
class CFacebook
{

//private variables
private $Config = "";
private $FBObject = "";
private $Code = "";
private $Session = "";
private $AppId = '*************';
private $ApiSecret = '*******************'; 
//I have the API secret and AppID in 
//here but for privacy reasons I've taken them out
//constructor
public function CFacebook()
{
    $this->FBObject = new Facebook();
    $this->FBObject->setApiSecret($this->ApiSecret);
    $this->FBObject->setAppId($this->AppId);
}

//Get profile information
public function GetFBProfileInformation()
{
    $FBProfile = "";
    $ID = $this->FBObject->getUser();
    echo "<br />";
    if($ID)
    {
        try {
            $FBProfile = $this->FBObject->api('/me','GET');
            return $FBProfile;
        }catch (FacebookApiException $e)
        {
            //send back to UI to have user sign in

            // If the user is logged out, you can have a 
    // user ID even though the access token is invalid.
    // In this case, we'll get an exception, so we'll
    // just ask the user to login again here.
    echo "has ID <br />";
    $login_url = $this->FBObject->getLoginUrl(); 
    echo 'Please <a href="' . $login_url . '">login.</a>';
    echo $this->FBObject->getAccessToken()."<br />";
    echo $this->FBObject->getApiSecret()."<br />";
    error_log($e->getType());
    error_log($e->getMessage());
        }
    }else
        {
            //return to UI taht user isn't logged in and have user re-sign in

            //If the user is logged out, you can have a 
    // user ID even though the access token is invalid.
    // In this case, we'll get an exception, so we'll
    // just ask the user to login again here.
    $Page = "http://fratlabs.com/FacebookTest.php";
    $login_url = $this->FBObject->getLoginUrl(array('scope'=>'email,publish_stream,user_likes,user_hometown','redirect_uri'=>$Page));
    //$logout_url = $this->FBObject->getLogoutUrl(array('next'=>'http://fratlabs.com/FacebookTest.php')); 
    echo 'Please <a href="' . $login_url . '">login.</a>';
    //echo 'Logout Url: <a href="'. $logout_url.'">Logout</a>';
    error_log($e->getType());
    error_log($e->getMessage());

        }

    //echo $this->FBObject->getLogoutUrl(array('next'=>'http://fratlabs.com/FacebookTest.php'));
} 
```

};

?>

此类包含并实例化在一个测试页面中，该页面也是返回 Facebook 登录的地方。也许我需要将所有这些调用包含在与返回 facebook 登录的页面相同的页面中？唯一让我感到困惑的是，一旦每个蓝月亮代码都可以工作，我实际上会创建一个到 Facebook 的链接，但每隔一次我就会盯着登录页面，上面有“请登录”链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:49:18.310

虽然我自己不是 php 专家，但我相信建议使用 try/catch 对象来捕获异常，通常作为消息输出而不是作为逻辑运算符（如 if/else），并像您似乎那样定义明确的脚本路径做。考虑一种不同的方法，例如初始化 fb 会话并在第一类中验证用户并在第二类中呈现用户信息。但是对于只想要 fb 用户信息的合作伙伴，如果用户未成功登录或验证，则可以在二等舱传递消息。

为了说明（没有函数），我使用[这里](https://github.com/facebook/facebook-php-sdk/blob/master/examples/example.php)包含的代码。

# python - 使用 python GUI 实时捕获外部 C 程序的输出

> ID：11404780
> 
> 赞同：1
> 
> 时间：2012-07-09T23:40:57.507
> 
> 标签：python, c, user-interface, subprocess, popen

我有一个线程 C 程序，我想在 Unix 环境中使用 Python GUI 启动它。我希望能够通过收集 C 程序的输出来更改 GUI 的状态。

例如，这是我的 C 程序使用 printf 的输出：

```
Thread on tile 1: On
Thread on tile 2: OFF
Thread on tile 3: Disable
...
Thread on tile 61: ON 
```

我会根据输出更新我的 GUI。使问题变得困难的是我的 GUI 和 C 程序都需要同时运行并且实时更新。我还需要能够从我的 GUI 向 C 程序发送命令。

我是 Python、C 和 Unix 的新手（我知道，完全是新手）。我已经阅读了 subprocess、Popen 和 pexpect，但不确定如何将它们放在一起，如果这甚至可能的话。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T00:02:10.827

一种方法的基本概述是让您的 python GUI 使用 C 程序创建一个新进程，然后让 python GUI 从管道的一端读取，而 C 程序正在写入管道的另一端。python GUI 将读取 C 程序的输出，解释输出，然后根据它读取的内容做一些事情。

[使用 Python 进行多处理](http://www.ibm.com/developerworks/aix/library/au-multiprocessing/)。

[如何使用 Python 分叉和返回文本](http://www.myelin.co.nz/post/2003/3/13/)

[在 Unix 上 fork 守护进程的秘诀](http://code.activestate.com/recipes/66012-fork-a-daemon-process-on-unix/)

食谱文章有关于您可能需要做的标准输入和标准输出重定向的评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T00:04:32.963

有一个硬汉。我过去遇到过这个问题（没有真正令人满意的解决方案）：

[https://groups.google.com/forum/?fromgroups#!topic/comp.lang.python/79uoHgAbg18](https://groups.google.com/forum/?fromgroups#!topic/comp.lang.python/79uoHgAbg18)

正如那里所建议的，看看这个自定义模块：

[http://pypi.python.org/pypi/sarge/0.1](http://pypi.python.org/pypi/sarge/0.1)
[http://sarge.readthedocs.org/en/latest/](http://sarge.readthedocs.org/en/latest/)

编辑@Richard（没有足够的代表发表评论）：管道的问题在于，除非它们连接到交互式终端，否则它们是完全缓冲的——这意味着在 C prog 之前没有任何输出通过管道传递到 Python已完成运行，这当然不符合实时条件。

编辑2：根据理查德的链接和我之前的一些想法，我想到可以通过将管道视为文件对象并一次只读取一行来手动循环管道：

```
from time import sleep
# Assume proc is the Popen object
wait_time = 1 # 1 second, same delay as `tail -f`
while True: # Or whatever condition you need
    line = proc.stdout.readline()
    if line != '' and line != '\n':
        parse_line_do_stuff()

    sleep(wait_time) 
```

这假设 readline() 是非阻塞的，并进一步假设管道最多是行缓冲的，即使那样它也可能不起作用。我从来没有尝试过。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T00:25:21.310

您有两个进程，并且您希望它们进行通信。这被称为“进程间通信”甚至 IPC。如果你用谷歌搜索“进程间通信”，你可以找到一些信息，如下所示：

[http://beej.us/guide/bgipc/output/html/singlepage/bgipc.html](http://beej.us/guide/bgipc/output/html/singlepage/bgipc.html)

您可能想尝试使用“域套接字”在 C 程序和 Python GUI 之间进行通信。上面链接的指南解释了如何通过 C 中的域套接字进行通信；这是一个使用 Python 通过域套接字进行对话的教程。

[http://www.doughellmann.com/PyMOTW/socket/uds.html](http://www.doughellmann.com/PyMOTW/socket/uds.html)

# html - 简单的 2 块移动导航

> ID：11404782
> 
> 赞同：0
> 
> 时间：2012-07-09T23:41:11.393
> 
> 标签：html, css, navigation

我正在尝试制作一个简单的导航，它将在移动设备上提供，它是一个类似网格的布局。一排有两个街区，将有3排。有 5 个链接，所以总数是奇数。由于数字是奇数，我试图让当前页面类占据整个宽度，而不是连续有两个链接。

像这张非常粗糙的图： ![在此处输入图像描述](../Images/693c4e988b594b992e6d5a0175533d95.png)

或者如果链接 3 是当前页面：

![在此处输入图像描述](../Images/dca909d7bbc92c8f4e8791417e030c56.png)

目前我有一个基本的 5 链接列表。这是HTML：

```
 <nav id="primary_nav">
                <ul>
                    <li><a '. $this->getCurrentPage("contact") .' href="Contact">Contact</a></li>
                    <li><a '. $this->getCurrentPage("portfolio") .' href="Portfolio">Portfolio</a></li>
                    <li><a '. $this->getCurrentPage("resume") .' href="Resume">Resume</a></li>
                    <li><a '. $this->getCurrentPage("bio") .' href="Bio">Bio</a></li>
                    <li><a '. $this->getCurrentPage("index") .' href="Home">Home</a></li>
                </ul>

            </nav> 
```

CSS：

```
#primary_nav ul {
    list-style: none;
    background: #1c1c1c;
    padding: 5px 0;
}

#primary_nav li a {
    display: block;
    color: #fff;
    text-decoration: none;
    font-weight: bold;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    letter-spacing: 0.1em;
    line-height: 2em;
    height: 3em;
    border-bottom: 1px solid #383838;
}

#primary_nav li:last-child a {
    border-bottom: none;
}

#primary_nav li a:hover,
#primary_nav li a:focus {
    color: #1c1c1c;
    background: #ccc;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T00:09:12.313

忘记 javascript，你可以单独使用 css（没有花哨的 css3）。

这是HTML...

```
<nav id="primary_nav">
  <ul>
      <li><a href="Contact">Contact</a></li>
      <li class="selected"><a href="Portfolio">Portfolio</a></li>
      <li><a href="Resume">Resume</a></li>
      <li><a href="Bio">Bio</a></li>
      <li><a href="Home">Home</a></li>
  </ul>
</nav>​ 
```

...这是CSS ...

```
#primary_nav {
    position: relative;
    text-align: center;
}

#primary_nav li {
    float: left;
    width: 50%;
}

#primary_nav li:nth-child(-n+3){
    margin-bottom: 40px; /*must match height set on "primary_nav a"*/
}

#primary_nav .selected {
    position: absolute;
    top: 40px; /*must match height set on "primary_nav a"*/
    width: 100%;
}

#primary_nav a {
    display: block;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
    padding: 5px 10px 6px;
    border: 1px solid #aaa;
    height: 40px; 
} 
```

​ 您只需添加`class="selected"`引用当前所选页面的链接即可。

[在http://jsfiddle.net/joplomacedo/eYJG7/](http://jsfiddle.net/joplomacedo/eYJG7/)上查看它的实际应用

# php - 带有 PHP 文件源的 JQuery UI 自动完成

> ID：11404785
> 
> 赞同：2
> 
> 时间：2012-07-09T23:41:31.280
> 
> 标签：php, javascript, jquery, jquery-ui

我正在尝试使用 JQueryUI 自动完成，数据来自远程源（另一个 php 脚本）。以下是 JQueryUI 网站上的演示中给出的示例：

```
<style>
.ui-autocomplete-loading { background: white url('images/ui-anim_basic_16x16.gif') right center no-repeat; }
</style>
<script>
$(function() {
    function log( message ) {
        $( "<div/>" ).text( message ).prependTo( "#log" );
        $( "#log" ).scrollTop( 0 );
    }

    $( "#birds" ).autocomplete({
        source: "search.php",
        minLength: 2,
        select: function( event, ui ) {
            log( ui.item ?
                "Selected: " + ui.item.value + " aka " + ui.item.id :
                "Nothing selected, input was " + this.value );
        }
    });
});
</script> 
```

我的问题是关于 PHP 脚本“search.php”。这个脚本应该简单地返回一个数组吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T23:47:01.207

响应应该是以下两种格式之一的 JSON 格式数组：

字符串数组：

`[ "Choice1", "Choice2" ]`

**或者**

具有标签和值属性的对象数组：

`[ { label: "Choice1", value: "value1" }, ... ]`

# javascript - DOM Range 克隆不能不受 DOM 更改的影响

> ID：11404787
> 
> 赞同：3
> 
> 时间：2012-07-09T23:41:41.517
> 
> 标签：javascript, dom, range

我正在使用 cloneRange() 函数克隆一个 DOM 范围。如果我然后像这样修改原始范围对象：

```
range.setStart(range.startContainer, 1); 
```

克隆`startOffset`按预期保留旧的。

但是，如果我修改 DOM 树，那么克隆的`startOffset`也会受到影响。DOM 树和与其关联的所有范围（包括克隆）之间是否存在有意的内部连接？

[JS 小提琴示例](http://jsfiddle.net/ndM9C/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T23:54:15.783

就在这里。[在DOM Level 2 Range 规范](http://www.w3.org/TR/DOM-Level-2-Traversal-Range/ranges.html#Level-2-Range-Mutation)中指定了 DOM 突变下的范围会发生什么。最新的[DOM4 Range 规范在](http://www.w3.org/TR/dom/#interface-range)[变异算法](http://www.w3.org/TR/dom/#mutation-algorithms)部分指定了这一点（感谢 RobG 指出这一点）。

# javascript - 如何附加到另一个页面上的选择下拉列表？

> ID：11404789
> 
> 赞同：3
> 
> 时间：2012-07-09T23:42:01.690
> 
> 标签：javascript, ajax, jquery

我正在创建一项服务，允许您创建基于团队或用户的挑战。使用 HTML 5 规范来设计页面时，我遇到了一些附加到位于另一个页面中的下拉列表的问题。全部功能存在于两个页面中，主要是通过对其他页面进行 AJAX 调用。有一个小功能可以将团队的 2 个属性附加到下拉列表中，但我似乎无法让它正常工作。

代码：

```
var teams = $.parseJSON(getAllTeams());
    $('#multiPurpose').load('allTeams2.html #teamSelect');
    for (i = 0; i < teams.length; i++) {
        var team = $.parseJSON(getTeam(teams[i]));
        if (team.ownerID === userID) {
            $(
                    "<option value='" + team.teamID + "'>" + team.teamName
                            + "</option>").appendTo('#teamSelection');
        }
    }
} 
```

#teamSelection 包含在#teamSelect div 中。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T16:57:53.493

在 .load() 中添加回调函数将解决问题。基本上，您是在告诉它在运行 for 循环之前加载该 div 中的所有内容。

```
$('#multiPurpose').load(
    'allTeams2.html #teamSelect',
    function() {
    for (i = 0; i < teams.length; i++) {
    var team = $.parseJSON(getTeam(teams[i]));
    if (team.ownerID === userID) {
    $(
    "<option value='" + team.teamID + "'>"
                                            + team.teamName + "</option>")
                                    .appendTo('#teamSelection');
                        }
                    }
                }); 
```

# asp.net-mvc - 如何忽略 Db 的属性，例如在 ServiceStack.OrmLite 中

> ID：11404793
> 
> 赞同：0
> 
> 时间：2012-07-09T23:42:22.607
> 
> 标签：asp.net-mvc, servicestack, ormlite-servicestack

```
public class Message
{
    [AutoIncrement]
    public long Id { get; set; }

    public string Text { get; set; }

    public DateTime CreateDate { get; set; }

    [References(typeof(UserAuth))]
    public int FromId { get; set; }

    [Ignore]
    public UserName FromUserName {get;set;}

 } 
```

当我使用“忽略”属性框架在消息传递期间忽略该属性。我该如何编写“忽略它以获得 Db 持久性，但不要忽略它的消息传递（序列化）”。还是我必须为它编写新课程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T14:30:53.263

目前没有解决方案。使用 Automapper 可以减轻负担。

# linux - 猫在mac上使用相对路径

> ID：11404798
> 
> 赞同：0
> 
> 时间：2012-07-09T23:43:43.080
> 
> 标签：linux, macos, relative-path, cat

我正在尝试将`cat`一个目录下的 4 个文件放到一个新文件中，同时下一个目录：

```
cat ./dira/file.txt ./dirb/file.txt ./dirc/file.txt ./dird/file.txt > ./dire/file.txt 
```

我可以从终端让它工作，但不能在以下情况下：

```
for i in `ls -d prefix*`
do
  cd $i
  pwd
  cat ./dira/file.txt ./dirb/file.txt ./dirc/file.txt ./dird/file.txt > ./dire/file.txt
done 
```

where`pwd`打印正确的目录。我得到错误：`-bash:  : command not found`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T00:05:47.473

在文件中的一行的开头必须有一个*不间断的*空格（很容易通过在编辑过程中意外键入 option-space 来完成）。shell 会认为这是一个单词，并尝试将不间断空格作为命令运行；这会产生您看到的“bash: : command not found”错误。

# vim - 修复 Vim + Tmux 对未命名寄存器的 yank/paste

> ID：11404800
> 
> 赞同：67
> 
> 时间：2012-07-09T23:43:48.010
> 
> 标签：vim, tmux

在 tmux 会话中使用 vim 时，我无法拉出或粘贴到未命名的寄存器。去一个命名的寄存器工作正常，但未命名的永远不会工作。

错误是：

```
E353: Nothing in register * 
```

如果没有 tmux，vim 可以使用我当前的设置正常工作。如何修复它，以便我可以在没有错误且不指定寄存器的情况下使用`y`then ？`p`

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-07-10T20:22:33.833

From the error message (`Nothing in register *`), it appears that when you do a plain^? `p`, your instance of Vim is using the [`*` register](http://vimhelp.appspot.com/gui.txt.html#quotestar) instead of the [unnamed register](http://vimhelp.appspot.com/change.txt.html#quotequote)^*. This is probably because your [`clipboard` option](http://vimhelp.appspot.com/options.txt.html#%27clipboard%27) includes the value `unnamed`. When configured this way, Vim will use the `*` register instead of the unnamed register for yank, delete, change, and put operations by default (i.e. unless you specify another register with a `"` prefix; e.g. `"ap` to put from the `a` register).

^(*The unnamed register is actually named `"` (double quote). It is only “unnamed” in the sense that you do not have to name it to use it (it is the default). I.e. you do not have to say `""p` to put from the unnamed register, just `p`.)

The default value of `clipboard` does not contain `unnamed`, so it is probably coming from some bit of your configuration (or a plugin). The command `:verbose set clipboard?` will show you the script that set the current value. If this is being done in your configuration file, then you might want to not do it when you are running under *tmux*. E.g:

```
if $TMUX == ''
    set clipboard+=unnamed
endif 
```

Alternatively, there may be some way to let instances of Vim-inside-*tmux* access the GUI selection/clipboard (thus work with the `*` register and/or `unnamed` in `clipboard`). If you are running Mac OS X, you may want to look at [my workaround wrapper](https://github.com/ChrisJohnsen/tmux-MacOSX-pasteboard) that re-enables clipboard access for processes running inside a *tmux* session. If you are using some other OS or GUI, then you will need to find out how Vim would normally talk to the GUI and why it is not working (e.g. wrong DISPLAY value under X11, possibly due to attaching to an old session that is running a shell that has an out-of-date value).

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2013-09-07T15:41:02.583

这是在 vim/tmux/osx 中对我有用的：

1.  安装[自制软件](http://brew.sh/)
2.  安装重新附加到用户命名空间： `brew install reattach-to-user-namespace`
3.  在 .vimrc 中：`set clipboard=unnamed`
4.  告诉 tmux 使用系统剪贴板： 在 .tmux.conf 中：`set-option -g default-command "reattach-to-user-namespace -l bash"`

来源：[https ://coderwall.com/p/j9wnfw](https://coderwall.com/p/j9wnfw)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-11T14:06:55.820

fakeclip插件使剪贴板寄存器在许多终端中按预期[运行](http://www.vim.org/scripts/script.php?script_id=2098)，并支持 tmux/screen。你在用吗？它可能会解决您的问题。

同样，您可能对此提示感兴趣......它不适用于您的问题，但相关。根据您运行 tmux 的系统/终端类型，您可能需要在`.tmux.conf`. 例如，这是我`.tmux.conf`在 OS X 上的摘录（在评论中有一些说明）：

```
# To use pbcopy and pbpaste on OS X, get this wrapper and install
#    git clone https://github.com/ChrisJohnsen/tmux-MacOSX-pasteboard.git
#    cd tmux-MacOSX-pasteboard/
#    make reattach-to-user-namespace
#    mv reattach-to-user-namespace /usr/local/bin
# After installing, the default command can be reset to use the 'reattach-to-user-namespace' 
# wrapper that was compiled/installed as descripted above.
set -g default-command "reattach-to-user-namespace -l /bin/bash"
# #Next, create Ctrl-c and Ctrl-v mappings
bind C-c run "tmux save-buffer - | reattach-to-user-namespace pbcopy"
bind C-v run "tmux set-buffer $(reattach-to-user-namespace pbpaste); tmux paste-buffer" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-15T21:46:35.463

将我在 OSX 上的经验添加到已接受的答案中：

*   确保你这样做`set clipboard=unnamed`而不是`set clipboard=unnamedplus`
*   我不得不杀死我的 tmux 服务器（`$ killall tmux`或`$ tmux kill-session -a`）。重新加载 tmux 配置文件显示 default-command 已设置，但未授予 vim 访问系统剪贴板的权限。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-29T12:02:39.850

迟到的答案，但也可能是您`.tmux.conf`包含以下行：

`set -g set-clipboard off`

结合一个`.vimrc`包含

`set clipboard=unnamed`

这将导致 vim 尝试使用不存在的剪贴板。

# node.js - 为什么这不会在 mongodb 中保存文件内容

> ID：11404803
> 
> 赞同：0
> 
> 时间：2012-07-09T23:44:10.153
> 
> 标签：node.js, express, mongoose

我正在使用 express 2.5.8 和 mongoose 2.7.0。这是我的文档架构。它的集合是我想要存储与事务关联的文件的地方（特别是在内容字符串中）：

```
var documentsSchema = new Schema({
    name            :    String,
    type            :    String,
    content         :    String,    
    uploadDate      :    {type: Date, default: Date.now}
}); 
```

这是我的交易模式的一部分：

```
var transactionSchema = new Schema({
    txId            :    ObjectId,
    txStatus        :    {type: String, index: true, default: "started"},
    documents       :    [{type: ObjectId, ref: 'Document'}]
}); 
```

还有我用来将文档保存到事务中的 express 函数：

```
function uploadFile(req, res){
    var file = req.files.file;
    console.log(file.path);
    if(file.type != 'application/pdf'){
        res.render('./tx/application/uploadResult', {result: 'File must be pdf'});
    } else if(file.size > 1024 * 1024) {
        res.render('./tx/application/uploadResult', {result: 'File is too big'});
    } else{
        var document = new Document();
        document.name = file.name;
        document.type = file.type;
        document.content = fs.readFile(file.path, function(err, data){
            document.save(function(err, document){
                if(err) throw err;
                Transaction.findById(req.body.ltxId, function(err, tx){
                    tx.documents.push(document._id);
                    tx.save(function(err, tx){
                        res.render('./tx/application/uploadResult', {result: 'ok', fileId: document._id});
                    });
                });
            });
        });
    }
} 
```

事务的创建没有任何问题。并且创建了文档记录，并且除了内容之外的所有内容都已设置。

为什么没有设置内容？fs.readFile 将文件作为缓冲区返回，没有任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T00:50:52.290

改变：

```
 document.content = fs.readFile(file.path, function(err, data){ 
```

至：

```
 fs.readFile(file.path, function(err, data){
       document.content = data; 
```

请记住，readFile 是异步的，因此在调用回调之前内容不可用（提示应该是您没有使用该`data`参数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-12T17:55:42.180

您还可以使用同步调用来获取文件内容，而不是像@ebohlman 建议的那样使用异步调用沿着路径前进。

`javascript document.content = fs.readFileSync(file.path)`

# symfony - 使用 deps 管理第三方资源是 Symfony 2 中的一个好习惯吗？

> ID：11404804
> 
> 赞同：3
> 
> 时间：2012-07-09T23:44:30.677
> 
> 标签：symfony

对于我的项目，我使用[Highcharts](http://www.highcharts.com/)图表库和[markItUp](http://markitup.jaysalvat.com/home/) jQuery 编辑器。我想以最小的努力使它们保持最新。我已经把它放在我的`deps`文件中：

```
[Highcharts]
    git=https://github.com/highslide-software/highcharts.com.git
    target=highcharts

[markItUp]
    git=https://github.com/markitup/1.x.git
    target=markItUp 
```

然后使用资产导入：

```
{% javascripts filter='?yui_js' output='js/application.js'
    '../app/Resources/public/js/jquery-*.js'
    '../vendor/highcharts/js/highcharts.src.js'
    '../vendor/markItUp/markitup/js/jquery.markitup.src.js' %}
    <script src="{{ asset_url }}" ></script>
{% endjavascripts %} 
```

一切正常。这是一个好习惯吗？以这种方式管理 javascript 库有什么缺点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T20:01:11.197

是的，使用 deps 添加库是最佳实践。但是，您应该做两件事：

1.  如果您有源代码控制（git、svn），请确保它忽略了库文件夹。最佳实践是不在源代码管理中包含外部库，而是在部署时运行 vendor:install 以加载库。
2.  在许多情况下，您应该添加哈希或版本号以将库锁定到特定版本。这可能不适用于您的情况（因为您说您希望始终使用最新版本），但对于 Symfony 捆绑包之类的东西至关重要。否则，当您运行 vendor:install 时，您将面临将所有内容更新为不受支持的版本的风险（例如，在您使用 2.0 时将捆绑包更新为 SF2.1 的版本）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T08:36:19.740

只要您的供应商不破坏某些东西，那就太好了。因此，如果您需要安全，最好将您的供应商锁定到特定的哈希值（在 deps.lock 中）。或者，您可以在 deps 文件中指定版本，但前提是 git 存储库具有分支/标签。有关示例，请参阅标准版 deps 文件。

# python - 某些线程永远不会自行退出

> ID：11404808
> 
> 赞同：0
> 
> 时间：2012-07-09T23:44:50.860
> 
> 标签：python, multithreading

这是我昨天上传的类似来源，但由于您的帮助解决了一些问题。

问另一个关于同样问题的问题有点羞耻:(

但是虽然我整天思考问题是什么，但我没有找到。所以，

它看起来不错并且可以工作，但问题是，某些线程很长一段时间都不会自行终止。

我什至等了 10 分钟，但 6 个线程仍然存在。

这是我开始学习编程以来最大的谜团......

你能教我它有什么问题吗？

```
import os 
import threading 
import multiprocessing 

def finder(path, q, done): 
    for root, dirs, files in os.walk(unicode(path)): 
        for dirname in dirs: 
            if target in dirname.lower(): 
                q.put(os.path.join(root,dirname)) 
        for name in files: 
            if target in name.lower(): 
                q.put(os.path.join(root,name)) 
    #print "good bye",threading.current_thread()
    #print threading.active_count()
    done.put(1) 

def printer(q,done,worker_count): 
    total = 0 
    while 1: 
        try: done.get_nowait() 
        except: pass 
        else: total += 1 

        try: tmp=q.get(timeout=1) 
        except: pass 
        else: print tmp            

        if total == worker_count: 
            break 

if __name__ =="__main__": 

    results = multiprocessing.Queue() 
    done = multiprocessing.Queue() 

    root, dirs, files = os.walk(u"C:\\").next() 
    for dirname in dirs: 
        if target in dirname.lower(): 
            q.put(os.path.join(root,dirname)) 
    for name in files: 
        if target in name.lower(): 
            q.put(os.path.join(root,name)) 

    thnum=len(dirs) 
    target=raw_input("what you wanna get\n") 

    for i in xrange(thnum): 
        full_path = os.path.join(root, dirs[i]) 
        t=threading.Thread(target=finder,args=(full_path, results, done,)) 
        t.start() 

    p=multiprocessing.Process(target=printer,args=(results,done,thnum,)) 
    p.start() 

    p.join() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T02:40:55.990

[首先，当然，我必须进行一些微不足道的更改才能使此代码“编译”]

好消息是：它就像你认为它应该工作的那样工作。做得好。坏消息是：它的工作速度不如你预期的那么快。

在我的机器上，仅在我的主目录上运行它就需要大约 10 分钟：

```
[andre@hp ~]$ time python snippet.py
what you wanna get
test.txt
... results removed ...

real        9m39.083s
user        0m30.368s
sys         0m22.664s
[andre@hp ~]$ 
```

问题是在进程和线程中实现这一点是否是一个好主意。我想不是。这种大规模的多线程可能会影响性能。

# html - twitter bootstrap - 如何跳过一行？

> ID：11404812
> 
> 赞同：5
> 
> 时间：2012-07-09T23:45:25.837
> 
> 标签：html, css, twitter-bootstrap

跳线的正确方法是什么？这样我上排的图像就不会粘在下排的菜单上吗？（即行之间应该有空格）

目前我这样做：

```
 <div class="row"> 
 <div class="span12"> </br></div>
 </div> 
```

这似乎是可以接受的，因为我没有以任何方式破坏 css 模板，但我想知道人们通常是如何做到的。

（我正在使用 12 列模板）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T02:32:59.803

将页面的样式或装饰与页面的内容分开通常是一种很好的做法。装饰应由 CSS 处理，内容应由 HTML 处理。

换行被视为内容，因此不建议使用换行作为页面的样式。

我想你想要的是这样的。

```
.row {
  padding-top: 20px;
} 
```

`row`这将在div的顶部提供 20px 的填充。

# symfony - Symfony2：在不同环境中部署的两个应用程序之间共享实体的最佳方式

> ID：11404814
> 
> 赞同：2
> 
> 时间：2012-07-09T23:45:38.587
> 
> 标签：symfony

我正在 symfony2 中开发两个应用程序，一个用于管理，另一个用于用户。我知道一些[symfony2 专家](http://blog.liip.ch/archive/2011/05/19/symfony2-bundle-structure-a-use-case.html)提出的最佳架构是制作包含管理和前端命名空间的包。但就我而言，我不这样做，因为管理和前端应用程序需要部署在不同的环境中。admin 应用会部署在内网（非公共访问），而前端将正常部署在公共域。问题是两个应用程序使用相同的实体，我不知道在两个应用程序之间共享这个实体的最佳方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T01:17:02.803

我假设您的意思是实体类，而不是存储在数据库中的实际实体。在这种情况下，您的问题可以通过创建一个包含实体（以及需要在两个代码库之间共享的任何其他代码）的包并为其创建一个 git 存储库来轻松解决。然后，您可以更新每个项目的`deps`文件以引用此存储库。然后，调用`php bin/vendors install`将把你的包添加到`vendor`目录中。只需在每个项目中注册捆绑包，您就可以开始使用了。

查看有关 Symfony2 和 Git的[文档。](http://symfony.com/doc/current/cookbook/workflow/new_project_git.html)

希望这可以帮助。

# java - 在 Java 中拆分文件

> ID：11404820
> 
> 赞同：0
> 
> 时间：2012-07-09T23:46:23.997
> 
> 标签：java, split, bufferedreader

要将文件读入列表，请创建一个名为 ListUtils 的新类并编写一个名为 public static ListElement readMP3List(String fileName) 的方法 throws IOException 它将获取要读取的文件的名称并返回包含该文件的对象。在 readMP3List 中，您应该使用 java.io.BufferedReader 和 java.io.FileReader 类打开 fileName 并一次读取一行。您应该将每一行分成其文件名、艺术家等，然后使用这些值来填充一个新的 MP3Info 对象。然后您创建一个新的 ListElement 对象，其中包含您刚刚创建的 MP3Info 对象并将其放入您的列表中。

到目前为止，我有：

```
public class ListUtils{

    public static ListElement readMP3List(String fileName) throws IOExeption{
    {
            // takes name of file  to be read
            // returns the head of Linkedlist
            File file = new File("random_sample.tsv");
            BufferedReader br = new BufferedReader(new FileReader(file));
            String first= br.readLine();
    } 
```

该文件有多行名称、艺术家等，我必须在其中拆分。我真的很困惑如何使用 split(regex) 来实现这一点。

文件示例如下： fileName 艺术家 songName 专辑 trackNum numSeconds year 流派 \n

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T23:58:06.573

我要冒昧地说这是家庭作业？无论如何，这是朝着正确方向迈出的一步：鉴于您的文件似乎具有扩展名`tsv`，我只能假设您的值由制表符分隔。要按选项卡拆分，请查看 using [split(...)](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29) with `\t`。

*注意：您没有使用`fileName`传入的 :)*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T00:47:46.260

我认为这是你需要的：

```
String fist=  "fileName artist songName album trackNum numSeconds";

String[] data = fist.split(" ");//whitespace if tab replace with "\t"

String fileName = data[0];
String artist = data[1];
String songName = data[2];
String album = data[3];
String trackNum = data[4];
String numSeconds = data[4]; 
```

# java - 二维数组大小更改错误Java

> ID：11404822
> 
> 赞同：1
> 
> 时间：2012-07-09T23:46:39.960
> 
> 标签：java, arrays, dynamic, size

我正在尝试使用 Arrays.copyOf 和 import java.util.Arrays 来调整数组的大小，但由于某种原因，即使控制台输出数组长度为 4，就像我尝试分配值时应该的那样对于数组第 4 行中的任何内容，它在尝试为第 4 行中的某些内容分配值的行上给了我一个 nullPointerException。有人可以向我解释一下吗？

```
import java.util.Arrays;
import static java.lang.System.out;

public class Main {
    static int TTT[][] = new int[3][3];

    public static void main(String[] args) {
        TTT = Arrays.copyOf(TTT, 4);
        out.print(TTT.length);
        TTT[3][0] = 2;
    }
} 
```

这给了我一个输出：

```
4Exception in thread "main" java.lang.NullPointerException
    at Main.main(Main.java:13) 
```

有谁知道为什么会这样。另外在旁注中是否有更好的方法让我也可以创建一个可以更改大小的数组？如果可以，请给我一些示例代码！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T23:50:35.780

从[文档](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#copyOf%28T%5B%5D,%20int%29)中：

> 复制指定的数组，截断或填充空值（如有必要），使副本具有指定的长度。对于在副本中有效但在原始副本中无效的任何索引，副本将包含 null。当且仅当指定长度大于原始数组的长度时，此类索引才会存在。结果数组与原始数组的类完全相同。

发生的情况是数组大小增加了，因此`int[3]`在位置创建了一个新的引用，并按照文档所述`TTT[3]`进行了初始化。`null`数组具有原始类型这一事实并不意味着它应该自行初始化内部数组。

尝试：

```
TTT = Arrays.copyOf(TTT, 4);
TTT[3] = new int[3]; 
```

# c++ - 在 C++ 中搜索合适的数据结构以推入向量

> ID：11404827
> 
> 赞同：1
> 
> 时间：2012-07-09T23:47:05.590
> 
> 标签：c++

我希望将以下内容推送到向量中，该数据结构适用于相同的数据结构：我要推送：

```
(1, 10)
(2, 11)
(3, 12) 
```

我知道如何将整数推入向量，但我不确定我现在拥有的列表。我正在寻找一种内存高效的数据结构。我知道在这种情况下我可以使用向量和列表，但哪个是内存效率高的。如果有任何其他内存高效的数据结构，请提出建议。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T23:49:12.740

一些结构或`std::pair<int, int>`.

```
#include <utility> /* std::pair<T1,T2> */

...

std::vector<std::pair<int, int>> vec;

vec.push_back(std::make_pair (1, 10));
vec.push_back(std::make_pair (2, 11));

for (auto iter = vec.begin(); iter != vec.end(); ++iter)
    std::cout << iter->first << " " << iter->second << std::endl; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-09T23:49:14.133

怎么样`std::pair`？

```
std::vector<std::pair<int,int> > 
```

# java - Powermockito：HashMap 的参数匹配

> ID：11404828
> 
> 赞同：2
> 
> 时间：2012-07-09T23:47:10.807
> 
> 标签：java, mockito, powermock

我有一个功能如下：

```
class A {

  static funcA(HashMap<String, Boolean> h);  

} 
```

我必须模拟这个方法 funcA 所以，我在做

```
PowerMockito.when(A.funcA(anyObject()); 
```

现在，我收到 funcA 不适用于 Object 的错误。如何获得哈希图的匹配项，例如 anyString() 或 anyInt() ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T01:14:29.093

尝试这样做：

```
any(HashMap.class) 
```

它应该匹配您指定的类的任何实例（`HashMap`在本例中）

# php - MySQL：想知道如何在调整时区后根据天选择记录

> ID：11404830
> 
> 赞同：0
> 
> 时间：2012-07-09T23:47:43.760
> 
> 标签：php, mysql, timezone, timezone-offset, convert-tz

我想根据表中的具体情况选择“当前可用”的记录。我认为这应该很容易，但当然，我没有看到它。我希望在这里问能让我的头脑足够清醒，也许我可以回答我自己的问题！

我有 2 张桌子：

```
table_1  
    id  
    time_zone_name (eg, "US/Eastern")

table_2  
    tab1_id  
    day_of_week (1=Monday, 7=Saturday) 
```

鉴于我知道当前的 GMT 时间戳是“2012-07-08 13:35:00 GMT”，我应该能够从 table_1 中选择记录，其中 table_2.day_of_week*在调整 time-zone 后*是匹配的。

MySql 函数 CONVERT_TZ 看起来很有希望！

> CONVERT_TZ('2004-01-01 12:00:00','GMT','MET')
> CONVERT_TZ('2004-01-01 12:00:00','+00:00','+10:00 ');

我可以试试这个：

> SELECT id from table_1 inner join table_2 ON (table_1.id=table_2.table_1_id)
> WHERE DAYOFWEEK(CONVERT_TZ(UTC_TIMESTAMP, 'GMT', table_1.time_zone_name)) = table_2.day_of_week

但是 CONVERT_TZ 函数不接受安装在我的主机上的 MySql 上的区域名称，例如“US/Eastern”。根据 MySql 文档：

> 要使用命名时区，例如“MET”或“Europe/Moscow”，必须正确设置时区表。

显然他们没有正确设置。

有没有更好的方法来解决这个问题？任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T01:20:12.743

如果您使用查找表来获得差异，我相信您是在询问站点用户他们在哪里。一旦他们进入他们的位置，您就可以轻松地使用一些 PHP 通过您的脚本设置他们的本地化。[使用php 本地化](http://php.net/manual/en/function.date-default-timezone-set.php)这很容易。[时区列表](http://www.php.net/manual/en/timezones.php)确实很大。虽然它确实包含您的美国/东部示例，但不建议您实施 t 因为它只是为了向后兼容而维护（在“其他”下）。

然后你可以使用[php date](http://us3.php.net/manual/en/function.date.php)来`date('Z')`获得他们在几秒钟内的偏移量。如果您将日期时间字段存储为 unix 时间戳，那么添加或减去它们的偏移量将是一件小事。通过这种方式，您可以标准化您存储的数据并将其保持在零偏移量 (GMT)。

当您查询数据库中的数据时，只需将在上述步骤中获得的偏移量添加到结果输出中即可。您甚至可以`date()`再次使用将日期/时间格式化为其本地格式类型。

# java - 复制数组的每个其他字节的最快方法

> ID：11404832
> 
> 赞同：1
> 
> 时间：2012-07-09T23:48:33.827
> 
> 标签：java, android, optimization, yuv, arrays

作为一个简单的问题：**有没有办法在 Java 中将每个*其他字节从一个数组快速复制到另一个数组？***

**免责声明**：我的代码已经足够快了，但我发现自己想知道是否有任何本机方法比简单的 for 循环更快。

**问题详细信息**（对于那些感兴趣的人）：我将 YUV 字节数组拆分为三个单独的字节数组（Y、U 和 V）。如果您之前没有见过 YUV 数组（在 Android 标准 NV21 格式中），则结构是 Y 的高度*宽度字节，后跟（高度*宽度）/2 字节的 UV 数据（我们的眼睛对色度分辨率不太敏感）交错. 可以使用`arraycopy`以下方法优化将 Y 字节传输到专用数组中：

```
System.arraycopy(yuvs, 0, yArray, 0, imgSize.width*imgSize.height); 
```

但是，我将 UV 部分复制到专用数组中，如下所示：

```
for (bt_y = 544; bt_y < previewSize.height*(3.0/2.0); bt_y++) {
  for (bt_x = 0; bt_x < 960;) {
    uArray[UVIndex] = yuvs[bt_y*960+bt_x++];
    vArray[UVIndex++] = yuvs[bt_y*960+bt_x++];              
  }
} 
```

有没有一种方法可以以某种方式接受“步幅”变量或可以允许以已知间隔选择元素的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T02:25:06.637

不。 System.arraycopy 速度很快，因为它可以直接映射到 memcpy，而 memcpy 反过来只是将一些内存从一个地方复制到另一个地方，并且零处理。

您的案件需要处理，而且必须在某处进行。你可以用 C (JNI) 来做，但根据我的经验，这是不值得的，JIT 编译器无论如何都会很好地优化这样一个简单的案例。

# mule - Mule Standalone 的实际工作原理是什么？

> ID：11404837
> 
> 赞同：3
> 
> 时间：2012-07-09T23:49:13.930
> 
> 标签：mule

我是 Mule 的新手，我试图了解 mule 独立与嵌入式之间的区别。我已阅读有关此的主题，但我无法回答一个问题。骡子独立实际上是如何工作的？它如何处理网络服务？它有应用服务器的功能吗？它有嵌入式或捆绑的应用服务器吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T01:34:59.377

Mule Standalone Server 是一个专有的应用程序服务器，它托管[以特定格式打包的](http://www.mulesoft.org/documentation/display/MULE3USER/Application+Format)Mule 特定应用程序。

或者，Mule 可以嵌入到另一个应用程序（如 JavaEE Web 应用程序）中，就像可以嵌入 Spring Web Flow 一样：添加 Maven 依赖项并通过引导类将 Mule 绑定到容器（如 JavaEE Web 应用程序的 Servlet 上下文侦听器） .

独立于部署场景（独立或嵌入式），Mule 应用程序可以做很多事情，包括公开 Web 服务。

# hadoop - 这是从命令行启动 hadoop 作业的唯一方法吗？

> ID：11404842
> 
> 赞同：1
> 
> 时间：2012-07-09T23:49:52.780
> 
> 标签：hadoop

我现在在伪分布式模式下使用 hadoop。我尝试了一些mapreduce，将其打包为jar，并将文件复制到hadoop。然后使用

***./bin/hadoop 罐子******

开始它。

我的问题是：还有**其他方法**吗？如果我们有数千个工作要运行。我们不能只输入命令。我们在生产环境中做什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T01:35:01.710

如果您有 1000 个作业，请编写一个 shell 脚本并在作业之间没有依赖关系的情况下提交它们。如果存在依赖项，请尝试使用 Chris 提到的 Apache Oozie。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T00:01:09.570

可以自动启动 MapReduce 作业。比如一个java程序，可以启动一个job。诀窍是确保您将作业导出到 jar 文件中，并从您的 java 代码中调用该导出的 jar 文件（这是单独的）。我最近有一个类似的问题并发布了它，也许它也与你有关。

[从 Eclipse 启动 mapreduce 作业](https://stackoverflow.com/questions/11236305/launch-a-mapreduce-job-from-eclipse)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T01:25:43.943

如果您需要安排作业运行，或者想要设计具有相互依赖关系的作业工作流，请查看 Apache OOZIE。

# mysql - 具有独立 WHERE 子句的任意数量表上的 MySQL JOIN

> ID：11404843
> 
> 赞同：1
> 
> 时间：2012-07-09T23:49:54.670
> 
> 标签：mysql, join, where

我正在构建一个具有大量潜在输入的复杂搜索应用程序。每个输入都是可选的。我正在尝试以模块化方式构建查询。

假设我有两个不同的查询，每个查询都有独立的`WHERE`条件：

```
SELECT * FROM t1 WHERE t1.c1 = x

SELECT * FROM t2 WHERE t2.c1 = y 
```

我发现以下代码是有效的：

```
SELECT * FROM t1 INNER JOIN t2 ON t1.c2 = t2.c2 WHERE t1.c1= x AND t2.c1= y 
```

但是，由于最后将`WHERE`条件组合在一起，因此很难以模块化方式实现这一点。所以，我尝试了这个：

```
SELECT * FROM t1 WHERE t1.c1 = x INNER JOIN ON t1.c2 = t2.c2 WHERE t2.c1 = y 
```

但是，此代码无效。`WHERE`用独立子句连接任意数量的表的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T00:02:10.840

在这种情况下，我在代码中动态构建 WHERE 子句。我不确定是否有更好的方法。

请务必使用[准备好的语句](http://dev.mysql.com/doc/refman/5.5/en/connector-net-programming-prepared.html)（参数化查询）。构建没有参数的 WHERE 子句是一个[巨大的安全问题](http://xkcd.com/327/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T00:23:05.893

表之间的连接可能能够有条件地实现 - 并且`where`在末尾连接子句 - 如下所示：

```
SELECT * 
FROM t1 
  INNER JOIN t2 ON t1.c2 = t2.c2 
  INNER JOIN t3 ON t1.c3 = t3.c3  
  INNER JOIN t4 ON t1.c4 = t4.c4  
WHERE t1.c1 = x 
  AND t2.c2 = y
  AND t3.c3 = z
  AND t4.c4 = a 
```

您可以根据用户选择的选项有条件地将其构建为字符串。

虽然动态构建`where`子句和`joins`一起可能有效，但可能存在一些需要注意的陷阱。

首先，连接仍然可能必须根据表连接在一起的自然方式定制构建——例如，`t3`可能只能连接到`t2`而不是`t1`。`where`这些条款也会有类似的问题。每个 where 子句都必须根据表中的列自定义构建。

换句话说，这个问题不太可能完全概括。最后，您需要根据表的具体情况编写自定义 SQL。更糟糕的是，随着时间的推移，表会改变，SQL 也必须随之改变。如果您正在动态构建复杂的 SQL，您可能会遇到维护难题。

此外，随着应用程序的增长，您可能希望针对每种组合调整 SQL 以优化查询。确保在构建时尝试考虑到这一点。

# api - 请求 Shopify API 以允许创建客户和订单

> ID：11404848
> 
> 赞同：2
> 
> 时间：2012-07-09T23:50:44.990
> 
> 标签：api, shopify

我想检查一下 Shopify API 何时能够创建订单是否有任何更新？目前我们只能检索、编辑和删除订单。

这是在路线图上（如果是的话，你能给我一个粗略的预计到达时间）还是永远不会公开？

谢谢，

斯图尔特。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T11:34:26.423

这是我们正在考虑的事情，没有预计到达时间。

# javascript - Jquery 两个元素，在焦点/单击上切换...有效但滞后

> ID：11404850
> 
> 赞同：0
> 
> 时间：2012-07-09T23:50:50.927
> 
> 标签：javascript, jquery, focus, jquery-events

这可以像我想要的那样工作[http://jsfiddle.net/nosfan1019/gvQYh/](http://jsfiddle.net/nosfan1019/gvQYh/) 但是如果焦点/单击更改为同级元素，则会出现明显的延迟。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T23:55:27.573

尝试这个：

> 当元素获得焦点时，焦点事件被发送到元素。此事件隐式适用于一组有限的元素，例如表单元素 ( `<input>, <select>, etc.`) 和链接 ( `<a href>`)。

```
$('#ooo').bind('focus click', function () {
    $('#kkk').text('hello');
});

$('#ooo').blur( function () { // you can use `blur` handler
    $('#kkk').empty();
}); 
```

[http://jsfiddle.net/gvQYh/1/](http://jsfiddle.net/gvQYh/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T02:06:10.017

After a little wrangling I have a solution :)

```
$('#ooo').focus(function () {
    $('#kkk').text('hello');
    visible = true;
});

$('* :not(#ooo)').focus( function() {
    if (visible) {
       $('#kkk').empty();
       visible = false;
    }
});​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

[http://jsfiddle.net/nosfan1019/3nK84/](http://jsfiddle.net/nosfan1019/3nK84/)

# ios - 如何将 NSString 格式化为美国的电话号码？

> ID：11404851
> 
> 赞同：0
> 
> 时间：2012-07-09T23:51:00.830
> 
> 标签：ios, objective-c, nsstring, uitextfield, phone-number

我有一个简单的应用程序，可以帮助招聘人员在活动中收集信息。一个表单字段用于电话号码，我想要一种简单的方法来在用户键入时重新格式化电话号码。

电话号码应随着用户键入而变化，因此一串数字的示例输出应如下所示：

```
1
1 (20)
1 (206) 55
1 (206) 555-55
1 (206) 555-5555 
```

或者，如果用户没有在区号前输入 1，电话号码将像这样演变：

```
(20)
(206) 55
(206) 555-55
(206) 555-5555 
```

如果电话号码太长，那么它应该只显示一串普通的数字：

```
20655555555555555 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T23:51:01.297

这是我所做的：通过获取文本来`UITextFieldDelegate`处理方法，并运行我编写的一个小方法：`textField:shouldChangeCharactersInRange :replacementString:``UITextField`

```
-(void)updatePhoneNumberWithString:(NSString *)string {

    NSMutableString *finalString = [NSMutableString new];
    NSMutableString *workingPhoneString = [NSMutableString stringWithString:string];

    if (workingPhoneString.length > 0) {
    //This if statement prevents errors when the user deletes the last character in the textfield.

        if ([[workingPhoneString substringToIndex:1] isEqualToString:@"1"]) {
        //If the user typed a "1" as the first digit, then it's a prefix before the area code.
            [finalString appendString:@"1 "];
            [workingPhoneString replaceCharactersInRange:NSMakeRange(0, 1) withString:@""];
        }

        if (workingPhoneString.length < 3) {
        //If the user is dialing the area code...
            [finalString appendFormat:[NSString stringWithFormat:@"(%@)", workingPhoneString]];

        } else if (workingPhoneString.length < 6) {
        //If the user is dialing the 3 digits after the area code...
            [finalString appendFormat:[NSString stringWithFormat:@"(%@) %@", 
                                       [workingPhoneString substringWithRange:NSMakeRange(0, 3)], 
                                       [workingPhoneString substringFromIndex:3]]];

        } else if (workingPhoneString.length < 11) {
        //If the user is dialing the last 4 digits of the phone number...
            [finalString appendFormat:[NSString stringWithFormat:@"(%@) %@-%@", 
                                       [workingPhoneString substringWithRange:NSMakeRange(0, 3)], 
                                       [workingPhoneString substringWithRange:NSMakeRange(3, 3)],
                                       [workingPhoneString substringFromIndex:6]]];
        } else {
        //If the user's typed in a bunch of characters, then just show the full string.
            finalString = phoneString;
        }

        phoneNumberField.text = finalString;
    } else {
    //If the user changed the textfield to contain no text at all...
        phoneNumberField.text = @"";
    }

} 
```

希望这对你有帮助！

# javascript - 没有外部库的 JavaScript 自动完成

> ID：11404855
> 
> 赞同：49
> 
> 时间：2012-07-09T23:51:13.530
> 
> 标签：javascript, autocomplete

是否有不依赖于任何其他库的 javascript 自动完成库？

我没有使用 jQuery 或类似的东西，因为我正在制作一个需要保持额外光线的移动应用程序。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2015-02-04T12:13:14.063

[这](http://jsfiddle.net/StevenIseki/qo9yzj3r/)是一个基本的 JavaScript 示例，可以将其修改为自动完成控件：

```
var people = ['Steven', 'Sean', 'Stefan', 'Sam', 'Nathan'];

function matchPeople(input) {
  var reg = new RegExp(input.split('').join('\\w*').replace(/\W/, ""), 'i');
  return people.filter(function(person) {
    if (person.match(reg)) {
      return person;
    }
  });
}

function changeInput(val) {
  var autoCompleteResult = matchPeople(val);
  document.getElementById("result").innerHTML = autoCompleteResult;
}
```

```
<input type="text" onkeyup="changeInput(this.value)">
<div id="result"></div>
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2017-04-14T18:55:52.677

对于 2017 年以后需要简单解决方案的任何人，您可以使用 HTML5 的内置`<datalist>`标签而不是依赖 JavaScript。

例子：

```
<datalist id="languages">
  <option value="HTML">
  <option value="CSS">
  <option value="JavaScript">
  <option value="Java">
  <option value="Ruby">
  <option value="PHP">
  <option value="Go">
  <option value="Erlang">
  <option value="Python">
  <option value="C">
  <option value="C#">
  <option value="C++">
</datalist>

<input type="text" list="languages"> 
```

[https://developer.mozilla.org/en-US/docs/Web/HTML/Element/datalist](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/datalist)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-07-10T01:57:03.823

自动完成脚本的核心是对术语字典的 ajax 调用。

我假设您的移动应用程序已经包含一个 ajax 功能，所以也许您最好从头开始编写您的自动完成功能？基本上，您需要一个输入标记、一个触发 ajax 调用的 keyup 事件处理程序以及一个用于收集响应的 div。

[更新] 根据评论，来自 John Resig 博客的一些参考资料：

[http://ejohn.org/blog/revised-javascript-dictionary-search/](http://ejohn.org/blog/revised-javascript-dictionary-search/)

[http://ejohn.org/blog/jquery-livesearch/](http://ejohn.org/blog/jquery-livesearch/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-09-27T07:43:17.283

ES2016 特性：`Array.prototype.includes`没有外部库。

```
function autoComplete(Arr, Input) {
    return Arr.filter(e =>e.toLowerCase().includes(Input.toLowerCase()));
} 
```

[Codepen 演示](https://codepen.io/ronaldaug/pen/PyYmgx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T00:06:42.257

我通过将 JSON 请求发送回服务器并使用 Python 代码执行自动完成来完成此操作。它有点慢，但它节省了发送大量数据。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-18T17:21:49.270

前天晚上我正在研究这个，我的解决方案最初就像这里的 ES6 解决方案，像这样：

```
return this.data.filter((option) => {
    return option.first_name
        .toString()
        .toLowerCase()
        .indexOf(this.searchTerms.toLowerCase()) >= 0
}) 
```

但问题在于它不够健壮，无法处理过滤嵌套数据。您可以看到它正在过滤`this.data`，其数据结构如下：

```
[
    { first_name: 'Bob', },
    { first_name: 'Sally', },
] 
```

您可以看到它基于`this.searchTerms`搜索词和小写后的过滤器`option.first_name`，但是搜索起来太死板了`option.user.first_name`。我最初的尝试是通过字段进行过滤，例如：

```
this.field = 'user.first_name'; 
```

但这涉及到野蛮的自定义 JavaScript 来处理类似`this.field.split('.')`的事情并动态生成过滤器函数。

相反，我记得我之前使用过的一个旧库`fuse.js`，它运行良好，因为它不仅可以处理我刚刚调用的任意嵌套的情况，`this.field`还可以处理基于定义阈值的模糊匹配。

在这里查看：[https ://fusejs.io/](https://fusejs.io/)

[编辑说明]：我意识到这个问题正在寻找无外部库，但我想将这篇文章保留在这里，因为它提供了相邻的值。它并非旨在成为“解决方案”。

这是我目前使用它的方式：

```
import Fuse from 'fuse.js';

const options = {
    threshold: 0.3,
    minMatchCharLength: 2,
    keys: [this.field],
};

const fuse = new Fuse(this.data, options);

this.filteredData = fuse.search(this.searchTerms); 
```

您必须阅读 Fuse 文档才能更好地理解这一点，但从根本上说，您可以看到一个`new Fuse()`对象是使用要过滤的数据和选项创建的。

这`keys: [this.field]`部分很重要，因为这是您传递要搜索的键的地方，并且您可以传递它们的数组。例如，您可以`this.data`按过滤`keys: ['user.first_name', 'user.friends.first_name']`。

我目前在 Vue JS 中使用它，所以我在实例`watch`函数中有上述逻辑，所以每次`this.searchTerms`更改时，该逻辑都会运行并更新，这些逻辑`this.filteredData`会放入我的自动完成组件的下拉列表中。

另外很抱歉，我刚刚意识到这个问题没有外部库，但我还是会发布这个问题，因为每次我在 Vue JS 或 React JS 中进行 ES6 自动完成时都会发现这个问题。我认为有严格或松散的模糊匹配和支持任意嵌套的数据是非常有价值的。基于 Webpack 捆绑分析器，`fuse.js`压缩后为 4.1kb，因此它非常小，因为它可以支持“所有”客户端过滤需求。

如果您使用外部库的能力有限，请考虑我的第一个示例代码。如果您的数据结构是静态的，它就可以工作，并且您可以轻松地更改`option.first_name`为`option[this.field]`如果您希望对搜索字段进行变量化（即：如果您的对象始终是平面的）。

您也可以更改列表以进行搜索。尝试这样的事情：

```
const radicalFilter = ({ collection, field, searchTerms }) => {
    return collection.filter((option) => {
        return option[field]
            .toString()
            .toLowerCase()
            .indexOf(searchTerms.toLowerCase()) >= 0
    })
}

radicalFilter({
    collection: [{ first_name: 'Bob' }, { first_name: 'Sally' }],
    field: 'first_name',
    searchTerms: 'bob',
}) 
```

根据我过去几年的经验，上述示例非常有效。我已经用它过滤了一个`react-table`组件中的 10,000 条记录，并且毫不费力。它不会创建任何额外的中间数据结构。它只是`Array.prototype.filter()`获取您的数组并返回一个包含匹配项的新数组。

# javascript - 获取带有 colspan 孩子的行？

> ID：11404862
> 
> 赞同：0
> 
> 时间：2012-07-09T23:52:56.313
> 
> 标签：javascript, jquery, jquery-selectors

如何在 jQuery 中获取对所有具有带有 colspan 的子单元格的行（tr's）的引用？

```
<table id="report">
    <tr>
        <th>Lorem ipsum</th>
        <th>Lorem ipsum</th>
        <th>Lorem ipsum</th>
        <th>Lorem ipsum</th>
    </tr>
    <tr>
        <td>Lorem ipsum</td>
        <td>Lorem ipsum</td>
        <td>Lorem ipsum</td>
        <td>Lorem ipsum</td>
    </tr>
    <tr>
        <td colspan="4">
            <!-- Details here -->  
        </td>
    </tr>
    <tr>
        <td>Lorem ipsum</td>
        <td>Lorem ipsum</td>
        <td>Lorem ipsum</td>
        <td>Lorem ipsum</td>
    </tr>
    <tr>
        <td colspan="4">
            <!-- Details here -->  
        </td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T23:56:02.200

像这样...

```
$('#report td[colspan]').parent(); 
```

或这个...

```
$('#report tr:has(td[colspan])'); 
```

虽然我更喜欢第一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T23:55:53.223

这应该适合你：

```
$('td[colspan="4"]').parent(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T23:56:43.233

```
$("#report td[colspan]") 
```

使用[属性等于](http://api.jquery.com/attribute-equals-selector/)选择器

```
$("#report td[colspan]")
[<td colspan=​"4">​…​&lt;/td>​, <td colspan=​"4">​…​&lt;/td>​] 
```

如果要搜索具有特定 colspan 的 td，可以使用

```
$("#report td[colspan='4']") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T23:59:27.200

您可以使用`:has()`和属性选择器：

```
$('tr:has([colspan])'); 
```

# vim - 如何删除vim Powerline中的段？

> ID：11404863
> 
> 赞同：3
> 
> 时间：2012-07-09T23:52:57.233
> 
> 标签：vim, vim-plugin

我正在使用[vim Powerline](https://github.com/Lokaltog/vim-powerline/)，默认情况下它在电力线中有很多段。超过我想要的。

我想删除几个默认的。具体来说，那个告诉我我的 git 分支、文件编码、源语言、行/列号、那个说 unix（可能是行结束）的那个。

在[文档](https://github.com/Lokaltog/vim-powerline/blob/f0caee81697fd0021c82caee61265fdc3ae191de/doc/Powerline.txt#L272)中，他们说您应该能够使用 Pl#Theme#RemoveSegment。

所以我添加`call Pl#Theme#RemoveSegment('fugitive')`到我的 ~/.vimrc 中，然后运行`:PowerlineClearCache`并重新加载文件，但 git 分支仍然存在。也许我的名字弄错了，我猜这是根据[这里](https://github.com/Lokaltog/vim-powerline/blob/c4b72c5be57b165bb6a89d0b8a974fe62c0091d0/autoload/Powerline/Segments/fugitive.vim#L1)的命名进入我的 git 分支的那个。

如果有一种方法可以反映某个变量并查看注册了哪些段，那将很有用，但我不知道我的名字是错误的，还是错误地调用了方法，或者是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T02:16:17.963

[主题列表](https://github.com/Lokaltog/vim-powerline/blob/c4b72c5be57b165bb6a89d0b8a974fe62c0091d0/autoload/Powerline/Themes/default.vim)建议段名可能应该是`fugitive:branch`而不是`fugitive`. 不过有点猜测。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T18:31:02.670

可能会添加更多段。我个人建议不要使用`Pl#Theme#RemoveSegment`以下方法：

1.  复制`{path/to/powerline}/autoload/Powerline/Themes/default.vim`到`~/.vim/autoload/Powerline/Themes/my.vim`.
2.  将新文件的第一行替换为`default`:`my`它应该看起来像

    ```
    let g:Powerline#Themes#my#theme = Pl#Theme#Create( 
    ```

3.  添加

    ```
    let g:Powerline_theme='my' 
    ```

4.  删除所有你不需要的东西，你会发现很多。

# jquery - 如何在 MVC3 中使用掩码进行客户端验证，但没有进行模型验证？

> ID：11404867
> 
> 赞同：0
> 
> 时间：2012-07-09T23:53:59.490
> 
> 标签：jquery, asp.net-mvc-3, unobtrusive-validation

我通常将电话号码作为 10 位数字存储在数据库中。但是，我想使用一个 jQuery 掩码输入插件来引导用户使用这样的掩码：（**_）****-* ___。不幸的是，我的 StringLength 属性以及客户端上的 \d{10} 正则表达式属性都失败了。我可以创建自己的自定义电话验证器属性，但它总是被其他属性压倒。有没有办法选择哪些验证器在客户端完成？我使用的是代码优先，所以我绝对希望我的 StringLength 属性保留在我的模型上。我只是不希望他们总是参与客户验证。*

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T10:45:04.273

如果您可以禁用此属性的客户端验证并可能自己实现某些东西，那么您可以考虑附加到此属性的自定义模型绑定器（请参见[此处](https://stackoverflow.com/questions/2186969/custom-model-binder-for-a-property)）并在它到达您的模型之前去除额外的数据位。*

# c# - 使用反射投射对象

> ID：11404870
> 
> 赞同：0
> 
> 时间：2012-07-09T23:54:18.157
> 
> 标签：c#, reflection

我对反射有点陌生，所以如果这是一个更基本的问题，请原谅我，我正在用 c# 编写程序，并且正在尝试编写一个通用的 Empty 或 null 检查器方法，到目前为止代码读取为

```
 public static class EmptyNull
    {
       public static bool EmptyNullChecker(Object o)
       {
           try
           {
               var ob = (object[]) o;
               if (ob == null || !ob.Any())
                   return true;
           }
           catch (Exception e)// i could use genercs to figure out if this a array but                  //figured i just catch the exception
           {Console.WriteLine(e);}
           try
           {
               if (o.GetType().GetGenericTypeDefinition().Equals("System.Collections.Generic.List`1[T]"))
               //the following line is where the code goes haywire
              var ob = (List<o.GetType().GetGenericArguments()[0].ReflectedType>)o;
               if (ob == null || !ob.Any())
                   return true;
           }
           catch (Exception e)
           { Console.WriteLine(e); }
           return o == null || o.ToString().Equals("");//the only thing that can return "" after a toString() is a string that ="", if its null will return objects placeMarker
       }
    } 
```

现在显然对于一个列表，我需要一种方法来确定它是什么类型的通用列表，所以我想使用反射来找出它，然后用反射投射它这可能吗

谢谢你

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-10T00:02:12.790

如果您想要的只是一个在对象为 null 或对象为空可枚举的情况下返回 true 的方法，那么我不会为此使用反射。几个扩展方法怎么样？我认为它会更干净：

```
public static class Extensions
{
    public static bool IsNullOrEmpty(this object obj)
    {
        return obj == null;
    }

    public static bool IsNullOrEmpty<T>(this IEnumerable<T> obj)
    {
        return obj == null || !obj.Any();
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T00:04:14.457

如果您使用的是 .NET 4，则可以将[`IEnumerable<out T>`](http://msdn.microsoft.com/en-us/library/9eekhta0.aspx)'s 对协方差的新支持考虑在内，并将其写为：

```
public static bool EmptyNullChecker(Object o)
{
    IEnumerable<object> asCollection = o as IEnumerable<object>;
    return o != null && asCollection != null && !asCollection.Any(); 
} 
```

但是，我会建议一个更好的名称，例如受[string.IsNullOrEmpty启发的名称](http://msdn.microsoft.com/en-us/library/system.string.isnullorempty.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T13:18:16.303

[如何：使用反射检查和实例化泛型类型](http://msdn.microsoft.com/en-us/library/b8ytshk6.aspx)

# iphone - 通过 http 请求发送设备令牌

> ID：11404877
> 
> 赞同：0
> 
> 时间：2012-07-09T23:55:41.473
> 
> 标签：iphone, ios, push-notification

我可以为我的 iPad 获取设备令牌，但问题是如何通过 php 代码将其发送到服务器中的数据库。

我已经测试了 php 代码并且它正在工作。

这是我发送设备令牌的功能：

```
-(void)application:(UIApplication *)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken{

NSString *devToken = [[[[deviceToken description] 
                        stringByReplacingOccurrencesOfString:@"<"withString:@""] 
                       stringByReplacingOccurrencesOfString:@">" withString:@""] 
                      stringByReplacingOccurrencesOfString: @" " withString: @""];
NSLog(@"%@",devToken);
NSString *sli = [NSString stringWithFormat:@"http://localhost:8888/insertiphone.php?number=%@",devToken];
NSURL *url = [NSURL URLWithString:sli];

NSData *test = [NSData dataWithContentsOfURL:url];
if ([test length] == 0) {
    NSLog(@"no done");
}

} 
```

它不工作..

这是php代码：

```
<?php
function inserttodatabase(){
$con = mysql_connect("localhost","root","root");
mysql_select_db("my_db", $con);
mysql_query("INSERT INTO iphoneid (idip)
VALUES ($_GET[number])");
echo "done";
}

inserttodatabase(); 
?> 
```

更新了，我也尝试了这些代码但没有工作

```
 NSString *devToken = [[[[deviceToken description] 
                        stringByReplacingOccurrencesOfString:@"<"withString:@""] 
                       stringByReplacingOccurrencesOfString:@">" withString:@""] 
                      stringByReplacingOccurrencesOfString: @" " withString: @""];

NSString *sli = [NSString stringWithFormat:@"http://localhost:8888/insertiphone.php?      number=%@",devToken];
NSLog(@"%@",sli);
NSURL *url = [NSURL URLWithString:sli];

NSURLRequest *urlr = [NSURLRequest requestWithURL:url     cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:10.0];

NSURLConnection* connection = [[NSURLConnection alloc] initWithRequest:urlr     delegate:self];

if (connection){
    NSLog(@"connecting");
}else {
    NSLog(@"error");
} 
```

它说正在连接，但不会将任何内容插入数据库

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T00:01:36.320

检查 nil （[dataWithContentsOfUrl](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSData_Class/Reference/Reference.html)可以在问题上返回 nil ）

您将获得更好的错误信息和控制使用[NSURLConnection](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html) (connection:didFailWithError:) 或[ASIHttpRequest](http://allseeing-i.com/ASIHTTPRequest/How-to-use) (requestFailed:) 发送请求。

[iphone中的休息网络服务](https://stackoverflow.com/questions/7269780/rest-web-services-in-iphone/7270063#7270063)

[http://allseeing-i.com/ASIHTTPRequest/How-to-use](http://allseeing-i.com/ASIHTTPRequest/How-to-use)

另外，从 iPhone 客户端发出请求时，服务器代码是否执行？调试或跟踪服务器代码以更好地了解正在发生的事情。

您还可以设置诸如[charles proxy](http://www.charlesproxy.com/)之类的东西，以查看通过网络传输的内容和返回的内容。

这是一篇调试 charles 代理的连接问题的博文。 [http://blog.mediarain.com/2009/08/iphone-http-connection-debugging/](http://blog.mediarain.com/2009/08/iphone-http-connection-debugging/)

最后，一次性尝试 [machinename].local:8888... 如果您遇到名称解析、本地主机解析问题等...问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T00:30:16.413

首先，提供有关服务代码正在做什么以及如何测试它的更多信息。您编写的代码发出的是 HTTP GET 请求，而不是 put 或 post。在大多数情况下，将记录插入数据库的 Web 服务（如 URL 中的“insertiphone.php”所示）将使用 HTTP POST 而不是 GET 来实现。如果您使用 GET 发送它，就像您正在做的那样，它不会按预期执行。因此，提供有关您如何知道服务器正在工作以及您为测试它所做的工作的更多信息将有助于诊断您的问题。

假设您已经检查了服务并验证它期待 HTTP GET（如果服务上正在更新数据，则不是好的 RESTful 设计，但肯定有可能），那么我同意@bryanmac 提供的答案。查看他的链接以了解发出 HTTP 请求的更好方法、检查服务器端以查看请求是否通过、使用 CharlesProxy 进行调试等。

如果您的服务需要 GET 并且您可以使用 Web 浏览器对其进行测试，我将提供另一个调试技巧，在启用开发人员扩展的 Safari 中尝试它，并使用它来监视资源请求和响应。这将允许您查看成功请求的外观，可以将其与您发送的实际请求进行比较，您可以使用 CharlesProxy 看到。

# javascript - 带有淘汰赛的动态jquery移动页面

> ID：11404886
> 
> 赞同：1
> 
> 时间：2012-07-09T23:56:14.267
> 
> 标签：javascript, jquery, jquery-mobile, knockout.js, knockout-2.0

我正在尝试生成 jquery 移动页面，如下所述：http: [//jquerymobile.com/demos/1.1.0/docs/pages/page-dynamic.html](http://jquerymobile.com/demos/1.1.0/docs/pages/page-dynamic.html)

但是我不喜欢它生成 HTML 的方式，很难更新这种代码。我认为必须有一些更好的方法，而不是像这样连接 html 标签字符串。例如，我正在考虑执行以下两个步骤：

1.有一个淘汰模板

```
<script type="text/html" id="category-template">
            <ul data-bind="foreach: Categories" data-role="listview">
                <li>
                    <a data-bind="{attr : { href : $parent.GetCategoryUrl(arguments[0][0])}}">
                        <img src="../res/placeholder.png" alt="" />
                        <span data-bind="text: Name"></span></a>
                </li>
            </ul>
<script> 
```

2.在 showCategory 函数中，我想我可以从作为模板的脚本节点获取 HTML 代码，并按照 jquery 移动站点页面中的描述将其注入。

然而，这看起来并不简单。例如，我看不到如何获取脚本节点 HTML。我不确定绑定是否会起作用。此外，我需要访问当前页面（仍然存在）的视图模型，以获取实际呈现的数据。我看不到如何访问视图模型。

有更好的方法吗？

谢谢！

# php - Codeigniter：“严格标准：只能通过引用分配变量”错误

> ID：11404890
> 
> 赞同：1
> 
> 时间：2012-07-09T23:57:11.823
> 
> 标签：php, database, codeigniter

我正在尝试从 mysql 数据库中获取一些数据并将其显示在移动网站上的列表视图中，

代码运行良好，但抛出此错误： `Strict Standards: Only variables should be assigned by reference C:\AppServ\www\system\core\Loader.php on line 150`

以下是代码摘录： `$this->_base_classes =& is_loaded();`

但日期`undefined`进入列表视图！

我一开始没有这个问题吗？那么，我该怎么做才能克服这个错误？！

# regex - 正则表达式将 URL 修剪到最后一个文件夹

> ID：11404894
> 
> 赞同：0
> 
> 时间：2012-07-09T23:58:02.257
> 
> 标签：regex

如果我有这样的网址：[http](http://example2.com/foo/biz?asdf=qwer) ://example2.com/foo/biz?asdf=qwer （甚至更深入）

我想将它修剪到最后一个文件夹：[http ://example2.com/foo/](http://example2.com/foo/)

如果没有文件夹，我也希望它通过：（即：[http://example.com](http://example.com)）只是未修改，但仍然匹配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T05:08:23.423

url.match(/http://[\w.]+(?:/[^/]+/)?/);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T00:01:51.510

基本上，您需要删除最后一个斜杠之后的所有内容，因此请替换`[^/]+$`为空字符串。

# vim - FuzzyFinder 或任何其他 VIM 文件打开插件是否有任何 sublimetext2 之类的 autopreview 可用？

> ID：11404901
> 
> 赞同：1
> 
> 时间：2012-07-09T23:58:42.167
> 
> 标签：vim, fuzzyfinder

在 SublimeText 中，当使用文件打开器命令时，悬停在上面的文件名会在后台自动预览。VIM 是否有任何这样的文件打开器/插件可以实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T12:24:54.470

我能想到的最接近的是 NerdTree 的预览功能。

在书呆子树中：

*   使用`j`,`k`将光标移动到文件名上
*   按下`go`预览 - 这会将光标留在 NerdTree
*   您打开的下一个文件将在同一个“预览”缓冲区中打开

这样，`jgo`反复按可以让您快速预览每个文件。

# actionscript-3 - AS3 新位图数据（w，h）；获取 ArgumentError: Error #2015: Invalid, 工作一段时间然后停止并出现此错误

> ID：11404908
> 
> 赞同：2
> 
> 时间：2012-07-10T00:00:11.880
> 
> 标签：actionscript-3, flash, flash-cs4

我有一个游戏，当玩家探索时会产生新的地形块，以允许看似无限的关卡大小。它一直运行良好，但我决定让我的角色向一个方向移动很长时间，最终它得到了这个错误：

```
ArgumentError: Error #2015: Invalid BitmapData.
        at flash.display::BitmapData/ctor()
        at flash.display::BitmapData() 
```

在这行代码：

```
this.new_chunk.background_bitmap_data = new BitmapData(this.level_obj.block_size *  this.new_chunk.blocks_wide + this.level_obj.oversize_bmd_offset,this.level_obj.block_size * this.new_chunk.blocks_tall + this.level_obj.oversize_bmd_offset,true,0x00000000); 
```

我在`trace();`提供用于创建位图数据的宽度和高度值的变量/方程上运行了一个，并且它不断输出相同的值，如预期的那样：

```
2150 1300 
```

我在许多不同的方向上运行我的角色，无论方向如何，最终都会发生同样的事情。我知道它`BitmapData`不会变得太大，因为它总是 2150x1300。

注意：在小范围停留时不会出现错误，无论我让游戏运行多久，只有在一个方向长时间移动后才会出现错误，生成大量新的关卡块。

任何想法为什么 flash 会抛出这个错误？

## 编辑：

这是游戏的现场演示，因此您可以更好地了解正在发生的事情： [http ://test.webskethio.com/boxy/](http://test.webskethio.com/boxy/)

（控制是 WASD 移动，按住 shift 移动更快。）

每个“块”是游戏屏幕本身的大小，每个块存储组成它`BitmapData`的所有较小`BitmapData`s 的缓存（草、树、岩石、花等的瓦片）。块`BitmapData`被加载到`Bitmap`一个当块足够接近最终需要渲染的阶段时的阶段。

## 编辑2：

我上传了一张图片来说明我认为 Amy 为我的游戏提出的不需要存储许多 BitmapData 对象的渲染方法：

![在此处输入图像描述](../Images/8b1895a63cfd85b9702b8f786583d063.png)

四个角落的彩色区域是`BitmapData`将被绘制到`Bitmap`屏幕上的对象（与用户的屏幕大小相同，以绿色表示）。整个事物周围的黑色区域表示在某一点可能是其他`BitmapData`对象设置为，`null`因为它们不再需要。

`Bitmap`随着玩家的移动，4 个角的 BitmapData 对象将用新的点坐标重新绘制到主坐标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T10:50:40.750

我无法重现您的错误。

我直接向北跑了大约 5 分钟，内存消耗增长到 3+GiB，然后我用完了 RAM，所以它开始使用交换并且变得非常慢。

所以，我猜你只是内存不足，而闪存的错误对于这种情况来说有点奇怪。尝试释放旧的位图，或者甚至更好地重用它。推荐的方法通常是始终拥有 4 个屏幕大小的位图，当您向东走时，将西部的位图重新用于东部的新区域，反之亦然，北部和南部也是如此。

另外，我看到一条非常烦人的闪烁白色条纹。我不知道这是否真的是原因，但它通常发生在有人不使用双缓冲时。

# scala - 验证记录中的消息

> ID：11404909
> 
> 赞同：2
> 
> 时间：2012-07-10T00:00:20.207
> 
> 标签：scala, lift

当您在 MappedField 实例上调用 'validate' 时，默认生成的字段 FieldErrors 使用 MappedField 类中的 uniqueFieldId 方法实现，它给出的 id 为

```
<tablename> + "_" + <field name>. 
```

所以

```
<span class="lift:msg?id=<table name>_<field name>"></span> 
```

我想做同样的事情，但我正在使用 mongo 和记录，但不起作用

有人有什么建议请

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:03:40.690

Record 中的字段也有一个 uniqueFieldId，但由于 Record 有许多不同的持久性后端，并且不一定是基于表的，因此该值的计算方式不同。在 BaseField 你会找到方法：

`override def uniqueFieldId: Box[String] = Full(name+"_id")`

其中 name 是您的字段标识符，即：

`val myString = new StringField(this,1024)`

名称 == 我的字符串

# cocoa-touch - 创建滚动 UIToolbar

> ID：11404911
> 
> 赞同：0
> 
> 时间：2012-07-10T00:00:26.837
> 
> 标签：cocoa-touch, user-interface, uitoolbar

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T01:04:49.900

是的，它可以做到 - 只是尝试过（不是很好的 UI 设计，但也许它适合你的要求。）。您必须设置滚动视图的 contentSize。

将 UIScrollView 添加到您的故事板。在其中添加一个 UIToolBar 并使其尽可能宽（可能比 UIScrollView 更宽）。添加您需要的任何工具栏项目。

为 scrollView 和工具栏（以及您的工具栏项目）制作 IBOutlets。然后在`viewDidLoad`设置`scrollView.contentSize`：

```
myScrollView.contentSize = CGSizeMake(myToolBar.frame.size.width, myToolBar.frame.size.height); 
```

**更新**

试试这段代码，看看你的元素的真正尺寸是多少

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    myScrollView.contentSize = CGSizeMake(myToolBar.frame.size.width, myToolBar.frame.size.height);

    CGRect myScrollViewRect = myScrollView.frame;
    NSLog(@" myScrollView %f  %f  %f  %f", myScrollViewRect.origin.x,
          myScrollViewRect.origin.y,
          myScrollViewRect.size.width,
          myScrollViewRect.size.height);

    CGRect toolbarRect = myToolBar.frame;
    NSLog(@" toolbarRect %f  %f  %f  %f", toolbarRect.origin.x,
          toolbarRect.origin.y,
          toolbarRect.size.width,
          toolbarRect.size.height);
} 
```

我得到下面的输出。注意工具栏比scrollView 宽吗？如果你的不是更宽，它就不会滚动（怎么可能 - 没有地方可以滚动到）。

> 2012-07-10 14：29：34.494垃圾[4275：707] MyScrollView 0.000000 605.000000 778.000000 128.000000 2012-07-10 2012-07-10 14：29：29：34.498

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T07:54:30.423

希望这可以帮助一些人。我在这里找到了答案： [如何为 UIToolbar 上的按钮添加滚动？](https://stackoverflow.com/questions/13155244/how-to-add-scrolling-for-buttons-on-uitoolbar)

基本上，您需要从其父视图中删除工具栏，重新设置工具栏的一些属性，将其设置为滚动视图的子视图，然后将滚动视图设置为您最初删除的超级视图的子视图。这一切都在那个链接中。非常适合我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T00:16:10.503

只好自己做。你不能。您可以做的最好的事情是放置一个工具栏并在其顶部添加一个 UIScrollView。希望这可以帮助。干杯!

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-29T11:06:34.263

迅捷4版本

```
func addToolBar(textField: UITextView){
let toolBar = UIToolbar()
toolBar.barStyle = UIBarStyle.default
toolBar.isTranslucent = true
toolBar.tintColor = UIColor(red: 76/255, green: 217/255, blue: 100/255, alpha: 1)
let bold = UIBarButtonItem(image: #imageLiteral(resourceName: "download 12.01.19.png"), style: UIBarButtonItemStyle.done, target: self, action: #selector(boldFunc))
let italic = UIBarButtonItem(image: #imageLiteral(resourceName: "italic-png-image-54776.png"), style: UIBarButtonItemStyle.done, target: self, action: #selector(italicFunc))
let underlined = UIBarButtonItem(image: #imageLiteral(resourceName: "underlined_font-512.png"), style: UIBarButtonItemStyle.done, target: self, action: #selector(underlineFunc))
let strikeThrough = UIBarButtonItem(image: #imageLiteral(resourceName: "Strikethrough_font_awesome.svg.png"), style: UIBarButtonItemStyle.done, target: self, action: #selector(strikeFunc))
let size = UIBarButtonItem(title: "\(fontSize)", style: UIBarButtonItemStyle.done, target: self, action: #selector(changeSize))
let textColor = UIBarButtonItem(image: #imageLiteral(resourceName: "text_color1600.png"), style: UIBarButtonItemStyle.done, target: self, action: #selector(changetextColor))
let backgroundColor = UIBarButtonItem(image: #imageLiteral(resourceName: "background color.png"), style: UIBarButtonItemStyle.done, target: self, action: #selector(changebackgroundColor))
let textLeft = UIBarButtonItem(image: #imageLiteral(resourceName: "left-27877_960_720.png"), style: UIBarButtonItemStyle.done, target: self, action: #selector(alignLeft))
let textRight = UIBarButtonItem(image: #imageLiteral(resourceName: "align_right_filled1600.png"), style: UIBarButtonItemStyle.done, target: self, action: #selector(alignRight))
let textCenter = UIBarButtonItem(image: #imageLiteral(resourceName: "center.png"), style: UIBarButtonItemStyle.done, target: self, action: #selector(alignCenter))
let pic = UIBarButtonItem(image: #imageLiteral(resourceName: "add.png"), style: UIBarButtonItemStyle.done, target: self, action: #selector(appendPic))
let bulletpoint = UIBarButtonItem(image: #imageLiteral(resourceName: "bulletpoint.png"), style: UIBarButtonItemStyle.done, target: self, action: #selector(makeBulletpoints))
toolBar.setItems([bold, italic, underlined, strikeThrough, size, textColor, backgroundColor, textLeft, textRight, textCenter, pic, bulletpoint], animated: false)
toolBar.isUserInteractionEnabled = true
toolBar.sizeToFit()
toolBar.frame = CGRect(x: 0, y: 0, width: 33 * 12, height: toolBar.frame.size.height)
textField.delegate = self
//////////try to add a scroll view
let scrollView = UIScrollView()
scrollView.frame = toolBar.frame;
scrollView.bounds = toolBar.bounds;
scrollView.autoresizingMask = toolBar.autoresizingMask;
scrollView.showsVerticalScrollIndicator = false;
scrollView.showsHorizontalScrollIndicator = false;
scrollView.contentSize = toolBar.frame.size;
scrollView.addSubview(toolBar)
textField.inputAccessoryView = scrollView
} 
```

当你计算宽度时

```
toolBar.frame = CGRect(x: 0, y: 0, width: 33 * 12, height: toolBar.frame.size.height) 
```

宽度将取决于您使用的按钮的大小。我有 12 个按钮，按钮上的所有图像都是 25 x 25，并且有一个带有文本的按钮。首先我写了 25 x 12 但它们不适合，我认为自动添加了一些边距，我没有详细说明如何计算按钮的大小，所以我只是尝试直到找到数字对我来说效果很好。

# jquery - 如何使用 jQuery 设置文本输入的值，以便将其添加到表单中的 html 中？

> ID：11404912
> 
> 赞同：1
> 
> 时间：2012-07-10T00:00:30.157
> 
> 标签：jquery, class, input

我的侧边栏中有一个表单，它是 Wordpress 插件的一部分，我不确定生成表单的 PHP 代码在哪里，所以我想使用 jQuery 向文本输入添加一个类和一个值。到目前为止，我有：

```
$j('body').ready(function() {
    $j('form#searchform').find(':input#s').addClass('default-value');
    $j('form#searchform').find(':input#s').val('enter search here...');
}); 
```

该类已成功添加到 html 中，但尽管值显示在文本输入中，但它没有添加到 html 中，即在标记内，这需要发生我的默认值脚本才能工作。所以，我想知道是否有一种方法可以内联添加值？

**默认值脚本**

```
 $j('.default-value').each(function() {
      var default_value = $j(this).val();
      $j(this).css('color', '#837D73'); // this could be in the style sheet instead
      $j(this).focus(function() {
          if(this.value == default_value) {
              this.value = '';
              $j(this).css('color', 'black');
          }
      });
      $j(this).blur(function() {
          if(this.value == '') {
              $j(this).css('color', '#837D73');
              this.value = default_value;
          }
      });
  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T00:13:48.407

您的代码应该可以工作。只需确保添加类名 [http://jsfiddle.net/fedmich/NbRBe/](http://jsfiddle.net/fedmich/NbRBe/)

并注意

```
var default_value = this.value; //<-do it like this instead 
```

提示：您应该尝试使用 jquery 链接

你可以像这样简化你的代码。

```
$j('body').ready(function() {
    $j('input#s')
        .addClass('default-value')
        .val('enter search here...');
}); 
```

# python - 关联（.assoc）二进制文件结构/探测未知文件结构

> ID：11404916
> 
> 赞同：0
> 
> 时间：2012-07-10T00:00:49.353
> 
> 标签：python, fortran, binaryfiles

我有一个以 .assoc 结尾的文件，显然是一个“二进制关联文件”，但我无法在网上找到有关此类文件的信息。它由fortran和idl读取，为49Mb，我正在尝试将它读入python。这可能是一个悬而未决的问题，但任何人都可以提出一种方法来探测文件的结构以了解我如何阅读它吗？

我知道该文件是火星上海拔的地图，大概是二维的。它有一个简短的 ascii 标头：

```
 7200         3600 MOLA .05 dg/px topo 5/2002

---------------------------------------------------------

header length        14400 bytes

map X size                7200

map Y size                3600

no-data value            30303

maximum value            21197

minimum value            -8204

The map is stored as an INT array with X as

longitude and Y as latitude. The map is assumed to be

global in coverage.

--------------------------------------------------------- 
```

很抱歉这个格式不正确的问题，但是关于如何探测未知文件类型的一般建议将不胜感激。或者，如果您知道这种文件类型，那就更好了！

这是读取文件的 idl 代码片段：

```
ELMAP='elevmap.assoc'
OPENR, ELUN, ELMAP, /GET_LUN
B = ASSOC(ELUN,BYTARR(100))              ; assoc header
HEADER = STRING(B[0])                    ; read the header
NLON = 0                                 ; 'fix' no. of longitudes
NLAT = 0                                 ; 'fix' no. of latitudes
READS,HEADER,NLON,NLAT                   ;  read no. of lons/lats
EXG = NLON/360                           ; longitude scale (pix/deg)
EYG = NLAT/180                           ; latitude scale (pix/deg)
EMAP = ASSOC(ELUN,INTARR(1),14400) 
```

前 30 个字节的 hexdump（我做了“od -H -N 30 elevmap.assoc”）如下所示：

```
0000000          20202020        20202020        30303237        20202020
0000020          20202020        30363320        4f4d2030        0000414c
0000036 
```

标头后前 30 个字节的十六进制转储（“od -H -j 14400 -N 30 elevmap.assoc”，如果我误解了请告诉我）如下所示：

```
0034100          0e970e93        0ea50e9d        0ea50ea5        0ea50ea5
0034120          0ea50ea5        0ea40ea4        0ea20ea3        00000ea2
0034136 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T16:32:56.790

> 前 30 个字节的 hexdump（我做了“od -H -N 30 elevmap.assoc”）如下所示：

```
0000000          20202020        20202020        30303237        20202020
0000020          20202020        30363320        4f4d2030        0000414c
0000036 
```

这些显然是以小端序存储的，因此您应该反转每个字节序列。在这里，我已为您将其翻译为 ASCII：

```
0000000          20 20 20 20 20 20 20 20 37 32 30 30 20 20 20 20
                  _  _  _  _  _  _  _  _  7  2  0  0  _  _  _  _
0000020          20 20 20 20 20 33 36 30 30 20 4d 4f 4c 41
                  _  _  _  _  _  3  6  0  0  _  M  O  L  A 
```

> 标头后前 30 个字节的十六进制转储（“od -H -j 14400 -N 30 elevmap.assoc”，如果我误解了请告诉我）如下所示：

```
0034100          0e970e93        0ea50e9d        0ea50ea5        0ea50ea5
0034120          0ea50ea5        0ea40ea4        0ea20ea3        00000ea2 
```

标题说有 7200 x 3600 INT 值。INT有多大？如果 INT 与`int`大多数 Unix 系统（4 字节）一样大，那么文件的总大小应该是`7200 x 3600 x 4`或接近 99 MiB。您说它是 49 MiB，因此要么正在使用压缩（不太可能），要么 INT 是 16 位（更有可能）。后者的有力证据是你从这一秒中得到的`od`——`0e970e93`看起来非常像`0e97`并且`0e93`被错误地连接成一个 32 位整数。人们会从一张地形图上期望相邻的值不应该突然改变（除了在一些深垂直沟或陡峭山墙的边界处）。这也与值在 范围内的事实一致`short int: [-32768, 32767]`。

有了这些知识，上面的转储应该被理解为：

```
0034100          0e93  0e97  0e9d  0ea5  0ea5  0ea5  0ea5  0ea5
                +3731 +3735 +3741 +3749 +3749 +3749 +3749 +3749
0034120          0ea5  0ea5  0ea4  0ea4  0ea3  0ea2  0ea2
                +3749 +3749 +3748 +3748 +3747 +3746 +3746 
```

现在您只需要弄清楚是否使用了 X-major 或 Y-major 数据存储。根据我的经验，大多数数据处理工具都遵循 Fortran 列主顺序，如果数据是，`DATA(X,Y)`则 X 应该是前导维度，即后续数据值应该是`DATA(1,Y)`, `DATA(2,Y)`, `DATA(3,Y)`, ..., `DATA(1,Y+1)`,`DATA(2,Y+1)`等。您始终可以使用绘制数据PIL 或任何其他 Python 图像处理包，看看你是否得到类似于地形图或杂乱无章的东西。

如果`struct.unpack()`按照 mgilson 的建议解压数据，您应该使用有`h`符号短整数值的格式：

```
data = struct.unpack('%dh' % (7200*3600), f.read(7200*3600*2)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T02:15:03.530

以下是一些讨论 Fortran 如何写入未格式化文件的问题：[Fortran unformatted file format](https://stackoverflow.com/questions/8751185/fortran-unformatted-file-format)或[Reading a direct access fortran unformatted file in Python](https://stackoverflow.com/questions/10475839/reading-a-direct-access-fortran-unformatted-file-in-python)。要知道额外字节在哪里，您必须知道 Fortran 中使用了哪些读取语句，以便了解记录结构。在最近的 Fortran 中，可以使用 Stream IO 绕过额外的字节。使用十六进制编辑器可以对这些方面进行逆向工程。

通常不能在 Fortran 中指定字节顺序。您可以使用十六进制编辑器推断的另一个方面。Gfortran 有一个扩展来指定字节顺序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T18:22:37.890

感谢大家的帮助。特别是 Hristo Iliev 对 hexdump 输出和 mgilson 的有用代码模板进行了很好的解释。

为了完整起见，万一其他人偶然发现这篇文章试图读取一个 assoc 文件，这里是对我有用的 python 代码。

```
import struct
import numpy as np
import matplotlib.pylab as pl

with open('elevmap.assoc','rb') as f:
    f.read(14400)
    data=struct.unpack('%dh' % (7200*3600), f.read(7200*3600*2))

# Now turn it into a numpy array
data = np.array(data).reshape(3600,7200)

pl.figure()
pl.imshow(data)
pl.show() 
```

它返回了这张漂亮的小地图：![火星海拔](../Images/0c9c2bcded0e507b3d22e3728bb15803.png)

这是火星，南方在升，但这很容易解决。再次感谢大家。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T00:17:21.767

这不是我见过的任何文件格式，但是，根据标题中的信息，您可能可以执行以下操作：

```
import numpy as np
import struct

with open('datafile.assoc','rb') as f:
    nx,ny=f.read(14400).split()[:2]  #here I split the header and only take the array indices.  You could get more fancy with your parsing if you wanted.
    data=struct.upack('%dh'%(nx*ny),f.read(nx*ny*2))

#now turn it into a numpy array:
data = np.array(data).reshape(ny,nx)  #assume "x" is the fast index
data[data==30303] = np.nan
#some checks
print (np.nanmax(data)) # 21197
print (np.nanmin(data)) # -8204 
```

如果这不起作用并且您拥有生成文件的 fortran 代码（或可以读取文件的 fortran 代码），那也会很有帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-10T00:23:49.357

根据标题，数据保存为 7200 x 3600 的 INT 数组。

最小值是负数，因此它可能是 16 位或 32 位有符号整数。(剩余文件的大小) / (7200 * 3600) 应该是一个 int 的大小（以字节为单位）。

剩下的问题：

*   字节字节序（即 623 可以保存为 00 00 02 6f（大字节序）或 6f 02 00 00（小字节序）

*   逐行或逐列 - 尝试两者，看看哪个看起来正确

如果您能给我们提供整体文件大小和前 30 多个字节数据的十六进制转储，那真的很有帮助。

# wpf - 从绑定到 xml 的按钮样式列表框中获取单击的按钮内容

> ID：11404918
> 
> 赞同：3
> 
> 时间：2012-07-10T00:00:59.997
> 
> 标签：wpf, button, listbox, mouseclick-event

嗨，我有一个绑定到 xml 文件的列表框，每个项目我都给了他们一个按钮数据模板，这样我就可以轻松地为每个项目注册一个点击事件。

我很想得到点击按钮的内容来做一些查询。

这是我的代码

XAML

```
<ListBox  Name="listBox1" >
        <ListBox.ItemsSource>
            <Binding Source="{StaticResource keywordLib}" XPath="Position/Keyword/Word"/>
        </ListBox.ItemsSource>
        <ListBox.ItemTemplate>
            <DataTemplate>
                <Button Content="{Binding}" Click="keyword_Click"/>
            </DataTemplate>
        </ListBox.ItemTemplate>

    </ListBox> 
```

经过数小时的谷歌搜索解决方案。我知道我应该使用 click 事件中的 sender ，这对于普通按钮来说效果很好，这里没有说明。

```
 private void keyword_Click(Object sender, RoutedEventArgs e)
    { 
       Button btn = (Button)sender;
       String keyword = btn.Content.ToString();
       MessageBox.Show(keyword);
     } 
```

消息框显示“System.Xml.XmlElement”。而不是按钮内容。

非常感谢任何人都可以帮助我解决这个问题。我在这方面花了很多钱，我猜想解决方案只是一行代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-04-03T08:48:04.680

我知道你得到了答案，但这是另一种获取按钮内容的类型。

```
 private void keyword_Click(Object sender, RoutedEventArgs e)
    { 
       var keyword= (e.Source as Button).Content.ToString();
       MessageBox.Show(keyword);
     } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T00:19:20.797

将按钮的内容转换为 System.Xml.XmlElement。然后使用该元素的 InnerText 属性。或者，您可能需要进行更多操作才能获得您的文本。这取决于您的 XML 文件是如何构建的。

Rq：当我需要区分代码中几个相同的控件时，我使用标签。所以我可以独立设置内容和标签（多语言应用程序需要。）甚至在选择标签（前缀/后缀，索引，...）时使用“标签逻辑”，这简化了代码处理。

# c++ - Windows API 选择粗体

> ID：11404922
> 
> 赞同：0
> 
> 时间：2012-07-10T00:01:20.487
> 
> 标签：c++, windows, fonts, gdi, uniscribe

我正在尝试编写一些代码来选择粗体字体（我实际上想获取字体文件名以发送到跨平台字体渲染器，但这不太相关）。我使用 CreateFont() 将 cWeight 设置为 FW_BOLD 并将 pszFaceName 设置为“Arial”。我将此字体选择到 DC 中并使用 GetTextFace() 检查实际选择了哪种字体。结果是宋体。我很惊讶字体不是 Arial Bold，它是一个带有不同字体文件的单独面孔。指定 Arial Bold 字体的唯一方法是将 pszFaceName 设置为“Arial Bold”。不幸的是，简单地将粗体附加到字体名称的末尾仅适用于某些字体，因为某些字体没有单独的粗体字体。

是否有任何通用方法来指定粗体以确保返回字体的实际粗体版本？

谢谢

菲尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T00:34:33.707

这不是它的工作方式，Windows 字体映射器不会替换人脸名称。“Arial Bold”不是标准字体，也与标准“Arial”字体没有任何关系。如果你想使用它，那么你将不得不要求它。

使用 FW_BOLD 请求“Arial”会选择 c:\windows\fonts\arialbd.ttf 字体文件。一种字体文件，专门设计用于呈现粗体 arial。脸名是“Arial”。同样，ariali.ttf 提供斜体版本，arialbi.ttf 提供粗斜体版本，arial.ttf 是正常版本。

# linux - 从管道接收输入的 Bash 样式

> ID：11404925
> 
> 赞同：2
> 
> 时间：2012-07-10T00:01:40.463
> 
> 标签：linux, bash, unix

我打算这样执行：

```
./some_code | ./my_bash.sh 
```

什么语法`./my_bash.sh`使它可以从其他管道中获取输入？

我试过这个但不会工作。

```
#!/bin/bash

# this is ./my_bash.sh
cut -f1 $@ | grep 'foo' | wc -l 
# $@ failed 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T00:15:10.703

目前尚不清楚您希望参数 ( `$@`) 做什么。也许只是删除那部分。除此之外，您拥有的代码应该可以工作。但是，您可以将其写为`cut -f1 | grep -c 'foo'`，甚至只是`grep -c $'^[^\t]*foo[^\t]*'`。

# mysql - MySQL 有条件地选择 SUM 以更改被求和的列的符号

> ID：11404926
> 
> 赞同：1
> 
> 时间：2012-07-10T00:01:50.847
> 
> 标签：mysql, sql

假设我有一个表，它存储公司之间的交易，每一行的结构如下：

```
(int) buyerId | (int) sellerId | (float) transactionAmount 
```

我想获取一个特定的公司 ID，并找出他们与哪家公司的净交易历史最多。例如，公司 A 的 ID 为 100。我想找出哪个公司的 SALES - PURCHASES 的净值最高。如果表数据如下：

```
buyerID     sellerId    transactionAmount
100         200         10.00
200         100         5.00
100         300         1.00 
```

公司 100 从公司 200 购买了 10.00 美元的商品，公司 200 从公司 100 购买了 5.00 美元的商品，总净交易价值为 5.00 美元。公司 100 与公司 300 的净交易价值也为 1.00，但低于 5.00 美元，我对这里的最大值感兴趣。

是否有一个 MySQL 查询我可以用来查找这 ​​5.00 美元的总和 ($10.00 + (-$5.00))，其中 transactionAmount 字段中的值可以更改为正/负，具体取决于哪家公司是买方和哪家公司是卖方？还是我需要获取所有相关行并在代码中计算这个最大值？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T01:43:12.767

您可以使用这个更简单的解决方案：

这将获得与该特定公司（100）具有最高净交易价值的公司：

```
SELECT 
    IF(buyerID = 100, sellerID, buyerID) AS other_company,
    SUM(IF(buyerID = 100, transactionAmount, transactionAmount * -1)) AS netSum
FROM transactions
WHERE 100 IN (buyerID, sellerID)
GROUP BY other_company
ORDER BY netSum DESC
LIMIT 1 
```

[SQL-Fiddle 演示](http://sqlfiddle.com/#!2/db727/7/0)

顺便说一句，我喜欢你的用户名 =)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T00:14:45.260

如果您将所有相关公司作为卖方的记录与作为买方的记录结合起来，但切换一个 transactionAmount 的符号，那么剩下要做的就是按金额对结果进行汇总和排序。这是[测试@SQL FIDDLE](http://sqlfiddle.com/#!2/148c5/6)。

```
select partner, 
       sum(Amount) Amount
from
(
  select sellerid Partner, 
         sum(transactionAmount) Amount
    from Table1
   where buyerid = 100
   group by sellerid
  union all
  select buyerid, 
         -sum(transactionAmount) Amount
    from Table1
   where sellerid = 100
   group by buyerid
) t
group by partner
order by Amount desc
limit 1 
```

# pygame - Pygame 加速时的碰撞检测

> ID：11404928
> 
> 赞同：0
> 
> 时间：2012-07-10T00:01:53.603
> 
> 标签：pygame

我正在创建一个 2D 游戏。我在游戏中实现了一个物理引擎，所以当玩家跳跃时，他的弧线会跟随游戏中给定的速度和重力的路径。当玩家下落时，它的下落距离会越来越大，因为它有加速度。

如果新位置将玩家置于对象的另一侧，我如何知道玩家是否与路径中的某物发生碰撞？

我可以使用循环并测试玩家路径上的每个点。这是唯一的方法吗？有没有更优雅的算法或 pygame 解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T00:56:57.393

我担心 Pygame 本身无法帮助你。它有一些 api 可帮助您确定矩形是否相交，但正如您所发现的，如果一个实体的移动速度足够快，它们可能在一次更新时位于地面的一侧，而在下一次更新时则清楚另一侧边。这有时被称为“隧道”。

解决此问题的最简单方法：不要让您的实体移动得足够快以穿过地面（或其他实体）。您可以对下落的实体应用“终端速度”，或增加碰撞检测的频率。

有更复杂的算法可以解决这个问题，通常称为“连续碰撞算法”，但这些更复杂。网上有大量关于这些算法的信息，所以如果你愿意，我会留给你去研究。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T00:13:28.447

一种解决方案是在速度矢量的对面添加一条不可见的尾巴，其长度足以补偿帧之间的大距离。

# tinymce - tinyMCE 和从记事本粘贴的纯文本会产生不同的标记

> ID：11404935
> 
> 赞同：1
> 
> 时间：2012-07-10T00:03:15.287
> 
> 标签：tinymce, umbraco

将文本粘贴到微小的 mce 中时，我会得到各种行为。在我的示例记事本文本文件中，我有以下文本：

```
a
b

c 
```

粘贴在各种浏览器中会导致以下结果：

铬 20：

```
<pre>a<br />b<br /><br />c</pre> 
```

即 9：

```
<p>a<br />b</p>
<p>c</p> 
```

火狐 13：

```
<p>a<br />b<br /><br />c</p> 
```

我想要 IE9 在所有浏览器中的行为。有人对如何实现这一目标有任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T00:11:16.803

如果您单击工具栏中的`Paste as Plain Text`图标，您最终也会看到上面 IE9 示例中其他浏览器的标记。

你可以在这里试试：

[http://www.tinymce.com/tryit/full.php](http://www.tinymce.com/tryit/full.php)

您可以看到该选项是这样配置的（它是`pastetext`选项）：

```
 theme_advanced_buttons2 : "cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code,|,insertdate,inserttime,preview,|,forecolor,backcolor", 
```

请参阅此处的粘贴文档：

[http://www.tinymce.com/wiki.php/Plugin:paste](http://www.tinymce.com/wiki.php/Plugin:paste)

作为最后的手段，您可以使用`preprocess`回调并在编辑器中手动设置标志，例如：

```
ed.pasteAsPlainText = true; 
```

在这里查看第 74 行：

[https://github.com/tinymce/tinymce/blob/master/jscripts/tiny_mce/plugins/paste/editor_plugin_src.js](https://github.com/tinymce/tinymce/blob/master/jscripts/tiny_mce/plugins/paste/editor_plugin_src.js)

# android - Java NumberFormat 生成 'EUR' 而不是 €

> ID：11404943
> 
> 赞同：2
> 
> 时间：2012-07-10T00:04:15.983
> 
> 标签：android, currency, number-formatting

我正在开发一个支持多种用户语言的 android 应用程序。

在应用程序中，我使用 java.util.NumberFormat 来格式化货币：

```
String formatCurrency(String amount) {
    // getCurrentLocale determines the locale from the user's selected language; 
    // if the user selects de_DE as the app's language, then this method will return Locale.Germany
    final Locale locale = getCurrentLocale(); 
    final NumberFormat formatter = NumberFormat.getCurrencyInstance(locale);
    return formatter.format(new BigDecimal(amount));
} 
```

我正在使用的测试设备是 HTC G2，它有两种设备语言选项——英语和西班牙语。

好的，现在我选择我的应用程序的用户语言为“de_DE”：

```
// When my device language is english, if I call:
System.out.println(formatCurrency("1.79"));
// I got:
1.79 €

// But when I switch my device language to spanish:
System.out.println(formatCurrency("1.79"));
// I got :
1.79 EUR 
```

我的问题是，在这两种情况下，我可以让 NumberFormat 给我€吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T00:08:03.637

为什么不总是使用`Locale`您希望它显示的内容？忽略设备的`Locale`.

对于[`Locale.ENGLISH`](http://docs.oracle.com/javase/7/docs/api/java/util/Locale.html#ENGLISH)：

```
String formatCurrency(String amount) {
    final NumberFormat formatter = NumberFormat.getCurrencyInstance(Locale.ENGLISH);
    return formatter.format(new BigDecimal(amount));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T00:36:59.830

你应该看看[这个](http://developers.sun.com/dev/gadc/technicalpublications/articles/java1.4currency.html)。

使用 Currency 对象中的*[getSymbol()](http://developer.android.com/reference/java/util/Currency.html#getSymbol%28java.util.Locale%29)*来解决您的问题。

# python - 在 python 中接受由空格分隔的多个用户输入并将它们附加到列表中

> ID：11404946
> 
> 赞同：9
> 
> 时间：2012-07-10T00:04:43.250
> 
> 标签：python, list

如何接受由空格分隔的多个用户输入？我不知道输入的数量，但我知道它们都是整数。

以下是一些示例输入：

```
13213 412 8143
12 312
1321 142 9421 9 29 319 
```

如果我事先知道输入的数量，我知道可以做到这一点，但我很难做到这一点。我可以要求用户输入他将输入多少组整数：

```
inputs = int(raw_input("Enter number of raw inputs "))
num = []
for i in xrange(1, inputs):
    num.append(raw_input('Enter the %s number: ')) 
```

但我正在寻找一种更优雅的解决方案，不需要向用户询问 2 个问题。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-10T00:06:19.727

```
s = raw_input("Please enter your numbers: ")

mynums = [int(i) for i in s.split()]
# OR
mynums = map(int, s.split()) 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-10T00:06:46.190

试试这个：

```
nums = [int(i) for i in raw_input("Enter space separated inputs: ").split()] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-01T17:17:23.467

对于 python 2.x

**x,y = map(int,raw_input().split())**

它需要两个由空格分隔的 int 类型的变量 x 和 y，您可以将 int 替换为所需的类型

对于 python 3.x

**x,y = input().split()**

它需要两个由空格分隔的字符串类型的变量 x 和 y，您必须显式转换

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-10T17:10:01.347

`x,y=map(int,input().split())` #这将采用空格分隔的输入并映射#into int

# xcode4 - UIScrollView 中的 UIImageView 问题

> ID：11404947
> 
> 赞同：0
> 
> 时间：2012-07-10T00:05:01.717
> 
> 标签：xcode4, uiscrollview, uiimageview, imageview, scrollview

在过去的几周里，我一直坚持让 UIIMageView 与 UIScrollView 一起正常工作。我的图像是 320x9100，我要做的就是让它垂直滚动。一切都很顺利，直到我添加 myimage@2x.png 用于视网膜显示，但由于图像的长度不同，滚动视图在图像之前结束。做这个的最好方式是什么？任何帮助将不胜感激！

PS 如果我可以通过电子邮件将项目发送给您并且您可以为我修复它，我将更加感激 :)

提前致谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T08:07:05.063

Xcode 自动处理视网膜图像。

```
[scrollView setContentSize:imageView.frame.size]; 
```

如果您以编程方式或在 xib 文件中设置图像，这将起作用。

这里有一些代码来帮助解释它。它假定您的 .xib 文件中有一个 UIScrollView 连接到 .h 文件中称为 scrollview 的 IBOutlet。

```
// Init the image
UIImage *image = [UIImage imageNamed:@"myImage.png"];

// Init the image view
UIImageView *imageView = [[UIImageView alloc] initWithImage:image];

// Position the image view
imageView.frame = CGRectMake(0, 0, imageView.frame.size.width, imageView.frame.size.height);

// Add the image view to your scroll view
[scrollView addSubview:imageView];

// Set the scroll view content size to match the image view size
[scrollView setContentSize:imageView.frame.size]; 
```

# php - 如何在 php 中构建具有 id、parent_id 和深度变量的树

> ID：11404949
> 
> 赞同：0
> 
> 时间：2012-07-10T00:05:16.653
> 
> 标签：php, mysql, codeigniter, tree

从 mysql 查询中，我有 id、parent_id 和 depth 变量

深度从0开始

你能给我一个优雅的解决方案或一个好的链接吗

我正在使用 CI

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T00:11:59.327

首先，您必须编写一个递归函数来读取所有子元素并将它们输出为“”和<“li>”。

一旦你得到正确的形状。您可以使用以下示例代码将 li 转换为树。

[http://www.dynamicdrive.com/dynamicindex1/navigate1.htm](http://www.dynamicdrive.com/dynamicindex1/navigate1.htm)

或者

[http://odyniec.net/articles/turning-lists-into-trees/](http://odyniec.net/articles/turning-lists-into-trees/)

你也可以喜欢下面的代码

```
 function print_list($array, $parent=0) {
        print "<ul>";
        foreach ($array as $row) {
            if ($row->parent_id == $parent) {
                print "<li>$row->title";
                print_list($array, $row->id);  # recurse
                print "</li>";
        }   }
        print "</ul>";
    } 
```

print_list 是一个递归函数， $array 是数据库中的所有行。

[PHP / MySQL 构建树形菜单](https://stackoverflow.com/questions/4413776/php-mysql-build-tree-menu?rq=1)

# php - PHP 代码突然出现在我的网页中而不是执行 - 以前没有这样做吗？

> ID：11404950
> 
> 赞同：8
> 
> 时间：2012-07-10T00:05:28.717
> 
> 标签：php, mysql, html, apache

PHP 代码块或片段突然出现在我的网页中，就好像它们没有被识别为 PHP 代码一样。我之前发现它可以正常工作，但我想不出我所做的任何更改或所做的任何事情都会阻止它工作！我花了很长时间让 Apache、MySQL 和 PHP 首先一起工作，现在这个。我准备把头发扯下来！！

**示例 1：** ![示例 1](../Images/da5e2cfe7271d2a0e7bf8c2b20029863.png) **示例 1 代码：（** 请注意，一个 php 代码块显示在网页中，而另一个则没有！）

```
<fieldset>
    <legend>Enter SELECT statement:</legend>
    <textarea name="select" style="width: 100%; margin-bottom: 10px;">
        <?php
            if (isset($_POST['select'])
                echo $_POST['select'];
        ?>
    </textarea>
    <input type="submit" value="Search" />
    <!-- display any sql errors here -->
    <?php
        echo "hello world!";
        if (isset($_POST['select']) {
            if (!$results = mysql_query($_POST['select']))
                die("Error: " . mysql_error());
        }
    ?>
</fieldset> 
```

**示例 2：** ![示例 2](../Images/900a3b87ebbbef61e37434852563995a.png)

**示例 2 代码：**

```
<fieldset>
    <legend>Tags:</legend>
    <table class="tagstable">
        <tr class="tagsrow">

        </tr>
        <?php
            $query = "SHOW COLUMNS FROM recipes LIKE 'Tags'";
            if (!($ret = mysql_query($query)))
                die("Error - could not show columns: " . mysql_error());

            if(mysql_num_rows($ret)>0){
                $row=mysql_fetch_row($ret);
                $options=explode("','",preg_replace("/(enum|set)\('(.+?)'\)/","\\2",$row[1]));
            }

            foreach ($options as $tag) {
                echo '<script type="text/javascript">addTag("' . $tag . '", false)</script>';
            }
        ?>
    </table>
    <br>
    <input type="text" id="addtag"><input type="submit" value="Add">
</fieldset> 
```

**故障排除：**

*   我的 phpinfo(); 页面按预期工作
*   包含 php.exe 的文件夹包含在我的 PATH 中
*   尝试重新启动 Apache
*   遵循[此问题答案中的所有步骤](https://stackoverflow.com/questions/5121495/php-code-is-not-being-executed-i-can-see-it-on-source-code-of-page)
*   使用 Apache 2.2.22、MySQL 服务器 5.5.24、PHP 5.4.3、Windows 7

Apache httpd.conf 包含：

```
LoadModule php5_module "c:/websites/php/php5apache2_2.dll"
<IfModule dir_module>
  DirectoryIndex index.html index.htm index.php
</IfModule>
AddType application/x-httpd-php .php
PHPIniDir "C:/websites/php" 
```

还有什么我没想到的？？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T00:27:30.983

phpinfo() 页面的路径是什么？将其与您用于访问脚本的路径进行比较。我的猜测（当您说“php.exe 包含在我的 PATH 中”时）是您没有访问 Web 根目录中的文件，而是尝试通过文件系统直接访问它。您需要通过网络服务器访问它。如果你做对了，它可能看起来像：

```
http://localhost/myscript.php 
```

# r - 在 r 中用 ggplot2 中的线连接点

> ID：11404959
> 
> 赞同：18
> 
> 时间：2012-07-10T00:06:25.793
> 
> 标签：r, ggplot2, line, scatter-plot, segment

这是我的数据：

```
 mydata <- data.frame (grp = c(  1,   1,   1,  1, 1,  1, 1, 1, 1, 
     2,2, 2, 2,2, 2, 2, 2, 2),
    grp1 = c("A", "A", "A", "A", "A",  "B", "B", "B", "B" ,  
    "A", "A", "A", "A",      "B", "B", "B", "B", "B"), 
   namef = c("M1", "M3", "M2", "M4", "M5","M1", "M3", "M4", 
    "M0", "M6", "M7", "M8",       "M10", "M6", "M7", "M8", "M9", "M10"),
     dgp = c(1, 1, 1, 1, 1,  1.15, 1.15,1.15, 1.15 ,
        2, 2, 2, 2,2.15, 2.15, 2.15, 2.15, 2.15), 
    position = c(1.1, 2.1, 3.2, 4.1, 5.0,
     1.1, 2.0, 5.0, 6.2, 1.0,3.0, 4.1, 5.0,  
    1.0, 2.1, 3.01, 4.0, 5.02))

require(ggplot2)

plt <- ggplot(mydata) +   geom_point(aes(position, dgp, 
group = factor(dgp)),   size = 2, colour = "purple") +
geom_text(data = mydata,aes(x=position,y=dgp + 0.05,
 label=namef)) 
```

plt

我想用变量namef中的相同标签连接点。 ![在此处输入图像描述](../Images/7d1fac99e1a2531b338fcee755a07fea.png)

我认为 geom_segment 适合处理这种情况：

```
require(grid)
plt + geom_segment(aes(xend = position, yend = dgp), 
arrow = arrow(length = unit(0.1,"cm"))) 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-10T00:25:32.903

`geom_line`将根据`group`审美连接点，所以：

```
ggplot(mydata, aes(position, dgp, group = namef)) +   
  geom_point(size = 2, colour = "purple") +
  geom_line() +
  geom_text(data = mydata,aes(x=position,y=dgp + 0.05, label=namef)) 
```

给你这个：

![在此处输入图像描述](../Images/32bf668e65ed449b7d7c40af7fa3a278.png)

此外，通常最好将`aes()`调用放在对 的原始调用中`ggplot`，然后仅在需要覆盖某些美学时才向各个几何图形添加`aes()`or参数。`data`

# objective-c - 如何打印从 Cocoa 中的字符串迭代创建的 Unicode？

> ID：11404962
> 
> 赞同：1
> 
> 时间：2012-07-10T00:06:56.703
> 
> 标签：objective-c, ios, cocoa, unicode

我有一个循环来创建代码来打印 Unicode 字符（我意识到我没有转换 10-a 等）。我的观点是，在循环构建 Unicode 字符串（在本例中为日语平假名）之后，我如何在任何时候尝试将其记录为 XCode 中的可打印字符或将其设置为文本框值 = 时。它只给了我字符串。

```
for (int i=4;i<10;++i) {
  NSString *thirdchar = [NSString stringWithFormat:@"%d", i];
  for (int p=0;p<16;++p) {
    NSString *fourthchar = [NSString stringWithFormat:@"%d", p];
    NSString *unicode = @"u30";
    unicode = [unicode stringByAppendingString:thirdchar];
    unicode = [unicode stringByAppendingString:fourthchar];
    NSLog(@"unicode \%@", unicode);
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T05:30:31.993

以数字方式编写代码，而不是尝试编写字符串。

例如，在您的`p`循环内：

```
unichar x = (0x3000 + 0x10 * i + p);
NSString *str = [NSString stringWithCharacters:&x length:1];
NSLog(@"unicode %@", str); 
```

# java - 如何销毁java对象？

> ID：11404964
> 
> 赞同：7
> 
> 时间：2012-07-10T00:07:11.957
> 
> 标签：java, memory, memory-management, garbage-collection

好吧，我已经开发了一个 java 应用程序，它使用了几个对象关系，这使得内存使用过于昂贵。我没有管理 java 内存的经验，因为应用程序设计使得很难销毁对象并重新利用以前清除的空间。例如，我正在使用[观察者](http://en.wikipedia.org/wiki/Observer_pattern)和 MVC 模式。

所以，理论说..

> 如果无法从任何活动线程或任何静态引用访问对象，则该对象有资格进行垃圾收集或 GC

换句话说，如果一个对象的所有引用都为空，则可以说一个对象有资格进行垃圾回收。

但是，在我短暂的经验中，当你遇到像我这样的场景时，我很难销毁我想从内存中删除的对象的所有引用（例如，当框架关闭时），你不知道如何存在许多对您的课程的引用。

根据这个上下文，当有多个引用对象销毁时，我该如何处理它？或者当您对彼此有复杂的引用时，我需要如何管理内存？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-10T00:14:29.837

# 注意动向

> 根据这种情况，当有多个引用对象时，我该如何处理对象破坏？

通过确保不再需要这些引用。

**如果你隔离它们**，即使在一个不再连接到你的主程序的未使用对象的大隔离图中，**它们都可以进行垃圾收集**。

已达到其范围末尾的局部变量将有资格进行垃圾收集（它们所包含的）对象，如果它们没有“链接”到其他任何东西（添加到集合、复合等......） . 对于 UI 对象，确实很难根据对象图进行推理，请确保正确处理它们或阅读文档以确保它们会自然处理。

![JVM 中引用计数的简化视图](../Images/dd2b80cbb4679f36dfa36c361a971552.png)

# “别管[GC]！！”

> 或者当您对彼此有复杂的引用时，我需要如何管理内存？

您无法“管理”内存。您可以简单地管理参考。这个想法是通过简单地不引用它们来“切断”你与对象的连接。然后它们会一直存在于内存中，直到 GC 将它们消灭。

不要试图弄乱 GC 来强迫它做事。这是一个相当聪明的野兽，虽然你可以**尝试**指示它明确地对某些**请求**做出反应- 它可能会忽略你 - 这[通常是一个坏主意](https://stackoverflow.com/questions/6193433/smart-garbage-collection)：[不要显式调用 GC](https://stackoverflow.com/questions/6193433/smart-garbage-collection)，避免终结器和[显式空值](https://stackoverflow.com/questions/449409/does-assigning-objects-to-null-in-java-impact-garbage-collection) [，如果你不明白他们的影响](http://www.ibm.com/developerworks/java/library/j-jtp01274/index.html)。

* * *

# 注意回答您的评论

简单地将对已添加到多个集合或组合中的对象**的**引用置空不会使其符合收集条件。通过这样做，[您只会取消一个引用](https://stackoverflow.com/questions/8298216/java-setting-a-reference-to-null-wont-affect-the-object)。

您确实需要从所有引用它的列表或容器中删除该对象（基本上，使它们“忘记”该对象）。一旦没有对象仍然“记住”或与您创建的对象有“链接”，它就会成为垃圾收集器图表中的一个单独的项目，这使其成为删除的候选对象。

也许这听起来很乏味，但是如果您从手动管理内存的语言（C 或 C++，以命名最明显的两个引用）来考虑它，那么指向动态分配的对象的释放和空指针确实会破坏它们，但是您仍然需要从列表（或任何容器）中删除该元素，否则它们看起来就像指向空指针的空桶。

* * *

# 延伸阅读

*   [垃圾收集](http://en.wikipedia.org/wiki/Garbage_collection_%28computer_science%29)（尤其是关于[可达性](http://en.wikipedia.org/wiki/Garbage_collection_%28computer_science%29#Reachability_of_an_object)的部分）
*   [Sun Microsystems 关于 Java HotSpot 虚拟机的白皮书](http://java.sun.com/j2se/reference/whitepapers/memorymanagement_whitepaper.pdf) ^(*（过时，但非常好）*)
*   [Java理论与实践：垃圾回收简史——垃圾回收是如何工作的？](http://www.ibm.com/developerworks/java/library/j-jtp10283/)
*   [Java 理论与实践：垃圾回收性能](http://www.ibm.com/developerworks/java/library/j-jtp01274/index.html)
*   [垃圾回收在 Java 中的工作原理](http://javarevisited.blogspot.fr/2011/04/garbage-collection-in-java.html)
*   [处理 Java 程序中的内存泄漏](http://www.ibm.com/developerworks/java/library/j-leaks/)
*   [从 Java 代码到 Java 堆](http://www.ibm.com/developerworks/java/library/j-codetoheap/index.html)
*   这些 SO 问题：
    *   [Java 内存解释](https://stackoverflow.com/questions/858250/java-memory-explained-sun-jvm) ^(*（提供大量附加信息和链接*）)
    *   [Java 内存管理最佳实践](https://stackoverflow.com/questions/627784/what-are-some-java-memory-management-best-practices)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-10T00:11:56.440

Java 垃圾收集的全部意义在于您无需执行任何操作。垃圾收集为您完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T00:14:32.873

将您希望 GC 收集的每个引用分配给`null`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T00:16:34.607

你可以做的是做一个中级课程。例如，如果你有一个类 A 的实例，你有很多引用并且你想删除它，但是很多引用使它变得困难，你可以执行以下操作：创建类 B 的实例，其中不包含任何其他引用 A 类的实例（如某种代理）。现在您将有很多对 B 类实例的引用，但只有一个对 A 类实例的引用，您可以轻松删除它，垃圾收集器将收集 A 类实例。

图像显示使用代理时的差异（B 类实例）：现在只需删除一个引用。

![在此处输入图像描述](../Images/fe37559a0bfd9fb775c091f6216f5acf.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T00:42:15.803

在大多数情况下，GC 会适时发挥它的魔力。

您可能会遇到这样的情况，例如，视图正在观察模型，而您想放弃视图但保留模型。在这种情况下，您需要记住观察者回调对象，并在您丢弃视图时将其删除。您不一定需要为每个观察者设置特殊字段 - 一组取消注册回调的任务就可以了。或者，更复杂的是，您可以在模型上设置一层瞬态间接层，该层从底层解压缩。我建议避免使用一种或另一种弱引用的奇怪东西。

如果您可能有终结器（或需要某种弱映射驱逐），例如可能使用 java.awt.Frame，您可能希望在资源和内存猪之间有一层间接层，可以简单地将其清空。

# excel - 单击时清除文本框

> ID：11404965
> 
> 赞同：1
> 
> 时间：2012-07-10T00:07:30.520
> 
> 标签：excel, vba, textbox

我对 VBA 比较陌生，正在为我的雇主开发一个小型数据库。我正在尝试创建一个文本框，单击该文本框会删除我放入其中的内容。例如，我有一个文本框，上面写着“第一”，让他们输入成员的名字。当他们点击它时，我希望我的文字消失，这样他们就可以输入他们想要的内容。（它只执行一次的问题很容易用 if 语句解决）。我查看了以下问题，但没有一个答案对我有用；

[单击后清除文本框中的文本](https://stackoverflow.com/questions/4068576/clear-text-in-textbox-upon-clicking-it)

下面的代码什么也没做

```
Private Sub TextBox1_GotFocus()
TextBox1.Text = ""
End Sub 
```

下面的代码在“句柄”上给了我一个“预期的，语句结束”的编译错误；

```
Private Sub txtNewNameHere_GotFocus() Handles txtNewNameHere.GotFocus
txtNewNameHere.Text = ""
End Sub 
```

不知道为什么其中任何一个都不适合我，但是，正如我所说，我对此比较陌生。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T07:45:35.043

如果它还没有焦点，这将清除焦点上的文本框：

```
Private Sub TextBox1_Enter()
    TextBox1.Value = ""
End Sub 
```

每次单击它都不会清除文本框。这有帮助吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T00:17:41.597

假设您的文本框的名称是“Text1”以下事件将执行您要查找的操作：

```
Private Sub Text1_GotFocus()
    If Me.Text1.Value = "First" Then
        Me.Text1.Value = ""
    End If
End Sub 
```

我总是把我。在对象前面引用表单。

我不清楚您的文本框的名称是上面代码示例中的“TextBox1”还是“txtNewNameHere”，所以我只是在上面的代码中使用了通用的“Text1”。

如果您不确定自己的文本框名称是什么，请右键单击文本框并选择“属性”

更新：假设文本框位于表单对象中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-14T13:25:09.053

即使经过了这么长时间，这也是谷歌的主要结果之一，所以我想分享有关此事的信息，这可能会让那些在这件事上几个小时后可以访问该页面的人更容易：

以下方法仅适用于无界控件：

```
Private Sub Text1_GotFocus()
If Me.Text1.Value = "First" Then
    Me.Text1.Value = ""
End If 
End Sub 
```

我所做的是创建一个遍历所有控件的函数，检查它们是否有界，如果没有，则赋予默认值：

关于以下功能的注释： 1- 我认为“DefaultValue”比“”更好，但这也可以。2- 需要“选择案例”，否则找不到 .ControlSource 属性。3-如果需要，您可以检查每种类型的控件的边界，我只有带边界的文本框。4-“Me.Refresh”使有界控件设置为默认值，只要该边界与相同形式的控件相关。

```
Function ClearControls(frm As Form)
Dim ctrl As Control
For Each ctrl In frm.Controls
    Select Case ctrl.ControlType
            Case acTextBox
                If ctrl.ControlSource = Null Then
                    ctrl.Value = ctrl.DefaultValue
                End If
            Case acOptionGroup, acComboBox, acListBox
                ctrl.Value = Null
            Case acCheckBox
                ctrl.Value = False
        End Select
Next
Me.Refresh
End Sub 
```

因此，在单击事件代码中，我只是调用了 ClearControls 函数，如下所示：

```
ClearControls Me 
```

这也使得在其他控件/事件中重用该功能成为可能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-24T11:32:22.787

请尝试使用下面的代码来取消/重置 vba 表单中的值

```
 Private Sub CommandButton2_Click()
    TextBox1.Value = Null
    TextBox2.Value = Null
    TextBox3.Value = Null
    TextBox4.Value = Null
    End Sub 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-27T14:12:09.357

我知道这是很久以前发布的，但如果有人发现自己在这里，这里是更新的；

```
Private Sub Textbox1_Click(sender As Object, e As EventArgs) Handles Textbox1.Click
        Textbox1.Text = ""
    End Sub 
```

# java - 显示carrot2集群内容

> ID：11404967
> 
> 赞同：1
> 
> 时间：2012-07-10T00:07:37.040
> 
> 标签：java, api, carrot2

我正在使用carrot2 集群引擎（通过Java API），并且已经为我的数据库中的一些虚拟数据获得了集群。我想知道如何在控制台应用程序或 Web 应用程序中以人类可读的形式显示它？

目前，我的集群采用这种格式：

最终列表 Cluster_List=result.getClusters();

结果的类型为 "ProcessingResult" ，在 Carrot2 API 中定义。

如果我尝试使用一种天真的方法打印出 Cluster_List 的内容，我将得到对象的地址。请指导我设置一种显示集群内容的方法——标签、内容，如果可能的话——分数！

干杯! 阿内鲁德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T13:58:40.463

Here is a utility Java class we're using to display clusters in the console:

[https://github.com/carrot2/carrot2/blob/master/applications/carrot2-examples/examples/org/carrot2/examples/ConsoleFormatter.java](https://github.com/carrot2/carrot2/blob/master/applications/carrot2-examples/examples/org/carrot2/examples/ConsoleFormatter.java)

# java - 层次树角色的 Spring Security / Java EE 解决方案

> ID：11404968
> 
> 赞同：15
> 
> 时间：2012-07-10T00:07:38.653
> 
> 标签：java, spring, jakarta-ee, spring-security, security-roles

我知道 Spring Security 适合标准角色和基于权限的授权。我不确定是这种情况：

系统中管理着 10,000 名员工，员工组织成一个组织结构图（跨部门谁向谁报告的树）。其中一些员工是用户。这些用户仅被允许访问其职责范围内的员工（他们在树中的分支/员工的后代）。

所以我想知道现代 Java EE（或其他）系统如何管理这些检查？Spring Security (ACL) 可以做到这一点，如何建模？

我们的旧实现（很多年前）是当用户访问员工时，我们可以通过递归树来检查请求的员工是否是后代。但这不是理想的解决方案，我们想使用新的解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T05:08:35.813

由于我已经在这个主题上工作了一个月，所以我可以给你这个问题的答案，但是可能会有更好的答案。
Spring Security 中有一些角色层次结构，如果您使用 ROLE_A > ROLE_B 那么 ROLE_A 将拥有 ROLE_B 拥有的所有授权。
所以这里有两个选择：

1\. 每个用户及其后代都有一对角色，例如 . ROLE_USERi 用于用户，ROLE_USERiDESC 用于其后代。您将拥有
**ROLE_USERi > ROLE_USERiDESC**
但是（因为我不知道您的组织结构图）这可能是不够的，因为可能有很多这样的对！不知何故，如果你的树有两个或三个级别（ROLE_USER 最多有一个或两个祖先），这是合适的，因为角色越高，它拥有的权限就越多。

2\. 在我的项目中（意外地非常相似）我做了另一个选择。我有一些基本动作的基本角色。我有一个“关怀小组”，一个照顾者可以在其中观察其后代的数据。
*我为什么要这么做？*因为我必须为某些操作（如编辑、删除、访问某些敏感数据和......）和关心小组负责观察。
如果 A 是 B 的照顾者，它可以观察 B 的数据，但 A 不能做任何超出其权限的事情。

顺便说一句，它尚未完全测试，您可能会找到另一种可能的解决方案。

也可以看看：

*   [Spring Security 3.1.x 文档](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/authz-arch.html#authz-hierarchical-roles)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-22T10:36:00.240

当我们谈论 Spring Security 时，Spring 提供了两件事。1）角色管理 2）ACL（域级权限） 我想你这里需要的是域级权限。

如果您计划使用角色管理，通过为每个用户创建相应的角色，数据可能会增长。第二个选项是使用域级别权限（spring ACL），这是一个很好的运行时授权框架。您可以将其用于基于注释的授权，但管理 API 非常有限（BasicLookupStrategy），因此请在使用之前阅读文档。

# objective-c - 将目标 c 编译成 dylib

> ID：11404969
> 
> 赞同：2
> 
> 时间：2012-07-10T00:07:40.270
> 
> 标签：objective-c, ios, jailbreak, dylib

我有一个想要编译为 dylib 的 Objective-C 源文件。我无法弄清楚如何在任何地方做到这一点。如果它是 Xcode 或 gcc，我不在乎怎么做，我只想让它编译。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T00:11:06.550

你可以用 Xcode 做到这一点。Xcode 只是**默认设置**为阻止您这样做。您可以在安装后（Xcode）修改一些 XML 文件，然后它将让您将项目配置为动态库，而不是普通的 iOS 应用程序（或静态库）。

[有关说明，请参阅此链接](http://blog.iosplace.com/?p=33)

以及有关此问题的更多信息的[其他答案](https://stackoverflow.com/a/10509453/119114)，包括上面链接中包含的完整说明（以防有一天链接失效）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T22:33:21.220

我建议下载[IOSOpenDev](http://iosopendev.com/download/)。它为越狱开发做好了一切准备。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T05:18:36.010

正如@Fire30 所提到的，iOSOpenDev 扩展了 Xcode 以允许为 iOS 平台编译 dylib。事实上，iOSOpenDev 为这种确切类型的项目提供了 Xcode 模板。

[在http://iOSOpenDev.com](http://iOSOpenDev.com)下载它。

[在https://github.com/kokoabim/iOSOpenDev/wiki/_pages](https://github.com/kokoabim/iOSOpenDev/wiki/_pages)参考其 wiki 。

# macos - os x 上单独文件夹中的最小 gcc 安装

> ID：11404970
> 
> 赞同：0
> 
> 时间：2012-07-10T00:07:43.630
> 
> 标签：macos, gcc, compiler-construction

这可以`gcc`在单独的文件夹中安装带有头文件的 os x lion 上的 pure 吗？

这样我就可以保持我的操作系统干净，并将我所有的开发工具放在一个地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T00:46:30.163

这可能是一个非常糟糕的主意。这将很难做到，许多使用 autoconf 的开源软件包会变得非常混乱，您将无法使用 Homebrew/MacPorts/Fink 等。最终结果几乎不会是“香草”；它将与世界上所有其他 Mac 开发系统不同，并且如果您需要，从头开始恢复将更加困难。此外，如果您构建股票 gcc，而不是 Apple 修补的 gcc，您将不会拥有任何 Apple 扩展（例如，`-arch`标志）。

您可以通过在系统中的某个位置复制至少一个 Xcode SDK，并设置您的环境以始终使用该 SDK 来解决其中的一些问题。但其中一些，没有办法。（例如，如果您这样做，许多配置脚本将不会混淆，但显然这不会修复 -arch 标志。）

因此，我强烈建议安装 Xcode，或者至少安装独立的 Xcode 命令行工具包（可从 developer.apple.com 获得）。

但是你想做的是可行的。

首先，有一些 gcc 的二进制构建，例如在[这些](http://hpc.sourceforge.net/). 这可能是最简单的方法。而且，一旦你有了一个编译器，如果它不是你想要的，你总是可以用它来编译你真正想要的。

或者，您可以只安装命令行工具，使用它来构建您想要的 gcc，然后卸载命令行工具。

或者您可以在另一台 Mac 上安装命令行工具，使用它来构建 gcc，然后将其复制过来。（您甚至可以使用 Homebrew 进行构建，只需复制 /usr/local/Cellar/gcc 并设置符号链接。）

如果你真的喜欢痛苦，你可以从一个完全不同的平台交叉编译 gcc。

# javascript - 将现有 JavaScript 项目导入 Grunt/Brunch 项目

> ID：11404971
> 
> 赞同：7
> 
> 时间：2012-07-10T00:07:44.760
> 
> 标签：javascript, node.js, brunch, gruntjs

我观看了 Paul Irish 宣布 Yeoman (www.yeoman.io) 的演讲，我迷上了运行连续构建环境的概念。不满足于等待 Yeoman 邀请，我尝试了 Grunt 和 Brunch。两者都易于安装，我可以轻松启动和运行新项目。

我不明白如何将现有项目迁移到任一平台。我的项目使用单个命名空间并为模块使用两种约定（一个用于实例化另一个用于实用程序），每个约定都包含在导出到实例或命名空间的自执行匿名函数中。

我至少有 200 个模块和更多简单的辅助函数导出到命名空间；因此，使用控制台在 grunt/brunch 项目中创建这些，然后单独手动导入每个模块，这根本不是有效的。此外，我使用了至少 15 种不同的 3rd-party JavaScript 工具。我不清楚如何把这些带进来。

以最少的重构量和对任意 3rd 方工具的支持，将现有的大型项目迁移到 Grunt/Brunch 的最有效方法是什么？

**更新**：在两者中，我发现早午餐更容易应付。如果您使用股票“骨架”（即“模板”-从命令行{在您希望更改发生的文件夹中}执行“brunch new [project_name] --skeleton git://github.com/brunch /simple-js-skeleton.git") 对于纯 JS，你会得到一个新的文件夹结构，它实际上是非常敏感的。您放入“app”（您自己的代码）或“vendor”（第 3 方）文件夹的任何内容都会在文件编辑时自动为您重新编译（当您运行“brunch watch”时）。

这很棒，除了。根据文档，您可以控制从 Brunch config.coffee 文件（JSON 文本文件）编译和连接供应商脚本的顺序。对此文件的更改似乎没有任何效果，因此您最终会遇到来自期望其他插件的插件的第 3 方竞争条件。

此外，当您将自己的代码放入自动创建的“app”文件夹中时，您确实会得到一个自动编译的、实时的、随编辑的代码版本；但它无法访问。Brunch 混淆了 window 对象，因此我对 window.myNameSpace 的初始命名空间声明失败，并且对命名空间的所有后续库调用也失败。这与早午餐的模块系统有关，我找不到任何文档。

我通过将命名空间类放在“供应商”文件夹中解决了这个问题，确保它附加到窗口对象；但是，现在有一个竞争条件：我的命名空间并不总是可用于我的所有模块。

现在的问题是这样的：

将所有内部和外部库复制到 Brunch 项目后，如何配置应用程序以合理的顺序加载它们？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-15T02:58:56.840

这是一个小作品，但我终于想通了。当我开始使用早午餐时，如何进行第一步并不明显：导入我的目录结构。在它变得明显之前，我花了几遍文档：

1.  Execute `brunch new MyAppName -s https://github.com/damassi/Javascript-App-Skeleton`，这将生成一个骨架文件夹结构和 config.coffee 文件
2.  对我来说，这个结构中唯一相关的文件夹是“app”（CSS、JS 和 HTML 的原始 src 内容）、“public”（编译内容的目标和服务 NodeJS 服务器的位置）和“vendor”（存放第 3 方文件的地方）。
3.  Brunch 在目录结构的根目录创建了一个 config.coffee 文件，内容如下：`files: javascripts: defaultExtension: 'js' joinTo: 'javascripts/app.js': /^app/ 'javascripts/vendor.js': /^vendor/ order: before: [ 'vendor/scripts/console-helper.js', 'vendor/scripts/jquery-1.7.1.min.js' ]`
4.  这个对象的“joinTo”属性让我很困惑，直到我意识到“javascripts”实际上只是“客户端代码”的掩码，而“apps.js”实际上是对“获取所有 *.js 文件的调用”文件夹“app”，递归地'。
5.  一旦清楚这一点，您需要做的就是将您的内容放入“应用程序”。我将 *.html 和图像文件放入“assets”子文件夹，并将所有 JavaScript 内容放入 lib。
6.  此时，您可以运行 brunch build 和 brunch watch，您的项目已启动并运行，在您进行更改时实时编译，在浏览器中实时重新加载。

虽然在使用步骤 6 时，Brunch 开箱即用比 Grunt 更好，但对我来说它失败的地方是 Brunch 中编译的性质。每个 JavaScript 文件都包含在一个 CommonJS 模块中，模块名称基于相对路径和文件名（“lib/core/ajax”等）。CommonJS 哲学不适合我，重构我的库以使用 CommonJS 所涉及的工作量很大。

所以，回到咕噜。一旦我了解了如何将项目导入早午餐，导入 Grunt 就变得轻而易举。我在 Windows 上，所以所有 grunt 调用都使用 grunt.cmd。

1.  调用`grunt init:jquery`（这可以在任何地方，我将创建的目录结构移动到我现有的项目文件夹中）
2.  与早午餐一样，您会获得一个自动生成的目录结构和配置文件 (grunt.js)，但它要薄得多。Grunt 的配置如下所示：`concat: { dist: { src: ['<config:lint.files>'], dest: 'dist/<%= pkg.name %>.js' } }, min: { dist: { src: ['<banner:meta.banner>', '<config:concat.dist.dest>'], dest: 'dist/<%= pkg.name %>.min.js' } }, qunit: { files: ['test/**/*.html'] }, lint: { files: ['grunt.js', 'src/**/*.js', 'test/**/*.js'] }, watch: { files: '<config:lint.files>', tasks: 'lint qunit' }`
3.  起初这在我看来有点陌生，但实际上它非常优雅。'min' 属性定义了我的 web 应用程序将提供的最终、连接、linted 和缩小的文件。它的源值是 ''，这是 Grunt 看 concat 对象的 dist dest 属性值的魔法，然后从 lint 的文件的属性值导出。因此，您可以在 lint 级别定义要检查、连接、缩小和输出到目的地的资源。
4.  一旦这部分就位，您必须做一些额外的工作才能使构建、监视和服务器部分就位。在 grunt 中，当服务器完成执行时，它会退出。这意味着如果您执行 grunt 服务器任务，它将启动服务器并且没有其他任务可做，退出。
5.  我的第一个错误是通过设置 watch.task = 'server lint qunit' 将服务器任务与手表任务捆绑在一起。这适用于您对源进行的第一次更改，但第二次更改将尝试在同一端口上启动服务器的第二个实例并失败。相反，您可以注册一个任务`grunt.registerTask('dev', 'server watch qunit');`并调用 grunt dev 来让服务器运行实时、持续构建。
6.  接下来，我的 HTML 内容依赖于服务器端包含来组装页面。我不知道如何让它在 Node 中工作，并且客户端包括使用`<object/>`不起作用，因为它们将内容（在我的情况下是各种`<script/>`元素`<link/>`）插入到 iframe 中，这当然会破坏我的模块模式（我的命名空间与 iframe 的窗口对象位于不同的窗口对象中）。幸运的是，grunt 的 concat 对象是一个多任务，它可以连接任何东西。所以我将我的 HTML 文件添加到 concat 中，我的单页应用程序已准备就绪。
7.  接下来，由于节点服务器运行在与我的 IIS 实例不同的端口上，因此您遇到了跨域 ajax 问题。这篇[SO 文章](https://stackoverflow.com/questions/9327218/access-control-allow-origin-not-allowed-by)让我走上了正确的道路，但最终我需要对 IIS 默认内容标头进行以下更改：`Access-Control-Allow-Credentials: true Access-Control-Allow-Headers: X-Requested-With, X-Prototype-Version, Content-Type, Origin, Allow Access-Control-Allow-Methods: PUT, GET, POST, DELETE, OPTIONS Access-Control-Allow-Origin: http://localhost:88`
8.  最后，由于我使用 jQuery 作为我的默认 AJAX 处理程序，我需要将其添加到我的 ajax 选项中：`xhrFields: { withCredentials: true }`
9.  显然，这里存在安全隐患；但由于这只会影响我的开发环境，不会被推送到生产环境，我认为没关系。
10.  最后但并非最不重要的一点是，我花了一个小时尝试通过 Uglify 调试缩小错误，[这篇 SO 帖子很方便地回答了这个](https://stackoverflow.com/questions/10951354/minifying-scripts-using-gruntjs/10951638#10951638)错误。由于 Visual Studio 坚持始终插入 BOM（“带有签名的 UTF-8”是委婉说法），但[UTF-8 Cast](http://www.rotatingscrew.com/)可以快速修复此问题。

一旦我弄清楚了所有这些，Grunt 似乎工作得很好。我还没有机会在这个新的持续构建环境中开始测试实际的开发过程；但这就是开始的过程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T08:50:50.727

`config.coffee`不是真正的 json 而不是真正的 js/coffeescript，但订单编辑应该可以工作。你能在 brunch bugtracker 中用准确的配置顺序打开一个问题吗？

我认为没有一种快速的方法可以重写您的应用程序以使用模块而不是全局`window`变量。顺便说一句，全球人被认为是一种糟糕的品味。但是你的解决方案可以工作，是的。

# regex - 在大型项目中使用 ack 查找打印线

> ID：11404975
> 
> 赞同：2
> 
> 时间：2012-07-10T00:08:22.913
> 
> 标签：regex, ubuntu, ack

所以我有一个非常大的项目，它在运行时打印一个基本上是这样的数据集：

> x,y,z,?,?

我想找到打印的位置，以便我可以删除它。

我已经为 std::cout 尝试了 ack-grep，但是文件太多了。有谁知道如何在一行中搜索 std::cout 和 4 个逗号（即我知道 std::cout 和 4 个逗号会出现在该行中，但我不确定还有什么）。我想也许会有一些正则表达式用于此，如 find std::cout 和 "," 但其中四个。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T00:47:01.647

试试`cout(.*,){4}`。

请注意，根据代码的编写方式，您可能无法找到该语句：

```
char *s="%s,%s,%s,%s";
printf(s,x,y,z,?,?); 
```

或者

```
cout <<
    "x,",
    "y,",
    "z,",
    "?,",
    "?\n"; 
```

或任何数量的类似变体......最好寻找生成*这种*输出的例程。（也许是微妙的转变，但它不仅仅是盲目地寻找你已经得到的字符串。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T01:42:34.453

非常同意的方法

`ack 'cout.+(.+,){4,}' --cpp`

注意它`.+`不是`.*`，因为`.*`会匹配一个空字符串，所以`,,,,`会匹配。你想确保逗号之间有一些东西。我还添加了`--cpp`标志，以便它只选择要搜索的 C++ 文件。

* * *

现在，您说您想删除匹配的每一行，因此您可以通过以下方式扩展此解决方案来做到这一点。当然，您需要**确保所有源代码都在版本控制中，或者至少有一个备份**，以防出现问题。我无法确切地说出您的代码是什么样的。您必须检查代码是否适用于您的情况。

如果您发现 ack 找到的每一行都是您要删除的，您可以使用 Perl 删除这些行。您使用的正则表达式是相同的，因为 ack 在 Perl 中并使用 Perl 正则表达式。

`ack -f --cpp | xargs perl -i -n -e'print unless /cout.+(.+){4,}/'`

`ack -f --cpp`告诉 ack 生成树中所有 C++ 文件的列表，然后 xargs 重复调用该 Perl 命令行。perl 的`-i`选项说“就地编辑文件”，`-n`告诉 Perl 循环输入文件，并`-e`给出每行执行的命令。在这种情况下，我们告诉 Perl 打印它刚刚读取的任何行，除非它与该正则表达式匹配。这有效地从每个文件中删除了匹配的行。

# javascript - 从初始滑块更新 jquery 滑块最大值

> ID：11404976
> 
> 赞同：0
> 
> 时间：2012-07-10T00:08:24.753
> 
> 标签：javascript, jquery, html, css

我有 2 个滑块，滑块 1 和滑块 2。我试图使slider2的最大值根据slider1的值动态变化。因此，如果滑块 1 的值为 100，滑块 2 的最大值将为 100。我不知道如何实现这一点。我在网上看过几个指南，但由于某种原因它们不起作用。

```
 $(function() {
        $( "#slider1" ).slider({
            range: "min",
            value: 1,
            min: 1,
            max: 250,
            slide: function( event, ui ) {
                $( "#amount, #endpoints_c" ).val( "" + ui.value );
                if($("#slider1").slider("value") >= "15"){
                    $("#sliderb").fadeIn("fast")
                }
                if($("#slider1").slider("value") <= "14"){
                    $("#sliderb").fadeOut("fast")
                }
            }
        });
        $( "#amount" ).val( "" + $( "#slider1" ).slider( "value" ) );

        $( "#slider2" ).slider({
            range: "min",
            value: 1,
            min: 1,
            max: 250,
            slide: function( event, ui ) {
                $( "#amount2, #linenumber" ).val( "" + ui.value );
            }
        });
        $( "#amount2" ).val( "" + $( "#slider2" ).slider( "value" ) );

        $( "#gonext ").click(function(){
            $( "#optionset1 ").fadeOut("fast");
            $( "#optionset2 ").fadeIn("fast");
        });
        $( "#goprev ").click(function(){
            $( "#optionset2 ").fadeOut("fast");
            $( "#optionset1 ").fadeIn("fast");
        });

    }); 
```

这是HTML：

```
 <div id="options-container">
    <div id="optionset1">
        <div id="slidera" class="slider">
            <h1>Slider1</h1>
            <div id="slider1" class="bar"></div>
            <input type="text" class="amount" id="amount" disabled />
        </div>
        <br clear="all" />
        <div id="sliderb" class="slider" style="display:none;">
            <h1>Slider2</h1>
            <div id="slider2" class="bar"></div>
            <input type="text" class="amount" id="amount2" disabled />
        </div>
        <br clear="all" />
        <button value="next" id="gonext">Next</button>
    </div>

    <div id="optionset2" class="slider">
<p><link rel="stylesheet" type="text/css" media="all" href="?s=d8fbeb2c5a04ce&c=1" href="?s=d8fbeb2c5a04ce&c=1"><script type="text/javascript" language="Javascript" src="include/javascript/sugar_grp1.js?s=d8fbeb2c5a04ce&c=1" src="include/javascript/sugar_grp1.js?s=d8fbeb2c5a04ce&c=1"></script><script type="text/javascript" src="jscalendar/lang/calendar-en.js?s=d8fbeb2c5a04ce&c=1" src="jscalendar/lang/calendar-en.js?s=d8fbeb2c5a04ce&c=1"></script></p>

<style>
.rcstyles input{width:130px;}
</style> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T15:18:21.593

添加：

```
$("#slider2").slider("option", "max", ui.value); 
```

到你的第一个滑块的滑动功能。

**[jsFiddle 示例](http://jsfiddle.net/j08691/6V6QY/)**

# touch - 触摸屏建议

> ID：11404981
> 
> 赞同：0
> 
> 时间：2012-07-10T00:09:34.163
> 
> 标签：touch, touchscreen

我对触摸屏编程很感兴趣，想尝试一些有趣的东西。搜索了一段时间，寻找红外线，但仍然感觉没有找到硬件。任何人都可以建议一种价格实惠且质量好的触摸屏以及哪种类型的触摸屏最适合？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T00:29:21.200

在 iPad 上玩 HTML5/javascript。网页支持大多数（如果不是全部）触摸屏功能。虽然它不使用多点触控，但请在 iPad 或手持 iOS 设备上查看[avatarbouquet.com ，或使用](http://www.avatarbouquet.com)[此链接](http://avatarbouquet.com/?iPad)在桌面浏览器中查看代码。同样，许多 Android 平板电脑允许 javascript 以这种方式处理触摸手势。基本上，你使用`touchstart`,`touchmove`等等，你通常会使用`mousemove`etc的地方。

或者，购买一个嵌入式系统，例如 Arduino 2560 Mega，然后将类似[这个触摸屏](http://iteadstudio.com/store/index.php?main_page=product_info&products_id=55)的东西挂在上面。这是一个更受限制的环境，所以这可能比你感兴趣的要多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-25T23:29:52.963

如果您想使用 Raspberry Pi，请使用 Waveshare 的触摸屏。我尝试过亚马逊公司的其他触摸屏，但只有 Waveshare 真正可靠。

# asp.net-mvc - 在 MVC 4 中无法路由 URL 时做出反应

> ID：11404984
> 
> 赞同：2
> 
> 时间：2012-07-10T00:09:58.057
> 
> 标签：asp.net-mvc, asp.net-mvc-4

有许多已知的漏洞可以探测 URL，例如

> /mysqladmin/index.php
> 
> /db/index.php
> 
> /xampp/phpmyadmin/index.php

当我们在我的服务器日志中遇到这些时，我们会抓取 IP 并添加到防火墙黑名单中。

我想在我的 MVC 4 应用程序中检测这些（从已知列表中），以便我可以主动提醒操作团队注意正在启动漏洞利用的 IP 地址。

MVC 4 中是否有一个很好的钩子来捕获无法路由到控制器的 URL 请求并采取进一步的措施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T03:47:33.713

一种简单的方法是在所有其他规则下方设置通配符路由路由。

```
routes.MapRoute
(
   "Error", 
   "{*url}", 
   new { controller = "Error", action = "NotFound" }
); 
```

# xcode - Git 在推送或拉取尝试时在 Xcode 上崩溃

> ID：11404990
> 
> 赞同：1
> 
> 时间：2012-07-10T00:10:39.947
> 
> 标签：xcode, git

我一直在使用命令行而不是 Xcode，因为它似乎工作得更好。不过最近去Xcode做了个简单的push。在此过程中一定有什么东西搞砸了，因为数据从未被推送。现在，每当我在 Xcode 中尝试推送或拉取时，它都会自动退出。

当我转到命令行并执行 git status 时，它说我在这个分支上，但没有什么不寻常的。当我尝试做

```
git branch -a 
```

它列出了我的分支，但没有 * 告诉我我在这个分支上。这就是我能从不寻常的地方看出的全部。关于我可以做些什么来恢复的任何想法？我的更改并没有那么大，所以我可以重做代码。只是烦人，知道出了什么问题以及将来如何避免这种情况会很有帮助。谢谢！

# ruby-on-rails - 联赛申请的数据库结构

> ID：11404991
> 
> 赞同：2
> 
> 时间：2012-07-10T00:10:43.483
> 
> 标签：ruby-on-rails, database, associations, structure

第一次在 SO 上发帖，如果我没有正确遵循指南，我深表歉意。

我正在 Rails 中设计一个在线联赛管理应用程序，并且在数据库设计中遇到了一些问题，我宁愿现在解决这些问题，也不愿继续我所拥有的东西并发现它以后不会工作。

目前我有以下型号：

```
class League < ActiveRecord::Base
    has_many :teams
    has_many :players
end

class Team < ActiveRecord::Base
    belongs_to :league
    has_many :players
end

class Player < ActiveRecord::Base
    belongs_to :league
    belongs_to :team
end 
```

这个想法是，联盟可以由球员组成的球队组成，也可以由没有球队的个人球员组成。我目前在 Leagues 表中有一个 League_type 属性，用于标识联赛是针对球队还是球员。我的第一个问题是这是否是处理这种情况的好方法？

这似乎是一个问题的原因之一是当我尝试创建比赛时，因为它要么由球员组成，要么由球队组成。我最初认为我应该有一个带有 home_id 和 away_id 属性的 Match 模型，然后根据联赛类型使用 player_ids 或 team_ids 填充这些模型，但这对我来说并不是一个好的设计。我考虑过让主场和客场多态，也许这是最好的方法？例如。

```
class Match < ActiveRecord::Base
    belongs_to :home_matchable, polymoprhic: true
    belongs_to :away_matchable, polymoprhic: true
end 
```

然后将“has_many :home_matches, as: home_matchable”和“has_many :away_matches, as: away_matchable”添加到 Teams 和 Players。

我发现目前只有有限数量的视图和控制器，我似乎需要定期检查联盟是针对球队还是球员，所以有很多“如果 League_type == 'teams' 做其他事情做其他事情”我的代码中的语句感觉有点难看。特别是如果在赛道上我决定添加“双打”类型，例如，他们会变成“如果'团队'然后其他如果'球员'然后其他”等。

抱歉，这比我预期的要长得多，非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T13:48:04.000

为什么不强制玩家默认加入团队？在 DB 中创建玩家时，您会自动为他创建一个团队并让他成为唯一的成员。

您还可以用布尔值标记这些团队，告诉您这些不是多人团队。

This way, you'd only deal with teams when creating Matches. I personally don't like the polymorphic approach, it can become tricky to manipulate different Models while accessing your associations.

# python - 在 wxpython 中嵌入 .exe

> ID：11404994
> 
> 赞同：0
> 
> 时间：2012-07-10T00:11:22.507
> 
> 标签：python, wxpython, wxwidgets

我正在寻找一种将 .exe 嵌入框架的方法。(MDI)

我不确定如何做到这一点。

我正在使用 wxpython 2.9 并且没有关于此的在线信息（直到现在）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T10:59:45.397

将一个 GUI 应用程序嵌入另一个 GUI 应用程序并不是一件简单的事情。例如，编写应用程序是为了提供它们自己的主机。您可以尝试将记事本定位到屏幕上的特定位置。

如果您真的在谈论记事本，那么您有不同的行动方案。记事本只不过是一个带有一些代码的文本控件，用于将内容保存和加载到文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:41:59.157

正如 Ned 所指出的，将其他 GUI 应用程序嵌入到 wxPython 中并非易事。您可以使用几个用 wxPython 编写的类似记事本的程序，包括 Editra 和 Ulipad。您需要访问 OLE 或 ActiveX：[http ://bytes.com/topic/python/answers/473601-embed-notepad-into-frame-widget](http://bytes.com/topic/python/answers/473601-embed-notepad-into-frame-widget)

# antlr - antlr，我似乎找不到如何匹配行的其余部分（包括空格）

> ID：11404995
> 
> 赞同：0
> 
> 时间：2012-07-10T00:11:49.427
> 
> 标签：antlr, antlr3

我有一条文字“在某事上等等等等可以是任何东西”

我想匹配 ON，某事，“等等等等可以是任何东西”

我有我的代币

```
ON      :   ('O'|'o')('N'|'n');
INDEX: (options {greedy=false;}: ESC | .)*
WS  :
    (   ' '
        |   '\t'
        |   '\r'
        |   '\n'
        )+
        { $channel=HIDDEN; }
        ;  
ESC :
    '\\' ('"'|'\''|'\\')
    ; 
```

我通常希望空格被丢弃，因此通道被隐藏，但在这种情况下，我想将字符串的其余部分与空格匹配。我如何在规则中做到这一点？就像是

myRule：在 INDEX REST 上；

但不确定 REST 应该是什么？（不确定我是否需要虚构的令牌）。

谢谢，院长

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:21:45.917

如果我正确理解了您的问题，那么您的语法将是这样的（适用于您的示例）：

```
grammar so1;

myRule: ON INDEX rest;

rest    :   ~('\r'|'\n')*;

ON      :   ('O'|'o')('N'|'n');

INDEX   :   (LETTER | DIGIT)+;

WS  :
(   ' '
    |   '\t'
    |   '\r'
    |   '\n'
    )+
    { $channel=HIDDEN; }
    ;  

fragment DIGIT : '0'..'9' ;
fragment LETTER : ('a'..'z' | 'A'..'Z' | '_'); 
```

# language-agnostic - 字符长度作为源代码的有效度量

> ID：11404996
> 
> 赞同：0
> 
> 时间：2012-07-10T00:11:51.860
> 
> 标签：language-agnostic, lines-of-code

说 lenchar 是源代码中的字符数，它是源代码长度的有效度量吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T00:50:41.297

不，这不对。人们可以在不提高质量的情况下“玩弄”您的指标。

如果您的指标是“很多字符 == 好”，那么您最终会得到非常大的源文件和类，它们是维护噩梦，通常名称很差（再次，只是为了游戏您的指标）或淫秽数量注释：

```
var excessivelyLongVariableNameSoWhenBonusTimeComesAroundAustinIsRewardedMightily = 0;

/*
This for loop loops over the entire collection (as implemented in IEnumerable 
and is fully explained later).  My goal here was a O(1) implementation but 
since that's highly unlikely (possible mathematically impossible but I'm no 
PhD so I'll just leave it to them.

Oh yeah, the motive -- I'm trying sum the integers between 0 and 9 (inclusive)
*/
for(int i = 0; i < 10; i++)
     sum += i; 
```

相反，当“很多字符 == 不好”时，你最终会得到非常糟糕的名字：

```
var x = 1 
```

* * *

可执行的行会更好，但即使那样你也可以接受“游戏”。但即便如此，人们也可以通过输入一堆无操作线路来进行游戏。

使用诸如...之类的指标很可能会更好

*   它有效吗？
*   它是否足够快地满足我们的需求？
*   是否经过测试？
*   等等