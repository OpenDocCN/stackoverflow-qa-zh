# StackOverflow 问答 10231000-10231999

# oracle - PLS-00103：在预期以下情况之一时遇到符号“WHERE”

> ID：10231001
> 
> 赞同：0
> 
> 时间：2012-04-19T15:03:18.667
> 
> 标签：oracle, plsql, syntax-error

```
DECLARE
          v_count NUMBER ;
        begin
            SELECT Count(COMPLETION) INTO v_count  FROM AIMS  WHERE  Code=997 AND completion !=2  ;
            IF v_count = 0 THEN
               UPDATE UNITS pu
                    SET
                      code = 'COM',
                      status = 'F',
                      by = '',
                      date =     (
                          SELECT Nvl(Max(la.end_date), To_Date('01/01/1900', 'DD/MM/YYYY'))
                          FROM aims la  WHERE la.code = 997  GROUP BY la.code  
                          ) ;  
                      WHERE ID = 997 ;
            END IF ;

             END; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:05:07.953

```
DECLARE
          v_count NUMBER ;
        begin
            SELECT Count(COMPLETION) INTO v_count  FROM AIMS  WHERE  Code=997 AND completion !=2  ;
            IF v_count = 0 THEN
               UPDATE UNITS pu
                    SET
                      code = 'COM',
                      status = 'F',
                      by = '',
                      date =     (
                          SELECT Nvl(Max(la.end_date), To_Date('01/01/1900', 'DD/MM/YYYY'))
                          FROM aims la  WHERE la.code = 997  GROUP BY la.code  
                          ) ;  

--                          ^  Extra semicolon

                      WHERE ID = 997 ;

            END IF ;

             END; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T15:06:00.717

您的代码中有一个额外的分号。去掉这里的分号：

```
 date =     (
                      SELECT Nvl(Max(la.end_date), To_Date('01/01/1900', 'DD/MM/YYYY'))
                      FROM aims la  WHERE la.code = 997  GROUP BY la.code  
                      ) ; 
```

# java - 关于创建文件对象的代码

> ID：10231017
> 
> 赞同：0
> 
> 时间：2012-04-19T15:04:09.113
> 
> 标签：java

我曾经看到以下用于创建文件对象的代码

```
File trainingFile = new File(new File(dataDir,category),category+".txt"); 
```

`new File`在我看来，外部存在递归调用，`new File`这段代码到底是做什么的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:09:02.200

它为您提供了一个`File`对象，其路径由`<dataDir>/category/category.txt`where`<dataDir>`是文件路径表示，并且`category`是一个字符串，既用作文件名，也用作最内部的目录名称。

它首先使用构造函数[File(String,String)](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#File%28java.lang.String,%20java.lang.String%29)，然后使用[File(File,String)](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#File%28java.io.File,%20java.lang.String%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T15:06:41.483

构造`File`函数有一个重载，它接受一个父`File`对象来放入新对象`File`。

# java - 在 Blackberry Java 中剥离一串 html 标签

> ID：10231020
> 
> 赞同：1
> 
> 时间：2012-04-19T15:04:16.763
> 
> 标签：java, blackberry

我正在通过 RSS 提要解析博客上的一系列帖子，幸运的是 text() 中有一系列 html 标签，我尝试使用 replace() 方法，但出现以下错误：`The method replace(char, char) in the type String is not applicable for the arguments (String, String) Here is my code: String stripString = mDesCollect.replace("{\\<.*?\\>}", ""`在黑莓开发中。请问需要去除标签文本的方法吗？下面是一个文本示例：

```
<!-- [DocumentBodyStart:4accc09d-2c60-4371-956f-1293c4a9746a] --><div class="jive-rendered-content"><p>Hello everyone. Blessed be the God and Father of our Lord Jesus Christ, who hath blessed us with all spiritual blessings in heavenly places in Christ (Ephesians 1:3). </p><p>We're in the second week of this special month of preparation. We'll pray at 12noon, 5pm and 10pm (GMT+1) for 15min, speaking in tongues fervidly and declaring words of faith regarding any situation of concern. God bless you.</p></div><!-- [DocumentBodyEnd:4accc09d-2c60-4371-956f-1293c4a9746a] --> 
```

非常感谢，我感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:10:12.280

由于使用正则表达式是一种不好的形式（请参阅[RegEx match open tags except XHTML self-contained tags](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)），请查看[http://jsoup.org](http://jsoup.org)

# android - Android TableRow 儿童问题

> ID：10231026
> 
> 赞同：3
> 
> 时间：2012-04-19T15:04:40.943
> 
> 标签：android, width, tablelayout, children, tablerow

我目前`TableLayout`有 3 行，每行有一个孩子， a `TextView`。我的问题是`TextViews`宽度没有`"match_parent"`达到应有的水平。我遵循了不为它们定义高度和宽度的程序（[如文档所述](http://developer.android.com/reference/android/widget/TableRow.html)），但由于某种原因，问题仍然存在。

我已经打开`hierarchyviewer`并查看了值，它`TableRow`填充了应有的宽度，但`TextView`没有填充行，它只是包装了内容。完整的xml布局如下，有人有什么想法吗？

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
<TableRow
    android:layout_width="match_parent"
    android:layout_height="wrap_content">   
    <TextView
        android:background="@drawable/textlines"
        android:text="@string/text1_string"
        android:textColor="#000000"
        android:padding="5dp">
    </TextView>
</TableRow>
<TableRow
    android:layout_width="match_parent"
    android:layout_height="wrap_content">   
    <TextView
        android:background="@drawable/textlines"
        android:text="@string/text1_string"
        android:textColor="#000000"
        android:padding="5dp">
    </TextView>
</TableRow>
<TableRow
    android:layout_width="match_parent"
    android:layout_height="wrap_content">   
    <TextView
        android:background="@drawable/textlines"
        android:text="@string/text1_string"
        android:textColor="#000000"
        android:padding="5dp">
    </TextView>
</TableRow>
</TableLayout> 
```

我还将包含 .xml 文件的 xml 文件`@drawable/textlines`。也许问题就在那里？（`textlines`代码取自此处提供的有关边界问题的解决方案）我非常了解它，我认为它不会影响我的问题，但我可能是错的。无论如何，这里是：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
<item>
  <shape 
    android:shape="rectangle">
        <stroke android:width="1dp" android:color="#FF000000" />
        <solid android:color="#FFDDDDDD" />

    </shape>
</item>

<item android:top="1dp" android:bottom="1dp"> 
  <shape 
    android:shape="rectangle">
        <stroke android:width="1dp" android:color="#FFDDDDDD" />
        <solid android:color="#00000000" />
    </shape>
</item>
</layer-list> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-19T19:00:47.810

我不知道为什么会发生这种情况，但是您可以通过添加以下内容来避免该问题：

```
android:layout_weight="1" 
```

给您的孩子`TextView`，或添加：

```
android:stretchColumns="0" 
```

给你的父母`TableLayout`。

# sql-server-2008 - sql server 2008 - 从调用存储过程访问被调用存储过程返回的多个结果集

> ID：10231028
> 
> 赞同：1
> 
> 时间：2012-04-19T15:04:44.160
> 
> 标签：sql-server-2008, multiple-resultsets

我有一个返回多个结果集的存储过程，它工作得很好。但是，我正在为这个过程编写单元测试，所以我需要从另一个存储过程中调用它。我已经使用 SqlDataReader.NextResult() 在我的代码中处理了这些多个结果集。SQL Server 中的这些行上是否有一些东西可以让我在调用存储过程中做同样的事情？甚至在我遍历结果集之前，也应该有一种方法来存储它们。

# .htaccess - .htaccess 检查特定查询字符串属性

> ID：10231038
> 
> 赞同：0
> 
> 时间：2012-04-19T15:05:12.320
> 
> 标签：.htaccess, query-string

我们正在更改网站的结构，旧的 url 看起来像：

```
http://www.website.co.uk/pages.php?PageId=7 
```

新网址是：

```
http://www.website.co.uk/niceurl 
```

我使用的 CMS 附带了这个 .htaccess，因此它的核心功能不能以不同的方式工作。

```
<IfModule mod_rewrite.c>

Options +FollowSymLinks

RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME}/index.html !-f
RewriteCond %{REQUEST_FILENAME}/index.php !-f

RewriteRule ^(.*)$ index.php/$1

</IfModule> 
```

我*真正*想做的是检查 pages.php 是否被请求，如果是则忽略规则：

```
RewriteRule ^(.*)$ index.php/$1 
```

然后在此规则之后执行以下操作：

```
RewriteRule ^PageId=7(.*)$ /niceurl [R=301] 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T16:35:25.490

解决方案：

```
<IfModule mod_rewrite.c>

Options +FollowSymLinks
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME}/index.html !-f
RewriteCond %{REQUEST_FILENAME}/index.php !-f

RewriteCond %{QUERY_STRING} !(PageId=7)

RewriteRule ^(.*)$ index.php/$1

RewriteCond %{QUERY_STRING} PageId=7
RewriteRule .* /niceurl? [R=302,L]

</IfModule> 
```

# ruby - 如何断言一个类将使用 RSpec 响应类方法？

> ID：10231046
> 
> 赞同：14
> 
> 时间：2012-04-19T15:05:40.330
> 
> 标签：ruby, rspec2

假设我有一个像这样的类定义：

```
class Foo
  def init(val)
    @val = val
  end

  def self.bar
    :bar
  end

  def val
    @val
  end
end 
```

具有如下规格：

```
describe Foo
  it { should respond_to(:val) }
  it { should respond_to(:bar) }
end 
```

第二个`it`断言失败。从 RSpec 的文档中我不清楚`respond_to`在类方法上应该失败。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-27T16:30:29.013

现在建议我们使用expect，像这样：

```
describe Foo do
  it 'should respond to :bar' do
    expect(Foo).to respond_to(:bar)
  end
end 
```

见：[http ://rspec.info/blog/2012/06/rspecs-new-expectation-syntax/](http://rspec.info/blog/2012/06/rspecs-new-expectation-syntax/)

* * *

**旧答案：**

实际上，您可以通过提供主题来实现这种方法：

```
describe Foo do
  subject { Foo }
  it { should respond_to :bar } # :bar being a class method
end 
```

如此处所述：http: [//betterspecs.org/#subject](http://betterspecs.org/#subject)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-19T15:12:51.097

你的例子应该这样写：

```
it 'should respond to ::bar' do
  Foo.should respond_to(:bar)
end 
```

# iphone - 如何捕捉 iPhone 上的电源按钮和主页按钮？

> ID：10231053
> 
> 赞同：0
> 
> 时间：2012-04-19T15:06:00.530
> 
> 标签：iphone, ios5

今天我去面试，我现在遇到了三个问题。他们希望我提供一些解决方案或

思维。1.当用户按下Home键时，应用程序不返回主界面或延迟5秒返回主界面

主界面。2.黑屏时如何自动激活屏幕（如何捕捉电源按钮按下事件）。3.iPhone启动时如何直接启动我的应用程序

我的英文很差，希望大家能明白我上面说的。非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T15:07:59.853

除非越狱，否则这些在 iOS 设备上都是不可能的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-12T02:21:36.403

我知道这个问题很老了，但是这里的每个问题都有简单的解决方法，至少适用于 iOS 7+，尽管如果不使用私有 API 就无法解决问题 2。您可以使用公共 API 答案成功回答问题 1 和 3（尽管它们确实很老套）！！

**1.当用户按下home键时，如何延迟5秒才返回主屏幕？**

奥斯卡戈麦斯的回答很到位。虽然你不能在不阻塞核心运行循环的情况下延迟 UI 返回主屏幕（这会让你被应用商店拒绝），但如果需要，你可以使用一些后台进程技术来获得额外的 5 秒，而不是使用 UI .

**2.如何捕捉电源按钮按下？**

这肯定是使用私有 API，虽然您可能会进入 App Store，但一旦 Apple 得知您这样做，您可能不会持续很长时间*。*这也是一个黑客。您不能直接听电源按钮，但您可以听屏幕打开或关闭，或同时听两者。这是我在企业应用程序中的一个小代码片段：

**UIAppDelegate 内部**

```
static int const DisplayOnOffObserver = 54321876;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    ...
    CFNotificationCenterAddObserver(CFNotificationCenterGetDarwinNotifyCenter(), NULL, &PLDisplayOnOff, CFSTR("com.apple.springboard.hasBlankedScreen"), NULL, 0);
    ...
    return YES;
}

static void PLDisplayOnOff(CFNotificationCenterRef center, void* observer, CFStringRef name, const void* object, CFDictionaryRef userInfo) {
    ...
    DO SOME MAGIC
    ...
}

- (void)applicationWillTerminate:(UIApplication *)application {
    ...
    CFNotificationCenterRemoveEveryObserver(CFNotificationCenterGetDarwinNotifyCenter(), &DisplayOnOffObserver);
    ...
} 
```

显然，您必须让应用程序始终在后台运行（这可能会变得很棘手），或者您只需要在您要求在后台运行的时间内完成它（这并不难）

第一步是收听正在打开/关闭屏幕的 darwin 通知。第二步是实现回调。第三步是停止收听回叫。注意：DisplayOnOffObserver 是一个随机数（在我的情况下不是很随机）

**3\. iPhone启动时如何直接启动您的应用程序？**

假设通过直接启动，您的意思是在后台启动，实际上有一种 Apple 支持的方式来执行此操作。您**首先**必须为位置启用后台服务。其次，你必须开始监听[重大的位置变化](https://developer.apple.com/library/ios/documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html#//apple_ref/occ/instm/CLLocationManager/startMonitoringSignificantLocationChanges). 我不知道这记录得有多好，但是一旦 iPhone 启动，它就会尝试获取它的位置。当它这样做时，它会从没有位置变为有位置（这是一个重大变化）。您的应用程序将在后台启动，其中包括调用 application:didFinishLaunchingWithOptions: 方法，您可以在其中请求更多时间并启动其他进程以永久在后台运行，直到用户手动终止您的应用程序。如果您确实使用此方法在后台永久运行，您确实有可能被 Apple 拒绝。

希望这对某人有帮助！如果有人需要更多信息，请发表评论，我会更新我的答案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T16:04:54.043

Q1 和 Q2：不可能

Q3：您可以获得的最接近所需行为的是**信息亭（商店演示）**操作模式。

在这里查看更多：

[锁定 iPhone/iPod/iPad，使其只能运行一个应用程序](https://stackoverflow.com/questions/5011774/lock-down-iphone-ipod-ipad-so-it-can-only-run-one-app/8994690#8994690)

这并不完全是您正在寻找的 - 它限制设备只能使用某些应用程序 - 但据我所知，这是在不越狱设备的情况下自动启动应用程序的唯一方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T15:09:53.070

**当用户按下 Home 键时，应用程序不返回主界面或延迟 5 秒返回主界面**

*你不能，除非你不希望你的应用程序出现在应用程序商店中......你唯一可以做的就是在你的应用程序终止之前要求更多时间来保存你的数据，但 UI 体验仍然是一样的 - iphone将返回主界面。*

**当屏幕为黑色时，如何自动激活屏幕（如何捕捉电源按钮按下事件）。**

不可能。

**3\. iPhone启动时如何直接启动我的应用程序**

*我认为你甚至不能使用私有 API 来做到这一点，当然还有你的应用在应用商店中不被接受。*

# ruby-on-rails - Rails、Mongoid 和设计嵌套模型

> ID：10231054
> 
> 赞同：1
> 
> 时间：2012-04-19T15:06:01.040
> 
> 标签：ruby-on-rails, devise, mongoid

我试图在设计中嵌套一个类，它将用户的技能和所需的技能保存到一个数组中，但我似乎无法让我的表单对象保存到数组中。

```
 Class User
 include Mongoid::Document
 devise :database_authenticatable, :registerable,
     :recoverable, :rememberable, :trackable, :validatable

 ## Database authenticatable
 field :email,              :type => String, :null => false, :default => ""
 field :encrypted_password, :type => String, :null => false, :default => ""

 ## Recoverable
 field :reset_password_token,   :type => String
 field :reset_password_sent_at, :type => Time

 ## Rememberable
 field :remember_created_at, :type => Time

 ## Trackable
 field :sign_in_count,      :type => Integer, :default => 0
 field :current_sign_in_at, :type => Time
 field :last_sign_in_at,    :type => Time
 field :current_sign_in_ip, :type => String
 field :last_sign_in_ip,    :type => String

 field :first_name
 field :last_name

 field :location

 index([[:skills, :desired]], :background => true)

 validates_presence_of :first_name, :last_name,  :location
 validates_uniqueness_of :first_name, :last_name, :email, :case_sensitive => false
 attr_accessible :first_name, :last_name, :email, :password, :password_confirmation,     :remember_me,  :location

embeds_one :skills
end
 class Skills
 include Mongoid::Document

 field :skills, type => String
 field :desired, type => String

 embedded_in :user 
 end 
```

如何修复我的模型和视图，以便一个人可以在注册时添加多种技能和所需技能？（我是 Rails 初学者）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:36:55.160

`embeds_one``embeds_many`如果您想要一系列技能，应该是。

# sql - 忘记了我所做的 SQL 删除

> ID：10231059
> 
> 赞同：-2
> 
> 时间：2012-04-19T15:06:13.440
> 
> 标签：sql

我在这个需要做的声明中没有做什么

```
DELETE FROM ShoppingCart s inner join CRPOItemAdd c on s.ProductID = c.ProductID 
WHERE SessionID like 'kfhrm0tdp3peoalgugci1xnl%' and FieldID= 2549 
```

我通过以下选择发现了这一点：

```
select * from ShoppingCart s inner join CRCPOItemAdd c on s.ProductID = c.ProductID 
WHERE SessionID like 'kfhrm0tdp3peoalgugci1xnl%' and FieldID= 2549 
```

Select 有效，但我无法弄清楚我在 4 个月前所做的删除操作中没有做什么。感谢任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:13:26.517

删除查询中的表名不正确，应该是 CRCPOItemAdd

# unit-testing - Play Framework 2.0 中不执行测试

> ID：10231062
> 
> 赞同：3
> 
> 时间：2012-04-19T15:06:31.043
> 
> 标签：unit-testing, testing, playframework, playframework-2.0

在我的 Play 项目中，我有一些 junit 测试。本周早些时候，我已经能够使用在游戏控制台中运行测试

```
test 
```

命令。我可以看到成功和失败。

不幸的是，当我今天尝试运行测试时，我得到了：

```
[info] No tests to run for test:test
[success] Total time: 3 s, completed Apr 19, 2012 5:00:00 PM 
```

信息。

测试在我项目的测试文件夹中。可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T16:33:55.647

您的测试是否在测试文件夹的根目录中？据我所知，如果它们在 test/test/sometest.scala 中，它们将无法工作。

# logging - 自定义日志框架

> ID：10231066
> 
> 赞同：0
> 
> 时间：2012-04-19T15:06:38.137
> 
> 标签：logging, logback

我想添加一些功能，例如基于每个线程的日志记录，以便轻松查看日志文件并将日志插入数据库等。所以我想制作自己的自定义日志记录框架，除了满足上述要求之外logback 框架可以做到。是否可以复制 logback 源代码并添加我的一些文件以满足要求。

```
<configuration>

<appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
<!-- encoders are assigned the type
     ch.qos.logback.classic.encoder.PatternLayoutEncoder by default -->
<encoder>
  <pattern>%d{HH:mm:ss.SSS} [%thread] %-5level %logger{5} - %msg%n</pattern>
</encoder>
</appender> 
```

在上面的代码中我不想直接写日志..我想缓存日志然后我应该附加它..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T05:28:26.853

我认为您的方法是错误的：slf4j 和 logback 的组合几乎可以完成所有工作，无需重新发明轮子。只需询问您想要拥有的功能，您就会看到答案。

对于您需要为每个线程使用不同的日志文件的要求：我认为这没有用，但无论如何：在 logback 中查找鉴别器。例如，这里的这个问题在用户群上实现了不同的日志：[howto use the logback discriminator value to filter mongodb inserts](https://stackoverflow.com/questions/9404106/howto-use-the-logback-discriminator-value-to-filter-mongodb-inserts)

# html - 如何在 Internet Explorer 中删除 UL/LI 元素的右边框？

> ID：10231069
> 
> 赞同：1
> 
> 时间：2012-04-19T15:06:51.367
> 
> 标签：html, css, internet-explorer, border, html-lists

我对所有版本的 Internet Explorer 都有问题。我有一个`ul`带有`li`右边框的元素。[您可以在此页面](http://demo.jimbarraud.com/manifest/)底部（“其他地方”）看到它的外观。

问题不是针对此页面，而是针对所有类似的 HTML 设置。

[这是它在其他浏览器中的样子](http://gyazo.com/b15fb110a92821b72b6723342a0de620)

[这是它在 IE 中的样子](http://gyazo.com/53782c655282c235b828c838bfacd600)

如何告诉 IE 删除右边框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:13:54.160

您正在使用 :last-child 选择器在最后一个列表项上设置无边框。不幸的是，除了 9（和 10 RC）之外的所有 IE 版本都不支持这种风格。

[http://www.quirksmode.org/css/contents.html#t35](http://www.quirksmode.org/css/contents.html#t35)

为什么不只使用第一个子选择器（禁用左边框）并在所有其他列表项上设置左边框？在我看来，这似乎是一条更安全的路线。

# r - R textConnection 速度慢

> ID：10231070
> 
> 赞同：5
> 
> 时间：2012-04-19T15:06:52.280
> 
> 标签：r, hadoop

我有多个文件要加载，并希望将它们连接到 1 个数据框中。我正在尝试使用 textConnection，但它运行非常缓慢。这是我将数据加载到 R 中时的样子：

```
"1995200008,10,1995,5190.61,73300"   
"1995200010,1,1995,6776.44,42652"   
"1995200011,11,1995,2315.83,4169"    
"1995200014,6,1995,9846.79,2113"    
"1995200017,8,1995,3978.93,2449"     
"1995200018,6,1995,3582.69,2449"    
"1995200022,7,1995,10409.18,2859" 
```

我不能使用 read.csv 因为它使用库从 Hadoop 中提取数据。双引号在数据中。

这是我正在使用的代码：

```
tmp <- hdfs.read.text.file(filename)
tmp1 <- read.table(textConnection(tmp), sep = ",") 
```

有谁知道一种运行速度更快的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-08-08T12:44:48.807

`hdfs.read.text.file`返回一个字符向量。

您可以直接将数组传递给 read.table 函数，而无需创建`textConnection`. 试试下面的代码，

```
charV <- hdfs.read.text.file(filename)
df <- read.table(text = charV, sep = ",", header = TRUE) 
```

# wcf - IIS (6) 中的 WCF + SSL/HTTPS。如何在 web.config 中禁用 HTTP 访问？

> ID：10231072
> 
> 赞同：1
> 
> 时间：2012-04-19T15:06:57.260
> 
> 标签：wcf, http, iis, https, web-config

我有一个托管在 IIS6 中的 WCF 应用程序（在开发环境中是 7 个），带有一个 wsHttp (SOAP) 和两个 webHttp (REST) 绑定。

我想在发布到生产站点时保护服务并禁用元数据和 webHttp 帮助页面并为绑定启用 SSL。同时我想禁用HTTP。我知道 IIS 中“需要安全通道”的选项，但我想知道是否可以在 web.config 中实现相同的功能？

我的印象是

`<security mode="Transport">`

会“禁用”http访问（即需要https），但在我的情况下它没有。

她是 web.config 的 ServiceModel 部分：

```
<system.serviceModel>
<bindings>
  <wsHttpBinding>
    <binding name="SoapTransportSecurityBinding">
      <security mode="Transport">
        <transport clientCredentialType="None"/>
        <message establishSecurityContext="false"/>
      </security>
    </binding>
  </wsHttpBinding>
  <webHttpBinding>
    <binding name="RestTransportSecurityBinding">
      <security mode="Transport">
        <transport clientCredentialType="None"/>
      </security>
    </binding>
  </webHttpBinding>
</bindings>
<services>
  <service name="CustomerWcfService" behaviorConfiguration="Web.ServiceBehavior">
    <endpoint address="" binding="wsHttpBinding" bindingConfiguration="SoapTransportSecurityBinding" contract="ICustomerWcfService">
      <identity>
        <dns value="ws.somecompany.com"/>
      </identity>
    </endpoint>
  </service>
  <service name="SentShipmentsWcfRestService" behaviorConfiguration="webHttpServiceBehavior">
    <endpoint address="" binding="webHttpBinding" bindingConfiguration="RestTransportSecurityBinding" contract="ISentShipmentsWcfRestService"
      behaviorConfiguration="RestEndpointBehavior"/>
  </service>
  <service name="InsuranceInfoWcfRestService" behaviorConfiguration="webHttpServiceBehavior">
    <endpoint address="" binding="webHttpBinding" bindingConfiguration="RestTransportSecurityBinding" contract="IInsuranceInfoWcfRestService"
      behaviorConfiguration="RestEndpointBehavior"/>
  </service>
</services>
<behaviors>
  <serviceBehaviors>
    <behavior name="Web.ServiceBehavior">
      <serviceDebug includeExceptionDetailInFaults="false"/>
    </behavior>
    <behavior name="webHttpServiceBehavior">
      <serviceDebug includeExceptionDetailInFaults="false"/>
    </behavior>
  </serviceBehaviors>
  <endpointBehaviors>
    <behavior name="RestEndpointBehavior">
      <webHttp helpEnabled="false"/>
    </behavior>
  </endpointBehaviors>
</behaviors> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T16:04:41.330

看起来它无法在 web.config 中实现。但是在绑定设置中你可以设置

```
 <security mode="Transport"> 
```

在这种情况下，如果不需要 SSL，端点将无效。

# javascript - 是否有一个很好的图表 API 可以在滚动/缩放时使用 Ajax 延迟加载大型数据集？

> ID：10231074
> 
> 赞同：0
> 
> 时间：2012-04-19T15:06:59.037
> 
> 标签：javascript, jquery, html, css

我正在寻找一个 JavaScript 图表 API，它允许在水平和垂直轴上查询服务器以获取新的数据点。在你问之前，这个数据集非常庞大：大约有 3 亿个点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:16:27.273

您可能想查看此演示文稿： [http ://www.ted.com/talks/view/lang/en//id/129](http://www.ted.com/talks/view/lang/en//id/129)

Seadragon 专门处理与您所询问的类似的像素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T15:31:27.463

[HighCharts](http://www.highcharts.com/)是一个非常漂亮的图表库。它确实支持缩放和 AJAX 查找。我有一种感觉，你需要做一些跑腿工作来挂钩缩放事件来进行数据更新，但不能肯定地说，因为我没有大量使用 HighCharts。

# ios - 企业OTA应用更新

> ID：10231075
> 
> 赞同：0
> 
> 时间：2012-04-19T15:07:09.560
> 
> 标签：ios, ota

我遇到了 OTA 应用更新的问题。当我在不删除当前安装的应用程序的情况下下载更新时，iOS 会安装相同版本的应用程序。如果我想获得新版本，我需要删除已安装的应用程序并从我的网站重新下载。Manifest、bundle-version 和 ipa 文件按应有的方式更新。我的问题是为什么 SpringBoard 要用相同的版本替换我的应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T07:58:52.523

因为他们使用相同的bundleID ...我在安装我的OTA应用程序的新版本时遇到了同样的问题

# hibernate - 关于 JPA persistence.xml

> ID：10231085
> 
> 赞同：0
> 
> 时间：2012-04-19T15:07:33.223
> 
> 标签：hibernate, tomcat, jpa

我在tomcat上使用休眠JPA。我在 tomcat 上创建了一个连接池，它可以独立工作。现在让我的 JPA 使用这个连接池；我创建了 persistence.xml 如下：

```
<?xml version="1.0"?>
<persistence>
    <persistence-unit name="kids" transaction-type="JTA">
        <jta-data-source>jdbc/kids</jta-data-source>
    </persistence-unit>
</persistence> 
```

它给了我以下例外：

javax.persistence.PersistenceException：持久性.xml 无效。解析 XML 时出错（第 1 行：第 -1 列）：cvc-elt.1：找不到元素“持久性”的声明。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:15:18.853

也许您应该为持久化节点设置命名空间属性和模式位置：

```
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd"
         version="1.0">
    <persistence-unit name="kids" transaction-type="JTA">
        <jta-data-source>jdbc/kids</jta-data-source>
    </persistence-unit>
</persistence> 
```

# c# - 关闭 ListView 边框鼠标悬停动画

> ID：10231088
> 
> 赞同：1
> 
> 时间：2012-04-19T15:07:37.817
> 
> 标签：c#, wpf, listview, styles, controltemplate

`ListView`当您将鼠标悬停在控件上时， 的默认样式会将边框颜色设置为浅蓝色。有没有办法在不替换整个控件模板的情况下关闭它？

我试过了

```
<ListView>
    <ListView.Style>
        <Style TargetType="ListView">
            <Setter Property="BorderBrush" Value="Green"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">       
                    <Setter Property="BorderBrush" Value="Red" />
                </Trigger>
            </Style.Triggers>
        </Style>
    </ListView.Style>
</ListView> 
```

这会导致绿色边框，当您将鼠标悬停在淡蓝色之前，它会短暂变为红色。默认动画优先。

我是否遗漏了一些简单的东西，或者是时候重写模板了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:31:47.237

您必须覆盖`ControlTemplate`，因为默认使用的`ListBoxChrome`元素会创建您看到的效果。`ListBoxChrome`鼠标悬停时忽略 BorderBrush 属性，由其`RenderMouseOver`属性决定。

如果你愿意，你仍然可以使用`ListBoxChrome`，你只需要删除该`RenderMouseOver`属性。假设您使用的是`GridView`您将使用的：

```
xmlns:theme="clr-namespace:Microsoft.Windows.Themes;assembly=PresentationFramework.Aero"

...

<Style x:Key="{x:Static GridView.GridViewStyleKey}"
       TargetType="{x:Type ListView}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type ListView}">
                <theme:ListBoxChrome Name="Bd"
                                     BorderThickness="{TemplateBinding BorderThickness}"
                                     BorderBrush="{TemplateBinding BorderBrush}"
                                     Background="{TemplateBinding Background}"
                                     RenderFocused="{TemplateBinding IsKeyboardFocusWithin}"
                                     SnapsToDevicePixels="true">
                    <ScrollViewer Style="{DynamicResource {x:Static GridView.GridViewScrollViewerStyleKey}}"
                                  Padding="{TemplateBinding Padding}">
                        <ItemsPresenter SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                    </ScrollViewer>
                </theme:ListBoxChrome>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsGrouping"
                             Value="true">
                        <Setter Property="ScrollViewer.CanContentScroll"
                                Value="false"/>
                    </Trigger>
                    <Trigger Property="IsEnabled"
                             Value="false">
                        <Setter TargetName="Bd"
                                Property="Background"
                                Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

如果您想删除聚焦的外观，那么最好将 替换为`ListBoxChrome`一个`Border`元素。

# java - Mopub 横幅广告 - 更好地控制加载/卸载

> ID：10231090
> 
> 赞同：0
> 
> 时间：2012-04-19T15:07:50.800
> 
> 标签：java, android, eclipse, mopub

我想对 MoPub 横幅广告进行精细控制，该横幅广告在特定时间而不是其他时间出现在我的游戏应用程序屏幕顶部。我的代码目前看起来像这样（简化）：

```
LinearLayout linearlayout_for_banner = new LinearLayout (this);
mAdView = new MoPubView(this);
linearlayout_for_banner.addView(mAdView); 
```

linearlayout_for_banner 是透明的，所以当没有广告时，用户可以看到下面的所有游戏画面。然后在某个确切的时间点，我希望出现一个广告。目前，我知道调用的唯一功能是`mAdView.loadAd()`，据我所知，它开始了一个去互联网寻找广告的过程，然后如果它找到一个，它将被绘制在屏幕上。这是非常不令人满意的，因为在它出现之前经常会有延迟。所以我想要的是`scoop_an_advert_but_dont_show_it_yet()`和`now_show_that_ad_you_scooped_earlier()`. 它们存在吗？Mopub 的文档在这方面似乎相当不足。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T03:32:01.437

预加载广告并在特定时间之前不显示它们没有问题。你可以用`loadAd()`这个。只需在您希望它出现时交换视图的可见性。

**注意：**如果这样做，您应该将该特定广告设置为*不在*mopub 网站上“每 x 秒刷新一次”。否则，它最终会成为无意的广告欺诈，因为广告会在不可见的情况下自行刷新（更不用说降低您的点击率了）。

如果您在应用程序中运行其他广告而没有此要求，我建议您为有时不可见的广告单元设置一个单独的广告单元，这样您仍然可以对另一个广告单元进行刷新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T01:56:33.967

尝试浏览他们的 github wiki：[https ://github.com/mopub/mopub-client/wiki/CustomEventsAndroid](https://github.com/mopub/mopub-client/wiki/CustomEventsAndroid)

你想要他们的“onReceiveAd”方法。检查一下，似乎正是您需要的。

# c# - 从其他功能更改 Backgroundworker 进度

> ID：10231092
> 
> 赞同：1
> 
> 时间：2012-04-19T15:07:56.657
> 
> 标签：c#

我需要在 DoWork 事件之外更改我的后台工作人员进度，这可能吗？

我的代码

```
private void progress_changed(string fileName, DownloadProgressChangedEventArgs e)
{
    progress = e.ProgressPercentage;
    Filename = fileName;
    // change the progress here
}

private void worker_DoWork(string fileName)
{
    WebClient client = new WebClient();
    client.DownloadProgressChanged += (obj, e) => progress_changed(fileName, e);
    client.DownloadFileCompleted += new AsyncCompletedEventHandler(progress_complete);
    client.DownloadFileAsync(new Uri(Link), Savepath);
}

private void worker_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
    mainForm.dlist.Items[mainForm.dlist.Items.IndexOfKey(Filename)].SubItems[2].Text = progress.ToString() + "%";
    mainForm.dlist.Items[mainForm.dlist.Items.IndexOfKey(Filename)].SubItems[3].Text = "Downloading";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:14:37.843

将 BackgroundWorker 传递给另一个函数。从那里，您可以调用`ReportProgress`. 或者，根据您的结构，您可以将 BackgroundWorker 设为类字段并以这种方式访问​​它。

# wpf - 为什么没有应用我的文本块样式？

> ID：10231095
> 
> 赞同：0
> 
> 时间：2012-04-19T15:08:09.630
> 
> 标签：wpf, listview, styles, textblock

我在我的 Windows 资源区创建了一个样式：

```
<Style TargetType="TextBlock">
    <Setter Property="TextTrimming" Value="CharacterEllipsis"/>
</Style> 
```

我认为这意味着所有文本块都将具有这种样式，因此当我创建列表视图列时：

```
<GridViewColumn>
    <GridViewColumnHeader Content="Source"/>
    <GridViewColumn.CellTemplate>
         <DataTemplate>
             <TextBlock Text="{Binding Source, Mode=OneWay}" />
         </DataTemplate>
    </GridViewColumn.CellTemplate>
</GridViewColumn> 
```

省略号样式不适用于列中的文本块。

如果我用 x:Key 命名样式，然后使用 Style={StaticResource xxx} 那么它可以工作 - 为什么未命名的方法不起作用？

这是完整的窗口 XAML：

```
<Window x:Class="ListViewStyle.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<Window.Resources>
    <Style TargetType="TextBlock">
        <Setter Property="TextTrimming" Value="CharacterEllipsis"/>
    </Style>
</Window.Resources>
<ListView ItemsSource="{Binding Rows}">
    <ListView.View>
        <GridView>
            <GridViewColumn>
                <GridViewColumnHeader Content="Source"/>
                <GridViewColumn.CellTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding Source, Mode=OneWay}" />
                    </DataTemplate>
                </GridViewColumn.CellTemplate>
            </GridViewColumn>
            <GridViewColumn>
                <GridViewColumnHeader Content="Primary"/>
                <GridViewColumn.CellTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding Primary, Mode=OneWay}" />
                    </DataTemplate>
                </GridViewColumn.CellTemplate>
            </GridViewColumn>
            <GridViewColumn>
                <GridViewColumnHeader Content="Secondary"/>
                <GridViewColumn.CellTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding Secondary, Mode=OneWay}" />
                    </DataTemplate>
                </GridViewColumn.CellTemplate>
            </GridViewColumn>
        </GridView>
    </ListView.View>
</ListView>
</Window> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:18:40.283

You may be defining another `TextBlock` style, closer to the `TextBlock` itself.

The way WPF searches for a style starts with the item to be styled. If it sets the `Style` property, then it uses that. Otherwise, it checks the parent's resources, then its grandparent's resources, and so on, using the first style it finds. If it doesn't find a style in your application it uses the default style.

There is probably a `TextBlock` style in one of the `TextBlock`'s ancestors. If it finds a style there, it won't use the one at the window level.

You can specify that one style is based on another, with the [`BasedOn`](http://msdn.microsoft.com/en-us/library/system.windows.style.basedon.aspx) property.

# php - 使用 PHP date() 格式化 SQL Server 时间(7)

> ID：10231096
> 
> 赞同：1
> 
> 时间：2012-04-19T15:08:12.997
> 
> 标签：php, sql, sql-server, date, time

在我的 SQL Server 数据库中，我有一个存储为 time(7) 的时间字段。我一直在尝试使用 echo 在 PHP 中打印它，但我不会工作，所以我使用了这段代码

```
"ReturnDatesAsStrings" =>1 
```

它回来了

```
08:35:00.0000000 
```

在过去的一个小时里，我一直在尝试使用 date() 函数将其格式化为上午 08:35，但没有运气。有什么线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:35:25.113

如果你禁用`ReturnDatesAsStrings`你得到的是一个`DateTime`对象。显然，一个对象不能用普通的回显来打印，但是你有一个正确的日期，你所要做的就是调用它的[format()](http://es.php.net/manual/en/datetime.format.php)方法。当 PHP 可以为您做到时，使用字符串作为中间格式是一个更大的麻烦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T15:10:52.880

```
echo date('H:ia', strtotime('08:35:00.0000000')); // 08:35am 
```

或者，更好的是，使用[DateTime](http://www.php.net/manual/en/class.datetime.php)类：

```
$date = new DateTime('08:35:00.0000000');
echo $date->format('H:ia'); // 08:35am 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T15:12:18.890

试试这个：

```
date_format( strtotime($datetime_field_in_db), 'g:i A') ); 
```

# java - UPnP Java 库的问题

> ID：10231097
> 
> 赞同：1
> 
> 时间：2012-04-19T15:08:17.420
> 
> 标签：java, upnp

我开始疯狂阅读论坛并尝试不同的 Java UPnP 库，但在我的网络中找不到 IGD。

首先，我必须指出，UPnP 在我用 C++（使用 miniupnp）制作的程序中运行良好，因此我的路由器已正确配置为与 UPnP 一起使用。

```
Sending M-SEARCH * HTTP/1.1
HOST: 239.255.255.250:1900
ST: urn:schemas-upnp-org:device:InternetGatewayDevice:1
MAN: "ssdp:discover"
MX: 2

M-SEARCH Reply:
ST: urn:schemas-upnp-org:device:InternetGatewayDevice:1
Location: http://192.168.25.50:1780/InternetGatewayDevice.xml
... 
```

我尝试使用 weupnp（一种用于 java 的 miniupnp）、使用 sbbi upnp lib 和 Cling upnp 开发应用程序，但奇怪的是所有三个 API 都无法从我的路由器中找到响应。

有人知道 Java upnp API 是否有一些我缺少的依赖项或要求吗？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T11:39:41.877

请注意，EPC2425 也可能是一个问题，它知道吃 SSDP 数据包：[https ://sonos.custhelp.com/app/answers/detail/a_id/42/~/network-hardware-compatibility](https://sonos.custhelp.com/app/answers/detail/a_id/42/~/network-hardware-compatibility)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T22:46:21.323

Weupnp 0.1.2 can now focus on specific ST and filter replies according to that.

As jishi says, lots of potential problems came from `upnp:rootdevice` messages.

If you still have need for this, may I suggest you to try the [latest version of weupnp](http://bitletorg.github.io/weupnp/)?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T13:04:28.087

是来自您的 Java 应用程序还是 C++ 应用程序的请求跟踪？我知道一些框架使用 ST: upnp:rootdevice 扫描设备，这使得一些路由器只宣布自己，而不是任何其他设备。如果您在路由器中关闭 upnp，它就会开始转发它们。

但基本上这是一个损坏的框架，您应该能够定义您正在扫描的 ST。

如果您也可以为您的 Java 应用程序提供网络转储，那将很有用。

# iphone - 如何获取将对象添加到 NSMutableArray 的索引？

> ID：10231098
> 
> 赞同：0
> 
> 时间：2012-04-19T15:08:24.063
> 
> 标签：iphone, cocoa-touch, ios4

我正在向 NSMutableArray 添加一个对象，如下所示：

```
[array addObject:myObject]; 
```

我现在想向添加此对象的数组索引的代表发送一个引用。有没有一种简单的方法可以找出我的对象在数组中添加的索引，以便稍后我可以调用

```
[array objectAtIndex:index] 
```

获得参考？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:18:50.523

与其将对象的索引（可能不正确）传递给您的委托，不如传递对对象本身的引用。如果委托需要数组中对象的索引，它可以使用`-indexOfObject:`Antonio MG 描述的方法自行计算。可变数组中任何给定对象的索引可以随着对象的添加、插入和删除而改变。指望指数在任何时期都保持有效就像在柜台上放一个果冻三明治——它肯定会吸引虫子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T15:11:06.730

您需要序列化对可变数组的访问，并`-addObject:`始终将对象添加到数组的末尾。鉴于这两个断言，您知道下一个添加对象的索引将始终是数组的当前长度。所以以下将成立：

```
NSUInteger nextIndex = [array count];
[array addObject:myObject];
// you can now tell your delegates that nextIndex is the index of myObject 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T15:10:22.503

为此使用此方法：

```
index = [animalOptions indexOfObject:myObject]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T15:10:24.077

最新添加的对象应位于`[array count] - 1`索引处。您始终可以依靠“count - 1”方案来确定最后一个索引。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T15:11:14.463

如果你调用 addObject 你总是在最后添加对象（所以 count - 1）。您可以使用“insertObject:atIndex:”来指定索引。对于您的问题：indexOfObject：

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-04-19T15:11:00.263

添加对象的索引后直接是`array.count -1`.

# jquery - JQGrid editoptions dataurl不使用ajax get？

> ID：10231099
> 
> 赞同：0
> 
> 时间：2012-04-19T15:08:36.170
> 
> 标签：jquery, ajax, jqgrid

我有一个使用`editoptions:{dataUrl:'getMetadata?type=' + myType+ '&column=colOne'}`. 我还为`ajaxComplete`事件绑定了一个函数，以便在发出请求后进行自定义标头检查。除了 dataUrl 请求之外，这对我在 JQGrids 请求中看到的所有内容都有效。执行 get 请求后，Ajax Complete 不会触发。 `ajaxStart`并且`ajaxStop`确实被适当地解雇了。完成/错误/成功不是。

根据 dataUrl 的 jqgrid 文档，它应该使用 ajax 调用来获取数据。

'数据是通过 AJAX 调用获得的，应该是具有所需选项的有效 HTML 选择元素......'

还有什么我在这里想念的吗？绑定代码如下。

```
$('body').bind('ajaxComplete',function(event,request,settings){
    if (request.getResponseHeader('REQUIRES_AUTH') === '1'){
       location.reload();
    };
});
//Other binds added to see what is getting fired
$('body').bind('ajaxError',function(event,request,settings){
    if (request.getResponseHeader('REQUIRES_AUTH') === '1'){
       location.reload();
    };
});
$('body').bind('ajaxSuccess',function(event,request,settings){
    if (request.getResponseHeader('REQUIRES_AUTH') === '1'){
       location.reload();
    };
});
$('body').bind('ajaxStart',function(){
    var b = "ABC";
    var c = "DEF";
});
$('body').bind('ajaxStop',function(event,request,settings){
    var b = "ABC";
    var c = "DEF";
}); 
```

编辑：忘记添加请求以 200 状态返回。

-----------------------------Ajax 选择选项问题在这里---- --------

将以下代码放在任何地方（当前在 document.ready 中）会导致所有选择框不显示在搜索中。

```
$.extend($.jgrid.defaults, {
            ajaxSelectOptions: {    
                complete: function (jqXHR) {
                    if (jqXHR.getResponseHeader('REQUIRES_AUTH') === '1') 
                    {
                        location.reload();
                    } 
                    return;
                }
        }}); 
```

ColModel 和名称

```
 gridForm.colNames = ['ID','Field1','Field2','Field3','Field4','Field5','Last User Id','Modified Date' ];
gridForm.colModel = [
                      {name:'id', editable: false, edittype:'text',search:true, stype:'text'},        
                      {name:'Field1', editable: checkedOutByUser, edittype:'text', search:true,editrules:{required:true}, stype:'text'},
                      {name:'Field2', editable: checkedOutByUser, edittype:'select', editoptions:{dataUrl:dataUrl + "&search=false"}, search:true,editrules:{required:true}, searchoptions:{dataUrl:dataUrl + "&search=true"}, stype:'select'},
                      {name:'Field3',  editable: checkedOutByUser, edittype:'select', editoptions:{dataUrl:dataUrl + "&search=false"}, editrules:{required:true},search:true, searchoptions:{dataUrl:dataUrl + "&search=true"}, stype:'select'},
                      {name:'Field4',  editable: checkedOutByUser, edittype:'select', editoptions:{dataUrl:dataUrl + "&search=false"}, editrules:{required:true}, search:true, searchoptions:{dataUrl:dataUrl + "&search=true"}, stype:'select'},
                      {name:'Field5', editable: false, edittype:'text', search:true, stype:'text'},
                      {name:'userId', editable: false, edittype:'text', search:true, stype:'text'},
                      {name:'modifiedDate', editable: false, search:true, stype:'text', searchoptions:{dataInit:function(el){defaultCalendar.create(el, "componentGrid");}}}                             
                      ]; 
```

网格定义，使用一些基于三元的，所以我们可以重用 jqgrid 调用类似的网格

```
 $("#myGrid").jqGrid(
        {
            caption:gridForm.caption,
            overflow:'hidden',
            url:gridForm.url?gridForm.url:url,
            height: gridForm.height?gridForm.height:'auto',
            datatype: "json",
            colNames:gridForm.colNames,
            colModel:gridForm.colModel,
            recordtext: 'Record(s) {0} - {1} of {2}', 
            rowNum: 20, 
            sortname: gridForm.sortindex?gridForm.sortindex:"id",
            sortorder: gridForm.sortorder?gridForm.sortorder:"desc",
            cellEdit: false,
            cellurl : 'updateRow', 
            editurl:'addRow',
            cellsubmit : 'remote',
            toolbarfilter: true,
            onCellSelect:gridForm.onCellSelect?gridForm.onCellSelect:null,
            pager: jQuery('#pager'),
            viewrecords: gridForm.viewrecords?gridForm.viewrecords:true,
            gridview: gridForm.gridview?gridForm.gridview:true,
            shrinkToFit: true,
            multiselect: gridForm.multiselect?gridForm.multiselect:true});
jQuery("#myGrid").jqGrid('filterToolbar'); 
```

最后，从数据 URL 返回的 HTML

```
<select><option value=''</option><option value='Dummy Entry'>Dummy Entry</option><option value='Next Entry'>Next Entry</option><option value='ThirdEntry'>ThirdEntry</option><option value='FourthEntry'>FourthEntry</option></select> 
```

对文字墙感到抱歉，但我尝试添加所有可能看起来有用的内容。请注意，在启用 ajaxSelectOptions 默认值之前，这在我们拥有的众多 (10+) jqgrids 中工作得非常好（搜索填充中的选择框）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:37:53.747

我建议您使用[jqGrid](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aoptions)的 ajaxSelectOptions 选项来自定义 Ajax 请求，该请求使用 jqGrid 从`dataUrl`. 我希望参数`ajaxSelectOptions`在您的情况下看起来像

```
ajaxSelectOptions: {
    complete: function (jqXHR) {
        if (jqXHR.getResponseHeader('REQUIRES_AUTH') === '1') {
            location.reload();
        }
    }
} 
```

# jquery - 获取可见的 li:last 而不是隐藏的 li:last

> ID：10231100
> 
> 赞同：1
> 
> 时间：2012-04-19T15:08:40.680
> 
> 标签：jquery, jquery-selectors

我想用 li:last 做点什么：

```
var p = $("li:last"); 
```

我需要它的位置：`position.left`

有了这个位置，我可以对齐一些元素。问题是，在某些情况下，最后一个 li 被 event.hide“隐藏”，所以这意味着我得到`position.left 0`这意味着元素没有对齐，因为值为 0。

我如何获得 li:last of all the visible li？（所以隐藏的 li 不应该一起玩）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T15:11:16.200

尝试`$("li:visible:last")`-> 使用过的`:visible`选择器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T15:11:43.443

这是您的解决方案：

[http://api.jquery.com/visible-selector/](http://api.jquery.com/visible-selector/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T15:11:59.990

您需要组合[`:visible`](http://api.jquery.com/visible-selector/)和[`:last`](http://api.jquery.com/last-selector/)选择器

```
var p = $("li:visible:last"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T15:12:55.153

```
var pos = $("li:last:visible").position();
console.log(pos.left); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-19T15:14:37.280

这应该有效

```
var p=$('li:visible').last();
//some stuff 
```

[http://api.jquery.com/visible-selector/](http://api.jquery.com/visible-selector/)

# eclipse - Eclipse RCP 翻译工具

> ID：10231102
> 
> 赞同：2
> 
> 时间：2012-04-19T15:08:47.340
> 
> 标签：eclipse, internationalization, osgi, translation, rcp

我正在开发一个 Eclipse RCP 应用程序，它包含 600~ 个字符串，由我自己翻译成几种语言。

关键是我必须将它交付给翻译团队，以便在几个月内将其翻译成多种语言，而我还没有找到任何 eclipse 的翻译工具，这将有助于翻译团队的工作。是否有任何应用程序可以分析加载 messages.properties 和 bundles.properties 文件的文件结构，并提供一个 UI 来安全地翻译它。

如果不是，那将是执行此任务的最佳方式？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:50:18.233

Globalyzer (http://lingoport.com/globalyzer) 可以作为 Eclipse 插件（或作为独立工作台）运行，并支持跨开发团队和各种编程语言的广泛国际化活动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T11:53:57.207

假设您在 Eclipse 中使用过 NLS 工具，您应该已经拥有包含已翻译字符串的属性文件。

[Eclipse 项目通过Babel 服务器](http://babel.eclipse.org/babel/)的一个实例进行翻译。

这本身就是一个 Eclipse 托管[项目](http://www.eclipse.org/babel/)。

Babel 服务器环境是一个典型的 LAMP 环境。[您可以尝试按照说明](http://wiki.eclipse.org/Babel_/_Server_Tool_Development_Process)为您的翻译人员设置它。

如果这对于 600 个字符串来说似乎是很多工作，那是因为它是。

[使用Amanuens](http://amanuens.com)或[Transifex](https://www.transifex.net)等托管服务与您的翻译人员合作会更容易。

# php - 向现有 PHP/MySQL 应用程序添加票务系统？

> ID：10231104
> 
> 赞同：2
> 
> 时间：2012-04-19T15:08:50.207
> 
> 标签：php, mysql, ticket-system

我正在进行的项目需要一个票务模块，能够创建、评论、关注等由用户和管理员创建的票证。

我不想重新发明轮子，而是希望能够集成现有的解决方案。

理想情况下，票务系统应该使用现有的用户数据库，但我可以复制这些数据。

我找到了[osTicket](http://osticket.com/)，有没有人尝试将它集成为现有项目的模块？还有另一种更适合的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:11:31.213

过去一年，我和我的团队一直在使用[ActiveCollab](http://www.activecollab.com/)，我必须说它是一款很棒的软件。

任何对 PHP/MySQL 有相当了解的人都应该能够修改它以使用相同的用户表。

# html - 如果发生异常，如何重定向到 HTML

> ID：10231105
> 
> 赞同：0
> 
> 时间：2012-04-19T15:08:54.200
> 
> 标签：html, database, exception, servlets

如果发生 SQLException，我一直在尝试寻找一种重定向到 HTML 文件的方法。我给你举个例子。

我的连接类是这样的：

```
public class DBConection{
    Connection con = null;
    public DBConnection() throws RuntimeException{      
        try {
            Class.forName("org.gjt.mm.mysql.Driver");
            String user = "root";
            String pass = "12345";
            String db = "java";
            con = DriverManager.getConnection("jdbc:mysql://localhost/" + db, user, pass);
        }catch (ClassNotFoundException ex) {
            throw new RuntimeException();
        }catch (SQLException ex) {
            throw new RuntimeException();
        }
    }
} 
```

我从 Servlet 类中调用它，

```
public class ElectionsServlet extends HttpServlet {
    private static final long serialVersionUID = 1L;
    private static final String RETURN_PAGE = "index.jsp";

    public void doPost(HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException {
        DBConnection con = new DBConnection();
        response.sendRedirect(RETURN_PAGE);
    }
} 
```

如果在 DBConnection 期间发生错误，我想将其重定向到我的 RETURN_PAGE。有谁能够帮助我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:51:24.867

只需使用内置的容器管理的异常处理工具。您需要将捕获的异常重新抛出为`ServletException`并将错误页面定义`<error-page>`为`web.xml`.

您只需要相应地更改您的数据库访问逻辑。它远非理智、安全和高效。异常处理也很奇怪。鉴于您使用的是已弃用的 MySQL JDBC 驱动程序类名称，您似乎已经从完全过时的资源中删除了它。

这是一个基本的启动示例：

```
public final class Database {

    private static final String DRIVER = "com.mysql.jdbc.Driver";
    private static final String URL = "jdbc:mysql://localhost/java";
    private static final String USER = "root";
    private static final String PASS = "12345";

    static {      
        try {
            Class.forName(DRIVER);
        }
        catch (ClassNotFoundException e) {
            throw new ExceptionInInitializerError("The JDBC driver is missing in classpath!", e);
        }
    }

    private Database() {
        // Don't allow construction.
    }

    public static Connection getConnection() throws SQLException {
        return DriverManager.getConnection(URL, USER, PASS);
    }

} 
```

最后在servlet中使用和处理如下：

```
public void doPost(HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException {
    Connection connection = null;
    // ...

    try{
        connection = Database.getConnection();
        // ...
    } 
    catch (SQLException e) {
        throw new ServletException("DB fail!", e);
    }
    finally {
        // ...
        if (connection != null) try { connection.close(); } catch (SQLException ignore) {}
    }
} 
```

*（最好将 DB 作业包装在一个 DAO 类中，该类又抛出 a `SQLException`，但这是一个不同的问题）*

并声明错误页面`web.xml`如下：

```
<error-page>
    <exception-type>java.sql.SQLException</exception-type>
    <location>/WEB-INF/errorpages/database.jsp</location>
</error-page> 
```

您当然也可以使用`<location>/index.jsp</location>`，但这对最终用户不是很友好，因为这完全令人困惑他为什么回到那里。而是将其作为`database.jsp`错误页面中的链接以及用户友好的内容

> *抱歉，与 DB 通信时出现不可恢复的问题。请点击以下链接返回索引页面。*

### 也可以看看：

*   [使用 MVC 和 DAO 模式在 JSP 页面的 HTML 中显示 JDBC ResultSet](https://stackoverflow.com/questions/5003142/jsp-using-mvc-and-jdbc/5003701#5003701)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T15:52:15.907

这个问题已经回答了，但我会添加一些评论：

*   我不认为有必要捕捉`SQLException`，而`ClassNotFoundException`只是重述`RuntimeException`实例。如果您打算在您的`DBConnection`类中引发此异常时什么都不做，只需添加`throws`到您的构造函数签名中。这样，编译器将检查在使用构造函数时是否添加了 try-catch 块。
*   无需添加`throws RuntimeException`到您的构造函数签名。`RuntimeException`是一个未经检查的异常。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-19T15:31:13.000

将 try-catch 块添加到您的`doPost`方法中，如果 try 块中发生任何异常，则捕获该异常并重定向到`RETURN_PAGE`.

```
public void doPost(HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException {
        try{
        DBConnection con = new DBConnection();
        }catch(Exception e){
        response.sendRedirect(RETURN_PAGE);
       }
    } 
```

# vb.net - 排序列表框项

> ID：10231109
> 
> 赞同：1
> 
> 时间：2012-04-19T15:09:13.527
> 
> 标签：vb.net, winforms, visual-studio-2010, listbox

所以我有两个列表框。Listbox1 从一个目录收集文件，我有一个添加按钮，可以将 Listbox1 中的选定文件添加到 Listbox2。

有没有办法手动对这些项目进行排序？也许有一个向上向下的按钮？

我想排序/重新排序的原因是我将有一个进程来运行这些选定的文件，并且每个文件都必须生成另一个文件名唯一的文件。

一个简单的示例是处理 FILE1.txt 并生成 FILE1.pdf 等。

有没有更简单的方法来完成排序/重新排序？

**更新**

这是目前我如何填充我的`listbox1`，在添加任何内容之前`listbox2`，这是我希望以这种或其他方式排序的 ListBox。

```
Dim directoryInfo As _
    New System.IO.DirectoryInfo(FolderBrowserDialog1.SelectedPath)
Dim fileInfos() As System.IO.FileInfo

fileInfos = directoryInfo.GetFiles()
For Each fileInfo As System.IO.FileInfo In fileInfos
    ListBox1.DataSource = _list
    _list.Add(fileInfo.Name)
    _list.Sort()
Next

'Refresh Listbox1
ListBox1.DataSource = Nothing
ListBox1.DataSource = _list 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:21:31.563

您可以使用数据绑定而不是将项目一一添加到`ListBox`. 我建议您先将文件添加到列表中，然后对列表进行排序并将其分配给`ListBox`.`DataSource`

定义一个类成员的列表

```
Private _list As New List(Of String)() 
```

将其分配给`ListBox`

```
 listBox1.DataSource = _list 
```

然后添加新的列表条目

```
_list.Add("new file")
_list.Sort()

' Refresh the ListBox
listBox1.DataSource = Nothing
listBox1.DataSource = _list 
```

* * *

**更新**

如果你想实现自己的排序顺序，那么实现一个`IComparer(Of String)`

```
Class MyFileComparer
    Implements IComparer(Of String)

    Public Function Compare(x As String, y As String) As Integer _
        Implements IComparer(Of String).Compare 

        Const  AlwaysFirst As String = "FILE1"

        Dim x = If(x.Contains(AlwaysFirst), "1_", "2_") & x
        Dim y = If(y.Contains(AlwaysFirst), "1_", "2_") & y

        ' Note: If "FILE1" appears always at the end then this would be better
        'Dim x = If(x.EndsWith(AlwaysFirst & ".txt"), "1_", "2_") & x
        'Dim y = If(y.EndsWith(AlwaysFirst & ".txt"), "1_", "2_") & y

        ' Normalize strings (e.g. if "File_123.txt" = ""File 123.txt")
        x = x.Replace("_"C, " "C)
        y = y.Replace("_"C, " "C)

        Return x.CompareTo(y)
    End Function
End Class 
```

然后你可以像这样排序

```
Static comparer =  New MyFileComparer()

_list.Sort(comparer) 
```

* * *

**更新**#2

我不知道你的文件是如何准确命名的，但是如果它们总是以你结尾，`"FILE<number>.<ext>"`你也可以像这样更改字符串比较的文件名：

原始文件名

```
abc_FILE1.txt
abc_123_FILE2.txt
sssd_FILE23.txt
xxx_24_FILE073.txt

```

准备好的文件名

```
FILE001_abc.txt
FILE002_abc_123.txt
FILE023_sssd.txt
FILE073_xxx_24.txt

```

现在该`Compare`方法可以简单地确定结果

```
Return x_prepared.CompareTo(y_prepared) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T15:25:15.360

捎带奥利维尔的回答，也许[排序列表](http://msdn.microsoft.com/en-us/library/system.collections.sortedlist.aspx)可能对你有用？

如果您需要的不仅仅是字母名称排序，您还可以使用 OrderBy 对项目进行排序。

```
 var sorted = from m in myCollection select m orderBy m.FileName; 
```

（语法可能已关闭）

# actionscript-3 - 循环的动作脚本是否向后运行？

> ID：10231110
> 
> 赞同：0
> 
> 时间：2012-04-19T15:09:19.170
> 
> 标签：actionscript-3, air

关于 actionscript for 循环，我发现了一些让我非常困惑的东西。

我有一个带有 for 循环的 AIR 应用程序：

```
for (var k:int = 0; k < 10; k++) 
{
   Alert.show(k.toString(), "Message", Alert.YES);
} 
```

但是输出从 10 开始倒数到 0。这只是 AIR 在运行时编译的方式，还是循环实际上向后运行**？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T15:11:36.630

当然，循环本身不会向后运行。当您弹出一个新的`Alert`using`Alert.show(...`时，警报会显示在已显示的所有其他内容之上。

因此，您的第一个警报，首先弹出“0”。
接下来，弹出带有“1”的警报（在带有“0”的警报之上）
......
最后，弹出带有“9”的警报（在其他警报之上）

# asp.net - 拖放分组动画不起作用

> ID：10231112
> 
> 赞同：0
> 
> 时间：2012-04-19T15:09:25.457
> 
> 标签：asp.net, ajax, telerik, dotnetnuke, radgrid

我在我的 RADGrid 上启用了分组，但是当我拖放一列时，我看到的只是拖动时的“CrossHair”光标。我没有看到动画在视觉上显示代表被拖动的列的框，也没有看到出现的“双箭头”向您显示列即将被删除的位置。我在 Telerik RADGrid 演示中看到了这两个功能，但我似乎可以在我自己的 RADGrid 上复制此功能。

帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T08:53:51.857

试试下面的链接。这将帮助您使拖放工作。我目前也在使用这种方法。我的 DNN 是 6.x 版

[http://www.telerik.com/community/forums/aspnet-ajax/grid/unknown-server-tag-telerik-griddragdropcolumn.aspx](http://www.telerik.com/community/forums/aspnet-ajax/grid/unknown-server-tag-telerik-griddragdropcolumn.aspx)

*编辑：在您的 Page_Load 中调用以下方法（这只是为了在页面上动态获取脚本块。您也必须执行我链接中描述的步骤）：

```
public void subDragDropJavaScript()
{
  // define the script string to add to the page
  StringBuilder sJavaScript = new StringBuilder();
  // js header
  sJavaScript.Append(("<script type=\'text/javascript\'>" + "\r\n"));
  sJavaScript.Append("function startRowDrag_ModuleID_"+ this.ModuleId + "_GridID_" + oDNNGrid.ID + "(row, args)" + "\r\n");
  sJavaScript.Append("{" + "\r\n");
  sJavaScript.Append("var target = args.target || args.srcElement;" + "\r\n");
  sJavaScript.Append("if (target.className.indexOf('rgDrag') > -1)" + "\r\n");
  sJavaScript.Append("{" + "\r\n");
  sJavaScript.Append("args._isDragHandle = true;" + "\r\n");
  sJavaScript.Append("var tableView = $find(row.id.split('__')[0]);" + "\r\n");
  sJavaScript.Append("var grid = $find(tableView.get_owner().get_id());" + "\r\n");
  sJavaScript.Append("tableView.get_dataItems();" + "\r\n");
  sJavaScript.Append("$find(row.id).set_selected(true);" + "\r\n");
  sJavaScript.Append("var origFunc = Telerik.Web.UI.RadGrid.prototype._canRiseRowEvent;" + "\r\n");
  sJavaScript.Append("Telerik.Web.UI.RadGrid.prototype._canRiseRowEvent = function ()" + "\r\n");
  sJavaScript.Append("{" + "\r\n");
  sJavaScript.Append("var el = arguments[0].target || arguments[0].srcElement;" + "\r\n");
  sJavaScript.Append("return origFunc.apply(grid, arguments) || el.tagName.toLowerCase() == 'img';" + "\r\n");
  sJavaScript.Append("}" + "\r\n");
  sJavaScript.Append("grid._mouseDown(args);" + "\r\n");
  sJavaScript.Append("Telerik.Web.UI.RadGrid.prototype._canRiseRowEvent = origFunc;" + "\r\n");
  sJavaScript.Append("}" + "\r\n");
  sJavaScript.Append("}" + "\r\n");
  sJavaScript.Append("function gridRowDragStarted_ModuleID_" + this.ModuleId + "_GridID_" + oDNNGrid.ID + "(sender, args) {" + "\r\n");
  sJavaScript.Append("if (!args.get_domEvent()._isDragHandle) {" + "\r\n");
  sJavaScript.Append("args.set_cancel(true);" + "\r\n");
  sJavaScript.Append("}" + "\r\n");
  sJavaScript.Append("}" + "\r\n");

  // js close block
  sJavaScript.Append("</script>");
  // add js block to page
  this.Page.ClientScript.RegisterStartupScript(typeof(string), "DragnDropRowSelection_" + ModuleId, sJavaScript.ToString());
} 
```

最好的问候，没有人

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-27T21:37:15.987

我知道这是一个旧线程，但我最近才找到答案。

在我的自定义模块的 Module.css 中，我添加了以下代码：

```
.RadGrid
{
    z-index: 1000;
} 
```

显然 DNN 框架的 default.css 使模块的 z-index 高于网格，从而掩盖了动画。将 z-index 增加到网格本身会将其置于模块上方，从而允许动画再次显示。

# jquery - JQuery 页面动态加载

> ID：10231113
> 
> 赞同：0
> 
> 时间：2012-04-19T15:09:26.403
> 
> 标签：jquery

我搜索 jquery 页面加载。

我总是面对人们使用类似的东西

```
jQuery("#popup").fadeIn(4000); //function to redirect the page after few seconds
                            window.location.replace("http://"+a_href);  
                        }, 3000) 
```

他们设置超时 3000 。但是，有可能在 3 秒后无法加载页面。

有没有办法动态地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:13:11.567

您不需要预测 3 秒是否足够长，您可以简单地使用[回调函数](https://stackoverflow.com/questions/824234/what-is-a-callback-function)，以便元素在加载之前不会淡入。

此外，`window.location.replace()`不会将内容加载到弹出窗口中，它会将整个网页更改为这个新位置。相反，您应该使用[jQuery Load](http://api.jquery.com/load/) ( `$.load()`)。

因此，您不需要淡入淡出动画持续 3 秒，您可以让它动画长/短，只要您喜欢。在我的示例中，我已将其减少到 0.3 秒。

请改用以下内容：

```
var $popup = $("#popup");
$popup.fadeOut(300, function(){
   $popup.load("http://"+a_href, function(){
       $popup.fadeIn(300);
   });   
}); 
```

# mysql - 使用 Solr，我还需要 SQL 数据库吗？

> ID：10231115
> 
> 赞同：1
> 
> 时间：2012-04-19T15:09:32.557
> 
> 标签：mysql, database, solr

我正在考虑使用 solr 来实现空间和文本索引。目前，我有进入 MYSQL 数据库和 solr 的条目。当 solr 启动时，它会从 MYSQL 中读取所有数据。随着新条目的出现，我的 Web 服务器将它们写入 MYSQL，同时将文档添加到 solr。越来越多地，我的 MYSQL 实现似乎只是成为一个只写的持久存储（或多或少，是 solr 中数据的备份）——所有条目的读取都是通过 solr 查询完成的。真正从 MYSQL 读取的唯一数据是用户信息，不需要索引/搜索。

几个问题：

*   我真的需要 MYSQL 实现还是可以简单地将所有数据存储在 solr 中？
*   如果仅 solr，与此解决方案相关的风险是什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T17:16:02.650

几乎总是，答案是肯定的。它不一定是数据库，但如果您更改了 Solr 中数据的索引方式，您应该将原始数据保留在 Solr 之外的某个位置。与 Solr 不是的大多数数据库不同，Solr 不能简单地重新索引自身。您可以假设配置您的架构，以便将所有原始数据标记为“已存储”，然后可能会以这种方式进行 CSV 转储和重新索引，但我不推荐这种方法。

无耻插件：有关使用 Solr 的任何信息，我推荐[我的书](http://www.packtpub.com/apache-solr-3-enterprise-search-server/book)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T17:14:54.657

我推荐一个单独的存储库。MySQL 是一种选择。有些人使用文件系统。

您通常需要不同的搜索模式而不是存储模式。使用单独的存储库很容易做到这一点。

当您更改 Solr 架构时，您需要重新加载内容。从 Solr 卸载所有内容可能会很慢。如果它已经在一个单独的存储库中，那么您不需要从 Solr 转储它，您可以覆盖那里的内容。

一般来说，使 Solr 既是搜索引擎又是存储库确实会降低您的灵活性和使搜索达到最佳状态的选项。

# java - 在线程运行时更改 JProgressBar 值

> ID：10231118
> 
> 赞同：1
> 
> 时间：2012-04-19T15:09:48.937
> 
> 标签：java, multithreading, swing, user-interface, jslider

我想在面板中更改 JSlider 的值，而我正在运行一个线程，它给了我这个值（因为取得了一些进展）

所以我计算线程中的进度值，并使用 GET 方法获取面板中的值并将其设置为进度条。

调试后，有一个值，但**EDIT:[ JProgressBar ]**不会更改他的 UI。

**一些代码：**

```
while(_thread.isAlive()) {
 pb_calc.setValue(_thread.getVal());
 pb_calc.updateUI();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T15:20:16.257

*   不要使用`updateUI`，此方法保留用于`Look and Feel`和`UIManager`

*   的输出`Background Tasks`应该被包装成`invokeLater`，更多教程[Concurency in Swing](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/)

*   更好的是从内部或内部调用`Background`taks`SwingWorker``Runnable#Thread`

# jquery - 如何在 JQuery Mobile 中刷新加载有外部内容的 DIV 的 CSS

> ID：10231122
> 
> 赞同：-1
> 
> 时间：2012-04-19T15:09:58.697
> 
> 标签：jquery, css, mobile, jquery-mobile, page-refresh

我已阅读您的所有评论，但我阅读的解决方案似乎都不起作用。我有一段 Jquery 代码从外部 PHP 脚本中获取一些内容，该脚本更新了我的应用程序中的 div。加载新数据后，它没有 Jquery Mobile 样式。我已经看到有些人如何使用 .page() 或 trigger("refresh") 等……但这些都不能刷新整个 div。这是我的代码和有问题的html部分：

```
function getcontent(pg) {
   $("xyz").html("");
   $.get("http://myscript.php", function(data) {
      $("#xyz").html(data);
      $("#xyz").page();
} 
```

HTML：

```
<div id="xyz"></div> 
```

真的，这根本没有什么，我就是想不通。如果我删除了包装 div（“xyz”）并刷新了单个元素的列表视图、按钮等，我取得了“一些”成功，但这是一种非常笨拙的处理方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T23:41:16.617

我在具有刷新的列表或 div 上使用了 .page 元素

```
$('ul.sessions-list *').page(); 
```

这会刷新我的会话列表中已从外部加载的所有内容并更正 css。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T15:12:47.297

一个包含`#xyz`例如`#mypage`调用的页面

```
$('#mypage').trigger('pagecreate'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-24T09:12:54.213

尝试使用

```
$("#page_id").trigger("create") 
```

在获取添加内容的页面上。

# c# - 为什么 System.ServiceModel.Channels.Message 使用“ref”关键字？

> ID：10231126
> 
> 赞同：3
> 
> 时间：2012-04-19T15:10:14.437
> 
> 标签：c#, pass-by-reference, ref

我目前正在查看一些 C# 代码，我想检查一下我对它应该如何工作的理解并没有发疯。

这与传递 System.ServiceModel.Channels.Message 有关。每个接受 Message 对象的方法都有一个类似于下面的方法签名：

```
void SomeMethod(ref Message message) { ... } 
```

我不明白为什么“ref”关键字在那里。据我了解，如果该方法不会完全替换对象，则不需要它。

```
void SomeMethod(ref Message message)
{
    message = new Message();
} 
```

但是，例如，如果消息只是将其他内容添加到标题中，或者只是从对象中读取值，则不需要“ref”关键字，因为 Message 是引用类型。

```
void SomeMethod(Message message)
{
    message.Headers.Add("Some Data");  // This should be fine?
} 
```

干杯

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T16:13:52.840

首先，您可能是正确的；编写代码的人很可能错误地添加了“ref”。

不过，我想借此机会确保您清楚地了解“ref”的含义。它的意思是“**给这个变量做一个别名**”。也就是说，当你说：

```
M(ref string x) { x = null; }
N(string x) { x = null; }
...
string y = "abc";
N(y);
M(ref y); 
```

调用`N(y)`意味着*复制 y 中的引用，并将该引用放入 x 中*。调用`M(ref y)`意味着*x 和 y 现在都是同一个变量的名称*。也就是说，`x`成为的*别名*。`y`

很遗憾我们选择了“ref”作为关键字，因为它立即让人对引用类型和值类型感到困惑。**它与引用类型和值类型无关。** “ref”的意思是“*我指的是另一个变量*”。

`ref`和之间的区别`out`无非是`ref`要求别名变量在调用*之前*`out`初始化，而不是。（两者都保证调用正常完成*后变量会被初始化。）*

# asp.net-mvc - EditorFor an int 选择一个字符串模板

> ID：10231130
> 
> 赞同：17
> 
> 时间：2012-04-19T15:10:35.367
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我有两个 EditorTemplates

```
string.cshtml
int.cshtml 
```

当我写`EditorFor`a`string`或 an`int`他们都选择`string.cshtml`

当我什至删除时，`string.cshtml`不要选择`EditorFor``int``int.cshtml`

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-19T15:12:36.360

EditorTemplates 使用 CLR 类型名，而不是 C# 关键字。
您需要创建`Int32.cshtml`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-19T15:12:39.323

您的 int 模板的名称应该是`Int32.cshtml`

之所以`string.cshtml`有效，是因为系统命名空间中有一个 CLR 类型，称为`String`;)

**您的模板名称必须像您想要的类型一样调用。**

### 更多信息

*   [ASP.NET MVC 2 模板](http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-1-introduction.html)
*   [自定义 MVC 数值编辑器模板](http://thirstycrow.net/blog/2011/06/custom-mvc-numeric-editortemplate/)

# oracle - PHP 5 oci_execute(): ORA-01008: 并非所有变量都绑定

> ID：10231131
> 
> 赞同：2
> 
> 时间：2012-04-19T15:10:37.887
> 
> 标签：oracle, oracle10g

我在尝试合并时遇到了这个错误：

```
PHP Warning:  oci_execute(): ORA-01008: not all variables bound 
```

我确保查询中的所有值都使用 oci_bind_by_name() 函数绑定，并且数据有效。

这是我的代码：

```
//Sample values just to test
$col1val = 'test1';
$col2val = 'test2';
$col3val = 'test3';
$col4val = 'test4';

        $sql = "merge into tablespace.tb1 c using (select :col1val from dual) cd
                on (c.col1 = cd.col1)
                when not matched then
                    insert (c.col2, c.col1, c.col3, c.col4) 
                    values (:col2val, :col1val, :col3val, :col4val)";

        oci_bind_by_name($stid, ":col1val", $col1val);
        oci_bind_by_name($stid, ":col2val", $col2val);  
        oci_bind_by_name($stid, ":col3val", $col3val);          
        oci_bind_by_name($stid, ":col4val", $col4val);

        $stid = oci_parse($conn, $sql);
        $result = oci_execute($stid);
                    oci_free_statement($stid); 
```

我正在使用 PHP 5 和 Oracle 10g。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T22:22:04.400

问题是`oci_bind_by_name()`之前被调用过`oci_parse()`。 `oci_parse()`需要先调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T19:32:28.303

我不知道“oci_bind_by_name”是如何工作的，但我知道 oracle 下的 EXECUTE IMMEDIATE 语句将需要一个绑定变量，用于您想要影响的值的每个实例，例如，如果您使用两次 VAL1，您仍然会必须使用 2 个绑定变量：1 和：2，您不能使用 :1 两次。

所以在你的例子中，因为 ":col1val" 被使用了两次，我建议你尝试使用 ":col5val" 来代替。另外，尝试按照脚本中变量出现的顺序进行绑定。

那是我的贡献:-) 让我们发布。

rgds。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-21T07:05:21.403

您的声明是错误的，您需要 cd 中的值的别名

在不匹配时使用 (select :col1val col1 from dual) cd on (c.col1 = cd.col1) 合并到 tablespace.tb1 c 中，然后插入 (c.col2, c.col1, c.col3, c.col4) 值 ( ：col2val，：col1val，：col3val，：col4val）“；

# c#-4.0 - 操作方法：使用 C# 从 Word 文档页脚中删除文本

> ID：10231132
> 
> 赞同：1
> 
> 时间：2012-04-19T15:10:39.857
> 
> 标签：c#-4.0, interop, ms-word, com-interop, footer

我正在尝试使用 C# 4 从 Word 文档中删除页脚。页脚如下所示：

> 第 1 页 2012 年 4 月 18 日

实际上，这是在 Word VBA 中显示时的页脚文本：

> 第 1 页 ( 2012 年 4 月 18 日

“Page 1”和“April”之间实际上有一个项目符号字符。最后，页脚应如下所示：

> 2012 年 4 月 18 日

无论如何，在 Word VBA 中，我可以使用以下代码来做到这一点：

```
Dim rngFtr As Range
Set rngFtr = ActiveDocument.Sections(1).Footers(wdHeaderFooterPrimary).Range
rngFtr.Collapse wdCollapseStart
rngFtr.MoveStart wdParagraph, 1
rngFtr.MoveEnd wdWord, 4
rngFtr.Delete 
```

我在 C# 中尝试了同样的事情，但它完全删除了页脚。这是我在 C# 4 中的代码： using Microsoft.Office.Interop.Word;

```
Microsoft.Office.Interop.Word.Application ap = new Microsoft.Office.Interop.Word.Application();
Document doc = ap.Documents.Open(docFile.FullName, ReadOnly: false, Visible: false);
doc.Activate();
Microsoft.Office.Interop.Word.Range ftrRng =
    doc.Sections[1].Footers[WdHeaderFooterIndex.wdHeaderFooterPrimary].Range;
ftrRng.Collapse(WdCollapseDirection.wdCollapseEnd);
ftrRng.MoveStart(WdUnits.wdParagraph, 1);
ftrRng.MoveEnd(WdUnits.wdWord, 4);
ftrRng.Delete();

ap.Documents.Close(SaveChanges: false, OriginalFormat: false, RouteDocument: false);

((_Application) ap).Quit(SaveChanges: false, OriginalFormat: false, RouteDocument: false);
    System.Runtime.InteropServices.Marshal.ReleaseComObject(ap); 
```

我什至尝试了其他方法来摆脱“第 1 页”和项目符号，例如：

```
var replaceText = string.Empty;
object mis = System.Type.Missing;
var targetFooterText =
    doc.Sections[1].Footers[WdHeaderFooterIndex.wdHeaderFooterPrimary].Range.Text.ToString().Substring(1, 10);
doc.Sections[1].Footers[WdHeaderFooterIndex.wdHeaderFooterPrimary].Range.Find.Execute(
    targetFooterText,
    ref mis, ref mis, ref mis, ref mis, ref mis, ref mis, ref mis, ref mis,
    replaceText,
    ref mis, ref mis, ref mis, ref mis, ref mis); 
```

这没有任何作用。

请让我知道我做错了什么。先感谢您。

我不确定这是否重要，但项目符号是 Unicode-2022。

这是文档页脚的屏幕截图。我只需要删除文本“第 1 页”和项目符号并将其替换为日期。其余的应该保持原样。

![在此处输入图像描述](../Images/434d20ee72746f3e8327390f1e9bbe50.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T06:19:15.273

试试下面的例子，它执行以下操作：

*   从页脚范围中提取所有文本
*   从文本中删除“页面”字符串
*   将页脚范围文本设置为前一个值减去“页面”

    ```
     using Word = Microsoft.Office.Interop.Word;

        Word.Document document = Globals.ThisAddIn.Application.ActiveDocument;

        Word.Range footerRange =
            document.Sections[1].Footers[Word.WdHeaderFooterIndex.wdHeaderFooterPrimary].Range;

        string rangeText = footerRange.Text;

        if (!String.IsNullOrEmpty(rangeText) && rangeText.Contains("Page"))
        {
            //Now set the footer Range Text to the new value minus the "Page"
            //Note: Edit as required because the page number may not always be one character
            string newValue = rangeText.Remove(rangeText.IndexOf("Page"), 6);
            footerRange.Text = newValue;
        } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T14:50:43.470

经过一番挖掘和使用 Word VBA 后，我找到了替代解决方案。这是我的最终代码：

```
Microsoft.Office.Interop.Word.Application ap = new Microsoft.Office.Interop.Word.Application();

Document doc = ap.Documents.Open(docFile.FullName, ReadOnly: false, Visible: false);
doc.Activate();

// These 3 lines did the trick.
doc.ActiveWindow.ActivePane.View.SeekView = WdSeekView.wdSeekPrimaryFooter;
doc.Application.Selection.MoveRight(WdUnits.wdCharacter, 1);
doc.Application.Selection.Delete(WdUnits.wdCharacter, 9);

ap.Documents.Close(SaveChanges: false, OriginalFormat: false, RouteDocument: false);

((_Application) ap).Quit(SaveChanges: false, OriginalFormat: false, RouteDocument: false);
System.Runtime.InteropServices.Marshal.ReleaseComObject(ap); 
```

# c# - 显示“#Error”的本地 RDLC 报告应显示报告参数

> ID：10231134
> 
> 赞同：1
> 
> 时间：2012-04-19T15:10:43.253
> 
> 标签：c#, reportviewer, rdlc, microsoft-reporting

我正在使用 RDLC (VS2010) 在网页 (MVC3) 上将简单的运输标签呈现为 PDF。我有一个参数需要传递给 RDLC (ShipmentId)。我传递了该参数，并且报告正确呈现，除了应该显示我传入的参数的文本框。

RDLC 上的文本框将其值设置为“=Parameters!ShipmentId.Value”。

这是我的代码的样子：

```
 shipment.ShipmentId = "123TEST";

    Warning[] warnings;
    string mimeType;
    string[] streamids;
    string encoding;
    string filenameExtension;

    LocalReport report = new LocalReport();
    report.ReportPath = @"Labels\ShippingLabel.rdlc";
    report.Refresh();

    report.EnableExternalImages = true;

    ReportParameter param = new ReportParameter("ShipmentId", shipment.ShipmentId, true);
    report.SetParameters(param);

    report.Refresh();

    byte[] bytes = report.Render("PDF", null, out mimeType, out encoding, out filenameExtension, out streamids, out warnings);

    return new FileContentResult(bytes, mimeType); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T17:30:54.847

问题原来是 ReportViewer 在使用 ProcessingMode.Local 时不能有 ReportParameters。相反，我更改了代码以使用数据源而不是参数。

```
 Warning[] warnings;
        string mimeType;
        string[] streamids;
        string encoding;
        string filenameExtension;

        var viewer = new ReportViewer();
        viewer.ProcessingMode = ProcessingMode.Local;

        viewer.LocalReport.ReportPath = @"Labels\ShippingLabel.rdlc";
        viewer.LocalReport.EnableExternalImages = true;

        var shipLabel = new ShippingLabel { ShipmentId = shipment.ShipmentId, Barcode = GetBarcode(shipment.ShipmentId) };

        viewer.LocalReport.DataSources.Add(new ReportDataSource("ShippingLabel", new List<ShippingLabel> { shipLabel }));
        viewer.LocalReport.Refresh();

        var bytes = viewer.LocalReport.Render("PDF", null, out mimeType, out encoding, out filenameExtension, out streamids, out warnings); 
```

# twitter - 带有间隔的 Knockout.js 和 Twitterfeed 更新页面

> ID：10231135
> 
> 赞同：0
> 
> 时间：2012-04-19T15:10:45.343
> 
> 标签：twitter, knockout.js, pageload

例如，我目前正在尝试每 1 分钟更新一次我的 twitter 提要。但我不知道该怎么做。

这是我的视图模型：

```
var savedLists = ['NielsenRamon', 'Wouter_Willaert', 'AWT_Centric'];

var twitterListModel = function(list) {
    this.savedLists = ko.observableArray(list);
    this.currentTweets = ko.observableArray([]);

    ko.computed(function() {
        twitterApi.getTweetsForUsers(savedLists, this.currentTweets);
    }, this).extend({ throttle: 1 });
}

ko.applyBindings(new twitterListModel(savedLists)); 
```

我正在使用一个非常缩小的版本：http://knockoutjs.com/examples/twitter.html 我使用的 API 也是一样的。

我想要的是我的 html 页面上的绑定每分钟更新一次，例如不刷新我的页面。例如：当有人发推文时。该推文会在 1 分钟后显示在页面上，而无需刷新页面。

这可能是我现在的工作方式吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:50:43.500

您可以使用每分钟`setInterval`调用一次。`twitterApi.getTweetsForUsers`

就像是： `setInterval(function() { twitterApi.getTweetsForUsers(savedLists, twitterListModel.currentTweets); }, 60000);`

如果调用可能需要一段时间，那么您可能需要修改`twitterApi`示例代码并`setTimeout`在来自实际 twitter API 调用的回调中使用一个新的`setTimeout`.

# php - PHP从数组的两侧删除空项目

> ID：10231136
> 
> 赞同：1
> 
> 时间：2012-04-19T15:10:47.700
> 
> 标签：php, arrays, list

我有以下数组：

```
Array 
(
[0] => 
[1] => 
[2] => apple
[3] => 
[4] => orange
[5] => strawberry
[6] => 
) 
```

如何从开头和结尾删除空项目，但不能从内部删除？最终数组应如下所示：

```
Array 
(
[0] => apple
[1] => 
[2] => orange
[3] => strawberry
) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-19T15:16:24.077

这是一个方便的方法：

```
while (reset($array) == '') array_shift($array);
while (end($array) == '') array_pop($array); 
```

[**看到它在行动**](http://ideone.com/loZ2z)。

强制性评论：我正在使用与空字符串的松散比较，因为它看起来像您在给出示例时想要的那样。如果您想对要删除的元素更加挑剔，请相应地自定义条件。

**更新：额外的标志性 PHP 丑陋代码可能会更快**

我突然想到，如果数组的开头和结尾有很多空元素，上述方法可能不是最快的，因为它会一个一个地删除它们，在每个步骤中重新索引数组等等。所以这是一个解决方案适用于任何阵列，只需一步即可完成修剪。警告：*丑陋*。

```
$firstNonEmpty = 0;
$i = 0;
foreach ($array as $val) {
    if ($val != '') {
        $firstNonEmpty = $i;
        break;
    }
    ++$i;
}

$lastNonEmpty = $count = count($array);
end($array);
for ($i = $count; $i > 0; --$i) {
    if (current($array) != '') {
        $lastNonEmpty = $i;
        break;
    }
    prev($array);
}

$array = array_slice($array, $firstNonEmpty, $lastNonEmpty - $firstNonEmpty); 
```

[**看到它在行动**](http://ideone.com/Hlw6C)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T15:13:08.257

你去吧：

```
$Array = array('', Allo, '');

if(isset($Array[0]) && empty($Array[0])){
    array_pop($Array);
}

$C = count($Array)-1;
if(isset($Array[$C]) && empty($Array[$C])){
    array_shift($Array);
} 
```

它将删除第一个和最后一个**空**行。

如果您想删除所有第一个和最后一个但只为空，您需要这样做：

```
$Array = array('', Allo, '', '', 'Toc', '', '', '');

$i=0;
foreach($Array as $Key => $Value){
    if(empty($Value)){
        unset($Array[$Key]);
    } else {
        break;
    }
    $i++;
}

$Array = array_reverse($Array);
$i=0;
foreach($Array as $Key => $Value){
    if(empty($Value)){
        unset($Array[$Key]);
    } else {
        break;
    }
    $i++;
}

$Array = array_reverse($Array); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T15:19:04.210

Here's another method:

```
<?php

$array = array('', '', 'banana', '', 'orange', '', '', '');

while ($array[0] == '')
{
    array_shift($array);
}

$count = count($array);

while ($array[$count - 1] == '')
{
    array_pop($array);
    $count--;
}

print_r($array);

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T15:22:00.900

以下代码段将完成这项工作：

```
function removeStartingEmptyIndexes($array)
{
  foreach($array as $i => $item)
  {
    if(!empty($item)) {
      break;
    }
    else
    {
      unset($array[$i]);
    }
  }

  return $array;
}

function trimEmptyIndexes($array)
{
  return array_reverse(removeStartingEmptyIndexes(array_reverse(removeStartingEmptyIndexes($array))));
}

$array = array("", "", "apple", "orange", "", "", "", "lemon", "", "");

$array = trimEmptyIndexes($array); 
```

只需调用“trimEmptyIndexes($array)”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T15:15:07.593

您可以使用

```
array_pop($array); // remove the last element
array_shift($array); // remove the first element 
```

您可以在确保第一个和/或最后一个索引为空之前进行一些简单的检查

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-04-19T15:18:17.797

```
while(strlen($array[0])==0)
    unset(array[0]);

$doLoop=(strlen($array[ count(array)-1 ])==0);
while ($doLoop){
    unset($array[ count(array)-1 ]);
    $doLoop=(strlen($array[ count(array)-1 ])==0);
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-04-19T15:14:17.203

尝试这个

```
foreach ($original_array as $index => $val) {
  if (is_empty($val)) {
    unset($original_array [$index]);
  } else {
    break;
  }

} 
```

# perl - 显示重复记录

> ID：10231138
> 
> 赞同：0
> 
> 时间：2012-04-19T15:10:50.663
> 
> 标签：perl

我有如下代码来解析文本文件。在文本文件的所有行上显示“Enter：”关键字之后的所有单词。我在“Enter：”关键字之后显示所有单词，但我不想重复不应该重复，而是重复。请指导我了解我的代码有什么问题。

```
#! /usr/bin/perl
use strict;
use warnings;
$infile  "xyz.txt";
open (FILE, $infile) or die ("can't open file:$!");
if(FILE =~ /ENTER/ ){
    @functions = substr($infile, index($infile, 'Enter:'));
    @functions =~/@functions//;
    %seen=();
    @unique = grep { ! $seen{$_} ++ } @array;
    while (@unique != ''){
        print '@unique\n';
    }
}
close (FILE); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:50:35.060

这是一种完成这项工作的方法，它打印在以关键字开头的每一行上找到的唯一单词`Enter:`

```
#!/usr/bin/perl
use strict;
use warnings;

my $infile = "xyz.txt";

# use 3 arg open with lexical file handler
open my $fh, '<', $infile or die "unable to open '$infile' for reading: $!";

# loop thru all lines
while(my $line = <$fh) {
    # remove linefeed;
    chomp($line);
    # if the line begins with "Enter:"
    # remove the keyword "Enter:"
    if ($line =~ s/^Enter:\s+//) {
        # split the line on whitespaces
        # and populate the array with all words found
        my @words = split(/\s+/, $line);
        # create a hash where the keys are the words found
        my %seen = map { $_ => 1 }@words;
        # display unique words
        print "$_\t" for(keys %seen);
        print "\n";
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-19T15:44:51.433

如果我理解正确，一个问题是您的“grep”只计算每个单词的出现次数。我认为您想使用“地图”，以便“@unique”仅包含“@array”中的唯一单词。像这样的东西：

```
@unique = map {
    if (exists($seen{$_})) {
        ();
    } else {
        $seen{$_}++; $_;
    }
 } @array; 
```

# iphone - 为 UIPrintInteractionController 调整 UIImage 的大小

> ID：10231145
> 
> 赞同：4
> 
> 时间：2012-04-19T15:11:08.533
> 
> 标签：iphone, uiimage, airprint

我目前正在研究通过 Airprint 打印视图内容的可能性。对于这个功能，我从视图中创建了一个 UIImage 并将它发送到 UIPrintInteractionController。

问题是图像的大小被调整为纸张的全分辨率，而不是原始大小（大约 300x500 像素）。有谁知道如何从我的图像创建一个合适的页面。

这是代码：

```
/** Create UIImage from UIScrollView**/
-(UIImage*)printScreen{
UIImage* img = nil;

UIGraphicsBeginImageContext(scrollView.contentSize);
{
    CGPoint savedContentOffset = scrollView.contentOffset;
    CGRect savedFrame = scrollView.frame;

    scrollView.contentOffset = CGPointZero;
    scrollView.frame = CGRectMake(0, 0, scrollView.contentSize.width, scrollView.contentSize.height);
    scrollView.backgroundColor = [UIColor whiteColor];
    [scrollView.layer renderInContext: UIGraphicsGetCurrentContext()];     
    img = UIGraphicsGetImageFromCurrentImageContext();

    scrollView.contentOffset = savedContentOffset;
    scrollView.frame = savedFrame;
    scrollView.backgroundColor = [UIColor clearColor];
}
UIGraphicsEndImageContext();
return img;
}

/** Print view content via AirPrint **/
-(void)doPrint{
if ([UIPrintInteractionController isPrintingAvailable])
{
    UIPrintInteractionController *pic = [UIPrintInteractionController sharedPrintController];

    UIImage *image = [(ReservationOverView*)self.view printScreen];

    NSData *myData = [NSData dataWithData:UIImagePNGRepresentation(image)];
    if(pic && [UIPrintInteractionController canPrintData: myData] ) {

        pic.delegate =(id<UIPrintInteractionControllerDelegate>) self;

        UIPrintInfo *printInfo = [UIPrintInfo printInfo];
        printInfo.outputType = UIPrintInfoOutputPhoto;
        printInfo.jobName = [NSString stringWithFormat:@"Reservation-%@",self.reservation.reservationID];
        printInfo.duplex = UIPrintInfoDuplexNone;
        pic.printInfo = printInfo;
        pic.showsPageRange = YES;
        pic.printingItem = myData;
        //pic.delegate = self;

        void (^completionHandler)(UIPrintInteractionController *, BOOL, NSError *) = ^(UIPrintInteractionController *printController, BOOL completed, NSError *error) {
            if (!completed && error) {
                NSLog(@"FAILED! due to error in domain %@ with error code %u", error.domain, error.code);
            }
        };

        [pic presentAnimated:YES completionHandler:completionHandler];

    }

}
} 
```

我试图手动调整图像大小，但这不能正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-05T01:52:11.487

我在 Apple 上找到了这个示例代码：

> [https://developer.apple.com/library/ios/samplecode/PrintPhoto/Listings/Classes_PrintPhotoPageRenderer_m.html#//apple_ref/doc/uid/DTS40010366-Classes_PrintPhotoPageRenderer_m-DontLinkElementID_6](https://developer.apple.com/library/ios/samplecode/PrintPhoto/Listings/Classes_PrintPhotoPageRenderer_m.html#//apple_ref/doc/uid/DTS40010366-Classes_PrintPhotoPageRenderer_m-DontLinkElementID_6)

看起来调整图像大小以进行打印的正确方法（因此它不会填满整个页面）是实现您自己的 UIPrintPageRenderer 并实现：

```
- (void)drawPageAtIndex:(NSInteger)pageIndex inRect:(CGRect)printableRect 
```

printableRect 会告诉你纸张的大小，你可以把它缩小到你想要的大小（大概是通过计算一些 DPI）。

**更新**：我最终实现了自己的 ImagePageRenderer：

```
- (void)drawPageAtIndex:(NSInteger)pageIndex inRect:(CGRect)printableRect
{
    if( self.image )
    {
        CGSize printableAreaSize = printableRect.size;

        // Apple uses 72dpi by default for printing images. This
        // renders out the image to be giant. Instead, we should
        // resize our image to our desired dpi.
        CGFloat dpiScale = kAppleDPI / self.dpi;

        CGFloat imageWidth = self.image.size.width * dpiScale;
        CGFloat imageHeight = self.image.size.height * dpiScale;

        // scale image if paper is too small
        BOOL scaleImage = printableAreaSize.width < imageWidth || printableAreaSize.height < imageHeight;
        if( scaleImage )
        {
            CGFloat widthScale = (CGFloat)printableAreaSize.width / imageWidth;
            CGFloat heightScale = (CGFloat)printableAreaSize.height / imageHeight;

            // Choose smaller scale so there's no clipping
            CGFloat scale = widthScale < heightScale ? widthScale : heightScale;

            imageWidth *= scale;
            imageHeight *= scale;
        }

        // If you want to center vertically, horizontally, or both,
        // modify the origin below.

        CGRect destRect = CGRectMake( printableRect.origin.x,
                                      printableRect.origin.y,
                                      imageWidth,
                                      imageHeight );

        // Use UIKit to draw the image to destRect.
        [self.image drawInRect:destRect];
    }
    else
    {
        NSLog( @"no image to print" );
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-18T21:01:36.233

```
UIImage *image = [UIImage imageNamed:@"myImage"];
    [image drawInRect: destinationRect];
    UIImage *thumbnail = UIGraphicsGetImageFromCurrentImageContext();
UIImageWriteToSavedPhotosAlbum(image,nil,nil,nil); 
```

destinationRect 将根据缩小版本的尺寸进行调整。

# python - Eclipse/Ant md5 不匹配任何其他 md5

> ID：10231153
> 
> 赞同：0
> 
> 时间：2012-04-19T15:11:38.947
> 
> 标签：python, eclipse, ant, md5

所以我仍然在努力遵循这个：[http ://code.google.com/p/dkpro-core-asl/wiki/MyFirstDKProProject](http://code.google.com/p/dkpro-core-asl/wiki/MyFirstDKProProject)

我在另一个地方遇到了非常奇怪的 MD5 问题，我不明白为什么我的 Eclipse/Ant 计算的 md5 与我可以使用 md5sum (cygwin) 或 Python 计算的 md5 不同！

Eclipse/蚂蚁味精：

```
BUILD FAILED

D:\eclipseWorkspace\maven.1334761781732\branches\1.2.x\de.tudarmstadt.ukp.dkpro.core.treetagger\src\scripts\build.xml:34: The following error occurred while executing this line:
D:\eclipseWorkspace\maven.1334761781732\branches\1.2.x\de.tudarmstadt.ukp.dkpro.core.treetagger\src\scripts\build.xml:311: The following error occurred while executing this line:
D:\eclipseWorkspace\maven.1334761781732\branches\1.2.x\de.tudarmstadt.ukp.dkpro.core.treetagger\src\scripts\build.xml:451: MD5 checksum mismatch for [la-tagger-little-endian.par]. 
Please verify the checksum and if necessary update this script. 
Expected: f959f8633ef842f069f0331ad19dc8b4
Actual  : bde1f6a63b2c5a658ba25a8eb90832a8 
```

好的，这是可能的，因为文件可能在 FTP 上发生了更改，这是 ANT 的 build.xml 文件的一部分：

```
<target name="la">
    <property name="version.la" value="2011050700"/>

    <install-model-file url="ftp://ftp.ims.uni-stuttgart.de/pub/corpora/latin-par-linux-3.2.bin.gz"
        type="tagger" endianness="little-endian" language="la" encoding="ISO-8859-1"
        md5="f959f8633ef842f069f0331ad19dc8b4"/>
</target> 
```

对我来说事情变得很奇怪的地方是：

使用 CYGWIN（通过 FTP 手动下载文件，使用 filezilla，二进制模式或自动，当然不是 ascii）：

```
$ md5sum latin-par-linux-3.2.bin.gz
e77493eed28857bf93aca91c2a6e5a9b *latin-par-linux-3.2.bin.gz 
```

使用蟒蛇：

```
import urllib
import hashlib
data = urllib.urlopen("ftp://ftp.ims.uni-stuttgart.de/pub/corpora/latin-par-linux-3.2.bin.gz").read()
md5 = hashlib.md5()
md5.update(data)
print md5.hexdigest()
e77493eed28857bf93aca91c2a6e5a9b 
```

或者

```
def md5_for_file(filePath):
    md5 = hashlib.md5()
    file = open(filePath, 'rb')
    while True:
        data = file.read(8192)
        if not data:
            break
        md5.update(data)

    file.close()   
    return md5.hexdigest()

print md5_for_file(r"D:\ftp.ims.uni-stuttgart.de.pub.corpora.20120419\latin-par-linux-3.2.bin.gz")
e77493eed28857bf93aca91c2a6e5a9b 
```

并且还使用网络上的免费软件来计算 MD5，它们都相互匹配，但与 ANT 计算为“实际”的不同！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:26:21.973

为了手动计算 md5，您应该先提取文件。

使用 gunzip 或 7zip。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-22T08:19:14.030

我是 DKPro 核心开发人员。我们进行这些 MD5 检查的原因是我们希望在远程文件更改而不另行通知时注意到这一点。

您不必自己计算 MD5 和。该脚本告诉您它知道哪个 MD5 以及它实际得到了什么。如果您希望脚本继续运行，只需将 build.xml 中记录的 MD5 更新为它告诉您的是“实际的”。但是，您还应该更新版本。

以下段落来自我们的[wiki](http://code.google.com/p/dkpro-core-asl/wiki/PackagingResources#MD5_checksum_check_fails)，并解释了其背后的基本原理：

> 并非所有资源都由其维护者正确版本化。我们观察到资源从一天到另一天都在变化，而没有任何公告或版本号的增加（如果有的话）。因此，我们根据 build.xml 文件中存储的 MD5 校验和验证所有资源。这样，我们可以注意到远程资源是否已更改。发生这种情况时，我们会在 build.xml 文件中添加一条注释，指示我们何时注意到 MD5 更改会更新相应资源的版本。
> 
> 由于我们并非每天都测试 build.xml 文件，因此您在尝试自己打包资源时可能会遇到 MD5 校验和错误。如果发生这种情况，请使用文本编辑器打开 build.xml 文件，找到失败的 MD5 校验和，更新它并更新相应资源的版本。您也可以在[DKPro Core User Group](https://groups.google.com/forum/#!forum/dkpro-core-user)上告诉我们，我们将更新 build.xml 文件。

顺便提一句。同时，本教程已更改为使用我们可以为其分发模型的不同组件，因此这应该不再是问题了。

# ios - 有谁知道如何从 Adob e DPS 应用程序中的 WebView 访问 CoreData？

> ID：10231154
> 
> 赞同：0
> 
> 时间：2012-04-19T15:11:43.267
> 
> 标签：ios, core-data, uiwebview, adobe, local-storage

当 IOS5 出来时，Apple 使 localStorage 不持久（http://www.sencha.com/blog/html5-scorecard-the-new-ipad-and-ios-5-1）。虽然 PhoneGap 应用程序可以使用插件解决此问题，但我们正在尝试在 Adob​​e DPS 应用程序中执行此操作，该应用程序无法直接访问 IOS 原生 API，也没有插件模型。

我们已经想到了使用 cookie 来持久化非常小的数据的半丑陋的解决方案，但这对于需要离线存储的较大的内容块（例如 XML 文件和图像）来说并不是一个很好的解决方案。有人有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:15:23.547

如果不直接访问 IOS 原生 API，您肯定无法访问 CoreData。我想说您唯一的选择是按照您的建议使用 cookie。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-16T19:33:57.680

答：不，您不能从 Adob​​e DPS 应用程序中的 Web 视图访问任何本机 API，但您可以使用 Web 存储。

作为 cookie（数据限制相对较低）的替代方案，您可以使用[WebSQL 或 localStorage](http://diveintohtml5.info/storage.html)。

我已经成功地在 DPS 应用程序中使用了这两个 :)

有趣的是，我发现 localStorage 比 webSQL 好用得多，但是如果您了解 SQL 并且需要存储复杂的关系，它可能会满足您的需求。

# flash - Adobe Flash 保存中的网络摄像头

> ID：10231156
> 
> 赞同：0
> 
> 时间：2012-04-19T15:11:49.367
> 
> 标签：flash, actionscript, webcam

我在 Flash 上制作了一个 photobooth 应用程序，它可以很好地拍摄图像并且您可以保存图像但是我希望它在按下保存按钮而不打开文件目录的情况下自动保存到文件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T02:08:58.563

使用 Flash Player，您最好的选择是将数据保存到本地[`SharedObject`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/SharedObject.html)（或多个）。要显式保存到文件系统，播放器将需要一个文件对话框。

由于您正在保存图像，因此您可能需要更改所需磁盘空间的默认配置，以尽量减少用户提示。

使用 AIR，您可以访问`File`and `FileStream`，这将允许将数据保存到任意位置而无需提示。

# objective-c - NSNotificationCenter - 在不阻塞主线程的情况下等待通知发布的方式？

> ID：10231157
> 
> 赞同：1
> 
> 时间：2012-04-19T15:11:56.907
> 
> 标签：objective-c, cocoa, nsnotificationcenter, nsnotifications

我正在使用 AFNetworking 客户端对象，它对 XML 文档发出异步请求并对其进行解析。

还使用**NSNotificationCenter**在文档完成解析时发布通知。

有没有办法在不阻塞主线程的情况下*等待*发布通知？

例如代码：

```
-(void)saveConfiguration:(id)sender {

    TLHTTPClient *RESTClient = [TLHTTPClient sharedClient];

    // Performs the asynchronous fetching....this works. 
    [RESTClient fetchActiveUser:[usernameTextField stringValue] withPassword:[passwordTextField stringValue]];

    /*
     * What do I need here ? while (xxx) ?
     */

    NSLog(@"Fetch Complete.");

} 
```

基本上我想知道在上述指定区域中我需要什么样的代码来确保函数*等到*提取完成？

就像现在一样，我将看到*“获取完成”。*在获取完成之前在调试控制台中。

我尝试在 TLHTTPClient 类中添加一个 BOOL 标志：

```
BOOL fetchingFlag; 
```

然后尝试：

```
while([RESTClient fetchingFlag]) { NSLog(@"fetching...); } 
```

当此类收到通知时，它会设置 RESTClient.fetchingFlag = FALSE; 从技术上讲，哪个应该杀死while循环？除了我的while循环无限运行？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T17:56:12.197

> 基本上我想知道在上述指定区域中我需要什么样的代码来确保函数等到提取完成？

你不需要*代码*。开始 fetch 后不要在方法中放任何东西，什么都不会发生。您的程序将“等待”（实际上它会处理其他输入），直到收到通知。

*在通知处理程序方法*中，放置完成获取时需要执行的所有内容。这是通知和其他回调方案的（其中一个）点——您的对象在收到该采取行动的通知之前不会做任何进一步的事情。

> 有没有办法在不阻塞主线程的情况下等待发布通知？

这正是它的工作原理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T17:29:04.380

如果您不需要在任务完成时通知多个对象，您可以在`-fetchActiveUser:withPassword:`方法中添加一个完成处理程序（objc 块）（这样它就会变成类似`-fetchActiveUser:withPassword:completionHandler:`并添加要在完成处理程序中执行的代码。

举个例子，假设您的`-fetchActiveUser:withPassword:completionHandler:`方法如下所示：

```
- (void)fetchActiveUser:(NSString *)user 
           withPassword:(NSString *)pass 
      completionHandler:(void (^)(TLUser *user, NSError *error))handler
{
    NSURL *URL                   = [NSURL URLWithString:@"http://www.website.com/page.html"];
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:URL];    
    NSOperationQueue *queue      = [NSOperationQueue currentQueue];
    [NSURLConnection sendAsynchronousRequest:request 
                                       queue:queue 
                           completionHandler:^ (NSURLResponse *response, NSData *data, NSError *error) 
    {
        if (!handler) 
        { 
            return 
        };

        if (data) 
        {
            TLUser *user = [TLUser userWithData:data];

            if (user)
            {
                handler(user, nil);
            }
            else
            {
                NSError *error = // 'failed to create user' error ...
                handler(nil, error);
            }
        }
        else
        {
            handler(nil, error);
        }
    }];
} 
```

每当任务完成时，都会调用完成处理程序。如果出现问题（连接错误、解析时数据格式更改等），它将返回 TLUser 对象或错误。

您将能够像这样调用该方法：

```
- (void)saveConfiguration:(id)sender 
{
    TLHTTPClient *RESTClient = [TLHTTPClient sharedClient];

    // Performs the asynchronous fetching

    [RESTClient fetchActiveUser:[usernameTextField stringValue] 
                   withPassword:[passwordTextField stringValue] 
              completionHandler:^ (TLUser *user, NSError *error)
    {
        if (user)
        {
            NSLog(@"%@", user);
        }
        else
        {
            NSLog(@"%@", error);    
        }
    }];
} 
```

当然，在这个例子中，我使用了 NSURLConnection 的异步构建方法而不是 AFNetworking，但是您应该能够了解大致的概念。

# cocoa - NSButton 并不总是响应鼠标点击

> ID：10231170
> 
> 赞同：2
> 
> 时间：2012-04-19T15:12:36.553
> 
> 标签：cocoa, onclick, transparency, nsbutton

这是我的问题，我有一个无笔尖的应用程序，这个应用程序显示（具有淡入/淡出效果）一个看起来像 10.8 通知的 NSWindow。

在这个通知上，我有 2 个 NSButtons，它们是这样以编程方式创建的：

```
 NSImage *btnNeutral = [[NSImage imageNamed:@"btn-toaster-n.png"] retain];
    [btnNeutral setTemplate:NO];
    NSImage *btnPressed = [[NSImage imageNamed:@"btn-toaster-clic.png"] retain];
    [btnPressed setTemplate:NO];

    m_connectButton = [[NSButton alloc] initWithFrame:NSMakeRect(284, 49, 77, 22)];
    [m_connectButton setTarget:self];
    [m_connectButton setAction:@selector(connect:)];
    [m_connectButton setImage:btnNeutral];
    [m_connectButton setAlternateImage:btnPressed];
    [m_connectButton setButtonType:NSMomentaryChangeButton];
    [[m_connectButton cell] setImageDimsWhenDisabled:NO];
    [m_connectButton setBordered:NO];
    [m_connectButton setFocusRingType:NSFocusRingTypeExterior];
    [m_connectButton setTitle:Localizer::getInstance()->getLocalizedString(@"SYSTRAY_BALLOON_CONNECT_ACTION")];
    [m_connectButton setEnabled:YES];
    [self addSubview:m_connectButton]; 
```

注意：我的 NSWindow 是透明的，我的 NSView 是透明的，但使用 NSImage 进行蒙皮，我的按钮也是如此。

问题：当我单击 2 个按钮之一时，它会工作 5 次中的 1 次...

问题出在哪里？线程问题？透明度 ？

感谢您的输入 ！

**@Rob Keniger**：是的，我有一个运行循环，我用这个初始化我的应用程序：

```
[NSApplication sharedApplication]; 
```

我也有一个动态的 NSMenuBar 是那个运行良好的应用程序。

**编辑** 我找到了一种解决方法，但我想知道我在这里缺少什么。我只是将按钮的初始化从我的自定义视图的 initWithFrame 方法放到了我的窗口的 initWithContentRect 方法中，该方法托管了这个相同的视图。知道为什么它会这样工作吗？

# mercurial - tortoisehg 一步提交推送 - 如何以及日志文件在哪里

> ID：10231176
> 
> 赞同：8
> 
> 时间：2012-04-19T15:12:58.717
> 
> 标签：mercurial, tortoisehg, mercurial-hook, mercurial-extension, tortoisehg-2.0

我正在使用带有 Tortoisehg 2.3 的 win xp。我使用 bit bucket 来备份我的个人源代码。（很少用于真正的版本控制，更多的是作为源备份存储）。现在我必须右键单击我的存储库，选择提交，然后输入提交消息（我选择只复制我上次使用的相同消息，有一个下拉菜单可以执行此操作），然后单击提交。然后我再次右键单击并选择同步并通过此选项最终推送。我可以使用工作台并做类似的事情。我想优化这个过程，所以我决定只写一个 dos bat 脚本来提交和推送。当我按下 Tortoisehg 时，会向窗口吐出 hg 命令，你可以看到它并从这里剪切和粘贴。对于提交，它并没有显示它实际上在做什么。当我很久以前使用 TortoiseSVN 时，我记得有一个日志文件，其中存储了所有执行的 svn 命令以进行调试。所以我开始搜索 TortoiseHg 日志文件。

有谁知道：

1) Tortoisehg 是否在某个地方有一个日志文件，它存储所有执行的 mercurial 命令以及所有命令行选项？

2）有没有更好的方法来进行一步提交推送（通过 Tortoisehg gui 或 bat 或一些插件/扩展等）？

问候

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-19T19:25:15.567

TortoiseHg 实际上有一个选项可以做到这一点：

1.  在您的提交窗口中，单击您一直在使用的“复制消息”按钮旁边的“选项”按钮。
2.  这会弹出一个带有几个选项的窗口 - 第三个是“Push After Commit”。勾选那个。
3.  在选项旁边的框中输入“默认”
4.  点击“Save in Repo”以便下次保存

现在，每次您从 TortoiseHg 提交时，它都会推送到默认推送目标。需要注意的一点是，如果您从命令行提交，这不会导致自动推送，而 Martin 的解决方案会。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-19T16:19:35.920

> 1) Tortoisehg 是否在某个地方有一个日志文件，它存储所有执行的 mercurial 命令以及所有命令行选项？

TortoiseHg 实际上与 TortoiseSVN 关系不大——这两个项目几乎没有共享代码，并且由不同的团队开发。所以我不认为 TortoiseHg 有一个日志文件，即使 TortoiseSVN 有一个。

> 2）有没有更好的方法来进行一步提交推送（通过 Tortoisehg gui 或 bat 或一些插件/扩展等）？

您可以设置一个提交后挂钩。将此添加到`.hg\hgrc`存储库的文件中（根据需要创建文件）：

```
[hooks]
post-commit = hg push 
```

这样，您将`hg push`在每次提交后运行，即使提交是从 TortoiseHg 完成的。

# genetic-programming - 遗传编程的阶段

> ID：10231177
> 
> 赞同：2
> 
> 时间：2012-04-19T15:13:00.640
> 
> 标签：genetic-programming

在进化遗传程序时，所需时间如何在不同发育阶段之间分配？我的意思是：是否有 90% 的时间用于变得比随机程序好一点，之后将程序改进到最终版本不是很耗费计算量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T08:43:03.060

大多数元启发式算法（包括我认为的遗传算法）都有像这张图片上的绿线和红线一样的进步。他们试图尽快达到最好的分数，但要找到更好的分数变得越来越难。

![阴谋](../Images/db303e8277d7911575db12970ae7c082.png)

然而，一些（如模拟退火，蓝线）可以被告知他们将被给予的时间量，并据此表现出不同的行为。在这种情况下，您可以获得更线性的线条。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T20:40:15.967

一般来说，早期进展更快，后代进展缓慢。但这确实取决于问题的性质。为什么不在几个不同的问题上进行测试并绘制进度呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T21:32:50.910

一个近似的指示可以是程序的大小。如果程序大小变得稳定，但您注意到适应度仍在提高，那么很可能所有随机程序都被淘汰了。因此，适应度的提高可以归因于系数的微小数值变化。

# listview - GroupView 是否在 OwnerData 模式下的 TListView 中工作？

> ID：10231179
> 
> 赞同：2
> 
> 时间：2012-04-19T15:13:04.373
> 
> 标签：listview, delphi, delphi-xe2, tlistview

我正在尝试为 Delphi XE2 中的 TListView 实现“排列方式”功能。在表单设计器中（如果我关闭 OwnerData）我可以让组显示并向他们添加项目

但是，如果我尝试设置

```
 procedure TMyForm.LVData(Sender: TObject; Item: TListItem);
  Item.GroupID := 0; 
```

我的列表项都没有放在组中。

* * *

*您可能还想知道的敷衍信息*

1.  ListView 处于报告模式
2.  为应用程序启用了主题（在 Windows 7 上运行）
3.  GroupView 已启用
4.  是的，我有一个 ID 为 0 的组

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:18:34.910

Upon further googling, the [answer is no](http://msdn.microsoft.com/en-us/library/windows/desktop/bb774735%28v=vs.85%29.aspx).

> The following messages are not supported under the LVS_OWNERDATA style: **LVM_ENABLEGROUPVIEW**, LVM_GETITEMTEXT, LVM_SETTILEINFO, and LVM_MAPIDTOINDEX.

That would be some helpful info in the Embarcadero Help file and Delphi IDE.

(maybe uncheck groupview when owner data is checked, eh?)

# php - 解析 HTML 并替换 DIV 中的内容

> ID：10231183
> 
> 赞同：0
> 
> 时间：2012-04-19T15:13:12.313
> 
> 标签：php, html, parsing

我想知道如何在 HTML 页面中找到 DIV 标记。这是因为我想用不同的链接替换该 DIV 内的链接。我不明白我需要什么确切的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:22:39.117

首先，请注意 PHP 不会在*客户端*做任何事情。但你应该已经知道了。您应该使用 file_get_contents 将网页作为字符串读取（或由库提供的用于 html 解析的内容）。

已经有一个问题解释了如何以任何方式解析 html：[Robust and Mature HTML Parser for PHP](https://stackoverflow.com/questions/292926/robust-mature-html-parser-for-php)

如果它不符合您的需求，请尝试在 google 上搜索：*php html parsing*，我找到了一些库

例如，我找到的这个库允许您找到所有标签：[http ://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)

请注意，这不是一个好方法，我建议您将 html 页面更改为 PHP 页面，并插入一些代码来代替 A 标记。这将使一切变得更容易。

最后一件事，如果 html 页面是静态的（它不会改变），您可以轻松地使用行计数来获取从 X 行到 Y 行的内容，放置您自定义的 A-tags，然后从 J 读取到文件末尾。

总之祝你好运。

# asp.net - 是否允许在 asp .net Web 角色中进行跟踪？

> ID：10231185
> 
> 赞同：0
> 
> 时间：2012-04-19T15:13:13.140
> 
> 标签：asp.net, azure, azure-web-roles

我正在尝试开发一个 asp.net 网络角色，它允许在例如单击按钮时进行跟踪。我已经尝试了很多东西，即我也尝试了我在问题“ [Trace.WriteLine in ASP.NET Azure](https://stackoverflow.com/q/4496027/199220) ”中的建议，但它不适用于我。此外，在执行建议作为该问题的答案时，在我看来，这是一条错误消息：

> 第 10 行：添加 type="Microsoft.ServiceHosting.Tools.DevelopmentFabric.Runtime.DevelopmentFabricTraceListener, Microsoft.ServiceHosting.Tools.DevelopmentFabric.Runtime, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:43:32.930

您在此处添加的**DevelopmentFabricTraceListener仅在模拟器中运行时可用。**您不能在以下情况下使用它：

*   部署到 Windows Azure（暂存/生产）
*   直接启动web项目（而不是启动云项目）

您是如何启动 PHP Web 应用程序的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T16:17:31.340

一种解决方案是在站点级别启用跟踪并浏览 trace.axd 文件。如果您使用 Trace.Warn，它将在报告中显示为红色，以便于查看。

[http://msdn.microsoft.com/en-us/library/wwh16c6c.aspx](http://msdn.microsoft.com/en-us/library/wwh16c6c.aspx)

对于跟踪侦听器，您应该使用：

```
type="Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorTraceListener, Microsoft.WindowsAzure.Diagnostics, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" 
```

那将在 Azure 中工作。

看一眼：

[http://www.azuresupport.com/2010/03/getting-started-with-windows-azure-diagnostics-and-monitoring/](http://www.azuresupport.com/2010/03/getting-started-with-windows-azure-diagnostics-and-monitoring/)

# asp.net - 调用的目标已引发异常 - App_Code.dll 中的 InvalidCastException

> ID：10231187
> 
> 赞同：0
> 
> 时间：2012-04-19T15:13:18.067
> 
> 标签：asp.net, asp.net-3.5

我有一个 asp.net 应用程序，其中收到以下错误消息：-

```
Exception: System.Reflection.TargetInvocationException

Message: Exception has been thrown by the target of an invocation.

Stack Trace:
at System.RuntimeMethodHandle._InvokeMethodFast(Object target, Object[] arguments, SignatureStruct& sig, MethodAttributes methodAttributes, RuntimeTypeHandle typeOwner)
at System.RuntimeMethodHandle.InvokeMethodFast(Object target, Object[] arguments, Signature sig, MethodAttributes methodAttributes, RuntimeTypeHandle typeOwner)
at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, Boolean skipVisibilityChecks)
at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
at System.Web.UI.WebControls.ObjectDataSourceView.InvokeMethod(ObjectDataSourceMethod method, Boolean disposeInstance, Object& instance)
at System.Web.UI.WebControls.ObjectDataSourceView.ExecuteSelect(DataSourceSelectArguments arguments)
at System.Web.UI.DataSourceView.Select(DataSourceSelectArguments arguments, DataSourceViewSelectCallback callback)
at System.Web.UI.WebControls.DataBoundControl.PerformSelect()
at System.Web.UI.WebControls.BaseDataBoundControl.DataBind()
at System.Web.UI.WebControls.FormView.DataBind()
at System.Web.UI.WebControls.BaseDataBoundControl.EnsureDataBound()
at System.Web.UI.WebControls.FormView.EnsureDataBound()
at System.Web.UI.WebControls.CompositeDataBoundControl.CreateChildControls()
at System.Web.UI.Control.EnsureChildControls()
at System.Web.UI.Control.PreRenderRecursiveInternal()
at System.Web.UI.Control.PreRenderRecursiveInternal()
at System.Web.UI.Control.PreRenderRecursiveInternal()
at System.Web.UI.Control.PreRenderRecursiveInternal()
at System.Web.UI.Control.PreRenderRecursiveInternal()
at System.Web.UI.Control.PreRenderRecursiveInternal()
at System.Web.UI.Control.PreRenderRecursiveInternal()
at System.Web.UI.Control.PreRenderRecursiveInternal()
at System.Web.UI.Control.PreRenderRecursiveInternal()
at System.Web.UI.Control.PreRenderRecursiveInternal()
at System.Web.UI.Control.PreRenderRecursiveInternal()
at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) 
```

为了调试错误，我已将 EnablePartialRendering 设置设置为 false，但这并没有帮助，并且错误以完全相同的方式显示。

我唯一的线索是，在调试的输出窗口中，我看到了这条消息：-'App_Code.iqmc5gba.dll 中发生了'System.InvalidCastException' 类型的第一次机会异常'

虽然这表明错误发生在 App_Code 文件夹中保存的代码中，但我实际上并不明智，因为有 211 个文件似乎对 dll 的内容有贡献，因为它们都被命名为 App_Code.iqmc5gba.nnn .cs 其中 nnn 是 0 到 210 之间的数字

在发生错误时，代码正在获取数据以在表单视图中显示记录。**该错误仅发生在我目前可以看到的数据库中的一条记录上。**

是否有人知道我可以使用任何技术来尝试识别在遇到 invalidcastexception 时正在执行的代码行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:24:42.873

这通常发生在读取数据时（例如，使用数据读取器），并且当您实际期望它至少具有某个值时，某些列返回 null。考虑这段代码：

```
 int age = (int)reader["age"]; //will throw ClassCastException if null 
```

如果由于某种原因结果集在`age`列上包含一个空值，则保存的值`reader["age"]`将不是整数，而是一个不同类型的[DBNull.Value ；](http://msdn.microsoft.com/en-us/library/system.dbnull.value.aspx)因此 ClassCastException。

如果您无权访问源代码，最好的办法是将好记录与坏记录进行比较，并确保两条记录上的对应列都有值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T05:52:57.063

我遇到了同样的问题。不确定您是否已解决问题，但 Icarus 在正确的路径上。我发现在某些情况下，您需要为要创建的帐户设置安全问题。我通过在 VS2012 的 Project 选项卡下打开 ASP.Net Config 解决了这个问题。单击提供程序选项卡并选择一个提供程序进行站点管理（在我的情况下为单个）。一旦它处于活动状态并且您测试连接，当您返回添加新用户时，将有一个输入安全问题和答案的选项。这似乎可以解决问题。

# python - 使用 Python 抓取网页

> ID：10231189
> 
> 赞同：0
> 
> 时间：2012-04-19T15:13:28.063
> 
> 标签：python, python-3.x, web-crawler

我有一个包含 IMDB 前 250 部电影的 250 个 URL 的种子文件。

我需要抓取它们中的每一个并从中获取一些信息。我创建了一个函数，它获取电影的 URL 并返回我需要的信息。它工作得很好。我的问题是当我尝试在所有 250 个 URL 上运行此功能时。在成功抓取一定数量（不是恒定的！）的 URL 后，程序停止运行。python.exe 进程占用 0% CPU 并且内存消耗不会改变。经过一些调试，我认为问题出在解析上，它只是停止工作，我不知道为什么（卡在 find 命令上）。

我使用 urllib2 来获取 URL 的 HTML 内容，而不是将其解析为字符串，然后继续到下一个 URL（我对每个字符串只进行一次，所有检查和提取的线性时间）。

知道什么会导致这种行为吗？

编辑：

我附上了一个有问题的函数的代码（还有 1 个，但我猜这是同一个问题）

```
def getActors(html,actorsDictionary):

    counter = 0
    actorsLeft = 3
    actorFlag = 0
    imdbURL = "http://www.imdb.com"

    for line in html:        
        # we have 3 actors, stop
        if (actorsLeft == 0):
            break

        # current line contains actor information
        if (actorFlag == 1):
            endTag = str(line).find('/"    >')
            endTagA = str(line).find('</a>')

            if (actorsLeft == 3):
                actorList = str(line)[endTag+7:endTagA]
            else:
                actorList += "&#44; " + str(line)[endTag+7:endTagA]

            actorURL = imdbURL + str(line)[str(line).find('href=')+6:endTag]
            actorFlag = 0
            actorsLeft -= 1
            actorsDictionary[actorURL] = str(line)[endTag+7:endTagA]

        # check if next line contains actor information
        if (str(line).find('<td class="name">') > -1 ):
            actorFlag = 1

    # convert commas and clean \n
    actorList = actorList.replace(",","&#44; ")
    actorList = actorList.replace("\n","") 

    return actorList 
```

我这样调用函数：

```
for url in seedFile:
    moviePage = urllib.request.urlopen(url) 
    print(getTitleAndYear(moviePage),",",movieURL,",",getPlot(moviePage),getActors(moviePage,actorsDictionary)) 
```

没有 getActors 功能，这很好用

这里没有引发异常（我现在删除了 try 和 catch），并且在一些迭代后它卡在了 for 循环中

编辑 2：如果我只运行 getActors 函数，它运行良好并完成种子文件中的所有 URL (250)

# c++ - 开源代码删除图像中的非文本区域？

> ID：10231192
> 
> 赞同：-4
> 
> 时间：2012-04-19T15:13:39.083
> 
> 标签：c++, image-processing, opencv, ocr, tesseract

我想从捕获的图像中删除任何非文本区域作为 OCR 引擎的预处理步骤，任何关于这样做的想法、演示、源代码都会有所帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T16:50:44.457

我想这个问题可能被视为您的另一个问题的可能重复：[*如何从图像中检测文本区域？*](https://stackoverflow.com/questions/10206526/how-to-detect-text-area-from-image)

如果没有反问！

无论如何，我宁愿用另一种方式来思考这个问题，即：**任何不是文本区域的东西都应该被忽略**。

在这一点上，我需要参考[我的另](https://stackoverflow.com/a/10232763/176769)一篇文章，其中显示了处理这种情况的方法。这个想法是您只将成功检测为文本的区域发送到 OCR 引擎，从而忽略图像中的所有非文本区域。

# java - 使用 ITextRenderer 从 HTML 生成 pdf 文件时出现编码问题

> ID：10231194
> 
> 赞同：3
> 
> 时间：2012-04-19T15:13:48.883
> 
> 标签：java, pdf, encoding, itext

我正在尝试使用包含非拉丁字符的 ITextRenderer 生成 pdf 文档。就我而言，这里是保加利亚语。

在调用 ITextRenderer 之前，我有一个*字符串内容*，经过一些处理（比如用 tidy 解析）看起来像这样（我可以通过调试看到这个值）

*刺内容*：

```
td class="description">Вид на потока</td>
td class="description">Статус на потока</td> 
```

以上只是我的字符串的一部分。此*内容*包含有效的 html 语法。我只是在这里放了一小部分，以澄清在这部分之前，我的编码是正确的，因为我能够阅读保加利亚语字符。

之后，将发生以下代码，该代码创建一个*文档*，将其放入*itextrenderer*并生成*pdf*文件。由于我能够成功生成英语的 pdf 文件，因此该代码已经**过测试并适用于****后期字符**的内容。

当我用**非拉丁字符**切换到另一种语言（保加利亚语）时，**就会出现问题**。生成的 PDF 会忽略所有保加利亚语字符，最终结果是包含大量空行的 pdf。这是生成pdf的代码部分

 **```
 DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();

        dbf.setValidating(false);
        dbf.setNamespaceAware(false);
        dbf.setFeature("http://xml.org/sax/features/namespaces", false);
        dbf.setFeature("http://xml.org/sax/features/validation", false);
        dbf.setFeature("http://apache.org/xml/features/nonvalidating/load-dtd-grammar", false);
        dbf.setFeature("http://apache.org/xml/features/nonvalidating/load-external-dtd", false);

        DocumentBuilder builder = dbf.newDocumentBuilder();

        Document doc = builder.parse(new ByteArrayInputStream(content.getBytes("UTF-8")));

        ByteArrayOutputStream outputStream = new ByteArrayOutputStream();
        InputStream is = null;

        ITextRenderer renderer = new ITextRenderer();

        renderer.getFontResolver().addFont("fonts/TIMES.TTF", BaseFont.IDENTITY_H, BaseFont.EMBEDDED);
        renderer.getFontResolver().addFont("fonts/TIMESBD.TTF", BaseFont.IDENTITY_H, BaseFont.EMBEDDED);
        renderer.getFontResolver().addFont("fonts/TIMESBI.TTF", BaseFont.IDENTITY_H, BaseFont.EMBEDDED);
        renderer.getFontResolver().addFont("fonts/TIMESI.TTF", BaseFont.IDENTITY_H, BaseFont.EMBEDDED);

        renderer.setDocument(doc, null);
        renderer.layout();
        renderer.createPDF(outputStream);
        outputStream.close();

        byte[] outputBytes = outputStream.toByteArray();
        is = new ByteArrayInputStream(outputBytes);
        response.setContentType("application");
        response.addHeader("Content-Disposition", "attachment; filename=\"" + "exported.pdf" + "\"");
        response.setContentLength(outputBytes.length);
        response.getOutputStream().write(inputStreamToBytes(is)); 
```

我尝试了几件事（主要与编码有关），但不幸的是我还没有找到解决方案。可能我在这里遗漏了一些明显的东西:)

我不确定这是否会增加任何价值，但我使用的是 spring，并且此代码在 Controller 中运行

任何帮助将不胜感激。

谢谢**

# php - 如何使用 PHP 将数据插入到表单中？

> ID：10231197
> 
> 赞同：0
> 
> 时间：2012-04-19T15:14:09.770
> 
> 标签：php, forms, automation

我有一个包含联系表单的网页，我想使用 PHP 填写表单预定字符串，然后提交表单。

表单本身会返回一条消息，说明它是否成功。我希望该消息随后被邮寄到带有警报的特定电子邮件（如果它不成功）。

此“脚本”将成为每天运行的 cron 作业的一部分，以确保表单正常工作并正确发送电子邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:23:50.703

`curl`可以很容易地做到这一点。

```
$ch = curl_init()
curl_setopt_array($ch, array(
   CURLOPT_POST => true
   , CURLOPT_POSTFIELDS => 'field1=val1&field2=val2'
   , CURLOPT_RETURNTRANSFER => true
   , CURLOPT_FOLLOWLOCATION => true
   , CURLOPT_URL => '/path/to/form/recipient'
));
$result = curl_exec($ch);
mail('admin', 'Cron Result', $result); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T15:27:58.283

出色地

用 php 填写和提交表单没有意义。提交表单只不过是一个带有通过 POST 或 GET 发送的参数的 http 调用。因此，建议在您从 crontab 执行的 php 页面中使用 curl 向 php 页面发出 http 请求，该请求基于他的业务逻辑测试是否一切正常，并在需要时发送邮件通知。

curl 很容易发送 POST 参数，如下所示[http://php.net/manual/en/book.curl.php](http://php.net/manual/en/book.curl.php)

# javascript - 如何在jQuery中互斥复选框上实现点击事件？

> ID：10231198
> 
> 赞同：0
> 
> 时间：2012-04-19T15:14:14.357
> 
> 标签：javascript, jquery, javascript-events

我有两个复选框：

```
<input id="outside" type="checkbox" value="1" data-gid="41820122" />
<input id="inside" type="checkbox" value="1" data-gid="41820122" /> 
```

我使它们相互排斥：

```
$(function(){
  //mutually exclusive checkboxes
  $("input[data-gid]").click(function(){
    var gid = $(this).attr('data-gid');
    var fid = $(this).attr('id');
    var checkboxes = $("input[data-gid=" + gid + "][id!=" + fid + "]");
    checkboxes.attr("checked", false);
   });
}); 
```

这工作正常。但我还想在“内部”复选框中添加额外的点击功能。我希望它在同一个表单上启用/禁用文本区域，所以我这样做了：

```
$('#application_inside').click(function() {
        if ($(this).is(':checked')) {
          return $('textarea').removeAttr('disabled');
        } else {
          return $('textarea').attr('disabled', 'disabled');
        }
 }); 
```

因此，如果选中“内部”复选框，则将启用 textarea，如果未选中，则应禁用 textarea。

问题是，如果选中了“内部”复选框，然后用户选中了“外部”复选框，则“内部”将变为未选中（应该如此），但 textarea 仍处于启用状态。这似乎是因为用户从未真正点击过“内部”复选框。

我尝试使用以下方法解决此问题：

```
$(function(){
  //mutually exclusive checkboxes
  $("input[data-gid]").click(function(){
    var gid = $(this).attr('data-gid');
    var fid = $(this).attr('id');
    var checkboxes = $("input[data-gid=" + gid + "][id!=" + fid + "]");
    checkboxes.attr("checked", false);
    checkboxes.triggerHandler("click"); //new code to fire any click code associated with unchecked boxes
   });
}); 
```

但这只会使浏览器陷入循环，因为两个不同的点击事件最终会相互调用。

如何保留我的互斥代码，同时仍然允许“内部”复选框的启用/禁用代码工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:50:34.173

您可以创建在**单击****#application_inside**时触发的**自定义事件**。此外，由于排他性，当您取消选中其他框时，您将触发此**自定义事件。**

 ******这是一个例子：http: [//jsfiddle.net/gs78t/2/](http://jsfiddle.net/gs78t/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T15:22:20.063

你可以试试这样的

```
var insideChanged = function() {
    if ($('#inside').is(':checked')) {
      return $('textarea').removeAttr('disabled');
    } else {
      return $('textarea').attr('disabled', 'disabled');
    }
};

$('#application_inside').click(insideChanged);

$(function(){
  //mutually exclusive checkboxes
  $("input[data-gid]").click(function(){
   var gid = $(this).attr('data-gid');
    var fid = $(this).attr('id');
    var checkboxes = $("input[data-gid=" + gid + "][id!=" + fid + "]");
    checkboxes.attr("checked", false);
    insideChanged(); //new code to fire any click code associated with unchecked boxes
   });
}); 
```******

# iphone - 使用 OpenGL ES 进行缩放和滑动

> ID：10231199
> 
> 赞同：10
> 
> 时间：2012-04-19T15:14:15.807
> 
> 标签：iphone, ios, opengl-es, 2d

我正在为 iOS 制作一个 2D 拼图，目前我正在尝试使用 UIPinchGestureRecognizer 实现缩放和滚动。

缩放是通过这种方式完成的：我有一个目标 2D 矢量，它是一个“缩放点”。代码是：

```
glTranslatef(target.x, target.y, 0);
glScalef(scale, scale, 0);
glTranslatef(-target.x, -target.y, 0); 
```

使用手势识别器以这种方式选择目标：

```
-(void)handlePinchGesture:(UIPinchGestureRecognizer*)recognizer
{
    if (UIGestureRecognizerStateBegan == [recognizer state])
    {
        view->setTarget([recognizer locationInView:self]);
    }
    // Rest of the code omitted
} 
```

一切正常。

最初这款游戏是为 iPad 设计的，但我希望它也能在 iPhone 和 iPod 上运行。但是 iPhone 和 iPod 有不同的纵横比。为了保持初始图片比例，我决定将初始 Y 比例放大一点。这也使得使用初始缩放因子上下滑动游戏场成为可能。代码是：

```
glTranslatef(target.x, target.y, 0);
glScalef(scale, scale * aspectRatio, 0);
glTranslatef(-target.x, -target.y, 0); 
```

如果游戏字段在屏幕上“居中”（例如，当机器人滑动方向（向上和向下）具有相等的空间时），这可以正常工作。但是如果我们向上或向下滑动区域并开始捏手势，游戏区域会再次跳到中心。

我知道我需要将手势位置平移一些偏移量，但我无法确定 3 天的准确度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T11:29:44.760

保存您在滑动时所做的翻译量，然后在每次调用 后`handlePinchGesture`，应用您在滑动时保存的翻译。

我希望它有所帮助。

# mysql - MySQL - 将更改从一个表插入到另一个表

> ID：10231205
> 
> 赞同：0
> 
> 时间：2012-04-19T15:14:30.533
> 
> 标签：mysql, sql, select, join, insert

我有一个简化的表格：

```
id     date     color
----------------------
1   2012-01-01  black
2   2012-01-02  red
3   2012-01-03  red
4   2012-01-04  red
5   2012-01-05  green 
```

现在我需要将此表中的颜色更改插入到新表中：

```
 date     before   now
----------------------------
2012-01-02  black    red
2012-01-04  red      green 
```

有人可以告诉我怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T15:25:30.743

将第二行与上一行进行比较：

```
SELECT cur.date, prev.color "before", cur.color now
FROM tbl cur
LEFT JOIN tbl prev ON cur.id = prev.id + 1
WHERE cur.id > 1 -- start detecting changes from second row
     AND prev.color <> cur.color 
```

现场测试：[http ://sqlfiddle.com/#!2/0c146/1](http://sqlfiddle.com/#!2/0c146/1)

**编辑**

即使在不连续的数据中也能工作。如果 MySQL 中有 CTE 功能，查询可能会更简洁

```
create table tbl
(
  id int, 
  date date,
  color text
);

insert into tbl(id,date,color)
select 1,'2012-1-1','black' union
select 2,'2012-1-3','red' union
select 3,'2012-1-7','red' union
select 4,'2012-1-15','red' union
select 5,'2012-1-21','green' ;

set @rx = 0;
set @ry = 0;

select cur.date, prev.color as "before", cur.color as "now"

from (select *, @ry := @ry + 1 as series from tbl order by date) as cur 
left join (select *, @rx := @rx + 1 as series from tbl order by date) as prev
on cur.series = prev.series + 1

where cur.series > 1
and prev.color <> cur.color 
```

现场测试：[http ://sqlfiddle.com/#!2/b9443/2](http://sqlfiddle.com/#!2/b9443/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T15:17:51.193

首先，重命名`color`列 -> `before`，然后添加`now`列（`default null`如果可能），然后`now`根据需要更新列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T15:21:38.897

如果我理解正确，存储过程就是您所需要的。

[存储过程](http://dev.mysql.com/doc/refman/5.0/en/stored-programs-defining.html)

# python - scipy.stats 可以识别和掩盖明显的异常值吗？

> ID：10231206
> 
> 赞同：24
> 
> 时间：2012-04-19T15:14:37.120
> 
> 标签：python, statistics, scipy, linear-regression

使用 scipy.stats.linregress 我正在对一些高度相关的 x,y 实验数据集执行简单的线性回归，并最初目视检查每个 x,y 散点图的异常值。更一般地（即以编程方式）有没有办法识别和掩盖异常值？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-23T09:43:34.617

`statsmodels`包里有你需要的。看看这个小代码片段及其输出：

```
# Imports #
import statsmodels.api as smapi
import statsmodels.graphics as smgraphics
# Make data #
x = range(30)
y = [y*10 for y in x]
# Add outlier #
x.insert(6,15)
y.insert(6,220)
# Make graph #
regression = smapi.OLS(x, y).fit()
figure = smgraphics.regressionplots.plot_fit(regression, 0)
# Find outliers #
test = regression.outlier_test()
outliers = ((x[i],y[i]) for i,t in enumerate(test) if t[2] < 0.5)
print 'Outliers: ', list(outliers) 
```

![示例图 1](../Images/25e3cb680407bb13e6ec906254b71742.png)

`Outliers: [(15, 220)]`

# 编辑

随着新版本的`statsmodels`，情况发生了一些变化。这是一个新的代码片段，显示了相同类型的异常值检测。

```
# Imports #
from random import random
import statsmodels.api as smapi
from statsmodels.formula.api import ols
import statsmodels.graphics as smgraphics
# Make data #
x = range(30)
y = [y*(10+random())+200 for y in x]
# Add outlier #
x.insert(6,15)
y.insert(6,220)
# Make fit #
regression = ols("data ~ x", data=dict(data=y, x=x)).fit()
# Find outliers #
test = regression.outlier_test()
outliers = ((x[i],y[i]) for i,t in enumerate(test.icol(2)) if t < 0.5)
print 'Outliers: ', list(outliers)
# Figure #
figure = smgraphics.regressionplots.plot_fit(regression, 1)
# Add line #
smgraphics.regressionplots.abline_plot(model_results=regression, ax=figure.axes[0]) 
```

![示例图 2](../Images/35f4edb7b0b59d1bca107da52a7909ab.png)

`Outliers: [(15, 220)]`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-20T02:49:46.733

scipy.stats 没有直接用于异常值的任何内容，因此回答一些链接和 statsmodels 的广告（这是 scipy.stats 的统计补充）

用于识别异常值

[http://jpktd.blogspot.ca/2012/01/influence-and-outlier-measures-in.html](http://jpktd.blogspot.ca/2012/01/influence-and-outlier-measures-in.html)

[http://jpktd.blogspot.ca/2012/01/anscombe-and-diagnostic-statistics.html](http://jpktd.blogspot.ca/2012/01/anscombe-and-diagnostic-statistics.html)

[http://statsmodels.sourceforge.net/devel/generated/statsmodels.stats.outliers_influence.OLSInfluence.html](http://statsmodels.sourceforge.net/devel/generated/statsmodels.stats.outliers_influence.OLSInfluence.html)

代替掩蔽，更好的方法是**使用稳健的估计器**

[http://statsmodels.sourceforge.net/devel/rlm.html](http://statsmodels.sourceforge.net/devel/rlm.html)

带有示例，不幸的是，这些图目前未显示 [http://statsmodels.sourceforge.net/devel/examples/generated/tut_ols_rlm.html](http://statsmodels.sourceforge.net/devel/examples/generated/tut_ols_rlm.html)

RLM 降低异常值的权重。估计结果有一个`weights`属性，对于异常值，权重小于1。这也可以用于查找异常值。`RLM`如果 有几个异常值，则也更稳健。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-19T15:46:58.920

> 更一般地（即以编程方式）有没有办法识别和掩盖异常值？

存在各种异常值检测算法；[scikit-learn](http://scikit-learn.org/stable/modules/outlier_detection.html)实现了其中的一些。

[免责声明：我是 scikit-learn 的贡献者。]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-04T14:57:13.383

也可以使用[scipy.optimize.least_squares](http://lagrange.univ-lyon1.fr/docs/scipy/0.17.1/generated/scipy.optimize.least_squares.html)限制异常值的影响。特别是，看一下`f_scale`参数：

> 内部和异常残差之间的软边距值，默认为 1.0。...这个参数对 loss='linear' 没有影响，但对于其他损失值来说它是至关重要的。

在页面上，他们比较了 3 个不同的功能： normal`least_squares`和涉及 的两种方法`f_scale`：

```
res_lsq =     least_squares(fun, x0, args=(t_train, y_train))
res_soft_l1 = least_squares(fun, x0, loss='soft_l1', f_scale=0.1, args=(t_train, y_train))
res_log =     least_squares(fun, x0, loss='cauchy', f_scale=0.1, args=(t_train, y_train)) 
```

[![最小二乘比较](../Images/3d78960979b3f87409581e377754a8dd.png)](https://i.stack.imgur.com/sDdWj.png)

可以看出，正态最小二乘法受数据异常值的影响要大得多，值得尝试不同`loss`的函数结合不同的`f_scales`. 可能的损失函数是（取自文档）：

```
‘linear’ : Gives a standard least-squares problem.
‘soft_l1’: The smooth approximation of l1 (absolute value) loss. Usually a good choice for robust least squares.
‘huber’  : Works similarly to ‘soft_l1’.
‘cauchy’ : Severely weakens outliers influence, but may cause difficulties in optimization process.
‘arctan’ : Limits a maximum loss on a single residual, has properties similar to ‘cauchy’. 
```

scipy 食谱[有一个](http://scipy-cookbook.readthedocs.io/items/robust_regression.html)关于鲁棒非线性回归的简洁教程。

# dns - 什么是亚马逊 53 号公路？

> ID：10231210
> 
> 赞同：7
> 
> 时间：2012-04-19T15:14:40.630
> 
> 标签：dns, amazon-route53

我偶然发现了 Amazon Route53。我不确定它的目的是什么。

我目前注册了一个域名。如果我确实使用了该服务，我会将我的域指向 Route53，以将其重定向到我的服务器吗？如果是这样，为什么不让我的域名直接指向我的服务器？也许我错过了重点。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:29:31.977

Amazon route 53 只不过是 DNS 服务器。Route 53 DNS 具有一些有助于与其他 EC2 服务集成的附加功能。

如果您希望使用它，请将您的域定义为使用 Route 53 名称服务器，而不是注册商或某些 3-rd 方名称服务器。

# spring - 将对象绑定到 apache mq jndi 提供程序

> ID：10231211
> 
> 赞同：0
> 
> 时间：2012-04-19T15:14:45.293
> 
> 标签：spring, jms, activemq

我在互联网上找到了许多示例，其中我可以使用带有 JNDI 的 spring 来设置 apache mq：

```
<bean id="jndiTemplate" class="org.springframework.jndi.JndiTemplate">
    <property name="environment">
        <props>
            <prop key="java.naming.factory.initial">org.apache.activemq.jndi.ActiveMQInitialContextFactory</prop>
            <prop key="java.naming.provider.url">tcp://localhost:61616</prop>
            <prop key="java.naming.security.principle">system</prop>
            <prop key="java.naming.security.credentials">credentials</prop>
        </props>
    </property>
</bean>

<bean id="jndiQueueConnectionFactory" class="org.springframework.jndi.JndiObjectFactoryBean">
    <property name="jndiTemplate" ref="jndiTemplate"/>
    <property name="jndiName" value="ConnectionFactory"/>
</bean> 
```

我找不到的是对象绑定到 JNDI 提供程序的位置。在上面的例子中，我不明白 ConnectionFactory 是从哪里来的？它似乎存在于上下文中，但是我应该编辑一个配置文件以确定哪些 java 对象被包含/构成它的一部分吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:20:44.703

您正在从外部 jndi-provider activemq 请求 jndi-objects。所以对**ConnectionFactory**对象的 jndi-lookup将通过 activemq 解决。

# python - 客户端下载完成时自动删除 Django 中服务器上的存档

> ID：10231221
> 
> 赞同：1
> 
> 时间：2012-04-19T15:15:24.497
> 
> 标签：python, django, download

在 Django 的服务器端代码中，我在服务器上下载一组文件并创建一个存档，然后将其发送到客户端进行下载。客户端下载完成或中止后，有没有办法自动删除此存档？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T14:20:56.000

在这种情况下，我通常使用 HttpResponse 将归档文件返回给用户，并将内容类型设置为“附件”。这样下载会自动开始，我不必保存存档文件。这种方法对您有帮助吗？

# macos - 在 Mac OS X 上编译带有 +clientserver 功能的 Vim 7.3

> ID：10231223
> 
> 赞同：15
> 
> 时间：2012-04-19T15:15:27.057
> 
> 标签：macos, vim, compilation, client-server

如何`clientserver`在 Mac OS X 上使用该功能编译 Vim？我有[vim-7.3.tar.bz2 源](http://www.vim.org/sources.php)

我知道 MacVim 内置了这个，**但它只在 GUI 运行时才有效**。我想使用 CLI 版本，因为使用 CLI 我的工作要容易得多（例如，我可以轻松切换到终端）。

我使用以下`./configure`选项编译了 Vim 7.3

```
./configure --enable-rubyinterp --enable-pythoninterp --with-features=huge 
```

我[在 Unix & Linux 上看过这个问题](https://unix.stackexchange.com/q/2807/1243)，但它只处理 Ubuntu 解决方案。另外，由于我启用了功能集，根据[vimdoc](http://vimdoc.sourceforge.net/htmldoc/various.html#+feature-list)`huge`，我应该期望：`+clientserver`

> 因此，如果一个特性被标记为“N”，它就包含在 Vim 的普通、大和巨大版本中。

## 更新：

服务器功能仅适用于 GUI MacVim。要重现这一点：

```
$ Applications/MacVim.app/Contents/MacOS/Vim --servername VIM 
```

在另一个控制台中：

```
$ vim --serverlist # does not output anything 
```

而如果我启动 GUI MacVim，

```
$ vim --serverlist
VIM1 
```

但我的要求是在 CLI Vim 中工作。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-02-12T15:16:53.997

您现在也可以使用[HomeBrew](http://brew.sh/)执行此操作：

```
brew install vim --with-client-server 
```

看起来[这是在 2013 年添加的](https://github.com/Homebrew/homebrew/pull/23355)，所以我不确定为什么没有更频繁地提及它。

万一您这样做是为了像我一样开始使用[Pterosaur](https://github.com/ardagnir/pterosaur)，在使用 HomeBrew 安装 vim 后，如果您也通过 HomeBrew 使用 MacVim，则可能必须强制使用符号链接。

```
brew link --overwrite macvim 
```

然后，只需在 Firefox页面中设置为，它应该可以工作`extensions.pterosaur.vimbinary`。我现在正在使用 Pterosaur 输入此内容，尽管 Python 偶尔会崩溃。`/usr/local/bin/vim``about:config`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-19T15:50:56.150

使用 MacPorts：

```
$ sudo port install vim +huge +gtk2 
```

在新窗口中：

```
$ /opt/local/bin/vim --servername FOO 
```

在另一个窗口中：

```
$ /opt/local/bin/vim --serverlist
FOO 
```

快的。简单的。

***编辑***

`+gtk2`使它工作所需的，是`+huge`不够的。实际上，我认为`+gtk2`只要您拥有`+x11`. 不幸的是，我不再使用我的 Mac，所以我无法尝试。整个过程大约需要3分钟，所以你可以试试。

***结束编辑***

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-20T06:42:22.453

我通过添加让它工作`--enable-gui=gtk2`

```
./configure --enable-rubyinterp --enable-pythoninterp --with-features=huge --enable-gui=gtk2 
```

然后从控制台运行：

```
$ vim --servername FOOBAR_SERVER 
```

从另一个控制台：

```
$ vim --serverlist
FOOBAR_SERVER 
```

或者在任何 Vim 实例中：

```
:echo serverlist()
FOOBAR_SERVER 
```

请注意，X11.app 也会启动，因为 Vim 服务器需要运行。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-19T15:19:58.520

您可以只运行`vim`MacVim 中包含的 CLI 版本。安装 MacVim`/Applications/MacVim.app`后，CLI 版本为：

```
/Applications/MacVim.app/Contents/MacOS/Vim 
```

这是使用`clientserver`功能编译的。您可以为此添加符号链接以将其放入您的`$PATH`.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-12-27T21:09:15.967

即使在阅读了所有这些答案之后，我也不得不花费几个小时来完成工作，所以我想为像我这样的人提供一些明确的步骤。

鉴于几乎所有 Mac 用户都在使用 Homebrew，我的解决方案是使用 Homebrew 进行安装。

1.  `brew cask install xquartz`
2.  启动 XQuartz。您可能需要更新它。
3.  注销并登录，或重新启动您的 Mac。
4.  `brew install vim --with-client-server`

现在如果你启动 vim，XQuartz 也会启动。如果您使用`--servername <name>`参数运行 vim，您将能够看到使用`--serverlist`选项的服务器。

但在此之后，您必须使用 vim 启动 XQuartz，并且您还必须做一些工作以使剪贴板再次工作。我找到[了一篇博客文章](http://www.markcampbell.me/2016/04/12/setting-up-yank-to-clipboard-on-a-mac-with-vim.html)并关注了它，但未能使其在剪贴板方面正常工作。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-19T15:18:40.917

您应该使用 MacVim 获得一个命令行可执行文件。

*   [如何从终端运行 mvim (MacVim)？](https://stackoverflow.com/questions/2056137/how-to-run-mvim-macvim-from-terminal).

# facebook - 如果用户的列表中没有任何朋友，如何跳过从应用程序邀请用户的请求对话框？

> ID：10231228
> 
> 赞同：0
> 
> 时间：2012-04-19T15:15:45.687
> 
> 标签：facebook, dialog, request

我正在使用 facebook 请求对话框来邀请我的朋友使用应用程序。我添加了 app_non_users 和 exclude_ids 来过滤用户。但是一旦我邀请了我所有的朋友，就需要跳过这个请求对话框。目前它显示消息没有结果并且无法重定向到画布页面

这是代码

```
$requests_url = "http://www.facebook.com/dialog/apprequests?app_id="
                . $appid . "&redirect_uri=" . $canvas_url."&message=" . $message. "&filters=" . json_encode($filters)."&exclude_ids=". json_encode($exclude_ids);

if (empty($_REQUEST["request"])) {
    echo("<script> top.location.href='" . $requests_url. "'</script>");           
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T16:59:03.547

您可以通过两种方式“询问”facebook：

(1) 使用[graph api](http://developers.facebook.com/docs/reference/api/)，您可以向*[/me/friends?fields=installed](http://developers.facebook.com/tools/explorer?method=GET&path=me/friends%3Ffields%3Dinstalled)*发出请求，该请求应返回用户列表，安装了该应用程序的用户将具有以下形式：

```
{
    "installed": true, 
    "id": "USER_ID"
} 
```

没有该应用程序的将是这种形式：

```
{
    "id": "USER_ID"
} 
```

然后遍历列表，检查有多少，如果它是 0 则不显示对话框。

(2) 您可以使用[FQL](http://developers.facebook.com/docs/reference/fql/user/)[查询](https://developers.facebook.com/tools/explorer?method=GET&path=fql%3Fq%3DSELECT%20uid%20FROM%20user%20WHERE%20not%20is_app_user%20and%20uid%20IN%20%28SELECT%20uid2%20FROM%20friend%20WHERE%20uid1%20%3D%20me%28%29%29)谁是未安装应用程序的朋友：

```
SELECT 
    uid
FROM 
    user 
WHERE 
    not is_app_user 
    AND 
    uid IN (SELECT uid2 FROM friend WHERE uid1 = me()) 
```

如果结果为空字符串，则所有朋友都拥有该应用程序。

# xcode - Cocoa 中的 JSON 解析仅显示前 20 个条目

> ID：10231229
> 
> 赞同：0
> 
> 时间：2012-04-19T15:15:52.400
> 
> 标签：xcode, json, macos, cocoa, parsing

**4月22日更新：**

*问题已解决：原来 API 需要 OAUTH 才能工作……这解释了为什么它会在浏览器中正确加载（我已经登录），而不是在 JSON 验证器或我自己的应用程序等其他应用程序中。*

我正在尝试编写一个类，它将在 Lion 上的 Xcode 4.3.2 中获取和解析 JSON 文件。我只写了几个星期的代码，如果这是一个有点愚蠢的问题，我很抱歉！代码似乎工作正常，除了只有 JSON 文件中的前 20 个条目显示（应该有 200 个）。知道为什么会这样吗？

```
 - (void) initJSON
{
NSString *urlstri = [[NSString alloc] initWithFormat:@"http://api.t.sina.com.cn/statuses/followers.json?source=?????&count=200&screen_name=%@", userName];
NSURL *newURL = [[NSURL alloc] initWithString:urlstri];
NSURLRequest *request = [NSURLRequest requestWithURL:newURL];

[NSURLConnection sendAsynchronousRequest:request 
                                   queue:[NSOperationQueue mainQueue] 
                       completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {
       [self performSelectorOnMainThread:@selector(fetchedData:) withObject:data waitUntilDone:NO];
                   }
       ];}
- (void) fetchedData:(NSData *)responseData {
//parse out the json data
NSError* error;
NSDictionary* json = [NSJSONSerialization 
                      JSONObjectWithData:responseData //1

                      options:kNilOptions 
                      error:&error];

NSArray* newestFollower = [json objectForKey:@"users"]; //2
fnumber = 0;
mnumber = 0;

int arraySize = [newestFollower count];
NSLog(@"%i",arraySize);

for (i=0; i<arraySize; ++i) {
    NSDictionary* userProfile = [newestFollower objectAtIndex: i];
    NSString* userGender = [userProfile objectForKey:@"gender"];
    //NSLog(@"%@", userGender);
    if([userGender isEqualToString:@"m"]){
        //NSLog (@"man");
        ++mnumber;
    }
    if([userGender isEqualToString:@"f"]){
        //NSLog(@"notman");
        ++fnumber;}
}

mOutput = [NSNumber numberWithInt:(mnumber)];
fObj = [NSString stringWithFormat:@"%i", fnumber];
mObj = [NSString stringWithFormat:@"%i", mnumber];
NSLog (@"Boys:%@", mObj);
NSLog (@"Girls:%@", fObj); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T17:06:49.800

我不知道这是否能解决您的问题，但您可以尝试使用 an`NSURLConnection`而不是同步`NSData` `dataWithContentsofURL`方法异步请求数据。

它看起来像这样：

```
- (void) initJSON
{
    NSString *urlstri = [[NSString alloc] initWithFormat:@"http://api.t.sina.com.cn/statuses/followers.json?source=??????&count=200&screen_name=%@", userName];
    NSURL *newURL = [[NSURL alloc] initWithString:urlstri];
    NSURLRequest *request = [NSURLRequest requestWithURL:newURL];

    [NSURLConnection sendAsynchronousRequest:request 
                                       queue:[NSOperationQueue mainQueue] 
                           completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {
            [self performSelectorOnMainThread:@selector(fetchedData:) withObject:data waitUntilDone:NO];
    }];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T18:00:13.300

编码可能存在问题。解析时某些字符可能会出现问题（我过去在 HTMLParser 库中遇到过这种情况）。

首先，您可以尝试设置不同的编码器。如果这不起作用，也许从内容字符串中替换有问题的字符。在过去的项目中，由于 HTML 解析器的问题，我使用了以下内容：

```
NSString *contents = [[NSString alloc] initWithData:data encoding:NSWindowsCP1252StringEncoding];

// for parsing this weird char has te be removed, else will only parse partially ...
contents = [contents stringByReplacingOccurrencesOfString:@"Ó" withString:@"O"]; 

data = [contents dataUsingEncoding:NSWindowsCP1252StringEncoding]; 
```

可悲的是，我无法找到更清洁的解决方案。

您应该尝试弄清楚您的内容是否有一些无法正确解析的特殊字符，并在解析之前从这些特殊字符中“清除”内容。

PS：来自Apple关于JSON序列化程序的文档

> 数据必须采用 JSON 规范中列出的 5 种支持的编码之一：UTF-8、UTF-16LE、UTF-16BE、UTF-32LE、UTF-32BE。数据可能有也可能没有 BOM。用于解析的最有效编码是 UTF-8，因此如果您可以选择对传递给此方法的数据进行编码，请使用 UTF-8。

# java - 这个带有捕获组和反向引用的正则表达式如何在 Java 中匹配？

> ID：10231230
> 
> 赞同：1
> 
> 时间：2012-04-19T15:16:04.220
> 
> 标签：java, regex

我很难理解某个 Java 正则表达式会匹配什么：

```
"<(\\w+)></\\1>" 
```

我已经阅读了这个[http://docs.oracle.com/javase/tutorial/essential/regex/](http://docs.oracle.com/javase/tutorial/essential/regex/)

但我仍然无法弄清楚那个表达式会匹配什么，尤其是那个`\1`部分。我可以看到这`<(\w+)>`是一个与任何单词匹配的所有格量词，但我不明白为什么`()`根据教程使用 which 来匹配一个组。

至于第二部分，我只是不知道`\1`会匹配什么。我试过了

```
"001123344556678899".replaceAll("\\1", ""); 
```

因为我认为它可能匹配一个数字，但它给了我我的字符串，因为没有被替换。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T15:19:47.533

它旨在匹配 XML/HTML 标记对，例如

```
<tag></tag> 
```

表示匹配第`\\1`一个匹配组，即括号中的内容。（双反斜杠是因为反斜杠需要在 Java 字符串文字中转义。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T15:22:28.117

我想你可能误解了教程。里面的任何东西`()`都是一个集合，所以`(\w{1})(\w{1})`这意味着你有 2 个集合，每个集合有 1 个字符。,`\1`引用第一组。因此，在您搜索和替换时更像是这样：

```
"1234234234234".replaceAll("(23)", "\\1ab") 
```

结果将是`"123ab423ab423ab..."`，`\1`返回您在第一组中匹配的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T16:02:53.260

只需刷新您对正则表达式反向引用（和捕获组）的理解，例如[这里](http://www.regular-expressions.info/named.html)。捕获组使用`()`和反向引用将被引用组捕获的数据替换。

然后使用[这个网站](http://www.regexplanet.com/advanced/java/index.html)来测试你的表达和你的数据，如下所示：

正则表达式：`<(\w+)></\1>`将成为`"<(\\w+)></\\1>"`具有如下输入的 Java 字符串`<body></body>`：

```
Test    Target String   matches()   replaceFirst()  replaceAll()    group(0)    group(1)

1       <body></body>   Yes         Yes             Yes             <body></body> body 
```

# ios - Core Text 设置默认颜色和特定单词的颜色

> ID：10231233
> 
> 赞同：3
> 
> 时间：2012-04-19T15:16:11.397
> 
> 标签：ios, colors, core-text

我对使用核心文本很陌生，而且我没有找到太多关于如何使用颜色属性的信息......如何设置默认文本颜色，然后更改特定范围的颜色？

我要做的是画一个简短的句子。我希望文本的默认颜色为浅灰色，然后将单个单词标记为红色以突出显示它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T18:14:17.053

在试图更好地解释我遇到的问题时，我发现了错误......我正在这样做

```
UIColor _textColor = [UIColor grayColor];
[string addAttribute:(id)kCTForegroundColorAttributeName value:(id)_textColor range:NSMakeRange(0, [string length])]; 
```

而不是这个

```
UIColor _textColor = [UIColor grayColor];   
[string addAttribute:(id)kCTForegroundColorAttributeName value:(id)_textColor.CGColor range:NSMakeRange(0, [string length])]; 
```

它有助于确保您使用正确的颜色对象！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T15:20:38.787

有两种方法可以解决这个问题

1）我创建了 UILable 和 UITextView 的子类，使用核心文本（CATextLayer）作为标签/文本视图上的层，NSAttributedString 将存储有关字体和颜色的所有信息

2) 你需要使用 NSAttributedString。检查 OHAttributedLabel，它扩展了 UILabel 并添加了对通过 NSAttributedString 以及其他帮助程序设置文本的支持。

希望这会有所帮助。

有关更多信息，请查看我的帖子：[如何更改 UITextView 中单词的颜色？](https://stackoverflow.com/questions/7447466/how-to-change-color-of-a-word-in-uitextview)

# c# - 替换 C# 中的特定十六进制偏移量

> ID：10231234
> 
> 赞同：0
> 
> 时间：2012-04-19T15:16:15.053
> 
> 标签：c#, hex, offset

我将如何用 C# 替换二进制文件中特定十六进制偏移量的内容？

为了更清楚，假设我的偏移量是 0x33347，它的内容是 06。我想将 06 更改为 17。我该怎么做？我对十六进制编辑的经验很少，所以我自己无法弄清楚任何事情，我有点迷茫。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T15:19:29.830

Using a [`FileStream`](http://msdn.microsoft.com/en-us/library/system.io.filestream.aspx), set the `Position` of the stream to the offset, then write the byte.

This will overwrite the current content with what you want.

```
using(var fs = new FileStream("path to file", 
                              FileMode.Open, 
                              FileAccess.ReadWrite))
{
    fs.Position = 0x33347;
    fs.WriteByte(Convert.ToByte(0x6));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T15:18:59.663

Open the stream in read-write mode, read up to your offset (or seek if your stream supports seeking), write your byte, flush and close the stream.

# .net - WCF 服务的 Unity 配置

> ID：10231236
> 
> 赞同：0
> 
> 时间：2012-04-19T15:16:21.973
> 
> 标签：.net, xml, wcf, unity-container, config

我正在尝试将 Unity 配置从代码移动到 Unity.config XML 文件，但由于某种原因，我无法将 WCF 服务注册到容器（老实说，我只是不知道如何）。

这是完美运行的代码：

```
var httpBinding = new BasicHttpBinding();
var endpointAddress = new EndpointAddress(serverIP);
var container = new UnityContainer();
container.RegisterType<IMyService, MyServiceClient>
                        (new ContainerControlledLifetimeManager(), new InjectionConstructor(new ResolvedParameter<BasicHttpBinding>("httpBinding"),
                                new ResolvedParameter<EndpointAddress>("endpointAddress"))); 
```

这是我在 Unity.config 中的内容：

```
 <typeAliases>
       <typeAlias alias="IMyService" type="MyService.IMyService,MyService" />
       <typeAlias alias="MyServiceClient" type="MyService.MyServiceClient,MyService" />
    </typeAliases>
    <containers>
       <container>
           <type name="httpBinding" type="System.ServiceModel.BasicHttpBinding, System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089, processorArchitecture=MSIL">
            <constructor>
             <param name="configurationName">
              <value value="MyService" />
             </param>
            </constructor>
           </type>        
           <type name="endpointAddress" type="System.ServiceModel.EndpointAddress, System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089, processorArchitecture=MSIL" />    
           <register type="IMyService" mapTo="MyServiceClient" />
       </container>
   </containers> 
```

显然这是行不通的。我得到的错误是： ***类型名称或别名 IMyService 无法解析。请检查您的配置文件并验证此类型名称。***

# visual-studio-2010 - Visual Studio 2010 - (OutOfMemoryException) & (理想状态下的内存增加)

> ID：10231237
> 
> 赞同：1
> 
> 时间：2012-04-19T15:16:21.937
> 
> 标签：visual-studio-2010

我注意到 devenv.exe 进程 - Visual Studio 2010 - 专业版中的内存（私人工作集）增加，即使它处于理想状态。有时，它会超过 1GB，并且经常崩溃并显示消息 (OutOfMemoryException) “没有足够的可用存储空间”。我受够了构建过程中频繁的 VS 崩溃，为此我不得不经常重启 VS 工作室。

我有

1.  有一个 4GB 内存 RAM
2.  我的解决方案中有大约 30 个项目
3.  在 microsoft connect 站点上应用了修补程序和
4.  如（http://stevenharman.net/blog/archive/2008/04/29/hacking-visual-studio-to-use-more-than-2gigabytes- of-memory.aspx）带有editbin选项以增加devenv.exe进程使用的堆栈大小（http://stackoverflow.com/questions/4189109/error-code-1073741515-when-using-editbin）

我想知道你们中是否有人对这个问题有任何解决办法。任何讨论或指示将不胜感激

```
Thanks 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:10:19.237

我也在寻找这个案例..我找到了一个扩展..可能对你有用。

[http://visualstudiogallery.msdn.microsoft.com/66350dbe-ed01-4120-bea2-5564eff7b0b2/](http://visualstudiogallery.msdn.microsoft.com/66350dbe-ed01-4120-bea2-5564eff7b0b2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T12:28:55.990

它发生了。尤其是在 VS 中构建大型项目时，请打开 Designers。我碰巧一天几次遇到这样的错误——也有很大的解决方案。真正帮助我摆脱此类问题的是在影子模式下构建解决方案的工具（在其他进程中启动 msbuild）。有几个工具 - 我推荐 NCrunch，因为我使用它。它主要是 TDD 工具，但在构建大型解决方案时非常方便。如果我需要在 VS2010 中构建解决方案，我仍然会得到 OutOfMemoryException - 例如为了运行 WinForms 设计器，但这是一种非常罕见的情况。

如果您使用测试，请尝试摆脱访问器。

我也有一些片段以提高 VS2010 的性能。也许它也减少了内存消耗（没有测量它 - 你可以尝试）

30% 加速工具 > 选项 -- 选中“显示所有选项” IntelliTrace -- 禁用 HTML 设计器 -- 禁用

启动速度提高 50% 工具 > 选项环境 > 加载项/宏安全性 - 取消选中“允许加载加载项组件”工具 > 扩展管理器卸载所有您不需要的。

工具 > 选项 > 环境 > 取消选中“根据客户端性能自动调整视觉体验”，然后取消选中“启用富客户端视觉体验”。工具>选项>环境>启动：启动时=“显示空环境”工具>选项>源代码控制设置为“无”

# jquery - 自动更新客户端数据

> ID：10231238
> 
> 赞同：0
> 
> 时间：2012-04-19T15:16:22.313
> 
> 标签：jquery, asp.net, ajax, data-binding

我在管理员用户界面上有许多控件，它们提供从数据库中派生的各种数据，即注册用户、站点访问者等，我想知道是否有一种方法可以自动更新数据客户端基于更新数据库中的值。

从本质上讲，它将是注册用户数量或网站访问者数量的实时提要。

我知道可以每隔一段时间使用 JavaScript 轮询 Web 服务，查询数据库以提取相关数据，但我想知道是否有更好的方法。

我已经快速了解了 Ajax 实时数据绑定和 jQuery jsView / 模板，但据我所知，Ajax 实时数据绑定不再被开发，我无法通过阅读 jsView 来判断它是否会做的伎俩与否。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:21:20.277

您可以使用[SignalIR](https://github.com/SignalR/SignalR/wiki)，但它可能适合也可能不适合您想要做的事情。异步服务器到客户端数据推送在 .Net 中从未如此简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T15:42:16.983

我个人使用 node.js 和 Socket.IO 来为我的网站做这个，它基本上只是一个社交网站，几乎所有数据都是实时的。我会说这可能是最好的方法，因为每隔几秒轮询一次数据库会在服务器上变得很重，而且是一场噩梦。

[http://nodejs.org/](http://nodejs.org/)

[http://socket.io/](http://socket.io/)

这当然是相当多的复杂工作（一开始）才能全部安装和工作，但是正如我发现的那样，一旦你这样做了，这是非常值得的。尽管对于您想做的事情而言，这可能会带来太多的工作和复杂性，在我看来这听起来毫无意义，尽管您可能有其他原因想要这样做。

# c# - 通过复选框选择更新 radgrid 中的页脚

> ID：10231241
> 
> 赞同：2
> 
> 时间：2012-04-19T15:16:30.487
> 
> 标签：c#, radgrid

我使用具有一些复选框和页脚的 Telerik 控件设计了一个 radgrid。

```
 <telerik:RadGrid ID="RadGridCustomers" runat="server"  
                    AutoGenerateColumns="False" CellSpacing="0" GridLines="None"  
                    Height="300px"  ShowFooter="true">
  <HeaderTemplate>
               <asp:CheckBox ID="chkSelectAll" runat="server"   
                  OnCheckedChanged="ToggleSelectedState" AutoPostBack="true" />
  </HeaderTemplate>

        <ItemTemplate>
            <asp:CheckBox ID="CheckBoxSelectedCustomer" runat="server" 
         OnCheckedChanged="ToggleRowSelection"/>
        </ItemTemplate>
         <ItemStyle Width="25px" Wrap="true" />
         <HeaderStyle Width="25px" />
    </telerik:GridTemplateColumn>
     <telerik:GridBoundColumn DataField="Customers_Id" 
        FilterControlAltText="Filter column column" HeaderText="Id" 
        UniqueName="column" Visible="true">

    </telerik:GridBoundColumn>
    <telerik:GridBoundColumn DataField="NominatedLoad" 
        FilterControlAltText="Filter column1 column" HeaderText="Nominated MW" 
        UniqueName="NominatedLoad" Aggregate="Sum">
            <HeaderStyle Wrap="true" Width="75px" HorizontalAlign="Center" />
         <ItemStyle Width="75px" />
    </telerik:GridBoundColumn> 
```

所以，正如你所看到的，我有 ID、姓名（这里没有放代码，认为没有必要）、指定字段。提名字段具有聚合属性。默认情况下，我会加载网格并在网格中选中所有复选框。现在，问题是每当用户取消选中复选框时，页脚中的值应该会自动更新。所以，我开始写这个事件

```
 protected void ToggleRowSelection(object sender, EventArgs e)
    {
        ((sender as CheckBox).NamingContainer as GridItem).Selected = (sender as 
            CheckBox).Checked;
        GridFooterItem footer = (GridFooterItem)
                   RadGridCustomers.MasterTableView.GetItems(GridItemType.Footer)[2];
        int totalLoad = Convert.ToInt32(footer["ActualLoad"].Text.Split(':')[1]);
        CheckBox chk = FindControl("CheckBoxSelectedCustomer") as CheckBox;
        foreach (GridDataItem data in RadGridCustomers.MasterTableView.Items)
        {
            if (chk.Checked == true)
            {
                //footer["ActualLoad"].Text = footer.Attributes.Add('Aggregate',                 }
        } 
```

但是如果块不知道​​如何更新页脚行，我有点被击中了。你能告诉我如何完成这个吗？

另外，请让我知道这种情况是否需要使用 jquery 或 C# 来完成？（我的意思是最好的方法）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T14:12:39.620

是的，这是可能的！你必须把聚合作为自定义！并使用这 2 个功能（它们是一个示例，请调整您的代码）

```
Public void RgDueBalance_CustomAggregate(object sender, GridCustomAggregateEventArgs e)
        {
            e.Result = 0;
        }
        protected void CheckBox1_Changed(object sender, EventArgs e)
        {
            GridFooterItem footerItem = rgDueBalance.MasterTableView.GetItems(GridItemType.Footer)[0] as GridFooterItem;
            double pageSum = double.Parse(footerItem["MontMI"].Text.Replace("Total:", ""));
            CheckBox checkBox = sender as CheckBox;
            GridDataItem dataItem = checkBox.NamingContainer as GridDataItem;
            double value = double.Parse(dataItem["MontMI"].Text);

            if (checkBox.Checked)
            {
                pageSum += value;
            }
            else
            {
                pageSum -= value;
            }
            footerItem["MontMI"].Text = "Total: " + pageSum;
        } 
```

这样做的目的是，当您选中一个复选框时，它会将值相加，或者反之则为取消选中。希望对你有帮助！

# sql - SQL查询最近的扫描日期

> ID：10231242
> 
> 赞同：0
> 
> 时间：2012-04-19T15:16:30.633
> 
> 标签：sql

我正在使用以下查询来提取 5 个不同扫描名称的最新扫描日期，但是返回的数据仅显示 1 个扫描名称的最新日期。

该查询仅返回总体上最近的扫描日期，即扫描名称“fisma-mgmt”的 2012 年 4 月 18 日。2012 年 4 月 17 日的其他 4 个扫描日期未显示。谁能看到导致这个结果的原因？

```
SELECT 
ScanName,
ScanDate,
pspplMSSeverity,
PatchMissing

FROM
(
SELECT
ScanName,
ScanDate,
pspplMSSeverity,
PatchMissing,

DENSE_RANK() OVER (ORDER BY ScanDate DESC) AS Rnk

FROM qryReportsPatchDeploymentPctbyPatch

where (ScanName like '%fisma-front%'
OR ScanName like '%fisma-back%'
OR ScanName like '%fisma-app%'
OR ScanName like '%fisma-meps%'
OR ScanName like '%fisma-mgmt%')

)t
WHERE rnk=1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:20:52.227

哦，在windows函数中，需要一个partition子句：

```
DENSE_RANK() OVER (PARTITION BY ScanName ORDER BY ScanDate DESC) AS Rnk 
```

如所写，查询仅返回总体上最近的扫描，而不是每个名称的最近扫描。

# xml - XHTML 命名空间的好处

> ID：10231244
> 
> 赞同：0
> 
> 时间：2012-04-19T15:16:39.867
> 
> 标签：xml, xhtml, xml-namespaces

我很好奇[这里](http://www.xml.com/pub/a/1999/01/namespaces.html)描述的 XHTML 命名空间与使用类或 data-* 属性相比是否有一些好处。我知道它是非常强大的工具，但谁能解释在现实世界的 Web 应用程序中使用属性的优势。

如果有人可以写示例和积分优势，我会很棒。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:19:21.307

It lets you use existing XML applications (such as SVG or MathML) and allows you to process data with standard XML tools instead of specialist HTML tools.

# java - 由于 Java / Android GC，整数是否可能重置为零？

> ID：10231248
> 
> 赞同：1
> 
> 时间：2012-04-19T15:17:06.543
> 
> 标签：java, android, garbage-collection

我读过一篇[博](http://fred-zone.blogspot.com/2011/11/android.html)文（对不起，它是用中文写的），作者说：

> 这是一个与网络相关的应用程序，我们声明了一些私有变量，当用户进行一些操作时，这些变量将被设置为一些值以供以后使用。
> 
> 通常应用程序运行良好，但是当我们打开一些使用大量 JavaScript 的网站时，我们的应用程序开始出现异常和意外（没有任何 Activity 切换），我们找不到原因。
> 
> 最后，我们发现这是由一个整数变量被设置为零引起的。但是我们很确定我们的代码不会把它重置为零，所以只有一个可能的结论：“为了满足WebView所需的资源，Garbage Collector已经收集了我们的变量”。所以最后我们设置声明这个变量为静态变量来避免这个问题。

坦率地说，这个“GC 将 int 设置为零”的论点与我的 Java 知识完全相反。

因为据我所知：

1.  Java GC 的收集单元是对象，而原始类型 int 在 Java 中不是对象。
2.  实例变量的生命周期与所有者对象的生命周期相同，并且当该对象被 GC 收集时，该实例变量使用的内存被释放。
3.  即使该变量是 Integer 对象而不是原始 int 因此也可以被收集，只要有对它的可访问引用，它就不会被收集。
4.  即使我们使用 Wea​​kReference 来存储 Integer 引用以使该 Integer 对象可收集，在 Integer 对象被收集后，我们无论如何也无法访问该已释放对象的内存。

但我也担心是否有一些我没有考虑过的事情。

所以我对以下问题非常感兴趣：

1.  由于垃圾收集，是否有任何可能的情况，int 或 Integer 对象可能被重置为零？
2.  GC是否有可能只释放对象占用的部分内存空间（比如只有一个实例变量），而不是完整的对象？
3.  是否可以引用已经被垃圾收集的对象，如果我们取消引用它会发生什么？
4.  假设变量随机重置为零，并且不是由他们的代码引起的，这种情况下最可能的情况是什么。虚拟机错误？GC错误？JIT错误或其他什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T15:23:37.193

> 由于垃圾收集，是否有任何可能的情况，int 或 Integer 对象可能被重置为零？

如果持有`int`or`Integer`本身的对象被垃圾收集并随后由应用程序代码重新创建，那么外部看起来`int`or`Integer`已被重置。

否则，没有。

> GC是否可能只释放对象占用的部分空间，而不是完整的对象？

仅当您使用诸如`WeakReference`与“部分空间”的连接之类的东西时。

> 是否可以引用已经被垃圾收集的对象

不，如果你能到达它，它就不能被垃圾收集。

> 如果我们取消引用它会发生什么？

时空连续体将发生破裂，结束我们所知道的现实。

# python - text_widget.insert(1.0, "\\") 只会显示一个斜线

> ID：10231250
> 
> 赞同：1
> 
> 时间：2012-04-19T15:17:10.990
> 
> 标签：python, string, tkinter, ascii

标题说明了一切。我有以下代码，第 9 行和第 18 行包含所述字符。有没有不使用 chr(92) 的方法？

```
def Conversion(self):
    self.t=self.input.Read()   
    self.columns=1    
    for i in range(len(self.t)):
        if self.t[i]==chr(9):
            self.columns+=1
        elif self.t[i]==chr(10):
            break             
    self.c="\begin{tabular} ["       
    self.c+="c"*self.columns
    self.c+="] \n"
    for i in range(len(self.t)):
        #self.c+=str(ord(self.t[i]))
        #self.c+=" "
        if self.t[i]==chr(9):
            self.c+='&'
        elif self.t[i]==chr(10):
            self.c+='\\'
            self.c+="\n"
        else:
            self.c+=self.t[i] 
    self.c+="\end{tabular}"
    self.output.Write(self.c) 
```

我的 .Write 方法也如下所示：

```
class Output:
def __init__(self,master,x):
    self.v=Text(master,width=x)
    self.v.pack(side=RIGHT)
    self.v.insert(1.0,"LaTeX code")
def Write (self,input):
    self.input=input
    if self.v.get(1.0,END)=="":
        self.v.insert(1.0,self.input)
    else:
        self.v.delete(1.0,END)
        self.v.insert(1.0,self.input) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T15:20:28.150

尝试转义`\`字符，每次`\`在文本中需要 a 时，像这样写两个`\`：

```
self.c='\\begin{tabular} [' 
```

或使用[原始字符串](http://docs.python.org/reference/lexical_analysis.html#string-literals)：

```
self.c=r'\begin{tabular} [' 
```

# php - 无法在 PHP 中删除文件

> ID：10231251
> 
> 赞同：-2
> 
> 时间：2012-04-19T15:17:23.460
> 
> 标签：php, fopen, chmod, unlink

我无法使用标签删除文件`unlink()`，当我使用`fopen`标签时`"w"`，出现错误。该文件具有`777`chmod。我可以用`fopen()`写在文件的末尾。但我不能删除任何东西。有人可以帮我吗？

这是一个示例：

```
 echo substr(sprintf('%o', fileperms('..')), -4); //777
   echo substr(sprintf('%o', fileperms('.')), -4); //777
   echo substr(sprintf('%o', fileperms('test')), -4); //777
   chmod('tmp',0777);  //Permission denied 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:19:59.090

对于`unlink`文件，您需要对其所在目录的写入权限。拥有文件本身`chmod`无济于事`777`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-03T21:36:04.270

我之前遇到过这个问题，并且能够通过在关闭文件和取消链接之前强制垃圾收集来进行补救：

```
gc_collect_cycles(); 
```

到目前为止，这不是最好的解决方案，但它确实解决了我删除之前打开和关闭行的文件的问题。

# google-chrome - 谷歌浏览器 - 自动检测位置

> ID：10231252
> 
> 赞同：2
> 
> 时间：2012-04-19T15:17:24.603
> 
> 标签：google-chrome

我在印度为英国客户工作。我不希望 Google Chrome 自动检测我的当前位置。我需要手动编辑以更改我需要的首选位置。到目前为止，Chrome 说，我在英国，如果我手动更改位置，它会要求我输入有效的邮政编码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:25:36.997

1.  单击浏览器工具栏上的扳手图标。
2.  选择设置。
3.  单击“引擎盖下”选项卡。
4.  单击内容设置。
5.  在出现的页面中，向下滚动到“**位置**”部分。为将来的位置请求选择您的默认权限：

**允许所有站点跟踪我的实际位置：**选择此选项可让所有站点自动访问您的位置。

**当网站尝试跟踪我的实际位置时询问我：**如果您希望 Google Chrome 在网站请求您的位置时提醒您，请选择此选项。

**不允许任何站点跟踪我的实际位置：**选择此选项可自动拒绝站点对您的位置的请求。

单击**管理例外**以删除先前授予特定站点的权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T15:19:47.860

实际上是某个站点检测到您当前的位置，而不是本地的 JavaScript 吗？如果是这样，则使用您的 IP 地址完成。唯一的出路是使用匿名的“精英”代理（它隐藏客户端的 IP，并且不会在任何 HTTP 标头中报告它。）更多关于[匿名](http://en.wikipedia.org/wiki/Anonymizer)者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T15:20:26.190

如何在谷歌浏览器中禁用您的位置共享

前往[位置分享](http://support.google.com/chrome/bin/answer.py?hl=en&answer=142065)

# ios - iOS：对包装 CGPoint 的 NSValue 的 NSArray 进行排序

> ID：10231261
> 
> 赞同：3
> 
> 时间：2012-04-19T15:17:52.253
> 
> 标签：ios, sorting, nsarray, cgpoint, nsvalue

**Qeustion** : 和标题中说的差不多。我查看了互联网，但找不到任何易于理解的内容。我有`NSArray`包含很多`NSValue`. 那些`NSValue`每个持有一个`CGPoint`. 我想`x`按`y`秒对它们进行排序。

**一些代码**：

```
NSValue * valuePointObject = [NSValue valueWithCGPoint:CGPointMake(x, y)];
NSArray *array = [[NSArray alloc] initWithObjects: valuePointObject, valuePointObject2, ..., nil]; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-19T15:22:54.313

要对值进行排序，您必须再次将它们“拆箱”到 CGPoints。代码可能类似于：

```
NSArray *sortedArray = [array sortedArrayUsingComparator:^NSComparisonResult(NSValue *obj1, NSValue *obj2) {
        CGPoint p1 = [obj1 CGPointValue];
        CGPoint p2 = [obj2 CGPointValue];
        if (p1.x == p2.x) return p1.y < p2.y;
        return p1.x < p2.x;
    }]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-19T15:25:25.443

```
 array = [array sortedArrayUsingComparator:^NSComparisonResult(NSValue *obj1, NSValue *obj2) {

        if (obj1.CGPointValue.x < obj2.CGPointValue.x) {
            return NSOrderedAscending;
        }

        if (obj1.CGPointValue.x > obj2.CGPointValue.x) {
            return NSOrderedDescending;
        }

        if  (obj1.CGPointValue.y < obj2.CGPointValue.y) {
            return NSOrderedAscending;
        }

        if  (obj1.CGPointValue.y > obj2.CGPointValue.y) {
            return NSOrderedDescending;
        }

        return NSOrderedSame;
    }]; 
```

# html - 自由绘制直线

> ID：10231262
> 
> 赞同：0
> 
> 时间：2012-04-19T15:17:52.450
> 
> 标签：html, canvas

我已经开始开发一个画布应用程序来创建二维房间。我想用这样的免费图纸创建一个房间：

[http://soud.se/images/room.JPG](http://soud.se/images/room.JPG)

示例：devfiles.myopera.com/articles/649/example2.html（不能创建超过 2 个超链接）

当房间的自由绘制完成并释放鼠标按钮（或按下按钮时）时，我希望程序自动生成一个带有直线的房间，如下所示：

[http://soud.se/images/room1.JPG](http://soud.se/images/room1.JPG)

我只想要有 90 度角的房间，所以我想知道是否有任何方法可以做到这一点。

//安德烈亚斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:49:04.740

**[现场演示](http://jsfiddle.net/loktar/5LWES/)**

这是一种方法。我使用 2 个画布对象，您在顶部一个对象上“绘画”，一旦松开鼠标，它会从起点到终点绘制一条直线。有改进的余地，但我只想提出一种解决方案。

```
var canvas = document.getElementById("canvas"),
    ctx = canvas.getContext("2d"),
    drawCanvas = document.getElementById("drawCanvas"),
    drawCtx = drawCanvas.getContext("2d"),
    painting = false,
    lastX = 0,
    lastY = 0,
    startX = 0,
    startY = 0,
    lineThickness = 1;

canvas.width = canvas.height = 600;

drawCanvas.width = drawCanvas.height = 600;

drawCanvas.onmousedown = function(e) {
    painting = true;
    drawCtx.fillStyle = "#000";
    lastX = e.pageX - this.offsetLeft;
    lastY = e.pageY - this.offsetTop;
    startX = lastX;
    startY = lastY;
};

drawCanvas.onmouseup = function(e){
    painting = false;
    var x2 = e.pageX - this.offsetLeft,
        y2 = e.pageY - this.offsetTop;

    ctx.strokeStyle = "#000";
    ctx.beginPath();
    ctx.moveTo(startX, startY);
    ctx.lineTo(x2, y2);
    ctx.stroke();

    drawCtx.clearRect(0, 0, 600, 600);
}

drawCanvas.onmousemove = function(e) {
    if (painting) {
        mouseX = e.pageX - this.offsetLeft;
        mouseY = e.pageY - this.offsetTop;

        // find all points between        
        var x1 = mouseX,
            x2 = lastX,
            y1 = mouseY,
            y2 = lastY;

        var steep = (Math.abs(y2 - y1) > Math.abs(x2 - x1));
        if (steep){
            var x = x1;
            x1 = y1;
            y1 = x;

            var y = y2;
            y2 = x2;
            x2 = y;
        }
        if (x1 > x2) {
            var x = x1;
            x1 = x2;
            x2 = x;

            var y = y1;
            y1 = y2;
            y2 = y;
        }

        var dx = x2 - x1,
            dy = Math.abs(y2 - y1),
            error = 0,
            de = dy / dx,
            yStep = -1,
            y = y1;

        if (y1 < y2) {
            yStep = 1;
        }

        for (var x = x1; x < x2; x++) {
            if (steep) {
                drawCtx.fillRect(y, x, lineThickness , lineThickness );
            } else {
                drawCtx.fillRect(x, y, lineThickness , lineThickness );
            }

            error += de;
            if (error >= 0.5) {
                y += yStep;
                error -= 1.0;
            }
        }

        lastX = mouseX;
        lastY = mouseY;

    }
}
​ 
```

# php - HTML select onchange 更新查询

> ID：10231264
> 
> 赞同：0
> 
> 时间：2012-04-19T15:17:55.400
> 
> 标签：php, javascript, mysql, html

我有一个带有两个选择下拉列表的表单。一个是国家，一个是大学。国家下拉列表来自 MySQL 数据库，显示所有输入的国家。起初，我希望大学下拉列表中包含系统中的所有大学，但是最终用户希望系统是动态的并随着它的进行而学习，所以此时下拉列表不显示任何数据。

```
<select name="academicdropdown" onchange="countrysortlist()" style="width:178px">
<option value"">Sort By Country</option>
<option value"All" style="font-weight:bold; font-style:italic">All Countries</option>
<?php

while ($row=mysqli_fetch_array($countryresult2)) {

    $id = $row["country_id"];
    $country = $row["country"];
    echo "<option value='$id'>$country</option>\n";
}
?>
</select>

<select name="universitydropdown" onclick="unilist()" style="width:154px">
<option value"">University</option>
<?php

    if(isset($_SESSION['appformuniversity'])) {

    if($_SESSION['appformacademic'] == "universitylist") {

        $universityinput = $_SESSION['appformuniversitylist'];
                                                    while ($row=mysqli_fetch_array($universityresult)) {
                                                        $universityid = $row["university_id"];
                                                                $university = $row["university_name"];
                                                        if($universityid == $universityinput) {
                                                            echo "<option value='$universityid' selected='selected'>$university</option>\n";
                                                        }
        else {
                                                        echo "<option value='$universityid'>$university</option>\n";
                                                        }
    }
    }
else {
                                                while ($row=mysqli_fetch_array($universityresult)) {

        $universityid = $row["university_id"];
        $university = $row["university_name"];
        echo "<option value='$universityid'>$university</option>\n";
                                                    }
}
}
else {

   while ($row=mysqli_fetch_array($universityresult)) {

            $universityid = $row["university_id"];
    $university = $row["university_name"];
            echo "<option value='$universityid'>$university</option>\n";
   }
}
?>
</select></td></tr> 
```

我想做的是，当用户在国家下拉列表中选择一个国家时，它将使用该国家/地区内的大学更新大学下拉列表。我知道您必须使用 onchange 事件，但我不知道如何在脚本方面进行操作？任何帮助，将不胜感激。

我目前的大学查询是

```
$universitysql = "SELECT * FROM university ORDER BY university_name ASC" ; 
```

提前感谢您的帮助。非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T16:18:25.847

你可以用javascript做这样的事情：

```
<script type="text/javascript">
function countrysortlist()
{
   document.form_name.submit();
}
</script> 
```

当您更改选择选项时，网站将更新提交表单

```
<form name='form_name' action='' method='get'>
<select name="academicdropdown" onchange="countrysortlist()" style="width:178px">
...
</select>
</form> 
```

然后查询将仅加载提交的国家/地区 ID 内的大学。

```
<?php
$country_id = $_GET['academicdropdown'];
$universitysql = "SELECT * FROM university where countryid = '$country_id' ORDER BY university_name ASC" ;
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T15:49:34.110

```
You have to use ajax for this. If you know Jquery it would be easier. Just include the
jquery.js file . Then write the ajax in the onchange function of the country dropdown.
In the onchange method just pass the id of the country. Then in your ajax method send 
id to a php page. In that page generate the whole option list from the sql query using
that country id . Make a relation between two tables i.e every university row should 
contain country id. Then echo the option list. In your ajax method just change the 
university list dynamically using innerhtml. I am giving you example 

1\. onchange on country select

 onchange="countrysortlist(this.value)"

2\. ajax method in countrysortlist function

  $.ajax({
     type: 'POST',
     url: 'yourpage.php',  // change name
     data: "countryid="+id,  // country id
     success: function(data) {  // returns date
           $('.result').html(data); // result should be the class name of university dropdown

     }
 }); 
```

# r - 从列表中加载 r 中的稀疏矩阵

> ID：10231268
> 
> 赞同：3
> 
> 时间：2012-04-19T15:18:06.037
> 
> 标签：r, sparse-matrix

嗨，我有一个结构如下的文件

```
12    45    56
34    65    31
12    23    43 
```

等等我有一个巨大的数据集

所以我有一个包含 3 列的文本文件，但是，我想创建稀疏矩阵的方式是每行说 12 45 56 ..... 第一个数字，即行第二个数字，即 45 是列，第三个数字（即56) 是稀疏矩阵第 12 行第 45 列的值

我执行以下操作

```
>x = scan('data.txt',what=list(integer(),integer(),numeric()))
Read 61944406 records

> library('Matrix')
Loading required package: lattice
N
> N= sparseMatrix(i=x[[1]],j=x[[2]],x=x[[3]]) 
```

但我得到这个错误

```
Error in validObject(r) : 
invalid class “dgTMatrix” object: all row indices (slot 'i') must be between 0 and nrow-1 in a TsparseMatrix 
```

谁能帮我弄清楚我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T14:58:16.497

我遇到了完全相同的问题，在尝试了很多事情之后，解决方案来自阅读 sparseMatrix 函数的帮助。参数 index1 指定索引是从 1 开始还是从 0 开始。

```
N= sparseMatrix(i=x[[1]],j=x[[2]],x=x[[3]], index1=FALSE) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-19T15:26:25.637

当您使用时，`x[[1]]`您指的是 x 矩阵的第一个元素，在这种情况下是`x[[1]]=12`. `x[,1]`如果您想要索引列或行，则必须使用`x[1,]`。试试这个：

```
x = matrix(c(12,45,56,
             34,65,31,
             12,23,43), nrow=3, byrow=TRUE)

N= sparseMatrix(i=x[,1], j=x[,2], x=x[,3]) 
```

已编辑：我已经复制了您的错误：

```
x = matrix(c( 0,45,56,
             34,65,31,
             12,23,43), nrow=3, byrow=TRUE)

N= sparseMatrix(i=x[,1], j=x[,2], x=x[,3])
Error en validObject(r) : 
  invalid class “dgTMatrix” object: all row indices (slot 'i') must be between 0 and nrow-1 in a TsparseMatrix 
```

因此，请确保您的前 2 个列中没有 0

# android - Android AsyncTask publishProgress 不调用 onProgressUpdate

> ID：10231277
> 
> 赞同：2
> 
> 时间：2012-04-19T15:18:24.773
> 
> 标签：android, android-asynctask

我有以下代码在异步任务中运行客户端套接字连接：

```
@Override
protected Boolean doInBackground(Void... params) { //This runs on a different thread
    boolean result = false;
    try {
        Log.i("AsyncTask", "doInBackground: Creating socket");
        SocketAddress sockaddr = new InetSocketAddress("192.168.1.115", 9090);
        nsocket = new Socket();
        nsocket.connect(sockaddr, 5000); //10 second connection timeout
        if (nsocket.isConnected()) { 
            nis = nsocket.getInputStream();
            wr = new BufferedWriter(new OutputStreamWriter(nsocket.getOutputStream()));
            Log.i("AsyncTask", "doInBackground: Socket created, streams assigned");
            Log.i("AsyncTask", "doInBackground: Waiting for inital data...");
            sockState = true;
            byte[] buffer = new byte[4096];
            int read = nis.read(buffer, 0, 4096); //This is blocking
            while(read != -1){
                byte[] tempdata = new byte[read];
                System.arraycopy(buffer, 0, tempdata, 0, read);
                publishProgress(tempdata);
                Log.i("AsyncTask", "doInBackground: Got some data");
                read = nis.read(buffer, 0, 4096); //This is blocking
            }
        }
    } catch (IOException e) {
        e.printStackTrace();
        Log.i("AsyncTask", "doInBackground: IOException");
        result = true;
    } catch (Exception e) {
        e.printStackTrace();
        Log.i("AsyncTask", "doInBackground: Exception");
        result = true;
    } finally {
        try {
            nis.close();
            wr.close();
            nsocket.close();
        } catch (IOException e) {
            e.printStackTrace();
        } catch (Exception e) {
            e.printStackTrace();
        }
        Log.i("AsyncTask", "doInBackground: Finished");
    }
    return result;
}

@Override
protected void onProgressUpdate(byte[]... values) {
     Log.d("KMC.NetworkTask", String.valueOf(values[0]));
    if (values.length > 0) {
        Log.d("KMC.NetworkTask", "onProgressUpdate: " + values[0].length + " bytes received.");
        result = new String(values[0]);
    }
} 
```

插座确实有效。然而，onProgressUpdate 没有被调用，即使后台任务告诉我数据进来了。

有人给我一些指点吗？？我在谷歌上找不到任何东西：|

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:45:48.627

Values 是一个表，所以当你写 values[0] 时，你会得到字节表，所以我认为你必须做这样的事情： `String.valueOf(values[0][0])`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T20:35:58.183

现在我这样解决了：

```
@Override
protected Boolean doInBackground(Void... params) { //This runs on a different thread
    try {
        Log.i("AsyncTask", "doInBackground: Creating socket");
        SocketAddress sockaddr = new InetSocketAddress("192.168.1.115", 9090);
        nsocket = new Socket();
        nsocket.connect(sockaddr, 5000); //10 second connection timeout
        if (nsocket.isConnected()) { 

            in = new BufferedReader(new InputStreamReader(nsocket.getInputStream()));
            wr = new BufferedWriter(new OutputStreamWriter(nsocket.getOutputStream()));
            Log.i("AsyncTask", "doInBackground: Socket created, streams assigned");
            sockState = true;

            String inputLine = "";
            while ((inputLine = in.readLine()) != null) {
                result = inputLine;
                Log.d("AsyncTask", "doInBackground: Got some data:" + inputLine);
            }
        }
    } catch (IOException e) {
        e.printStackTrace();
        Log.i("AsyncTask", "doInBackground: IOException");
    } catch (Exception e) {
        e.printStackTrace();
        Log.i("AsyncTask", "doInBackground: Exception");
    } finally {
        try {
            nis.close();
            wr.close();
            nsocket.close();
        } catch (IOException e) {
            e.printStackTrace();
        } catch (Exception e) {
            e.printStackTrace();
        }
        Log.i("AsyncTask", "doInBackground: Finished");
    }
    return true;
}

public String getResult(){
    String r = result;
    result = null;
    return r;
} 
```

主线程等待结果，然后用 getResult() 检索结果：

```
while(null == networktask.result){}
Log.d("KMC.onCreate", networktask.getResult()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-30T02:09:04.723

我有一个类似的问题，因为我为我的 AsyncTask 子类实现了一个构造函数，并且没有在其中调用 super()。

```
public class TNailTask extends AsyncTask<File, Integer, HashMap<Integer, BitmapDrawable>> {

private DirListingAdapter dir_listing;
private Context context;

public TNailTask(DirListingAdapter dir_listing, Context context) {
    super(); // call super to make sure onProgressUpdate works
    this.dir_listing = dir_listing;
    this.context = context;
}

protected HashMap<Integer, BitmapDrawable> doInBackground(File... image_files) {
  ....
}

protected void onProgressUpdate(Integer... progress) {
  ....
} 
```

}

# python - 初始化任意形状的嵌套列表

> ID：10231278
> 
> 赞同：1
> 
> 时间：2012-04-19T15:18:30.223
> 
> 标签：python

我正在尝试实现一个用对象初始化任意大小的列表的函数，类似于 numpy 数组初始化方法的工作方式。

```
def fill(shape, object): 
```

我一直在努力反对这一点，但想不出一种方法来为任意长度的维度做到这一点。我猜它需要某种递归。

这是所需行为的示例。为简单起见，对象只是浮点数 0，但我需要它来处理任何类：

```
> fill( (2, 3, 4), 0.)
[
 [[ 0.,  0.,  0.,  0.],
  [ 0.,  0.,  0.,  0.],
  [ 0.,  0.,  0.,  0.]]
,
 [[ 0.,  0.,  0.,  0.],
  [ 0.,  0.,  0.,  0.],
  [ 0.,  0.,  0.,  0.]]
] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T15:29:50.030

尝试以下递归实现

```
def fill(shape,value):
    if not shape: return value
    return [fill(shape[1:],value) for i in range(shape[0])] 
```

非递归版本

```
import copy
def fill(shape,value):
    result=value
    for i in reversed(shape):
        result=[copy.deepcopy(result) for j in range(i)]
    return result 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-19T15:27:58.260

没有看到任何标准，这是我的尝试——也可以为 *args 和 **kwargs 添加一些东西

```
In [1]: def fill(dimensions,cls):
   ...:     size_list=[cls()]*dimensions[-1]
   ...:     for dimension in dimensions[:0:-1]:
   ...:         size_list=[size_list]*dimension
   ...:     return size_list
   ...: 

In [2]: print fill((2,3,4),float)
[[[0.0, 0.0, 0.0, 0.0], [0.0, 0.0, 0.0, 0.0], [0.0, 0.0, 0.0, 0.0]], [[0.0, 0.0, 0.0, 0.0], [0.0, 0.0, 0.0, 0.0], [0.0, 0.0, 0.0, 0.0]]] 
```

# ios - Pass by reference(pointer) conflict with iOS object?

> ID：10231286
> 
> 赞同：2
> 
> 时间：2012-04-19T15:18:48.460
> 
> 标签：ios

I've a view with few UITableView/s and UILabel/s. I'm creating them programmatically (i.e not using NIB).

I've consolidated tableView and label creation in a method with signature:

```
- (void) CreateTableView:(UITableView*) outTableView andLabel:(UILabel*)OutLabel AtFrame:(CGRect) frame{
CGRect labelFrame = frame;
labelFrame.origin.x = LABEL_LEFT_ALIGNMENT;
labelFrame.origin.y -= LABEL_TOP_ALIGNMENT;
labelFrame.size.height = LABEL_HEIGHT;
outLabel = [[UILabel alloc] initWithFrame:labelFrame];
[[self view] addSubview:outLabel];

outTableView = [[UITableView alloc] initWithFrame:frame style:UITableViewStyleGrouped];
[outTableView setDataSource:self];
[outTableView setDelegate:self];
[[self view] addSubview:outTableView];
} 
```

Here, outTableView and outLabel are output parameters. That is, after completion of method , caller will be using outTableView and outLabel.

My app has 3 tableview instance variables -- tableView1, tableView2, tableView3\. And three label instance variables. View controller (caller) calls like:

```
 [self CreateTableView:tableView1 andLabel:label1 AtFrame:frame1];
   [self CreateTableView:tableView2 andLabel:label2 AtFrame:frame2];
   [self CreateTableView:tableView3 andLabel:label3 AtFrame:frame3]; 
```

After completion of this method, UILabel* are rendered on screen, caller able to use UILabel* object. Strangely, that is not the case with UITableView* object.

Any idea, why there is different behaviour?

Note: My application is ARC enabled.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:37:56.757

错误的。参数实际上并不包含分配/初始化的实例，因为您是通过值而不是通过引用传递它们。考虑传递一个指向对象的指针，然后在分配新实例时取消引用它：

```
- (void)createTableView:(UITableView **)tvPtr
{
    *tvPtr = [[UITableView alloc] init...];
    // etc.
} 
```

像这样调用：

```
UITableView *tv;
[self createTableView:&tv]; 
```

# objective-c - 将具有框架原点的网格存储到核心数据中的有效方法是什么？

> ID：10231291
> 
> 赞同：0
> 
> 时间：2012-04-19T15:19:04.500
> 
> 标签：objective-c, core-data

我有很多子视图子视图。每个子视图包含一个图像、矩形、x 任何 y 原点、宽度和高度等。我开始使用核心数据，但我并没有真正看到保存网格的好方法。我能想到的唯一方法是保存网格，获取 origin.x、origin.y、宽度、高度等，并存储每个单独的值。然后，当我从核心数据加载网格时，使用所有这些值重新创建网格。有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T17:06:24.727

您也可以使用`NSStringFromgCGRect()`and`CGRectFromString()`然后很明显您也可以将 4 个值 (x,y,w,h) 存储在一个字符串字段中。我会那样做。

# jquery - jQuery No longer accepting attr("Checked") === true Logic

> ID：10231292
> 
> 赞同：3
> 
> 时间：2012-04-19T15:19:04.880
> 
> 标签：jquery, attr

I've noticed that after a upgrade to the latest version of jquery (1.7.1) that the following code no longer evalulates

```
if( $('#item').attr('checked') === true ){
    //do something
} 
```

I sort of understand why they may have made this change but does anyone have a link to documentation of why they have done this? I want to ensure my code works correctly.. and it seems that maybe I have been incorrectly using the above for quite a while.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T15:20:12.163

宁可使用

```
if( $('#item').is(':checked')){
    //do something
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-19T15:20:20.027

用于`.is`检查复选框是否被选中。见下文，

```
if( $('#item').is(':checked')){
.. 
```

**编辑：**

~~据我所知，jQuery`$('#item').attr('checked')`从未返回 true。它返回`checked`或`undefined`。~~

正如凯文指出的那样，

> .attr('checked') 1.6 后正确返回一个字符串（所有属性都是字符串）。如果你想要一个布尔属性，使用新的 .prop() 方法

如果要比较`true`，请使用`this.checked`. 见下文，<-- 我更喜欢使用`this.checked`它，因为它比任何其他方法都快。

```
if (this.checked === true) {
.. 
```

或者

`.prop`像下面这样使用， [DEMO](http://jsfiddle.net/skram/Z2rGe/1/)

```
if($(this).prop('checked') === true) {
.. 
```

[**演示**](http://jsfiddle.net/skram/Z2rGe/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T15:23:25.353

它不起作用，因为每个浏览器都有自己的检查方式，例如：

检查，检查=“检查”，检查=“真”。

所以你应该使用选择器 :checked 而不是属性。和 jQuery 会照顾所有的浏览器 :)

# c# - Skip the cell and the content of a DataTemplateColumn in a DataGrid

> ID：10231296
> 
> 赞同：0
> 
> 时间：2012-04-19T15:19:16.083
> 
> 标签：c#, wpf, xaml, datagrid

I am trying to tab through a datagrid, but at the end of the row I have a template column that is taking in a tab. I have set the datagrid cell style to not focusable and istabstop = false, but it still seems to be going into the content. Is there a property for a TemplateColumn that will have it be skipped by tabbing completely?

Thanks

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T15:37:27.567

您可以在该列的 CellStyle 中设置 KeyboardNavigation.TabNavigation="None" ：

```
<DataGridTemplateColumn>
    <DataGridTemplateColumn.CellStyle>
        <Style>
            <Setter Property="KeyboardNavigation.IsTabStop" Value="False" />
            <Setter Property="KeyboardNavigation.TabNavigation" Value="None" />
        </Style>
    </DataGridTemplateColumn.CellStyle>
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T15:45:06.250

尝试为您在模板列下使用的控件设置 IsTabStop=False。

# objective-c - 内存在指针上增长？

> ID：10231302
> 
> 赞同：0
> 
> 时间：2012-04-19T15:19:29.567
> 
> 标签：objective-c, c, xcode

我有一个指针上的内存增长，我在 xcode 仪器分配（iphone）中看到

我有这个：（每秒执行**多次的音频缓冲区回调函数）**

```
int16_t *q = (int16_t *)(&bufferList)->mBuffers[0].mData;
int16_t average ;

for(int i=0; i < inNumberFrames; i++)
{
  average=q[i];  //comment this solve all. 
```

如果我评论最后一行，就可以了。就是这样。显然 q[i] 是一个问题。我不知道，我在这条线上做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:23:18.013

在您发布的代码段中，我没有看到任何可能导致内存增长的具体问题：

*   你没有分配任何类型的内存
*   你没有保留任何东西（因为它是普通的 C）

因此，您问题中的任何代码都不会导致泄漏。可能这里缺少一些东西。

仪器应该告诉您每次泄漏的分配`malloc`或导致分配泄漏。`new`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T16:44:49.030

什么类型`mBuffers`？是否有可能`[]`超载，并在幕后进行一些分配或引用计数？当您注释掉可疑行时，编译器可能会优化对 的整个分配`q`，从而避免问题。

# java - 如果在同步块之外声明/返回返回值，方法是否是线程安全的？

> ID：10231305
> 
> 赞同：0
> 
> 时间：2012-04-19T15:19:30.563
> 
> 标签：java, multithreading, thread-safety, synchronized-block

```
public Foo getFoo(){
    Foo foo = null;

    synchronized(fooList){
        if(fooList.size() > 0){
            foo = fooList.remove(0);
        }
    }

    return foo;
} 
```

由于`foo`在同步块之外声明，是否存在返回坏数据的可能性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T15:25:18.210

每个线程实例调用`getFoo()`都会有自己的`foo`实例。因此`foo`是线程安全的，不需要同步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T15:23:34.443

在这种情况下，“不良数据”是什么意思？可能会在相应的右大括号`fooList`之前和之后异步更改，之前（更一般地说，直到使用返回值的那一刻。）您的最终目标是什么？`synchronized(fooList)``return foo;`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T15:23:41.080

`getFoo`不会返回过时的数据，因为`Foo foo`是局部变量并且`fooList`是同步的

局部变量是线程安全的，因为每个线程调用都会创建一个新`Foo`对象，而不是共享单个对象。而变量不是线程安全的，因为多个线程可以访问`fooList`，但在这种情况下`fooList`已经同步。

# html - HTML 5 本地数据库存储选项

> ID：10231307
> 
> 赞同：4
> 
> 时间：2012-04-19T15:19:35.373
> 
> 标签：html

我正在使用 HTML 5。想知道什么样的本地数据库存储可用。localStorage（使用的键值对）有一个限制，所以想知道是否还有其他可用的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T15:25:40.613

此页面列出了可用于 HTML5 的各种存储方法：http: [//www.html5rocks.com/en/features/storage](http://www.html5rocks.com/en/features/storage)

这是解释不同方法之间差异的页面：http: [//csimms.botonomy.com/2011/05/html5-storage-wars-localstorage-vs-indexeddb-vs-web-sql.html](http://csimms.botonomy.com/2011/05/html5-storage-wars-localstorage-vs-indexeddb-vs-web-sql.html)

如果您正在寻找的不仅仅是键值存储，那么您可能需要 WebSQL 数据库。不过，我相信这已被弃用。

# java - Android Button Onclick

> ID：10231309
> 
> 赞同：54
> 
> 时间：2012-04-19T15:19:40.070
> 
> 标签：java, android

OK I'm new to android dev's and Java, so I'm having problems with on click method here's my code. I know I've gotta be close, thanks in advance. All I want my button to do is, when its clicked on the phone to switch the layout view from main.xml to xx.xml

```
package my.project;

import android.app.Activity;
import android.os.Bundle;

import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class ExperiencerlActivity extends Activity {
    /** Called when the activ`enter code here`ity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);      
        Button button = (Button) findViewById(R.id.button1);

        button.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                // TODO Auto-generated method stub
            }
        });
    }
} 
```

Here is my button code

```
<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/linearLayout1"
    android:layout_centerHorizontal="true"
    android:layout_marginBottom="56dp"
    android:onClick="setLogin"
    android:text="Login" /> 
```

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-04-19T16:02:14.920

> 如果你在 xml 文件的 Button 标签中这样写： **android:onClick="setLogin"**那么

这样做：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<Button
    android:id="@+id/button1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/btn"
    android:onClick="onClickBtn" />

</LinearLayout> 
```

在代码部分：

```
public class StartUpActivity extends Activity 
{
    public void onCreate(Bundle savedInstanceState) 
    {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.main);    
    }

    public void onClickBtn(View v)
    {
        Toast.makeText(this, "Clicked on Button", Toast.LENGTH_LONG).show();
    } 
} 
```

不需要这一切：

```
 Button button = (Button) findViewById(R.id.button1);
 button.setOnClickListener(new OnClickListener() {

    public void onClick(View v) {
        // TODO Auto-generated method stub

    }
 }); 
```

检查一次；

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-11-18T07:50:49.837

您需要在布局 XML 和 java 代码中使用相同的方法**名称**。

如果你使用`android:onClick="setLogin"`，那么你需要创建一个同名的方法，**setLogin**：

```
// Please be noted that you need to add the "View v" parameter
public void setLogin(View v) {

} 
```

**建议：**
不要通过`android:onClick`在 XML 中使用标签来混合布局和代码。相反，将 click 方法移动到您的类中，`OnClickListener`方法如下：

```
Button button = (Button) findViewById(R.id.button1);
button.setOnClickListener(new OnClickListener() {
  public void onClick(View v) {
    // TODO Auto-generated method stub
  }
 }); 
```

只为布局做一个布局，仅此而已。[当您需要重构支持多个屏幕](https://developer.android.com/guide/practices/screens_support.html)时，它将节省您宝贵的时间。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-09-07T10:03:41.863

**方法一：**

```
public void onClick(View v) {
          Intent i = new Intent(currentActivity.this, SecondActivity.class);
         startActivty(i);
        } 
```

**方法二：**

```
Button button = (Button) findViewById(R.id.mybutton);
 button.setOnClickListener(new OnClickListener() {

    public void onClick(View v) {
         Toast.makeText(this, "Button Clicked", Toast.LENGTH_LONG).show();

    }
 }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T15:22:37.770

使用这样的东西：

```
 public void onClick(View v) {
            // TODO Auto-generated method stub
           startActivity(new Intent("com.droidnova.android.splashscreen.MyApp"));
        } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-03-28T20:23:52.343

下面是一些关于如何添加名为 Add 的按钮的示例代码。您应该将变量声明为成员变量，并且成员变量的命名约定是以字母“m”开头。

在类上按 Alt+Enter 以添加缺少的引用。

将此添加到您的 activity_main.xml：

```
 <Button
        android:id="@+id/buttonAdd"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="ADD"
     /> 
```

将此添加到您的 MainActivity.java：

```
public class MainActivity extends AppCompatActivity {

    Button mButtonAdd; 

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        mButtonAdd = findViewById(R.id.buttonAdd);

        mButtonAdd.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                // do something here
            }
        });
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-19T15:28:18.770

了解按下按钮时您尝试执行的代码会很有帮助。您已将 xml 文件中的 onClick 属性设置为名为 setLogin 的方法。为清楚起见，我将删除此行`android:onClick="setLogin"`并直接从您的方法内部调用该`onClick()`方法。

此外，您不能只将显示设置为新的 XML，您需要使用 Intent 启动新活动，这样的方法是合适的

```
 private void setLogin() {

 Intent i = new Intent(currentActivity.this, newActivity.class);
 startActivty(i);

 } 
```

然后将新的 Activity 设置为具有新的布局。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-11-23T11:25:50.927

有两种解决方案是： -

**(1)** xml中不要放onClick

**(2)**删除

```
button.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {
            // TODO Auto-generated method stub
    }
}); 
```

并放

```
public void setLogin(View v) {
    // Your code here
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-04-29T11:11:07.697

在您的按钮单击中使用**Layout inflater方法。**它会将您当前的 .xml 更改为目标 .xml 文件。谷歌的布局充气代码。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-02-02T14:23:55.850

这将为您排序

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Button but1=(Button)findViewById(R.id.button1);

    but1.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {

            Intent int1= new Intent(MainActivity.this,xxactivity.class);
            startActivity(int1);
        }
    });
} 
```

您只需要将 xxactivity 修改为您的第二个活动的名称

# javascript - Canvas.toDataURL() Workaround?

> ID：10231310
> 
> 赞同：2
> 
> 时间：2012-04-19T15:19:46.560
> 
> 标签：javascript, canvas

Okay, so a friend of mine asked me to help him out with creating a canvas painting application for a mobile site he's working on. However, he was unable to get the "paintings" to save to the server. I did a little checking and it appears that in the current iteration of the browser (based on WebKIt IIRC), .toDataURL support was randomly thrown out. Is there any workaround for this that'll allow the canvas data to be sent via a POST request?

**Edit:**

> Browser- Netfront(R) Browser, NX v.1.0

It simply appears that the browser doesn't support it

```
canvas = document.getElementById('paint');
var imagedata = canvas.toDataURL();
var datafield = document.getElementById('dataurl');
datafield.value = imagedata;
document.forms["imagedatahold"].submit(); 
```

On the file that is to receive the data, the querystring is empty. This is not the case in any other browser as far as I can tell.

The value of "imagedata" is returning as:

> data:,

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T15:25:28.313

我曾经遇到过在 Android 设备上运行的网络应用程序的问题。
问题是android没有`toDataURL`方法实现，所以我最终使用了这个实现：[http](http://code.google.com/p/todataurl-png-js/) ://code.google.com/p/todataurl-png-js/ 。
它可能会慢一点，但它可以完成工作。

# ruby-on-rails-3.1 - Rails 允许访问一页而不限制整个控制器

> ID：10231313
> 
> 赞同：2
> 
> 时间：2012-04-19T15:19:48.453
> 
> 标签：ruby-on-rails-3.1

所以我有 3 类用户：

```
admin
moderator
regular user 
```

我将版主和管理页面锁定在一个控制器范围的系统中，如下所示：

```
def authorize
  unless User.find_by_id(session[:user_id]) and User.find_by_id(session[:user_id]).moderator == true
    redirect_to login_url, :notice => "Please log in with a moderator account"
  end
end

def authorize_admin
  unless User.find_by_id(session[:user_id]) and User.find_by_id(session[:user_id]).admin == 1
    redirect_to login_url, :notice => "Only admins can access the page you tried to access"
  end
end 
```

但是我需要让普通用户访问多个控制器的编辑页面（当然还有更新操作）。但只需编辑和更新。

如果我做：

```
before_filter :authorize, :except => :edit 
```

然后任何人（即使没有登录）都可以访问这些页面。

我将如何去做这样的事情？

**编辑**

根据 Thilo 的建议，我在 application_controller.erb 文件中添加了以下内容：

```
 def update_successful
    skip_before_filter :authorize
  end 
```

在普通用户编辑条目后能够提供 update_successful 页面。但是我收到此错误：

```
undefined method `skip_before_filter' for #<HomeController:0x007ff782aeb6f0> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:25:41.710

您可以显式跳过任何全局应用过滤器：

```
skip_before_filter :authorize, :only => [:edit, :update] 
```

或者首先不要将其应用于相关操作：

```
before_filter :authorize, :except => [:edit, :update] 
```

**编辑**

要回答您的进一步问题：将其添加到您的应用程序控制器：

```
def upload_successful
end 
```

This is an empty method that explicitly defines the action that so far as been implicitly be used by Rails when rendering the `home/upload_successful.html.haml` template. Then, remove authentication from that method by modifying your filter:

```
before_filter :authorize, :except => [:upload_successful] 
```

Here's a good [introduction to rendering](http://guides.rubyonrails.org/layouts_and_rendering.html#rendering-by-default-convention-over-configuration-in-action) in Rails - it helps to understand rendering by default, which is what your `upload_successful` template has been displayed without having a matching controller or action defined.

# events - Word 文档 - 隐藏文件保存/打印上的单选按钮控件

> ID：10231314
> 
> 赞同：0
> 
> 时间：2012-04-19T15:19:54.713
> 
> 标签：events, vba, module, ms-word

我能够为保存/打印创建模块事件处理程序，但无法访问文档上的控件来更改说..我在文档上有单选按钮，我想在文件->保存上隐藏它。任何帮助都会受到 2 天的影响。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T00:04:06.700

将此代码放在 Word VBA 中的 ThisDocument 对象中。它应该允许您在保存文档之前运行所需的任何代码。

```
Public WithEvents appWord As Word.Application

Private Sub appWord_DocumentBeforeSave _
 (ByVal Doc As Document, _
 SaveAsUI As Boolean, _
 Cancel As Boolean)

'Put your code here

End Sub
Private Sub Document_Open()
Set appWord = Application
End Sub 
```

请注意，这在 appWord 初始化之前不会起作用，这就是我将它放在 Document_Open 事件代码中的原因（可能有更好的方法）。换句话说，在您重新打开文档之前，此代码不会运行。

# java - 无法启动活动 ComponentInfo？

> ID：10231321
> 
> 赞同：2
> 
> 时间：2012-04-19T15:20:05.047
> 
> 标签：java

我正在使用下面的代码，我正在尝试添加一个按钮来关闭 wifi，但我收到了错误

```
java.lang.RuntimeException: Unable to start activity ComponentInfo 
```

有任何想法吗？按钮代码是否需要放在其他地方？谢谢！

```
import java.util.List;

import android.app.Activity;
import android.os.Bundle;
import android.content.Context;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.net.wifi.WifiConfiguration;
import android.net.wifi.WifiManager;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class TestActivity extends Activity {
/** Called when the activity is first created. 
 * @return */       

@Override
public void onCreate(Bundle savedInstanceState) {    
    super.onCreate(savedInstanceState);

    TextView tv = new TextView(this);       
    TextView status = new TextView(this);                  

    WifiManager wifi = (WifiManager) getSystemService(Context.WIFI_SERVICE); 
    WifiConfiguration wc = new WifiConfiguration();  
    wc.SSID = "\"MyNetwork\""; //IMP! This should be in Quotes!! 

    wc.hiddenSSID = true; 
    wc.status = WifiConfiguration.Status.ENABLED;      
    wc.priority = 10; 
    wc.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.WPA_PSK); 
    wc.allowedProtocols.set(WifiConfiguration.Protocol.RSN);  
    wc.allowedProtocols.set(WifiConfiguration.Protocol.WPA); 
    wc.allowedAuthAlgorithms.set(WifiConfiguration.AuthAlgorithm.OPEN); 
    wc.allowedAuthAlgorithms.set(WifiConfiguration.AuthAlgorithm.SHARED); 
    wc.allowedPairwiseCiphers.set(WifiConfiguration.PairwiseCipher.CCMP); 
    wc.allowedPairwiseCiphers.set(WifiConfiguration.PairwiseCipher.TKIP); 
    wc.preSharedKey = "\"Password""; 
    WifiManager  wifiManag = (WifiManager) this.getSystemService(WIFI_SERVICE); 
    boolean res1 = wifiManag.setWifiEnabled(true); 
    int res = wifi.addNetwork(checkPreviousConfiguration(wc)); 
    Log.d("WifiPreference", "add Network returned " + res ); 
    boolean es = wifi.saveConfiguration(); 
    Log.d("WifiPreference", "saveConfiguration returned " + es ); 
    boolean b = wifi.enableNetwork(res, true);    
    Log.d("WifiPreference", "enableNetwork returned " + b );   

    tv.setText("You are now connected!  " +
            "Version 1.1");

    status.setText("The was an error connecting, please try again.");

       //@Override

    try {            
        Thread.sleep(5000);

         ConnectivityManager connec = (ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE); 

         if (connec != null && (connec.getNetworkInfo(1).getState() == NetworkInfo.State.CONNECTED) ||(connec.getNetworkInfo(0).getState() == NetworkInfo.State.CONNECTED)){  
                //You are connected, do something online. 
                setContentView(tv);

            }else if (connec.getNetworkInfo(0).getState() == NetworkInfo.State.DISCONNECTED ||  connec.getNetworkInfo(1).getState() == NetworkInfo.State.DISCONNECTED ) {              
                //Not connected.         
               setContentView(status);
            }  

    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    Button OffWifi = (Button)findViewById(R.id.offwifi);
    OffWifi.setOnClickListener(new OnClickListener() { 
      public void onClick(View v) {                 
          WifiManager wifiManager = (WifiManager)getBaseContext().getSystemService(Context.WIFI_SERVICE);
            wifiManager.setWifiEnabled(false);          
          }        
      });                       
}

public WifiConfiguration checkPreviousConfiguration(WifiConfiguration wc) {

    WifiManager wifi = (WifiManager) getSystemService(Context.WIFI_SERVICE); 
    List<WifiConfiguration> configs = wifi.getConfiguredNetworks();     

    for(WifiConfiguration config : configs) {         
        if(config.SSID.equals(wc.SSID)) return config;     
        }     
    return wc; 
    } 
} 
```

# java - 在Activity类中调用onConfigurationChanged方法后调用onCreate方法

> ID：10231323
> 
> 赞同：1
> 
> 时间：2012-04-19T15:20:06.017
> 
> 标签：java, android

我是 android 编程的初学者，现在我正在开发一个 android 应用程序，它默认按排序顺序显示数据，并提供搜索功能。为此，我编写了一个名为 search 的活动，它将搜索内容并显示在列表视图中。我的问题是当我旋转设备时，即使在覆盖 onConfigurationChanged 方法之后也会调用 Activity 类的 onCreate 方法。我还在清单文件中进行了以下更改以调用 onConfigurationChanged 方法。

```
<activity
    android:name=".Search"
    android:configChanges="orientation|keyboardHidden"
    android:screenOrientation="sensor" >
</activity> 
```

我的搜索活动如下：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
  System.out.println("HERE AT ONCREATE");
}

@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);
    System.out.println("HERE AT ON CONFIGURATION CHANGED");
    if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT) {
        setContentView(R.layout.search_port);
    } else if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {
        setContentView(R.layout.search_land);
    }
} 
```

所以旋转设备时的输出将是：

1.  此处配置已更改

2.  在这里

我不想`onCreate()`在旋转设备时调用该方法。请帮我解决这个问题。我正在使用带有三星 Galaxy Tab（7 英寸显示屏）的 Android 2.2 SDK。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:37:31.763

您尝试使用上述代码完成的工作可以更简单地完成。

如果您将布局文件名称更改为相同：`search_layout.xml`并以这种方式将它们放置在您的项目中：

```
<project>/res/layout/search_layout.xml       // Portrait Layout
<project>/res/layout-land/search_layout.xml  // Landscape Layout 
```

然后以这种方式修改您的活动：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Log.i("Search Activity", "onCreate() was called.");
}

@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);
    Log.i("Search Activity", "onConfigurationChanged was called.");
} 
```

这就是我在我的活动中设置它的方式，并且该`onCreate()`方法只调用一次。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-04-19T15:33:19.670

没有办法避免它。当您旋转设备时，您的 Activity 将被终止并重新创建。没有办法避免它，但是你可以重写 onSaveInstanceState()，它会在 Activity 被销毁之前被调用。

# apache - Apache mod_rewrite：仅当不在本地主机中时才强制 www

> ID：10231324
> 
> 赞同：37
> 
> 时间：2012-04-19T15:20:09.727
> 
> 标签：apache, .htaccess, mod-rewrite

我的 htaccess 中有以下内容来强制 URL 中的 www：

```
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

如果不在本地主机上，我该如何应用它？我可以提出某种 if 条件吗？现在，我得到这样的东西：`http://www.localhost/`...

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-04-19T15:27:32.063

`RewriteCond`已经是您的“如果条件”。只需添加另一个：

```
RewriteCond %{HTTP_HOST} !=localhost
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2014-12-01T03:59:05.457

我添加了所有这些：

```
RewriteCond %{HTTP_HOST} !=localhost
RewriteCond %{HTTP_HOST} !=127.0.0.1
RewriteCond %{REMOTE_ADDR} !=127.0.0.1
RewriteCond %{REMOTE_ADDR} !=::1 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-06-29T14:29:12.510

如果您使用的是 80 以外的端口（例如`localhost:8080`），您可能还需要将其添加到正则表达式中：

```
RewriteCond %{HTTP_HOST} !^localhost(?::\d+)?$ [NC]
RewriteCond %{HTTP_HOST} !^127\.0\.0\.1(?::\d+)?$ 
```

# c++ - 如何在类中获取方法的地址？

> ID：10231330
> 
> 赞同：4
> 
> 时间：2012-04-19T15:20:25.473
> 
> 标签：c++

这是我的代码的一部分：

在啊：

```
class classA
{
public:
void (*function_a)(void);
classA();
void function_a();
}; 
```

在 a.cpp 中：

```
void classA::classA()
{
  (*function_a)() = function_a;
}

void classA::function_a()
{
  return;
} 
```

我想获取 function_a 的地址并将其保存到 void (*function_a)(void) 中，但是我得到了“表达式不可分配”的编译错误。我该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-19T15:25:53.440

首先，为不同的事物选择不同的名称。

其次，*非静态*成员函数指针应声明为：

```
void (classA::*memfun)(void); //note the syntax 
```

那么分配应该是：

```
memfun = &classA::function_a; //note &, and note the syntax on both sides. 
```

你称之为：

```
classA instance;
(instance.*memfun)(); 
```

这就是你在 C++03 中所做的。

但是，在 C++11 中，您也可以使用`std::function`。这是您的操作方法：

```
std::function<void(classA*)> memfun(&classA::function_a); 
```

你称之为：

```
classA instance;
memfun(&instance); 
```

[在线演示](http://ideone.com/kQuZQ)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T15:24:06.897

要存储指向类函数的指针，您需要一些特殊的东西，即指向成员的指针。[在这里你可以找到一个很好的解释](http://www.parashift.com/c++-faq-lite/pointers-to-members.html)

简而言之，成员函数不能存储在普通函数指针中，因为它需要将 this 指针传递给当前类。静态成员函数像普通函数一样工作，因为它不需要 this 指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T16:01:23.453

一旦您了解了其中一些库，也许您可​​以更好地重新构建您正在尝试做的任何事情：

1）如果你使用c++11，你可以使用[std::function](http://en.cppreference.com/w/cpp/utility/functional/function)

2) 否则，如果您使用旧的编译器，您可以使用[boost::function](http://www.boost.org/doc/libs/1_49_0/doc/html/function.html)

其中任何一个都将提供传递函数以供以后调用的能力。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-19T15:42:50.697

Nawaz 已经解释了如何正确地做到这一点。与指向全局函数的指针相比，指向类成员函数的指针有很多限制。唯一的例外是静态成员函数，它们几乎与 es 全局函数相同，只是它们是类名称空间的成员。

函数指针的 C++ 替代方案是函数对象。这些是具有一个或多个 operator() 重载的类：

```
class MyFunction
{
public:
    <return-type> operator() (... parameters ...);
}; 
```

然后您可以执行以下操作：

```
MyFunction fnct;
fnct(... args ...); 
```

即，您可以像函数一样使用类实例。

# ios - Facebook iOS 只读？

> ID：10231331
> 
> 赞同：0
> 
> 时间：2012-04-19T15:20:26.007
> 
> 标签：ios, xcode, facebook, stream

我以前使用过 iOS Facebook SDK 来发布到一个人的时间线或通过应用程序分享。但是，现在我只想阅读公共流，政治家的 Facebook 流。使用 Twitter 很容易做到这一点。我如何使用 Facebook 做到这一点。我不想登录或任何应用程序 ID。我只想阅读特定用户的公共信息流，仅此而已。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:23:05.500

不幸的是，你不能了。尽管信息是“公开的”，但图形 API 去年夏天已更改为需要访问令牌才能做到这一点。

> Graph API PROFILE_ID/feed 和 PROFILE_ID/posts 现在需要 access_token
> 
> 如上周所述，页面、应用程序、用户或组的图形 API PROFILE_ID/feed/ 和页面或用户的 PROFILE_ID/posts 现在需要有效的 access_token 才能访问相应对象的墙或帖子（以前没有 access_token是必需的）。

[https://developers.facebook.com/blog/post/510/](https://developers.facebook.com/blog/post/510/)

~~基本上，您现在需要创建一个 facebook 应用程序并获取一个 AppId。您实际上不必“登录”；因为您只需要公共数据，您只需要使用您的 AppId 请求有效的访问令牌。~~

~~请参阅此示例/博客（它是 PHP，但重要的是最后一个示例表明您只需要执行一个简单的 HTTP 请求即可获取令牌）：http: [//illuminatikarate.com/blog/facebook-graph-api-requires -access-token-for-feed-access/](http://illuminatikarate.com/blog/facebook-graph-api-requires-access-token-for-feed-access/)。~~

看起来，Facebook API 的移动目标……再次移动了。你不能再这样做了。实际上，您甚至必须请求`read_stream`许可才能读取公共数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T16:13:05.573

您需要访问令牌才能获取 Facebook 用户提要，即使提要是公开的。

例如，让马克扎克伯格公开供稿： http: [//www.facebook.com/zuck](http://www.facebook.com/zuck)

现在，如果我们尝试使用图形 API 资源管理器查询它：http: [//developers.facebook.com/tools/explorer/ ?method=GET&path=4%2Ffeed](http://developers.facebook.com/tools/explorer/?method=GET&path=4%2Ffeed)

或直接通过 Facebook 图表： [https ://graph.facebook.com/zuck/feed](https://graph.facebook.com/zuck/feed)

我们将得到：“请求此资源需要访问令牌。”

因此，您需要访问令牌中的 read_stream 权限。

# javascript - 如何从简单的 soundcloud URL 获取流？

> ID：10231333
> 
> 赞同：4
> 
> 时间：2012-04-19T15:20:26.303
> 
> 标签：javascript, soundcloud, soundmanager2

我正在使用 Javascript 为 SoundCloud 和 SoundManager2 创建另一个自定义播放器。

我可以从 api.soundcloud.com/tracks/1928712958 之类的 URI 播放流，但我想使用 Soundcloud url（例如[http://soundcloud.com/damianmarley/skrillex-damian-marley-make-它](http://soundcloud.com/damianmarley/skrillex-damian-marley-make-it)）作为输入。

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-19T09:43:52.163

首先，您需要在 Sound Cloud 上创建自己的应用程序

创建应用程序后，你 git

现在您可以调用 soundcloud API，但您需要知道 userId 或 PlaylistId 或 TrackId

要知道用户的 ID，我们可以使用 /resolve 函数

假设用户链接是

[https://soundcloud.com/a-salem-2](https://soundcloud.com/a-salem-2)

要知道用户 ID，我们使用如下解析功能

[http://api.soundcloud.com/resolve.json?url=https://soundcloud.com/a-salem-2&client_id=YOUR_CLIENT_ID](http://api.soundcloud.com/resolve.json?url=https://soundcloud.com/a-salem-2&client_id=YOUR_CLIENT_ID)

这会给你 userId，在我的例子中是 [75258312]

获取用户轨迹

[https://api.soundcloud.com/users/75258312/tracks.json?client_id=YOUR_CLIENT_ID](https://api.soundcloud.com/users/75258312/tracks.json?client_id=YOUR_CLIENT_ID)

希望有所帮助:)

# variables - 如何将变量名作为参数的一部分传递给批处理文件然后使用它？

> ID：10231334
> 
> 赞同：8
> 
> 时间：2012-04-19T15:20:26.667
> 
> 标签：variables, parameters, batch-file

我正在尝试运行一个批处理文件，该文件接受包含变量名的字符串。然后将在批处理文件中使用该变量。例如...

```
C:\>test.bat user%num% 
```

在批处理文件...

```
set num=1
(This is where I need help... Somehow set domainusername=user1)
echo %domainusername%

set num=2
... 
```

这个想法是允许批处理调用以相同的方式工作，而不管变量名在哪里。例子..

```
C:\>test.bat %num%user
or
C:\>test.bat us%num%er 
```

编辑：
我已经做了相当多的研究来尝试完成这项工作。我尝试过的最有希望的想法是递归评估 %1 的 for 循环（在示例中）。不幸的是，我无法让它工作。希望这会激发其他人的一些想法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T17:31:46.083

***代码：***

```
@ECHO off
SET param=%1
SET num=1
CALL SET x=%param%
ECHO %x% 
```

***输出：***

```
user1 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-21T20:43:55.023

据我了解 OP，Aacini 和 stackoverflow 的答案是错误的。

（Aacini 的）延迟扩展解决方案只能`num`在开始批处理之前定义，否则`%mnm%`永远不会扩展。

```
C:\>set "num="

C:\>myBatch.bat user%num% 
```

结果到输出
`user%num%`

另一个解决方案（stackoverflow）工作得更好一些，但在定义时*失败*`num`

我加了一秒钟`set num=2`来演示它

```
@ECHO off
SET param=%1
SET num=1
CALL SET x=%param%
ECHO %x%

set num=2
CALL SET x=%param%
ECHO %x% 
```

调用它两次显示问题

```
C:\>myBatch user%num%
user1
user2

C:\>myBatch user%num%
user2
user2 
```

在第二次运行中，你得到了`2`两次，因为结果在批处理启动时是固定的。

回显 的内容`%1`以查看*格式字符串*是否真的存在或是否`%num%`已经扩展是一个好主意。

据我了解 OP（我可能不明白！），问题是关于使用占位符，
但这对于百分比来说很棘手，因为它只适用于命令行（而不是来自另一批）而且它只如果在那一刻未定义变量，则有效。
因为，如果定义了变量，那么`%num%`将立即扩展并且内容`%1`是`user2`和非`user%num%`（假设 num=2）。

它有时起作用只是命令行解析器的副作用，因为它不会删除未定义的变量（如在批处理文件中），而是未定义的变量扩展不会以任何方式改变。

```
echo "%thisIsUndefined%"  - from cmd-line this outputs `"%thisIsUndefined%"`
echo "%thisIsUndefined%"  - from a batch file this outputs `""` 
```

但作为副作用，不存在在命令行上下文中转义百分号的方法。
仅存在一种用于*伪*转义的解决方法。
`mybatch user%num^%`
它并没有真正逃脱百分比，但大多数情况下不会存在名为 的变量`num^`。

然后stackoverlow的解决方案将起作用，具有：

```
myBatch user%num^% 
```

但我更喜欢 Aacini 提到的延迟扩张。
然后你会用感叹号而不是百分比来调用批处理，通常这很好用，因为默认情况下禁用延迟扩展。

```
myBatch user!num! 
```

批次本身看起来像这样

```
@echo off
set "param=%1"
Setlocal EnableDelayedExpansion
set num=1
echo %param%
set num=2
echo %param% 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T16:53:34.653

打扰一下。我想我真的不明白你想要什么。然而...

如果将变量*的名称*传递给批处理文件，则可以通过以下方式直接为该变量赋值*：*

```
set %1=Any value 
```

如果要*获取*此类变量的值，则需要`setlocal EnableDelayedExpansion`在开头使用延迟扩展：插入命令，并将变量名（%1 参数）用感叹号括起来：

```
setlocal EnableDelayedExpansion
set varValue=!%1! 
```

在你的情况下，我想你想要实现这样的目标：

```
set num=1
set domainusername=!user%num%!
echo %domainusername% 
```

但这并不像你说的那样使用 %1 参数，所以我不知道......

我希望它有帮助...

**编辑**：也许[这篇文章](https://stackoverflow.com/questions/10166386/arrays-linked-lists-and-other-data-structures-in-cmd-exe-batch-script/10167990#10167990)可能对你有用......

***附录***：在我意识到 OP 想要什么之后，这是我的解决方案：

```
@ECHO off
setlocal EnableDelayedExpansion
SET param=%1
SET num=1
SET x=!param!
ECHO %x% 
```

延迟扩展的执行速度比 CALL...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T20:45:19.087

作为事后的想法，您可能会考虑在确定该变量实际存在之前对其进行测试。将此添加到程序的开头：

```
if %1.==. goto :usage_orwherever 
```

# sqlite - 条件约束唯一

> ID：10231338
> 
> 赞同：3
> 
> 时间：2012-04-19T15:20:35.043
> 
> 标签：sqlite, constraints, unique

我有下一张桌子

```
create table use_flags3 (
    id INTEGER,
    flag_name VARCHAR NOT NULL,        
    flag_description VARCHAR NOT NULL,
    flag_type_id INTEGER NOT NULL,
    package_id INTEGER,
    FOREIGN KEY (flag_type_id) REFERENCES use_flags_types(id),
    FOREIGN KEY (package_id) REFERENCES packages(id),
    PRIMARY KEY (id)
); 
```

**仅**当 flag_type_id 等于 1 时，我才需要`flag_name`列是唯一的。我尝试通过下一个约束来实现这一点

 **```
CONSTRAINT idx1_chk CHECK (
    flag_type_id in (select id from use_flags_types where flag_type="local") or
    flag_type_id in (select id from use_flags_types where flag_type="expand") or
    flag_type_id in (select id from use_flags_types where flag_type="expand_hidden") or
    (
         flag_type_id in (select id from use_flags_types where flag_type="global") and
         flag_name not in (select flag_name from use_flags)
    )
) 
```

sqlite 说“检查约束中禁止的子查询”。我可以换

```
flag_type_id in (select id from use_flags_types where flag_type="local") 
```

和

```
flag_type_id = ${ID_HERE} -- id from `select id from use_flags_types where flag_type="local"` 
```

但我不能对约束最后一部分的第二部分做同样的把戏

```
flag_name not in (select flag_name from use_flags) 
```

有没有机会在一张表中做我最初想做的事情（我真的不希望将这些数据拆分为 2(+) 表）？

// 希望描述清楚

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T18:59:24.427

如果你有一个复杂的约束，你应该使用触发器：

[http://sqlfiddle.com/#!7/2094c](http://sqlfiddle.com/#!7/2094c)

```
CREATE TABLE use_flags3 (
    id INTEGER,
    flag_name VARCHAR NOT NULL,
    flag_description VARCHAR NOT NULL,
    flag_type_id INTEGER NOT NULL,
    package_id INTEGER,
    FOREIGN KEY (flag_type_id) REFERENCES use_flags_types(id),
    FOREIGN KEY (package_id) REFERENCES packages(id),
    PRIMARY KEY (id)
);

/* TRIGGER BEFORE UPDATE version omitted */

CREATE TRIGGER fake_unique
BEFORE INSERT ON use_flags3
FOR EACH ROW
WHEN (
    EXISTS (SELECT NULL
            FROM use_flags_types
            WHERE flag_type IN( "local", "expand", "expand_hidden")
              AND flag_type_id = id
           )
    OR (
         EXISTS (SELECT NULL
                 FROM use_flags_types
                 WHERE flag_type="global"
                 AND flag_type_id = id)
         AND flag_name NOT IN (SELECT flag_name FROM use_flags)
    )
)
BEGIN
  SELECT RAISE( ABORT, 'duplicate rows' );
END; 
```**

# sql - 如何在 SELECT 查询中获得两个不同表中的两列的差异

> ID：10231340
> 
> 赞同：0
> 
> 时间：2012-04-19T15:20:38.967
> 
> 标签：sql, database, select

我有以下两个查询，我想合并为一个并获得不同的结果。

查询 1

```
SELECT SUM(col1 + col2) As total FROM tableA 
```

查询 2

```
SELECT SUM(total) FROM tableB WHERE color not like '%black' and model not like 'CF%' 
```

我想将这些组合在一个 SELECT 查询中并得到结果：查询 1 - 查询 2 = 结果。这两个表都有一个“id”作为它们之间的公共键。我正在使用 MS SQL Server 2008

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:24:17.210

```
SELECT  (
        SELECT  SUM(col1 + col2)
        FROM    tableA
        ) -
        (
        SELECT  SUM(total) 
        FROM    tableB
        WHERE   color NOT LIKE '%black'
                AND model NOT LIKE 'CF%'
        ) AS result 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T15:23:34.993

使用两个查询作为列进行外部选择。

就像是

SELECT (Query1) - (Query2) 作为 Diff

# nagios - 有没有办法通过 Nagios Web 界面更改服务状态？

> ID：10231341
> 
> 赞同：2
> 
> 时间：2012-04-19T15:20:40.813
> 
> 标签：nagios

有没有办法通过香草网络界面或插件来允许授权用户更改服务的状态？

还是最好通过命令行这样做，只使用`send_nsca`? 我正在通过 设置服务状态`send_ncsa`，但是，操作员可以更轻松地通过 Web 界面将 CRITICAL 警告更改回 OK。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T12:10:10.787

右侧有一个“提交此服务的被动检查结果”按钮，可让您提交检查结果。但是，重复该动作 500 次并不好玩。Thruk 等高级 gui[可](http://thruk.org)让您一次将结果提交回多个服务和主机。

# zend-framework - Zend 框架中的 Fat Models Skinny Controller

> ID：10231346
> 
> 赞同：2
> 
> 时间：2012-04-19T15:20:55.747
> 
> 标签：zend-framework

我的应用程序中的控制器很少，它们在控制器中使用了太多的业务逻辑。例如看看这个动作方法

```
public function publishedAction()
{
    if ($this->getRequest()->isXmlHttpRequest()) {
        $dataTable = new Model_DataTables('item i', array('i.id', 'i.title', 'i.from_age', 'i.to_age', 'i.gender', 'i.created_at', 'i.ispublished'));
        $item = new Model_Item();
        $output = $dataTable->aaData();
        $iResult = $dataTable->iResult();
        foreach($iResult as $k => $v) {
            $id = $iResult[$k][0];
            $iResult[$k][0] = date('d-m-Y', strtotime($iResult[$k][5]));
            $iResult[$k][2] = $item->formatAge($iResult[$k][2], $iResult[$k][3]);
            $iResult[$k][3] = ($iResult[$k][4] == 1) ? 'Male' : 'Female';
            $iResult[$k][4] = "<a href=/admin/item/view/".$id.">View</a>";
            $iResult[$k]['DT_RowId'] = "$id";
        }
        $output['aaData'] = $iResult;
        $this->_helper->json($output);
    }
} 
```

参考上述动作方法，格式化数据的逻辑在控制器本身处理。我在同一个控制器中有几个这样的方法导致我的控制器变胖。而许多有经验的灵魂都同意让控制器尽可能瘦。我想问我应该将上述方法的所有业务逻辑移动到相应的模型中还是可以按照当前流程进行？

**更新：**

参考上面的代码，我将所有业务逻辑都放在了我的模型中

```
public function getPublishedItem()
{
    $dataTable = new Model_DataTables('item i', array('i.id', 'i.title', 'i.from_age', 'i.to_age', 'i.gender', 'i.created_at', 'i.ispublished'));
    $output = $dataTable->aaData();
    $iResult = $dataTable->iResult();
    foreach($iResult as $k => $v) {
        $id = $iResult[$k][0];
        $iResult[$k][0] = date('d-m-Y', strtotime($iResult[$k][5]));
        $iResult[$k][2] = $this->formatAge($iResult[$k][2], $iResult[$k][3]);
        $iResult[$k][3] = ($iResult[$k][4] == 1) ? 'Male' : 'Female';
        $iResult[$k][4] = "<a href=/admin/item/view/".$id.">View</a>";
        $iResult[$k]['DT_RowId'] = $id;
    }
    $output['aaData'] = $iResult;
    return $output;
} 
```

并在控制器中

```
public function publishedAction()
{
    if ($this->getRequest()->isXmlHttpRequest()) {
        $item = new Model_Item();
        $this->_helper->json($item->getPublishedItem());
    }
} 
```

这是正确的方法吗？还是我做错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:29:38.130

Since you retrieved `$iResult` from your model (Model_DataTables), wouldn't it be nicer to simply do:

```
public function publishedAction()
{
    if ($this->getRequest()->isXmlHttpRequest()) {
        $dataTable = new Model_DataTables('item i', array('i.id', 'i.title', 'i.from_age', 'i.to_age', 'i.gender', 'i.created_at', 'i.ispublished'));
        $output['aaData'] = $dataTable->getIResult();
        $this->_helper->json($output);
    }
} 
```

where `getIResult()` contains your foreach.

Another solution would be to use a view helper, since it seems that you are formatting html content. Your action would then be like this:

```
public function publishedAction()
{
    if ($this->getRequest()->isXmlHttpRequest()) {
        $dataTable = new Model_DataTables('item i', array('i.id', 'i.title', 'i.from_age', 'i.to_age', 'i.gender', 'i.created_at', 'i.ispublished'));
        $output['aaData'] = $this->view->formatIResult($dataTable->getIResult());
        $this->_helper->json($output);
    }
} 
```

where `formatIResult()` is the name of your view helper.

# knockout.js - 渲染后淘汰赛，但只有一次

> ID：10231347
> 
> 赞同：19
> 
> 时间：2012-04-19T15:20:56.517
> 
> 标签：knockout.js

我有一个简单的 observableArray，其中包含很多用户模型。在标记中，有一个带有 foreach 循环的模板，该循环循环用户并将它们输出到一个简单的表格中。我还使用自定义滚动条和其他一些 javascript 设置表格样式。所以现在我必须知道 foreach 循环何时完成并且所有模型都添加到 DOM 中。

afterRender 回调的问题是每次添加某些内容时都会调用它，但我需要一种只触发一次的回调。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-19T15:41:26.653

您最好的选择是使用自定义绑定。您可以将自定义绑定`foreach`放在绑定列表之后，`data-bind`也可以在 a 中执行代码`setTimeout`以允许在执行代码`foreach`之前生成内容。

这是一个示例，它显示了一次运行代码和每次 observableArray 更新时运行的代码：http: [//jsfiddle.net/rniemeyer/Ampng/](http://jsfiddle.net/rniemeyer/Ampng/)

HTML：

```
<table data-bind="foreach: items, updateTableOnce: true">
    <tr>
        <td data-bind="text: id"></td>
        <td data-bind="text: name"></td>
    </tr>
</table>

<hr/>

<table data-bind="foreach: items, updateTableEachTimeItChanges: true">
    <tr>
        <td data-bind="text: id"></td>
        <td data-bind="text: name"></td>
    </tr>
</table>

<button data-bind="click: addItem">Add Item</button> 
```

JS：

```
var getRandomColor = function() {
   return 'rgb(' + (Math.floor(Math.random() * 256)) + ',' + (Math.floor(Math.random() * 256)) + ',' + (Math.floor(Math.random() * 256)) + ')';  
};

ko.bindingHandlers.updateTableOnce = {
    init: function(element) {
        $(element).css("color", getRandomColor());            
    }    
};

//this binding currently takes advantage of the fact that all bindings in a data-bind will be triggered together, so it can use the "foreach" dependencies
ko.bindingHandlers.updateTableEachTimeItChanges = {
    update: function(element) {    
        $(element).css("color", getRandomColor());  
    }    
};

var viewModel = {
    items: ko.observableArray([
        { id: 1, name: "one" },
        { id: 1, name: "one" },
        { id: 1, name: "one" }
    ]),
    addItem: function() {
        this.items.push({ id: 0, name: "new" });   
    }
};

ko.applyBindings(viewModel); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-11-12T22:20:04.677

我想出了一个优雅的作弊。在您的模板 / foreach 块之后，立即添加以下代码：

```
<!--ko foreach: { data: ['1'], afterRender: YourAfterRenderFunction } -->
<!--/ko--> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-19T16:00:13.883

一种快速简单的方法是，在您的 afterRender 处理程序中，将当前项目与列表中的最后一个项目进行比较。如果匹配，那么这是 afterRender 运行的最后一次。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-04-01T10:22:15.180

Jaffa 的答案包含一个错误，所以我决定创建一个新答案而不是评论。不能同时使用 with 和 template。所以只需将您的模型移动到模板的`data`标签

**html**

```
<div data-bind="template: {data: myModel, afterRender: onAfterRenderFunc }" >
   <div data-bind="foreach: observableArrayItems">
       ...
   </div>
</div> 
```

**Javascript**

```
var myModel = {      
  observableArrayItems : ko.observableArray(),

  onAfterRenderFunc: function(){
    console.log('onAfterRenderFunc')
  }

}
ko.applyBinding(myModel); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-13T15:53:25.137

我不确定接受的答案是否适用于 knockout-3.x（因为数据绑定不再按照您声明它们的顺序运行）。

这是另一种选择，它只会触发一次。

```
ko.bindingHandlers.mybinding {
        init: function(element, valueAccessor, allBindings, viewModel, bindingContext) {
            var foreach = allBindings().foreach,
                subscription = foreach.subscribe(function (newValue) {
                // do something here 
                subscription.dispose(); // dispose it if you want this to happen exactly once and never again.
            });
        }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-19T15:29:35.610

就在我的脑海中，您可以：

*   无需挂钩 afterRender 事件，只需在您推送/弹出数组上的项目后调用您的函数。
*   或者可能将 observableArray 包装在一个 observable 中，该 observable 本身具有下面的子项及其自己的 afterRender 事件。foreach 循环需要像这样引用父可观察对象：

例子：

```
 <div>
     <div data-bind="with: parentItem(), template: { afterRender: myRenderFunc }" >
      <div data-bind="foreach: observableArrayItems">
          ...
      </div>
    </div>
   </div> 
```

没有测试这个所以只是猜测......

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-27T07:56:17.073

为了找出 foreach 模板何时完成渲染，您可以进行“虚拟”绑定并将当前渲染的项目索引传递给您的处理程序并检查其是否与数组长度匹配。

**HTML：**

```
<ul data-bind="foreach: list">
   <li>
   \\ <!-- Your foreach template here -->
   <div data-bind="if: $root.listLoaded($index())"></div> 
   </li>
</ul> 
```

**ViewModel - 处理程序：**

```
this.listLoaded = function(index){
    if(index === list().length - 1)
       console.log("this is the last item");
} 
```

如果您打算将更多项目添加到列表中，请持有额外的标志。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-05-26T14:40:10.433

使用去抖器怎么样？

```
var afterRender = _.debounce(function(){    

    // code that should only fire 50ms after all the calls to it have stopped

}, 50, { leading: false, trailing: true}) 
```

# c++ - 将 const std::string & 作为参数传递的日子结束了吗？

> ID：10231349
> 
> 赞同：652
> 
> 时间：2012-04-19T15:20:57.927
> 
> 标签：c++, c++11

我听过 Herb Sutter 最近的一次演讲，他认为过去`std::vector`和过去`std::string`的理由`const &`基本上已经不复存在了。他建议现在最好编写如下函数：

```
std::string do_something ( std::string inval )
{
   std::string return_val;
   // ... do stuff ...
   return return_val;
} 
```

我知道`return_val`在函数返回时这将是一个右值，因此可以使用非常便宜的移动语义返回。但是，`inval`仍然比引用的大小（通常实现为指针）大得多。这是因为 a`std::string`具有各种组件，包括指向堆的指针和`char[]`用于短字符串优化的成员。所以在我看来，通过引用传递仍然是一个好主意。

谁能解释为什么 Herb 会这么说？

* * *

## 回答 #1

> 赞同：422
> 
> 时间：2012-04-19T16:41:47.903

赫布之所以这么说，就是因为这样的案例。

假设我有调用函数的`A`函数`B`，它调用函数`C`。并将`A`一个字符串传递`B`到`C`. `A`不知道也不关心`C`；众所周知`A`的是`B`。也就是说，`C`是 的实现细节`B`。

假设 A 定义如下：

```
void A()
{
  B("value");
} 
```

如果 B 和 C 取字符串 by `const&`，那么它看起来像这样：

```
void B(const std::string &str)
{
  C(str);
}

void C(const std::string &str)
{
  //Do something with `str`. Does not store it.
} 
```

一切都很好。你只是在传递指针，没有复制，没有移动，每个人都很开心。`C`需要 a`const&`因为它不存储字符串。它只是使用它。

现在，我想做一个简单的改变：`C`需要将字符串存储在某个地方。

```
void C(const std::string &str)
{
  //Do something with `str`.
  m_str = str;
} 
```

你好，复制构造函数和潜在的内存分配（忽略[短字符串优化（SSO）](https://stackoverflow.com/questions/10315041/meaning-of-acronym-sso-in-the-context-of-stdstring)）。C++11 的移动语义应该可以消除不必要的复制构造，对吧？并`A`通过一个临时的；没有理由`C`必须*复制*数据。它应该带着给它的东西潜逃。

除非它不能。因为它需要一个`const&`.

如果我更改`C`为按值获取其参数，那只会导致`B`复制到该参数中；我一无所获。

因此，如果我只是`str`通过所有函数按值传递，依靠`std::move`shuffle 数据，我们就不会有这个问题。如果有人想坚持下去，他们可以。如果他们不这样做，哦，好吧。

它更贵吗？是的; 移动到一个值比使用引用更昂贵。它比副本便宜吗？不适用于带有 SSO 的小字符串。值得做吗？

这取决于您的用例。你有多讨厌内存分配？

* * *

## 回答 #2

> 赞同：174
> 
> 时间：2012-04-19T21:07:49.760

> 将 const std::string & 作为参数传递的日子结束了吗？

**没有**。许多人将这个建议（包括 Dave Abrahams）超越了它所适用的领域，并将其简化为适用于*所有* `std::string`参数——对于任何和所有任意参数和应用程序，*始终*按值传递`std::string`并不是“最佳实践”，因为这些优化会谈/文章侧重于*仅适用于一组有限的案例*。

如果您要返回一个值、改变参数或获取值，那么按值传递可以节省昂贵的复制并提供语法便利。

*与以往一样，当您不需要*复制时，通过 const 引用传递可以节省大量复制。

现在到具体的例子：

> 但是 inval 仍然比引用的大小（通常实现为指针）大很多。这是因为 std::string 具有各种组件，包括指向堆的指针和用于短字符串优化的成员 char[]。所以在我看来，通过引用传递仍然是一个好主意。谁能解释为什么 Herb 会这么说？

如果堆栈大小是一个问题（并且假设这不是内联/优化的），`return_val`+ `inval`> `return_val`-- IOW，可以通过在此处传递值来*减少*峰值堆栈使用量（注意：ABI 的过度简化）。同时，通过 const 引用传递可以禁用优化。这里的主要原因不是避免堆栈增长，而是确保可以在*适用*的地方执行优化。

通过 const 引用传递的日子还没有结束——规则比以前更复杂了。如果性能很重要，明智的做法是根据您在实现中使用的详细信息来考虑如何传递这些类型。

* * *

## 回答 #3

> 赞同：67
> 
> 时间：2012-04-19T15:44:04.517

这在很大程度上取决于编译器的实现。

但是，这也取决于您使用什么。

让我们考虑下一个功能：

```
bool foo1( const std::string v )
{
  return v.empty();
}
bool foo2( const std::string & v )
{
  return v.empty();
} 
```

为了避免内联，这些函数在单独的编译单元中实现。然后：
1\. 如果您将文字传递给这两个函数，您将不会看到性能上有太大差异。在这两种情况下，都必须创建一个字符串对象
2。如果您传递另一个 std::string 对象，`foo2`将优于`foo1`，因为`foo1`会进行深层复制。

在我的电脑上，使用 g++ 4.6.1，我得到了这些结果：

*   引用变量：1000000000 次迭代 -> 经过时间：2.25912 秒
*   按值变量：1000000000 次迭代 -> 已用时间：27.2259 秒
*   参考字面量：100000000 次迭代 -> 已用时间：9.10319 秒
*   按值字面量：100000000 次迭代 -> 经过时间：8.62659 秒

* * *

## 回答 #4

> 赞同：64
> 
> 时间：2013-08-23T16:33:00.330

简短的回答：**不！**长答案：

*   **如果您不修改字符串（视为只读），请将其传递为`const ref&`.**
    *（`const ref&`显然需要在使用它的函数执行时保持在范围内）*
*   **如果您打算修改它或者您知道它将超出范围*(threads)*，请将其作为 a 传递`value`，不要复制`const ref&`函数体内部。**

**cpp-next.com**上有一篇帖子叫[**“要速度，要价值传递！”**](http://web.archive.org/web/20120908071416/http://cpp-next.com/archive/2009/08/want-speed-pass-by-value) . TL；DR：

> **准则**：不要复制你的函数参数。相反，按值传递它们并让编译器进行复制。

**^ 的翻译**

**不要复制函数参数**--- 意味着：*如果您打算通过将参数值复制到内部变量来修改参数值，则只需使用值参数即可*。

所以，**不要这样做**：

```
std::string function(const std::string& aString){
    auto vString(aString);
    vString.clear();
    return vString;
} 
```

**这样做**：

```
std::string function(std::string aString){
    aString.clear();
    return aString;
} 
```

当您需要修改函数体中的参数值时。

*你只需要知道你打算如何在函数体中使用参数。只读或非...以及它是否在范围内。*

* * *

## 回答 #5

> 赞同：44
> 
> 时间：2012-04-19T15:29:34.680

除非您确实需要副本，否则仍然可以合理使用`const &`. 例如：

```
bool isprint(std::string const &s) {
    return all_of(begin(s),end(s),(bool(*)(char))isprint);
} 
```

如果您将其更改为按值获取字符串，那么您最终将移动或复制参数，而无需这样做。不仅复制/移动可能更昂贵，而且还引入了新的潜在故障；复制/移动可能会引发异常（例如，复制期间的分配可能会失败），而引用现有值则不能。

如果您*确实*需要一个副本，那么按值传递和返回通常（总是？）是最好的选择。事实上，我通常不会在 C++03 中担心它，除非你发现额外的副本实际上会导致性能问题。复制省略在现代编译器上似乎相当可靠。我认为人们的怀疑和坚持认为你必须检查你的编译器对 RVO 的支持表现在基本上已经过时了。

* * *

简而言之，C++11 在这方面并没有真正改变任何东西，除了那些不信任复制省略的人。

* * *

## 回答 #6

> 赞同：31
> 
> 时间：2015-01-26T03:09:35.937

几乎。

在 C++17 中，我们有`basic_string_view<?>`，这使我们基本上归结为一个狭窄的`std::string const&`参数用例。

移动语义的存在已经消除了一个用例`std::string const&`——如果您计划存储参数，则按`std::string`值取值更佳，因为您可以`move`将参数排除在外。

如果有人用原始 C 调用你的函数，`"string"`这意味着只`std::string`分配一个缓冲区，而不是在这种`std::string const&`情况下分配两个。

但是，如果您不打算制作副本，那么`std::string const&`在 C++14 中采用仍然很有用。

使用`std::string_view`，只要您不将所述字符串传递给需要 C 样式`'\0'`终止字符缓冲区的 API，您就可以更有效地获得`std::string`类似的功能，而不会冒任何分配的风险。一个原始的 C 字符串甚至可以在`std::string_view`没有任何分配或字符复制的情况下转换为 a。

在这一点上，`std::string const&`当您不批量复制数据并将其传递给需要空终止缓冲区的 C 样式 API 时，使用 for 时，您需要`std::string`提供的更高级别的字符串函数。在实践中，这是一组罕见的要求。

* * *

## 回答 #7

> 赞同：18
> 
> 时间：2012-04-19T15:24:01.737

`std::string`不是[Plain Old Data(POD)](https://stackoverflow.com/questions/146452/what-are-pod-types-in-c)，它的原始大小也不是最相关的东西。例如，如果您传入一个超过 SSO 长度并在堆上分配的字符串，我希望复制构造函数不会复制 SSO 存储。

推荐这样做的原因是因为`inval`它是根据参数表达式构造的，因此总是根据需要移动或复制 - 假设您需要参数的所有权，不会造成性能损失。如果您不这样做，`const`参考仍然可能是更好的方法。

* * *

## 回答 #8

> 赞同：17
> 
> 时间：2012-04-19T16:13:27.920

我在这里复制/粘贴了[这个问题](https://stackoverflow.com/q/9952622/576911)的答案，并更改了名称和拼写以适应这个问题。

这是衡量所问内容的代码：

```
#include <iostream>

struct string
{
    string() {}
    string(const string&) {std::cout << "string(const string&)\n";}
    string& operator=(const string&) {std::cout << "string& operator=(const string&)\n";return *this;}
#if (__has_feature(cxx_rvalue_references))
    string(string&&) {std::cout << "string(string&&)\n";}
    string& operator=(string&&) {std::cout << "string& operator=(string&&)\n";return *this;}
#endif

};

#if PROCESS == 1

string
do_something(string inval)
{
    // do stuff
    return inval;
}

#elif PROCESS == 2

string
do_something(const string& inval)
{
    string return_val = inval;
    // do stuff
    return return_val; 
}

#if (__has_feature(cxx_rvalue_references))

string
do_something(string&& inval)
{
    // do stuff
    return std::move(inval);
}

#endif

#endif

string source() {return string();}

int main()
{
    std::cout << "do_something with lvalue:\n\n";
    string x;
    string t = do_something(x);
#if (__has_feature(cxx_rvalue_references))
    std::cout << "\ndo_something with xvalue:\n\n";
    string u = do_something(std::move(x));
#endif
    std::cout << "\ndo_something with prvalue:\n\n";
    string v = do_something(source());
} 
```

对我来说，这输出：

```
$ clang++ -std=c++11 -stdlib=libc++ -DPROCESS=1 test.cpp
$ a.out
do_something with lvalue:

string(const string&)
string(string&&)

do_something with xvalue:

string(string&&)
string(string&&)

do_something with prvalue:

string(string&&)
$ clang++ -std=c++11 -stdlib=libc++ -DPROCESS=2 test.cpp
$ a.out
do_something with lvalue:

string(const string&)

do_something with xvalue:

string(string&&)

do_something with prvalue:

string(string&&) 
```

下表总结了我的结果（使用 clang -std=c++11）。第一个数字是复制构造的数量，第二个数字是移动构造的数量：

```
+----+--------+--------+---------+
|    | lvalue | xvalue | prvalue |
+----+--------+--------+---------+
| p1 |  1/1   |  0/2   |   0/1   |
+----+--------+--------+---------+
| p2 |  1/0   |  0/1   |   0/1   |
+----+--------+--------+---------+ 
```

按值传递的解决方案只需要一个重载，但在传递左值和 xvalue 时会花费额外的移动构造。对于任何给定的情况，这可能是可接受的，也可能是不可接受的。两种解决方案都有优点和缺点。

* * *

## 回答 #9

> 赞同：15
> 
> 时间：2016-01-27T15:50:57.590

Herb Sutter 和 Bjarne Stroustroup 仍在记录中，推荐`const std::string&`作为参数类型；请参阅[https://github.com/isocpp/CppCoreGuidelines/blob/master/CppCoreGuidelines.md#Rf-in](https://github.com/isocpp/CppCoreGuidelines/blob/master/CppCoreGuidelines.md#Rf-in)。

这里的任何其他答案都没有提到一个陷阱：如果您将字符串文字传递给`const std::string&`参数，它将传递对临时字符串的引用，该字符串是即时创建的以保存文字的字符。如果您随后保存该引用，则一旦临时字符串被释放，它将无效。为了安全起见，您必须保存一份*副本*，而不是参考。问题源于字符串文字是`const char[N]`类型，需要提升到`std::string`.

下面的代码说明了缺陷和解决方法，以及一个次要的效率选项 - 使用`const char*`方法重载，如[Is there a way to pass a string literal as reference in C++](https://stackoverflow.com/questions/27365824/is-there-a-way-to-pass-a-string-literal-as-reference-in-c/27365886#27365886)中所述。

（注意：Sutter & Stroustroup 建议，如果您保留字符串的副本，还应提供带有 && 参数和 std::move() 的重载函数。）

```
#include <string>
#include <iostream>
class WidgetBadRef {
public:
    WidgetBadRef(const std::string& s) : myStrRef(s)  // copy the reference...
    {}

    const std::string& myStrRef;    // might be a reference to a temporary (oops!)
};

class WidgetSafeCopy {
public:
    WidgetSafeCopy(const std::string& s) : myStrCopy(s)
            // constructor for string references; copy the string
    {std::cout << "const std::string& constructor\n";}

    WidgetSafeCopy(const char* cs) : myStrCopy(cs)
            // constructor for string literals (and char arrays);
            // for minor efficiency only;
            // create the std::string directly from the chars
    {std::cout << "const char * constructor\n";}

    const std::string myStrCopy;    // save a copy, not a reference!
};

int main() {
    WidgetBadRef w1("First string");
    WidgetSafeCopy w2("Second string"); // uses the const char* constructor, no temp string
    WidgetSafeCopy w3(w2.myStrCopy);    // uses the String reference constructor
    std::cout << w1.myStrRef << "\n";   // garbage out
    std::cout << w2.myStrCopy << "\n";  // OK
    std::cout << w3.myStrCopy << "\n";  // OK
} 
```

输出：

> ```
> const char * constructor
> const std::string& constructor
> 
> Second string
> Second string 
> ```

* * *

## 回答 #10

> 赞同：11
> 
> 时间：2018-04-25T18:32:12.863

* * *

## 回答 #11

> 赞同：8
> 
> 时间：2012-04-25T09:26:34.833

IMO 使用 C++ 参考`std::string`是一种快速而简短的局部优化，而使用按值传递可能是（或不是）更好的全局优化。

所以答案是：这取决于情况：

1.  如果你把从外到内的所有代码都写在函数里，你就知道代码做了什么，你可以使用参考`const std::string &`。
2.  如果您编写库代码或在传递字符串的地方大量使用库代码，您可能会通过信任`std::string`复制构造函数行为获得更多全局意义。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2017-10-12T15:41:52.403

正如@JDługosz 在评论中指出的那样，Herb 在另一个（稍后？）谈话中给出了其他建议，大致从这里看到：[https](https://youtu.be/xnqTKD8uD64?t=54m50s) ://youtu.be/xnqTKD8uD64?t=54m50s 。

他的建议归结为仅对采用`f`所谓的接收器参数的函数使用值参数，假设您将从这些接收器参数中移动构造。

`f`与分别针对左值和右值参数定制的最佳实现相比，这种通用方法仅增加了左值和右值参数的移动构造函数的开销。要了解为什么会出现这种情况，假设`f`需要一个值参数，其中`T`是一些复制和移动可构造类型：

```
void f(T x) {
  T y{std::move(x)};
} 
```

使用左值参数调用`f`将导致调用构造函数的复制构造函数`x`和调用构造函数的移动构造函数`y`。另一方面，`f`使用右值参数调用会导致调用构造函数`x`移动构造函数，调用构造函数调用另一个移动构造函数`y`。

一般来说，`f`左值参数的最佳实现如下：

```
void f(const T& x) {
  T y{x};
} 
```

在这种情况下，只调用一个复制构造函数来构造`y`。右值参数的最佳实现`f`通常如下：

```
void f(T&& x) {
  T y{std::move(x)};
} 
```

在这种情况下，只调用一个移动构造函数来构造`y`。

因此，一个明智的折衷方案是采用一个值参数，并针对最佳实现对左值或右值参数进行一个额外的移动构造函数调用，这也是 Herb 演讲中给出的建议。

正如@JDługosz 在评论中指出的那样，按值传递仅对将从 sink 参数构造某个对象的函数有意义。当您有一个`f`复制其参数的函数时，按值传递方法将比一般的按常量引用方法具有更多开销。`f`保留其参数副本的函数的按值传递方法将具有以下形式：

```
void f(T x) {
  T y{...};
  ...
  y = std::move(x);
} 
```

在这种情况下，左值参数有复制构造和移动赋值，右值参数有移动构造和移动赋值。左值参数的最佳情况是：

```
void f(const T& x) {
  T y{...};
  ...
  y = x;
} 
```

这仅归结为一个赋值，它可能比复制构造函数加上传递值方法所需的移动赋值便宜得多。这样做的原因是分配可能会重用 中现有的分配内存`y`，因此会阻止（取消）分配，而复制构造函数通常会分配内存。

对于右值参数，保留副本的最佳实现`f`具有以下形式：

```
void f(T&& x) {
  T y{...};
  ...
  y = std::move(x);
} 
```

因此，在这种情况下只有一个移动分配。将右值传递给`f`接受 const 引用的版本只需要赋值而不是移动赋值。所以相对来说，`f`在这种情况下采用 const 引用作为通用实现的版本是更可取的。

因此，一般而言，为了获得最佳实施，您将需要重载或进行某种完美的转发，如演讲中所示。缺点是所需重载数量的组合爆炸，具体取决于参数的数量`f`，以防您选择在参数的值类别上重载。完美转发的缺点是`f`变成了一个模板函数，这会阻止它变成虚拟的，如果你想让它 100% 正确的话，会导致代码更加复杂（有关血淋淋的细节，请参阅谈话）。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-02-20T14:36:49.897

问题是“const”是一个非粒度限定符。“const string ref”通常的意思是“不要修改这个字符串”，而不是“不要修改引用计数”。在 C++ 中，根本没有办法说*哪些*成员是“const”。它们要么都是，要么都不是。

为了解决这个语言问题，STL*可以*允许您的示例中的“C()”*无论如何*都制作移动语义副本，并尽职尽责地忽略与引用计数（可变）有关的“const”。只要指定得当，就可以了。

由于 STL 没有，我有一个字符串版本，它 const_casts<> 远离引用计数器（无法追溯地在类层次结构中使某些东西可变），并且 - 你瞧 - 你可以自由地将 cmstring 作为 const 引用传递，并整天在深层功能中复制它们，没有泄漏或问题。

由于 C++ 在这里没有提供“派生类 const 粒度”，因此编写一个好的规范并制作一个闪亮的新“const 可移动字符串”（cmstring）对象是我见过的最好的解决方案。

# php - 无序列表缩进 css、php、xhtml

> ID：10231352
> 
> 赞同：0
> 
> 时间：2012-04-19T15:21:08.933
> 
> 标签：php, css, xhtml

我对这一切都很陌生。我有一个我正在开发的模拟网站的模板。模板中的左侧菜单很好。由于我已将左侧菜单更改为出现在 PHP 中，因此它一直向左缩进。我尝试将 css 更改为 margin-left = 0px 和其他东西但它保持不变。你可以看到 padding 还剩下 30 像素，但我将其更改为 0 像素，并且仍然保持缩进，并且刻度在文本上方。

[缩进 http://i.minus.com/iwFNaTVEdSzZw.png](http://i.minus.com/iwFNaTVEdSzZw.png)

CSS

```
ul.left_menu{
width:196px;
padding:0px;
margin:0px;
list-style:none;
}
ul.left_menu li{
margin:0px;
list-style:none;
}
ul.left_menu li.odd a{
width:166px;
height:25px;
display:block;
background:url(images/checked.png) no-repeat left #dad0d0;
background-position:5px 5px;
border-bottom:1px #FFFFFF solid;
text-decoration:none;
color:#504b4b;
padding:0 0 0 30px;
line-height:25px
 } ; 
```

xHTML

```
<div class="left_content">
  <div class="title_box">Categories</div>
  <ul class="left_menu">
    <li class="odd">
  <?php  include("category_menu.php"); ?>
    </li> 
```

编辑

```
//take the book types to be used on the left menu (leftColumn.php)
$query_category_menu = "SELECT category_id, category_name FROM      computineerCategory";

$query_category_menu_result = mysql_query($query_category_menu)
 or die(mysql_error());

echo '<ul>';
while($type_category_data = mysql_fetch_array($query_category_menu_result))
{
    print "<a href = 'category.php?categoryid=".$type_category_data["category_id"]."'>".$type_category_data["category_name"]."</a>";
}
echo '</ul>';
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:26:38.083

取出

```
echo '<ul>'

echo '</ul>' 
```

从 category_menu 文件中，您不需要添加两次

# java - Thread.currentThread().getName() 和 getName() 有什么区别？

> ID：10231354
> 
> 赞同：3
> 
> 时间：2012-04-19T15:21:14.073
> 
> 标签：java, multithreading

`Thread.currentThread().getName()`静态和`getName()`特定 Thread 实例有什么区别？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T15:27:00.327

不同之处`getName()`在于实例方法，这意味着它对`Thread`类的实例进行操作。

`Thread.getCurrentThread()`是一个类或静态方法，这意味着它不是对类的实例`Thread`而是对其类进行操作。

最终的区别是：如果您调用`Thread.currentThread().getName()`,`currentThread()`将返回 的实例`Thread`，然后您可以`getName()`在该实例上调用该实例。您不能调用`Thread.getName()`，因为`getName()`必须在 的实例上调用`Thread`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-04T18:08:57.743

然而，恰恰相反，Thread.currentThread() 返回当前的 Thread 实例。因此答案是：这两个函数来自同一个线程。试试这个：

```
Thread nuThread = new Thread("Proba"){
  @Override
  public void run() {
    System.out.println(this.getName());
    Thread other = Thread.currentThread();
    System.out.println(other.getName());
    System.out.println(this==other ? "Same object":"Different object");
  }
};
nuThread.start();
try {
  nuThread.join();
} catch (InterruptedException e) {
  e.printStackTrace();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-01T12:39:30.003

`Thread.currentThread().getName(...)`method 指的是当前线程的名称，而`getName(...)`指的是 Thread 类的任何实例的名称。

# java - 如何获取主文件夹的文件和子文件夹的更改？

> ID：10231355
> 
> 赞同：2
> 
> 时间：2012-04-19T15:21:15.777
> 
> 标签：java, sync

我正在尝试处理文件或文件夹子文件夹中的更改，然后将它们上传到 FTP（如同步文件夹），但我不知道该怎么做.. 任何人都可以给我线索或在哪里找到/李尔成功了吗？我宁愿用 Java 来做。

谢谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T15:22:56.060

[注意目录中的更改](http://docs.oracle.com/javase/tutorial/essential/io/notification.html)

本教程的摘录：

创建监视服务并注册事件

第一步是使用 FileSystem 类中的 newWatchService 方法创建一个新的 WatchService，如下：

```
WatchService watcher = FileSystems.getDefault().newWatchService(); 
```

接下来，向监视服务注册一个或多个对象。任何实现 Watchable 接口的对象都可以注册。Path 类实现了 Watchable 接口，因此每个要监控的目录都注册为一个 Path 对象。

与任何 Watchable 一样，Path 类实现了两个注册方法。此页面使用双参数版本 register(WatchService, WatchEvent.Kind...)。（三参数版本采用 WatchEvent.Modifier，目前未实现。）

向监视服务注册对象时，您指定要监视的事件类型。支持的 StandardWatchEventKinds 事件类型如下：

```
ENTRY_CREATE – A directory entry is created.
ENTRY_DELETE – A directory entry is deleted.
ENTRY_MODIFY – A directory entry is modified.
OVERFLOW – Indicates that events might have been lost or discarded. You do not have to register for the OVERFLOW event to receive it. 
```

以下代码片段显示了如何为所有三种事件类型注册 Path 实例：

```
import static java.nio.file.StandardWatchEventKinds.*;

Path dir = ...;
try {
    WatchKey key = dir.register(watcher,
                           ENTRY_CREATE,
                           ENTRY_DELETE,
                           ENTRY_MODIFY);
} catch (IOException x) {
    System.err.println(x); 
```

# ios - 临时分发 iTunes 同步错误

> ID：10231356
> 
> 赞同：1
> 
> 时间：2012-04-19T15:21:17.163
> 
> 标签：ios, xcode, provisioning

所以我已经有一段时间了，我找不到任何有帮助的东西。当我尝试通过 iTunes 将我的 ipa 安装到设备上时，我得到应用程序无法同步错误。我考虑了以下几点：

我的应用程序正在使用分发配置文件。我在该分发配置文件中注册了设备。

我已通过将分发配置文件拖入 iTunes 将其放置在设备上。

权利 plist 与供应分发配置文件中的权利相匹配。

当我在 Xcode 中运行该应用程序时，该应用程序一直运行到“进程无法附加”点，这是预期的，因为 get-task-allow 设置为 false。

我不确定我在这里可能会丢失什么，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T17:12:37.523

您需要创建一个临时配置文件以在该配置文件中包含您的测试设备 UDID。将该配置文件拖放到 iTunes 中。

# oracle-apex - APEX 3.2：如何从 Outlook 发送电子邮件

> ID：10231362
> 
> 赞同：1
> 
> 时间：2012-04-19T15:21:38.293
> 
> 标签：oracle-apex

我希望在我的 APEX 页面中有一个链接，该链接将打开一封带有特定主题和收件人的 Outlook 电子邮件。谁能指出我这个例子的方向或提供一个快速的高水平如何做到这一点？

```
TO: Email_Name@email.com
Subject: Specific Text Here 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T17:31:28.810

我想到了：

1.  创建一个新的列表条目。
2.  将目标类型设置为：URL
3.  将 URL 目标设置为：mailto:Someone@Somewhere.com?cc=SomeOneElse@Someplace.com&subject=Enormous Teeth

# tfs - 使用 TFS API 按 Id 获取特定的 TestSuite

> ID：10231365
> 
> 赞同：2
> 
> 时间：2012-04-19T15:21:46.523
> 
> 标签：tfs, tfs-sdk

我正在尝试使用 TFS API 为 TestPlan 获取特定的 TestSuite。

TestSuite 可以存在于 TestSuite 层次结构中的任何位置，因此，我当然可以编写一个递归函数。但是，我想要更有效的东西。

有没有我遗漏的方法，或者我可以写一个查询？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T14:44:36.730

如果你已经知道`testSuiteId`事情很简单。您只需要知道 TeamProject 的名称`teamProjectName`：

```
using System;
using Microsoft.TeamFoundation.Client;
using Microsoft.TeamFoundation.TestManagement.Client;

namespace GetTestSuite
{
    class Program
    {
        static void Main()
        {
           int testSuiteId = 555;
           const string teamProjectName = "myTeamProjectName";

           var tpc =
                TfsTeamProjectCollectionFactory.GetTeamProjectCollection(
                    new Uri("http://tfsURI"));

           var tstService = (ITestManagementService)tpc.GetService(typeof(ITestManagementService));
           var tProject = tstService.GetTeamProject(teamProjectName);

           var myTestSuite = tProject.TestSuites.Find(testSuiteId);            
        }
    }
} 
```

如果您不这样做，您可能需要寻求类似于[此处](http://blogs.microsoft.co.il/blogs/shair/archive/2010/07/06/tfs-api-part-27-test-plans-test-suites-test-cases-mapping.aspx)介绍的解决方案（这是 S.Raiten 的帖子），其中递归确实出现了。`testPlanId`假设访问 a ：

```
using System;
using Microsoft.TeamFoundation.Client;
using Microsoft.TeamFoundation.TestManagement.Client;

namespace GetTestSuite
{
    class Program
    {
        static void Main()
        {
            int testPlanId = 555;
            const string teamProjectName = "myTeamProjectName";

            var tpc =
                TfsTeamProjectCollectionFactory.GetTeamProjectCollection(
                    new Uri("http://tfsURI"));

            var tstService = (ITestManagementService)tpc.GetService(typeof(ITestManagementService));
            var tProject = tstService.GetTeamProject(teamProjectName);

            var myTestPlan = tProject.TestPlans.Find(testPlanId);
            GetPlanSuites(myTestPlan.RootSuite.Entries);                
        }

        public static void GetPlanSuites(ITestSuiteEntryCollection suites)
        {
            foreach (ITestSuiteEntry suiteEntry in suites)
            {
                Console.WriteLine(suiteEntry.Id);
                var suite = suiteEntry.TestSuite as IStaticTestSuite;
                if (suite != null)
                {
                    if (suite.Entries.Count > 0)
                        GetPlanSuites(suite.Entries);
                }
            }
        }
    }
} 
```

# .net - .Net WebRequest.Create 解码编码的 URI

> ID：10231368
> 
> 赞同：1
> 
> 时间：2012-04-19T15:22:07.690
> 
> 标签：.net, vb.net, .net-3.5

我正在使用 Web 请求编写对 LinkedIn API 的一些休息调用，并且遇到了编码问题。LinkedIn API 需要一个编码的 URI 作为我尝试运行的查找的参数之一。

我们通过 .Net 的 WebRequest.Create 调用 api；当我们传入 URI 时，它会对其进行解码，因此我们无法从调用中获取数据。我试图打开这样的 URI

```
http://api.linkedin.com/v1/people/url=http%3A%2F%2Fwww.linkedin.com%2Fin%2FProfileName 
```

webrequest 类中是否有机制阻止它对传入的 URI 进行解码；或解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:46:23.557

我不确定这是否会奏效，但它显示出一些希望。

```
static readonly string UrlString =
  "http://api.linkedin.com/v1/people/url=http%3A%2F%2Fwww.linkedin.com%2Fin%2FProfileName";

Uri myUri = new Uri(Uri.EscapeUriString(UrlString));
Console.WriteLine(myUri.ToString());  // this is only to show the string for debugging

HttpWebRequest request = (HttpWebRequest)WebRequest.Create(myUri); 
```

那里的输出与`Console.WriteLine`您想要的字符串具有相同的格式。如果您将该 Uri 传递给`WebRequest.Create`，它很可能会做您想做的事。

# php - 处理 Instagram API (JSON + PHP)

> ID：10231369
> 
> 赞同：1
> 
> 时间：2012-04-19T15:22:19.920
> 
> 标签：php, json, api, instagram

我是 PHP 新手，我不知道如何处理 Instagram API，以便（例如）通过 user_id 3 发布的最近 3 个项目提取标准分辨率图像的链接列表。

这是我到目前为止创建的内容：

```
<?php
function get_instagram($user_id,$count)
{
    $user_id = '3';
    $count = '3';
    $url = 'https://api.instagram.com/v1/users/'.$user_id.'/media/recent/?access_token=13137.f59def8.1a759775695548999504c219ce7b2ecf&count='.$count;
    $jsonData = $json_decode((file_get_contents($url)));
    $data = $jsonData->data;
    $result = '<ul>';
    foreach ($data as $key => $value) {
        $result .= '<li><a href='.$value->link.' ><img src="'.$value->images->standard_resolution->url.'" width="70" height="70" /></a></li> ';
    }
    $result .= '</ul>';
    return $result;
} 
```

结果是一个空白页..你能帮我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T15:49:38.297

您需要对返回的数据进行回显或执行某些操作（此外`$`，您的 json_decode 函数前面有一个胭脂）

**试试这个：**

```
<?php
function get_instagram($user_id=15203338,$count=6,$width=190,$height=190){

    $url = 'https://api.instagram.com/v1/users/'.$user_id.'/media/recent/?access_token=13137.f59def8.1a759775695548999504c219ce7b2ecf&count='.$count;

    // Also Perhaps you should cache the results as the instagram API is slow
    $cache = './'.sha1($url).'.json';
    if(file_exists($cache) && filemtime($cache) > time() - 60*60){
        // If a cache file exists, and it is newer than 1 hour, use it
        $jsonData = json_decode(file_get_contents($cache));
    } else {
        $jsonData = json_decode((file_get_contents($url)));
        file_put_contents($cache,json_encode($jsonData));
    }

    $result = '<div id="instagram">'.PHP_EOL;
    foreach ($jsonData->data as $key=>$value) {
        $result .= "\t".'<a class="fancybox" data-fancybox-group="gallery" 
                            title="'.htmlentities($value->caption->text).' '.htmlentities(date("F j, Y, g:i a", $value->caption->created_time)).'"
                            style="padding:3px" href="'.$value->images->standard_resolution->url.'">
                          <img src="'.$value->images->low_resolution->url.'" alt="'.$value->caption->text.'" width="'.$width.'" height="'.$height.'" />
                          </a>'.PHP_EOL;
    }
    $result .= '</div>'.PHP_EOL;
    return $result;
}

echo get_instagram();
?> 
```

* * *

和`$value->location->name`

如果你想检查它是否为空，如果它是空的，那么不要显示它，但如果它被设置，你还想在它上面附加一个字符串，你会做类似的事情：

```
$location = (!empty($value->location->name))?'@'.$value->location->name:null; 
```

然后使用`$location`在你想要的地方回显。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-13T18:21:24.907

我通过编写一个小脚本扩展了所选答案，该脚本可以用作任何尝试此操作的人的样板。

它设置了所有变量，并从基本标记开始。使用 Instagrams API 文档中的选择器，您可以根据需要构建其输出。

这是专门与 WordPress 一起使用的，只需对图像大小进行一点小调整，条件是它可以在任何 PHP 应用程序中使用。

```
<?php
function instagram($count = 10, $width = 640, $height = 640) {

    $user_id = 123456789;
    $access_token = '123456789';
    $size = wp_is_mobile() ? 'low_resolution' : 'standard_resolution';
    $url = 'https://api.instagram.com/v1/users/'.$user_id.'/media/recent/?access_token='.$access_token.'&count='.$count;
    $cache_location = './'.sha1($url).'.json';
    $cache_time = '-1 hour';

    if (file_exists($cache_location) && filemtime($cache_location) > strtotime($cache_time)) {
        // If a cache file exists, and it is newer than 1 hour, use it
        $jsonData = json_decode(file_get_contents($cache_location));
    } else {
        $jsonData = json_decode((file_get_contents($url)));
        file_put_contents($cache_location,json_encode($jsonData));
    }

    foreach ($jsonData->data as $key=>$value) {
        echo '<div>';
        echo '<img src="'.$value->images->$size->url.'"/>';
        echo '</div>';
    }
} 
```

基本用法

```
<?php echo instagram(); ?> 
```

高级用法

```
<?php echo instagram($count = 1, $width = 100, $height = 100); ?> 
```

[Github 回购](https://github.com/j2designpartnership/instagram-php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-22T22:30:16.037

韦尔普，这是一周前的工作，但现在，它给了我一个 PHP 错误：

> “消息：试图获取非对象的属性”

与 foreach 语句一致：`foreach ($jsonData->data as $key=>$value)`

结果我的 JSON 提要实际上已损坏，我的一些 instagram 的标题丢失了，所以我不得不添加一个 if empty 语句。我现在也在使用不同的方法，很好奇你的想法，效果很好！

```
<?php

  function fetchData($url){
  $ch = curl_init();
  curl_setopt($ch, CURLOPT_URL, $url);
  curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
  curl_setopt($ch, CURLOPT_TIMEOUT, 20);
  $result = curl_exec($ch);
  curl_close($ch); 
  return $result;
  }

  $result = fetchData("https://api.instagram.com/v1/users/USER ID HERE/media/recent/?access_token=ACCES TOKEN HERE&count=14");

  $cache = './instagram.json';
  if(file_exists($cache) && filemtime($cache) > time() - 60*60){
  // If a cache file exists, and it is newer than 1 hour, use it
  $instaData = json_decode(file_get_contents($cache));
    } else {
  $instaData = json_decode((file_get_contents($result)));
    file_put_contents($cache,json_encode($instaData));
  }

  foreach ($instaData->data as $post) {
     if(empty($post->caption->text)) {
       // Do Nothing
     }
     else {
        echo '<a class="instagram-unit" target="blank" href="'.$post->link.'">
        <img src="'.$post->images->low_resolution->url.'" alt="'.$post->caption->text.'" width="100%" height="auto" />
        <div class="instagram-desc">'.htmlentities($post->caption->text).' | '.htmlentities(date("F j, Y, g:i a", $post->caption->created_time)).'</div></a>';
     }

  }
?> 
```

# javascript - 使用 Rails 3.2，是否应避免在视图中包含条件 JavaScript？

> ID：10231371
> 
> 赞同：0
> 
> 时间：2012-04-19T15:22:26.077
> 
> 标签：javascript, ruby-on-rails-3.1, haml, ruby-on-rails-3.2

众所周知，Rails 框架建议通过所谓的 UJS 严格分离 JavaScript 和 Html，但是有时，我发现自己需要在我的视图中包含即兴的 JavaScript 片段。**首先，我想知道这是否正确？还是被人嫌弃了？**

我发现自己这样做的最常见情况是，例如，当我有一个像这样的条件块时：

```
= form_for @place do |f|
  %h5 Address:
  .input-prepend
    %span{ :class => "add-on" } 
      %i{ :class => "icon-road" }
    = f.text_field :address

  %h5 Name:
  .input-prepend
    %span{ :class => "add-on" } 
      %i{ :class => "icon-pencil" }
    = f.text_field :name

  = f.hidden_field :latitude
  = f.hidden_field :longitude

  #post-button
    %button{ :class => "btn btn-primary", :type => "submit" } Post it! 

- unless logged_in?
  :javascript
    $('#post-button > button, .input-prepend input').addClass('disabled');
    $('.input-prepend input').addClass('disabled');
    $('.input-prepend input').attr('disabled', 'disabled');
    new PopOver().setPopOver($('#post-button > button'), "You must be logged in to register your Business"); 
```

看看嵌套在除非条件中的代码，我想知道*它*是否可以放在那里，或者**我应该以某种方式从控制器生成那部分代码？**（并将它（渲染）传递给视图：在这种情况下，我不知道该怎么做......）

请让我知道您的想法，我需要知道最有经验的 Rails 开发人员将如何处理这些类型的情况，因此，如果您是其中之一，我很乐意阅读您的答案。

提前致谢！

PS。哦，如果可能的话，请让我看看有关如何解决此问题的代码选项，再次感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:53:25.763

UJS 无疑是目前 Rails 世界中最流行的方法，但不同的开发人员将其推向了不同的极端。我认识的一些开发人员完全回避它，因为根据他们的说法，当您仅查看 html 时，您不知道是否会通过 JS 对特定元素进行操作（我个人认为这很好，因为 HTML 只是关于结构，而不是功能）。

就您的特定问题而言，很明显，您不能简单地将 javascript 放入要与页面一起加载的常规 javascript 文件夹中，因为 javascript 不会知道您是否已登录。您可以在某处放置一个指示器DOM 表明您已登录，但对我来说这太容易被欺骗了。根据服务器上的数据决定是否运行 javascript 的一种相当安全的方法是对服务器进行 AJAX 调用，如下所示：

1.  浏览器加载的 Javascript 对服务器进行 get AJAX 调用（使用 $.getScript() 和 jQuery）
2.  Rails 控制器中的操作使用 .js.erb 模板响应 AJAX 调用
3.  您可以将尽可能多的服务器端逻辑放入 .js.erb 模板中（即仅在用户未登录时运行 javascript）

这样，您就可以将 javascript（功能）排除在 html（结构）之外，同时仍然能够做出服务器端决策。railscast 中有类似的场景用于[动态页面缓存](http://railscasts.com/episodes/169-dynamic-page-caching-revised)

例如，如果在您的 application.js 中，您有：

```
$.getScript('/users/show') 
```

然后这将调用您的`UsersController#show`操作。然后 Rails 会寻找`app/views/users/show.js.erb`模板。在此文件中，您可以拥有以下内容：

```
<% unless logged_in? %>
  $('#post-button > button, .input-prepend input').addClass('disabled');
  $('.input-prepend input').addClass('disabled');
  $('.input-prepend input').attr('disabled', 'disabled');
  new PopOver().setPopOver($('#post-button > button'), "You must be logged in to register your Business");
<% end %> 
```

一旦浏览器收到来自服务器的响应，javascript 就会自动运行。在这种情况下，它只会在用户未登录时运行 javascript。

# android - 未调用 LocationListener 网络提供程序

> ID：10231376
> 
> 赞同：3
> 
> 时间：2012-04-19T15:22:41.767
> 
> 标签：android, location

我正面临一个非常烦人的问题。在程序的某些地方，我需要跟踪用户位置。为此，我为所有可用的提供者注册了一个监听器并请求更新。在我将手机更新到 Android 4.0 之前，这真的很好用。但是相同的代码在旧版本中运行良好。

现在，没有调用监听器。但仅在某些条件下：

*   如果我有 gps 坐标，这工作得很好，即使 gps 坐标丢失，我也得到网络
*   但是如果没有gps坐标并且没有wifi信号（但是手机上的wifi是启用的），我应该可以使用3g获取坐标。这是它不工作的地方。如果我调试，我可以看到监听器是如何注册的，但它从未被调用。

请帮忙！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:52:59.583

不知道你有没有经历[过](http://developer.android.com/guide/topics/location/obtaining-user-location.html)。如果没有，它会对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T18:26:07.193

您的设备中有 SIM 卡吗？我发现这为我解决了这个问题。

顺便说一句，我发现在我将 Galaxy Nexus 升级到 Android 4.x（特别是 4.2.2）后，我的设备开始发生奇怪的事情。也许这在更新中有一些错误？

# ember.js - 如何在 ContainerView Tag 中初始化子元素？

> ID：10231378
> 
> 赞同：1
> 
> 时间：2012-04-19T15:22:49.557
> 
> 标签：ember.js, handlebars.js

如何在 ContainerView 中初始化子元素？

例如，这个模板：

```
{{#view Ember.CardLayout}}

  {{view Ember.TextField}}

{{/view}} 
```

这个观点：

```
/**
* [Table description]
* @type {[type]}
*/
Ember.CardLayout = Ember.ContainerView.extend({
    title: null,
    // ??? 
    childViews: ['testView'],
    testView: Ember.Checkbox.create(),
    render: function(buffer) {
      this.forEachChildView(function(view) {
        view.renderToBuffer(buffer);
      });
    }
}); 
```

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T19:47:45.233

您可能想从[文档](http://docs.emberjs.com/#doc=Ember.ContainerView&src=false)开始。其中包含许多您可能会觉得有帮助的示例。我会推荐这样的东西：

```
App.cardLayout = Ember.ContainerView.create({
  title: null,
  childViews: ['testView'],
  testView: Ember.Checkbox.create()
}); 
```

然后是一个模板

```
{{view App.cardLayout}} 
```

然后，您可以通过操作`App.cardLayout.get('childViews')`对象来添加和删除视图。

# image-recognition - 人的图形识别

> ID：10231380
> 
> 赞同：1
> 
> 时间：2012-04-19T15:22:55.883
> 
> 标签：image-recognition

我想知道开始一个项目以执行人的图形识别的最佳方法是什么。换句话说，计算机将解析图像文件并通过启发式计算来判断它是否看到了人的形状。

任何可用的 API 或开放源代码，这是否太超前了？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T14:34:33.413

您是在寻找人脸检测还是人物检测？

如果人脸检测：

OpenCV 带有用于人脸检测的样本。OpenCV 2.4-beta 也有用于人脸识别的样本。在这里检查：http: [//github.com/Itseez/opencv/tree/master/samples/cpp](http://github.com/Itseez/opencv/tree/master/samples/cpp) 如果人员检测：

OpenCV 附带了一个使用[HOG 描述符](http://en.wikipedia.org/wiki/Histogram_of_oriented_gradients)进行人员检测的示例。[关联](https://github.com/Itseez/opencv/blob/master/samples/cpp/peopledetect.cpp)

这是我用上面的代码得到的结果：

![在此处输入图像描述](../Images/daaee02584751ee1410918800c3b7c85.png)

# jquery - jquery 事件 preventDefault() 不起作用

> ID：10231382
> 
> 赞同：1
> 
> 时间：2012-04-19T15:22:58.887
> 
> 标签：jquery, asp.net-mvc, preventdefault

我使用 MVC 并想通过 jquery 提交表单，但是为了让 mvc 内置验证在任何无效输入的情况下工作，我已经设置了 click 事件的“return false”（也尝试了“event.preventDefault ")，以防从控制器获得“成功” json 返回。

这是代码：

```
$(document).ready(function () {
    var request;
    $('#formSubmit').click(function (event) {
        request = $.ajax({
            url: '/personManager/loadDetails/',
            type: 'post',
            data: $('form').serialize()
        });
        request.done(function(data){
            if(data=="success")
                event.preventDefault();
            });

        });
    }); 
```

我不能让它工作......我做错了什么？另外，在使用 jquery 时，是否有更有效的方法来保留 mvc 验证机制？

**更新**：如果我尝试更简单地描述我的愿望：我想设置 click 事件的 preventDefault 条件，所以在某种情况下它会调用表单提交，而在其他情况下，它不会，只有 $.ajax 工作. 在我在服务器端确认没有采取任何行动后，第二个准确。一定有办法的，我猜...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T15:28:39.757

问题很可能是因为您的 ajax 是异步的。将其设置为同步，您的代码应该可以正常工作。但是请注意，如果服务器无法立即响应，您将面临用户浏览器冻结的风险。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T15:25:21.460

上周我遇到了类似的问题。你需要设置`async:false`你的`$.ajax`功能。您的默认事件可能在`ajax`响应有机会阻止这种情况之前运行。这是因为 AJAX 是异步运行的。设置`async:false`将防止这种情况发生。但正如[@Kolink](https://stackoverflow.com/a/10231499/370103)所指出的，这确实意味着如果响应失败，您的页面可能会冻结。

```
$(document).ready(function (e) {
    var request;
    var preventDefault = false;
    $('#formSubmit').click(function (event) {
        request = $.ajax({
            url: '/personManager/loadDetails/',
            type: 'post',
            data: $('form').serialize()
            , async: false
        });
        request.done(function (data) {
            if (data == "success")
                preventDefault = true;
        });

        if (preventDefault){
           e.preventDefault();
        }

    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T15:54:05.993

为什么不使用，jQuery 验证？您需要特定于服务器端的验证吗？我意识到您已经在使用 mvc 内置验证，但是由于您使用 jQuery 提交表单，您不妨使用它进行验证。只是一个建议，因为这样你可以这样做：

```
$(document).ready(function () {
    $('form').validate({
        rules: {},
        messages: {}
    });
    var request;
    $('#formSubmit').click(function (event) {
            if($('form').valid()){
                request = $.ajax({
                    url: '/personManager/loadDetails/',
                    type: 'post',
                    data: $('form').serialize()
                });
                request.done(function(data){
                    if(data=="success")
                        event.preventDefault();
                    });                     
            }

        });
    }); 
```

# c# - 推荐的适用于 windows 的 Git 工具

> ID：10231389
> 
> 赞同：3
> 
> 时间：2012-04-19T15:23:27.180
> 
> 标签：c#, windows, visual-studio-2010, git

我只使用过 VSS（我知道 uggh）和 Team Foundation Server 在 Windows 上进行源代码控制管理。我使用 Visual Studio 2010 作为我的 IDE 在 c# 中进行开发。我现在需要在下一个项目中使用 Git。

你能推荐一个Git工具吗？我知道这个问题以前在 SOF 上被问过，但它似乎有点过时了。还考虑到我只使用过来自 MS 稳定版的存储库，我希望 GIT 有一个类似的 GUI 或 VS 插件可以帮助我适应。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T15:57:40.127

[GitExtensions](http://code.google.com/p/gitextensions/)非常完整，并且在 Visual Studio 2010 中也很好地集成了。

对于[TortoiseGit](http://code.google.com/p/tortoisegit/)和 GitExtensions 之间的比较，看看这个[StackOverflow 问题](https://stackoverflow.com/questions/6011893/tortoisegit-vs-git-extensions)

TortoiseGit 和 GitExtensions 都是开源的。

[在这里](https://git.wiki.kernel.org/articles/i/n/t/Interfaces,_frontends,_and_tools.html)，您可以找到可用前端的列表。

我个人建议使用 GitExtensions，它也有一套不错的快捷键（我讨厌在开发时从键盘切换到鼠标）。

也看看[这个其他问题](https://stackoverflow.com/questions/157476/what-guis-exist-for-git-on-windows)，你可能会发现它很有用。

### 更新

当我发现 SmartGIT 时，我退出了使用[GitExtension](http://www.syntevo.com/smartgit/)。我强烈建议也考虑到它：它没有与 Windows 文件资源管理器集成（现在我认为这是一个好处），它有一个非常精致和智能的 GUI。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-19T15:27:34.463

我仍然使用[Git-bash](http://code.google.com/p/msysgit/)的命令行。有时使用[TortoiseGit 。](http://code.google.com/p/tortoisegit/)

**Git-bash**让你提前在 Git 上变得强大，当你有其他系统而不是 Windows 时，你仍然有知识。对于**TortoiseGit**，我喜欢看图形虚拟化——它会显示代码分支之间的关系，让你易于理解，也可以统计。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-19T16:06:45.570

[SmartGit](http://www.syntevo.com/smartgit/)很棒 :) 我们在我工作的地方使用它，它确实有助于简化合并冲突和解决方案。否则，您总是可以下载 eclipse 并使用 eGit，但它相对有问题。

我强烈建议阅读 StackOverflow 上的 Git 指南：

[Git 初学者：权威实用指南](https://stackoverflow.com/questions/315911/git-for-beginners-the-definitive-practical-guide)

它涵盖了所有 GUI 工具、流程、参考资料和其他资源。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T15:26:05.823

从来不是 Git 的粉丝（我更喜欢使用 SVN 和 hg），但考虑到 TortoiseSVN 和 TortoiseHG 都非常好，我建议尝试[TortoiseGit](http://code.google.com/p/tortoisegit/)，它是 TortoiseSVN 的一个端口，可以与 Git 而不是 SVN 一起使用。

# sql - 关键字段上存在 1 到 3 关系的表之间的差异

> ID：10231394
> 
> 赞同：2
> 
> 时间：2012-04-19T15:23:35.720
> 
> 标签：sql, sql-server, tsql

我正在尝试使用 SQL 服务器创建一个表，该表创建一个两者之间的差异表。我在其他帖子中没有发现的棘手部分是一个表是单个“帐户”数据，如下所示：

```
TABLE A      
Account  Security ID  Sec Name   Shares
-------  -----------  ---------  ------
1        Sec1         Security1  20000
1        Sec2         Security2  50000
1        Sec3         Security3  10000
1        Sec4         Security4  35000 
```

我想与之比较的数据是一组“帐户”（本例中为 3 个）：

```
TABLE B        
Parent_acct  Account  Security ID  Sec Name   Shares
-----------  -------  -----------  ---------  ------
Clone        200      Sec1         Security1  15000
Clone        200      Sec3         Security3  22000
Clone        200      Sec4         Security4  8000
Clone        300      Sec1         Security1  11000
Clone        300      Sec3         Security3  8500
Clone        300      Sec4         Security4  11200
Clone        400      Sec1         Security1  16000
Clone        400      Sec2         Security2  7800
Clone        400      Sec3         Security3  3500 
```

我需要一些 sql 来查找表 A 中包含的每个帐户的表 B 中缺少的安全 ID

例如，给定上面的两个表，我希望下面的输出告诉我缺少的安全性以及缺少的帐户。

希望这是有道理的。

我已经使用游标查询来生成我需要的数据，但是，我正在尝试创建可以轻松应用于 Crystal Reports 的东西，而游标查询对此没有用。

提前感谢您查看此内容。

```
Output    
Account   Security ID  Sec Name
(From B)  (From A)     (From A)
-------   -----------  ---------
200       Sec2         Security2
300       Sec2         Security2
400       Sec4         Security4 
```

到目前为止我的查询：

```
select * FROM
(SELECT * from 
(select p.acct_cd, s.ext_sec_id, s.sec_name, p.qty_sod
from csm_Security s, cs_position p
where s.sec_id = p.sec_id
and p.acct_cd = '329'
and s.sec_typ_cd in ('COM','FSTK','ADR')) A
cross join 
(select distinct child_acct_cd
cs_fund_config fc
where fc.parent_acct_cd IN ('clone_as')) B) AAccounts,
(select fc.child_acct_cd, s.ext_sec_id, s.sec_name, p.qty_sod
from csm_Security s, cs_position p, cs_fund_config fc
where s.sec_id = p.sec_id
and fc.child_acct_cd = p.acct_cd
and fc.parent_acct_cd IN ('clone_as')
and s.sec_typ_cd in ('COM','FSTK','ADR')) BAccounts
where AAccounts.ext_sec_id *= BAccounts.ext_sec_id
and AAccounts.child_acct_cd *= BAccounts.child_acct_cd 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T16:09:46.427

Tricky one! Try this (I can't test it, watch out for syntax errors):

```
SELECT BAccounts.Account, A.SecurityID, A.SecName
 from TableA  A
  cross join (select distinct Account
               from TableB) BAccounts
  left outer join TableB B
   on B.Account = BAccounts.Account
    and B.SecurityID = A.SecurityID
 where B.SecurityID is null 
```

The logic is:

*   Start with TableA
*   Join each row with all possible accounts found in table B
*   Now left-outer-join it with Table B, using B's Account and A's SecurityId
*   If not found, B.SecurityId is null, and we have the offending Account via the subquery

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T15:57:05.420

据我所知，这应该是一个相对直接的外连接。它被称为外连接，因为我们希望将一个表中没有匹配的行包含在第二个表中以及匹配的行中。使用关键字`LEFT JOIN`，因为我们将表 A 放在 join 子句的左侧，这表明我们正在执行外部连接，并且应该包含 A 中在 B 中没有匹配的行。where 子句将只选择那些行。当然，您将无法从 B 获取帐号，因为表 B 中没有此安全 ID 的行。不过，A 的帐号应该不错，对吧？

```
SELECT
  A.Account,
  A.[Security Id]
  A.[Sec Name]
FROM
  A LEFT JOIN B 
    ON A.[Security Id] = B.[Security Id]
    AND A.Account = B.Account
WHERE
  B.[Security Id] IS NULL 
```

# java - 有没有办法从文件夹中递归列出所有文件？

> ID：10231398
> 
> 赞同：-1
> 
> 时间：2012-04-19T15:23:39.657
> 
> 标签：java

> **可能重复：**
> [在 Java 中递归列出文件](https://stackoverflow.com/questions/2056221/recursively-list-files-in-java)

我认为 File[] files = folder.listFiles() 只能列出第一级文件。有没有办法递归列出文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:25:28.963

不是内置的，但您可以编写一个简短的递归程序来递归遍历目录树。

```
void listAll(File dir, List<File> res) {
    for (File f : dir.listFiles()) {
        if (f.isDirectory()) {
            listAll(f, res);
        } else {
            res.add(f);
        }
    }
} 
```

# javascript - jQuery - 填充下拉表单选项值

> ID：10231400
> 
> 赞同：3
> 
> 时间：2012-04-19T15:23:43.387
> 
> 标签：javascript, jquery, html, forms

我可以为`#maplist`选择下拉列表填充选项字段的名称：

```
$.each(mapsArray, function(x,y) {

    $.each(y, function(j,z) { 

        $('#maplist').append(

            $('<option></option>').html(z.mapName)

        );
    });
}); 
```

但我不知道如何添加`.val`到每个选项字段（在这种情况下，它将是`z.mapID.$id`）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:24:59.837

```
$.each(mapsArray, function(x,y) {

    $.each(y, function(j,z) { 

        $('#maplist').append(

            $('<option value="'+ z.mapName +'">'+ z.mapName +'</option>');

        );
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T15:39:37.420

我会这样做，而不是连接一堆字符串。

```
$.each(mapsArray, function(x,y) {
    $.each(y, function(j,z) { 
       $('#maplist').append(
          $('<option></option>').val(z.mapName).text(z.mapName);
       );
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T15:25:06.710

使用 .attr()：

[http://api.jquery.com/attr/](http://api.jquery.com/attr/)

```
$.each(mapsArray, function(x,y) {
    $.each(y, function(j,z) { 
        $('#maplist').append(
            $('<option></option>').html(z.mapName).attr('value', z.mapID.$id);
        );
    });
}); 
```

# actionscript-3 - 停止嵌入的 swf 文件

> ID：10231408
> 
> 赞同：0
> 
> 时间：2012-04-19T15:24:03.733
> 
> 标签：actionscript-3

我有一个 SWF 格式的视频，我需要将它嵌入到另一个 SWF 文件中。这个我没有问题。视频被嵌入，在需要时播放，但我不知道如何停止它。我的代码是这样的：

```
var k:Object = new videoClass();
video = k as MovieClip;
parentObject.addChild(video); 
```

现在，当我想卸载视频时，我称之为：

```
parentObject.removeChild(video);
video.stop();
video = null; 
```

可悲的是，视频确实卸载了，但我仍然可以听到播放的声音。知道如何解决这个问题吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T16:53:13.977

[编辑] 为什么不使用视频转换成视频格式，比如 FLV ？SWF 不像 FLV 那样针对视频进行优化。

加载的 SWF 在其时间轴中只有一个静态视频，或者上面有任何编程？也许您正在处理带有代码的 SWF，它可以播放视频。

如果是这种情况，您可以从中访问公共方法并对其进行控制。

```
var video:MovieClip = new videoClass() as MovieClip;
parentObject.addChild(video);
...
video.publicMethodToStopAllMedia();
parentObject.removeChild(video); 
```

# .net - 使用 Mono.Cecil 创建带有内联参数的 IL 指令

> ID：10231409
> 
> 赞同：4
> 
> 时间：2012-04-19T15:24:04.700
> 
> 标签：.net, mono.cecil, mutation-testing

我现在正在玩突变测试。我正在研究的其中一个突变涉及交换参数，例如，我可能需要交换参数，`Ldarg.0`并`Ldarg_S`使用指示索引的操作数。

其操作数类型是内联 arg，我相信在 Mono.Cecil 中需要我创建一个正确实例化`ParameterDefinition`来存储 32 位 int 索引。有没有人对 Cecil 有足够的经验来为我指出正确的方向，即创建一个具有适当类型的`Instruction`实例`OpCode`的简单方法？`Ldarg_S``Operand`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T15:37:44.473

这里有两种操作码`ldarg.0`，和`ldarg`（及其 _s）变体。

第一个是“宏”操作码，这意味着它用于减少通常使用的值的代码大小。

如果您需要修改方法的参数，我建议您首先将所有宏操作码转换为完整的形式，这是使用帮助库 Mono.Cecil.Rocks中的`SimplifyMacros()`扩展方法完成的：`MethodBody`

```
using Mono.Cecil;
using Mono.Cecil.Cil;
using Mono.Cecil.Rocks;

// ..

method.Body.SimplifyMacros(); 
```

完成此操作后，现有`ldarg.0`指令现在将`ldarg`具有正确的操作数，正如您所猜测的那样， a `ParameterDefinition`。

有了它，您可以重新排序参数，并创建新指令：

```
var il = method.Body.GetILProcessor();
var instruction = il.Create(OpCodes.Ldarg, aParameterDefinition);
il.InsertBefore(xxx, instruction); 
```

完成后，您可以调用 , 的逆函数，`SimplifyMacros()`如果`OptimizeMacros()`可能，它将尝试将操作码优化为宏形式。

您必须注意的一件事是，实例方法的第一个参数，即隐含的“this”，`method.Body.ThisParameter`由您在方法的 .Parameters 集合中找不到的特殊参数表示。

# playframework - “找不到对象 scala”试图运行 vanilla Play 2 应用程序

> ID：10231410
> 
> 赞同：2
> 
> 时间：2012-04-19T15:24:06.273
> 
> 标签：playframework, classpath, sbt, playframework-2.0

我正在努力让一个香草 Play 应用程序在我的 Windows 上运行（但希望不会持续太久！）开发机器。

我下载了 typesafe-stack 2.1 并使用推荐的 giterate 模板创建了一个基本的 Play 应用程序：

`g8 typesafehub/play-scala`.

然后我跑了`sbt run`，等待服务器启动，导航到`localhost:9000`并得到一个`java.lang.ExceptionInInitializerError`with root cause `MissingRequirementError: object scala not found`。

听起来像是一个类路径问题（？） - 但我不知道从哪里开始 1）我是 sbt、scala 和 play 的新手，以及 2）我在诊断和修复类路径问题方面很垃圾。所以我想我会在这里问，希望有人能给我指出一个有用的调查方向。

这是堆栈跟踪：

```
play.api.UnexpectedException: Unexpected exception [ExceptionInInitializerError: null]
        at sbt.PlayReloader$$anon$2$$anonfun$reload$3$$anonfun$2$$anonfun$apply$11.apply(PlayReloader.scala:228) ~[na:na]
        at sbt.PlayReloader$$anon$2$$anonfun$reload$3$$anonfun$2$$anonfun$apply$11.apply(PlayReloader.scala:221) ~[na:na]
        at scala.Option.map(Option.scala:133) ~[scala-library.jar:0.11.2]
        at sbt.PlayReloader$$anon$2$$anonfun$reload$3$$anonfun$2.apply(PlayReloader.scala:221) ~[na:na]
        at sbt.PlayReloader$$anon$2$$anonfun$reload$3$$anonfun$2.apply(PlayReloader.scala:219) ~[na:na]
        at scala.Either$LeftProjection.map(Either.scala:183) ~[scala-library.jar:0.11.2]
java.lang.ExceptionInInitializerError: null
        at play.templates.ScalaTemplateCompiler$TemplateAsFunctionCompiler$.getFunctionMapping(ScalaTemplates.scala:561) ~[templates_2.9.1-2.0.jar:2.0]
        at play.templates.ScalaTemplateCompiler$.generateFinalTemplate(ScalaTemplates.scala:500) ~[templates_2.9.1-2.0.jar:2.0]
        at play.templates.ScalaTemplateCompiler$.compile(ScalaTemplates.scala:189) ~[templates_2.9.1-2.0.jar:2.0]
        at sbt.PlayCommands$$anonfun$48$$anonfun$apply$38.apply(PlayCommands.scala:533) ~[na:na]
        at sbt.PlayCommands$$anonfun$48$$anonfun$apply$38.apply(PlayCommands.scala:531) ~[na:na]
        at scala.collection.mutable.ResizableArray$class.foreach(ResizableArray.scala:60) ~[scala-library.jar:0.11.2]
Caused by: scala.tools.nsc.MissingRequirementError: object scala not found.
        at scala.tools.nsc.symtab.Definitions$definitions$.getModuleOrClass(Definitions.scala:655) ~[scala-compiler.jar:na]
        at scala.tools.nsc.symtab.Definitions$definitions$.getModule(Definitions.scala:605) ~[scala-compiler.jar:na]
        at scala.tools.nsc.symtab.Definitions$definitions$.ScalaPackage(Definitions.scala:145) ~[scala-compiler.jar:na]
        at scala.tools.nsc.symtab.Definitions$definitions$.ScalaPackageClass(Definitions.scala:146) ~[scala-compiler.jar:na]
        at scala.tools.nsc.symtab.Definitions$definitions$.AnyClass(Definitions.scala:176) ~[scala-compiler.jar:na]
        at scala.tools.nsc.symtab.Definitions$definitions$.init(Definitions.scala:814) ~[scala-compiler.jar:na] 
```

注意：其他人已经在[这里](https://stackoverflow.com/q/9700689/586748)提出了完全相同的问题，但由于“不太可能帮助任何未来的访问者”而将其关闭。由于我是一位未来的访客，他会发现这个问题的答案非常有帮助，我觉得自己再问一次是有道理的。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T16:30:23.423

在通过 Typesafe Stack 安装 Play 2.0 时，您不是我听说的第一个抱怨的人。我自己没有时间进行调查，但我知道通过[Play 2.0 文档](http://www.playframework.org/documentation/2.0/Installing)安装 Play 2.0应该可以避免上述问题。

我的另一个想法是您正在发行`sbt`而不是`play`. 当然，它们几乎是同一个应用程序，但我希望您的`sbt`命令指向 的实例`sbt`，而`play`可能指向具有不同类路径的单独可执行文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T10:23:54.630

为了将来参考，我发现自己在将 play 2.0.4 与 eclipse 结合使用时遇到了类似的问题。

我通过添加解决了这个问题

```
 <classpathentry path="<myProjectDirectory>\target\scala-2.9.1\classes_managed" kind="lib"></classpathentry> 
```

到`<myProjectDirectory>/.classpath`

我不知道如何，但不知何故，这条线被删除了......

# bash - 为什么我的循环变量在 1 次迭代后不存在？

> ID：10231417
> 
> 赞同：1
> 
> 时间：2012-04-19T15:24:46.717
> 
> 标签：bash

我有这个代码

```
for p in "abra/cadabra reach/out"
do
        r="$HOME/x/$p"
        echo $r
done 
```

但它只产生这个：

```
/Users/terrencemonroebrannon/x/abra/cadabra reach/out 
```

不是

```
/Users/terrencemonroebrannon/x/abra/cadabra /Users/terrencemonroebrannon/x/reach/out 
```

正如我所料。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T15:26:45.243

您已将两个项目放在引号中，bash 将其解释为单个标记。这就是引号的用途。如果要删除引号，您将得到您描述的行为：

```
for p in abra/cadabra reach/out
do
        r="$HOME/x/$p"
        echo $r
done 
```

给我：

```
/Users/lars/x/abra/cadabra
/Users/lars/x/reach/out 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T15:26:43.767

bash 将`"abra/cadabra reach/out"`被视为一个令牌。
不需要报价。

```
for p in abra/cadabra reach/out
do
        r="$HOME/x/$p"
        echo $r
done 
```

# python - 将方法映射到不同对象的列表

> ID：10231419
> 
> 赞同：2
> 
> 时间：2012-04-19T15:24:51.850
> 
> 标签：python, inheritance, mapping

我想在实例化不同类的对象列表上映射一个方法。所有对象都继承自同一个基类并定义所需名称的方法。

为了更清楚，请考虑以下代码：

```
class A:
    def __init__(self, x):
        self.x = x

    def foo (self):
        return self.x

class B(A):
    def foo (self):
        return self.x+1

class C(A):
    def foo (self):
        return self.x-1 
```

现在考虑一个实例化类 B 和 C 的对象列表。我想做这样的事情：

```
result = []
for obj in [B(1), C(1)]:
    result.append(obj.foo()) 
```

您将如何继续将方法 foo 映射到列表的每个元素上？有可能吗？我能想到的最好的是这样的：

```
map(A.foo, [B(1), C(1)]) 
```

但显然它没有返回我想要的结果。如何指定与对象相关的方法？

我希望我说清楚了。

**注意**：我主要使用 Python2.7，但我同样对适用于“较新”版本的解决方案感兴趣。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T15:32:26.743

`Map(A.foo, [B(1), C(1)])`基本上是在做`A.foo(B(1))`，`A.foo(C(1))`这不是你要找的。

从上面使用您的课程，我会这样做：

```
In: objs = [B(1), C(1)]
In: [x.foo() for x in objs]
Out: [2, 0] 
```

如果您愿意，Amjith 有一个纯地图实现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T15:34:59.270

对于大多数实际目的，我推荐@AlG 的列表理解，但你也可以这样做`map`：

```
>>> import operator
>>> map(operator.methodcaller("foo"), [B(1), C(1)])
[2, 0] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-19T15:29:12.740

```
>>> map(lambda x: x.foo(), [B(1), C(1)])
>>> [2, 0] 
```

lambda 函数将获取列表中的每个对象并在该对象上调用 foo()。因此，结果列表将具有相应对象的 foo() 返回的结果。

# c# - 游戏状态无法正常运行

> ID：10231421
> 
> 赞同：0
> 
> 时间：2012-04-19T15:24:53.503
> 
> 标签：c#, xna

我的所有三个屏幕/状态都可以正常工作，但是，我实现了第四个作为信息屏幕。到目前为止还不错，但是当我运行游戏并按“H”键时，它不会将屏幕更改为另一个背景（到目前为止我所做的）。下面是代码：

```
public void UpdateInformation(GameTime currentTime)
{
    if (Keyboard.GetState().IsKeyDown(Keys.H))
    {
        GameState = 4;
    } // GAMESTATE 4 which is the instruction/Information screen.
} 
```

这是更新方法中游戏状态的代码：

```
protected override void Update(GameTime gameTime)
{
    switch (GameState)
    {
        case 1: UpdateStarted(gameTime);
            break;

        case 2: UpdatePlaying(gameTime);
            break;

        case 3: UpdateEnded(gameTime);
            break;

        case 4: UpdateInformation(gameTime);
            break;
    }

    base.Update(gameTime);
} 
```

在这里，我正在绘制屏幕。

```
public void DrawInformation(GameTime currentTime) 
{
    spriteBatch.Begin();
    spriteBatch.Draw(InfoBackground, Vector2.Zero, Color.White);
    spriteBatch.End();
} 
```

以下是各州的抽奖信息代码：

```
protected override void Draw(GameTime gameTime)
{
    switch (GameState)
    {
        case 1: DrawStarted(gameTime);
            break;

        case 2: DrawPlaying(gameTime);
            break;

        case 3: DrawEnded(gameTime);
            break;

        case 4: DrawInformation(gameTime);
            break;
    }
} 
```

我希望这会有所帮助，只是我的 H 键没有响应，但我的 S 键响应良好并开始游戏。四个状态/屏幕是否与“Gamestate”兼容？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:18:25.113

该`H`密钥将不起作用，因为您的更新代码`H`UpdateInformation...

它的实际作用是：如果您在信息屏幕中，请按 H 转到信息屏幕（这没有意义）

您应该将`H`检测代码移动到更合适的位置。你在哪里`S`检测码在哪里？

另外，我建议您在游戏状态中使用枚举而不是数字。

```
enum gameStates
{
    Started,
    Playing,
    Ended,
    Information,
} 
```

这样，维护和理解起来就容易多了。（见下面的例子）

```
switch(GameState)
{
    case gameStates.Started:
         //Do something
         break;
} 
```

# sql - Oracle SQL查询 查询稍有改动，结果返回时差大

> ID：10231423
> 
> 赞同：2
> 
> 时间：2012-04-19T15:25:03.863
> 
> 标签：sql, oracle

H 我试图弄清楚为什么两个相似但略有不同的 SQL 查询在运行它们所花费的时间之间存在如此大的差异。我将不胜感激基于以下两个示例和报告的时间的输入。

第一个查询如下，运行大约需要 115 - 154 秒。

```
SELECT * FROM 
(
    SELECT a.*, ROWNUM rnum 
    FROM 
    (
        SELECT ERR_ID, ERR_CREATED_BY,TO_CHAR(ERR_CREATED_DATE, 'DD/MM/YYYY H24:MI'),  
               ERR_SOURCE, ERR_DETAIL  
        FROM tdsys_errors  err   
        WHERE ERR_SOURCE = 'Online Transaction'  
        ORDER BY ERR_ID DESC 
    ) a 
    WHERE ROWNUM <= 25
) 
WHERE rnum > 0; 
```

第二个查询在“ORDER BY ERR_ID DESC”块的位置方面略有变化，运行大约需要 0.07 秒

```
SELECT * FROM 
(
    SELECT a.*, ROWNUM rnum 
    FROM 
    (
        SELECT ERR_ID, ERR_CREATED_BY,TO_CHAR(ERR_CREATED_DATE, 'DD/MM/YYYY H24:MI'),  
               ERR_SOURCE, ERR_DETAIL  
        FROM tdsys_errors  err   
        WHERE ERR_SOURCE = 'Online Transaction'    
    ) a 
    WHERE ROWNUM <= 25
) 
WHERE rnum > 0
ORDER BY ERR_ID DESC; 
```

我猜第二个查询是在结果到达之后排序的，第一个查询尝试一次完成所有操作。我想知道这是一个 SQL 最佳实践案例吗？为什么会有这样的差异？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T15:27:24.030

您自己的总结是正确的，第一个查询按 err_id 对 tdsys_errors 中的行进行排序，取其中的前 25 个，然后返回那些。第二个查询只输出 25 行（不保证顺序），然​​后对这些随机的 25 行进行排序。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-19T15:26:57.087

在第一种情况下，您选择前 25 行 - 那些~~最低~~的最高`err_id`。它必须从您的查询中找到所有结果，然后在知道要使用哪个 25 之前将它们全部排序，这显然需要一段时间。

在第二种情况下，您将提取无序查询返回的前 25 行，这可能是快速的，然后只对这 25 行进行排序。

您可能会从这两个查询中得到不同的结果——您当然不应该假设它们总是相同的，即使它们有时碰巧也是如此。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T15:26:35.277

原因是第一个查询必须对`tdsys_errors`表中的所有行进行排序，而第二个查询只有从内部查询返回的 25 行进行排序。

请注意，两个查询的输出可能不同。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T17:39:07.760

假设您使用的是 Oracle 9i 或更高版本，您可以使用窗口/分析功能`ROW_NUMBER()`，因此您无需使用多个子查询：

```
SELECT * FROM (
    SELECT ERR_ID, ERR_CREATED_BY, TO_CHAR(ERR_CREATED_DATE, 'DD/MM/YYYY H24:MI')
         , ERR_SOURCE, ERR_DETAIL, ROW_NUMBER() OVER (ORDER BY ERR_ID DESC) AS rnum
       FROM tdsys_errors  err   
      WHERE ERR_SOURCE = 'Online Transaction'
) WHERE rnum <= 25
 ORDER BY ERR_ID DESC; 
```

希望这可以帮助。

# java - 从 HashMap 的 HashMap 中检索对象的问题

> ID：10231430
> 
> 赞同：3
> 
> 时间：2012-04-19T15:25:23.900
> 
> 标签：java, recursion, hashmap

我正在编写通过 XML 文件递归迭代并填充 HashMap 的 HashMap 的代码。我已经能够填充哈希图，它看起来不错。但是，当我运行此命令时

```
 System.out.println(map.containsKey("Mary")); 
```

它总是假的。真的不知道为什么它总是返回假。之后我还发布了我的递归代码和哈希图的内容

```
map.toString() 
map is { Mary
    ={24
        ={established
            ={western
                ={Profile=m}}, torn-down
            ={western
                ={Profile=b}, eastern
                ={Profile=m}}}, 44
        ={established
            ={western
                ={Profile=g}, eastern
                ={Profile=s}}, torn-down
            ={western
                ={Profile=j}, western
                ={Profile=f}}}}, Martha
    ={24
        ={established
            ={western
                ={Profile=a}}, torn-down
            ={western
                ={Profile=b}, eastern
                ={Profile=n}}}, 44
        ={established
            ={western
                ={Profile=s}, eastern
                ={Profile=j}}, torn-down
            ={western
                ={Profile=k}, eastern
                ={Profile=g}}}}} 
```

递归代码是：

```
NodeList l = doc.getElementsByTagName("Branches");
        Node n = l.item(0);
        map = new HashMap();
        recurse(n, map);

private void recurse(Node n, HashMap map){
if (n.hasChildNodes()){
    NodeList nl = n.getChildNodes();

    for(int i= 0; i< nl.getLength(); i++){
        Node node = nl.item(i);

        if(node.getNodeType() == Node.ELEMENT_NODE){
            if (!node.getNodeName().equals("Profile") ){

                map.put(node.getFirstChild().getNodeValue(), new HashMap());

                recurse(node, (HashMap)map.get(node.getFirstChild().getNodeValue()));
            }
            else {

                map.put("Profile", node.getFirstChild().getNodeValue());
                }

            }
        }       
    }

} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T17:25:08.170

根据 OP 的要求-并且由于评论中的讨论解决了他的问题-我将其包装为答案-供未来的读者使用：

首先，您应该检查您的键是否确实是`String`对象。您可以通过添加以下行来做到这一点：

```
System.out.println(map.keySet().iterator().next().getClass()); 
```

接下来，在我们确定您的密钥确实是`String`s 之后，我们要检查您是否有不可见字符或不需要空格，我们将通过添加以下行来完成：

```
String s = (String)map.keySet().iterator().next(); 
System.out.println("val=" + s + " length=" + s.length()); 
```

如果确实有不可见的字符 - 我们会知道它，因为长度不匹配。

如果这确实是原因[并且正如 OP 所说的那样]，那么在读取 XML 以排除这些字符时，您将不得不处理您的字符串。

另外，作为旁注 - 我建议避免使用原始类型，并建议您尽可能使用[泛型类型](http://docs.oracle.com/javase/tutorial/java/generics/gentypes.html)。它将为您提供更易读的代码和[类型安全](http://en.wikipedia.org/wiki/Type_safety)！
如果您想要无限嵌套，那么我会使用[复合设计模式](http://en.wikipedia.org/wiki/Composite_pattern)来实现它。

# android - 启动画面中的逐帧动画 - Android 2.1

> ID：10231438
> 
> 赞同：2
> 
> 时间：2012-04-19T15:25:37.647
> 
> 标签：android, animation, android-2.1-eclair

我正在 android 2.1 中编写启动画面。我希望在初始屏幕上按顺序显示 20 张 png 图像。我尝试使用动画列表，但无法做到。

这是我的代码。现在，有一个名为 firstLoadingImage.png 的图像。仅显示 5000 毫秒。然后 myappactivity 开始。但是，在这段等待时间内，我无法更新图像源。你觉得我怎么能做到这一点？

**闪屏活动**

```
package myapp.activity;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.widget.ImageView;

public class SplashScreenActivity extends Activity {
    protected boolean _active = true;
    protected int _splashTime = 5000; // time to display the splash screen in ms

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.splashscreen);

        Thread splashTread = new Thread() {
            @Override
            public void run() {
                try {
                    int waited = 0;
                    while(_active && (waited < _splashTime)) {
                        sleep(100);
                        if(_active) {
                            waited += 100;
                        }
                    }
                } catch(InterruptedException e) {
                    // do nothing
                } finally {
                    finish();
                    startActivity(new Intent(SplashScreenActivity.this, MyAppActivity.class));
                    stop();
                }
            }
        };
        splashTread.start();
    }

} 
```

**闪屏.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:id="@+id/linearLayout"
    android:background="@drawable/loading_screen_background" >

    <ImageView
        android:id="@+id/firstLoadingImage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/loading100" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T19:11:29.710

帧动画可以通过将其设置为`AnimationDrawable`背景来实现`ImageView`。

例子：

```
final AnimationDrawable anim = new AnimationDrawable();
anim.addFrame(Context.getResources().getDrawable(R.drawable.resource_id_of_frame1, durationInMs);
anim.addFrame(Context.getResources().getDrawable(R.drawable.resource_id_of_frame2, durationInMs);
anim.addFrame(Context.getResources().getDrawable(R.drawable.resource_id_of_frame3, durationInMs);
...
anim.addFrame(Context.getResources().getDrawable(R.drawable.resource_id_of_framen, durationInMs);
anim.setOneShot(false);

ImageView myImageView = getImageViewToSet();
myImageView.setBackgroundDrawable(anim);
myImageView.post(new Runnable(){
   public void run(){
      anim.start();
   }
} 
```

因此，让您的初始屏幕成为一个简单的布局，`ImageView`或者创建一个并将其添加到布局中。设置`AnimationDrawable`它并运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-18T15:34:01.893

[你可以在这里](http://www.codeproject.com/Articles/113831/An-Advanced-Splash-Screen-for-Android-App)找到它的教程

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T19:01:19.790

我的猜测是在你的启动线程中调用 sleep 之后使用函数 runOnUiThread() 。制作一个可运行的类来更改 ImageView 背景，并在这个函数中运行？ [Activity.runOnUiThread()](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)

# sql-server-2008 - 让一个存储过程返回多个结果集是个好主意吗？

> ID：10231442
> 
> 赞同：0
> 
> 时间：2012-04-19T15:25:45.250
> 
> 标签：sql-server-2008, multiple-resultsets

如果不是，如果我们仍然希望所有信息来自同一个存储过程，是否有任何解决方法？就像将这些结果集包装在其他东西中（？）。我有一个返回多个结果集的存储过程，它工作正常。但是，由于这些结果集，使用 SQL Server 对此进行测试被证明是一项挑战。

# sql-server - 主键违规，我验证记录，如果不存在，插入。但错误不断发生

> ID：10231445
> 
> 赞同：0
> 
> 时间：2012-04-19T15:26:01.077
> 
> 标签：sql-server, sql-server-2008

我在 SQL Server 2008 r2 的游标中有以下代码。

```
begin 
    if exists (select * from GestionIOF with (updlock,serializable) where Fecha 
    =@fechagestion and ID_Desc2 = @id_tipoalarmas and ID_Modulo = @id_modulo)
    begin 
        update GestionIOF set Total = (Select Total from #Paso p where p.Fecha =   
        @fechagestion and p.Desc2 = @id_tipoalarmas and p.Modulo = @id_modulo), 
        Frecuencia = (Select Frecuencia from #Paso p where p.Fecha 
        = @fechagestion and p.Desc2 = @id_tipoalarmas 
        and p.Modulo = @id_modulo), Gestionado = 'False'
        where GestionIOF.Fecha = @fechagestion and GestionIOF.ID_Desc2 = 
        @id_tipoalarmas and GestionIOF.ID_Modulo = @id_modulo
    end
    else
    begin
        INSERT INTO GestionIOF(ID_Area,ID_Controlador ,ID_Modulo     
        ,ID_Desc2,ID_TipoEvento,Total,Frecuencia ,Fecha,Gestionado )
        SELECT * FROM #Paso 
    end 
```

我检查主键是否存在，如果不存在，我将其插入。但我收到以下错误：

> 男装 2627，Nivel 14，Estado 1，Procedimiento InsertarGestionEC_IOF，Línea 67 Infraccón de la restrictción PRIMARY KEY 'PK_GestionIOF'。没有 se puede insertar una clave duplicada en el objeto 'dbo.GestionIOF'。

也许这是一个错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T15:30:02.290

exists 子句正在根据一些输入参数进行检查，`@id_tipoalarmas`并且`@id_modulo`- 但语句 else 部分中的 insert 子句正在使用`#paso`

我会仔细检查其中的内容`#paso`，因为它可能有多行，但您的输入参数只是一组 IDS。`#paso`可能包含您未检查的其他 ID。

# java - UDP的更多问题

> ID：10231446
> 
> 赞同：0
> 
> 时间：2012-04-19T15:26:05.647
> 
> 标签：java, udp

好的，这是我正在努力解决的最后一个障碍。

我试图允许客户端在将目标客户端名称作为其消息的前缀时与单个其他客户端进行通信。

例如，如果 Ian 想与 bill 交流，他会输入：

```
bill hi mate 
```

现在，当前当一个新客户端连接到服务器时，它们的名称存储在一个数组列表中。由于这使用数据包和字节缓冲区，这意味着当我存储名称时，它还存储名称长度。默认情况下，服务器上的数据包缓冲区大小为 512，因此每个名称的长度为 512。

直到现在这还不是问题。我已经完成了以下操作来获得客户想要与谁交流：

```
else 
{
    System.out.println( "Client said: "+response+"\nPacket Size: "+packet.getLength()+"\nString Length: "+response.length() );
    String [] usrInput = response.split( " " );
    System.out.println( "Length of split string: "+usrInput.length );
} 
```

它将他们的输入拆分为一个数组，并在数组的第一个位置查找名称。所以，从上面看，我们的账单会排在第一位。

这是我出错的地方；我尝试使用：

1.  包含（）
2.  等于（）
3.  火柴（）

等等，但都失败了；我猜是因为存储的名称的长度。那么如何将存储的名称的大小减少到例如 bill - 4 呢？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T22:45:23.713

您正在错误地构造数据包中的字符串。DatagramPacket 包含它自己的实际长度。您应该使用它，而不是整个字节数组的长度。

# facebook-apps - 如何为粉丝页面设置默认应用

> ID：10231448
> 
> 赞同：0
> 
> 时间：2012-04-19T15:26:06.683
> 
> 标签：facebook-apps

请帮助我如何设置粉丝页面的默认登陆应用程序？或粉丝页面的默认登陆页面？我正在使用.net开发应用程序

我尝试了新版本，但我无法在粉丝页面的管理权限选项卡中进入旧版本，有一个名为默认登陆选项卡的选项。但我在新版本中找不到。请帮帮我，我在这里打了很多。

这是为粉丝页面设置默认登陆选项卡的旧版本方法。

[https://www.socialappshq.com/help/change-default-landing-page-for-facebook-page](https://www.socialappshq.com/help/change-default-landing-page-for-facebook-page)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T21:27:27.123

Facebook 登陆页面不能再显示他们的自定义应用程序之一，因为它们的默认登陆选项卡是非粉丝在访问时首先看到的。Facebook 仍然可以拥有这些自定义应用程序，但现在它不能用作默认设置，现在时间线将始终是所有 Facebook 用户的默认页面。这样做很可能是为了阻止对 Like Gate 的过度使用，或者可能会在登录页面后面隐藏用户想要的东西。

*取自[http://thenewsstream.blogspot.com/2012/04/things-facebook-users-need-to-know.html](http://thenewsstream.blogspot.com/2012/04/things-facebook-users-need-to-know.html)

# matlab - Matlab：我可以通过唯一名称引用数组索引吗？

> ID：10231455
> 
> 赞同：4
> 
> 时间：2012-04-19T15:26:29.147
> 
> 标签：matlab, matrix, data-structures, matlab-struct

假设我有一个`pols`包含 [theta, rho, z] 向量的列矩阵。这意味着，如果我有 9 个这样的向量，它将是一个 9x3 矩阵。将它们安排成这样非常方便，因为我可以将它们中的任何一个提供给以下功能`pol2cart`：

```
cart3 = pol2cart(pols(3,:)); 
```

对于某个向量，我可以通过索引 1、2、3 找到它的分量：

```
rho5 = pols(5,2); 
```

但有时矩阵实际上在另一个更宽的矩阵内，并且可能在中间而不是开头，这样上面可能会变成：

```
rho5 = pols(5,6); 
```

为了使代码在其他人必须维护的情况下更具可读性，是否可以通过唯一名称引用索引？像

```
rho5 = pols(5).rho; 
```

它可以在前面定义，`.rho`映射到具有 rho 值的列。

我冒险将矩阵转换为单元格，然后使用数组转换`mat2cell`，`cell2struct`但这似乎并不实用。或者，我可以创建一个结构数组，但是我失去了做的能力`pol2cart(pols)`，而是必须做

```
pol2cart(pols.theta, pols.rho, pols.z); 
```

所以重复这个问题：我可以将索引映射到唯一的名称吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T18:47:05.330

对于默认的 MATLAB 数据类型，不，你真的不能这样做。但是，您可以[创建自己的新数据类型（即类对象）](http://www.mathworks.com/help/matlab/object-oriented-programming.html)来存储数据。在类定义中，您将重载该[`subsref`](http://www.mathworks.com/help/matlab/ref/subsref.html)方法以定义下标引用（即使用`()`、`{}`或`.`）对新对象的行为方式。这在处理对象数组方面可能会变得相当棘手，但这是可能的。

请注意，您还必须为要在新数据类型上使用的所有现有函数创建重载方法。具体来说，您必须`pol2cart`为您的对象创建一个方法，该方法可以在内部调用内置[`pol2cart`](http://www.mathworks.com/help/matlab/ref/pol2cart.html)函数，并将对象中的适当数据片段作为参数传递。

...这为您的当前情况带来了一个更简单的解决方案。[您可以创建一个结构数组（或数组的标量结构）来存储数据，并简单地为结构数据类型](http://www.mathworks.com/help/matlab/structures.html)`pol2cart`创建一个新的重载函数，以简化调用语法，而不是创建一个全新类型的类对象。

[我在此处](https://stackoverflow.com/a/5373729/52738)和[此处](https://stackoverflow.com/a/2430278/52738)的其他两个答案中讨论了内置数据类型的重载函数的更多细节。简而言之，您将创建一个名为的文件夹`@struct`并将其放置在您的[MATLAB 路径](http://www.mathworks.com/help/matlab/matlab_env/what-is-the-matlab-search-path.html)上的文件夹中。在此`@struct`文件夹中，您将放置此重载函数：

```
function varargout = pol2cart(polarCoordinates)
  [varargout{1:nargout}] = pol2cart(polarCoordinates.theta, ...
                                    polarCoordinates.rho, ...
                                    polarCoordinates.z);
end 
```

请注意，这是该函数的流线型版本，没有对输入进行错误检查等。现在，让我们制作一些示例数据：

```
pols = rand(9, 3);  %# A 2-D array of data
polStruct = struct('theta', pols(:, 1), ...  %# Convert it to a scalar
                   'rho', pols(:, 2), ...    %#   structure of arrays
                   'z', pols(:, 3)); 
```

您可以`rho`按如下方式访问第五行的值：

```
rho5 = pols(5,2);
rho5 = polStruct.rho(5); 
```

如果您想从极坐标转换为笛卡尔坐标，以下是每种数据类型的转换方法：

```
[X,Y,Z] = pol2cart(pols(:,1), pols(:,2), pols(:,3));  %# Calls the built-in one
[X2,Y2,Z2] = pol2cart(polStruct);  %# Calls the overloaded one 
```

您可以检查它们是否各自给出相同的结果，如下所示：

```
>> isequal([X Y Z],[X2 Y2 Z2])

ans =

     1   %# True! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T18:14:23.963

好的，正式的答案可能是上面木片给出的“否”。但是，如果你真的想做这样的事情，你也许可以使用半破解。具体来说，您可以定义一个类并重载一个运算符来实现（几乎）您想要的。~~不幸的是，我看到 Matlab 不允许重载`.`，所以你必须使用其他一些运算符。~~（见下面的编辑）

只是为了给你一个想法，这里有一个类，它返回矩阵的第 i 行`M`by `M^i`。

```
classdef Test
  properties
    M;
  end

  methods
    function this = Test(M)
      this.M = M;
    end

    function res = mpower(this, i)
      res = this.M(i, :);
    end
  end
end 
```

它可以像这样运行：

```
>> tmp = Test([1 2; 3 4]);
>> tmp^1

ans =

     1     2

>> tmp^2

ans =

     3     4 
```

使用风险自负！:)

**编辑：**

我上面错了。正如gnovice的回答中提到的，您实际上可以`.`使用 method 为自定义类定义运算符`subsref`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T15:44:55.970

不，你不能这样做。就如此容易。

# asp.net - Jcrop 裁剪图像

> ID：10231456
> 
> 赞同：2
> 
> 时间：2012-04-19T15:26:31.770
> 
> 标签：asp.net, crop, jcrop

我正在尝试使用 Jcrop 裁剪图像。它不起作用，我不断收到异常“输入字符串格式不正确”。

```
<script type="text/javascript">

jQuery(document).ready(function () {
    jQuery('#crop').Jcrop({
        onSelect: updateCoords
    });
});

function updateCoords(c) {
    jQuery('#X').val(c.x);
    jQuery('#Y').val(c.y);
    jQuery('#W').val(c.w);
    jQuery('#H').val(c.h);
}; 
```

```
<asp:Button ID="Submit" runat="server" Text="Crop" 
onclick="Submit_Click" />        

<asp:Image ID="Image" runat="server" Visible="False" />        
 <img src="Content/UploadedImage/Image.jpg" id="crop" alt=""/>

<asp:HiddenField ID="X" runat="server" />        
<asp:HiddenField ID="Y" runat="server" />        
<asp:HiddenField ID="W" runat="server" />        
<asp:HiddenField ID="H" runat="server" /> 
```

试图获取坐标

```
protected void Submit_Click(object sender, EventArgs e)
{
    if (IsPostBack)
    {

        int x = Convert.ToInt32(X.Value);
        int y = Convert.ToInt32(Y.Value);
        int w = Convert.ToInt32(W.Value);
        int h = Convert.ToInt32(H.Value); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T16:28:41.583

那么这段代码就是我使用的

在客户端我有这个..但我不认为这有问题

```
var updateCoords = function(c) {
    $('#x').val(c.x);
    $('#y').val(c.y);
    $('#w').val(c.w);
    $('#h').val(c.h);
}; 
```

在服务器“upload.ashx”通用处理程序上，我使用

```
 Sub ProcessRequest(ByVal context As HttpContext) Implements IHttpHandler.ProcessRequest

            Dim x As Integer = Integer.Parse(context.Request("x"))
            Dim y As Integer = Integer.Parse(context.Request("y"))
            Dim w As Integer = Integer.Parse(context.Request("w"))
            Dim h As Integer = Integer.Parse(context.Request("h")) 
```

除了你在哪里得到错误？在客户端还是服务器上？什么是扔它？

看起来您正试图在回发后获取表单值，这些值不再存在，因为此时页面已经重新初始化而没有其原始值......因为这就是 .NET 页面呈现过程的工作方式。

因此，您要么必须将变量保存到内存中的 Session 中，将值回发到自身并使用 Request.Form 检索它们，要么使用 GET 方法发送数据并像我一样检索值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T19:29:06.150

我遇到了同样的问题，并解决了这个问题：

```
var updateCoords = function(c) {

    $('#x1').val(Math.round(c.x));
    $('#y1').val(Math.round(c.y));
    $('#x2').val(Math.round(c.x2));
    $('#y2').val(Math.round(c.y2));
    $('#w').val(Math.round(c.w));
    $('#h').val(Math.round(c.h));
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-03T11:25:01.167

```
jQuery('#X').val(Math.round(c.x));
jQuery('#Y').val(Math.round(c.y));
jQuery('#W').val(Math.round(c.w));
jQuery('#H').val(Math.round(c.h)); 
```

# c# - “this”在 C# 方法签名中指的是什么，是否有 VB.NET 等价物？

> ID：10231457
> 
> 赞同：11
> 
> 时间：2012-04-19T15:26:32.373
> 
> 标签：c#, vb.net, signature, c#-to-vb.net

我一直在*再次观看*[ASP.NET MVC Storefront](http://www.asp.net/mvc/videos/mvc-1/aspnet-mvc-storefront/aspnet-mvc-storefront-part-8-testing-controllers-iteration-1-complete)视频系列，并看到了一些我以前从未注意到或关注过的东西。我注意到在各种方法的签名列表中有很多引用。这是一个例子：*`this`*

 *```
public static Category WithCategoryName(this IList<Category> list, string categoryName)   
{
    return 
    (
        from s in list
        where s.Name.Equals(categoryName, StringComparison.InvariantCultureIgnoreCase)
        select s
    )
    .SingleOrDefault();
} 
```

我立即理解了签名中的`IList<Category> list`and the `string categoryName`，但对它的作用感到困惑`this`。

所以，作为一个 95% 的 VB 人，我将代码弹出到我最喜欢的转换器中并得到：

```
<System.Runtime.CompilerServices.Extension>
Public Shared Function WithCategoryName(list As IList(Of Category), categoryName As String) As Category

    Return 
    (
        From s In list 
        Where s.Name.Equals(categoryName, StringComparison.InvariantCultureIgnoreCase)
        Select s
    )
    .SingleOrDefault()

End Function 
```

首先，我不完全确定为什么`<System.Runtime.CompilerServices.Extension>`包含在内，也许它只是转换器，但是，正如你所看到的，`this`除非它与上述`<System.Runtime.CompilerServices.Extension>`.

所以问题是：

1.  **`this`在 C# 方法签名中实际引用和/或做什么？**
2.  **是否有 VB.NET 等价物？**

* * *

## 对问题 1 的回应：

所以我们已经明确地澄清了`this` ***它实际上***表示一个扩展方法，并且从给出的答案来看，似乎没有内联 VB 等价物。

我想补充一点，因为我提到了[ASP.NET MVC Storefront](http://www.asp.net/mvc/videos/mvc-1/aspnet-mvc-storefront/aspnet-mvc-storefront-part-8-testing-controllers-iteration-1-complete)视频，所以上面的 C# 示例是从他的`CategoryFilters`课程中提取的。我假设这就是您实现所谓的*管道和过滤器*或*管道*方法的方式。

* * *

## 对问题 2 的回应：

我假设 VB.NET 处理扩展方法的方式是这样的，例如：

```
Imports System.Runtime.CompilerServices 

Public Module StringExtensions 

    <Extension()> _ 
    Public Function IsNullOrBlank(ByVal s As String) As Boolean 
       Return s Is Nothing OrElse s.Trim.Length.Equals(0) 
    End Function 

End Module 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-19T15:27:53.313

那是一种扩展方法。`this`指定它是类型的扩展方法，`this <parameter>`在您的情况下，`IList<Category>`.

[这里有一个 VB.NET 等价物](http://msdn.microsoft.com/en-us/library/bb384936.aspx)，虽然它是一个属性，而不是关键字。

扩展方法需要知道要应用的类型，注意这在泛型中很明显。扩展方法：

```
public static string GetNameOf(this List<Category> category) { return ""; } 
```

除了`List<Category>`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-19T15:30:32.020

this 出现在那个地方意味着一个[Extension Method](http://msdn.microsoft.com/en-us/library/bb383977.aspx)。

```
namespace ExtensionMethods
{
    public static class MyExtensions
    {
        public static int WordCount(this String str)
        {
            return str.Split(new char[] { ' ', '.', '?' }, 
                             StringSplitOptions.RemoveEmptyEntries).Length;
        }
    }   
} 
```

在这段代码之后，程序中的*任何*字符串对象都可以使用这个函数，比如

```
int count = "Hello world".WordCount();  //count would be equal 2 
```

**换句话说，这是一种扩展您无权访问或不允许更改或派生的类型的功能的方法。**

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-19T15:27:23.933

这将创建一个扩展方法。

VB.Net 对此没有相应的语法，因此您需要自己应用该属性。*

# joomla1.5 - 在 Joomla 站点中更改文件夹名称

> ID：10231458
> 
> 赞同：0
> 
> 时间：2012-04-19T15:26:32.607
> 
> 标签：joomla1.5

我正在尝试更改 Joomla (1.5.23) 网站中的一些文件夹名称，以更好地定义它们包含的内容。我发现的所有内容都涉及更改模板名称，但在管理面板中我没有看到任何名为“模板”的内容。

到目前为止，我已经能够通过直接编辑数据库中的文件来进行所有更改，但我找不到如何更改文件夹名称。我尝试在类别管理器中更改它并发布它，但仍使用旧文件夹名称。

在这一点上，任何方向都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T20:35:54.650

From the Admin, under Extensions, you'll see Template Manager. It displays your available templates based on folders in the \templates folder, and uses the templateDetails.xml within that folder for the admnin form.

Your best bet is to simply copy one of those folders, makes changes in the templateDetails.xml files (so you that you'll see a different name in the admin), and further investigate how it works from the copied version.

# php - Drupal 6 以编程方式添加 \r\n 显示

> ID：10231461
> 
> 赞同：0
> 
> 时间：2012-04-19T15:26:43.090
> 
> 标签：php, drupal, drupal-6, drupal-nodes

我有一个 PHP 脚本，可以将故事节点添加到我的 drupal 网站：

```
function post_to_webpage($title, $body, $teaser, $promote) {
//set the working directory to your Drupal root
chdir($_SERVER["DOCUMENT_ROOT"].'/webpage/');

//require the bootstrap include
require_once './includes/bootstrap.inc';

drupal_bootstrap(DRUPAL_BOOTSTRAP_FULL); 
//(loads everything, but doesn't render anything)
$node = new stdClass();
$node->type = 'story';
$node->title = $title;
$node->body = $body;
$node->teaser = $teaser;
$node->uid = 1;
$node->status = 1;
$node->promote = $promote;
$node->format = 2;
$node->sticky = 1;

node_save($node);

return $node->nid; } 
```

但是我经常在这些节点的内容中看到 r\n\。什么可能导致这种情况？

编辑：示例输出：

> Lorem ipsum dolor sit amet, consectetur adipiscing elit。Sed 前庭 ultrices ultricies。Curabitur nibh risus，mattis rhoncus dignissim vel，laoreet sit amet neque。Praesent blandit arcu et nisl ornare semper。
> \r\n
> \r\n
> Vestibulum eleifend malesuada odio，aliquet mauris sagittis sed。Proin 坐在 sed urna 中的 amet libero quis nibh malesuada mattis。Nullam rutrum egestas interdum。Sed dui lorem, faucibus et sagittis in, volutpat at velit。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T15:46:33.990

真正有用的是，如果您可以发布您提交的文本，从而产生上述输出。但是，根据所说的，这听起来很可能是由输入格式过滤器或缺少特定过滤器引起的。一个可能的原因可能是*线路中断转换器*滤波器未启用。要检查您的过滤器，请访问：

```
/admin/settings/filters/list 
```

默认为*过滤的 HTML*。因为您正在以编程方式添加内容，所以这很可能是应用于您提交的过滤器。单击此条目右侧的*配置。*向下滚动页面，查找名为*“换行转换器”*的过滤器。如果尚未启用，请单击它并*保存配置*。然后尝试以相同的方式创建一些新内容。

[您可以在http://www.lullabot.com/blog/articles/drupal-input-formats-and-filters](http://www.lullabot.com/blog/articles/drupal-input-formats-and-filters)找到有关输入过滤器的更多信息。

# asp.net - DataReader，按列检索数据

> ID：10231464
> 
> 赞同：2
> 
> 时间：2012-04-19T15:26:46.553
> 
> 标签：asp.net, datareader, advantage-database-server

我想从 DataReader 中按列检索数据。

现在我这样使用，

```
AdsCommand cmd = conn.CreateCommand();
cmd.CommandText = "SELECT a,b,c,d FROM testTable";
AdsDataReader reader = cmd.ExecuteReader();

reader.Read();
string columnA = reader.GetValue(0).ToString(); // I want to use column name instead of index number 
```

有没有办法按列名获取数据？像

```
string columnB = reader["B"].getValue(); 
```

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T15:31:21.700

你试过这个：

```
string columnA = Convert.ToString(reader["B"]); 
```

# .net - 合并两个分页结果集

> ID：10231471
> 
> 赞同：0
> 
> 时间：2012-04-19T15:27:22.963
> 
> 标签：.net, linq, asp.net-membership

由于 asp.net Membership 不允许通过用户名和电子邮件同时搜索，我认为我应该合并这两个分页结果集中的结果。

以前有人做过吗？或者这是无法实现的想法？

“合并”方法的仅供参考：

```
MembershipUserCollection FindUsersByName( string usernameToMatch,
                                                                int pageIndex, 
                                                                int pageSize, 
                                                                out int totalRecords )

MembershipUserCollection FindUsersByEmail( string  emailToMatch,
                                                                 int     pageIndex, 
                                                                 int     pageSize, 
                                                                 out int totalRecords ) 
```

结果方法签名应如下所示：

```
MembershipUserCollection MergedUsersAndEmailsSearch( string  userOrEmailToMatch,
                                                             int     pageIndex, 
                                                             int     pageSize, 
                                                             out int totalRecords )
{
//here we calling FindUsersByName and FindUsersByEmail and merging them
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:33:25.937

它有效吗？

```
collection1 = FindUsersByName(...);
collection2 = FindUsersByEmail(...);

collection1.ToList().AddRange(collection2.ToList()); 
```

# java - 在运行时动态添加 jar 文件时出现 NoClassDefFoundError

> ID：10231474
> 
> 赞同：1
> 
> 时间：2012-04-19T15:27:28.820
> 
> 标签：java, jar, classloader, urlclassloader

**更新：我认为问题可能是由于 TestFramework.jar 依赖于 JUnit 并且在它（TestFramework）加载时以某种方式找不到junit jar。仍然不确定解决方案，如果我是对的，我需要一种方法来指定 jar 的加载顺序。**

首先是我正在做的一些背景：我正在尝试创建一个工具，该工具将允许用户指定一个 java 源文件，该文件是 JUnit TestCase 的扩展，并在名为 getTestData 的方法中包含测试数据。然后，该工具将编译 java 文件，将生成的类文件放在“classes”目录中，加载类并访问 getTestData 方法，生成表示测试数据的 XML 文件。

显然，通过允许用户指定源文件，我还必须确保在编译时该文件的所有依赖项都包含在类路径中。所以现在我已经硬编码了一个我试图用于测试目的的特定文件的依赖关系。当前正在编译用户文件，但加载生成的类会导致一些问题。同样很明显，要加载类，我需要确保它所依赖的所有文件都在我拥有的类路径上。不知何故，在加载类的过程中，它仍然找不到所需的类，并给了我一个 NoClassDefFoundError。

以下是我用来创建 URLClassLoader 的方法，该 URLClassLoader 包含“lib”目录中每个 jar 文件的 URL。请注意，加载器是一个类变量，因此它可用于我的所有方法，但仅在此方法中初始化。

```
private void loadLibJars()
{
    try {
        File jarDir = new File("lib");
        ArrayList<URL> jarFiles = new ArrayList<URL>();

        for(File file: jarDir.listFiles())
        {
            if(file.isFile() && file.getName().endsWith(".jar"))
            {
                jarFiles.add(file.toURI().toURL());
            }
        }

        for(URL url:jarFiles)
            System.out.println(url);

        URL[] urlArray = new URL[jarFiles.size()];
        for(int i=0; i<jarFiles.size(); i++)
            urlArray[i] = jarFiles.get(i);

        loader = new URLClassLoader(urlArray);
    } 
    catch (MalformedURLException ex) {
        Logger.getLogger(XmlDataGenerator.class.getName()).log(Level.SEVERE, null, ex);
    }

} 
```

这是实际定位已编译的类文件并加载它的代码。第一个参数是要在其中搜索的目录，第二个参数是用户想要为其生成 XML 文件的所有已编译类文件的列表。

```
private void findAndLoadClasses(File classesDir, ArrayList<String>classFileNames)
{
    for(File classFile: classesDir.listFiles())
    {
        if(classFile.isDirectory())
        {
            System.out.println(classFile+" is a directory, searching inside of it now");
            findAndLoadClasses(classFile,classFileNames);
        }
        else if(classFile.isFile() && classFileNames.contains(classFile.getName()))
        {
            try
            {
                String fullClassName = classFile.getPath();
                fullClassName = fullClassName.substring(fullClassName.indexOf("\\")+1,fullClassName.lastIndexOf("."));
                fullClassName = fullClassName.replaceAll("\\\\", ".");

                System.out.println("Full class name: "+fullClassName);

                IvrTest testCase =  (IvrTest) Class.forName(fullClassName,true,loader).newInstance();

                System.out.println("Test data from "+classFile.getName()+": "+testCase.getTestData(...));
            }
            catch(Exception ex)
            {
                Logger.getLogger(XmlDataGenerator.class.getName()).log(Level.SEVERE, null, ex);
            }
        }
    }
} 
```

其他需要注意的可能很重要的一点是，并非用户选择的源文件的所有依赖项都是 jar，有些是其他源文件，它们也被编译并放置在“类”目录中。“类”目录通过项目设置包含在运行时类路径中（我使用 Netbeans 来简化 GUI 创建）。由于我希望用户能够将 jar 动态添加到“lib”目录中，因此我没有在项目设置中指定 jar。

关于输出和我在这里遇到的问题是我在运行代码时在控制台中看到的：

```
List of class files to search for: [MyTest.class]
file:/C:/Documents%20and%20Settings/username/My%20Documents/NetBeansProjects/XmlDataGenerator/lib/client.jar
file:/C:/Documents%20and%20Settings/username/My%20Documents/NetBeansProjects/XmlDataGenerator/lib/delegate.jar
file:/C:/Documents%20and%20Settings/username/My%20Documents/NetBeansProjects/XmlDataGenerator/lib/model.jar
file:/C:/Documents%20and%20Settings/username/My%20Documents/NetBeansProjects/XmlDataGenerator/lib/common.jar
file:/C:/Documents%20and%20Settings/username/My%20Documents/NetBeansProjects/XmlDataGenerator/lib/framework.jar
file:/C:/Documents%20and%20Settings/username/My%20Documents/NetBeansProjects/XmlDataGenerator/lib/TestFramework.jar
file:/C:/Documents%20and%20Settings/username/My%20Documents/NetBeansProjects/XmlDataGenerator/lib/junit.jar
file:/C:/Documents%20and%20Settings/username/My%20Documents/NetBeansProjects/XmlDataGenerator/lib/log4j-1.2.15.jar
file:/C:/Documents%20and%20Settings/username/My%20Documents/NetBeansProjects/XmlDataGenerator/lib/org.springframework.beans-3.0.1.RELEASE-A.jar
file:/C:/Documents%20and%20Settings/username/My%20Documents/NetBeansProjects/XmlDataGenerator/lib/org.springframework.context-3.0.1.RELEASE-A.jar
file:/C:/Documents%20and%20Settings/username/My%20Documents/NetBeansProjects/XmlDataGenerator/lib/org.springframework.core-3.0.1.RELEASE-A.jar
file:/C:/Documents%20and%20Settings/username/My%20Documents/NetBeansProjects/XmlDataGenerator/lib/org.springframework.web-3.0.1.RELEASE-A.jar
file:/C:/Documents%20and%20Settings/username/My%20Documents/NetBeansProjects/XmlDataGenerator/lib/org.springframework.web.servlet-3.0.1.RELEASE-A.jar
file:/C:/Documents%20and%20Settings/username/My%20Documents/NetBeansProjects/XmlDataGenerator/lib/reports.jar
file:/C:/Documents%20and%20Settings/username/My%20Documents/NetBeansProjects/XmlDataGenerator/lib/servlet.jar
classes\my is a directory, searching inside of it now
classes\my\package is a directory, searching inside of it now
classes\my\package\name is a directory, searching inside of it now
Full class name: my.package.name.MyTest
Exception in thread "AWT-EventQueue-0" java.lang.NoClassDefFoundError: junit/framework/TestCase
        at java.lang.ClassLoader.defineClass1(Native Method)
        at java.lang.ClassLoader.defineClassCond(ClassLoader.java:632)
        at java.lang.ClassLoader.defineClass(ClassLoader.java:616)
        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
        at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
        at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:248)
        at java.lang.ClassLoader.defineClass1(Native Method)
        at java.lang.ClassLoader.defineClassCond(ClassLoader.java:632)
        at java.lang.ClassLoader.defineClass(ClassLoader.java:616)
        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
        at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
        at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:248)
        at java.lang.ClassLoader.defineClass1(Native Method)
        at java.lang.ClassLoader.defineClassCond(ClassLoader.java:632)
        at java.lang.ClassLoader.defineClass(ClassLoader.java:616)
        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
        at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
        at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:296)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:248)
        at java.lang.Class.forName0(Native Method)
        at java.lang.Class.forName(Class.java:247)
        at xmldatagenerator.main.XmlDataGenerator.findAndLoadClasses(XmlDataGenerator.java:299)
        at xmldatagenerator.main.XmlDataGenerator.findAndLoadClasses(XmlDataGenerator.java:285)
        at xmldatagenerator.main.XmlDataGenerator.findAndLoadClasses(XmlDataGenerator.java:285)
        at xmldatagenerator.main.XmlDataGenerator.findAndLoadClasses(XmlDataGenerator.java:285)
        at xmldatagenerator.main.XmlDataGenerator.findAndLoadClasses(XmlDataGenerator.java:285)
        at xmldatagenerator.main.XmlDataGenerator.findAndLoadClasses(XmlDataGenerator.java:285)
        at xmldatagenerator.main.XmlDataGenerator.generateXmlBtnActionPerformed(XmlDataGenerator.java:242)
        at xmldatagenerator.main.XmlDataGenerator.access$300(XmlDataGenerator.java:33)
        at xmldatagenerator.main.XmlDataGenerator$4.actionPerformed(XmlDataGenerator.java:104)
        at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1995)
        at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2318)
        at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:387)
        at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:242)
        at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:236)
        at java.awt.Component.processMouseEvent(Component.java:6267)
        at javax.swing.JComponent.processMouseEvent(JComponent.java:3267)
        at java.awt.Component.processEvent(Component.java:6032)
        at java.awt.Container.processEvent(Container.java:2041)
        at java.awt.Component.dispatchEventImpl(Component.java:4630)
        at java.awt.Container.dispatchEventImpl(Container.java:2099)
        at java.awt.Component.dispatchEvent(Component.java:4460)
        at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4577)
        at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4238)
        at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4168)
        at java.awt.Container.dispatchEventImpl(Container.java:2085)
        at java.awt.Window.dispatchEventImpl(Window.java:2478)
        at java.awt.Component.dispatchEvent(Component.java:4460)
        at java.awt.EventQueue.dispatchEvent(EventQueue.java:599)
        at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)
        at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)
        at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)
        at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)
        at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)
        at java.awt.EventDispatchThread.run(EventDispatchThread.java:122)
Caused by: java.lang.ClassNotFoundException: junit.framework.TestCase
        at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:248)
        ... 73 more 
```

XmlDataGenerator.java 第 299 行是读取的行`IvrTest testCase = (IvrTest) Class.forName(fullClassName,true,loader).newInstance();`

在这一点上，我不知所措，因为我已经尝试了我能想到的一切，例如：

1.  将 junit.jar 添加到运行时类路径（在项目设置中）以确保此错误消失，它确实如此。这无助于解决问题，因为我想动态加载 jars。
2.  仅指定 junit.jar 而不是尝试加载目录中的所有 jar。这仍然会导致与上述相同的失败。
3.  从项目配置中删除“类”目录并使用相同的代码引入这些类。这可以引入已编译的源代码，但不能解决 jar 问题。
4.  在 URL 中使用相对路径而不是绝对路径。这无济于事。
5.  在尝试加载 jar 之前和之后添加额外的 System.out - 结果与我在创建 URLClassLoader 期间打印 URL 列表时相同，在我第一次创建它和尝试加载之后之间没有任何变化。

我唯一能想到的是，不知何故我试图使用的 URLClassLoader 没有被使用，但我不知道为什么会发生这种情况。任何帮助将不胜感激。谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T15:56:36.360

我发现了问题——因为 TestFramework jar 包含在项目类路径中，它将使用使用的任何默认加载器加载。然后，当我稍后添加更多 jar 时，处理 TestFramework jar 的加载器看不到它们，因此它认为缺少依赖项。为了解决这个问题，我创建了两个单独的 jar，一个仅包含接口类，另一个包含所有类，以便我可以将其与其依赖项一起加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T15:33:09.387

让它始终使用您的类加载器可能会很棘手。我记得遇到过这个问题，最后不得不创建一个类加载器，然后用来启动整个应用程序。

似乎很多类都想使用标准类加载器，而不是你加载它们的那个。

您还可以尝试设置您希望 Java 使用的类加载器`Thread.currentThread().setContextClassLoader()`

我记得关于类加载器的一条规则是，你的类加载器应该总是先尝试它的父类加载器，然后再尝试加载类本身。我看到 URLClassLoader 允许您在构建时传递父类加载器。尝试传入当前的类加载器。

# c# - SQL Server 锁定问题（使用 WCF 的分布式事务）

> ID：10231480
> 
> 赞同：3
> 
> 时间：2012-04-19T15:27:46.897
> 
> 标签：c#, sql-server, wcf, soap, transactions

我遇到了分布式事务的问题。

我正在使用 SQL Server 2008 R2、Windows 7、.Net 4.0。

这就是我真正想做的事情：

*   我有一个缓冲数据库（名为 A）
*   我有另一个数据库（名为 B）
*   我想通过 WCF Web 服务将数据从数据库 A 发送到数据库 B（SOAP over HTTP，A 和 B 不在同一台机器上）
*   如果数据成功发送到数据库 B，则从数据库 A 中删除数据

*请注意，这是对我目前遇到的问题的**非常简化的描述。**在我的实际应用程序中，我不会在多个 SQL Server 实例之间复制数据（请参阅帖子末尾的更新）。*

一切都是事务的一部分，因此整个操作是原子的。

这是我目前正在尝试按顺序执行的操作（事务中的所有内容）：

1.  我从数据库 A 中读取了一个块（比如 50 行）
2.  我更新了在步骤 1 中读取的行（我实际上将行的布尔`Sent`列设置为 value `true`，所以将来我知道这些行已发送）
3.  我使用（客户端）一个 WCF Web 服务（SOAP 1.2，`wsHttpBinding`），它是事务流（阻塞同步调用）的一部分。webservice请求发送步骤1中读取的数据
4.  webservice 实现（服务器端）在数据库 B 中插入数据（包含在 webservice 请求中的数据）
5.  *   如果没有从服务器接收到异常，则从数据库 A 中删除`Sent`值为 as的数据`true`
    *   `FaultException`如果从服务器接收到特定`Sent`值，则从数据库 A 中删除值为 true 的数据
    *   对于其他`FaultExceptions`和其他异常（未找到端点或其他任何情况），`Sent`值为 as`true`的数据不会从数据库 A 中删除

*注意：实际上有多个缓冲区数据库（A1、A2、A3...、AN）和多个目标数据库（B1、...BN）。有 N 个线程来处理 N 个数据库。*

如果我运行我的服务器和客户端，一切正常。数据是从数据库 A 到数据库 B 的每个块原子地“传输”的。当我在事务中间粗暴地停止我的客户端（进程被杀死）时，大多数时候一切都很好（即数据没有从数据库 A 中删除或添加到数据库 B)。

**但有时（这是我的实际问题），我的数据库 B 被锁定。解锁它的唯一选择是终止服务器进程。**

当问题发生时，我可以在 MSDTC 中看到有一个活动事务（请注意，在屏幕截图中有 3 个事务，因为我目前正在处理 3 个缓冲区数据库和 3 个目标数据库，但有时即使只有 1 个事务有 3 个数据库）。

![在此处输入图像描述](../Images/1b873beffcc58cdb3d5d8d041276d38d.png)

我看到数据库 B 在尝试再次运行数据库 B 时被锁定`SELECT`。如下图所示，我的`SELECT`请求被会话 ID 67 阻止，该会话 ID 对应于`INSERT`服务器进程在数据库 B 中的一个。

![在此处输入图像描述](../Images/acae620895610f58ebe41d7b8f3632c1.png)

锁定永远保持（没有事务超时，即使在 1 小时后），直到服务器进程终止。我无法在 MSDTC 中验证或取消交易，我收到一条警告说“ `it cannot be aborted because it is not "In Doubt"`”。

**为什么数据库 B 保持锁定状态？如果客户端终止，事务不应该失败并且数据库B上的锁在超时后被释放吗？**

这是我的服务器端代码：

```
// Service interface
[ServiceContract]
public interface IService
{
    [OperationContract]
    [FaultContract(typeof(MyClass))]
    [TransactionFlow(TransactionFlowOption.Allowed)]
    void SendData(DataClass data);
}

// Service implementation
[ServiceBehavior()]
public partial class Service : IService
{
    [OperationBehavior(TransactionScopeRequired = true)]
    public void SendData(DataClass data)
    {
        if (data == null)
        {
            throw new FaultException<MyClass>(new MyClass());
        }

        try
        {
            // Inserts data in database B
            using (DBContextManagement ctx = new DBContextManagement())
            {
                // Inserts data using Entity Framework
                // This will add some entities to the context
                // then call context.SaveChanges()
                ctx.InsertData(data);
            }
        }
        catch (Exception ex)
        {
            throw new FaultException<MyClass>(new MyClass());
        }
    }
} 
```

这是我的服务器端配置（自托管 WCF 服务）：

```
<system.serviceModel>
    <services>
      <service name="XXXX.MyService">
        <endpoint binding="wsHttpBinding" bindingConfiguration="WsHttpBinding_IMyService" contract="XXXX.IMyService" />
      </service>
    </services>
    <bindings>
      <wsHttpBinding>
        <binding name="WsHttpBinding_IMyService" transactionFlow="true" allowCookies="true" >
          <readerQuotas maxDepth="32" maxArrayLength="2147483647" maxStringContentLength="2147483647" />
          <security mode="None" />
        </binding>
      </wsHttpBinding>
    </bindings>
    <behaviors>
      <serviceBehaviors>
        <behavior name="">
          <serviceTimeouts transactionTimeout="00:00:20" />
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="true" />
          <dataContractSerializer maxItemsInObjectGraph="2147483647" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel> 
```

这是我的客户代码：

```
try
{
    using (DBContextManagement ctx = new DBContextManagement())
    {
        using (TransactionScope ts = new TransactionScope(TransactionScopeOption.Required, new TransactionOptions { IsolationLevel = System.Transactions.IsolationLevel.ReadUncommitted, Timeout = new TimeSpan(0, 0, 30) }, EnterpriseServicesInteropOption.None))
        {
            // First of all, retrieves data from database A
            // Internally queries the database A through Entity Framework
            var data = ctx.GetData();

            // Mark data as sent to the server
            // Internally updates the database A through Entity Framework
            // This actually set the Sent property as true, then call
            // context.SaveChanges()
            ctx.SetDataAsSent(data);

            try
            {
                // Send data to the server
                MyServiceClient proxy = new MyServiceClient();
                MyServiceClient.SendData(data);

                // If we're here, then data has successfully been sent
                // This internally removes sent data (i.e. data with
                // property Sent as true) from database A through entity framework
                // (entities removed then context.SaveChanges)
                ctx.RemoveSentData();
            }
            catch (FaultException<MyClass> soapError)
            {
                // SOAP exception received
                // We internally remove sent data (i.e. data with
                // property Sent as true) from database A through entity framework
                // (entities removed then context.SaveChanges)
                ctx.RemoveSentData();
            }
            catch (Exception ex)
            {
                // Some logging here
                return;
            }

            ts.Complete();
        }
    }
}
catch (Exception ex)
{
    // Some logging here (removed from code)
    throw;
} 
```

这是我的客户端配置：

```
<system.serviceModel>
    <bindings>
      <wsHttpBinding>
        <binding name="WsHttpBinding_IMyService"
                 closeTimeout="00:01:00"
                 openTimeout="00:01:00"
                 receiveTimeout="00:10:00"
                 sendTimeout="00:01:00"
                 allowCookies="false"
                 bypassProxyOnLocal="false"
                 hostNameComparisonMode="StrongWildcard"
                 transactionFlow="true"
                 maxBufferPoolSize="2147483647"
                 maxReceivedMessageSize="2147483647"
                 messageEncoding="Text"
                 textEncoding="utf-8"
                 useDefaultWebProxy="true">

          <readerQuotas maxDepth="32"
                        maxStringContentLength="2147483647"
                        maxArrayLength="16384"
                        maxBytesPerRead="4096"
                        maxNameTableCharCount="16384" />
          <security mode="None">
            <transport clientCredentialType="None" proxyCredentialType="None" realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
      </wsHttpBinding>
    </bindings>

    <client>
      <endpoint address="http://localhost:8080/MyService.svc"
                binding="wsHttpBinding"
                bindingConfiguration="WsHttpBinding_IMyService"
                contract="XXX.IMyService"
                name="WsHttpBinding_IMyService" />
    </client>

  </system.serviceModel> 
```

所以我的问题是：

*   我的分布式事务模式/设计是有效且健壮的设计吗？
*   如果我的客户的事务被残酷地终止，什么会导致我的数据库 B 被无限期锁定？
*   我应该更改什么（配置和/或代码和/或设计）以使其按预期工作（即，如果我的客户端进程死亡/崩溃，我希望事务被中止，以便数据库 B 不被锁定）？

谢谢。

* * *

**编辑**

我确实认为我过度简化了对实际用例的描述。看起来我实际上是在多个 SQL Server 实例之间进行简单的数据复制。这没有很好的解释（我的错），这不是我想要达到的目标。

我不是简单地复制数据。我从机器 M1 上的 A 读取，然后写入机器 M2 上的 B，但是写入的不是我读过的，而是来自读取的一些计算值。我很确定 SQL Server 复制服务可以为我处理业务计算，但由于某些原因我不能这样做：

*   我不能使用 SQL Server 复制，因为我实际上不负责服务器端（写入数据库 B）。我什至不确定另一边是否会有 SQL Server（可能是带有 MySQL、PostgreSQL 或任何东西的 Java 后台）
*   出于同样的原因（可能是异构数据库和环境），我不能使用 SQL Server 服务代理或任何面向消息的中间件（适合 IMO）
*   我无法更改 Web 服务，因为现在已经定义并修复了接口。

我被 WCF 困住了，由于互操作性要求，我什至无法更改绑定配置以使用 MSMQ 或其他任何东西。MSMQ 肯定很棒（我已经在项目的另一部分使用它），但它只是 Windows。SOAP 1.2 是标准协议，SOAP 1.2 事务也是标准的（`WS-Atomic`实现）。

实际上，也许 WCF 事务不是一个好主意。

如果我正确理解了它的实际工作原理（如果我错了，请纠正我），它只允许在服务器端“继续”事务范围，这将需要在服务器端配置事务协调器，这可能会中断我的互操作性需求（同样，服务器端可能有一个与事务协调器没有很好集成的数据库）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T17:07:56.433

也许这不是您要寻找的答案，但恕我直言，您只是在重新发明轮子。您需要一种将更改从 A 复制到 B 的可靠方法。已经有一个内置的解决方案，即[Transactional Replication](http://msdn.microsoft.com/en-us/library/ms151176.aspx)。只需将其配置为不复制删除，您就拥有了您所要求的语义。

对于事务复制不符合要求的事情（您描述的复杂拓扑，有许多发布者和许多订阅者，可能就是这种情况）我仍然不会使用 WCF。SQL Server 已经拥有可靠的消息传递，该消息传递速度极快，具有事务性，并且明确设计为避免分布式事务和两阶段提交：[Service Broker](http://msdn.microsoft.com/en-us/library/bb522893.aspx)。

即使您坚持使用 WCF，使用协调事务也不是正确的方法。您应该使用 MSMQ 排队通道并以面向消息的方式设计它，而不是 RPC 调用样式（并且通过 http WCF 绑定的 SOAP/HTTP 调用只不过是一种美化的 RPC）。我强烈建议您阅读[分布式系统编程游戏](http://blog.incubaid.com/2012/03/28/the-game-of-distributed-systems-programming-which-level-are-you/) 。您现在处于第 1 级，您需要过渡到第 2 级。WCF HTTP 不会将您带到那里。带有 MSMQ 绑定的 WCF 可能，但是您很快就会意识到，对排队通道进行*编程*与对 RPC 通道进行编程完全不同，而且您必须从头开始重写几乎所有*内容*。如果您愿意放弃[Kool Aid ，SSB 可以用更可靠、更快的车辆带您到那里](http://en.wikipedia.org/wiki/Drinking_the_Kool-Aid).

# netty - 使用 BufferedWriteHandler.flush 进行观察

> ID：10231486
> 
> 赞同：0
> 
> 时间：2012-04-19T15:28:07.497
> 
> 标签：netty, flush

我有一个关于在我的程序中刷新使用的观察结果。我的测试代码将价值 200 MB 的数据 < Channel.write(buffer) > 泵送大约 30 分钟（每块 128 字节），每次调用之间有几毫秒的延迟。

一旦我得到回电 < SimpleChannelHandler.writeComplete > 我会记录 < System.currentTimeMillis + WriteCompletionEvent.getWrittenAmount >。完成对 <Channel.write(buffer) > 的所需调用的测试后，我观察到在最初的 5 分钟内，以大约 1.6 mbps 的速度刷新了 55 MB 的数据，然后在剩余的 25 分钟内以 0.8 Mbps 的速度刷新了 140 MB . 在过去的 25 分钟内，我观察到写入的数据块大小为 10 MB（每个回调到 SimpleChannelHandler.writeComplete ）。

< SimpleChannelHandler.writeComplete > 的平均回调延迟在最初的 5 分钟运行中约为 2 毫秒，在最后 25 分钟的运行中达到 11500 毫秒。

请帮助我理解这种行为，并建议我可以在哪里进行调整以避免在最后 25 分钟的跑步中出现颠簸。

以下是有关我的设置 + 代码的一些信息：

我的客户端和服务器节点之间的连接是 1 GE，我已将 ClientBootstrap.setOption 中的 < sendBufferSize > 和 < receiveBufferSize > 设置为 < 16777216 >

我的通道管道中有一个 BufferedWriteHandler 实例 < pipeline.addFirst("bufferedWriter", new ConsolidatingAutoFlusher()); >，并在 <writeRequested> 中调用 <BufferedWriteHandler.flush(true)>

干杯，萨凯特。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T19:25:36.503

所以你在每个 writeRequested(..) 回调上调用 BufferdWriteHandler.flush(true) ？我不明白你为什么要这样做。如果您真的在每个 writeRequested 上刷新，那么根本不需要 BufferedWriteHandler。它只会以不好的方式影响性能。

# mysql - mysql 在 utf 字符集表中查询 c 返回 ç

> ID：10231490
> 
> 赞同：0
> 
> 时间：2012-04-19T15:28:20.913
> 
> 标签：mysql, utf-8

我设法通过设置字符集将特殊字符插入表中

```
CHARSET=utf8; 
```

事情是，当我在表上运行以下查询时

```
SELECT * FROM table WHERE word = 'francais'; 
```

它返回“francais”和“français”！

这对我的情况不太理想。我不知道为什么会这样做，因为它们只是不同...

谁能告诉我如何避免这种情况？将不胜感激。

勋爵

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:31:00.573

尝试使用排序规则，例如，

```
select *
from table
where word = 'francais' collate utf8_bin; 
```

# cakephp - Cake 1.2 货币换算成英镑 £

> ID：10231491
> 
> 赞同：-1
> 
> 时间：2012-04-19T15:28:21.800
> 
> 标签：cakephp, cakephp-1.2

如何使用货币方法将我的数字格式化为 GBP (£) ？

以下代码返回 110.00 美元，我希望它返回 110.00 英镑

```
 <div id="subtotal"> <?php echo $number->currency($invoice['Invoice']['subTotal']); ?></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:48:26.203

`echo $number->currency($invoice['Invoice']['subTotal'], 'GBP');`

查看 api 文档：[http ://api12.cakephp.org/class/number-helper#method-NumberHelpercurrency](http://api12.cakephp.org/class/number-helper#method-NumberHelpercurrency)

# apple-tv - .Net（或其他）开发链接，用于将视频流式传输到 Apple TV？

> ID：10231493
> 
> 赞同：0
> 
> 时间：2012-04-19T15:28:24.803
> 
> 标签：apple-tv

我们是一个学区，正在部署约 800 台 iPad，为每位教师配备一台。明年，我们可能会在每个房间安装 Apple TV，以便将 iPad 无线镜像到教室投影仪。

我很想使用 Apple TV 作为我们的标准来镜像我们所有的 Windows7 笔记本电脑。

AirParrot (http://airparrot.com/) 允许从 Mac OS/X 进行此操作。Apple 没有许可镜像协议，因此 AirParrot 绕过它的方式基本上是将桌面作为 H.264“电影”流式传输到 Apple TV。Apple TV 认为它只是在播放电影。从评论来看，他们似乎已经将滞后时间提高到了可以接受的水平。

我不明白为什么 Windows 7 不能轻易做到这一点，我只是看不到有一个应用程序可以做到这一点。

有任何想法吗？我是一名 .Net 软件开发人员。如果有人至少有关于如何处理来自 .Net 的 Apple TV 视频流的链接，那将是一个很好的第一步。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T03:57:45.357

我正在开发一个用于将图片/视频发送到 AppleTV 的 C# 库，但在 30 秒后无法切断视频（[链接到问题](https://stackoverflow.com/questions/11857130/tcpclient-or-httpwebrequest-to-apple-tv-ending-after-30-seconds)），但希望我能尽快解决这个问题。如果解决了这个问题，您可能会弄清楚如何生成屏幕电影并使用库代码对其进行流式传输。

[https://airlib.codeplex.com/](https://airlib.codeplex.com/)

# c# - 在 WebBrowser 控件中转义 TabStop

> ID：10231501
> 
> 赞同：1
> 
> 时间：2012-04-19T15:28:44.683
> 
> 标签：c#, webbrowser-control

我正在用 c# 构建一个电子邮件客户端，允许用户发送 HTML 电子邮件。我有一些通用的格式化功能，包括插入项目符号和编号列表的选项。我希望允许用户通过控件进行选项卡，但也使用选项卡键来缩进他们列表中的项目符号或数字。有没有办法在某个控件中转义 TabStop，特别是 webBrowser 控件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T12:01:46.053

大卫激发了这个想法，但我想提供更多细节。我使用 mshtml 来实际插入缩进和缩进。只是仍然移动到下一个控件，因此添加`e.IsInputKey = true`实际上将光标保留在 webBrowser 控件中，以便用户可以继续输入。

```
 private void webBrowser_PreviewKeyDown(object sender, PreviewKeyDownEventArgs e)
  {
     if (e.KeyData == Keys.Tab)
     {
        webBrowser.Document.ExecCommand("Indent", false, null);
        e.IsInputKey = true;    //prevents going to next control
     }
     else if (e.KeyData == (Keys.Shift | Keys.Tab))
     {
        webBrowser.Document.ExecCommand("Outdent", false, null);
        e.IsInputKey = true;
     }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T17:34:13.707

对于多行文本框，您可以使用[AcceptsTab](http://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.acceptstab.aspx)属性。

对于 WebBrowser 控件，我认为您必须使用[KeyPress](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowserbase.keypress.aspx)事件并自己插入一个制表符`\t`。

# asp.net - 用户登录后如何打开一个新窗口（登录控件）？

> ID：10231502
> 
> 赞同：0
> 
> 时间：2012-04-19T15:28:50.413
> 
> 标签：asp.net

一个新的弹出窗口打开，但它被重定向到登录页面，并且基本页面也因显示不正确的密码而无法登录。要求：我们需要在浏览器上没有任何返回按钮的登录后弹出窗口。

```
<asp:Content ID="LoginContent" ContentPlaceHolderID="LoginContent" runat="server">
      <asp:UpdatePanel ID="LoginUpdatePanel" runat="server" UpdateMode="Conditional">
        <ContentTemplate>
            <asp:Panel Width="100%" runat="server" ID="LoginPanel" HorizontalAlign="Center" DefaultButton="MainLogin$LoginButton">
                <asp:Label ID="LoginMessageValue" runat="server"></asp:Label>
                <asp:Login RememberMeSet="false" ID="MainLogin" OnLoggedIn="MainLogin_LoggedIN"  OnAuthenticate="Login_Click" runat="server" SkinID="standardLoginObject" EnableTheming="True"
                  TextBoxStyle-Width="150px" DisplayRememberMe="false">
                </asp:Login>
            </asp:Panel>
        </ContentTemplate>
    </asp:UpdatePanel>
</asp:Content> 
```

代码背后：

```
Protected Sub Login_Click(ByVal sender As Object, ByVal e As System.EventArgs)
        'OnAuthenticate = "Login_Click"
        ' ScriptManager.RegisterClientScriptBlock(Me.Page, Me.GetType, "error", "window.open('~/workflow/Worklist2.aspx', 'mywindow', 'status=1,toolbar=0');", True)
        Try
            Common.UserObject = System.Web.Security.Membership.GetUser(MainLogin.UserName)

            Dim _userID As Integer = Common.UserObject.ProviderUserKey
            Common.InitializeSession(_userID, nameSpaceURI)
            Dim _role() As String = System.Web.Security.Roles.GetRolesForUser(Common.UserObject.UserName)
            If _role.Length = 0 Then
                Common.ClearSession()
                Response.Redirect(ConfigurationManager.AppSettings("LoginPath"), False)
                'MainLogin.FailureText = "Please contact the customer service to review your account setup."
                'ClientScript.RegisterClientScriptBlock(Page.GetType, "Error", "alert('Please contact the customer service to review your account setup.')", True)
            End If
            ScriptManager.RegisterClientScriptBlock(Me.Page, Me.GetType, "success", "window.open('../workflow.aspx', 'mywindow', 'status=1,toolbar=0'); window.resizeTo(screen.availWidth,screen.availHeight); window.moveTo(0,0); ", True)
        Catch ex As Exception
            SaveException(ex)
        End Try
    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:54:23.497

我认为您真正的问题是您试图显示一个错误页面，该页面还要求用户通过身份验证才能看到它。

您应该将错误页面移动到公开可见的位置。

您可以在 web.config 中指定此行为：

```
<configuration>
   <location path="~/errorpage.aspx">
      <system.web>
         <authorization>
            <allow users="?"/>
         </authorization>
      </system.web>
   </location>
</configuration> 
```

# c++ - Windows Mobile 6.5 -- 对话框空闲时调用函数？一个拉 WM_KICKIDLE

> ID：10231503
> 
> 赞同：0
> 
> 时间：2012-04-19T15:28:52.880
> 
> 标签：c++, windows-mobile, windows-mobile-6.5

我正在开发一个 Windows Mobile 6.5 应用程序，该应用程序有一个对话框，显示来自相机的输入，并有一个按钮来保存流的快照。相机 API 建议在应用程序空闲时通过 Windows 消息循环调用更新流视图的函数，但没有比这更具体的了。经过大量的谷歌搜索，我仍然找不到任何有用的东西来实际实现这样的东西。

有谁知道这可能是如何实现的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T18:58:37.350

您必须实现一个消息循环，而不是使用传统的`GetMessage`which 阻塞，直到消息存在于线程的消息队列 [1] 中，而是使用`PeekMessage`，如果不存在消息，则返回 false [1]。

如果它返回 false，那么您将进行空闲处理。请注意，您应该将空闲处理分成足够小的块，以便消息循环不会导致您的应用程序无响应。

这也是 1 个 cpu 或 1 个内核上的线程的经典替代方案。

[1] 或应合成（绘画或计时器）

# java - 以编程方式从另一个项目创建 Eclipse Java 项目

> ID：10231504
> 
> 赞同：1
> 
> 时间：2012-04-19T15:28:53.080
> 
> 标签：java, eclipse, project

我想从另一个 Java 项目创建一个 Java 项目，使用 Eclipse 库中的一些脚本或 Java 方法，无论它是否存在。另一种方法是复制以前手动创建的项目。有什么办法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:32:46.097

我相信你可以利用`IProject#copy`（继承自[IResource.copy](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/core/resources/IResource.html)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-27T20:10:33.293

添加到 Alexander Pavlov 的回答中，我发现除了复制项目文件之外，还需要一些额外的工作来复制项目属性（例如引用的项目）。

```
public static IProject copyProject(String projectName) throws CoreException {
    IProgressMonitor m = new NullProgressMonitor();
    IWorkspaceRoot workspaceRoot = ResourcesPlugin.getWorkspace().getRoot();
    IProject project = workspaceRoot.getProject(projectName);
    IProjectDescription projectDescription = project.getDescription();
    String cloneName = projectName + "_copy";
    // create clone project in workspace
    IProjectDescription cloneDescription = workspaceRoot.getWorkspace().newProjectDescription(cloneName);
    // copy project files
    project.copy(cloneDescription, true, m);
    IProject clone = workspaceRoot.getProject(cloneName);
    // copy the project properties
    cloneDescription.setNatureIds(projectDescription.getNatureIds());
    cloneDescription.setReferencedProjects(projectDescription.getReferencedProjects());
    cloneDescription.setDynamicReferences(projectDescription.getDynamicReferences());
    cloneDescription.setBuildSpec(projectDescription.getBuildSpec());
    cloneDescription.setReferencedProjects(projectDescription.getReferencedProjects());
    clone.setDescription(cloneDescription, null);
    return clone;
} 
```

# android - 在右侧列出项目

> ID：10231505
> 
> 赞同：0
> 
> 时间：2012-04-19T15:28:53.273
> 
> 标签：android, xml, layout

我有 list_item.xml 文件，其中列出了左侧的项目，我一直在尝试使用重力和 layout_gravity 来使这些项目列在右侧我的意思是**list_item** .xml ，但这些并没有改变任何东西。只是提到我还有其他 xml 文件：item.xml、item_list.xml 和这个文件是 list.xml

![在此处输入图像描述](../Images/7c840fdcadf9aa533d722be2ccba549a.png)

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
         xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
          android:id="@+id/list_container"
          android:measureAllChildren="true"
          android:layout_width="wrap_content" 
          android:layout_height="match_parent"
          android:orientation="vertical" >

        <ListView
            android:id="@android:id/list"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:drawSelectorOnTop="false"
            android:focusableInTouchMode="true"
            android:paddingBottom="10sp"
           />

        <ScrollView android:id="@+id/edit_layout"
            android:layout_width="fill_parent" 
              android:layout_height="fill_parent"
            android:visibility="gone>

            <LinearLayout
                android:orientation="vertical"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:paddingTop="5sp"
                android:paddingLeft="10sp"
                android:gravity="right"
                android:paddingRight="15sp" 
                >

                <TextView
                    android:layout_width="fill_parent" 
                    android:layout_height="wrap_content"
                    android:text="@string/list_notes_label"
                    android:gravity="right"
                />
        <!-- I have many other of text views -->
            </LinearLayout>
        </ScrollView>
     <com.google.ads.AdView
            android:id="@+id/adView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true">
        </com.google.ads.AdView> 
    </RelativeLayout> 
```

项目.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="vertical"
android:gravity="right" >

<ImageView
    android:id="@+id/image"
    android:layout_width="50dp"
    android:layout_height="50dp" />

<TextView
    android:id="@+id/caption"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_toRightOf="@id/image"
    android:textSize="18sp" />

<TextView
    android:id="@+id/description"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@id/caption"
    android:layout_toRightOf="@id/image" /> 
```

list_item.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:paddingTop="6dip"
android:paddingBottom="6dip"
android:paddingLeft="20dip"
android:gravity="right">

<TextView android:id="@android:id/text1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:textAppearance="?android:attr/textAppearanceLarge"
/>

<TextView android:id="@android:id/text2"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:textAppearance="?android:attr/textAppearanceSmall"
/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:43:36.717

`android:layout_alignParentRight="true"`在每个 TextView 和 ImageView 上添加。

# jquery - 使用图像映射作为 jQuery UI Draggable 的句柄

> ID：10231506
> 
> 赞同：1
> 
> 时间：2012-04-19T15:29:06.933
> 
> 标签：jquery, jquery-ui-draggable, imagemap

我想知道如何使用图像上的图像映射作为 jQuery 可拖动图像的句柄。这是我到目前为止所拥有的。

**JS**

```
$('.stickyleave').draggable({
    containment:'#stickyleave-main',
    handle: "#" + $(e).find('img').attr('usemap') + " area",
    start:function(e,ui){
        ui.helper.css('z-index',++$.zIndex);
    }
}); 
```

**HTML**

```
<div class="stickyleave" />
    <img usemap="#image_map" src="' . $upload_dir['baseurl'] . '/' . $style[0] . '.png" />
    <map name="image_map" id="image_map">
        <area shape="poly" coords="4,27,27,12,45,2,65,1,83,11,91,17,99,29,89,47,60,56,39,52"/>
    </map>
</div> 
```

但它只是行不通。任何建议都会有所帮助。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:57:57.383

首先， $(e).find('img').attr('usemap') 已经包含 '#'

这是使其正常工作的解决方法

```
$('.stickyleave').each(function(){    
    $(this).draggable({
        containment:'#stickyleave-main',
        handle: $(this).find('img').attr('usemap'),
        start:function(e,ui){
            ui.helper.css('z-index',++$.zIndex);
        }
    });
}); 
```

​</p>

这是一个工作示例[http://jsfiddle.net/cFwuD/](http://jsfiddle.net/cFwuD/)

# database - 将数据从多个数据库复制到单个数据库

> ID：10231510
> 
> 赞同：1
> 
> 时间：2012-04-19T15:29:15.000
> 
> 标签：database, database-design, replication, erp

我们为我们的 ERP 客户提供了一个架构，一个客户可以有多个数据库，每个数据库在不同的位置运行。客户有一个总部数据库，来自不同数据库的数据在运行的基础上累积。我们目前有一个基于文件的方法，我们为所有数据库更改以特定格式制作文件，然后在运行的基础上将文件上传到总部位置。在总部，有一个程序一直在运行。一旦文件上传到 HO FTP，总部 exe 会捕获它。它会下载它并根据接收数据的某个位置 ID 更新总部数据库。这种方法在过去 10 到 12 年一直运行良好，但现在我们开始面临问题。

问题在于总部 exe 和数据库更新，因为要更新/插入的文件数量和数据量太多。我一直在为这个功能问题寻找合适且可扩展的解决方案。可能是复制或其他一些方法可以提供帮助。

帮助和建议表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T20:10:24.147

您可以使用[SymmetricDS](http://symmetricds.org/)在总部同步数据库并整合数据。它是一个开源复制服务器，可捕获更改并通过基于 Web 的协议定期将其发送到目标数据库。它旨在即使在带宽较低的情况下也能正常工作，并且如果网络不稳定，它可以自动恢复。可以转换和丰富数据，因此您可以动态添加位置 ID 来识别数据的客户。它已被部署到生产环境以同步大量（数千个）数据库，因此在可扩展性方面做了很多工作。该项目开发还由一家商业公司[JumpMind](http://www.jumpmind.com/)赞助，该公司对其长期成功感兴趣并为其提供商业产品和支持。

# ios - 在更新和同步到 iCloud 时保留 iOS 应用程序中的程序数据

> ID：10231514
> 
> 赞同：2
> 
> 时间：2012-04-19T15:29:33.410
> 
> 标签：ios, xcode, upgrade, retain, preference

在 iOS 上发布和安装新升级时，升级过程中哪些文件夹/文件未受影响？有几个文件夹；库、缓存、首选项、文档。

通常默认情况下不创建应用程序支持目录。升级过程中 AS 文件夹会发生什么？

我了解到 Documents 文件夹中的所有数据默认会复制到 iTunes 或 iCloud。真的吗？

如果我创建自己的 CoreData 数据库来持久化，我应该保存在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T18:27:00.857

最好的办法是从[Apple](http://developer.apple.com/library/mac/#documentation/FileManagement/Conceptual/FileSystemProgrammingGUide/FileSystemOverview/FileSystemOverview.html)阅读本文档的前半部分（与 iOS 相关） ：

根据我的经验，如果您的应用未启用 iTunes 文件共享功能，我会将 Core Data db 放在 Documents 文件夹中。否则，在 Library 文件夹中创建一个名为 Application Support 或任何名称等的文件夹。启用 iTunes 文件共享后，用户可能会意外删除 Documents 文件夹中的任何文件。

在升级过程中，Library 和 Documents 文件夹的内容将被保留。

# vb6 - VB.NET 调用 COM DLL 并调用另一个 COM DLL 导致错误

> ID：10231518
> 
> 赞同：0
> 
> 时间：2012-04-19T15:29:37.770
> 
> 标签：vb6, comobject

我正在 VB.NET 2010 中编写一个 COM DLL（我们称之为 DLL A）。此 DLL 使用预先存在的 DLL (DLL B) 中的函数。当我从 VS2010 中的测试应用程序运行代码时，一切正常。

(测试应用程序)--> (DLL A)--> (DLL B)

现在我在真实的 APP（在 VB6 中）中添加对 DLL A 的引用

(真实应用)--> (DLL A)--> (DLL B)

...我得到这个错误

无法将类型为“System.__ComObject”的 COM 对象转换为接口类型“Object.class”。此操作失败，因为对具有 IID '{GUID}' 的接口的 COM 组件的 QueryInterface 调用由于以下错误而失败：不支持此类接口（HRESULT 异常：0x80004002 (E_NOINTERFACE)）。

DLL A 确实被初始化了，但是一旦我调用一个引用 DLL B 的函数，它就会出错。

帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:24:54.833

当您部署 .NET DLL 并希望将其与 COM(VB6) 一起使用时，您需要使用“RegASM”在您的程序集中进行注册。注册 GAC 文件夹以外的文件夹时，您必须包含 /codebase 开关。

使用 /codebase 开关，它必须是强名称程序集。

# grails - 转发而不是重定向，同时仍然使用片段滚动页面

> ID：10231523
> 
> 赞同：0
> 
> 时间：2012-04-19T15:29:43.520
> 
> 标签：grails, redirect, anchor, fragment, forward

我使用`forward`而不是`redirect`（隐藏url中的参数），问题是我想传递一个片段，`forward`所以我的页面将滚动到指定的位置。使用`redirect`，这有效：

```
redirect(controller: "mycontroller", action: "myaction", fragment: "anchor") 
```

但是`forward`，它不会滚动到锚点位置：

```
forward(controller: "mycontroller", action: "myaction", fragment: "anchor") 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:36:37.500

使用该片段的原因[`redirect`](http://grails.org/doc/latest/ref/Controllers/redirect.html)是重定向告诉浏览器向指定的 URL 发出另一个 (GET) 请求。这使浏览器有机会 1\. 获取新页面，以及 2\. 滚动到适当的锚点。

使用`forward`，servlet 容器只是告诉另一段代码来处理请求 - 它实际上对浏览器不可见，因此浏览器将无法滚动到任何地方。这就是为什么`fragment` [不是`forward`](http://grails.org/doc/latest/ref/Controllers/forward.html).

为了实现这一点，您必须：

*   重定向而不是转发，或
*   使用 JavaScript 使页面滚动，或
*   发送带有最终被转发的初始请求的片段

以上任何一项都应在适当的条件下工作；但是，我不确定我们是否有关于您提出的请求的足够信息来提供更具体的示例。

# mysql - 使用规格过滤器搜索产品

> ID：10231528
> 
> 赞同：1
> 
> 时间：2012-04-19T15:30:04.677
> 
> 标签：mysql, sql, subquery

我有一个包含产品规格的表。我在[http://sqlfiddle.com/#!2/15575/1](http://sqlfiddle.com/#!2/15575/1)中创建了一个数据样本。我想创建用户可以按规格搜索产品的搜索表单。例如用户搜索 RAM=2 和 VGA=512 或 VGA=1 的笔记本电脑。我写了一个查询，但没有工作。请帮助我。这个例子：结果：1525,1535,k5,k6 ![在此处输入图像描述](../Images/a061ce0bd3e23287ec46176565892eca.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T15:40:07.987

```
select product 
from my_table  
where (custom = 'Ram' and custom_value = '2') 
    or (custom = 'vga' and custom_value in ('1', '512'))
group by product
having count(distinct custom) = 2 
```

**例子：**

[http://sqlfiddle.com/#!2/15575/19](http://sqlfiddle.com/#!2/15575/19)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T15:48:14.363

我将您的请求解释为： - 在您的每个标准中，您都需要一个`OR`子句。- 所有标准都`AND`编在一起。

因此，对于上面的示例，您需要：

```
SELECT products.product FROM 
(select distinct product from my_table) as products
where 
   exists (
      select * from my_table where products.product = my_table.product
      and custom='Ram' and custom_value='2')
and exists (
      select * from my_table where products.product = my_table.product
      and custom='vga' and custom_value in('512','1')) 
```

您从唯一的产品列表开始，然后检查每个条件以查看该产品是否存在值。

SQL小提琴在这里： [http ://sqlfiddle.com/#!2/15575/35](http://sqlfiddle.com/#!2/15575/35)

话虽如此，您应该重新设计您的表格。

您可以从此查询中看到重新设计的起点可能是什么。首先，创建一个仅列出独特产品的表。然后为每个条件创建表。或者扩展独特产品表，将每个自定义值（“Ram”、“vga”等）作为独特产品表中的列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T15:35:18.860

你想要一个`or`我`and`认为的地方：

```
SELECT product, count(*) as prod_count FROM my_table  
WHERE (custom='Ram' and custom_value='2') 
or (custom='vga' and custom_value in('512','1'))
group by product
having prod_count = 2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T15:42:26.053

首先，我建议您使用不同的数据库结构：

```
CREATE TABLE COMPANY (ID INT, NAME VARCHAR(50), PRIMARY KEY(ID));
CREATE TABLE RAM (ID INT, NAME VARCHAR(50), PRIMARY KEY(ID));
CREATE TABLE CPU (ID INT, NAME VARCHAR(50), PRIMARY KEY(ID));
CREATE TABLE VGA (ID INT, NAME VARCHAR(50), PRIMARY KEY(ID)); 
```

然后使用关系表来指定产品属性：

```
CREATE TABLE PRODUCT_PROPERTIES (
    ID_PRODUCT INT REFERENCES PRODUCT(ID), 
    ID_COMPANY INT REFERENCES COMPANY (ID),     
    ID_RAM INT REFERENCES RAM (ID),    
    ID_CPU INT REFERENCES CPU (ID),    
    ID_VGA INT REFERENCES VGA (ID),
    PRIMARY KEY(ID_PRODUCT)
); 
```

然后使用简单的 JOINS 和简单的 SELECT 就`PRODUCT_PROPERTIES`可以轻松过滤结果。

希望这可以帮助..

# objective-c - 在目标文件中使用未声明的标识符

> ID：10231532
> 
> 赞同：0
> 
> 时间：2012-04-19T15:30:37.717
> 
> 标签：objective-c, xcode

我被编译器标记为具有未声明的标识符，并且想知道解决此问题的最佳方法是什么？

这是我第一次使用 plist 来存储数据，所以我不确定最好的方法是什么。谢谢你。

已注释掉错误消息：

目的地.h

```
#import "Destination.h"

@implementation Destination

@synthesize coordinate = _coordinate;
@synthesize title = _title;
@synthesize subtitle = _subtitle;
@synthesize destinationName = _destinationName;
@synthesize destinationImage = _destinationImage;

-(id)initWithDestinationIndex:(NSUInteger)destinationIndex {
  if (self = [super init]) {
    NSString *filePath = [[NSBundle mainBundle] pathForResource:@"Destinations" ofType:@"plist"];
    NSDictionary *destinations = [NSDictionary dictionaryWithContentsOfFile:filePath];
    NSArray *destinationsArray = [destinations objectForKey:@"DestinationData"];
    NSDictionary *data = [destinationsArray objectAtIndex:destinationIndex];

    self.destinationImage = [UIImage imageNamed:[data objectForKey:@"DestinationImage"]];
    self.destinationName = [data objectForKey:@"DestinationName"];
    NSDictionary* destinationLocation = [data objectForKey:@"DestinationLocation"];
    destinationCoordinate.latitude = [[destinationLocation objectForKey:@"Latitude"]doubleValue];// Use of undeclared identifier 'destinationCoordinate'
    destinationCoordinate.longitude = [[destinationLocation objectForKey:@"Longitude"]doubleValue];// Use of undeclared identifier 'destinationCoordinate'
    self.coordinate = destinationCoordinate;//Use of undeclared identifier 'destinationCoordinate'
    self.title = [destinationLocation objectForKey:@"Title"];
    self.subtitle = [destinationLocation objectForKey:@"Subtitle"];
  }
  return self;
}

-(UIImage *)destinationImage {
  return destination.destinationImage;//Use of undeclared identifier 'destination'; did you mean 'Destination'?
}

-(NSString *)destinationName {
  return  destinationName;//Use of undeclared identifer 'destinationName'; did you mean '_destinationName'?
}

-(CLLocationCoordinate2D)destinationCoordinate {
  return destination.coordinate;//Use of undeclared 'destination'; did you mean 'Destination'
}

@end 
```

目的地.h

```
#import <Foundation/Foundation.h>
#import <MapKit/MapKit.h>

@interface Destination : NSObject<MKAnnotation>

@property(nonatomic,readwrite)CLLocationCoordinate2D coordinate;
@property(nonatomic,readwrite,copy)NSString *title;
@property(nonatomic,readwrite,copy)NSString *subtitle;
@property(nonatomic,strong)NSString *destinationName;
@property(nonatomic,strong)UIImage *destinationImage;
-(id)initWithDestinationIndex:(NSUInteger)destinationIndex;

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:47:56.370

完全删除该`destinationImage`方法。您已经合成了它，它应该可以正常工作。

# xml - 从 FMPXMLRESULT 到 FMRESULTSET 的 XSL 转换（2 种流行的 FileMaker 语法）

> ID：10231535
> 
> 赞同：0
> 
> 时间：2012-04-19T15:30:44.097
> 
> 标签：xml, xslt, filemaker

感谢 Stackoverflow 的 Tomalak，我能够从“旧”FMPXMLRESULT xml 语法到“新”FMRESULTSET xml 语法进行简单的 XSL 转换。

这是带有 FMPXMLRESULT 语法的原始 xml 文件：

```
<?xml version="1.0" encoding="UTF-8" ?>
<FMPXMLRESULT xmlns="http://www.filemaker.com/fmpxmlresult">
<ERRORCODE>0</ERRORCODE>
<PRODUCT BUILD="06-20-2006" NAME="FileMaker Pro" VERSION="8.5v1"/>
<DATABASE DATEFORMAT="M/d/yyyy" LAYOUT="" NAME="pro_page.fp7" RECORDS="2121" TIMEFORMAT="h:mm:ss a"/>
<METADATA>
    <FIELD EMPTYOK="YES" MAXREPEAT="1" NAME="Ident" TYPE="TEXT"/>
    <FIELD EMPTYOK="YES" MAXREPEAT="1" NAME="Title" TYPE="TEXT"/>
    <FIELD EMPTYOK="YES" MAXREPEAT="1" NAME="Content" TYPE="TEXT"/>
    <FIELD EMPTYOK="YES" MAXREPEAT="1" NAME="Footnotes::Num" TYPE="TEXT"/>
    <FIELD EMPTYOK="YES" MAXREPEAT="1" NAME="Footnotes::Title" TYPE="TEXT"/>
    <FIELD EMPTYOK="YES" MAXREPEAT="1" NAME="Images::Num" TYPE="TEXT"/>
    <FIELD EMPTYOK="YES" MAXREPEAT="1" NAME="Images::FileName" TYPE="TEXT"/>
    <FIELD EMPTYOK="YES" MAXREPEAT="1" NAME="Images::Title" TYPE="TEXT"/>
</METADATA>
<RESULTSET FOUND="1">
    <ROW MODID="135" RECORDID="440">
        <COL><DATA>422</DATA></COL>
        <COL><DATA>title text here</DATA></COL>
        <COL><DATA>some more text here</DATA></COL>
        <COL>
            <DATA>1</DATA>
            <DATA>2</DATA>
            <DATA>3</DATA>
            <DATA>4</DATA>
        </COL>
        <COL>
            <DATA>footnote 1 text here</DATA>
            <DATA>footnote 2 text here</DATA>
            <DATA>footnote 3 text here</DATA>
            <DATA>footnote 4 text here</DATA>
        </COL>
        <COL>
            <DATA>457</DATA>
            <DATA>563</DATA>
        </COL>
        <COL>
            <DATA>image 1 url here</DATA>
            <DATA>image 2 url here</DATA>
        </COL>
        <COL>
            <DATA>title for image 1 here</DATA>
            <DATA>title for image 2 here</DATA>
        </COL>
    </ROW>
</RESULTSET> 
```

这是我想要获得的 FMRESULTSET 格式（注意：我不需要完整的“元数据”部分，它可以留空，并且我删除了一些我也不需要的属性）：

```
<?xml version="1.0" encoding="UTF-8"?>
<fmresultset version="1.0" xmlns="http://www.filemaker.com/xml/fmresultset">
<error code="0"/>
<product version="8.0.4.128" name="FileMaker Web Publishing Engine" build="06/14/2006"/>
<datasource total-count="2121" timestamp-format="MM/dd/yyyy HH:mm:ss" time-format="HH:mm:ss" table="pro_page" layout="MR_Page_An" date-format="MM/dd/yyyy" database="pro_page.fp7"/>
<metadata></metadata>
<resultset fetch-size="1" count="1">
    <record>
        <field name="Ident"><data>422</data></field>
        <field name="Title"><data>title text here</data></field>
        <field name="Content"><data>some more text here</data></field>
        <relatedset table="Footnotes" count="4">
            <record>
                <field name="Footnotes::Num"><data>1</data></field>
                <field name="Footnotes::Title"><data>footnote 1 text here</data></field>
            </record>
            <record>
                <field name="Footnotes::Num"><data>2</data></field>
                <field name="Footnotes::Title"><data>footnote 2 text here</data></field>
            </record>
            <record>
                <field name="Footnotes::Num"><data>3</data></field>
                <field name="Footnotes::Title"><data>footnote 3 text here</data></field>
            </record>
            <record>
                <field name="Footnotes::Num"><data>4</data></field>
                <field name="Footnotes::Title"><data>footnote 4 text here</data></field>
            </record>
        </relatedset>
        <relatedset table="Images" count="2">
            <record>
                <field name="Images::Num"><data>457</data></field>
                <field name="Images::FileName"><data>image 1 url here</data></field>
                <field name="Images::Title"><data>title for image 1 here</data></field>
            </record>
            <record>
                <field name="Images::Num"><data>563</data></field>
                <field name="Images::FileName"><data>image 2 url here</data></field>
                <field name="Images::Title"><data>title for image 2 here</data></field>
            </record>
        </relatedset>
    </record>
</resultset> 
```

到目前为止，这就是我的 XSL 转换的样子。它工作正常，但不适用于“相关集”部分。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fmp="http://www.filemaker.com/fmpxmlresult" exclude-result-prefixes="fmp">
<xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>
<xsl:key name="kMetaData" match="fmp:METADATA/fmp:FIELD" use="count(preceding-sibling::fmp:FIELD) + 1" />

  <xsl:template match="/fmp:FMPXMLRESULT">
    <fmresultset version="1.0">
    <error code="0"/>
    <product build="01/01/201" name="FileMaker Web Pro" version="8.5"/>
    <datasource database="pro_page.fp7" date-format="MM/dd/yyyy" layout="MR_Page_Fr" table="pro_page" time-format="HH:mm:ss" timestamp-format="MM/dd/yyyy HH:mm:ss" total-count="1"/>
    <metadata></metadata>
    <resultset count="1" fetch-size="1">
      <xsl:apply-templates select="fmp:RESULTSET/fmp:ROW" />
    </resultset>
   </fmresultset>
  </xsl:template>

  <xsl:template match="fmp:ROW">
    <record record-id="0" mod-id="0">
      <xsl:apply-templates select="fmp:COL" />
    </record>
  </xsl:template>

 <xsl:template match="fmp:COL">
  <field name="{string(key('kMetaData', position())/@NAME)}">
    <data><xsl:value-of select="fmp:DATA" /></data>
  </field>
  </xsl:template>

</xsl:stylesheet> 
```

任何人都足够精通 XSLT 来帮助我解决这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T19:12:58.973

这是[文件](http://dl.dropbox.com/u/9175169/XMLRESULT-to-fmresultset.xslt)；太长了，所以发个链接。我不是 100% 确定它的`fmresultset`语法是正确的；如果你能把它的DTD发给我，我会试着检查一下。

# c# - 对 DI、IoC、Unity 和 Moq 的类型注册和实现感到困惑

> ID：10231537
> 
> 赞同：4
> 
> 时间：2012-04-19T15:30:48.890
> 
> 标签：c#, .net, dependency-injection, inversion-of-control, unity-container

我现在有一些空闲时间，所以我想了解一下 DI 和 IoC 容器。我无缘无故地选择了统一，除了我可以说的主要框架之间没有重大差异，我应该太担心开始。随着事情变得越来越复杂，我意识到我可能需要改变，但现在我希望它能做到。

所以，我正在处理一个相对简单的数据访问场景，并实现了以下接口和数据访问类。

```
public interface IEventRepository
{
    IEnumerable<Event> GetAll();
}

public class EventRepository : IEventRepository
{
    public IEnumerable<Event> GetAll()
    {
        // Data access code here
    }
} 
```

然后使用我可以执行以下操作。

```
IUnityContainer container = new UnityContainer();
container.RegisterType(typeof(IEventRepository), typeof(EventRepository));

var eventRepo = container.Resolve<IEventRepository>();
eventRepo.GetAll(); 
```

如果我需要根据我的理解在 6 个月内更改我的数据库提供程序，我会创建一个新的 IEventRepository 实现并更新类型注册，那很好。

**现在，这就是我感到困惑的地方。**例如，如果我想实现一些缓存，我可以从 IEventRepository 的适当实现继承并覆盖适当的方法来实现必要的缓存。但是，这样做会使使用通过 DI 传入的 Moq 实现来测试缓存是否正常工作变得更加困难，因此本着 DI 的真正精神，我认为创建 IEventRepository 的实现，然后使用 DI 请求一个IEventRepository 的实际数据访问实现就像这样。

```
public class CachedEventRepository : IEventRepository
{
    private readonly IEventRepository _eventRepo;

    public CachedEventRepository(IEventRepository eventRepo)
    {
        if (eventRepo is CachedEventRepository)
            throw new ArgumentException("Cannot pass a CachedEventRepository to a CachedEventRepository");

        _eventRepo = eventRepo;
    }

    public IEnumerable<Event> GetAll()
    {
        // Appropriate caching code ultimately calling _eventRepo.GetAll() if needed
    }
} 
```

这是有道理的还是我做错了？你有什么建议？如果我做得正确，我该如何解决以下情况，以便 CachedEventRepository 获得 IEventRepository 的适当数据访问实现？

```
IUnityContainer container = new UnityContainer();
container.RegisterType(typeof(IEventRepository), typeof(EventRepository));
container.RegisterType(typeof(IEventRepository), typeof(CachedEventRepository));

var eventRepo = container.Resolve<IEventRepository>();
eventRepo.GetAll(); 
```

非常感谢您的帮助。

**编辑 1** 以下是我希望能够执行的最小起订量测试，我认为使用继承是不可能的，并且需要 DI。

```
var cacheProvider = new MemoryCaching();

var eventRepo = new Mock<IEventRepository>(MockBehavior.Strict);
eventRepo
    .Setup(x => x.GetAll())
    .Returns(() =>
    {
        return new Event[] { 
            new Event() { Id = 1}, 
            new Event() { Id = 2}
        };
    });

var cachedEventRepo = new CachedEventRepository(
    eventRepo.Object, 
    cacheProvider);

var data = cachedEventRepo.GetAll();
data = cachedEventRepo.GetAll();
data = cachedEventRepo.GetAll();
Assert.IsTrue(data.Count() > 0);
eventRepo.Verify(x => x.GetAll(), Times.Once());

// This set method should expire the cache so next time get all is requested it should
// load from the database again
cachedEventRepo.SomeSetMethod();

data = cachedEventRepo.GetAll();
data = cachedEventRepo.GetAll();
Assert.IsTrue(data.Count() > 0);
eventRepo.Verify(x => x.GetAll(), Times.Exactly(2)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T10:23:31.847

好的，经过对这个主题的一些思考和对 Unity 的一些研究，我想出了这个。

```
public class EventRepository : IEventRepository
{
    private readonly IDbManager _dbManager;

    public EventRepository(IDbManager dbManager)
    {
        _dbManager = dbManager;
    }

    public virtual IEnumerable<Event> GetAll()
    {
        // Data access code
    }
}

public class CachedEventRepository : IEventRepository
{
    private readonly ICacheProvider _cacheProvider;
    private readonly IEventRepository _eventRepo;

    public ICacheProvider CacheProvider
    {
        get { return _cacheProvider; }
    }

    public CachedEventRepository(IEventRepository eventRepo, ICacheProvider cacheProvider)
    {
        if(eventRepo is CachedEventRepository)
            throw new ArgumentException("eventRepo cannot be of type CachedEventRepository", "eventRepo");

        _cacheProvider = cacheProvider;
        _eventRepo = eventRepo;
    }

    public IEnumerable<Event> GetAll()
    {
        // Caching logic for this method with a call to _eventRepo.GetAll() if required
    }
} 
```

这需要以下统一注册。IEventRepository 的解析请求将返回一个 CachedEventRepository。如果我想快速删除缓存，我只需删除 CachedEventRepository 注册，它就会恢复到 EventRepository。

```
IUnityContainer container = new UnityContainer();
container.RegisterType<IDbManager, SqlDbManager>();
container.RegisterType<ICacheProvider, MemoryCaching>();
container.RegisterType<IEventRepository, EventRepository>();
container.RegisterType<IEventRepository, CachedEventRepository>(
    new InjectionConstructor(
        new ResolvedParameter<EventRepository>(),
        new ResolvedParameter<ICacheProvider>())
    ); 
```

这样就可以进行我所追求的测试了。

一个简单的数据访问测试... SQL 是否有效

```
IUnityContainer container = new UnityContainer();
container.RegisterType<IDbManager, SqlDbManager>();
container.RegisterType<EventRepository>();

var repo = container.Resolve<EventRepository>();

var data = repo.GetAll();

Assert.IsTrue(data.Count() > 0); 
```

一个简单的缓存测试...缓存系统是否工作

```
var cache = new MemoryCaching();

var getVal = cache.Get<Int32>(
    "TestKey",
    () => { return 2; },
    DateTime.UtcNow.AddMinutes(5));

Assert.AreEqual(2, getVal);

getVal = cache.Get<Int32>(
    "TestKey",
    () => { throw new Exception("This should not be called as the value should be cached"); },
    DateTime.UtcNow.AddMinutes(5));

Assert.AreEqual(2, getVal); 
```

以及对两者一起工作的测试......**各个方法**的缓存是否按预期工作。缓存是否应该过期，方法参数是否正常工作以触发新的数据库请求等。

```
var cacheProvider = new MemoryCaching();

var eventRepo = new Mock<IEventRepository>(MockBehavior.Strict);
eventRepo
    .Setup(x => x.GetAll())
    .Returns(() =>
    {
        return new Event[] { 
            new Event() { Id = 1}, 
            new Event() { Id = 2}
        };
    });

var cachedEventRepo = new CachedEventRepository(
    eventRepo.Object,
    cacheProvider);

cachedEventRepo.CacheProvider.Clear();
var data = cachedEventRepo.GetAll();
data = cachedEventRepo.GetAll();
data = cachedEventRepo.GetAll();
Assert.IsTrue(data.Count() > 0);
eventRepo.Verify(x => x.GetAll(), Times.Once());

cachedEventRepo.SomeSetMethodWhichExpiresTheCache();
data = cachedEventRepo.GetAll();
data = cachedEventRepo.GetAll();
Assert.IsTrue(data.Count() > 0);
eventRepo.Verify(x => x.GetAll(), Times.Exactly(2)); 
```

你觉得这怎么样？我认为它提供了良好的分离性和良好的可测试性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T16:03:30.130

为什么不尝试将所有缓存逻辑封装在一个类中？所以你会得到类似的东西：

```
public interface ICacheManager {} 
```

和

```
public class CacheManager : ICacheManager {} 
```

因此，您可以编写所有单元测试以确保您的缓存逻辑正常。这将是`CacheManagerTest`课堂！

然后你可以用这种方式改变你的班级：

```
public class EventRepository : IEventRepository
{
private ICacheManager _cacheManager;
public EventRepository(ICacheManager cacheManager)
{
    _cacheManager = cacheManager;
}
    public IEnumerable<Event> GetAll()
    {
        // Data access code here
    }
} 
```

所以，你不需要在你的`EventRepositoryTest`类中测试缓存逻辑，因为它已经测试过了。

比你可以设置你的 IoC 容器返回一个 ICacheManager 的实例和一些缓存策略的参数。

**更新** 好的，最后一次尝试：

```
public interface IEventRepo
{
    IEnumerable<Event> GetAll();
}

public interface ICacheProvider
{
    bool IsDataCached();
    IEnumerable<Event> GetFromCache();
}

public class CacheProvider : ICacheProvider
{

    public bool IsDataCached()
    {
        //do smth
    }

    public IEnumerable<Event> GetFromCache()
    {
        //get smth
    }
}

public class EventRepo : IEventRepo
{
    private ICacheProvider _cacheProvider;

    public EventRepo(ICacheProvider cacheProvider)
    {
     _cacheProvider = cacheProvider
    }

    public IEnumerable<Event> GetAll()
    {
        if (_cacheProvider.IsDataCached())
        {
            return _cacheProvider.GetFromCache();
        }
        else
        {
            //get from repo, save data in cache etc
        }
    }
}

[TestClass]
public class EventRepoTest
{
    [TestMethod]
    public void GetsDataFromCacheIfDataIsCachedTest()
    {
        var cacheProvider = new Mock<ICacheProvider>(MockBehavior.Strict);
        cacheProvider
            .Setup(x => x.IsDataCached())
            .Returns(() =>
            {
                return true;
            });
        cacheProvider
            .Setup(x => x.GetFromCache())
            .Returns(
            () => {
            return new Event[] { 
                new Event() { Id = 1}, 
                new Event() { Id = 2}
                };
            }
            );
        var eventRepo = new EventRepo(cacheProvider.Object);

        var data = eventRepo.GetAll();
        cacheProvider.Verify(x => x.GetFromCache(), Times.Once());
    }

    [TestMethod]
    public void GetsDataFromDataBaseIfNotCachedTest()
    {
        var cacheProvider = new Mock<ICacheProvider>(MockBehavior.Strict);
        cacheProvider
            .Setup(x => x.IsDataCached())
            .Returns(() =>
            {
                return false;
            });
        cacheProvider
            .Setup(x => x.GetFromCache())
            .Returns(
            () =>
            {
                return new Event[] { 
                new Event() { Id = 1}, 
                new Event() { Id = 2}
                };
            }
            );
        var eventRepo = new EventRepo(cacheProvider.Object);

        var data = eventRepo.GetAll();
        cacheProvider.Verify(x => x.GetFromCache(), Times.Never());
    }
} 
```

不确定 Moq 语法，因为 WinPhone 没有 Moq，但我认为这不是问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T16:03:56.137

我认为您使用 CachedEventRepository 走在正确的轨道上，但我会将 EventRepository 的 GetAll 方法设为虚拟，并拥有 CachedEventRepository 子类 EventRepository。然后子类可以覆盖GetAll，检查缓存，如果没有找到就调用base.GetAll。然后它可以缓存结果并返回列表。

通过这种方式，缓存逻辑与数据访问逻辑是分开的，并且子类正在将缓存行为添加到您的存储库中。

然后，您可以选择是否需要缓存存储库，例如从配置文件中选择并适当地配置 Unity 容器。

此外，您还可以为缓存服务提供一个接口，以便在对 CachedEventRepository 进行单元测试时模拟它。

# r - 在数据框的子集中查找列的最大值

> ID：10231542
> 
> 赞同：4
> 
> 时间：2012-04-19T15:31:04.357
> 
> 标签：r

给定一个包含, ,`df`列的数据框。如何在where的记录*子集中*找到 的最大值？`d``c``v``d``v`*`c == "foo"`*

 *我试过这个：

```
df[df$v==max(df$v) & df$c == "foo","d"] 
```

但我得到了：

```
character(0) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-19T15:37:56.470

哟可以这样做：

```
with(df, d[v== max(v[c=="foo"])]) 
```

编辑：如果你想获得`d`所有级别的值`c`：

```
library(plyr)
ddply(df, "c", subset, v==max(v)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-26T17:50:19.267

虽然曼努埃尔的答案在大多数情况下都有效，但我相信更正确的版本是：

```
with(df, d[v== max(v[c=="foo"]) & c=="foo"]) 
```

否则，可以匹配具有`v==max`但实际上不是`c=="foo"`.*

# java - 可运行的 JAR 不适用于引用的库

> ID：10231544
> 
> 赞同：5
> 
> 时间：2012-04-19T15:31:19.117
> 
> 标签：java, eclipse, jar, executable, executable-jar

我想通过导出在 Eclipse中创建一个可运行的 JAR，其中包含引用的库，即[jackson 。](http://jackson.codehaus.org/)在 Eclipse 提供导出到可运行 JAR 之前，曾经有一个*胖 jar*似乎是 goto 解决方案。

从这个[问题](https://stackoverflow.com/questions/8302894/what-is-the-difference-between-runnable-jar-library-handling-options)，第一个选择就是我要找的。由于目前是一个小项目，因此始终将所有内容放在一起不会成为问题（另外，这对我来说更容易，因为我刚开始使用 JAR、runnables 和 jnlp）

当我尝试启动它时，会出现一个警告窗口，提示存在问题并尝试在控制台中找到它（我无法打开）。

如果我删除对这个引用库的任何使用，一切都会完美运行（除了它根本没有做我想要的部分）。窗口看起来像我设计的那样，但是没有库就没有功能。

我什至没有堆栈跟踪来帮助解决问题。我创建了没有任何引用库的其他项目，一切都很好。所以我已经把它缩小了很多。

由于我让 Eclipse 处理导出和所有事情，我认为您不需要清单来查看它是否正常。您可能有任何问题，我会提供您需要的信息。不用说，该项目直接从 Eclipse 运行。

Eclipse 版本：Indigo Service Release 2 构建 ID：20120216-1857

* * *

**按照[Baqueta](https://stackoverflow.com/users/213727/baqueta)的回答进行编辑**

当我这样做时会发生什么是我得到一个自定义的 RuntimeException。我在这里有点困惑。这是我的代码的简单解释。我有一个使用引用库（jackson）的实用程序类（UtilityJSON）。该实用程序类的构造函数实例化了在引用库中定义的对象，我们称之为映射器。UtilityJSON 的一种方法使用“mapper”方法。此时引发异常。为什么我感到困惑的是“映射器”已成功实例化，但使用它的方法会引发异常。如果 jar 找不到引用的库，它可能无法创建对象“映射器”。但是从 Eclipse 运行项目一切正常。运行可执行jar时有什么方法可以调试吗？也许在控制台中回显一些东西。

* * *

**编辑 2**

我可能发现了错误。我的程序读取项目内文件夹中的 *.txt 文件。在探索 jar 的内容时，我发现此文件夹未包含在内，因此出现异常。所以现在的问题变成了：我如何包含这个文件夹？它位于项目的根文件夹中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T16:23:37.217

您可以尝试以下方法：

1.  在 Eclipse 中，转到项目-> 属性。
2.  从左侧的列中选择“Java Build Path”。
3.  选择“订购和导出”选项卡。
4.  在列表中找到“jackson”并确保它已被选中。

**编辑** 回答您更新的问题：

在 Eclipse 中，在 Package Explorer 中找到 *.txt 文件。右键单击它并选择构建路径->添加到构建路径。然后按照上面的说明确保文件包含在 Jar 中。最后，进行清理并重建。

如果您要添加更多资源，通常的做法（并且有意义！）有一个资源文件夹（通常称为“res”）。然后，您可以将整个文件夹添加到构建路径，以便其中的所有资源都包含在 Jar 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T15:39:32.263

通过编写启用 java 控制台

```
javaws -viewer 
```

在一个终端。关闭缓存查看器并单击高级选项卡。打开 Java-Console 并单击“启用控制台”。

# c# - 从（GAC）类库初始化 Automapper

> ID：10231551
> 
> 赞同：4
> 
> 时间：2012-04-19T15:31:43.883
> 
> 标签：c#, dll, configuration, automapper, gac

我目前正在试验 AutoMapper（最新的 .NET 3.5 版本）。要使 AutoMapper 工作，您必须为其提供有关如何从一个对象映射到另一个对象的配置详细信息。

```
Mapper.CreateMap<ContactDTO, Contact>();
Mapper.CreateMap<Contact, ContactDTO>(); 
```

您应该在应用程序、服务、网站启动时执行此操作。（使用 global.asax 等）

问题是，我在 GAC 的 DLL 中使用 Automapper 将 LINQ2SQL 对象映射到它们的 BO 对应对象。为了避免一直指定 .CreateMap<> 详细信息，我想要映射 2 对象，如果可能的话，我可以在哪里指定此**配置**？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-08T16:03:46.130

我相信解决方案就在 AutoMapper 本身。

使用 AutoMapper Profiles 并在启动时注册它们。

如果您的配置文件不需要任何依赖项，则下面的示例甚至不需要 IOC 容器。

```
/// <summary>
///     Helper class for scanning assemblies and automatically adding AutoMapper.Profile
///     implementations to the AutoMapper Configuration.
/// </summary>
public static class AutoProfiler
{
    public static void RegisterReferencedProfiles()
    {
        AppDomain.CurrentDomain
            .GetReferencedTypes()
            .Where(type => type != typeof(Profile) 
              && typeof(Profile).IsAssignableFrom(type) 
              && !type.IsAbstract)
            .ForEach(type => Mapper.Configuration.AddProfile(
              (Profile)Activator.CreateInstance(type)));
    }
} 
```

他们只是像这个例子一样实现配置文件：

```
public class ContactMappingProfile : Profile
{
    protected override void Configure()
    {
        this.CreateMap<Contact, ContactDTO>();
        this.CreateMap<ContactDTO, Contact>();
    }
} 
```

但是，如果您的配置文件有需要解决的依赖关系，您可以为 AutoMapper 创建一个抽象，并在注册抽象之前注册所有配置文件 - IObjectMapper - 像这样的单例：

```
public class AutoMapperModule : Module
{
    protected override void Load(ContainerBuilder builder)
    {
        base.Load(builder);

        // register all profiles in container
        AppDomain.CurrentDomain
            .GetReferencedTypes()
            .Where(type => type != typeof(Profile)
              && typeof(Profile).IsAssignableFrom(type) 
              && !type.IsAbstract)
            .ForEach(type => builder
                .RegisterType(type)
                .As<Profile>()
                .PropertiesAutowired());

        // register mapper
        builder
            .Register(
                context =>
                {
                    // register all profiles in AutoMapper
                    context
                        .Resolve<IEnumerable<Profile>>()
                        .ForEach(Mapper.Configuration.AddProfile);
                    // register object mapper implementation
                    return new AutoMapperObjectMapper();
                })
            .As<IObjectMapper>()
            .SingleInstance()
            .AutoActivate();
    }
} 
```

由于我抽象了该领域中的所有技术，这对我来说似乎是最好的方法。

现在去编码，伙计，gooooo！

PS-代码可能正在使用一些帮助程序和扩展，但它的核心内容就在那里。

# c# - 如何知道代码隐藏中选定的单选按钮

> ID：10231555
> 
> 赞同：0
> 
> 时间：2012-04-19T15:31:59.437
> 
> 标签：c#, asp.net, gridview, code-behind

我有一个带有 3 个单选按钮的网格视图。我如何知道选择了哪个单选按钮>

代码：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:45:42.477

请试一试

```
foreach (GridViewRow row in gridview.Rows)
{
    RadioButton radioBtn=new RadioButton();
    radioBtn=(RadioButton)row.findcontrol("YourRadiobuttonId");
    if(radioBtn.Checked)
    {
        // Your appropriate code here
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T15:38:48.363

试试这个。

```
foreach (GridViewRow row in gridview.Rows)
{
RadioButton rbn=new RadioButton();
rbn=(RadioButton)row.findcontrol("YourRadiobuttonId");
if(rbn.Checked)
 {
    //Try your condition what u want
 }
} 
```

# delphi - 在第二个线程中使用 TGIFImage 处理 GDI 处理泄漏

> ID：10231556
> 
> 赞同：16
> 
> 时间：2012-04-19T15:32:06.780
> 
> 标签：delphi, thread-safety, gdi, c++builder, memory-leaks

我有一个加载图像（从磁盘或服务器）的后台线程，目的是最终将它们传递给主线程进行绘制。当第二个线程使用 VCL 的[`TGIFImage`类](http://docwiki.embarcadero.com/VCL/XE2/en/GIFImg.TGIFImage)加载 GIF 图像时，每次在线程中执行以下行时，该程序*有时会泄漏几个句柄：*

```
m_poBitmap32->Assign(poGIFImage); 
```

也就是说，刚刚打开的 GIF 图像被分配给线程拥有的位图。这些都不与任何其他线程共享，即完全本地化到线程。它与时间有关，因此不会在每次执行该行时都发生，但是当它确实发生时，它只会发生在该行上。每个泄漏是一个 DC、一个调色板和一个位图。（我使用[GDIView](http://www.nirsoft.net/utils/gdi_handles.html)，它提供了比 Process Explorer 更详细的 GDI 信息。） `m_poBitmap32`这里是一个[Graphics32 TBitmap32](http://graphics32.org/wiki/)对象，但我已经使用纯 VCL 类复制了它，即使用`Graphics::TBitmap::Assign`.

最终我得到一个`EOutOfResources`异常，可能表明桌面堆已满：

```
:7671b9bc KERNELBASE.RaiseException + 0x58
:40837f2f ; C:\Windows\SysWOW64\vclimg140.bpl
:40837f68 ; C:\Windows\SysWOW64\vclimg140.bpl
:4084459f ; C:\Windows\SysWOW64\vclimg140.bpl
:4084441a vclimg140.@Gifimg@TGIFFrame@Draw$qqrp16Graphics@TCanvasrx11Types@TRectoo + 0x4a
:408495e2 ; C:\Windows\SysWOW64\vclimg140.bpl
:50065465 rtl140.@Classes@TPersistent@Assign$qqrp19Classes@TPersistent + 0x9
:00401C0E TLoadingThread::Execute(this=:00A44970) 
```

**如何解决这个问题并`TGIFImage`在后台线程中安全使用？**

其次，我会在使用 PNG、JPEG 或 BMP 类时遇到同样的问题吗？到目前为止我还没有，但考虑到这是一个线程/计时问题，这并不意味着如果他们使用与`TGIFImage`.

我正在使用 C++ Builder 2010（RAD Studio 的一部分。）

* * *

## 更多细节

一些研究表明[我不是唯一遇到这种情况的人](http://embarcadero.newsgroups.archived.at/public.delphi.graphics/201002/1002082871.html)。引用一个线程，

> Help (2007) 说：在使用 Lock 保护画布的多线程应用程序中，所有使用画布的调用都必须通过调用 Lock 来保护。任何在使用前不锁定画布的线程都会引入潜在的错误。
> 
> [...]
> 
> *但是这种说法是绝对错误的：即使其他线程没有触及它，您也必须将画布锁定在辅助线程中。否则，画布的 GDI 句柄可以在任何时候（异步）在主线程中被释放为未使用。*

另一个回复表示类似的情况，可能与 graphics.pas 中的 GDI 对象缓存有关。

这很可怕：完全在一个线程中创建和使用的对象可以在主线程中异步释放它的一些资源。不幸的是，**我不知道如何将 Lock 建议应用于`TGIFImage`.** `TGIFImage`没有`Canvas`，尽管它确实有 a`Bitmap`有一个画布。锁定无效。我怀疑问题实际上出在`TGIFFrame`一个内部类中。我也不知道是否或如何锁定任何 TBitmap32 资源。我确实尝试将 a 分配`TMemoryBackend`给位图，从而避免使用 GDI，但它没有效果。

## 再生产

你可以很容易地重现这个。创建一个新的 VCL 应用程序，并创建一个包含线程的新单元。在线程的 Execute 方法中，放置以下代码：

```
while (!Terminated) {
    TGraphic* poGraphic = new TGIFImage();
    TBitmap32* poBMP32 = new TBitmap32();
    __try {
        poGraphic->LoadFromFile(L"test.gif");
        poBMP32->Assign(poGraphic);
    } __finally {
        delete poBMP32;
        delete poGraphic;
    }
} 
```

`Graphics::TBitmap`如果您没有安装 Graphics32，您可以使用。

在应用程序的主窗体中，添加一个用于创建和启动线程的按钮。添加另一个执行与上述类似代码的按钮（仅一次，无需循环。我的还将 TBitmap32 存储为成员变量而不是在那里创建它，并且使其无效，因此最终会将其绘制到表单中。）运行程序并单击按钮启动线程。您可能会看到 GDI 对象已经泄漏，但如果不按在主线程中运行类似代码一次的第二个按钮 - 一次就足够了，它似乎会触发某些东西 - 它会泄漏。您将看到内存使用率上升，并且它以每秒几十个的速率泄漏 GDI 句柄。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T06:57:44.873

不幸的是，修复非常非常难看。基本思想是后台线程必须获取主线程在消息之间持有的锁。

天真的实现是这样的：

1.  锁定画布互斥锁。
2.  产生背景线程。
3.  等待消息。
4.  释放画布互斥锁。
5.  处理消息。
6.  锁定画布互斥锁。
7.  转到第 3 步。

请注意，这意味着后台线程只能在主线程忙时访问 GDI 对象，而不能在它等待消息时访问。这意味着后台线程在不持有互斥锁时不能拥有任何画布。这两个要求往往太痛苦了。所以你可能需要改进算法。

一种改进是让后台线程在需要使用画布时向主线程发送消息。这将导致主线程更快地释放画布互斥体，以便后台线程可以获取它。

我想这足以让你放弃这个想法。相反，也许，从后台线程读取文件，但在主线程中处理它。

# eclipse - eclipse sh 编辑并运行

> ID：10231559
> 
> 赞同：4
> 
> 时间：2012-04-19T15:32:15.643
> 
> 标签：eclipse, bash, shell, sh

在 eclipse 中运行和编辑 .sh 脚本的最佳方法是什么？

关于编辑部分，我找到了ShellEd插件，但看起来很简约，没有其他选择吗？

关于运行部分，我发现有一个内置的控制台，可以通过右键单击.sh，然后单击“远程系统视图”，然后单击“本地”来访问。但它非常简约，甚至没有制表符完成。我想要一些尽可能接近 bash 的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T02:25:40.300

您可能会发现这两个超链接很有用：

*   [http://www.linuxforums.org/forum/applications/132034-running-shellscripts-eclipse.html](http://www.linuxforums.org/forum/applications/132034-running-shellscripts-eclipse.html)
*   [Eclipse 的 Bash 脚本插件？](https://stackoverflow.com/questions/1356827/bash-script-plugin-for-eclipse)

我对 Eclipse 了解不多。我更喜欢 Geany；但是，它不执行 shell 脚本。

# php - 从 CSV 使用 PHP 更新 MySQL 时超时

> ID：10231561
> 
> 赞同：1
> 
> 时间：2012-04-19T15:32:19.593
> 
> 标签：php, mysql, csv, cron, timeout

我需要想出一种方法来更快地完成一项大型任务以克服超时。

由于托管公司的限制，我对服务器的访问*非常有限。*

我有一个系统设置，其中一个 cron 访问一个 PHP 文件，该文件抓取一个包含某些产品数据的 csv。csv 不包含产品将具有的所有字段。只有少数必要的。

我已经阅读了大量关于超时和处理 csv 的文章，目前（为了节省时间）我已经制作了一个表格（我们称之为 csv_data）来保存 csv 数据。我有一个截断 csv_data 表的脚本，然后从 csv 插入数据，因此每晚来自 csv 的最新记录集都在该表中（csv 文件每晚更新）。到目前为止，没有超时问题。任务只需要大约 4-5 秒。

当我必须筛选数据以更新产品表时，就会发生超时。它现在正在运行的步骤是这样的

```
1\. Get the sku from csv_data table (that holds thousands of records)
2\. Select * from Products where products.sku = csv.sku (products table also holds thousands of records to loop through)
3\. Get numrows.   
    If numrows<0{no record in products, so skip}. 
    If numrows>1{duplicate entries, don't change anything, but later on report the sku}
    If numrows==1{Update selected fields in the products table with csv data}
4\. Go to the next record in csv_data all over again 
```

（我认为概述该过程比放入代码更短、更容易。）我查看了 MySQl 视图和存储过程，但我不够熟练，不知道它是否会处理“if”语句部分。

我可以做些什么来加快速度以避免超时？

## **编辑：**

我应该提到那`set_time_limit(0);`不是这样做的。如果它有帮助，服务器使用`IIS7`并`fastcgi` 感谢您的帮助。

使用 Jakob 和 Shawn 的建议后更新：

我做错了什么。速度肯定更快，而且 csv sku 正在增加，

但是当我尝试实施肖恩的解决方案时；查询给了我一个 PHP 警告：mysql_result() 期望参数 1 是资源，布尔错误。

你能帮我找出我做错了什么吗？

这是代码部分：

```
$csvdata="SELECT * FROM csv_update";
    $csvdata_result=mysql_query($csvdata); 
    mysql_query($csvdata);
    $csvdata_num = mysql_num_rows($csvdata_result);
    $i=0;       
while($i<$csvdata_num){

$csv_code=@mysql_result($csvdata_result,$i,"skucode");

$datacheck=NULL;    
$datacheck=substr($csv_code,0,1);

if($datacheck>='0' && $datacheck<='9'){

$csv_price=@mysql_result($csvdata_result,$i,"price");
$csv_retail=@mysql_result($csvdata_result,$i,"retail");
$csv_stock=@mysql_result($csvdata_result,$i,"stock");
$csv_weight=@mysql_result($csvdata_result,$i,"weight");
$csv_manufacturer=@mysql_result($csvdata_result,$i,"manufacturer");
$csv_misc1=@mysql_result($csvdata_result,$i,"misc1");
$csv_misc2=@mysql_result($csvdata_result,$i,"misc2");
$csv_selectlist=@mysql_result($csvdata_result,$i,"selectlist");
$csv_level5=@mysql_result($csvdata_result,$i,"level5");
$csv_frontpage=@mysql_result($csvdata_result,$i,"frontpage");
$csv_level3=@mysql_result($csvdata_result,$i,"level3");
$csv_minquantity=@mysql_result($csvdata_result,$i,"minquantity");
$csv_quantity1=@mysql_result($csvdata_result,$i,"quantity1");
$csv_discount1=@mysql_result($csvdata_result,$i,"discount1");
$csv_quantity2=@mysql_result($csvdata_result,$i,"quantity2");
$csv_discount2=@mysql_result($csvdata_result,$i,"discount2");
$csv_quantity3=@mysql_result($csvdata_result,$i,"quantity3");
$csv_discount3=@mysql_result($csvdata_result,$i,"discount3");

    $count_check="SELECT COUNT(*) AS totalCount FROM products WHERE skucode = '$csv_code'";
    $count_result=mysql_query($count_check); 
    mysql_query($count_check);
    $totalCount=@mysql_result($count_result,0,'totalCount');
    $loopCount = ceil($totalCount / 25);
    for($j = 0; $j < $loopCount; $j++){

    $prod_check="SELECT skucode FROM products WHERE skucode = '$csv_code' LIMIT ($loopCount*25), 25;";
    $prodresult=mysql_query($prod_check); 
    mysql_query($prod_check);
    $prodnum =@mysql_num_rows($prodresult);
    $prod_id=@mysql_result($prodresult,0,"catalogid");

    if($prodnum<1){ 
    echo "NOT FOUND:$csv_code<br>";
    $count_sku_not_found=$count_sku_not_found+1;
    $list_sku_not_found=$list_sku_not_found." $csv_code";}

    if($prodnum>1){ 
    echo "DUPLICATE:$csv_ccode<br>";    
    $count_duplicate_skus=$count_duplicate_skus+1;
    $list_duplicate_skus=$list_duplicate_skus." $csv_code";}

if ($prodnum==1){
///This prevents an overwrite from happening if the csv file doesn't produce properly
    if ($csv_price!="" OR $csv_price!=NULL)
    {$sql_price='price="'.$csv_price.'"';}

    if ($csv_retail!="" OR $csv_retail!=NULL)
    {$sql_retail=',retail="'.$csv_retail.'"';}

    if ($csv_stock!="" OR $csv_stock!=NULL)
    {$sql_stock=',stock="'.$csv_stock.'"';}

    if ($csv_weight!="" OR $csv_weight!=NULL)
    {$sql_weight=',weight="'.$csv_weight.'"';}

    if ($csv_manufacturer!="" OR $csv_manufacturer!=NULL)
    {$sql_manufacturer=',manufacturer="'.$csv_manufacturer.'"';}

    if ($csv_misc1!="" OR $csv_misc1!=NULL)
    {$sql_misc1=',misc1="'.$csv_misc1.'"';}

    if ($csv_misc2!="" OR $csv_misc2!=NULL)
    {$sql_pother2=',pother2="'.$csv_misc2.'"';}

    if ($csv_selectlist!="" OR $csv_selectlist!=NULL)
    {$sql_selectlist=',selectlist="'.$csv_selectlist.'"';}

    if ($csv_level5!="" OR $csv_level5!=NULL)
    {$sql_level5=',level5="'.$csv_level5.'"';}

    if ($csv_frontpage!="" OR $csv_frontpage!=NULL)
    {$sql_frontpage=',frontpage="'.$csv_frontpage.'"';}

$import="UPDATE products SET $sql_price $sql_retail $sql_stock $sql_weight $sql_manufacturer $sql_misc1 $sql_misc2 $sql_selectlist $sql_level5 $sql_frontpage    $sql_in_stock WHERE skucode='$csv_code'";
 mysql_query($import) or die(mysql_error("error updating in products table"));

echo "Update ".$csv_code." successful ($i)<br>";

$count_success_update_skus=$count_success_update_skus+1;
$list_success_update_skus=$list_success_update_skus." $csv_code";

//empty out variables 
$sql_price='';
$sql_retail='';
$sql_stock='';
$sql_weight='';
$sql_manufacturer='';
$sql_misc1='';
$sql_misc2='';
$sql_selectlist='';
$sql_level5='';
$sql_frontpage='';
$sql_in_stock='';
$prodnum=0;

}
}
$i++;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:43:06.740

是在返回第一行之前超时还是在读取期间的行之间超时？一个好的做法是分块处理您的查询；首先进行计数以查看您正在为 SKU 处理多少条记录，循环通过较小的块（这些块的大小取决于您必须对每一行执行多少操作）。您更新后的工作流程看起来更像这样：

1.  从 CSV 获取下一个 SKU
2.  获取总数：`SELECT COUNT(*) AS totalCount FROM products WHERE products.sku = csv.sku`
3.  确定块大小（本演示使用 25）
4.  `loopCount = ceil(totalCount / 25)`
5.  使用这样的循环遍历所有结果：`for($i = 0; $i < loopCount; $i++)`
6.  在您的循环中，您应该运行如下查询：`SELECT * FROM products WHERE products.sku = csv.sku LIMIT (loopCount*25), 25`

您将希望为您的 SELECT 块使用恒定的顺序；您的唯一 ID 可能是最好的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T15:41:19.343

我认为你可以用 cron 解决这个问题。[http://en.wikipedia.org/wiki/Cron](http://en.wikipedia.org/wiki/Cron)。它从来没有超时。

# python - 如何正确保存到带有 utf-8 字符串的字典文件

> ID：10231568
> 
> 赞同：2
> 
> 时间：2012-04-19T15:32:52.977
> 
> 标签：python, utf-8

我正在使用[googlemaps](http://py-googlemaps.sourceforge.net/) Python 包进行反向地理编码。观察：

```
PS Z:\dev\poc\SDR> python
Python 2.7.1 (r271:86832, Nov 27 2010, 17:19:03) [MSC v.1500 64 bit (AMD64)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> from googlemaps import GoogleMaps
>>> gmaps = GoogleMaps("*** my google API key ***")
>>> d=gmaps.reverse_geocode(51.75,19.46667)
>>> d
{u'Status': {u'code': 200, u'request': u'geocode'}, u'Placemark': [{u'Point': {u'coordinates': [19.466876, 51.7501456, 0]}, u'ExtendedData': {u'LatLonBox': {u'west': 19.465527, u'east': 19.468225, u'n
orth': 51.7514946, u'south': 51.7487966}}, u'AddressDetails': {u'Country': {u'CountryName': u'Polska', u'AdministrativeArea': {u'SubAdministrativeArea': {u'SubAdministrativeAreaName': u'\u0141\xf3d\u0
17a', u'Locality': {u'Thoroughfare': {u'ThoroughfareName': u'ksi\u0119dza Biskupa Wincentego Tymienieckiego 16'}, u'LocalityName': u'\u0141\xf3d\u017a'}}, u'AdministrativeAreaName': u'\u0142\xf3dzkie'
}, u'CountryNameCode': u'PL'}, u'Accuracy': 8}, u'id': u'p1', u'address': u'ksi\u0119dza Biskupa Wincentego Tymienieckiego 16, 90-001 \u0141\xf3d\u017a, Poland'}], u'name': u'51.750000,19.466670'}
>>> import pprint
>>> pp = pprint.PrettyPrinter(indent = 2)
>>> pp.pprint(d)
{ u'Placemark': [ { u'AddressDetails': { u'Accuracy': 8,
                                         u'Country': { u'AdministrativeArea': { u'AdministrativeAreaName': u'\u0142\xf3dzkie',
                                                                                u'SubAdministrativeArea': { u'Locality': { u'LocalityName': u'\u0141\xf3d\u017a',
                                                                                                                           u'Thoroughfare': { u'ThoroughfareName': u'ksi\u0119dza Biskupa Wincentego Tym
ienieckiego 16'}},
                                                                                                            u'SubAdministrativeAreaName': u'\u0141\xf3d\u017a'}},
                                                       u'CountryName': u'Polska',
                                                       u'CountryNameCode': u'PL'}},
                    u'ExtendedData': { u'LatLonBox': { u'east': 19.468225,
                                                       u'north': 51.7514946,
                                                       u'south': 51.7487966,
                                                       u'west': 19.465527}},
                    u'Point': { u'coordinates': [19.466876, 51.7501456, 0]},
                    u'address': u'ksi\u0119dza Biskupa Wincentego Tymienieckiego 16, 90-001 \u0141\xf3d\u017a, Poland',
                    u'id': u'p1'}],
  u'Status': { u'code': 200, u'request': u'geocode'},
  u'name': u'51.750000,19.466670'} 
```

现在，我想将`d`字典保存到文件中，但我不想将其`u'\u0141\xf3d\u017a'`视为地区名称。我想看看`Łódź`。确实：

*   \u0141 - [http://www.fileformat.info/info/unicode/char/0141/index.htm](http://www.fileformat.info/info/unicode/char/0141/index.htm)
*   \xf3 = \u00f3 - [http://www.fileformat.info/info/unicode/char/00f3/index.htm](http://www.fileformat.info/info/unicode/char/00f3/index.htm)
*   \u017a - [http://www.fileformat.info/info/unicode/char/017a/index.htm](http://www.fileformat.info/info/unicode/char/017a/index.htm)

所以，我试过这个：

```
with codecs.open("aa.txt", "w", "utf-8") as f:
  f.write(unicode(d)) 
```

还有这个：

```
with codecs.open("aa.txt", "w", "utf-8") as f:
  f.write(unicode(str(d), "utf-8")) 
```

还有这个：

```
with open("aa.txt", "w") as f:
  f.write(unicode(d)) 
```

当然，没有任何效果。所有的试验都产生了`\u0141\xf3d\u017a`。如何正确保存？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T15:36:08.483

传给使用。`ensure_ascii=False`_`json.dump*()``codecs.open()`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T15:59:25.883

第一种形式适合将 unicode 写入文件：

```
>>> s = u'\u0141\xf3d\u017a'
>>> with codecs.open('aa.txt', 'w', 'utf-8') as f:
...     f.write(s)
... 
>>> with codecs.open('aa.txt', 'r', 'utf-8') as f:
...     print f.read()
... 
Łódź 
```

发生的事情是，当您使用 unicode(d) 时，您正在保存字典的表示形式。

```
>>> unicode(d)
u"{u'locality': u'\\u0141\\xf3d\\u017a'}" 
```

这相当于：

```
>>> unicode(repr(d))
u"{u'locality': u'\\u0141\\xf3d\\u017a'}" 
```

因此，您并没有真正将 Łódź 写到文件中。请注意，原始转义序列已转义。u'\u0141' 是 Ł 字符，但 u'\u0141' 是 6 个字符的字符串。

由于 Python 字典没有不会进行转义的 unicode 表示，因此您应该使用更好的序列化方法。如果将读取文件的应用程序支持它，则使用 json 应该没问题。

如果您确实需要将其写入不支持相同序列化方法的其他应用程序可读的文件中，则必须遍历 dict 并一次写下键、值对，而不是表示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T15:36:24.087

文件是字节流，因此您的 unicode 需要在保存到文件之前进行编码（表示为字节）。现在，当打开（从文件中读取数据）时，您需要使用相同的解码（编码）方案，例如 utf-8 将数据解码回 unicode

小心在文件中写入对象的序列化，而不是它的表示。使用 json.dumps(d) 获取序列化并使用 json.loads(filecontent) 将其读回

# java - 为什么我收到空指针错误。？

> ID：10231569
> 
> 赞同：-1
> 
> 时间：2012-04-19T15:32:55.120
> 
> 标签：java, android, menu, dialog

选择一个菜单项后，我试图显示一个自定义对话框，但是当我设置 onClickListener（没有 onClickListner 可以正常工作）时，会显示一个空指针错误。我检查按钮 id 拼写错误，一切都是正确的。

关于为什么的任何想法？

```
 public void  unlinkDeviceClick(MenuItem item){

   final Dialog alertDiag = new Dialog(Home.this); 
   alertDiag.setContentView(R.layout.unlinkdialog);
   alertDiag.setTitle("Unlink Device"); 

   Button yes = (Button)findViewById(R.id.signout);
   Button cancel = (Button)findViewById(R.id.cancelsignout);

   final EditText usernameField = (EditText)findViewById(R.id.usernameField);
   final EditText passwordField = (EditText)findViewById(R.id.passwordField);   
   final TextView descr = (TextView)findViewById(R.id.unlinkresults);    

   yes.setOnClickListener(new OnClickListener(){

       public void onClick(View v) {
        // TODO Auto-generated method stub
        String userName = usernameField.getText().toString();
        String password = passwordField.getText().toString();

        if(checkLoginFields(userName,password)){        
            if(checkCredentials(userName,password)){
                //loadUnlink(); 
                descr.setText("Sucessfully unlinked");
            }
            else{
                showWrongInfo(new View(Home.this));
            }
        }
        else{

        }

       }

   });

   cancel.setOnClickListener(new OnClickListener(){

        public void onClick(View v) {
        // TODO Auto-generated method stub
            alertDiag.dismiss();
        }

   });

   alertDiag.show();
} 
```

//////////////////////堆栈跟踪////////////////////////// ////////////

```
 04-19 10:30:32.198: E/AndroidRuntime(20386): FATAL EXCEPTION: main
04-19 10:30:32.198: E/AndroidRuntime(20386): java.lang.RuntimeException: java.lang.reflect.InvocationTargetException
04-19 10:30:32.198: E/AndroidRuntime(20386):    at android.view.MenuInflater$InflatedOnMenuItemClickListener.onMenuItemClick(MenuInflater.java:203)
04-19 10:30:32.198: E/AndroidRuntime(20386):    at com.android.internal.view.menu.MenuItemImpl.invoke(MenuItemImpl.java:154)
04-19 10:30:32.198: E/AndroidRuntime(20386):    at com.android.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java:964)
04-19 10:30:32.198: E/AndroidRuntime(20386):    at com.android.internal.view.menu.MenuBuilder$ActionMenuAdapter$1.onClick(MenuBuilder.java:1565)
04-19 10:30:32.198: E/AndroidRuntime(20386):    at android.view.View.performClick(View.java:3135)
04-19 10:30:32.198: E/AndroidRuntime(20386):    at android.view.View.onKeyUp(View.java:5055)
04-19 10:30:32.198: E/AndroidRuntime(20386):    at android.view.KeyEvent.dispatch(KeyEvent.java:2623)
04-19 10:30:32.198: E/AndroidRuntime(20386):    at android.view.View.dispatchKeyEvent(View.java:4603)
04-19 10:30:32.198: E/AndroidRuntime(20386):    at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1157)
04-19 10:30:32.198: E/AndroidRuntime(20386):    at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1159)
04-19 10:30:32.198: E/AndroidRuntime(20386):    at android.widget.ListView.dispatchKeyEvent(ListView.java:2061)
04-19 10:30:32.198: E/AndroidRuntime(20386):    at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1159)
04-19 10:30:32.198: E/AndroidRuntime(20386):    at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1159)
04-19 10:30:32.198: E/AndroidRuntime(20386):    at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1159)
04-19 10:30:32.198: E/AndroidRuntime(20386):    at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1159)
04-19 10:30:32.198: E/AndroidRuntime(20386):    at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1159)
04-19 10:30:32.198: E/AndroidRuntime(20386):    at com.android.internal.policy.impl.tv.TvWindow$DecorView.superDispatchKeyEvent(TvWindow.java:1161)
04-19 10:30:32.198: E/AndroidRuntime(20386):    at com.android.internal.policy.impl.tv.TvWindow.superDispatchKeyEvent(TvWindow.java:803)
04-19 10:30:32.198: E/AndroidRuntime(20386):    at android.app.Dialog.dispatchKeyEvent(Dialog.java:706)
04-19 10:30:32.198: E/AndroidRuntime(20386):    at com.android.internal.policy.impl.tv.TvWindow$DecorView.dispatchKeyEvent(TvWindow.java:1117)
04-19 10:30:32.198: E/AndroidRuntime(20386):    at android.view.ViewRoot.deliverKeyEventPostIme(ViewRoot.java:2902)
04-19 10:30:32.198: E/AndroidRuntime(20386):    at android.view.ViewRoot.deliverKeyEvent(ViewRoot.java:2860)
04-19 10:30:32.198: E/AndroidRuntime(20386):    at android.view.ViewRoot.handleMessage(ViewRoot.java:2059)
04-19 10:30:32.198: E/AndroidRuntime(20386):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-19 10:30:32.198: E/AndroidRuntime(20386):    at android.os.Looper.loop(Looper.java:132)
04-19 10:30:32.198: E/AndroidRuntime(20386):    at android.app.ActivityThread.main(ActivityThread.java:4083)
04-19 10:30:32.198: E/AndroidRuntime(20386):    at java.lang.reflect.Method.invokeNative(Native Method)
04-19 10:30:32.198: E/AndroidRuntime(20386):    at java.lang.reflect.Method.invoke(Method.java:491)
04-19 10:30:32.198: E/AndroidRuntime(20386):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
04-19 10:30:32.198: E/AndroidRuntime(20386):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
04-19 10:30:32.198: E/AndroidRuntime(20386):    at dalvik.system.NativeStart.main(Native Method)
04-19 10:30:32.198: E/AndroidRuntime(20386): Caused by: java.lang.reflect.InvocationTargetException
04-19 10:30:32.198: E/AndroidRuntime(20386):    at java.lang.reflect.Method.invokeNative(Native Method)
04-19 10:30:32.198: E/AndroidRuntime(20386):    at java.lang.reflect.Method.invoke(Method.java:491)
04-19 10:30:32.198: E/AndroidRuntime(20386):    at android.view.MenuInflater$InflatedOnMenuItemClickListener.onMenuItemClick(MenuInflater.java:199)
04-19 10:30:32.198: E/AndroidRuntime(20386):    ... 30 more
04-19 10:30:32.198: E/AndroidRuntime(20386): Caused by: java.lang.NullPointerException
04-19 10:30:32.198: E/AndroidRuntime(20386):    at com.ameba.api.activityClasses.Home.unlinkDeviceClick(Home.java:604)
04-19 10:30:32.198: E/AndroidRuntime(20386):    ... 33 more 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T15:39:58.530

如果按钮`yes`和在对话框中，您需要**在**设置的对话框布局中`cancel`搜索它们：

 **```
Button yes = (Button) alertDialog.findViewById(R.id.signout);
Button cancel = (Button) alertDialog.findViewById(R.id.cancelsignout); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T15:36:36.813

没有 CallStack，很难说。不过，一个想法可能是您使用 findViewById 获得的小部件为空。

最好的办法是检查调用堆栈，以了解是“是”按钮还是“取消”按钮导致错误，或者最好使用断点并逐步通过代码查找缺少的内容。**

# python - F2PY 返回 ValueError：无效的版本号“4”。

> ID：10231572
> 
> 赞同：1
> 
> 时间：2012-04-19T15:33:05.183
> 
> 标签：python, mingw, fortran, python-2.7, f2py

我是 Python 新手，希望能够使用我现有的 Fortran 代码并从 Python 运行它。我正在尝试按照在线说明使用 F2PY 编译一个小的“Hello world”Fortran 程序。

我在 Windows 上工作。到目前为止，我已经安装了 Python 2.7.3、NumPy 1.6.1、SciPy 10.1 和 MinGW 4.8。

然后我尝试了（除其他外）

```
f2py.py -c --compiler=mingw32 --fcompiler=gnu95 -m foo foo.f90 
```

这会报告无效的版本号。

> ValueError：无效的版本号“4”。

如果有人能建议出了什么问题以及我需要改变什么才能让它运行，我将不胜感激。F2PY 的完整输出如下：

```
D:\python\fortran2>f2py.py -c --compiler=mingw32 --fcompiler=gnu95 -m foo foo.f90
running build
running config_cc
unifing config_cc, config, build_clib, build_ext, build commands --compiler options
running config_fc
unifing config_fc, config, build_clib, build_ext, build commands --fcompiler options
running build_src
build_src
building extension "foo" sources
f2py options: []
f2py:> c:\docume~1\ajr\locals~1\temp\tmpwvnr2c\src.win32-2.7\foomodule.c
creating c:\docume~1\ajr\locals~1\temp\tmpwvnr2c
creating c:\docume~1\ajr\locals~1\temp\tmpwvnr2c\src.win32-2.7
Reading fortran codes...
        Reading file 'foo.f90' (format:free)
Post-processing...
        Block: foo
                        Block: hello
Post-processing (stage 2)...
Building modules...
        Building module "foo"...
                Constructing wrapper function "hello"...
                  hello()
        Wrote C/API module "foo" to file "c:\docume~1\ajr\locals~1\temp\tmpwvnr2c\src.win32-2.7\foomodule.c"
  adding 'c:\docume~1\ajr\locals~1\temp\tmpwvnr2c\src.win32-2.7\fortranobject.c' to sources.
adding 'c:\docume~1\ajr\locals~1\temp\tmpwvnr2c\src.win32-2.7' to include_dirs.
copying C:\Python27\lib\site-packages\numpy\f2py\src\fortranobject.c -> c:\docume~1\ajr\locals~1\temp\tmpwvnr2c\src.win32-2.7
copying C:\Python27\lib\site-packages\numpy\f2py\src\fortranobject.h -> c:\docume~1\ajr\locals~1\temp\tmpwvnr2c\src.win32-2.7
build_src: building npy-pkg config files
running build_ext
Traceback (most recent call last):
  File "c:\python27\scripts\f2py.py", line 24, in <module>
    main()
  File "C:\Python27\lib\site-packages\numpy\f2py\f2py2e.py", line 588, in main
    run_compile()
  File "C:\Python27\lib\site-packages\numpy\f2py\f2py2e.py", line 574, in run_compile
    setup(ext_modules = [ext])
  File "C:\Python27\lib\site-packages\numpy\distutils\core.py", line 186, in setup
    return old_setup(**new_attr)
  File "C:\Python27\lib\distutils\core.py", line 152, in setup
    dist.run_commands()
  File "C:\Python27\lib\distutils\dist.py", line 953, in run_commands
    self.run_command(cmd)
  File "C:\Python27\lib\distutils\dist.py", line 972, in run_command
    cmd_obj.run()
  File "C:\Python27\lib\site-packages\numpy\distutils\command\build.py", line 37, in run
    old_build.run(self)
  File "C:\Python27\lib\distutils\command\build.py", line 127, in run
 self.run_command(cmd_name)
  File "C:\Python27\lib\distutils\cmd.py", line 326, in run_command
    self.distribution.run_command(command)
  File "C:\Python27\lib\distutils\dist.py", line 972, in run_command
    cmd_obj.run()
  File "C:\Python27\lib\site-packages\numpy\distutils\command\build_ext.py", line 92, in run
    force=self.force)
  File "C:\Python27\lib\site-packages\numpy\distutils\ccompiler.py", line 556, in new_compiler
    compiler = klass(None, dry_run, force)
  File "C:\Python27\lib\site-packages\numpy\distutils\mingw32ccompiler.py", line 127, in __init__
    elif self.gcc_version < "4.":
  File "C:\Python27\lib\distutils\version.py", line 138, in __cmp__
    other = StrictVersion(other)
  File "C:\Python27\lib\distutils\version.py", line 40, in __init__
    self.parse(vstring)
  File "C:\Python27\lib\distutils\version.py", line 107, in parse
    raise ValueError, "invalid version number '%s'" % vstring
ValueError: invalid version number '4.' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T23:32:08.193

mingw32 的 distutils 插件使用不兼容的版本字符串。在 distutils/version.py 的第 100 行，匹配正则表达式的版本字符串是

```
r'^(\d+) \. (\d+) (\. (\d+))? ([ab](\d+))?$' 
```

手动编辑文件`mingw32ccompiler.py`并将第 127 行更改为读取

```
elif self.gcc_version < "4.0": 
```

# hibernate - JBoss AS7 自动加载 JPA

> ID：10231575
> 
> 赞同：5
> 
> 时间：2012-04-19T15:33:19.743
> 
> 标签：hibernate, jpa, guice, jboss7.x

我有一个使用 JPA/Hibernate 和 Google Guice 的应用程序。Guice 在 a 中被引导`ServletContextListener`并设置了`EntityManagerFactory`自身。

该应用程序在 Tomcat 7 上运行良好，但是当我部署到 JBoss AS7 时它失败了，因为 JBoss 决定在调用我的`ServletContextListener`.

如何让 JBoss 不自动初始化 JPA 而是等待我`ServletContextListener`这样做？

**更新**

根据詹姆斯在下面提供的链接：

> 在应用程序部署期间，检测到 JPA 使用（例如 persistence.xml 或 @PersistenceContext/Unit 注释）并将 Hibernate 依赖项注入到应用程序部署中。

[https://docs.jboss.org/author/display/AS71/JPA+Reference+Guide#JPAReferenceGuide-Introduction](https://docs.jboss.org/author/display/AS71/JPA+Reference+Guide#JPAReferenceGuide-Introduction)

我需要弄清楚如何禁用此“自动检测”功能。

**更新#2**

可以通过将以下属性添加到 persistence.xml 来禁用 JPA 的容器管理：

```
<property name="jboss.as.jpa.managed" value="false" /> 
```

根据[此主题](https://community.jboss.org/thread/195077?start=60&tstart=0)，截至 2012 年 2 月，此功能仅在夜间构建中可用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T16:17:14.157

JBoss AS7 是一个完整的 Java EE 服务器。这意味着 JPA 实现与它捆绑在一起。在 Tomcat 中，您必须提供自己的 JPA 实现，并且基本上像在 Java SE 中一样运行 JPA。

我建议您阅读 AS7 的[JPA 参考](https://docs.jboss.org/author/display/AS71/JPA+Reference+Guide)文档。

您还可以获得 CDI，因此不需要 Guice。您可能可以使用 Guice 而不是 CDI，但老实说，我无法告诉您如何 :-)

# javascript - 等到页面准备好加载所有社交媒体按钮

> ID：10231576
> 
> 赞同：1
> 
> 时间：2012-04-19T15:33:22.667
> 
> 标签：javascript, jquery, request, document-ready

我有这个“小部件”来提供所有这些社交媒体按钮来分享页面，

这是代码：

```
<div class="social_media social_media_button">
    <div class="smCnt fbCnt">   
        <div class="fb-like" data-href="http://funcook.com/" data-send="true" data-layout="button_count" data-width="200" data-show-faces="false" data-font="verdana"></div>
    </div>
    <div class="smCnt gpCnt">
        <g:plusone size="medium"></g:plusone>
    </div>
    <div class="smCnt ptCnt">
        <a href="http://pinterest.com/pin/create/button/?url=http://funcook.com/'" class="pin-it-button" count-layout="horizontal"><img border="0" src="//assets.pinterest.com/images/PinExt.png" title="Pin It" /></a>
    </div>
    <div class="smCnt twCnt">
        <a href="https://twitter.com/share" class="twitter-share-button" data-lang="es" >Twittear</a>
    </div>
    <div class="smCnt tmCnt">
        <a href="http://www.tumblr.com/share" title="Share on Tumblr" style="display:inline-block; text-indent:-9999px; overflow:hidden; width:81px; height:20px; background:url('http://platform.tumblr.com/v1/share_1.png') top left no-repeat transparent;">Share on Tumblr</a>
    </div>
</div>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
        <script type="text/javascript" src="http://assets.pinterest.com/js/pinit.js"></script>
        <script type="text/javascript">
                                      window.___gcfg = {lang: 'es'};
                                      (function() {
                                        var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
                                        po.src = 'https://apis.google.com/js/plusone.js';
                                        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
                                      })();
        </script> 
        <script>(function(d, s, id) {
          var js, fjs = d.getElementsByTagName(s)[0];
          if (d.getElementById(id)) return;
          js = d.createElement(s); js.id = id;
          js.src = "//connect.facebook.net/es_LA/all.js#xfbml=1&appId=121495767915738";
          fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));</script> 
```

哪个按预期工作，但在页面加载期间加载的资源很少，所以我尝试了：

```
<script>
    /* just include them in a $document.ready */
                                $(document).ready(function(){
                                        !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");
                                        window.___gcfg = {lang: 'es'};
                                        (function() {
                                          var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
                                          po.src = 'https://apis.google.com/js/plusone.js';
                                          var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
                                        })();
                                        (function(d, s, id) {
                                          var js, fjs = d.getElementsByTagName(s)[0];
                                          if (d.getElementById(id)) return;
                                          js = d.createElement(s); js.id = id;
                                          js.src = "//connect.facebook.net/es_LA/all.js#xfbml=1&appId=121495767915738";
                                          fjs.parentNode.insertBefore(js, fjs);
                                        }(document, 'script', 'facebook-jssdk'));
                                        (function() {
                                          var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
                                          po.src = 'http://assets.pinterest.com/js/pinit.js';
                                          var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
                                        })();
                                        $('.social_media').slideDown();
                                })

                            </script> 
```

这似乎也有效，但仍然在页面加载报告中看到这些项目：

[http://tools.pingdom.com/fpt/#!/wZNCkPIsf/http://funcook.com/](http://tools.pingdom.com/fpt/#!/wZNCkPIsf/http://funcook.com/)

如何确保这些按钮不会影响（初始）加载时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:37:20.013

您可以将所有社交媒体按钮加载到单个函数中，然后通过`setTimeout`.

```
setTimeout("loadSocialMediaButtons", 100); 
```

这将允许页面首先加载其所有内容，然后是社交媒体按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T15:37:36.517

我想您需要将所有代码包装在里面

```
$(window).on('load', function(){
   !function(d,s,id){var js,...
}); 
```

而不是使用`document.ready`其他加载时间将考虑该代码（以及您正在加载的所有资产）

作为旁注，您定义了三倍*几乎*相同的函数：我建议改用一个函数来加载和附加一个您可以作为参数传递的 javascript 文件

# c++ - OpenSceneGraph osg \ ive 格式是否有 GDAL 驱动程序？

> ID：10231577
> 
> 赞同：0
> 
> 时间：2012-04-19T15:33:24.347
> 
> 标签：c++, gdal, openscenegraph

我正在尝试编写一个可以获取 DEM 数据并在 C++ 中输出 OSG (OpenSceneGraph) 可识别的格式的应用程序。我一直找不到支持 GDAL 的 osg/ive 格式的驱动程序，而且我不知道从哪里开始编写自己的驱动程序。如果有另一种方法来做我所要求的，我愿意接受，但我已经成功地将 DEM 加载到 GDAL 中，所以它似乎是目前阻力最小的路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:38:35.627

我不知道 - OSG 的原生格式并不是真正的标准，它只是树结构的转储（它甚至不是 OSG 的最佳选择！）。

我可能会选择 OSG 可以输出并且 GDAL 可以读取的“标准”DEM 格式。有很多带有 OSG 的输出插件示例，自己编写一个“作家”很简单。

这也意味着您可以获得这种格式的标准模型进行测试。

# ios - 向形状添加手势 - c4framework

> ID：10231579
> 
> 赞同：4
> 
> 时间：2012-04-19T15:33:31.277
> 
> 标签：ios, c4

我只是在学习如何使用 C4 框架并尝试向形状添加手势，但我似乎无法弄清楚如何让它们做任何事情。当我在点击按钮后尝试更改按钮的位置时，以下方法会产生错误。

```
[buttonA addGesture:TAP name:@"tapGesture" action:@"setPosition"]; 
```

这是我得到的错误：***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[MyButton setPosition]：无法识别的选择器已发送到实例 0x7661b60”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T16:53:56.747

我猜你得到错误的原因是因为 setPosition 方法是因为你试图`setPosition`直接在 C4Shape 对象上运行该方法。C4Shapes 本身没有这种方法。

在 C4 中，所有对象都可以附加手势，但是为了在您触发对象上的手势时运行任何自定义代码，您应该首先继承 C4Shape 并编写一个特殊方法来处理您想要看到的行为。

例如，我会像这样创建一个 MyShape 类：

```
@interface MyShape : C4Shape
-(void)setNewPosition;
@end

@implementation MyShape
-(void)setNewPosition {
    //will set the center of the shape to a new random point
    self.center = CGPointMake([C4Math randomInt:768], [C4Math randomInt:1024]);
}
@end 
```

然后，在我的 C4WorkSpace 中：

```
#import "C4WorkSpace.h"
#import "MyShape.h"

@implementation C4WorkSpace {
    MyShape *newShape;
}
-(void)setup {
    newShape = [MyShape new];
    [newShape ellipse:CGRectMake(100, 100, 200, 200)];
    [newShape addGesture:TAP name:@"tapGesture" action:@"setNewPosition"];
    [self.canvas addShape:newShape];
}
@end 
```

这应该使用新的子类形状注册一个轻击手势，并在`setNewPosition`触发手势时运行其方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T15:50:07.173

为了让手势“发送”您尝试完成的操作，您需要为“myButton”类提供一个名为“setPositon”的方法。您的代码中是否调用了此方法？

# jquery - 为什么 jQuery 循环不起作用？有冲突吗？

> ID：10231580
> 
> 赞同：0
> 
> 时间：2012-04-19T15:33:38.127
> 
> 标签：jquery, jquery-plugins, jquery-cycle

我在此页面上使用 jQuery Cycle 进行幻灯片放映：[http ://www.orientalhealthsolutions.com/](http://www.orientalhealthsolutions.com/)

页面中心的图像应该旋转。但是，它们不是。

这是HTML：

```
<div class="slideshow">
    <img src="{site_url}/photos/slideshow-1.jpg" alt="slideshow-1" width="600" height="410" />
    <img src="{site_url}/photos/slideshow-2.jpg" alt="slideshow-2" width="600" height="410" />
    <img src="{site_url}/photos/slideshow-3.jpg" alt="slideshow-2" width="600" height="410" />
    <img src="{site_url}/photos/slideshow-4.jpg" alt="slideshow-2" width="600" height="410" />
    <img src="{site_url}/photos/slideshow-5.jpg" alt="slideshow-2" width="600" height="410" />
    <img src="{site_url}/photos/slideshow-6.jpg" alt="slideshow-2" width="600" height="410" />
    <img src="{site_url}/photos/slideshow-7.jpg" alt="slideshow-2" width="600" height="410" />
</div> 
```

这是jQuery：

```
<script type="text/javascript" src="{site_url}scripts/jquery.cycle.min.js"></script>
<script type="text/javascript">
$(document).ready(function() {
    $('.slideshow').cycle({
        fx: 'fade',
        timeout:   4000,
        autostop: 1
    });
});
</script> 
```

我尝试使用 FireBug，脚本正在加载，但仍然缺少一些东西，我希望能得到一些帮助来整理它。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:47:39.403

`jquery.dropmenu.js`使用无冲突。之后，您需要将 $ 称为 jQuery。将您的 $() 调用更改为 jQuery() ，它应该可以正常工作。

# java - 如何解决java中的无限递归（堆栈溢出）？

> ID：10231581
> 
> 赞同：2
> 
> 时间：2012-04-19T15:33:39.277
> 
> 标签：java

我有无限递归的问题。Main 方法将运行，然后如果我选择 1，它将转到 submenu()。但是，当我在 submenu() 中选择了错误的选项时，程序必须循环回 main 方法。

但是，这种情况会导致堆栈溢出。

你对这个问题有什么想法吗？它如何在不调用 main() 的情况下循环回 main 方法？

非常感谢你们。

```
 public void main() {
      // variables omitted
      while (menu) {

         switch (option) {
         case 1:
            subMenu();
            break;
         }
      }

   }

   public void subMenu() {
      switch (a) {
      case 1:
      case 2:
      default:
         System.out.println("Invalid Option");
         main();
      }
   } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T16:11:18.930

You don't need to call `main()` to return to the main method, to return from a method, you say `return <vairable>`, or if the method is a void return type, no return is needed at the end of the method. You can still say `return` if you want to return from a place that is not the end of the method.

So in your case above, the `switch` is the last element in the `subMenu` method, so after the switch, the method is finished, so returns. Just remove the call to `main()`.

Take a look at [http://docs.oracle.com/javase/tutorial/java/javaOO/returnvalue.html](http://docs.oracle.com/javase/tutorial/java/javaOO/returnvalue.html)

# grails - 限制 serachableService.moreLikeThis 在 grails 中返回的结果？

> ID：10231582
> 
> 赞同：0
> 
> 时间：2012-04-19T15:33:42.777
> 
> 标签：grails, morelikethis, grails-searchable

任何人都知道如何限制 moreLikeThis 方法返回 searchableService.moreLikeThis() 的结果

我想将结果域结果限制为可见性：公共可见性是域的属性并且可以是私有和公共的？

提前致谢， 米卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T00:03:46.563

当您将结果作为地图获取时，您可以控制一个名为“max”的参数，它定义了要显示的结果的数量。

[http://grails.org/Searchable+Plugin+-+Methods+-+moreLikeThis](http://grails.org/Searchable+Plugin+-+Methods+-+moreLikeThis)

不确定通过域类的可见性以及私有或公共的含义是什么。

# java - Java 速度访问数组索引与临时变量

> ID：10231585
> 
> 赞同：11
> 
> 时间：2012-04-19T15:33:52.383
> 
> 标签：java, arrays, performance

Java中更快的是什么。直接多次访问数组索引，或者将数组索引的值保存到一个新变量中并将其用于后续计算？

**访问索引**

```
if ((shape.vertices[0].x >= fromX && shape.vertices[0].x <= toX) || // left side of shape in screen
    (shape.vertices[0].x <= fromX && shape.vertices[0].x + shape.width >= fromX) || // right side of shape in screen
    (shape.vertices[0].x >= fromX && shape.vertices[0].x + shape.width <= toX)) { // shape fully in screen

    // ...
} 
```

**临时变量**

```
float x = shape.vertices[0].x;
float y = shape.vertices[0].y;
if ((x >= fromX && x <= toX) || // left side of shape in screen
    (x <= fromX && x + shape.width >= fromX) || // right side of shape in screen
    (x >= fromX && x + shape.width <= toX)) { // shape fully in screen

        // ...
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T15:35:11.857

第二种方法肯定更快。`final`但是您可以使用关键字提供更多帮助：

```
final float x = shape.vertices[0].x;
final float y = shape.vertices[0].y;
final int rightEdge = x + shape.width;
if ((x >= fromX && x <= toX) || // left side of shape in screen
(x <= fromX && rightEdge >= fromX) || // right side of shape in screen
(x >= fromX && rightEdge <= toX)) { // shape fully in screen

    // ...
} 
```

当然不是一个显着的改进（但仍然是一个改进并且也明确了意图）。您可以阅读此讨论： http: [//old.nabble.com/Making-copy-of-a-reference-to-ReentrantLock-tt30730392.html#a30733348](http://old.nabble.com/Making-copy-of-a-reference-to-ReentrantLock-tt30730392.html#a30733348)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T15:39:10.173

从长远来看，声明一个临时数组会更快，因为 jvm 在访问数组元素时必须计算偏移量。

使用分析工具，看看哪个更适合您使用，但我提醒您，除非您正在做一些非常密集且对时间非常敏感的事情，否则这不会是一个巨大的改进。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T15:58:05.943

通过分析器运行代码以回答您的用例的问题。

这个问题的答案可能是特定于 JVM 的。Oracle HotSpot JVM 的性能将不同于 OpenJDK 或 IBM 的 JDK。时间将取决于 JVM 如何优化字节码，它决定在运行时编译什么。服务器与客户端模式也可能会有所不同。

因此，以可读性为目标。在分析并确定那段代码是问题之后进行优化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T15:37:46.313

第二种方法更快，但会消耗更多内存。但是性能提升只有纳秒，除非你的数组大小很大。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-19T15:48:25.640

数组访问可能会更快。请注意以下程序：

```
public class ArraySpeedTest{

public static void main(String [] args){

    float x = 4.4f;
    float [] xArr = new float[1];
    xArr[0] = 4.4f;

    long time1 = System.nanoTime();
    for(int i = 0 ; i < 1000*1000*1000; i++){
        if(x > 1 && x < 5){

        }
    }
    long time2 = System.nanoTime();

    System.out.println(time2-time1);

    long time3 = System.nanoTime();
    for(int i = 0 ; i < 1000*1000*1000; i++){
        if(xArr[0] > 1 && xArr[0] < 5){
        }
    }
    long time4 = System.nanoTime();

    System.out.println(time4-time3);

}

} 
```

输出:: 5290289 2130667

JVM 实现、标志和程序顺序可以在几毫秒的量级上改变性能。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-04-19T15:37:11.140

我会推荐第二种方法，仅仅是因为它更具**可读性**并且对**可维护性**有很大帮助。

性能提升，除非你的阵列很大，否则真的很小。

另一方面，可读性的提升总是值得接受的。

# c++ - 使用堆栈的后缀评估

> ID：10231586
> 
> 赞同：1
> 
> 时间：2012-04-19T15:33:55.270
> 
> 标签：c++, file, stack, postfix-notation

我正在尝试从 txt 文件中读取后缀表达式并对其进行评估，输入为 10 5 *，输出应为 50，但它只读取 10 和 5，他无法读取操作符，也没有 ascii 代码，有什么帮助吗？这是我的代码

```
#include <iostream>
#include <iomanip>
#include <fstream>
#include<stdio.h>
#include<ctype.h>
#include<stdlib.h>
using namespace std;
#define SIZE 40
int stack[SIZE];
int top=-1;

void push(int n)
{
    if(top==SIZE-1)
    {
        printf("Stack is full\n");
        return;
    }
    else
    {
        top=top+1;
        stack[top]=n;
        printf("Pushed element is %d\n",n);
        system("pause");
    }
}

int pop()
{
    int n;
    if(top==-1)
    {
        printf("Stack is empty\n");
        system("pause");
        return 0;
    }
    else
    {
        n=stack[top];
        top=top-1;

        return(n);
    }
}

int main() 
{

    int str[50],ch;

    int i=0;
    int n,op1,op2;

    ifstream inFile;
    ch=str[i];

    inFile.open("D:\\me.txt");
    if (!inFile) 
    {
        printf( "Unable to open file");
        system("pause");
        exit(1); // terminate with error
    }

    while (inFile >> ch) 
    {
        if(ch=='+' || ch=='-' || ch=='*' || ch=='/' || ch=='%' || ch=='^' )
        {

            op1=pop();
            op2=pop();
            if (op1<op2)
            {
                n=op1;
                op1=op2;
                op2=n;
            }
            if(ch=='+')
                n=op1+op2;
            else if(ch=='-')
                n=op1-op2;
            else if(ch=='*')
                n=op1*op2;
            else if(ch=='/')
                n=op1/op2;
            else if(ch=='%')
                n=op1%op2;
            else if(ch=='^')
                n=op1^op2;
            else
            {
                printf("The operator is not identified\n");
                system("pause");
                exit(0);
            }

            printf("n=%d\n",n);
            system("pause");
            push(n);

        }
        else
        {
            n=ch;
            push(n);
        }
        ch=str[++i];
    }
    inFile.close();
    printf("The value of the arithmetic expression is=%d\n",pop());
    system("pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:53:34.050

问题是`ch`这样`int`只能`inFile >> ch`读取数字 -`'*'`字符被忽略。

此外，您有一个`str[]`未初始化的数组，您会定期读取该数组以分配给`ch`（然后您忽略刚刚写入的任何内容`ch`）。您需要摆脱`str[]`或完成最初使您将其放在那里的想法……

# r - 在 r 中扩展数据的命令

> ID：10231587
> 
> 赞同：0
> 
> 时间：2012-04-19T15:33:57.017
> 
> 标签：r

我有一些数据：

```
 Length(cm) Frequency
   1          5 
   2          2 
   3          3
   4          5 
```

有没有办法在 R 中扩展这些数字而无需手动输入它们，所以我可以计算出长度平均值的标准错误，所以我有一个数据集，如：

```
 1 1 1 1 1 2 2 3 3 3 4 4 4 4 4 
```

然后我可以做什么？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T15:36:02.600

您可以使用`rep`.

```
> l <- 1:4
> f <- c(5,2,3,5)
> rep(l,f)
 [1] 1 1 1 1 1 2 2 3 3 3 4 4 4 4 4 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T16:42:11.250

除了用于`rep`复制观察结果之外，您还可以使用包中的`wtd.mean`和`wtd.var`函数`Hmisc`来计算加权摘要而无需扩展（如果扩展的向量会占用大部分内存，这会更好）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T15:58:41.640

我建议使用数据框：

```
sd(rep(data$length, data$freq)) 
```

# java - java中的RMI聊天程序-如何将消息从客户端发送到客户端（而不是通过服务器）？

> ID：10231588
> 
> 赞同：0
> 
> 时间：2012-04-19T15:33:58.943
> 
> 标签：java, client-server, rmi

如果不通过服务器，我无法让客户端向另一个客户端发送消息。这是一个强制性的学校项目，应该这样实施。如果有人可以帮助我，我将不胜感激。

*服务器接口：*

```
import java.rmi.Remote;
import java.rmi.RemoteException;
import java.util.ArrayList;
import java.util.List;

public interface ChatServerInt extends Remote {
    public abstract void register(ChatClientInt inClient) throws RemoteException;
    public abstract ChatClientInt[] getClients() throws RemoteException;
    public void disconnect(ChatClientInt client) throws RemoteException;
} 
```

*服务器实现：*

```
import java.rmi.Naming;
import java.rmi.RemoteException;
import java.rmi.server.UnicastRemoteObject;
import java.util.ArrayList;
import java.util.List;
import java.util.Random;

public class ChatServerImp extends UnicastRemoteObject implements ChatServerInt, Runnable {
    private ChatClientInt[] clientList;
    int counter = 0;
    private ArrayList<String> connectedClients; 
    /**
     * List of all registered remote clients. 
     */
    private List<ChatClientInt> clients = null; 

    /**
     * Construct an instance of the chat server. 
     */
    public ChatServerImp() throws RemoteException {
        // initialise the list of client objects.
        clients = new ArrayList<ChatClientInt>();
        connectedClients = new ArrayList<String>();
        clientList = new ChatClientInt[16];
    }

    /**
     * Register a chat client. 
     */
    public void register(ChatClientInt inClient) throws RemoteException {
        // perform registration. 
        synchronized(clients)
        {
            clients.add(inClient);
            clientList[counter++] =  inClient;
            inClient = new ChatClientImp();

            for(int i = 0 ; i < clients.size();i++) {
                System.out.println(inClient.getName()+ "has joined\n");
            }
        }
    }

    /**After registering, each client will request the list of connected users. 
     * Get a list of chat clients. 
     */
    public synchronized ChatClientInt[] getClients() throws RemoteException {
        // generate and return the list
        return clientList;
    }

    public void disconnect(ChatClientInt client) throws RemoteException {
        for(int i = 0; i < clients.size(); i++) {
            System.out.println(client.getName() + "" + "has joined \n");
        }
        clients.remove(client);
    }

    /**
     * Generate a random subset. Based on an implementation of D. Knuth's 
     * @return
     */
    private static <T> List<T> randomSample2(List<T> items, int m) {
        Random rnd = new Random();
        for(int i=0;i<items.size();i++){
            int pos = i + rnd.nextInt(items.size() - i);
            T tmp = items.get(pos);
            items.set(pos, items.get(i));
            items.set(i, tmp);
        }
        return items.subList(0, m);
    }   

    /**
     * Run the server's main thread. The server should periodically 
     * iterate through all registered clients to find out if they 
     * are still alive. Any dead clients will be removed from the 
     * client list. 
     */

    public void run() {
        while(true) {
            //System.out.println("waiting for client connection....\n");
            // sleep for a while
            try {
                Thread.sleep(5000);
                // iterate through all the clients we know. if we can't communicate with the client
                // then eliminate it else if we can communicate with the client then do nothing. 
                for(int i =0; i < clients.size(); i++) {
                    try {
                        if(clients.get(i).getName()==null) {
                            clients.remove(clients.get(i).getName());
                            System.out.println("Disconnected clients:\n" + clients.get(i).getName());
                        }
                    }
                    catch (RemoteException e) {e.printStackTrace();}
                }           
            } 
            catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }

    /**
     * Start the chat server. 
     * @param args
     */
    public static void main(String[] args) throws Exception {
        //ChatServerInt server;
        try {
            String serverName = "rmi://localhost/ChatServer";
            // create an instance of the chat server
            //server = (ChatServerImp) new ChatServerImp();

            //Launch the registry - saves invoking it manually
            java.rmi.registry.LocateRegistry.createRegistry(1099);

            // register the instance with the RMIRegistry
            Naming.rebind(serverName, new ChatServerImp());

            //Naming.rebind(serverName, server);

            // create the server thread and start it
            //Thread t = new Thread(server).start();

            System.out.println("Server running.....\n");
        }
        catch(RemoteException ex) {
            System.out.println("Error binding the server to rmi");
        }
    }
} 
```

*消息接口：*

```
import java.util.HashSet;

public interface MessageInt {
    /**
     * Add a chat recipient to the list of receivers
     * @param inClient
     */
    public abstract void addRecipient(ChatClientInt inClient);

    /**
     * Get the set of clients that have seen this message
     * @return
     */
    public abstract HashSet<ChatClientInt> getRecipients();

    /**
     * Get the message content.  
     * @return
     */
    public abstract String getContent();

    /**
     * Get an ID for a sender of the message
     * @return
     */
    public abstract String getSource();

} 
```

*消息实现：*

```
import java.io.Serializable;
import java.util.HashSet;

public class MessageImp implements MessageInt, Serializable {
    /**
     * 
     */
    private static final long serialVersionUID = -2686034785384409672L;
    HashSet<ChatClientInt> clientSet = new HashSet<ChatClientInt>();

    String messageContent;
    String messageSource;

    public MessageImp(String inUser , String inMsg) {
        messageSource = inUser;
        messageContent = inMsg;
    }

    /**
     * Add a chat recipient to the list of receivers
     * @param inClient
     */
    public void addRecipient(ChatClientInt inClient) {
        synchronized(inClient) {
            clientSet.add(inClient);
        }
    }

    /**
     * Get the set of clients that have seen this message
     * @return
     */
    public HashSet<ChatClientInt> getRecipients() {
        return clientSet;   
    }

    /**
     * Get the message content.  
     * @return
     */
    public String getContent() {
        return messageContent;  
    }

    /**
     * Get an ID for a sender of the message
     * @return
     */
    public String getSource() {
        return messageSource;   
    }
} 
```

*客户端接口：*

```
import java.rmi.Remote;
import java.rmi.RemoteException;

public interface ChatClientInt extends Remote {
    /**
     * Process a newly received message. 
     * 
     * @param inMessage
     */
    public void processMessage(MessageInt inMessage)throws RemoteException; 

    /**
     * Returns the name of the client. 
     */
    public String getName() throws RemoteException; 

    public boolean sendMessage(MessageInt inMessage) throws RemoteException;

} 
```

*客户端实现：*

```
import java.io.Serializable;
import java.net.MalformedURLException;
import java.rmi.Naming;
import java.rmi.NotBoundException;
import java.rmi.RemoteException;
import java.rmi.server.UnicastRemoteObject;
import java.util.ArrayList;
import java.util.HashSet;
import java.util.Iterator;
import java.util.List;
import java.util.Scanner;

public class ChatClientImp extends UnicastRemoteObject implements ChatClientInt, Runnable {
    /**
     * 
     */
    private static final long serialVersionUID = 74130345076834009L;

    private ArrayList <String> eventHistory = new ArrayList<String>();

    private HashSet<ChatClientInt> clientSet = new HashSet<ChatClientInt>();

    private List<ChatClientInt> clients;// = new ArrayList<ChatClientInt>();

    ChatClientInt[] listFromServer = new ChatClientInt[4];

    String clientName;
    String strMessage;
    MessageInt messageObj;
    ChatServerInt serverObj;

    public ChatClientImp() throws RemoteException {
        super();    
        clients = new ArrayList<ChatClientInt>();   
    }

    public void processMessage(MessageInt inMessage) throws RemoteException {   
        System.out.println("message:" + inMessage.getRecipients().toString() + inMessage.getSource() + inMessage.getContent() + "\n");      
    }

    public String getName() throws RemoteException {
        return clientName;
    }

    public synchronized boolean sendMessage(MessageInt inMessage) throws RemoteException {
        boolean success = false;    
        for(int i = 0; i < clients.size(); i++) {
            clients.get(i).processMessage(inMessage);
            inMessage.addRecipient(clients.get(i));
            success = true;
        }
        return success;
    }

    public void displayMessage(String displayName, String displayMsg) {
        Iterator<ChatClientInt> it = clientSet.iterator();
        while(it.hasNext()) {
            System.out.println(displayName + displayMsg + "\n");
        }       
    }

    public void run() {
        Scanner scanner = new Scanner(System.in);
        String  userName = "";
        try {
            this.serverObj =(ChatServerInt) new ChatServerImp();            
        } catch (RemoteException e) {
            e.printStackTrace();
        }
        //  Keep requesting until a name is submitted that is not already used.   
        // checking for the existence of a name and adding the name 
        // is done while locking the set of names.
        System.out.println("Please Enter a username\n");

        while(true) {           
            userName = scanner.nextLine();
            if(userName==null) {
                return;
            }   
            clientName = userName;
            try {
                serverObj.register(ChatClientImp.this);
                listFromServer = serverObj.getClients();
                clientSet.add(this);    
            } catch (RemoteException e) {
                e.printStackTrace();
            }

            System.out.println("Hi" + " " + clientName + " " + "enter your message\n");
            String msg = scanner.nextLine();
            if(msg.equals("exit")) {
                try {
                    serverObj.disconnect(this);
                    System.exit(0);
                } 
                catch (RemoteException e) {
                    e.printStackTrace();
                }
            }//end if

            if((listFromServer.length) > 1) {
                System.out.println("list from client is" + " " + listFromServer.length + "going to try to send message.....\n");
                try {
                    this.messageObj = new MessageImp(userName,  msg);
                    boolean result = this.sendMessage(messageObj);
                    if(result) {
                        System.out.print("sending result is:" + result + "\n");
                    } else {
                        System.out.println("sending was not successful\n");
                    }
                } catch (RemoteException e1) {
                    System.out.println("Error tryiing to send message from the Run()\n");
                } 
            } else {
                System.out.println("There is no one else logged on\n");
            }
        }
    }

    public static void main(String[] args) throws RemoteException {
        String serverUrl= "rmi://localhost/ChatServer"; 
        try {
            ChatServerInt server = (ChatServerInt)Naming.lookup(serverUrl);
            Thread  thread = new Thread(new ChatClientImp());
            thread.start(); 
        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (NotBoundException e) {
            e.printStackTrace();
        }   
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T23:56:30.247

使用 RMI 可以做到这一点的唯一方法是客户端也是 RMI 服务器并以某种方式相互发送存根。

# excel - Excel Datarange 的 1 列跨柱形图的单独工作表

> ID：10231589
> 
> 赞同：0
> 
> 时间：2012-04-19T15:34:02.073
> 
> 标签：excel

所以我有一个带有多个选项卡/工作表的 Excel，每个选项卡/工作表代表一个月，即 2011 年 8 月、2011 年 9 月等。

在每张纸上，我都有一些数据图，以及每张纸上表列“D5”中的一个重要数字。

我要做的是创建一个名为摘要的新选项卡/工作表，在此工作表上和此工作表上有一个柱形图，代表每个月的“D5”数字。

如何在 excel 中为图表编写数据范围以在所有工作表上获取此数字？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T18:55:02.533

使用“命名范围”以简单的格式命名每个单元格。

在每张纸上命名单元格 D5：

*   '2011 年 1 月'！D5 = IMPORTANT_JAN_2011
*   '2011 年 2 月'！D5 = IMPORTANT_FEB_2011
*   等等

然后在摘要中输入以下公式作为您想要数据范围内的公式，例如 =IMPORTANT_JAN_2011 =IMPORTANT_FEB_2011

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T18:42:33.377

您可以分两步执行此操作：

1.  在新工作表中：a) 在 A 列中（例如，从单元格 A1 开始）列出每月工作表的名称（因此，`August 2011`在单元格 A1 中，`September 2011`在单元格 A2 中，依此类推），b) 在列的第一行B（例如，单元格 B1），输入公式 `=INDIRECT("'"&A1&"'!D5")，然后，c) 将公式从单元格 B1 复制到 B 列中的其他行。
2.  根据新工作表中的 A 列和 B 列创建图表。

# ios - UITableViewCell setSelected:animated 动画时没有效果

> ID：10231590
> 
> 赞同：1
> 
> 时间：2012-04-19T15:34:03.510
> 
> 标签：ios, ipad, uitableview

我在 iPad 上有一个视图控制器，上面有三个 UITableView。他们都拥有`dataSource`并`delegate`设置为 VC。在`tableView:didSelectRowAtIndexPath:`VC 中，我这样做：

```
UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
NSLog(@"Cell: %@", cell);
[cell setSelected:NO animated:YES]; 
```

它记录正确的单元格（非零），但该单元格始终保持选中状态，直到选择同一表中的另一个单元格。如果我通过`NO`for `animated`，它工作正常。这是怎么回事？为什么单元格不会对其取消选择进行动画处理？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T15:42:21.230

您可以使用`[tableView deselectRowAtIndexPath:indexPath animated:YES];`来获得您正在寻找的功能。

# wordpress - 迁移时 Wordpress 重置插件设置

> ID：10231592
> 
> 赞同：0
> 
> 时间：2012-04-19T15:34:13.520
> 
> 标签：wordpress, settings, reset

我正在将一个 wordpress 站点从一个域迁移到另一个域。插件在此过程中失去了我的偏好。我真的不明白为什么。我很好奇为什么会发生这种情况。

以下是我经历的步骤：

```
1.从localhost上传wordpress文件
   通过新域上的 FTP ( http://example-live.com )
2\. 上传数据库到新域
3\. 将所有指向 http://localhost 的链接更改为 http://example-live.com
4\. 对待 text_widgets 的方式不同，因为它们是在数据库中序列化的。
5\. 编辑.htaccess
6.更新了wp_config.php

```

页面正常显示，但我缺少插件首选项...有什么想法吗？

编辑：找到这个：[http ://codex.wordpress.org/Moving_WordPress](http://codex.wordpress.org/Moving_WordPress)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T12:36:17.473

最终我决定自动化这个过程并使用 Wordpress Duplicator 插件（免费），可以在这里找到[http://lifeinthegrid.com/labs/duplicator/](http://lifeinthegrid.com/labs/duplicator/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T15:53:59.743

您应该在导入**之前替换 sql 转储中的所有链接：**

使用文本编辑器打开您的 SQL 转储并用您的域 URL 替换所有本地 URL（例如，将所有“ `localhost/mysite`”替换为“ `www.yourdomain.com`”），如下所述：[http ://webdesignerwall.com/tutorials/exporting-and-importing-wordpress](http://webdesignerwall.com/tutorials/exporting-and-importing-wordpress)

编辑：小心序列化数据，你不能简单地`localhost/mysite`用更短/更长的字符串替换，你必须手动处理

# jquery - 使用 jQuery 的大型 HTML、换行符和 .html() 方法

> ID：10231595
> 
> 赞同：0
> 
> 时间：2012-04-19T15:34:25.933
> 
> 标签：jquery, standards, readability

我必须使用[jQuery](http://en.wikipedia.org/wiki/JQuery) `.html()`方法在 DIV 中动态加载以下 HTML。

```
<div class="box-gerenciamento-versoes-variacoes">
    <div class="detalhes-versao">
        <p><span>Cor</span> do produto:</p> <img src="/admin/imagens/cores/preto-amarelo.png" height="18" width="18" title="Preto e amarelo" alt="" /> <span class="nome-cor">Preto e amarelo</span>
    </div>

    <div class="box-enviar-fotos">
        <input type="button" class="botao-enviar-fotos" value="" /> 0 fotos enviadas
    </div>

    <div class="div_clear"></div>

    <div class="etiquetas-tamanho-estoque">
        <p class="etiqueta-tamanho">Tamanho:</p>
        <p class="etiqueta-estoque">Estoque:</p>
    </div>

    <ul class="gerenciamento-tamanho">
        <li>
            PP
            <input type="text" />
        </li>
        <li>
            P
            <input type="text" />
        </li>
        <li>
            M
            <input type="text" />
        </li>
        <li>
            G
            <input type="text" />
        </li>
    </ul>

    <div class="div_clear"></div>
</div> 
```

如您所见，内容不小，并且该`.html()`方法不允许换行，因此要加载此内容我必须删除所有换行符，但是这样做代码会很丑，应用程序维护会很困难.

`.html()`如何在保持良好可读性的同时使用 jQuery 方法加载大部分 HTML 内容？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-19T15:35:59.453

```
alert("Just put a backslash\
at the end of your lines\
to allow line breaks\
in JavaScript"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T15:48:31.193

```
var newHtml = $('.box-gerenciamento-versoes-variacoes').html().replace(/(\r\n|\n|\r)/gm,"");
$('.box-gerenciamento-versoes-variacoes').empty().html(newHtml); 
```

# php - 在多维数组中排序

> ID：10231596
> 
> 赞同：0
> 
> 时间：2012-04-19T15:34:26.517
> 
> 标签：php

我在 PHP 中有这个数组：

```
foreach($rss_items as $item) :
    $contenu[] = array (
        "auteur" => $author,
        "date" => $item->get_date(),
        "contenu" => $item->get_content()
    ); 
```

最后，我的数组由6部分组成，每个部分都包含上面的3个变量。我的问题是：如何按日期对数组进行排序并使用 strtotime，因为使用此函数更容易排序。

```
strtotime($item->get_date()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:38:56.803

用于[`usort`](http://php.net/usort)根据自己的回调函数进行排序。

```
usort($contenu, function($a, $b){
    $aSort = strtotime($a['date']);
    $bSort = strtotime($b['date']);

    if($aSort === $bSort) return 0;
    return ($aSort < $bSort) ? -1 : 1;
}); 
```

注意：这仅适用于 PHP 5.3+。如果您有 5.2 或更低版本，则可以使用[`create_function`](http://php.net/create_function).

```
usort($contenu, create_function('$a, $b','
    $aSort = strtotime($a["date"]);
    $bSort = strtotime($b["date"]);

    if($aSort === $bSort) return 0;
    return ($aSort < $bSort) ? -1 : 1;
')); 
```

# iphone - 在导航控制器中按下后退按钮时如何删除动画？

> ID：10231597
> 
> 赞同：1
> 
> 时间：2012-04-19T15:34:42.433
> 
> 标签：iphone, ios5

我想我正在寻找覆盖的方法，因此我可以将“动画”参数设置为“否”。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:42:03.040

试试这个代码：

```
[myNavigationController popViewControllerAnimated:NO] 
```

这应该可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T16:46:06.027

@GlorytheWz：您可以使用后面的 popViewController 代码或关闭或完成按钮，您可以使用这些按钮导航回父视图。

```
[myNavigationController popViewControllerAnimated:NO] 
```

# asp.net - ASP.NET 使用 VB6 代码

> ID：10231598
> 
> 赞同：1
> 
> 时间：2012-04-19T15:34:43.880
> 
> 标签：asp.net, vb6

我想在 ASP.NET（用 VB.NET 而不是 C#.NET 编写）应用程序中使用 VB6 应用程序中的一些代码。

我的方法是将 DLL 文件复制到 ASP.NET 应用程序的 BIN 文件夹中，并在 .NET 中添加对 COM 组件（在 BIN 文件夹中）的引用。

一切似乎都很完美。这种方法有什么我应该注意的吗？ASP.NET 应用程序使用 XCOPY 部署到域上的几个工作站。我不相信我必须在 PC 上注册 DLL，因为它包含在 BIN 文件夹中？

更新

我已阅读 n8wrl 提供的链接中的信息。以下链接讨论了添加 ASPCOMPAT 标记：http: [//msdn.microsoft.com/en-us/library/zwk9h2kb.aspx](http://msdn.microsoft.com/en-us/library/zwk9h2kb.aspx)。我假设您只需要将标签添加到引用 COM 组件的页面，即不是 ASP.NET 应用程序中的所有页面？是否还需要其他任何东西来确保线程安全等中的代码？我意识到.NET 使用托管内存，COM 使用非托管内存，.NET 使用 MTA，而 COM 使用 STA。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:42:34.147

以下线程可能会有所帮助：

[在 ASP.NET 中使用 VB COM 组件 (STA)](http://forums.asp.net/t/1466081.aspx/1)

# php - 让 Apache 从另一台服务器提供文件（均使用 vSphere 虚拟化）

> ID：10231602
> 
> 赞同：2
> 
> 时间：2012-04-19T15:35:01.090
> 
> 标签：php, apache

寻找有关如何配置 Apache 以提供来自不同服务器的文件的一些指导。不确定这是否是正确的术语，但请耐心等待。

设置如下：

```
虚拟化 Red Hat Enterprise - 运行 Apache（网络服务器）
虚拟化红帽企业 - 运行 PHP (PHP)
（使用 vSphere 5.0 虚拟化）
```

这个想法是 Apache 处理外部请求并将它们转发到我的 PHP 应用程序所在的 PHP 服务器。然后 PHP 会将结果“返回”给 Apache，Apache 会将页面返回给用户。

什么样的协议可以做到这一点？可以在 Apache 中完成吗？出于安全原因进行设置（网络服务器级别的妥协将不允许访问 PHP 服务器，反之亦然）。

朝着正确的方向推动将是一个很大的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T15:39:41.180

您可以使用 Apache 的代理功能来做到这一点。例如：

```
<VirtualHost *:80>
  ServerName myhostname

  <Location />
    ProxyPass http://address-of-php-server/
    ProxyPassReverse http://address-of-php-server/
  </Location>
</VirtualHost> 
```

这将导致 Apache 将与此 VirtualHost 定义匹配的请求代理到您的 PHP 应用程序服务器，并将结果返回给客户端。

这假定您已`mod_proxy`启用。您实际上是在“前端”服务器和“后端”服务器上运行 Apache。

像这样的设置有很多很好的理由，但它会做更多的事情来保护前端服务器免受 PHP 代码中的漏洞的影响，而不是相反。

# java - 通过构造函数传递的对象引用

> ID：10231605
> 
> 赞同：0
> 
> 时间：2012-04-19T15:35:06.593
> 
> 标签：java, object

我正在构建一个相对较大的面向对象程序。我有一个名为的类`AerodynamicCalculator`，它执行大量计算并将结果分布在系统周围。我主要担心的是，当我向其添加 mor 参数时，我的构造函数签名变得越来越大。

如下所示，我已经有九个对象引用被传递到这个构造函数中，但我还需要另外七个。我是否正确地创建了这个对象？我的理解是您将关联的对象引用传递给构造函数并将类的局部变量分配给对象引用。如果是这种情况，使用所有必需对象正确初始化我的类的唯一方法是将它们传递给构造函数，这会导致签名很长。

```
public AreodynamicCalculator(AircraftConfiguration config, AileronOne aOne,
        AileronTwo aTwo, ElevatorOne eOne, ElevatorTwo eTwo, Rudder r,
        Rudder rr, RateGyros rG) {
    // ...
} 
```

关于这种方法的任何建议都会非常有帮助，在此先感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T15:37:40.793

如前所述 - 这可能表明您的班级做得太多，但是，有一个常用的“解决方案”来解决这个问题。

在这种情况下经常使用构建器模式，但是当您有许多具有不同参数的构造器时它也非常有用，构建器很好，因为它使参数的含义更清晰，尤其是在使用布尔文字时。

这是构建器模式，它的工作方式是这样的：

```
AreodynamicCalculator calc = AreodynamicCalculator.builder()
    .config(theAircraftConfiguration)
    .addAileron(aileronOne)
    .addAileron(aileronTwo)
    .addElevator(elevatorOne)
    .addElevator(elevatorTwo)
    .addRudder(rudderOne)
    .addRudder(rudderTwo)
    .build() 
```

在内部，构建器将存储所有这些字段，当`build()`被调用时，它将调用一个（现在是私有的）构造函数来获取这些字段：

```
class AreodynamicCalculator {
    public static class Builder {
        AircraftConfiguration config;
        Aileron aileronOne;
        Aileron aileronTwo;
        Elevator elevatorOne;
        Elevator elevatorTwo;
        ...

        public Builder config(AircraftConfiguration config) {
            this.config = config;
            return this;
        }

        public Builder addAileron(Aileron aileron) {
            if (this.aileronOne == null) {
                this.aileronOne = aileron;
            } else {
                this.aileronTwo = aileron;
            }
            return this;
        }

        // adders / setters for other fields.

        public AreodynamicCalculator build() {
            return new AreodynamicCalculator(config, aileronOne, aileronTwo ... );
        }
    }

    // this is the AircraftConfiguration constructor, it's now private because
    // the way to create AircraftConfiguration objects is via the builder
    //
    private AircraftConfiguration config, AileronOne aOne, AileronTwo aTwo, ElevatorOne eOne, ElevatorTwo eTwo, Rudder r, Rudder rr, RateGyros rG) {
        /// assign fields
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T15:39:22.340

与使用 daveb 响应中建议的构建器模式类似，您可以使用像 Spring 这样的依赖注入框架。

# c - C/Pro*C 中的堆一致性错误

> ID：10231606
> 
> 赞同：0
> 
> 时间：2012-04-19T15:35:11.813
> 
> 标签：c, realloc, consistency

我的以下代码在我的开发环境中运行良好，但是当代码移动到生产服务器时，它会给 oracle “堆一致性错误”。你能告诉我如何调试这个和原因吗？

```
if (TagValue[TagTable[TagLoc].Ptr2ValueTable].repetitionOutValue.length==-1)
{
                TagValue[TagTable[TagLoc].Ptr2ValueTable].repetitionOutValue.value
     = (char*) malloc (*CurLen+1)   ;
}
else
{
             more_val2 = (char*) realloc (TagValue[TagTable[TagLoc].Ptr2ValueTable].repetitionOutValue.value
             , (strlen(TagValue[TagTable[TagLoc].Ptr2ValueTable].repetitionOutValue.value)+(*CurLen)) * sizeof(char));

      if (more_val2!=NULL) 
      {
      TagValue[TagTable[TagLoc].Ptr2ValueTable].repetitionOutValue.value=more_val2;
      } 
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T18:27:28.750

用 Valgrind 检查程序。

正如[oracle](http://docs.oracle.com/cd/B19306_01/appdev.102/b14354/chapter8.htm#sthref903)所说，对于这个*实现定义的*状态：

```
代码条件 Oracle 错误
82111 堆一致性错误 SQL-02111

```

> *   堆一致性错误
>     
>     
> *   此内部错误通常表示与内存相关的错误。
>     
>     
> *   检查程序是否存在与内存相关的错误，例如**无效指针**或**数组边界违规**。

^(*寿; 如果这是一个从未通过任何检查的巨大代码 - 我不羡慕你前面的任务。*)

这里的*堆*是为动态变量保留的内存区域。

过多的堆验证也是`ORAHCHF`. 如果设置告诉 Oracle 运行时库在每次预编译器动态分配或释放内存时检查堆的一致性。

必须在设置之前`CONNECT`设置，一旦设置，无法清除。默认为 0/关闭。

您还对 malloc 进行了冗余转换。也许您在开发与生产环境有影响的其他地方进行投射等。即 32 与 64 位。

*   在`malloc`你 malloc `CurLen`+`1`
*   在您的`realloc`身上，您不要添加额外的`1`（对于`'\0'`？）。

如果这是一个问题，取决于您`repetitionOut.value`之后的处理方式。

`strlen()`不计算终止`\0`。

# node.js - 为什么我的流媒体应用程序没有完全显示图像？

> ID：10231608
> 
> 赞同：3
> 
> 时间：2012-04-19T15:35:14.227
> 
> 标签：node.js, http-headers, streaming, video-streaming, jpeg

我编写了一个简单的 Node.js 应用程序，用于流式传输内容（主要用于视频，但其他内容也可以）。它似乎工作正常，除了一些 jpeg，图像的底部并不总是显示。

这是一个示例，左侧缺少图片的底部。

![在此处输入图像描述](../Images/54e7c001bf44b9aebf8b52ee5a92007b.png)

显示问题的站点在[此处](http://bits.meloncholy.com/node-video-gallery/#!browse/)，而没有问题的外观相同的站点在[此处](http://bits.meloncholy.com/video-gallery/#!browse/)。（第一个链接的大多数图像底部应该有粉红色的位。）

该应用程序的代码[在 Github 上](https://github.com/meloncholy/vid-streamer/)，但我想重要的几行是

```
stream = fs.createReadStream(info.file, { flags: "r", start: info.start, end: info.end });
stream.pipe(res); 
```

（所以所有繁重的工作都是由 stream.js 完成的，而不是我的代码。）

*   我试过删除开始和结束参数，但这没有什么区别。
*   如果我将其更改为流式传输文件`process.stdout`并将输出保存到文件中，则会显示整个图像。
*   文件比较程序说来自的文件`stdout`和原始文件是相同的。
*   如果我传输基线 jpeg 以外的其他内容（因此即使是渐进式 jpeg 也可以），它会显示整个文件。*
*   如果我通过链接的 Node.js 应用程序（使用 Express）而不是通过流媒体访问该文件，它会显示整个图像。
*   如果我将浏览器中的不完整图片保存到桌面，它会保存整个图像。
*   对于某些 jpeg，它有效，但不适用于大多数。
*   问题发生在本地和我的服务器上（分别是 Windows 2008 R2 和 Ubuntu 11）。

浏览器测试（超过 3 台计算机和 1 台虚拟机）

*   Safari 4、5 - 有效
*   Firefox 4、11（2 台计算机）- 不起作用
*   Chrome 18（2 台计算机）- 不起作用
*   IE 8 - 不起作用
*   IE 9 - 工作
*   歌剧 11 - 作品

我真的不知道这里发生了什么。我认为这可能是一个奇怪的图形驱动程序错误，但我尝试过的所有计算机的行为都是一致的。我发现很难责怪 Node.js / 我的代码，因为它似乎正在传输整个文件，但是没有它它也能正常工作。

如果需要，很乐意提供更多详细信息。

* 显然我没有尝试过所有可能的文件类型，但 png、渐进式 jpeg、文本和视频似乎都可以。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T17:47:09.640

事实证明，问题在于标头 ( `header["Content-Length"]`) 中发送的文件大小。我将其设置为`info.end - info.start`，而实际大小比这大 1 。一些浏览器不喜欢这样，在屏幕上显示图片时错过了图片的结尾。哎呀。

# java - 如何使用 Ecliselink 从删除和创建表中排除一个表？

> ID：10231612
> 
> 赞同：3
> 
> 时间：2012-04-19T15:35:26.453
> 
> 标签：java, eclipselink, toplink

我使用 Eclipselink 2.3.2 并想知道，是否有办法将单个表/实体排除在 ddl 生成策略之外`drop-and-create-tables`？我需要保留此表的内容，而应删除所有其他表并创建全新的表。

*原因是领域模型正在大力发展，所以到处都发生了变化。但是应该保留一个表（包含邮政编码），因为它们是开发所必需的，并且在每次服务器启动时将它们全部插入需要很长时间。*

我知道一种方法是使用两个不同的持久性单元。但这会引起其他一些麻烦，所以这不是我的首选方式。

总结：有没有人知道一种方法可以排除单个表的删除，而所有其他表都被删除并在每个服务器上重新创建以 ecliselink 2.3.2 （和 Glassfish 3.1.2 ）开始？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T13:37:27.743

没有简单的方法，除了使用两个持久性单元，也许是复合持久性单元。

您可以将带有约束的虚拟表添加到要保留的表中，然后删除将失败。

# java - 使用 Java 登录 Facebook OAuth（仅限桌面）

> ID：10231613
> 
> 赞同：1
> 
> 时间：2012-04-19T15:35:40.077
> 
> 标签：java, facebook, desktop-application, oauth-2.0

如何仅使用桌面应用程序登录 Facebook 并在 Java 中获取访问令牌？

我找到了一个 api [http://restfb.com](http://restfb.com)，它可以让你调用方法，但你必须自己获取令牌。那么有没有办法只使用桌面应用程序来做到这一点？也许将浏览器嵌入到弹出窗口中？

我已经知道获取令牌的过程在这里解释了[http://benbiddington.wordpress.com/2010/04/23/facebook-graph-api-getting-access-tokens](http://benbiddington.wordpress.com/2010/04/23/facebook-graph-api-getting-access-tokens)所以我的问题不涉及这个。我需要一种让用户使用某种 GUI 登录 facebook 的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:48:36.297

就像在 facebook 文档中一样

> 我们的 OAuth 2.0 实施不包括对为桌面操作系统构建的应用程序的明确支持。但是，如果您的应用程序可以嵌入 Web 浏览器（大多数桌面框架，如 .NET、AIR 和 Cocoa 都支持嵌入浏览器），您可以使用客户端流程并进行一项修改：特定的 redirect_uri。我们不要求桌面应用程序托管 Web 服务器并在开发者应用程序中填充站点 URL，而是提供可用于桌面应用程序的特定 URL：[https](https://www.facebook.com/connect/login_success.html) ://www.facebook.com/connect/login_success.html 。

我认为您对嵌入网络浏览器是正确的。

我建议你改用 Graph API 而不是 Rest，因为它已经过时了。

[查看更多关于 Facebook 身份验证](https://developers.facebook.com/docs/authentication/)

[弃用 REST API](https://developers.facebook.com/blog/post/616/)

# c++ - 在 MFC 中的一个设备上下文上绘制多个位图 - winapi

> ID：10231616
> 
> 赞同：0
> 
> 时间：2012-04-19T15:35:52.897
> 
> 标签：c++, windows, winapi, mfc

我想用一个`CDC`，在其中绘制 3 个位图，定位在 中`CDC`，然后传入`UpdateLayeredWindow`. 我的问题是无法`SIZE* psize`正确获取UpdateLayeredWindow函数的参数！任何人都可以帮忙吗？我该怎么办？

```
BLENDFUNCTION bBlendFnc = {
    AC_SRC_OVER,
    0,
    255,
    AC_SRC_ALPHA
};

CBitmap btCdcBuff;
CBitmap* cache;
BITMAP hbCdcBuff;

btCdcBuff.CreateCompatibleBitmap(pCdcMain, szWndSize.cx, szWndSize.cy); btCdcBuff.GetBitmap(&hbCdcBuff);

cache = pCdcMain->SelectObject(&btCdcBuff); // pCdcMain is a compatible CDC with the screen (pCdcScreen)

Blend(&btIcon); // This function just creates a compatible CDC from a CPaintDC, selects the passed in CBitmap via SelectObject and AlphaBlends it to the pCdcMain.
pCdcMain->SelectObject(cache);

UpdateLayeredWindow(pCdcScreen, NULL, new CSize(hbCdcBuff.bmWidth, hbCdcBuff.bmHeight), pCdcMain, new CPoint(0, 0), 0, &bBlendFnc, ULW_ALPHA) // This fails and returns false 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T16:32:54.883

将 CreateCompatibleBitmap 与 UpdateLayeredWindow 一起使用时，请确保您传入屏幕的 CDC（即 pCdcScreen 而不是 pCdcMain），以便创建的位图具有正确的格式。看到这个线程：[http ://social.msdn.microsoft.com/Forums/en/windowsuidevelopment/thread/1fbcf5e4-b9eb-4537-bf0b-d330aa333fea](http://social.msdn.microsoft.com/Forums/en/windowsuidevelopment/thread/1fbcf5e4-b9eb-4537-bf0b-d330aa333fea)

# python - 我可以使用 Fabric 来处理 virtualenv 并运行 Python 应用程序吗？

> ID：10231618
> 
> 赞同：1
> 
> 时间：2012-04-19T15:36:00.420
> 
> 标签：python, fabric

我已经安装在 Ubuntu 11.10 机器上`virtualenvwrapper`。`virtualenv`我目前对 virtualenv 使用 shell 脚本`workon`，然后运行 ​​Python 应用程序。像这样的东西：

```
workon $1
export PYTHONPATH=/media/work/application-$2/src
cd $PYTHONPATH/core
python startapp.py -option1 $3 -option2 $4 --loglevel=INFO 
```

我想切换到 Fabric 而不是 bash（最终目标是使这个调用跨平台）。我可以使用本身是 Python 应用程序的 Fabric 在本地系统上进行此类调用吗？( `workon`, `export`, `python`)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T20:15:39.087

是的，您甚至可以查看与此问题相关[的常见问题解答部分](http://docs.fabfile.org/en/1.4.1/faq.html#my-cd-workon-export-etc-calls-don-t-seem-to-work)。

- 更新 -

使用较新版本的 Fabric，您现在可以使用 prefix() 上下文管理器，请参见[此处](http://docs.fabfile.org/en/1.7/api/core/context_managers.html?highlight=workon)

# objective-c - 如果 Apple 建议不对类型 ID 进行硬编码，如何识别 Core Foundation 对象？

> ID：10231619
> 
> 赞同：3
> 
> 时间：2012-04-19T15:36:00.697
> 
> 标签：objective-c, cocoa, core-foundation

我的应用程序与 CoreFoundation 库交互。另一个库的一些函数返回一个核心基础对象，我需要识别对象的种类才能处理数据。现在，查看 CFType 库参考，Apple 清楚地声明了以下内容：“因为类型 ID 的值可以随着版本的不同而变化，所以你的代码不应该依赖存储或硬编码的类型 ID，也不应该硬编码任何观察到类型 ID 的属性（例如，它是一个小整数）。”

基于此，我必须避免任何枚举（`CFArray = 18, CFBoolean = 21`等等）。唯一应该起作用并且不受新版本更改影响的是：

`int ID = CFGetTypeID(obj);` `if ID = CFBooleanGetTypeID()`然后…… `if ID = CFStringGetTypeID()`然后…… `if ID = CFDataGetTypeID()`然后……等等……

这真的是一件很可怕的事情。很多调用只是为了识别一个对象。

Apple 还建议不要对从 CFCopyTypeIDDescription 返回的信息的内容或格式创建依赖关系，因此我也必须排除此选项。

任何人都知道我如何轻松识别返回的核心基础类型以及为什么 Apple 总是试图用新版本破坏现有代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:44:43.117

不幸的是，如果您不想冒险让您的应用因未来的操作系统更新而崩溃，您必须进行比较：

```
if( CFGetTypeID(myUnknownCFObject) == CFArrayGetTypeID() ) {
  // handle the object as a CFArray
} else if( /* ... etc. ... */ ) {
} else {
  // we don't know how to deal with this object
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T16:34:34.803

在您的初始化代码中，您可以设置一个静态结构，可能是一个字典或 std::map，`CFTypeID`将 s 关联到函数指针或选择器。这样你就可以使用`CFBooleanGetTypeID()`和朋友，但只调用每个这样的函数一次。

# c# - 如何将所有列作为属性的 DataTable 导出到 Xml？

> ID：10231621
> 
> 赞同：8
> 
> 时间：2012-04-19T15:36:07.787
> 
> 标签：c#, .net, xml, vb.net, datatable

问：我正在将 System.Data.DataTable 导出到 XML。到目前为止，它工作正常。但我想拥有属性中的所有数据，这也很好。但我现在的问题是，如果在一列中，所有行都是 NULL，则不会写入空属性。因此，如果我将 XML 读回 DataTable，则它缺少此列...

即使它们是空的，如何强制写入所有列？
（DataType 不一定是字符串）

```
public void ExportTable(string strDirectory, DataTable dtt)
{
    using (System.Data.DataSet ds = new System.Data.DataSet()) {
        string strTable = dtt.TableName;

        ds.Tables.Add(dtt);
        ds.DataSetName = strTable;

        // Move data to attributes 
        foreach (DataTable dt in ds.Tables) {

            foreach (DataColumn dc in dt.Columns) {
                dc.ColumnMapping = MappingType.Attribute;
            }

        }

        System.Xml.XmlWriterSettings settings = new System.Xml.XmlWriterSettings();
        settings.Indent = true;
        //settings.Encoding = System.Text.Encoding.GetEncoding("ISO-8859-1") 
        settings.Encoding = System.Text.Encoding.UTF8;
        settings.CloseOutput = true;
        settings.CheckCharacters = true;
        settings.NewLineChars = "\r\n";
        // vbCr & vbLf 

        // Write as UTF-8 with indentation 
        using (System.Xml.XmlWriter w = System.Xml.XmlWriter.Create(System.IO.Path.Combine(strDirectory, strTable + ".xml"), settings)) {

            // Strip out timezone 
            foreach (DataTable dt in ds.Tables) {

                foreach (DataColumn dc in dt.Columns) {

                    if (object.ReferenceEquals(dc.DataType, typeof(DateTime))) {
                        dc.DateTimeMode = DataSetDateTime.Unspecified;
                    }

                }

            }

            ds.Tables[0].WriteXml(w, XmlWriteMode.IgnoreSchema);
            w.Flush();
            w.Close();
        }
        // w 

    }
    // ds 

}
// ExportTable 
```

VB.NET 原文：

```
 Public Sub ExportTable(strDirectory As String, dtt As DataTable)
        Using ds As New System.Data.DataSet()
            Dim strTable As String = dtt.TableName

            ds.Tables.Add(dtt)
            ds.DataSetName = strTable

            ' Move data to attributes
            For Each dt As DataTable In ds.Tables

                For Each dc As DataColumn In dt.Columns
                    dc.ColumnMapping = MappingType.Attribute
                Next dc

            Next dt

            Dim settings As New System.Xml.XmlWriterSettings()
            settings.Indent = True
            'settings.Encoding = System.Text.Encoding.GetEncoding("ISO-8859-1")
            settings.Encoding = System.Text.Encoding.UTF8
            settings.CloseOutput = True
            settings.CheckCharacters = True
            settings.NewLineChars = vbCrLf ' vbCr & vbLf

            ' Write as UTF-8 with indentation
            Using w As System.Xml.XmlWriter = System.Xml.XmlWriter.Create(System.IO.Path.Combine(strDirectory, strTable & ".xml"), settings)

                ' Strip out timezone
                For Each dt As DataTable In ds.Tables

                    For Each dc As DataColumn In dt.Columns

                        If dc.DataType Is GetType(DateTime) Then
                            dc.DateTimeMode = DataSetDateTime.Unspecified
                        End If

                    Next dc

                Next dt

                ds.Tables(0).WriteXml(w, XmlWriteMode.IgnoreSchema)
                w.Flush()
                w.Close()
            End Using ' w

        End Using ' ds

    End Sub ' ExportTable 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T16:37:21.323

必须为每个 XML 属性分配一个值，该值包含在一对单引号或双引号中。纯文本中没有等价物来表示 NULL 值。一对没有值的引号表示空字符串与NULL值不同。因此，表示 NULL 属性的唯一方法是省略该属性。

这意味着您需要设置`AllowDBNull`为 false 并在 DataColumn 上分配一个合适的值`DefaultValue`，或者包括架构。

另请参阅[处理空值 (ADO.NET)。](http://msdn.microsoft.com/en-us/library/ms172138.aspx)，特别是解释行为的本节：

> 此外，以下规则适用于 DataRow.["columnName"] 空分配的实例：
> 
> 1.默认默认值是 DbNull.Value ，除了强类型空列，它是适当的强类型空值。
> 
> 2\. 在序列化为 XML 文件期间，永远不会写出 Null 值（如在“xsi:nil”中）。
> 
> 3.所有非空值，包括默认值，在序列化为 XML 时总是被写出。这与 XSD/XML 语义不同，其中空值 (xsi:nil) 是显式的，而默认值是隐式的（如果 XML 中不存在，验证解析器可以从关联的 XSD 模式中获取它）。DataTable 则相反：空值是隐式的，默认值是显式的。
> 
> 4\. 从 XML 输入读取的行的所有缺失列值都分配为 NULL。使用 NewRow 或类似方法创建的行被赋予 DataColumn 的默认值。
> 
> 5.IsNull 方法对 DbNull.Value 和 INullable.Null 都返回 true。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T15:53:44.727

尝试将列[DefaultValue](http://msdn.microsoft.com/en-us/library/system.data.datacolumn.defaultvalue.aspx)设置为有效的值

```
foreach (DataTable dt in ds.Tables) {

        foreach (DataColumn dc in dt.Columns) {
            dc.ColumnMapping = MappingType.Attribute;
           //If type is DataType string
           dc.DefaultValue = String.Empty;
        } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-29T18:23:55.030

两点：

首先：ExportTable() 抛出异常：“DataTable 已经属于另一个 DataSet。” 当我执行时：

```
ds.Tables.Add(dtt) 
```

我通过制作表格的本地副本来纠正这个问题：

```
Dim dtX As DataTable = dtt.Copy
ds.Tables.Add(dtX)
ds.DataSetName = strTable 
```

这运作良好。

第二：如果您使用XML创建动态SQL语句，则无需担心在XML导出中省略了NULL值的列/字段。只需遍历 XML 记录中的 a 属性，构建 INSERT 或 UPDATE 语句并执行连接命令。这比使用 DataSet 更快。

对于 INSERT，它有一个缺点。如果通过递增标识列创建主键，ADO.Net 数据集将返回它。动态 SQL 将需要一个 SELECT 语句来检索它。

此外，混淆您的代码也是个好主意。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-11T00:23:12.130

这是一个有点旧的线程，但也许它可以帮助某人：
如果您不经常编写大型 xml 文件（可以导出设置或类似的东西），您可以使用下面的函数，否则最好使用 cutom xml 模式。

```
private static void addEmptyElementsToXML(DataSet dataSet)
{
    foreach (DataTable dataTable in dataSet.Tables)
    {
        foreach (DataRow dataRow in dataTable.Rows)
        {
            for (int j = 0; j < dataRow.ItemArray.Length; j++)
            {
                if (dataRow.ItemArray[j] == DBNull.Value)
                    dataRow.SetField(j, string.Empty);
            }
        }
    }
} 
```

用法：

```
using(DataTable dTable = ..something..)
using(DataSet dS = new DataSet())
using(XmlTextWriter xmlStream = new XmlTextWriter("FILENAME.XML", Encoding.UTF8))
{
    //set xml to be formatted so it can be easily red by human
    xmlStream.Formatting = Formatting.Indented;
    xmlStream.Indentation = 4;

    //add table to dataset
    dS.Tables.Add(dTable);

    //call the mentioned function so it will set all DBNull values in dataset
    //to string.Empty
    addEmptyElementsToXML(dS);

    //write xml to file
    xmlStream.WriteStartDocument();
    dS.WriteXml(xmlStream);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-25T07:43:18.593

我一直在寻找使用 DataSet.WriteXML() 将空字段写入 XML 的解决方案。我发现以下以性能优化的方式工作。为了您的方便，我创建了一个函数。通过调用以下函数并替换表，一个接一个地更改您的数据集表。

```
private DataTable GetNullFilledDataTableForXML(DataTable dtSource)
{
    // Create a target table with same structure as source and fields as strings
    // We can change the column datatype as long as there is no data loaded
    DataTable dtTarget = dtSource.Clone();
    foreach (DataColumn col in dtTarget.Columns)
        col.DataType = typeof(string);

    // Start importing the source into target by ItemArray copying which 
    // is found to be reasonably fast for null operations. VS 2015 is reporting
    // 500-525 milliseconds for loading 100,000 records x 10 columns 
    // after null conversion in every cell 
    // The speed may be usable in many circumstances.
    // Machine config: i5 2nd Gen, 8 GB RAM, Windows 7 64bit, VS 2015 Update 1
    int colCountInTarget = dtTarget.Columns.Count;
    foreach (DataRow sourceRow in dtSource.Rows)
    {
        // Get a new row loaded with data from source row
        DataRow targetRow = dtTarget.NewRow();
        targetRow.ItemArray = sourceRow.ItemArray;

        // Update DBNull.Values to empty string in the new (target) row
        // We can safely assign empty string since the target table columns
        // are all of string type
        for (int ctr = 0; ctr < colCountInTarget; ctr++)
            if (targetRow[ctr] == DBNull.Value)
                targetRow[ctr] = String.Empty;

        // Now add the null filled row to target datatable
        dtTarget.Rows.Add(targetRow);
    }

    // Return the target datatable
    return dtTarget;
} 
```

# c# - 读取一个 asp 页面，错误 401 未经授权

> ID：10231624
> 
> 赞同：0
> 
> 时间：2012-04-19T15:36:22.843
> 
> 标签：c#, asp.net, .net, html

尝试阅读 Intranet asp 页面，以获取所有 HTML 代码，因为我需要在其中搜索内容。我可以获取外部页面以将 html 代码加载到字符串中，但不能获取 Intranet 页面，我得到错误 401 未经授权。这适用于外部页面：

```
 HttpWebRequest webreq = (HttpWebRequest)WebRequest.Create(@"http://site/main.asp");
        webreq.Method = "GET";
        webreq.Credentials = System.Net.CredentialCache.DefaultCredentials;
        WebResponse webres = webreq.GetResponse();
        StreamReader sr = new StreamReader(webres.GetResponseStream(), System.Text.Encoding.UTF8);
        string s = sr.ReadToEnd();
        sr.Close();
        webres.Close(); 
```

这仍然不起作用（至少不适用于 Intranet 站点）其他站点很好。谁能明白为什么？

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:41:39.810

您需要将凭据添加到您的 Web 客户端。您在 Intranet 页面上收到 401，因为您的 Web 客户端未对自身进行身份验证。

# php - CakePHP 方法来删 除连接表中的所有关系

> ID：10231625
> 
> 赞同：0
> 
> 时间：2012-04-19T15:36:23.087
> 
> 标签：php, cakephp

在我的应用程序中，我有一个帖子和主题系统，并使用名为 Topic_Post 的连接表将主题附加到帖子。为了确保当用户编辑或删除帖子的主题时高效且干净，我想在重新添加或添加新关系之前删除所有关系。**注意：我的意思是从帖子中附加或分离它们，而不是实际删除话题**

这样做的最佳方法是什么？我需要将 post id 传递给该方法，然后在 Topic Post 表中查找具有匹配 post_id 的所有记录，然后从表中删除这些记录。

这些是关联：

```
Post.php
class Post extends AppModel
{
    public $name = 'Post';

    public $belongsTo = 'User';

    public $hasMany = array('Answer');

    // Has many topics that belong to topic post join table... jazz
    public $hasAndBelongsToMany = array(
        'Topic' => array('with' => 'TopicPost')
    );
}

Topic.php
class Topic extends AppModel
{
    public $hasMany = array(
        'TopicPost'
    );
}

TopicPost.php
class TopicPost extends AppModel {
    public $belongsTo = array(
        'Topic', 'Post'
    );
} 
```

在 Topiic_Post 表中，我将两个外键设为唯一以防止重复。

`id`int(11) unsigned NOT NULL auto_increment, `topic_id`int(11) NOT NULL, `post_id`int(11) NOT NULL, PRIMARY KEY ( `id`), UNIQUE KEY `unique_row`( `topic_id`, `post_id`)

到目前为止，方法是这样的：

```
function cleanPostTopics ($postId) {

$post = $this->find('first', 'condition'=>array('Post.id'=>$postId));

} 
```

然后我将如何使用它`$post`来查找 TopicPost 表中的所有记录，然后删除它们！请记住承认此方法在其中一个模型中，并且需要能够根据我的关联与其他模型进行对话。

值得注意的是，我使用以下方法插入/附加主题，如果这破坏了显然应该防止重复发生的任何内置 CakePHP 逻辑？[http://pastebin.com/d2Kt8D2R](http://pastebin.com/d2Kt8D2R)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:45:58.687

Cake 会自动为您处理这个问题。当您删除帖子或主题时，它应该删除所有 HABTM 相关数据。

对于 hasOne 和 hasMany 关系，您可以`'dependent' => true`在关系中定义在删除记录时删除关联数据。

```
// When a Post is deleted, the associated Answer records will be as well
public $hasMany = array(
  'Answer' => array(
    'dependent' => true
  )
); 
```

您可以在此处阅读有关它的更多信息：

*   [http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html)
*   [http://book.cakephp.org/2.0/en/models/deleting-data.html](http://book.cakephp.org/2.0/en/models/deleting-data.html)

根据您的设置，您可以像这样删除相关的 HABTM 数据：

```
function cleanPostTopics ($postId) {

  $post = $this->find('first', 'condition'=>array('Post.id'=>$postId));
  // find all HABTM with that post id
  $topicsPost = $this->TopicPost->deleteAll(array(
      'TopicsPost.post_id' => $postId
  ), false);

} 
```

# .net - 在 WPF 中将像素转换为 CM

> ID：10231627
> 
> 赞同：4
> 
> 时间：2012-04-19T15:36:24.367
> 
> 标签：.net, wpf

我有

```
?(New System.Windows.LengthConverter()).ConvertFrom("1cm")
37.795275590551178 {Double}
    Double: 37.795275590551178 
```

所以，在`1cm`我有`37.795275590551178px`WPF 像素。

我的问题是如何从 转换`px`回`cm`？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-19T17:08:03.203

在 WPF 中，我们处理 DeviceIndependentUnits（DIU，命名，通常为“px”），该单位不依赖于设备或屏幕分辨率。

实际上 .NET Framework (4) 中使用的因子，分别为 'px'、'in'、'cm' 和 'pt'

```
// System.Windows.LengthConverter
private static double[] PixelUnitFactors = new double[]
{
    1.0,
    96.0,
    37.795275590551178,
    1.3333333333333333
}; 
```

所以，我们有

```
private struct PixelUnitFactor
{
    public const double Px = 1.0;
    public const double Inch = 96.0;
    public const double Cm = 37.7952755905512;
    public const double Pt = 1.33333333333333;
}    

public double CmToPx(double cm)
{
    return cm * PixelUnitFactor.Cm;
}

public double PxToCm(double px)
{
    return px / PixelUnitFactor.Cm;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-19T16:17:03.033

这是使用英寸的计算机行业的问题。每英寸有 96 个像素。每英寸有 2.54 厘米。37.795275590551178 (1 cm) * 2.54 = 95.9999999999997 像素（我们称之为 96）。

您始终可以为 37.795275590551178 创建一个应用程序级别常量，或者您可以使用英寸并来回转换英寸和厘米...

对于将 px 转换为 cm，您可以将 px 转换为英寸到 cm，或者您可以使用上述常数并除以它以获得厘米。

96 像素 / 37.795275590551178 = 2.54 厘米。

这是关于它的另一篇 SO 帖子： [厘米到像素](https://stackoverflow.com/questions/4767617/centimeter-to-pixel)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-07-13T22:30:07.037

我遇到了类似的麻烦，但 de WPF 进行计算以将逻辑像素调整为物理像素。也许这段代码可以帮助你。

```
public struct PixelUnitFactor
{
    public const double Px = 1.0;
    public const double Inch = 96.0;
    public const double Cm = 37.795275590551178;
    public const double Pt = 1.33333333333333;
}

public struct CmUnitFactor
{
    public const double Px = 0.0264583333333333;
    public const double Inch = 2.54;
    public const double Cm = 1.0;
    public const double Pt = 0.035277778;
}

public struct InUnitFactor
{
    public const double Px = 0.0104166666666667;
    public const double Inch = 1.0;
    public const double Cm = 0.3937007874015748;
    public const double Pt = 0.013888888888889;
}

public struct PtUnitFactor
{
    public const double Px = 0.75;
    public const double Inch = 72.0;
    public const double Cm = 28.346456693;
    public const double Pt = 1.0;
}

public class FormsEvent
{

    //FUNCIONES PARA CONVERTIR PIXELS EN CENTÍMETROS, PULGADAS Y PUNTOS
    public static double Convertir_PxToCm(double px) { return px / PixelUnitFactor.Cm; }
    public static double Convertir_PxToIn(double px) { return px / PixelUnitFactor.Inch; }
    public static double Convertir_PxToPt(double px) { return px / PixelUnitFactor.Pt; }

    //FUNCIONES PARA CONVERTIR CENTÍMETROS EN PIXELS, PULGADAS Y PUNTOS
    public static double Convertir_CmToPx(double cm) { return cm / CmUnitFactor.Px; }
    public static double Convertir_CmToIn(double cm) { return cm / CmUnitFactor.Inch; }
    public static double Convertir_CmToPt(double cm) { return cm / CmUnitFactor.Pt; }

    //FUNCIONES PARA CONVERTIR PULGADAS EN PIXELS, CENTÍMETROS Y PUNTOS
    public static double Convertir_InToPx(double inches) { return inches / InUnitFactor.Px; }
    public static double Convertir_InToCm(double inches) { return inches / InUnitFactor.Cm; }
    public static double Convertir_InToPt(double inches) { return inches / InUnitFactor.Pt; }

    //FUNCIONES PARA CONVERTIR PUNTOS EN PIXELS, PULGADAS Y CENTÍMETROS
    public static double Convertir_PtToPx(double pt) { return pt / PtUnitFactor.Px; }
    public static double Convertir_PtToCm(double pt) { return pt / PtUnitFactor.Cm; }
    public static double Convertir_PtToIn(double pt) { return pt / PtUnitFactor.Inch; } 
```

# debugging - Symfony2 - 我如何从 Symfony 调试工具栏中找到模板？

> ID：10231628
> 
> 赞同：1
> 
> 时间：2012-04-19T15:36:26.237
> 
> 标签：debugging, symfony, toolbar

我想看看使用什么树枝模板来呈现当前页面。

Symfony 调试工具栏是否已经这样做了，而我错过了它？请求面板关闭。

是的，我知道我可以在控制器中查找它，但是它可以被覆盖等等。我想知道实际发生了什么。

如果它还没有，怎么可能做到这一点？

# excel - PSD文件的自定义批处理（Adobe Photoshop / Adob e InDesign）

> ID：10231635
> 
> 赞同：0
> 
> 时间：2012-04-19T15:36:55.173
> 
> 标签：excel, actionscript, photoshop, psd, adobe-indesign

我有大约 200 个 Photoshop 模板，我希望能够分别向每个模板添加某些图像和文本。图像的路径以及文本在一个有 200 行的 excel 文件中给出。所以基本上是 template1应该包含来自 row1 的图像和文本，来自 row2 的模板 2 等等。有人可以指导我正确的方向吗？

谢谢你，晚安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T19:22:01.113

*根据我上面的评论：*

我不认为你可以直接从 excel 到 photoshop，所以首先将 excel 数据导出为 XML 或 CSV 左右。然后在从 excel 加载 XML/CSV 后，使用基于 javascript 的 Photoshop 脚本进行批处理（请参阅[Photoshop 脚本](http://www.adobe.com/devnet/photoshop/scripting.html)）

祝你好运！:)

# asp.net - ASP.NET 本地化

> ID：10231639
> 
> 赞同：0
> 
> 时间：2012-04-19T15:37:01.810
> 
> 标签：asp.net

一个简单的问题。我有一个本地化网站（带有 .resx 文件），当我需要插入本地化文本时，我使用如下代码：

```
<asp:Localize Text="<%$ Resources: MyResource, Default_BannerHomeTitle %>" runat="server">SOME_TEXT_HERE_OR_NOT?</asp:Localize> 
```

问题是是否有人知道 asp:Localize 标记 -> “SOME_TEXT_HERE_OR_NOT”之间的文本有什么用处？

真正的价值来自 .resx 文件和文本“SOME_TEXT_HERE_OR_NOT?” 页面渲染时明显被删除。

此文本是否在某些情况下使用？还是从未使用过？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:38:52.897

您设置的内联`Text`属性和您在标签之间键入的文本实际上是一回事。您应该使用其中一个，两者都设置没有意义。

`Localize`控件只是控件的子类`Literal`。从技术上讲，您在标签之间键入的文本被解释为它自己的单独`Literal`控件，即“已解析的子对象”。创建`Localize`控件时，其`Text`属性设置为子对象的`Text`属性值。但是，`Text`在控件上显式设置属性`Localize`将优先于在标记之间键入的任何内容。

# cakephp - CakePHP $this->Form->end('按钮文本'); 与某物在同一条线上

> ID：10231640
> 
> 赞同：1
> 
> 时间：2012-04-19T15:37:02.680
> 
> 标签：cakephp

我有一个简单的 cakephp 表单，希望“保存翻译”按钮位于链接的左侧，该链接取消并将用户返回到索引，但我似乎无法让它工作。它总是将取消链接放在按钮下方。

我现在拥有的代码：

```
<tr>
    <td>
        <?php echo $this->Form->end('Save Translation'); ?>
    </td>
    <td>
        <?php echo $html->link('Cancel', array('action' => 'index')); ?>
    </td>
</tr> 
```

我试过的代码：

```
echo $this->Form->end('Save Translation',array('label'=>'Save Translation','div' => false)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T16:07:15.757

试试这个：

```
<?php
    echo $this->Form->create();
    echo $this->Form->input('name');
    echo $this->Form->submit('Submit', 
        array('after' => $this->Html->link('Cancel', array('action' => 'index')))
    );
    echo $this->Form->end();
?> 
```

# c# - 当我尝试在 C# 中创建 .accdb 文件时出错

> ID：10231643
> 
> 赞同：0
> 
> 时间：2012-04-19T15:37:13.257
> 
> 标签：c#, ms-access, adox

这是我的代码，如果找不到，它会创建一个 .accdb 文件：

```
Catalog cat = new CatalogClass();
string createStr = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=|DataDirectory|/saveDB.accdb;";
cat.Create(createStr);
Table tbl = new Table();
tbl.Name = "saveDB";
tbl.Columns.Append("ID", DataTypeEnum.adGUID);
tbl.Columns.Append("Tensiune", DataTypeEnum.adDouble);
tbl.Columns.Append("Frecventa", DataTypeEnum.adDouble);
tbl.Columns.Append("Rezistenta", DataTypeEnum.adDouble);
tbl.Columns.Append("Inductanta", DataTypeEnum.adDouble);
tbl.Columns.Append("Capacitate", DataTypeEnum.adDouble);
tbl.Columns.Append("Elemente", DataTypeEnum.adVarWChar, 25);
tbl.Columns.Append("Tip", DataTypeEnum.adVarWChar, 25);
cat.Tables.Append(tbl);
System.Runtime.InteropServices.Marshal.FinalReleaseComObject(tbl);
System.Runtime.InteropServices.Marshal.FinalReleaseComObject(cat.Tables);
System.Runtime.InteropServices.Marshal.FinalReleaseComObject(cat.ActiveConnection);
System.Runtime.InteropServices.Marshal.FinalReleaseComObject(cat); 
```

但是当我在程序中运行它时，我得到了这个运行时错误：

```
System.Runtime.InteropServices.COMException (0x80004005): Not a valid file name.
   at ADOX.CatalogClass.Create(String ConnectString) 
```

我不知道文件名有什么问题，所以如果有人有任何想法，请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T16:29:51.407

好吧，我终于找到了一个基于 Killercam 在评论中发布的想法的解决方法，我会在这里发布，以防有​​人需要它。像这样构建连接字符串：

```
Catalog cat = new CatalogClass();
string cntPath = System.IO.Directory.GetCurrentDirectory();
string createStr = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + cntPath + "\\saveDB.accdb;";
cat.Create(createStr); 
```

# asp.net-mvc - 而不是会话变量，我可以将我的临时数据保存在 mvc 中？

> ID：10231644
> 
> 赞同：0
> 
> 时间：2012-04-19T15:37:16.923
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model-view-controller

我创建了一个 mvc3 应用程序。当前将提交表单值保存`Session`到其中，因为在将更改保存到数据库之前我需要做一些事情。

有没有其他像在 mvc 中存储临时数据的好方法`ViewState`？

每次输入数据以及单击提交按钮时，我都会将表单输入值保存到 Session 变量中。

每次提交后，我都会用新的附加值填充我的会话变量，并将所有这些值显示到 webgrid 中。

完成插入后，最后单击更新按钮，该按钮从 webgrid 获取所有值并作为参数传递给一个存储过程。

```
Now here i want to achieve 2 things
1.need to save all inserted data as clicked on submit it gets refresh all time.
so need to save all previous data to.
2.currently using session variable which sets to webgrid to show data into webgrid and once done with insertion passing those values to stored procedure. 
```

所以需要知道任何其他保存数据的好方法。

```
Else can use javascript to do this all on client side. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T16:34:07.027

您应该避免尝试使无状态网络看起来有状态的方案，原因有两个。

首先，Session 不会避免往返，它只是名义上与在数据库中存储值不同。是的，获取内存比从 SQL 获取更快，但这不能很好地扩展——要扩展（超过 1 个服务器），您必须添加组件和跃点，从而降低收益并显着增加复杂性。

其次，会话值很可能会进入数据库，所以为什么不首先从那里开始呢。

第三（是的，另一个），Session 不一定比隐藏的表单字段更值得信任。

在 13 年中，我看到 session 几乎完全用于错误的事情——开发人员为了方便而回归使用 session，后来又后悔了（替换它们并必须维护他们的代码的开发人员也是如此）。

简而言之，使用数据库来存储这些信息，并巧妙地了解如何获取和缓存它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T15:50:28.523

您可以使用 TempData ( [http://msdn.microsoft.com/en-us/library/system.web.mvc.controllerbase.tempdata.aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.controllerbase.tempdata.aspx) )，但要知道它只从一个请求持续到下一个请求。

```
TempData["someKey"] = ""; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T16:20:53.350

如果您需要跨帖子保存数据，Session 是合适的地方。如果您需要将数据写入数据库，则模型应在发布时处理数据。在您的控制器中：

```
[HttpPost]
public ActionResult Index(YourModel model)
{
    if (ModelState.IsValid)
    {
        model.SaveToDataBase();
        return View("Success");
    }
    return View("Index", model);
} 
```

然后在模型中：

```
[Serializable]
public class YourModel
{
    [Required]
    public string YourData { get; set; }

    public void SaveToDataBase()
    {
         //TODO - add code to call stored procedure with data posted to model
    }
} 
```

# javascript - 在 Javascript InDesign 中上传文件的 POST 请求，可扩展

> ID：10231646
> 
> 赞同：4
> 
> 时间：2012-04-19T15:37:20.433
> 
> 标签：javascript, file-upload, scripting, http-post, adobe-indesign

我正在尝试使用内置 JavaScript 技术的 InDesign 实现文件上传。

基本上，该脚本将 InDesign 文档导出为 PDF，然后尝试将文件上传到网络服务器。对于上传，我使用处理 HTTP 请求的[可扩展插件。](http://www.extendables.org)

我能够发出一些基本的 GET 和 POST 请求，但我无法发出文件上传的 POST 请求。

这是基本代码：

```
 var req = new http.HTTPRequest("POST", "http://mysite.com);

   var type = "application/pdf";
   var boundary = "--012345678910";

   var myTitle = "\r\nContent-Disposition: form-data; name=\"title\"\r\n\r\n"+title+"\r\n"+boundary;
   var myFile= "\r\nContent-Disposition: form-data; name=\"file\"; filename=\""+pdfFileName+"\"\r\nContent-Type: "+type+"\r\n\r\n"+file_contents+"\r\n"+boundary+"--";

   var myData = boundary + myTitle + myFile;
   req.content(myData);    

   req.header("User-Agent", "MyUserAgent");
   req.header("Content-Type", "multipart/form-data; boundary=012345678910");
   // make request
   res = req.do(); 
```

我能够从 Ruby 脚本和一些 REST 客户端上传具有相同标题的相同文件等。

当我查看到达服务器的内容时​​，似乎表单数据不包含在 post 参数中。

所以我的问题是，是否有人曾使用 InDesign JavaScript 和可扩展插件成功上传文件。可扩展文档并不是很有帮助，也许我遗漏了一些东西。我也对替代品持开放态度。

# pdf - 在 PDF Itextsharp 中读取表格

> ID：10231647
> 
> 赞同：0
> 
> 时间：2012-04-19T15:37:27.110
> 
> 标签：pdf, itextsharp, itext

我试图在 .NET 应用程序中使用 Itextsharp 阅读 PDF。我能够成功地阅读单个单词。我现在面临的挑战是读一张桌子。我有一个这样的表结构：

![在此处输入图像描述](../Images/f35f80d6928087103523385feacc3ea8.png)

请注意，这里的一些列名是两行的。例如部门代码和员工识别号。

因此，如果员工属于“人力资源”部门，我的要求是阅读员工识别号和工资。为此，我必须检查 PDF 文件中是否存在名为“部门代码”的列。

当我使用 iTextsharp 阅读此表时，会发生什么让我们说“部门代码”列的“部门”部分位于位置 1，但“代码”位于第 5 位。这是因为该列显示为两行在我阅读本专栏的“代码”部分之前，pdf 中是否存在其他四个词。我完全被困在这个:(

任何人都知道如何确保存在列名“部门代码”并从此表中读取相应的值。

感谢你的帮助！

问候， 贾里尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T16:01:16.523

不幸的是，PDF 实际上没有“表格”的概念。看起来像表格的东西只是一堆任意文本，周围恰好有线条。大多数 PDF 创建库允许您从“表格”创建内容，但最终会将它们变成文本和不相关的行。此外，您看到的“空白单元格”实际上可能根本没有文本（尽管它可能是一个空格）。

对于这种事情，您几乎只需要提出一些特定于您的文档的任意规则。您*可以*尝试计算相对于文本存在的行并尝试以更合乎逻辑的格式重建表格，但您将很难做到这一点。

# php - 使用新值更新 mysql 文本字段

> ID：10231652
> 
> 赞同：1
> 
> 时间：2012-04-19T15:37:35.363
> 
> 标签：php, mysql

我有一个包含多个字符串的开始日期、结束日期和文本字段的数据库，每个字符串都以开始和结束日期范围内的 mysql 格式日期开头。

假设我想用新的开始日期和新的结束日期复制记录，我需要更新这些字符串。那里没问题。我从旧记录中提取它们并在 foreach 循环中使用新的日期范围进行更新。除了一些字符串可以有相同的日期。

```
$data_acc = explode(';', $record['details_accommodation'], -1);

foreach($data_acc as $row_acc) 
{
   list($day,$name,$sgl,$dbl,$tpl,$nights,$status) = explode(',', $row_acc);
} 
```

如何在循环中检测所有相同的日期（`$day`）并使用新值更新而不自动递增？

# android - 如何加入 MediaStore.Audio.Media

> ID：10231659
> 
> 赞同：0
> 
> 时间：2012-04-19T15:37:52.943
> 
> 标签：android, mediastore

嗨，我使用合并光标在我的列表视图中显示数据结果，我添加了一个索引器，它的所有工作正常，但我注意到 az 可以向我显示外部数据，之后再次 az 但现在是内部数据，所以我的索引“有效”，但不是我希望的那样，我知道合并游标无法排序，所以我想知道我可以做一个 rawquery 吗？加入 MediaStore.Audio.Media.INTERNAL_CONTENT_URI 和 MediaStore.Audio.Media.EXTERNAL_CONTENT_UR ?? 如何？我想加入，然后按 Song ASC 排序。或 MediaStore.Audio.Media.DEFAULT_SORT_ORDER 或我如何将数组列表或其他集合转换为光标？

当前代码：

```
private Cursor getInternalAudioCursor(String selection,
    String[] selectionArgs) {
return this.getContentResolver().query(
        MediaStore.Audio.Media.INTERNAL_CONTENT_URI,
        INTERNAL_COLUMNS,
        selection,
        selectionArgs,
        MediaStore.Audio.Media.DEFAULT_SORT_ORDER); 
```

}

```
private Cursor getExternalAudioCursor(String selection,
    String[] selectionArgs) {
return this.getContentResolver().query(
        MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,
        EXTERNAL_COLUMNS,
        selection,
        selectionArgs,
        MediaStore.Audio.Media.DEFAULT_SORT_ORDER); 
```

}

```
Cursor c = new MergeCursor(new Cursor[] {
        getExternalAudioCursor(selection, argsArray),
        getInternalAudioCursor(selection, argsArray)});
startManagingCursor(c); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:48:39.997

你不能这样做，`rawQuery`因为

*   `MediaStore`（实际上`MediaProvider`）是一个`ContentProvider`，而不是一个`SQLiteDatabase`（虽然它在那个抽象层之下） - 它不会故意提供这些 SQLite 操作，因为除了 SQLite 数据库之外，您还可以拥有其他支持 ContentProvider 的东西。
*   `internal`并且`external`是单独的数据库文件并单独访问。您无法构建引用另一个文件的查询（除非您附加它们，因为您无权访问该低级别，所以您不能附加它们）

您可以构建一个[MatrixCursor](http://developer.android.com/reference/android/database/MatrixCursor.html)，在其中将两个源游标的数据按排序顺序放置。

# powershell - 如何从 VBS 以管理员身份执行 powershell 命令？

> ID：10231665
> 
> 赞同：0
> 
> 时间：2012-04-19T15:38:13.693
> 
> 标签：powershell, vbscript, permissions, windows-server-2008

我目前有一个 VBScript，它允许我调用任意 powershell 命令，其中包括整个 powershell 脚本。当我打电话给他们时，由于注册表限制，我无法设置执行策略。意思是，powershell 没有以管理员身份运行。

我怎样才能改变这个？

我相信以下是调用 powershell.exe 的 VBScript 部分

```
cmd = "C:\Windows\System32\WindowsPowerShell\v1.0\powershell.exe -OutputFormat text -EncodedCommand " & b64 & " > " & logstd & " 2> " & logerr 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:41:52.150

有多种方法可以让进程运行提升，但对于这个用例，我认为你应该只在命令行中指定执行策略：

```
cmd = "C:\Windows\System32\WindowsPowerShell\v1.0\powershell.exe -ExecutionPolicy unrestricted -OutputFormat text -EncodedCommand " & b64 & " > " & logstd & " 2> " & logerr 
```

# sql - JOIN 单独在两个表上工作，但不能一起使用

> ID：10231671
> 
> 赞同：0
> 
> 时间：2012-04-19T15:38:27.927
> 
> 标签：sql, postgresql, join, postgresql-8.4

编辑：没关系，想通了，如果您有兴趣，请在下面回答。

使用 Postgresql 8.4。

这是我需要运行的查询的格式（名称和面孔已更改以保护我的妄想症。如有必要，可以提供它们，但这是我的查询的直接副本，只需简单地替换模式、表和列名）：

```
SELECT
    t1.field,
    SUM(v3.quantity) as current_qty
FROM
    schema1.child_table t1
        JOIN (SELECT DISTINCT t1key FROM schema2.child_transaction t2 WHERE datefield BETWEEN '2012-04-01' AND '2012-04-19') t2 USING (t1key)
        LEFT JOIN schema1.child_current_status v3 ON t1.t1key = v3.t1key
        JOIN schema1.parent_table t4 ON t1.t4key = t4.t4key
WHERE
    t4.criteria = 763
GROUP BY
    t1.field 
```

...基本上，我需要`field`from `child_table`when`criteria`匹配我在 中提供的数据，并且在请求期间`parent_table`至少有一项相关交易。`child_transaction`如果视图中有数量`child_current_status`，我们也需要这些数量。

`t1.field`可以认为是人类可读的等价于数字键`t4.criteria`。

`child_current_status`我的问题是，即使那里有数据，所提供的查询也无法提供数量数据。

*编辑：澄清一下，上面的查询返回`field, NULL`，它应该返回的位置`field, current_qty`*

问题与`t2`子查询有关，因为当我将其更改为 a 时`LEFT JOIN`，它会返回相关的数量数据：

```
SELECT
    t1.field,
    SUM(v3.quantity) as current_qty
FROM
    schema1.child_table t1
        LEFT JOIN (SELECT DISTINCT t1key FROM schema2.child_transaction t2 WHERE datefield BETWEEN '2012-04-01' AND '2012-04-19') t2 USING (t1key)
        LEFT JOIN schema1.child_current_status v3 ON t1.t1key = v3.t1key
        JOIN schema1.parent_table t4 ON t1.t4key = t4.t4key
WHERE
    t4.criteria = 763
GROUP BY
    t1.field 
```

*编辑：此修改后的查询返回，但无论在请求的时间段内`field, current_qty`是否有交易都会这样做`child_transaction`*

...我所做的只是将第一个 JOIN 转换为 LEFT JOIN，然后该查询返回`child_current_status`. 如果我将 更改`child_current_status`为 INNER JOIN，则查询不会返回任何内容。将第一个 JOIN 设置为 LEFT JOIN 的问题在于，我需要它仅在子查询返回数据时才返回结果，在这种情况下是针对请求的时间段。

为了搅浑水，它适用于*某些* `t4.criteria`人，763 只是它失败的一个。

我在这里想念什么？

* * *

简短版本：从上面的第一个查询中，当第一个 JOIN 是一个 INNER JOIN 时，它会导致 LEFT JOIN 什么都不返回。当它是 LEFT JOIN 时，LEFT JOIN`child_current_status`返回正确的数据，但这否定了第一个 JOIN 的目的。

*编辑：我尝试将 LEFT JOIN 移动到 FROM 子句的末尾，在 INNER JOIN 后面，没有任何变化*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T18:26:02.683

呃，没关系，我想通了，查询工作正常，这里没有足够的数据让其他人想通。基本上， 中的一个孩子有一笔交易， 中的`child_table`其他孩子有当前数量`child_table`。因此，该查询适当地指示在指定父级的指定时间内有交易的任何子级没有当前数量。

出现问题是因为在处理此查询的结果时，我返回并询问与*所有*孩子相关的当前数据（而不仅仅是那些具有相关交易的数据，就像我应该拥有的那样），并且即使在此查询（正确) 告诉我没有。

这里没什么好看的，离开。

# sql - 如何关联两个表中的多行？

> ID：10231672
> 
> 赞同：2
> 
> 时间：2012-04-19T15:38:35.540
> 
> 标签：sql

我有两张桌子：

表格1：

```
id(int) | stuff(text)
-------------------------
1       | foobarfoobarfoo
2       | blahfooblah
3       | foo 
```

表2：

```
id(int) | otherstuff(text)
--------------------------
1       | foo
2       | bar
3       | blah 
```

table1 中的一行可以有多个 foo、bar 等。并且，table2 中的每一行可以出现在 table1 的多个行中。

这是保持这一点的更好方法。我应该像这样创建第三个表：

表3：

```
id_from2(int) | id_from1(int)
-----------------------------
1             | 1
1             | 2
1             | 3
2             | 1
3             | 2 
```

或者，我是否应该在 table1 和 table2 中添加一个数组类型的列来跟踪相同的信息？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T15:40:47.583

是的，使用*联结表*是在 RDBMS 中实现多对多关系的正确方法。

`table3`如有必要，您可以将更多属性添加到您的联结表（即）。例如，如果关系是*有序*的，您可以添加第三个字段来指定`(table1, table2)`组合的顺序。这是Stack Overflow 上一个答案的[链接](https://stackoverflow.com/a/2492349/335858)，它提供了一个非常详细的多对多表示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T15:40:37.063

这是一个标准[的多对多](http://www.tomjewett.com/dbdesign/dbdesign.php?page=manymany.php)设计，最灵活的解决方案是第三个表，如您所示，具有 id 关联。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T15:44:02.210

不能再同意了。您添加第三个表的设计是正确的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T15:40:49.563

关系表是关联多对多关系的最佳方式。你做得很好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T15:40:55.600

所以你想要多对多的关系？表 1 中的一个可以与 2 中的更多对象有关，反之亦然？是的，像你说的那样使用第三张桌子，这是一种最佳做法。还附加一个主键自动增量列，只是为了安全起见

# r - 根据距离在 psp 对象上绘制点

> ID：10231674
> 
> 赞同：0
> 
> 时间：2012-04-19T15:38:37.990
> 
> 标签：r, plot, line, spatstat

我有一个距离序列，我想在 spatstat 中绘制一条线。例子：

```
library(spatstat)

x <- c(0.3, 5)
y <- c(3, 1.2)

range.x <- c(0, max(x)+0.2)
range.y <- c(0, max(y)+0.2)

owin <- owin(range.x, range.y)
the.line <- psp(x0 = x[1],x1 = x[2],y0 = y[1],y1 = y[2], window = owin)

plot(the.line)    

seqs <- data.frame(name = seq(1,7), distance = c(0.12, 0.3, 0.45, 0.5, 0.7, 0.89, 0.95))
lengths <- seqs$distance*lengths.psp(the.line) 
```

我想以下列方式在用作标签的`lengths`基础上进行绘图（`the.line`使用Illustrator 添加的标签）：`seqs$name`

![在此处输入图像描述](../Images/0cf74e09da36b295a44ae7a3277d1fc1.png)

有人知道该怎么做吗？非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T16:01:29.833

该`text`功能将允许您向现有绘图添加文本。是否可以旋转文本取决于您使用的图形设备，请参阅`?par`“crt”和“srt”部分。另请参阅 'adj' 参数以`text`了解如何将文本置于行上方而不是遮挡行。

这一切都假设绘图是在基本图形中完成的。

运行上面的代码后，以下内容在 Windows 上对我有用（使用默认的 Windows 图形设备）：

```
x.new <- seqs$distance*x[2] + (1-seqs$distance)*x[1]
y.new <- seqs$distance*y[2] + (1-seqs$distance)*y[1]

tmp.x <- grconvertX(x, to='inches')
tmp.y <- grconvertY(y, to='inches')
theta <- atan2(diff(tmp.y),diff(tmp.x))*180/pi

text( x.new, y.new, seqs$name, adj=c(0,0), srt=theta ) 
```

# javascript - node.js：socket.io 与 express.static

> ID：10231688
> 
> 赞同：8
> 
> 时间：2012-04-19T15:39:34.830
> 
> 标签：javascript, node.js, express, socket.io

我正在运行以下 server.js：

```
module.exports = server;

var express = require('express');
var fs = require('fs');

var server = express.createServer();    

var port = 58000;
server.listen(port);

var io = require('socket.io').listen(server);

server.use(express.static('/', __dirname + '/../public'));

server.use(express.logger());

io.on('connection', function(client){
    console.log('new client connected ' + client);
    client.on('message', function(){
        console.log('client wants something');
    });
}); 
```

用于 /public 子文件夹中文件的简单 express.static 服务器，以及 socket.io 功能。使用此设置，对“socket.io.js”文件的任何请求都会失败，即

```
http://localhost:58000/socket.io/socket.io.js 
```

返回 404 错误（未找到文件）。静态文件服务器正常工作。如果我只是使用“http”模块而不是“express”（注释掉 express.static 和 express.logger 行）socket.io.js 服务正确。如何结合这两种功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T16:06:21.947

Express 3.0.0（最新）更改了它的 API。

[这](https://stackoverflow.com/a/10192084/1265207)是一个与您的问题非常相似的问题，它提供了响应。

```
var express = require('express')
  , http = require('http');

var app = express();
var server = http.createServer(app);
var io = require('socket.io').listen(server);

...

server.listen(8000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T15:50:31.463

确保您拥有 express.js 和 socket.io.js 的最新版本。我这边很好用

```
express@2.5.8 
socket.io@0.8.5 
node@0.6.5 
```

否则，解决方案可以是`var io = require('socket.io').listen(server);`在您的`server.use`

# ruby-on-rails - 如何使用client_side_validations/formtastic/paperclip validates_uniqueness_of :attachment_file_name？

> ID：10231691
> 
> 赞同：1
> 
> 时间：2012-04-19T15:39:41.047
> 
> 标签：ruby-on-rails, paperclip, formtastic, client-side-validation

我正在使用回形针作为模型实例的附件。当用户将附件文件名上传到客户端的系统时，我想验证该附件文件名的唯一性。目前，我正在实现 Paperclip 的 attachment_fingerprint 字段，该字段包含 MD5 校验和以验证附件的唯一性并`validates_uniqueness_of :attachment_fingerprint`在模型中，但我希望它生成的错误消息出现在客户端。

为了进行客户端验证，我使用了 client_side_validations gem，但看起来他们支持的唯一验证是`validates_presence_of :attachment`（见[这里](https://github.com/bcardarella/client_side_validations/wiki/Paperclip)）。

有没有人有任何尝试在客户端验证附件文件名的唯一性并能指出我正确方向的经验？

# iphone - 取消 ASIHTTPRequest - 初学者

> ID：10231695
> 
> 赞同：1
> 
> 时间：2012-04-19T15:39:58.347
> 
> 标签：iphone, objective-c, cocoa-touch, asihttprequest

我正在使用 ASIHTTPRequest 向 Web 服务器发送请求。一切正常。但是现在，当我调用该`grabURLInBackground`方法时，会向给定的 URL 发送一个请求。

但是现在，我需要在方法中取消请求（如停止发送，并停止从 URL 下载内容）`viewWillDissapear`。我怎样才能做到这一点 ？帮助

```
- (IBAction)grabURLInBackground:(id)sender
{
   NSURL *url = [NSURL URLWithString:@"http://allseeing-i.com"];
   ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
   [request setDelegate:self];
   [request startAsynchronous];
}

- (void)requestFinished:(ASIHTTPRequest *)request
{
   // Use when fetching text data
   NSString *responseString = [request responseString];

   // Use when fetching binary data
   NSData *responseData = [request responseData];
}

- (void)requestFailed:(ASIHTTPRequest *)request
{
   NSError *error = [request error];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T15:46:06.533

```
for (ASIHTTPRequest *req in ASIHTTPRequest.sharedQueue.operations)
{
    [req cancel];
    [req setDelegate:nil];
} 
```

这应该取消它..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T15:42:11.153

你可以做：

```
[request cancel] 
```

或者：

```
[request clearDelegatesAndCancel]; 
```

[从这里](http://allseeing-i.com/ASIHTTPRequest/How-to-use)的文档中可以看出。

我建议存储对该请求的引用，以便您可以在离开视图时取消它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T15:47:09.760

从 ASIHttp 文档中得到 thsi：

取消异步请求

要取消异步请求（使用 [request startAsynchronous] 启动的请求或在您创建的队列中运行的请求），请调用 [request cancel]。请注意，您不能取消同步请求。

请注意，当您取消请求时，该请求会将其视为错误，并将调用您的委托和/或队列的失败委托方法。如果您不希望这种行为，请在调用取消之前将您的委托设置为 nil，或者改用 clearDelegatesAndCancel 方法。

// 取消一个异步请求

[请求取消]

// 取消异步请求，

首先清除所有委托和块 [request clearDelegatesAndCancel]；当使用 ASINetworkQueue 时，当您取消单个请求时，所有其他请求都将被取消，除非队列的 shouldCancelAllRequestsOnFailure 为 NO（YES 为默认值）。

// 当此队列中的一个请求失败或被取消时，其他请求会继续运行

[队列集ShouldCancelAllRequestsOnFailure:NO];

// 取消队列中的所有请求

[队列取消所有操作];

# php - PHP - 无法从表单发送带有附件的电子邮件

> ID：10231699
> 
> 赞同：0
> 
> 时间：2012-04-19T15:40:08.503
> 
> 标签：php, email, file-upload, encoding

我在从 php MAIL 函数发送带有附件的电子邮件时遇到了一些问题。错误检查正常，但我无法上传文件并通过电子邮件发送。我正在使用我从网上下载的代码。只是似乎无法让它工作。有人有什么想法吗？任何帮助，将不胜感激。谢谢！要关注的网址：

[http://www.xsp.com/careers2.php](http://www.xsp.com/careers2.php)

```
if(array_key_exists('submit_check', $_POST)) {
                        if($_POST['first_name'] != NULL && $_POST['last_name'] != NULL && $_POST['e-mail'] != NULL && $_POST['address'] != NULL && $_POST['city'] != NULL && $_POST['zipcode'] != NULL && $_POST['country'] != NULL && $_POST['telephone'] != NULL && $_POST['first_name'] != '' && $_POST['last_name'] != '' && $_POST['e-mail'] != '' && $_POST['address'] != '' && $_POST['city'] != '' && $_POST['zipcode'] != '' && $_POST['country'] != '' || 
        (($_FILES["file"]["type"] == "application/doc") || ($_FILES["file"]["type"] == "application/pdf") || ($_FILES["file"]["type"] == "application/pdf")) && $_FILES["file"]["size"] < 100000) {                         
                            $first_name = preg_replace('/[^a-zA-Z0-9_]/s', '', $_POST['first_name']);
                            $last_name = preg_replace('/[^a-zA-Z0-9_]/s', '', $_POST['last_name']);
                            $city = preg_replace('/[^a-zA-Z0-9_]/s', '', $_POST['city']);
                            $state = preg_replace('/[^a-zA-Z0-9_]/s', '', $_POST['state']);
                            $zipcode = preg_replace('/[^a-zA-Z0-9_]/s', '', $_POST['zipcode']);
                            $email = $_POST['e-mail'];

                            // we'll begin by assigning the To address and message subject
                            $to = "myhiddenemailaddress@domain.com";

                            $subject = $form_title;

                           // get the sender's name and email address
                           // we'll just plug them a variable to be used later
                           //$from = stripslashes($_POST['fromname'])."<".stripslashes($_POST['fromemail']).">";
                           $form = $email;

                           // generate a random string to be used as the boundary marker
                           $mime_boundary = "==Multipart_Boundary_x".md5(mt_rand())."x";

                           // store the file information to variables for easier access
                           $tmp_name = $_FILES['file']['tmp_name'];
                           $type = $_FILES['file']['type'];
                           $name = $_FILES['file']['name'];
                           $size = $_FILES['file']['size'];

                           // here we'll hard code a text message
                           // again, in reality, you'll normally get this from the form submission
                           $message = "Here is your file: $name";

                           /*echo $message."<br />";
                           echo "TMP NAME:".$tmp_name."<br />";
                           echo $_FILES['file'];*/

                           // if the upload succeded, the file will exist
                           if (file_exists($tmp_name)){

                              // check to make sure that it is an uploaded file and not a system file
                              if(is_uploaded_file($tmp_name)){

                                 // open the file for a binary read
                                 $file = fopen($tmp_name,'rb');

                                 // read the file content into a variable
                                 $data = fread($file,filesize($tmp_name));

                                 // close the file
                                 fclose($file);

                                // now we encode it and split it into acceptable length lines
                                $data = chunk_split(base64_encode($data));
                             }

                             // now we'll build the message headers
                              $headers = "From: $from\r\n" .
                                 "MIME-Version: 1.0\r\n" .
                                 "Content-Type: multipart/mixed;\r\n" .
                                 " boundary=\"{$mime_boundary}\"";

                              // next, we'll build the message body
                              // note that we insert two dashes in front of the
                              // MIME boundary when we use it
                              $message = "This is a multi-part message in MIME format.\n\n" .
                                 "--{$mime_boundary}\n" .
                                 "Content-Type: text/plain; charset=\"iso-8859-1\"\n" .
                                 "Content-Transfer-Encoding: 7bit\n\n" .
                                 $message . "\n\n";
                                $message .="Application Form \n";
                                $message .="First Name: ".$first_name."\n";
                                $message .="Last Name: ".$last_name."\n";
                                $message .="E-Mail: ".$email."\n";

                                if ($_POST["company"] != NULL && $_POST["company"] != "") {
                                    $company = $_POST["company"];
                                    $message .= "COMPANY: ".$company."\n";
                                }

                                if ($_POST["position"] != NULL && $_POST["position"] != "") {
                                    $position = $_POST["position"];
                                    $message .= "POSITION: ".$position."\n";
                                }

                                if ($_POST["address"] != NULL && $_POST["address"] != "") {
                                    $address = $_POST["address"];
                                    $message .= "ADDRESS: ".$address."\n";
                                }

                                if ($city != NULL && $city != "") {
                                    $message .= "CITY: ".$city."\n";
                                }

                                if ($state != NULL && $state != "") {
                                    $message .= "STATE: ".$state."\n";
                                }

                                if ($zipcode != NULL && $zipcode != "") {
                                    $message .= "ZIPCODE: ".$zipcode."\n";
                                }

                                if ($_POST["telephone"] != NULL && $_POST["telephone"] != "") {
                                    $telephone = $_POST["telephone"];
                                    $message .= "TELEPHONE: ".$telephone."\n";
                                }

                                if ($_POST["website"] != NULL && $_POST["website"] != "") {
                                    $website = $_POST["website"];
                                    $message .= "WEBSITE: ".$website."\n\n";
                                }

                                if ($_POST["message"] != NULL && $_POST["message"] != "") {
                                    $message_text = $_POST["message"];
                                    $message .= "MESSAGE TEXT: ".$message_text."\n\n";
                                }

                              // now we'll insert a boundary to indicate we're starting the attachment
                              // we have to specify the content type, file name, and disposition as
                              // an attachment, then add the file content and set another boundary to
                              // indicate that the end of the file has been reached
                              $message .= "--{$mime_boundary}\n" .
                                 "Content-Type: {$type};\n" .
                                 " name=\"{$name}\"\n" .
                                 //"Content-Disposition: attachment;\n" .
                                 //" filename=\"{$fileatt_name}\"\n" .
                                 "Content-Transfer-Encoding: base64\n\n" .
                                 $data . "\n\n" .
                                 "--{$mime_boundary}--\n";

                              // now we just send the message
                              if (@mail($to, $subject, $message, $headers))
                                 echo "Message Sent";
                              else
                                 echo "Failed to send";
                           }
                        } else {
                            if ($file > 0) {
                                echo "Return Code: " . $_FILES["file"]["error"] . "<br />";
                            }

                            echo '<p class="note" style="margin:5px 0 5px 0; color:#ff0000;">Please fill in all the required fields</p>';
                        }
                        //echo '<p class="note" style="margin:5px 0 0 0;">First Name: '.$first_name.'</p>';
                    } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T23:51:12.603

*   您需要删除 \r 并用 \n 替换它们。大多数邮件服务器不再接受 \r
*   您需要 MIME 的随机哈希分隔符（例如，请参见下面的代码）

    > $filename = "我的附件.pdf";
    > 
    > $attachment = chunk_split(base64_encode($data));
    > 
    > $分隔符 = md5(time());
    > 
    > // 回车类型（我们使用 PHP 行尾常量）
    > 
    > $eol =PHP_EOL;
    > 
    > // 主标题
    > 
    > $headers = "发件人：".$from.$eol;
    > 
    > $headers .= "MIME 版本：1.0".$eol; $headers .= "Content-Type: multipart/mixed; 边界=\"".$separator."\"";
    > 
    > // 在此之后不再有标题，我们开始正文！//
    > 
    > $body = "--".$separator.$eol;
    > 
    > $body .= "内容传输编码：7bit".$eol.$eol;
    > 
    > $body .= "这是一个 MIME 编码的消息。".$eol;
    > 
    > // 消息 $body .= "--".$separator.$eol;
    > 
    > $body .= "内容类型: text/html; charset=\"iso-8859-1\"".$eol;
    > 
    > $body .= "内容传输编码：8bit".$eol.$eol;
    > 
    > $body .= $message.$eol;
    > 
    > // 附件
    > 
    > $body .= "--".$separator.$eol;
    > 
    > $body .= "Content-Type: application/octet-stream; name=\"".$filename."\"".$eol;
    > 
    > $body .= "内容传输编码：base64".$eol;
    > 
    > $body .= "内容配置：附件".$eol.$eol;
    > 
    > $body .= $attachment.$eol;
    > 
    > $body .= "--".$separator."--";
    > 
    > // 发信息
    > 
    > 邮件（$to，$subject，$body，$headers）；

或者您可以按照上面的建议从 PHPmailer 下载 3 个类文件，因为它已经为您完成了所有这些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T15:43:32.040

我用的是PHPMAILER，它好用，有很多例子（包括一个附加文件的方法） [pagina de phpmailer](http://phpmailer.worxware.com/)

# html - ie9-js - 有其他东西使它过时了吗？

> ID：10231706
> 
> 赞同：15
> 
> 时间：2012-04-19T15:40:38.203
> 
> 标签：html, internet-explorer, cross-browser, web-standards, ie7.js

所以，大家都知道 ie9.js（来自[http://code.google.com/p/ie7-js/](http://code.google.com/p/ie7-js/)）。它似乎有效，但自 2010 年上一次发布以来，它从未离开测试版。

显然，还有一些其他的东西有点类似（例如modernizr、html5shiv和CSS3Pie），但它们并不完全相同（尤其是因为它们需要按功能应用或者范围更有限）。

将其用于现代化仍然被认为是一种好的做法吗？我应该使用别的东西吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-18T23:16:25.743

ie9.js 仍然是一段很好的代码。它做了*很多*工作，修复了 IE 出错的东西。

正如您正确指出的那样，它现在是一段旧代码，但它仍然有效。

人们可能不再使用它的原因：

*   ie9.js 是一个大型 polyfill。这使它变得笨重且缓慢。如果您只需要修复某些特定功能，那可能是矫枉过正；一些较小的补丁可能会更好。
*   ie9.js 所做的大部分修复都是针对 IE6 的。越来越少的网站不再支持 IE6，因此所有这些代码都是多余的。同样，一些较小的补丁可能会更好。
*   ie9.js 不再被积极维护。这很好，因为它完成了它打算做的工作，但是其他更新的补丁正在引起更多的兴趣，因为它们是新的，也因为它们可能具有任何优势。

在您提到的替代工具（modernizr、html5shiv、CSS3Pie）中，它们实际上都没有任何与 ie9.js 交叉的功能。（另见[这个答案](https://stackoverflow.com/questions/3855294/html5shiv-vs-dean-edwards-ie7-js-vs-modernizr-which-to-choose/3855343#3855343)）

但是，这里有一些更新的工具可能是 ie9.js 的不错替代品：

*   [jQuery](http://jquery.com/) - 或其他类似库之一。这不仅仅是修复 IE 的漏洞，而是因为它强调了跨浏览器的兼容性，即使在 IE6 中，如果你正在编写 jQuery 代码，几乎不需要 ie9.js 提供的 Javascript 补丁
*   [Selectivzr](http://selectivizr.com/) - 这可能是主要的。它是 IE 不支持的大多数缺少的 CSS 选择器的 polyfill。ie9.js 做了更多（即 IE6 和 7 的关系选择器），但 Selectivzr 使用预先存在的选择器引擎（您选择的 jQuery、Prototype 等），这意味着它非常快速且轻量级，因为它利用了资源已经加载的。

鉴于现在浏览器中的绝大多数 JS 代码都是使用 jQuery 编写的，这基本上将像 ie9.js 这样的包罗万象的 IE 修复程序补丁的需求减少到几乎为零。

但是，如果您没有使用 jQuery 或类似的库，那么您可能会发现 ie9.js 仍然可以很好地为您工作。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-12T09:28:08.457

我们前段时间为 ie9.js 制作了一个补丁，并将其作为开源发布：[https](https://github.com/mylovecompany/ie9-js) ://github.com/mylovecompany/ie9-js 。

# python - 如何使用 Python 代码隐藏模拟网页表单提交？

> ID：10231707
> 
> 赞同：2
> 
> 时间：2012-04-19T15:40:47.063
> 
> 标签：python

我有一个关键问题。我想将我的应用程序与另一个更旧的应用程序集成。该服务只是一个 Web 表单，可能位于框架后面（我认为可能是[ASP Classic](http://en.wikipedia.org/wiki/Active_Server_Pages)）。我有一个操作 URL，并且我有用于复制此服务的 HTML 代码。

这是旧服务（HTML 页面）的一部分：

```
<FORM method="POST"
    url="https://host/path1/path2/AdapterHTTP?action_name=myactionWebAction&NEW_SESSION=true"
    enctype="multipart/form-data">

    <INPUT type="text" name="AAAWebView-FormAAA-field1" />
    <INPUT type="hidden" name="AAAWebView-FormAAA-field2" value="" />
    <INPUT type="submit" name="NAV__BUTTON__press__AAAWebView-FormAAA-enter" value="enter" />
</FORM> 
```

我的应用程序应该使用 Python从[代码隐藏](http://en.wiktionary.org/wiki/code-behind)模拟这个旧应用程序的表单提交。就目前而言，我没有那么幸运。

现在我这样做

```
import requests
payload = {'AAAWebView-FormAAA-field1': field1Value, \
    'AAAWebView-FormAAA-field2': field2Value, \
    'NAV__BUTTON__press__AAAWebView-FormAAA-enter': "enter"
}
url="https://host/path1/path2/AdapterHTTP?action_name=myactionWebAction&NEW_SESSION=true"
headers = {'content-type': 'multipart/form-data'}
r = requests.post(url, data=payload, headers=headers)
print r.status_code 
```

我收到一个 200 HTTP 响应代码，但如果我单击 HTML 页面上的提交按钮，该操作会保存值，但我的代码不会这样做。我该如何解决这个问题？

* * *

一个旧应用程序的所有者向我发送了这个 Java 异常日志。有任何想法吗？

```
org.apache.commons.fileupload.FileUploadException: the request was rejected because no multipart boundary was found 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T08:49:39.083

`files`尝试像requests.post一样传递一个空字典。我认为这将正确构建具有多部分边界的请求。

```
r = requests.post(url, data=payload, headers=headers, files={}) 
```

# java - Glassfish：预期的 DDL 文件不可用

> ID：10231711
> 
> 赞同：4
> 
> 时间：2012-04-19T15:40:53.043
> 
> 标签：java, hibernate, glassfish, ejb

我目前正在尝试将一些 bean 部署到我的 glassfish 并且我已经收到以下异常 2 小时：

```
[java] Cannot create tables for application dst2_1\. The expected DDL file dst2_1_dst_createDDL.jdbc is not available. 
```

而且我完全不知道这个异常是从哪里来的，尤其是不知道如何摆脱它——我什至不知道我可以在哪里寻找问题。

我已经尝试启动/重新启动/部署/取消部署/清理/删除一些 bean/...但它总是同样的错误。

有人可以告诉我如何解决这个问题 - 这真的很烦人。

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T18:27:44.083

我刚刚遇到了同样的问题。但它发生在我从 JDK 6 切换到 JDK 7 时。切换回 JDK6 对我有用。

# sql-server - Nvarchar 语句中的 Int 变量

> ID：10231717
> 
> 赞同：0
> 
> 时间：2012-04-19T15:41:27.953
> 
> 标签：sql-server

以下代码发送错误。

@resp2 是 INT，它是预先完成的总和的结果。所以现在我想使用动态语句更新另一个表中的某些行。

```
SET @SQL = 'update TelepromTableNamesInfo set [Resp] = '+@RESP2+'
                where nombre = ''' + @TableWBraq + ''''
EXEC (@SQL) 
```

我尝试的第一件事是 '''+@resp2+''' 但我不希望这样

> '变量值'

因为它是一个 INT 值并且不需要 ''

这个错误是有道理的。我不能将一些 INT 值放入字符串中。我会使用 cast 或 convert 但我怎样才能在语句中做到这一点？还是我从错误的角度接近更新？

谢谢。

**编辑**

解决了。

```
'+ cast(@RESP2 as nvarchar(7))+' 
```

这比我想象的要容易，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:52:58.493

```
SET @SQL = 'update TelepromTableNamesInfo set [Resp] = '+ CAST(@RESP2 AS VARCHAR(50)) +'
                where nombre = ''' + @TableWBraq + ''''
EXEC (@SQL) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T15:50:56.857

可能是单引号造成了问题。请尝试以下方法：

```
SET @SQL = 'update TelepromTableNamesInfo set [Resp] = '+@RESP2+
                'where nombre = '"' + @TableWBraq + '"'
EXEC (@SQL) 
```

# c# - XtraGrid 控件中的数据绑定

> ID：10231721
> 
> 赞同：0
> 
> 时间：2012-04-19T15:41:31.293
> 
> 标签：c#, c#-4.0, xtragrid

我想在`XtraGrid`控件中绑定数据源，但我无法做到。问题是我`XtraGrid`在设计时创建了列，并且在运行时使用用户定义的集合绑定记录。

`XtraGrid`我在设计时创建了四列。第一个是`CheckBox`类型，第二个和第三个是类型`Default`，最后一个是`Button`类型。

我在我的程序中创建了一个结构：

```
public struct Test
{
      public bool IsSelect{get; set; }
      public string First{get; set; } 
      public string Second {get; set;}
} 
```

然后我创建了一个`List<Test>`包含 10 个测试类型记录的集合。对于绑定，我编写了以下代码：

```
grid1.DataSource = userList; 
```

现在我想在 XtraGrid 控件中绑定这条记录。`IsSelect`属性应该与`CheckBox`列绑定，其余两个属性将与第二列和第三列绑定。

XtraGrid 有可能吗？

我正在使用带有 .NET Framework 3.5 和 C# 语言的 Visual Studio 2010。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T08:55:55.617

列字段名应设置为对象属性字段名。在设计器中添加列后，它们将不再自动创建。

在此处阅读更多信息：传统数据绑定方法 [http://documentation.devexpress.com/#WindowsForms/CustomDocument2387](http://documentation.devexpress.com/#WindowsForms/CustomDocument2387)

将控件绑定到运行时创建的数据 [http://documentation.devexpress.com/#WindowsForms/CustomDocument2387](http://documentation.devexpress.com/#WindowsForms/CustomDocument2387)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T19:27:13.790

XtraGrid 不是标准的 .NET 控件，而是 Developer Express 控件……我们在我工作的地方使用它们，并且发现他们的支持热线非常敏感，他们的网站是 www.devexpress.com。

话虽如此，我认为只要列的 FieldName 与结构中字段的名称匹配，这应该可以正常工作。

-霍利斯

# internet-explorer - 隐藏地址栏时如何在IE中执行javascript？

> ID：10231722
> 
> 赞同：1
> 
> 时间：2012-04-19T15:41:38.623
> 
> 标签：internet-explorer

我正在为我们的系统编写一些自动化脚本，并使用浏览器的地址栏来执行 javascript。
前任。

```
javascript:$('#myButton').click();void(0); 
```

但是，我们有一些隐藏地址栏的弹出页面。是否有一种简单的方法可以显示地址栏或其他在网页上执行 javascript 的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:45:04.037

按 F12，转到控制台选项卡，然后粘贴 JavaScript。

但这远非自动化，因此您可能需要研究为此目的而创建的工具，例如[Selenium](http://seleniumhq.org/) ;)

# gwt - 使用外部样式表时 GWT UiBinder 中的 CSS 选择器/继承

> ID：10231725
> 
> 赞同：2
> 
> 时间：2012-04-19T15:41:41.310
> 
> 标签：gwt, uibinder, css

我正在使用 GWT 2.4.0 + UiBinder。

在我的 ui.xml 文件中，我使用下面的行引用了外部样式表。

```
<ui:style
    type="com.codelaboration.twykin.frontend.widgets.qa.client.view.QABox.QAStyle"
    src="QABox.css" /> 
```

现在我在同一个 ui.xml 文件中有以下代码

```
<div class="{style.imagePanel}">
      <div ui:field="lblUser"/>
</div> 
```

在 QABox.css 中，我定义了“imagePanel”，并使用 CSS 继承将 CSS 应用于**imagePanel 类中的所有 div**：

```
.imagePanel {float: left; width: 100px; text-align: center;}
.imagePanel div {float: right; width: 530px;} 
```

现在的问题是 GWT 混淆了样式名称，所以现在**imagePanel**将被更改为一些奇怪的名称，因此“.imagePanel div”将无法工作。所以基本上我的问题是当外部样式表仅在 ui.xml 中声明时如何在 UiBinder 中使用 CSS 选择器。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T19:33:04.253

您可以在 gwt 应用程序中添加外部 css。您必须提供样式资源的相对路径。

听到是一段代码。

在你的 uibinder xml 中

```
<ui:style src="QAStyle/QABox.css" />

    <div class="{style.imagePanel}">
          <div ui:field="lblUser"/>
    </div> 
```

它会在 QAStyle 包中找到 css。

或者您也可以使用 ClientBundle 来避免您的路径问题。请参阅[使用外部资源](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiBinder#Using_an_external_resource)。

它会帮助你。

# iphone - iPhone 比 Instrument 工具的内存泄漏检查工具速度快吗？

> ID：10231727
> 
> 赞同：1
> 
> 时间：2012-04-19T15:42:00.027
> 
> 标签：iphone, ios, instruments

目前我没有苹果开发者账户（99 美元）。

我正在 iOS 模拟器中开发具有搜索功能的 iOS 应用程序。

在模拟器中，我的应用程序的搜索速度还不错，很正常。但是当我使用 Instrument 工具检查我的应用程序是否存在内存泄漏时，我的应用程序的搜索速度太慢，数据加载速度也太慢。

我必须在应用程序的 Start 中加载 30 MB 数据。在 Simulator 中它很快。但在 Instruments 中，它太慢了，也需要 6 秒。

所以我担心我的应用程序会因为速度而在物理设备上运行。

我想知道，iPhone物理设备是否比Instrument工具的检查内存泄漏更快？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T15:48:47.447

根据我的经验，在 iPhone 上正常执行比使用 Instruments 进行分析要快得多。但是，这在很大程度上取决于应用程序以及您使用的是什么“仪器”。如果您的应用程序进行大量内存分配，则在使用具有“分配”设置的 Instruments 时会非常慢。

但也要做好准备，iPhone 模拟器通常比真实设备快得多。您的台式机 CPU 通常为 x86 且超过 2 GHz，但设备的参数较低。而且架构 (ARM) 使代码被编译成比 x86 更多的指令，这也使得它有点慢。

无论如何，您真的应该继续，购买开发者帐户并在设备上测试您的应用程序，没有其他方法可以预测性能。我想你的情况的规则应该是**don't guess, measure**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T15:51:09.600

请不要猜测在真实设备上进行的任何测试去购买 99 美元的开发者帐户。iPhone 模拟器通常比真实设备快得多。一开始就下载 30 MB 的数据是一个非常糟糕的主意。如果连接速度很慢，则需要 5 分钟以上。如果您在设备上的数据超过 45 MB，苹果将杀死您的应用程序并释放数据。确保您以书面方式进行。

# asp.net - ViewState 不起作用

> ID：10231729
> 
> 赞同：0
> 
> 时间：2012-04-19T15:42:06.927
> 
> 标签：asp.net, vb.net

我有以下代码尝试使用视图状态来保存回发变量。当回发发生时，SrString 值什么都不是。我已经在下拉列表索引 chane 事件中设置了 ViewState 值，并在 if ispostback 块的页面中设置了等于 ot ViewState("SrString") 的变量。

任何人都可以帮忙吗？

谢谢

```
'Page Load

If IsPostBack Then
    SrString = ViewState("SrString")
End If

'DropDownList Index change event

Protected Sub ByteDataFile_SelectedIndexChanged(ByVal sender As Object, ByVal e As EventArgs) Handles ByteDataFile.SelectedIndexChanged
    ViewState("SrString") = SrString
End Sub 
```

我的网络配置文件是正确的，因为我在网站中有其他页面可以正常使用视图状态。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:45:35.380

这是因为 Page_Load 在 ByteDataFile_SelectedIndexChanged 之前执行。

ASP.NET 页面生命周期总是先执行 Page_Load，然后它处理点击和 SelectedIndexChanged 等事件，所以当您`SrString = ViewState("SrString")`在 Page_Load 中说时，该`ViewState("SrString") = SrString`行还没有被调用。

[http://msdn.microsoft.com/en-us/library/ms178472.aspx](http://msdn.microsoft.com/en-us/library/ms178472.aspx)

假设您从 dropDownList 的选定项中获取 SrString 的值，您只需要在 Page_Load 中获取该值，类似于以下内容：

```
If IsPostBack Then
    'I got this from your comment in the other answer, but I suppose LineNo and FileNameID are comming somehow from the drop downlist, right?
    ViewState("SrString") = "\\...\soi\Bytewise\Line " & LineNo & "\Text Files\" & FileNameID
End If 
```

您需要确定的另一件事是 DropDownList 的 AutoPostBack 属性设置为 true，否则当您更改选择时页面不会回发。

对于这种事情，我认为您应该使用 HiddenField 而不是 ViewState。

[http://wiki.asp.net/page.aspx/298/hiddenfield/](http://wiki.asp.net/page.aspx/298/hiddenfield/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T15:46:05.770

在哪里`SrString`设置？从您发布的代码中，它只会分配给 ViewState 或从 ViewState 分配，因此将始终为空。

更多解释：

```
If IsPostBack Then
    SrString = ViewState("SrString")
End If

'DropDownList Index change event

Protected Sub ByteDataFile_SelectedIndexChanged(ByVal sender As Object, ByVal e As EventArgs) Handles ByteDataFile.SelectedIndexChanged
    ViewState("SrString") = SrString
End Sub 
```

在页面加载中，我们将 SrString 设置为视图状态中的值。

在您更改的事件中，我们将 ViewState 设置为 SrString 的值。

但是，SrString 从来没有设置为一个值，所以你只是在传递一个空值。必须有，某处：

```
SrString = 'some value from somewhere besides the viewstate. 
```

鉴于：

a=b

b=a

并且没有其他赋值，值永远不会改变。

# ajax - 是否应该限制 URL 字符串的长度以提高安全性？

> ID：10231731
> 
> 赞同：3
> 
> 时间：2012-04-19T15:42:14.180
> 
> 标签：ajax, coldfusion, coldfusion-8, cfc, cfajaxproxy

我正在使用 ColdFusion 8 和 jQuery 1.7.2。

我正在使用 CFAJAXPROXY 将数据传递给 CFC。这样做会创建一个 JSON 数组（参数集合）并通过 URL 传递它。字符串可能很长，因为正在传递相当多的数据。

我正在工作的站点具有将任何 URL 查询字符串的长度限制为 250 个字符的现有代码。这是在 application.cfm 文件中通过测试查询字符串的长度来完成的。如果任何查询字符串大于 250 个字符，则请求被中止。这样做的目的是确保黑客或其他恶意代码不会通过 URL 字符串传递。

现在我们使用查询字符串在 URL 中传递 JSON 数组，我们发现 Ajax 请求经常被中止。

我们还有许多其他安全实践，例如从代码中剥离任何“<>”标签并使用 CFQUERYPARAM。

我的问题是为了安全起见限制 URL 字符串的长度是一个好主意还是根本无效？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T16:50:34.380

URI 长度和安全性之间绝对没有相关性，更多的是一个问题：

1.  将您提供给用户代理的信息量限制为“需要知道的基础”。这涵盖了诸如您运行的应用程序服务器的类型和**相关的约定**、您运行的 Web 服务器和**相关的约定**以及主机上的操作系统等内容。这些本质上是可以被视为漏洞的东西。
2.  减少**利用**这些漏洞的影响，即引入补丁、确保正确配置等。

正如上面提到的，在 Web 层，这不仅包括 GET（您所关心的），还包括 POST、PUT、DELETE 对 HTTP 资源的任何其他操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T16:52:39.170

将此移至 Evik 的答案中-

如果输入得到适当的清理，这似乎（充其量）完全没有必要。我敢肯定，假设这是唯一的防御，聪明的人可以迅速击败“小门口的安全”防御。

OWASP 有一些好的、健全的网络安全指南。据我所知，限制 url 的大小不在列表中。有关详细信息，请参阅：[https ://www.owasp.org/index.php/Top_10_2010-Main](https://www.owasp.org/index.php/Top_10_2010-Main)

我还想回应 Hereblur 的评论，即这使国际化变得棘手，或者可能是不可能的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T16:09:59.430

I'm not a ColdFusion developer. But I think it's the same with other language.

I think It's help just a little bit. The problem of malicious code or sql injection should be handle by your application.

I agree that limited length of query string value is safer and add more difficult to hackers. But you cant do this with POST data. and It's limit some functionality. For example, For one utf-8 character, It may take 9 characters after encoded. that's mean you can put only 27 non-english characters.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T19:47:58.880

限制的唯一原因与性能和 DOS 攻击有关 - 而不是安全本身（尽管 DOS 通过关闭您的服务器是一种安全威胁）。Web 服务器和应用服务器（包括 CF）允许您限制 POST 数据的大小，以便您的服务器不会因上传非常大的文件而降级。如果服务器难以解析、处理或写入或其他任何内容，则 URL 数据（如果大量）可能会导致长时间运行的请求。

所以这里有一些与这些事情相关的*适度风险。*早在 NT 时代，IIS 3 就有许多缺陷，这些缺陷通过限制 URL 的长度而被“锁定”——但那些日子早已一去不复返了。在仔细研究这个问题之前，我会首先查看更多代表*低效成果*的漏洞利用- 当然，除非您觉得您遇到了一个特定问题，而人们正在调查您（我的意思是使用长 URL :)。

# iphone - 有没有办法在iOS中以编程方式打开和关闭wifi？

> ID：10231735
> 
> 赞同：8
> 
> 时间：2012-04-19T15:42:23.400
> 
> 标签：iphone, ios, wifi

我使用此链接上的代码为蓝牙完成了它： [Is there a way to toggle Bluetooth and/or wifi on and off programmatically in iOS?](https://stackoverflow.com/questions/4518406/is-there-a-way-to-toggle-bluetooth-and-or-wifi-on-and-off-programmatically-in-ios)

但我不知道如何为 Wifi 做同样的事情。如何打开/关闭 Wifi？可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T18:35:54.837

绝对不可能使用任何公共（记录的）API 关闭或打开 WiFi。

即使在使用私有函数的非越狱设备上也有可能实现这一点。

请参阅[Apple80211Functions](http://code.google.com/p/iphone-wireless/wiki/Apple80211Functions) - 有一个名为的私有函数`Apple80211SetPower`非常适合这项工作。但使用它也会干扰自动 TX 电源设置 - 可能导致电池使用量增加或 WiFi 链接质量下降（或两者兼而有之）。

当然，您的应用程序**绝对不会**使用此方法通过 App Store 的批准。

[如果您下载Stumbler](http://code.google.com/p/iphone-wireless/wiki/Stumbler)源，您可以看到如何使用 Apple80211 功能。

Stumbler SVN 结帐由以下人员完成：

```
svn checkout http://iphone-wireless.googlecode.com/svn/trunk/ iphone-wireless-read-only 
```

还有两个其他项目可以帮助您开始使用低级 WiFi 功能：

[网络登录助手](http://code.google.com/p/web-login-helper/)

[贝卡](http://www.assembla.com/code/BECHA/subversion/nodes/iphone/Source/BECHA/Classes/WiFiController.m?rev=23)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T15:46:38.353

我相当确定 SDK 不允许使用公共框架打开或关闭 Wifi，抱歉。您可以使用私有框架，但我怀疑您的应用程序无法通过 Apple。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T09:00:27.623

在 iOs 2.x 中，您可以使用一些私有 API 来执行此操作，但它在 iOS4.x、5.x 中不起作用。希望Apple能公开管理Wifi的API，现在只供Setting apple app使用。

# html - 带有 html-FORM 元素的 xPage-Pager 控件不起作用

> ID：10231737
> 
> 赞同：0
> 
> 时间：2012-04-19T15:42:27.903
> 
> 标签：html, forms, custom-controls, xpages, lotus-domino

当我在我的 xpage 中添加一个普通`<form>`元素时，寻呼机不再工作，这意味着我无法切换到其他页面（单击“下一步”或其他内容）。

这是重要的部分：

```
<xp:pager id="newsPager" for="newsList" pageCount="4" partialRefresh="true">
    //pager stuff.....
</xp:pager>

<form action="#">
    //form stuff... contents not important for my issue, I tested it
</form> 
```

当我完全排除表单时，它可以工作

我在 Windows 7 上使用 Domino Designer 8.5.3

而“newsList”是重复控件的 ID

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T17:16:56.733

不要使用 passthru 表单，而是使用表单组件：

```
<xp:form action="#">
 // form contents
</xp:form> 
```

这将防止其余内容被表单标签包围，这也会破坏事件和数据提交，因此您需要以自己的形式包围其余内容：

```
<xp:form>
 <xp:pager id="newsPager" for="newsList" pageCount="4" partialRefresh="true">
    //pager stuff.....
 </xp:pager>
 <xp:repeat id="newsList">
    //repeat contents
 </xp:repeat>
</xp:form> 
```

**注意：**不要将表单相互*嵌套；*这会使浏览器感到困惑，这就是您当前的设计无法正常工作的原因。相反，识别可以安全地视为单独表单的页面的离散部分，并将每个部分包装在其自己的表单组件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T16:37:59.030

XPage 呈现器会自动将表单添加到页面，除非您在 Xpage 的属性中禁用了此功能。

此表单用于处理所有部分刷新和向后端提交值。当您添加自己的表单标签时，分页器（或任何 xpage 组件）使用的部分刷新不再具有与服务器通信所需的正确信息。

如果您确实需要拥有自己的表单标签，那么我建议您在包含您的表单的外部页面中加载一个 iFrame。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T12:06:13.827

我发现了这个，它对我来说很好用

[http://xpageswiki.com/web/youatnotes/wiki-xpages.nsf/dx/work_with_HTML_forms#Embed+a+custom+HTML+form+in+a+XPage](http://xpageswiki.com/web/youatnotes/wiki-xpages.nsf/dx/work_with_HTML_forms#Embed+a+custom+HTML+form+in+a+XPage)

# ruby - 名为 nil id 的活动管理员

> ID：10231742
> 
> 赞同：1
> 
> 时间：2012-04-19T15:42:45.677
> 
> 标签：ruby, ruby-on-rails-3, activeadmin

我正在与活跃的管理员一起工作我有收集选择或下拉框来填充包裹和工作人员我只是想知道我为什么

```
undefined method `[]' for nil:NilClass` 
```

我不知道发生了什么，但它几天前运行并测试了一次，但现在它引发了这个错误，有没有可能解决这个问题的方法？

```
def create
   @package = Package.find(params[:package_crew][:package_id])
   crew = Crew.find(params[:package_crew][:crew_id] )
   @package_crew = @package.add_crew(crew.id)
   if @package_crew.save
      redirect_to {admin_package_crew_url}
   end
 end 
```

提前感谢我们所有人的更多力量

我试过这个

```
def create
  #pid = params[:package_crew][:crew_id] if params[:package_crew]
  pid,cid = 2 #tried nil,0..10 
  if params[:package_crew]
     pid = params[:package_crew][:package_id] 
     cid = params[:package_crew][:crew_id] 
  end
  @package = Package.find_by_id(pid) 
  crew = Crew.find_by_id(cid)
  #@package = Package.find(params[:package_crew][:package_id])
  #crew = Crew.find(params[:package_crew][:crew_id] )
  @package_crew = @package.add_crew(crew.id)
  if @package_crew.save
     redirect_to {admin_package_crew_url}
  end 
```

结尾

add_crew 方法

```
def add_crew(crew_id)
    current_package = package_crews.find_by_crew_id(crew_id)
    if current_package
      current_package.quantity = current_package.quantity.to_i + 1
    else
      current_package = package_crews.build(:crew_id => crew_id)
      current_package.price = current_package.crew.price
    end
      current_package
  end 
```

移动参数

```
{"utf8"=>"✓",
 "authenticity_token"=>"n4WZpQpES6mnSO12oGKV/MeoxAVvV9OmJQKfhcpnvQM=",
 "crew_for_package"=>{"package_id"=>"1",
 "crew_id"=>"1",
 "quantity"=>"1"},
 "commit"=>"Create Package crew"} 
```

堆栈错误

```
app/admin/package_crews.rb:35:in `create'
actionpack (3.2.1) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
actionpack (3.2.1) lib/abstract_controller/base.rb:167:in `process_action'
actionpack (3.2.1) lib/action_controller/metal/rendering.rb:10:in `process_action'
actionpack (3.2.1) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
activesupport (3.2.1) lib/active_support/callbacks.rb:447:in `_run__304549499__process_action__775442107__callbacks'
activesupport (3.2.1) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.1) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
activesupport (3.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.1) lib/abstract_controller/callbacks.rb:17:in `process_action'
actionpack (3.2.1) lib/action_controller/metal/rescue.rb:29:in `process_action'
actionpack (3.2.1) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
activesupport (3.2.1) lib/active_support/notifications.rb:123:in `block in instrument'
activesupport (3.2.1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.1) lib/active_support/notifications.rb:123:in `instrument'
actionpack (3.2.1) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
actionpack (3.2.1) lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
activerecord (3.2.1) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
actionpack (3.2.1) lib/abstract_controller/base.rb:121:in `process'
actionpack (3.2.1) lib/abstract_controller/rendering.rb:45:in `process'
actionpack (3.2.1) lib/action_controller/metal.rb:203:in `dispatch'
actionpack (3.2.1) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
actionpack (3.2.1) lib/action_controller/metal.rb:246:in `block in action'
actionpack (3.2.1) lib/action_dispatch/routing/route_set.rb:66:in `call'
actionpack (3.2.1) lib/action_dispatch/routing/route_set.rb:66:in `dispatch'
actionpack (3.2.1) lib/action_dispatch/routing/route_set.rb:30:in `call'
journey (1.0.3) lib/journey/router.rb:68:in `block in call'
journey (1.0.3) lib/journey/router.rb:56:in `each'
journey (1.0.3) lib/journey/router.rb:56:in `call'
actionpack (3.2.1) lib/action_dispatch/routing/route_set.rb:589:in `call'
sass (3.1.15) lib/sass/plugin/rack.rb:54:in `call'
warden (1.1.1) lib/warden/manager.rb:35:in `block in call'
warden (1.1.1) lib/warden/manager.rb:34:in `catch'
warden (1.1.1) lib/warden/manager.rb:34:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
rack (1.4.1) lib/rack/etag.rb:23:in `call'
rack (1.4.1) lib/rack/conditionalget.rb:35:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/head.rb:14:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/flash.rb:242:in `call'
rack (1.4.1) lib/rack/session/abstract/id.rb:205:in `context'
rack (1.4.1) lib/rack/session/abstract/id.rb:200:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/cookies.rb:338:in `call'
activerecord (3.2.1) lib/active_record/query_cache.rb:64:in `call'
activerecord (3.2.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (3.2.1) lib/active_support/callbacks.rb:405:in `_run__1039351831__call__833288071__callbacks'
activesupport (3.2.1) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.1) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
activesupport (3.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.1) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.1) lib/rails/rack/logger.rb:26:in `call_app'
railties (3.2.1) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.1) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.1) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.1) lib/rack/lock.rb:15:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/static.rb:53:in `call'
railties (3.2.1) lib/rails/engine.rb:479:in `call'
railties (3.2.1) lib/rails/application.rb:220:in `call'
railties (3.2.1) lib/rails/railtie/configurable.rb:30:in `method_missing'
/home/led/.passenger/standalone/3.0.11-x86-ruby1.9.3-linux-gcc4.6.3-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
/home/led/.passenger/standalone/3.0.11-x86-ruby1.9.3-linux-gcc4.6.3-1002/support/lib/phusion_passenger/abstract_request_handler.rb:513:in `accept_and_process_next_request'
/home/led/.passenger/standalone/3.0.11-x86-ruby1.9.3-linux-gcc4.6.3-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
/home/led/.passenger/standalone/3.0.11-x86-ruby1.9.3-linux-gcc4.6.3-1002/support/lib/phusion_passenger/rack/application_spawner.rb:206:in `start_request_handler'
/home/led/.passenger/standalone/3.0.11-x86-ruby1.9.3-linux-gcc4.6.3-1002/support/lib/phusion_passenger/rack/application_spawner.rb:171:in `block in handle_spawn_application'
/home/led/.passenger/standalone/3.0.11-x86-ruby1.9.3-linux-gcc4.6.3-1002/support/lib/phusion_passenger/utils.rb:479:in `safe_fork'
/home/led/.passenger/standalone/3.0.11-x86-ruby1.9.3-linux-gcc4.6.3-1002/support/lib/phusion_passenger/rack/application_spawner.rb:166:in `handle_spawn_application'
/home/led/.passenger/standalone/3.0.11-x86-ruby1.9.3-linux-gcc4.6.3-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
/home/led/.passenger/standalone/3.0.11-x86-ruby1.9.3-linux-gcc4.6.3-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
/home/led/.passenger/standalone/3.0.11-x86-ruby1.9.3-linux-gcc4.6.3-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
/home/led/.passenger/standalone/3.0.11-x86-ruby1.9.3-linux-gcc4.6.3-1002/support/lib/phusion_passenger/rack/application_spawner.rb:129:in `start'
/home/led/.passenger/standalone/3.0.11-x86-ruby1.9.3-linux-gcc4.6.3-1002/support/lib/phusion_passenger/spawn_manager.rb:253:in `block (2 levels) in spawn_rack_application'
/home/led/.passenger/standalone/3.0.11-x86-ruby1.9.3-linux-gcc4.6.3-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
/home/led/.passenger/standalone/3.0.11-x86-ruby1.9.3-linux-gcc4.6.3-1002/support/lib/phusion_passenger/spawn_manager.rb:246:in `block in spawn_rack_application'
/home/led/.passenger/standalone/3.0.11-x86-ruby1.9.3-linux-gcc4.6.3-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `block in synchronize'
<internal:prelude>:10:in `synchronize'
/home/led/.passenger/standalone/3.0.11-x86-ruby1.9.3-linux-gcc4.6.3-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
/home/led/.passenger/standalone/3.0.11-x86-ruby1.9.3-linux-gcc4.6.3-1002/support/lib/phusion_passenger/spawn_manager.rb:244:in `spawn_rack_application'
/home/led/.passenger/standalone/3.0.11-x86-ruby1.9.3-linux-gcc4.6.3-1002/support/lib/phusion_passenger/spawn_manager.rb:137:in `spawn_application'
/home/led/.passenger/standalone/3.0.11-x86-ruby1.9.3-linux-gcc4.6.3-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
/home/led/.passenger/standalone/3.0.11-x86-ruby1.9.3-linux-gcc4.6.3-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
/home/led/.passenger/standalone/3.0.11-x86-ruby1.9.3-linux-gcc4.6.3-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
/home/led/.passenger/standalone/3.0.11-x86-ruby1.9.3-linux-gcc4.6.3-1002/support/helper-scripts/passenger-spawn-server:99:in `<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:48:10.340

据我所知，您的 params[:package_crew] 返回 nil

检查你的参数[:package_crew]

尝试关注

```
pid,cid = 0
if params[:package_crew]
  pid = params[:package_crew][:package_id] 
  cid = params[:package_crew][:crew_id] 
end
@package = Package.find(pid)
@crew = Crew.find(cid) 
```

我建议宁愿使用它。

```
Package.find_by_id(pid) # this wont raise exception, when record is not found 
Crew.find_by_id(cid) 
```

# java - Java 接口的可见性降低，只有 NOT

> ID：10231743
> 
> 赞同：4
> 
> 时间：2012-04-19T15:42:49.127
> 
> 标签：java, interface, class-visibility

> **可能的重复：**
> [在 Java 中实现接口时降低可见性](https://stackoverflow.com/questions/6588015/reduce-visibility-when-implementing-interface-in-java)

我一定遗漏了一些明显的东西，但我得到了：

> 不能降低继承方法的可见性

我不明白怎么做。这是我的界面：

```
interface QueryBuilderPart {
    StringBuilder toStringBuilder();
} 
```

这是我的实现：

```
public class Stupid implements QueryBuilderPart {
    @Override
    StringBuilder toStringBuilder() {
        return null;
    }
} 
```

类和实现都在同一个包中。有任何想法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-19T15:43:53.837

默认情况下，接口的方法是`public`，但您将其降低为默认可见性，即包级别的可见性。

所以下面两段代码是一样的：

```
interface QueryBuilderPart {
    StringBuilder toStringBuilder();
}

interface QueryBuilderPart {
    public abstract StringBuilder toStringBuilder();
} 
```

注意接口的方法`abstract`也是

因此，您应该执行以下操作：

```
public class Stupid implements QueryBuilderPart {
    @Override
    public StringBuilder toStringBuilder() {
        return null;
    }
} 
```

# c++ - 如何确定 QString 中的特定字符是字母还是标点符号？

> ID：10231746
> 
> 赞同：0
> 
> 时间：2012-04-19T15:42:57.907
> 
> 标签：c++, qt, qstring

如何确定 QString 中的特定字符是否是任何语言的字母或标点符号？

例如，我想找到`.`in`gâteau.`但不是`â`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T15:51:42.767

尝试

```
str.at(i).isLetter() 
```

对于 unicode 类 Letter_Uppercase/Lowercase/Titlecase/Modifier/Other，它将返回 true。你可以在这里看到：

[http://www.sql-und-xml.de/unicode-database/lu.html](http://www.sql-und-xml.de/unicode-database/lu.html)

[http://www.sql-und-xml.de/unicode-database/ll.html](http://www.sql-und-xml.de/unicode-database/ll.html)

[http://www.sql-und-xml.de/unicode-database/lt.html](http://www.sql-und-xml.de/unicode-database/lt.html)

[http://www.sql-und-xml.de/unicode-database/lm.html](http://www.sql-und-xml.de/unicode-database/lm.html)

[http://www.sql-und-xml.de/unicode-database/lo.html](http://www.sql-und-xml.de/unicode-database/lo.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T15:48:54.007

您可以使用 at() 从 QString 中获取 QChar，并且 QChar 具有 isLetter() 函数。因此，你想要这样的东西：

```
QString myString;
if (myString.at(3).isLetter()) {
   qDebug() << "letter number 4 in the string is a letter";
} 
```

# wpf - 从视图绑定到 ViewModel 中的复杂对象？

> ID：10231749
> 
> 赞同：5
> 
> 时间：2012-04-19T15:43:10.123
> 
> 标签：wpf, c#-4.0, data-binding, mvvm, complextype

例如说我有以下类型：

```
 public class Site
    {
       public string Name { get; set; }
       public int SiteId { get; set; }
       public bool IsLocal { get; set; }
    } 
```

可以将上述类型分配为保存在 ViewModel 中的 Propety 中，就像假设已创建相应的支持字段但此处省略了 ofc 一样：

```
 public Site SelectedSite
    {
        get { return _selectedSite; }
        set
        {
            _selectedSite = value;
            // raise property changed etc
        }
    } 
```

在我的 xaml 中，直接绑定将是：

```
 <TextBlock x:Name="StatusMessageTextBlock"
                   Width="Auto"
                   Height="Auto"
                   Style="{StaticResource StatusMessageboxTextStyle}"
                   Text="{Binding MessageToDisplay,
                                  Mode=OneWay,
                                  UpdateSourceTrigger=PropertyChanged}" /> 
```

您可以使用点符号语法扩展绑定吗？例如：

```
 <TextBlock x:Name="StatusMessageTextBlock"
                   Width="Auto"
                   Height="Auto"
                   Style="{StaticResource StatusMessageboxTextStyle}"
                   **Text="{Binding SelectedSite.Name,**
                                  Mode=OneWay,
                                  UpdateSourceTrigger=PropertyChanged}" /> 
```

似乎是一个有趣的功能，但我的直觉是否定的，因为我的 DC 是在运行时分配的，所以在设计时或编译时，我看不出任何可以使这个功能起作用的线索？

如果误解了复杂对象是什么，请纠正我，为了这个问题，我已经简化了我的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T15:48:52.630

当然这是可能的。但是，WPF 需要知道路径上的任何属性何时发生更改。为此，您需要实现[`INotifyPropertyChanged`](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)（或其他支持的机制）。在您的示例中，两者`Site`和包含的 VM`SelectedSite`都应该实现更改通知）。

以下是如何实现您在问题中指定的功能：

```
// simple DTO
public class Site
{
   public string Name { get; set; }
   public int SiteId { get; set; }
   public bool IsLocal { get; set; }
}

// base class for view models
public abstract class ViewModel
{
    // see http://kentb.blogspot.co.uk/2009/04/mvvm-infrastructure-viewmodel.html for an example
}

public class SiteViewModel : ViewModel
{
    private readonly Site site;

    public SiteViewModel(Site site)
    {
        this.site = site;
    }

    // this is what your view binds to
    public string Name
    {
        get { return this.site.Name; }
        set
        {
            if (this.site.Name != value)
            {
                this.site.Name = value;
                this.OnPropertyChanged(() => this.Name);
            }
        }
    }

    // other properties
}

public class SitesViewModel : ViewModel
{
    private readonly ICollection<SiteViewModel> sites;
    private SiteViewModel selectedSite;

    public SitesViewModel()
    {
        this.sites = ...;
    }

    public ICollection<SiteViewModel> Sites
    {
        get { return this.sites; }
    }

    public SiteViewModel SelectedSite
    {
        get { return this.selectedSite; }
        set
        {
            if (this.selectedSite != value)
            {
                this.selectedSite = value;
                this.OnPropertyChanged(() => this.SelectedSite);
            }
        }
    }
} 
```

您的视图可能看起来像这样（假设 a`DataContext`类型`SitesViewModel`）：

```
<ListBox ItemsSource="{Binding Sites}" SelectedItem="{Binding SelectedSite}"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T09:51:52.743

以下是对我有用的：

```
 public Site SelectedSite
        {
            get { return _selectedSite; }
            set
            {
                _selectedSite = value;
                RaisePropertyChanged("SelectedSite");
            }
        } 
```

在我的 xaml 中，我能够做到：

```
 <TextBox Name="tbSiteName"
                 Width="250"
                 Height="30"
                 Margin="0"
                 HorizontalAlignment="Left"
                 VerticalAlignment="Top"
                 IsReadOnly="True"
                 Style="{StaticResource MainTextBoxStyle}"
                 Text="{Binding SelectedSite.Name,
                          Mode=OneWay,
                          UpdateSourceTrigger=PropertyChanged}" /> 
```

这允许您访问站点类型之外的数据成员，而无需创建单独的属性来包装站点类型上的每个数据成员。然后各个控件可以绑定到 VM 中声明的每个属性。以一对一的方式，这种方法可能会变得相当冗长。附加到上面显示的 TextBox 控件的 Text 属性的绑定扩展表明我们不是绑定到简单直接的属性，而是实际上绑定到自定义类型。潜在地消除了创建更多公共属性的需要。

# solr - solr 中的 PolySearcher

> ID：10231751
> 
> 赞同：0
> 
> 时间：2012-04-19T15:43:15.863
> 
> 标签：solr, solrj

我在浏览 lucy 时遇到了这个

[http://lucy.apache.org/docs/perl/Lucy/Search/PolySearcher.html](http://lucy.apache.org/docs/perl/Lucy/Search/PolySearcher.html)

solr 是否有类似的功能？我的用例完全相同（读取单个分片中的多个索引并跨分片执行分配）。

如果没有，有人可以给我一个提示吗？我尝试将阅读器换成单个搜索器，但没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T16:53:38.653

Solrs [DistributedSearch](http://wiki.apache.org/solr/DistributedSearch)对您有帮助吗？

在 3.x 之前，您必须在索引期间实现自己的文档分发，例如使用循环。但是跨多个分片搜索完全没有问题。

# bash - UNIX：带有特定 LANG 的子午线指示器 (AM/AP) 空白

> ID：10231757
> 
> 赞同：2
> 
> 时间：2012-04-19T15:43:38.483
> 
> 标签：bash, unix, date

我想自定义我的提示。这是我的问题：

```
root@server:~# PS1="[\@]\$" // should write [05:40 PM]
[05:40 ]$ 
```

也许这可以成为一个线索？

```
root@server:~# LANG=en_EN.UTF-8
root@server:~# date +%T%p
17:25:05PM 
```

现在 ：

```
root@server:~# LANG=fr_FR.UTF-8
root@server:~# date +%T%p
17:25:15
root@server:~# date +%p

root@server:~# 
```

非常感谢 ！

* * *

编辑 1：这对 PS1 没有任何改变！

```
root@server:~# LANG=en_EN.UTF-8
root@server:~# PS1="[\@]\$"
[05:40 ]$ 
```

* * *

编辑 2： 效果很好，但我预计不需要的更改：

```
root@server:~# LC_ALL=C
root@server:~# PS1="[\@]\$"
[06:34 PM]$ 
```

但是我在输入`locale`前后没有发现语言环境的差异`LC_ALL=C`！

```
root@server:~# PS1="[\@] \$"
[06:44 ] $locale
LANG=fr_FR.UTF-8
LANGUAGE=
LC_CTYPE="fr_FR.UTF-8"
LC_NUMERIC="fr_FR.UTF-8"
LC_TIME="fr_FR.UTF-8"
LC_COLLATE="fr_FR.UTF-8"
LC_MONETARY="fr_FR.UTF-8"
LC_MESSAGES="fr_FR.UTF-8"
LC_PAPER="fr_FR.UTF-8"
LC_NAME="fr_FR.UTF-8"
LC_ADDRESS="fr_FR.UTF-8"
LC_TELEPHONE="fr_FR.UTF-8"
LC_MEASUREMENT="fr_FR.UTF-8"
LC_IDENTIFICATION="fr_FR.UTF-8"
LC_ALL=
[06:44 ] $env
// ...
LANG=fr_FR.UTF-8
// ... 
```

然后 ：

```
[06:45 ] $LC_ALL=C
[06:45 PM]$locale
LANG=fr_FR.UTF-8
LANGUAGE=
LC_CTYPE="fr_FR.UTF-8"
LC_NUMERIC="fr_FR.UTF-8"
LC_TIME="fr_FR.UTF-8"
LC_COLLATE="fr_FR.UTF-8"
LC_MONETARY="fr_FR.UTF-8"
LC_MESSAGES="fr_FR.UTF-8"
LC_PAPER="fr_FR.UTF-8"
LC_NAME="fr_FR.UTF-8"
LC_ADDRESS="fr_FR.UTF-8"
LC_TELEPHONE="fr_FR.UTF-8"
LC_MEASUREMENT="fr_FR.UTF-8"
LC_IDENTIFICATION="fr_FR.UTF-8"
LC_ALL=
[06:46 PM] $env
// ...
LANG=fr_FR.UTF-8
// ... 
```

还有什么其他变量会`LC_ALL`改变？！...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T18:00:15.253

如果您只需要为命令提示符显示时间，那么您可以尝试调用一个`PS1`使用`trap`. 这可能不是最理想的方法，但您可以放心，您不会通过设置`LC_ALL`. 您可以在这些行上做一些事情：

```
$ function display_prompt(){ prompt_time=$(LC_ALL=C date +%r); PS1="[$prompt_time] $ "; }
$ trap display_prompt DEBUG
[11:25:45 PM] $ 
```

您可以选择任何`date`您想要的格式。您可以将其添加到`~/.bashrc`文件中。
希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T15:47:09.373

好吧，如果该语言环境没有/使用 AM/PM 表示法，那是有道理的。

# iphone - uisegmented 控件手动设置选定的索引不起作用

> ID：10231758
> 
> 赞同：1
> 
> 时间：2012-04-19T15:43:41.427
> 
> 标签：iphone, ios, uisegmentedcontrol

好的，所以我有一个分段控件，我需要动态删除和添加分段。这段代码将删除第一段，但没有设置要选择的正确段。奇怪的是，当我打印出来时，所有的数字都是正确的，它只是屏幕上突出显示的部分，它总是输出 -1。

```
 if ([outControl numberOfSegments]==4) {
                int previous = [outControl selectedSegmentIndex];
                if (previous>0) {
                    previous--;
                }
                [outControl removeSegmentAtIndex:0 animated:YES];

                NSLog(@"setting to %d with %d segments", previous ,[outControl numberOfSegments]);
                [outControl setSelectedSegmentIndex:previous];

            } 
```

这是日志设置为 1 和 3 个段。有了这个日志段0实际上在控件中被选中，我不能按段1，因为控件认为它被选中了？我可以按第 0 段，即使那是显示为选中的段。

这是一个屏幕截图，试图澄清我的问题。

[图片](http://i.stack.imgur.com/KMUPS.png) 单元格中的文本是正确的，因为您可以从日志中看到实际选择了单元格 1。但是突出显示的单元格是0！？这让我疯狂。仅在删除我遇到问题时才添加分段时，这一切都有效。

任何人都可以看到哪里出错了吗？

非常感谢

朱尔斯

我注意到，即使我没有设置新的选定段，我也会得到相同的结果，即选择了错误的段.....?? 如果这对任何人有帮助，这也都是用 cellForRowAtIndexPath 编码的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T16:37:41.207

代码看起来正确但行为（错误）就像您描述的那样。当在运行循环的同一轮中更改选择作为段删除时，控件似乎处于尴尬状态。但这有效：

```
-(void)setSegmentedSelection:(NSNumber *)indexNum {
    NSInteger index = [indexNum intValue];
    [outControl setSelectedSegmentIndex:index];
}

// then instead of setting the selected index after the segment is removed,
// let the run loop return...

[self performSelector:@selector(setSegmentedSelection:) withObject:[NSNumber numberWithInt:previous] afterDelay:0.0]; 
```

我很惊讶它不能像你编码的那样工作，但至少在我们弄清楚之前，这是一个解决方法。

# adobe-illustrator - 根据 Excel 数据制作图表

> ID：10231762
> 
> 赞同：1
> 
> 时间：2012-04-19T15:43:50.123
> 
> 标签：adobe-illustrator

我不太喜欢 Illustrator，所以这可能是一件容易的事。

我想根据 Excel 中的数据行创建数千个图形（例如饼图）。

像这样的东西：

1.  创建某种模板。
2.  导入数据。直接从 Excel 文件或通过 CSV。
3.  根据模板制作图表文件。每行生成 1 个文件。

Excel 中的第一列可以是设置文件名的客户编号。

这可能吗。

顺便说一句：目标是将图表链接到 InDesign 模板，其中客户编号告诉 InDesign 要链接到当前帖子的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-16T05:35:27.580

我认为这是不可能的，如果你想制作图表然后点击“J”并开始制作任何类型的图表。但是使用javascript可能可以批量进行。

# android - i5、6GB RAM 和 Android 3.0-3.2 模拟器仍然无法使用（无法启动任何应用程序）？

> ID：10231766
> 
> 赞同：0
> 
> 时间：2012-04-19T15:44:00.323
> 
> 标签：android, android-emulator, android-3.0-honeycomb

我不知道该怎么办。我购买了一台新笔记本电脑，hp pavillion i5 6GB RAM，启动了 Android 3.2 模拟器，它**仍然像无法使用一样慢！！！**

不是它慢，而是我**什么都做不了**。

我在模拟器上设置了 1GB 的 RAM，禁用了摄像头并运行它。当我单击应用程序时，它们首先加载 30 秒，然后我无法启动任何应用程序，不是我的，不是默认的。我所能做的就是返回桌面并打开应用程序菜单。

我看到人们抱怨模拟器很慢，我什至无法让它运行。更糟糕的是，我的笔记本电脑像三明治一样吃游戏，但被 Android 模拟器 3.2 卡住了。Android 3.0 模拟器也是如此！

谁能帮我设置模拟器以便我可以在我的机器上运行它？

PS。如果你愿意，我会录制一段视频并将其发布以直观地了解我在说什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T17:03:12.283

> 我不知道该怎么办。我购买了一台新笔记本电脑，hp pavillion i5 6GB RAM，启动了 Android 3.2 模拟器，它仍然像无法使用一样慢！！！

Android 模拟器使用单核。如果您使用带有 Turbo Boost 的 Core i7，那将会有所帮助。您的 Core i5 在每个内核的基础上并不是一个特别强大的 CPU。

Android 3.x 仿真器也完全在软件中处理所有图形（无硬件图形加速），并将 ARM 指令动态转换为 x86。

> 谁能帮我设置模拟器以便我可以在我的机器上运行它？

首先使用带有最新 Android 开发工具的 Android 4.0 模拟器。这使用您桌面的 GPU 进行图形渲染，它有助于提高性能。

如果这证明不够，如果您不进行 NDK 开发（您倾向于在 ARM 上进行测试），您可以开始切换到 x86 仿真器映像。目前，唯一的官方 x86 映像是针对 2.3.3 的，但[有一个由 AOSP 构建的 4.0.3 的非官方](http://blog.testobject.org/2012/04/giving-your-android-emulator-boost.html)映像，运行速度非常快（至少在 Linux 上，还没有在 Windows 上尝试过）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T13:18:59.580

我对您的唯一建议是在 Eclipse 中的 Window->Preferences->Android->DDMS 下更改“ADB Connection Timeout (ms)”。我正在使用 HP Pavillion 486 笔记本电脑，并且真的在模拟器上苦苦挣扎。我将默认超时值从 5000 毫秒（5 秒）更改为 60000 毫秒（1 分钟）。这并没有解决我的所有问题，但它确实有助于启动模拟器和我的应用程序。

# pdf - iTextSharp 表格单元格间距可能吗？

> ID：10231770
> 
> 赞同：11
> 
> 时间：2012-04-19T15:44:13.413
> 
> 标签：pdf, itext

是否可以在 iTextSharp 的表格（PdfPTable）中设置单元格间距？我看不到任何可能的地方。我确实看到了一个使用 iTextSharp.text.Table 的建议，但在我的 iTextSharp (5.2.1) 版本上似乎不可用。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-19T16:45:09.313

如果您正在寻找像 HTML 这样的真正单元格间距，那么不，它`PdfPTable`本身不支持。但是，`PdfPCell`支持一个属性，该属性采用自定义实现，`IPdfPCellEvent`每当单元格布局发生时都会调用该属性。下面是一个简单的实现，您可能需要根据需要对其进行调整。

```
public class CellSpacingEvent : IPdfPCellEvent {
    private int cellSpacing;
    public CellSpacingEvent(int cellSpacing) {
        this.cellSpacing = cellSpacing;
    }
    void IPdfPCellEvent.CellLayout(PdfPCell cell, Rectangle position, PdfContentByte[] canvases) {
        //Grab the line canvas for drawing lines on
        PdfContentByte cb = canvases[PdfPTable.LINECANVAS];
        //Create a new rectangle using our previously supplied spacing
        cb.Rectangle(
            position.Left + this.cellSpacing,
            position.Bottom + this.cellSpacing,
            (position.Right - this.cellSpacing) - (position.Left + this.cellSpacing),
            (position.Top - this.cellSpacing) - (position.Bottom + this.cellSpacing)
            );
        //Set a color
        cb.SetColorStroke(BaseColor.RED);
        //Draw the rectangle
        cb.Stroke();
    }
} 
```

要使用它：

```
//Create a two column table
PdfPTable table = new PdfPTable(2);
//Don't let the system draw the border, we'll do that
table.DefaultCell.Border = 0;
//Bind our custom event to the default cell
table.DefaultCell.CellEvent = new CellSpacingEvent(2);
//We're not changing actual layout so we're going to cheat and padd the cells a little
table.DefaultCell.Padding = 4;
//Add some cells
table.AddCell("Test");
table.AddCell("Test");
table.AddCell("Test");
table.AddCell("Test");

doc.Add(table); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T16:19:17.090

从 5.x 开始，表类已从 iText 中删除，以支持 PdfPTable。

至于间距，您正在寻找的是 setPadding 方法。

查看 iText 的 API 了解更多信息：

[http://api.itextpdf.com/itext/com/itextpdf/text/pdf/PdfPCell.html](http://api.itextpdf.com/itext/com/itextpdf/text/pdf/PdfPCell.html)

（它适用于 Java 版本，但 C# 端口维护方法的名称）

# .net - 通用的 ？抽象类？设计我的代码的最佳方法是什么？

> ID：10231773
> 
> 赞同：0
> 
> 时间：2012-04-19T15:44:22.820
> 
> 标签：.net, generics, collections, virtual, abstract

```
 class TypeA 
  {
      public TypeA Copy () { ... }
      public bool IsEqual(TypeA mytypeA) { ... }
      public bool IsSame(TypeA mytypeA) { ... }
      ...
  }

  class TypeACollection : List<TypeA>
  {
      public bool IsSame (TypeACollection typeAs)
      {
          if (Count != typeAs.Count) 
              return false;
          return this[0].IsSame(typeAs[0]);
      }
      ...
  } 
```

TypeB、TypeC 具有与 TypeA 类似的 Copy/IsEqual/IsSame 功能。TypeBCollection、TypeACollection 有类似的 IsSame。例外是 TypeBCollection 使用 TypeB.IsSame，TypeCCollection 使用 TypeC.IsSame。

现在，我计划添加 2 个新类：LocData 和 LocDataCollection

```
class LocData 
{
    public virtual TypeA Copy () { ... }
    public virtual bool IsEqual(TypeA mytypeA) { ... }
    public virtual bool IsSame(TypeA mytypeA) { ... }
    ...
}

class LocDataCollection<T> : List<LocData> where T: LocData
{
    public bool IsSame (LocDataCollection<T> typeAs)
    {
        if (Count != typeAs.Count) 
        return false;
        return this[0].IsSame(typeAs[0]);
    }
    ...
} 
```

并重写现有代码，

```
class TypeA : LocData
{
    public new TypeA Copy () { ... }
    public new bool IsEqual(TypeA mytypeA) { ... }
    public new bool IsSame(TypeA mytypeA) { ... }
    ...
}

class TypeACollection : ???
{
    ??? 
    // so I can remove IsSame here, 
    // when I call IsSame, it will use one from LocDataCollection and still call 
    // TypeA.IsSame
    ...
} 
```

现在我迷失在抽象/虚拟/通用/...，这是最好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:47:50.087

您应该替换`new`为`overrides`，然后创建一个`LocDataCollection<T> : Collection<T> where T : LocData`.

# tfs - 从递归 tfs 中排除文件夹路径

> ID：10231774
> 
> 赞同：2
> 
> 时间：2012-04-19T15:44:25.970
> 
> 标签：tfs

`tf get`如果我在 cli 我的目录上发出命令，`$/common/lib`就像这样

`tf get d:\work\common\lib /recursive`我希望能够说（不更改我的工作区）排除**这些**子目录，所以。

可以说我想得到除了 `$/common/lib/foo`.

结果是我会把所有东西都放在`$/common/lib`除了`$/common/lib/foo`.

这甚至可能吗。我很感激可能是时候重构`foo`目录所在的位置以使其更容易，但目前这是不可能的

另一种方法是连接到存储库并在我想要的目录上调用单独的操作。所有这一切都是由脚本完成的，因此希望一个班轮更有效率。如果做不到就做不到:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T16:54:33.470

最简单的解决方案是使用服务器上的隐藏文件夹，并让它为您排除这些项目。您提到不想更改您的工作区，但是仅临时修改您的工作文件夹映射以添加斗篷非常简单，例如：

```
tf workfold /cloak $/common/lib/foo
tf get $/common/lib /recursive
tf workfold /decloak $/common/lib/foo 
```

不完全是单线，但替代方案可能是`$/common/lib/foo`专门获取所有子文件夹（除了 ）。

# sql - 使用 INSERT-OUTPUT 为另一个 INSERT 提供值

> ID：10231776
> 
> 赞同：3
> 
> 时间：2012-04-19T15:44:26.283
> 
> 标签：sql, tsql, insert

再会，

我想知道是否可以使用 INSERT-OUTPUT 语句为另一个外部 INSERT 语句提供值。这样，可以在单个语句中将值添加到实体表和交集表中 - 我希望我的措辞有效。例如：

```
INSERT INTO [#tblIntersect] ([Entity1ID], [Entity2ID])
VALUES
(
    INSERT INTO [#tblEntity1] ([Value])
    OUTPUT [inserted].[ID] AS [entity1ID], @entity2ID AS [entity2ID]
    VALUES ('One')
) 
```

因此，内部 INSERT-OUTPUT 语句将向 table 添加一个新实体`#tblEntity1`。新实体的`ID`（设置为，`IDENTITY(1, 1)`然后将通过`OUTPUT`语句返回，以及一个静态值（我的代码中已经有），为外部`INSERT`语句提供两个值。

我认为可能的原因是内部`INSERT-OUTPUT`语句的执行无论如何都会返回一个表，并且这种输出通常可用于为`INSERT`语句提供值。

显然这个例子是行不通的；我希望这只是一个简单的语法问题。

提前感谢您的任何意见和建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T16:16:57.020

根据[文档](http://msdn.microsoft.com/en-us/library/ms177564%28v=sql.105%29.aspx)，您的要求是可能的。

假设 #tblIntersect 有两个匹配的 id 列，这应该可以工作

```
INSERT INTO [#tblEntity1] ([Value])
OUTPUT [inserted].[ID] AS [entity1ID], @entity2ID AS [entity2ID]
   INTO #tblIntersect
VALUES ('One') 
```

# ruby - 我怎样才能获得浅绿色的 ansi 代码并为 ruby 获得更大的字体？

> ID：10231778
> 
> 赞同：3
> 
> 时间：2012-04-19T15:44:34.157
> 
> 标签：ruby, colors, gnome-terminal, ansi-escape

`printf "\033[1;32;40mGreen text on black background.\033[0m\n"`

那是绿色，但我怎样才能得到浅绿色或其他颜色的变化？

[http://pueblo.sourceforge.net/doc/manual/ansi_color_codes.html](http://pueblo.sourceforge.net/doc/manual/ansi_color_codes.html)，只有那些颜色可用于 gnome-terminal 作为转义码吗？

另外，我怎样才能用 ruby​​ 获得更大的字体？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T15:49:58.843

使用“1”作为第一个参数，正如您已经在做的那样，这就像您将要得到的“浅”绿色。这个人的网页可能会有所帮助：[http ://www.linuxfocus.org/English/May2004/article335.shtml](http://www.linuxfocus.org/English/May2004/article335.shtml)

在 urxvt 上测试：

![在 urxvt 而非 Gnome 上进行测试](../Images/d70d5726d900b35e7972bc600aa5c6b3.png)

[稍后添加] 双倍大小字符有一个 DEC 扩展：[使用 Ncurses 打印双倍大小字符](https://stackoverflow.com/questions/3470106/printing-double-size-characters-with-ncurses)但 urxvt 不支持它，我不知道 Gnome 终端。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-07T12:29:02.087

使用偏移量`90`可以创建*明亮/高对比度的*颜色。

请参阅[此处](http://jafrog.com/2013/11/23/colors-in-terminal.html)以获取参考。[维基百科](http://en.wikipedia.org/wiki/ANSI_escape_code)提到了*明亮*的颜色范围，但并没有真正解释如何使用它们（如果我没有错过的话）。

如果将它与粗体样式结合起来，您可以创建 4 种颜色变化。

例子：

![4 种蓝色](../Images/50695ca7ade2608cead2877b3a5af271.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T15:49:45.423

这是终端支持的问题。您列出的 ansi 代码由终端仿真器解释，这些代码是唯一可用的颜色（它来自 windows 之前的日子，当时 16 种颜色引起了轰动）。

如果您需要更多，您可以考虑在您的 ruby​​ 应用程序中使用图形界面，例如 tk。

# ios - 强制下载 iOS 5.0.1 符号

> ID：10231779
> 
> 赞同：5
> 
> 时间：2012-04-19T15:44:37.750
> 
> 标签：ios, xcode, ios5, symbolicate

一位客户从 iOS 5.0.1 (9A405) 设备向我发送了崩溃日志。我在 Snow Leopard 上运行 Xcode 4.2。崩溃日志调用堆栈的系统部分无法符号化，似乎它们与崩溃有关；Xcode 中没有 iOS 5.0.1 符号。我没有 5.0.1 的设备，而且我认为我无法安装它，现在 5.1 是最新的。

有没有办法在不插入设备的情况下在 Xcode 中强制下载给定 iOS 版本的符号？

编辑：似乎您可以使用 Xcode 的管理器和恢复软件映像将特定的 iOS 版本强制安装到设备上。但是，Dev Portal 仅提供 5.1 还原映像以供下载。旧的可以在任何地方使用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T21:08:43.680

5.0.1固件的链接如下：

*   iPhone 4S[在这里](http://appldnld.apple.com/iPhone4/041-3305.20111109.Bghy6/iPhone4,1_5.0.1_9A405_Restore.ipsw)
*   iPhone 4 (GSM)[在这里](http://appldnld.apple.com/iPhone4/041-3309.20111109.64rtg/iPhone3,1_5.0.1_9A405_Restore.ipsw)
*   iPhone 4 (CDMA)[在这里](http://appldnld.apple.com/iPhone4/041-3304.20111109.Vgtyh/iPhone3,3_5.0.1_9A405_Restore.ipsw)
*   iPhone 3GS[在这里](http://appldnld.apple.com/iPhone4/041-3307.20111109.5tGhu/iPhone2,1_5.0.1_9A405_Restore.ipsw)
*   iPad 2 WiFi[在这里](http://appldnld.apple.com/iPhone4/041-3310.20111109.Cfp76/iPad2,1_5.0.1_9A405_Restore.ipsw)
*   iPad 2 GSM[在这里](http://appldnld.apple.com/iPhone4/041-3311.20111109.Vpr43/iPad2,2_5.0.1_9A405_Restore.ipsw)
*   iPad 2 CDMA[在这里](http://appldnld.apple.com/iPhone4/041-3312.20111109.zp3ws/iPad2,3_5.0.1_9A405_Restore.ipsw)
*   iPad[在这里](http://appldnld.apple.com/iPhone4/041-3308.20111109.Fvgtr/iPad1,1_5.0.1_9A405_Restore.ipsw)
*   iPod touch 3G[在这里](http://appldnld.apple.com/iPhone4/041-3314.20111109.Mbgh6/iPod3,1_5.0.1_9A405_Restore.ipsw)
*   iPod touch 4G[在这里](http://appldnld.apple.com/iPhone4/041-3313.20111109.Azxe3/iPod4,1_5.0.1_9A405_Restore.ipsw)

你能用这些吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T20:59:54.957

抱歉，如果您还没有保存您的 SHSH blob，您将无法恢复旧版本的 iOS。我建议您从现在开始使用 TinyUmbrella 保存您的 blob，这样就不会再发生这种情况了。

# apache - URL 重写不起作用

> ID：10231787
> 
> 赞同：0
> 
> 时间：2012-04-19T15:45:03.193
> 
> 标签：apache, mod-rewrite

我正在使用 mod_rewrite 为我的网站编写更多用户友好的 URL。我复制并修改了另一个页面的工作规则，但它似乎不想工作......

这是规则

```
RewriteRule ^list/(.*)/page/([0-9])/$ list.php?date=$1&page=$2 
```

工作规则看起来像这样

```
RewriteRule ^read/(.+)/$ read.php?target=$1 
```

据我所知，新规则应该有效......如果有人能提出为什么它不能并可能提供修复，我将不胜感激

谢谢你的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:57:15.527

如果您的页码可以有多个数字，则表达式的该部分应为 ([0-9]+) 以要求 1 个或多个数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T06:18:49.957

男孩，我现在觉得自己像个白痴……

今天早上上班的时候又看了一遍，发现这个规则其实并没有什么问题。我没有改变我的链接...

对于引用此内容的任何人，遇到类似问题：如果您像我上面那样编写 RewriteRule，请确保更改链接`href`属性以使用新 URL

所以，就我而言...

```
RewriteRule ^list/(.*)/page/([0-9]+)/$ list.php?date=$1&page=$2 
```

链接必须从

```
<a href="list.php?date=2012April&page=1>April 2012</a> 
```

至

```
<a href="/list/2012April/page/1/ 
```

我忘了更改链接**derp**

# tomcat - Tomcat 6 并在部署时更新 context.xml

> ID：10231791
> 
> 赞同：1
> 
> 时间：2012-04-19T15:45:10.307
> 
> 标签：tomcat, tomcat6

我在用着：

*   雄猫 6.0.30

这是我的 Web 应用程序项目中的 context.xml 和 web.xml 结构：

*   元信息
    *   上下文.xml
*   网络信息
    *   web.xml

当我为我的应用程序生成 WAR 文件时，context.xml 正在按预期打包。当我将 WAR 文件复制到 Tomcat webapps 文件夹并启动 Tomcat 时，会提取 WAR 文件并将 context.xml`\conf\Catalina\localhost\<webappname>.xml`按预期复制到。但是，这仅在`<webappname>.xml`不存在时才有效。因此，如果不先删除现有的`<webappname>.xml`. 我知道这是基于阅读文档的预期功能。

我的问题是，那我该怎么办？如何对 context.xml 进行更新并自动复制这些更新，就好像它们是全新的一样？我不想`<webappname>.xml`在每次发布之前都删除。

也许我会以错误的方式解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T23:40:42.900

如果您首先取消部署应用程序，.xml 文件将从 conf/Catalina/localhost 文件夹中删除。然而，仅仅放弃一个新的战争并不会触发一个取消部署（只是一个部署），并且旧的 xml 文件不会被替换。

您可以通过以下任一方式取消部署应用程序：

*   删除 webapps 文件夹中的 war 文件 - tomcat 将取消部署应用程序（如果主机配置的 server.xml 中的 autoDeploy 设置为 true）
*   如果您安装了管理器应用程序，您可以在应用程序上发出删除/删除/取消部署命令，或者在上传新战争时可能有一个“取消部署”选项（我不记得是哪个）

# c# - 当我更改 global.asax 中的 url 时，注册中断

> ID：10231794
> 
> 赞同：0
> 
> 时间：2012-04-19T15:45:17.813
> 
> 标签：c#, asp.net-mvc, global-asax

以下 rout 注册适用于我的 asp.net MVC 应用程序

```
 routes.MapRoute("TrackingChannels", "TrackingChannels/{action}",
        new { controller = "TrackingChannels", action = "Index" }); 
```

当我**改变**它来捕捉这个网址时，

我收到`resource not found`错误

> 对于 localhost:85\dis\TrackingChannels

```
 routes.MapRoute("TrackingChannels", "Dis/TrackingChannels/{action}",
            new { controller = "TrackingChannels", action = "Index" }); 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T20:23:28.367

好吧，我需要出去，所以我现在就发布这个，因为我不知道我还要多久。

我设置了一个默认的 MVC 3 项目并更改了路由以匹配您的情况。

全球.asax：

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute(
        "TrackingChannels", 
        "Dis/TrackingChannels/{action}", 
        new { controller = "TrackingChannels", action = "Index" }
    );

    routes.MapRoute(
        "Default",
        "{controller}/{action}/{id}",
        new { controller = "Home", action = "Index", id = UrlParameter.Optional }
    );
} 
```

添加了一个`TrackingChannelsController`：

```
public class TrackingChannelsController : Controller
{
    public ActionResult Index()
    {
        return View();
    }

    public ActionResult Test()
    {
        return View();
    }
} 
```

我特意添加了这个`Test`动作，看看是否`/dis/trackingchannels/{action}`也能奏效。然后我添加了几个视图，从而产生了以下项目结构：

![项目设置](../Images/5f9bd6dfdb8913fe0f67339dacbc3cd0.png)

最后，这是在浏览器中指定 URL 的结果：

首先是`/dis/trackingchannels`：

![TrackingChannels 索引](../Images/bfd7069b5bf549526013aca14dd46068.png)

第二个`/dis/trackingchannels/test`：

![TrackingChannels 测试](../Images/1200934ec22d6e9f317b78abebf5b0e3.png)

在没有看到您的项目的情况下，我唯一能说的就是仔细检查 URL 是否匹配正确的路由。为此，您可以使用[Phil Haack 的 RouteDebugger](http://haacked.com/archive/2008/03/13/url-routing-debugger.aspx)。

# functional-programming - 有没有办法在 Oz 中存储函数/过程调用？

> ID：10231797
> 
> 赞同：2
> 
> 时间：2012-04-19T15:45:28.627
> 
> 标签：functional-programming, higher-order-functions, oz, mozart

我想知道是否有办法将整个函数调用绑定到 Oz 中的变量中。例如，我确实有：

```
fun {F1 A1 A2} 
    A1+A2 
end 
```

和一个局部变量`X`。

我想要做的是将调用（按原样）存储`{F1 1 2}`在`X`而不是其结果中：`3`，以便我可以`{F1 1 2}`通过某种方式再次调用`X`.

这在奥兹可能吗？如果是这样，怎么做？

谢谢您的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T17:48:56.617

最简单的方法是动态创建一个不带参数的函数，例如

```
fun {CreateCall F A1 A2}
   fun {$}
      {F A1 A2}
   end
end

fun {F A1 A2}
   A1 + A2
end

C = {CreateCall F 1 2}

{Show {C}} 
```

该函数`CreateCall`创建并返回一个匿名空函数，该函数使用给定的参数调用 F。（这种技术类似于 Haskell 等语言中的部分函数应用程序。）

`Procedure.apply`可以使用库函数( [doc](http://www.mozart-oz.org/documentation/base/procedure.html) )将其推广到任意数量的参数。如果您想这样做并需要帮助，请告诉我。

# jquery - 从 iframe 本身内部获取 iframe src 参数

> ID：10231805
> 
> 赞同：11
> 
> 时间：2012-04-19T15:45:42.633
> 
> 标签：jquery, iframe

我有一个 iframe，需要在 javascript 变量中捕获 src 属性。这就是我的 iframe 的样子

```
<iframe id="iframe_module_46081" name="iframe_module_46081" src="//myurl.com/tabs/495/campaigns/0ed3ffa8-5050-4a18-a5e3-f348d12a1304?signature=6aa3005368f163539976460246f2f0839c0fb3e3&amp;id=678326">
<script>$(document).ready(function(){
  var name = window.name;
  var src = ????;
})
</script>
</iframe> 
```

我可以通过 window.name 但不能通过 src 属性获取名称。任何想法？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-19T15:54:50.520

如果跨域检查允许，请尝试`window.frameElement.src`. 否则，您将不走运，独自一人`location.href`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T15:48:38.730

您正在寻找`document.location`，就像任何其他文件一样。
每个帧都有自己的`document`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T15:49:59.323

```
var src = top.document.getElementById("iframe_module_46081").src; 
```

如果您不想使用 jquery 选择器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-26T23:11:07.287

至于我现在，我最终将初始 iframe location.href 保存到窗口对象。(window.PROJECT_NAME_FIRST_URL_LOADED = window.location.href) 在应用程序可以更改其 URL 之前，应用程序引导中的某个位置。

我们可以使用它的另一个地方是历史 API，但我相信在您返回初始状态之前它没有有关初始 URL 的信息。

# c# - 平滑/直观地迭代 Microsoft Word 文档中的单词

> ID：10231808
> 
> 赞同：1
> 
> 时间：2012-04-19T15:45:51.667
> 
> 标签：c#, algorithm, vba, ms-word, interop

我在 ActiveDocument.Characters 上有一个循环。

我已检索到文档区域的设备上下文句柄，并希望显示一个覆盖以从左到右逐行平滑地突出显示文本。

目标是实现流畅的动画效果，就像应用程序引导您以一定的速度阅读一样。

当然，循环本身并不平滑。对算法的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T21:39:51.020

动画有什么不流畅的地方？它的动画很漂亮。做得很好:)

如果您指的是绘制下一个矩形的方式，我相信（*而且我可能是错*的），这完全取决于`this.RenderSpeed`. 值越小，动画越平滑。在当前代码中，它看起来最好`this.RenderGuidePoint.Offset(1, 0);`在`this.RenderGuidePoint.Offset(25, 0);`.

我不是图像专家，但这是我能想到的一个例子（虽然不是最好的例子）。想象一下您正在观看的电影，这完全取决于帧速率。如果 fps 超过正常人眼可以处理的速度，您会注意到图像显得更加突然（*例如：当您使用 2X 或 4X 快进电影时*）。同样，您在代码中使用的 .Offset() 越多，矩形的绘制看起来就越突然。

那么解决方案是什么？

由于我们不能对正在绘制的下一个矩形的“X”做太多事情，我们可以操纵 Timer 的时间间隔以实现更平滑的创建（重新绘制*矩形*）。**出于测试目的，我对一些值进行了硬编码，并对输出感到满意。看看你是否也得到了我得到的结果。**

```
private void ToolStripComboBoxSpeed_SelectedIndexChanged (object sender, System.EventArgs e)
{
    this.RenderSpeed = (int) this.ToolStripComboBoxSpeed.SelectedItem;

    Switch (this.RenderSpeed)
    {
        case 5: TimerGuide.Interval = 50; break;
        case 10: TimerGuide.Interval = 40; break;
        case 15: TimerGuide.Interval = 30; break;
        case 20: TimerGuide.Interval = 20; break;
        case 25: TimerGuide.Interval = 10; break;
    }
}

private void PictureBox_Paint (object sender, System.Windows.Forms.PaintEventArgs e)
{
   //
   // '~~> Rest of the code remains same
   //

   //this.RenderGuidePoint.Offset(this.RenderSpeed, 0);
   this.RenderGuidePoint.Offset(1, 0);

   //
   // '~~> Rest of the code remains same
   //
} 
```

高温高压

# php - PHP 命名空间全局

> ID：10231809
> 
> 赞同：5
> 
> 时间：2012-04-19T15:45:51.643
> 
> 标签：php, namespaces

有没有办法让 PHP 命名空间允许在命名空间内调用函数，就好像它们是全局的一样？

例子：

```
handle() 
```

而不是：

```
prggmr\handle() 
```

这是我的示例代码：

```
<?php
require_once 'prggmr/src/prggmr.php';

prggmr\handle(function() {
  echo 'This is a test scenario';
}, 'test');

prggmr\signal('test'); 
```

别名不适用于函数：

```
<?php
require 'prggmr/src/prggmr.php';
use prggmr\handle;

handle(function(){
    echo "Test";
}, "test"); 
```

结果：

```
Fatal error: Call to undefined function handle() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:48:19.007

不是整个命名空间，不。但是对于单个名称，您可以

```
use p\handle; 
```

[别名](http://gr2.php.net/manual/en/language.namespaces.importing.php) 为`p\handle`just `handle`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T17:16:10.790

据我了解，文档中的这段摘录说这是不可能的......

> 函数和常量都不能通过 use 语句导入。

来源：

[http://www.php.net/manual/en/language.namespaces.faq.php#language.namespaces.faq.nofuncconstantuse](http://www.php.net/manual/en/language.namespaces.faq.php#language.namespaces.faq.nofuncconstantuse)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-11T18:33:41.567

以为我会为现代 PHP 添加一个答案，因为我最近了解到：

> 在 PHP 5.6 之前，函数和常量都不能通过 use 语句导入。自 PHP 5.6 起，允许使用别名或导入函数和常量名称。

因此，这些天您的第二个代码示例应该可以正常工作。

还值得一提的是，您可以为 PHP 命名空间定义块作用域，[尽管不鼓励这样做](http://php.net/manual/en/language.namespaces.definitionmultiple.php)。所以这会起作用：

```
<?php
require_once 'prggmr/src/prggmr.php';

namespace prggmr {
    handle(function() {
      echo 'This is a test scenario';
    }, 'test');

    signal('test');
} 
```

# excel - 将一个单元格设置为另一个单元格的值如果另一个单元格是值 X

> ID：10231811
> 
> 赞同：0
> 
> 时间：2012-04-19T15:45:57.550
> 
> 标签：excel

当第二个单元格的值是 X 时，excel 中是否有一个公式可以让您获得另一个单元格的值？

例如，类似：

```
=GETWHEN(A1,3,B2) 
```

当 A1 值为 3 时，它将返回 B2 的单元格值。

因此，假设您有一个单元格 B2=4*B1。而 B1 你设置为 3，所以 B2 将显示 12。但我想制作一行条目来绘制当 A1 为 1、2、3、4、5 等时 B2 将是什么......

![http://i44.tinypic.com/21eua80.png](../Images/90ca6023d2648ac2fd624a06e3f697f7.png)

我可以在 A1 值下放置什么？

编辑：我不是在寻找条件意义上的 if like。我正在寻找 WHEN 的值（现在已编辑）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:48:33.697

您正在考虑[数据表](http://office.microsoft.com/en-us/excel-help/create-a-one-variable-data-table-HP005199545.aspx)。

前提是您的值在 中`E2:E6`，公式在`B2`：

*   在单元格 F1 中输入`=B2`。
*   选择`E1:F6`。
*   进入盒子（B1 是 B2`Data - Data table`所依赖的单元格）`B1`。`Row input cell`

# recursion - Prolog 中的递归 - 寻找城市之间的路径

> ID：10231815
> 
> 赞同：2
> 
> 时间：2012-04-19T15:46:24.833
> 
> 标签：recursion, prolog, unification

我正在努力完成[本页](http://www.learnprolognow.org/lpnpage.php?pagetype=html&pageid=lpn-htmlse12)底部的练习，但我发现自己对第 3 点完全感到困惑。

> 我们得到以下旅游信息知识库：

```
byCar(auckland, hamilton). 
byCar(hamilton, raglan). 
byCar(valmont, saarbruecken). 
byCar(valmont, metz). 

byTrain(metz, frankfurt). 
byTrain(saarbruecken, frankfurt). 
byTrain(metz, paris). 
byTrain(saarbruecken, paris). 

byPlane(frankfurt, bangkok). 
byPlane(frankfurt, singapore). 
byPlane(paris, losAngeles). 
byPlane(bangkok, auckland). 
byPlane(singapore, auckland). 
byPlane(losAngeles, auckland). 
```

很容易确定是否可以在两个城市之间旅行。我只是这样做了：

```
connected(X, Y) :- byCar(X, Y); byTrain(X, Y); byPlane(X, Y).
travel(X, Y) :- connected(X, Y).
travel(X, Z) :- connected(Y, Z), travel(X, Y). 
```

但是，当我必须用变量实际统一路径时，我完全糊涂了！

我写了这个：

```
connected(X, Y) :- byCar(X, Y); byTrain(X, Y); byPlane(X, Y).
connected(Y, Z, Out) :- connected(Y, Z).
travel(X, Y, Out) :- connected(X, Y).
travel(A, Z, Out) :- connected(Y, Z),travel(A, Y, connected(Y, Z, Out)). 
```

并叫`travel(valmont, losAngeles,X).`

除了最后的匿名变量之外，在跟踪过程中有一个点会显示正确的路径：

`travel(valmont, metz, connected(metz, paris, connected(paris, losAngeles, _17)))`

但我实际上不知道如何将它与变量统一起来`X`！

我实在是想不通这个。谁能给我一个提示只是为了把我推向正确的方向？我只是缺少一个终止条件还是什么？

编辑：

我现在有：

```
connected(X,Y) :- byCar(X,Y);byTrain(X,Y);byPlane(X,Y).

go(X,Y) :- connected(X,Y).

travel(X,Y,go(X,Y)) :- connected(X,Y).
travel(A,Z,Path) :- travel(Y,Z,Path),go(A,Y,Path).

go(A,Y,Path) :- travel(A,Y,Path). 
```

但它会像这样卡住：

```
4    4  Exit: byPlane(paris,losAngeles) ? 
3    3  Exit: connected(paris,losAngeles) ? 
2    2  Exit: travel(paris,losAngeles,go(paris,losAngeles)) ? 
5    2  Call: go(metz,paris,go(paris,losAngeles)) ? 
6    3  Call: travel(metz,paris,go(paris,losAngeles)) ? 
7    4  Call: travel(_217,paris,go(paris,losAngeles)) ? 
8    5  Call: travel(_242,paris,go(paris,losAngeles)) ? 
9    6  Call: travel(_267,paris,go(paris,losAngeles)) ? 
10    7  Call: travel(_292,paris,go(paris,losAngeles)) ? 
```

我玩过它，但我无法让它来构建整个`go(a,b,go(b,c))`等等......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:57:43.410

我会给你递归的基本情况：

```
travel(X, Y, go(X, Y)) :- connected(X, Y). 
```

递归的情况看起来非常相似，除了`go/3`您正在构建的术语必须将位置作为其前两个参数，并将路径（另一个`go/2`或`go/3`术语）作为其第二个参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-13T13:34:02.343

我让一位病理学家通过以下方式向我解释了这一点：

您的目标是获得 X = go(valmont,metz,go(metz,paris,go(paris,losAngeles))) 以响应查询 travel(valmont,losAngeles,X)。

为了解决这个问题，你的 travel/3 谓词需要有 From、To 和 Path，但它必须以没有 Path 的简单 go(From, To) 结尾。简单的 go(From, To) 是你的 travel/3 的基本条件，所以：

```
travel(X, Y, go(X, Y)) :- connected(X, Y). 
```

这正是 larsmans 所说的。

现在，您需要创建递归 travel/3 谓词：

```
travel(X, Y, go(X, Z, Path)) :-
 connected(X, Z),
 travel(Z, Y, Path). 
```

你的 go/2 谓词是多余的，而且有点令人困惑，因为 travel/3 谓词看起来像一个 go 谓词。通过删除 go/2 谓词，代码更易于阅读和理解。

# python - Python：如何获取字符串中连续的 n 大小片段？

> ID：10231816
> 
> 赞同：0
> 
> 时间：2012-04-19T15:46:26.580
> 
> 标签：python

给定一个字符串，如`"8584320342564023450211233923239923239110001012346596"`，如何获得所有连续的 4 位子序列？

例如，上面的字符串将产生：`8548`, `5843`, `8432`, `0342`, ...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T15:51:09.933

我认为这可以满足您的要求：

```
es = '8584320342564023450211233923239923239110001012346596'
strings = [es[x:x+4] for x in xrange(0, len(es)-3)] 
```

输出

```
>> strings
Out[42]: 
['8584',
 '5843',
 '8432',
 '4320',
 '3203',
 '2034',
 '0342',
 '3425',
 '4256',
 '2564',
 '5640',
 '6402',
 '4023',
 '0234',
 '2345',
 '3450',
 '4502',
 '5021',
 '0211',
 '2112',
 '1123',
 '1233',

  ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T15:50:09.703

您可以使用以下代码获取`n`从`i`^(th)位置开始的字符子序列：

```
str[i:i+n] 
```

请注意，第 0^个位置是字符串的开头，而不是第 1^个。我的意思是`str[0:0+n]`会给你前 n 个字符而不是`str[1:1+n]`

这是代码：

```
s =  "8584320342564023450211233923239923239110001012346596"

for i in range(len(s) - 3):
    print(s[i:i+4]) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T15:50:18.697

```
data = "8584320342564023450211233923239923239110001012346596"
span = 4
for i in range(len(data) - span + 1):
    print data[i:i+span] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T15:57:37.277

这是一个正则表达式解决方案：

```
import re
re.findall("[0-9]{4}","8584320342564023450211233923239923239110001012346596") 
```

**编辑**：感谢评论，我看到你真正想要的是所有重叠的匹配。我在这里找到了一个现有的 stackoverflow 答案： [Python regex find all重叠匹配？](https://stackoverflow.com/questions/5616822/python-regex-find-all-overlapping-matches)

使用它作为所需正则表达式的提示。在您的情况下，您可以使用：

```
>>> re.findall("(?=(\d{4}))","8584320342564023450211233923239923239110001012346596")
['8584', '5843', '8432', '4320', '3203', '2034', '0342', '3425', '4256', '2564', '5640', '6402', '4023', '0234', '2345', '3450', '4502', '5021', '0211', '2112', '1123', '1233', '2339', '3392', '3923', '9232', '2323', '3239', '2399', '3992', '9923', '9232', '2323', '3239', '2391', '3911', '9110', '1100', '1000', '0001', '0010', '0101', '1012', '0123', '1234', '2346', '3465', '4659', '6596'] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-20T04:47:26.147

```
>>> from itertools import islice
>>> line = "8584320342564023450211233923239923239110001012346596"
>>> map(''.join, zip(*(islice(line,i,None) for i in range(4))))
['8584', '5843', '8432', '4320', '3203', '2034', '0342', '3425', '4256', '2564', '5640', '6402', '4023', '0234', '2345', '3450', '4502', '5021', '0211', '2112', '1123', '1233', '2339', '3392', '3923', '9232', '2323', '3239', '2399', '3992', '9923', '9232', '2323', '3239', '2391', '3911', '9110', '1100', '1000', '0001', '0010', '0101', '1012', '0123', '1234', '2346', '3465', '4659', '6596'] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-19T15:50:09.283

这会将输出设置为包含一个列表列表，其中每个 4 个字符序列都有一个叶子：

```
output = []
for i in range(len(input) - 3):
    output.append(input[i:i+4]) 
```

# opengl - OpenGL像素精确光栅化不同的拱门

> ID：10231821
> 
> 赞同：0
> 
> 时间：2012-04-19T15:46:43.320
> 
> 标签：opengl, rasterizing, mesa

对于我正在开发的应用程序，我需要能够

*   绘制不同宽度和颜色的线条
*   绘制纯色填充三角形
*   绘制纹理（无 alpha）四边形

很简单……但是……

所有坐标在像素空间中都是整数，并且非常重要：glReading 从两台不同机器上的帧缓冲区中的所有像素，使用两个不同的显卡，运行两个不同的操作系统（Linux 和 freebsd），必须产生完全相同的位序列（给定适当的常量格式转换）。

我认为使用 opengl 和硬件加速不可能安全地实现这一点，因为我敢打赌，不同的显卡（来自不同的供应商）可能会实现不同的光栅化算法。（OpenGl 规范对此很清楚，因为他们提出了一种算法，但他们也声明在某些情况下实现可能会有所不同）。此外，我真的不需要硬件加速，因为我将渲染非常低速和简单的图形。

你认为我可以通过禁用硬件加速来实现这一点吗？在 linux 下会发生什么情况，我会默认使用 MESA 软件光栅化器吗？在那种情况下，我能确定它总是有效还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T16:09:35.050

That you're reading back in rendered pixels and strongly depend on their mathematical exactness/reproducability sounds like a design flaw. What's the purpose of this action? If you, for example, need to extract some information from the image, why don't you try to extract this information from the abstract, vectorized information prior to rendering?

Anyhow, if you depend on external rendering code and there's no way to make your reading code more robust to small errors, you're signing up for lots of pain and maintenance work. Other people could break your code with every tiny patch, because that kind of pixel exactness to the bit-level is usually a non-issue when they're doing their unit tests etc. Let alone the infinite permutations of hard- and software layers that are possible, and all might have influence on the exact pixel bits.

If you only need those two operatios: lines (with different widths and colors) and quads (with/without texture), I recommend writing your own rendering/rasterizer code which operates on a 8 bit uint array representing the image pixels (R8G8B8). The operations you're proposing aren't too nasty, so if performance is unimportant, this might actually be the better way to go on the long run.

# java - Eclipse - EJB 项目 - 提取包含接口的 Jar

> ID：10231823
> 
> 赞同：0
> 
> 时间：2012-04-19T15:46:56.613
> 
> 标签：java, eclipse, jakarta-ee, ejb-3.0

在eclipse中创建EJB项目期间，它创建了以下项目

*   我的EjbProj
*   MyEjbProjClient
*   MyEjbProjEAR

接口和实现是在“MyEjbProj”中创建的。MyEjbProjClient 假设具有可以共享给客户端的接口。如何生成/检索可以提供给客户端以使用接口的 jar。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T16:23:12.240

它应该只在客户端项目中创建接口。我有相同的设置，Eclipse 确实为我在客户端项目中创建了接口。问题应该与您的方面设置或模块设置有关。检查以下事项：

1.  您是否在创建 EJB 项目时选择了 EAR 和客户端项目选项。
2.  如果上述问题的答案是肯定的，则检查客户端和 EJB 项目是否显示在 EAR 的部署程序集设置中。
3.  检查客户端项目是否具有正确的方面设置。它必须具有 Java 和 Utility 2.0 方面。
4.  检查 ejb-jar.xml 文件是否包含特定于客户端项目的条目。请参阅以下示例，我有带有客户项目名称的标签：

    ```
    <?xml version="1.0" encoding="UTF-8"?>
    <ejb-jar xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:ejb="http://java.sun.com/xml/ns/javaee/ejb-jar_3_0.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/ejb-jar_3_1.xsd" version="3.1">
    <display-name>TestEJB </display-name>
    <ejb-client-jar>TestEJBClient.jar</ejb-client-jar> 
    ```

# .net - 在 ValidationSummary 中为 CustomValidator 设置 CssClass

> ID：10231827
> 
> 赞同：0
> 
> 时间：2012-04-19T15:47:10.023
> 
> 标签：.net, validation

我正在使用如下所示的自定义 .net 验证器，自定义验证器仅在验证摘要中显示它的错误消息。我已经在验证摘要上设置了 CssClass，这可以正常工作并在 li 标签中呈现我的所有错误消息。我想要的是我的验证器之一在验证摘要中具有单独的样式，我尝试将值设置如下，但自定义验证器的 CssClass 从未反映在 HTML

```
<asp:CustomValidator ErrorMessage="Test error" ID="problemsLoggingIn" runat="server" Display="None" ValidationGroup="LoginValidationGroup" CssClass="specialCaseLi" ForeColor="" />

<asp:ValidationSummary ID="ValidationSummary1" DisplayMode="BulletList" CssClass="errorMsg" runat="server" ValidationGroup="LoginValidationGroup" /> 
```

给出这个 HTML：

```
<div id="ctl00_MainContentPlaceHolder_LoginView_LoginForm_ValidationSummary1" class="errorMsgDiv" style="color:Red;">
<ul><li>Test error</li></ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T11:26:33.087

Here is some CSS that will work:

```
enter code here.validation-summary-errors {
background-color: #D9FFB2;
border:1px solid #5CBA30;
width: 400px;
}
 span.validation-summary-errors {
border-bottom-color: #D9FFB2;
display:block;
}
     ul.validation-summary-errors {
margin:0;
padding:0;
border-top:none;
} 
```

Check this link: [Surrounding a ValidationSummary with a box via CSS](https://stackoverflow.com/questions/940335/surrounding-a-validationsummary-with-a-box-via-css)

# rally - 来自 Infopath 的 XML 数据源

> ID：10231830
> 
> 赞同：1
> 
> 时间：2012-04-19T15:47:42.387
> 
> 标签：rally

我对此很陌生，所以我希望你能忍受我。有没有办法使用 url 登录到 wsapi 集会？我已经尝试过[https://rally1.rallydev.com/slm/webservice/1.31/hierarchicalrequirement?username=someuserid&password=somepassword](https://rally1.rallydev.com/slm/webservice/1.31/hierarchicalrequirement?username=someuserid&password=somepassword)但这似乎不起作用。我仍然收到登录提示。

我可以登录并提取我需要的所有信息，但是如果我从 infopath 中提取此数据源，则它无法登录或提示任何人，甚至在它出现在 sharepoint 上时也无法访问该源。我已经尝试了我能想到的一切，尝试使用自定义的 udcx 文件登录，等等。无法让 curl 通过我们的代理和 Rally 进行身份验证。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T23:46:44.233

对于使用 curl，您应该能够像这样在命令行上传递您的用户名和密码（来自 rally api doc）：

curl -u 'curmudgeon@rallydev.com:SecretPassword' [https://blah.blah.blah](https://blah.blah.blah)

对于使用其他工具，如果他们有使用“基本身份验证”的机制，你应该很高兴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T04:34:27.230

Rally 的 AppSDK 有一个 LoginKey 工具，可以方便外部系统的仅查看访问。[Charles在](https://stackoverflow.com/users/922367/charles-ferentchak)[Login to Rally 中使用 app sdk](https://stackoverflow.com/questions/8246913/login-to-rally-using-app-sdk)写了一个很好的答案。您必须向 Rally 支持 (rallysupport@rallydev.com) 提交案例才能获得该工具的访问权限。

# html - 电子邮件中的图片占位符

> ID：10231834
> 
> 赞同：2
> 
> 时间：2012-04-19T15:48:03.147
> 
> 标签：html, image, email

我正在使用一个简单的 PHP 代码通过电子邮件发送一个 html。图像的问题在于它们不显示，因为它们存在安全问题。Gmail 会询问用户是否要显示它们。

我怎样才能为图片制作一个占位符，以便当它不显示时它会写在它的位置“请选择显示图像”并在它周围有一些边框？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T15:50:53.837

`<img />`您只需添加属性很容易`alt`。每个例子：

```
<img alt="My text when no image is displayed" /> 
```

我刚刚在这里添加了一个示例代码：http: [//jsfiddle.net/sMVgH/2/](http://jsfiddle.net/sMVgH/2/)

高温高压

# java - 缓存收益：移动与服务器开发

> ID：10231838
> 
> 赞同：2
> 
> 时间：2012-04-19T15:48:13.767
> 
> 标签：java, android, ios, caching

我正在开发一个需要高度优化的 Android 项目（它是一个嵌入在其他应用程序中的 SDK，因此显然我们希望它尽可能高效和小型）。这对我来说相对较新，因为过去我主要进行 Web/服务器开发。

所以这里的问题是：什么时候缓存值而不是重新计算/获取有意义。显然，计算/获取所需的时间越长，使用的频率越高，缓存的候选对象就越好。但是缓存的动态/成本/回报在服务器应用程序中与在移动应用程序中完全不同。

在具有大量内存且同时服务于许多请求的服务器上，缓存重复使用的值是有意义的。在移动设备上，内存是有限的。即使重复使用一个值，缓存它还是重新计算/重新读取更有效？（我不是在谈论网络数据，这显然可以从本地缓存中受益。我更多地谈论从本地文件计算或解析的值）

这是我一直想知道的一个例子：

```
if (s_pattern == null) {
    s_pattern = Pattern.compile(REGEX);
} 
```

一方面，对我来说只编译一次 RegEx 并对其进行缓存是有意义的，但另一方面，我不确定是否有很多好处可以证明使用额外内存是合理的。

有没有人有任何经验或见解？或者你有经验数据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T16:20:30.323

if (s_pattern == null) { s_pattern = Pattern.compile(REGEX); }

`[private|public|] static final PATTERN`如果它永远不会改变并且总是在使用定义类时使用，那是一个很好的候选保持不变（ ）。

如果您保留其中的几个或其他“小”对象，您应该不会遇到问题。如果您每次都重新创建它们，您甚至可以使用更多内存，因为您可以在内存中拥有该对象的多个实例 - 垃圾收集不会立即删除。此外，不断的对象重新创建会花费您的 CPU 时间，这在移动设备上也是有限的。

只要有可能，我更喜欢缓存而不是娱乐。像位图这样的大对象除外，它们会占用数百千字节。

您在 Android 上看到的几乎所有内存问题都与故意缓存无关，而是与大图像的无意泄漏或滥用有关。

顺便说一句：这不是基于经验数据 - 但如果你检查导致这些的原因，你可以得到一些：[[android]+OutOfMemoryException](https://stackoverflow.com/search?q=%5Bandroid%5D%20OutOfMemoryException)

# sharepoint-2010 - 无法在 VB.net 中使用 Excel Services 打开 Excel 文件

> ID：10231840
> 
> 赞同：2
> 
> 时间：2012-04-19T15:48:16.027
> 
> 标签：sharepoint-2010

我正在首次尝试在 SharePoint 2010 中处理 Excel Services。我正在尝试打开已上传到共享文档的 Excel 文件。我已经验证我可以使用以下网址通过浏览器手动打开文件：

[http://myserver/Shared%20Documents/Adds2011.xls](http://myserver/Shared%20Documents/Adds2011.xls)

但是，当将此传递给以下 Web 例程时，我收到一个错误。这是例程：

```
Private Sub OpenExcel(myurl As String)
    Dim xlApp As New exServices.ExcelService
    xlApp.Credentials = System.Net.CredentialCache.DefaultCredentials
    Dim status(10) As exServices.Status
    Dim sessionID As String = ""
    Try
        sessionID = xlApp.OpenWorkbook(myurl, "en-US", "en-US", status)

        Dim sheetInfo() As exServices.SheetInfo = xlApp.GetSheetNames(sessionID, status)

        Dim cell As Object = xlApp.GetCell(sessionID, sheetInfo(0).Name, 1, 1, True, status)
    Catch ex As Exception
        Debug.WriteLine(ex.ToString)
    End Try
    If sessionID <> "" Then
        xlApp.CloseWorkbook(sessionID)
    End If

End Sub 
```

我收到以下错误：

System.Web.Services.dll System.Web.Services.Protocols.SoapException 中发生了“System.Web.Services.Protocols.SoapException”类型的第一次机会异常：无法打开您选择的工作簿。

工作簿的文件格式可能不受支持，或者可能已损坏。在 System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke(String methodName, Object[] 参数) 在 SMSMInventory.exServices .ExcelService.OpenWorkbook(String workbookPath, String uiCultureName, String dataCultureName, Status[]& status) at SMSMInventory.LoadSpreadsheetUserControl.OpenExcel(SPFile mySpFile) 自动附加到机器 'FS-CHI- 上的处理 '[4292] w3wp.exe' SPDEV'成功了。System.Web.Services.dll 中出现“System.Web.Services.Protocols.SoapException”类型的第一次机会异常

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T15:31:12.437

联系微软支持后，他们指出了我的错误：

您无法在浏览器中打开 .xls（请参见下面的 URL）：

在 Excel 和 Excel Services 中使用工作簿的区别 [http://office.microsoft.com/en-us/excel-help/differences-between-using-a-workbook-in-excel-and-excel-services-HA010021716。 aspx](http://office.microsoft.com/en-us/excel-help/differences-between-using-a-workbook-in-excel-and-excel-services-HA010021716.aspx)

不支持所有其他 Microsoft Office Excel 文件格式，包括 Office Excel 2007 启用宏的工作簿 (.xlsm) 和 Office Excel 2007 97-2003 工作簿 (.xls)。

另存为 .xlsx 并重试。

使用推荐的格式解决了我的问题。

# asp.net-mvc - 如何将变量附加到 ActionLink 中的字符串？

> ID：10231842
> 
> 赞同：1
> 
> 时间：2012-04-19T15:48:18.673
> 
> 标签：asp.net-mvc, razor

我不断收到编译错误，找不到匹配的重载方法。我尝试了几种方法（变量，variable.toString）。下面是最新的尝试。

当我单击日历上的日期（例如：2）时，ActionLink 应该发送查询字符串：“Index?day=2”。

```
@{ string dayAsString = startCount.ToString();}
<div><span>@Html.ActionLink(@startCount.ToString, "Index?day=" + dayAsString , "Event")</span></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:49:50.930

做这个

```
<div>
    <span>
        @Html.ActionLink(startCount.ToString(), "Index", new { day = startCount })
    </span>
</div> 
```

`day`最后一个参数创建一个具有属性和值的匿名对象`startCount`。ActionLink 知道使用属性名称和属性值将其转换为查询字符串。

更多细节在这里[http://msdn.microsoft.com/en-us/library/dd492936.aspx](http://msdn.microsoft.com/en-us/library/dd492936.aspx)

**编辑：**

如果要针对特定​​控制器，请执行此操作

```
@Html.ActionLink(startCount.ToString(), "Index", new { controller = "Event", day = startCount }) 
```

你也可以这样做

```
@Html.ActionLink(startCount.ToString(), "Index", "Event", new { day = startCount }, null) 
```

但我不喜欢`null`作为参数传递。

这是所有重载的列表：http: [//msdn.microsoft.com/en-us/library/dd505040.aspx](http://msdn.microsoft.com/en-us/library/dd505040.aspx)

您也可以在智能感知中循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T16:07:04.807

这应该工作

```
@Html.ActionLink(@startCount.ToString,"Index","Yourcontroller",new { day=@startCount.ToString()} , null) 
```

用您的控制器名称替换 Yourcontroller

# javascript - 在 rails 3.2.2 中使用 $.ajax() 异步获取数据

> ID：10231843
> 
> 赞同：1
> 
> 时间：2012-04-19T15:48:19.033
> 
> 标签：javascript, jquery, ruby-on-rails, ajax, jsonp

我正在尝试学习如何从我的 rails 3.2.2 项目异步“获取”数据。我对 javascript 和 jquery 都是新手，但我了解到，javascript 无法从不同域中的服务器获取数据。为了解决这个问题，我已经阅读了有关使用 $.ajax()、$getJSON() 和/或 $.jsonp() 的信息，所以我的第一个问题是什么时候应该使用一个而不是另一个？

我正在尝试使用一种技术（例如，在我的 rails 3.2.2 项目中使用 $.ajax()。我有一个简单的脚手架，由一个控制器 => 图像和一个字段 => t.string:name 组成。

```
class ImagesController < ApplicationController
  # GET /images
  # GET /images.json
  def index
    @images = Image.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @images }
    end
  end

  # GET /images/1
  # GET /images/1.json 
  def show
    @image = Image.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @image }
    end
  end

  # GET /images/new
  # GET /images/new.json
  def new
    @image = Image.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @image }
    end
  end

  # GET /images/1/edit
  def edit
    @image = Image.find(params[:id])
  end

  # POST /images
  # POST /images.json
  def create
    @image = Image.new(params[:image])

    respond_to do |format|
      if @image.save
        format.html { redirect_to @image, notice: 'Image was successfully created.' }
        format.json { render json: @image, status: :created, location: @image }
      else
        format.html { render action: "new" }
        format.json { render json: @image.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /images/1
  # PUT /images/1.json
  def update
    @image = Image.find(params[:id])

    respond_to do |format|
      if @image.update_attributes(params[:image])
        format.html { redirect_to @image, notice: 'Image was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @image.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /images/1
  # DELETE /images/1.json
  def destroy
    @image = Image.find(params[:id])
    @image.destroy

    respond_to do |format|
      format.html { redirect_to images_url }
      format.json { head :no_content }
    end
  end
end 
```

我首先想探索索引操作并使用 up.html 中的 $.ajax() 调用“获取”图像名称列表：

```
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js">    </script>
</head>
<body>
    <script>
        $(document).ready( function (){ 
            $("button").click(function(){
                    $.ajax({
                        dataType: 'jsonp',
                        url: "http://localhost:3000/images",
                        success: function(response) {
                            console.log(response);
                        }
                    });
            });
        });
    </script>

    <button id ="button" type ="button">Get names</button>

</body>
</html> 
```

我从控制台收到以下信息：

```
event.layerX and event.layerY are broken and deprecated in WebKit. They will be removed  from the engine in the near future.
jquery.min.js:16Resource interpreted as Script but transferred with MIME type text/html:  "http://localhost:3000/images?    callback=jQuery15209319186636712402_1334849479698&_=1334849481034".
images:1Uncaught SyntaxError: Unexpected token < 
```

我在这里迷路了。我不确定我是否应该使用 '?callback=?' 在我的 url 中，或者我是否应该在我的控制器中添加其他参数或完全其他的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:55:53.250

```
 $(document).ready( function (){ 
            $("button").click(function(){
                    $.ajax({
                        dataType: 'json',  // not jsonp
                        url: "http://localhost:3000/images.json",
                        success: function(response) {
                            console.log(response);
                        }
                    });
            });
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T15:53:18.443

忽略控制台中的第一行 - 这是最近 Chrome/jquery 版本中出现的标准警告。

第二行告诉您您的网络应用程序发送的是 html，而不是 json

第三行是由于试图解析 html（大概以“ `<html...`”开头），就好像它是一个 json 字符串一样。

因此，您需要告诉 rails 向您发送 json，而不是 html。尝试将 json 调用中的 url 更改为“http://localhost:3000/images.json”。

# ios - 核心数据迁移 - 添加新实体并重新安排旧关系

> ID：10231845
> 
> 赞同：3
> 
> 时间：2012-04-19T15:48:20.557
> 
> 标签：ios, core-data, core-data-migration

我正在手动进行核心数据迁移。

我有一个与“等级”实体具有一对多关系的“类”实体。

现在我想创建一个新实体 - 比如说 ClassTrack

*   Class 与 ClassTrack = Class <--->> ClassTrack 会有一对多的关系
*   将 Grades 关系移动到 ClassTrack 所以 = ClassTrack <--->> Grades

有了这个，我想为**记录成绩的每一天**创建一个新的 ClassTrack 对象，然后将属于该日期的成绩添加到 ClassTrack/Grades 关系中。

**那我该怎么做**

*   创建新的 ClassTrack 对象 - 自定义迁移策略

*   创建与日期的相关成绩的关系。

例如：成绩已创建于 - 2012 年 1 月 12 日 @9:00 am - 1/12/2012 @10:00 am - 1/15/2012 @8:45 am

我想为 1/12/2012 和 1/15/2012 创建一个新的 ClassTrack 实体。将 2012 年 1 月 12 日的两个成绩添加到第一个 ClassTrack 的关系中，并将 2012 年 1 月 15 日的成绩添加到第二个 ClassTrack 的关系中。

任何建议将不胜感激。谢谢。

# php - 尝试在 href 标记内用破折号替换下划线 _

> ID：10231847
> 
> 赞同：2
> 
> 时间：2012-04-19T15:48:24.850
> 
> 标签：php, mysql, regex, preg-replace

我正在尝试在来自数据库的大量文本中的 href 属性中用破折号替换下划线：

现有文本：

```
Hello, my name is <a href="http://example.com/joe_smith">joe smith</a> and I  
eat pizza with my friend <a href="http://example.com/john_doe">john doe</a>. 
```

输出：

```
Hello, my name is <a href="http://example.com/joe-smith">joe smith</a> and I 
eat pizza with my friend <a href="http://example.com/john-doe">john doe</a>. 
```

由于它当前位于 mysql 数据库中，我认为如果我可以使用 sql 语句执行操作会更快，但如果这不可能，我想使用 php 正则表达式来执行此操作。

我不想出于某种原因替换常规文本中的下划线。只有那些在href中的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T15:51:12.350

MySQL 的正则表达式仅用于搜索。他们根本不支持更换。您可以使用它们来查找需要修复的记录，但是您仅限于 mysql 中的基本字符串操作，仅用于实际更改记录。

您最好将匹配的记录拉入 PHP 并在那里进行更改。当然，这会导致在 html 上使用正则表达式......不要这样做。使用 PHP 的 DOM 代替实际操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T20:48:45.273

您可以使用 1 个更新 sql 查询来完成。我为你准备了一个测试表，并更新查询来演示。基本上要在您自己的表格上使用，只需将表格名称从 TestTable 更改为您的表格名称，并将“字段”的名称更改为您要更新的字段名称。

如果您在一个字段中有多个 a href 链接。您需要多次执行查询。您可以通过第一个查询在表中找到最大链接出现次数。比多次执行更新查询。当您更新查询的发生计数而不是更新 1 个查询时，我给了您用于清除我使用的一些临时数据的查询。

**-- 查找表中的最大链接出现次数**

```
SELECT max(cast((LENGTH(Field) - LENGTH(REPLACE(Field, '<a href', ''))) / 7 as unsigned)) AS occurrence_count 
FROM TestTable; 
```

**-- 更新你的表出现次数以替换所有的 a href 链接。**

```
update TestTable 
set Field = replace
                (
                   @b:=replace
                   (
                     @a:=replace(Field
                      , substring(Field, Instr(Field, "<a href='"), Instr(Field, "</a>")-Instr(Field, "<a href='")+4)
                      , replace(substring(Field, Instr(Field, "<a href='"), Instr(Field, "</a>")-Instr(Field, "<a href='")+4), "_", "-")
                      )
                     , substring(@a, Instr(@a, "<a href='"), Instr(@a, "</a>")-Instr(@a, "<a href='")+4)
                     , replace(substring(@a, Instr(@a, "<a href='"), Instr(@a, "</a>")-Instr(@a, "<a href='")+4), "<a href=", "<*a href=")
                   )
                 , substring(@b, Instr(@b, "<*a href='"), Instr(@b, "</a>")-Instr(@b, "<*a href='")+4)
                 , replace(substring(@b, Instr(@b, "<*a href='"), Instr(@b, "</a>")-Instr(@b, "<*a href='")+4), "</a>", "</*a>")
                )
; 
```

**-- 在所有更新完成后运行一次，以清除 href 链接中的星号。**

```
update TestTable set Field = replace(replace(Field, "<*a href", "<a href"), "</*a>", "</a>") 
```

**-- 检查你的桌子**

```
select * from TestTable; 
```

**测试台**

```
CREATE TABLE `testtable` (
    `id` INT(11) NOT NULL AUTO_INCREMENT,
    `Field` VARCHAR(255) NOT NULL DEFAULT '',
    PRIMARY KEY (`id`)
)
COLLATE='latin1_swedish_ci'
ENGINE=MyISAM
ROW_FORMAT=DEFAULT 
```

**测试数据**

```
Insert into TestTable (Field) values ("Hello, my name is <a href='http://example.com/joe_smith'>joe smith</a> and I eat pizza with my friend <a href='http://example.com/john_doe'>john doe</a>");
Insert into TestTable (Field) values ("Hello, my name is <a href='http://example.com/joe_smith'>joe smith</a> and I eat pizza with my friend <a href='http://example.com/john_doe'>john doe</a> my friend <a href='http://example.com/john_doe'>jane doe</a>"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T20:28:30.190

```
(<a href=".+?)_(.+?">) 
```

有更换

```
$1-$2 
```

# spring - 具有相同根资源路径的多个 Jersey 应用程序

> ID：10231854
> 
> 赞同：2
> 
> 时间：2012-04-19T15:48:36.860
> 
> 标签：spring, jersey, jax-rs

我最近遇到了一种情况，我想在一个 Spring MVC Web 应用程序中使用两个独立的 Jersey 应用程序。我创建了两个映射到不同 URI 的独立 servlet，以及两个具有相同路径的独立根资源类。

应用程序 1 Servlet：

```
<servlet>
    <servlet-name>JerseyServlet1</servlet-name>
    <servlet-class>com.sun.jersey.spi.spring.container.servlet.SpringServlet</servlet-class>

    <init-param>
        <param-name>javax.ws.rs.Application</param-name>
        <param-value>public.api.rest.Application1</param-value>
    </init-param>
</servlet>
<servlet-mapping>
    <servlet-name>JerseyServlet1</servlet-name>
    <url-pattern>/rest/*</url-pattern>
</servlet-mapping> 
```

应用 2 小服务程序：

```
<servlet>
    <servlet-name>JerseyServlet2</servlet-name>
    <servlet-class>com.sun.jersey.spi.spring.container.servlet.SpringServlet</servlet-class>

    <init-param>
        <param-name>javax.ws.rs.Application</param-name>
        <param-value>private.api.rest.Application2</param-value>
    </init-param>
</servlet>
<servlet-mapping>
    <servlet-name>JerseyServlet2</servlet-name>
    <url-pattern>/internal/*</url-pattern>
</servlet-mapping> 
```

应用1：

```
package public.api.rest;

public class Application1 extends PackagesResourceConfig {
    public Application1(){
        super(Application1.class.getPackage().getName());
    }
} 
```

应用 2：

```
package private.api.rest;

public class Application2 extends PackagesResourceConfig {
    public Application2(){
        super(Application2.class.getPackage().getName());
    }
} 
```

应用程序 1 根资源：

```
package public.api.rest;

@Path("release-1")
@Component
@Scope("request")
public class App1Root{
    //resource methods
} 
```

应用程序 2 根资源：

```
package private.api.rest;

@Path("release-1")
@Component
@Scope("request")
public class App2Root{
    //resource methods
} 
```

应用程序初始化期间抛出的 Jersey 异常：

```
SEVERE: The following errors and warnings have been detected with resource and/or provider classes:
  SEVERE: Conflicting URI templates. The URI template /release-1 for root resource class private.api.rest.App2Root and the URI template /release-1 transform to the same regular expression /release-1(/.*)? 
```

由于这些是两个独立的应用程序和两个独立的 servlet，我期待它能够工作。这在泽西岛是不可能的还是有不同的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T07:46:47.220

我看到多个问题：

1.  不要对应用程序和资源使用相同的类。资源是按请求实例化的。这意味着构造函数应该是轻量级的。您不想为收到的每个请求实例化 PackagesResourceConfig。即对应用程序使用单独的类，对资源使用单独的类。
2.  您的所有代码都位于一个包中，并且您正在使用包扫描。这意味着，当 App1Root 被 servlet 实例化时，它会扫描 private.api.rest 包（以及所有子包）的包（因为您继承自 PackagesResourceConfig），发现 App1Root 和 App2Root 都使用相同的 @Path 注释并失败。

您可以通过拆分资源和应用程序并将 app1 的资源放入与 app2 不同的包中来解决此问题。例如以下应该工作：

应用1：

```
package private.api.rest;

public class App1Root  extends PackagesResourceConfig {
    public App1Root(){
        super("private.api.rest.app1");
    }
} 
```

应用2：

```
package private.api.rest;

public class App2Root  extends PackagesResourceConfig {
    public App2Root(){
        super("private.api.rest.app2");
    }
} 
```

资源类 1：

```
package public.api.rest.app1;

@Path("release-1")
@Component
@Scope("request")
public class App1Root {
    // resource methods here
} 
```

资源类 2：

```
package public.api.rest.app2;

@Path("release-1")
@Component
@Scope("request")
public class App1Root {
    // resource methods here
} 
```

# excel - 将最后一列的值获取到新工作表的宏

> ID：10231858
> 
> 赞同：0
> 
> 时间：2012-04-19T15:48:42.197
> 
> 标签：excel

我正在尝试创建一个宏以将每个工作表的最后一列（在我的情况下为 R 列）的值放入一个名为“MainSheet”的新工作表中

如果有 4 张表，则应将最后一列值提取到主表列 A、B、C 和 D

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T18:14:42.463

假设您的数据总是从`A1`您要复制的每张工作表开始，那么这可能会让您开始：

```
Sub CopyLastColumns()
    Dim cnt As Integer, sht As Worksheet, mainsht As Worksheet, col As Integer, rw As Integer

    Set mainsht = Worksheets("MainSheet")

    cnt = 1
    For Each sht In Worksheets
        If sht.Name <> "MainSheet" Then
            sht.Columns(sht.Range("A1").CurrentRegion.Columns.Count).Copy
            mainsht.Columns(cnt).PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks:=False, Transpose:=False
            mainsht.Cells(10, cnt) = sht.Range("A2") 
            cnt = cnt + 1
        End If
    Next sht

    With mainsht
        For col = 1 To cnt
            For rw = .Cells(65536, col).End(xlUp).Row To 1 Step -1
                If .Cells(rw, col) = "" Then
                    .Cells(rw, col).Delete Shift:=xlUp
                End If
            Next rw
        Next col
    End With

End Sub 
```

# c# - 使用 PrintDocument 打印多页

> ID：10231860
> 
> 赞同：3
> 
> 时间：2012-04-19T15:48:49.547
> 
> 标签：c#, .net, printing

我正在尝试打印发票。发票应该可以打印在多页上，但这就是问题所在。我可以完美地在单页上打印发票，但是一旦发票不适合单页，打印作业就会退出第一页。

这是我正在使用的代码。'artikelen' 是文章列表（List）。我已经阅读了几个类似的例子，我很确定我在这里遗漏了一些东西。

（编辑：删除了一些不必要的代码）

```
public void PrintA4Factuur()
    {
        p = new PrintDocument();
        p.PrintPage +=
            new PrintPageEventHandler(printPage);
        printPreviewDialog.Document = p;
        printPreviewDialog.ShowDialog();
    }

void printPage(object sender1, PrintPageEventArgs e1)
    {
Graphics g = e1.Graphics;
int yPos = 320;
float pageHeight = e1.MarginBounds.Height;
int artikelPosition = 0;
while (yPos + 100 < pageHeight
            && artikelPosition < this.artikelen.Count)
        {
            // Do stuff with articles (printing details in different rectangles

            artikelPosition += 1;
            yPos += 20;
        }

        if (artikelPosition < this.artikelen.Count)
        {
            e1.HasMorePages = true;
            return;
        }
        else
        {
            e1.HasMorePages = false;
        }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T17:39:38.533

好吧，Lars 指出了在`artikelPosition`每页开头重置为零的问题，但是这段代码还有一些其他问题。

您应该始终使用`e1.MarginBounds` 坐标，因为边距可以由用户更改，并且`p.DefaultPageSettings`不会包括在内。

使用字体度量，例如`GetHeight(yourDeviceGraphPort)`，不要硬编码行高。

始终使用`float`s 表示坐标，不要在`int`s 之间转换。

字体是非托管资源，使用完后必须`Dispose`使用它们。循环重复创建和处理字体效率低下；在调用之前构造它`PrintDocument.Print()`并在所有页面打印后处理它。

还有一个 Black SolidBrush 已经定义在`System.Drawing`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T17:25:49.480

我发现你的代码做相反的事情：如果它打印超过一页，它会继续打印到无穷大。

尝试将您的索引位置变量移到`PrintPage`事件之外，因为将其设置回零只会将其再次设置为开头：

```
int artikelPosition = 0; 
```

开始打印时重置它：

```
public void PrintA4Factuur()
{
  artikelPosition = 0

  p = new PrintDocument();
  p.PrintPage += printPage;
  printPreviewDialog.Document = p;
  printPreviewDialog.ShowDialog();
} 
```

然后在您的 PrintPage 例程中将其注释掉：

```
void printPage(object sender1, PrintPageEventArgs e1)
{
  Graphics g = e1.Graphics;
  int yPos = 320;
  float pageHeight = e1.MarginBounds.Height;

  // int artikelPosition = 0;

  // continue with code
} 
```

# jquery - 如何打印 jquery 对象/数组

> ID：10231864
> 
> 赞同：10
> 
> 时间：2012-04-19T15:48:55.393
> 
> 标签：jquery, arrays, json, object

我从 mysql 数据库中获取 id 和类别名称。

当我提醒结果时，我得到：

```
[{"id":"197","category":"Damskie"},"id":"198","category":"M\u0119skie"}] 
```

（这是物体吗？）

1.  如何打印这样的结果：

    达姆斯基

    M\u0119skie

2.  M\u0119ski - 编码错误。应该是**Męskie**。我怎样才能改变这个？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-19T15:51:56.403

```
var arrofobject = [{"id":"197","category":"Damskie"},{"id":"198","category":"M\u0119skie"}];

$.each(arrofobject, function(index, val) {
    console.log(val.category);
}); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-19T15:53:13.110

您从服务器获得的是如下字符串：

```
var data = '[{"id":"197","category":"Damskie"},{"id":"198","category":"M\u0119skie"}]'; 
```

然后您可以使用`JSON.parse`函数将其更改为对象。然后您访问如下类别：

```
var dataObj = JSON.parse(data);

console.log(dataObj[0].category); //will return Damskie
console.log(dataObj[1].category); //will return Męskie 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-19T15:52:55.950

您的结果当前为字符串格式，您需要将其解析为 json。

```
var obj = $.parseJSON(result);
alert(obj[0].category); 
```

此外，如果您将要进行的 ajax 调用的 dataType 设置为`json`，则可以跳过该`$.parseJSON()`步骤。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-11T06:32:16.403

```
var arrofobject = [{"id":"197","category":"Damskie"},{"id":"198","category":"M\u0119skie"}];
var data = arrofobject.map(arrofobject => arrofobject);
console.log(data)
```

有关更多详细信息，请查看[jQuery.map()](http://api.jquery.com/jquery.map/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-05T00:13:58.007

我遇到了类似的问题，并且

```
var dataObj = JSON.parse(data);

console.log(dataObj[0].category); //will return Damskie
console.log(dataObj[1].category); //will return Męskie 
```

这解决了我的问题。感谢 Selvakumar Arumugam

# css - 内联块元素在 FF/IE 中垂直堆叠，在 Chrome 中水平堆叠？

> ID：10231865
> 
> 赞同：0
> 
> 时间：2012-04-19T15:48:56.600
> 
> 标签：css

```
<div class="content-top" style="width: 990px">
    <div style="width: 722px; margin-right: 20px" class="left-middle"></div>
    <div style="width: 200px" class="right"></div>
</div> 
```

div.left-middle 和 div.right 都是 inline-block 元素。在 Chrome 中，它们水平相邻出现，就像我希望的那样。在最新的 Firefox 和所有版本的 IE 中，div.left-middle 位于 div.right 之上。没有边距/填充，因此 div.right 有足够的空间。我试过让 div.left-middle 的宽度非常小，只是为了看看 div.right 是否会回到那里，它不会。知道为什么会这样吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T16:10:50.280

try adding

```
.content-top { white-space: nowrap; }
.content-top > div { white-space: normal; } 
```

this should costrain your div to stay aligned side by side

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T15:54:05.480

尝试添加

```
float: left; 
```

到你的 div 的风格。这将使您的 div 彼此相邻浮动。

# javascript - JavaScript 中的指针？

> ID：10231868
> 
> 赞同：87
> 
> 时间：2012-04-19T15:49:15.950
> 
> 标签：javascript

我们可以将不可变变量的引用作为函数的参数传递吗？

例子：

```
var x = 0;
function a(x)
{
    x++;
}
a(x);
alert(x); //Here I want to have 1 instead of 0 
```

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2012-04-19T15:53:56.617

由于 JavaScript 不支持通过引用传递参数，因此您需要将变量设为对象：

```
var x = {Value: 0};

function a(obj)
{
    obj.Value++;
}

a(x);
document.write(x.Value); //Here i want to have 1 instead of 0
```

在这种情况下，`x`是对对象的引用。当`x`传递给函数`a`时，该引用被复制到`obj`. 因此，`obj`并`x`在内存中引用相同的内容。更改 的`Value`属性`obj`会影响 的`Value`属性`x`。

Javascript 将始终按值传递函数参数。这只是语言的规范。您*可以*`x`在两个函数的本地范围内创建，并且根本不传递变量。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-04-19T15:52:56.603

这个问题可能会有所帮助： [如何在 javascript 中通过引用传递变量？从返回多个值的 ActiveX 函数中读取数据](https://stackoverflow.com/questions/1732557/how-to-pass-variable-by-reference-in-javascript-read-data-from-activex-function)

总而言之，Javascript 原始类型始终按值传递，而对象内部的值通过引用传递（感谢评论者指出我的疏忽）。所以为了解决这个问题，你必须把你的整数放在一个对象中：

```
var myobj = {x:0};

function a(obj)
{
    obj.x++;
}

a(myobj);
alert(myobj.x); // returns 1 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-01-19T21:21:55.243

我发现了一种稍微不同的实现指针的方式，从 C 的角度来看，它可能更通用且更容易理解（因此更适合用户示例的格式）。

在 JavaScript 中，就像在 C 中一样，数组变量实际上只是指向数组的指针，因此您可以像声明指针一样使用数组。这样，代码中的所有指针都可以以相同的方式使用，尽管您在原始对象中命名了变量。

它还允许使用两种不同的符号来表示指针的地址和指针地址处的内容。

这是一个示例（我使用下划线表示指针）：

```
var _x = [ 10 ];

function foo(_a){
    _a[0] += 10;
}

foo(_x);

console.log(_x[0]); 
```

产量

```
output: 20 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-12-23T15:45:51.470

您从窗口对象中引用“x”

```
var x = 0;

function a(key, ref) {
    ref = ref || window;  // object reference - default window
    ref[key]++;
}

a('x');                   // string
alert(x); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-06-29T17:49:46.030

迟到的答案，但我遇到了一种通过闭包引用传递原始值的方法。创建指针相当复杂，但它可以工作。

```
function ptr(get, set) {
    return { get: get, set: set };
}

function helloWorld(namePtr) {
    console.log(namePtr.get());
    namePtr.set('jack');
    console.log(namePtr.get())
}

var myName = 'joe';
var myNamePtr = ptr(
    function () { return myName; },
    function (value) { myName = value; }
);

helloWorld(myNamePtr); // joe, jack
console.log(myName); // jack 
```

在 ES6 中，可以缩短代码以使用 lambda 表达式：

```
var myName = 'joe';
var myNamePtr = ptr(=> myName, v => myName = v);

helloWorld(myNamePtr); // joe, jack
console.log(myName); // jack 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-02-21T16:45:32.963

Javascript 应该只是将指针放入混合中，因为它解决了很多问题。这意味着代码可以引用未知变量名称或动态创建的变量。它还使模块化编码和注入变得容易。

这是我认为在实践中最接近 c 指针的内容

在js中：

```
var a = 78;       // creates a var with integer value of 78 
var pointer = 'a' // note it is a string representation of the var name
eval (pointer + ' = 12'); // equivalent to: eval ('a = 12'); but changes value of a to 12 
```

在 c 中：

```
int a = 78;       // creates a var with integer value of 78 
int pointer = &a; // makes pointer  to refer to the same address mem as a
*pointer = 12;   // changes the value of a to 12 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-19T15:53:28.557

在 JavaScript 中，这将是一个全局的。但是，您的函数看起来更像这样：

```
function a(){
   x++;
}; 
```

由于`x`是在全局上下文中，因此您不需要将其传递给函数。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-01-29T18:07:33.870

这可能是不可能的，因为 JavaScript 没有 Perl 的“\”运算符来通过引用获取原语，但是有一种方法可以使用这种模式为原语创建一个“有效的指针”对象。

当您已经拥有原语时，此解决方案最有意义（因此您不能再将其放入对象中而无需修改其他代码），但仍需要将指针传递给您的代码的其他部分以进行修补及其状态；所以你仍然可以使用像指针一样的无缝代理来修改它的状态。

```
var proxyContainer = {};

// | attaches a pointer-lookalike getter/setter pair
// | to the container object.
var connect = function(container) {
    // | primitive, can't create a reference to it anymore
    var cant_touch_this = 1337;

    // | we know where to bind our accessor/mutator
    // | so we can bind the pair to effectively behave
    // | like a pointer in most common use cases.
    Object.defineProperty(container, 'cant_touch_this', {
        'get': function() {
            return cant_touch_this;
        },                
        'set': function(val) {
            cant_touch_this = val;
        }
    });
};

// | not quite direct, but still "touchable"
var f = function(x) {
    x.cant_touch_this += 1;
};

connect(proxyContainer);

// | looks like we're just getting cant_touch_this
// | but we're actually calling the accessor.
console.log(proxyContainer.cant_touch_this);

// | looks like we're touching cant_touch_this
// | but we're actually calling the mutator.
proxyContainer.cant_touch_this = 90;

// | looks like we touched cant_touch_this
// | but we actually called a mutator which touched it for us.
console.log(proxyContainer.cant_touch_this);

f(proxyContainer);

// | we kinda did it! :)
console.log(proxyContainer.cant_touch_this); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-04-19T15:55:23.683

在 JavaScript 中，您不能通过引用函数来传递变量。但是，您可以通过引用传递对象。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-06-06T15:22:41.037

JavaScript 不支持通过引用传递原始类型。不过，有一个解决方法。

将您需要传递的所有变量放入一个对象中。在这种情况下，只有一个变量`x`. 不要传递变量，而是将变量名作为字符串传递，即`"x"`.

```
var variables = {x:0};
function a(x)
{
    variables[x]++;
}
a("x");
alert(variables.x);
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-12-14T16:09:29.493

它只是不支持指针，故事结束:-(。

我想补充一点，虽然我是全新的并且来自 C 背景，但从我正在阅读的有关事件循环和堆栈的内容来看，您应该将任何对象尽可能靠近其调用者。由于我是全新的，我可能有这个错误。

这里的很多答案都建议让它成为全局的，但如果我没看错的话，这可能会增加堆栈跳数，并且在某种程度上，可能会不必要地分割你的事件循环（取决于被调用对象当前正在做什么）。

此外，任何模仿指针的示例在许多方面都只是 1 来做同样的事情，这不会是指针。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-10-20T23:20:52.510

我认为这与 C 或任何带有指针的语言相反：

```
/** Javascript **/
var o = {x:10,y:20};
var o2 = {z:50,w:200}; 
```

*   显然在**javascript**中你不能访问**内存中的对象***o*和*o2地址*
***   但是您也无法**比较**它们的地址：（对它们进行**排序**，然后通过**二分法**访问）**

 **.

```
o == o2 // obviously false : not the same address in memory
o <= o2 // true !
o >= o2 // also true !! 
```

这是一个大问题：

*   这意味着您可以列出/管理应用程序创建（分配）的每个对象，

*   从**庞大**的对象列表中，计算一些关于这些对象的信息（例如，它们是如何链接在一起的）

*   但是当您想检索您创建的有关特定对象的信息时，您无法通过二分法在**庞大的列表**中找到它：每个对象没有**唯一标识符**可以用作实际内存地址的替换

这最终意味着这是一个巨大的问题，如果你想用 javascript 编写：

*   一个**javascript调试器/IDE**
*   或**特别优化的垃圾收集器**
*   数据结构**抽屉/分析器**

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-03-05T17:43:36.210

根据您想做的事情，您可以简单地保存变量名称，然后稍后访问它，如下所示：

```
function toAccessMyVariable(variableName){
  alert(window[variableName]);
}

var myFavoriteNumber = 6; 

toAccessMyVariable("myFavoriteNumber"); 
```

要应用于您的特定示例，您可以执行以下操作：

```
var x = 0;
var pointerToX = "x";

function a(variableName)
{
    window[variableName]++;
}
a(pointerToX);
alert(x); //Here I want to have 1 instead of 0 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2022-01-03T12:03:50.343

我同意最引用的答案，但请注意'var'参数，使用'let'，或者在这种情况下使用'const'更好，因为指针或指向对象不应该随时更改。

```
const x = {value: 0};

function foo(obj){
  ++obj.value;
}

foo(x);
alert(x.value); 
```

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2015-07-06T23:00:36.783

在您的示例中，您实际上有 2 个具有相同名称的变量。（全局）变量 x 和**函数作用域**变量 x。有趣的是，当 javascript 选择如何处理 2 个同名变量时，它使用函数范围名称并忽略超出范围的变量。

假设 javascript 总是以这种方式运行可能是不安全的......

干杯!**

# c# - 测试闭包

> ID：10231870
> 
> 赞同：3
> 
> 时间：2012-04-19T15:49:25.157
> 
> 标签：c#, unit-testing, moq

我有一个非常简单的方法，我正在尝试测试。_interactionService 弹出对话框，要求用户确认删除客户。如果在框上单击适当的按钮，则调用提供的操作。该操作操作上下文并保存更改。保存完成后调用另一个动作。

```
 private void Delete(object entity)
{
    _interactionService.ShowConfirmationBox("Delete?", "Are you sure you want to delete this customer?", () =>
        {
            Customer customer = entity as Customer;
            Context.Attach(customer);
            Context.Delete(customer);
            Context.Save(() => DoSomethingElseWhenSaveComplete);
        });
} 
```

我不知道如何测试这种方法。我已经嘲笑了服务和上下文，但是如何测试闭包呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T15:53:59.527

如果上下文被模拟，那么您可以在测试中使用[回调](http://code.google.com/p/moq/wiki/QuickStart)：

```
Action saveAction = null;
contextMock
  .Setup(c => c.Save(It.IsAny<Action>())
  .Callback<Action>(a => saveAction = a);

// Call delete...

Assert.IsNotNull(saveAction);

saveAction();

// Assert that DoSomethingElseWhenSaveCompleted was done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T16:16:38.387

您应该在服务 (API) 级别而不是 UI 层对此进行测试。你想用你的测试来达到什么目的？

1.  您是否要确认可以调用删除

或者

1.  您是否尝试测试删除方法

我的假设是第二个，所以针对服务层和 UI 类编写一个测试。

# tfs - TFS 基于路径构建

> ID：10231874
> 
> 赞同：2
> 
> 时间：2012-04-19T15:49:44.023
> 
> 标签：tfs, continuous-integration, tfsbuild

我正在尝试自动化构建模式，该模式主要遵循通过环境、分支促进特定构建。

因此，我的源代码如下所示：

*   开发部门
*   QA 分支（来自 DEV 的子级）
*   PROD 分支（来自 QA 的孩子）

现在，我已经在 DEV 分支中设置了连续构建。基本上，每次签入都会安排构建并执行单元测试。

我希望能够将任何一组从 DEV 到 QA 的签入合并，并使其自动触发 QA 构建。但是，我找不到任何可以根据在特定路径上更改的文件构建的选项。**这可能吗？如何实现？**

PS：我知道我也可以为每次签入触发此构建，但我会发现只有在更改特定路径时才这样做更有价值，以便构建可以与一组签入相关联以自动生成更改- “发布”的日志。此外，同样的想法也适用于 PROD 版本，它可能是一组多个 QA 版本。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T20:48:37.773

构建定义中的工作区映射还确定哪个路径触发 CI 构建。因此，只需确保适当地为 hte DEV/QA/PROD 路径指定了您的工作区映射，并且它只会触发该分支中该签入的构建。

# php - 使用单个查询选择表中特定行上方和下方的特定数量的项目

> ID：10231876
> 
> 赞同：0
> 
> 时间：2012-04-19T15:49:48.253
> 
> 标签：php, mysql

我有一个与 MySQL 集成的 PHP 脚本，用于将 .plist 文件发送到包含两种类型项目（这些项目是歌曲）的 iPhone 应用程序：

1.  应该已经在应用程序中显示的项目
2.  应该在将来某个时候显示的项目

我使用两个查询和一些 PHP，以所需的顺序抓取过去和未来的项目（我想要每个项目的数量可变），这是完全可行的。不过，主要是因为我找不到或想出一个单一的查询解决方案，我很好奇你们将如何解决这个问题。是否有一个查询可以按我想要的顺序获取行？是否有一个查询以其他顺序获取行？

无论如何，这里的 PHP 和 SQL 会抓取我想要的结果行，并按照我希望它们出现在结果 .plist 中的顺序放置它们。我使用 UNIX 时间戳主要是因为它更容易，所以我希望我不会受到责备——我认为它不会特别影响我的特定问题。

```
$readbehind = mysql_query(sprintf('SELECT SongID, RemoteSongLocation, SongTitle, UNIX_TIMESTAMP( ScheduledActivationDateTime ) AS ActivateAfterUnixTime FROM  `thesongs` WHERE UNIX_TIMESTAMP( ScheduledActivationDateTime ) < UNIX_TIMESTAMP( ) ORDER BY ScheduledActivationDateTime DESC LIMIT 0, %d', MAX_READBEHIND_SONGS));
$readahead = mysql_query(sprintf('SELECT SongID, RemoteSongLocation, SongTitle, UNIX_TIMESTAMP( ScheduledActivationDateTime ) AS ActivateAfterUnixTime FROM  `thesongs` WHERE UNIX_TIMESTAMP( ScheduledActivationDateTime ) > UNIX_TIMESTAMP( ) ORDER BY ScheduledActivationDateTime ASC LIMIT 0, %d', MAX_READAHEAD_SONGS));

$songsForClient = array();
while ($row = mysql_fetch_assoc($readbehind)) {
    $songsForClient[] = $row;
}
while ($row = mysql_fetch_assoc($readahead)) {
    $songsForClient[] = $row;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:52:14.187

您可以使用 union 连接这两个语句

[http://dev.mysql.com/doc/refman/5.5/en/union.html](http://dev.mysql.com/doc/refman/5.5/en/union.html)

或者您只需选择全部并排除当前使用的播放器`WHERE SongID != ' . $id`

您可能需要检查其中一个 SongID 是否被多次使用，或者为此使用另一个 sql 列

# android - Android 循环 ListView

> ID：10231878
> 
> 赞同：0
> 
> 时间：2012-04-19T15:49:56.453
> 
> 标签：android, json, listview, onclick

所以我正在为android做一个测验，我有一个问题。我在 JSONArrays 中解析来自服务器的问题和答案并得到我想要的。因此，当我开始活动时，将显示第一个问题及其相关答案，TextView 中的问题和 ListView 中的答案。但问题来了，我想在选择答案时看到下一个问题，所以我想循环遍历 JSONObject 并在前一个已回答时显示一个新问题。有人知道我该怎么做吗？

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.game);
    listView = (ListView)findViewById(R.id.list_answers);
    gametv = (TextView)findViewById(R.id.text_question);

    Intent intent = getIntent();

    final String gameID = intent.getStringExtra("gameID");
    final int questionAmount = intent.getIntExtra("amount", 0);
    final Set<String> set = new HashSet<String>();

    JSONArray quiz = null;
    try {
        JSONObject json = new JSONObject();
        json.put("gameID", gameID);

        quiz = SendHttp.parseHttp(qURL, "result", json);

            displayQuiz(quiz, questionAmount);

    } catch (JSONException e) {
        e.printStackTrace();
    }

    listView.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View view,
            int position, long id) {

            TextView tv = (TextView)view.findViewById(R.id.tv_1);
            String answerString = tv.getText().toString();

            set.add(answerString);
            Toast.makeText(Game.this, answerString, Toast.LENGTH_SHORT).show();

            Log.w("svarat", set.toString());

        }
    });
}

private void displayQuiz(JSONArray jsona, int amount) throws JSONException {

    gametv.setText(jsona.getJSONObject(0).getString("question"));

    int numberOfAnswers = Integer.parseInt(jsona.getJSONObject(0).getString("n"));

    ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();
    HashMap<String, String> map = new HashMap<String, String>();

    for (int i = 0; i < numberOfAnswers; i++) {

        String qans = jsona.getJSONObject(0).getString(String.valueOf(i+1));

        JSONObject answer = new JSONObject(qans);

        map.put("answerID", answer.getString("answerID"));
        map.put("answer", answer.getString("answer"));

        mylist.add(map);

        map = new HashMap<String, String>();

    }
    SimpleAdapter sadapter = new SimpleAdapter(this, mylist, R.layout.quizlist, new String[] {"answerID","answer"},
            new int[] {R.id.tv_1, R.id.tv_2}); 

    listView.setAdapter(sadapter);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:54:38.963

您是否尝试过在您的 listView 上调用[notifyDataSetChanged() ？](http://developer.android.com/intl/fr/reference/android/widget/BaseAdapter.html#notifyDataSetChanged%28%29)

**添加**

因此，如果第一个问题的所有内容都正确显示，这是一种在每次点击答案时增加的方法。

```
int questionNumber = 0;
...

    ...
    listView.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View view,
            int position, long id) {
            questionNumber++;
            ...

            displayQuiz(...);
        }
    }

    private void displayQuiz(JSONArray jsona, int amount) throws JSONException {
        gametv.setText(jsona.getJSONObject(questionNumber).getString("question"));
        ...
    }
    ... 
```

# jquery - 寻找特定的 jquery 轮播

> ID：10231883
> 
> 赞同：0
> 
> 时间：2012-04-19T15:50:01.417
> 
> 标签：jquery, slider, carousel

我已经在网上搜索了 2 天，但找不到符合我要求的 jquery 轮播。

我想要的是一个普通的无限轮播，带有左右导航链接，但我希望其中一个图像（主图像）[当前焦点图像] 是两倍大并与右侧对齐。

我能得到的最接近的是柠檬滑块你可以在这里检查我的尝试： [我到目前为止得到的演示](http://jalokimgraphics.pl/demo.html)

我提前感谢任何帮助。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:53:01.430

看看[内容流](http://www.jacksasylum.eu/ContentFlow/)。您可以轻松更改它以满足您的需求。查看插件部分以获取有关如何执行此操作的帮助。有一个用于轮播，还有一个显示如何添加大图像。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T15:57:31.670

做你自己的风格的一个好的开始应该是这个网页：[http ://web.enavu.com/tutorials/making-a-jquery-infinite-carousel-with-nice-features/](http://web.enavu.com/tutorials/making-a-jquery-infinite-carousel-with-nice-features/)

它应该足够有帮助。

# c - __USE_MISC 宏是做什么用的？

> ID：10231885
> 
> 赞同：10
> 
> 时间：2012-04-19T15:50:06.730
> 
> 标签：c, glibc

我正在做一个项目，代码包含一个宏定义：

```
#define __USE_MISC 
```

该代码没有使用它，所以我认为它有其他用途。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-19T16:02:18.070

__USE_MISC`/usr/include/features.h`在以下条件下定义：

```
#if defined _BSD_SOURCE || defined _SVID_SOURCE
# define __USE_MISC     1
#endif 
```

> __USE_MISC --> 定义 BSD 和 System V Unix 共有的东西。

所以看起来你的代码想要确保它在任何情况下都被定义，即使两者`_BSD_SOURCE`都`_SVID_SOURCE`没有被定义（从 glibc 2.20 开始，定义`_DEFAULT_SOURCE`使能`__USE_MISC`）。

有关详细信息，请参阅[功能测试宏](https://www.gnu.org/software/libc/manual/html_node/Feature-Test-Macros.html)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-19T19:05:30.307

`__USE_MISC`是实现的头文件如何处理“功能测试宏”的内部细节，它指导编译器应该使哪些标准函数集可用于构建。正如[Thiruvalluvar 的回答](https://stackoverflow.com/a/10232115/12711)`_BSD_SOURCE`所表明的那样，如果您的构建需要或`_SVID_SOURCE`配置 ，它由库头文件设置（供内部使用） 。

您的代码/构建不应直接处理该宏；相反，它应该使用记录在案的功能测试宏。glibc 的文档可以在这里找到：[http ://www.gnu.org/software/libc/manual/html_node/Feature-Test-Macros.html](http://www.gnu.org/software/libc/manual/html_node/Feature-Test-Macros.html)

# jquery - JQuery UI 自动完成在选择时将标签替换为值

> ID：10231893
> 
> 赞同：0
> 
> 时间：2012-04-19T15:50:28.590
> 
> 标签：jquery, asp.net, jquery-ui

我正在使用带有 ASP.NET 文本框的 JQuery UI 自动完成来填充标签和值。这是我从 ajax 调用映射数据的地方：

```
success: function (data) {
    response($.map(data, function (item) {
        return {
            label: item.label,
            value: item.value
        }
    }));
} 
```

标签是文本，值是用于标识该行的数字。我的问题是当用户选择一个选项时，文本框会用值替换标签。因此，如果他们选择“John Smith”，则文本框会从“John Smith”变为“1234”等。如何操纵选择事件以将文本留在文本框中？任何帮助表示赞赏。谢谢！

这是我的 aspx 页面的更完整视图：

```
 <div class="ui-widget">
        <asp:TextBox ID="txbSearchKeyword" runat="server" Columns="50" />
    </div>
    <asp:HiddenField ID="selectedRecordId" runat="server" /> 
```

和jQuery：

```
(function () {
    $("#txbSearchKeyword").autocomplete
    ({
        source:
            function (request, response) {
                $.ajax({
                    type: "POST",
                    url: "AutoComplete.asmx/GetAutoCompleteList",
                    contentType: "application/json; charset=utf-8",
                    data: JSON.stringify({ keywordStartsWith: request.term }),
                    dataType: "json",
                    success: function (data) {
                        response($.map(data.d, function (item) {
                            return {
                                label: item.label,
                                value: item.value
                            }
                        }));
                    }
                });
            },
        minLength: 2
    });

    $("#txbSearchKeyword").autocomplete
    ({
        select: function (event, ui) {
            $('#selectedRecordId').val(ui.item.value);
            DoSomethingwithdataAJAXfunction(ui.item.value);
        }
    });
})(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T16:55:14.630

也许这个片段中的一些会帮助你：

```
select: function(event, ui) {
    var hasValue = (ui.item.value != undefined && ui.item.value != "" && ui.item.value != null);
    if (hasValue) {
        var focusedElement = $(this);
        focusedElement.val(ui.item.label);
        return false;
    }
    else {
        return false;
    }
},
focus: function(event, ui) {
    return false; // return "true" will put the value (label) from the selection in the field used to type
}, 
```

顺便说一句，我不知道你为什么在以下情况下将事情分开：

```
minLength: 2
 });
  $("#txbSearchKeyword").autocomplete
 ({ 
    select:... 
```

可能只是：

```
minLength: 2,
select:... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T16:08:42.183

`value`是将在文本字段中显示的变量。

所以你需要改变它。`label: item.value, value: item.label`:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T18:28:51.227

我假设您希望选择的项目出现在

```
ID="txbSearchKeyword" 
```

这个文本框？

尝试将此添加到您的自动完成中：

```
({
    select: function (event, ui) {

     //add this -->  $('#txbSearchKeyword').val(ui.item.label);
       $('#selectedRecordId').val(ui.item.value);
        DoSomethingwithdataAJAXfunction(ui.item.value);
    }
}); 
```

您可以尝试添加的行在评论中。我今天遇到了同样的问题，它对我有用。

# android - Android：API 15 的警报对话框与 API grater 8 兼容

> ID：10231906
> 
> 赞同：0
> 
> 时间：2012-04-19T15:51:05.180
> 
> 标签：android, dialog, android-fragments, android-4.0-ice-cream-sandwich, alerts

我注意到，自从我将构建目标更改为 4.0 后，我收到了很多警告。几乎所有这些都提到了用于我的应用程序中的所有警报的 showDialog / hideDialog 现在已弃用。我已经看到 Google 也为此引入了 Fragments……但它们与 API 11 及更高版本兼容。我的应用程序已将 minSDK 设置为 8 ......所以它也应该在 Android 2.3.3 上正常工作。我有机会做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:53:56.990

您必须使用 android 支持包才能访问 API 8 中的 DialogFragments

支持包信息和获取方法可以在这里找到[Android支持包](http://developer.android.com/sdk/compatibility-library.html)

# javascript - 如何获得只允许 0000 或空格的正则表达式

> ID：10231912
> 
> 赞同：-1
> 
> 时间：2012-04-19T15:51:17.597
> 
> 标签：javascript, regex

我怎样才能得到一个只允许 0000 或空格，但不能同时允许的正则表达式

例子：

1.  0000000000000000000 --> 好的；
2.  只有空格 --> 好的；
3.  000000000 0000 --> 不行；
4.  afads0000 00 0fd --> 不行；

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T15:55:12.967

```
^(?:0+| +)$ 
```

**解释：**

```
^      # Start of string
(?:    # Either match (but don't capture)...
 0+    # one or more zeroes
|      # or
 [ ]+  # one or more spaces
)      # End of non-capturing group (used to contain the alternation)
$      # End of string 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T15:56:58.010

***编辑：****此答案仅适用于您允许前导和/或尾随空格的情况。在导致失败的空格问题中给出的唯一示例是空格分隔`0`序列的位置。*

*如果没有，您将需要一个正则表达式，就像在[@Tim Pietzcker's answer](https://stackoverflow.com/a/10231993/1106925)中一样。*

* * *

您可以进行*toNumber*转换而不是正则表达式，因为只有空格的字符串将被转换为`0`，并且前导/尾随空格将被忽略。

这里我使用一元运算`+`符进行*toNumber*转换。

```
if (+str === 0) {
   // pass
} 
```

* * *

一个警告是空字符串也将被转换为`0`. 如果不希望这样，您可以先测试`.length`.

```
if (str.length && +str === 0) {
   // pass
} 
```

* * *

```
"0000000000000000000"  // pass
"   000   "            // pass
"       "              // pass
"000000000 0000"       // fail
"afads0000 00 0fd"     // fail

""  // pass first solution, fail second solution 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T15:56:28.090

这应该有效：`(0+)|( +)`不是吗？

# c# - 迭代前半部分的列表

> ID：10231913
> 
> 赞同：3
> 
> 时间：2012-04-19T15:51:19.947
> 
> 标签：c#, asp.net-mvc-3, list, razor

我试图只为前半部分的项目迭代一个列表，然后我想再次为列表的剩余另一半迭代一个列表。有任何想法吗 ？

```
@foreach (var category in Model.Categories.OrderBy(i => i.CategoryName))
{
  <li>
    <div id="category_@(category.SKU)" 
         class="itemBlock" 
         onclick="toggle('@(category.SKU)')">
  </li>
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T15:58:29.690

就像是：

```
var categories = Model.Categories.OrderBy(i => i.CategoryName).ToList();
int noOfCategories = categories.Count();
int half = noOfCategories/2;

for (int x = 0; x < half; x++)
{
    var category = categories[x];
    //your logic here
}
for (int x = half; x < noOfCategories; x++)
{
    var category = categories[x];
    //your logic here
} 
```

应该做的伎俩，不能保证语法是 100%，但这应该给你所有你需要做的！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T15:57:08.430

只需使用[for 循环](http://msdn.microsoft.com/en-us/library/ch45axte.aspx)。

```
for(int i=0; i < Model.Categories.OrderBy(i => i.CategoryName).Count/2; i++)
{
    // do stuff
}

for(int i=Model.Categories.OrderBy(i => i.CategoryName).Count/2; i < Model.Categories.OrderBy(i => i.CategoryName).Count; i++)
{
    // do different stuff
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T16:59:55.673

我真的建议将该逻辑推入您的模型中，然后获取已经为视图格式化的数据：

```
[Serializable]
public class YourModel
{
    private int _mid
    {
        get { Categories.Count / 2; }
    }
    private int _top
    {
        get { Categories.Count - _mid; }
    }
    public List<Category> CategoriesLowerHalf
    {
        get { Categories.OrderBy(i => i.CategoryName).Take(_mid); }
    }
    public List<Category> CategoriesUpperHalf
    {
        get { Categories.OrderBy(i => i.CategoryName).GetRange(_mid, _top); }
    }
    // rest of your model
} 
```

那么在你看来：

```
@foreach (var category in Model.CategoriesLowerHalf)
{
   <li>
      <div id="category_@(category.SKU)" class="itemBlock" onclick="toggle('@(category.SKU)')">category.Name</div>
   </li>
 }

@foreach (var category in Model.CategoriesUpperHalf)
{
   <li>
      <div id="category_@(category.SKU)" class="itemBlock" onclick="toggle('@(category.SKU)')">category.Name</div>
   </li>
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T15:53:45.643

也许您可以将列表拆分为 2 个数组，然后根据需要在每个数组上运行一个循环。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-19T21:12:11.490

> 以下代码已在我的应用程序上运行。

```
 @{
                            int a = 0;
                            int b = 0;
                        }

                   <li>
                        @foreach (var item in Model.NameHere)
                        {
                           //write code here
                            a++;
                            if (a == Model.Offices.Count() / 2)
                            {
                                break;
                            }
                        }
                    </li>

                    <li>
                        @foreach (var item in Model.NameHere)
                        {

                            if (b >= Model.Offices.Count() / 2)
                            {
                                //write code here
                            }
                            b++;
                        }
                    </li> 
```

# c# - Active Directory 中的 userAccountControl

> ID：10231914
> 
> 赞同：9
> 
> 时间：2012-04-19T15:51:21.833
> 
> 标签：c#, properties, active-directory, user-accounts

我想知道 userAccountControl 的当前值并确定它处于哪个阶段

参考： http: [//support.microsoft.com/kb/305144/en-us](http://support.microsoft.com/kb/305144/en-us)

根据上述文档，它应该返回 2 的 N 次幂。

但是当我运行我的 c# 程序时，它为普通帐户返回值 544，为禁用帐户返回 546。我怀疑它们是十进制数字。但是我如何链接回参考中显示的值？

谢谢。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-04-19T16:19:14.860

您可以通过将结果转换为枚举来轻松解码。

```
int userAccountControlValue = 544;
UserAccountControl userAccountControl = (UserAccountControl) userAccountControlValue;

// This gets a comma separated string of the flag names that apply.
string userAccountControlFlagNames = userAccountControl.ToString();

// This is how you test for an individual flag.
bool isNormalAccount = (userAccountControl & UserAccountControl.NORMAL_ACCOUNT) == UserAccountControl.NORMAL_ACCOUNT;
bool isAccountDisabled = (userAccountControl & UserAccountControl.ACCOUNTDISABLE) == UserAccountControl.ACCOUNTDISABLE;
bool isAccountLockedOut = (userAccountControl & UserAccountControl.LOCKOUT) == UserAccountControl.LOCKOUT; 
```

这是您想要的枚举定义：

```
/// <summary>
/// Flags that control the behavior of the user account.
/// </summary>
[Flags()]
public enum UserAccountControl : int
{
    /// <summary>
    /// The logon script is executed. 
    ///</summary>
    SCRIPT = 0x00000001,

    /// <summary>
    /// The user account is disabled. 
    ///</summary>
    ACCOUNTDISABLE = 0x00000002,

    /// <summary>
    /// The home directory is required. 
    ///</summary>
    HOMEDIR_REQUIRED = 0x00000008,

    /// <summary>
    /// The account is currently locked out. 
    ///</summary>
    LOCKOUT = 0x00000010,

    /// <summary>
    /// No password is required. 
    ///</summary>
    PASSWD_NOTREQD = 0x00000020,

    /// <summary>
    /// The user cannot change the password. 
    ///</summary>
    /// <remarks>
    /// Note:  You cannot assign the permission settings of PASSWD_CANT_CHANGE by directly modifying the UserAccountControl attribute. 
    /// For more information and a code example that shows how to prevent a user from changing the password, see User Cannot Change Password.
    // </remarks>
    PASSWD_CANT_CHANGE = 0x00000040,

    /// <summary>
    /// The user can send an encrypted password. 
    ///</summary>
    ENCRYPTED_TEXT_PASSWORD_ALLOWED = 0x00000080,

    /// <summary>
    /// This is an account for users whose primary account is in another domain. This account provides user access to this domain, but not 
    /// to any domain that trusts this domain. Also known as a local user account. 
    ///</summary>
    TEMP_DUPLICATE_ACCOUNT = 0x00000100,

    /// <summary>
    /// This is a default account type that represents a typical user. 
    ///</summary>
    NORMAL_ACCOUNT = 0x00000200,

    /// <summary>
    /// This is a permit to trust account for a system domain that trusts other domains. 
    ///</summary>
    INTERDOMAIN_TRUST_ACCOUNT = 0x00000800,

    /// <summary>
    /// This is a computer account for a computer that is a member of this domain. 
    ///</summary>
    WORKSTATION_TRUST_ACCOUNT = 0x00001000,

    /// <summary>
    /// This is a computer account for a system backup domain controller that is a member of this domain. 
    ///</summary>
    SERVER_TRUST_ACCOUNT = 0x00002000,

    /// <summary>
    /// Not used. 
    ///</summary>
    Unused1 = 0x00004000,

    /// <summary>
    /// Not used. 
    ///</summary>
    Unused2 = 0x00008000,

    /// <summary>
    /// The password for this account will never expire. 
    ///</summary>
    DONT_EXPIRE_PASSWD = 0x00010000,

    /// <summary>
    /// This is an MNS logon account. 
    ///</summary>
    MNS_LOGON_ACCOUNT = 0x00020000,

    /// <summary>
    /// The user must log on using a smart card. 
    ///</summary>
    SMARTCARD_REQUIRED = 0x00040000,

    /// <summary>
    /// The service account (user or computer account), under which a service runs, is trusted for Kerberos delegation. Any such service 
    /// can impersonate a client requesting the service. 
    ///</summary>
    TRUSTED_FOR_DELEGATION = 0x00080000,

    /// <summary>
    /// The security context of the user will not be delegated to a service even if the service account is set as trusted for Kerberos delegation. 
    ///</summary>
    NOT_DELEGATED = 0x00100000,

    /// <summary>
    /// Restrict this principal to use only Data Encryption Standard (DES) encryption types for keys. 
    ///</summary>
    USE_DES_KEY_ONLY = 0x00200000,

    /// <summary>
    /// This account does not require Kerberos pre-authentication for logon. 
    ///</summary>
    DONT_REQUIRE_PREAUTH = 0x00400000,

    /// <summary>
    /// The user password has expired. This flag is created by the system using data from the Pwd-Last-Set attribute and the domain policy. 
    ///</summary>
    PASSWORD_EXPIRED = 0x00800000,

    /// <summary>
    /// The account is enabled for delegation. This is a security-sensitive setting; accounts with this option enabled should be strictly 
    /// controlled. This setting enables a service running under the account to assume a client identity and authenticate as that user to 
    /// other remote servers on the network.
    ///</summary>
    TRUSTED_TO_AUTHENTICATE_FOR_DELEGATION = 0x01000000,

    /// <summary>
    /// 
    /// </summary>
    PARTIAL_SECRETS_ACCOUNT = 0x04000000,

    /// <summary>
    /// 
    /// </summary>
    USE_AES_KEYS = 0x08000000
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-18T15:50:40.933

它是一个位图。一个字中的每一位要么为 ON，要么为 OFF（0 或 1）。它并不是一个真正的数字，它更像是一排开关，每个开关都打开或关闭。操作系统在内部使用它们，因为它们可以通过将它们与位掩码进行逻辑比较来非常快速地操作它们。

属性的 LDIF 表示可以将结果显示为十进制数（相当于如果它是一个数字将由掩码表示的二进制数 - 它不是真的！）而且它很容易解码，因为基本上它通过将 2 的一些幂加在一起制成。

例如：

```
 512 = normal account
  514 = 512 + 2 = normal account, disabled
  546 = 512 + 32 + 2 = normal account, disabled, no password required
 2080 = 2048 + 32 = Interdomain trust, no password required
66048 = 65536 + 512 = normal account. password never expires
66050 = 65536 + 512 + 2 = normal account. password never expires, disabled
66080 = 65536 + 512 + 32 = normal account. password never expires, no password required 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T16:04:44.263

*   544 = 十六进制 0x220
*   546 = 十六进制 0x222

根据[此处的列表](http://support.microsoft.com/kb/305144)，这意味着：

```
0x200 = normal account
0x020 = passwd_notreqd = password not required
0x002 = account disabled 
```

所以

*   值 544（十进制）是`0x220`十六进制，表示：*普通帐户，不需要密码*
*   值 546（十进制）是`0x222`十六进制，表示：*普通帐户、禁用、不需要密码*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-03T11:06:52.743

**Python function to decode Active Directory userAccountControl.**

1.  define a dictionary with all the defined combination. (ref. [Microsoft](https://docs.microsoft.com/en-US/troubleshoot/windows-server/identity/useraccountcontrol-manipulate-account-properties))

    ```
    uac_decode_dict = {"0x0001": "SCRIPT",
                   "0x0002": "ACCOUNTDISABLE",
                   "0x0008": "HOMEDIR_REQUIRED",
                   "0x0010": "LOCKOUT",
                   "0x0020": "PASSWD_NOTREQD",
                   "0x0040": "PASSWD_CANT_CHANGE",
                   "0x0080": "ENCRYPTED_TEXT_PWD_ALLOWED",
                   "0x0100": "TEMP_DUPLICATE_ACCOUNT",
                   "0x0200": "NORMAL_ACCOUNT",
                   "0x0800": "INTERDOMAIN_TRUST_ACCOUNT",
                   "0x1000": "WORKSTATION_TRUST_ACCOUNT",
                   "0x2000": "SERVER_TRUST_ACCOUNT",
                   "0x10000": "DONT_EXPIRE_PASSWORD",
                   "0x20000": "MNS_LOGON_ACCOUNT",
                   "0x40000": "SMARTCARD_REQUIRED",
                   "0x80000": "TRUSTED_FOR_DELEGATION",
                   "0x100000": "NOT_DELEGATED",
                   "0x200000": "USE_DES_KEY_ONLY",
                   "0x400000": "DONT_REQ_PREAUTH",
                   "0x800000": "PASSWORD_EXPIRED",
                   "0x1000000": "TRUSTED_TO_AUTH_FOR_DELEGATION",
                   "0x04000000": "PARTIAL_SECRETS_ACCOUNT"} 
    ```

2.  define a function to decode the UAC value

    ```
    def decode_uac(_uac):
    #
    # Decode the userAccountControl value.
    #

    global uac_decode_dict

    _translatedUAC = ""
    _hex_uac = hex(_uac)

    _hu_work = _hex_uac[2:]
    _x = 0
    for _hu in _hu_work[::-1]:
        _x += 1
        _hu_tmp = ""
        if _hu != "0":
            _hu_tmp = _hu.ljust(_x, "0")
            if len(_hu_tmp) <= 3:
                _hu_tmp = "".ljust(4 - _x, "0") + _hu_tmp
            _hu_key = r"0x" + _hu_tmp
            if _hu_key in uac_decode_dict.keys():
                if _translatedUAC == "":
                    _translatedUAC += uac_decode_dict[_hu_key]
                else:
                    _translatedUAC += " - " + uac_decode_dict[_hu_key]
            else:
                print("Invalid userAccountControl key: " + str(_hu_key) + ". Values dec: " + str(_uac) + " hex: " + _hex_uac)
                _translatedUAC += " - Error "

    return _translatedUAC 
    ```

3.  call the function passing the userAccountControl as an Integer

    ```
    result = decode_uac(int(_userAccountControl)) 
    ```

# error-handling - 如何在 Yii 中强制生成 404 错误

> ID：10231916
> 
> 赞同：10
> 
> 时间：2012-04-19T15:51:32.863
> 
> 标签：error-handling, yii

我正在使用 Yii 框架，`404`如果在数据库中找不到重新编码，我想生成错误。有没有什么聪明的方法`Yii default error handler`应该被调用。

提前致谢。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-19T15:58:04.420

```
throw new CHttpException(404,'The specified post cannot be found.'); 
```

[http://www.yiiframework.com/doc/guide/1.1/en/topics.error](http://www.yiiframework.com/doc/guide/1.1/en/topics.error)

# javascript - 在图像的某个部分悬停时，在其旁边显示一个 div

> ID：10231917
> 
> 赞同：1
> 
> 时间：2012-04-19T15:51:33.563
> 
> 标签：javascript, jquery, css

可以说我的图像很窄

200px 宽和 900px 高

如何在图像的某个部分悬停时让 div 出现在它旁边？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T15:55:28.213

使用[地图元素](http://www.w3schools.com/tags/tag_map.asp)来定义图像的区域，您可以使用不同的形状，如矩形、圆形和多边形，因此基本上您可以映射任何复杂的区域。

例如，在下面的示例中，我映射图像的左右部分

HTML：

```
<html><body>
<img src="https://www.google.com/images/srpr/logo3w.png" usemap="gmap"/>

<map name="gmap">
  <area id="left" shape="rect" coords="0,0,135,95"  />
  <area id="right" shape="rect" coords="135,0,275,95"  />
</map>

</body></html>​ 
```

JavaScript（使用 jQuery）：

```
$('#left').hover(function(){
    alert("left")
})

$('#right').hover(function(){
    alert("right")
}) 
```

在行动中看到它[http://jsfiddle.net/anuraguniyal/GtMXk/3/](http://jsfiddle.net/anuraguniyal/GtMXk/3/)

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T15:53:43.083

`position:absolute`使用and/or将 div 放在您的图像上，`z-index:100`并在其上绑定`.hover()`事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T15:54:13.160

获取鼠标位置，获取图像位置，计算差异以计算出您在图像的哪个部分。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T15:59:04.733

您可以使用 CSS 定位图像，然后使用 jquery .hover() 和 .fade() 或 .show() / .hide()

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T16:04:15.917

你应该看看这个插件：

[http://plugins.jquery.com/project/maphilight](http://plugins.jquery.com/project/maphilight)

和演示：

[http://davidlynch.org/js/maphilight/docs/demo_usa.html](http://davidlynch.org/js/maphilight/docs/demo_usa.html)

您也许可以使用其中的一些代码。

# matlab - MATLAB 随机化/平衡问题

> ID：10231918
> 
> 赞同：0
> 
> 时间：2012-04-19T15:51:36.123
> 
> 标签：matlab, random

我有以下 MATLAB 代码：

```
files = dir(fullfile(matlabroot,'toolbox','semjudge',bpic,'*.png')); 
nFiles = numel(files);
combos = nchoosek(1:nFiles, 2);
index = combos(randperm(size(combos, 1)), :); 
picture1 = files(index(nRep,1)).name;
picture2 = files(index(nRep,2)).name;
image1 = fullfile(matlabroot,'toolbox','semjudge',bpic,picture1);
image2 = fullfile(matlabroot,'toolbox','semjudge',bpic,picture2);
subplot(1,2,1); imshow(image1); 
subplot(1,2,2); imshow(image2); 
```

它将给定目录中的图片文件随机化，并将它们呈现在屏幕上。但是，我有两个问题：

1）图片文件的数量很大，我想把它分成3或4个块供主题使用。我该怎么做呢？我不能从不同的目录中提取它们，因为在所有块的过程中，我需要拥有每一个可能的图片对。我不知道如何让 MATLAB 将其拆分为块。

2）我每次运行程序，图片都以相同的顺序呈现？为什么会这样？它应该是完全随机的，对吧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T17:52:42.477

1）我不太明白“分成块”是什么意思，但是为每个“块”使用不同的文件名后缀怎么样？

2）不，您执行此操作的方式是每列的（递增）顺序由强制执行`nchoosek`，然后您只需置换行。如果你想显示两张随机图片，就像上面的例子，你可以使用`randsample(nFiles, 2)`.

# testing - 关于软件测试，“语义约束”是什么意思？

> ID：10231919
> 
> 赞同：2
> 
> 时间：2012-04-19T15:51:40.210
> 
> 标签：testing, semantics, software-design

软件测试中有几种方法可以决定使用哪些测试用例。测试用例选择的一种方法是组合测试。为了减少组合测试中使用的测试用例的数量，可以使用以下规则之一： -
语义约束
-组合约束
-随机约束

什么是语义约束，它们与其他约束有何不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T20:25:42.060

我以前没有听说过语义约束，所以我不得不用谷歌搜索它。我从Mauro Pezzè 和 Michal Young 第 13 章功能测试的[软件测试和分析：过程、原则和技术](http://ix.cs.uoregon.edu/~michal/book/)中找到了一些解释。显然，这意味着如果有很多变量组合，您可以应用语义约束，这不是没有意义的测试组合（如上下文中的无效组合）。谁曾想到？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-23T07:18:08.407

语义约束的使用在很大程度上取决于用户对产品使用条件及其与物理世界的关系的了解。事实上，不同的产品在不同的条件下被用于执行它们的功能。用户必须依靠他们的隐性知识来确定在一定条件下需要执行的动作才能从产品中获得功能。基于这种方法，将决定测试用例。例如，汽车的功能是将人从一个点运送到另一个点。汽车必须在道路上行驶，并且驾驶员必须面向前方坐着才能看到道路。在道路上驾驶汽车并面向前方坐着操作汽车的行为将被视为语义约束。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-11T05:52:51.760

我目前正在 safaribooksonline 上观看“实践中的软件架构实时课程”。

在第 4.1 课中描述架构模式时出现了这个术语

它通常被描述为模式允许你做什么和不做什么。

# ruby-on-rails - ActiveRecord 计数方法返回一个奇怪的哈希

> ID：10231924
> 
> 赞同：0
> 
> 时间：2012-04-19T15:51:54.430
> 
> 标签：ruby-on-rails, activerecord

老实说 - 我不完全理解 ActiveRecord 的计算和分组方法是如何工作的。但是，该 api 似乎很清楚以下是正确的格式：

```
Locations.images.count(:image_id, :group => "location_id") 
```

问题来自返回值——实际上并没有在 API 中的任何地方定义的东西，并且计数方法似乎会根据您提供的内容半随机地改变。至少在这里，它似乎没有任何意义：

```
{[488, 21]=>nil, [464, 1]=>nil} 
```

数组中的第一个数字是我的位置 ID，已经足够好了。第二个是适当的计数 - 太棒了。

但是为什么它会以这种格式返回呢？为什么它们在指向 nil 的数组作为键的哈希中？这是/应该/在这里返回的内容吗？它有什么用途？

我觉得我错过了一些东西，就像我不确定我是否可以相信这个功能来做我需要的事情。而且我并不热衷于将其转换为

```
{488 => 21, 464 => 1} 
```

手动，但我可以忍受的最后一点。

谁能给我一些澄清？

**版本：Ruby 1.8.7，Rails 3.0.11**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T16:31:54.957

尝试这个：

```
Locations.images.group('location_id').count 
```

它应该返回：

```
{488=>24, 464=>1} 
```

更新：对我有用的例子：

```
Lexeme.all
  Lexeme Load (0.2ms)  SELECT "lexemes".* FROM "lexemes" 
+----+---------+---------+---------+---------------------+---------------------+
| id | user_id | word_id | counter | created_at          | updated_at          |
+----+---------+---------+---------+---------------------+---------------------+
| 1  | 1       | 1       | 3       | 2012-04-12 21:37... | 2012-04-12 21:37... |
| 2  | 1       | 2       | 4       | 2012-04-12 21:38... | 2012-04-12 21:38... |
| 3  | 1       | 3       | 5       | 2012-04-12 21:38... | 2012-04-12 21:38... |
| 4  | 2       | 5       | 3       | 2012-04-19 16:28... | 2012-04-19 16:28... |
+----+---------+---------+---------+---------------------+---------------------+

Lexeme.group('user_id').count
   (0.2ms)  SELECT COUNT(*) AS count_all, user_id AS user_id FROM "lexemes" GROUP BY user_id
 => {1=>3, 2=>1} 
```

如您所见，用户 1 有 3 条记录，用户 2 有 1 条记录。

# git - github 没有显示最后 9 次提交

> ID：10231928
> 
> 赞同：0
> 
> 时间：2012-04-19T15:52:04.377
> 
> 标签：git, github

github 将 4 月 13 日的提交显示为我的最后一次提交。我只做了`push`几分钟，但在`April 13`我可以`git log`看到 4 月 13 日之后提交的提交之后，它没有显示提交。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T16:14:05.057

根据您的评论，您在一个名为 的分支上`query/master`，这有点不寻常。创建那个分支 ( `refs/heads/query/master`) 是故意的吗？

无论如何，问题如下。当你这样做时：

```
git push origin master 
```

... git 假设您的意思是：

```
git push origin master:master 
```

...即“尝试使`master`分支`origin`与我的本地`master`分支相同”。但是，您不在名为的本地分支`master`上 - 您在`query/master`. 相反，您需要这样做：

```
git push origin query/master:master 
```

* * *

如果您真正想要的是开始在您的`master`分支上工作而不是`query/master`，那么您可以执行以下操作：

```
# Check that the output of `git status` is clean, to make
# sure you don't lose any uncommitted work:
git status

# Switch to the master branch:
git checkout master

# Create a branch called old-master that records where master
# originally was, in case you still want that:
git branch old-master

# Reset your master branch to where query/master was:
git reset --hard refs/heads/query/master 
```

此后，当你在`master`分支上工作时，`git push origin master`应该做你期望的事情。

# rest - Resteasy FrameWork POST 不工作

> ID：10231930
> 
> 赞同：0
> 
> 时间：2012-04-19T15:52:12.383
> 
> 标签：rest, resteasy

我希望使用 RestEasy 框架的仅界面选项，因为它更干净并且应该可以工作。

但是我在 POST 请求中传递参数时遇到问题。

我在文档中找到了这个例子：

```
@PUT
@Path("basic")
@Consumes("text/plain")
void putBasic(String body); 
```

并调用：

```
import org.jboss.resteasy.client.ProxyFactory;
// ...

// this initialization only needs to be done once per VM
RegisterBuiltin.register(ResteasyProviderFactory.getInstance());

SimpleClient client = ProxyFactory.create(SimpleClient.class, "http://localhost:8081");
client.putBasic("hello world"); 
```

我尝试了以下方法：

```
@POST
@Consumes(MediaType.TEXT_PLAIN)
@Path("http://localhost:8080/app/resource")
String postBasic(String body); 
```

并调用：

```
RegisterBuiltin.register(ResteasyProviderFactory.getInstance());

RepoClient client = ProxyFactory.create(RepoClient.class, "");
client.postBasic("hi"); 
```

`doPost`在调用的servelet的方法上打印参数Map（并调试它）时，参数为空。我真的看不出我的方法和记录在案的方法之间的区别（来自这里：[Resteasy interface example](http://docs.jboss.org/resteasy/docs/2.3.1.GA/userguide/html/RESTEasy_Client_Framework.html)）。

所以总结一下，只使用接口声明和代理实现如何发送POST参数？

解决方案：正如预期的那样......只需要使用接收到的参数相应地声明消耗，它就可以工作......问题是在另一个servlet中调用servlet的POST方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:56:32.543

在您的 POST 示例中，`@Path`不能包含绝对 URL。根据您的配置，尝试仅放置`/app`or 。`/app/resource`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T16:08:53.093

正如怀疑者所说，@Path 应该是一个相对 url，我只对 Jersey 有过经验，我对 Resteasy 不熟悉，但我认为这是一样的。

你的类将有一个@Path 注释，其中的方法可以有一个@Path 注释。

所以如果你有这样的事情：

```
 @POST
    @Path( "Foo" )     
    public class Foo()
    {
      @POST
      @Path( "Bar" )
      public String Bar()
      {
        ...
      }
    } 
```

[因此，对http://localhost:8080/Foo/Bar](http://localhost:8080/Foo/Bar)的 POST将执行方法 Bar。

我的评论越来越长，所以我将在这里粘贴。

抱歉，直到之后我才看到你对质疑者的评论。您要使用的示例是否使用@FormParam？

鉴于，我是 REST 新手，但到目前为止，每个 @POST 方法都必须使用 @PathParam 或 @FormParam ，您的方法看起来像这样：

```
 @Post
    @Path( "Foo/{foobar}" )
    public String Bar(@PathParam( "foobar" ) String foobar)
    {
    } 
```

或喜欢

```
 @Post
    @Path( "Foo" )
    public String Bar(@FormParam( "foobar" ) String foobar)
    {
    } 
```

# jquery - 使用 jQuery 滚动带有 div 的页面

> ID：10231932
> 
> 赞同：2
> 
> 时间：2012-04-19T15:52:14.520
> 
> 标签：jquery, iphone, mobile, html, web

我正在构建一个具有隐藏 div 的移动网站，当单击按钮时，会发生一些事情来显示该 div 并拉伸页面。

从本质上讲，它是某种“收据”，我有三个 div 彼此叠放在一起组成这个，顶部 div 包含我的收据的顶部（一个带有一点点纸的孔）。中间的 div 是隐藏的，是点击时显示的收据正文。底部 div 是收据的底部，其中包含始终可见的公司品牌（徽标等）。

因此，当用户第一次访问该网站时，他们会看到顶部和底部 div 坐在一起，看起来就像一张挂着徽标的小收据，等等等等。

我需要帮助的是“收据”距离视口底部大约 30px，当它展开时，窗口不会随之移动。当中间 div 打开并将其向下推时，我该怎么做才能使页面与此 div 一起移动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T09:00:07.853

是的。只需使用 scrollTop 如下所示。

```
 $(document).ready(function() {

    $('element').click(function(){
        $('html, body').animate({scrollTop:0}, 'slow');
        return false;
    });

}); 
```

# asp.net - 如何在 ASP.Net 中执行 streamwriter

> ID：10231941
> 
> 赞同：0
> 
> 时间：2012-04-19T15:52:48.950
> 
> 标签：asp.net

我在我的 VB.Net 应用程序中使用此代码

```
Protected Sub btnBHNas_Click(ByVal sender As Object, ByVal e As EventArgs) Handles btnBHNasBackup.Click

    'System.Diagnostics.Process.Start("batch\backupbhnas.bat")
    Using writer As StreamWriter = New StreamWriter("C:\backupbhnas.bat", True)

        writer.WriteLine("@echo off")
        writer.WriteLine(" echo ""Specify username""")
        writer.WriteLine("set /p Name=")
        writer.WriteLine("net use k: ""\\backups\back-ups""")
        writer.WriteLine("mkdir k:\%name%")
        writer.WriteLine("set drive=K:\%name%")
        writer.WriteLine("set backupcmd=xcopy /s /c /d /e /h /i /r /y")
        writer.WriteLine("echo ### Backing up My Documents...")
        writer.WriteLine("%backupcmd% ""C:\Documents and Settings\%name%\My Documents"" ""%drive%\My Documents""")
        writer.WriteLine("echo ### Backing up Favorites...")
        writer.WriteLine("%backupcmd% ""C:\Documents and Settings\%name%\Favorites"" ""%drive%\Favorites""")
        writer.WriteLine("echo ### Backing up Desktop...")
        writer.WriteLine("%backupcmd% ""C:\Documents and Settings\%name%\desktop"" ""%drive%\desktop""")
        writer.WriteLine("net use k: /delete")
        writer.WriteLine("echo Backup Complete!")
        writer.WriteLine("pause")

    End Using

    Dim myFile As String
    Dim myDir As String = "C:\"
    For Each myFile In Directory.GetFiles(myDir, "backupbhnas.bat")
        File.Delete(myFile)
    Next

End Sub 
```

它有效。但是，当我在 ASP.Net 的按钮中使用它时，它什么也不做。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T16:15:43.283

如果您需要在 C 驱动器中写入文件，您的应用程序可能需要管理权限（在 Vista 及更高版本下）。检查您的例外情况，它将帮助您找到确切的问题。

```
Try

    //code 

Catch ex As Exception

   // check exception if any

End Try 
```

# jquery - 允许输入西班牙文特殊字符

> ID：10231951
> 
> 赞同：2
> 
> 时间：2012-04-19T15:53:20.830
> 
> 标签：jquery, filter, replace, special-characters

我有一个英语单词搜索字段（字典样式）。此代码确保它只接受带有字母且没有特殊字符的术语。

```
$('#q').keyup(function(){
    $(this).val($(this).val().replace(/[^a-zA-Z ]/g,function(str){return '';}));
}); 
```

最近我还必须实现一个西班牙语搜索字段。我应该只接受 az AZ，当然还有这些：

**ñáéíóúü**

**ÑÁÉÍÓÚ**

而已。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T15:59:01.567

您可以将标志`i`用于不区分大小写的正则表达式。我刚刚在其中添加了您的特殊字符。

```
$('#q').keyup(function(){
    $(this).val($(this).val().replace(/[^a-zñáéíóúü ]/ig,function(str){return '';}));
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T16:00:35.090

试试这个

```
/[^a-zñáéíóúüA-ZÑÁÉÍÓÚ]/g 
```

# ios - 以正确的货币获取价格等级和位置的 ios 应用商店价格

> ID：10231952
> 
> 赞同：3
> 
> 时间：2012-04-19T15:53:22.717
> 
> 标签：ios, storekit

假设我有一个庞大的应用程序购买产品目录，以不同的价格层级设置。产品将在多个地区销售，因此需要以正确的货币显示价格。

有没有办法我可以（从iTunes）在给定国家（当然是用户iTunes帐户国家）给定价格等级的货币价值？

目前，我能看到的唯一方法是向苹果发送产品信息请求，以获取给定价格层的产品第一次出现，然后存储此结果。

作为一个附带问题：我知道我可以使用我的服务器返回货币/等级组合的价格，但我担心 Apple 调整应用内价格的可能性。有没有可能发生这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-02-02T18:30:09.550

```
extension SKProduct {
    var localizedPriceString: String? {
        let formatter = NumberFormatter()
        formatter.formatterBehavior = .behavior10_4
        formatter.numberStyle = .currency
        formatter.locale = priceLocale
        return formatter.string(from: price)
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T17:07:52.423

检查[SKProduct](http://developer.apple.com/library/mac/#documentation/StoreKit/Reference/SKProduct_Reference/Reference/Reference.html#//apple_ref/occ/instp/SKProduct/price)处理价格属性的文档，那里有示例代码可以为您完成。

* * *

五年后不再陈旧的链接中的代码：（略微适应 Swift 3.0 和风格）：

## 斯威夫特 3.0

```
 let numberFormatter = NumberFormatter()

    numberFormatter.formatterBehavior = .behavior10_4
    numberFormatter.numberStyle = .currency
    numberFormatter.locale = someProduct.priceLocale

    let formattedString = numberFormatter.string(from: someProduct.price) 
```

* * *

## 目标 C

```
 NSNumberFormatter *numberFormatter = [[NSNumberFormatter alloc] init];

    [numberFormatter setFormatterBehavior:NSNumberFormatterBehavior10_4];
    [numberFormatter setNumberStyle:NSNumberFormatterCurrencyStyle];
    [numberFormatter setLocale:product.priceLocale];

    NSString *formattedString = [numberFormatter stringFromNumber:product.price]; 
```

* * *

最后一件事：`NumberFormatter`对象很昂贵（在时间和资源方面），因此如果您希望经常使用它，请考虑在某处缓存一个。

# objective-c - 在类方法中使用 self

> ID：10231956
> 
> 赞同：0
> 
> 时间：2012-04-19T15:53:40.393
> 
> 标签：objective-c, ios, class

我有一个类方法，我想在下面执行这段代码。问题是在类方法中不能使用 self.view 之类的东西。所以我有点卡在这里。我发现了一些关于使用 [self class] 的东西，但我真的不明白如何在我的代码中使用它。

```
for (UIView *view in [self.view subviews]) 
    {
        if([view isKindOfClass:[Circle class]]) {

            [UIView animateWithDuration:0.2 delay:0 options:UIViewAnimationCurveLinear animations:^{
                view.alpha = 0;
                view.frame = CGRectMake(self.view.frame.size.width/2-35, self.view.frame.size.height/2-35, 70, 70);
            } completion:nil];

            [view performSelector:@selector(removeFromSuperview) withObject:nil afterDelay:0.4];
        } else {
            //
        }
    } 
```

**更新更多信息**

我有一个 Circle 课程。在那个班级我有这个方法

```
- (IBAction)playerTap:(id)sender {

    NSString *numberString;
    numberString = [NSString stringWithFormat:@"%i",indexNumber+1];

    if (indexNumber < 14)
    {

    if ([label.text isEqualToString:numberString]) 
    {
    [UIView animateWithDuration:0.1 animations:^{

        self.transform = CGAffineTransformMakeScale(1.2, 1.2);

    } completion:^(BOOL finished) {

       [UIView animateWithDuration:0.05 animations:^{
           self.transform = CGAffineTransformIdentity;
           self.alpha = 0.2;

       } completion:nil];

    }];

    ++indexNumber;
    } 
    } else {

        self.alpha = 0.2;

        [NUMViewController gameHasEnded];

    }

} 
```

当 indexNumber（静态变量）达到一定数量时，我希望执行 NUMViewController 类中的方法。IE 中的“gameHasEnded”方法。

这将是本文开头代码的一种方法。它将从视图中删除所有其他圆实例。

一个类方法对我来说似乎是最合乎逻辑的，因为我没有在圆对象上执行该方法，但它会影响我其他类中的所有对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T15:55:41.177

拥有一个调用`self.view`. 该类没有`view`，并且无法知道您的意思是哪个实例。你为什么在类方法中这样做？将其移至实例。如果您有一个共享的单例实例，则类方法可以引用它，但这通常是一个坏主意，应尽可能避免（因为它将您的类与单例联系在一起）。

# php - PHP：多维数组中的 foreach

> ID：10231970
> 
> 赞同：3
> 
> 时间：2012-04-19T15:54:06.857
> 
> 标签：php, arrays, loops, multidimensional-array

我有一个用于创建创建数组的章节和子章节的动态表单：

var_dump($_POST);

```
array{["textfield"] => array {
                       [0] => "title one"
                       [1] => "title two"
                       [2] => "title three"
                       [4] => "title four"
                       }
      ["textarea"] => array {
                       [0] => "title text"
                       [1] => "title summary"
                       [2] => "title description"
                       [4] => "title details"
                       }
      ["hidden"] => array {
                       [0] => "1"
                       [1] => "2"
                       [2] => "3"
                       [4] => "1"
                       }
      } 
```

我对数组很弱。我已经阅读了几篇关于多维数组和排序的文章，但没有任何运气或看到任何与我的非常相似的例子，让我了解我需要如何调整它。

我想为每个：

```
<div class="row<? echo $hidden ?>">
    <h2><? echo $textfield ?></h2>
    <h3><? echo $textarea ?></h3>
</div> 
```

通过多个数组匹配键 0（或相应的键号）和值。如同：

```
<div class="row<? echo $_POST['hidden'][0] ?>">
    <h2><? echo $_POST['textfield'][0] ?></h2>
    <h3><? echo $_POST['textarea'][0] ?></h3>
</div>
<div class="row<? echo $_POST['hidden'][1] ?>">
    <h2><? echo $_POST['textfield'][1] ?></h2>
    <h3><? echo $_POST['textarea'][1] ?></h3>
</div>
<div class="row<? echo $_POST['hidden'][2] ?>">
    <h2><? echo $_POST['textfield'][2] ?></h2>
    <h3><? echo $_POST['textarea'][2] ?></h3>
</div>
<div class="row<? echo $_POST['hidden'][3] ?>">
    <h2><? echo $_POST['textfield'][3] ?></h2>
    <h3><? echo $_POST['textarea'][3] ?></h3>
</div> 
```

这种形式可以动态创建数百个深度，我只能打印整个数组或每个 $key 的所有 $values。我没有通过各种数组成功匹配。

我希望你跟随。如果您有任何建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T16:01:14.717

在模板中：

```
<? for ($i = 0; $i < count($_POST['textfield']); $i++): ?>
<div class="row<? echo $_POST['hidden'][$i] ?>">
    <h2><? echo $_POST['textfield'][$i] ?></h2>
    <h3><? echo $_POST['textarea'][$i] ?></h3>
</div>
<? endfor; ?> 
```

虽然这会很好用（假设每个嵌套数组的长度相同），但我认为构建数组的更合适的方法是：

```
array{
    [0] => array{
        ["hidden"]    => "1"
        ["textarea"]  => "title text"
        ["textfield"] => "title one"
    }
    [1] => array{
        ["hidden"]    => "2"
        ["textarea"]  => "title summary"
        ["textfield"] => "title two"
    }
} 
```

然后你的循环看起来像：

```
<? foreach ($array as $chapter): ?>
<div class="row<? echo $chapter['hidden'] ?>">
    <h2><? echo $chapter['textfield'] ?></h2>
    <h3><? echo $chapter['textarea'] ?></h3>
</div>
<? endforeach; ?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T15:59:17.977

假设每个元素`$_POST`的长度与其他元素的长度相同，您可以使用`count()`获取其中一个元素的长度（例如`textfield`）并执行`for`循环。

```
$length = count($_POST['textfield']);
for ($i = 0; $i < $length; $i++)
{
    echo $_POST['textfield'][$i];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T16:02:29.267

如果您知道数组键，则可以在此处使用 for 循环：

```
for($i=0;$i<count($array);$i++){
    printf('<div class="row%s"><h2>%s</h2><h3>%s</h3></div>%s',$_POST['hidden'][$i],$_POST['textfield'][$i],$_POST['textarea'][$i],PHP_EOL);
} 
```

简单！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T16:09:19.277

If you did want to do a foreach in the template for semantic reasons, you could so some extra work beforehand to swap the dimensions of the array like:

```
$rows = array();
for ($i = 0; $i < count($_POST['textfield']); $i++) {
    $rows[i]['title'] = $_POST['textfield'][$i];
    $rows[i]['text'] = $_POST['textarea'][$i];
    $rows[i]['hidden'] = $_POST['hidden'][$i];
} 
```

Then you could do a foreach in your template like so:

```
<?php foreach ($rows as $row) { ?>
    <div class="row<? echo $row['hidden'] ?>">
        <h2><? echo $row['title'] ?></h2>
        <h3><? echo $row['text'] ?></h3>
    </div>
<?php } ?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T16:07:53.043

这是你需要的：

```
 <?php
// $x = %your_array

foreach ($x['hidden'] as $k => $v) {
?>
<div class="row<? echo $x['hidden'][$k] ?>">
    <h2><? echo $x['textfield'][$k]; ?></h2>
    <h3><? echo $x['textarea'][$k]; ?></h3>
</div>
<?php
}
?> 
```

# xpages - Domino Designer 中的 CVS 支持

> ID：10231971
> 
> 赞同：0
> 
> 时间：2012-04-19T15:54:13.090
> 
> 标签：xpages, lotus-domino

在内部，我们已经为所有 Java 开发人员设置了 CVS 服务器。有没有办法在 Domino Designer 中使用这个 CVS 服务器。SVN连接器应该可以吗？或者是否需要其他连接器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T16:27:20.830

您需要将 CVS 团队插件添加到您的 Domino Designer 环境中。由于 CVS 是核心 Eclipse 平台的一部分，您需要使用主要的 Eclipse 3.4 更新站点作为源，然后只选择该插件。这将为您提供 CVS 团队选项。

您需要添加的 updateSite 是[http://download.eclipse.org/releases/ganymede/](http://download.eclipse.org/releases/ganymede/)，您只需在 Collaboration 类别下添加 CVS 客户端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T19:28:05.767

您需要启用的另外两个选项是“Eclipse 帮助系统”和“Eclipse 平台”，它们位于两个顶级类别的启用功能下。安装所有插件后，您必须重新启动设计器以在首选项中的团队下提供 CVS 客户端选项。

# javascript - 试图将变量放入循环内运行的 addListener 函数中

> ID：10231975
> 
> 赞同：0
> 
> 时间：2012-04-19T15:54:20.837
> 
> 标签：javascript, google-maps-api-3

我试图将一个变量放入一个循环内运行的 addListener 函数中，但它总是只注意到循环变量的最后一个实例。

例如

```
for(var i=0; i < data.length; i++) {
    points[i] = new google.maps.LatLng(parseFloat(data[i].lat), parseFloat(data[i].lng));
    gmarkers[i] = new google.maps.Marker({
        map: map,
        position: points[i],
        title: locationdata[i].title
    });
    gmarkers[i].setMap(map);
    bubbles[i] = new google.maps.InfoWindow({
        content: locationdata[i].summary
    });
    google.maps.event.addListener(gmarkers[i], 'click', function() {
        alert(i);
        bubbles[i].open(map, gmarkers[i]);
    });
} 
```

所以问题是在底部附近，alert(i) 始终是 data.length 的最后一项，这是有道理的，但我不知道如何纠正这个问题。

* * *

Rocket 回答了这个问题并且是正确的，但是语法略有偏差，所以在这里发布真正的语法是为了以后遇到这个问题的任何人：

```
google.maps.event.addListener(gmarkers[i], 'click', (function(i) {
    return function() {
        alert(i);
        bubbles[i].open(map, gmarkers[i]);
    }})
(i)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:56:19.753

这是 JavaScript 中的一个经典问题。您需要为每个听众做一个闭包。

```
google.maps.event.addListener(gmarkers[i], 'click', (function(i) {
    return function(){
        alert(i);
        bubbles[i].open(map, gmarkers[i]);
    };
})(i)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T16:17:42.683

[Frame.js](https://github.com/bishopZ/Frame.js)旨在解决的另一个问题。这是使用 Frame 的更具可读性和可扩展性的解决方案：

```
for(var i=0; i < data.length; i++) {
    Frame(function(next, i){
        google.maps.event.addListener(gmarkers[i], 'click', function() {
            alert(i);
        });
        next();
    }, i);
}
Frame.init(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T18:43:54.787

另一种方法是将您的 addListener 函数放在另一个函数中，并在循环中调用它。正如 Rocket 在他的回答中所说，这是一个关闭的问题，如果你不理解它可能是一个大问题。我不是说我这样做，但我已经尝试了几件事，当你使用这样的单独方法时，我更喜欢它：

```
function addEventListener(i){
    google.maps.event.addListener(gmarkers[i], 'click', function() {
        alert(i);
        bubbles[i].open(map, gmarkers[i]);
    });
} 
```

但这只是个人喜好问题。只是想我也会加入另一个选项:)

# javascript - 从 Rails 表单发送 json 数据

> ID：10231978
> 
> 赞同：1
> 
> 时间：2012-04-19T15:54:26.327
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3, forms

我有一个 Rails 表单，它有一些字段。

现在我想发送这些字段的值，转换为 json 到一些 url

我可以遍历表单的每个元素，将其转换为json（使用javascript）准备一个json字符串并向服务器发送请求。[客户端转换]

其他方法可以是将表单正常发布到某些控制器操作。然后读取rails控制器上的数据。将其解析为 json 并发送到所需的 url [服务器端转换]

但我不认为这些是好方法。

有什么更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T16:00:11.283

为什么要在发送到服务器之前进行转换？您可以使用提交的 POST 数据在服务器端的 Rails 中轻松生成 JSON。

# php - $id = $_GET['id'] : 变量不工作

> ID：10231979
> 
> 赞同：1
> 
> 时间：2012-04-19T15:54:27.933
> 
> 标签：php, include, get

我正在尝试通过 1) 使用 $_GET['id'] 来定义 mysql 行 2) 从数据库中提取相关信息，包括电子邮件地址和 3) 将电子邮件发送到提取的电子邮件地址。

错误报告没有报告错误（请注意，粘贴的代码已将它们注释掉），但下面的变量（$street2 和 $email）似乎没有通过包含文件保留。当没有注释掉时，回声一切正常。当我用实际的电子邮件地址替换 $email 变量（在包含文件上，未显示）时，一切都发送正常。

我认为主要需要注意的是在第 9 行，如果我定义了 $id，那么一切正常。但是，如果我尝试使用 $_GET 来定义 $id 变量，那么回显变量仍然可以正常显示（意味着数据库查询成功），但包含文件不起作用。

这是我的代码。它位于 HTML 表单上方。我在代码中包含了一些注释，以便您更好地了解哪些工作有效或无效。

```
<?php
session_start() or die("Could not start session.");

//error_reporting(E_ALL);
//ini_set('display_errors', '1');
$id = 0;
if(isset($_GET['id']) && is_numeric($_GET['id']))
    $id = (int)$_GET['id'];
//$id=4;
//if Line 9 is not commented out, then the whole script works fine and email is sent
require('connect.php');

$query1 = mysql_query("SELECT street2 FROM prop_one WHERE sellerID='$id'") or die("OOPS: Bad    query1");
$row1 = mysql_fetch_assoc($query1, MYSQL_NUM);
$street2 = $row1[0];
//echo "This is $street2";

$query2=mysql_query("SELECT email FROM account WHERE sellerID='$id'") or die("OOPS: Bad query2");
$row2 = mysql_fetch_assoc($query2, MYSQL_NUM);
$email = $row2[0];
//echo "<br>This is $email";

if (isset($_POST['submit']))
{
include_once("emailSeller_inc.php");
}
?> 
```

这是表格：

```
<form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="POST" name="emailToSeller">
<fieldset>
  <legend>Your Contact Info
  </legend>
  <label for="conFName">First name*</label>
  <input name="conFName" type="text" id="conFName" value="<?php echo stripslashes(htmlentities($conFName)) ?>" placeholder="required" required = "required" size="35" maxlength="50"/>
<label for="conLName">Last name</label>
<input name="conLName" type="text" id="conLName" value="<?php echo stripslashes(htmlentities($conLName)) ?>" size="35" maxlength="50"/>
<label for="conEmail">Email*</label>
<input name="conEmail" type="email" id="conEmail" value="<?php echo stripslashes(htmlentities($conEmail)) ?>" placeholder="required" required="required" size="35" maxlength="50"/>
<label for="conTel">Phone</label>
    <input name="conTel" type="text" id="conTel" value="<?php echo stripslashes(htmlentities($conTel)) ?>" placeholder="" size="25" maxlength="15"/>&nbsp;e.g., 555.555.5555
</fieldset>

<fieldset style="text-align: center; position: absolute; top: -200; z-index: -1000;">
<input class="teaser" type="submit" name="submit" id="submit" value="Submit"/>
</fieldset>

<fieldset>
  <legend>Your Message
  </legend>
  <label for="conSubject">Subject*</label>
  <input name="conSubject" type="text" id="conSubject" value="<?php echo stripslashes(htmlentities($conSubject)) ?>" placeholder="required" required="required" size="35" maxlength="50"/>
  <label for="conMessage">Message*</label>
  <textarea name="conMessage" type="textarea" id="conMessage" placeholder="required" required="required" cols="50" rows="8" maxlength="400"/><?php echo stripslashes(htmlentities($conMessage)) ?></textarea>

  <label class="teaser">Email</label>
  <input class="teaser" name="validate" id="validate" type="text" autocomplete="off" />
</fieldset>

<fieldset style="text-align: center">
  <input class="button" type="submit" name="submit" id="submit" value="Send email"/>
</fieldset>
   </form>
  </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T16:01:34.607

您正在尝试从中获取 id `$_GET`，然后检查`$_POST`“提交”。你的表格上的方法是什么？我的猜测是你的方法是 POST。

您可以尝试`$_GET['id']`在第 9 行之前回显，就像评论中提到的 scalopus 一样，或者尝试将其切换为`$_POST['id']`.

**编辑**

如评论中所述，将 id 的隐藏字段添加到表单中。底部的 else die 是可选的，一旦您确定事情按预期工作，您就可以将其删除。您不再需要将包含包含在内`isset($_POST['submit'])`- 如果设置了 id，那么提交也是。希望这可以帮助。

```
 <?php
    session_start() or die("Could not start session.");

    $id = 0;
    $email = null;
    $street2 = null;

    if(isset($_POST['id']) && is_numeric($_POST['id']))
    {
        $id = $_POST['id'];
        require('connect.php');

        $query = mysql_query("SELECT po.street2, a.email FROM prop_one po JOIN account a ON po.sellerId = a.sellerId WHERE sellerID = '$id' LIMIT 1") or die("OOPS: Bad query " . mysql_error() );
        list( $street2, $email ) = mysql_fetch_row($query);

        //echo "Street2 is $street2";
        //echo "<br>Email is $email";

        include_once("emailSeller_inc.php");
    }
    else
    {
       die( 'no Id set in Post');
    }
?> 
```

# c++ - 将海量矩阵拆分为块

> ID：10231980
> 
> 赞同：0
> 
> 时间：2012-04-19T15:54:28.217
> 
> 标签：c++, algorithm, matrix

我有个问题。我正在执行一项任务，试图在另一个矩阵（向量）中找到一个矩阵（向量），矩阵的大小是：

大矩阵：1024x768 小矩阵：36x49

基本上，我的理论是将大矩阵分割成与小矩阵大小相同的块，这意味着我能够看到小矩阵是否存在于哪个块中，然后输出该块。但是，它不会平均分割，但我需要一种方法来确定小矩阵是否确实存在于大矩阵中。

例如，我将使用测试数据：

```
M1 = 
    0 1 0 0 
    1 1 1 1
    0 0 0 0
    1 0 1 1

M2 = 

    0 1
    1 1 
```

然后我会将矩阵拆分为 2x2 的块，然后以这种方式检查。这很简单，因为我只使用一个小矩阵，并且矩阵可以平均分割，而上面的问题要理解和弄清楚要复杂得多。

本质上，我需要能够将 (1024x768) 拆分为 (36x49) 的块大小，这样我才能进行检查以确定该特定矩阵的位置。我一直在使用这个算法：

```
// Assume: 
// matrix1ColSize = 768
// matrix2ColSize = 49
const int ROW_BOUNDS = matrix1.size() - matrix2.size();
const int COL_BOUNDS = matrix1ColSize - matrix2ColSize;

bool found = false;

for(int i=0; (i < ROW_BOUNDS); i++)
{
    bool matchFound = false;

    for(int j=0; (j < COL_BOUNDS); j++) {
        // logic here
    }
    cout << endl;
} 
```

有人可以提供任何建议吗？这真的让我很烦:(！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T17:45:06.773

如果两个矩阵的所有元素都相同，则它们是相同的。所以下面的伪代码将小矩阵与大矩阵中的一个块进行比较：

```
Initialize result to "true"
For each position in the small matrix
    Read the value from the large matrix; call it x1
    Read the value from the small matrix; call it x2
    If x1 is not equal to x2, set result to "false"
    (Optional) If x1 is not equal to x2, stop looking at other positions
Here, use the result 
```

这个逻辑将在您的 2 个嵌套循环中，因此您将在那里有 4 个嵌套循环！如果您害怕混淆，请将实现放在函数中。如果你想使用 4 个嵌套循环，祝你好运。

在 C++ 中：

```
bool is_equal = true;
for (int y = 0; y < 49; ++y)
{
    for (int x = 0; x < 36; ++x)
    {
        if (matrix1.at(j + x, i + y) != matrix2.at(x, y))
        {
            is_equal = false;
            goto DONE; // optional
        }
    }
}
DONE:; 
```

编辑：此代码假定使用矩阵的自定义类；再次查看您的代码后，我意识到您可能使用了向量的向量 ( `std::vector<std::vector<int>>`)，因此请使用`matrix2[y][x]`而不是`matrix2.at(x, y)`.

# compilation - VLC 模块、Cwiid、Linux、Wiimote、编译问题

> ID：10231983
> 
> 赞同：1
> 
> 时间：2012-04-19T15:54:40.180
> 
> 标签：compilation, vlc, undefined-symbol, wiimote

我正在尝试编写一个 vlc 模块来用 wiimote 控制它。 [http://wiki.videolan.org/Hacker_Guide/How_To_Write_a_Module](http://wiki.videolan.org/Hacker_Guide/How_To_Write_a_Module)

我正在使用库 cwiid.h [http://abstrakraft.org/cwiid/wiki/libcwiid](http://abstrakraft.org/cwiid/wiki/libcwiid) 我在 Kubuntu 11.10 上，当我用*./vlc -vvv --extraintf wiimote*编译我的模块时，我有这个信息 ：

主界面警告：无法加载模块`/home/staross/vlc/modules/control/.libs/libwiimote_plugin.so'（/home/staross/vlc/modules/control/.libs/libwiimote_plugin.so：未定义符号：cwiid_find_wiimote）

编译器找不到库，有链接问题。

该库安装在此目录中：/usr/local/include/cwiid.h

我已经尝试了很多事情：

**将绝对路径放在#include<>**

**更改 cwiid.h 的路径：/home/staross/vlc/include/**

**修改文件 ld.so.conf 并添加以下行：**

```
include /etc/ld.so.conf.d/*.conf
include /usr/local/lib/*.h 
```

**修改 configure.ac 文件并添加这些行**

```
dnl
dnl  Wiimote plugin
dnl
AC_ARG_ENABLE(wiimote,
  [  --enable-wiimote           wiimote support (default disabled)])
if test "${enable_wiimote}" = "yes"
then
  AC_CHECK_HEADER(cwiid.h, AC_CHECK_LIB(cwiid, cwiid_open, have_cwiid="true", have_cwiid="false"), have_cwiid="false")
  if test "${have_cwiid}" = "true"
  then
    VLC_ADD_PLUGIN([wiimote])
    VLC_ADD_LIBS([wiimote],[-lcwiid])
  fi
fi 
```

**像这样修改 Modules.am**

```
SOURCES_hello = hello.c
SOURCES_wiimote = wiimote.c

SUBDIRS = globalhotkeys dbus
SOURCES_dummy = dummy.c
SOURCES_gestures = gestures.c
SOURCES_netsync = netsync.c
SOURCES_ntservice = ntservice.c
SOURCES_hotkeys = hotkeys.c
SOURCES_lirc = lirc.c
SOURCES_oldrc = rc.c
if HAVE_DARWIN
motion_extra = unimotion.c unimotion.h
else
motion_extra = $(NULL)
endif
SOURCES_motion = \
        motion.c \
        $(motion_extra) \
        $(NULL)

libvlc_LTLIBRARIES += \
    libdummy_plugin.la \
    libgestures_plugin.la \
    libnetsync_plugin.la \
    libhotkeys_plugin.la \
    libhello_plugin.la \
    libwiimote_plugin.la
if !HAVE_WINCE
libvlc_LTLIBRARIES += \
    liboldrc_plugin.la
if !HAVE_WIN32
libvlc_LTLIBRARIES += \
    libmotion_plugin.la
else
libvlc_LTLIBRARIES += \
    libntservice_plugin.la
endif
endif 
```

当然还有**来自 wiimote.c 的代码**

```
#include <fcntl.h>

#ifdef HAVE_CONFIG_H
# include "config.h"
#endif

/* VLC core API headers */
#include <vlc_common.h>
#include <vlc_plugin.h>
#include <vlc_interface.h>

#include <stdlib.h>
#include <vlc_input.h>
#include <vlc_vout.h>
#include <vlc_aout.h>
#include <vlc_osd.h>
#include <vlc_playlist.h>
#include <cwiid.h>

#define BATTERY_STR_LEN 14
#define CHANNELS_NUMBER 4
#define VOLUME_TEXT_CHAN     p_global_intf->p_sys->p_channels[ 0 ]
#define VOLUME_WIDGET_CHAN   p_global_intf->p_sys->p_channels[ 1 ]

/* Forward declarations */
static int  Open    ( vlc_object_t * );
static void Close   ( vlc_object_t * );

/*****************************************************************************
 * Module descriptor
 *****************************************************************************/

vlc_module_begin ()
    set_shortname( N_("Wiimote") )
    set_description( N_("Wiimote control interface") )
    set_category( CAT_INTERFACE )
    set_subcategory( SUBCAT_INTERFACE_CONTROL )
    set_capability( "interface", 0 )
    set_callbacks( Open, Close )
vlc_module_end ()

/*****************************************************************************
 * intf_sys_t: description and status of interface
 *****************************************************************************/
struct intf_sys_t
{
    cwiid_wiimote_t* p_wiimote;        /* wiimote handle */
    struct cwiid_state state;          /* wiimote state */
    bdaddr_t bdaddr;                   /* bluetooth device address */
    int p_channels[ CHANNELS_NUMBER ]; /* contains registered
                                        * channel IDs */
    uint16_t status;
};

/*****************************************************************************
 * Local prototypes
 *****************************************************************************/
static void Run( intf_thread_t * );
void cwiid_callback(cwiid_wiimote_t *wiimote, int mesg_count, union cwiid_mesg mesg[], struct timespec *timestamp);
void cwiid_btn(struct cwiid_btn_mesg *mesg);

static void DisplayVolume( intf_thread_t *p_intf, vout_thread_t *p_vout,
                         audio_volume_t i_vol );
static void ClearChannels( intf_thread_t *p_intf, vout_thread_t *p_vout );

/*****************************************************************************
 * Open: initialize interface
 *****************************************************************************/
static int Open( vlc_object_t *obj )
{   
    intf_thread_t *p_intf = (intf_thread_t *)obj; /* déclaration d'un Thread */
    intf_sys_t *p_sys; /* déclaration d'un pointeur p_sys de type intf_sys_t */

    p_intf->p_sys = p_sys = malloc( sizeof( intf_sys_t ) );
    if( p_sys == NULL )
    {
    msg_Info(p_intf, "VLC_ENOMEM\n");
        return VLC_ENOMEM;
    }
    /* #define BDADDR_ANY   (&(bdaddr_t) {{0, 0, 0, 0, 0, 0}}) */
    p_sys->bdaddr = *BDADDR_ANY; 
    p_intf->pf_run = Run;

    msg_Info(p_intf, "VLC_SUCCESS\n");
    return VLC_SUCCESS;
}

/*****************************************************************************
 * Close: destroy interface
 *****************************************************************************/
static void Close( vlc_object_t *obj )
{
    intf_thread_t *p_intf = (intf_thread_t *)obj;
    intf_sys_t *p_sys = p_intf->p_sys;

    free( p_sys );
}

intf_thread_t *p_global_intf = NULL;

/*****************************************************************************
 * Run: main loop
 *****************************************************************************/
static void Run( intf_thread_t *p_intf )
{
    p_global_intf = p_intf;
    intf_sys_t *p_sys = p_intf->p_sys; /* déclaration d'un pointeur p_sys de type intf_sys_t */
    struct cwiid_state state;
    p_sys->status = 0;

    msg_Err(p_intf, "Put Wiimote in discoverable mode (press 1+2) to connect it...\n");
    cwiid_find_wiimote(&p_sys->bdaddr, 0);
    msg_Info(p_intf, "Test\n");
} 
```

所以这里的问题是我现在可以做些什么来希望编译器能够找到库并识别 cwiid.h 函数？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T12:58:36.123

我解决了这个问题：

```
objdump -T libwiimote_plugin.so 
```

我从**vlc/modules/control/Makefile 修改了 Makefile**并添加： LIBS_wiimote = **-lcwiid**

后

`rm *wiimote*`

重建

`make V=1 libwiimote_plugin.la`

问题解决了 ：）

# actionscript-3 - TextInput flex 4.6中的Alt+charkey组合

> ID：10231986
> 
> 赞同：0
> 
> 时间：2012-04-19T15:54:51.040
> 
> 标签：actionscript-3, apache-flex, air, flex4, flex4.6

我正在开发一个企业应用程序。在那，我需要在一个快捷键上打开一个弹出窗口，这是**Alt+AnyCharKey**的组合。

因此，当我使用 Alt 按下该键时，对于不同的字符键，在 TextInput 中输入了不同的数字或字符。

假设如果我按**Alt+A**，它会在 TextInput 中打印 1。所以问题是，当我捕获快捷键并打开一个弹出窗口并通过将焦点设置在该弹出窗口的 TextInput 上时，该数字会在 TextInput 中输入。

那么如何在 TextInput 中禁用**Alt+Key组合？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T11:52:10.893

我认为 keyDown 上的简单 preventDefault 应该会有所帮助

```
protected function textinput_keyDownHandler(event:KeyboardEvent):void
{
    if (event.altKey)
        event.preventDefault();
} 
```

# python - 在 XRC 文件中包含 wx.lib.platebtn？

> ID：10231989
> 
> 赞同：1
> 
> 时间：2012-04-19T15:55:04.727
> 
> 标签：python, wxpython, xrc

您知道将 wx.lib.platebtn.PlateButton 小部件包含[在](http://wxpython.org/docs/api/wx.lib.platebtn-module.html)xrc 文件中的方法吗？

到目前为止，我只找到了一种包含 wxWidgets 通用的小部件的方法，但我认为这是 wxpython 特有的（虽然我可能错了）。

我试图了解 XmlResourceHandler 的演示，但这仅适用于面板。我也找不到这个特定案例的好教程。

我将不胜感激你们可以提供的任何建议，或者一个好的教程的链接。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T11:16:08.553

好吧，伙计们，

为了完成，我将回答我自己的问题。Afaik，不可能在 XRC 文件中添加板按钮，但正如 Mike Driscoll 建议的那样（感谢捆绑，伙计！），可以在 XRC 文件中插入一个“未知”变量，如果需要，可以使用占位符在你想要的地方。如下图所示：

```
<object class="unknown" name="A_Name">
    <variables></variables>
</object> 
```

之后，我进入了我的代码示例并输入了代码，与下面的代码没有什么不同（显然为了您的观看乐趣而通用）。到目前为止它似乎工作，但我无法更改对*self.MyBtn*所做的任何设置，只有标志似乎有任何效果，但这也可能是我的 sizer 设置所特有的。如果你不这么认为，请随时告诉我。我总是对更好、更高效或更优雅的解决方案感兴趣。

```
class MyFrame(wx.Frame):
    def __init__(self, parent):
        self.res = xrc.XmlResource("my_xrc_file.xrc")
        self.frame = self.res.LoadFrame("MyFrame")

        imageFile = "/a/path/to/your/file"
        png = wx.Image(imageFile, wx.BITMAP_TYPE_ANY).ConvertToBitmap()

        self.MyBtn = wx.lib.platebtn.PlateButton(self.frame, bmp=png,
                style=platebtn.PB_STYLE_TOGGLE|platebtn.PB_STYLE_DEFAULT)
        self.PlateBtn = self.res.AttachUnknownControl("MyBtn",
                                        self.MyBtn, self.frame) # this returns a bool 
```

我希望它对你们中的一些人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T19:10:11.803

As I recall, there's a way to define your own widgets in XRC, but I can't quite remember where I read about that. Maybe check out the references at the end of the following article: [http://www.blog.pythonlibrary.org/2010/10/28/wxpython-an-xrced-tutorial/](http://www.blog.pythonlibrary.org/2010/10/28/wxpython-an-xrced-tutorial/)

I do know that you can use the XRC editor that comes with wxPython's demo to add an "unknown" control. You may be able to do it that way. See [http://wiki.wxpython.org/UsingXmlResources#AttachUnknownControl_and_Control_Size](http://wiki.wxpython.org/UsingXmlResources#AttachUnknownControl_and_Control_Size) or Robin Dunn's answer here: [https://groups.google.com/forum/?fromgroups#!topic/wxPython-users/4VAXC7WldFo](https://groups.google.com/forum/?fromgroups#!topic/wxPython-users/4VAXC7WldFo)

# .htaccess - .htaccess 重写所有 url

> ID：10231994
> 
> 赞同：1
> 
> 时间：2012-04-19T15:55:13.433
> 
> 标签：.htaccess, url-rewriting

我正在一个团队中工作，该团队允许我有限地访问服务器（长篇大论）。我的任务是让 .htaccess 重写子目录 (http://www.myserver.com/subdirectory) 中的 URL。这应该没什么大不了的，除了规则似乎正在重写所有 URL，而不仅仅是那些匹配模式的 URL。

```
RewriteRule ^products/([^/]*)\.html$ products.php?pr_category=$1 [L]
RewriteRule ^products/([^/]*)/([^/]*)\.html$ products.php?pr_category=$1&pr_subcategory=$2 [L]
RewriteRule ^products/([^/]*)/([^/]*)/([^/]*)\.html$ products.php?pr_category=$1&pr_subcategory=$2&pr_name=$3 [L]
RewriteRule ^tech_resource/([^/]*)\.html$ tech_resource.php?tr_category=$1 [L]
RewriteRule ^tech_resource/([^/]*)/([^/]*)\.html$ tech_resource.php?tr_category=$1&tr_name=$2 [L]
RewriteRule ^news/([^/]*)\.html$ news.php?ne_name=$1 [L] 
```

一切似乎都很好，除了***所有***页面 URL 都像这样重写：

```
http://www.mydomain.com/subdirectory/products/category/subcateogry/images/image.jpg 
```

也就是说，重写是将 $1、$2 和 $3 的内容插入到每个 url 路径中。这些应该只是：

```
http://www.mydomain.com/subdirectory/images/image.jpg 
```

我错过了什么？它可能是根 .htaccess 中的东西吗？

# excel - 输入值后如何获取单元格的值？

> ID：10231996
> 
> 赞同：2
> 
> 时间：2012-04-19T15:55:22.467
> 
> 标签：excel, vba

我想在输入一些文本后获取单元格的值。基本上，我突出显示一个单元格，输入文本，按回车键，然后我的代码触发并将输入的值分配给一个变量。

以为这很简单，但我很难过！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T16:10:33.210

您可以使用工作表级别的事件处理程序

```
Dim v As Variant

Private Sub Worksheet_Change(ByVal Target As Range)
    If Not Intersect(Target.Cells(1), Me.Range("A1")) Is Nothing Then
        v = Target.Cells(1).Value
    End If
End Sub 
```

代码进入工作表模块。

# file - 如果存在同名文件夹，则无法创建文件

> ID：10231999
> 
> 赞同：2
> 
> 时间：2012-04-19T15:55:27.833
> 
> 标签：file, directory, mkdir

以下代码显示了我遇到的问题：

```
// Assume working directory is empty.

File foo = new File("asdf");
foo.createNewFile(); // returns true, creates file "asdf" in working directory.

File bar = new File("asdf");
bar.mkdir(); // returns false 
```

当我尝试创建一个与已经存在的文件同名的目录时，“mkdir()”函数返回 false。当操作以相反的顺序执行时，也会出现类似的问题；当首先创建目录时，“createNewFile()”函数返回 false。

我知道当第二个“文件”对象被初始化时，它会“找到”在前一行创建的文件，因此“bar.exists() && bar.isFile()”是真的。

请有人详细说明如何创建与现有文件夹同名的文件，反之亦然。

谢谢，哈里

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-19T15:57:03.263

这是不可能的，因为您的操作系统（文件系统）不允许这样做。不是这样的Java问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T16:01:24.043

您不能在同一个文件夹中创建同名的文件和文件夹。操作系统不允许您这样做，因为名称是该文件/文件夹对象的 id。

假设这是可能的，我们会有这样的事情：

```
foo (folder)
|- bar (folder)
|- bar (file) 
```

当您收到“open foo/bar”命令时，您将如何决定打开哪一个？如果您不能仅凭这些信息做出决定，那么操作系统应该如何为您做出决定？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T16:02:18.380

这是不可能的，因为您的操作系统不允许这样做。您可以随时尝试，如果失败重命名文件夹（或文件）：

```
File bar = new File("asdf");
if(!bar.mkdir()) {
    // rename your folder or file
    bar.mkdir();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-02-19T09:04:08.087

```
// Assume working directory is empty.

File foo = new File("asdf.txt");
foo.createNewFile(); // returns true, creates file "asdf" in working directory.

File bar = new File("asdf");
bar.mkdir(); // returns false 
```

上面的代码应该适合你。每当您创建文件时，请提供一些扩展名，以便可以区分文件和目录。