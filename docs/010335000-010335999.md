# StackOverflow 问答 10335000-10335999

# unit-testing - MVC 更改 ModelBinder 单元测试

> ID：10335002
> 
> 赞同：0
> 
> 时间：2012-04-26T13:58:17.043
> 
> 标签：unit-testing, data-annotations

为了扩展我的验证，我根据以下文章创建了自己的模型绑定器：http: [//www.howmvcworks.net/OnModelsAndViewModels/TheBeautyThatIsTheModelBinder](http://www.howmvcworks.net/OnModelsAndViewModels/TheBeautyThatIsTheModelBinder)

在我的应用程序中，我像这样扩展我的 Person 实体：

> [MetadataType(typeof (PersonMetaData))] 公共部分类 Person { }
> 
> 公共类 PersonMetaData { [CustomRegularExpression(@"(\w|.)+@(\w|.)+", ErrorMessage = "电子邮件无效")] 公共字符串名称；}

我的 global.asax 看起来像这样：

```
 protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        RegisterGlobalFilters(GlobalFilters.Filters);
        RegisterRoutes(RouteTable.Routes);

        //Change default modelbinding
        ModelBinders.Binders.DefaultBinder = new CustomModelBinder();

    } 
```

当我为我的 PersonController 调用 create 事件并且提供的电子邮件无效时，ModelState.Valid 字段为 false。

现在我想为 create 方法创建一个单元测试：

```
 [TestInitialize()]
    public void MyTestInitialize()
    {

        RegisterRoutes(RouteTable.Routes);

        //Change default modelbinding
        ModelBinders.Binders.DefaultBinder = new CustomModelBinder();

    }
    /// <summary>
    ///A test for Create
    ///</summary>
    // TODO: Ensure that the UrlToTest attribute specifies a URL to an ASP.NET page (for example,
    // http://.../Default.aspx). This is necessary for the unit test to be executed on the web server,
    // whether you are testing a page, web service, or a WCF service.
    [TestMethod()]
    public void CreateTest()
    {

        PersonController controller = new PersonController();
        Person Person = new Person();

        Person.Email = "wrognmail.de

            var validationContext = new ValidationContext(Person, null, null);
        var validationResults = new List<ValidationResult>();
        Validator.TryValidateObject(Person, validationContext, validationResults, true);
        foreach (var validationResult in validationResults)
        {
            controller.ModelState.AddModelError(validationResult.MemberNames.First(), validationResult.ErrorMessage);
        }

        ActionResult actual;
        actual = controller.Create(Person);

        // Make sure that our validation found the error!
        Assert.IsTrue(controller.ViewData.ModelState.Count == 1, "err.");
    } 
```

当我调试代码时，ModelState.Valid 属性告诉我没有错误。我认为 DefaultBinder 的注册没有成功。

如何在单元测试中注册我的 DefaultBinder？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T17:26:18.740

看看[这个](https://stackoverflow.com/questions/5038430/how-to-unit-test-modelbinder-with-modelmetadata)问题和达林的回答。这是测试模型绑定器的方法，可能会对您有所帮助。

# visual-studio-2010 - VS2010 代码覆盖率不准确

> ID：10335003
> 
> 赞同：2
> 
> 时间：2012-04-26T13:58:18.070
> 
> 标签：visual-studio-2010, unit-testing, mstest

我正在使用 Visual Studio 2010 Ultimate SP1。我的项目中有大约 225 个单元测试，它们都通过了。然而，其中一项测试报告其命中的方法的代码覆盖率为 0%。调试时，我可以单步执行并看到它触及了方法的每一行。然而在代码覆盖率报告中，它显示该方法根本没有被覆盖。所有其他测试和方法在代码覆盖率方面都工作得很好。

我尝试了以下但没有成功：

*   将正在测试的方法移到另一个类中。
*   做了方法
*   静态与非静态。
*   将测试转移到另一个班级。
*   删除了我所有的 .testsetting 文件并从头开始重新创建它们
*   写了一个不同的测试来执行相同的方法，结果相同
*   重启VS
*   重新启动

万一重要，该方法位于 Global.asax 文件中。但是，我把它搬到了另一个班级，它没有任何区别。

有任何想法吗？

这是正在测试的方法。

```
 public void LogError(ILoggingService loggingService, IController controller)
    {
        if (loggingService == null)
            throw new ArgumentNullException("loggingService");

        if (controller == null)
            throw new ArgumentNullException("controller");

        Exception ex = Server.GetLastError();

        loggingService.LogException(ex.Message, ex.StackTrace, ApplicationName.VoucherLog, UserInfo.UserName);

        HttpException httpException = ex as HttpException;

        if (httpException == null)
        {
            var routeData = new RouteData();
            routeData.Values["controller"] = "Error";
            routeData.Values["action"] = "HttpError";

            Server.ClearError();

            var rc = new RequestContext(new HttpContextWrapper(Context), routeData);
            controller.Execute(rc);
        }
    } 
```

引发异常的前 4 行被其他测试命中并显示在代码覆盖率统计信息中。该方法的其余部分受到以下测试的影响（通过调试验证并看到每一行实际上都已执行），但不会显示在代码覆盖率统计信息中。这是测试：

```
 [TestMethod]
    [HostType("Moles")]
    public void LogError()
    {
        DMVCommon.ApplicationName expectedApplication = DMVCommon.ApplicationName.VoucherLog;
        string expectedUser = System.Security.Principal.WindowsIdentity.GetCurrent().Name;
        NotImplementedException expectedException = null;

        System.Web.Moles.MHttpServerUtility.AllInstances.GetLastError = (System.Web.HttpServerUtility server) =>
        {
            return expectedException;
        };

        System.Web.Moles.MHttpApplication.AllInstances.ContextGet = (System.Web.HttpApplication application) =>
        {
            return MvcMockHelpers.FakeHttpCurrentContext();
        };

        try
        {
            throw new NotImplementedException();
        }
        catch (NotImplementedException exc)
        {
            expectedException = exc;
            using (MvcApplication app = new MvcApplication())
            {
                bool called = false;

                Mock<ILoggingService> mockLoggingService = new Mock<ILoggingService>();
                mockLoggingService.Setup(a => a.LogException(expectedException.Message, expectedException.StackTrace, expectedApplication, expectedUser)).Callback(() => called = true);

                Mock<IController> mockController = new Mock<IController>();

                app.LogError(mockLoggingService.Object, mockController.Object);

                mockController.Verify(a => a.Execute(It.IsAny<System.Web.Routing.RequestContext>()), Times.Exactly(1));
                Assert.IsTrue(called);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T05:06:50.833

这可能是因为您使用了[Moles](https://stackoverflow.com/questions/3021797/how-moles-isolation-framework-is-implemented) - 当运行器加载程序集时，Moles 接管并分析程序集而不是覆盖分析器。

覆盖工具和 Moles存在[已知的集成问题](http://www.ncover.com/forum/show_topic?id=1191)- 为了让两个 .Net 分析器（Moles 和覆盖）协同工作，它们必须相互实现特定的支持。

尝试在没有 Moles 的情况下跑步，看看会发生什么......

也可以[将其](https://stackoverflow.com/questions/9017132/inconsistent-test-results-when-using-dotcover/9070252#9070252)视为类似的示例。

# css - 内容 DIV 位置

> ID：10335007
> 
> 赞同：-1
> 
> 时间：2012-04-26T13:58:38.290
> 
> 标签：css, yii

Yii框架中的内容DIV CSS信息是在哪里生成的？我想找到它将 CSS 类分配给内容 DIV 的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:14:53.230

`projectname/css/main.css`

那是你要的吗？

# silverlight - 为什么silverlight Datagrid 不显示数据？

> ID：10335012
> 
> 赞同：0
> 
> 时间：2012-04-26T13:58:55.777
> 
> 标签：silverlight, datagrid, controls

在下面的代码中，我从列表框中获取 SelectedItem 并在第二个数据网格中显示其内容。

但是，如果我用注释掉的数据网格替换列表框，则数据不再显示在第二个数据网格中。当我使用列表框时，为什么数据只显示在第二个数据网格中的任何原因？

```
 <ListBox   Margin="5" Grid.Row="2" Grid.ColumnSpan="2" ItemsSource="{Binding NonNavBarPricerLayouts}" SelectedItem="{Binding SelectedNonNavBarItem, Mode=TwoWay}">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <TextBlock Text="{Binding Name}"/>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>

    <!--<data:DataGrid Margin="5" Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="2" ItemsSource="{Binding NonNavBarPricerLayouts}" SelectedItem="{Binding SelectedNonNavBarItem, Mode=TwoWay}"
                   AutoGenerateColumns="False" CanUserResizeColumns="True" CanUserSortColumns="True"
                   SelectedIndex="-1" 
                   GridLinesVisibility="None">
        <data:DataGrid.Columns>
            <data:DataGridTemplateColumn Header="Pricer Layout" Width="150">
                <data:DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding Name}"/>
                    </DataTemplate>
                </data:DataGridTemplateColumn.CellTemplate>
            </data:DataGridTemplateColumn>              
        </data:DataGrid.Columns>

    </data:DataGrid>-->

    <TextBlock Grid.Row="3" Grid.ColumnSpan="2" Margin="5,5,5,0" Text="Selected pricer layout contents:"/>
    <data:DataGrid Name="dgPricerLayoutDetail" Grid.ColumnSpan="2" Grid.Row="4" Margin="5"  ItemsSource="{Binding SelectedNonNavBarItem.PricerDetails}" 
                   AutoGenerateColumns="True" CanUserResizeColumns="False"
                   SelectedIndex="-1" 
                   IsReadOnly="True" GridLinesVisibility="None">

    </data:DataGrid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-26T01:49:46.180

我将其发布为答案，以防其他人偶然发现此问题。我花了大约 4 个小时试图找出我做错了什么。我的情况与caa非常相似。

在 SilverLight 3 中，来自一个 DataGrid 的绑定 SelectedItem 作为另一个 DataGrid 的 ItemsSource 使得它不会显示在将它作为 ItemsSource 的那个中。当我将第二个切换到列表框时，我的项目会显示。我不知道我做错了什么，直到我偶然发现这篇文章并看到它在 SilverLight 4 但不是 3 中工作的 caa 评论。我发现我的旧项目是 SilverLight 3 项目并将其更改为 4 修复它。

# android - 播放 DISAPPEARING 和 APPEARING 布局动画

> ID：10335013
> 
> 赞同：3
> 
> 时间：2012-04-26T13:59:01.487
> 
> 标签：android, animation

当我在一个容器中的两个组件之间切换时，我正在尝试使用新的属性动画来播放布局动画。

我简单地调用这段代码：

```
 public void onClick(View v) {

            if (componentOneVisible) {
                componentOne.setVisibility(View.GONE);
                componentTwo.setVisibility(View.VISIBLE);
            } else {

                componentTwo.setVisibility(View.GONE);
                componentOne.setVisibility(View.VISIBLE);
            }

            componentOneVisible = !componentOneVisible;
        } 
```

我的动画设置如下：

```
 final ObjectAnimator testIn = ObjectAnimator.ofPropertyValuesHolder(
            componentContainer,
            PropertyValuesHolder.ofFloat("scaleX", 0, 1f),
            PropertyValuesHolder.ofFloat("scaleY", 0, 1f),
            PropertyValuesHolder.ofFloat("alpha", 0f, 1f));

    testIn.addListener(new AnimatorListenerAdapter() {
        public void onAnimationEnd(Animator anim) {
            View view = (View) ((ObjectAnimator) anim).getTarget();
            view.setScaleX(1f);
            view.setScaleY(1f);
            view.setAlpha(1f);
        }
    });

    testIn.setDuration(3000);

    final ObjectAnimator testOut = ObjectAnimator.ofPropertyValuesHolder(
            componentContainer,
            PropertyValuesHolder.ofFloat("scaleX", 1f, 0),
            PropertyValuesHolder.ofFloat("scaleY", 1f, 0),
            PropertyValuesHolder.ofFloat("alpha", 1, 0f));

    testOut.setDuration(3000);

    testOut.addListener(new AnimatorListenerAdapter() {
        public void onAnimationEnd(Animator anim) {
            View view = (View) ((ObjectAnimator) anim).getTarget();
            view.setScaleX(0f);
            view.setScaleY(0f);
            view.setAlpha(0f);
        }
    });

    mTransitioner.setAnimator(LayoutTransition.APPEARING, testIn);
    mTransitioner.setAnimator(LayoutTransition.DISAPPEARING, testOut);

    mTransitioner.setDuration(5000);

    mTransitioner.setDuration(LayoutTransition.APPEARING, 3000);
    mTransitioner.setDuration(LayoutTransition.DISAPPEARING, 3000); 
```

由于某种原因，只有在切换组件时才会播放出现的动画。我希望看到的是首先看到消失的动画然后出现动画。

我也调用此代码来设置过渡器

```
mTransitioner = new LayoutTransition();
    componentContainer.setLayoutTransition(mTransitioner); 
```

有任何想法吗？

# jquery - jquery如何在onready函数之外取出一个jquery函数？

> ID：10335014
> 
> 赞同：0
> 
> 时间：2012-04-26T13:59:02.643
> 
> 标签：jquery, forms

我的 onready 函数中有下一个函数来检测按钮提交：

```
$(document).ready(function(){
    some code....
    /////Busqueda
    $('#search-form input[id=search]').val("Example Value!");   
    // When you click on #search
    $("#search-form input[id=search-submit]").click(function(){
        var valor = $('#search-form input[id=search]').val();
        console.log(valor);
        // If the value is equal to "Search..."
        if(valor == "Example Value!") {
            cargarApps(numCol, 1);
        }

    }); 

 });
<div id="busqueda">
    <form id="search-form">
        <fieldset>
            <input id="search" type="text">
            <input id="search-submit" type="submit" value="Submit">
        </fieldset>
    </form>
</div> 
```

我正在做一个搜索元素，所以在“一些代码......”中我加载了所有元素进行搜索，当用户点击提交时，它会执行搜索中的代码，但“一些代码......”再次执行擦除我的搜索结果。有谁知道避免这种情况的方法？？？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T13:36:56.150

你可以简单地做到这一点

```
<script type = "text/javascript">

$('#selector').click(function(){//some code});

$(document).ready(function(){//some code});

</script> 
```

现在这将一直适用于 id 选择器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:12:34.367

因为您使用了输入类型提交。单击按钮后，它首先执行附加到它的 javascript 事件，然后进行回发。

我会将输入类型提交更改为按钮元素。但是，如果您想保留您的元素，您可以在单击事件结束时返回 false 以中断回发。

# java - 用于创建文件的 void 方法的 Junit 测试用例

> ID：10335016
> 
> 赞同：-1
> 
> 时间：2012-04-26T13:59:09.060
> 
> 标签：java, file-io, junit4

我有从网站获取 HTML 的 Java 程序。它在控制台上显示内容，然后将其保存到名为`web_content.txt`. 我该如何为此编写测试用例？

我的程序是：

```
public class UrlDown {
   public static void main(String[] args) throws Exception {
      UrlDown down = new UrlDown();
      File f = new File("web_content.txt");
      String loc = "http://www.google.com";
      down.saveUrlToFile(f, loc);

   }

   public void saveUrlToFile(File saveFile, String location) {
      URL url;
      try {
         url = new URL(location);
         BufferedReader in = new BufferedReader(new InputStreamReader(
               url.openStream()));
         BufferedWriter out = new BufferedWriter(new FileWriter(saveFile));

         char[] cbuf = new char[255];
         StringBuilder builder = new StringBuilder();
         while ((in.read(cbuf)) != -1) {
            out.write(cbuf);
            builder.append(cbuf);
         }
         String downloaded = builder.toString();
         System.out.println();
         System.out.println(downloaded);
         in.close();
         out.close();

      } catch (MalformedURLException e) {
         e.printStackTrace();
      } catch (IOException e) {
         e.printStackTrace();
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:50:22.623

不要[重新发明方轮](http://www.codinghorror.com/blog/2009/02/dont-reinvent-the-wheel-unless-you-plan-on-learning-more-about-wheels.html)。只需使用一些库。

例如来自 apache-commons 的 FileUtils - [http://commons.apache.org/io/apidocs/org/apache/commons/io/FileUtils.html#copyURLToFile(java.net.URL, java.io.File)](http://commons.apache.org/io/apidocs/org/apache/commons/io/FileUtils.html#copyURLToFile%28java.net.URL,%20java.io.File%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:42:56.653

如果您使用的是 Java 7，则可以使用[Files.copy()](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#copy%28java.io.InputStream,%20java.nio.file.Path,%20java.nio.file.CopyOption...%29)方法将 a 的内容保存`InputStream`到文件中。

要验证这是否有效，您可以使用 jUnit 中的[TemporaryFolder](http://kentbeck.github.com/junit/javadoc/latest/org/junit/rules/TemporaryFolder.html)来验证您的位置是否正确，请参阅[https://stackoverflow.com/a/6185359/303598](https://stackoverflow.com/a/6185359/303598)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T14:45:28.130

让你的单元测试设置一个模拟 http 服务器（谷歌会给你很多信息）。传入一个 url 并检查文件是否包含预期的内容

# ruby-on-rails - 带有 Backbone 的 Ruby on Rails - 身份验证

> ID：10335022
> 
> 赞同：1
> 
> 时间：2012-04-26T13:59:26.793
> 
> 标签：ruby-on-rails, backbone.js

我正在寻找使用 RoR 作为后端和 Backbone（除其他外）作为前端的单页 Web 应用程序。与大多数事情一样，该应用程序将要求用户登录（使用 RoR 和数据库轻松处理身份验证），但我对如何使用 Backbone 执行需要身份验证的任务感到困惑。因为一切都是客户端，所以在我看来，我无法将用户 ID 传递给后端，因为这样很容易被别人发现。

基本上，我如何使用 Backbone 复制基于会话的身份验证机制？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T14:04:52.917

也许这篇文章可以帮助您[使用 Rails 和 Backbone.js 进行用户身份验证](http://42floors.com/blog/posts/user-authentication-with-rails-and-backbone-js)

问候

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T07:15:38.217

您可能想研究令牌身份验证：[如何在 Rails、Devise 和 Backbone.js 中使用令牌身份验证？](https://stackoverflow.com/questions/7785079/how-use-token-authentication-with-rails-devise-and-backbone-js)

基本上，您发送登录数据并接收一个身份验证令牌，然后在所有后续 ajax 调用中使用该令牌。

用户发现他们的令牌并不是真正的问题：他们可以登录并合法访问信息。

# ria - 从 Silverlight RIA 服务接收的数据集中访问单个记录

> ID：10335024
> 
> 赞同：0
> 
> 时间：2012-04-26T13:59:27.937
> 
> 标签：ria, silverlight-5.0

我是 silverlight 和 wcf ria 服务的新手，我只找到从调用域服务查询接收到的数据集绑定到数据网格的示例。我希望能够单独访问每条记录，而无需将数据集绑定到任何东西。我该怎么做，或者是否需要绑定 silverlight 中的每个数据？示例：我调用 getlocations() 然后需要遍历每条记录并获取与每个位置关联的地理位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T23:21:06.757

好的。我试图在记录完成检索之前访问记录（异步操作未完成）。所以我将使用数据的函数转移到域服务加载方法的事件处理程序中，然后该函数就可以正常工作了。

# regex - TPerlRegEx：如何跨多行匹配任何字符

> ID：10335026
> 
> 赞同：0
> 
> 时间：2012-04-26T13:59:34.117
> 
> 标签：regex, delphi

我是 TPerlRegEx 的新手。由于某些数据有系统随机创建的附加行，因此无法匹配数据块中的数据。

数据

```
Opt: 
<NVR IP: 192.168.2.163>
<SRC IP: 192.168.2.123>
<TYPE: 5>
<INPUT: 2>

<Alarm ID:66

 Time:  29/07/2010 12:18:12 PM
 State: 1
 Assigned User: 0
 Assigned Time: 01/01/1970 8:00:00 AM
 Ack Time:  01/01/1970 8:00:00 AM>

<Alarm ID:67
 Time:  29/07/2010 3:11:07 PM
 State: 1
 Assigned User: 0
 Assigned Time: 01/01/1970 8:00:00 AM
 Ack Time:  01/01/1970 8:00:00 AM>

<Alarm ID:68
 Time:  29/07/2010 3:11:08 PM
 State: 1
 Assigned User: 0
 Assigned Time: 01/01/1970 8:00:00 AM
 Ack Time:  01/01/1970 8:00:00 AM>

Alarms got successfully 
```

这是我的正则表达式，它只能匹配警报 67 和 68。警报 66 下面有一个附加行，该行随机出现在数据块中。

```
<Alarm\x20ID:.*?\r\n\t.*?\r\n\t.*?\r\n\t.*?\r\n\t.*?\r\n\t.*?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T14:11:52.243

```
<Alarm\x20ID:.*?\r+\n+\t*.*?\r+\n+\t*.*?\r+\n+\t*.*?\r+\n+\t*.*?\r+\n+\t*.*?> 
```

或者更好

```
<Alarm\x20ID:.*?(\r\n)+\t*.*?(\r\n)+\t*.*?(\r\n)+\t*.*?(\r\n)+\t*.*?(\r\n)+\t*.*?> 
```

# java - 我将一轮高尔夫球的每洞得分存储在数据库中。我想编写一个函数，将表中的该列相加并显示在吐司中

> ID：10335030
> 
> 赞同：0
> 
> 时间：2012-04-26T13:59:52.860
> 
> 标签：java, android, sqlite

这是我创建的功能。Playgolf 表有列 id、holepar、strokes、putts。我正在寻找总结笔画。

我已经编辑了代码，现在我收到了这个错误......有什么想法吗？

```
public void DisplaySum(int sum)
{
    //Setup a local variable to store sum
    int intRoundsSUM = 0;
    db.open(); 
    //Setup your database cursor
    Cursor c = db.getPLAYGOLF();
    Toast.makeText(getBaseContext(), intRoundsSUM, Toast.LENGTH_LONG).show();

    //Iterate through the cursor
    //Sum up each value
   c.moveToFirst();
        while(c.isAfterLast() == false) {
            intRoundsSUM += c.getInt(2);
            c.moveToNext();
        }
    Toast.makeText(getBaseContext(), intRoundsSUM, Toast.LENGTH_LONG).show();
}
    // LOG CAT MAIN ERROR: 
    //E/AndroidRuntime(597): android.content.res.Resources$NotFoundException: String resource ID #0xa 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:02:34.873

你必须管理你的光标，从

```
cursor.moveToFirst();
while(cursor.isAfterLast() == false) {
    intRoundsSUM += c.getInt(2);
    cursor.moveToNext();
} 
```

另请阅读有关让您的活动控制光标的生命周期的信息`activity.startManagingCursor(cursor);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T14:05:46.150

您可以使用下一个循环遍历游标行：

```
while (cursor.moveToNext()) {
    intRoundsSUM += c.getInt(2);
} 
```

但您也可以尝试从数据库中进行“求和”选择。像这样的东西：

`SELECT SUM(strokes_column) FROM golf_table`

它将返回一列一行存储必要总和的表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T14:13:18.533

尝试修复错误`c.moveToFirst()`。`intRoundsSUM += c.getInt(2);`

总结它们所有你可以使用`while (c.moveToNext())`或在你的 sql 查询中求和（这会更好）。见[http://www.w3schools.com/sql/sql_func_sum.asp](http://www.w3schools.com/sql/sql_func_sum.asp)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-26T14:17:56.157

可能有两个原因：

1.  Playgolf 桌子是空的。通过使用检查大小`c.getCount();`
2.  您在光标的末尾。用于`c.moveToFirst()`转到光标的开头。

# wpf - “调用线程必须是 STA”解决方法

> ID：10335031
> 
> 赞同：6
> 
> 时间：2012-04-26T13:59:53.013
> 
> 标签：wpf, multithreading, task-parallel-library, dispatcher, sta

我知道关于这个主题有一些关于 SO 的答案，但我无法获得任何适合我的解决方案。我正在尝试从数据模板中触发的 ICommand 打开一个新窗口。**当实例化新窗口时**（在“new MessageWindowP”内），以下两个都给出了上述错误：

**使用 TPL/FromCurrentSynchronizationContext** *更新：有效*

```
public class ChatUserCommand : ICommand
{
    public void Execute(object sender)
    {
        if (sender is UserC)
        {
            var user = (UserC)sender;
            var scheduler = TaskScheduler.FromCurrentSynchronizationContext();                  
            Task.Factory.StartNew(new Action<object>(CreateMessageWindow), user,CancellationToken.None, TaskCreationOptions.None,scheduler);         
        }
    }

    private void CreateMessageWindow(object o)
    {
        var user = (UserC)o;
        var messageP = new MessageWindowP();
        messageP.ViewModel.Participants.Add(user);
        messageP.View.Show();
    }
} 
```

**使用 ThreadStart：** *更新：不推荐，请参阅 Jon 的回答*

```
public class ChatUserCommand : ICommand
{
    public void Execute(object sender)
    {
        if (sender is UserC)
        {
            var user = (UserC)sender;

            var t = new ParameterizedThreadStart(CreateMessageWindow);
            var thread = new Thread(t);
            thread.SetApartmentState(ApartmentState.STA);
            thread.Start(sender);           
        }
    }

    private void CreateMessageWindow(object o)
    {
        var user = (UserC)o;
        var messageP = new MessageWindowP();
        messageP.ViewModel.Participants.Add(user);
        messageP.View.Show();
    }
} 
```

谢谢

编辑。根据到目前为止的响应，我想指出我还在当前调度程序上尝试了 BeginInvoke，以及在原始方法中执行代码（这就是代码开始的方式）。见下文：

**BeginInvoke** *更新：不推荐查看 Jon 的回答*

```
public class ChatUserCommand : ICommand
{
    public void Execute(object sender)
    {
        if (sender is UserC)
        {
            var user = (UserC)sender;
            Dispatcher.CurrentDispatcher.BeginInvoke(new Action<object>(CreateMessageWindow), sender);       
        }
    }

    private void CreateMessageWindow(object o)
    {
        var user = (UserC)o;
        var messageP = new MessageWindowP();
        messageP.ViewModel.Participants.Add(user);
        messageP.View.Show();
    }
} 
```

**在同一个线程** *更新：如果你已经在 UI 线程上工作*

```
public class ChatUserCommand : ICommand
{
    public void Execute(object sender)
    {
        if (sender is UserC)
        {
            var user = (UserC)sender;
            var messageP = new MessageWindowP();
            messageP.ViewModel.Participants.Add(user);
            messageP.View.Show();    
        }
    }

} 
```

**BeginInvoke，使用对第一个/主窗口** *更新的调度程序的引用：有效*

```
 public void Execute(object sender)
   {
       if (sender is UserC)
       {
            var user = (UserC)sender;
                    GeneralManager.MainDispatcher.BeginInvoke(
                               DispatcherPriority.Normal,
                               new Action(() => this.CreateMessageWindow(user)));      
        }
    } 
```

其中 GeneralManager.MainDispatcher 是对我创建的第一个窗口的 Dispatcher 的引用：

```
 [somewhere far far away]
        mainP = new MainP();
        MainDispatcher = mainP.View.Dispatcher; 
```

我不知所措。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T14:03:42.553

调用线程*不仅*必须是 STA，还必须有消息循环。您的应用程序中只有一个线程已经具有消息循环，这就是您的主线程。所以你应该使用`Dispatcher.BeginInvoke`从你的主线程打开你的窗口。

例如，如果您有对主应用程序窗口 ( `MainWindow`) 的引用，您可以这样做

```
MainWindow.BeginInvoke(
    DispatcherPriority.Normal, 
    new Action(() => this.CreateMessageWindow(user))); 
```

**更新：** **小心：**你*不能*盲目地打电话`Dispatcher.CurrentDispatcher`，因为它没有做你认为它做的事情。[文档](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.aspx)说`CurrentDispatcher`：_

> 获取当前正在执行的线程的 Dispatcher，如果尚未与线程关联，则创建一个新的 Dispatcher。

这就是为什么您*必须*使用`Dispatcher`与已经存在的 UI 控件关联的原因（如上例中的主窗口）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-26T15:00:29.963

使用 TPL，您可以使用[TPL Extras 中的 StaTaskScheduler](http://blogs.msdn.com/b/pfxteam/archive/2010/04/07/9990421.aspx)

它将在 STA 线程上运行任务。

仅用于 COM。从未尝试运行多个 UI 线程。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-26T14:04:48.847

您正在尝试从后台线程创建一个窗口。由于各种原因，您无法做到这一点。通常，您需要在主应用程序线程中创建窗口。

对于您的情况，一个简单的想法是立即执行（只需调用`CreateMessageWindow`inside `Execute`）而不是分配 a `Task`，因为您的命令肯定会从主（UI）线程触发。如果您不确定`Execute`运行的线程，可以使用`Dispatcher.BeginInvoke()`.

您希望新窗口在非主线程中运行的情况确实很少。如果您的情况确实需要这样做，您应该在`Dispatcher.Run();`之后添加`messageP.View.Show();`（使用代码的第二个变体）。这将在新线程中启动消息循环。

您不应该尝试在 TPL 的线程中运行 window，因为这些线程通常是线程池线程，因此不受您的控制。例如，您不能确保它们是 STA（通常是 MTA）。

编辑：
从更新代码中的错误来看，很明显是`Execute`在一些非 UI 线程中运行。尝试使用`Application.Current.Dispatcher`而不是`Dispatcher.CurrentDispatcher`. （`CurrentDispatcher`表示当前线程的调度器，如果当前线程不是主线程可能会出错。）

# javascript - Javascript - 计算某人在密码中用于验证的字符数

> ID：10335033
> 
> 赞同：0
> 
> 时间：2012-04-26T14:00:07.930
> 
> 标签：javascript, validation, passwords, character, counting

我正在制作一个表格，老年人必须使用它来注册健康服务。（学校项目）我想这样做，如果输入的字符数少于或多于警报框的允许字符数，以说明他们在最后一个密码中输入了多少字符，以显示他们出错的地方。我已经编写或者更确切地说是复制和编辑了代码以进行验证。

```
if (pw.length < o.length[8] || pw.length > o.length[25])
alert("Your password must be between 8 to 25 chacters. The one you entered had * characters")
    //Would have to remember how many were entered, and then produce it
    return false; 
```

我做了一些我找不到的研究。但是，如果您对我的工作方式有一些指示，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:05:53.673

```
if (pw.length < 8 || pw.length >25){
    alert("Your password must be between 8 to 25 chacters. The one you entered had "+pw.length+" characters");
    return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:02:25.323

您正在寻找..

```
if(pw.length < 8 || pw.length > 25)
  alert("Bad Password!"); 
```

`pw.length`返回一个表示密码长度的数字。它不是一个数组，因此您不能像使用`o.length[8]`. 假设`o`是另一个字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T14:02:48.980

`o`在这种情况下是什么？

为什么不

`if (pw.length < 8 || pw.length > 25) ...`

不需要`o.length...`

这是您提到的复制和粘贴的问题。你有代码，但不明白。你会更好地编写自己的代码......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T14:06:06.763

假设 pw 是您的密码输入框（使用 getElementById 获得），您基本上需要使用 pw.value.length 检查框中值的长度，这将返回一个整数。这应该让你走上正确的轨道

# iphone - 如何从 iPhone 查看日志？

> ID：10335038
> 
> 赞同：8
> 
> 时间：2012-04-26T14:00:30.230
> 
> 标签：iphone, ios, macos, ios5, nslog

我在我的 iOS 应用程序中放置了几个 NSLog()，是否可以稍后在我的 Mac 上查看当应用程序在 iPhone 手机上运行时生成的所有日志，即使 iPhone 没有与 Mac 连接也是如此。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T14:07:08.257

您可以在管理器中查看 iPhone 的崩溃日志。

如果您想查看自己的日志语句，可以考虑 TestFlight ( [http://testflightapp.com](http://testflightapp.com) )。他们提供了一个包含远程日志记录功能的 SDK。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T14:07:16.820

不幸的是，这是不可能的。您唯一可以获得的是崩溃日志。如果你需要一个更好的日志系统，我建议你看看[CocoaLumberjack](https://github.com/robbiehanson/CocoaLumberjack)，一个非常强大的日志框架，它让你有机会保存日志文件，并最终将它们发送到服务器。您还有许多不同的级别，例如：日志信息、日志错误、日志警告等...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T14:07:26.117

不可以。但是，您可以使用以下内容将 NSLog 重定向到文件：http: [//blog.coriolis.ch/2009/01/09/redirect-nslog-to-a-file-on-the-iphone/](http://blog.coriolis.ch/2009/01/09/redirect-nslog-to-a-file-on-the-iphone/)

然后您可以通过 Xcode 访问该文件，或使用您的应用程序上传它。文件使用和隐私问题适用。

请记住，NSLog 应该在已发布的应用程序中关闭，因此您可能需要使用不同的日志记录应用程序。有许多 NSLog 替代方案可用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T14:03:37.833

我相当肯定这是不可能的。设备需要连接到 Mac 才能在 Xcode 的调试模式下运行，并且您需要处于调试模式才能查看包含您的 NSLogs 的控制台。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T14:04:45.477

手机上发生的每次崩溃都有一个崩溃日志，连接到您的 Mac 后即可读取。这些 NSLog 不会出现在此日志中，也不会以（半）永久的方式出现在其他任何地方。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-26T14:10:11.457

可以使用自定义宏和自定义类，它将每个消息写入文件目录中的文件中。如果应用程序中启用了文件共享，您可以稍后在 iTunes 中下载它们。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-26T14:13:34.210

在 mac 中查看日志可能是不可能的。但是您可以使用 TFLog() 将日志发送到 testflight。但是您需要通过 testflightapp 分发您的应用程序。并集成sdk。我认为这就是你要找的。试用 - testflightapp.com

# html - 我的导航标签应该在我的部分标签中吗？

> ID：10335039
> 
> 赞同：0
> 
> 时间：2012-04-26T14:00:31.223
> 
> 标签：html, nav

我是这个“语义标记”的新手。但我不知道这是否正确。简而言之，在这种情况下，我不知道何时使用 section 和 nav 标签。它应该是一个还是另一个，根本没有，还是和我一样？我说的是 id = sidebar 的部分。

```
<body>
    <div class="page">
        <header>
            <table id="formHeader" style="width:100%;text-align:center;">
                <tr>
                    <td></td>
                </tr>
            </table>
            <nav>
                <ul id="menu">
                    <li>@Html.ActionLink("Home", "Index", "Home")</li>
                    <li>@Html.ActionLink("About", "About", "Home")</li>
                </ul>
            </nav>
        </header>
        <section id="sidebar">
            @*<nav>*@
                Go To...
                <ul>
                    <li>First Move to Moon</li>
                    <li>First Move to Moon</li>                    
                </ul>
            @*</nav>*@   
        </section>
        <section id="main">        
            @RenderBody()                              
        </section>
        <footer>
        </footer>
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-01-16T16:28:38.167

你需要明白两点：

*   每个分段内容元素 ( `section`, `article`, `aside`, `nav`) 在文档大纲中创建一个条目（使用大纲工具，例如[gsnedders HTML5 Outliner](http://gsnedders.html5.org/outliner/)）。
*   从这个意义上说，`nav`属于其最近的父分段内容元素，或最近的父分段根（如`body`）。

因此，您的示例将创建以下大纲：

```
 1\. (no heading) → body
   1.1 (no heading) → nav
   1.2 (no heading) → section (#sidebar)
     1.2.1 (no heading) → nav
   1.3\. (no heading) → section (#main) 
```

第一个`nav`是整个*页面*的导航（或*站点*导航），因为它属于`body`.

第二个`nav`是侧边栏的导航（！）。

*如果*这适用于您的内容，那么您的示例很好。但它可能只有在侧边栏还包含其他内容时才有意义，否则一开始就没有理由拥有导航。如果您找不到 parent 的标题（如果您实际使用它并不重要），`section`则可能有问题。

在没有看到您的实际内容的情况下，没有人可以回答您的结构是否正确。侧边栏中的 是做什么`nav`用的？

*   如果它是您的主要内容的 ToC，则`nav`应该是该主要内容的子项。
*   如果它是页面/站点导航，它不应该是`section`（或任何其他分段元素）的子元素，因此它属于`body`.
*   …</li>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T13:26:55.497

如果它是一个主要的导航实体 - 那么 nav 标签就是要使用的东西。我的拙见是，如果您需要将导航元素放在部分标签中，那么它不值得导航。不是主要的导航。

编码：

```
<section id="sidebar">
  <nav>
    Go To...
    <ul>
      <li>First Move to Moon</li>
      <li>First Move to Moon</li>                    
    </ul>
  </nav>   
</section> 
```

....也许可以要求一个搁置标签而不是该部分。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-26T14:03:55.650

我不知道将此类标签放置在部分标签内部或外部的特殊规则，但我真的相信，语义标记的主要目的是 seo，这就是为什么你放置这个标签的地方，今天的谷歌和其他搜索引擎足够聪明找到它。

# ruby - 使用光标遍历 Mongoid 对象后将其保存在内存中

> ID：10335040
> 
> 赞同：0
> 
> 时间：2012-04-26T14:00:34.000
> 
> 标签：ruby, mongodb, mongoid

我使用相同的光标迭代对象几次，所以我假设将对象保存在内存中会更快。

在将所有对象与 一起使用之前，我尝试将所有对象放入一个数组中`objects = cursor.to_a`，但是调用会在等待数据下载时阻止任何进一步的计算，最终速度会变慢。

我想到的另一种方法是在进行计算时将文档附加到数组中，然后使用数组进行进一步的计算。尽管这是非常不干净且难以维护的。

是否有任何代码已经这样做了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T17:22:05.870

所以在 Mongoid 中已经有一种方法可以做到这一点。它缓存每个查询和每个迭代，因此它实际上只在您查询数据时将数据保留在内存中，因此它不会阻塞。

它只是光标上的一个函数，你可以这样调用它：

`Model.where(:name => "John").cache`

[更多信息：http://mongoid.org/docs/extras.html](http://mongoid.org/docs/extras.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T15:06:23.350

尝试使用`identity_map`，您可以在文档中找到更多详细信息：http: [//mongoid.org/docs/installation/configuration.html](http://mongoid.org/docs/installation/configuration.html)

> identity_map_enabled (false)：当设置为 true 时，Mongoid 将从数据库加载的文档按其 id 存储在身份映射中，因此在同一工作单元中对同一文档的后续数据库查询不会命中数据库。这仅适用于目前的关系查询。有关更多信息，请参阅身份映射文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T15:07:23.310

另一种选择：仅存储`id`数组中的部分。`Mongo::Cursor`据我所知，它本身不是哈希，而是类似于结果集的指针。更多信息：[Mongo Docs](http://api.mongodb.org/ruby/1.1.5/file.FAQ.html#Why_can_t_I_access_random_elements_within_a_cursor_)

# android - Stackoverflow on Fragments 显示一个 TabView 托管 ListView

> ID：10335047
> 
> 赞同：0
> 
> 时间：2012-04-26T14:00:59.617
> 
> 标签：android, android-fragments, stack-overflow

我有一个 Fragment Activity 托管一个 MapView 和一个包含 ListView 的 TabView。我用 SlidingDrawer 包装 TabView 的片段。问题是，当我从底部到顶部拉出 SlidingDrawer 时，应用程序总是崩溃并且我收到 Stackoverflow 错误。我不确定我哪里出错了，我不知道我需要修复什么。任何人都可以为我提供解决方案吗？谢谢

**片段 XML：**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <fragment android:id="@+id/my_map_fragment1"
              android:name="com.wwh.activities.MyMapFragment"
               android:layout_width="fill_parent"
              android:layout_height="fill_parent" >
          <!-- Preview: layout=@layout/my_map_fragment -->
    </fragment>

   <SlidingDrawer android:id="@+id/drawer" android:handle="@+id/handle"
        android:content="@+id/my_tab_fragment" android:layout_width="fill_parent"
        android:layout_height="wrap_content" android:orientation="vertical"
        android:layout_gravity="bottom">

    <fragment android:id="@+id/my_tab_fragment"
              android:name="com.wwh.activities.MyTabFragment"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent" >

    </fragment>

            <ImageView android:id="@+id/handle" android:layout_width="wrap_content"
            android:layout_height="wrap_content" android:background="@drawable/list_frame" />

</SlidingDrawer>

</RelativeLayout> 
```

**选项卡视图 XML：**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
        android:layout_width="fill_parent" android:layout_height="fill_parent">

<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost" android:layout_width="wrap_content"
    android:layout_height="wrap_content">
    <LinearLayout android:orientation="vertical"
        android:layout_width="wrap_content" android:layout_height="wrap_content">
        <HorizontalScrollView android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:fillViewport="true"
            android:background="@drawable/tab_bg"
            android:scrollbars="none">
        <TabWidget android:id="@android:id/tabs"
            android:layout_width="wrap_content" android:layout_height="wrap_content" />
        </HorizontalScrollView>
        <FrameLayout android:id="@android:id/tabcontent"
            android:layout_width="wrap_content" android:layout_height="wrap_content">       
        </FrameLayout>
    </LinearLayout>
</TabHost>

</LinearLayout> 
```

**列表视图 XML：**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#e7eff2"
    >

 <CheckBox
             android:id="@+id/cb_tab_sort"
             android:layout_width="320dp"
             android:layout_height="34dp"
             android:background="@drawable/checkbox_background"
             android:button="@drawable/check_tab_sort" />

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/list_bg"
    >

<ListView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@android:id/list"
    android:cacheColorHint="#00000000"
    android:divider="#ffffff"
    android:dividerHeight="2px"
    />

</LinearLayout>
</LinearLayout> 
```

**列表项 XML：**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" android:layout_height="fill_parent" android:orientation="vertical" android:background="@android:color/transparent">
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent" 
    android:orientation="horizontal"
    android:layout_marginBottom="12dp"
    android:layout_marginTop="7dp" 
    android:background="@android:color/transparent" 
    android:gravity="center">

    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content" android:layout_height="fill_parent" android:orientation="vertical" android:background="@android:color/transparent"
    android:gravity="center" android:layout_marginLeft="5dp"
    android:layout_marginBottom="2dp"
    android:layout_marginTop="2dp">

    <LinearLayout
     android:layout_width="55.33dp"
     android:layout_height="52.67dp"
     android:background="@drawable/list_frame_blank"
     android:padding="5dp"
     >

    <ImageView
    android:id="@+id/image"
    android:layout_width="39.33dp" 
    android:layout_height="41.67dp"
    android:layout_gravity="center"
    android:layout_marginLeft="2.5dp"
    android:layout_marginBottom="5dp"
    />

     </LinearLayout>

     </LinearLayout>

       <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" android:layout_height="fill_parent" 
    android:orientation="vertical">
        <LinearLayout 
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:orientation="horizontal">
        <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/txt_title" 
        android:layout_marginLeft="5dp"
        android:textStyle="bold"
        android:textColor="#cc3333"
        android:layout_weight="0.1" 
        android:textSize="20sp"/>

        <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/txt_distance"
        android:textStyle="bold"
        android:textColor="#000000"
        android:textSize="18sp"/>

         <ImageView
        android:layout_width="wrap_content"
        android:layout_gravity="center_vertical"
        android:layout_alignParentRight="true"
        android:layout_marginLeft="15dp"
        android:layout_marginRight="7dp"
        android:layout_marginTop="2dp"
        android:layout_height="wrap_content"
        android:background="@drawable/list_arrow"/>

        </LinearLayout>
        <RelativeLayout 
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content" 
        >
         <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/txt_list_desc"
        android:layout_marginLeft="5dp"
        android:layout_marginTop="5dp"
        android:textColor="#000000"
        android:ellipsize="end" 
        android:singleLine="true"
        android:layout_alignParentTop="true"
        android:layout_alignParentLeft="true"
        android:textSize="16sp"/>

             <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:id="@+id/txt_more"
            android:maxLength="103"
            android:textColor="#666666"
            android:ellipsize="marquee" 
            android:singleLine="false"
            android:textSize="14sp"
            android:layout_below="@+id/txt_list_desc"
            android:layout_alignLeft="@+id/txt_list_desc"
            />

            <ImageView
            android:id="@+id/list_icon"
            android:layout_width="wrap_content"
            android:layout_gravity="center_vertical"
            android:layout_marginLeft="15dp"
            android:layout_marginRight="5dp"
            android:layout_height="wrap_content"
            android:background="@drawable/list_icon_historical"
            android:layout_alignParentRight="true"
            android:layout_below="@+id/txt_list_desc"
            android:layout_alignRight="@+id/txt_list_desc"
            />

        </RelativeLayout>         
</LinearLayout>
</LinearLayout>
</LinearLayout> 
```

**堆栈跟踪：**

```
04-26 15:54:34.155: E/AndroidRuntime(13873): FATAL EXCEPTION: main
04-26 15:54:34.155: E/AndroidRuntime(13873): java.lang.StackOverflowError
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.text.Layout.getLineForOffset(Layout.java:880)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.text.Layout$Ellipsizer.getChars(Layout.java:2086)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.text.Layout$Ellipsizer.charAt(Layout.java:2078)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.text.Layout.getLineVisibleEnd(Layout.java:1040)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.text.Layout.draw(Layout.java:270)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.widget.TextView.onDraw(TextView.java:4443)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.view.View.draw(View.java:6933)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.view.View.draw(View.java:6936)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.view.View.draw(View.java:6936)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.widget.AbsListView.dispatchDraw(AbsListView.java:1627)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.widget.ListView.dispatchDraw(ListView.java:3215)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.view.View.draw(View.java:6936)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.widget.AbsListView.draw(AbsListView.java:3005)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.view.View.draw(View.java:6936)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.view.View.draw(View.java:6936)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.widget.SlidingDrawer.dispatchDraw(SlidingDrawer.java:304)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.view.View.draw(View.java:6936)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.widget.FrameLayout.draw(FrameLayout.java:357)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:1917)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.view.ViewRoot.draw(ViewRoot.java:1530)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.view.ViewRoot.performTraversals(ViewRoot.java:1266)
04-26 15:54:34.155: E/AndroidRuntime(13873):    at android.view.ViewRoot.handleMessage(ViewRoot.java: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T17:04:51.940

填充该元素时会捕获异常`android:id="@+id/txt_list_desc"`。当您使用 和 将长文本附加或设置到 TextView 时，通常会发生这种`android:ellipsize="end"`情况`android:singleLine="true"`。要说更多，我需要查看填写您的项目的代码。

# ios - UINavigationBar titleView 用于不同的方向

> ID：10335049
> 
> 赞同：0
> 
> 时间：2012-04-26T14:01:06.170
> 
> 标签：ios, uinavigationbar, uinavigationitem, titleview

更改方向时调整 UINavigationBar titleview 内容图像大小的最佳方法是什么。我有一个高度为 44px 的图像和另一个高度为 32px 的图像，旋转视图后，我更改了 titleview 并设置了新的 imageview。但也许还有另一种方法可以通过 autoresizingmask 或其他技巧来实现某些结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:50:28.103

autoresizingMask 可以在设备旋转时修改视图框架的大小，但是如果您想在旋转发生时在两个不同的图像之间切换，则必须以编程方式在`willAnimateRotationToInterfaceOrientation:duration:`

```
- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation duration:(NSTimeInterval)duration
{
    [super willAnimateRotationToInterfaceOrientation:interfaceOrientation duration:duration];

    if (interfaceOrientation == UIDeviceOrientationLandscapeRight || interfaceOrientation == UIDeviceOrientationLandscapeLeft) {        
        // landscape
        [imageView setImage:landscapeImage]; 
    } else {
        // portrait
        [imageView setImage:portraitImage]; 
    }
} 
```

# java - 从 HttpServletRequest 获取损坏的 cookie 值

> ID：10335052
> 
> 赞同：0
> 
> 时间：2012-04-26T14:01:13.517
> 
> 标签：java, servlets

浏览器发送一个 cookie `fbm_123456=base_domain=.test.com;`（它是由 Facebook Javascript SDK 设置的 cookie），这就是我从 FireBug 看到的。

但是当我在服务器端阅读它时，我的`cookie.getValue()`回报只是`base_domain`作为价值，我的意思是那`=.test.com`部分丢失了。所有其他 cookie 参数都为空（没关系）。

怎么可能？也许我错过了饼干的一些东西，它是某种特殊的饼干？如何获得原始 cookie 值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:06:30.563

cookie 无效。cookie 名称或值中不允许使用“=”字符。如果您使用的是 Tomcat，那么在以后的版本中，您可以使用以下系统属性来允许读取无效的 cookie：

```
-Dorg.apache.tomcat.util.http.ServerCookie.ALLOW_EQUALS_IN_VALUE=true 
```

正确的 cookie 值应该是：

```
fbm_123456="base_domain=.test.com" 
```

（注意引号）

# mysql - 数据库中内容的无限嵌套

> ID：10335054
> 
> 赞同：1
> 
> 时间：2012-04-26T14:01:25.580
> 
> 标签：mysql, database, logic, nested

我有一些看起来像这样的数据：
1：事件
2：事件 1
3：事件 1.1
4：事件 2
5：事件 2.2
6：事件 2.2.1
7：事件 2.2.1.1
8：事件 2.2.1.2
9：事件 2.2 .1.3
10：事件 2.2.1.3.1
11：事件 3
12：事件 4
13：事件 4.1

事件 1、2、3 和 4 都将嵌套在“事件”下 事件 1.1 将嵌套在事件 1 下，等等。

我应该如何将它存储在数据库的同一个表中？我可以只包含另一个要包含 id 的字段吗？

看起来像这样：

> **字段**：
> id（事件 ID）
> 名称（事件名称）
> ids_to_include（在此事件中发生的事件）

此（示例）数据最多嵌套 4 级（2.2.1.3.1）。但在我的脑海中，我正在考虑历史数据，历史上的每一个事件都有更多的子事件，所以嵌套需要是无限的。我不想为每种“类型”的历史事件创建一个新表，我宁愿只为没有嵌套的长期**时期（如 WW2：1939-1945）和****事件**创建一个表尽可能多的嵌套。

还是我会以完全错误的方式解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:07:06.793

有一些模型可以将分层数据存储在关系表中，其中最常用的两个是`nested sets`和`adjacency list`。

根据您要针对这些模型运行的查询类型，任何一种都可能更有效。

在`MySQL`中，邻接表更难查询，因为它需要集合递归，虽然它`MySQL`缺乏，但仍然可能。

请参阅我的博客中的此条目以比较这两种模型：

*   [**邻接表与嵌套集：MySQL**](http://explainextended.com/2009/09/29/adjacency-list-vs-nested-sets-mysql/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:05:25.383

您 cad 指定对父元素的外键引用：

```
Id    Name        ParentId
==========================
 1    Events      null
 2    Event 1     1
 3    Event 1.1   2
 4    Event 2     1
 5    Event 2.2   4
 . . . 
```

# java - Maven：构建耳朵：跳过编译阶段？

> ID：10335055
> 
> 赞同：3
> 
> 时间：2012-04-26T14:01:28.473
> 
> 标签：java, maven, maven-2

这是POM的一部分
...

```
 <groupId>com.soft</groupId>
   <artifactId>config-ear</artifactId>
   <version>1.0-SNAPSHOT</version>
   <packaging>ear</packaging>

   <name>Enterprise Application</name>
   <url>http://maven.apache.org</url>

   <build>
      <plugins>
         <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.0.2</version>
            <configuration>
               <source>1.6</source>
               <target>1.6</target>
            </configuration>
         </plugin>
         <plugin>
            <groupId>org.codehaus.mojo</groupId>      
            <artifactId>jaxws-maven-plugin</artifactId>
            <executions>
               <execution>
                  <goals>
                     <goal>wsgen</goal>
                  </goals>
                  <configuration>
                     <sei>com.soft.WebService</sei>
                     <genWsdl>true</genWsdl>           
                     <keep>true</keep>
                  </configuration>
               </execution>
            </executions>
         </plugin>
         <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-ear-plugin</artifactId>
            <version>2.6</version>
            <configuration>
               <version>1.4</version>
               <defaultLibBundleDir>lib</defaultLibBundleDir>
            </configuration>
         </plugin>
      </plugins>
   </build>  
... 
```

运行**mvn 干净安装**

```
[clean:clean]
Deleting directory D:\Development\config-ear\target
[ear:generate]
Generating application.xml
[resources:resources]
Using 'UTF-8' encoding to copy filtered resources.
skip non existing resourceDirectory D:\Development\config-ear\src\main\resources
[jaxws:wsgen]
Class not found: "com.soft.WebService" 
```

这个类存在于 src/main/java/com/soft/WebService.java
哪里是编译阶段？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T14:21:56.937

来自[Maven 生命周期参考](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#Lifecycle_Reference)：

**默认生命周期绑定 - 打包耳**

```
generate-resources  ear:generateApplicationXml
process-resources   resources:resources
package             ear:ear
install             install:install
deploy              deploy:deploy 
```

如您所见，EAR 生命周期不包含编译阶段

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:16:42.760

我认为您不应该在 EAR 项目中直接拥有 Java 源代码。EAR 项目应该只在您的类中引入其他工件，例如 WAR、EJB 或 JAR 文件。

因此，如果您想要在您的 EAR 文件中添加一些自定义类，您将必须创建另一个带有 JAR 打包的项目，然后将其作为您的 EAR 项目的依赖项包含在内。

请看一下这个问题的第一个答案，它显示了 EAR 打包的推荐结构：[Maven2: Best practice for Enterprise Project (EAR file)](https://stackoverflow.com/questions/1134894/maven2-best-practice-for-enterprise-project-ear-file)

# android - 仅播放通知默认声音 (Android)

> ID：10335057
> 
> 赞同：16
> 
> 时间：2012-04-26T14:01:28.790
> 
> 标签：android, audio, notifications

如何仅播放通知声音（不触发状态栏通知）？我想要通知默认声音并将其完全作为通知声音播放。是否可以使用 MediaPlayer 实现它？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-26T14:08:39.307

```
Uri defaultRingtoneUri = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);

MediaPlayer mediaPlayer = new MediaPlayer();

try {
      mediaPlayer.setDataSource(context, defaultRingtoneUri);
      mediaPlayer.setAudioStreamType(AudioManager.STREAM_NOTIFICATION);
      mediaPlayer.prepare();
      mediaPlayer.setOnCompletionListener(new OnCompletionListener() {

         @Override
         public void onCompletion(MediaPlayer mp)
         {
            mp.release();
         }
      });
  mediaPlayer.start();
} catch (IllegalArgumentException e) {
 e.printStackTrace();
} catch (SecurityException e) {
 e.printStackTrace();
} catch (IllegalStateException e) {
 e.printStackTrace();
} catch (IOException e) {
 e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-12-15T10:25:45.693

```
Uri notification = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);
Ringtone r = RingtoneManager.getRingtone(context.getApplicationContext(), notification);
r.play(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-01T09:07:03.983

**你可以试试这个**

```
private void sendNotification(String title, String messageBody,String tag) {

    Intent intent;
    intent = new Intent(this, MainActivity.class);
    intent.setAction(tag);
    intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    PendingIntent pendingIntent = PendingIntent.getActivity(this, 0 /* Request code */, intent,
            PendingIntent.FLAG_ONE_SHOT);
    String channel_id=this.getResources().getString(R.string.app_name);
    Uri defaultSoundUri= RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);
    NotificationCompat.Builder notificationBuilder = new NotificationCompat.Builder(this)
            .setSmallIcon(R.mipmap.ic_launcher)
            .setContentTitle(title)
            .setContentText(messageBody)
            .setStyle(new NotificationCompat.BigTextStyle()
                    .bigText(messageBody))
            .setAutoCancel(true)
            .setSound(defaultSoundUri)
            .setChannelId(channel_id)
            .setContentIntent(pendingIntent);

    NotificationManager notificationManager =
            (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
    NotificationChannel mChannel = null;
    if (android.os.Build.VERSION.SDK_INT >= android.os.Build.VERSION_CODES.O) {
        mChannel = new NotificationChannel(channel_id, channel_id, NotificationManager.IMPORTANCE_DEFAULT);
        notificationManager.createNotificationChannel(mChannel);
    }
    notificationManager.notify(0 /* ID of notification */, notificationBuilder.build());
}
} 
```

# c# - 从源文件编译程序时，如何将目标框架设置为 v2.0 或 v3.5 而不是 4.0？

> ID：10335058
> 
> 赞同：1
> 
> 时间：2012-04-26T14:01:35.183
> 
> 标签：c#, .net, compiler-construction

我有一个将源文件编译成可执行文件的小应用程序。问题是这个应用程序需要网络框架 4 才能工作，因此编译的应用程序也需要网络框架 4.0

如何设置目标框架下的函数以在编译的应用程序中使用？

```
 public static bool CompileExecutable(String sourceName)
{
//Source file that you are compliling 
FileInfo sourceFile = new FileInfo(sourceName);
//Create a C# code provider 
CodeDomProvider provider = CodeDomProvider.CreateProvider("CSharp");
//Create a bool variable for to to use after the complie proccess to see if there are any erros
bool compileOk = false;
 //Make a name for the exe
 String exeName = String.Format(@"{0}\{1}.exe",
 System.Environment.CurrentDirectory, sourceFile.Name.Replace(".", "_"));
 //Creates a variable, cp, to set the complier parameters
 CompilerParameters cp = new CompilerParameters();
 //You can generate a dll or a exe file, in this case we'll make an exe so we set this to true
 cp.GenerateExecutable = true;
 //Set the name
 cp.OutputAssembly = exeName;
 //Save the exe as a physical file
 cp.GenerateInMemory = false;
 //Set the compliere to not treat warranings as erros
 cp.TreatWarningsAsErrors = false;
 //Make it compile 
 CompilerResults cr = provider.CompileAssemblyFromFile(cp, sourceName);
 //if there are more then 0 erros...
 if (cr.Errors.Count > 0)
 {
     //A message box shows the erros that occured 
     MessageBox.Show("Errors building {0} into {1}" +
         sourceName + cr.PathToAssembly);
     //for each error that occured in the code make a separete message box
     foreach (CompilerError ce in cr.Errors)
     {
         MessageBox.Show("  {0}" + ce.ToString());
     }
 }
 //if there are no erros...
 else
 {
     //a message box shows compliere results and a success message
     MessageBox.Show("Source {0} built into {1} successfully." +
         sourceName + cr.PathToAssembly);
 }
 //if there are erros...
 if (cr.Errors.Count > 0)
 {
     //the bool variable that we made in the beggining is set to flase so the functions returns a false
     compileOk = false;
 }
 //if there are no erros...
 else
 {
     //we are returning a true (success)
     compileOk = true;
 }
 //return the result
 return compileOk;
} 
```

任何帮助，将不胜感激 ！先感谢您

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T09:13:06.740

如果您在 VS 2008 中使用 CodeDomProvider 以编程方式自己编译代码，那么该框架的目标版本是什么？

默认情况下它是 2.0，无论指定哪个 VS 2010 目标版本（2.0、3.0 或 3.5、4.0）。

为了以 4.0 框架为目标，请在提供程序的构造函数中提供一个 IDictionary 实例，如下所示

您可以使用以下构造函数将选项传递给编译器：

```
var providerOptions = new Dictionary<string, string>();
providerOptions.Add("CompilerVersion", "v4.0");
var compiler = new CSharpCodeProvider(providerOptions); 
```

# .net - 在 Windows Azure 中托管多版本服务

> ID：10335060
> 
> 赞同：2
> 
> 时间：2012-04-26T14:01:39.630
> 
> 标签：.net, asp.net-mvc, azure

我们目前处于将部署到 Windows Azure 的新项目的开发阶段。该产品将是一个使用新的 ASP.NET MVC Web API 的可公开访问的 Web API。我们需要做的是随着时间的推移支持 API 的多个版本。例如，当我们部署它时，它将是版本 1。除非强制更改合约，否则此版本号不应更改。这意味着，如果在版本 1 中，我们有一些服务路线，例如：

```
/v1/user/{id} 
```

它支持 GET/POST，对于 POST，它支持 Name 的值。好吧，也许在版本 2 中，我们想要更改 POST 接受的内容，现在我们将 Name 更改为 FullName，它还支持 FirstName 和 LastName。

这会产生任何使用版本 1 和该方法的人的问题，我们所做的新更改将破坏它们的功能。

所以我们希望能够在其中添加服务版本控制支持

```
/v1/user/{id} 
```

将继续工作并访问旧库等。我们将版本 2 并排部署到它，以便消费者可以迁移到使用

```
/v2/user/{id} 
```

而我们慢慢淡出旧的。

因此，简而言之，我们希望能够在 Windows Azure 中并排托管多个版本的 Web 服务，其中将包含不同的路由/合同、不同的核心库等。有人知道我们如何做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T14:30:52.257

您可以使用 ARR 来提供路由功能。它是一个 IIS 模块，可以通过 Azure 启动任务添加。请参阅这篇关于如何安装 ARR 的帖子：

[http://robindotnet.wordpress.com/2011/07/21/how-to-install-iis-application-request-routing-in-windows-azure/](http://robindotnet.wordpress.com/2011/07/21/how-to-install-iis-application-request-routing-in-windows-azure/)

然后，您将应用程序的每个版本作为单独的部署托管，并设置 ARR 以转发到正确的 *.cloudapp.net 地址。

另一个想法是在同一个部署中托管所有版本，并使用主机标头在它们之间进行路由。即（version1.yourdomain.com，version2.yourdomain.com）。

请参阅服务定义架构的 WebRole/Sites/Site/VirtualApplication 部分：

[http://msdn.microsoft.com/en-us/library/windowsazure/gg557553.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/gg557553.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:37:40.720

对 REST API 进行版本控制是一个棘手的问题。我认为没有一个正确的答案，但有很多讨论。大部分讨论都集中在 API 的设计上，例如 URI 和资源的布局，而不是它的技术实现。如果您还没有完全准备好将版本号放在 URL 中，我建议您先考虑一下，然后尝试弄清楚如何实现它。

SO上有几个起点：

*   [API 版本控制的最佳实践？](https://stackoverflow.com/questions/389169/best-practices-for-api-versioning)
*   [ASP.NET MVC 应用程序的版本控制 REST API](https://stackoverflow.com/questions/9197931/versioning-rest-api-of-an-asp-net-mvc-application)
*   [REST api 版本控制（仅版本表示，而不是资源本身）](https://stackoverflow.com/questions/2024600/rest-api-versioning-only-version-the-representation-not-the-resource-itself)

# javascript - JQuery Validator - 特定于规则的 errorPlacement

> ID：10335062
> 
> 赞同：6
> 
> 时间：2012-04-26T14:01:41.660
> 
> 标签：javascript, jquery, validation, errorplacement

我正在使用 jquery 验证器。

我已将自定义规则应用于表单中的一组元素。这些输入也可能具有与之关联的其他（标准）规则。如果元素不符合我的自定义规则，我需要将错误消息放在一个地方，但如果元素不符合标准规则，我需要将错误消息放在另一个地方。

我需要类似的东西 -

```
errorPlacement: function(error, element) {
    if (error == MyCustomError) {
        // put my error at the top of the form
    } else {
        // put my error next to the element
    } 
```

我看不到那个“错误”对象到底是什么（尝试用萤火虫向下钻取，但信息量不是很大）。

突出显示选项更加困难，因为我什至没有要使用的“错误”参数。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-01T15:59:10.920

error 是 jQuery Validate 添加的整个错误标签 HTML 元素，即：

```
<label class="error">Error message here</label> 
```

因此，如果您想在消息为“请勿这样做”的情况下以不同的方式放置消息，您可以：

```
errorPlacement: function(error, element) {
if (error.text() == "Do not do this") {
    error.insertBefore("SELECT FIRST ELEMENT IN THE FORM HERE USING STANDARD JQUERY SELECTORS");
} else {
    error.insertAfter(element);
} 
```

# javascript - HTML5，Javascript：音频结束无法正常工作

> ID：10335063
> 
> 赞同：1
> 
> 时间：2012-04-26T14:01:47.260
> 
> 标签：javascript, html, audio, browser

嘿伙计们，我为我的游戏构建了一个 AudioQueue，但不知何故它不起作用，代码：

```
handleAction: function ( src )
    {
        var oAudio = document.getElementById('voice');

        if(this.lastSoundPlayed == undefined || src != this.lastSoundPlayed.src) // checks if there is an actual new sound incoming.
        {
            var self  = this;
            oAudio.src = src; //sets the source
            oAudio.load();
            oAudio.onloadeddata  = oAudio.play(); // when loaded play the sound
            oAudio.onended = self.soundDone( self, oAudio ); //when the sound is finished fire the soundDone function
        }
    } 
```

soundDone() 函数：

```
soundDone: function( self , oAudio )
    {
        console.log("Finished"); //logs that the sound is finished
        self.lastSoundPlayed = oAudio; //sets the lastSoundPlayed
        self.sendNotification(self.SC_ACTION_COMPLETE); //fires off a notification that the sound is finished (im using pureMVC)
    } 
```

那么实际的问题是他认为声音是立即完成的。我记录了我的声音的持续时间并且所有的都是 NaN？我已经用 console.log(oAudio.duration) 进行了检查。我不知道为什么会这样。我也有背景音乐，我以与这些声音相同的方式播放，并且背景音乐没有错。

有人可以帮助我吗？

编辑：这是我的音频的音频标签：

```
<audio id="voice" src="mySound.mp3" controls preload="auto" ></audio> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T09:27:13.223

几周前发现的，当我打电话给它时，声音并没有完全加载。

# node.js - Socket.IO 发送（）不工作

> ID：10335064
> 
> 赞同：2
> 
> 时间：2012-04-26T14:01:48.880
> 
> 标签：node.js, socket.io

我有一个奇怪的问题。我正在编写一个简单的 Socket.IO 回显服务器作为测试，但我无法让 send() 方法工作。在服务器上，我正在使用这段代码：

```
var io = require('socket.io').listen(3000); 
var clients = {};

io.sockets.on('connection', function (socket) {     
        socket.send('test');

        socket.on('addclient', function(id) {
            socket.id = id;
            clients[id] = socket;
            console.log('New client connected: '+ id);
        });

        socket.on('echomessage', function(message) {
            console.log('Sending echo message to client '+ socket.id);
            socket.send(message);
        });

        socket.on('disconnect', function() {
            console.log('Client '+ socket.id + ' disconnected');
            delete clients[socket.id];
        });
}); 
```

send('test') 工作正常，但是当我发出 echomessage 事件时，我没有收到消息。服务器或客户端根本没有错误消息。

所以，在客户端我这样做：

```
// Connect with the server (works, connection established)

// works too, I see it on the server
sock.emit('addclient', 1); 

// I see 'Sending echo message to client 1' on the server
sock.emit('echomessage', 'Echo this please'); 
```

但我根本没有收到消息。

我完全不知道我做错了什么。感谢所有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T20:23:20.233

我相信你的错误在这里的某个地方：

```
 socket.on('addclient', function(id) {
        socket.id = id; // <-- 
        clients[id] = socket;
        console.log('New client connected: '+ id);
    }); 
```

不要更改`socket.id`，因为它是内部的，您可能会破坏使用套接字的内部过程。

它是由 socket.io 本身定义的：[source](https://github.com/LearnBoost/socket.io/blob/master/lib/socket.js#L39)

# javascript - 添加 Eventlistener 来控制 HTML5-Audio

> ID：10335068
> 
> 赞同：0
> 
> 时间：2012-04-26T14:01:55.027
> 
> 标签：javascript, html, event-listener

我现在真的真的尝试了几个小时，自己找到答案，但我只是不知道如何解决这个问题。我对 javascript 完全陌生。

我的任务：我想用 JavaScript 控制一个 HTML5 音频元素。我的第一步是：

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Test</title>
<script type="text/javascript">  
document.getElementById("myAudio").addEventListener('onpause', function(){
alert("Paused!");
getElementById("myAudio").play();
alert("Playing again!");

}, false);

</script>
</head>

<body>

<audio id="myAudio" controls autobuffer  >
<source src="Test.mp3" />

</audio>
</body> 
```

不幸的是，这不起作用。好像没有事件叫...

我想知道的另一件事是，Chrome 确实显示了音频控件。但是 Firefox (FF 11) 只显示一个空白页面。

我只是不明白，我现在花了几个小时尝试了很多替代方案......我真的希望有人能帮助我。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T14:24:29.047

Firefox 不支持 MP3 格式。使用其他音频文件格式，如 OGG。

添加具有这种不同文件格式的新源标记：

```
<audio id="myAudio" controls autobuffer  >
    <source src="Test.mp3" type="audio/mpeg" />
    <source src="Test.ogg" type="audio/ogg" />
</audio> 
```

[https://developer.mozilla.org/En/Media_formats_supported_by_the_audio_and_video_elements#MPEG_H.264_%28AAC_or_MP3%29](https://developer.mozilla.org/En/Media_formats_supported_by_the_audio_and_video_elements#MPEG_H.264_%28AAC_or_MP3%29)

使用可用的在线/离线工具之一将文件转换为 OGG 格式：

*   [http://media.io/](http://media.io/)
*   [http://ffmpeg.org/](http://ffmpeg.org/)
*   [http://www.videolan.org/](http://www.videolan.org/)
*   [http://www.mediacoderhq.com/](http://www.mediacoderhq.com/)

# php - 使用 PDO 时正确转义字段和查询设置

> ID：10335069
> 
> 赞同：0
> 
> 时间：2012-04-26T14:01:55.167
> 
> 标签：php, database, escaping, pdo, sanitize

> **可能重复：**
> [如何将 pdo 的准备好的语句用于 order by 和 limit 子句？](https://stackoverflow.com/questions/2683576/how-do-i-use-pdos-prepared-statement-for-order-by-and-limit-clauses)

我正在使用 PDO，因为它被推荐为 PHP 数据库连接的方式。但与此同时，我痴迷于保护我的查询，以确保我的系统尽可能免受黑客攻击。

PDO 和准备好的语句是一个很好的方法，但我有几个问题。我有一个自定义过滤系统，需要我手动构建查询。例如，这个：

```
$query=$pdo->prepare('SELECT * FROM log WHERE username=?');
$result=$query->execute(array($_GET['username'])); 
```

这行得通，一切都很好 - PDO 处理确保 $_GET 变量不会损害我的查询。

但是当我需要逃避其他事情时该怎么办？例如，如果我有这种情况，我只想返回五条记录：

```
$query=$pdo->prepare('SELECT * FROM log WHERE username=? LIMIT 5');
$result=$query->execute(array($_GET['username'])); 
```

这再次有效。但是如果限制值也来自 $_GET 怎么办？如何逃脱它？

为此，我首先想到我必须手动构建查询并使用 PDO::quote() 方法，如下所示：

```
$query='SELECT * FROM log WHERE username=? LIMIT '.$pdo->quote($_GET['limit']); 
```

但这不起作用，因为它在限制器周围放置了引号，这会破坏查询。

有没有像 mysql_real_escape_string() 那样使用 PDO 转义的正确方法？由于后者从未在结果变量周围加上引号，但我无法使用 quote() 来阻止这种行为。

另一种选择是构建我自己的转义器，但这违背了使用 PDO 准备好的语句开头的目的（准备好的语句本身总是在值​​周围加上引号）。

编辑：我还尝试将值转换为引号中的整数，如下所示：

```
$pdo->quote((int)$value,PDO::PARAM_INT); 
```

但它 - 仍然 - 在它周围加上引号。与 intval() 相同。

如果我必须做类似这种习惯的原始事情，为什么会如此积极地建议和推荐使用 PDO？我真的不想为这样的情况编写一个消毒方法，并希望没有任何东西被破坏或受到损害。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T14:08:05.087

您关心整数值。与`$_GET`字符串一样，您可以将其转换为具有强制转换或`%d`格式的整数`sprintf`：

```
$query = $pdo->prepare(
    'SELECT * FROM log WHERE username=? LIMIT ' . (int) $_GET['page']
);

$query = $pdo->prepare(
    sprintf('SELECT * FROM log WHERE username=? LIMIT %d', $_GET['page'])
); 
```

如果您确实需要一个字符串，那么`quote()`您已经写过的函数是合适的。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-04-26T14:09:46.320

这是一个很棒的初学者教程。教育你自己。

[为什么你应该使用 PHP 的 PDO...](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/)

# xslt - xslt 多级分组 - 从一种 xml 格式转换为另一种

> ID：10335078
> 
> 赞同：0
> 
> 时间：2012-04-26T14:02:32.860
> 
> 标签：xslt, xslt-1.0, xslt-2.0, xslt-grouping

我的 xslt 转换遇到问题。源 xml 具有多级节点的位置。

我想将 xml 从一种形式转换为另一种形式

这是我的 xslt

```
 <?xml version="1.0" encoding="UTF-8"?>
  <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>
  <xsl:template match="text() | @*">
    <xsl:apply-templates select="text() | @*"/>
  </xsl:template>
  <xsl:template match="SalesOrder">
    <SalesOrder z:Id="i1" xmlns="http://schemas.datacontract.org/2004/07/Eurofins.Genomics.Egsp.Xbo.OrderManagement" xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns:z="http://schemas.microsoft.com/2003/10/Serialization/">
      <BillTo>
        <xsl:value-of select="BillTo"/>
      </BillTo>
      <OrderReferenceCustomer>
        <xsl:value-of select="OrderID"/>
      </OrderReferenceCustomer>
      <OrderStatus>
        <xsl:value-of select="OrderStatus"/>
      </OrderStatus>
      <Contact>
        <xsl:value-of select="BillTo"/>
      </Contact>
      <ShipTo>
        <xsl:value-of select="ShipTo"/>
      </ShipTo>
      <SoldTo>
        <xsl:value-of select="SoldTo"/>
      </SoldTo>
      <SoldBy>
        <xsl:value-of select="SoldBy"/>
      </SoldBy>
      <Site>
        <xsl:value-of select="OrderSite"/>
      </Site>
      <ConfirmedDate>
        <xsl:value-of select="ConfirmedDate"/>
      </ConfirmedDate>
      <xsl:apply-templates/>
    </SalesOrder>
  </xsl:template>
  <xsl:template match="FulfilmentInfo">
    <FulfillmentInfo>
      <TestOrder>
        <xsl:value-of select="TestOrder"/>
      </TestOrder>
      <PromotionCode>
        <xsl:value-of select="PromotionCode"/>
      </PromotionCode>
      <FirstConfirmedDate>
        <xsl:value-of select="FirstConfirmedDate"/>
      </FirstConfirmedDate>
      <DocumentationLanguage>
        <xsl:value-of select="DocumentationLanguage"/>
      </DocumentationLanguage>
    </FulfillmentInfo>
  </xsl:template>
  <xsl:template match="PaymentOptions">
    <PaymentInformations>
        <xsl:apply-templates />
    </PaymentInformations>
  </xsl:template>
  <xsl:template match="PaymentOptions">
    <PaymentInformation>
      <PaymentMethod>
        <xsl:value-of select="PaymentMethod"/>
      </PaymentMethod>
    </PaymentInformation>
  </xsl:template>
</xsl:stylesheet> 
```

我的目的地转换后的 xml 是这样的

```
<SalesOrder>
      <BillTo>anyType</BillTo>
      <OrderReferenceCustomer>anyType</OrderReferenceCustomer>
      <OrderStatus>InCart</OrderStatus>
      <Contact>anyType</Contact>
      <ShipTo>anyType</ShipTo>
      <SoldTo>anyType</SoldTo>
      <SoldBy>anyType</SoldBy>
      <Site>TKY</Site>
      <ConfirmedDate>1900-01-01T01:01:01+05:30</ConfirmedDate>
      <FulfillmentInfo xmlns="">
        <TestOrder>true</TestOrder>
        <PromotionCode>anyType</PromotionCode>
        <FirstConfirmedDate>1900-01-01T01:01:01+05:30</FirstConfirmedDate>
        <DocumentationLanguage>anyType</DocumentationLanguage>
      </FulfillmentInfo>
      <PaymentInformation xmlns="">
        <PaymentMethod>CC</PaymentMethod>
      </PaymentInformation>
      <PaymentInformation xmlns="">
        <PaymentMethod>PO</PaymentMethod>
      </PaymentInformation>
      <PaymentInformation xmlns="">
        <PaymentMethod>EVO</PaymentMethod>
      </PaymentInformation>
    </SalesOrder> 
```

这是预期的结果，我想从我的转变中得到

```
<SalesOrder>
  <BillTo>anyType</BillTo>
  <OrderReferenceCustomer>anyType</OrderReferenceCustomer>
  <OrderStatus>InCart</OrderStatus>
  <Contact>anyType</Contact>
  <ShipTo>anyType</ShipTo>
  <SoldTo>anyType</SoldTo>
  <SoldBy>anyType</SoldBy>
  <Site>TKY</Site>
  <ConfirmedDate>1900-01-01T01:01:01+05:30</ConfirmedDate>
  <FulfillmentInfo xmlns="">
    <TestOrder>true</TestOrder>
    <PromotionCode>anyType</PromotionCode>
    <FirstConfirmedDate>1900-01-01T01:01:01+05:30</FirstConfirmedDate>
    <DocumentationLanguage>anyType</DocumentationLanguage>
  </FulfillmentInfo>
<PaymentInformations>
  <PaymentInformation xmlns="">
    <PaymentMethod>CC</PaymentMethod>
  </PaymentInformation>
  <PaymentInformation xmlns="">
    <PaymentMethod>PO</PaymentMethod>
  </PaymentInformation>
  <PaymentInformation xmlns="">
    <PaymentMethod>EVO</PaymentMethod>
  </PaymentInformation>
</PaymentInformations>
</SalesOrder> 
```

我还想知道这是否是将 xml 从一种格式转换为具有多级节点的另一种格式的正确方法。

这是我的输入 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<GenomicOrder>
  <SalesOrder>
    <OrderID>anyType</OrderID>
    <ProductionOrderCount>1</ProductionOrderCount>
    <OrderStatus>InCart</OrderStatus>
    <Contact>anyType</Contact>
    <ShipTo>anyType</ShipTo>
    <SoldTo>anyType</SoldTo>
    <BillTo>anyType</BillTo>
    <SoldBy>anyType</SoldBy>
    <OrderSite>TKY</OrderSite>
    <ConfirmedDate>1900-01-01T01:01:01+05:30</ConfirmedDate>
    <OrderRef>
      <Type>ERP</Type>
      <OrderRef>OrderRef1</OrderRef>
    </OrderRef>
    <OrderRef>
      <Type>CUSTOMER</Type>
      <OrderRef>OrderRef2</OrderRef>
    </OrderRef>
    <OrderRef>
      <Type>EXT</Type>
      <OrderRef>OrderRef3</OrderRef>
    </OrderRef>
    <FulfilmentInfo>
      <TestOrder>true</TestOrder>
      <PromotionCode>anyType</PromotionCode>
      <Comment>
        <CommentType>anyType</CommentType>
        <CommentText>anyType</CommentText>
        <CommentDate>1900-01-01T01:01:01+05:30</CommentDate>
        <InternalComment>true</InternalComment>
      </Comment>
      <Comment>
        <CommentType>anyType</CommentType>
        <CommentText>anyType</CommentText>
        <CommentDate>0001-01-01T00:00:00+05:30</CommentDate>
        <InternalComment>false</InternalComment>
      </Comment>
      <Comment>
        <CommentType>anyType</CommentType>
        <CommentText>anyType</CommentText>
        <CommentDate>9999-12-31T23:59:59.9999999+05:30</CommentDate>
        <InternalComment>true</InternalComment>
      </Comment>
      <Shipment>
        <shippingMethod>anyType</shippingMethod>
        <shippingCarrier>anyType</shippingCarrier>
        <shippingAccount>anyType</shippingAccount>
        <condolidatedShipment>anyType</condolidatedShipment>
        <ShippingCost>
          <NetPrice>1</NetPrice>
          <Tax>anyType</Tax>
          <Currency>anyType</Currency>
          <CalculationDate>anyType</CalculationDate>
        </ShippingCost>
      </Shipment>
      <FirstConfirmedDate>1900-01-01T01:01:01+05:30</FirstConfirmedDate>
      <DocumentationLanguage>anyType</DocumentationLanguage>
      <GiftCertificate>anyType</GiftCertificate>
      <GiftCertificate>anyType</GiftCertificate>
      <GiftCertificate>anyType</GiftCertificate>
    </FulfilmentInfo>
    <PaymentOptions>
      <PaymentMethod>CC</PaymentMethod>
      <TransactionId>anyType</TransactionId>
      <CardID>anyType</CardID>
      <PoNumber>PoNumber1</PoNumber>
      <Amount>1</Amount>
    </PaymentOptions>
    <PaymentOptions>
      <PaymentMethod>PO</PaymentMethod>
      <TransactionId>anyType</TransactionId>
      <CardID>anyType</CardID>
      <PoNumber>PoNumber2</PoNumber>
      <Amount>-3.40282347E+38</Amount>
    </PaymentOptions>
    <PaymentOptions>
      <PaymentMethod>EVO</PaymentMethod>
      <TransactionId>anyType</TransactionId>
      <CardID>anyType</CardID>
      <PoNumber>PoNumber3</PoNumber>
      <Amount>3.40282347E+38</Amount>
    </PaymentOptions>
  </SalesOrder>
  <ProductionOrder>
    <extpectedDeliveryDate>anyType</extpectedDeliveryDate>
    <ProductionSite>TKY</ProductionSite>
    <ProductionSystem>anyType</ProductionSystem>
    <BusinessUnit>GSY</BusinessUnit>
    <Comment>
      <CommentType>anyType</CommentType>
      <CommentText>anyType</CommentText>
      <CommentDate>1900-01-01T01:01:01+05:30</CommentDate>
      <InternalComment>true</InternalComment>
    </Comment>
    <Comment>
      <CommentType>anyType</CommentType>
      <CommentText>anyType</CommentText>
      <CommentDate>0001-01-01T00:00:00+05:30</CommentDate>
      <InternalComment>false</InternalComment>
    </Comment>
    <Comment>
      <CommentType>anyType</CommentType>
      <CommentText>anyType</CommentText>
      <CommentDate>9999-12-31T23:59:59.9999999+05:30</CommentDate>
      <InternalComment>true</InternalComment>
    </Comment>
    <Price>
      <NetPrice>1</NetPrice>
      <Tax>anyType</Tax>
      <Currency>anyType</Currency>
      <CalculationDate>anyType</CalculationDate>
    </Price>
    <Shipment>
      <shippingMethod>anyType</shippingMethod>
      <shippingCarrier>anyType</shippingCarrier>
      <shippingAccount>anyType</shippingAccount>
      <condolidatedShipment>anyType</condolidatedShipment>
      <ShippingCost>
        <NetPrice>-3.40282347E+38</NetPrice>
        <Tax>anyType</Tax>
        <Currency>anyType</Currency>
        <CalculationDate>anyType</CalculationDate>
      </ShippingCost>
    </Shipment>
    <OrderItems>
      <ItemName>anyType</ItemName>
      <Quantity>anyType</Quantity>
      <UnitPrice>
        <NetPrice>1</NetPrice>
        <Tax>anyType</Tax>
        <Currency>anyType</Currency>
        <CalculationDate>anyType</CalculationDate>
      </UnitPrice>
      <KitNumber>anyType</KitNumber>
      <KitComponents>
        <KitComponentNumber>anyType</KitComponentNumber>
        <Quantity>anyType</Quantity>
        <Price>
          <NetPrice>1</NetPrice>
          <Tax>anyType</Tax>
          <Currency>anyType</Currency>
          <CalculationDate>anyType</CalculationDate>
        </Price>
      </KitComponents>
      <ProductionInformation>
        <GeneItem>anyType</GeneItem>
      </ProductionInformation>
    </OrderItems>
    <OrderItems>
      <ItemName>anyType</ItemName>
      <Quantity>anyType</Quantity>
      <UnitPrice>
        <NetPrice>-3.40282347E+38</NetPrice>
        <Tax>anyType</Tax>
        <Currency>anyType</Currency>
        <CalculationDate>anyType</CalculationDate>
      </UnitPrice>
      <KitNumber>anyType</KitNumber>
      <KitComponents>
        <KitComponentNumber>anyType</KitComponentNumber>
        <Quantity>anyType</Quantity>
        <Price>
          <NetPrice>-3.40282347E+38</NetPrice>
          <Tax>anyType</Tax>
          <Currency>anyType</Currency>
          <CalculationDate>anyType</CalculationDate>
        </Price>
      </KitComponents>
      <ProductionInformation>
        <GeneItem>anyType</GeneItem>
      </ProductionInformation>
    </OrderItems>
    <OrderItems>
      <ItemName>anyType</ItemName>
      <Quantity>anyType</Quantity>
      <UnitPrice>
        <NetPrice>3.40282347E+38</NetPrice>
        <Tax>anyType</Tax>
        <Currency>anyType</Currency>
        <CalculationDate>anyType</CalculationDate>
      </UnitPrice>
      <KitNumber>anyType</KitNumber>
      <KitComponents>
        <KitComponentNumber>anyType</KitComponentNumber>
        <Quantity>anyType</Quantity>
        <Price>
          <NetPrice>3.40282347E+38</NetPrice>
          <Tax>anyType</Tax>
          <Currency>anyType</Currency>
          <CalculationDate>anyType</CalculationDate>
        </Price>
      </KitComponents>
      <ProductionInformation>
        <GeneItem>anyType</GeneItem>
      </ProductionInformation>
    </OrderItems>
    <ProductionOrderStatus>CART</ProductionOrderStatus>
  </ProductionOrder>
  <ProductionOrder>
    <extpectedDeliveryDate>anyType</extpectedDeliveryDate>
    <ProductionSite>EBE</ProductionSite>
    <ProductionSystem>anyType</ProductionSystem>
    <BusinessUnit>OLIGO</BusinessUnit>
    <Comment>
      <CommentType>anyType</CommentType>
      <CommentText>anyType</CommentText>
      <CommentDate>1899-11-30T01:01:01+05:30</CommentDate>
      <InternalComment>false</InternalComment>
    </Comment>
    <Comment>
      <CommentType>anyType</CommentType>
      <CommentText>anyType</CommentText>
      <CommentDate>1900-02-02T01:01:01+05:30</CommentDate>
      <InternalComment>true</InternalComment>
    </Comment>
    <Comment>
      <CommentType>anyType</CommentType>
      <CommentText>anyType</CommentText>
      <CommentDate>0001-02-02T00:00:00+05:30</CommentDate>
      <InternalComment>false</InternalComment>
    </Comment>
    <Price>
      <NetPrice>-3.40282347E+38</NetPrice>
      <Tax>anyType</Tax>
      <Currency>anyType</Currency>
      <CalculationDate>anyType</CalculationDate>
    </Price>
    <Shipment>
      <shippingMethod>anyType</shippingMethod>
      <shippingCarrier>anyType</shippingCarrier>
      <shippingAccount>anyType</shippingAccount>
      <condolidatedShipment>anyType</condolidatedShipment>
      <ShippingCost>
        <NetPrice>3.40282347E+38</NetPrice>
        <Tax>anyType</Tax>
        <Currency>anyType</Currency>
        <CalculationDate>anyType</CalculationDate>
      </ShippingCost>
    </Shipment>
    <OrderItems>
      <ItemName>anyType</ItemName>
      <Quantity>anyType</Quantity>
      <UnitPrice>
        <NetPrice>-0.100000024</NetPrice>
        <Tax>anyType</Tax>
        <Currency>anyType</Currency>
        <CalculationDate>anyType</CalculationDate>
      </UnitPrice>
      <KitNumber>anyType</KitNumber>
      <KitComponents>
        <KitComponentNumber>anyType</KitComponentNumber>
        <Quantity>anyType</Quantity>
        <Price>
          <NetPrice>0.100000024</NetPrice>
          <Tax>anyType</Tax>
          <Currency>anyType</Currency>
          <CalculationDate>anyType</CalculationDate>
        </Price>
      </KitComponents>
      <ProductionInformation>
        <GeneItem>anyType</GeneItem>
      </ProductionInformation>
    </OrderItems>
    <OrderItems>
      <ItemName>anyType</ItemName>
      <Quantity>anyType</Quantity>
      <UnitPrice>
        <NetPrice>2.1</NetPrice>
        <Tax>anyType</Tax>
        <Currency>anyType</Currency>
        <CalculationDate>anyType</CalculationDate>
      </UnitPrice>
      <KitNumber>anyType</KitNumber>
      <KitComponents>
        <KitComponentNumber>anyType</KitComponentNumber>
        <Quantity>anyType</Quantity>
        <Price>
          <NetPrice>2.1</NetPrice>
          <Tax>anyType</Tax>
          <Currency>anyType</Currency>
          <CalculationDate>anyType</CalculationDate>
        </Price>
      </KitComponents>
      <ProductionInformation>
        <GeneItem>anyType</GeneItem>
      </ProductionInformation>
    </OrderItems>
    <OrderItems>
      <ItemName>anyType</ItemName>
      <Quantity>anyType</Quantity>
      <UnitPrice>
        <NetPrice>3.40282347E+38</NetPrice>
        <Tax>anyType</Tax>
        <Currency>anyType</Currency>
        <CalculationDate>anyType</CalculationDate>
      </UnitPrice>
      <KitNumber>anyType</KitNumber>
      <KitComponents>
        <KitComponentNumber>anyType</KitComponentNumber>
        <Quantity>anyType</Quantity>
        <Price>
          <NetPrice>-3.40282347E+38</NetPrice>
          <Tax>anyType</Tax>
          <Currency>anyType</Currency>
          <CalculationDate>anyType</CalculationDate>
        </Price>
      </KitComponents>
      <ProductionInformation>
        <GeneItem>anyType</GeneItem>
      </ProductionInformation>
    </OrderItems>
    <ProductionOrderStatus>ORDERED</ProductionOrderStatus>
  </ProductionOrder>
  <ProductionOrder>
    <extpectedDeliveryDate>anyType</extpectedDeliveryDate>
    <ProductionSite>HSV</ProductionSite>
    <ProductionSystem>anyType</ProductionSystem>
    <BusinessUnit>NGS</BusinessUnit>
    <Comment>
      <CommentType>anyType</CommentType>
      <CommentText>anyType</CommentText>
      <CommentDate>9999-11-29T23:59:59.9999999+05:30</CommentDate>
      <InternalComment>true</InternalComment>
    </Comment>
    <Comment>
      <CommentType>anyType</CommentType>
      <CommentText>anyType</CommentText>
      <CommentDate>1899-10-29T01:01:01+05:30</CommentDate>
      <InternalComment>false</InternalComment>
    </Comment>
    <Comment>
      <CommentType>anyType</CommentType>
      <CommentText>anyType</CommentText>
      <CommentDate>1900-03-06T01:01:01+05:30</CommentDate>
      <InternalComment>true</InternalComment>
    </Comment>
    <Price>
      <NetPrice>3.40282347E+38</NetPrice>
      <Tax>anyType</Tax>
      <Currency>anyType</Currency>
      <CalculationDate>anyType</CalculationDate>
    </Price>
    <Shipment>
      <shippingMethod>anyType</shippingMethod>
      <shippingCarrier>anyType</shippingCarrier>
      <shippingAccount>anyType</shippingAccount>
      <condolidatedShipment>anyType</condolidatedShipment>
      <ShippingCost>
        <NetPrice>-0.100000024</NetPrice>
        <Tax>anyType</Tax>
        <Currency>anyType</Currency>
        <CalculationDate>anyType</CalculationDate>
      </ShippingCost>
    </Shipment>
    <OrderItems>
      <ItemName>anyType</ItemName>
      <Quantity>anyType</Quantity>
      <UnitPrice>
        <NetPrice>3.40282347E+38</NetPrice>
        <Tax>anyType</Tax>
        <Currency>anyType</Currency>
        <CalculationDate>anyType</CalculationDate>
      </UnitPrice>
      <KitNumber>anyType</KitNumber>
      <KitComponents>
        <KitComponentNumber>anyType</KitComponentNumber>
        <Quantity>anyType</Quantity>
        <Price>
          <NetPrice>3.40282347E+38</NetPrice>
          <Tax>anyType</Tax>
          <Currency>anyType</Currency>
          <CalculationDate>anyType</CalculationDate>
        </Price>
      </KitComponents>
      <ProductionInformation>
        <GeneItem>anyType</GeneItem>
      </ProductionInformation>
    </OrderItems>
    <OrderItems>
      <ItemName>anyType</ItemName>
      <Quantity>anyType</Quantity>
      <UnitPrice>
        <NetPrice>1.2</NetPrice>
        <Tax>anyType</Tax>
        <Currency>anyType</Currency>
        <CalculationDate>anyType</CalculationDate>
      </UnitPrice>
      <KitNumber>anyType</KitNumber>
      <KitComponents>
        <KitComponentNumber>anyType</KitComponentNumber>
        <Quantity>anyType</Quantity>
        <Price>
          <NetPrice>1.2</NetPrice>
          <Tax>anyType</Tax>
          <Currency>anyType</Currency>
          <CalculationDate>anyType</CalculationDate>
        </Price>
      </KitComponents>
      <ProductionInformation>
        <GeneItem>anyType</GeneItem>
      </ProductionInformation>
    </OrderItems>
    <OrderItems>
      <ItemName>anyType</ItemName>
      <Quantity>anyType</Quantity>
      <UnitPrice>
        <NetPrice>3.2</NetPrice>
        <Tax>anyType</Tax>
        <Currency>anyType</Currency>
        <CalculationDate>anyType</CalculationDate>
      </UnitPrice>
      <KitNumber>anyType</KitNumber>
      <KitComponents>
        <KitComponentNumber>anyType</KitComponentNumber>
        <Quantity>anyType</Quantity>
        <Price>
          <NetPrice>3.2</NetPrice>
          <Tax>anyType</Tax>
          <Currency>anyType</Currency>
          <CalculationDate>anyType</CalculationDate>
        </Price>
      </KitComponents>
      <ProductionInformation>
        <GeneItem>anyType</GeneItem>
      </ProductionInformation>
    </OrderItems>
    <ProductionOrderStatus>REVIEW</ProductionOrderStatus>
  </ProductionOrder>
</GenomicOrder> 
```

这是我期望的转型结果

```
 <?xml version="1.0" encoding="utf-8"?>
<SalesOrder xmlns:z="http://schemas.microsoft.com/2003/10/Serialization/" xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.datacontract.org/2004/07/Eurofins.Genomics.Egsp.Xbo.OrderManagement" z:Id="i1">
  <CreatedByClient >testString</CreatedByClient>
  <CreatedByUser >testString</CreatedByUser>
  <CreatedOn >2012-04-26T17:44:15.4556116+05:30</CreatedOn>
  <ExchangeableBusinessObjectId >00000000-0000-0000-0000-000000000000</ExchangeableBusinessObjectId>
  <IncrementalId >0</IncrementalId>
  <InstanceStatus >Active</InstanceStatus>
  <ModifiedByClient  i:nil="true"/>
  <ModifiedByUser  i:nil="true"/>
  <ModifiedOn  i:nil="true"/>
  <BillTo>self</BillTo>
  <ConfirmedDate>2012-04-26T17:44:15.4546116+05:30</ConfirmedDate>
  <Contact z:Id="i2">
    <CreatedByClient >TestApplication</CreatedByClient>
    <CreatedByUser >Ram</CreatedByUser>
    <CreatedOn >2012-04-26T17:44:15.4546116+05:30</CreatedOn>
    <ExchangeableBusinessObjectId >00000000-0000-0000-0000-000000000000</ExchangeableBusinessObjectId>
    <IncrementalId >0</IncrementalId>
    <InstanceStatus >Active</InstanceStatus>
    <ModifiedByClient  i:nil="true"/>
    <ModifiedByUser  i:nil="true"/>
    <ModifiedOn  i:nil="true"/>
    <Address z:Id="i3">
      <CreatedByClient  i:nil="true"/>
      <CreatedByUser  i:nil="true"/>
      <CreatedOn >2012-04-26T17:44:15.4556116+05:30</CreatedOn>
      <ExchangeableBusinessObjectId >00000000-0000-0000-0000-000000000000</ExchangeableBusinessObjectId>
      <IncrementalId >0</IncrementalId>
      <InstanceStatus >Active</InstanceStatus>
      <ModifiedByClient  i:nil="true"/>
      <ModifiedByUser  i:nil="true"/>
      <ModifiedOn  i:nil="true"/>
      <AddressType>Contact</AddressType>
      <City>Bangalore</City>
      <Country>India</Country>
      <CustomField1 i:nil="true"/>
      <CustomField2 i:nil="true"/>
      <Fax i:nil="true"/>
      <FirstName i:nil="true"/>
      <LastName i:nil="true"/>
      <Line1 i:nil="true"/>
      <Line2 i:nil="true"/>
      <Line3 i:nil="true"/>
      <Mobile i:nil="true"/>
      <Phone i:nil="true"/>
      <Recipient i:nil="true"/>
      <State i:nil="true"/>
      <Street i:nil="true"/>
      <Title i:nil="true"/>
      <Zip i:nil="true"/>
    </Address>
    <EmailAddress>ramprasad@eurofins.com</EmailAddress>
    <VatId i:nil="true"/>
  </Contact>
  <FulfillmentInfo z:Id="i4">
    <CreatedByClient  i:nil="true"/>
    <CreatedByUser >ram</CreatedByUser>
    <CreatedOn  i:nil="true"/>
    <ExchangeableBusinessObjectId >00000000-0000-0000-0000-000000000000</ExchangeableBusinessObjectId>
    <IncrementalId >0</IncrementalId>
    <InstanceStatus >Active</InstanceStatus>
    <ModifiedByClient  i:nil="true"/>
    <ModifiedByUser  i:nil="true"/>
    <ModifiedOn  i:nil="true"/>
    <Comments i:nil="true"/>
    <DocumentationLanguage>testString</DocumentationLanguage>
    <FirstConfirmedDate>2012-04-26T17:44:15.4536116+05:30</FirstConfirmedDate>
    <GiftCertificate i:nil="true"/>
    <GiftCertificates i:nil="true"/>
    <PromotionCode>testString</PromotionCode>
    <TestOrder>false</TestOrder>
  </FulfillmentInfo>
  <OrderReference>test</OrderReference>
  <OrderReferenceCustomer>Order123456</OrderReferenceCustomer>
  <OrderReferenceExternal>testext</OrderReferenceExternal>
  <OrderStatus>Review</OrderStatus>
  <PaymentInformations>
    <PaymentInformation z:Id="i5">
      <CreatedByClient >testString</CreatedByClient>
      <CreatedByUser >testString</CreatedByUser>
      <CreatedOn >2012-04-26T17:44:15.4536116+05:30</CreatedOn>
      <ExchangeableBusinessObjectId >00000000-0000-0000-0000-000000000000</ExchangeableBusinessObjectId>
      <IncrementalId >0</IncrementalId>
      <InstanceStatus >Active</InstanceStatus>
      <ModifiedByClient  i:nil="true"/>
      <ModifiedByUser  i:nil="true"/>
      <ModifiedOn  i:nil="true"/>
      <Amount>123</Amount>
      <EvoCardId>ER</EvoCardId>
      <PaymentMethod>EvoCard</PaymentMethod>
      <PoNumber i:nil="true"/>
      <TransactionID i:nil="true"/>
    </PaymentInformation>
  </PaymentInformations> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T14:10:39.620

也许只是对您的转换流程有更多的控制？像这样的东西：

```
 <xsl:template match="/">
    <xsl:apply-templates select="GenomicOrder/SalesOrder"/>
 </xsl:template>
 ...

  <xsl:template match="SalesOrder">
    <SalesOrder>
    ...
      <xsl:apply-templates select="FulfilmentInfo"/>
      <PaymentInformations>
          <xsl:apply-templates select="PaymentOptions/PaymentMethod"/>
      </PaymentInformations>
    </SalesOrder>
  </xsl:template>
  ...
  <xsl:template match="PaymentMethod">
    <PaymentInformation>
      <PaymentMethod>
        <xsl:value-of select="."/>
      </PaymentMethod>
    </PaymentInformation>
  </xsl:template>
  ... 
```

如果不是因为命名空间更改，您也可以侥幸逃脱，`<xsl:copy-of select="">`而不是手动重新创建结构。

# jquery - jpicker中的颜色更改事件处理

> ID：10335081
> 
> 赞同：0
> 
> 时间：2012-04-26T14:02:37.180
> 
> 标签：jquery, html, jpicker

我有几个 jpicker。例如：我想更改正文背景颜色，同时更改 jpicker 中的颜色。如何处理jpicker中的颜色变化事件？

**js：**

```
$('#colorSelector').jPicker(
                {
                    window:{expandable:true}
                }); 
```

**html**

```
<span id="colorSelector"></span> 
```

任何的想法？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:41:00.690

像这样的东西

```
$('#Callbacks').jPicker(
        {},
        function(color, context)
        {
          var all = color.val('all');
          alert('Color chosen - hex: ' + (all && '#' + all.hex || 'none') + ' - alpha: ' + (all && all.a + '%' || 'none'));
          $('#Commit').css(
            {
              backgroundColor: all && '#' + all.hex || 'transparent'
            }); // prevent IE from throwing exception if hex is empty
        }
); 
```

看那里：[http ://www.digitalmagicpro.com/jPicker/](http://www.digitalmagicpro.com/jPicker/)

# .net - erxkab1r2c2ibqtnnxtpzrumqv3gqlpl 是什么程序集？

> ID：10335082
> 
> 赞同：4
> 
> 时间：2012-04-26T14:02:37.200
> 
> 标签：.net, .net-3.5, clr

.NET EXE 应用程序在启动时崩溃。

事件记录到事件日志：

> EventType clr20r3，P1 erxkab1r2c2ibqtnnxtpzrumqv3gqlpl，P2 1.0.2.0，P3 4f4b95e0，P4 mscorlib，P5 2.0.0.0，P6 4a7ce2b8，P7 f8b，P8 80，P9 system.io.filenotfoundexception，P10 NIL。

破译参数（[Stackoverflow](https://stackoverflow.com/questions/4052770/deciphering-the-net-clr20r3-exception-parameters-p1-p10)，[MSDN](http://msdn.microsoft.com/en-us/magazine/cc793966.aspx)）产生：

*   **exe文件名**：`erxkab1r2c2ibqtnnxtpzrumqv3gqlpl`
*   **exe版本**：`1.0.2.0`
*   **exe文件时间戳**：`4f4b95e0`
*   **大会名称**：`mscorlib`
*   **错误的程序集版本**：`2.0.0.0`
*   **错误装配时间戳**：`4a7ce2b8`
*   **错误组装方法定义**：`f8b`
*   **故障方法偏移**：`80`
*   **异常类型**：`system.io.filenotfoundexception`
*   **？？？**：`NIL`

现在我只需要弄清楚程序集`erxkab1r2c2ibqtnnxtpzrumqv3gqlpl`是什么。

我假设它是一个知名集会的*公共令牌——除了我不知道它是什么。*

* * *

我尝试运行以下

```
C:\WINNT>dir *erxkab* /s
 Volume in drive C has no label.
 Volume Serial Number is E0E5-1C1A
File Not Found 
```

希望它`WinSxS`作为并排公共令牌文件名位于文件夹中的某个位置。

**注意**：请记住，这是一个客户端应用程序（即`.exe`），而不是 ASP.net 网站。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T13:24:42.643

Generally the file not found clr20r3 just means it's trying to load a reference it can't find.

For me this was completely unrelated to the ***named*** executable. Instead it turned out to be a missing library in a referenced project which was not copied to the target environment. I solved this in my case by the following.

*   Verify that the target machine is on all the same versions of .NET as my build machine
*   Set all non-system.* libraries to CopyLocal: True.
*   Check all dependent projects as well for libraries.

You can have more trouble if it's a third party library causing this. If that is the case I suggest removing references one by one until you find the offending library. Unfortunately if there's a dependency that's not detected this will not tell you the file that you're missing directly. But if you identify the library responsible, then you may be able to then determine dependency.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T06:20:28.807

它是托管过程本身。这意味着它（很可能*）是您正在启动的可执行文件。您实际启动的是哪个应用程序？

*它也可能是从主应用程序在新应用程序域中启动的可执行文件。

# c# - 检查 IEnumerable 中的每个项目 >

> ID：10335089
> 
> 赞同：2
> 
> 时间：2012-04-26T14:03:04.860
> 
> 标签：c#, .net, generics

目前我有一些类似下面的代码，它基于 NoOfRows 属性返回是否所有数据都已输入到列表中：

```
switch (NoOfRows)
            {
                case 1:
                    return InputList1.Any();
                case 2:
                    return InputList1.Any() && InputList2.Any();
                case 3:
                    return InputList1.Any() && InputList2.Any() && InputList3.Any();
                case 4:
                    return InputList1.Any() && InputList2.Any() && InputList3.Any() && InputList4.Any();
                case 5:
                    return InputList1.Any() && InputList2.Any() && InputList3.Any() && InputList4.Any() && InputList5.Any();
                case 6:
                    return InputList1.Any() && InputList2.Any() && InputList3.Any() && InputList4.Any() && InputList5.Any() && InputList6.Any();
                case 7:
                    return InputList1.Any() && InputList2.Any() && InputList3.Any() && InputList4.Any() && InputList5.Any() && InputList6.Any() && InputList7.Any();
                case 8:
                    return InputList1.Any() && InputList2.Any() && InputList3.Any() && InputList4.Any() && InputList5.Any() && InputList6.Any() && InputList7.Any() && InputList8.Any();
                case 9:
                    return InputList1.Any() && InputList2.Any() && InputList3.Any() && InputList4.Any() && InputList5.Any() && InputList6.Any() && InputList7.Any() && InputList8.Any() && InputList9.Any();
                case 10:
                    return InputList1.Any() && InputList2.Any() && InputList3.Any() && InputList4.Any() && InputList5.Any() && InputList6.Any() && InputList7.Any() && InputList8.Any() && InputList9.Any() && InputList10.Any();
                default:
                    return false;
            } 
```

我认为重构此代码并拥有一个可能会更好，`List<List<int>> or a Dictionary<int,List<int>>`但是我将如何执行上述操作以返回集合中的每个列表是否包含某些内容？

```
List<List<int>> values = new List<List<int>>(){InputList1, InputList2 ... InputList10};
var lists = values.Take(NoOfRows);
lists.. //check each item and return value of Any for each one 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T14:07:17.690

如果您只想知道任何子列表是否为空，请尝试以下操作：

```
var values = new List<List<int>>();  // create and load up...

...

// returns true if any sub-list is EMPTY
var isAnyEmpty = values.Any(l => !l.Any()); 
```

这将检查列表列表中是否存在任何没有项目的列表。

但是，如果您想要那些为空的子列表的**索引，您可以将 Any() 的结果存储在 all 上：**

```
// will return a lists of bools for Any() applied to each sub-list
var listStates = values.Select(l => l.Any()).ToList(); 
```

然后，值所在的任何结果的索引`false`将是一个没有任何项目的列表。`Select`或者，或者，您可以直接使用传递索引的特殊形式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-26T14:07:00.020

嵌套列表可以很好地工作。您可能想研究[selectmany的使用](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.selectmany.aspx)

但我认为你想要的代码是这样的：

```
var nested = new List<List<int>>();
// put data in it

nested.All((inner) => inner.Any()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T14:08:36.130

```
var listoflists = new List<List<int>>;
bool allNonEmpty = listoflists.All(list => list.Any()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T14:09:23.363

您可能想尝试这样的事情：

```
 bool ContainsEmptyCollection(IEnumerable<List<int>> collections)
    {
        foreach (var collection in collections)
        {
            if (collection.Count == 0)
                return true;
        }

        return false;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T14:10:32.990

你的意思是这样的：

```
 List<List<int>> list = new List<List<int>>();
        bool anyNonEmpty = list.Any(x => x.Any()); 
```

# python - 替换 numpy 数组中的负值

> ID：10335090
> 
> 赞同：101
> 
> 时间：2012-04-26T14:03:09.877
> 
> 标签：python, numpy

有没有一种简单的方法可以用 0 替换数组中的所有负值？

我对如何使用 NumPy 数组进行了完整的了解。

例如

```
a = array([1, 2, 3, -4, 5]) 
```

我需要返回

```
[1, 2, 3, 0, 5] 
```

`a < 0`给出：

```
[False, False, False, True, False] 
```

这就是我卡住的地方——如何使用这个数组来修改原始数组。

* * *

## 回答 #1

> 赞同：151
> 
> 时间：2012-04-26T14:06:45.930

你已经成功了一半。尝试：

```
In [4]: a[a < 0] = 0

In [5]: a
Out[5]: array([1, 2, 3, 0, 5]) 
```

* * *

## 回答 #2

> 赞同：95
> 
> 时间：2012-04-26T14:05:31.123

尝试`numpy.clip`：

```
>>> import numpy
>>> a = numpy.arange(-10, 10)
>>> a
array([-10,  -9,  -8,  -7,  -6,  -5,  -4,  -3,  -2,  -1,   0,   1,   2,
         3,   4,   5,   6,   7,   8,   9])
>>> a.clip(0, 10)
array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9]) 
```

您只能使用 剪辑下半部分`clip(0)`。

```
>>> a = numpy.array([1, 2, 3, -4, 5])
>>> a.clip(0)
array([1, 2, 3, 0, 5]) 
```

您只能使用 剪辑上半部分`clip(max=n)`。（这比我之前的建议要好得多，它涉及传递`NaN`给第一个参数并`out`用于强制类型。）：

```
>>> a.clip(max=2)
array([ 1,  2,  2, -4,  2]) 
```

另一种有趣的方法是使用`where`：

```
>>> numpy.where(a <= 2, a, 2)
array([ 1,  2,  2, -4,  2]) 
```

最后，考虑[aix](https://stackoverflow.com/a/10335159/577088)的答案。我更喜欢`clip`简单的操作，因为它是自记录的，但他的回答更适合更复杂的操作。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-04-26T16:36:27.967

另一个不使用 numpy 的极简 Python 解决方案：

```
[0 if i < 0 else i for i in a] 
```

无需定义任何额外的功能。

```
a = [1, 2, 3, -4, -5.23, 6]
[0 if i < 0 else i for i in a] 
```

产量：

```
[1, 2, 3, 0, 0, 6] 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-07-10T14:20:57.350

还有另一种可能：

```
In [2]: a = array([1, 2, 3, -4, 5])

In [3]: where(a<0, 0, a)
Out[3]: array([1, 2, 3, 0, 5]) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-26T14:11:13.167

这是一种在没有 NumPy 的情况下在 Python 中实现的方法。创建一个返回所需内容的函数，并使用列表推导或[map](http://docs.python.org/library/functions.html#map)函数。

```
>>> a = [1, 2, 3, -4, 5]

>>> def zero_if_negative(x):
...   if x < 0:
...     return 0
...   return x
...

>>> [zero_if_negative(x) for x in a]
[1, 2, 3, 0, 5]

>>> map(zero_if_negative, a)
[1, 2, 3, 0, 5] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-31T09:17:58.883

基准使用`numpy`：

```
%%timeit
a = np.random.random(1000) - 0.5
b = np.maximum(a,0)
# 18.2 µs ± 204 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each) 
```

```
%%timeit
a = np.random.random(1000) - 0.5
a[a < 0] = 0
# 19.6 µs ± 304 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each) 
```

```
%%timeit
a = np.random.random(1000) - 0.5
b = np.where(a<0, 0, a)
# 21.1 µs ± 134 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each) 
```

```
%%timeit
a = np.random.random(1000) - 0.5
b = a.clip(0)
# 37.7 µs ± 124 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each) 
```

令人惊讶的是，`np.maximum`击败了[@NPE answer](https://stackoverflow.com/a/10335159/11671779)。

* * *

警告：

1.  `os[os < 0] = 0`比 快，`np.where()`但不受`numba`. 但无论如何，`np.maximum()`这是我发现的最快的。

2.  `np.maximum()`不同于`np.max()`和`np.amax()`。`np.maximum()`可以`vector`与单个值进行比较。

# java - 我的代码是否属于任何设计模式？

> ID：10335093
> 
> 赞同：1
> 
> 时间：2012-04-26T14:03:24.187
> 
> 标签：java, design-patterns

我有这段代码：

```
private String objectToString(Object obj){
if (obj instanceof String)
    return (String)obj;
if (obj instanceof Struct){
    Map<String,?> map = ((Struct)obj).getMembers();
     return map.toString();
 }
Class c = obj.getClass();
if (c.isArray())
{
    //obj. iterate elements and return values;
    return obj.toString();//to redi this

}
//this is for any other datatypes
else
    return obj.toString(); 
```

}

有人可以建议这是否属于 GOF 的任何设计模式。代码很简单，但只是为了澄清它查看传递的参数，并取决于以人类可读形式返回字符串的类型。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T14:21:51.120

您的代码是反模式的一个明显示例。最干净的方法是简单地覆盖您想要自定义文本表示的每个对象的 toString() 方法。例如，每次调用 System.out.println(someObject) - java 调用这个特定对象的 toString() 是什么。

这是一篇[文章](http://www.javapractices.com/topic/TopicAction.do?Id=55)，解释了如何/为什么重写是一个好主意。想想看 - 为什么你必须集中逻辑关于不同对象的文本表示，这些对象可能没有绝对的共同点？这就是为什么 toString() 是 Java 的 Object 对象的一部分的确切原因，并且由于 Java 中的每个类都隐式地继承自 Object，因此重写 toString() 方法非常有意义。

覆盖 toString() 方法还可以让您访问对象的内部状态，如果您想进行适当的文本表示，这可能是必需的，这在您建议的实现中不容易做到（虽然当然可以公开字段或吸气剂等。仅仅为了文本表示而这样做是没有意义的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:22:35.017

您正在尝试使用真正应该使用多态性的[适配器模式。](http://en.wikipedia.org/wiki/Adapter_pattern)

在你的身上实施正确的 toString() ，`Struct`你就回家了。IE

```
public class Struct {
    ...
    public String toString() {
        return getMembers().toString();
    }
} 
```

其余代码是多余的（如果 obj 是字符串`(String) obj`，将产生相同的结果）。`obj.toString()`

# javascript - Highcharts：阻止圆形标记在鼠标悬停时缩小

> ID：10335095
> 
> 赞同：2
> 
> 时间：2012-04-26T14:03:27.403
> 
> 标签：javascript, svg, highcharts

我正在使用 highcharts 建议的这种解决方法制作气泡图。 [http://highcharts.uservoice.com/forums/55896-general/suggestions/994151-bubble-chart](http://highcharts.uservoice.com/forums/55896-general/suggestions/994151-bubble-chart)

在为示例气泡图提供的链接中：http: [//highcharts.com/cases/bubble.htm](http://highcharts.com/cases/bubble.htm)

如何阻止圆形标记在鼠标悬停时缩小？我希望圆圈保持原样并显示工具提示。

我为此摆弄了一下，但找不到解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T14:25:31.623

将悬停选项设置为**false**

```
 plotOptions: {
      scatter: {
         marker: {
            radius: 5,
            states: {
               hover: {
                  **enabled: false,**
                  lineColor: 'rgb(100,100,100)'
               }
            }
         },
..... 
```

# java - 如何重新关注在 Solaris 机器上运行的 Swing Java GUI？

> ID：10335096
> 
> 赞同：0
> 
> 时间：2012-04-26T14:03:32.873
> 
> 标签：java, swing, user-interface, focus, solaris

大家好，我正在开发 Solaris 平台上的 java swings GUI，我希望我的应用程序始终拥有焦点，并且只有在我单击按钮时才会更改，我不得不这样做，因为它实际上可能看起来非常愚蠢。 ..如果有任何简单的解决方案，请告诉我：P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T16:08:27.300

从[如何使用焦点子系统](http://docs.oracle.com/javase/tutorial/uiswing/misc/focus.html)：

> 窗口如何获得焦点取决于窗口系统。在所有平台上都没有万无一失的方法来确保窗口获得焦点。在某些操作系统上，例如 Microsoft Windows，前窗口通常成为焦点窗口。在这些情况下，Window.toFront 方法将窗口移到前面，从而使其获得焦点。但是，在其他操作系统上，例如 Solaris™ 操作系统，窗口管理器可能会根据光标位置选择焦点窗口，在这些情况下，Window.toFront 方法的行为是不同的。

牢记这一点，您需要找到一种方法，让您的应用程序专注于 Java，并与您的窗口管理器一起使用。您可以尝试将窗口设置为“始终在顶部”，但同样，仍然取决于窗口管理器是否尊重该愿望。如果你能做到这一点，你可以安排一个`TimerTask`定期请求焦点到你的窗口。虽然这非常烦人，并且暗示它让我感到肮脏。

# javascript - $.get() 在 IE8 或 IE7 中不起作用

> ID：10335097
> 
> 赞同：0
> 
> 时间：2012-04-26T14:03:35.230
> 
> 标签：javascript, jquery, ajax, internet-explorer, get

*注意：我只尝试过 IE8 和 IE7（通过 IE8 开发人员工具），因为这些是我唯一可用的版本。*

我正在为 Wordpress 使用 ajax 搜索插件，该插件可以在这里找到：[http ://wordpress.org/extend/plugins/threewp-ajax-search/](http://wordpress.org/extend/plugins/threewp-ajax-search/)

它在 Firefox 中运行良好，但是 IE 显示发出 ajax 请求然后失败的迹象。我已将其缩小到 IE 没有从该`$.get()`函数中收到任何结果，即使在其他浏览器获得多个结果时`alert(ThreeWP_Ajax_Search.total_results);`，它也会始终发出警报。`0`这是处理ajax请求的插件部分：

```
$.get(url, function(data){
        ThreeWP_Ajax_Search.results = $('.hentry', data);

        // Remove extra elements if necessary
        ThreeWP_Ajax_Search.total_results = ThreeWP_Ajax_Search.results.length;
        alert(ThreeWP_Ajax_Search.total_results);
        if ( ThreeWP_Ajax_Search.results.length > ThreeWP_Ajax_Search.options.results_to_display )
        {
            ThreeWP_Ajax_Search.results = ThreeWP_Ajax_Search.results.slice( 0, ThreeWP_Ajax_Search.options.results_to_display );
        }

        if ( ThreeWP_Ajax_Search.results.length < 1 )
            ThreeWP_Ajax_Search.hide_results();

        ThreeWP_Ajax_Search.do_callback(callback);
    }); 
```

*注意：`url`是标准的 Wordpress 搜索 url，由 wordpress 搜索引擎处理。我有一些搜索插件，但它们都是在服务器端执行的。*

我也尝试过替换`$.get()`和`$.ajax()`设置`cache: false`，但是没有任何效果。

有谁知道可能导致此问题的原因是什么？

可以在以下位置找到一个实时示例：[http](http://rcnhca.org.uk/sites/first_steps/) ://rcnhca.org.uk/sites/first_steps/ （搜索“护理”会返回许多结果）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T14:21:44.783

当浏览器是 IE7 或 IE8 时，似乎加载了一些条件 JS。该文件名为“selectivizr-mis.js”，加载时返回 404 错误。

也许该站点的 IE7 和 IE8 功能依赖于该文件中的某些内容才能正常工作？

无论哪种情况，该文件都应该正确加载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T14:14:20.977

我认为问题在于 IE7/IE8 中缺乏对 CORS 的支持。也许这可能会有所帮助？

[http://www.nczonline.net/blog/2010/05/25/cross-domain-ajax-with-cross-origin-resource-sharing/](http://www.nczonline.net/blog/2010/05/25/cross-domain-ajax-with-cross-origin-resource-sharing/)

# jquery - 先前设置时 Jquery 高度不正确

> ID：10335103
> 
> 赞同：1
> 
> 时间：2012-04-26T14:03:53.593
> 
> 标签：jquery, height

我已经制作了一个网站的单独部分，我们通过 iframe 将其加载到 joomla 网站中，但我想调整 iframe 容器的高度。

因此，我正在尝试使用以下代码检索我的 html 的高度，该代码运行良好（从 iframe 内部调用）：

```
$(document).ready(function() {
    var height = $(document).height();
    alert( height );
}); 
```

在所有页面上都会正确警告高度。

当我调整 iframe 容器的高度时，问题就出现了。当我使用此代码时：

```
$(document).ready(function() {
    var height = $(document).height();
    alert( height );
    parent.document.getElementById('blockrandom').style.height = height + 'px';
}); 
```

现在高度将与之前的高度相同或更大，因此当您从高度为 900 像素的页面转到 500 像素之一时，高度将保持为 900 像素（在警报中也是如此）。从小到大的作品都很好。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T16:25:52.173

是的，我发现一旦调整高度，使用本机属性或 jQuery 没有区别，生成的高度值似乎不会反映新设置的值。因此，为了在同一页面交互期间动态调整元素，到目前为止，我不得不求助于高度的启发式方法。

我最终评估元素中的内容并构建一个可接受的（如果不是完全准确的话）代理高度值。例如，假设我有一个包含 22 个标签字段的原始框。

当用户调整父值或选项时，我最终可能会得到介于 0 和完整 22 之间的任意数量的结果字段。

因此，如果在某些用户事件之后还剩 10 个，我会运行一个函数来计算可见元素并计算高度。所以 10 个字段 x 22 像素意味着我将包含的元素重新调整为大约 220 像素。

具体来说，我有一个抽象函数，我为其分配了一个默认高度、一个基本高度（它允许一些始终暴露的不可调整的元素，如文本/指令等）和元素高度乘数。

在加载和事件之间，我将元素容器设置为默认高度。在计算变量元素后，我通过将变量元素乘以乘数并将其添加到基本高度来计算值。

到目前为止，这是我能做的最好的事情，而且相当简单。使用 jQuery 选择器，只需要几行来计算和几行来计算和设置高度。

注意：值得注意的是，这只对不通过内容自动调整高度的元素是必需的。最大的罪魁祸首是 jQuery 选项卡，在我的例子中，这个问题发生了。当元素在 display = block||none 之间切换时，大多数未操作的相对高度元素会自动调整它们的空间。

这是一些示例代码：

```
setElemHeight = function(options) { 
    var _elem = options.containerElement;
    var _nBase = options.nBaseHeight;
    var _nMltplr = options.nMultiplierHeight;
    // COUNT ROWS
    var _nCnt = 0;
    $( '#' + _elem.id + ' div div:first-child  > input').each( function() { 
        if(this.style.display != 'none') _nCnt++; 
    });
    $(_elem).height(_nBase + (_nCnt * _nMltplr));
} 
```

我已经为我的目的抽象了足够多的内容，但是您可以将其抽象得更远一些，以便选择器子元素是动态的。

# symfony - Symfony2：使用实体字段类型访问 Twig 中的实体字段

> ID：10335104
> 
> 赞同：14
> 
> 时间：2012-04-26T14:03:54.340
> 
> 标签：symfony, twig, symfony-forms

这是我的 FormType ：

```
public function buildForm(FormBuilder $builder, array $options)
{
    $builder
        ->add('user', 'entity', array(
            'class'   => 'UserBundle:User',
            'expanded' => true,
            'property' => 'name',
        ));
} 
```

有没有办法访问视图（Twig）中的用户字段？

我想做这样的事情：

```
{% for u in form.user %}
    {{ form_widget(u) }}
    {{ form_label(u) }}
    {% if u.moneyLeft > 0 %}
    <span>{{ u.name }} : {{ u.moneyLeft }} €&lt;/span>
    {% endif %}
{% endfor %} 
```

...其中*moneyLeft*和*name*是来自用户实体的字段。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2014-09-30T23:05:21.670

在 Symfony 2.5 中 - 您可以通过使用子索引值访问每个选项的数据来完成此操作。

在表单生成器中 - 正如您所料：

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    // Generate form
    $builder
        ->add('child', 'entity', array(
            'class'         => 'MyBundle:Child',
            'label'         => 'Children',
            'property'      => 'any_property_for_label',
            'expanded'      => true,
            'multiple'      => true
        ));
} 
```

在 Twig 模板中：

```
{{ form_start(form) }}
{% for child in form.child %}
    {% set index = child.vars.value %}{# get array index #}
    {% set entity = form.child.vars.choices[index].data %}{# get entity object #}
    <tr>
        <td>{{ form_widget(child) }}</td>{# render checkbox #}
        <td>{{ entity.name }}</td>
        <td>{{ entity.email }}</td>
        <td>{{ entity.otherProperty }}</td>
    </tr>
{% endfor %}
{{ form_end(form) }} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-25T17:44:22.103

从今天开始，您可以在 master 分支（以及即将推出的 2.1）中执行以下操作：

```
{{ u.vars.data.name }} 
```

`u`是用户的表单视图，其中包含附加变量的列表。该`data`变量包含表单的规范化数据，通常是您的对象（除非您添加了自定义模型转换器）。

在 Symfony 的早期版本中，您可以：

```
{{ u.vars.value.name }} 
```

该`value`变量包含表单的视图数据，它也是您的对象（除非您添加了自定义模型或视图转换器）。

如果您正在使用 Symfony master 或 >=2.1，我建议您使用 access`data`而不是`value`.

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-11-03T12:25:51.663

这在 Symfony 3.1 中为我工作了一个无线电小部件：

```
{% set entity = form.parent.vars.choices[form.vars.name].data %} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-05-20T08:59:20.070

**版本 2.6.7**

与 Aaron Geiser 建议的类似，您可以使用[自定义表单小部件](http://symfony.com/doc/current/cookbook/form/form_customization.html#method-2-inside-a-separate-template)来实现此目的：

```
{# src/AppBundle/Resources/views/Form/fields.html.twig #}
{% extends 'form_div_layout.html.twig' %}

{%- block entity_widget -%}
    <div {{ block('widget_container_attributes') }}>
    {%- for n, child in form %}
        {{- form_widget(child, {
            'entity': form.vars.choices[n].data
        }) -}}
        {{- form_label(child) -}}
    {% endfor -%}
    </div>
{%- endblock %-}

{%- block radio_widget -%}
{# You now have access to entity #}
{%- endblock -%} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-05-05T14:07:57.470

更新[Bernhard Schussek](https://stackoverflow.com/a/11655538/1668200) 对**Symfony 2.8.4**（甚至更低版本）的回答：

```
{% for key,value in form.user %} {# key is the ID in the database table #}
    {{ form_widget(value, {'label':value.vars.label}) }}
    {{ form.user.vars.choices[key].data.moneyLeft }} {# this syntax is new #}
{% endfor %} 
```

# jquery - 为什么在 Jquery Mobile 向后转换中 hashchange 会触发两次？

> ID：10335107
> 
> 赞同：4
> 
> 时间：2012-04-26T14:03:58.723
> 
> 标签：jquery, events, jquery-mobile, navigation, hashchange

我迷路了....我正在尝试在**pagebeforechange**上重定向 Jquery Mobile 转换- 根据[JQM 文档](http://jquerymobile.com/test/docs/api/events.html)。

这应该适用于向前和向后的转换。虽然从技术上讲，我在向后过渡时遇到了问题。第一个有效，之后每次后退btn点击我都会得到2+向后转换。

我已经排除了 URL（现在只传递完整路径与路径和对象（如 $('#page') ）；不是这样。现在我正在寻找另一个罪魁祸首，但找不到它。

也许其他人看到了什么或者可以给我一个提示。谢谢参观：

带有注释的简要设置：

```
 // hashchange listener - just to see when hashchange fires
 $(window).on('hashchange', function(e, data){
     console.log("hashchange detected" );
     });

 // re-router
 $(document).on("pagebeforechange", function (e, data) {

       // block multiple events
       if(data.options.fromHashChange == true) {
           if(self.options.$blockMultiPbc == true) {
           console.log("blocked 1");
           self.options.$blockMultiPbc = false;
           return;
           }
        }

       // block $('#page') page-calls (triggered from trailing hashchange
       if(typeof data.toPage !== 'string') {
           console.log("blocked 2");
           return;
           }

        // redirect
       if(data.options.fromHashChange == true) {
            console.log("executing");
            // for hashchanges
            self.panelHash(e, data);
            } else {
                // for changepages
                self.panelTrans(e, data);
                } 
        });

       // panelHash function - here I reconfig data.options to redirect
       panelHash: function( e, data ) {

          // block multiple pagebeforechanges
          self.options.$blockMultiPbc = true;

          if ( some condition ) {
             console.log("MULTIVIEW");
             // tweak changepage options
             data.toPage = ...newULR (not $('object'))
             data.options.fromPage = ...new fromPage
             data.options.changeHash = true;
             data.options.reverse = true;
             console.log( newURL );
             } else {
                // JQM does this
                }
           } 
```

这是一个示例页面： [示例](http://www.stokkers.mobi/jqm/multiview/sample-listform.html)

要重现 click *page2 menu*， page3 *menu*，清除控制台，单击浏览器返回一次，检查控制台（SINGLE RUN），再次单击浏览器返回，检查控制台（两次运行...）

**问题**
我不是在寻找解决方案 - 只是关于可能导致第二次向后过渡两次触发的一些想法。

感谢您的一些想法！

**编辑**
我在 sript 中添加的控制台越多，就越明显，第二个不需要的 hashchange 会在短暂的延迟后出现。我首先认为它与 JQM 的**fake_onhashchange**事件有关，但完全删除它并没有成功。继续寻找。

**EDIT2** - found an [issue on Githu](https://github.com/jquery/jquery-mobile/issues/4094)b - so it's not my script... phew... Still hints are welcome :-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T21:43:17.627

Ok. I think I found it. It's a bug in the pushstate handler.

Details and possible fix [on Github](https://github.com/jquery/jquery-mobile/issues/4094)

# c# - 将 c# 数组编组为静态 c 库的指针

> ID：10335110
> 
> 赞同：0
> 
> 时间：2012-04-26T14:04:10.050
> 
> 标签：c#, pointers, marshalling, static-libraries, zlib

我仍在努力从 ac 静态库中调用一些函数。我在这个[toms 包装](http://tom-shelton.net/index.php/2008/12/11/creating-a-managed-wrapper-for-a-lib-file/)器之后用 Visual Studio 围绕静态库编写了一个包装器，现在可以访问 c# 端的函数，但是在处理它们时我遇到了一些错误。

所以这里是函数看起来原来的样子：

```
ZEXTERN Int32 ZEXPORT compressZIP OF((unsigned char *dest,   Uint32 destLen,
                             unsigned char *source, Uint32 sourceLen,
                             Uint32 *_crc32)); 
```

这导致在 c# 方面

```
public int compressZIP(byte* dest, uint destLen, byte* source, uint sourceLen,
                            uint* _crc32); 
```

所以，现在我被指针问题困住了，我尝试了类似的东西

```
byte[] data = new byte[size]
(fixed ptr = data) 
```

并将ptrs传递给函数。但我总是最终会出现一些内存违规或其他内存异常。

当我调用看起来有点相同的 uncompressZIP 时，我得到 2 个正确的未压缩字符，但只有栅栏的东西。

有人可以帮我填写函数的正确参数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T16:09:03.700

不要将它声明为 C# 端的指针，而是作为字节数组。并确保包括[OutAttribute](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.outattribute.aspx)。

一个工作示例：

```
[DllImport("PixelFlowIE.dll", CallingConvention = CallingConvention.Cdecl, EntryPoint = "PixelFlow")]
private static extern void PixelFlowDLL([In, Out] Node[] gi, int width, int height, SourceInfo[] sources, int sourceCount, int iterations, int iterPerPeriod, ProgressCallback prg); 
```

# windows - java版本问题:(

> ID：10335112
> 
> 赞同：0
> 
> 时间：2012-04-26T14:04:12.233
> 
> 标签：windows, java, aix

我的应用程序在 AIX 系统中运行，版本如下。

我在我的 windows des 工作

```
Host Operating System is AIX, version 5.3

Java version = J2RE 1.5.0 IBM J9 2.3 AIX ppc-32 j9vmap3223-20080315 (JIT enabled)

J9VM - 20080314_17962_bHdSMr

JIT  - 20080130_0718ifx2_r8

GC   - 200802_08, Java Compiler = j9jit23, Java VM name = IBM J9 VM

was.install.root = /hosting/products/WebSphereT03

user.install.root = /hosting/configs/WebSphereT03/AppServer

Java Home = /hosting/products/WebSphereT03/java/jre

ws.ext.dirs = /hosting/products/WebSphereT03/java/lib:/hosting/configs/WebSphereT03/AppServer/classes:/hosting/products/WebSphereT03/classes:/hosting/products/WebSphereT03/lib:/hosting/products/WebSphereT03/installedChannels:/hosting/products/WebSphereT03/lib/ext:/hosting/products/WebSphereT03/web/help:/hosting/products/WebSphereT03/deploytool/itp/plugins/com.ibm.etools.ejbdeploy/runtime

Classpath = /hosting/configs/WebSphereT03/AppServer/properties:/hosting/products/WebSphereT03/properties:/hosting/products/WebSphereT03/lib/startup.jar:/hosting/products/WebSphereT03/lib/bootstrap.jar:/hosting/products/WebSphereT03/lib/j2ee.jar:/hosting/products/WebSphereT03/lib/lmproxy.jar:/hosting/products/WebSphereT03/lib/urlprotocols.jar:/hosting/products/WebSphereT03/deploytool/itp/batchboot.jar:/hosting/products/WebSphereT03/deploytool/itp/batch2.jar:/hosting/products/WebSphereT03/java/lib/tools.jar:/hosting/apps/T03-logProcessor-sit/lib:/hosting/products/WebSphereT03/bin:/usr/mqm/java/lib

Java Library path = /hosting/products/WebSphereT03/java/jre/bin:/hosting/products/WebSphereT03/java/jre/bin:/hosting/products/WebSphereT03/java/jre/bin/classic:/hosting/products/WebSphereT03/java/jre/bin:/hosting/products/WebSphereT03/bin:/hosting/products/WebSphereT03/java/jre/bin/j9vm:/hosting/products/WebSphereT03/java/jre/bin/j9vm:/hosting/products/WebSphereT03/java/jre/bin/j9vm:/usr/lib:/usr/mqm/java/lib 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:08:07.823

你应该使用这个：

```
Java version = J2RE 1.5.0 IBM J9 2.3 AIX ppc-32 j9vmap3223-20080315 (JIT enabled) 
```

您的 RAD 版本应该与您的服务器上运行的 WAS 版本相匹配。您应该在正确版本的 RAD 中使用经过认证的 JVM。

# jquery - 如何使用 jquery 从样式表中获取背景颜色

> ID：10335116
> 
> 赞同：0
> 
> 时间：2012-04-26T14:04:41.423
> 
> 标签：jquery, jquery-selectors

我有一个可以更改样式表的 Web 程序（不要问），我需要使用 jquery 获取类的背景颜色属性值。类如下所示，但每个样式表都有不同的颜色。

DIV.row.error DIV.field INPUT.input-field

{背景：#fbdad8；边框：1px #ef4035 实心；-webkit-border-radius：0.3em；-moz-边界半径：0.3em；-o-边界半径：0.3em；边界半径：0.3em；}

我之前尝试过使用代码，但它总是白色的，有什么想法吗？

```
 var checked = $('#<%=chkTermsAgreed.ClientID %>').attr('checked');
      var toChange = $('#<%=lblTermsAgreed.ClientID %>')

      if (!checked) {

          var bgColor = $('<div class=\"row error\"><input class=\"input-field\"/></div>').hide().appendTo("body");
          bgColor = bgColor.find('.input-field');
          toChange.css('background-color', bgColor.css('background-color'));
          bgColor.remove();
       } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T14:14:54.813

即使不存在类的元素，我看到的唯一能够获取背景颜色的解决方案是读取 js 中的样式表。

好消息是它们是可浏览的对象，并且在它们尚未解析时读取它们是有效的。

例如，您可以迭代所有这样的规则，以找到您的背景颜色：

```
for (var i=0; i<document.styleSheets.length; i++) {
        var styleSheet = document.styleSheets[i];
        var cssRules = styleSheet.rules; // chrome, IE
        if (!cssRules) cssRules = styleSheet.cssRules; // firefox
        for (var j=0; j<cssRules.length; j++) {
            var rule = cssRules[j];
            console.log(styleSheet.href, rule);
            if (rule.selectorText=="DIV.row.error DIV.field INPUT.input-field") {
                console.log('found it : ', rule.style.getPropertyValue('background-color'));
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:57:01.180

据我了解，您正在尝试获得`$('div.row.error input[class="input-field"]')`类的背景颜色样式。当你明确你想要得到的东西时，这个问题就会自行解决：

*   **类**选择器足以标记没有空格的名称
*   您可以通过 tag[attribute="value"] 选择器选择具有属性**的元素**
*   如果您在编写主选择器时有足够的空间并输入新的选择器；你**会发现**前者的子选择器。
*   如果您选择具有类的元素或组**，**您可以更改或获取它的任何属性。

现在让我们编码。这是我的建议：

```
var checked = $('#<%=chkTermsAgreed.ClientID %>').attr('checked');
var toChange = $('#<%=lblTermsAgreed.ClientID %>');
var source = $('div.row.error input[class="input-field"]');

if (!checked) {
    toChange.css('background-color', source.css('background-color'));
} 
```

我在检查器中尝试了选择器。有用。希望这可以帮助。干杯。

# objective-c - 如何打印实体 - CoreData

> ID：10335120
> 
> 赞同：1
> 
> 时间：2012-04-26T14:04:47.833
> 
> 标签：objective-c, ios, core-data, entity

我想打印一个实体。

我有一个 JSON，我得到了值，将它们设置在我的实体中。现在我想显示我的实体以查看它是否设置正确，如何？

这是我的代码，它似乎工作，NSLOG 打印我想要的。凉爽的。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    dataToDisplay = [[NSMutableArray alloc] init];

    //récupération du chemin vers le fichier contenant le JSON
    NSString *filePath = [[NSBundle mainBundle] pathForResource:@"JSON" ofType:@"txt"];

    //création d'un string avec le contenu du JSON
    NSString *myJSON = [[NSString alloc] initWithContentsOfFile:filePath encoding:NSUTF8StringEncoding error:NULL];   

    //Parsage du JSON à l'aide du framework importé
    NSDictionary *json    = [myJSON JSONValue];

    //récupération  du total des Boxes
    NSDictionary *resultats    = [json objectForKey:@"totalBox"];

    //récupération du tableau de Boxes
    NSArray *listBoxes    =  [resultats objectForKey:@"boxes"];

    //On parcourt la liste de boxes
    for (NSDictionary *dic in listBoxes) {

        getBoxes *boxes = [[getBoxes alloc] init];
        boxes.nameBox = [dic objectForKey:@"boxName"];
        //renseingement du score
        boxes.priceBox = [dic objectForKey:@"boxPrice"];
        boxes.kindBox = [dic objectForKey:@"boxKind"];
        boxes.typeBox = [dic objectForKey:@"boxType"];
        //ajout à la liste
        [dataToDisplay addObject:boxes];

        //libération de la mémoire
        [boxes release];
    }

    NSLog(@"boxKind %@", [[listBoxes objectAtIndex:1] valueForKey:@"boxKind"]);
    //à ne pas oublier après l'allocation effectuée au début

    // TEST 
    NSManagedObjectContext *cxt = [self managedObjectContext];
    NSManagedObject *newBoxes = [NSEntityDescription insertNewObjectForEntityForName:@"Boxes" inManagedObjectContext:cxt];
    [newBoxes setValue:[[listBoxes objectAtIndex:1] valueForKey:@"boxKind"] forKey:@"kindBox"];
    [newBoxes setValue:[[listBoxes objectAtIndex:1] valueForKey:@"boxPrice"] forKey:@"priceBox"];
    [newBoxes setValue:[[listBoxes objectAtIndex:1] valueForKey:@"boxType"] forKey:@"typeBox"];
    [newBoxes setValue:[[listBoxes objectAtIndex:1] valueForKey:@"boxName"] forKey:@"nameBox"];

    NSError *err;
    if (![cxt save:&err]) {
        NSLog(@"An error has occured: %@", [err localizedDescription]);
    }

    [myJSON release];

    NSLog(@"%@", [newBoxes valueForKey:@"kindBox"]);
    NSLog(@"%@", [newBoxes valueForKey:@"priceBox"]);
    NSLog(@"%@", [newBoxes valueForKey:@"typeBox"]);
    NSLog(@"%@", [newBoxes valueForKey:@"nameBox"]);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T14:32:48.913

寻找这个方法

`entityForName:inManagedObjectContext`：

从与指定托管对象上下文的持久存储协调器关联的托管对象模型中返回具有指定名称的实体。

**返回值** 与上下文的持久存储协调器关联的托管对象模型中具有指定名称的实体。

此方法在功能上等同于以下代码示例。

```
NSManagedObjectModel *managedObjectModel = [[context persistentStoreCoordinator] managedObjectModel];
NSEntityDescription *entity = [[managedObjectModel entitiesByName] objectForKey:entityName];
return entity; 
```

我希望你不要寻找这样的东西

```
NSLog(@"%@",[newBoxes name]); 
```

# java - Apache HttpAsyncClient - NoSuchMethodError - URIUtils.extractHost

> ID：10335125
> 
> 赞同：0
> 
> 时间：2012-04-26T14:04:57.293
> 
> 标签：java, android, asynchronous, httpclient, nosuchmethoderror

我正在尝试使用 Apache HttpAsyncClient（版本 4.0-beta1，在撰写本文时是最新的）在 Android 上实现 REST 通信。

我的问题是，由于框架内部出现 MethodNotFound 错误，我无法发出任何请求。

详细的堆栈跟踪是（在呈现的行之后，下一个来自我自己的代码）：

```
java.lang.NoSuchMethodError: org.apache.http.client.utils.URIUtils.extractHost
    at org.apache.http.impl.nio.client.AbstractHttpAsyncClient.determineTarget(AbstractHttpAsyncClient.java:594)
    at org.apache.http.impl.nio.client.AbstractHttpAsyncClient.execute(AbstractHttpAsyncClient.java:578)
    at org.apache.http.impl.nio.client.AbstractHttpAsyncClient.execute(AbstractHttpAsyncClient.java:569) 
```

我所做的是以下内容：

```
private static final String SERVER_SCHEME = "http";
private static final String SERVER_HOST = "localhost";
private static final int SERVER_PORT = 3000;
private static final String SERVER_BASE_PATH = "/api/v1";
private static final String PATH_LOGIN = "/login";

private DefaultHttpAsyncClient http_client;

public void test(String email, String password, ConnectionManagerCallback callback) {
    this.http_client = new DefaultHttpAsyncClient();
    this.http_client.start();

    this.http_client.getCredentialsProvider().setCredentials(new AuthScope(SERVER_HOST, SERVER_PORT), new UsernamePasswordCredentials(email, password));
    HttpPost request = new HttpPost(SERVER_SCHEME + "://" + SERVER_HOST + ":" + SERVER_PORT + SERVER_BASE_PATH + PATH_LOGIN);

    this.http_client.execute(request, new Callback(REQUEST_LOGIN, callback));
} 
```

为了示例，我删除了异常处理。问题是，我得到了我上面描述的异常。因此，由于它是一个测试版，我想为 HttpPost 使用不同的构造函数。但即使我将 URI 对象提供给构造函数，它也会尝试调用 extractHost 方法并崩溃。

有人对我有任何帮助吗？我只是顺便添加了 JAR，并没有自己编译库。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T20:35:11.887

Apache HttpAsyncClient 基于称为 HttpCore 的低级 HTTP 传输库。Google Android 附带了一个非常过时的 Apache HttpClient 版本，它也基于相同的库。HttpAsyncClient 需要 Android 附带的更新版本的 HttpCore。但是，每当尝试从较新版本调用方法时，类加载器首先会拾取旧版本中的类，从而导致 NoSuchMethodError 异常。

不幸的是，这个问题的唯一解决方案是将所有 HttpAsyncClient 代码及其依赖项移动到不同的名称空间。

**2020 年 11 月更新**

升级到 Apache HttpClient 5.x

# php - 移动网络上的 Cookie 损坏

> ID：10335128
> 
> 赞同：5
> 
> 时间：2012-04-26T14:05:07.117
> 
> 标签：php, codeigniter, networking, mobile, cookies

我在我的一个最新网站上使用 Codeigniter 2.1，当通过 3g 访问时，cookie 正在损坏......

在对最初读取 cookie 进行一些调试时，我可以看到它显然被截断了，下面是一个示例：

```
a:14:{ 
```

应该

```
a:14:{s:10:"session_id";s:32:"ef171f95db26ad51986....... 
```

这只发生在连接到移动网络的设备上读取 cookie 时，到目前为止我只能测试三个，令我惊讶的是，一个有效：

*   华硕笔记本电脑带沃达丰加密狗 (x)
*   Macbook Air 带 Vodafone 加密狗 (x)
*   Orange UK 网络上的 iPhone 3 (x)
*   三星 Galaxy SII on 三（已工作）

我猜它是基于网络的，并且标头在途中的某个地方被损坏了。（可能是代理？）

这已经让我整周都知道了，所以任何信息都会很棒。

编辑：要注意，该站点有很多 cookie，但大小并不大。我们有 Google Analytics、Sharethis、Uservoice 和 Facebook。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T03:06:00.803

虽然我不知道可能是什么原因造成的，但我有一些想法可以帮助您找到应该帮助您解决它的问题。我首先要做的是尝试使错误一致，尝试仅使用上面示例的一个提供者。

*   cookie 总是等于`a:14:{`
*   你能创建一个 2 行的 PHP 页面，其中只有一个与该 cookie 命名相同的 cookie，在第 1 行打印 cookie 并在第 2 行设置 cookie。然后更改 cookie 的值，看看你可以做出什么样的改变当页面上没有其他变量时。（您可以将 cookie 设置为`a:14:{}`? `a:1`? `a:14:xxx:{xxxx}`? 我们正在寻找一种可能始终如一地切割字符串的模式。
*   如果 2 行页面没有代码切割问题，则复制您遇到实际问题的页面，然后开始删除页面上的所有内容，直到您只有两行（设置 cookie 的行以及打印它的行）问题出在您的代码中。
*   如果 2 行页面确实有问题，那么可能真的是移动网络（根据我的经验，我没有看到这一点，但是他们可能有某种正在清理 cookie 的代理）。我会开始尝试通过 cookie 发送不同的代码，直到您发现提供商网络上没有问题的内容。（如 uuencode 或 base64_encode cookie 中的数据）。
*   如果事实证明提供程序阻止了所有内容，则可以考虑下载诸如 fiddler 之类的程序，该程序允许您在非常低的级别上分析来回发送的标头。

希望这些故障排除步骤有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T18:44:36.223

尝试在没有 ci 会话类的情况下设置一些测试 cookie，看看它是否也损坏了。如果不是，那么它是一个 ci 错误。我有一个类似的问题，Codeigniter 无法序列化用“\”转义的数据。还要确保在保存 cookie 后记录其大小。也许它超过了 4096。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T04:05:54.330

你有

```
$config['sess_match_ip']        = TRUE; 
```

如果是这样 - 这在手机设备上不起作用，因为许多电信公司在手机上每秒循环 IP 地址（不 - 我不知道为什么） - 所以它会杀死你的会话

或者 - 您是否尝试过切换

```
$config['sess_encrypt_cookie'] = true; 
```

改变这个也可以解决你的问题

# session - 有状态 EJB 的问题 - 为所有用户保留一个会话

> ID：10335130
> 
> 赞同：1
> 
> 时间：2012-04-26T14:05:11.407
> 
> 标签：session, ejb, stateful

我对 EJB 很陌生。我的 EAR 应用程序中需要有状态 bean。我在 ejb 模块中创建了简单的有状态会话 bean：

```
@Stateful
public class Test {

    public Test() {
    }

    private int i;

    @PostConstruct
    public void initialize() {
        i = 0;
    }

    public int getI() {
        return i++;
    }
} 
```

我在战争模块中从 servlet 调用它：

```
public class TestServlet extends HttpServlet {

    @EJB
    Test test;

    protected void processRequest(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        response.setContentType("text/html;charset=UTF-8");
        PrintWriter out = response.getWriter();

        HttpSession session = request.getSession(true);

        out.println("<html>");
        out.println("<head>");
        out.println("<title></title>");            
        out.println("</head>");
        out.println("<body>");
        out.println("<h1>" + test.getI() + "</h1>");
        out.println("</body>");
        out.println("</html>");         
        out.close();
    }
...
} 
```

当我运行它时，每次刷新浏览器，这个数字都会变大。

0, 1, 2, ...

但是当我在另一个浏览器中运行它时，数字不是从 0 开始，而是从前一个浏览器继续会话。它的行为类似于单例。

3, 4, 5, ...

为什么没有创建 bean 的新实例？我尝试将会话 bean 放入 war 模块，或使用 SessionScoped 对其进行注释，但结果是相同的。

你能帮我为每个 http 会话创建一个有状态 bean 的新实例吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T14:20:22.603

创建一个 servlet 来服务所有请求。您将单个有状态会话 bean 的实例注入到 servlet 中，因此所有请求都将使用同一个有状态会话 bean。注入有状态会话 bean 很少有用。

您需要创建有状态会话 bean 的 per-HttpSession 实例：

```
// Declare the reference without injection...
@EJB(name="ejb/test" beanInterface=Test.class)
public class TestServlet extends HttpServlet {
    protected void processRequest(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        response.setContentType("text/html;charset=UTF-8");
        PrintWriter out = response.getWriter();

        HttpSession session = request.getSession(true);
        Test bean = session.getAttribute(BEAN);
        if (bean == null) {
            try {
                // ...and then create an instance by looking it up from java:comp/env
                bean = (Test)new InitialContext().lookup("java:comp/env/ejb/test");
            } catch (NamingException ex) { ... }
            session.setAttribute(BEAN, bean);
        }

        ...
    }
} 
```

或者，如果您有 CDI，您可以将有状态会话 bean 标记为 @SessionScoped 并使用 @Inject 而不是 @EJB 进行注入。

# javascript - 首先从 Google 的 CDN 加载 jQuery，然后是本地服务器

> ID：10335131
> 
> 赞同：1
> 
> 时间：2012-04-26T14:05:18.690
> 
> 标签：javascript, jquery, jquery-ui, coldfusion

设想：

我想从 Google 的 CDN 加载 jQuery 和 jQuery UI 库，但如果加载时间过长，则从本地 Web 服务器检索它。

我正在使用 Coldfusion，但我认为这不是答案。我想我需要用 JavaScript 做点什么。

我用 cftry 包装了我的脚本 src 标签，但这不起作用。

```
<cftry>
    <!-- Load Jquery from Google -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js"></script>
    <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/themes/<cfoutput>#css_style#</cfoutput>/jquery-ui.css" type="text/css" media="all" />
    <cfcatch type="any">
        <!-- load from local server -->
        <script src="assets/jQuery/jquery-1.7.2.min.js"></script>
        <script src="assets/jQueryUI/js/jquery-ui-1.8.7.custom.min.js"></script>
        <link rel="stylesheet" href="assets/jQueryUI/css/<cfoutput>#css_style#</cfoutput>/jquery-ui-1.8.7.custom.css" type="text/css" media="all" />
        </cfcatch>
</cftry> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T14:07:34.073

```
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.js"></script>
<script type="text/javascript">window.jQuery || document.write("<script type='text/javascript' src='js/jquery-1.8.3.min.js'>\x3C/script>")</script> 
```

-- 更正了声明中的混合引号。Dreamweaver 报告了一个语法错误，直到该错误被纠正——

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:16:35.683

```
<script>
setTimeout(function() {
  if(window.jQuery) return;
  var n = document.getElementsByTagName("script")[0];
  n.parentNode.insertBefore(document.createElement("script"), n).src = "assets/jQuery/jquery-1.7.2.min.js";
}, 5000);
</script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js"></script> 
```

# objective-c - Game Center 不响应 authenticateWithCompletionHandler 请求 (iOS)

> ID：10335134
> 
> 赞同：8
> 
> 时间：2012-04-26T14:05:27.910
> 
> 标签：objective-c, ios, game-center, gamekit

这是我的情况：

1) 用户第一次打开我的应用程序。我立即调用 authenticateLocalUser 尝试将它们登录到 Game Center。成功显示带有登录、创建帐户和取消按钮的弹出窗口。

2) 用户现在不想登录，所以他们点击取消。（这不是他们第三次点击“取消”，而且我没有收到“游戏中心已禁用，从游戏中心应用程序登录以启用”消息。）用户可以继续正常使用我的应用程序。

3) 用户想稍后使用游戏中心，所以他们点击我给他们的按钮登录游戏中心。我再次调用 authenticateLocalUser。这一次，弹出窗口没有出现。实际上什么也没发生，除了我收到这些控制台日志消息：

```
2012-04-26 08:38:42.861 Clink[332:707] authenticateWithCompletionHandler: enter
2012-04-26 08:38:42.863 Clink[332:707] authenticateWithCompletionHandler: exit 
```

4）我已经测试了立即按下再次调用authenticateLocalUser的按钮，并在这样做之前等待了很长一段时间。在我再次调用 authenticateLocalUser 时，再次没有出现任何内容，并且我从函数中收到此错误：

```
Error Domain=GKErrorDomain Code=7 "The requested operation could not be completed because local player is already authenticating." 
```

所以似乎正在发生的事情是，当我在步骤 3 中调用 authenticateLocalUser 时，我要求 Game Center 进行身份验证，但它被挂断并且没有响应我的请求。然后在第 4 步中，当我再次尝试时，它告诉我它无法处理我的请求，因为它已经在尝试进行身份验证。但是，我在第 3 步的请求中等待了长达 10 分钟的回复，但我从未从游戏中心收到回复。

这是我的 authenticateLocalUser 函数的内容。据我记得，我没有从我从 Apple 的示例代码下载的版本中更改它。

```
- (void) authenticateLocalUser
{
    if([GKLocalPlayer localPlayer].authenticated == NO)
    {
        [[GKLocalPlayer localPlayer] authenticateWithCompletionHandler:^(NSError *error) 
        {
             [self callDelegateOnMainThread: @selector(processGameCenterAuth:) withArg: NULL error: error];
        }];
    }
} 
```

以前有没有其他人遇到过这个问题，或者对可能发生的事情有任何想法？我已经看了一段时间了，我不确定发生了什么。

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-12T17:44:06.820

当我对另一个 Game Center 帐户进行身份验证时，我遇到了同样的问题。当您使用普通帐户登录某些游戏并同时使用测试帐户登录时，就会发生这种情况。

只需重置您的设备设置，并且在测试时不要使用您的真实帐户登录其他游戏。当你同时做这两件事时，就会发生这种情况。重置您的设备设置，清理项目，应该没问题。并且仅使用测试 iTunes 帐户来测试您的游戏。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-08T09:27:12.747

有上述问题的情况 1\. 如果您在这种情况下使用身份验证方法调用两个地方，则会产生问题 2\. 如果您第一次在 A 类中使用身份验证方法并在执行后将它们更改为 B 类中的位置而不进行清理和重建

在这两种情况下，只需清理然后重建。

我也面临同样的问题，但我有解决方案并解决了。

# jquery - 使用 jQuery POST GET 的值

> ID：10335135
> 
> 赞同：0
> 
> 时间：2012-04-26T14:05:30.190
> 
> 标签：jquery, json, post, get

我需要从使用 GET 从服务器的用户列表中发布用户名，但如何将该用户名作为字符串发布。任何帮助表示赞赏，在此先感谢！

```
 //get a list of users from server side
$.getJSON(
  '/userlist',
  function(data) {
    var user = data.users;
    $("#utbildning").text(user[1].username);
    $("#tekniker").text(user[2].username);
  }
);

//post user name and password at login  
$(document).ready(function() {
  $("#knapp").click(function(){

    //name of the user should be a name from the user list comes from server
    var name=$.getJSON(
      '/userlist',
      function(data) {
        var user = data.users;
        user[1].username;
      }
    );
    var pass=$("#kod").val(); //password from input field
    var data = new Object();
    data["username"] = name;
    data["password"] = pass;

    $.ajax(
      {
         url: "/login",
         data: JSON.stringify(data),
         processData: false,
         type: 'POST',
         contentType: 'application/json',
      }
    );
  });
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:34:42.397

多个错误：

*   除非发生重大变化，否则您将无法使用任何东西`var name = $.getJson(...`
*   然后由于 $.getJSON 是异步的，你应该做任何使用 $.getJSON 回调方法中的 ajax 调用中设置的变量。就像您在第一次通话中所做的那样。

这是一个“更正”的版本（如果您的代码是正确的）：

```
 //get a list of users from server side
$.getJSON(
  '/userlist',
  function(data) {
    var user = data.users;
    $("#utbildning").text(user[1].username);
    $("#tekniker").text(user[2].username);
  }
);

//post user name and password at login  
$(document).ready(function() {
  $("#knapp").click(function(){

    //name of the user should be a name from the user list comes from server
    $.getJSON(
      '/userlist',
      function(data) {
        var user = data.users;
        var name = user[1].username;
        var pass=$("#kod").val(); //password from input field
        var data = new Object();
        data["username"] = name;
        data["password"] = pass;

        $.ajax(
          {
             url: "/login",
             data: JSON.stringify(data),
             processData: false,
             type: 'POST',
             contentType: 'application/json',
          }
        );
      }
    );
  });
}) 
```

# c++ - 如何使用 QT 和 C++ 启动应用程序

> ID：10335139
> 
> 赞同：2
> 
> 时间：2012-04-26T14:05:34.137
> 
> 标签：c++, windows, qt

我正在尝试在 Windows 环境中使用 QT 启动应用程序（.exe）。下面的代码在运行我的项目时出错。

```
Error:
The inferior stopped because it received a signal from the Operating System.
Signal name : SIGSEGV 
Signal meaning : Segmentation fault 
```

运行时：

```
QString path = "C:/Temp/myproject/AppTest.exe";

QProcess process;
process.execute(path) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T20:49:34.987

我认为您应该为此创建一个函数并使用相对路径。我认为你需要的命令是 process->start(path, arguments) 你还需要设置一个 QProcessEnviorment; 像这样的东西：

```
QProcess *process = new QProcess( parent );
QProcessEnvironment env = QProcessEnvironment::systemEnvironment();
process->setProcessEnvironment(env);
process->start(execPrgm, args); 
```

我希望这有帮助！

# javascript - Telerik MVC DatePicker + OnChange 部署后 IE 9 中的事件问题

> ID：10335153
> 
> 赞同：1
> 
> 时间：2012-04-26T14:06:29.650
> 
> 标签：javascript, jquery, asp.net-mvc, internet-explorer, telerik

我正在通过asp.net MVC中的部分视图动态制作Telerik DatePicker。最初我已经绑定了像.ClientEvents（events => events.OnChange（“onChangeDatePicker”））这样的事件，但我发现如果你动态加载控件你不能这样做，你必须通过jQuery事件冒泡动态绑定事件. 我的以下代码在我的开发环境中运行良好，但在 Windows Server 2008 上部署后，它在 IE9 中停止工作。它适用于 FF、Safari、Chrome。

请帮助我。

```
$("document").ready(function () 
 {
            debugger;

            var dtpickers = $("[Id^=dtt]");

            for (i = 0; i < dtpickers.length; i++) {

                if ($.browser.msie) {
                    $(dtpickers[i]).tDatePicker({
                        onChange: function () { onChangeDatePicker(this); }
                    });
                }
                else {
                    $(dtpickers[i]).tDatePicker({
                        onChange: function () { onChangeDatePicker(this); }
                    });
                }
            }
       });

    </script> 
```

**更新 ：**

这是我的内网网站。如果我通过 IP 地址访问它，它工作正常，但如果我用计算机名访问它，比如说[http://xzy/webapp/](http://xzy/webapp/)，它就不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T20:22:56.650

现在解决了。这是兼容性视图的问题，默认情况下，Intranet 网站是打开的。所以我关闭了它，它对我来说很好用。我相信 jQuery Delegated Events 与以前版本的 IE 不兼容

# python - 用于解析 HTML 表格的富有表现力的 Python 库

> ID：10335155
> 
> 赞同：4
> 
> 时间：2012-04-26T14:06:31.157
> 
> 标签：python, html-parsing, html-table

我需要解析 html 表格来执行诸如获取某个单元格的上方/下方或左/右列中的所有单元格之类的事情。有没有可以轻松做到这一点的python库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T14:13:03.823

[美丽汤](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T14:16:58.723

您可以使用[lxml](http://lxml.de/)（带有 Python 的 XML 和 HTML）来解析表格。[这](https://stackoverflow.com/a/6325277/889576)是一个简单的示例，说明您可以对表执行哪些操作（加载和遍历行）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T14:22:47.217

看看[pyquery](http://pypi.python.org/pypi/pyquery)。它允许对 xml 文档进行 jquery 查询。快速浏览[API](http://packages.python.org/pyquery/api.html)似乎 prevAll 和 nextAll 可以找到左/右单元格。认为获得上面/下面的也不会那么困难。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-07T22:10:56.737

此代码将页面中的所有表格转换为列表。

```
import pandas as pd
url = r'https://en.wikipedia.org/wiki/List_of_S%26P_500_companies'
tables = pd.read_html(url) # Returns list of all tables on page
sp500_table = tables[0] # Select table of interest 
```

# if-statement - Knockout.js If 语句问题

> ID：10335157
> 
> 赞同：1
> 
> 时间：2012-04-26T14:06:42.077
> 
> 标签：if-statement, knockout.js

如果他等于某个字符串，我想检查我的“类型”绑定，但看起来他没有执行它。

我的html页面：

```
 <div class="socialWrapper" data-bind="foreach: facebookposts">
         <!-- ko if: {Type()==='link'}-->
         <img data-bind='attr: { src: FromPicture }'/>
         <p data-bind="text:From"></p>
         <!-- /ko -->
 </div> 
```

当我刚回来时：

```
<p data-bind="text: Type"></p> 
```

我的输出=“字符串”

如您所见，我想根据 if 语句获得正确的 observables。视图模型：

```
function Post(allData) {
    var profileImageUrl = "http://graph.facebook.com/" + allData.from.id + "/picture?type=large";
    this.Type = ko.observable(allData.type);
    this.From = ko.observable(allData.from.name);
    this.FromPicture = ko.observable(profileImageUrl);
    this.Created = ko.observable(allData.created_time);
    this.Comments = ko.observable(allData.comments.count);
    this.Message = "";
    this.Likes = "";
    this.LinkImage = "";
    this.LinkUrl = "";
    this.LinkName = "";
    this.LinkTitle = "";
    this.LinkDescription = "";
    this.Story = "";
    this.Photo = "";
    this.PhotoDescription = "";

    if (allData.type === 'status') {
        this.Message = ko.observable(allData.message);
        this.Likes = ko.observable(allData.likes);
    }
    if (allData.type === 'link') {
        this.Message = ko.observable(allData.message);
        this.LinkImage = ko.observable(allData.picture);
        this.LinkUrl = ko.observable(allData.link);
        this.LinkName = ko.observable(allData.name);
        this.LinkTitle = ko.observable(allData.caption);
        this.LinkDescription = ko.observable(allData.description);
        this.Likes = ko.observable(allData.likes);
    }
    if (allData.type === 'photo') {
        this.Story = ko.observable(allData.story);
        this.Photo = ko.observable(allData.picture);
        this.PhotoDescription = ko.observable(allData.description);
    }
}

    var masterViewModel = { 
        facebookposts: ko.observableArray([]),
        getFacebookObjects: function () {
            var getUrl = '/api/facebookposts?accesstoken=@Session["fb_access_token"]';
            $.ajax({
                url: getUrl,
                type: 'GET',
                dataType: 'json',
                success: function (allData) {
                    var mappedPosts = $.map(allData, function (item) {
                        return new Post(item);
                    });
                    masterViewModel.facebookposts(mappedPosts);
                },
                statuscode: {
                    401: function () {
                        console.log("Not Authorized");
                    }
                }
            });
        }
     };

$(document).ready(function () {
    ko.applyBindings(masterViewModel);
    masterViewModel.getFacebookObjects();
}); 
```

任何人都知道如何解决这个 if 语句？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T14:17:43.303

**更新**- 使用整个视图模型

我会在你的视图模型上做一个计算的 observable，看起来像这样

```
function Post(allData) {
    var profileImageUrl = "http://graph.facebook.com/" + allData.from.id + "/picture?type=large";
    this.Type = ko.observable(allData.type);
    this.From = ko.observable(allData.from.name);
    this.FromPicture = ko.observable(profileImageUrl);
    this.Created = ko.observable(allData.created_time);
    this.Comments = ko.observable(allData.comments.count);
    this.Message = "";
    this.Likes = "";
    this.LinkImage = "";
    this.LinkUrl = "";
    this.LinkName = "";
    this.LinkTitle = "";
    this.LinkDescription = "";
    this.Story = "";
    this.Photo = "";
    this.PhotoDescription = "";

    var self = this;
    this.isLink = ko.computed(function() {
        return self.Type() === 'link';
    });

    if (allData.type === 'status') {
        this.Message = ko.observable(allData.message);
        this.Likes = ko.observable(allData.likes);
    }
    if (allData.type === 'link') {
        this.Message = ko.observable(allData.message);
        this.LinkImage = ko.observable(allData.picture);
        this.LinkUrl = ko.observable(allData.link);
        this.LinkName = ko.observable(allData.name);
        this.LinkTitle = ko.observable(allData.caption);
        this.LinkDescription = ko.observable(allData.description);
        this.Likes = ko.observable(allData.likes);
    }
    if (allData.type === 'photo') {
        this.Story = ko.observable(allData.story);
        this.Photo = ko.observable(allData.picture);
        this.PhotoDescription = ko.observable(allData.description);
    }
} 
```

然后

```
<div class="socialWrapper" data-bind="foreach: facebookposts">
         <!-- ko if: isLink -->
         <img data-bind='attr: { src: FromPicture }'/>
         <p data-bind="text:From"></p>
         <!-- /ko -->
</div> 
```

就我个人而言，我喜欢尽可能保持我的观点干净，这意味着没有 javascript 评估。更好地分离关注点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:27:38.510

我认为您需要使用 $parent 上下文绑定。试试这个 -

```
 <div class="socialWrapper" data-bind="foreach: facebookposts">
     <!-- ko if: $parent.Type === 'link'-->
     <img data-bind='attr: { src: FromPicture }'/>
     <p data-bind="text:From"></p>
     <!-- /ko -->
 </div> 
```

[http://jsfiddle.net/belthasar/DaN2X/](http://jsfiddle.net/belthasar/DaN2X/)

# algorithm - 在多个排序数组中搜索及其复杂性

> ID：10335161
> 
> 赞同：2
> 
> 时间：2012-04-26T14:06:57.997
> 
> 标签：algorithm, search, sorting, data-structures, time-complexity

给定3个排序数组。从每个数组中找出 3 个元素，满足 a+b=c。可以做到小于 O(n^3) 的时间复杂度吗？请帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T14:13:46.940

调用三个数组`A`,`B`和`C`, 和元素`a`,`b`和`c`。

在循环前两个数组时，由于if`a`是固定的，`b`只能增加，`c`也只能增加。

因此，您不必`C`每次有一对`a`and时都要循环`b`；只是循环，`C`虽然循环`B`会做。

现在假设所有三个数组的长度都是 O(N)，时间复杂度是 O(N^2)，因为对于 中的每个值`A`，你需要遍历所有的`B`和所有的`C`，这个数字是 O(N)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T14:11:15.543

它可以在 O(N^2 * logN) 复杂度中完成，方法是遍历 2 个数组的 a 和 b 并在第三个数组中对 c 进行二进制搜索。

另一种方法是 O(N^2)，通过将其中一个数组的元素插入散列，在其他两个数组中迭代 a 和 b 并查看散列中是否存在 c = (a + b)。

# java - 异步套接字：多个请求，但服务器只获取第一个

> ID：10335164
> 
> 赞同：1
> 
> 时间：2012-04-26T14:07:02.703
> 
> 标签：java, javascript, sockets, firefox-addon, firefox-addon-sdk

我正在通过从 FF 附加组件到 Java 服务器的套接字写入。我写了几个请求，但服务器只得到第一个。我不知道发生了什么。

这是我的代码：

```
const {Cc,Ci, Cu} = require("chrome");

var toSend = ["hi1\n", "hi2\n"];

var {NetUtil} = Cu.import("resource://gre/modules/NetUtil.jsm");

function sendNextString(outstream) {
  if (!toSend.length)
    return;  // Nothing left to send

  var outputData = toSend.shift();
  console.log(outputData);

  var instream = Cc["@mozilla.org/io/string-input-stream;1"]
        .createInstance(Ci.nsIStringInputStream);

  instream.setData(outputData, outputData.length);

  NetUtil.asyncCopy(instream, outstream, function(aResult) {  
    if (!Components.isSuccessCode(aResult))
        console.log("ERROR: writing to socket")
    });
}

exports.main = function() {
    try  {
        // At first, we need a nsISocketTransportService
        var transportService =  
            Cc["@mozilla.org/network/socket-transport-service;1"]
            .getService(Ci.nsISocketTransportService);  

        // Try to connect to localhost:2222
        var transport = transportService.createTransport(null, 0, "localhost", 6666, null);  

        var stream = transport.openInputStream(Ci.nsITransport.OPEN_UNBUFFERED,null,null); 
        var instream = Cc["@mozilla.org/scriptableinputstream;1"]
            .createInstance(Ci.nsIScriptableInputStream); 

        // Initialize
        instream.init(stream);
        var outstream = transport.openOutputStream(0, 0, 0);

        var dataListener = { 
            onStartRequest: function(request, context){},

            onStopRequest: function(request, context, status){
                instream.close();
                outstream.close();
            }, 

            onDataAvailable: function(request, context, inputStream, offset, count) { 
                var data = instream.read(count); 
                console.log(data);

                // Write data
                sendNextString(outstream);        
            }, 
        };

        var pump = Cc["@mozilla.org/network/input-stream-pump;1"]
                .createInstance(Ci.nsIInputStreamPump); 
        pump.init(stream, -1, -1, 0, 0, false); 
        pump.asyncRead(dataListener, null); 

        // Write data
        sendNextString(outstream);

    } catch (e){ 
        console.log("Error" + e.result + ": " + e.message); 
        return e; 
    } return null;
}; 
```

所以，当我运行它时，我得到：

```
Client > hi1
Server > bye1
Client > hi2 
```

它应该是：

```
Client > hi1
Server > bye1
Client > hi2
Server > bye2 
```

**编辑：**在 asyncCopy 调用中添加了一个回调来检查错误，但它可以正常工作。

**Edit2：**调试服务器中用于读取附加请求的循环在第二次从输入流*中读取时被阻塞。*

```
while ((inputLine = in.readLine()) != null) {
  if (inputLine.equals("-1")) break;
  System.out.println("Client < " + inputLine);
  outputLine = process(inputLine);
  out.println(outputLine);
  System.out.println("Server > " + outputLine);
} 
```

# exception - 自定义 ExceptionMappingInterceptor 未在监听

> ID：10335168
> 
> 赞同：0
> 
> 时间：2012-04-26T14:07:09.487
> 
> 标签：exception, exception-handling, struts2

我正在尝试扩展 ExceptionMappingInterceptor。我创建了一个覆盖 ExceptionMappingInterceptor 的 publishException(...) 方法的侦听器。但它不会监听应用程序中未处理的任何全局异常。

这是我的配置。

//处理程序

```
public class GlobalExceptionHandler extends ExceptionMappingInterceptor 
{
    private Logger logger = AppLogger.getLogger(this.getClass());

    @Override
    protected void publishException(ActionInvocation invocation, ExceptionHolder exceptionHolder) 
    {
        logger.error("Global Exception msg: "+ exceptionHolder.getException().getMessage(), exceptionHolder.getException());
        super.publishException(invocation, exceptionHolder);
    }
} 
```

在 struts.xml 中

```
<interceptors>
     <interceptor name="sessionInterceptor" class="com.jak.session.SessionInterceptor" />
     <interceptor name="exception" class="com.jak.exception.GlobalExceptionHandler" />
     <interceptor-stack name="mymatrixxInterceptorStack">
        <interceptor-ref name="exception"></interceptor-ref>
        <interceptor-ref name="defaultStack"></interceptor-ref>
        <interceptor-ref name="sessionInterceptor"/>
     </interceptor-stack>
</interceptors>

<global-results>
    <result name="exception" type="tiles">myAccount</result>
</global-results>

<global-exception-mappings>
    <exception-mapping exception="java.lang.Exception" result="exception" />
</global-exception-mappings>

<action name="myAccount">
     <interceptor-ref name="mymatrixxInterceptorStack"></interceptor-ref>
     <result type="tiles">errorPage</result>
</action> 
```

在上传文件时，我遇到了一个异常“**没有为操作 com.dsdar.business.offer.CampaignUpdateAction 和结果输入定义结果**”。但是这个拦截器不处理这个异常。我不知道它不听的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T06:10:04.233

在 struts.xml 中

```
 <interceptors>
 <interceptor name="sessionInterceptor" class="com.jak.session.SessionInterceptor" />
        <interceptor name="exception"
            class="com.jak.exception.GlobalExceptionHandler" />
        <interceptor-stack name="mymatrixxInterceptorStack">
            <interceptor-ref name="exception"></interceptor-ref>
            <!--<interceptor-ref name="defaultStack"></interceptor-ref>--><!-- Here!! -->

            <interceptor-ref name="myDefaultStack"></interceptor-ref><!--  Here!!  -->

            <interceptor-ref name="sessionInterceptor" />
        </interceptor-stack>

        <interceptor-stack name="myDefaultStack">

            <!-- <interceptor-ref name="exception"/> --><!-- Here!! -->

            <interceptor-ref name="alias" />
            <interceptor-ref name="servletConfig" />
            <interceptor-ref name="i18n" />
            <interceptor-ref name="prepare" />
            <interceptor-ref name="chain" />
            <interceptor-ref name="debugging" />
            <interceptor-ref name="scopedModelDriven" />
            <interceptor-ref name="modelDriven" />
            <interceptor-ref name="fileUpload" />
            <interceptor-ref name="checkbox" />
            <interceptor-ref name="multiselect" />
            <interceptor-ref name="staticParams" />
            <interceptor-ref name="actionMappingParams" />
            <interceptor-ref name="params">
                <param name="excludeParams">dojo\..*,^struts\..*</param>
            </interceptor-ref>
            <interceptor-ref name="conversionError" />
            <interceptor-ref name="validation">
                <param name="excludeMethods">input,back,cancel,browse</param>
            </interceptor-ref>
            <interceptor-ref name="workflow">
                <param name="excludeMethods">input,back,cancel,browse</param>
            </interceptor-ref>
        </interceptor-stack>

    </interceptors>

    <global-results>
        <result name="exception" type="tiles">myAccount</result>
    </global-results>

    <global-exception-mappings>
        <exception-mapping exception="java.lang.Exception"
            result="exception" />
    </global-exception-mappings>

    <action name="myAccount">
        <interceptor-ref name="mymatrixxInterceptorStack"></interceptor-ref>
        <result type="tiles">errorPage</result>
    </action> 
```

我不懂英语。原因是，请教别人。(>_<)

# java - 如何编写可以运行多次但只能插入一次的查询？

> ID：10335170
> 
> 赞同：1
> 
> 时间：2012-04-26T14:07:14.393
> 
> 标签：java, sql, insert, request

我有这个要求

```
INSERT INTO SERVICEPAYANT_CLIENT (RE_ID, TYPE_DONNEES)
SELECT CLIENT_ID, 160 AS TYPE_DONNEES
FROM    REFERENTIEL r, CLIENT_APPLICATIF ca
WHERE r.ID = ca.ID_REFERENTIEL
AND r.TYPE=1
GROUP BY CLIENT_ID
HAVING COUNT(*)>0; 
```

当我多次执行它时，我多次插入了我的数据，但我希望我的请求只插入一次我的数据。如果我的表中不存在我的数据，我想插入它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T14:11:53.150

你可以做：

```
INSERT INTO SERVICEPAYANT_CLIENT (RE_ID, TYPE_DONNEES)
SELECT CLIENT_ID, 160 AS TYPE_DONNEES
FROM    REFERENTIEL r, CLIENT_APPLICATIF ca
WHERE r.ID = ca.ID_REFERENTIEL
AND r.TYPE=1
AND NOT EXISTS (
    SELECT * FROM SERVICEPAYANT_CLIENT sp
    WHERE sp.RE_ID = CLIENT_ID AND TYPE_DONNEES = 160)
GROUP BY CLIENT_ID
HAVING COUNT(*)>0; 
```

“AND NOT EXISTS...”是限制它返回目标表中尚未存在的行的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T14:16:33.910

`MERGE`在几个成熟的 DBMS 中 有一句话就是针对这些情况的。`MERGE`是`INSERT`和`UPDATE`同时。

一般语法示例：

```
 MERGE INTO TABLE_NAME USING table_reference ON (condition)
       WHEN MATCHED THEN
       UPDATE SET column1 = value1 [, column2 = value2 ...]
       WHEN NOT MATCHED THEN
       INSERT (column1 [, column2 ...]) VALUES (value1 [, value2 ... 
```

一些像 MySQL 这样的 DBMS 有自己的语法和相同的想法。[在维基百科](http://en.wikipedia.org/wiki/Merge_%28SQL%29)中查看更多信息。

如果您的 DBMS 不支持，那么您可以编写具有相同逻辑的存储过程。

但是在插入之前存储过程或任何其他类型的代码检查都会产生“滞后”，并且操作将变为“非原子”。这意味着在您的检查之后和插入之前，另一笔交易可能会产生重复记录，您将获得意外的重复或异常。为避免这种情况，您必须在此操作之前锁定表以获得对表的独占访问，因为访问的序列化会导致性能损失。

或者你可以像这样`INSERT`使用`SELECT`：

```
 INSERT (field1, ...) INTO table1
    SELECT value1, ...
    FROM DUAL -- put a name of analogue of Oracle's DUAL here
    WHERE NOT EXISTS (
       SELECT 1 
       FROM table1
       WHERE key = :new_key
    ) 
```

但如您所知，它不会更新任何内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T14:10:52.870

典型的解决方案是在数据库中使用由定义记录的字段组成的唯一约束来强制执行它。然后，您的 Java 代码会从数据库返回一个错误，让您知道它已经存在。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T14:12:30.010

你可以这样做：

```
INSERT INTO SERVICEPAYANT_CLIENT (RE_ID, TYPE_DONNEES)
SELECT CLIENT_ID, 160 AS TYPE_DONNEES
REFERENTIEL r
JOIN CLIENT_APPLICATIF ca
    ON r.ID = ca.ID_REFERENTIEL
WHERE 
    r.TYPE=1
    AND NOT EXISTS
        (
            SELECT
                NULL
            FROM
                SERVICEPAYANT_CLIENT
            WHERE
                REFERENTIEL.CLIENT_ID=SERVICEPAYANT_CLIENT.RE_ID
        )
GROUP BY CLIENT_ID
HAVING COUNT(*)>0; 
```

# java - 在HTTP中通过java客户端下载大文件

> ID：10335179
> 
> 赞同：1
> 
> 时间：2012-04-26T14:07:34.690
> 
> 标签：java, client-server

有什么方法可以在没有缓冲的情况下下载大文件（比如 1 GB），这意味着我可以直接将它写入本地机器上的文件中。至于大文件内存缓冲区会被占用。

# java - 数组列表算法 - 面试

> ID：10335180
> 
> 赞同：9
> 
> 时间：2012-04-26T14:07:38.153
> 
> 标签：java, algorithm, collections

我今天接受采访时被问到这个问题。我尝试了一个解决方案，但想知道是否有更好的方法来解决这个问题：

**问题**：我有一个包含 500,000 个元素的数组列表，因此数组列表中每个元素的值与索引相同。例如：list.get(0) = 0; list.get(1) = 1 ...等等。但只有一个元素与此顺序不同步 [即 list.get(i) != i]。你如何找到那个元素。

**我的答案**：每次比较 list.get(i) 和 i 时，每个线程处理 arraylist 的某个拼接，使用多个线程迭代列表。找到元素后，设置一些布尔变量以向其他线程指示已找到该元素。

有没有办法在不遍历列表的情况下解决这个问题？还是更好的方法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-26T14:09:48.017

在最坏的情况下，您必须检查每个元素，因此您无法提高`O(n)`时间复杂度。

考虑到这一点，最好的算法是从头到尾扫描数组列表。这样，您就可以充分利用可用的内存带宽。

我并不完全清楚线程是如何或为什么进入画面的。似乎不合时宜。这是问题的一部分吗？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-08-11T14:49:45.393

答案是：一次迭代。你提到的原因并发是他们正在寻找的东西。

事实上，从 java 8 开始，是否并行的解决方案都很简单。我认为最会带来：

```
OptionalInt foundInt = IntStream.range(0, list.size())
    .parallelStream()
    .filter(i -> i != list.get(i))
    .findAny(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T14:11:07.170

你不能做得比`O(n)`.

其次，我认为在这些问题中讨论线程和多线程是一个坏主意。他们根本不感兴趣。最后，你有一个 O(whatever) 的运行时，无论如何你的常量都会被删除。

也许面试官的意思是一个排序数组，其元素从 0 到 n-1，索引从 0 到 n-1。然后将一个元素移动到不同的位置。但这意味着所有剩余的元素都有不同的索引！在这种情况下，您可以使用二分搜索改进搜索：

然后你可以在`O(log n)`. 从中间开始，检查索引是否等于元素。如果相等，则对上半部分执行相同操作，否则使用其他部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T14:19:42.163

除了@aix 的回答，每个循环进行 2 次检查怎么样：

```
for (int i = 0; i < list.size / 2; i++)
{
  if (i != list.get(i))
  {
    return i;
  }
  else if (list.size - i != list.get(list.size - i)
  {
    return list.size - i;
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T14:23:38.387

```
1\. iterate through the list 
2\. check for the condition in the elements
3\. when that only element found break out the loop... 
```

我不认为线程进入竞技场......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-12-09T06:27:59.310

```
ArrayList<Integer> s = new ArrayList<Integer>();

for (int i=0; i<500000; i++) {
    s.add(i);
}

s.set(13, 500002);

for (int j=0; j<s.size(); j++) {
    if (j != s.get(j)) {
        System.out.println(j + " " + s.get(j));
    }   
} 
```

# javascript - twitter bootstrap 的轮播淡入淡出过渡

> ID：10335181
> 
> 赞同：12
> 
> 时间：2012-04-26T14:07:46.297
> 
> 标签：javascript, css, twitter-bootstrap, carousel

这是关于@StrangeElement 对这个较旧问题的回答的后续问题：[Twitter Bootstrap Carousel 插件能否在幻灯片转换时淡入淡出](https://stackoverflow.com/questions/9526970/can-the-twitter-bootstrap-carousel-plugin-fade-in-and-out-on-slide-transition)

我尝试了 @StrangeElement 对 bootstrap.css 的 mod，我几乎让它工作了。问题是，当活动图像淡出时，它会淡出为白色，然后下一张图像会弹出而动画中没有淡入淡出。我可能在这里缺少什么？

这是我正在使用的示例：

[http://planetofsoundonline.com/beta/index.php](http://planetofsoundonline.com/beta/index.php)

任何类型的指针将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-26T23:27:01.810

看看[这个小提琴](http://jsfiddle.net/Jh3rF/)。不幸的是，它不适用于任何当前可用的 Internet Explorer 版本。

你的轮播`div`只需要添加一个额外的类`carousel-fade`就可以了。

[[来源](https://stackoverflow.com/a/10031225/1071413)]

此过渡显示下一个图像，然后在其顶部淡出新图像。如果您想要直接淡出淡入淡出动画，请将这些行添加到 css。

```
.carousel.carousel-fade .item {
  opacity:0;
}

.carousel.carousel-fade .active.item {
    opacity:1;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-04T15:23:02.727

添加什么：

```
 filter: alpha(opacity=100); /* ie fix */ 
```

导致：

```
.carousel.carousel-fade .item {
  opacity:0;
  filter: alpha(opacity=0); /* ie fix */
}

.carousel.carousel-fade .active.item {
    opacity:1;
    filter: alpha(opacity=100); /* ie fix */
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-06T11:48:17.703

我成功地将轮播更改为褪色图像，而不是滑动它们。而且我还通过 CSS 缩放图像，使它们具有响应性：

```
img.carousel-img {
  max-width:1900px;
  width:100%;
} 
```

不幸的是，在 Webkit 浏览器上，当淡入淡出动画处于活动状态时，每个图像都被放大到其原始大小。在每个动画完成后，图像将再次按照上面的 CSS 规则正确缩放（立即，不是动画）。当然，这样的动画看起来很业余和口吃。所以我加了

```
-webkit-transform: translate3d(0,0,0); 
```

旋转木马的淡入淡出过渡规则和动画从那时起就像一个魅力。所以规则看起来像：

```
.carousel-fade .carousel-inner .item {
  opacity: 0;
  -webkit-transition-property: opacity;
  -moz-transition-property: opacity;
  -o-transition-property: opacity;
  transition-property: opacity;
  -webkit-transform: translate3d(0,0,0);  /* WEBKIT-FIX FOR FADING SCALED IMAGES CORRECTLY VIA CSS-TRANSITIONS */
} 
```

在这里我找到了这个解决方案：[为什么应用 '-webkit-backface-visibility: hidden;' 修复 ios / ipad 5.1 上的负边距过渡问题？](https://stackoverflow.com/questions/13952480/why-does-applying-webkit-backface-visibility-hidden-fix-issues-with-negativ)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-04T21:58:00.013

希望对下一个人有所帮助。我想要Scale and Fade。

真的不需要添加额外的类。引导程序 3.3.6

淡入淡出和缩放（考虑左/右箭头）

```
/* Carousel Scale and Fade */

/* Carousel Fade */
.carousel .item {
    -webkit-transition: opacity 1s;
    -moz-transition: opacity 1s;
    -ms-transition: opacity 1s;
    -o-transition: opacity 1s;
    transition: opacity 1s;
}
.carousel .active.left, .carousel .active.right {
    left: 0;
    opacity: 0;
    z-index: 2;
}
.carousel .next, .carousel .prev {
    left: 0;
    opacity: 1;
    z-index: 1;
}

/* Carousel Scale */
.carousel .item.active {
    animation: zoom 30s;
    -moz-animation: zoom 30s;
    -webkit-animation: zoom 30s;
    -o-animation: zoom 30s;
}
@keyframes zoom {
    from {transform:scale(1);}
    to {transform:scale(2);}
}
@-moz-keyframes zoom {
    from {-moz-transform:scale(1);}
    to {-moz-transform:scale(2);}
}
@-webkit-keyframes zoom {
    from {-webkit-transform:scale(1);}
    to {-webkit-transform:scale(2);}
}
@-o-keyframes zoom {
    from {-o-transform:scale(1);}
    to {-o-transform:scale(2);}
} 
```

# oracle - 批量收集到特定的收集列

> ID：10335182
> 
> 赞同：1
> 
> 时间：2012-04-26T14:07:48.993
> 
> 标签：oracle, plsql

```
TYPE t_project_financial_table IS TABLE OF project_financial%ROWTYPE;
g_project_financial_table t_project_financial_table; 
```

表 project_financial 有 15 列。select 语句返回 2 列。我可以批量收集到集合 g_project_financial_table 的 2 个特定列中并将其他列保留为空，还是我必须批量收集到 2 个可变数组（对于每列）并循环遍历这些以将 2 列的值放入集合 g_project_financial_table 中。

像 BULK COLLECT INTO g_project_financial_table.column3, g_project_financial_table.column8 这样的东西？

```
SELECT k.tag, 
  (SELECT pa.available
   FROM pers_account pa
   WHERE pa.valid_from = 
     (SELECT MAX(pa2.valid_from)
      FROM pers_account pa2
      WHERE pa2.valid_from <= k.tag)) AS available

BULK COLLECT INTO g_project_financial_table ??????? 

FROM kalender k
WHERE k.tag BETWEEN to_date('20120430','YYYYMMDD')
                AND to_date('20120504','YYYYMMDD')
  AND k.ist_werktag = 1
ORDER BY k.tag; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T18:54:37.930

您知道对于较大的日期范围，此查询的性能正在成为一个问题，因为您为每一行执行 2 个额外的查询，对吗？

无论如何，如果您想批量插入，我的解决方案是收集到 2 个集合中。但老实说，这看起来不像您要插入大量行，因此使用普通插入可能是最简单的。无论如何，这是批量插入。

```
create or replace procedure add_days_to_financial(p_date_from in date, p_date_to in date)
as
    cursor cur_kalender
    is
    SELECT k.tag, 
      (SELECT pa.available
       FROM pers_account pa
       WHERE pa.valid_from = 
         (SELECT MAX(pa2.valid_from)
          FROM pers_account pa2
          WHERE pa2.valid_from <= k.tag)) AS available
    FROM kalender k
    WHERE k.tag BETWEEN p_date_from and p_date_to
      AND k.ist_werktag = 1
    ORDER BY k.tag;

    type t_tag is table of kalender.tag%type;
    type t_available is table of kalender.available%type;

    arr_tag t_tag;
    arr_available t_available;
begin
    open cur_kalender;
    loop
        fetch cur_kalender bulk collect into arr_tag, arr_available limit 500;

        forall i in arr_tag.first .. arr_tag.last
            insert into project_financial
            (tag, available)
            values
            (arr_tag(i), arr_available(i));

        commit;
        exit when cur_kalender%notfound;
    end loop;

    close cur_kalender;

    commit;
exception
    when others then 
        -- log? 
        raise;
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:41:05.760

您不能将数据仅收集到 15 列记录的 2 列中。但是，您可以在`SELECT`语句的适当位置添加 13 个额外的 NULL 列。或者，正如您所建议的，您可以将数据批量收集到两个不同的集合中。

# jquery - 如何在 Javascript 中压缩 GET 参数以避免达到浏览器大小限制？

> ID：10335189
> 
> 赞同：6
> 
> 时间：2012-04-26T14:08:35.163
> 
> 标签：jquery, ajax, http, compression, jsonp

我遇到了一种情况，我需要发出 JSONP Ajax GET 请求（跨域），并且我需要发送长度超过 2000 个字符的文档作为参数。

由于各种原因，我无法将其从 JSONP 更改为普通请求，也无法在服务器端维护状态以将请求拆分为多个。

鉴于这些限制，有没有办法在 Javascript 中以某种方式压缩长文本，以便我可以将其放入 2000 GET 限制大小内？我还需要知道我是否可以在服务器端轻松解压它？

因为它是一个 GET 请求，它只能作为文本发送，所以可能无法进行二进制压缩？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T14:21:57.437

切换到 POST 原始数据并使用 JSON 或 XML 通过请求保存和发送大结构。
例如，如果您使用 JQuery，您有

```
jQuery.post( url, [data], [callback], [type] ) 
```

其中数据可以是 xmlDoc、jsonObj、html、文本等...

而不是数据，你可以有类似的东西：

```
$.post("path/to/my/file.php", { func: "yourFunctionName" },
  function(data_returned_from_backend_json){
    //use data_returned_from_backend_json.properties
  }
, "json");

function yourFunctionName()
{
   //save all GET params into a json structure
} 
```

来源：[http ://docs.jquery.com/Post](http://docs.jquery.com/Post)

# objective-c - 如何访问 Core Data 中的数据

> ID：10335192
> 
> 赞同：0
> 
> 时间：2012-04-26T14:08:43.800
> 
> 标签：objective-c, ios

我在我的 iOS 应用程序中使用 Core Data。我有这样的模型：我的问题是，我如何访问我的数据，例如：如何检索带有“id_page”的书？谢谢你的回答

```
 #import <Foundation/Foundation.h>
    #import <CoreData/CoreData.h>

    @class Note, Page;

    @interface Book : NSManagedObject

    @property (nonatomic, retain) NSString * id_book;
    @property (nonatomic, retain) NSSet *page;
    @property (nonatomic, retain) NSSet *note;

    -(Note*)noteForPage;
    -(Page*)pageForPageNumber:(int)pageNumber;

    @end

    @interface Book (CoreDataGeneratedAccessors)

    - (void)addPageObject:(Page *)value;
    - (void)removePageObject:(Page *)value;
    - (void)addPage:(NSSet *)values;
    - (void)removePage:(NSSet *)values;
    - (void)addNoteObject:(Note *)value;
    - (void)removeNoteObject:(Note *)value;
    - (void)addNote:(NSSet *)values;
    - (void)removeNote:(NSSet *)values;
    @end

#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>

@interface Page : NSManagedObject

@property (nonatomic, retain) NSString * id_page;

@end 
```

我创建了一本书和这样的页面：

乙

```
ook *book = [NSEntityDescription
                  insertNewObjectForEntityForName:@"Book"
                  inManagedObjectContext:context];

    Page *page1 = [NSEntityDescription
                                       insertNewObjectForEntityForName:@"Page"
                                       inManagedObjectContext:context];
    [page1 setValue:@"firstPage" forKey:@"id_page"];

    Page *page2 = [NSEntityDescription
                   insertNewObjectForEntityForName:@"Page"
                   inManagedObjectContext:context];
    [page2 setValue:@"secondPage" forKey:@"id_page"];

    Page *page3 = [NSEntityDescription
                   insertNewObjectForEntityForName:@"Page"
                   inManagedObjectContext:context];
    [page3 setValue:@"ThirdPage" forKey:@"id_page"];

    // create a set of pages
    NSSet *pageSets = [[NSSet alloc]initWithObjects:page1,page2,page3, nil];
    [book addPage:pageSets]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T14:11:30.840

在这里使用 NSFetchRequest 是一个很好的核心数据入门教程：[http ://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started](http://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:13:35.113

```
- (Book *)bookWithIdStr:(NSString *)idStr {
  NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"Book"];
  NSPredicate *predicate = [NSPredicate predicateWithFormat:@"id_book MATCHES %@", idStr];
  fetchRequest.predicate = predicate;
  return [[self.managedObjectContext executeFetchRequest:fetchRequest error:nil] lastObject];
} 
```

# google-maps - 结合其他选择打开/关闭天气层

> ID：10335194
> 
> 赞同：4
> 
> 时间：2012-04-26T14:08:45.383
> 
> 标签：google-maps, google-maps-api-3, weather-api

我试图在我的页面上实现此代码（http://stackoverflow.com/questions/10318316/how-to-hide-or-display-a-google-maps-layer/），以放置天气/云/离开我的地图，但不知何故它干扰了我当前的代码。我已经尝试了上面链接中提供的两个选项，但也许我做错了什么，或者它干扰了我地图中已经存在的 Fusion Tables 选择？

有人可以帮我正确的代码片段吗？我的页面在这里[http://www.strahlen.org/map/mapplusweather.htm](http://www.strahlen.org/map/mapplusweather.htm)。（取消）选择按钮已经在右下角。

提前致谢， 弗兰克

ps：虽然管理员删除了您的帖子，但感谢Alexander Farber您之前的帮助！

ps 2：我当然有天气层工作，请参阅[http://www.strahlen.org/map/mapweather.htm](http://www.strahlen.org/map/mapweather.htm)，但我无法打开/关闭它

***最终编辑*** 以防止链接腐烂：我现在在我的“生产版本”中使用了代码-> [http://www.strahlen.org/map/](http://www.strahlen.org/map/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T19:12:30.703

我查看了您的网站，我相信您只需对现有代码进行一些基本更改。首先，在您的`initialize()`函数中添加两个新变量：

```
function initialize() {
    var tableId = 3167783;
    var cloudDisplayIsOn = false;
    var weatherDisplayIsOn = false; 
```

然后，在您现有的**云** `click`侦听器代码中，进行以下更改：

```
google.maps.event.addDomListener(document.getElementById('cloud'),
    'click', function() {
        if ( cloudDisplayIsOn ) {
            cloudLayer.setMap( null );
            cloudDisplayIsOn = false;
        }
        else {              
            cloudLayer.setMap( map );
            cloudDisplayIsOn = true;
        }
    }); 
```

最后，在您现有的**天气** `click`监听器代码中，进行非常相似的更改：

```
google.maps.event.addDomListener(document.getElementById('weather'),
    'click', function() {
        if ( weatherDisplayIsOn ) {
            weatherLayer.setMap( null );
            weatherDisplayIsOn = false;
        }
        else {
            weatherLayer.setMap( map );
            weatherDisplayIsOn = true;
        }
    }); 
```

现在您可能需要进行一些小调试，但我相信这将为您添加所需的显示开/关`cloudLayer`代码`weatherLayer`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-28T19:17:01.667

我正在尝试执行类似的功能，但倾斜度不同。以下代码是我们地图服务器页面引用的 fusion_maps_v3.js 文件中当前使用的 geeToggleLayer 函数。我正在尝试消除复选框切换，以便有人只需单击图层标签即可切换可见性。

```
 function geeToggleLayer(e, checkBoxId, channel, glmId, layerName) {
      try {
        var cb = document.getElementById(checkBoxId);
        var id = glmId + '-' + channel;

        // toggle layer visibility via clicking checkbox
        try {
          if (cb.checked) {
            geeMap.showFusionLayer(id);
          } else {
            geeMap.hideFusionLayer(id);
          }
        } catch (err2) {
          alert('Failed attempt to enable/disable layer: ' +
                layerName + '\n' + id + '\n' + err2);
        }
      } catch (err) {
        alert('Failed attempt to get checkbox for layer: ' +
              layerName + '\n' + err);
      }
      cancelEvent(e);
    } 
```

# emulation - Opera 移动模拟器的旧版本

> ID：10335197
> 
> 赞同：0
> 
> 时间：2012-04-26T14:08:58.830
> 
> 标签：emulation, opera, opera-mobile

是否可以设置在 Opera Mobile Emulator 中使用的 Opera 版本？我有一个运行 Opera 版本 10.0 的 pda 设备，我想在运行该版本的模拟器中测试我的应用程序...

我没有找到下载旧版 Opera 移动模拟器的链接，也没有找到在模拟器中设置版本的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:06:52.890

[通常在Opera 浏览器档案](http://arc.opera.com/pub/opera/)中可以找到适用于许多不同平台的旧版 Opera 。似乎 Opera Mobile 模拟器不是其中的一部分，我不知道为什么。

挖了一下之后。

*   [一个 Windows 7 版本](http://arc.opera.com/pub/opera/Win7/1100/)
*   [一些版本的“sdlbream”](http://arc.opera.com/pub/opera/sdlbream/)后来的版本实际上是qtbream。
*   显然被称为“android 模拟器”的东西，看起来它实际上是[Windows 和 Linux 的小部件管理器](http://arc.opera.com/pub/opera/android/emulator/)

让我知道这是否有帮助……或没有。我会尝试挖掘更多。

# google-docs-api - 删除集合 - 影响集合中的文档

> ID：10335200
> 
> 赞同：1
> 
> 时间：2012-04-26T14:09:17.110
> 
> 标签：google-docs-api, google-drive-api

我正在使用 Python 客户端永久删除集合（不是移入垃圾箱，而是永久删除）。

python gdata的版本是2.0.16。

这是我用来永久删除集合的代码：

```
 delimited = folder_entry.GetEditLink().href.split('?')
        url = delimited[0] + '?delete=true'
        client.Delete(url, force=True) 
```

我遇到的问题是正在删除的集合中的文档会发生什么情况。

这个 API 过去（直到大约 2012 年 4 月开始）不删除集合中的文档。最终结果将只是删除集合内的文档将从集合中“取消标记”。

目前，该 API 的工作方式与已删除集合中的文档完全不同。现在，已删除集合中的文档也将被永久删除。

几个问题...

1) API 的这种变化是预期的吗？2) 是否有一种新方法可以永久删除集合并简单地“取消标记”位于该集合中的文档。

感谢您提供任何信息。

*   担

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T00:46:49.080

我认为这与 API 的行为方式无关，而是与整个产品的行为方式有关。

随着从 Google Docs 转移到 Google Drive，我们已经从用作“标签”的集合转移到作为“文件夹”的集合，现在，当删除一个文件夹时，所有包含的文件也会被删除。API 将这种行为反映为一种副作用。

不幸的是，我认为不会在 Document List API 上做更多的工作，因为我们正在努力开发 Drive API 的下一个版本，它应该涵盖它的大部分功能。

# c# - 有没有非常快速的校验和生成算法？

> ID：10335203
> 
> 赞同：1
> 
> 时间：2012-04-26T14:09:29.557
> 
> 标签：c#, .net, performance, hash, checksum

搜索了一下，但我并没有真正找到我要找的东西。

我必须每秒验证大约 100 字节 [16384]（+许多其他任务..）。看起来拐角处最大的问题是速度。

你们知道 C#.NET 中有什么好的校验和算法非常快吗？它不必非常精确，但如果一个位发生变化，校验和也应该（通常..）改变。

字节存储在内存中，所以没有 IO 东西会减慢它的速度。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T22:32:51.367

扩展 C.Evenhuis 的答案，这里有一些变化应该会更快一些。我不确定他们的正确性，有更多经验的人想帮助我吗？我知道他们给出的校验和与每字节的校验和不同，但我确实认为他们给出的校验和与每字节的校验和一样*好*（不是很好，但显然足够）。

正如我在评论中所说，您可以通过不比较每个字节的字节数来大大提高速度，而是将数组视为小 4 倍的整数数组或小 8 倍的长数组。将其视为`long[]`仅可在 64 位上提供性能优势。

```
static unsafe uint ChecksumInt(byte[] array)
{
  unchecked
  {
    uint checksum = 0;
    fixed (byte* ptr = array)
    {
      var intPtr = (uint*)ptr;

      var iterations = array.Length / 4;
      var remainderIterations = array.Length % 4;

      for (var i = 0; i < iterations; i++)
      {
        var val = intPtr[i];
        checksum += val;
      }

      while (remainderIterations >= 0) // no more than 3 iterations
      {
        checksum += ptr[array.Length - remainderIterations];
        remainderIterations--;
      }
      return checksum;
    }
  }
}

static unsafe ulong ChecksumLong(byte[] array)
{
  unchecked
  {
    ulong checksum = 0;
    fixed (byte* ptr = array)
    {
      var intPtr = (ulong*)ptr;

      var iterations = array.Length / 8;
      var remainderIterations = array.Length % 8;

      for (var i = 0; i < iterations; i++)
      {
        var val = intPtr[i];
        checksum += val;
      }

      while (remainderIterations >= 0) // no more than 7 iterations
      {
        checksum += ptr[array.Length - remainderIterations];
        remainderIterations--;
      }
      return checksum;
    }
  }
} 
```

我在 64 位（Core 2 Duo 3 GHz）上对 100,000 个项目的阵列进行了 10,000 次迭代的性能测量：

*   每 1 个字节：00:00:00.7052533
*   每 4 个字节：00:00:00.1761491
*   每 8 个字节：00:00:00.0856880

所以速度要快一些。

但是，就像我说的，我不确定这是否提供了同样好的校验和。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T14:20:06.283

如果每一个比特都很重要，那么校验和算法就必须处理每一个字节。一个简单的算法是简单地添加每个值并忽略溢出：

```
 static unsafe uint GetChecksum(byte[] array)
    {
        unchecked
        {
            uint checksum = 0;
            fixed (byte* arrayBase = array)
            {
                byte* arrayPointer = arrayBase;
                for (int i = array.Length - 1; i >= 0; i--)
                {
                    checksum += *arrayPointer;
                    arrayPointer++;
                }
            }
            return checksum;
        }
    } 
```

当然，您可能无法检测到所有更改并获得重复项，但它可能会为您提供有关快速算法执行情况的指示。

# heroku - Heroku Cedar Stack 和命令 heroku 运行控制台

> ID：10335206
> 
> 赞同：0
> 
> 时间：2012-04-26T14:09:40.333
> 
> 标签：heroku, console, sinatra, irb, cedar

在我在 Bamboo 堆栈上运行的旧 Ruby 1.9.2 Sinatra 应用程序中，heroku 控制台提供了一个 shell，它不仅初始化了 Active Record，而且还记录到我的 .heroku 目录中的历史文件。

在迁移到 Heroku Cedar 堆栈并使用 Ruby 1.9.3 后，我发现 heroku 运行控制台没有加载我的任何 Active Record 模型。我通过编写一个小的 ruby​​ 脚本来初始化 Active Record 并加载我的模型来解决这个问题。

我使用笨拙的 heroku run 'bundle exec irb -r ./console' 执行此操作

这个 IRB 控制台可以正常启动，让我可以访问我的模型数据，但没有记录任何历史记录。

1）为什么heroku运行控制台如此绝育？2) 如何让我的控制台会话记录到历史记录？

请？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T00:02:05.640

将以下行添加到您的`Procfile`：

```
console: bundle exec irb -r ./console 
```

保留历史记录并非易事，因为它会为每次新调用启动一个 dyno（雪松堆栈也不保留 Rails 控制台的历史记录）。您可以尝试使用[rlwrap](http://utopia.knoware.nl/~hlub/rlwrap/#rlwrap)将您的历史记录保存在本地计算机上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T16:36:24.440

从[文档](https://devcenter.heroku.com/articles/console)：

> 您可以使用 heroku 控制台作为 Rails 脚本运行器的替身，直接从命令行运行一次性命令

和

> 不带参数，`heroku console`启动类似于`irb`或 Rails`script/console`命令的交互式控制台

`run console`旨在运行 Rails 控制台，或`irb`.

# authentication - 在 HTTP 身份验证标头中传递 Foursquare 令牌。可能吗？

> ID：10335218
> 
> 赞同：0
> 
> 时间：2012-04-26T14:10:51.740
> 
> 标签：authentication, foursquare

我正在构建一个具有两个方面的应用程序：客户端（iPhone）和服务器（PHP）。使用 https 进行通信。手机获得 4SQ 访问令牌。然后，它将该令牌发送到服务器，服务器将使用它进行 4SQ API 调用。我的问题是关于如何发送这个令牌。

我的想法是将令牌包含在 HTTP 身份验证请求的标头中，但是在阅读了基本/摘要身份验证之后，我怀疑这不是这样做的方式。实际上，对 4SQ API 的调用是使用请求参数完成的

> oauth_token=ACCESS_TOKEN

而不是将令牌放在身份验证标头或任何其他地方。我确信这是有充分理由的，但我找不到。

那么，哪个选项是最好的呢？

*   电话将令牌作为请求参数发送到 PHP 服务器，就像 4SQ 一样
*   电话在 Authentication 标头中向 PHP 服务器发送令牌（哪种身份验证是？）
*   任何其他方式

非常感谢，并致以最诚挚的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T09:32:17.070

I think the most secure and reasonable way would be a HTTPS POST. When the token is part of the query string in a HTTPS request, it is also encrypted. But it will appear clear text in the server log, or, when a browser is used, it could also appear in the browser history. Depending on the HTTP helper library, it could also log the HTTPS URL, when, for example, a request fails.

In my eyes, sending the token in the Authentication header would be strange, since it is not used for authentication between the server and the client.

# salesforce - 使用 SOQL 将文件从私有库移动到公共库

> ID：10335220
> 
> 赞同：1
> 
> 时间：2012-04-26T14:10:57.263
> 
> 标签：salesforce, soql

有没有办法可以使用 SOQL 语言将文件从私有库移动到公共库？

我已经尝试编辑 ContentDocument 对象并更改 ParentId（这显然不起作用，因为 ParentId 似乎是只读的）。

我还尝试更改 PublishStatus，但这似乎也毫无意义，因为无法确定它也属于哪个库。我尝试查看 Salesforce[文档](http://www.salesforce.com/us/developer/docs/api/index.htm)，但是找不到将 ContentDocument/ContentVersion 与库对象连接的方法（PublishStatus 除外，但如前所述，它确实提供了将内容与库链接的方法）。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T14:55:48.337

好的，终于明白了。对于有类似问题的任何人，解决方案（一旦您知道）非常明显：您可以使用 ContentWorkspaceDoc 在库和内容文档之间创建链接，这需要 ContentDocumentId（文档的 ID）和 ContentWorkspaceId（库的 ID） ）。

# c - 是否可以重新定义#warning？

> ID：10335221
> 
> 赞同：2
> 
> 时间：2012-04-26T14:10:59.607
> 
> 标签：c

我们`#warning`用来显示编译消息，如下所示：

```
#warning Are you sure it is correct? 
```

是否可以重新定义`#warning`并且可以选择是否启用或禁用它，如下所示：

```
#ifdef ACTIVE_MY_WARNING
#define #my_warning #warning
#else
#define #my_warning 
#endif 
```

我们可以用C来做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T14:13:08.063

不，无法重新定义预处理器关键字（、、、`#if`等`#define`）`#ifdef`。

您最好的办法是拥有一个可以将您的代码替换为的解析器：

```
#ifdef ACTIVE_MY_WARNING
#warning Are you sure it is correct?
#endif 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:26:13.213

您在 C 中标记它，据我所知，c 中没有预处理器实时#warning。

我对你的问题是“我们可以用 C 做还是不做？” 是的。

# c# - 如何在 C# 中为 int 列表构建直方图

> ID：10335223
> 
> 赞同：4
> 
> 时间：2012-04-26T14:11:04.667
> 
> 标签：c#, linq

> **可能重复：**
> [使用 LINQ 查找数组中出现频率最高的数字](https://stackoverflow.com/questions/1169299/find-the-most-frequent-numbers-in-an-array-using-linq)

我有一个 int, 的列表，`List<int> demoList`类似于`{1, 2, 1, 1, 1, 3, 2, 1}`，我想编写一个 LINQ 语句以从该列表中获取出现次数最多的数字，在我的情况下是`1`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T14:15:33.360

```
var list = new[] { 1, 2, 1, 1, 1, 3, 2, 1 };
var result = list
    .GroupBy(x => x)
    .Select(x => new { Number = x.Key, Count = x.Count() })
    .OrderByDescending(x => x.Count)
    .FirstOrDefault();
Console.WriteLine("highest number = {0}, count = {1}", result.Number, result.Count); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-26T14:17:07.920

```
 int highestAppearanceNum = demoList.GroupBy(i => i)
            .OrderByDescending(grp => grp.Count())
            .Select(grp => grp.First())
            .First(); 
```

**编辑**：如果您还想知道哪个数字出现的频率：

```
var appearances = demoList.GroupBy(i => i)
    .OrderByDescending(grp => grp.Count())
    .Select(grp => new { Num = grp.Key, Count = grp.Count() });
if (appearances.Any())
{
    int highestAppearanceNum = appearances.First().Num;     // 1
    int highestAppearanceCount = appearances.First().Count; // 5
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T14:14:09.817

使用`group by`子句。

```
var groups = 
    from i in demoList
    group i by i into g
    select new { Value = g.Key, Count = g.Count() } 
```

从这里你可以说

```
var max = groups.Max(g => g.Count);
groups.Where(g => g.Count == max).Select (g => g.Value); // { 1 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T14:15:37.657

```
var query =
    from i in demoList
    group i by i into g
    orderby g.Count() descending
    select new { Value = g.Key, Count = g.Count() };

var result = query.First();
Console.WriteLine(
    "The number with the most occurrences is {0}, which appears {1} times",
    result.Value,
    result.Count); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T15:18:03.993

我提前致歉：

```
 List<int> demoList = new List<int>() { 1, 2, 1, 1, 1, 3, 2, 1 };

        Dictionary<int,int> keyOrdered = demoList.GroupBy(i => i)
            .Select(i => new { i.Key, Count = i.Count() })
            .OrderBy(i=>i.Key)
            .ToDictionary(i=>i.Key, i=>i.Count);

        var max = keyOrdered.OrderByDescending(i=>i.Value).FirstOrDefault();

        List<string> histogram = new List<string>();

        for (int i = max.Value; i >-1 ; i--)
        {
            histogram.Add(string.Concat(keyOrdered.Select(t => t.Value>i?"| ":"  ")));
        }

        histogram.Add(string.Concat(keyOrdered.Keys.OrderBy(i => i).Select(i => i.ToString() + " ")));

        histogram.ForEach(i => Console.WriteLine(i));

        Console.WriteLine(Environment.NewLine);
        Console.WriteLine("Max: {0}, Count:{1}", max.Key, max.Value); 
```

当我读到标题时，我想到了这一点，它让我微笑..（也充满了错误！）

# xamarin.ios - 单点触控推送通知

> ID：10335224
> 
> 赞同：2
> 
> 时间：2012-04-26T14:11:05.170
> 
> 标签：xamarin.ios, push, apple-push-notifications

有谁知道为什么我的应用程序中的以下方法在注册 APNS（使用 MonoTouch）后会收到 null deviceToken？

public override void RegisteredForRemoteNotifications (UIApplication application, NSData deviceToken){ // }

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T02:02:25.817

调试器说 deviceToken 为空，但它不是。（至少这是我观察到的）您可以使用下面的代码来构建一个代表您的设备令牌的字符串。

```
public override void RegisteredForRemoteNotifications (UIApplication application, NSData deviceToken)
{
    byte [] token = deviceToken.ToArray ();
    string tokenString = "";

    for (int i=0; i<deviceToken.Length; i++)
        tokenString += token[i].ToString ("X2");

    Console.WriteLine (tokenString);
} 
```

[这](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)是一个解释推送通知的好教程。它适用于 XCode，但很容易转换。

# c++ - 使用 c++ api 访问 cv::Mat 中的元素 (x,y)

> ID：10335226
> 
> 赞同：4
> 
> 时间：2012-04-26T14:11:10.200
> 
> 标签：c++, types, opencv, unsigned-integer

我知道很多关于这个论点的帖子，我已经阅读了很多，但我仍然感到困惑。问题是类型（哦，该死的，这是c，我必须处理数据类型！;-)）。

我正在使用新的超酷模板化 C++ API 函数`at`：

```
Mat mat32f(3, 3, CV_32F);
for(int i=0; i<3; i++) 
    for(int j=0; j<3; j++)
        mat32f.at<float>(i,j) = i;
cout << "Matrix of type: " << mat32f.type() << endl;
cout << mat32f << endl;
cout << mat32f.at<float>(1,2) << endl; 
```

好的，这里是1通道的浮点数，没问题，输出很清楚：

```
Matrix of type: 5
[0, 0, 0;
  1, 1, 1;
  2, 2, 2]
1 
```

现在只需做一些过滤器：

```
Mat mask;
inRange(mat32f, 1, 1, mask);
cout << "Mask of type: " << mask.type() << endl;
cout << mask << endl; 
```

对于这里，alles klar，输出正是我想要的：

```
Mask of type: 0
[0, 0, 0;
  255, 255, 255;
  0, 0, 0] 
```

现在我想检查某个点（鼠标单击？随便）是否在范围内。

```
int value2 = mask.at<char>(1,2);
cout << value2 << endl; 
unsigned int value3 = mask.at<unsigned int>(1,2);
cout << value3 << endl; 
```

我记得在第一节计算机科学课上 a`char`的大小与 an 相同`unsigned int`（因为我的掩码类型是 0 == `CV_8U`）所以使用 char。但是`cout`抓住它作为一个字符，所以给我看一些无用的非 ascii 符号，所以把它存储在一个`int`.

这里的输出：

```
-1
256 
```

发生了什么？一团糟。为什么-1？？或者，为什么是 256？发生了什么事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T14:41:00.780

[OpenCV::Basic Structures](http://opencv.willowgarage.com/documentation/cpp/basic_structures.html)的评论说明了 Mat::at<>() 方法：

```
// template methods for read-write or read-only element access.
// note that _Tp must match the actual matrix type -
// the functions do not do any on-fly type conversion 
```

`Mat<float>`因此，当您使用`at<char>`或`at<unsigned int>`可能是未定义的行为（来自 C++ 或 Open 库）时，您会得到什么。

您关于“char 与 unsigned int 大小相同”的说法也几乎总是不正确的。我相信`sizeof(char) == sizeof(unsigned int)`在 C++ 中这在技术上是可行的，但我不知道这是真的平台/实现。即使在您的情况下是正确的，使用此假设也是危险的，因为它可能并非在您的代码可能运行的所有系统上都是正确的。

**更多详情**

根据[OpenCV v2.4 Source](http://code.opencv.org/svn/opencv/branches/2.4/opencv/modules/core/include/opencv2/core/mat.hpp) Mat::at() 看起来像（更少的调试代码）：

```
template<typename _Tp> inline const _Tp& Mat::at(int i0, int i1) const
{
    return ((const _Tp*)(data + step.p[0]*i0))[i1];
} 
```

如果您尝试访问错误类型的数据，您会将原始数组转换为错误的类型，这只会导致不好的结果。

至于为什么要在 Mat::at() 中指定数据类型，你不能这样做：

```
mat32f.at(i,j) = i; 
```

让编译器自动选择正确的模板类型？

# javascript - jQuery 中 $('input[name$="value"]') 的 Javascript 等价物？

> ID：10335231
> 
> 赞同：6
> 
> 时间：2012-04-26T14:11:18.653
> 
> 标签：javascript, jquery, html, dom

如何仅使用javascript获取名称属性以特定值结尾的输入元素？

我发现这个`$('input[name$="value"]')`方法在[jQuery](http://api.jquery.com/attribute-ends-with-selector/)中可用。

javascript中是否有类似的功能？由于某种原因，我不能使用 jQuery。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-26T14:16:54.727

我很惊讶没有人提到这一点。你有没有尝试过：

```
var elements = document.querySelectorAll('input[name$="value"]'); 
```

这仅在浏览器支持该[`querySelectorAll`](https://developer.mozilla.org/en/DOM/document.querySelectorAll)方法时才有效，但如果找到支持，它就是 jQuery 在下面使用的。

下表列出了该方法的浏览器支持：

[什么时候可以使用 querySelector/querySelectorAll？](http://caniuse.com/queryselector)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T14:13:51.880

你可以这样做：

```
console.log(document.getElementsByName("value")[0]); 
```

或者，如果您想查找`input`名称中包含“值”的第一个元素：

```
var searchString = "value";
var elems = document.getElementsByTagName('input'), wantedElem;

for(var i = 0, len = elems.length; i < len; i++) {
    if(elems[i].name.lastIndexOf(searchString) == elems[i].name.length-searchString.length) {
        wantedElem = elems[i];
        break;
    }
}

console.log(wantedElem); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-26T18:18:02.767

我将假设您已将这些`<input>`元素放置在它们所属的位置（在`<form>`元素中）。

通过 DOM API 遍历表单控件的最简单方法是通过. 它允许命名遍历，这对于特定元素非常方便。[`HTMLFormElement::elements`](http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-76728479) `HTMLCollection`

例如，考虑以下标记：

```
<form action="./" method="post" name="test"
    onsubmit="return false;">
    <fieldset>
        <legend>Test Controls</legend>
        <input name="control_one" type="text"
            value="One">
        <input name="control_two" type="text"
            value="Two">
        <input name="control_three" type="text"
            value="Three">
    </fieldset>
</form> 
```

之后，需要一些简单的文档树遍历。这是它的全部内容：

```
var test = document.forms.test,
    controls = test.elements;

function traverseControl(control)
{
    var patt = /one$/,
        match = patt.test(control.name);
    if (match) {
        // do something
        console.log(control);
    }
}

function traverseControls(nodes)
{
    var index;
    if (typeof nodes === "object" &&
        nodes.length) {
        index = nodes.length - 1;
        while (index > -1) {
            traverseControl(
                nodes[index]
            );
            index -= 1;
        }
    }
}

traverseControls(controls); 
```

正如你所看到的，这真的不是太难。使用`HTMLCollection`s 的结果是支持新旧浏览器。由于`HTMLCollection`s 是在 DOM 0 中实现的，因此它们得到了广泛的支持。

将来，我建议使用不那么模糊的遍历。如果您控制正在遍历的文档树（即您编写了标记），您应该已经知道`name`控件的 s。否则，必须使用像前面这样的模糊方法。

工作示例：http: [//jsbin.com/epusow](http://jsbin.com/epusow)

更多内容，可以细读[这篇文章。](http://fortybelow.ca/hosted/comp-lang-javascript/faq/notes/form-access/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-26T14:13:44.883

此方法返回一个元素数组

```
var elements = document.getElementsByName("value"); 
```

# sql-server-2008 - 查询从 Adventure 作品中获取 500 万条记录

> ID：10335233
> 
> 赞同：4
> 
> 时间：2012-04-26T14:11:27.380
> 
> 标签：sql-server-2008, adventureworks

我正在从 SQL Server 生成一个平面文件，我希望为此拥有大约 3-5 百万条记录。有人可以给我一个查询，我可以在 Adventure 作品上运行以获得 3-5 百万条记录吗？我正在寻找冒险作品，因为它具有有意义的数据。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-26T14:30:03.920

以下查询将为您提供您正在寻找的内容，即来自[Adventure Works](http://msftdbprodsamples.codeplex.com/)数据库的 3 到 500 万行，基于变量中的值`@NumRows`：

```
DECLARE @NumRows INT=3000000; -- Number of rows to return

SELECT TOP(@NumRows) B1.*                -- Take @NumRows out of:
FROM Production.BillOfMaterials B1       -- BillOfMaterials has 2,679 rows
CROSS JOIN Production.BillOfMaterials B2 -- multiplied by 2,679 rows = 7,177,041 rows 
```

注意：此查询可能需要一段时间才能运行（例如，在我的 PC 上需要 17 秒）。

# c++ - 如何从 std::ifstream 将文件读入 unsigned char 数组？

> ID：10335236
> 
> 赞同：5
> 
> 时间：2012-04-26T14:11:38.760
> 
> 标签：c++, boost, std, boost-iostreams

所以通常我会做这样的事情：

```
 std::ifstream stream;
    int buff_length = 8192;
    boost::shared_array<char> buffer( new char[buff_length]);
    stream.open( path.string().c_str(), std::ios_base::binary);
    while (stream)
    {
            stream.read(buffer.get(), buff_length);
            //boost::asio::write(*socket, boost::asio::buffer(buffer.get(), stream.gcount()));
    }
    stream.close(); 
```

我想知道如何读入`unsigned char`缓冲区（`boost::shared_array<unsigned char> buffer( new unsigned char[buff_length]);`）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-26T15:35:55.827

以最简单的形式：

```
std::vector<unsigned char> vec(
      std::istreambuf_iterator<char>(std::cin)
    , std::istreambuf_iterator<char>()
    ); 
```

替换`std::cin`为您的实际流。

上面可能会做不止一次的内存分配（对于大于很少字节的文件），因为`std::istreambuf_iterator<>`是输入迭代器，而不是随机访问或前向迭代器，所以文件的长度不能通过减去迭代器 like`end - begin`或调用`std::distance(begin, end)`. 如果首先创建向量为空，然后`std::vector<>::reserve()`调用为文件长度分配内存，最后调用范围插入`vec.insert(vec.end(), beg, end)`并如上所述读取整个文件`beg`，`end`则可以将其减少为一次内存分配。`std::istreambuf_iterator<>`

如果文件大小超过几千字节，则将其映射到进程内存以避免将内存从内核复制到用户空间可能是最有效的。

使用的原因`std::istreambuf_iterator<char>`是因为实现使用`std::char_traits<>`通常只对`char`和进行专门化`wchar_t`。无论如何，C 和 C++ 标准要求所有`char`类型都具有相同的二进制布局，没有填充位，因此和之间`char`的转换（它们都是不同的类型，不同于并且是相同的类型）保留位模式，因此是安全的。`unsigned char``signed char``signed int``int`

[[basic.fundamental/1]](http://eel.is/c++draft/basic.fundamental#1)

> Plain `char`, `signed char`, 和`unsigned char`是三种不同的类型，统称为*窄字符类型*。A `char`、 a`signed char`和 an`unsigned char`占用相同的存储量，具有相同的对齐要求；也就是说，它们具有相同的对象表示...对于窄字符类型，对象表示的所有位都参与值表示...对于无符号窄字符类型，值表示的每个可能的位模式代表一个不同的数字。这些要求不适用于其他类型。在任何特定的实现中，普通对象可以采用与 a或 an`char`相同的值；哪一个是实现定义的。对于每个类型的值`signed char``unsigned char``i``unsigned char`在 0 到 255 的范围内，存在一个`j`type 的值，`char`使得从 to 的整数转换的结果是 ，从to的整数转换的`i`结果是。`char``j``j``unsigned char``i`

# android - 权限拒绝：接收 Intent { act=com.google.android.c2dm.intent.REGISTRATION

> ID：10335239
> 
> 赞同：1
> 
> 时间：2012-04-26T14:11:44.017
> 
> 标签：android, push, android-c2dm

我正在尝试在我的应用程序中实现推送通知，但我的 C2DMReceiver 似乎无法正常工作。我尝试了所有我能找到的解决方案。这是我所拥有的：

```
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="10" />

<permission android:name="com.my.app.permission.C2D_MESSAGE"   android:protectionLevel="signature"/>

<uses-permission android:name="com.my.app.permission.C2D_MESSAGE"/>
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE"/>

<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>

<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

<uses-permission android:name="android.permission.WAKE_LOCK" />

<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.USE_CREDENTIALS" />

<activity>....</activity>

<service android:name=".C2DMReceiver"/>
<receiver 
          android:name="com.google.android.c2dm.C2DMBroadcastReceiver"
          android:permission="com.google.android.c2dm.permission.SEND">
    <intent-filter>
        <action android:name="com.google.android.c2dm.intent.RECEIVE"/>
        <category android:name="com.my.app"/>
    </intent-filter>
    <intent-filter>
        <action android:name="com.google.android.c2dm.intent.REGISTRATION"/>
         <category android:name="com.my.app"/>
    </intent-filter>
 </receiver> 
```

在我的 onCreate 方法中，我使用： C2DMessaging.register(this, "mymail@gmail.com");

```
String id = C2DMessaging.getRegistrationId(this); 
```

并且 id 始终为空。查看 LogCat，我可以看到**Permission Denial: received Intent { act=com.google.android.c2dm.intent.REGISTRATION**那么，我该怎么办？谢谢）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T09:35:29.307

接收器`android:name`中的 必须指定实现接收器的类的路径。我确信您的`C2DMBroadcastReceiver`课程不在`com.google.android.c2dm`包中，正如我在下面看到的那样，您正在使用`com.my.app`包。

例如，在其中创建一个 C2DMBroadcastReceiver 类，`com.my.app.receiver`并将接收器指定`adroid:name`为：

```
<receiver 
      android:name="com.my.app.receiver.C2DMBroadcastReceiver"
      android:permission="com.google.android.c2dm.permission.SEND">
      ......
</receiver> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T11:59:10.377

`android:name`将您的`receiver`标签从更改`com.google.android.c2dm.C2DMBroadcastReceiver`为`com.my.app.YourReceiverClassName`，并确保您的发件人电子邮件和服务器端登录电子邮件相同。

# fonts - 栅格化 TrueType 字符字形数据

> ID：10335247
> 
> 赞同：3
> 
> 时间：2012-04-26T14:11:59.953
> 
> 标签：fonts, rendering, truetype, raster, glyph

我在 TrueType 字体文件的*glyf 表中有一个字符的字形数据。*
该数据表示为十进制数字块。

*示例：* Calibri 11pt 中的字符“a”（字形索引 258）

```
0209225523736332020510640176643215663166476631192352121217752161317752241117752161516176521841247641403939150112016151770581842552401791217758184255232179131775818425523217911177581842552321801516176581842864201723197052165225919252105215252466542184127641520834134344292344674612201277404763237632371857479323717185747931139493237147225434343431964394935747162254343434350574948949337206635343838535366353446253526225151535246235341423534462535262451503022173534142212022515054553631628272631145914581711158145621161681051242249785761977349128129472766861025297136843816414168100663189806511161241212661212906370377010265761127437705280532729352981625152529263529194485126841962345634170836668 
```

*在屏幕上绘制*这个角色的可能性是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T15:13:35.383

简短的回答：不要自己做。使用字体渲染库，例如[freetype](http://freetype.org/)，或者如果您在一个已经有字体渲染器的平台上，请使用它。还有许多商业渲染库可用。

长答案：可以在[这里](http://www.microsoft.com/typography/otspec/glyf.htm)找到将字形数据解码为曲线的数据规范（以及可选的指令） 。所以你可以从那开始。但是你需要更多，更多……你还需要解析“head”和“hhea”表，以了解在哪里放置东西以及如何将设计单元缩放到绘图空间中。然后，您需要解析包含“全局”（字体范围）指令（有时称为“提示”）的“fpgm”、“cvt”和“prep”表。然后您需要解析每个字形中存在的指令，然后开发一个填充例程来使用所有这些信息来放置单个像素。祝你好运！这不适合胆小的人，也不适合那些寻求快速解决方案的人。使用图书馆。

# asp.net - DotNetZip FileIOPermission - 无法将文件添加到 zip，尽管我有权限

> ID：10335249
> 
> 赞同：1
> 
> 时间：2012-04-26T14:12:08.183
> 
> 标签：asp.net, file-permissions, dotnetzip

我完全无法让 dotnetzip 将文件添加到 .zip 文件

我能：

```
using (ZipFile zip = new ZipFile())
      {
zip.AddEntry("test.txt", DateTime.Now.ToString());
zip.Save(Response.OutputStream);
} 
```

这已正确完成并生成一个 zip 文件以供下载，可以使用里面的文本文件打开

问题：尝试添加这样的文件：

```
 zip.AddFile(Server.MapPath("/Files/test.txt"), "Files"); 
```

总是导致这样的事情：

```
[SecurityException: Request for the permission of type 'System.Security.Permissions.FileIOPermission, mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' failed.]
   System.Security.CodeAccessSecurityEngine.Check(Object demand, StackCrawlMark& stackMark, Boolean isPermSet) +0
   System.Security.CodeAccessPermission.Demand() +61
   System.IO.File.GetLastWriteTimeUtc(String path) +114
   System.IO.File.GetLastWriteTime(String path) +24
   Ionic.Zip.ZipEntry.Create(String nameInArchive, ZipEntrySource source, Object arg1, Object arg2) in c:\DotNetZip\Zip\ZipEntry.cs:2405
   Ionic.Zip.ZipEntry.CreateFromFile(String filename, String nameInArchive) in c:\DotNetZip\Zip\ZipEntry.cs:2313
   Ionic.Zip.ZipFile.AddFile(String fileName, String directoryPathInArchive) in c:\DotNetZip\Zip\ZipFile.AddUpdate.cs:406
   Ionic.Zip.ZipFile.AddFile(String fileName) in c:\DotNetZip\Zip\ZipFile.AddUpdate.cs:296
   MultiFileDownloader.WebForm1.Button1_Click(Object sender, EventArgs e) in D:\WORK\dynamicweb\StandardModules\MultiFileDownloader\Source\MultiFileDownloader\WebForm1.aspx.cs:54
   System.Web.UI.WebControls.Button.OnClick(EventArgs e) +111
   System.Web.UI.WebControls.Button.RaisePostBackEvent(String eventArgument) +110
   System.Web.UI.WebControls.Button.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) +10
   System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) +13
   System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData) +36
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +6785
   System.Web.UI.Page.ProcessRequest(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +242
   System.Web.UI.Page.ProcessRequest() +80
   System.Web.UI.Page.ProcessRequestWithNoAssert(HttpContext context) +21
   System.Web.UI.Page.ProcessRequest(HttpContext context) +49
   ASP.webform1_aspx.ProcessRequest(HttpContext context) in c:\Windows\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET Files\root\ade7bc1a\c2b11481\App_Web_txhzteca.0.cs:0
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +181
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +75 
```

注意：我的代码可以毫无问题地读取/创建文件。IIS 用户（实际上每个人）都拥有对相关文件的全部权限。IIS 7.5，win2008r2

如何授予 DotNetZip 程序集相同的权限？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T21:11:11.257

我自己想通了：

在应用程序池上，我将加载用户配置文件设置为 true....问题已解决。猜猜程序集在没有任何用户的情况下运行（不是每个人，不是匿名的，不是没有人）

# php - PHP - foreach 循环

> ID：10335250
> 
> 赞同：0
> 
> 时间：2012-04-26T14:12:17.720
> 
> 标签：php, arrays, foreach

我开始使用 PHP，我需要帮助！到目前为止，我有一个视频类别列表，通过这个简单的 foreach 循环，我在链接中显示了所有类别。现在，我想做的是根据类别 ID 仅显示其中的一些。

显示所有类别的代码：

```
$idx = 0;

foreach($this->categories as $category) 
{
  echo "\n".($idx++ ? '| ' : '').'<a href="'.KM_Helpers::getCategoryURL($category).'">'.$category['name'].'</a>';
} 
```

假设现在我只想显示 ID 为 2、8、21、22 的类别。我可以使用 $category['id'] 来获取 IDS。

我正在考虑拥有一个仅包含我要显示的 ID 的数组...

```
$myarray = array(2, 8, 21, 22); 
```

我的问题是，如何在我的 $category 数组中循环，只显示数组中包含的 ID？（基于 $category['id'] ）

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T14:14:51.117

如果 id 值与类别数组中的索引匹配，则可以循环遍历所需的值：

```
foreach ($myarray as $id)
{
  $category = $this->categories[$id];
  echo "\n".($idx++ ? '| ' : '') .
    '<a href="' . KM_Helpers::getCategoryURL($category) . '">' .
     $category['name'] . '</a>';
} 
```

否则，您必须执行双循环（可能被 隐藏`in_array`），以检查 id 是否有效或查找具有给定有效 id 的类别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T14:14:33.680

```
$idx = 0;
$myarray = array(2, 8, 21, 22);
foreach($this->categories as $category) 
{
    if (!in_array($category['id'], $myarray)) {
        continue; // skip it if the id isn't in your array of accceptable IDs
    }
    echo "\n".($idx++ ? '| ' : '').'<a href="'.KM_Helpers::getCategoryURL($category).'">'.$category['name'].'</a>';
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T14:15:05.340

```
$ids= array(2, 8, 21, 22);

$idx = 0;
foreach($this->categories as $id => $category){
    if (in_array($category['id'] , $ids)) {
        echo "\n".($idx++ ? '| ' : '').'<a href="'.KM_Helpers::getCategoryURL($category).'">'.$category['name'].'</a>';
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T14:16:25.877

不是问题。添加一些简单的逻辑来测试 id 是否在您的“已批准”id 列表中：

```
$idx = 0;
$myarray = array(2, 8, 21, 22);

foreach($this->categories as $category) 
{
    if(in_array($category['id'], $myarray)
    {
        echo "\n".($idx++ ? '| ' : '').'<a href="'.KM_Helpers::getCategoryURL($category).'">'.$category['name'].'</a>';
    }
} 
```

这会在循环的每次迭代中测试 $category['id'] ，如果它在您的 id 数组中，则回显链接。否则，类别项将被忽略，循环继续。

# jquery - jquery 验证插件使用依赖和设置参数

> ID：10335251
> 
> 赞同：2
> 
> 时间：2012-04-26T14:12:22.900
> 
> 标签：jquery, jquery-validate

我的问题很简单：

如何设置对字段的依赖并将参数设置为规则函数？设置参数的关键是什么？

```
$('#form').validate({
    rules: {
        somefield: {
            minlength: {
                depends: function() {
                    return $('#checkbox').prop('checked');
                }, 
                keyToSetParams??: 5
            }
        }
    }
}); 
```

没有依赖，它看起来像这样：

```
$('#form').validate({
    rules: {
        somefield: {
            minlength: 5
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T16:43:07.073

经过一番调试，我找到了解决方案，键名是“param”，所以它看起来像：

```
$('#form').validate({
    rules: {
        somefield: {
            minlength: {
                depends: function() {
                    return $('#checkbox').prop('checked');
                }, 
               param: 5
            }
        }
    }
}); 
```

# objective-c - objective-c 选项卡式应用程序，线程 1 信号：SIGABRT

> ID：10335252
> 
> 赞同：2
> 
> 时间：2012-04-26T14:12:23.527
> 
> 标签：objective-c, cocoa-touch, uikit

我正在从 xCode 中的选项卡式应用程序模板编写一个应用程序。没有任何代码，该应用程序将毫无问题地切换选项卡。

将代码添加到第一个视图控制器后，尝试切换选项卡时出现错误。

这是错误消息：

> ```
> 2012-04-26 09:43:01.171 Triangle Solver[9516:f803] *** Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<TriSecondViewController 0x68827d0> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key solve.'
> *** First throw call stack: (0x13ce022 0x155fcd6 0x13cdee1 0x9c6022 0x937f6b 0x937edb 0x952d50 0x23a71a 0x13cfdea 0x13397f1 0x23926e 0xdf1fc 0xdf779 0xdf99b 0xfb0a9 0xfaedd 0xf94aa 0xf934f 0xfae14 0x13cfe99 0x1b14e 0x1b0e6 0x2434bd 0x13cfe99 0x1b14e 0x1b0e6 0xc1ade 0xc1fa7 0xc1b13 0x245c48 0x13cfe99 0x1b14e 0x1b0e6 0xc1ade 0xc1fa7 0xc1266 0x403c0 0x405e6 0x26dc4 0x1a634 0x12b8ef5     0x13a2195 0x1306ff2 0x13058da 0x1304d84 0x1304c9b 0x12b77d8 0x12b788a 0x18626 0x2a0d 0x2975) terminate called throwing an exception(lldb) 
> ```

firstViewResponder.h：#import

```
@interface TriFirstViewController : UIViewController
@property (weak, nonatomic) IBOutlet UITextField *triText1;
@property (weak, nonatomic) IBOutlet UITextField *triText2;
- (IBAction)calc:(id)sender;
@property (weak, nonatomic) IBOutlet UILabel *legA;
@property (weak, nonatomic) IBOutlet UILabel *legB;
@property (weak, nonatomic) IBOutlet UILabel *hypotenuse;
@property (weak, nonatomic) IBOutlet UILabel *angleA;
@property (weak, nonatomic) IBOutlet UILabel *angleB;

@property (weak, nonatomic) IBOutlet UIButton *button1;

@property (copy, nonatomic) NSString *text1;
@property (copy, nonatomic) NSString *text2;

@end 
```

secondViewController.h：

```
@interface TriSecondViewController : UIViewController
@property (weak, nonatomic) IBOutlet UITextField *sines1;
@property (weak, nonatomic) IBOutlet UITextField *sines2;
@property (weak, nonatomic) IBOutlet UITextField *sines3;
- (IBAction)solve2:(id)sender;
@property (weak, nonatomic) IBOutlet UILabel *angleA;
@property (weak, nonatomic) IBOutlet UILabel *sideA;
@property (weak, nonatomic) IBOutlet UILabel *angleB;
@property (weak, nonatomic) IBOutlet UILabel *sideB;
@property (weak, nonatomic) IBOutlet UILabel *angleC;
@property (weak, nonatomic) IBOutlet UILabel *sideC;

@property (weak, nonatomic) IBOutlet UISegmentedControl *segControl;
- (IBAction)aassas:(id)sender;
@property (weak, nonatomic) IBOutlet UILabel *sine1;
@property (weak, nonatomic) IBOutlet UILabel *sine2;
@property (weak, nonatomic) IBOutlet UILabel *sine3;

@end 
```

firstViewController.m: @interface TriFirstViewController ()

```
@end

@implementation TriFirstViewController
@synthesize legA;
@synthesize legB;
@synthesize hypotenuse;
@synthesize angleA;
@synthesize angleB;
@synthesize button1;
@synthesize triText1;
@synthesize triText2;

@synthesize text1;
@synthesize text2;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
    [self setTriText1:nil];
    [self setTriText2:nil];
    [self setLegA:nil];
    [self setLegB:nil];
    [self setHypotenuse:nil];
    [self setAngleA:nil];
    [self setAngleB:nil];
    [self setButton1:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

- (IBAction)calc:(id)sender 
{
    double aa = 0;
    double ab = 0;
    double la = 0;
    double lb = 0;
    double h = 0;

    self.text1 = self.triText1.text;
    self.text2 = self.triText2.text;

    aa = [self.text1 doubleValue];
    lb = [self.text2 doubleValue]; 

    ab = 90 - aa;

    la = (tan((aa * (M_PI/180))) * lb);
    h = (pow(la, 2) + pow(lb, 2));
    h = sqrt(h);

    self.legA.text = [NSString stringWithFormat: @"%.2lf", la];
    self.legB.text = [NSString stringWithFormat: @"%.2lf", lb];
    self.angleA.text = [NSString stringWithFormat: @"%.2lf", aa];
    self.angleB.text = [NSString stringWithFormat: @"%.2lf", ab];
    self.hypotenuse.text = [NSString stringWithFormat: @"%.2lf", h];
}

@end 
```

secondViewController.m：

```
@interface TriSecondViewController ()

@end

@implementation TriSecondViewController
@synthesize sine1;
@synthesize sine2;
@synthesize sine3;
@synthesize angleA;
@synthesize sideA;
@synthesize angleB;
@synthesize sideB;
@synthesize angleC;
@synthesize sideC;
@synthesize segControl;
@synthesize sines1;
@synthesize sines2;
@synthesize sines3;

BOOL mode = NO;

- (void)viewDidLoad
{
     [super viewDidLoad];
     // Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
    [self setSines1:nil];
    [self setSine2:nil];
    [self setSines3:nil];
    [self setAngleA:nil];
    [self setAngleB:nil];
    [self setAngleC:nil];
    [self setSideA:nil];
    [self setSideB:nil];
    [self setSideC:nil];
    [self setSine1:nil];
    [self setSine2:nil];
    [self setSine3:nil];
    [self setSegControl:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
    } else {
        return YES;
    }
}

- (IBAction)solve2:(id)sender 
{
    if (mode)
    {
        double aa = [self.sines1.text doubleValue]; 
        double ab = [self.sines2.text doubleValue];
        double ac = 180 - aa - ab;
        double sa = [self.sines3.text doubleValue];
        double sb;
        double sc;

        //convert degrees to radians
        aa = (aa * (M_PI/180));
        ab = (ab * (M_PI/180));
        ac = (ac * (M_PI/180));

        sb = (sa/sin(aa))*sin(ab);
        sc = (sa/sin(aa))*sin(ac);

        self.angleA.text = [NSString stringWithFormat: @"%.2lf", aa];
        self.angleB.text = [NSString stringWithFormat: @"%.2lf", ab];
        self.angleC.text = [NSString stringWithFormat: @"%.2lf", ac];
        self.sideA.text = [NSString stringWithFormat: @"%.2lf", sa];
        self.sideB.text = [NSString stringWithFormat: @"%.2lf", sb];
        self.sideC.text = [NSString stringWithFormat: @"%.2lf", sc];
    }

    if (!mode) 
    {
        double aa = [self.sines1.text doubleValue];
        double ab;
        double ac;
        double sa = [self.sines2.text doubleValue];
        double sb = [self.sines3.text doubleValue];
        double sc;

        aa = (aa * (M_PI/180));

        ab = asin(sb*(sin(aa)/sa));
        ac = 180 - aa - ab;

        ac = (ac * (M_PI/180));

        sc = (sa/sin(aa))*sin(ac);

        self.angleA.text = [NSString stringWithFormat: @"%.2lf", aa];
        self.angleB.text = [NSString stringWithFormat: @"%.2lf", ab];
        self.angleC.text = [NSString stringWithFormat: @"%.2lf", ac];
        self.sideA.text = [NSString stringWithFormat: @"%.2lf", sa];
        self.sideB.text = [NSString stringWithFormat: @"%.2lf", sb];
        self.sideC.text = [NSString stringWithFormat: @"%.2lf", sc];
    }
}

- (IBAction)aassas:(id)sender 
{
    switch (self.segControl.selectedSegmentIndex) {
        case 0:
            self.sine1.text = @"Angle A/n";
            self.sine2.text = @"Angle B/n";
            self.sine3.text = @"Side A/n";
            mode = NO;
            break;

        case 1:
            self.sine1.text = @"Angle A/n";
            self.sine2.text = @"Side A/n";
            self.sine3.text = @"Side B/n";
            mode = YES; 
            break;

        default:
            break;
    }
}
@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T16:15:41.890

此错误的通常原因是在 xib 文件或情节提要的某处，您有一个从某个控件或视图到名为“solve”的 IBOutlet 的链接，但您不再在链接所在的类的代码中定义该属性或变量点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T06:46:58.137

我认为您可以在 Xcode 调试器或 gdb 中获得详细信息，调用堆栈是非常重要的信息。我这样做了，结果发现tableviewcell的标识符是错误的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-26T16:38:23.343

UIViewController 符合 NSKeyValueCoding 协议，因此当为未定义键设置值并且您不覆盖时

`- (void)setValue:(id)value forUndefinedKey:(NSString *)key;`

它会出现一个 NSUndefinedKeyException 异常..

```
[self setTriText1:nil];
[self setTriText2:nil];
[self setLegA:nil];
[self setLegB:nil];
[self setHypotenuse:nil];
[self setAngleA:nil];
[self setAngleB:nil];
[self setButton1:nil]; 
```

可能这里能带来那个异常。你为什么不这样写：

```
self.triText1 = nil;
self.triText2 = nil;
self.legA = nil; 
```

同样对于 sencondViewContrlloer，如果显式使用“设置方法”并编写错误的方法，也会发生类似的异常。

# php - 如何使用 javascript 和 php 实现帮助功能？

> ID：10335255
> 
> 赞同：0
> 
> 时间：2012-04-26T14:12:33.313
> 
> 标签：php, javascript, html

在一个页面（即 mypage.html）上，我显示一个菜单。此菜单的一个按钮将调用上下文帮助。

```
<a href="#" onclick="(helpme())">Help</a> 
```

javascript helpme 函数调用一个 php 模块：

```
function helpme() {document.location="help.php";} 
```

根据上下文，help.php 将在新的浏览器窗口中打开另一个 php 模块的内容：

```
 switch ( $_SESSION['function']  )
    {
        case 'central':
            echo '<script type="text/javascript" language="javascript">window.open("/help/help_central.php","help", "height=200, width=200, top=100, left=500, menubar=0, toolbar=0, location=0, status=0");</script>'; 
            break; 
```

ETC...

不幸的是，这个复杂的解决方案不起作用：新窗口显示正确的文本，但 mypage.html 被替换为 help.php ！您能否提出更正或更简单的方法来实施帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:15:44.973

只需像这样更改`a`标签：

```
<a href="help.php" target="_blank">Help</a> 
```

由于 javascript 函数只是将用户发送到那里，因此不需要与 js 做任何事情。

**编辑**

如果你想要一个弹出窗口，你可以使用这样的东西：

```
<script type="text/javascript">
    function newPopup(url) {
        popupWindow = window.open(url,'popUpWindow','height=700,width=800,left=10,top=10,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no,status=yes');
    }
</script>

<a onClick="newPopup('http://www.mydomain.com/example/help.php');">Help me</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:16:02.267

为什么不只是这样？

```
<a target="_blank" href="help.php?#monster">Help on mosters</a> 
```

# android - 布局内视图的全局或本地 ID？

> ID：10335258
> 
> 赞同：0
> 
> 时间：2012-04-26T14:12:41.647
> 
> 标签：android, android-layout

将 id 分配给 xml 资源中的布局视图时，我通常会执行以下操作：

（示例）contact_info.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/contact_info_name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

这里的 TextView 包含联系人的姓名。使用这样的完整 ID 更好还是仅使用“名称”就足够了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T14:54:30.883

适当的约定是这样的： *从您提供的示例中，文本视图的适当 id 将是：`contactinfo_textview_name`*

 *请注意，它的 NOT 规则。你可以使用任何你觉得舒服的东西！干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:26:30.850

正如我指出的 Hardik4560，最好是具有足够描述性且不要太长的名称。

意识到您的应用程序可以增长很多（谁知道！？），并且可能有一段时间不再知道每个标识符属于哪个布局。

问候！*

# python - 为什么要安装两个 smtpd.py？

> ID：10335259
> 
> 赞同：0
> 
> 时间：2012-04-26T14:12:41.723
> 
> 标签：python

在 Linux 上安装 python 后，smtpd.py 将安装在 /usr/bin 目录下。为什么这个模块在这里存在？/usr/lib/python2.x 目录下的另一个呢？有什么不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:18:44.177

一个 in`/usr/bin`在你的`PATH`，可以通过在 shell 中调用它的文件名来执行。

第二个位于`PYTHONPATH`or引用的库目录中`sys.path`，可以用作 python 脚本中的模块。

如果它们具有相同的内容，它们可能是硬链接或符号链接。

# ruby-on-rails - 在 Rails 应用程序中更改 PostgreSQL 表会禁用触发器

> ID：10335263
> 
> 赞同：2
> 
> 时间：2012-04-26T14:13:07.467
> 
> 标签：ruby-on-rails, postgresql, triggers, rspec, migration

在我的 Rails 3.1.3 应用程序中，我有`subscriptions`表格；必须跟踪此表上的操作，这对于计费至关重要。由于可以通过多种方式（API、控制台、客户端应用程序）访问数据库，因此简单的 ActiveRecord 回调或观察者不足以确保记录表上的所有事务。因此，我在表上创建了一个数据库触发器，该触发器在`subscriptions`任何时候发生变化时都会在“日志”表中插入一条记录。为了做到这一点，我正在使用这样的 Rails 迁移：

```
def up
   execute <<-SQL
     CREATE OR REPLACE FUNCTION FUNCTION_Event_Type() 
     RETURNS TRIGGER 
     AS 
     $TRIGGER_Event_Type$
      BEGIN
        IF (TG_OP = 'DELETE') THEN
              INSERT INTO subscription_log (company_id, product_id, old_package_id, new_package_id, trigger_type, updated_at, created_at)
               SELECT OLD.company_id, OLD.product_id, OLD.package_id, NULL, 'Delete', CURRENT_TIMESTAMP, CURRENT_TIMESTAMP;
              RETURN OLD;
          ELSIF (TG_OP = 'UPDATE') THEN
              INSERT INTO subscription_log (company_id, product_id, old_package_id, new_package_id, trigger_type, updated_at, created_at) 
              SELECT OLD.company_id, OLD.product_id, OLD.package_id, NEW.package_id, 'Update', CURRENT_TIMESTAMP, CURRENT_TIMESTAMP;
              RETURN NEW;
          ELSIF (TG_OP = 'INSERT') THEN
              INSERT INTO subscription_log (company_id, product_id, old_package_id, new_package_id, trigger_type, updated_at, created_at) 
              SELECT NEW.company_id, NEW.product_id, NULL, NEW.package_id, 'Insert', CURRENT_TIMESTAMP, CURRENT_TIMESTAMP;
              RETURN NEW;
          END IF;
        RETURN NULL;
      END;
  $TRIGGER_Event_Type$ 
  LANGUAGE plpgsql;

  CREATE TRIGGER TRIGGER_Event_Type
  AFTER INSERT OR UPDATE OR DELETE ON subscriptions
      FOR EACH ROW EXECUTE PROCEDURE FUNCTION_Event_Type();
 SQL
end 
```

触发器工作正常并根据需要记录。我有 rspec 测试检查记录是否插入到“记录”表中，只要在表上完成某些操作`subscriptions`。但是，我继续开发该应用程序，并且不得不`subscriptions`使用 Rails 迁移向表中添加一列：

```
def change
  add_column :subscriptions, :description, :text
end 
```

运行迁移后，我的测试检查触发器功能如下：

```
 lambda do
    FactoryGirl.create(:subscription)
  end.should change(SubscriptionLog, :count).by(1) 
```

开始失败。

*更新*：添加列后，开发数据库仍然有触发器。运行添加列的迁移后，测试数据库丢失触发器......奇怪

问题：
更改表会杀死触发器吗？如果确实如此，那么确保触发器持续存在的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T18:22:53.017

最后，我想通了。在表中添加一列后`subscriptions`，我跑了**`rake db:test:prepare`**（不要问我为什么）。显然，“转储当前模式，吹走测试数据库，然后从转储中重建测试模式”由于触发器是通过执行 SQL（而不是 rails 助手）创建的，因此它从未反映在模式文件中。因此，解决方案从未重新创建它`rake db:test:prepare`：删除测试数据库并再次运行所有迁移......并且永远不会`rake db:test:prepare`再次运行。希望有人觉得它有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T15:03:13.990

> 更改表会杀死触发器吗？

回答问题：**不**，一般不会。添加列根本不应该与触发器混淆 - 只要它不会间接影响触发器函数内的 SQL 语句或触发器的[`WHEN`条件](http://www.postgresql.org/docs/current/interactive/sql-createtrigger.html)（PostgreSQL 9.0 或更高版本）。

* * *

**如果**您通过删除/重新创建表来添加列，那么当然，您也必须重新创建触发器。触发器函数不是随表删除，而是触发器是。你能检查一下触发器是否还在吗？

* * *

您有`INSERT`没有**目标列表**的命令。这是一种常见的足枪，当基础表稍后更改时容易损坏。除了 ad-hoc SQL 命令，**总是**提供一个目标列表。

代替：

```
INSERT INTO subscription_log
SELECT OLD.company_id, OLD.product_id, OLD.package_id, ... ; 
```

做：

```
插入订阅日志（col1，col2，col3，...）
选择 OLD.company_id, OLD.product_id, OLD.package_id, ... ;

```

[手册中有关 INSERT 的详细信息。](http://www.postgresql.org/docs/current/interactive/sql-insert.html)

# android - 安卓插件

> ID：10335266
> 
> 赞同：2
> 
> 时间：2012-04-26T14:13:12.463
> 
> 标签：android, google-play

我的应用程序的基本版本成本很低。如果用户需要更多功能，需要购买插件。

**问题是：这种方法的最佳解决方案是什么？**

更好地使用包含插件的应用内计费或发布数据包作为普通应用程序有价格？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T14:15:48.877

应用内计费是提供额外功能的推荐方式。没什么好担心的，因为这一切都是通过谷歌播放功能来处理的。否则，您需要您的用户下载一个全新的 apk 文件作为付费的东西。

[Android 开发者网站上的这个](http://developer.android.com/guide/market/billing/index.html)页面提供了一套关于如何实现这一点的很好的说明。

# c - valgrind在程序启动前出现奇怪的条件跳转消息

> ID：10335268
> 
> 赞同：0
> 
> 时间：2012-04-26T14:13:18.907
> 
> 标签：c, linux, valgrind

在我的程序开始之前，我收到了未初始化的值消息，这些消息引用了不在我的程序中的函数调用。我对为什么收到这些消息以及如何清理它们感到困惑？

```
==24266== Conditional jump or move depends on uninitialised value(s)
==24266==    at 0x809098A: __linkin_atfork (in /home/mbarry/workspace/datapup/src/plugin)
==24266==    by 0x80919EB: _dl_non_dynamic_init (in /home/mbarry/workspace/datapup/src/plugin)
==24266==    by 0x80921B1: __libc_init_first (in /home/mbarry/workspace/datapup/src/plugin)
==24266==    by 0x805F60B: (below main) (in /home/mbarry/workspace/datapup/src/plugin)
==24266==  Uninitialised value was created
==24266==    at 0x8091662: _dl_sysinfo_int80 (in /home/mbarry/workspace/datapup/src/plugin)
==24266==    by 0x80BE31F: brk (in /home/mbarry/workspace/datapup/src/plugin)
==24266==    by 0x808DE99: sbrk (in /home/mbarry/workspace/datapup/src/plugin)
==24266==    by 0x805F96B: __libc_setup_tls (in /home/mbarry/workspace/datapup/src/plugin)
==24266==    by 0x805FB66: __pthread_initialize_minimal (in /home/mbarry/workspace/datapup/src/plugin)
==24266==    by 0x805F5A3: (below main) (in /home/mbarry/workspace/datapup/src/plugin) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T18:08:38.903

在我的 gcc makefile 中错误地使用 -D_THREAD_SAFE -D_REENTRANT -static 标志会导致内存问题。

# mysql - 根据民意调查响应确定用户的“独特性”的大 O 是什么？

> ID：10335269
> 
> 赞同：2
> 
> 时间：2012-04-26T14:13:25.737
> 
> 标签：mysql, database, algorithm, big-o, time-complexity

我有一个用户对是/否投票问题的回答的 MySQL 表。看起来有点像这样：

```
| user_id    | poll_id    | response
| 111        | 1         | 'yes'
| 111        | 2         | 'no'
| 111        | 3         | 'no'
| 222        | 1         | 'yes'
| 222        | 2         | 'yes'
| 222        | 3         | 'yes'
| 333        | 1         | 'no'
| 333        | 2         | 'no'
| 333        | 3         | 'no' 
```

对于给定的 user_id，我想计算他们的响应与每个其他用户的响应之间的相似性。因此，用户 111 和用户 222 的相似度为 0.333（因为他们有 3 个相同的响应中的 1 个），用户 111 和用户 333 的相似度为 0.666（因为他们有 3 个相同的响应中的 2 个）。

然后，我想确定给定用户的相似度中值，并将其与所有其他用户的相似度中值进行排名，以衡量该用户的“唯一性”。

这种操作的时间复杂度是多少？

*（注意：目前，我的响应表中大约有 25,000 个 user_ids、400 个 poll_ids 和大约 500,000 行。显然，并非所有用户都对每个投票问题做出响应。这会影响时间复杂度计算吗？）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T14:35:07.303

对于每个用户，您必须计算与所有其他用户的相似度；那是**n ² - n**，或者实际上是**n ²**。但是您还必须对这些结果进行排序以找到中位数。因此，假设您的排序是**n log n**，主要术语将是**n ² log n**。

如果您使用均值而不是中位数，则可以摆脱排序；那么时间复杂度将是**O(n ² )**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:45:42.913

让我们让`n`= 用户数、`p`= 投票问题数和`r`= 响应表中的总行数。（在你的情况下`n = 25,000`，，，`p = 400`。`r = 500,000`）

对于单个用户，数据库将遍历所有响应，每个响应都进行哈希查找以确定它是否与该用户的响应之一匹配。如果确实如此，则需要`O(1)`时间来跟踪运行记录。然后，它会接受该用户的投票问题并进行简单的求和。只要响应的数量远大于投票问题的数量（在您的情况下），这取决于通过响应的时间。所以每个用户都需要时间`O(r)`。你有`n`用户，所以总时间是`O(n*r)`.

# ios - 关于“播放”动作，是否可以在不实际进入画布的情况下模拟它？

> ID：10335276
> 
> 赞同：0
> 
> 时间：2012-04-26T14:13:49.017
> 
> 标签：ios, facebook, facebook-graph-api

我成功地将分数发送到 Facebook。

我的问题是有什么方法可以发送播放动作。

当有人进入 web 中的画布时，facebook 会发送一个正在播放的动作

我可以在 iOS 上做到这一点吗？也许通过 post/get 发送“播放”动作（如何？从未发送过动作，我不知道如何）

谢谢。阿米尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T23:29:29.353

不，`games.playing`故事是由 Facebook 根据画布活动自动创建的，无法手动创建

# php - 长文本字段上准备好的 mysqli 选择语句返回为空

> ID：10335278
> 
> 赞同：7
> 
> 时间：2012-04-26T14:13:57.363
> 
> 标签：php, mysqli, prepared-statement, longtext

我有一个运行良好的数据库查询函数——除了我遇到了一个显然是 mysqli 准备好的语句和长文本字段的已知问题。发生的情况是，即使通过 phpMyAdmin 运行查询工作正常，longtext 字段始终为空。根据[http://www.workinginboxershorts.com/php-mysqli-returns-empty-variables-from-longtext-column](http://www.workinginboxershorts.com/php-mysqli-returns-empty-variables-from-longtext-column)，将数据类型切换为文本可以解决问题。但是，在我的情况下，我真的更愿意将字段保留为长文本，因为我可以预见到额外空间会很有价值的时候。

我正在使用参数化查询，这显然是问题所在。这是我的功能：

```
// Bind results to an array
// $stmt = sql query, $out = array to be returned
function stmt_bind_assoc (&$stmt, &$out) {
  $data = mysqli_stmt_result_metadata($stmt);
  $fields = array();
  $out = array();

  $fields[0] = $stmt;
  $count = 1;

  while($field = mysqli_fetch_field($data)) {
    $fields[$count] = &$out[$field->name];
    $count++;
  }    
call_user_func_array('mysqli_stmt_bind_result', $fields);
}

// DB Query
// $query = SQL query, $params = array of parameters, $rs = whether or not a resultset is expected, $newid = whether or not to retrieve the new ID value;
// $onedimensionkey = key required to convert array into simple one dimensional array
function db_query($query, $params, $rs = true, $newid = false, $onedimensionkey = false) {
  $link = mysqli_connect(DB_SERVER, DB_USER, DB_PASS, DB_NAME);
  if (!$link) { 
    print 'Error connecting to MySQL Server. Errorcode: ' . mysqli_connect_error(); 
    exit; 
  }

  // Prepare the query and split the parameters array into bound values
  if ($sql_stmt = mysqli_prepare($link, $query)) {
    if ($params) {
      $types = '';
      $new_params = array();
      $params_ref = array();
      // Split the params array into types string and parameters sub-array
      foreach ($params as $param) {
        $types .= $param['type'];
        $new_params[] = $param['value'];
      }
      // Cycle the new parameters array to make it an array by reference
      foreach ($new_params as $key => $parameter) {
        $params_ref[] = &$new_params[$key];
      }
      call_user_func_array('mysqli_stmt_bind_param', array_merge(array($sql_stmt, $types), $params_ref));
    }
  }
  else {
    print 'Error: ' . mysqli_error($link);
    exit();
  }

  // Execute the query
  mysqli_stmt_execute($sql_stmt);

  // If there are results to retrive, do so
  if ($rs) {
    $results = array();
    $rows = array();
    $row = array();
    stmt_bind_assoc($sql_stmt, $results);
    while (mysqli_stmt_fetch($sql_stmt)) {
      foreach ($results as $key => $value) {
        $row[$key] = $value;
      }
      $rows[] = $row;
    }
    if ($onedimensionkey) {
      $i = 0;
      foreach ($rows as $row) {
        $simplearray[$i] = $row[$onedimensionkey];
        $i++;
      }
      return $simplearray;
    }
    else {
      return $rows;
    }
  }
  // If there are no results but we need the new ID, return it
  elseif ($newid) {
    return mysqli_insert_id($link);
  }

  // Close objects
  mysqli_stmt_close($sql_stmt);
  mysqli_close($link);
} 
```

根据我发布的链接，有一个解决方法涉及完成事情的顺序，但要么我以与示例完全不同的方式处理我的查询，要么我根本不理解重要的事情。

感谢任何能提供帮助的人！

编辑：感谢 Corina 的回答，我已经解决了这个问题——对于遇到问题的其他人，您只需在 mysql_stmt_execute 命令之后添加以下内容：

```
// Execute the query
mysqli_stmt_execute($sql_stmt);

// Store results
mysqli_stmt_store_result($sql_stmt); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-24T17:10:28.203

我设法通过在绑定数据之前调用[mysqli_stmt_store_result来解决同样的问题。](http://php.net/manual/en/mysqli-stmt.store-result.php)

有人遇到同样的问题，并在[php.net 网站](http://www.php.net/manual/en/mysqli-stmt.bind-result.php#101543)上分享了答案：

> 显然，如果您有 longtext，则必须在使用 bind_result 之前调用 store_result。
> 
> [http://bugs.php.net/bug.php?id=47928](http://bugs.php.net/bug.php?id=47928)

# magento - Magento - 以编程方式保存的产品在后端不可见

> ID：10335279
> 
> 赞同：3
> 
> 时间：2012-04-26T14:13:58.220
> 
> 标签：magento

我尝试在 Magento 1.5.1 上使用以下代码创建产品。产品已保存在数据库中，但未出现在后端产品网格中。如果我调用产品视图 url，则某些字段未填写，例如：名称、描述（参见：NOK）。

```
$product = Mage::getModel('catalog/product');

$product->setSku("ABC123") // OK
    ->setName("Type 7 Widget") // NOK
    ->setDescription("This widget will give you years of trouble-free widgeting.") // NOK
    ->setShortDescription("High-end widget.") // NOK
    ->setPrice(70.50) // OK
    ->setTypeId('simple') // OK
    ->setAttributeSetId('14') // need to look this up // OK
    ->setCategoryIds("3,7") // need to look these up // OK
    ->setWeight(1.0) // OK
    ->setTaxClassId(1) //taxable goods // ?
    ->setVisibility(4) // catalog, search // NOK
    ->setStatus(Mage_Catalog_Model_Product_Status::STATUS_ENABLED); // enabled // NOK

$product->setWebsiteIds(array(Mage::app()->getStore(true)->getWebsite()->getId()));

$product->save(); 
```

这是产品，保存在数据库中`print_r($product->debug());`

```
[type_id] => simple
[sku] => ABC123
[has_options] => 0
[required_options] => 0
[created_at] => 2012-04-26 12:57:22
[updated_at] => 2012-04-26 12:57:22
[weight] => 1
[url_path] => .html
[price] => 70.5000
[enable_googlecheckout] => 1
[name] => Type 7 Widget
[meta_title] => Type 7 Widget
[meta_description] => Type 7 Widget, Fotos
[url_key] => type-7-widget
[options_container] => container2
[delivery_time] => 2-3 Tage
[generate_meta] => 0
[status] => 1
[tax_class_id] => 1
[visibility] => 4
[description] => This widget will give you years of trouble-free widgeting.
[short_description] => High-end widget.
[meta_keyword] => Type 7 Widget, Fotos
[media_gallery] => Array
    (
        [images] => Array
            (
            )

        [values] => Array
            (
            )

    )

[tier_price] => Array
    (
    )

[tier_price_changed] => 0
[stock_item (Mage_CatalogInventory_Model_Stock_Item)] => Array
    (
        [product_id] => 158
        [product_name] => Type 7 Widget
        [store_id] => 1
        [product_type_id] => simple
        [product_status_changed] => 1
    )

[is_in_stock] => 1
[is_salable] => 1
) 
```

任何帮助都会很棒！

* * *

# 解决方案

使用以下代码指定您要为其保存产品的商店：

```
Mage::app()->setCurrentStore(Mage::getModel('core/store')->load(Mage_Core_Model_App::ADMIN_STORE_ID)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T15:14:39.250

不要忘记在多商店设置的情况下设置网站。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T14:17:53.353

你不保存产品。

添加：

```
try{
    $product->save();
} catch (Exception $e) {
    echo $e->getMessage();
} 
```

# google-chrome-extension - 在 Chrome 扩展中添加 NaCl

> ID：10335284
> 
> 赞同：17
> 
> 时间：2012-04-26T14:14:22.180
> 
> 标签：google-chrome-extension, google-nativeclient

我的问题很简单，我尝试创建一个调用 NaCl 模块的 chrome 扩展。我的按钮和不同的文件似乎没问题，我在 C++ 中非常简单的代码返回一个 PostMessage hello World。但是，当我尝试它时，它不起作用。在 Chrome 扩展程序中包含 NaCl 模块时，我是否还没有做一些具体的事情？我必须说我有点失去希望了。

这是我的“background.html”：

```
<body>
  <script src="background.js"></script>
  <div id="listener">
    <embed name="nacl_module"
      id="nacl_correction"
      src="nacl_correction.nmf"
      type="application/x-nacl" />
  </div>
  <script >
   document.getElementById('listener').addEventListener('load', moduleDidLoad, true);
  </script>
</body> 
```

这是我的“background.js”：

```
var NaclCorrectionModule = null;  // Global application object.

function moduleDidLoad() {
    NaclCorrectionModule = document.getElementById('nacl_correction');
    //alert( NaclCorrectionModule);
    if (NaclCorrectionModule == null) {
        alert('Out');    
    }
    else {
        alert (NaclCorrectionModule);       
    }
    NaclCorrectionModule.addEventListener('message', handleMessage, false);
} 
function handleMessage(message_event) {
   alert(message_event.data);
}
chrome.browserAction.onClicked.addListener(moduleDidLoad); 
```

最后，我的“Manifest.json”：

```
{
  "name": "Correction de Cordial sous Chrome",
  "version": "1.0",
  "background_page" :"background.html",
  "description": "Intégration d'une extension Cordial pour la correction sous Chrome",
  "permissions": [
     "tabs", "http://*/*"
  ],
  "browser_action": {
  "default_icon": "corriger_big.png",  // Icône de l'extension
  "default_title": "Correction de Cordial"  // Titre affiche sur le bouton        
  }
} 
```

如果有人有任何想法，我将不胜感激。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-16T10:50:59.307

经过一番寻找，我发现我忘记了一些东西。在我的 background.js 中，我没有向 NaCl 发送任何消息，所以它无法工作。

我只需要添加 1 行：

```
NaclCorrectionModule.postMessage(''); 
```

感谢您阅读我的问题，我希望这可以帮助别人！

# objective-c - C 语言：.mm 扩展名代表什么？

> ID：10335285
> 
> 赞同：69
> 
> 时间：2012-04-26T14:14:27.317
> 
> 标签：objective-c, objective-c++

带有一些 Objective-C 的项目有一些 C 类，其实现文件具有**.mm**扩展名。

```
file.h
file.mm 
```

**.mm**是什么意思？不应该只是**.m**吗？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-04-26T14:19:32.700

扩展`.mm`是`C++`Objective-C编译器期望的编译单元的扩展，而`.m`扩展是`C`Objective-C编译器期望的编译单元的扩展。

这是假设您不使用编译器标志来覆盖文件扩展名，[就像这位先生所做的那样](http://sseyod.blogspot.com/2009/02/objective-c.html)。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-04-26T14:17:13.490

目标 C++，混合了 C++ 和目标 C。 [http://en.wikipedia.org/wiki/Objective-C#Objective-C.2B.2B](http://en.wikipedia.org/wiki/Objective-C#Objective-C.2B.2B)

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-04-26T14:16:38.127

.mm 文件类似于 Objective-C 编译器的 .cpp 文件。它们激活 C++ 编译器而不是 C 编译器。

以下关于性能的问题提供了额外的有用信息：

[Objective-C，.m / .mm 的性能差异？](https://stackoverflow.com/questions/2317868/objective-c-m-mm-performance-difference)

# java - 共享侦听器并传入 Activity 实例

> ID：10335286
> 
> 赞同：1
> 
> 时间：2012-04-26T14:14:27.830
> 
> 标签：java, android

我`OnItemClickListener`定义了一个实现，我在整个应用程序中的多个活动和片段中使用它。我目前正在`Activity`构造函数中传递，所以我可以调用`startActivity`而不会出错。我不确定这是否是适当的方法。

有什么我做错了吗？

```
public class EventSelectedListener implements AdapterView.OnItemClickListener {

    private Activity mActivity;
    private Context mContext;

    public EventSelectedListener(Activity activity) {
        mActivity = activity;
        mContext = mActivity.getApplicationContext();
    }

    @Override
    public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
         Intent intent = new Intent();             
         intent.setClass(mContext, MediaPlayerActivity.class);
         mActivity.startActivity(intent);       
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T14:20:40.643

应用程序的上下文和活动的上下文不是一回事。在您的代码中，您应该使用 Activity 的上下文。

改变这个：

```
mContext = mActivity.getApplicationContext(); 
```

对此：

```
mContext = mActivity; 
```

**或者**

或者，您甚至不必费心保留单独的上下文对象，因为您的**mActivity**已经引用了上下文。因此，只需在需要引用上下文的地方使用*mActivity ：*

```
public class EventSelectedListener implements AdapterView.OnItemClickListener {

    private Activity mActivity;

    public EventSelectedListener(Activity activity) {
        mActivity = activity;
    }

    @Override
    public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
         Intent intent = new Intent();             
         intent.setClass(mActivity, MediaPlayerActivity.class);
         mActivity.startActivity(intent);       
    }
} 
```

# asp.net-mvc - mvc实体框架模型：一个主键和另外2个键问题

> ID：10335287
> 
> 赞同：0
> 
> 时间：2012-04-26T14:14:33.407
> 
> 标签：asp.net-mvc, entity-framework, entity-framework-4, foreign-keys, composite-key

所以我有以下型号

```
public class User
{
    public int Id { get; set; }
    public string Name { get; set; }
 }

public class Appointment
{
    public int Id { get; set; }
    public string Name{ get; set; }
} 
```

我希望将它们分配给另一个具有单独主键的表，如下所示

```
public class UserAppointment
{
    public int Id { get; set; }
    public int UserId { get; set; }
    public int AppointmentId { get; set; }

    public virtual Appointment Appointment {get;set;}
    public virtual User User {get;set;}
 } 
```

我想要的是 Id 是一个键（唯一、自动生成等），同时将强制 UserId 和 AppointmentId 也具有唯一的组合。

```
eg
this is what i want
  Id         UserId          AppointmentId
  1            1                  2
  2            1                  3

and not this
  Id         UserId          AppointmentId
  1            1                  2
  2            1                  2
  3            1                  2 
```

目前我在我的上下文中做了一些模型构建器语句来配置我的键

```
modelbuilder.Entity<UserApointment>()
  .HasRequired(e => e.User)
  .HasMany(u => u.Appointment)
  .HasForeignKey(e => e.UserId);

modelbuilder.Entity<UserApointment>()
  .HasRequired(e => e.Appointment)
  .HasMany(u => u.Users)
  .HasForeignKey(e => e.AppointmentId); 
```

但它仍然可以让我插入具有相似用户和约会 ID 的记录。

非常感谢任何有关如何处理此问题的建议！谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:24:50.233

您可以通过简单地在 UserAppointment 表上创建唯一约束来解决数据库级别的问题。

```
ALTER TABLE UserAppointments
ADD CONSTRAINT uc_UserAppointment UNIQUE (UserID,AppointmentID) 
```

在实体框架（我不熟悉）上似乎是这样完成的：

```
modelbuilder.Entity<UserApointment>().HasKey(x=> new { x.UserId,x.AppointmentId}); 
```

在这里阅读更多[。](http://msdn.microsoft.com/en-us/library/gg671266%28v=vs.103%29.aspx)，特别是备注：

> 如果主键由多个属性组成，则指定包括属性的匿名类型。例如，在 C# 中 t => new { t.Id1, t.Id2 }

**更新**

可能唯一索引更适合您的目的：

```
CREATE UNIQUE INDEX IX_UserAppointment
ON UserAppointment (UserId, AppointmentId) 
```

此唯一索引将确保表中永远不会存在 UserId 和 AppointmentId 的重复组合，并且还将加快您的查询速度。

# php - 在 PHP 中访问对象成员

> ID：10335299
> 
> 赞同：3
> 
> 时间：2012-04-26T14:15:36.650
> 
> 标签：php, object

我在 PHP 中调用 WCF 服务，它返回给我这个东西：（我调用的服务返回一个 C# 结构）

```
object(stdClass)#70 (1) {
  ["SiteInterop_CreateContactAndOpportunityResult"]=>
    object(stdClass)#149 (5) {
      ["result"]=>
        bool(true)
      ["strAccountExec"]=>
        NULL
      ["strAccountId"]=>
        string(36) "bd346671-88ca-4966-971a-9dd499c7a689"
      ["strContactId"]=>
        string(36) "06a8808d-ed66-42f9-a821-00358213bb94"
      ["strOpportunityId"]=>
        string(36) "d4845fd0-18fb-4a40-8424-904866cb471e"
    }
} 
```

问题是，我如何访问这些值？这些值是真正的布尔值和三个 guid。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T14:20:15.150

要获得`result`

```
$var->SiteInterop_CreateContactAndOpportunityResult->result; 
```

获取`guid`s

```
$var->SiteInterop_CreateContactAndOpportunityResult->strAccountId
$var->SiteInterop_CreateContactAndOpportunityResult->strContactId
$var->SiteInterop_CreateContactAndOpportunityResult->strOpportunityId 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T14:22:16.453

制作链接以方便将来使用，

```
$oResult = &$oStruct->SiteInterop_CreateContactAndOpportunityResult; 
```

然后去

```
echo $oResult->strAccountId; 
```

获取 strAccountId 值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T14:20:07.000

你可以做（​​假设`$returnedObject`是返回的对象）

```
$strOpportunityId = $returnedObject
                                ->SiteInterop_CreateContactAndOpportunityResult
                                ->strOpportunityId 
```

# c - 如何使用 sscanf 返回参数

> ID：10335303
> 
> 赞同：0
> 
> 时间：2012-04-26T14:15:47.020
> 
> 标签：c

我当时正在从具有以下格式的文本文件中读取一行：2.34 4.68 5.98。我想将这些浮点值存储在一个数组中，以便以后可以使用每个参数，但是一旦我使用 sscanf 并尝试打印参数，我得到 0。知道问题出在哪里。谢谢你。

```
 char* line[2000];
    char* State[2000];
    sscanf(line[12],"%f", &State[12]).
    printf("\n state 1: %2.3f", &State[0]);// this suppose to print 2.34 but it prints 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T14:19:50.987

您可以一次扫描它们：

```
float state[3];
if(sscanf(line[12], "%f %f %f", &state[0],
      &state[1], &state[2]) != 3) {
  ...
} else
  printf("\n state1: %f, state2: %f, state3:%f",
      state[0], state[1], state[2]);
} 
```

目前，您正在扫描到一个地方 ( `State[12]`) 并期望将值存储在其他地方 ( `State[0]`)。

你又犯了几个错误：

*   `char *`当您应该存储到数组中时存储到数组`float`中
*   `printf`在预期接收实际值时使用指针
*   用于`.`结束语句...？不确定这是否是一个错字

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T14:26:58.823

```
sscanf(line[12],"%f", &State[12]). 
```

好的。您因以一种新的方式（至少对我而言）误解了数组在 c 中的工作方式而获奖。

1.  在这两种情况下，您几乎肯定都不想要`[12]`。

    数组的名称（`line`或`State`）可以自动转换为`char*`指向数组开头的 a。所以

    ```
    sscanf(line,"%f", ...); 
    ```

    扫描`line`. 位置上`line[12]`的**单个字符**如何`(*line)+12`。

2.  您需要 a`float`将结果放入，*或者*您需要将格式说明符从 更改`%f`为`%s`。你永远不应该把结果 a`%f`变成 a `char*`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T14:23:19.370

您将数字放在表的第 12 格中；那很奇怪。

直接使用 fscanf 不是更容易吗？

```
FILE *fp = fopen(fileName);
float tabNumbers[3] = {0};

if (fp) {
    for (int i = 0; i < 3; ++i)
        fscanf(fp, "%f", &tabNumbers[i]);
    fclose(fp);
} 
```

# delphi - TDateTimePicker 的样式属性

> ID：10335310
> 
> 赞同：8
> 
> 时间：2012-04-26T14:16:09.430
> 
> 标签：delphi, delphi-xe2, vcl-styles

TDateTime 选择器是一个下拉列表替换为日历的组合框。我使用 XE2 VCL 样式并且更改样式不会影响 TDateTimePicker 颜色和字体颜色。我已经用这个[问题](https://stackoverflow.com/questions/10089189/tmonthcalendar-delphi-styles-delphi-xe2)更改了日历样式，但**ComboBox**的解决方案不合适，知道吗？现在我计划继承一个 TComboBox 用于 TMonthCalendar 但我会知道是否有人有更好的解决方案。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-26T17:16:56.917

为了使用该`CalColors`属性的解决方法，您必须在 TDateTimePicker 组件的下拉窗口中禁用 Windows 主题，因为您必须使用 [`DTM_GETMONTHCAL`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761765%28v=vs.85%29.aspx)消息来获取窗口句柄。

检查此示例应用程序

```
unit Unit15;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.ImgList, Vcl.StdCtrls, Vcl.ComCtrls;

type
  TForm15 = class(TForm)
    DateTimePicker1: TDateTimePicker;
    procedure DateTimePicker1DropDown(Sender: TObject);
    procedure FormCreate(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form15: TForm15;

implementation

{$R *.dfm}

uses
  Winapi.CommCtrl,
  Vcl.Styles,
  Vcl.Themes,
  uxTheme;

Procedure SetVclStylesColorsCalendar( DateTimePicker: TDateTimePicker);
Var
  LTextColor, LBackColor : TColor;
begin
   uxTheme.SetWindowTheme(DateTimePicker.Handle, '', '');//disable themes in the calendar
   //get the vcl styles colors
   LTextColor:=StyleServices.GetSystemColor(clWindowText);
   LBackColor:=StyleServices.GetSystemColor(clWindow);

   DateTimePicker.Color:=LBackColor;
   //set the colors of the calendar
   DateTimePicker.CalColors.BackColor:=LBackColor;
   DateTimePicker.CalColors.MonthBackColor:=LBackColor;
   DateTimePicker.CalColors.TextColor:=LTextColor;
   DateTimePicker.CalColors.TitleBackColor:=LBackColor;
   DateTimePicker.CalColors.TitleTextColor:=LTextColor;
   DateTimePicker.CalColors.TrailingTextColor:=LTextColor;
end;

procedure TForm15.DateTimePicker1DropDown(Sender: TObject);
var
  hwnd: WinAPi.Windows.HWND;
begin
  hwnd := SendMessage(TDateTimePicker(Sender).Handle, DTM_GETMONTHCAL, 0,0);
  uxTheme.SetWindowTheme(hwnd, '', '');//disable themes in the drop down window
end;

procedure TForm15.FormCreate(Sender: TObject);
begin
  SetVclStylesColorsCalendar( DateTimePicker1);
end;

end. 
```

![在此处输入图像描述](../Images/3b217528035462e2247c5b5f33f0ebf5.png)

# 更新 1

更改 TDateTimePicker 的“组合框”的背景颜色是一个受 windows 本身限制的任务，因为在其他因素之间

1.  此控件没有所有者绘制的容量，
2.  如果您尝试使用该 [`SetBkColor`](http://msdn.microsoft.com/en-us/library/dd162964%28v=VS.85%29.aspx)功能在此控件中没有效果，因为该[`WM_CTLCOLOREDIT`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761691%28v=vs.85%29.aspx)消息未由该控件处理。

所以一个可能的解决方案是拦截`WM_PAINT`和`WM_ERASEBKGND`消息并编写自己的代码来绘制控件。当您使用 Vcl 样式时，您可以使用样式挂钩来处理这些消息。

检查此代码（仅作为概念证明）

```
uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.ImgList, Vcl.StdCtrls, Vcl.ComCtrls;

type
  TForm15 = class(TForm)
    DateTimePicker1: TDateTimePicker;
    DateTimePicker2: TDateTimePicker;
    procedure DateTimePicker1DropDown(Sender: TObject);
    procedure FormCreate(Sender: TObject);
  private
    { Private declarations }
  end;

var
  Form15: TForm15;

implementation

{$R *.dfm}

uses
  Winapi.CommCtrl,
  Vcl.Styles,
  Vcl.Themes,
  Winapi.uxTheme;

type
 TDateTimePickerStyleHookFix= class(TDateTimePickerStyleHook)
 private
    procedure WMPaint(var Message: TMessage); message WM_PAINT;
    procedure PaintBackground(Canvas: TCanvas); override;
 public
    constructor Create(AControl: TWinControl); override;
 end;

 TDateTimePickerStyleHookHelper = class helper for TDateTimePickerStyleHook
 public
    function GetButtonRect_: TRect;
 end;

Procedure SetVclStylesColorsCalendar( DateTimePicker: TDateTimePicker);
Var
  LTextColor, LBackColor : TColor;
begin
   Winapi.uxTheme.SetWindowTheme(DateTimePicker.Handle, '', '');//disable themes in the calendar
   //get the vcl styles colors
   LTextColor:=StyleServices.GetSystemColor(clWindowText);
   LBackColor:=StyleServices.GetSystemColor(clWindow);

   DateTimePicker.Color:=LBackColor;
   //set the colors of the calendar
   DateTimePicker.CalColors.BackColor:=LBackColor;
   DateTimePicker.CalColors.MonthBackColor:=LBackColor;
   DateTimePicker.CalColors.TextColor:=LTextColor;
   DateTimePicker.CalColors.TitleBackColor:=LBackColor;
   DateTimePicker.CalColors.TitleTextColor:=LTextColor;
   DateTimePicker.CalColors.TrailingTextColor:=LTextColor;
end;

procedure TForm15.DateTimePicker1DropDown(Sender: TObject);
var
  hwnd: WinAPi.Windows.HWND;
begin
  hwnd := SendMessage(TDateTimePicker(Sender).Handle, DTM_GETMONTHCAL, 0,0);
  Winapi.uxTheme.SetWindowTheme(hwnd, '', '');//disable themes in the drop down window
end;

procedure TForm15.FormCreate(Sender: TObject);
begin
  //set the colors for the TDateTimePicker
  SetVclStylesColorsCalendar( DateTimePicker1);
  SetVclStylesColorsCalendar( DateTimePicker2);
end;

{ TDateTimePickerStyleHookHelper }
function TDateTimePickerStyleHookHelper.GetButtonRect_: TRect;
begin
 Result:=Self.GetButtonRect;
end;

{ TDateTimePickerStyleHookFix }
constructor TDateTimePickerStyleHookFix.Create(AControl: TWinControl);
begin
  inherited;
  OverrideEraseBkgnd:=True;//this indicates which this style hook will call the PaintBackground method when the WM_ERASEBKGND message is sent.
end;

procedure TDateTimePickerStyleHookFix.PaintBackground(Canvas: TCanvas);
begin
  //use the proper style color to paint the background
  Canvas.Brush.Color := StyleServices.GetStyleColor(scEdit);
  Canvas.FillRect(Control.ClientRect);
end;

procedure TDateTimePickerStyleHookFix.WMPaint(var Message: TMessage);
var
  DC: HDC;
  LCanvas: TCanvas;
  LPaintStruct: TPaintStruct;
  LRect: TRect;
  LDetails: TThemedElementDetails;
  sDateTime  : string;
begin
  DC := Message.WParam;
  LCanvas := TCanvas.Create;
  try
    if DC <> 0 then
      LCanvas.Handle := DC
    else
      LCanvas.Handle := BeginPaint(Control.Handle, LPaintStruct);
    if TStyleManager.SystemStyle.Enabled then
    begin
      PaintNC(LCanvas);
      Paint(LCanvas);
    end;
    if DateMode = dmUpDown then
      LRect := Rect(2, 2, Control.Width - 2, Control.Height - 2)
    else
      LRect := Rect(2, 2, GetButtonRect_.Left, Control.Height - 2);
    if ShowCheckBox then LRect.Left := LRect.Height + 2;
    IntersectClipRect(LCanvas.Handle, LRect.Left, LRect.Top, LRect.Right, LRect.Bottom);
    Message.wParam := WPARAM(LCanvas.Handle);

    //only works for DateFormat = dfShort
    case TDateTimePicker(Control).Kind of
     dtkDate : sDateTime:=DateToStr(TDateTimePicker(Control).DateTime);
     dtkTime : sDateTime:=TimeToStr(TDateTimePicker(Control).DateTime);
    end;

    //draw the current date/time value
    LDetails := StyleServices.GetElementDetails(teEditTextNormal);
    DrawControlText(LCanvas, LDetails, sDateTime, LRect, DT_VCENTER or DT_LEFT);

    if not TStyleManager.SystemStyle.Enabled then
      Paint(LCanvas);
    Message.WParam := DC;
    if DC = 0 then
      EndPaint(Control.Handle, LPaintStruct);
  finally
    LCanvas.Handle := 0;
    LCanvas.Free;
  end;
  Handled := True;
end;

initialization
  TStyleManager.Engine.RegisterStyleHook(TDateTimePicker, TDateTimePickerStyleHookFix);

end. 
```

注意：此样式挂钩不会在 TDateTimePicker 的内部文本控件（组合框）中绘制焦点（选定）元素，我让这个任务为您完成。

![在此处输入图像描述](../Images/4337644c324967960a13b0dd8ec0c7e2.png)

# 更新 2

我刚刚编写了一个 vcl 样式挂钩，其中包含将 vcl 样式正确应用于`TDateTimePicker`组件的所有逻辑，而不使用表单的 OnDropDown 事件或 OnCreate 事件。[您可以在此处](http://code.google.com/p/vcl-styles-utils/source/browse/trunk/Common/Vcl.Styles.DateTimePickers.pas)找到 vcl 样式挂钩（作为[vcl 样式实用程序](http://code.google.com/p/vcl-styles-utils/)项目的一部分）

要使用它，您必须将[Vcl.Styles.DateTimePickers](http://code.google.com/p/vcl-styles-utils/source/browse/trunk/Common/Vcl.Styles.DateTimePickers.pas)单元添加到您的项目中并以这种方式注册钩子。

```
 TStyleManager.Engine.RegisterStyleHook(TDateTimePicker, TDateTimePickerStyleHookFix); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T17:15:23.087

对于日历本身...基于您的其他问题...

```
procedure SetVclStylesMonthCalColors( calColors: TMonthCalColors);
var
  LTextColor, LBackColor : TColor;
begin
   //get the vcl styles colors
   LTextColor:=StyleServices.GetSystemColor(clWindowText);
   LBackColor:=StyleServices.GetSystemColor(clWindow);

   //set the colors of the calendar
   calColors.BackColor:=LBackColor;
   calColors.MonthBackColor:=LBackColor;
   calColors.TextColor:=LTextColor;
   calColors.TitleBackColor:=LBackColor;
   calColors.TitleTextColor:=LTextColor;
   calColors.TrailingTextColor:=LTextColor;
end;

Procedure SetVclStylesColorsCalendar( MonthCalendar: TMonthCalendar);
Var
  LTextColor, LBackColor : TColor;
begin
   uxTheme.SetWindowTheme(MonthCalendar.Handle, '', '');//disable themes in the calendar
   MonthCalendar.AutoSize:=True;//remove border

   SetVclStylesMonthCalColors(MonthCalendar.CalColors);
end;

procedure TForm1.dtp1DropDown(Sender: TObject);
var
  rec: TRect;
begin
  uxTheme.SetWindowTheme(DateTime_GetMonthCal(dtp1.Handle), '', '');
  MonthCal_GetMinReqRect(DateTime_GetMonthCal(dtp1.Handle), rec);
  SetWindowPos(GetParent(DateTime_GetMonthCal(dtp1.Handle)), 0, rec.Left, rec.Top, rec.Width, rec.Height,0);
  SetWindowPos(DateTime_GetMonthCal(dtp1.Handle), 0, rec.Left, rec.Top, rec.Width, rec.Height,0);
  SetVclStylesMonthCalColors(dtp1.CalColors);
end; 
```

# bash - 在 bash 脚本/命令中找出用户名的最佳方法是什么？

> ID：10335311
> 
> 赞同：1
> 
> 时间：2012-04-26T14:16:10.493
> 
> 标签：bash

到目前为止，我已经在脚本、别名和 shell 中使用了类似的东西：

```
qstat -u $USER 
```

现在我发现既不是`$USER`变量也不`$USERNAME`是bash内置的。虽然`$UID`和`$EUID`是。

我当然可以使用`$(whoami)`或类似的东西。有很多方法可以找出当前进程的用户名。但是，其中最好、最便携和最短的一个是什么，为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T14:21:07.517

[whoami](http://www.manpagez.com/man/1/whoami/)看起来已被弃用。的建议`id -un`呢？

> whoami 实用程序已被 id(1) 实用程序淘汰，相当于“id -un”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T14:19:04.357

通常，`$LOGNAME`用当前用户的名称定义。

# postgresql - 数据库关联实体和索引

> ID：10335312
> 
> 赞同：2
> 
> 时间：2012-04-26T14:16:20.307
> 
> 标签：postgresql, database-design

这是一种一般的数据库设计问题。如果有一个关联实体表，即交叉引用，包含基本上只包含两个 FK 引用的记录，是否应该以某种方式对其进行索引？是否有必要显式索引该表，因为关联表中的 PK 已经按定义进行了索引？如果应该索引它，它应该是一个组合索引，由两个 FK 字段组成吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T15:11:58.587

**其他表**中引用的 pk 列上的索引不包括它。

通过将两个 fk 列定义为“关联实体”表的**复合主键**（在大多数情况下您应该这样做 - 假设关联是唯一的），您可以隐式创建多列索引。

这以最佳方式涵盖了涉及**两列或第一列的**所有查询。
它还涵盖了对**第二列**的查询，但以一种不太有效的方式。
如果您有仅涉及第二列的重要查询，请在该列上创建一个附加索引。

[在 dba.SE](https://dba.stackexchange.com/questions/6115/working-of-indexes-in-postgresql/7484#7484)上的这个相关问题中阅读有关该主题的所有详细信息。
或者[这个关于 SO](https://stackoverflow.com/questions/7364969/how-to-filter-sql-results-in-a-has-many-through-relation)的问题，也涵盖了这个话题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T15:58:50.307

假设您的关联表具有如下模式：

```
CREATE TABLE Association
(
    ReferenceA  INTEGER NOT NULL REFERENCES TableA CONSTRAINT FK1_Association,
    ReferenceB  INTEGER NOT NULL REFERENCES TableB CONSTRAINT FK2_Association,
    PRIMARY KEY(ReferenceA, ReferenceB)            CONSTRAINT PK_Association
); 
```

您的 DBMS 可能会自动创建一些索引。

一些 DBMS 将为两个外键中的每一个创建一个索引，并为主键创建一个唯一索引。这有点浪费，因为 PK 索引也可以用于访问 ReferenceA。

理想情况下，将只有两个索引：PK（唯一）索引和 ReferenceB 的（允许重复的）FK 索引，假设 PK 索引将 ReferenceA 作为第一列。

如果 DBMS 没有自动创建索引来强制执行参照完整性约束，则您需要创建 RI 或 FK 允许重复索引。如果它没有自动创建索引来强制执行 PK 约束，那么您也需要创建该唯一索引。好处是您只会为理想情况创建索引。

根据您的 DBMS，您可能会发现创建没有约束的表，然后添加索引，然后添加约束（然后将使用您创建的索引）更有效。像碎片化方案这样的事情也可能会影响到这一点；我在上面忽略了它们。

这个概念仍然很简单——您总共需要两个索引，一个在两列上强制唯一性并提供对前导列的快速访问，以及一个在尾随列上的非唯一或允许重复的索引。

# c# - 将跟踪配置文件添加到工作流

> ID：10335316
> 
> 赞同：0
> 
> 时间：2012-04-26T14:16:32.790
> 
> 标签：c#, workflow-foundation-4

我有我的自定义工作流程，如下所示。如何添加工作流跟踪配置文件以监控每个步骤中发生的情况？

```
 static void Main(string[] args)
    {
        OuputToConsole("hello", "wf");

        Console.ReadKey();
    }

    private static void OuputToConsole(string p, string p_2)
    {
        // workflow implementation

        var s = new Sequence()
                    {
                        Activities =
                            {
                                new WriteLine() {Text = p},
                                new WriteLine() {Text = p_2}
                            }
                    };

        // running code or execute code
        WorkflowInvoker.Invoke(s);
    } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-04T06:20:35.863

您可以参考 WCf_WF_sample 进行跟踪。你可以从这里下载。

[http://www.microsoft.com/en-us/download/details.aspx?id=21459](http://www.microsoft.com/en-us/download/details.aspx?id=21459)

下面给出了 sql server 的示例跟踪配置文件。

```
<?xml version="1.0" encoding="utf-8" ?>
<!-- Copyright (c) Microsoft Corporation.  All rights reserved. -->
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0"/>
  </system.web>

  <connectionStrings>
    <add connectionString="Data Source=localhost\SQLEXPRESS;Initial Catalog=TrackingSample;Integrated Security=SSPI"
         name="TrackingDbConnection" providerName="System.Data.SqlClient"  />
  </connectionStrings>

  <system.serviceModel>
      <extensions>
        <behaviorExtensions>
          <add name="sqlTracking" type="Microsoft.Samples.SqlTracking.SqlTrackingExtensionElement, SqlTrackingParticipant, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" />
        </behaviorExtensions>
      </extensions>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <sqlTracking profileName="Troubleshooting Profile"
                                 connectionStringName="TrackingDbConnection"/>
          <serviceDebug includeExceptionDetailInFaults="False" />
          <serviceMetadata httpGetEnabled="True"/>

        </behavior>
      </serviceBehaviors>
    </behaviors>
    <tracking>
      <profiles>
        <trackingProfile name="Troubleshooting Profile">
          <workflow activityDefinitionId="*">
            <workflowInstanceQueries>
              <workflowInstanceQuery>
                <states>
                  <state name="*" />
                </states>
              </workflowInstanceQuery>
            </workflowInstanceQueries>
            <activityStateQueries>
              <activityStateQuery activityName="*">
                <states>
                  <state name="*" />
                </states>
                <variables>
                  <variable name="*"/>
                </variables>
              </activityStateQuery>
            </activityStateQueries>
            <activityScheduledQueries>
              <activityScheduledQuery activityName="*" childActivityName="*" />
            </activityScheduledQueries>
            <faultPropagationQueries>
              <faultPropagationQuery faultSourceActivityName="*" faultHandlerActivityName="*" />
            </faultPropagationQueries>
            <customTrackingQueries>
              <customTrackingQuery name="*" activityName="*" />
            </customTrackingQueries>
          </workflow>
        </trackingProfile>
        <trackingProfile name="Instance_And_Custom_Records">
          <workflow activityDefinitionId="*">
            <workflowInstanceQueries>
              <workflowInstanceQuery>
                <states>
                  <state name="*" />
                </states>
              </workflowInstanceQuery>
            </workflowInstanceQueries>
            <customTrackingQueries>
              <customTrackingQuery name="*" activityName="*" />
            </customTrackingQueries>
           </workflow>
        </trackingProfile>
      </profiles>
    </tracking>

  </system.serviceModel>
</configuration> 
```

您也可以参考这些链接以获得更多理解。 [http://msdn.microsoft.com/en-us/library/ee513992.aspx](http://msdn.microsoft.com/en-us/library/ee513992.aspx)

# apache - 通过配置apache的.conf文件将http重定向到https

> ID：10335329
> 
> 赞同：1
> 
> 时间：2012-04-26T14:17:27.780
> 
> 标签：apache, http, tomcat, https, proxy

我已经通过类似代码将 apache 配置为 tomcat 配置

```
<VirtualHost *:80>
ServerName captiveportal
ProxyPass       / http://ip:port/path
ProxyPassReverse / http://ip:port/path
</VirtualHost> 
```

现在我想将此请求重新发送到 https 我该如何实现？

查看您的答案后，我更改了我的配置，例如

```
<VirtualHost *:443>
SSLEngine on
SSLCertificateFile "/etc/httpd/conf/crt1.crt"
SSLCertificateKeyFile "/etc/httpd/conf/key1.key"
ProxyPass       / http://ip:port/path
</VirtualHost>
<VirtualHost *:80>
ServerName captiveportal
Redirect / https://ip:port/path
</VirtualHost> 
```

但是当我`captiveportal`在浏览器上输入时，它会将我重定向到 url`https://ip:port/path`并显示`problem loading page`

我不想`https://ip:port/path`在浏览器上显示的另一件事。

注意：`https://ip:port/path` -port 是我的 tomcat 端口，ip 是运行 tomcat 的机器 ip。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:22:22.607

你可以这样做：

```
<VirtualHost *:80>
   ServerName captiveportal
   Redirect / https://my.host.name/
</VirtualHost> 
```

...然后将您的`ProxyPass`指令放在您的 SSL`VirtualHost`块中。

# google-docs-api - 谷歌文档上“{single_word”} 和 {single_word} 搜索之间的区别

> ID：10335330
> 
> 赞同：1
> 
> 时间：2012-04-26T14:17:32.977
> 
> 标签：google-docs-api, google-drive-api

对于使用 documentlist api（以及在 UI 中）的一些查询，我会得到不同的查询结果：

```
1\. "single_word"
2\. single_word

For example for this: 
"mody" - I receive 69 results 
 mody  -  I receive >200 results (many of them don't contains this word)

(This happens also for combination of words that contains this word. For example:
**"mody" company** and **mody company** returns different results) 
```

这个搜索有什么区别？以及如何建议搜索最佳精确匹配结果？我不想收到只包含**mod**（例如）单词的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T16:30:48.907

"mody" 仅与字符 mody 和两边的空格完全匹配。它只匹配`mody`.

mody 匹配包含字符 mody 的标记。它将匹配`mymody`, `mody`, `asdfmody`,`modyasdf`等。

# php - 在 codeigniter 中，我们如何使用 CI 的函数为表赋予特殊的 id 属性

> ID：10335333
> 
> 赞同：2
> 
> 时间：2012-04-26T14:17:43.850
> 
> 标签：php, codeigniter, html-table

像这样的普通表函数`$this->table->generate()`会产生这样的结果：

```
<table border="0" cellpadding="4" cellspacing="0">
<tr>
<td>one</td><td>two</td><td>three</td>
</tr>
</table> 
```

我怎样才能生产出类似的东西

```
<table border="0" id="myTable" cellpadding="4" cellspacing="0"> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T14:21:57.173

你试过这个吗？

```
 $tmpl = array ( 'table_open'  => 
'<table border="1" cellpadding="2" cellspacing="1" id="YOUR_ID" class="mytable">' );

    $this->table->set_template($tmpl); 

echo $this->table->generate(); 
```

更新 1：

```
$tmpl = array (
                    'table_open'          => '<table border="1" cellpadding="2" cellspacing="1" id="YOUR_ID" class="mytable">',

                    'heading_row_start'   => '<tr>',
                    'heading_row_end'     => '</tr>',
                    'heading_cell_start'  => '<th>',
                    'heading_cell_end'    => '</th>',

                    'row_start'           => '<tr>',
                    'row_end'             => '</tr>',
                    'cell_start'          => '<td>',
                    'cell_end'            => '</td>',

                    'row_alt_start'       => '<tr>',
                    'row_alt_end'         => '</tr>',
                    'cell_alt_start'      => '<td>',
                    'cell_alt_end'        => '</td>',

                    'table_close'         => '</table>'
              );

$this->table->set_template($tmpl); 
```

参考：[https ://ellislab.com/codeigniter/user-guide/libraries/table.html](https://ellislab.com/codeigniter/user-guide/libraries/table.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T14:22:26.283

您可以使用`set_template()`函数将`table_open`值设置为您需要的输出。

```
$template = array('table_open' => '<table border="0" id="myTable" cellpadding="4" cellspacing="0">');
$this->table->set_template($template); 
```

# c# - 遍历类，创建一个可序列化的对象

> ID：10335336
> 
> 赞同：0
> 
> 时间：2012-04-26T14:18:03.693
> 
> 标签：c#, javascript, asp.net

```
public partial class VALUES
{
    public struct Status
    {
        public const long Registered = 5;
        public const long Active = 6;
    }
} 
```

我想动态创建一个匿名对象，我可以基于此类将其序列化为 JSON。有没有办法遍历上面类的属性，创建这样的东西：

```
new JavaScriptSerializer.Serialize(new {
    Values = new
                {
                    Status = new
                    {
                        Registered = VALUE.Status.Registered,
                        Active = VALUE.Status.Active,
                    },

                } .... 
```

不确定上面的代码是否可以编译，只是想让您了解我想要实现的目标。我不想手动映射每个值，而是动态地创建值。谢谢

# c# - 动态选择 DataContext

> ID：10335342
> 
> 赞同：-1
> 
> 时间：2012-04-26T14:18:29.153
> 
> 标签：c#, asp.net

基于一些变量，我想从母版页中的四个可能的数据上下文（当然是不同类型的）中选择数据上下文，然后在嵌套的母版页中使用它。这可能吗？

谢谢， Ondrej

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T08:07:11.517

不确定这是否适合您。

但我认为您可以将`connection`动态更改为您的`datacontext`.

您可以查看[LINQ to SQL DataContext](http://steveclements.net/blog/Dynamic-connection-for-LINQ-to-SQL-DataContext)和[Linq to Sql 的动态连接 - 根据环境变量动态设置连接字符串](https://stackoverflow.com/questions/1188962/linq-to-sql-set-connection-string-dynamically-based-on-environment-variable)

# javascript - javascript附加事件

> ID：10335343
> 
> 赞同：4
> 
> 时间：2012-04-26T14:18:30.440
> 
> 标签：javascript, events, handler

我已经看到您可以附加这样的事件

```
<button type="button" id="myButton" onclick="myFunction()"> 
```

你能在没有 的情况下做同样的事情吗`"onclick="`，比如：

```
document.getElementById('myButton'). //and here attach the event on click to myFunction 
```

我试图将 JavaScript 和 HTML 分开。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-26T14:20:46.657

它类似于`onclick`方法，实际上使用相同的事件处理程序，但从 HTML 中删除：

```
document.getElementById('myButton').onclick = function(){
    // do stuff
    myFunction();
} 
```

如果您没有`id`on 元素，您也可以使用：

```
var inputs = document.getElementsByTagName('input');

for (var i=0, len=inputs.length; i<len; i++){
    if (inputs[i].type == 'text'){
        // assuming you want to affect text-inputs in this case
        inputs[i].onclick = function(){
            // do stuff. In here 'this' refers to inputs[i] element
            myFunction();
        };
    }
} 
```

另一种方法是 using ，其中包含使用and`Array.prototype.forEach()`创建的元素数组：`Array.prototype.slice()``document.querySelectorAll()`

```
[].forEach.call(document.querySelector('input[type="text"]', yourFunctionName); 
```

`yourFunctionName()`这将为每个`<input />`元素执行函数 of `type="text"`，`document.querySelectorAll()`通过将该`<input />`元素作为 传递给函数返回`this`。

您也可以`addEventListener()`在这种情况下使用：

```
document.getElementById('myButton').addEventListener('click', myFunction, false); 
```

同样在这种情况下，使用`document.querySelector()`（而不是`document.querySelectorAll()`），它返回与传入选择器匹配的第一个元素，使用 CSS 表示法：

```
// gets the element with an 'id' of 'myButton', binding the 'click' event-handler:
document.querySelector('#myButton').addEventListener('click', myFunction, false); 
```

或者：

```
// gets the first of the <input> elements, binding the 'click' event-handler:
document.querySelector('input').addEventListener('click', myFunction, false); 
```

参考：

*   [`Array.prototype.forEach()`](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach).
*   [`Array.prototype.slice()`](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/slice).
*   [`document.querySelector()`](https://developer.mozilla.org/en/docs/Web/API/Document.querySelector).
*   [`document.querySelectorAll()`](https://developer.mozilla.org/en/docs/Web/API/Document.querySelectorAll).
*   [`EventTarget.addEventListener()`](https://developer.mozilla.org/en/DOM/element.addEventListener).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-26T14:20:53.087

是的，你可以（而且应该！）。

```
document.getElementById('myButton').onclick = myFunction; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-26T14:20:56.237

当然，您只需要选择您的项目并调用它对应的回调函数。体育：

```
document.getElementById('myButton').onclick = function(e) {
    // your code here
} 
```

或者，没有内联函数：

```
document.getElementById('myButton').onclick = myObject.myMethod; 
```

[https://developer.mozilla.org/en/DOM/element.onclick](https://developer.mozilla.org/en/DOM/element.onclick)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-26T14:20:23.663

像这样的东西：

```
 document.getElementById('myButton').onclick = function() {location.href='http://stackoverflow.com';return false;} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-09-25T08:09:42.397

```
document.getElementById('myButton').onclick = function () {
        console.log('Inline event attach');
    };

    document.getElementById('myButton').addEventListener('click', function () {
        console.log('Using native addEventListener');
    }, false); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-26T14:20:33.757

```
document.getElementById('myButton').onclick = function() { myFunction(); } 
```

# winforms - 以“主从”方式将 DataGridView 绑定到实体

> ID：10335345
> 
> 赞同：0
> 
> 时间：2012-04-26T14:18:36.437
> 
> 标签：winforms, entity-framework

我正在尝试在两个 DataGridView 之间建立主从关系。我有一个 EntityModel，其中有两个由“ClientComissions”协会连接的实体。它们是从现有数据库生成的，并且具有运行良好的导航属性。证明（使用提到的 EntityModel 的控制台应用程序）：

* * *

```
 using (var context = new MnxEntities())
        {
            Client client = context.Clients.FirstOrDefault();
            // profiler: "SELECT TOP (1) ... FROM [Clients] AS [c]" - Ok!
            Console.WriteLine("Client: {0}", client.Name);
                foreach (Comission comission in client.NavComissions)
                // profiler: "SELECT ... FROM [Comissions] WHERE [StateCode] = '20971504'" - Ok!
                {
                    Console.WriteLine("Agreement number: {0}", comission.Dog_Num);
                }
        } 
```

* * *

但是我不能在 windows 窗体上以主从方式绑定两个 DataGridView：

* * *

```
 private void tabComissions_Enter(object sender, EventArgs e)
    {
        using (var context = new MnxEntities())
        {
            clientDataGridView.DataSource  = context.Clients;

            comissionsDataGridView.DataSource = clientDataGridView.DataSource;
            comissionsDataGridView.DataMember = "WHAT SHOULD BE HERE?";
        }
    } 
```

* * *

我知道有一个 BindingContext，它必须使用 CurrencyManager 完成所有工作，不需要手写代码。

我已经在这里呆了很长时间了。请帮忙。

* * *

升级版：

```
 private void AnswerFromStackRefactored()
    {
        using (var context = new MnxEntities())
        {
            clientBindingSource.DataSource = context;
            clientBindingSource.DataMember = "Clients";

            navComissionsBindingSource.DataSource = clientBindingSource;
            navComissionsBindingSource.DataMember = "NavComissions";
        }

    } 
```

此代码仅为网格中的第一个客户端加载一次佣金。但是，当我更改客户端网格中的当前行时，不再查询数据库，并且 navComissionsGrid 始终显示第一个客户端的佣金。:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T16:00:22.973

在 Form 上拉出两个 ListView，分别命名为 lstcategory 和 lstProduct。然后复制下面的代码[非常简单]。您可以将相同的概念应用于您的问题。

```
public partial class MasterDetail : Form
    {
        public MasterDetail()
        {
            InitializeComponent();
        }

        private BindingManagerBase categoryBinding;
        private DataSet ds;

        private void MasterDetail_Load(object sender, EventArgs e)
        {
            ds = GetCategoriesAndProducts();

            // Bind the lists to different tables.
            lstCategory.DataSource = ds.Tables["Categories"];
            lstCategory.DisplayMember = "CategoryName";

            lstProduct.DataSource = ds.Tables["Products"];
            lstProduct.DisplayMember = "ProductName";

            // Track the binding context and handle position changing.
            categoryBinding = this.BindingContext[ds.Tables["Categories"]];
            categoryBinding.PositionChanged += new EventHandler(Binding_PositionChanged);

            // Update child table at startup.
            UpdateProducts();
        }

        private void Binding_PositionChanged(object sender, System.EventArgs e)
        {
            UpdateProducts();
        }

        private void UpdateProducts()
        {
            string filter;
            DataRow selectedRow;

            // Find the current category row.
            selectedRow = ds.Tables["Categories"].Rows[categoryBinding.Position];

            // Create a filter expression using its CategoryID.
            filter = "CategoryID='" + selectedRow["CategoryID"].ToString() + "'";

            // Modify the view onto the product table.
            ds.Tables["Products"].DefaultView.RowFilter = filter;
        }

        public DataSet GetCategoriesAndProducts()
        {
            DataTable category = new DataTable("Categories");
            category.Columns.Add("CategoryID");
            category.Columns.Add("CategoryName");

            category.Rows.Add(new object[] { "1", "Food" });
            category.Rows.Add(new object[] { "2", "Beverage" });

            DataTable product = new DataTable("Products");
            product.Columns.Add("CategoryID");
            product.Columns.Add("ProductName");

            product.Rows.Add(new object[] { "1", "Rice" });
            product.Rows.Add(new object[] { "1", "Pasta" });

            product.Rows.Add(new object[] { "2", "Cola" });
            product.Rows.Add(new object[] { "2", "Coffee" });
            product.Rows.Add(new object[] { "2", "Tea" });

            DataSet ds = new DataSet();
            ds.Tables.Add(category);
            ds.Tables.Add(product);

            // Set up a relation between these tables (optional).
            DataRelation relCategoryProduct = new DataRelation("CategoryProduct",
              ds.Tables["Categories"].Columns["CategoryID"],
              ds.Tables["Products"].Columns["CategoryID"]);

            ds.Relations.Add(relCategoryProduct);

            return ds;
        }

    } 
```

![在此处输入图像描述](../Images/a37a35d71bbe2222e9c03c7930346345.png)

# c# - 如何在 url 中包含 Jquery UI Tab 的 id？

> ID：10335346
> 
> 赞同：2
> 
> 时间：2012-04-26T14:18:37.860
> 
> 标签：c#, jquery, asp.net, jquery-ui

我在一个名为`Main.aspx`. 我想要这样当用户第一次访问`Main.aspx`时，url 更改为默认选项卡，当单击不同的选项卡时，url 更改为引用该选项卡的 id。因此，例如，如果他们单击`Second Tab`，我希望 url 为`Main.aspx#secondTab`。这样，如果他们刷新页面，它将保留在当前选项卡上。

我将如何做到这一点？

```
<div id="everyNavigationTabID" class="everyNavigationTabClass">
 <ul class="singleTabNavigationClass">
                <li><a href="#firstTab">First Tab</a></li>
                <li><a href="#secondTab">Second Tab</a></li>
                <li><a href="#thirdTab">Third Tab</a></li>
            </ul>    
<div id="firstTab" class="tabContent">
                First Tab
 </div>
 <div id="secondTab" class="tabContent">
                Second Tab
 </div>
 <div id="thirdTab" class="tabContent">
                Third Tab
 </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T14:21:38.140

您可以使用该`document.location.hash`属性将`#`片段添加到当前 URL。

就像是 -

```
$("div.tabContent").on('click',function(evt){
   document.location.href = document.location.href + "#" + $(this).attr('id');
   evt.preventDefault();
}); 
```

然后在您的`$(function()`(document.ready) 函数上，您可以检查`document.location.hash`变量并采取适当的措施。

# asp.net - 关于 log4net 配置

> ID：10335349
> 
> 赞同：1
> 
> 时间：2012-04-26T14:18:44.217
> 
> 标签：asp.net, security, web-config, log4net

几个月来，我已经调试了供应商留给我们的代码。直到今天我才发现 log4net 配置仍然包含供应商的信息。我的简单问题：供应商是否可以在此期间跟踪和记录我的工作？我粘贴的工作是否安全？什么是 smtpHost IP？

```
<appender name="SmtpAppender" type="log4net.Appender.SmtpAppender">
  <to value="somebody@some_vendor.com"/>
  <from value="person@some_vendor.com"/>
  <subject value="Company Portal"/>
  <smtpHost value="xy.a.b.cd"/>
  <authentication value="Basic"/>
  <username value="somebody@some_vendor.com"/> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:21:49.420

smtpHost 是调用 SmtpAppender 时要使用的 smtp 服务器的 ip 或域。因此，任何配置为使用 smtpappender 记录的级别都会使用该 smtpserver 作为主机生成一封电子邮件。运行您的代码的服务器必须能够连接到 xy.abcd 才能发送消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T14:22:42.460

好的，这并不安全，因为如果您的应用程序可以访问 Internet 并且 smtphost 可用并且可以正常工作，那么该记录器应该记录的所有内容都将被邮寄给开发人员。查看代码，记录了哪些类型的消息？

smtphost 是提供 stmp 服务的机器的 dns 名称，用于发送电子邮件。

# objective-c - 核心数据崩溃

> ID：10335350
> 
> 赞同：0
> 
> 时间：2012-04-26T14:18:51.907
> 
> 标签：objective-c, ios

我发生了崩溃，在我的控制台中我收到了这个错误：

```
Unresolved error Error Domain=NSCocoaErrorDomain Code=134100 "The operation couldn’t be completed. (Cocoa error 134100.)" UserInfo=0x6d30540 {metadata=<CFBasicHash 0x6d2c680 [0x171bb38]>{type = immutable dict, count = 7,
entries =>
.....
.....

reason = "The model used to open the store is incompatible with the one used to create the store"; 
```

您看到原因了吗，很抱歉我是 Core Data 的新手。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:22:14.460

删除设备上的应用程序，通过 Organizer 删除派生数据并再次部署。当您更改核心数据模型并在设备上留下旧版本时，您会收到此错误。因此，在核心数据模型发生更改后，每次构建时都需要删除设备上的当前构建。

更多信息可以在[Core Data Model Versioning and Data Migration Programming Guide](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreDataVersioning/Articles/Introduction.html#//apple_ref/doc/uid/TP40004399)中找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:25:50.263

看起来您更改了数据模型而没有更新数据库本身。如果您有一个预填充的数据库，那么它与您的模型不匹配。如果您不这样做，则需要进行全新安装以创建新数据库。

# java - XML & MQ 最佳解决方案

> ID：10335353
> 
> 赞同：1
> 
> 时间：2012-04-26T14:18:58.187
> 
> 标签：java, xml, parsing, jaxb, mq

我希望这里有人可以给我一些指导。我正在开发一个使用 IBM MQ 消息代理的项目。该项目将包括以下内容

从 MQ 接收数据
- MQ 将以 xml 格式向我们发送记录
- 我需要获取这些 xml 文件并将它们转换为对象

将数据发送到 MQ
- 我需要将对象转换为 xml 格式
- 我需要将这些 xml 记录发送到 MQ

我会查看一些输入的部分是 xml 部分。我已经对这些解析器进行了一些 JAXP、JAXB、JDOM、XOM 的研究，但作为一名 Web 开发人员，很难判断哪个更适合我的场景。

我希望有这方面经验的人可以提出最佳解决方案。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:28:32.563

我猜 JAXB 适合这个目的，你不需要任何特殊的 jar，因为嵌入在框架中。XOM 也可以工作，但您需要第三方库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T14:48:50.357

如果您已经定义了模式 (XSD)，那么 JAXB 可能是最好的解决方案。您可以使用`xjc.exe`命令行工具生成 Java 类并将其指向您的 XSD 文件。

如果您的 XML 文档很大，那么您必须考虑内存限制。[这篇文章](https://stackoverflow.com/questions/2586562/java-xml-good-stream-based-alternative-to-jaxb)讨论了内存问题和 JAXB。

如果您没有定义模式，那么您还有更多的工作要做 JAXB，但[根据这篇文章是可能的](http://duckranger.com/2011/06/jaxb-without-a-schema/)

简而言之，尝试定义一个 XSD，然后使用 JAXB。

在 MQ 方面，我个人会使用 Spring 框架（支持 JAXB）来发送/接收/转换 MQ 消息。阅读有关 Spring API 中的[DefaultMessageListenerContainer](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/jms/listener/DefaultMessageListenerContainer.html)的信息（假设您要在 Java 中动手）。或者，您可以使用[Spring Integration](http://blog.springsource.org/2009/02/13/982/)，但我没有亲自使用过。

# jasper-reports - 使用哪个 Jasper-Reports 版本来允许 Dynamic-Jasper 和 ireport（使用 jasper 4.1.1）一起工作？

> ID：10335359
> 
> 赞同：1
> 
> 时间：2012-04-26T14:19:10.247
> 
> 标签：jasper-reports, ireport, dynamic-jasper

我创建了一个打印服务，我想将其集成到几个需要打印的应用程序中。所有打印都由 Jasper Reports 库完成 - 一些使用 jdbc 数据源和 jasper 模板（由 iReport 生成），一些使用表模型数据源。为了允许动态打印`JTables`，我还在我的服务中使用了 DynamicJasper。问题如下：我找不到合适的 JasperReports 库版本，它可以与 DynamicJasper 3.2.1 和 iReport 生成的模板一起使用（与 jasper 报告 4.1.1 一起使用）。我可以使用哪个 Jasper Reports 版本来使 iReport 生成的`jasper`文件和 Dynamic Jasper 3.2.1 一起工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T06:29:24.387

正如您从[DynamicJasper v. 3.2.1 的 pom.xml 中](http://archiva.fdvs.com.ar/repository/public1/ar/com/fdvs/DynamicJasper/3.2.1/)看到的那样，该库包含此依赖项：

```
<dependency>
    <groupId>jasperreports</groupId>
    <artifactId>jasperreports</artifactId>
    <version>3.7.1</version>
</dependency> 
```

这意味着 DJ 3.2.1 支持（官方支持）JasperReports 3.x 版本。

新版 DJ API[将支持 JR 4.1+](http://dynamicjasper.com/2012/03/14/comming-soon-road-map/)。

有关更多信息，您可以阅读[DJ](http://dynamicjasper.com/forum)支持论坛上的这两篇文章：[Won't work with JasperReports 4.1.1 - ID: 3394896](http://dynamicjasper.com/forum/viewtopic.php?f=4&t=13585) & [JasperReports version](http://dynamicjasper.com/forum/viewtopic.php?f=8&t=14115)。

# python - pip 不安装 setup() 中声明的依赖项需要参数

> ID：10335371
> 
> 赞同：3
> 
> 时间：2012-04-26T14:19:51.883
> 
> 标签：python, pip, setuptools

我有一个依赖于`wsgi_intercept`包的 Python 项目。我将它添加到我的文件中的`requires`参数中：`setup.py`

```
from setuptools import setup
setup( #...
       #...
       requires = [ 'wsgi_intercept',
               # ...
       ]
 ) 
```

然后我执行`sdist`命令：

```
$ python setup.py sdist upload 
```

但是，当我使用 安装包时`pip`，它不会安装`wsgi_intercept`，并且我的包无法正常工作。

我错过了什么？我应该添加另一个配置到`pip`. 我阅读了有关`pip`需求文件的信息，但它们似乎被部署者使用，而不是分发者。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T14:34:51.393

看起来关键字 args`distutils.core.setup()`已[更改](http://peak.telecommunity.com/DevCenter/setuptools#new-and-changed-setup-keywords)。我用`install_requires`在我的`setup.py`，它工作正常。

将关键字更改`requires`为`install_requires`，看看它是否有效。

# javascript - jquery在自定义函数中使用（this）

> ID：10335379
> 
> 赞同：6
> 
> 时间：2012-04-26T14:20:17.657
> 
> 标签：javascript, jquery, function

我创建了一个小 jquery 脚本，但在自定义函数中使用 (this) 时遇到问题。

这是代码：

```
jQuery("li").click(function()
{
    var scrollTop = jQuery(window).scrollTop();
    if(scrollTop > 0)
    {
        jQuery('html, body').animate( { scrollTop: 0 }, 'slow', function()
        {
            fadeItems();
        });

    }
    else
    {
        fadeItems();    
    }

});

function fadeItems()
{       
    var slogan = jQuery(this).children('p').html();

    jQuery('#slogan_text').fadeOut(150, function(){
        jQuery('#slogan_text').fadeIn(150).html(slogan);
    });

    var content = jQuery(this).children('#post_content_large').html();
    jQuery('#content_view').html(content).hide();

    var status = jQuery("#readMore").html();

    if(status == 'Verbergen')
    {
        jQuery('#content_view').fadeIn(500, function(){
            jQuery('#content_view').fadeIn(500).html(content);
        });
    }

    var title = jQuery(this).children('h3').html();

    jQuery('#title_content').fadeOut(150, function(){
        jQuery('#title_content').fadeIn(150).html(title);
    });
} 
```

因此，该函数在单击列表项时运行，这很顺利，但 (this) 的值为空

有人知道如何解决这个问题吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T14:22:15.083

因为您必须将它传递给函数以便它可以使用它（也可能使用与此不同的 dometh，所以不会造成混淆（已编辑，因为您想要单击的项目）

```
 var clicked = this;
    jQuery('html, body').animate( { scrollTop: 0 }, 'slow', function()
    {
        fadeItems(clicked);
    });

function fadeItems(el)
{       
var slogan = jQuery(el).children('p').html(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T14:24:49.337

使用[应用](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/apply)：

`fadeItems.apply(this);`

这样您就可以指定函数调用的上下文（手动分配`this`in的值`fadeItems`）

编辑：正如@KevinB 所指出的，您需要`this`在父函数中别名：`var that = this;`，然后传递`that`给函数，`fadeItems.apply(that);`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T14:25:56.893

`.call`在这里很有用：

```
jQuery("li").click(function () {
    var self = this;
    var scrollTop = jQuery(window).scrollTop();
    if(scrollTop > 0) {
        jQuery('html, body').animate( { scrollTop: 0 }, 'slow', function() {
            fadeItems.call(self);
        });    
    }
    else {
        fadeItems.call(self);
    }    
}); 
```

# iphone - .plist 中的可变字符串集合，替代方案？

> ID：10335384
> 
> 赞同：1
> 
> 时间：2012-04-26T14:20:33.833
> 
> 标签：iphone, objective-c, ios, algorithm, plist

我正在创建一个需要使用类别的应用程序。将有一个我想与应用程序一起提供的基本类别集，但它可以由用户编辑（删除、添加类别）。基本的 .plist 不会被更改，而只会读取一次，然后可变地存储在其他地方。

这是我的方法：

随应用程序提供的默认类别`categoryCollection.plist`。 `defaultCategories.plist`将是被操纵的新 .plist 文件

![默认字典样式](../Images/ca263caca8e25cb8a96a8ba839cd9fdf.png)`categoryCollection.plist`

将类别读入`NSMutableSet`我使用：

```
 NSString *mainBundlePath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSString *dictPath = [mainBundlePath stringByAppendingPathComponent:@"defaultCategories"];
    NSDictionary * dict = [[NSDictionary alloc]initWithContentsOfFile:dictPath];

    // testing if the file has values, if not load from categoryCollection.plist
    if (dict.count == 0) {
        NSString *tempPath = [[NSBundle mainBundle] pathForResource:@"categoryCollection" ofType:@"plist"];
        dict = [NSMutableDictionary dictionaryWithContentsOfFile:tempPath];
        [dict writeToFile:dictPath atomically:YES];
    }

    // load into NSMutableSet
    [self.stringsCollection addObjectsFromArray:[[dict objectForKey:@"categories"]objectForKey:@"default"]]; 
```

添加一个类别我称之为这个函数：

```
-(void)addCategoryWithName:(NSString *)name{

    NSString *mainBundlePath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSString *dictPath = [mainBundlePath stringByAppendingPathComponent:@"defaultCategories"];
    NSMutableDictionary * dict = [[NSMutableDictionary alloc]initWithContentsOfFile:dictPath];
    [[[dict objectForKey:@"categories"]objectForKey:@"default"]addObject:name];

    [dict writeToFile:dictPath atomically:YES];

    self.needsToUpdateCategoryCollection = YES;
} 
```

并删除我使用的字符串：

```
-(void)removeCategoryWithName:(NSString *)name{

    NSString *mainBundlePath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSString *dictPath = [mainBundlePath stringByAppendingPathComponent:@"defaultCategories"];
    NSDictionary * dict = [[NSDictionary alloc]initWithContentsOfFile:dictPath];

    NSMutableArray *temp = [NSMutableArray arrayWithArray:[[dict objectForKey:@"categories"]objectForKey:@"default"]] ;

    for (NSString *string in temp) {
        if ([string isEqualToString:name]) {
            [temp removeObject:string];
            break;
        }
    }
    [[dict objectForKey:@"categories"]removeObjectForKey:@"default"];
    [[dict objectForKey:@"categories"] setValue:temp forKey:@"default"];

    [dict writeToFile:dictPath atomically:YES];
    self.needsToUpdateCategoryCollection = YES;
} 
```

代码实际上工作得很好，但我想知道是否真的需要大量 I/O 操作、测试等开销，或者是否有更优雅的解决方案来存储字符串集合并让它们被操纵？

或者，如果您看到任何可能提高速度的减速带（因为当有很多类别时，我的代码会有一些小的滞后）

有什么想法吗？塞巴斯蒂安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:32:19.833

您的方法工作正常，但它所做的工作比每次修改集合时都编写结果所必需的要多。编写文件是您`add`和`remove`方法中最昂贵的部分。

解决该问题的一种方法是在您的应用程序启动时读取您的类别，将您的类别缓存`NSMutableDictionary`在一个*单例*对象中，并在您的应用程序运行时引用它。当最终用户进行更改时，您只更新内存中的字典；不要立即将数据写入文件。

在您的应用程序委托中，侦听`applicationDidEnterBackground:`事件，并将数据写入该处理程序中的文件。还要听该`applicationDidEnterForeground:`事件，并将您的文件读入`NSMutableDictionary`. 这将为您节省大量 CPU 周期，并提供更流畅的最终用户体验。

# php - 如何在 PHP 中将会话的最大生命周期设置为 5 秒

> ID：10335385
> 
> 赞同：-1
> 
> 时间：2012-04-26T14:20:34.043
> 
> 标签：php, session

我们已经 `session_gcmaxlife=5` 在 php.ini 中设置，但服务器上的会话变量在 5 秒后没有被破坏

我们希望在 PHP 中将会话的最大生命周期设置为 5 秒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T14:46:38.780

> 一般来说，您可以说 session.gc_maxlifetime 指定自上次更改会话数据以来的最大生命周期（不是上次调用 session_start ！）。但是 PHP 的会话处理有点复杂。
> 
> 因为会话数据由仅由 session_start 调用的垃圾收集器删除，其中 session.gc_probability 的概率除以 session.gc_divisor。默认值为 1 和 100，因此垃圾收集器仅在所有 session_start 调用的 1% 中启动。这意味着即使会话在理论上已经超时（会话数据的更改时间超过 session.gc_maxlifetime 秒前），会话数据的使用时间也可以更长。
> 
> 因此，我建议您实现自己的会话超时机制。请参阅我对如何在 30 分钟后使 PHP 会话过期？更多细节。

Quote:[我的会话将持续多长时间？](https://stackoverflow.com/questions/1516266/how-long-will-my-session-last)

最好的解决方案是实现自己的超时机制。这很简单。

```
$_SESSION['created'] = time(); 
```

现在，您只需要一个 if 语句来检查 5 秒是否已过，并在此时间销毁会话数据。

```
if (time() - $_SESSION['created'] > 5) {
    session_destroy();
    session_unset();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T14:29:31.473

您可以使用 setcookie() 函数。它需要一个超时参数。

```
$timeout = 5; // 5 seconds 
if (isset($_COOKIE[session_name()])){
    setcookie(session_name(), $_COOKIE[session_name()], time() + $timeout, "/");
} 
```

然后你可以在 Firefox 中使用 cookie manager+ 来查看会话是否被破坏。

[资源](http://php.net/manual/en/function.setcookie.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T14:48:43.647

好的 - 对我来说，5 秒的会话听起来毫无意义（因为会话应该在无状态应用程序中维护应用程序状态......是的）。

您最好的选择可能是`time()`在会话中保存一个到期时间戳（+ 5 秒），例如`$_SESSION['expires']`- 然后每当您开始会话时，检查该变量是否存在，如果存在（并且在过去），则终止会话关闭并重新开始。

* * *

## [编辑]

这是另一种可能有效的可能性*，*但您需要创建一个对象来管理您的会话 - 然后您可以拥有一个`kill()`可以在会话过期时调用的方法，并且在该`__destruct()`方法中 - 它不是完全证明的，因为析构函数会仅在对象被销毁时调用 - 但它应该可以工作。

```
class Session {

  private static $_instance;

  //private constructor to prevent external instantiation
  private function __construct($sSessName, $sSavePath, $iGCLifetime, $sCookieDomain, $sCookiePath) {

    //session parameters
    ini_set("session.save_path", $sSavePath);
    ini_set("session.gc_maxlifetime", $iGCLifetime);
    ini_set("session.use_trans_sid", false);

    //session cookie parameters
    ini_set("session.use_cookies", true);
    ini_set("session.use_only_cookies", true);
    ini_set("session.cookie_domain", $sCookieDomain);
    ini_set("session.cookie_path", $sCookiePath);
    ini_set("session.cookie_lifetime", 0);

    //set the session name
    session_name($sSessName);

    //set the session cookie paramaters
    session_set_cookie_params(0, $sCookiePath, $sCookieDomain);

    //start the session
    session_start();

    //check to see if the session has expired - and if so kill it
    if(isset($_SESSION['expires']) && time() > $_SESSION['expires']) {
      $this->kill();
    }

    //if not - set the expiry time in the session
    else {
      $_SESSION['expires'] = time() + 5;
    }
  }

  //destructor function _should_ kill the $_SESSION when the object is destroyed
  public function __destruct() {
    $this->kill();
  }

  //session killer
  public function kill() {
    //kill the session cookie
    setcookie(session_name(), null, time()-3600);

    //kill the session
    session_unset();
    session_destroy();
  }

  //Singleton instance getter
  public function getInstance() {
    if(!self::$_instance) self::$_instance = new self();
    return self::$_instance;
  }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-26T14:26:00.467

包括 $_SESSION 变量的时间戳属性。定期检查并根据条件使会话过期：

```
$_SESSION['mytimestamp'] = time(); 
```

# asp.net-mvc - 如何序列化 Json VB.NET

> ID：10335388
> 
> 赞同：0
> 
> 时间：2012-04-26T14:20:45.807
> 
> 标签：asp.net-mvc, vb.net, rest

我正在尝试调用休息服务..该服务返回 json 对象...我能够发送请求但无法序列化 json...这是我正在尝试的代码

```
 Function Sendingrequest(Item As Object) As String

            Dim request As HttpWebRequest
            Dim response As HttpWebResponse = Nothing
            Dim res As StreamReader
            Try
                request = DirectCast(WebRequest.Create("http://localhost/SomeService/Type?id=" Item), HttpWebRequest)
                response = DirectCast(request.GetResponse(), HttpWebResponse)
                res = New StreamReader(response.GetResponseStream())
                Dim serializer As New System.Runtime.Serialization.Json.DataContractJsonSerializer(res.[GetType]())
                Dim ms As New MemoryStream()
                serializer.WriteObject(ms, res)
                Dim json As String = Encoding.[Default].GetString(ms.ToArray())
                Return json

            Finally
                If Not response Is Nothing Then response.Close()
            End Try

        End Function 
```

我不确定我是否通过 url 正确传递参数...我将 url 硬编码为“http://localhost/SomeService/Type?id=ABC”然后 url 被命中但我收到此错误

不应使用数据合同名称“UTF8Encoding.UTF8Decoder:http://schemas.datacontract.org/2004/07/System.Text”键入“System.Text.UTF8Encoding+UTF8Decoder”。考虑使用 DataContractResolver 或将任何静态未知的类型添加到已知类型列表中 - 例如，通过使用 KnownTypeAttribute 属性或将它们添加到传递给 DataContractSerializer 的已知类型列表中。

有什么建议么？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T14:59:13.900

实际上，仅从您提供的详细信息中很难判断问题出在哪里或出在哪里。

这是我的建议：

*   在服务端启用跟踪，生成跟踪日志，并使用 SvcTraceViewer 进行分析。为此，请按照[此 MSDN 文章中关于使用服务跟踪查看器](http://msdn.microsoft.com/en-us/library/ms732023.aspx)的说明进行操作。注意第一次和第二次有什么不同。

*   打开调试异常。这是通过上交 includeExceptionDetailInFaults 来完成的，[您可以按照此处的说明进行操作](http://blogs.technet.com/b/david_bennett/archive/2006/11/12/how-to-turn-on-debug-exceptions-with-wcf.aspx)。注意第一次和第二次有什么不同。

*   使用[Fiddler](http://www.fiddler2.com/fiddler2/)监控客户端和服务端的有线流量。

一般来说，一旦你这样做了，你应该得到更多关于服务端发生了什么问题的更多信息，并且可以很快诊断出问题。试试看，请回来报告！:)

# wpf - wpf 样式级联

> ID：10335398
> 
> 赞同：0
> 
> 时间：2012-04-26T14:21:15.470
> 
> 标签：wpf, styles

您能否在容器（网格、画布等）中声明一个样式，该样式将级联到包含的其他类型的元素？

例如：

```
<Grid>
    <Declare some style with target type of Label/>
    <label Name="ElementIwantStyleAppliedTo1" Content="Foo"/>
    <StackPanel>
         <label Name="ElementIwantStyleAppliedTo2" Content="Foo"/>
    </StackPanel>
</Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:26:27.137

这是基础！

使用容器控件的资源属性。

```
<Grid.Resources>
     <Style TargetType="{x:Type Label}">
          <Setter Property="Foreground" Value="Red" />
     </Style>
</Grid.Resources> 
```

# xml - XML 中“&”的替代方案

> ID：10335399
> 
> 赞同：-1
> 
> 时间：2012-04-26T14:21:15.957
> 
> 标签：xml

我正在使用 XML。我需要发送一个像`"BEAUTY & HEALTH"`. XML 不会接受这个`"&"`。什么是替代品？

我曾尝试过`&amp;`，但这也不起作用。

```
<graph caption='BEAUTY & HEALTH'> 
```

这是融合图表的 XML 数据...

这是我给的。。

```
<graph caption='BEAUTY &amp; HEALTH'></graph> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T14:23:12.020

您可以将其写为`&amp;`（[这是 XML 转义](http://en.wikipedia.org/wiki/XML#Escaping)），或者您可以使用[CDATA](http://msdn.microsoft.com/en-us/library/ms256076.aspx)注释

这是它的外观：

```
BEAUTY &amp; HEALTH 
```

或者

```
<![CDATA[BEAUTY & HEALTH]]> 
```

***CDATA 只能用作内部 XML，不能用作属性。如果它是一个属性，那么 XML 转义是您唯一的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:32:26.917

使用 CDATA 结构，如下所示：

```
 <![CDATA[Beauty & Health]]> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T14:36:47.490

你需要使用`&amp;`

在您的情况下应该是：

```
Beauty &amp; Health 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T14:22:48.780

替换`&`为`&amp;`。`&`是需要转义的字符实体

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T14:22:51.230

您可以使用与符号的 XML 编码版本： `&amp;`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-26T14:24:56.223

你可以试试：

```
&#x0026; or &#00038; 
```

这实际上取决于使用的编码。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-26T14:39:37.053

我认为您的 XML 存在不同的问题。

使用[xmllint](http://xmlsoft.org/xmllint.html)之类的 xml-validator来查找问题。**&** 在 XML 文件中绝对正确。我相信它可能是文件编码或格式错误的 XML。

**更新**：首先你没有显示，你在一个属性内。那个xml格式正确吗？-Element 是否`<graph />`关闭？

```
 <graph caption='BEAUTY & HEALTH'/> 
```

尝试[在线验证器](http://www.xmlvalidation.com)。

如果是 UTF-8 文件。确保没有[BOM](http://en.wikipedia.org/wiki/Byte_order_mark)。

# cmake - 如何使用 cmake 将构建后事件添加到 llvm

> ID：10335402
> 
> 赞同：2
> 
> 时间：2012-04-26T14:21:30.720
> 
> 标签：cmake, llvm, clang, post-build-event

我想使用 cmake 向 llvm 的 clang 添加一个后期构建事件，但我就是不知道在哪里。该事件应该在每次构建 clang 之后发生，而不考虑更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T06:42:59.387

您需要带有签名和关键字的[add_custom_command()](http://cmake.org/cmake/help/cmake-2-8-docs.html#command:add_custom_command)函数。`TARGET``POST_BUILD`

例如

```
add_custom_command(TARGET mytarget POST_BUILD
  COMMAND scp mytarget foo@bar
) 
```

# c - 冒泡排序无法正常工作

> ID：10335404
> 
> 赞同：-1
> 
> 时间：2012-04-26T14:21:34.053
> 
> 标签：c, bubble-sort

```
do
{
    swap=false;
    for(int i=0; i<256; i++)
    {
    if(pd[i]<pd[i+1])
    {
        int temp=pd[i];
            pd[i]=pd[i+1];
            pd[i+1]=temp;
        swap=true;
        }
    }
}
while(swap); 
```

它只正确返回前两个结果，其余为 0。我正在对浮点数进行排序。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-26T14:22:48.747

> 我正在整理花车。

在这种情况下，`temp`必须是类型`float`：

```
float temp=pd[i]; 
```

否则，您每次进行交换时`pd[i]`都会截断。`int`

此外，如果您的`float`数组可能包含[NaN](http://en.wikipedia.org/wiki/NaN)，则在比较时需要格外小心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T14:25:32.690

`temp`是 type `int`，但你的数组是 type `float`...

# php - 远程服务器上的站点：“未指定输入文件。”

> ID：10335417
> 
> 赞同：0
> 
> 时间：2012-04-26T14:22:15.690
> 
> 标签：php, flash, .htaccess, kohana

我的网站使用前端 Flash 和后端 Kohana。我的后端面板在本地工作。但是在远程服务器上打开管理面板时，会出现这个问题：

“没有指定输入文件。”

我怎么解决这个问题？

编辑：

那是我的 .htaccess 文件：

```
# Turn on URL rewriting
RewriteEngine On
# Put your installation directory here: If your URL is www.example.com/, 
# use / If your URL is www.example.com/kohana/, use /kohana/
RewriteBase /
# Do not enable rewriting for files or directories that exist

RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d

# For reuests that are not actual files or directories, Rewrite to 
# index.php/URL

#RewriteRule ^/$ /index.php?langKey=$1 [QSA]
RewriteRule ^(.*)$ /index.php/$1 [PT,L] 
```

当我写 mysite.com/index.php/admin 后端工作。但我想要 mysite.com/admin

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T15:00:42.663

尝试将最后一行更改为

```
RewriteRule .* /index.php?kohana_uri=$0 [QSA] 
```

它在 apache php-fcgi 配置上对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:30:07.393

此消息表示您看不到站点目录。确定 index.php 存在并且它是可读的。在一些 nginx 配置中也没有使用 .htaccess

# java - libgdx 可用于 2d 游戏吗？

> ID：10335423
> 
> 赞同：6
> 
> 时间：2012-04-26T14:22:36.640
> 
> 标签：java, android, windows, libgdx

有没有人有使用 libgdx 的经验，它适用于 2d 图形？我打算将它用于 Android/Windows 游戏，但如果我正在制作 2d 游戏，我不确定它是否是一个好的选择。您是否可以推荐更好的 2d 图形解决方案？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-26T20:31:40.467

libgdx 非常适合 2D。如果你想要从 libgdx 中绘制的只是在屏幕上绘制，你可以只使用[SpriteBatch 。](http://code.google.com/p/libgdx/wiki/SpriteBatch)如果您想要更多的结构（您可能会这样做），您还可以使用 2D 场景图[scene2d](http://code.google.com/p/libgdx/wiki/scene2d)。使用scene2d时，您创建[`Actor`](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/scenes/scene2d/Actor.html)s并将它们添加到[`Stage`](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/scenes/scene2d/Stage.html)，然后libgdx为您调用它们的update、draw和touchevent函数。

libgdx 还包括用于菜单的[scene2dui](http://code.google.com/p/libgdx/wiki/scene2dui)，它基于相同的场景图（按钮从`Actor`等子类化）。

为了帮助开始使用 scene2d，我发现这真的很有帮助： [http ://steigert.blogspot.com/2012/02/1-libgdx-tutorial-introduction.html](http://steigert.blogspot.com/2012/02/1-libgdx-tutorial-introduction.html)

最后但同样重要的是，如果您希望为 Android*和*桌面开发，没有比 libgdx 更好的方法了，因为 libgdx 开箱即用。（请注意，这也使开发*变得更加容易*，因为您不必通过模拟器或设备运行您的应用程序来进行每次小测试。）

编辑：更新的链接

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T14:26:06.287

当然它可以用于2D游戏。试试[这个](https://play.google.com/store/search?q=libgdx%20&c=apps)搜索例子。

我可以推荐 Android 最好的 2D 引擎之一：[AndEngine](http://andengine.org)
它是免费的、开源的、拥有庞大的社区、大量示例和教程以及在 Google Play Market 中发布的应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T09:45:39.907

这不是经典教程，它是使用 scene2d 和 actor 用 libgdx 0.96+ 编写的源代码的演示游戏，还包括 box2d：[http ://minimaldevelop.com/blog/libgdx-scene2d-game-example-code](http://minimaldevelop.com/blog/libgdx-scene2d-game-example-code)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-20T23:51:59.897

虽然很多 libgdx 都是为 2d 量身定制的，但它绝不会限制您使用 2d

这是使用 3D 与 GLES 2.0 着色器和动态库与 libGDX [http://www.youtube.com/watch?v=W9lfjaaEO-Q的示例](http://www.youtube.com/watch?v=W9lfjaaEO-Q)

# spring - 无法获取 sessionFactory

> ID：10335426
> 
> 赞同：0
> 
> 时间：2012-04-26T14:22:43.317
> 
> 标签：spring, hibernate, sessionfactory, null-pointer

我的带有spring和hibernate的java项目，无法获取sessionFactory。当我使用它时，它一直为空。配置：

```
<bean id="sessionFactory"
    class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
    <property name="dataSource">
        <ref bean="dataSource" />
    </property>
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">
                org.hibernate.dialect.Oracle9Dialect
            </prop>
        </props>
    </property>
</bean>

<bean id="test" class="test.Test">
    <property name="sessionFactory" ref="sessionFactory"></property>
</bean>` 
```

Test.java 的主要代码是

```
 private SessionFactory sessionFactory;

    public void setSessionFactory(SessionFactory sessionFactory) {
        this.sessionFactory = sessionFactory;
    }
    public SessionFactory getSessionFacoty(){
        return this.sessionFactory;
    }
        public static void main(String[] args) {
    // TODO Auto-generated method stub
    Test test = new Test();
    System.out.println(test.sessionFactory);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T14:27:31.973

您在该`main`方法中的测试实际上并未使用 Spring 进行注入。您需要加载`applicationContext.xml`然后从中获取`test`bean。

所以你可以在你的主要做这样的事情：

```
ApplicationContext context =
new ClassPathXmlApplicationContext(new String[] {"applicationContext.xml"});

Test test = (Test)context.getBean("test"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T14:29:12.830

您还需要从 Spring 上下文中获取 Test 对象。加载您的配置 xml 并创建上下文并从上下文中获取对象

例如。

```
Test test = (Test) context.getBean("test"); 
```

# c# - 如何从我的 C 代码调用 C# dll 中的方法？

> ID：10335435
> 
> 赞同：6
> 
> 时间：2012-04-26T14:23:18.917
> 
> 标签：c#, c++, c

我正在尝试在基于 Lisp 的第 3 方程序（我们称之为 ABC）和我自己编写的 C# 程序（我们称之为 DEF）之间创建一个集成。问题是 ABC 只能调用用 C 或 Fortran 创建的程序集。所以我开始学习 C，我得到了“hello world”测试，ABC 调用我的 C dll 并得到“hello world”作为回报。我尝试使用显式加载和 GetProcAddress 从 C 代码调用我的 DEF dll。如果我调用另一个 C dll，但不是 C# dll，它会起作用。现在我想知道我是否必须学习 C++ 并从 C++ 调用 C# 来创建这个漂亮的调用链：

ABC -> C -> C++ -> DEF(C#) -> C++ -> C -> ABC

如果这是唯一的方法，有人可以帮我举一些例子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T14:31:41.580

> 创建 .NET 程序集时，您可以设置一个复选框以使程序集注册为 COM 互操作。这将允许您从任何可以调用 COM 的语言访问它。（C 不行吗？我已经很久没有接触 C 或 C++ 了。）
> 
> 配置属性 -> 项目属性的构建页面。查找“注册 COM 互操作”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T14:29:19.590

使用[此项目](https://sites.google.com/site/robertgiesecke/Home/uploads/unmanagedexports)将 C# 函数导出为本机入口点。

# ruby-on-rails-3 - 向自定义验证器添加错误消息

> ID：10335438
> 
> 赞同：9
> 
> 时间：2012-04-26T14:23:20.057
> 
> 标签：ruby-on-rails-3, rspec2, customvalidator, custom-errors

我有一个自定义验证器，当它失败但无法输出时，我试图输出一条错误消息。有人可以告诉我我是否在正确的地方这样做。

```
class User < ActiveRecord::Base
  self.table_name = "user"

  attr_accessible :name, :ip, :printer_port, :scanner_port

  validates :name,        :presence => true,
                          :length => { :maximum => 75 },
                          :uniqueness => true                          

  validates :ip,          :length => { :maximum => 75 },
                          :allow_nil => true     

  validates :printer_port, :presence => true, :if => :has_association? 

  validates :scanner_port, :presence => true, :if => :has_association?          

  def has_association?
    ip != nil
  end
end 
```

我有它如下：

```
validates :printer_port, :presence => true, :message => "can't be blank", :if => :has_wfm_association? 
```

但是收到错误

```
Unknown validator: 'MessageValidator' 
```

当我试图将消息放在验证器的末尾时，逗号分隔 has_association? 把问号和逗号变成橙色

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-26T14:46:33.790

和参数应该在散列`message`中：`if``presence`

```
validates :printer_port, :presence => {:message => "can't be blank", :if => :has_wfm_association?} 
```

这是因为您可以在一行中加载多个验证：

```
validates :foo, :presence => true, :uniqueness => true 
```

如果您尝试以您的方式或`if`条件添加消息，Rails 将不知道应用消息/条件的验证。因此，您需要为每个验证设置消息：

```
validates :foo, :presence => {:message => "must be present"},
                :uniqueness => {:message => "must be unique"} 
```

# html - CSS中的“_height”是什么意思？

> ID：10335446
> 
> 赞同：7
> 
> 时间：2012-04-26T14:24:16.957
> 
> 标签：html, height, css

我熟悉

```
height 
```

和

```
min-height 
```

但是在我正在查看的代码中，那是`_height: 100px` 什么？它是IE的东西吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-26T14:25:11.060

这是一个[CSS hack](http://www.webdevout.net/css-hacks#unrecommended-vendor_prefix)。

IE6 将忽略下划线并将其读作`height`; 真正的浏览器会（正确地）忽略整行。

# asp.net - 如何在我的操作方法中从数据库中检索对象属性值？

> ID：10335447
> 
> 赞同：0
> 
> 时间：2012-04-26T14:24:22.910
> 
> 标签：asp.net, asp.net-mvc-3

我有以下 Post Edit 操作方法，其中包括一个 [Bind] 列表以限制模型绑定器将绑定的属性：-

```
 [HttpPost]
public ActionResult Edit(Bind(Include="Note,DoctorID,VisitID,StatusID")] Visit visit) 
        {
if ((visit.EditableByAssingedDoctor(User.Identity.Name)) || (visit.EditableByCreatedBy(User.Identity.Name)))
            {  try
                {if (ModelState.IsValid)
                    { entities.Entry(visit).State = EntityState.Modified;
                        repository.Save();
                        return RedirectToAction("Index");   } }
catch (DbUpdateConcurrencyException ex)
                {   var entry = ex.Entries.Single();
                    var clientValues = (Visit)entry.Entity;
//code goes here 
```

但是由于访问对象包含绑定列表中未包含的其他属性，所以我如何从数据库中检索访问对象属性的当前值。提示：- 我正在使用实体框架和数据库优先方法。BR

**更新：-** 这是 GET EDIT 操作方法：-

```
public ActionResult Edit(int id)
        {

            Visit visit = repository.GetVisit(id);
            if ((visit.EditableByAssingedDoctor(User.Identity.Name)) || (visit.EditableByCreatedBy(User.Identity.Name)))
            {

                ViewBag.DoctorID = new SelectList(Membership.GetAllUsers(), "Username", "Username", visit.DoctorID);
                ViewBag.StatusID = new SelectList(repository.FindAllVisitStatus(), "StatusID", "Description", visit.StatusID);

                return View(visit);
            }
            else { return View("NotFound");}
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T14:36:57.630

看起来只有注释是可编辑的，除了有时状态也是可编辑的？根据[您的其他相关问题](https://stackoverflow.com/q/10326538/1284283)。因为我不知道你的 HTTPGet 方法是什么样的，所以我在这里很危险，而且我对 EF 生疏了。

我排除了必要的检查、尝试/捕获等...

```
var dbVisit = repository.GetVisit(visit.VisitId);
dbVisit.Note = visit.Note; // if this is permissible
if (dbVisit.IsEditable(...)){
     ... whatever is permissible here ...
}
repository.UpdateVisit(dbVisit); // possibly inside the if clause above
... etc ... 
```

# c - close() x86_64 系统调用奇怪的返回值

> ID：10335448
> 
> 赞同：16
> 
> 时间：2012-04-26T14:24:23.057
> 
> 标签：c, kernel, x86-64, system-calls

我的 xinetd 守护进程在内核升级（从 2.6.24 到 2.6.33）后突然停止工作。我运行了一个 strace 并发现了这个：

```
[...]
close(3)                                = 0
munmap(0x7f1a93b43000, 4096)            = 0
getrlimit(RLIMIT_NOFILE, {rlim_cur=8*1024, rlim_max=16*1024}) = 0
setrlimit(RLIMIT_NOFILE, {rlim_cur=1024, rlim_max=1024}) = 0
close(3)                                = 4294967287
exit_group(1)                           = ? 
```

所以基本上，看起来关闭系统调用返回的东西不同于 0 或 -1

我做了几个测试，似乎它只发生在 64 位可执行文件中：

```
$ file closetest32
closetest32: ELF 32-bit LSB executable, Intel 80386, version 1 (SYSV), statically linked, not stripped
$ strace closetest32
execve("./closetest32", ["closetest32"], [/* 286 vars */]) = 0
[ Process PID=4731 runs in 32 bit mode. ]
open("/proc/mounts", O_RDONLY)          = 3
close(3)                                = 0
close(3)                                = -1 EBADF (Bad file descriptor)
_exit(0)                                = ?

$ file closetest64
closetest64: ELF 64-bit LSB executable, AMD x86-64, version 1 (SYSV), statically linked, not stripped
$ strace closetest64
execve("./closetest64", ["closetest64"], [/* 286 vars */]) = 0
open("/proc/mounts", O_RDONLY)          = 3
close(3)                                = 0
close(3)                                = 4294967287
_exit(0)                                = ? 
```

我正在运行以下内核：

```
Linux foobar01 2.6.33.9-rt31.64.el5rt #1 SMP PREEMPT RT Wed May 4 10:34:12 EDT 2011 x86_64 x86_64 x86_64 GNU/Linux 
```

最糟糕的是，我无法在另一台具有相同内核的机器上重现该错误。

有任何想法吗 ？

编辑：根据要求：这是用于 closetest32 和 closetest64 的代码

closetest32.asm：

```
.section .data

filename:
    .ascii "/proc/mounts"

.section .text
.globl _start
_start:
    xorl %edi, %edi
    movl $5, %eax # open() i386 system call
    leal filename, %ebx # %ebx ---> filename
    movl $0, %esi # O_RDONLY flag into esi
    int $0x80

    xorl %edi, %edi
    movl $6, %eax # close() i386 system call
    movl $3, %ebx # fd 3
    int $0x80

    xorl %edi, %edi
    movl $6, %eax # close() i386 system call
    movl $3, %ebx # fd 3
    int $0x80

    ## terminate program via _exit () system call
    movl $1, %eax # %eax =  _exit() i386 system call
    xorl %ebx, %ebx # %ebx = 0 normal program return code
    int $0x80 
```

编译为：

```
as test32.asm -o test32.o --32
ld -m elf_i386 test32.o -o closetest32 
```

closetest64.asm：

```
.section .data

filename:
    .ascii "/proc/mounts"

.section .text
.globl _start
_start:
    xorq %rdi, %rdi
    movq $2, %rax # open() system call
    leaq filename, %rdi # %rdi ---> filename
    movq $0, %rsi # O_RDONLY flag into rsi
    syscall

    xorq %rdi, %rdi
    movq $3, %rax # close() system call
    movq $3, %rdi # fd 3
    syscall

    xorq %rdi, %rdi
    movq $3, %rax # close() system call
    movq $3, %rdi # fd 3
    syscall

    ## terminate program via _exit () system call
    movq $60, %rax # %rax = _exit() system call
    xorq %rdi, %rdi # %rdi = 0 normal program return code
    syscall 
```

汇编：

```
as test64.asm -o test64.o
ld test64.o -o closetest64 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:41:35.200

正如预期的那样，回滚到以前的内核版本解决了这个问题。我不是真正的内核专家，但据我了解，@R.. 给出的答案是有道理的：

> 这是一个 64 位的机器，所以 1<<32-9 永远不会出现。问题是内核在内部使用 unsigned 而不是 int 作为其中一些函数的返回值，然后返回 -EBADF 减少模 2^32 而不是模 2^64
> 
> 问题是处理系统调用错误返回的 libc 系统调用包装器中的通用代码在进行比较时必须将返回值视为一个长整数（因为对于某些系统调用，它可能是一个指针或长整数）以查看它是否是一个小的负数表示错误的值。但是内核返回的 (long)(unsigned)-9 与 (long)-9 非常不同。或 (unsigned long)-9 （其中任何一个都可以）。

# php - 如何在zen-cart中从一个页面重定向到另一个页面时解决错误

> ID：10335456
> 
> 赞同：0
> 
> 时间：2012-04-26T14:24:58.483
> 
> 标签：php, redirect, zen-cart

我想在更改下拉列表中的选项时更新数据库的值。更新后 ctrl 重定向回订单页面。现在更新工作正常，但无法返回订单页面。我为此使用以下代码。

orders.php 中的代码

```
<select name="order_status" onchange="update(this.value,<?php echo $row['orders_id'];?>)">
    <option value="1" <?php if($row['orders_status']=='1'){ ?>selected="selected"<?php } ?>>In process</option>
    <option value="2"<?php if($row['orders_status']=='2'){ ?>selected="selected"<?php } ?>>Processed</option>
    <option value="3"<?php if($row['orders_status']=='3'){ ?>selected="selected"<?php } ?>>Dispatched</option>
    </select>

            <script>
            function update(vals,order){
                window.location="index.php?main_page=orders&val="+vals+"&id="+order;
            }
            </script>

<?php
if(($_REQUEST['id']) && ($_REQUEST['val'])){

    $manufacturers = $db->Execute("update orders set orders_status = '{$_REQUEST['val']}'
                                    where orders_id ='{$_REQUEST['id']}'");

if($manufacturers == '1'){
zen_redirect(zen_href_link('orders', '', $request_type));
}
} 
```

?>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T03:41:04.353

您的代码中有几个问题：

1.  您的代码中存在严重的 SQL 注入漏洞。在数据库查询中使用它们之前，您需要对输入进行清理。如果有人发现您的页面并尝试使用恶意输入，他们可能会对您的数据库造成严重损害。

2.  与字符串值进行比较时，不能使用数据库对象作为操作数。

    ```
    if($manufacturers == '1'){
      zen_redirect(zen_href_link('orders', '', $request_type));
    } 
    ```

您可能只用 zen_redirect 行替换它，而不使用 if() 语句，因为无论如何您都会执行重定向。

1.  然后就是为什么要在最初没有管理权限的店面页面上执行管理更新任务的整个问题。

# delphi - 自上而下迭代通用集合（TDictionary）

> ID：10335457
> 
> 赞同：3
> 
> 时间：2012-04-26T14:25:02.543
> 
> 标签：delphi, sorting, collections, delphi-xe

我有一本 TDictionary。它充满了广泛的循环。当循环完成时，我需要用更多的分数（整数）检索 10 个键（字符串）。实现这一目标的最有效方法是什么？

在 Objective-C(Cocoa) 中，我这样做：

```
NSArray *top_words_sorted_array = [top_words_dictionary keysSortedByValueUsingSelector:@selector(compare:)]; 
```

然后迭代新的排序数组。我怎样才能在德尔福中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T15:26:08.050

与您的 Cocoa 代码等效的 Delphi 代码是：

```
type
  TScorePair = TPair<string,Integer>;
var
  ScoresArray: TArray<TScorePair>;
....
ScoresArray := Scores.ToArray;
TArray.Sort(ScoresArray,
  TComparer<TScorePair>.Construct( 
    function(const L, R: TScorePair): Integer
    begin
      Result := R.Value - L.Value;
    end
  )
); 
```

If your dictionary is very large then this will not be the most efficient solution. On the other hand, it's probably the quickest and easiest approach to implement.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:47:55.360

您需要以地图（字典）的形式访问它，还是一个普通的数组就足够了？

如果您必须将其作为地图，我会看一下[DeHL.Collections](http://code.google.com/p/delphilhlplib/)，也许可以满足`DeHL.Collections.DoubleSortedBidiMap`您的需求。项目页面说它已停产，但我每天都使用它，从来没有问题。

# c# - 如何从编码的 UI 测试中创建可执行文件（最好是 .exe 而不是命令行）？

> ID：10335458
> 
> 赞同：5
> 
> 时间：2012-04-26T14:25:03.207
> 
> 标签：c#, visual-studio

我正在尝试从打开浏览器并执行一组操作的编码 UI 测试中创建一个可执行文件。我更喜欢一个简单的 .exe 文件，而不是使用批处理文件或使用 MS Test Agent，以便能够跨计算机运行它而不会出现问题。欢迎任何其他在不使用 Visual Studio 的情况下通过简单的单击执行编码 UI 测试的方式。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:29:00.820

您不能从中创建 .exe 文件，`CodedUi Project`但可以为此使用另一个项目。

**步骤1**

创建您的`CodedUi Project`. 使用`CodedUi Test Builder`来创建`TestMethod(s)`执行您想要的操作的您。

**第2步**

创建另一个引用您的项目`CodedUi Test Project`并调用您的记录`Test Methods`。如果您只需要运行一种方法，那么创建一个简单的`Console Application`. 如果您需要更复杂的东西（例如选择`CodedUI Test Method`运行），a`Windows Form Application`会更合适。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T17:03:35.170

我知道已经晚了，反正这样更能服务于别人。

您可以将此工作委托给 MSTest，您可以执行 .bat 或制作一个控制台应用程序来执行以下操作：

```
set MSTestEXE=%PROGRAMFILES%\Microsoft Visual Studio 10.0\Common7\IDE\MSTest.exe
"%MSTestEXE%" /testcontainer:CodedUITest\bin\Debug\CodedUITest.dll 
```

**CodedUITest.dll**是生成 Visual Studio 的 dll。

**MsTest**将执行所有测试，在 CMD 上显示结果，甚至生成**TestResult.trx**文件。

# java - FIXML 与 QuickFix/J

> ID：10335459
> 
> 赞同：2
> 
> 时间：2012-04-26T14:25:03.930
> 
> 标签：java, quickfix, fix-protocol

有人使用 QuickFIX/J 处理 FIXML 消息吗？据我了解，quickfix/j 尚不支持开箱即用的 fixml。关于如何最好地解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T10:31:46.347

您可以使用 QuickFIX/J 使用标签 212/213 (XmlData) 发送和接收 FIXML 消息。除了提供传输之外，QuickFIX/J 实际上并没有对 XML 做任何事情。但是，您可以使用 JAXB 或类似技术轻松地将 FIXML 绑定到 Java 类。例如，您可以创建接口的抽象实现，该`quickfix.Application`接口将解析在 中接收到的 FIXML`quickfix.Message`并将其传递给回调方法。它还可以有一个自定义发送方法，将 Java 对象格式化为 FIXML（同样，使用 JAXB 之类的东西），将 XML 放入标签 212/213，然后将消息提交给 QuickFIX/J 引擎。然后，您的基于 FIXML 的应用程序将使用此子类。

# sinatra - 在 Sinatra 上持久化来自 Haml 的 mongoid 父文档和嵌入文档

> ID：10335462
> 
> 赞同：1
> 
> 时间：2012-04-26T14:25:19.453
> 
> 标签：sinatra, mongoid, haml

我有以下模型：

```
class Entry
  include Mongoid::Document
  field :title, type: String
  field :description, type: String
  field :made, type: Date
  embeds_many :images
  embeds_many :videos
  embeds_many :files
  embeds_many :tags
  accepts_nested_attributes_for :images, :videos, :files, :tags
  validates_presence_of :title, :description, :tags
  validates_uniqueness_of :title, :description
end

class Tag
  include Mongoid::Document
  field :tag, type: String
  embedded_in :entry
  embedded_in :note
end 
```

发布路线如下所示：

```
post '/portfolio/new' do
  a = (params[:entry])
  a['tags_attributes']['0']['tag'].downcase.split(", ").each_with_index{|value, index| a['tags_attributes'][index.to_s] = {"tag" => value} }
  b = Entry.new(a)
  b.safely.save!
  redirect "portfolio/show/#{b._id}"
end 
```

我的haml输入看起来像：

```
%label{:for => "tags"} Tags:
%input{:name => "entry[tags_attributes[0[tag]]]"} 
```

我是 Ruby/Sinatra/Mongoid 的新手，所以我仍在尝试弄清楚如何正确访问文档属性。

我想做的是处理http post信息并能够（几乎立即）将其保存到mongodb。

将输入值放置在散列上正确位置的 haml 方法是我发现的一种通过反复试验来工作的方法。但它并不觉得 DRY，肯定有更好的方法来编写嵌入文档吗？特别是 entry[tags_attributes[0[tag]]] 感觉很尴尬，有没有更好的写法？

同样在我的路线中，为了打破我拥有的标签字符串并将其作为单独的嵌入文档存储回哈希结构，然后再保存。我觉得这是解析这些信息的一种非常迂回的方式。

处理此问题的最佳做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T01:55:43.640

哈姆

```
%input{name: 'entry[tags_attributes][][tag]', value: t.tag} 
```

路线简单

```
post '/portofolio/new' do
  Entry.new(params[:entry])
  ...
end 
```

注意编辑/放置不要忘记嵌入的ID

```
%input{type: 'hidden', name: 'entry[tags_attributes][][id]', value: t.id} 
```

# syntax-highlighting - 如何在 Blogger 上设置语法荧光笔？

> ID：10335463
> 
> 赞同：71
> 
> 时间：2012-04-26T14:25:23.377
> 
> 标签：syntax-highlighting, blogger, syntaxhighlighter

如何在 Blogger 的新界面上设置语法荧光笔？我确实尝试了很多选择，但没有任何效果。请提出任何建议。

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2012-06-01T10:44:37.027

**1.** 首先，备份您的博客模板
**2.** 之后打开您的博客模板（在编辑 HTML 模式下）并复制 [此链接中给出](http://syntaxhighlighter.googlecode.com/svn/trunk/Styles/SyntaxHighlighter.css)`</b:skin>`的所有 css 在标签之前
**3.**在标签之前 粘贴以下`</head>`代码

```
<script src='http://syntaxhighlighter.googlecode.com/svn/trunk/Scripts/shCore.js' type='text/javascript'></script>
<script src='http://syntaxhighlighter.googlecode.com/svn/trunk/Scripts/shBrushCpp.js' type='text/javascript'></script>
<script src='http://syntaxhighlighter.googlecode.com/svn/trunk/Scripts/shBrushCSharp.js' type='text/javascript'></script>
<script src='http://syntaxhighlighter.googlecode.com/svn/trunk/Scripts/shBrushCss.js' type='text/javascript'></script>
<script src='http://syntaxhighlighter.googlecode.com/svn/trunk/Scripts/shBrushDelphi.js' type='text/javascript'></script>
<script src='http://syntaxhighlighter.googlecode.com/svn/trunk/Scripts/shBrushJava.js' type='text/javascript'></script>
<script src='http://syntaxhighlighter.googlecode.com/svn/trunk/Scripts/shBrushJScript.js' type='text/javascript'></script>
<script src='http://syntaxhighlighter.googlecode.com/svn/trunk/Scripts/shBrushPhp.js' type='text/javascript'></script>
<script src='http://syntaxhighlighter.googlecode.com/svn/trunk/Scripts/shBrushPython.js' type='text/javascript'></script>
<script src='http://syntaxhighlighter.googlecode.com/svn/trunk/Scripts/shBrushRuby.js' type='text/javascript'></script>
<script src='http://syntaxhighlighter.googlecode.com/svn/trunk/Scripts/shBrushSql.js' type='text/javascript'></script>
<script src='http://syntaxhighlighter.googlecode.com/svn/trunk/Scripts/shBrushVb.js' type='text/javascript'></script>
<script src='http://syntaxhighlighter.googlecode.com/svn/trunk/Scripts/shBrushXml.js' type='text/javascript'></script> 
```

**4.**在标签 前粘贴以下代码`</body>`。

```
<script language='javascript'>
dp.SyntaxHighlighter.BloggerMode();
dp.SyntaxHighlighter.HighlightAll('code');
</script> 
```

**5.** 保存博客模板。
**6.** 现在语法高亮已经可以使用了，你可以将它与`<pre></pre>`标签一起使用。

```
<pre name="code">
...Your html-escaped code goes here...
</pre>

<pre name="code" class="php">
    echo "I like PHP";
</pre> 
```

**7.你可以**[在这里](http://accessify.com/tools-and-wizards/developer-tools/quick-escape/default.php) 转义你的代码。
**8.** [这里](http://code.google.com/p/syntaxhighlighter/wiki/Languages)是**`<class>`**属性支持的语言列表。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-04-29T17:52:32.597

结帐[http://oneqonea.blogspot.com/2012/04/how-do-i-add-syntax-highlighting-to-my.html](http://oneqonea.blogspot.com/2012/04/how-do-i-add-syntax-highlighting-to-my.html)

这是一个非常简单的“SyntaxHighlighter for Blogger”教程，包含屏幕截图和所有内容。

您应该只需几分钟即可启动并运行。

此外，本教程是围绕您所指的“新界面”构建的。

希望这可以帮助。快乐编码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T22:40:41.017

根据您的模板，SyntaxHighlighter JavaScript 代码可能会在内容加载之前运行。在这种情况下，将代码更改为在短暂超时后运行应该可以解决问题。`<head>`在您的模板 HTML中尝试此操作：

```
<script type="text/javascript">
window.setTimeout(function() {
    SyntaxHighlighter.config.bloggerMode = true;
    语法Highlighter.all();
}, 10);
</脚本>
```

您可以在调用`ScriptHighlighter.all()`.

如果您想自定义 SyntaxHighlighter 代码显示的外观和感觉，请添加一些 CSS，如下所示：

```
.syntaxhighlighter 代码 {
  字体家族：康索拉斯！重要；
  字体大小：10px！重要；
}
```

有`!important`必要覆盖 SyntaxHighlighter 主题定义。

# scala - 在循环中填充地图 [Scala]

> ID：10335465
> 
> 赞同：4
> 
> 时间：2012-04-26T14:25:25.787
> 
> 标签：scala, map, for-loop

恐怕这是另一个菜鸟问题。

我想做的是使用 a`Map`来计算一个单词在诗歌中出现的频率*……m*然后将结果打印到控制台。我去了以下我认为有效的代码（虽然可能不太习惯）：

```
val poe_m="""Once upon a midnight dreary, while I pondered weak and weary,
            |Over many a quaint and curious volume of forgotten lore,
            |While I nodded, nearly napping, suddenly there came a tapping,
            |As of some one gently rapping, rapping at my chamber door.
            |`'Tis some visitor,' I muttered, `tapping at my chamber door -
            |Only this, and nothing more.'"""

val separators=Array(' ',',','.','-','\n','\'','`')
var words=new collection.immutable.HashMap[String,Int]
for(word<-poe_m.stripMargin.split(separators) if(!word.isEmpty))  
    words=words+(word.toLowerCase -> (words.getOrElse(word.toLowerCase,0)+1))

words.foreach(entry=>println("Word : "+entry._1+" count : "+entry._2)) 
```

据我了解，在 Scala 中，*不可变数据结构比**可变*数据结构更可取`val`，`var`因此我面临一个困境：如果结果是，`words`应该是`var`（允许每次迭代使用新的 map 实例）存储在一个*不可变* `Map`的同时`words`变成一个`val`意味着使用一个*可变* `Map`的。

有人能告诉我处理这个存在问题的正确方法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-26T14:37:30.657

在这种情况下，您可以使用`groupBy`and `mapValues`：

```
val tokens = poe_m.stripMargin.split(separators).filterNot(_.isEmpty)
val words = tokens.groupBy(w => w).mapValues(_.size) 
```

更一般地说，这是一个折叠的工作：

```
 val words = tokens.foldLeft(Map.empty[String, Int]) {
   case (m, t) => m.updated(t, m.getOrElse(t, 0) + 1)
 } 
```

关于折叠的[维基百科条目](http://en.wikipedia.org/wiki/Fold_%28higher-order_function%29)提供了一些很好的说明示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T14:39:41.700

好吧，在函数式编程中，最好使用一些不可变对象并使用函数来更新它们（例如返回更新后的映射的尾递归函数）。但是，如果您不处理繁重的负载，您应该更喜欢可变映射而不是使用 var，这不是因为它更强大（即使我认为应该如此），而是因为它更易于使用。

最后，Travis Brown 的答案是针对您的具体问题的解决方案，我的更多是个人哲学。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T14:39:55.150

我也是 Scala 的菜鸟，所以，可能有更好的方法来做到这一点。我想出了以下几点：

```
poe_m.stripMargin.split(separators)
     .filter(x => !x.isEmpty)
     .groupBy(x => x).foreach {
        case(w,ws) => println(w + " " + ws.size)
     } 
```

通过应用连续的函数，您可以避免对 vars 和 mutables 的需要

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T01:18:39.813

接下来的事情要归功于其他地方（特别是特拉维斯和丹尼尔），但有一个更简单的班轮需要离开。

```
val words = poe_m split "\\W+" groupBy identity mapValues {_.size} 
```

有一个简化，因为您不需要 stripMargin 因为正则表达式，正如 Daniel 所建议的那样处理边距字符。

如果需要，您可以保留 _.isEmpty 过滤以防止产生 ("" -> 1) 的空字符串的边缘情况。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-26T21:40:34.350

这就是 Martin Odersky 在非常好的书“Scala 编程：全面的分步指南，第 2 版”中的做法：

```
def countWords(text: String) = {
  val counts = mutable.Map.empty[String, Int]
  for (rawWord <- text.split("[ ,!.]+")) {
    val word = rawWord.toLowerCase
    val oldCount = 
      if (counts.contains(word)) counts(word)
      else 0
    counts += (word -> (oldCount + 1))
  }
  counts
} 
```

但是，它也使用可变 Map。

# php - 在php中删除所有与p标签不匹配的标签

> ID：10335470
> 
> 赞同：1
> 
> 时间：2012-04-26T14:25:34.847
> 
> 标签：php, regex

我想删除所有与起始 <p> 标记不匹配的标记。我有这样的：

```
 preg_replace("/<(?!p)>/", "", $html); 
```

但它不起作用。怎么了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T14:27:19.760

使用[`strip_tags()`](http://php.net/manual/en/function.strip-tags.php)，这就是它存在的目的。

```
$stripped = strip_tags( $str, '<p>' ); // Allow only paragraph tags 
```

在这里演示：[http ://codepad.org/NEUEBWg7](http://codepad.org/NEUEBWg7)

请注意，此功能不会触及允许标签上的属性。如果您正在过滤用户输入，请务必考虑诸如`onclick`和更多属性可能被滥用以执行一些不正当行为。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T14:29:11.930

strip_tags 是您所需要的。只需这样做：

```
$result=strip_tags($html,"<p>"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T14:27:30.897

最基本的，用于[`strip_tags()`](http://us3.php.net/manual/en/function.strip-tags.php)删除 HTML：

```
echo strip_tags($text, '<p>'); 
```

更好的是[HTML Purifier](http://htmlpurifier.org/)

# asp.net - 如何消除数据库事务期间的竞争条件 - 从数据库读取行数，计算输入，然后将值插入数据库？

> ID：10335473
> 
> 赞同：0
> 
> 时间：2012-04-26T14:25:43.493
> 
> 标签：asp.net, race-condition, llblgenpro

场景：保存函数首先从数据库中的一个表中读取总行数。根据行数，计算出唯一的输入值。该值包含在随后插入到同一个表中的行中。

问题：同一对象的两个实例同时执行保存功能。这里的“相同时间”是应用程序读取数据并将行插入数据库所花费的时间。所以，例如，

*   用户 A 单击保存按钮 >> 读取表中有 3 行 >> 计算 f(3) 作为新行的唯一输入值 >> 准备新行以插入表中...

*   用户 B 点击保存按钮 >>（因为用户 A 没有插入新行）读取表中有 3 行 >> 计算 f(3) 不是唯一值（错误！） >> ...

我该如何纠正这种情况？我无法更改数据库事务逻辑，因为不幸的是使用了抽象的 ORM 层。但是，我可以完全控制代码。任何建议都会非常有帮助。

我已经尝试在保存功能周围放置一个 lock() ，但它没有以某种方式帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:31:56.327

我最终利用数据库生成的 ID（自动增量）来进行计算。由于 rowcount 和 ID 不同步，因此通过将整数添加到新序列以匹配旧序列来调整新的自定义 id。

# c++ - 整数按整数文件读取

> ID：10335474
> 
> 赞同：0
> 
> 时间：2012-04-26T14:25:44.850
> 
> 标签：c++

我想读取文件，以便它应该逐个整数地读取。我已经逐行阅读了它，但我想一个整数一个整数地阅读它。

这是我的代码：

```
void input_class::read_array()
{    
        infile.open ("time.txt");
        while(!infile.eof()) // To get you all the lines.
        {
            string lineString;
            getline(infile,lineString); // Saves the line in STRING
            inputFile+=lineString;
        }
        cout<<inputFile<<endl<<endl<<endl;
        cout<<inputFile[5];

        infile.close();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T14:29:39.087

你应该做这个：

```
#include <vector>

std::vector<int> ints;
int num;
infile.open ("time.txt");
while( infile >> num)
{
    ints.push_back(num);
} 
```

循环将在到达 EOF 时退出，或者它尝试读取非整数。要详细了解循环的工作原理，请[在此处](https://stackoverflow.com/questions/7219062/whats-preferred-pattern-for-reading-lines-from-a-file-in-c)、[此处](https://stackoverflow.com/questions/6404352/c-rewrite-a-file-but-leaving-out-everything-before-a-word)和[此处](https://stackoverflow.com/questions/6931535/linux-segmentation-fault-in-c-due-to-the-function-ifstream)阅读我的答案。

另一种方法是：

```
#include <vector>
#include <iterator>

infile.open ("time.txt");
std::istream_iterator<int> begin(infile), end;
std::vector<int> ints(begin, end); //populate the vector with the input ints 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:27:39.560

您可以使用以下命令从 fstream 读取到 int [`operator>>`](http://www.cplusplus.com/reference/iostream/istream/operator%3E%3E/)：

```
int n;
infile >> n; 
```

# android - 在退出应用程序时停止线程

> ID：10335482
> 
> 赞同：0
> 
> 时间：2012-04-26T14:26:18.637
> 
> 标签：android, multithreading, session

退出我的应用程序时，我需要停止/中断我自己创建的线程。我怎样才能做到这一点？它应该是点击任何活动的主页按钮，它应该结束线程。

基本上我创建的线程充当会话，当一个注销或他的会话时间到期或应用程序关闭时，我需要停止线程。对于前两种情况，我已经做到了，但在第三种情况下我无法做到。事实上，一旦我在我的 logCat 中退出应用程序，我就可以看到线程，当它自然死亡时，我会收到一个 toast 通知（我显然不想要）。太棒了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T14:29:51.870

我不确定我真的理解你想要什么，但你应该检查与活动生命周期相关的方法：

=> [http://developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)

寻找

```
onPause()
onResume()
onStop() 
```

然后，在每个事件中，您都可以对线程做任何您想做的事情，例如停止它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T14:32:18.923

首先，由于Android的多任务系统，应用程序并没有真正退出。当 home 被击中时，应用程序被暂停，所以 onPaused 方法被调用。当您回击时，或者如果设备决定它需要更多内存，应用程序将被终止并调用 onDestroed（两者之间有一个步骤）。查看安卓生命周期。[这里](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)

如果我是您，您会将线程停止放在 onDestroyed 方法中，因为这是需要再次创建应用程序的地方，但是在销毁时会调用所有这些方法。

但是，在您的情况下，您似乎想要一些更像[Service](http://developer.android.com/reference/android/app/Service.html)的东西。服务就像一个活动，但在后台运行，没有 UI。就像潘多拉在没有应用程序启动的情况下播放音乐一样。使用服务，您可以从任何活动中启动它，并在任何活动被终止时结束它（onStop 或在 Destroy 上），您可以执行类似信号量的解决方案，当使用它的所有活动都被终止时，它会自行终止。当使用它的任何活动启动（onCreate 或 onStart）时，它会启动服务。然后您可以通过静态成员访问服务或在每个活动中保留它的实例，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T14:33:47.460

如果您想停止单个线程 yourThread.stop() 应该可以工作。否则使用爱斯特拉冈的答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T14:29:35.580

您需要在**onStop**方法中为所有活动中断线程。但它不是一种复杂的做事方式。可能还有其他一些解决方案，比如定义一个自定义类，它扩展了android的**Application**类，并使用静态方法在该类中设置您想要的逻辑等。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-04-26T14:31:53.407

这是邪恶的，但你有没有尝试

```
Process.killProcess(Process.myPid()); 
```

在你上次活动的 onDestroy 中？

否则，正如 estragon 所说， http: [//developer.android.com/reference/android/app/Activity.html#ActivityLifecycle](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)将是使用活动的正确方式

# java - 如何在不手动转换为 JSON 的情况下使用 Jersey 客户端发布 Pojo？

> ID：10335483
> 
> 赞同：10
> 
> 时间：2012-04-26T14:26:25.083
> 
> 标签：java, json, client, jersey, jackson

我有一个工作的 json 服务，看起来像这样：

```
@POST
@Path("/{id}/query")
@Consumes(MediaType.APPLICATION_JSON)
@Produces(JSON)
public ListWrapper query(@Context SecurityContext sc, @PathParam("id") Integer projectId, Query searchQuery) {
    ...
    return result
} 
```

查询对象看起来像这样，当发布该查询对象的 json 表示时，效果很好。

```
@XmlRootElement
public class Query {
    Integer id;
    String query;
    ... // Getters and Setters etc..
} 
```

现在我想从客户端填充该对象并使用 Jersey 客户端将该 Query 对象发布到服务并获得 JSONObject 作为结果。我的理解是，它可以在不先将其转换为 json 对象然后作为字符串发布的情况下完成。

我尝试过这样的事情，但我想我错过了一些东西。

```
public static JSONObject query(Query searchQuery){
    String url = baseUrl + "project/"+searchQuery.getProjectId() +"/query";
    WebResource webResource = client.resource(url);
    webResource.entity(searchQuery, MediaType.APPLICATION_JSON_TYPE);
    JSONObject response = webResource.post(JSONObject.class);
    return response;
} 
```

我正在使用泽西岛 1.12。

任何正确方向的帮助或指示将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T15:58:12.820

WebResource.entity(...) 方法不会更改您的 webResource 实例...它创建并返回一个包含更改的 Builder 对象。您对 .post 的调用通常是从 Builder 对象而不是从 WebResource 对象执行的。当所有请求都链接在一起时，这种转换很容易被掩盖。

```
public void sendExample(Example example) {
    WebResource webResource = this.client.resource(this.url);
    Builder builder = webResource.type(MediaType.APPLICATION_JSON);
    builder.accept(MediaType.APPLICATION_JSON);
    builder.post(Example.class, example);
    return;
} 
```

这是使用链接的相同示例。它仍在使用 Builder，但不太明显。

```
public void sendExample(Example example) {
    WebResource webResource = this.client.resource(this.url);
    webResource.type(MediaType.APPLICATION_JSON)
      .accept(MediaType.APPLICATION_JSON)
      .post(Example.class, example);
    return;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-26T14:41:41.140

如果您的 Web 服务生成 JSON，您必须使用以下`accept()`方法在客户端中处理它：

```
ClientResponse response = webResource.accept(MediaType.APPLICATION_JSON).post(searchQuery, MediaType.APPLICATION_JSON);
ListWrapper listWrapper = response.getEntity(ListWrapper.class); 
```

试试这个并给出你的结果。

# windows - 使用 VBS 脚本中的参数调用 ps1 脚本

> ID：10335487
> 
> 赞同：0
> 
> 时间：2012-04-26T14:26:48.797
> 
> 标签：windows, powershell, vbscript, login-script

我所有的用户都在使用基于 VBS 的登录脚本。在脚本的最后，[我想调用一个](https://stackoverflow.com/a/10304338/328397)带有改变信息气球内容的参数的 PS1。

VBS应该如何调用带参数的PS1？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T15:26:10.453

Jeffrey Snover 似乎有答案 - [http://blogs.msdn.com/b/powershell/archive/2008/07/25/invoking-powershell-from-vbscript-com.aspx](http://blogs.msdn.com/b/powershell/archive/2008/07/25/invoking-powershell-from-vbscript-com.aspx)

摘自博客 -

使用 ActiveXPosh，您可以执行以下操作：

```
Set ActiveXPosh = CreateObject("SAPIEN.ActiveXPosh")
if ActiveXPosh.Eval("Get-Process Winword") = vbTrue Then
     WScript.Echo "Word is running"
Else
     WScript.Echo "Word is NOT running"
End If 
```

很简单的东西！那么 - 它怎么能变得更好呢？是的——你猜对了，**ActiveXPosh 是免费的。** 这是一个美好的世界还是什么？

注意-我还没有尝试过。

# windows - 在 Windows 上创建 OpenGL 渲染上下文时出现白色闪烁

> ID：10335488
> 
> 赞同：1
> 
> 时间：2012-04-26T14:26:50.273
> 
> 标签：windows, opengl

我正在使用 ChoosePixelFormat、SetPixelFormat 等在 Windows 上创建 OpenGL 渲染上下文。这一切都很好，但是，就在绘制 OpenGL 内容之前，窗口设置为全白。简短，但仍然可见。

窗口类的背景画笔是GetStockObject(HOLLOW_BRUSH)，我不响应WM_ERASEBKGND或WM_PAINT，OpenGL上下文立即用黑色清除。这一切似乎都无关紧要。

如果我在运行时暂时关闭 OpenGL 渲染循环，隐藏然后显示窗口，我也可以重现此问题。这使它完全变白。

如果将窗口设置为 OpenGL 渲染目标，Windows 似乎正在清除窗口，并且为此使用白色。这是一个已知问题吗？有没有办法控制默认颜色？黑色会好很多。谢谢！

（使用带有 ATI Radeon HD5750 适配器的 Windows 7。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T16:54:25.237

我也有这个问题。我必须通过什么都不做并返回 true 来处理 WM_ERASEBKGND 消息以防止白色闪烁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T13:37:36.130

我的解决方案是在第一条 WM_PAINT 消息到达时绘制一些东西。

# javascript - 如何在 javascript 中乘以空格以用于 ActiveX FSO Write() 方法

> ID：10335493
> 
> 赞同：0
> 
> 时间：2012-04-26T14:27:13.057
> 
> 标签：javascript, jquery, activexobject, filesystemobject, fso

例如：

```
var a = " ";
var b = "";
b = a * 8;
alert(b +"this far to the right"); 
```

注意：我不想使用  ，因为 ActiveX FSO 将用于写入文本文件而不是 html 文件。所以它只需要是空格：

**我正在努力实现的更详尽的细节：**

我试图让 ActiveX FSO 在提交表单后从 HTML 订单表单写入文本文件，然后继续将订单写入文本文件。文本文件需要采用某种格式，Microsoft Dynamics 才能接受作为进口销售。

如下所示：**客户代码** *空间* **项目代码** *空间* **数量** *空间*：

**import.txt**减去带有槽的字符串长度 = 要填充的剩余空格。

```
C242299A *4 white spaces* 2890 *12 white spaces* 20 *6 white spaces*
[------------][----------------][--------]
12 char slots    16 char slots   8 char slots 
```

**write.js**将创建这个 import.txt 文件（这是我需要帮助的部分）

```
var customercode = document.getElementById("customercode").value;
var itemcode = document.getElementById("itemcode").value;
var quantity = document.getElementById("quantity").value;

var fso = new ActiveXObject("Scripting.FileSystemObject");
var s = fso.OpenTextFile(path+"import.txt",8,true,0);
//customer code string length must be measured to determine remaining spaces 
//to fill before item code can be entered.
//you only have 12 character slots before the next string "item code" can be entered
var remainingSpaces = "";
remainingSpaces = 12 - customercode.length;
spacefill1 = " " * remainingspaces;
remainingSpaces = 16 - itemcode.length;
spacefill2 = " " * remainingSpaces;
remainingSpaces = 8 - quantity.length;
spacefill3 = " " * remainingSpaces;
s.WriteLine(customercode+spacefill1+itemcode+spacefill2+quantity+spacefill3); 
```

假设创建一个如下所示的文本文件：

```
 C242299A      2890       20 
```

然后将其导入 Microsoft Dynamics。

**但问题是它不会乘以将空格视为 0/null 的空格 :(** 欢迎使用 Jquery 解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T14:45:43.033

要多次重复某个字符，请使用：

```
var max = 8;//times to repeat
var chr = "a";//char to repeat

console.log(new Array(max + 1).join(chr));//aaaaaaaa 
```

请注意，如果您使用空格执行此操作，它们将主要压缩成一个（但它们在那里）。

您可以使用`<pre>`标签显示每个空格（[演示](http://jsfiddle.net/kTjA7/)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-18T18:33:42.897

使用较新的 JS，您可以[`String.prototype.repeat()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/repeat)与模板文字一起使用来实现此目的。

```
const MAX_NUMBER_OF_SPACES = 5;
const EXAMPLE_TEXT = 'Hello World!';

for (let i = 0; i < MAX_NUMBER_OF_SPACES; i++) {
  console.log(`${' '.repeat(i)}${EXAMPLE_TEXT}`);
}
```

# c# - 是否可以在第一次 where 条件为真后停止查询？(linq 到 sql)

> ID：10335497
> 
> 赞同：4
> 
> 时间：2012-04-26T14:27:25.067
> 
> 标签：c#, linq-to-sql

是否可以在第一次`where`条件为真后停止查询？

我只想获得时间大于的第一条记录`timeParameter`。我现在拥有的是：

```
var records = from rec in table
              where rec.time > timeParameter
              select rec;
return records.FirstOrDefault(); 
```

数据库中的时间列是按升序排列的，所以第一次where条件为真时，不需要继续查询。我在数据库中有很多行，所以我希望查询尽快停止。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T14:29:31.893

您当前的代码将执行您的要求。

该`.FirstOrDefault()`方法短路。在这种情况下，它会生成一个以 开头的 SQL 查询，`SELECT TOP 1 ...`SQL Server 引擎知道这意味着它可以在找到第一项后停止评估。

当你说：

> 数据库中的时间列按升序排列...

你的意思是整个表是按时间列升序排列的吗？如果是这样，那么这些元素的自然顺序可能是正确的。不过，我会`order by`在那里发表声明，以确保您获得所需的订单。最坏的情况是查询引擎会因为不必要而丢弃它。

```
var records = from rec in table
              where rec.time > timeParameter
              order by rec.time
              select rec;
return records.FirstOrDefault(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T14:30:03.033

实际上，这应该停止。`records`是一个[IQueryable](http://msdn.microsoft.com/en-us/library/system.linq.iqueryable.aspx)，因此在您请求数据（通过 FirstOrDefault）之前不会运行，这将添加适当的停止。

基本上，当您将`records`变量分配给 LINQ 语句时，它只是作为 SQL 将被加载到内存*中*。但是，在您实际调用访问数据之前，它不会评估任何内容。此时，SQL 将根据您使用的任何扩展方法（`FirstOrDefault`在本例中）进行适当修改并实际执行。

但是，正如 Andrew Barber 指出的那样，您的查询需要实际声明`order by`否则它将在没有它的情况下运行。（除非该表在 DB 端真正排序为 DangerMonkey 对位点）

```
 from rec in table
          where rec.time > timeParameter
          order by rec.time
          select rec; 
```

PS。如果您想真正弄清楚这是如何工作的，那么您可以查看[表达式树](http://msdn.microsoft.com/en-us/library/bb397951.aspx)和[延迟执行](http://msdn.microsoft.com/en-us/library/bb943859.aspx)

# sql-server-2008-r2 - 从 SQLserver 2008 表在工作簿中创建多个 Excel 工作表

> ID：10335502
> 
> 赞同：0
> 
> 时间：2012-04-26T14:27:35.567
> 
> 标签：sql-server-2008-r2, export-to-excel

这是我第一次上这个论坛。我会尽力描述我的问题。

我的数据库中有一个名为 SerialExtract 的表，它有 4 个字段。产品编号、序列号、约束、体积。我需要为我的客户做的是将此数据加载到 Excel 工作簿中 - 我的表中的每个 Productnumber 都有一个选项卡（工作表），以及该选项卡上该产品的相关数据。选项卡需要是动态的（因为 productnumbers 会改变） - 这样每次我运行加载它都会刷新 excel 工作簿。

关于我应该使用什么类型的工具来完成此任务的任何建议？我最初的想法是使用 SSIS 或在 SqlServer 中编写一个可以写入 Excel 工作簿的 SPROC。我可以按产品遍历数据——只是不确定如何根据数据使用不同的选项卡写入 Excel。

谢谢！

倒钩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T18:01:27.220

在 Excel 中，有一个内置功能可以从 SQL 服务器查询数据并将数据加载到 Excel 电子表格中。旁注，您可以从各种外部源进行此动态连接，而不仅仅是 SQL Server。

只需在工作簿的每个电子表格中定义此查询即可使用此功能。这是一个屏幕截图，您可以在其中找到 Excel 2010 中的选项。

![在此处输入图像描述](../Images/a776a03f1a67f03a3dd2b3c9ae0300f9.png)

# c# - Winform标签页中的按钮隐藏

> ID：10335506
> 
> 赞同：0
> 
> 时间：2012-04-26T14:27:44.467
> 
> 标签：c#

我有一个 TabContro，因为我有两个名为 tabInsurence 和 tabPersonal 的标签页我在 Tabcontrol 之外有一个按钮。它显示一个标签页并在其他两个标签页中禁用。我写了这段代码，但从来没有工作

```
 private void tabPersonal_Click(object sender, EventArgs e)
    {
        btnSave.Visible = true;
    }
    private void tabPersonal_Click(object sender, EventArgs e)
    {
        btnSave.Visible = true;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T14:31:54.703

使用选定的索引更改事件来决定是否应根据选定的索引启用或禁用按钮。

```
private void tabControl1_SelectedIndexChanged(object sender, EventArgs e)
    {
        btnSave.Enabled = tabControl1.SelectedIndex == 0 ? true : false;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:37:07.600

您始终将其设置为可见。这是所需的功能吗？根据您的描述，听起来您希望它为其中一个选项卡隐藏（或禁用）。

检查以确保您的选项卡控件事件仍附加到方法（属性框中的事件或只需双击控件）。

另外，也许可以尝试选项卡控件上的选项卡更改事件。当用户点击标签页的背景时，您使用的点击事件可能是针对的。

# git - git 命令在 git bash 中不起作用（Windows 7 x64）

> ID：10335509
> 
> 赞同：5
> 
> 时间：2012-04-26T14:27:56.643
> 
> 标签：git, windows-7, installation

我按照 [http://help.github.com/win-set-up-git/](http://help.github.com/win-set-up-git/)上的帮助 在 Windows 7 x64 上安装 git (msysgit)。

在设置我的帐户之前，一切都很顺利。

但是一旦我尝试`git config --global user.name ......`了 git bash 总是向我展示 git 的用法，简而言之就是帮助。每个命令（`status`, `--version`, `diff`, `help`, `status`, ...）都显示相同的消息： `usage: git [--version] [--exec-path.......] ...`。

`ssh`运行良好，因为我可以参数化 ssh 密钥。如果我在 git 中输入错误的“sit”：找不到命令

谢谢你的帮助。我想我可能错过了安装中的一个选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T02:17:57.890

> 我遵循在 Windows 7 x64 上安装 git (msysgit) 的帮助。

除非您正在开发 Git，否则您不应该安装**msysgit 。**

您应该**为 Windows 安装 Git**。

## [code.google.com/p/msysgit/downloads/list?q=windows+installer](http://code.google.com/p/msysgit/downloads/list?q=windows+installer)

# sql - 使用 Case When 语句从两个表进行更新

> ID：10335510
> 
> 赞同：3
> 
> 时间：2012-04-26T14:27:56.893
> 
> 标签：sql, oracle, plsql, sql-update, plsqldeveloper

是否可以在 Oracle 中从两个可选表中更新表的列。我的意思是，有 2 个表的列完全相同，根据输入 Id，我想更新相关表。例如。

```
UPDATE CASE WHEN EXISTS (
    SELECT A.ID FROM Table_A A 
    WHERE  A.ID = 'B1'
    )
    THEN
      Table_A A 
      SET A.Status = '0'
      WHERE A.ID = 'B1'
    ELSE
      Table_B B
      SET B.Status = '0'
      WHERE B.ID = 'B1' 
```

其中 Table_A 和 Table_B 具有完全相同的列和不同的记录。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:36:32.450

我不认为单条语句是可能的，但你可以使用 PL/SQL 来实现它：

```
declare
VarCount number;

begin

SELECT  COUNT(*)
INTO    VarCount
FROM    Table_A
WHERE   ID = 'B1';

IF  VarCount > 1  THEN
    UPDATE  Table_A
    SET     Status = '0'
    WHERE   ID = 'B1';
ELSE
    UPDATE  Table_B
    SET     Status = '0'
    WHERE   ID = 'B1';
END IF; 
```

结尾;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T18:21:49.803

我真的很想知道为什么你会想要这个功能。我能想到的是您有很多数据，并决定使用 1 个“归档”表和 1 个“活动”表来拆分它。

在这种情况下，您可以简单地始终更新两个表。如果 id 不存在，则不会更新任何内容。它可能与首先从表 a 中按 id 选择，然后更新 a 或 b 一样快。您还可以使用 pl/sql 块以获得更好的性能。（它只会在必要时执行第二条语句）

```
create or replace procedure update_table(p_id in table_a.id%type)
as
begin
    update table_a
    set    status = 0
    where  id = p_id;

    -- only update table_b if table_a didn't update anything
    if sql%rowcount == 0 then
        update table_b
        set    status = 0
        where  id = p_id;
    end if;
end; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T08:49:02.727

开始更新 Table_A A SET STATUS = '0' WHERE A.ID = #ID#; 如果 sql%notfound 则
UPDATE Table_B B SET STATUS = '0' WHERE B.ID = #ID#; 万一; 结尾;

# vba - VBA：在非活动的excel过滤器中循环标准？

> ID：10335511
> 
> 赞同：2
> 
> 时间：2012-04-26T14:27:57.917
> 
> 标签：vba, filter, criteria

我正在寻找一种方法来循环遍历没有过滤掉任何内容的 excel 过滤器的标准（即所有标准都已启用）。当过滤器处于活动状态时，所有条件都将添加到数组类型的事物中，可以通过以下方式访问：

```
for each criteria in ActiveSheet.AutoFilter.Filters(filterColumn).Criteria1 
```

但是，当过滤器未激活时，Criteria1 和 Criteria2 方法给我一个错误并且似乎没有返回任何内容。没有办法遍历所有标准似乎很愚蠢，但到目前为止我还没有找到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:15:23.730

当您选择了 1 或 2 个标准时**，**您可以像这样简单地检索它们

```
Option Explicit

Sub sample()
    Dim rRange As Range
    Dim iFiltCrit As Long

    'Remove any filters
    ActiveSheet.AutoFilterMode = False

    Set rRange = Range("A1:B8")

    With rRange
        .AutoFilter Field:=1, Criteria1:="=1"

        Debug.Print Sheet1.AutoFilter.Filters(1).Criteria1
    End With

    'Remove any filters
    ActiveSheet.AutoFilterMode = False
End Sub 
```

当您有超过 2 个条件时，您可以按照您提到的那样循环，因为它们存储在一个数组中。

问题是当过滤器处于非活动状态时，即您可以看到所有内容，然后从内存中清除所有条件。请参阅此示例。我`ActiveSheet.ShowAllData`用来显示所有数据。

```
Option Explicit

Sub sample()
    Dim rRange As Range

    'Remove any filters
    ActiveSheet.AutoFilterMode = False

    Set rRange = Range("A1:B8")

    With rRange
        .AutoFilter Field:=1, Criteria1:="=1"

        Debug.Print ">"; Sheet1.AutoFilter.Filters(1).Criteria1

        '~~> Show all data
        ActiveSheet.ShowAllData

        Debug.Print ">>"; Sheet1.AutoFilter.Filters(1).Criteria1
    End With

    'Remove any filters
    ActiveSheet.AutoFilterMode = False

End Sub 
```

快照

![在此处输入图像描述](../Images/fda4fedeecfd7ec9eb16dcf6faa239a6.png)

因此，我相信一旦显示所有数据，您将无法再检索该信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-02T08:39:44.947

看下面的逻辑

1.  它首先会在 Activesheet 中找到过滤器的计数。
2.  如果在特定列中应用过滤器，它将计算在相应列中应用了多少条件
3.  根据 Count ，在变量 crtnme 中检索 Criteria 名称

```
Set Sht = ActiveSheet
 With Sht.AutoFilter
  For i = 1 To .Filters.Count
     If .Filters(i).On Then
       Sheets("Filter").Cells(j, 1).Value = .Range(6, i).Column 'header starts from 6th row
       A = .Filters(i).Count
       If A = 1 Then
        crtnme = .Filters(i).Criteria1
        msgbox(crtnme)
       ElseIf A = 2 Then
        crtnme  = .Filters(i).Criteria1
        crtnme  = crtnme   & "|" & .Filters(i).Criteria2
        msgbox(crtnme)
       Else
        For k = 1 To A
         crtnme  = crtnme  & "|" & .Filters(i).Criteria1(k)
        Next
        msgbox(crtnme)
       End If
    End If
  Next i
  End With 
```

# php - 在 PHP 中允许单引号和双引号

> ID：10335513
> 
> 赞同：1
> 
> 时间：2012-04-26T14:28:08.837
> 
> 标签：php, parsing

我有一个 PHP 论坛应用程序 (PHPBB)，它在网站前端显示论坛标题。生成此标题的代码是`stripBBCode($row1["topic_title"])`

每个论坛标题实际上是一个引用，如下所示：

> 有激情在你的心中，没有什么是你做不到的。“怎么办？” 斯瓦米·西瓦南达

PHP 在标题中的单引号和双引号存在问题，因此当它遇到这些引号之一时，它实际上会停止解析 PHP。我理解 PHP 这样做的原因，但我没有一个可行的解决方案来允许 PHP 解析带有引号和撇号的文本字符串。

我能做些什么`stripBBCode($row1["topic_title"])`来允许这个标点符号？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-05-13T14:46:42.353

我很好奇为什么这个问题没有答案，尽管已经这么老了。毕竟，每当我们处理任何带有文本字段的表单时，我们都会遇到这个问题，用户可以在其中输入任何文本。

在我的例子中，它是“bucket list”项目的标题字段。我尝试输入带有单引号和双引号的字符串。这些已正确存储在数据库中，但随后显示的字符串在第一个 ' 或 " 的位置被缩短。

对我来说，`htmlspecialchars()`成功了。特别是，输入字段如下所示：

```
echo '<input type="text" value="'.htmlspecialchars($this->title).'">'; 
```

该字段现在可以正确显示字符串中的 ' 和 "。

# iphone - UIImagePickerController 为 iPhone 3Gs 和 4s 返回不同的图像大小

> ID：10335514
> 
> 赞同：1
> 
> 时间：2012-04-26T14:28:10.577
> 
> 标签：iphone, objective-c, uiimage, uiimagepickercontroller

我正在使用`UIImagePickerController`. 在 iPhone 4s 中，图像看起来像

![在此处输入图像描述](../Images/b5c4f6b60f738be9bf99a645f306b8e6.png)

当我使用 iPhone 3GS 时，图像看起来像这样

![在此处输入图像描述](../Images/c9b708d485451d07f030a898d8a9e74a.png)

3gs 图像看起来模糊。

我不知道为什么会这样。这是我获取图像的方式。

```
-(void)imagePickerController:(UIImagePickerController*)picker didFinishPickingMediaWithInfo:(NSDictionary*)info
{
    if ([[info objectForKey:UIImagePickerControllerMediaType] isEqualToString:@"public.image"]) 
    {
        [picker dismissModalViewControllerAnimated:YES];            
        imgPicker = nil;
        UIImage * userOriginal = [info valueForKey:UIImagePickerControllerEditedImage];
        NSLog(@"orinal image Image size: (%f, %f)",
              userOriginal.size.width, userOriginal.size.height);
     }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T04:33:01.463

UIImagePickerController 以相机可以捕获的最高质量和分辨率返回图像 - 这对于所有 iOS 设备都是不同的。

如果您想要标准化的输出，则必须手动调整返回的图像大小。

# event-log - 无法使用 Common.Logging 和 NLog 设置 EventID

> ID：10335517
> 
> 赞同：1
> 
> 时间：2012-04-26T14:28:26.450
> 
> 标签：event-log, nlog, common.logging

有没有人想出如何在包装[NLog时利用](http://nlog-project.org/)[Common.Logging](http://netcommon.sourceforge.net/)来设置 EventLog ID ？我让它在 NLog 下工作得很好，但在弄清楚如何使用 Common.Logging 时遇到了麻烦。请注意，只要不需要设置 EventLog ID，我也可以将 Common.Logging 与 NLog 一起使用，但这没有帮助。

[我在这里](https://stackoverflow.com/questions/4359912/net-logging-with-eventid-support)看到了 SO 文章，但不确定如何实施这些建议。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-31T13:50:48.063

根据 Common.Logging[网站](http://netcommon.sourceforge.net/)（在发布计划下的底部附近），他们提到即将在下一个版本中支持 Logging Context。我认为这意味着它还不受支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T13:33:19.733

这对于原始问题来说可能已经过时了，但我发现这个[SO Thread](https://stackoverflow.com/questions/7412156/how-to-retain-callsite-information-when-wrapping-nlog)可以工作。它描述了如何正确包装 NLog。在搜索关键字 Common.Logging 和事件日志时，在此处添加信息。

# iphone - Objective-C：逐帧播放视频

> ID：10335518
> 
> 赞同：2
> 
> 时间：2012-04-26T14:28:26.567
> 
> 标签：iphone, objective-c, video, xcode4.3, mpmovieplayer

我对 iPhone 开发非常陌生，我正在制作一个必须播放视频的应用程序，我想做的是在事件发生后播放一定数量的帧。大部分已经完成，但我还不能实现，是如何准确地只播放 50 帧，当我尝试以秒为单位计算 50 帧有多长时，我可以播放/暂停，但过了一段时间，事情开始出错，因为计算不是 100% 正确的

如果有人可以提供帮助，我将很高兴收到任何建议/评论/批评，提前谢谢你:)

PS：我正在使用 MPMoviePlayerController 播放我的视频

问候

编辑：如果您知道除 MPMoviePlayerController 之外的任何其他方法可以满足我的需要，我可以毫无问题地使用它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T09:10:17.817

经过长时间的研究，我找不到我正在搜索的内容（即使它存在也不知道），所以我正在考虑解决这个问题，以下是我找到的解决方案：

1.  将视频文件拆分为我只播放我需要的序列的序列。
2.  看看我想玩的和真正玩的在时间上的差异，而不是在下一回合纠正它。

对我来说，当我尝试分割视频时，我失去了质量，所以我使用了我在下面描述的第二种方法：

我需要播放 720 帧中的 20 帧，我的帧速率是 25 帧/秒，经过基本计算，我发现 20 帧在 0.8 秒内播放。假设“等待”变量是持续时间（我的情况是 0.8，但需要一些修正）我想玩（我稍后会介绍如何计算它）

首先，我在类中定义了一个静态“计时器”：

```
 static NSTimer *timer; 
```

因为我正在循环播放，所以每次我需要播放一个序列（只是为了确定）时，我都需要重新启动我的计时器，而不是我将它重新创建为新的并设置将被调用以暂停视频的函数（pauseVideoAtAnimation） ：

```
 [timer invalidate];
    timer = [NSTimer scheduledTimerWithTimeInterval:wait target:self selector:@selector(pauseVideoAtAnimation:) userInfo:nil repeats:NO]; 
```

比我播放视频：

```
 [player.moviePlayer play] 
```

之后，我们需要添加的是 pauseVideoAtAnimation 中暂停视频的指令

```
 [self.player.moviePlayer pause]; 
```

所有这些我什至在寻求帮助之前就已经完成了，所以等待变量的校正有什么变化，下面是相关说明（这里我们需要一个从 0 开始的计数器，并计算我们播放序列的次数)

```
 double wait = 0.8;
     wait += (counter * wait - self.player.moviePlayer.currentPlaybackTime);
     counter ++; 
```

就是这样，如果有人有同样的问题或只是对解决方案感到好奇，请随时与我联系 :)

# java - ServiceLoader 或其他动态加载插件

> ID：10335519
> 
> 赞同：2
> 
> 时间：2012-04-26T14:28:31.043
> 
> 标签：java, plugins, serviceloader

通读

```
 http://java.sun.com/developer/technicalArticles/javase/extensible/ 
```

其中描述了 ServiceLoader。相当简单。使用此 API 的人，通常如何轮询类路径或应用程序路径以获取新更新？每 x 分钟调用一次 ServiceLoader.reload 方法？

还是人们使用其他开源 API？或者像框架一样滚动那里自己的ServiceLoader？

# c#-4.0 - 在 Windows 任务计划程序中安排 ac# 程序

> ID：10335521
> 
> 赞同：1
> 
> 时间：2012-04-26T14:28:45.047
> 
> 标签：c#-4.0, scheduled-tasks

我有一些我想每 30 分钟运行一次的代码。在 Windows 任务计划程序 -> 创建任务 -> 操作 -> 新建 - 有一个地方可以插入脚本/程序。我的问题是我需要创建什么样的项目来添加我的程序，以及我需要添加什么样的文件 - dll？

我希望每 30 分钟运行一次 30~ 行代码，从网络中获取一些东西，处理它并将其插入到数据库中。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T14:31:28.667

任务计划程序运行普通的 EXE。

你不需要做任何特别的事情。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-18T11:52:28.160

```
 using System;
    using Microsoft.Win32.TaskScheduler;

    class Program
    {
     static void Main(string[] args)
    {
    // Get the service on the local machine

    using (TaskService ts = new TaskService())
    {

     // Create a new task definition and assign properties
      TaskDefinition td = ts.NewTask();
      td.RegistrationInfo.Description = "Does something";

         // Create a trigger that will fire the task at this time every other day
         td.Triggers.Add(new DailyTrigger { DaysInterval = 2 });

         // Create an action that will launch Notepad whenever the trigger fires
         td.Actions.Add(new ExecAction("notepad.exe", "c:\\test.log", null));

         // Register the task in the root folder
         ts.RootFolder.RegisterTaskDefinition(@"Test", td);

         // Remove the task we just created
         ts.RootFolder.DeleteTask("Test");
        }
     }
   } 
```

# command-line - 如何将包含启动命令的 *.cmd 文件的输出重定向到文件？

> ID：10335524
> 
> 赞同：2
> 
> 时间：2012-04-26T14:28:58.137
> 
> 标签：command-line, batch-file, windows-xp

如果我把这个命令放在控制台上：

```
start /b /belownormal /wait php.exe script.php > output.txt 
```

一切顺利，但是如果我输入相同的命令但没有重定向到 *.cmd 文件，然后对该文件进行重定向：

所以文件 myscript.cmd 如下：

```
start /b /belownormal /wait php.exe script.php 
```

我有问题的命令是：

```
myscript.cmd > output.txt 
```

正在创建 output.txt 但为空。有没有其他方法可以以“低于正常”优先级运行任何命令行应用程序并能够将输出重定向到文件？

（当然这与 php 无关。任何命令都有这个效果，即使是简单的回显。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T17:48:41.100

也许这个技巧可以解决你的问题。myscript.cmd：

```
start /b /belownormal /wait php.exe script.php %~1 
```

并这样称呼它：

```
myscript.cmd "> output.txt" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-05T17:35:12.230

尝试使用插入符号转义重定向`^`，即

`myscript.cmd ^> output.txt`

# javascript - 用于检查字符串长度的正则表达式？

> ID：10335526
> 
> 赞同：1
> 
> 时间：2012-04-26T14:29:00.950
> 
> 标签：javascript, regex

javascript正则表达式检查字符串长度当字符串长度超过250个字符时会出现错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T14:30:05.903

无需使用昂贵的正则表达式

只需将`length`属性用于字符串，例如

```
var s = "abcd...xyz";
console.log(s.length) 
```

而且，只是为了回答这个问题，正则表达式将是

```
if (!(/^.{,250}/).test(s)) { /* error */ } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T18:16:00.353

这可能会奏效。匹配意味着错误。

```
/.{251}/s 
```

# c++ - std::unordered_map::begin(int n) 行为

> ID：10335527
> 
> 赞同：4
> 
> 时间：2012-04-26T14:29:03.007
> 
> 标签：c++, stl, c++11, unordered-map

这是我正在运行的代码，使用 g++ 4.6 和`-std=c++0x`

```
std::unordered_map<int, int> um;

um.insert(std::make_pair(42, 43));
um.insert(std::make_pair(342, 343));
um.insert(std::make_pair(142, 143));
um.insert(std::make_pair(242, 243));

for(auto e : um)
std::cout << e.first << std::endl; 
```

这打印：

```
242
342
42
142 
```

`um.begin()->first`现在我可以使用或访问 242 `um.begin(0)->first`。342 可以使用`um.begin(1)->first`. 但是`um.begin(2)->first`还是`um.begin(3)->first`让程序崩溃。使用不同的号码，我可以访问`um.begin(2)->first`. 我无法向自己解释这种行为。我用`um.begin(int)`错了吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-26T14:37:06.433

你对此感到非常困惑。是一种非常特殊的结构，仅适用于访问底层哈希表结构中`begin(1)`的特定*存储桶并返回**本地迭代器*的无序容器。这与以某种“随机访问”方式访问任何特定元素无关，而您根本无法做到这一点。

对于无序容器，您所能做的就是按键遍历整个集合或`find`特定元素。元素不能以任何特定顺序访问，因此名称为“无序”。

您*可以*使用本地迭代器对每个存储桶进行迭代`[begin(n), end(n))`，但当然您必须使用与任何范围相同的惯用语来处理空容器。`bucket_count`可以使用成员函数发现可用的桶的总数。

请注意，在大多数情况下，您应该期望存储桶包含零个或一个元素。每个桶的平均元素数可通过`load_factor`成员函数获得（并可配置）。

# python - 拆分列表列表

> ID：10335537
> 
> 赞同：2
> 
> 时间：2012-04-26T14:29:33.167
> 
> 标签：python

如何拆分每行的列表列表？

```
list = [['a', 'b', 'c'], ['d', 'e', 'f'], ['g', 'h', 'i']] 
```

进入：

```
a b c  
d e f  
g h i 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T14:33:15.183

```
In [11]: lst = [['a', 'b', 'c'], ['d', 'e', 'f'], ['g', 'h', 'i']]

In [12]: print('\n'.join(' '.join(l) for l in lst))
a b c
d e f
g h i 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-26T14:32:33.763

```
In [1]: mylist = [['a', 'b', 'c'], ['d', 'e', 'f'], ['g', 'h', 'i']]

In [2]: for item in mylist:
   ...:     print ' '.join(item)

a b c
d e f
g h i 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-26T14:33:09.567

您不想拆分元素，而是想[加入](http://docs.python.org/library/stdtypes.html#str.join)它们：

```
>>> lst = [['a', 'b', 'c'], ['d', 'e', 'f'], ['g', 'h', 'i']]
>>> print('\n'.join(' '.join(sublist) for sublist in lst))
a b c
d e f
g h i 
```

请注意，这`list`是一个可怕的变量名称，因为它掩盖了内置的[`list`](http://docs.python.org/library/functions.html#list). 因此，我将变量重命名为`lst`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-26T14:34:18.857

```
myList = [['a', 'b', 'c'], ['d', 'e', 'f'], ['g', 'h', 'i']]
for subList in myList:
    print " ".join(subList) 
```

（注意——不要使用保留字如`list`or`str`来命名你的变量。这迟早会咬你）

# jquery - jquery 对话框 zindex 每次打开时都会增加

> ID：10335539
> 
> 赞同：2
> 
> 时间：2012-04-26T14:29:35.863
> 
> 标签：jquery, jquery-ui

我将 jquery-ui-1.8.18.custom.min.js 用于 jquery 对话框。

以下是打开的代码：

```
 $('#userDetLink').click(function (e) {
            $('#userDet').dialog('open');
        });

    $('#userDet').dialog({
        bgiframe: true,
        autoOpen: false,
        open: function (event, ui) {
            //do nothing
        },
        close: function (event, ui) {
            //do nothing
        },
        width: 470,
        modal: false,
        zIndex: 9999
    }); 
```

单击链接 (userDetLink) 时，它会打开对话框。每次单击链接时，它都会将 zindex 增加 1（10000、10001、10002，...），尽管我将 jquery 对话框的 zindex 设置为 9999。

有什么解决方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T14:42:42.293

改变这个：

```
$('#userDet').dialog({
    bgiframe: true,
    autoOpen: false,
    open: function (event, ui) {
        //do nothing
    },
    close: function (event, ui) {
        //do nothing
    },
    width: 470,
    modal: false,
    zIndex: 9999,
    stack: false
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T14:49:07.543

在对话框的 open 参数中，您可以通过 jQuery 的 css() 函数明确设置对话框的 z-index。我尝试让对话框的 zIndex 选项在每次打开时更改值，但它似乎只在初始化时设置值。

jQuery：

```
open: function (event, ui) {
     $(".ui-dialog").css("z-index",9999);
}, 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/QsBqy/1/)**。

# asp.net - 在 asp.net webform 中使用摘要控件设置消息错误

> ID：10335542
> 
> 赞同：1
> 
> 时间：2012-04-26T14:29:44.517
> 
> 标签：asp.net, validation

我的属性中有 ErrorMessage 被设置..

例如：

```
 <asp:TextBox ID="FullName" runat="server" ></asp:TextBox>
            <asp:TextBoxWatermarkExtender ID="Surname_TextBoxWatermarkExtender" 
                runat="server" 
                Enabled="True" 
                TargetControlID="FullName"
                WatermarkText="Full Name" 
                WatermarkCssClass="watermark"  
                ></asp:TextBoxWatermarkExtender>

              <asp:RequiredFieldValidator 
              ID="RequiredFieldValidator2"
               runat="server"
               ErrorMessage="Must insert full name"
               ControlToValidate="FullName"
               ForeColor="#FF3300"
               SetFocusOnError="True"
                ></asp:RequiredFieldValidator>

                  <asp:CustomValidator 
                ID="CustomValidator2"
                runat="server"
                ControlToValidate="FullName"
                ClientValidationFunction="EmpIDClientValidate"
                OnServerValidate="EmpIDServerValidate"
                ErrorMessage="CustomValidator"
                Display="dynamic"
                ></asp:CustomValidator> 
```

现在我想在摘要中插入错误消息“必须插入全名”，并留下所需的控制消息只有：“*”。而摘要控件应该有完整的消息。这是我的摘要控制。

```
 <asp:ValidationSummary runat="server" ID="Summary"
              ShowMessageBox="true" 
              HeaderText="<b>Please review the following errors:</b>" ShowSummary="False"
            /> 
```

我知道它可以做到..但我不知道要添加什么属性/属性来实现这一点？

**更新：**

```
 <asp:RequiredFieldValidator ID="RequiredFieldValidator1"
               runat="server"
               ErrorMessage="*"
               HeaderText="User name is empty"
               ControlToValidate="UserName"
               ForeColor="#FF3300" 
               Display="Dynamic"
               SetFocusOnError="True"></asp:RequiredFieldValidator> 
```

上面的控件产生* ..这是我想要的..但​​是摘要应该采用...“用户名为空”并显示它..这里再次是摘要：

```
<asp:ValidationSummary runat="server" ID="Summary"
              ShowMessageBox="true" 
              HeaderText="<b>Please review the following errors:</b>" ShowSummary="False"
            /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T15:22:39.670

我发现答案应该是：

```
<asp:RequiredFieldValidator ID="RequiredFieldValidator1"
               runat="server"
               Text="*"
               ErrorMessage="Field cant be empty"
               HeaderText="User name is empty"
               ControlToValidate="UserName"
               ForeColor="#FF3300" 
               Display="Dynamic"
               SetFocusOnError="True"></asp:RequiredFieldValidator> 
```

您应该将文本..这将代表字段中的错误..并且错误消息将在验证摘要控件中表示

# java - 在后台运行一个函数，同时启动另一个函数

> ID：10335543
> 
> 赞同：0
> 
> 时间：2012-04-26T14:29:49.983
> 
> 标签：java

我想在后台运行一个函数，它每秒检查一个 url。
我已经有检查 url 的功能，但我想每秒运行一次这个功能，同时我可以手动启动功能。
我希望你能理解我的问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:34:05.233

我认为这是您使用线程的正确时机

[java中的线程介绍](http://www.javaworld.com/javaworld/jw-04-1996/jw-04-threads.html)

这是您需要做的：
在您的程序中，在您开始手动功能之前以及当您想要开始检查该 url 时，启动一个每秒循环一次的线程，该线程运行该 url 检查功能。
在主程序中，启动线程后，就可以开始运行手动函数了

# javascript - 在 javascript 正则表达式中允许换行符

> ID：10335550
> 
> 赞同：1
> 
> 时间：2012-04-26T14:30:11.630
> 
> 标签：javascript, return, line, newline, feed

我在我的网站上使用实时验证（来自 livevalidation.com），我有一个文本区域，我需要在其中允许换行/换行/返回字符，但是尽管我尽了最大努力，但我还是失败了。我试过 \n \r \v \s\S 每个都有 \ escape 和没有。

这是我的代码，没有使用上述字符：

```
my_notes.add( Validate.Format, { pattern: /^[a-zA-Z0-9&#192;&#193;&#194;&#195;&#196;&#197;&#198;&#199;&#200;&#201;&#202;&#203;&#204;&#205;&#206;&#207;&#208;&#209;&#210;&#211;&#212;&#213;&#214;&#216;&#217;&#218;&#219;&#220;&#221;&#223;&#224;&#225;&#226;&#227;&#228;&#229;&#230;&#231;&#232;&#233;&#234;&#235;&#236;&#237;&#238;&#239;&#241;&#242;&#243;&#244;&#245;&#246;&#248;&#249;&#250;&#251;&#252;&#253;&#255;\.\,\-\/\']+[a-zA-Z0-9&#192;&#193;&#194;&#195;&#196;&#197;&#198;&#199;&#200;&#201;&#202;&#203;&#204;&#205;&#206;&#207;&#208;&#209;&#210;&#211;&#212;&#213;&#214;&#216;&#217;&#218;&#219;&#220;&#221;&#223;&#224;&#225;&#226;&#227;&#228;&#229;&#230;&#231;&#232;&#233;&#234;&#235;&#236;&#237;&#238;&#239;&#241;&#242;&#243;&#244;&#245;&#246;&#248;&#249;&#250;&#251;&#252;&#253;&#255;\.\,\-\/\' ]+$/i } ); 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T14:33:24.790

/m 修饰符允许模式匹配多行，其中 /i 在模式的末尾尝试 /mi

# c# - 如何在 wpf 应用程序中显示 powerpoint？

> ID：10335552
> 
> 赞同：1
> 
> 时间：2012-04-26T14:30:24.127
> 
> 标签：c#, .net, ms-office

我想做一些简单的事情：在 wpf 应用程序中显示一个 powerpoint。我怎样才能做到这一点？我在互联网上阅读了几种方法，但我失败了......

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:51:25.677

JODConverter 项目

[http://www.artofsolving.com/opensource/jodconverter](http://www.artofsolving.com/opensource/jodconverter)

使用 OpenOffice 作为转换服务器。它是用 Java 编写的，但是用 C# 做同样的事情相当简单。或者，您可以将其称为命令行程序。

使用它，您可以将 PPT 转换为一系列图像。如果您需要播放 PowerPoint 动画或做任何不能仅显示为图像的事情，那么这将不起作用。

# maven - 未能执行目标 org.apache.maven.plugins:maven-archetype-plugin:2.2:generate

> ID：10335555
> 
> 赞同：1
> 
> 时间：2012-04-26T14:30:28.000
> 
> 标签：maven, maven-3

我目前正在学习maven。我使用 Maven 3.0.4。

当使用maven从archetype（做archetye：generate）生成一个新的richfaces项目时，它说它无法构建maven插件，因为缺少org.apache.maven.shared:maven-invoker:jar:2.0.11的POM文件和 org.apache.maven.shared:maven-script-interpreter:jar:1.0。

它告诉我们无法构建 maven-archetype-plugin。

我可以从我的 http 浏览器访问 maven2 存储库，其中包含 maven-script-interpreter 和 maven-invoker。

这是命令行和错误。谢谢！

```
 D:\dev\testRichfaces>mvn archetype:generate  -DarchetypeGroupId=org.richfaces.archetypes -DarchetypeArtifactId=richfaces-archetype-simpleapp -DarchetypeVersion=4.2.0-SNAPSHOT -DgroupId=org.docs.richfaces -DartifactId=new_project
[INFO] Scanning for projects..
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building Maven Stub Project (No POM) 1
[INFO] ------------------------------------------------------------------------
[INFO]
[INFO] >>> maven-archetype-plugin:2.2:generate (default-cli) @ standalone-pom >>
>
[INFO]
[INFO] <<< maven-archetype-plugin:2.2:generate (default-cli) @ standalone-pom <<
<
[INFO]
[INFO] --- maven-archetype-plugin:2.2:generate (default-cli) @ standalone-pom --
-
[WARNING] The POM for org.apache.maven.shared:maven-invoker:jar:2.0.11 is missing, no dependency information available
[WARNING] The POM for org.apache.maven.shared:maven-script-interpreter:jar:1.0 is missing, no dependency information available
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 1.066s
[INFO] Finished at: Thu Apr 26 15:20:23 GMT+01:00 2012
[INFO] Final Memory: 4M/15M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-archetype-plugin:2
.2:generate (default-cli) on project standalone-pom: Execution default-cli of go
al org.apache.maven.plugins:maven-archetype-plugin:2.2:generate failed: Plugin o
rg.apache.maven.plugins:maven-archetype-plugin:2.2 or one of its dependencies co
uld not be resolved: The following artifacts could not be resolved: org.apache.m
aven.shared:maven-invoker:jar:2.0.11, org.apache.maven.shared:maven-script-inter
preter:jar:1.0: Failure to find org.apache.maven.shared:maven-invoker:jar:2.0.11
 in http://repo.maven.apache.org/maven2 was cached in the local repository, reso
lution will not be reattempted until the update interval of central has elapsed
or updates are forced -> [Help 1]
[ERROR]
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e swit
ch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR]
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginResolutionException 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-09T15:18:52.233

在评论中回答：

> 问题来自过滤的 http 访问。我改变了位置，问题解决了。我认为企业级防火墙..--Brahim Gaabab 2012 年 4 月 27 日在 16:14 你把它改成了什么？– KenB 2012 年 6 月 27 日在 19:59
> 
> 我刚刚在公司外访问了 maven repo ！问题是由于那里的过滤配置错误。感谢您的关注！– Brahim Gaabab 2012 年 7 月 7 日 17:08

# java - 如何从 java 缓冲图像创建 CF 兼容图像

> ID：10335558
> 
> 赞同：1
> 
> 时间：2012-04-26T14:30:42.167
> 
> 标签：java, coldfusion, coldfusion-9

如何在不使用 CF ImageNew() 函数的情况下从 java 缓冲图像创建 CF 兼容图像对象？

```
imageCFCObj = createObject("component","imagecfc.image" );
local.img1 = imageCFCObj.readImage("D:\#arguments.directoryPath#");

 // local.img1 now of type java.awt.image.BufferedImage
 // from here how do you create a CF compatible image object? 
```

**（更新为包含链接）** 所以不使用 CF 函数 ImageNew() （[自动输出/转换代码存在重大问题](https://stackoverflow.com/questions/8050555/imagenew-tobase64-encoding-issue-with-loss-of-quality-in-coldfusion)，请参阅[错误 #3177303](https://bugbase.adobe.com/index.cfm?event=bug&id=3177303)）如何在 CF 中使用 JAVA 将其更改为我可以使用的兼容 CF 图像对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T16:32:00.800

（从上面的评论来看，答案最终走向了不同的方向）。

如[本线程所述，](https://stackoverflow.com/questions/8050555/imagenew-tobase64-encoding-issue-with-loss-of-quality-in-coldfusion)使用`toBase64(imageObject)`and`imageGetBlob`可能会导致图像质量下降，因为`png`图像被转换为`jpg`​​格式。这些函数似乎错误地确定了返回格式。

一种可能的解决方法是使用*未记录* `Image.getImageBytes(format)`的方法，该方法允许您明确指定输出格式。

```
<cfset bytes = yourCFImageObject.getImageBytes("png")> 
```

# c# - 不支持 Linq 表达式

> ID：10335560
> 
> 赞同：2
> 
> 时间：2012-04-26T14:30:51.683
> 
> 标签：c#, linq, entity-framework-4, linq-to-entities

我有以下 LINQ to Entities 表达式：

```
var allItemsOver64 =
  _inventoryContext.Items.Where(
  i => DateTimeHelper.CalculateAgeInYears(i.PrimaryInsured.DoB, now) >= 65); 
```

问题是当我使用 allItemsOver64 时，它说不支持这个表达式。我感觉这个错误是由于调用了CalculateAgeInYears 方法而发生的。为什么会发生这种情况，我该如何解决？

谢谢，

萨钦

编辑：

即使在更改代码以使用 IEnumerables 之后，我仍然会遇到相同的错误。这是我现在的代码：

```
DateTime now = DateTime.UtcNow;
            var allItemsOver64 =
                _inventoryContext.Items.Where(
                    i => DateTimeHelper.CalculateAgeInYears(i.PrimaryInsured.DoB, now) >= 65).AsEnumerable();
            IEnumerable<Item> items65To69 = allItemsOver64.Where(
                i =>
                DateTimeHelper.CalculateAgeInYears(i.PrimaryInsured.DoB, now) >= 65 &&
                DateTimeHelper.CalculateAgeInYears(i.PrimaryInsured.DoB, now) <= 69).AsEnumerable(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T14:35:08.460

您不能在 EF 查询中调用 C# 方法，因为 EF 不知道如何将方法转换为 SQL。

相反，`.AsEnumerable()`首先调用以强制在`Where()`本地运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T14:34:37.743

因为 Linq 无法将您的辅助方法解释为 SQL 命令。您应该在数据库端实现这样的逻辑，或者选择所有值，然后才在客户端进行检查。这两个对我来说都不好看，这就是为什么我总是尝试简化数据库，尽可能地进行简单的查询。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T14:45:56.743

如果我从您的函数名称中正确推断，我认为这可能是您正在寻找的：

```
using System.Data.Objects.SqlClient;

var allItemsOver64 = _inventoryContext
                     .Items
                     .Where(i => (SqlFunctions
                                  .DateDiff("dd", i.PrimaryInsured.DoB, now) / 365.0) 
                                  >= 65.0); 
```

# postgresql - PostgreSQL 中的“使用数据库名称”命令

> ID：10335561
> 
> 赞同：482
> 
> 时间：2012-04-26T14:30:52.050
> 
> 标签：postgresql

我是 PostgreSQL 的初学者。

我想从 Postgres 的查询编辑器连接到另一个数据库——比如`USE`MySQL 或 MS SQL Server 的命令。

我`\c databasename`通过搜索互联网找到了，但它只在[psql](http://www.postgresql.org/docs/current/interactive/app-psql.html)上运行。当我从 PostgreSQL 查询编辑器尝试它时，我得到一个语法错误。

我必须通过 pgscripting 更改数据库。有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：494
> 
> 时间：2012-04-26T17:25:11.623

当您获得与`PostgreSQL`它的连接时，始终是与特定数据库的连接。要访问不同的数据库，您必须获得一个新连接。

在 psql 中使用`\c`会关闭旧连接并使用指定的数据库和/或凭据获取新连接。您将获得一个全新的后端流程和一切。

* * *

## 回答 #2

> 赞同：255
> 
> 时间：2013-09-09T13:48:44.937

您必须指定要在连接时使用的数据库；如果你想为你的脚本使用 psql，你可以使用 "\c name_database"

```
user_name=# CREATE DATABASE testdatabase; 
user_name=# \c testdatabase 
```

此时您可能会看到以下输出

```
You are now connected to database "testdatabase" as user "user_name".
testdatabase=# 
```

注意提示的变化。干杯，我也一直在忙着寻找这个，与 MySQL 相比，关于 postgreSQL 的信息太少了，在我看来。

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2017-03-07T15:36:30.253

在 pgAdmin 你也可以使用

> 将 search_path 设置为 your_db_name；

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2017-11-23T10:21:27.583

我从 MySQL 迁移时遇到的基本问题是，我认为`database`PostgreSQL 中的术语也相同，但事实并非如此。因此，如果我们要从我们的应用程序或 中切换数据库`pgAdmin`，结果将不会像预期的那样。与我的情况一样，我们为每个客户和单独的管理模式都有单独的模式（这里考虑 PostgreSQL 术语。）。所以在应用程序中，我必须在模式之间切换。

为此，我们可以使用`SET search_path`命令。这确实会将当前模式切换为当前会话的指定模式名称。

**例子：**

```
SET search_path = different_schema_name; 
```

这会将 current_schema 更改为会话的指定模式。要永久更改它，我们必须在`postgresql.conf`文件中进行更改。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-09-04T10:08:08.550

首次连接时使用此命令`psql`

```
=# psql <databaseName> <usernamePostgresql> 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2021-05-11T15:11:05.187

PgAdmin 4，GUI 工具：在数据库之间切换

1.  在左侧的 PgAdmin 浏览器中，右键单击您愿意切换到的数据库。
2.  从下拉菜单中选择一个 QueryTool（或您需要的任何其他选项，我现在将坚持使用 QueryTool）。
3.  您将在 PgAdmin 窗口中看到 QueryTool，在顶部您将看到活动数据库和角色名称。
4.  现在您可以针对所选数据库编写查询。
5.  您可以为多个数据库打开多个 QueryTools，并像使用图形文本编辑器一样使用它们。

为了确保您正在查询正确的数据库，请发出以下查询：

```
SELECT session_user, current_database(); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-09-15T12:03:16.177

```
set search_path = 'schema name here' 
```

在连接到 postgres 时，您必须选择默认数据库进行连接。如果你什么都没有，你可以使用'postgres'作为默认值。

您可以使用 dbeaver 连接到 postgres。用户界面很好

# ios - 将使用相机拍摄的照片捕获并存储到本地数据库/PhoneGap/Cordova/iOS

> ID：10335563
> 
> 赞同：14
> 
> 时间：2012-04-26T14:30:58.643
> 
> 标签：ios, cordova, camera, local-storage, phonegap-build

我目前正在使用 Phonegap/Cordova 和 jQuerymobile 为 iOS 构建一个应用程序。这个想法是用相机拍照并存储捕获的图像以供将来使用。我想将路径/文件名存储到我的本地数据库中，并将图片文件移动到 iPhone 中的一个持久位置。

有人可以给我一个例子吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-04-28T09:41:25.327

好的，这是解决方案。

*   在 HTML 文件中

*   我有一个图像标签，用于显示相机拍摄的照片：

*   我有一个运行拍照功能的按钮：捕捉照片

*   拍照的功能是（拍照时，'smallImage' id的scr填充了照片的路径）

    ```
    function capturePhoto() {
    // Take picture using device camera and retrieve image as base64-encoded string
        navigator.camera.getPicture(onPhotoDataSuccess, onFail, { quality: 50 });
    }

    //Callback function when the picture has been successfully taken
    function onPhotoDataSuccess(imageData) {                
        // Get image handle
        var smallImage = document.getElementById('smallImage');

        // Unhide image elements
        smallImage.style.display = 'block';
        smallImage.src = imageData;
    }

    //Callback function when the picture has not been successfully taken
    function onFail(message) {
        alert('Failed to load picture because: ' + message);
    } 
    ```

*   现在我想将图片移动到一个永久文件夹中，然后将链接保存到我的数据库中：

    ```
    function movePic(file){ 
        window.resolveLocalFileSystemURI(file, resolveOnSuccess, resOnError); 
    } 

    //Callback function when the file system uri has been resolved
    function resolveOnSuccess(entry){ 
        var d = new Date();
        var n = d.getTime();
        //new file name
        var newFileName = n + ".jpg";
        var myFolderApp = "EasyPacking";

        window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, function(fileSys) {      
        //The folder is created if doesn't exist
        fileSys.root.getDirectory( myFolderApp,
                        {create:true, exclusive: false},
                        function(directory) {
                            entry.moveTo(directory, newFileName,  successMove, resOnError);
                        },
                        resOnError);
                        },
        resOnError);
    }

    //Callback function when the file has been moved successfully - inserting the complete path
    function successMove(entry) {
        //I do my insert with "entry.fullPath" as for the path
    }

    function resOnError(error) {
        alert(error.code);
    } 
    ```

*   我的文件已保存在数据库中以显示它，我将“file://”放在包含图像 src 的行的前面

希望这有帮助。J。

PS : - 非常感谢 Simon Mac Donald (http://hi.im/simonmacdonald) 在 googledocs 上的帖子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-10T21:26:11.053

杰罗姆的回答就像一个魅力......当人们想要使用该文件时唯一要指出的事情不要使用 entry.fullPath 因为这有时会导致问题，使用 entry.toURL() 因为这会给你完整的路径，无需在路径中添加“file://”，也无需绕过 SD 卡存储等问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-20T05:39:32.557

```
if (index == '0')
{
    var options = {
        quality: 50,
        destinationType: Camera.DestinationType.FILE_URI,
        sourceType: Camera.PictureSourceType.CAMERA,
        allowEdit: false,
        encodingType: Camera.EncodingType.JPEG,
        popoverOptions: CameraPopoverOptions,
        saveToPhotoAlbum: false,
        correctOrientation:true
    };

    $cordovaCamera.getPicture(options).then(movePic,function(imageData) {
        $rootScope.imageUpload=imageData;
    }, function(err) {
        console.error(err);
    });

    function movePic(imageData){
        console.log("move pic");
        console.log(imageData);
        window.resolveLocalFileSystemURL(imageData, resolveOnSuccess, resOnError);
    }

    function resolveOnSuccess(entry){
        console.log("resolvetosuccess");

        //new file name
        var newFileName = itemID + ".jpg";
        var myFolderApp = "ImgFolder";

        window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, function(fileSys) {
            console.log("folder create");

            //The folder is created if doesn't exist
            fileSys.root.getDirectory( myFolderApp,
                {create:true, exclusive: false},
                function(directory) {
                    console.log("move to file..");
                    entry.moveTo(directory, newFileName,  successMove, resOnError);
                    console.log("release");

                },
                resOnError);
        },
        resOnError);
    }

    function successMove(entry) {
        //I do my insert with "entry.fullPath" as for the path
        console.log("success");
        //this is file path, customize your path
        console.log(entry);
    }

    function resOnError(error) {
        console.log("failed");
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-17T16:26:34.883

根据上面 Jérôme 的回答，我刚刚做了一个适用于承诺的工作：

```
function moveFile(file){

    var deferred = $q.defer();

    window.resolveLocalFileSystemURL(file,
        function resolveOnSuccess(entry){

            var dateTime = moment.utc(new Date).format('YYYYMMDD_HHmmss');
            var newFileName = dateTime + ".jpg";
            var newDirectory = "photos";

            window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, function(fileSys) {

                    //The folder is created if doesn't exist
                    fileSys.root.getDirectory( newDirectory,
                        {create:true, exclusive: false},
                        function(directory) {

                            entry.moveTo(directory, newFileName, function (entry) {
                                //Now we can use "entry.toURL()" for the img src
                                console.log(entry.toURL());
                                deferred.resolve(entry);

                            }, resOnError);
                        },
                        resOnError);
                },
                resOnError);
        }, resOnError);

    return deferred.promise;
}

function resOnError(error) {
    console.log('Awwww shnap!: ' + error.code);
} 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-04-26T14:41:36.240

有3个步骤：

1.  获取照片。[苹果在 iPhone 开发网站上](https://developer.apple.com/library/ios/#samplecode/PhotoPicker/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010196)有一个很好的例子
2.  获取您的 Documents 目录，如下所示：

    ```
     NSArray *arrayPaths = NSSearchPathForDirectoriesInDomains(
                NSDocumentDirectory,
                NSUserDomainMask,
                YES);
    NSString *docDir = [arrayPaths objectAtIndex:0]; 
    ```

3.  最后，将您在步骤 1 中获得的 UIImage 存储到磁盘：

    ```
     NSString *filename = @"mypic.png";
    NSString *fullpath = [docDir stringByAppendingPathComponent:filename];
    [UIImagePNGRepresentation(image) writeToFile:fullpath atomically:YES]; 
    ```

# matlab - 在 Simulink 运行时加载 MATLAB 功能块的代码

> ID：10335564
> 
> 赞同：4
> 
> 时间：2012-04-26T14:31:02.733
> 
> 标签：matlab, simulink

我想`myfunc.m`在我的 MATLAB 路径中有一些文件，并在模拟开始之前以某种方式将其内容自动加载到[MATLAB 功能块中。](http://www.mathworks.com/help/toolbox/simulink/slref/matlabfunction.html)这样，我可以使用外部编辑器编写这些嵌入式函数，将它们分别作为独立文件进行版本控制等。

有没有办法以编程方式实现这一目标？

我最初的尝试是尝试使用类似的东西访问功能块的内容`get_param`，但我似乎无法获得对代码本身的读/写访问权限。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-28T07:08:25.770

如果目标`MATLAB Function`块尚不存在，则可以按如下方式添加它（请参阅[此 SO 帖子](https://stackoverflow.com/q/19494423/857390)）：

```
load_system('eml_lib');
libname = sprintf('eml_lib/MATLAB Function');
add_block(libname,'myModel/myBlockName'); 
```

然后，您可以使用 Stateflow API 修改模块的代码：

```
sf = sfroot();
block = sf.find('Path','myModel/myBlockName','-isa','Stateflow.EMChart');
block.Script = 'Your code goes here'; 
```

另请参阅[MATLAB Answers 上的这篇文章](http://www.mathworks.com/matlabcentral/answers/102675)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-12T16:45:44.747

首先，您需要将包含 m 文件的文件夹添加到默认路径。去做这个：

（在命令窗口中）转到文件 -> 设置路径 -> 添加文件夹（选择包含 m 文件的文件夹）

现在，您应该使用模型属性中的 InitFcn 回调来调用您的函数。为此，请打开模型：

（在模型窗口中）转到文件 -> 模型属性 -> 回调 -> InitFcn 在为 InitFcn 提供的编辑框中，编写调用函数的命令，即 myfunc(); 您必须根据您的功能和要求修改此命令。

完成后，将更改应用到“模型属性”窗口并模拟模型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T15:39:23.643

我认为[模型回调](http://blogs.mathworks.com/seth/2008/12/25/initializing-parameters/)可能是一种做你想做的事的方法，尽管我自己没有使用过这种技术。

# android - SampleSyncAdapter 存储密码纯文本？

> ID：10335573
> 
> 赞同：5
> 
> 时间：2012-04-26T14:31:35.367
> 
> 标签：android, oauth-2.0, accountmanager

我正在尝试了解 Android AccountManager 和 OAuth。我想做的是不让手机访问密码。（这就是谷歌的建议：“对[安全要聪明！](http://developer.android.com/training/id-auth/custom_auth.html) ”）所以我检查了谷歌示例应用程序[SampleSyncAdapter](http://developer.android.com/resources/samples/SampleSyncAdapter/index.html)并开始阅读代码。然后我在 AuthenticatorActivity 中看到了这种情况：

```
private AccountManager mAccountManager;
private String mPassword;

 /**
 * ... Sets the
 * AccountAuthenticatorResult which is sent back to the caller. We store the
 * authToken that's returned from the server as the 'password' for this
 * account - so we're never storing the user's actual password locally.
 *
 * @param result the confirmCredentials result.
 */
public void handleLogin(View view) {
    ....
    mPassword = mPasswordEdit.getText().toString();    
    ....
    Log.d(TAG, "mPassword set to Account:" + mAccountManager.getPassword(account));
}

private void finishLogin(String authToken) {
    ....
    mAccountManager.addAccountExplicitly(account, mPassword, null);        
    ....
} 
```

此日志消息是“mPassword 设置为 Account:test”。当您阅读其余部分时，这在某种程度上是可以理解的，因为

```
protected String doInBackground(Void... params) {
    ....
    return NetworkUtilities.authenticate(mUsername, mPassword);     
    ....
} 
```

如果密码是令牌，这将不起作用。

此外，我希望其余代码在 getAuthToken() 上的 Authenticator 中以不同方式工作验证我的 JSON RESTful 服务。

任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T14:56:18.240

从文档中我们可以读到：

> 重要的是要了解 AccountManager 不是加密服务或钥匙串。**它以纯文本**形式存储帐户凭据，就像您传递它们一样。在大多数设备上，这不是一个特别的问题，因为它将它们存储在一个只能由 root 访问的数据库中。但是在有根设备上，任何对设备具有 adb 访问权限的人都可以读取凭据。

因此，据我了解，这是滥用单词（密码和令牌）的问题。我猜过程如下：

1.  您要求用户提供登录名和密码。
2.  在您的应用程序中，您以某种方式将此登录名和密码发送到您的服务器。
3.  根据这些信息，您的服务器会生成一个令牌并将其发送回您的应用程序。
4.  AccountManager 以纯文本形式存储此令牌，然后使用此令牌对您的用户进行身份验证。

# php - 每 30 秒运行一次 SQL 查询（计数），然后将输出保存到某个文件

> ID：10335574
> 
> 赞同：4
> 
> 时间：2012-04-26T14:31:36.890
> 
> 标签：php, sql, file

我正在开发一个网站并获得一个数据库，人们可以在其中插入数据（投票）。我想在标题中保留一个计数器，例如“x”票已投。但有可能很快就会有大量的网站访问量。现在我可以用查询来做到这一点

```
SELECT COUNT(*) FROM `tblvotes 
```

然后在标题中显示数字，但是每次用户更改页面时，它都会重做查询，所以我在想，也许最好每 30 秒查询一次（mysql 服务器上的负载要少得多）但是然后我需要将它的输出保存到某个地方（这应该不那么难；我可以将它写入文本文件？）但是我怎样才能让我的网站每 30 秒自动运行一次查询并将数字放入文件。我没有到服务器的 SSH，所以我不能 crontab 它？

如果有什么你可能不明白的随时问！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T14:38:24.810

最简单的方法：将结果写入本地文本文件，检查每个请求的文本文件的文件时间是否小于 now() + 30 秒，如果是，则更新文件。要更新，您应该锁定文件。在更新文件时，满足 now() + 30 条件的其他用户应该只读取当前存在的文件以避免竞争条件。希望有帮助，斯特凡

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T14:37:06.383

Crontabs 只能以最快的速度每分钟运行一次。

我认为有一个更好的解决方案。您应该制作一个存储统计信息的汇总表。

使用`trigger`votes_table 上的 a，每次表收到 INSERT 语句时，您都可以做“某事”。

然后聚合表将存储最准确的信息，然后您可以查询这些信息以显示计数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T14:42:47.473

如果您的服务器允许，更好的解决方案将使用一些缓存机制（例如[APC](http://php.net/manual/en/book.apc.php)）而不是文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T14:41:09.883

如果可以，您可能需要考虑使用 memcached。它允许您为添加到其中的任何数据设置到期时间。

当您第一次进行查询时，您编写与结果关联的查询文本的 md5。在后续查询中，查找 memcached 中的数据。如果过期了，可以重做sql查询，然后重写到memcached。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T14:39:50.300

好的，所以您问题的第一部分基本上是关于缓存总票数的结果以包含在您的页面标题中。这是一个非常好的主意 - 这是一个关于如何实现它的想法......

如果您无法启用 crontab（即使没有 SSH 访问权限，您也可以使用您的主机控制面板进行设置），您也许可以使用外部 3rd 方 cronjob 服务。（[谷歌有很多结果](https://www.google.com/search?q=free+cronjob+service)）...

每次您的 cronjob 运行时，您都可以创建/更新一个仅包含一些 PHP 数组的文件 -

```
$fileOutput = "<"."?php\n\n";
$fileOutput .= '$'.$arrayName.'=';
$fileOutput .= var_export($yourData,true);
$fileOutput .= ";\n\n?".">";
$handle = fopen(_path_to_cache_file,'w+');
fwrite($handle,$fileOutput);
fclose($handle); 
```

这将为您提供一个 PHP 文件，您可以简单地`include()`将其放入您的标头标记中，然后您将可以访问`$yourData`name 下的变量`$arrayName`。

# java - 用于访问数据库的带有 java 的 gui

> ID：10335579
> 
> 赞同：0
> 
> 时间：2012-04-26T14:32:00.207
> 
> 标签：java, database, ms-access

我已经用java实现了一个用于访问数据库的gui我的数据是埃及的阿拉伯语言，当我在gui中输入它时，它会在数据库中用任何字母像&&U..+==--我应该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T14:35:11.617

了解 UTF-8 和 I18N。

您需要在 Java 和数据库中都支持它。

# java - contentResolver 和 ContentObserver 的区别

> ID：10335582
> 
> 赞同：5
> 
> 时间：2012-04-26T14:32:03.077
> 
> 标签：java, android

我正在开发一个接收 MMS 的 Android 应用程序，并且我阅读了很多代码。还有 contentResolver 和 ContentObserver，但我不明白它们之间有什么区别

像这样的声明：

`contentResolver.registerContentObserver(Uri.parse("content://mms-sms"), true, mmsObserver);`

`contentResolver.unregisterContentObserver(mmsObserver);`

contentResolver 和 ContentObserver 有什么区别，它们与接收彩信有什么关系？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T14:37:11.347

顾名思义，ContentProvider 为您提供数据集**的句柄或引用**（通常是游标），以便您可以使用其数据

ContentObserver 用于在数据集中的数据**发生变化时****得到通知**。所以它用于[*观察*](http://en.wikipedia.org/wiki/Observer_pattern)数据源的变化。**[](http://en.wikipedia.org/wiki/Observer_pattern)**

# firefox - YQL 可以在 Firefox Add-on Builder 中使用吗？

> ID：10335583
> 
> 赞同：2
> 
> 时间：2012-04-26T14:32:08.320
> 
> 标签：firefox, firefox-addon, yql, firefox-addon-sdk

当我想要一个通过 ID 从页面源获取元素的附加组件时，是否可以在 Firefox Add-on Builder 中使用[YQL ？](http://developer.yahoo.com/yql/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T20:53:12.897

要使用 YQL，您只需使用“请求”模块即可`require("request")`获得更多信息，请参阅[https://addons.mozilla.org/en-US/developers/docs/sdk/latest/packages/addon-kit/request.html](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/packages/addon-kit/request.html)

# php - Yii框架模型中的方法重载

> ID：10335589
> 
> 赞同：2
> 
> 时间：2012-04-26T14:32:39.617
> 
> 标签：php, yii

我想在 Yii 框架的模型中重载两个方法。

在这里，我想说的是，就像在 Java 中一样，我们有方法重载的概念，这意味着方法具有相同的名称，但传递给该方法的参数数量不同。所以这些类似的概念可以应用在 PHP Yii 框架的模型类中。在 Yii 模型类中，我想创建两个方法，例如，

```
public function test(){ 
   //method logic
}
public function test(int parameters){
  //method logic
} 
```

有可能创造出这样的东西吗？我收到类似“无法定义相同功能”的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T06:05:15.170

PHP 不支持您所说的内容。您可以尝试在[函数参数](http://php.net/manual/en/functions.arguments.php)中使用默认值。例如。

```
function foo($int_param = 0) // do something 
```

您也可以使用[func_get_args](http://in.php.net/manual/en/function.func-get-args.php)。您将函数定义为不接受参数，然后使用 func_get_args() 获取参数。

如果您尝试实现的功能之间没有太大差异，这些方法是合适的。

# jquery - jquery close div onclick 除非单击特定按钮

> ID：10335593
> 
> 赞同：1
> 
> 时间：2012-04-26T14:32:49.973
> 
> 标签：jquery

```
<div id="theHover" class="therequest" style="display:none;">

<div class="noprint"><button  id="closetheHover">Close Window</button></div>

All My Content

<div class="noprint"><button id="theprint" class="print">Print</button></div>

</div> 
```

当单击 div 上的任何位置（打印按钮除外）时，我想关闭 Hover div

我有按钮 closethehover 现在关闭它。

```
$("#closetheHover").live("click", function(){  
 $("#theHover").hide();
 }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T14:36:23.707

```
$(document).on("click", "#closetheHover", function(e){  
    if (e.target.id != 'theprint') {
        $("#theHover").hide();
    }
});​ 
```

替换`document`为最近的非动态父级！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T14:35:59.677

我建议：

```
$("#theHover").on("click", '*:not("#thePrint")', function(){  
    $("#theHover").hide();
}); 
```

[JS Fiddle 概念证明](http://jsfiddle.net/davidThomas/hRMgk/)。

请注意`live()`. 自 jQuery 1.7 起已被弃用。如果您使用的是1.7*之前*的版本，API 建议使用`delegate()`，或者在 1.7 及更高版本中，使用`on()`.

参考：

*   [`:not()`选择器](http://api.jquery.com/not-selector/)。
*   [`on()`](http://api.jquery.com/on/).

# c# - C# Linq 中的嵌套选择

> ID：10335600
> 
> 赞同：4
> 
> 时间：2012-04-26T14:33:29.313
> 
> 标签：c#, linq

我是 Linq 的新手，无法正常工作。

```
public class ItemMaster
{
   public int ItemId{ get; set; }  
   //other fields
   public IList<ItemDetail> Details { get; set; }     
}

public class ItemDetail
{
   public int DetailId{ get; set; }  ;
   public int ItemId{ get; set; }  ;
   //other fields
} 
```

我的 ViewModel 有

```
DataTable dtMaster = da.GetItemsMasterDataTable();
DataTable dtDetail = da.GetItemsDetailDataTable();

var list = (from m in dtMaster.AsEnumerable()                                                 
           select new ItemMaster
           {
              ItemId = m.Field<int>("ItemId"),
              //other fields
              Details = (from d in dtDetail.AsEnumerable()
                         where d["ItemId"] == m["ItemId"]
                         select new ItemDetail
                         {
                             DetailId = d.Field<int>("DetailId"),
                             ItemId = d.Field<int>("ItemId")
                             //other fields
                          }).ToList()
            }).ToList(); 
```

该列表确实检索了所有主项目，但详细信息计数始终为零。所以嵌套选择不起作用。请帮忙！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T15:17:57.427

正如托马斯所说，

当您使用 row["columnName"] 语法访问字段时，值类型被装箱。这样， == 运算符确实引用了比较，而不是比较实际值的 Equals。

考虑以下代码

```
object foo = 1;
object bar = 1;

// outputs False
Console.WriteLine(foo == bar);
// outputs True
Console.WriteLine(foo.Equals(bar));
// outputs True
Console.WriteLine((int)foo == (int)bar); 
```

所以改变你的 where 条件

```
where d["ItemId"] == m["ItemId"] 
```

要么

```
where Equals(d["ItemId"], m["ItemId"]) 
```

或者

```
where d.Field<int>("ItemId") == m.Field<int>("ItemId") 
```

# javascript - Node.js 休息框架

> ID：10335606
> 
> 赞同：8
> 
> 时间：2012-04-26T14:33:49.443
> 
> 标签：javascript, node.js, rest, express, javascriptmvc

我计划使用 JavaScript 编写一个相当大规模的 Web 应用程序。我相信我将使用 CanJS 开发 webapp 来组织我的客户端部分。

我强烈考虑将 Node.js 用于我的服务器端组件，但我想知道设置 Node 以接受和处理 REST 请求的最佳方法是什么。我做了一些谷歌搜索，发现了一个叫做 Express 的东西。对此有何评论？

任何帮助/建议将不胜感激。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-26T17:07:46.373

> restify 是一个专门为使您能够构建正确的 REST Web 服务而构建的 node.js 模块。

[http://mcavage.github.com/node-restify/](http://mcavage.github.com/node-restify/)

Express 更倾向于完整的 Web 应用程序（呈现 HTML 等）。Restify 仅用于 Web 服务。

此外，创建 Restify 的人在 Joyent 工作，这家公司是 Ryan Dahl 开发 Node.js 的公司（这是一种质量保证）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T16:59:20.357

对于 REST 请求处理，[express-resource](https://github.com/visionmedia/express-resource)是一个比同样构建在 expressjs 之上的 railjs 更专注的解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T15:20:33.490

你可以试试[http://railwayjs.com/它是建立在](http://railwayjs.com/)[http://expressjs.com/](http://expressjs.com/)之上的

Express 又好又快 :) 铁路与 ruby​​ on rails 有类似的堆栈。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-02T12:01:07.097

[http://expressjs.com](http://expressjs.com)是事实上的标准，类似 Sinatra 的路由。如果您想要真正轻松地自动生成资源（类似于 Rails 风格），请尝试上述库之一。

如果您希望在 express 之上真正简单，请尝试[http://github.com/deitch/booster](http://github.com/deitch/booster)

披露：我这周刚刚发布了 Booster。

# c# - C# 图形无效

> ID：10335607
> 
> 赞同：2
> 
> 时间：2012-04-26T14:33:49.823
> 
> 标签：c#, system.drawing

我想我错过了 Invalidate 方法...我试图在 mousedown 的鼠标位置绘制一个正方形的左上角，然后右下角是鼠标的当前位置. 下面是在 MouseMove 事件上触发的方法。父级是一个带有pictureBox 子级的面板。（我试图在这些之上绘制。）

问题似乎与`pictureBoxMain.Invalidate()`. 当注释掉代码时，代码的行为与预期一样，并绘制了无数个正方形。

[Graphics`g`是由pictureBox 创建的，因此我在pictureBox 上调用Invalidate 方法。]

当我取消注释无效行时，当鼠标移动时会绘制一个框，但一旦它停止移动，框就会消失。我无法为我的生活解决为什么。当我尝试调试代码时，似乎在鼠标不移动时正在调用 MouseMove 方法，这没有任何意义。

任何帮助是极大的赞赏！

```
private void pictureBoxMain_MouseMove(object sender, MouseEventArgs e)
    {
        if (MouseDrawLeft)
        {
            //Move
        }
        else if (MouseDrawRight)
        {
            MouseLast = e.Location;
            if (MouseFirst != MouseLast)
            {
                pictureBoxMain.Invalidate();

                Point bl = new Point(MouseFirst.X, MouseLast.Y);
                Point tr = new Point(MouseLast.X, MouseFirst.Y);

                g.DrawLine(pen, MouseFirst, tr);
                g.DrawLine(pen, MouseFirst, bl);
                g.DrawLine(pen, bl, MouseLast);
                g.DrawLine(pen, tr, MouseLast);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:54:20.143

每个组件（按钮、文本框、窗口...）都有其 Paint 方法。这由 Windows 定期调用（例如每秒 50 次）以绘制对象。

您所做的是在对象上绘制一些东西 - 但在一毫秒内，它消失了，因为 Paint 方法覆盖了它。您需要覆盖框架的 Paint 方法并在那里进行绘画 - 这样，每次 Windows 询问时都会绘制您的图纸。

# javascript - 静态解决 javascript 依赖项的最佳实践

> ID：10335609
> 
> 赞同：3
> 
> 时间：2012-04-26T14:33:59.347
> 
> 标签：javascript, dependencies, preprocessor

很遗憾我不得不在 2012 年 4 月问这个问题，但我知道解决这个问题的方法很少。

所以，我想要一个**静态**编译 javascript 文件，解决依赖关系的工具。更准确地说，我想要这样的工具（我们称之为`sometool`），它可以执行以下操作：

*   扫描文件夹，找到所有`*.js`文件
*   解析这些文件并找到一些非常简单的**同步**且 100% 符合 js 的指令。通过同步，我的意思是没有像传递 onload 处理程序这样的事情——它只是关于静态文本预处理。100% js-compliant 我的意思是它看起来像是从 js 的角度来看的评论——比如`// @include`
*   **使用一些可以自定义**的配置来解析包含指令中使用的路径。
*   用真实输出替换所有包含并将其放入单独的文件夹中。

我确实意识到这一切对你们大多数人来说都是显而易见的，但是现在的 javascripters 在谈论依赖管理时理解的东西略有不同 - 例如，请参阅[require.js](http://requirejs.org/)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T15:02:25.890

你应该看看[sprockets](https://github.com/sstephenson/sprockets)。它可以捆绑和打包 JavaScript 文件并支持包含。~~不过，您可能必须编写一些样板代码。~~似乎有一个脚本允许 sprocket 从与其捆绑的命令行运行。它是在 Ruby 中的。不知道这是否有问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T14:41:35.197

其实有一个答案，它的名字是：[`Apache ANT`](http://ant.apache.org/)

ANT 就像*Make*一样，是一个几乎可以为您完成任何工作的工具。连接文件、剥离、读取文件/文件夹、缩小等。说明是通过*.xml*文件完成的，许多工作已经存在，但当然你可以编写自己的工作。

这样，您就可以拥有一个完美的**静态构建过程**。我个人在几个基础上使用它。看看例子：[https ://github.com/jAndreas/typeof-NaN-2.0/tree/master/build](https://github.com/jAndreas/typeof-NaN-2.0/tree/master/build)

我没有按照您描述的方式解决 javascript 依赖项，但我在那里使用样式表依赖项（用`@import`实际文件替换行）。因此，对 javascript 文件执行相同操作是一项相当容易的任务。此外，这些构建脚本的最后一步是将新生成的文件复制到我的*Apache 网站*目录中，这确实是一个静态构建过程，您就完成了。

不要害怕文件大小，我从那里的*HTML5 样板*中修改了一个现有的配置文件。我实际上可以将该文件缩小到 10% 大小，删除所有可选构建。

# css - IE 输入标签上的占位符属性？

> ID：10335610
> 
> 赞同：15
> 
> 时间：2012-04-26T14:34:04.857
> 
> 标签：css, internet-explorer

我知道 Internet Explorer 不支持输入标签的占位符属性，但肯定在 2012 年必须有另一种 IE 解决方案？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-26T15:59:03.817

不久前我写了一个 jQuery 插件，它将为任何不支持它的浏览器添加占位符支持。

[IE 中的占位符文本](http://corymathews.com/html5-placeholder-in-ie/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T14:35:51.783

实际上，IE在 2012（版本 10）中[确实支持](http://msdn.microsoft.com/en-us/library/windows/apps/hh441188.aspx)占位符属性。将此与旧浏览器[的 polyfill](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-browser-Polyfills)结合起来，您应该有一个全面的解决方案来解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T20:33:34.363

我们已经在生产环境中使用这个 jQuery 插件几个星期了，它似乎工作得很好。

[http://webcloud.se/code/jQuery-Placeholder/](http://webcloud.se/code/jQuery-Placeholder/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-04T13:03:53.877

试试我开发的这个 jQuery 插件

[https://github.com/ramsunvtech/jQuery-Plugins/tree/master/IEPlaceHolder](https://github.com/ramsunvtech/jQuery-Plugins/tree/master/IEPlaceHolder)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T00:31:27.180

[http://the.deerchao.net/PlaceHolder](http://the.deerchao.net/PlaceHolder) 它可以在 ie 上运行，无需调用任何函数...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-25T21:29:29.623

是的，IE8 和 IE9 有一个非常简单的解决方案，因为在 IE 的更高版本上它已经可以工作了。（IE10、IE11 等）

这是我找到的解决方案：

**1\. 检测 Internet Explorer 版本**

```
<!--[if lt IE 10]>       
    <script type="text/javascript">var ie = 9;</script>      
<![endif]-->     
<!--[if lt IE 9]>                   
    <script type="text/javascript">var ie = 8;</script>          
<![endif]--> 
```

**2.修复占位符**

```
if (typeof ie == 'undefined') var ie = 10;   
if (ie == 8 || ie == 9){  

    $("input[placeholder]").each(function() {
        this.value = $(this).attr('placeholder');
    });        

    $("input[placeholder]").focus(function() 
        if (this.value == $(this).attr('placeholder')) this.value = '';
    }).blur(function() {   
        if (this.value == '')
            this.value = $(this).attr('placeholder'); 
    });
} 
```

# wso2 - 在 ESB 中更改消息的方向

> ID：10335614
> 
> 赞同：0
> 
> 时间：2012-04-26T14:34:18.923
> 
> 标签：wso2, wso2esb, esb

我正在实施一种机制来在处理过程中发生某些错误时执行回滚。

在消息将被发送回发起者之前处理错误，这意味着在外序列的最后部分。

现在假设我想在此时执行回滚，因此我应该能够调用已经可用的序列的 inSequence。问题是我无法达到这个 IN 部分，但它总是进入 OUT。

我已经尝试设置以下属性，但没有成功：

```
<property action="set" name="RESPONSE" scope="default" value="false"/> 
```

有人可以请在这里帮我。我想这不会那么困难，但它相当紧急，所以我真的需要知道如何做到这一点。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T05:27:18.070

如果要调用在 In Sequence 中使用的中介流，可以将该特定部分移动到单独的序列中，然后在中介流中引用它。(

有关您的服务集成方案的更详细说明将有助于详细回答。

该网络研讨会可能会对您有所帮助。

[http://wso2.org/library/webinars/2011/01/wso2-esb-answer-enterprise-service-integration](http://wso2.org/library/webinars/2011/01/wso2-esb-answer-enterprise-service-integration)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T08:07:50.210

好吧，我终于设法让它工作了。这个简单的脚本成功了：

```
<script language="js"><![CDATA[
    mc.setResponse(false);
]]></script> 
```

# javascript - Backbone.js：比较集合中的模型属性

> ID：10335617
> 
> 赞同：4
> 
> 时间：2012-04-26T14:34:22.207
> 
> 标签：javascript, backbone.js

我有一个无限范围的集合（可以是0，可以是1000，可以是一百万）。我需要搜索集合中每个模型的属性并返回相同的属性（及其值）。

例如，如果我在集合中有以下三个模型：

```
modelOne:
  color: "red"
  age: 10
  size: "large"

modelTwo:
  color: "red"
  age: 11
  size: "medium"

modelThree:
  color: "red"
  age: 9
  size: "large" 
```

我需要应用程序返回`color: "red"`（或其他可以解析的派生），因为它是所有三个模型中唯一相等的属性。

**编辑**John Munsch 的解决方案效果很好，但现在要求发生了变化，一些属性现在可以是数组。有没有办法比较常规属性*和*数组属性？

新代码示例：

```
modelOne:
  color: "red"
  age: 10
  sizes: ["small", "large"]

modelTwo:
  color: "red"
  age: 9
  sizes: ["small", "large"] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T15:42:24.627

这是我的答案版本的快速 jsFiddle：http: [//jsfiddle.net/JohnMunsch/3NMGD/](http://jsfiddle.net/JohnMunsch/3NMGD/)

注意：jsFiddle 和下面的代码都已更新，以反映问题的更改要求。

```
var model = [
    {
      color: "red",
      age: 10,
      size: [ "small", "large" ]
    },
    {
      color: "red",
      age: 11,
      size: [ "small", "large" ]
    },
    {
      color: "red",
      age: 9,
      size: [ "small", "large" ]
    }
];

function findCommonalities(data) {
    if (data.length > 0) {
        // It's safe enough to get the list of keys from the very first
        // element. If the later ones differ, you know that the keys they
        // had but the first element didn't are guaranteed not to be in
        // the common set anyway because the first element didn't
        // have them.
        var keys = _.keys(data[0]);
        var commonalities = { };

        _.each(keys,
            function (key) {
                var values = _.pluck(data, key);

                if (values.length == data.length) {
                    // Sadly calling _.uniq() won't work when the values
                    // plucked out are arrays themselves. It calls ===
                    // and that's not sufficient for arrays.
                    if (_.isArray(values[0])) {
                        // However, we can get a little tricky here.
                        // What if we _.zip() together all of the arrays
                        // (assuming the ordering for each array is the
                        // same) then we'll end up with an array of
                        // arrays where each one can again be tested
                        // with _.uniq() because each one will contain
                        // the same value taken from each array.
                        var zippedValues = _.zip(values);
                        console.log("zippedValues", zippedValues);

                        if (!_.find(zippedValues,
                            function (zippedValue) {
                                var uniqueValues = _.uniq(zippedValue);

                                // Note: This test is the inverse of the
                                // one below. We're trying to find any
                                // array that has more than one value in
                                // it. If we do then there's some
                                // variance.
                                return uniqueValues.length != 1;
                            })) {
                            // We didn't find any arrays that had any
                            // variance so we want this as well.
                            commonalities[key] = values[0];
                        }
                    } else {
                        var uniqueValues = _.uniq(values);

                        if (uniqueValues.length == 1) {
                            commonalities[key] = uniqueValues[0];
                        }
                    }
                }
            }
        );

        return commonalities;
    } else {
        return { };
    }
}

console.log("commonalities: ", findCommonalities(model)); 
```

少量键和少量项目的性能似乎很好，但是您需要使用一百万条记录和大量键来测试它。

# memory-leaks - SimplePie 中的内存泄漏，提要非常大。这要怎么打？

> ID：10335621
> 
> 赞同：2
> 
> 时间：2012-04-26T14:34:32.187
> 
> 标签：memory-leaks, simplepie

我正在尝试用 SimplePie 解析这个 RSS 提要：

[http://www.merdekapost.com/feeds/posts/default](http://www.merdekapost.com/feeds/posts/default)

它会造成内存泄漏，因为提要很大。它超过 4 Mb，当 SimplePie 尝试解析 XML 时，它只会填满所有可用的 RAM。

问题是，我需要解析这样的大型提要，而不会将所有 RAM 都交给 XML 解析器。我不需要此提要中的所有项目，只需要最新消息，所以也许有一种方法可以只解析 XML 的一部分？我可以编辑（或配置）SimplePie 以不完全解析这样的大文件吗？

我试过 set_item_limit() 但我猜它不会限制解析的 XML 的数量。

我相信这是一个常见问题，但我找不到答案。你能建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T06:54:18.657

如果内存泄漏是由于xml页面大小造成的，可以先用file_get_contents()或者curl获取xml内容，不需要的部分自己剪掉。之后，使用[set_raw_data()](http://simplepie.org/wiki/reference/simplepie/set_raw_data)将修改后的数据传递给 SimplePie以获取提要项目。[此处](http://simplepie.org/wiki/tutorial/how_to_edit_part_of_the_feed_before_parsing_it?s%5B%5D=set&s%5B%5D=raw&s%5B%5D=data)记录了一个示例。

# windows - Windows Phone7 在应用程序之间共享数据

> ID：10335632
> 
> 赞同：0
> 
> 时间：2012-04-26T14:35:07.820
> 
> 标签：windows, windows-phone-7, windows-phone-7.1

我到处搜索，想知道是否有任何可能的方式可用于在手机本身的应用程序之间共享数据。我的基本意思是，如果有任何方法可以从一个应用程序创建文件并允许其他应用程序访问该文件。

问题是，如果我们将文件保存在应用程序的隔离存储中，那么任何其他应用程序都无法访问它。

例如这样的场景。一个应用程序生成一个文件并将其存储在电话内的公共位置，然后使用电子邮件客户端应用程序需要将该文件作为附件发送。

非常感谢您对这项任务的任何指导/帮助。提前致谢...！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T14:38:36.743

不幸的是，目前没有办法在 Windows Phone 上的应用程序之间共享数据。为此，您必须依赖外部服务器。根据您的应用程序正在执行的操作，您可能需要考虑使用 skydrive 或 Dropbox 集成来共享文件。

# ios - 在从 nib 文件加载视图之前运行什么方法或命令？

> ID：10335636
> 
> 赞同：1
> 
> 时间：2012-04-26T14:35:14.937
> 
> 标签：ios, xcode

创建新的objective-c 类UIViewController 文件时。我想知道 ViewController.m 文件或其他文件中的哪个命令/方法/行在从 nib 文件生成视图之前执行。

我只知道 viewDidLoad 会在 nib 文件之前先运行。还有别的事吗？

感谢您在这里帮助小菜鸟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:56:26.610

在加载视图层次结构之前调用的唯一方法是`initWithNibName:bundle:`方法。然后第一次访问视图控制器时`view`加载`nib`（通过`loadview`方法），然后`viewDidLoad`调用方法。我希望这可以说清楚。

附言。尽管您可以覆盖`loadview`方法，但 Apple 声明：

> 如果您使用 Interface Builder 创建视图并初始化视图控制器，则不得覆盖此方法。（*Apple 关于 loadview 方法的文档*）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:48:19.153

试试`-(void)loadView`方法。在设置视图控制器的视图之前调用它，实际上这是您要设置（控制器）`view`属性的地方。`self`

```
-(void)loadView
{
    self.view = [[UIView alloc] initWithFrame:...]; //Or get it from the nib...
} 
```

# toolbar - JavaFX 2.0 工具栏 FXML

> ID：10335637
> 
> 赞同：1
> 
> 时间：2012-04-26T14:35:21.140
> 
> 标签：toolbar, javafx, javafx-2, fxml, pane

问：帮助我确定导致错误的原因，并希望工具栏能够正常工作。

我正在尝试从此页面获取 FXML 版本：Difference in my java-class from link [1](http://fxexperience.com/2012/02/customized-segmented-toolbar-buttons/)：

1.  不是主班。
2.  它不会扩展 Application 但 HBox 或任何可以工作的东西。
3.  错误消息：“javafx.fxml.LoadException：javafx.fxml.JavaFXBuilder$ObjectBuilder 没有默认属性。”
4.  好吧，这里的课程是：

    公共类 MainWindow 实现 Initializable { private ResourceBundle rb;

    ```
    final static boolean RIGHT_TO_LEFT = false;

       //FXML ATTRIBUTES
        @FXML
        private OverviewTab owContent;
        @FXML
        private StatisticsTab statisticsContent;
        @FXML
        private SettingsTab settingsContent;
        @FXML
        private Polygon dock_bottom;
        @FXML
        private TabPane tabpane; 
        @FXML
        private Tab owTab;
        @FXML
        private Tab statisticsTab;
        @FXML
        private Tab settingsTab;
        @FXML
        private Button helpButton;
        @FXML
        private Button updateButton;
        @FXML private Button task;

    /**
     * Create the application.
     */
     @Override
        public void initialize(URL url, ResourceBundle rb) {
         this.rb = rb;
            // Adding Swing style of custom Listener
            tabpane.getSelectionModel().selectedItemProperty().addListener(new ChangeListener<Tab>() {
                @Override public void changed(ObservableValue<? extends Tab> observableValue, Tab oldTab, Tab newTab) {
                    if(newTab.equals(owTab)){

                    }
                }
              });
         //statisticsContent.addListener(this);
        owTab.setText(rb.getString("overviewTab_headline"));
        statisticsTab.setText(rb.getString("statisticsTab_headline"));
        settingsTab.setText(rb.getString("settingsTab_headline"));
     } 
    ```

    }

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T15:17:43.980

您正在参考的教程的作者在他的下一篇文章/教程中提到了错误并提供了解决方案。请参阅[FXML 中的 ToolBar 不再需要标签](http://fxexperience.com/2012/02/toolbar-in-fxml-no-longer-requires-tag/)。我想你也面临同样的问题。

# asp.net-mvc-3 - SignalR 未在启动时发送 Web 请求

> ID：10335641
> 
> 赞同：2
> 
> 时间：2012-04-26T14:35:36.320
> 
> 标签：asp.net-mvc-3, jquery, signalr

所以，我们正在用 signalR 实现一些消息传递系统。我们通过最新版本的 Nuget 包含了 signalR。该应用程序托管在 IIS 7 上。我们已禁用所有 URL 重写规则。

我们正在使用集线器，请参见以下代码：

```
 [HubName("messages")]
    public class Messages : Hub
    {
        public void Send(string message)
        {
            Clients.showPopUp(message);
        }
    } 
```

视图中的包含文件：

```
<script src="@Url.Content("~/Scripts/jquery-1.7.1.min.js")" type="text/javascript"></script>       
<script src="@Url.Content("~/Scripts/jquery.signalR.js")" type="text/javascript"></script>
<script src="@Url.Content("~/signalr/hubs")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/Messages/Messages.js")" type="text/javascript"></script> 
```

Messages.js 的内容：

```
$(function () {
    var messages = $.connection.messages;

    messages.showPopUp = function (message) {
        console.log("test");
    };

    $.connection.hub.start(function () {
        console.log('connected');
    });
}); 
```

提交消息时调用：

```
$.connection.messages.send($('#Body').val()); 
```

所以我们得到了：Google Chrome 控制台中没有错误，没有 xhr 请求什么信号。

我们检查了`/signalr/hubs`它是否存在，它还`/signalr/negotiate`返回以下 json：

```
{"Url":"/agenda/signalr","ConnectionId":"a4215b26-32f1-4a52-bf6d-4de096298a07","TryWebSockets":false,"WebSocketServerUrl":null,"ProtocolVersion":"1.0"} 
```

当我们调用 send 时，我们在控制台中得到以下信息：

> 未捕获的 SignalR：必须先启动连接，然后才能发送数据。在 .send() 之前调用 .start()

**如果我们调试 signalR，我们会看到 start 被调用，但我们没有遇到 jQuery ajax 调用的错误或成功，也没有任何 xhtml 请求。我们做错了什么？**

![没有网络请求](../Images/5a59dc11fd3a3582a209dfe4df95b173.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T16:18:28.283

尝试检查这个问题：[https ://github.com/SignalR/SignalR/issues/328](https://github.com/SignalR/SignalR/issues/328)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T06:15:01.430

**解决方案**

在 jquery.signalR.js 中更改所有

```
$.ajax(url, {options}); 
```

到

```
$.ajax({ url: url, other options...}); 
```

# zend-framework - 带有盐和 SHA1 加密的注册表单

> ID：10335643
> 
> 赞同：0
> 
> 时间：2012-04-26T14:35:38.133
> 
> 标签：zend-framework, zend-form, zend-db

我有一个注册表单，我正在使用 zend_auth 登录，以下是如何加密信息以实现安全登录：

```
->setCredentialTreatment('SHA1(CONCAT(?,salt))'); 
```

到目前为止，我有以下注册方法：

```
public function addUser($first_name, $surname, $email, $username, $password, $salt, $age, $gender, $uni) {

    $salt=substr(SHA1(mt_rand()),0,40);

    $data = array(
        'first_name' => $first_name,
        'surname' => $surname,
        'email' => $email,
        'username' => $username,
        'password' => $password,
        'salt' => $salt,
        'age' => $age,
        'gender' => $gender,
        'uni' => $uni,
    );
    $this->insert($data);
} 
```

我需要在此处为​​密码添加 SHA1 加密，但我不确定它的外观。任何帮助都是极好的。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T14:43:14.010

```
$data = array(
    'first_name' => $first_name,
    'surname' => $surname,
    'email' => $email,
    'username' => $username,
    'password' => sha1($password.$salt),
    'salt' => $salt,
    'age' => $age,
    'gender' => $gender,
    'uni' => $uni,
); 
```

# php - 如何从列中删除重复值？

> ID：10335644
> 
> 赞同：0
> 
> 时间：2012-04-26T14:35:43.530
> 
> 标签：php, html

```
 Time      To      Status  Off-Track   On-Track
10:28 AM    gf      6233          4         4
10:32 AM    dd      3835                    7
10:40 AM    ss      3235                    4
10:43 AM    ww      6621                    5
11:06 AM    zz      3837                    7 
```

假设该表是一个多维数组，如何使用 PHP 隐藏“On-Track”列中的重复值而不影响其他列？

我需要这张桌子

```
 Time      To      Status  Off-Track   On-Track
10:28 AM    gf      6233          4         
10:32 AM    dd      3835                    
10:40 AM    ss      3235                    
10:43 AM    ww      6621                    5
11:06 AM    zz      3837 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T14:42:53.183

不确定我是否正确理解了您的问题，但如果您只想从“on-track”列中删除重复项，您可以使用该[`array_unique`](http://php.net/manual/en/function.array-unique.php)方法进行操作。

```
$data = array(
    'time' => array('10.28','10.32','10.40','10.43','11.06'),
    'To' => array('gf','dd','ss','ww','zz'),
    'on-track' => array(4,7,5,4,7)
);

$data['on-track'] = array_unique($data['on-track']); 
```

看到对您的问题的编辑，您似乎只想要数组中出现一次的那些值。在这种情况下，您可以使用以下代码：

```
<?php

$data = array(
        'time' => array('10.28','10.32','10.40','10.43','11.06'),
        'To' => array('gf','dd','ss','ww','zz'),
        'on-track' => array(4,7,5,4,7)
    );
$data['on-track'] = get_values_with_count_one($data['on-track']);

echo '<pre>';
var_dump($data['on-track']);  //returns array(5);
echo '</pre>';

function get_values_with_count_one($input) {
    $count = array_count_values($input);
    $returnArray = array();

    foreach($count as $key=>$value) {
        if ($value === 1)
            $returnArray[] = $key;
    }

    return $returnArray;
} 
```

此外，您可以存储一个特殊值（如 -1）来代替重复值。所以你的最终数组将是`array(-1,-1,5,-1,-1)`. 输出时不要输出-1s。这样，您可以保存 5 的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T15:08:11.753

这个怎么样？：

```
$aExists = array(); // array to fill values which already exists.
foreach ($aItems as &$aOneRow){
  if (isset($aExists[$aOneRow['On-Track']])){
    $aOneRow['On-Track'] = '';
  } else {
    $aExists[$aOneRow['On-Track']] = true;
  }
} 
```

# java - 如何避免每次重新部署？

> ID：10335653
> 
> 赞同：0
> 
> 时间：2012-04-26T14:36:03.187
> 
> 标签：java, mysql, deployment, glassfish, ejb

我有一个在数据库中存储一些测试数据的 bean。但是我需要重新部署所有东西，每次我想运行客户端（执行该 bean 的方法）时，因为否则我会得到一个异常（在客户端上）：

```
(MARSHAL) Could not load class com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintVIolationException"
org.omg.CORBA.MARSHAL: vmcid: SUN minor code: 257 completed: Maybe 
```

我认为发生这种情况是因为相同的数据将在客户端重新启动时存储。但是，如果我在 glassfish 服务器上重新部署（所以数据库完全是空的）一切都很好。

我怎样才能管理它，我不必每次都重新部署？

我正在使用 glassfishv3。

# odp.net - ODP.Net - Oracle NUMBER(11,6) 列是数据表中的 System.Double

> ID：10335657
> 
> 赞同：0
> 
> 时间：2012-04-26T14:36:24.783
> 
> 标签：odp.net

最近遇到一个问题 - 当我们尝试在数据表中设置值时遇到异常。例外是

System.ArgumentException：输入字符串的格式不正确。无法将 <42.356> 存储在 COLUMN_NAME 列中。预期类型为 Double。---> System.FormatException：输入字符串的格式不正确。

我们正在使用 oracle 客户端 - dll 版本是 4.112.2.0。在数据库中，列 COLUMN_NAME 的类型为 NUMBER(11,6)。

**我们使用oracledataadapter.FillSchema 方法**创建数据表。我最初的理解是数据列将具有 System.Decimal 的数据类型。但是，数据列被创建为 System.Double - 因此是例外。更奇怪的问题是，我们的开发数据库、QA 数据库或集成环境中没有报告此异常，而仅在一个特定的客户端数据库中报告了此异常。

**创建的数据列是否正确？** **我还能看什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T14:38:10.703

有问题的客户是否在一个小数点分隔符是逗号的国家，例如德国，它应该是 42,356？在未指定显式格式的情况下将字符串转换为双精度时，您可能遇到了文化问题。

# java - 使用 Maven 时，如何解决在 Eclipse 中出现在类上而不是项目上的编译错误？

> ID：10335658
> 
> 赞同：0
> 
> 时间：2012-04-26T14:36:28.317
> 
> 标签：java, eclipse, maven

在 Eclipse 中打开特定类文件时出现编译错误。但是，该类不会在 Project Explorer 中显示编译错误图标。我通过右键单击项目并使用 Maven 菜单启用了依赖项管理。

我正在使用 Eclipse 3.7.1 和 Maven 2.2.1。

![看起来像这样](../Images/e08abbc4920429935b2b3c57b911d459.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:50:56.767

使用包资源管理器，而不是项目资源管理器。对于 Java 项目来说，它要可靠得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T15:54:01.987

我以前没有见过这个问题，但我会尝试执行强制性清理并在项目上构建所有内容。我建议确保在 Preferences -> Java -> Compiler -> Building 中选中以下选项：

*   清理项目时清理输出文件夹
*   重建别人修改的类文件

[链接](https://stackoverflow.com/a/7160614/366695)的问题中有几个很好的建议`bdill`，特别是尝试从 pom.xml 更新您的项目配置。

# vtk - VTK 文件格式、多边形和矢量场

> ID：10335659
> 
> 赞同：1
> 
> 时间：2012-04-26T14:36:31.907
> 
> 标签：vtk

我需要将简单几何和矢量场都导出到一些 VTK 文件中。我已经设法导出几何图形，但正在努力弄清楚如何导出矢量场。我需要的文件的结构/格式是什么？

这是我到目前为止所拥有的（顺便说一下，向量需要任意放置，这意味着结构化网格等不起作用）：

```
<?xml version="1.0"?>

<VTKFile type="PolyData" version="0.1" byte_order="LittleEndian">
  <PolyData>
    <Piece NumberOfPoints="8" NumberOfVerts="0" NumberOfLines="0" NumberOfStrips="0" NumberOfPolys="5">
      <Points>
        <DataArray type="Float32" NumberOfComponents="3" format="ascii">
        //point data//
        </DataArray>
      </Points>

      <Polys>
        <DataArray type="Int32" Name="connectivity" format="ascii">
        //connectivity data//
        </DataArray>

        <DataArray type="Int32" Name="offsets" format="ascii">
        //offsett data//
        </DataArray>
      </Polys>

    </Piece>
      //Need to put vector field with it's own points here//
  </PolyData>
</VTKFile> 
```

**更新**：根据 Chris 的建议（请参阅下面的答案），我已将文件更新为此表单：

```
<?xml version="1.0"?>

<VTKFile type="UnstructuredGrid" version="0.1" byte_order="LittleEndian">
  <UnstructuredGrid>
    <Piece NumberOfPoints="50" NumberOfCells="0">
      <PointData Vectors="Velocity">
        <DataArray Vectors="Velocity">
          //vector data//
        </DataArray>
      </PointData>
      <Points>
        <DataArray type="Float32" NumberOfComponents="3" format="ascii">
          //point data//
        </DataArray>
      </Points>
      <Cells/>
     <CellData/>
   </Piece>
 </UnstructuredGrid>
</VTKFile> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:11:27.257

从您的示例 XML 文件看来，矢量字段是在与 PolyData 节点不同的坐标处定义的。如果是这种情况，那么您将需要使用两个不同的文件。来自 VTK 文件格式规范，它是 VTK 用户指南的一部分（参见 www.vtk.org/VTK/img/file-formats.pdf）：

> 按照惯例，每种数据类型和文件类型都与特定的文件扩展名配对。

您的矢量场听起来像`UnstructuredGrid`数据，您必须明确指定网格节点的坐标（不像`ImageGrid`s，其中节点坐标由数据的间距和范围隐式定义）。这显然不能进入 PolyData VTK 文件（请参阅示例 XML 文件的第二行）。

因此，请尝试使用大纲（取自文件格式文档）为您的矢量数据编写一个新文件：

```
<VTKFile type="UnstructuredGrid" ...>
  <UnstructuredGrid>
    <Piece NumberOfPoints="#" NumberOfCells="0">
      <Points>
          <DataArray type="Float32" NumberOfComponents="3" format="ascii">
          //point data//
          </DataArray>
      </Points>
      <Cells>
          <DataArray type="Int32" Name="connectivity" .../>
          <DataArray type="Int32" Name="offsets" .../>
          <DataArray type="UInt8" Name="types" .../>
      </Cells>
      <PointData>
          <DataArray Vectors="MyVector">
            //Vector data goes here//
          </DataArray>
      </PointData>
      <CellData/>
    </Piece>
  </UnstructuredGrid>
</VTKFile> 
```

**更新**：正如评论中所讨论的，`Cells`必须指定元素（`CellData`元素可以留空，因为只指定了点数据）。该`Cells`元素指定单元类型、连通性和偏移量。对于一系列未连接的点（即粒子），此信息被指定为长度为 的数组`n`，其中`n`是数据点的数量，其中

```
type = 1, 1, .... 1
connectivity = 0, 1, 2, ... n
offsets = 1, 2, 3, ... n 
```

# java - 将 Java 数组转换为可迭代

> ID：10335662
> 
> 赞同：169
> 
> 时间：2012-04-26T14:36:38.910
> 
> 标签：java, arrays, iterable

我有一个基元数组，例如 int、int[] foo。它可能是小型的，也可能不是。

```
int foo[] = {1,2,3,4,5,6,7,8,9,0}; 
```

从中创建一个的最佳方法是`Iterable<Integer>`什么？

```
Iterable<Integer> fooBar = convert(foo); 
```

笔记：

请不要使用循环来回答（除非你能很好地解释编译器如何对它们做一些聪明的事情？）

另请注意

```
int a[] = {1,2,3};
List<Integer> l = Arrays.asList(a); 
```

甚至不会编译

```
Type mismatch: cannot convert from List<int[]> to List<Integer> 
```

还要检查 [为什么数组不能分配给 Iterable？](https://stackoverflow.com/questions/1160081/why-is-an-array-not-assignable-to-iterable) 在回答之前。

另外，如果您使用某些库（例如 Guava），请解释为什么这是最好的。（因为它来自谷歌不是一个完整的答案：P）

最后，由于似乎有一个家庭作业，请避免发布家庭作业代码。

* * *

## 回答 #1

> 赞同：136
> 
> 时间：2012-04-26T14:40:26.803

```
Integer foo[] = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 0 };

List<Integer> list = Arrays.asList(foo);
// or
Iterable<Integer> iterable = Arrays.asList(foo); 
```

尽管您需要使用`Integer`数组（而不是`int`数组）才能使其工作。

对于原语，您可以使用番石榴：

```
Iterable<Integer> fooBar = Ints.asList(foo); 
```

```
<dependency>
    <groupId>com.google.guava</groupId>
    <artifactId>guava</artifactId>
    <version>15.0</version>
    <type>jar</type>
</dependency> 
```

对于带有 lambdas 的 Java8：（受[Jin Kwon 的回答](https://stackoverflow.com/a/33739694/363573)启发）

```
final int[] arr = { 1, 2, 3 };
final Iterable<Integer> i1 = () -> Arrays.stream(arr).iterator();
final Iterable<Integer> i2 = () -> IntStream.of(arr).iterator();
final Iterable<Integer> i3 = () -> IntStream.of(arr).boxed().iterator(); 
```

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2013-01-10T00:20:12.103

只是我的 2 美分：

```
final int a[] = {1,2,3};

java.lang.Iterable<Integer> aIterable=new Iterable<Integer>() {

    public Iterator<Integer> iterator() {
       return new Iterator<Integer>() {
            private int pos=0;

            public boolean hasNext() {
               return a.length>pos;
            }

            public Integer next() {
               return a[pos++];
            }

            public void remove() {
                throw new UnsupportedOperationException("Cannot remove an element of an array.");
            }
        };
    }
}; 
```

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2015-11-16T16:07:20.427

使用 Java 8，您可以做到这一点。

```
final int[] arr = {1, 2, 3};
final PrimitiveIterator.OfInt i1 = Arrays.stream(arr).iterator();
final PrimitiveIterator.OfInt i2 = IntStream.of(arr).iterator();
final Iterator<Integer> i3 = IntStream.of(arr).boxed().iterator(); 
```

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2013-01-11T04:18:53.850

[Guava 以Int.asList()](https://github.com/google/guava/blob/9d60a8f5941265876f21a0ed7b37b8b224461a82/guava/src/com/google/common/primitives/Ints.java#L537)的形式提供您想要的适配器。关联类中的每个原始类型都有一个等价物，例如`Booleans`for`boolean`等。

```
int foo[] = {1,2,3,4,5,6,7,8,9,0};
Iterable<Integer> fooBar = Ints.asList(foo);
for(Integer i : fooBar) {
    System.out.println(i);
} 
```

上面使用的建议`Arrays.asList`不起作用，即使它们编译是因为你得到一个`Iterator<int[]>`而不是`Iterator<Integer>`. 发生的情况是，您创建了一个包含数组的 1 元素数组列表，而不是创建一个由数组支持的列表。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2019-09-14T02:47:31.740

在 Java 8 或更高版本中，`Iterable`返回的是函数式接口`Iterator`。所以你可以这样做。

```
static Iterable<Integer> convert(int[] array) {
    return () -> Arrays.stream(array).iterator();
} 
```

和

```
int[] array = {1, 2, 3};
Iterable<Integer> iterable = convert(array);
for (int i : iterable)
    System.out.println(i); 
```

输出：

```
1
2
3 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2013-03-27T14:12:57.473

我遇到了同样的问题并像这样解决了它：

```
final YourType[] yourArray = ...;
return new Iterable<YourType>() {
  public Iterator<YourType> iterator() {
     return Iterators.forArray(yourArray);   // Iterators is a Google guava utility
  }
} 
```

迭代器本身很懒`UnmodifiableIterator`，但这正是我所需要的。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-04-29T17:54:43.167

首先，我只能同意这`Arrays.asList(T...)`显然是 Wrapper 类型或具有非原始数据类型的数组的最佳解决方案。该方法在类中调用一个简单的私有静态`AbstractList`实现的构造函数，`Arrays`它基本上将给定的数组引用保存为字段，并通过覆盖所需的方法来模拟一个列表。

如果您可以为数组选择原始类型或 Wrapper 类型，我会在这种情况下使用 Wrapper 类型，但当然，它并不总是有用或必需的。您可以做的只有两种可能性：

1）您可以为每个原始数据类型数组创建一个具有静态方法的类（`boolean, byte, short, int, long, char, float, double`返回一个`Iterable<`WrapperType `>`。这些方法将使用匿名类`Iterator`（除了`Iterable`) 允许包含包含方法的参数的引用（例如 an `int[]`）作为字段以实现方法。

*-> 这种方法是高效的并且可以节省内存（除了新创建的方法的内存，尽管使用`Arrays.asList()`会以相同的方式占用内存）*

2）由于数组没有方法（要在旁边读取）您已链接）他们也无法提供`Iterator`实例。如果你真的懒得写新类，你必须使用已经存在的类的实例来实现，因为除了实例化或子类型`Iterable`之外别无他法。 创建现有 Collection 衍生实现的唯一方法`Iterable`
`Iterable`是使用循环（除非您使用如上所述的匿名类）或实例化一个`Iterable`实现类，其构造函数允许原始类型数组（因为`Object[]`不允许具有原始类型元素的数组），但据我所知，Java API没有这样的课程。

循环的原因很容易解释：
对于每个集合，您需要对象，而原始数据类型不是对象。对象比原始类型大得多，因此它们需要额外的数据，这些数据必须为原始类型数组的每个元素生成。这意味着如果三种方式的两种方式（使用`Arrays.asList(T...)`或使用现有的集合）需要对象的聚合，则需要为您的每个原始值创建`int[]`数组包装对象。第三种方法将按原样使用数组并在匿名类中使用它，因为我认为由于性能快速，它更可取。

还有第三种策略使用`Object`as 参数作为您要使用数组的方法的参数，或者`Iterable`它需要类型检查以确定参数具有哪种类型，但是我根本不推荐它，因为您通常需要考虑到 Object 并不总是需要的类型，并且在某些情况下您需要单独的代码。

总之，这是Java有问题的通用类型系统的错误，它不允许使用原始类型作为通用类型，这将通过简单地使用来节省大量代码`Arrays.asList(T...)`. 因此，您需要为每个原始类型数组进行编程，您需要这样的方法（这对 C++ 程序使用的内存基本上没有影响，该程序将为每个使用的类型参数创建一个单独的方法。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2017-06-19T09:00:33.290

您可以[`IterableOf`](http://static.javadoc.io/org.cactoos/cactoos/0.23/org/cactoos/iterable/IterableOf.html)从[Cactoos](http://www.cactoos.org)使用：

```
Iterable<String> names = new IterableOf<>(
  "Scott Fitzgerald", "Fyodor Dostoyevsky"
); 
```

然后，您可以使用以下命令将其转换为列表[`ListOf`](http://static.javadoc.io/org.cactoos/cactoos/0.23/org/cactoos/list/ListOf.html)：

```
List<String> names = new ListOf<>(
  new IterableOf<>(
    "Scott Fitzgerald", "Fyodor Dostoyevsky"
  )
); 
```

或者简单地说：

```
List<String> names = new ListOf<>(
  "Scott Fitzgerald", "Fyodor Dostoyevsky"
); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-05-02T15:24:02.180

虽然已经发布了类似的答案，但我认为使用新 PrimitiveIterator.OfInt 的原因尚不清楚。一个好的解决方案是使用 Java 8 PrimitiveIterator，因为它专门用于原始 int 类型（并且避免了额外的装箱/拆箱惩罚）：

```
 int[] arr = {1,2,3};
    // If you use Iterator<Integer> here as type then you can't get the actual benefit of being able to use nextInt() later
    PrimitiveIterator.OfInt iterator = Arrays.stream(arr).iterator();
    while (iterator.hasNext()) {
        System.out.println(iterator.nextInt());
        // Use nextInt() instead of next() here to avoid extra boxing penalty
    } 
```

参考：[https ://doc.bccnsoft.com/docs/jdk8u12-docs/api/java/util/PrimitiveIterator.OfInt.html](https://doc.bccnsoft.com/docs/jdk8u12-docs/api/java/util/PrimitiveIterator.OfInt.html)

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2017-04-29T15:08:36.333

在 java8 中，IntSteam 流可以装箱为整数流。

```
public static Iterable<Integer> toIterable(int[] ints) {
    return IntStream.of(ints).boxed().collect(Collectors.toList());
} 
```

我认为性能取决于数组的大小。

# c - 创建一个循环来切换一个值并存储新值以供进一步计算

> ID：10335664
> 
> 赞同：0
> 
> 时间：2012-04-26T14:36:47.583
> 
> 标签：c, if-statement, toggle, bit-manipulation, sensors

我试图创建以下循环：

```
int temp=0x07;

if(left sensor detects){
byteTx((temp)^(1<<0)); //(toggle bit 0)
}

if(right sensor detects){
byteTx((temp)^(1<<2)); //(toggle bit 2)
}

if(front sensor left || front sensor right detects){
byteTx((temp)^(1<<1)); //(toggle bit 1)
} 
```

但是，每隔一个 if 语句将切换正确的值，但会重置其他值（因为 temp 为 0x07）。

问题：如何确保只切换所需的位，并保持其他位不变，即使它们被其他 if 语句切换。基本上我想存储输出并使用它而不是 temp。

感谢您的帮助，如果您需要更多信息，请告诉我。

*编辑*

感谢您的回复，但我没有问如何切换，我问的是如何确保切换的值在 IF 语句之间是一致的。

0x07 将继续重置在其他 IF 语句中切换的其他位，我想确保 IF 语句不会重置其他位。

例子

0000 0111 ^(1<<0) 表示输出为 0000 0110

但是如果对于其他 IF 语句：

0000 0111 ^(1<<2) 表示输出为 0000 0011

如您所见，结果是 0011，这会将第一条语句中的 0 位变回 1。

我该如何防止呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:48:31.503

如果您想在切换后临时保持切换的位，则必须通过写回新状态来修改它。有点像

```
if(left sensor detects){
   temp=(temp)^(1<<0); //(toggle bit 0)
   byteTx(temp);
} 
```

在循环结束时，`temp`将具有所有切换位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:40:28.393

试试这个：

```
int temp=0x07;

if(left sensor detects){
    temp ^= 1<<0;
    byteTx(temp); //(toggle bit 0)
}

if(right sensor detects){
    temp ^= 1<<2;
    byteTx(temp); //(toggle bit 2)
}

if(front sensor left || front sensor right detects){
    temp ^= 1<<1;
    byteTx(temp); //(toggle bit 1)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T14:41:05.947

使用异或 ( `^`)。

按位异或与 0 保持旧值
按位异或与 1 切换旧值

```
oldvalue ^ 0x01 /* toggle bit 0 */
oldvalue ^ 0x02 /* toggle bit 1 */
... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T14:44:26.800

您可以使用 XOR 运算符« ^ »。

# jasmine - 茉莉花中的主干视图实例化不正确

> ID：10335665
> 
> 赞同：1
> 
> 时间：2012-04-26T14:36:48.897
> 
> 标签：jasmine, backbone-views

使用 chrome 开发工具。当我在应用程序中实例化一个视图时，我得到了这个......

```
new job.SearchView
SearchView
  $el: jQuery.fn.jQuery.init[1]
  cid: "view8"
  el: HTMLDivElement
  mbti: function (){ return fn.apply(me, arguments); }
  options: Object
  __proto__: ctor 
```

从茉莉花我得到以下（和规格失败）

```
new job.SearchView
SearchView
  $el: jQuery.fn.jQuery.init[0]
  cid: "view17"
  el: undefined
  mbti: function (){ return fn.apply(me, arguments); }
  options: Object
  __proto__: ctor 
```

为什么 el: 在茉莉花中实例化时未定义？

SearchView 是这样定义的...

```
jQuery ->
  class SearchView extends Backbone.View
    el: '#search'
    template: JST['resume']
    <snip>
  @job = if window.job then window.job else {}
  @job.SearchView = SearchView 
```

和这样的规格......

```
describe 'Search View', ->
  it 'should be defined', ->
    expect(job.SearchView).toBeDefined()
  beforeEach ->
    @view = new job.SearchView()
  describe 'render', ->
    it 'should render the task', ->
      $el = @view.render().$el
      expect($el).toBeDefined() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T21:05:26.173

当您`el`在视图中指定属性时，它充当容器。在您的应用程序`#search`中存在 DOM。在茉莉花测试中它没有。

[您可以使用jasmine-jquery](http://github.com/velesin/jasmine-jquery)创建沙盒容器，并在测试中构建视图时使用它们。

`

# php - Google Books API 数据作为 PHP 数组？

> ID：10335666
> 
> 赞同：3
> 
> 时间：2012-04-26T14:36:53.263
> 
> 标签：php

我从谷歌得到以下回复：

```
{
 "kind": "books#volumes",
 "totalItems": 1,
 "items": [
  {
   "kind": "books#volume",
   "id": "t9S82uKGp8IC",
   "etag": "rn9INXAtx88",
   "selfLink": "https://www.googleapis.com/books/v1/volumes/t9S82uKGp8IC",
   "volumeInfo": {
    "title": "Classic Swedish Interiors",
    "authors": [
     "Lars Sjöberg",
     "Ingalill Snitt"
    ],
    "publisher": "Frances Lincoln Ltd",
    "publishedDate": "2010-09-07",
    "description": "Lars Sjöberg has made it his life's work to understand and         preserve the Swedish manor houses of the 17th and 18th centuries. Here, exquisitely photographed by Ingalill Snitt, are the eight houses (and one church) that he has acquired over more than 40 years. The book focuses on Sjöberg's first, most complex project: the manor of Regnaholm. Unoccupied for about 40 years when Sjöberg arrived in 1966, it allowed him to experiment with interior decoration and refurnishing, copying old furniture, reweaving, and reprinting old fabric patterns. His other projects include Ekensberg, a three-story Italianate villa near Lake Mälaren, built in 1788-90, and Salaholm in Västergötland with a garden laid out in the first half of the 17th century. Odenslunda, a small manor from the 1770s with a panelled exterior and a säteritak or manor-house roof, is his family home, while Sörby, a scaled-down early 17th-century manor house, was reproduced in its entirety for an exhibition in Stockholm. Full of insight and inspiration, this is a deeply personal summary of everything Lars Sjöberg has learned in his years of working and living with classic Swedish interiors.",
"industryIdentifiers": [
 {
  "type": "ISBN_10",
  "identifier": "0711230889"
 },
 {
  "type": "ISBN_13",
  "identifier": "9780711230880"
 }
],
"pageCount": 208,
"printType": "BOOK",
"categories": [
 "Architecture"
],
"contentVersion": "preview-1.0.0",
"imageLinks": {
 "smallThumbnail": "http://bks8.books.google.com/books?id=t9S82uKGp8IC&printsec=frontcover&img=1&zoom=5&edge=curl&source=gbs_api",
 "thumbnail": "http://bks8.books.google.com/books?id=t9S82uKGp8IC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api"
},
"language": "en",
"previewLink": "http://books.google.com/books?id=t9S82uKGp8IC&printsec=frontcover&dq=isbn:9780711230880&cd=1&source=gbs_api",
"infoLink": "http://books.google.com/books?id=t9S82uKGp8IC&dq=isbn:9780711230880&source=gbs_api",
"canonicalVolumeLink": "http://books.google.com/books/about/Classic_Swedish_Interiors.html?id=t9S82uKGp8IC"
   },
   "saleInfo": {
    "country": "ZA",
    "saleability": "NOT_FOR_SALE",
    "isEbook": false
   },
   "accessInfo": {
    "country": "ZA",
    "viewability": "PARTIAL",
    "embeddable": true,
    "publicDomain": false,
    "textToSpeechPermission": "ALLOWED_FOR_ACCESSIBILITY",
    "epub": {
     "isAvailable": false
    },
    "pdf": {
         "isAvailable": true,
         "acsTokenLink": "http://books.google.com/books/download    /Classic_Swedish_Interiors-sample-pdf.acsm?id=t9S82uKGp8IC&format=pdf&output=acs4_fulfillment_token&dl_type=sample&source=gbs_api"
        },
        "webReaderLink": "http://books.google.com/books/reader?id=t9S82uKGp8IC&    printsec=frontcover&output=reader&source=gbs_api",
        "accessViewStatus": "SAMPLE"
       },
       "searchInfo": {
        "textSnippet": "Full of insight and inspiration, this is a deeply personal summary of everything Lars Sjöberg has learned in his years of working and living with classic Swedish interiors."
       }
      }
     ] 
```

1.  这种格式叫什么？（不是 XML 或 JSON？）
2.  如何将此文本转换为 PHP 数组？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T14:46:40.560

它是 JSON。您可以使用`json_decode()`它来将其转换为 PHP 关联数组。

```
$books = json_decode($your_json_data, true);
print_r($books); 
```

# regex - URL 正则表达式精确匹配小数点后 3 个字符

> ID：10335667
> 
> 赞同：3
> 
> 时间：2012-04-26T14:36:54.190
> 
> 标签：regex

我需要正则表达式在小数点后精确匹配 3 或 2 个字符，以便验证 www.xyz.com 而不是 xyz.Complete

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T16:57:36.317

我想你想要的是`\b`

我想不出使用单词边界断言没有合理覆盖的情况，`\b`任何其他答案只需要`\b`在最后（如果它总是`.com`，那么你会使用`.com\b`这意味着本质上是一个文字点 ( `.`) 字符by `com`, 后面的不是字母、数字或下划线。这是一个零宽度的断言，这意味着它不会捕获任何东西。要允许`.net`or `.edu`，您可以使用`\.(com|edu|net)\b`

大多数使用正则表达式的`\b`工具和语言都支持断言，但如果您需要更精确（例如，您可能希望在 之后允许下划线`com`），您的工具或语言编译器可能支持也是零宽度的“前瞻”断言。（在上面提到的例子中，你会使用类似`\.(com|net|edu|org|mil|museum)(?![a-zA-Z0-9])`禁止数字和大写或小写字母的东西）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T14:39:30.300

严格回答你的问题

> 精确匹配小数点后 3 或 2 个字符

只匹配结尾：

```
\.[A-Za-z]{2,3}$ 
```

`\`转义，`.`否则意味着“任何字符”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T14:40:39.080

您忘记了字符串开始和结束检查 ( `^`, `$`)。用这个：

```
^[a-zA-Z0-9\-\.]+\.(com|org|net|mil|edu|COM|ORG|NET|MIL|EDU)$ 
```

# installation - 将 codeigniter 安装复制到同一服务器上的不同子目录

> ID：10335673
> 
> 赞同：0
> 
> 时间：2012-04-26T14:37:06.617
> 
> 标签：installation, duplicates

我正在尝试在同一台服务器上创建一个沙盒版本的 codeigniter 安装，只是在不同的子目录中。所以我有一个开发版本

www.example.com/development

而且我要

www.example.com/sandbox

我做了

```
$ cd www
$ mkdir sandbox
$ cp -R development/* sandbox 
```

我更改了 sandbox/application/config/config.php，使其具有

```
$config[‘base_url’]    = ‘http://www.example.com/sandbox/’; 
```

我还制作了应用程序使用的数据库的沙盒版本，并相应地更改了 application/config/database.php。

但是在沙盒版本中，当我单击任何菜单项时，例如“登录”，我会得到一个“即将推出的页面”而不是登录表单。菜单适用于开发版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T15:45:09.120

Solution:

I had done

```
cp -R www/development/* www/sandbox 
```

But this fails to copy development/.htacess, which has the rewrite rules needed by codeignitor.

# php - 我无法让它工作，php sanitize filters

> ID：10335677
> 
> 赞同：-1
> 
> 时间：2012-04-26T14:37:14.683
> 
> 标签：php, validation, sanitize

有人可以告诉我我做错了什么吗？我正在尝试使用 php 过滤器清理和验证表单用户输入。此输入将进入 mySql 数据库，然后是 html 页面输出，因此我需要删除所有 html 标记并为 mySQL 提供安全性。

谢谢。

```
 /*
 * BEGIN Sanitize and validate
 */

  // Adding fields to sanitize array.
$filters = array(
   'author'  => FILTER_SANITIZE_SPECIAL_CHARS,
   'title'  => FILTER_SANITIZE_SPECIAL_CHARS,
   'description'  => FILTER_SANITIZE_SPECIAL_CHARS,
);

/*** apply the filters to the POST array ***/
$filtered = filter_input_array(INPUT_POST, $filters);

 // filtering out anything that isn't an email address
    $sanitized_email = filter_var(($_POST["email"]), FILTER_SANITIZE_EMAIL);
    if ( filter_var($sanitized_email, FILTER_VALIDATE_EMAIL)  == TRUE) {
        echo '';
    } else {
        echo 'Invalid Email Address.  Go Back.';
        exit;
    }

    /*
 * BEGIN sanitize and validate
 */ 
```

新代码但仍然无法正常工作。我做错了什么。仍然在数据库中获取 html 并且错误不起作用。

```
 /*
 * BEGIN Sanitize and validate
 */

  // Adding fields to sanitize array.
$filters = array(
   'author'  => FILTER_SANITIZE_STRING,
   'title'  => FILTER_SANITIZE_STRING,
   'description'  => FILTER_SANITIZE_STRING,
);

/*** apply the filters to the POST array ***/
$filtered = filter_input_array(INPUT_POST, $filters);
$filters = array_map('mysql_real_escape_string',$filters);
$filters = array_map('htmlspecialchars',$filters);
    if ( filter_var_array($filtered, FILTER_SANITIZE_STRING)) {
        echo '';
    } else {
        echo 'Invalid Input.  Go Back.';
        exit;
    }

// filtering out anything that isn't an email address
    $sanitized_email = filter_var(($_POST['email']), FILTER_SANITIZE_EMAIL);
    if ( filter_var($sanitized_email, FILTER_VALIDATE_EMAIL)) {
        echo '';
    } else {
        echo 'Invalid Email Address.  Go Back.';
        exit;
    }

    /*
 * BEGIN sanitize and validate
 */ 
```

第二次编辑如下：

通过将清理代码添加到将数据带入数据库的脚本区域，将清理后的数据显示在数据库中。

```
 $_POST['author'] = mysql_real_escape_string(trim($_POST['author']));
      $author=filter_var($_POST['author'], FILTER_SANITIZE_STRING);

      $_POST['email'] = mysql_real_escape_string(trim($_POST['email']));
      $email=filter_var($_POST['email'], FILTER_SANITIZE_EMAIL); 
```

现在我必须完成验证电子邮件的尝试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T14:48:58.873

第一件事：过滤器模块不提供您的查询安全性；该扩展与数据库交互无关，它只清理或验证用户输入（之后你可以在不使用数据库的情况下用它做很多事情）

**更新**：例如，在使用过滤器模块后，会破坏 sql 查询的引号或撇号仍然存在，并且因为字符串没问题，如果您决定将其保存在数据库中（或者它赢了），您的工作就是将其转义在绑定参数的 PDO 等系统中不是问题）

因此，为了保护您的查询，您应该使用[PDO](http://php.net/pdo)，或者如果您被其他系统卡住，您可以使用适当的东西（例如使用[mysql_real_escape_string](http://php.net/mysql_real_escape_string)为 mysql_* 函数转义输入）

考虑到您没有说您遇到的问题是什么，我可能会补充说，如果您想“清理”用户输入并删除 html，您还应该使用**FILTER_SANITIZE_STRING**标志而不是**FILTER_SANITIZE_SPECIAL_CHARS**

对我来说，这个脚本[http://codepad.org/Wrgl0qEg](http://codepad.org/Wrgl0qEg)工作正常并从输入中删除 html 标签

# vba - “该命令不可用，因为没有打开文档” - Lotus Notes 中的 MS Word 2010 VBA 错误

> ID：10335678
> 
> 赞同：0
> 
> 时间：2012-04-26T14:37:16.833
> 
> 标签：vba, ms-word, lotus-notes

我有一些 VBA 代码，在 Lotus Notes 8.5.2 中执行，基于 MS Word 2003 模板创建 MS Word 文档。这对我使用 Word 2003、2007 和 2010 来说效果很好。但是，一位使用 MS Word 2010 的客户`MS Word: the command is not available because no document is open`在一行中遇到了错误：

```
Set wdObject = createObject("word.Application")
wdObject.Documents.Add( wordpath &  "\" & docname )
wdObject.ActiveDocument.Builtindocumentproperties(wdPropertyTitle) = sTemplateName 
```

为什么这个错误会发生在一个使用 Word 2010 的用户而不是我？她有 Windows 7，未配置文件夹重定向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T15:36:53.937

您可能必须像这样编写代码：

```
 On Error Goto CreateNewInstance
    Set msWord = GetObject("", "Word.Application")
Done:
    Set CreateMSWordDocument = msWord
    Exit Function
CreateNewInstance:
    Print "Loading Microsoft Word.... Please Wait...."
    Err = 0
    Set msWord = CreateObject("Word.Application")
    Print "Microsoft Word Loaded"
    Resume Done 
```

# c# - 在 C# 中未处理 InvalidCastException

> ID：10335679
> 
> 赞同：1
> 
> 时间：2012-04-26T14:37:26.430
> 
> 标签：c#

好的，我已经为此工作了很多天，我知道我即将完成它，但我不断收到错误。我得到的第一个错误是`ArgumentException was unhandled`：

```
else
{
    using (StreamWriter sw = File.AppendText(path))<--This is where is says 
    Argument exception was unhandled.              
    {    
        foreach (var item in employeeList.Items)
            sw.WriteLine(item.ToString());
    } 
```

好的，所以我用这个修复了它：

```
try
{    
    StreamWriter sw = File.AppendText(path);
    foreach (var item in employeeList.Items)
        sw.WriteLine(item.ToString());
}
catch
{
    MessageBox.Show("Please enter something in");
} 
```

好的，现在我收到了错误

> 无效转换异常无法将类型“WindowsFormsApplication2.Employee”的对象转换为类型“System.String”。

在这条线上：

```
string path = txtFilePath.Text;    

if (File.Exists(path))
{
    using (StreamWriter sw = File.CreateText(path))
    {   
        foreach (string line in employeeList.Items)<-- Right here at the string line
            sw.WriteLine(line);
    }
} 
```

我已经完成了尝试和捕捉，但我不断收到错误。我想要对保存按钮做的就是将所选记录写入 txtFilePAth 中指定的文件，而不截断当前内部的值。但是，如果您按下按钮而没有在该框中弹出任何内容，我希望能够收到一条消息。是的，我知道没有特定路径是由于用户能够保存文件他们也想去哪里。有人可以帮我理解我做错了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T14:40:09.923

`employeeList.Items`返回列表绑定到的数据项的列表。这不是字符串列表，而是`Employee`对象列表（这似乎是您在应用程序中某处定义的类）。所以可行的语法是：

```
foreach (Employee employee in employeeList.Items)
{
    // do something with the employee object
} 
```

# encoding - Erlang 和 Cyrillic 中的 URL 编码

> ID：10335682
> 
> 赞同：3
> 
> 时间：2012-04-26T14:37:30.003
> 
> 标签：encoding, erlang, urlencode

我在 erlang 中使用标准 httpc 客户端，用于向某些服务发送/接收请求。有时我的 URL 中有一个西里尔字母路径。如何对西里尔 URL 进行 URL 编码？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T20:59:11.530

```
~/erl$erl
Erlang R14B04 (erts-5.8.5) [source] [64-bit] [smp:2:2] [rq:2] [async-threads:0] [hipe] [kernel-poll:false]

Eshell V5.8.5  (abort with ^G)
1> Encoded = edoc_lib:escape_uri("абвгдеё").
"%c0%b0%c0%b1%c0%b2%c0%b3%c0%b4%c0%b5%c1%91"
2> http_uri:decode(Encoded).
[192,176,192,177,192,178,192,179,192,180,192,181,193,145] 
```

您可以使用 list_to_binary 作为二进制文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T23:29:03.943

我在使用 edoc lib 中的 escape_uri 时遇到了一些麻烦。

所以我最终写了一个适用于 utf-8 的：

[https://stackoverflow.com/a/12648499/113112](https://stackoverflow.com/a/12648499/113112)

[https://gist.github.com/3796470](https://gist.github.com/3796470)

前任。

```
Eshell V5.9.1  (abort with ^G)

1> c(encode_uri_rfc3986).
{ok,encode_uri_rfc3986}

2> encode_uri_rfc3986:encode("абвгдеё").
"%d0%b0%d0%b1%d0%b2%d0%b3%d0%b4%d0%b5%d1%91"

3> edoc_lib:escape_uri("абвгдеё").
"%c0%b0%c0%b1%c0%b2%c0%b3%c0%b4%c0%b5%c1%91" # output wrong: À°À±À²À³À´ÀµÁ‘ 
```

# c++ - 二维数组未显示正确的输出

> ID：10335685
> 
> 赞同：0
> 
> 时间：2012-04-26T14:37:39.130
> 
> 标签：c++

我希望用户在二维数组中输入值。他还可以选择每个维度的大小

```
 int main()
{
    int x;
    int y;
    int *p;
    cout<<"How many items do you want to allocate in dimension x?"<<endl;
    cin>>x;
    cout<<"How many items do you want to allocate in dimension y?"<<endl;
    cin>>y;
    p = new int[x,y];
    for(int i=0; i<x; i++)    //This loops on the rows.
    {
        for(int j=0; j<y; j++) //This loops on the columns
        {
            int value;
            cout<<"Enter value: "<<endl;
            cin>>value;
            p[i,j] = value;
        }
    }
    drill1_4 obj;
    obj.CopyArray(p,x,y);

} 
```

然后，通过输出二维数组

```
class drill1_4
{
public:
    void CopyArray(int*,int,int);
private:
    int *p;
};

void drill1_4::CopyArray(int* a,int x,int y)
{
    p = a;
    for(int i=0; i<x; i++)    //This loops on the rows.
    {
        for(int j=0; j<y; j++) //This loops on the columns
        {
            cout << p[i,j]  << "  ";
        }
        cout << endl;
    }
    getch();
} 
```

逻辑看起来不错，但可以说，如果用户输入数字，数组应该是这样的

1 2

3 4

但相反，它看起来像这样：

3 3

4 4

数组未正确显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T21:40:26.110

不知道你有没有找到问题的答案。上面的评论告诉你哪里出错了。这是一个可能的答案。

```
#include <cstdio>

#include <iostream>
using namespace std;

class drill1_4
{
public:
    void CopyArray(int**,int,int);
private:
    int **p;
};

void drill1_4::CopyArray(int** a,int x,int y)
{
    p = a;
    for(int j=0; j<y; ++j)    //This loops on the rows.
    {
        for(int i=0; i<x; ++i) //This loops on the columns
        {
            cout << p[i][j]  << "  ";
        }
        cout << endl;
    }
    cin.get();
}

   int main()
{
    int x;
    int y;
    int **p;
    cout<<"How many items do you want to allocate in dimension x?"<<endl;
    cin>>x;
    cout<<"How many items do you want to allocate in dimension y?"<<endl;
    cin>>y;
    p = new int*[x];
    for (size_t i = 0; i < x; ++i)
        p[i] = new int[y];

    for(int j=0; j<y; ++j)    //This loops on the rows.
    {
        for(int i=0; i<x; ++i) //This loops on the columns
        {
            int value;
            cout<<"Enter value: "<<endl;
            cin>>value;
            p[i][j] = value;
        }
    }
    drill1_4 obj;
    obj.CopyArray(p,x,y);
} 
```

我不确定我理解你所说的 x 维度是什么意思。如果您的意思是 x 水平运行，那么我认为 i 和 j for-loops 会颠倒，因为 x 将代表列。

# inno-setup - Inno-Setup：如何让用户选择是否自动启动？

> ID：10335689
> 
> 赞同：10
> 
> 时间：2012-04-26T14:37:44.433
> 
> 标签：inno-setup, autostart

根据[这个问题](https://stackoverflow.com/questions/7490249/inno-setup-how-can-i-make-my-program-run-when-a-user-logs-in-to-windows/7491472)，我知道如何在没有用户交互的情况下将应用程序放在自动启动文件夹中。但是我怎样才能让用户通过复选框来决定他是否想要呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-27T07:20:04.310

感谢 TLama 和更多的谷歌搜索，我这样做了：

```
[Tasks]
Name: startup; Description: "Automatically start on login"; GroupDescription: "{cm:AdditionalIcons}"

[Icons]
Name: "{userstartup}\{#MyAppName}"; Filename: "{app}\{#MyAppExeName}"; Tasks: startup 
```

# visual-studio-2010 - 当前上下文中的测试没有覆盖数据

> ID：10335693
> 
> 赞同：1
> 
> 时间：2012-04-26T14:38:05.260
> 
> 标签：visual-studio-2010, unit-testing, mstest

我正在使用 Visual Studio 2010 SP1。当我运行“解决方案中的所有测试”时，我得到的代码覆盖率结果显示得很好。但是，当我使用“当前上下文中的测试”运行测试子集时，我只看到“找不到任何覆盖数据（.coverage 或 .coveragexml）文件。检查测试运行详细信息以了解可能的错误。”

谷歌搜索显示，其他人在运行一部分测试时确实得到了代码覆盖率结果。是否有我在某处缺少的配置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T13:06:58.767

我想我找到了原因，但仍然没有完全的意义。如果我通过转到“测试-> 调试-> 当前上下文中的测试”在当前上下文中运行测试，则它不起作用（不生成代码覆盖率）。但是，如果我执行“测试-> 运行-> 当前上下文中的测试”，那么它可以工作。到目前为止一切都很好，它只在不处于调试模式时才起作用是有道理的。

但奇怪的是，如果我使用“Test -> Run -> Tests in Current Context”的键盘快捷键（Ctrl-R，T），它就不起作用。所以我必须从菜单中运行它而不是使用键盘快捷键，否则它会说没有生成代码覆盖率。

# .net - 印第安纳州的 .NET TimeZoneInfo 对象显示他们遵守 DST？

> ID：10335695
> 
> 赞同：1
> 
> 时间：2012-04-26T14:38:13.403
> 
> 标签：.net, vb.net

为什么 .NET 中的 TimeZoneInfo 类会显示 Indiana 遵守夏令时？我认为印第安纳州的部分地区一直都是 EST。我是否应该使用“美国东部标准时间”以外的其他时间来表示印第安纳州不遵守 DST 的那些部分？

```
Dim timeZones As New List(Of String)()
With timeZones
    .Add("Eastern Standard Time")   ' Eastern TZ, except parts of Indiana
    .Add("US Eastern Standard Time")    ' parts of Indiana?
End With

For Each tz In timeZones
    Dim tzi As TimeZoneInfo = TimeZoneInfo.FindSystemTimeZoneById(tz)
    buf.AppendLine(tz)
    buf.AppendFormat("SupportsDaylightSavingTime: {0}", tzi.SupportsDaylightSavingTime).AppendLine()
    buf.AppendFormat("DisplayName: {0}", tzi.DisplayName).AppendLine()
    buf.AppendFormat("StandardName: {0}", tzi.StandardName).AppendLine()
    buf.AppendFormat("DaylightName: {0}", tzi.DaylightName).AppendLine()
    buf.AppendFormat("IsDaylightSavingTime: {0}", tzi.IsDaylightSavingTime(DateTime.Now)).AppendLine()
    buf.AppendFormat("Current Local Time: {0}", TimeZoneInfo.ConvertTimeFromUtc(DateTime.UtcNow, tzi)).AppendLine()
    buf.AppendFormat("Current UTC Time: {0}", DateTime.UtcNow).AppendLine()
    buf.AppendLine()
Next 
```

结果：

```
Eastern Standard Time
SupportsDaylightSavingTime: True
DisplayName: (UTC-05:00) Eastern Time (US & Canada)
StandardName: Eastern Standard Time
DaylightName: Eastern Daylight Time
IsDaylightSavingTime: True
Current Local Time: 4/26/2012 10:37:08 AM
Current UTC Time: 4/26/2012 2:37:08 PM

US Eastern Standard Time
SupportsDaylightSavingTime: True
DisplayName: (UTC-05:00) Indiana (East)
StandardName: US Eastern Standard Time
DaylightName: US Eastern Daylight Time
IsDaylightSavingTime: True
Current Local Time: 4/26/2012 10:37:08 AM
Current UTC Time: 4/26/2012 2:37:08 PM 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:46:02.050

根据[维基百科](http://en.wikipedia.org/wiki/Time_in_Indiana)和[“印第安纳州现在几点”](http://www.mccsc.edu/time.html)，整个印第安纳州现在都在遵守夏令时 - 但无论是在中部时间还是东部时间。

*所以没有“在印第安纳州的一次”，但它在任何地方都观察到某种*形式的夏令时。如果您在 2005 年之前返回（ish - 上面的页面对我来说不是很清楚），您可能会也可能不会发现 Windows 时区数据库正确地模拟了历史。我希望[tzdb 数据库](http://www.iana.org/time-zones)有更完整的信息......它有*几个*不同的基于印第安纳州的时区 ID（例如 America/Indiana/Knox、America/Indiana/Petersburg 等）

# .net - WCF net.p2p:// - 我可以使用与监听不同的端口进行连接吗？

> ID：10335697
> 
> 赞同：2
> 
> 时间：2012-04-26T14:38:15.947
> 
> 标签：.net, wcf, p2p, net.p2p

我有以下启动 WCF P2P 服务的代码：

```
private static readonly EndpointAddress EndpointAddress =
    new EndpointAddress("net.p2p://eigenein.Test.Wcf");
...
public void Start()
{
    NetPeerTcpBinding binding = new NetPeerTcpBinding();
    binding.Security.Mode = SecurityMode.None;
    ServiceEndpoint endpoint = new ServiceEndpoint(
        ContractDescription.GetContract(typeof(IChat)),
        binding, 
        EndpointAddress);
    endpoint.Behaviors.Add(new ProtoEndpointBehavior());
    host = new Chat();
    channelFactory = new DuplexChannelFactory<IChatChannel>(
        new InstanceContext(host), endpoint);
    channel = channelFactory.CreateChannel();
    channel.Open();
} 
```

据我了解，WCF 会自动确定侦听端口和连接到其他对等方的端口。但是我可以为每个对等体设置两个特定的不同端口：监听的端口和连接到另一个对等体的特定端口吗？就像是：

```
private static readonly EndpointAddress SourceEndpointAddress =
    new EndpointAddress("net.p2p://eigenein.Test.Wcf:808");
private static readonly EndpointAddress TargetEndpointAddress =
    new EndpointAddress("net.p2p://eigenein.Test.Wcf:909"); 
```

我想要实现的目标：允许对等方通过静态 NAT 端口映射进行连接。我无法更改这些映射。

# xcode - 在 Xcode 中复制目标时，有什么方法可以设置目标在创建之前或创建时的名称？

> ID：10335705
> 
> 赞同：35
> 
> 时间：2012-04-26T14:38:36.530
> 
> 标签：xcode, project, target, naming, duplication

在 Xcode 中复制一个目标是创建多个应用程序或框架/库产品的好方法，这些产品使用相同的代码库具有不同的功能，这是由目标构建设置或相关方案中设置的环境变量控制的条件代码的结果。首先复制您已知的工作基本版本，然后设置每个目标将使用的环境变量，然后开始使用内联预处理器#ifdef 语句拆分您的代码行为。

但是，任何重复的目标都将被命名为“原始目标名称副本”。这可以重命名，但 info.plist 也会有这个名称，它也可能出现在几个基本的构建设置中，并且删除对非信息性“副本”的所有引用可能是一个乏味且引入错误的过程" 重复目标名称的版本，具体取决于您的操作方式。当我创建 iOS 框架时，这似乎特别容易引入问题。

我的问题是是否有任何复制目标的技术允许您在复制时指定新的目标名称，因此永远不会出现临时错误的目标名称或创建包含该临时错误名称的任何文件。或者，或者，如果有某种方法可以使用“重构”功能来解决这个问题，这是一种自动化的方法。

如果问题中包含某种错误假设来解释为什么此功能未包含在 Xcode 中，请告诉我。我正在使用4.3。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T13:17:50.917

不幸的是，我非常确定没有任何当前的 UI，尽管我强烈同意这将是一个巨大的改进；我不能代表所有人，但我几乎*从不*想要一个名为*Foo copy*的目标。我建议[提交一个 Radar](http://bugreport.apple.com)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T16:57:17.227

您可以通过一些努力使用**CMake**。它是一个构建系统生成器。

一开始学习和设置项目可能很困难，有些事情（目前）对于 Xcode 来说是不容易的（比如资源添加），但它会使使用基本配置创建新目标变得非常容易。

基本上，您在源代码树中编写`CMakeLists.txt`文件以定义您的库和目标，然后定义源文件等，然后每次生成 Xcode 项目。

**添加新目标将非常容易：**

1.  `ADD_EXECUTABLE( Target_Name Source_Files )`
2.  `SET_TARGET_PROPERTIES( Target_Name PROPERTIES COMPILE_DEFINITIONS Your_Additional_Defines )`
3.  重新运行 CMake。（甚至不需要关闭 Xcode 项目）

缺点：

*   需要时间来设置。
*   有时需要研究才能使某些事情发挥作用
*   CMake 目前无法很好地支持某些内容

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-06-10T18:05:30.820

例如，在 Xcode 6（不确定早期版本）中，复制目标仍会生成“复制”附件并重命名所有本地化菜单。但是，通过在 Build Settings / All 中的 Packaging 下更新 Product Name 是可逆的。不过，Info.plist 和 Scheme 命名仍然需要注意。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-11-25T15:18:47.117

双击目标以至少重命名目标......仍在寻找重命名产品，但如果您可以重命名其他所有内容（如显示名称等），这并不重要）

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2013-02-07T23:34:15.047

*   在导航器面板中选择项目
*   选择要复制的目标
*   鼠标右键单击并选择“复制”
*   在 XCode 中重命名目标：单击选定的目标并开始内联编辑。
*   打开终端并转到您的项目目录/文件夹
*   运行 svn status 以查看 XCode 刚刚所做的更改。
*   XCode 已经创建了新的 Infocopy.plist 文件，并且如果你使用一个，它已经添加到版本控制之下。通常您要选择不同的名称，因此请按照下列步骤操作：
*   取消版本控制添加：$> svn revert Infocopy.plist
*   重命名它： $> mv Infocopy.plist YourNameInfo.plist
*   将其添加到版本控制： $> svn add YourNameInfo.plist
*   在名为“Info.plist 文件”的新目标构建设置中设置新名称
*   正确重命名目标文件： $> mv OrigTargetCopy.xcscheme YourTargetName.xcscheme
*   在版本控制下添加新的目标文件： $> svn add YourTargetName.xcscheme
*   在名为“产品名称”的新目标构建设置中重命名您的产品
*   很可能您还想为您的新目标设置新的“预处理器宏”构建设置。
*   设置正确的值 YourNameInfo.plist
*   为目标特定文件设置目标分配。通常 YourNameInfo.plist 应该只是你新目标的一部分。可能还有很多其他类似的文件（图标、启动画面、其他图形等）。

# java - DocumentList API FullTextQuery ServiceException - 发生未知错误

> ID：10335709
> 
> 赞同：1
> 
> 时间：2012-04-26T14:38:51.030
> 
> 标签：java, google-app-engine, google-docs-api, google-drive-api

对于某些查询，我在等待响应 10 秒后收到此 ServiceException。

我还尝试了直接 http get 请求和相同的结果。

例如：合同%20Colectiv%20de%20Munc%C4%83

```
1\. My code: 

    URL feedUrl = new URL("https://docs.google.com/feeds/default/private/ full/folder%3A" + folderId + "/contents/-/pdf");                        
    DocumentQuery query = new DocumentQuery(feedUrl); 
    query.setFullTextQuery(searchText); 
    client.setConnectTimeout(0);// with or without this line I receive the same result (I also put 30000 value - same result) 
    client.setReadTimeout(0);// with or without this line I receive the same result 

    DocumentListFeed feed = client.getFeed(query, DocumentListFeed.class); 

2\. This is the stacktrace for the exception that I receive with documentlist api query: 

    com.google.gdata.util.ServiceException: An unknown error has occurred. 
    <errors xmlns='http://schemas.google.com/g/2005'>
    <error><domain>GData</domain><code>ServiceException</code>
    <internalReason>An unknown error has occurred</internalReason>
    </error></errors> 
    at com.google.gdata.client.http.HttpGDataRequest.handleErrorResponse(HttpGDataRequest.java:624)
    at com.google.gdata.client.http.GoogleGDataRequest.handleErrorResponse(GoogleGDataRequest.java:563) 
    at com.google.gdata.client.http.HttpGDataRequest.checkResponse(HttpGDataRequest.java: 552) 
    at com.google.gdata.client.http.HttpGDataRequest.execute(HttpGDataRequest.java: 530) 
    at com.google.gdata.client.http.GoogleGDataRequest.execute(GoogleGDataRequest.java:535) 
    at com.google.gdata.client.Service.getFeed(Service.java:1135) 
    ... 

3\. This is the exception I receive with direct http get request: 

     java.io.IOException: Server returned HTTP response code: 500 for URL: https://docs.google.com/feeds/default/private/full/folder%3[my_folder_doc-id]/contents/-/pdf?q="[query_text]"&max-results=25 
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java: 1436) 
    at java.net.HttpURLConnection.getResponseCode(HttpURLConnection.java: 379) 
    at sun.net.www.protocol.https.HttpsURLConnectionImpl.getResponseCode(HttpsURLConnectionImpl.java: 318) 
    at GoogleDocsManager.googleSearch(GoogleDocsManager.java:281) 
```

附加信息：

```
1\. My folder contains almost 300k files. Could this be the problem? 
2\. In ~85% of searches I get the correct response () 
3\. In browser the same interogation returns "The server encountered an error. Please try again later", but after refresh works fine. 
```

任何人都可以帮我找到解决此问题的“解决方法”吗？或者如何避免？

几个月前我在[documentlist api group](https://groups.google.com/forum/?hl=en&fromgroups#!searchin/google-documents-list-api/andrei.fifiita/google-documents-list-api/-Z16CcE7pnA/ROHuFMJhOKoJ)上发布了这个问题，但由于这个组是只读的，我无法获得有关此问题的任何信息。

* * *

这是我通过直接 http 请求得到的 500 响应（大约 10 秒后）：

```
<errors xmlns='http://schemas.google.com/g/2005'>
    <error>
        <domain>GData</domain>
        <code>ServiceException</code>
        <internalReason>An unknown error has occurred.</internalReason>
    </error>
</errors> 
```

这是代码：

```
URL feedUrl = new URL("https://docs.google.com/feeds/default/private/full/folder%3A" +  folderId + "/contents/-/pdf?max-results=25&q=" + searchText);                        

HttpURLConnection copyHttpUrlConn = (HttpURLConnection) feedUrl.openConnection(); 
copyHttpUrlConn.setDoOutput(true); 
copyHttpUrlConn.setRequestMethod("GET");            
copyHttpUrlConn.setRequestProperty("GData-Version", "3.0");
copyHttpUrlConn.setRequestProperty("Authorization", "GoogleLogin auth=" + authToken);
int respCode = copyHttpUrlConn.getResponseCode(); 

System.out.println("Response  code: " + respCode);

InputStreamReader isr = null;
if(respCode != 200){
    isr = new InputStreamReader(copyHttpUrlConn.getErrorStream());
}
else{
    isr = new InputStreamReader(copyHttpUrlConn.getInputStream());
}
BufferedReader br = new BufferedReader(isr); 

String line = null;
while((line = br.readLine()) != null){
    System.out.println(line); 
} 
```

其他最近有问题的查询：

1.  标题：2012-05 "exceptii de neconstitutionalitate penal"
2.  "诉讼案"
3.  "moş crăciun srl"
4.  "bil terenuri sa bucuresti"
5.  "奥多南塔德普拉塔"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T12:25:05.530

作为一种解决方法，您可以考虑使用任务队列离线获取大型文档列表，并序列化您想要在数据存储中显示的信息。

如果出现错误，使用任务队列会给您自动重试，并且 urlfetch 和处理截止日期最多 10 分钟。

# spreadsheet - 对于数据仓库，我需要了解多少电子表格知识

> ID：10335712
> 
> 赞同：0
> 
> 时间：2012-04-26T14:39:00.850
> 
> 标签：spreadsheet, data-warehouse

我正在学习一些东西，以便我可以进入数据仓库领域。我正在阅读关于 DW 的书，它说电子表格知识对 DW 有好处。

在申请工作之前我还有一些时间。我应该开始为 DW 学习 microsoft excel

我只知道不高级的基本电子表格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:44:28.287

一定要进入数据仓库领域，成为“数据集市”知识的基础。

首先从这里开始：

*   [http://en.wikipedia.org/wiki/Data_mart](http://en.wikipedia.org/wiki/Data_mart)

然后，敢去那里看看：

*   [http://www.information-management.com/infodirect/19991120/1675-1.html](http://www.information-management.com/infodirect/19991120/1675-1.html)：它会给你一个很棒的退一步，你将能够像专业人士一样回答问题，谁见过真实的数据集市-生命生态系统。

最后但同样重要的是，尽可能熟悉 Map Reduce 理论。除其他外，请在此处跳转：

*   [http://www.informationweek.com/news/software/info_management/226600088](http://www.informationweek.com/news/software/info_management/226600088)

让我们了解您的工作面试。

# java - Java - 有多少个数字组合

> ID：10335713
> 
> 赞同：0
> 
> 时间：2012-04-26T14:39:06.697
> 
> 标签：java, numbers, combinations

任何人都可以给我一个想法，我如何在 Java 中计算以下问题。多少个可能的有效数字，其中有效数字是 0-9 之间的任何数字，长度为 10 位，不包括 # 或 *，棋子在通过电话键盘时可以追踪。假设我有一个国王，它只能像在真正的游戏中一样向任何方向移动，但一次只能移动一个单元格。

所以键盘看起来像这样：

```
 1  2  3
         4  5  6
         7  8  9
         *  0  # 
```

所以棋子每次移动 10 步，它创建的每个唯一数字都是有效数字。一块从最初的起始位置开始它的旅程。

更新：一块可以移动或停留在一个地方（移动或停留都将被视为移动）以及重新访问单元格（只要其允许在各自的移动权限内）。因此，例如，如果国王从位置 1 移动，则创建有效数字的三个有效 10 步路径数字可能是 1236547890 或 1111111111 或 1212121212

这是一个小型版本的四格方形垫的代码，只有 4 个格子，仅用于测试目的：

```
public class King
{
private static final Integer[] ALLOWED_FROM_1 = {2, 3, 4};
private static final Integer[] ALLOWED_FROM_2 = {1, 3, 4};
private static final Integer[] ALLOWED_FROM_3 = {1, 2, 4};
private static final Integer[] ALLOWED_FROM_4 = {1, 2, 3};
List<Integer> visited;

public King()
{
    this.visited = new ArrayList<Integer>();

}

public List<Integer> get_destinations(int currentPos, int noOfMoves)
{
    if (noOfMoves == 0)
    {
        visited.add(currentPos);
        return visited;

    }
    else
    {

        List<Integer> possibleMoves = getPossibleMoves(currentPos);

        for (int i = 0; i < possibleMoves.size(); i++)
        {
            visited.add(possibleMoves.get(i));
            get_destinations(possibleMoves.get(i), noOfMoves - 1);

        }

        return visited;
    }

}

private List<Integer> getPossibleMoves(int currentPos)
{

    List<Integer> possibleMoves = new ArrayList<Integer>();

    switch (currentPos)
    {
        case 1 : possibleMoves.addAll(Arrays.asList(ALLOWED_FROM_1));
            break;

        case 2: possibleMoves.addAll(Arrays.asList(ALLOWED_FROM_2));
            break;

        case 3 : possibleMoves.addAll(Arrays.asList(ALLOWED_FROM_3));
            break;

        case 4 : possibleMoves.addAll(Arrays.asList(ALLOWED_FROM_4));
    }

    return possibleMoves;

}
} 
```

上面的代码只产生了部分答案，缺少许多不同的排列。主要问题是我如何才能确保它产生所有排列，以及在上面的代码中什么时候准确地到达应该存储并稍后检索的 4 位数字（在 4 次移动之后）。另外，我怎样才能避免重新访问相同的序列，例如 1234 1234 ，所以基本上优化它，这样它就不会产生相同的路径序列/有效数字。

非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T06:34:38.127

对于国王来说，这种重复即将到来。2, 1, 2, 1, **3, 4, 3, 1** , 2, 3, 4, 2, **3, 4, 3, 1**

您可以使 getPossibleMove() 函数以特定顺序返回单元格。这将有助于避免路径重复。只按数字顺序说，然后它应该返回

2, 1, 2, 1,
2, 1, 2, 3,
2, 1, 2, 5,
2, 1, 4, 1,
2, 1, 4, 5,
2, 1, 4, 7

此外，如果您不想让棋子移动到同一个单元格，只需在 getPossibleMove() 函数中删除这些单元格即可。

我没有得到写什么代码，所以只写了理论解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T15:11:13.233

似乎是非常微不足道的学术递归问题。只要允许递归，语言应该无关紧要。

你需要：

1.  设置一个。F(n,m) 数组（在您的情况下值为 3x4）b。和一块的初始位置。C。要允许任意片段，您可能需要定义定义允许移动的委托（函数指针，匿名类）函数

2.  创建一个可递归调用的函数，用于识别下一个符合条件的位置，并将其作为输入：当前棋子位置（i，j），b。第一次迭代中的递归深度 1

3.  从深度 = 10 的递归函数返回

4.  如果您还需要所有序列，请使此递归函数可返回（非 void 类型）我会说字符串是最好的

5.  如果您想让代码更简单，您不需要在允许的单元格集中的每个步骤上验证 *、# 的存在，只需验证最后 10 个符号长字符串即可解析为 UNSIGNED LONG。虽然它使递归太长。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T14:54:18.477

这是一些可能有帮助的伪代码。您可以使用以下方法递归地解决问题：

```
// Returns a list of all the destinations given a current location
// and the number of moves allowed (10 for King)
list<int> get_destinations(int cur_location, int num_moves) {
  // Base case. If no more moves are allowed, return current location as list.
  if(num_moves == 0) {
    return as_list(cur_location);
  } else {
    // List of all destinations possible from here
    list<int> destinations;
    // Get all the possible moves that are 1 step away.
    // For example: from 1, we would return 2 and 4
    list<int> possible_moves = get_possible_moves(cur_location);

    // For each of the moves generated from the last step,
    // recursively call get_destinations() with (num_moves - 1)
    for(int n:possible_moves) {
      destinations += get_destinations(n, num_moves - 1);
    }

    return destinations;
  }
} 
```

然后，您将使用以下内容调用此函数：

```
get_unique_nums(get_destinations); // Returns the set in the form you need it 
```

祝你的家庭作业好运！

# c++ - C++ iostream 二进制读写问题

> ID：10335714
> 
> 赞同：0
> 
> 时间：2012-04-26T14:39:29.723
> 
> 标签：c++, binary, iostream

对，请耐心等待，因为我将在下面介绍两次单独的尝试。

我首先开始阅读这里的指南 (http://www.cplusplus.com/doc/tutorial/files/)。然而，虽然它包含似乎是如何使用 read() 的一个很好的示例，但它不包含如何使用 write() 的示例。

我首先尝试使用 write() 以二进制形式存储一个简单的 char 数组。我最初的想法（和希望）是我可以使用 ios::app 将新条目附加到这个文件中。最初这似乎可行，但我也得到了垃圾输出。另一个论坛上的帖子寻求帮助表明我的 char 数组末尾缺少空终止符。我应用了这个（或至少尝试基于我的显示方式），如下面的示例所示。不幸的是，这意味着 read() 不再正常运行，因为它不会读取空终止符。

我还被告知这样做`char *memoryBlock`是对 C++ 标准或其他东西的“滥用”，并且是不安全的，我应该改为定义一个精确大小的数组，即`char memoryBlock[5]`，但是如果我希望将 char 数据写入可能是任何大小？那我该如何进行呢？下面的代码包括各种注释掉的代码行，表明我所做的各种尝试和不同的变化，包括我上面提到的一些建议。我确实希望尝试使用良好实践的代码，因此如果`char *memoryBlock`不安全或任何其他代码行，我希望对此进行修改。

我还想澄清一下，我在这里写字符只是为了测试目的，所以请不要建议我应该用文本模式而不是二进制模式来写。我将在下面的代码下的这个问题的第二部分进一步阐述。

第一个代码：

```
#include <cstdlib>
#include <iostream>
#include <fstream>
//#include <string>

int main()
{
    //char memoryBlock[5];
    char *memoryBlock;
    char *memoryBlockTwo;
    std::ifstream::pos_type size;// The number of characters to be read or written from/to the memory block.

    std::ofstream myFile;
    myFile.open("Example", std::ios::out | /*std::ios::app |*/ std::ios::binary);

    if(myFile.is_open() && myFile.good())
    {
        //myFile.seekp(0,std::ios::end);
        std::cout<<"File opening successfully completed."<<std::endl;
        memoryBlock = "THEN";
        //myFile.write(memoryBlock, (sizeof(char)*4));
        //memoryBlock = "NOW THIS";

        //strcpy_s(memoryBlock, (sizeof(char)*5),"THIS");
        //memoryBlock = "THEN";
        //strcpy(memoryBlock, "THIS");
        //memoryBlock[5] = NULL;
        myFile.write(memoryBlock, (sizeof(char)*5));
    }
    else
    {
        std::cout<<"File opening NOT successfully completed."<<std::endl;
    }
    myFile.close();

    std::ifstream myFileInput;
    myFileInput.open("Example", std::ios::in | std::ios::binary | std::ios::ate);

    if(myFileInput.is_open() && myFileInput.good())
    {
        std::cout<<"File opening successfully completed.  Again."<<std::endl;

        std::cout<<"READ:"<<std::endl;
        size = myFileInput.tellg();

        memoryBlockTwo = new char[size];
        myFileInput.seekg(0, std::ios::beg);// Get a pointer to the beginning of the file.
        myFileInput.read(memoryBlockTwo, size);

        std::cout<<memoryBlockTwo<<std::endl;

        delete[] memoryBlockTwo;
        std::cout<<std::endl<<"END."<<std::endl;
    }
    else
    {
        std::cout<<"Something has gone disasterously wrong."<<std::endl;
    }
    myFileInput.close();
    return 0;
} 
```

我的下一次尝试是基于尝试将 ios::app 与 ios::binary 一起使用根本行不通，并且要修改文件，我必须读取整个内容，进行更改，然后回写并替换文件的全部内容，尽管这似乎有些低效。

但是，我没有在下面的代码中阅读和修改内容。我实际上想要做的是将自定义类的对象写入文件，然后将其完整地再次读出。

这似乎可行（尽管如果我在这里在代码方面做任何不好的事情，请指出），但是，我似乎无法存储类型的变量，`std::string`并且`std::vector`因为当我到达 myFileInput.close() 时出现访问冲突。将这些成员变量注释掉后，不会发生访问冲突。关于为什么会发生这种情况，我最好的猜测是他们使用指向其他内存的指针来存储他们的文件，我不是将数据本身写入我的文件，而是指向它的指针，当我阅读我的文件时，它碰巧仍然有效数据出来。

是否有可能将这些更复杂的数据类型的内容存储在文件中？还是我必须将所有内容分解为更基本的变量，例如字符、整数和浮点数？

第二个代码：

```
#include <cstdlib>
#include <iostream>
#include <fstream>
#include <string>
#include <vector>

class testClass
{
public:
    testClass()
    {
        testInt = 5;
        testChar = 't';
        //testString = "Test string.";
        //testVector.push_back(3.142f);
        //testVector.push_back(0.001f);
    }
    testClass(int intInput, char charInput, std::string stringInput, float floatInput01, float floatInput02)
    {
        testInt = intInput;
        testChar = charInput;
        testArray[0] = 't';
        testArray[1] = 'e';
        testArray[2] = 's';
        testArray[3] = 't';
        testArray[4] = '\0';
        //testString = stringInput;
        //testVector = vectorInput;
        //testVector.push_back(floatInput01);
        //testVector.push_back(floatInput02);
    }
    ~testClass()
    {}

private:
    int testInt;
    char testChar;
    char testArray[5];
    //std::string testString;
    //std::vector<float> testVector;
};

int main()
{
    testClass testObject(3, 'x', "Hello there!", 9.14f, 6.662f);
    testClass testReceivedObject;
    //char memoryBlock[5];
    //char *memoryBlock;
    //char *memoryBlockTwo;
    std::ifstream::pos_type size;// The number of characters to be read or written from/to the memory block.

    std::ofstream myFile;
    myFile.open("Example", std::ios::out | /*std::ios::app |*/ std::ios::binary);

    if(myFile.is_open() && myFile.good())
    {
        //myFile.seekp(0,std::ios::end);
        std::cout<<"File opening successfully completed."<<std::endl;
        //memoryBlock = "THEN";
        //myFile.write(memoryBlock, (sizeof(char)*4));
        //memoryBlock = "NOW THIS";

        //strcpy_s(memoryBlock, (sizeof(char)*5),"THIS");
        //memoryBlock = "THEN AND NOW";
        //strcpy(memoryBlock, "THIS");
        //memoryBlock[5] = NULL;
        myFile.write(reinterpret_cast<char*>(&testObject), (sizeof(testClass)));//(sizeof(char)*5));
    }
    else
    {
        std::cout<<"File opening NOT successfully completed."<<std::endl;
    }
    myFile.close();

    std::ifstream myFileInput;
    myFileInput.open("Example", std::ios::in | std::ios::binary | std::ios::ate);

    if(myFileInput.is_open() && myFileInput.good())
    {
        std::cout<<"File opening successfully completed.  Again."<<std::endl;

        std::cout<<"READ:"<<std::endl;
        size = myFileInput.tellg();
        //memoryBlockTwo = new char[size];
        myFileInput.seekg(0, std::ios::beg);// Get a pointer to the beginning of the file.
        myFileInput.read(reinterpret_cast<char *>(&testReceivedObject), size);

        //std::cout<<memoryBlockTwo<<std::endl;

        //delete[] memoryBlockTwo;
        std::cout<<std::endl<<"END."<<std::endl;
    }
    else
    {
        std::cout<<"Something has gone disasterously wrong."<<std::endl;
    }
    myFileInput.close();
    return 0;
} 
```

对于这个问题的冗长，我深表歉意，但我希望我在提供尽可能多的关于我的问题的信息方面的彻底性将加速答案的出现，即使是这样（这甚至可能是一个简单的问题，尽管我已经搜索了几个小时试图找到解决方案），因为时间是这里的一个因素。我将全天监控这个问题，以便在答案的帮助下提供澄清。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T15:13:26.407

在第一个示例中，我不确定您要写出的内容已`memoryBlock`被注释掉并且从未初始化为任何内容。当您读入它时，由于您`std::cout`用于将数据显示到控制台，因此必须`NULL`终止它，否则您将在分配给`memoryBlockTwo`.

将终止的 null 写入文件：

```
 memoryBlock = "THEN"; // 4 chars + implicit null terminator
    myFile.write(memoryBlock, (sizeof(char)*5)); 
```

和/或，确保缓冲区在读取后终止：

```
 myFileInput.read(memoryBlockTwo, size);
    memoryBlockTwo[size - 1] = '\0'; 
```

在您的第二个示例中，不要对 C++ 对象执行此操作。您正在规避必要的构造函数调用，如果您尝试使用已注释掉的向量，它肯定不会像您期望的那样工作。如果该类是普通的旧数据（非虚拟函数，没有指向其他数据的指针），您可能会没事，但这仍然是非常糟糕的做法。持久化 C++ 对象时，请考虑考虑重载`<<`and`>>`运算符。

# android - 使用 AsyncTask 在 ListView 中显示数据

> ID：10335718
> 
> 赞同：3
> 
> 时间：2012-04-26T14:39:33.450
> 
> 标签：android, listview, android-asynctask

我需要一点帮助。我需要使用**asynctask**在 ListView 中显示数据。但我不知道因为我是 Android 编程新手……非常感谢你的帮助。

```
public class Main extends ListActivity {
Button buttonbg;   
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
   setContentView(R.layout.listplaceholder);

    ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();

    JSONObject json = JSONfunctions.getJSONfromURL("http://10.10.10.10/data.php");

    try{

        JSONArray  ip = json.getJSONArray("ip");

        for(int i=0;i<ip.length();i++){                     
            HashMap<String, String> map = new HashMap<String, String>();    
            JSONObject e = ip.getJSONObject(i);

            map.put("id",  String.valueOf(i));
            map.put("data1", e.getString("date"));
            map.put("data2", "Location:" +  e.getString("location") + "   Status:" + e.getString("status"));
            mylist.add(map);            
        }       
    }catch(JSONException e)        {
         Log.e("log_tag", "Error parsing data "+e.toString());
    }

    ListAdapter adapter = new SimpleAdapter(this, mylist , R.layout.main, 
                    new String[] { "data1", "data2" }, 
                    new int[] { R.id.item_title, R.id.item_subtitle });

    setListAdapter(adapter);

    final ListView lv = getListView();
    lv.setTextFilterEnabled(true); 
```

}}

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-27T06:52:16.397

尝试这个

```
new MyAsyncTask.execute("http://10.10.10.10/data.php"); 
```

将任务声明为

```
class MyAsyncTask extends AsyncTask<String, Integer, ArrayList<HashMap<String, String>> > {

    ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();

    @Override
    protected ArrayList<HashMap<String, String>> doInBackground(String... params) {

        JSONObject json = JSONfunctions.getJSONfromURL(params[0]);

        try {
            JSONArray  ip = json.getJSONArray("ip");

            for (int i=0;i<ip.length();i++) {                     
                HashMap<String, String> map = new HashMap<String, String>();    
                JSONObject e = ip.getJSONObject(i);

                map.put("id",  String.valueOf(i));
                map.put("data1", e.getString("date"));
                map.put("data2", "Location:" +  e.getString("location") + "   Status:" + e.getString("status"));
                mylist.add(map);            
            } 
            return mylist
        } catch (JSONException e) {
            Log.e("log_tag", "Error parsing data "+e.toString());
        }
        return null;
    }

    @Override
    protected void onPostExecute(ArrayList<HashMap<String, String>> result) {
        ListAdapter adapter = new SimpleAdapter(YourActivity.this, result , R.layout.main, 
                new String[] { "data1", "data2" }, 
                new int[] { R.id.item_title, R.id.item_subtitle });
        YourActivity.this.setListAdapter(adapter); // If Activity extends ListActivity
        final ListView lv = getListView();
        lv.setTextFilterEnabled(true);

    } 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T15:39:25.233

不要在 onCreate() 中下载任何数据 - 如果花费的时间太长，您将收到 ANR 异常（活动无响应）。您应该在问题中使用 AsyncTask 。对于 AsyncTask，你在 android 网站上有很好的例子：

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

你应该把 JSONfunctions.getJSONfromURL() 里面 doInBackground()

以及 onPostExecute() 下面的所有内容

# windows - 什么是最普遍/最常见的南美西班牙文化

> ID：10335721
> 
> 赞同：3
> 
> 时间：2012-04-26T14:39:48.007
> 
> 标签：windows, internationalization, cultureinfo

我们的应用程序具有拉丁美洲西班牙语的语言概念，我需要为该语言文件选择一个文化信息。微软有 17 个不同的拉丁美洲国家的文化，我需要选择一个最能代表它们的文化。关于可能是哪一个的任何输入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:51:26.643

¡墨西哥万岁！!México es el mejor país del mundo¡

...或者更确切地说，我只是按人口计算：

[http://wiki.answers.com/Q/What_Latin_American_Country_is_the_world's_most_Populated_spanish-speaking_country](http://wiki.answers.com/Q/What_Latin_American_Country_is_the_world%27s_most_Populated_spanish-speaking_country)

（假设对您的目标市场没有更多的了解。）

我不知道本地化存在于`es`主类别之外......

[http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo(v=vs.71).aspx)

如果他们还没有建立某种层次结构，那么这似乎是一个相当奇怪的特征。

# android - 将标记中心设置为 GeoPoint

> ID：10335724
> 
> 赞同：3
> 
> 时间：2012-04-26T14:39:57.257
> 
> 标签：android, marker, osmdroid

我正在研究 osmdroid，并尝试做一些非常简单的事情，我曾经在另一个地图框架上做过，但我找不到如何在 OSMdroid 上做。我想在地图上的某个地方放置一个标记，在 GeoPoint 上。到此为止，这很容易。但我也希望标记图片的**中心**位于上述地理点上。使用我的代码，现在，地理点位于图像的左下角。

怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-27T07:20:20.363

好的，我找到了。所以我正在回答我的问题，以防有人遇到同样的问题。

我首先尝试了你的想法 woodstock，但我没有找到 boundCenter 方法。

因此，为了使 GeoPoint 成为可绘制对象的中心，您只需要这样做：

```
overlayItem.setMarker(YourDrawable);
overlayItem.setMarkerHotspot(HotspotPlace.CENTER); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-11-29T20:26:16.617

如果您使用的是 Marker 类，那么最好使用下面的代码...

```
Marker marker = new Marker(map);
marker.setAnchor((float)0.5, (float)0.5); // center icon to geo pint 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T15:43:11.850

I haven't used osmdroid before, but you can normally achieve this by setting the bounds of the marker.

For example, when using Google's MapView you would use the following code to specify that you want the center of the marker to be on the given GeoPoint:

```
super(boundCenter(defaultMarker)); 
```

# visual-studio-2010 - 如何使用箭头键或wasd键更改VB 2010中图片框的位置？

> ID：10335726
> 
> 赞同：0
> 
> 时间：2012-04-26T14:40:04.417
> 
> 标签：visual-studio-2010, location

我只能在学校上网，所以过滤器会妨碍任何真正的研究。我目前正在为学校项目编写 rpg，但很难让头像在地图上移动。到目前为止，这是我可悲的代码：

```
Public Class Map1

    Private Sub USER_KeyDown(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyEventArgs) Handles Me.KeyDown
        User.Top = User.Top - 1
    End Sub

    Private Sub USER_KeyUp(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyEventArgs) Handles Me.KeyUp
        User.Top = User.Bottom + 1
        'User.Location.X = 200
    End Sub
End Class 
```

我有以下问题：当我删除 x 时，User.location.x = 200 有语法错误，而当我没有时。玩家还必须不断按键才能移动。

两者我都不知道如何纠正。非常感谢任何帮助，因为它是我的期末成绩。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T04:20:17.560

你可以把它放在一个`timer_tick`循环中，这就是我所做的。

正确的版本`User.Location.X = 200`是：

```
User.location = new point(200, User.location.y) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T14:32:41.967

nvm 找到了解决方案。这是其他任何人在未来可能需要代码的地方。

```
Private Sub Map_KeyDown(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyEventArgs) Handles MyBase.KeyDown
    If e.KeyCode = Keys.Up Then
        User.Location = New Point(User.Location.X, User.Location.Y - 5)
    ElseIf e.KeyCode = Keys.Down Then
        User.Location = New Point(User.Location.X, User.Location.Y + 5)
    ElseIf e.KeyCode = Keys.Left Then
        User.Location = New Point(User.Location.X - 5, User.Location.Y)
    ElseIf e.KeyCode = Keys.Right Then
        User.Location = New Point(User.Location.X + 5, User.Location.Y)
    End If 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-10T09:53:57.637

```
Module

    Public Sub MovePictureBox(ByRef PictureBox As PictureBox)
        Tiempo.Tag = PictureBox
        AddHandler PictureBox.Parent.KeyDown, AddressOf Parent_KeyDown
        AddHandler PictureBox.Parent.KeyUp, AddressOf Parent_KeyUp
        AddHandler CType(PictureBox.Parent, Form).Load, AddressOf Parent_Load
    End Sub
    Private Up, Down, Left, Right As Boolean
    WithEvents Tiempo As New Timer() With {.Interval = 1}
    Private Sub Tiempo_Tick() Handles Tiempo.Tick
        If Up Then Tiempo.Tag.Top -= 2
        If Down Then Tiempo.Tag.Top += 2
        If Left Then Tiempo.Tag.Left -= 2
        If Right Then Tiempo.Tag.Left += 2
    End Sub
    Private Sub Parent_KeyDown(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyEventArgs)
        If e.KeyCode = Keys.Up Then Up = True
        If e.KeyCode = Keys.Down Then Down = True
        If e.KeyCode = Keys.Left Then Left = True
        If e.KeyCode = Keys.Right Then Right = True
        Tiempo.Enabled = True
    End Sub
    Private Sub Parent_KeyUp(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyEventArgs)
        Tiempo.Enabled = False
        Up = False : Down = False : Right = False : Left = False
    End Sub
    Private Sub Parent_Load(ByVal sender As System.Object, ByVal e As System.EventArgs)
        sender.KeyPreview = True
    End Sub
End Module 
```

# iphone - 从 WebDriver 传递键盘事件不起作用 iOS 模拟器/设备

> ID：10335732
> 
> 赞同：0
> 
> 时间：2012-04-26T14:40:22.560
> 
> 标签：iphone, ios, unicode, webdriver

场景： - 我们有通过 AJAX 检查错误的注册表单 - 字段有：email、confEmail、fname、lname、pwd、confPwd - 当用户在“email”字段和选项卡进入“confEmail”字段时发生错误检查。“pwd”和“confPwd”字段相同 - 我正在尝试编写模仿用户行为的自动化脚本，用户将在“email”字段中输入“test”，然后选项卡到下一个字段“confEmail”。这应该调用 AJAX 检查并抛出有关“无效电子邮件地址”的错误

测试配置： - 用 Linux 编写的测试 - 在 Mac 上的 iPhone 模拟器中运行（当然）

这段代码输入电子邮件地址： driver.findElement(By.cssSelector(Locators.getLocator("mobilebuy->emailAddressField"))).sendKeys("test");

由于 sendKeys 不会将焦点从该字段移开，因此我将 TAB/click 发送到下一个字段，以便 AJAX 启动。显然，这样做是行不通的。AJAX 永远不会触发，也不会出现错误消息。我可以看到当我在 iPhone 模拟器中手动模拟它时，它可以工作。

这应该跳到下一个字段： driver.findElement(By.cssSelector(Locators.getLocator("mobilebuy->emailAddressField"))).sendKeys(Keys.TAB);

或者

这应该单击应该触发 AJAX 的下一个字段： driver.findElement(By.cssSelector(Locators.getLocator("mobilebuy->confEmailAddressField"))).click();

关于如何处理此问题的任何想法？我仔细查看了它，甚至尝试将 UNICODE 传递给“TAB”键，但也没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:20:55.347

首先，只有 FirefoxDriver 支持 Action 类（根据[http://code.google.com/p/selenium/wiki/TipsAndTricks](http://code.google.com/p/selenium/wiki/TipsAndTricks)），但您也应该期望对 InternetExplorerDriver 的支持。

使用以下步骤使其工作： - 我有一个 Type 方法，可将项目键入表单 - 此后，我向使用 Action 类触发 Ajax 的字段发送点击，这似乎有效

```
// (WebDriver, email, confEmail, fname, lname, pwd, confPwd)
TypeRegistrationData(driver, "test/tester@com", "", "", "", "", "");

// action builder that tabs to next field
WebElement we = driver.findElement(By.cssSelector(Locators.getLocator("buy->emailAddressField")));
Actions builder = new Actions(driver);

builder.click(we); // this fires up the ajax that is expected 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T21:46:32.750

尝试使用动作链

```
Actions builder = new Actions(driver);
builder.keyDown(Keys.TAB).keyUp(Keys.TAB);
builder.build().perform(); 
```

如果我真的很绝望，我会尝试使用 sendKeys 不一定在文本字段上，而是在某些父元素上（甚至可能在 body 本身上）。

# entity-framework - 建立与在 Code First Entity Framework 中继承的许多类的基本模型的关系

> ID：10335733
> 
> 赞同：0
> 
> 时间：2012-04-26T14:40:26.093
> 
> 标签：entity-framework, database-design, ef-code-first

我正在使用代码优先和实体框架创建我的数据库。我正在定义我所有的模型都很好用，但现在我有一个可以包含块的页面类。这些块有一个带有 ID、BlockType、Position、Name 等的基类，但是有不同类型的块具有不同的属性，它们是从这个基类继承的类。我想知道如何设置我的模型，以便页面可以拥有“块”的集合，而无需将自定义属性存储在逗号分隔列表或类似列表中。可能吗？什么是建模这个的“好”方法..

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:48:58.547

实体框架支持继承。有多种策略可以将您的对象模型（基类和派生类）映射到数据库模式。最重要的是：

*   [每个层次结构表 (TPH)](http://weblogs.asp.net/manavi/archive/2010/12/24/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-1-table-per-hierarchy-tph.aspx)：基类和所有派生类将映射到数据库中的单个表。派生类的任何自定义属性都将在表中显示为单独的列，并且该表包含用于区分类型的鉴别器列。EF 设法加载实现特定类型所需的列。

*   [每个类型的表（TPT）](http://weblogs.asp.net/manavi/archive/2010/12/28/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-2-table-per-type-tpt.aspx)：基类有自己的表，它只包含基类属性。每个派生实体都会获得另一个具有此类型附加属性的表。EF 设法从包含所有属性的不同表中加载属性（创建适当的连接）以实现特定类型。

在我看来，TPT 是实现继承的更简洁的方法，但它目前（EF <= 4.3）与 TPH 相比存在性能问题，因为 EF 生成的 SQL 不是最理想的。该问题将在 EF 5.0 中得到解决。但 TPH 仍将是更高效的映射方式，因为它不需要连接多个表。

链接的博客文章中详细讨论了这些策略的优点和缺点。在博客中，您还可以找到第三个（不太常用的）选项 -[每个具体类型的表 (TPC)](http://weblogs.asp.net/manavi/archive/2011/01/03/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-3-table-per-concrete-type-tpc-and-choosing-strategy-guidelines.aspx)。

# php - 使用正则表达式的 xpath 查询

> ID：10335736
> 
> 赞同：4
> 
> 时间：2012-04-26T14:40:31.250
> 
> 标签：php, regex, xpath

很简单，有一个 HTML 文件，还有一个带有变量 id 的 div

```
<div id="abc_1"><div> 
```

id 的整数部分是可变的，因此它可以是 abc_892、abc_553 ...等

最好的查询是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T14:46:38.157

```
//div[starts-with(@id, "abc_")] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T15:53:15.677

**The currently accepted answer selects such unwanted elements as:**

```
<div id="abc_xyz"/> 
```

But only such `div` elements must be accepted, whose `id` not only starts with `"abc_"` but the substring following the `_` is a representation of an integer.

**Use this XPath expression**:

```
//div
   [@id[starts-with(., 'abc_') 
      and 
        floor(substring-after(.,'_')) 
       = 
        number(substring-after(.,'_')) 
       ]
   ] 
```

This selects any `div` element that has an `id` attribute whose string value starts with the string `"abc_"` and the substring after the `-` is a valid representation of an integer.

**Explanation**:

Here we are using the fact that in XPath 1.0 this XPath expression:

```
floor($x) = number($x) 
```

evaluates to `true()` exactly when `$x` is an integer.

**This can be proven easily:**

1.  If `$x` is an integer the above expression evaluates to `true()` by definition.

2.  If the above expression evaluates to `true()`, this means that neither of the two sides of the equality are `NaN`, because by definition `NaN` isn't equal to any value (including itself). But then this means that `$x` is a number (`number($x)` isnt `NaN`) and by definition, a number `$x` that is equal to the integer `floor($x)` is an integer.

**Alternative solution**:

```
//div
   [@id[starts-with(., 'abc_') 
      and 
        'abc_' = translate(., '0123456789', '')
       ]
   ] 
```

# font-face - Chrome 和 Firefox 中的 Web 字体 @font-face 渲染/抗锯齿

> ID：10335740
> 
> 赞同：3
> 
> 时间：2012-04-26T14:40:46.833
> 
> 标签：font-face, remote-desktop, antialiasing, text-rendering

我熟悉在不同浏览器和/或操作系统中呈现 Web 字体的差异。不过有几个问题：

我使用的网络字体（woff）在 Chrome 中看起来像废话，但在 FF 中（在 Windows 7 上）可以。前几天，我通过远程桌面从家里使用我的办公室电脑。我注意到字体现在看起来也像 FF 中的废话。它看起来与办公室的 Chrome 中的非常相似。（我没有在家测试 Chrome）。我知道远程桌面以某种方式减少了“图形”，但不完全是如何，我不知道它如何影响字体渲染。第二天到办公室的时候，FF里的渲染还是乱七八糟的。我猜远程桌面会话对“图形”的更改仍然有效。我检查了 Chrome，现在在*其中进行渲染*浏览器看起来不错，就像以前的FF一样！！？所以我重新启动计算机以恢复我通常的“图形设置”，但这并没有帮助。然后我清除了字体缓存并重新启动。现在我回到糟糕的 Chrome 渲染和 OK FF 渲染。

我的问题：

1.  当我连接远程桌面（设置 = 32 位色深）时，“图形”一般会发生什么，特别是字体渲染会发生什么？我的猜测是，无论发生什么变化，FF 和 Chrome 都会使用比以前不同的渲染方法。

2.  重新启动计算机后效果如何仍然存在。“渲染结果”是否以某种方式存储在字体缓存中？似乎很奇怪。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T12:04:31.310

Chrome 目前无法使用正确的抗锯齿渲染 TrueType 字体。WOFF 字体是 OpenType 或 TrueType 的容器，在您的情况下可能是 TrueType，因此您会得到糟糕的渲染。您可以为 Chrome 提供 SVG 字体（更大的文件大小）或使用基于 OpenType 的 WOFF。

除此之外，还有许多其他因素会影响字体渲染，例如在系统上本地使用字体或是否启用 ClearType（默认情况下不会通过远程桌面启用）。

[也见这里](http://www.vandersterren.com/blog/2012/04/font-linking-chrome-and-anti-aliasing)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-08T14:21:34.083

我遇到了同样的问题并进行了搜索，但没有找到答案。

最终在我的情况下，它是远程桌面、服务器 2012 和浏览器字体（在我的情况下为 Roboto）的组合。

它在 chrome 中是最差的，在 Firefox 中还可以，在 ie 中是完美的。

原因是服务器 2012 中缺少“桌面体验”功能。

要将此功能添加到服务器 2012：

*单击开始，指向管理工具，然后单击服务器管理器。在服务器管理器中，单击功能，然后在服务器管理器详细信息窗格中的功能摘要下，单击添加功能。在功能列表中，选择桌面体验，然后单击安装。*

这完全解决了我在所有浏览器/字体中的问题，希望它可以帮助其他人。

# java - Java 如何：创建通用列表？

> ID：10335741
> 
> 赞同：2
> 
> 时间：2012-04-26T14:40:50.140
> 
> 标签：java, generics

我需要创建`generic list`可以充当`List<ClassA>`或`List<ClassB>`因为我有以下情况。

```
if(e instanceof A)
return A;
else
return B 
```

但是我想填充一个`List Result`可以充当`List<ClassA> Result`or的对象`List<ClassB> Result`，我确定我们可以在这里使用泛型，但我不知道如何使用它？

**更新**

我想要做的就是运行时，我的列表应该填充正确的类型，要么`class A or class B`，

```
if()
{
    //data is present in List<ClassA> classAList = new ArrayList<ClassA>();
    //return classAList
}
else
{
  //return List<ClassB> classBList = new ArrayList<ClassB>();
} 
```

希望这可以帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T14:58:31.147

因此，如果我对您的理解正确，您希望能够根据给定对象是 ClassA 还是 ClassB 来构造 ClassA 列表或 ClassB 列表。

```
public List<? extends Object> getList(Object e) {
    List<? extends Object> list = new ArrayList<? extends Object>();
    if(e instanceof ClassA) {
        List<ClassA> listA = new ArrayList<ClassA>();
        // Populate list somehow
        list = listA;
    } else if (e instanceof ClassB) {
        List<ClassB> listB = new ArrayList<ClassB>();
        // Populate list somehow
        list = listB;
    }
    return list;
} 
```

不幸的是，返回类型必须允许任何一种类型（您也可以创建两个具有不同返回类型的方法，但它们必须具有不同的名称）。但是，这允许您在将 listA 和 listB 分配给更通用的列表之前将其用作它们自己的类型。

但是，这违反了[SOLID principal](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)，因此替代方案可能是：

```
public abstract class Root<T> {
    public abstract List<T> getList();
}

public class ClassAList extends Root<ClassA> {
    @Override
    public List<ClassA> getList()  {
        List<ClassA> list = new ArrayList<ClassA>();
        // Populate list somehow
        return list;
    }
}

public class ClassBList extends Root<ClassB> {
    @Override
    public List<ClassB> getList()  {
        List<ClassB> list = new ArrayList<ClassB>();
        // Populate list somehow
        return list;
    }
} 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T14:43:42.933

```
class A extends C{ ... body ... }
class B extends C{ ... body ... } 
```

//将工作

```
List<C> list = new ArrayList<C>();
list.add(new A());
list.add(new B()); 
```

或建议`Bernard`

**概括 ：**

您的选择是创建一个父类并扩展父类`A`并将`B` 父类型添加到列表中，或者创建一个接口并实现该接口`A`并将`B`接口类型放入列表中。无论哪种方式，您最终都会更改您的类`A`并`B`创建新的接口或类

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T14:43:52.230

您应该使用两个类都实现的通用接口。假设你的接口被调用`MyInterface`。你的两个类都可以实现这个接口，你的泛型列表可以是 type `List<MyInterface>`。

另一种方法是你的两个类都有一个共同的基类。

**编辑：**

根据 OP 的要求添加了一些示例。

示例界面：

```
public interface MyInterface
{
   String getName();

   void setName(String name);
} 
```

示例接口实现：

```
public class ClassA implements MyInterface
{
   private String name;

   public String getName()
   {
      return name;
   }

   public void setName(String name)
   {
      this.name = name;
   }
} 
```

通用列表用法示例：

```
List<MyInterface> list = new ArrayList<MyInterface>();

list.add(new ClassA());

MyInterface item = list.get(0);

item.setName("Bob");

String name = item.getName(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T19:15:56.657

可能是这样的：

```
public class Test {
  static class A {}
  static class B {}
  private static List<?> getList() {
    List<A> aList = new ArrayList<A>();
    List<B> bList = new ArrayList<B>();
    aList.add(new A());
    if (aList.size() > 0) {
      return aList;
    } else {
      return bList;
    }
  }

  public static void main(String[] args) {
    List<?> cList = getList();
    System.out.println(cList);
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T14:43:05.757

如果 ClassA 和 ClassB 有一个共同的基类（即它们都扩展同一个类），那么您可以在泛型参数中使用基类类型。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-26T14:43:34.523

泛型基本上用于静态时间检查。在您的情况下，您有两种类型的数据，因此除非 A 和 B 共享一个共同的祖先类，否则使用泛型没有任何意义

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-26T14:44:23.117

做到这一点的唯一方法`ClassA`是`ClassB`拥有一个公共父类或实现一个公共接口。在任何一种情况下，将列表限制为这些特定类的唯一方法是，如果没有其他类具有该公共父级或公共接口。

这两者都要求这个公共父级或公共接口已经存在，或者您可以控制`ClassA`and `ClassB`。如果他们不这样做而你不这样做，那么就没有办法做你所追求的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-26T14:44:44.150

这只有在共享一个共同的父母（比如`A`）时才真正可能。然后你可以返回一个.`B``C``List<C>`

可以返回 a`List<Object>`但我建议不要这样做并考虑重新设计您的设计。

# mod-rewrite - mod_rewrite 现在坏了？

> ID：10335742
> 
> 赞同：0
> 
> 时间：2012-04-26T14:40:57.723
> 
> 标签：mod-rewrite, apache2, apache

我已经升级了 mod_rewrite 并且我的配置停止了工作；我有这个：

```
RewriteRule ^index\.php$ - [L] 
```

它已经工作多年以匹配默认页面。它不再工作了，日志显示：

```
applying pattern '^index\.php$' to uri '/index.php' 
```

显然，新的 / 已添加到 URI。有谁知道为什么新版本改变了这一点以及是否可以修复它？

TIA

格雷格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T08:36:40.680

经过一番挖掘，我发现了问题；似乎 mod_rewrite 不能真正在配置文件中使用，只能在 .htaccess 中使用，否则它的行为会很奇怪（路径问题）。一系列的问题让我以为它坏了，其实一直都是这样。

# xcode - 如何下载 Xcode DMG 或 XIP 文件？

> ID：10335747
> 
> 赞同：980
> 
> 时间：2012-04-26T14:41:18.723
> 
> 标签：xcode, dmg

Mac App Store 在哪里下载文件到 Lion 下？我需要 DMG 文件来修复系统中的某些内容，但如何访问该文件？

* * *

## 回答 #1

> 赞同：5547
> 
> 时间：2012-04-26T14:52:40.777

[您可以在https://developer.apple.com/download/more/](https://developer.apple.com/download/more/)上找到适用于 Xcode 和其他开发工具的 DMG 或 XIP （需要 Apple ID 才能登录）。

在下载以下任何内容之前，您必须登录才能进行有效会话。

*（最新版本。对于每个次要版本（6.3、5.1 等） ，列表中**仅保留最新版本**。）

**Xcode 13**

*   [13.3 - 测试版 3](https://developer.apple.com/services-account/download?path=/Developer_Tools/Xcode_13.3_beta_3/Xcode_13.3_beta_3.xip)

*   [13.2.1](https://developer.apple.com/services-account/download?path=/Developer_Tools/Xcode_13.2.1/Xcode_13.2.1.xip)

*   [13.1](https://developer.apple.com/services-account/download?path=/Developer_Tools/Xcode_13.1/Xcode_13.1.xip)

*   [13.0](https://developer.apple.com/services-account/download?path=/Developer_Tools/Xcode_13/Xcode_13.xip)

**Xcode 12**

*   [12.5.1](https://developer.apple.com/services-account/download?path=/Developer_Tools/Xcode_12.5.1/Xcode_12.5.1.xip)（需要具有运行 macOS Big Sur 11 或更高版本的 Apple 芯片的 Mac，或运行 macOS Big Sur 11 或更高版本的基于 Intel 的 Mac）（截至 2021 年 6 月 22 日的最新版本）

*   [12.4](https://developer.apple.com/services-account/download?path=/Developer_Tools/Xcode_12.4/Xcode_12.4.xip)（需要带有运行 macOS Big Sur 11 或更高版本的 Apple 芯片的 Mac，或运行 macOS Catalina 10.15.4 或更高版本的基于 Intel 的 Mac）

*   [12.3](https://developer.apple.com/services-account/download?path=/Developer_Tools/Xcode_12.3/Xcode_12.3.xip)（需要带有运行 macOS Big Sur 11 或更高版本的 Apple 芯片的 Mac，或运行 macOS Catalina 10.15.4 或更高版本的基于 Intel 的 Mac）

*   [12.2](https://developer.apple.com/services-account/download?path=/Developer_Tools/Xcode_12.2/Xcode_12.2.xip)

*   [12.1](https://developer.apple.com/services-account/download?path=/Developer_Tools/Xcode_12.1/Xcode_12.1.xip)

*   [12.0.1](https://developer.apple.com/services-account/download?path=/Developer_Tools/Xcode_12.0.1/Xcode_12.0.1.xip)（需要 macOS 10.15.4 或更高版本）（截至 2020 年 9 月 24 日的最新版本）

**Xcode 11**

*   [11.7](https://developer.apple.com/services-account/download?path=/Developer_Tools/Xcode_11.7/Xcode_11.7.xip)（2020 年 9 月 2 日最新）

*   [11.6](https://developer.apple.com/services-account/download?path=/Developer_Tools/Xcode_11.6/Xcode_11.6.xip)

*   [11.5](https://developer.apple.com/services-account/download?path=/Developer_Tools/Xcode_11.5/Xcode_11.5.xip)

*   [11.4.1](https://developer.apple.com/services-account/download?path=/Developer_Tools/Xcode_11.4.1/Xcode_11.4.1.xip)（需要 macOS 10.15.2 或更高版本）

*   [11.3.1](https://developer.apple.com/services-account/download?path=/Developer_Tools/Xcode_11.3.1/Xcode_11.3.1.xip)

*   [11.2.1](https://developer.apple.com/services-account/download?path=/Developer_Tools/Xcode_11.2.1/Xcode_11.2.1.xip)

*   [11.1](https://developer.apple.com/services-account/download?path=/Developer_Tools/Xcode_11.1/Xcode_11.1.xip)

*   [11](https://developer.apple.com/services-account/download?path=/Developer_Tools/Xcode_11/Xcode_11.xip)（需要 macOS 10.14.4 或更高版本）

**Xcode 10**（iTunes Connect 不支持）

*   [10.3](https://developer.apple.com/services-account/download?path=/Developer_Tools/Xcode_10.3/Xcode_10.3.xip)（需要 macOS 10.14.3 或更高版本）
*   [10.2.1](https://developer.apple.com/services-account/download?path=/Developer_Tools/Xcode_10.2.1/Xcode_10.2.1.xip)（需要 macOS 10.14.3 或更高版本）
*   [10.1](https://developer.apple.com/services-account/download?path=/Developer_Tools/Xcode_10.1/Xcode_10.1.xip)（支持 macOS 10.13.6 High Sierra 的最新版本）
*   [10](https://developer.apple.com/services-account/download?path=/Developer_Tools/Xcode_10/Xcode_10.xip)（自 2019 年 3 月起，iTunes Connect 不再支持后续版本）

**Xcode 9**

*   [9.4.1](https://developer.apple.com/services-account/download?path=/Developer_Tools/Xcode_9.4.1/Xcode_9.4.1.xip)
*   [9.3.1](https://developer.apple.com/services-account/download?path=/Developer_Tools/Xcode_9.3.1/Xcode_9.3.1.xip)
*   [9.2](https://developer.apple.com/services-account/download?path=/Developer_Tools/Xcode_9.2/Xcode_9.2.xip)（支持 macOS 10.12.6 Sierra 的最新版本）
*   [9.1](https://developer.apple.com/services-account/download?path=/Developer_Tools/Xcode_9.1/Xcode_9.1.xip)
*   [9.0.1](https://developer.apple.com/services-account/download?path=/Developer_Tools/Xcode_9.0.1/Xcode_9.0.1.xip)

**Xcode 8**

*   [8.3.3](https://developer.apple.com/services-account/download?path=/Developer_Tools/Xcode_8.3.3/Xcode8.3.3.xip)
*   [8.2.1](https://developer.apple.com/services-account/download?path=/Developer_Tools/Xcode_8.2.1/Xcode_8.2.1.xip)（支持 OS X 10.11.5 El Capitan 的最新版本）
*   [8.1](https://developer.apple.com/services-account/download?path=/Developer_Tools/Xcode_8.1/Xcode_8.1.xip)
*   [8.0](https://developer.apple.com/services-account/download?path=/Developer_Tools/Xcode_8/Xcode_8.xip)

**Xcode 7**

*   [7.3.1](https://developer.apple.com/services-account/download?path=/Developer_Tools/Xcode_7.3.1/Xcode_7.3.1.dmg)
*   [7.2.1](https://developer.apple.com/services-account/download?path=/Developer_Tools/Xcode_7.2.1/Xcode_7.2.1.dmg)（支持 OS X 10.10 Yosemite 的最新版本）
*   [7.1.1](http://developer.apple.com/devcenter/download.action?path=/Developer_Tools/Xcode_7.1.1/Xcode_7.1.1.dmg)
*   [7.0.1](http://developer.apple.com/devcenter/download.action?path=/Developer_Tools/Xcode_7.0.1/Xcode_7.0.1.dmg)

**代码 6**

*   [6.4](http://developer.apple.com/devcenter/download.action?path=/Developer_Tools/Xcode_6.4/Xcode_6.4.dmg)
*   [6.3.2](http://developer.apple.com/devcenter/download.action?path=/Developer_Tools/Xcode_6.3.2/Xcode_6.3.2.dmg)
*   [6.2](http://developer.apple.com/devcenter/download.action?path=/Developer_Tools/Xcode_6.2/Xcode_6.2.dmg)（​​支持 OS X 10.9.5 Mavericks 的最新版本）
*   [6.1.1](https://developer.apple.com/devcenter/download.action?path=/Developer_Tools/xcode_6.1.1/xcode_6.1.1.dmg)
*   [6.0.1](https://developer.apple.com/devcenter/download.action?path=/Developer_Tools/xcode_6.0.1/xcode_6.0.1.dmg)

**甚至更早的版本**（iTunes Connect 不支持）

*   [5.1.1](https://developer.apple.com/devcenter/download.action?path=/Developer_Tools/xcode_5.1.1/xcode_5.1.1.dmg)（支持 OS X 10.8 Mountain Lion 的最新版本）
*   [5.0.2](https://developer.apple.com/devcenter/download.action?path=/Developer_Tools/xcode_5.0.2/xcode_5.0.2.dmg)
*   [4.6.3](https://developer.apple.com/devcenter/download.action?path=/Developer_Tools/xcode_4.6.3/xcode4630916281a.dmg)
*   [4.5.2](https://developer.apple.com/devcenter/download.action?path=/Developer_Tools/xcode_4.5.2/xcode4520418508a.dmg)
*   [4.4.1](https://developer.apple.com/devcenter/download.action?path=/Developer_Tools/xcode_4.4.1/xcode_4.4.1_6938145.dmg)
*   [4.3.2](https://developer.apple.com/devcenter/download.action?path=/Developer_Tools/xcode_4.3.2/xcode_432_lion.dmg)
*   [4.2](http://developer.apple.com/devcenter/download.action?path=/Developer_Tools/xcode_4.2_for_lion_21264/installxcode_42_lion.dmg)
*   [4.1](http://developer.apple.com/devcenter/download.action?path=/Developer_Tools/xcode_4.1_for_lion_21263/installxcode_41_lion.dmg)
*   [4.0.2](http://developer.apple.com/devcenter/download.action?path=/Developer_Tools/xcode_4.0.2_and_ios_sdk_4.3/xcode_4.0.2_and_ios_sdk_4.3.dmg)
*   [3.2.6](http://developer.apple.com/devcenter/download.action?path=/Developer_Tools/xcode_3.2.6_and_ios_sdk_4.3__final/xcode_3.2.6_and_ios_sdk_4.3.dmg)
*   [3.1.4](http://developer.apple.com/devcenter/download.action?path=/Developer_Tools/xcode_3.1.4_developer_tools/xcode314_2809_developerdvd.dmg)
*   [3.0](http://developer.apple.com/devcenter/download.action?path=/Developer_Tools/xcode_3.0/xcode_3.0.dmg)
*   [2.5](http://developer.apple.com/devcenter/download.action?path=/Developer_Tools/xcode_2.5_developer_tools/xcode25_8m2558_developerdvd.dmg)
*   [2.4.1](http://developer.apple.com/devcenter/download.action?path=/Developer_Tools/xcode_2.4.1/xcode_2.4.1_8m1910_6936315.dmg)
*   [2.3](http://developer.apple.com/devcenter/download.action?path=/Developer_Tools/xcode_2.3/xcode_2.3_8m1780_oz693620813.dmg)
*   [2.2.1](http://developer.apple.com/devcenter/download.action?path=/Developer_Tools/xcode_tools_2.2.1/xcode_2.2.1_8g1165_018213632.dmg)
*   [1.5](http://developer.apple.com/devcenter/download.action?path=/Developer_Tools/xcode_v1.5/xcode_tools_1.5_cd.dmg.bin)
*   [1.0](http://developer.apple.com/devcenter/download.action?path=/Mac_OS_X/Mac_OS_X_10.3_Build_7B85/7B85_Xcode_CD.dmg)

# java - 警告：Activity 没有启动，它的当前任务已经被放到了前面

> ID：10335752
> 
> 赞同：0
> 
> 时间：2012-04-26T14:41:38.097
> 
> 标签：java, android, eclipse

在阅读一本关于 Android 游戏开发的书时，我在 eclipse 中遇到了以下警告： `ActivityManager: Warning: Activity not started, its current task has been brought to the front`

基本上，我有 3 个项目；Mr.Snake、Mr.Snake.Framework 和 Mr.Snakey。

**在我的 Mr.Snake 文件中，我有：**

```
/Mr.Snake/src/com/zardapps/framework/Audio.java
/Mr.Snake/src/com/zardapps/framework/FileIO.java
/Mr.Snake/src/com/zardapps/framework/Game.java
/Mr.Snake/src/com/zardapps/framework/Graphics.java
/Mr.Snake/src/com/zardapps/framework/Input.java
/Mr.Snake/src/com/zardapps/framework/Music.java
/Mr.Snake/src/com/zardapps/framework/MySuperAwesomeGame.java
/Mr.Snake/src/com/zardapps/framework/Pixmap.java
/Mr.Snake/src/com/zardapps/framework/Screen.java
/Mr.Snake/src/com/zardapps/framework/Sound.java 
```

**在我的 Mr.Snake.Framework 中，我有：**

```
/Mr.Snake.Framework/src/com/zardtechnologies/androidgames/framework/impl/AndroidAudio.java
/Mr.Snake.Framework/src/com/zardtechnologies/androidgames/framework/impl/AndroidFileIO.java
/Mr.Snake.Framework/src/com/zardtechnologies/androidgames/framework/impl/AndroidGame.java
/Mr.Snake.Framework/src/com/zardtechnologies/androidgames/framework/impl/AndroidGraphics.java
/Mr.Snake.Framework/src/com/zardtechnologies/androidgames/framework/impl/AndroidInput.java
/Mr.Snake.Framework/src/com/zardtechnologies/androidgames/framework/impl/AndroidMusic.java
/Mr.Snake.Framework/src/com/zardtechnologies/androidgames/framework/impl/AndroidPixmap.java
/Mr.Snake.Framework/src/com/zardtechnologies/androidgames/framework/impl/AndroidSound.java
/Mr.Snake.Framework/src/com/zardtechnologies/androidgames/framework/impl/KeyboardHandler.java
/Mr.Snake.Framework/src/com/zardtechnologies/androidgames/framework/impl/MultiTouchHandler.java
/Mr.Snake.Framework/src/com/zardtechnologies/androidgames/framework/impl/Pool.java
/Mr.Snake.Framework/src/com/zardtechnologies/androidgames/framework/impl/SingleTouchHandler.java
/Mr.Snake.Framework/src/com/zardtechnologies/androidgames/framework/impl/TouchHandler.java
/Mr.Snake.Framework/src/com/zardtechnologies/androidgames/framework/impl/AndroidFastRenderV have :iew.java 
```

**在我的 Mr.Snakey 中，我有：**

```
/Mr.Snakey/src/com/zardtechnologies/mrsnakey/Assets.java
/Mr.Snakey/src/com/zardtechnologies/mrsnakey/GameScreen.java
/Mr.Snakey/src/com/zardtechnologies/mrsnakey/HighscoreScreen.java
/Mr.Snakey/src/com/zardtechnologies/mrsnakey/LoadingScreen.java
/Mr.Snakey/src/com/zardtechnologies/mrsnakey/MainMenuScreen.java
/Mr.Snakey/src/com/zardtechnologies/mrsnakey/MrSnakey.java
/Mr.Snakey/src/com/zardtechnologies/mrsnakey/Settings.java
/Mr.Snakey/src/com/zardtechnologies/mrsnakey/Snake.java
/Mr.Snakey/src/com/zardtechnologies/mrsnakey/SnakePart.java
/Mr.Snakey/src/com/zardtechnologies/mrsnakey/Stain.java 
```

**这是组成我的 MrSnakey 游戏的三个项目。目前，我从控制台得到的错误**

```
[2012-04-26 21:56:59 - Mr.Snakey] Android Launch!
[2012-04-26 21:56:59 - Mr.Snakey] adb is running normally.
[2012-04-26 21:56:59 - Mr.Snakey] Performing com.zardtechnologies.mrsnakey.MrSnakey activity launch
[2012-04-26 21:56:59 - Mr.Snakey] Automatic Target Mode: using existing emulator 'emulator-5554' running compatible AVD 'Test.Phone'
[2012-04-26 21:57:02 - Mr.Snakey] Application already deployed. No need to reinstall.
[2012-04-26 21:57:02 - Mr.Snake.Framework] Could not find Mr.Snake.Framework.apk!
[2012-04-26 21:57:02 - Mr.Snake] Could not find Mr.Snake.apk!
[2012-04-26 21:57:02 - Mr.Snakey] Starting activity com.zardtechnologies.mrsnakey.MrSnakey on device emulator-5554
[2012-04-26 21:57:04 - Mr.Snakey] ActivityManager: Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=com.zardtechnologies.mrsnakey/.MrSnakey }
[2012-04-26 21:57:04 - Mr.Snakey] ActivityManager: Warning: Activity not started, its current task has been brought to the front
[2012-04-26 21:58:20 - Mr.Snakey] ------------------------------
[2012-04-26 21:58:20 - Mr.Snakey] Android Launch!
[2012-04-26 21:58:20 - Mr.Snakey] adb is running normally.
[2012-04-26 21:58:20 - Mr.Snakey] Performing com.zardtechnologies.mrsnakey.MrSnakey activity launch
[2012-04-26 21:58:20 - Mr.Snakey] Automatic Target Mode: using existing emulator 'emulator-5554' running compatible AVD 'Test.Phone'
[2012-04-26 21:58:22 - Mr.Snakey] Application already deployed. No need to reinstall.
[2012-04-26 21:58:22 - Mr.Snakey] Project dependency found, installing: Mr.Snake.Framework
[2012-04-26 21:58:22 - Mr.Snake.Framework] Uploading Mr.Snake.Framework.apk onto device 'emulator-5554'
[2012-04-26 21:58:25 - Mr.Snake.Framework] Installing Mr.Snake.Framework.apk...
[2012-04-26 21:58:52 - Mr.Snake.Framework] Success!
[2012-04-26 21:58:52 - Mr.Snake.Framework] Project dependency found, installing: Mr.Snake
[2012-04-26 21:58:52 - Mr.Snake] Uploading Mr.Snake.apk onto device 'emulator-5554'
[2012-04-26 21:58:54 - Mr.Snake] Installing Mr.Snake.apk...
[2012-04-26 21:59:16 - Mr.Snake] Success!
[2012-04-26 21:59:16 - Mr.Snakey] Project dependency found, installing: Mr.Snake
[2012-04-26 21:59:18 - Mr.Snake] Application already deployed. No need to reinstall.
[2012-04-26 21:59:18 - Mr.Snakey] Starting activity com.zardtechnologies.mrsnakey.MrSnakey on device emulator-5554
[2012-04-26 21:59:20 - Mr.Snakey] ActivityManager: Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=com.zardtechnologies.mrsnakey/.MrSnakey }
[2012-04-26 21:59:20 - Mr.Snakey] ActivityManager: Warning: Activity not started, its current task has been brought to the front 
```

**我的 Mr.Snakey 活动文件在这里：**

```
package com.zardtechnologies.mrsnakey;

import com.zardapps.framework.Screen;
import com.zardtechnologies.androidgames.framework.impl.AndroidGame;

public class MrSnakey extends AndroidGame {

    public Screen getStartScreen() {
        return new LoadingScreen(this);
    }

} 
```

**它链接来自 AndroidGame 的文件，该文件位于 framework impl 项目中：**

```
package com.zardtechnologies.androidgames.framework.impl;

import android.app.Activity;
import android.content.Context;
import android.content.res.Configuration;
import android.graphics.Bitmap;
import android.graphics.Bitmap.Config;
import android.os.Bundle;
import android.os.PowerManager;
import android.os.PowerManager.WakeLock;
import android.view.Window;
import android.view.WindowManager;

import com.zardapps.framework.Audio;
import com.zardapps.framework.FileIO;
import com.zardapps.framework.Game;
import com.zardapps.framework.Graphics;
import com.zardapps.framework.Input;
import com.zardapps.framework.Screen;

public abstract class AndroidGame extends Activity implements Game {
    AndroidFastRenderView renderView;
    Graphics graphics;
    Audio audio;
    Input input;
    FileIO fileIO;
    Screen screen;
    WakeLock wakeLock;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);
        boolean isLandscape = getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE;
        int frameBufferWidth = isLandscape ? 480 : 320;
        int frameBufferHeight = isLandscape ? 320 : 480;
        Bitmap frameBuffer = Bitmap.createBitmap(frameBufferWidth,
                frameBufferHeight, Config.RGB_565);

        float scaleX = (float) frameBufferWidth
                / getWindowManager().getDefaultDisplay().getWidth();
        float scaleY = (float) frameBufferHeight
                / getWindowManager().getDefaultDisplay().getHeight();

        renderView = new AndroidFastRenderView(this, frameBuffer);
        graphics = new AndroidGraphics(getAssets(), frameBuffer);
        fileIO = new AndroidFileIO(getAssets());
        audio = new AndroidAudio(this);
        input = new AndroidInput(this, renderView, scaleX, scaleY);
        screen = getStartScreen();
        setContentView(renderView);

        PowerManager powerManager = (PowerManager) getSystemService(Context.POWER_SERVICE);
        wakeLock = powerManager.newWakeLock(PowerManager.FULL_WAKE_LOCK,
                "GLGAME");

    }

    public void onResume() {
        super.onResume();
        wakeLock.acquire();
        screen.resume();
        renderView.resume();
    }

    public void onPause() {
        super.onPause();
        wakeLock.release();
        renderView.pause();
        screen.pause();

        if (isFinishing())
            screen.dispose();
    }

    public Input getInput() {
        return input;
    }

    public FileIO getFileIO() {
        return fileIO;
    }

    public Graphics getGraphics() {
        return graphics;
    }

    public Audio getAudio() {
        return audio;
    }

    public void setScreen(Screen screen) {
        if (screen == null)
            throw new IllegalArgumentException("Screen must not be null");
        this.screen.pause();
        this.screen.dispose();
        screen.resume();
        screen.update(0);
        this.screen = screen;
    }

    public Screen getCurrentScreen() {
        return screen;
    }
} 
```

**其中游戏来自框架项目**

```
package com.zardapps.framework;
public interface Game {
    public Input getInput();
    public FileIO getFileIO();
    public Graphics getGraphics();
    public Audio getAudio();
    public void setScreen(Screen screen);
    public Screen getCurrentScreen();
    public Screen getStartScreen();
} 
```

**我的蛇先生清单：**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.zardtechnologies.mrsnakey"
    android:versionCode="1"
    android:versionName="1.0" >

    <application
        android:debuggable="true"
        android:icon="@drawable/ic_launcher"
        android:label="Mr.Snakey" >
        <activity
            android:name=".MrSnakey"
            android:configChanges="keyboard|keyboardHidden|orientation"
            android:label="Mr.Snakey"
            android:screenOrientation="portrait" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

    <uses-permission android:name="android.permission.WAKE_LOCK" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

    <uses-sdk
        android:minSdkVersion="3"
        android:targetSdkVersion="12" />

</manifest> 
```

基本上，我找不到错误的根源；**ActivityManager：警告：Activity 没有启动，它的当前任务已经被带到了前面**我目前在 Eclipse 中使用模拟器。我试图重建我的项目，重新安装并清理它，但对我没有任何作用。我很感激你们花时间阅读我写的这么长的帖子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T14:44:09.150

发生这种情况是因为新的 APK 文件中没有任何更改，因此请在再次运行之前尝试清理代码或重新编译它，这将消失。

如果您尝试第二次运行此游戏，Android 操作系统将检查 APK 文件是否与当前文件相比有更改。并且由于游戏已经启动，操作系统不会重新打开应用程序。他将继续已经打开的一个。

最快的解决方案是按下 e-clipse 上的项目名称，然后选择清理或重建您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:49:15.677

这不是错误，甚至不是表明您做错了什么的编译器警告。我知道它说“警告”，但它更像是一个仅供参考。正如“仅供参考，您正在运行相同的代码而无需更改，并且该应用程序已经在运行，因此 Android 只会向您显示正在运行的应用程序，而不是安装相同的东西并重新启动它。”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-19T06:29:07.427

当我复制同一个项目时，我得到了同样的错误。最初我运行重复项目，它成功执行并显示在模拟器上，后来当我尝试运行原始项目时，我得到了这个错误“警告：活动未启动，其当前任务已被带到前面”所以我卸载了通过“管理应用程序”从模拟器复制应用程序，然后我运行了它成功运行的原始项目。希望它可以帮助你

# c# - 有什么方法可以直观地划分组合框中的项目吗？

> ID：10335753
> 
> 赞同：4
> 
> 时间：2012-04-26T14:41:40.750
> 
> 标签：c#, winforms

我在考虑组之间的某种界限之类的。有什么方法可以将项目分成组吗？给它们上色是一种选择，但它看起来会很糟糕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:49:35.753

您可以在组合框中插入分隔项。您可以使用显示空字符串、短划线等的项目。不幸的是，这在使用 WinForms 时通常并不容易。如果您使用的是 WPF，则可以更优雅地执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T18:13:14.687

所有者自己绘制很简单。派生组合，设置`DrawMode = OwnerDrawFixed`和渲染项目：

```
protected override void OnDrawItem(DrawItemEventArgs e)
{
    e.DrawBackground();
    if( e.State == DrawItemState.Focus )
        e.DrawFocusRectangle();
    var item = this.Items[e.Index];
    using(var brush = new SolidBrush(e.ForeColor))
    {
        e.Graphics.DrawString(item.ToString(), e.Font, brush, e.Bounds);
    }
    e.Graphics.DrawLine(SystemPens.ControlText, e.Bounds.X, e.Bounds.Y, e.Bounds.Right, e.Bounds.Y);

    base.OnDrawItem(e);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T14:44:57.800

我认为您可以覆盖元素的可视化，但这是一个复杂的解决方案。或者您可以手动插入线条（空心项目），然后您处理选择，如果它们被选中则恢复。

我认为没有任何默认解决方案。

# vb.net - Splitcontainer flowlayoutpanel 或 autosized 面板 (VB.NET)

> ID：10335755
> 
> 赞同：5
> 
> 时间：2012-04-26T14:41:48.657
> 
> 标签：vb.net, autosize, flowlayoutpanel, splitcontainer

我正在与一个团队合作的应用程序中的表单有一个 datagridview 作为主要组件（它应该占据大部分大小），但还有其他组件。有一个水平拆分容器来拆分它们，但我想知道如何使顶部面板调整其内容的大小。不幸的是，拆分容器中的面板没有`AutoSize`属性......

这里有两张图片来展示我们需要什么：（ [来源：][[mediafire.com](http://www.mediafire.com/conv/8d141b69c63b0d3ac8aebf9129bb77e25ee4a75086cfa6595c4510041fda1fa66g.jpg)][）][![图像1](../Images/f76c35bdd108382e47250b5a8efa8303.png)](https://i.stack.imgur.com/DaXym.png)

[![图2](../Images/82f7cfa08adbf2f96681a4ab9dbb63fe.png)](https://i.stack.imgur.com/vz7E2.png)
[（来源：[mediafire.com](http://www.mediafire.com/conv/56d959d2a9f99b71af16f7ab3eb5833874e8583f7b15bd1df16aafaa7313a7066g.jpg)）]

如您所见，splitcontainer 的顶部面板应调整为其内容的大小。有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T15:04:01.330

我假设您的意思是基于您的图像的“水平”拆分容器。

`ControlAdded`您可以尝试使用顶部面板的事件手动实现此目的：

```
Public Class Form1

  Public Sub New()
    InitializeComponent()
  End Sub

  Private Sub Form1_Shown(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Shown
    SplitContainer1.SplitterDistance = SmallPanel.Height
  End Sub

  Private Sub SplitContainer1_Panel1_ControlAdded(ByVal sender As Object, ByVal e As ControlEventArgs) Handles SplitContainer1.Panel1.ControlAdded
    SplitContainer1.SplitterDistance += e.Control.Height
  End Sub

  Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Dim addPanel As New Panel
    addPanel.BorderStyle = BorderStyle.FixedSingle
    addPanel.Size = New Size(SplitContainer1.Panel1.ClientSize.Width, 100)
    addPanel.Location = New Point(0, SplitContainer1.SplitterDistance)
    addPanel.Anchor = AnchorStyles.Left Or AnchorStyles.Top Or AnchorStyles.Right
    SplitContainer1.Panel1.Controls.Add(addPanel)
  End Sub

End Class 
```

SmallPanel 是我放置在 SplitContainer 的 Panel1 中的一个面板，并在其中添加了一个按钮以添加更多面板。

# java - 在 Vector 中保存的 Objects 中搜索字符串

> ID：10335756
> 
> 赞同：0
> 
> 时间：2012-04-26T14:41:49.640
> 
> 标签：java, vector

我在了解 Java 编程时遇到了一些问题。

基本上，我有一个名为 Workers 的类，它的实例变量之一是 nameOfWorker。然后，我将类 Workers 的所有实例存储在 Vector v 中。

现在我遇到的问题是，我不知道如何在我的 Vector v 中所有的 Workers 实例中检查特定工人的姓名（假设是 John）。

我该怎么做呢？

此外，当我在向量中保存的一个 Worker 对象中找到与 John 的匹配项后，如何访问存储在向量中该位置的实例方法？

希望我能够清楚地说明我的问题。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T14:47:07.237

您必须为此使用迭代器，或者您也可以使用基于索引的访问。

```
for (Worker w : vector) {
    System.out.println("Worker Name: " + w.getNameOfWorker())
} 
```

确保添加`getNameOfWorker`getter 方法，以防它在类中丢失。

# mysql - MySQL 子查询错误：SQLSTATE [42S21]：列已存在：1060 列名“id”重复

> ID：10335758
> 
> 赞同：1
> 
> 时间：2012-04-26T14:42:07.283
> 
> 标签：mysql

我正在努力使以下 MySQL 语句正常工作。

```
SELECT ItemGroup.users_id,ItemGroup.comments_id,ItemGroup.uploads_id,ItemGroup.posts_id, 
                Comment.id,Comment.uploads_id,
                CommentUpload.id,
                Upload.id,
                Post.id
                FROM items AS ItemGroup
                LEFT JOIN (
                    SELECT Comment.id, Comment.uploads_id, CommentUpload.id, CommentUpload.uuid
                    FROM comments As Comment
                    INNER JOIN (
                        SELECT CommentUpload.id, CommentUpload.uuid
                        FROM uploads AS CommentUpload
                        ) CommentUpload ON CommentUpload.id = Comment.uploads_id
                    GROUP BY Comment.uploads_id
                ) Comment ON Comment.id = ItemGroup.comments_id
                LEFT JOIN (
                    SELECT Upload.id
                    FROM uploads AS Upload
                    ) Upload ON Upload.id = ItemGroup.uploads_id
                LEFT JOIN (
                    SELECT Post.id
                    FROM posts AS Post
                    ) Post ON Post.id = ItemGroup.posts_id
                WHERE ItemGroup.users_id = {$__cakeID__$}
                AND (
                Comment.id IS NOT NULL 
                OR Upload.id IS NOT NULL 
                OR Post.id IS NOT NULL
                )
                LIMIT 0 , 300 
```

我正在尝试查找与评论相关的上传，但它正在抛出 SQLSTATE[42S21]: Column already exists: 1060 Duplicate column name 'id'。

我确定这是一件小事，但我只是找不到我做错了什么，我真的很感激一些帮助。

感谢您的时间！

亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:47:42.960

你不能用相同的别名`FROM comments As Comment`和命名两个表，例如`GROUP BY Comment.uploads_id) Comment`使用`Comment_A`和。`Comment_B`

# ios - 处理远程通知

> ID：10335762
> 
> 赞同：3
> 
> 时间：2012-04-26T14:42:20.030
> 
> 标签：ios, apple-push-notifications

我正在阅读如何在开发者苹果指南上处理远程通知。我的问题是两个：这句话的解释是什么

> 当应用程序未在前台运行时发送通知

没有在前台运行覆盖后台并且没有运行或处于后台状态。根据解释，以下句子：

> 在运行 iOS 的设备上点击应用程序图标，应用程序调用相同的方法，但未提供有关通知的信息。

有不同的意义。

第二个问题涉及我连续收到两个远程通知的情况：当我在方法中打开应用程序时

> 应用程序：didFinishLaunchingWithOptions：或应用程序：didReceiveRemoteNotification：

我有所有通知的信息还是只有最后一个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T15:09:32.657

*   如果您的应用程序正在运行，无论是在后台挂起状态还是前台，在收到通知时将调用的方法将始终是`application:didReceiveRemoteNotification:`.
*   如果您的应用程序根本没有运行，则在收到通知后启动时，它将触发`application:didFinishLaunchingWithOptions:`并且选项将是一个`non-nil`包含有关您的远程通知信息的对象。
*   据我所知，只有最后的通知信息可用。

# clojure - 在 Clojure 中将单参数函数组合成多参数函数

> ID：10335766
> 
> 赞同：2
> 
> 时间：2012-04-26T14:42:31.717
> 
> 标签：clojure, function-composition

我想知道 Clojure 中是否有将多个单参数函数组合成一个接受向量的新函数的习语。新函数应该将第一个函数应用于第一个参数，依此类推。

我认为这在许多情况下都很有用。例如，您可能希望使用更简单的一维函数来变换点的 x、y 和 z 坐标。

我将自己实现如下，但恐怕它应该已经存在于标准 API 中。

```
(defn vector-comp [& fns]
  (fn [avect]
    (vec (map #(%1 %2) fns avect)))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:24:43.707

其他写法：

```
(defn vector-comp [& fns]
    #(map apply fns % (repeat nil))) 
```

我 99% 确定标准库中没有现成的解决方案（`juxt`我知道的最接近的解决方案）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T17:59:12.327

[https://github.com/flatland/useful/blob/develop/src/useful/fn.clj#L90](https://github.com/flatland/useful/blob/develop/src/useful/fn.clj#L90)

# c# - 计算 2 个日期时间之间的差异（时间跨度 + 双倍）

> ID：10335767
> 
> 赞同：3
> 
> 时间：2012-04-26T14:42:33.510
> 
> 标签：c#, .net

我有一个包含日期时间的列表。

要计算 2 DateTime 之间的差异，我使用`TimeSpan`.

```
public static List<DateTime> list = new List<DateTime>();
TimeSpan ts = new TimeSpan();
double result = 0;

ts = DateTime.Now - list[list.Count-1];
result = ts.TotalSeconds; 
```

在调试此代码时，`DateTime.Now`DateTime.Now`list[list.Count-1]`的 DateTime.Now 值当然高于列表的值。

但是由于某种原因，我在变量结果中不断得到 0，到底是怎么回事？

最好的问候，皮特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T14:52:07.527

我刚刚尝试了以下方法，效果很好。

```
 List<DateTime> list = new List<DateTime>();
            list.Add(DateTime.Now.AddDays(-1));
            list.Add(DateTime.Now);
            list.Add(DateTime.Now.AddDays(1));
            TimeSpan ts = new TimeSpan();
            double result = 0;

            ts = DateTime.Now - list[list.Count - 1];
            result = ts.TotalSeconds; 
```

附上调试图：

![在此处输入图像描述](../Images/dda85d04ec631a3c987f4313be0c9c24.png)

**不工作的原因可能是：**

1.  您的列表没有被填充
2.  或者 的值`ts.TotalSeconds`小于两倍范围（这实际上是不可能的。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T14:45:41.697

第一条评论，您不需要`= new TimeSpan();`- 当您`ts`再次向下设置时，您只会丢弃它。

当您看到 0 的值时，您的调试器在哪一行`result`？你有没有**越过**设定的界限`result`？如果您在线，则该线尚未实际运行...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T14:46:56.443

而不是使用 ts = DateTime.Now - list[list.Count-1]; 使用 ts=DateTime.Now.Subtract(list[list.Count-1]

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T14:47:33.523

我认为时差很小，只有几秒钟，可能是毫秒甚至更小。试试这样的滴答声。

结果 = ts.Ticks;

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-26T14:49:46.057

您发布的代码没有任何问题（除了我建议您加入变量的声明和初始化）。我不得不猜测，但也许您正在“吞下”异常并传递空列表？

然后线

```
ts = DateTime.Now - list[list.Count-1]; 
```

将抛出异常并`result`保留它的值`0`。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-26T15:00:23.237

list 没有任何元素，因此 list.Count - 1 不会击中任何东西。此外，可能没有一整秒的时间来计算。我添加了一个时间（使用刻度）来减去。除此之外，你所拥有的没有任何问题。

```
double result = 0;
List<DateTime> list = new List<DateTime>();
list.Add(new DateTime(123456));

TimeSpan ts = DateTime.Now - list[list.Count - 1];
result = ts.TotalSeconds; 
```

# android - 使用 AnimationSet 在 Activity 之间转换动画

> ID：10335778
> 
> 赞同：4
> 
> 时间：2012-04-26T14:43:15.710
> 
> 标签：android, android-animation, android-activity, uiviewanimationtransition

overridePendingTransition(int, int) 方法提供了一种使用动画 XML 资源在活动之间制作动画的方法。

但是如果我们需要分配一个 AnimationSet（一堆动画，甚至可能包括一个 java 动画）作为它的参数呢？

换句话说，我们如何将 AnimationSets 应用于活动之间的转换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T14:48:47.550

我已经设法通过在我的应用程序中使用主题来实现这一点。

特别是通过在主题中更改此样式：

```
<item name="android:windowAnimationStyle">@android:style/Animation.Activity</item> 
```

和覆盖样式Animation.Activity：

```
<style name="Animation.Activity">
        <item name="activityOpenEnterAnimation">@anim/activity_open_enter</item>
        <item name="activityOpenExitAnimation">@anim/activity_open_exit</item>
        <item name="activityCloseEnterAnimation">@anim/activity_close_enter</item>
        <item name="activityCloseExitAnimation">@anim/activity_close_exit</item>
        <item name="taskOpenEnterAnimation">@anim/task_open_enter</item>
        <item name="taskOpenExitAnimation">@anim/task_open_exit</item>
        <item name="taskCloseEnterAnimation">@anim/task_close_enter</item>
        <item name="taskCloseExitAnimation">@anim/task_close_exit</item>
        <item name="taskToFrontEnterAnimation">@anim/task_open_enter</item>
        <item name="taskToFrontExitAnimation">@anim/task_open_exit</item>
        <item name="taskToBackEnterAnimation">@anim/task_close_enter</item>
        <item name="taskToBackExitAnimation">@anim/task_close_exit</item>
        <item name="wallpaperOpenEnterAnimation">@anim/wallpaper_open_enter</item>
        <item name="wallpaperOpenExitAnimation">@anim/wallpaper_open_exit</item>
        <item name="wallpaperCloseEnterAnimation">@anim/wallpaper_close_enter</item>
        <item name="wallpaperCloseExitAnimation">@anim/wallpaper_close_exit</item>
        <item name="wallpaperIntraOpenEnterAnimation">@anim/wallpaper_intra_open_enter</item>
        <item name="wallpaperIntraOpenExitAnimation">@anim/wallpaper_intra_open_exit</item>
        <item name="wallpaperIntraCloseEnterAnimation">@anim/wallpaper_intra_close_enter</item>
        <item name="wallpaperIntraCloseExitAnimation">@anim/wallpaper_intra_close_exit</item>
    </style> 
```

您可以在 XML 中定义动画集并以这种样式引用它们。

# c++ - 如何从 QWebView 中获取图片

> ID：10335780
> 
> 赞同：6
> 
> 时间：2012-04-26T14:43:35.553
> 
> 标签：c++, image, qt, qwebview

有人知道如何从 qwebview 获取图片吗？我的情况是，没有使用图像 url 和 QNetworkRequest 的范围。我只需要从 QWebview 中“提取”图像。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-27T09:01:23.803

首先，您需要获取`QWebElement`要保存的图像 - 如果您还没有，获取它的好方法是

```
QWebElement el = view.page()->mainFrame()->findFirstElement("IMG[src='path/to/img'"); 
```

假设`view`是您的`QWebView`. 然后，

```
QImage image(el.geometry().width(), el.geometry().height(), QImage::Format_ARGB32);
QPainter painter(&image);
el.render(&painter);
painter.end();
image.save("path/to/img.png"); 
```

# cuda - 费米架构可能解决我的比较研究？

> ID：10335782
> 
> 赞同：2
> 
> 时间：2012-04-26T14:43:47.973
> 
> 标签：cuda, floating-point, nvidia, ieee-754, tesla

我正在进行一项比较研究，其中我必须对算法的串行和并行版本进行比较（NSGA-II 算法是精确的[下载链接](http://www.iitk.ac.in/kangal/codes/nsga2/nsga2-gnuplot-v1.1.6.tar.gz)）。NSGA-II 是一种启发式优化方法，因此取决于生成的初始随机种群。如果使用 CPU 和 GPU 生成的初始种群不同，那么我无法进行公正的加速研究。

我拥有一块计算能力为 1.3 的 NVIDIA-TESLA-C1060 卡。根据[这个答案](https://stackoverflow.com/a/10335070/842808)和[这个 NVIDIA 文档](http://developer.download.nvidia.com/assets/cuda/files/NVIDIA-CUDA-Floating-Point.pdf)，我们不能指望 sm_13 设备总是产生符合 IEEE-754 的浮点（单精度）值。换句话说，这意味着在我当前的设备上，我无法对其串行对应的 CUDA 程序进行公正的加速研究。

我的问题是：改用 Fermi 架构能解决问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T16:38:57.753

浮点运算在不同的架构上会产生不同的结果，无论它们是否支持 IEEE754，因为浮点不是关联的。即使在 x86 上切换编译器通常也会给出不同的结果。本[白皮书](http://developer.nvidia.com/content/precision-performance-floating-point-and-ieee-754-compliance-nvidia-gpus)给出了一些很好的解释。

话虽如此，您真正的问题是您有一个数据相关算法，其中操作取决于您生成的随机数。因此，如果您在 CPU 和 GPU 上生成相同的数字，那么两次运行都将遵循相同的路径。考虑使用[cuRAND](http://developer.nvidia.com/curand)，它可以在 CPU 和 GPU 上生成相同的数字。

# java - java中的重启定时器

> ID：10335784
> 
> 赞同：23
> 
> 时间：2012-04-26T14:43:54.273
> 
> 标签：java

我想做一个计时器，当有事情发生时它会重新启动：

```
public static Timer timer;

public myTimer(long MAC, String ipAddress){
    timer = new Timer();
    timer.schedule(timerTask, 120000); 
}

public void update(){
    timer.cancel();
    timer = new Timer();
    timer.schedule(timerTask, 120000); 
} 
```

创建新计划时遇到问题，出现以下错误：

```
java.lang.IllegalStateException: Task already scheduled or cancelled
    at java.util.Timer.sched(Timer.java:358)
    at java.util.Timer.schedule(Timer.java:170)
    at spb.keepAliveTimer.update(keepAliveTimer.java:37)
    at spb.keepAlive.update(keepAlive.java:58)
    at spb.receptor.keepAlive(receptor.java:475)
    at spb.receptor.run(receptor.java:118)
    at java.lang.Thread.run(Thread.java:662) 
```

我不知道我该怎么做！谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-26T14:56:33.050

这对我来说很好......你能粘贴完整的代码和错误吗？

```
package snippet;

import java.util.Timer;
import java.util.TimerTask;

public class Main {
    public static Timer timer;

    public static void main(String[] args) {
        Main main = new Main();
        main.myTimer(123, "127.0.0.1");

    }

    public void myTimer(final long MAC, final String ipAddress) {
        TimerTask timerTask = new TimerTask() {

            @Override
            public void run() {
                System.out.println("MAC: " + MAC + "ipAddress:" + ipAddress);
                update();
            }
        };
        timer = new Timer();
        timer.schedule(timerTask, 1000);

    }

    public void update() {
        TimerTask timerTask = new TimerTask() {

            @Override
            public void run() {
                System.out.println("Updated timer");

            }
        };
        timer.cancel();
        timer = new Timer();
        timer.schedule(timerTask, 2000);
    }
} 
```

这输出：

```
MAC：123ip地址：127.0.0.1
 更新计时器

```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-04-29T17:17:38.193

每次重新启动 Timer 时，都必须创建一个新的 TimerTask 对象。所以，在开始时创建一个新的。并使用“Timer.cancel”和“Timer.purge”销毁计时器。

例如，我有两个按钮 - 开始和停止

```
mStartButton.setOnClickListener(new View.OnClickListener() {
public void onClick(View v) {
mTimerTask = new TimerTask();//This creates new TimerTask 
timer = new Timer(); //Instantiate again, as we Cancel the Timer
timer.schedule(mTimerTask, 0, 30);
}
});

mEndButton.setOnClickListener(new View.OnClickListener(){
public void onClick(View v){
timer.cancel();
timer.purge();
}
}); 
```

# dependency-injection - C# 中的 autofac“Hello World”应用程序 - 初始化

> ID：10335789
> 
> 赞同：2
> 
> 时间：2012-04-26T14:44:13.680
> 
> 标签：dependency-injection, inversion-of-control, autofac

我正在寻找有关 DI 的简单“Hello World”示例的帮助。我不明白的是如何在 DI 框架（autofac）中初始化“Foo”和“Bar”类。

```
namespace AutofacTesting
{
    //these classes are intended to be used with autofac / DI
    public interface IFooBar
    {
        void Draw();
    }

    public class Bar : IFooBar
    {           
        public void Draw()
        {
            MessageBox.Show("Drawing something in Bar");
        }
    }

    public class Foo : IFooBar
    {
        public void Draw()
        {
            MessageBox.Show("Drawing somthing in Foo");
        }
    }

    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            var builder = new ContainerBuilder();

            builder.RegisterType<Bar>().As<IFooBar>();
            builder.RegisterType<Foo>().As<IFooBar>();

            var container = builder.Build();

            var taskController = container.Resolve<IFooBar>();

            taskController.Draw();

            int a = 1;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T16:44:43.893

我认为你的意思是你想将一个`Bar`或`Foo`类解析为具体的实现，而不是实例化它。如果是这样，你可以写：

```
var builder = new ContainerBuilder();

builder.RegisterType<Bar>().Named<IFooBar>("Bar");
builder.RegisterType<Foo>().Named<IFooBar>("Foo");

var container = builder.Build();

var taskController = container.ResolveNamed<IFooBar>("Bar");

taskController.Draw(); 
```

我也意识到这是一个 hello world 应用程序，但要小心不要陷入[使用服务定位器的反模式](http://blog.ploeh.dk/2010/02/03/ServiceLocatorIsAnAntiPattern.aspx)（即到处使用 contains.Resolve）。相反，考虑允许您在同一个地方进行所有注册和解析的设计，命名为[组合根](http://blog.ploeh.dk/2011/07/28/CompositionRoot.aspx)。

我提到这一点是因为具有这种程度的歧义（即为给定接口注册了多个创建类型）可能会导致人们开始使用服务定位器模式。相反，在更复杂的应用程序中，请考虑重构您的 API 以减少解析注册类型时的歧义。

# jquery - jquery不是带有嵌套元素的选择器

> ID：10335790
> 
> 赞同：1
> 
> 时间：2012-04-26T14:44:13.993
> 
> 标签：jquery

如果我有一些元素，例如：

```
<div class="one">
    <div class="two">
    </div>
</div> 
```

当用户单击一个但不是两个时，我想做一些事情：

```
$('.one:not(.two)').live('click', function(){
            console.log('jazz');     
        }); 
```

但它仍然会记录控制台日志......因为元素是嵌套的！我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T14:47:20.480

我更愿意将一个单独的点击事件绑定到`two`，告诉浏览器停止事件冒泡，恕我直言，这样更具可读性：

```
$('.one').click(function() {
   console.log('jazz');
})
.find('.two').click(function(e) {
   e.stopPropagation();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T14:45:30.497

您正在寻找

```
$('.one:not(:has(.two))') 
```

或者，您可以处理事件 on `.one`，然后处理它`.two`并调用`e.stopPropagation()`以防止它冒泡到`.one`.

# ruby-on-rails-3 - 脚手架和迁移后的路由错误

> ID：10335792
> 
> 赞同：0
> 
> 时间：2012-04-26T14:44:17.660
> 
> 标签：ruby-on-rails-3, routing, scaffolding

我创建了一个没有问题的脚手架

> $ rails 生成脚手架新名称：字符串标题：字符串内容：文本

运行迁移的 Rake 命令（与以前一样没有问题，表已正确创建）

> $ 耙分贝：迁移

编辑 app/views/home/index.html.erb

> <%= link_to '我的新闻', :controller => '新闻' %>

我在“http://localhost:3000”中正确看到了主页和链接；单击链接“我的新闻”页面“http://localhost:3000/news”加载没有错误。

现在，点击 Rails 生成的链接“New New”，链接的目标 localhost:3000/news/new (source "<a href="/news/new">New New</a>")，我读到了这个错误：

> 路由错误
> 
> 没有路由匹配 {:action=>"show", :controller=>"news", :format=>nil}
> 
> 尝试运行 rake 路线以获取有关可用路线的更多信息。

在“app/views/news/index.html.erb”中，链接源是

> <%= link_to 'New New', new_news_path %>

在 routes.rb 我读到

> MyApp::Application.routes.draw 做
> 
> 资源：新闻
> 
> 获取“主页/索引”

*   导轨 3.2.3
*   红宝石 1.9.3p125
*   MySQL 5.5
*   视窗 7 64 位

耙子路线：

> news_index GET /news(.:format) 新闻#index
> 
> POST /news(.:format) 新闻#create
> 
> new_news GET /news/new(.:format) 新闻#new
> 
> edit_news GET /news/:id/edit(.:format) 新闻#edit
> 
> 新闻 GET /news/:id(.:format) 新闻#show
> 
> PUT /news/:id(.:format) news#update
> 
> 删除 /news/:id(.:format) 新闻#destroy
> 
> home_index GET /home/index(.:format) home#index
> 
> 根/主页#index

提前感谢，对不起我的英语

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:08:57.037

你必须使用`news_index_path`，因为如果rails不能使单数成为单数，则新闻不是单数-它们将`_index`在末尾添加：)

你有一个`news`和很多`news`，这很令人困惑。

总是尝试使用`<name_of_resource>_path`来生成 url :)

```
news_index GET /news(.:format) news#index 
```

这表示它是隐含的，您使用 1 部分`news_index`并添加`_path`以获取它的路径。

你应该有

```
<%= link_to 'My News', news_index_path %> 
```

希望有帮助，加油！

# html - 从嵌入的 youtube 视频中删除相关视频

> ID：10335801
> 
> 赞同：2
> 
> 时间：2012-04-26T14:44:31.940
> 
> 标签：html, video, youtube, embed

还有一种简单的方法可以做到这一点吗？此代码段曾经可以工作，但现在似乎已损坏。

```
 <iframe title="YouTube video player" width="640" height="510" src="http://www.youtube.com/embed/5yle1USyhCY&rel=0" frameborder="0" allowfullscreen></iframe> 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T14:54:23.183

啊，愚蠢的我。应该是问号而不是＆符号。

该网址必须是：

```
http://www.youtube.com/embed/5yle1USyhCY?rel=0 
```

代替：

```
http://www.youtube.com/embed/5yle1USyhCY&rel=0 
```

# ios - SIGABRT - 应用程序试图查找已删除的项目

> ID：10335803
> 
> 赞同：1
> 
> 时间：2012-04-26T14:44:38.907
> 
> 标签：ios, sigabrt

我删除了一个名为 BLANK 的文本字段，因为它不是必需的。但是现在我在下面的行中得到了一个 SIGABRT：

```
return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
}
} 
```

这个消息：-

```
2012-04-26 15:37:24.208 SOA[2822:f803] *** Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<Engine_Editor 0x6b528c0> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key BLANK.'
*** First throw call stack:
(0x13d9022 0x156acd6 0x13d8ee1 0x9d1022 0x942f6b 0x942edb 0x95dd50 0x24571a 0x13dadea 0x13447f1 0x24426e 0xea1fc 0xea779 0xea99b 0xf39bc 0xee818 0x30a565 0xf1857 0xf19bc 0xf19fc 0x459f4a 0x44e4d0 0x13dae99 0x2614e 0x264a0e 0x13dae99 0x2614e 0x260e6 0xccade 0xccfa7 0xcc266 0x4b3c0 0x4b5e6 0x31dc4 0x25634 0x12c3ef5 0x13ad195 0x1311ff2 0x13108da 0x130fd84 0x130fc9b 0x12c27d8 0x12c288a 0x23626 0x2a0d 0x2975)
terminate called throwing an exception(lldb) 
```

如何消除错误？我是新手，所以请保持简单的答案 - 谢谢

# c# - Xml反序列化，跨不同标签保持顺序

> ID：10335812
> 
> 赞同：4
> 
> 时间：2012-04-26T14:45:00.693
> 
> 标签：c#, .net, deserialization, xmlserializer

我有需要用 XmlSerializer 反序列化的 xml（我无法控制）。我的麻烦是我需要在一个列表中保留两个不同标签之间的顺序。让我举个例子吧：

```
<users>
    <luser>..some more elements..</luser>
    <luser>..some more elements..</luser>
    <admin>..different elements than in luser</admin>
    <luser>..some more elements..</luser>
    <admin>..different elements than in luser</admin>
    <luser>..some more elements..</luser>
    <admin>..different elements than in luser</admin>
<users> 
```

现在，如果我以直接的方式反序列化，我最终会得到两个列表，一个用于 luser，一个用于管理员。但是，它们出现的顺序是隐式 ID！（这当然应该是 xml 中的属性或元素，但可惜不是）

我试图制作这样的元元素

```
[XmlElement("luser"),XmlElement("admin")]
public List<Person> Person { get; set; } 
```

和

```
public class Person
{
    public Luser Luser { get; set; }
    public Admin Admin { get; set; }
} 
```

计划是检查列表以查看条目是 luser 还是管理员，并让人员包装器维护元素的顺序。但是，单个属性上的多个 XmlElement 属性似乎是非法的。

另一个可接受的解决方案是最终得到两个列表，但每个列表中的每个条目都有一个我可以用来获取原始订单的 ID。

我希望这尽可能干净。之后通过 xml 搜索以查找订单、手动提取标签以及类似的操作，是我会避免并作为最后手段做的事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T14:54:06.513

> 这当然应该是一个属性...

然后尽快将其设为属性。然后处理结果。

```
var doc = XDocument.Load(...);

var fixeruppers = doc
      .Descendants("users")
      .Elements()
      .ToList();   // isolate us from any movements in the doc

int id = 1; // base
foreach (var fixer in fixeruppers)
   fixer.SetAttributeValue("Id", id++);

XmlReader readerForDeserialize = doc.CreateReader(); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-26T14:55:14.470

以下将指示顺序（使用 order:= 值），它不会更改类的序列化方式。

```
Imports System.Runtime.Serialization
Imports System.ServiceModel

<DataContract()> _
Public Class MyClass

    <DataMember(order:=1)> _
    Public Property SomeData() As String

    <DataMember(order:=2)> _
    Public Property SomeOtherData() As String

End Class 
```

# javascript - ASP LinkBut ton 命令排序导致页面忽略Javascript？

> ID：10335813
> 
> 赞同：0
> 
> 时间：2012-04-26T14:45:06.103
> 
> 标签：javascript, jquery, asp.net, postback, linkbutton

所以我有一个表格，在每个列标题的顶部都有一个链接按钮。链接按钮使用 commandname="sort" 对表格进行排序。当我单击其中一个按钮时，页面会返回所需的结果。但是，如果我单击页面中打开 jquery 颜色框的链接，而不是激活 javascript，它会重定向到空白页面。

```
 $(document).ready(function () {
    $('.ManageImages').colorbox({ inline: true, innerwidth: 504, innerheight: 530, href: "#create-image-manager-dialog", escKey: false, overlayClose: false, onCleanup: function(){
        postbackWithModal();
    }});        
});
...
...
...
<th><asp:LinkButton runat="server" CommandName="Sort" CommandArgument="ItemNumber" CssClass="table-link-sorter">SKU</asp:LinkButton></th>
...
...
...
<asp:LinkButton CssClass="ManageImages" ID="ManageImages" runat="server" OnClientClick="SetImageSKU(this);" Text="Image Management" PostBackUrl="#" /> 
```

如果我单击带有 # 的 postbackurl 的链接按钮，它会将我重定向到一个空白页面，而不是调用我在提供的 javascript 中拥有的 jquery。任何人都知道解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:29:14.587

试试下面的代码。如果您只想运行 javascript。

```
<asp:LinkButton Text="Image Management" runat="server" PostBackUrl="javascript:void(0)" OnClientClick="SetImageSKU(this);" CssClass="ManageImages" ID="ManageImages" CausesValidation="false"/> 
```

应该这样做。如果您想运行 javascript 和后面的代码，请将其更改为**OnClientClick="return SetImageSKU(this);"** 并从 SetImageSKU 发送 true 或 false，因此当它返回 true 时，Link 按钮将导致回发。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T15:00:13.143

只是猜测...更改为： OnClientClick="SetImageSKU(this);return false;" 还想知道是否甚至需要回发网址。

更好的是使用 HTML 锚来执行此操作，这将阻止 asp 为您编写代码。

# objective-c - iPhone核心数据“无法在NSManagedObject类上调用指定的初始化程序”错误，同时将JSON反序列化为嵌套核心数据实体

> ID：10335814
> 
> 赞同：4
> 
> 时间：2012-04-26T14:45:07.533
> 
> 标签：objective-c, ios, json, core-data, restkit

我正在使用 RestKit 将嵌套的核心数据模型转换为 JSON 文件并将其上传到 Web 服务。然后我试图获取相同的 JSON 请求并将其重新膨胀到核心数据对象中。我在通货膨胀期间收到此错误：

```
 CoreData: error: Failed to call designated initializer on NSManagedObject class 'AppUser' 
    2012-04-26 10:25:50.850 DropboxSync[3824:5843] *** Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<AppUser 0x2b7820> valueForUndefinedKey:]: the entity (null) is not key value coding-compliant for the key "lastName".' 
```

该类有一个 lastName 属性：

```
@property (nonatomic, retain) NSString * firstName;
@property (nonatomic, retain) NSString * lastName;
@property (nonatomic, retain) NSString * localDataFilepath;
@property (nonatomic, retain) NSSet *events;
@property (nonatomic, retain) AppUserWrapper *wrapper;

**What could be causing this?** 
```

我在我的核心数据模型中定义了 3 个实体：

用户事件图像

用户有多个事件，事件有多个图像

我已经定义了一个如下定义的 RestKit 对象映射。

-(void)setupObjectMapping { RKObjectManager *objectManager = [RKObjectManager sharedManager ] ; RKObjectMapping *mapping = [RKObjectMapping mappingForClass:[文章类]];

```
 [mapping mapAttributes:@"articleID", @"title", @"body", nil];

    //********************************    

    RKObjectMapping *imageMapping = [RKObjectMapping mappingForClass:[ImageEntity class]];

    [imageMapping mapAttributes:@"createDate", @"localFilePath", nil];
    [objectManager.mappingProvider addObjectMapping:bleedImageMapping];
    [objectManager.mappingProvider setSerializationMapping:[imageMapping inverseMapping] forClass:[ImageEntity class]];
    [objectManager.mappingProvider imageMapping forKeyPath:@"images"];

    //********************************    

    RKObjectMapping *eventMapping = [RKObjectMapping mappingForClass:[Event class]];

    [eventMapping mapAttributes:@"createDate", @"severity", nil];
    [eventMapping mapRelationship:@"images" withMapping:imageMapping];

    [objectManager.mappingProvider addObjectMapping:eventMapping];
    [objectManager.mappingProvider setSerializationMapping:[eventMapping inverseMapping] forClass:[Event class]];
    [objectManager.mappingProvider setMapping:eventMapping forKeyPath:@"bleedEvents"];

    //******************************** 
    //setup App user mapping
    RKObjectMapping *userMapping = [RKObjectMapping mappingForClass:[AppUser class]];

    [userMapping mapAttributes:@"firstName", @"lastName", nil];
    [userMapping mapRelationship:@"events" withMapping:eventMapping];
    [objectManager.mappingProvider addObjectMapping:userMapping];
    [objectManager.mappingProvider setSerializationMapping:[userMapping inverseMapping] forClass:[AppUser class]];
    [objectManager.mappingProvider setMapping:userMapping forKeyPath:@"appUser"];

    //******************************** 
    //setup App user wrapper mapping
    RKObjectMapping *userWrapperMapping = [RKObjectMapping mappingForClass:[AppUserWrapper class]];

    [userWrapperMapping mapRelationship:@"appUser" withMapping:userMapping];
    [objectManager.mappingProvider addObjectMapping:userWrapperMapping];
    [objectManager.mappingProvider setSerializationMapping:[userWrapperMapping inverseMapping] forClass:[AppUserWrapper class]];
    [objectManager.mappingProvider setMapping:userWrapperMapping forKeyPath:@"appUserWrapper"];

} 
```

以下是我将嵌套数据结构转换为 JSON 的方法：

```
-(void)convertTestUserToJSON
{

    NSString* fullPath = [[$ documentPath] stringByAppendingPathComponent:@"sampleJSONFolder"];
    [[NSFileManager defaultManager] createDirectoryAtPath:fullPath withIntermediateDirectories:YES attributes:nil error:nil];
    // Make the file

    NSString* fullFilepath = [NSString stringWithFormat:@"%@_%@.json",appUser.firstName,appUser.lastName];
    NSString* dataFile = [fullPath stringByAppendingPathComponent:fullFilepath];
    appUser.localDataFilepath = dataFile;
    [[AppUser managedObjectContext] save:nil];

    NSError* error = nil;

    RKObjectMapping *serMap = [[[RKObjectManager sharedManager] mappingProvider] serializationMappingForClass:[AppUser class]];
    NSDictionary *d = [[RKObjectSerializer serializerWithObject:appUser mapping:serMap] serializedObject:&error];

    if(error!=nil)
    {
        NSLog(@"!!!!! Error: %@",[error localizedDescription]);
    }

   //this is where the JSON is generated
    NSString* dataContents = [d JSONString];
  BOOL success =  [dataContents writeToFile:dataFile atomically:YES encoding:NSUTF8StringEncoding error:nil];
    if(!success)
    {
        NSLog(@"Error writing to data file!");
    }
} 
```

这是JSON转换的结果

```
{"firstName":"First Name0","events":[{"severity":0,"images":[{"createDate":"2005-04-21 08:28:47 +0000","localFilePath":"localPhoto#10.png"},{"createDate":"2009-12-19 07:26:54 +0000","localFilePath":"localPhoto#11.png"}],"createDate":"2003-05-25 15:32:53 +0000"},{"severity":1,"images":[{"createDate":"2008-08-02 19:40:14 +0000","localFilePath":"localPhoto#10.png"},{"createDate":"2007-01-12 05:50:27 +0000","localFilePath":"localPhoto#12.png"},{"createDate":"2007-05-28 12:19:39 +0000","localFilePath":"localPhoto#11.png"}],"createDate":"2001-05-28 23:38:23 +0000"},{"severity":2,"images":[{"createDate":"2002-10-09 19:47:39 +0000","localFilePath":"localPhoto#10.png"},{"createDate":"2008-08-17 03:21:12 +0000","localFilePath":"localPhoto#11.png"}],"createDate":"2005-10-18 03:40:52 +0000"}],"lastName":"Last Name83"} 
```

当我尝试将此 JSON 膨胀回嵌套的核心数据实体时，出现错误：

```
CoreData: error: Failed to call designated initializer on NSManagedObject class 'AppUser' 
2012-04-26 10:25:50.850 DropboxSync[3824:5843] *** Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<AppUser 0x2b7820> valueForUndefinedKey:]: the entity (null) is not key value coding-compliant for the key "lastName".' 
```

在尝试映射之前，inflater 似乎没有实例化所有关系。我错了吗？什么可能导致这种情况发生？我试图以两种不同的方式重新膨胀我的 JSON，但两次我都得到了这个错误。如何解决？

感谢您的任何意见！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T15:19:41.730

问题是在处理核心数据时使用`RKObjectMapping`而不是，因此 RestKit 将一个as regular实例化。`RKEntityMapping``NSManagedObject``NSObject`

# linux - 如何让maven构建平台独立？

> ID：10335815
> 
> 赞同：101
> 
> 时间：2012-04-26T14:45:24.820
> 
> 标签：linux, maven

在我的 Mac 上使用 Maven 构建时，`mvn install`我得到了

> [警告] 使用平台编码（实际上是 MacRoman）复制过滤的资源，即构建依赖于平台！

**是否可以为给定平台（Linux）构建或以其他方式使构建平台独立？**

* * *

## 回答 #1

> 赞同：184
> 
> 时间：2012-04-26T14:50:13.273

当您没有在 pom.xml 中提供以下内容时，就会发生这种情况

```
<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties> 
```

没有这意味着您正在使用特定于平台的编码，这就是警告的原因。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-04-17T15:39:21.870

如果@Kal 的答案对您不起作用，也许您可​​以从我最后的 30 分钟中学习...下面的链接为上述答案添加了一行并解决了我的问题。我的问题与 maven-resources-plugin 2.6 有关，但以下解决方案的提供者解决了一个不同的问题...... [https://stackoverflow.com/a/3018152/2485075](https://stackoverflow.com/a/3018152/2485075)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-20T08:14:22.630

针对特定需求：

```
<!-- https://maven.apache.org/plugins/maven-resources-plugin/index.html -->
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-resources-plugin</artifactId>
    <version>3.1.0</version>
    <configuration>
        <encoding>UTF-8</encoding>
    </configuration>
</plugin> 
```

如果插件已经配置，只需添加

```
<encoding>UTF-8</encoding> 
```

# php - Zend 框架中的缓存注册问题

> ID：10335818
> 
> 赞同：2
> 
> 时间：2012-04-26T14:45:33.670
> 
> 标签：php, zend-framework

我在`cache`注册时遇到了一些问题。在这里，我如何配置缓存

```
resources.cache.frontEnd = core
resources.cache.backEnd = file
resources.cache.frontEndOptions.lifetime = 1200
resources.cache.frontEndOptions.automatic_serialization = true
resources.cache.backEndOptions.lifetime = 3600
resources.cache.backEndOptions.cache_dir = APPLICATION_PATH "/../cache" 
```

在我加载任何页面后，我收到以下错误消息

> 致命错误：未捕获的异常 'Zend_Application_Bootstrap_Exception' 带有消息“无法解析插件“缓存”；在 C:\Zend\Apache2\htdocs\hotelrwanda\library\Zend\Application\Bootstrap\BootstrapAbstract.php:330 堆栈跟踪：#0 C:\Zend\Apache2\htdocs\hotelrwanda\library\ 中没有具有该名称的相应插件Zend\Application\Bootstrap\BootstrapAbstract.php(382): Zend_Application_Bootstrap_BootstrapAbstract->getPluginResource('cache')
> 
> ### 1 C:\Zend\Apache2\htdocs\hotelrwanda\library\Zend\Application\Bootstrap\BootstrapAbstract.php(394)：
> 
> Zend_Application_Bootstrap_BootstrapAbstract->getPluginResources() #2 C:\Zend\Apache2\htdocs\hotelrwanda\library\Zend\Application\Bootstrap\BootstrapAbstract.php(625): Zend_Application_Bootstrap_BootstrapAbstract->getPluginResourceNames()
> 
> ### 3 C:\Zend\Apache2\htdocs\hotelrwanda\library\Zend\Application\Bootstrap\BootstrapAbstract.php(586)：
> 
> Zend_Application_Bootstrap_BootstrapAbstract->_bootstrap(NULL) #4 C:\Zend\Apache2\htdocs\hotelrwanda\library\Zend\Application.php(355): Zend_Applicatio in C:\Zend\Apache2\htdocs\hotelrwanda\library\Zend\Application\ Bootstrap\BootstrapAbstract.php 第 330 行

我确定这是配置问题。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T15:02:45.693

尝试在缓存配置之前将以下行添加到配置文件中：

```
pluginPaths.App_Application_Resource_ = App/Application/Resource 
```

该错误消息意味着 Zend Framework 找不到“缓存”插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T15:02:07.947

应该`cachemanager`不是`cache`。链接到文档： http: [//framework.zend.com/manual/en/zend.application.available-resources.html#zend.application.available-resources.cachemanager](http://framework.zend.com/manual/en/zend.application.available-resources.html#zend.application.available-resources.cachemanager)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-14T09:07:45.327

## 错误

该错误意味着在配置的**pluginPaths下找不到“** **Cache.php** ”文件，无论是在默认目录“/library/Zend/Application/Resource”下还是在配置中定义为 pluginPaths 的附加路径下。

 **## 解决方案

很可能**`pluginPaths`**您的配置（[application.ini](https://stackoverflow.com/questions/26820528/application-ini-how-it-works)）中的定义不正确或根本没有定义。所以找不到插件。

我`pluginPaths`定义了几个，当我尝试克隆 zend 应用程序时，我不得不重新定义这些位置，我在其中一个位置犯了一个错误，导致了这个错误。

## 资源插件

在 Zend 1 中，[资源插件](https://framework.zend.com/manual/1.12/en/zend.application.available-resources.html)是类，大多数在 application.ini 中定义，带有它们的参数。它们在应用程序需要时启动。

默认资源插件路径是[/library/Zend/Application/Resource](https://github.com/zendframework/zf1/tree/release-1.12.20/library/Zend/Application/Resource)，可以使用以下方式定义附加插件路径：

```
pluginPaths.Custom_Resource_Path = "path/to/Resource" 
```

可以在“path/to/Resource”下添加自定义类：

```
// path/to/Resource/Custom.php:
class Path_To_Resource_Custom extends Zend_Application_Resource_ResourceAbstract 
{
      public function setParam1($param1) {
          ...
      }
      public function init()
      {
          ...
      } 
```

在 application.ini 中，添加了配置：

```
resources.custom.param1 = '...';
resources.custom.param2 = '...'; 
```

还

*   通过在上述目录中创建一个与默认资源同名的类，例如 Log.php，可以覆盖默认资源。
*   可以更改默认资源，例如 resources.view.encoding = "UTF-8"**

# iphone - 通过 initWithFrame 添加子视图。UINavigationBar 大小

> ID：10335824
> 
> 赞同：3
> 
> 时间：2012-04-26T14:45:49.953
> 
> 标签：iphone, objective-c, ios, uiview

我有一个 UINavigationBar 视图： **AppDelegate**：

```
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
// Override point for customization after application launch.

_homeScreen = [[PrepareScreen alloc] init];
self.mainViewController = [[MyViewController alloc] initWithScreenDef:[self.homeScreen projectHomeScreen] AndBounds:self.window.bounds];

self.navigationController = [[UINavigationController alloc] initWithRootViewController:self.mainViewController];
self.window.rootViewController = self.navigationController;
[self.window makeKeyAndVisible];
return YES; 
```

然后我有课

```
MyViewController : UIView <UITableViewDataSource,UITableViewDelegate> 
```

在我的**.h**文件中，我有：

```
- (void)viewDidLoad
{
[super viewDidLoad];

self.myTableView = [[UITableView alloc] initWithFrame:self.view.bounds];
[self.view addSubview:self.myTableView];
} 
```

之后我的屏幕高度错误。我希望我的 myTableView 有一个 size.height-49.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T14:53:53.610

`CGRectZero`使用in方法初始化 tableView，`viewDidLoad`然后在方法中`viewWillAppear:`设置，`self.myTableView.frame`就像在此方法中一样，视图的几何图形已经设置并且`self.view.bounds`是正确的。所以一般来说：在 中初始化视图`viewDidLoad`，但在 中设置它们的几何图形`viewWillAppear:`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:52:12.913

那这个呢？

```
CGRect r = initWithFrame:self.view.bounds;
r.size.height -= 49.0;
self.myTableView = [[UITableView alloc] initWithFrame:r]; 
```

希望能帮助到你...

# sql-server-2008 - 从网页创建 SSRS 订阅

> ID：10335825
> 
> 赞同：2
> 
> 时间：2012-04-26T14:45:55.117
> 
> 标签：sql-server-2008, reporting-services, ssrs-2008

我在 SQL 2008 R2 上运行 Reporting Services，并创建了一些报告。我可以进入 Report Server 并设置订阅，并将任何报告通过电子邮件发送到电子邮件地址。所以所有这些都配置正确。

我想要做的是在我的应用程序中有一个显示可用报告列表的网页。用户可以选择一个，选择计划频率，输入电子邮件地址，然后单击“保存”按钮。单击保存时，它应该在 SSRS 中创建订阅。根据报告，我可能需要传入几个报告参数。

我怎样才能在 C# 中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T18:49:21.323

您可以在 SSRS 中为报告动态生成一次性订阅。您必须使用 Diego 提到的 RS 网络服务。

您的代码将如下所示：

```
static void generateSubscription()
{
    if (SubscriptionRequests.Count < 1) return;

    NetworkCredential credentials = new NetworkCredential("user", "pass");
    reports.ReportingService2005 rs = new reports.ReportingService2005();
    rs.Credentials = credentials;
    DateTime topDatetime = DateTime.Now;
    topDatetime = topDatetime.AddMinutes(2);

    foreach (SubscriptionRequest x in SubscriptionRequests)
    {
        reports.ExtensionSettings extensionSettings = new reports.ExtensionSettings();
        List<reports.ParameterValue> extParameters = new List<reports.ParameterValue>();
        List<reports.ParameterValue> parameters = new List<reports.ParameterValue>();
        string description = "Email: ";
        string eventType = "TimedSubscription";
        extensionSettings.Extension = "Report Server Email";

        string scheduleXml = "<ScheduleDefinition><StartDateTime>";
        scheduleXml += topDatetime.ToShortDateString() + " " + topDatetime.ToShortTimeString();
        scheduleXml += "</StartDateTime></ScheduleDefinition>";

        parameters.Add(new reports.ParameterValue() { Name = "abc", Value = x.id });

        extParameters.Add(new reports.ParameterValue() { Name = "RenderFormat", Value = x.renderFormat });
        extParameters.Add(new reports.ParameterValue() { Name = "TO", Value = x.email });
        extParameters.Add(new reports.ParameterValue() { Name = "ReplyTo", Value = x.replyTo });
        extParameters.Add(new reports.ParameterValue() { Name = "IncludeReport", Value = "True" });
        extParameters.Add(new reports.ParameterValue() { Name = "Subject", Value = "subject - " + " (" + x.id.ToString() + ")" });

        extParameters.Add(new reports.ParameterValue() { Name = "Comment", Value = x.body });
        extensionSettings.ParameterValues = extParameters.ToArray();

        description += topDatetime.ToShortDateString() + " " + topDatetime.ToShortTimeString();
        description += " (" + x.a + " - " + x.b + " - " + x.c + ")";
        string _reportName = "/report";
        rs.CreateSubscription(_reportName, extensionSettings, description, eventType, scheduleXml, parameters.ToArray());
        topDatetime = topDatetime.AddSeconds(30);
    }           
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T14:54:10.773

最简单的方法是在“浏览器”预定义角色下授予用户对报表管理器的访问权限。这正是这个角色的意义所在，查看文件夹和报告并订阅报告。

如果这不可能，您可以创建自己的管理工具。为此，您需要使用 SOAP 和 [ReportService2005](http://msdn.microsoft.com/en-us/library/reportservice2005%28v=sql.100%29.aspx)端点访问 SSRS Web 方法

[这里的](http://msftrsprodsamples.codeplex.com/)例子

# c# - 用于序列化的 XML 类生成器

> ID：10335828
> 
> 赞同：2
> 
> 时间：2012-04-26T14:46:08.437
> 
> 标签：c#, vb.net, xml-serialization, auto-generate

有没有一种从 XML 构造类的简单方法。构造的类将用于序列化和反序列化 XML。

我有一个定义了许多属性和元素的 XML。我是否需要基于该 XML 手动创建我的类？或者是否有可用于从 XML 生成类的实用工具

谢谢，

埃森

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T19:37:56.923

进一步了解威廉的帖子：

这将生成 XSD（**不是数据集**）

```
xsd.exe myCustom.xml 
```

这将生成 C# 类：

```
xsd.exe myCustom.xsd /c 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T15:47:04.903

有一种方法：使用`xsd.exe`，您可以首先从您的 xml 文件创建一个模式 (xsd)，然后可以将其用作`xsd.exe`从模式生成类的输入。即（从命令提示符）：

```
xsd.exe myXmlFile.xml 
```

输出`myXmlFile.xsd`

接下来

```
xsd.exe myXmlFile.xsd 
```

从 xsd 文件生成类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T15:05:53.290

@Willem van Rumpt：解决方案帮助我生成课程。但是在某些情况下，当我尝试实例化数据集时，我最终会收到此异常“同一个表不能是两个嵌套关系中的子表......”

我尝试了不同的解决方案，使用 xmldocument 对象来导航每个节点并生成可用于序列化和反序列化 xml 文件的类。想在这里发布它，以便对正在寻找类似解决方案的人有所帮助。如果您有优化的解决方案，请发布。

```
namespace Utility1 
{
public static class XMLHelper
{
   private enum XMLType
   {
      Element,
      Attribute
   }
    public static string GenerateXMLClass(string xmlstring)
    {
        XmlDocument xd = new XmlDocument();
        xd.LoadXml(xmlstring);
        XmlNode rootNode = xd.DocumentElement;
        var xmlClassCollection = new Dictionary<string, XMLClass>();
        var xmlClass = new XMLClass();
        xmlClassCollection.Add(rootNode.Name, xmlClass);
        CollectAttributes(ref xmlClass, rootNode);
        CollectElements(ref xmlClass, rootNode);
        CollectChildClass(ref xmlClassCollection, rootNode);

        var clsBuilder = new StringBuilder();

        clsBuilder.AppendLine("[XmlRoot(\"" + rootNode.Name + "\")]");

        foreach (var cls in xmlClassCollection)
        {
            clsBuilder.AppendLine("public class " + cls.Key);
            clsBuilder.AppendLine("{");

            foreach (var element in cls.Value.Elements)
            {
                if (XMLType.Element == element.XmlType)
                    clsBuilder.AppendLine("[XmlElement(\"" + element.Name + "\")]");
                else
                    clsBuilder.AppendLine("[XmlAttribute(\"" + element.Name + "\")]");
                clsBuilder.AppendLine("public " + element.Type + element.Name + "{get;set;}");
            }

            clsBuilder.AppendLine("}");
        }

        return clsBuilder.ToString();
    }

    private static void CollectAttributes(ref XMLClass xmlClass, XmlNode node)
    {
        if (null != node.Attributes)
        {
            foreach (XmlAttribute attr in node.Attributes)
            {
                if (null == xmlClass.Elements.SingleOrDefault(o => o.Name == attr.Name))
                    xmlClass.Elements.Add(new Element("string ", attr.Name, XMLType.Attribute));
            }
        }
    }

    private static bool IsEndElement(XmlNode node)
    {
        if ((null == node.Attributes || node.Attributes.Count <= 0) &&
                   (null == node.ChildNodes || !node.HasChildNodes || (node.ChildNodes.Count == 1 && node.ChildNodes[0].NodeType == XmlNodeType.Text)))
        {
            return true;
        }
        return false;
    }

    private static void CollectElements(ref XMLClass xmlClass, XmlNode node)
    {
        foreach (XmlNode childNode in node.ChildNodes)
        {
            if (null == xmlClass.Elements.SingleOrDefault(o => o.Name == childNode.Name))
            {
                var occurance = node.ChildNodes.Cast<XmlNode>().Where(o => o.Name == childNode.Name).Count();
                var appender = "  ";
                if (occurance > 1)
                    appender = "[] ";

               if(IsEndElement(childNode))
                {
                    xmlClass.Elements.Add(new Element("string" + appender, childNode.Name, XMLType.Element));
                }
                else
                {
                    xmlClass.Elements.Add(new Element(childNode.Name + appender, childNode.Name, XMLType.Element));
                }
            }
        }
    }

    private static void CollectChildClass(ref Dictionary<string, XMLClass> xmlClsCollection, XmlNode node)
    {
        foreach (XmlNode childNode in node.ChildNodes)
        {
            if (!IsEndElement(childNode))
            {
                XMLClass xmlClass;
                if (xmlClsCollection.ContainsKey(childNode.Name))
                    xmlClass = xmlClsCollection[childNode.Name];
                else
                {
                    xmlClass = new XMLClass();
                    xmlClsCollection.Add(childNode.Name, xmlClass);
                }
                CollectAttributes(ref xmlClass, childNode);
                CollectElements(ref xmlClass, childNode);
                CollectChildClass(ref xmlClsCollection, childNode);
            }
        }
    }

    private class XMLClass
    {
        public XMLClass()
        {
            Elements = new List<Element>();
        }
        public List<Element> Elements { get; set; }
    }

    private class Element
    {
        public Element(string type, string name, XMLType xmltype)
        {
            Type = type;
            Name = name;
            XmlType = xmltype;
        }
        public XMLType XmlType { get; set; }
        public string Name { get; set; }
        public string Type { get; set; }
    }
  }
} 
```

谢谢，

埃森

# c# - Asp.net 实体框架插入重复 PK 异常

> ID：10335829
> 
> 赞同：1
> 
> 时间：2012-04-26T14:46:09.753
> 
> 标签：c#, database, entity-framework

我写的一个服务可以达到每周最新汇率的值。
但是将值发送到数据库时出现错误。我在实体框架中创建了一个数据库模型。关联的数据库表名称是`CURRENCY`和`WEEKLY_VALUE`。

相关字段是`KOD`字段中的字段`CURRENCY`和表中的字段。中的字段是 Foreing_key。`KOD``WEEKLY_VALUE``KOD``WEEKLY_VALUE`

我在这段代码中得到一个错误：

```
 public void insertWeeklyCurrency(List<CURRENCY> currencyList)
    {
        myEntity = new CurrencyEntities();
        DateTime date = new DateTime();
        date = System.DateTime.Now;
        String day= date.DayOfWeek.ToString();
        if (!day.Equals("Sunday") && !day.Equals("Saturday"))
        {
            WEEKLY_VALUE weeklyCurrency;
            for (int i = 0; i < currencyList.Count; i++)
            {
                weeklyCurrency = new WEEKLY_VALUE();
                weeklyCurrency.KOD = currencyList[i].KOD;
                weeklyCurrency.TARIH = currencyList[i].TARIH;
                weeklyCurrency.DEGER = currencyList[i].F_SATIS;
                weeklyCurrency.CURRENCYReference.Value=currencyList[i];
                myEntity.AddToWEEKLY_VALUE(weeklyCurrency);
                myEntity.SaveChanges();
            }
        }
    } 
```

错误信息：

> {"违反 PRIMARY KEY 约束 'PK_CURRENCY'。无法在对象 'dbo.CURRENCY' 中插入重复键。\r\n语句已终止。"}

如何处理这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T16:26:12.297

您需要将 currencyList 中的元素附加到上下文中，以让 EF 知道它们已经存在于数据库中，否则 EF 会尝试将它们插入数据库：

```
for (int i = 0; i < currencyList.Count; i++)
{
    myEntity.Currencies.Attach(currencyList[i]);
    // etc.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T15:22:11.323

当您收到此错误时，您很可能会尝试插入表中已有的内容。

除了显而易见的之外，我还需要查看架构以查明问题的确切位置。然而，

weekCurrency.CURRENCYReference.Value=currencyList[i];

看起来很可疑。如果 KOD 已经是货币的外键，那么这个 CURRENCYReference 值是多少？

# java - 如何通过在java中对每个数字进行乘积从一组数字中找到单个数字

> ID：10335831
> 
> 赞同：2
> 
> 时间：2012-04-26T14:46:18.110
> 
> 标签：java, algorithm

我有一个像 99 这样的数字，现在我需要一个数字，比如 -

```
9*9 = 81
8*1 = 8

ex2:
3456 3*4*5*6
360 3*6*0 
```

除了将数字更改为字符/字符串然后与每个相邻的 .

让我把问题稍微复杂一点，如果我想获得使 N 变为一位数所需的步骤数，那么递归可能会丢失步骤并且只需要在一个方法中完成

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T14:48:22.493

假设这些是整数，您可以使用基数 (10) 的除法和模数：

```
81 / 10 = 8
81 % 10 = 1 
```

对于第二个示例，您需要使用`while (X >= 10)`循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T14:53:06.667

这个递归函数应该这样做......

```
int packDown( int num ) {
  if( num < 10 ) return num ;
  int pack = 1 ;
  while( num > 0 ) {
    pack *= num % 10 ;
    num /= 10 ;
  }
  return packDown( pack ) ;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T14:57:32.323

```
public static int digitMultiply(int number) {
    int answer = 1;
    while (number > 0) {
        answer=answer*(number % 10);
        number = number / 10;
    }
    return answer;
} 
```

希望能帮助到你！！简单的乘法算法..

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T15:15:15.090

以下单个递归方法也应该起作用：

```
int multDig(int number){
  if(number >= 10)
    return multDig((number%10) * multDig(number/10));
  else
    return number;
} 
```

# javascript - XMLHttpRequest 调用未在 return 语句之前完成，因此未定义

> ID：10335832
> 
> 赞同：-1
> 
> 时间：2012-04-26T14:46:20.343
> 
> 标签：javascript, jquery, google-chrome-extension, xmlhttprequest

我试图计算我正在查询的数据库中有多少项目。它是第三方的，所以它是跨域的 XMLHttpRequests，但我在 Chrome 扩展中创建该方法，并且 manifest.json 中的权限位让它运行良好。

我似乎遇到的问题是：在 XMLHttpRequests 从外部服务器返回之前，我正在遍历一个类别列表并计算每个类别的数量。这些方法通过按下 id="countButton" 的按钮来启动。这是相关的javascript/jQuery：

```
//simple listener for the button
document.getElementById('countButton').addEventListener('click', function() runTotalCount()}, true);

//loops through a list of categories in a drop down with values 0-36
function runTotalCount(){
    var sum = 0;
    $('#categorySelect option').each(function(){
        var value = $(this).val();
        sum += retrieveCategoryCount(value);
        alert("New Sum = " + sum);
    });
    var total = "<p>Total items in Sum is " + sum + "</p>";
    document.getElementById('results').innerHTML = total;
}

//actually makes the request and sums the items count for each category
//the server response is a json with an alphabetized "items" per category
function retrieveCategoryCount(num){
    var sum = 0;
    var xhr = new XMLHttpRequest();
    xhr.onreadystatechange = function(){
        if (xhr.readyState == 4 && xhr.status == 200){
            var str = xhr.responseText;
            alert("str = " + str);
            var json = $.parseJSON(str);
            alert("JSON = " + json);
            for(item in json.alpha){
                alert("items count = " + json.alpha[item].items);
                sum += json.alpha[item].items;
            }
        alert("Category Sum = " + sum);
        return sum;
        }
    }
    xhr.open(
        "GET",
        "http://services.runescape.com/m=itemdb_rs/api/catalogue/category.json?category=" + num,
        true);
    xhr.send(null);
} 
```

因为它是`onreadystate`for中的东西`retrieveCategoryCount`永远不会被调用，因为 XMLHttpRequests 在函数完成时仍然处于未决状态。在同步调用中，`alert("Category Sum = " + sum);`返回正确的数字，但函数返回正下方是 NaN（我宁愿不挂断浏览器，但我更喜欢异步的解决方案）。

需要更改哪些内容才能正确获取项目计数？提前致谢。

更新：我也试过`retrieveCategoryCount`这个代码：

```
function retrieveCategoryCount(num){
    var sum = 0;
    $.getJSON("http://services.runescape.com/m=itemdb_rs/api/catalogue/category.json?category=" + num, function(data){
        for(item in data.alpha){
            alert("items count = " + data.alpha[item].items);
            sum += data.alpha[item].items;
        }
    alert("Category Sum = " + sum);
    return sum;
    });
} 
```

这里的问题是回调永远不会运行，因为从函数返回的值添加到“sum”时请求仍然处于挂起状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T14:56:40.713

您传递给的回调函数`onreadystatechange`不是`retrieveCategoryCount`。它的返回值丢失了，因为该函数仅在响应 readystatechange 事件时被调用。

**对回调中**的数据做你需要做的事情。不要试图返回数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:55:11.053

您可以将异步调用完成后应该发生的代码放入回调函数中，并将其传递给您的异步函数，然后让它回调。

```
var sum = 0,
    setTotalCount = function(data){ 
        .. stuff to set the dom element based on callback
    };
$('#categorySelect option').each(function(){
    var value = $(this).val();
    retrieveCategoryCount(value, setTotalCount);
});

function retrieveCategoryCount(num, callback){
var sum = 0;
var xhr = new XMLHttpRequest();
xhr.onreadystatechange = function(){
    if (xhr.readyState == 4 && xhr.status == 200){
        var str = xhr.responseText;
        alert("str = " + str);
        var json = $.parseJSON(str);
        alert("JSON = " + json);
        for(item in json.alpha){
            alert("items count = " + json.alpha[item].items);
            sum += json.alpha[item].items;
        }
    alert("Category Sum = " + sum);
       callback(sum); // callback the function you passed in
    }
}
xhr.open(
    "GET",
    "http://services.runescape.com/m=itemdb_rs/api/catalogue/category.json?category=" + num,
    true);
xhr.send(null);
} 
```

# c# - 下载 PDF 而不保存在 ASP.net 处理程序中

> ID：10335834
> 
> 赞同：1
> 
> 时间：2012-04-26T14:46:28.297
> 
> 标签：c#, asp.net, pdf, save, handler

我在 asp.net 应用程序中有一个处理程序。当有某种请求时，我希望用户获得下载窗口，我将**PDF**流放在那里。我不希望 PDF 保存在内存中。我有以下代码，但无法打开，说 pdf 文件已损坏，无法打开。如果您认为我的目标不好，请告诉我实现目标的其他方法。

```
 MemoryStream stream = new MemoryStream();
                CreatePFD(T.Text, stream);

                context.Response.Write(stream);

                context.Response.ContentType = "application/pdf";
                context.Response.AddHeader("content-disposition", "attachment; filename=" + "Nots__Saved__FIle__fileName.pdf"); 
```

现在我有这个代码：

Document Doc = new Document(PageSize.A4, 80, 50, 30, 65); System.IO.Stream outputStream = new System.IO.FileStream(@"C:\inetpub\wwwroot\c\wefwe.pdf", System.IO.FileMode.OpenOrCreate);

```
 PdfWriter.GetInstance(Doc, outputStream);

            Doc.Open();

            List<IElement> htmlarraylist = iTextSharp.text.html.simpleparser.HTMLWorker.ParseToList(new StringReader(T.Text), null);
            for (int k = 0; k < htmlarraylist.Count; k++)
            {
                Doc.Add((IElement)htmlarraylist[k]);
            }

            outputStream.CopyTo(context.Response.OutputStream);
            Doc.Close();

            context.Response.ContentType = "application/pdf";
            context.Response.AddHeader("content-disposition", "attachment; filename=" + "Nots__Saved__FIle__fileName.pdf"); 
```

当我保存pdf时，文件是正确的......但是当我得到响应时，文件是正确的。损坏...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T14:50:04.767

您需要通过设置来倒带流`stream.Position = 0`。

此外，`Response.Write(stream)`只会打印`stream.ToString()`.

相反，您应该调用`stream.CopyTo(Response.OutputStream)`.

# java - 为什么 int exp1 = 14/20*100; 在java中等于'0'？

> ID：10335837
> 
> 赞同：0
> 
> 时间：2012-04-26T14:46:34.430
> 
> 标签：java, math, int

我正在尝试做一些基本的数学运算，但它一直以`0`. 我确定它与它有关，`int`但我不知道如何解决它。我需要使用整数，但得出这些整数的数学使用小数。我该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-26T14:48:14.957

那是整数除法。

要获得非整数结果，请改用`double`s。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T14:49:18.833

这对黑莓来说并不特殊，它是标准的 java 行为。

这是因为你正在做整数数学：

```
int subexpr1 = 14 / 20; // 0
int subexpr2 =  subexpr1 * 100; // 0 
```

改用双精度或更改顺序

```
int expr1 = (int) 14.0/20 * 100; // Very small possibility of rounding errors
int expr2 = 14 * 100 / 20; // Will ignore fraction parts 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T14:49:16.767

您可以将其更改为 14*100/20 - 然后它会提供您想要的。

即改变操作顺序（14/20为0）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-26T14:50:39.787

您的结果被转换为`int`，因此您正在失去精度。

尝试

```
double exp1 = 14/20.0*100; 
```

# entity-framework - 在实体框架中透明地将可空值转换为不可空值

> ID：10335838
> 
> 赞同：2
> 
> 时间：2012-04-26T14:46:34.850
> 
> 标签：entity-framework, expression-trees, entity-framework-ctp5

我目前正在尝试将实体框架应用程序与大约十年左右的旧数据库集成。该数据库存在的众多问题之一（除了没有任何关系或约束之外）是几乎每一列都设置为空，即使在几乎所有情况下，这都没有意义。

我总是会遇到以下方面的异常：

> 无法将“MyRecord”上的“SortOrder”属性设置为“null”值。您必须将此属性设置为“Int32”类型的非空值。

我已经看到很多关于上述异常的问题，但这些似乎都是真正的错误，开发人员没有编写正确表示数据库中数据的类。我想特意写一个不能正确表示数据库中数据的类。我完全知道这违反了实体框架的规则，这很可能是我在做这件事时遇到这么多困难的原因。

此时无法更改架构，因为它会破坏现有应用程序。也无法修复数据，因为旧应用程序将插入新数据。我想用实体框架来映射数据库，在接下来的几年左右慢慢移动所有应用程序以依赖它进行数据访问，然后最终能够进入数据库重新设计阶段。

我用来解决这个问题的一种方法是透明地代理变量：

```
internal int? SortOrderInternal { get; set; }

public int SortOrder
{
    get { return this.SortOrderInternal ?? 0; }
    set { this.SortOrderInternal = value; }
} 
```

然后我可以在 CodeFirst 中映射该字段：

```
entity.Ignore(model => model.SortOrder);
entity.Property(model => model.SortOrderInternal).HasColumnName("SortOrder"); 
```

在这个方法中使用`internal`关键字确实可以让我很好地封装这种讨厌的东西，这样我至少可以防止它泄漏到我的数据访问程序集之外。

但不幸的是，我现在无法在查询中使用代理字段，因为`NotSupportedException`将被抛出：

> LINQ to Entities 不支持指定的类型成员“SortOrder”。仅支持初始化程序、实体成员和实体导航属性。

也许一旦 DbSet 接收到表达式，就可以透明地重写它？我很想知道这是否可行；我对表达树不够熟练。到目前为止，我未能在 DbSet 中找到一个可以重写以操纵表达式的方法，但我并没有超越创建一个实现 IDbSet 并传递给 DbSet 的新类，尽管那会很可怕。

在调查堆栈跟踪时，我发现了一个对称为 Shaper 的内部实体框架概念的引用，它似乎是获取数据并将其输入的东西System.Data.Entity.dll 与 dotPeek 表明这肯定会帮助我......假设`Shaper<T>`不是内部和密封的。我几乎可以肯定在这里吠错了树，但我很想知道是否有人以前遇到过这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T17:50:01.923

这是一个相当难以破解的难题，但您可以通过[Microsoft.Linq.Translations](http://damieng.com/blog/2009/06/24/client-side-properties-and-any-remote-linq-provider)做到这一点。

# apache - 每个项目的文档根目录

> ID：10335842
> 
> 赞同：4
> 
> 时间：2012-04-26T14:46:41.670
> 
> 标签：apache, xampp

我已经有一个本地服务器几个月了，每次我开始一个新项目时，我都需要使用服务器的根目录而不是项目的根目录。

在我的服务器上，我有：

```
htdocs
-- project1
---- images
---- js
---- css
-- project2
// etc. // 
```

当我去 rawox.co.cc（这是我家中的开发服务器）时，它会重定向到投资组合文件夹（rawox.co.cc/portfolio/） 另一个项目是 menology（rawox.co.cc/menology/） . 在这些项目的 css 中，我必须使用`background-image: url(../images/logo.png;`. 当我将项目上传到公共服务器时，css 会因为这些而停止工作`../`。

我个人的想法是，这是由于`http://rawox.co.cc/`在我的 apache 设置中设置为 DocumentRoot 造成的。我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T09:47:41.653

您可以在 httpd.conf 中使用虚拟主机。

```
<VirtualHost 10.1.2.3:80>
    ServerAdmin webmaster@host.example.com
    DocumentRoot /www/docs/host.example.com
    ServerName host.example.com
    ErrorLog logs/host.example.com-error_log
    TransferLog logs/host.example.com-access_log
</VirtualHost> 
```

为每个项目创建一个单独的 project1-vhost.conf 文件并将其包含在

```
include project1-vhost.conf 
```

在您的 httpd.conf 文件中。因此您可以轻松激活和停用每个项目

[http://httpd.apache.org/docs/2.0/vhosts/examples.html](http://httpd.apache.org/docs/2.0/vhosts/examples.html) http://httpd.apache.org/docs/2.2/en/mod/core.html#virtualhost

//编辑

```
Alias /project1 /path/to/project
<Location /path/to/project>
    Order Allow, Deny
    Allow from All
    ...
</Location> 
```

# cocoa-touch - 在倒计时结束时加载视图控制器

> ID：10335849
> 
> 赞同：0
> 
> 时间：2012-04-26T14:47:00.037
> 
> 标签：cocoa-touch, nstimer

我想在使用`NSTimer`. 我应该使用通知来做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:34:39.443

您可以在向计时器调用无效后发布通知。

让当前视图控制器监听通知推送到另一个视图控制器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:54:36.390

使用相同的倒计时在 [self performeSelector after delay] 上启动另一个方法。

# python - Python/perl 打印服务器；将打印作业写入文件

> ID：10335851
> 
> 赞同：1
> 
> 时间：2012-04-26T14:47:11.950
> 
> 标签：python, printing, asyncore

我正在尝试使用以下方式运行打印服务器：http: [//newcenturycomputers.net/projects/rawprintserver.html](http://newcenturycomputers.net/projects/rawprintserver.html)

我已经修改了 spooler.py 以写入文件，并且一切正常，除了一个问题：考虑到正在打印的内容，这项工作似乎需要很*长时间......*

这份工作收到了，并且在实际完成之前持续了整整一分钟。对于其中包含“test”一词的 1kb txt 文件来说，这似乎是一个过长的时间......

无论使用 Windows 还是 Mac，它都表现出相同的行为，所以它不是操作系统的东西......

这是 spooler.py 中修改后的 def

```
class printer(base_printer):
    def sendjob(self, fp, title = None):
        # title is irrelevant here
        print "Begin sendjob def..."
        out = open('/tmp/printserv/outs/' + str(time.time()).split('.')[0]+".txt", 'w')
        blk = fp.read(8192)
        while blk:
            out.write(blk)
            print "Block written..."
            blk = fp.read(8192)
            print "while loop done..."
        rc = out.close()
        if rc is not None:
            print "Error: lpr returns %02x" % rc
        else:
            print "OK DONE" 
```

这是处理作业的主要打印处理程序类（来自 printserver.py）：

```
class print_handler(asyncore.dispatcher):

    def __init__(self, conn, addr, server, jobnumber):
        asyncore.dispatcher.__init__(self, sock = conn)
        self.addr = addr
        self.server = server
        self.jobname = JOBNAME % jobnumber
        self.fp = open(self.jobname, "wb")
        print "Receiving Job from %s for Printer <%s> (Spool File %s)" \
            % (addr, self.server.printer.printer_name, self.jobname)

    def handle_read(self):
        data = self.recv(8192)
        print "Starting handle_read"
        if self.fp:
            print "begin self.fp.write..."
            self.fp.write(data)
            print "end self.fp.write.."

    def writable(self):
        print "Writable return 0"
        return 0

    def handle_write(self):
        print "handle_write pass"
        pass

    def handle_close(self):
        print "Printer <%s>: Printing Job %s" \
            % (self.server.printer.printer_name, self.jobname)
        if self.fp:
            self.fp.close()
            self.fp = None
        fp = open(self.jobname, "rb")
        self.server.printer.sendjob(fp)
        fp.close()
        try:
            os.remove(self.jobname)
        except:
            print "Can't Remove <%s>" % self.jobname
        self.close() 
```

和 mainloop def（也在 printserver.py 中）：

```
def mainloop(config):

    if config["spooldir"]:
        os.chdir(config["spooldir"])

    for i in range(len(config["printer"])):
        args = string.split(config["printer"][i], ",", maxsplit = 1)
        prn = args[1].strip()
        port = int(args[0].strip())
        p = print_server('',
            port, spooler.printer(prn))
        servers.append(p)

    try:
        try:
            asyncore.loop(timeout = 1.0)
        except KeyboardInterrupt:
            pass
    finally:
        print "Print Server Exit" 
```

那些`print`被记录在一个看起来像这样的日志文件中：

> ```
> [2012/04/26 10:39:58] Raw Print Server Startup: PID = 15695
> [2012/04/26 10:39:58] Starting Printer <lpr> on port 515
> [2012/04/26 10:40:01] Receiving Job from ('1.2.3.4', 55070) for Printer <lpr> (Spool File RawPrintJob00001.prn)
> [2012/04/26 10:40:01] Writable return 0
> [2012/04/26 10:40:01] Starting handle_read
> [2012/04/26 10:40:01] begin self.fp.write...
> [2012/04/26 10:40:01] end self.fp.write..
> [2012/04/26 10:40:01] Writable return 0
> [2012/04/26 10:40:02] Writable return 0
> [2012/04/26 10:40:03] Writable return 0
> [2012/04/26 10:40:04] Writable return 0
>                  [[SNIP]]
> [2012/04/26 10:41:39] Writable return 0
> [2012/04/26 10:41:40] Writable return 0
> [2012/04/26 10:41:41] Writable return 0
> [2012/04/26 10:41:42] Starting handle_read
> [2012/04/26 10:41:42] begin self.fp.write...
> [2012/04/26 10:41:42] end self.fp.write..
> [2012/04/26 10:41:42] Writable return 0
> [2012/04/26 10:41:42] Printer <lpr>: Printing Job RawPrintJob00001.prn
> [2012/04/26 10:41:42] Begin sendjob def...
> [2012/04/26 10:41:42] Block written...
> [2012/04/26 10:41:42] done writing blocks...
> [2012/04/26 10:41:42] OK DONE
> [2012/04/26 10:41:42] Starting handle_read 
> ```

至此，作业完成，文件已写入。在下一个作业进入之前，不会记录任何其他内容。如您所见，这需要 1.5 分钟才能完成。

我的问题是：处理一个 1k 文件怎么可能需要将近 2 分钟？这在千兆局域网上都是本地的，所以它必须与代码处理工作的方式有关......我注意到的一件事是打印的工作似乎有很多尾随空格。会不会是它正在寻找 EOF 或其他东西并最终超时？

任何指针表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T16:49:17.290

事实证明，这是在客户端上如何配置打印机的问题。它被设置为 lpr 而不是 RAW。

巧合的是，我遇到了一个 perl 脚本，它与 py 脚本（有点）做同样的事情。使用 perl 脚本，实现相同目标的代码要少得多（我的目标是简单地捕获流并写入文件；rps 比我需要的更冗长）。

这里：

```
#!/usr/bin/perl 
use IO::Socket::INET;
use POSIX qw(strftime);
$print_time = strftime "%Y%m%d-%H_%M_%S", localtime; 
$myport=515; 
$pserve=IO::Socket::INET->new(LocalPort => $myport,Type=>SOCK_STREAM,Reuse=>1,Listen=>1) or die "Socket error: $!\n"; 
while ($pjob=$pserve->accept()) {
    open(J,">>/tmp/printserv/outs/".$print_time.".txt") or print "File open error: $!\n"; 
    while (<$pjob>) { 
        print J "$_"; 
    } 
    close J; 
    close $pjob;
    print  "DONE..."; 
} 
```

# castle-windsor - Castle Windsor - 我应该从其他类中引用容器吗？

> ID：10335852
> 
> 赞同：1
> 
> 时间：2012-04-26T14:47:12.180
> 
> 标签：castle-windsor

我即将开始一个使用 Windsor 的新项目，但我一直想知道是否会遇到 A 类可能需要实例化 B 类的场景，但 Windsor 将 B 类的实例注入到其中是不可行或不可能的它。我正在努力想一个场景，但这里有：

假设我有一个传递给 WCF 服务的业务实体“客户”。此类具有 Ent.Lib 自我验证方法，该方法又使用帮助器类“CustomerValidator”。服务接收到的 Customer 对象已经被 WCF 反序列化，所以 Windsor 不参与它的实例化，所以我不能注入任何依赖项。我也不能将我的 CustomerValidator 传递给自我验证方法，因为它必须遵循 Ent.Lib 的特定签名。那么如何在此类/方法中实例化 CustomerValidator 呢？我仍然想利用 Windsor 而不是简单地做一个“ *var cv = new CustomerValidator();* ”。

这不是一个很好的示例，因为它可以通过不同的方式解决，例如将 Customer 对象传递给验证方法，而不是在 Customer 类中使用验证方法，但它提供了一个可能的讨论场景。

我可以将我的 WindsorContainer 公开为一个公共单例，任何需要它的代码都可以访问它，但这似乎是不受欢迎的。还有其他建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T21:00:42.713

> 我应该从其他类中引用容器吗？

不会。通过引用容器，您向您的类添加了复杂且不必要的依赖项，这将使测试复杂化并增加复杂性。

> 服务接收到的 Customer 对象已经被 WCF 反序列化，所以 Windsor 不参与它的实例化，所以我不能注入任何依赖项。

我认为这是您应该走的方向，尝试探索是否真的没有任何方法可以控制反序列化，以便您可以注入依赖项。

~~如果失败，请考虑使用[http://commonservicelocator.codeplex.com/](http://commonservicelocator.codeplex.com/)。其 Microsoft 的服务位置实施与 Windsor 适配器可用。它基本上与您引用容器的模式相同，但您不引入对特定容器实现的依赖。另外我认为模拟测试会更容易。~~

# android - Android：如何与另一个应用程序集成？

> ID：10335854
> 
> 赞同：3
> 
> 时间：2012-04-26T14:47:21.730
> 
> 标签：android

我有一个付费的 android 应用程序，它使用 google LVL 代码对用户进行身份验证。

一家公司想付钱给我，以便他们的应用程序可以包含我的应用程序的免费版本。但是，我不确定如何以一种不会导致我的应用程序容易被盗版的方式来实现这一点。以下是我正在考虑的一些实现选项，但它们似乎都不是特别好的想法。有什么建议么？

1.  我向他们提供了一个不使用 LVL 代码的 apk。然后他们可以将我的 apk 与他们的应用程序打包在一起，并使用 ACTION_VIEW 意图安装它。这似乎是个坏主意，因为我认为某些 rouge 用户提取我的不安全 apk 并分发它并不是特别困难。

2.  也许我可以构建一个版本来检查他们的应用程序是否已安装，如果是，它会查询他们的应用程序以获取某种解锁代码。只有当此解锁代码成功时，应用程序才会运行。我对此的主要担忧是我不知道“查询另一个应用程序”是否可以完成解锁代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T14:57:40.837

这绝对是可以实现的。如前所述，查询应用程序的一种方法是使用内容提供程序。如果您担心安全性，您可以引入额外的权限，这两个应用程序必须拥有访问提供程序的权限。尽管由于怀疑两个应用程序具有相同的签名，所以它不会那么有效。

另一种方法是，如果他们有您可以绑定并请求代码或任何其他身份验证的服务。在这种情况下，他们的服务还可以通过查询您的应用程序 userId 并通过 PackageManager 检查签名来验证您的应用程序的有效性。

可悲的是，无论如何要防止盗版您的应用程序几乎是不可能的。即使使用 LVL ......因为所有这些都可以被反编译并最终被破坏。但至少你可以让攻击者的生活更加艰难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:57:46.920

对于您要执行的操作，我将从您的项目中创建一个 jar 并将其标记为库项目。这样，您可以将您的应用程序提供给您的客户，但他们将无法看到您编写的实际代码。使用这种方法，他们将能够直接调用任何方法，这比与 apk 交互更容易。

# visual-studio-2010 - VS2010 不会为 msdeploy 包生成应用池名称参数

> ID：10335856
> 
> 赞同：2
> 
> 时间：2012-04-26T14:47:30.513
> 
> 标签：visual-studio-2010, parameters, msdeploy, application-pool, webdeploy

我正在使用 VisualStudio 2010 为 Web 应用程序生成 Web 部署包。我在发布设置中启用了“包括应用程序池选项”。

因此，从 VS 2010 在我的 Windows 7 PC 上构建 web 包后，我得到了带有所有附加文件的 web 包，并且在 .SetParameters.xml 文件中有“IIS Web 应用程序池名称”参数来指定应用程序池名称部署包时。在包 archive.xml 文件中有应用程序池配置。

问题在于 Server 2008 R2 构建服务器 - 当我从 VS 2010 构建 Web 包时，.SetParameters.xml 文件中没有“IIS Web 应用程序池名称”参数，但包的archive.xml 文件具有应用程序池配置并且在部署时Web 包应用程序池是使用默认名称创建的。

问题是 -

应用程序池配置如何在包中但没有“IIS Web 应用程序池名称”参数？

也许在服务器上安装 Msdeploy 或 VS2010 有什么问题？

如何在 VS2010 中声明此参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T07:05:06.367

我终于解决了这个问题。

问题在于 Visual Studio 安装 - 在我的开发 PC 上安装了 VS 2010 SP1，在其他 PC 上安装了 VS2010。

在其他 PC 上安装 VS 2010 SP1 更新后，程序包已正确生成，并且在 SetParameters 文件中带有“IIS Web 应用程序池名称”参数。

# android - Ksoap for android 无法创建好的soapEnvelop

> ID：10335858
> 
> 赞同：1
> 
> 时间：2012-04-26T14:47:40.590
> 
> 标签：android, soap, android-ksoap2

我想要的肥皂是这样的：

```
<int:userId>......</int:userId> 
```

这是在 SoapUI 中测试的，因此我得到了正确的响应。Ksoap 做的是这样的：

```
<userId i:type="n0:undefined" xmlns:n0="http://namespace.com">.....</userId> 
```

如果我将此代码粘贴到 SoapUI 的位置，我会收到错误消息

```
'<Message>Error in line 5 position 88\. Element 'http://namespace.com:
 userId'  
 contains data of the 'http://namespace.com:undefined' data contract.
 The deserializer has no knowledge of any type that maps to this contract. 
 Add the type corresponding to 'undefined' to the list of known types - 
 for example, by using the KnownTypeAttribute attribute or by 
 adding it to the list of known types passed to DataContractSerializer.
 </Message> 
```

也许我在寻找解决方案的错误方向，但我现在在问如何让 ksoap 省略该`i:type`部分。如果有人可以提供不同的解决方案，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T23:20:51.393

KSoap 确实倾向于将自己的命名空间插入到每个标记中，这可以提供您所看到的输出。

我有一个类似的问题，使用以下方法很容易解决：

```
envelope.implicitTypes = true; 
```

另请查看[有关 SO 的其他问题](https://stackoverflow.com/questions/5410006/using-addmapping-without-the-itype-attribute-in-ksoap2-for-android)。

# python - 在 xUbuntu 上安装 Python 2.7.3

> ID：10335864
> 
> 赞同：1
> 
> 时间：2012-04-26T14:48:06.147
> 
> 标签：python

我下载了python源代码。当我进行配置时，一切都很好，但是当我进行配置时，它说找不到 Tcl/Tk 库。我在哪里可以找到 python 所需的所有包？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:02:20.507

在构建 Python 之前，查看 Ubuntu包的[DSC 文件](http://archive.ubuntu.com/ubuntu/pool/main/p/python2.7/python2.7_2.7.2-5ubuntu1.dsc)`python2.7`以找到它们。`Build-Depends``apt-get install`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T14:50:38.870

[http://www.tcl.tk/software/tcltk/download.html](http://www.tcl.tk/software/tcltk/download.html)

每次我需要它时，这都有效。确保阅读`INSTALL`和/或`README`文件，因为我记得它有一些非标准的安装方法......

# jenkins - 我的 Jenkins confluence 发布插件不起作用

> ID：10335868
> 
> 赞同：0
> 
> 时间：2012-04-26T14:48:26.400
> 
> 标签：jenkins, publishing, confluence, jenkins-plugins

我的开发基础设施有点问题。我有一个 Jenkins CI，我想使用 Jenkins Confluence 发布插件在 wiki 页面上发布工件。我已按照[插件主页](https://wiki.jenkins-ci.org/display/JENKINS/Confluence+Publisher+Plugin)中的所有步骤操作，但它不起作用。所有配置都已经过验证（凭据等）......但仍然无法正常工作。Jenkins 甚至会自动检查提供的凭据是否正确以及是否可以访问目标 Confluence 页面。

相反，在构建之后我有以下错误：

```
BUILD SUCCESSFUL
Total time: 15 seconds
Archiving artifacts
[confluence] Unable to locate page: ARTIFACT/App+Artifact+Page.
[confluence] Check that the page still exists.  If the Space and/or Page name contain build-time parameters, check that the parameter(s) are set to the proper value(s).
Finished: SUCCESS 
```

ARTIFACT 是空间名称，App Artifact Page 是页面名称。

任何帮助将不胜感激在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-15T13:35:17.813

问题在于页面名称中的那些优点。因此，当您的页面名称是`Page Names With Pluses`网络浏览器中的 url 时，会显示：

```
http://confluence.example.com/display/Space/Page+Names+With+Pluses 
```

**不要把**这些优点放在 Jenkins 的配置中，但**把** `Page Names With Pluses`它放进去，它就会起作用。

# mvvm-light - MVVM-Light 模板不会出现在 VS2010-Express 中

> ID：10335879
> 
> 赞同：3
> 
> 时间：2012-04-26T14:48:52.330
> 
> 标签：mvvm-light

我刚刚使用 VS2010-Express 在 XP SP3 上安装了 MVVM-LightV4 beta 1/4.0.2.19。创建新项目时没有出现 MVVM-Light 项目模板。我看了[Mvvm Light 和 Visual C# Express？](https://stackoverflow.com/questions/7776946/mvvm-light-and-visual-c-sharp-express)但这没有帮助。此版本的 MVVM-Light 是否不适用于 VS2010-express？有什么建议么？PS 这似乎是一个已知问题 - 请参阅[http://mvvmlight.codeplex.com/workitem/7559?ProjectName=mvvmlight](http://mvvmlight.codeplex.com/workitem/7559?ProjectName=mvvmlight)

# php - 将 javascript 输入转换为 php-string

> ID：10335881
> 
> 赞同：-2
> 
> 时间：2012-04-26T14:48:53.087
> 
> 标签：php, javascript

我发现这个用于进行预览的脚本有点类似于在 stackoverflow 上使用的脚本。当用户输入帖子时，我希望它在预览中显示之前被转换为 php 字符串。这将是为了使用 mysql_real_escape_string 以及其他东西。

如何在显示之前将其变成 php 字符串？在我逃脱了字符串之后，知道如何让它再次显示也是非常好的。

它包含本质上包含这两个部分的代码

1

```
<script type="text/javascript">
    function preview(field) {
        var p = document.getElementById('input_exercise');
        p.innerHTML = field.value;
    }

</script> 
```

2

```
<textarea style="width:500px; height:150px;" onkeypress="preview(this);"></textarea>
<p id="input_exercise"></p> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T21:22:21.660

我认为有一点混淆。许多开发人员一开始并不理解 javascript 是在客户端呈现的，而模板（在您的情况下是 php 代码）是在服务器端呈现的。

这是什么意思？

这意味着服务器正在运行向浏览器输出和 HTML 字符串的 php 代码。此 HTML 字符串包含带有 javascript 的脚本段。一旦 php 代码完成，代码就会离开服务器并通过网络传输到浏览器。一旦到达浏览器，浏览器就不知道是哪个代码生成了 HTML。它也可以是静态资源。

为了在用户输入上运行 php 代码，用户输入必须返回服务器。为了向用户显示任何代码输出，输出必须从服务器返回到浏览器。

此往返以两种方式之一完成。第一个是表单，刷新整个页面（不适合这种情况）。另一个是AJAX。

AJAX 是一种将小块信息发送到服务器，在服务器端呈现它们，并在呈现为 javascript 函数后将它们取回的方法。这有点像将 textarea 输入转换为“php 字符串”。实际发生的是 - 您将文本区域输入发送到服务器，服务器将呈现一个 php 模板（在其中它会简单地对数据操作“mysql_real_escape_string”函数），呈现的结果将返回到一个 javascript回调，然后你可以在“预览”div中取悦它。

这是我找到的关于使用 jquery 的 ajax 和 php[的很酷的教程。](http://www.queness.com/post/328/a-simple-ajax-driven-website-with-jqueryphp)（使用jQuery）

希望这可以帮助。

javascript 代码应如下所示

```
$.ajax({ 'url' : '/render-string-for-preview', 
          'type':'post',
          'data' : { 'text' : $("textarea").val() },
          'success' : function(result) {  $("#input_excercise").html( result ) }
       }); 
```

你应该在“/render-string-for-preview”上添加一个资源，它只会做类似的事情（不是 php 开发人员......）

```
 <?  mysql_real_escape_string ( POST["text"]) ?> 
```

就是这样......

# javascript - 来自快速输入的ajax onkeyup事件501

> ID：10335883
> 
> 赞同：1
> 
> 时间：2012-04-26T14:48:55.740
> 
> 标签：javascript, asp.net, ajax, xmlhttprequest, onkeyup

在 Javascript 方面，我为事件的文本注册了一个事件侦听`<input>`器`onkeyup`。

每次触发事件时，都会调用一个函数来创建一个`xmlhttprequest`对象，该对象将输入`value`作为 url 编码`POST`变量传递给请求。

请求页面是一个`aspx`脚本，它接受 post 变量，对其进行一些处理，并将处理后的输入作为参数添加到 MS SQL 查询中。执行查询产生的结果集被放入转换为 XML 的 a中，然后通过 XSLT 转换为 XHTML，然后通过注入方法`dataset`插入到进行 ajax 调用的页面中。`innerHTML`

如果您到目前为止一直关注我，结果是在 MS SQL 数据库上进行全文搜索，该数据库会为每个密钥版本生成结果。值得一提的是，我使用的是 MS SQL 2005 和 IIS6.0。

该系统似乎运行良好，除了一个测试用例。那就是当有人尽可能快地输入输入时，服务器最终会`501 internal server errors`为每个请求返回。几分钟后，它似乎会自行“修复”并再次正常运行。我无法从 IIS 中获得有关这些内部错误的任何有用信息。

现在这只是猜测，但我的第一个假设是，要么有太多未完成的同时打开的请求，要么在短时间内发出了太多的请求。

我最初的想法是创建一个*队列*，`xmlhttprequests`一次只打开一个。

但是，我尝试了这个，而不是队列：

每个`onkeyup`：

1.  调用生成`abort`的最后一个`xmlhttprequest``onkeyup`
2.  为此创建一个新`xmlhttprequest`的`onkeyup`

此过程似乎可以消除该问题。

我无法做的是确定这个问题的根本原因：它是服务器限制吗？还是浏览器限制？是否有其他方法可以在不需要此中止程序的情况下解决此问题？

如有必要，我可以发布代码，但代码非常冗长，并且该项目中使用了许多技术，所以我不确定它是否真的能帮助任何人回答这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:03:24.283

你可能想看看去抖动。

[http://ajaxian.com/archives/debounce-your-javascript-functions](http://ajaxian.com/archives/debounce-your-javascript-functions)

# r - 在 R 中，如何在 ggplot2 中使用 scale_size 时使点透明？

> ID：10335893
> 
> 赞同：7
> 
> 时间：2012-04-26T14:49:36.130
> 
> 标签：r, google-maps, ggplot2, visualization, ggmap

这个等式来自我[之前的问题](https://stackoverflow.com/questions/10302195/plotting-google-map-with-ggplot-in-r)。我想绘制代表总人口的点，到目前为止，我曾经`scale_size`使点的大小相对于其总人口。

但是，我想让这些点透明，因为这些点覆盖了地图。但是，只要我试图发送的信息是明确的，我愿意接受其他选择。 ![在此处输入图像描述](../Images/37c6db4c08dcd90dc17d5a78aaff0fd9.png)

```
# load required packages
library(ggmap)
library(ggplot2)

# query map of Birmingham, AL
al1 <- get_map(location = c(lon = -86.304474, lat = 32.362563), zoom = 11,
       source = "osm", maptype = 'terrain')

al1MAP <- ggmap(al1)+ geom_point(data=quote_bmh, 
          aes(x=IntPtLon, y=IntPtLat, size=TotPop, colour="gold2"),
          colour="gold2") + scale_size(range=c(0,15)) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-26T14:51:43.333

要使用统一的透明度，只需添加`alpha = 0.3`到`geom_point`. `alpha`可以介于 0 和 1 之间，具体取决于您想要的透明度。如果你想让你的透明度依赖于一个变量，只需添加`alpha = var_name`到`mapping`参数（`aes`位），其中`var_name`是你想要用于透明度的变量的列名。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-26T18:04:53.383

另一种选择是使用空心点，例如`geom_point(shape = 21)`。这将使点正下方的地图非常易读，同时使点的边缘清晰可见。

（不幸的是，我的雇主阻止了 Google API，所以我无法发布结果）

# sql-server - SQL Server 错误无法打开数据库

> ID：10335898
> 
> 赞同：1
> 
> 时间：2012-04-26T14:49:48.530
> 
> 标签：sql-server, database

嘿，伙计，抱歉又打扰你了=P。今天，我们接到了一项任务...... ¬¬' 我们的系统与 SQL Server 集成在一起工作。有两个数据库。主要的，另一个“负责”做一些数据集成的工作……有一天，老板决定不再使用第二个数据库，并命令团队创建一个修复应用程序，取消这些数据库的链接。但是在我们的一个客户中，SQL Server 给出了一条错误消息：

-[Microsoft][ODBC SQL Server Driver][SQL Server] 无法打开数据库“XXX”，因为文件不可访问或内存或磁盘空间不足。

我检查了磁盘空间，没问题。内存量还可以。并且数据库文件不再存在于 SQL 数据文件夹中（就像我们预期的那样，老板也希望如此）。

如果在 sql server 中有引用，则可能会出现此错误，但数据库不再附加，主数据库中的表 'sysdatabases' 没有引用数据库...

有人可以提供线索吗？我以前感谢任何帮助。=)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:57:34.720

在我看来，客户端正在运行旧版本的代码，它仍在尝试连接到已取消链接的数据库。

# c++ - 指向同一类类型设计可行性的指针向量

> ID：10335899
> 
> 赞同：2
> 
> 时间：2012-04-26T14:49:50.060
> 
> 标签：c++, pointers, vector, linked-list

如果我想要一个类，它有一个指向其他相同类型的类的指针向量，可以允许循环循环，它有多危险？例如，假设我有一个如下所示的文本文件：

```
city=Detroit
{
    sister=Toyota
    sister=Dubai
    ...
}
... 
```

首先，该文件被读入一系列临时类 ParsedCity，其中保存了城市名称和姐妹城市的名称。在我拥有文件中的所有城市之后，我创建了实际的 City 类。

```
class City
{
    private:
        std::string name;
        std::vector<City*> sisterCities;
    public:
        City(const std::string& aName);
        CreateRelations(const ParsedCity& pcs); 
        std::string Name() const { return name; }
};

//If this were to represent Detroit, pc would contain a vector of strings
//containing Toyota and Dubai.  Cities contain the actual classes that sister
//cities should point to.  It holds all cities of the world.
City::CreateRelations(const ParsedCity& pc, std::vector<City>& cities)
{
    for (unsigned int i = 0; i < pc.ParsedSisterCities().size(); i++)
    {
        for (unsigned int j = 0; j < cities.size(); j++)
        {
            if (pc.ParsedSisterCities()[i] == cities[j].Name())
            {
                sisterCities.push_back(&cities[j]);
                break;
            }
        }
    }
} 
```

我担心的是，如果更多城市被推入主 City 向量中，该向量将重新调整大小，重新定位到其他地方，并且我所有的 Cities 都将指向悬空指针的姊妹城市。至少这是我的想法，基于我对向量类的了解。如果世界上所有的城市和姐妹城市都存储在一个链表中，这会解决我的问题吗？我想要一个保证，一旦一座城市建成，它就不会移动（在记忆中。糟糕的双关语？）

这对我来说似乎是一个棘手的问题。就好像我称底特律为姐妹城市，我可以称它为姐妹城市，等等。然后我最终可以回到底特律！如果托皮卡将其名称更改为谷歌，托皮卡的所有姐妹城市都应该自动知道（因为它们都指向托皮卡所在的记忆中的同一地点）。

任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T14:53:29.597

如果您有一个指针向量，并且向量调整大小，则内存中的指针位置不受影响，因此您的所有指针都保持有效。

此解决方案的最大问题是，您应用于数据结构的任何递归算法都必须具有某种机制来检测循环，否则您将由于无限递归而最终导致堆栈溢出。

**编辑：**

我刚刚意识到我最初误读了你的问题。如果`cities`-vector 调整大小，任何指向其元素的指针都将变为无效。最好的选择是在该向量中存储指向城市的指针。为了使这更易于管理，我建议您使用[`boost::ptr_vector`](http://www.boost.org/doc/libs/1_49_0/libs/ptr_container/doc/ptr_vector.html). 这样做的好处是，即使您从向量中删除了一个城市，或者您对向量中的城市重新排序（例如，如果您想按名称对它们进行排序以便更快地查找），指向城市的指针仍然有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:54:32.290

> 这对我来说似乎是一个棘手的问题。就好像我称底特律为姐妹城市，我可以称它为姐妹城市，等等。然后我最终可以回到底特律！

That's a "circular reference". This is not necessarily a problem in C++, since objects are `deleted` manually. However, it may introduce complications in your design, as you percieve.

# mysql - 如何将 DataTable 传递给 Mysql

> ID：10335900
> 
> 赞同：0
> 
> 时间：2012-04-26T14:49:51.010
> 
> 标签：mysql, vb.net, winforms

我有一个使用 .Net 驱动程序连接到 Mysql 的 winforms 应用程序。我编写了一个类来处理所有数据库功能。我使用数据表来存储查询结果，以便从 mysql 进行绑定。

```
Imports MySql.Data.MySqlClient
Imports System.IO

Public Class MysqlConSjC

Private conn As MySqlConnection
Private connStr As String
Public strace As String
Private status As Integer

'status member variable for connectivity. 0 for success, 
'value of one indicates db connection error
'value of 2 indicates query failure

Private comd As MySqlCommand
Private adpter As MySqlDataAdapter
Private dta As DataTable

Public Sub Query(ByVal SQl As String)

    Try
        comd.Connection = conn
        comd.CommandText = SQl
        adpter.SelectCommand = comd
        adpter.Fill(dta)
        status = 0

    Catch ex As MySqlException
        strace = ex.StackTrace()
        DisconnectMysql()
        status = 2

    End Try
   End Sub 
```

此方法执行选择查询。我将如何编写一种方法来插入/更新/删除数据库中 DataTable 的行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T14:56:32.250

如果提供者能够为给定命令创建更新语句（UPDATE、INSERT、DELETE），那么我相信您可以[`Update`](http://msdn.microsoft.com/en-us/library/system.data.common.dataadapter.update.aspx)在对 DataTable 进行更新后简单地调用数据适配器上的方法。

```
adapter.Update(dta) 
```

DataTable 对象跟踪对其自身所做的更改。然后，数据适配器对象使用该信息来确定要运行哪些 SQL 语句（UPDATE、INSERT、DELETE）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T23:40:32.237

做了最明智的事。我切换到绑定源控制并使用 tableAdapters 进行更新。像我这样的类在不需要数据网格视图的情况下工作

# vb.net - 类型类在哪里？

> ID：10335904
> 
> 赞同：4
> 
> 时间：2012-04-26T14:50:01.120
> 
> 标签：vb.net

我刚开始学习vb.net。但我找不到 System.Type 类在哪里。我用谷歌搜索，但找不到任何答案。这是我所做的：

```
Module m
Sub Main(ByVal e as String())
Dim ass as Assembly = Assembly.LoadFrom(e(0))
Dim assobj as Type() = ass.GetTypes()
For Each m As Type In assobj
Console.WriteLine(m.Name)
next 
```

我将目录更改为 C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727> 并提供 System.dll 作为参数但我找不到 Type 类

那么，Type 类在哪里？

如果有什么不对的，请忽略我的无知。谢谢你。

再次您好，我遇到了另一个问题，我上面提到的整个事情是关于制作一个类似于 java 的 javap.exe 实用程序的控制台应用程序

如果你给类全名作为参数，那么它应该打印关于类的大量信息。

问题是 - 我如何知道要加载哪个 .dll 文件取决于我作为输入提供的类名？？？（这就是我期望 System.Type 会在 System.dll 文件中的原因）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T15:03:38.000

我用ILSpy（免费工具）来看看。它在 mscorlib.dll 中

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T15:30:18.170

就像 Michal 和 Lister 先生所说的那样，它位于 mscorlib.dll 中。

我发现它的方式不同，如果拿你的代码

```
Dim assobj as Type() = ass.GetTypes() 
```

并右键单击“类型”并按“转到定义”（快捷键 F12）

VB.net 和 C# 的默认显示略有不同。（无论如何对我来说）

对于 VB.Net：

你会看到对象浏览器，你会注意到类型是系统的成员
![对象浏览器中的类型定义](../Images/aee307b50e49813315493e24049238f3.png)

如果单击 System，您会注意到它是 mscorlib 的成员。如果单击 mscorlib，则可以看到 DLL 的实际存储位置。

![对象浏览器中的系统定义](../Images/d5477b0673dfb082b4dd90728c8724ad.png)

* * *

如果您使用的是 C#，那么您将看到：

```
#region Assembly mscorlib.dll, v4.0.30319
// C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\Profile\Client\mscorlib.dll
#endregion

using System.Diagnostics;
using System.Globalization;
using System.Reflection;
using System.Runtime;
using System.Runtime.InteropServices;
using System.Security;

namespace System
{
    // Summary:
    //     Represents type declarations: class types, interface types, array types,
    //     value types, enumeration types, type parameters, generic type definitions,
    //     and open or closed constructed generic types.
    [Serializable]
    [ClassInterface(ClassInterfaceType.None)]
    [ComDefaultInterface(typeof(_Type))]
    [ComVisible(true)]
    public abstract class Type : MemberInfo, _Type, IReflect
    {
        //snip
    }
} 
```

# ruby-on-rails - 如何从 Ruby 上的数据库中读取数据

> ID：10335907
> 
> 赞同：0
> 
> 时间：2012-04-26T14:50:13.890
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

```
def add
    if params[:note_add] == "Add"
      Note.create({:user_id => @user["id"], :note_type => params[:type], :text => params[:note_text], :lng => params[:lng], :lat => params[:lat]})
    end
  end 
```

我是 Ruby on Rails 的新手，我正在尝试从数据库中获取数据。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:55:43.900

如果您使用的是 MySQL、Postgres 或其他关系数据库，您应该使用 RoR 带来的 Active Record。它是一个 ORM，提供了许多与 DB 交互的功能，而且您似乎已经在使用它了。要查询数据，请查看指南上的此页面。 [http://guides.rubyonrails.org/active_record_querying.html](http://guides.rubyonrails.org/active_record_querying.html)

一些例子

```
Note.find(1) #get note with id=1
Note.find_by_note_type("sometype") #gets first found with note_type="sometype" (I think so)
Note.where("note_type = ?", "sometype") #gets all notes that have note_type="sometype" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:59:33.353

有很多方法可以做到这一点......您可以查看[https://github.com/ryanb/railscasts-episodes/tree/master/episode-216](https://github.com/ryanb/railscasts-episodes/tree/master/episode-216)它是[http://railscasts.com/episodes/216的来源-generators-in-rails-3](http://railscasts.com/episodes/216-generators-in-rails-3)轨道铸造。在那里，您可以看到使用脚手架使用您的数据如何轻松地生成 CRUD 操作。它将帮助您理解 Rails 的主要思想。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T15:01:49.320

`Note.find()`或者`Note.all`

假设您已经创建了`Note`模型。在控制台中试一试`rails console`

# java - 编写一个 jar 文件实用程序

> ID：10335912
> 
> 赞同：4
> 
> 时间：2012-04-26T14:50:30.973
> 
> 标签：java, jar

我正在编写一个实用程序 jar 文件以共享到多个项目中。基本上它处理建立数据库连接并进行计算，然后返回值。其他项目将导入我的 jar 文件并调用我的函数。

现在，当我尝试调用 jar 文件中的一个函数时遇到问题。在 eclipse 中没有编译错误，但是当我在应用服务器上测试它时，我收到了这个错误

```
22:16:35,177 DEBUG ExecutionContext:187 - Transitioning to lifecycle stage RequestComplete
22:16:35,178  WARN DefaultExceptionHandler:94 - Unhandled exception caught by the Stripes default exception handler.
net.sourceforge.stripes.exception.StripesServletException: ActionBean execution threw an exception.
    at net.sourceforge.stripes.controller.DispatcherServlet.service(DispatcherServlet.java:183)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at net.sourceforge.stripes.controller.StripesFilter.doFilter(StripesFilter.java:247)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:185)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:151)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:269)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.NoClassDefFoundError: com/my/rnd/test/utils/SimplePing
    at com.app.action.JbpmProcessInstanceActionBean.testTrigger(JbpmProcessInstanceActionBean.java:83)
    at com.app.action.JbpmProcessInstanceActionBean.loadProcInstanceList(JbpmProcessInstanceActionBean.java:72)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source) 
```

我使用 eclipse 导出 jar 文件，这里是 SimplePing 的示例函数

```
public class SimplePing {

     /**
      * @param args
      */
     public  void testSimplePing() {
        // TODO Auto-generated method stub
        System.out.println("This is a simple ping .");
     }

} 
```

似乎应用服务器无法找到我的课程，即使它存在于 jar 文件中。欢迎提供任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:08:09.713

如果您仔细查看错误堆栈，您会看到以下内容：

`Caused by: java.lang.NoClassDefFoundError: com/my/rnd/test/utils/SimplePing`

当您遇到以下情况之一时，这是一个常见错误：

1.  你有一个`jar(s)`缺失的`lib`
2.  你有一些`jar(s)`从你的`classpath`
3.  您的`MANIFEST`文件中缺少一些依赖项：

    `...
    Main-Class: fully.qualified.MainClass
    Class-Path: lib/dependency1-X.Y.jar lib/dependency2-W.Z.jar
    ...`

4.  你有`JDK`问题

最终都连接到同一个问题：缺少 jar（JDK 或第三方相关 jar）
您还可以使用 Maven 插件进行 Eclipse，它将管理您当前项目的依赖关系以及您的项目`jar`所需的依赖关系，当然，如果你喜欢Maven。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T15:09:34.230

这是一个很好的问题

有2种方法我能想到

1.  尝试使用 Maven [（m2e 插件）](http://www.eclipse.org/m2e/) - 这将为您管理依赖项如果您这样做，请记住将**Maven 依赖**项添加到项目**部署程序集**（右键单击 - 属性）

2.  使用部署程序集并添加其他项目

![](../Images/0d12107f03cbd4bab7e5a81f81faa2f2.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T15:19:58.970

使用 7-zip 或 winzip 之类的程序打开 jar，并验证您是否看到此目录结构和其中的文件：com/my/rnd/test/utils/SimplePing.class

# php - PHP foreach 循环 x 次并添加占位符

> ID：10335913
> 
> 赞同：0
> 
> 时间：2012-04-26T14:50:37.267
> 
> 标签：php, loops, foreach

我正在使用 foreach 遍历图像。最多有四个图像，最少有 1 个图像。例如，如果有两个图像（= 两个循环），我想告诉 foreach 他需要再次循环两次并回显一些占位符图片。

这是我的foreach：

```
<?php foreach($users as $k => $v) {?>
<img src="/images/user_<?php echo $k; ?>.jpg" alt="" title="" />
<?php } ?> 
```

输出（两个循环）：

```
<img src="/images/user_0.jpg" alt="" title="" />
<img src="/images/user_1.jpg" alt="" title="" /> 
```

但新脚本应输出：

```
<img src="/images/user_0.jpg" alt="" title="" />
<img src="/images/user_1.jpg" alt="" title="" />
<img src="/images/user_placeholder.jpg" alt="" title="" />
<img src="/images/user_placeholder.jpg" alt="" title="" /> 
```

不要忘记 $users 可能有 x 个条目 (0-4)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T14:53:24.247

用于[`array_fill`](http://php.net/manual/en/function.array-fill.php)根据需要用尽可能多的项目填充数组（因为它们都将是相同的），然后将它们打印出来。

```
<?php foreach($users as $k => $v) {?>
<img src="/images/user_<?php echo $k; ?>.jpg" alt="" title="" />
<?php } ?>

<?php
echo implode('', array_fill(0, count($users), 'placeholder image HTML')); 
```

当然，除了这种可爱之外，您还可以使用在每次迭代`foreach`中打印的另一个。`placeholder image HTML`

**更新：**原来有一个更好的方法：

```
echo str_repeat('placeholder image HTML', count($users)); 
```

PHP 真的有*太多*的功能要记住。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:56:14.713

使用计数器...

```
<?php
$counter = 0; 
foreach($users as $k => $v) {?> 
    <img src="/images/user_<?php echo $k; ?>.jpg" alt="" title="" />
<?php $counter++;  
} 
while{$counter < 4)
{?>
    <img src="/images/user_placeholder.jpg" alt="" title="" />
<?php } ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T14:59:53.790

这应该工作

```
$count = 1;
foreach($users as $k => $v) {
?>
    <img src="/images/user_<?php echo $k; ?>.jpg" alt="" title="" />
<?php 
    $count++;
} 

for ($i = $count; $i <= 4; $i++) {
?>
    <img src="/images/user_placeholder.jpg" alt="" title="" />
<?php 
}  
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T15:06:01.893

```
<?php 
$placeholders = array();
foreach($users as $k => $v) {?>
    <img src="/images/user_<?php echo $k; ?>.jpg" alt="" title="" />
    <?php 
    $placeholders[] = '<img src="/images/user_placeholder.jpg" alt="" title="" />';
} 
foreach ($placeholders as $placeholder){
    echo $placeholder;
} ?> 
```

如您所见，有十几种方法可以给这只猫剥皮。

# c++ - c++11：为什么 std::forward 中的 static_assert 是必要的？

> ID：10335916
> 
> 赞同：4
> 
> 时间：2012-04-26T14:50:41.027
> 
> 标签：c++, c++11, rvalue-reference

在 move.h 中，有两个重载`forward`

```
template<typename _Tp>
constexpr _Tp&&
forward(typename std::remove_reference<_Tp>::type& __t) noexcept
{
    return static_cast<_Tp&&>(__t);
}

template<typename _Tp>
constexpr _Tp&&
forward(typename std::remove_reference<_Tp>::type&& __t) noexcept
{
    static_assert(
        !std::is_lvalue_reference<_Tp>::value,
        "template argument substituting _Tp is an lvalue reference type"
    );
    return static_cast<_Tp&&>(__t);
} 
```

我看到这`static_assert`是为了防止意外地将右值转换为左值。右值版本可以这样实现吗：

```
template<typename _Tp>
typename std::remove_reference<_Tp>::type&&         
forward(typename std::remove_reference<_Tp>::type&& __t) noexcept
{
    return __t;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T15:01:36.920

它可以防止奇怪的事情，例如`std::forward<std::string&>(std::string {})`.

该行为由 §20.2.3p2 规定：

> 如果第二种形式是用左值引用类型实例化的，则程序是非良构的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-26T15:12:11.773

例如，为什么将右值作为左值转发是危险的，请参见[N2951](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2009/n2951.html)的用例C。这个用例展示了这样做如何使创建悬空引用变得容易。

# java - 如何使用 Java Trident 库为 CardLayout 中的面板设置动画？

> ID：10335917
> 
> 赞同：2
> 
> 时间：2012-04-26T14:50:41.443
> 
> 标签：java, swing, animation

我想使用 Java Trident 库来动画屏幕转换。

我有一系列以 CardLayout 排列的面板。在一个面板上单击 JButton 时，将显示一个新面板。我想实现某种淡入动画，而不是让它立即出现。

我已经读过，只需将面板移出屏幕并在我想要转换时更改 x 坐标，就可以实现滑入式动画。

我试过设置一些东西，但我知道我做得不对。我需要调用 cl.show() 来实际显示我想要的面板：

```
CardLayout cl = (CardLayout)(GameContainer.getLayout()); 
screenChangeTimeline = new Timeline(cl);
screenChangeTimeline.addPropertyToInterpolate("layout", "MainMenuPanel", "TwoPlayerPanel");
screenChangeTimeline.setDuration(1500); 
```

GameContainer 是具有 CardLayout 的面板，所有其他面板都位于其中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T17:17:34.000

滑动效果示例 [http://java-sl.com/tip_slider.html](http://java-sl.com/tip_slider.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T18:17:09.707

使用图像创建动画效果可能更容易，而不是面板的实际滑动。捕获您正在隐藏的面板和您将要显示的面板的图像。使用滑动效果为这些图像设置动画。动画完成后，交换实际面板。这是一个演示类似想法的[示例。](http://www.java-forums.org/blogs/ozzyman/1141-simple-frame-transitions-without-complex-code.html)它使用辅助卡来滚动从两个面板组合的图像。

您可能对现成的解决方案 - [Animatingcardlayout](http://java.net/projects/animatingcardlayout)感兴趣。它提供了 CardLayout 的扩展和一组不同的动画。

此外，请查看 Kirill Grouchnikov（Trident 的创建者）的一系列文章 -[动画布局](http://weblogs.java.net/blog/kirillcool/archive/2006/10/animating_layou_4.html)。

# google-maps-api-3 - 多个标记落入一个区域（多边形），我想在 div 面板中列出特定区域中所有标记的数据

> ID：10335921
> 
> 赞同：0
> 
> 时间：2012-04-26T14:51:15.513
> 
> 标签：google-maps-api-3, google-fusion-tables

希望这是有道理的。我将两张表合并在一起，一张包含有关电话交换机及其在英国的具体位置的信息，另一张包含英国的地区信息。我想要做的是，当我滚动或单击一个区域时，我希望能够在我的网页面板上列出属于该区域的所有交易所。在我单击一个区域时，会显示表中的最后一个交易所。我猜这可能是我需要在 addListeners2() 函数中做的简单事情。任何指向正确方向的指针将不胜感激。

```
var map, layer;   
function initialize() 
{

    map = new google.maps.Map(document.getElementById('map_canvas'), {
            center: new google.maps.LatLng(54.54658,-4.87793),
            zoom: 6,
            mapTypeId: google.maps.MapTypeId.ROADMAP
          });
          loadPoint();            
    }  

        function loadPoint() 
        {
           if (layer != null) 
           {
                layer.setMap(null);
                google.maps.event.clearInstanceListeners(layer);
           }
           var tableid = '3569550';
           layer = new google.maps.FusionTablesLayer
           ({
                query: 
                {
                    select: 'LATITUDE',
                    from: tableid
                    //where: 'latitude is not null'
                },

            map: map                
           })
            layer.enableMapTips({
            select: "'REGION','EXCHANGE','MPF','WLR','SMPF','BB_CONNECT'", // list of columns to query, typially need only one column.
            from: tableid, // fusion table name
            geometryColumn: 'LATITUDE', // geometry column name
            suppressMapTips: true, // optional, whether to show map tips. default false
            delay: 100, // milliseconds mouse pause before send a server query. default 300.
            tolerance: 8 // tolerance in pixel around mouse. default is 6.
            });
            addListeners1();
        }

        function loadRegion() 
        {
           if (layer != null) 
           {
                layer.setMap(null);
                google.maps.event.clearInstanceListeners(layer);
           }
           var tableid = '3569550';
           layer = new google.maps.FusionTablesLayer
           ({
                query: 
                {
                    select: 'geometry',
                    from: tableid
                },

            map: map                
           })
            layer.enableMapTips({
            select: "'REGION','EXCHANGE','MPF','WLR','SMPF','BB_CONNECT'",
            from: tableid, // fusion table name
            geometryColumn: 'geometry', // geometry column name
            suppressMapTips: true, // optional, whether to show map tips. default false
            delay: 100, // milliseconds mouse pause before send a server query. default 300.
            tolerance: 8 // tolerance in pixel around mouse. default is 6.
            });
            addListeners2();
        }

        function addListeners1() 
        {
            google.maps.event.addListener(layer, 'mouseover', function(fEvent) 
            {
                var row = fEvent.row;
                myHtml = '<TABLE width = "600" cellspacing="0" cellpadding="0"><TR>';
                myHtml += '<TD><b>REGION</b></TD>';
                myHtml += '<TD><b>EXCHANGE</b></TD>';
                myHtml += '<TD><b>MPF</b></TD>';
                myHtml += '<TD><b>WLR</b></TD>';
                myHtml += '<TD><b>SMPF</b></TD>';
                myHtml += '<TD><b>BB_CONNECT</b></TD></TR><TR>';
                for (var x in row) 
                {
                    if (row.hasOwnProperty(x)) 
                    {
                        myHtml += '<td>' + row[x].value +'</td>';
                    }
                }
                myHtml += '</TR></TABLE>';
                document.getElementById('info').innerHTML = myHtml;
            });
        }

        function addListeners2() 
        {
            google.maps.event.addListener(layer, 'mouseover', function(fEvent) 
            {
                var row = fEvent.row;
                myHtml = '<TABLE width = "600" cellspacing="0" cellpadding="0"><TR>';
                myHtml += '<TD><b>REGION</b></TD>';
                myHtml += '<TD><b>EXCHANGE</b></TD>';
                myHtml += '<TD><b>MPF</b></TD>';
                myHtml += '<TD><b>WLR</b></TD>';
                myHtml += '<TD><b>SMPF</b></TD>';
                myHtml += '<TD><b>BB_CONNECT</b></TD></TR><TR>';
                for (var x in row) 
                {
                    if (row.hasOwnProperty(x)) 
                    {
                        myHtml += '<td>' + row[x].value +'</td>';
                    }
                }
                myHtml += '</TR></TABLE>';
                document.getElementById('info').innerHTML = myHtml;
            });
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T13:56:05.273

我找到了解决办法！！！

```
function loadRegion() 
{
    if (layer != null) 
    {
        layer.setMap(null);
        google.maps.event.clearInstanceListeners(layer);
    }
    layer = new google.maps.FusionTablesLayer
    ({
        query: 
        {
            select: 'geometry',
            from: tableid
        },
        map: map                
    })
    google.maps.event.addListener(layer, 'click', function(e) 
    {
        if (e && e.row && e.row["REGION"]) 
        {
            query4infowindowData(e.row["REGION"].value);
            infowindow.setPosition(e.latLng);
        } 
        else 
        {
            alert("no row:"+e.latLng);
        }
    });
}
function query4infowindowData(term) 
{
    var queryText = "SELECT 'REGION', 'EXCHANGE', 'MPF', 'WLR', 'BB_CONNECT', 'SMPF' FROM "+tableid+" WHERE 'REGION' = '"+term+"';";
    var encodedQuery = encodeURIComponent(queryText);
    var query = new google.visualization.Query('http://www.google.com/fusiontables/gvizdata?tq='  + encodedQuery);
    query.send(openInfoWindow);
}
function openInfoWindow(response) 
{
    if (!response) 
    {
        alert('no response');
        return;
    }
    if (response.isError()) 
    {
        alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
        return;
    } 
    FTresponse = response;
    numRows = response.getDataTable().getNumberOfRows();
    numCols = response.getDataTable().getNumberOfColumns();
    var dataTable = response.getDataTable();
    var contents = "REGION: <u><b>"+dataTable.getValue(0,0)+"</b></u><br><table border='1'><tr><th>#</th><th>EXCHANGE</th><th>MPF</th><th>WLR</th><th>BB_CONNECT</th><th>SMPF</th></tr>";
    for(i = 0; i < numRows; i++) 
    {
        contents += "<tr><th>"+i+"</th><td>"+dataTable.getValue(i,1)
            +"</td><td>"+dataTable.getValue(i,2)
            +"</td><td>"+dataTable.getValue(i,3)
            +"</td><td>"+dataTable.getValue(i,4)
            +"</td><td>"+dataTable.getValue(i,5)
            +"</td></tr>";
    }
    contents += "</table>";
    document.getElementById('info').innerHTML = contents;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T17:30:08.097

我不熟悉[Fusion Tips](http://gmaps-utility-gis.googlecode.com/svn/trunk/fusiontips/docs/reference.html)实用程序库，但文档显示它不支持 where 子句。哪种有意义。工具提示将与单个点或多边形相关联。您需要一个 where 子句，即选择交换 where region = XXX。

我会尝试 google.visualization 库，它允许您执行这样的查询，或者您可以使用允许相同的 Fusion Table JSONP API。[这里](https://stackoverflow.com/a/10211253/1211981)有一个可视化示例，有点不同，但可以修改以处理您想要做的事情。

# javascript - jsf h:inputText 组件出现基于javascript？

> ID：10335927
> 
> 赞同：1
> 
> 时间：2012-04-26T14:51:39.507
> 
> 标签：javascript, jsf, components

我需要根据 javascript 测试条件是否为真在网页上显示一个 jsf h:inputText 组件。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T14:58:11.350

只需让 JSF 使用`display`最初设置为的 CSS 属性渲染它，`none`并让 JavaScript 将其切换为`block`.

例如

```
<h:inputText id="inputId" styleClass="hide" /> 
```

有了这个 CSS

```
.hide {
    display: none;
} 
```

而这个 JS

```
if (someCondition) {
    document.getElementById("formId:inputId").style.display = "block";
} 
```

您只会在输入处理和转换/验证方面遇到问题。此输入字段**始终**提交给服务器，即使仍被 CSS 隐藏。更好的是在 JSF 中评估该条件，以便您可以使用 JSF 组件的`rendered`属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:56:54.673

您可以根据您的 javascript 条件将其隐藏在页面上。就像是`$('.class-of-input').hide();`

# actionscript-3 - 火花标签栏中的itemclick事件？

> ID：10335929
> 
> 赞同：0
> 
> 时间：2012-04-26T14:51:43.350
> 
> 标签：actionscript-3, apache-flex, flex4, flex4.5

你好标签栏支持项目点击事件。但是 spark tabBar 不支持 itemClick 事件。

有没有办法在 SPARK TABBAR 中监听 itemclick 事件

谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:03:45.610

从 ListBase 继承的 Spark 组件不再调度 ItemClick 事件。不过，您可以使用 [IndexChangeEvent](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/events/IndexChangeEvent.html)事件。它有一个属性`newIndex`可以告诉您哪个是新选择的项目（或在这种特殊情况下的选项卡）。

```
<s:TabBar dataProvider="{dp}" change="trace('selected: ' + event.newIndex)" /> 
```

与旧的 ItemClick 的一大区别是，仅当所选项目实际更改时（而不是单击它时）才调度此事件。如果您真的想要返回 ItemClick 的行为，您可以创建一个调度 ItemClick 事件的自定义 ItemRenderer。

* * *

如果您想对每次点击做出反应，有几种方法。这是其中的两个：

1./ 创建一个调度 ItemClick 事件的自定义 ItemRenderer。

.

```
public class TabBarButton extends ButtonBarButton {

    override public function initialize():void {
        super.initialize();
        addEventListener(MouseEvent.CLICK, fireItemClick);
    }

    private function fireItemClick(event:MouseEvent):void {
        owner.dispatchEvent(new ItemClickEvent(
            ItemClickEvent.ITEM_CLICK, false, false, null, itemIndex, null, data
        ))
    }

} 
```

您现在可以像这样使用它：

```
<s:TabBar id="tabBar" dataProvider="{dp}" 
          itemRenderer="net.riastar.TabBarButton" />

tabBar.addEventListener(ItemClickEvent.ITEM_CLICK, onItemClick); 
```

2./ 另一种方法是只监听 TabBar 上的任何点击事件并使用 event.target 来查找被点击的标签：

```
<s:TabBar dataProvider="{dp}" click="trace(event.target)" />
//traces tabBar.TabBarSkin1.dataGroup.TabBarButton1 
```

请注意，这是对您问题的直接回答，但实际上我认为您不应该这样做。在大多数情况下，IndexChangeEvent.CHANGE 就可以了。

# ruby-on-rails-3 - 如何在 Rails 3 的 application_helper 文件中测试辅助方法？

> ID：10335933
> 
> 赞同：0
> 
> 时间：2012-04-26T14:52:01.697
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.2

我的 application_helper.rb 文件：

```
module ApplicationHelper
  def option_text(option_id)
    Option.find(option_id).title
  end
end 
```

我在哪里测试这个方法？Rails 在我创建脚手架时会生成帮助程序测试文件，但是我应该在哪里对这个方法进行测试，因为它在 Application Helper 中？我曾尝试将测试放在使用脚手架生成的视图助手测试文件之一中，但找不到上述方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:09:19.487

在 test/unit 下添加一个名为“helpers”的文件夹，然后像这样创建您的帮助测试文件：

```
# application_helper_test.rb
require File.dirname(__FILE__) + '/../../test_helper'
require 'action_view/test_case'

class ApplicationHelperTest < ActionView::TestCase
  test 'option_text' do
    assert true
  end
end 
```

这里还有一些关于测试助手的有用提示：http: [//technicalpickles.com/posts/helper-testing-using-actionview-testcase/](http://technicalpickles.com/posts/helper-testing-using-actionview-testcase/)

# javascript - 为 jQuery 和 knockout.js 生成 javascript 代码以成为可重用模块

> ID：10335936
> 
> 赞同：0
> 
> 时间：2012-04-26T14:52:12.327
> 
> 标签：javascript, jquery, module, twitter-bootstrap, knockout.js

我正在尝试构建一个非常具体的模块，该模块集成了 Twitter bootstrap（用于选项卡）、jQuery（用于简化开发）和用于客户端视图模型的 knockout.js。这个想法是我有一个 HTML 页面，其中定义了 3 个 div。每个 div 都是一个选项卡，在特定时间只有一个 div 可见。当显示一个 div 时，它应该在一个作用域为选项卡的 knockout.js 视图模型上调用一个加载方法，并从服务器重新加载数据。

我编写了以下代码（有效），但是它非常特定于我的应用程序中的特定选项卡。

```
// only configure this once the DOM is ready for processing.
// this code snippet is very long winded and quite a hack, however it allows the content of a bootstrap.js
// tab to be reloaded when the tab is made visible. It does this by calling the LoadCategory() method on the
// knockout.js view model.
//
// it is also worth noting that the view model is bound using knockout to only descendents of the div that contains
// the tab contents. This is to ensure that we can have several knockout view models in one page without needing to
// worry about them interfering with each other.
$(document).ready(function () {
    // initialise the model...
    var todaysQuestionsModel = new ViewModel(categoryId);

    // if this tab is visible to begin with, load the view model.
    if ($('#todays-questions').hasClass('active')) {
        todaysQuestionsModel.LoadCategory();
    }

    // only apply these bindings to the elements that descend from the div that contains this tab.
    ko.applyBindings(todaysQuestionsModel, document.getElementById("#todays-questions"));

    $('a[data-toggle="tab"]').on('shown', function (e) {
        if (e.target.hash == '#todays-questions') {
            todaysQuestionsModel.LoadCategory();
        }
    });
}); 
```

我希望能够将其包装在一个 javascript 模块中，我可以将其重用于我的应用程序的不同部分，但是我不知道如何生成此代码。理想情况下，我希望能够只进行一个简单的函数调用来自动配置所有这些行为。

我假设 todaysQuestionsModel.LoadCategory() 调用的部分应该是一个回调函数。我还假设应该有某种方式我不必指定 id 选择器，但到目前为止我所做的任何尝试似乎都不起作用。

有人可以帮我解决这个问题吗，我在这里完全超出了我的深度:-)。

干杯，

艾丹

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T15:06:19.273

我会通过淘汰赛来使用事件处理。这是修改后的示例代码：http: [//jsfiddle.net/xVxKD/52/](http://jsfiddle.net/xVxKD/52/)

```
 <div class="tabbable">
      <ul class="nav nav-tabs" data-bind="foreach: tabs">
        <li data-bind="css: { active: $root.selected() === $data }">
            <a href="#" data-bind="click: $root.doSomething, text: title"></a>
        </li>
      </ul>
      <div class="tab-content" data-bind="foreach: tabs">
        <div class="tab-pane" data-bind="css: { active: $root.selected() === $data }">
          <p data-bind="text: content"></p>
        </div>
      </div>
    </div>​

<script type='text/javascript'>//<![CDATA[ 
$(window).load(function(){
function Tab(id, title, content) {
    this.id = ko.observable(id);
    this.title = ko.observable(title);
    this.content = ko.observable(content);
}

var viewModel = {
    tabs: ko.observableArray([
        new Tab(1, "one", "one content"), 
        new Tab(2, "two", "two content"), 
        new Tab(3, "three", "three content")
    ]),
    selected: ko.observable(),        

    doSomething: function($data, $event){
        //alert(' = '+$event.target.hash)
        $data.content($data.content() + '\n Do i need to fetch new content for you?')
        viewModel.selected($data);
    }

};

//select second tab by default
viewModel.selected(viewModel.tabs()[1]);

ko.applyBindings(viewModel);
});//]]>  

</script> 
```

# linux - 访问 SFTP 服务器 - 是否需要密钥，如果是的话，哪个公共或私有

> ID：10335938
> 
> 赞同：0
> 
> 时间：2012-04-26T14:52:15.623
> 
> 标签：linux, networking, ssh, sftp

我们已获得远程 SFTP 服务器（由其他人托管）的用户名和密码。

我的 SFTP 客户端程序（我使用的）要求密钥继续。我应该要求 SFTP 提供商给我们什么密钥 - 公开的还是私有的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T14:57:19.877

您不需要密钥即可使用`sftp`. 基于密钥或基于密码的访问都可以正常工作，除非远程服务器上的显式配置需要其中一个。

为了使用 ssh 密钥，您需要首先生成一个 ssh 密钥对，然后将*公钥*放在远程服务器上的适当位置。具体如何执行此操作取决于您使用的客户端以及您对远程主机的访问权限。

一般来说：*您*将生成密钥并将公钥提供给提供者。他们可能会以另一种方式来做（生成他们的密钥并给你私钥），但这不太典型。

# c# - C# Crm 2011 调用者未经服务验证

> ID：10335944
> 
> 赞同：0
> 
> 时间：2012-04-26T14:52:47.137
> 
> 标签：c#, dynamics-crm-2011

我编写了应用程序由 c# 形式编写的代码 application.crm 使用 ssl 运行。

```
 ClientCredentials credential = new ClientCredentials(); 
      credential.Windows.ClientCredential = new 
      System.Net.NetworkCredential("username", "password", "domain"); 
      Uri organizationUri = new Uri("https://serverAdress/Orgname/XRMServices/2011/Organization.svc");
      Uri homeRealUri = null;
      serviceProxy = new OrganizationServiceProx
(organizationUri, homeRealUri, credential, null);
                                serviceProxy.EnableProxyTypes(); 
```

我也试过tihs版本。

```
>  ClientCredentials Credentials = new ClientCredentials(); 
>     Credentials.Windows.ClientCredential.UserName ="<username>"; 
>     Credentials.Windows.ClientCredential.Password ="<password>"; 
```

它不会抛出任何异常，但 serviceProxy 无法通过身份验证。如何解决？任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-05T18:32:08.460

老问题，但这是我的建议。

看看这里提供的示例代码：http: [//msdn.microsoft.com/en-us/library/hh675404.aspx](http://msdn.microsoft.com/en-us/library/hh675404.aspx)

只需更改以下条目以满足您的需要

```
 private String _discoveryServiceAddress = "https://dev.crm.dynamics.com/XRMServices/2011/Discovery.svc";
    private String _organizationUniqueName = "OrganizationUniqueName";
    // Provide your user name and password.
    private String _userName = "username@mydomain.com";
    private String _password = "password";

    // Provide domain name for the On-Premises org.
    private String _domain = "mydomain"; 
```

并且控制台应用程序应该打印出：登录的用户是“名字”“姓氏”。然后您可以从以下位置获取 OrganizationServiceProxy：

```
using (OrganizationServiceProxy organizationProxy =
                GetProxy<IOrganizationService, OrganizationServiceProxy>(orgServiceManagement, credentials)) 
```

并使用它。

# android - App的用户需要Android上的CouchDB吗？

> ID：10335947
> 
> 赞同：0
> 
> 时间：2012-04-26T14:53:04.257
> 
> 标签：android, nosql, couchdb

我正在尝试使用 CouchDb 作为 NoSQL 数据库，我的主要目的是在 android 上创建一个使用 couchDB 而不是 sqlite 的应用程序！我想在本地使用这个数据库，所以没有服务器连接！

我看到你需要在安卓市场上购买才能使用它！我想知道如果我的应用程序的所有用户首先在 android 市场上使用我的应用程序，我是否要使用它，以便能够使用我的应用程序？

还是以某种方式将其包括在内？这东西是如何工作的？无论如何，我可以跳过购买它并将这项技术包含在我自己的应用程序中吗？

如果有其他 NoSQL 可以在 android 上使用，请告诉我！

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T14:59:24.237

我认为您无需购买即可使用它，因为它是 Apache 许可证涵盖的开源库。

说到 NoSQL，我已经在 Android 环境中成功地使用了[NeoDatis](http://neodatis.wikidot.com/)和[db4o 。](http://www.db4o.com/android/)这两个库都是对象数据库，并且速度惊人且易于使用。事实上，声称它们比 ORM/关系数据库更快。我认为它们非常适合低用户（1 个用户）低带宽环境。

以下是 Android 中 db4o 的示例：

[http://java.dzone.com/articles/using-db4o-android-application](http://java.dzone.com/articles/using-db4o-android-application)

顺便说一句，db4o 是开源的，但是 GPL，这使得它很难集成到非 GPL 产品中。他们也有付费许可版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T17:12:03.203

你可能想看看[https://github.com/couchbaselabs/TouchDB-Android](https://github.com/couchbaselabs/TouchDB-Android)

这是一个封装了 SQLite 的可嵌入 Java 库，因此它快速、原生且轻量级。

它与 Apache CouchDB 同步，因此它具有您想要的离线模式。它还有一个与 CouchDB 非常相似的 REST/JSON api。

享受！

# iphone - 使用 { } 符号初始化 CGPoint

> ID：10335948
> 
> 赞同：6
> 
> 时间：2012-04-26T14:53:06.230
> 
> 标签：iphone, objective-c, ios, macos, cgpoint

在`CGPointMake`让我失望之后，我发现我们可以`CGPoint`像这样初始化一个静态常量：

```
static const CGPoint p = { 0.f, 0.f }; 
```

它有效，但大括号符号实际上在做什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-26T14:57:14.377

CGPoint 是一个结构：

```
struct CGPoint {
    CGFloat x;
    CGFloat y;
}; 
```

这是在 C 中初始化结构的有效方法。请参阅[C/C++ 编程语言的结构初始化？](https://stackoverflow.com/questions/1705147/struct-initialization-of-the-c-c-programming-language).

# asp.net - 如何比较 dd mmm yyyy 格式的两个日期？

> ID：10335950
> 
> 赞同：0
> 
> 时间：2012-04-26T14:53:09.183
> 
> 标签：asp.net, vb.net, validation, date

我想以这种格式比较两个日期 dd mmm yyyy，比较验证器不会工作，因为格式和自定义验证器是服务器端验证。我想进行客户端验证。最好的方法是什么？如果您有任何示例或链接，请告诉我。

我不知道是否有可用的 ajax、jquery 或 javascript 选项可以做到这一点？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:59:32.770

由于 JavaScript 原生转换自`MMM dd, yyyy`，这将是一种方法：

```
var date1Str = "09 Sep 2011";
var date2Str = "04 May 2012";

var dateParts = date1Str.split(" ");
var newDateStr = dateParts[1] + " " + dateParts[0] + ", "  + dateParts[2];
var date1 = new Date( newDateStr );

var dateParts = date2Str.split(" ");
var newDateStr = dateParts[1] + " " + dateParts[0] + ", "  + dateParts[2];
var date2 = new Date( newDateStr );

if ( date1 > date2 )
    ... 
```

网络上有大量的链接可以在 JavaScript 中进行日期解析，并且有大量的库可以让它变得更容易。请记住，文化起着一定的作用。“Oct”是英文，但在德文中是“Okt”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T15:39:56.050

这是一个可以用来比较日期的简单类；该`convert`功能已调整以适应您的格式：

```
<script type="text/javascript">
    var dates = {
        convert:function(d) {
            return (
                d.constructor === Date ? d :
                d.constructor === Array ? new Date(d[1],d[0],d[2]) :
                d.constructor === Number ? new Date(d) :
                d.constructor === String ? new Date(d) :
                typeof d === "object" ? new Date(d.year,d.month,d.date) :
                NaN
            );
        },
        compare:function(a,b) {
            return (
                isFinite(a=this.convert(a).valueOf()) &&
                isFinite(b=this.convert(b).valueOf()) ?
                (a>b)-(a<b) :
                NaN
            );
        },
        inRange:function(d,start,end) {
           return (
                isFinite(d=this.convert(d).valueOf()) &&
                isFinite(start=this.convert(start).valueOf()) &&
                isFinite(end=this.convert(end).valueOf()) ?
                start <= d && d <= end :
                NaN
            );
        }
    }
</script> 
```

> [该课程的学分属于@some：[https ://stackoverflow.com/a/497790/879420](https://stackoverflow.com/a/497790/879420)]

# c# - 如何使用上一页？

> ID：10335953
> 
> 赞同：0
> 
> 时间：2012-04-26T14:53:26.107
> 
> 标签：c#, .net, request, page-lifecycle

On `pippo.aspx`and `pippo2.aspx`pages (Webform, .NET 3.5) 我在 Page_Load 中有这段代码：

```
Response.Write("Result: " + Page.PreviousPage.Request["idconcorso"] + ""); 
```

好吧，我打电话给`pippo.aspx`，结果是`Result:`。

比，我从`pippo.aspx`页面调用`pippo.aspx?idconcorso=1234`，结果又是`Result:`，但实际上是打印`Result: 1234`。

比，我从`pippo.aspx?idconcorso=1234`页面调用`pippo2.aspx`，还有我的方面`Result: 1234`，但实际上是`Result:`。

我哪里错了？

PS当我说“打电话”时，我的意思是一个简单的`<a href>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:58:23.660

您的使用`Page.PreviousPage`不正确。

它旨在与传输方法或跨页发布一起使用。

> 如果当前页面是由于直接请求（不是来自另一个页面的传输或 > 交叉发布）而呈现的，则 PreviousPage 属性包含 null。

来源：http: [//msdn.microsoft.com/en-us/library/system.web.ui.page.previouspage.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.page.previouspage.aspx)

因此，像您一样进行直接页面请求不会为您提供上一页的值。

# c++ - 带有地图的 C++ 程序给出的结果与上次存储的结果不同

> ID：10335958
> 
> 赞同：-3
> 
> 时间：2012-04-26T14:53:31.220
> 
> 标签：c++, map, iterator

我有以下程序，它将四个字符串存储在地图中并第一次打印。现在它再次运行以检索存储的值。但第二次结果与第一次结果不同。

```
#include <map>
using namespace std;

void fun_call(void **,char * );
main(){
        void *data=NULL;
        char value[100];
        int i=0,j=0;

        char key[][10]={"disk1","disk2","disk3","disk4"};

        cout << "printing all mapped values " << endl ;
        data = (void *) malloc( 100);

        for(j=0;j<2;j++){
        for(i=0;i<4;i++){
                fun_call(&data,key[i]);
                memcpy(value,data,100);
                cout << "key ="<<key[i]<<" value is " << value << endl;
        }
        cout <<"====================="<< endl;
        }
}

void fun_call(void **tmp,char name[10])
{
        void *tmp_data;
        char str[100]="ravindra";
        int len =0;

        static std::map<std::string,void *> name_data_map;
        std::map<std::string,void *>::iterator iter   ;

        iter=name_data_map.find(name) ;

        if ( iter == name_data_map.end())
        {
                len=strlen(str)+strlen(name)+1;
                tmp_data = (void *) malloc ( len );
                strcat(str,name);
                memcpy(tmp_data,str,len);
                name_data_map[name]=tmp_data;
                cout << "Inside the if" << endl ;
        }
        else
                cout << "disk pos "<< iter->first << endl;
        cout << "Outside the if" << endl ;
        iter=name_data_map.find(name) ;
        memcpy(*tmp,iter->second,len);

} 
```

输出：

```
$ ./a.out
打印所有映射值
如果里面
如果在外面
key =disk1 值为 ravindradisk1
如果里面
如果在外面
key =disk2 值为 ravindradisk2
如果里面
如果在外面
key =disk3 值为 ravindradisk3
如果里面
如果在外面
key =disk4 值为 ravindradisk4
======================
磁盘 pos disk1
如果在外面
key =disk1 值为 ravindradisk4
磁盘 pos disk2
如果在外面
key =disk2 值为 ravindradisk4
磁盘 pos disk3
如果在外面
key =disk3 值为 ravindradisk4
磁盘 pos disk4
如果在外面
key =disk4 值为 ravindradisk4

```

知道为什么第二次迭代将所有数据都提供为：“ravindradisk4”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T15:13:56.013

`len`在 的开头设置为 0 `fun_call`，因此如果在第二次运行中它没有进入您的`if`，`memcpy`最后复制 0 个字节。所以第一次迭代`value`的最后`main()`一个保持不变，不管`key`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T15:37:52.550

如果您的代码旨在成为一个有效的（或远程惯用的）C++ 程序，那么它有很多问题。

正如@starbugs 指出的那样，您第二次没有使用正确的长度来复制结果。单行“修复”将是更改：

```
memcpy(*tmp,iter->second,len); 
```

...至：

```
memcpy(*tmp,iter->second,strlen((char*)iter->second)+1); 
```

关于为什么脆弱的 C 字符串技术最好用 C++ 方法代替的一些基础知识，我想向人们展示这个：

[学习标准 C++ 作为一种新语言 (PDF)](http://www2.research.att.com/~bs/new_learning.pdf) by Bjarne

一旦您掌握了这一点，您可能更能够接受应该使用 C++ 和标准库的精神。

您的程序非常简单，很容易展示如何简化它以生成更加健壮且易于阅读的惯用代码：

```
#include <map>
#include <iostream>
#include <string>

using namespace std;

string fun_call(string name)
{
    static map<string,string> name_data_map;

    map<string,string>::iterator iter;
    iter = name_data_map.find(name);

    if (iter == name_data_map.end()) {
        string mapvalue = "ravindra";
        mapvalue += name;
        name_data_map[name] = mapvalue;
        cout << "Inside the if" << endl ;
    }
    else
        cout << "disk pos "<< iter->first << endl;

    cout << "Outside the if" << endl;
    iter = name_data_map.find(name) ;
    return iter->second;
}

int main() {
    string keys[] = {"disk1","disk2","disk3","disk4"};

    cout << "printing all mapped values " << endl ;

    for(int j = 0; j < 2; j++) {
        for(int i = 0; i < 4; i++){
            string value = fun_call(keys[i]);
            cout << "key =" << keys[i] <<" value is " << value << endl;
        }
        cout << "=====================" << endl;
    }
} 
```

我将停止提供具有相同输出和控制流的基本等效程序。

笔记：

*   在标准 C++ 中，main 必须有一个 int 作为返回类型（尽管它不需要参数或 return 语句，奇怪的是）

*   该`using namespace std;`行使您不必`std::`在标准库类（如字符串、映射及其迭代器）前面输入内容。但是不要把它放在头文件中，因为它可能会导致包含它们的其他源文件出现问题，并且有自己的定义，如果没有消除歧义，可能会与标准名称冲突。

*   如果您使用标准库，那么值类型会在后台进行内存管理，并且它们使用的内存在类内部分配并在析构函数中释放。如果您需要进行显式内存管理，请使用 new 和 delete。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T15:39:16.260

首先，我什至不确定您的代码是如何编译的。您的 main 函数缺少返回类型，而 void/no-return 只是不好的做法。重组它以适应简单的返回 0 并使其返回类型`int`。

此外，甚至在编译之前就缺少几个包含（即 iostream 和 string）。不要使用 using `using namespace std`，而是尝试从 std 命名空间中仅“提取”您需要的东西。一般来说，将其全部引入是一种潜在的危险和不好的做法，因为您将来可能会遇到命名约定冲突（这会带来很多麻烦）。

回到手头的问题。如果您不尝试/惩罚您的思想，那么您就是在这里应用一些非常糟糕的做法。即使我正在使用移动顶点缓冲区，我也不会做这么多的内存复制和指针移动。并将您的分配与解除分配相匹配，这是一些非常糟糕的内存管理。而在 C++ 中，我们使用 new/delete。

由于您将指针的地址传递给数据变量，因此您可以使用 *tmp 简单地修改数据的指针。

由于您的 name_data_map 是静态的，因此它可以在循环中存活。因此，第二个数据成员`iter`是指向手头数据对象的实际指针。只需更改第二个函数的最后一行代码：

```
*tmp = iter->second; 
```

无论如何，这是我的两分钱......我什至不明白你想要做什么。祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T15:17:24.867

首先，一般来说，`C++`考虑使用`new`/`delete`而不是`malloc()`/ `free()`。

我不确定你到底想要完成什么（即为什么你不断地复制值），但你没有设置长度，所以`memcpy()`不复制任何东西。

此问题的另一个简单解决方法是使用存储在其中的指针`iter->second`（请注意，您将能够修改`data`并更新该映射条目 - 所以这可能不是您想要的）。

例如，不要`data`在 main 中为变量分配内存，只需更改此行

```
memcpy(*tmp, iter->second, len); 
```

至

```
*tmp = iter->second; 
```

现在将`data`in main 的指针地址设置为存储在 map 中的指针地址。

# windows - 运行时应用程序对象浏览和操作

> ID：10335959
> 
> 赞同：1
> 
> 时间：2012-04-26T14:53:31.737
> 
> 标签：windows, object, testcomplete

我需要做一个对象浏览器/操纵器，类似于 TestComplete 中可用的那个，也就是说，列出任何正在运行的外部应用程序中的所有对象及其属性，并能够在运行时更改它们的属性，所有这些当然是在运行时.
虽然 MSAA/IAccessible 可以读取对象，但据我所知，它只能返回可见对象，而不能更改它们的属性。
使用 WinAPI，我无法读取没有句柄的对象，例如标签。

理想情况下，我希望在 Delphi 中完成，但任何其他语言建议都是可以接受的。

我想要做的事情的例子（这是在 TestComplete 中完成的）：

![TestComplete 对象浏览器](../Images/32dee2b81af50b4a9046db803db05956.png) ![TestComplete 对象浏览器 2](../Images/127c34a3b61f089dbfa8f34645ce7881.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T18:38:00.077

这项任务并不容易。如果你想这样做，你需要使用特定的方法来获取你想要使用的每个应用程序框架（.NET、MFC、VCL 等）的数据。虽然其中一些方法非常简单（例如，.NET 和 Java 的反射），但其他一些方法可能更复杂，并且没有像 VCL 的情况那样记录。TestComplete 将自己的钩子加载到目标进程内存中，并通过这些模块检索有关此应用程序的信息。

此外，据我所知，TestComplete 可以读取测试应用程序的各种类型的调试信息，并在公开对象及其成员时使用它。

使用 IAccessible 和 Win API 是一种更简单的方法，尽管在某些情况下不是那么有效。您提到您无法使用 Win API 从标签中获取任何信息。这是因为 VCL 应用程序中的 TLabel 对象不是窗口对象。

# iphone - iphone 中的 wsdl 和值名称中的“-id”

> ID：10335961
> 
> 赞同：0
> 
> 时间：2012-04-26T14:53:38.687
> 
> 标签：iphone, objective-c, wsdl, wsdl2objc

我有一个小（大）问题：/我使用 WSDL，它具有以这种方式定义的输入值：用户 ID、传输 ID 等，并且在从 wsdl 转换为 Objective-C 之后，由于每次使用 id 都会出现错误， xcode当然识别为指针。我能否以某种方式告诉 xcode，如果他遇到 '-id' 将其视为字符串（并且只有在之前有空格时才将 id 识别为指针：'id' 或 (id) ）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T01:23:57.143

我已经解决了我的问题：最简单的方法是将项目中的（几乎）每个“-”更改为“_”。现在我有来自服务器 Code=500 “内部服务器错误”的错误，不知道为什么：/

# c - 用 Text C 语言替换字符串

> ID：10335963
> 
> 赞同：0
> 
> 时间：2012-04-26T14:53:41.660
> 
> 标签：c

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main ( int argc, char *argv[] )
{
    if ( argc != 4 ) /* argc should be 4 for correct execution */
    {
        /* Print argv[0] assuming it is the program name */
        printf( "usage: %s filename\n", argv[0] );
    }
    else 
    {
        // We assume argv[1] is a filename to open
        char* wordReplace = argv[1];
        char* replaceWord = argv[2]; 
        FILE *file = fopen( argv[3], "r+" );
        /* fopen returns 0, the NULL pointer, on failure */
        if ( file == 0 )
        {
            printf( "Could not open file\n" );
        }
        else 
        {
            char string[100];
            int len = 0;int count = 0;int i = 0;int k = 0;
            while  ( (fscanf( file, "%s", string ) ) != EOF )
            {
                len = strlen(string);
                count++;
                char charray[len+1];
                if(count == 1)
                {
                    for (i = 0; i < len; i++)
                    {
                        charray[i] = replaceWord[i];
                        printf("%c\n", charray[i]);
                    }
                }
                //printf("%c\n", charray[0]);
                printf( "%s\n", string );
                if(strcmp(string, wordReplace) == 0)
                {
                    for(k = 0; k < strlen(replaceWord); k++)
                    {
                         fseek (file, (-(long)len), SEEK_CUR);
                         fputc(charray[k],file);
                         //replaceWord++;
                    }
                    //strcpy(string, replaceWord);
                    //fprintf(file,"%s",replaceWord);
                    //fputs(string, file);
                    //printf("\n%d\n", len);
                }       
            }
            fclose( file );
        }
    }
    printf("\n");
    return 0;
} 
```

此代码当前可以正确替换第一个单词，但是如果我想用替换单词覆盖多个单词，或者该单词出现在文本中的其他位置，它将无法正确更改它，并且会将其更改为 ram 垃圾等.我很好奇是否有人能告诉我一个感谢你的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:22:58.060

假设单词的长度相同（如果不是，您还有很多问题）：假设您有一个 4 个字符的单词： `fseek (file, (-(long)len), SEEK_CUR);`将返回位置 0 (4-4)，`fputc(charray[k],file);`将更新到位置 1，然后返回 4 more 这是一个错误，但是由于您没有检查 fseek 的返回值，因此您不会知道这一点。此时算法不再起作用，因为您假定的文件位置都是错误的

编辑：

```
if(strcmp(string, wordReplace) == 0)
{
    fseek (file, (-(long)len), SEEK_CUR);
    for(k = 0; k < strlen(replaceWord); k++)
    {                         
        fputc(charray[k],file);
    }

} 
fflush(file); //you need to flush the file since you are switching from write to read 
```

编辑 2：刷新原因：来自 4.5.9.2 ANSI C，C99 7.19.5.3 中的类似段落）：

> 当以更新模式（模式参数中的第二个或第三个字符为“+”）打开文件时，可以在关联的流上执行输入和输出。但是，如果没有对 fflush 函数或文件定位函数（ fseek 、 fsetpos 或 rewind ）的介入调用，输出可能不会直接跟随输入，并且如果没有对文件定位的介入调用，输入可能不会直接跟随输出函数，除非输入操作遇到文件结尾。

在读写之间你已经有了 fseek 所以这不是问题

# android - Android Google Maps drawPath toPixels 错误

> ID：10335968
> 
> 赞同：0
> 
> 时间：2012-04-26T14:53:56.890
> 
> 标签：android, google-maps

我一直在尝试在 android 应用程序中包含显示路线的功能，并将此解决方案应用于我的应用程序：

[J2ME/Android/BlackBerry - 行车路线，两个地点之间的路线](https://stackoverflow.com/questions/2023669/j2me-android-blackberry-driving-directions-route-between-two-locations/2023685#2023685)

我基本上已经准备好所有代码，但是在 drawPath 方法中，我收到错误“Projection 类型中的方法 toPixels(GeoPoint, Point) 不适用于参数 (GeoPoint, Point)”上加星标的代码以下。这是代码：

```
public void drawPath(MapView mMapView, Canvas canvas) 
    {
        int x1 = -1, y1 = -1, x2 = -1, y2 = -1;
        Paint paint = new Paint();
        paint.setColor(Color.GREEN);
        paint.setStyle(Paint.Style.STROKE);
        paint.setStrokeWidth(3);
        for (int i = 0; i < mPoints.size(); i++) 
        {
            Point point = new Point();
            mMapView.getProjection().*****toPixels*****(mPoints.get(i), point);
            x2 = point.*****x*****;
            y2 = point.*****y*****;
            if (i > 0) 
            {
                canvas.drawLine(x1, y1, x2, y2, paint);
            }
            x1 = x2;
            y1 = y2;
        }
    } 
```

由于一直无法对这个错误进行排序，所以我还没有能够测试它，所以我不知道其他地方是否还有其他问题。但是与此同时，如果有人知道为什么会弹出此错误，将不胜感激。提前致谢！哦，如果有人需要查看我的任何其他代码或类，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T01:51:49.573

我试过这个源代码。

从源代码复制文件，在此之前不要更改任何内容。 **不要**按`Ctrl`++`Shift`自动`O`加载库类。有时，eclipse 会导入错误的库。为什么？这是关于eclipse的另一个话题。

**手动编辑所有这些行**

```
import org.ci.geo.route.Road;
import org.ci.geo.route.RoadProvider; 
```

将导入更改为您的包库名称。
然后编辑适合您的布局的这一行：

```
setContentView(R.layout.main);
mapView = (MapView) findViewById(R.id.mapview); 
```

这是为了甜味

```
TextView textView = (TextView) findViewById(R.id.description); 
```

希望对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:58:35.123

[这](http://android-example-code.blogspot.in/p/map-api-in-android.html)是我发布的一个很好的例子，你可以试试这个

# javascript - 如何在 Ember 中设置值之前检查它？

> ID：10335969
> 
> 赞同：2
> 
> 时间：2012-04-26T14:53:57.787
> 
> 标签：javascript, ember.js, getter-setter

我在 Ember 对象上有一个简单的属性，我想在实际设置和触发/取消更改之前对其运行一些值检查。我没有太多运气找到任何代码示例或信息。我习惯于从其他框架中使用的模式是在 setter 中执行此操作 - 例如：

在 Ember 对象内

```
propertyName : function(key, value) {
    // Setter
    if (arguments !== 1) {
        if (setCheckHere) {
           return this._super(key, value); // ??  is this right?
        } 
        // ?? if ignoring what should I return instead?
    }
}.property() 
```

我无法弄清楚我应该调用什么方法以及需要返回什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T16:16:36.650

我的建议如下，请参阅[http://jsfiddle.net/pangratz666/NUTAz/](http://jsfiddle.net/pangratz666/NUTAz/)：

```
Ember.Object.create({
    _foo: undefined,
    foo: function(key, value) {
        // david
        if (arguments.length === 1) {
            return this._foo;
        }

        // setter
        if (value === 42) {
            // set the value because it's cool
            this._foo = value;
        }

        // allow chaining, so this.set('foo', 12).set('name', 'Fünke');
        return this;
    }.property()
}); 
```

* * *

**更新**

一个更好的解决方案是使用@mraken 建议的闭包，请参阅[http://jsfiddle.net/pangratz666/Zacfh/](http://jsfiddle.net/pangratz666/Zacfh/)：

```
Ember.Object.create({
    foo: (function() {
        var _foo;
        return function(key, value) {
            // david
            if (arguments.length === 1) {
                return _foo;
            }

            // setter
            if (value === 42) {
                _foo = value;
            }

            return this;
        }.property();
    })()
}); 
```

# jquery - jQuery this 显示一个元素

> ID：10335970
> 
> 赞同：1
> 
> 时间：2012-04-26T14:54:04.513
> 
> 标签：jquery, this

我有以下 jQuery

```
$('td a').hover(function(){
  $(this).find('div.productPopUp').show();
}); 
```

和这个 HTML

```
<td>text</td>
   <td><a href="#">text</a></td>
   <div class="productPopUp">
     <h1>text</h1>
     <p>blah, blah</p>                          
   </div>
<td>

<td>text</td>
     <td><a href="#">text</a></td>
     <div class="productPopUp">
        <h1>text</h1>
        <p>blah, blah</p>                           
     </div>
 <td> 
```

我希望 jQuery 只显示悬停的链接，但它不起作用。我不确定我是否在错误的地方或错误的上下文中使用它。（我假设这个，这里使用的是指悬停在什么上面？

谁能指出我正确的方向？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:23:13.093

首先，你需要一些有效的标记，jQuery 不能总是在奇怪的无效标记中找到元素？

```
<table>
    <tr>
       <td>text</td>
       <td><a href="#">text</a></td>
       <td class="productPopUp">
          <h1>text</h1>
          <p>blah, blah</p>                          
       </td>
    </tr>
    <tr>
    <td>text</td>
         <td><a href="#">text</a></td>
         <td class="productPopUp">
           <h1>text</h1>
           <p>blah, blah</p>                           
         </td>
    </tr>
​&lt;/table>​​​​​​​​​​ 
```

然后是一些 jQuery，可能是这样的：

```
$('td a').on('mouseenter mouseleave', function() {
    $(this).parent().parent().find(".productPopUp").toggle();
}); 
```

最后是一个[小提琴](http://jsfiddle.net/adeneo/vK7dq/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:55:38.450

```
$('td a').hover(function(){
  $(this).parent().next('div.productPopUp').show();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T15:00:19.977

也许这个？

```
$('td a').hover(function(){
  $(this).parent().sibling('div.productPopUp').show();
}); 
```

# javascript - 使用 Highchart 读取 CSV

> ID：10335972
> 
> 赞同：0
> 
> 时间：2012-04-26T14:54:07.433
> 
> 标签：javascript, csv, highcharts

我正在努力从我的 CSV 文件中输出折线图，我得到了图表，但没有得到图表中的数据，有人可以告诉我下面的代码有什么问题吗？

CSV 中的数据格式如下：

```
26-04-2012 09:10,0
26-04-2012 09:20,0
26-04-2012 09:30,0
26-04-2012 09:40,0
26-04-2012 09:50,0
26-04-2012 10:00,1
26-04-2012 10:10,1 
```

HTML 代码：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
  <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>Test</title>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
        <script src="../../js/highcharts.js" type="text/javascript"></script>
<script type="text/javascript">

    $(document).ready(function() {

        var c = [];
        var d = [];

        $.get('test.csv', function(data) {
            var lines = data.split('\n');
            $.each(lines, function(lineNo, line) {
                var items = line.split(',');
                c.push(items[0]);
                d.push(parseInt(items[1]));
            });
        });
        var options = {
                chart: {
                    renderTo: 'chart',
                    defaultSeriesType: 'line'
                },
                title: {
                    text: 'reading'
                },
                xAxis: {
                    title: {
                        text: 'Date Measurement'
                    },
                    categories: c
                },
                yAxis: {
                    title: {
                        text: 'reading'
                    }
                },
                series: [{
                    data: d
                }]
        };

        var chart = new Highcharts.Chart(options);

    });
</script>
   </head>
   <body>
        <div id="chart" style="width: 800px; height: 400px; margin: 0 auto"></div>
   </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T06:45:49.130

问题是`$.get`调用将立即返回，因此您将在`test.csv`下载之前创建图表（根本不包含数据）。

您传递给的回调函数`$.get`将在下载文件时运行，因此将图表的创建放在那里可以解决问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T07:18:31.527

图表加载时没有数据，因为 csv 文件是在图表之后加载的，因为 get 请求需要时间来接收响应。以下将从您的文件中加载数据并在文件加载后显示图表。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
                      <html>
                      <head>
                      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Test</title>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
        <script src="../../js/highcharts.js" type="text/javascript"></script>
<script type="text/javascript">

    $(document).ready(function() {

        var c = [];
        var d = [];
        var options = {
                chart: {
                    renderTo: 'chart',
                    defaultSeriesType: 'line'
                },
                title: {
                    text: 'reading'
                },
                xAxis: {
                    title: {
                        text: 'Date Measurement'
                    },
                    categories: c
                },
                yAxis: {
                    title: {
                        text: 'reading'
                    }
                },
                series: [{
                    data: d
                }]
        };

        var jqxhr = $.get('test.csv', function(data) {
            var lines = data.split('\n');
            $.each(lines, function(lineNo, line) {
                var items = line.split(',');
                c.push(items[0]);
                d.push(parseInt(items[1]));
            })
            var chart = new Highcharts.Chart(options);

        });
    });
</script>
   </head>
   <body>
        <div id="chart" style="width: 800px; height: 400px; margin: 0 auto"></div>
   </body>
</html> 
```

# php - php 和 mySql 加入或循环还是什么？

> ID：10335975
> 
> 赞同：0
> 
> 时间：2012-04-26T14:54:12.290
> 
> 标签：php, mysql, database, join

我有以下代码和数据库。我的意图是最终用户可以从数据库中选择列（通过'ajax'ing选项/直接从mysql中选择）并对其运行报告。我可以预先确定他们使用的表格，他们选择列。我最大的问题是执行“计划”查询的最佳方式。

要运行计划，我需要来自“客户”和“交货”的详细信息 - （客户信息和交货地址），我使用所有表格中的“客户编号”，加上年份，来选择要运行的年度计划 - 即客户编号 bar12345 - 年度计划表是 bar123452012

从 bar123452012 表中提取的每个“custnum”可能有 2 个产品。

此表每个产品只有一行，但有 367 列，1-prodid，366 列以 yday 整数为标题。php 计算出它是否需要在那一年在不同的函数中使用 365 或 366。

你有什么建议？一个 php 循环，一个一个地拉所有客户并在一个表中格式化，或者是否有一个 SQL 查询将根据 tindex 将不同的表左连接到每一行。2012身份证？！需要速度和效率，因为我们正在谈论至少 200 个客户表，可能多达 1000 个。

感谢 Dwurf 的现实检查。重组数据库以拥有一个时间表，并以此为基础工作。

谢谢矮人。整个下午都在进行新设计... 数据库

表客户的表结构

custnum varchar(255) 没有
姓氏 varchar(50) 没有
名字 varchar(50) 没有
phone1 varchar(50) 没有
phone2 varchar(50) 没有
email varchar(50) 没有
add1 varchar(50) 没有
add2 varchar(50) 没有
city varchar (50) 无
邮政编码 varchar(10) 无

表交付详细信息的表结构

special varchar(50) 否
add1 varchar(50) 否
add2 varchar(50) 否
city varchar(50) 否
postcode varchar(10) 否
custnum varchar(100) 否

表格注释的表格结构

custnum varchar(50) 无
注释 varchar(50) 无
时间时间戳 无 CURRENT_TIMESTAMP

表 prodgroup 的表结构

pgroup varchar(20) 无
名称 varchar(50) 无
描述 varchar(50) 无

表产品的表结构

name varchar(50) 没有
数量 varchar(50) 没有
描述 varchar(50) 没有
pgroup varchar(50) 没有
价格 varchar(50) 没有
图片 varchar(100) 没有
productid varchar(10) 没有
suppid varchar(50) 没有
vat tinyint (1) 没有

表计划的表结构

productid varchar(15) 否

d0 varchar(100) 否
d1 varchar(100) 是 NULL d2 varchar(100) 是 NULL ...... d362 varchar(100) 是 NULL d363 varchar(100) 是 NULL d364 varchar(100) 是 NULL d365 varchar (100) 是 NULL

custnum varchar(50) 否

id int(50) 否

表供应商的表结构

suppid varchar(50) 没有
name varchar(50) 没有
phone1 int(100) 没有
phone2 int(100) 没有
email varchar(100) 没有
add1 varchar(50) 没有
add2 varchar(50) 没有
city varchar(50) 没有
邮政编码 varchar (10) 无
说明 varchar(100) 无

表 vatgroup 的表结构

vat int(20) 无
金额 decimal(20,0) 无
描述 varchar(20) 无

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T15:36:59.683

> 你有什么建议？一个 php 循环，一个一个地拉所有客户并在表格中格式化，

这种方法是自杀的性能

> 或者是否有一个 SQL 查询会根据 tindex 将不同的表左连接到每一行。2012身份证？！

对于您在问题中概述的设计，这实际上是不可能的。但是，设计更改可能会有所帮助：如果您的所有报告都有一个表格，并且为报告名称添加一列，那么您会更接近一些。考虑类似的事情：

```
Table structure for table Reports
custnum varchar(255) No
productid   varchar(15) No  
date  DateTime    No 
```

现在您可以构造一个查询来获取特定客户的所有行

```
select * from Reports 
where date between '2012-01-01' and '2013-01-01'
and custnum = 'bob54326' 
```

使用 PHP（或您正在使用的任何工具）从这些结果中生成表格。

我知道这种策略会破坏您的“从 UI 直接访问表”模型，但恐怕该模型根本不能很好地工作。更改您的设计以使用您拥有的工具，而不是试图强制工具符合您的设计。

# firefox - @profile.assume_untrusted_certificate_issuer 不适合我

> ID：10335976
> 
> 赞同：2
> 
> 时间：2012-04-26T14:54:15.903
> 
> 标签：firefox, webdriver, watir-webdriver

伙计们，

我在使用时遇到问题`@profile.assume_untrusted_certificate_issuer`，所以这是我的代码片段：

```
@profile = Selenium::WebDriver::Firefox::Profile.new
@profile.assume_untrusted_certificate_issuer = false
@browser = Watir::Browser.new(:firefox, :profile => @profile) 
```

但是当我运行它时，我仍然在 Firefox 中得到安全异常。还有什么我需要设置的。

非常感谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-29T11:16:28.410

在您的代码片段中执行以下操作：

```
 @profile=Selenium::WebDriver::Firefox::Profile.from_name "default"
   @profile.assume_untrusted_certificate_issuer=false
   @profile.secure_ssl = true 
   browser = Watir::Browser.new :firefox, :profile => @profile 
```

您还可以创建自定义 firefox 配置文件。如果您需要不同的个人资料

# c++ - 在 xml 中存储 C++ 二进制输出

> ID：10335979
> 
> 赞同：0
> 
> 时间：2012-04-26T14:54:19.667
> 
> 标签：c++, xml

根据 xsd，支持的二进制类型是 hexbinary 和 base64 编码的二进制数据。[http://www.w3schools.com/schema/schema_dtypes_misc.asp](http://www.w3schools.com/schema/schema_dtypes_misc.asp)

我的意图是从内存中读取原始字节内容并将其序列化为 xml 文件。因此，上述哪种数据类型将描述原始字节内容，或者我是否必须确保将原始字节内容转换为十六进制以符合上述两种数据类型之一？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T14:59:12.257

您必须将原始二进制文件转换为十六进制（或 base64）表示。例如，如果字节的值为 255（十进制），它的十六进制表示（作为字符串）将是“ff”。

用于存储原始输入的（常规）类型是 unsigned char，因此您可以轻松地逐字节获取 0-255 范围，但是对于该数组的每个字节，您需要一个有符号字符（或 std： :string) 类型来存储表示，这就是您在 XML 中使用的。

您的框架可能有一种将原始字节转换为 Base64 或十六进制的方法。如果没有，这是十六进制的一种方法：

```
#include <iostream>
#include <string>
#include <sstream>

using namespace std;

int main (void) {
    ostringstream os;
    os.flags(ios::hex);

    unsigned char data[] = { 0, 123, 11, 255, 66, 99 };

    for (int i = 0; i < 6; i++) {
        if (data[i] < 16) os << '0';
        os << (int)data[i] << '|';
    }

    string formatted(os.str());

    cout << formatted << endl;

    return 0;
} 
```

输出：**00|7b|0b|ff|42|63|**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T15:20:19.437

您需要将原始数据编码为两种数据类型之一。这是为了防止一些随机数据弄乱 XML 格式，例如，如果您`<`在某处嵌入了数据。

您可以选择两者中最适合您的。十六进制类型更容易编写代码，但会生成更大的文件 - 输出字节与输入字节的比率为 2:1，而 Base64 编码为 4:3。不过，您不需要编写自己的代码，Base64 转换函数很容易获得。这是一个在答案中有一些代码的问题：[How do I base64 encode (decode) in C?](https://stackoverflow.com/questions/342409/how-do-i-base64-encode-decode-in-c)

作为编码如何不同的示例，这里是短语“ `The quick brown fox jumps over the lazy dog.`”以两种方式编码。

十六进制：

```
54686520717569636b2062726f776e20666f78206a756d7073206f76657220746865206c617a7920646f672e 
```

Base64：

```
VGhlIHF1aWNrIGJyb3duIGZveCBqdW1wcyBvdmVyIHRoZSBsYXp5IGRvZy4= 
```

# .net - 如何从 RichTextBox 复制文本？

> ID：10335988
> 
> 赞同：3
> 
> 时间：2012-04-26T14:54:31.820
> 
> 标签：.net, wpf

我有一个包含下标和上标文本的 RichTextBox，问题是我无法从 RichTextBox 复制文本，我得到的是没有任何下标或上标的文本作为原始文本。

如果有人指出我正确的解决方案，我将不胜感激。

这是我的复制代码：

```
TextRange copiedTextRange = new TextRange(richTextSourceText.Document.ContentStart, richTextSourceText.Document.ContentEnd);
MemoryStream memoryStream = new MemoryStream();
copiedTextRange .Save(memoryStream, DataFormats.Rtf); 
```

然后，这是我的粘贴代码：

```
TextRange pastedTextRange;
pastedTextRange= new TextRange(richTextDestinationText.Document.ContentStart, richTextDestinationText.Document.ContentEnd);
            pastedTextRange.Load(memoryStream, DataFormats.Rtf); 
```

# batch-file - 批处理或 VBS | 如何检查音乐文件的比特率？

> ID：10335991
> 
> 赞同：1
> 
> 时间：2012-04-26T14:54:39.263
> 
> 标签：batch-file, vbscript, bitrate

我需要检查音乐文件的比特率，我需要以数字形式接收数字，例如：192000（对于 192 kbps）、320000（对于 32kbps）或 (+)3000000（对于 wav 和未压缩音乐）。我的意思是我需要确切的数字，如果 MP3 是 VBR 并且以 194 kbps 压缩，我需要 194000 数字，而不是当前的 CBR 192000。

我正在使用**MEDIAINFO** (x64) CLI 程序批量完成这项工作：

```
for /f "tokens=*" %%%% in ('mediainfo "%%a" "--Inform=General;%%BitRate/String%%"') do set "BitRate=%%~%%" 
```

但我有 35.000 多个文件要检查，然后所有文件的审查时间超过 2 小时。

* * *

我需要一个简单的代码来检查它，而不是一个需要执行它并浪费大量时间的程序......

代码至少需要识别这种文件类型（我的意思是内部比特率）非常重要： **AIFF、FLAC、M4A、MP3、OGG、WAV、WMA。**

并且不能是 Ruby 或 Python 的代码，因为我需要“编译”它并确定什么时候“编译”会浪费大量时间来检查很多文件（导致编译的 .exe 解压缩）。

更多信息：我考虑将结果存储在一个文件中，然后进行比较以仅检查新添加的文件，但我无法存储结果以在下次运行时进行比较，因为有时我需要替换检查的文件（旧文件）。顺便说一句，我也不能通过文件时间戳来处理这个问题。需要成为一个独特的程序来检查所有文件，永远（或者这就是我的想法......）。

* * *

我尝试了另一种方法来检查比特率，我真的确定这是我需要的，但我无法让它像我想要的那样运行......

**这个 VBS 使用 DBPowerAmp 程序 API，并显示一个带有信息的窗口（包括比特率），但是对于一个窗口我什么也做不了......也许如果我可以将窗口信息重定向到一个文本文件......然后通过读取文本文件中的比特率信息来设置变量“比特率”......但我不知道该怎么做：**

```
' create shell object
Set WshShell = CreateObject("WScript.Shell")

' Create dMC Object
Set dMC = CreateObject("dMCScripting.Converter")

'Read audio properties of a file
Dim AudioProps
AudioProps = dMC.AudioProperties("C:\test.aac")
Call WshShell.Popup(AudioProps, , "Returned Audio Properties", 0) 
```

我试图像这样将该代码“转换”成批处理，但是不要运行，我什么也没得到：

```
@echo off
rundll32.exe dMCScripting.Converter.AudioProperties("C:\Test.aac") > test.txt
exit 
```

哦，我也试过这个，但比 mediainfo 浪费更多时间：

```
mplayer "test.aac" -frames 0 | findstr "kbit" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T15:09:19.897

这是一个 vbs 脚本，适用于 mp3，其余的我没有尝试

```
Set objPlayer = CreateObject("WMPlayer.OCX" )
Set colMediaCollection = objPlayer.mediaCollection

Set colMedia = colMediaCollection.getAll()

For i = 0 to colMedia.Count - 1
    Set objItem = colMedia.Item(i)
    Wscript.Echo objItem.Name & " : " & objItem.GetItemInfo("bitrate")
Next 
```

有关[列表](http://techsupt.winbatch.com/webcgi/webbatch.exe?techsupt/nftechsupt.web+WinBatch/OLE~COM~ADO~CDO~ADSI~LDAP+Get~Audio~File~Information.txt)_可以使用的属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T15:28:10.137

为了让您了解 Ruby 中的情况，audioinfo 只是执行此类操作的众多库之一。

```
require "audioinfo"

AudioInfo.open("R:/mp3/j/John Coltrane - I Think.mp3") do |info|
  puts info.to_h
end
=>{"artist"=>"John Coltrane", "album"=>"John Coltrane", "title"=>"I Think", "tracknum"=>nil, "date"=>nil, "length"=>272, "bitrate"=>128} 
```

# java - 为什么 webflow 不更新我的模型对象？

> ID：10335992
> 
> 赞同：0
> 
> 时间：2012-04-26T14:54:42.257
> 
> 标签：java, spring-webflow, spring-webflow-2

我正在使用 Spring Webflow 2 设置应用程序，但遇到了问题。该应用程序在一个页面上进行预订，然后允许在另一个页面上付款。预留模型对象工作正常；我可以填写表单并提交它，它会在以下确认屏幕上显示完全填充的对象。然而，当我对 paymentInformation 模型对象做同样的事情时，表单的任何内容在处理时都不会绑定到模型对象中。

这是我的流程定义。（在尝试解决此问题时，我将支付流程移到了子流程中。）

```
<?xml version="1.0" encoding="UTF-8"?>
<flow 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://www.springframework.org/schema/webflow"
    xsi:schemaLocation="http://www.springframework.org/schema/webflow http://www.springframework.org/schema/webflow/spring-webflow-2.0.xsd">

    <var name="paymentInfo" class="com.myapp.payments.domain.PaymentInfo" />
    <input name="reservation" />

    <decision-state id="paymentDecision">
        <if test="reservationServiceImpl.needsPayment(reservation)" 
            then="enterPayment"
            else="resolvePayment" />
    </decision-state>

    <view-state id="enterPayment" view="enterPayment" model="paymentInfo">
        <on-render>
            <evaluate expression="reservationMultiAction.preparePayment" />
            <set name="viewScope.stepNumber" value="3" />
        </on-render>

        <transition on="back" to="editReservation" />
        <transition on="submitPayment" to="resolvePayment" />
    </view-state>

    <action-state id="resolvePayment">
        <evaluate expression="reservationMultiAction.submitPayment" />
        <transition on="success" to="receipt" />
        <transition on="failure" to="payment" />
    </action-state>

    <end-state id="editReservation" />
    <end-state id="receipt" />
</flow> 
```

调用 preparePayment 填充 flowScope 中的 bean，然后正确填充 enterPayment 页面上的表单。但是当我调试 submitPayment 操作方法时，paymentInfo bean 只有 preparePayment 的结果，而提交的表单中什么也没有。

既然我确定有人会问，这里是 enterPayment 页面的开始表单标签：

```
<form:form modelAttribute="paymentInfo" method="post"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T08:32:40.097

如果不包含完整的 html 代码，则很难识别错误。乍一看，它可能是表单标签中缺少的操作属性。

```
<form:form action="${flowExecutionUrl}" modelAttribute="paymentInfo" method="post">
    <input type="submit" id="_eventId" value="submitPayment" />
</form:form> 
```