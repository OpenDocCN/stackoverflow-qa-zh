# StackOverflow 问答 10667000-10667999

# c# - WPF Datagrid - 单击 DataGrid 中的空白时取消选择所选项目

> ID：10667002
> 
> 赞同：13
> 
> 时间：2012-05-19T16:32:53.247
> 
> 标签：c#, wpf, datagrid

默认行为是使用 CTRL+单击取消选择 Datagrid 中的项目

我希望能够用鼠标单击（左键或右键）网格中的空白并让它取消选择任何选定的项目。

我已经用谷歌搜索了它并发现了一些非常复杂的解决方法，但我希望有一个简单的解决方案。

编辑：

我现在改用列表视图，但仍然没有找到解决方案。列表视图稍微不那么烦人，因为它们的样式更好。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-08-05T20:04:44.473

我有同样的问题并找到了解决方案。这应该建立在行为中：

```
private void dataGrid1_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
{
    if (sender != null)
    {
        DataGrid grid = sender as DataGrid;
        if (grid != null && grid.SelectedItems != null && grid.SelectedItems.Count == 1)
        {
            DataGridRow dgr = grid.ItemContainerGenerator.ContainerFromItem(grid.SelectedItem) as DataGridRow;
            if (!dgr.IsMouseOver)
            {
                (dgr as DataGridRow).IsSelected = false;
            }
         }
    }        
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T02:23:02.637

一个简单的

```
<DataGrid MouseDown="DataGrid_MouseDown"> 
```

是不是你想要的？

```
private void DataGrid_MouseDown(object sender, MouseButtonEventArgs e)
{
    (sender as DataGrid).SelectedItem = null;
} 
```

唯一的缺点是在没有 CTRL 的情况下单击所选项目也会取消选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T19:20:28.543

我不确定你是指空白还是灰色空间。在后一种情况下，以下工作：

```
 private void dataViewImages_MouseUp(object sender, MouseEventArgs e)
    {
        DataGridView.HitTestInfo hit = dataViewImages.HitTest(e.X, e.Y);
        if (hit.Type != DataGridViewHitTestType.Cell)
           dataViewImages.ClearSelection();
    } 
```

这就是我用来通过单击灰色空间来取消选择所有单元格的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-08T12:35:49.720

```
private void dg_IsKeyboardFocusWithinChanged
    (object sender, DependencyPropertyChangedEventArgs e)
    {
        if (dg.SelectedItem != null) {
            dg.UnselectAll();
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-16T12:33:40.310

如果你有`SelectionUnit="FullRow"`你必须`UnselectAllCells()`改用`UnselectAll()`.

# c# - 从 System.AddIn 适配器调用 Form 时，不会触发 Win Forms 按键事件

> ID：10667003
> 
> 赞同：0
> 
> 时间：2012-05-19T16:32:56.073
> 
> 标签：c#, .net, winforms, system.addin

我正在使用来自 .NET 3.5 AddIn & Extensibility 功能的 System.AddIn 库。我需要在充当添加主机的现有应用程序的工具栏中添加一个按钮。我能够添加按钮并从按钮单击操作中调用自定义 Win Form。OnClick 加载项按钮，我正在调用一个加载 WebBrowserControl 的 win 表单。除了没有触发键盘事件之外，每件事都完美无缺。如果我将表单设置为对话框窗口，则会触发键盘事件。由于这种行为，我有点受阻。任何输入都会被应用。

谢谢， 唠叨

# c# - 谷歌图表不适用于 jquery 加载功能

> ID：10667004
> 
> 赞同：1
> 
> 时间：2012-05-19T16:33:00.773
> 
> 标签：c#, jquery, google-visualization

我正在使用 Google 图表 api 来绘制表格图表。
我正在`ajax`以这种方式使用 jquery 拨打电话 -

```
$('#table_div').load('getAnalysis.aspx'); 
```

在这里，我`<div id=table_div"></div>`使用`load`. 现在返回以下 html 文本 - `jquery`
`getAnalysis.aspx`

```
<div id="iqr_table"></div>
<script type='text/javascript'>
    google.load('visualization', '1', { packages: ['table'] });
    google.setOnLoadCallback(iqr_drawTable);
    function iqr_drawTable() {
      var iqr_data = new google.visualization.DataTable();
      iqr_data.addColumn('string', 'Q #');          
      iqr_data.addColumn('string', 'My Answer');
      iqr_data.addColumn('string', 'Correct Answer');
      iqr_data.addRows([
    ['1', 'A', 'C', ],
    ['2', '', 'C,D', ],
    ['3', 'C', 'C', ],
    ['4', 'D', 'D', ],
    ['5', 'C,D', 'A,B', ],
   ]);

      var table = new google.visualization.Table(document.getElementById('iqr_table'));
      table.draw(iqr_data, { showRowNumber: true });
}
</script> 
```

我已经使用开发人员工具中内置的谷歌浏览器检查了正确进行 ajax 调用并且正确接收了 html 文本，还`<script>`评估了接收到的内容中的标签。

但是在评估`<script>`标签后立即出现问题，并且`<body>`从页面中删除并且没有显示任何内容。
我不明白错误在哪里。

PS：我已经在主页中包含了所有必需的脚本文件，所以请不要指出这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T16:45:15.487

好的，问题出在脚本中：

```
<script type='text/javascript'>
    google.load('visualization', '1', {
        packages: ['table']
    });
    google.setOnLoadCallback(iqr_drawTable);

    var iqr_data = { }; // define it here.

    function iqr_drawTable() {
        /*var*/ iqr_data = new google.visualization.DataTable(); // iqr_data is defined here.
        iqr_data.addColumn('string', 'Q #');
        iqr_data.addColumn('string', 'My Answer');
        iqr_data.addColumn('string', 'Correct Answer');
        iqr_data.addRows([
            ['1', 'A', 'C', ],
            ['2', '', 'C,D', ],
            ['3', 'C', 'C', ],
            ['4', 'D', 'D', ],
            ['5', 'C,D', 'A,B', ], ]);

        var table = new google.visualization.Table(document.getElementById('iqr_table'));
        table.draw(iqr_data, {    // and isn't available here.
            showRowNumber: true
        });
    }
</script> 
```

虽然我不知道为什么`<body>`需要从页面中删除......但这是我能注意到的问题......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T11:13:03.613

想通了 - Google API 说要先初始化负载。所以也许将 google.load 函数排除在 AJAX 获取的脚本之外，

```
google.load('visualization', '1', {'packages': ['annotatedtimeline']}); 

$(document).ready(function(){               
// Get TIER1Tickets                 
$('#table_div').load('getAnalysis.aspx'); 
```

我得到的`getAnalysis.aspx`是这个（假设谷歌已经初始化并加载了包） -

```
<div id="iqr_table"></div>
<script type='text/javascript'>    
  var iqr_data = new google.visualization.DataTable();
  iqr_data.addColumn('string', 'Q #');          
  iqr_data.addColumn('string', 'My Answer');
  iqr_data.addColumn('string', 'Correct Answer');
  iqr_data.addRows([
  ['1', 'A', 'C', ],
  ['2', '', 'C,D', ],
  ['3', 'C', 'C', ],
  ['4', 'D', 'D', ],
  ['5', 'C,D', 'A,B', ],   

  var table = new google.visualization.Table(document.getElementById('iqr_table'));
  table.draw(iqr_data, { showRowNumber: true });
} 
```

# ruby-on-rails - 重新包装 Ruby Gem

> ID：10667008
> 
> 赞同：1
> 
> 时间：2012-05-19T16:33:25.867
> 
> 标签：ruby-on-rails, ruby, rubygems

我不得不进行一些更改，并更新了已安装 gem 文件夹中的文件。

我应该如何重新打包这个 gem 以使其整体更新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T16:37:40.373

要重新制作`.gem`文件，您可以执行`gem build <gemspec>`. 要将 gem 推送到 Rubygems.org，请执行`gem push <built gem>`. 有关更多信息，请参见[http://rubygems.org/](http://rubygems.org/)。

# asp.net - 在内容页面加载之前在母版页中重定向

> ID：10667010
> 
> 赞同：3
> 
> 时间：2012-05-19T16:33:29.697
> 
> 标签：asp.net, events, redirect, master-pages

我的 ASP.NET 主 Page_Init 事件页面中有代码，用于检查用户是否被授权进入内容页面，如果没有，则将他们重定向到登录页面。就检查本身而言，此代码工作正常。但是，我发现在上述重定向之后内容 Page_Load 事件仍然会触发。这会在假定用户已登录并设置某些变量的页面上引起问题。

这是母版页代码（简化）

```
 Protected Sub Page_Init(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Init
...
            If Access_Level > User_Level_ID Then
                Response.Redirect("~/login.aspx", False)
            End If

    End Sub 
```

上面的测试工作正常，重定向行被执行，但在下面的代码被触发并执行之前没有生效。

这是内容页面代码

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    Dim Rec_IDs As New List(Of String)
    Rec_IDs = Session("Rec_IDs")
    lblCount.Text = String.Format("You have {0} records in your cart", CType(Rec_IDs.Count, String)) 'this gives an error if Session("Rec_IDs") is null
End Sub 
```

我意识到我可以在我的每个内容页面中放置代码来检查用户是否登录/授权，但如果可能的话，我想从一个位置控制它。

难道我做错了什么？我已经阅读了很多页面说母版页是进行检查的地方。

谢谢。:-)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T17:04:43.660

```
 Protected Sub Page_Init(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Init
...
            If Access_Level > User_Level_ID Then
                Response.Redirect("~/login.aspx", True)
            End If

    End Sub 
```

使用 Response.Redirect("~/login.aspx", True) 将终止当前页面处理并重定向到所需页面。

虽然推荐使用 "Response.Redirect("~/login.aspx", False)" 但这不会终止页面执行。它将在当前页面处理结束后重定向。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T17:02:13.623

这样做是因为 Response.Redirect 中的第二个参数设置为`false`- 这意味着您不会结束页面其余部分的执行。

如果将其设置为`true`，则页面执行结束（防止内容页面的 Page_Load 触发。**编辑**：以及与此相关的任何其他后续母版页事件）

```
Response.Redirect("~/login.aspx", True) 
```

检查它对您所有页面的作用......例如，您的`login.aspx`页面*不应*具有与上面编写代码的方式相同的母版页......

# c# - 在 C# 中获取下载文件夹？

> ID：10667012
> 
> 赞同：69
> 
> 时间：2012-05-19T16:33:40.133
> 
> 标签：c#, directory, visual-c#-express-2010

我编写了一些代码来搜索目录并在列表框中显示文件。

```
DirectoryInfo dinfo2 = new DirectoryInfo(@"C:\Users\Hunter\Downloads");
FileInfo[] Files2 = dinfo2.GetFiles("*.sto");
foreach (FileInfo file2 in Files2)
{
     listBox1.Items.Add(file2.Name);
} 
```

我什至试过这个：

```
string path = Environment.SpecialFolder.UserProfile + @"\Downloads";
DirectoryInfo dinfo2 = new DirectoryInfo(Environment.SpecialFolder.UserProfile + path);
FileInfo[] Files2 = dinfo2.GetFiles("*.sto");
foreach (FileInfo file2 in Files2)
{
     listBox1.Items.Add(file2.Name);
} 
```

我得到一个错误虽然......

好的，它在哪里说`Users\Hunter`好吧，当人们得到我的软件时，没有猎人的名字......那么我如何让它进入任何用户的下载文件夹？

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2014-02-22T11:32:21.240

WinAPI 方法[`SHGetKnownFolderPath`](https://msdn.microsoft.com/en-us/library/windows/desktop/bb762188%28v=vs.85%29.aspx)是检索特殊文件夹（包括个人文件夹和下载文件夹）路径的唯一正确方法。

还有其他方法可以获得类似的结果，看起来很有希望，但最终在特定系统上会出现完全错误的路径（例如，组合或硬编码路径的部分或滥用旧的注册表项）。[我的 CodeProject 文章](http://www.codeproject.com/Articles/878605/Getting-all-Special-Folders-in-NET)中说明了其背后的原因，该文章还列出了完整的解决方案。它提供了一个包装类，支持检索所有已知的 94 个特殊文件夹以及更多好东西。

这里有一个简单的例子，我只是粘贴了一个缩短版本的解决方案，只能检索个人特殊文件夹，如下载：

```
using System;
using System.Runtime.InteropServices;

/// <summary>
/// Class containing methods to retrieve specific file system paths.
/// </summary>
public static class KnownFolders
{
    private static string[] _knownFolderGuids = new string[]
    {
        "{56784854-C6CB-462B-8169-88E350ACB882}", // Contacts
        "{B4BFCC3A-DB2C-424C-B029-7FE99A87C641}", // Desktop
        "{FDD39AD0-238F-46AF-ADB4-6C85480369C7}", // Documents
        "{374DE290-123F-4565-9164-39C4925E467B}", // Downloads
        "{1777F761-68AD-4D8A-87BD-30B759FA33DD}", // Favorites
        "{BFB9D5E0-C6A9-404C-B2B2-AE6DB6AF4968}", // Links
        "{4BD8D571-6D19-48D3-BE97-422220080E43}", // Music
        "{33E28130-4E1E-4676-835A-98395C3BC3BB}", // Pictures
        "{4C5C32FF-BB9D-43B0-B5B4-2D72E54EAAA4}", // SavedGames
        "{7D1D3A04-DEBB-4115-95CF-2F29DA2920DA}", // SavedSearches
        "{18989B1D-99B5-455B-841C-AB7C74E4DDFC}", // Videos
    };

    /// <summary>
    /// Gets the current path to the specified known folder as currently configured. This does
    /// not require the folder to be existent.
    /// </summary>
    /// <param name="knownFolder">The known folder which current path will be returned.</param>
    /// <returns>The default path of the known folder.</returns>
    /// <exception cref="System.Runtime.InteropServices.ExternalException">Thrown if the path
    ///     could not be retrieved.</exception>
    public static string GetPath(KnownFolder knownFolder)
    {
        return GetPath(knownFolder, false);
    }

    /// <summary>
    /// Gets the current path to the specified known folder as currently configured. This does
    /// not require the folder to be existent.
    /// </summary>
    /// <param name="knownFolder">The known folder which current path will be returned.</param>
    /// <param name="defaultUser">Specifies if the paths of the default user (user profile
    ///     template) will be used. This requires administrative rights.</param>
    /// <returns>The default path of the known folder.</returns>
    /// <exception cref="System.Runtime.InteropServices.ExternalException">Thrown if the path
    ///     could not be retrieved.</exception>
    public static string GetPath(KnownFolder knownFolder, bool defaultUser)
    {
        return GetPath(knownFolder, KnownFolderFlags.DontVerify, defaultUser);
    }

    private static string GetPath(KnownFolder knownFolder, KnownFolderFlags flags,
        bool defaultUser)
    {
        int result = SHGetKnownFolderPath(new Guid(_knownFolderGuids[(int)knownFolder]),
            (uint)flags, new IntPtr(defaultUser ? -1 : 0), out IntPtr outPath);
        if (result >= 0)
        {
            string path = Marshal.PtrToStringUni(outPath);
            Marshal.FreeCoTaskMem(outPath);
            return path;
        }
        else
        {
            throw new ExternalException("Unable to retrieve the known folder path. It may not "
                + "be available on this system.", result);
        }
    }

    [DllImport("Shell32.dll")]
    private static extern int SHGetKnownFolderPath(
        [MarshalAs(UnmanagedType.LPStruct)]Guid rfid, uint dwFlags, IntPtr hToken,
        out IntPtr ppszPath);

    [Flags]
    private enum KnownFolderFlags : uint
    {
        SimpleIDList              = 0x00000100,
        NotParentRelative         = 0x00000200,
        DefaultPath               = 0x00000400,
        Init                      = 0x00000800,
        NoAlias                   = 0x00001000,
        DontUnexpand              = 0x00002000,
        DontVerify                = 0x00004000,
        Create                    = 0x00008000,
        NoAppcontainerRedirection = 0x00010000,
        AliasOnly                 = 0x80000000
    }
}

/// <summary>
/// Standard folders registered with the system. These folders are installed with Windows Vista
/// and later operating systems, and a computer will have only folders appropriate to it
/// installed.
/// </summary>
public enum KnownFolder
{
    Contacts,
    Desktop,
    Documents,
    Downloads,
    Favorites,
    Links,
    Music,
    Pictures,
    SavedGames,
    SavedSearches,
    Videos
} 
```

（在上面链接的 CodeProject 文章中可以找到完整注释的版本。）

虽然这只是一面令人讨厌的代码墙，但您必须处理的表面非常简单。这是输出下载文件夹路径的控制台程序示例。

```
private static void Main()
{
    string downloadsPath = KnownFolders.GetPath(KnownFolder.Downloads);
    Console.WriteLine("Downloads folder path: " + downloadsPath);
    Console.ReadLine();
} 
```

例如，只需使用要查询的路径的文件夹`KnownFolders.GetPath()`的枚举值调用。`KnownFolder`

**NuGet 包**

如果您不想经历所有这些麻烦，只需安装我最近创建的 NuGet 包。这是[项目站点](https://gitlab.com/Syroot/KnownFolders)，这里是[图库链接](https://www.nuget.org/packages/Syroot.Windows.IO.KnownFolders)（请注意，用法不同且经过优化，请参阅项目站点上的“使用”部分以获取更多信息）。

```
PM> Install-Package Syroot.Windows.IO.KnownFolders 
```

用法：

```
using System;
using Syroot.Windows.IO;

class Program
{
    static void Main(string[] args)
    {
        string downloadsPath = new KnownFolder(KnownFolderType.Downloads).Path;
        Console.WriteLine("Downloads folder path: " + downloadsPath);
        Console.ReadLine();
    }
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-03-18T05:56:00.493

最简单的方法是：

```
Process.Start("shell:Downloads"); 
```

如果只需要获取当前用户的下载文件夹路径，可以这样：

我从@PacMani 的代码中提取了它。

```
 // using Microsoft.Win32;
string GetDownloadFolderPath() 
{
    return Registry.GetValue(@"HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Explorer\Shell Folders", "{374DE290-123F-4565-9164-39C4925E467B}", String.Empty).ToString();
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-09-06T21:39:00.337

跨平台版本：

```
public static string getHomePath()
{
    // Not in .NET 2.0
    // System.Environment.GetFolderPath(Environment.SpecialFolder.UserProfile);
    if (System.Environment.OSVersion.Platform == System.PlatformID.Unix)
        return System.Environment.GetEnvironmentVariable("HOME");

    return System.Environment.ExpandEnvironmentVariables("%HOMEDRIVE%%HOMEPATH%");
}

public static string getDownloadFolderPath()
{
    if (System.Environment.OSVersion.Platform == System.PlatformID.Unix)
    {
        string pathDownload = System.IO.Path.Combine(getHomePath(), "Downloads");
        return pathDownload;
    }

    return System.Convert.ToString(
        Microsoft.Win32.Registry.GetValue(
             @"HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Explorer\Shell Folders"
            ,"{374DE290-123F-4565-9164-39C4925E467B}"
            ,String.Empty
        )
    );
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-04T19:06:06.820

`string download = Environment.GetEnvironmentVariable("USERPROFILE")+@"\"+"Downloads";`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-19T16:37:42.770

[http://msdn.microsoft.com/en-us//library/system.environment.specialfolder.aspx](http://msdn.microsoft.com/en-us//library/system.environment.specialfolder.aspx)

有些变量带有一些特殊文件夹的路径。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-05-19T16:43:33.280

通常，您的软件应具有一个可配置的变量，该变量存储用户的下载文件夹，可由用户分配，并在未设置时提供默认值。您可以将值存储在应用程序配置文件或注册表中。

然后在您的代码中读取存储位置的值。

# algorithm - O(2^n*n) 的背包算法

> ID：10667017
> 
> 赞同：-1
> 
> 时间：2012-05-19T16:34:04.783
> 
> 标签：algorithm, language-agnostic, knapsack-problem

哪种背包问题的算法具有 O(2^n*n) 复杂度？

我被要求为背包问题实施解决方案。

我熟悉编程，但不熟悉渐近符号。

谁能告诉我哪种算法的复杂度为 O(2^n*n)？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T16:42:05.507

O(n * 2^n) 是蛮力算法的性能（= 只是尝试所有组合），请参阅[http://en.wikipedia.org/wiki/Knapsack_problem#Meet-in-the-Middle_Algorithm](http://en.wikipedia.org/wiki/Knapsack_problem#Meet-in-the-Middle_Algorithm)

# wpf - 如何在wpf中弹出图像，不仅是高度和宽度，还包括左侧和顶部？

> ID：10667020
> 
> 赞同：0
> 
> 时间：2012-05-19T16:34:32.627
> 
> 标签：wpf, image, scale

嗨，伙计们，我看到并尝试了使用 andrej 博客中关于如何平滑弹出图像的 scaletransform 的代码，这很好。这是代码

```
<Window.Resources>
 <Storyboard x:Key="expandStoryboard">
    <DoubleAnimation Storyboard.TargetProperty="RenderTransform.ScaleX"
        To="2" Duration="0:0:0.2" />
    <DoubleAnimation Storyboard.TargetProperty="RenderTransform.ScaleY"
        To="2" Duration="0:0:0.2" />
</Storyboard>
<!-- This storyboard will make the image revert to its original size -->
<Storyboard x:Key="shrinkStoryboard">
    <DoubleAnimation Storyboard.TargetProperty="RenderTransform.ScaleX"
        To="1" Duration="0:0:0.2" />
    <DoubleAnimation Storyboard.TargetProperty="RenderTransform.ScaleY"
        To="1" Duration="0:0:0.2" />
</Storyboard>
</Window.Resources> 
```

在网格区域，是这样的：

```
 <Image Name="image2" Source="C:\Documents and Settings\My Documents\Visual Studio 2010\settings_256.png" Margin="23,44,372,221" HorizontalAlignment=" center" VerticalAlignment="Center" >
        <Image.Triggers>
            <EventTrigger RoutedEvent="Image.MouseEnter">
                <BeginStoryboard Storyboard="{StaticResource expandStoryboard}" />
            </EventTrigger>
            <EventTrigger RoutedEvent="Image.MouseLeave">
                <BeginStoryboard Storyboard="{StaticResource shrinkStoryboard}" />
            </EventTrigger>
        </Image.Triggers>
        <Image.RenderTransform>
            <ScaleTransform ScaleX="1" ScaleY="1"/>
        </Image.RenderTransform>
    </Image> 
```

因此，当我将鼠标指向图像时，它会平滑地调整图像的高度和宽度。但我还想做的是，如果我要进行鼠标悬停，我希望图像的左侧和顶部会改变位置，比如减少像 image1.margin(left-5,top-5) 这样的边距。所以它会将图像弹出为宽度++高度++左--顶部--

任何人？谢谢，上帝保佑:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T02:43:21.780

您可以使用[UIElement.RenderTransformOrigin 属性](http://msdn.microsoft.com/en-us/library/system.windows.uielement.rendertransformorigin.aspx)：

```
<Image RenderTransformOrigin="0.5, 0.5"
       Name="image2" Source="C:\Documents and Settings\My Documents\Visual Studio 2010\settings_256.png"
       Margin="23,44,372,221" HorizontalAlignment="center" VerticalAlignment="Center">
    <Image.Triggers>
        <EventTrigger RoutedEvent="Image.MouseEnter">
            <BeginStoryboard Storyboard="{StaticResource expandStoryboard}" />
        </EventTrigger>
        <EventTrigger RoutedEvent="Image.MouseLeave">
            <BeginStoryboard Storyboard="{StaticResource shrinkStoryboard}" />
        </EventTrigger>
    </Image.Triggers>
    <Image.RenderTransform>
        <ScaleTransform ScaleX="1" ScaleY="1"/>
    </Image.RenderTransform>
</Image> 
```

# jquery - 计算输入错误并禁用提交按钮 Jquery

> ID：10667022
> 
> 赞同：1
> 
> 时间：2012-05-19T16:35:14.660
> 
> 标签：jquery, validation, input, submit

好吧，我开发了一个简单的字段验证脚本注册，并想使如果有一些错误，一些空白，被禁用按钮发送表单。

我有几个字段，如果一个或全部为空，则发送按钮被禁用。

我的脚本的一部分：

```
$('#tipo_pessoa').focusout(function () {
    if ($(this).val() == '') {
        $(this).toggleClass('inputs_error-select')
        $("label[for='tipo_pessoa']").fadeIn().html('<img src="../imagens/error.png" align="absmiddle" />&nbsp;Campo obrigatório');

        ErrorSound();
    } else {
        $(this).toggleClass('inputs, inputs_error-select')
        $("label[for='tipo_pessoa']").text('');

    }
});

$('#razao_social').focusout(function () {
    if ($(this).val() == '' || $(this).val() == $(this).attr("placeholder")) {
        $(this).removeClass('inputs').addClass('inputs_error');
        $("label[for='razao_social']").fadeIn().html('<img src="../imagens/error.png" align="absmiddle" />&nbsp;O Campo Razão Social deve ser preenchido');
        ErrorSound();
    } else {
        $(this).removeClass('inputs_error').addClass('inputs');
        $("label[for='razao_social']").text('');

    }
}); 
```

我需要一个脚本来计算/检查任何错误，如果有任何一个或多个错误，提交按钮被禁用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T16:51:07.130

当有空字段时，您可以阻止表单提交：

```
$('form').submit(function(e){
   return $('#input1, #input2').filter(function() {
      return $.trim(this.value).length === 0;
   }).length === 0;
}); 
```

# c# - 防止单元格级制表位，但仍允许行在 WPF DataGrid 中具有制表位

> ID：10667025
> 
> 赞同：3
> 
> 时间：2012-05-19T16:36:12.810
> 
> 标签：c#, wpf, datagrid

我希望防止单个单元格上的制表位，但允许行级制表位

我以为我可以使用 CellStyle 禁用所有单元格上的 IsTabStop

```
<DataGrid.CellStyle>
    <Style TargetType="DataGridCell">
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="IsTabStop" Value="false"/>
    </Style>
</DataGrid.CellStyle> 
```

但这也可以防止行有制表位

所以我想我应该使用 RowStyle 在行上启用制表位

```
<DataGrid.RowStyle>
    <Style TargetType="DataGridRow">
        <Setter Property="IsTabStop" Value="true"/>
    </Style>
</DataGrid.RowStyle> 
```

但这也不起作用

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-19T23:43:00.030

我的解决方案是这样 -

将所有 DataGridCell 列的 IsTabStop 更改为 false

将我的主列的 IsTabStop 更改为 true，该列是 DataGridTemplateColumn

```
<DataGrid.CellStyle>
    <Style TargetType="DataGridCell">
        <Setter Property="IsTabStop" Value="false"/>
    </Style>
</DataGrid.CellStyle>

<DataGrid.Columns>

    <DataGridTemplateColumn Header="File name" Width="435">

        <DataGridTemplateColumn.CellStyle>
            <Style TargetType="DataGridCell">
                <Setter Property="IsTabStop" Value="true"/>
                <Setter Property="BorderThickness" Value="0"/>
                <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
            </Style>
        </DataGridTemplateColumn.CellStyle>

    ........... 
```

通过包含这条线，我可以禁用虚线方形边框

```
<Setter Property="FocusVisualStyle" Value="{x:Null}"/> 
```

**编辑***

没关系，这太麻烦了。我认为此时使用列表视图对我来说更有意义。

# java - Google App Engine 设置替换 Dev vs Online

> ID：10667026
> 
> 赞同：2
> 
> 时间：2012-05-19T16:36:26.210
> 
> 标签：java, google-app-engine, jsp

我正在编写一个 Google App Engine (Java) 应用程序，它使用 OAuth 进行身份验证，从多个 REST 服务读取数据。为了在我的开发和在线环境中支持 OAuth 回调，我为 REST 服务创建了 2 个单独的 OAuth 密钥 - 1 个对 127.0.0.1（开发服务器）进行回调，1 个对我的真实 GAE 网站 URL 进行回调. 这一切都很好，很快乐。

目前，为了支持这一点，我基本上在我的代码中都有许多这样的语句，任何需要 Dev 和 Online 不同值的地方......

```
String devServer = request.getServerName();
if (devServer != null && devServer .equals("127.0.0.1")){
    oauthKey = "<my_dev_key>";
}
else {
    oauthKey = "<my_online_key>";
} 
```

我想知道 GAE 是否有能力为 Development vs Online 自动替换不同的值。我在想类似“设置”文件，它为单个设置指定 2 个不同的值，这样当应用程序上传到 GAE 时，它会将所有设置引用替换为在线值。为了安全起见，我希望在上传时替换这些值，而不是在服务器上放置一个包含我的开发设置的文件。

每次我希望将新版本上传到 GAE 时，是否有任何替代方案能够在没有太多手动工作的情况下获得类似的结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T20:37:26.893

`Properties`我会使用 Maven 及其[Profile](http://maven.apache.org/guides/introduction/introduction-to-profiles.html)功能将凭证存储在不同的文件中，以便为任何特定环境构建工件。

看看[这个项目](http://code.google.com/p/maven-gae-plugin/)的 Google App Engine Maven 插件。

# objective-c - 未检测到 iOS 应用 URL

> ID：10667030
> 
> 赞同：4
> 
> 时间：2012-05-19T16:36:58.997
> 
> 标签：objective-c, ios, url

我为我的 iOS 应用程序创建了一个自定义应用程序 URL。URL 格式与此类似：

```
myappname://texttobeparsed 
```

当我将 URL 粘贴到 safari 中时，这可以正常工作，我的应用程序会打开并正确处理 URL。问题是 iMessage 或 Notes 等其他应用程序无法将其识别为 URL。

**为什么这个 URL 方案不被识别为 URL**？这可能与我在**info.plist**文件或其他文件中的设置方式有关吗？

或者，URL 是否需要采用不同的格式才能被识别？

`itms://itunes.com/apps/appname`我知道系统可以将其识别为网络浏览器以外的应用程序中的 URL，因为我以前在其他应用程序（例如 iTunes:或 Twitter:`twitter://`或 Facebook: `fb://`）中见过它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T16:53:03.253

~~你对此无能为力。如果链接不是明确的（例如在 HTML 电子邮件中），这些应用程序只能识别一组内置的标准 URL 方案。是 Apple 自己的方案之一（适用于 iTunes Store），因此除了标准的, , ... 方案`itms://`外，它还受支持是有道理的。`mailto://``http://``tel://`~~

**编辑：**我猜想用于确定什么构成文本视图等中的有效 URL 的信息以某种方式被缓存。与我最初的猜测相反，似乎特定于应用程序的 URL在 Notes 等中*确实*`tweetbot://`有效。我已经用例如（我已安装）和`twitter://`（我尚未安装）对此进行了测试，以验证它是否不只是检查类似的模式`*://`，而是实际使用有关已安装应用程序的信息。

我建议您尝试重新启动设备。如果某些缓存有问题，那可能会有所帮助，如果您的 URL 方案已经在 Safari 中工作，我认为您无能为力。

**更新：**我已经安装了官方 Twitter 应用程序来测试这一点，该`twitter://`方案没有立即在 Notes 中被识别，但在杀死并重新启动 Notes 应用程序后，它可以工作。

**更新 2：**我已经使用`myappname://`自定义 URL 方案完成了一个最小的测试应用程序。同样，与 Twitter 应用程序一样，它在重新启动 Notes 应用程序后工作，因此它似乎与应用程序的受欢迎程度或是否已提交无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-14T00:30:56.023

我无法回答为什么它不起作用（除了猜测链接解释器是硬编码的，只能识别某些 URL 方案），但我可以说解决这个问题的典型方法是链接到一个网页，并且有网页重定向到您的自定义方案。

它稍微不那么优雅，因为用户会看到 Safari 在被转发到您的应用程序之前短暂打开，但它也更健壮，因为如果用户的应用程序没有安装，网页可以提供到应用程序商店的链接来安装应用程序电话。

# wpf - WCF 到 WPF 类 INotifyPropertyChanged 怎么样

> ID：10667034
> 
> 赞同：2
> 
> 时间：2012-05-19T16:37:09.203
> 
> 标签：wpf, wcf, inotifypropertychanged

我有以下 WCF 类：

```
[DataContract]
public class Book
{
    [DataMember]
    public int Id{get;set;}
    [DataMember]
    public string Title {get;set;}
} 
```

当我将此类检索到我的 WPF 应用程序时，我希望它实现 INotifyPropertyChanged 接口。

这样做的正确方法是什么？

从 WCF 检索数据后，我应该将数据复制到另一个类，该类实现 INotifyPropertyChanged，还是应该在 WCF 类中实现它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T17:32:07.347

正确的方法是使用 Visual Studio 中的添加服务引用添加引用 - 默认情况下，这会创建一个包含以下元素的 Reference.svcmap 文件 `<EnableDataBinding>true</EnableDataBinding>`。此元素控制 INotifyPropertyChanged 代码的生成。默认情况下，它设置为 true，因此生成的客户端类将已经实现 INotifyPropertyChanged。

如果您使用的是命令工具 (svcutil.exe)，您将需要查看选项 /enableDataBinding- [，如此处所述](http://msdn.microsoft.com/en-us/library/aa751905.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T16:57:59.330

在你的类中实现`INotifyPropertyChanged`接口。`Book`只要`Book`您的 WCF 服务实现和 WPF 应用程序都可以使用同一个类，那么您应该没问题。

# java - 返回基于 jetty 8 的 websocket 服务器上的连接数

> ID：10667037
> 
> 赞同：4
> 
> 时间：2012-05-19T16:37:18.167
> 
> 标签：java, jetty, websocket, embedded-jetty

我有一个基于 websocket 服务器（嵌入式码头 8）的应用程序（java），我正在寻找一种方法来返回当前连接数。有这样的事吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T20:31:32.457

[http://wiki.eclipse.org/Jetty/Tutorial/Statistics](http://wiki.eclipse.org/Jetty/Tutorial/Statistics)

这将是一种方法，另一种方法是启用 jmx 并从 bean 中提取。如果您想要 jmx + rest 方法，那么您可以使用此处描述的设置：

[http://webtide.intalio.com/2011/05/jetty-jmx-webservice/](http://webtide.intalio.com/2011/05/jetty-jmx-webservice/)

最后，如果你想自己做，你可以看看它是如何在统计处理程序中收集的，并为它设置你自己的代码。

[http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/jetty-server/src/main/java/org/eclipse/jetty/server/handler/StatisticsHandler.java](http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/jetty-server/src/main/java/org/eclipse/jetty/server/handler/StatisticsHandler.java)

（好的，我已经删除了这个，但是我正在取消删除，因为它会给你在代码中寻找什么来做你想做的事情的基础知识，但它并不严格并且回答 websocket 连接计数，我怀疑我们需要添加仍然是统计 servlet）

# php - httpd.conf 多个虚拟主机

> ID：10667046
> 
> 赞同：0
> 
> 时间：2012-05-19T16:38:17.233
> 
> 标签：php, macos, apache, virtualhost

在 Mac OSX Lion 上为 PHP 编码，在 httpd.conf 文件中使用以下内容：

```
<VirtualHost *:80>
    DocumentRoot /Users/user/Sites/wordpress
    ServerName wordpress.local
    <Directory “/Users/user/Sites/wordpress">
        AllowOverride All
        Options All
    </Directory>
</VirtualHost> 
```

在主机文件中：

```
127.0.0.1 wordpress.local 
```

这一切都很好。我想要做的是允许第一部分接受某种通配符，以便我可以向主机文件添加几个页面，但不必一直弄乱 httpd.conf 文件。我曾经能够使用 %1 和 %0 而不是目录名来使其正常工作，但现在似乎存在问题。

非常感谢所有帮助。

干杯，大卫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T16:40:24.000

我认为 Rob Allen 的以下博文应该会有所帮助：[**Automatic Apache vhosts**](http://akrabat.com/computing/automatic-apache-vhosts/)

文章的第一部分是关于[**`mod_vhost_alias`**](http://httpd.apache.org/docs/2.2/mod/mod_vhost_alias.html)，它将允许您使用通配符**`ServerAlias`**，它​​添加的[**`VirtualDocumentRoot`**](http://httpd.apache.org/docs/2.2/mod/mod_vhost_alias.html#virtualdocumentroot)指令和**`Directory`**。

# android - 当类明显存在时，我得到一个 java.lang.NoClassDefFoundError

> ID：10667048
> 
> 赞同：2
> 
> 时间：2012-05-19T16:38:22.730
> 
> 标签：android, eclipse, maven, ant, noclassdeffounderror

当我尝试在运行时使用该库时出现以下错误： java.lang.NoClassDefFoundError: com.google.api.client.extensions.android2.AndroidHttp 我已将此库添加到我的项目中，它是第一个 jar Maven 依赖项（虽然我不是 100% 习惯于 Maven）。

另外，我的理解是 Ant 正在寻找 libs 文件夹中的 jars，但是 Maven 使用它自己的文件夹，这对于其他项目来说很好用。所以我迷路了..任何关于我应该如何解决这个问题的线索/帮助将不胜感激！

![在此处输入图像描述](../Images/3251c56fcdea5653f4a65775cdd2d1be.png)

![在此处输入图像描述](../Images/bd49d1b2b39fe446a047c6c89eb16b01.png)

![在此处输入图像描述](../Images/be3a6b29fbb78af35e373f1facba64cb.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T16:42:42.790

似乎您没有正确添加罐子。也似乎你错过了第 6 步。

如果您想将此 jar 包含到您的 Android 项目中，那么您只需在 Eclipse 环境中执行以下步骤。

1.  在项目面板中右键单击您的项目。
2.  选择“属性”选项。
3.  在“属性”窗口中，单击“Java 构建路径”。
4.  在该窗口的右侧，选择“库”选项卡。
5.  单击“添加外部 JAR”按钮，然后将此库添加到您之前保存的位置。
6.  现在点击“Order and Export”选项卡并检查“JarName.jar”</li>
7.  点击“确定”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T23:00:00.780

作为快速修复，通过`Maven Dependencies`在`Java Build Path - Order and Export`窗口中打勾应该可以解决 NoClassDefFoundError。

根据您附加的屏幕截图，您似乎按照谷歌在开发指南中建议的标准方式在 Eclipse 中设置（或导入）您的 Android 项目，但也以某种方式使用 Maven 管理一些 jar 依赖项。不建议这样做，您应该使用纯 google 标准方式（自 r17 以来的 libs/ 文件夹）或完全 mavenize 您的 android 项目以进行依赖管理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T16:46:40.327

似乎该库未导出。

在您的项目文件夹下，打开`.classpath`文件，仔细检查这一行：

```
<classpathentry exported="true" kind="lib" path="google-http-client-android2-1.8.3-beta.jar"/> 
```

如果`exported="false"`，则将其更改为`exported="true"`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T16:52:29.330

在您的项目文件夹下创建一个名为的新文件`libs`夹，并将此库添加到该文件夹​​。

我在使用 kSOAP 库时遇到了同样的问题，这解决了我的问题......

**编辑**

我刚刚看到你已经有了那个文件夹。添加库...

# xml - xpath - if else 结构

> ID：10667052
> 
> 赞同：2
> 
> 时间：2012-05-19T16:38:48.993
> 
> 标签：xml, xpath, xpath-2.0

我正在尝试使用 xpath。

这是我用于实验的 xml：

```
<moves>
    <roll player="1">6</roll>
    <piece nr="1" player="1" field="1"/>
    <roll player="2">4</roll>
    <roll player="2">6</roll>
    <piece nr="5" player="2" field="11"/>
    <roll player="1">4</roll>
    <piece nr="1" player="1" field="5"/>
    <roll player="2">6</roll>
    <piece nr="5" player="2" field="17"/>
    <roll player="1">6</roll>
    <piece nr="2" player="1" field="1"/>
    <roll player="2">6</roll>
    <piece nr="6" player="2" field="11"/>
</moves> 
```

那么如何在 xpath 中实现 if else 呢？

就像第二个动作来自玩家一，然后做 f.ex.: 把它还给...

**更新 1：**

好的，这就是我的意思：

```
boolean(/game/moves/roll[2]/@player=1 
```

如果第二个元素是否是玩家 1，这会返回给我，所以现在我想添加一个 else-Path，如果它会这样？那么如何添加呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-19T18:38:11.890

**使用如下所示的 XPath 2.0 表达式**：

```
if(/moves/roll[2]/@player eq '1')
  then 'player: 1'
  else ('player: ', data(/moves/roll[2]/@player) ) 
```

**基于 XSLT 2.0 的验证：**

```
<xsl:stylesheet version="2.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:xs="http://www.w3.org/2001/XMLSchema">
 <xsl:output method="text"/>

 <xsl:template match="/">
  <xsl:sequence select=
  "if(/moves/roll[2]/@player eq '1')
      then 'player: 1'
      else ('player: ', data(/moves/roll[2]/@player) )
  "/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<moves>
    <roll player="1">6</roll>
    <piece nr="1" player="1" field="1"/>
    <roll player="2">4</roll>
    <roll player="2">6</roll>
    <piece nr="5" player="2" field="11"/>
    <roll player="1">4</roll>
    <piece nr="1" player="1" field="5"/>
    <roll player="2">6</roll>
    <piece nr="5" player="2" field="17"/>
    <roll player="1">6</roll>
    <piece nr="2" player="1" field="1"/>
    <roll player="2">6</roll>
    <piece nr="6" player="2" field="11"/>
</moves> 
```

**对上述 XPath 表达式求值，并将求值结果复制到输出：**

```
player:  2 
```

# php - PhP 未定义变量

> ID：10667055
> 
> 赞同：0
> 
> 时间：2012-05-19T16:39:33.253
> 
> 标签：php

好的，所以我正在尝试从其他人的代码中自学 php；一些代码可能已经过时了，但在我有时间去上学之前，它可以用来完成基本操作。我的问题是未定义变量错误。目前我能找到的关于这个主题的只是如何隐藏错误，但我不想隐藏；如果它是隐藏的，这并不意味着问题已经解决，这意味着您已经找到了一种忽略它的方法，我认为这是一个很大的问题。它给你错误是有原因的。

我收到错误的那一行。

```
<form method=post
      <?php echo "action=\"registration.php?f=".(!$flag)."&amp;s=".$sort."\""; ?> 
      enctype="multipart/form-data" > 
```

然后这是页面上的问题。

```
Notice: Undefined variable: flag in C:\wamp\www\info\registration.php on line 236 
```

还有其他相同的，但我觉得如果我可以在这里学习如何解决这个问题，它也将成为其他人的解决方案。如果您需要任何额外的信息，请告诉我。提前致谢。抱歉这么挑剔；我只是不想忽视那些试图在我面前传播的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T16:45:33.163

阅读别人的代码来学习是一件好事——我希望更多的人会这样做；）

PHP 是一种“脚本语言”。与 C#、C++ 或 Java 等更多“强类型”语言不同，“脚本语言”几乎可以让您随时随地开始使用变量。

它很方便，很灵活……但是如果在变量初始化之前就 开始*使用*它可能会导致问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T16:53:47.810

要回答您的问题 - 找出`$flag`在这种情况下应该表示什么，并相应地进行设置。它看起来像一个布尔值，所以它可能就像`$flag = true;`在表单渲染之前使用一样简单。但同样，如果你复制了这个，你可能不需要它——也许你可以从你的代码中删除它？

现在我推荐一个风格约定。在您的示例中，您正在回显标签的`action`属性`form`- 如果该属性依赖于变量并且可能不会被使用，我只会这样做。

我认为这样做更清洁：

```
<form method="post"
      action="registration.php?f=<?php echo !$flag ?>&amp;s=<?php echo $sort ?>"
      enctype="multipart/form-data"
> 
```

您会注意到我已经将标签包裹在几行中。同样，这是可选的，但可以进行完全有效的标记，并有助于避免编辑器中的水平滚动。此外，您可以更轻松地查看每个属性的开始位置，因为每个属性都有自己的行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T16:45:46.947

您正在引用尚未设置的变量（在本例中`$flag`）。

基本上`$flag`还没有分配给它的值，所以不存在。在您提供的代码段`$flag`设置之前，您的代码中是否有任何地方？

# node.js - Node.js 和 Redis 身份验证

> ID：10667056
> 
> 赞同：14
> 
> 时间：2012-05-19T16:39:37.160
> 
> 标签：node.js, redis

我没有获得使用 redis auth 的 redis node.js 文档。

根据示例：

```
var redis = require("redis"),
client = redis.createClient();

// This command is magical. Client stashes the password and will issue on every connect.
client.auth("somepass"); 
```

在我的代码中，我有以下内容：

```
var redis = require("redis");
r = redis.createClient(6379,'xxx.xxx.xxx.xxx');
r.auth("yyyyyyyy");

app.get('/', function(req, res){
r.set("foo", 'bar');
res.writeHead(200, {'Content-Type': 'image/gif'});
res.end('Hello');
 }); 
```

这是我得到的错误：

```
 Express server listening on port 8070 in development mode

/home/ubuntu/workspace/rtbopsConfig/rtbServers/rtbNodejsServer/node_modules/redis/index.js:468
                throw callback_err;
                      ^
Error: Auth error: Error: ERR Client sent AUTH, but no password is set
    at Command.callback (/home/ubuntu/workspace/rtbopsConfig/rtbServers/rtbNodejsServer/node_modules/redis/index.js:163:43)
    at RedisClient.return_error (/home/ubuntu/workspace/rtbopsConfig/rtbServers/rtbNodejsServer/node_modules/redis/index.js:464:25)
    at HiredisReplyParser.<anonymous> (/home/ubuntu/workspace/rtbopsConfig/rtbServers/rtbNodejsServer/node_modules/redis/index.js:253:14)
    at HiredisReplyParser.emit (events.js:67:17)
    at HiredisReplyParser.execute (/home/ubuntu/workspace/rtbopsConfig/rtbServers/rtbNodejsServer/node_modules/redis/lib/parser/hiredis.js:41:18)
    at RedisClient.on_data (/home/ubuntu/workspace/rtbopsConfig/rtbServers/rtbNodejsServer/node_modules/redis/index.js:440:27)
    at Socket.<anonymous> (/home/ubuntu/workspace/rtbopsConfig/rtbServers/rtbNodejsServer/node_modules/redis/index.js:70:14)
    at Socket.emit (events.js:67:17)
    at TCP.onread (net.js:367:14)
[7]+  Killed                  node app.js 8070 
```

那么，正确的身份验证方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-19T12:06:49.457

此问题的另一个原因可能是在启动 redis-server 时未指定您的 redis.conf（如果您在其中放入“requirepass”）。

在这种情况下，redis 服务器以默认配置启动（即未启用“requirepass”选项），因此不接受您的 AUTH 命令。

```
./src/redis-server redis.conf 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T17:09:19.130

这是使用身份验证的正确方法。

我相信您正在尝试使用旧版本的 Redis 服务器，其协议不受 node_redis 支持（反之亦然）。

或者，您可能没有连接到您认为受密码保护的实例，或者您没有在目标实例的配置中设置密码。

我建议您尝试使用 redis-cli 连接到实例并使用 auth 来测试身份验证（即绕过 node.js）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-09-15T12:45:31.383

以下代码使用节点包 redis 创建到 Redis 的连接。

```
const redis = require('redis');

const client = redis.createClient({
    host: '<hostname>',
    port: <port>,
    password: '<password>'
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-10T12:53:25.757

较新版本的 Redis 默认启用保护模式，仅接受环回和 unix 域套接字。

要从外部连接，请在 redis.conf 中绑定到`bind publicip anotherip etc` 和`requirepass foobared`。现在用`redis-cli ping`.
如果没有`requirepass`人可以`FLUSHALL`:)

启用防火墙以过滤端口访问以进一步保护，另请参阅[快速入门安全说明。](https://redis.io/topics/quickstart)

您可以（临时）使用 ssh 隧道而不是暴露端口：因为我想要一个简单且加密的隧道，所以在客户端运行：

```
 ssh -f -N -L 6379:127.0.0.1:6379 user@<serverip> 
```

在开始之前`node index.js`，redis 保存在其环回地址服务器端，我在客户端上使用端口转发（-f -N 用于后台进程 ps -x）和设置 ssh 密钥。
如果坚持不懈，您应该研究推荐[的 spiped](https://redis.io/topics/encryption)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-19T17:10:11.957

我在redis auth文档下发现了其他人有同样的问题

[http://redis.io/commands/auth](http://redis.io/commands/auth)

您可能想从那里跟进

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-20T06:35:44.720

我怀疑你和我有同样的问题。通过将 redis 模块本身作为选项传递给 RedisStore 构造函数，我设法修复了我的问题：

[Node.js 和 socket.io 的 Redis 身份验证错误](https://stackoverflow.com/questions/13438613/redis-auth-error-with-node-js-and-socket-io)

没有它，RedisStore 模块将无法将您传入的 RedisClient 对象识别为“真正的”RedisClient 对象（因为它们将是来自*不同*redis 的 redis.RedisClient 类），并且 RedisStore 将重新创建它们并丢失身份验证你设置。

# jquery - 在 iOS5.1 上的 Safari 中使用 Jquery mobile 的 CKEditor 中的行为不一致

> ID：10667057
> 
> 赞同：1
> 
> 时间：2012-05-19T16:39:58.907
> 
> 标签：jquery, jquery-mobile, ckeditor

[http://demo.goseamless.co.za/cktest/](http://demo.goseamless.co.za/cktest/) - 此链接包含带有错误的代码示例

尝试在 iOS 设备上的编辑器中输入内容，然后通过在编辑器中的不同位置点击来移动光标。并继续输入，编辑器停止响应，然后关闭键盘并再次点击编辑允许您输入。

此外，iOS 屏幕键盘上的“下一个/上一个”按钮在通过控件“切换”时忽略编辑器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:39:35.320

您可能知道，CKEditor（与许多其他 HTML 编辑器一样）是在 iframe 之上实现的。当您在编辑器中点击以移动光标时，由于某种原因，包含编辑器的页面会获得焦点，而编辑器的 iframe 会失去焦点。这就是编辑停止响应的原因。是 JqueryMobile 导致了这种奇怪的焦点转换。

我尝试了不同的解决方法，例如，当编辑器失去焦点时，我试图让编辑器重新获得焦点，或者试图阻止 JqueryMobile 将焦点从编辑器移动到页面。但这些变通办法只能部分解决问题，或者不能全部解决。

我最终升级到 CKEditor 4。（在撰写本文时，它仍处于测试阶段。）CKEditor 4 仍然基于 iframe。所以它和之前的版本有同样的焦点相关问题。但CKEditor 4 也支持内联编辑。此实现基于 contenteditable 元素而不是 iframe。它没有焦点问题。我们根据需要定制了内联实施并在我们的网站上使用它。到目前为止一切正常。

# java - 气氛无法在 Glassfish 3.1.2 上获得会话

> ID：10667058
> 
> 赞同：1
> 
> 时间：2012-05-19T16:40:14.007
> 
> 标签：java, glassfish, websocket, glassfish-3, atmosphere

我从 Atmosphere 获得了[聊天](https://github.com/Atmosphere/atmosphere/tree/master/samples/chat)示例，现在我想获得会话，但我得到一个空指针异常。我的配置：

*   玻璃鱼 3.1.2
*   气氛 1.0.0-SNAPSHOT

我的 ChatAtmosphereHandler.java 文件：

```
@Override
public void onRequest(AtmosphereResource r) throws IOException {

    AtmosphereRequest req = r.getRequest();

    // First, tell Atmosphere to allow bi-directional communication by suspending.
    if (req.getMethod().equalsIgnoreCase("GET")) {

    /* ------- ADDED LINES BY ME ------- */
        double i = Math.random();
        System.out.println(i);
        req.getSession(true).setAttribute("user", i); //Null pointer exception
    /* --------------------------------- */
        // The negotiation header is just needed by the sample to list all the supported transport.
        if (req.getHeader("negotiating") == null) {
            r.suspend();
        } else {
            r.getResponse().getWriter().write("OK");
        }
    // Second, broadcast message to all connected users.
    } else if (req.getMethod().equalsIgnoreCase("POST")) {
        r.getBroadcaster().broadcast(req.getReader().readLine().trim());
    }
} 
```

和异常堆栈跟踪：

```
INFO: 18:07:19.816 [http-thread-pool-8080(4)] WARN  o.a.websocket.WebSocketProcessor - Failed invoking AtmosphereFramework.doCometSupport()
java.lang.NullPointerException: null
    at com.sun.grizzly.tcp.http11.GrizzlyRequest.doGetSession(GrizzlyRequest.java:2271) ~[grizzly-utils.jar:1.9.46]
    at com.sun.grizzly.tcp.http11.GrizzlyRequest.getSession(GrizzlyRequest.java:2226) ~[grizzly-utils.jar:1.9.46]
    at com.sun.grizzly.http.servlet.HttpServletRequestImpl.getSession(HttpServletRequestImpl.java:986) ~[grizzly-http-servlet.jar:1.9.46]
    at com.sun.grizzly.http.servlet.HttpServletRequestImpl.getSession(HttpServletRequestImpl.java:1009) ~[grizzly-http-servlet.jar:1.9.46]
    at org.atmosphere.cpr.AtmosphereRequest.createSession(AtmosphereRequest.java:606) ~[atmosphere-runtime-1.0.0-SNAPSHOT.jar:1.0.0-SNAPSHOT]
    at org.atmosphere.cpr.AtmosphereRequest.getSession(AtmosphereRequest.java:580) ~[atmosphere-runtime-1.0.0-SNAPSHOT.jar:1.0.0-SNAPSHOT]
    at org.atmosphere.cpr.AtmosphereRequest.getSession(AtmosphereRequest.java:600) ~[atmosphere-runtime-1.0.0-SNAPSHOT.jar:1.0.0-SNAPSHOT]
    at org.atmosphere.samples.chat.ChatAtmosphereHandler.onRequest(ChatAtmosphereHandler.java:43) ~[ChatAtmosphereHandler.class:na]
    at org.atmosphere.cpr.AsynchronousProcessor.action(AsynchronousProcessor.java:232) ~[atmosphere-runtime-1.0.0-SNAPSHOT.jar:1.0.0-SNAPSHOT]
    at org.atmosphere.cpr.AsynchronousProcessor.suspended(AsynchronousProcessor.java:165) ~[atmosphere-runtime-1.0.0-SNAPSHOT.jar:1.0.0-SNAPSHOT]
    at org.atmosphere.container.GlassFishWebSocketSupport.service(GlassFishWebSocketSupport.java:111) ~[atmosphere-runtime-1.0.0-SNAPSHOT.jar:1.0.0-SNAPSHOT]
    at org.atmosphere.cpr.AtmosphereFramework.doCometSupport(AtmosphereFramework.java:1125) ~[atmosphere-runtime-1.0.0-SNAPSHOT.jar:1.0.0-SNAPSHOT]
    at org.atmosphere.websocket.WebSocketProcessor.dispatch(WebSocketProcessor.java:183) [atmosphere-runtime-1.0.0-SNAPSHOT.jar:1.0.0-SNAPSHOT]
    at org.atmosphere.websocket.WebSocketProcessor.dispatch(WebSocketProcessor.java:112) [atmosphere-runtime-1.0.0-SNAPSHOT.jar:1.0.0-SNAPSHOT]
    at org.atmosphere.container.GlassFishWebSocketSupport$GrizzlyApplication.onConnect(GlassFishWebSocketSupport.java:163) [atmosphere-runtime-1.0.0-SNAPSHOT.jar:1.0.0-SNAPSHOT]
    at com.sun.grizzly.websockets.DefaultWebSocket.onConnect(DefaultWebSocket.java:128) [grizzly-websockets.jar:1.9.46]
    at com.sun.grizzly.websockets.WebSocketEngine.upgrade(WebSocketEngine.java:188) [grizzly-websockets.jar:1.9.46]
    at com.sun.grizzly.websockets.WebSocketAsyncFilter.doFilter(WebSocketAsyncFilter.java:54) [grizzly-websockets.jar:1.9.46]
    at com.sun.grizzly.arp.DefaultAsyncExecutor.invokeFilters(DefaultAsyncExecutor.java:171) [grizzly-http.jar:1.9.46]
    at com.sun.grizzly.arp.DefaultAsyncExecutor.interrupt(DefaultAsyncExecutor.java:143) [grizzly-http.jar:1.9.46]
    at com.sun.grizzly.arp.AsyncProcessorTask.doTask(AsyncProcessorTask.java:102) [grizzly-http.jar:1.9.46]
    at com.sun.grizzly.http.TaskBase.run(TaskBase.java:193) [grizzly-http.jar:1.9.46]
    at com.sun.grizzly.http.TaskBase.execute(TaskBase.java:175) [grizzly-http.jar:1.9.46]
    at com.sun.grizzly.arp.DefaultAsyncHandler.handle(DefaultAsyncHandler.java:145) [grizzly-http.jar:1.9.46]
    at com.sun.grizzly.arp.AsyncProtocolFilter.execute(AsyncProtocolFilter.java:210) [grizzly-http.jar:1.9.46]
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137) [grizzly-framework.jar:1.9.46]
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104) [grizzly-framework.jar:1.9.46]
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90) [grizzly-framework.jar:1.9.46]
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79) [grizzly-http.jar:1.9.46]
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54) [grizzly-framework.jar:1.9.46]
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59) [grizzly-framework.jar:1.9.46]
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71) [grizzly-framework.jar:1.9.46]
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532) [grizzly-utils.jar:1.9.46]
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513) [grizzly-utils.jar:1.9.46]
    at java.lang.Thread.run(Thread.java:722) [na:1.7.0_03] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T15:47:34.960

从那时起，会话处理代码已被修改。请使用最新的主代码重试。

# javascript - 在 Chrome 中发送代理身份验证

> ID：10667059
> 
> 赞同：0
> 
> 时间：2012-05-19T16:40:22.807
> 
> 标签：javascript, google-chrome, google-chrome-extension

每次 Chrome 请求代理用户/密码时，我都会编写一个扩展来发送代理身份验证，但是每次打开请求 http 基本身份验证的网页时都会出现问题，它会在“等待 XXXX”处停止，XXXX 是我的扩展名.

我的代码如下：

```
var gPendingCallbacks = [];
var bkg = chrome.extension.getBackgroundPage();

chrome.webRequest.onAuthRequired.addListener(handleAuthRequest,
  {urls: ["<all_urls>"]}, ["asyncBlocking"]);

function processPendingCallbacks() {
  var callback = gPendingCallbacks.pop();
  callback({authCredentials: {username: 'user',
                              password: 'pass'}});
}

function handleAuthRequest(details, callback) {
  gPendingCallbacks.push(callback);
  if (details.isProxy === true ){
  processPendingCallbacks();
    }
} 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T14:27:46.133

改变：

```
function handleAuthRequest(details, callback) {
    gPendingCallbacks.push(callback);
    if (details.isProxy === true ){
        processPendingCallbacks();
    }
} 
```

至：

```
function handleAuthRequest(details, callback) {
    gPendingCallbacks.push(callback);
    processPendingCallbacks();
} 
```

# c# - 如何检索 WPF TabControl 的项目内容？

> ID：10667064
> 
> 赞同：2
> 
> 时间：2012-05-19T16:41:01.567
> 
> 标签：c#, wpf, mvvm, tabcontrol

我试图在选项卡控件的当前选定选项卡下找到一个孩子。到目前为止，我尝试过类似的事情：

ListView l = UIHelper.FindChild(tabControl.Items[tabControl.SelectedIndex] as MyUserControl, "MyList");

问题是该`Items`属性和许多其他属性返回的是视图模型，而不是正在使用的模板。如何访问实际模板以查找孩子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T16:50:37.347

您可以使用[TabControl.ItemContainerGenerator](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemcontainergenerator.aspx)属性从可视树中检索特定选项卡的控件。如果选项卡不可见，那么它可能无法找到它，但对于任何可见的选项卡都应该没问题。

# java - Eclipse - 类出现在包资源管理器中，但在工作区中找不到

> ID：10667066
> 
> 赞同：0
> 
> 时间：2012-05-19T16:41:07.220
> 
> 标签：java, eclipse, workspace

我遇到了一个奇怪的问题，我有一个类出现在某个包内的包资源管理器中，但是在这个包的文件夹中搜索它时，我意识到它不存在。我确保我在正确的工作区中，并且所有其他类都在那里。
请问有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T16:48:00.127

您是否尝试过在 Eclipse 中刷新您的项目/源目录？这应该可以解决问题，如果你没有发生一些非常奇怪的事情

# .htaccess - 如果 404，htaccess 重写会导致循环

> ID：10667067
> 
> 赞同：1
> 
> 时间：2012-05-19T16:41:12.617
> 
> 标签：.htaccess, url-rewriting

我知道这里有数百篇关于 htaccess 的帖子，但我似乎找不到与我的情况相匹配的帖子。

我有两个重写规则发生：

第一个将 example.com/filename.php 转换为 example.com/filename/ 以及 example.com/filenameA-filenameB.php 转换为 example.com/filenameA/filenameB/

第二个在请求的 URL 的末尾添加一个斜杠（如果没有的话）。

一切正常...直到您输入不正确的 URL，例如 example.com/foo 或 example.com/foo/ 其中 foo.php 不存在。我收到“页面未正确重定向”，地址栏显示“example.com/foo.php.php.php.php.php.php.php.php ...”。我只想获得一个 404，以便我可以重定向到 404 页面，但我尝试的任何操作似乎都不起作用。

谢谢你的帮助！

```
RewriteEngine On 
RewriteBase /

RewriteRule ^(.+)/(.+)//?$ $1-$2.php [NC,L]
RewriteRule ^(.+)//?$ $1.php [NC,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !(.*)/$
RewriteRule ^(.*)$ http://example.com/$1/ [L,R=301] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T22:24:15.563

您需要在重定向中添加一个条件，以结尾的`.php`内容不会被重定向：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !(.*)/$
RewriteCond %{REQUEST_URI} !\.php$
RewriteRule ^(.*)$ http://example.com/$1/ [L,R=301] 
```

第一次重写后，URI 最终为`/foo.php`，如果 foo.php 不存在，则应用第二条规则，因为它也不以 a 结尾`/`，您将被重定向到[http://example.com/foo .php/](http://example.com/foo.php/)，然后第一组规则将其更改为`/foo.php.php`，并且它不存在并且不以斜线结尾，因此应用第二条规则，将您重定向到[http://example.com/foo.php。 php/](http://example.com/foo.php.php/)等等等等

* * *

编辑：

> 当从服务器请求不存在的 PHP 文件时，它不会响应 404 而是“未选择输入文件”消息。

你可以尝试添加这个：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule \.php$ - [R=404] 
```

这或多或少是您所读到的内容，但该规则匹配以 .php 结尾的任何内容并将您重定向到 404 页面。

# php - XML 查看器和荧光笔

> ID：10667069
> 
> 赞同：1
> 
> 时间：2012-05-19T16:41:53.500
> 
> 标签：php, javascript, xml

下面是从谷歌浏览器显示的 xml 文件。

[![XML](../Images/fbd60777dabefdaed31a197436c03191.png)](https://i.stack.imgur.com/co5zR.png) [https://www.dropbox.com/s/v8vyqq1obtol22b/xml.png](https://www.dropbox.com/s/v8vyqq1obtol22b/xml.png)

我想像那样显示 xml 文件，但要突出显示（如图所示，“Extractive Summarization”以蓝色突出显示）。是否有一些库/插件（php/javascript）可以做到这一点？

谢谢

# python - 如何同时遍历多个列表？

> ID：10667073
> 
> 赞同：3
> 
> 时间：2012-05-19T16:42:52.063
> 
> 标签：python, django, django-views, python-2.7

我在这里有一个谜语，我想做的是有一个“for in”，它循环来自 request.POST 和 request.FILES 的 3 个变量我所做的是：

```
images = request.FILES.getlist('image')
titles = request.POST.getlist('title')
captions = request.POST.getlist('caption')
for image,title,caption in images,titles,captions: 
```

这似乎没有任何解决方案？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-19T16:43:58.030

```
for image, title, caption in zip(images, titles, captions): 
```

..是你想要的。（[压缩文档](http://docs.python.org/library/functions.html#zip)）

# asp.net - 了解如何从数据库加载 Nop Commerce 设置

> ID：10667075
> 
> 赞同：6
> 
> 时间：2012-05-19T16:43:03.303
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, autofac, nopcommerce

我正在和我一起工作，`Nop Commerce`想知道是否有人可以帮助我解决我的困惑。

我已经多次调试代码，试图找出在启动 Web 应用程序时如何加载设置。我就是不明白！

所有设置类都实现该`ISettings`接口。让我们以客户设置为例。我发现它由`CustomerSettings`类表示。在数据库中有一个`Setting table`. 客户设置的数据如下所示：

```
customersettings.usernamesenabled
customersettings.checkusernameavailabilityenabled
customersettings.allowuserstochangeusernames
... and so on... 
```

这些设置中的每一个是如何以及在哪里映射`customersettings`到`CustomerSettings`类以及一个属性（如`usernamesenabled`映射到`UsernamesEnabled`CustomerSettings 类中的属性）的？为什么它是这样实施的？

我知道这与`DependencyRegistrar`类中的以下代码有关：

```
builder.RegisterGeneric(typeof(ConfigurationProvider<>)).As(typeof(IConfigurationProvider<>));
builder.RegisterSource(new SettingsSource()); 
```

如果有人能指出我正确的方向，那将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T13:42:10.257

希望我没有迟到。

要了解如何创建该结构，只需查看几个相关点：

```
-Nop.Services.Configuration.ConfigurationProvider class
-Nop.Services.Configuration.ISettingsService interface
-Nop.Services.Configuration.SettingsService class 
```

SettingsService 仅提供从存储库存储和检索设置的功能，并实现一些缓存功能。

ConfigurationProvider 具有真正的魔力。

我们来看看`BuildConfiguration`方法：

```
 // get properties we can write to
        var properties = from prop in typeof(TSettings).GetProperties()
                         where prop.CanWrite && prop.CanRead
                         let setting = _settingService.GetSettingByKey<string>(typeof(TSettings).Name + "." + prop.Name)
                         where setting != null
                         where CommonHelper.GetNopCustomTypeConverter(prop.PropertyType).CanConvertFrom(typeof(string))
                         where CommonHelper.GetNopCustomTypeConverter(prop.PropertyType).IsValid(setting)
                         let value = CommonHelper.GetNopCustomTypeConverter(prop.PropertyType).ConvertFromInvariantString(setting)
                         select new { prop, value }; 
```

使用反射检查 *Settings 类（例如 CustomerSettings），并使用它们的属性从服务加载相应的设置。

然后它将存储为字符串的值转换回（您可以检查 NopCustomTypeConverter 以查看序列化是如何发生的）并将它们分配回设置实体：

`properties.ToList().ForEach(p => p.prop.SetValue(Settings, p.value, null));`

另一种方法 SaveSettings(TSettings settings) 则完全相反，采用 Setting 实体并将其分解，生成 ClassName+Propertyvalues 形式的键值对）

之所以这样实现，是因为它部署了来自[IoC](https://stackoverflow.com/questions/3058/what-is-inversion-of-control "控制反转")、[接口分离](https://en.wikipedia.org/wiki/Interface_segregation_principle)、[n 层](https://en.wikipedia.org/wiki/Multitier_architecture)和其他模式的概念，以确保可维护性（基于 API 的组件化、可测试性 ecc）。

# android - 仅为我的 Android 应用获取 youtube 视频的标题

> ID：10667077
> 
> 赞同：3
> 
> 时间：2012-05-19T16:43:16.127
> 
> 标签：android, youtube

我希望在我的 android 应用中显示特定 youtube 频道的视频列表。我正在使用类似于以下内容的 url 获取视频的缩略图：

[http://img.youtube.com/vi/GDFUdMvacI0/1.jpg](http://img.youtube.com/vi/GDFUdMvacI0/1.jpg)

是否有任何网址或任何其他方式来获取这些视频的标题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T16:52:01.783

从 youtube 发送的 atom 提要中提取标题。示例提要是[链接](https://developers.google.com/youtube/2.0/developers_guide_protocol_understanding_video_feeds#Understanding_Feeds_and_Entries)。

解析它，你可以得到标题。标题存在于条目标签内。

# c++ - 多重继承优于接口的优点

> ID：10667083
> 
> 赞同：-1
> 
> 时间：2012-05-19T16:43:56.953
> 
> 标签：c++, programming-languages

> **可能重复：**
> [为什么要使用接口？多重继承与接口？接口的好处？](https://stackoverflow.com/questions/8531292/why-to-use-interfaces-multiple-inheritance-vs-interfaces-benefits-of-interfa)

在哪些编程情况下，多重继承比接口更有优势？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T16:48:56.413

每当您需要来自两个不同类的共同行为时。接口只携带“方法签名”，而类携带实际行为。多重继承极大地有助于减少样板代码。

我不再是 C++ 程序员（30 公斤前我是）。我从 C++ 到 Java 再到 Scala ......在那里引入了特征。他们为多重继承带来了新的曙光（即使对于那些认为这是魔鬼发明的人）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T17:03:05.457

很短，骨子里的区别：

接口：实现多个接口以支持不同的“合同”。

多重继承：从现成的类继承以具有该类的现成行为。

顺便说一句，这两者在你问的方式上是不可比的......

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-19T16:53:19.790

优点对我来说并不完全清楚。[多重继承的确切问题是什么？](https://stackoverflow.com/questions/225929/what-is-the-exact-problem-with-multiple-inheritance)

好处

> 我们已经展示了多重继承的示例，表明当您可以将对象特征分成不重叠的集合时，它可以具有优势。然后，多重继承使您可以仅使用您需要的特性来创建复杂的类，而不会增加基类。

[在http://opendylan.org/books/dpg/db_293.html](http://opendylan.org/books/dpg/db_293.html)中有解释

# android - 在创建 Android 应用程序时，出于安全目的，我是否需要存储访问令牌？

> ID：10667085
> 
> 赞同：0
> 
> 时间：2012-05-19T16:44:01.060
> 
> 标签：android, facebook-graph-api

我正在创建一个使用 facebook 登录的 android 应用程序。然后，我将所有用户数据存储在服务器上的数据库中。我是否也应该存储用户访问令牌，还是仅在数据库中使用用户 ID 并让应用程序处理用户是否有效是否足够安全？例如。如果我有一个数据库来存储我只希望该用户看到的列表，并且我正在使用 FB 进行身份验证。每次访问他们的列表时不必验证 fb 访问令牌是否足够安全？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T16:53:17.457

请注意，这不考虑用户可能已撤销对您的应用程序的访问权限或用户已更改其密码的情况。您需要始终注意无效的 access_token 并重定向用户以重新授权您的应用程序。对于无效的访问令牌，出现以下错误：

```
User revoked access to your app:
{"error":{"type":"OAuthException","message":"Error validating access token: User               
 1053947411 has not authorized application 157111564357680."}}

OR when password changed:
{"error":{"type":"OAuthException","message":"Error validating access token: 
The session is invalid because the user logged out."}} 
```

# c++ - C++ 独立参考 - 有什么用？

> ID：10667086
> 
> 赞同：1
> 
> 时间：2012-05-19T16:44:19.293
> 
> 标签：c++, reference, alias

我在一些不错的 C++ 教程中读到，确实存在独立引用，并且行为类似于别名。但是...我想知道它是做什么用的。为什么要使用别名。

此外，一些我不清楚的代码：

```
int a;
int &ref = a; // independent reference
int b = 19;
ref = b;  
cout << a << " " << ref << "\n";
ref--;  
cout << a << " " << ref << "\n"; 
```

首先， ref 是对 a 的“引用”。我从第二行代码中了解到 ref 的地址（因此是ampershead）是a。然后，整数 ref 被赋予 b (19) 的值。第一个 cout 返回 a 和 ref，都等于 19。为什么？整数a不是ref的地址吗？然后，递减 ref，最后一个 cout 给出两次 18\. a 和递减的 ref。

神秘的唯一可能的奇怪解释：这里 int& 本身就是一个类型，“对整数的独立引用”，这种类型意味着别名。那么无论你对 ref 做什么，对 a 也是如此。

那正确吗？但是为什么需要别名呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T16:47:01.197

> 那么无论你对 ref 做什么，对 a 也是如此。

这是一种非常准确的看待它的方式。本质上，两者都`ref`指`a`代相同的`int`。

> 为什么需要别名？

引用的一种非常常见的用途是将参数传递给函数。考虑以下：

```
void f(const HugeStruct& data) {
 ...
} 
```

这允许调用者以`HugeStruct`比使用指针时更便宜且语法更好的方式将 a 传递给调用者。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T16:48:14.877

你是对的。引用在许多方面类似于*const*指针（例如，修改引用的值会修改原始值），并且您不能将引用绑定到除其初始变量之外的任何其他内容，但它不能`null`，并且使用它的语法也不同（无需取消引用 ( `*`, `->`)）。因为它不是指针，所以最好的描述是*alias*：将其视为同一变量的不同名称。

此外，如果您将引用作为函数参数传递，则不会复制该变量（例如使用指针和它指向的值），并且对引用的任何更改都会反映在原始变量上。

对于 const 引用也有一些特殊规则，允许临时值超出其常规生命周期，直到它绑定的 const 引用超出范围。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-19T16:46:47.837

在您的示例中没有多大意义。但是考虑一下：

```
int & ri = expensive_function_call(args)->some_map[calculate_the_key()].first;
if (ri > 6) ri = 6; 
```

对比

```
if (expensive_function_call(args)->some_map[calculate_the_key()].first > 6)
    expensive_function_call(args)->some_map[calculate_the_key()].first = 6; 
```

当然，您可以使用指针：

```
int * pi = &expensive_function_call(args)->some_map[calculate_the_key()].first;
if (*pi > 6) *pi = 6; 
```

通过使用别名（引用或指针），不仅代码几乎减半，而且程序在运行时必须完成的工作也减半（至少在编译器开始优化之前）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-19T16:49:32.527

> 我从第二行代码中了解到 ref 的地址（因此是与号）是 a。然后，整数 ref 被赋予 b 的值。

我认为您不了解引用的工作原理。

```
int a;
int &ref = a; 
```

第一行分配一个`int`对象。可以使用局部变量来引用此对象`a`。

第二行具有成为`ref`同一`int`对象的别名的效果。可以使用`a`或对对象进行更改`ref`，但只有一个`int`对象。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-19T16:50:17.330

您需要拿起一本关于 C++ 的好书并阅读它，因为您的问题中有许多基本的错误陈述。

首先，a 不是 ref 的地址。当您`&`在第一行代码中使用运算符时： `int &ref = a` 您没有设置`ref`to的地址`a`。您正在创建一个新变量，它是现有整数的别名，即对`a`. 这是它自己的运算符/操作，与地址或指针无关（不是真的）。

此后任何时候你读或写`ref`，就好像你在写一个。`ref`现在是另一种说法`a`，您对其执行的任何操作（包括尝试获取其地址）都*将转发*到`a`.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-19T17:06:13.817

即使不涉及函数调用，别名也有很好的用途。

您可以使用它来简化名称

```
MyComplicatedStruct x;
int &ref = x.array[17].anotherarray[3];
// Do stuff with 'ref' 
```

每次我想使用该整数值时都必须将其拼写出来，这会很痛苦（而且容易出错！）。

另一个例子：

```
int myFirstValue = 1;
int MyOtherValue = 2;

while(true) {
    int &value = (SomeComplicatedTest() ? myFirstValue : myOtherValue);
    // do stuff with 'value'
} 
```

如果没有参考，这也将是一种痛苦（并且容易出错）。

# image - Actionscript 3.0 从加载的 URL 创建 bitmapData

> ID：10667104
> 
> 赞同：0
> 
> 时间：2012-05-19T16:46:51.293
> 
> 标签：image, actionscript-3, bitmapdata, image-loading

我想加载一个图像，然后使用它的 bitmapData。当我从 Flash 运行程序时，该程序可以工作，但当我在线上传时，程序就不行了。似乎有一堆奇怪的问题。`addChild(myLoader)`在线工作但`addChild(loadedPic)`没有，并且 myLoader 似乎没有我可以访问的 bitmapData 。 出于某种原因，`urlInput.text = "Done."`它将在线工作，但不是`urlInput.text = ...`我添加的以查看发生了什么。当我在我的计算机上运行它时，我得到 urlInput 说“[object Bitmap] hi”就像它应该的那样，但在网上它只是说“正在加载......”

```
var myLoader:Loader = new Loader();

submitButton.addEventListener(MouseEvent.CLICK, buttonRelease);
function buttonRelease(event:MouseEvent){
    var fileRequest:URLRequest = new URLRequest(urlInput.text);
    urlInput.text = "Loading...";
    myLoader.load(fileRequest);
}

myLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, onComplete);
function onComplete(e:Event){
    urlInput.text = "Done.";
    //addChild(myLoader);

    //var loadedBitmap = new BitmapData(myLoader.width, myLoader.height);
    //loadedBitmap.draw(myLoader);
    //var loadedPic = e.target.content;
    //loadedPic.width = 300;
    //loadedPic.height = 300;
    //addChild(loadedPic);
    urlInput.text = e.target.content.toString() + " hi";
    //usedPic = loadedPic;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T18:04:50.533

如果您正在加载图像并且想要访问它的数据（进行`draw()`调用），那么您需要使用bool 设置为 true的`LoaderContext`对象来加载它。`checkPolicyFile`它在本地工作的原因是所有内容都在本地被隐式信任，因此您不会真正遇到安全问题

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/system/LoaderContext.html?filter_flash=cs5&filter_flashplayer=10.2&filter_air=2.6](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/system/LoaderContext.html?filter_flash=cs5&filter_flashplayer=10.2&filter_air=2.6)

# c - Apache Benchmark 在简单 C 服务器中的第一次请求后无法继续

> ID：10667111
> 
> 赞同：2
> 
> 时间：2012-05-19T16:48:05.580
> 
> 标签：c, http, benchmarking

我想对用 C 语言制作的 HTTP 服务器的“Hello World”性能进行基准测试。尽管`curl -v http://localhost:8000/`给出了输出并且没有挂起，但 Chrome 没有打开它并`ab -c 1 -n 10 http://localhost:8000/`发出第一个请求并且之后不再继续。我尝试在发送数据后关闭客户端套接字，但没有帮助。这是什么原因？

我在这里使用了代码：[Send HTTP response using C socket](https://stackoverflow.com/questions/5487297/send-http-response-using-c-socket)

# java - 如何覆盖已部署应用程序的 Java 容器 URL 映射

> ID：10667112
> 
> 赞同：3
> 
> 时间：2012-05-19T16:48:09.097
> 
> 标签：java, jakarta-ee, tomcat, glassfish, admin

如果我调用了一个 WAR`my-web-app.war`并将其部署到 Tomcat 的`webapps/`目录，假设它正确启动，我可以通过将浏览器指向以下位置来访问它：

```
http://localhost/my-web-app 
```

同样，如果我调用了一个 EAR`my-server-app.ear`并将其部署到 GlassFish 的`domain/autodeploy/`目录，然后假设它正确启动，我可以通过将浏览器指向以下位置来访问它：

```
http://localhost/my-server-app 
```

但是，如果我想保持我的 WAR/EAR 具有相同的名称，但将其部署到与这些默认值不同的 URL，该怎么办。例如：

*   使`my-web-app.war`部署为`http://localhost/webapp`
*   使`my-server-app.war`部署为`http://localhost/srvapp`
*   进行`my-server-app.war`部署`http://localhost`

在 Apache 等其他服务器中，我知道可以设置“虚拟目录”等，以便`http://example.com/some/long/path/to/file.html`在浏览器中显示为`http://example.com/file`，并且想知道 Tomcat/GlassFish 是否允许这样做（如果允许，如何）？

我问是因为我打算将所有 WAR/EAR 的版本都包含在它们的名称中，这样我就可以在文件系统上查看它们并立即知道它们是什么版本，例如：

*   `my-web-app-3.17.2.war`， ETC。

让我的用户去`http://localhost/my-web-app-3.17.2`似乎*有点*疯狂。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T19:24:46.577

使用 Tomcat 有几种方法可以做到这一点，但最好的方法是利用并行部署版本标签。

您可以将您的 WAR 命名为：

```
webapp##my-web-app-3.17.2.war 
```

它将被部署到

```
/webapp 
```

## 之后的任何内容都被视为并行部署的版本标签。有关更多详细信息，请参阅[文档](http://tomcat.apache.org/tomcat-7.0-doc/config/context.html#Parallel_deployment)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T10:51:35.970

如果您有 EAR，您可以在文件 application.xml 中设置上下文根

对于每场战争，您可以设置一个上下文根

# scala - 为什么 list :: element 会报错？

> ID：10667113
> 
> 赞同：0
> 
> 时间：2012-05-19T16:48:11.490
> 
> 标签：scala

我是 scala 的新手，只是在空闲时间玩弄它并遇到了这个问题：

如果我有这个清单：

```
 val list = List(1,2,3,4) 
```

然后说：

```
 val newList = list :: 5 
```

斯卡拉告诉我

```
 error: value :: is not a member of Int 
```

但如果我说：

```
 val newList = list ::: List(5) 
```

scala 完全没问题。**为什么我不能将元素附加到 a `List`，但我可以将 a 的所有元素附加到 a`List`的末尾`List`**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-19T16:48:53.413

你有向后的语法：

```
5 :: list 
```

这会将元素`5`添加到`list`.

在 Scala 中，以冒号 ( `:`) 结尾的运算符是右结合的。所以`5 :: list`调用`::`方法`list`并给出参数`5`。

有效的原因`list ::: List(5)`是它实际上是`list`在`List(5)`.

顺便说一下，`List`也有运算符`+:`和`:+`for prepend 和 append，分别。（但请记住，附加到 a`List`是 O(1)，而附加是 O(n)。）

# java - 绘制/绘制 Wav 文件 java

> ID：10667120
> 
> 赞同：6
> 
> 时间：2012-05-19T16:49:02.807
> 
> 标签：java

我对java很陌生...我想从wav文件中绘制频率/时间图或样本图像。首先，我正在努力使用 AudioInputStream 从 Wav 文件中获取原始数据数组，同时也参考[Reading wav file in Java](https://stackoverflow.com/questions/5210147/reading-wav-file-in-java)。[我还尝试了引用http://www.labbookpages.co.uk/audio/javaWavFiles.html](http://www.labbookpages.co.uk/audio/javaWavFiles.html)的 WavFile 类，但是在测试时，我无法找到正确的包来满足“WavFile”-“找不到符号”错误。提供的导入 java.io.*；因为那个样本不满足这个......

重申一下，我希望获得 Wav 文件数组格式的原始数据。

我会喜欢这方面的任何小例子，因为我从例子中学习起来更容易！谢谢你的时间

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T16:52:47.450

从 wav 文件（标题）中跳过前 44 个字节，然后使用此函数读取数据：

```
private static double readLEShort(RandomAccessFile f) {
try {
    byte b1 = (byte) f.read();
    byte b2 = (byte) f.read();
    return (double) (b2 << 8 | b1 & 0xFF) / 32767.0;
} catch (IOException e) {
    e.printStackTrace();
}
return 0;
} 
```

每个通道一个值。这将为您提供介于 -1 和 1 之间的数字，您可以在图表上绘制该数字。我希望这可能有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-25T21:46:42.840

在我的[Java DSP 集合](http://www.source-code.biz/dsp/java/)中，有一个名为 TestSignalPlot.java 的测试程序可以显示 WAV 文件。它使用 AudioIo.loadWavFile() 将 WAV 文件内容加载到内存中，并使用 SignalPlot 类来显示音频信号。所有类都是开源集合的一部分。

# c# - 嵌套 foreach 以更改列表项

> ID：10667125
> 
> 赞同：0
> 
> 时间：2012-05-19T16:49:29.093
> 
> 标签：c#, linq, .net-3.5, foreach, linq-to-objects

我需要使用嵌套的 for/foreach 循环更改列表中的项目。问题是我无法使用带或不带点符号的 LINQ 使其工作。传统的方式是这样工作的：

```
foreach (MapObjectLayer mapObjectLayer in map.Objects)
{
    foreach (MapObject mapObject in mapObjectLayer.MapObjects)
    {
        for (int i = 0; i < mapObject.Points.Count; i++)
        {
            mapObject.Points[i] = new Vector2(
                mapObject.Points[i].X * map.Scale,
                mapObject.Points[i].Y * map.Scale);
        }
    }
} 
```

使用 LINQ，这失败了：

```
var test = (from mol in map.Objects
           from mo in mol.MapObjects
           from p in mo.Points
           select p).ToList();

for (int i = 0; i < test.Count(); i++)
{
    test[i] = new Vector2(
        test[i].X * map.Scale,
        test[i].Y * map.Scale);
} 
```

这失败了：

```
map.Objects.ForEach(l => l.MapObjects.ForEach(t => t.Points.ForEach(p => p = p * map.Scale))); 
```

如果我能让点符号变体工作，我会很高兴，但我不知道它为什么会失败。使用调试器，通过检查点列表很明显，向量没有使用两个 LINQ 变体相乘。

更新： Vector2 是一个结构

更新：这是我发现的另外两个单行（工作的）：

```
map.Objects.SelectMany(m => m.MapObjects).ToList().ForEach(o => o.Points = o.Points.Select(p => p * 2).ToList());
map.Objects.ForEach(l => l.MapObjects.ForEach(t => t.Points = t.Points.Select(p => p * 2).ToList())); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T17:19:49.790

常规`foreach`是最好的方法。LINQ 是为查询而设计的。您可以在一行中完成它，但它不会优雅或可读。方法如下：

```
map.Objects.ForEach(l => l.MapObjects.ForEach(t => Enumerable.Range(0, t.Points.Count).ToList().ForEach(i => t.Points[i] *= map.Scale))); 
```

The reason that your version didn't work is because `Vector2` is a value type. In the query, it's value is copied, so when you do `p => p = ...` you are assigning to a copy of the variable.

**Use the original code.** LINQ is not a replacement for loops.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T14:12:58.180

You can use Linq as well to collect items (in fact Resharper will offer a refactoring from nested foreach to linq), but you have to take care what you collect and what you update.

The initial linq query syntax example collects copies of Points into a new List and then replaces each element of this new list with a new instance of Vector2\. Even if Vector2 would have been a referency type only the new list would change rather than the original map.Objects-substructure.

It would work the way you want it if

*   you work with reference rather than value types and
*   you'd assign the properties of the instead-of-Vector2 items:

    test[i].X *= map.Scale

# c - ubuntu 中的 make headers_install 抛出错误

> ID：10667126
> 
> 赞同：3
> 
> 时间：2012-05-19T16:49:31.563
> 
> 标签：c, unix, ubuntu, kernel, ubuntu-11.10

为了在 C 编码中使用一些内核头文件，如 cpu.h，我想将内核头文件安装到 /usr/include/ 目录。我为此使用“make headers_install”命令。但是系统抛出以下错误。无论如何都知道如何解决它？

```
make headers_install

CHK     include/linux/version.h
make[2]: *** No rule to make target `/usr/src/linux-headers-3.0.0-17-generic/ubuntu/include/linux/aufs_type.h', needed by `/usr/src/linux-headers-3.0.0-17-generic/usr/include/linux/.install'.  Stop.
make[1]: *** [linux] Error 2
make: *** [headers_install] Error 2 
```

我的内核版本是：3.0.0-17-generic 是否需要安装更多内容才能使“make headers_install”操作成功？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T17:00:53.133

您可能会发现 aptitude install linux-headers-3.0.0-17-generic 更简单。

# android - 安卓连接mysql

> ID：10667128
> 
> 赞同：4
> 
> 时间：2012-05-19T16:49:37.653
> 
> 标签：android, mysql, json

我试图在 android 应用程序中连接 mysql。下面是我的代码。一旦我运行代码，我就会得到“**解析数据时出错 org.json.JSONException: End of input at character 0 of** ”错误。我正在使用[本](http://www.helloandroid.com/tutorials/connecting-mysql-database)教程

代码

```
public class Test extends Activity{
    /** Called when the activity is first created. */
     @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            //setContentView(R.layout.mainabout);
            String result = "";
          //the year data to send
          ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
          nameValuePairs.add(new BasicNameValuePair("year","1980"));
          InputStream is = null;               
          //http post
          try{
                  HttpClient httpclient = new DefaultHttpClient();

                  HttpGet httppost = new HttpGet("http://www.pherma.net84.net/admin/getAllPeopleBornAfter.php");
                 // httppost.s//setEntity(new UrlEncodedFormEntity(nameValuePairs));
                  HttpResponse response = httpclient.execute(httppost);
                  HttpEntity entity = response.getEntity();
                   is = entity.getContent();
          }catch(Exception e){
                  Log.e("log_tag", "Error in http connection "+e.toString());
          }
          //convert response to string
          try{
                  BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
                  StringBuilder sb = new StringBuilder();
                  String line = null;
                  while ((line = reader.readLine()) != null) {
                          sb.append(line + "\n");
                  }
                  is.close();

                  result=sb.toString();
          }
          catch(Exception e){
                  Log.e("log_tag", "Error converting result "+e.toString());
          }

          try
          {
              JSONArray jArray = new JSONArray(result);
              for(int i=0;i<jArray.length();i++){
                      JSONObject json_data = jArray.getJSONObject(i);
                      Log.i("log_tag","id: "+json_data.getInt("id")+
                              ", name: "+json_data.getString("name")+
                              ", sex: "+json_data.getInt("sex")+
                              ", birthyear: "+json_data.getInt("birthyear")
                      );
              }

          }
          catch(JSONException e){
              Log.e("log_tag", "Error parsing data "+e.toString());
          } 
        }
    } 
```

日志猫 ![在此处输入图像描述](../Images/3e2f2e58ede68b034bd5d12c08218dbe.png)

```
php

<?php
mysql_connect(".com","a4055820_root","");
mysql_select_db("a4055820_pherma");

$q=mysql_query("SELECT * FROM people WHERE birthyear>'".$_REQUEST['year']."'");
while($e=mysql_fetch_assoc($q))
        $output[]=$e;

print(json_encode($output));

mysql_close();
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T08:46:44.260

问题是我忘记在清单中授予 Internet 访问权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T17:43:05.100

该代码似乎在第一次尝试 catch 块时失败，这意味着其余部分将无法工作。

您确定您创建的 php 文件的 URL 正确吗？

你的 php 文件是什么样的？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T08:56:00.183

# 可靠和/或官方消息来源

通过以下链接：

1.  [http连接错误](https://stackoverflow.com/questions/6996000/error-in-http-connection)
2.  [org.json.JSON 异常：字符 0 处的输入结束](https://stackoverflow.com/questions/8202048/org-json-json-exception-end-of-input-at-character-0)
3.  [http://androidforums.com/application-development/217771-parsing-data-using-json-php-but-receiving-error-parsing-data-org-json-exception.html](http://androidforums.com/application-development/217771-parsing-data-using-json-php-but-receiving-error-parsing-data-org-json-exception.html)

# php - HTML 特殊字符解码在 CI 中不起作用

> ID：10667129
> 
> 赞同：0
> 
> 时间：2012-05-19T16:49:41.103
> 
> 标签：php, codeigniter

我正在为我的网站使用 Code Ignitor。问题在于同一服务器中的函数 htmlspecialchars_decode($str); 正在工作，但当我与 CI 一起使用时却没有。

这是我在控制器功能中的代码：

```
$meta_d = $this->site_model->lyrics_meta_desc();
$data['meta_desc'] = htmlspecialchars_decode($meta_d); 
```

在我看来，这是：

```
<meta name="description" content="<?php echo character_limiter($meta_desc, 150);?>" /> 
```

有什么我想念的吗。或者要为 CI 做其他事情。请提出建议。顺便说一下，我已经为使用 character_limiter 加载了文本助手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T16:52:51.923

给定的代码按预期工作。

但是，如果您想从 Html 实体（例如`&#73;&#39;&#118;&#101;&#32;&#119;&#97;&#108;` . 您需要在`utf8_encode()`之后调用`htmlspecialchars_decode()`。我建议您也使用`html_entity_decode()`它，因为它包含所有 html 实体。

所以，

```
$meta_d = $this->site_model->lyrics_meta_desc();
$data['meta_desc'] = utf8_encode(html_entity_decode($meta_d)); 
```

# php - Backbone.js：更简单的保存成功句柄

> ID：10667131
> 
> 赞同：0
> 
> 时间：2012-05-19T16:50:05.407
> 
> 标签：php, javascript, json, backbone.js

我主要在**StackOverflow**上搜索了这个问题，但是所有答案似乎都太复杂了。我只是在寻找一个简单的解决方案。

```
urlToAdd.set({url: urlBody.value, tags:tagsToAdd});
urlToAdd.save({
success: function()
    {
       console.log("Success");
    }
}); 
```

这段代码是我在 URLView 中使用的，它可以正确地从文本框中获取给定的值，然后再保存。但是问题是我在**验证**功能上收到错误。我的验证功能；

```
validate:function(attributes){
                if(attributes.tags[0].length<1)
                    return "You should create at least one tag";} 
```

验证有助于检查分配给**tags**参数的 arra 是否具有多个元素。（我应用了我知道的差异检查系统，但如果我不使用**成功**方法，它确实有效。我使用的是这种方法 - 不是数组长度 - 因为即使文本框为空，它仍然是数组的元素） .

我的后端返回一个字符串。我稍后将对其进行编码，以便它返回一个 json 对象。这将有一个**msg**属性说“成功”。有什么方法可以捕获我的**php**页面的结果吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T16:54:27.503

您的验证功能似乎有错误。如果你想检查`attributes.tags`有零个元素，你应该检查

```
if (attributes.tags.length < 1) { ... 
```

*不是* `attributes.tags[0].length`。

# jquery - jquery onclick 不起作用

> ID：10667142
> 
> 赞同：1
> 
> 时间：2012-05-19T16:52:37.840
> 
> 标签：jquery, html

我有一个带有 a 的代码`link`，当单击我想做某事的链接时，但我不知道为什么单击不起作用，并且警报甚至不会触发

# jQuery代码

```
$(document).ready(function(){
    $("#editConcept").on('click','ecAddLink',function(){
        $.getJSON("http://localhost/Mar7ba/Ontology/getAllConcepts/TRUE",function(data){
            alert("William Roma");
            var options = '';
            options+="<option>Select Concept</option>";
            for(var i=0;i<data.length;i++){
                options += "<option>"+data[i]+"</option>";
            }
            $.getJSON("http://localhost/Mar7ba/Ontology/getAllRelations/TRUE",function(data){
                var options2 = '';
                options2+="<option>Select Concept</option>";
                for(var i=0;i<data.length;i++){
                    options2 += "<option>"+data[i]+"</option>";
                }
                $("#editConcept ul li:last").before('\
<li>\n\
    <p>\n\
        <label>Concept</label>\n\
        <select name="newConcepts[]">'+options+'</select>\n\
        <span class="errorMessage"></span>\n\
    </p>\n\
    <p>\n\
        <label>Relations</label>\n\
        <select name="newRelations[]">'+options2+'</select>\n\
        <span class="errorMessage"></span>\n\
        <a href="#" class="removeA">delete</a>\n\
    </p>\n\
</li>');
            });
        });
    });
}); 
```

# html代码

```
<div id="editConcept" class="container">
    <form id="ecForm" method="POST" action="<?php echo URL; ?>Ontology/conceptEdit">
        <ul>
            <li>
                <label>Select Concept</label>
                <select class="ConceptSelector1"></select>
                <span class="errorMessage"></span>
            </li> 
            <li id="ecOldRelations">
                <p>
                    <label>Old Relations</label>
                </p>
            </li>
            <li id="ecNewRelations">
                <label>New Relations</label>
                <a href="#" class="smallLink" id="ecAddLink">add new relations</a>
            </li>
            <li>
                <input type="submit" class="button1" value="save"/>
            </li>
        </ul>
    </form>
</div>

the link has an id = ecAddLink 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T16:53:46.553

您在选择器中[缺少井号](http://api.jquery.com/id-selector/)：`#ecAddLink`。大多数 jQuery 选择器看起来像有效的 CSS 字符串，如果我没记错的话，Prototype 是接受不带井号的 ID 的框架。

除此之外，我也非常讨厌在这样的代码中包含完整的 URL，如果你不能全局存储 webroot var，你应该尝试去相对。而且我也不喜欢在字符串中包含这么多 HTML（看起来很糟糕，难以维护/更新等）。您应该将 HTML 放在页面中的隐藏元素中，或者[放在脚本标签](http://ejohn.org/blog/javascript-micro-templating/)中，这样 IMO 更容易。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T16:54:58.317

您忘记放置`#`按 ID 选择元素的位置：

```
$("#editConcept").on('click','#ecAddLink',function() {
    ...
}); 
```

# uitableview - 表视图组织成按字母顺序排列的部分

> ID：10667149
> 
> 赞同：0
> 
> 时间：2012-05-19T16:53:30.547
> 
> 标签：uitableview, nsmutablearray, alphabetical, sectionheader

好的，进入我的下一个困境。我已经做了很多谷歌搜索，似乎有几种方法可以解决它，但似乎没有一个适合我的表格视图结构。我将 Xcode 4.3.2 与 ARC 和情节提要一起使用。我有一个普通视图表视图。我的表格包含一个城市及其部门的列表（每行一个城市），当用户选择一个城市时，他们将被推送到该城市的详细视图。我想用部分标题按字母顺序组织我的表格。任何建议，提示，教程链接，将不胜感激。

我在表格视图中设置了一个这样的 NSMutable 数组 .m

```
NSMutableArray *dept;   

- (void)viewDidLoad

{
[super viewDidLoad];

dept = [[NSMutableArray alloc] init];

City *thedept = [[City alloc] init];
[thedept setCityname:@"Albany"];
[thedept setPhone:@"5551237890"];
[dept addObject:thedept];

thedept = [[City alloc] init];
[thedept setCityname:@"Boston"];
[thedept setPhone:@"5556543435"];
[dept addObject:thedept];

thedept = [[City alloc] init];
[thedept setCityname:@"Springfield"];
[thedept setPhone:@"5553456323"];
[dept addObject:thedept];

thedept = [[City alloc] init];
[thedept setCityname:@"Tallahassee"];
[thedept setPhone:@"5552450988"];
[dept addObject:thedept];

thedept = [[City alloc] init];
[thedept setCityname:@"Vacouver"];
[thedept setPhone:@"5551312555"];
[dept addObject:thedept]; 
```

部分标题可以只是字母表中的字母（A、B、C、D...）。我想我需要通过他们的第一个字母预先组织我的城市，并可能根据字母命名该部分（例如“sectionAcities”）。我给出的城市只是几个，我总共有大约100个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T17:11:57.043

您需要使用以下`UITableViewDataSource`方法来实现此目的。

```
sectionIndexTitlesForTableView:
tableView:titleForHeaderInSection:
tableView:sectionForSectionIndexTitle:atIndex: 
```

以下是`TheElements`该 developer.apple.com 上的应用程序链接，实际上是这样做的 - [http://developer.apple.com/library/ios/#samplecode/TheElements](http://developer.apple.com/library/ios/#samplecode/TheElements)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T07:26:19.410

在您的情况下，您必须使用以下代码使用基于对象的排序，而不是在示例中完成的简单排序

self.tableArray =[[self.tableArray sortedArrayUsingComparator:^NSComparisonResult(Object *first, Object *second){

```
 NSString *name1=[first name];
    NSString *name2=[second name];
    return [name1 compare:name2];

}]mutableCopy] ; 
```

在此之后，您将获得排序后的数组，您可以使用此数组制作数组字典。

# php - 谷歌地理图表上的自定义标签

> ID：10667157
> 
> 赞同：3
> 
> 时间：2012-05-19T16:54:25.040
> 
> 标签：php, javascript, google-visualization

是否可以在 google 的 geochart Markers 上使用自定义标签？（类似于谷歌地图中的信息窗口）

例如，地图上的大多数点都用 ['city', 'population'] 给出，例如

```
var data = google.visualization.arrayToDataTable([
    ['City',  'Population', 'Area'],
    ['Rome',     2761477,    1285.31],
    ['Milan',    1324110,    181.76],..... 
```

是否可以使用自定义字符串而不是人口或面积？例如，如果我输入这个数组

```
 <?php $city = array(array('City','Info'), array('Pittsburgh','Boring'), array('Los Angeles','Awesome!'), array('Chicago','Better than Cleveland'));  ?> 
```

我可以使用字符串进行描述还是必须使用预设选项列表？

顺便说一句，要显示这个就用这个。

```
function drawMarkersMap() {
  var newInfo = google.visualization.arrayToDataTable(

  <?php echo json_encode($city); ?> 
  ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T10:37:34.867

对的，这是可能的。查看一些示例：

[http://cmoreira.net/interactive-world-maps-demo/](http://cmoreira.net/interactive-world-maps-demo/)

您应该需要这种格式的数据，例如：

```
var data = new google.visualization.DataTable();
data.addColumn('string', 'Country'); // Implicit domain label col.
data.addColumn('number', 'Value'); // Implicit series 1 data col.
data.addColumn({type:'string', role:'tooltip'}); // 

data.addRows([[{v:"Olympia  Washington",f:"Olympia"},1,"Capital city of the state of Washington"],[{v:"Seattle Washington",f:"Seattle"},2,"Largest city of the state of Washington"],[{v:"Spokane  Washington",f:"Spokane"},3,"Seconde Largest city of the state of Washington"],[{v:"Vancouver  Washington",f:"Vancouver"},4,"Fourth largest city of the state of Washington"],]); 
```

希望能帮助到你！

干杯

# drupal - 没有左侧菜单的 Drupal 回调页面

> ID：10667164
> 
> 赞同：0
> 
> 时间：2012-05-19T16:55:14.773
> 
> 标签：drupal, callback

我正在尝试制作一个 drupal 商务模块，并且需要制作几个回调页面，这将从我们的支付提供商那里得到响应。

这些页面制作起来没有问题，而且它们工作得很好..除了..我希望隐藏左侧菜单块（包括购物车和其他可能出现在那里的东西）..所以基本上是一个空白，但主题页面只显示付款信息。（就像在评论页面上一样）。

如果可能的话，我该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T04:02:49.580

从您的`page.tpl.php`（位于您的主题文件夹中）下一个文件创建：`page--ECHOEDPAGENAME.tpl.php`并从此文件区域中删除打印：
对于 drupal 6，它看起来像：`<?php print $sidebar_first; ?>`
对于 drupal 7，它看起来像：`<?php print render($page['sidebar_first']); ?>`
当然，您还应该删除绘制侧边栏的周围 div 和其他区域（页脚、右侧边栏等，如果需要）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T22:41:12.123

为什么不能使用可见性设置？如果您需要在模块中执行此操作，我认为您需要使用 hook_page_alter 来预处理所需页面的渲染数组。

# c# - 如何从平移 XYZ 计算 Kinect 关节旋转？

> ID：10667172
> 
> 赞同：0
> 
> 时间：2012-05-19T16:56:50.060
> 
> 标签：c#, algorithm, rotation, kinect

我正在使用 Kinect for Windows SDK 并尝试通过从 Kinect 传感器捕获骨骼和关节运动来生成 BVH 文件。我只需要根据`Joint.Position`（平移）数据计算关节旋转，就可以生成包含运动数据的文件。

我一直在寻找一段时间，但我还没有找到如何计算它的指南。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T15:34:49.617

新的 1.5xxx Kinect SDK 几天前问世了，它有一个 Skeleton API，它为这个确切的任务提供了帮助。这将是一个很好的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-17T01:15:29.963

您可以尝试使用 Brekel Kinect 软件直接录制 BVH 文件。它使用openNI。

# json - 如果在 for 循环中出现问题

> ID：10667173
> 
> 赞同：0
> 
> 时间：2012-05-19T16:56:52.423
> 
> 标签：json, string, loops, if-statement, for-loop

我有一个 for 循环，我想在其中找到一封电子邮件。我必须找到肯定相同的字符串。在 for 循环中，我举杯祝酒，我看到两者都显示相同的内容，没有任何空格。我在 if(String == String) 中所拥有的根本不会发生。这是代码：

```
try {
        jArray = new JSONArray(result);
        JSONObject json_email = null;

        for(int i=0;i<=jArray.length();i++){
            json_email = jArray.getJSONObject(i);

            addedby2 = json_email.getString("email");

        if(addedby2==email2){
            Toast.makeText(this, json_email.toString(), Toast.LENGTH_LONG).show();
            user = json_email.getString("user");
            rpoints = json_email.getString("respectpoints");
            //Toast.makeText(this, user+"    "+rpoints, Toast.LENGTH_LONG).show();
        }
        }
        tvAdded.setText(user + " (" + rpoints + ")");
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

我还尝试在 if 条件之外使用 getString("user") 并且它有效。我尝试在 if 条件下写： String.equals(String) 但没有任何结果。

有谁知道问题可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T17:14:32.977

如果您使用 Java，要比较字符串值，则必须使用 equals() 函数。就像霍华德说的那样，如果这不起作用，那么你的变量可能是错误的。

# c# - if 语句不检查条件

> ID：10667174
> 
> 赞同：-2
> 
> 时间：2012-05-19T16:57:13.493
> 
> 标签：c#, if-statement

我的 if 下面出于某种原因检查第一个但不是第二个条件。

第一个是根据数据库检查用户/密码，第二个是硬代码用户和密码。

当我输入硬编码的用户/密码时，它不会让我通过，只能使用 db 用户/密码。

知道有什么问题吗？

```
if ((userTxt == userDB && passwdTxt == passwdDB) ||
    (userTxt == "user" && passwdTxt == "test"))
{
    switch (frmMdiMain.loginPageText)
    {
        case "exit":
            mainPage.Hide();
            Application.Exit();
            break;
        case "internal":
            mdiInternalUse internUseForm = new mdiInternalUse();
            internUseForm.Show();
            this.Close();
            break;
        default:
            break;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T17:05:33.543

如果没有您使用的语言，很难回答，但我认为问题在于 and 的值与`userTxt`与 and表示`passwdTxt`的对象不同的对象进行比较`"user"``"test"`

例如，在 C/C++ 中 of`userTxt`是一个指向 的指针`char`，它将具有与“用户”不同的地址。

在java中，`String`持有 和 值的对象`userTxt`也`"user"`可以不同。

您将需要对字符串进行适当的比较（例如`strcmp()`，在 C 中，`sts::string`在 C++ 中使用`userTxt.compare("user")`，在 java 中使用）

# tabs - chrome.tabs.create 给出错误 - “未捕获的类型错误：无法调用未定义的方法‘create’”

> ID：10667178
> 
> 赞同：5
> 
> 时间：2012-05-19T16:57:41.733
> 
> 标签：tabs, google-chrome-extension, livequery

我的 manifest.json 包含

```
"content_scripts": [
  {
  "matches": ["http://www.facebook.com/*","https://www.facebook.com/*"],
   "js": ["js/jquery-1.7.2.min.js", "js/jquery.livequery.min.js", "js/script.js"]
  }
] 
```

script.js 的内容是

```
$("#FB_HiddenContainer").livequery(function(){
   chrome.tabs.create({"url":"http://www.google.com"});
}); 
```

当我打开facebook时，控制台报告错误

未捕获的类型错误：无法调用未定义的方法“创建”

在

*chrome-extension://whateveristhisweirdcode/js/script.js:2*

**我怎样才能让它打开一个新标签？**

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-20T07:47:56.883

内容脚本无法访问大多数扩展 API；[只有内容脚本文档](https://developer.chrome.com/extensions/content_scripts)中列出的那些才能工作。相反，使用[window.open](https://developer.mozilla.org/en/DOM/window.open) (" [http://www.google.com](http://www.google.com) ") （是的，这*确实*在 Chrome 中创建了一个新标签；不，Chrome*中没有*任何用户设置可以改变它）。如果您需要更多访问扩展 API，您可以使用[消息传递](https://developer.chrome.com/extensions/messaging)让您的[事件页面](https://developer.chrome.com/extensions/event_pages)代表内容脚本执行操作。

# java - 为什么while循环之后的语句没有被执行？

> ID：10667179
> 
> 赞同：1
> 
> 时间：2012-05-19T16:57:50.097
> 
> 标签：java, android

对我来说，在while循环之后什么都没有执行？那有什么问题？（while循环结束后的行永远不会被执行）

```
client = serverSocket.accept();
BufferedReader in = new BufferedReader(
                            new InputStreamReader(client.getInputStream())
);

while ((line = in.readLine()) != null) {
    Log.i("line",line);
    line111 +=line;
    Log.i("line111",line111);
}

//Any code below this is not executed
Log.i("shan","Shan"); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T17:04:32.920

您的 while 循环卡在套接字上等待下一行。流的源需要在其末端关闭连接。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T17:01:19.980

此代码“while ((line = in.readLine()) != null)”仅在您从具有恒定大小的文件中读取并最终到达该文件时才相关。当您从套接字读取时，您正在进入阻塞状态（等待远程客户端发送数据）。

如果您想退出循环，您可能需要在案卷读取方法上添加超时。

# javascript - 在页面之间共享 Webkit 转换数据

> ID：10667183
> 
> 赞同：0
> 
> 时间：2012-05-19T16:58:43.303
> 
> 标签：javascript, animation, webkit, rotation, transform

我使用以下方法对它们进行缓慢旋转的元素：

```
@-webkit-keyframes rotate {
    0% {-webkit-transform: rotate(-10deg);}
    100% {-webkit-transform: rotate(10deg);}
} 
```

...和：

```
-webkit-animation: rotate 10s infinite alternate ease-in-out; 
```

...在每个元素上应用旋转。

问题是在更改页面时，旋转将从头开始在每个元素上开始，理想情况下，我希望它将每个元素的初始值设置为在继续旋转之前离开上一页时的值。

我正在考虑通过 Javascript 执行此操作，但我不确定这样的事情是否可能。检索旋转值似乎不是问题，但将其传递到下一页确实......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T19:38:16.370

您可能想查看 html5 历史 API 并简单地使用 xmlhttprequest 请求新页面并在操作 url 时更新您的 dom。

想到的一件事是：您可以读取变换矩阵并将其保存在本地存储中并重新应用它...

# c# - JS Metro Style 项目的可移植类库

> ID：10667186
> 
> 赞同：2
> 
> 时间：2012-05-19T16:59:14.180
> 
> 标签：c#, javascript, windows-8, windows-runtime

我正在开发一个针对 .Net 4.5、Metro App、WP7 的便携式类库。当我想从 JavaScript Metro Style 项目中引用它时，发生了错误。

> 确认不受支持的参考。一个或多个所选项目不是此类项目的有效参考。

[http://i.stack.imgur.com/4tWc4.png](http://i.stack.imgur.com/4tWc4.png)

否则，它适用于 C# Metro Style 项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T02:43:01.710

可移植类库可以从不同平台的 .NET 应用程序中引用。但这不同于编写可以通过 WinRT 从 JS（或其他语言，如 C++）调用的 .NET 库。为此，您需要将您的库编译成一个“.winmd”，这会增加一大堆有趣的约束。看看这个问题以获得一些指导：[你如何从 Win8 Javascript Metro 应用程序中引用 C# 类库？](https://stackoverflow.com/questions/9650654/how-do-you-reference-a-c-sharp-class-library-from-a-win8-javascript-metro-applic)

# java - 错误：com.sun.tools.javac.util 包不存在

> ID：10667187
> 
> 赞同：25
> 
> 时间：2012-05-19T16:59:19.717
> 
> 标签：java, playframework, ubuntu-11.10

我正在尝试在 Ubuntu 11.10 上运行我的 play 2.0.1 应用程序，当我访问时，我`domain.com:9000`在终端中收到此错误：

```
info] Compiling 4 Scala sources and 6 Java sources to /var/www/clients/client3/web10/sc2lounge/target/scala-2.9.1/classes...
[error] /var/www/clients/client3/web10/sc2lounge/app/models/Cron.java:29: error: package com.sun.tools.javac.util does not exist
[error] import com.sun.tools.javac.util.List;
[error]                                ^
[error] 1 error
[error] {file:/var/www/clients/client3/web10/sc2lounge/}sc2lounge/compile:compile: javac returned nonzero exit code
[error] application - 

! Internal server error, for request [GET /] ->

sbt.PlayExceptions$CompilationException: Compilation error [error: package com.sun.tools.javac.util does not exist]
    at sbt.PlayReloader$$anon$2$$anonfun$reload$3$$anonfun$2$$anonfun$apply$11$$anonfun$apply$12.apply(PlayReloader.scala:224) ~[na:na]
    at sbt.PlayReloader$$anon$2$$anonfun$reload$3$$anonfun$2$$anonfun$apply$11$$anonfun$apply$12.apply(PlayReloader.scala:224) ~[na:na]
    at scala.Option.map(Option.scala:133) ~[scala-library.jar:0.11.2]
    at sbt.PlayReloader$$anon$2$$anonfun$reload$3$$anonfun$2$$anonfun$apply$11.apply(PlayReloader.scala:224) ~[na:na]
    at sbt.PlayReloader$$anon$2$$anonfun$reload$3$$anonfun$2$$anonfun$apply$11.apply(PlayReloader.scala:221) ~[na:na]
    at scala.Option.map(Option.scala:133) ~[scala-library.jar:0.11.2] 
```

我在我的文件中`JAVA_HOME`设置了这样的：`.bashrc`

```
JAVA_HOME=/usr/lib/jvm/default-java  #Which is a symbolic link to java-7-openjdk-common
export JAVA_HOME
PATH=$PATH:$JAVA_HOME/bin
export PATH 
```

的输出`java -version`是：

```
java version "1.6.0_23"
OpenJDK Runtime Environment (IcedTea6 1.11pre) (6b23~pre11-0ubuntu1.11.10.2)
OpenJDK 64-Bit Server VM (build 20.0-b11, mixed mode) 
```

的输出`javac -version`是：

```
javac 1.7.0_147 
```

我的问题是，为什么`com.sun.tools.javac.util.List`不包含在类路径中？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-19T17:10:22.797

此类位于 中`tools.jar`，它不是 JRE 的一部分。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-05-15T04:30:22.180

当我尝试使用 gradle 构建 kotlin/jvm 时遇到了这个问题，我想将它发布给 jvm 的其他新手，因为 jdk-9，没有`tools.jar`. 设置一个`classpath`很好。

```
JAVA_HOME= path_to_jdk

JRE_HOME= path_to_jre

PATH= ;%JAVA_HOME%\bin;%JRE_HOME%\bin

CLASSPATH=.;%JAVA_HOME%\lib;%JRE_HOME%\lib 
```

# android - 将 MapActivity 与 ItemizedOverlay 一起使用时出现 NullPointerException

> ID：10667198
> 
> 赞同：0
> 
> 时间：2012-05-19T17:01:12.737
> 
> 标签：android, itemizedoverlay, mapactivity

我有一段`NullPointerException`时间使用 MapActvity

异常结果是：

```
05-19 15:34:23.345: E/AndroidRuntime(3126): FATAL EXCEPTION: main
05-19 15:34:23.345: E/AndroidRuntime(3126): java.lang.NullPointerException
05-19 15:34:23.345: E/AndroidRuntime(3126):     at com.google.android.maps.ItemizedOverlay.getIndexToDraw(ItemizedOverlay.java:211)
05-19 15:34:23.345: E/AndroidRuntime(3126):     at com.google.android.maps.ItemizedOverlay.draw(ItemizedOverlay.java:240)
05-19 15:34:23.345: E/AndroidRuntime(3126):     at com.google.android.maps.Overlay.draw(Overlay.java:179)
05-19 15:34:23.345: E/AndroidRuntime(3126):     at com.google.android.maps.OverlayBundle.draw(OverlayBundle.java:42)
05-19 15:34:23.345: E/AndroidRuntime(3126):     at com.google.android.maps.MapView.onDraw(MapView.java:530)
05-19 15:34:23.345: E/AndroidRuntime(3126):     at android.view.View.draw(View.java:6880)
05-19 15:34:23.345: E/AndroidRuntime(3126):     at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
05-19 15:34:23.345: E/AndroidRuntime(3126):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
05-19 15:34:23.345: E/AndroidRuntime(3126):     at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
05-19 15:34:23.345: E/AndroidRuntime(3126):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
05-19 15:34:23.345: E/AndroidRuntime(3126):     at android.view.View.draw(View.java:6883)
05-19 15:34:23.345: E/AndroidRuntime(3126):     at android.widget.FrameLayout.draw(FrameLayout.java:357)
05-19 15:34:23.345: E/AndroidRuntime(3126):     at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
05-19 15:34:23.345: E/AndroidRuntime(3126):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
05-19 15:34:23.345: E/AndroidRuntime(3126):     at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
05-19 15:34:23.345: E/AndroidRuntime(3126):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
05-19 15:34:23.345: E/AndroidRuntime(3126):     at android.view.View.draw(View.java:6883)
05-19 15:34:23.345: E/AndroidRuntime(3126):     at android.widget.FrameLayout.draw(FrameLayout.java:357)
05-19 15:34:23.345: E/AndroidRuntime(3126):     at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:1862)
05-19 15:34:23.345: E/AndroidRuntime(3126):     at android.view.ViewRoot.draw(ViewRoot.java:1522)
05-19 15:34:23.345: E/AndroidRuntime(3126):     at android.view.ViewRoot.performTraversals(ViewRoot.java:1258)
05-19 15:34:23.345: E/AndroidRuntime(3126):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1859)
05-19 15:34:23.345: E/AndroidRuntime(3126):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-19 15:34:23.345: E/AndroidRuntime(3126):     at android.os.Looper.loop(Looper.java:130)
05-19 15:34:23.345: E/AndroidRuntime(3126):     at android.app.ActivityThread.main(ActivityThread.java:3683)
05-19 15:34:23.345: E/AndroidRuntime(3126):     at java.lang.reflect.Method.invokeNative(Native Method)
05-19 15:34:23.345: E/AndroidRuntime(3126):     at java.lang.reflect.Method.invoke(Method.java:507)
05-19 15:34:23.345: E/AndroidRuntime(3126):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
05-19 15:34:23.345: E/AndroidRuntime(3126):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
05-19 15:34:23.345: E/AndroidRuntime(3126):     at dalvik.system.NativeStart.main(Native Method) 
```

MapActivity 的代码是：

```
package pit.opensource.mapapp;

import android.content.Context;
import android.graphics.drawable.Drawable;
import android.location.Criteria;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.util.Log;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;
import com.google.android.maps.MyLocationOverlay;

public class M1MapAppActivity extends MapActivity {

    private MapController mapController;
    private MapView mapView;
    private LocationManager locationManager;
    private MyOverlays itemizedoverlay;
    private MyLocationOverlay myLocationOverlay;
    private GeoPoint myLocation;
    @Override
    public void onCreate(Bundle bundle) {
        super.onCreate(bundle);
        setContentView(R.layout.main); // bind the layout to the activity

        // Configure the Map
        mapView = (MapView) findViewById(R.id.mapview);
        mapView.setBuiltInZoomControls(true);
        mapView.setSatellite(true);
        mapController = mapView.getController();
        mapController.setZoom(1); // Zoon 1 is world view

        Criteria c = new Criteria();
        //c.setAccuracy(Criteria)
        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,0, 0, new GeoUpdateHandler());

        //myLocationOverlay = new MyLocationOverlay(this, mapView);
        //mapView.getOverlays().add(myLocationOverlay);

        /*myLocationOverlay.runOnFirstFix(new Runnable() {
            public void run() {
                myLocation =  myLocationOverlay.getMyLocation();
            }
        });*/

        Drawable drawable = this.getResources().getDrawable(R.drawable.point);
        itemizedoverlay = new MyOverlays(this, drawable);
        createMarker();

    }

    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }

    public class GeoUpdateHandler implements LocationListener {

        @Override
        public void onLocationChanged(Location location) {
            int lat = (int) (location.getLatitude() * 1E6);
            int lng = (int) (location.getLongitude() * 1E6);
            GeoPoint point = new GeoPoint(lat, lng);

        //  createMarker();
        }

        @Override
        public void onProviderDisabled(String provider) {
        }

        @Override
        public void onProviderEnabled(String provider) {
        }

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {
        }
    }

    private void createMarker() {
        Log.e("Create Marker","-------------");

    //  GeoPoint p = mapView.getMapCenter();
    //  OverlayItem overlayitem = new OverlayItem(p,"Title: Abu Said Resturant","Best Falafel in Gaza :) ");

        Place p1 = new Place();
        p1.point = new GeoPoint(345455545, 454558545);
        p1.Title = "PIT";
        p1.Description = "Open source course";

        mapController.animateTo(p1.point); // mapController.setCenter(point);

        itemizedoverlay.addOverlayItem(p1);

        Log.d("Itemized overlay=========",itemizedoverlay.size()+"");
        if (itemizedoverlay.size() > 0) {
            mapView.getOverlays().add(itemizedoverlay);
        }

    }

    @Override
    protected void onResume() {
        super.onResume();
    //  myLocationOverlay.enableMyLocation();
    //  myLocationOverlay.enableCompass();
    }

    @Override
    protected void onPause() {
        super.onResume();
    //  myLocationOverlay.disableMyLocation();
    //  myLocationOverlay.disableCompass();
    }

} 
```

以下是 MyOverlay 的代码：

```
package pit.opensource.mapapp;
import java.util.ArrayList;

import android.content.Context;
import android.graphics.drawable.Drawable;
import android.util.Log;
import android.widget.Toast;

import com.google.android.maps.ItemizedOverlay;
import com.google.android.maps.OverlayItem;

public class MyOverlays extends ItemizedOverlay<OverlayItem> {

    private ArrayList<OverlayItem> overlays= new ArrayList<OverlayItem>();
    private Context context;

    public MyOverlays(Context context, Drawable defaultMarker) {
        super(boundCenterBottom(defaultMarker));
        this.context = context;
    }

    @Override
    protected OverlayItem createItem(int i) {

        Log.d("*******createItem",overlays.get(i).getTitle());
        return overlays.get(i);
    }
    @Override
    public int size() {
        Log.d("Item size ", overlays.size()+"");
        return overlays.size();
    }

    public void addOverlayItem(Place p) {

        Log.d("Overlay item ------ ",p.Title);
        OverlayItem o = new OverlayItem(p.point, p.Title, p.Description);
        overlays.add(o);

    }

    protected boolean onTap(int index) {
        OverlayItem overlayItem = overlays.get(index);
        String title = overlayItem.getTitle();
        Toast.makeText(context, title, Toast.LENGTH_LONG).show();
        return true;
    };

} 
```

# scala - Scala 可选的默认参数

> ID：10667200
> 
> 赞同：1
> 
> 时间：2012-05-19T17:01:22.243
> 
> 标签：scala, playframework

假设我有一个带有默认参数的 Scala 类

```
class MyClass(p1: Int = 0, p2: Int = 1) 
```

`p1`并且`p2`来自 Play 应用程序中的可选查询字符串参数，例如，

```
http://mysite.com/blah?p1=10&p2=20 
```

在 Play 控制器操作中，我试图找出一种在调用时`MyClass`根据 url 中传递的内容动态构造参数列表的方法。例如，可能根本没有传递参数，在这种情况下我会调用`new MyClass`，如果`p1`传递了，那么我会调用`new MyClass(p1)`从 url 查询参数中提取 p1 的位置，你明白了。

如何在不对参数列表进行硬编码的情况下做到这一点，因为我将来可能会添加其他可选参数。是否可以构造一个`Map`带有命名参数的 -like 对象作为参数列表或类似的东西传递？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T17:10:34.700

您可以实现一个采用 Map 的辅助构造函数。如果您不想重复默认值，则可以将它们作为常量。

```
val p1Default = 0
val p2Default = 1

class MyClass(p1: Int = p1Default, p2: Int = p2Default) {
  def this(m: Map[String, Int]) =
    this(m.getOrElse("p1", p1Default), m.getOrElse("p2", p2Default))
} 
```

用法：

```
new MyClass(p1 = 5, p2 = 6)
new MyClass(Map("p1" -> 5))
new MyClass(p2 = 6) 
```

# python - 如何在scrapy中覆盖/使用cookies

> ID：10667202
> 
> 赞同：21
> 
> 时间：2012-05-19T17:01:29.893
> 
> 标签：python, scrapy

我想废弃[http://www.3andena.com/](http://www.3andena.com/)，该网站首先以阿拉伯语开头，并将语言设置存储在 cookie 中。[如果您尝试通过 URL ( http://www.3andena.com/home.php?sl=en](http://www.3andena.com/home.php?sl=en) )直接访问语言版本，则会出现问题并返回服务器错误。

所以，我想将 cookie 值“store_language”设置为“en”，然后使用这个 cookie 值开始废弃网站。

我正在使用带有几个规则的 CrawlSpider。

这是代码

```
from scrapy.spider import BaseSpider
from scrapy.selector import HtmlXPathSelector
from scrapy.contrib.spiders import CrawlSpider, Rule
from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor
from scrapy import log
from bkam.items import Product
from scrapy.http import Request
import re

class AndenaSpider(CrawlSpider):
  name = "andena"
  domain_name = "3andena.com"
  start_urls = ["http://www.3andena.com/Kettles/?objects_per_page=10"]

  product_urls = []

  rules = (
     # The following rule is for pagination
     Rule(SgmlLinkExtractor(allow=(r'\?page=\d+$'),), follow=True),
     # The following rule is for produt details
     Rule(SgmlLinkExtractor(restrict_xpaths=('//div[contains(@class, "products-dialog")]//table//tr[contains(@class, "product-name-row")]/td'), unique=True), callback='parse_product', follow=True),
     )

  def start_requests(self):
    yield Request('http://3andena.com/home.php?sl=en', cookies={'store_language':'en'})

    for url in self.start_urls:
        yield Request(url, callback=self.parse_category)

  def parse_category(self, response):
    hxs = HtmlXPathSelector(response)

    self.product_urls.extend(hxs.select('//td[contains(@class, "product-cell")]/a/@href').extract())

    for product in self.product_urls:
        yield Request(product, callback=self.parse_product)  

  def parse_product(self, response):
    hxs = HtmlXPathSelector(response)
    items = []
    item = Product()

    '''
    some parsing
    '''

    items.append(item)
    return items

SPIDER = AndenaSpider() 
```

这是日志：

```
2012-05-30 19:27:13+0000 [andena] DEBUG: Redirecting (301) to <GET http://www.3andena.com/home.php?sl=en&xid_479d9=97656c0c5837f87b8c479be7c6621098> from <GET http://3andena.com/home.php?sl=en>
2012-05-30 19:27:14+0000 [andena] DEBUG: Redirecting (302) to <GET http://www.3andena.com/home.php?sl=en&xid_479d9=97656c0c5837f87b8c479be7c6621098> from <GET http://www.3andena.com/home.php?sl=en&xid_479d9=97656c0c5837f87b8c479be7c6621098>
2012-05-30 19:27:14+0000 [andena] DEBUG: Crawled (200) <GET http://www.3andena.com/Kettles/?objects_per_page=10> (referer: None)
2012-05-30 19:27:15+0000 [andena] DEBUG: Crawled (200) <GET http://www.3andena.com/B-and-D-Concealed-coil-pan-kettle-JC-62.html> (referer: http://www.3andena.com/Kettles/?objects_per_page=10) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-06-08T13:02:01.480

修改您的代码如下：

```
def start_requests(self):
    for url in self.start_urls:
        yield Request(url, cookies={'store_language':'en'}, callback=self.parse_category) 
```

Scrapy.Request 对象接受可选`cookies`的关键字参数，[请参阅此处的文档](http://doc.scrapy.org/en/latest/topics/request-response.html#topics-request-response)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-06-02T15:08:18.653

从 Scrapy 0.24.6 开始，我就是这样做的：

```
from scrapy.contrib.spiders import CrawlSpider, Rule

class MySpider(CrawlSpider):

    ...

    def make_requests_from_url(self, url):
        request = super(MySpider, self).make_requests_from_url(url)
        request.cookies['foo'] = 'bar'
        return request 
```

使用蜘蛛属性中`make_requests_from_url`的 URL 进行Scrapy 调用。`start_urls`上面的代码所做的是让默认实现创建请求，然后添加一个`foo`具有 value 的 cookie `bar`。（或者如果发生这种情况，将 cookie 更改为值`bar`，无论如何，默认实现生成的请求中已经有一个`foo`cookie。）

如果您想知道*不是*从创建的请求会发生什么`start_urls`，让我补充一下，Scrapy 的 cookie 中间件将记住使用上面代码设置的 cookie，并将其设置在与您明确添加的请求共享同一域的所有未来请求上你的饼干。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-19T17:13:43.073

直接来自[请求和响应的 Scrapy 文档。](http://doc.scrapy.org/en/latest/topics/request-response.html#topics-request-response)

你需要这样的东西

```
request_with_cookies = Request(url="http://www.3andena.com", cookies={'store_language':'en'}) 
```

# android - 如何在 Java 代码中调用本机函数

> ID：10667204
> 
> 赞同：0
> 
> 时间：2012-05-19T17:01:58.983
> 
> 标签：android, java-native-interface, native

我发现一些 android 本机方法对我非常有用。

```
private native void nativeMoveSelection(int x, int y); 
```

此方法由 android.webkit.WebKit.java 调用。我将我的包更改为 android.webkit。但是当我调用这个方法时，系统会抛出 java.lang.UnsatisfiedLinkError。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T17:22:16.530

那是因为您的应用程序中没有所需的 .so 库。要使用本机函数，您需要使用 .so 加载本机库 (.so) 文件`System.loadlibrary("yourLibrary")`。

# architecture - 在解决方案中针对每个项目的 Nuget 包

> ID：10667206
> 
> 赞同：2
> 
> 时间：2012-05-19T17:02:21.027
> 
> 标签：architecture, projects-and-solutions, nuget

我有六个项目的 1 个解决方案：

1.  **客户**
2.  **客户端测试**
3.  **领域**
4.  **域.测试**
5.  **常见的**
6.  **通用测试**

如您所见，我有 3 个项目用于进行测试。我想通过 NuGet 安装这三个包的 xUnit，但不将此包添加到三个非测试项目中。管理这种性质的依赖关系的最简单方法是什么？

顺便说一句，我还想以类似的方式将不同的项目（如 Ninject）添加到客户端和域。我认为为了添加更多上下文而提及这一点可能很有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T18:27:26.773

[在这里](http://docs.nuget.org/docs/start-here/managing-nuget-packages-using-the-dialog "这里")找到答案。您需要选择解决方案名称并从那里安装软件包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-15T14:19:14.177

您还可以在 nuget 控制台中使用以下命令：

```
PM> Install-Package [InsertNewPackageNameHere] -Version 1.0.0 -Project [MyMvcApplication1] 
```

（其中“ *InsertNewPackageNameHere* ”可以是任何包名称，即 EntityFrameWork 和“ *MyMvcApplication* ”可以是解决方案中任何项目的名称）

（要在 vs2012 菜单中找到 nuget 控制台，请单击：工具 > 库包管理器 > 包管理器控制台）

# c++ - 编译时出现错误 C2676

> ID：10667207
> 
> 赞同：5
> 
> 时间：2012-05-19T17:02:37.693
> 
> 标签：c++

我正在尝试用 C++（使用模板）编写代码以在 2 个矩阵之间添加。

我在 .h 文件中有以下代码。

```
#ifndef __MATRIX_H__
#define __MATRIX_H__

//***************************
//         matrix
//***************************

template <class T, int rows, int cols> class matrix {
public:
    T mat[rows][cols];
    matrix();
    matrix(T _mat[rows][cols]);
    matrix operator+(const matrix& b);
};

template <class T, int rows, int cols> matrix <T,rows,cols> :: matrix (T _mat[rows][cols]){
    for (int i=0; i<rows; i++){
        for (int j=0; j<cols; j++){
            mat[i][j] = _mat[i][j];
        }
    }
}

template <class T, int rows, int cols> matrix <T,rows,cols> :: matrix (){
    for (int i=0; i<rows; i++){
        for (int j=0; j<cols; j++){
            mat[i][j] = 0;
        }
    }
}

template <class T, int rows, int cols> matrix <T,rows,cols> matrix <T,rows,cols>::operator+(const matrix<T, rows, cols>& b){
    matrix<T, rows, cols> tmp;
    for (int i=0; i<rows; i++){
        for (int j=0; j<cols; j++){
            tmp[i][j] = this->mat[i][j] + b.mat[i][j];
        }
    }
    return tmp;
}

#endif 
```

我的 .cpp ：

```
#include "tar5_matrix.h"
int main(){

    int mat1[2][2] = {1,2,3,4};
    int mat2[2][2] = {5,6,7,8};
    matrix<int, 2, 2> C;
    matrix<int, 2, 2> A = mat1;
    matrix<int, 2, 2> B = mat2;
    C = A+B;
    return 0;
} 
```

编译时，我收到以下错误：

> 1>c:\users\karin\desktop\lior\study\cpp\cpp_project\cpp_project\tar5_matrix.h(36): error C2676: binary '[' : 'matrix' 未定义此运算符或转换为类型预定义运算符可接受

请指教

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T17:05:19.633

该行：

```
tmp[i][j] = this->mat[i][j] + b.mat[i][j]; 
```

应该：

```
tmp.mat[i][j] = this->mat[i][j] + b.mat[i][j]; 
```

您正在尝试`tmp`直接索引变量，它的类型是`matrix<T, rows, cols>`. 因此，它抱怨`matrix`该类不提供`operator[]`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T17:05:49.440

由于`tmp`是 type `matrix<T, rows, cols>`，因此以下内容：

```
tmp[i][j] = ... 
```

`matrix::operator[]`您尚未定义的用途。你可能是想说

```
tmp.mat[i][j] = ... 
```

# actionscript-3 - AS3 Flash：如何更新自定义类实例？

> ID：10667222
> 
> 赞同：0
> 
> 时间：2012-05-19T17:04:06.283
> 
> 标签：actionscript-3, flash, class, instance

我将 AS3.0 与 Flash（不是 Flex）一起使用。我创建了一个名为 drawBarChart 的自定义类，并创建了一个名为 BarChart1 的实例。

```
var BarChart1 = new drawBarChart(barChartX, barChartY, barChartWidth, barChartHeight, barChartScale) 
```

如果我稍后在代码中更改变量 barChartScale 的值，则 BarChart1 实例不会更改。有人可以向我解释使用 barChartScale 的新值更新 BarChart1 实例的正确语法是什么吗？

谢谢！

编辑：谢谢 Loxxy 和 shaunhusain 的回复。我已经尝试实施您的方法 Loxxy，但它仍然对我不太有效。通过一些跟踪语句，我可以看到我在自定义类 setChartScale 函数中得到了要更改的 _Scale 变量。但是由此产生的 _Scale 变化似乎并没有反映在最初创建实例的自定义类 BarChart 函数中。即实例上的比例值对我来说还没有改变。我会继续努力的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T17:54:56.680

您需要的是公开 scale 属性以供以后访问。

这里的 Action Script 没有什么特别之处，只是一种编码练习。像这样实现它：

```
public class BarChart 
    {    
        var _Scale:Number;

        public function BarChart(barChartX, barChartY, barChartWidth, barChartHeight, barChartScale) 
        {
            // Set other properties...

            _Scale = barChartScale;

        }

        public function setChartScale(scale:Number)
        {
            _Scale = scale; 
        }    
    } 
```

现在将其用作：

```
 var chart = new BarChart(0,0,80,80,1);

        chart.setChartScale(1.5);     // At a later point.. 
```

# css - 技巧：在 CSS 和 HTML 中，如果容器的 z-index 为 0，如何使子 DIV 进入容器下方？

> ID：10667226
> 
> 赞同：1
> 
> 时间：2012-05-19T17:04:47.873
> 
> 标签：css

这可能是一个更高级的 CSS 问题`z-index`：

[您可以在http://jsfiddle.net/cPdge/6/](http://jsfiddle.net/cPdge/6/)中看到它

使用当前的 Firefox、Chrome、Safari 或 IE 9，您应该会看到父 DIV 顶部的蓝色 DIV。

我们如何使蓝色框位于父 DIV 下方？ **注意：如果父 DIV 的 z-index 被删除，那么蓝色 DIV 会在它下面，但是如果 z-index 没有被删除并保持为`0`呢？** 为什么 a `z-index`of`0`或 no`z-index`会有所不同？通常，没有指定与 相同`0`。

该页面中的代码是：

```
 <div id="box1">
        some content
        <div id="subbox1">blue
        </div>
        <div id="subbox2">orange
        </div>
    </div>​ 
```

和 CSS：

```
#box1 { width: 600px; height: 400px; border: 6px dashed orange; 
  position: absolute; top: 100px; left: 100px; background: #ffe; z-index: 0 }

#subbox1 { width: 300px; height: 200px; border: 6px dashed orange; 
  position: absolute; top: 310px; left: 100px; background: #eff; z-index: -10000 }

#subbox2 { width: 300px; height: 200px; border: 6px dashed orange; 
  position: absolute; top: 210px; left: 200px; background: #fc9; z-index: 2000 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T17:11:00.247

如果没有定位，您的否定`z-index`将起作用，否则子框位于子[堆叠上下文中](https://developer.mozilla.org/en/CSS/Understanding_z-index/The_stacking_context)，并且不能定位在父框下方。`box1`

[http://jsfiddle.net/cPdge/7/](http://jsfiddle.net/cPdge/7/)

> 为什么 z-index 为 0 或没有指定 z-index 会有所不同？

在我链接到的文档中对此的答案是：要创建一个新的堆叠上下文，元素必须既定位又声明`z-index`（或`opacity`小于 1，这有点奇怪......）。

# python - 在 mac 上安装 rpy 或 rpy2

> ID：10667229
> 
> 赞同：2
> 
> 时间：2012-05-19T17:05:07.933
> 
> 标签：python, r, installation, rpy2

我正在尝试在我的 Macbook 上安装 rpy 或 rpy2，以便可以从 python 中使用 R。关于 rpy 的信息可以在这里找到：[http ://rpy.sourceforge.net/index.html](http://rpy.sourceforge.net/index.html)

我的问题在于安装本身。我似乎无法让 python 使用 import 命令识别 Rpy：我不断收到消息“没有名为 rpy2 的模块”。有谁知道我在哪里可以找到有关如何成功安装它的一些分步说明？我已经安装了 python 和 R，并且都运行良好。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T17:09:28.620

试试`easy_install rpy2`。您需要在此之前安装[easy_install 。](http://pypi.python.org/pypi/setuptools)

我从[这里拿走了](http://rpy.sourceforge.net/rpy2/doc-2.2/html/overview.html#easy-install-and-pip)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T21:21:49.743

我早就放弃了 Mac 上的这些问题。由于我安装了 OS Lion，我发现我需要切换到[MacPorts ，然后从](https://web.archive.org/web/20140821133357/https://trac.macports.org/wiki/InstallingMacPorts)[他们的存储库](https://ports.macports.org/search/?q=Rpy2&name=on)安装像 RPy2 这样的包。

我知道有些人喜欢深入研究系统并了解架构的所有特性，并在他们的 Mac 上保留一个普通的 python 安装。我发现我经常遇到像你这样的问题，它们分散了我对实际工作的注意力。

我只是在需要时下载[MacPorts 模块](https://web.archive.org/web/20200510115520/https://www.macports.org/ports.php)，然后继续解决手头的问题。[其他人对HomeBrew](https://brew.sh/)也有同样的看法，但我只使用过 MacPorts，它使模块的安装变得太容易了。您可能需要花一些时间调查这些解决方案是否适合您。

使用 MacPorts 或 HomeBrew 等包管理器的另一种方法是使用[virtualenv](https://pypi.org/project/virtualenv/)并在那里安装 python 和所有相关模块。同样，这不是我直接尝试过的解决方案，但快速搜索会向您展示这种使用特定 Python 可执行文件并将其模块打包在隔离环境中的方法的许多认可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T07:51:19.473

只要你在你的mac上安装了pip，那么生活就会很容易：sudo pip install rpy2

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-18T03:26:25.620

如果你想要 rpy 它不在 macport 上，至少搜索他们的包只显示 rpy2。根据 rpy 网站，它在 fink 中。但是目前 fink 已关闭，因此我无法验证这一点。这很烦人，因为我需要 rpy（不是 rpy2），因为另一个包依赖于它。

我还尝试使用 pip 来查找 rpy，但它说没有包，这很遗憾，因为 pip 非常适合 python 安装（前提是我记得先使用 'sudo'。

# jquery - 在jQuery中拖动元素

> ID：10667231
> 
> 赞同：1
> 
> 时间：2012-05-19T17:05:19.503
> 
> 标签：jquery, jquery-ui, drag-and-drop, jquery-ui-draggable, droppable

当我将多个项目拖放到特定的 div 时，它只需要第一个元素。后来当我签入 console.log($(ui.draggable)) 长度为 1。

```
({selector:"", context:#1=({}), 0:#1#, length:1})  when i dragged 3 elements 
```

请帮助我哪里出错了？？

[http://jsfiddle.net/akkiys/Hkfh2/4/](http://jsfiddle.net/akkiys/Hkfh2/4/)

HTML 如下所示：

```
<ul id="drag" >
    <li id="1">one</li>  
    <li id="2">two</li>    
    <li id="3">three</li>  
    <li id="4">four</li> 
    <li id="5">five</li>        
</ul> 
```

和 JavaScript：

```
var selectedClass = 'ui-state-highlight',
    clickDelay = 600,
    // click time (milliseconds)
    lastClick, diffClick; // timestamps
$("#drag li")
// Script to deferentiate a click from a mousedown for drag event
.bind('mousedown mouseup', function(e) {
    if (e.type == "mousedown") {
        lastClick = e.timeStamp; // get mousedown time
    } else {
        diffClick = e.timeStamp - lastClick;
        if (diffClick < clickDelay) {
            // add selected class to group draggable objects
            $(this).toggleClass(selectedClass);
        }
    }
}).draggable({
    scroll: false,
    revertDuration: 10,
    // grouped items animate separately, so   leave this number low
    start: function(e, ui) {
        ui.helper.addClass(selectedClass);
    },
    stop: function(e, ui) {
        // reset group positions
        $('.' + selectedClass).css({
            top: 0,
            left: 0
        });
    },
    drag: function(e, ui) {
        // set selected group position to main dragged object
        // this works because the position is relative to the starting position
        $('.' + selectedClass).css({
            top: ui.position.top,
            left: ui.position.left
        });

    }
});

$(".drop").droppable({

    drop: function(event, ui) {

        var droppableId = $(this).find('div.inner').attr("id");

        //var id = ui.draggable.attr("id");   // i need to retrive multiple id
        console.log($(ui.draggable))
        var m_id = [];

        $.each($(ui.draggable), function(i, e) {
            m_id.push(e.id);
            alert(m_id);
        });
        console.log(m_id);

    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-04T09:25:47.127

我不知道这个问题自创建和最新贡献以来已经过去了一年，但我只是偶然发现它并认为我尝试贡献，即使我在这些事情上完全是新手。希望有人会使用它。

我可以看到的基本上是：由于您使用类（'.' + selectedClass）拖动所有元素，因此您还应该在放置事件中检查相同的元素。

这样做的原因是你不是真的'jquery-dragging'多个项目，你只是通过一致地移动元素来视觉模拟它，围绕jquery将感知为实际被拖动的元素的元素。如果你在检查时运行小提琴，你会看到你选择的类在所有列表元素上切换，但是当你开始拖动时，只有一个元素将包含 jquery 使用的 .ui-draggable-dragging 类。

只需将 drop examplecode 中的标识符更改为 selectedClass 即可让您找到多个 id，例如：

```
$.each($("."+ selectedClass), function(i, e) {
m_id.push(e.id);
alert(m_id);
}); 
```

# python - 接近 x.0 时奇怪的 Python 行为

> ID：10667237
> 
> 赞同：2
> 
> 时间：2012-05-19T17:06:00.587
> 
> 标签：python, floating-accuracy

我正在玩一个简单的递归公式，并注意到代码

```
p = 2.0

while p < 3.0:
    print p
    p = (6+p)**(0.5) 
```

将打印

```
*snip*
...
2.99999999952
2.99999999992
2.99999999999
3.0
3.0
3.0
3.0
3.0
3.0 
```

当然，在 2.99999999999 和 3.0（以及之前）之间会有某种近似值，但这里实际发生了什么？对我来说，浮点 3.0 将被解释为不完全是 3.0 但仍然足够接近可以连续多次称为 3.0 似乎很奇怪。

我是在代码方面做错了什么，还是我的解释正确？如果是这样，为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T17:08:37.973

如果您像这样更改打印语句：

```
print '%.20f' % p 
```

一切都会变得清晰：

```
2.00000000000000000000
2.82842712474619029095
2.97126692250060076006
2.99520732546189538681
2.99920111454065274614
2.99986684946859805123
2.99997780816268644344
2.99999630135816763854
2.99999938355963147174
2.99999989725993687628
2.99999998287665592400
2.99999999714610909862
2.99999999952435159045
2.99999999992072519106
2.99999999998678745783
2.99999999999779776161
2.99999999999963273822
2.99999999999993871569
2.99999999999998978595
2.99999999999999822364
2.99999999999999955591 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T17:08:18.180

这是由于`print`格式化浮点数的方式。尝试使用打印

```
print("%.40f" % p) 
```

# ruby-on-rails - Rails：如何使用 PG_Search 搜索 Act_As_Taggable_On 生成的标签？(postgresql)

> ID：10667242
> 
> 赞同：10
> 
> 时间：2012-05-19T17:06:30.627
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, search, pg-search

我目前正在使用[Act_as_taggable_on](https://github.com/mbleigh/acts-as-taggable-on)进行标记，并使用[pg_search](https://github.com/Casecommons/pg_search)在我的 Rails 3 应用程序上搜索我的 postgresql 数据库。

如何使用 pg_search 搜索 act_as_taggable_on gem 生成的标签？我可以通过说“Post.find(1).tag_list”来查看 Post 的标签，但是 Post 表中没有“tag”列，所以当我运行

```
 pg_search_scope :search_by_weight, :against => {:tag_list => 'A', :title => 'B', :content => 'C'} #,:using => [:tsearch => {:prefix => true}] #:trigram, :dmetaphone] 
```

它给了我一个错误，因为 Post 表中不存在 Post.tag_list 列。当您可以通过点连接器（即mission.tag_list）找到值但表中不存在时，它叫什么？我不知道该输入什么。所以基本上，我如何将不存在的列作为参数传递？

另外，你可能已经注意到我注释掉了

```
 :using => [:tsearch => {:prefix => true}] #:trigram, :dmetaphone] 
```

多于。我似乎找不到如何为 Postgresql 安装额外的模块。在哪里输入 CREATE EXTENSION？（使用 ubuntu 11.10 和 postgresql 9.1.3 -> 和 heroku 进行生产）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-24T21:16:49.550

一个更简单的方法是使用关联并通过 pg_search 进行搜索，如下所示：

```
class Item < ActiveRecord::Base
 include PgSearch  

  pg_search_scope :full_search, 
    :against => {  
    :item_status => 'A',
    :title => 'B',
    :description => 'C'    
   },       
    :associated_against => {
    :tags => [:name]    
   }
end 
```

我刚刚在我的一个项目中实现了这一点，并且效果很好（通过标签名称搜索）。不幸的是，我无法弄清楚如何加权关联关系，因为它说在 Items 表中找不到“标签”列。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-30T03:03:40.130

这对我来说也可以使标签加权

```
 pg_search_scope :search_by_weight, 
      :against => {  
      :title => 'B',
      :content => 'C'    
    },       
    :associated_against => {
      :tags => { :name => 'A' }    
    },
    using: {tsearch: {dictionary: "english"}} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T17:09:10.673

几年前我在 plpgsql 中编写了我的实现。请参阅我的博客： http: [//omarqureshi.net/articles/2010-12-25-tsearch2-for-rails-applications](http://omarqureshi.net/articles/2010-12-25-tsearch2-for-rails-applications)，其中介绍了如何使其工作。

# javascript - 如何将一个js文件包含在另一个js文件中

> ID：10667243
> 
> 赞同：0
> 
> 时间：2012-05-19T17:06:35.397
> 
> 标签：javascript

> **可能重复：**
> [我应该如何从另一个 js 文件中包含一个 js 文件？](https://stackoverflow.com/questions/842504/how-should-i-include-a-js-file-from-another-js-file)

在我的一个 js 文件中，我需要使用其他 js 文件中的函数。我将如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T17:08:25.600

只需在源文件之后加载依赖文件 - 例如文件 a 中的函数需要文件 b 中的函数

```
<script src="b.js"/>
<script src="a.js"/> 
```

如果要动态加载脚本文件，则：

```
function loadScript(filename){
    // find the header section of the document
    var head=document.getElementsByTagName("head")[0];

    // create a new script element in the document
    // store a reference to it
    var script=document.createElement('script')

    // attach the script to the head
    head.appendChild(script);

    // set the script type
    script.setAttribute("type","text/javascript")

    // set the script source, this will load the script
    script.setAttribute("src", filename)
}

loadScript("someScript.js"); 
```

Google 使用它来将 adsense 代码导入页面。

更新

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T17:08:09.867

您需要在使用您的函数的任何页面中包含这两个文件。

```
<script type="text/javascript" src="myscript.js"></script>
<script type="text/javascript" src="script myscript uses.js"></script> 
```

两个文件中的公共功能将可供彼此使用。

您*可以*在脚本中向 DOM添加一个`<script>`指向依赖项的元素 - 这将允许您仅在页面中包含您的 javascript 文件。

```
document.write("<script language='javascript' src='script myscript uses.js' />"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T17:09:30.520

以正确的顺序将两者都包含到页面中：

```
<head>
   ...
   <script type="text/javascript" src="library.js"></script>
   <script type="text/javascript" src="scripts_that_use_library_functions.js"></script>
</head> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T17:11:06.653

您可以在 DOM 中动态添加 js 文件，如下所示：

```
var headID = document.getElementsByTagName("head")[0];         
var newScript = document.createElement('script');  
newScript.type = 'text/javascript';  
newScript.src = 'http://www.somedomain.com/somescript.js';  
headID.appendChild(newScript); 
```

# vim - Vim 重复在词尾追加一些内容

> ID：10667248
> 
> 赞同：7
> 
> 时间：2012-05-19T17:07:31.973
> 
> 标签：vim

在 vim 中，我经常发现自己想在我的源代码中为标识符附加一个后缀，然后使用 '.' 在其他标识符上重复它。

即转换：

```
foo bar baz faz 
```

至：

```
foo_old bar_old baz_old faz_old 
```

我希望能够做到：

```
ea_old<ESC>w.w.w. 
```

代替：

```
ea_old<ESC>wea_old<ESC>wea_old<ESC>wea_old<ESC> 
```

换句话说，我希望将文本附加到单词的末尾，以在历史记录中显示为可重复的命令。有人知道怎么做吗？

我可以：

```
nmap <C-a> ea 
```

创建一种更方便的方式来附加在单词的末尾，但它只重复“a”。理想情况下，我希望能够重复整个“eaarbitrarytext”序列。

我安装了 repeat.vim 插件并做了一些修改，但我真的不知道我在 vimscript 中做什么。

澄清要求：我希望能够使用任意移动命令来跳转，直到我的光标位于标识符上的某个位置，然后点击“。” 重复附加后缀。上面的例子是一个特例。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-19T17:23:35.923

`e``a``_old``ESC``e``.``e``.``e``.`应该为你工作。

另一种可能的解决方案是`c`在搜索和替换命令上使用标志：

```
:.s/\<[[:alnum:]]\+\>/&_old/gc 
```

然后您所要做的就是按`y`确认每次更换。如果您有很多替换要做并且想要手动确认每个替换，这会更快。另一方面，如果您想添加`_old`到一行中的*每个*单词，您可以删除`c`：

```
:.s/\<[[:alnum:]]\+\>/&_old/g 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-20T09:42:10.630

我的猜测是，OP 举了一个非常简单的例子来说明一个更通用的问题，可以将其重新表述为“我想很容易地重复任意大的命令序列”。

为此，有`q`命令。选择你最喜欢的寄存器进行录音，说“q”，然后：

`q``q`-- 开始录音

（在这里做任何复杂的动作......）

`q`-- 停止记录

`@``q`-- 回放录音

由于我自己在编程时经常使用它，我最终将上面的操作分别映射到`F2`我`F3`的`F4`键盘上。这允许在真正的 1 次击键中重复您的一组操作。在 .vimrc 中：

```
nmap <F2> qq
nmap <F3> q
nmap <F4> @q 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T09:53:25.713

对于这种特定情况，您可以使用搜索和替换：`s/ /_old /g`。

# objective-c - 如何从 UITableView 获取单元格

> ID：10667250
> 
> 赞同：1
> 
> 时间：2012-05-19T17:07:42.437
> 
> 标签：objective-c, ios, xcode

为什么此代码返回一个单元格？

```
static NSString *cellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier]; 
```

但是当我试图用它获取细胞时， `[tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:0]]` 它不会返回任何东西。有谁知道这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T21:05:16.387

根据[苹果的文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html)：

> **返回值**
> 
> 表示表格单元格的对象，如果单元格不可见或 indexPath 超出范围，则为 nil。

因此，如果该单元格当前不可见，那么它将返回`nil`. 那么，看得见吗？

除此之外 - 检查您是否真的在其中创建单元格，`cellForRowAtIndexPath:`因为您没有明确表明您是。

# android - android audio - 计算两个设备之间的距离

> ID：10667255
> 
> 赞同：1
> 
> 时间：2012-05-19T17:08:34.103
> 
> 标签：android, audio, audio-recording, recording

我很难用声音计算两部安卓手机之间的距离。

- 主要想法是让 2 部手机同时同步，让手机 A 向手机 B 发送一条消息，让他知道他很快就会播放声音。注意此时手机A保存。

- 然后移动B向移动A发送“好的，你可以继续”，同时它开始记录接下来的1秒左右。

- 然后手机A得到“ok”并开始播放1000Hz的声音。

-Mobile B 检测到该频率并将其当前时间发送到 mobileA

现在我们有了计算距离的所有信息。问题是理论上这一切都很好，但是当我实现这个时，我在等式中添加了很多随机时间。

**主要问题是我无法指出移动 B 获得良好频率的绝对时间。**

我尝试不记录整个 1000 毫秒，而是记录很多（12~24 毫秒）的“迷你”块，但是移动设备在 recorder_.startRecording()/recorder_.read()/recorder_.stop() 命令上花费的时间太多了，并且我错过了很多毫秒的频率（每个毫秒等于 30 厘米，所以我不能努力很多错误......）

谁能告诉我我做错了什么或指导我更好地做到这一点？

主要问题是录音设备无法指向他记录想要的频率的实际时间......

先谢谢了，

提供。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-02T10:09:55.547

请查看 API 19 中引入的新音频功能。

# android - 根据手机方向更改参数

> ID：10667256
> 
> 赞同：1
> 
> 时间：2012-05-19T17:08:34.920
> 
> 标签：android

我想设置这些参数

```
IF (the phone is in vertical orientation)
     imageView.setLayoutParams(new Gallery.LayoutParams(400, 400));

ELSE ()
     imageView.setLayoutParams(new Gallery.LayoutParams(600, 600)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T17:13:54.837

您可以使用该`getRotation()`方法检查设备的旋转，并在活动重新启动时设置图像参数！

有关功能的详细信息，请参[见此](http://developer.android.com/reference/android/view/Display.html#getRotation%28%29)链接，并在`if`条件中使用它。

# java - Spring发现多个bean定义错误

> ID：10667259
> 
> 赞同：2
> 
> 时间：2012-05-19T17:08:41.420
> 
> 标签：java, spring, spring-mvc

我的基于 Spring 的 Web 项目有以下代码：

**控制器：**

```
@Controller
@RequestMapping("mycontroller")
public class MyObjectController {

    @Autowired
    private MyService service;
// Code omitted
} 
```

**服务：**

```
@Service
public class MyServiceImpl implements MyService {

    @Autowired
    @Qualifier("mydao")
    private MyDao mydao;

    @Autowired
    @Qualifier("mydao2")
    private MyDao2 mydao2;

// Code omitted
} 
```

**Context.xml（春天）：**

```
<annotation-driven />
<context:annotation-config /> 

<context:component-scan base-package="com.mycompany" />

<beans:bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping" />
<beans:bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter" />    

<beans:bean id="myService" class="com.mycompany.serviceimpl.MyServiceImpl" /> 
```

但是它会引发此错误：

> NoSuchBeanDefinitionException：没有定义类型 [com.mycompany.service.MyService] 的唯一 bean：预期单个匹配 bean 但找到 2：[myService，myServiceImpl]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T17:11:05.043

您的 bean在**这里**定义了两次（`@Service`注释，导致注册`myServiceImpl`bean）：

```
@Service
public class MyServiceImpl implements MyService { 
```

在这里（在，带有id的`Context.xml`bean ）：`myService`

```
<beans:bean id="myService" class="com.mycompany.serviceimpl.MyServiceImpl" /> 
```

从 XML 中删除定义或删除注释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T17:10:30.740

你*要么*穿上`@Service`，*要么*`MyServiceImpl`在.中声明 bean 。不要两者都做，否则你会得到两个豆子。 *`Context.xml`*

 *从 XML 文件中删除`myService`bean 定义，您应该一切顺利。

此外，您不需要声明`DefaultAnnotationHandlerMapping`或`AnnotationMethodHandlerAdapter`bean - 默认情况下这些是可用的。*

# php - 如何将 php 数组从 mysql 返回到谷歌地理位置

> ID：10667262
> 
> 赞同：2
> 
> 时间：2012-05-19T17:09:18.663
> 
> 标签：php, javascript, html, google-maps, geolocation

我在 mysql 数据库中有数据，我希望能够在 php 数组中读取该数据并将其用于谷歌地理定位。

所以对于这个例子，我只想使用`SELECT *`语句，因为我不会用一些参数来打扰你......

我想要实现的是从 A 点到 B 点的标记线（取决于保存 GPS 位置的位置）

这是我想要在我的地图上拥有的链接：在这个例子中， [POLYLINE](https://google-developers.appspot.com/maps/documentation/javascript/examples/polyline-simple)数组中只有 4 个数据我想要更多。

所以现在我们可以回到代码。这是我连接到 mysql 的 PHP 脚本。我一直在使用 mysqli，因为稍后我将在数据库中存储过程，所以不要混淆。

```
class dbMySql 
{
static function Exec($query) {
// open database
$conn = mysqli_connect(
$GLOBALS['cfg_db_Server'],
$GLOBALS['cfg_db_User'],
$GLOBALS['cfg_db_Pass']
);
if($conn === false) 
{
    throw new Exception(mysqli_connect_error());
}
mysqli_select_db($conn,$GLOBALS['cfg_db_Name']);
$result = mysqli_query($conn,$query);
if(is_bool($result) && !$result) 
{
    $error = mysqli_error($conn);
    mysqli_close($conn);
    throw new Exception($error);
}
mysqli_close($conn);
return $result;
}
} 
```

如何将此 php 脚本连接到 google API 页面上的示例代码，并在单击按钮而不是固定值时插入我的数组值：

```
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <script type="text/javascript"
      src="http://maps.googleapis.com/maps/api/js?key=KEY&sensor=true">
    </script>
    <script type="text/javascript">
  function initialize() {
  var myLatLng = new google.maps.LatLng(0, -180);
  var myOptions = {
    zoom: 3,
    center: myLatLng,
    mapTypeId: google.maps.MapTypeId.TERRAIN
  };

  var map = new google.maps.Map(document.getElementById("map_canvas"),
      myOptions);
  var flightPlanCoordinates = [
    new google.maps.LatLng(37.772323, -122.214897),
    new google.maps.LatLng(21.291982, -157.821856),
    new google.maps.LatLng(-18.142599, 178.431),
    new google.maps.LatLng(-27.46758, 153.027892)
  ];
  var flightPath = new google.maps.Polyline({
    path: flightPlanCoordinates,
    strokeColor: "#FF0000",
    strokeOpacity: 1.0,
    strokeWeight: 2
  });

  flightPath.setMap(map);
}
    </script>
  </head>
  <body onload="initialize()">
    <div id="map_canvas" style="width:100%; height:80%"></div>
    <div><button type="button">Click Me!</button></div>
  </body>
</html> 
```

编辑：

这是我做你的代码时得到的： ![错误](../Images/4bc015f1b1b095fe99eb9d30ae3a58ce.png)

编辑2：

```
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100% }
    </style>
    <script type="text/javascript"
      src="http://maps.googleapis.com/maps/api/js?key=key&sensor=true">
    </script>
    <script type="text/javascript">
  function initialize() {
  var myLatLng = new google.maps.LatLng(0, 180);
  var myOptions = {
    zoom: 3,
    center: myLatLng,
    mapTypeId: google.maps.MapTypeId.TERRAIN
  };

  var map = new google.maps.Map(document.getElementById("map_canvas"),
      myOptions);
  var flightPlanCoordinates = [ <?php echo implode(',', $coordinates) ?> ];
  ];
  var flightPath = new google.maps.Polyline({
    path: flightPlanCoordinates,
    strokeColor: "#FF0000",
    strokeOpacity: 1.0,
    strokeWeight: 2
  });

  flightPath.setMap(map);
}
</script>
</script>
    <?PHP
class dbMySql {

    static function Exec($query) {
        // open database
        $conn = mysqli_connect('localhost','root','*****');
        if($conn === false) {
            throw new Exception(mysqli_connect_error());
    }
        mysqli_select_db($conn,'data_gps');

    $result = mysqli_query($conn,$query);

        if(is_bool($result) && !$result) {
            $error = mysqli_error($conn);
            mysqli_close($conn);
            throw new Exception($error);
        }

        mysqli_close($conn);

    return $result;
    }
}
$coordinates  = array();
$result = dbMySql::Exec('SELECT lat,lng FROM data');
while ($row = mysqli_fetch_assoc($result))
   $coordinates[] = 'new google.maps.LatLng(' . $row['lat'] . ', ' . $row['lng'] . ')' ;
 ?>
    </script>
  </head>
  <body onload="initialize()">
    <div id="map_canvas" style="width:100%; height:80%"></div>
    <div><button type="button">Click Me!</button></div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T18:50:45.793

我猜您需要在结果之间进行迭代，然后将它们回显到 javascript 中。

我假设您的数据库中存储了 lat 和 lng。

```
$coordinates  = array();
$result = dbMySql::Exec('SELECT lat, lng FROM table WHERE id = 1');
while ($row = mysqli_fetch_assoc($result))
    $coordinates[] = 'new google.maps.LatLng(' . $row['lat'] . ', ' . $row['lng'] . ')'; 
```

然后在你的 javascript 部分

```
var flightPlanCoordinates = [ <?php echo implode(',', $coordinates) ?> ]; 
```

编辑：

```
<!DOCTYPE html>
<?PHP
class dbMySql {

    static function Exec($query) {
        // open database
        $conn = mysqli_connect('localhost','root','*****');
        if($conn === false) {
            throw new Exception(mysqli_connect_error());
    }
        mysqli_select_db($conn,'data_gps');

    $result = mysqli_query($conn,$query);

        if(is_bool($result) && !$result) {
            $error = mysqli_error($conn);
            mysqli_close($conn);
            throw new Exception($error);
        }

        //mysqli_close($conn);

    return $result;
    }
}
$coordinates  = array();
$result = dbMySql::Exec('SELECT lat,lng FROM data');
while ($row = mysqli_fetch_assoc($result))
   $coordinates[] = 'new google.maps.LatLng(' . $row['lat'] . ', ' . $row['lng'] . ')';
 ?>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100% }
    </style>
    <script type="text/javascript"
      src="http://maps.googleapis.com/maps/api/js?key=key&sensor=true">
    </script>
    <script type="text/javascript">
  function initialize() {
  var myLatLng = new google.maps.LatLng(0, 180);
  var myOptions = {
    zoom: 3,
    center: myLatLng,
    mapTypeId: google.maps.MapTypeId.TERRAIN
  };

  var map = new google.maps.Map(document.getElementById("map_canvas"),
      myOptions);
  var flightPlanCoordinates = [<?php echo implode(',', $coordinates) ?>];
  var flightPath = new google.maps.Polyline({
    path: flightPlanCoordinates,
    strokeColor: "#FF0000",
    strokeOpacity: 1.0,
    strokeWeight: 2
  });

  flightPath.setMap(map);
}
</script>
  </head>
  <body onload="initialize()">
    <div id="map_canvas" style="width:100%; height:80%"></div>
    <div><button type="button">Click Me!</button></div>
  </body>
</html> 
```

# iphone - 将 CATransition 动画添加到 UIViewControllers

> ID：10667270
> 
> 赞同：0
> 
> 时间：2012-05-19T17:09:57.097
> 
> 标签：iphone, core-animation, transition

我想添加`CATransition`我`UIViewControllers`正在使用的内容`NSTimer`

```
-(void)playAction:(id)sender
{
[audioPlayer play];
[self performSelector:@selector(displayviewsAction:) withObject:nil afterDelay:11.0];
}

- (void)displayviewsAction:(id)sender
{  
 First *firstController = [[First alloc] init];
 firstController.view.frame = CGRectMake(0, 0, 320, 480);
 [self.view addSubview:firstController.view];
 [self.view addSubview:toolbar];
 [firstController release];   
 self.timer = [NSTimer scheduledTimerWithTimeInterval:23 target:self selector:@selector(Second) userInfo:nil repeats:NO];     
 }

-(void)Second 
{
Second *secondController = [[Second alloc] init];
secondController.view.frame = CGRectMake(0, 0, 320, 480);
[self.view addSubview:secondController.view]; 
[self.view addSubview:toolbar];
[secondController release];
self.timer = [NSTimer scheduledTimerWithTimeInterval:27 target:self selector:@selector(Third) userInfo:nil repeats:NO];
} 
```

当它们从第一个变为第二个时，我如何添加`CATransition`到这些`UIViewControllers`等等。

在此先感谢您的所有想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T17:29:49.233

用这个 -

```
-(void)Second {
    Second *secondController = [[Second alloc] init];
    secondController.view.frame = CGRectMake(0, 0, 320, 480);

    CATransition *transitionAnimation = [CATransition animation];
    [transitionAnimation setDuration:1];
    [transitionAnimation setType:kCATransitionReveal];
    [transitionAnimation setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseIn]];

    [self.view.layer addAnimation:transitionAnimation forKey:kCATransitionReveal];

    [self.view addSubview:secondController.view];
    [self.view addSubview:toolbar];
    [secondController release];
    self.timer = [NSTimer scheduledTimerWithTimeInterval:27 target:self selector:@selector(Third) userInfo:nil repeats:NO];
} 
```

// 你可以在这里定义你自己的`CATransition`动画类型。

# c - 原始套接字 - Internet 协议层

> ID：10667273
> 
> 赞同：2
> 
> 时间：2012-05-19T17:10:12.667
> 
> 标签：c, raw-sockets

我一直在使用 C 语言中的 Raw Berkeley Sockets，它允许程序员访问 Internet 协议套件的第 2 层（IP 标头）。我想知道原始套接字如何处理第 1 层（链路层）上的传输，特别是关于无线局域网。

例如，套接字如何知道将数据包发送到哪个网络接口（eth0 或 wlan0）？

如果我在无线路由器后面，是否仍应使用我的 LAN 地址 (192.168.1.1) 或路由器的 Internet 地址 (74.125.226.68) 填写我的 IP 标头的 IP 源地址？

如果我确实用我的 LAN 地址 (192.168.1.1) 填充 IP 源地址，IP 标头在通过路由器时是否会更改，还是保持不变，以便数据包的接收端尝试发送响应其网络上的本地主机？

我将不胜感激这方面的任何见解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T17:43:32.150

> 例如，套接字如何知道将数据包发送到哪个网络接口（eth0 或 wlan0）？

您可以使用 socket 选项`SO_BINDTODEVICE`将您的套接字绑定到特定接口。否则，操作系统选择一个。

> 如果我在无线路由器后面，是否仍应使用我的 LAN 地址 (192.168.1.1) 或路由器的 Internet 地址 (74.125.226.68) 填写我的 IP 标头的 IP 源地址？

您应该使用您的 LAN 地址。如有必要，路由器负责处理 NAT（网络地址转换）。

> 如果我确实用我的 LAN 地址 (192.168.1.1) 填充 IP 源地址，IP 标头在通过路由器时是否会更改，还是保持不变，以便数据包的接收端尝试发送响应其网络上的本地主机？

如果在路由器上启用了 NAT，源地址将更改以反映路由器的外部地址。否则，您的包可能会被路由器或防火墙丢弃，因为您的源地址在它们的上下文中是无效的。

# java - 一个弹簧集成管道中有多个数据源？

> ID：10667274
> 
> 赞同：2
> 
> 时间：2012-05-19T17:10:12.917
> 
> 标签：java, spring, spring-integration

我有一个配置的 spring 集成管道，其中 xml 文件被解析为各种对象。这些对象正在通过几个通道端点，它们在这些端点上略有修改——没什么特别的，只是添加了一些属性。

管道的最后一个端点是持久化器，对象在数据库中持久化。可能存在重复，因此在此端点中还会检查对象是已持久化还是新对象。我使用消息驱动的架构，带有简单的直接渠道。

```
<int:channel id="parsedObjects1" />
<int:channel id="parsedObjects2" />
<int:channel id="processedObjects" />
<int:service-activator input-channel="parsedObjects1" ref="processor1" method="process" />
<int:service-activator input-channel="parsedObjects2" ref="processor2" method="process" />
<int:service-activator input-channel="processedObjects" ref="persister" method="persist" /> 
```

目前只有一个数据源，我从中获取 xml 文件，一切顺利。当我需要附加第二个数据源时，问题就开始了。这些文件同时出现，所以我希望它们并行处理。所以，我放置了两个解析器实例，每个解析器都通过管道发送消息。我有直接通道的配置会产生并发问题，所以我尝试修改它。我已经尝试了 spring 集成文档中的几种配置，但到目前为止都没有成功。

我已经尝试过将最大池大小配置为 1 的调度程序 - 每个通道端点中的每条消息一个线程。

```
<task:executor id="channelTaskExecutor" pool-size="1-1" keep-alive="10" rejection-policy="CALLER_RUNS" queue-capacity="1" />
<int:channel id="parsedObjects1" >
    <int:dispatcher task-executor="channelTaskExecutor" />
</int:channel>
<int:channel id="parsedObjects2" >
    <int:dispatcher task-executor="channelTaskExecutor" />
</int:channel>
<int:channel id="processedObjects" >
    <int:dispatcher task-executor="channelTaskExecutor" />
</int:channel> 
```

我也尝试了 queue-poller 配置：

```
<task:executor id="channelTaskExecutor" pool-size="1-1" keep-alive="10" rejection-policy="CALLER_RUNS" queue-capacity="1" />
<int:channel id="parsedObjects1" >
    <int:rendezvous-queue/>
</int:channel>
<int:channel id="parsedObjects2" >
    <int:rendezvous-queue/>
</int:channel>
<int:channel id="processedObjects" >
    <int:rendezvous-queue/>
</int:channel>

<int:service-activator input-channel="parsedObjects1" ref="processor1" method="process" >
    <int:poller task-executor="channelTaskExecutor" max-messages-per-poll="1"  fixed-rate="2" />
</int:service-activator>
<int:service-activator input-channel="parsedObjects2" ref="processor2" method="process" >
    <int:poller task-executor="channelTaskExecutor" max-messages-per-poll="1"  fixed-rate="2" />
</int:service-activator>
<int:service-activator input-channel="processedObjects" ref="persister" method="persist" >
    <int:poller task-executor="channelTaskExecutor" max-messages-per-poll="1"  fixed-rate="2" />
</int:service-activator> 
```

基本上，我想摆脱通道端点中的任何竞争条件——在我的情况下是持久化。持久化通道端点应该为每条消息阻塞，因为如果它并行运行，我会在数据库中保留许多重复项。

编辑：

在我完成了一些调试之后，问题似乎出在端点逻辑而不是配置上。通过管道发送到持久化器的一些对象也存储在本地缓存中，直到文件解析完成 - 它们稍后也通过管道发送，以将一些连接表作为其他域的一部分持久化实体。碰巧使用上述配置，一些对象在管道中第二次发送时尚未持久化，所以最后我在数据库中得到了重复项。我在春季集成方面相当新，所以可能在这一点上我会问更一般的问题。在具有多个数据源的设置中 - 意味着解析器的多个实例等：

1.  有没有一种通用的方法（最好的方法）来配置管道以启用并行化？
2.  如果有需要，有没有办法序列化消息处理？

欢迎任何建议。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:09:19.597

首先，您能描述一下“并发问题”是什么吗？理想情况下，您不需要序列化消息处理，因此这是一个很好的起点。

其次，您配置的线程池不会完全序列化。您将*在池中*使用 1 个线程，但您选择的拒绝策略会导致调用者线程在队列满载的情况下运行任务本身（基本上是节流）。这意味着您将同时从池中获得一个调用者运行的线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T10:53:26.533

我设法让管道正常工作。我不确定我是否会保留当前配置，或者进行更多实验，但现在，这是我最终得到的配置：

```
<task:executor id="channelTaskExecutor" pool-size="1-1" keep-alive="10" rejection-policy="CALLER_RUNS" queue-capacity="1" />
<int:channel id="parsedObjects1" >
<int:queue capacity="1000" />
</int:channel>
<int:channel id="parsedObjects2" >
<int:queue capacity="1000" />
</int:channel>
<int:channel id="processedObjects" >
<int:queue capacity="1000" />
</int:channel>

<int:service-activator input-channel="parsedObjects1" ref="processor1" method="process" >
<int:poller task-executor="channelTaskExecutor" max-messages-per-poll="100"  fixed-rate="2" />
</int:service-activator>
<int:service-activator input-channel="parsedObjects2" ref="processor2" method="process" >
<int:poller task-executor="channelTaskExecutor" max-messages-per-poll="100"  fixed-rate="2" />
</int:service-activator>
<int:service-activator input-channel="processedObjects" ref="persister" method="persist" >
<int:poller task-executor="channelTaskExecutor" max-messages-per-poll="1"  fixed-rate="2" />
</int:service-activator> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T08:10:35.290

对于您的方案，我能想到的最佳方法是：

使您的 parsedObject1 和 parsedObject2 成为正常的队列通道，队列的容量可以适当设置（随时说 25）：

```
<int:channel id="parsedObjects1" >
    <int:queue />
</int:channel> 
```

现在，您的 xml 处理器针对 2 个通道 - parsedObjects1 和 parsedObjects2，将处理 xml 并应输出到`processedObjects`通道。您可以使用与您的配置类似的配置，除了我明确指定了处理对象通道 - ：

```
<int:service-activator input-channel="parsedObjects1" ref="processor1" method="process" output-channel="processedObjects">
    <int:poller task-executor="channelTaskExecutor"/>
</int:service-activator> 
```

第三步是我将偏离您的配置的地方，此时您说要序列化持久性，最好的方法是通过池大小为 1 的不同任务执行器来完成，这样只有 1 个实例您的持久化器在任何时间点都在运行：

```
<task:executor id="persisterpool" pool-size="1"/>
<int:service-activator input-channel="processedObjects" ref="persister" method="persist" >
    <int:poller task-executor="persisterpool" fixed-delay="2"/>
</int:service-activator> 
```

# php - 如何正确更新查询

> ID：10667282
> 
> 赞同：0
> 
> 时间：2012-05-19T17:11:40.003
> 
> 标签：php, mysql

我的代码有什么问题？基本上我要做的是添加一个数字并使用连接到变量的内容更新 sql 中的字段。但是既然蒸汽流看起来像这样`STEAM_0:0:123123123`，或者`STEAM_0:1:123123123`我明白了

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 ':0:14166834' 附近使用正确的语法

这只是为了学习，所以我知道我的代码有无用的回声，但这只是为了看到它被添加并确保我无论如何都正确地做

addmoney.php

```
<?php
include("inc/config.php");
$mysteamid=mysql_real_escape_string($_POST['mysteamid']);

$sql = "SELECT * FROM $tbl_name WHERE steamid='$mysteamid'";
$result=mysql_query($sql);
$cash=mysql_result($result, 0, 'cash'); // outputs 7th
echo $cash;
$newcash= $cash + "10000";
echo "\n";
echo $newcash;
mysql_query("UPDATE $tbl_name SET `cash` = $newcash WHERE `steamid` = $mysteamid") or        die(mysql_error()); 
?> 
```

index.php 包含一个工作表单数据，但我的代码中的错误并不真正需要它。我的主要问题是 addmoney.php 中的这一行

```
$mysql_query("UPDATE $tbl_name SET `cash` = $newcash WHERE `steamid` = $mysteamid") or die(mysql_error()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T17:15:13.767

由于您`steamid`在数据库中的字段是一个字符串*（它似乎是，可能的值是`STEAM_0:0:123123123`and `STEAM_0:1:123123123`）*，您必须在值周围使用引号：

```
mysql_query("UPDATE $tbl_name SET `cash` = $newcash WHERE `steamid` = '$mysteamid'"); 
```

使用`mysql_real_escape_string()`是必要的，因为它会在您将其作为参数传递的变量中转义引号 - 但您仍然必须在 SQL 查询中将引号括**在**字符串**周围。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T17:19:25.293

在第一个查询中，您将 $mysteamid 值用简单的引号括起来，而在第二个查询中您没有。如果 steamid 是字符串类型，则需要用引号将值括起来，例如

```
"UPDATE $tbl_name SET `cash` = $newcash WHERE `steamid` =' $mysteamid'" 
```

# javascript - 两个提交按钮，仅在一个提交按钮上弹出确认

> ID：10667284
> 
> 赞同：0
> 
> 时间：2012-05-19T17:11:50.663
> 
> 标签：javascript, html, forms, confirm

我在允许用户更新/删除内容的表单中有两个提交按钮。仅当用户单击删除按钮时，我才想要确认弹出窗口。

```
<html>
<head>
<script type="text/javascript">

function confirmation() {
        // I need to know which submit button was pressed.
       if (value==Delete){
        var answer = confirm("Cancel?")
            if (answer){
                    return true;
            //Continue as intended
            }
            else{
             return false
            }
      }
}

</script>
</head>
<body>
<form id="Edit_Data">
//form input fields go here
<input name="action"  type="submit" onclick="confirmation()" value="Update">
<input name="action"  type="submit" onclick="confirmation()" value="Delete">
</form>
</body>
</html> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T17:16:43.483

对于html标签中的onclick事件定义，为什么不调用单独的函数呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T17:20:35.627

最简单的方法是不调用更新按钮上的 javascript。

如果您的表单是静态的，那么您可以在 IDE 中执行此操作。如果它是动态的，那么动态代码可以相应地创建表单元素。

如果表单元素是自动生成的，那么您应该在 JavaScript 中动态设置事件处理程序。使用类型属性按钮或提交查找类型输入的所有元素，并分配

```
elems[i].onclick = confirmation; 
```

然后，您将获取事件对象作为方法参数，并且可以查询该按钮的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T17:24:28.223

首先，您的代码有几个问题。if 语句中的值是一个未定义的变量，其次您需要在 delete 周围加上引号。这是工作小提琴[http://jsfiddle.net/SMBWd/](http://jsfiddle.net/SMBWd/)和相关的代码更改。另外，我鼓励您查看如何在 HTML 中不使用 javascript 的情况下执行此操作。

```
function confirmation(e) {
        // I need to know which submit button was pressed.
       if (e.value=='Delete'){ 
```

并在 HTML

```
<input name="action"  type="button" onclick="confirmation(this)" value="Update">
<input name="action"  type="button" onclick="confirmation(this)" value="Delete"> 
```

# ruby-on-rails - ruby on rails 忽略了我的 form_tag

> ID：10667285
> 
> 赞同：2
> 
> 时间：2012-05-19T17:11:51.313
> 
> 标签：ruby-on-rails

我在 index.html.erb 中写了以下几行

```
<% form_tag illnesses_path, :method =>'get' do %>
  <p>
     <%=  text_field_tag :search, params[:search] %>
     <%=  submit_tag "Search", :name => nil %>
  </p>
<% end %> 
```

期望它会编写一个表单元素，但rails完全忽略了这些行。
当我写

```
 <p>
     <%=  text_field_tag :search, params[:search] %>
     <%=  submit_tag "Search", :name => nil %>
  </p> 
```

出现的项目（但没有表单元素）。为什么表单元素被忽略了

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-19T17:13:18.460

改变 `<% form_tag illnesses_path, :method =>'get' do %>`

到

`<%= form_tag illnesses_path, :method =>'get' do %>`.

# android - 扫描图像并从中获取文本android

> ID：10667286
> 
> 赞同：7
> 
> 时间：2012-05-19T17:11:52.230
> 
> 标签：android, ocr

我见过一些扫描图像并返回文本的应用程序。有没有为此的图书馆？我的意思是扫描文本或拍照并识别字符？

我已经搜索过 OCR，但我没有找到可以阅读的材料。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T17:16:11.597

看看一个名为[Tesseract](http://code.google.com/p/tesseract-ocr/)的库。这是[一个教程](http://gaut.am/making-an-ocr-android-app-using-tesseract/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-05T12:29:22.920

是的，您可以使用谷歌视觉库将图像转换为文本，它将提供更好的图像输出。在构建 gradle 中添加以下库：

```
 compile 'com.google.android.gms:play-services-vision:10.0.0+'

     TextRecognizer textRecognizer = new TextRecognizer.Builder(getApplicationContext()).build();

    Frame imageFrame = new Frame.Builder()

            .setBitmap(bitmap)                 // your image bitmap
            .build();

    String imageText = "";

    SparseArray<TextBlock> textBlocks = textRecognizer.detect(imageFrame);

    for (int i = 0; i < textBlocks.size(); i++) {
        TextBlock textBlock = textBlocks.get(textBlocks.keyAt(i));
        imageText = textBlock.getValue();                   // return string
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-19T10:06:47.677

还有这个库： sourceforge 上的[Java OCR](http://sourceforge.net/projects/javaocr/)。

# c++ - const_cast(iterator->second) 安全吗？

> ID：10667287
> 
> 赞同：0
> 
> 时间：2012-05-19T17:11:56.483
> 
> 标签：c++

我想知道这段代码是否安全并且没有任何未定义的行为。

```
 QueueMap::const_iterator it = m_3playersQueue.find(s->m_GameCode);
 if(it == m_3playersQueue.end())
 {
     std::deque<Session*> stack;
     stack.push_back(s);

     m_3playersQueue[s->m_GameCode] = stack;
     return;
 }

 const_cast<std::deque<Session*>&>(it->second).push_back(s);

 QueueMap is of type std::tr1::unordered_map< uint32, std::deque<Session*> > 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T17:13:55.810

您的代码自相矛盾。只需使用`QueueMap::iterator`而不是`QueueMap::const_iterator`.

您正在做的是明确地将其设置为 const，然后`const_cast`消除`const`ness。何苦？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T18:26:17.130

以下形式的代码可能更易于理解：始终插入和更新：

```
std::pair<QueueMap::iterator, bool> p =
  m_3playersQueue.insert(std::make_pair(s->m_GameCode, std::deque<Session*>()));

p.first->second.push_back(s); 
```

唯一的低效率是当元素已经存在时，在这种情况下你必须扔掉一个 empty `deque`。但是小的、短暂的堆分配通常并不昂贵，因此您应该仔细分析以证明更复杂的代码是合理的。想想你的继任者需要多长时间来完成和调试你的代码！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T13:47:02.190

是的，它是安全的。即使 a与 a`const_iterator`不同`iterator`，映射中的对象也是相同的。只要将所有地图内容创建为可变`std::deque<Session*>`对象，就可以将 constness 丢弃。

当然，您可能违反了 constness 旨在传达的一些不变量，但如果`const_cast`孤立地考虑，这是可能的。

# java - Jdbc 检查功能 - 保存点发布

> ID：10667292
> 
> 赞同：6
> 
> 时间：2012-05-19T17:12:25.317
> 
> 标签：java, database, oracle, jdbc, savepoints

我有适用于各种数据库的通用 jdbc 代码。我有一些适用于事务和保存点的 api。

问题是某些数据库要求您手动释放保存点

```
 conn.releaseSavepoint(savepoint1) 
```

有些只是在您进行手动发布时抛出异常（最值得注意的是 Oracle）。

我如何在运行时检查数据库是否具有自动保存点释放或者我是否需要手动进行。并且请，我有一些不错的 api。我不想捕获异常，在这种情况下它很丑陋且容易出错。抛出的异常是**java.sql.SqlException**，而不是“FeatureUnsupportedException”之类的。因此，如果有一个真正的错误并且我愚蠢地抓住了它，那么我可能会在整个交易过程中完全失败。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-08-12T09:43:57.553

[在 Oracle 的 10g 文档](http://docs.oracle.com/cd/B19306_01/java.102/b14355/jdbcvers.htm#i1006293)中，我可以发现不支持这种特定的 JDBC / ojdbc 方法的事实：

> 注意：从 Oracle 数据库 10g 开始，不支持 releaseSavepoint 和 oracleReleaseSavepoint。如果您调用其中任何一种方法，则会引发 SQLException 并显示消息“不支持的功能”。

在 11g 中，[文档似乎](http://docs.oracle.com/cd/E11882_01/java.112/e16548/jdbcvers.htm#JJDBC28094)另有声明：

> 您可以使用 Connection.releaseSavepoint(Savepoint svpt) 方法删除保存点。

但我也可以在 11g 中轻松重现您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-28T09:59:29.677

如果您可以将数据库供应商参数传递到您的类中，那么您可以简单地为每个供应商映射此行为。

# java - 从 gae java 中的文件读取设置

> ID：10667293
> 
> 赞同：0
> 
> 时间：2012-05-19T17:12:25.987
> 
> 标签：java, google-app-engine

我在我的 gae java 代码中使用了一些字符串，用户必须对其进行配置。我知道有办法从用户可以编辑的配置文件中读取设置。请告诉如何执行此操作或提供相同的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T00:35:32.133

GAE 中没有文件系统访问权限。将每个用户的配置设置存储在数据存储中可能是最好的（也更容易）。

# scala - Scala RemoteActor 多个网络接口

> ID：10667294
> 
> 赞同：0
> 
> 时间：2012-05-19T17:12:26.663
> 
> 标签：scala, actor, remote-actors

方法`alive(port)`in`RemoteActor`不以 IP 地址为参数。

它在内部构造一个`TcpService`对象，该对象通过调用`InetAddress.getLocalHost().getHostAddress()`返回第一个可用接口的 IP 的 Java 来分配 IP 地址。

这会导致具有多个网络接口的机器出现问题，因为它可能会返回错误的 IP 地址。

有没有办法克服这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T15:27:22.343

好问题。这取决于您想在解决方案上投资多少。我可以想象两种方式：

1）更改默认实现的第一种方法是自己编写更好的东西。不过这并不难，因为远程演员库的所有代码都可以在[GitHub](https://github.com/scala/scala/tree/v2.9.2/src/actors/scala/actors/remote)上找到。

我的建议是重新实现[TcpSerice](https://github.com/scala/scala/blob/v2.9.2/src/actors/scala/actors/remote/TcpService.scala)类的部分内容，尤其是第 73 行，如下所示：

```
private val internalNode = {
    val interfaces = NetworkInterface.getNetworkInterfaces()
    val interface  = ... // find the right interface here
    val addresses  = interface.getInetAddresses()
    val address    = ... // find the right address here
    new Node(address, port)
} 
```

如果您想添加或更改其他内容，此方法还允许您自定义其他内容。

2）另一种（可能更简单）的方法是避免一起使用默认实现，而是使用非常流行的actor-framework [akka](http://akka.io/)。Akka 提供了大量的附加功能，但也提供了效率和健壮性。如果您查看他们的[GitHub](https://github.com/akka/akka)和[Server](https://github.com/akka/akka/blob/master/akka-remote/src/main/scala/akka/remote/netty/Server.scala)类，您会发现主机实际上是从全局配置条目“主机名”中读取的。[此处](http://doc.akka.io/docs/akka/2.0/general/configuration.html)提供了有关如何操作配置的详细指南。您应该能够使用与上述类似的代码来找到正确的接口和地址。

希望有帮助！

# machine-learning - 作为游戏中的对手，学习型 AI 是否有意义？

> ID：10667297
> 
> 赞同：1
> 
> 时间：2012-05-19T17:12:35.917
> 
> 标签：machine-learning, artificial-intelligence, neural-network

我想为一个简单的连续四场比赛建立一个 AI 对手。但是，我不只是想创造一个完美的球员，这对人类来说是相当无聊的。相反，我希望拥有一个几乎从零开始并随着时间的推移学习游戏的 AI。

我知道的唯一方法是人工神经网络。然而，似乎这些通常需要监督学习。此外，例如，[该文件](http://users.auth.gr/kehagiat/GameTheory/12CombBiblio/TicTacToe.pdf)指出，人工智能只有在大约 20k 场比赛后才接近成为完美玩家——对于人类来说，这有点太多了。

因此我想知道：是否有可能在一个简单的游戏中合理地使用学习型 AI？是否有任何合适的替代方案或扩展神经元网络来完成这项工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T18:40:33.780

我不知道有什么算法或技术可以让计算机在与人类相同的时间尺度上学习游戏。但是当我们谈论时间尺度时，我们必须小心。

例如，Fogel 和 Chellapilla 开发了一种技术，它使一堆随机生成的神经网络相互对抗，然后使用遗传算法根据结果创建新的更好的神经网络。这最初是用跳棋完成的，但适用于许多游戏。该技术至少消除了人类训练的负担——网络正在与自己对抗。

但它的学习速度有多快？Fogel 和 Chellapilla 在大约 250 代的跳棋上取得了良好的成绩（A 级表现，略低于专家级）......但每一代的比赛都包括大约 150 场不同的比赛，总共约 37,000 场比赛。如果你每天玩一个游戏，你需要 100 年才能玩这么多。也许达到那个水平的人十年来每天都打十场比赛，但这似乎……不太可能。所以从这个意义上说，比人类慢。另一方面，一台好的笔记本电脑可能在一周内可以玩那么多游戏，这是人类无法做到的。

因此，如果您正在寻找一种训练程序，人类将能够在合理的范围内进行训练并感知性能提升......我不知道今天可以做到这一点。（这是有道理的——我们最好的超级计算机仍然没有人脑的原始处理能力，而且我们还没有设计用来利用这种能力的算法。）

但是，如果你只是在寻找一个不完美的人工智能，你可以尝试像 Fogel 和 Chellapilla 的技术，而不是获得最终的、近乎专家级的结果，而只是从运行的中途获取一些东西，或者从最后一刻获取一些东西一代但不是最好的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T10:49:30.673

您可能想研究名为“General Game Playing”的领域。那里的重点是学习玩计算机以前从未见过的游戏。该算法以明确定义的格式传递游戏规则，并且必须从头开始学习。

最先进的技术几乎总是包含某种蒙特卡洛模拟，其中系统在模拟中与自己进行数千场比赛，同时与人类或其他正在测量的程序进行“真实”比赛。

# java - 我将如何编码这个 Listview？

> ID：10667298
> 
> 赞同：0
> 
> 时间：2012-05-19T17:12:41.753
> 
> 标签：java, android, listview

我正在尝试对这个 ListView 进行编码，但我不知道该怎么做，我只使用内置于 simple_listview_01 的 Android 完成了简单的 listview。

我该怎么做呢？我已经有一个 Listview xml 布局文件，但是如何将它附加到我的代码中？我知道你必须使用 textview 但是，我不确定过去。

XML:

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="?android:attr/listPreferredItemHeight"

    android:padding="6dip">

    <ImageView
        android:id="@+id/icon"

        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_marginRight="6dip"

        android:src="@drawable/icon" />

    <LinearLayout
        android:orientation="vertical"

        android:layout_width="0dip"
        android:layout_weight="1"
        android:layout_height="fill_parent">

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="0dip"
            android:layout_weight="1"

            android:gravity="center_vertical"
            android:text="My Application" />

        <TextView  
            android:layout_width="fill_parent"
            android:layout_height="0dip"
            android:layout_weight="1" 

            android:singleLine="true"
            android:ellipsize="marquee"
            android:text="Simple application that shows how to use RelativeLayout" />

    </LinearLayout>

</LinearLayout> 
```

到目前为止的代码：

```
ListView lv = getListView();
                /* Gets a ListView */
                lv.setTextFilterEnabled(true);

                /* sorts the listview */
                ArrayAdapter<String> adapter = new ArrayAdapter<String>(
                        getApplicationContext(),
                        android.R.layout.simple_list_item_1,
                        result.getheadlines());
                setListAdapter(adapter); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T17:16:38.267

[您应该在此处](http://www.vogella.com/articles/AndroidListView/article.html)阅读更多 ListView 教程。该链接解释了列表视图的综合材料。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T17:28:59.000

请参阅本[教程](http://javasrilankansupport.blogspot.com/)，它在每个项目中都包含列表视图，有一个 imageview 和 3 个 textview 希望对您有所帮助

# c# - 为 C# Winforms 桌面应用程序创建类似 Facebook 的按钮

> ID：10667302
> 
> 赞同：2
> 
> 时间：2012-05-19T17:13:16.023
> 
> 标签：c#, .net, facebook

我想将我的 winforms 应用程序链接到 Facebook fanpage，以便当用户单击表单上的 Like 按钮时添加 +1。如何在 C# winforms 中执行此操作。是否可以通过调用 URL 来实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T17:20:55.593

您可以获得一些 LIKE 按钮代码： http: [//developers.facebook.com/docs/reference/plugins/like/](http://developers.facebook.com/docs/reference/plugins/like/)它会给您一些选项，然后您可以选择交付格式 - 选择`IFRAME`。

你会得到如下所示的东西：

```
<iframe src="//www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.webbod.info&amp;send=false&amp;layout=standard&amp;width=450&amp;show_faces=false&amp;action=like&amp;colorscheme=light&amp;font&amp;height=35" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:450px; height:35px;" allowTransparency="true">
</iframe> 
```

您只对`src`尺寸感兴趣。

在您的 winforms 应用程序中，您可以托管一个 webbrowser 控件，将其调整为尺寸并将其指向 src - 这将为您提供一个嵌入式 facebook 按钮。

**Facebook 允许人们喜欢 URL，因此您需要提供一个**- 在我的示例中是 www.webbod.info，但任何事情都应该做，并且通过改变 url 的`href`部分，`src`您可以让人们喜欢应用程序的任何部分。

# mysql - 购物车：如何将产品数量存储在数据库中

> ID：10667310
> 
> 赞同：0
> 
> 时间：2012-05-19T17:14:11.530
> 
> 标签：mysql, shopping-cart

我正在用 php/mysql 构建一个非常小的购物车系统。目前，实际的购物车（较少的产品、类别等表）由两个表组成。

一个名为 shoppingCarts 的表，其中包括以下列：

*   身份证（PK）
*   用户 ID（FK）
*   创建日期

另一个名为 shoppingCartItems 的表包括：

*   产品 ID (FK)
*   shoppingCartId (FK)
*   创建日期

要添加一种产品的数量，我可以想到两种可能的情况：

1.  为添加到购物车的每个项目添加一个新行。
2.  添加一列“金额”并将金额存储在其中。

我想知道哪个选项最好，有什么起伏？也许有一个我没有想到的更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T17:33:26.837

我认为，正确的解决方案是为金额增加一列，因为每个项目只有一行并没有优势，但更多的冗余数据。想象一下，如果客户想要 50 件商品，您最终会得到 50 行相同的数据。而且您必须使用 GROUP BY 选择或以编程方式计算行数。使用额外的金额列，您可以保存数据并且您的查询不那么复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T17:59:47.287

我的建议是仅使用金额列是没有用的。我相信你有一个项目表，其中有项目 ID、详细信息和价格。所以流程是这样的：如果客户登录时使用他的 userId 在购物车中创建一行，并且每当他将商品添加到购物车中时，都会为购物车商品创建新行。现在可以找到并显示所有项目的累积价格（使用聚合函数sum），这将解决创建新列“金额”的目的。展望未来，假设在您的应用程序中，如果您将折扣券或任何折扣的概念集成到任何忠实客户，我们的设计将很难集成。所以我建议添加两列 1）总价 2）折扣价/支付金额 如有任何疑问，请回复。

# jpa - 在 java EE 6 中：我什么时候可以更改 EntityManager 上的属性？

> ID：10667312
> 
> 赞同：1
> 
> 时间：2012-05-19T17:14:38.303
> 
> 标签：jpa, eclipselink, java-ee-6, proxy-authentication

我想在 Glassfish 上使用 java EE 6 的简单 Web 应用程序中对 Oracle Express 数据库使用*代理身份验证。*Eclipselink 2.3.0 文档[在这里](http://wiki.eclipse.org/EclipseLink/Examples/JPA/Auditing#Use_Oracle_proxy_authentication_to_allow_a_shared_connection_pool_and_a_user_context)说：

> 如果使用 JEE 和 JTA 托管的 EntityManager，则指定代理用户/密码可能会更加困难，因为 EntityManager 和 JDBC 连接不受应用程序控制。仍然可以在 EntityManager 上指定持久性单元属性。*只要这是在 EntityManager 建立数据库连接之前完成的，它仍然可以工作*。

我的代码如下，但我猜在`@Postconstruct init()`调用该方法时已经建立了数据库连接，因为最后一个属性没有从默认的 true 更改为 false。另外，我从 save() 方法得到 ORA-00942: table or view does not exist。glassfish-resources.xml 中定义的 jdbc 连接池中的用户*池*没有访问表的权限，代理用户也是如此`user_a`。

```
@Stateless
public class Boundary {

    @PersistenceContext EntityManager em;

    @PostConstruct
    private void init()  {
        em.setProperty("eclipselink.oracle.proxy-type", OracleConnection.PROXYTYPE_USER_NAME);
        em.setProperty(OracleConnection.PROXY_USER_NAME, "pool[user_a]");
        em.setProperty(OracleConnection.PROXY_USER_PASSWORD, "pool");
        em.setProperty(OracleConnection.PROXY_ROLES, "pool_user");
        em.setProperty("eclipselink.jdbc.exclusive-connection.mode", "Always");
        em.setProperty("eclipselink.jdbc.exclusive-connection.is-lazy", "false");
    }

    public void save() {
        em.merge(new AnEntity());
    }
} 
```

我在这里没有太多经验，但是如果代理身份验证可以变得那么简单，那将非常有用，所以我花了一些时间尝试。在 JavaEE 托管上下文中，是否可以在`EntityManager`连接之前设置属性？

我的persistence.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
  <persistence-unit name="ProxyUserPU" transaction-type="JTA">
    <jta-data-source>SecondTry</jta-data-source>
    <exclude-unlisted-classes>false</exclude-unlisted-classes>
    <shared-cache-mode>ENABLE_SELECTIVE</shared-cache-mode>
    <properties>
      <property name="eclipselink.target-database" value="Oracle"/>
      <property name="eclipselink.jdbc.exclusive-connection.is-lazy" value="true"/>
    </properties>
  </persistence-unit>
</persistence> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:47:09.257

我不认为 PostConstruct 是正确的地方。

一个新的 EntityManager 绑定到每个事务边界上的持久性上下文，因此您需要在每个事务性 SessionBean 方法的开头设置这些属性。您可能还可以使用 EclipseLink 中的 SessionEvents 来配置属性。

如果你的属性是固定的，你也可以把它们放在你的 persistence.xml 中。

见， [http://wiki.eclipse.org/EclipseLink/Examples/JPA/Auditing#Use_Oracle_proxy_authentication_to_allow_a_shared_connection_pool_and_a_user_context](http://wiki.eclipse.org/EclipseLink/Examples/JPA/Auditing#Use_Oracle_proxy_authentication_to_allow_a_shared_connection_pool_and_a_user_context)

# python - 带有命令行 Blender 参数的 Python 脚本

> ID：10667314
> 
> 赞同：11
> 
> 时间：2012-05-19T17:15:10.497
> 
> 标签：python, batch-file, rendering, blender-2.50

我是搅拌机和 python 的新手。我有一个搅拌机模型（.blend），我想将它批量渲染为几个图像，为每个图像提供一些属性。

我用这些参数编写了一个 python 脚本，例如：

```
import bpy

pi = 3.14159265
fov = 50

scene = bpy.data.scenes["Scene"]

# Set render resolution
scene.render.resolution_x = 480
scene.render.resolution_y = 359

# Set camera fov in degrees
scene.camera.data.angle = fov*(pi/180.0)

# Set camera rotation in euler angles
scene.camera.rotation_mode = 'XYZ'
scene.camera.rotation_euler[0] = 0.0*(pi/180.0)
scene.camera.rotation_euler[1] = 0.0*(pi/180.0)
scene.camera.rotation_euler[2] = -30.0*(pi/180.0)

# Set camera translation
scene.camera.location.x = 0.0
scene.camera.location.y = 0.0
scene.camera.location.z = 80.0 
```

所以我运行它就像

```
blender -b marker_a4.blend --python "marker_a4.py" -o //out -F JPEG -x 1 -f 1 
```

然后例如，如果我尝试对 python 脚本使用参数

```
...
import sys
...
fov = float(sys.argv[5])
... 
```

并运行它：

```
blender -b marker_a4.blend --python "marker_a4.py" 80.0 -o //out -F JPEG -x 1 -f 1 
```

渲染完成，但我在开始时收到此消息。

```
read blend: /home/roho/workspace/encuadro/renders/marker/model/marker_a4.blend
read blend: /home/roho/workspace/encuadro/renders/marker/model/80.0
Unable to open "/home/roho/workspace/encuadro/renders/marker/model/80.0": No such file or directory.
... 
```

谁能告诉我这是什么原因造成的？我认为搅拌机也将其解析为模型，但不明白为什么。后来我尝试了一些更复杂的方法来解析 python (argparse) 中的参数，但它根本不起作用。所以我想在这个级别上可能会发生一些奇怪的事情。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-02T16:17:23.837

我找到了我最初寻找的解决方案。

*正如 Junuxx 所说，“在这种情况下*，你不能将命令行参数直接传递给 python ......”但实际上你可以将参数传递给 python，但在另一种情况下。

所以做我想做的事情是直接在python脚本中渲染和保存

```
import sys

fov = float(sys.argv[-1])   
...
# Set Scenes camera and output filename 
bpy.data.scenes["Scene"].render.file_format = 'PNG'
bpy.data.scenes["Scene"].render.filepath = '//out'

# Render Scene and store the scene 
bpy.ops.render.render( write_still=True ) 
```

--python 选项（或 -P）必须位于末尾，您可以使用 -- 指定参数，然后加载模型并运行脚本。

```
> blender -b "demo.blend" -P script.py -- 50 
```

归功于我发现的这个链接：http: [//www.blender.org/forum/viewtopic.php?t=19102 &highlight=batch+render](http://www.blender.org/forum/viewtopic.php?t=19102&highlight=batch+render)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-19T23:35:22.747

在这种情况下，您不能将命令行参数直接传递给 python，因为它们被解释为 blender 的参数。解决这个问题的一种方法是设置环境变量，然后调用 blender/python，就像这样（假设你在 Windows 上 - 在其他操作系统上也可以做到同样的事情，但语法不同）

```
set arg1='foo' & set arg2='bar' & python envvar.py 
```

**注意**：等号旁边没有空格！

在我调用 envvar.py 的 python 脚本中，你可以使用 os.getenv() 来访问这些变量

```
import os
print 'arg1 = ', os.getenv('arg1')
print 'arg2 = ', os.getenv('arg2') 
```

输出：

```
arg1 = 'foo'
arg2 = 'bar' 
```

# sql-server-2008 - SQL Server windows 身份验证连接问题

> ID：10667318
> 
> 赞同：1
> 
> 时间：2012-05-19T17:15:34.310
> 
> 标签：sql-server-2008

在安装 SQL Server 2008 时，我选择了混合身份验证模式。但是在安装之后，当我尝试在 Windows 身份验证中连接数据库时，它会出现以下错误：

```
TITLE: Connect to Server
------------------------------

Cannot connect to DEWASISH-PC\SQLEXPRESS.

------------------------------
ADDITIONAL INFORMATION:

Login failed for user 'dewasish-PC\dewasish'. (Microsoft SQL Server, Error: 18456)

For help, click: http://go.microsoft.com/fwlink?ProdName=Microsoft+SQL+Server&EvtSrc=MSSQLServer&EvtID=18456&LinkId=20476

------------------------------
BUTTONS:

OK
------------------------------ 
```

但是当我尝试使用 SQL Server 身份验证模式时，我能够连接到数据库。谁能告诉我在 Windows 身份验证的帮助下我能够以什么方式连接数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T17:30:06.167

在您的实例安全性中，您需要添加：

1.  您作为 Windows 登录用户的 Windows 登录名，包括域（如果适用），或
2.  如果您是 Windows 域安全组的成员，请将组名添加为 Windows 登录用户。

# android - AdMob 消耗更多内存

> ID：10667319
> 
> 赞同：2
> 
> 时间：2012-05-19T17:15:51.153
> 
> 标签：android, memory-leaks, admob

当我使用 Admob api 时，我发现它几乎将我的应用程序处理内存增加到 10MB。

在不启动 AdMob 的情况下运行在我的应用程序的运行服务下仅显示 4MB 处理内存

启用广告后，我发现我的应用程序处理大小达到了 14MB，并且没有减少。

**下面是我的实现代码：**

```
public void initAd(){
        adView = new AdView(this, AdSize.BANNER, AD_ID);
        adLinearLayout.addView(adView);
        adView.loadAd(new AdRequest());
    }

@Override
    protected void onPause() {
        super.onPause();

        if (adView != null && adView.isReady()) {

            log("destroying ads objects...");
            adView.destroy();
            adView.removeAllViews();

             adView = null;
             adLinearLayout.removeAllViews();
             adLinearLayout = null;              
        }    
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T17:41:15.430

我假设在`onResume`或类似的情况下，您正在创建一个新的 AdView。

我不会`adView.isReady()`在这里使用。我认为 isReady 实际上只用于插页式广告，因此它可能不会设置为 true。我不知道为什么它是广告界面的一部分。

每次调用 onPause 时是否都会收到“正在销毁广告对象...”日志记录语句（尝试在 if 语句上方记录一些内容以确认）？我的猜测是，您实际上并不是每次都在破坏 AdView，而是不断创建新的。

# java - 应用服务器集群与 Terracotta

> ID：10667321
> 
> 赞同：3
> 
> 时间：2012-05-19T17:16:25.590
> 
> 标签：java, glassfish, cluster-computing, terracotta

我听说过用于 GlassFish 等应用程序服务器以及 Terracotta 的术语“集群”；我试图理解*集群*一词在与应用程序服务器一起使用时以及与 Terracotta 一起使用时意味着什么。

我的*理解*是：

如果 GlassFish 服务器是集群的，那么这意味着我们有多个物理/虚拟机，每个都有自己的 JRE/JVM，运行不同的 GlassFish 实例。但是，由于它们是集群的，它们都将通过它们的管理服务器（“DAS”）进行通信，并为所有这些服务器部署相同的应用程序。它们将有效地发挥作用（对最终用户），就好像它们是单个应用程序服务器一样——但现在将负载平衡、故障转移/冗余和可伸缩性添加到组合中。

从本质上讲，Terracotta 是一种产品，它可以让多个 JVM 在不同的物理/虚拟机上运行，​​就好像它们是单个 JVM 一样。

因此，如果我的理解是正确的，则暗示以下内容：

*   当您需要负载平衡和故障转移容错时，您可以集群应用程序服务器
*   当任何特定的 JVM 太小而无法容纳您的应用程序并且您需要更多“马力”时，您可以使用 Terracotta
*   因此，从技术上讲，如果您有一个由 5 个服务器实例组成的 GlassFish 集群；这 5 个实例中的每一个实际上都可以是 Terracotta 实例的数组/集群；这意味着每个 GlassFish 服务器实例实际上是一个 GlassFish 实例，存在于多台机器本身的 JVM 中

如果这些断言/假设中的任何一个不正确，请纠正我！如果我偏离了基础并且显然不了解集群和/或 Terracotta 的目的，请指出我正确的方向！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T22:36:16.033

Terracotta 使您能够在所有节点之间共享状态（它是有状态的）。基本上，它在不同的 JVM 之间创建了一个共享内存空间。当集群中的节点都需要访问相同的对象时，这很有用。

如果您的应用程序是无状态的，并且您只需要负载平衡和故障转移，您可以使用[JGroups 之](http://www.jgroups.org/)类的解决方案。在这种情况下，每个节点只处理请求，而对其他节点知之甚少。内存中的对象不是跨节点共享的，每个 JVM 只是独立运行，不知道其他 JVM。这通常适用于请求/响应类型的应用程序。例如，提供内容（没有会话）的网络服务器会执行此操作。

处理无状态集群通常比处理有状态集群更简单。这是因为在无状态集群中，节点彼此几乎一无所知，这导致出错的事情更少。

GlassFish 位于上述概念的中间位置。GlassFish 内存中的对象对所有节点都是可见的。但是前端（HTTP 连接器）是无状态的。

所以回答你的问题：

1）是的，这是两个最明显的原因。然而，有时人们只想要故障转移或只想要负载平衡或有时两者兼而有之。并非所有集群解决方案都能解决这两个问题。

2) 是的。虽然从技术上讲，Terracotta 只解决了共享内存部分，而不是 CPU 部分。但是，通过解决内存部分，它会自动解决 CPU 部分，因为您现在只需将 JVM 添加到共享内存空间即可。

3）我不知道这是否可行，但作为一个思想实验；是的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T00:25:14.113

聚类可能意味着以下之一：

1.  多个实例可以作为一个进行管理。将应用程序部署到集群，它会部署到集群中的所有实例。进行配置更改，该更改将推送到集群中的所有节点。GlassFish 开箱即用地支持这一点。
2.  服务可用性。如果任何一个实例失败，则该应用程序在另一个实例上可用。如果不启用高可用性，任何实例故障也会导致该实例管理的任何会话的会话丢失。GlassFish 开箱即用地支持这一点。
3.  高可用性。如果任何一个实例发生故障，则该应用程序在另一个实例上可用，*并且*不会丢失会话，因为会话副本也在另一个实例上维护。GlassFish 支持这一点。您必须在任何一个集群中选择 #2 或 #3。

您对恕我直言的问题确实是＃3，因为这是唯一真实的案例，Terracotta - 在高可用性集群的背景下 - 将提供带有 GlassFish 的价值。GlassFish 已经提供了内置的高可用性，因此最好有充分的理由将 Terracotta 添加到解决方案中，因为它会使部署架构复杂化。

我能想到添加 Terracotta 的主要原因是您可能希望将会话管理卸载到数据网格并释放 GlassFish 以运行业务逻辑。这可能是由于更频繁的垃圾收集或希望每个 GlassFish 实例管理更多用户。但是，我不确定 Terracotta 是否可以无缝地做到这一点。使用 GlassFish 内置 HA 集群，复制会话是无缝的（无需修改应用程序逻辑）。您可能需要编写代码来从 Terracotta 缓存中放置/获取数据，我会让您研究 :-) Oracle GlassFish Server 还（无缝）与 Coherence 集成以解决这个问题。您可以将会话管理分离到 Coherence 数据网格中，而无需修改应用程序代码。

除非您事先知道您的应用程序必须扩展到大量并发用户，否则请从内置 HA 集群开始，运行测试，然后从那里开始。

希望这可以帮助。

# c# - 更新实体框架模型

> ID：10667326
> 
> 赞同：24
> 
> 时间：2012-05-19T17:16:50.450
> 
> 标签：c#, visual-studio-2010, sql-server-2008, entity-framework, linq-to-entities

我刚开始使用 EF 发现它很酷，但是我遇到了一个问题，

**问题：**
我更改了用户表中一列的数据库架构，之前是 Varbinary(50)，然后我将其更改为 VarChar(50)，然后在 MyModel.edmx 设计器中，我选择了“从数据库更新模型”，之后单击完成我收到此错误。

**错误：**

```
   错误 2019：指定的成员映射无效。
    成员的类型 'Edm.Binary [Nullable=False,DefaultValue=,MaxLength=100,FixedLength=False]'
   “LearnDBModel.User”类型中的“电子邮件”与 SqlServer.varchar 不兼容
    [Nullable=False,DefaultValue=, MaxLength=50,Unicode=False,FixedLength=False]' 成员 'Email'
    在类型“LearnDBModel.Store.User”中。

```

让我知道如何解决它

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-05-19T18:51:18.717

我之前也遇到过类似的问题，发现解决方法是从模型中删除表。保存并关闭模型。然后重新打开模型并重新添加表。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-12-10T03:27:15.053

Shawn de Wet 的解决方案工作正常，但如果您不想删除表（例如与其他一些表的关系..），您可以使用另一种解决方案：使用 xml 编辑器打开您的 edmx 文件，Ctrl + F 找到类似于

> 属性名称="电子邮件" 类型="二进制" Nullable="false" MaxLength="50" FixedLength="false"

将其更新为：

> 属性名称="Email" Type="String" Nullable="false" MaxLength="50" Unicode="false" FixedLength="false"

保存并重建。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-11-15T09:15:40.603

EF 模型中的很多文件都得到 f*****d。删除和添加实体是不够的。实体被重复，如 table、table1、table_result、table1_result、table_result1 等等......模型更新正在更新重复的引用而不是原始引用。

我必须打开记事本并手动修复这些文件：

```
EFModel.Context.cs
EFModel.edxm 
```

并删除这些文件：

```
obj\Debug\edmxResourcesToEmbed\MYEfModel.csdl
obj\Debug\edmxResourcesToEmbed\MYEfModel.msl
obj\Debug\edmxResourcesToEmbed\MYEfModel.ssdl 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-19T19:20:10.457

无需担心。在模型中选择受影响的表。如果你观察，你会发现一个带有整数的新列名 post fix（这种行为只是因为该列的数据类型发生了变化）。

例如，如果您的列名为“Samplecolumn”，则在从数据库更新模型后，您将获得一个带有 Samplecolumn1 的新列。您现在可以使用常规类别下的属性窗口简单地删除旧列“Samplecolumn”并将新列“Samplecolumn1”重命名为“Samplecolumn”。

只需构建您的应用程序。错误将消失。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-01T16:04:03.700

转到 MyModel.edmx xml 文件，将 Binary 更改为 String 解决了我的问题

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2015-08-10T06:35:25.613

右键单击 Model.edmx[Diagram] 上更改表中的属性和“从数据库更新模型”。保存并运行

# java - Android JavaScript 与 Java 性能

> ID：10667327
> 
> 赞同：1
> 
> 时间：2012-05-19T17:16:53.133
> 
> 标签：java, javascript, android, flot, achartengine

我需要使用图表库，在看到大量图表 API 之后，我必须在 Flot-For-Android 和 achartengine 中做出决定。Flot 使用 javascript，所以我必须使用 WebView，而 achartengine 使用 Java，所以我可以使用简单的 View。哪一个会有更好的表现？Android 中的 JavaScript 或 Java 代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T17:21:43.267

如果没有任何具体的基准来支持我，我会说 Java 会更快，因为 Dalvik 虚拟机针对移动设备进行了优化。但是，Android 的 WebKit 浏览器的较新版本包括 Google 的 JavaScript V8 引擎，该引擎具有即时编译功能，因此差异可能微不足道。

我建议选择对您的 UI 设计更有意义的解决方案。如果您的应用是基于浏览器的解决方案的封装，请使用基于 JavaScript 的库。如果您想将图表直接集成到您的 Android 活动中，请选择基于 Java 的活动。

# ocaml - 使用 OCaml 电池作为普通 cma 包含在内

> ID：10667329
> 
> 赞同：10
> 
> 时间：2012-05-19T17:17:11.267
> 
> 标签：ocaml

我对 OCaml Batteries Included 概念和我能找到的大多数教程的继续方式感到有点沮丧和困惑。在我开始使用像 GODI 这样的“生产力”工具或用*ocamlfind 电池/ocamlc替换**ocamlc*的调用之前（在这一点上，这对我来说太神奇了）我希望能够简单地使用 OCaml Batteries Included core set of libraries像任何其他图书馆一样。为此，我从[git](https://github.com/ocaml-batteries-team/batteries-included.git)下载了最新的源代码（head hash: 9f94ecb）并做了一个*make all*。我注意到我在**./_build/src/获得了三个***.cma*库以及 102 个*.cmi*******同一目录下的文件。因此，我假设使用指向该目录的 -I 开关进行编译并与发现的三个*.cma*库之一链接就足够了，而无需“安装”电池或使用平台工具。为了测试这一点，我开始为我在某处找到的以下简单程序生成一个可执行文件：******

 ****```
(* file euler001.ml *)
open BatEnum      
open BatPervasives
let main () = 
 (1--999)
|> BatEnum.filter (fun i -> i mod 3 = 0 || i mod 5 == 0)
|> BatEnum.reduce (+) 
|> BatInt.print stdout

let _ = main () 
```

我能够编译它：

```
ocamlc -c -I ../batteries-included/_build/src/euler001.ml

```

但是当我尝试链接时：

```
ocamlc -o euler001 unix.cma nums.cma ../batteries-included/_build/src/batteries.cma euler001.cmo

```

我有：

```
文件“_none_”，第 1 行，字符 0-1：
错误：链接 ../batteries-included/_build/src/batteries.cma(BatBigarray) 时出错：
外部函数“caml_ba_reshape”不可用

```

我在命令行中添加的**nums.cma**和**unix.cma**是因为链接器抱怨缺少对 undefined global **Big_int**和（添加时）对**Unix**的引用。但是在链接器调用中添加了这两个模块之后，我收到了最后一条消息（在缺少的外部函数'caml_ba_reshape'上），这证明对我来说是阻塞的。所以我想问：

1.  在这种特殊情况下如何进行？
2.  在一般情况下如何进行（即当链接器抱怨缺少外部函数时）
3.  以这种方式使用包含的电池是否可行？在我依赖平台工具之前，我想确保如果遇到问题，我可以将底层工件（cma 和 cmi/mli 文件）与标准 OCaml 编译器和链接器一起使用。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-19T19:37:50.307

`caml_ba_reshape`是，正如您*可以*从名称中猜到的那样，但我同意这并不明显，是`Bigarray`模块的原语。您应该添加`bigarray.cma`编译命令，之前`batteries.cma`取决于它。

建议使用 是有原因的`ocamlfind`，它正是用于抽象这些依赖关系。我认为您不应该使用`ocamlfind batteries/ocamlc`，而是应该使用`ocamlfind ocamlc -package batteries`. 如果你坚持在没有这种支持的情况下使用编译器，那么你确实必须手动编译——我理解你的沮丧，但我希望你也明白它对于任何足够复杂的 OCaml 库都是固有的，并且它只来自你自己- 施加的约束。

> 在一般情况下如何进行（即当链接器抱怨缺少外部函数时

您必须知道或猜测原语的来源。查看库提供的用于通知`ocamlfind`依赖关系的 META 文件可能会对您有所帮助。如果您想检查您的假设，您可以使用该工具`ocamlobjinfo`了解 a 提供的原语。`.cma`（或者更好的是，使用 ocamlfind 吐出正确的编译命令，见下文。）

> 以这种方式使用包含的电池是否可行？

如果您坚持，“手工”编译是合理的。仅在源存储库中工作，而不安装库，不是。安装后很容易继续做你做的事情，只需用`-I ...`选择的安装路径替换你的。

> 在我依赖平台工具之前，我想确保如果遇到问题，我可以将底层工件（cma 和 cmi/mli 文件）与标准 OCaml 编译器和链接器一起使用。

`ocamlfind`不是（仅）一个平台工具。这是使用第三方ocaml库*的方式，时期。*它应该是任何使用 ocaml 的平台上的标准。INRIA 的发行版不附带它是一个历史细节。

您可以要求`ocamlfind`向您展示它对裸编译器的调用：

```
% ocamlfind ocamlc -linkpkg -package batteries t.ml -o test -verbose
Effective set of compiler predicates:
pkg_unix,pkg_num.core,pkg_num,pkg_bigarray,pkg_str,pkg_batteries,autolink,byte
+ ocamlc.opt -o test -verbose -I /usr/local/lib/ocaml/3.12.1/batteries /usr/lib/ocaml/unix.cma /usr/lib/ocaml/nums.cma /usr/lib/ocaml/bigarray.cma /usr/lib/ocaml/str.cma /usr/local/lib/ocaml/3.12.1/batteries/batteries.cma t.ml 
```

我不想向你扔石头。OCaml 工具的格局，除了源代码分发提供的最简单的概括外，非常稀少，缺乏连贯的入口点。随着时间的推移，我已经习惯了这些工具，使用它们很自然，但我知道我们应该尝试降低一些入门成本。

PS：任何关于如何改进电池文档的建议都受到热烈欢迎。将内容添加到文档或修复它的补丁会更好。[battery-devel@lists.forge.ocamlcore.org](https://lists.forge.ocamlcore.org/cgi-bin/listinfo/batteries-devel)是去的地方。****

# linux - 有什么好工具可以解决linux上的整数程序吗？

> ID：10667330
> 
> 赞同：6
> 
> 时间：2012-05-19T17:17:35.137
> 
> 标签：linux, solver, linear-programming

有什么好的工具可以解决 Linux 上的整数程序吗？

我有一个小问题要计算以节省时间：D。这是一种子集和问题。我有一个大约 20 个整数值的列表，我想计算满足某个最小值的最小总和的子集。你可以用一个整数程序来制定这个......就像

```
\sum_{i=1}^{n} w*x -> min 
```

和

```
\sum_{i=1}^{n} w*x >= c with x \in \{0,1\} 
```

还是有其他好方法可以做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-19T18:58:41.613

我会尝试[GLPK](http://www.gnu.org/software/glpk/)或[SCIP](http://scip.zib.de/scip.shtml)。

他们有自己的建模语言，GLPK 有 GNU MathProg，SCIP 有 ZIMPL，所以你可以方便地编写你的 LP 问题。

GNU MathProg 具有与[AMPL](http://www.ampl.com/DOWNLOADS/index.html#Unix)兼容的优势。因此，您可以在 GNU MathProg 模型中尝试使用 CPLEX 或 Gurobi 的学生版 AMPL。请记住，AMPL、CPLEX 和 Gurobi 是商业软件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-28T10:07:15.690

[**您是否尝试过使用LibreOffice Calc** Solver](http://help.libreoffice.org/Calc/Solver)来做到这一点？

**如果您了解 C#，Mono 框架上的**Microsoft Solver Foundation也可以为您完成这项工作。****

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T17:29:44.343

试试[Lindo/Lingo](http://www.lindo.com/index.php?option=com_content&view=article&id=28&Itemid=1)。它们不是免费的，但您可以尝试一下。

它们允许您以非常简洁的数学方式指定您的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T07:59:01.837

I wanted to add one more option to the GLPK suggestions that @Ali has made. I suggest that anyone interested in solving LPs/IPs also look into the optimization packages that the R Language offers.

If you already know and use R, then it is just a matter of downloading the right package. And even if you don't, this is a good way to get introduced to R, which is really taking off in the analytics space.

This [vignette](http://cran.r-project.org/web/views/Optimization.html) is very good way to know which R packages are relevant. For you, [RSymphony](http://cran.r-project.org/web/packages/Rsymphony/index.html) or [Rglpk](http://cran.r-project.org/web/packages/Rglpk/index.html) might be the ones to start with.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-19T17:21:23.420

您可以尝试 gnu octave - 它是 matlab 的一个子集**

# c - 在 C 中使用 execvp 执行单独的命令

> ID：10667332
> 
> 赞同：0
> 
> 时间：2012-05-19T17:17:44.980
> 
> 标签：c, linux, shell, unix, exec

我已将用户的给定命令分成子字符串，这是代码：

```
 int i;

     char *line = malloc(BUFFER);
     char *origLine = line;
     fgets(line, 128, stdin);   // get a line from stdin

     // get complete diagnostics on the given string

     lineData info = runDiagnostics(line);

     char command[20];
     sscanf(line, "%20s ", command);
     line = strchr(line, ' ');

     printf("The Command is: %s\n", command);

     int currentCount = 0;                  // number of elements in the line
     int *argumentsCount = &currentCount;   // pointer to that

     // get the elements separated

     char** arguments = separateLineGetElements(line,argumentsCount);

     // here we call a method that would execute the commands

    if (execvp(*arguments,*argumentsCount)  < 0)       // execute the command
    {
                printf("ERROR: exec failed\n");
                exit(1);
    } 
```

当我执行命令时`execvp(*arguments,*argumentsCount)`，它失败了。

怎么了 ？

谢谢 。

**编辑 ：**

用户的输入是：`ls > a.out` ，因此我有 3 个字符串，它们是：

`ls`, `>`, `a.out` , 失败了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T17:41:27.433

如果您不调用外壳程序，外壳程序重定向将不起作用。 ~~您也不会通过路径搜索来查找 ls 程序。~~ 一些选项

*   使用 system() 代替，并在它返回时退出

*   执行一个 shell 并让它运行你的命令

*   像 shell 一样设置重定向，然后分叉并执行每个所需的子程序。

此外，您的命令没有多大意义，您可能想要 ¦ 而不是 > 并且可能需要指定 a.out 的目录，如果它不在您的路径中。考虑给它一个有意义的名字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T17:34:53.387

当您`ls > a.out`在命令行运行时，`>`并且`a.out`不是传递给应用程序的参数；它们被 shell 解释为重定向标准输出。

所以简而言之，不可能做你想做的事。¹

* * *

[1\. 是的，但不是这样。您的应用程序需要解释参数、创建文件并设置流重定向。]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T17:34:54.417

从 execvp 命令的手册页：

```
 int execvp(const char *file, char *const argv[]); 
```

第二个参数是一个以 null 结尾的 C 字符串列表，作为要由 执行的命令的参数`execvp`。但是在您的代码中，您传递了一个`int`错误的第二个参数。

如果变量中有参数列表，`arguments`则调用 execvp 为：

```
execvp(arguments[0],arguments); 
```

# session - 如何在 JSF 应用程序中创建会话？

> ID：10667337
> 
> 赞同：1
> 
> 时间：2012-05-19T17:18:26.137
> 
> 标签：session, jsf-2, managed-bean

我对 JSF 和/或一般情况下的会话几乎没有疑问。

首先，会话是在加载 AS/servlet 容器中的 Web 应用程序时创建的吗？意思是，在我右键单击 - 运行为 - 在服务器上运行并且应用程序启动并同步之后？

还是在加载 Web 应用程序并显示定义的欢迎页面然后客户端发出请求后创建它？

第二：我正在研究 jsf 中“提交响应后无法创建会话”的问题。

[我试图通过在以下站点http://java.net/jira/browse/JAVASERVERFACES-2215](http://java.net/jira/browse/JAVASERVERFACES-2215)中给出的这样做来重现该问题

但是，如上所述，我没有收到任何错误。我尝试了所有 bean 范围。会话是否已创建？

这是代码。

```
 <h:body>
      <h:form id="test">
      <p:growl id="msg"></p:growl>
        <h:outputText value="#{myTestBean.exceedBuffer}" />

      </h:form>
   </h:body> 
```

豆码是。

```
 public String getExceedBuffer() {    
       int size = FacesContext.getCurrentInstance().getExternalContext().getResponseBufferSize();
      char[] chars = new char[size];
       Arrays.fill(chars, 'x');
       return new String(chars);
    } 
```

我的理解如下，

首先，当加载应用程序时，servlet 容器或 AS 创建一个会话和一个 sessionID(JSESSIONID) 并将其放入服务器内存中。因此，无论如何都会加载初始页面，这意味着即使响应缓冲区是否溢出，但不会创建会话。现在，当客户端在此页面上发出请求时，由于未创建会话，因此发生错误。但是，我什至尝试这样做

```
<p:commandButton actionListener="#{myTestBean.onSelect}" update=":test"></p:commandButton> 
```

并在 onSelect 方法中输入了一个虚拟代码。即使现在页面照常显示。

好吧，那是我完全迷路的时候。有人可以帮我吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T17:24:54.027

> *首先，会话是在加载 AS/servlet 容器中的 Web 应用程序时创建的吗？意思是，在我右键单击 - 运行为 - 在服务器上运行并且应用程序启动并同步之后？*
> 
> *还是在加载 Web 应用程序并显示定义的欢迎页面然后客户端发出请求后创建它？*

它是在 HTTP 会话开始时创建的，而不是在 webapp 的启动时创建的（这是应用程序范围）。基本上，`request.getSession()`第一次调用 when 并且`HttpSession`尚未创建。这一切都由 JSF 在后台使用的 Servlet API 处理。所以下面的答案应该有助于理解它是如何工作的：[servlet 是如何工作的？实例化、会话、共享变量和多线程](https://stackoverflow.com/questions/3106452/how-do-servlets-work-instantiation-session-variables-and-multithreading/3106909#3106909)

* * *

> *第二：我正在研究 jsf 中“提交响应后无法创建会话”的问题。*
> 
> *[我试图通过在以下站点http://java.net/jira/browse/JAVASERVERFACES-2215](http://java.net/jira/browse/JAVASERVERFACES-2215)中给出的这样做来重现该问题*
> 
> *但是，如上所述，我没有收到任何错误。我尝试了所有 bean 范围。会话是否已创建？*

`HttpSession`当响应提交时尚未创建时，您将收到此错误。您没有收到此错误仅表示会话已事先创建。您需要在新启动的 web 应用程序上对其进行测试，并且不应该创建会话。请注意，默认情况下，某些服务器会在关闭/重启时存储会话。在此测试页面上发送第一个请求之前，您需要禁用此功能或删除`JSESSIONID`浏览器中的 cookie。重新启动网络浏览器或使用不同的浏览器也应该强制一个新的会话。

# python - 如何同步对存储数据的访问？

> ID：10667338
> 
> 赞同：1
> 
> 时间：2012-05-19T17:18:26.883
> 
> 标签：python, google-app-engine, thread-safety

我正在使用带有 Python 2.7 运行时的 Google App Engine。我知道它是多线程的，但是 Google App Engine 的多实例特性使得这个问题与任何运行时都相关。

我有一个网络信使应用程序。它基于 Channel API 用于接收各种通知（消息接收、用户连接、用户键入）和 Memcache API 用于维护全局状态（以及 High Replication Datastore 用于实际存储消息历史记录）。最后一条消息的时间戳保存在 Memcache 中（连同其他数据，例如用户是否在线、是否打字等）。每当用户发送消息时，Memcache 都会使用新的时间戳值更新，而旧的时间戳值则使用 Channel API 发送。当同时发送多条消息时，Memcache 有时会被覆盖，我会得到那个时间戳的奇怪值。例如 - 一条消息具有特定时间戳，而***下***一条消息具有***较旧的时间戳***时间戳。

我知道 Memcache Client API，但我不能使用它，因为我必须先读取最新的时间戳，然后再写入新的时间戳。

简而言之，我想以某种方式等待（Memcache？）数据完全未被占用（读取或写入），以某种方式锁定它，继续整个请求，然后为下一个请求释放它。

有什么建议么？

先感谢您。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T23:15:44.450

Memcache API 中没有显式锁定功能，但是可以使用[Compare-and-Set](https://developers.google.com/appengine/docs/python/memcache/clientclass#Client_cas)机制来实现。Guido 在[这里](http://neopythonic.blogspot.com/2011/08/compare-and-set-in-memcache.html)有一个例子。但是，只有 Client 类公开了 CAS，但是从您的描述中不清楚为什么这对您不起作用。

# delphi - KOL - 将 PStream 加载到 TImage

> ID：10667340
> 
> 赞同：2
> 
> 时间：2012-05-19T17:19:06.690
> 
> 标签：delphi, delphi-7, kol

我有一个保存在字符串中的 jpeg 文件。我想将字符串加载/分配给 Delphi7 中的 TImage。我将[KOL](http://kolmck.net/)用于以下代码：

```
var
 ImageStream : PStream;
 ImageString : String;
 MyJpeg      : TJpeg;
begin
 ImageStream:= NewMemoryStream; // Create New Stream.
 ImageStream.Write(ImageString [1], Length(ImageString )); // Fill the stream.
 ImageStream.Position := 0;     // Set Position to 0.
 // ImageStream.SaveToFile('C:\test.jpg', 0, ImageStream.Size); // Debug --> WORKS!
 MyJpeg := TJpegImage.Create; // Create a Jpeg Image. 
 MyJpeg.LoadFromStream(@ImageStream); // ???
 Image1.picture.Assign(MyJpeg);       // No picture is shown
end; 
```

它应该可以工作，因为 PStream 只是指向 TStream 的指针......但是 Timage 中没有显示图片......感谢您的帮助:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-19T18:11:46.520

您将指针传递给指向 TStream 后代的指针。`ImageStream`调用时需要取消对变量的引用`LoadFromStream`。请参阅下面的代码示例：

```
var
 ImageStream : PStream;
 ImageString : String;
 MyJpeg      : TJpeg;
begin
 ImageStream:= NewMemoryStream; // Create New Stream.
 ImageStream.Write(ImageString [1], Length(ImageString )); // Fill the stream.
 ImageStream.Position := 0;     // Set Position to 0.
 // ImageStream.SaveToFile('C:\test.jpg', 0, ImageStream.Size); // Debug --> WORKS!
 MyJpeg := TJpegImage.Create; // Create a Jpeg Image. 
 MyJpeg.LoadFromStream(ImageStream^); // Dereference PStream to TStream
 Image1.picture.Assign(MyJpeg);       // Your picture is now shown
end; 
```

如果您的`NewMemoryStream`方法返回 a `PStream`，您应该真正确定*是否有必要*，并尝试使其返回`TStream`。在您提供的代码的上下文中使用`PStream`over没有任何优势。`TStream`

此外，您没有释放您的`ImageStream`对象！

改用这个：

```
var
  ImageStream: TStream;
  ImageString: String;
begin
  ImageStream := NewMemoryStream;
  try
    ImageStream := NewMemoryStream;
    ImageStream.Write(ImageString[1], Length(ImageString));
    ImageStream.Position := 0;

    Image1.Picture.LoadFromStream(ImageStream);
  finally
    ImageStream.Free;
  end;
end; 
```

我不知道你为什么要创建一个`TJpegImage`实例。您的原始代码每次调用时都会引入两次内存泄漏。我上面的修订版会自行清理干净。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-19T18:12:06.840

你说

> PStream 只是一个指向 TStream 的指针

在这种情况下，此代码

```
MyJpeg.LoadFromStream(@ImageStream); 
```

不能工作。您正在将`TStream`一个指向 TStream 指针的指针传递给 type 的参数。要使您的代码编译，您需要将 a 传递`TStream`给`LoadFromStream`. 像这样：

```
MyJpeg.LoadFromStream(ImageStream^); 
```

* * *

在你的位置，我可能会使用`TStringStream`这样的。

```
var
  Stream: TStringStream;
....
Stream := TStringStream.Create(ImageString);
try
  MyJpeg := TJpegImage.Create;
  try
    MyJpeg.LoadFromStream(Stream);
    Image1.Picture.Assign(MyJpeg);
  finally
    MyJpeg.Free;
  end;
finally
  Stream.Free;
end; 
```

也许有一个KOL的方式可以做到这一点，我根本不知道KOL。

# php - 我可以将这三个 SQL 查询合二为一吗？

> ID：10667343
> 
> 赞同：0
> 
> 时间：2012-05-19T17:19:20.067
> 
> 标签：php, mysql

我想计算正面、中性、负面反馈的数量。

我有这 3 个看起来非常相似的查询。有没有办法可以将所有这些放入一个查询中？或者它是最简洁的方式吗？

预先感谢，问候。

```
$total_positive_seller = mysql_num_rows(mysql_query("SELECT id FROM feedback 
           WHERE seller='$user' AND feedback='positive'"));
$total_neutral_seller = mysql_num_rows(mysql_query("SELECT id FROM feedback 
           WHERE seller='$user' AND feedback='neutral'"));
$total_negative_seller = mysql_num_rows(mysql_query("SELECT id FROM feedback 
           WHERE seller='$user' AND feedback='negative'")); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T17:22:28.020

如果您只想计算外观，那么您的使用`mysql_num_rows`效率相当低。最好`count(*)`在以下查询中使用 MySQL 的功能：

```
SELECT feedback, count(*) AS `count` 
  FROM feedback 
  WHERE seller='$user' 
  GROUP BY feedback 
```

这为您提供了如下所示的内容

```
feedback | count
----------------
positive |   12
neutral  |   8
negative |   3 
```

之后，您可以像任何其他查询结果一样以逐行方式解析它。

**编辑**

如果您想在以下代码中分别处理每个条目，您可以使用类似以下的内容。在此代码之后，您可以引用所有条目，例如 by `$result['positive']`。

```
$qres = mysql_query( 'SELECT ...' );
$result = array();
while( $row = mysql_fetch_array( $qres ) ) {
  $result[ $row['feedback' ] ] = $row['count'];
} 
```

# ipad - 如何在允许内部元素滚动的同时阻止 iPad Web 应用程序移动？

> ID：10667344
> 
> 赞同：0
> 
> 时间：2012-05-19T17:19:24.610
> 
> 标签：ipad, web, scroll

在过去的三天里，我一直在开发一个 iPad 网络应用程序，并且我正在尝试进行内部水平滚动，而不允许页面的其余部分移动/放大等。本质上，我想将它锁定到特定的坐标，同时允许某些元素滚动。如果您使用的是 iPad，您可以在此处查看：[http](http://streamerforipad.webs.com/app.html) ://streamerforipad.webs.com/app.html 。它在桌面上看起来有点奇怪。另外，对不起我糟糕的编码技巧，我计划在某个时候用外部 CSS 清理它。

PS 请记住，这是一个*Web 应用程序*，因此不能使用本机代码。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T11:15:57.390

您可以使用以下方法禁用某些元素区域内的滚动：

```
$("element,element2").bind("touchmove",function(e){
    e.preventDefault();
}); 
```

# mysql - Xcode - 在文本字段中显示数据库表值

> ID：10667347
> 
> 赞同：0
> 
> 时间：2012-05-19T17:19:39.793
> 
> 标签：mysql, objective-c, database, xcode

我正在运行一个 phpmyadmin 数据库，并制作了一个包含 3 列的表。用户名、密码和年龄。在 Xcode 中，我制作了一个使用用户名和密码登录的登录应用程序

```
 NSString *strURL = [NSString stringWithformat:@"http://localhost/database/login.php?username=%@&password=%@", usernamefield.text, passwordtextfield.text];

NSData *dataURL = [NSData dataWithContentsOfURL:[NSURL URLWithString:strURL]];

NSString *strResult = [[NSString alloc] initWithData:dataURL encoding:NSUTF8StringEncoding];

if ([strResult isEqualToString:@"1"]) 
```

此代码工作正常！那么按下登录时是否可以在文本标签中显示数据库中的第三列（AGE）？所以登录用户的年龄将显示在应用程序顶部栏的文本标签中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T22:41:54.257

您可以做很多事情来提高安全性（不将密码作为 GET 请求的参数发送，它可能（将）最终出现在某个未受保护的日志上）、可靠性（您的脚本可能不是唯一需要的东西在本地主机上运行）或该代码的响应能力（不进行同步调用）。

但是，以该代码作为一个简约的起点，您可以配置您的 php 脚本以响应年龄值并将该值发送到文本字段/窗口标题/您想要的任何内容。但是如何检查用户是否正确连接？您在 localhost 上运行的脚本可能会以错误的身份验证响应字符串。

例如：

```
NSString *strURL = [NSString stringWithformat:@"http://localhost/database/login.php?username=%@&password=%@", usernamefield.text, passwordtextfield.text];

NSData *dataURL = [NSData dataWithContentsOfURL:[NSURL URLWithString:strURL]];

NSString *strResult = [[NSString alloc] initWithData:dataURL encoding:NSUTF8StringEncoding];

if ([strResult isEqualToString:@"auth_error"]){
    // do something
} else {
    [window setTitle:strResult]
} 
```

但这真的是一个开始。之后，您可能有兴趣使用[JSON](http://en.wikipedia.org/wiki/JSON)来回答请求，然后使用[NSJSONSerialization](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)读取它，从而使您的脚本更加可靠和 RESTful。

# html - 为什么在 Firebug 网络面板中不显示 favicon 图标

> ID：10667348
> 
> 赞同：8
> 
> 时间：2012-05-19T17:19:44.350
> 
> 标签：html, firebug, favicon

我在很多网站上都看到过这个，例如：即使在这里：

[http://www.w3.org/2005/10/howto-favicon](http://www.w3.org/2005/10/howto-favicon)

当您在 firebug 的 Net Panel 下加载此页面的所有资源并检查图像选项卡时，它会显示页面上的所有图像，但 favicon 不显示。为什么？

我应该在萤火虫的其他地方寻找它吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-19T17:28:30.857

[Jan Odvarko](http://www.softwareishard.com/blog/about/) *（Firebug 的贡献者）*[**对该线程**](http://comments.gmane.org/gmane.comp.mozilla.firefox.firebug/9253)的第一个答案似乎解释了为什么在 Firebug 的网络选项卡*（引用）*中不显示 favicon ：

 **> 问题是对 favicon 的网络请求与显示图标的页面没有关联。
> 所以，Firebug *（即Net面板）*不知道它属于页面并跳过请求**

# c - 父母不创造孩子？

> ID：10667350
> 
> 赞同：1
> 
> 时间：2012-05-19T17:20:11.303
> 
> 标签：c, process, fork, function-pointers

我尝试创建 4 个将同时工作的子进程，但我的程序的输出是相当随机的：有时没有创建其中一个进程（不执行 printf 语句）。我不明白这是为什么，因为当我在父母中使用 wait() 函数时，它应该等待它的孩子完成吗？这是我的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/types.h>

#define NR_OF_PROCESSES 4

void readProcess(void);
void tokenProcess(void);
void calculatorProcess(void);
void errorProcess(void);

void (*functionTable[NR_OF_PROCESSES]) (void) = {readProcess, tokenProcess, calculatorProcess, errorProcess};

int main(void) {

    int i;
    int status;
    for (i = 0; i < NR_OF_PROCESSES; i++) {

        int pid = fork();
        if (pid < 0) {
            perror("could not fork");
            return 0;
        }
        if (pid == 0) {
            functionTable[i]();
            exit(0);
        }
    }

    printf("parent is waiting");
    wait(status);

    return (0);
}

void readProcess(void) {
    printf("readprocess running, PID=%d, PPID=%d\n",getpid(),getppid());
}

void tokenProcess(void) {
    printf("tokenprocess running, PID=%d, PPID=%d\n",getpid(),getppid());
}

void calculatorProcess(void) {
    printf("calculatorprocess running, PID=%d, PPID=%d\n",getpid(),getppid());
}

void errorProcess(void) {
    printf("errorprocess running, PID=%d, PPID=%d\n",getpid(),getppid());
} 
```

另外，我想稍后添加与管道的进程间通信。如果我以这种方式实施流程，这可能吗？有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T17:35:51.290

您只等待一个孩子，您可能想为每个孩子打电话等待。

# javascript - keyup on div for backspace not alerting keycode

> ID：10667352
> 
> 赞同：1
> 
> 时间：2012-05-19T17:20:41.243
> 
> 标签：javascript, jquery, html

My code

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Untitled Document</title>
<script src="js/jquery.js"></script>
<script>
$(function(){
 $("div").live("keyup",function(event){
 var code=(event.keyCode ? event.keyCode : event.which); 
 alert(code);return false;
 });

});</script>
</head>

<body>
<div tabindex="0">We will be performing network maintenance today starting at 18:00 UTC - expect a brief scheduled outage</div>
</body>
</html> 
```

It is alerting keycode for all buttons but on pressing backspace button the back button of browser comes in action.How can i prevent it?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T17:25:59.337

You can use `keydown` event instead:

```
$("div").live("keydown", function(event) {
    var code = (event.keyCode ? event.keyCode : event.which); 
    alert(code);
    return false;
}); 
```

Meanwhile, key code for backspace is `8`.

**Try it:** [http://jsfiddle.net/qfET2/](http://jsfiddle.net/qfET2/)

# c# - 使用 C#/vb.net 从网站获取数据

> ID：10667357
> 
> 赞同：0
> 
> 时间：2012-05-19T17:21:40.313
> 
> 标签：c#, asp.net, xml, vb.net, screen-scraping

我有一个具有以下结构的 XML：

```
<table name="tblsiccodes">
    <row>
        <sSICCode>0888</sSICCode>
    </row>
    <row>
        <sSICCode>0900</sSICCode>
    </row>
    <row>
        <sSICCode>1000</sSICCode>
    </row>
    <row>
        <sSICCode>1040</sSICCode>
    </row>
    <row>
        <sSICCode>1044</sSICCode>
    </row>
    <row>
        <sSICCode>1090</sSICCode>
    </row>
    <row>
        <sSICCode>1220</sSICCode>
    </row>
    <row>
        <sSICCode>1221</sSICCode>
    </row>
</table> 
```

我需要从这个站点选择每个 SIC 代码的描述

[http://www.epa.gov/enviro/html/sic_lkup.html](http://www.epa.gov/enviro/html/sic_lkup.html)

或者这个网站

[http://www.sec.gov/info/edgar/siccodes.htm](http://www.sec.gov/info/edgar/siccodes.htm)

使用 vb.net 从网站获取每个 SIC 的描述的最简单方法是什么？我无法修改此 XML 文件。我是否需要使用手动复制的 SIC 代码和描述创建一个集合，然后通过将 SIC 代码与集合匹配来获取 XMl 中 SIC 代码的描述？最终集合将用于填充具有 SIC 代码和行业名称的每个项目/行的转发器。

我需要做屏幕报废吗？我不认为这些网站有一些 API/服务，我可以使用这些 API/服务来获取行业名称

我不能使用 HTMl 敏捷包或除 Jquery 之外的任何其他第三方库。

请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T19:49:55.800

查看第一页的来源，它包含以下选择：

```
<select>
   <option value=''> NO SIC CODE SELECTED </option>
   <option value='3291'> ABRASIVE PRODUCTS (SIC Code: 3291) </option>
   (...)
</select> 
```

所以它继续。
您可以将select的所有选项保存为另一个xml文件，然后使用XDocument或.net的任何其他Xml加载功能（即c#或vb.net）来遍历您的文档，并通过值找到每个SIC代码包含所有 optoins 的 xml 中的 value 属性。
当然，这可能不是最快的方法，但最容易实现。

# qt - qwt 保存绘图配置？

> ID：10667360
> 
> 赞同：0
> 
> 时间：2012-05-19T17:22:06.303
> 
> 标签：qt, plot, qwt

用户花了很多时间来设置一个漂亮的 qwt 图（从数据库中挑选曲线，配置线条颜色和样式，缩放它们，滚动和平移到有趣的地方，等等）。现在他想保存这个布局，不是图片，而是一个配置，以后可以再次加载，进一步细化。

使 QwtPlot 将自身保存到文件中以便我可以再次加载它的最优雅的方法是什么？我很想简单地写

```
outf << myQwtPlot; 
```

这显然是不可能的。也许有比创建自己的 QwtPlod 派生类更简单的方法，该类实现 operator<< 和 operator>> 来读取和写入所有“重要”属性..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T17:27:34.697

您可以尝试 Qt 的新属性系统，但我认为您最终还是会按照您的想法进行操作。

[http://qt-project.org/doc/qt-4.7/properties.html](http://qt-project.org/doc/qt-4.7/properties.html)

# python - Python 3：标记库更改

> ID：10667368
> 
> 赞同：1
> 
> 时间：2012-05-19T17:24:03.933
> 
> 标签：python, python-3.x, compatibility, tokenize

据此：[http](http://code.activestate.com/lists/python-list/413540/) ://code.activestate.com/lists/python-list/413540/ ，`tokenize.generate_tokens`应该使用而不是`tokenize.tokenize`。

这在`Python 2.6`. 但它不再适用于`Python 3`：

```
>>> a = list(tokenize.generate_tokens(io.BytesIO("1\n".encode()).readline))
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python3.2/tokenize.py", line 439, in _tokenize
    if line[pos] in '#\r\n':           # skip comments or blank lines 
```

但是，在 中`Python 3`，这也有效（并且还返回所需的输出）：

```
a = list(tokenize.tokenize(io.BytesIO("1\n".encode()).readline)) 
```

根据文档，似乎`tokenize.tokenize`是使用此模块的新方法：http: [//docs.python.org/py3k/library/tokenize.html](http://docs.python.org/py3k/library/tokenize.html)。`tokenize.generate_tokens`甚至不再记录。

`generate_tokens`但是，如果没有记录，为什么这个模块中还有一个功能？我还没有找到任何关于此的 PEP。

我正在尝试维护一个代码库，`Python 2.5-3.2`我应该调用和`generate_tokens`for吗？没有更好的方法吗？`Python 2``tokenize``Python 3`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T22:33:47.723

`generate_tokens`似乎真的是一件奇怪的事情`Python 3`。它不像 in 那样工作`Python 2`。但是，`tokenize.tokenize`行为与旧的`Python 2` `tokenize.generate_tokens`. 因此我写了一个小解决方法：

```
import tokenize                             
if sys.hexversion >= 0x03000000d:                               
    tokenize_func = tokenize.tokenize       
else:                                       
    tokenize_func = tokenize.generate_tokens 
```

现在我只使用`tokenize_func`，它没有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T18:11:31.410

`generate_tokens`在 python3 中未记录但未[注释](http://hg.python.org/cpython/file/3.2/Lib/tokenize.py#l531)。它的存在是为了向后兼容，因此您可以使用它，但最好使用更改后的[`tokenize`](http://hg.python.org/cpython/file/3.2/Lib/tokenize.py#l354)...

# ruby-on-rails - RubyGem 环境不正确（gem env）

> ID：10667369
> 
> 赞同：1
> 
> 时间：2012-05-19T17:24:08.847
> 
> 标签：ruby-on-rails, ruby-on-rails-3, configuration, rubygems

所以我在看一本书，安装了 GIT、CURL、rvm、RubyGems 和 ruby​​。

当我运行 gem env 时，变量不正确......我的家是“/home/wegener”而不是“/home/wegejos”......我不知道它在哪里或如何得到不正确的家庭世界......我使用了 rvm安装 RubyGems 和 Ruby。

```
[~]$ gem env
RubyGems Environment:
  - RUBYGEMS VERSION: 1.8.24
  - RUBY VERSION: 1.9.3 (2012-04-20 patchlevel 194) [x86_64-linux]
  - INSTALLATION DIRECTORY: /home/wegejos/ruby/gems
  - RUBY EXECUTABLE: /home/wegener/.rvm/rubies/ruby-1.9.3-p194/bin/ruby
  - EXECUTABLE DIRECTORY: /home/wegejos/ruby/gems/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x86_64-linux
  - GEM PATHS:
     - /home/wegejos/ruby/gems
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :benchmark => false
     - :backtrace => false
     - :bulk_threshold => 1000
     - "gem" => "--remote --gen-rdoc --run-tests"
     - "gemhome" => "/home/wegejos/ruby/gems"
     - "gempath" => []
     - "rdoc" => "--inline-source --line-numbers"
  - REMOTE SOURCES:
     - http://rubygems.org/ 
```

.

```
[~]$ env
reinstall_flag=1
rvm_bin_path=/home/wegener/.rvm/bin
HOSTNAME=ren.renegew.com
GEM_HOME=/home/wegener/.rvm/gems/ruby-1.9.3-p194
TERM=xterm
SHELL=/bin/bash
HISTSIZE=1000
IRBRC=/home/wegener/.rvm/rubies/ruby-1.9.3-p194/.irbrc
SSH_CLIENT=24.8.185.82 51882 22
PERL5LIB=/home/wegener/perl5/lib/perl5/x86_64-linux:/home/wegener/perl5/lib/perl5
MY_RUBY_HOME=/home/wegener/.rvm/rubies/ruby-1.9.3-p194
PERL_MB_OPT=--install_base /home/wegener/perl5
SSH_TTY=/dev/pts/1
USER=wegener
LS_COLORS=no=00:fi=00:di=01;34:ln=01;36:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:su=37;41:sg=30;43:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arj=01;31:*.taz=01;31:*.lzh=01;31:*.zip=01;31:*.z=01;31:*.Z=01;31:*.gz=01;31:*.bz2=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.jpg=01;35:*.jpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.avi=01;35:*.fli=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.flac=01;35:*.mp3=01;35:*.mpc=01;35:*.ogg=01;35:*.wav=01;35:
__array_start=0
rvm_path=/home/wegener/.rvm
escape_flag=1
rvm_prefix=/home/wegener
MAIL=/var/spool/mail/wegener
PATH=/home/wegener/.rvm/gems/ruby-1.9.3-p194/bin:/home/wegener/.rvm/gems/ruby-1.9.3-p194@global/bin:/home/wegener/.rvm/rubies/ruby-1.9.3-p194/bin:/home/wegener/.rvm/bin:/usr/local/jdk/bin:/home/wegener/perl5/bin:/usr/kerberos/bin:/usr/local/bin:/bin:/usr/bin:/usr/X11R6/bin:/home/wegener/bin
INPUTRC=/etc/inputrc
PWD=/home/wegener
JAVA_HOME=/usr/local/jdk
uninstall_flag=1
EDITOR=pico
LANG=en_US.UTF-8
_second=1
rvm_version=1.13.6 (stable)
SHLVL=1
HOME=/home/wegener
LS_OPTIONS=--color=tty -F -a -b -T 0
PERL_LOCAL_LIB_ROOT=/home/wegener/perl5
_first=0
LOGNAME=wegener
VISUAL=pico
CVS_RSH=ssh
GEM_PATH=/home/wegener/.rvm/gems/ruby-1.9.3-p194:/home/wegener/.rvm/gems/ruby-1.9.3-p194@global
CLASSPATH=.:/usr/local/jdk/lib/classes.zip
SSH_CONNECTION=24.8.185.82 51882 96.125.160.242 22
LESSOPEN=|/usr/bin/lesspipe.sh %s
PROMPT_COMMAND=echo -ne "\033]0;${PWD/#$HOME/~}\007"
install_flag=1
RUBY_VERSION=ruby-1.9.3-p194
PERL_MM_OPT=INSTALL_BASE=/home/wegener/perl5
G_BROKEN_FILENAMES=1
_=/bin/env 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T21:55:13.557

我找到了！它隐藏在 /home/wegener/.gemrc 的某个文件中......我不知道为什么它被设置为 wegejos 或者它甚至来自哪里......甚至没有 /home/wegejos/ 我将其更改为 / home/wegener/ 现在它正在工作。

# c++ - 结构内的数组c ++

> ID：10667372
> 
> 赞同：1
> 
> 时间：2012-05-19T17:24:31.473
> 
> 标签：c++, arrays, struct

我正在将我的程序移植到 C++，但我遇到了一些麻烦。我在 C# 中有这个代码创建一个 byte[] ：

```
writer.New(0x484700C0);
    {
        writer += Functions.PadString("PTEmu", 0x10);
        writer += new byte[] { 0xC9, 0x32, 0xE0, 0x4D, 0xEB, 0x01 };
        writer.SkipBytes(6);
        writer += 1;
        writer += channels.Count; // sub count

        for (int i = 0; i < channels.Count; i++)
        {
            writer += Functions.PadString(channels[i].Item4, 0x20); // len = 0x20
            writer += Functions.PadString(channels[i].Item2, 0x14);
            writer += Functions.PadString(channels[i].Item2, 0x14);
            writer += Functions.PadString(channels[i].Item2, 0x14);

            writer += channels[i].Item3; // int, size = 4
            writer += channels[i].Item3;
            writer += channels[i].Item3;
            writer += 0;
        }

        writer += Functions.PadString("Clan", 32);
        writer += Functions.PadString("127.0.0.1", 0x14);
        writer += Functions.PadString("127.0.0.1", 0x14);
        writer += Functions.PadString("127.0.0.1", 0x14);
        writer += 80;
        writer += 80;
        writer += 80;
        writer.SkipBytes(12);
    } 
```

我想过做类似的事情：

```
struct PT_ServerList{
    int size;
    int opcode;
    char server[0x10];
    char bla[6];
    int reserved1;
    short reserved2;
    int unknow;
    int serverCount;
    ServerInfo servers[];
}; 
```

但是在服务器 [] 之后，我需要添加更多变量，但是编译器不接受该结构。我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T17:28:34.503

使用[向量](http://www.cplusplus.com/reference/stl/vector/)：

```
struct PT_ServerList {
    ...
    std::vector<ServerInfo> servers;
    ...
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T17:29:31.290

您可能想要使用：

```
ServerInfo *servers; 
```

（在这种情况下，您需要使用“new[]”分配数组并使用“delete[]”解除分配）；或者：

```
std::vector<ServerInfo> servers; 
```

（在这种情况下，如果您以前没有使用过，您应该查阅[std::vector 文档](http://www.cplusplus.com/reference/stl/vector/)以获取有关如何使用它的信息`std::vector`。

# matlab - 如何绘制颜色图？

> ID：10667373
> 
> 赞同：1
> 
> 时间：2012-05-19T17:24:34.097
> 
> 标签：matlab, colors, color-mapping, colorbar

我在 Matlab 中有一张欧洲地图，我有一些值，这些值会按地区进行更改。

如何绘制轮廓颜色图？标签颜色取决于这些值，我也想显示颜色条。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T23:03:56.227

```
a = peaks(40); # some random data
contourf(a); # plot filled contour map
colormap(mycolors); # mycolors should be an N by 3 matrix specifying your colors
colorbar; # shows the color bar on the side 
```

# javascript - 如何将 jQuery 输入值传递给 Google Maps JS API v3？

> ID：10667380
> 
> 赞同：0
> 
> 时间：2012-05-19T17:25:26.420
> 
> 标签：javascript, jquery, google-maps, google-api, user-input

*   1：我有一个用于样式的谷歌地图代码，并且有一些**用户输入控件**，例如在地图的同一页面上使用 jQuery 编码的文本框、组合框。现在我想通过输入用户，如**featureType**或**MapType**来初始化 Javascript 中的谷歌地图的功能。我不知道如何连接这两个部分。它们分别正常工作。我是 jQuery 的新手 :)。

*   2：第二个问题是我不知道我应该在哪里找到 jQuery 代码，在 Head 或 Body 中，因为我的 Google maps JS 代码在 Head 中。

## 这是谷歌地图代码：

```
<head>
...   
<script type="text/javascript">
  function initialize() {
    // map style default
    var pinkParksStyles = [
      {
        featureType: "road", // or e.g: "road.highway" or "road.local" or "poi.medical"
        elementType: "all", // or "geometry" or "labels"
        stylers: [
          { hue: "#ff0000" },
          { saturation: -5 },
          { lightness: -34 },
          { gamma: 1.16 }
        ]
      }
    ];
    var myOptions = {
      zoom: 12,
      center: new google.maps.LatLng(55.753395,37.62394),
      mapTypeId: google.maps.MapTypeId.ROADMAP // other mapType: Hybrid, Terrain, Satellite
    };
    var map = new google.maps.Map(document.getElementById('map_canvas'), myOptions);
    map.setOptions({styles: pinkParksStyles});
  }
  google.maps.event.addDomListener(window, 'load', initialize);
</script>
<head> 
```

这里是 jQuery 输入标签，我通过 alert 对其进行了测试。

## jQuery 输入控件

```
<body>  
...
<div id="map_canvas" style="width:700px; height:500px"></div>  // show the map
<form>
  <label for="saturation"> Type a Number between -100, 100: </label>
  <input id="saturation" type="text" />
  <input type="button" value="Show Value" onclick="alert( $('#saturation').val() )" />
</form>
<form>
  <select id="mapTypeId">
    <option value="1">Hybrid</option>
    <option value="2">Terrain</option>
    <option value="3">Satellite</option>
  </select>
  <input type="button" value="Show Value" onclick="alert( $('#mapTypeId').val() )" />
</form>
<form>
  <select id="featureType">
    <option value="1">all</option>
    <option value="2">road</option>
    <option value="3">water</option>
  </select>
  <input type="button" value="Show Value" onclick="alert( $('#mapTypeId').val() )" />
</form>
...
</body> 
```

我只知道应该使用这样的东西：

```
var featureType = $("#featureType").val(); 
```

但不知道如何将其发送到 G maps JS 代码以及 jquery 的位置。

* * *

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T17:39:27.810

修改初始化函数如下：

```
function initialize() {
       var featureType = $("#featureType").val();

          // map style default
        var pinkParksStyles = [
          {
            featureType: featureType , // or e.g: "road.highway" or "road.local" or"poi.medical"
            elementType: "all", // or "geometry" or "labels"
            stylers: [
              { hue: "#ff0000" },
              { saturation: -5 },
              { lightness: -34 },
              { gamma: 1.16 }
            ]
          }
        ]; 

       ...........
    } 
```

# node.js - 节点包 ( Grunt ) 已安装但不可用

> ID：10667381
> 
> 赞同：189
> 
> 时间：2012-05-19T17:25:43.690
> 
> 标签：node.js, build, package, npm

我正在尝试使用 构建一个github [jquery-ui 库](https://github.com/jquery/jquery-ui)`grunt`，但是运行后`npm install`我仍然无法根据[自述文件](https://github.com/jquery/jquery-ui#building-jquery-ui)运行命令。它只是给出`No command 'grunt' found`：

```
james@ubuntu:~/Documents/projects/ad2/lib/jquery-ui$ grunt build
No command 'grunt' found, did you mean:
 Command 'grun' from package 'grun' (universe)
grunt: command not found
james@ubuntu:~/Documents/projects/ad2/lib/jquery-ui$ npm ls
jquery-ui@1.9.0pre /home/james/Documents/projects/ad2/lib/jquery-ui
├─┬ grunt@0.3.9 
│ ├── async@0.1.18 
│ ├── colors@0.6.0-1 
│ ├─┬ connect@1.8.7 
│ │ ├── formidable@1.0.9 
│ │ ├── mime@1.2.5 
│ │ └── qs@0.5.0 
│ ├── dateformat@1.0.2-1.2.3 
│ ├─┬ glob-whatev@0.1.6 
│ │ └─┬ minimatch@0.2.4 
│ │   └── lru-cache@1.0.6 
│ ├─┬ gzip-js@0.3.1 
│ │ ├── crc32@0.2.2 
│ │ └── deflate-js@0.2.2 
│ ├── hooker@0.2.3 
│ ├─┬ jshint@0.5.9 
│ │ ├── argsparser@0.0.6 
│ │ └─┬ minimatch@0.2.4 
│ │   └── lru-cache@1.0.6 
│ ├─┬ nodeunit@0.6.4 
│ │ ├── tap-assert@0.0.10 
│ │ └─┬ tap-producer@0.0.1 
│ │   ├── inherits@1.0.0 
│ │   ├── tap-results@0.0.2 
│ │   └── yamlish@0.0.5 
│ ├─┬ nopt@1.0.10 
│ │ └── abbrev@1.0.3 
│ ├─┬ prompt@0.1.12 
│ │ ├── pkginfo@0.2.3 
│ │ └─┬ winston@0.5.11 
│ │   ├── eyes@0.1.7 
│ │   ├─┬ loggly@0.3.11 
│ │   │ └── timespan@2.2.0 
│ │   └── stack-trace@0.0.6 
│ ├── semver@1.0.13 
│ ├─┬ temporary@0.0.2 
│ │ └── package@1.0.0 
│ ├── uglify-js@1.0.7 
│ ├── underscore@1.2.4 
│ └── underscore.string@2.1.1 
├── grunt-compare-size@0.1.4 
├─┬ grunt-css@0.2.0 
│ ├── csslint@0.9.8 
│ └── sqwish@0.2.0 
├── grunt-html@0.1.1 
├── request@2.9.153 
├─┬ rimraf@2.0.1 
│ └── graceful-fs@1.1.8 
└─┬ testswarm@0.2.2 
  └── request@2.9.202 
```

我很困惑，请问我错过了什么？

* * *

## 回答 #1

> 赞同：417
> 
> 时间：2013-02-19T09:09:51.893

命令行工具不包含在最新版本的 Grunt（撰写本文时为 0.4）中，您需要单独安装它们。

这是一个好主意，因为这意味着您可以在不同的项目上运行不同版本的 Grunt，但仍然使用 nice concise`grunt`命令来运行它们。

所以首先全局安装 grunt cli 工具：

```
npm install -g grunt-cli 
```

（或可能`sudo npm install -g grunt-cli`）。

您可以通过键入来确定这是有效的`grunt --version`

现在您可以将当前版本的 Grunt 本地安装到您的项目中。因此，从您项目的位置...

```
npm install grunt --save-dev 
```

这个`save-dev`开关并不是绝对必要的，但它是一个好主意，因为它将在其 package.json devDependencies 部分中将 grunt 标记为仅用于开发的模块。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-10-08T16:50:49.813

添加`/usr/local/share/npm/bin/`到您的`$PATH`

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2012-08-15T18:06:16.333

如果您确实通过运行安装了 Grunt 包`npm install -g grunt`，但它仍然显示为`No command 'grunt' found`or `grunt: command not found`，那么一种快速而肮脏的方法是手动将节点二进制文件链接到您的 $PATH 。

在 MacOSX/Linux 上，您可以将此行添加到您的`~/.bash_profile`or`~/.bashrc`文件中。

```
PATH=$PATH:/usr/local/Cellar/node/HEAD/bin # Add NPM binaries 
```

您可能应该替换`/usr/local/Cellar/node/HEAD/bin`为可以找到节点二进制文件的路径。

如果这对我来说**又快又脏**，那是因为如果不这样做，一切都应该正常工作，但由于未知原因，链接似乎已损坏。由于 IRC 上没有人能告诉我为什么会发生这种情况，我找到了自己的方法来让它（咕哝）工作。

*PS：这应该可以帮助您使 grunt 工作，这个答案与 jquery-ui 无关。*

***更新 02/2013****：您应该看看[@tom-p 的答案](https://stackoverflow.com/questions/10667381/node-package-grunt-installed-but-not-available/11974634#answer-14953653)，它更好地解释了正在发生的事情。Tom 为我们提供了真正的解决方案，而不是破解您的 bashrc 文件：两者都应该工作，但您应该**先****尝试安装`grunt-cli`**。*

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2014-04-01T21:35:20.380

就我而言，我需要在第 1 行修改文件 /usr/local/bin/grunt （不要这样做）：

```
 #!/usr/bin/env node //remove this line
 #!/usr/bin/env nodejs // and put this line to run with nodejs 
```

编辑：

为避免出现问题，我创建了一个名为“node”的链接，因为许多其他程序仍然使用“node”命令。

```
 sudo ln -s /usr/bin/nodejs /usr/sbin/node 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2016-08-19T19:22:14.170

还有另一种在 Windows 上运行 grunt 的方法，无需全局添加任何内容。这是您不必对 %PATH% 做任何事情的情况

如果你安装了 grunt 和 grunt-cli（没有 -g 开关）。或者通过：

```
npm install grunt-cli
npm install grunt@0.4.5 
```

或者通过在您的 packages.json 文件中包含它，例如：

```
"devDependencies": {
    "grunt-cli": "^1.2.0",
    "grunt": "^0.4.5", 
```

您可以通过以下方式从本地安装中调用 grunt：

```
node node_modules\grunt-cli\bin\grunt --version 
```

对于那些由于某些原因不想或不能使用 PATH 或者一直有其他东西弄乱它的人来说，这是一个解决方案，例如在构建代理上。

编辑：添加版本作为 grunt-cli 与 grunt > 0.3 一起使用

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2014-07-30T15:55:20.937

在 WIN7 上，我必须手动将 npm 文件夹的路径（其中包含难以捉摸的“grunt”文件）添加到 Windows PATH 环境变量中。
就我而言，那是`C:\Users\mhaagsma\AppData\Roaming\npm`

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2019-08-06T08:41:12.827

你好我在mac上遇到了这个问题，我所做的是

全局安装并以全局路径为前缀

```
sudo npm install grunt -g --prefix=/usr/local 
```

现在 `$ which grunt`

应该输出 `/usr/local/bin/grunt`

干杯

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-09-12T08:35:37.277

安装 grunt 的正确方法是运行以下命令：

```
npm install grunt -g 
```

（如果您收到 EACCESS 错误消息，请在上述命令前添加“sudo”）

-g 将使 npm 全局安装软件包，因此您可以随时在当前机器上使用它。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-11-28T06:27:25.443

1.  安装 grunt de manera global: sudo npm install -g grunt-cli --unsafe-perm=true --allow-root

2.  尝试运行咕噜声。

3.  如果您收到此消息：

警告：

您需要在 PATH 中安装 Ruby 和 Sass 才能执行此任务。

更多信息：[https ://github.com/gruntjs/grunt-contrib-sass](https://github.com/gruntjs/grunt-contrib-sass)

使用--force，继续。

3.1。检查你是否安装了 ruby​​（mac，你应该有它）： ruby​​ -v

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-05-19T17:27:10.280

有时你必须`npm install package_name -g`让它工作。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-04-15T21:19:44.367

其他解决方案是在我使用的情况下删除 ubuntu bundler：

```
sudo apt-get remove ruby-bundler 
```

这对我有用。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-03-12T17:41:52.783

在 Windows 上，部分谜团似乎是 npm 安装 Grunt.cmd 文件的位置。在我的 Linux 机器上，我只需要运行 sudo npm install -g grunt-cli，在我的 Windows 8 工作笔记本电脑上，Grunt 被放置在“.npm-global”目录中：%USER_HOME%\.npm-global，我必须将其添加到路径中。

所以在 Windows 上，我的步骤是：

*   npm install -g grunt-cli

*   弄清楚 grunt.cmd 在哪里（我猜它在 %USER_HOME%\App_Data\Roaming 中）

*   将位置添加到我的 Path 环境变量中。打开一个新的 cmd 提示符，grunt 命令运行良好。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-06-22T22:39:45.933

在 Windows 10 上将此添加到您的路径：

```
%APPDATA%\npm 
```

这引用了文件夹`~/AppData/Roaming/npm`

[假设您已经运行`npm install -g grunt-cli`]

# iphone - 解释 Apple 崩溃报告

> ID：10667385
> 
> 赞同：2
> 
> 时间：2012-05-19T17:26:25.357
> 
> 标签：iphone, xcode, ipad, ios5.1

正如他们所说，我的应用程序在运行 iOS 5.1.1 的 iPhone 4S 和 iPad（第 3 代）上被 Appl App Store 审核团队拒绝，一旦应用程序午餐，它就会崩溃。我在运行 iOS 5.1.1 的 iPhone 4 上尝试了这个应用程序，它运行得很好。他们附上了一份 creadh 报告，我不知道有什么值得调查的，如果你能提供帮助，我会很感激：

```
Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   iEC2CDV1.6Lite                          0x00012c24 0x1000 + 72740
1   SystemConfiguration                     0x36d7fce4 0x36d6b000 + 85220
2   CoreFoundation                          0x32c53acc 0x32bc6000 + 580300
3   CoreFoundation                          0x32c5332e 0x32bc6000 + 578350
4   CoreFoundation                          0x32c5203e 0x32bc6000 + 573502
5   CoreFoundation                          0x32bd549e 0x32bc6000 + 62622
6   CoreFoundation                          0x32bd5366 0x32bc6000 + 62310
7   GraphicsServices                        0x32d22432 0x32d1e000 + 17458
8   UIKit                                   0x351b4cce 0x35183000 + 203982
9   iEC2CDV1.6Lite                          0x000030f6 0x1000 + 8438
10  iEC2CDV1.6Lite                          0x000030b4 0x1000 + 8372

Thread 1 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 1:
0   libsystem_kernel.dylib                  0x351463a8 0x35145000 + 5032
1   libdispatch.dylib                       0x313aaf04 0x313a7000 + 16132
2   libdispatch.dylib                       0x313aac22 0x313a7000 + 15394

Thread 2:
0   libsystem_kernel.dylib                  0x35156cd4 0x35145000 + 72916
1   libsystem_c.dylib                       0x32037f36 0x3202f000 + 36662
2   libsystem_c.dylib                       0x32037cc8 0x3202f000 + 36040

Thread 3:
0   libsystem_kernel.dylib                  0x35156cd4 0x35145000 + 72916
1   libsystem_c.dylib                       0x32037f36 0x3202f000 + 36662
2   libsystem_c.dylib                       0x32037cc8 0x3202f000 + 36040

Thread 4 name:  WebThread
Thread 4:
0   libsystem_kernel.dylib                  0x351560d8 0x35145000 + 69848
1   libsystem_c.dylib                       0x32031674 0x3202f000 + 9844
2   WebCore                                 0x358d04e8 0x358ca000 + 25832
3   WebCore                                 0x358d07ec 0x358ca000 + 26604
4   CoreFoundation                          0x32c53b14 0x32bc6000 + 580372
5   CoreFoundation                          0x32c51d50 0x32bc6000 + 572752
6   CoreFoundation                          0x32c5216a 0x32bc6000 + 573802
7   CoreFoundation                          0x32bd549e 0x32bc6000 + 62622
8   CoreFoundation                          0x32bd5366 0x32bc6000 + 62310
9   WebCore                                 0x35973c9c 0x358ca000 + 695452
10  libsystem_c.dylib                       0x3203d72e 0x3202f000 + 59182
11  libsystem_c.dylib                       0x3203d5e8 0x3202f000 + 58856

Thread 5 name:  com.apple.NSURLConnectionLoader
Thread 5:
0   libsystem_kernel.dylib                  0x35146004 0x35145000 + 4100
1   libsystem_kernel.dylib                  0x351461fa 0x35145000 + 4602
2   CoreFoundation                          0x32c533ec 0x32bc6000 + 578540
3   CoreFoundation                          0x32c52124 0x32bc6000 + 573732
4   CoreFoundation                          0x32bd549e 0x32bc6000 + 62622
5   CoreFoundation                          0x32bd5366 0x32bc6000 + 62310
6   Foundation                              0x372d3bb2 0x372c3000 + 68530
7   Foundation                              0x372d3a7a 0x372c3000 + 68218
8   Foundation                              0x3736758a 0x372c3000 + 673162
9   libsystem_c.dylib                       0x3203d72e 0x3202f000 + 59182
10  libsystem_c.dylib                       0x3203d5e8 0x3202f000 + 58856

Thread 6:
0   libsystem_kernel.dylib                  0x35156cd4 0x35145000 + 72916
1   libsystem_c.dylib                       0x32037f36 0x3202f000 + 36662
2   libsystem_c.dylib                       0x32037cc8 0x3202f000 + 36040

Thread 7 name:  WebCore: CFNetwork Loader
Thread 7:
0   libsystem_kernel.dylib                  0x35146004 0x35145000 + 4100
1   libsystem_kernel.dylib                  0x351461fa 0x35145000 + 4602
2   CoreFoundation                          0x32c533ec 0x32bc6000 + 578540
3   CoreFoundation                          0x32c52124 0x32bc6000 + 573732
4   CoreFoundation                          0x32bd549e 0x32bc6000 + 62622
5   CoreFoundation                          0x32bd5366 0x32bc6000 + 62310
6   WebCore                                 0x3599d0d2 0x358ca000 + 864466
7   libsystem_c.dylib                       0x3203d72e 0x3202f000 + 59182
8   libsystem_c.dylib                       0x3203d5e8 0x3202f000 + 58856

Thread 8:
0   libsystem_kernel.dylib                  0x35156cd4 0x35145000 + 72916
1   libsystem_c.dylib                       0x32037f36 0x3202f000 + 36662
2   libsystem_c.dylib                       0x32037cc8 0x3202f000 + 36040

Thread 9 name:  com.apple.CFSocket.private
Thread 9:
0   libsystem_kernel.dylib                  0x35156570 0x35145000 + 71024
1   CoreFoundation                          0x32c5763a 0x32bc6000 + 595514
2   libsystem_c.dylib                       0x3203d72e 0x3202f000 + 59182
3   libsystem_c.dylib                       0x3203d5e8 0x3202f000 + 58856

Thread 0 crashed with ARM Thread State:
    r0: 0x00279700    r1: 0x00000002      r2: 0x0027dad0      r3: 0x00000000
    r4: 0x00279700    r5: 0x00000000      r6: 0x0002c36e      r7: 0x2fdfef1c
    r8: 0x0027dad0    r9: 0x00000000     r10: 0x36d99b53     r11: 0x36d99b53
    ip: 0x00279718    sp: 0x2fdfec80      lr: 0x36d7fceb      pc: 0x00012c24
  cpsr: 0x60000010

Binary Images:
    0x1000 -    0x8dfff +iEC2CDV1.6Lite armv7  &lt;448620039bac30df9ca671e0ececa529&gt; /var/mobile/Applications/C69FF164-19D9-4F4F-A0BA-86F047FA1E1E/iEC2CDV1.6Lite.ap p/iEC2CDV1.6Lite
0x2fe84000 - 0x2fea5fff  dyld armv7  &lt;77eddfd654df393ba9c95ff01715fd08&gt; /usr/lib/dyld
0x30290000 - 0x3029bfff  AccountSettings armv7  &lt;373e59421d983c93931cfbad87b1ae35&gt; /System/Library/PrivateFrameworks/AccountSettings.framework/AccountSettings
0x3029c000 - 0x3032efff  HomeSharing armv7  &lt;11ca6ed6f8c0377aba1d3e03484c380f&gt; /System/Library/PrivateFrameworks/HomeSharing.framework/HomeSharing
0x303e9000 - 0x3042efff  GeoServices armv7  &lt;a26be2e76e8730ab91a16502aba376be&gt; /System/Library/PrivateFrameworks/GeoServices.framework/GeoServices
0x3042f000 - 0x3049ffff  CoreImage armv7  &lt;86ac6f5a267637b6b7f8a831dfc7c64b&gt; /System/Library/Frameworks/CoreImage.framework/CoreImage
0x304b9000 - 0x30588fff  libGLProgrammability.dylib armv7  &lt;49607ffe4ee9389494285a213e392924&gt; /System/Library/Frameworks/OpenGLES.framework/libGLProgrammability.dylib
0x30589000 - 0x3058afff  CoreSurface armv7  &lt;97f871f09f503c98a6371c2b657430d8&gt; /System/Library/PrivateFrameworks/CoreSurface.framework/CoreSurface
0x30597000 - 0x305f4fff  StoreServices armv7  &lt;6ce256d3cf433e4aa1af8d696bf1f75d&gt; /System/Library/PrivateFrameworks/StoreServices.framework/StoreServices
0x305f5000 - 0x305f5fff  Accelerate armv7  &lt;55b24cf91a8b3532bde6733c96f14c08&gt; /System/Library/Frameworks/Accelerate.framework/Accelerate
0x30608000 - 0x30619fff  libxpc.dylib armv7  &lt;ccf25b1e49ce3b2fa58d8c8546755505&gt; /usr/lib/system/libxpc.dylib
0x3061a000 - 0x3062bfff  AirTraffic armv7  &lt;c9eb888c1bd1322cbda5b01d41be0c7d&gt; /System/Library/PrivateFrameworks/AirTraffic.framework/AirTraffic
0x30632000 - 0x306b1fff  libsqlite3.dylib armv7  &lt;bf01f5ed47b033d8bde30d735ff44416&gt; /usr/lib/libsqlite3.dylib
0x306b2000 - 0x306e9fff  Security armv7  &lt;eea56f71fde83c2981f9281dc7823725&gt; /System/Library/Frameworks/Security.framework/Security
0x30844000 - 0x30880fff  AppSupport armv7  &lt;311eac85b2a433a884dacba77217b49e&gt; /System/Library/PrivateFrameworks/AppSupport.framework/AppSupport
0x3088a000 - 0x30890fff  liblaunch.dylib armv7  &lt;aa2bcba6fc7a36a191958fef2e995475&gt; /usr/lib/system/liblaunch.dylib
0x30891000 - 0x30891fff  libkeymgr.dylib armv7  &lt;ebd2dddf55d83cf48a18913968775960&gt; /usr/lib/system/libkeymgr.dylib
0x3089f000 - 0x30a45fff  CoreData armv7  &lt;b0215b6d4d143859a2b313ecade095ec&gt; /System/Library/Frameworks/CoreData.framework/CoreData
0x30a48000 - 0x30b4efff  IMGSGX543GLDriver armv7  &lt;7454a840600038949d67edad05097242&gt; /System/Library/Extensions/IMGSGX543GLDriver.bundle/IMGSGX543GLDriver
0x30bb1000 - 0x30bc0fff  MobileDeviceLink armv7  &lt;70ac33720f513f0f97ea2279260678ca&gt; /System/Library/PrivateFrameworks/MobileDeviceLink.framework/MobileDeviceLink
0x30bc1000 - 0x30bd5fff  PersistentConnection armv7  &lt;54091a638f8731cd85ccf00fa06972c3&gt; /System/Library/PrivateFrameworks/PersistentConnection.framework/PersistentConn ection
0x30bd6000 - 0x30beefff  iAd armv7  &lt;9e9184ed0077317a97b879c3df950316&gt; /System/Library/Frameworks/iAd.framework/iAd
0x30bfe000 - 0x30c72fff  MediaControlSender armv7  &lt;87315c54b2293ab589950341ff91b45d&gt; /System/Library/PrivateFrameworks/MediaControlSender.framework/MediaControlSend er
0x30c73000 - 0x30c77fff  CertUI armv7  &lt;f503892ef60e36108d28d8f9d6144d2a&gt; /System/Library/PrivateFrameworks/CertUI.framework/CertUI
0x30d92000 - 0x30dcefff  iCalendar armv7  &lt;f2836083051132d3aa40ad82d7f73aea&gt; /System/Library/PrivateFrameworks/iCalendar.framework/iCalendar
0x30dcf000 - 0x30e04fff  DataAccess armv7  &lt;89fd0c22338b37538cf61803a0bca9e2&gt; /System/Library/PrivateFrameworks/DataAccess.framework/DataAccess
0x30e05000 - 0x30e06fff  libsystem_sandbox.dylib armv7  &lt;6a8f2f33c7543808a0f4599101c3b61a&gt; /usr/lib/system/libsystem_sandbox.dylib
0x30e07000 - 0x30f7afff  MediaPlayer armv7  &lt;63cdf8f9c66d36e7a4e69e2f6cae854f&gt; /System/Library/Frameworks/MediaPlayer.framework/MediaPlayer
0x3102a000 - 0x31082fff  CoreAudio armv7  &lt;be335e8eb6f93594b028a6ddd503a183&gt; /System/Library/Frameworks/CoreAudio.framework/CoreAudio
0x31083000 - 0x31092fff  GenerationalStorage armv7  &lt;d84c3fd0e7bd36e78c256f2f4c5a4e91&gt; /System/Library/PrivateFrameworks/GenerationalStorage.framework/GenerationalSto rage
0x31096000 - 0x311cdfff  MusicLibrary armv7  &lt;32bc794969e534df97a14dc4be228408&gt; /System/Library/PrivateFrameworks/MusicLibrary.framework/MusicLibrary
0x3121c000 - 0x312fbfff  RawCamera armv7  &lt;293f818ba6533dceae8b900b6ed3c887&gt; /System/Library/CoreServices/RawCamera.bundle/RawCamera
0x312fc000 - 0x31314fff  Notes armv7  &lt;724966ed5cd4395cb70f9c996b123f53&gt; /System/Library/PrivateFrameworks/Notes.framework/Notes
0x31315000 - 0x31317fff  MobileInstallation armv7  &lt;215d93dbb0f63cbf828f9126eb7b5349&gt; /System/Library/PrivateFrameworks/MobileInstallation.framework/MobileInstallati on
0x313a7000 - 0x313bdfff  libdispatch.dylib armv7  &lt;9ecfaef4110a3bf9a92d12f0fe8d1d78&gt; /usr/lib/system/libdispatch.dylib
0x313f2000 - 0x313f6fff  libAccessibility.dylib armv7  &lt;9a17d07b5a3b38cfafdf16f78c99b572&gt; /usr/lib/libAccessibility.dylib
0x313f7000 - 0x3141cfff  OpenCL armv7  &lt;f4b08361179a3f6bb033415b0d7c6251&gt; /System/Library/PrivateFrameworks/OpenCL.framework/OpenCL
0x3144d000 - 0x3144efff  libsystem_blocks.dylib armv7  &lt;9fdc27af7350323bbc7d98e14e027907&gt; /usr/lib/system/libsystem_blocks.dylib
0x3148a000 - 0x3154cfff  Celestial armv7  &lt;19617260ee073e23b95e456d93930aea&gt; /System/Library/PrivateFrameworks/Celestial.framework/Celestial
0x315c0000 - 0x315ddfff  libsystem_info.dylib armv7  &lt;50863bcbf478323e96a8e5b1a83ea6f9&gt; /usr/lib/system/libsystem_info.dylib
0x315de000 - 0x315effff  DataAccessExpress armv7  &lt;e6144ba265da3bb7b9a263aa1a29b054&gt; /System/Library/PrivateFrameworks/DataAccessExpress.framework/DataAccessExpress
0x3161a000 - 0x316cdfff  iTunesStore armv7  &lt;b3c0cce5f8e632e18f841c32b68f57a1&gt; /System/Library/PrivateFrameworks/iTunesStore.framework/iTunesStore
0x31a99000 - 0x31a99fff  vecLib armv7  &lt;a2cfe25e77aa36bfb4a30b2d0d2dd465&gt; /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/vec Lib
0x31c18000 - 0x31ccefff  AVFoundation armv7  &lt;35cb7a0eb1dc3554a777c1cc11cb0415&gt; /System/Library/Frameworks/AVFoundation.framework/AVFoundation
0x31e1d000 - 0x31e1ffff  libCoreVMClient.dylib armv7  &lt;d4d4aa3090c83e87bcb15ed00b93fd5c&gt; /System/Library/Frameworks/OpenGLES.framework/libCoreVMClient.dylib
0x31e22000 - 0x31e22fff  libunwind.dylib armv7  &lt;e0a73a57795f3e1698a52ebe6fc07005&gt; /usr/lib/system/libunwind.dylib
0x31e23000 - 0x31e26fff  CaptiveNetwork armv7  &lt;f5cc4b97ce9432da9426f12621453325&gt; /System/Library/PrivateFrameworks/CaptiveNetwork.framework/CaptiveNetwork
0x31e27000 - 0x31e3afff  DataDetectorsCore armv7  &lt;3f4596cbe1b13fdcb427d87de21df3f6&gt; /System/Library/PrivateFrameworks/DataDetectorsCore.framework/DataDetectorsCore
0x31e3e000 - 0x31e55fff  WebBookmarks armv7  &lt;696bb0630b19388da0d72e685bcf6e28&gt; /System/Library/PrivateFrameworks/WebBookmarks.framework/WebBookmarks
0x31ec4000 - 0x31ecbfff  MailServices armv7  &lt;ab2388ce733e38b7a261273a401bbbf1&gt; /System/Library/PrivateFrameworks/MailServices.framework/MailServices
0x31ecc000 - 0x31ed1fff  libcopyfile.dylib armv7  &lt;52e874396c393ed29099789ce702cfe2&gt; /usr/lib/system/libcopyfile.dylib
0x31fe1000 - 0x3202bfff  ManagedConfiguration armv7  &lt;f1fbb825def23043830a095b953a9c94&gt; /System/Library/PrivateFrameworks/ManagedConfiguration.framework/ManagedConfigu ration
0x3202f000 - 0x320bbfff  libsystem_c.dylib armv7  &lt;f859ce1ad1773f0ba98d7c6e135b7697&gt; /usr/lib/system/libsystem_c.dylib
0x320bc000 - 0x320befff  libCoreFSCache.dylib armv7  &lt;808518e0fbf539af8489f028ca5198c7&gt; /System/Library/Frameworks/OpenGLES.framework/libCoreFSCache.dylib
0x320bf000 - 0x320c0fff  libdnsinfo.dylib armv7  &lt;9aede8d6579d3430ac39ae5f95cce498&gt; /usr/lib/system/libdnsinfo.dylib
0x320c8000 - 0x321b9fff  QuartzCore armv7  &lt;35d64a9da5523ae08c9e41511fd3061b&gt; /System/Library/Frameworks/QuartzCore.framework/QuartzCore
0x323de000 - 0x3248bfff  libxml2.2.dylib armv7  &lt;58d47f064e0232119f4b838ad659f9c1&gt; /usr/lib/libxml2.2.dylib
0x3248c000 - 0x3248dfff  libremovefile.dylib armv7  &lt;402f8956975d3b6fb86ab9b31a43242c&gt; /usr/lib/system/libremovefile.dylib
0x324c5000 - 0x324c5fff  liblangid.dylib armv7  &lt;644ff4bcfbf337b5b5859e3f0fc0a9a8&gt; /usr/lib/liblangid.dylib
0x3275b000 - 0x327a5fff  libvDSP.dylib armv7  &lt;441b42aca07b3da39feab25f8349918f&gt; /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/lib vDSP.dylib
0x32804000 - 0x32808fff  Marco armv7  &lt;8dea3e558fe534ff868fc92e215ce53b&gt; /System/Library/PrivateFrameworks/Marco.framework/Marco
0x3280c000 - 0x32892fff  CoreMotion armv7  &lt;6a9355d5a8e238b5b8f193605d509e15&gt; /System/Library/Frameworks/CoreMotion.framework/CoreMotion
0x32893000 - 0x32981fff  libiconv.2.dylib armv7  &lt;2cfefe2ad1d335dd9549562910e7a2e2&gt; /usr/lib/libiconv.2.dylib
0x3298a000 - 0x329d8fff  CoreLocation armv7  &lt;44550ebedf23334d85441d9743b74e03&gt; /System/Library/Frameworks/CoreLocation.framework/CoreLocation
0x32a2b000 - 0x32a34fff  libMobileGestalt.dylib armv7  &lt;4a15e845dc6f3a4a980de66c1cc44c42&gt; /usr/lib/libMobileGestalt.dylib
0x32b14000 - 0x32b40fff  libtidy.A.dylib armv7  &lt;3aacc5b650e037c086a8ff6657d154bf&gt; /usr/lib/libtidy.A.dylib
0x32bc6000 - 0x32cddfff  CoreFoundation armv7  &lt;6d450fe923d7387f8b01845e0edd713d&gt; /System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
0x32d06000 - 0x32d0afff  IOMobileFramebuffer armv7  &lt;42dbc26828e934acabb4f3b0a35d8250&gt; /System/Library/PrivateFrameworks/IOMobileFramebuffer.framework/IOMobileFramebu ffer
0x32d1e000 - 0x32d28fff  GraphicsServices armv7  &lt;cb64e146a8ee3fda9e80ffae1ccc9c5a&gt; /System/Library/PrivateFrameworks/GraphicsServices.framework/GraphicsServices
0x32d2c000 - 0x32fedfff  libLAPACK.dylib armv7  &lt;0e94e9a7e7a334649afaccae0f1215a2&gt; /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/lib LAPACK.dylib
0x33497000 - 0x334e0fff  AddressBook armv7  &lt;b17a2962e9043e0385c3c2c652155f2b&gt; /System/Library/Frameworks/AddressBook.framework/AddressBook
0x335af000 - 0x335b7fff  MobileWiFi armv7  &lt;b76c3e9fb78234c392058250d4620e72&gt; /System/Library/PrivateFrameworks/MobileWiFi.framework/MobileWiFi
0x335c2000 - 0x335d8fff  libmis.dylib armv7  &lt;258bc92be5823b239b4412dd42cb4807&gt; /usr/lib/libmis.dylib
0x335d9000 - 0x335f8fff  libSystem.B.dylib armv7  &lt;0c55744b6f7335eebba4ca2c3d10b43c&gt; /usr/lib/libSystem.B.dylib
0x335f9000 - 0x335fefff  libsystem_dnssd.dylib armv7  &lt;27bb5462450732e380f5a2c170546e93&gt; /usr/lib/system/libsystem_dnssd.dylib
0x335ff000 - 0x3363bfff  IMFoundation armv7  &lt;253125b9103c3d13b66923ac6893c25b&gt; /System/Library/PrivateFrameworks/IMCore.framework/Frameworks/IMFoundation.fram ework/IMFoundation
0x336f6000 - 0x336fbfff  CrashReporterSupport armv7  &lt;dc11c5c2cbe73a6288a6094ebf5de673&gt; /System/Library/PrivateFrameworks/CrashReporterSupport.framework/CrashReporterS upport
0x336fc000 - 0x33702fff  liblockdown.dylib armv7  &lt;9e45ce468a6f31e5b8263f2c224aa800&gt; /usr/lib/liblockdown.dylib
0x33704000 - 0x33768fff  MessageUI armv7  &lt;da7af4f9494b35558bf7892dfdb36ee3&gt; /System/Library/Frameworks/MessageUI.framework/MessageUI
0x337f6000 - 0x33a23fff  MediaToolbox armv7  &lt;c3098478486032c6aff336fa711c4fc6&gt; /System/Library/PrivateFrameworks/MediaToolbox.framework/MediaToolbox
0x33a45000 - 0x33aeffff  libBLAS.dylib armv7  &lt;bf822cc1a3243ae7b104cf73ca22d352&gt; /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/lib BLAS.dylib
0x33b12000 - 0x33c57fff  CoreGraphics armv7  &lt;903545b89a7f311d95100ac7d1d44709&gt; /System/Library/Frameworks/CoreGraphics.framework/CoreGraphics
0x33c5a000 - 0x33cbdfff  IMCore armv7  &lt;046b6b615a743057b59d4aaba8a91d61&gt; /System/Library/PrivateFrameworks/IMCore.framework/IMCore
0x33df4000 - 0x33dfbfff  libc++abi.dylib armv7  &lt;bab4dcbfc5943d3fbb637342d35e8045&gt; /usr/lib/libc++abi.dylib
0x33e16000 - 0x33e19fff  CoreTime armv7  &lt;a398de5ba1e43a11b7008e9bb5a7f6fe&gt; /System/Library/PrivateFrameworks/CoreTime.framework/CoreTime
0x33e1a000 - 0x33e27fff  libbsm.0.dylib armv7  &lt;750a0de73a733019a77144b805d4d2f8&gt; /usr/lib/libbsm.0.dylib
0x33e64000 - 0x33eb5fff  libstdc++.6.dylib armv7  &lt;c352af5a742e3c7a8d4d7e5f6f454793&gt; /usr/lib/libstdc++.6.dylib
0x33eb6000 - 0x33ec8fff  DataDetectorsUI armv7  &lt;50ea319aaeb7307e92719980dd4b2953&gt; /System/Library/PrivateFrameworks/DataDetectorsUI.framework/DataDetectorsUI
0x33f6f000 - 0x33f98fff  AppleAccount armv7  &lt;2ba44023410231fcb3f72f762ea3ce6e&gt; /System/Library/PrivateFrameworks/AppleAccount.framework/AppleAccount
0x33fc4000 - 0x33fc4fff  libCVMSPluginSupport.dylib armv7  &lt;a80aaa9989483ce3a496a061fd1e9e0a&gt; /System/Library/Frameworks/OpenGLES.framework/libCVMSPluginSupport.dylib
0x33fca000 - 0x34070fff  AddressBookUI armv7  &lt;da424fecc66e3628ab03378ae80b38fc&gt; /System/Library/Frameworks/AddressBookUI.framework/AddressBookUI
0x34071000 - 0x34091fff  libxslt.1.dylib armv7  &lt;39348471007e39dab80af68b08390456&gt; /usr/lib/libxslt.1.dylib
0x34095000 - 0x3416dfff  vImage armv7  &lt;caf3648be2933384b6aa1ae7408ab4f0&gt; /System/Library/Frameworks/Accelerate.framework/Frameworks/vImage.framework/vIm age
0x3417b000 - 0x34181fff  libnotify.dylib armv7  &lt;9406297de3e43742887890662a87ab53&gt; /usr/lib/system/libnotify.dylib
0x34182000 - 0x34188fff  IAP armv7  &lt;17eddbf5590d3cb88d4acbda27447f5b&gt; /System/Library/PrivateFrameworks/IAP.framework/IAP
0x34194000 - 0x3419cfff  ProtocolBuffer armv7  &lt;0e846afacf823d2b8c029cc3010a8253&gt; /System/Library/PrivateFrameworks/ProtocolBuffer.framework/ProtocolBuffer
0x345ab000 - 0x34aeffff  FaceCoreLight armv7  &lt;f326d88709683520b251dc53cb847c11&gt; /System/Library/PrivateFrameworks/FaceCoreLight.framework/FaceCoreLight
0x34af0000 - 0x34b06fff  DictionaryServices armv7  &lt;6ed2e967136f37d4a4b9b318d6c43b83&gt; /System/Library/PrivateFrameworks/DictionaryServices.framework/DictionaryServic es
0x34c1b000 - 0x34ce1fff  libobjc.A.dylib armv7  &lt;90014d1bc583366d85622e43097df416&gt; /usr/lib/libobjc.A.dylib
0x34d0d000 - 0x34d13fff  MobileIcons armv7  &lt;ed1b46f917903c9b9baaa2be4392dafe&gt; /System/Library/PrivateFrameworks/MobileIcons.framework/MobileIcons
0x34d14000 - 0x34d1efff  libbz2.1.0.dylib armv7  &lt;40e4045fb79e382b8833707746cf28b1&gt; /usr/lib/libbz2.1.0.dylib
0x34d20000 - 0x34d20fff  libgcc_s.1.dylib armv7  &lt;eb82984fa36c329387aa518aa5205f3d&gt; /usr/lib/libgcc_s.1.dylib
0x34d25000 - 0x34d6dfff  CoreMedia armv7  &lt;e274e1b894753b2eb05cf7b22a36d0c1&gt; /System/Library/Frameworks/CoreMedia.framework/CoreMedia
0x34d6e000 - 0x34d75fff  AssetsLibraryServices armv7  &lt;38132ecfd74b325fb1a4142bab663c19&gt; /System/Library/PrivateFrameworks/AssetsLibraryServices.framework/AssetsLibrary Services
0x34d76000 - 0x34d79fff  NetworkStatistics armv7  &lt;7848d8ebad99367cb4f7f4e3fe88e5d6&gt; /System/Library/PrivateFrameworks/NetworkStatistics.framework/NetworkStatistics
0x34e4a000 - 0x34e9bfff  CoreText armv7  &lt;5bfac4ee88d03d5b87a1f105abb7756c&gt; /System/Library/Frameworks/CoreText.framework/CoreText
0x34eba000 - 0x34f80fff  GLEngine armv7  &lt;6617f2b4ee283469a5595129889ff049&gt; /System/Library/Frameworks/OpenGLES.framework/GLEngine.bundle/GLEngine
0x34f81000 - 0x34f9afff  libRIP.A.dylib armv7  &lt;1828cddc5dd93c61afbefb59587d7f8a&gt; /System/Library/Frameworks/CoreGraphics.framework/Resources/libRIP.A.dylib
0x34f9b000 - 0x34fd9fff  IOKit armv7  &lt;fcda71d29d6136dfbd84c1725f4998e5&gt; /System/Library/Frameworks/IOKit.framework/Versions/A/IOKit
0x34fda000 - 0x34fdefff  IOSurface armv7  &lt;443ac3aab9283da480dd9dcda3c5c88e&gt; /System/Library/PrivateFrameworks/IOSurface.framework/IOSurface
0x35145000 - 0x3515bfff  libsystem_kernel.dylib armv7  &lt;311f379a9fde305d80c1b22b7dd2e52a&gt; /usr/lib/system/libsystem_kernel.dylib
0x3515c000 - 0x35172fff  EAP8021X armv7  &lt;952fcfdec0633aff923768fca1a26fcb&gt; /System/Library/PrivateFrameworks/EAP8021X.framework/EAP8021X
0x35173000 - 0x3517dfff  libvMisc.dylib armv7  &lt;e8248c797b9b363594bb652ddf7ce16d&gt; /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/lib vMisc.dylib
0x35183000 - 0x35625fff  UIKit armv7  &lt;cd513a2f22f53d698c3e10f6fe48a63e&gt; /System/Library/Frameworks/UIKit.framework/UIKit
0x35787000 - 0x357cafff  libcommonCrypto.dylib armv7  &lt;95b49daf4cf038b6bea8010bba3a1e26&gt; /usr/lib/system/libcommonCrypto.dylib
0x357fa000 - 0x35809fff  SpringBoardServices armv7  &lt;a2363f8ed49932dba415d2d4cd32fb74&gt; /System/Library/PrivateFrameworks/SpringBoardServices.framework/SpringBoardServ ices
0x3580a000 - 0x3580efff  libGFXShared.dylib armv7  &lt;998fccc16cf735dbb62324202995e193&gt; /System/Library/Frameworks/OpenGLES.framework/libGFXShared.dylib
0x358ca000 - 0x36089fff  WebCore armv7  &lt;2690c38c9c5f3c09975d619dd1dfbed7&gt; /System/Library/PrivateFrameworks/WebCore.framework/WebCore
0x3608a000 - 0x3615afff  WebKit armv7  &lt;3c5dd2ec46fe3e189c25bba78ad88fa1&gt; /System/Library/PrivateFrameworks/WebKit.framework/WebKit
0x3615b000 - 0x361a7fff  CoreTelephony armv7  &lt;b8f80d5d594c31d2b5d8fba9fdedb7e1&gt; /System/Library/Frameworks/CoreTelephony.framework/CoreTelephony
0x361b7000 - 0x361fbfff  MobileCoreServices armv7  &lt;757226927a873d5492be721908077b48&gt; /System/Library/Frameworks/MobileCoreServices.framework/MobileCoreServices
0x361ff000 - 0x36202fff  libsystem_network.dylib armv7  &lt;356cb66612e836968ef24e6e5c3364cc&gt; /usr/lib/system/libsystem_network.dylib
0x36203000 - 0x3624cfff  libc++.1.dylib armv7  &lt;5b690e5dd5a43a7fb166ade9fe58a7a4&gt; /usr/lib/libc++.1.dylib
0x3625e000 - 0x36296fff  VideoToolbox armv7  &lt;9f25f38d1cd13a1daff99cfde8884410&gt; /System/Library/PrivateFrameworks/VideoToolbox.framework/VideoToolbox
0x36297000 - 0x363bcfff  JavaScriptCore armv7  &lt;2ffc6c87b94434288366bd53765ee267&gt; /System/Library/PrivateFrameworks/JavaScriptCore.framework/JavaScriptCore
0x36942000 - 0x36a19fff  CFNetwork armv7  &lt;765a472c824830eea91b8f02d12867e4&gt; /System/Library/Frameworks/CFNetwork.framework/CFNetwork
0x36a1a000 - 0x36a1bfff  libdyld.dylib armv7  &lt;977b0ad6f2f433108b4a0324a57cd2ab&gt; /usr/lib/system/libdyld.dylib
0x36a1c000 - 0x36a23fff  MediaRemote armv7  &lt;42dc1b43dabd3692b97d6aacfbdf0449&gt; /System/Library/PrivateFrameworks/MediaRemote.framework/MediaRemote
0x36a98000 - 0x36b11fff  ProofReader armv7  &lt;6db611d8df6530d480f97a40bc519f70&gt; /System/Library/PrivateFrameworks/ProofReader.framework/ProofReader
0x36b49000 - 0x36b88fff  QuickLook armv7  &lt;802b1092542a3017a0380632502610d4&gt; /System/Library/Frameworks/QuickLook.framework/QuickLook
0x36b89000 - 0x36d46fff  ImageIO armv7  &lt;02e3578171fa3b6a969b244275fd2bab&gt; /System/Library/Frameworks/ImageIO.framework/ImageIO
0x36d47000 - 0x36d6afff  Bom armv7  &lt;c3435ecd2e5839f89de51edad0e1bb00&gt; /System/Library/PrivateFrameworks/Bom.framework/Bom
0x36d6b000 - 0x36da0fff  SystemConfiguration armv7  &lt;4464a4e3bb3f32f7abaa35ebf31fda49&gt; /System/Library/Frameworks/SystemConfiguration.framework/SystemConfiguration
0x36f91000 - 0x37175fff  AudioToolbox armv7  &lt;c91e27850452330ea804db6408840fd2&gt; /System/Library/Frameworks/AudioToolbox.framework/AudioToolbox
0x3720b000 - 0x3723ffff  MIME armv7  &lt;d30292ea8f7e360fa5f5d5b1b62b602d&gt; /System/Library/PrivateFrameworks/MIME.framework/MIME
0x372a8000 - 0x372b4fff  CoreVideo armv7  &lt;364fa32d513f3c11b50970120545f1a8&gt; /System/Library/Frameworks/CoreVideo.framework/CoreVideo
0x372c3000 - 0x37441fff  Foundation armv7  &lt;c40ddb073142315bb4ebb214343d0b7f&gt; /System/Library/Frameworks/Foundation.framework/Foundation
0x374b1000 - 0x374eefff  FTServices armv7  &lt;3f23418319a03a589dd5cac7df20e238&gt; /System/Library/PrivateFrameworks/FTServices.framework/FTServices
0x37615000 - 0x37618fff  ActorKit armv7  &lt;434c756a6b053f4ba3c954cfccddbf59&gt; /System/Library/PrivateFrameworks/ActorKit.framework/ActorKit
0x3762b000 - 0x376c4fff  EventKit armv7  &lt;d67aa1508ee7306b8e2a45c76ffddff0&gt; /System/Library/Frameworks/EventKit.framework/EventKit
0x376f1000 - 0x376f4fff  libcompiler_rt.dylib armv7  &lt;b2c05d8601c13be884097192dca4e187&gt; /usr/lib/system/libcompiler_rt.dylib
0x37783000 - 0x37787fff  AggregateDictionary armv7  &lt;3a3a33f3a05538988c6e2bb363dc46a8&gt; /System/Library/PrivateFrameworks/AggregateDictionary.framework/AggregateDictio nary
0x3781d000 - 0x3781efff  DataMigration armv7  &lt;d77f0e8f39ee37f5a2ac713a3fd9e693&gt; /System/Library/PrivateFrameworks/DataMigration.framework/DataMigration
0x3781f000 - 0x3785ffff  libGLImage.dylib armv7  &lt;40448706190031f6b0d9636cc11ee81d&gt; /System/Library/Frameworks/OpenGLES.framework/libGLImage.dylib
0x37965000 - 0x3796bfff  MobileKeyBag armv7  &lt;e1f06241ef0e3f0aae00f15df572077e&gt; /System/Library/PrivateFrameworks/MobileKeyBag.framework/MobileKeyBag
0x379c0000 - 0x379c5fff  libGPUSupportMercury.dylib armv7  &lt;3c1cc3175c403ace8fcbd3826bd43807&gt; /System/Library/PrivateFrameworks/GPUSupport.framework/libGPUSupportMercury.dyl ib
0x379c6000 - 0x379c9fff  libmacho.dylib armv7  &lt;e52b77623bd031bc807e77029566c777&gt; /usr/lib/system/libmacho.dylib
0x379ca000 - 0x379d6fff  libCRFSuite.dylib armv7  &lt;bdb2b4d1a78c39c1ba60d791207aed2a&gt; /usr/lib/libCRFSuite.dylib
0x379d7000 - 0x37a12fff  libCGFreetype.A.dylib armv7  &lt;55941c96cf1f3b048e72a148c4496c16&gt; /System/Library/Frameworks/CoreGraphics.framework/Resources/libCGFreetype.A.dyl ib
0x37a39000 - 0x37a3dfff  libcache.dylib armv7  &lt;d6a7436ed8dc33d795c9b42baf864882&gt; /usr/lib/system/libcache.dylib
0x37af4000 - 0x37b24fff  ContentIndex armv7  &lt;7a64670bb2ff3ee39ddee1dc1c72f92d&gt; /System/Library/PrivateFrameworks/ContentIndex.framework/ContentIndex
0x37b25000 - 0x37b3afff  libresolv.9.dylib armv7  &lt;66f7557fa4b43979b186e00271839fdb&gt; /usr/lib/libresolv.9.dylib
0x37b3b000 - 0x37b3ffff  FTClientServices armv7  &lt;21de970d7ebb3e7fb502a0a5451b0806&gt; /System/Library/PrivateFrameworks/FTClientServices.framework/FTClientServices
0x37b40000 - 0x37c89fff  libicucore.A.dylib armv7  &lt;b70646b63f1f3b33896dd8cb91b8dab1&gt; /usr/lib/libicucore.A.dylib
0x37c8a000 - 0x37cadfff  MobileSync armv7  &lt;e42604c550283f4aa517ae8f108b340f&gt; /System/Library/PrivateFrameworks/MobileSync.framework/MobileSync
0x37ccb000 - 0x37ceffff  PrintKit armv7  &lt;08509c7bc915358b953de6f5cbef5c56&gt; /System/Library/PrivateFrameworks/PrintKit.framework/PrintKit
0x37cf0000 - 0x37cf5fff  ApplePushService armv7  &lt;f424c0340de637c08bbeb4f3bd8c6eaf&gt; /System/Library/PrivateFrameworks/ApplePushService.framework/ApplePushService
0x37d60000 - 0x37d6cfff  li 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T17:29:02.063

请参阅[不带符号的崩溃日志](https://developer.apple.com/library/mac/#technotes/tn2004/tn2123.html)。

# regex - 使用正则表达式否定组

> ID：10667386
> 
> 赞同：0
> 
> 时间：2012-05-19T17:26:50.320
> 
> 标签：regex

我想使用正则表达式通过否定组来提取内容（而不是进行搜索和替换）

要获取信息框块，我使用以下正则表达式。

```
(\{\{Infobox(?:.*?)^\}\}) 
```

如何否定该组，以便返回没有信息框的文本。我尝试了很多组合，比如

```
(.*(?!(?:\{\{Infobox(?:.*?)^\}\})).*) 
```

这是我试图提取的示例文本。

```
<username>Majorclanger</username>
<id>817248</id>
</contributor>
<minor />
<comment>rm unneeded hyphen</comment>
<text xml:space="preserve">{{sprotected2}}
{{Infobox MLB player
| birthplace = {{city-state|Riverside|California}}
| debutdate = May 30
| debutyear = 1986
}}

==Early life==
{{Infobox Person
|parents       = 
|relatives     = 
|signature     = 
|website       = 
}}

Born in {{city-state|Riverside|California}}, Bonds grew up in {{city-state|San Carlos|California}} and attended 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T17:42:26.100

这可能取决于您正在使用的语言的正则表达式方言，在 Python 中您可以执行以下操作：

```
pattern = re.compile('{{Infobox.*?\n}}', re.DOTALL)
print re.sub(pattern, '', s) 
```

# database - “卸载”延迟加载的实体

> ID：10667387
> 
> 赞同：1
> 
> 时间：2012-05-19T17:27:04.623
> 
> 标签：database, jpa, lazy-loading

我有一个带有 derby 数据库的应用程序，并使用 eclipselink 作为持久性 api。假设我有一个带有团队列表的 gui。每支球队都有许多球员。团队类中的关系如下所示：

```
@OneToMany(mappedBy = "team", fetch = FetchType.LAZY, cascade = { CascadeType.ALL })
private List<player> players = new ArrayList<player>(): 
```

和这样的播放器类：

```
@ManyToOne(targetEntity = Team.class)
@JoinColumn(name = "teamID", nullable = false, referencedColumnName = "ID")
private Team team; 
```

所以我现在开始我的应用程序，它填写了一个包含所有现有团队的列表：

```
public List<Team> getTeams()
{
    TypedQuery<Team> query = em.createQuery("SELECT t FROM Team t",  Team.class);
    List<Team> teams = query.getResultList();
    return teams;
} 
```

到目前为止一切正常，只有球队被加载，而不是球员。假设我现在通过选择一个团队并为此执行命令来打开一个包含团队玩家的表。表中填满：

```
team.getPlayers(); 
```

所以现在这支球队的所有球员都加载了，因为现在需要他们。但是在我关闭表格后，它们仍然处于加载状态，但我想再次“卸载”它们，这样它们就不会留在内存中——我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T21:48:25.663

如果您想从其上下文中摆脱托管实体，您可以调用`EntityManager.clear()`方法（`EntityManager.flush()`之前调用）。但是，此操作会删除**所有**托管实体，这不一定是您想要的，因为这可能会导致额外的数据库命中。

如果你很幸运并且可以使用 JPA 2.0，那么还有一个更好的选择：`EntityManager.detach(Object)`方法，它从持久性上下文中删除给定的对象。

# java - 尝试访问 SQLite 数据库时出现 java.lang.NullPointerException

> ID：10667391
> 
> 赞同：-1
> 
> 时间：2012-05-19T17:28:16.653
> 
> 标签：java, android, xml

我正在尝试创建一个登录页面，该页面检查 SQLite 数据库中的用户详细信息，如果它们存在，它们将被推进到应用程序的主页。我不断收到 java.lang.NullPointerException 并且不知道我做错了什么。请您就代码中的问题提供建议吗？

**登录.java：**

```
 package com.B00512756.angertwo;

    public class Login extends Activity implements OnClickListener{
        public static final String DATABASE_NAME = "login_database.db";
        public static final String USER_INFO_TABLE = "user_information";
        public static final String COLUMN_ID = "UserID";
        public static final String COLUMN_RATING = "UserName";
        public static final String COLUMN_NAME = "Password";

    public SQLiteDatabase regDB;

    public EditText txtUserName;
    public EditText txtPassword;
    public static Button btnLogin;
    public static Button btnCancel;

        /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.loginpage);

            txtUserName=(EditText)this.findViewById(R.id.txtUname);
            txtPassword=(EditText)this.findViewById(R.id.txtPwd);
            //btnLogin=(Button)this.findViewById(R.id.btnLogin);
            Button Login = (Button) findViewById(R.id.btnLogin);
            Button Register = (Button) findViewById(R.id.btnregister);
            Button Cancel = (Button) findViewById(R.id.btnCancel);

            Register.setOnClickListener(new View.OnClickListener() {
                public void onClick(View view) {
                    Intent myIntent = new Intent(view.getContext(), Registration.class);
                    startActivityForResult(myIntent, 0); 
                    finish();
                }
            });

            Cancel.setOnClickListener(new View.OnClickListener() {
                public void onClick(View view) {
                    android.os.Process.killProcess(android.os.Process.myPid());
                }
            });

            Login.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub

                    //String[] columns = new String[]{COLUMN_ID, COLUMN_RATING, COLUMN_NAME };

                    Cursor c = regDB.query(USER_INFO_TABLE, new String[] {
                            COLUMN_ID, COLUMN_RATING, COLUMN_NAME}, null, null, null, null, null);
                    String result = "";

                    int iRow = c.getColumnIndex(COLUMN_ID);
                    int iRating = c.getColumnIndex(COLUMN_RATING);
                    int iName = c.getColumnIndex(COLUMN_NAME);

                    c.moveToLast();
                    for (int i = c.getCount() - 1; i >= 0; i--) {

                        // Get the data
                        result = result + c.getString(iRow) + " " + c.getString(iRating) + " " + c.getString(iName) + "\n" ;
                        if("select * from USER_INFO_TABLE where UserName =" + "\""+ txtUserName + "\""+" and Password="+ "\""+ txtPassword != null);
                        { Intent j = new Intent();
                        j.setClassName("com.B00512756.angertwo",
                                "com.B00512756.angertwo.AngerprototypetwoActivity");

                        startActivity(j);}

                        // Move the cursor
                        c.moveToPrevious();
                        //return result;
                    }
                    c.close();

                    }

                });

            }

        private SQLiteDatabase getWritableDatabase() {
            // TODO Auto-generated method stub
            return null;
        }

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub

        }
} 
```

**登录页面.xml：**

```
 <?xml version="1.0" encoding="UTF-8"?>
    <TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:stretchColumns="1">

    <TableRow>
    <TextView 
    android:text="User Name: " 
    android:id="@+id/TextView01" 
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content">
    </TextView>

    <EditText 
    android:text="" 
    android:id="@+id/txtUname" 
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content">
    </EditText>
    </TableRow>

    <TableRow>
    <TextView 
    android:text="Password: " 
    android:id="@+id/TextView02" 
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content">
    </TextView>

    <EditText 
    android:text="" 
    android:id="@+id/txtPwd" 
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content"
    android:password="true">
    </EditText>
    </TableRow>

    <TableRow>

    <Button
    android:text="Login" 
    android:id="@+id/btnLogin" 
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content">
    </Button>

    <Button
    android:text="Register" 
    android:id="@+id/btnregister" 
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content">
    </Button>

    <Button
    android:text="Cancel" 
    android:id="@+id/btnCancel" 
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content">
    </Button>

    </TableRow>

    </TableLayout> 
```

**安卓清单：**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest package="com.B00512756.angertwo"
      android:versionCode="1"
      android:versionName="1.0" xmlns:android="http://schemas.android.com/apk/res/android">
    <uses-sdk android:minSdkVersion="8" />

    <application android:name=".AppState" android:icon="@drawable/icon" android:label="@string/app_name">
        <activity android:name=".Login"
                  android:label="@string/main_title">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity android:name=".Login" android:label="@string/begin_label"
       android:theme="@android:style/Theme"></activity> 
      <activity android:name=".Question1" android:label="@string/question_one"
       android:theme="@android:style/Theme"></activity>
      <activity android:name=".Question2" android:label="@string/question_two"
       android:theme="@android:style/Theme"></activity>
      <activity android:name=".Question3" android:label="@string/question_three"
       android:theme="@android:style/Theme"></activity>
      <activity android:name=".Question4" android:label="@string/question_four"
       android:theme="@android:style/Theme"></activity>
      <activity android:name=".Question5" android:label="@string/question_five"
       android:theme="@android:style/Theme"></activity>
      <!-- <activity android:name=".AngerprototypetwoActivity" android:label="@string/main_title"
       android:theme="@android:style/Theme"></activity> -->
      <activity android:name=".nextQ1" android:id="@+id/next_Q1_button"
       android:theme="@android:style/Theme"></activity>
      <activity android:name=".Strategies" android:label="@string/strategies_label"
       android:theme="@android:style/Theme"></activity>
      <activity android:name=".Contact" android:label="@string/begin_label"
       android:theme="@android:style/Theme"></activity>
      <activity android:name=".Strat_What_Is_Anger" android:label="@string/strategies_label_what_is_anger"
       android:theme="@android:style/Theme"></activity>
      <activity android:name=".Strat_Use_Distraction" android:label="@string/strategies_label_distraction"
       android:theme="@android:style/Theme"></activity>
      <activity android:name=".Registration" android:label="@string/registration"
       android:theme="@android:style/Theme"></activity>

    </application>

</manifest> 
```

**日志猫：**

```
 05-19 17:08:17.111: ERROR/AndroidRuntime(27481): FATAL EXCEPTION: main
    05-19 17:08:17.111: ERROR/AndroidRuntime(27481): java.lang.NullPointerException
    05-19 17:08:17.111: ERROR/AndroidRuntime(27481):     at  com.B00512756.angertwo.Login$3.onClick(Login.java:76)
    05-19 17:08:17.111: ERROR/AndroidRuntime(27481):     at android.view.View.performClick(View.java:2408)
    05-19 17:08:17.111: ERROR/AndroidRuntime(27481):     at android.view.View$PerformClick.run(View.java:8816)
    05-19 17:08:17.111: ERROR/AndroidRuntime(27481):     at android.os.Handler.handleCallback(Handler.java:587)
    05-19 17:08:17.111: ERROR/AndroidRuntime(27481):     at android.os.Handler.dispatchMessage(Handler.java:92)
    05-19 17:08:17.111: ERROR/AndroidRuntime(27481):     at android.os.Looper.loop(Looper.java:123)
    05-19 17:08:17.111: ERROR/AndroidRuntime(27481):     at android.app.ActivityThread.main(ActivityThread.java:4627)
    05-19 17:08:17.111: ERROR/AndroidRuntime(27481):     at java.lang.reflect.Method.invokeNative(Native Method)
    05-19 17:08:17.111: ERROR/AndroidRuntime(27481):     at java.lang.reflect.Method.invoke(Method.java:521)
    05-19 17:08:17.111: ERROR/AndroidRuntime(27481):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
     05-19 17:08:17.111: ERROR/AndroidRuntime(27481):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
     05-19 17:08:17.111: ERROR/AndroidRuntime(27481):     at dalvik.system.NativeStart.main(Native Method)
    05-19 17:08:17.121: WARN/ActivityManager(58):   Force finishing activity com.B00512756.angertwo/.Login
    05-19 17:08:17.641: WARN/ActivityManager(58): Activity pause timeout for HistoryRecord{4505c768 com.B00512756.angertwo/.Login}
    05-19 17:08:19.731: INFO/Process(27481): Sending signal. PID: 27481 SIG: 9
    05-19 17:08:19.751: INFO/WindowManager(58): WIN DEATH: Window{4507d5b0 com.B00512756.angertwo/com.B00512756.angertwo.Login paused=false}
    05-19 17:08:19.751: INFO/ActivityManager(58): Process com.B00512756.angertwo (pid 27481) has died.
     05-19 17:08:19.921: WARN/InputManagerService(58): Got RemoteException sending setActive(false) notification to pid 27481 uid 10045
    05-19 17:08:20.341: DEBUG/dalvikvm(117): GC_EXTERNAL_ALLOC freed 484 objects / 27832 bytes in 383ms
    05-19 17:08:24.590: DEBUG/dalvikvm(197): GC_EXPLICIT freed 100 objects / 4336 bytes in 127ms
    05-19 17:08:28.610: WARN/ActivityManager(58): Activity destroy timeout for HistoryRecord{4505c768 com.B00512756.angertwo/.Login}
    05-19 17:08:29.650: DEBUG/dalvikvm(264): GC_EXPLICIT freed 58 objects / 2800 bytes in 140ms
    05-19 17:08:33.513: DEBUG/SntpClient(58): request time failed: java.net.SocketException: Address family not supported by protocol 
```

附加信息：

```
Login.setOnClickListener(new View.OnClickListener() {

            @SuppressWarnings("null")
            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                String name = txtUserName.getText().toString();
                String pwd = txtPassword.getText().toString();
                SQLiteDatabase regDB = null;

                //String[] columns = new String[]{COLUMN_ID, COLUMN_RATING, COLUMN_NAME };

                Cursor c = regDB.query(USER_INFO_TABLE, new String[] {
                        COLUMN_ID, COLUMN_RATING, COLUMN_NAME}, null, null, null, null, null);
                if(null!=c){

                      c.moveToFirst();

                     System.out.println("Cursor Size"+c.getCount());

                    }

                String result = "";

                int iRow = c.getColumnIndex(COLUMN_ID);
                int iRating = c.getColumnIndex(COLUMN_RATING);
                int iName = c.getColumnIndex(COLUMN_NAME);

                c.moveToLast();
                for (int i = c.getCount() - 1; i >= 0; i--) {

                    // Get the data
                    result = result + c.getString(iRow) + " " + c.getString(iRating) + " " + c.getString(iName) + "\n" ;
                    if("select * from USER_INFO_TABLE where UserName =" + "\""+ name + "\""+" and Password="+ "\""+ pwd != null );
                    { Intent j = new Intent();
                    j.setClassName("com.B00512756.angertwo",
                            "com.B00512756.angertwo.AngerprototypetwoActivity");

                    startActivity(j);}

                    // Move the cursor
                    c.moveToPrevious();
                    //return result;
                }
                c.close();

                }

            }); 
```

在这一行抛出空错误：

```
Cursor c = regDB.query(USER_INFO_TABLE, new String[] {
                        COLUMN_ID, COLUMN_RATING, COLUMN_NAME}, null, null, null, null, null); 
```

非常感谢您的帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T17:31:34.100

它在这里：

```
 05-19 17:08:17.111: ERROR/AndroidRuntime(27481):     at  com.B00512756.angertwo.Login$3.onClick(Login.java:76) 
```

找到 Login.java 的源代码，转到第 76 行，查看哪些对象实例被取消引用。其中之一是空的。

# javascript - 如何为 html5 画布制作 jQuery 函数

> ID：10667394
> 
> 赞同：2
> 
> 时间：2012-05-19T17:28:38.330
> 
> 标签：javascript, jquery, html, canvas, html5-canvas

考虑一个简单的画布作为

```
$(document).ready(function(){
draw();
});
    function draw() {  
      var canvas = document.getElementById("canvas");  
      if (canvas.getContext) {  
        var ctx = canvas.getContext("2d");  

        ctx.fillStyle = "rgb(200,0,0)";  
        ctx.fillRect (10, 10, 55, 50);  

        ctx.fillStyle = "rgba(0, 0, 200, 0.5)";  
        ctx.fillRect (30, 30, 55, 50);  
      }  
    } 
```

如何在 jQuery 函数中引入变量以使用定义的变量（例如颜色集）绘制多个画布。

事实上，我想用提供的变量替换画布 id 及其选项（如颜色）`draw(variables)`，例如`draw(canvas_id, color, ...)`.

**示例：（**用于在不同的 DOM 元素上创建多个画布）

```
 function draw(ccc) {  
      var canvas = document.getElementById(ccc);  
      if (canvas.getContext) {  
        var ctx = canvas.getContext("2d");  

        ctx.fillStyle = "rgb(200,0,0)";  
        ctx.fillRect (10, 10, 55, 50);  

        ctx.fillStyle = "rgba(0, 0, 200, 0.5)";  
        ctx.fillRect (30, 30, 55, 50);  
      }  
    } 

draw(canvas1);
draw(canvas2); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T17:36:49.947

尝试这个：

```
function draw(id, clr, fill) {  
      var canvas = document.getElementById(id);  
      if (canvas.getContext) {  
        var ctx = canvas.getContext("2d");  

        ctx.fillStyle = clr;  
        ctx.fillRect (fill);  

      }  
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T17:37:43.320

这是您可以做到的一种方法：

```
function draw(colors) {  
  var canvas = document.getElementById("canvas");  
  if (canvas.getContext) {  
    var ctx = canvas.getContext("2d");  

      for(var i=0; i < colors.length; i ++){
          ctx.fillStyle = colors[i];  
          ctx.fillRect (10*i, 10*i, 55, 50);
      } 
  }  
}

// define some colors in an array
var colors = ["rgb(200,0,0)","rgba(0, 0, 200, 0.5)","rgba(0, 128, 200, 0.5)"];

draw(colors); 
```

**编辑**

这是[jsfiddle示例](http://jsfiddle.net/Ufbrr/)

# ruby - Chris Pine Tut 积木和过程

> ID：10667400
> 
> 赞同：1
> 
> 时间：2012-05-19T17:29:40.607
> 
> 标签：ruby

我了解以下代码中发生的所有内容，但该部分除外`while output`：

```
1 def doUntilFalse firstInput, someProc
2  input  = firstInput
3  output = firstInput
4  
5  while output
6    input  = output
7    output = someProc.call input
8  end
9  
10  input
11 end
12 
13 buildArrayOfSquares = Proc.new do |array|
14  lastNumber = array.last
15  if lastNumber <= 0
16    false
17  else
18    array.pop                         #  Take off the last number...
19    array.push lastNumber*lastNumber  #  ...and replace it with its square...
20    array.push lastNumber-1           #  ...followed by the next smaller number.
21  end
22 end
23
24 alwaysFalse = Proc.new do |justIgnoreMe|
25  false
26 end
27
28 puts doUntilFalse([5], buildArrayOfSquares).inspect 
```

我大部分都理解`while`，但由于某种原因，我无法通过这段代码中的树木看到森林。有人可以解释`while output`第 5 行和第 8 行之间发生了什么。我毫不怀疑它非常简单，但我已经碰壁了。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T17:36:44.660

`output`将成为过程的返回值，该过程`someProc`又作为参数传递给第 #28 行，如`buildArrayOfSquares`. 反过来，这将`false`在某种情况下返回；发生这种情况时，`while`循环将终止。

详细来说，`firstInput`is `[5]`，它变成了第一个`input`。我们`buildArrayOfSquares`用调用`[5]`。由于`5`is not `<= 0`，我们`5`取出，放入`25`and `4`。

while 的下一次迭代`output`是`[25, 4]`。我们继续。回到`buildArrayOfSquares`. 脱掉`4`末端；推入`16`，然后`3`。`output`现在是`[25, 16, 3]`。

下一次，`output`是`[25, 16, 9, 2]`。然后`[25, 16, 9, 4, 1]`。然后`[25, 16, 9, 4, 1, 0]`。

下一次,`0 <= 0`并`buildArrayOfSquares`返回。循环终止。is still ，这可能是我们想要的。`false``output``input``[25, 16, 9, 4, 1, 0]`

# java - 将 ArrayList 字节转换为 byte[]

> ID：10667402
> 
> 赞同：3
> 
> 时间：2012-05-19T17:29:48.013
> 
> 标签：java

我正在寻找将字节的 ArrayList 转换为 byte[] 以便稍后使用这些字节创建文件。我已经搜索了如何做到这一点的高低，但仍然无法理解它。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T17:38:53.857

没有`ArrayList<byte>`. 当你声明一个时，你会得到一个`ArrayList<Byte>`. 因此，没有将其转换为`byte[]`. 您必须分配`byte[]`然后编写一个循环来复制这些值。

或者，您可以使用 fastutil 库，它确实有一个类似`ArrayList`存储的容器`byte`并且可以产生一个数组。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-19T17:46:46.083

```
ArrayList<Byte> in = ...;
int n = in.size();
byte[] out = new byte[n];
for (int i = 0; i < n; i++) {
  out[i] = in.get(i);
} 
```

我不认为标准库为上述提供任何快捷方式，只要您需要`byte[]`而不是`Byte[]`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T17:41:05.867

函数 toArray 应该可以工作，但我没有测试它的可能性..

```
 ArrayList<Byte> listArray = new ArrayList<Byte>();

    listArray.add((byte)1);
    listArray.add((byte)2);
    listArray.add((byte)3);

    Byte[] myArray = new Byte[3];
    listArray.toArray(myArray); 
```

我不知道[拳击](http://docs.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html)是否对你来说是个问题，如果你想在写入文件时使用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-19T18:20:07.590

如果您可以访问[Guava](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/primitives/Bytes.html#toArray%28java.util.Collection%29)，那只是[`Bytes.toArray(byteList)`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/primitives/Bytes.html#toArray%28java.util.Collection%29). （披露：我为 Guava 做出了贡献。）

# javascript - 使用纯 JavaScript 用鼠标重新排序 div 列表

> ID：10667407
> 
> 赞同：1
> 
> 时间：2012-05-19T17:30:31.190
> 
> 标签：javascript, html

这次我遇到了一个很大的挑战（至少对我来说）我想创建一个脚本，允许您重新排序 DIV 元素的垂直列表（包含其他子元素，应该与它们一起重新排序）。我不能使用任何框架，它必须是纯 JavaScript。我也不能使用 ondrag、ondragover 等（我听说与 Opera 不兼容）。它必须与所有主流浏览器兼容。

所以，我可以使用的是：**onmousedown、onmouseup、onmousemove**（以及其他类似的鼠标事件）。我还可以检测其他元素的大小和位置（例如每个 DIV 的大小和**位置**）**。**我需要一个如何以最佳方式完成的计划。你有什么建议？谢谢！

![图片](../Images/0a23e8ecf2db1f1cc1b80ba18d5f363c.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T19:43:06.223

如果您想要简单的 onclick 解决方案，那么我会编写一个简单的代码...仅供参考... [http://jsfiddle.net/xnXzF/5/](http://jsfiddle.net/xnXzF/5/)

或者你想用鼠标拖放，那么下面是有用的链接...... [http://luke.breuer.com/tutorial/javascript-drag-and-drop-tutorial.aspx](http://luke.breuer.com/tutorial/javascript-drag-and-drop-tutorial.aspx)

# android - 这个控件在android中叫什么名字

> ID：10667412
> 
> 赞同：0
> 
> 时间：2012-05-19T17:31:31.230
> 
> 标签：android

我可以知道下面放置的图像控件的名称，还请告诉我如何在我的应用程序中实现类似的控件。

长按联系人图像后，会出现此控件。

![在此处输入图像描述](../Images/a6dd068d8de6e32ab6237431faa9fb3c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T17:45:09.490

它被称为快速操作弹出窗口，它不是框架的默认设置……您必须自己创建它。

另一个[SO question](https://stackoverflow.com/a/3619450/1105376)询问了它，答案有几个指向页面的链接，告诉你如何去做（你甚至可以在那里下载几个代码存储库）。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T17:47:24.727

这不是内置控件，但您自己的控件并不难。

您所需要的只是一些精心制作的图像，外部可以是一个**LinearLayout**，其中包含另一个**LinearLayout**，它又包含 3 个**Buttons**，您就完成了控件的 UI。

其余的实现是计算坐标来放置这个控件。

# c# - 带有数据网格视图的 C#

> ID：10667414
> 
> 赞同：1
> 
> 时间：2012-05-19T17:31:41.783
> 
> 标签：c#, winforms

我有一个与 C# windows 应用程序连接的 MySQL 数据库。
我的问题是我有一个带有 2 个按钮和 datagridview 的表单。一个按钮是`exit`，另一个是`clear`。
使用按钮`clear`我想清除数据库中的所有数据，但我不能这样做。
我唯一做的就是清除条目，然后当我重新打开实体时，实体就在那里！

代码是：

```
private void button3_Click(object sender, EventArgs e)
{ //clear balance
    projectpizzaDataSet ds = new projectpizzaDataSet();
    projectpizzaDataSetTableAdapters.balanceTableAdapter daCust = new projectpizzaDataSetTableAdapters.balanceTableAdapter();

    for (int i = 0; i < dataGridView1.Rows.Count; i++)
    {
        dataGridView1.Rows.RemoveAt(i); //delete error 
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T23:05:36.913

谢谢大家，但解决方案是：

```
private void button3_Click(object sender, EventArgs e) {
    //clear balance
    projectpizzaDataSet ds = new projectpizzaDataSet();
    projectpizzaDataSetTableAdapters.balanceTableAdapter daCust = new projectpizzaDataSetTableAdapters.balanceTableAdapter();

    while (dataGridView1.Rows.Count > 0 {
        dataGridView1.Rows.RemoveAt(0);
    }

    this.balanceTableAdapter.Update(projectpizzaDataSet.balance);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T19:07:53.760

要从数据库中删除记录，您需要使用 DELETE 查询。[在这里](http://msdn.microsoft.com/pt-br/library/ms189835.aspx "这里")您可以找到如何使用 DELETE 命令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T19:48:39.230

您必须[从 DataSet 中删除行](http://msdn.microsoft.com/en-us/library/feh3ed13%28v=vs.100%29.aspx)，然后[更新 TableAdapter](http://msdn.microsoft.com/en-us/library/ms233819%28v=vs.100%29.aspx)

```
private void button3_Click(object sender, EventArgs e)
{     
    foreach(DataRow row in ds.Tables["TableName"].Rows)
    {
        row.Delete();
    }

    daCust.Update(ds);
} 
```

# string - 如何在 PowerShell 中从此数组中获取唯一值？

> ID：10667416
> 
> 赞同：6
> 
> 时间：2012-05-19T17:32:18.530
> 
> 标签：string, powershell, unique

为什么下面的代码返回`$null`？我正在尝试仅存储唯一值。

```
$DailyPathsToDelete = @("C:\temp\IMG000483\","C:\temp\IMG000483\")
$DailyPathsToDelete = Select-Object $DailyPathsToDelete -Unique 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-20T16:32:06.443

**简短的回答：**

要获得所有唯一路径，您应该通过管道`$DailyPathsToDelete`连接`Select-Object`并设置`Unique`开关。

```
$DailyPathsToDelete = $DailyPathsToDelete | Select-Object -Unique 
```

**更长的答案：**

***1\. 为什么它不起作用***

运行脚本后`$DailyPathsToDelete`等于`$null`因为（在脚本的第二行中）`$DailyPathsToDelete`绑定到参数`Property`。**没有指定**cmdlet的参数`InputObject`，这就是调用的结果 is 的原因。`Select-Object`**`Select-Object``$null`**

 **这可以通过跟踪您的表达式轻松验证：

```
Trace-Command -psHost -Name ParameterBinding { Select-Object $DailyPathsToDelete -Unique} 
```

给出：

```
DEBUG: ParameterBinding Information: 0 : BIND NAMED cmd line args [Select-Object]
DEBUG: ParameterBinding Information: 0 :     BIND arg [True] to parameter [Unique]
DEBUG: ParameterBinding Information: 0 :         COERCE arg to     [System.Management.Automation.SwitchParameter]
DEBUG: ParameterBinding Information: 0 :             Parameter and arg types the same, no coercion is needed.
DEBUG: ParameterBinding Information: 0 :         BIND arg [True] to param [Unique]     SUCCESSFUL
DEBUG: ParameterBinding Information: 0 : BIND POSITIONAL cmd line args [Select-Object]
DEBUG: ParameterBinding Information: 0 :     BIND arg [System.Object[]] to parameter [Property]
DEBUG: ParameterBinding Information: 0 :         BIND arg [System.Object[]] to param [Property] SUCCESSFUL
DEBUG: ParameterBinding Information: 0 : MANDATORY PARAMETER CHECK on cmdlet [Select-Object]
DEBUG: ParameterBinding Information: 0 : CALLING BeginProcessing
DEBUG: ParameterBinding Information: 0 : CALLING EndProcessing 
```

***2.如何解决***

使用`Select-Object`：

```
$DailyPathsToDelete = $DailyPathsToDelete | Select-Object -Unique 
```

使用`Sort-Object`：

```
$DailyPathsToDelete = $DailyPathsToDelete | Sort-Object -Unique 
```

***3\. 如何不修复它***

我建议不要`Get-Unique`在您的场景中使用，因为 Windows 本地文件系统（NTFS、FAT 和变体）不区分大小写。

例子：

```
$DailyPathsToDelete = @("C:\temp\IMG000483\","C:\Temp\IMG000483\")
PS C:\> $DailyPathsToDelete | get-unique
C:\temp\IMG000483\
C:\Temp\IMG000483\ 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-19T17:37:22.427

你可以试试 ：

```
$unique = $DailyPathsToDelete | Get-Unique 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-20T06:26:57.013

1.  使用 Get-Unique，gotcha - Get-Unique 区分大小写，您还必须先对列表进行排序！

    `$DailyPathsToDelete = $DailyPathsToDelete | Sort-Object | Get-Unique`

2.  使用选择对象

    `$DailyPathsToDelete = $DailyPathsToDelete | Select-Object -Unique`

3.  使用排序对象

    `$DailyPathsToDelete = $DailyPathsToDelete | Sort-Object -Unique`**

# javascript - 谷歌语音识别搜索文本问题

> ID：10667417
> 
> 赞同：0
> 
> 时间：2012-05-19T17:32:35.957
> 
> 标签：javascript, html, css

默认文本是输入您的关键字，我点击谷歌语音识别并说 facebook api。然后 facebook api 与这样的默认文本一起打印。输入您的文本 facebook api ...谷歌浏览器仅适用

```
 <form method="GET" name="search" action="index2.php"> 
   <table cellpadding="0px" cellspacing="0px"><tr><td>
   <input type="text" name="q" value="Enter your keywords here" 
 onfocus="if (this.value == 'Enter your keywords here') {this.value = '';}" onblur="if      (this.value == '') {this.value = 'Enter your keywords here';}"
x-webkit-speech style="left:9px;top:4px;position:relative;background-   color:#fafafa;border:1px solid;color:#333;font-size:1.4em;width:400px;height:28px"; />
</td><td><input type="submit" value="Search" name="search" id="searchbutton">
</td></tr></table></form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T17:39:57.857

这是因为 webkit 语音事件不会触发输入`focus`事件。你应该听`webkitspeechchange`事件。像这样：

```
onwebkitspeechchange = "this.value = this.value.replace('Enter your keywords here','')"; 
```

# php - 如何使用 php,jquery 在页面中添加谷歌地图

> ID：10667419
> 
> 赞同：-2
> 
> 时间：2012-05-19T17:32:37.743
> 
> 标签：php, javascript, codeigniter-2

我正在做一个项目..我必须添加我所在位置的谷歌地图。我是新手，所以任何帮助都将不胜感激。我知道有很多教程，但我找不到最好的。在此先感谢 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T17:43:19.687

你可能想从[这里](http://maps.google.com/help/maps/getmaps/plot-one.html)开始。这是来自 Google 的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-23T11:19:40.473

Google Maps API 非常强大，但您需要了解有关 Javascript (Jquery)、PHP、mySql 等的详细信息。此外，您还必须熟悉 Google Map 服务。

如果你没有足够的时间，你可以看看这个 PHP[脚本](http://googlemap.webmountain.net/php/index.php)。它是免费的，您可以轻松地将谷歌地图嵌入您的 PHP 网站。此外，无需编码即可管理您的地图。

# c# - 计算驱动器上的文件数

> ID：10667420
> 
> 赞同：5
> 
> 时间：2012-05-19T17:32:51.807
> 
> 标签：c#, io

我需要我的程序来计算磁盘驱动器上的文件数。

最快的方法是什么？

Directory.GetFiles() 不是替代方法，因为它非常慢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T17:47:23.353

您是否尝试过导入`kernel32.dll`并使用它？

有人在这里发布了一个很好的实现示例：[https](https://stackoverflow.com/a/724184/912851) ://stackoverflow.com/a/724184/912851 。可能值得一看。

**编辑：** 我一生中看到的最快的是[这个应用程序](http://www.voidtools.com/download.php)。它使用 ntfs 日志。并在几秒钟内列出了我硬盘上的数百万个文件。我认为他们在 C++ 或 c 上有一个 sdk 和源代码。也许您可以创建一个托管 dll 并在 c# 上使用？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T22:59:08.820

您可以读取驱动器 USN 日志，这非常快，但您需要管理员权限

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-19T17:44:14.540

```
Func<string, int> files = null;
files = p => Directory.GetFiles(p).Length() + Directory.GetDirectories(p).Select(p1 => files(p1));

int count = files(@"c:\"); 
```

可怕但 linqy！

# php - php解析错误不会显示

> ID：10667421
> 
> 赞同：3
> 
> 时间：2012-05-19T17:32:59.817
> 
> 标签：php

我正在运行 ubuntu 10.04 + nginx + php-fpm 5.4

如果我`display_errors = On`在 php.ini 中设置所有错误都会打印出来。如果相反，我将其设置为关闭，然后使用 ini_set('display_errors, '1'); 直接在脚本中它们也会显示，但不会显示解析错误，只是一个空白页。我也尝试使用 error_reporting 和 E_STRICT，但我找不到方法！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-19T17:35:09.387

如果你禁用`display_errors`它`php.ini`，然后在你的 PHP 脚本中启用它`ini_set()`，**它只会在包含该`ini_set()`调用的行被执行**后启用。

解析错误**甚至在 PHP 脚本启动之前就**发生了——在解析 PHP 文件时*（因此称为“解析错误”名称）*。

这意味着它们发生在您`ini_set()`甚至有机会被执行之前 - 这意味着，在您的情况下，`display_errors`当解析错误发生时未启用；因此，您不会得到任何显示。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-04-21T22:34:14.893

**在回答这个问题多年**后，我在这里，但我找到了解决这个问题的方法。

对于我正在编写的脚本，我创建了第二个脚本，其中包含 ini_set() 指令，然后是我**真正**正在处理的脚本的包含。

与，这里是 test_run.php

```
<?php

ini_set('display_errors', '1');
ini_set('error_reporting', E_ALL);

include('./my_script.php');

?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-19T17:48:34.510

除了打开`display_errors`，您还可以查看错误日志。通常，运行 Ubuntu + apache，您的错误日志将位于`/var/log/apache2/error_log`. 要实时观看正在发生的事情，您可以运行类似`tail -f /var/log/apache2/error_log`.

有时这比使用 php 设置更简单。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-06T16:29:56.630

**您必须在 php.ini 文件中启用错误显示 **

我已添加（未注释）以下行，现在正在显示解析错误。

```
error_reporting 
Default Value: E_ALL & ~E_NOTICE & ~E_STRICT & ~E_DEPRECATED 
Development Value: E_ALL
Production Value: E_ALL & ~E_DEPRECATED & ~E_STRICT 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-19T17:35:11.400

试试`error_reporting(E_ALL);`。或[文档](http://www.php.net/manual/en/function.error-reporting.php)

# javascript - “var”全局定义的变量范围是什么？

> ID：10667425
> 
> 赞同：0
> 
> 时间：2012-05-19T17:33:31.837
> 
> 标签：javascript

在 Javascript 中，如果我在函数之外的 javascript 中使用 var 声明变量

```
var foo = 1;
var bar = 2;

function someFunction() {
    ....
} 
```

这些变量是否在文档或窗口的范围内？此外，为什么这很重要？我知道如果一个人声明一个没有 var 的变量，那么这个变量是全局的。

有没有一种简单的方法可以测试变量是否在文档或窗口的范围内？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T17:35:18.770

`var`将变量的范围限制为定义它的函数，因此在顶层定义的变量 with`var`将有效地具有全局范围。

如果您将值分配给尚未限定范围的变量，`var`那么无论您在哪里定义它，它都会成为全局变量。

这里有一篇关于 javascript 作用域的好文章：[JavaScript 中变量的作用域是什么？](https://stackoverflow.com/questions/500431/javascript-variable-scope)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T17:37:52.880

当你在 JavaScript 中声明一个函数时，它会创建一个作用域。

当你声明一个变量时，它必须有一个`var`. 确定它属于什么范围以及它在`var`哪里可见。如果它没有`var`，那么它是对变量的“赋值”，并且浏览器假定具有该名称的变量存在于外部作用域中。

当分配发生时，浏览器向外搜索直到到达全局范围。如果浏览器在全局范围内没有看到赋值的变量，就会在全局范围内声明（这样不好）

例如，将以下内容作为范围可见性的演示，而*不是实际的工作功能*：

```
//global variables
var w = 20
var x = 10

function  foo(){
    function bar(){

        //we assign x. since it's not declared with var
        //the browser looks for x in the outer scopes
        x = 0;

        function baz(){

            //we can still see and edit x here, turning it from 0 to 1
            x = 1;

            //redeclaring a variable makes it a local variable
            //it does not affect the variable of the same name outside
            //therefore within baz, w is 13 but outside, it's still 20
            var w = 13;

            //declaring y inside here, it does not exist in the outer scopes
            //therefore y only exists in baz
            var y = 2;

            //failing to use var makes the browser look for the variable outside
            //if there is none, the browser declares it as a global                
            z = 3;
        }
    }
}

//w = 20         - since the w inside was "redeclared" inside 
//x = 1          - changed since all x operations were assigments
//y = undefined  - never existed in the outside 
//z = 3          - was turned into a global 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T17:35:31.140

```
var foo = 1;

window.foo === foo; 
```

JavaScript 是一种函数式语言，因此在函数范围内声明的任何变量都只能在该函数中使用。

JS 实际上会遍历每个函数的作用域并查找声明的变量。

```
function setGlobal() {
    bar = 1; // gets set as window.bar because setGlobal does not define it
}
setGlobal();

// logs true and 1
console.log(window.bar === bar, bar); ​ 
```

[http://jsfiddle.net/kXjrF/](http://jsfiddle.net/kXjrF/)

所以...

```
function logGlobal() {
    var bar;
    console.log( foo, window.foo ) // undefined, undefined
    function setGlobal() {
        // window.foo is now set because logGlobal did not define foo
        foo = 1;  
        bar = 2; // logGlobal's bar not window.bar
        function makePrivate() {
           var foo = 3; // local foo
           console.log( foo ); // logs 3
        }
        makePrivate(); // logs 3
    }
    setGlobal();
    console.log( foo, window.foo ); // logs 1, 1

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T17:41:54.737

由于 JavaScript 只有函数作用域，因此`var`关键字定义的变量的作用域是包含函数。

您可以通过在浏览器中打开 JavaScript 控制台（或直接在您的代码中）轻松检查全局范围，然后键入：

```
varRef && console.log(varRef) 
```

# c++ - C++ WinAPI 'AnimateWindow' 尚未声明

> ID：10667431
> 
> 赞同：1
> 
> 时间：2012-05-19T17:34:55.037
> 
> 标签：c++, winapi

我正在尝试制作一个 WinAPI C++ 程序，但是我遇到了以下错误：

```
error: 'AW_SHOW' was not declared in this scope
error: 'AW_HIDE' was not declared in this scope
error: 'AW_BLEND' was not declared in this scope
error: 'AnimateWindow' was not declared in this scope
error: 'SW_MINIMISE' was not declared in this scope 
```

我试过使用 ::AnimateWindow 但是我收到了同样的错误。这是我的头文件，包含在 windows.h 之前

```
#ifdef WINVER
#undef WINVER
#endif

#ifdef _WIN32_WINNT
#undef _WIN32_WINNT
#endif

#define WINVER 0x0500
#define _WIN32_WINNT 0x0500 
```

我还尝试将变量设置为 0x0502，并在 Winuser.h 中为 AnimateWindow 注释掉预处理器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T04:55:56.417

想通了。

发生错误的文件包含在我的 main.cpp 中，但是它包含在 main.cpp 中的 windows.h 之后。

# java - 并排编辑字段

> ID：10667445
> 
> 赞同：0
> 
> 时间：2012-05-19T17:36:17.563
> 
> 标签：java, user-interface, blackberry, blackberry-eclipse-plugin, blackberry-editfield

有人可以让我知道为什么我不能将 2 EditFields 与以下代码并排放置吗？我可以并排放置 3 个按钮，但由于某种原因，我无法让 EditFields 为我工作。任何帮助将不胜感激。

```
 //Bin Height
    HorizontalFieldManager hManagerBinHeight = new HorizontalFieldManager(FIELD_BOTTOM);

    LabelField lblRadiusOfBin = new LabelField("Radius of Bin: ", LabelField.FIELD_LEFT);

    EditField txtRadiusFeet = new EditField("Feet: ", "", 3, BasicEditField.FILTER_NUMERIC);
    EditField txtRadiusInches = new EditField("Inches: ", "", 2, BasicEditField.FILTER_NUMERIC);

    hManagerBinHeight.add(lblRadiusOfBin);
    hManagerBinHeight.add(txtRadiusFeet);
    hManagerBinHeight.add(txtRadiusInches);

    add(hManagerBinHeight); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T05:45:49.327

`EditField`s 默认情况下会消耗布局期间传递给它们的所有可用宽度。因此，第二个 EditField 的可用宽度为 0。为了并排布置它们，您必须：

1.  在父母的`sublayout()`方法中手动布局它们（或`layout()`在的情况下`Manager`）。
2.  覆盖 EditField 的`layout()`方法并使其使用固定宽度而不是所有宽度。

**选项 1**：

```
 HorizontalFieldManager hManagerBinHeight = new HorizontalFieldManager(FIELD_BOTTOM);

    LabelField lblRadiusOfBin = new LabelField("Radius of Bin: ", LabelField.FIELD_LEFT);

    final EditField txtRadiusFeet = new EditField("Feet: ", "", 3, BasicEditField.FILTER_NUMERIC);
    txtRadiusFeet.setBorder(BorderFactory.createRoundedBorder(new XYEdges()));
    final EditField txtRadiusInches = new EditField("Inches: ", "", 2, BasicEditField.FILTER_NUMERIC);
    txtRadiusInches.setBorder(BorderFactory.createRoundedBorder(new XYEdges()));

    HorizontalFieldManager hfm = new HorizontalFieldManager(USE_ALL_WIDTH) {
        protected void sublayout(int maxWidth, int maxHeight) {
            layoutChild(txtRadiusFeet, maxWidth/2, maxHeight);
            layoutChild(txtRadiusInches, maxWidth/2, maxHeight);
            setPositionChild(txtRadiusFeet, 0, 0);
            setPositionChild(txtRadiusInches, txtRadiusFeet.getWidth(), 0);

            setExtent(maxWidth, txtRadiusFeet.getHeight());
        };
    };
    hfm.add(txtRadiusFeet);
    hfm.add(txtRadiusInches);

    hManagerBinHeight.add(lblRadiusOfBin);
    hManagerBinHeight.add(hfm);

    add(hManagerBinHeight); 
```

**选项 2：**

```
HorizontalFieldManager hManagerBinHeight = new HorizontalFieldManager(FIELD_BOTTOM);

    LabelField lblRadiusOfBin = new LabelField("Radius of Bin: ", LabelField.FIELD_LEFT);

    EditField txtRadiusFeet = new EditField("Feet: ", "", 3, BasicEditField.FILTER_NUMERIC) {
        // Limit the width of the edit field to be the half of the available width
        protected void layout(int width, int height) {
            super.layout(width/2, height);
        }
    };
    txtRadiusFeet.setBorder(BorderFactory.createRoundedBorder(new XYEdges()));

    EditField txtRadiusInches = new EditField("Inches: ", "", 2, BasicEditField.FILTER_NUMERIC);
    txtRadiusInches.setBorder(BorderFactory.createRoundedBorder(new XYEdges()));

    HorizontalFieldManager hfm = new HorizontalFieldManager(USE_ALL_WIDTH);
    hfm.add(txtRadiusFeet);
    hfm.add(txtRadiusInches);

    hManagerBinHeight.add(lblRadiusOfBin);
    hManagerBinHeight.add(hfm);

    add(hManagerBinHeight); 
```

结果

![在此处输入图像描述](../Images/6e802e8186d705480b31857ad02a4c30.png)

# jquery - 没有调用 document.ready 中的 jquery 函数

> ID：10667446
> 
> 赞同：1
> 
> 时间：2012-05-19T17:36:20.963
> 
> 标签：jquery, document-ready

我是 jquery 的新手，看了一些教程，但我什至无法开始。看起来 $(document).ready 下的东西永远不会被调用。这是我的 HTML 的前几行：

```
<html>
<head>
<title>foobar</title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script type=\"text/javascript\"> 
$(document).ready(function(){
   alert("READY!");
   $("*").click( function() {
       alert("CLICKED!");
   });
}); </script>
...(some other scripts)
</head>... 
```

我觉得这是尽可能基本的，但是当我加载或单击页面中的某些内容时，我没有收到任何警报。从外部文件加载 jquery 也不起作用。我正在使用 Firefox 9。我不知道从哪里开始，而且我似乎无法在网上找到任何可以解决我问题的东西。有谁知道导致这种情况的原因可能是什么？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T17:38:36.570

您的脚本类型格式不正确。您可以通过删除反斜杠来修复它，但由于所有浏览器都默认使用 javascript，因此您可以完全省略它：

```
<script type=\"text/javascript\">

<script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T17:37:00.247

`<script type=\"text/javascript\">`应该是`<script type="text/javascript">`。因为浏览器没有问题。

# android - ArrayAdapter 和线程

> ID：10667447
> 
> 赞同：0
> 
> 时间：2012-05-19T17:36:25.397
> 
> 标签：android, multithreading, android-arrayadapter, listactivity

我想知道是否可以在适配器迭代时使用另一个线程加载图像。我的意思是适配器将管理文本数据，listactivity 将显示它们，但随后将加载（每行的）图像。可能吗？当我填充 arrayadapter 时，如果我需要显示图标需要很长时间（图像是从网络加载的）

# android - 在安卓中滑动

> ID：10667450
> 
> 赞同：1
> 
> 时间：2012-05-19T17:36:50.683
> 
> 标签：android

如果您安装了大多数媒体播放器，例如 ES File Explorer 等文件管理器，用户触摸屏幕并左右移动，页面就会左右移动。这就像在 2.3 中内置的 android 音乐播放器，当用户下一个音乐时。我该如何实施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T17:39:30.407

您可以使用`ViewPager`小部件来做到这一点。请注意，它是兼容性库的一部分，因此可以从 API4 及更高版本使用。否则，您总是可以手动实现所有这些。

[http://developer.android.com/reference/android/support/v4/view/ViewPager.html](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T22:54:40.353

您正在考虑`ViewPager`小部件。如 K-ballo 所述，这在 Android 支持包中可用。默认情况下不包含标题/标签，但是...如果您希望您的页面具有标题或标签（即 Google Play 商店），您可以查看 Jake Wharton 的[`ViewPagerIndicator`](http://viewpagerindicator.com/).

# ssl - Erlang Apple Push 通知在断开连接之前没有收到响应错误

> ID：10667451
> 
> 赞同：2
> 
> 时间：2012-05-19T17:36:55.500
> 
> 标签：ssl, erlang, apple-push-notifications, gen-server

我目前正在测试我的推送通知模块。当设备令牌无效时，它会断开连接...

根据[Apple推送通知开发人员文档](http://developer.apple.com/library/ios/#DOCUMENTATION/NetworkingInternet/Conceptual/RemoteNotificationsPG/CommunicatingWIthAPS/CommunicatingWIthAPS.html)，我应该在Apple推送服务器断开之前收到一个错误响应数据包......

问题是我断开了连接，但在那之前我没有在 Socket 上得到任何东西，我需要知道推送失败是因为推送格式错误（所以我可以修复错误），还是无效的设备令牌（所以我可以从数据库中删除它）。

这是我的代码：

```
-module(pushiphone).
-behaviour(gen_server).

-export([start/1, init/1, handle_call/3, handle_cast/2, code_change/3, handle_info/2, terminate/2]).

-import(ssl, [connect/4]).
-record(push, {socket, state, cert, key}).

start(Provisioning) ->
    gen_server:start_link(?MODULE, [Provisioning], []).

init([Provisioning]) ->
    gen_server:cast(self(), {connect, Provisioning}),
    {ok, #push{}}.

send(Socket, DT, Payload) ->
    PayloadLen = length(Payload),
    DTLen = size(DT),
    PayloadBin = list_to_binary(Payload),
    Packet = <<0:8, 
           DTLen:16/big, 
           DT/binary, 
           PayloadLen:16/big, 
           PayloadBin/binary>>,
    ssl:send(Socket, Packet).

handle_call(_, _, P) ->
    {noreply, P}.

handle_cast({connect, Provisioning}, P) ->
    case Provisioning of
    dev -> Address = "gateway.sandbox.push.apple.com";
    prod -> Address = "gateway.push.apple.com"
    end,
    Port = 2195,
    Cert="/apns-" ++ atom_to_list(Provisioning) ++ "-cert.pem",
    Key="/apns-" ++ atom_to_list(Provisioning) ++ "-key.pem",
    Options = [{certfile, Cert}, {keyfile, Key}, {password, "********"}, {mode, binary}, {active, true}],
    Timeout = 1000,
    {ok, Socket} = ssl:connect(Address, Port, Options, Timeout),
    {noreply, P#push{socket=Socket}};
handle_cast(_, P) ->
    {noreply, P}.

handle_info({ssl, Socket, Data}, P) ->
    <<Command, Status, SomeID:32/big>> = Data,
    io:fwrite("[PUSH][ERROR]: ~p / ~p / ~p~n", [Command, Status, SomeID]),
    ssl:close(Socket),
    {noreply, P};
handle_info({push, message, DT, Badge, [Message]}, P) ->
    Payload = "{\"aps\":{\"alert\":\"" ++ Message ++ "\",\"badge\":" ++ Badge ++ ",\"sound\":\"" ++ "msg.caf" ++ "\"}}",
    send(P#push.socket, DT, Payload),
    {noreply, P};
handle_info({ssl_closed, _SslSocket}, P) ->
    io:fwrite("SSL CLOSED !!!!!!~n"),
    {stop, normal, P};
handle_info(AnythingElse, P) ->
    io:fwrite("[ERROR][PUSH][ANYTHING ELSE] : ~p~n", [AnythingElse]),
    {noreply, P}.

code_change(_, P, _) ->
    {ok, P}.

terminate(_, _) ->
    ok. 
```

当有效负载和 deviceToken 都正确时，它工作得很好。如果 deviceToken 无效，它只会断开连接。

有谁可以发现这个问题？因为经过4个小时的搜索，我才发现我显然不能！

这是错误响应表：

```
Status code     Description
0           No errors encountered
1           Processing error
2           Missing device token
3           Missing topic
4           Missing payload
5           Invalid token size
6           Invalid topic size
7           Invalid payload size
8           Invalid token
255         None (unknown) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T20:33:08.670

您似乎正在使用您链接到的苹果文档中图 5-1 定义的*简单通知格式*`send()`（根据您的功能判断）。使用此格式时，当请求格式错误时不会提供错误响应 - 您只需断开连接即可。

要获得错误响应，您应该使用图 5-2 中详述的*增强通知格式。*

# proxy - 使用代理服务器与本地主 IP

> ID：10667455
> 
> 赞同：0
> 
> 时间：2012-05-19T17:37:30.377
> 
> 标签：proxy, ip, ip-address

假设我有一个分配了 10 个 IP 的 squid 代理服务器（本地在我的 gigE 网络上）。

假设我有一个不同的服务器，分配了不同的 10 个 IP，运行 ac# 应用程序，该应用程序运行 10 个线程，每个线程用于抓取网站。每个线程使用不同的分配 IP 来发送其 HTTP 请求。

我的问题是，如果我在该应用程序中运行 10 个线程，其中每个线程使用来自代理服务器的代理 IP 来抓取网站。我还在该应用程序中尝试了 10 个线程，其中每个线程直接在服务器上使用本地分配的 IP 来抓取站点。从一个页面到另一个页面，使用代理 IP 的线程，或使用来自其自己服务器的直接 IP 的线程，哪个会更快地爬取站点？

我会想象服务器上的直接 IP，因为代理服务器具有固有的延迟，但它证明代理服务器稍微快一些。所以我很困惑。也许是因为使用直接 IP 会使用一些处理能力，并且通过使用代理服务器，它能够将该处理外包给代理服务器？非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T10:28:16.900

您提到有 10 个不同的线程“抓取该站点”，听起来您有 10 个线程抓取同一站点的不同页面。

在这种情况下，使用代理通常更快。请记住，大多数 html 页面看起来像这样：

```
foo1.html
  |
  +--- Link: somefile01.xml
  |
  +--- Link: somestlyesheet.css
  |
  +--- Image: somepicture01.jpg
  |
  +--- Image: somepicture02.jpg

foo2.html
  |
  +--- Link: somefile01.xml
  |
  +--- Link: somestlyesheet.css
  |
  +--- Image: somepicture01.jpg
  |
  +--- Image: somepicture03.jpg 
```

在真正的网络浏览器拉取 之后，它会为、、和（通常并行）`foo1.html`执行 http GET 。据推测，如果您从同一个站点抓取页面，您正在抓取的页面在内容上有一些共同的重叠（例如上面显示的和）。`somefile01.xml``somestylesheet.css``somepicture01.jpg``somepicture02.jpg``foo1.html``foo2.html`

如果您在代理上启用了 http 对象缓存，您的线程将更快，因为您将获得这些文件的一部分的缓存命中。如果缓存命中，则文件会从 LAN 上的 Squid 缓存本地传送到您的代码，而不必每次都从远程服务器获取它。

如果您有 10 个线程都爬取不同的站点，那么您应该期望性能较慢，除非它们包含的唯一文件是`jquery.js`. 顺便说一句，谷歌为网络开发人员提供了一种使用他们的缓存来加载几个常见的 javascript 文件的方法。

# html - 无法扩展容器 DIV

> ID：10667456
> 
> 赞同：0
> 
> 时间：2012-05-19T17:37:31.947
> 
> 标签：html, css

这里有一个演示> [http://jsfiddle.net/AndyMP/4hzXe/](http://jsfiddle.net/AndyMP/4hzXe/)

我无法弄清楚为什么容器 DIV 没有扩展。

CSS

```
#container { 
position: relative;
width: 400px;
border: solid 1px #333;
padding: 20px;
}
#left { 
position: relative;
float: left;
width: 100px;
height: 100px;
border: 1px solid blue;
margin: 10px;
overflow: hidden;
} 
```

HTML

```
<div id="container">

<div id="left"></div>
<div id="left"></div>
<div id="left"></div>
<div id="left"></div>
<div id="left"></div>
<div id="left"></div>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T17:51:31.593

你需要清除浮动。[http://jsfiddle.net/4hzXe/2/](http://jsfiddle.net/4hzXe/2/)

添加行`overflow: hidden;`，你可以使用[clearfix](http://nicolasgallagher.com/micro-clearfix-hack/)。我大部分时间都使用 clearfix 解决方案

```
#container { /* Preview content box */
    position: relative;
    width: 400px;
    border: solid 1px #333;
    padding: 20px;
    overflow: hidden;
} 
```

我还将 id 更改`id="left"`为 a `class="left"`，id 应该只在页面上出现一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T17:53:16.563

您需要一种技术来包含您的浮动。至少有两种可能：

1.  [包含花车和花车](http://jsfiddle.net/4hzXe/4/)
2.  [用 clear 包围浮动](http://jsfiddle.net/4hzXe/5/)

哪种方法最适合您？（我的建议）

1.  如果你有一个可以承担清理工作的元素（例如 hr），请使用它。

2.  如果可以设置父级的宽度，请将 float 属性与宽度结合使用（**这是您的情况**）。

3.  否则使用 E​​asyclearing

4.  在简单的情况下使用溢出属性

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T18:21:57.477

尝试这个

```
.left { 
    position: relative;
    display: inline-block;
    width: 100px;
    height: 100px;
    border: 1px solid blue;
    margin: 10px;
    overflow: hidden;
} 
```

`<div id="left"></div>`变成`<div class="left"></div>`

演示：http: [//jsfiddle.net/4hzXe/6/](http://jsfiddle.net/4hzXe/6/)

# ruby-on-rails - 日期选择器不保存日期

> ID：10667458
> 
> 赞同：0
> 
> 时间：2012-05-19T17:37:36.393
> 
> 标签：ruby-on-rails, datepicker, has-many-through

我有一个表和表`Writing`之间的连接表。我的模型是`User``Exercise`

```
class Writing < ActiveRecord::Base
    belongs_to :user
    belongs_to :exercise
    attr_accessible :writing_date, :exercise_id
end 
```

我遵循了 has_many 的本[指南](http://guides.rubyonrails.org/association_basics.html)：通过协会

我的桌子出生在

```
class CreateWritings < ActiveRecord::Migration
  def self.up
    create_table :writings do |t|
      t.integer :user_id
      t.integer :exercise_id
      t.date :writing_date
      t.timestamps
    end
  end
  def self.down
    drop_table :writings
  end
end 
```

我的 writings_controller 是：

```
 # encoding: utf-8
 class WritingsController < ApplicationController
    def create
        @writing = current_user.writings.build(:exercise_id => params[:exercise_id], :writing_date => params[:writing_date])
       if @writing.save
            flash[:notice] = "added writing."
            redirect_to root_url
       else
            flash[:error] = "not added."
            redirect_to root_url
       end
    end
    def new
       @writing = current_user.writings.new
       @exercise = Exercise.all
       respond_to do |format|
          format.html # new.html.erb
          format.xml  { render :xml => @writing }
       end
    end
end 
```

我的 _form.html.erb 就像

```
 <%= form_for(@writing) do |f| %>
  <div class="field">
   <%= f.text_field :writing_date %>
  </div>
  <div class="actions">
    <%= f.submit "add a writing", :class => "awesome custom red" %>
  </div>
 <% end %> 
```

问题？数据未从 writing_date 保存到数据库。我正在使用 jQuery 和 datepicker。我跟着日志

```
Started POST "/writings" for 127.0.0.1 at 2012-05-19 19:55:23 +0300
  Processing by WritingsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"q3xXMxVd9PsI346ph9CILLm8x74uCFokz3/2yOA0CeI=", "exercise_id"=>"7", "writing"=>{"writing_date"=>"2012-05-19"}, "commit"=>"add a writing"} 
```

一切都好，但是...

```
AREL (0.3ms)  INSERT INTO "writings" ("user_id", "exercise_id", "writing_date", "created_at", "updated_at") VALUES (1, 7, NULL, '2012-05-19 16:55:23.719410', '2012-05-19 16:55:23.719410') 
```

`writing_date`一片空白。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T18:02:08.867

我认为您需要将 datepicker 配置为另一种格式。例如：

```
$(".datepicker").datepicker({
            dateFormat : "dd MM yy"
}); 
```

Ruby 日期格式可以在这里找到：[http](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/Date.html) ://www.ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/Date.html 和相关问题：[Rails 3.1 text_field form helper and jQuery datepicker date format](https://stackoverflow.com/questions/8103323/rails-3-1-text-field-form-helper-and-jquery-datepicker-date-format)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T18:08:59.667

根据您的参数，`"writing"=>{"writing_date"=>"2012-05-19"}`,`"writing_date"`在`"writing"`哈希下，但您仅传递`params[:writing_data]`参数；这就是为什么它不起作用。

```
@writing = current_user.writings.build(:exercise_id => params[:exercise_id], :writing_date => params[:writing_date]) 
```

> 而不是 params[:writing_date] 你应该使用 params[:writing][:writing_date]

因此，您必须通过以下方式对其进行更改：

```
@writing = current_user.writings.build(:exercise_id => params[:exercise_id], :writing_date => params[:writing][:writing_date]) 
```

# c++ - 如何使用具有多个线程的非阻塞套接字？

> ID：10667465
> 
> 赞同：1
> 
> 时间：2012-05-19T17:38:13.073
> 
> 标签：c++, multithreading, sockets

我读过在一个线程中使用超过 64 个套接字是危险的（？）。但是 - 至少对我来说 - 非阻塞套接字用于避免复杂的线程事情。由于只有一个侦听器套接字，我应该如何将套接字拆分为线程并将它们与 select() 一起使用？我应该为每个线程创建 fd_sets 还是什么？我应该如何将客户端分配给线程，因为我只能在开始时使用 CreateThread() 传递值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T17:51:07.677

不不不，你有一些地方错了。

首先，处理许多套接字的理想方法是拥有一个[线程池](http://en.wikipedia.org/wiki/Thread_pool_pattern)，它将在套接字（客户端）之前完成工作。
另一个或两个线程（据我所知实际上是 CPU 的数量）进行连接接受。

现在，当一个事件发生时，例如一个新的连接，它被分派到线程池进行处理。

其次，这取决于实际的实施和环境。
例如，在 Windows 中有一个叫做[IOCP](http://en.wikipedia.org/wiki/Input/output_completion_port)的东西。

如果你问我 - 不要为较低的实现而烦恼，而是使用诸如[BOOST::ASIO](http://www.boost.org/doc/libs/1_49_0/doc/html/boost_asio.html)或[ACE](http://en.wikipedia.org/wiki/Adaptive_Communication_Environment)之类的框架。

我个人喜欢ASIO。这些框架的最佳之处在于它们通常是跨平台的（nix、Windows 等）。

所以，我的回答有点宽泛，但我认为最好在深入研究代码/手册/实现之前考虑这些事实。

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T18:36:22.323

好吧，你读到的是错误的。许多功能强大*的单线程*应用程序已经使用非阻塞套接字和高性能 I/O 解复用器（如[`epoll(4)`](http://www.kernel.org/doc/man-pages/online/pages/man4/epoll.4.html)和[`kqueue(2)`](http://www.freebsd.org/cgi/man.cgi?query=kqueue&apropos=0&sektion=0&format=html). 它们的优点是您可以预先设置等待事件，因此内核不必在每次轮询时复制大量文件描述符并[重新]设置大量内容。

*如果您的主要目标是吞吐量*，而不是*延迟*，那么线程就有优势。

查看可用技术的精彩概述：[C10K 问题](http://www.kegel.com/c10k.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T15:14:14.757

“处理许多套接字的理想方法”并不总是 - 正如 Poni 似乎相信的那样 - “拥有一个线程池”。

“理想”与什么有关？是否易于编程？最棒的表演？

由于他建议不要打扰“较低的实现”和“使用诸如 BOOST::ASIO 或 ACE 之类的框架”，我猜他的意思是易于编程。

如果他从 Windows 的性能角度考虑，他会推荐“称为 IOCP 的东西”。IOCP 是“IO 控制端口”，它允许使用少量线程（建议每个可用内核一个线程）实现超快速 IO 应用程序。IOCP 应用程序围绕任何线程池等价物运行，如果他曾经使用它们编写代码，他会知道这些。IOCP 不与线程池一起使用，而是代替它们。

Linux 中没有等效的 IOCP。

在 Windows 上使用框架可能会加快产品的“上市时间”，但性能将与选择纯 IOCP 实现时的性能相差甚远。

性能差异使得应该考虑特定于操作系统的代码实现。如果无论如何选择通用解决方案，至少性能[“不会被意外放弃”。](http://msdn.microsoft.com/en-us/library/ms979190.aspx)

# css - 我页面底部的空间

> ID：10667469
> 
> 赞同：0
> 
> 时间：2012-05-19T17:39:03.567
> 
> 标签：css, space

出于某种原因，在我的网站底部有空间，我试图设置包装器的高度，但这并没有改变任何东西......我希望这里有人能帮我一把，我还有很多东西要学，所以请对人好点！:D

谢谢

链接：[propertytest.uphero.com](http://propertytest.uphero.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T17:49:23.120

将 html 和 body 标签的高度设置为 100%（在 CSS 中）

```
html,
body {
  height: 100%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T17:52:51.683

首先第一件事，

之后清理那段代码`</html>`。

做内的一切`</body>`。

然后，使用 . 清除最后一个 div 之前的浮动`<p style="clear:both;height:0;">&nbsp;</p>`。你不应该留下任何有尾的花车。

# google-chrome - Chrome：如何重新映射 Ctrl+D 以专注于地址栏？

> ID：10667477
> 
> 赞同：1
> 
> 时间：2012-05-19T17:40:16.240
> 
> 标签：google-chrome, google-chrome-extension

您知道将 Ctrl+D 重新映射为“fo”的任何扩展名或其他内容吗？

哈维

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T16:41:59.347

Alt+D 将地址栏集中在几乎所有应用程序中。

要重新映射，请参阅[chrome.experimental.keybinding](http://code.google.com/chrome/extensions/experimental.keybinding.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T19:44:03.147

据我所知，目前不可能（除非从那时起添加了新的 API）：[Chrome 扩展专注于多功能框？](https://stackoverflow.com/q/7295986/163956)

# django - django_nose 单元测试失败（没有这样的选项）

> ID：10667481
> 
> 赞同：0
> 
> 时间：2012-05-19T17:40:43.947
> 
> 标签：django, unit-testing, nose, nosetests

我有一个新项目，无法正确设置 django_nose。我以前从未遇到过这个问题。所以，让我认为这是一个配置问题。但是，我看不出来。

我正在使用 virtualenv 并安装了 nose 和 django-nose。这是我的要求.txt

```
Django==1.3.1
distribute==0.6.24
django-nose==1.0
nose==1.1.2
psycopg2==2.4.5
wsgiref==0.1.2 
```

设置.py

```
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'django_nose',
    'main',
)

TEST_RUNNER = 'django_nose.NoseTestSuiteRunner'

NOSE_ARGS = [
    '--with-spec', '--spec-color',
    # Packages to test
    'main',
] 
```

激活我的 virtualenv 后，当我运行时：

```
python manage.py test 
```

我得到以下信息：

```
nosetests --verbosity 1 --with-spec --spec-color main
Usage: manage.py [options]

manage.py: error: no such option: --with-spec 
```

有人遇到过这个问题吗？有人可以看到我做错了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T18:04:21.877

我想到了。我的错（像往常一样）。仅供将来参考......这些实际上不是鼻子争论，可能不应该在那里。它们是匹诺曹的参数。

[木偶奇遇记](http://pypi.python.org/pypi/pinocchio/0.3.1)

# javascript - 计算 html 列表中的直接子级

> ID：10667484
> 
> 赞同：1
> 
> 时间：2012-05-19T17:41:35.257
> 
> 标签：javascript, jquery, dom, html-lists, markup

这是 HTML 标记的样子

```
<ul>
  <li>red</li>
  <li>green</li>
  <li>
  <ul>
       <li>banana</li>
       <li>pineapple</li>
       <li>peanut</li>
  </ul>
  </li>
  <li>blue</li>
  <li>
  <ul>
       <li>sun</li>
       <li>mars</li>
       <li>earth</li>
  </ul>
  </li>
  <li>orange</li>
</ul> 
```

我如何计算`<li>`此列表中的直接子代 ( )？（包含红色、绿色、蓝色、橙色的项目） ?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T17:42:45.547

尝试这个：

```
$('ul > li').length; 
```

`'ul > li'`选择器仅指向第一级子级，即所有 ul 的直接子级。

或者

```
$('ul').children().length; 
```

如果您的代码是字符串变量，例如

```
var html = '<ul><li>.....'; 
```

然后

```
$('ul > li', $(html)).length; 
```

### 注意：上面的代码会找到所有 li

仅查找第一级`li`使用：

```
$('ul:not(li > ul)').children().length; 
```

您还可以使用：

```
$('ul:not(li > ul) > li').length 
```

对于 html 变量字符串：

```
$(html).children('ul > li').length; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T17:44:11.053

```
var ul = document.querySelector('ul');
var count = 0;
for (var ch = ul.firstChild; ch; ch = ch.nextSibling)
  if (ch instanceof HTMLLIElement) count++; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-19T17:43:39.063

用这个：

```
$("ul > li").length 
```

另一种方式：

```
$("ul").children().length 
```

在 JQuery 文档中，您还可以找到[`size()`](http://api.jquery.com/size/)获取元素数量的方法。但是，最好使用`length`，因为它更快。

第一个`ul`元素可以被`:first`选择器获取。另一种方法是设置具体`<ul>`元素 ID，并使用`#element_id`选择器对其进行寻址。

**演示：http:** [//jsfiddle.net/xDYn9/](http://jsfiddle.net/xDYn9/)

# websphere - servlet 映射在 URL 上显示为项目名称。我需要 ibm-web-bnd.xmi 吗？

> ID：10667485
> 
> 赞同：0
> 
> 时间：2012-05-19T17:41:49.960
> 
> 标签：websphere

我在我的 Servlet 类中创建了一个 servlet 映射作为**/reskilling 。**当我运行应用程序时，url 包含项目名称。这是一个 WebSphere Web 应用程序，它是我的 EAR 项目的一部分。我需要 ibm-web-bnd.xmi 来解决这个问题吗？

这是我的 web.xml

```
<display-name>HibernateReskillingWeb</display-name>
<servlet>
    <description>Paid Up Plan List</description>
    <display-name>PaidUpPlanServlet</display-name>
    <servlet-name>PaidUpPlanServlet</servlet-name>
    <servlet-class>za.co.test.PaidUpPlanServlet</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>PaidUpPlanServlet</servlet-name>
    <url-pattern>/reskilling</url-pattern>
</servlet-mapping>

<welcome-file-list>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>default.html</welcome-file>
    <welcome-file>default.htm</welcome-file>
    <welcome-file>default.jsp</welcome-file>
</welcome-file-list> 
```

错误信息如下所示...

```
 HTTP Error Code:   404

Error Message:JSPG0036E: Failed to find resource /HibernateReskillingWeb/views/PaidUpPlan.jsp

Root Cause:java.io.FileNotFoundException: JSPG0036E: Failed to find resource /HibernateReskillingWeb/views/PaidUpPlan.jsp   at com.ibm.ws.jsp.webcontainerext.AbstractJSPExtensionProcessor.findWrapper(AbstractJSPExtensionProcessor.java:395)... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T00:20:57.967

这个 Web 应用程序的上下文根是什么？从错误消息来看，它是**HibernateReskillingWeb**

如果您尚未对 Context Root 进行任何操作，则默认值为 Dynamic Web 项目的名称。

您可以在 application.xml 中看到此值，并且可以将其更改为您想要的任何值。

是否有一个名为views 的目录来存储您的JSP？这就是 Container 正在寻找您的 JSP 的地方。

当您尝试访问 JSP 时，servlet 映射（您已显示）在这里没有任何作用。

高温高压

# java - 比较枚举中的排名

> ID：10667487
> 
> 赞同：6
> 
> 时间：2012-05-19T17:42:00.990
> 
> 标签：java, enums

我有以下代表 CardRank 的枚举

```
public enum CardRank
{
    DEUCE('2'), TREY('3'), FOUR('4'), FIVE('5'), SIX('6'), SEVEN('7'),
    EIGHT('8'), NINE('9'), TEN('T'), JACK('J'), QUEEN('Q'), KING('K'), 
    ACE('A');

    private char symbol;

    private CardRank(char symbol)
    {
        this.symbol = symbol;
    }

    public char getSymbol()
    {
        return this.symbol;
    }
} 
```

以`CardRank`升序表示。我需要比较排名才能知道哪个排名比另一个大。我可以将`>`运算符与数值一起使用，但不能与 char 值一起使用。

```
// this will print out TRUE for all numerical values compared 
// but FALSE for the chars
if (card.getRank().getSymbol() > anotherCard.getRank().getSymbol()) {
    System.out.println("true");
} else {
    System.out.println("false");
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-19T17:44:22.970

```
if (card.getRank().compareTo(anotherCard.getRank()) > 0) 
```

是你需要的。

您可以使用序数：

```
if (card.getRank().ordinal() > anotherCard.getRank().ordinal()) 
```

枚举具有由它们的序数定义的自然顺序。枚举的序数是根据它在声明中的位置来确定的。所以 DEUCE 有序数 0，TREY 有序数 1，等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T17:55:34.837

考虑为此使用比较器。如果您愿意，它可以是一个公共静态内部类：

```
import java.util.Comparator;

public enum CardRank implements Comparable<CardRank> {
   DEUCE('2'), TREY('3'), FOUR('4'), FIVE('5'), SIX('6'), SEVEN('7'), EIGHT('8'), NINE(
         '9'), TEN('T'), JACK('J'), QUEEN('Q'), KING('K'), ACE('A');

   private char symbol;
   private static CardRankComparator cardRankComparator = new CardRankComparator();

   private CardRank(char symbol) {
      this.symbol = symbol;
   }

   public char getSymbol() {
      return this.symbol;
   }

   public int compareRank(CardRank otherCardRank) {
      return cardRankComparator.compare(this, otherCardRank);
   }

   // public so that this can be used for sorting if need be
   public static class CardRankComparator implements Comparator<CardRank> {
      private static final String RANKS = "23456789TJQKA";

      @Override
      public int compare(CardRank cr1, CardRank cr2) {
         int rank1 = RANKS.indexOf(String.valueOf(cr1.getSymbol()));
         int rank2 = RANKS.indexOf(String.valueOf(cr2.getSymbol()));
         return rank1 - rank2;
      }
   }
} 
```

# oracle - 如何在plsql过程中断开和重新连接

> ID：10667488
> 
> 赞同：1
> 
> 时间：2012-05-19T17:42:03.900
> 
> 标签：oracle, plsql

我正在 PL/SQL 中运行一个具有`for loop`. 我有一个要求，我需要在每次迭代后断开连接并连接到数据库。

如何在代码中完成此操作，而无需手动断开/连接数据库。

我正在使用 PL/SQL 开发人员。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T19:24:03.650

然后您的算法必须在应用层中实现，因为 pl/sql 依赖于数据库连接。

# c++ - 字符串中的最小回文数

> ID：10667489
> 
> 赞同：2
> 
> 时间：2012-05-19T17:42:08.947
> 
> 标签：c++, algorithm

有人可以帮助我找到可以将给定字符串拆分成的最小回文数的解决方案吗？例子：

```
abcdef = 6 //the palindromes are (a,b,c,d,e,f)
bbbaxx = 3 //(bbb, a, xx)
level = 1 // (level) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T21:09:10.487

将递归与动态规划结合使用

如果字符串是回文，则结果为 1，否则将字符串分成 2 段（每对都必须这样做）并返回每个部分上两次调用 minPalinCount 的最小总和。

在伪代码中你有这样的东西

```
minPalinCount(s)
    s is a palindrome ?
       return 1
    else
        for each position in s
           s1,s2 = s split in 2 at this position
           count = min(minPalinCount(s1) + minPalinCount(s2), count)
        return count 
```

在 C++ 中

```
#include <algorithm>
using namespace std;

bool ispalind(string s1)
{
    int s1i = 0;
    while (s1i < s1.size())
    {
        if (s1[s1i] != s1[s1.size() - 1 - s1i ])
            return false;
        s1i++;
    }
    return true;
}

int palindromeCount(string a)
{
    if (ispalind(a))
        return 1;
    else
    {
        int min = a.size();
        for (int i = 1; i < a.size() ; i++)
            min = std::min(palindromeCount(a.substr(0, i)) + palindromeCount(a.substr(i, a.size() - i)), min);
        return min;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T18:00:06.027

在我的脑海中，我可以想到一个动态编程解决方案。M[i,j]--> 表示从 i 开始到 j 结束的回文......如果这样的回文存在，则为真] == true && Str[i]==str[j] 将这些东西存储在一个由结束索引作为键的适当数据结构中，我们可以从以'n'结尾的回文然后在索引处结束的回文向后遍历这个结构其中回文开始于前一个回文以 n 结束，依此类推。

O(n^2)。不确定是否有更好的贪婪分治算法，

# arduino - 是否有用于微控制器 EEPROM 磨损均衡的通用算法？

> ID：10667491
> 
> 赞同：10
> 
> 时间：2012-05-19T17:42:25.920
> 
> 标签：arduino, avr, eeprom

我正在开发一个 Arduino 库，它将最大限度地延长 AVR 的 EEPROM 的寿命。它需要您要存储的变量数量并完成其余的工作。这是我的尝试，并非在所有情况下都有效。

## 背景资料

Atmel 表示，每个存储单元的额定写入/擦除周期为 100,000 次。它们还提供了[应用说明](http://www.atmel.com/Images/doc2526.pdf)，描述了如何执行磨损均衡。这是应用笔记的摘要。

通过在两个内存地址上交替写入，我们可以将擦除/写入次数增加到 200,000 次。三个内存地址为您提供 300,000 次擦除/写入周期，依此类推。为了使这个过程自动化，使用状态缓冲区来跟踪下一次写入的位置。状态缓冲区也必须与参数缓冲区的长度相同，因为也必须对其执行磨损均衡。由于我们无法存储下一次写入的索引，我们在状态缓冲区中增加相应的索引。

这是一个例子。

```
 <------------------- EEPROM -------------------->  
   0                                               N
   -------------------------------------------------
       Parameter Buffer    |     Status Buffer     |
   -------------------------------------------------

   Initial state.
   [ 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 ]

   First write is a 7\. The corresponding position
   in the status buffer is changed to previous value + 1.
   Both buffers are circular.
   [ 7 | 0 | 0 | 0 | 0 | 0 | 1 | 0 | 0 | 0 | 0 | 0 ]

   A second value, 4, is written to the parameter buffer 
   and the second element in the status buffer becomes
   the previous element, 1 in this case, plus 1.
   [ 7 | 4 | 0 | 0 | 0 | 0 | 1 | 2 | 0 | 0 | 0 | 0 ]

   And so on
   [ 7 | 4 | 9 | 0 | 0 | 0 | 1 | 2 | 3 | 0 | 0 | 0 ] 
```

为了确定下一次写入应该发生的位置，我们查看元素之间的差异。如果前一个元素 + 1 不等于下一个元素，那么这就是下一次写入发生的地方。例如：

```
 Compute the differences by starting at the first
   element in the status buffer and wrapping around. 
   General algo: previous element + 1 = current element
   1st element:  0 + 1 = 1 = 1st element (move on)
   2nd element:  1 + 1 = 2 = 2nd element (move on)
   3rd element:  2 + 1 = 3 = 3rd element (move on)
   4th element:  3 + 1 = 4 != 4th element (next write occurs here)

   [ 7 | 4 | 9 | 0 | 0 | 0 | 1 | 2 | 3 | 0 | 0 | 0 ]
                 ^                       ^
                 |                       |

   Another edge case to consider is when the incrementing values
   wrap around at 256 because we are writing bytes. With the
   following buffer we know the next write is at the 3rd element 
   because 255 + 1 = 0 != 250 assuming we are using byte arithmetic.

   [ x | x | x | x | x | x | 254 | 255 | 250 | 251 | 252 | 253 ]
                                          ^
                                          | 

   After we write at element 3 the status buffer is incremented 
   to the next value using byte arithmetic and looks like this.
   255 + 1 = 0 (wrap around)
   0 + 1 != 251 (next write is here)

   [ x | x | x | x | x | x | 254 | 255 |  0  | 251 | 252 | 253 ]
                                                ^
                                                | 
```

上面的这些例子展示了如何为一个变量延长 EEPROM 的寿命。对于多个变量，想象将 EEPROM 分割成具有相同数据结构但缓冲区更小的多个段。

## 问题

我有上面描述的工作代码。我的问题是当缓冲区长度 >= 256 时算法不起作用。这就是发生的情况

```
 Buffer length of 256\. The last zero is from
   the initial state of the buffer. At every index
   previous element + 1 == next element. No way to
   know where the next write should be.

   <-------------- Status Buffer ------------>
   [  1  |  2  | ... | 253 | 254 | 255 |  0  ]

   A similar problem occurs when the buffer length
   is greater than 256\. A lookup for a read will think
   the next element is at the first 0 when it should be at 
   255.
   <-------------------- Status Buffer ------------------>
   [  1  |  2  | ... | 253 | 254 | 255 |  0  |  0  |  0  ] 
```

## 问题

我该如何解决上述问题？有没有更好的方法来跟踪下一个元素应该写在哪里？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-19T23:34:33.527

关于一般 EEPROM 寿命延长的一些想法：

1.  EEPROM 单元通常通过两步操作写入（由硬件）：首先，单元被擦除，即设置为全 1 (0b11111111 = 0xff)，然后是要写入的位（实际上只有那些为 0 的位）实际上是写的。位只能通过实际的写操作设置为 0。将位从 0 更改为 1 需要擦除整个单元格，然后重新写入新值。

2.  如果 EEPROM 单元已经包含要写入它的相同值 - 这可能是要（重新）写入或多或少的数据的情况 - 根本不需要写入单元，减少将该写入操作磨损为 0。可能需要检查单元格内容以确定是否需要写入它，而不是总是向其写入新值。

3.  上述组合导致了一种方法，即如果新值中有任何 1 位，而存储的值具有 0 位（即，如果`StoredValue & NewValue != NewValue`），则仅在写入之前擦除单元。如果新值 ( ) 不需要 0 -> 1 位转换，则无需擦除单元`StoredValue & NewValue == NewValue`。

4.  AVR 提供了分别用于擦除和写入 EEPROM 单元的单独指令，以支持上述机制。

5.  当执行读取-比较-擦除-写入而不是仅擦除-写入操作时，向 EEPROM 传输数据的最坏情况速度当然会下降。然而，这有可能完全跳过一些/大多数单元的擦写操作，这可能会降低相对速度损失。

对于您当前的问题，请考虑以上几点：为什么不使用单个位来存储您的下一个写入位置？

例子：

状态缓冲区初始化为全1：

```
Bit number: 0123 4567 89AB CDEF
Value:      1111 1111 1111 1111 
```

在访问 EEPROM 中的值之前，请先找到状态缓冲区中的第一个 1 位。该位的数量表示（循环）参数缓冲区的当前“头”的地址。

每次推进参数缓冲区时，将状态缓冲区中的下一位设置为 0：

```
Bit number: 0123 4567 89AB CDEF
Value:      0111 1111 1111 1111 
```

然后

```
Value:      0011 1111 1111 1111 
```

然后

```
Value:      0001 1111 1111 1111 
```

等等。

这可以在**不**擦除整个单元格的情况下完成，因此每次更新只会“磨损”状态缓冲区的一位 - 如果写入的数据也只有一个 0 位。
例如，将存储的值转换为要写入的数据应为( )`0111`的新值，除了我们实际想要更改的单个位之外，所有位都保持不变。`0011``1011``data = ( newValue XOR oldValue ) XOR 0xff`

一旦状态缓冲区用完（全为 0），它就会被完全擦除，然后重新开始。

一个明确的优点是，每个参数缓冲区只需要维护一位状态，与 Atmel 应用笔记相比，它只消耗 1/8 的内存。~~此外，查找下一个写入位置也会快得多，因为只需要对状态缓冲区进行 1/8 的读取操作。~~（编辑：不正确，因为 EEPROM 读取的性能成本几乎为零，而所需的位移可能需要几十个周期。）

另一个注意事项：你认为使用 256+ 参数缓冲单元真的有用吗？例如，在处理设备上 1024 字节的总可用 EEPROM 时，这些单元会变得非常小。- 100000 个周期乘以 256 是相当多的写操作，如果似乎需要这么大的数字，则可能是算法有问题，或者根本不应该使用 EEPROM。作为替代方案，在某些情况下，外部[NVRAM](http://en.wikipedia.org/wiki/Non-volatile_random-access_memory)将是一个不错的选择。

访问时间在这里也可能是一个方面：当尝试在具有 256 字节状态缓冲区的参数缓冲区中查找和读取 3 字节大小的元素时，在最坏的情况下将需要**256** (+3) 次读取操作案例 - 巨大的开销！

关于 EEPROM 单元的工作原理，有一个非常说明性的文档，包括恶化的方式和原因：

[STMicroelectronics：“设计人员如何充分利用 STMicroelectronics 串行 EEPROM”，应用笔记 AN2014](http://www.st.com/st-web-ui/static/active/jp/resource/technical/document/application_note/CD00042024.pdf)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-09T16:43:40.707

我建议您在数据元素上使用简单的“脏”位而不是计数器。除非扫描最后写入的元素太慢，或者你想做一些复杂的事情，比如跟踪坏的 EEPROM 单元，否则有计数器和目录是没有意义的。

该算法非常简单：在您写入的每个元素中设置一个“脏”位，并在您需要读取最后一个元素或写入新元素时扫描该位。当你用完干净的点时，要么擦除所有元素，要么（在 Arduino 的情况下）只是翻转“脏”位的值并从头开始。我在[这里](https://arduino.stackexchange.com/a/38132/13327)写了详细的解释，如果你需要的话。

# android - 无法为 Android ADK 编译 demokit.pde

> ID：10667492
> 
> 赞同：1
> 
> 时间：2012-05-19T17:42:25.833
> 
> 标签：android, arduino, adk

我开始使用带有主机屏蔽的 Arduino Mega 2560 板测试 android ADK。正如android文档给出的那样，我将demokit.pde放到了aruduino IDE上。但我无法编译 demokit.pde 以将其上传到 Arduino 板。谁能帮我一些建议？

提前致谢

Arduino IDE 中显示的错误消息：

```
In file included from demokit.cpp:1:
/usr/share/arduino/libraries/Wire/Wire.h:23:22: error: /usr/share/arduino/libraries/USB_Host_Shield/inttypes.h: Permission denied
demokit.cpp:4:22: error: /usr/share/arduino/libraries/USB_Host_Shield/Max3421e.h: Permission denied
demokit.cpp:5:17: error: /usr/share/arduino/libraries/USB_Host_Shield/Usb.h: Permission denied
demokit.cpp:6:30: error: /usr/share/arduino/libraries/USB_Host_Shield/AndroidAccessory.h: Permission denied
demokit.cpp:8:22: error: /usr/share/arduino/libraries/USB_Host_Shield/CapSense.h: Permission denied
In file included from demokit.cpp:43:
/usr/share/arduino/hardware/arduino/cores/arduino/WProgram.h:4:20: error: /usr/share/arduino/libraries/USB_Host_Shield/stdlib.h: Permission denied
/usr/share/arduino/hardware/arduino/cores/arduino/WProgram.h:5:20: error: /usr/share/arduino/libraries/USB_Host_Shield/string.h: Permission denied
/usr/share/arduino/hardware/arduino/cores/arduino/WProgram.h:6:18: error: /usr/share/arduino/libraries/USB_Host_Shield/math.h: Permission denied
/usr/share/arduino/hardware/arduino/cores/arduino/WProgram.h:8:27: error: /usr/share/arduino/libraries/USB_Host_Shield/avr/interrupt.h: Permission denied
In file included from /usr/share/arduino/hardware/arduino/cores/arduino/WProgram.h:10,
                 from demokit.cpp:43:
/usr/share/arduino/hardware/arduino/cores/arduino/wiring.h:28:20: error: /usr/share/arduino/libraries/USB_Host_Shield/avr/io.h: Permission denied
In file included from /usr/share/arduino/hardware/arduino/cores/arduino/WProgram.h:13,
                 from demokit.cpp:43:
/usr/share/arduino/hardware/arduino/cores/arduino/WCharacter.h:23:19: error: /usr/share/arduino/libraries/USB_Host_Shield/ctype.h: Permission denied
In file included from /usr/share/arduino/hardware/arduino/cores/arduino/Stream.h:24,
                 from /usr/share/arduino/hardware/arduino/cores/arduino/HardwareSerial.h:27,
                 from /usr/share/arduino/hardware/arduino/cores/arduino/WProgram.h:15,
                 from demokit.cpp:43:
/usr/share/arduino/hardware/arduino/cores/arduino/Print.h:24:33: error: /usr/share/arduino/libraries/USB_Host_Shield/stdio.h: Permission denied
In file included from demokit.cpp:1:
/usr/share/arduino/libraries/Wire/Wire.h:30: error: ‘uint8_t’ does not name a type
/usr/share/arduino/libraries/Wire/Wire.h:31: error: ‘uint8_t’ does not name a type
/usr/share/arduino/libraries/Wire/Wire.h:32: error: ‘uint8_t’ does not name a type
/usr/share/arduino/libraries/Wire/Wire.h:34: error: ‘uint8_t’ does not name a type
/usr/share/arduino/libraries/Wire/Wire.h:35: error: ‘uint8_t’ does not name a type
/usr/share/arduino/libraries/Wire/Wire.h:36: error: ‘uint8_t’ does not name a type
/usr/share/arduino/libraries/Wire/Wire.h:37: error: ‘uint8_t’ does not name a type
/usr/share/arduino/libraries/Wire/Wire.h:39: error: ‘uint8_t’ does not name a type
/usr/share/arduino/libraries/Wire/Wire.h:43: error: ‘uint8_t’ has not been declared
/usr/share/arduino/libraries/Wire/Wire.h:47: error: ‘uint8_t’ has not been declared
/usr/share/arduino/libraries/Wire/Wire.h:48: error: ‘void TwoWire::begin(int)’ cannot be overloaded
/usr/share/arduino/libraries/Wire/Wire.h:47: error: with ‘void TwoWire::begin(int)’
/usr/share/arduino/libraries/Wire/Wire.h:49: error: ‘uint8_t’ has not been declared
/usr/share/arduino/libraries/Wire/Wire.h:50: error: ‘void TwoWire::beginTransmission(int)’ cannot be overloaded
/usr/share/arduino/libraries/Wire/Wire.h:49: error: with ‘void TwoWire::beginTransmission(int)’
/usr/share/arduino/libraries/Wire/Wire.h:51: error: ‘uint8_t’ does not name a type
/usr/share/arduino/libraries/Wire/Wire.h:52: error: ‘uint8_t’ does not name a type
/usr/share/arduino/libraries/Wire/Wire.h:53: error: ‘uint8_t’ does not name a type
/usr/share/arduino/libraries/Wire/Wire.h:54: error: ‘uint8_t’ has not been declared
/usr/share/arduino/libraries/Wire/Wire.h:55: error: ‘uint8_t’ has not been declared
/usr/share/arduino/libraries/Wire/Wire.h:55: error: ‘uint8_t’ has not been declared
/usr/share/arduino/libraries/Wire/Wire.h:56: error: ‘void TwoWire::send(int)’ cannot be overloaded
/usr/share/arduino/libraries/Wire/Wire.h:54: error: with ‘void TwoWire::send(int)’
/usr/share/arduino/libraries/Wire/Wire.h:58: error: ‘uint8_t’ does not name a type
/usr/share/arduino/libraries/Wire/Wire.h:59: error: ‘uint8_t’ does not name a type
In file included from demokit.cpp:2:
/usr/share/arduino/libraries/Servo/Servo.h:100: error: ‘uint8_t’ does not name a type
/usr/share/arduino/libraries/Servo/Servo.h:101: error: ‘uint8_t’ does not name a type
/usr/share/arduino/libraries/Servo/Servo.h:113: error: ‘uint8_t’ does not name a type
/usr/share/arduino/libraries/Servo/Servo.h:114: error: ‘uint8_t’ does not name a type
/usr/share/arduino/libraries/Servo/Servo.h:122: error: ‘uint8_t’ does not name a type
/usr/share/arduino/libraries/Servo/Servo.h:123: error: ‘int8_t’ does not name a type
/usr/share/arduino/libraries/Servo/Servo.h:124: error: ‘int8_t’ does not name a type
In file included from /usr/share/arduino/hardware/arduino/cores/arduino/WProgram.h:10,
                 from demokit.cpp:43:
/usr/share/arduino/hardware/arduino/cores/arduino/wiring.h:104: error: ‘uint8_t’ does not name a type
/usr/share/arduino/hardware/arduino/cores/arduino/wiring.h:105: error: ‘uint8_t’ does not name a type
/usr/share/arduino/hardware/arduino/cores/arduino/wiring.h:109: error: variable or field ‘pinMode’ declared void
/usr/share/arduino/hardware/arduino/cores/arduino/wiring.h:109: error: ‘uint8_t’ was not declared in this scope
/usr/share/arduino/hardware/arduino/cores/arduino/wiring.h:109: error: ‘uint8_t’ was not declared in this scope
/usr/share/arduino/hardware/arduino/cores/arduino/wiring.h:110: error: variable or field ‘digitalWrite’ declared void
/usr/share/arduino/hardware/arduino/cores/arduino/wiring.h:110: error: ‘uint8_t’ was not declared in this scope
/usr/share/arduino/hardware/arduino/cores/arduino/wiring.h:110: error: ‘uint8_t’ was not declared in this scope
/usr/share/arduino/hardware/arduino/cores/arduino/wiring.h:111: error: ‘uint8_t’ was not declared in this scope
/usr/share/arduino/hardware/arduino/cores/arduino/wiring.h:112: error: ‘uint8_t’ was not declared in this scope
/usr/share/arduino/hardware/arduino/cores/arduino/wiring.h:113: error: variable or field ‘analogReference’ declared void
/usr/share/arduino/hardware/arduino/cores/arduino/wiring.h:113: error: ‘uint8_t’ was not declared in this scope
/usr/share/arduino/hardware/arduino/cores/arduino/wiring.h:114: error: variable or field ‘analogWrite’ declared void
/usr/share/arduino/hardware/arduino/cores/arduino/wiring.h:114: error: ‘uint8_t’ was not declared in this scope
/usr/share/arduino/hardware/arduino/cores/arduino/wiring.h:114: error: expected primary-expression before ‘int’
/usr/share/arduino/hardware/arduino/cores/arduino/wiring.h:120: error: ‘uint8_t’ was not declared in this scope
/usr/share/arduino/hardware/arduino/cores/arduino/wiring.h:120: error: ‘uint8_t’ was not declared in this scope
/usr/share/arduino/hardware/arduino/cores/arduino/wiring.h:120: error: expected primary-expression before ‘unsigned’
/usr/share/arduino/hardware/arduino/cores/arduino/wiring.h:120: error: initializer expression list treated as compound expression
/usr/share/arduino/hardware/arduino/cores/arduino/wiring.h:122: error: variable or field ‘shiftOut’ declared void
/usr/share/arduino/hardware/arduino/cores/arduino/wiring.h:122: error: ‘uint8_t’ was not declared in this scope
/usr/share/arduino/hardware/arduino/cores/arduino/wiring.h:122: error: ‘uint8_t’ was not declared in this scope
/usr/share/arduino/hardware/arduino/cores/arduino/wiring.h:122: error: ‘uint8_t’ was not declared in this scope
/usr/share/arduino/hardware/arduino/cores/arduino/wiring.h:122: error: ‘uint8_t’ was not declared in this scope
/usr/share/arduino/hardware/arduino/cores/arduino/wiring.h:123: error: ‘uint8_t’ does not name a type
/usr/share/arduino/hardware/arduino/cores/arduino/wiring.h:125: error: variable or field ‘attachInterrupt’ declared void
/usr/share/arduino/hardware/arduino/cores/arduino/wiring.h:125: error: ‘uint8_t’ was not declared in this scope
/usr/share/arduino/hardware/arduino/cores/arduino/wiring.h:125: error: expected primary-expression before ‘void’
/usr/share/arduino/hardware/arduino/cores/arduino/wiring.h:125: error: expected primary-expression before ‘int’
/usr/share/arduino/hardware/arduino/cores/arduino/wiring.h:126: error: variable or field ‘detachInterrupt’ declared void
/usr/share/arduino/hardware/arduino/cores/arduino/wiring.h:126: error: ‘uint8_t’ was not declared in this scope
In file included from /usr/share/arduino/hardware/arduino/cores/arduino/WProgram.h:13,
                 from demokit.cpp:43:
/usr/share/arduino/hardware/arduino/cores/arduino/WCharacter.h:26: error: ‘boolean’ does not name a type
/usr/share/arduino/hardware/arduino/cores/arduino/WCharacter.h:27: error: ‘boolean’ does not name a type
/usr/share/arduino/hardware/arduino/cores/arduino/WCharacter.h:28: error: ‘boolean’ does not name a type
/usr/share/arduino/hardware/arduino/cores/arduino/WCharacter.h:29: error: ‘boolean’ does not name a type
/usr/share/arduino/hardware/arduino/cores/arduino/WCharacter.h:30: error: ‘boolean’ does not name a type
/usr/share/arduino/hardware/arduino/cores/arduino/WCharacter.h:31: error: ‘boolean’ does not name a type
/usr/share/arduino/hardware/arduino/cores/arduino/WCharacter.h:32: error: ‘boolean’ does not name a type
/usr/share/arduino/hardware/arduino/cores/arduino/WCharacter.h:33: error: ‘boolean’ does not name a type
/usr/share/arduino/hardware/arduino/cores/arduino/WCharacter.h:34: error: ‘boolean’ does not name a type
/usr/share/arduino/hardware/arduino/cores/arduino/WCharacter.h:35: error: ‘boolean’ does not name a type
/usr/share/arduino/hardware/arduino/cores/arduino/WCharacter.h:36: error: ‘boolean’ does not name a type
/usr/share/arduino/hardware/arduino/cores/arduino/WCharacter.h:37: error: ‘boolean’ does not name a type
/usr/share/arduino/hardware/arduino/cores/arduino/WCharacter.h:38: error: ‘boolean’ does not name a type
/usr/share/arduino/hardware/arduino/cores/arduino/WCharacter.h:46: error: ‘boolean’ does not name a type
/usr/share/arduino/hardware/arduino/cores/arduino/WCharacter.h:54: error: ‘boolean’ does not name a type
/usr/share/arduino/hardware/arduino/cores/arduino/WCharacter.h:62: error: ‘boolean’ does not name a type
/usr/share/arduino/hardware/arduino/cores/arduino/WCharacter.h:69: error: ‘boolean’ does not name a type
/usr/share/arduino/hardware/arduino/cores/arduino/WCharacter.h:76: error: ‘boolean’ does not name a type
/usr/share/arduino/hardware/arduino/cores/arduino/WCharacter.h:83: error: ‘boolean’ does not name a type
/usr/share/arduino/hardware/arduino/cores/arduino/WCharacter.h:90: error: ‘boolean’ does not name a type
/usr/share/arduino/hardware/arduino/cores/arduino/WCharacter.h:97: error: ‘boolean’ does not name a type
/usr/share/arduino/hardware/arduino/cores/arduino/WCharacter.h:104: error: ‘boolean’ does not name a type
/usr/share/arduino/hardware/arduino/cores/arduino/WCharacter.h:112: error: ‘boolean’ does not name a type
/usr/share/arduino/hardware/arduino/cores/arduino/WCharacter.h:121: error: ‘boolean’ does not name a type
/usr/share/arduino/hardware/arduino/cores/arduino/WCharacter.h:128: error: ‘boolean’ does not name a type
/usr/share/arduino/hardware/arduino/cores/arduino/WCharacter.h:136: error: ‘boolean’ does not name a type
/usr/share/arduino/hardware/arduino/cores/arduino/WCharacter.h: In function ‘int toAscii(int)’:
/usr/share/arduino/hardware/arduino/cores/arduino/WCharacter.h:146: error: ‘toascii’ was not declared in this scope
/usr/share/arduino/hardware/arduino/cores/arduino/WCharacter.h: In function ‘int toLowerCase(int)’:
/usr/share/arduino/hardware/arduino/cores/arduino/WCharacter.h:158: error: ‘tolower’ was not declared in this scope
/usr/share/arduino/hardware/arduino/cores/arduino/WCharacter.h: In function ‘int toUpperCase(int)’:
/usr/share/arduino/hardware/arduino/cores/arduino/WCharacter.h:165: error: ‘toupper’ was not declared in this scope
In file included from /usr/share/arduino/hardware/arduino/cores/arduino/WProgram.h:14,
                 from demokit.cpp:43:
/usr/share/arduino/hardware/arduino/cores/arduino/WString.h: In destructor ‘String::~String()’:
/usr/share/arduino/hardware/arduino/cores/arduino/WString.h:40: error: ‘free’ was not declared in this scope
/usr/share/arduino/hardware/arduino/cores/arduino/WString.h: In member function ‘void String::getBuffer(unsigned int)’:
/usr/share/arduino/hardware/arduino/cores/arduino/WString.h:102: error: ‘malloc’ was not declared in this scope
/usr/share/arduino/hardware/arduino/cores/arduino/WString.h:103: error: ‘NULL’ was not declared in this scope
In file included from /usr/share/arduino/hardware/arduino/cores/arduino/Stream.h:24,
                 from /usr/share/arduino/hardware/arduino/cores/arduino/HardwareSerial.h:27,
                 from /usr/share/arduino/hardware/arduino/cores/arduino/WProgram.h:15,
                 from demokit.cpp:43:
/usr/share/arduino/hardware/arduino/cores/arduino/Print.h: At global scope:
/usr/share/arduino/hardware/arduino/cores/arduino/Print.h:37: error: ‘uint8_t’ has not been declared
/usr/share/arduino/hardware/arduino/cores/arduino/Print.h:38: error: ‘uint8_t’ has not been declared
/usr/share/arduino/hardware/arduino/cores/arduino/Print.h:40: error: ‘uint8_t’ has not been declared
/usr/share/arduino/hardware/arduino/cores/arduino/Print.h:42: error: expected ‘,’ or ‘...’ before ‘*’ token
/usr/share/arduino/hardware/arduino/cores/arduino/Print.h:42: error: ISO C++ forbids declaration of ‘uint8_t’ with no type
/usr/share/arduino/hardware/arduino/cores/arduino/Print.h:42: error: ‘virtual void Print::write(int)’ cannot be overloaded
/usr/share/arduino/hardware/arduino/cores/arduino/Print.h:40: error: with ‘virtual void Print::write(int)’
In file included from /usr/share/arduino/hardware/arduino/cores/arduino/WProgram.h:15,
                 from demokit.cpp:43:
/usr/share/arduino/hardware/arduino/cores/arduino/HardwareSerial.h:35: error: ISO C++ forbids declaration of ‘uint8_t’ with no type
/usr/share/arduino/hardware/arduino/cores/arduino/HardwareSerial.h:35: error: expected ‘;’ before ‘*’ token
/usr/share/arduino/hardware/arduino/cores/arduino/HardwareSerial.h:36: error: ISO C++ forbids declaration of ‘uint8_t’ with no type
/usr/share/arduino/hardware/arduino/cores/arduino/HardwareSerial.h:36: error: expected ‘;’ before ‘*’ token
/usr/share/arduino/hardware/arduino/cores/arduino/HardwareSerial.h:37: error: ISO C++ forbids declaration of ‘uint8_t’ with no type
/usr/share/arduino/hardware/arduino/cores/arduino/HardwareSerial.h:37: error: expected ‘;’ before ‘*’ token
/usr/share/arduino/hardware/arduino/cores/arduino/HardwareSerial.h:38: error: ISO C++ forbids declaration of ‘uint8_t’ with no type
/usr/share/arduino/hardware/arduino/cores/arduino/HardwareSerial.h:38: error: expected ‘;’ before ‘*’ token
/usr/share/arduino/hardware/arduino/cores/arduino/HardwareSerial.h:39: error: ISO C++ forbids declaration of ‘uint8_t’ with no type
/usr/share/arduino/hardware/arduino/cores/arduino/HardwareSerial.h:39: error: expected ‘;’ before ‘*’ token
/usr/share/arduino/hardware/arduino/cores/arduino/HardwareSerial.h:40: error: ‘uint8_t’ does not name a type
/usr/share/arduino/hardware/arduino/cores/arduino/HardwareSerial.h:41: error: ‘uint8_t’ does not name a type
/usr/share/arduino/hardware/arduino/cores/arduino/HardwareSerial.h:42: error: ‘uint8_t’ does not name a type
/usr/share/arduino/hardware/arduino/cores/arduino/HardwareSerial.h:43: error: ‘uint8_t’ does not name a type
/usr/share/arduino/hardware/arduino/cores/arduino/HardwareSerial.h:44: error: ‘uint8_t’ does not name a type
/usr/share/arduino/hardware/arduino/cores/arduino/HardwareSerial.h:47: error: expected ‘,’ or ‘...’ before ‘*’ token
/usr/share/arduino/hardware/arduino/cores/arduino/HardwareSerial.h:50: error: ISO C++ forbids declaration of ‘uint8_t’ with no type
/usr/share/arduino/hardware/arduino/cores/arduino/HardwareSerial.h:57: error: ‘uint8_t’ has not been declared
In file included from demokit.cpp:43:
/usr/share/arduino/hardware/arduino/cores/arduino/WProgram.h:17: error: ‘uint16_t’ does not name a type
/usr/share/arduino/hardware/arduino/cores/arduino/WProgram.h:18: error: ‘uint16_t’ does not name a type
/usr/share/arduino/hardware/arduino/cores/arduino/WProgram.h:22: error: redefinition of ‘long unsigned int pulseIn’
/usr/share/arduino/hardware/arduino/cores/arduino/wiring.h:120: error: ‘long unsigned int pulseIn’ previously defined here
/usr/share/arduino/hardware/arduino/cores/arduino/WProgram.h:22: error: ‘uint8_t’ was not declared in this scope
/usr/share/arduino/hardware/arduino/cores/arduino/WProgram.h:22: error: ‘uint8_t’ was not declared in this scope
/usr/share/arduino/hardware/arduino/cores/arduino/WProgram.h:22: error: expected primary-expression before ‘unsigned’
/usr/share/arduino/hardware/arduino/cores/arduino/WProgram.h:24: error: variable or field ‘tone’ declared void
/usr/share/arduino/hardware/arduino/cores/arduino/WProgram.h:24: error: ‘uint8_t’ was not declared in this scope
/usr/share/arduino/hardware/arduino/cores/arduino/WProgram.h:24: error: expected primary-expression before ‘unsigned’
/usr/share/arduino/hardware/arduino/cores/arduino/WProgram.h:24: error: expected primary-expression before ‘unsigned’
/usr/share/arduino/hardware/arduino/cores/arduino/WProgram.h:25: error: variable or field ‘noTone’ declared void
/usr/share/arduino/hardware/arduino/cores/arduino/WProgram.h:25: error: ‘uint8_t’ was not declared in this scope
/usr/share/arduino/hardware/arduino/cores/arduino/WProgram.h:34: error: ‘uint8_t’ does not name a type
/usr/share/arduino/hardware/arduino/cores/arduino/WProgram.h:35: error: ‘uint8_t’ does not name a type
/usr/share/arduino/hardware/arduino/cores/arduino/WProgram.h:36: error: ‘uint8_t’ does not name a type
/usr/share/arduino/hardware/arduino/cores/arduino/WProgram.h:37: error: ‘uint8_t’ does not name a type
/usr/share/arduino/hardware/arduino/cores/arduino/WProgram.h:38: error: ‘uint8_t’ does not name a type
/usr/share/arduino/hardware/arduino/cores/arduino/WProgram.h:39: error: ‘uint8_t’ does not name a type
/usr/share/arduino/hardware/arduino/cores/arduino/WProgram.h:40: error: ‘uint8_t’ does not name a type
/usr/share/arduino/hardware/arduino/cores/arduino/WProgram.h:41: error: ‘uint8_t’ does not name a type
/usr/share/arduino/hardware/arduino/cores/arduino/WProgram.h:42: error: ‘uint8_t’ does not name a type
/usr/share/arduino/hardware/arduino/cores/arduino/WProgram.h:43: error: ‘uint8_t’ does not name a type
/usr/share/arduino/hardware/arduino/cores/arduino/WProgram.h:44: error: ‘uint8_t’ does not name a type
/usr/share/arduino/hardware/arduino/cores/arduino/WProgram.h:45: error: ‘uint8_t’ does not name a type
/usr/share/arduino/hardware/arduino/cores/arduino/WProgram.h:46: error: ‘uint8_t’ does not name a type
/usr/share/arduino/hardware/arduino/cores/arduino/WProgram.h:47: error: ‘uint8_t’ does not name a type
/usr/share/arduino/hardware/arduino/cores/arduino/WProgram.h:48: error: ‘uint8_t’ does not name a type
/usr/share/arduino/hardware/arduino/cores/arduino/WProgram.h:49: error: ‘uint8_t’ does not name a type
demokit:42: error: ‘AndroidAccessory’ does not name a type
demokit:51: error: ‘CapSense’ does not name a type
demokit.cpp: In function ‘void init_buttons()’:
demokit:58: error: ‘A6’ was not declared in this scope
demokit:58: error: ‘pinMode’ was not declared in this scope
demokit:59: error: ‘A7’ was not declared in this scope
demokit:60: error: ‘A8’ was not declared in this scope
demokit:61: error: ‘A9’ was not declared in this scope
demokit:64: error: ‘digitalWrite’ was not declared in this scope
demokit.cpp: In function ‘void init_relays()’:
demokit:73: error: ‘A0’ was not declared in this scope
demokit:73: error: ‘pinMode’ was not declared in this scope
demokit:74: error: ‘A1’ was not declared in this scope
demokit.cpp: In function ‘void init_leds()’:
demokit:80: error: ‘digitalWrite’ was not declared in this scope
demokit:84: error: ‘pinMode’ was not declared in this scope
demokit.cpp: At global scope:
demokit:107: error: ‘byte’ does not name a type
demokit.cpp: In function ‘void setup()’:
demokit:110: error: ‘Serial’ was not declared in this scope
demokit:119: error: ‘touch_robot’ was not declared in this scope
demokit:121: error: ‘class Servo’ has no member named ‘attach’
demokit:123: error: ‘class Servo’ has no member named ‘attach’
demokit:125: error: ‘class Servo’ has no member named ‘attach’
demokit:129: error: ‘b1’ was not declared in this scope
demokit:129: error: ‘A6’ was not declared in this scope
demokit:129: error: ‘digitalRead’ cannot be used as a function
demokit:130: error: ‘b2’ was not declared in this scope
demokit:130: error: ‘A7’ was not declared in this scope
demokit:130: error: ‘digitalRead’ cannot be used as a function
demokit:131: error: ‘b3’ was not declared in this scope
demokit:131: error: ‘A8’ was not declared in this scope
demokit:131: error: ‘digitalRead’ cannot be used as a function
demokit:132: error: ‘b4’ was not declared in this scope
demokit:132: error: ‘A9’ was not declared in this scope
demokit:132: error: ‘digitalRead’ cannot be used as a function
demokit:133: error: ‘c’ was not declared in this scope
demokit:135: error: ‘acc’ was not declared in this scope
demokit.cpp: In function ‘void loop()’:
demokit:140: error: ‘byte’ was not declared in this scope
demokit:140: error: expected `;' before ‘err’
demokit:141: error: expected `;' before ‘idle’
demokit:142: error: ‘byte’ does not name a type
demokit:143: error: expected `;' before ‘msg’
demokit:146: error: ‘acc’ was not declared in this scope
demokit:147: error: ‘msg’ was not declared in this scope
demokit:149: error: expected `;' before ‘b’
demokit:150: error: ‘uint16_t’ was not declared in this scope
demokit:150: error: expected `;' before ‘val’
demokit:158: error: ‘analogWrite’ was not declared in this scope
demokit:160: error: ‘analogWrite’ was not declared in this scope
demokit:162: error: ‘analogWrite’ was not declared in this scope
demokit:164: error: ‘analogWrite’ was not declared in this scope
demokit:166: error: ‘analogWrite’ was not declared in this scope
demokit:168: error: ‘analogWrite’ was not declared in this scope
demokit:170: error: ‘analogWrite’ was not declared in this scope
demokit:172: error: ‘analogWrite’ was not declared in this scope
demokit:174: error: ‘analogWrite’ was not declared in this scope
demokit:183: error: ‘A0’ was not declared in this scope
demokit:183: error: ‘digitalWrite’ was not declared in this scope
demokit:185: error: ‘A1’ was not declared in this scope
demokit:185: error: ‘digitalWrite’ was not declared in this scope
demokit:191: error: ‘b’ was not declared in this scope
demokit:191: error: ‘A6’ was not declared in this scope
demokit:191: error: ‘digitalRead’ cannot be used as a function
demokit:192: error: ‘b1’ was not declared in this scope
demokit:199: error: ‘A7’ was not declared in this scope
demokit:199: error: ‘digitalRead’ cannot be used as a function
demokit:200: error: ‘b2’ was not declared in this scope
demokit:207: error: ‘A8’ was not declared in this scope
demokit:207: error: ‘digitalRead’ cannot be used as a function
demokit:208: error: ‘b3’ was not declared in this scope
demokit:215: error: ‘A9’ was not declared in this scope
demokit:215: error: ‘digitalRead’ cannot be used as a function
demokit:216: error: ‘b4’ was not declared in this scope
demokit:223: error: ‘count’ was not declared in this scope
demokit:225: error: ‘val’ was not declared in this scope
demokit:225: error: ‘A3’ was not declared in this scope
demokit:225: error: ‘analogRead’ cannot be used as a function
demokit:233: error: ‘A2’ was not declared in this scope
demokit:233: error: ‘analogRead’ cannot be used as a function
demokit:249: error: ‘touch_robot’ was not declared in this scope
demokit:253: error: ‘c’ was not declared in this scope
demokit:265: error: ‘analogWrite’ was not declared in this scope
demokit:277: error: ‘A0’ was not declared in this scope
demokit:277: error: ‘digitalWrite’ was not declared in this scope
demokit:278: error: ‘A1’ was not declared in this scope
demokit.cpp: In function ‘void init_joystick(int)’:
demokit:288: error: ‘byte’ was not declared in this scope
demokit:288: error: expected `;' before ‘status’
demokit:290: error: ‘A9’ was not declared in this scope
demokit:290: error: ‘pinMode’ was not declared in this scope
demokit:291: error: ‘digitalWrite’ was not declared in this scope
demokit:293: error: ‘A10’ was not declared in this scope
demokit:296: error: ‘A11’ was not declared in this scope
demokit:307: error: ‘status’ was not declared in this scope
demokit:308: error: ‘status’ was not declared in this scope
demokit.cpp: In function ‘char joystick_interrupt()’:
demokit:365: error: ‘A10’ was not declared in this scope
demokit:365: error: ‘digitalRead’ cannot be used as a function
demokit.cpp: In function ‘char read_joy_reg(char)’:
demokit:376: error: ‘class TwoWire’ has no member named ‘write’
demokit:377: error: ‘class TwoWire’ has no member named ‘endTransmission’
demokit:379: error: ‘class TwoWire’ has no member named ‘requestFrom’
demokit:381: error: ‘class TwoWire’ has no member named ‘available’
demokit:382: error: ‘class TwoWire’ has no member named ‘read’
demokit.cpp: In function ‘void write_joy_reg(char, char)’:
demokit:390: error: ‘class TwoWire’ has no member named ‘write’
demokit:391: error: ‘class TwoWire’ has no member named ‘write’
demokit:392: error: ‘class TwoWire’ has no member named ‘endTransmission’ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T21:33:51.010

因此，您可以降级，也可以修复一些问题。我的一位教授发现[了这个](https://github.com/felis/USB_Host_Shield_2.0)包含替换 USB_Host_Shield 的存储库。将所有文件复制到 ~/libraries 文件夹中的旧目录中。确保所有库都在 ~/sketchbook/libraries/ 中，然后重新启动 IDE（1.0 版！）。转到文件->素描本->库->USB_Host_Shield->adk->demokit-20。

您还需要更新 AndroidAccessory.h。希望这将在 ~/sketchbook/libraries/Android Accesory 中。打开它并替换

```
#include <Wprogram.h> 
```

用这个块：

```
#if defined(ARDUINO) && ARDUINO >= 100
#include "Arduino.h"
#else
#include "WProgram.h"
#endif 
```

这将使其与旧版本的 Arduino 向后兼容。（感谢[这个](http://wyolum.com/?p=624)网站的提示！）

然后只需在 IDE 的文件下拉列表中的速写本中刻录 demokit-20。刚刚在我的板上加载了固件。祝你好运。

编辑：所以我在我的手机上加载了 Android 代码（在几个设备上尝试过）并将固件刻录到 ADK，但现在我无法让手机/设备识别 ADK。尝试这个答案需要您自担风险。现在，我将尝试降级。

EDIT2：降级到 0022 工作。狩猎愉快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T20:13:37.047

我有类似的问题`Arduino 1.0`，如果您的问题与旧版本相同，请说`Arduino 0023`应该修复它。你可以从这里下载它：http: [//arduino.cc/en/Main/Software](http://arduino.cc/en/Main/Software)

# .net-assembly - 将 pdb 文件、xml 配置文件和 dll 合并到一个文件中

> ID：10667495
> 
> 赞同：1
> 
> 时间：2012-05-19T17:42:39.913
> 
> 标签：.net-assembly

我在 bin 文件夹中有三个文件。在构建时，我得到了这些文件。一个 dll 文件，一个应用程序文件（没有扩展名），一个 xml 配置文件（具有 .exe 扩展名）。如何将这 3 个文件组合成一个 exe？..我正在运行 C# winform 应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T01:29:25.997

将它们组合起来是不可能的，但是您不需要分发 .xml 或 .pdb 文件，它们只是用于调试。

# arrays - 算法 - 查找连接的瓦片组

> ID：10667497
> 
> 赞同：3
> 
> 时间：2012-05-19T17:42:47.030
> 
> 标签：arrays, algorithm, multidimensional-array

我对标题感到非常抱歉，但是用几句话来描述我的问题有点困难。我认为帖子的其余部分会更好地解释它！;)

**描述**

我基本上有一个瓷砖/对象/符号的二维数组，每当一组瓷砖被特殊瓷砖分隔时，我想将它分成两个（或更多）新的二维数组。

例如，如果我有：

**[x][x]** [0][0]

[0][0] **[x]** [0]

[0][0] **[x]** [0]

[0][0][0] **[x]**

在不需要符号 x 的地方，那应该给我两个新数组：

**[x][x]** [0][0]

**[x][x][x]** [0]

**[x][x][x]** [0]

**[x][x][x][x]**

和

**[x][x][x][x]**

[0][0] **[x][x]**

[0][0] **[x][x]**

[0][0][0] **[x]**

每组互连瓷砖一个阵列。

在我的具体情况下，我有空对象作为 x，其余的有一个任意对象。基本上，如果我不能从瓷砖 A 到达瓷砖 B 而不会越过空值，那么这两个是两个不同的组。

我已经在脑海中玩了一段时间，我能想到的最好的肯定比 O(n^2) 差得多，因为它们甚至在一开始就起作用了。[脑海中浮现出洪水填充物](http://en.wikipedia.org/wiki/Flood_fill)，它可以用来寻找一个组，但除此之外，我不确定我能否想出任何其他类似的问题来在这种情况下使用。

**问题**

所以我要问的是你是否碰巧知道将我的问题从哪个方向处理和/或如何解决它。计算复杂性并不是那么重要，因为我不打算经常执行此操作，也不打算在大型数组上执行此操作。不过，我希望我没有遇到 NP 难题！:3

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T18:43:35.057

> 我希望我没有遇到 NP 难题！

这远不是一个NP问题。

我将解释解决问题的两种不同方法。一个将按照您的预期使用[Flood Fill ，另一个将使用](http://en.wikipedia.org/wiki/Flood_fill)[Disjoint-set](http://en.wikipedia.org/wiki/Disjoint-set_data_structure)数据结构。

## 洪水填充

假设您有一个矩阵`N x M`，其中一个位置`(row, column)`未`null`使用，否则它包含一个值。

您需要遍历`1..M`每行的每个列元素`1..N`。这很简单：

```
for row in range(1, N + 1):
  for column in range(1, M + 1):
    if matrix[row][column] is not null:
      floodfill(matrix, row, column) 
```

每次找到非`null`值都需要调用Flood Fill算法，后面我会定义Flood Fill方法，原因会更清楚。

```
def floodfill(matrix, row, column):
  # I will use a queue to keep record of the positions we are gonna traverse.
  # Each element in the queue is a coordinate position (row,column) of an element
  # of the matrix.
  Q = Queue()

  # A container for the up, down, left and right directions.
  dirs = { (-1, 0), (1, 0), (0, -1), (0, 1) }

  # Now we will add our initial position to the queue.
  Q.push( (row, column) )

  # And we will mark the element as null. You will definitely need to
  # use a boolean matrix to mark visited elements. In this case I will simply
  # mark them as null.
  matrix[row][column] = null

  # Go through each element in the queue, while there are still elements to visit.
  while Q is not empty:

    # Pop the next element to visit from the queue.
    # Remember this is a (row, column) position.
    (r, c) = Q.pop()

    # Add the element to the output region.
    region.add( (r, c) )

    # Check for non-visited position adjacent to this (r,c) position.
    # These are:
    #   (r + 1, c): down
    #   (r - 1, c): up
    #   (r, c - 1): left
    #   (r, c + 1): right
    for (dr, dc) in dirs:

      # Check if this adjacent position is not null and keep it between
      # the matrix size.
      if matrix[r + dr][c + dc] is not null
         and r + dr <= rows(matrix)
         and c + dc <= colums(matrix):

        # Then add the position to the queue to be visited later
        Q.push(r + dr, c + dc)

        # And mark this position as visited.
        matrix[r + dr][c + dc] = null

  # When there are no more positions to visit. You can return the
  # region visited.
  return region 
```

如果您跟踪识别的区域数量，您可以修改此算法以在不同数组中使用指定数字标记每个区域。您会注意到我使用的是队列而不是递归函数，这将使您远离最大递归限制。

## 并集算法

我认为更昂贵的另一个解决方案是使用不相交集数据结构来完成相同的目的。我只会展示`floodfill`方法的变化。

```
def floodfill(matrix):
  disjoint_set = DisjointSet()

  # Go through each row in the matrix
  for row in range(1, N + 1):

    # Go through each column in the matrix
    for column in range(1, M + 1):

      # Create a set for the current position
      disjoint_set.makeSet(row, column)

      if matrix[row - 1][column] is not null:
        # If the position north of it it is not null then merge them
        disjoint_set.merge((row, column), (row - 1, column))

      if matrix[row][column - 1] is not null:
        # If the position left of it it is not null then merge them
        disjoint_set.merge((row, column), (row, column - 1))

  # You can go through each position identifying its set and do something with it
  for row in range(1, N + 1):
    for column in range(1, M + 1):
      regions[ disjoint_set.find(row, column) ] = (row, column)

  return regions 
```

我希望这会有所帮助。

因为你不关心它，所以我没有费心展示复杂性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T17:53:35.837

似乎您需要[连接组件标记](http://en.wikipedia.org/wiki/Connected-component_labeling)算法来生成分离的对象组

# jsf - 以数组为参数调用 backingbean 方法

> ID：10667502
> 
> 赞同：0
> 
> 时间：2012-05-19T17:43:20.257
> 
> 标签：jsf

如何将数组传递给 JSF 中的 Bean。

例子：

豆：

```
@ManagedBean(name="bean")
...
/* Method I want to call*/
public String output(String[] strings) {
...
} 
```

杰夫：

```
<h:outputText value="#{bean.output( ??? )}"/> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T22:00:40.467

你不能在EL中创建数组，但是你可以创建一个带有特定分隔符的字符串，然后使用[JSTL](https://stackoverflow.com/tags/jstl/info) `fn:split()`在分隔符上将它拆分成一个数组。

```
<html ... xmlns:fn="http://java.sun.com/jsp/jstl/functions">
...
<h:outputText value="#{bean.output(fn:split('one,two,three', ','))}" /> 
```

# php - Backbone.js：Save 的成功功能根本不起作用

> ID：10667503
> 
> 赞同：0
> 
> 时间：2012-05-19T17:43:24.900
> 
> 标签：php, javascript, backbone.js

我试图让最基本的东西在 Backbone.js 中运行，但不知何故失败了。我为将**url**模型保存到服务器而生成的代码。

```
urlToAdd.set({url: urlBody.value, tags:tagsToAdd});
                urlToAdd.save({
                    success:function(){
                        console.log('it works');
                    }
                }); 
```

它**成功地**将数据发送到我的 php 页面，但是我无法让**成功**事件起作用。我在哪里做错了？我仔细观察了，什么也找不到。

这是我的模型定义：（不幸的是，因为我是骨干菜鸟，我已经通过查看教程来应用它，但我不知道**url**函数中的代码是否必要

```
var URLWithTags=Backbone.Model.extend({
            initialize:function(){
                console.log('URL object has been initialized');
            },
            defaults:{
                url:'not defined',
                tags:[]
            },
            validate:function(attributes){
            //console.log(attributes.tags[0].length);
                /*if(attributes.tags[0].length<1)
                    return "You should create at least one tag";*/
            },
            urlRoot:'/URLTags/manage.php',
            url:function(){
                var base = this.urlRoot || (this.collection && this.collection.url) || "/";
                console.log("Base has been produced");
                if(this.isNew())
                    return base;

                return base+"?id="+encodeURIComponent(this.id);
            },
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T17:52:28.390

调用 save 函数时，Save 应该是对象中的第二个参数。请人们阅读文档，或者注释很好的源代码，简短易读。

```
urlToAdd.save(null,{success:function(){console.log('it works')}}); 
```

根据文档：

```
savemodel.save([attributes], [options]) ; 
```

所以 ：

```
urlToAdd.save({},{success:successCallback , error:errorCallback}); 
```

**编辑**

例子：

```
 var Car,yukon,$target ;
    Object.prototype.toString = function(){
        return JSON.stringify(this);
    };

    Car = Backbone.Model.extend({
        url:"/echo/json"
    });
    yukon= new Car({"color":"red","brand":"GM"});
    $target = $("#target");

    $target.append("describe yukon :",yukon.toString(),"<br/>");

    yukon.save({},
{
success:function(o){$target.append("save success <br/>",o.toString())},
error:function(e){$target.append("error",e)}
}
); 
```

其中 $target 是一个 jquery 对象，表示一个 id 为 target 的 div。

# javascript - 文本输入中的Android onkeypress vs oninput

> ID：10667508
> 
> 赞同：1
> 
> 时间：2012-05-19T17:43:57.447
> 
> 标签：javascript, android, forms, mobile

最近，在为我正在开发的移动网站构建自动完成小部件时，我遇到了这个错误。在 2.3 上测试的 Android 错误地处理了 oninput 事件。它似乎触发了两次而不是一次。android上的firefox似乎正在做这件事。

我不得不更改为 onkeypress 以避免多个事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T20:25:55.830

[https://github.com/ryanseddon/H5F/pull/4](https://github.com/ryanseddon/H5F/pull/4)

似乎“onkeypress”对于这些任务表现更好

# url - 在将 URL 发送到 webView 之前，如何在 URL 末尾添加额外的文本？

> ID：10667510
> 
> 赞同：0
> 
> 时间：2012-05-19T17:44:10.683
> 
> 标签：url, ios5, rss, xcode4.2

这里有一个问题要问大家，我想做的是我想添加`"?tmpl=component&print=0&layout=default&page="`到 articleURL 的末尾，我在 google 上查看并遇到了一些关于`NSMutableString`但我的 articleURL 使用`NSString`.

我该如何实时将此文本添加到我的 articleURL 中，或者我应该在 webView 加载页面之前执行此操作。

webView 也处于不同的视图中。

下面是我认为我的应用程序正在获取 RSS XML 的 URL，但我只是不知道如何修改它以包含所有文章的上述内容。

`code`

```
- (void)parseAtom:(GDataXMLElement *)rootElement entries:(NSMutableArray *)entries {

NSString *blogTitle = [rootElement valueForChild:@"title"];                    

NSArray *items = [rootElement elementsForName:@"entry"];
for (GDataXMLElement *item in items) {

    NSString *articleTitle = [item valueForChild:@"title"];
    NSString *articleDescription = [item valueForChild:@"description"];
    NSString *articleUrl = nil;
    NSArray *links = [item elementsForName:@"link"];        
    for(GDataXMLElement *link in links) {
        NSString *rel = [[link attributeForName:@"rel"] stringValue];
        NSString *type = [[link attributeForName:@"type"] stringValue]; 
        if ([rel compare:@"alternate"] == NSOrderedSame && 
            [type compare:@"text/html"] == NSOrderedSame) {
            articleUrl = [[link attributeForName:@"href"] stringValue];
        }
    }

    NSString *articleDateString = [item valueForChild:@"updated"];        
    NSDate *articleDate = [NSDate dateFromInternetDateTimeString:articleDateString formatHint:DateFormatHintRFC3339];

    RSSEntry *entry = [[[RSSEntry alloc] initWithBlogTitle:blogTitle 
                                              articleTitle:articleTitle
                                        articleDescription:articleDescription
                                                articleUrl:articleUrl
                                               articleDate:articleDate] autorelease];
    [entries addObject:entry];

}      

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T17:53:17.803

你也可以`NSMutableString`代替`NSString`.

你可以使用像 -

```
NSString *extraString = @"?tmpl=component&print=0&layout=default&page=";
[articleUrl stringByAppendingString:extraString]; 
```

`NSMutableString`使用而不是之间的主要区别`NSString`是 -

如果使用`NSString` `[NSString stringByAppendingString:]`，它会生成一个新的不可变 NSString 对象，从而导致内存泄漏。但是，`NSMutableString`它会将字符串附加到同一对象中。

# c# - 使用带有 ASP.NET 的 OpenXML SDK 在内存 Word 文档中流式传输会导致“损坏”文档

> ID：10667513
> 
> 赞同：21
> 
> 时间：2012-05-19T17:44:17.330
> 
> 标签：c#, asp.net, .net, ms-word, openxml

我无法将我即时创建的 Word 文档流式传输到浏览器。我不断收到来自 Microsoft Word 的消息，指出该文档已损坏。

当我通过控制台应用程序运行代码并从图片中删除 ASP.NET 时，文档会正确生成，没有任何问题。我相信一切都围绕着把文件写下来。

这是我的代码：

```
using (MemoryStream mem = new MemoryStream())
{
    // Create Document
    using (WordprocessingDocument wordDocument = WordprocessingDocument.Create(mem, WordprocessingDocumentType.Document, true))
    {
        // Add a main document part. 
        MainDocumentPart mainPart = wordDocument.AddMainDocumentPart();

        new Document(new Body()).Save(mainPart);

        Body body = mainPart.Document.Body;
        body.Append(new Paragraph(new Run(new Text("Hello World!"))));

        mainPart.Document.Save();
        // Stream it down to the browser

        // THIS IS PROBABLY THE CRUX OF THE MATTER <---
        Response.AppendHeader("Content-Disposition", "attachment;filename=HelloWorld.docx");
        Response.ContentType = "application/vnd.ms-word.document";
        mem.WriteTo(Response.OutputStream);
        Response.End();
    }
} 
```

我[查看](https://stackoverflow.com/questions/9307993/asp-net-open-word-document)了很多[链接](https://stackoverflow.com/questions/2477564/why-are-docx-files-being-corrupted-when-downloading-from-an-asp-net-page)——但没有一个很有效。我有很多人使用`MemoryStream.WriteTo`和一些使用`BinaryWrite`- 在这一点上，我不确定正确的方法是什么。我也尝试过更长的内容类型，即`application/vnd.openxmlformats-officedocument.wordprocessingml.document`但没有运气。

一些屏幕截图 – 即使您尝试恢复，您也会得到相同的“部件丢失或无效”

**对于那些偶然发现这个问题的人的解决方案：**

在 的`using`指令中`WordProcessingDocument`，您必须调用：

```
wordDocument.Save(); 
```

同样要正确流式传输`MemoryStream`，请在外部 using 块中使用它：

```
Response.ContentType = "application/vnd.openxmlformats-officedocument.wordprocessingml.document";
Response.AppendHeader("Content-Disposition", "attachment;filename=HelloWorld.docx");
mem.Position = 0;
mem.CopyTo(Response.OutputStream);
Response.Flush();
Response.End(); 
```

![在此处输入图像描述](../Images/c18f7a167d2e6b7b293a4c68f75e1c66.png) ![在此处输入图像描述](../Images/de936567b8a48cdfdb17d03430e2fd13.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-19T19:51:34.997

相反`CopyTo`，`WriteTo`当目标流不支持一次性写入所有内容时，会导致无法写入缓冲区的全部内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-26T09:30:09.523

作为 .NET Framework 3.5 及更低版本的变体。`CopyTo`这个版本的框架在类中没有方法`Stream`。因此，方法`WriteTo`被下一个代码替换：

```
byte[] arr = documentStream.ToArray();
fileStream.Write(arr, 0, arr.Length); 
```

示例由[http://blogs.msdn.com/b/mcsuksoldev/archive/2010/04/09/creating-a-new-microsoft-word-document-from-a-template-using-openxml.aspx找到](http://blogs.msdn.com/b/mcsuksoldev/archive/2010/04/09/creating-a-new-microsoft-word-document-from-a-template-using-openxml.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-19T17:48:45.033

我复制并粘贴了您的代码，并注意到 :"wordDocument.close();" clausule 丢失了，添加了它并且它起作用了（我在 Asp.NET MVC 中做了一个动作）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-19T21:27:10.527

我相信您的 ContentType 值不正确；这适用于 Word 97 - 2003 格式。将其更改为：

```
application/vnd.openxmlformats-officedocument.wordprocessingml.document 
```

看看是否能解决问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-01-16T03:24:17.677

（这是使用 OpenXML SDK v 2.10.0 和 .Net Core v2.2）

我知道这已经得到解答，但我想放弃另一个选择。尝试在 File() 中发送回如下流会导致文档损坏，这是正确的：

```
 MemoryStream updateStream = new MemoryStream();
                wordDocument.Save();
                wordDocument.Clone(updateStream);

                return File(updateStream, "application/vnd.openxmlformats-officedocument.wordprocessingml.document"); 
```

`

一个超级简单的替代方案/解决方法是将您的流简单地转换为如下所示的字节 []，它将产生一个工作字 docx

```
 MemoryStream updateStream = new MemoryStream();
                wordDocument.Save();
                wordDocument.Clone(updateStream);

                return File(updateStream.ToArray(), "application/vnd.openxmlformats-officedocument.wordprocessingml.document"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-03T09:35:56.803

首先，始终包含 Content-Length。如果浏览器不知道 http 响应正文的长度，则连接保持打开状态（保持活动状态）。如果没有其他方法，将内容保存到临时文件（关闭时删除选项），然后获取内容长度。

其次，文档处理 IN-MEM 并非对所有选项都有效（例如，不能在文档中插入块。必须使用文件模式）。

下面是 aspnet core 的示例：

```
[HttpPost]
public async Task<ActionResult<MopedResponse>> PostAsync(IFormCollection collection)
{

    string pathTemp = Path.GetTempFileName(); // get the temp file name

    // create or process the word file

    // reopen it for serving

    FileStream merged = new FileStream(pathTemp, FileMode.Open, FileAccess.Read, FileShare.None, 4096, FileOptions.DeleteOnClose);

    System.Net.Mime.ContentDisposition cd = new System.Net.Mime.ContentDisposition
    {
        FileName = "parafa.docx",
        Inline = true  // false = prompt the user for downloading;  true = browser to try to show the file inline
    };
    Response.Headers.Add("Content-Disposition", cd.ToString());
    Response.Headers.Add("Content-Length", merged.Length.ToString());

    return File(merged, "application/vnd.openxmlformats-officedocument.wordprocessingml.document", "mywordFile1.docx");

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-07-20T18:21:53.260

为了扩展 Rodion 的答案并匹配问题中使用的变量，这对我有用：

```
Response.ContentType = "application/vnd.openxmlformats-officedocument.wordprocessingml.document";
Response.AppendHeader("Content-Disposition", "attachment;filename=HelloWorld.docx");
mem.Position = 0;
byte[] arr = mem.ToArray();
Response.BinaryWrite(arr);
Response.Flush();
Response.End(); 
```

# django - 用于 GAE 设置的 Django 基本 WSGI 处理程序

> ID：10667516
> 
> 赞同：3
> 
> 时间：2012-05-19T17:44:34.640
> 
> 标签：django, google-app-engine

我已经搜索并尝试了大约 3 个小时来进行此设置，但似乎没有任何效果。有人可以发布一个基本的 main.app 和 app.yaml 文件，以便在 GAE 上开始使用 Python 2.7/Django 1.2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T19:30:13.753

我在 Rietveld 源代码中有一个示例： [http ://code.google.com/p/rietveld/source/browse/main.py?name=py27#65](http://code.google.com/p/rietveld/source/browse/main.py?name=py27#65)

选择它的 app.yaml 行在这里： [http ://code.google.com/p/rietveld/source/browse/app.yaml?name=py27#30](http://code.google.com/p/rietveld/source/browse/app.yaml?name=py27#30)

请注意，在 app.yaml 中也选择了 Django 版本： [http ://code.google.com/p/rietveld/source/browse/app.yaml?name=py27#42](http://code.google.com/p/rietveld/source/browse/app.yaml?name=py27#42)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T18:44:55.930

如果你想在 AppEngine 中使用 django，你[应该使用django-nonrel。](https://developers.google.com/appengine/articles/django)他们的 AppEngine 安装页面在[这里](http://www.allbuttonspressed.com/projects/djangoappengine#installation)。

我在 Github 上放了一个[简单的脚本](https://github.com/JuhaS/djangoappengine-script/blob/master/create_djgae.sh)来自动化指南中的一些步骤。

# java - java sql语法错误选择

> ID：10667517
> 
> 赞同：0
> 
> 时间：2012-05-19T17:44:57.010
> 
> 标签：java, sql, select

所以我有这段代码，它应该为我提供一行的 id。

```
public int getIdSala(Connection conn, String t) {
    try {
        String query = "Select id_sala from sala where nume = ?";

        PreparedStatement st = conn.prepareStatement(query);
        st.setString(1, t);
        ResultSet rs = st.executeQuery(query);

        id = rs.getInt("Id_sala");

    } catch (Exception e) {
        System.err.println("Got an exception!");
        System.err.println(e.getMessage());
    }
    return id;
} 
```

我收到以下错误：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQLserver version for the right syntax to use near '?' at line 1 
```

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T17:47:49.377

不做`st.executeQuery(query)`，只是`st.executeQuery()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T17:48:29.693

不要两次传递查询。

```
 ResultSet rs = st.executeQuery(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T17:52:01.860

只需使用`st.executeQuery();`而不是`st.executeQuery(query)`

这是[示例](http://www.roseindia.net/jdbc/jdbc-mysql/TwicePreparedStatement.shtml)

# c# - MS Access DB 搜索时间/性能

> ID：10667518
> 
> 赞同：1
> 
> 时间：2012-05-19T17:45:04.837
> 
> 标签：c#, wpf, database, ms-access, backgroundworker

经过大量搜索试图找到在我的 WPF 应用程序中使用嵌入式 DB 的最佳解决方案后，我终于确定/发现了使用 MS Access DB 的便利性。我曾经玩过 SQL，但基本上一直遇到 Access 最终解决的错误和问题。因此，为了在导入后使用数据库，我只需将 DataSet 拖到 WPF 窗口上，VS 就会生成一堆允许访问的代码。它工作得很好。

但是只有一个问题，那就是 ZipCode 表查找会导致程序停顿 4-5 秒，包括在按键之间挂起。这消除了一些易用性，我想找到一种方法来加快速度。

我曾想过使用 BackgroundWorker，但我似乎无法找到一种仅在适当的时间将命令传递给它的方法。我什至不确定这是否是最好的解决方案，或者是否有其他方法可以提高速度。

在 DB 文件中，邮政编码作为主键，我将两列（邮政编码和位置）都编入索引，这似乎并没有提高性能。下面的两个函数是通过各种文本框的 OnTextChanged 事件来访问的。

任何建议将不胜感激。

```
public void LocateZipCode(TextBox source, TextBox destination)
    {
        LocationsDataSet locationsDataSet = ((LocationsDataSet)this.FindResource("locationsDataSet"));

        // Load data into the table ZipCodes. You can modify this code as needed.
        LocationsDataSetTableAdapters.ZipCodesTableAdapter locationsDataSetZipCodesTableAdapter = new LocationsDataSetTableAdapters.ZipCodesTableAdapter();
        locationsDataSetZipCodesTableAdapter.Fill(locationsDataSet.ZipCodes);
        CollectionViewSource zipCodesViewSource = ((CollectionViewSource)(this.FindResource("zipCodesViewSource")));
        zipCodesViewSource.View.MoveCurrentToFirst();

        try
        {
            if (source.Text.Length == 5)
            {
                destination.Text = locationsDataSet.ZipCodes.FindByZipCode(source.Text).Location.ToString();
            }                
        }
        catch (NullReferenceException)
        {

        }
    }

    #region Area Code Lookup
    public void LocateAreaCode(TextBox source, TextBox destination, TextBox destination2 = null)
    {
        LocationsDataSet locationsDataSet = ((LocationsDataSet)(this.FindResource("locationsDataSet")));

        // Load data into the table AreaCodes. You can modify this code as needed.
        LocationsDataSetTableAdapters.AreaCodesTableAdapter locationsDataSetAreaCodesTableAdapter = new LocationsDataSetTableAdapters.AreaCodesTableAdapter();
        locationsDataSetAreaCodesTableAdapter.Fill(locationsDataSet.AreaCodes);
        CollectionViewSource areaCodesViewSource = ((CollectionViewSource)(this.FindResource("areaCodesViewSource")));
        areaCodesViewSource.View.MoveCurrentToFirst();

        try
        {
            if (source.Text.Length >= 3 && destination2 != null)                                        //Info tab area code check
            {
                destination.Text = locationsDataSet.AreaCodes.FindByArea_Code(source.Text).Location.ToString();
                destination2.Text = locationsDataSet.AreaCodes.FindByArea_Code(source.Text).Time_Zone.ToString();
            }
            else if (source.Text.Length >= 3 && destination.Text.Length == 0 && destination2 == null)   //Other area code checks
            {
                destination.Text = locationsDataSet.AreaCodes.FindByArea_Code(source.Text).Location.ToString();
            }
            else if (source.Text.Length < 3 && destination2 != null)                                    //Info tab area code check
            {
                destination.Text = "";
                destination2.Text = "";
            }
            else if (source.Text.Length < 3 && destination.Text.Length == 0 && destination2 == null)    //Other area code checks
            {
                destination.Text = "";
                if (destination2 != null)
                {
                    destination2.Text = "";
                }
            }
        }
        catch (NullReferenceException)
        {
            destination.Text = "Invalid Area Code";
            if (destination2 != null)
            {
                destination2.Text = "";
            }
        }
    }
    #endregion 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T16:06:04.320

在玩这个的过程中，我实际上自己找到了答案，实际上是一个非常简单的修复，我应该马上注意到。当我复制 VS 生成的代码时，我将整个内容复制到`Locate`由事件调用的方法中，***每次***在文本框中输入字符时`OnTextChanged`，都会导致每个 DB 的新实例。不用说，这是一个巨大的内存消耗。

 *为了解决这个问题，我只是将`DataSet`变量的声明移到了主窗口的类级别，并创建了一个`InitializeDB()`名为 from 的新方法`MainWindow()`。

把这个留在这里（并回答它）以防万一其他人在未来犯下如此荒谬的错误。*

# algorithm - 表示通过有向图传播的信号

> ID：10667519
> 
> 赞同：1
> 
> 时间：2012-05-19T17:45:06.667
> 
> 标签：algorithm, graph, signals, computer-science, simulation

这将有点长，可能比任何特定语言都与计算机科学相关（尽管我需要使用 Java）。你被警告了。

我正在尝试对平行线上的电信号传播进行建模，以模拟基本的计算机硬件。每条路径上都有各种元素，导致我的原始信号延迟、放大和其他此类转换。

这是我刚刚制作的图像：

![我试图代表的一个简单例子](../Images/76399a0d6e70d14bc96e81258e6a6b47.png)

谢天谢地，我不想代表任何复杂的信号——只是 0 和 1。在示例中，有 4 个输入；假设用户选择它们为 1011。然后我需要通过电线将这些输入发送到门中，门产生适当的输出并继续传播信号。

问题是时机。我为每根电线和每一个门分配了一个时间延迟。例如，如果最左上角的线有 0.5 的时间延迟，那么第一个门需要 0.5 个单位的时间来接收输入。我将每个门都绘制为多输入，因此可能会发生以下情况（考虑与门）： input1 在 1.1 个时间单位内到达，并且很高；输出仍然为零。但随后输入 2（也为高）有 1.3 个单位的延迟才能到达那里，因此 0.2 个单位后输出将被重新计算为变高。事实上，每个门本身都会有延迟，所以说与门需要 0.5 个单位来计算；最终的高输出将需要 (1.3 + 0.5) = 1.8 个单位才能变高。

我目前的编程模型是这样的：电线和门是可以相互连接并向前发送信号的对象。例如，wireA_input 连接到实际输入，wireA_output 连接到门。所以输入信号进来了（从之前的值改变），那个动作应该调用 send_signal(wireA, input)。此函数将wireA 上的值更改为wireA_delay 之后的输入值。然后wireA执行send_signal(gateA,wireA_value)，这会导致门重新计算其值，然后在gateA_delay等之后将其转发给下一个对象。

但我需要并行传播信号——我不能只关注一条串行路径！所以我的想法是为每个输入创建多个线程。最多我想我需要32个输入信号，所以32个线程。我很想按循环顺序安排它们以实现平等，我不确定我是否可以用 JVM 做到这一点。无论哪种方式，他们都将获得相同的优先级。

现在第 i 个输入线程执行我上面描述的操作 - 它向下传播信号。但是，当一条路径分支成多条路径时会发生什么？

重要的是要注意门可以有多个“扇出”，即从它们的输出链接到其他地方。该值通常最多为 4。所以在gateA 设置后，它知道它需要调用send_signal(wireB->E,gateA_value) 4 次，每个扇出调用一次。

理想情况下，我不想分支到不同的线程，这对于更大的设计来说真的很糟糕而且可能是不可能的，但是嘿，也许线程的整个概念一开始就没有必要。我不需要以荒谬的速度进行模拟，就足以对人类用户做出响应。

所以回到我可能的实现——一个输入线程沿着串行路径传播，直到 BAM——它分支到 4 个不同的路径。这是我的想法：现在让同一个线程有 4 条路径。每条路径都有自己的延迟（例如：1.4、2.2、3.6、1.1）。将每个延迟乘以 100，并循环 N 次迭代，其中 N 对应于最大延迟（在本例中：360）。在对应于其他延迟（i = 110、140、220）的循环中的各个检查点，将这些不同的路径向前传播一步（即，将信号发送到路径上的紧邻下一个对象）。但随后我们需要将此对象添加到循环列表中，并再次计算适当的迭代次数，然后再沿着该特定路径进一步传播。

当 1 到 4 条路径的所有 4 条路径都分支到另外 4 条路径时（依此类推），那么我有点搞砸了；但也许这种方法足以让我开始？

同样，我可能会从完全错误的方向来解决这个问题，我愿意退后一步重新考虑它。所以我问你们。

非常感谢您的任何意见，甚至阅读这该死的东西。干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T15:54:17.937

如果您的所有延迟都是非负的（安全假设）和确定性的（合理安全的假设），那么每次发生事件时，您都会自动知道它触发了哪些事件*以及它们何时发生*。

为什么不直接为事件使用优先级队列并在它们发生时处理它们？当有事情发生时，计算所有结果事件的时间并将它们添加到队列中；然后从队列中抓取下一个事件并处理它。

# java - 无法在 Eclipse 上使用 Derby 插件

> ID：10667521
> 
> 赞同：0
> 
> 时间：2012-05-19T17:45:10.967
> 
> 标签：java, eclipse, derby

我已经下载了 Derby 的最新稳定版本：

[http://db.apache.org/derby/releases/release-10.8.2.2.cgi](http://db.apache.org/derby/releases/release-10.8.2.2.cgi)

按照建议将其安装到 Eclipse 插件文件夹中。

然后我尝试使用以下指令：

[http://db.apache.org/derby/integrate/plugin_help/start_toc.html](http://db.apache.org/derby/integrate/plugin_help/start_toc.html)

第三步失败：

```
Error: Could not find or load main class org.apache.derby.drda.NetworkServerControl 
```

谷歌搜索，但找不到如何解决此问题的信息。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T10:33:02.133

我通过创建一个**新的干净项目**而不是使用现有项目解决了这个问题！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T14:02:21.377

org.apache.derby.drda.NetworkServerControl 位于 Derby 发行版附带的 derbynet.jar 文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T17:38:53.857

下载 apache derby bin 分发并在任何目录中解压缩，将名称为 DERBY_HOME 的环境变量设置到您的 derby 目录到 \bin 路径现在在您的项目中右键单击并设置 apache derby 性质 现在您可以从 eclipse ide 启动和停止 apache derby

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T13:08:59.550

添加`Derbynet.jar`参考库`org.apache.derby.core_10.8.2`，现在启动 derby 网络服务器。它应该可以工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-18T20:19:24.723

访问网站[http://db.apache.org/derby/releases/release-10.1.3.1.html](http://db.apache.org/derby/releases/release-10.1.3.1.html)
下面你会看到 Eclipse 插件

```
derby_core_plugin_10.1.3.zip [PGP] [MD5]
derby_ui_plugin_1.1.0.zip [PGP] [MD5] 
```

下载这两个zip文件并解压缩。
转到 Eclipse 文件夹中的 Eclipse 文件夹，您将看到 plugins 文件夹放入三个文件夹中

```
org.apache.derby.core_10.1.3
org.apache.derby.plugin.doc_1.1.0`
org.apache.derby.plugin.ui_1.1. 
```

然后打开 Eclipse 并创建一个 Java 项目。
右键单击 Java 项目，您将看到 Apache Derby-->add Apache Derby 自然单击，
您将获得 Apache 库，您可以启动或创建任何您想要的数据库或表，这将正常工作。

# django - haystack 没有索引我的多值

> ID：10667522
> 
> 赞同：2
> 
> 时间：2012-05-19T17:45:21.043
> 
> 标签：django, solr, django-haystack

我试图让 a`MultiValueField`被索引，但它只是不工作。这是我所拥有的：

```
类 Public_PollIndex(SearchIndex):
    text = CharField(model_attr='question', document=True, use_template=True)
    date_created = DateTimeField(model_attr='date_created')
    选择 = MultiValueField()

    def get_model(self):
        返回 Public_Poll

    def prepare_choices(self, obj):
        # 出于某种愚蠢的原因，我们得到 (u"choice",) 而不仅仅是 u"choice"
        # 所以我们解压...
        c = [ str(c) for (c,) in obj.choice_set.values_list('choice') ]
        返回 c

    def index_queryset(self):
        return self.get_model().objects.filter(date_created__lte=datetime.datetime.now())

```

然后我在模板中有：

```
{{ object.question }}
{{ object.date_created }}
{{ object.choices }}

```

使用调试器单步执行会`prepare_choices`返回类似`['foo', 'bar']`

但是当我查看 solr 或者`Public_PollIndex(Public_Poll.objects.get(id=1)).load_all_queryset()`我没有看到`choices`索引的字段时，但其他两个是。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T09:43:27.400

你如何检查`SearchQuerySet`？`Public_PollIndex(Public_Poll.objects.get(id=1)).load_all_queryset()`返回模型`QuerySet`而不是`SearchQuerySet`

尝试

```
SearchQuerySet()[0].text
SearchQuerySet()[0].choices 
```

此外，在模板中，在 forloop 中呈现选择

```
{% for choice in object.choices %}
{{ choice }}
{% endfor %} 
```

此外，

```
return obj.choice_set.values_list('choice', flat=True)

# instead of
c = [ str(c) for (c,) in obj.choice_set.values_list('choice') ]
return c 
```

# jquery - 是否可以在 jquery 中将字符串传递给 dialog()

> ID：10667523
> 
> 赞同：3
> 
> 时间：2012-05-19T17:45:28.133
> 
> 标签：jquery, jquery-ui

`dialog()`我对 Jquery的功能有疑问。我想知道是否将它与之前的选择器一起使用，就像这样

```
$('#dialog').dialog(open)
....

  <div id="dialog" title="Dialog Title">
   <p>Dialog Test</p>
  </div> 
```

如果我可以`"<p>Dialog Test</p>"`以某种方式将它作为纯字符串传递给它？

最好的祝愿

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T17:48:15.607

```
 $('<p></p>').dialog({
        autoOpen:true,
        show: "fold",
        hide: "explode",
        resizable: false,
        modal: true,
        closeOnEscape: true,
        height: 135,
        width: 400,
        title: 'Dialog test',
        buttons:{
            "Ok":function(){
                $(this).dialog("close");
            }
        },
        close:function(){
            //$(this).dialog("destroy");
        }

    }); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-19T17:52:46.703

你可以这样称呼它

```
$("<p>Dialog Test</p>").dialog({

         modal: true,

         buttons: { "Ok": function() { $(this).dialog("close"); } }       

        }); 
```

[工作演示](http://jsfiddle.net/joycse06/F973e/1/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-19T17:51:40.057

是的你可以：

```
$('#dialog').dialog({
    'title' : 'Dialog Title'
}); 
```

这将创建对话框、分配标题并自动打开。要手动打开，请选择自动打开`false`，然后`open`稍后调用：

```
$('#dialog').dialog({
    'title' : 'Dialog Title',
    'autoOpen' : false
});

// ...

$('#dialog').dialog('open'); 
```

# powershell - SQLConnection.open() 在 Server 2003 上的 PowerShell 作业中失败

> ID：10667524
> 
> 赞同：0
> 
> 时间：2012-05-19T17:45:42.417
> 
> 标签：powershell, windows-server-2003, jobs, sqlconnection

以下代码在 W7、Serve2008 上似乎对我有用，但当脚本块作为作业运行时，在 Server 2003 上失败。

```
$scriptblock = [scriptblock]::Create('
$DestinationConnectionString_sql = "Data Source=<myserver>;Initial Catalog=<mydatabase>;User Id=sa;Password=<sapassword>"
$destConnection  = New-Object System.Data.SqlClient.SQLConnection($DestinationConnectionString_sql)
"    Before Open Statement Connection State $($destConnection.State)"
$destConnection.open()
"    After Open Statement Connection State $($destConnection.State)"
$destConnection.close()
')

"--- direct call work on Server 2003 ---"
& $scriptblock

"--- call in PowerShell Job faills on Server 2003 ---"
Get-Job | remove-job -force

$start = Get-date
$job1 = (Start-job $scriptblock).id
"    started"
Wait-Job -id $job1  -timeout 30 | Out-Null
if ((Get-job -id $job1).state -eq 'Running')
{
    Stop-job -id $job1
} 
"    Job State: $((Get-Job).state)"

Receive-job -id $job1
$state1 = (Get-job -id $job1).State
$dauer1 = ((get-date) - $start).Totalseconds
"    Time spent in job: $dauer1" 
```

我已经在我的工作域中使用一些机器测试了脚本。直接执行在任何机器上都没有问题。在 Windows Server 2003 sp 2 上作为作业执行失败。open() 的默认超时 15 秒都不起作用，也没有连接打开。

注意：我可以在这些服务器上的作业中成功运行 sqlcmd。

该问题出现在某些构建代理上，短时间内无法更换。

我需要一个适用于 Server 2003 sp 2 的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T17:52:23.700

这可能是因为 CredSPP 和凭证委托。Windows Server 2003 只有 CredSSP 客户端组件，没有服务器组件。因此，除非 Windows Server 2003 框也是域控制器，否则凭据委派永远不会在那里工作。

# api - 我的 DI 容器的这个 DSL 有意义吗？

> ID：10667529
> 
> 赞同：1
> 
> 时间：2012-05-19T17:46:19.430
> 
> 标签：api, inversion-of-control, usability, dsl, fluent-interface

由于我不是以英语为母语的人，我最好确保不要创建对其他人来说听起来很尴尬的 DSL。一个 DI 容器从一个项目中出现，我将它隔离为一个单独的项目。我看到其他 DI/IOC 容器使用类似`bind(interface).to(class)`. 我会使用以下（伪代码）：

```
given(interface).thenUse(class)
given(class).constructWith(id=5)
given(class).inject(observer).inMethod(addObserver) 
```

这些是有道理的，还是听起来像是一个没有掌握这些词的一些更精细语义的人的结构？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T19:36:05.900

我认为您的方法与其他 DI 项目中的示例一样有意义。

几点注意事项：

1.  `bind`/`to`写起来比`given`/短`thenUse`。这本身不是问题，但是如果您可以使用较短的名称实现相同的含义，则没有太多理由使用较长的名称（在给定的示例中，它们的读法相同）

2.  如果有一个用于相同用途的既定名称模式，那么对于知道您实现的既定模式的用户来说，生活会更容易（例如掌握概念/含义），这将是一个好处。

    如果您在将其他类似库/工具的用户“转换”为您的用户之后，使用 smae 命名约定可以降低这些用户的进入门槛。

    但是，如果您的实现在某些方面在概念上有所不同，那么最好使用不同的名称来强调差异并减少认知失调（在预期和正在发生的事情之间）。

    如果您认为（其中一种）其他命名模式存在缺陷，会造成认知失调（在名称所暗示的内容和实际作用之间），那么用更好的命名方案替换它可能意味着更多的追随者。

3.  虽然`given(class).inject(param).inMethod(method)`用英语读得很好，但它的对象顺序可能对某些人来说是违反直觉的（类/参数/方法，而不是类/方法/参数，这是面向对象语言的自然顺序：）`Class.method(param);`；考虑：`given(class).and(method).useParam(param)`

# android - MapView 无法解析或不是字段

> ID：10667530
> 
> 赞同：0
> 
> 时间：2012-05-19T17:46:23.063
> 
> 标签：android, android-sdk-2.3

嗨，我是 Android 编程和 Eclipse 的新手。我在以下程序中遇到错误“无法解析 MapView 或不是字段”：

```
 import java.util.List;

   import android.app.AlertDialog;
   import android.content.DialogInterface;
   import android.content.Intent;
   import android.graphics.Canvas;
   import android.graphics.Paint;
   import android.graphics.Point;
   import android.graphics.RectF;
   import android.location.Location;
   import android.os.Bundle;
   import android.view.MotionEvent;

  import com.google.android.maps.GeoPoint;
  import com.google.android.maps.MapActivity;
  import com.google.android.maps.MapView;
  import com.google.android.maps.Overlay;
  import com.google.android.maps.Projection;

public class Map extends MapActivity {

MapView map;
long start;
long stop;
private final int mRadius = 5;

public void onCreate(Bundle SavedInstanceState) {
    super.onCreate(SavedInstanceState);
    setContentView(R.layout.mapview);
    map = (MapView)findViewById(R.id.mvMapview);
    map.setBuiltInZoomControls(true);
    map.displayZoomControls(true);
    map.setSatellite(true);
    map.setStreetView(true);
    Touchy t = new Touchy();
    List<Overlay> overlaylist = map.getOverlays();
    overlaylist.add(t);

    }
    public void draw(Canvas canvas, MapView mapView, boolean shadow){
    Projection projection = mapView.getProjection();

    if (shadow == false) {
        Bundle extras = getIntent().getExtras();{
            if(extras!=null){
                String longitude =extras.getString("Longitude");
                String latitude =extras.getString("Latitude");
            }
        }

        double latitude;
        double longitude; 
        GeoPoint geoPoint;
        geoPoint = new GeoPoint((int) ( latitude *1E6), (int) (longitude * 1E6));

        Point point = new Point();
        projection.toPixels(geoPoint, point);
        RectF oval = new RectF(point.x - mRadius, point.y - mRadius, point.x + mRadius, point.y + mRadius);

        Paint paint = new Paint();
        paint.setARGB(250, 255, 255, 255);
        paint.setAntiAlias(true);
        paint.setFakeBoldText(true);

        Paint backPaint = new Paint();
        backPaint.setARGB(175, 50, 50, 50);
        backPaint.setAntiAlias(true);
        RectF backRect = new RectF(point.x + 2 + mRadius, point.y - 3*mRadius, point.x + 65, point.y + mRadius);

        canvas.drawOval(oval, paint);
        canvas.drawRoundRect(backRect, 5, 5, backPaint);
        canvas.drawText("This is it", point.x + 2*mRadius, point.y,paint);
}
    super.draw(canvas.MapView.shadow);      
} 
```

我不知道为什么会弹出这个错误。我已经尝试修复它，但地图视图错误始终存在

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T19:06:36.170

从 Eclipse 主菜单中选择 Project > Properties。在“属性”窗口中，单击左侧类别列表中的 Android。然后，在右侧的清单中选择包含 Google API 的构建目标。单击确定关闭窗口。

# mysql - MySQL - 无法在查询中获得正确的 order_by 和 group_by

> ID：10667533
> 
> 赞同：0
> 
> 时间：2012-05-19T17:47:07.867
> 
> 标签：mysql, sql

我有这个查询：

```
select comment_id , section_name , comment , solution_part , display_order from 
solution_sections 
left join suggested_solution_comments on 
solution_sections.solution_section_id = suggested_solution_comments.solution_part and problem_id = 400
order by display_order; 
```

我想要返回的是按 display_order 列排序的所有项目（甚至是 null），如果有些项目具有相同的 display_order，那么这些项目应该按 comment_id 排序

有没有办法做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T17:49:52.933

除非我错过了什么，否则`order by display_order, comment_id`应该给你你想要的

# java - java线程效果和竞争条件

> ID：10667540
> 
> 赞同：-3
> 
> 时间：2012-05-19T17:47:52.853
> 
> 标签：java, multithreading

> **可能重复：**
> [java线程对静态类的影响](https://stackoverflow.com/questions/10664346/java-threads-effect-on-static-classes)

考虑以下代码：

```
 static class ThreadTest extends Thread {
        int x;
        int[] y;

        public ThreadTest(int x, int[] y) {
            this.x = x;
            this.y = y;
        }

        @Override
        public void run() {
            while (x< 10) {
                ++x;
                System.out.print("0");
            }
            while (y[0] < 10) {
                ++y[0];
                System.out.print('1');
            }
        }
    }

    public static void main(String args[]) {
        int x = 0;
        int[] y = new int[1];
        y[0] = 0;

        Thread A = new ThreadTest(x, y);
        Thread B = new ThreadTest(x, y);

        B.start();
        A.start();
    } 
```

显然存在竞争条件。我如何评估将打印的 1 的最大和最小数量？什么可能导致打印的数量发生变化 1？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T18:44:13.260

1s的最小数量显然是10，最大数量将是20。

20 因为最坏的情况是两个线程都到达

```
while (y[0] < 10) 
```

每次同时，然后再次到达

```
++y[0]; 
```

每次也是在同一时间，这将导致其中一个增量丢失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T17:56:02.530

最大数量为 10 + 9 + 8 + 7 + 6 + 5 + 4 + 3 +2 + 1；假设一个线程执行了 10 次写入 1。比另一个线程值 y[0] == 0 执行 1 次。第一个线程可以再次从第二个线程停止的地方运行最多 10 个循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T18:23:53.380

首先，请参阅我对这个问题的评论。

```
 public void run() {
        x = 0;

        y[0] = 0;             // line a
        while (x< 10) {      
            ++x;
            System.out.print("0");
        }

        while (y[0] < 10) {   // line b
            ++y[0];
            System.out.print('1');
        }
    } 
```

如果线程 A 和线程 B 同时到达`line b`和`line a`，将打印**10 个1。**如果线程 A 正在运行它的循环并且`y[0]`刚刚递增到 10 但尚未测试真假，此时线程 B 到达`line a`并且它变为`y[0]`0，那么线程 A 获得了 10 次打印“1”的机会，所以计数是**20**。

# android - PopUpWindow 上的 Android Null ImageView

> ID：10667542
> 
> 赞同：0
> 
> 时间：2012-05-19T17:48:00.050
> 
> 标签：android, nullpointerexception, imageview, popupwindow

我有一个弹出窗口，我想显示一个图像和两个按钮。确实会出现按钮，但是当我尝试使用 ImageView 时会引发空指针异常。下面是我显示 PopUpWindow 的代码片段：

```
private void initiatePopupWindow() {
        try {
            //We need to get the instance of the LayoutInflater, use the context of this activity
            LayoutInflater inflater = (LayoutInflater) RestPageActivity.this
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            //Inflate the view from a predefined XML layout
            View layout = inflater.inflate(R.layout.popup_details,
                    (ViewGroup) findViewById(R.id.popup_element));
            // create a 300px width and 470px height PopupWindow
            System.out.println("SELECTED INDEX" + selectedIndex + "***" + IDs.size());

            System.out.println("ITEM ID:" + IDs.get(selectedIndex) + "--------------");
            ImageView iv = (ImageView) findViewById(R.id.ivItem);

            if (StaticParameters.getCompleteData().getMenusHash().containsKey(IDs.get(selectedIndex))) {
                Menu m = StaticParameters.getCompleteData().getMenusHash().get(IDs.get(selectedIndex));
                byte[] imgBytes = FileHandler.readFile2(this, "items", m.getActiveImage());
                System.out.println("///////////////77" + imgBytes.length + "//" + m.getActiveImage());
                if (imgBytes != null && iv != null) {
                    Bitmap b = BitmapFactory.decodeByteArray(imgBytes, 0, imgBytes.length);
                    iv.setImageBitmap(b);

                    Matrix mMatrix = new Matrix();
                    mMatrix.setRectToRect(new RectF(0, 0, iv.getMeasuredWidth(), iv.getMeasuredHeight()), new RectF(0, 0, 100, 100), Matrix.ScaleToFit.CENTER);
                } else
                    System.out.println("else geldi");

            } else if (StaticParameters.getCompleteData().getProductsHash().containsKey(IDs.get(selectedIndex))) {
                Product m = StaticParameters.getCompleteData().getProductsHash().get(IDs.get(selectedIndex));
                byte[] imgBytes = FileHandler.readFile2(this, "items", m.getActiveImage());
                System.out.println("///////////////77" + imgBytes.length + "//" + m.getActiveImage());
                if (imgBytes != null && iv != null) {
                    Bitmap b = BitmapFactory.decodeByteArray(imgBytes, 0, imgBytes.length);
                    iv.setImageBitmap(b);

                    Matrix mMatrix = new Matrix();
                    mMatrix.setRectToRect(new RectF(0, 0, iv.getMeasuredWidth(), iv.getMeasuredHeight()), new RectF(0, 0, 100, 100), Matrix.ScaleToFit.CENTER);
                } else
                    System.out.println("else geldi");
            }

            pw = new PopupWindow(layout, 300, 470, true);
            // display the popup in the center
            pw.showAtLocation(layout, Gravity.CENTER, 0, 0);

            //mResultText = (TextView) layout.findViewById(R.id.server_status_text);
            Button cancelButton = (Button) layout.findViewById(R.id.cancelButton);
            //makeBlack(cancelButton);
            cancelButton.setOnClickListener(cancel_button_click_listener);
            Button approveButton = (Button) layout.findViewById(R.id.completeButton);
            //makeBlack(cancelButton);
            approveButton.setOnClickListener(approve_button_click_listener);

        } catch (Exception e) {
            e.printStackTrace();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T18:03:22.930

如果您在活动中声明了一个属性

```
private ImageView iv; 
```

你必须改变：

```
ImageView iv = (ImageView) findViewById(R.id.ivItem); 
```

经过

`iv = (ImageView) findViewById(R.id.ivItem);` 你得到这个 nullPointer 异常是因为你在本地声明它就是你的问题所在

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-30T07:05:49.237

更改此行

```
ImageView iv = (ImageView) findViewById(R.id.ivItem); 
```

到

```
ImageView iv = (ImageView) layout.findViewById(R.id.ivItem); 
```

# c++ - 从 FILE* 指针创建 fstream 对象

> ID：10667543
> 
> 赞同：29
> 
> 时间：2012-05-19T17:48:01.263
> 
> 标签：c++, popen, ifstream

众所周知的创建**`fstream`**对象的方法是：

```
ifstream fobj("myfile.txt"); 
```

IE。使用文件名。

但我想使用文件描述符创建一个 ifstream 对象。

> **原因：**我想使用`_popen()`**.** `_popen()`以 a 形式返回输出`FILE*`。所以有一个 FILE* 指针，但没有文件名。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T17:51:44.653

您不能仅在标准 C++ 中做到这一点，因为 iostream 和 CI/O 是完全独立且不相关的。但是，您可以编写*自己*的由 C 文件流支持的 iostream。我相信 GCC 带有一个这样的流类作为库扩展。

或者，如果您只想要一种包装 C 文件流的对象-y 方式，则可以为此目的[使用唯一指针。](https://codereview.stackexchange.com/questions/4679/shared-ptr-and-file-for-wrapping-cstdio-update-also-dlfcn-h)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2014-10-10T14:35:26.790

您可以创建一个字符串，并使用 fread 读取并附加到它。它不干净，但您正在使用 C 接口。

像这样的东西应该工作：

```
FILE * f = popen(...)
const unsigned N=1024;
string total;
while (true) {
    vector<char> buf[N];
    size_t read = fread((void *)&buf[0], 1, N, f);
    if (read) { total.append(buf.begin(), buf.end()); }
    if (read < N) { break; }
}
pclose(f); 
```

# wpf - 为什么 IsMouseOver 被识别而 MouseDown 不是（Wpf 样式触发器）？

> ID：10667545
> 
> 赞同：12
> 
> 时间：2012-05-19T17:48:17.243
> 
> 标签：wpf, triggers, styles

为什么 IsMouseOver 被识别为 WPF 样式触发器而 MouseDown 不是 - 鉴于两者都是有效的 UIElement 属性，如此[处所示](http://msdn.microsoft.com/en-us/library/system.windows.controls.image.aspx)-。第一个触发器运行良好，但第二个触发器甚至无法编译。

```
<Style.Triggers>
    <Trigger Property="IsMouseOver" Value="true">
        <Setter Property="OpacityMask">
            <Setter.Value>
                <LinearGradientBrush >
                    <GradientStop Color="Transparent" Offset="0"/>
                    <GradientStop Color="Black" Offset="0.5"/>
                    <GradientStop Color="Transparent" Offset="1"/>
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>
    </Trigger>
    <Trigger Property="MouseDown" Value="true">
        <Setter Property="OpacityMask">
            <Setter.Value>
                <LinearGradientBrush>
                    <GradientStop Color="Black" Offset="0" />
                    <GradientStop Color="White" Offset="1" />
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>
    </Trigger>
</Style.Triggers> 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-19T18:03:11.760

好吧，我猜你把`MouseDown`事件误认为是财产。没有`IsMouseDown`属性，但存在类似`IsPressed`的属性，但仅适用于继承的类`ButtonBase`。如果您想保持代码隐藏干净，您应该只在代码隐藏中使用事件或编写附加属性。

这就是你的做法。创建类：

```
using System;
using System.Windows;

namespace Mrpyo
{
    public static class MouseDownHelper 
    {
        public static readonly DependencyProperty IsEnabledProperty = DependencyProperty.RegisterAttached("IsEnabled", 
        typeof(bool), typeof(MouseDownHelper), new FrameworkPropertyMetadata(false, new PropertyChangedCallback(OnNotifyPropertyChanged)));

        public static void SetIsEnabled(UIElement element, bool value)
        {
            element.SetValue(IsEnabledProperty, value);
        }

        public static bool GetIsEnabled(UIElement element)
        {
            return (bool)element.GetValue(IsEnabledProperty);
        }

        private static void OnNotifyPropertyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            var element = d as UIElement;
            if (element != null && e.NewValue != null)
            {
                if ((bool)e.NewValue)
                {
                    Register(element);
                }
                else
                {
                    UnRegister(element);
                }
            } 
        }

        private static void Register(UIElement element)
        {
            element.PreviewMouseDown += element_MouseDown;
            element.PreviewMouseLeftButtonDown += element_MouseLeftButtonDown;
            element.MouseLeave += element_MouseLeave;
            element.PreviewMouseUp += element_MouseUp;
        }

        private static void UnRegister(UIElement element)
        {
            element.PreviewMouseDown -= element_MouseDown;
            element.PreviewMouseLeftButtonDown -= element_MouseLeftButtonDown;
            element.MouseLeave -= element_MouseLeave;
            element.PreviewMouseUp -= element_MouseUp;
        }

        private static void element_MouseDown(object sender, System.Windows.Input.MouseButtonEventArgs e)
        {
            var element = sender as UIElement;
            if (element != null)
            {
                SetIsMouseDown(element, true);
            }
        }

        private static void element_MouseLeftButtonDown(object sender, System.Windows.Input.MouseButtonEventArgs e)
        {
            var element = sender as UIElement;
            if (element != null)
            {
                SetIsMouseLeftButtonDown(element, true);
            }
        }

        private static void element_MouseLeave(object sender, System.Windows.Input.MouseEventArgs e)
        {
            var element = sender as UIElement;
            if (element != null)
            {
                SetIsMouseDown(element, false);
                SetIsMouseLeftButtonDown(element, false);
            }
        }

        private static void element_MouseUp(object sender, System.Windows.Input.MouseButtonEventArgs e)
        {
            var element = sender as UIElement;
            if (element != null)
            {
                SetIsMouseDown(element, false);
                SetIsMouseLeftButtonDown(element, false);
            }
        }

        internal static readonly DependencyPropertyKey IsMouseDownPropertyKey = DependencyProperty.RegisterAttachedReadOnly("IsMouseDown",
        typeof(bool), typeof(MouseDownHelper), new FrameworkPropertyMetadata(false));
        public static readonly DependencyProperty IsMouseDownProperty = IsMouseDownPropertyKey.DependencyProperty;

        internal static void SetIsMouseDown(UIElement element, bool value)
        {
            element.SetValue(IsMouseDownPropertyKey, value);
        }

        public static bool GetIsMouseDown(UIElement element)
        {
            return (bool)element.GetValue(IsMouseDownProperty);
        }

        internal static readonly DependencyPropertyKey IsMouseLeftButtonDownPropertyKey = DependencyProperty.RegisterAttachedReadOnly("IsMouseLeftButtonDown",
        typeof(bool), typeof(MouseDownHelper), new FrameworkPropertyMetadata(false));
        public static readonly DependencyProperty IsMouseLeftButtonDownProperty = IsMouseLeftButtonDownPropertyKey.DependencyProperty;

        internal static void SetIsMouseLeftButtonDown(UIElement element, bool value)
        {
            element.SetValue(IsMouseLeftButtonDownPropertyKey, value);
        }

        public static bool GetIsMouseLeftButtonDown(UIElement element)
        {
            return (bool)element.GetValue(IsMouseLeftButtonDownProperty);
        }
    }
} 
```

然后按照你的风格：

```
<Setter Property="local:MouseDownHelper.IsEnabled" Value="True"/>
<Style.Triggers>
    <Trigger Property="local:MouseDownHelper.IsMouseLeftButtonDown" Value="True">
        <!-- ... -->
    </Trigger>
</Style.Triggers> 
```

当然，在您的 XAML 文件中添加命名空间（查看顶部）：

```
xmlns:local="clr-namespace:Mrpyo" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T03:30:50.220

您可以在其中使用[MouseDown 事件](http://msdn.microsoft.com/en-us/library/system.windows.uielement.mousedown.aspx)，`Style.Triggers`但您必须为此使用[EventTrigger](http://msdn.microsoft.com/en-us/library/system.windows.eventtrigger.aspx)。

```
<EventTrigger RoutedEvent="MouseEnter">
    <BeginStoryboard>
        <Storyboard>
            ...
        </Storyboard>
    </BeginStoryboard>
</EventTrigger> 
```

记住这一点

> 一旦引发事件的条件不再为真，该操作将不会被撤消。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-19T22:50:55.773

在使用 Control.Triggers 时，您可以使用 PreviewMouseLeftButtonDown，将控件替换为正在使用模板的控件项：

```
<Grid>
  <Grid.Triggers>
    <EventTrigger RoutedEvent="Grid.PreviewMouseLeftButtonDown">
      <BeginStoryboard>
        <Storyboard>
          ...
        </Storyboard>
      </BeginStoryboard>
    </EventTrigger>
  </Grid.Triggers>
</Grid> 
```

# plugins - 重新使用 NppExec 的控制台为 Notepad++ 开发一个单独的插件——可以吗？

> ID：10667548
> 
> 赞同：1
> 
> 时间：2012-05-19T17:48:32.080
> 
> 标签：plugins, notepad++, nppexec

我将为记事本++创建自己的插件。有必要在我的插件中使用控制台，但我不想创建另一个控制台，因为 NppExec 插件中有一个。所以我的问题是我可以从我自己的插件中使用 NppExec 控制台吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T21:48:34.260

我从 NppExec 论坛得到了答案[https://sourceforge.net/projects/npp-plugins/forums/forum/672146/topic/5287950](https://sourceforge.net/projects/npp-plugins/forums/forum/672146/topic/5287950)

**从上面的链接编辑** 粘贴：

> 当然！您可以在 NppExec 的源代码中查看 NppExecPluginMsgTester 并部分或全部使用它的代码。NppExecPluginMsgTester 使用在“NppExec\src\PluginCommunication\nppexec_msgs.h”中声明的消息“包装器”。

这里以 NppExec 源代码为例：

```
#define  NPEM_PRINT             0x0401  // message
  /*
  Prints (shows) given text in NppExec's Console window. 
  You can separate text lines using _T('\n') or _T("\r\n").
  This text can be highlighted if NppExec's Console Highlight Filters are used.

  If plugin's state is "busy", this message is ignored.

  Example:

  const TCHAR* cszMyPlugin = _T("my_plugin");
  DWORD dwState = 0;
  CommunicationInfo ci = { NPEM_GETSTATE, 
                           cszMyPlugin, 
                           (void *) &dwState };
  ::SendMessage( hNppWnd, NPPM_MSGTOPLUGIN,
      (WPARAM) _T("NppExec.dll"), (LPARAM) &ci );

  if ( dwState == NPE_STATEREADY )
  {
    // the plugin is "ready"
    const TCHAR* szText = _T("Hello from my plugin!\n(test message)")
    CommunicationInfo ci = { NPEM_PRINT,
                             cszMyPlugin, 
                             (void *) szText };
    ::SendMessage( hNppWnd, NPPM_MSGTOPLUGIN,
        (WPARAM) _T("NppExec.dll"), (LPARAM) &ci );
  }
  */ 
```

# .htaccess - 使用 .htaccess 更改动态 url

> ID：10667549
> 
> 赞同：1
> 
> 时间：2012-05-19T17:48:32.877
> 
> 标签：.htaccess

我有以下网址结构：

```
www.mysite.com/temporary/articles.php?artid=1 
```

我想用

```
www.mysite.com/temporary/articles/article-title-here. 
```

谁能告诉我我该怎么做？

我也有两个变量的链接：

```
www.mysite.com/temporary/products.php?catid=1&productid=1 
```

我正在努力做到这一点：

```
www.mysite.com/temporary/products.php/category-name/product-name 
```

提前致谢。

卓然

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T22:42:05.087

为此，您将需要某种类型的脚本，可以将文章/类别/产品名称映射到 ID。就编写此脚本而言，您是靠自己的，但它可以按照以下方式进行：

1.  如果有一个查询字符串变量`article-name`，则取其值，查找数据库（或您正在使用的任何存储）并查看文章 ID 是什么，然后加载`/temporary/articles.php?artid=ID`，其中 ID 是给定标题的 ID。
2.  如果有查询字符串变量`product-name`和/或`category-name`，查找数据库以查看这些名称的类别和产品 ID，然后`/temporary/products.php?catid=1&productid=1`使用适当的 ID 加载。
3.  否则，请执行返回 404 之类的操作

假设您编写的这个 php 脚本位于`/my-controller.php`

```
RewriteRule ^temporary/articles/(.+)$ /my-controller.php?article-name=$1 [L]
RewriteRule ^temporary/products.php/([^/]+)/(.+) /my-controller.php?category-name=$1&product-name=$2 
```

因此，如果有人请求[http://www.mysite.com/temporary/articles/foo-article](http://www.mysite.com/temporary/articles/foo-article)，它将被重写为`/my-controller.php?article-name=foo-article`并且当有人请求[http://www.mysite.com/temporary/products.php/bars/foo -product](http://www.mysite.com/temporary/products.php/bars/foo-product)，它将被重写`/my-controller.php?category-name=bars&product-name=foo-product`，这取决于您编写的脚本来进行必要的 ID 查找，然后将其传递给 article.php 或 products.php 脚本。

# javascript - Javascript / jQuery - 检测浏览器高度 - 简单修复？

> ID：10667553
> 
> 赞同：2
> 
> 时间：2012-05-19T17:48:47.393
> 
> 标签：javascript, jquery, css, html, height

在我从几个同事那里得到一些帮助后，建议解决我的问题： [DIV“100%”高度，从顶部 DIV 延伸到底部页脚以适应背景](https://stackoverflow.com/questions/10274520/div-100-height-stretch-from-top-div-to-bottom-footer-to-accommodate-backgrou) 是 JavaScript / jQuery，我在网上找到了一些东西：

[http://nicholasbarger.com/2011/08/04/jquery-makes-100-height-so-much-easier/](http://nicholasbarger.com/2011/08/04/jquery-makes-100-height-so-much-easier/)

但是，我需要一些定制。目前它做了我需要它做的事情。当我有一点内容时，它会将我的 DIV 推到浏览器的整个高度。

但是当我有更多内容时，内容会继续，但 DIV 不会扩展。

**如何自定义以下脚本，以便它检测到是否有足够的内容不需要调整高度？**

```
<script>
//Initial load of page
$(document).ready(sizeContent);

//Every resize of window
$(window).resize(sizeContent);

//Dynamically assign height
function sizeContent() {
    var newHeight = $("html").height() - $("#header").height() - $("#content-header").height()- $("#footer-wrapper").height() + 6 + "px";
    $("#content").css("height", newHeight);
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T17:56:23.100

```
function sizeContent() {
    var html = $("html").height(),
        content = $("#content").height(),
        header = $("#header").height(),
        contentHeader = $("#content-header").height(),
        footerWrapper = $("#footer-wrapper").height(),
        availableSpace = html - header - contentHeader - footerWrapper;

    if (content < availableSpace) {
        $("#content").css("height", availableSpace + 6 + "px");
    }
} 
```

# html - 停止 CSS 动画

> ID：10667554
> 
> 赞同：0
> 
> 时间：2012-05-19T17:48:50.813
> 
> 标签：html, css, animation

我有以下代码在将鼠标悬停在容器 div 上时为图像类设置动画。但是，如果图像处于动画中间并且用户停止悬停，则动画会暂停——这看起来有点奇怪。

有没有办法停止或恢复 CSS 动画到它的静态状态？

```
.image{
    animation-play-state: paused;
    }

#container:hover .image{
    animation-play-state: running;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T17:57:41.123

在动画播放之前获取图像的屏幕截图？.image1{ background-image: "yourimage" } #container:hover .image{ 动画播放状态：正在运行；}

并将 image1 设置为静态图像，并将悬停保持为动画。这不是一个失败的证明，但应该在理论上起作用。

# android - 使用数据库和 midi 流媒体进行应用程序开发。

> ID：10667555
> 
> 赞同：0
> 
> 时间：2012-05-19T17:48:54.153
> 
> 标签：android, database, streaming

我正在寻找一些关于我希望继续进行的应用程序创意的一般信息，我不太了解应用程序如何与数据库等工作，所以如果我不正确，请通知我。

基本上我正在寻找的是设计一个可以播放midi文件的应用程序。假设我有 100 个 MIDI 文件，我希望应用程序做的就是播放它们。对我来说，最好的想法是为所有的 midi 文件创建一个数据库，然后让应用程序访问数据库以加载存储的内容。我希望用户能够浏览服务器上的 midis，并可以选择流式传输或下载文件。该应用程序通常很简单，但我不确定如何构建数据库以满足此需求。任何想法提示和其他信息都将受到欢迎，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:41:04.597

你对这些文件有什么信息？如果这对您来说更简单，您也可以将此信息存储在文本文件中。

您可以只使用 MediaPlayer 根据 url/文件名播放它们，然后显示曲目信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T21:08:30.973

请查看[SQLDatabase](http://developer.android.com/guide/topics/data/data-storage.html#db)的官方文档。它可能会帮助你。

在您的情况下，您可能应该在数据库中为每个要播放的 midi 文件设置几列，例如：

*   ID
*   姓名
*   下载状态（是否在缓存中）
*   服务器上的文件 uri（用于远程播放或下载）
*   本地 uri（已下载的缓存文件）

# java - 这个 Richfaces 菜单渲染有什么问题？

> ID：10667558
> 
> 赞同：1
> 
> 时间：2012-05-19T17:49:46.400
> 
> 标签：java, css, jsf, richfaces, rendering

我正在尝试修复这个 jsf richfaces 菜单。有些组件不尊重我给出的高度： ![注意红色右边框](../Images/79d04991ec0c716e9f6598156b660f8f.png)

这是我的jsf代码：

```
 <div style="background:url(#{facesContext.externalContext.request.contextPath}/images/sigelp_menubar_bg.jpg) repeat-x #4a71a5; text-align:left; height:30px; width:100%; border:0;">
        <h:form style="height:30px">
            <rich:toolbar style="width:auto; background: none; height:30px; vertical-align:middle; padding:0;" itemStyle="border-right: 1px solid red; padding:0; margin:0; height: 30px;"> 
                <rich:toolbarGroup style="padding:0; margin:0;">
                    <rich:dropDownMenu style="padding:0; background:none; height:30px" >
                        <f:facet name="label" style="padding:0; margin:0;">
                            <h:outputText value="Administrar" />
                        </f:facet>
                        <rich:menuGroup label="Estadios" rendered="#{seguridadBean.validarPermisoAdministrarEstadios}" iconDisabled="true">
                            <rich:menuItem label="Listar" action="#{menuBean.listarEstadios}" rendered="#{seguridadBean.validarPermisoListarEstadios}"/>
                            <rich:menuItem label="Agregar" action="#{menuBean.agregarEstadio}" rendered="#{seguridadBean.validarPermisoAgregarEstadios}"/>
                        </rich:menuGroup>
                        <rich:menuGroup label="Deportes" rendered="#{seguridadBean.validarPermisoAdministrarDeportes}">
                            <rich:menuItem label="Listar" action="#{menuBean.listarDeportes}" rendered="#{seguridadBean.validarPermisoListarDeportes}"/>
                            <rich:menuItem label="Agregar" action="#{menuBean.agregarDeporte}" rendered="#{seguridadBean.validarPermisoAgregarDeportes}"/>
                        </rich:menuGroup>
                        <rich:menuGroup label="Equipos" rendered="#{seguridadBean.validarPermisoAdministrarEquipos}">
                            <rich:menuItem label="Listar" action="#{menuBean.listarEquipos}" rendered="#{seguridadBean.validarPermisoListarEquipos}"/>
                            <rich:menuItem label="Agregar" action="#{menuBean.agregarEquipo}" rendered="#{seguridadBean.validarPermisoAgregarEquipos}"/>
                        </rich:menuGroup>
                        <rich:menuGroup label="Torneos" rendered="#{seguridadBean.validarPermisoAdministrarTorneos}">
                            <rich:menuItem label="Listar" action="#{menuBean.listarTorneos}" rendered="#{seguridadBean.validarPermisoListarTorneos}"/>
                            <rich:menuItem label="Agregar" action="#{menuBean.agregarTorneo}" rendered="#{seguridadBean.validarPermisoAgregarTorneos}"/>
                        </rich:menuGroup>
                        <rich:menuGroup label="Empleados" rendered="#{seguridadBean.validarPermisoAdministrarEmpleados}">
                            <rich:menuItem label="Listar" action="#{menuBean.listarEmpleados}" rendered="#{seguridadBean.validarPermisoListarEmpleados}"/>
                            <rich:menuItem label="Agregar" action="#{menuBean.agregarEmpleado}" rendered="#{seguridadBean.validarPermisoAgregarEmpleados}"/>
                        </rich:menuGroup>
                        <rich:menuItem label="Categorias" action="#{menuBean.administrarCategorias}" rendered="#{seguridadBean.validarPermisoAdministrarCategorias}"/>
                        <rich:menuGroup label="Seguridad" rendered="#{seguridadBean.validarPermisoAdministrarSeguridad}">
                            <rich:menuItem label="Usuarios" action="#{menuBean.listarUsuarios}" rendered="#{seguridadBean.validarPermisoListarUsuarios}"/>
                            <rich:menuGroup label="Perfiles" rendered="#{seguridadBean.validarPermisoAdministrarPerfiles}">
                                <rich:menuItem label="Listar" action="#{menuBean.listarPerfiles}" rendered="#{seguridadBean.validarPermisoListarPerfiles}"/>
                                <rich:menuItem label="Agregar" action="#{menuBean.agregarPerfil}" rendered="#{seguridadBean.validarPermisoAgregarPerfiles}"/>   
                            </rich:menuGroup>
                        </rich:menuGroup>
                    </rich:dropDownMenu>
                    <rich:menuItem label="Administrar socios" action="#{menuBean.administrarSocios}" rendered="#{seguridadBean.validarPermisoAdministrarSocios}"/>
                    <rich:dropDownMenu>
                        <f:facet name="label">
                            <h:outputText value="Cuotas sociales" />
                        </f:facet>
                        <rich:menuItem label="Generar cuotas sociales" action="#{menuBean.generarCuotasSociales}"/>
                        <rich:menuItem label="Listar cuotas sociales sin rendir" action="#{menuBean.listarCuotasSocialesSinRendir}"/>
                    </rich:dropDownMenu>
                    <rich:menuItem label="Vender entradas" action="#{menuBean.venderEntradas}"/>
                </rich:toolbarGroup>
                <rich:toolbarGroup location="right">
                    <rich:menuItem label="Salir" action="#{loginBean.logout}" />
                    <ui:insert name="backButton">
                        <a4j:region>
                        <h:commandLink action="#{seguridadBean.volver}" rendered="#{seguridadBean.showBackButton}" immediate="true">
                            <h:graphicImage value="/images/arrows/arrow-left.png" alt="Volver" style="border: 0px;" width="32"/>
                        </h:commandLink>
                        </a4j:region>
                    </ui:insert>
                </rich:toolbarGroup>
            </rich:toolbar>
        </h:form>
    </div> 
```

还有一些通过 CSS 修复的意图：

> ```
>  .rf-ddm-itm-unsel{   border:0;   }    .rf-ddm-lbl-dec{   height:100%; } 
> ```
> 
> .rf-ddm-itm:hover {边距:0; 填充：0；背景：#7BA0D2；}
> 
> .rf-tb-itm{ 高度：30px; }
> 
> .rf-tb {填充：0；边距：0；}
> 
> .rf-tb-itm，.rf-ddm-lbl，.rf-ddm-unsel{ 行高：30px；填充：0；边距：0；}

任何提示或帮助将不胜感激，非常感谢

红色边框在里面定义`<rich:toolbar itemStyle="border-right: 1px solid red; padding:0; margin:0; height: 30px;">`

# asp.net - 禁用按钮以避免双重回发但保留客户端验证

> ID：10667560
> 
> 赞同：0
> 
> 时间：2012-05-19T17:50:18.130
> 
> 标签：asp.net

我偶尔会收到双重回发。我想在用户单击一次后禁用客户端的“保存”按钮，但在禁用它之前我必须确保客户端验证器有效。如何在客户端代码中检查这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T18:09:38.870

检查这个： [客户端验证对象模型](http://msdn.microsoft.com/en-us/library/yb52a4x0.aspx#ClientSideValidation_ClientValidationObjectModel)

使用 Page_IsValid 检查所有验证在客户端是否有效。

使用 Page_ClientValidate() 函数来验证特定的验证组。

```
var isGroupValid = Page_ClientValidate("ValidationGroup"); 
```

# c# - C# - SSH Winforms 模拟控制台

> ID：10667561
> 
> 赞同：1
> 
> 时间：2012-05-19T17:50:33.083
> 
> 标签：c#, .net

我知道这个问题被问了很多，但我似乎找不到一个好的开始方式。

我一直在使用sharpssh，但它是为控制台应用程序制作的。因此，当我尝试创建一个 winforms 应用程序时，我无法让它按照我想要的方式运行。

在我的表单中，我有： 一个显示输出的文本框 用户应该在其中编写命令的文本框。

我卡在 readline() 上，我需要暂停应用程序，直到用户按下回车键，然后发送插入文本框中的命令。我不知道如何将应用程序转换为 winform 应用程序。

**所以问题是如何去做这件事？** - 我应该使用一个在初始化应用程序时启动的进程，以及一个在收到输出并需要输入时启动的进程吗？并使用第二个进程收集输入监听事件输入在文本框中按下并启动另一个进程以发送输入并再次等待输出？

如果有的话，有一个关于如何解决它的例子吗？

这是代码？

```
 public Form1()
    {
        InitializeComponent();

        txthost.Text = "XXX";
        txtuser.Text = "XXXXX";
        txtpass.Text = "XXXXX";
        string pattern = "sdf:";
        mPattern = pattern;
        this.txtInput.KeyPress += new System.Windows.Forms.KeyPressEventHandler(checkforenter);
    }

    public void button1_Click(object sender, EventArgs e)
    {

        try
        {

            mShell = new SshShell(Host, User);
            mShell.Password = Pass;
            //WRITING USER MESSAGE
            txtOutput.AppendText("Connecting...");
            mShell.Connect();
            txtOutput.AppendText("OK");
            //txtOutput.AppendText("Enter a pattern to expect in response [e.g. '#', '$', C:\\\\.*>, etc...]: ");
            //Stop for user input

            mShell.ExpectPattern = mPattern;
            mShell.RemoveTerminalEmulationCharacters = true;
            _writer = new TextBoxStreamWriter(txtOutput);

            Console.SetOut(_writer);

            StringReader reader = new StringReader(txtInput.Text);

            while (mShell.ShellOpened)
            {
                txtOutput.AppendText("\r\n" + "TERMINAL MODE ENGAGED");
                txtOutput.AppendText(mShell.Expect( pattern ));

                txtInput.Text = Console.ReadLine();
                Console.ReadLine();
                Console.WriteLine(Environment.NewLine);
                txtOutput.AppendText(mShell.Expect(pattern));
                MessageBox.Show("innan enter 2");
                Console.WriteLine(Environment.NewLine);
                txtOutput.AppendText(mShell.Expect(("(continue)")));
                MessageBox.Show("efter enter 2");
                Console.WriteLine(Environment.NewLine);
                //Data from termninal --> Append to text
                string output = mShell.Expect(Pattern);
                txtOutput.AppendText(output);
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }

    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T19:11:34.933

根据 Codeproject 上的 SharpSSH 文章 (http://www.codeproject.com/Articles/11966/sharpSsh-A-Secure-Shell-SSH-library-for-NET)，您可以通过两种方法读取和写入SSH 连接：

```
//Writing to the SSH channel
ssh.Write( command );

//Reading from the SSH channel
string response = ssh.ReadResponse(); 
```

您的文本框成为您的控制台，因此您不再需要使用 Console 对象。您需要检测何时按下该`Enter`键。按下后，执行写入命令并将最后输入的内容发送到 SSH 连接。然后执行 ReadResponse 将暂停应用程序并等待响应。一旦返回，您可以将结果字符串附加到文本框。

您可能会担心检测用户输入的内容并将其发送到 SSH 连接。您可以做的是每次执行 ReadResponse 时，在文本框中获取字符索引，然后在按下 后将其与字符所在的位置一起使用`Enter`。

或者您可以只使用两个文本框，一个用于输入，一个用于输出。

希望这可以帮助！

# c++ - 如何强制执行析构函数的调用顺序

> ID：10667564
> 
> 赞同：5
> 
> 时间：2012-05-19T17:51:12.820
> 
> 标签：c++, constructor, destructor

我正在尝试正确设置以下设置：

`class A`给定的应用程序（具有多个源文件、编译单元）具有在许多编译单元中定义的类型的全局变量。这些应该由要引入的新成员“管理” `class B`（其中应该只存在一个实例），因为在创建时它们在 B 类的实例中“注册”自己并在销毁时“注销”。

为构造函数设置工作是相当简单的。一个可以使用：

`types.h`：

```
class B {
  static B& Instance() {
    static B singleton;
    return singleton;
  }
  void registerA( const A& a ) { 
  // whatever
  }
};

class A {
  A() { B::Instance().registerA( this ); }
}; 
```

如何正确使用析构函数？如果使用：

```
class A {
  A() { B::Instance().registerA( this ); }
  ~A() { B::Instance().signoffA( this ); }
}; 
```

那么 的析构函数`B`可能会在 的析构函数之前被调用`A`。然后类的实例`A`在一个刚刚创建的实例上签名`B`。

测试用例将是一个多源文件设置，其中定义`class A`了命名空间中的实例：

`file1.cc`

```
#include "types.h"
namespace C {
   A a;
} 
```

`file2.cc`

```
#include "types.h"
namespace C {
   A b;
} 
```

我猜想使用 Boost 智能指针可以轻松完成这样的事情。但是，如果可能的话，我想避免使用额外的库来保持尽可能低的依赖。

一件事可能会有所帮助：所有全局变量都在命名空间中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T18:11:23.567

我觉得你很好。这是关于“终止”的3.6.3：

> 如果具有静态存储持续时间的对象的构造函数或动态初始化的完成顺序在另一个之前，则第二个的析构函数的完成顺序在第一个的析构函数的启动之前。

假设您有以下设置：

```
struct A;

struct B
{
    static B & get() { static B impl; return impl; }
    void registrate(A *);

private:
    B() { /* complex stuff */ }
    // ...
};

struct A { A() { B::get().registrate(this); } };

A a1; 
```

现在无论发生什么，静态`A`类型对象的第一个构造函数都会调用`B::get()`，它会在第一个构造函数`impl`完成之前对静态对象的构造进行排序`A`。通过上述子句，这保证了`B impl`-object的析构函数在所有-destructor*之后*`A`排序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T17:54:07.887

该`B`实例是静态的，因此它将比创建单例`A`后创建的任何实例的寿命更长`B`。

# android - 将文件导入工作区生成无法解析目标“android-5”

> ID：10667565
> 
> 赞同：4
> 
> 时间：2012-05-19T17:51:18.637
> 
> 标签：android, eclipse

我总是遇到这样的问题无法解析目标'android-X'，每次我都会在工作区中导入文件，上次也遇到像无法解析目标'android-10'，所以我安装了SDK Platform Android 2.3.3 ，..现在'android-5'，我需要再次安装SDK平台Android 2.0吗？我试图通过右键单击项目并向下滚动到Android工具->修复项目属性来解决这个问题，但它是不工作。你能帮帮我吗？先感谢您。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-19T18:29:01.220

无法解析目标“android-5”意味着您的计算机上没有下载 Android SDK 5 级 API。启动 SDK 管理器，单击 Obsolete 复选标记，然后下载第 5 级 API。

或者，进入项目属性并将目标 SDK 版本从 android-5 更改为计算机上存在的其他版本。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-12T10:25:59.787

Go into: Project>properties>Resource>Android>Project Build Traget> and select the available target version! It will work-

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-26T15:46:10.570

进入：Project>properties>Resource>Android>Project Build Traget> 并选择可用的目标版本！它会工作

**如果它给出错误 Android 需要编译器合规级别 5.0 或 6.0**

右键项目-->Android工具-->修复项目属性

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-14T19:26:38.313

对我有用的是右键单击项目> Android工具>修复项目属性。

# c# - 对象引用未设置为对象 ascx 的实例

> ID：10667566
> 
> 赞同：1
> 
> 时间：2012-05-19T17:51:21.027
> 
> 标签：c#, asp.net, sql, ascx

我想知道这段代码有什么问题，它返回这个错误“对象引用未设置为对象的实例”，我不明白为什么。

```
int count = com.Execute("select * from users").Rows.Count;
Label[] lbs = new Label[count];
for (int i = 0; i < count; i++)
{
    foreach (DataRow item in com.Execute("select * from users;").Rows)
    {
        lbs[i].Text = item["nickname"].ToString();
    }
    panel.Controls.Add(lbs[i]);
} 
```

我尝试了不同的方法，但总是同样的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T17:54:17.017

您已经为标签创建了一个空间（数组）`count`，但您还没有创建任何标签。
所以该行`lbs[i]`包含一个空值，因此错误。

至少在第一行之后添加这一行...

```
lbs[i] = new Label(); 
```

但是，仍然不清楚您在第二个循环中尝试做什么。
如果我正确理解您的代码，您可以用`(lbs[i].Text)`用户表中每个用户的昵称替换相同的标签文本，并以最后一个用户的昵称结尾。好像真的错了。

这可能是一个可行的解决方案

```
 DataTable dt = com.Execute("select * from users").Rows; 
        Label[] lbs = new Label[dt.Rows.Count]; 
        int i = 0;
        foreach (DataRow item in dt.Rows) 
        { 
            lbs[i] = new Label();
            lbs[i].Text = item["nickname"].ToString(); 
            panel.Controls.Add(lbs[i]);
            i++;
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T18:14:14.657

创建数组后，您必须创建标签对象。其次获取数据进行计数并再次调用行并不好。您可以通过一次调用数据库来完成这两项工作。我对你的代码做了一些调整。

```
Label[] lbs = new Label[count];

foreach (DataRow item in com.Execute("select * from users;").Rows)
{
      lbs[i] = new Label();
      lbs[i].Text = item["nickname"].ToString();
      panel.Controls.Add(lbs[i]);
} 
```

# asp.net - 我可以在 .aspx 文件中有两个相同形式的按钮来与服务器交互吗？

> ID：10667567
> 
> 赞同：1
> 
> 时间：2012-05-19T17:51:21.487
> 
> 标签：asp.net, forms, button, .net-4.0

我有一个 .aspx 页面，其中我在同一表单内的不同位置有两个按钮，设置为 runnat="server"。我需要在两个按钮上都有 onclick 属性才能调用代码隐藏中的函数。第一个按钮在单击时调用代码隐藏函数，但第二个按钮根本没有触发。我进行了很多搜索，发现我不能有两个按钮以相同的形式与服务器交互。那么如何做到这一点。我真的需要两个按钮来调用代码隐藏中的不同函数。请帮忙，因为我是 asp.net 的新手。我在 .net 4 上使用 c#。我可以有类似下面的相同形式的内容，并在代码隐藏中为这两个按钮提供事件处理程序。

```
<asp:Button ID="Button1" runat="server" Text="Button" OnClick="Button1_Click" />
<asp:Button ID="Button2" runat="server" Text="Button" OnClick="Button2_Click" /> 
```

# java - 使用 MapReduce 查找数字的平均值

> ID：10667575
> 
> 赞同：11
> 
> 时间：2012-05-19T17:52:30.673
> 
> 标签：java, hadoop, mapreduce, distributed

我一直在尝试编写一些代码来使用 MapReduce 查找数字的平均值。

我正在尝试使用全局计数器来达到我的目标，但我无法在`map`我的 Mapper 方法中设置计数器值，我也无法在`reduce`我的 Reducer 方法中检索计数器值。

我是否必须使用全局计数器`map`（例如使用`incrCounter(key, amount)`提供的`Reporter`）？或者你会建议任何不同的逻辑来获得一些数字的平均值吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-20T07:38:39.377

逻辑很简单：如果所有数字都具有**相同的 key**，那么映射器会发送您想要使用相同 key 求平均值的所有值。因此，在 reducer 中，您可以对迭代器中的值求和。然后，您可以在迭代器工作的时间上保留一个**计数器**，这解决了要平均多少项目的问题。最后，在迭代器之后，您可以通过将总和除以项目数来找到平均值。

请注意，如果将组合器类设置为与减速器相同的类，则**此逻辑将不起作用...**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-20T14:23:13.370

使用所有 3 Mapper/Combiner/Reducer 来解决问题。请参阅以下链接以获取完整的代码和说明

[http://alchemistviews.blogspot.com/2013/08/calculate-average-in-map-reduce-using.html](http://alchemistviews.blogspot.com/2013/08/calculate-average-in-map-reduce-using.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-03-10T17:14:53.603

平均值是总和/大小。如果 sum 类似于 sum = k1 + k2 + k3 + ... ，则您可以在汇总之后或期间除以大小。所以平均值也是k1 / size + k2 / size + k3 / size + ...

Java 8 代码很简单：

```
 public double average(List<Valuable> list) {
      final int size = list.size();
      return list
            .stream()
            .mapToDouble(element->element.someValue())
            .reduce(0,(sum,x)->sum+x/size);
    } 
```

因此，您首先将列表中元素的每个值映射为 double，然后通过 reduce 函数求和。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-21T08:19:54.653

算术平均值是一个聚合函数，它不是分布的，而是代数的。根据[韩等人的说法。](https://safaribooks.freepaper.me/library/view/data-mining-concepts/9780123814791/xhtml/ST0050_CHP004.html#P0495_CHP004)聚合函数是分布的，如果：

> [...] 可以如下计算 [...]。假设 [..] 数据被划分为*n 个*集合。我们将函数应用于每个分区，得到*n 个*聚合值。如果将函数应用于*n个*聚合值得到的结果与将函数应用于整个数据集（没有分区）得到的结果相同，则可以以分布式方式计算函数。

或者换句话说，它必须是关联的和可交换的。然而，根据[Han 等人的说法，聚合函数是代数的。](https://safaribooks.freepaper.me/library/view/data-mining-concepts/9780123814791/xhtml/ST0050_CHP004.html#P0505_CHP004)如果：

> [...] 它可以通过具有 m 个参数（其中 m 是有界正整数）的代数函数来计算，每个参数都是通过应用分布聚合函数获得的。

对于算术平均值，这只是*avg = sum/count*。显然你需要额外携带一个计数。但是为此使用全局计数器似乎是一种误用。[API](https://hadoop.apache.org/docs/r2.7.3/api/org/apache/hadoop/mapreduce/Counter.html)描述`org.apache.hadoop.mapreduce.Counter`如下：

> 跟踪 map/reduce 作业进度的命名计数器。

无论如何，计数器通常应该用于有关作业的统计信息，而不是作为数据处理本身期间计算的一​​部分。

因此，您在分区中要做的一切就是将您的数字相加并与总和*(sum, count)*一起跟踪它们的计数；一个简单的方法可能是一个字符串，如`<sum><separator><count>`.

在映射器中，计数始终为 1，总和就是原始值本身。要减少地图文件，您可以使用组合器并处理聚合，如*(sum_1 + ... + sum_n, count_1 + ... + count_n)*。这必须在 reducer 中重复并由最终计算*sum/count*完成。**请记住，这种方法独立于使用的密钥！**

[最后，这是一个使用LAPD](https://data.lacity.org/d/y8tr-7khq)原始犯罪统计数据的简单示例，它应该计算洛杉矶的“平均犯罪时间”：

```
public class Driver extends Configured implements Tool {
    enum Counters {
        DISCARDED_ENTRY
    }

    public static void main(String[] args) throws Exception {
        ToolRunner.run(new Driver(), args);
    }

    public int run(String[] args) throws Exception {
        Configuration configuration = getConf();

        Job job = Job.getInstance(configuration);
        job.setJarByClass(Driver.class);

        job.setMapperClass(Mapper.class);
        job.setMapOutputKeyClass(LongWritable.class);
        job.setMapOutputValueClass(Text.class);

        job.setCombinerClass(Combiner.class);
        job.setReducerClass(Reducer.class);
        job.setOutputKeyClass(LongWritable.class);
        job.setOutputValueClass(Text.class);

        FileInputFormat.addInputPath(job, new Path(args[0]));
        FileOutputFormat.setOutputPath(job, new Path(args[1]));

        return job.waitForCompletion(true) ? 0 : -1;
    }
}

public class Mapper extends org.apache.hadoop.mapreduce.Mapper<
    LongWritable,
    Text,
    LongWritable,
    Text
> {

    @Override
    protected void map(
        LongWritable key,
        Text value,
        org.apache.hadoop.mapreduce.Mapper<
            LongWritable,
            Text,
            LongWritable,
            Text
        >.Context context
    ) throws IOException, InterruptedException {
            // parse the CSV line
            ArrayList<String> values = this.parse(value.toString());

            // validate the parsed values
            if (this.isValid(values)) {

                // fetch the third and the fourth column
                String time = values.get(3);
                String year = values.get(2)
                    .substring(values.get(2).length() - 4);

                // convert time to minutes (e.g. 1542 -> 942)
                int minutes = Integer.parseInt(time.substring(0, 2))
                    * 60 + Integer.parseInt(time.substring(2,4));

                // create the aggregate atom (a/n)
                // with a = time in minutes and n = 1
                context.write(
                    new LongWritable(Integer.parseInt(year)),
                    new Text(Integer.toString(minutes) + ":1")
                );
            } else {
                // invalid line format, so we increment a counter
                context.getCounter(Driver.Counters.DISCARDED_ENTRY)
                    .increment(1);
            }
    }

    protected boolean isValid(ArrayList<String> values) {
        return values.size() > 3 
            && values.get(2).length() == 10 
            && values.get(3).length() == 4;
    }

    protected ArrayList<String> parse(String line) {
        ArrayList<String> values = new ArrayList<>();
        String current = "";
        boolean escaping = false;

        for (int i = 0; i < line.length(); i++){
            char c = line.charAt(i);

            if (c == '"') {
                escaping = !escaping;
            } else if (c == ',' && !escaping) {
                values.add(current);
                current = "";
            } else {
                current += c;
            }
        }

        values.add(current);

        return values;
    }
}

public class Combiner extends org.apache.hadoop.mapreduce.Reducer<
    LongWritable,
    Text,
    LongWritable,
    Text
> {

    @Override
    protected void reduce(
        LongWritable key,
        Iterable<Text> values,
        Context context
    ) throws IOException, InterruptedException {
        Long n = 0l;
        Long a = 0l;
        Iterator<Text> iterator = values.iterator();

        // calculate intermediate aggregates
        while (iterator.hasNext()) {
            String[] atom = iterator.next().toString().split(":");
            a += Long.parseLong(atom[0]);
            n += Long.parseLong(atom[1]);
        }

        context.write(key, new Text(Long.toString(a) + ":" + Long.toString(n)));
    }
}

public class Reducer extends org.apache.hadoop.mapreduce.Reducer<
    LongWritable,
    Text,
    LongWritable,
    Text
> {

    @Override
    protected void reduce(
        LongWritable key, 
        Iterable<Text> values, 
        Context context
    ) throws IOException, InterruptedException {
        Long n = 0l;
        Long a = 0l;
        Iterator<Text> iterator = values.iterator();

        // calculate the finale aggregate
        while (iterator.hasNext()) {
            String[] atom = iterator.next().toString().split(":");
            a += Long.parseLong(atom[0]);
            n += Long.parseLong(atom[1]);
        }

        // cut of seconds
        int average = Math.round(a / n);

        // convert the average minutes back to time
        context.write(
            key,
            new Text(
                Integer.toString(average / 60) 
                    + ":" + Integer.toString(average % 60)
            )
        );
    }
} 
```

# python - 这个数学运算程序是否已经存在？

> ID：10667576
> 
> 赞同：17
> 
> 时间：2012-05-19T17:52:42.823
> 
> 标签：python, math

我为我的工作做了很多*铅笔*和纸上的数学运算，这可能会很烦人并且很难跟踪。而且我有一段时间没有有趣的编程项目了，所以我想到了一些东西，想知道它是否存在。

我想创建一个代数操作程序，我可以用鼠标移动方程的各个部分，它会立即显示变化，程序很直观。例如，如果我有 (ax^3 + a^2*y^4)，我可以将其中一个 a 拖到括号外，它会知道将其变成 a(x^3 + a*y^ 4）。

只是要明确一点：我*并不是*要做出可以解析地求解方程的东西。我知道 Mathematica 和其他一百万个程序都是这样做的。在我想做的事情中，你仍然在解决它（通常我什至不是“解决”某些事情本身，实际上只是想把它变成一个“令人愉悦的形式”。这不是什么程序真的可以做到）。

我检查了 MathCAD，它看起来很酷，但仍然不像我所说的那样。我也检查了 sympy （如果我做了这个，我最终可能会使用它）但它仍然没有我在说什么。

那么，有谁知道这是否已经存在？我想这样做，但我不想重新发明轮子。

谢谢！！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T10:39:04.207

有几个 Mac 应用程序可以做到这一点。

最古老的是[“图形计算器”](http://www.pacifict.com/Products.html)，它曾经在 Mac OS 中免费提供，并且有一个有趣的[起源故事](http://www.pacifict.com/Story/)。它仍然存在，现在有一个 Windows 版本，但出于某种莫名其妙的原因，开发人员似乎有一个故意的活动通过拥有一个非常不吸引人的网站并且没有真正的免费下载版本来最大限度地减少他们的销售——尽管你可以下载一个免费的“查看器”应用程序，它会向你展示它可以做什么，如果你停止滚动演示，它会让你操纵你描述的方程式。

[您可以从Mac App Store](http://itunes.apple.com/gb/app/graphing-calculator-lite/id435943749?mt=12)购买“精简”版的图形计算器，它可以轻松完成您需要的一切，还有一个精简版，看起来它可以在没有图形的情况下完成所有代数运算，称为[“方程计算器”](http://itunes.apple.com/gb/app/equation-calculator/id437390502?mt=12)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T16:53:59.893

我一直在使用 PyQt、Ply、Scipy、Sympy 和 Qwt开发一个名为[Miramath的 MathCad 开源实现。](http://sourceforge.net/apps/gallery/miramath/index.php)

> [![在此处输入图像描述](../Images/8a661852b8c960563ed55ecf69fe532f.png)](https://i.stack.imgur.com/jaxOu.png)

它仍处于概念验证模式，但所有基本部件现在都在那里。我这样做是为了自学一点 Python。编辑器需要一些工作来支持拖放功能。现在我没有时间处理它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T23:39:35.157

还可以查看具有类似功能的[http://equation.sourceforge.net/](http://equation.sourceforge.net/)（以前的 MathDrag'n）和[http://www.livemath.com/ （以前的 Theorist）。](http://www.livemath.com/)

# css - 浏览器和 Firebug 的主要差异

> ID：10667580
> 
> 赞同：3
> 
> 时间：2012-05-19T17:52:56.867
> 
> 标签：css

我注意到有时当我尝试覆盖 CSS 规则时，浏览器不会应用它，但 Firebug 显示它应该被应用（默认属性交叉，覆盖值显示为有效）。

这是一个例子：

```
table th
{
background:red;
color:#333;
} 
```

然后对于特定情况，我尝试覆盖这些：

```
table.my_domain th
{
background:blue;
color:yellow;
} 
```

现在，问题是背景颜色实际上更改为蓝色，但颜色保持为#333。当我签入 Firebug 时，红色背景和 #333 颜色都交叉，蓝色背景和黄色有效（未交叉）。但是浏览器只是忽略了颜色属性覆盖...我在 Firefox、Safari 和 Chrome 上尝试过...最新版本。

没有其他 CSS 规则可以干扰，所以我有点困惑。

我错过了什么？

肿瘤坏死因子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T13:34:23.853

尝试这个

```
table.my_domain th
{
 background:blue !important;
 color:yellow !important;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T11:27:59.813

嗯，我想通了。也许它对其他人有用。答案是 Firebug 和我一样省略了一条规则。我为 th - th a { color:#222; 中的链接声明了一种颜色 } 并且因为在表中优先级被赋予了它刚刚应用它的最低元素。但 Firebug 根本没有显示这一点。而且因为#333和#222这两种颜色很相似，我之前没见过。Firebug 是一个很好的工具，但据我所知，它并不完美。

# android - Android if 和 else if 语句不起作用

> ID：10667585
> 
> 赞同：0
> 
> 时间：2012-05-19T17:53:49.067
> 
> 标签：android, android-intent

如果记录数等于或大于 5，我正在尝试使用以下代码显示一个意图，如果仪表板布局的第一个按钮上的记录数小于 5，则显示不同的意图。

但我不断收到邪恶的 NullPointError ............我是在正确的轨道上还是在风中飘扬，请帮助并指出我做错了什么......谢谢

```
private class DashboardClickListener implements OnClickListener {
   // @Override
    public void onClick(View v) {
        Intent i = null;
        switch (v.getId()) {
            case R.id.dashboard_button_one:
                if (mDbHelper.fetchAllNotes().getCount() >= 5){
                i = new Intent(DashboardActivity.this, Demo.class);} 
                else if (mDbHelper.fetchAllNotes().getCount() < 5){
                i = new Intent(DashboardActivity.this, one.class);}
                    break;
            case R.id.dashboard_button_two:
                i = new Intent(DashboardActivity.this, two.class);             
                break;
            case R.id.dashboard_button_three:
                i = new Intent(DashboardActivity.this, three.class);                   
                break;
            case R.id.dashboard_button_four:
                i = new Intent(DashboardActivity.this, four.class);                   
                break;
            default:
                break;
        }
        if(i != null) {
            startActivity(i);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T19:57:23.777

你实例化你的 mDbHelper 了吗？打开数据库？

# objective-c - 获取指向类方法的指针，以便可以将其作为回调传递给 C 函数

> ID：10667587
> 
> 赞同：2
> 
> 时间：2012-05-19T17:53:58.543
> 
> 标签：objective-c, c, function-pointers, libssh2

我正在使用 libssh2 并在我的 SSHWrapper 对象之外定义了一个回调函数：

```
static void kbd_callback(const char *name, int name_len, const char *instruction, int instruction_len, int num_prompts, const LIBSSH2_USERAUTH_KBDINT_PROMPT *prompts, LIBSSH2_USERAUTH_KBDINT_RESPONSE *responses, void **abstract); 
```

在我的 SSHWrapper 对象中，我执行以下操作，在验证会话时传递回调函数：

```
/* Create a session instance */
LIBSSH2_SESSION *session = libssh2_session_init_ex(NULL, NULL, NULL, self);
while ((rc = libssh2_userauth_keyboard_interactive(session, userChar, &kbd_callback)) == LIBSSH2_ERROR_EAGAIN); 
```

我想知道的是，是否可以`kbd_callback()`在我的对象中移动函数，使其成为类方法：`+(void) kbd_callback:...`？

如果是这样，我如何获取该函数的地址以便将其传递给 C 函数`libssh2_userauth_keyboard_interactive()`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T18:08:22.330

你现在采取的方法是合理的。也就是说，Objective-C 方法实际上只是 C 函数。使您建议的方法复杂化的主要原因是它们包含两个“隐藏”参数`self`， 和`_cmd`。`self`是正在调用该方法的对象的实例，并且`_cmd`是该方法的选择器。您无法更改这些，它们的存在将使您的函数的参数无法匹配回调函数所需的参数。

以防万一它仍然对您感兴趣，您可以像这样获得指向 Objective-C 方法的函数指针：

```
IMP methodIMP = [self methodForSelector:@selector(someMethodThatTakesOneStringArgument:)];
void (*functionPointer)(id, SEL, NSString*) = (void (*)(id, SEL, NSString*))methodIMP;

// Then call it:
functionPointer(instance, @selector(someMethodThatTakesOneStringArgument:), aString); 
```

编辑：我发布了一个简单、完整的程序，在这里演示了这个代码：[https ://gist.github.com/2731937](https://gist.github.com/2731937)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-19T18:14:36.123

`+ (void)method`不，不应该以这种方式直接调用由创建的底层 C 函数。除非你非常熟悉底层的 Objective-C 运行时，否则搞乱 IMP 函数只会给你带来麻烦。

# ios - iOS 设备和 2D 空间

> ID：10667590
> 
> 赞同：3
> 
> 时间：2012-05-19T17:54:48.733
> 
> 标签：ios, ipad, accelerometer, sensors

我坚持解决这个问题。假设我有 2 个 ipad，如图所示。iPad 1（左侧）如何知道 iPad 2（右侧）在其右侧？我能找到这个相对定位吗？

2 个 iPad 的相对位置的任何变化都应在它们之间实时传达。为了简化问题，我只对 2D 空间（即 x，y）感兴趣

我尝试使用 GPS，但它不够准确。什么传感器信号在这里合适？还是我应该考虑混合使用多个传感器信号？如果有怎么办？

欢迎任何相关的想法。

![在此处输入图像描述](../Images/dee5f8e307c371724775c4d0689b4840.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T22:12:09.127

这是一个很长的镜头，但它可能会奏效！

检查我的 iPad2，我注意到麦克风在顶部中间，扬声器在右下角。这意味着左侧 iPad 扬声器到右侧 iPad 麦克风的距离小于右侧 iPad 扬声器到左侧 iPad 麦克风的距离。

从一台 iPad 播放声音（可能是听不见的高频声音）并在另一台 iPad 上聆听，然后通过网络告诉第一台 iPad 听到了声音，这将为您提供往返时间。反过来执行此操作将为您提供另一个往返时间。多次执行此操作将为您提供每台 iPad 的平均往返时间，这应该在统计上最大限度地减少网络/蓝牙延迟任何波动的影响。

往返时间最短的 iPad 是左边那个。当然，如果 iPad 的型号不同并且麦克风/扬声器位于不同的位置，则需要考虑到这一点。它可能会变得非常复杂，但它可能会起作用:)

# php - 如何用PHP和HTML以相同格式输出mysql多行数据？

> ID：10667592
> 
> 赞同：1
> 
> 时间：2012-05-19T17:55:23.740
> 
> 标签：php, mysql, html

我刚开始学习如何制作网站。我正在制作一个用于输入博客条目的评论框。假设我输入了一个 3 行的条目，它将在 mySQL 表中显示相同的格式。但是当我尝试输出它时，它变成了一行。

```
//Here's what i did to output the data.
$entry = $row['entry'];
echo "<p>". $entry ."</p>";

//INPUT
Hello,
TEST LINE2
TEST LINE3

//OUTPUT
Hello, TEST LINE2 TEST LINE3 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T18:11:37.677

您可以使用[http://php.net/manual/en/function.nl2br.php](http://php.net/manual/en/function.nl2br.php)

> “在字符串中的所有换行符之前插入 HTML 换行符”

```
$entry = $row['entry'];
echo "<p>". nl2br($entry) ."</p>"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T17:59:29.383

将其包装在[`pre`](http://www.w3.org/wiki/HTML/Elements/pre)标签中，这将防止空格被破坏。

```
$entry = $row['entry'];
echo "<p><pre>". $entry ."</pre></p>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T20:11:55.860

```
$entry = $row['entry'];
echo $entry ."<br />"; 
```

或者

```
$entry = $row['entry'];
echo $entry ."<br>"; 
```

# math - 递归不仅仅是一个函数调用本身

> ID：10667598
> 
> 赞同：2
> 
> 时间：2012-05-19T17:56:15.540
> 
> 标签：math, recursion, computer-science

我见过的关于递归函数的每一本教科书都以阶乘为例，这很有帮助，但并不完全有启发性。

出于编程目的，递归函数是否可以将一个函数作为其基本情况，它是否可以在其主体中包含其他函数调用，或者它是否可以在不同的递归级别以不同的方式执行？

如果它做了这些事情中的任何一件，它仍然是一个“递归函数”还是现在是别的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T18:03:05.887

递归函数的定义只是“一个调用自身的函数”。所以如果你有一个调用自己的函数，它就是一个递归函数。

其他任何事情都取决于您正在使用的语言的功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T18:27:29.680

这是一个相当简单的递归函数示例，它简单地将集合（表示为堆栈的数组）中的所有值输出到浏览器控制台，因为它使用 .pop() 方法将它们从堆栈中弹出。

totalSize 值不会在整个调用堆栈中发生变化，因此它可用于通过将当前堆栈大小除以原始大小来测量中间点。

要回答它能否在递归的不同级别表现不同的问题，答案是肯定的：

```
// a simple array of 10 items
var coll = [1,2,3,4,5,6,7,8,9,10];

// recursive function that calls itself. It behaves slightly different at
 // the halfway point
function test(totalSize, col) {
    if(col == undefined || col.length == 0) {
        return 0;

     } else {
        if(col.length / totalSize < .5) {
            console.log("Past 1/2 way point!");
        }
        console.log("total = " + totalSize);
        console.log("col.pop() = " + col.pop());
        return test(totalSize, col);
    }
}

// make a call to the function with the total size and the collection
test(coll.length, coll); 
```

另外，您还问是否可以调用其他函数，这也是可以的。在下面的例子中，一个函数用于返回基本情况的结果，一个函数用于抽象中点行为：

```
// a simple array of 10 items
var coll = [1,2,3,4,5,6,7,8,9,10];

// recursive function that calls itself. It behaves slightly different at
 // the halfway point
function test(totalSize, col) {
    if(col == undefined || col.length == 0) {
        return handleBaseCase(totalSize, col);

     } else {
        // handle if it's at 1/2 way point
        handleHalfwayPoint(totalSize, col);  

        console.log("tital = " + totalSize);
        console.log("col.pop() = " + col.pop());
        return test(totalSize, col);
    }
}

function handleHalfwayPoint(totalSize, collection) {
    if(collection.length / totalSize < .5) {
        console.log("Past 1/2 way point!");
    }
}

// instead of returning 0, return "Done" and also print to the log
function handleBaseCase(totalSize, collection) {
    console.info("Done!");
    return "Done!";
}

// make a call to the function with the total size and the collection
test(coll.length, coll); 
```

虽然这些特定示例并不能解决任何实际问题，但它展示了在另一个函数中调用一个函数的概念如何扩展以处理其他用例。教科书中的例子只是为了教你递归的基础知识，并帮助你使用必要的工具来处理未来更复杂的现实问题。

由于这种函数式语言是 JavaScript，因此运行它们的障碍很低。您可以通过在 Chrome 开发者控制台中运行代码来尝试这些示例，或者您可以在一个小的测试 HTML 文件中运行它们。祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T18:08:53.537

递归函数是在其主体中调用自身一次或多次的函数。函数也可以是相互递归的，其中一个函数是根据第二个函数定义的，反之亦然。

我已经编程了 20 多年而无需递归。让我真正理解递归调用的必要性和美妙之处在于 Scheme 语言，以及诸如“The little Schemer”之类的书籍。

并非所有编程语言都支持同一级别的递归。计划是做得很好的人之一。Python 少得多。因此，如果您想深入研究递归，请检查您的编程语言的能力。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-19T18:39:09.460

正如其他答案所说，递归函数是一个调用自身的函数。[这里](http://en.wikipedia.org/wiki/Recursion_%28computer_science%29#Direct_and_indirect_recursion)解释了两种类型：

1.  直接递归：函数调用自身。
2.  间接递归：当一个函数不是由它自己调用而是由它调用的另一个函数（直接或间接）调用时。

我在你的问题中看到了数学标签。递归与数学归纳有关。如果你证明它可以解决基本情况，然后你证明如果无限序列语句中的任何一个语句为真，那么下一个语句也是如此，你证明它在任何情况下都能解决问题。

# javascript - 将 canvas.toDataURL 传递给 div

> ID：10667599
> 
> 赞同：3
> 
> 时间：2012-05-19T17:56:16.507
> 
> 标签：javascript, google-maps-api-3

我尝试捕捉出现在 Google 地图信息窗口中的街景全景图像。我创建了一个调用函数 captureImage() 的按钮，但我很难将它返回的 var = img 变量传递给 HTML 。

我认为本地变量“contentString”和“content”存在问题。我应该将 captureImage() 函数写入 initialize() 吗？感谢您。

我的代码如下：

```
function initialize() {

//code here

    var contentString = '<input type="button" value="Grab this picture" onClick="captureImage()" /> <div id="content" style="width:300px;height:400px;"></div>';
    var infowindow = new google.maps.InfoWindow({
        content: contentString
    });

//code here

}

function captureImage()
{
    var canvas = document.getElementById("content");
    var img    = canvas.toDataURL("image/png");
    document.write('<img src="'+img+'"/>');

} 
```

HTML：

```
 <div id="dialog" title="Image box">
        <p>Here is the image from Streetview :</p>
                    <img scr=""></img>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T04:00:25.467

我认为直接设置`<img>`src 会更容易：

`http://maps.googleapis.com/maps/api/streetview?size=<width>x<height>&location=lat,%20lng&fov=90&heading=235&pitch=10&sensor=false`

# android - android：如何平均划分线性布局元素

> ID：10667600
> 
> 赞同：0
> 
> 时间：2012-05-19T17:56:20.330
> 
> 标签：android, android-layout

我有一个带有两个列表视图和两个死按钮的线性布局。如何在列表视图之间平均分配空间。我得到了一些建议，比如将高度设置为 0dip，但它没有用。eclipse 中的图形布局显示了正确的布局，但是当我向列表中添加不同数量的元素时，它们会扩展到不同的高度。这是xml。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" 
    android:weightSum="2">

    <Button
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:enabled="false"
        android:text="Installed engines" >
    </Button>

    <ListView
        android:id="@+id/primary"
        android:layout_width="match_parent"
        android:layout_height="0dp" 
        android:layout_weight="1" >
    </ListView>

    <Button
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:enabled="false"
        android:text="Active engines" >
    </Button>

    <ListView
        android:id="@+id/secondary"
        android:layout_width="match_parent"
        android:layout_height="0dp" 
        android:layout_weight="1" >
    </ListView>

</LinearLayout> 
```

## 谢谢

因为没有人相信我在这里是我所得到的形象。只是链接，因为我没有足够的声誉来发布照片:(！[运行](http://dl.dropbox.com/u/55295461/pic1.jpg) ！[日食](http://dl.dropbox.com/u/55295461/pic2.jpg)

xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

毕竟这可能不是基于这个答案的xml问题[Linear Layout and weight in Android](https://stackoverflow.com/questions/2698817/linear-layout-and-weight-in-android)

XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

*这对于静态 XML 布局是正确的。如果您在运行时动态添加视图，则需要使用带有布局参数的 addView，例如 addView(button, new LinearLayout.LayoutParams(0, height, 1)); 即使您使用正确的宽度和重量值来膨胀布局也是如此。– Nuthatch 2011 年 9 月 3 日 21:41*

xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

我确实使用布局充气器将我的视图添加到选项卡。也许这就是问题所在.. xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

这是我使用充气机时重现问题的示例代码。

```
public class TestActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        ParticipantsPanel p = new ParticipantsPanel(this);
        setContentView(p);
    }
}

class ParticipantsPanel extends LinearLayout {
    public ParticipantsPanel(Context ctx) {
        super(ctx);

        LayoutInflater li = LayoutInflater.from(ctx);
        View myView = li.inflate(R.layout.participants, null);
        final ListView primary = (ListView) myView.findViewById(R.id.primary);
        final ListView secondary = (ListView) myView.findViewById(R.id.secondary);
        final ArrayAdapter<String> primaryA = 
            new ArrayAdapter<String>(ctx,R.layout.lvtext);
        final ArrayAdapter<String> secondaryA = 
            new ArrayAdapter<String>(ctx,R.layout.lvtext);

        primaryA.add("hello1");
        primaryA.add("hello2");
        primaryA.add("hello3");
        primaryA.add("hello4");
        primaryA.add("hello5");
        primaryA.add("hello6");
        primaryA.add("hello7");
        primaryA.add("hello8");

        secondaryA.add("select1");
        secondaryA.add("select2");

        primary.setAdapter(primaryA);
        secondary.setAdapter(secondaryA);

        addView(myView);
    }
} 
```

xxxxxxxxxxxxxxxxxxxxxxxx

又一个更新。 **我认为问题出在 Nuthatch （我从旧帖子中提到的那个人）指出：addView() 只会弄乱静态 xml 中的任何布局，这是 imo 的宝贵经验。当我将 ParticipantsPanel 中的代码移动到主要活动并直接设置视图而不将其添加到另一个线性布局时，它按预期工作。我很感激解释为什么会这样，以及我如何仍然可以将我的代码放在一个类中并具有所需的行为。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T14:25:20.210

您发布的代码不是一个很好的例子。`ListViews`使用. _ `LayoutInflater`_ `ViewGroup`_`LayoutParams`

如果您使用：

```
addView(myView, new LinearLayout.LayoutParams(
                LinearLayout.LayoutParams.MATCH_PARENT,
                LinearLayout.LayoutParams.MATCH_PARENT)); 
```

**或**修改并用标签`R.layout.participants`替换父级并设置：`LinearLayout``merge`

```
 this.setOrientation(LinearLayout.VERTICAL);
        this.setWeightSum(2.0f);
        li.inflate(R.layout.participants, this, true); 
```

对于`ParticipantsPanel`,

那么一切都会好起来的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T20:34:48.763

对于垂直方向，将加权视图的高度设置为 0px（或 0dp 或其他，0 在 android 上的所有单位中都是 0）。对于水平方向做同样的事情，但宽度。

# .net - 数据库和基于文件的图片存储之间的安全考虑

> ID：10667603
> 
> 赞同：1
> 
> 时间：2012-05-19T17:56:47.583
> 
> 标签：.net, image, security

我正在设计一个社交网站，明显的照片隐私是一个主要因素。简单地说，我怎样才能将某些照片限制为某些人？

我正在使用 .NET 技术（C# 和 SQL 服务器）。传统上，作为 Web 开发人员，我们更喜欢将上传的图像存储在硬盘上，以考虑各种因素（性能和存储大小等）。但是，假设这些存储在网络可用的目录中，它们是否安全？

我可以生成随机文件名，但是如何阻止应用程序出现，找到我的照片目录并尝试随机文件名？图像越多，时间越长，他们找到不应该的图像的可能性就越高！

这是否意味着数据库存储（我可以在其中流式传输数据作为我的应用程序的一部分处理安全性）还是我唯一的选择，或者我可以采取其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T18:03:07.503

*   将图像存储在磁盘上，但不能直接用于网络
*   使用数据库存储每个用户对图像的权限
*   构建一些 Web 应用程序，将图像提供给允许的用户

# python - Apache WSGI Python 0 绕过 python 文件令牌访问

> ID：10667604
> 
> 赞同：0
> 
> 时间：2012-05-19T17:56:53.207
> 
> 标签：python, apache, token, wsgi

我想使用 apache 绕过 python 将文件提供给客户端，但文件应该只对 python 授权用户可用。

例如，我有一个文件 /uploads/user/somepic.jpg 并且我想让这个文件只有当前登录的用户可以访问

也许通过像/downloads/#some_hash#这样的地址绕过pythons yield f.read()，是否有可能，有人可以指出我正确的方向吗？我找不到任何开始。

# python - 如何在 Python 中使用多个字符串参数

> ID：10667605
> 
> 赞同：-2
> 
> 时间：2012-05-19T17:57:00.117
> 
> 标签：python

我想使用 % s 将两个参数传递给我的字符串。

我试过这个，但没有奏效：

```
title = "im %s with %s"
title % "programming" % "python" 
```

它给出了这个错误：

```
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
TypeError: not enough arguments for format string 
```

你有想法吗？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-19T17:59:23.190

正确的语法是：

```
title = "im %s with %s"
title % ("programming", "python") 
```

运算符有`%`两个操作数：

1.  格式字符串在左侧；
2.  包含所有参数的元组位于右侧（如果只有一个参数，它可以是一个标量）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-19T17:59:19.977

最好通过分解这些格式化指令的工作方式来理解这个问题。基本思想是`%`字符串中的每个都意味着需要随后将参数提供给字符串。

例如，这将起作用：

```
title = "i'm %s with %s" % ('programming', 'python') 
```

和产量

```
"i'm programming with python" 
```

's' in`%s`表示这是一个字符串的占位符。'd' 表示整数，'f' 表示浮点数等。您还可以指定其他参数。请参阅[这些文档](http://docs.python.org/library/stdtypes.html#string-formatting-operations)。

如果您没有为每个占位符提供足够的项目，则会导致该`not enough arguments for format string`消息。

您的具体示例首先创建一个字符串常量，其中包含两个格式化指令。然后，当您使用它时，您必须为其提供两个项目。

换句话说，

```
title = "i'm %s with %s"
title % ('programming', 'python') 
```

变成

```
"i'm %s with %s" % ('programming', 'python') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T18:22:02.643

不是真正的答案，但是：

你也可以使用类似的东西：

```
title = "im %(doing)s with %(with)s"
title % {'doing': 'programming', 'with': 'python'} 
```

或者：

```
title = "im %(doing)s with %(with)s" % {'doing': 'programming', 'with': 'python'} 
```

您使用 %(您的字典键)s 而不是 %s 而不是元组，而是在模运算符之后传递一个 dict 。

检查[字符串格式化操作](http://docs.python.org/library/stdtypes.html#string-formatting-operations)

# javascript - 在 JavaScript 中验证模板变量

> ID：10667606
> 
> 赞同：1
> 
> 时间：2012-05-19T17:57:11.753
> 
> 标签：javascript, node.js, couchdb, ejs

使用模板引擎时是否有验证的最佳案例实践？

我目前正在使用 node.js 和 couchdb 构建一个站点，并且我分别使用 ejs 作为框架和模板引擎的 express。我最终可能会在我的 HTML 中以字面形式拼写出 [Object object] 或 undefined。我可以尝试在沙发上使用 validate_doc_update 函数进行验证，或者在渲染到模板之前在我的路由函数内部的节点中进行验证，或者在 ejs 模板中进行验证。我应该做这些或所有这些中的哪一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T18:34:20.420

我建议编写一个函数来获取您的模板上下文对象并为渲染做准备。这些有时被称为演示者函数和/或演示者模式。在渲染模板之前，您可以从 node.js 路由函数中使用它。此函数可以用空字符串替换 null/undefined，还可以检测`toString`为“[Object object]”或其他不受欢迎的对象，并将它们替换为空字符串。为此编写单元测试很容易，并且可以防止您在许多模板中重复逻辑。此函数应递归遍历整个对象图或对象图数组。

您可能还需要其他功能，例如缩写异常长的字符串。例如，如果有人不小心将一堆垃圾粘贴到您的用户对象的“名字”字段中，并且超过了 100 个字符的合理限制，您的演示者函数可能会截断它并附加一个省略号。只是此数据清理或“表示”类型逻辑的另一个示例。

否则，您需要像`<%= someObj.someProp || '' %>`ejs 模板中那样的表达式，这将导致大量样板代码重复。

[这是第一个工作的 jsfiddle 实现](http://jsfiddle.net/8aqzb/1/)（使用 underscore.js）。

```
function sanitize(context) {
    if (Array.isArray(context)) {
      return _.map(context, sanitize);
    }
    _.each(context, function (value, key) {
        if (value === null) {
          context[key] = "";
          return;
        }

        switch (typeof value) {
          case "object":
            context[key] = sanitize(value);
            break;
          case "number":
            //No-op
            break;
          case "boolean":
            //No-op
            break;
          default:
            context[key] = value || ""; //handles undefined
        }                
    });
    return context;
} 
```

# c# - 使用任务并行库使用您自己的排序算法对 ObservableCollection 进行排序

> ID：10667609
> 
> 赞同：1
> 
> 时间：2012-05-19T17:57:39.550
> 
> 标签：c#, sorting, listbox, task-parallel-library, observablecollection

我有一个与 Listbox 绑定的 ObservableCollection。我不想使用 CollectionView 排序。我想使用使用 TPL 的合并排序算法。我知道我可以使用 ListCollectionView，并且我有一个 CustomSort 选项并放在那里新的 Sort()。我有一个问题，如何使用任务并行库正确实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T19:04:25.927

如果您需要更好的性能来对列表进行排序，我建议您在使其成为可观察集合之前对其进行排序。

ObservableCollection 会在您更改它时引发事件，这将严重影响性能。它还会在排序的每个步骤中更新您的 UI，我假设您不希望这样。

我认为您最好将其排序为列表并稍后将任何 UI 元素重新绑定到它。这可能取决于列表的大小以及您正在寻找的性能。

# javascript - 在drupal 7中，如何在模块中添加drupal_add_js？

> ID：10667617
> 
> 赞同：1
> 
> 时间：2012-05-19T17:58:30.070
> 
> 标签：javascript, drupal, module, add

我制作了一个模块并希望将 js 文件添加到该模块，我启用了该模块并且显然它可以工作。但是我没有看到模块应该带的 js 文件。

我只是像这样将代码放在 hook_menu() 中

```
function my2form_menu() {
      drupal_add_js(drupal_get_path('module', 'my2form') . '/abc.js');
} 
```

可以吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T18:28:21.390

如果您打算始终包含此 JS 文件，则应将其添加到模块的 .info 文件中：http: [//drupal.org/node/542202#scripts](http://drupal.org/node/542202#scripts)

因此您可以删除您的 hook_menu。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T18:03:54.610

尝试另一个钩子，称为：modulename_js_alter()

工作 fpr 我的 porpose。

# openid - OpenID 安全性：RP 不确保身份验证得到实际提供者的批准

> ID：10667627
> 
> 赞同：1
> 
> 时间：2012-05-19T18:00:31.333
> 
> 标签：openid, dotnetopenauth, openid-provider

## 一般说明

[我使用DotNetOpenAuth](http://www.dotnetopenauth.net/)实现了一个 OP（OpenID 提供程序）。我正在针对示例 RP（依赖方）对其进行测试，例如 Drupal 的 OpenID 登录和`OpenIdRelyingPartyWebForms`DotNetOpenAuth`Samples`解决方案中的项目。

问题是，据我所知，当浏览器反弹我的 OP 并向 RP 发送“成功的身份验证”请求（`mode: id_res`,`claimed_id: smth`等）时，RP 不会尝试执行服务器端向 OP 发出请求并询问它是否确实对用户进行了身份验证。我可以看到`openid.sig`OP 返回了一个签名，但同样，我看不出 RP 如何验证它，因为它没有与 OP 交换密钥。

所以问题是：**在 OP 方面是否有一些设置可以使工作流程安全？**

## 技术细节

我正在使用 Wireshark 来嗅探 RP 端的 HTTP 流量。没有 HTTPS，所以我可以查看和阅读所有消息。下面你可以看到究竟发生了什么。**B** = 浏览器，**OP** = OpenID 提供者，**RP** = 依赖方。域名替换为 *.example.com。

1.  **(B –> RP)**用户尝试访问依赖方上的仅限成员的资源。他输入浏览器发布到 RP 的 OP 端点。

    > openid_identifier： http://OP.example.com/OpenId/Provider.aspx? [xrds](http://OP.example.com/OpenId/Provider.aspx?xrds)

2.  **(RP –> OP –> RP)** RP 向我的 OP 发出一个服务器端请求，该请求返回一个 XRDS 文档。我在这里看不到任何类似于密钥交换的东西。

    ```
    <?xml version="1.0" encoding="UTF-8"?>
    <xrds:XRDS
        xmlns:xrds="xri://$xrds"
        xmlns:openid="http://openid.net/xmlns/1.0"
        xmlns="xri://$xrd*($v*2.0)">
        <XRD>
            <Service priority="10">
                <Type>http://specs.openid.net/auth/2.0/server</Type>
                <Type>http://openid.net/extensions/sreg/1.1</Type>
                <URI>http://OP.example.com/OpenId/Provider.aspx</URI>
            </Service>
        </XRD>
    </xrds:XRDS> 
    ```

3.  **(RP –> B –> OP)**依赖方 302-将用户重定向到 OP 的`/OpenId/Provider.aspx?[params]`URL，其中参数如下：

    ```
    openid.claimed_id: http://specs.openid.net/auth/2.0/identifier_select
    openid.identity: http://specs.openid.net/auth/2.0/identifier_select
    openid.assoc_handle: {634730422000625000}{jkQC1Q==}{32}
    openid.return_to: http://RP.example.com/login.aspx?ReturnUrl=%2FMembersOnly%2FDefault.aspx&dnoa.receiver=ctl00_Main_OpenIdLogin1&dnoa.UsePersistentCookie=Session&dnoa.userSuppliedIdentifier=http%3A%2F%2FOP.example.com%2FOpenId%2FProvider.aspx%3Fxrds
    openid.realm: http://RP.example.com/
    openid.mode: checkid_setup
    openid.ns: http://specs.openid.net/auth/2.0
    openid.ns.sreg: http://openid.net/extensions/sreg/1.1
    openid.sreg.policy_url: http://RP.example.com/PrivacyPolicy.aspx
    openid.sreg.required: email,gender,postcode,timezone 
    ```

4.  **(OP –> B –> RP)** Provider 对用户进行身份验证，并使用以下 URL 参数 302 将他重定向回 RP：

    ```
    ReturnUrl: /MembersOnly/Default.aspx
    dnoa.receiver: ctl00_Main_OpenIdLogin1
    dnoa.UsePersistentCookie: Session
    dnoa.userSuppliedIdentifier: http://OP.example.com/OpenId/Provider.aspx?xrds
    openid.claimed_id: http://OP.example.com/OpenId/User.aspx/2925
    openid.identity: http://OP.example.com/OpenId/User.aspx/2925
    openid.sig: pWJ0ugjQATKGgRSW740bml9LDsSxFiJ+a9OLO6NlsvY=
    openid.signed: claimed_id,identity,assoc_handle,op_endpoint,return_to,response_nonce,ns.sreg,sreg.nickname,sreg.email
    openid.assoc_handle: {634730422000625000}{jkQC1Q==}{32}
    openid.op_endpoint: http://OP.example.com/OpenId/Provider.aspx
    openid.return_to: http://RP.example.com/login.aspx?ReturnUrl=%2FMembersOnly%2FDefault.aspx&dnoa.receiver=ctl00_Main_OpenIdLogin1&dnoa.UsePersistentCookie=Session&dnoa.userSuppliedIdentifier=http%3A%2F%2FOP.example.com%2FOpenId%2FProvider.aspx%3Fxrds
    openid.response_nonce: 2012-05-19T16:40:11ZSfsL4BK1
    openid.mode: id_res
    openid.ns: http://specs.openid.net/auth/2.0
    openid.ns.sreg: http://openid.net/extensions/sreg/1.1
    openid.sreg.nickname: user@OP.example.com
    openid.sreg.email: user@OP.example.com 
    ```

5.  **(RP –> OP)** RP 向 OP 执行服务器端 HTTP 请求。没有数据传输，只是对先前获取的用户身份 URL 的 GET 请求。顺便说一句，它为什么会提出这个要求？

    ```
    GET /OpenId/User.aspx/2925 HTTP/1.1 
    ```

6.  **(OP –> RP)** OP 回复另一个 XRDS 文档：

    ```
    <xrds:XRDS
        xmlns:xrds="xri://$xrds"
        xmlns:openid="http://openid.net/xmlns/1.0"
        xmlns="xri://$xrd*($v*2.0)">
        <XRD>
            <Service priority="10">
                <Type>http://specs.openid.net/auth/2.0/signon</Type>
                <Type>http://openid.net/extensions/sreg/1.1</Type>
                <URI>http://OP.example.com/OpenId/Provider.aspx</URI>
            </Service>
            <Service priority="20">
                <Type>http://openid.net/signon/1.0</Type>
                <Type>http://openid.net/extensions/sreg/1.1</Type>
                <URI>http://OP.example.com/OpenId/Provider.aspx</URI>
            </Service>
        </XRD>
    </xrds:XRDS> 
    ```

7.  **（RP -> B）**就是这样。用户已获得授权，RP 向他显示仅限成员的资源。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T01:08:34.960

RP 可以在*有状态*或*无状态*模式下运行（也分别称为智能模式和哑模式）。查看[每个](http://bit.ly/jeszir).

RP 和 OP 之间存在一次性密钥交换，前提是 RP 在有状态模式下运行。如果在无状态模式下，您将在每次身份验证后看到从 RP 到 OP 的消息，以验证断言的签名。

关于您在 #5 上的问题（对声明的标识符的 HTTP HEAD 请求），这是 DotNetOpenAuth RP 检查 OP 对于它所断言的身份是否具有权威性。由于它之前已提取此 URL，因此缓存会启动并避免内容传输。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T20:09:49.477

我现在感觉很愚蠢，我错过了一些基本的东西——RP 和 OP 之间有**一个**密钥交换，但它只发生一次，然后密钥在双方缓存了一段时间。

所以我对 OpenID 提供者的实现结果证明是安全的 :)

# c# - 提取网格或点云的中心曲线（中轴或拓扑骨架）的代码？

> ID：10667628
> 
> 赞同：3
> 
> 时间：2012-05-19T18:01:15.583
> 
> 标签：c#, python, vb.net, computational-geometry, mesh

你知道任何现有的代码来提取网格或点云的中心曲线吗？网格的中心曲线与其[边界](http://en.wikipedia.org/wiki/Boundary_%28topology%29)等距。

我查看了已经发布的几个问题/答案，例如平面多边形上的这个问题/答案，但找不到一个解释 3D 结果的问题/答案，例如本文中显示的问题[和](https://stackoverflow.com/questions/1069523/find-medial-axis-of-a-polygon-using-c-sharp)[关于](http://code.google.com/p/skeletonization/)[“](http://visgraph.cse.ust.hk/projects/skeleton/)通过基于拉普拉斯的收缩的点云骨架化”的问题，其中这个二次方程[在](https://math.stackexchange.com/questions/147136/what-is-the-lvert-symbol)两者中都出现了。

[本文](http://www.doiserbia.nb.rs/img/doi/1820-0214/2010/1820-02141001063S.pdf)还介绍了使用基于“连接环”的突出分割的 3D Mesh Skeleton Extraction 的方法。

到目前为止，我最接近让它工作的是 ImageJ 的[Skeletonize3D](http://imagejdocu.tudor.lu/doku.php?id=plugin:morphology:skeletonize3d:start)插件，但我还不能让它适用于 .obj 网格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T21:07:43.950

不幸的是，一般来说这样的曲线是不存在的。它仅存在于非常特殊的情况下，例如，如果可以通过沿曲线扫过球体来生成云的边界，例如 POVRay 中生成的这种形状（来自[此网页](http://www.f-lohmueller.de/pov_tut/all_shapes/shapes630e.htm)）：
          ![扫过的球体](../Images/e0191032e2a62799ef7b5a822d6f05ce.png)
因此您将不得不接受某种类型的近似值。

一个想法是首先以某种方式计算边界。既然你提到了网格，也许你已经有了边界。其次，找到最大的内接球体。第三，通过最佳拟合曲线近似它们的中心。

正如*bo* ^4 所暗示的，并且您的标题承认，您确实在寻找[medial axis](http://en.wikipedia.org/wiki/Medial_axis)，这既难以计算又通常是多页表面。本质上，您希望通过一条曲线来近似中轴。

# objective-c - 使用Objective-C，在什么情况下我们需要进行手动内存管理？

> ID：10667630
> 
> 赞同：1
> 
> 时间：2012-05-19T18:01:43.460
> 
> 标签：objective-c, ios, cocoa

本题旨在了解当前 Objective-C 的手动内存管理，以及它在过去的使用。

据说使用Objective-C多年的人几乎把Objective-C中的内存管理当成一种“反射”……（the `alloc`, `retain`, `release`, `autorelease`）

但是如果在计算机上使用Objective-C，那不就是垃圾回收吗？直到最近在 iPhone 和 iPad 上使用 Objective-C 才需要手动管理，这不是真的吗，因为 iOS 没有垃圾收集？过去，可能是在 90 年代，Objective-C 没有垃圾收集，或者它总是有垃圾收集但自从 iPhone 出来之后，然后`retain`被`release`添加到语言中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T18:13:45.587

为了回答您实际提出的问题，Objective-C 仅在 2007 年（后期）发布的 Mac OS X 10.5 Leopard 中获得了垃圾收集功能。在此之前，手动内存管理是唯一的选择。即使在 Leopard 发布之后，大多数 Cocoa 开发人员也没有使用垃圾收集，原因有很多：现有代码库的惯性、需要支持旧的 OS 版本、使用垃圾收集固有的性能损失、iOS 上不支持等等。

ARC 被更快地采用有几个原因，我（当然还有 Apple）认为它是比垃圾收集更好的解决方案。ARC 随 iOS 5.0 和 Mac OS X 10.7 Lion 的发布提供（部分支持部署到 iOS 4.3 和 Mac OS X 10.6）。Lion 和 iOS 5 都在不到一年前发布，因此任何编写 Objective-C 时间超过该时间的开发人员都使用/使用手动引用计数，你说得对，它对我们大多数人来说是自反的。

尽管 ARC 被迅速采用，至少与垃圾收集相比，它的使用还远未普及。任何需要支持 iOS 4.2 或更早版本或 Mac OS X 10.5 或更早版本的人仍然必须使用手动引用计数。此外，我认为有很多经验丰富的 Cocoa 程序员还没有看到切换到 ARC 的理由，因为对他们来说，手动引用计数并不是一个巨大的负担。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-19T18:16:07.887

> 但是如果在计算机上使用Objective-C，那不就是垃圾回收吗？

首先，就 ObjC 而言，垃圾收集是一项新功能，于 2007 年与 OS X 10.5 同时引入。其次，它是一个*框架*功能——也就是说，它是*Cocoa*的一部分——不是语言本身的一部分。它仍然可以在 OS X 上使用，但据我所知，Apple 并不打算再使用它。ARC 是新的系统提供的内存管理范例。

> 直到最近在 iPhone 和 iPad 上使用 Objective-C 才需要手动管理，这不是真的吗，因为 iOS 没有垃圾收集？过去怎么样，可能回到 90 年代，Objective-C 没有垃圾收集，或者它总是有垃圾收集但自从 iPhone 出来后，

不，从 NeXT 时代开始，直到引入 Cocoa 的垃圾收集，桌面上总是需要手动内存管理（就像在 C++ 或 C 中一样）。即使在 GC 可用之后，由于性能问题或需要在较旧的 OS 版本上运行，许多人还是更愿意坚持使用 MRR。

> 那么`retain`and`release`被添加到语言中了吗？

特定的方法`retain`和`release`以及它们启用的引用计数系统同样是框架的一部分，而不是语言，但由于 Cocoa 是使用 ObjC 的卓越框架（其他 ObjC 框架，如 GNUStep，模仿 Cocoa），它是编写 ObjC 时执行内存管理的主要方式。（当然，Cocoa 继承了NeXT 的`retain`/`release`系统。）

完全可以使用自己的内存管理方法/系统编写另一个根类。但是，这样做并尝试与 Cocoa 交互会有点疯狂，而且它根本无法用 ARC 编译。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T02:30:17.947

手动内存管理（或 ARC，它告诉编译器尝试为您执行一些手动内存管理）允许更确定的运行时性能，以及更好地控制应用程序的峰值内存使用，这两者在小型移动设备上都非常重要。为什么要浪费用户的电池寿命来进行垃圾收集，通常是在较差的时候以获得良好的动画和 UI 响应？

# regex - 正则表达式中的必需值

> ID：10667631
> 
> 赞同：1
> 
> 时间：2012-05-19T18:01:54.107
> 
> 标签：regex

目前我有：

```
^[a-zA-Z0-9_\x7f-\xff]*/[a-zA-Z0-9_\x7f-\xff]*$ 
```

我想`blah/blah`匹配，但我不想`c/blah`or `/blah`or `blah/`or`blah/c`匹配（所以我希望它在字符串的两侧至少有两个值。

请注意，`^`and`$`是因为整个字符串与正则表达式非常匹配，而不仅仅是其中的一部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T18:11:26.763

更改表达式如下：

```
^[a-zA-Z0-9_\x7f-\xff]{2,}/[a-zA-Z0-9_\x7f-\xff]{2,}$ 
```

使用`{2,}`代替`*`确保必须*至少*匹配先前的正则表达式的两个匹配项。

# dependency-injection - Guice - 如何从子级向父级注入抽象字段

> ID：10667632
> 
> 赞同：4
> 
> 时间：2012-05-19T18:02:05.667
> 
> 标签：dependency-injection, abstract-class, guice

我有一个简单的层次结构，如下所示：

```
public abstract class AbsFoo {
    protected AbsBoo boo;
}

public class Foo extends AbsFoo {
    public Foo() {
        boo = new Boo(); // Boo extends AbsBoo
    }
} 
```

编辑： AbsFoo 的实例应该即时创建，并且可能不是字段

可以`boo = new Boo()`用注射代替吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T18:16:00.617

是的：

```
public abstract class AbsFoo {
    protected AbsBoo boo;
}

public class Foo extends AbsFoo {
    @Inject
    public Foo(Boo boo) {
        super.boo = boo; // Boo extends AbsBoo
    }
} 
```

确保使用 @Inject 或 injector.getInstance() 构造 Foo 实例

**编辑**

您还可以使用提供者按需创建实例：

```
@Inject
Provider<Foo> fooProvider

//...

public void doSomething(){
    //need new foo:
    Foo foo = fooProvider.get();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T18:23:02.787

只要 Boo 本身不是抽象的，你就应该可以。

```
public class Foo extends AbsFoo {

    @Inject
    public Foo( AbsBoo boo ) {
        this.boo = boo;
    }
}

public class FooModule extends AbstractModule {
  @Override 
  protected void configure() {
    bind(AbsBoo.class).to(Boo.class);
    bind(AbsFoo.class).to(Foo.class);
  }
}

public static void main(String[] args) {
    Injector injector = Guice.createInjector(new FooModule());
    AbsFoo foo = injector.getInstance(AbsFoo.class);
    ...
} 
```

# html - Opera 和 Firefox 中的文本框显示问题

> ID：10667633
> 
> 赞同：2
> 
> 时间：2012-05-19T18:02:07.073
> 
> 标签：html, css, firefox, opera

对于 Opera 和 Firefox，我的文本框占位符显示需要您的帮助。当我在框中输入时，字母没有完全显示。这在 Google Chrome 中不会发生。

目前看起来像这样

**图片**

![](../Images/842410b0786465aafe4b5d7b0a87d8c7.png)

**CSS**

```
.Input_Text { 
border:    none !; 
outline:    none;    
font-size:  15px;
margin:   5px 5px 5px 0px;
width:    195px;
height:    5px;
color:      black;
opacity:     0.6;
padding:    10px 10px;   
border-radius:  5px;  
font-family:  lucida grande;
margin-bottom: 5px;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T18:09:57.593

高度弄乱了代码。您可以使用 padding 属性设置它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T18:10:36.723

`height: 5px;` ——这一定是你的罪魁祸首！！！..

尝试 15px/20px 或更多..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T18:15:09.610

调整高度

```
.Input_Text { 
    border:    none !; 
    outline:    none;    
    font-size:  15px;
    margin:   5px 5px 5px 0px;
    width:    195px;
    height:    10px;
    color:      black;
    opacity:     0.6;
    padding:    10px 10px;   
    border-radius:  5px;  
    font-family:  lucida grande;
    margin-bottom: 5px;
}​ 
```

[**演示**](http://jsfiddle.net/bmtCv/3/)

# sql-server - 在 SQL Server 中使用比 Max 命令更高级别的 Group-By

> ID：10667639
> 
> 赞同：0
> 
> 时间：2012-05-19T18:02:57.820
> 
> 标签：sql-server, group-by, max

我正在做一个查询，我需要使用 SQL Server 中的 Max 命令去除一些较低级别的结果。那么我怎样才能做出更高级别的 Group By 声明？我知道我可以为此使用临时表。我期望高容量，并希望避免出于性能目的创建和破坏临时表。

```
SELECT k.Result_ID, k.Key_Name, max(k.Value_Percentage) as Percentage 
FROM Key_Word k
LEFT JOIN Phrase p 
    ON p.Result_ID = k.Result_ID 
    AND p.Key_Name = k.Key_Name 
    AND k.Phrase_Flag = 1
    AND  @fulltextsearch LIKE '%' + p.phrase + '%'
WHERE k.Key_Word IN 
    ('estimated', 'flow', 'cash', 'approximate', 'brian', 'go', 'store') 
    AND (k.Phrase_Flag = 0 OR p.Phrase IS NOT NULL)
GROUP BY k.Result_ID, k.Key_Name
ORDER BY k.Result_ID ASC; 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T18:12:32.660

你在寻找有[吗](http://msdn.microsoft.com/en-us/library/ms180199.aspx)？：

```
SELECT k.Result_ID, k.Key_Name, max(k.Value_Percentage) as Percentage 
FROM Key_Word k
LEFT JOIN Phrase p 
ON p.Result_ID = k.Result_ID 
AND p.Key_Name = k.Key_Name 
AND k.Phrase_Flag = 1
AND  @fulltextsearch LIKE '%' + p.phrase + '%'
WHERE k.Key_Word IN 
('estimated', 'flow', 'cash', 'approximate', 'brian', 'go', 'store') 
AND (k.Phrase_Flag = 0 OR p.Phrase IS NOT NULL)
GROUP BY k.Result_ID, k.Key_Name
HAVING max(k.Value_Percentage) > 10 
```

或者，如果您需要显示`max(k.Value_Percentage)`每个 Result_ID ，您可以使用`WITH ROLLUP`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T12:33:37.823

在谈论“剥离”较低级别的结果时，您的想法不是很清楚。如果您的意思是根据某个*值*过滤结果，那么[a1ex07 的答案](https://stackoverflow.com/a/10667704/297408)似乎是可行的方法。

但是，如果您的意思是根据返回的 MAX 值的*排名*过滤它们（即仅显示具有最高 MAX 值的行，或者可能具有前 3 个值的行），那么您可以执行以下操作：

1.  使用`TOP 1 WITH TIES`（`1`因为它只对最上面的 MAX 可靠地工作）：

    ```
    **SELECT *
    FROM (**
      SELECT **TOP 1 WITH TIES**
        k.Result_ID, k.Key_Name, MAX(k.Value_Percentage) as Percentage 
      FROM Key_Word k
      LEFT JOIN Phrase p 
          ON p.Result_ID = k.Result_ID 
          AND p.Key_Name = k.Key_Name 
          AND k.Phrase_Flag = 1
          AND  @fulltextsearch LIKE '%' + p.phrase + '%'
      WHERE k.Key_Word IN 
          ('estimated', 'flow', 'cash', 'approximate', 'brian', 'go', 'store') 
          AND (k.Phrase_Flag = 0 OR p.Phrase IS NOT NULL)
      GROUP BY k.Result_ID, k.Key_Name
      **ORDER BY MAX(k.Value_Percentage) DESC
    ) s**
    ORDER BY Result_ID ASC; 
    ```

2.  使用`DENSE_RANK()`函数（需要 SQL Server 2005 或更高版本）：

    ```
    **SELECT *
    FROM (**
      SELECT **DENSE_RANK() OVER (PARTITION BY MAX(k.Value_Percentage)) AS ranking**
        k.Result_ID, k.Key_Name, MAX(k.Value_Percentage) as Percentage 
      FROM Key_Word k
      LEFT JOIN Phrase p 
          ON p.Result_ID = k.Result_ID 
          AND p.Key_Name = k.Key_Name 
          AND k.Phrase_Flag = 1
          AND  @fulltextsearch LIKE '%' + p.phrase + '%'
      WHERE k.Key_Word IN 
          ('estimated', 'flow', 'cash', 'approximate', 'brian', 'go', 'store') 
          AND (k.Phrase_Flag = 0 OR p.Phrase IS NOT NULL)
      GROUP BY k.Result_ID, k.Key_Name
    **) s
    WHERE ranking <= *n***
    ORDER BY Result_ID ASC; 
    ```

# android - 在android上的线程中访问GUI组件

> ID：10667646
> 
> 赞同：0
> 
> 时间：2012-05-19T18:03:27.283
> 
> 标签：android

我想访问 GUI 的组件，例如从线程更改 textview 怎么做？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T18:10:52.990

使用处理程序将消息发送到 UI 线程，如此[处](http://developer.android.com/resources/articles/timed-ui-updates.html)和[此处](http://developer.android.com/reference/android/os/Handler.html)所述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T18:08:14.437

您正在寻找[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)。

`Thread`它与专门针对 Android 环境的 Java 相同，并且完全为 GUI 更新目的而创建。

从文档：

> AsyncTask 允许正确和轻松地使用 UI 线程。此类允许在 UI 线程上执行后台操作并发布结果，而无需操作线程和/或处理程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T18:08:27.850

把它写进去

```
MyActivity.this.runOnUiThread((new Runnable() {
    public void run() {
        textview.setText("New text");
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T18:08:32.967

使用以下方法之一：

```
Activity.runOnUiThread(Runnable)
View.post(Runnable)
View.postDelayed(Runnable, long)
Handler 
```

更多信息在这里：http: [//developer.android.com/resources/articles/painless-threading.html](http://developer.android.com/resources/articles/painless-threading.html)

# networking - 如何区分 UDP 广播和单播？

> ID：10667647
> 
> 赞同：3
> 
> 时间：2012-05-19T18:03:53.500
> 
> 标签：networking, udp, winsock, broadcast

我有一个应用程序（用 C/C++ 编写），它通过 UDP 在本地网络内的许多 Windows 和 Linux 主机之间进行通信（通过 winsock / Linux-Sockets）。我只使用一个端口，因此每台主机上只有一个套接字。有些消息是广播，回复通常是单播，但有些也是广播。到目前为止一切正常，但是：

如何确定我收到的 Paket（通过 recvfrom）是广播还是单播？

我找到的唯一解决方案是在 Payload 中发送此信息或使用不同的端口。两个都不是很好...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T18:14:40.633

在 Linux 端，您可以使用 设置`PKT_INFO` [`ip(7)`](http://www.kernel.org/doc/man-pages/online/pages/man7/ip.7.html)套接字选项[`setsockopt(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/getsockopt.2.html)，然后用于[`recvmsg(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/recvmsg.2.html)获取 UDP 数据包的目标地址。

# jsf - 将列表传递给 JSF 组件而不使用 bean

> ID：10667650
> 
> 赞同：5
> 
> 时间：2012-05-19T18:04:21.963
> 
> 标签：jsf

如何在没有 backingbean 的情况下将 List 传递给 EL 中的 JSF 组件？或者换句话说，我如何在没有 bean 的情况下在 JSF 中声明和初始化列表/数组？

例子：

调用者.xhtml

```
/* Call a JSF-Component */
<mycomp:displayList value="HERE I WANT TO PASS A LIST WITHOUT A BACKINGBEAN"/> 
```

显示列表.xhtml

```
/* MY Component */
<composite:interface>
     <composite:attribute name="value" type="java.util.list" />
</composite:interface> 
```

是否有可能将未在 Bean 中声明的 List/Collection 传递给 JSF 组件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T19:18:58.770

尽管 EL 中没有列表文字，但您可以通过在 faces-config.xml 中声明一个列表来声明一个列表，而无需 bean 包含它：

```
<managed-bean>
    <managed-bean-name>someList</managed-bean-name>
    <managed-bean-class>java.util.ArrayList</managed-bean-class>
    <managed-bean-scope>request</managed-bean-scope>
    <list-entries>
        <value>One</value>
        <value>Two</value>
        <value>Three</value>
    </list-entries>
</managed-bean> 
```

您还可以使用实用程序类型来构建列表：

```
import java.util.*; import javax.faces.bean.*;

@ManagedBean @NoneScoped
public class Lister<T> extends AbstractList<T> {
  private List<T> list = new ArrayList<T>();

  public Lister plus(T t) {
    list.add(t);
    return this;
  }

  @Override public T get(int index) {
    return list.get(index);
  }

  @Override public int size() {
    return list.size();
  }

  @Override public String toString() {
    return list.toString();
  }
} 
```

这可以与类似的表达式一起使用`#{lister.plus('one').plus('two').plus('three')}`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-14T09:52:19.070

EL 3.0 可以构建集合。

放：

```
{1, 2, 3} 
```

列表：

```
[1, "two", [foo, bar]] 
```

地图：

```
{"one":1, "two":2, "three":3} 
```

将 EL 集合构造与 JSF 一起使用的示例：

```
<h:dataTable value="#{[1, 2, 3]}" var="v">
    <h:column>#{v}</h:column>
</h:dataTable> 
```

请参阅[EL 3.0 规范 - 最终版本](https://java.net/projects/el-spec/downloads)，2.2 集合对象的构造。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-19T18:16:11.633

如果您的问题的意思是“EL 中是否有列表文字？”，那么答案是“没有”。

如果您想创建一个列表而不使用 JSF 支持 bean，那么答案是：“使用 CDI bean 或 Spring bean”。

如果您只是不喜欢在 Java 项目中使用模型类，那么您可以轻松创建和注册一个 EL 解析器，该解析器将在使用特定名称时创建一个新列表。

无论哪种方式，您都可能犯了一些重大错误或误解了一些重要的事情。也许你应该问一个不同的问题。

# php - mysql 服务器重启如何影响当前正在运行的作业

> ID：10667653
> 
> 赞同：2
> 
> 时间：2012-05-19T18:05:14.413
> 
> 标签：php, mysql, linux

在我的虚拟专用 linux 服务器上，总是有一些 php 作业正在运行。这些作业不断在不同的表中写入数据。我想知道，如果我在进行了一些配置更改后需要重新启动我的 mysql 服务器会发生什么？如果我重新启动我的 mysql 服务器，所有正在运行的作业会被终止吗？还是他们会暂停一段时间，在服务器重新启动时抛出错误？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T18:09:26.250

取决于这些 php 作业的编写情况。他们可能会保留数据直到重新建立连接，他们会发送邮件失败并“寻求帮助”，或者他们可能会失败，因为未使用事务逻辑而导致数据处于混乱状态。

您可能会得到最好的结果，或者最坏的结果完全取决于这些 php 作业的开发情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T22:35:13.313

如果您在实际的 mysql php 调用周围添加一些代码，您可以捕获错误并处理它们。

```
function mquery( $qry, $lnk ) {
global $dbl;  # your pre-established database link

$result = mysql_query( $qry, $lnk );

if ( $result === false ) {
    $error_msg = mysql_error( $lnk );

    while ( $result === false && @$i < 25 ) {
        $i++;

        $error_no  = mysql_errno( $lnk );

        if      ( $error_no == 1054 ||  # "MySQL Error #1054: Unknown column..."
                     $error_no == 1064 ||  # "You have an error in your SQL syntax" - MAC - May 30, 2012
                     $error_no == 1065 ) { # "Query was empty" 
            break;  # don't loop on errors - it will not succeed
        }
        else if ( $error_no == 1205 ||  # SQLSTATE[HY000]: General error: 1205 Lock wait timeout exceeded; try restarting transaction
                     $error_no == 1213 ) { # "Deadlock found when trying to get lock; try restarting transaction" 
            sleep( $i );                 # try sleeping a bit longer to get past the deadlock
        }
        else if ( $error_no == 2003 ||  # SQLSTATE[HY000] [2003] Can't connect to MySQL server
                     $error_no == 2006 ||  # "MySQL server has gone away" -- reconnect 
                     $error_no == 2013 ) { # SQLSTATE[HY000] [2013] Lost connection to MySQL server at 'reading authorization packet', system error: 0
            sleep( $i );
            if      ( $lnk == $dbl )    { # you may have multiple database links...
                get_dbl();   # re-establish your database link
                $lnk = $dbl;
            }
        }
        else {
            sleep( 1 ); # keeps us from sleeping too long on other errors
        }

        $result = mysql_query( $qry, $lnk );
    }
    echo "\n<!-- MySQL Error #$error_no: '$error_msg' (tried $i times) -->\n";
}

return $result; 
```

} // 结束 mquery

如果您发现您有其他错误*可能会*在您等待一会儿后成功，然后添加它们。

对于无论等待多长时间都不会成功的错误，请将它们添加到“中断”代码块中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T21:44:13.457

取决于他们是怎么写的。

很可能，由于它们是用 PHP 编写的，它们会在数据库中出现大量错误，这将触发 PHP E_WARNINGs，应用程序将完全忽略它并在其输出文件中生成垃圾数据，进入无限循环，或其他一些完全无用的行为。

他们肯定不会被杀。但是，它们可能会死掉（这可能是合理的行为，前提是它们可以重新启动并做正确的事情）。

# jquery - 没有根级节点的模板

> ID：10667656
> 
> 赞同：1
> 
> 时间：2012-05-19T18:06:10.050
> 
> 标签：jquery, html, coding-style, templating

我一直在尝试在 js 中进行模板化，并且遇到了一个非常酷的问题。假设您有一个车把模板。然后编译并输出

```
var template =
  '<h1>Hello</h1>' +
  '<ul>' +
    '<li>{{name}}</li>' +
    '<li>{{address}}</li>' +
    '<li>{{phone}}</li>' +
  '</ul>';

var html = Handbars.compile(template)(
  {name: 'Austin', address: '42nd St.' phone: '(123) 456-7890'}
);

// Results in
console.log(html);
=> <h1>Hello</h1>
   <ul>
     <li>Austin</li>
     <li>42nd St.</li>
     <li>(123) 456-7890</li>
   </ul> 
```

现在说你想让它成为一个 jQuery 对象并对其采取行动可能会找到 ul

```
var $html = $(html)
var x = $html.find('ul');  \\ Or
var y = $('ul', $html)

console.log(x);
=> []

conosle.log(y);
=> 

console.log($html)
=> [<h1>Hello</h1>, <ul>...</ul>] 
```

这表明当您对没有根节点的字符串进行 jQueryify 处理时，您会得到一个节点数组

并且这些发现只作用于`$html[0]`

我能够解决这个问题的唯一方法是在我的模板中包含一个根节点，但我不喜欢仅仅因为 jQuery 表现不佳而添加毫无意义的非语义标记。

您如何以编程方式解决此问题，而不是修改标记。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T18:11:19.260

实际上，`.find` *确实*对 jQuery 对象的两个元素都进行了操作，但它只是`find`它们的后代。你想要的是`.filter`：

```
var x = $html.filter('ul'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T18:11:55.750

您可以使用：

```
$html.filter('ul'); 
```

**基调：**

*   filter 将选择已选择元素的某个子集（零个或多个） 。

*   find 将选择一组（零个或多个）元素，这些元素是
    已选择元素的后代。

你也可以[**在这里查看**](https://stackoverflow.com/questions/10378757/difference-between-find-and-filter-in-jquery)

# android - Android - 生成特定分贝的音调

> ID：10667658
> 
> 赞同：2
> 
> 时间：2012-05-19T18:06:20.863
> 
> 标签：android

我需要从 -10 分贝开始生成音调，每一步增加 10，直到 100。一步需要 3 秒。
音调生成部分已经完成并且效果很好，剩下的部分是如何生成具有特定分贝的音调。

在搜索时，我遇到了这个线程：[如何在 java 中生成具有不同分贝的纯音？](https://stackoverflow.com/questions/7147294/how-to-generate-pure-tones-with-different-decibels-in-java) 他们使用幅度来计算 dB。我的问题是，我可以使用声级而不是振幅吗？

# c - Arduino：转换 client.read()

> ID：10667665
> 
> 赞同：1
> 
> 时间：2012-05-19T18:07:09.777
> 
> 标签：c, imap, arduino

我正在尝试使用 Arduino+Ethernet Shield 检查未读邮件的数量，发送两个 IMAP 请求。使用 client.read(server_answer)，我将它存储到一个字符中。当我使用 Serial.print(server_answer) 将其发送到串行时，我得到以下信息：

```
* OK IMAP server ready H migmx111 92345
0 OK LOGIN completed
* STATUS INBOX (UNSEEN 1)
0 OK STATUS completed
* STATUS INBOX (MESSAGES 1917)
0 OK STATUS completed
* BYE Server logging out
0 OK LOGOUT completed 
```

现在我的问题是：如何提取这两个数字（邮件总数和未读邮件总数，在示例中为 1 未读和 1917 总数）？如何将它们放在两个不同的字符串中？我想在 LCD 上显示带有一些文本的数字（“您有 [number] 个新邮件！”）。

如果有帮助，这是我的代码中有趣的部分：

```
void loop()  
{  
 updateClient();  
 checkAvail();  
}  

void updateClient()  
{  
 if ((millis() - updateTimer) > 10000)  
 {  
   Ethernet.begin(mac, ip);  
  // Serial.println("connecting...");  
   delay(1000);  
   if (client.connect())  
   {  
 //Serial.println("connected");  
 client.println("0 login myusername mypasswd"); 

 client.println("0 STATUS INBOX (UNSEEN)");
 client.println("0 STATUS INBOX (MESSAGES)");
 client.println("0 logout");  
 clientConnected = true;  
   }  
   else  
   {  
 Serial.println("connection failed");  
   }  
   updateTimer = millis();  
 }  
}  

void checkAvail()  
{  
 if (clientConnected)  
 {  
   if (client.available())  
   {  

server_answer = client.read(); 

 Serial.print(server_answer); 

   }  
   if (!client.connected())  
   {  
 Serial.println();  
// Serial.println("disconnecting.");  
 client.stop();  
 clientConnected = false;  
   }  
 }  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T05:28:55.060

在不为您编写代码的情况下，您需要使用 strtok_r() 将传入的数据分成块。查看上面调用 strtok_r() 的代码，使用 '(' 作为定界符，然后再次使用空格作为定界符，然后再次使用 ')' 应该让你开始你的第一个数字。从那里 atoi() 将其转换为整数。重复该过程也应该使您达到第二个值。

如果您还有其他问题，请对此进行破解并发布您的代码。

# django - 缓存如何影响内存消耗？

> ID：10667674
> 
> 赞同：6
> 
> 时间：2012-05-19T18:08:58.597
> 
> 标签：django, caching

我有一个具有搜索功能的应用程序。此功能在我缓存 24 小时的巨型对象（字典）中查找搜索词。该对象大约有 50,000 个键，重约 10MB。

当我分析主机上的内存使用情况时，我注意到经过几次查询后，内存使用量从大约 50MB 上升到超过 450MB，这促使我的主机提供商终止了该应用程序。

所以我想知道这里发生了什么。具体来说，缓存如何在每个请求上利用内存，我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T17:33:51.590

Django FileBasedCache 以存在性能问题而闻名。您可以通过以下链接获得大图：

[一个更智能的基于文件的 Django 缓存](http://fzysqr.com/2012/04/07/a-smarter-filebasedcache-for-django/)

[错误：基于文件的缓存对于大量缓存文件效率不高](https://code.djangoproject.com/ticket/11260)

错误被设置为*不会修复*争论：

> *我将不会修复，因为文件系统缓存旨在作为测试缓存的一种简单方法，而不是作为一种严肃的缓存策略。默认缓存大小和文件缓存实现的剔除策略应该很明显。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T17:07:21.913

考虑使用像 Memcache 或 Redis 这样的 KVS 作为缓存策略，因为它们都支持过期。此外，如果更多预期功能与搜索相关，请考虑使用 ElasticSearch 等专用搜索。

工具是可用的方法：

[为 django 项目安装 memcached](https://stackoverflow.com/questions/7636108/installing-memcached-for-a-django-project)

[http://code.google.com/p/memcached/wiki/NewStart](http://code.google.com/p/memcached/wiki/NewStart)

[http://redis.io/commands/expire](http://redis.io/commands/expire)

[https://github.com/bartTC/django-memcache-status](https://github.com/bartTC/django-memcache-status)

[http://www.elasticsearch.org/guide/reference/index-modules/cache.html](http://www.elasticsearch.org/guide/reference/index-modules/cache.html)

# c# - linq，其中列表包含列表中的任何内容

> ID：10667675
> 
> 赞同：130
> 
> 时间：2012-05-19T18:09:01.337
> 
> 标签：c#, linq

使用 linq，如何检索其属性列表与另一个列表匹配的项目列表？

以这个简单的例子和​​伪代码为例：

```
List<Genres> listofGenres = new List<Genre>() { "action", "comedy" });   
var movies = _db.Movies.Where(p => p.Genres.Any() in listofGenres); 
```

* * *

## 回答 #1

> 赞同：229
> 
> 时间：2012-05-19T18:10:54.437

听起来像你想要的：

```
var movies = _db.Movies.Where(p => p.Genres.Intersect(listOfGenres).Any()); 
```

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2012-05-19T18:13:20.723

您可以为此使用`Contains`查询：

```
var movies = _db.Movies.Where(p => p.Genres.Any(x => listOfGenres.Contains(x)); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-11-15T01:33:33.533

如果你使用`HashSet`而不是`List`for`listofGenres`你可以这样做：

```
var genres = new HashSet<Genre>() { "action", "comedy" };   
var movies = _db.Movies.Where(p => genres.Overlaps(p.Genres)); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-07-17T08:56:30.793

我想这也是可能的吗？

```
var movies = _db.Movies.TakeWhile(p => p.Genres.Any(x => listOfGenres.Contains(x)); 
```

在性能或清晰度方面，“TakeWhile”是否比“Where”差？

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-12-04T11:45:26.743

如果`Genre`是一个实体并且有它自己的属性，比如`Title`，使用下面的代码：

```
var listofGenresName = new List<string> { "action", "comedy" };
var movies = _db.Movies.Where(p => p.Genres.Any(x => listofGenresName.Any(g=> g == x.Title))); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-08-28T12:22:07.133

或者像这样

```
class Movie
{
  public string FilmName { get; set; }
  public string Genre { get; set; }
} 
```

...

```
var listofGenres = new List<string> { "action", "comedy" };

var Movies = new List<Movie> {new Movie {Genre="action", FilmName="Film1"},
                new Movie {Genre="comedy", FilmName="Film2"},
                new Movie {Genre="comedy", FilmName="Film3"},
                new Movie {Genre="tragedy", FilmName="Film4"}};

var movies = Movies.Join(listofGenres, x => x.Genre, y => y, (x, y) => x).ToList(); 
```

# android - 如何在 LinearLayout 上启用“按下”外观

> ID：10667676
> 
> 赞同：0
> 
> 时间：2012-05-19T18:09:11.057
> 
> 标签：android, focus, android-linearlayout, android-view

当我`ListView`为空时，我会显示以下 UI： ![在此处输入图像描述](../Images/63315ab895293d3b1d25d80adcbd6485.png)

现在，我希望当用户按下这个“新提醒”布局时，它会变为“突出显示”状态（ICS 中的焦点背景为蓝色，GB 中的焦点为黄色）

布局`clickable`和`onClick`方法被调用，但是当用户按下手指时没有任何指示。

我尝试设置`focusable`为`true`，但没有成功。

我该怎么做才能给任何视图默认的“按下”效果？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T03:12:34.837

使用您的布局，您可以使用如下所示的可绘制对象设置背景。

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_selected="true" android:drawable="@android:drawable/star_big_on" />
    <item android:state_pressed="true" android:drawable="@android:drawable/star_big_on" />
    <item android:drawable="@android:drawable/star_big_off" />
</selector> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-01T06:58:47.303

可绘制如下

```
<?xml version="1.0" encoding="UTF-8"?> 
```

```
<item android:state_enabled="true" android:state_pressed="true" android:drawable="@drawable/left_radio_selected"/>
<item android:state_enabled="false" android:drawable="@drawable/left_radio_inactive"/>
<item android:state_enabled="true"  android:state_selected="true" android:drawable="@drawable/left_radio_selected"/>
<item android:drawable="@drawable/left_radio_active"/> 
```

并设置你的`linerlayout.setSelected(true);`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T18:23:27.850

我不知道我对你的理解是否正确。如果要为此布局创建按下状态，则必须准备状态可绘制 xml（[更多信息](http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList)）。在那里你可以设置你的布局在按下状态时应该是什么样子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T18:26:49.747

我不确定，但你的问题似乎有点模糊。据我了解，您可能会在这篇文章中建议您想要什么[强制 ListView 项目在被点击后保持“按下”状态？](https://stackoverflow.com/questions/4860085/force-a-listview-item-to-stay-pressed-after-being-clicked)

# jsf-2 - filterBy（primefaces 3.2）不适用于日期

> ID：10667677
> 
> 赞同：0
> 
> 时间：2012-05-19T18:09:18.193
> 
> 标签：jsf-2

我使用 jsf 2.0 + primefaces 3.2。当数据是日期但它适用于其他类型的数据时，我对 filterBy 有问题。

```
<p:column sortBy="#{item.dateNaissance}" filterBy="#{item.dateNaissance}">
                            <f:facet name="header">
                                <h:outputText value="#{bundle.ListEtudiantTitle_dateNaissance}"/>
                            </f:facet>
                            <h:outputText value="#{item.dateNaissance}">
                                <f:convertDateTime pattern="dd/MM/yyyy" />
                            </h:outputText>
                        </p:column> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T19:06:26.947

默认过滤不适用于日期字段，但您可以使用高级过滤选项并提供过滤服务器端方法，该方法为您从数据集中进行过滤。

基本上，您将根据您的需要在按键事件和过滤记录上指定您的方法，默认假定所有内容都是字符串。

# objective-c - 使用 Core Data 时如何重新排列部分

> ID：10667682
> 
> 赞同：0
> 
> 时间：2012-05-19T18:09:44.903
> 
> 标签：objective-c, uitableview, sorting, core-data

有什么方法可以在不使用排序描述符的情况下重新排列使用核心数据的表视图的部分？
我需要的那种排序不是按字母顺序排列的，它会随时间变化（我已经读过，使用 Core Data，你不能使用自定义选择器作为排序描述符，所以默认选择器对我没有帮助）。

我有一个方法，当“部分重新排序”应该发生时被调用，我想知道是否有某种“索引向量”我可以修改，所以这些部分由该索引或类似的东西排序。
谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T18:49:16.653

您在这里有两个选择：

**1**
您想要在核心数据中排序的任何内容（并且，通过扩展，使用 a `NSFetchedResultsController`）您将需要以某种方式在您的数据中建模并使用排序描述符。

您声明（但不解释）“默认的 [排序描述符] 对您没有帮助”。我想这意味着模型中包含的数据不足以进行重新排序。在这种情况下，您必须为相关实体引入一个新属性。这听起来可能需要付出太多努力，但通常并没有那么糟糕。

**2**
您可以将`datasource`您的表格视图从获取的结果控制器更改为您自己的方案（例如，使用数组）。当然，存在内存影响，但这可能只是最简单的方法。

**编辑**
在您重申问题（循环向量排序）后，这里有一个建议：您可以使用`sortDescriptorWithKey:ascending:comparator:`来构造一个排序描述符，以准确提供您想要的结果。（**警告：未经测试的代码**）

```
int centerNumber = 2;  // or whatever your method returns
NSSortDescriptor *descriptor = [NSSortDescriptor 
     sortDescriptorWithKey:@"number" 
                 ascending:YES 
                  comparator:^(int a, int b) {
   NSComparisonResult r;
   if (a == b) r = NSOrderedSame;
   else if (a == centerNumber) r = NSOrderedAscending;
   else if (b == centerNumber) r = NSOrderedDescending;
   else if (abs(a-c) == abs(b-c))
      if (a<b) r = NSOrderedDescending;
      else r = NSOrderedAscending;
   else 
      if (abs(a-c) > abs(b-c)) r = NSOrderedAscending;
      else r = NSOrderedDescending;
   return r;
}]; 
```

让我知道它是否有效。

**编辑 2**
如果您需要 NSNumber （这是您的数据最有可能存储的方式），也许这有效：

```
...^(id x, id y) {
   int a = [x intValue];
   int b = [y intValue];
   ...
}... 
```

**最终编辑**

如果比较器不起作用，`NSComparisonResult`请作为结果类型插入：

```
...comparator:^NSComparisonResult(id x, id y){.... 
```

# jquery - jQuery Datatables 在列中插入字段值

> ID：10667685
> 
> 赞同：2
> 
> 时间：2012-05-19T18:10:32.170
> 
> 标签：jquery, datatables

我有一个 jQuery 数据表插件，它执行以下操作，

```
<tr>
            <th>Id</th>
            <th>Datee</th>
            <th>Delete</th>
</tr>

 $('#data').dataTable( {
        "bProcessing": true,
        "bServerSide": true,
        "sAjaxSource": "userlist.php",
        "aoColumns": [
            null,
            null,
            {
                "mDataProp": null,
                "sDefaultContent": '<a href="delete.php?action=activate&">DEL</a>'
            }
        ]
    } ); 
```

所以我在这里做的是我正在使用服务器端处理获取数据并添加一个带有链接的附加列以删除记录。

现在我希望 id=<> 将该特定记录添加到 & 末尾的 href 中

```
a href="delete.php?action=activate&id=<<first column value> . 
```

我还想将 MySQL 日期转换为 PHP 日期以用于第二列。

如何才能做到这一点 ？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T20:49:35.570

您可以使用[getData](http://datatables.net/ref#fnGetData)或使用 jquery 来完成。
更改以下内容：

```
"sDefaultContent": '<a href="delete.php?action=activate&">DEL</a>' 
```

到：

```
"sDefaultContent": '<a href="delete.php?action=activate&" class="delete">DEL</a>' 
```

然后使用以下代码：

```
$('#data').on('click', 'td .delete', function() {
    var id = $(this).closest('tr').find('td:first').html();
}); 
```

**[演示](http://jsfiddle.net/VNP6y/1/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T10:11:05.147

试试这个：修改里卡多的答案如下：

```
"sDefaultContent": '<a href="delete.php?action=activate&" class="delete">DEL</a>'

$('#data').on('click', 'td .delete', function(e) {
    e.preventDefault()
    var id = $(this).closest('tr').find('td:first').html();
    var href='delete.php?action=activate&id=' + id;
//  $('a.delete', $(this)).attr('href', href);
    window.location.href = href;
}); 
```

编辑：当表格以 HTML 呈现时，您不需要`id`添加到链接的 href 属性。以下代码将`delete.php`通过 ajax 调用脚本并将值传递`id`给该脚本。

```
$('#data').on('click', 'td .delete', function(e) {
    e.preventDefault()
    var id = $(this).closest('tr').find('td:first').html();
    $.get("delete.php", {id:id});
}); 
```

（然后，您还需要以某种方式更新显示的数据表 - 有用于此的 API 函数：[删除数据表的一行](http://datatables.net/examples/api/select_single_row.html)）。

更新：另一种选择是执行以下操作：

```
$("a.delete").each(function(){
    var id = $(this).closest('tr').find('td:first').html();
    var href = "delete.php?action=activate&id=" + id;
    $(this).attr('href', href);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T18:51:31.860

使用版本 1.8.2，我能够使用 mDataProp 的函数返回 html。在您的情况下，它看起来像：

```
"mDataProp": function (row) { '<a href="delete.php?action=activate&' + row[0] + '">DEL</a>'; } 
```

# iphone - 需要将 ios 列表中的垂直字母移动到 UIView 的左侧

> ID：10667688
> 
> 赞同：0
> 
> 时间：2012-05-19T18:10:47.880
> 
> 标签：iphone, objective-c, ios

我有一个自定义应用程序，它在表格视图中显示用户歌曲。我想重新定位字母索引选择，让您可以跳转到以某个字母开头的歌曲到表格视图的左侧。

是否可以重新构建选择视图？还是有定制的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T07:19:13.497

我已经为 UITableView 制作了字母滚动，在这里查看[http://blog.curiologix.com/custom-alphabetic-scroll-for-uitableview/](http://blog.curiologix.com/custom-alphabetic-scroll-for-uitableview/)

# c++ - QTimer 每秒执行一次方法

> ID：10667689
> 
> 赞同：1
> 
> 时间：2012-05-19T18:10:51.327
> 
> 标签：c++, qt, qt4

我正在学习 Qt，并且正在从 Qt wiki 阅读有关线程、事件和 QObjects 的信息，并遵循了有关如何在一段时间内处理某些工作的 wiki 建议，但它不适用于我的特定情况。这是我目前正在努力实现的一个简单示例。

```
class FooEvents : public FooWrapper {

    public virtual serverTime(..) { std::cout << "Server time event\n"; }
    public virtual connected(..) { std::cout << "Connected event\n"; }
}

class Foo : public QObject {

private:

    FooAPI *client;

public:

    Foo(FooEvents *ev, QObject *parent = 0) : client(new FooApi(ev)) { .. }

private slots:
    void processMessages() {

        if (state is IDLE)              

            reqFooAPiServerTime();

        select(client->fd()+1, ...);

        if (socket is ready for read)

            client.onReceive();

    }
public:
    void connect(...) {

        if (connection) {

            QObject::connect(&timer, SIGNAL(timeout()), this, SLOT(processMessages()));
            timer.start(1000);  // I don't get the output from FooEvents

        }

    }

} 
```

这是一个非常简单的问题，但我认为它说明了我的情况。为什么这不起作用以及我必须处理这种情况的其他替代方法？谢谢.s

编辑： processMessages 每秒被调用一次，但我没有从事件中得到任何输出

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T19:43:38.733

在哪里`timer`声明和定义？

如果它是本地的，`Foo::connect()`它将在它有机会开火之前被摧毁。大概它只需要成为`Foo`该类的成员对象。

还要记住，`QObject`它为定时器提供了自己的简单接口——只需覆盖受保护的虚`timerEvent()`函数并调用 QObject `startTimer()`来开始获取这些定时器事件。在这种情况下，它们不会有一个插槽来接收计时器事件，而是会在被覆盖的`timerEvent()`函数处结束：

```
protected:
    void timerEvent(QTimerEvent *event) {
        processMessages();
    }

public:
    void connect( /* ... */ ) {

            // ... 

            startTimer(1000);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T07:15:32.943

您既不声明计时器也不声明插槽。在标题中，您必须声明：

```
class ... {

  QTimer timer;
  ...
private slots:
  void processMessages();
  ...
}; 
```

然后记得建立SIGNAL-SLOT连接并配置定时器：

```
connect(&timer, SIGNAL(timeout()), this, SLOT(processMessages()));
timer.setInterval(1000);
timer.start(); 
```

也`timer.start(1000);`将是有效的...

**另一种可能性**

其他可能性是使用与每个 Q_OBJECT 关联的计时器并重载`timerEvent`：

```
class ... {
  Q_OBJECT
  ...
protected:
  void timerEvent(QTimerEvent *event);
  ...
}; 
```

然后你必须像这样实现定时器事件：

```
void MyClass::timerEvent(QTimerEvent *event) {
  processMessages();
} 
```

您可以通过一个简单的调用来配置计时器`startTimer(1000);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T18:25:13.357

这不起作用，因为 processMessages() 不是`SLOT`.

```
 So Declare processMessages() as a private slot and then try. 
```

# mysql - 非标准sql查询

> ID：10667692
> 
> 赞同：2
> 
> 时间：2012-05-19T18:11:05.747
> 
> 标签：mysql, sql, select

我需要从`exemplar`当前未订购（预订）的表中选择具有已定义 idBook 的项目- **“订单”**表中的 dateReturn 字段不为空。

表格`orders`可以包含以前履行的具有相同 idExemplar 的订单！

如果 exemplar**在“orders”表中至少有一条 dateReturned=null 记录，**则应排除此示例！

### 我试过使用这个查询：

```
select * 
from exemplar 
join orders on orders.idExemplar=exemplar.idExemplar
where dateReturned is not null 
```

但如果表订单包含先前已履行的具有相同 idExemplar 的订单，则会给出错误的结果

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T18:20:08.967

如果我正确理解了这个问题，这应该可以解决问题：

```
select * 
from exemplar 
where not exists 
  ( select * 
    from orders 
    where orders.idExemplar=exemplar.idExemplar 
    and dateReturned is null ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T18:37:13.413

类似于[@vizier 的回答](https://stackoverflow.com/a/10667766/297408)，但表达方式不同：

1）使用`NOT IN`：

```
SELECT *
FROM exemplar
WHERE idExemplar NOT IN (SELECT idExemplar FROM orders WHERE dateReturned IS NULL) 
```

2）使用`LEFT JOIN`+ `WHERE IS NULL`：

```
SELECT e.*
FROM exemplar e
LEFT JOIN ON orders o ON e.idExemplar = o.idExemplar AND o.dateReturned IS NULL
WHERE o.idExemplar IS NULL 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T18:17:47.870

了解外连接的理想时间：http: [//www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)是我最喜欢的示例之一

```
SELECT * 
FROM exemplar 
LEFT JOIN orders 
  on orders.idExemplar=exemplar.idExemplar 
WHERE dateReturned is null 
```

对双重不感到困惑......但既然你说过，“如果示例在“订单”表中至少有一条记录，并且 dateReturned=null 那么这个示例应该被排除在外！” 我想你想要 dateReturned IS NULL

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-19T18:26:15.190

这将返回一个示例列表，其中包含空订单 dateReturned 订单，其中 idExemplar 在订单中只有一行

```
SELECT e.* 
FROM exemplar e 
INNER JOIN orders o
ON e.idExemplar = o.idExemplar
WHERE 
o.idExemplar IN ( 
    SELECT o.idExemplar FROM orders o 
    GROUP BY o.idExemplar 
    HAVING COUNT(o.idExemplar) = 1
) AND o.dateReturned IS NULL 
```

这在子句中使用子查询`where`来检查当前订单 idExemplars 是否在唯一 idExemplars 集合中。它通过计算每个 idExemplar 的实例并丢弃任何出现多次的实例来做到这一点。

# windows-phone-7 - Windows Phone 7 - ListBox 和 Stackpanel 大小

> ID：10667703
> 
> 赞同：0
> 
> 时间：2012-05-19T18:12:29.190
> 
> 标签：windows-phone-7, xaml, stackpanel

我对 ListBox 及其元素有一点问题。正如您在我的代码中看到的那样，两个文本块的堆栈面板都设置为 250。这样设置是因为否则文本会在 1 行中展开并且您看不到按钮。显而易见的问题是，将此参数设置为静态，如果分辨率或方向更改不会完全适合屏幕。我想知道是否有办法动态设置这个宽度。

```
<ListBox x:Name="attractionsListbox" Margin="0,0,-12,0" ItemsSource="{Binding Attractions}" Loaded="attractionsListbox_Loaded">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal" Tag="{Binding Name}" Tap="AttractionListBoxItem_Tap">
                <Image Height="140" Width="140" Margin="0,5,0,0" Source="{Binding Thumbnail}" MaxWidth="140" MaxHeight="140" Stretch="Fill" />
                <StackPanel Width="250">
                    <TextBlock x:Name="AttractionName" Text="{Binding Name}" TextWrapping="Wrap" Style="{StaticResource PhoneTextSmallStyle}" FontSize="20" Foreground="Black" FontWeight="Bold" />
                    <TextBlock Text="{Binding ShortDescription}" TextWrapping="Wrap" Margin="12,-6,12,0" Style="{StaticResource PhoneTextSmallStyle }" Foreground="Black" />
                </StackPanel>
                <Button Width="80" Height="80" Padding="10,3,10,5" BorderBrush="Black" Click="Add_Todo_Click" Tag="{Binding Name}">
                    <Button.Background>
                        <ImageBrush ImageSource="/SundsvallWP7;component/Images/appbar.add.rest.png"/>
                    </Button.Background>
                </Button>
            </StackPanel>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

（android中有权重，可以给每个控件分配权重，不知道Windows Phone有没有这个）。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T18:33:43.917

DockPanel 可能比 StackPanel 更适合您的方案。把按钮放在右边，把图片放在左边，那么你中间的 StackPanel 内容就会流动填充。

[http://www.windowsphonegeek.com/articles/Using-DockPanel-in-WP7](http://www.windowsphonegeek.com/articles/Using-DockPanel-in-WP7)。

或者，只有两个方向，分辨率不应该改变。您可以使用值转换器将宽度绑定到方向。

# assembly - ".=" 在 GAS 中是什么意思

> ID：10667709
> 
> 赞同：1
> 
> 时间：2012-05-19T18:13:18.127
> 
> 标签：assembly, syntax, gnu, symbols, gnu-assembler

我正在检查 GNU GRUB 源代码，在`/grub-core/boot/i386/pc/*.S`文件中，有很多`.=`标记。这是`/grub-core/boot/i386/pc/boot.S`文件中的一个（第 409-414 行）：

```
 /*
     *  Windows NT breaks compatibility by embedding a magic
     *  number here.
     */

    . = _start + GRUB_BOOT_MACHINE_WINDOWS_NT_MAGIC 
```

我想知道的是什么`.=`意思。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T18:18:48.063

在 GAS 中，也许在其他汇编器中，特殊符号`.`指的是汇编器将汇编到的当前地址。诸如上面的语句控制以下代码的字节将在何处组装。

`.`操作员的文档在[这里](http://sourceware.org/binutils/docs/as/Dot.html#Dot)。

# objective-c - 在几个 NSView 之间交替

> ID：10667712
> 
> 赞同：1
> 
> 时间：2012-05-19T18:13:30.943
> 
> 标签：objective-c, cocoa, xib, nsview

我需要的可能是非常基本的，但我绝对不确定如何进行（我以前做过，但我的选择似乎都不适合 Cocoa）。

好的，假设我们有 2`NSView`秒 - 一个挨着另一个：

*   左边的一个用作菜单。
*   右边的会根据菜单上的选择显示一个 NSView（可能来自不同的 XIB？）。

![图形用户界面大纲](../Images/4c38fa9a2a913e8a4c20a52e7454888e.png)

**我的问题：**

*   我应该如何将不同`NSView`的 s 加载到最右边的 NSView 中？
*   如何确保在调整窗口大小时正确调整子视图（当前活动的那个）的大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T19:47:18.520

rdelmar 的解决方案应该可以工作，但另一种可能更简单的方法是使用 NSTabView 来处理内容视图之间的切换。您可以使用界面生成器中的设置窗格或调用来隐藏 NSTabView 的选项卡`[self.tabView setTabViewType:NSNoTabsNoBorder]`。我可能会在左侧使用表格视图。当用户选择一行时，您执行以下操作：

```
-(void)tableViewSelectionDidChange:(NSNotification *)notification
{
    [self.tabView selectTabViewItemAtIndex:[self.menuTableView selectedRow]];
} 
```

只要您正确设置了 NSTabView 及其内容视图的自动调整大小掩码（弹簧和支柱），NSTabView 就可以/将负责正确调整其内容视图的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T19:21:19.420

您应该能够在 IB 中创建一个看起来像黄色视图的自定义视图，并将其调整大小行为设置为通过窗口调整大小在两个方向上扩展。然后，当您获得新视图时（仅通过引用已有的视图或加载新的 xib），将其添加为自定义视图的子视图，并将其框架设置为自定义视图的框架。我认为默认情况下视图会调整其子视图的大小，因此它应该使用自定义视图正确调整大小。

# python - Webscraper 不会迭代

> ID：10667715
> 
> 赞同：0
> 
> 时间：2012-05-19T18:14:13.953
> 
> 标签：python, web-scraping, beautifulsoup

这段代码：

```
from bs4 import BeautifulSoup
from urllib2 import urlopen

f = urlopen("http://www.groupon.co.uk/").read()

bs = BeautifulSoup(f)

for tag in bs.find_all('ul', {'id': 'jCitiesSelectBox'}):
    print tag.li['onclick'] 
```

只打印出第一个标签，不打印出 jCitiesSelectBox 中的所有标签，我不明白为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T10:06:58.293

```
#!/usr/bin/python
# -*- coding: utf-8 -*-
from bs4 import BeautifulSoup
from urllib2 import urlopen

f = urlopen("http://www.groupon.co.uk/").read()

bs = BeautifulSoup(f)

f = urlopen("http://www.groupon.co.uk/").read()

bs = soup(f)

tags = bs.findAll('ul', attrs={'id' : 'jCitiesSelectBox'})
for tag in tags:
    lip = tag.findAll('li')
    for li in lip:
        print li['onclick'] 
```

经过测试，对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T18:20:56.900

你可能有向后的选择器。每个文档只允许一个标签具有特定的`id`. 您指定的是“`id="jCitiesSelectBox`仅在标签中查找带有 的`<ul>`标签”。

编辑：

您可能想要的是使用 找到`<li>`标签内的所有标签`id="jCitiesSelectBox"`，例如：

```
cities_list = bs.find('ul', {'id': 'jCitiesSelectBox'})
for tag in cities_list.find_all('li'):
    print tag['onclick'] 
```

（未测试）

# android - Android：获取所有发送的短信？（发件箱）

> ID：10667718
> 
> 赞同：5
> 
> 时间：2012-05-19T18:14:28.723
> 
> 标签：android, get, sms, inbox

我正在编写一个应用程序来备份所有短信。一直在研究它，我刚刚意识到我用来检索短信的方法只能得到我得到的那些（收件箱）。

是否有可能以任何方式获得发件箱？

如果它不在 Android API 中，是否有可能以某种方式从默认的 SMS 应用程序中获取它？即使不是每个人都使用它，它现在也可以工作，这有点紧急。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-19T18:20:04.267

获取您需要阅读的已发送消息`sent-directory`

使用这个 Uri 查询

```
Uri.parse("content://sms/sent"); 
```

# python - Python Google App Engine 中的密码重置令牌

> ID：10667723
> 
> 赞同：1
> 
> 时间：2012-05-19T18:14:52.957
> 
> 标签：python, google-app-engine

我想为使用 Google App Engine 的用户模型生成密码重置令牌。显然，我们不允许在 GAE 中轻松使用 Django，因此 Django 生成令牌的方法的原始代码是：

```
def _make_token_with_timestamp(self, user, timestamp):
    # timestamp is number of days since 2001-1-1\.  Converted to
    # base 36, this gives us a 3 digit string until about 2121
    ts_b36 = int_to_base36(timestamp)

    # By hashing on the internal state of the user and using state
    # that is sure to change (the password salt will change as soon as
    # the password is set, at least for current Django auth, and
    # last_login will also change), we produce a hash that will be
    # invalid as soon as it is used.
    # We limit the hash to 20 chars to keep URL short
    key_salt = "django.contrib.auth.tokens.PasswordResetTokenGenerator"

    # Ensure results are consistent across DB backends
    login_timestamp = user.last_login.replace(microsecond=0, tzinfo=None)

    value = (unicode(user.id) + user.password +
            unicode(login_timestamp) + unicode(timestamp))
    hash = salted_hmac(key_salt, value).hexdigest()[::2]
    return "%s-%s" % (ts_b36, hash) 
```

Python 不是我的专业语言，因此我需要一些帮助来编写类似于上述方法的自定义方法。我只有几个问题。首先，时间戳的目的是什么？Django 有自己的用户系统，而我使用的是我自己的简单自定义用户模型。我需要保留上述代码的哪些方面，我可以取消哪些方面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T19:35:43.020

好吧，[`check_token`](https://code.djangoproject.com/svn/django/trunk/django/contrib/auth/tokens.py)- 方法看起来像这样：

```
def check_token(self, user, token):
    """
    Check that a password reset token is correct for a given user.
    """
    # Parse the token
    try:
        ts_b36, hash = token.split("-")
    except ValueError:
        return False

    try:
        ts = base36_to_int(ts_b36)
    except ValueError:
        return False

    # Check that the timestamp/uid has not been tampered with
    if not constant_time_compare(self._make_token_with_timestamp(user, ts), token):
        return False

    # Check the timestamp is within limit
    if (self._num_days(self._today()) - ts) > settings.PASSWORD_RESET_TIMEOUT_DAYS:
        return False

    return True 
```

*   首先将令牌的时间戳部分转换回整数
*   然后使用该时间戳生成一个新令牌并与旧令牌进行比较。
    请注意，在生成令牌时，上次登录的时间戳是用于计算哈希的参数之一。这意味着在用户登录后，旧令牌将变得无效，这对于密码重置令牌是有意义的。
*   最后执行检查以查看令牌是否已经超时。

这是一个相当简单的过程，也相当安全。如果您想使用重置系统闯入帐户，则必须知道用户的密码和上次登录时间戳才能计算哈希。如果你知道那不需要闯入帐户...

因此，如果您想制作这样的系统，重要的是在生成 hast 时使用不易猜测的参数，当然还要使用良好的加盐哈希函数。Django[使用 sha1](https://code.djangoproject.com/svn/django/trunk/django/utils/crypto.py)`hashlib` ，当然可以很容易地使用其他摘要。

另一种方法是生成一个随机密码重置令牌并将其存储在数据库中，但这可能会浪费大量空间，因为令牌列对于大多数用户来说可能是空的。

# javascript - ASP.NET 中的 JavaScript 错误

> ID：10667724
> 
> 赞同：0
> 
> 时间：2012-05-19T18:14:53.793
> 
> 标签：javascript, asp.net, visual-studio-2010

我在我的 ASP.NET 网站中使用 Spry.Widget.Accordion (Dreamweaver CS5)，当我使用 ASP.NET 表单身份验证时，我收到此错误：

```
<script type="text/javascript">
    var Accordion1 = new Spry.Widget.Accordion("Accordion1");
</script> 
```

> 错误：Microsoft JScript 运行时错误：“Spry”未定义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T18:16:42.760

听起来您不包括 spry 库。你确定你这样做了吗？

# java - Java-如何用字符串调用类？

> ID：10667728
> 
> 赞同：0
> 
> 时间：2012-05-19T18:15:29.403
> 
> 标签：java, string, class, bluej

我是一个初学者程序员，这是我在这个论坛上的第一个问题。

我正在使用 BlueJ 作为编译器编写一个简单的文本冒险游戏，并且我在 Mac 上。我遇到的问题是我想让我的代码更加自动化，但是我不能用字符串调用一个类。我想调用该类而不将其全部包含在 if 函数中的原因是我可以合并更多方法。

以下是它当前的运行方式：

```
public class textadventure {
public method(String room){
if(room==street){street.enterRoom();}
}
}
public class street{
public enterRoom(){
//do stuff and call other methods
}
} 
```

if 语句测试我创建的每个班级/房间。我希望代码做的是自动将字符串房间变成可以调用的类名。所以它可能会像这样：

```
Public method(string room){
Class Room = room;
Room.enterRoom();
} 
```

我已经研究过使用 Class.forName，但是所有的例子都太笼统了，我无法理解如何使用这个函数。任何帮助将不胜感激，如果有任何其他必要的信息（例如更多示例代码），我很乐意提供。

-塞巴斯蒂安

这是完整的代码：

```
import java.awt.*;
import javax.swing.*;

public class Player extends JApplet{
public String textOnScreen;

public void start(){
room("street1");
}

public void room(String room){
    if(room=="street1"){
    textOnScreen=street1.enterRoom();
    repaint();
    }
    if(room=="street2"){
    textOnScreen=street2.enterRoom();
    repaint();
    }
}
public void paint(Graphics g){
    g.drawString(textOnScreen,5,15);
}
}

public abstract class street1
{
private static String textToScreen;
public static String enterRoom(){
    textToScreen = "You are on a street running from North to South.";
    return textToScreen;
}
}

public abstract class street2
{
private static String textToScreen;
public static String enterRoom(){
    textToScreen = "You are on another street.";
    return textToScreen;
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T18:49:37.177

鉴于您对编程相当陌生，我建议您从一些比成熟的冒险游戏更简单的程序开始。您还没有完全掌握 Java 语法的一些基础知识。以 HelloWorld 程序为例：

```
public class HelloWorld {
  public static void main(String[] args) {
    String output = "Hello World!"
    System.out.println(output);
  }   
} 
```

注意`public`是小写的。 `Public`跟大写`P`不一样`public`。

另请注意，`String`该类有一个大写`S`字母。* 同样，大写很重要，因此`string`与.* 不同`String`。

另外，请注意，我不必使用`String string = new String("string")`. 您可以使用`String string = "string"`. 这种语法运行得更快，更容易阅读。

在测试字符串相等性时，您需要使用`String.equals`而不是`==`. 这是因为`a == b`检查对象是否相等（即`a`并`b`占据内存中的相同位置）并`stringOne.equals(stringTwo)`检查是否`stringOne`有相同的字符以相同的顺序排列，`stringTwo`而不管它们在内存中的位置。

现在，至于您的问题，我建议使用 an`Enum`或 a`Map`来跟踪要使用的对象。

例如：

```
public class Tester {

  public enum Location {

    ROOM_A("Room A", "You are going into Room A"),
    ROOM_B("Room B", "You are going into Room B"),
    OUTSIDE("Outside", "You are going outside");
    private final String name;
    private final String actionText;

    private Location(String name, String actionText) {
      this.name = name;
      this.actionText = actionText;
    }

    public String getActionText() {
      return this.actionText;
    }   

    public String getName() {
      return this.name;
    }   

    public static Location findByName(String name) {
      name = name.toUpperCase().replaceAll("\\s+", "_");
      try {
        return Enum.valueOf(Location.class, name);
      } catch (IllegalArgumentException e) {
        return null;
      }   
    }   
  }

  private Location currentLocation;

  public void changeLocation(String locationName) {
    Location location = Location.findByName(locationName);
    if (location == null) {
      System.out.println("Unknown room: " + locationName);
    } else if (currentLocation != null && currentLocation.equals(location)) {
      System.out.println("Already in room " + location.getName());
    } else {
      System.out.println(location.getActionText());
      currentLocation = location;
    }
  }

  public static void main(String[] args) {
    Tester tester = new Tester();
    tester.changeLocation("room a");
    tester.changeLocation("room b");
    tester.changeLocation("room c");
    tester.changeLocation("room b");
    tester.changeLocation("outside");
  }
} 
```

* * *

*这是格式化 Java 代码的标准方式。类名是`PascalCased`，而变量名是`camelCased`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T23:55:22.283

在 Java 中，许多类都有属性，您可以而且经常会拥有来自同一个类的多个实例。

您将如何识别哪个是哪个名称？

例如

```
class Room {
    List<Monster> monsters = new ArrayList <Monster> ();
    public Room (int monstercount) {
         for (int i = 0; i < monstercount; ++i)
            monsters.add (new Monster ());
    }
    // ...
} 
```

怪物可以有属性，如果其中一个已经死了，如果你不处理字符串中的所有内容，你可以更容易地识别它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T18:21:33.447

```
String className=getClassName();//Get class name from user here
String fnName=getMethodName();//Get function name from user here

Class params[] = {};
Object paramsObj[] = {};

Class thisClass = Class.forName(className);// get the Class

Object inst = thisClass.newInstance();// get an instance
// get the method
Method fn = thisClass.getDeclaredMethod(fnName, params);
// call the method
fn.invoke(inst, paramsObj); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T18:22:42.083

您问题下方的评论是正确的-您的代码非常粗糙。

无论如何，如果您有类似的方法

```
public void doSomething(String str) {
  if (str.equals("whatever")) {
    // do something
  }
} 
```

然后像这样称呼它

```
doSomething("whatever"); 
```

# google-app-engine - GAE 数据存储一致性（开发模式）？

> ID：10667729
> 
> 赞同：0
> 
> 时间：2012-05-19T18:15:33.637
> 
> 标签：google-app-engine, datastore

我的 GWT/J 应用程序在 GAE 上完美运行，写入高度一致，但在开发模式下运行时，写入只是最终一致，可能需要 15 秒才能出现。这造成了一些测试困难。

这可能是因为我的开发硬件适中吗？（它试图提供强一致性，但两个核心不足以运行数据存储区和 Web 服务器。）或者是否有一个设置可以让我“立即”写入？

或者这是否按预期工作，我需要实施实体组以保证各处的一致性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T20:35:48.360

是的，您需要实施实体组以保证各处的一致性。

如果你对最终的一致性没问题，你可以在你的测试中强制保证一致性。但请注意，这不能代表现实世界。

[https://developers.google.com/appengine/docs/java/tools/localunittesting#Writing_HRD_Datastore_Tests](https://developers.google.com/appengine/docs/java/tools/localunittesting#Writing_HRD_Datastore_Tests)

# jquery - JQuery Focus - 有输入？

> ID：10667730
> 
> 赞同：1
> 
> 时间：2012-05-19T18:15:39.310
> 
> 标签：jquery, input, focus

据我了解，焦点事件必须与输入框之类的东西一起使用，但这似乎对我不起作用。我有以下小提琴......当有人专注于文本框时，我试图让“指南”div出现。我不确定部分问题是否是我使用“兄弟姐妹”以及输入框是否需要唯一 ID？但我把唯一标识符作为父级，然后引用兄弟级......

[http://jsfiddle.net/jhacks/2jjZF/2/](http://jsfiddle.net/jhacks/2jjZF/2/)

你会看到我确实有一些额外的代码用于“错误”和“好的”消息。我正在努力让 JQuery 事件与 Twitter 注册页面之类的内容相匹配，如果有人可以阻止 https://twiter.com/signup，那是另一篇文章。

任何和所有的帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T18:19:44.733

你是对的，兄弟姐妹是错误的选择器。Siblings 指的是具有相同父元素的其他元素，您的输入字段没有这些元素。

因为您使用的是 ID 选择器，并且 ID 是唯一的定义，所以无需遍历。

```
$('input#registerBox').focus(
    function() {
        $('#registerGuideName').show();
    }
); 
```

​您已经在使用 jquery 对象，`$(this)`为什么不直接选择该 ID？

如果您的脚本需要遍历，因为您的文档中有多个，您需要使用类或数据属性而不是 ID 选择器。适当的遍历意味着找到一个共同的父母，然后找到合适的孩子。

[http://api.jquery.com/category/traversing/](http://api.jquery.com/category/traversing/)

```
$('input.registerBox').focus(
    function() {
        $(this).closest('.registerName').find('.registerGuideName').show();
    }
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T18:26:10.220

```
$('input#registerBox').focus(
    function() {
     $(this)
       .closest('#registerBoxName') // go to parent div#registerBoxName
       .next('.registerGuidance')   // move to next div.registerGuidance
       .find('#registerGuideName')  // finding target #registerGuideName within div.registerGuidance
       .show(); // make display
   }
}); 
```

# java - Java 文件 - 打开一个文件并写入它

> ID：10667734
> 
> 赞同：19
> 
> 时间：2012-05-19T18:16:07.700
> 
> 标签：java, file

我知道我们应该在我们的问题中添加一段代码，但我真的傻眼了，无法理解或找到任何可以遵循的示例。

基本上我想打开文件**C:\A.txt**，其中已经有内容，并在最后写一个字符串。基本上是这样的。

文件 A.txt 包含：

```
John
Bob
Larry 
```

我想打开它并在最后写 Sue，所以文件现在包含：

```
John
Bob
Larry
Sue 
```

抱歉没有代码示例，今天早上我的大脑死了....

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-05-19T18:32:34.820

请搜索拉里佩奇和谢尔盖布林为世界提供的[谷歌。](http://www.google.com)

```
BufferedWriter out = null;

try {
    FileWriter fstream = new FileWriter("out.txt", true); //true tells to append data.
    out = new BufferedWriter(fstream);
    out.write("\nsue");
}

catch (IOException e) {
    System.err.println("Error: " + e.getMessage());
}

finally {
    if(out != null) {
        out.close();
    }
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-19T18:22:39.463

建议：

*   创建一个引用磁盘上现有文件的[File对象。](http://docs.oracle.com/javase/7/docs/api/java/io/File.html)
*   使用[FileWriter](http://docs.oracle.com/javase/7/docs/api/java/io/FileWriter.html)对象，并使用接受 File 对象和布尔值的构造函数，后者如果`true`存在则允许将文本附加到 File 中。
*   然后初始化一个[PrintWriter](http://docs.oracle.com/javase/7/docs/api/java/io/PrintWriter.html)，将 FileWriter 传递到它的构造函数中。
*   然后调用`println(...)`您的 PrintWriter，将新文本写入文件。
*   与往常一样，在完成后关闭您的资源（PrintWriter）。
*   与往常一样，不要忽略异常，而是要捕获并处理它们。
*   PrintWriter的`close()`应该在 try 的 finally 块中。

例如，

```
 PrintWriter pw = null;

  try {
     File file = new File("fubars.txt");
     FileWriter fw = new FileWriter(file, true);
     pw = new PrintWriter(fw);
     pw.println("Fubars rule!");
  } catch (IOException e) {
     e.printStackTrace();
  } finally {
     if (pw != null) {
        pw.close();
     }
  } 
```

容易，不是吗？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-19T18:27:44.090

要扩展鳗鱼先生的评论，您可以这样做：

```
 File file = new File("C:\\A.txt");
    FileWriter writer;
    try {
        writer = new FileWriter(file, true);
        PrintWriter printer = new PrintWriter(writer);
        printer.append("Sue");
        printer.close();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

别说我们对你不好！

# android - 我在哪里可以找到适用于 Android 的移动网络应用程序的 CSS 主题？

> ID：10667737
> 
> 赞同：2
> 
> 时间：2012-05-19T18:16:15.403
> 
> 标签：android, css, android-layout, cordova, trigger.io

我正在为 Android 开发一个网络移动应用程序，我很乐意使用像[这样](http://developer.android.com/design/patterns/multi-pane-layouts.html)的原生主题。

Android Play 不提供该主题的 CSS，您知道我在哪里可以找到它（或类似的东西）吗？

编辑：我刚刚发现[了这个](https://dl-ssl.google.com/android/design/Android_Design_Fireworks_Stencil_20120229.png)png：![https://dl-ssl.google.com/android/design/Android_Design_Fireworks_Stencil_20120229.png](../Images/16e925d5c14767e6bc5a0b855eaf3ec6.png) 有人创建了这个的 CSS 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T20:35:02.127

在为 Trigger.io Forge 等混合框架寻找好的主题时，最好寻找适合移动设备的 HTML/CSS 骨架。该应用程序本身只是一个小网页，因此最适合协助移动网站的项目。

根据您想要工作的级别，您可以查看 Sencha Touch（我们在[这里](https://github.com/trigger-corp/forge-template-sencha-touch)有一个使用 Trigger 构建的演示应用程序）、[HTML5 Mobile Boilerplate](http://html5boilerplate.com/mobile)和[320 及更高](http://stuffandnonsense.co.uk/projects/320andup/)版本；从重到轻。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T08:37:28.287

我一直在寻找这样的 css 主题，就我的搜索而言，我做了一个小清单。

1.  KendoUI Mobile -（我认为这是最好的 android 主题）。
2.  DojoMobile - 相当不错的 android 主题。
3.  QooxDoo Mobile - 不错的 android 主题。

我认为最接近你想要的主题是 KendoUI Mobile android 主题。关于它的一件事是它是付费的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T17:09:04.490

这是 qooxdoo 的 qx.Mobile 的移动展示：

[http://demo.qooxdoo.org/devel/mobileshowcase-android/index.html#%2F](http://demo.qooxdoo.org/devel/mobileshowcase-android/index.html#%2F)

如您所见，它现在甚至支持平板设备。主题可以通过 LESS/CSS 轻松更改。但是很多 Android 应用程序甚至没有原生的 Android 外观。模拟原生外观很困难，因为应用程序只能具有 android 版本（2.x、3.x 或 4.x）的一种外观。所以，我不会尝试复制它，因为你不知道 Android 5.X 及更高版本会是什么样子。

# ios - 在 iOS 中进行复制拟合的最佳方法？

> ID：10667739
> 
> 赞同：0
> 
> 时间：2012-05-19T18:16:35.267
> 
> 标签：ios, text, quartz-graphics, core-text

有没有人有一个很好的 iOS 复制程序？我基本上想绘制适合矩形内的最大文本。我之前在 Carbon 中所做的方法是以大字体创建文本，然后不断减小大小，直到文本完全适合框。在 Carbon 中，有一种方法可以让我判断文本溢出了矩形。我查看了 CoreText 定义和 UITextView 定义，但没有找到这些信息的位置。我即将浏览 Quartz，但我担心我可能必须编写自己的布局例程。我希望有人可以为我节省一些时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T18:20:55.453

有一种方法可以与您之前提到的方法相反 - 您可以确定包含特定字体文本所需的矩形大小，而不是确定可以容纳在矩形中的最大文本尺寸：

```
[@"Your Text Here" sizeWithFont:[UIFont fontWithName:@"Arial" size:34]]; 
```

似乎您可以执行您提到的相同算法，但反过来，增加字体大小直到它是可以适合您的矩形而不会溢出的最大大小。

完全有可能有更好的方法来做到这一点，但我不明白为什么这种方法不起作用:)

# html - 显示包裹在 p 内的链接到新行？

> ID：10667740
> 
> 赞同：1
> 
> 时间：2012-05-19T18:16:39.447
> 
> 标签：html, css

我在 wordpress 博客索引页面上有一个阅读更多内容的链接。它作为给定的参考代码插入到 < p > 标记内。

```
<p>Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
  <a class="more-link local-link" href="http://example.com/">
     <span>Read <span class="red">More</span></span>
  </a>
</p> 
```

现在我想设置链接的样式，使其像这样出现在第二行中......

* * *

这里的段落文本...assages，最近还使用了 Aldus PageMaker 等桌面出版软件，包括 Lorem Ipsum 的版本。

阅读更多

* * *

我不太清楚应该应用什么风格。我尝试了几种可能的样式，但它们似乎都不能正常工作。如果我将样式 display:block 应用于链接，那么它会进入第二行，但是整个区域都变得可点击，因为您知道它的块占用了整行空间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T18:21:38.040

`display:table`将收缩包装到内容，同时强制自己进入一个新的空行：

```
a {
    display: table;  /* beware older IEs! */
    margin-top: 1em; /* area above the link won't be clickable */
} 
```

​ 一些样式的例子：http: [//jsfiddle.net/SNUpD/6/](http://jsfiddle.net/SNUpD/6/)

较旧的 Internet Explorer 可能需要一些替代解决方案，使用可能`zoom:1`+`display:inline`或类似的东西。

我无法做出更好的 IE 解决方案，不幸的是它包含`Read more`两行：http: [//jsfiddle.net/SNUpD/9/](http://jsfiddle.net/SNUpD/9/)

```
*display: inline;
*zoom: 1;
*margin: 2em 100em 2em 2em; /* force line breaks with insane right margins */ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T18:20:42.090

设置`display: block`使用`a`：

```
a {
    display: block;
} ​ 
```

看这个[例子](http://jsfiddle.net/jackdent/SNUpD/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T18:24:08.107

```
p a.more-link{
    display: block;
} 
```

# sql - Oracle：选择子查询和位置

> ID：10667742
> 
> 赞同：0
> 
> 时间：2012-05-19T18:17:10.287
> 
> 标签：sql, oracle, subquery

我是 SQL 和数据库设计的新手，并试图解决以下问题。

我有一个名为猫的表，PKs (cat_id) 是 C1、C2、C3 等和另一个带有猫名的属性（加上多个其他属性）。

我有一个名为 dogs 的表，PKs (dog_id) 是 D1、D2、D3 等，另一个带有狗名的属性（加上多个其他属性）。

然后我有一个名为动物的表，PK 1、2、3、4、5、6 等，其属性为 Cat_Dog_ID（C1、C2、C3、D1、D2、D3 等）。

然后我想做的是一个选择语句，它将带回猫和狗的名字，例如。

```
An_Id - Cat_Dog_ID - 名称
1 - C1 - 亨利
2 - C2 - 晶须
3 - C3 - 灰色
4 - D1 - 参差不齐
5 - D2 - 汪
6 - D3 - 最大

```

分开做很容易：

```
SELECT a.an_id, a.cat_dog_id, c.cat_name 
FROM animal a, cat c
WHERE a.cat_dog_id = c.cat_id;

SELECT a.an_id, a.cat_dog_id, d.dog_name 
FROM animal a, dog d
WHERE a.cat_dog_id = d.dog_id; 
```

我已经尝试了很多方法将它们组合在一起，并且很确定我需要使用子查询/嵌套查询，例如如下所示，但到目前为止还没有任何工作。

```
SELECT a.an_id, a.cat_dog_id, c.cat_name "Name"
FROM animal a, cat c
WHERE a.cat_dog_id = c.cat_id
AND (SELECT a.an_id, a.cat_dog_id, d.dog_name "Name"
FROM animal a, dog d
WHERE a.cat_dog_id = d.dog_id);

SELECT a.an_id, a.cat_dog_id FROM animal a
where a.cat_dog_id = c.cat_id in (select c.cat_name "Name" from cat c)
WHERE a.cat_dog_id = d.dog_id in (select d.dog_name "Name" from dog d); 
```

任何建议如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T18:25:10.207

不对您的设计发表评论；但要帮助解决这个特定问题：UNION 是您所追求的

```
SELECT a.an_id, a.cat_dog_id, c.cat_name 
FROM animal a, cat c
WHERE a.cat_dog_id = c.cat_id
UNION
SELECT a.an_id, a.cat_dog_id, d.dog_name 
FROM animal a, dog d
WHERE a.cat_dog_id = d.dog_id; 
```

现在我质疑该设计的原因是您可以将猫/狗抽象到一个名为动物的表中，并为“猫”和“狗”设置一个 typeID 字段，因为狗和猫具有相似的属性，您没有不同的表。这称为数据规范化。从最纯粹的意义上说，您永远不想复制相同的数据。但是，从性能的角度来看，有时值得复制。在不知道您的问题的背景的情况下，我不知道在这种情况下标准化是否明智；但很可能是。

----要解决设计问题，请考虑以下几点：

```
Animal
--------------------
AnimalID
TypeID
Name
Birthdate
Gender
...etc

Type
--------
TypeId
TypeName - Cat or Dog or (now scales to other types of animals if needed w/o redsign of table)

Attributes
-----------
AttributeID
Name 
DataType (Numeric, String, date, etc)

TypeAttributes
-------------
AttributeID
TypeID

AnimalsAttributes
---------------
AttributeID
AnimalID
Value 
```

现在您可以针对不同类型的动物进行缩放，拥有无限数量的属性并为添加的不同动物保留值；所有这些都无需更改数据库结构。如果您在模型下添加了新属性，则必须更改结构；并添加不好玩的新代码。但是，如果您预计模型不会发生任何变化；那么您的解决方案工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T18:30:47.800

做一件事。

使用查询1 UNION 查询2；

并为不同的列名提供别名（qoutes 中的名称）。

示例 Select cat_name "name", cat_id "id" from cat_table union select dog_name "name", dog_id "id" from dog_table;

还有更复杂的方法......但这应该对你有用......

# python - 如何在 Django 1.4 中存储一个简单的日期时间

> ID：10667743
> 
> 赞同：8
> 
> 时间：2012-05-19T18:17:20.193
> 
> 标签：python, django, pytz

我有一个简单的日期和时间，格式为“2012-05-19 19:13:00”，需要使用 Django 1.4 及其时区感知能力来存储它。

尽管无法知道日期最初位于哪个时区，但将其存储为 UTC 似乎是有意义的。

但是，使用 pytz 等，我不确定如何将没有时区的日期转换为 UTC 日期时间。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T18:39:49.483

如果它没有 tzinfo，那么当然不能转换为 UTC。相反，您可以将 datetime 对象设置为时区感知对象：

```
import datetime
from pytz import UTC

dt = datetime.datetime.now()  # just some date
tz_aware_dt = dt.replace(tzinfo=UTC) 
```

编辑：

django 1.4的[迁移指南](https://docs.djangoproject.com/en/dev/topics/i18n/timezones/#usage)使用它来完成上述操作：

```
>>> from django.utils.dateparse import parse_datetime
>>> naive = parse_datetime("2012-02-21 10:28:45")
>>> import pytz
>>> pytz.timezone("Europe/Helsinki").localize(naive)
datetime.datetime(2012, 2, 21, 10, 28, 45, tzinfo=<DstTzInfo 'Europe/Helsinki' EET+2:00:00 STD>) 
```

您可能应该使用该版本，将“UTC”替换为“Europe/Helsinki”。

# c# - 每个用户的连接

> ID：10667744
> 
> 赞同：0
> 
> 时间：2012-05-19T18:17:29.123
> 
> 标签：c#, asp.net, mysql

我正在使用下面的代码，我想要做的是在用户登录期间使用相同的连接。现在我对使用的理解是它处理连接，但我真正想做的是当用户登录时，创建一个连接并让他们使用该特定连接。

下面是我知道的用于在 C# 中设置连接的代码，我会将 [ThreadStatic] 属性应用于`public static MySqlConnection ATCrawlerConnection`，但是如何在 aspx 中完成类似的功能，基本上为每个用户创建一个连接，然后访问和限制该连接用户？

在 C# 中，我会使用这个：

```
MySQLProcessing.MySQLStatic.ATCrawlerConnection MySQLProcessing.MySQLStatic.OpenCon("10.2", 3306, "user", "pw");公共静态 MySqlConnection ATCrawlerConnection { 获取；放; }

公共静态 MySqlConnection OpenCon（字符串 ServerAddress，int PortAddress，字符串 UserID，字符串密码）
        {
            MySqlConnection masterOpenCON = new MySqlConnection("server=" + ServerAddress + ";Port=" + PortAddress + ";UID=" + UserID + ";PASSWORD=" + Password);// + ";connectiontimeout=" + ConnectionTimeOut + " ;");
            masterOpenCON.Open();
            返回masterOpenCON；
        }

 public static DataTable StoreProcedureDTTable(string mysqlQuery, string[] CommandArgs, string queryName)
    {
        lock (_object)
        {
            using (MySqlConnection cn = new MySqlConnection(applicationStringClass.AuthMySQLConnector))
            {

                DataTable DTTableTable = new DataTable();
                try
                {
                    MySqlCommand MySQLCommandFunc = new MySqlCommand(mysqlQuery);
                    MySQLCommandFunc.Connection = cn;
                    MySQLCommandFunc.CommandType = CommandType.StoredProcedure;
                    foreach (string args in CommandArgs)
                    {
                        string[] splitArgs = args.Split('|');
                        MySQLCommandFunc.Parameters.AddWithValue(splitArgs[0], splitArgs[1]);
                    }
                    MySqlDataAdapter DataDTTables = new MySqlDataAdapter(MySQLCommandFunc);
                    DataTable DataDTTablesDT = new DataTable();
                    DataDTTables.SelectCommand.CommandTimeout = 240000;
                    DataDTTables.Fill(DataDTTablesDT);
                    DTTableTable = DataDTTablesDT;

                }
                catch (Exception ex)
                {

                }
                return DTTableTable;
            }
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T19:35:06.853

根据构建它的人的定义，您无法通过破坏 ASP.NET（或任何其他相关技术）的使用方式来解决您的问题。如果您想为用户存储临时数据（您在原始帖子中没有提到），您可以使用其他策略，例如在您的数据库中使用物理表并使用 ASP.NET 的 On_SessionEnd 事件删除所有用户-related 数据，或将临时数据存储在 proc 内存中。
您实际上可以将您[的会话数据存储在 db](http://dev.mysql.com/doc/refman/5.5/en/connector-net-tutorials-asp-provider-session-state.html)中，并且我非常确信 mysql 和 sql server 都没有使用临时表，而是应用类似于我建议的技术的东西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T18:49:26.740

你应该

*   需要时创建连接，不使用时立即丢弃
*   为所有连接保持相同的连接字符串
*   不要在不同的线程上共享连接，否则如果 2 个线程同时使用连接会出错。你的静态方法不会有这个问题，因为你放了锁，但是如果服务器负载太重，很多时间会因为等待获取锁而松散。

.NET 已经优化为每次创建新连接时都不会打开连接，这称为“[连接池](http://aspalliance.com/1099_Understanding_Connection_Pooling_in_NET.all)”。您应该保留相同的连接字符串的原因是连接池使用它来“缓存”连接。因此，如果您更改连接字符串（即应用程序名称），它将创建一个新连接。

所以不要尝试做已经完成的事情，只需创建一个新连接并在完成一批查询后尽快处理它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T18:51:36.993

首先，一个警告：你绝对*不*应该做你所要求的；这是一个非常糟糕的主意，尤其是在应用于网站时。大多数数据库库使用连接池策略来减少资源使用，并且保持连接打开的时间超过需要的时间会搞砸。当没有明确的方法知道连接何时完成时，它也会让您容易泄漏资源。

如果你坚持，虽然...

每当您想在 ASP.NET 中为“给定用户”做某事时，您通常都在寻找会话状态跟踪。Session 对象可用于存储 ASP.NET 基于每个用户跟踪的任意信息。（此处的“用户”是指带有特定 cookie 的浏览器访问该网站。）

通过 Session 对象设置和存储每个用户的连接非常简单，如Microsoft的此[Session State Overview页面中所述。](http://msdn.microsoft.com/en-us/library/ms178581.aspx)

棘手的部分是知道何时关闭它。如果您的站点有一些明确定义的登录和退出策略，那么这是一个很好的可能性。但是您不能假设您的用户将始终访问该注销页面。会话状态存储在工作进程的内存中，IIS 将对其进行回收（主要是为了缓解这个确切的问题），但这是非常不确定的。这是不鼓励将开放资源存储在会话状态中的主要原因之一。

# haskell - 输入“=”解析错误

> ID：10667745
> 
> 赞同：0
> 
> 时间：2012-05-19T18:17:34.780
> 
> 标签：haskell

嗨，我在输入“=”中收到一个（第 7 行）解析错误，它只是对字符串中的单词求和，感谢您的帮助。谢谢。

```
module Main where

main = do
 putStr "Enter a string: "
 input <- getContents

 value = unwords . sum . words input
 putStrLn (value) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T18:27:19.580

该行：

```
value = unwords . sum . words input 
```

在语法上无效。你需要一个 let 声明。

```
let value = unwords . sum . words input 
```

这仍然无效，您想将您的功能（嗯，三个功能的组合）应用于输入：

```
let value = (unwords . sum . words) input 
```

也许：

```
let value = unwords . sum . words $ input 
```

这仍然无效，因为输入是 a`String`而结果是( )`words`的列表。因此，您需要将字符串读入某种类型（s？），然后转换回. 没用，因为最后只剩下一个词，即总和（与 unwords 需要的词列表相比）：`String``[String]``Num``Integer``String``unwords`

```
let value = show . sum . map read. words $ input 
```

根据类型，您可能希望对读取或总和进行注释以指定它是 an`Int`还是 a`Double`或其他内容。

# python - 将 Python 程序转换为 C shell 命令脚本

> ID：10667746
> 
> 赞同：-1
> 
> 时间：2012-05-19T18:17:37.933
> 
> 标签：python, unix

我写了一个 Python 程序说：

```
inp = raw_input("ENTER path ")
f = glob.iglob(os.path.join(path,'*.txt'))
for filename in f:
    if filename == 'xnak.txt': 
       print "this is a valid file"  
    else:  
       print 'not recognized'` 
```

现在我想让它成为一个带有 script-name 的 Unix C shell(csh) 命令`name`。

请帮帮我。我对Unix没有高水平的了解，欢迎基本和简单的想法。

只是我只想让这个 prog`x.py`像`cd`csh 中的命令一样命名。你知道，无论你在哪里键入`cd [dirname]`该`cd`函数都可以正常工作。我只需要像那样制作前卫。
因此，我不需要将程序/脚本从一个文件夹复制到另一个文件夹来分析文件夹的数据。

就像在我键入的文件夹中`x 11`（并按 Enter 键）然后程序开始执行并在执行 11 次搜索循环后停止。如果有人仍然不能正确理解这个问题，那么请要求理由而不是投反对票或错误回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T18:38:48.673

如果您希望您的 python 脚本可以在 unix 的 shell 中执行，您需要做两件事：

1.  添加一个[shebang](http://en.wikipedia.org/wiki/Shebang_%28Unix%29)行，说明它应该使用 python 运行。这应该是脚本的第一行，可能类似于：

    ```
    #!/usr/bin/python 
    ```

2.  使用 . 将文件标记为可执行文件`chmod`。您可以通过键入以下命令从命令行执行此操作：

    ```
    chmod +x test 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T18:34:00.397

只需创建一个别名，您可以将其用作 unix 命令：

假设你的 python 文件是`test.py`. 所以你也是：

```
$alias name="python test.py" 
```

现在，您可以`name`像执行命令一样执行 python 脚本`name`。

```
$name 
```

如果您想在每次使用登录时都完成这项工作，请提供 python 脚本的完整路径并保留在系统的某个位置并将该`alias`部分添加到您的`.profile`or`.bashrc`文件中。

# qt - 从 doxygen 的项目文档中排除 Qt 结构

> ID：10667747
> 
> 赞同：2
> 
> 时间：2012-05-19T18:17:39.790
> 
> 标签：qt, doxygen

我正在记录一个使用 doxygen 在 Qt 中构建的项目，我的问题是 Qt 中的类和结构（例如 QString）正在被记录。

我想从我的文档中排除所有 QString 类型，只保留我声明和实现的那些。

我知道这应该在 doxyfile 中以某种方式完成，但我不知道该怎么做。任何的想法？？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T18:50:05.217

使用 doxygen 排除属性：

[http://www.doxygen.nl/manual/faq.html](http://www.doxygen.nl/manual/faq.html)

# excel - 如果有多个否定标准，则求和

> ID：10667750
> 
> 赞同：1
> 
> 时间：2012-05-19T18:18:01.740
> 
> 标签：excel, ms-office

我知道这听起来很蹩脚，但我正在努力使用 Microsoft Excel 来使这个公式起作用。

如果符合两个标准，一正一负，我需要对数字求和。

积极的标准是可以的，但消极的必须是“如果单元格文本不是'ACTIVE'）。如何完成这个？

这是我到目前为止的公式（有两个积极的标准）：

```
=SUMIFS($M$8:$M$100819;$C$8:$C$100819;CONCATENATE(TEXT(D$1;"0");"*");$S$8:$S100819;"ACTIVE") 
```

我需要否定那个“活跃”，我不知道谷歌本身是如何帮助的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T19:38:11.937

另一个建议是添加`<>`到标准中，如：

```
=SUMIFS($M$8:$M$100819;$C$8:$C$100819;CONCATENATE(TEXT(D$1;"0");"*");$S$8:$S100819;"<>ACTIVE") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T18:29:22.003

只需使用：

```
<SUM_OF_ALL_ITEMS_WITH_FIRST_CRITERIA> - SUMIFS($M$8:$M$100819;$C$8:$C$100819;CONCATENATE(TEXT(D$1;"0");"*");$S$8:$S100819;"ACTIVE") 
```

# algorithm - 如何在平面图中找到最大流量？

> ID：10667751
> 
> 赞同：1
> 
> 时间：2012-05-19T18:18:10.693
> 
> 标签：algorithm, graph, flow, cut

我知道在平面图中找到最小切割的算法。

工作为 O(NlogN)

您创建一个对偶图，其中每个顶点对应于原始图形的分面，边对应于连接两个分面的最小边。

然后您使用 Dijkstra 在此图中找到最小路径。

通过这种方式，可以找到最小切割并计算流量值。

但是我怎样才能找到提供这个流量值的任何一组原始图边呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T19:44:14.513

您描述的算法仅适用于无向图（Reif 算法）。Hassin 和 Johnson 展示了如何通过它来计算最大流量。最近表明，这些算法可以在 O(n loglog n) 时间内实现。请参阅 GF Italiano、Y. Nussbaum、P. Sankowski 和 C. Wulff-Nilsen 改进无向平面图中最小切割和最大流量的算法。在过程中。第 43 届 ACM 计算理论研讨会 (STOC)，圣何塞，2011 年。

在有向平面图中，已知最快的算法在 O(n log n) 中运行，请参阅 [http://web.engr.oregonstate.edu/~glencora/papers/other/Borradaile08-thesis-dissertation.pdf](http://web.engr.oregonstate.edu/~glencora/papers/other/Borradaile08-thesis-dissertation.pdf)或 [http://compgeom。 cs.uiuc.edu/~jeffe/pubs/parshort.html](http://compgeom.cs.uiuc.edu/~jeffe/pubs/parshort.html)

# database - 存储路由数据

> ID：10667753
> 
> 赞同：0
> 
> 时间：2012-05-19T18:18:27.170
> 
> 标签：database, algorithm, path-finding

我有许多火车网络的时间表，其形式为 -

> 开始位置（时间）-> 停止 1（时间1）-> 停止 2（时间2）-> ...结束位置

即，每条路线/时间表都由一系列停靠点组成，这些停靠点发生在上升时间。这些路线每天重复多次。

最终我想在这些数据之上构建一个寻路算法。最初，这将从单个时间表/路线返回路径。但最终我希望能够计算出不止一条路线的最佳旅程。

因此，我的问题是，存储这些数据以使查询路线尽可能简单的最佳方式是什么？我想一个查询的格式是......

> 开始位置：x，结束位置：y，时间：t

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T18:46:26.850

如果你在进行寻路，很多寻路算法都会处理沿着最短路径段到达下一个节点，并从该节点查询路径。因此，您的查询最终将是在时间 t 或之后来自车站 x 的所有航段，但对于给定的不同目的地，最早的航段。

如果您有从华盛顿特区到巴尔的摩的路线，您的第 1 站和第 2 站可能是新卡罗顿和阿伯丁。所以你可以存储：

```
id (auto-increment), from_station_id, to_station_id, departure_time, arrival_time 
```

您可以存储从华盛顿到新卡罗顿的记录、从新卡罗顿到阿伯丁的记录以及从阿伯丁到巴尔的摩的记录。但是，我只会在以下情况下包括这些站点：(a) 它们是您旅行计划的可能起点和目的地，或者 (b) 有一些重要的连接路线（不仅仅是乘坐火车并在同一路线上乘坐下一班车） .

您的寻路算法将有一个步骤（在循环中）从具有最低当前成本（最早到达）的节点开始下一个分段列表，以及该分段将您带到的节点。

```
select segments.*
from segments inner joint segments compare_seg on segments.to_station_id = compare_seg.station_id
where departure_time > ?
group by segments.id
having segment.arrival_time = min(compare_seg.arrival_time) 
```

# php - PHP - 尝试从带有附件的脚本发送电子邮件，但它没有附加您好

> ID：10667755
> 
> 赞同：0
> 
> 时间：2012-05-19T18:19:06.483
> 
> 标签：php, email

我有一个像这样动态创建的文件：

```
// Create and save the string on the file system
$str = "Business Plan: \nSome more text";
$fp = fopen("alex.txt", 'w+');
fwrite($fp, $str);

// email with the attachment
$to = 'alex.genadinik@gmail.com'; 
$subject = 'Your business plan attached';

//create a boundary string. It must be unique 
//so we use the MD5 algorithm to generate a random hash 
$random_hash = md5(date('r', time())); 
//define the headers we want passed. Note that they are separated with \r\n 
$headers = "From: BusinessPlanApp@example.com"; 
//add boundary string and mime type specification 
$headers .= "\r\nContent-Type: multipart/mixed; boundary=\"PHP-mixed-".$random_hash."\""; 
//read the atachment file contents into a string,
//encode it with MIME base64,
//and split it into smaller chunks
$attachment = chunk_split(base64_encode(file_get_contents('alex.txt')));

$contents = "some contents of the email";                   

mail($to, $subject, $contents, $headers); 
```

该文件正在保存到文件系统中，并且一封带有正确正文和主题的电子邮件正在发送给我。

唯一出错的是附件是零字节的未命名文件。知道为什么会发生这种情况吗？是权限问题吗？或者在我的电子邮件中？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T18:40:23.577

您将 mime 数据放入`$attachment`，但不要在任何地方使用该变量，因此您实际上并没有附加任何东西。

您最好使用诸如[PHPMailer](http://phpmailer.worxware.com)或[Swiftmailer 之](http://swiftmailer.org)类的库来为您执行此操作。它的麻烦要少得多，并且在出现问题时它们可以提供更好的诊断。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T18:49:11.873

您的电子邮件代码似乎缺少一些东西。我开始修复它，但从头开始可能会更好。我会推荐一个库，但如果没有，下面的代码应该可以实现你想要的：

```
// Create and save the string on the file system
$str = "Business Plan: \nSome more text";
$fp = fopen("alex.txt", 'w+');
fwrite($fp, $str);
fclose($fp);

// email fields: to, from, subject, and so on
$from = "BusinessPlanApp@example.com";
$to = 'alex.genadinik@gmail.com';
$subject = 'Your business plan attached';
$headers = "From: $from";

// boundary
$semi_rand = md5(time());
$mime_boundary = "==Multipart_Boundary_x{$semi_rand}x";

// headers for attachment
$headers .= "\nMIME-Version: 1.0\n" . "Content-Type: multipart/mixed;\n" . " boundary=\"{$mime_boundary}\"";

// message text
$contents = "This is the email content";

// multipart boundary
$message = "--{$mime_boundary}\n" . "Content-Type: text/plain; charset=\"iso-8859-1\"\n" .
    "Content-Transfer-Encoding: 7bit\n\n" . $contents. "\n\n";

// preparing attachments
$message .= "--{$mime_boundary}\n";
$fp =    fopen('alex.txt',"rb");
$data =    fread($fp,filesize('alex.txt'));
fclose($fp);
$data = chunk_split(base64_encode($data));
$message .= "Content-Type: application/octet-stream; name=\"".basename('alex.txt')."\"\n" .
    "Content-Description: ".basename('alex.txt')."\n" .
    "Content-Disposition: attachment;\n" . " filename=\"".basename('alex.txt')."\"; size=".filesize('alex.txt').";\n" .
    "Content-Transfer-Encoding: base64\n\n" . $data . "\n\n";
$message .= "--{$mime_boundary}--";
mail($to, $subject, $message, $headers); 
```

# jquery - JQuery - 需要识别一些与输入文本框相关的事件

> ID：10667758
> 
> 赞同：-1
> 
> 时间：2012-05-19T18:19:23.847
> 
> 标签：jquery, events

我正在寻找一些新的 JQuery 事件。喜欢 Twitter 的东西在他们的注册页面（以及整个网络上的许多其他注册页面），[https://twitter.com/signup](https://twitter.com/signup)，那会很棒。他们似乎有以下事件（我添加了一些我想要的额外事件）：

1.  在文本框中按 enter - 输入文本后
2.  在文本框中按 Enter - 不存在文本
3.  单击另一个文本框 - 与上面相同的两个事件
4.  识别在文本框中输入的字符 - 即字符数、数字、特殊字符等。
5.  在一个文本框中键入的字符与另一个文本框匹配
6.  验证用户名 - 我假设这以某种形式链接到后端数据库......
7.  只有当文本框有准确的信息时才让你点击提交。

任何和所有的帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T19:04:34.793

我没有足够的时间做所有这些，但请看这里[http://jsfiddle.net/Q3uJM/ 1、2、3、5](http://jsfiddle.net/Q3uJM/)的例子

现在我已经提供了这个基础，我相信你可以弄清楚 4 和 7。6 需要一个 ajax 调用和一些服务器端代码。jQuery 有非常好的 ajax 函数，但我对服务器端的东西无能为力

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T19:06:53.787

谷歌 jquery .val()。只需在要检查的输入上运行所需的测试即可。

基本上只是谷歌你写的每一个问题。

# php - 使用 curl (php) 发布数据，然后从 GET 获取 sessionid

> ID：10667760
> 
> 赞同：0
> 
> 时间：2012-05-19T18:19:30.460
> 
> 标签：php, curl

所以这是我的问题：我想使用 curl 登录网站，然后使用 POST 发送登录凭据。但是，成功登录后，我被重定向到一个 url，我的 sessionid 是通过 GET 传递的（而不是在 cookie 中，因此无法从那里获取它们）。我需要那个 sessionid 才能访问受保护的页面。那么，我该如何获得呢？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T18:21:04.420

```
$url = curl_getinfo($ch, CURLINFO_EFFECTIVE_URL); 
```

然后跟着 parse_url() 然后 parse_str()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T18:33:07.827

```
$sessionId = parse_url( curl_getinfo($ch, CURLINFO_EFFECTIVE_URL) )['sessionId']; 
```

*将“sessionId”*更改为正在使用的令牌名称。

# jquery - 为什么我的 webkit 转换 CSS 不能按预期工作？

> ID：10667767
> 
> 赞同：0
> 
> 时间：2012-05-19T18:20:16.940
> 
> 标签：jquery, css, webkit, css-transforms

我有一个页面，您可以从 [http://dl.dropbox.com/u/16178847/eyewitness/a/b.html](http://dl.dropbox.com/u/16178847/eyewitness/a/b.html)查看/下载，但我无法确切知道如何做我想做的事. 我想要的是一种卡片翻转效果，一方面，能够单击以显示/隐藏页眉和页脚。您可能需要一个 webkit 浏览器才能使其工作。

我有页眉和页脚显示/隐藏工作：单击照片上的任意位置（或包含 div）以显示/隐藏页眉/页脚。

我什至有大部分的翻转工作：单击信息图标，然后单击后退图标/单词。我正在努力解决的是在翻转时使图像消失，并且使背面（当前位于正面下方）实际上与正面位于同一位置，因此它看起来真的像一张卡片翻转。

你会在我的 CSS 中看到我已经注释掉了两行。它们是我期望必须使用的，但不起作用。.face 上的第一个使图像和页脚消失，​​而 .photo 上的第二个则什么也不做。我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T23:07:57.497

我认为本教程应该有所帮助：[http ://css3.bradshawenterprises.com/all/](http://css3.bradshawenterprises.com/all/)

您可能还需要使用 jquery 来添加/删除一些类。

# java - 如何创建一个简单的 pop3 电子邮件服务器？

> ID：10667777
> 
> 赞同：1
> 
> 时间：2012-05-19T18:21:36.590
> 
> 标签：java, email, pop3, mail-server

服务器必须处理来自 pop3 客户端的请求。我能够创建一个可以处理 Telnet 通信的 smtp 电子邮件服务器。

对于 pop3 服务器，我必须支持 pop3 客户端（任何一个）。我尝试了 Thunderbird，但我不知道 Thunderbird 发出什么样的流以及如何正确处理服务器和 pop3 客户端之间的通信。

我可以使用任何 pop3 客户端，并且服务器不必处理加密。我只需要一些简单且有效的东西。

# opengl - OpenGL 类型不匹配

> ID：10667778
> 
> 赞同：0
> 
> 时间：2012-05-19T18:21:37.790
> 
> 标签：opengl

为什么 OpenGL 中有不匹配的类型？

例如，如果我有一个顶点缓冲区对象，

```
GLuint handle = 0;
glGenBuffers(1, &handle_); // this function takes (GLsizei, GLuint*) 
```

现在如果我想知道当前绑定的缓冲区

```
glGetIntegerv( GL_ARRAY_BUFFER_BINDING, reinterpret_cast<GLint *>(&handle ) ); // ouch, type mismatch 
```

为什么没有 glGetUnsignedIntegerv 或

让 glGenBuffers 采用 GLint * 代替。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T18:29:34.930

这是因为 glGetIntegerv 函数旨在从 OpenGL 中获取任何整数类型的信息。它还包括 GLint 类型值（负值）。它还包括多个组件值，例如 GL_VIEWPORT：

```
GLint viewport[4];
glGetIntegerv(GL_VIEWPORT, viewport); 
```

从一个角度来看 - 只有一个函数来取回值更简单，而不是每个特定参数都有数百个函数。换个角度看——当然，强制转换类型有点难看。

但不知道他们为什么不使用 GLint 作为缓冲区 ID。

无论如何 - 你不应该调用任何 glGet... 函数。它们很慢，通常需要等待 GPU 完成先前的命令——这意味着 CPU 将在这段时间内等待空闲。

# python - Python：从整数列表和列表中提取一个值

> ID：10667785
> 
> 赞同：0
> 
> 时间：2012-05-19T18:22:25.503
> 
> 标签：python, list

我有一个这样的清单：

```
a = [3, 4, [1], 8, 9, [3, 4, 5]] 
```

我想确定具有这些特征的列表何时只有一个值，然后将其提取到主列表中：

预期产出

```
a = [3, 4, 1, 8, 9, [3, 4, 5]] 
```

我知道如何在由列表组成的列表中提取值，但在这种情况下我不知道如何

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-19T18:24:33.293

我的解决方案简单明了：

```
result = []
for x in a:
   if isinstance(x, list) and len(x) == 1: # check item type and length
       result.append(x[0])
   else:
       result.append(x) 
```

或相同但只有一行

```
>>> [x[0] if isinstance(x, list) and len(x) == 1 else x for x in a]
[3, 4, 1, 8, 9, [3, 4, 5]] 
```

# php - 如何在 PHP 中回显 count(*) AS 的结果？

> ID：10667790
> 
> 赞同：0
> 
> 时间：2012-05-19T18:22:41.737
> 
> 标签：php, mysql

我正在使用 count(*) AS，作为 mysql_num_rows() 的替代方法。我计算了所有 3 种反馈（正面、负面和中性）。

但是我不知道如何将正反馈的计数分配给我要调用的变量，`$positive_feedback`然后回显它。你怎么能用下面的例子做到这一点？

我有这个：

```
SELECT feedback, count(*) AS `count` 
FROM feedback 
WHERE seller='$user' 
GROUP BY feedback 
```

这给出了类似的东西：

```
feedback | count
----------------
positive |   12
neutral  |   8
negative |   3 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T18:28:56.223

```
$result = mysql_query($query);  // with your query.

$feedback=array();
while ($row = mysql_fetch_assoc($result)) {
   $feedback[$row['feedback']]=$row['count'];
} 
```

它将给出一个由 feedback['positive']、feedback['negative'] 等组成的数组，其中每个都存储计数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T18:39:46.027

Use Count(1), not Count(*), it's faster because the SQL engine can just use the count values from the counting B-Tree index and does not need to ever access any other values. If you plan to make this query a lot, make sure you add an index on the *feedback* tuple.

```
$query = "SELECT feedback, count(1) AS `count`...";
$result = mysql_query($query, $link); // don't forget to share your db conn

$feedbackArr = new array();
while ($row = mysql_fetch_assoc($result)) {
    $feedbackArr[$row['feedback']] = (int)$row['count'];
}

echo "Positive Feedback: \n";
print_r($feedbackArr); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T18:35:37.283

使用 PDO，它看起来像这样：

```
$dsn = "mysql:host=%;dbname=%"; // insert your host and dbname

$db = new PDO($dsn, $username, $password); // insert your username and pass

$sql = "
  SELECT 
    feedback, count(*) AS `count` 
  FROM 
    feedback 
  WHERE 
    seller='$user' 
  GROUP BY feedback
";

$feedback = array();
foreach ( $db->query($sql) as $row ) {
  $feedback[ $row['feedback'] ] =  $row['count'];
}

// result in here
print_r ($feedback); 
```

# joomla1.5 - 在 joomla 中创建新用户组

> ID：10667792
> 
> 赞同：0
> 
> 时间：2012-05-19T18:22:46.807
> 
> 标签：joomla1.5

是否可以创建额外的组，即员工。我正在使用 joomla 1.5 版本

![在此处输入图像描述](../Images/d730c9ea1a77b6dd944ac6df9ba6e3ec.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T19:25:20.307

是的，这是可能的，但它有点棘手，幸运的是 joomla 文档写了一些关于这个的东西...... [http://docs.joomla.org/Custom_user_groups](http://docs.joomla.org/Custom_user_groups) 希望这会帮助你......

# wpf - WPF。选择时更改 ListViewItem 的大小

> ID：10667798
> 
> 赞同：0
> 
> 时间：2012-05-19T18:23:28.163
> 
> 标签：wpf, xaml, listview, data-binding, triggers

我有一个列表视图：

```
<ListView Name="SelectedFeeds">
    <ListView.ItemContainerStyle>
        <Style TargetType="{x:Type ListViewItem}" 
               BasedOn="{StaticResource {x:Type ListViewItem}}">
            <Style.Triggers>
                 <Trigger Property="IsSelected" Value="True">

                 </Trigger>
            </Style.Triggers>
        </Style>
    </ListView.ItemContainerStyle>
    <ListView.ItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="Vertical" Name="panel">
                <TextBlock x:Name="Title" FontSize="24" 
                           Text="{Binding Title, IsAsync=True}" TextWrapping="Wrap" />
                        <Label x:Name="PubDate" FontSize="10" 
                               Content="{Binding Path=PubDate, IsAsync=True}" />
                        <TextBlock my:HtmlParser.HTMLText=
                                   "{Binding Path=Description, IsAsync=True}" 
                                   TextWrapping="Wrap" 
                                   Width="{Binding ElementName=panel, 
                                   Path=ActualWidth}" Height="0" />
             </StackPanel>
        </DataTemplate>
    </ListView.ItemTemplate>
</ListView> 
```

DataTemplate 中有一个高度较大的 TextBlock。

At start I'm setting height of this textblock to "0" and when ListViewItem is selected, I need to set that height to "Auto".

这可能可以通过触发器来完成，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T07:08:39.917

对于触发方法，请在 DataTemplate 中使用它。

```
<ListView Name="SelectedFeeds">
    <ListView.ItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="Vertical" Name="panel">
                <TextBlock x:Name="Title" FontSize="24" 
                           Text="{Binding Title, IsAsync=True}" TextWrapping="Wrap" />
                        <Label x:Name="PubDate" FontSize="10" 
                               Content="{Binding Path=PubDate, IsAsync=True}" />
                        <TextBlock x:Name="TextHolder"
                                   my:HtmlParser.HTMLText=
                                   "{Binding Path=Description, IsAsync=True}" 
                                   TextWrapping="Wrap" 
                                   Width="{Binding ElementName=panel, 
                                   Path=ActualWidth}" Height="0" />
             </StackPanel>
            <DataTemplate.Triggers>
                <DataTrigger Binding="{Binding IsSelected, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ListViewItem}}}" Value="True">
                    <Setter TargetName="TextHolder" Property="Height" Value="123"/>
                </DataTrigger>
            </DataTemplate.Triggers>
        </DataTemplate>
    </ListView.ItemTemplate>
</ListView> 
```

注意 上的`x:Name`属性`TextBlock`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T19:07:47.003

您可以使用触发器来执行此操作（尽管我目前不知道如何），但您可以使用转换器来执行此操作。

```
public class BoolToLengthConverter : IValueConverter
{
    public BoolToLengthConverter()
    {
        TrueValue = double.NaN;
        FalseValue = 0;
    }

    [TypeConverter(typeof(LengthConverter))]
    public double TrueValue { get; set; }

    [TypeConverter(typeof(LengthConverter))]
    public double FalseValue { get; set; }

    #region Implementation of IValueConverter

    public object Convert(object value, Type targetType, 
                          object parameter, CultureInfo culture)
    {
        return System.Convert.ToBoolean(value) ? TrueValue : FalseValue;
    }

    public object ConvertBack(object value, Type targetType, 
                              object parameter, CultureInfo culture)
    {
        return TrueValue.Equals(value);
    }

    #endregion
} 
```

Xaml

```
<ListView.Resources>
    <Converters:BoolToLengthConverter 
         x:Key="BoolToHeightConverter" TrueValue="Auto" FalseValue="0" />        
</ListView.Resources>

<TextBlock ... Height="{Binding Path=IsSelected, 
               Converter={StaticResource BoolToHeightConverter}, 
               RelativeSource={RelativeSource Mode=FindAncestor, 
               AncestorType={x:Type ListViewItem}}}"/> 
```

您当然可以通过使用 BoolToVisibilityConverter 并绑定到 TextBlock 的 Visibility 属性来获得相同的结果。

# applescript - 在 AppleScript 字符串中使用引号

> ID：10667800
> 
> 赞同：17
> 
> 时间：2012-05-19T18:23:39.270
> 
> 标签：applescript

我正在使用 AppleScript，需要这样做：

```
set TextToWrite to " #!/bin/bash cd "$( dirname "$0" )" java -server -Xmx4G -jar ./craftbukkit.jar" " 
```

如您所见，我需要制作成字符串的文本中包含引号。我该如何设置

```
#!/bin/bash cd "$( dirname "$0" )" java -server -Xmx4G -jar ./craftbukkit.jar" 
```

到一个 AppleScript 字符串没有引号搞乱它？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-19T20:08:37.087

要将文字引号插入 Applescript 字符串，您必须转义它们，即

```
set myString to "This is a \"quoted\" text." 
```

AppleScript 与大多数语言具有相同的约定，即使用反斜杠来转义特殊字符，其中只有两个：引号和 ... 反斜杠。请参阅[AppleScript 语言指南的“特殊字符串字符”部分](https://developer.apple.com/library/mac/documentation/AppleScript/Conceptual/AppleScriptLangGuide/reference/ASLR_classes.html#//apple_ref/doc/uid/TP40000983-CH1g-BBCIAHJF)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T09:33:08.290

也可以使用以下语法：

```
set aString to "quoted"
set myString2 to "This is a " & quoted form of aString & " text." 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-28T15:56:27.930

(dirname as POSIX path) 的引用形式

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-15T15:16:29.370

```
set x to "He said   \" Enter the matrix.\"   "display dialog x 
```

只需将其复制到 applescript 中即可，这是最容易理解的方法。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2014-03-28T02:31:58.640

在applescript中使用引号非常简单，您只需要将行结束并以引号开头

例如

显示对话框“你好世界”

但是当您决定在文本中放置一个变量时，您必须使用 &

将 my_name 设置为“迈克尔”

显示对话框“你好”和我的名字

谢谢你

# hibernate - hibernate.connection.provider_class 异常：无法实例化连接提供程序

> ID：10667803
> 
> 赞同：0
> 
> 时间：2012-05-19T18:24:12.937
> 
> 标签：hibernate, hibernate-mapping, hibernate-criteria

我使用的休眠版本是 3.2.5

这就是我的 cfg.xml 文件的样子，我正在使用 hibernate.connection.provider_class 来检索连接：

```
<property name="hibernate.connection.provider_class">com.jdbc.ConnProvider</property>
<property name="hibernate.jdbc.batch_size">30</property>
<property name="hibernate.dialect">org.hibernate.dialect.OracleDialect</property>
<property name="hibernate.cache.use_query_cache">false</property>
<property name="hibernate.cache.use_second_level_cache">false</property>
<property name="hibernate.connection.release_mode">after_transaction</property>
<property name="hibernate.connection.autocommit">true</property>
<property name="hibernate.connection.pool_size">0</property>
<property name="hibernate.current_session_context_class">thread</property>    
<property name="hibernate.show_sql">true</property>
<property name="hibernate.hbm2ddl.auto">update</property> 
```

这是 ConnProvider 类：

```
 package com.jdbc;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;
import java.util.Properties;
import org.hibernate.HibernateException;
import org.hibernate.connection.ConnectionProvider;

/**
 *
 * @author gOMzY
 */
class ConnProvider implements ConnectionProvider {

    @Override
    public Connection getConnection() throws SQLException {
        Connection conn = null;
        try{

            Class.forName("oracle.jdbc.OracleDriver");
            conn=DriverManager.getConnection("<url>","<username>","<pwd>");
            System.out.println("Connected!!!");
        }catch(Exception e){
            throw new UnsupportedOperationException("Not supported yet.");
        }
        return conn;
    }

    @Override
    public void closeConnection(Connection cnctn) throws SQLException {
        throw new UnsupportedOperationException("Not supported yet.");
    }

    @Override
    public boolean supportsAggressiveRelease() {
        return false;
    }

    @Override
    public void close() throws HibernateException {
        throw new UnsupportedOperationException("Not supported yet.");
    }

    @Override
    public void configure(Properties prprts) throws HibernateException {
        throw new UnsupportedOperationException("Not supported yet.");
    }

} 
```

我得到的例外：

严重：无法实例化连接提供程序 java.lang.IllegalAccessException：类 org.hibernate.connection.ConnectionProviderFactory 无法使用 sun.reflect.Reflection.ensureMemberAccess 处的修饰符“”访问 com.infy.jdbc.ConnProvider 类的成员（未知来源) 在 java.lang.Class.newInstance0(Unknown Source) 在 java.lang.Class.newInstance(Unknown Source) 在 org.hibernate.connection.ConnectionProviderFactory.newConnectionProvider(ConnectionProviderFactory.java:73) 在 org.hibernate.connection.ConnectionProviderFactory .newConnectionProvider(ConnectionProviderFactory.java:56) 在 org.hibernate.cfg.SettingsFactory.createConnectionProvider(SettingsFactory.java:414) 在 org.hibernate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:62) 在 org.hibernate.cfg。Configuration.buildSettings(Configuration.java:2009) 在 org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1292) 在 com.infy.jdbc.HibernateStartup.main(HibernateStartup.java:19)

请建议如何解决这个问题。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T20:20:19.187

请注意，您的连接提供者具有默认可见性，也许它应该是公开的：

```
public ConnProvider implements ConnectionProvider { ... } 
```

# javascript - 显示隐藏的 div 并在屏幕上居中

> ID：10667804
> 
> 赞同：0
> 
> 时间：2012-05-19T18:24:21.803
> 
> 标签：javascript

**更新**

我刚刚更新了 jsFiddle，以便您可以看到“弹出”正在发生以及它是如何从未居中的。它总是距离顶部 200 像素。

因此，如果用户向下滚动了一个长页面并单击以使弹出窗口发生，则弹出窗口将回到页面顶部 - 200px，而不是在可见屏幕上居中。

[http://jsfiddle.net/JYgcj/40/](http://jsfiddle.net/JYgcj/40/)

我将尝试下面的答案并更新结果

* * *

我的布局中包含一个隐藏的 div 作为部分

这是部分

一个 javascript 函数显示此 div 以显示 ajax 请求的结果

```
function showResultPopUpDiv(divId, title) {

    var popUpId = document.getElementById(divId);
    var popUpHeader = title;
    var originalDivHTML;
    var topPos = 200;
    var popUpWidth;
    var midPos;
    var leftPos;
    var spinnerOpts;

    //Insert header text & open pop up
    popUpId.style.display = "block";
    document.getElementById("ajaxResultPopUpHeaderText").innerHTML = popUpHeader;

    //Set position dimensions
    popUpWidth = popUpId.offsetWidth / 2;
    midPos = $(document).width() / 2;
    leftPos = midPos - popUpWidth;

    //Position pop up (center)
    popUpId.style.top = topPos + "px";
    popUpId.style.left = leftPos + "px";

    //Insert spinning loader code here
    ... //left out for brevity
} 
```

如果视图长于单个屏幕并且用户滚动到底部并单击了提交按钮，则此 div 会弹出，但除非用户滚动回顶部，否则无法看到。

无论页面当前滚动到何处，如何使它正确地居中在窗口上。

[这个问题](https://stackoverflow.com/questions/9447180/centering-a-div-on-screen-even-when-the-page-is-scrollable)和我调查过的其他问题并没有为我解决这个问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T18:59:36.470

听起来您想要的是“固定”的 CSS 位置（[CSS Positioning 101](http://www.alistapart.com/articles/css-positioning-101/)）。这将使对象相对于视口（浏览器）而不是相对于文档保持固定。这将影响 top 和 left 的行为方式。

确保你有类似的东西：

```
#ajaxResultPopUpHeaderText {
    position: fixed; /* Make the position fixed to the viewport,
    so it stays in the same place no matter how much the user scrolls */
} 
```

要以视口为中心，您需要计算相对于视口的位置。完整的[JSFiddle](http://jsfiddle.net/PLhGu/7/)（来自您的原始版本，添加了滚动内容和样式，以便在您滚动时保持按钮与您同在）具有所有 JavaScript，但由于您使用的是 jQuery，因此您只需要使用`$(window)`而不是`$(document)`.

```
 //Set position dimensions
    var popUpHeight = popUpId.offsetHeight / 2;
    var centrePos = $(window).height() / 2;
    topPos = centrePos - popUpHeight;
    popUpWidth = popUpId.offsetWidth / 2;
    midPos = $(window).width() / 2;
    leftPos = midPos - popUpWidth; 
```

`$(document)`碰巧对宽度没问题，因为文档通常是宽度的 100%，但`$(window)`无论如何你都应该使用。

# c# - 使用 Visual Studio 2008 C# 以编程方式打印动态表格数据

> ID：10667807
> 
> 赞同：0
> 
> 时间：2012-05-19T18:24:35.790
> 
> 标签：c#, visual-studio-2008, printing

我打算编写一个应用程序来自动生成包裹单。这个想法是，应用程序将从数据库中获取客户订单详细信息（比如每天早上），并为他们生成包裹单，只需单击按钮即可打印出来。我希望能够每页打印一个包裹单或（为了节省纸张）最多 2 个（如果有足够的空间可以容纳两者）。我还希望在打印之前选择打印预览。包裹单使用一个表格，其中一些列跨越上方/下方的多个列。在这一点上并不那么重要，但可能需要能够将应用程序生成的每日包裹单导出为 word 或 PDF。实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T21:46:00.860

我不确定它是否适用于您的情况。但是您要求做的大部分事情都可以使用[iTextSharp](http://sourceforge.net/projects/itextsharp/)动态生成 PDF 文件来实现。因为它会生成 PDF，所以您可以免费获得很多要求（例如打印、打印预览等）。但是，不确定从 PDF 到 Word。值得考虑，因为 iTextSharp 对表格数据有很好的支持。

# javascript - HTML5 嵌入标签 - 事件属性未触发（onended、onpause 等）

> ID：10667808
> 
> 赞同：2
> 
> 时间：2012-05-19T18:24:50.440
> 
> 标签：javascript, html, audio, tags, embed

我已经搜索了很多小时试图找到解决这个问题的方法。我有一个带有背景声音文件的 HTML5 网页，该文件在页面加载时自动播放，我试图让一个函数在声音文件播放完毕时运行。我已将我正在使用的代码隔离到一个测试文件中，以确保没有其他问题导致问题。声音在 Firefox（我用来测试）中播放良好。从我尝试过的许多解决方案中，似乎嵌入标签中的事件属性根本没有触发。

这是我正在使用的测试 HTML 页面（尝试将 HTML 放在这里，但它不会正确显示，我知道这可能是一个新手错误，但我很着急）：

[测试页](http://www.jameshilldigital.net/testpage/test.html)

正如您所看到的，消息功能工作正常，因为“测试”链接在单击时指示。但是没有出现媒体事件的消息。

如果有人可以帮助我，我将不胜感激，因为这是一个时间紧迫的公司项目。我很乐意尝试事件属性的替代解决方案，只要我可以让我自己的 Javascript 函数在声音文件上运行，我会很高兴！！

谢谢！

*   比利

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T18:09:50.137

由于您使用的是 HTML5，因此最好使用`<audio>`标签而不是`<embed>`. 这在我的示例中运行良好：

[http://jsfiddle.net/u6dbV/](http://jsfiddle.net/u6dbV/)

您可以在此处包含 HTML，但必须将其标记为代码，否则将被删除。

# c++ - 具体对接框架

> ID：10667812
> 
> 赞同：1
> 
> 时间：2012-05-19T18:25:19.440
> 
> 标签：c++, visual-c++, mfc, docking, dockpanel

由于 nDockBarID = AFX_IDW_DOCKBAR_LEFT，现在我的酒吧位于框架上

```
 ForcesBar* m_forcesBar[3];

    for (int i=0; i<3; i++)
{
    m_forcesBar[i]->SetBarStyle(m_forcesBar[i]->GetBarStyle() | 
        CBRS_TOOLTIPS | CBRS_FLYBY | CBRS_SIZE_DYNAMIC);
    m_forcesBar[i]->EnableDocking(CBRS_ALIGN_ANY);
}

pMainFrame->EnableDocking(CBRS_ALIGN_ANY);

pMainFrame->DockControlBar(m_forcesBar[0], AFX_IDW_DOCKBAR_LEFT); 
pMainFrame->DockControlBar(m_forcesBar[1], AFX_IDW_DOCKBAR_LEFT); 
pMainFrame->DockControlBar(m_forcesBar[2], AFX_IDW_DOCKBAR_LEFT); 
```

![在此处输入图像描述](../Images/c2642a23535da801329e186696a3bbcd.png)

虽然我想收到这样的酒吧组合：

![在此处输入图像描述](../Images/f9fd4d63b59e5340811ff07a48ed7890.png)

我认为在中使用 lpRect 会很好

```
void DockControlBar(
   CControlBar* pBar,
   UINT nDockBarID = 0,
   LPCRECT lpRect = NULL 
); 
```

但不幸的是它不起作用。您能否提供进行此类特定对接的代码示例（第二张图片）。

（在项目中我使用 CSizingControlBar [http://www.datamekanix.com/sizecbar/manual.html](http://www.datamekanix.com/sizecbar/manual.html)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T14:49:28.327

我对其进行了测试，使用矩形效果很好。一个区别是，在我的测试应用程序中，我已将 MainFrm.h 中的 m_forcesBar 声明为

```
ForcesBar m_forcesBar[3]; 
```

避免在堆上分配并记住内存释放。

我使用的代码（来自 OnCreate 的片段）：

```
 EnableDocking(CBRS_ALIGN_ANY);

m_wndToolBar1.EnableDocking(CBRS_ALIGN_ANY);
m_wndToolBar2.EnableDocking(CBRS_ALIGN_ANY);

DockControlBar(&m_wndToolBar1);
DockControlBar(&m_wndToolBar2);

CRect rectWnd;
GetClientRect(rectWnd);
ClientToScreen(rectWnd);

for(int iIndx = 0; iIndx < 3; iIndx++)
{
    if (!m_forcesBar[iIndx].Create(_T(""), this, 120 + iIndx))
    {
        TRACE0("Failed to create mybar\n");
        return -1;      // fail to create
    }

    m_forcesBar[iIndx].SetBarStyle(m_forcesBar[iIndx].GetBarStyle() |
        CBRS_TOOLTIPS | CBRS_FLYBY | CBRS_SIZE_DYNAMIC);

    m_forcesBar[iIndx].EnableDocking(CBRS_ALIGN_LEFT);

    DockControlBar(&m_forcesBar[iIndx], AFX_IDW_DOCKBAR_LEFT, rectWnd);

} 
```

这就对了。

# android - ViewPager 和线性布局

> ID：10667813
> 
> 赞同：2
> 
> 时间：2012-05-19T18:25:30.650
> 
> 标签：android

认为我有一个带有一些布局的活动，我想知道是否可以在活动中为那个活动 ViewPager 项目使用布局？

是否可以 ？如果是这样，如何？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T03:08:37.847

您应该使用 a `ViewPager`，每个页面都包含一个`Fragment`. 此[示例代码](http://tamsler.blogspot.com/2011/10/android-viewpager-and-fragments.html)解释了它是如何完成的。

如果您希望您的应用程序支持蜂窝设备之前的设备，您需要使用[Android Support Package](http://developer.android.com/sdk/compatibility-library.html)中的`ViewPager`and 。`Fragment`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T03:02:06.047

您可以将 viewpager 与片段一起使用。请参阅下面的示例代码。我认为这对你会有帮助。

[http://developer.android.com/resources/samples/Support13Demos/src/com/example/android/supportv13/app/FragmentPagerSupport.html](http://developer.android.com/resources/samples/Support13Demos/src/com/example/android/supportv13/app/FragmentPagerSupport.html)

# java - 谷歌文档 API。Java 特定的可恢复上传

> ID：10667815
> 
> 赞同：0
> 
> 时间：2012-05-19T18:26:01.703
> 
> 标签：java, gdata-api

我一直在使用此处找到的 google docs api： [https ://developers.google.com/google-apps/documents-list/#introduction](https://developers.google.com/google-apps/documents-list/#introduction)

我遇到的这个问题是，当您通过身份验证部分时，没有更多的 java 特定信息。通过查看我在这里找到的示例代码，我能够编写我的大部分程序： [https ://code.google.com/p/gdata-java-client/source/browse/trunk/java/sample/docs](https://code.google.com/p/gdata-java-client/source/browse/trunk/java/sample/docs)

我需要编写一个方法来使用“可恢复上传”来更新纯文本文件，但我找不到任何关于如何在 Java 中执行此操作的信息。我试图翻译在第一个链接上找到的 .NET 脚本，但没有成功。现在已经为此工作了两天，我正式陷入困境。

如果有人知道如何执行此操作或知道此 API 的任何其他 Java 特定资源，那将是一个很大的帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T02:33:04.763

在这里找到了一些不错的 java 示例代码。 [https://code.google.com/p/gdata-java-client/source/browse/trunk/java/sample/docs/DocumentResumableUploadDemo.java](https://code.google.com/p/gdata-java-client/source/browse/trunk/java/sample/docs/DocumentResumableUploadDemo.java)

# java - 无法使用 PHP 客户端从 Java 套接字服务器读取响应

> ID：10667823
> 
> 赞同：0
> 
> 时间：2012-05-19T18:27:18.050
> 
> 标签：java, php, sockets, client-server

我有一个用 Java 编写的服务器。它是一个简单的，当客户端连接时回显“HELLO”，然后回显客户端发送的任何回复。代码如下：

```
ServerSocket ss=new ServerSocket(2001);
while(true) {
  Socket s=ss.accept();
  BufferedReader in=new BufferedReader(new InputStreamReader(s.getInputStream()));
  PrintWriter out=new PrintWriter(s.getOutputStream(),true);
  out.println("HELLO");
  String msg=in.readLine();
  out.println(msg);
} 
```

我有一个连接到服务器的 PHP 脚本：

```
<?php
  $socket=socket_create(AF_INET,SOCK_STREAM,getprotobyname('tcp'));
  socket_connect($socket,'127.0.0.1',2001);
  $msg=socket_read($socket,10);
  echo socket_write($socket,'I am the client.');
  $msg=socket_read($socket,20);
  echo $msg;
?> 
```

我从服务器收到“HELLO”消息，服务器也收到“我是客户端”消息，但 PHP 客户端没有收到回复。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T18:39:02.260

`in.readLine()`在看到行终止符之前不会返回。

除非`socket_write`在 PHP 中隐式添加行终止符，否则您需要自己这样做，以便 Java 端看到您已经编写了完整的文本行。

# java - 如何在不依赖 EMF jar 的情况下从 Ecore 元模型创建 Java 代码？

> ID：10667824
> 
> 赞同：3
> 
> 时间：2012-05-19T18:27:18.193
> 
> 标签：java, eclipse, code-generation, eclipse-emf, eclipse-emf-ecore

是否可以从 Ecore 元模型生成 Java 代码，而不依赖 EMF？生成“干净的代码”，就好像它是从 UML 模型生成的一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T20:59:36.757

简单的方法是在顶层节点的“模型特征默认值”部分设置 GenModel 选项“抑制 EMF 类型”......有相关选项的孔集。有关完整的详细信息，请参阅 EMF 书（第 2 版）。

您还可以使用 JET 从 ECore 模型生成您自己的 Java 代码。查看“[使用 EMF 进行元建模：生成具体的、可重用的 Java 片段](http://www.ibm.com/developerworks/library/os-eclipse-emfmetamodel/)”以获得相当详细的描述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T14:10:13.927

并非所有内容都可以使用 EMF 模型编辑器删除。, `#eSet`,`#eGet`等方法必须在基础模板中删除。`eInvoke`可以通过设置“Operation Reflection”=false 来移除该方法。可以删除 util 包设置包级别配置“适配器工厂”= false。可以从 genmodel 配置管理其他更改 - 请参阅 EMF 建模框架书，第 12.3.1 节了解更多详细信息。

请注意，“抑制 EMF 类型”仅从 getter 和 setter 中删除 EMF 类型，`EOperation`但`EReference`不会从声明的 ivar 或 getter 中使用的构造函数中删除（如果 list 为 null）。这些必须在模板中进行更改——具体来说是 Class.javajet。有关如何替换核心 EMF 模板的详细信息，请参阅[using-dynamic-templates-in-emf](http://blog.eclipse-tips.com/2008/08/using-dynamic-templates-in-emf.html)。

对于 ivar，使用`Feature#getImportedType`，而不是`Feature#getImportedInternalType`：

```
protected <%=genFeature.getImportedType(genClass)%> <%=genFeature.getSafeName()%>; 
```

此行跟在注释部分之后，其中包含 isListType 测试中的以下内容：

```
<%} else if (genFeature.isListType() || genFeature.isReferenceType()) {%>
  <%if (genClass.isField(genFeature)) {%>
/**
 * The cached value of the '{@link #<%=genFeature.getGetAccessor()%>() <em><%=genFeature.getFormattedName()%></em>}' <%=genFeature.getFeatureKind()%>.
 * <!-- begin-user-doc -->
 * <!-- end-user-doc --> 
```

对于访问器，使用类似以下的内容将 EMF `EList`impl 替换为`ArrayList`：

```
<%=genFeature.getSafeName()%> = new <%=genModel.getImportedName("java.util.ArrayList")%><<%=genFeature.getListItemTy‌​pe()%>>();

instead of:
<%=genFeature.getSafeName()%> = new <%=genClass.getListConstructor(genFeature)%>; 
```

# android - Android SocketIOClient 错误：“方案 'ws' 未注册

> ID：10667826
> 
> 赞同：0
> 
> 时间：2012-05-19T18:27:22.363
> 
> 标签：android, node.js, websocket, socket.io

我有一个 node.js/socket.io 服务器，我想创建一个 Android 应用程序来通过 websockets 进行通信。我找到了一个库：[https](https://github.com/koush/android-websockets) ://github.com/koush/android-websockets 但是当我尝试使用示例代码（Socket.IO Usage）时：

```
SocketIOClient client = new SocketIOClient(URI.create("ws://myIP:port"), new SocketIOClient.Handler() {
    String TAG = "WebSocket Handler";
    @Override
    public void onConnect() {
            Log.d(TAG, "Connected!");
    }

    @Override
    public void on(String event, JSONArray arguments) {
        Log.d(TAG, String.format("Got event %s: %s", event, arguments.toString()));
    }

    @Override
    public void onDisconnect(int code, String reason) {
        Log.d(TAG, String.format("Disconnected! Code: %d Reason: %s", code, reason));
    }

    @Override
    public void onError(Exception error) {
        Log.e(TAG, "Error!", error);
    }
});

client.connect(); 
```

（使用 IP 和端口，或 url:port）会发生以下错误：

```
Error!
05-19 18:03:56.065: E/WebSocket Handler(629): java.lang.IllegalStateException: Scheme 'ws' not registered.
05-19 18:03:56.065: E/WebSocket Handler(629):   at org.apache.http.conn.scheme.SchemeRegistry.getScheme(SchemeRegistry.java:80)
05-19 18:03:56.065: E/WebSocket Handler(629):   at org.apache.http.impl.conn.DefaultHttpRoutePlanner.determineRoute(DefaultHttpRoutePlanner.java:107)
05-19 18:03:56.065: E/WebSocket Handler(629):   at org.apache.http.impl.client.DefaultRequestDirector.determineRoute(DefaultRequestDirector.java:565)
05-19 18:03:56.065: E/WebSocket Handler(629):   at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:292)
05-19 18:03:56.065: E/WebSocket Handler(629):   at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
05-19 18:03:56.065: E/WebSocket Handler(629):   at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
05-19 18:03:56.065: E/WebSocket Handler(629):   at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
05-19 18:03:56.065: E/WebSocket Handler(629):   at android.net.http.AndroidHttpClient.execute(AndroidHttpClient.java:243)
05-19 18:03:56.065: E/WebSocket Handler(629):   at com.codebutler.android_websockets.SocketIOClient.downloadUriAsString(SocketIOClient.java:48)
05-19 18:03:56.065: E/WebSocket Handler(629):   at com.codebutler.android_websockets.SocketIOClient.access$1(SocketIOClient.java:45)
05-19 18:03:56.065: E/WebSocket Handler(629):   at com.codebutler.android_websockets.SocketIOClient$3.run(SocketIOClient.java:200) 
```

我找不到解决方案

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T05:11:10.127

[https://github.com/koush/android-websockets](https://github.com/koush/android-websockets)的自述文件中的示例代码有点误导。更改`ws://`为`http://`，它应该可以正常工作。

同样由于某种原因，它在模拟器中无法正常工作。我在设备中尝试过，在进行上述更改后它似乎可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T01:17:27.807

你知道你的 node.js/socket.io 服务器是否设置了一个 http 监听器吗？我已经从 android 连接到 node.js/socket.io，但不幸的是我没有设置服务器，所以我无法为您提供完整的详细信息。我确实知道我们的 node.js 文件是使用 http 侦听器设置的，它使客户端能够通过 http 而不是 ws 进行连接。

如果您的服务器设置了 http 侦听器，您可以尝试使用我使用的不同的 android socket.io 库（[https://github.com/Gottox/socket.io-java-client](https://github.com/Gottox/socket.io-java-client)）并且效果很好。

# android - Android 2.1：AlertDialog 中的 BadTokenException 错误

> ID：10667831
> 
> 赞同：0
> 
> 时间：2012-05-19T18:27:33.693
> 
> 标签：android, broadcastreceiver

我有一个适用于短信的 Android 应用程序。当新的短信到达 Android 时，将从我的班级调用代码，即“NEW_SMS”广播接收器。如您所知，我的“sms_recieved_class”中的“onReceive”方法获取了一些上下文（来自系统）。使用意图，我的 sms 广播接收器调用另一个对 sms 数据库执行某些操作的类（最初通过“onReceive”从系统获得的上下文用于通过发送另一个广播来调用来自其他类的代码）。

另一个类与 sms 数据库一起使用，它也是一个广播接收器。它对上面提到的我的班级发送的广播做出反应。如果“弄乱”数据库出错，应用程序应显示自定义错误对话框。现在，问题来了！

自定义错误对话框代码：

```
public static void setUpError(Context act,String ERRMSG, StackTraceElement[] stack) { 
```

AlertDialog.Builder builder = new AlertDialog.Builder(act);

```
 final StackTraceElement[] finStack = stack;
    final String errMsg=ERRMSG;
    final Context ctxFin = act;

    builder.setMessage(poruka)...setting up alert buttons...

    AlertDialog alert = builder.create();
    alert.show(); 
```

}

错误在“alert.show()”行出现。我很困惑，因为当我尝试在我的应用程序可见时显示此对话框（并将“someAct.this”作为上下文传递）一切都很好。当我尝试使用取自“broadcastReceiver.onReceive”（由系统调用）的上下文显示警报时，出现错误。我做错了什么？

PS在STOVF上搜索答案后，每次解决方案都是“不要使用getApplicationContext（）”。由于电话收到新消息时调用的两个课程都不是“活动”类型，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T18:38:06.090

首先，Dialog 需要屏幕上的活动（因此没有任何打开的活动，您无法显示 Dialog）。您可以做的是创建看起来像 Dialog 的活动。从 SO检查[这个问题。](https://stackoverflow.com/questions/2147144/android-how-to-display-a-dialog-over-a-native-screen)

# javascript - 在 Internet Explorer 中向所有 HTML 元素和文档对象添加方法

> ID：10667832
> 
> 赞同：0
> 
> 时间：2012-05-19T18:27:40.890
> 
> 标签：javascript, internet-explorer, dom, internet-explorer-9

我想为所有 HTML 元素和 JavaScript 中的文档对象添加一个方法。经过一番谷歌搜索，我找到了[http://krook.org/jsdom/](http://krook.org/jsdom/)。我得出的结论是，在`Node`类中添加一个方法就可以了，而且在 Firefox 和 Chrome 中确实有效。

下面是我所做的。

```
<script>
Node.prototype.foo=function(selector){
    alert('succes');
}
document.foo();
document.getElementById("foo").foo();
</script> 
```

在 Internet Explorer 中，它会导致错误，因为`Node`未定义。有谁知道如何在 Internet Explorer 中执行此操作？

哦，我也在使用 Internet Explorer 9。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T18:31:53.393

IE DOM 不允许 JavaScript 访问构造函数以进行原型设计，因此 IE DOM 本身不支持元素/节点原型设计（IE 10 可以正常运行您的代码，正如我怀疑 IE 0 一样）。

你想达到什么目的？有[反对做 DOM 扩展的论据](http://perfectionkills.com/whats-wrong-with-extending-the-dom/)——可能有另一种方法来做。

# opencv - 试图理解仿射变换

> ID：10667834
> 
> 赞同：9
> 
> 时间：2012-05-19T18:27:46.320
> 
> 标签：opencv

我正在使用 OpenCV 中的仿射变换，我无法直观地理解它的工作原理，更具体地说，我如何指定映射矩阵的参数，以便获得特定的所需结果。

为了设置这个问题，我使用的过程是首先定义一个扭曲矩阵，然后进行变换。

在 OpenCV 中，这两个例程是（我在 Bradski & Kaehler 的优秀书籍 OpenCV 中使用了一个示例）：

```
cvGetAffineTransorm(srcTri, dstTri, warp_matrix);
cvWarpAffine(src, dst, warp_mat); 
```

定义warp矩阵，`srcTri`定义`dstTri`为：

```
CvPoint2D32f srcTri[3], dstTri[3]; 
```

`srcTri[3]`填充如下：

```
srcTri[0].x = 0;
srcTri[0].y = 0;
srcTri[1].x = src->width - 1;
srcTri[1].y = 0;
srcTri[2].x = 0;
srcTri[2].y = src->height -1; 
```

这本质上是图像的左上点、右上点和左下点作为矩阵的起点。这部分对我来说很有意义。

但是 just 的值`dstTri[3]`令人困惑，至少，当我改变一个点时，我没有得到我期望的结果。

例如，如果我随后将以下内容用于`dstTri[3]`：

```
dstTri[0].x = 0;
dstTri[0].y = 0;
dstTri[1].x = src->width - 1;
dstTri[1].y = 0;
dstTri[2].x = 0;
dstTri[2].y = 100; 
```

src 和 dst 点之间的唯一区别似乎是左下点向右移动了 100 个像素。直觉上，我觉得图像的底部应该向右移动 100 像素，但事实并非如此。

`dstTri[3]`此外，如果我使用与for完全相同的值`srcTri[3]`，我会认为转换会产生完全相同的图像——但事实并非如此。

显然，我不明白这里发生了什么。那么，从`srcTri[]`到的映射`dstTri[]`代表什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-21T06:27:36.277

这是仿射变换的数学解释：这是一个大小为 3x3 的矩阵，它在 2D 向量上应用了愚蠢的变换：X 轴缩放、Y 轴缩放、旋转、倾斜、x 轴平移和 y。这些是 6 个转换，因此您的 3x3 矩阵中有六个元素。底行始终为 [0 0 1]。为什么？因为最下面一行代表x轴和y轴的一个透视变换，而仿射变换不包括透视变换。（如果要应用透视变形，请使用单应性：也是 3x3 矩阵）

您插入仿射矩阵的 6 个值与它所做的 6 个变换之间有什么关系？让我们看看这个 3x3 矩阵

```
e*Zx*cos(a), -q1*sin(a)  ,  dx,
e*q2*sin(a),     Z y*cos(a),  dy,
0       ,            0  ,   1 
```

1.  dx 和
2.  dy 元素在 x 和 y 轴上进行平移（只需左右移动图片，上下移动）。
3.  Zx 是您在 X 轴上应用于图像的相对比例（缩放）。
4.  Zy 与上述 y 轴相同
5.  a 是图像的旋转角度。这很棘手，因为当您想按“a”旋转时，您必须在矩阵的 4 个不同位置插入 sin()、cos()。
6.  'q' 是偏斜参数。它很少使用。它会导致您的图像偏斜（q1 导致 y 轴影响 x 轴，q2 导致 x 轴影响 y 轴）
7.  奖励：'e' 参数实际上不是转换。它的值可以是 1,-1。如果它是 1 则什么都不会发生，但如果它是 -1 则图像会水平翻转。您也可以使用它来垂直翻转图像，但是这种类型的转换很少使用。

## 非常重要的注意事项！！！！！！

上面的解释是数学的。它假设您将矩阵乘以右侧的列向量。据我记得，Matlab 使用反向乘法（从左边开始的行向量），所以你需要转置这个矩阵。我很确定 openCV 使用正则乘法，但您需要检查它。只需输入平移矩阵（x 移动 10 像素，y 移动 1）。

```
1,0,10
0,1,1
0,0,1 
```

如果您看到正常的转变，则一切正常，但是如果出现狗屎，则将矩阵转置为：

```
1,0,0
0,1,0
10,1,1 
```

# ruby-on-rails - Rails 3：嵌套 fields_for 的唯一性验证 - 第 2 部分

> ID：10667835
> 
> 赞同：5
> 
> 时间：2012-05-19T18:27:47.560
> 
> 标签：ruby-on-rails, ruby

我是编码新手-并且没有足够的声誉来评论这个答案： [Rails 3: Uniqueness validation for nested fields_for](https://stackoverflow.com/questions/5482777/rails-3-uniqueness-validation-for-nested-fields-for/10641150#10641150)

所以我将这个问题创建为“第 2 部分”:)

我是一名网页设计师，但对学习编码很感兴趣，从我的日子开始就一直坚持这一点。

```
# app/validators/nested_attributes_uniqueness_validator.rb   
class NestedAttributesUniquenessValidator < ActiveModel::EachValidator
        record.errors[attribute] << "Products names must be unique" unless value.map(&:name).uniq.size == value.size
      end
end 
```

上面带有“ActiveModel::EachValidator”的代码会抛出这个错误：

““区域 1”的未定义方法 `map'：字符串”

* * *

```
# app/validators/nested_attributes_uniqueness_validator.rb   
class NestedAttributesUniquenessValidator < ActiveModel::Validator
    record.errors[attribute] << "Products names must be unique" unless value.map(&:name).uniq.size == value.size
  end
end 
```

上面带有“ActiveModel::Validator”的代码会抛出这个错误：

“子类必须实现 validate(record) 方法。”

* * *

这是模型文件：

```
class Area < ActiveRecord::Base

  validates :name,
            :presence => true,
            :uniqueness => {:scope => :city_id},
            :nested_attributes_uniqueness => {:field => :name}

  belongs_to :city

end 
```

* * *

你可以在这里找到完整的代码： [https ://github.com/syed-haroon/rose](https://github.com/syed-haroon/rose)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T04:27:23.130

@Syed：我认为您正在尝试这样做。否则回复我的评论。

```
# app/models/city.rb
class City < ActiveRecord::Base
  has_many :areas
  validates :areas, :area_name_uniqueness => true
end

# app/models/area.rb
class Area < ActiveRecord::Base
  validates_presence_of :name
  validates_uniqueness_of :name  
end

# config/initializers/area_name_uniqueness_validator.rb
class AreaNameUniquenessValidator < ActiveModel::Validator
  def validate_each(record, attribute, value)
    record.errors[attribute] << "Area names must be unique" unless value.map(&:name).uniq.size == value.size
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T02:29:49.690

我在这里找到了答案：

[https://rails.lighthouseapp.com/projects/8994/tickets/2160-nested_attributes-validates_uniqueness_of-fails](https://rails.lighthouseapp.com/projects/8994/tickets/2160-nested_attributes-validates_uniqueness_of-fails)

&

[validates_uniqueness_of 在被破坏的嵌套模型导轨中](https://stackoverflow.com/questions/2772236/validates-uniqueness-of-in-nested-model-rails)

这是针对rails 2的，我需要在这里修改一行： `add_to_base`已被弃用并且在3.1中不可用。采用`self.errors.add(:base, message)`

# php - 使用 XPath 远程抓取页面并获取图像的最相关标题或描述

> ID：10667836
> 
> 赞同：5
> 
> 时间：2012-05-19T18:28:02.040
> 
> 标签：php, facebook, xpath, html-parsing, scrape

我正在做的事情本质上与 Tweet 按钮或 Facebook Share/Like 按钮所做的事情是一样的，那就是为一段数据抓取一个页面和最相关的标题。我能想到的最好的例子是当你在一个有很多文章的网站的首页上，然后你点击了 Facebook 的 Like 按钮。然后，它将获取与（最近的）Like 按钮相关的帖子的正确信息。有些网站有 Open Graph 标签，但有些没有，它仍然有效。

由于这是远程完成的，我只能控制我想要定位的数据。在这种情况下，数据是图像。而不是只检索`<title>`页面的，我希望以某种方式从每个图像的起点反向遍历 dom，并找到最近的“标题”。问题是并非所有标题都出现在图像之前。但是，在这种情况下，图像出现在标题之后的机会似乎相当高。话虽如此，我希望让它几乎适用于任何网站。

想法：

*   找到图像的“容器”，然后使用第一块文本。
*   在包含某些类（“description”、“title”）或元素（h1、h2、h3、h4）的元素中查找文本块。

标题备份：

*   使用开放图标签
*   仅使用`<title>`
*   仅使用 ALT 标签
*   使用 META 标签

摘要：提取图像不是问题，而是如何为它们获取相关标题。

**问题：**您将如何为每张图片获取相关标题？也许使用 DomDocument 或 XPath？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T18:46:22.920

您的方法似乎足够好，我只会给某些标签/属性一个权重，并使用 XPath 查询循环遍历它们，直到找到退出的东西并且它不是无效的。就像是：

```
i = 0

while (//img[i][@src])
  if (//img[i][@alt])
    return alt
  else if (//img[i][@description])
    return description
  else if (//img[i]/../p[0])
    return p
  else
    return (//title)

  i++ 
```

* * *

一个简单的 XPath 示例（[从我的框架移植的](https://github.com/alixaxel/phunction/blob/c6c380e7eb5ec14d153b2942c743271364d355ce/phunction/HTML.php#L36)函数）：

```
function ph_DOM($html, $xpath = null)
{
    if (is_object($html) === true)
    {
        if (isset($xpath) === true)
        {
            $html = $html->xpath($xpath);
        }

        return $html;
    }

    else if (is_string($html) === true)
    {
        $dom = new DOMDocument();

        if (libxml_use_internal_errors(true) === true)
        {
            libxml_clear_errors();
        }

        if ($dom->loadHTML(ph()->Text->Unicode->mb_html_entities($html)) === true)
        {
            return ph_DOM(simplexml_import_dom($dom), $xpath);
        }
    }

    return false;
} 
```

以及实际用法：

```
$html = file_get_contents('http://en.wikipedia.org/wiki/Photography');

print_r(ph_DOM($html, '//img')); // gets all images
print_r(ph_DOM($html, '//img[@src]')); // gets all images that have a src
print_r(ph_DOM($html, '//img[@src]/..')); // gets all images that have a src and their parent element
print_r(ph_DOM($html, '//img[@src]/../..')); // and so on...
print_r(ph_DOM($html, '//title')); // get the title of the page 
```

# c++ - C++ MFC 调试断言失败！在静态 MFC 中

> ID：10667837
> 
> 赞同：0
> 
> 时间：2012-05-19T18:28:02.367
> 
> 标签：c++, debugging, mfc, assertion

```
Debug Assertion Failed!
File: f:\dd\vctools\vc7libs\ship\atlmfc\src\mfc\objcore.cpp Line: 40 
```

当我尝试使用调试配置 -`Use MFC in a Static Library`和`Dynamic Library (.dll)`. 在发布配置上一切正常，但我无法调试 dll。女士 VS 2010

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T13:21:32.380

它不会在发布版本中发生，因为代码使用了在发布版本中没有意义的 ASSERT。ASSERT 是一个调试工具。

您可能会感到惊讶，但 MFC 不使用 Windows 模式对话框。调用 Create 或 DoModal 创建 windows 无模式对话框。MFC 通过禁用父窗口（如果有）来实现模态，并为对话框提供类似于应用程序消息循环的自己的消息处理循环。

这就是为什么无论使用 Create 还是 DoModal 都具有相同的结果。

它甚至在显示对话框之前发生吗？

您在帖子中显示的错误表明您在应用程序代码的某处尝试使用尚未实例化且在对话框初始化期间为 NULL 的对象。似乎它未能通过 IsKindOf 检查。

是否可以压缩您的项目并将其发布给我们进行调试？

# machine-learning - 机器学习：我应该选择分类还是推荐？

> ID：10667839
> 
> 赞同：0
> 
> 时间：2012-05-19T18:28:39.097
> 
> 标签：machine-learning, recommendation-engine, classification

我不知道我应该如何解决这个问题：

我有一个数据集。用户可能是也可能不是受资助计划的一部分。我想使用机器学习来推断不属于该计划的用户容易受到某些条件的影响，例如 1,2,3 和 4。计划中的用户容易受到 1,2 和 4 的影响。因此可以推断出如果您是该计划的一部分，您将不会受到条件 3 的影响。

我还有第二个相关问题。在资助计划中，用户可以有两个计划（费用不同）。我想看看那些参加更便宜计划的人是否比参加更昂贵计划的人更容易受到更多条件的影响。

任何人都可以帮助我了解这是推荐问题还是分类问题以及我应该查看哪些特定算法？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T20:44:49.397

两者都不。这是一个统计问题。您的数据集是完整的，并且您没有提到任何需要预测未来主题或方案的属性，因此训练分类器或推荐器似乎无法满足其通常的目标。

您可以使用一个人的条件作为特征，将他们的方案统计作为目标，使用 SVM 对它们进行分类，然后使用分类性能/准确度作为类可分离性的衡量标准。你也可以考虑集群。然而，t 检验会做同样的事情，并且是一个更被接受的工具来证明这样的声明的有效性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-20T13:53:07.020

看起来您正在尝试构建一个系统，将用户分类为已资助或未资助，如果未资助，则说明他们未资助的原因。

如果是这种情况，您需要的是一个可解释的机器学习分类器，即可以将分类器做出某个决定的原因传达给用户。您可能想查看决策树和（在较小程度上）RandomForest 和 Gradient Boosted Trees。

# java - 是否可以在浏览器中以编程方式签署证书

> ID：10667840
> 
> 赞同：1
> 
> 时间：2012-05-19T18:28:45.260
> 
> 标签：java, javascript, security, certificate

是否可以在没有用户干预的情况下使用 java 或 javascript 在浏览器中以编程方式使用客户端证书签署文档？黑客可以使用它来冒充用户吗？

如果不是，这是否意味着通过委托给服务器来让客户端签署文档比在他自己的机器上签名更不安全？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-04T08:18:10.140

是的，通过使用 Javascript。称为“WebCrypto”，它的支持取决于浏览器。例如，这里列出了 Chrome 对 WebCrypto 功能的支持：

[https://www.chromium.org/blink/webcrypto](https://www.chromium.org/blink/webcrypto)

请花时间纠正问题。它应该是“是否可以在浏览器中以编程方式签名”。这是因为**“签署证书”**的密码动作是真实存在的，用来证明证书是真实的，而其私钥又可以用来**“签署文件”**证明文件是真实的，形成信任链.

# android - 如何使用android的SAX解析器解析html嵌套标签

> ID：10667844
> 
> 赞同：0
> 
> 时间：2012-05-19T18:29:09.447
> 
> 标签：android, xml-parsing, sax

我的 xml 中有这个标签：

```
<description><![CDATA[<div><b>Location:</b> PUMBA Auditorium - University of Pune</div>
<div><b>Start Time:</b> 5/15/2012 11:00 AM</div>
<div><b>End Time:</b> 5/15/2012 2:00 PM</div>
<div><b>Description:</b> <div>General B. C. Joshi Memorial Lecture 2012- Perspective on War in the 21st Century - By Lt. Gen. A. K. Singh</div></div>
<div><b>Attachments:</b> <a href="http://uopnews.unipune.ac.in/Lists/Calendar/Attachments/14/bcjoshi2012[1].pdf">http://uopnews.unipune.ac.in/Lists/Calendar/Attachments/14/bcjoshi2012[1].pdf</a><br><a href=""></a></div>
]]></description> 
```

我需要删除“ `<div><b>`” n 只想显示内容。我应该为此做些什么。？请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T20:12:10.053

你基本上必须再次解析。包含在`<![CDATA[` 和之间的所有内容都`]]>`被解析器视为字符数据（文本）。假设此文本是有效的 xhtml，您可以将字符串转换为 a`ByteArrayInputStream`并将其提供给解析器。

Android 还为`Html`该类提供了`Html.fromHtml(String)`接收字符串并返回没有 Html 标记并相应格式化的新字符串的方法，因此您可以将 sax 解析的字符串提供给该方法。

# objective-c - Objective-C NSUserDefaults 缓存阻止另一个应用程序准确读取更改

> ID：10667848
> 
> 赞同：2
> 
> 时间：2012-05-19T18:29:33.043
> 
> 标签：objective-c, nsuserdefaults, preferences

我有一个设置首选项的应用程序。它使用这些首选项，另一个应用程序也是如此。当我在第二个应用程序中使用以下代码时，它会正确读取一次首选项。

```
 NSUserDefaults* settings = [NSUserDefaults standardUserDefaults];
    [settings addSuiteNamed:@"com.WVS.Wrestling-Tools"];
    [settings synchronize]; // this just a shot in the dark.. didn't work

    [self setScoreboardIndex:[settings integerForKey:@"matName"]]; 
```

在随后调用相同代码时，我得到 [settings integerForKey:@"matName"] 始终是第一次读取的值。

在第一个应用程序中，我使用共享用户默认控制器来读取/写入首选项。不确定这对这个问题是否重要。

如何强制第二个应用程序始终获取最新值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T18:35:54.810

您应该能够调用`+[NSUserDefaults resetStandardUserDefaults]`第二个程序以强制`+[NSUserDefaults standardUserDefaults]`创建一个新实例并在下次调用它时从磁盘重新加载值。调用`-synchronize`第*一个*程序是确保将更新的默认值写入磁盘的正确方法（我不确定 NSUserDefaultsController 在这方面的行为）。

请注意，`+[NSUserDefaults resetStandardUserDefaults]`如果您经常调用standardUserDefaults 时调用可能会导致性能下降，因为这可能意味着每次读取都会命中磁盘。

# c - C - 为函数内的双指针赋值

> ID：10667850
> 
> 赞同：2
> 
> 时间：2012-05-19T18:29:38.097
> 
> 标签：c, pointers

我试图理解 C，特别是双指针，我遇到了这个问题。我知道对于单个指针（删除 for 循环等），这个概念会起作用，但我似乎在定位的评论中遇到了段错误。

有人可以解释为什么我会收到这个错误吗？我有一种预感，在传递 myArgs 的地址之前，我需要为其分配一些内存，但是由于我只是在做一个浅拷贝，我还需要分配内存吗？

```
void readArgs(int argc, char *argv[], char ***myArgs) {
   int i;
   for(i = 0; i < argc; i++) {
      /* crashes here @ i = 0 */
      *myArgs[i] = argv[i];
   }
}

int main(int argc, char *argv[]) {
   char **myArgs;
   int i;

   readArgs(argc, argv, &myArgs);
   for(i = 0; i < argc; i++)
      printf("arg[%d]: %s\n", i, myArgs[i]);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T18:32:00.637

你得到一个段错误，因为`myArgs`未初始化。您确实应该使用`malloc`. 你不是在做一个浅拷贝；你正在复制一个指针数组。

也就是说，三重指针是 C 中的一种代码味道。你永远不需要超过`**`.

# java - 获取管道开始时存在的进程的pid

> ID：10667851
> 
> 赞同：0
> 
> 时间：2012-05-19T18:30:02.530
> 
> 标签：java, shell, pipe

我有一个运行 Java 进程 p1 的 shell 脚本，还有一个从 p1 获取输入的非 Java 进程 p2。

如何获取 p1 的进程 ID？

我有一个无法预测的 shell 脚本（有时它有效，有时它不）。我浏览了网络，但没有一个答案似乎是完美的。

我的脚本：

```
nohup sh -c "exec java p1 | p2 2>&1" &
$pid=`echo $!`
my_pid=exec ps -eo "%p %c %P" | awk -v p=$pid 'p==$3{print $1 $2}' | grep java | sed -e 's/java//'

echo "my_pid $my_pid" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T09:43:42.250

这是我链接到的问题的[mmd 答案](https://stackoverflow.com/a/5735391/116639)的简化版本：

```
{ java p1 & echo $! >&2; } | p2 2>&1 & 
```

这会在标准错误上打印 p1 的 PID。您还会从 shell 收到一条消息，告诉您 echo 命令已完成，但您可以忽略它。

# javascript - 表单提交 - IE 访问被拒绝 - 相同的域

> ID：10667856
> 
> 赞同：16
> 
> 时间：2012-05-19T18:31:29.623
> 
> 标签：javascript, jquery, internet-explorer

```
SCRIPT5: Access denied 
jquery.min.js, line 3 char 3769 
```

我通过仅在 IE 中提交的简单表单收到此错误

```
 $("#icon_upl").click(function(){ //icon_upl is button which open dialog
  $("[name=icon]").click();
});

$("[name=icon]").change(function() { //icon is hidden file input
  $("[name=upload_icon]").submit();  
}); 
```

我将该表单发送到位于同一域的隐藏 iframe。

```
<iframe id="upload_target" name="upload_target" src="#" style="width:0;height:0;display:none;"></iframe>
<form name="upload_icon" action="upload_icon.php" method="post" enctype="multipart/form-data" target="upload_target"> 
```

提交输入没有帮助

我不明白，因为如果我尝试发送另一个可以正常工作的表格

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-29T08:18:48.533

如果您通过 JS 触发选择文件对话框，那么您在提交表单时会收到拒绝访问错误。IE 不允许这样做。您必须要求用户直接单击输入类型文件

更多细节在这里 [https://github.com/valums/file-uploader/issues/118#issuecomment-1387612](https://github.com/valums/file-uploader/issues/118#issuecomment-1387612)

[您可以尝试通过http://www.quirksmode.org/dom/inputfile.html](http://www.quirksmode.org/dom/inputfile.html)设置输入类型文件的样式

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-01-11T01:27:12.550

我有类似的 HTML 和 jQuery 代码并遇到了同样的问题（即“访问被拒绝。”Internet Explorer 中的 JavaScript 错误），我设法通过从[这个](https://stackoverflow.com/a/13994638/192886)（很好的）答案中获取指针来解决这个问题。

在你的例子中：

1.  将 #icon_upl `<button>`/更改`<input>`为 a并通过将其上的属性设置为指向您的元素来`<label>`使用标签的辅助功能。这有效地使您的事件处理程序变得多余。但是，在 Firefox 中单击似乎不会触发文件对话框，因此如果浏览器是基于 Mozilla 的，则您需要执行浏览器测试并且仍然拥有事件处理程序。`for``<input name="icon" type="file">`

    `click()``<label>``<input>``click()`

2.  为了让它工作，您需要确保您的文件`<input>`没有被隐藏，方法是将其位置设置为绝对位置并将其移出屏幕。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-03-01T02:37:50.637

我找到了另一种方法来做到这一点......我进行了测试，我发现它在点击提交按钮 2 或 3 次后工作。

我尝试了一些解决方案，但我自己发现了这个。这仅适用于即。

请注意，我不使用 jquery 提交方法，因为它们会处理错误。

```
function Submit() {
    try {
        $('#FormName')[0].submit();
    } catch (e) {
        setTimeout(function () { Submit(); }, 50);
    }
} 
```

附言。对不起我的英语不好，这不是我的第一语言。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-19T18:37:20.950

您可以在隐藏的输入字段上触发直接事件，因为您无法捕捉到它。可以将事件与它绑定并通过另一个触发它。

例如：

```
// binding event to hidden field
$('input[name=icon]:hidden').on('click', function() {
  alert('Hidden triggered');
});

// some button/ or else
// some_target is any valid selector you can use
$('some_target').on('click', function() {
  $('input[name=icon]:hidden').click(); // triggering click on hidden field will alert 'Hidden triggered'
}); 
```

*注意：但是从您的帖子中不清楚您是否已经有类似的东西。*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-20T16:00:28.010

这似乎是不可能的

> 1.  您无法读取元素的“值”，因为它包含文件名。
> 2.  您无法通过 JS 启动文件选择菜单。
> 3.  您不能通过 JS 触发文件上传器控件的提交。

IE8 上的[访问被拒绝错误](https://stackoverflow.com/questions/3935001/getting-access-is-denied-error-on-ie8/6376654#6376654)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2021-05-28T12:26:21.347

```
 //Access Denied Issues is usually for IE.

   var lblTrigger= document.getElementById('lblTrigger');
   lblTrigger.onclick = function(){
         var form = document.getElementById('form1');
         form.fxSubmit();
   }

    var form = document.getElementById('form1'); //form with upload control
    var upctrl = document.getElementById('file_1'); //file upload control

    form.fxSubmit = function() {
        var upctrl = document.getElementById('file_1'); //file upload control
        if (upctrl.files){
            var form = document.getElementById('form1');
            form.submit();
        }else{              
            document.body.submit = true;
        }
   }

    function fxSubmit(){            
        if (document.body.submit){
            var form = document.getElementById('form1');
            setTimeout(function(){fxSubmit()},50);
            form.submit();
            return;
        }
        setTimeout(function(){fxSubmit()},1000);
    }

    setTimeout(function(){fxSubmit()},1000); 
```

# version-control - 没有混乱的版本控制

> ID：10667858
> 
> 赞同：1
> 
> 时间：2012-05-19T18:31:45.687
> 
> 标签：version-control, versioning

我个人不喜欢客户端副本中的 .gitignore 或 .svn。我想免费用于业余爱好项目的最好的基于服务器/客户端的无杂乱版本控制软件是什么。因为我还想从客户端存档我的目录结构（在这里我假设我可以管理这个版本控制的噩梦。）

整洁：将版本信息放在服务器上或可配置的单独目录中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T18:37:46.180

[Perforce](http://www.perforce.com)没有杂乱。它现在对多达 20 个用户免费。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T10:49:59.337

TFS "11" 现在也有 .tfignore 文件的概念。[TFS Express 和 TFS 预览版 ( http://tfspreview.com](http://tfspreview.com) )目前完全免费。

您不必使用 .tfignore 文件，但如果您不需要它们...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T18:34:26.847

如果您使用的是 Windows，则新的 (>=1.7) TortoiseSVN 不再具有 .svn 文件夹。它使用的是数据库，因此您的目录中没有“混乱”。

# c - 向量的分配：静态与动态

> ID：10667864
> 
> 赞同：1
> 
> 时间：2012-05-19T18:32:26.897
> 
> 标签：c, arrays, allocation

我在这里写了一些C代码，遇到了一个问题：

我有一个自定义类型的数组。我想为这个数组设置一个大小：

```
typedef struct reg Reg;
Reg myArray[958279]; 
```

当我运行我的程序时出现分段错误。

然后我尝试使用 malloc，它动态分配存储空间，令我惊讶的是它起作用了：

```
Reg *myArray = (Reg*)malloc(sizeof(Reg)*958279); 
```

所以我假设静态表单的数组声明必须有一些大小限制。

在某处有没有提到这个事实？还是我对我的问题完全错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T18:35:42.277

您的第一段代码中的数组大概是在堆栈上分配的并且不适合。堆栈通常具有固定大小，您不得在堆栈上分配大对象。正如您所发现的，解决方案是从堆中分配。

# c++ - 向量的 ArgMin 在 C++ 中？

> ID：10667867
> 
> 赞同：13
> 
> 时间：2012-05-19T18:32:49.577
> 
> 标签：c++, collections, stl, vector

我想在 C++ 中找到最小值的**索引**`std::vector<double>`。这是一个有点冗长的实现：

```
//find index of smallest value in the vector
int argMin(std::vector<double> vec)
{
    std::vector<double>::iterator mins = std::min_element(vec.begin(), vec.end()); //returns all mins
    double min = mins[0]; //select the zeroth min if multiple mins exist
    for(int i=0; i < vec.size(); i++)
    {
        //Note: could use fabs( (min - vec[i]) < 0.01) if worried about floating-point precision
        if(vec[i] == min)    
            return i;
    }
    return -1;
} 
```

（如果您发现上述实现中有任何错误，请告诉我。我对其进行了测试，但我的测试并不详尽。）

我认为上述实现可能是轮子改造；如果可能的话，我想使用内置代码。为此，是否有对 STL 函数的单行调用？或者，有人可以建议一个更简洁的实现吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-19T18:36:07.650

您可以使用标准`min_element`功能：

```
std::min_element( vec.begin(), vec.end() ); 
```

它返回一个迭代器，指向迭代器范围内的最小元素。由于您想要一个索引并且您正在使用`vector`s，因此您可以从中减去生成的迭代器`vec.begin()`以获得这样的索引。

如果您需要自定义比较，则函数或函数对象还有一个额外的重载。

# c++ - 识别访问 Internet 的进程

> ID：10667869
> 
> 赞同：1
> 
> 时间：2012-05-19T18:32:57.417
> 
> 标签：c++, windows, winapi, networking, tcp

我需要编写一个程序（最好是 C/C++）来识别连接到互联网的正在运行的进程，以及它们试图访问的域名/URL。

（如果进程访问域名，例如 google.com，我需要能够识别该域名，而不是解析的 IP）。

该程序需要在 Windows XP、Vista、7 上运行。

根据我的研究，winpcap 无法识别该进程。我已经搜索过类似主题的stackoverflow，但没有找到令人满意的答案......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T04:30:06.963

谷歌搜索工具，如`tcpdump`, `tcptrace`, `tcpsplit`, . 您将能够查看他们的源代码，了解如何捕获正在进行的 TCP/IP 流并对其进行分析`libpCap``wireShark`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T04:18:47.137

您可以使用 Detours 来挂钩 DNS，这是一个项目示例：[CodeProject](http://www.codeproject.com/Articles/16194/Intercept-and-Rewrite-DNS-Requests-Using-Regular-E)和这里的[Detours 页面](http://research.microsoft.com/en-us/projects/detours/)

# c++ - 速度参考与值

> ID：10667871
> 
> 赞同：3
> 
> 时间：2012-05-19T18:33:09.727
> 
> 标签：c++, reference, pass-by-reference

我有以下问题。我尝试了按值和按引用进行赋值，如[here](http://cpp-next.com/archive/2009/08/want-speed-pass-by-value/)所述，赋值ba值应该更快，尽管当我尝试我的代码时，它给了我一个相当复杂的结果，因为有时assign1更快，有时assign2。

```
 class MyAddress{
    char *name;
    long int number;
    char *street;
    char *town;
    char state[2];
    long zip;
    std::vector<int> v_int;
public:
    MyAddress(int i){
        v_int.resize(1000000);
        std::fill(v_int.begin(),v_int.end(),i);
    }
    MyAddress& assign1(MyAddress const& x)
    { 
        MyAddress tmp(x);          // copy construction of tmp does the hard work
        std::swap(*this, tmp);  // trade our resources for tmp's
        return *this;      // our (old) resources get destroyed with tmp 
    }
    MyAddress& assign2(MyAddress x)//x is a copy of the source; hard work already done
    { 
        std::swap(*this, x);  // trade our resources for x's
        return *this;      // our (old) resources get destroyed with x 
    }
}; 
```

主要的：

```
for(int i=0;i<10;i++){
        {
            MyAddress a1(1);
            MyAddress a2(2);
            MyAddress a3(3);
            clock_t tstart=std::clock();
            a1.assign1(a2);
            a1.assign1(a3);
            clock_t tend=std::clock();
            float time_elapsed=((float)tend-(float)tstart);
            std::cout<<std::fixed<<"\nassign1 time elapsed : "<<time_elapsed/CLOCKS_PER_SEC;
        }
        {
            MyAddress a1(1);
            MyAddress a2(2);
            MyAddress a3(3);
            clock_t tstart=std::clock();
            a1.assign2(a2);
            a1.assign2(a3);
            clock_t tend=std::clock();
            float time_elapsed=((float)tend-(float)tstart);
            std::cout<<"\nassign2 time elapsed : "<<time_elapsed/CLOCKS_PER_SEC;
        }
    std::cout<<std::endl;
    } 
```

分配 1 已用时间：0.093000 分配 2 已用时间：0.094000

分配 1 已用时间：0.095000 分配 2 已用时间：0.092000

分配 1 已用时间：0.109000 分配 2 已用时间：0.093000

分配 1 已用时间：0.099000 分配 2 已用时间：0.094000

分配 1 已用时间：0.099000 分配 2 已用时间：0.101000

分配 1 已用时间：0.096000 分配 2 已用时间：0.120000

分配 1 已用时间：0.098000 分配 2 已用时间：0.105000

分配 1 已用时间：0.113000 分配 2 已用时间：0.108000

分配 1 已用时间：0.111000 分配 2 已用时间：0.103000

分配 1 已用时间：0.106000 分配 2 已用时间：0.106000

我对测试代码进行了一些更改：现在我执行 1000 次迭代而不是 10 次。结果仍然喜忧参半：对我来说特别奇怪的是，有时第一次分配更快，但有时第二次：

```
1)
assign1 time elapsed : 111.228996
assign2 time elapsed : 112.097000
2)
assign1 time elapsed : 127.087997
assign2 time elapsed : 126.691002 
```

你怎么解释这个？对我来说，在这种情况下，结果似乎与值或参考方法无关。

* * *

最后我使用了类似的东西，因为如果我理解正确，我认为这是[这里建议的方法](http://cpp-next.com/archive/2009/08/want-speed-pass-by-value/)

```
MyAddress get_names(MyAddress& ref){return ref;} 
```

现在在assign2中是这样完成的：

```
a1.assign2(get_names(a2));
a1.assign2(get_names(a3)); 
```

事实上，assign2 的性能稍好一些，至少每次都是这样，不像以前那样互换。但这就是我应该看到的区别吗？

```
assign1 time elapsed : 127.087997
assign2 time elapsed : 126.691002

assign1 time elapsed : 137.634995
assign2 time elapsed : 136.054993 
```

最后：

```
assign1 time elapsed : 1404.224976
assign2 time elapsed : 1395.886963 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T18:39:02.937

您的两个分配功能基本相同。在一个中，您自己复制构建临时文件，而在另一个中，副本由编译器自动注入。

此外，对于您的测试，10 也不是一个足够大的因素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T18:38:11.480

对于一般情况，
引用赋值几乎总是优于值赋值。

原因 ：

1.  引用赋值不会在堆栈上创建新空间
2.  它不必将值从旧变量复制到新变量

对于大多数程序来说，上述开销可能是微不足道的。但是，const 和 reference 是一种通用的编程实践。

在当前程序中，
两种配置都将执行相同的操作。用大量迭代尝试你的程序，看看时间上的差异。

# actionscript-3 - 在 ActionScript 3 中进行颜色转换

> ID：10667872
> 
> 赞同：2
> 
> 时间：2012-05-19T18:33:25.303
> 
> 标签：actionscript-3, colors

我想对像棕褐色、黑白等这样的加载器对象（用于显示图片）做一些标准的颜色转换......

我目前正在使用这样的方法：

```
var colorTransformer:ColorTransform = selectedItm.transform.colorTransform; 
colorTransformer.redMultiplier = 1/6;
colorTransformer.greenMultiplier = 1/5;
colorTransformer.blueMultiplier = 1/3;
selectedItm.transform.colorTransform = colorTransformer; 
```

但我不知道如何获得棕褐色或黑白效果。有这样做的功能吗？如果没有，是否有某种包含“乘数”的数据库来获得效果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T20:55:58.550

您必须探索微调棕褐色过滤器：

```
var sepia = new flash.filters.ColorMatrixFilter();
sepia.matrix = [0.3930000066757202, 0.7689999938011169, 
0.1889999955892563, 0, 0, 0.3490000069141388, 
0.6859999895095825, 0.1679999977350235, 0, 0, 
0.2720000147819519, 0.5339999794960022, 
0.1309999972581863, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1]; 
```

在线颜色变换生成器可以帮助进行实时调整：

在线矩阵生成器： [http ://www.onebyonedesign.com/flash/matrixGenerator/](http://www.onebyonedesign.com/flash/matrixGenerator/)

![在此处输入图像描述](../Images/85930e388e27e969fd2419309abaefe8.png)

# caching - og:image 内容被识别为有效 URL，但无法检索图像

> ID：10667882
> 
> 赞同：0
> 
> 时间：2012-05-19T18:34:25.507
> 
> 标签：caching, facebook-opengraph

我们最近移动了服务器，从那以后我一直遇到这个问题。

我尝试在 Facebook Debug 工具中解析这个[url1](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.riotengine.in%2F2012%2F05%2F12%2Fyou-and-i-owe-this-man-carroll-shelby%2F)，并且使用 og:image 标签的内容检索到的缩略图显示正常，但是当我“喜欢”这个故事并且它出现在我的个人资料中时它不会显示。这是一个在切换服务器之前发布的故事。

现在，当我尝试在 Facebook 调试工具中解析此[url2](http://www.riotengine.in/2012/05/19/porsche-918-spyder-is-on-the-road/)时，未检索到缩略图，并且在以前的情况下，当我喜欢这个故事时，缩略图不会显示在我的个人资料中。这是切换服务器后发布的故事。

有趣的是，我尝试重复这些动作，缩略图确实随机弹出。

Facebook 如何从我的服务器检索图像？问题是否与如何完成有关？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T18:43:19.097

有一次，我认为 FB 不会在第二个帖子上显示缩略图。或者其他的东西。如果我稍微更改 URL（在 url 中放置一些假参数），它似乎再次显示缩略图。YMMV

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T18:43:48.793

从页面中删除每个`og`元标记，将其调试到 facebook 调试器工具中，当它没有显示时，再次放置正确的`og`元标记并使用 facebook 调试器工具再次调试。

这是facebook的一个奇怪问题。它有时会缓存旧的不正确值。

# arrays - 3 分区归并排序

> ID：10667884
> 
> 赞同：1
> 
> 时间：2012-05-19T18:34:54.030
> 
> 标签：arrays, quicksort, mergesort

我的教授指派我的班级在具有 3 部分分区和合并的数组中实现合并排序。

这正是教授提出的问题。问题是我没有发现 3 路合并排序之类的东西我只知道 3 路快速排序所以我认为他可能打算获取一个数组，将其拆分为 3 部分，然后将这 3 部分合并在一起，我m 通过将前 2 个部分合并排序，然后将合并的部分与第 3 个部分合并排序来做到这一点。

我是否认为正确并且我做对了（已经实现但我没有发布代码，因为它与我的问题没有任何关系）或者我理解错误并且有类似 3 路合并排序的东西我不知道。

教授倾向于给我们分配与我们尚未学过的东西有关的作业，这就是为什么我对此持怀疑态度，并且我尽可能多地在 Google 等中查看。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T18:44:55.983

将三个子数组合并排序后，您可以一次将它们合并在一起：比较所有三个子数组的第一个元素并将最小的元素放入组合数组中，然后从数组中取出最小元素并进行比较再次直到所有子数组元素都被考虑在内。

确保您处理数组中只有两个元素的情况（因此您不能将其划分为三个非空部分）。此外，在上一段中，合并时一个数组将在其他数组之前为空，因此您也需要考虑这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T15:47:20.437

它被称为三部分合并排序，因为它就是这样做的。看看[http://mathbits.com/MathBits/CompSci/Arrays/Merge.htm](http://mathbits.com/MathBits/CompSci/Arrays/Merge.htm)

# vim - VIM 是否有特定用途的发行版，如 Eclipse 或专门的 Linux 发行版？

> ID：10667885
> 
> 赞同：2
> 
> 时间：2012-05-19T18:35:24.147
> 
> 标签：vim, editor, software-distribution

Vim 有很多插件，它是一个真正的多功能文本编辑器。

互联网上有很多关于如何使用 vim 插件为不同的开发目的和实践配置它的教程。

Eclipse 有各种预配置的发行版，可与各种编程语言一起使用，各种机构配置这些 IDE 并将它们放在 Internet 上以供下载。

VIM 是否有类似的站点或插件可以将 vim 配置为使用语言 X 或用于目的 Y？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-19T19:40:18.530

尽管有几个所谓的 Vim“发行版”（主要用于 Ruby 和 PHP 等现代语言），但我建议不要这样做。与 Eclipse 等 IDE 相比，Vim 是一个高度通用且可配置的编辑器。如果您不愿意花时间研究插件并逐步构建自己的个人配置，那么 Vim 可能不是最适合您的编辑器。（或者只是将它用于香草安装中的基本编辑任务。）

不要误会我的意思——看看其他人的配置（很多人发布他们的 .vimrc 和配置，通常在 GitHub 上）；只是不要盲目地复制它们。使用 Pathogen 之类的插件管理器（或仅使用 Vimballs），尝试和卸载插件非常容易。

这些的最佳来源仍然是[http://www.vim.org/scripts/index.php](http://www.vim.org/scripts/index.php)，尽管许多也在 GitHub 上，甚至在[http://vim-scripts.org上还有 vim.org 的 GitHub 镜像/](http://vim-scripts.org/)，与病原体一起使用。

# javascript - 更改整个文档或窗口的默认选择行为

> ID：10667887
> 
> 赞同：1
> 
> 时间：2012-05-19T18:35:41.200
> 
> 标签：javascript, jquery

有了这个，我想更改文档的默认选择行为。我对文档正文使用`getElmentsByTagName`. 但是代码实际上并没有达到想要的效果，就是阻止用户点击选择文档中的文本。

```
<script>
    $(document).ready ( function () {
        document.getElementsByTagName("body").addEventListener('mousedown', function(e) { e.preventDefault(); }, false);
    });
</script> 
```

这适用于我网站的其他地方，以防止在特定页面元素上进行选择。如何对整个文档执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T19:04:27.973

您的函数中有错字。当您使用 getElementsByTagName 选择一个元素时，您实际上是在接收一个集合，即使页面上只有一个元素。因此，使用 [0] 表示您希望在集合中返回第一个正文元素：

```
 document.getElementsByTagName("body")[0].
        addEventListener('mousedown', 
            function(e) { 
                e.preventDefault(); 
            }, false); 
```

这当然会阻止选择文本，从而解决您的问题。

**更新：**

**我刚刚意识到您不需要禁用单击锚标记，但我会将其留给想要禁用这些单击的人。**

但是，为了防止链接被点击，您必须使用另一种方法：

```
// bind click event to parent elements of anchor tags,
 // or it won't work properly
$('a').parent().each(function() {
    $(this).attr("href","#");
    $(this).unbind();
    $(this).click(function() {
        event.preventDefault();
        return false;
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T19:04:40.363

```
$(document).ready ( function () {
    $(document).on('mousedown', function(e) { 
        e.preventDefault(); 
    });
});​ 
```

[**关于SO的另一个答案。**](https://stackoverflow.com/questions/880512/prevent-text-selection-after-double-click)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T19:16:02.037

发现我也可以用 CSS 来做到这一点。

```
<style>
*:not(input) {
-webkit-touch-callout: none;
-webkit-user-select: none;
-khtml-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
user-select: none;      
}
</style> 
```

# objective-c - 推送视图和 viewWillAppear 之间的顺序是什么？

> ID：10667890
> 
> 赞同：1
> 
> 时间：2012-05-19T18:35:55.470
> 
> 标签：objective-c, ios, xcode, ios5

我制作了一个 viewController 类，它有一个按钮、一个输入和一个标签。我想要实现的是，当用户单击按钮时，将推送一个新视图，并且输入文本将显示在标签中。我使用 UINavigationController 来记忆 input 中的文本，并在 'pushNext' 中设置逻辑，即按钮的 IBAction，并使用 viewWillAppear 方法将 UINavigationController 中存储的文本放入标签中。

我使用 NSLog 跟踪 proc，发现 viewWillAppear 总是比 pushNext 更早被调用？但是当我运行我书中的示例代码时，调用的顺序是相反的！

为什么？使用这两种方法有什么注意事项吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T18:43:18.457

顺序应该是

```
viewDidLoad
viewWillAppear
viewDidAppear 
```

# css - 用css表格显示定义多行

> ID：10667892
> 
> 赞同：-1
> 
> 时间：2012-05-19T18:36:13.717
> 
> 标签：css

我按照通常的 ASP.Net MVC 构建了一个带有字段标签 div 和字段编辑器 div 的编辑页面，生成了以下 HTML：

```
<div class="editor-label">
  <label for="Code">Project Code</label>
</div>
<div class="editor-field">
  <input id="Code" name="Code" type="text" value="" />
</div> 
```

上面的一对 div 将针对我的表单上的许多可编辑字段重复。默认情况下，这些仅在页面上显示在另一个下方。我想要实现的是使用 CSS 以表格布局显示页面。所以我的CSS是这样的：

```
.field-label, .field-editor{
display: table-cell;
} 
```

这只是将它们全部显示在彼此相邻的单元格中，并在浏览器窗口的末尾换行。如何在每个字段编辑器 div 之后（或每个字段标签 div 之前）强制一个新行而不向视图添加额外的标记？我知道通过向视图添加额外的标记会很简单，比如我为其分配 display: table-row 的新 div。但是我必须在每组标签/编辑器组合之间添加这个标记，这感觉就像违反了 DRY 原则。所以我想这样做而不需要做这个额外的标记。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T19:21:59.487

鉴于上述 HTML，以下 CSS 将起作用：

```
.editor-label, .editor-field {
    display: inline-block;
    width: 48%;
}

.editor-label {
    text-align: right;
} 
```

这将允许元素共享同一行，并采用指定的宽度（在这种情况下相对于父元素的宽度）。`text-align`声明只是将视觉上靠近元素的文本`label`放置`input`。

[JS 小提琴演示](http://jsfiddle.net/davidThomas/hDYWb/)。

当然，您可以使用不同的宽度来获得相同的结果，而无需将`label`and`input`元素不必要地包装在`div`s 中。

使用稍微更整洁的版本：

```
label, input {
    display: inline-block;
}

label {
    text-align: right;
    width: 20%;
}

input {
    width: 30%;
    margin-right: 30%;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/hDYWb/2/)。

The的声明很简单，这样, the和它`margin-right`的累积宽度就没有足够的空间让下一个占据同一行。`label``input``margin-right``label`

# wcf - 超出 WebHttpBinding 消息大小配额

> ID：10667895
> 
> 赞同：0
> 
> 时间：2012-05-19T18:36:31.153
> 
> 标签：wcf

我收到以下错误：

```
The maximum message size quota for incoming messages (65536) has been exceeded.
To increase the quota, use the MaxReceivedMessageSize property on
the appropriate binding element. 
```

1.  我正在使用使用 REST 服务的 WebhttpBinding。
2.  客户端没有配置设置。
3.  我正在使用 MVC3 应用程序。

在超过 65536 字节的流中需要帮助。

有什么方法可以编辑 ServiceHostFactory 行为，以便我可以将 MaxReceivedMessageSize 属性设置为 2GB

* * *

感谢您的答复。

由于我使用的是 WebHttpBinding，我想知道如何覆盖 ServiceHostFactory 。

创建一个自定义类并覆盖 WebServiceHost 的 OnOpening() 方法可以解决问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T03:36:53.567

`MaxReceivedMessageSize`是绑定元素的属性；如果您需要从默认值更改它，您有两个选项：

1.  使用配置文件，并从`binding`元素中设置它。
2.  在代码中创建绑定并在那里设置属性。

要在客户端执行此操作，无需配置文件，您需要绕过正常的服务参考代码并自己创建客户端通道。您可以在我的博客文章中看到如何在没有自动生成的客户端代理的情况下使用 WCF 的示例：[Proxy-Free WCF](http://blog.kutulu.org/2012/03/proxy-free-wcf-ditching-proxy.html)。本质上，您在代码中执行以下操作：

```
var binding = new WebHttpBinding();
binding.MaxReceivedMessageSize = int.MaxValue;

var factory = new ChannelFactory<IServiceInterfaceChannel>(binding);
var client = factory.CreateChannel(new Endpoint(SERVICE_URL)); 
```

如果需要改变服务端的行为，可以通过调用`AddServiceEndpoint`服务宿主类来指定绑定，例如：

```
var host = new WebServiceHost();
var binding = new WebHttpBinding();
binding.MaxReceivedMessageSize = int.MaxValue;

host.AddServiceEndpoint(typeof(IServiceInterface), binding, SERVICE_URL); 
```

另外，我*认为*您可以根据您的问题通过覆盖`OnOpening`自定义 Web 服务主机的方法来完成此操作。请注意，基本`OnOpening`行为可能会创建端点并编辑绑定行为，因此您需要先让它完成所有这些，然后再尝试自己更改绑定配置。但我真的不知道你为什么要这么麻烦...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-14T05:19:05.997

最简单的方法是在 web.config 中配置它，如果需要，您可以稍后更改它。首先在您的 web.config 或 app.config 中创建如下所述的绑定配置

```
 <bindings>
   <basicHttpBinding>
    <webHttpBinding>
    <binding name="Binding_Name" maxReceivedMessageSize="2147483647">
    </binding>
   </webHttpBinding>
  </bindings> 
```

然后在您的服务端点中提及相同的内容，如下所示

```
<services>
<service behaviorConfiguration="ServiceBehaviour" name="Servicename">
<endpoint address="" binding="webHttpBinding" bindingConfiguration="Binding_Name" contract="Contractname" />
</service>
</services> 
```

# ruby-on-rails - 通过整数生成模型记录/字段

> ID：10667897
> 
> 赞同：0
> 
> 时间：2012-05-19T18:37:03.797
> 
> 标签：ruby-on-rails, nested-forms

我试图实现以下内容，但我对继续进行的方式感到困惑。

在我的应用程序中。我有一个带有模型、控制器和视图的 Box 脚手架，还有一个苹果模型。

我想做的是在盒子的new.html.erb中询问用户“盒子里有多少个苹果”。这里取的值是一个整数，用户单击一个按钮生成，然后生成该给定数字的苹果字段数。（这必须以相同的形式发生）。毕竟，我想点击提交，通过accepts_nested_form 将获取框的所有详细信息以及生成的苹果字段。

这是使用 Javascript 还是 Rails 的 MVC。如果可能，请有人提供示例。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T19:24:47.253

**假设**一个盒子有很多苹果

```
class Box < ActiveRecord::Base
     has_many :apples
     accepts_nested_attributes_for :apples, :allow_destroy => true
end 
```

您可以通过向新操作发送参数来非常简单地做到这一点：

```
http://localhost:3000/box/new?apples=3 
```

然后在你的盒子控制器（def new）中获取**params[:apples]**并在**新**方法（动作）中创建你的苹果。

```
# inside Box controller
def new
  @box = Box.new
  i = params[:apples].to_i
  i.times { @box.build_apple }
end 
```

在您看来，您需要使用并为每个苹果渲染一个“行”。

```
<%= f.fields_for :apples do |apple| %>
   <p>here are the apples</p>
<% end %> 
```

# makefile - Fortran 生成文件

> ID：10667901
> 
> 赞同：2
> 
> 时间：2012-05-19T18:37:44.693
> 
> 标签：makefile, fortran, fortran90

我有以下问题。我有一组 Fortran90 源文件，其中大部分包含模块。我必须用它们构建一个静态库（.a），并且我使用了以下 Makefile。

```
.SUFFIXES: .o .c .f90 .f .mod

DEPSF =   tt_f90m, bt
include Makefile.in #Contains compiler flags (CC, FORT, etc.)
OBJS    = $(DEPSF:,=.o).o

mytt.a: $(OBJS) 
 ar rc mytt.a $(OBJS)
.f90.o:
    $(FORT) -c $< 
```

它工作正常，但它有一个烦人的特性：如果我编辑任何源文件，mytt.a 目标不会重建。只有当我删除所有 .o 和 .mod 文件时，它才会发生。make -d 的输出

如下：

```
....

Considering target file `tt_f90m.o'.
....   
Found an implicit rule for `tt_f90m.o'.
Considering target file `tt_f90m.mod'.
 Looking for an implicit rule for `tt_f90m.mod'.
....
 No implicit rule found for `tt_f90m.mod'.
 Finished prerequisites of target file `tt_f90m.mod'.
No need to remake target `tt_f90m.mod'.
Finished prerequisites of target file `tt_f90m.o'.
Prerequisite `tt_f90m.mod' is older than target `tt_f90m.o'.
No need to remake target `tt_f90m.o'. 
```

我怎样才能正确编写这个makefile？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T08:14:52.890

事实上，我有这个问题的答案。问题出在 Fortran90 上。它具有 .mod 文件作为依赖项，因此如果源文件发生更改，则 .mod 文件不会，并且文件不会重新编译。解决方案非常简单。一开始只写

```
.SUFFIXES:
.SUFFIXES: .c .f .f90 .F90 .o 
```

仅此而已！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T23:15:15.253

您没有将文件`.f90`和`.f`文件的依赖关系`.mod`放入您的makefile中。`.f`如果您更新以,`.mod`或结尾的文件之一`.c`，make 不会看到您的`.a`文件依赖于它，并且不会费心重新编译该`.f90`文件。

你有几个选项来解决这个问题。一种是使用[makedepend](http://en.wikipedia.org/wiki/Makedepend)之类的工具。Makedepend 本身仅适用于 C，但存在 fortran 版本。

另一种是在您的makefile 中明确声明哪些目标文件取决于哪些模块和C 文件。它看起来有点像这样：

```
.SUFFIXES: .o .c .f90 .f .mod

DEPSF =   tt_f90m, bt
include Makefile.in #Contains compiler flags (CC, FORT, etc.)
OBJS    = $(DEPSF:,=.o).o

mytt.a: $(OBJS) 
    ar rc mytt.a $(OBJS)

ttf90m.o: bt.f90 foo.mod bar.f
    $(FORT) -c $< -o $@

bt.o: ttf90m.f90 baz.mod floop.c
    $(FORT) -c $< -o $@ 
```

# git - 我如何在不提交 Git 的情况下同时处理多个分支？

> ID：10667907
> 
> 赞同：2
> 
> 时间：2012-05-19T18:38:39.007
> 
> 标签：git

似乎每当我在一个分支上更改了一些文件，然后想要更改到另一个分支来做一些不同的工作时，这些更改仍然伴随着我。例如，

```
$ git status
# On branch master
nothing to commit (working directory clean)
~/Sites/sc, kamilski81 (master) 
$ touch FakeFile
~/Sites/sc, kamilski81 (master) 
$ git status
# On branch master
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#   FakeFile
nothing added to commit but untracked files present (use "git add" to track)
~/Sites/sc, kamilski81 (master) 
$ git checkout prod
Switched to branch 'prod'
~/Sites/sc, kamilski81 (prod) 
$ git status
# On branch prod
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#   FakeFile
nothing added to commit but untracked files present (use "git add" to track) 
```

在这种情况下，为什么当我结帐时 FakeFile 会出现在我身边？如何在多个分支上编辑多个文件而无需签入？还是我只是完全错误地这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T18:43:21.250

您可以`git stash`在分支 A 上使用来保存当前状态并签出另一个分支，然后返回到 A 并使用`git stash pop`来进入您离开分支的状态。`git help stash`有关保存本地状态的更多选项，请参阅 git stash ( ) 的帮助页面`git stash`

# netbeans - 在 NetBeans 中禁用“保存快照”

> ID：10667914
> 
> 赞同：6
> 
> 时间：2012-05-19T18:39:14.303
> 
> 标签：netbeans, snapshot

如何在 NetBeans 7.1.2 中禁用保存快照？它正在显着减慢系统速度。有什么建议么

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-18T12:48:58.380

快照是 IDE 检测到缓慢行为时拍摄的性能快照。由于显而易见的原因，较慢的计算机更有可能触发收集（通过花费超过预设时间来完成任务），然后需要保存快照。保存过程会进一步减慢系统速度，偶尔会导致（出于所有实际目的）IDE 无法运行。

检查您的`netbeans.conf`配置文件（在`etc`文件夹中）。你会找到一行`netbeans_default_options`. 确保`-J-ea`没有出现在行中。此标志启用 Java 断言，这本身不会有问题，但 NetBeans 中的慢速检测器也使用此标志来显着缩短启用自我分析器之前的超时。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-01-02T13:47:00.103

Sam Harnell 的回答在 2019 年和 NetBeans 10 中对我没有帮助，因为我没有选择 -J-ea。我在[NetBeans bugtracker](https://bz.apache.org/netbeans/show_bug.cgi?id=186690)中找到了帮助。添加以下选项以`netbeans_default_options`帮助我摆脱*保存快照*：

```
-J-Dorg.netbeans.core.TimeableEventQueue.report=30000 
-J-Dorg.netbeans.core.TimeableEventQueue.quantum=1000 
-J-Dorg.netbeans.modules.editor.completion.slowness.report=10000 
```

# python - 使用 UNIX cSh 运行 python 程序时出错

> ID：10667916
> 
> 赞同：2
> 
> 时间：2012-05-19T18:39:27.330
> 
> 标签：python, unix

我正在运行一个程序，用于使用`counter`函数对文件中的数据进行排序。
所以，很明显我把`from collections import Counter`我的程序放在首位。
现在的问题是，当我使用 unix cShell 运行我的脚本时，我收到一条错误消息：“ImportError:Can not import counter”，但是如果我在 MS-DOS 中执行相同的程序运行良好。
我正在使用 python 2.7.3

请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T18:41:08.180

`collections.Counter`[在 Python 2.7 中](http://docs.python.org/library/collections.html)是新的。大概您的 UNIX 系统的版本低于 2.7。

# sql - Facebook 的third_party_id 的数据类型是什么？

> ID：10667919
> 
> 赞同：2
> 
> 时间：2012-05-19T18:39:49.620
> 
> 标签：sql, sql-server, facebook, facebook-graph-api

我想使用 Facebook 的第三方 id 作为 sql 中的索引。

它显然是某种类型的字符串，但是我不确定我是否应该期望它始终是某个或至少是最大长度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T18:57:46.273

我总是在 mysql 中使用 long int(16) ...它可以工作，但不要认为这是一个好的解决方案；-) 而且 Facebook ID 的长度并不总是相同，例如“1399156453”、“100000459881034”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T08:06:00.360

来自[Facebook 参考](http://developers.facebook.com/docs/reference/api/user/)这是用户的匿名但唯一标识符；仅在通过字段 URL 参数特别请求时返回，它以**字符串**格式返回，并且此`Requires access_token`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T08:07:26.087

third_party_id 大约有 28 个字符，但我不会依赖这个：如果 Facebook 没有发布有关它的更多信息，那是因为他们希望能够更改它（假设第三方能够重新生成 Facebook来自 third_party_id 的 ID）。我只会使用 nvarchar(50)。

# java - 如何在不让你的 CPU 发疯的情况下搜索多个大文件？

> ID：10667922
> 
> 赞同：0
> 
> 时间：2012-05-19T18:40:04.310
> 
> 标签：java

所以我的问题是，我如何才能搜索大约 500 mb 的多个文件，当然要尽可能快，但 cpu 使用率也要尽可能低，还有第二个要求：函数必须能够返回行搜索文本已打开，因此不仅知道文本在文件中，还是在文件中多次出现，还返回搜索文本出现的行。

在此先感谢，blackwolf12333

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T19:04:04.863

我建议你在倒排索引中创建并搜索。创作需要更多的时间，但这只是一次性的费用。创建索引后，搜索速度非常快。[Apache Lucene](http://lucene.apache.org/core/)是您可以使用的流行开源库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T19:04:32.497

可能您应该尝试使用[Lucene](http://lucene.apache.org/)索引器进行快速搜索。如果你不想像 Lucene 这样大的库，你可以手动创建索引来搜索，这并不难。

# jquery - 具有多个元素的 jQuery 队列

> ID：10667923
> 
> 赞同：0
> 
> 时间：2012-05-19T18:40:10.800
> 
> 标签：jquery, html, queue, jquery-animate

我有 n-`<div>`容器并想为它们制作动画。

我如何用 jQuery`.queue()`和类似这个片段的东西来实现它。

```
$('#div1').animate({ 'opacity': 1 }, 1000, function () {
    $('#div2').animate({ 'opacity': 1 }, 1000, function () {
        $('#div1').animate({ 'padding': '10px' }, 1000);
        $('#div3').animate({ 'opacity': 1 }, 1000);
    })
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T18:44:18.027

在最简单的动画用途中，jQuery 为每个元素维护一个单独的动画队列，因此使用单个队列来控制多个元素的唯一方法是将您自己的自定义函数放入知道它们要操作的元素的队列中这可能不会比你已经拥有的更简单。

动画队列的最简单和默认用法是对同一对象进行动画操作的排序。您可以将自己的自定义函数放入动画队列中，这有时很有用，但是当您这样做时，您将不会有比您已经呈现的代码更简单的东西了。

可能可以改用 jQuery`.deferred`功能，但我也不清楚这是否比您已经拥有的更简单。

# java - 从 SQLite 数据库读取详细信息的登录页面不起作用

> ID：10667924
> 
> 赞同：-3
> 
> 时间：2012-05-19T18:40:14.607
> 
> 标签：java, android, xml

> **可能重复：**
> [尝试访问 SQLite 数据库时出现 java.lang.NullPointerException](https://stackoverflow.com/questions/10667391/java-lang-nullpointerexception-when-trying-to-access-sqlite-database)

我无法让我的登录屏幕正常工作。用户应输入他们的登录名和密码，然后将其与包含先前注册的数据库进行比较。有人可以告诉我哪里出错了，为什么代码不起作用？

```
**Login.java**

    package com.B00512756.angertwo;

    import android.app.Activity;
    import android.content.ContentValues;
    import android.content.Context;
    import android.content.Intent;
    import android.database.Cursor;
    import android.database.sqlite.SQLiteDatabase;
    import android.database.sqlite.SQLiteDatabase.CursorFactory;
    import android.database.sqlite.SQLiteOpenHelper;
    import android.os.Bundle;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.Button;
    import android.widget.EditText;

    public class Login extends Activity implements OnClickListener{
        public static final String DATABASE_NAME = "login_database.db";
        public static final String USER_INFO_TABLE = "user_information";
        public static final String COLUMN_ID = "UserID";
        public static final String COLUMN_RATING = "UserName";
        public static final String COLUMN_NAME = "Password";

        public EditText txtUserName;
        public EditText txtPassword;
        public static Button btnLogin;
        public static Button btnCancel;

            /** Called when the activity is first created. */
            @SuppressWarnings("unused")
            @Override
            public void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.loginpage);

                txtUserName=(EditText)this.findViewById(R.id.txtUname);
                txtPassword=(EditText)this.findViewById(R.id.txtPwd);
                //btnLogin=(Button)this.findViewById(R.id.btnLogin);
                Button Login = (Button) findViewById(R.id.btnLogin);
                Button Register = (Button) findViewById(R.id.btnregister);
                Button Cancel = (Button) findViewById(R.id.btnCancel);

                Register.setOnClickListener(new View.OnClickListener() {
                    public void onClick(View view) {
                        Intent myIntent = new Intent(view.getContext(), Registration.class);
                        startActivityForResult(myIntent, 0); 
                        finish();
                    }
                });

                Cancel.setOnClickListener(new View.OnClickListener() {
                    public void onClick(View view) {
                        android.os.Process.killProcess(android.os.Process.myPid());
                    }
                });

                Login.setOnClickListener(new View.OnClickListener() {

                    @SuppressWarnings("null")
                    @Override
                    public void onClick(View v) {
                        // TODO Auto-generated method stub

                        String name = txtUserName.getText().toString();
                        String pwd = txtPassword.getText().toString();
                        SQLiteDatabase regDB = null;

                        //String[] columns = new String[]{COLUMN_ID, COLUMN_RATING, COLUMN_NAME };

                        try {
                        Cursor c = regDB.query(USER_INFO_TABLE, new String[] {
                                COLUMN_ID, COLUMN_RATING, COLUMN_NAME}, null, null, null, null, null);
                        if(null!=c){

                              c.moveToFirst();

                             System.out.println("Cursor Size"+c.getCount());

                            }

                        String result = "";

                        int iRow = c.getColumnIndex(COLUMN_ID);
                        int iRating = c.getColumnIndex(COLUMN_RATING);
                        int iName = c.getColumnIndex(COLUMN_NAME);

                        c.moveToLast();
                        for (int i = c.getCount() - 1; i >= 0; i--) {

                            // Get the data
                            result = result + c.getString(iRow) + " " + c.getString(iRating) + " " + c.getString(iName) + "\n" ;
                            if("select * from USER_INFO_TABLE where UserName =" + "\""+ name + "\""+" and Password="+ "\""+ pwd != null );
                            { Intent j = new Intent();
                            j.setClassName("com.B00512756.angertwo",
                                    "com.B00512756.angertwo.AngerprototypetwoActivity");

                            startActivity(j);}

                            // Move the cursor
                            c.moveToPrevious();
                        }
                        c.close();
                        }
                            catch (Exception e) 
                            {

                            }

                        }

                    });

                }

            private SQLiteDatabase getWritableDatabase() {
                // TODO Auto-generated method stub
                return null;
            }

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub

            }
    }

**AndroidMainfest:**

<?xml version="1.0" encoding="utf-8"?>
<manifest package="com.B00512756.angertwo"
      android:versionCode="1"
      android:versionName="1.0" xmlns:android="http://schemas.android.com/apk/res/android">
    <uses-sdk android:minSdkVersion="8" />

    <application android:name=".AppState" android:icon="@drawable/icon" android:label="@string/app_name">
        <activity android:name=".Login"
                  android:label="@string/main_title">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity android:name=".Login" android:label="@string/begin_label"
       android:theme="@android:style/Theme"></activity> 
      <activity android:name=".Question1" android:label="@string/question_one"
       android:theme="@android:style/Theme"></activity>
      <activity android:name=".Question2" android:label="@string/question_two"
       android:theme="@android:style/Theme"></activity>
      <activity android:name=".Question3" android:label="@string/question_three"
       android:theme="@android:style/Theme"></activity>
      <activity android:name=".Question4" android:label="@string/question_four"
       android:theme="@android:style/Theme"></activity>
      <activity android:name=".Question5" android:label="@string/question_five"
       android:theme="@android:style/Theme"></activity>
      <activity android:name=".AngerprototypetwoActivity" android:label="@string/main_title"
       android:theme="@android:style/Theme"></activity> 
      <activity android:name=".nextQ1" android:id="@+id/next_Q1_button"
       android:theme="@android:style/Theme"></activity>
      <activity android:name=".Strategies" android:label="@string/strategies_label"
       android:theme="@android:style/Theme"></activity>
      <activity android:name=".Contact" android:label="@string/begin_label"
       android:theme="@android:style/Theme"></activity>
      <activity android:name=".Strat_What_Is_Anger" android:label="@string/strategies_label_what_is_anger"
       android:theme="@android:style/Theme"></activity>
      <activity android:name=".Strat_Use_Distraction" android:label="@string/strategies_label_distraction"
       android:theme="@android:style/Theme"></activity>
      <activity android:name=".Registration" android:label="@string/registration"
       android:theme="@android:style/Theme"></activity>

    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T20:32:40.720

你永远不会打开你的数据库（从代码来看，它看起来不像是你创建的），所以当你尝试运行查询时，它会返回 null。

我建议您了解有关数据库的更多信息，以及如何创建和使用它们...

[教程](http://www.anotherandroidblog.com/2010/08/04/android-database-tutorial/)

并了解更多有关 StackOverflow 的信息......一遍又一遍地发布相同的问题是不礼貌的（并且会很快解决您的问题）。

[StackOverflow 常见问题解答](https://stackoverflow.com/faq#questions)

# javascript - 调用 Jquery 对话框并传递一个字符串作为消息

> ID：10667928
> 
> 赞同：1
> 
> 时间：2012-05-19T18:40:39.183
> 
> 标签：javascript, jquery

我想调用 JavaScript 函数并将字符串传递给它。我试过这样：

```
function dialog(a){              
    // Dialog           
    $(a).dialog({        
        width: 600,
        buttons: {
            "Ok": function() { 
                $(this).dialog("close"); 
            }, 
            "Cancel": function(event) { 
                $(this).dialog("close");
                event.preventDefault();
            } 
        }
    }); 
```

这是 JSF 按钮：

```
<h:commandButton value="Delete" action="#{SessionsController.deleteSelectedIDs}" 
                    onclick="dialog('Dialog Test')">
    <f:ajax render="@form" execute="@form"></f:ajax>
</h:commandButton> 
```

当我尝试使用这种方式传递字符串`onclick="dialog('Dialog Test')"`时，它不起作用。我该如何解决这个问题？

最好的祝愿

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T18:49:17.377

你可能想要这样的东西：

```
function dialog(a) {
    // Dialog           
    $("<div />", { text: a }).dialog({
        width: 600,
        buttons: {
            "Ok": function() {
                $(this).dialog("close");
            },
            "Cancel": function(event) {
                $(this).dialog("close");
                event.preventDefault();
            }
        }
    });
} 
```

在调用*之前*将文本包装在`<div />`包含对话框文本的 a 中。以前您向 jQuery 传递了一个无效的选择器，这就是为什么没有弹出任何内容的原因。*`dialog`*

 ***示例：http:** [//jsfiddle.net/4extL/2/](http://jsfiddle.net/4extL/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T18:49:25.793

将字符串传递给`dialog()`函数可能工作得很好。结果可能不起作用：

```
$(a) 
```

变成：

```
$('Dialog Test') 
```

因为这告诉 jQuery 查找`<Test>`对象中包含的`<Dialog>`对象的 CSS 选择器，这根本不是您的意思。*

# java - 字（密码）以星号显示 - 控制台应用程序

> ID：10667929
> 
> 赞同：1
> 
> 时间：2012-05-19T18:40:44.683
> 
> 标签：java

我正在尝试编写一个程序，该程序将允许两个玩家玩“猜词”游戏，作为我在 Java 中学习曲线的一部分。出现提示时，玩家 1 键入一个单词，但屏幕显示该单词中每个字母的星号 *。玩家 1 只需键入一个单词，但该单词应以星号而不是字符显示。我似乎在正确处理这个问题时遇到了问题。

Stream Buffer 或 Scanner 类中是否有任何方法可以让我在上面执行此操作。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T19:01:12.747

您应该拦截输入、保存原始数据并将其显示在控制台中的直觉。您可以通过单独的线程处理它来实现这一点。

使用此参考[http://java.sun.com/developer/technicalArticles/Security/pwordmask/](http://java.sun.com/developer/technicalArticles/Security/pwordmask/)

魔术发生在`EraserThread`课堂上。

# html - 音频在 html5 中不起作用

> ID：10667932
> 
> 赞同：8
> 
> 时间：2012-05-19T18:41:10.130
> 
> 标签：html, firefox, audio, mp3

我正在向 HTML5 网站添加音频。音频在 FireFox 和 IE 上运行良好，但在 FireFox 中不显示和播放。任何想法为什么和解决方案？提前致谢。

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Untitled Document</title>
</head>

<body>
<audio controls="controls" autoplay="autoplay">
 <source src="cd.mp3" type="audio/mpeg" />
 Your browser does not support the audio element.
</audio>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T18:51:45.670

Firefox 不支持 MP3。它不会显示回退消息，因为它支持音频标签。 [https://developer.mozilla.org/En/Media_formats_supported_by_the_audio_and_video_elements#MPEG_H.264_(AAC_or_MP3)](https://developer.mozilla.org/En/Media_formats_supported_by_the_audio_and_video_elements#MPEG_H.264_%28AAC_or_MP3%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T19:05:58.067

您不能在 Firefox 中使用这样的代码播放 MP3 文件。

请参阅[https://developer.mozilla.org/En/Media_formats_supported_by_the_audio_and_video_elements](https://developer.mozilla.org/En/Media_formats_supported_by_the_audio_and_video_elements)

# c++ - 在 C++ 中定义和初始化非常量函数指针的静态 const 数组

> ID：10667934
> 
> 赞同：0
> 
> 时间：2012-05-19T18:41:26.383
> 
> 标签：c++

无法得到它。使用 g++ 编译器。

代码：

```
#include <iostream>

using namespace std;

typedef void (* FPTR) ();

class Test
{
    void f1()
    {
        cout << "Do nothing 1" << endl;
    }

    void f2()
    {
        cout << "Do nothing 2" << endl;
    }

    static FPTR const fa[];
};

FPTR const Test::fa[] = {f1, f2}; 
```

错误：

```
test.cpp:22: error: argument of type ‘void (Test::)()’ does not match ‘void (* const)()’
test.cpp:22: error: argument of type ‘void (Test::)()’ does not match ‘void (* const)()’ 
```

我只想获得函数指针的常量数组，所以

```
fa[0] = f2; 
```

会导致类似'modifying read-only member Test::fa'的错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T18:43:42.373

`f1`并且`f2`不是函数指针而是成员函数指针，因此您不能将它们分配给函数指针数组。您可以将它们添加到`Test`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T18:44:44.940

编译器是对的。指针类型为`void (Test::*)()`. 尝试一下：

```
typedef void (Test::*FPTR)();

FPTR const Test::fa[] = { &Test::f1, &Test::f2 };  // nicer to read! 
```

`f1`并且`f2`不是函数（即自由函数），而是（非静态）*成员*函数。这些是非常不同的动物：你可以调用一个函数，但你不能只调用一个成员函数。您只能*在实例对象上*调用成员函数，其他任何事情都没有意义。

# javascript - 调用“DOMNodeInserted”事件时添加元素

> ID：10667935
> 
> 赞同：6
> 
> 时间：2012-05-19T18:42:05.320
> 
> 标签：javascript, jquery, facebook, dom

我想在每个“喜欢”按钮（chrome 扩展名）之后添加一个元素。由于在不刷新页面的情况下将帖子添加到新闻提要中，因此我必须添加一个事件侦听器“ `DOMNodeInserted`”。但是当我尝试将`after()`函数放入其中时，它不起作用。

代码：

```
 $("#contentArea").addEventListener("DOMNodeInserted", function(event) {
        $(".like_link").after('<span class="dot"> · </span><button class="taheles_link stat_elem as_link" title="תגיד תכל&acute;ס" type="submit" name="taheles" onclick="apply_taheles()" data-ft="{&quot;tn&quot;:&quot;&gt;&quot;,&quot;type&quot;:22}"><span class="taheles_default_message">תכל&acute;ס</span><span class="taheles_saving_message">לא תכלס</span></button>');
        $(".taheles_saving_message").hide(); 
    }); 
```

当我更改`$("#contentArea")`为`document`它时，所有页面都会崩溃。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-19T18:46:08.690

如果你想在jQuery中添加一个事件监听器，那不是方法，正确的方法应该总是：

```
$(document or window).bind( your_event_name, function(event) { your_callback }); 
```

考虑到这一点，您可以编写：

```
$(document).bind('DOMNodeInserted', function(event) {

    alert('inserted ' + event.target.nodeName + // new node
          ' in ' + event.relatedNode.nodeName); // parent

}); 
```

或者每次在 DOM 中插入节点时执行您需要执行的操作。

* * *

供您参考，如果您想使用`addEventListener`，您需要使用纯 javascript 而不是 jQuery。

```
document.addEventListener("DOMNodeInserted", function () {
    // your code
}, false); 
```

**编辑：**与 jQuery 1.7 一样，请改用“.on”函数：http: [//api.jquery.com/on/](http://api.jquery.com/on/)

* * *

您的方法出现的另一个错误（如果有效）是您将在**插入节点**并调用时破坏应用程序`DOMNodeInserted`（因为您已插入节点）并且将再次插入节点并再次调用`DOMNodeInserted`。 ..

你可以看到发生了什么...

我建议您听正确的方法并在`span`此处附加您的...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-23T10:28:14.467

如果您遇到的问题是您的代码在 jquery .on() 函数中只运行一次，那么您应该将它放在 addEventListner 下，如下例所示 //

```
document.addEventListener('DOMNodeInserted', function(e) {
    $("selector").on('DOMNodeInserted', function(e)   {
       //your code which you want to execute each time DOMNodeInserted
    });
}); 
```

# java - 比较器是新的还是可注入的对象？

> ID：10667936
> 
> 赞同：5
> 
> 时间：2012-05-19T18:42:20.113
> 
> 标签：java, unit-testing, dependency-injection, tdd, comparator

请看标题中的问题！你会“注入”还是“新”一个比较器？如果在规范中设置了元素的顺序并且可能不会改变，你会新它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T19:27:53.100

问题“我应该注入这种依赖吗？” 真的是“引用对象应该知道这种依赖的性质吗？”。呃，只能否定。

如果您的班级是 a `FastestPonyFinder`，并且需要`List<Pony>`按速度对 a 进行排序，那么我会说它应该了解比较器。比较器需要按速度进行比较，排序最快到列表头部；没有其他比较器适合这项工作。对象应该创建比较器，就像它创建`List`.

如果您的班级是 a `BestPonyFinder`，那么它可能应该注入比较器，因为构成“最佳”的定义与如何找到符合它的小马的定义是分开的。这将使您的代码更易于测试，并且将来更易于更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T18:48:43.743

比较器的特点是它们很*便宜。* 他们通常没有任何领域，如果有，他们也没有很多。

它们是如此便宜，以至于它并不重要。您可以内联构造它们，或者从静态最终字段中获取它们，或者进行单例注入——谁在乎呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T18:58:22.113

此外，如果没有状态，则可以随时“重用”。在这种情况下，它们是线程安全的，不会进入先前使用的状态。所以它最终真的取决于你如何实现比较器：有状态还是没有状态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T19:00:31.893

为了更好地进行单元测试，最好拥有 Comparator 的新实例，但是如果您的比较器仅实现 compare 方法并不重要。如果你想将一些数据作为状态注入到比较器并且它可以改变使用之前和之后的测试方法，以确保你不使用以前的上下文。

# c# - C# GetHashCode() 高性能哈希算法

> ID：10667938
> 
> 赞同：3
> 
> 时间：2012-05-19T18:42:35.540
> 
> 标签：c#, .net, object, gethashcode, hashalgorithm

> **可能重复：**
> [覆盖 System.Object.GetHashCode 的最佳算法是什么？](https://stackoverflow.com/questions/263400/what-is-the-best-algorithm-for-an-overridden-system-object-gethashcode)

我们知道，如果我们重写自定义类型中的`Equals`方法`Object`，我们还应该重写并提供`GetHashCode`方法的实现来支持生成唯一的哈希码，以支持`Hashtable`和`Dictionary`收集类，并且可能是其他类。

这要求我们在我们的方法中使用的散列算法的实现`overriden` `GetHashCode`是最佳且准确的，即它生成该类型的唯一散列，并且尽可能快地这样做以提高使用我们类型的应用程序的性能。

我的问题是***哪些散列算法***是准确的并且在`GetHashCode`实现中使用时可以提供最佳性能？或者，我们应该只使用基类型的`GetHashCode`实现吗？我想知道这个答案`value types`和`reference types`..

编辑：下面是一个关于为什么我需要覆盖的类的示例`Equals`：

```
public class Laptop : LaptopBase
{
    public readonly string Make;
    public readonly string ProcessorArch;
    public readonly int MemorySupported;
    public readonly int HardDiskGBSupported;
    public readonly Color ColorName;

    public Laptop(make, procArch, memorySupp, hdGB, color)
    {
        Make = make;
        ProcessorArch = procArch;
        MemorySupported = memorySupp;
        HardDiskGBSupported = hdGB;
        ColorName = color;
    }
} 
```

现在，我想为 2 个膝上型计算机实例返回 true，这些实例的所有上述定义的字段都相互匹配，因此需要重写`Equals`and`GetHashCode`方法，并且您可以看到的另一个要求是，这是一个派生类，并且可以重新进一步使用并支持多种方法；因此，不能成为值类型（结构）。我尝试使用具有所有匹配实例字段的上述类型的 2 个实例，如果我使用`Equals`- 它的基本实现，它会返回`false`我想要的位置`true`。 **我将如何支持这种情况？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T18:59:23.870

它取决于实现它的类型，但它应该提供良好的值分散，并且 GetHashCode() 返回唯一值不是必须的。它应该基于 Equals 实现中使用的那些字段，并且这些字段应该是不可变的。因此，对于结构和类，Equals/GetHashCode 的要求是相同的。

正如 Henk 所说，最好不要覆盖 Equals/GetHashCode ......

# c++ - 我对在 Visual Studio 2010 中使用 strcpy() 有什么不明白的地方？

> ID：10667940
> 
> 赞同：0
> 
> 时间：2012-05-19T18:43:05.820
> 
> 标签：c++, visual-studio-2010, strcpy

```
#include <string.h>

sdi12CRC::sdi12CRC()
  {
    CRC = 0;
    responseToDCommandWithoutCRC = new char[MAX_D_COMMAND_RESPONSE_SIZE];
    responseToDCommandWithCRC = new char[MAX_D_COMMAND_RESPONSE_SIZE];
    asciiCRC = new char[ASCII_CRC_SIZE];
    strcpy(responseToDCommandWithoutCRC,"");
    strcpy(responseToDCommandWithCRC,"");
    strcpy(asciiCRC,"");
  } 
```

上面是我之前用 Borland C++ builder 编写和测试过的一个 C++ 程序的代码片段。有用。我现在正在学习 Visual Studio 2010，所以我想我可以利用我过去的工作来帮助了解 Visual Studio。

我在上面的代码中收到一个警告和一个错误，但上面的代码是合法的 C++ 代码。我在 VS 文档中找不到任何帮助来了解我做错了什么以及如何解决它。（我不是说它不在文档中；只是说我找不到它）。

```
Warning 1   warning C4627: '#include <stdlib.h>': skipped when looking for precompiled header use

Error   4   error C3861: 'strcpy': identifier not found 
```

这里给出了什么？string.h 不是 strcpy 所需的标头吗？因此 strcpy() 应该编译。有什么我不理解或不知道的？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T18:46:38.533

问题是您将项目配置为使用预编译头文件，但您没有使用它们。只需调整您的项目设置以不使用预编译头文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T18:48:55.463

`#include <stdlib.h>`然后尝试显式添加两者`#include <string.h>`

# emacs - 是否可以选择性地隐藏 Emacs 中的菜单项？

> ID：10667944
> 
> 赞同：4
> 
> 时间：2012-05-19T18:43:21.407
> 
> 标签：emacs

我想清理 Emacs 中的菜单，因为我认为其中的一些选项是噪音。有没有办法选择性地删除菜单选项？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-20T00:25:21.720

`keymap`菜单在 Emacs中只是s。查看[文档](http://www.gnu.org/software/emacs/manual/html_node/elisp/Modifying-Menus.html#Modifying-Menus)

不过要注意一点——在我的 Emacs 旅程开始时，我花了很多时间思考如何完全按照我想要的方式获取菜单，但是随着我使用 Emacs 的次数越来越多，我发现我从来没有使用过菜单作为我的工作流程。很少，我会单击菜单来快速了解新包的功能组织。

编辑：

IMO 沉迷于无关紧要的事情是不健康的，但如果你坚持......这毕竟是 Emacs。:)

[这是有人](http://lists.gnu.org/archive/html/help-gnu-emacs/2009-02/msg00058.html)问这个问题的电子邮件：

移除心理治疗师：

```
(define-key menu-bar-help-menu [emacs-psychotherapist] nil) 
```

# jquery-ui-autocomplete - jquery UI 自动完成远程多值选项

> ID：10667945
> 
> 赞同：4
> 
> 时间：2012-05-19T18:43:30.687
> 
> 标签：jquery-ui-autocomplete

我目前有一个使用 UI 自动完成功能的代码，并且似乎显示了我从我的 mysql DB 获得的正确数据。现在我想通过能够接受超过 1 个值来使事情复杂化。我已经上下搜索了互联网，但仍然无法修复我的代码以工作，我是 jquery 的新手，特别是自动完成功能。这是我到目前为止所拥有的..

```
$('#companyautocomplete').autocomplete({
    source: function(request, response) {
        //separator: ' ',
        $.ajax({
            url: "company_search.php",
            dataType: "json",
            data: {
                name_startsWith: request.term,                        
                term: $('#companyautocomplete').val(),

            },
            success: function(data) {
                response($.map(data, function(item) {
                    return {
                        compid: item.compid,
                        label: item.value + ' (' + item.address + ', ' + item.city + ', ' + item.state + ', ' + item.zipcode + ')',
                        value: item.value,
                        address: item.address + ', ' + item.city + ', ' + item.state + ', ' + item.zipcode,
                        phone: item.phone,
                        problematic: item.problematic
                    }
                }))
            },  
        });
    },
    select: function(event, ui) {
        $('#companyautocomplete').val(ui.item.value);
        $('#companyid').val(ui.item.compid);
        $('#c_address').val(ui.item.address);
        $('#c_phone').val(ui.item.phone);
        if (ui.item.problematic!=1){
            $('#companyautocomplete').removeClass("ui-autocomplete-error");
            document.getElementById('Sendbutton').style.display="block";
        } else {
            $('#companyautocomplete').addClass("ui-autocomplete-error");
            document.getElementById('Sendbutton').style.display="none";
        }   
    }
}); 
```

这是我从 company_search.php 得到的回复...

```
[{"compid":"36","value":"MCDONALD OF ALL SAINTS RD","address":"9261 all saints rd","phone":"","problematic":"0","zipcode":"20723","city":"Laurel","state":"MD","completeaddress":"9261 all saints rd, Laurel, MD, 20723"},{"compid":"37","value":"MCDONALD OF BOWIE","address":"4306 nw CRAIN HWY","phone":"","problematic":"0","zipcode":"20716","city":"Bowie","state":"MD","completeaddress":"4306 nw CRAIN HWY, Bowie, MD, 20716"}] 
```

到目前为止，这一切都按我的意愿工作，但它不接受超过 1 个值，我该如何实现呢？提前致谢 ！！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-20T02:49:52.910

终于找到了我的问题的答案！！这是使用多个值/输入并从远程 mysql 数据库获取响应的最终代码。

```
$(function() {
    function split( val ) {
    return val.split( /,\s*/ );
    }
    function extractLast( term ) {
    return split( term ).pop();
    }

    $( "#companyautocomplete" )
    // don't navigate away from the field on tab when selecting an item
    .bind( "keydown", function( event ) {
    if ( event.keyCode === $.ui.keyCode.TAB &&
    $( this ).data( "autocomplete" ).menu.active ) {
    event.preventDefault();
    }
    })
    .autocomplete({
    source: function( request, response ) {
        $.getJSON( "company_search.php",{
            term: extractLast( request.term )},
            function( data ) {
            response( $.map( data, function( item ) {
                  return {
                        compid: item.compid,
                        label: item.value + ' (' + item.address + ', ' + item.city + ', ' + item.state + ', ' + item.zipcode + ')',
                        value: item.value,
                        address: item.address + ', ' + item.city + ', ' + item.state + ', ' + item.zipcode,
                        phone: item.phone,
                        problematic: item.problematic
                  }
            }));
        }
    );
    },
    search: function() {
        // custom minLength
        var term = extractLast(this.value);
        if (term.length < 3) {
            return false;
        }
    },
    focus: function() {
        // prevent value inserted on focus
        return false;
    },
    select: function( event, ui ) {
        $('#companyautocomplete').val(ui.item.value);
        $('#companyid').val(ui.item.compid);
        $('#c_address').val(ui.item.address);
        $('#c_phone').val(ui.item.phone);
        if (ui.item.problematic!=1){
            $('#companyautocomplete').removeClass("ui-autocomplete-error");
            document.getElementById('Sendbutton').style.display="block";
        } else {
            $('#companyautocomplete').addClass("ui-autocomplete-error");
            document.getElementById('Sendbutton').style.display="none";
        }
    }
}); 
```

});

现在它就像一个魅力。我希望这可以帮助其他人寻找答案。

# php - 如何阻止数据库数据破坏 HTML 页面？

> ID：10667947
> 
> 赞同：0
> 
> 时间：2012-05-19T18:43:41.180
> 
> 标签：php, mysql

我知道从表单中获取数据并将其放入 MySQL 数据库时，应该使用 mysql_real_escape_string() 对数据进行转义以防止 SQL 注入。我的问题有点不同。

我正在从 MySQL 数据库中提取数据，然后将其显示在页面上，但我遇到了问题。假设我的数据如下所示：

```
This is some test data, and here's a quote. For good measure, here are "some more" quotes. 
```

现在，我的 php 代码将是这样的：

```
echo '<input type="text" value="' . $data . '">'; 
```

这会导致 HTML 页面损坏，因为数据在其中包含引号，并且它显示在包含带引号的数据的输入标记内。

看到问题了吗？

什么是最好的解决方案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T18:46:04.790

就像`mysql_real_escape_string()`SQL 操作一样，在 HTML 方面，它是[`htmlspecialchars()`](http://php.net/htmlspecialchars).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T18:46:22.943

您需要转义 html 实体的数据：

`echo '<input type="text" value="' . htmlentities($data) . '">';`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T18:59:16.720

您可以尝试以下方法：

`echo '<input type="text" value="' . stripslashes($data) . '">';`

如果您可以将 php 代码与 html 分开，则最好。

`<input type="text" value="<?php echo stripslashes($data);?>">`

谢谢 ：）

# performance - 在什么时候使用画布变得更好？

> ID：10667951
> 
> 赞同：1
> 
> 时间：2012-05-19T18:44:02.973
> 
> 标签：performance, html, canvas

我正在开发一个 UI 将基于 Web 的应用程序。目标浏览器仅为 Internet Explorer

我想知道，对于 UI，在什么时候使用 Canvas 并自己绘制所有元素而不是使用标准 HTML 元素会变得有益？

或者，如果您不能使用 HTML 元素做一些事情，您是否应该只使用画布？

理想情况下，我正在寻找讨论或答案的链接以及一些解释原因的示例。如果只是取决于你喜欢什么，那就说吧，否则有什么考虑吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T20:13:46.963

[请阅读我对“创建基于画布的 UI 组件有意义吗？”的](https://stackoverflow.com/a/6859061/154112)回答。.

简而言之，这是一个坏主意。

[Canvas 规范本身列出了为什么在画布中制作 UI 控件不好的原因](https://developers.whatwg.org/the-canvas-element.html#the-canvas-element)。可访问性是一场噩梦。引用规范：

> 作者应避免使用 canvas 元素实现文本编辑控件。这样做有很多缺点：
> 
> *   必须重新实现插入符号的鼠标放置。
> *   插入符号的键盘移动必须重新实现（可能跨行，用于多行文本输入）。
> *   必须实现文本字段的滚动（水平滚动用于长行，垂直滚动用于多行输入）。
> *   必须重新实现诸如复制和粘贴之类的本机功能。
> *   必须重新实现拼写检查等原生功能。
> *   必须重新实现拖放等原生功能。
> *   必须重新实现页面范围的文本搜索等原生功能。
> *   必须重新实现特定于用户的本机功能，例如自定义文本服务。这几乎是不可能的，因为每个用户可能安装了不同的服务，并且可能存在无限多的此类服务。
> *   双向文本编辑必须重新实现。
> *   对于多行文本编辑，必须为所有相关语言实现换行。
> *   必须重新实现文本选择。
> *   必须重新实现双向文本选择的拖动。
> *   必须重新实现平台原生键盘快捷键。
> *   必须重新实现平台原生输入法编辑器 (IME)。
> *   撤消和重做功能必须重新实现。
> *   必须重新实现可访问性功能，例如插入符号或选择之后的放大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T18:46:21.777

> 如果有一些你不能用 HTML 元素做的事情，你应该只使用画布吗？

是的，差不多。画布用于绘图 - 现在是 2D，将来是 3D。

*顺便说一句，我不*希望浏览器本机控件在画布上绘制更快。您在现有实现之上添加至少一层代码。

# python - Python 请求抛出 SSLError

> ID：10667960
> 
> 赞同：438
> 
> 时间：2012-05-19T18:45:20.897
> 
> 标签：python, ssl, python-requests, urllib3

我正在编写一个涉及 CAS、jspring 安全检查、重定向等的简单脚本。我想使用 Kenneth Reitz 的 python 请求，因为它是一项很棒的工作！但是，CAS 需要通过 SSL 进行验证，所以我必须先通过这一步。我不知道 Python 请求想要什么？这个 SSL 证书应该放在哪里？

```
Traceback (most recent call last):
  File "./test.py", line 24, in <module>
  response = requests.get(url1, headers=headers)
  File "build/bdist.linux-x86_64/egg/requests/api.py", line 52, in get
  File "build/bdist.linux-x86_64/egg/requests/api.py", line 40, in request
  File "build/bdist.linux-x86_64/egg/requests/sessions.py", line 209, in request 
  File "build/bdist.linux-x86_64/egg/requests/models.py", line 624, in send
  File "build/bdist.linux-x86_64/egg/requests/models.py", line 300, in _build_response
  File "build/bdist.linux-x86_64/egg/requests/models.py", line 611, in send
requests.exceptions.SSLError: [Errno 1] _ssl.c:503: error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed 
```

* * *

## 回答 #1

> 赞同：595
> 
> 时间：2012-10-12T18:19:07.240

您遇到的问题是由不受信任的 SSL 证书引起的。

就像之前评论中提到的@dirk 一样，*最快*的解决方法是设置`verify=False`：

```
requests.get('https://example.com', verify=False) 
```

请注意，这将导致无法验证证书。**这将使您的应用程序面临安全风险，例如中间人攻击。**

当然，应用判断。正如评论中提到的，这对于快速/一次性应用程序/脚本*可能*是可以接受的，*但实际上不应该用于生产软件*。

如果在您的特定上下文中不接受仅跳过证书检查，请考虑以下选项，您最好的选择是将`verify`参数设置为证书文件的路径的字符串`.pem`（您应该通过某种安全获取方法）。

因此，从 2.0 版开始，`verify`参数接受以下值，以及它们各自的语义：

*   `True`：使证书针对图书馆自己的受信任的证书颁发机构进行验证（注意：您可以通过 Certifi 库查看哪些根证书请求使用，这是从请求中提取的 RC 的信任数据库：[Certifi - 人类信任数据库](http://certifiio.readthedocs.org/en/latest/ "Certifi - 人类信任数据库")）。
*   `False`*:完全*绕过证书验证。
*   用于验证证书的请求的 CA_BUNDLE 文件的路径。

来源：[请求 - SSL 证书验证](https://requests.readthedocs.io/en/latest/user/advanced/#ssl-cert-verification)

另请查看`cert`同一链接上的参数。

* * *

## 回答 #2

> 赞同：124
> 
> 时间：2012-05-19T19:20:07.677

[从关于 SSL 验证的](http://docs.python-requests.org/en/latest/user/advanced/#ssl-cert-verification)请求文档：

> 请求可以为 HTTPS 请求验证 SSL 证书，就像 Web 浏览器一样。要检查主机的 SSL 证书，可以使用 verify 参数：

```
>>> requests.get('https://kennethreitz.com', verify=True) 
```

如果您不想验证您的 SSL 证书，请制作`verify=False`

* * *

## 回答 #3

> 赞同：59
> 
> 时间：2012-10-12T18:38:46.953

要使用的 CA 文件的名称可以通过`verify`：

```
cafile = 'cacert.pem' # http://curl.haxx.se/ca/cacert.pem
r = requests.get(url, verify=cafile) 
```

如果您使用`verify=True`，则`requests`使用其自己的 CA 集，该 CA 集可能没有签署您的服务器证书的 CA。

* * *

## 回答 #4

> 赞同：53
> 
> 时间：2015-11-15T07:47:16.803

我在使用 aws boto3 时遇到了同样的问题和 ssl certificate verify failed 问题，通过查看 boto3 代码，我发现`REQUESTS_CA_BUNDLE`没有设置，所以我通过手动设置修复了这两个问题：

```
from boto3.session import Session
import os

# debian
os.environ['REQUESTS_CA_BUNDLE'] = os.path.join(
    '/etc/ssl/certs/',
    'ca-certificates.crt')
# centos
#   'ca-bundle.crt') 
```

对于 aws-cli，我猜设置 REQUESTS_CA_BUNDLE`~/.bashrc`将解决这个问题（未测试，因为我的 aws-cli 没有它也可以工作）。

```
REQUESTS_CA_BUNDLE=/etc/ssl/certs/ca-certificates.crt # ca-bundle.crt
export REQUESTS_CA_BUNDLE 
```

* * *

## 回答 #5

> 赞同：48
> 
> 时间：2016-09-19T18:57:31.920

`$ pip install -U requests[security]`

*   在 Python 2.7.6 @ Ubuntu 14.04.4 LTS 上测试
*   在 Python 2.7.5 @ MacOSX 10.9.5 (Mavericks) 上测试

打开此问题时（2012-05），请求版本为 0.13.1。在版本[2.4.1 (2014-09)](https://pypi.python.org/pypi/requests#id28)上，引入了“安全”附加功能，`certifi`如果可用，使用包。

现在（2016-09）主要版本是 2.11.1，**没有** `verify=False`. 不需要使用`requests.get(url, verify=False)`，如果安装了`requests[security]`额外的。

* * *

## 回答 #6

> 赞同：31
> 
> 时间：2016-03-04T08:38:52.793

如果您有一个依赖的库`requests`并且您无法修改验证路径（例如 with `pyvmomi`），那么您必须找到`cacert.pem`捆绑的请求并将您的 CA 附加到那里。这是查找位置的通用方法`cacert.pem`：

**视窗**

```
C:\>python -c "import requests; print requests.certs.where()"
c:\Python27\lib\site-packages\requests-2.8.1-py2.7.egg\requests\cacert.pem 
```

**linux**

```
#  (py2.7.5,requests 2.7.0, verify not enforced)
root@host:~/# python -c "import requests; print requests.certs.where()"
/usr/lib/python2.7/dist-packages/certifi/cacert.pem

#  (py2.7.10, verify enforced)
root@host:~/# python -c "import requests; print requests.certs.where()"
/usr/local/lib/python2.7/dist-packages/requests/cacert.pem 
```

顺便提一句。@requests-devs，将您自己的 cacerts 与 request 捆绑在一起真的很烦人……尤其是您似乎没有首先使用系统 ca 存储，而且这在任何地方都没有记录。

**更新**

在您使用库并且无法控制 ca-bundle 位置的情况下，您还可以将 ca-bundle 位置显式设置为主机范围的 ca-bundle：

```
REQUESTS_CA_BUNDLE=/etc/ssl/certs/ca-bundle.crt python -c "import requests; requests.get('https://somesite.com')"; 
```

* * *

## 回答 #7

> 赞同：21
> 
> 时间：2020-11-20T15:09:57.927

正如其他人指出的那样，这个问题“是由不受信任的 SSL 证书引起的”。我的答案是基于[评价最高的答案](https://stackoverflow.com/a/12864892/12032210)和[这个答案](https://stackoverflow.com/a/64018831/12032210)。

您可以使用以下方法测试证书`curl`：

```
curl -vvI https://example.com 
```

如果返回错误，您有 3 个选项：

1.  为了快速修复，您不能验证证书：

```
requests.get('https://example.com', verify=False) 
```

2.  将路径传递到 CA_BUNDLE 文件或具有受信任 CA 证书的目录：

```
requests.get('https://example.com', verify='/path/to/certfile') 
```

3.  如果您有权访问，请修复 Web 服务器证书。

我的问题是因为我只使用了我网站的证书，而不是中间（又名链）证书。

如果你使用 Let's Encrypt，你应该使用`fullchain.pem`文件，而不是`cert.pem`.

* * *

## 回答 #8

> 赞同：17
> 
> 时间：2015-11-03T07:42:57.610

如果要删除警告，请使用下面的代码。

```
import urllib3

urllib3.disable_warnings() 
```

and `verify=False`with `request.get`or`post`方法

* * *

## 回答 #9

> 赞同：15
> 
> 时间：2016-02-16T04:53:27.560

我使用 gspread 遇到了同样的问题，这些命令对我有用：

```
sudo pip uninstall -y certifi
sudo pip install certifi==2015.04.28 
```

* * *

## 回答 #10

> 赞同：13
> 
> 时间：2013-04-18T14:29:46.447

我找到了解决类似问题的具体方法。这个想法是指向存储在[系统](http://hearsum.ca/blog/python-and-ssl-certificate-verification/#comment-443)中并由另一个基于 ssl 的应用程序使用的 cacert 文件。

在 Debian 中（我不确定在其他发行版中是否相同）证书文件（.pem）存储在`/etc/ssl/certs/`所以，这是对我有用的代码：

```
import requests
verify='/etc/ssl/certs/cacert.org.pem'
response = requests.get('https://lists.cacert.org', verify=verify) 
```

为了猜测`pem`选择什么文件，我浏览到 url 并检查哪个证书颁发机构 (CA) 生成了证书。

编辑：如果您无法编辑代码（因为您正在运行第三个应用程序），您可以尝试将`pem`证书直接添加到其中`/usr/local/lib/python2.7/dist-packages/requests/cacert.pem`（例如将其复制到文件末尾）。

* * *

## 回答 #11

> 赞同：8
> 
> 时间：2015-05-21T12:01:25.640

如果您不关心证书，请使用`verify=False`.

```
import requests

url = "Write your url here"

returnResponse = requests.get(url, verify=False) 
```

* * *

## 回答 #12

> 赞同：7
> 
> 时间：2017-07-20T20:10:35.633

经过数小时的调试后，我只能使用以下软件包使其工作：

```
requests[security]==2.7.0  # not 2.18.1
cryptography==1.9  # not 2.0 
```

使用`OpenSSL 1.0.2g 1 Mar 2016`

没有这些包`verify=False`是行不通的。

我希望这可以帮助别人。

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2014-06-13T19:19:33.897

我遇到了同样的问题。原来我没有在我的服务器上安装中间证书（只需将其附加到证书的底部，如下所示）。

[https://www.digicert.com/ssl-support/pem-ssl-creation.htm](https://www.digicert.com/ssl-support/pem-ssl-creation.htm)

确保您已安装 ca-certificates 软件包：

```
sudo apt-get install ca-certificates 
```

更新时间也可以解决这个问题：

```
sudo apt-get install ntpdate
sudo ntpdate -u ntp.ubuntu.com 
```

如果您使用的是自签名证书，您可能必须手动将其添加到您的系统中。

* * *

## 回答 #14

> 赞同：5
> 
> 时间：2018-11-29T11:32:11.540

我想派对太晚了，但我想为像我这样的流浪者粘贴修复程序！因此，在 Python 3.7.x 上为我解决了以下问题

在终端中输入以下内容

```
pip install --upgrade certifi      # hold your breath.. 
```

尝试再次运行您的脚本/请求，看看它是否有效（我相信它还不会被修复！）。如果它不起作用，请尝试直接在终端中运行以下命令

```
open /Applications/Python\ 3.6/Install\ Certificates.command  # please replace 3.6 here with your suitable python version 
```

* * *

## 回答 #15

> 赞同：5
> 
> 时间：2017-08-29T06:06:20.120

如果请求调用隐藏在代码深处并且您不想安装服务器证书，那么，仅出于**调试目的**，可以对请求进行猴子补丁：

```
import requests.api
import warnings

def requestspatch(method, url, **kwargs):
    kwargs['verify'] = False
    return _origcall(method, url, **kwargs)

_origcall = requests.api.request
requests.api.request = requestspatch
warnings.warn('Patched requests: SSL verification disabled!') 
```

**切勿在生产中使用！**

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2019-10-10T20:44:41.260

这类似于@rafael-almeida 的回答，但我想指出，从请求 2.11+ 开始，没有 3 个值`verify`可以取，实际上有 4 个：

*   `True`：根据请求的内部可信 CA 进行验证。
*   `False`*:完全*绕过证书验证。（不建议）
*   CA_BUNDLE 文件的路径。requests 将使用它来验证服务器的证书。
*   包含公共证书文件的目录的路径。requests 将使用它来验证服务器的证书。

我的其余答案是关于#4，如何使用包含证书的目录来验证：

获取所需的公共证书并将它们放在一个目录中。

严格来说，您可能“应该”使用带外方法获取证书，但您也可以使用任何浏览器下载它们。

如果服务器使用证书链，请确保获取链中的每一个证书。

根据请求文档，必须首先使用“rehash”实用程序 ( `openssl rehash`) 处理包含证书的目录。

（这需要 openssl 1.1.1+，并且并非所有 Windows openssl 实现都支持 rehash。如果`openssl rehash`对您不起作用，您可以尝试在[https://github.com/ruby/openssl/blob/master运行 rehash ruby​​ 脚本/sample/c_rehash.rb](https://github.com/ruby/openssl/blob/master/sample/c_rehash.rb)，虽然我没有尝试过。）

我在请求识别我的证书时遇到了一些麻烦，但是在我使用`openssl x509 -outform PEM`命令将证书转换为 Base64`.pem`格式后，一切正常。

你也可以只做懒惰的重新散列：

```
try:
    # As long as the certificates in the certs directory are in the OS's certificate store, `verify=True` is fine.
    return requests.get(url, auth=auth, verify=True)
except requests.exceptions.SSLError:
    subprocess.run(f"openssl rehash -compat -v my_certs_dir", shell=True, check=True)
    return requests.get(url, auth=auth, verify="my_certs_dir") 
```

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2016-05-06T21:13:57.057

我与这个问题斗争了几个小时。

我试图更新请求。然后我更新了证书。我将 verify 指向 certifi.where() （无论如何，代码默认情况下都会这样做）。没有任何效果。

最后，我将我的 python 版本更新为 python 2.7.11。我使用的是 Python 2.7.5，它与验证证书的方式有些不兼容。一旦我更新了 Python（和一些其他依赖项），它就开始工作了。

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2017-01-15T20:10:47.843

目前请求模块中存在导致此错误的问题，出现在 v2.6.2 到 v2.12.4 (ATOW) 中：[https ://github.com/kennethreitz/requests/issues/2573](https://github.com/kennethreitz/requests/issues/2573)

此问题的解决方法是添加以下行：`requests.packages.urllib3.util.ssl_.DEFAULT_CIPHERS = 'ECDH+AESGCM:DH+AESGCM:ECDH+AES256:DH+AES256:ECDH+AES128:DH+AES:ECDH+3DES:DH+3DES:RSA+AESGCM:RSA+AES:RSA+3DES:!aNULL:!MD5:!DSS'`

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2021-10-20T20:09:34.757

有些服务器没有 Letsencrypt 的受信任根证书。

例如，假设下面 url 指向的服务器受 Letsencrypt SSL 保护。

```
requests.post(url, json=data) 
```

此请求可能会因 [SSL: CERTIFICATE_VERIFY_FAILED] 而失败，因为请求服务器没有 Letsencrypt 的根证书。

发生这种情况时，请从下面的链接下载活动的自签名“pem”证书。

[https://letsencrypt.org/certificates/](https://letsencrypt.org/certificates/)。（截至撰写本文时，**活跃的 ISRG Root X1 ）**

现在，在验证参数中使用它，如下所示。

```
requests.post(url, json=data, verify='path-to/isrgrootx1.pem') 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2017-06-14T11:07:43.137

正如@Rafael Almeida 所提到的，您遇到的问题是由不受信任的 SSL 证书引起的。就我而言，我的服务器不信任 SSL 证书。为了在不影响安全性的情况下解决这个问题，我[下载了证书](https://superuser.com/questions/97201/how-to-save-a-remote-server-ssl-certificate-locally-as-a-file#answer-97203)，并将其安装在服务器上（只需双击 .crt 文件，然后单击安装证书...）。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2019-04-30T11:59:06.660

就我而言，原因相当微不足道。

我知道 SSL 验证直到几天前才有效，实际上是在另一台机器上工作。

我的下一步是比较正在验证的机器和没有验证的机器之间的证书内容和大小。

这很快导致我确定“不正确”工作机器上的证书不好，一旦我用“好”证书替换它，一切都很好。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2015-08-03T17:29:21.867

如果从另一个包调用请求，则添加选项是不可行的。在这种情况下，将证书添加到 cacert 包是直接路径，例如，我必须添加“StartCom Class 1 Primary Intermediate Server CA”，为此我将根证书下载到 StartComClass1.pem。鉴于我的 virtualenv 名为 caldav，我添加了以下证书：

```
cat StartComClass1.pem >> .virtualenvs/caldav/lib/python2.7/site-packages/pip/_vendor/requests/cacert.pem
cat temp/StartComClass1.pem >> .virtualenvs/caldav/lib/python2.7/site-packages/requests/cacert.pem 
```

其中一个可能就足够了，我没有检查

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2018-03-07T23:22:18.590

我不得不从 Python 3.4.0 升级到 3.4.6

```
pyenv virtualenv 3.4.6 myvenv
pyenv activate myvenv
pip install -r requirements.txt 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2017-07-11T13:26:59.380

我遇到了类似或相同的认证验证问题。我读到 OpenSSL 版本低于 1.0.2，请求所依赖的版本有时在验证强证书时遇到问题（请参阅[此处](https://github.com/certifi/python-certifi#1024-bit-root-certificates)）。CentOS 7 似乎使用 1.0.1e 似乎有问题。

我不确定如何在 CentOS 上解决这个问题，所以我决定允许使用较弱的 1024 位 CA 证书。

```
import certifi # This should be already installed as a dependency of 'requests'
requests.get("https://example.com", verify=certifi.old_where()) 
```

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2021-10-02T06:41:00.723

我找到了修复它的[答案：](https://stackoverflow.com/a/59209977/12653116)

```
import ssl
import certifi
import urllib.request

url = "https://www.google.com/"
html = urllib.request.urlopen(url, context=ssl.create_default_context(cafile=certifi.where())) 
```

不过，我不知道它做了什么。

* * *

## 回答 #26

> 赞同：-2
> 
> 时间：2020-09-02T08:09:26.643

这只是您尝试解决问题的另一种方法。

如果您输入“www.example.com”，请求就会对您大喊大叫。如果您输入“https://www.example.com”，则会收到此错误。因此，如果您不需要 https，则可以通过将“https”更改为“http”来避免错误。例如。“http://www.example.com”

**警告：不使用 HTTPS 通常不是一个好主意**。请参阅[为什么使用 HTTPS？](https://https.cio.gov/everything/) [为什么 HTTPS 很重要](https://web.dev/why-https-matters/)

# html - CSS 和 HTML 中的最小高度

> ID：10667961
> 
> 赞同：1
> 
> 时间：2012-05-19T18:45:34.993
> 
> 标签：html, css

我仍在我的网站上工作，我终于让粘性页脚工作了。下一个问题是我希望列填充所有内容，直到页脚开始。从列底部到页脚顶部没有空格。

[这是我的例子](http://jsfiddle.net/RP5Uk/)

**html**

```
<!DOCTYPE html>
<html>
<head>
    <title>In ontwikkeling!</title>

    <meta charset="utf-8" />

    <link rel="stylesheet" type="text/css" href="css/basis.css" />
</head>

<body>
    <div id="menu">
        Menu
    </div>
    <div id="container">
        <div id="header">
            Header
        </div>
        <div id="sidebar-l">
            <div class="padding">
                Sidebar Links
            </div>
        </div>

        <div id="sidebar-r">
            <div class="padding">
                Sidebar Rechts
            </div>
        </div>

        <div id="content">
            <div class="padding">
                Content
            </div>
        </div>
    <div class="push"></div>
    </div>
    <div id="footer">
        Footer
    </div>
</body>
</html> 
```

**CSS**

```
/* CSS-file behorend bij TNG */

html,body{
    margin:0;
    padding:0;
}

#menu{
    background-color:rgb(255,86,81);
    height:50px;
}

#container{
    width:1000px;
    margin:auto;
}

#header{
    background-color:rgb(224,17,80);
    height:150px;
}

#sidebar-l{
    background-color:rgb(141,171,242);
    width:280px;
    float:left;
    position:fixed;
    height:100%;
}

#sidebar-r{
    background-color:rgb(141,171,242);
    width:220px;
    float:right;
    height:100%;
}

#content{
    background-color:rgb(39,85,92);
    margin-left:280px;
    margin-right:220px;
}

#sidebar-l .padding, #sidebar-r .padding, #content .padding{
    padding:10px;
}

#footer{
    background-color:rgb(84,48,64);
    width:1400px;
    height:66px;
    left:50%;
    margin-left:-700px;
    bottom:0;
    position:fixed;
    clear:both;
}

.push{
    height:66px;
} 
```

当您查看左侧的侧边栏时，我希望内容和“侧边栏权限”相同。CSS和HTML都在上面的链接上！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T21:25:32.967

[我从这个问题](https://stackoverflow.com/questions/8377193/css-100-height-columns-but-with-page-still-scrollable)的选择答案中借用并想出了这个：

[jsFiddle](http://jsfiddle.net/RP5Uk/7/)

基本上，列后面有绝对定位的、可拉伸的、虚拟的元素，因此无论浏览器窗口有多高，它们的背景颜色总是会填满空白。

在我对代码进行的其他各种改进中，我使[粘性页脚现在](http://ryanfait.com/sticky-footer/) *实际上是*粘性的，因为它会根据上面的内容进行调整。调整面板窗口的大小以进行观察。

# c# - 空引用异常数组 2d

> ID：10667971
> 
> 赞同：1
> 
> 时间：2012-05-19T18:46:51.380
> 
> 标签：c#, function, multidimensional-array, nullreferenceexception

我得到了这个类，它有一个 2dArray，当我试图填充它时，我得到错误 NullReferenceException：对象引用未设置为对象的实例 AdminGrid.FullNot(Int32 Row, Int32 Column, Int32 Full, System.String PieceName)

```
public class AdminGrid : MonoBehaviour {

    public int numRows;
    public int numColumns;
    private int[,] ArrayGrid;
    // Use this for initialization
    void Init() {
                numColumns = 6;
                numRows = 6;
        ArrayGrid = new int[numRows,numColumns];

        for(int y = 0;y < numRows;y++)
        {
            for(int x = 0;x < numColumns;x++)
            {
                ArrayGrid[y,x] = 0; 
            }
        }
    }

    public void FullNot(int Row,int Column,int Full,string PieceName)
    {   
        ArrayGrid[Row,Column] = 1;//Error is here
    }

    public int WhatsonGrid(int Row,int Col)
    {
        return ArrayGrid[Row,Col];
    }
} 
```

知道为什么会这样吗？如您所见，我的数组充满了 0，我认为这可以解决此问题，但似乎不是，我还确保值在数组内，这意味着列和行的最大值为 5,5

我用的是Unity引擎所以Init //其实叫start

当游戏开始时它会被调用，这就是为什么我很确定它被调用的原因

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T18:50:59.800

`ArrayGrid`是一个引用类型的字段，所以默认为null，所以我简单的总结一下：你没有调用`Init`. 所以：打电话`Init`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T19:07:44.940

用 AdminGrid 重命名初始化，一切都会好起来的）

```
 public AdminGrid()
{
...
} 
```

# c++ - C++ popen() 的输出到字符串

> ID：10667972
> 
> 赞同：7
> 
> 时间：2012-05-19T18:47:29.970
> 
> 标签：c++, string, file, popen

C++`popen()`在执行一个进程后返回一个包含输出的文件描述符。我需要一个 char* 而不是 FILE*，即。一个字符串作为我的输出。我该怎么办？请帮我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T18:57:32.510

我想我会按照这个一般顺序做一些事情：

```
char big_buffer[BIG_SIZE];
char small_buffer[LINE_SIZE];
unsigned used = 0;

big_buffer[0] = '\0'; // initialize the big buffer to an empty string

// read a line data from the child program
while (fgets(small_buffer, LINE_SIZE, your_pipe)) {
    // check that it'll fit:
    size_t len = strlen(small_buffer);
    if (used + len >= BIG_SIZE)
        break;

    // and add it to the big buffer if it fits
    strcat(big_buffer, small_buffer);
    used += strlen(small_buffer);
} 
```

如果您想要更详细，您可以动态分配空间，并尝试根据需要增加它以保持您获得的输出量。这将是一条更好的路线，除非您至少知道孩子可能会产生多少产出。

编辑：鉴于您使用的是 C++，动态大小的结果实际上非常简单：

```
char line[line_size];
std::string result;

while (fgets(line, line_size, your_pipe))
     result += line; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T18:49:14.973

使用通常的例程将 的输出读`FILE*`入字符串。`stdio`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T10:48:46.153

见[https://stackoverflow.com/a/10702464/981959](https://stackoverflow.com/a/10702464/981959)

您可以在两行中执行此操作（三行包括 typedef 以提高可读性）：

```
#include <pstream.h>
#include <string>
#include <iterator>

int main()
{
  redi::ipstream proc("./some_command");
  typedef std::istreambuf_iterator<char> iter;
  std::string output(iter(proc.rdbuf()), iter());
} 
```

这会处理所有内存分配并在您完成后再次关闭流。

# bash - 抑制 svn remove 的“文件不存在”错误

> ID：10667973
> 
> 赞同：3
> 
> 时间：2012-05-19T18:47:32.760
> 
> 标签：bash, svn, shell

在我的项目中，我有一个文件夹，其中包含我不想手动添加或删除到存储库中的资源，因为我将它们添加或删除到我的工作副本中。

我编写了一个简单的 bash 脚本，它检查`svn state`并调用`svn add`标有 a`?`的`svn remove`文件和带有`!`. 我将此 bash 脚本添加到我的构建脚本中。问题是，`svn remove`当使用本地不再存在的文件调用时返回错误。这导致我的构建脚本被中止并返回错误。

有没有办法抑制这些错误？我试过`--force`了`--quiet`。没有帮助。

例子：

```
MacBook-Pro:proj Bill$ echo "test" > foo.bar
MacBook-Pro:proj Bill$ svn st
?       foo.bar
MacBook-Pro:proj Bill$ svn add foo.bar 
A         foo.bar
MacBook-Pro:proj Bill$ rm foo.bar 
MacBook-Pro:proj Bill$ svn st
!       foo.bar
MacBook-Pro:proj Bill$ svn rm foo.bar
D         foo.bar
svn: 'foo.bar' does not exist 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T20:02:31.093

（至少）有两种不同的情况会`svn stat`打印带有感叹号的行：

1.  该文件存在于存储库中，不存在于工作目录中，并且`svn rm`未被使用。
2.  该文件在存储库中不存在，`svn add`已在该文件上使用，并且该文件不再存在于工作目录中。

`svn rm`在第一种情况下有效，但在第二种情况下退出并出现错误。有几种方法可以解决此问题 - 取决于您想要实现的目标：

*   如果您想在这两种情况下删除文件，请执行以下操作：
    `touch "$filename" ; svn rm --force "$filename"`。
*   如果您只想在第二种情况下删除文件，并在第一种情况下恢复，请执行以下操作：
    `svn revert "$filename"`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T19:57:49.550

因此，要回答我的问题，使用`--keep-local`已解决的问题。

这是我最终使用的脚本。这将检查标记为未版本化 ( `?`) 的文件并调用`svn add`它们。然后它检查标记为缺失 ( `!`) 的文件并调用`svn rm`它们。

```
svn st "$Resources" | grep '^?' | sed 's_^?       \(.*\)$_svn add "\1"_g' | sh
svn st "$Resources" | grep '^!' | sed 's_^!       \(.*\)$_svn rm --keep-local  "\1"_g' | sh 
```

# javascript - 如何将字符串数组响应转换为 javascript 二维数组？

> ID：10667974
> 
> 赞同：0
> 
> 时间：2012-05-19T18:47:48.500
> 
> 标签：javascript, jquery, servlets

我在 JSP 中创建以下字符串响应：

```
[[[1,2,3,4],[5,6,7,8]],[[9,10,11,12],[13,14,15,16]]] 
```

并在 jQuery 中得到这个响应。

但我把它当作一维数组，我只需要数组那样

我得到了回应

```
var a = "[[[1,2,3,4],[5,6,7,8]],[[9,10,11,12],[13,14,15,16]]]"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T19:03:26.990

两种可能的方法：

1.  `var arr = JSON.parse(a);`
2.  `var arr = eval(a);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T18:50:41.027

要从它的字符串表示创建一个任意嵌套的数组（或 JSON 支持的任何对象），您可以使用该`JSON.parse`方法。

```
var arr = JSON.parse("[[[1,2,3,4],[5,6,7,8]],[[9,10,11,12],[13,14,15,16]]]"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T18:50:15.103

你得到的是 JSON，它是一个字符串。您需要将其解析为 JavaScript 对象。

```
var object_a = JSON.parse(a); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T18:51:45.560

尝试这个：

```
var data = JSON.parse(arr): 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-19T19:18:54.073

使用`JSON.parse`：

```
var matrix = JSON.parse(a): 
```

对于 IE8 以下的支持，请使用 jQuery。（如果您的网站已经在使用 jQuery，那就幸运了！`;)`）

# php - Yii 使用 CDbCriteria 连接不显示第二个表中的列

> ID：10667975
> 
> 赞同：0
> 
> 时间：2012-05-19T18:48:08.470
> 
> 标签：php, yii

我正在使用`CDbCriteria`加入两张桌子餐厅和桌子。一家餐厅可以有多张桌子。我想获取餐厅列表以及该特定餐厅的餐桌数量。

我正在使用以下代码：

```
$criteria = new CDbCriteria();
$criteria->select = "t.*, COUNT(t2.id) as rowCount";
$criteria->group = "t2.restaurantId";
$criteria->join = "LEFT JOIN {{tables}} t2 ON t.id = t2.restaurantId";
$criteria->condition = "t.clientId = ".Yii::app()->user->clientId;
$restaurants = Restaurants::model()->findAll($criteria); 
```

当我尝试显示它的值时，`rowCount`它正在显示`Property "Restaurants.tableCount" is not defined`。另外请告诉我这是否是在 Yii 中做事的正确方法，因为我是 Yii 新手

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T19:07:53.960

Yii 的 Active Record[不是这样工作的](https://stackoverflow.com/questions/10316652/doing-join-query-using-cdbcriteria-in-yii-framework)，它只能检索表模式中定义的列，而不是任意的列。

该语句有一个例外，您可能会发现它很有用 - 可以在 Restaurant 模型上定义一个[STAT 关系](http://www.yiiframework.com/doc/guide/1.1/en/database.arr#statistical-query)来计算该餐厅中的桌子数，然后您将能够通过 Active Record 读取它。链接页面有几个很好的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-15T05:02:38.617

您应该将**Restaurants**模型中的属性**rowCount**定义为虚拟属性，然后您将能够通过您定义的 CDBCriteria 检索它。

# javascript - Javascript 触摸事件故障

> ID：10667980
> 
> 赞同：3
> 
> 时间：2012-05-19T18:48:34.220
> 
> 标签：javascript, jquery, jquery-mobile, touch, mobile-safari

我目前正在用 Javascript 创建一些滑块，用于触摸，我得到的结果并不是我所希望的。

按住其中一个滑块手柄时，它会得到一个半透明的深灰色覆盖层（就像在 iOS 上按住它们时所有链接一样）。完成此操作后，无法拖动手柄。

正如您可以想象的那样，这使得它们非常难以使用。

我遇到的另一个问题是页面滚动。除非我获得近乎完美的水平滑动，否则 iOS Safari 会认为我正在尝试滚动页面并停止 js。

我知道它可以解决这些问题，因为 jQuery mobile 没有它们的滑块。我已经浏览了 jQuery 移动滑块的源代码，但我找不到它们是如何防止这些问题的。

关于我能做些什么来解决这个问题的任何想法？

jQuery mobile 的滑块 - [http://jquerymobile.com/demos/1.1.0/docs/forms/slider/](http://jquerymobile.com/demos/1.1.0/docs/forms/slider/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T23:22:42.287

问题 1 - 单击时出现灰色框：

为所有元素添加这个 css：

```
-webkit-tap-highlight-color: rgba(0,0,0,0); 
```

您可能还想使用这些来停止突出显示：

```
-webkit-touch-callout: none;
-webkit-user-select: none;
-khtml-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
user-select: none; 
```

问题 2 - 停止滚动

您将需要事件 touchstart 和 touchend 的处理程序，并且您需要将其添加到处理程序中。

```
event.preventDefault(); 
```

请注意，这也会停止滚动和缩放。如果您仍然想要缩放，您可能需要重新实现或使用其他库。

关于触摸事件的良好参考信息

教程： [http ://www.sitepen.com/blog/2008/07/10/touching-and-gesturing-on-the-iphone/](http://www.sitepen.com/blog/2008/07/10/touching-and-gesturing-on-the-iphone/)

Apple Docs（这对触摸和鼠标事件之间的关系有很好的解释）： [https ://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html](https://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html)

# php - 扩展 mysqli 类中的慢父::__construct

> ID：10667984
> 
> 赞同：3
> 
> 时间：2012-05-19T18:48:59.487
> 
> 标签：php, mysqli

我在数据库类中扩展 mysqli。我注意到调用父构造函数需要将近 2 秒。我想这可能是我的环境，因为我在部署之前在我的桌面上进行开发。但这对我来说似乎不太可能。

环境：

*   操作系统 - Windows 7 专业版
*   WAMP 服务器
*   Apache/2.2.17 (Win32)
*   PHP 5.3.4
*   MySql 版本 5.1.53
*   NetBeans IDE 6.9.1

有问题的代码：

```
class DGMysqliLink extends MySQLi
{
    public function __construct($aDSN)
    {
        // Construct the DSN
        $aDSN['dbhost'] = (empty($aDSN['dbhost']))?ini_get("mysqli.default_host"):$aDSN['dbhost'];
        $aDSN['dbuser'] = (empty($aDSN['dbuser']))?ini_get("mysqli.default_user"):$aDSN['dbuser'];
        $aDSN['dbpass'] = (empty($aDSN['dbpass']))?ini_get("mysqli.default_pw"):$aDSN['dbpass'];
        $aDSN['dbname'] = (empty($aDSN['dbname']))?'':$aDSN['dbname'];
        $aDSN['dbport'] = (empty($aDSN['dbport']))?ini_get("mysqli.default_port"):$aDSN['dbport'];
        $aDSN['dbsock']= (empty($aDSN['dbsock']))?ini_get("mysqli.default_socket"):$aDSN['dbsock'];

        // Instantiate the object by invoking the parent's constructor.
        // This takes nearly 2 seconds
        parent::__construct($aDSN['dbhost'],$aDSN['dbuser'],$aDSN['dbpass'],
                            $aDSN['dbname'],$aDSN['dbport'],$aDSN['dbsock']);

        // If there are any errors, deal with them now
        if($this->connect_error){/* Do some stuff */}
    }
} 
```

为什么调用此构造函数需要这么长时间，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T02:55:54.657

没有办法解决这个问题，这只是 TCP/IP 的开销以及多层客户端和服务器代码相互通信。但是，您可以使用持久连接。它们从 PHP 5.3 开始可用。要激活它们，只需在主机名前加上“p:”，如连接语句中的“p:localhost”。也在 PHP.INI 中启用它：mysqli.allow_persistent = On

除此之外，它都是自动的。

举个例子，我的页面的平均加载时间为 1.3 秒。当我加载了一个主页，进行 4 或 5 次 AJAX 调用来填充表单字段时，这一次很快就跳到了 7 或 8 秒。每个 ajax 调用都意味着一个新的 PHP 脚本，该脚本又与数据库建立了新的连接。好吧，我认为这里的问题很清楚。

使用持久连接允许 PHP 重用已打开的连接，从而节省为每个脚本打开和关闭新连接所花费的所有时间。就我而言，每个连接大约缩短了 1 秒，大大提高了性能。

然而，有一些关于“脏”连接被重用的不良影响的细节。[手册](http://www.php.net/manual/en/mysqli.persistconns.php)中对它们进行了解释，但这里的简短信息是：整理数据库连接和命令，并使其持久化。如果性能是必须的，这就是要走的路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T19:36:34.620

你在使用 tcp 连接吗？解析您要连接的主机名可能会出现 DNS 延迟，并且可能会在 mysql 结束时出现反向 DNS 延迟。

例如，如果您使用的 mysql 用户帐户是`user@example.com`，那么 MySQL 将不得不对您要连接的 IP 进行反向 DNS 查找，以查看是否`example.com`与该 IP 地址匹配。

# c++ - QFileSystemWatcher：添加路径失败 C：（无法观看 Windows 驱动器）

> ID：10667993
> 
> 赞同：1
> 
> 时间：2012-05-19T18:49:26.570
> 
> 标签：c++, file, qt

以下代码引发`failed to add paths`.

```
auto f = new QFileSystemWatcher();
f->addPath("C:");
// Also tried f->addPath("C:/") and f->addPath("C:\\") 
```

添加路径之类的`C:/folder`工作正常。

所以我无法观看 Windows 驱动器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T19:47:14.290

可以同时监视的文件和目录的数量存在系统相关限制。如果已达到此限制，则不会将路径添加到文件系统观察程序，并且将向 stderr 打印一条警告消息，即`failed to add paths`.

# highcharts - 折线图 Highcharts

> ID：10667995
> 
> 赞同：1
> 
> 时间：2012-05-19T18:49:31.423
> 
> 标签：highcharts

我正在尝试折线图，即[http://www.highcharts.com/demo/line-basic](http://www.highcharts.com/demo/line-basic)。需要在每个系列的最后一点之后显示系列名称。尝试使用线和系列的不同绘图选项。然而做不到。

有人可以帮忙吗？

```
function GChart() {
    jQuery(document).ready(function() {
    var Options = {
        chart: {
            renderTo: 'container',
            defaultSeriesType: 'line',
            marginRight: 100,
            marginBottom: 40
        },
        title: {
            x: -20
        },
        subtitle: {
        },
        xAxis: {
        categories: []
        },
        yAxis: {
        },
        tooltip: {
            formatter: function() {
                return '<b>' + this.series.name + '</b><br/>' +
                this.x + ': ' + this.y +      'Kg.';
            }
        },
        legend: {
            enabled: false
        },
        plotOptions: {
            series: {
                marker: {
                    enabled: false
                }
            }
        },
        series: []
    };

    $.get('Newchart.html', function(data) {
        var fulldata = document.getElementById("MyHiddenField").value;
        var MyChartTitle = document.getElementById("MyChartTitle").value;
        var MyChartSubTitle = document.getElementById("MyChartSubTitle").value;
        var MyChartXTitle = document.getElementById("MyChartXTitle").value;
        var MyChartYTitle = document.getElementById("MyChartYTitle").value;

        var lines = fulldata.split('$');
        var series = [];
        var temp;

        $.each(lines, function(lineno, line) {
            temp = line.split('#');
            series.data = JSON.parse("[" + temp[1] + "]");
            series.name = temp[0];
            if (lineno == 0) {
                series.color = "#FF0000";
            }
            else {
                series.color = "#058DC7";
            }

            series.push({ name: series.name, data: series.data, color: series.color });
        });
        Options.series = series;
        Options.title = { text: MyChartTitle, align: 'left', x: 90, y: 74, floating: true };
        Options.subtitle = { text: MyChartSubTitle, align: 'left', x: 120, y: 87, floating: true };
        Options.xAxis.title = { text: MyChartXTitle };
        Options.yAxis.title = { text: MyChartYTitle };
        Options.yAxis.tickInterval = 5;
        Options.xAxis.tickInterval = 1;
        Options.xAxis.min = 5;
        Options.yAxis.min = 5;
        var chart = new Highcharts.Chart(Options);
        });
    });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T16:48:46.493

下面是使用 plotOptions 下的 dataLabel 属性在行尾添加标签的示例。数据标签可以基于每个点附加，在这种情况下只显示最后一个点。在这里工作小提琴：http: [//jsfiddle.net/gK52f/1/](http://jsfiddle.net/gK52f/1/)

仅在一个点上启用数据标签的方法是在数据数组（在系列下）中传递该点的附加属性。我将它传递给最后一点，并使用格式化程序返回系列名称。这会覆盖返回 y 值的默认格式化程序。

```
 {
            dataLabels: {
                enabled: true,
                align: 'left',
                crop: false,
                formatter: function () {
                    return this.series.name;
                },
                x: 5,
                verticalAlign: 'middle'
            },
            y: 54.4
       } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T21:36:56.030

我会为此使用[Highcharts.Renderer](http://www.highcharts.com/ref/#renderer)并在每行的末尾添加系列名称。例如，在图表调用之后：

```
$(chart.series).each(function()
{
  var point = this.points[this.points.length-1];
  chart.renderer.text(this.name,
  point.plotX + chart.plotLeft + 5,
  point.plotY + chart.plotTop + 5).attr(
    {
      zIndex: 5
    }).add();
}); 
```

[产生这个（在这里](http://jsfiddle.net/TkRXA/)小提琴）：

![在此处输入图像描述](../Images/7d85cc2c62df24fa7a414e1434733ae4.png)

# android - 图片上传完成但没有响应

> ID：10667996
> 
> 赞同：1
> 
> 时间：2012-05-19T18:49:32.737
> 
> 标签：android, file-upload, cordova, multifile-uploader

我要从手机间隙 android 应用程序将图像发送到网络服务器。我有一个这样的js文件：

```
 function uploadPic(imageURI,objectId){
        var options = new FileUploadOptions();
        options.fileKey="file";
        options.fileName=imageURI.substr(imageURI.lastIndexOf('/')+1);
        options.mimeType="text/plain";

        var upload_url="http://services.jhj.nl:2357/TWMSServic
         /upload?token="+objectId+"&filenaam="+options.fileName+".jpg";
        alert(upload_url);
        alert(options.fileName);
        var params = new Object();
        params.value1 = "test";
        params.value2 = "param";
        var ft = new FileTransfer();
        ft.upload(imageURI, upload_url, picUploadSuccess, picUploadFailed, options);
      }
       function picUploadSuccess(r){
         alert("Upload Done");
         alert("Code = " + r.responseCode);
         alert("Response = " + r.response);
          alert("Sent = " + r.bytesSent);
           alert(r.response);
         } 
```

现在我遇到了一个问题，即当我将图像发送到服务器时，它会提醒上传完成，字节发送和上传完成正确。我已经将一些更新图像上传到服务器。但它有一些额外的数据无法打开该图像。如果我删除那些额外的数据，那么它会正确打开。请给出一些想法......在此先感谢......