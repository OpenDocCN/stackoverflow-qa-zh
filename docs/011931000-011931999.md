# StackOverflow 问答 11931000-11931999

# csv - 减去 CSV 中的行

> ID：11931000
> 
> 赞同：0
> 
> 时间：2012-08-13T08:57:06.123
> 
> 标签：csv

..我需要修改几个CSV如下...

这就是我所拥有的：

```
2012-08-13 00:15:15; 768.548
2012-08-13 00:30:15; 768.625
2012-08-13 00:45:15; 768.667
2012-08-13 01:00:15; 768.729
2012-08-13 01:15:15; 768.785
2012-08-13 01:30:15; 768.827 
```

但我的分析需要的是：

```
2012-08-13 00:15:15; xxx
2012-08-13 00:30:15; 0.077
2012-08-13 00:45:15; 0.042
2012-08-13 01:00:15; 0.062
2012-08-13 01:15:15; 0.056
2012-08-13 01:30:15; 0.042 
```

我需要做的是从上面的行中减去实际的行。

我做了一些简单的shell脚本来计算这些文件的总和，但从来没有做过那么复杂的事情......

还有一个额外的挑战：第一行/值需要减去前一天在另一个 CSV 中的值。

希望你能帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T09:40:05.707

一个小 awk 脚本怎么样？

```
awk -F';' 'NR==1 {print $1 "; xxx"}; NR > 1 {print $1 "; " $2 - x} {x=$2}' < your_file.csv 
```

至于第一行（目前`xxx`在哪里），我会写一个小 shell 函数：

```
get_last_value()
{
## first argument is the filename
    tail -n 1 $1 | cut -d';' -f2
} 
```

然后将上面的代码段修改为

```
awk -F';' 'NR==1 {print $1 "; " $2 - '$(get_last_value PREVIOUS)'}; NR > 1 {print $1 "; " $2 - x} {x=$2}' THIS_FILE 
```

然后你需要做的就是为每个调用获取`PREVIOUS`和的组合。`THIS_FILE`另请注意，必须使用上面未调整的代码段处理第一个文件（因为没有先前的值）。

# python - 在wxpython中绘制一个有两个点的矩形

> ID：11931002
> 
> 赞同：-1
> 
> 时间：2012-08-13T08:57:12.240
> 
> 标签：python, user-interface, wxpython

如何使用 dc.DrawRectangle() 方法使用两组点绘制矩形，比如说 (X1=10, Y1=20) 和 (X2=100, Y2=200)。它只需要一组点，但我需要它来使用两组点绘制矩形？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T10:17:29.310

```
pt1 = (10, 20)
pt2 = (100, 200)
# calculate top left corner coords, width, height
min_x = min(pt1[0], pt2[0]) # left
min_y = min(pt1[1], pt2[1]) # top
width = max(pt1[0], pt2[0])-min_x
height = max(pt1[1], pt2[1])-min_y
# draw rectangle 
dc.DrawRectangle(min_x, min_y, width, height) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T22:58:41.810

如果你知道 (X1, Y1) 是左上角， (X2, Y2) 是右下角，那么你可以使用：

```
dc.DrawRectangle(X1, Y1, X2-X1, Y2-Y1) 
```

更普遍，

```
dc.DrawRectangle(min(X1,X2), min(Y1,Y2), abs(X1-X2), abs(Y1-Y2)) 
```

应该始终有效（至少对于与 x 和 y 轴对齐的矩形）。

# javascript - 你能推荐一本关于原型继承的好书吗？

> ID：11931003
> 
> 赞同：-1
> 
> 时间：2012-08-13T08:57:12.387
> 
> 标签：javascript, prototypal-inheritance, prototypal

我已经阅读了 Javascript: The Good Parts 并且目前正在阅读 Javascript Patterns，但想深入阅读 Protoypal Inheritance。它不一定是一本 JS 书，但如果是的话，那将是一个奖励。我想更多地了解它是如何存在的以及它的重要原则是什么，而不是仅仅阅读关于它是什么的一章。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:11:19.520

这个问题只有 1 个真正的答案，大师应该/将/将支持我：

O'Reilly - JavaScript：权威指南

Crockford 声称那里有很多很多关于 JS 的糟糕书籍，而这是其中最不坏的。我猜在他的世界里，这是一种赞美。无论如何，如果按照他的标准可以，它应该在你的候选名单上。

# code-signing - 自动“安全”代码签名

> ID：11931008
> 
> 赞同：7
> 
> 时间：2012-08-13T08:57:21.247
> 
> 标签：code-signing, jar-signing

我想在我们的构建服务器（Jenkins）中设置作业以自动签署生成的 jar。

出于显而易见的原因，我不想将证书和凭据放在版本控制中，甚至不想在作业配置中读取。

理想情况下，我希望有某种“签名服务器”，构建服务器可以将 jar 发送到其中进行签名。

根据文档，Eclipse 项目有一个[类似的系统](http://wiki.eclipse.org/JAR_Signing#Where_is_signing_done.3F)。但没有提及他们使用的技术。

那么有人知道“唱歌服务器”解决方案，还是解决这个问题的不同方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T05:53:08.527

Eclispe WIKI 记录了[签名过程](http://wiki.eclipse.org/Platform-releng-signedbuild)，简称

*   使用 scp 将 eclipse-master-${buildId}.zip 复制到使用 pserver 的 eclipse.org 签名暂存区。

`<exec dir="${packtmp}" executable="scp" output="signing.txt"> <arg line="${archiveName} dev.eclipse.org:${stagingDirectory}"/> </exec>`

*   在签名服务器上调用签名脚本 /usr/bin/sign。

`<exec dir="." executable="ssh" output="signing.txt" append="true"> <arg line="build.eclipse.org "cd ${stagingDirectory}; /usr/bin/sign ${stagingDirectory}/${archiveName} mail ${stagingDirectoryOutput}""/> </exec>`

*   轮询服务器以获取输出目录中的签名文件。

`<exec dir="." executable="scp" output="signing.txt" append="true"> <arg line="dev.eclipse.org:${stagingDirectory}/${buildId}-out/${archiveName} ${buildDirectory}/${buildLabel}"/> </exec>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T17:43:40.377

我不确定现有的解决方案。但是，我认为您可以在一天内自行构建解决方案：

机器 A 将运行 Jenkins 并拥有一个共享文件夹 机器 B 将运行任何应用程序/Web 服务器（例如 Apache + PHP）并具有签名密钥。

作为 Jenkins 工作的一部分，您执行以下操作：a) 将 jar 复制到共享文件夹 b) 运行 shell 脚本“wget http:// machineBURL /sign.php?filename=SomeJar.jar”

在机器 B 上，您将拥有 PHP 脚本，它将获取传递的文件名，从共享文件夹中获取具有此文件名的 jar，对其进行签名并将其放回同一文件夹中。

# c# - 调试时是否可以更改命令行参数？

> ID：11931012
> 
> 赞同：0
> 
> 时间：2012-08-13T08:57:27.990
> 
> 标签：c#, visual-studio-2010, debugging, visual-studio-debugging

我创建了一个方法，它根据传递的命令行参数给出不同的消息框输出结果。

目前，每次我想更改命令行参数字符串时，我都必须开始调试。

**有没有办法在调试会话期间更改命令行参数？**

编辑：我添加了一些示例代码

```
private static class MyParsers
    {

    public static List<string> args;

    static MyParsers()
    {
        args = Environment.GetCommandLineArgs().ToList();
    }

        public static List<string> ParseOptions()
        {
            return ParseOptions(true);
        }

        public static List<string> ParseOptions(bool caseSensitive)
        {
            return caseSensitive
                   ? args
                   : args.MyExtToLower();
        }

        public static bool OptionExists(string option)
        {
            return OptionExists(option, true);
        }

        public static bool OptionExists(string option, bool caseSensitive)
        {
            return caseSensitive
                       ? ParseOptions().Contains(option)
                       : ParseOptions().MyExtToLower().Contains(option);
        }

        public static bool OptionExists(string option, string delimiter)
        {
            return OptionExists(option, false, delimiter);
        }

        public static bool OptionExists(string option, bool caseSensitive, string delimiter)
        {
            var args = ParseOptions(caseSensitive);
            for (var i = 1; i < args.Count; i++)
            {
                if (args[i].Contains(option + delimiter)) return true;
            }
            return false;
        }
} 
```

然后我打电话`MessageBox.Show(MyParsers.OptionExists("/list","=").ToString());`

如果命令行参数是*/list=blah*它返回 true。

如果命令行参数是*/listary*它返回 false。

**您建议使用什么方法快速更改命令行参数？**考虑到我正在使用的上述代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T09:11:34.933

问题不在于更改命令行参数，而在于重新执行已经使用不同参数执行的代码。据我了解，您需要使用不同的命令行参数测试您的程序。请考虑以下解决方案以实现您的目标：

*   定义一些方法（`PerformMain`），`string[] args`就像`Main`方法一样接受
*   这个方法应该执行之前保存在`Main`方法中的代码
*   您的 new`Main`可能包含一个字符串 [] 列表，这些是要执行的测试用例
*   您遍历您的 string[] 列表并执行包装器，每次都传递不同的参数
*   **但是请注意，其中的代码包装器`PerformMain`必须是“无状态的”，以便连续执行能够正常工作**
*   这样您就可以轻松测试数百个案例

您的代码可能如下所示：

```
 static void Main(string[] args)
 {
     List<string[]> testCases = new List<string[]>();
     testCases.Add(new string[] { "/test", "xx" });
     testCases.Add(new string[] { "/other" });

     foreach (string[] testCase in testCases)
       Program.PerformMain(testCase);
 }

 static void PerformMain(string[] args)
 {
      // clear state of program
      // execute according to args
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T09:12:29.657

无法更改启动进程的命令行。但是，您可以在应用程序的早期将参数复制到易于访问的“设置”对象中，然后对其进行操作。

**编辑：**不是每次调用时解析命令行的对象中的属性，而是将属性更改为常规属性。然后有一个`Initialise`方法（或使用构造函数，甚至），以便您在启动时只解析一次命令行。然后，您可以使用即时窗口随意更改属性的值，因为它们不是每次都返回命令行。

# emacs - emacs 打印命令输出

> ID：11931021
> 
> 赞同：0
> 
> 时间：2012-08-13T08:57:59.203
> 
> 标签：emacs, elisp

我有一系列使用这种语法的系统调用：

```
(call-process "/bin/sh" nil nil t "-c" command) 
```

`command`shell命令在哪里。我想知道当我在`commands.el`文件中有这些系统调用并使用`emacs --script commands.el`. 目前，命令已执行，但所有输出似乎都被捕获而不是打印。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T11:04:17.320

那么这样的事情呢？

```
(set-buffer (get-buffer-create " output"))
(mapc (function (lambda (cmd) (call-process "/bin/sh" nil t t "-c" cmd)))
  '("echo hello"
    "perl -e \"die qq(goodbye)\"") )
(message "%s" (buffer-string)) 
```

这在输出`at -e line 1.`结束时输出。也许在它之前添加一个空行，或者想办法抑制它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T23:52:38.237

让 emacs 为您管理临时缓冲区可能更容易：

```
(defun run-it (cmd)
  "run CMD in shell and return result as string."
  (with-temp-buffer
    (call-process "/bin/sh" nil t t "-c" cmd)
    (buffer-string))) 
```

# java - 设置 onTabChangedListner 时出错 (Android)

> ID：11931023
> 
> 赞同：0
> 
> 时间：2012-08-13T08:58:03.917
> 
> 标签：java, android, tabs, toast

我正在尝试设置一个`onTabChangedListner()`，我查看了 Stack Overflow 和其他一些网站，到处都是一样的东西，所以我复制了那个代码。这是我当前的代码（这都在 on 内`onCreate()`）

```
getTabHost().setOnTabChangedListner(new onTabChangeListner() {

    @Override
    public void onTabChanged(String tabId) {
        Toast.makeText(this, "A new tab has been selected", Toast.LENGHT_SHORT).show();
    }
}); 
```

我收到 3 个错误：

1.  未知实体`OnTabChangeListner()`

2.  没有适用的方法`(com.mycompany.myapp.MainActivity.(anonymous), java.lang.String,int)`

3.  方法`android.widget.TabHost.setOnTabChangedListner(android.widget.TabHost.OnTabChangeListner) in 'android.widget.TabHost'can not be applied to (com.mycompany.myapp.MainActivity.(anonymous))`

任何帮助，将不胜感激！

更新：这是我的整个 onCreate 后跟 onTabChanged 方法：

@Override public void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); 设置内容视图（R.layout.main）；

```
 TabHost tabHost = getTabHost();

    TabSpec cat1spec = tabHost.newTabSpec("Category 1");
    cat1spec.setIndicator("Category 1");
    cat1spec.setContent(R.id.tab1c);

    TabSpec cat2spec = tabHost.newTabSpec("Category 2");
    cat2spec.setIndicator("Category 2");
    cat2spec.setContent(R.id.tab2c);
    TabSpec cat3spec = tabHost.newTabSpec("Favourites");
    cat3spec.setIndicator("Favourites");
    cat3spec.setContent(R.id.tab3c);

    tabHost.addTab(cat1spec);
    tabHost.addTab(cat2spec);
    tabHost.addTab(cat3spec);

    getActionBar().setHomeButtonEnabled(true);

    tabHost.setOnTabChangedListener(this);
}

@Override
public void onTabChanged(String tabId) {
    //Something will happends here
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T09:19:00.817

您发布的代码部分看起来很干净，我无法从您发布的错误消息中找到任何内容。项目中的几行代码可能有助于发现问题。

请看下面的代码，检查你是否遵循任何模式。

```
TabHost tabs = (TabHost) body_view.findViewById(R.id.media_tabs);
    tabs.setup();

    tabs.addTab(tabs.newTabSpec(ALBUMS_TAB));
    tabs.addTab(tabs.newTabSpec(ARTISTS_TAB));

tabs.setOnTabChangedListener(new OnTabChangeListener() {
      @Override
      public void onTabChanged(String tabId) {
        if (tabId.equals(ARTISTS_TAB)) {
          artistsFlipper.setDisplayedChild(0);
        } else if (tabId.equals(ALBUMS_TAB)) {
          albumsFlipper.setDisplayedChild(0);
        }
      }
 }); 
```

> 或者

```
public class MyTabActivity extends TabActivity implements OnTabChangeListener {

    private TabHost tabHost;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        /* Your onCreate code here */

        tabHost.setOnTabChangedListener(this);
    }

    /* ... */

    @Override
    public void onTabChanged(String tabId) {
        /* Your code to handle tab changes */
    }
} 
```

上述解决方案来自[这里](https://stackoverflow.com/questions/2243360/how-to-use-tabhost-ontabchangelistener-in-android)

# android - WIFI_P2P_CONNECTION_CHANGED_ACTION, Wifi Direct, Android

> ID：11931024
> 
> 赞同：1
> 
> 时间：2012-08-13T08:58:04.460
> 
> 标签：android, broadcastreceiver, wifi-direct

我正在尝试连接两个`Wifi-direct`在 Android 中使用的 P2p 设备。我确保我拥有所有`permissions`需要并`Broadcast Receiver`已注册。但我仍然没有听`WIFI_P2P_CONNECTION_CHANGED_ACTION`动作。请建议我克服这个问题或建议我其他解决方案。谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T17:16:44.410

如文档 [1] 中所示，您可以通过这种方式实现连接。

```
 public void connect() {

    WifiP2pConfig config = new WifiP2pConfig();
    config.deviceAddress = "DEVICE_TO_CONNECT_MAC_ADDRESS";
    config.wps.setup = WpsInfo.PBC;

    mManager.connect(mChannel, config, new ActionListener() {

        @Override
        public void onSuccess() {
            // WiFiDirectBroadcastReceiver will notify us. Ignore for now.
        }

        @Override
        public void onFailure(int reason) {
            Toast.makeText(WiFiDirectActivity.this, "Connect failed. Retry.",
                    Toast.LENGTH_SHORT).show();
        }
    });
} 
```

之后，修改 BroadcastReceiver 以使用 WifiP2pManager 的实例请求连接信息，如

```
if (WifiP2pManager.WIFI_P2P_CONNECTION_CHANGED_ACTION.equals(action)) {

    if (mManager == null) {
         return;
    }
    NetworkInfo networkInfo = (NetworkInfo) intent
               .getParcelableExtra(WifiP2pManager.EXTRA_NETWORK_INFO);

    if (networkInfo.isConnected()) {
         // We are connected with the other device, request connection
         // info to find group owner IP

         mManager.requestConnectionInfo(mChannel, connectionListener);
    }
} 
```

此块应在侦听 WIFI_P2P_CONNECTION_CHANGED_ACTION 意图的 BrodacastReceiver 上实现。

现在，实现接口 WifiP2pManager.ConnectionInfoListener[2]。

```
@Override
public void onConnectionInfoAvailable(final WifiP2pInfo info) {

    // InetAddress from WifiP2pInfo struct.
    InetAddress groupOwnerAddress = info.groupOwnerAddress.getHostAddress());

    // After the group negotiation, we can determine the group owner.
    if (info.groupFormed && info.isGroupOwner) {
        // Do whatever tasks are specific to the group owner.
        // One common case is creating a server thread and accepting
        // incoming connections.
    } else if (info.groupFormed) {
        // The other device acts as the client. In this case,
        // you'll want to create a client thread that connects to the group
        // owner.
    }
} 
```

希望这有帮助。:)

[1] - [http://developer.android.com/training/connect-devices-wireless/wifi-direct.html#connect](http://developer.android.com/training/connect-devices-wirelessly/wifi-direct.html#connect)

[2] - [http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.ConnectionInfoListener.html](http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.ConnectionInfoListener.html)

# android - 使用复选框从 ListView 中获取选中的项目

> ID：11931025
> 
> 赞同：3
> 
> 时间：2012-08-13T08:58:08.313
> 
> 标签：android, android-widget, android-listview, android-checkbox

我有一个`ListView`与`CheckBox`. 我想从`ListView`我们选择多个文件的示例 MyFiles 应用程序中获取所选项目，`CheckBox`然后单击单个删除按钮以删除所有文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T09:03:23.903

```
 boolean bulkflag = false;
  ListView reportslistview = (ListView) findViewById(android.R.id.list);
  public class MyAdapter extends SimpleAdapter {
    //private List<Table> tables;
    SharedPreferences prefs;
    private Activity activity;
    String val = "";

    //@SuppressWarnings("unchecked")
    public MyAdapter(Activity context, List<? extends Map<String, String>> tables, int resource, String[] from,
            int[] to) {
        super(context, tables, resource, from, to);
        //this.tables = (List<Table>) tables;
        activity    =   context;
    }

    public View getView(final int position, final View convertView, ViewGroup parent) {
        View row = super.getView(position, convertView, parent);
        if (row == null) 
        {
            LayoutInflater inflater = (LayoutInflater) activity
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            row = inflater.inflate(R.layout.reports_list, null);
        }       

        final CheckBox cBox=(CheckBox)row.findViewById(R.id.cb1);
        if(bulkflag)
        {
            cBox.setVisibility(View.VISIBLE);
        }
        else
        {
            cBox.setVisibility(View.GONE);
        }
        cBox.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                if(cBox.isChecked())
                {
                    selectedIds.add(recIdArr.get(reportslistview.getPositionForView(cBox)));
                    //System.out.println("position "+reportslistview.getPositionForView(cBox));
                }
                else
                {
                    selectedIds.remove(recIdArr.get(reportslistview.getPositionForView(cBox)));
                }
            }
        });
        return row;
    }
} 
```

检查====>

```
 for(int i=0;i<selectedIds.size();i++)
 {
    System.out.println("delete multiple"+selectedIds.size()+" "+Integer.parseInt(selectedIds.get(i)));
 } 
```

声明`selectedIds`为全局变量

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-24T22:25:38.477

对我有用的非常简单的解决方案：

像这样，您可以通过对 ArrayAdapter 使用已经存在的 ArrayList 来遍历 ListView。

```
for(int i = 0; i < ArrayList.size();i++){

if((CheckBox)listView.getChildAt(i).findViewById(R.id.checkBox) != null){

    CheckBox cBox=(CheckBox)listView.getChildAt(i).findViewById(R.id.checkBox);

    if(cBox.isChecked()){
        Log.e("CB", ""+i);
    }
 }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T09:02:06.757

您需要将 OnClickListener 添加到您的复选框（在您的适配器中）。当按下按钮时，此侦听器必须与您要删除的文件保持最新列表。

就像是 ：

选中 => 添加到列表
未选中 => 从列表中删除

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T09:12:17.770

```
Listview list;

ArrayAdapter<String> aa=new ArrayAdapter<String>this,android.R.layout.simple_list_item_multiple_choice,"Arraylist name");

list.setAdapter(aa);
list.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> arg0, View arg1,
                int arg2, long arg3) {
     //code 
   } 
```

# javascript - jQuery 在 remove() 之后检查输入是否存在

> ID：11931028
> 
> 赞同：1
> 
> 时间：2012-08-13T08:58:12.983
> 
> 标签：javascript, jquery, input

我有一个表单，用户应该在其中选择预定义的数据，在名为的输入字段中添加新数据，`xxx`然后他/她可以继续进行。

选择预定义数据时，会创建一个新的隐藏输入

`$('.selectlists').append('<input type="hidden" name="select" value="1" />')`

我有一个函数可以检查隐藏字段是否存在以及输入`xxx`是否有任何值

```
function checkAll(){
        if( $("input[name*='select']") ){
            alert('ok');
        }
        else{
            if ( $("input[name*='xxx']").val() != '') {
                alert('ok');
            }
        }
    } 
```

该功能工作正常。但是，如果我创建隐藏输入然后使用 jQuery 的函数将其删除`remove()`，我的函数`checkAll()`显示隐藏输入仍然存在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T09:02:43.200

```
if($("input[name*='select']")) ... 
```

应该检查长度...

```
if( $("input[name*='select']").length > 0) 
```

JQuery 返回一个匹配元素的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T09:03:05.180

你创建输入像

`$('.selectlists').append('<input type="hidden" name="select" value="1" />')`.

正确的 ？

```
$('.selectlists input[name="select"]').remove(); 
```

**尝试**方法`checkAll`：

```
if( $(".selectlists input[name='select']") ){
            alert('ok');
        } 
```

或者

```
if( $(".selectlists input[name='select']").length ){
            alert('ok');
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T09:05:40.237

使用该`length`属性来测试某个元素是否存在，因为该函数`$()`返回一个对象数组，并且在 javascript 中，所有数组的计算结果都为 true，即使它们为空也是如此。

```
if( $("input[name*='select']").length ){
     alert('ok');
} 
```

这样，如果没有`input[name*='select']`长度将为零并且表达式将评估为假。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T09:05:46.723

当输入字段不存在时，您的检查将显示一个带有“确定”的警报框，因为

```
$("input[name*='xxx']").val() 
```

将返回“未定义”且不匹配空字符串。

您可以通过检查 jQuery 对象是否返回任何命中或检查“未定义”来检查元素是否存在

这些中的任何一个都应该起作用：

```
typeof $('input[name=xxx]').val() === 'undefined' 
```

或者

```
$('input[name=xxx]').length === 0 
```

我更喜欢选项 2。因为它似乎对 jQuery 的更改更加健壮。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T09:06:07.803

```
function isexists(){
   var hiddenLen = $(".selectlists input[name*='select']:hidden").length,
       hasval = $.trim( $("input[name*='xxx']").val() ).length;
   return {
      hiddedexists: !len,
      hasval : !hasval
    };
} 
```

您可以像这样使用此功能：

```
var exists = isexists();

exists.hiddenexists; // true of false
exists.hasval;  // true of false 
```

### 笔记

`!len``true`否则会给。`len=0`_`false`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-13T09:13:16.327

你可以试试这个

```
 if( jQuery("*[name='select']") ){
            alert('ok');
        } 
```

# c# - 连字符/破折号打破搜索

> ID：11931031
> 
> 赞同：-1
> 
> 时间：2012-08-13T08:58:25.313
> 
> 标签：c#, asp.net, sql

当名称包含连字符时，它无法获取正确的行。它实际上并没有获取任何东西

XAml：

```
 <asp:EntityDataSource ID="EntityDataSource1" runat="server" ConnectionString="name=Entities"
        DefaultContainerName="Entities" EnableFlattening="False" EntitySetName="CustomerClassifications">
    </asp:EntityDataSource>

        <div class="searchWrapper">
            Search
            <asp:Panel DefaultButton="btnSearch" runat="server" ID="pnlSearch">
            <asp:TextBox ID="tbxSearch" runat="server" CssClass="tbxSearch">
            </asp:TextBox>
            <asp:Button ID="btnSearch" runat="server" CssClass="btnSearch" Text="Search" />
            </asp:Panel>
        </div> 
```

代码背后：

```
 this.EntityDataSource1.WhereParameters.Clear();
            if (string.IsNullOrEmpty(tbxSearch.Text))
            {
                this.EntityDataSource1.Where = "1 = 1";
            }
            else
            {
                this.EntityDataSource1.Where = "it.Name =  @Name ";
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T09:50:41.623

您正在清除，但在第二个 where 子句中`WhereParameters`使用参数。`@Name`我认为你不应该清除`WhereParameters`.

# entity-framework-4 - EF5 递增唯一 ID 而不调用 savechanges 直到用户请求保存

> ID：11931034
> 
> 赞同：1
> 
> 时间：2012-08-13T08:58:29.360
> 
> 标签：entity-framework-4

如何根据子表中的父表唯一ID向表和子表中添加多个项目，而无需在每次添加行时调用保存更改，只有当用户单击保存按钮时才必须提交更改

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T19:28:57.840

这取决于您定义实体的方式。如果您使用[独立的关联](https://stackoverflow.com/questions/5281974/code-first-independent-associations-vs-foreign-key-associations/5282275#5282275)，它会简单地工作。

如果您使用外键关联，则必须为主体实体使用临时键，并将它们设置为依赖实体中的外键属性。父项中的这些临时键必须是唯一的（例如使用负值），EF 会在保存更改时自动将它们替换为实际值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T13:02:49.460

实体框架首先插入父记录并使用其自动递增的标识值来设置子项的任何外键值。EF 可以这样做，因为 SQL Server 在事务范围内增加标识列，因此在事务尚未提交时分配新值。（回滚后的新插入显示标识列缺少在回滚事务中分配的值）。

所以做类似的事情没问题

```
var cust = new Customer { ... };
context.Customers.AddObject(cust); // (or Add() with DbContext).
var ord = new Order  { ... };
ord.OrderLines.Add(new OrderLine  { ... });
cust.Orders.Add(ord);
context.SaveChanges(); 
```

where`...`是用于设置属性的占位符（没有父 ID）。

# javascript - 为什么在 for in 循环中使用“var”？

> ID：11931035
> 
> 赞同：3
> 
> 时间：2012-08-13T08:58:29.830
> 
> 标签：javascript, for-loop

这似乎是一个简单的问题，但我找不到这个答案..

例如，如果我有以下对象：

```
 var a = {
    foo : "FOO",
    bar : "BAR"
  } 
```

现在，如果我想列出对象的属性，我应该执行以下操作：

```
 for( var b in a ) {
    // do something
  } 
```

或者，我可以这样做：

```
 for( b in a ) {
    // do something
  } 
```

但是，**这些方法之间有什么区别？为什么在 for in 循环中使用“var”或为什么不使用“var”？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T09:00:31.370

如果您使用之前未声明的变量而没有添加`var`，则创建一个全局变量。

```
function scope() {
    a = "hi";      // global
    var b = "ho";  // local
} 
```

* * *

但是，两者没有区别

```
for (var b in a) { /* .. */ } 
```

和

```
var b;
for (b in a) { /* .. */ } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T09:01:04.933

如果没有 var，`b`则成为全局变量，然后能够与`b`可能导致错误或意外行为的另一个定义进行交互。

例如，

```
function example1(){
 for( b in a ){
  example2();
  //now when b comes back, it will reference the last item from example2,
  //essentially skipping the entire interior of a.
 }
}

function example2(){
 for( b in a ){
  //access a[b]
 }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T09:01:25.457

如果您不键入`var`，则将声明一个全局变量，因此如果您以后不打算使用它，那将没有意义，您将在不需要它的情况下消耗内存

# entity-framework - 如何将 EF 代码优先 V4 映射到链接服务器

> ID：11931036
> 
> 赞同：1
> 
> 时间：2012-08-13T08:58:31.747
> 
> 标签：entity-framework, linked-server

我想查询一个 Access 数据库，因为 EF 不支持 Access 数据库，所以我已经为我的 Access 数据库创建了一个链接服务器。问题是：下一步是什么？如何查询链接服务器？我如何更新行？如何将链接服务器中的表映射到 EF 代码第一类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T09:11:21.623

你不能因为 EF 不支持链接服务器。您可以尝试为链接表创建可更新的数据库视图并映射这些视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T09:15:01.317

链接服务器大概是 SQL Server。您可以使用数据库优先方法使用该 SQL 服务器上的数据库生成 EDMX 模型，也可以使用代码优先方法生成数据库，并使用 Access 链接到该数据库。

# objective-c - 使用自定义协议和委托在视图控制器之间传递图像

> ID：11931037
> 
> 赞同：0
> 
> 时间：2012-08-13T08:58:32.743
> 
> 标签：objective-c

我是目标 C 的初学者。我想将图像从`ViewController`to传递`SecondClass`给以显示`SecondClass`已经在`ViewController`. 但是传输后的传输`imageview`显示值，按下按钮后`null`我无法到达。`secondClass`我的代码如下，

**我的协议.h**

```
@protocol myProtocol <NSObject>

-(UIImage *)transferImage;

@end 
```

**ViewController.h 文件**

```
#import "SecondClass.h"

@interface ViewController : UIViewController<myProtocol, UINavigationControllerDelegate>

{

   UIView *view;

}

@property (nonatomic,retain) UIImageView *imageView;

- (IBAction)sendImage:(id)sender;

@end 
```

**ViewController.m 文件**

```
#import "ViewController.h"

#import "SecondClass.h"

#import "myProtocol.h"

(void)viewDidLoad

{

    [super viewDidLoad];

     imageView = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"photo1.png"]];

     [view addSubview:imageView];

    NSLog(@"I am in VC.m");

}

-(UIImage *)transferImage{

    NSLog(@"I am in transferImage");

    return imageView.image;

}

- (IBAction)sendImage:(id)sender {

    SecondClass *secClass = [[SecondClass alloc]init]; 

    secClass.delegate=self;

    [secClass callTransfer];

    NSLog(@"I am in sender");

    [self.navigationController pushViewController:secClass animated:YES];

}

@end 
```

**第二类.h**

```
#import "myProtocol.h"

#import "ViewController.h"

@interface SecondClass : UIViewController<myProtocol,UINavigationControllerDelegate>

{
    UIView *secondView;

    IBOutlet UIImageView *myImage;

    id <myProtocol> myDelegate;

}

@property (nonatomic,retain) UIImageView *myImage;

@property(nonatomic,assign) id delegate;

-(void)callTransfer;

@end 
```

**第二类.m**

```
#import "SecondClass.h"

#import "ViewController.h"

#import "myProtocol.h"

@implementation SecondClass

@synthesize delegate,myImage;

- (void)viewDidLoad

{
    [super viewDidLoad];

  [secondView addSubview:myImage];

}

-(void)callTransfer

{
    myImage.image=[delegate performSelector:@selector(transferImage)];

    myImage.image=[UIImage imageNamed:@"photo1.png"];

    NSLog(@"%@",myImage.image);

    NSLog(@"I am in call transfer");

}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:09:56.633

使用此代码并检查它

```
UIImage *img = [delegate performSelector:@selector(transferImage)]; 
NSLog(@"%@",img );
NSLog(@"I am in call transfer"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T09:27:56.747

您在这里不需要委托，您将数据传递到新视图控制器的简单任务大大复杂化了。

```
SecondClass *secClass = [[SecondClass alloc] init]; 

secClass.myImage.image = imageView.image;

[self.navigationController pushViewController:secClass animated:YES]; 
```

## 更新

你提到这是为了练习 - 但它仍然是根本错误的。对于委托人来说，更正常的情况是发送图像，`child -> parent`而不是从`parent -> child`父代拥有子代，并且可以在没有设置详细协议的情况下调用方法。

```
#import "ChildVC.h"

@interface ParentVC : UIViewController <ChildDelegate>

@end

@implementation ParentVC

- (void)pushViewController;
{
    ChildVC *childVC = [[ChildVC alloc] init];
    childVC.delegate = self;
    [self.navigationController pushViewController:childVC animated:YES];
}

- (void)childViewController:(ChildVC *)childViewController didFinishWithImage:(UIImage *)image;
{
    // do something with the image passed back
}

@end 
```

然后孩子看起来像

```
@class ChildVC;

@protocol ChildDelegate <NSObject>

- (void)childViewController:(ChildVC *)childViewController didFinishWithImage:(UIImage *)image;

@end

@interface ChildVC : UIViewController

@property (nonatomic, weak) id<ChildDelegate> delegate;
@property (nonatomic, strong) UIImage *image;

@end

@implementation ChildVC

- (void)whenSomethingInterestingHappens;
{
    if ([self.delegate respondsToSelector:@selector(childViewController:didFinishWithImage:)]) {
        [self.delegate childViewController:self didFinishWithImage:self.image];
    }
    [self.navigationController popViewControllerAnimated:YES];
}

@end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-04T10:23:29.940

```
how to pass two view controller image for delegate method :

//step 1: create for delegate method :

@protocol DrawViewDelegate
-(void)didReceiveDrawImage:(UIImage *)DrawImage;
 @end

step2: delegate pass for your first view:

@interface EditorViewController :
 UIViewController< DrawViewDelegate > 
```

// step3: 你必须是视图控制器通过视图时间

```
like : crop.delegat=self; 
```

// step:4 传递第二个视图控制器协议

```
@protocol DrawViewDelegate; 
```

// step:5 使用方法set image pass other view:

```
[_delegate didReceiveDrawImage:savedimage];

//step: 6 get second view image to first view

-(void)didReceiveDrawImage:(UIImage *)DrawImage 
```

# php - 从 memcached 获取对象并在 PHP 中设置为 self

> ID：11931038
> 
> 赞同：-1
> 
> 时间：2012-08-13T08:58:36.613
> 
> 标签：php, memcached

我有一个映射到数据库行的用户类。我将它作为键值对缓存在 memcached 中，用户 ID 作为 memcached 键。我想将所有用户功能封装到用户类中，包括填充用户类字段。从 PDO 获取时，我使用 PDO::FETCH_INTO 将值存储在 self 对象中。如何使用 memcached 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T12:25:16.997

您的问题和后续评论的措辞有些模棱两可，但它们仍然为我指明了以下方向：

```
public function __construct($id) {
    global $pdo, $memcached;

    $data = $memcached->get($id);
    if($memcached->getResultCode() == Memcached::RES_SUCCESS) {
        // this is not currently allowed in PHP
        $this = $data;

        // this should be your fix
        foreach($data AS $key => $value) {
            $this->$key = $value;
        }

        // or this
        foreach($this AS $key => $value) {
            $this->$key = $data[$key];
        }

        // the difference between the fixes above is that
        // the second is strictly limited to values defined
        // by the class (current object)
    }
    else {
        $pdos = $pdo->prepare('SELECT * FROM table_name WHERE id = ?');
        if($pdos) {
            // this is not allowed in PHP
            $pdos->execute(array(intval($id)));
            $this = $pdos->fetch(PDO::FETCH_CLASS, get_class($this));

            // all of this should work fine and is allowed
            $pdos->setFetchMode(PDO::FETCH_INTO, $this);
            $pdos->execute(array(intval($id)));
            $pdos->fetch(PDO::FETCH_INTO);
        }
    }
} 
```

但不幸的是，PHP 不允许在内部（在它自己的方法调用中）覆盖 $this 的值，因此可以做的替代方法是使用静态方法。

```
public static function getByID($id) {
    global $pdo, $memcached;

    $data = $memcached->get($id);
    if($memcached->getResultCode() == Memcached::RES_SUCCESS) {
        // this will work if your objects construct has a 
        // foreach similar to the ones presented above
        $result = new self($data);

        // or if you don't want to write a foreach in
        // the construct you can have it here
        foreach($data AS $key => $value) {
            $this->$key = $value;
        }

        // or here
        foreach($this AS $key => $value) {
            $this->$key = $data[$key];
        }
    }
    else {
        $pdos = $pdo->prepare('SELECT * FROM table_name WHERE id = ?');
        if($pdos) {
            // either of these should work
            $pdos->execute(array(intval($id)));
            $result = $pdos->fetch(PDO::FETCH_CLASS, get_class($this));

            // either of these should work
            $result = new self;
            $pdos->setFetchMode(PDO::FETCH_INTO, $result);
            $pdos->execute(array(intval($id)));
            $pdos->fetch(PDO::FETCH_INTO);
        }
    }

    return($result);
} 
```

使用语法是`MyClass::get($some_id)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T09:39:03.007

答案是“只做”或“你不做”。

如果您将信息单独保存为键/值，则不能一键完成，您只需手动检索它们（创建一个新对象，用来自 memcached 的计算键填充自身）。

如果你有一个在 memcached 中序列化的对象，你可以检索它并反序列化。

# python-3.x - 使用二分搜索在列表中查找多个项目

> ID：11931040
> 
> 赞同：0
> 
> 时间：2012-08-13T08:58:39.390
> 
> 标签：python-3.x, recursive-datastructures

这就是我所做的，但这只在列表中找到一个项目我想打印出项目 36 的两个索引如果我发布这个的方式或我的问题不清楚，请帮助这是我到目前为止所做的我道歉提前[代码]

```
def main():

    mylist=[]
    for i in range(20):
        mylist.append(i*3)

    mylist.append(36)
    mylist.sort()
    print mylist
    binarySearch(mylist,0,len(mylist),36)

def binarySearch(thelist,lower,upper,item):

    if upper<lower:

        print 'item not in the list'
        return 

    middle=(lower+upper)/2

    if thelist[middle]<item:
        lower=middle+1
        binarySearch(thelist,lower,upper,item)

    elif thelist[middle]>item:
        upper=middle-1
        binarySearch(thelist,lower,upper,item)

    else: 
        print 'the item was found at index ',thelist[middle],middle
        return

main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T17:50:02.683

您可以创建一个函数来处理这个问题，并返回一个索引列表而不是一个整数：

```
def check_for_number_around_index(index, sorted_list):
  indices = [index]
  i = index - 1
  while(i >= 0 and sorted_list[i] == sorted_list[index]):
    indicies.append(i)
    i = i - 1
  i = index + 1
  while( i < len(sorted_list) and sorted_list[i] == sorted_list[index]):
    indicies.append(i)
    i = i + 1
  return indicies 
```

# c++ - 命名空间中的函数阴影

> ID：11931041
> 
> 赞同：5
> 
> 时间：2012-08-13T08:58:40.033
> 
> 标签：c++, namespaces, method-hiding

假设您有以下代码

```
namespace a{
  struct S{};
  //void f(int){}
}

namespace b{
  struct T{};
}

struct X{};

void f(X){}
void f(b::T){}
void f(a::S){}

namespace a{
  void g(){

    S s;b::T t; 
    X x;
    f(x);
    f(s);
    f(t);
  }

}

int main(){
  a::g();
} 
```

如果在命名空间 a 中定义（第 3 行未注释），它会影响and`void f(int){}`的后续定义，但不会影响。为什么？`void f(b::T){}``void f(a::S){}``void f(X){}`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T09:06:17.147

它会隐藏`f(char)`并将`f(int)`被调用，因为 char 可以隐式转换为 int。 [http://liveworkspace.org/code/8d7d4e0bc02fd44226921483a910a57b](http://liveworkspace.org/code/8d7d4e0bc02fd44226921483a910a57b)

编辑。

`f(int)`命名空间 A 中有函数。`f(A::S)`全局命名空间中有函数。我们试图调用 f(s)，其中 s`A::S`来自函数 g，它位于命名空间中`A`，编译器发现，该函数应应用 S `(A::S)`，但命名空间中没有这样的函数`A`，因此编译器停止并给出错误。 [http://liveworkspace.org/code/5f989559d2609e57c8b7a655d5b1cebe](http://liveworkspace.org/code/5f989559d2609e57c8b7a655d5b1cebe)

全局命名空间中有函数`f(B::T)`。试图在命名空间 A`(f(int))`和命名空间 B 中查找（因为 arg-type 在命名空间 B 中），没有找到，编译器停止。 [http://liveworkspace.org/code/4ebb0374b88b29126f85038026f5e263](http://liveworkspace.org/code/4ebb0374b88b29126f85038026f5e263)

`f(X)`全局命名空间中有函数，在全局`X`命名空间中，查看命名空间 A`(f(int))`和全局命名空间 (find `f(X)`) - 一切正常。 [http://liveworkspace.org/code/c9ef24db2b5355c4484aa99884601a1a](http://liveworkspace.org/code/c9ef24db2b5355c4484aa99884601a1a)

有关更多信息，请阅读 C++ 标准的第 3.4.2 节（草案 n3337）。或者，更简单的[http://en.wikipedia.org/wiki/Argument-dependent_name_lookup](http://en.wikipedia.org/wiki/Argument-dependent_name_lookup)

# iphone - 安装应用程序后在 iPhone 中隐藏应用程序主图标

> ID：11931046
> 
> 赞同：-2
> 
> 时间：2012-08-13T08:59:04.417
> 
> 标签：iphone, ios, icons, hide

我正在开发一个应用程序，在该应用程序中，我需要在 iPhone 上安装该应用程序，以便在安装应用程序后它的图标不会显示在 iPhone 中。

这个功能在 iOS 中可用吗？苹果支持这种功能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T09:26:38.583

虽然您无法从主屏幕上完全删除您的应用程序图标，但您可以使其不可见。但是，该图标虽然不可见，但仍然可以点击。**此外，您的应用程序永远不会以这种方式获得 App Store 的批准。**

如何使您的应用程序不可见：

1.  创建一个完全透明的 PNG 文件，并将其用作图标。启用“预渲染”复选框以确保您的图标没有应用渐变。

2.  在您的 .plist 文件中，从“Bundle display name”中删除字符串“${PRODUCT_NAME}”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-24T10:45:37.197

将此添加到应用程序的 Info.plist 中。

```
<key>SBAppTags</key>
  <array>
    <string>hidden</string>
  </array> 
```

而已。

# android - 如何让 ToneGenerator 播放时间超过 3 秒

> ID：11931048
> 
> 赞同：2
> 
> 时间：2012-08-13T08:59:10.560
> 
> 标签：android, media-player, beep, tone-generator

我有这个代码

```
 ToneGenerator tg=new ToneGenerator(AudioManager.STREAM_NOTIFICATION, 100);
 tg.startTone(ToneGenerator.TONE_CDMA_ONE_MIN_BEEP, 5000); 
```

工作正常，但哔哔声的播放非常短（大约 200 毫秒）

无论我是否将持续时间设置为 5000 毫秒或更多，仍然没有任何变化:(。

是否可以控制哔哔声的持续时间？

```
//this is the definition of the function defined in android
public boolean startTone (int toneType, int durationMs) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T17:00:38.340

我认为问题在于您使用的音调：TONE_CDMA_ONE_MIN_BEEP 是持续时间为 400 毫秒的哔哔声（[链接](http://developer.android.com/reference/android/media/ToneGenerator.html#TONE_CDMA_ONE_MIN_BEEP)）

您应该使用连续或持续至少 5000 毫秒的哔声（您可以在我链接的页面上找到一些）。

# ruby-on-rails - Rails 唯一列有重复项

> ID：11931049
> 
> 赞同：1
> 
> 时间：2012-08-13T08:59:12.857
> 
> 标签：ruby-on-rails, ruby, validation, postgresql

这是我的模型的精简版。

```
model Paper
  PAPER_STARTING_NUMBER = 1

  validate_uniqueness_of :number, :allow_blank => true
  before_create :alocate_paper_number

  def alocate_paper_number
    return true if self.number.present?
    p_number = Paper.maximum('number') || Paper::PAPER_STARTING_NUMBER 
    self.number = p_number >= Paper::PAPER_STARTING_NUMBER ? p_number+1 : Paper::PAPER_STARTING_NUMBER 
    return true 
  end
end 
```

问题是我在数字列中有重复项。任何想法为什么以及如何在不更改回调的情况下解决此问题。我知道我可以在数据库上添加唯一性验证或对该列进行序列化，还有其他想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T09:53:04.377

首先你必须了解回调的顺序：

（-） 节省

（-） 有效的

(1) before_validation

（-） 证实

(2) after_validation

(3) before_save

(4) before_create

（-） 创造

(5) after_create

(6) after_save

(7) after_commit

如您所见，它验证了您的`number`属性的唯一性，然后 before_create 可以自行处理与您的验证想要完成的内容相反。

关于更简洁的架构，我会将这两个想法放在您的自定义模型中，因为用户似乎无法选择数字。这只是一个增量器，对吧？

```
def alocate_paper_number
  p_number = Paper.maximum('number') || Paper::PAPER_STARTING_NUMBER 
  self.number = p_number + 1
end 
```

仅该片段就可以防止重复，因为它总是向上递增（除非，数字可能会以我不知道的其他方式发生），而且没有理由返回所有这些真值。它足够真实！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T10:09:41.523

它在 de docs 中。validate_uniqueness_of 尝试使其独一无二。但是如果两个进程同时添加一条记录，它们都可以包含相同的编号。

如果要保证唯一性，就让数据库来做。但是因为每个 DB 都不同，Rails 设计上并不支持它。

在这里解释：http: [//guides.rubyonrails.org/active_record_validations_callbacks.html#uniqueness](http://guides.rubyonrails.org/active_record_validations_callbacks.html#uniqueness)

解决方案：“为避免这种情况，您必须在数据库中创建唯一索引。”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T11:33:40.267

我如何修复它（请记住我无法返回验证错误）我在数字列上添加了唯一性索引（如 mu 和 Hugo 建议的那样）并且因为我无法在控制器中返回验证错误

```
class PaperController < ApplicationController
  def create
    begin
      @paper.save
    rescue ActiveRecord::RecordNotUnique
      @paper.number = nil
      create
    end
  end
end 
```

# sql - 删除 SQL 中的每一行

> ID：11931060
> 
> 赞同：9
> 
> 时间：2012-08-13T09:00:06.970
> 
> 标签：sql, sql-server, sql-server-2008-r2

我需要清理一个包含三列的表，ID (uniqueidentifier)、Observation (nvarchar) 和 Timestamp (datetimeoffset)。内容由两个传感器每隔 1 小时生成一次，两个传感器的 Observation 值相同。我的想法是做一个 SELECT 查询，例如

```
SELECT * FROM [Records] ORDER BY [Timestamp] 
```

然后删除每个备用行。

我在 SO[如何删除访问表中的每个备用行](https://stackoverflow.com/questions/2361466/how-to-delete-every-alternate-row-in-access-table)上找到了这个，但在这里并不真正适用，因为 ID 不是 Int 而是 UID。

数据样本如下所示：

![在此处输入图像描述](../Images/cacf67a2af52a1df4cea45484d247a2f.png)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-13T09:05:12.433

如果您使用的是 SQL Server 2005 或更高版本，则可以执行类似的操作。

```
delete T
from (
       select row_number() over(order by [Timestamp]) as rn
       from YourTable
       where SomeColumn = @SomeValue
     ) T
where T.rn % 2 = 0 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T09:09:30.080

除了删除备用记录之外，您还可以使用更安全的变体 - 仅删除重复的观察，以便在数据出现错误的情况下不会失去同步：

```
; with cte as (
  select *,
         row_number() over (partition by Observation 
                            order by [Timestamp]) rn
    from [Records]
)
delete cte
 where rn > 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T09:05:19.893

如果我没记错的话，您可以使用 CTE 和 row_number() 来有效地生成临时数字 id 列。然后可以应用相同的想法 - 删除行号 mod 2 为 0 的位置：

```
;WITH temp
     AS (SELECT *,
                Row_number() OVER (ORDER BY [Timestamp]) rn
         FROM   [Records]
         ORDER  BY [Timestamp])
DELETE FROM temp
WHERE  rn % 2 = 0 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T09:10:32.740

您可以使用 MOD 运算符将两个数字相除并返回余数

尝试

```
DELETE FROM [Records] WHERE ([ID] Mod 2)=0) 
```

将其放入循环中以删除所有备用行

所以例如

```
ID = 0;
rows = get_number_of_rows_in_the_table;
i = 0; // counter
while(i<rows) {
ID = get the ID of row 0
if(ID MOD 2 = 0) {
//perform delete operation
DELETE FROM [Records] WHERE ID=the ID you just got;
} else { 
increment the counter 
i++
} 
```

这是一种解决方案，但不是正确的访问语法，希望对您有所帮助

# wpf - Threading.Timer 堆栈溢出

> ID：11931062
> 
> 赞同：0
> 
> 时间：2012-08-13T09:00:11.893
> 
> 标签：wpf, multithreading, timer

嗨，我只是想了解如何实现一个需要大约 80 到 120 毫秒（大部分是 80 毫秒）来执行的循环。循环必须执行大约 30 分钟......基本上它是一个 SURF 匹配算法。

目前我正在使用 a`System.Threading.Timer`创建一个每 90 毫秒执行一次的计时器，但问题是由于计算时间是可变的，所以一段时间后堆栈溢出并且程序关闭。

我正在使用 WPF 创建 GUI。

有没有更好的方法来使用线程来实现这样的循环？任何帮助将非常感激！提前致谢。

```
//initialization
private System.Threading.Timer Visual_AR1;
Visual_AR1 = new System.Threading.Timer(new TimerCallback(Video_AR1), null, 0, 90);
private void Video_AR1(object state)
{
    lock (this)
    {
        // SURF matching 
        modelImage_AR1 = new Image<Gray, byte>(droneControl_AR1.BitmapImage).Resize(1.8, INTER.CV_INTER_NN);
        map_image_d1 = DrawMatches_gpu.GPU_0(wayx, modelImage_AR1, observedImage, pgpuObservedKeyPoints_imp, pgpuObservedDescriptors_imp, out matchTime_0, out pX1, out pY1);
        Dispatcher.BeginInvoke((Action)delegate()
        {
            label4.Content = "Time Taken by GPU_0 : " + matchTime_0.ToString();
        });
        mask_selector_d1();
    }
} 
```

这是一个可行的解决方案吗？

```
private Thread threadTask = null;
private void threadTask_Start()
{
    if (threadTask == null) {
        threadTask = new Thread(SURF);
        threadTask.Start();
    }
}

private void SURF()
{
   while(true)
   {
 lock (this)
        {
            // SURF matching 
            modelImage_AR1 = new Image<Gray, byte>(droneControl_AR1.BitmapImage).Resize(1.8, INTER.CV_INTER_NN);
            map_image_d1 = DrawMatches_gpu.GPU_0(wayx, modelImage_AR1, observedImage, pgpuObservedKeyPoints_imp, pgpuObservedDescriptors_imp, out matchTime_0, out pX1, out pY1);
            Dispatcher.BeginInvoke((Action)delegate()
            {
                label4.Content = "Time Taken by GPU_0 : " + matchTime_0.ToString();
            });
            mask_selector_d1();
        }
thread.sleep(40);
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T11:14:49.820

与其让计时器滴答声执行工作，不如让计时器滴答声将作业排队并让其他东西（可能是线程池中的线程）消耗这些作业。您可以使用信号量来限制同时运行的作业数量，并且可以检查队列的状态以避免这种过度提交问题。

# bash - Bash：如何使用变量值作为文件夹名称的子字符串

> ID：11931068
> 
> 赞同：0
> 
> 时间：2012-08-13T09:00:34.273
> 
> 标签：bash, shell, variables, substring

在 bash 脚本中，我不记得如何将变量的值用作文件夹名称的子字符串。例子：

我有文件夹：

```
test_1.0_xxx  test_1.2_yyy test_1.4_zzz 
```

我想做以下事情：

```
for i in 1.0 1.2 1.4
do
  cd test_$i_*
  # do something
done 
```

语法似乎是错误的：

```
bash: cd: test_*: No such file or directory 
```

我也尝试在 周围使用反引号`$i`，但没有成功。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T09:06:56.527

试试这个：

```
#!/bin/bash
for i in "1.0" "1.2" "1.4"
do
  cd test_${i}_*
  # do something
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T09:05:44.167

下面的下划线`$i`被算作变量名的一部分。尝试用引号括起来：

```
for i in 1.0 1.2 1.4
do
  cd test_"$i"_*
  # do something
done 
```

**编辑**：matteomattei 的版本可能更正确。

# java - 测试 RabbitMQ 交换

> ID：11931069
> 
> 赞同：1
> 
> 时间：2012-08-13T09:00:37.463
> 
> 标签：java, rabbitmq, rabbitmq-exchange

我正在尝试编写一个应用程序来测试将 N 个交换绑定到内存、IO 等相同队列的效果。

测试都使用“主题”交换类型。我遇到的问题是，当我使用超过 1 个交换进行测试时，我没有收到我发布回来的所有消息。但是，当我使用 1 个交换器时，我会收到所有消息。

任何想法为什么会这样？

谢谢。

编辑：

我有一个使用相同绑定键绑定到两个“主题”交换的队列：

*   *.system.log.#
*   ＃。系统错误

我向每个交易所发布两条消息，如下所示：

1.  交换 0

    *   [正文] 消息 0 [路由密钥] #.system.error
    *   [正文] 消息 1 [路由密钥] *.system.log.#
2.  交换 1

    *   [正文] 消息 0 [路由密钥] #.system.error
    *   [正文] 消息 1 [路由密钥] *.system.log.#

我有一个消费者正在收听队列，但只收到以下消息：

*   带有路由密钥 (*.system.log.#) 的消息，来自交换 0，正文为“消息 1”
*   带有路由密钥 (*.system.log.#) 的消息，来自交换 1，正文为“消息 1”

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T21:40:59.860

我不太确定您要通过测试证明什么，但请记住 IO 和内存将是与队列整体大小相关的函数，而不是与单个队列绑定的交换数。您可能会发现这篇关于[Routing Topologies for Performance and Scalability with RabbitMQ 的](http://blog.springsource.org/2011/04/01/routing-topologies-for-performance-and-scalability-with-rabbitmq/)博文非常有帮助。

无论如何，问题似乎与您的绑定有关，我只需使用 RabbitMQ 的 Web 管理门户即可重现该问题而无需编写任何代码。

看看[这里](http://www.rabbitmq.com/tutorials/tutorial-five-python.html)的主题交换部分，但重要的部分是：

> 发送到主题交换的消息不能有任意的 routing_key - 它必须是单词列表，由点分隔。这些词可以是任何东西，但通常它们指定与消息相关的一些特征。一些有效的路由键示例：“stock.usd.nyse”、“nyse.vmw”、“quick.orange.rabbit”。路由键中可以有任意多的单词，最多为 255 个字节。
> 
> 绑定键也必须采用相同的格式。主题交换背后的逻辑类似于直接交换 - 使用特定路由键发送的消息将被传递到与匹配绑定键绑定的所有队列。但是，绑定键有两个重要的特殊情况：
> 
> ```
> * (star) can substitute for exactly one word.
> # (hash) can substitute for zero or more words. 
> ```

这意味着当您发布消息时，您应该执行**system.error**和**system.log**

但是，我认为您的交换绑定实际上有问题。如果您尝试使用 RabbitMQ Web 管理使用这些路由密钥进行发布，您会注意到您的消息实际上并没有被路由到队列，这可以解释为什么您的消费者会得到它们......我会玩绑定并使用 RabbitMQ Web 管理在运行更大的测试之前尝试您尝试实现的路由行为。

# java - JSON 输入文件中的 Java 对象

> ID：11931072
> 
> 赞同：0
> 
> 时间：2012-08-13T09:00:37.723
> 
> 标签：java, json, file

嗨，我有一个 json 输入文件，如下所示，

```
{'Latitude':'20',
 'coolness':2.0,
 'altitude':39000,
 'pilot':{'firstName':'Buzz',
          'lastName':'Aldrin'},
 'mission':'apollo 11'} 
```

如何从 json 输入文件创建 java 对象。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:07:52.090

您可以使用非常简单的[GSON](http://code.google.com/p/google-gson/)库和[Gson#fromJson()](http://google-gson.googlecode.com/svn/tags/1.3/docs/javadocs/com/google/gson/Gson.html#fromJson%28java.lang.String,%20java.lang.Class%29)方法。

这是一个示例：[将 JSON 转换为 Java](https://stackoverflow.com/questions/1688099/converting-json-to-java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T09:22:04.463

可以使用的 API 不止一种。最简单的是[`JSONObject`](http://www.json.org/javadoc/org/json/JSONObject.html)

只需执行以下操作：

```
JSONObject o = new JSONObject(jsonString);
int alt = o.getInt("altitude");
.... 
```

每种类型都有`getXXX`方法。它基本上将对象存储为地图。这是一个缓慢的 API。

您可以使用 Google 的[`Gson`](http://code.google.com/p/google-gson/)，这是一个优雅且更好的库 - 比 JSONObject 需要做的工作稍微多一些。如果您真的关心速度，请使用[`Jackson`](http://jackson.codehaus.org/).

# sip - 星号：使用 AMD 检测机器或人

> ID：11931077
> 
> 赞同：0
> 
> 时间：2012-08-13T09:01:12.883
> 
> 标签：sip, asterisk, pjsip

我正在实现一个星号服务器。

我正在使用 PJSUA 通过星号服务器将 wav 文件发送到我的手机。

这是我的 extension.conf

```
[appel-sortant] ; Initialisation                                                                                                                                                                                                             
exten => _X.,1,Set(LOOP=0)
exten => _X.,2,Set(MAX=3)                                                                                                                                                                                                  
exten => _X.,n,Set(ASTREINTE=${EXTEN})
exten => _X.,n,Goto(astreinte,${EXTEN},10)                                                                                                                                                                               
exten => _X.,500,Hangup

[astreinte]
exten => _X.,10,Dial(SIP/${ASTREINTE}@forfait-ovh,20,gS(10))
exten => _X.,n,AMD()
exten => _X.,n,NoOp(${DIALSTATUS}) ; Here got ANSWER status
exten => _X.,n,NoOp(${AMDSTATUS}) ; Here got MACHINE or NOTSURE
exten => _X.,n,Hangup 
```

我的问题是：

1/ 当我从 PJSUA 发送 wav 文件时拨打我的电话号码时，通话结束时 AMDSTATUS 为 MACHINE

2/ 如果我在没有 wav 文件的情况下使用 pjsua 调用，我得到一个 AMDSTATUS = NOTSURE。

AMD() 是否检测应答机或呼叫机？

这是我的 Pjsua 行文件：

```
pjsua --null-audio --local-port=5061 --id sip:username@192.168.X.X --registrar sip:192.168.X.X --realm * --username username --password password --auto-play --play-file=./sounds/sound.wav sip:0123456789@192.168.X.X 
```

我目前在星号 1.6.2.9-2squeeze 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T15:04:55.813

是 - AMD() 检测应答机是否接听。它可以返回的可能值是： MACHINE | 人类 | 通知 | 挂断

我不知道该功能的内部工作原理，但如果您正在播放 wav 文件 - amd() 可能认为它确实是一台应答机。

您的方案似乎提供了正确的结果。你的拨号方案和 Pjsua 线路对我来说似乎很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T01:48:15.920

您需要使用[AMD](https://wiki.asterisk.org/wiki/display/AST/Asterisk+11+Application_AMD)功能中的设置。您有以下参数：

```
AMD([initialSilence[,greeting[,afterGreetingSilence[,totalAnalysis Time[,miniumWordLength[,betweenWordSilence[,maximumNumberOfWords[,silenceThreshold[,maximumWordLength]]]]]]]]])

initialSilence - Is maximum initial silence duration before greeting.
    If this is exceeded set as MACHINE
greeting - is the maximum length of a greeting.
    If this is exceeded set as MACHINE
afterGreetingSilence - Is the silence after detecting a greeting.
    If this is exceeded set as HUMAN
totalAnalysis Time - Is the maximum time allowed for the algorithm
    to decide HUMAN or MACHINE
miniumWordLength - Is the minimum duration of Voice considered to be a word
betweenWordSilence - Is the minimum duration of silence after a word to consider the audio that follows to be a new word
maximumNumberOfWords - Is the maximum number of words in a greeting
    If this is exceeded set as MACHINE
silenceThreshold - How long do we consider silence
maximumWordLength - Is the maximum duration of a word to accept.
    If exceeded set as MACHINE 
```

根据从 pjsua 应用程序检测到的静音模式、声音和声音长度，您应该能够确定这些参数的正确值以实现您想要的结果。

# android - 我可以在自定义 ViewGroup 中获取 onBackPressed 事件吗？

> ID：11931080
> 
> 赞同：2
> 
> 时间：2012-08-13T09:01:33.910
> 
> 标签：android, android-layout, custom-component

我正在创建一个自定义的 Android 组件，该组件有时需要使用 onBackPressed 事件（例如，自定义 ViewGroup 中有一个弹出菜单，如果它正在显示，则返回按钮事件将其关闭并被使用，否则将被忽略）。那可能吗？我可以从我的 ViewGroup 子类中拦截此事件吗？如何拦截？

编辑：我尝试像 Android 文档所暗示的那样覆盖 onKeyPreIme，该方法永远不会从 ViewGroup 中调用。

```
@Override
public boolean onKeyPreIme(int keyCode, KeyEvent event)
{
     return true;
} 
```

在**onKeyPreIme**文档中它说：

> **在与视图层次结构关联的任何输入方法处理键事件之前处理它。这可以用于在 IME 消费之前拦截特殊情况下的关键事件；一个典型的例子是处理 BACK 键来更新应用程序的 UI，而不是让 IME 看到它并自行关闭。**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-16T20:11:20.837

永远不会调用 onKeyDown 或 onKeyPreIme 的原因是因为 ViewGroup 没有焦点。

解决方案是在 ViewGroup 子类的构造函数中请求焦点：

```
this.setFocusable(true);
this.setFocusableInTouchMode(true);
this.requestFocus(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T09:08:32.463

**onBackPressed**属于 Activity，视图/视图组是放置在 Activity 内的东西。所以从技术上讲，你无法完成这项工作。但是，您可以使用某种*[**观察者/可观察**](http://www.javaworld.com/jw-10-1996/jw-10-howto.html)*模式将任何类型的信息传递给您的视图。

或者尝试在视图类中使用**[onKeyDown](http://developer.android.com/reference/android/view/View.html#onKeyDown%28int,%20android.view.KeyEvent%29)**事件并跟踪[**返回键**](http://developer.android.com/reference/android/view/KeyEvent.html#KEYCODE_BACK)事件代码。

# wix - 如何强制 WiX 引导程序下载 MSI 包？

> ID：11931082
> 
> 赞同：5
> 
> 时间：2012-08-13T09:01:36.227
> 
> 标签：wix, wix3.6

我正在阅读[WiX 工具集手册的这一部分](http://wix.sourceforge.net/manual-wix3/authoring_bundle_package_manifest.htm)，并且想知道如何强制 WiX 引导程序下载[MSI](http://en.wikipedia.org/wiki/Windows_Installer)包？例如，在安装我的应用程序之前，引导程序必须下载并安装：

*   .NET Framework 客户端配置文件
*   SQL Server 2008 R2 共享管理对象。

我想，我可以这样描述对应`MsiPackage`：

但是元素的[架构参考](http://wix.sourceforge.net/manual-wix3/wix_xsd_msipackage.htm)`MsiPackage`告诉我们，

> “至少，必须指定 SourceFile 或 Name 属性。”

而且，当然，它不会说谎 - 没有`SourceFile`或`Name`捆绑项目编译时出错。

添加`RemotePayload`到`MsiPackage`这样的：

```
 <MsiPackage Name="redist\SharedManagementObjects.msi"
              DisplayName="Microsoft SQL Server 2008 R2 Management Objects"
              DisplayInternalUI="yes"
              Vital="yes"
              DownloadUrl="http://go.microsoft.com/fwlink/?LinkID=188438&amp;clcid=0x409">
    <RemotePayload Size="10953728"
                   Version="10.50.1600.1"
                   ProductName="Microsoft SQL Server 2008 R2 Management Objects"
                   Description="Microsoft SQL Server 2008 R2 Management Objects"
                   Hash="6ce3a433309c63d98bcf0e2b9f1dfaed8cc18783"/>
  </MsiPackage> 
```

导致构建错误：

> 无法读取包''。无法打开此安装包。验证该包是否存在并且您可以访问它，或者联系应用程序供应商以验证这是一个有效的 Windows Installer 包。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T11:39:58.520

[类似的问题在这里](http://windows-installer-xml-wix-toolset.687559.n2.nabble.com/Remote-MSI-Payload-td7579500.html)回答：

> 今天不支持。RemotePayload 仅支持验证下载文件是否符合预期所需的字段，但仅此而已。这适用于 .exe，因为 Burn 将它们视为黑匣子。Burn 从 MSI 包中收集了更多数据。
> 
> 所以这个错误要么是它是 MsiPackage 的一个允许的孩子，要么它还不支持 MSI 所需的所有数据。

# cross-platform - Photon Server 3 - 未达到许可证监视器 #0 错误

> ID：11931083
> 
> 赞同：-1
> 
> 时间：2012-08-13T09:01:36.960
> 
> 标签：cross-platform, multiplayer, socketserver

我已经下载了免费许可证 - (Photon 3 - Free License (100 CCU, no expiry)) 并用它替换了当前的试用许可证（30 天限制），然后我尝试启动我的光子服务器，但它没有工作。我检查了日志文件，发现“没有达到许可证监视器 #0”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:50:42.597

这个问题有两种解决方案，#1 最方便： 1) 从无许可文件开始（从目录中删除）：Photon 将以 20CCU 模式运行 2) 再次使用网站上的 30 天试用版

# java - 为了使用 XQueryUtil.xquery() 方法，我必须添加哪个包，我可以从哪里下载它？

> ID：11931090
> 
> 赞同：0
> 
> 时间：2012-08-13T09:02:09.283
> 
> 标签：java, xquery

我想使用这个方法`xquery();`，它的参数和返回类型如下......

```
Node result = XQueryUtil.xquery(doc, "/PERIODIC_TABLE/ATOM[NAME = 'Zinc']").get(0); 
```

那么任何人都可以帮助我使用这种方法。它给出了找不到符号的错误`XQueryUtil`，所以请帮助我应该使用哪个包以及从哪里可以下载该 jar 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T12:29:22.553

您正在寻找[Nux](http://acs.lbl.gov/software/nux/)，它的[JavaDoc中](https://acs.lbl.gov/software/nux/api/nux/xom/xquery/XQueryUtil.html#xquery%28nu.xom.Node,%20java.lang.String%29)*有*您的示例。

# java - 接受统一码短信

> ID：11931091
> 
> 赞同：0
> 
> 时间：2012-08-13T09:02:11.700
> 
> 标签：java, smpp, jsmpp

我想从 jSMPP 接收 UniCode 短信。

如果数据编码为 8，我想将其转换为 Unicode 符号。

为此，我使用`HexUtil.convertBytesToHexString`函数。

但它不能正确转换它。我怎样才能转换这个字符串？

```
 @Override
    public void onAcceptDeliverSm(DeliverSm arg0)
            throws ProcessRequestException {
        if (MessageType.SMSC_DEL_RECEIPT.containedIn(arg0.getEsmClass())) {
            // Deliver SM
        } else {
            byte[] data = arg0.getShortMessage();
            String text = null;

            if (arg0.getShortMessage() != null) {
                if (arg0.getDataCoding() == (byte) 8) {
                    text = HexUtil.convertBytesToHexString(data, 0,
                            data.length);
                } else {
                    text = new String(data);
                }
            }

                    System.out.println("Text -> " + text);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T06:41:23.450

试试这种方式（使用你自己的编码检测）：

```
 if (msg.getEncoding().equals(Message.MessageEncodings.ENC7BIT)) {
            text = msg.getText();
        } else if (msg.getEncoding().equals(Message.MessageEncodings.ENCUCS2)) {
            try {
                text = new String(msg.getText().getBytes(), "UTF-16");
            } catch (Exception ex) {
                Logger.getLogger("smpp").error("Can't parce USC2 text: " + msg.getText() + ", " + ex.getMessage());
            }
        } 
```

您也可以尝试 UTF-16LE、UTF-16BE 编码，如果 UTF-16 显示不正确

# msbuild - MSBuild 动态 AssemblyName

> ID：11931103
> 
> 赞同：0
> 
> 时间：2012-08-13T09:03:09.590
> 
> 标签：msbuild, msbuild-4.0

如何根据某些文件的内容动态更改 AssemblyName？

例如，我有一个名为“AssemblyBaseName.txt”的文件，其中包含“Abcd”字符串我希望我的程序集 DLL/EXE 名称为 Abcd.Common.dll，其中“Common”是常量。

我试过像这样使用 ReadLinesFromFile

```
 <Target Name="Build">
    <ItemGroup>
      <AssemblyBaseNameFile Include="Test.txt"/>
    </ItemGroup>
    <ReadLinesFromFile File="@(AssemblyBaseNameFile)">
      <Output TaskParameter="Lines" ItemName="AssemblyBaseName" />
    </ReadLinesFromFile>
    <Message Text="AssemblyBaseName: $(AssemblyBaseName)" />
  </Target>
  <PropertyGroup>
    <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
    <Platform Condition=" '$(Platform)' == '' ">x86</Platform>
    <ProductVersion>9.0.30729</ProductVersion>
    <SchemaVersion>2.0</SchemaVersion>
    <ProjectGuid>{FEE469DB-44BD-4CD9-BA08-91F1DFDE9679}</ProjectGuid>
    <OutputType>Exe</OutputType>
    <AppDesignerFolder>Properties</AppDesignerFolder>
    <RootNamespace>Common</RootNamespace>
    <AssemblyName Condition=" '$(AssemblyName)' == '' ">$(AssemblyBaseName).Common</AssemblyName>
    <TargetFrameworkVersion>v4.0</TargetFrameworkVersion>
    <FileAlignment>512</FileAlignment>
  </PropertyGroup> 
```

但没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T15:03:42.653

由于在执行任何目标之前处理静态属性，因此您的目标更改了 $(AssemblyBaseName) 的值，但仅在设置静态声明的 $(AssemblyName) 的值之后 - 使用 $(AssemblyBaseName) 的原始值。

您还需要动态地重新定义 $(AssemblyName) （在您的目标内）。

此外，您已经覆盖了“构建”目标。我不确定这个程序集将如何构建，您需要使用不同命名的目标，并确保它在正常构建管道对 $(AssemblyName) 的任何使用之前执行。

# php - 制作主题文件 .html

> ID：11931108
> 
> 赞同：0
> 
> 时间：2012-08-13T09:03:21.670
> 
> 标签：php, html, .htaccess, templates

它们在（if、endif、变量）中有一些 php 代码，但本质上它们是 html 文件。

您认为使用 .html 扩展名并防止通过 .htaccess 直接访问它们是个好主意，因此任何人都看不到 php 代码吗？

安全吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:08:01.513

你可以测试脚本吗？

据我所知，PHP 只是服务器端，所以在服务器“做它的事情”之后它不会显示在用户计算机上（当他试图查看源代码时）。

显示 Javascript 和 HTML，但不显示 php。

我已经使用 .htaccess 文件来阻止文件夹中的一些其他文件，例如数据库凭据以及我命名为 .inc（用于包含）的文件。如果您使用 htaccess 阻止 html，则没有人将能够看到该网页。

我希望我理解正确！（并澄清了它）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T09:11:08.037

只需`deny from all`在视图文件夹中有一个 .htaccess ... ;p

如果您有想要从该主题文件夹加载的图像或 css 等文件，那么请务必将视图重命名为 .php 并将其放在第一行：

`if (!defined("RUN")){die('No direct access');}`

显然`define('RUN',true);`在你的配置中。

# python - Python Script (main) + Blender "face" 动画

> ID：11931109
> 
> 赞同：2
> 
> 时间：2012-08-13T09:03:22.937
> 
> 标签：python, animation, 3d, artificial-intelligence, blender

所以我实际上正在做一些与这个用户帖子非常相似的事情： [https ://stackoverflow.com/questions/6800292/python-ai-and-3d-animation](https://stackoverflow.com/questions/6800292/python-ai-and-3d-animation)

但它没有答案，我无法联系用户。

基本上，我有一个功能正常的 python 脚本，可以根据我的语音命令响应我的操作。（获取电子邮件、天气预报、开/关灯等），它是使用非常棒的 pyspeech 库制作的。

现在我想给我的程序一个“面子”！我考虑过用 Blender 对脸部进行建模（有一些知识并会在此基础上建立），我知道我可以为它制作动画，所以嘴唇会移动等等。所以我想知道是否有可能：

*   从我的主要python脚本加载我用搅拌机制作的“脸”（所以当我的程序启动时，脸也会出现在屏幕上）
*   从脚本运行动画，例如当我的程序说“不客气”时，我会运行嘴唇在脸上移动的动画来模拟它正在说话。

我知道搅拌机有一个很好的 python 集成（也许正确的是说它是建立在上面的？）这就是为什么我认为它是一个很好的程序。

希望有人可以帮助并告诉我这是否可能，也许可以告诉我一些正确的方法，我的谷歌搜索只是向我展示了总是使用 Blender 编写 python 脚本，这不是我在这里真正需要的......我想......

干杯，

弗拉维奥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T12:30:56.940

确实，你想要的都是可能的。如果您只想根据程序的决定播放预渲染的动画视频，那么任何允许您在小部件中嵌入和播放视频的 GUI 都适用于您的应用程序。

您可以使用 Pygame 推出自己的 GUI（它具有视频支持，但您将需要为 pygame 制作的“次要”或多或少“业余”小部件工具包之一来构成应用程序的其余部分，因为 pygame 非常低等级。

在更高的层次上，虽然我没有嵌入视频，但我认为你可以使用 PyQT4（谷歌搜索了一下，也没有那么多例子，但暗示 QT4 源代码中有示例）或 GTK+（同样的东西，看起来像那里有更多的例子）。

另一种选择是构建您的应用程序以在 Blender 游戏引擎本身内部运行 - 它提供高级工具包和自定义用户操作行为的方法（即使没有编码）。

这样做的主要缺点是：我不知道现在有哪些选项可以分发需要 Blender 游戏引擎的应用程序 - 您的用户将需要安装 Blender（但很可能 Blender 的人做了一个简单的方法来处理这个） .

一方面：您获得了最大的灵活性，甚至可以在您的应用程序中实时渲染一些序列（与预渲染视频相反）。

One thing: Blender nowadays use Python 3.x - if the other libraries you need are Python 2, you willl need to make one different process for the GUI inside Blender, and exchange data with your application's backeend in Python 2 (for example using jsonrpc or xmlrpc - that is enoguh simple in Python).

# firefox - Selenium Webdriver 2.25.0 Java Firefox - 无法识别 Google 搜索结果 Webelement

> ID：11931112
> 
> 赞同：0
> 
> 时间：2012-08-13T09:03:25.807
> 
> 标签：firefox, selenium, firebug, webdriver

我是 Selenium 2.0 Java Webdriver 的菜鸟。试着自学。但坚持识别一个Webelement。我试图点击谷歌的搜索结果。我正在搜索字符串“Selenium Download”并尝试单击第一个结果。它在 Firebug 中的标识如下 -

```
<a class="l" onmousedown="return rwt(this,'','','','1','AFQjCNF012aUD3cMR2x-qIQl2u6suxLnlw','','0CE0QFjAA',null,event)" href="http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CE0QFjAA&url=http%3A%2F%2Fseleniumhq.org%2Fdownload%2F&ei=Wb8oULKfHsjsrAf4_IDICQ&usg=AFQjCNF012aUD3cMR2x-qIQl2u6suxLnlw">
<em>Downloads</em>
-
<em>Selenium</em>
</a> 
```

XPath：/html/body/div[5]/div[2]/div/div[4]/div[2]/div[2]/div[2]/div[2]/div/ol/li/ div/h3/a

CSSPath: html body#gsr.vsh div#main div div#cnt.mdm div.mw div#rcnt div#center_col div#res.med div#search div#ires ol#rso li.g div.vsc h3.r al

但我未能唯一确定这一点。我尝试了类似下面的东西 -

```
public static void main (String[] args) {

    WebDriver ffx1 = new FirefoxDriver();
    ffx1.get("http://www.google.com");
    ffx1.manage().window().maximize();
    ffx1.findElement(By.className("xbtn")).click();
    ffx1.findElement(By.name("q")).sendKeys("saikat");
    ffx1.findElement(By.name("btnG")).click();
    ffx1.findElement(By.xpath(My Expression)); 
```

}

请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T15:14:40.737

我认为有两点需要清除：

首先 - 您拥有的定位器可能是不正确的定位器，谷歌搜索页面上第一个搜索元素的 xpath 将是 .//*[@id='rso']/li[1]/div/h3/a

第二 - 单击搜索按钮后，搜索结果确实需要几秒钟才能显示在搜索结果页面上。因此，必须插入一些等待时间。我在下面的代码中使用了 30 秒的隐式等待。隐式等待将告诉 Webdriver 在尝试查找一个或多个元素（如果它们不是立即可用）时轮询 DOM 一段时间。

现在，如果您尝试使用以下代码，它应该可以工作

```
import java.util.concurrent.TimeUnit;

    public static void main(String[] args) throws InterruptedException {
        WebDriver ffx1 = new FirefoxDriver();
        ffx1.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
        ffx1.get("http://www.google.com");
        ffx1.manage().window().maximize();
        ffx1.findElement(By.name("q")).sendKeys("saikat");
        ffx1.findElement(By.name("btnG")).click();
        ffx1.findElement(By.xpath(".//*[@id='rso']/li[1]/div/h3/a")).click();

    } 
```

# hibernate - Hibernate logging，如何显示隐式操作？

> ID：11931113
> 
> 赞同：0
> 
> 时间：2012-08-13T09:03:25.627
> 
> 标签：hibernate, log4j

我使用 Hibernate 作为 JPA 提供程序。我想知道我的应用程序的确切行为，我想知道 Hibernate 执行的所有隐式操作（我没有在我的代码中显式调用）。例子：

hibernate 为从数据库中初始加载对象执行的查询是什么？hibernate什么时候调用flush()或者commit()？

在我的 persistence.xml 文件中，我使用了以下属性：而且我还使用了 log4j 记录器：

```
log4j.logger.org.hibernate.SQL=DEBUG, SQL_APPENDER
log4j.additivity.org.hibernate.SQL=false 
```

但我没有看到这种信息。

我是否缺少某些属性或 jog4j 设置？或者没有办法跟踪这种操作。非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T09:21:50.300

由于您已将休眠记录器的可加性设置为 false，因此您需要为其附加一个单独的附加程序，否则它将什么也不会。

# rake - Rake db:seed 导致错误

> ID：11931118
> 
> 赞同：0
> 
> 时间：2012-08-13T09:03:58.257
> 
> 标签：rake, ruby-on-rails-3.2

我执行了命令 rake db:drop、rake db:create 和 rake db:migrate，一切都很好。但是，当我运行命令 rake db:seed 时，会导致一个奇怪的错误

```
alex@ubuntu:~/RubymineProjects/some_project$ rake db:seed --trace
** Invoke db:seed (first_time)
** Execute db:seed
** Invoke db:abort_if_pending_migrations (first_time)
** Invoke environment (first_time)
** Execute environment
** Execute db:abort_if_pending_migrations
rake aborted!
Connection refused - connect(2)
/home/alex/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/smtp.rb:540:in `initialize'
/home/alex/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/smtp.rb:540:in `open'
/home/alex/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/smtp.rb:540:in `tcp_socket'
/home/alex/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/smtp.rb:549:in `block in do_start'
/home/alex/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/timeout.rb:68:in `timeout'
/home/alex/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/timeout.rb:99:in `timeout'
/home/alex/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/smtp.rb:549:in `do_start'
/home/alex/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/smtp.rb:519:in `start'
/home/alex/.rvm/gems/ruby-1.9.3-p194/gems/mail-2.4.4/lib/mail/network/delivery_methods/smtp.rb:144:in `deliver!'
/home/alex/.rvm/gems/ruby-1.9.3-p194/gems/mail-2.4.4/lib/mail/message.rb:2034:in `do_delivery'
/home/alex/.rvm/gems/ruby-1.9.3-p194/gems/mail-2.4.4/lib/mail/message.rb:229:in `block in deliver'
/home/alex/.rvm/gems/ruby-1.9.3-p194/gems/actionmailer-3.2.3/lib/action_mailer/base.rb:414:in `block in deliver_mail'
/home/alex/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.3/lib/active_support/notifications.rb:123:in `block in instrument'
/home/alex/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.3/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/alex/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.3/lib/active_support/notifications.rb:123:in `instrument'
/home/alex/.rvm/gems/ruby-1.9.3-p194/gems/actionmailer-3.2.3/lib/action_mailer/base.rb:412:in `deliver_mail'
/home/alex/.rvm/gems/ruby-1.9.3-p194/gems/mail-2.4.4/lib/mail/message.rb:229:in `deliver'
/home/alex/.rvm/gems/ruby-1.9.3-p194/gems/devise-2.1.0/lib/devise/models/confirmable.rb:128:in `send_on_create_confirmation_instructions'
/home/alex/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:416:in `_run__3737511161133628056__create__2350421739628145298__callbacks'
/home/alex/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:405:in `__run_callback'
/home/alex/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:385:in `_run_create_callbacks'
/home/alex/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:81:in `run_callbacks'
/home/alex/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.3/lib/active_record/callbacks.rb:268:in `create'
/home/alex/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.3/lib/active_record/persistence.rb:344:in `create_or_update'
/home/alex/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.3/lib/active_record/callbacks.rb:264:in `block in create_or_update'
/home/alex/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:425:in `_run__3737511161133628056__save__2350421739628145298__callbacks'
/home/alex/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:405:in `__run_callback'
/home/alex/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:385:in `_run_save_callbacks'
/home/alex/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:81:in `run_callbacks'
/home/alex/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.3/lib/active_record/callbacks.rb:264:in `create_or_update'
/home/alex/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.3/lib/active_record/persistence.rb:84:in `save'
/home/alex/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.3/lib/active_record/validations.rb:50:in `save'
/home/alex/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.3/lib/active_record/attribute_methods/dirty.rb:22:in `save'
/home/alex/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.3/lib/active_record/transactions.rb:241:in `block (2 levels) in save'
/home/alex/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.3/lib/active_record/transactions.rb:295:in `block in with_transaction_returning_status'
/home/alex/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.3/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/home/alex/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.3/lib/active_record/transactions.rb:208:in `transaction'
/home/alex/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.3/lib/active_record/transactions.rb:293:in `with_transaction_returning_status'
/home/alex/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.3/lib/active_record/transactions.rb:241:in `block in save'
/home/alex/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.3/lib/active_record/transactions.rb:252:in `rollback_active_record_state!'
/home/alex/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.3/lib/active_record/transactions.rb:240:in `save'
/home/alex/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.3/lib/active_record/relation/finder_methods.rb:293:in `find_or_instantiator_by_attributes'
/home/alex/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.3/lib/active_record/dynamic_matchers.rb:47:in `method_missing'
/home/alex/RubymineProjects/some_project/db/seeds.rb:42:in `<top (required)>'
/home/alex/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:245:in `load'
/home/alex/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:245:in `block in load'
/home/alex/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:236:in `load_dependency'
/home/alex/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:245:in `load'
/home/alex/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/lib/rails/engine.rb:520:in `load_seed'
/home/alex/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.3/lib/active_record/railties/databases.rake:309:in `block (2 levels) in <top (required)>'
/home/alex/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/home/alex/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/home/alex/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/home/alex/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/home/alex/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/home/alex/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/home/alex/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/home/alex/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/home/alex/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/home/alex/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
/home/alex/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/home/alex/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
/home/alex/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/home/alex/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/home/alex/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
/home/alex/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/home/alex/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/home/alex/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/home/alex/.rvm/gems/ruby-1.9.3-p194@global/bin/rake:19:in `load'
/home/alex/.rvm/gems/ruby-1.9.3-p194@global/bin/rake:19:in `<main>'
/home/alex/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `eval'
/home/alex/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `<main>'
Tasks: TOP => db:seed 
```

这个错误是什么意思？我该怎么修复它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T22:58:20.710

您的 SMTP 邮件程序正在尝试发送但无法连接。在 development.rb 集

```
config.action_mailer.perform_deliveries = false 
```

# jquery - 使用选择显示/隐藏多个 div

> ID：11931120
> 
> 赞同：2
> 
> 时间：2012-08-13T09:04:01.510
> 
> 标签：jquery, select

目前的代码，基本上显示了一个基于选择元素的 div。

```
<script type="text/javascript">
      $(document).ready(function(){
        $('.formbox').hide();
        $('#dropdown').change(function() {
          $('.formbox').hide();
          $('#workshop' + $(this).val()).show();
        });
      });
</script>
<select id="dropdown" name="dropdown" value="{{course}}">
          <option value="0">0</option>
          <option value="1">1</option> 
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5</option>
          <option value="6">6</option>
          <option value="7">7</option>
          <option value="8">8</option>
        </select>
      </label>
      <hr>
      <table>
        <tr>
        <td>

          <div id="workshop1" class="formbox">stuff</div>
          <div id="workshop2" class="formbox">stuff</div>
          <div id="workshop3" class="formbox">stuff</div>
          <div id="workshop4" class="formbox">stuff</div> etc 
```

我想要的是当下拉菜单选择 2 时它同时显示 div“workshop1”和workshop2”选择 3 将显示“workshop1”和workshop2”和“workshop3”等等，..所以选择 8 将显示所有车间 div

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T09:07:18.700

使用循环：

```
for (var i=1; i <= $(this).val(); i++) {
  $('#workshop' + i).show();
} 
```

或者，如果 div 是有序的，您可以使用[.slice](http://api.jquery.com/slice/)。

```
$('.formbox').slice(0, $(this).val()).show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T09:09:08.660

你会想要改变这个：`$('#workshop' + $(this).val()).show();`

至

```
var count = $(this).val();
for( var i = 1; i <= count; i++ ){
 $('#workshop' + i).show();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T09:09:16.680

尝试这个

```
 $(document).ready(function(){
            $('.formbox').hide();
            $('#dropdown').change(function() {
              $('.formbox').hide();
              for(i=1;i<=$(this).val();i++){
                     $('#workshop' + i).show();
              }
            });
          }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T09:12:09.980

或者：

```
 $('#dropdown').change(function(i,v) {
          $('.formbox').hide();
            $('.formbox:nth-child(1n+'+(parseInt($(this).val())+1)+')').show(); 
        }); 
```

# .net - 如何使用 NDepend 检索 .NET 方法的所有属性？

> ID：11931124
> 
> 赞同：2
> 
> 时间：2012-08-13T09:04:22.447
> 
> 标签：.net, ndepend

我想检索（使用 NDepend）在方法上声明的给定类型的所有属性的列表。就像是

```
warnif count > 0 from m in JustMyCode.Methods where 
  m.HasAttribute("MyNamespace.MyAttribute")
select new { m, m.Attributes("MyNamespace.MyAttribute")  } 
```

这可能吗？有没有完全不同的方式来做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T16:22:24.980

我不确定完全理解这个问题。

如果您的意思是一个方法被标记了多次出现的`MyNamespace.MyAttribute`NDepend 不会提供比`true`表达式更多的信息`m.HasAttribute("MyNamespace.MyAttribute")`。

# apache - Apache mod_proxy 将 Post 写入日志文件

> ID：11931126
> 
> 赞同：0
> 
> 时间：2012-08-13T09:04:37.960
> 
> 标签：apache, mod-proxy, apache-config

有什么方法可以捕获发布请求并将其写入日志运行的 apache mod_proxy（或任何其他 mod）？

例如，我在 apache mod_proxy 后面有一个 CMS，我想在 apache 日志文件中捕获使用 POST 动词的登录文本框，这可能吗？

谢谢 ：）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T12:58:18.243

请看一下[mod_dumpio](http://httpd.apache.org/docs/2.2/mod/mod_dumpio.html)。所有输入和/或所有输出都将记录到 error.log 中。

[mod_security](http://www.modsecurity.org/)也可以记录发布数据，但有点复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T13:04:53.723

这可能适合您的需要[mod_log_post](http://freecode.com/projects/mod_log_post)（mod_sec 的精简版），但文档和支持较少。尽管它可能在您的目的范围内起作用。

# jquery - 如何获取值

> ID：11931128
> 
> 赞同：0
> 
> 时间：2012-08-13T09:04:45.947
> 
> 标签：jquery, asp.net-mvc, razor

使用下面的代码我可以首先获得价值吗？我想在运行时获取所有 td 标签的值来汇总工资列的值

```
//*************************************

@foreach (var item in Model)
 {
     <script src="../../Scripts/jquery-1.4.4.js" type="text/javascript"></script>

<script type="text/javascript">
    $(document).ready(function () 
    {
        $("input:checkbox").click(function ()
         {

         if ($('input:checkbox').attr('checked'))
             {
              $(".wagein").each(function ()
                {
                    calculateSum();
                });
             }
            });
        })
            function  calculateSum()
                     {

            var sum = 0;
                        if (!isNaN(this.value) && this.value.length != 0)
                         {
                        sum += parseInt(this.value);
                        $("#WageSum").val(sum);
                        alert(sum);
                        }

                    else 
                        {
                            sum -= parseInt(this.value);
                            $("#WageSum").val(sum);
                            alert(sum);
                         }

                }; 
```

这是我的`<td>`标签，它将包含模型中的许多值

```
<td class="wagein" >
    @Html.DisplayFor(modelItem => item.Wage)
</td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T09:12:38.160

我建议获取价值服务器端，我省略了大部分表格行详细信息以向您展示概念：

```
@{
decimal total = 0;
foreach (var item in Model)
{
...
<td class="wagein" >
    @Html.DisplayFor(modelItem => item.Wage)
    total += item.Wage;
</td>
...
} 
```

如果您仍然决心获得整个客户端，您可能不想在循环中添加 JavaScript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T03:09:15.617

您可以在服务器端执行此操作并使用 LINQ 扩展 model.Sum(x => x.Wage) 插入一行。或者你可以在客户端做。以这个[Fiddle](http://jsfiddle.net/cqmTt/)为例。

# c# - Task Parallel库的不同用途

> ID：11931135
> 
> 赞同：4
> 
> 时间：2012-08-13T09:05:14.383
> 
> 标签：c#, task-parallel-library

我看到很少有人使用如下语法调用函数：

```
Parallel.Invoke(() => Method1(yourString1),() => Method2(youString2)); 
```

很少有人写这样的代码：

```
Task myFirstTask = Task.Factory.StartNew(() => Method1(5));
Task mySecondTask = Task.Factory.StartNew(() => Method2("Hello")); 
```

所以我的问题是什么时候应该使用**Parallel.Invoke()**以及什么时候应该创建 Task 类的实例并调用**StartNew()**方法。

**Parallel.Invoke()**看起来很方便。那么使用 Task 类和**StartNew()**方法的意义是什么............放一些光，告诉我不同​​方法对同一种工作的重要性意味着调用两个函数并行使用两种不同的语法。

我从来没有在**任务并行库**之前使用过。所以使用两种方法调用函数可能有一些隐藏的原因。请详细指导我。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T09:07:45.757

好吧，`Parallel.Invoke`将阻塞直到两个新任务都完成。

第二种方法将启动两个新任务，但不等待它们完成。您可以手动等待它们，或者在 C# 5 中，新的 async/await 功能将帮助您异步“等待”。

这真的取决于你想做什么。如果您*希望*您的线程阻塞直到所有任务完成，`Parallel.Invoke`这很方便。

# python - 具有多个参数的“映射”并且没有“for”的迭代

> ID：11931140
> 
> 赞同：0
> 
> 时间：2012-08-13T09:05:40.190
> 
> 标签：python, itertools, map-function

1.  有以下代码行，它从文件中读取成对的单词，将它们拆分，并返回一个元组，其中每个元组的第一个索引是第一个或第二个单词。例如，a`Bob, Smith`将分别转换为`[(Bob, Smith)]`和`[(Smith, Bob)]`。我将它映射到`g.readlines()`.

    想知道是否可以将**第二个**参数传递给`flip = True`可以与 map 一起使用的更通用的 word_flip() 函数？

    ```
    first_word_is_first = map(first_second_split, g.readlines())

    first_word_is_second = map(second_first_split, g.readlines()) 
    ```

2.  关于更实用的方法的随机问题，如果给定一个字符串，并且我想根据每个单词的属性（即。）对该字符串进行分区，除了迭代和划分`Alex Smith AGE 35 420`之外，是否有更实用的方法来解决此类问题`string.split()`将行转换为 str 变量、`name`、`age`或`room_number`使用正则表达式？是否可以使用 map、filter 或 itertools？最好通过字符串一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:11:34.493

1.  是的，在 a 中使用时，您可以使用 a[`functools.partial`](http://docs.python.org/library/functools.html#functools.partial)向函数添加其他参数`map()`。

    ```
    from functools import partial
    first_word_is_first = map(partial(word_flip, flip=False), g.readlines())
    first_word_is_second = map(partial(word_flip, flip=True), g.readlines()) 
    ```

    不过，使用列表推导会更容易：

    ```
    first_word_is_first = [word_flip(l, flip=False) for l in g.readlines()]
    first_word_is_second = [word_flip(l, flip=True) for l in g.readlines()] 
    ```

2.  您的字符串的结构方式（字段之间和字段内部的空格）您必须使用正则表达式或专用函数之类的方法来拆分字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T09:11:35.333

2：

```
name, surname, n, age, room = 'Alex Smith AGE 35 420'.split() 
```

从方法调用返回多个结果。

# sql - 在 Teradata 中移动列

> ID：11931145
> 
> 赞同：1
> 
> 时间：2012-08-13T09:06:04.993
> 
> 标签：sql, ddl, teradata

我在 Teradata 中创建了一个新列，然后将数据从另一个列移动到这个新列中。之后，我删除了旧列。我现在想做的是将新列移动到旧列所在的表中的相同位置。我想问你——这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T13:27:00.643

除非业务需求强制在表定义中列的顺序定位（例如时间戳是表定义中的最后一列），否则它并不重要。如果您有一个 V1 层将视图列映射到列 (1:1) 并具有适当的 ROW ACCESS 锁定，则您的视图定义始终可以将列的首选序号位置公开给最终用户和 BI 应用程序。

如果您必须对列重新排序，请执行以下操作：

1.  提交`CREATE TABLE MyDB.MyTable_`带有您首选的序号位置、列默认值和任何值列表压缩的 a。
2.  `COLLECT STATISTICS ON MyDB.MyTable_ FROM MyDB.MyTable; -- Migrate collected statistics`
3.  `INSERT INTO MyDB.MyTable_ SELECT /* Columns */ FROM MyDB.MyTable;`
4.  `RENAME MyDB.MyTable AS MyDB.MyTable1; RENAME TABLE MyDB.MyTable_ AS MyDB.MyTable;`
5.  确认一切正常后，`DROP TABLE MyDB.MyTable1;`

您也可以执行以下操作，而不是步骤 1 和 3：

```
CREATE TABLE MyDB.MyTable_ 
       (/* Column Definitions in new Order */ ) AS 
       (SELECT /* New Column Ordering */ 
          FROM MyDB.MyTable)
       WITH DATA AND STATISTICS
       {UNIQUE} PRIMARY INDEX (/* Primary Index Columns */); 
```

使用这种方法可能会或可能不会填充统计数据。创建新表后，您需要验证这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T13:54:32.217

由于这与[您之前的问题有关](https://stackoverflow.com/questions/11899131/changing-column-datatype-from-decimal9-0-to-decimal15-0)，因此我将尝试在相同的上下文中回答。

不，您不能事后更改列的顺序。当您向现有表“添加”新列时，它将在表描述的末尾定义。如果您确实需要列以特定顺序出现在物理表中，则必须完全重新创建表。

但是，您可以创建一个按您想要的任何顺序显示列的视图。事实上，如果您打算将此表用于某种应用程序，则无论如何都应该创建一个 VIEW（这样您就可以建立适当的访问锁）。例如，假设您有一个名为 MYTABLE 的表，其中包含三列 COL_A、COL_B 和 COL_C，并且您希望它们以相反的顺序“显示”：

```
replace view MYDB.MYTABLE_V as
locking MYDB.MYTABLE for access
select COL_C, COL_B, COL_A
from MYDB.MYTABLE 
```

如果视图不存在，则使用“替换视图”将创建视图，如果存在则替换它。当然，这意味着如果您更改表，则必须重新创建视图。为了安全起见，我将视图定义保留在我的表创建程序的注释块中。

# vhdl - 最佳 VHDL 设计实践

> ID：11931149
> 
> 赞同：2
> 
> 时间：2012-08-13T09:06:16.227
> 
> 标签：vhdl

关于最佳 VHDL 设计实践的问题。

在设计状态机时，我应该使用架构中的信号还是使用变量。到目前为止，我一直使用变量，因为它们对进程“有点”私有，恕我直言，因为它们不应该在进程之外访问。但这是好的设计实践吗？

```
type state_type is (s0,s1);  
signal state : state_type := s0;  

A : process(clk)
begin   
  if rising_edge(clk) then  
    case state is  
.....  
    end case;  
  end if;
end process;  

--This process uses a variable  
B : process(clk)  
  type state_type is (s0,s1);  
  variable state : state_type := s0;  
begin  
  if rising_edge(clk) then  
    case state is  
      .....  
    end case;  
  end if;
end process; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T16:48:15.800

我更喜欢使用信号。原因是它允许设计在多个进程之间进行拆分。一个进程可能会担心状态机如何从一个状态移动到另一个状态，而其他进程可能包含依赖于状态的逻辑。

这样做意味着您可以拥有多个简单的流程，每个流程都做一件事。使用变量，一切都必须进入一个过程，这可能会变得笨拙。

这是一个风格的选择。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T12:45:19.487

我总是使用`variable`s ，除非我需要向另一个进程传达一些价值。因为这就是`signal`s 的用途。

“本地化状态变量”的另一个潜在好处（或者，违反您的编码标准！）是您可以在同一实体中的两个状态机中调用`type`and the `variable` `state_type`and而不会发生冲突......`state`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-15T16:28:53.227

对于合成，我几乎只使用信号。

为什么？

*   信号似乎更被普遍理解。
*   代码清晰。信号都同时更新一次。混合变量和信号可能（可能）令人困惑，因为您必须记住变量赋值立即生效，而随后的信号赋值意味着优先级。在同一进程执行期间，信号的值永远不会改变。
*   降低深度逻辑路径的风险。经验不足的设计人员可能会尝试使用 C 程序等变量，这会导致逻辑无法满足时序目标。

为什么不？

*   大型设计最终会产生非常长的信号列表，并且很难找到信号类型/大小/等。通常，这只发生在设计中最大块的包装器和/或设计顶层。

对于测试台，我根据用途使用变量和信号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T09:55:28.227

如果在这种情况下不需要将信号作为流程的输入或输出，则更好地使用变量，因为在构建体系结构时，您需要将信号分配给模块的输出，如果它赢了'不被使用，没有必要创建信号并花费更多内存来连接你不会使用的东西来连接到架构的另一个模块。

# html - 如何水平定位html中的三个div？

> ID：11931154
> 
> 赞同：70
> 
> 时间：2012-08-13T09:06:31.707
> 
> 标签：html, css, layout, position

我正在创建一个横向具有三个部分的示例网站。我希望最左边的 div 宽度为 25%，中间的 div 宽度为 50%，右边的宽度为 25%，以便这些分区水平填充所有 100% 的空间。

```
<html>
    <title>
    Website Title
    </title>

    <div id="the whole thing" style="height:100%; width:100%" >

        <div id="leftThing" style="position: relative; width:25%; background-color:blue;">
            Left Side Menu
        </div>

        <div id="content" style="position: relative; width:50%; background-color:green;">
            Random Content
        </div>

        <div id="rightThing" style="position: relative; width:25%; background-color:yellow;">
            Right Side Menu
        </div>

    </div>
</html> 
```

[http://imgur.com/j4cJu](https://imgur.com/j4cJu)

当我执行此代码时，div 会彼此重叠。我希望他们出现在彼此旁边！

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-08-13T09:21:06.810

我会避免在这类事情上使用花车；我宁愿使用`inline-block`.

还有一些需要考虑的点：

*   内联样式不利于可维护性
*   选择器名称中不应包含空格
*   你错过了一些重要的 HTML 标签，比如`<head>`和`<body>`
*   你没有包括`doctype`

这是格式化文档的更好方法：

```
<!DOCTYPE html>
<html>
<head>
<title>Website Title</title>
<style type="text/css">
* {margin: 0; padding: 0;}
#container {height: 100%; width:100%; font-size: 0;}
#left, #middle, #right {display: inline-block; *display: inline; zoom: 1; vertical-align: top; font-size: 12px;}
#left {width: 25%; background: blue;}
#middle {width: 50%; background: green;}
#right {width: 25%; background: yellow;}
</style>
</head>
<body>
<div id="container">
    <div id="left">Left Side Menu</div>
    <div id="middle">Random Content</div>
    <div id="right">Right Side Menu</div>
</div>
</body>
</html> 
```

这是一个很好的衡量标准的[jsFiddle](http://jsfiddle.net/9zGQ8/)。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2016-10-24T03:07:22.883

我知道这是一个非常古老的问题。当我使用[FlexBox](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Flexible_Box_Layout/Using_CSS_flexible_boxes)解决了这个问题时，就在这里发布这个。这是解决方案

```
#container {
  height: 100%;
  width: 100%;
  display: flex;
}
#leftThing {
  width: 25%;
  background-color: blue;
}
#content {
  width: 50%;
  background-color: green;
}
#rightThing {
  width: 25%;
  background-color: yellow;
}
```

```
<div id="container">

  <div id="leftThing">
    Left Side Menu
  </div>

  <div id="content">
    Random Content
  </div>

  <div id="rightThing">
    Right Side Menu
  </div>

</div>
```

只需要添加`display:flex`到容器中！不需要花车。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-08-13T09:09:22.197

您可以像这样使用[浮动元素](http://www.w3schools.com/css/css_float.asp)：

```
<div id="the whole thing" style="height:100%; width:100%; overflow: hidden;">
    <div id="leftThing" style="float: left; width:25%; background-color:blue;">Left Side Menu</div>
    <div id="content" style="float: left; width:50%; background-color:green;">Random Content</div>
    <div id="rightThing" style="float: left; width:25%; background-color:yellow;">Right Side Menu</div>
</div> 
```

注意**溢出：隐藏；**在父容器上，这是为了使父容器与子元素具有相同的尺寸（否则它的高度将为 0）。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2017-02-01T17:21:37.857

> > > **我可以看到问题已得到回答的最简单方法**
> > > ，我将为将来有此问题的人提供此答案

* * *

**编写内联 css 以及所有内部 div 的ID**都不是好习惯，请始终尝试使用**class**进行样式设置。如果您想成为一名专业的网页设计师，使用内联 css 是一种非常糟糕的做法。

在您的问题中，我为父 div 提供了一个包装类，所有内部 div 都是 css 中的子 div，您可以使用**nth-child**选择器调用内部 div。

我想在这里指出几件事

1 - 不要使用内联 css（这是非常糟糕的做法）

2 - 尝试使用类而不是 id，因为如果你提供一个 id，你只能使用它一次，但是如果你使用一个类，你可以多次使用它，你也可以使用该类来设置它们的样式，这样你就可以编写更少的代码。

* * *

> 我的答案的codepen链接

[https://codepen.io/feizel/pen/JELGyB](https://codepen.io/feizel/pen/JELGyB)

* * *

```
 ```
 .wrapper{width:100%;}
            .box{float:left; height:100px;}
            .box:nth-child(1){
               width:25%;
               background-color:red; 

            }
            .box:nth-child(2){
               width:50%;
              background-color:green; 
            }
            .box:nth-child(3){
               width:25%;
              background-color:yellow; 
            }
```

```
 <div class="wrapper">
        <div class="box">
        Left Side Menu
        </div>
        <div class="box">
        Random Content
        </div>
        <div class="box">
        Right Side Menu
        </div>
    </div>
``` 
```

* * *

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-08-13T09:12:28.030

你添加一个

```
float: left; 
```

到 3 个元素的样式，并确保父容器具有

```
overflow: hidden; position: relative; 
```

这可以确保浮动占用实际空间。

```
<html>
    <head>
        <title>Website Title </title>
    </head>
    <body>
        <div id="the-whole-thing" style="position: relative; overflow: hidden;">
            <div id="leftThing" style="position: relative; width: 25%; background-color: blue; float: left;">
                Left Side Menu
            </div>
            <div id="content" style="position: relative; width: 50%; background-color: green; float: left;">
                Random Content
            </div>
            <div id="rightThing" style="position: relative; width: 25%; background-color: yellow; float: left;">
                Right Side Menu
            </div>
        </div>
    </body>
</html> 
```

另请注意，宽度：100% 和高度：100% 需要从容器中删除，否则第 3 块将换行到第 2 行。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-13T09:12:47.687

去掉并用and`position:relative;`替换它。`float:left;``float:right;`

jsfiddle 中的示例：http: [//jsfiddle.net/d9fHP/1/](http://jsfiddle.net/d9fHP/1/)

```
 <html>
<title>
Website Title </title>
<div id="the whole thing" style="float:left; height:100%; width:100%">
    <div id="leftThing" style="float:left; width:25%; background-color:blue;">
         Left Side Menu
    </div>
    <div id="content" style="float:left; width:50%; background-color:green;">
         Random Content
    </div>
    <div id="rightThing" style="float:right; width:25%; background-color:yellow;">
         Right Side Menu
    </div>
</div>
</html>​ 
```

# javascript - 如何在有或没有javascript的情况下获取android中每个页面的内容高度？

> ID：11931159
> 
> 赞同：3
> 
> 时间：2012-08-13T09:06:46.710
> 
> 标签：javascript, android, html, webview, webclient

我想一一获取每个网页的内容高度。但我不明白。如果我单独加载页面，那么我可以获得每个页面的高度。但是如果我试图连续获取网页的内容高度，那么我失败了。

这是我的代码-

```
StringBuffer content;
     String temp;

         for(i=tempstart_index;i<=tempend_index;i++)
                {
                Log.i("value of i",i+1+"");

                content+=decrypted(i);
                temp1=decrypted(i);
                // TODO Auto-generated method stub
                webview.setWebViewClient(new WebClient());
                {

                    @Override
                    public void onPageFinished(WebView view, String url)
                    {
                        webview.loadUrl("javascript:window.HTMLOUT.getContentHeight(document.getElementsByTagName('html')[0].scrollHeight);");
                        int initialpageheight=webview.getContentHeight();

                        if(initialpageheight>0)
                        {
                            webheight=initialpageheight;

                            //Toast.makeText(getApplicationContext(), ""+initialpageheight, Toast.LENGTH_LONG).show();
                            Log.i("page finish","" +webheight);

                            initialpage=webheight;
                            if(pagenumber>0)
                            {
                            webview.scrollTo(0, webheight);
                            }
                                         }
         }});
         webview.loadDataWithBaseURL("file:///android_asset/KH_Brown_Fixed_Layout/",temp1,
     "text/html", "utf-8",null);
                }
         return content;
         } 
```

然后我在合并字符串后将所有合并的页面显示为一页 -

//这里 reflowable() 读取 html 并合并它们，合并后返回它。

```
 String ds=reflowable();
                webview.loadDataWithBaseURL("file:///android_asset/KH_Brown_Fixed_Layout/", ds, "text/html", "utf-8", null); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T11:40:37.293

在 JavaScript 中，您可以通过以下方式在 webkit 浏览器上获取页面高度：

`window.innerHeight`

至于你在那里尝试什么，我不知道，但这会给你在你的 Android 浏览器中的高度。

# android - 当我单击自定义微调器（ActivityGroup）时出现 java.lang.NullPointerException

> ID：11931164
> 
> 赞同：0
> 
> 时间：2012-08-13T09:07:14.540
> 
> 标签：android, android-arrayadapter

目前我在一个标签中有两个活动。在第二个活动中，我有自定义列表和自定义`spinner`。微调器的数据`listview`是从服务器接收的.... 工作正常。因此，当我在第二个活动中单击时`spinner`，应用程序崩溃并显示`logcat`：

```
08-13 11:54:55.908: E/AndroidRuntime(13555): java.lang.NullPointerException
08-13 11:54:55.908: E/AndroidRuntime(13555):    at  android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:355)
08-13 11:54:55.908: E/AndroidRuntime(13555):    at android.widget.ArrayAdapter.getDropDownView(ArrayAdapter.java:376)
08-13 11:54:55.908: E/AndroidRuntime(13555):    at android.widget.Spinner$DropDownAdapter.getDropDownView(Spinner.java:332)
08-13 11:54:55.908: E/AndroidRuntime(13555):    at android.widget.Spinner$DropDownAdapter.getView(Spinner.java:328)
08-13 11:54:55.908: E/AndroidRuntime(13555):    at android.widget.AbsListView.obtainView(AbsListView.java:1474)
08-13 11:54:55.908: E/AndroidRuntime(13555):    at android.widget.ListView.measureHeightOfChildren(ListView.java:1216)
08-13 11:54:55.908: E/AndroidRuntime(13555):    at android.widget.ListView.onMeasure(ListView.java:1127)
08-13 11:54:55.908: E/AndroidRuntime(13555):    at android.view.View.measure(View.java:8335)
08-13 11:54:55.908: E/AndroidRuntime(13555):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
08-13 11:54:55.908: E/AndroidRuntime(13555):    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1017)
08-13 11:54:55.908: E/AndroidRuntime(13555):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:386)
08-13 11:54:55.908: E/AndroidRuntime(13555):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
08-13 11:54:55.908: E/AndroidRuntime(13555):    at android.view.View.measure(View.java:8335)
08-13 11:54:55.908: E/AndroidRuntime(13555):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
08-13 11:54:55.908: E/AndroidRuntime(13555):    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1017)
08-13 11:54:55.908: E/AndroidRuntime(13555):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:386)
08-13 11:54:55.908: E/AndroidRuntime(13555):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
08-13 11:54:55.908: E/AndroidRuntime(13555):    at com.android.internal.widget.WeightedLinearLayout.onMeasure(WeightedLinearLayout.java:60)
08-13 11:54:55.908: E/AndroidRuntime(13555):    at android.view.View.measure(View.java:8335)
08-13 11:54:55.908: E/AndroidRuntime(13555):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
08-13 11:54:55.908: E/AndroidRuntime(13555):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
08-13 11:54:55.908: E/AndroidRuntime(13555):    at android.view.View.measure(View.java:8335)
08-13 11:54:55.908: E/AndroidRuntime(13555):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
08-13 11:54:55.908: E/AndroidRuntime(13555):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
08-13 11:54:55.908: E/AndroidRuntime(13555):    at android.view.View.measure(View.java:8335)
08-13 11:54:55.908: E/AndroidRuntime(13555):    at android.view.ViewRoot.performTraversals(ViewRoot.java:843)
08-13 11:54:55.908: E/AndroidRuntime(13555):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1892)
08-13 11:54:55.908: E/AndroidRuntime(13555):    at android.os.Handler.dispatchMessage(Handler.java:99)
08-13 11:54:55.908: E/AndroidRuntime(13555):    at android.os.Looper.loop(Looper.java:130)
08-13 11:54:55.908: E/AndroidRuntime(13555):    at android.app.ActivityThread.main(ActivityThread.java:3835)
08-13 11:54:55.908: E/AndroidRuntime(13555):    at java.lang.reflect.Method.invokeNative(Native Method)
08-13 11:54:55.908: E/AndroidRuntime(13555):    at java.lang.reflect.Method.invoke(Method.java:507)
08-13 11:54:55.908: E/AndroidRuntime(13555):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:864)
08-13 11:54:55.908: E/AndroidRuntime(13555):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:622)
08-13 11:54:55.908: E/AndroidRuntime(13555):    at dalvik.system.NativeStart.main(Native Method) 
```

我一直在查看这些帖子-> [Android :WindowManager$BadTockenException on Spinner Click](https://stackoverflow.com/questions/4665931/android-windowmanagerbadtockenexception-on-spinner-click)这解决了我的第一个问题和[活动组内自定义列表中的微调器问题，](https://stackoverflow.com/questions/7188535/problem-with-spinner-in-custom-list-inside-activity-group)但没有给我任何帮助。

所以这是我设置视图和微调器以及我的自定义适配器的方法：

```
 View viewToLoad = LayoutInflater.from(this.getParent()).inflate(R.layout.atlaides, null);
    this.setContentView(viewToLoad); 
    //setContentView(R.layout.atlaides);
    sp = (Spinner)  viewToLoad.findViewById(R.id.spinner1);

  MySpiner sxspin =  new MySpiner(this.getParent(), R.layout.c_spinner, android.R.id.text1, categories);
    sxspin.setDropDownViewResource(android.R.layout.simple_dropdown_item_1line);

    this.sp.setAdapter(sxspin); 
```

我的自定义微调器适配器如下所示：

```
private class MySpiner extends ArrayAdapter<String>{

    public MySpiner(Context context, int resource, int textViewResourceId,
            List<String> objects) {
        super(context, resource, textViewResourceId, objects);
        // TODO Auto-generated constructor stub
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub

        LayoutInflater pieputejs = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View view = pieputejs.inflate(R.layout.c_spinner, parent,false);
        TextView text = (TextView)view.findViewById(R.id.textView1);
        text.setText(categories.get(position));
        //text.setTextColor(Color.GRAY);
        //text.setShadowLayer(2.5f, 2, 2, Color.WHITE);
        //text.setGravity(TextView.FOCUS_LEFT);

        return view;
    }       
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T09:29:28.287

这`NullPointerException`不是来自自定义适配器`MySpinner`，而是来自`ArrayAdapter`代码中其他地方的另一个简单的适配器。在您提供给您的数据中，`ArrayAdapter`您有`null`值，这就是最有可能抛出`NullPointerException`. 查看您传递的数据并`null`从中删除值。

# android - ArrayAdapter.getView() 是如何工作的？

> ID：11931166
> 
> 赞同：0
> 
> 时间：2012-08-13T09:07:24.913
> 
> 标签：android, android-arrayadapter

我正在扩展`ArrayAdapter<UrlItem>`类并覆盖了以下方法：

```
@Override
    public View getView(int position, View convertView, ViewGroup parent) {
} 
```

我观察到，这个方法被调用了好几次。我想问，你怎么知道这个 gethod 被调用多少次来返回视图？我想知道如何`getView()`运作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:27:11.707

getview 调用方法的编号取决于编号。您在适配器中传递的对象或数组列表的大小。假设您想在 gridview 的列表视图中显示 5 个项目，则此方法被调用 5 次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T09:17:32.207

> 绝对不能保证`getView()`调用的顺序和次数。

看看这个 SO Question[自定义列表视图适配器 getView 方法被多次调用，并且没有连贯的顺序](https://stackoverflow.com/questions/2618272/custom-listview-adapter-getview-method-being-called-multiple-times-and-in-no-co)和一个很好的教程 [http://android.amberfog.com/?p=296](http://android.amberfog.com/?p=296)。

# objective-c - iOS：在后台加载声音时的多线程问题

> ID：11931174
> 
> 赞同：0
> 
> 时间：2012-08-13T09:08:01.997
> 
> 标签：objective-c, ios, concurrency, avaudioplayer, objective-c-blocks

我继承了一些需要整理的代码。该应用程序有一些核心声音，目前，有很多`AVAudioPlayer`实例附加到各种`ViewController`播放相同的几个声音。

作为重构练习的一部分，我决定实现一个名为`SoundController`. 这个类将为`AVAudioPlayer`需要播放的每个声音包含一个，而不是每个`ViewController`实例化自己的，他们可以轻松地只使用一个：

```
[[SoundController controller].majorFunctionSound playAtTime:0]; 
```

另一个重要的事情是确保在所有声音被使用之前都调用了 prepareToPlay: 以最小化任何延迟。由于只有少数声音并且它们都可能在任何用户会话期间使用，因此在 SoundController 首次实例化时预加载所有声音（在后台线程上）是有意义的。在 init 方法中，我有这样的东西：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, nil, ^(void)          
{
NSURL *soundURL = [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/MAJOR FUNCTION.m4a", [[NSBundle mainBundle] resourcePath]]];
_majorAudioSound = [[AVAudioPlayer alloc] initWithContentsOfURL:soundURL error:nil];
[_majorAudioSound  prepareToPlay];
}); 
```

主要音频是`(readonly, strong)`. `@synthesize majorAudioSound = _majorAudioSound`.

我担心的是这在并发方面的工作有多差（或好），以及我可以做些什么来改进代码。具体来说，如果我这样做：

```
[[SoundController controller].majorFunctionSound playAtTime:0]; 
```

显然，majorFunctionSound 有可能无法正确启动，具体取决于后台初始化块是否已完成。`nil`财产返回并且声音根本不播放会发生更糟糕的情况吗？

可能还有什么问题？有没有办法始终确保 AVAudioPlayer 已正确设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:38:31.637

首先，我想让你重新考虑一下你的类是否必须是单例，因为你打算只拥有它的一个实例。这当然是一种方法，但我认为您的初始化问题继承自您决定使用单例类的事实。

假设您有一个名为 SoundManager 的类，并且您已将其设为 Singleton 类。

当您在应用程序的任何位置请求 SoundManager 的实例时，您会希望假定返回的实例已准备好立即使用。如果您在 SoundManager 中有一个异步的 init 方法，那么您确实存在设计问题，因为您永远不必知道何时请求 Singleton 是否是第一次初始化。

由于 SoundManager 需要初始化，我会让我的应用程序在某种处理应用程序流的基类中拥有 SoundManager 的实例，而不是使其成为 Singleton。要么你可以让你的 AppDelegate 实例化唯一的 SoundManager，或者你可以有一个名为 ApplicationController 的类，或者你可以在应用程序初始化时加载应用程序所需的所有内容。然后，您可以通过此控制器类通过传递引用或让您的 ApplicationController 成为单例来访问 SoundManager 实例。当然，如果 SoundManager 是单例的，只要确保在启动时对其进行初始化，这也有效，但我更喜欢尽可能少的单例类。

现在回答您关于知道您的声音是否已加载的问题。

我建议您在让用户开始使用应用程序之前加载所有声音。同时，你可以向用户展示一些东西，比如加载屏幕、进度条，如果你愿意的话还可以播放声音/音乐。下面是一个结构示例：

*   创建一个名为 SoundManager 的类，其属性“已加载”从一开始就为假
*   创建一个名为 ApplicationController 的类来实例化 SoundManager，以及您可能拥有的其他有用的类，如 TextureManager 或 LocationManager 等。
*   当应用程序启动时，实例化 ApplicationController，然后实例化 SoundManager。
*   显示加载屏幕
*   让 SoundManager 先加载“加载声音”，加载后开始播放
*   声音加载完成后，将“loaded”属性设置为true
*   当 ApplicationController 加载完所有内容后，让用户通过淡出加载屏幕来开始使用应用程序。

如果您需要用户在加载声音之前就开始使用应用程序，那么您仍然可以通过拥有一个名为“已加载”的属性来使用相同的方法。请记住保持此属性的处理同步。

# java - InetSocketAddress 中的通配符地址是什么意思？

> ID：11931175
> 
> 赞同：17
> 
> 时间：2012-08-13T09:08:02.810
> 
> 标签：java, sockets

在构造函数的文档中[`InetSocketAddress(int port)`](http://docs.oracle.com/javase/7/docs/api/java/net/InetSocketAddress.html#InetSocketAddress%28int%29)它说：

> 创建一个套接字地址，其中 IP 地址是通配符地址，端口号是指定值。

通配符地址有什么作用，在使用时它意味着什么 `socket.bind()`？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-13T09:16:09.150

来自文档：通配符是一个特殊的本地 IP 地址。它通常表示“任何”，只能用于绑定操作。

此 IP 地址的值为 0.0.0.0。如果您有两个网络适配器，一个 IP 地址为 1.1.1.1，一个 IP 地址为 2.2.2.2，那么您可以创建一个监听套接字并将其绑定到 1.1.1.1，这样套接字就不会绑定到 2.2.2.2。您也可以创建一个监听套接字并将其绑定到 2.2.2.2，这样它就不会绑定到 1.1.1.1。如果您不关心并且希望您的套接字绑定到所有网卡，那么您将其绑定到通配符地址。

另一个特殊值是 127.0.0.1，这意味着只有同一台计算机上的客户端才能连接到您的服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T05:05:06.983

通配符掩码是位掩码，指示 IP 地址的哪些部分可以采用任何值。在 Cisco IOS 中，它们用于多个地方，例如：

*   指示某些路由协议（例如 OSPF）的网络或子网的大小。
*   指示应在访问控制列表 (ACL) 中允许或拒绝哪些 IP 地址。

# android - GridView.setOnItemClickListener 不工作

> ID：11931177
> 
> 赞同：6
> 
> 时间：2012-08-13T09:08:06.537
> 
> 标签：android, gridview, android-adapterview

自 2 天以来，我一直遇到一个问题。我有一个网格视图，我需要显示图像。当我单击网格项目时，它必须转到下一个活动。我能够在 gridview 中显示图像，但问题是什么时候我点击它没有响应的那个项目..（OnItemClickListener 不工作）。我无法追踪我做错的问题。

```
 package com.logictreeit.mobilezop.fragments;

     import android.app.Activity;
     import android.content.Context;
     import android.os.Bundle;
     import android.support.v4.app.Fragment;
     import android.util.Log;
     import android.view.LayoutInflater;
     import android.view.View;
     import android.view.ViewGroup;
     import android.widget.AdapterView;
     import android.widget.AdapterView.OnItemClickListener;
     import android.widget.GridView;

     import com.logictreeit.mobilezop.adapters.PhotoAdapter;
     import com.logictreeit.mobilezop.custom.Utils;

      public class Dup_AlbumPhotosFragment extends Fragment implements
                OnItemClickListener {

private static final String TAG = "AlbumPhotos Fragment";
private GridView gridView;
private Context mContext;
private PhotoAdapter photoAdapter;

public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    Log.v(TAG, "on Activity Created ");

}

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
}

public void onAttach(Activity activity) {
    super.onAttach(activity);
    this.mContext = activity;
}

public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    Log.v(TAG, "OnCreateView");
    gridView = new GridView(mContext);
    gridView.setNumColumns(GridView.AUTO_FIT);
    gridView.setClickable(true);
    gridView.setOnItemClickListener(this);
    photoAdapter = new PhotoAdapter(mContext,                   -1,Utils.getALbumList().get(0).getPhotosList());
    gridView.setAdapter(photoAdapter);
    return gridView;
}

@Override
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
    Log.v(TAG, "on ItemClikced");

}

       } 
```

这是我的片段..

```
 package com.logictreeit.mobilezop.adapters;

        import java.util.List;

         import android.content.Context;
         import android.view.LayoutInflater;
         import android.view.View;
         import android.view.ViewGroup;
         import android.widget.ArrayAdapter;
         import android.widget.CheckBox;
         import android.widget.CompoundButton;
         import android.widget.CompoundButton.OnCheckedChangeListener;
         import android.widget.ImageView;

        import com.logictreeit.mobilezop.R;
        import com.logictreeit.mobilezop.models.Photo;

            public class DupPhotoAdapter extends ArrayAdapter<Photo> {
            private static final String TAG = "PhotoAdapter";
            private Context context;
private List<Photo> photoList;

public DupPhotoAdapter(Context context, int textViewResourceId,
        List<Photo> objects) {
    super(context, textViewResourceId, objects);
    this.context = context;
    this.photoList = objects;
}

public int getCount() {
    return photoList.size();
}

public View getView(int position, View convertView, ViewGroup parent) {
    convertView = LayoutInflater.from(context).inflate(
            R.layout.grid_item_image_layout, null);

    ImageView imageView = (ImageView) convertView
            .findViewById(R.id.grid_item_imageview);
    final CheckBox checkBox = (CheckBox) convertView
            .findViewById(R.id.grid_item_checkbox);
    final Photo photo = photoList.get(position);

    if (photo.isSelected()) {
        checkBox.setChecked(true);
    } else {
        checkBox.setChecked(false);
    }
    imageView.setImageResource(Integer.parseInt(photo.getFileUrl()));
    checkBox.setOnCheckedChangeListener(new OnCheckedChangeListener() {
        public void onCheckedChanged(CompoundButton buttonView,
                boolean isChecked) {
            if (isChecked) {
                photo.setSelected(true);
            } else {
                photo.setSelected(false);
            }

        }
    });
    return convertView;

}

     } 
```

这是我的适配器。

如果你们知道。请告诉我...

谢谢，柴坦亚

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-13T09:32:55.610

我认为您的 ImageViews 窃取焦点，因为它们是可检查的。所以项目点击不会发生，因为你的 ImageViews 拦截它。

将这些属性添加到您的图像视图可能会有所帮助，但可能会给您的检查带来麻烦。

```
 android:focusable="false"
    android:focusableInTouchMode="false" 
```

在列表视图中有可检查的项目有点痛苦。但我认为你会找到相关的主题如何做到这一点。

这是 1 个看似合适的教程，我承认我没有仔细研究它，但您可能想要：

[http://windrealm.org/tutorials/android/listview-with-checkboxes-without-listactivity.php](http://windrealm.org/tutorials/android/listview-with-checkboxes-without-listactivity.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-31T19:44:30.553

还要确保您的适配器为 isEnabled 返回 true

```
@Override
     public boolean isEnabled(int i) {
     return true;
} 
```

[http://developer.android.com/reference/android/widget/BaseAdapter.html#isEnabled(int)](http://developer.android.com/reference/android/widget/BaseAdapter.html#isEnabled(int))

> isEnabled(int position) 如果指定位置的项目不是分隔符，则返回 true。

Otherwise the click event, will not be throw for your item

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-15T11:41:37.927

希望这可能对某人有所帮助，在gridview中，如果您在其中的元素中添加按钮或设置“android：clickable = true”，则不会监听gridview的OnItemClickListener，而是可以使用图像创建Image或TextView并查看您没有设置clickable="true"。现在， OnItemClickListener 将收听 TextView，这对我有用。

# java - HttpSolrServer 实例管理

> ID：11931179
> 
> 赞同：1
> 
> 时间：2012-08-13T09:08:10.077
> 
> 标签：java, solr, thread-safety, solrj

在 Web 应用程序中跨多个线程共享单个 HttpSolrServer 是否安全？推荐吗？

每次都构建一个新实例很昂贵吗？在我的机器上大约需要 10 毫秒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T10:32:49.400

`HttpSolrServer`查看(at [grepcode](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.solr/solr-solrj/3.6.0/org/apache/solr/client/solrj/impl/HttpSolrServer.java) )的来源后的一些观察

1.  没有作为类变量维护的请求特定数据。因此，只要所有配置参数（如基本 URL、连接超时等）不被任何线程修改，`HttpSolrServer`就可以在多线程环境中安全地使用 的实例。

2.  `HttpSolrServer`内部使用一个类`ThreadSafeClientConnManager`来管理内部 http-client 连接上的线程安全（*它使用 Apache HTTP Client 4.x 连接到 solr*）。这可确保在与 Solr 服务器通信时不存在线程安全问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-27T06:01:49.670

请看下面的链接可能会有所帮助： http: [//lucene.472066.n3.nabble.com/Memory-problems-with-HttpSolrServer-td4060985.html](http://lucene.472066.n3.nabble.com/Memory-problems-with-HttpSolrServer-td4060985.html)

# sencha-touch - 创建可拖动面板

> ID：11931181
> 
> 赞同：1
> 
> 时间：2012-08-13T09:08:13.183
> 
> 标签：sencha-touch

我想创建一个面板，它有三个子面板，只能拖到左侧。当它们完全可见时（当它们完全出现在父面板上时），父面板应该被禁用（我使用了模态配置，但子面板相互叠加，并且它们调整为其中的 html 内容）。当三个子面板被拖到左侧时，应该启用父面板。用户可以再次将这些子面板向右拖动到初始位置，然后再次禁用父面板。我只能创建具有滑动效果的子面板，但不知道如何实现其他要求，因为我是 sencha touch 和 extjs 的新手。还有其他资源可以了解更多关于 sencha 和 ExtJs 的信息吗？

另一件事是，作为一个例子，Sencha 文档没有解释更多关于 Draggable 对象的“约束”、“方向”等。我在哪里可以找到关于那些在他们的文档中没有完全描述的分类的更多细节。

我附上了两张图片（面板的初始外观以及拖动子面板时的外观），谁能给我一些提示如何完成我的任务？非常感谢！！ ![首先应该是这样的](../Images/c3480bf351514d9a469aa90d62ba7647.png)

![这是子面板被拖到左边时的样子。应该出现小部分以便将它们拖回来](../Images/e0a8edea15e3f39b656dc2f790f00d44.png)

# ruby-on-rails-3 - MongoDB 错误与 Mongoid、Heroku、Device、MongoHQ 和 Rails

> ID：11931183
> 
> 赞同：5
> 
> 时间：2012-08-13T09:08:21.373
> 
> 标签：ruby-on-rails-3, heroku, device, mongohq, mongoid3

我正在开发[一个当前部署到 heroku 的简单应用程序](http://bookfoo.herokuapp.com/)- 它使用 mongoid、设备并且可以在 localhost 中非常轻松地创建用户登录，但不能在 heroku 的生产环境中创建。可以尝试创建一个账号，提交后报错。

我认为我用于生产的 mongoid.yml 需要更改，但我不知道如何更改。

我`heroku config`的有以下几点：

```
 === Config Vars for bookfoo
DATABASE_URL:        postgres://jeibucpexp:bVZzGaGPUeGylwmA7dyE@ec2-107-20-186-97.compute-1.amazonaws.com/jeibucpexp
GEM_PATH:            vendor/bundle/ruby/1.9.1
LANG:                en_US.UTF-8
MONGOHQ_URL:         mongodb://heroku:14bc6d476e6449c952d6350b07e89643@alex.mongohq.com:10065/app6153931
MONGOLAB_URI:        mongodb://heroku_app6153931:og03dk0hdrj7r8lsit51k6ah9n@ds037097-a.mongolab.com:37097/heroku_app6153931
PATH:                bin:vendor/bundle/ruby/1.9.1/bin:/usr/local/bin:/usr/bin:/bin
RACK_ENV:            production
RAILS_ENV:           production
SHARED_DATABASE_URL: postgres://jeibucpexp:bVZzGaGPUeGylwmA7dyE@ec2-107-20-186-97.compute-1.amazonaws.com/jeibucpexp 
```

mongoid.yml 具有 Heroku 中建议的以下内容：

```
development:
  sessions:
    default:
      database: bookfoo_app_development
      hosts:
        - localhost:27017
      options:
        consistency: :strong
  options:
test:
  sessions:
    default:
      database: bookfoo_app_test
      hosts:
        - localhost:27017
      options:
        consistency: :strong
production:
  sessions:
    default:
      uri: <%= ENV['MONGOHQ_URL'] %>
    options:
      skip_version_check: true
      safe: true 
```

我的 gemfile 有以下内容：

```
source 'https://rubygems.org'

gem 'rails', '3.2.3'

group :development, :test do
  gem 'sqlite3'
    gem 'rspec-rails'
end

group :test do
    gem 'database_cleaner'
    gem 'mongoid-rspec'
    gem 'factory_girl_rails'
    gem 'email_spec'
    gem 'capybara'
    gem 'launchy'
end

group :production do
  gem 'thin'
end

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'
gem "mongoid", :git => "git://github.com/mongoid/mongoid.git"
gem "bson_ext"
gem "devise" 
```

在`git push heroku master`它给了我以下提示之后：

```
There is a configuration error with the current mongoid.yml.
       Problem:
       No database provided for session configuration: :options.
       Summary:
       Each session configuration must provide a database so Mongoid knows where the default database to persist to. What was provided was: {"skip_version_check"=>true, "safe"=>true}.
       Resolution:
       If configuring via a mongoid.yml, ensure that within your :options section a :database value for the session's default database is defined.
       Example:
       \_\_development:
       \_\_\_\_sessions:
       \_\_\_\_\_\_options:
       \_\_\_\_\_\_\_\_database: my_app_db
       \_\_\_\_\_\_\_\_hosts:
       \_\_\_\_\_\_\_\_\_\_- localhost:27017 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T10:00:07.303

mongoid.yml 应该是这样（我的缩进是错误的）：

```
production:
  sessions:
    default:
      uri: <%= ENV['MONGOHQ_URL'] %>
      options:
        skip_version_check: true
        safe: true 
```

# php - PHP 会话未正确创建

> ID：11931186
> 
> 赞同：0
> 
> 时间：2012-08-13T09:08:35.120
> 
> 标签：php, session

我是 PHP 新手，之前没有使用过会话，我已经阅读了一些内容并了解它们的作用以及我应该如何使用它们。

但是，当我创建会话时，它似乎可以很好地创建会话（代码运行，如果我查看 cookie，我可以看到来自我的网站的条目）我也可以在同一页面上设置 $_SESSION 值，但只要我输入一个不同的页面，会话似乎被重置。

这是我的代码：

```
$sessionid = md5(uniqid(microtime()) . $_SERVER['REMOTE_ADDR'] . $_SERVER['HTTP_USER_AGENT']);
ini_set('session.auto_start', 1);
ini_set('session.lifetime', 2678400);
ini_set('session.use_cookies', 1);
ini_set('session.cache_limiter', 'private_no_expire');
session_start($sessionid);

// Also tested that setting these doesn't give an error either
$_SESSION['Username'] = //Code to get username
$_SESSION['UserID'] = // Code to get userID

echo "<script language='Javascript'>";
echo "window.location='" . $forwardpage . "';";
echo '</script>';
exit(); 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T09:20:54.027

问题是每次加载脚本时都会创建一个新的会话 ID 并将其发送到客户端。跳过 $sessionid 变量，php 将为您生成一个 sessionid 并且它会起作用。

因此，使用没有 $sessionid 的 session_start()

# php - 返回最新的插入 id

> ID：11931188
> 
> 赞同：0
> 
> 时间：2012-08-13T09:08:38.953
> 
> 标签：php, mysql, sql, last-insert-id

我无法获得最新的插入 ID。这是我的 php 代码：

```
$query='INSERT INTO candidates (company_id, name, surname, address1, address2, city, county, postcode, cv, skills, distance) VALUES (10254, \'name\', \'surname\', \'1st Floor\', \'Street\', \'City\', \'County\', \'postcode\', \'0\', \'#6#,#3#,#2#,#1#,\', 25)';
$sql = mysql_query($query, $jobboard) or die(mysql_error());
$res = mysql_query('SELECT LAST_INSERT_ID() FROM candidates AS ID',$jobboard); 
```

当我将查询`'SELECT LAST_INSERT_ID() FROM candidates'`直接放入 MySQL 作为回报时，我得到的记录与该表中的记录一样多，所有值都是 0。例如，现在我有 5 条记录，id 是 2、3、4、5、6（我删除了第一个)，我得到这张表：
LAST_INSERT_ID()
0
0
0
0
0

如何获取最新的插入记录 ID？顺便说一句，只有 1 列是`AUTO_INCREMENT`，即`id`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T09:11:28.170

```
mysql_insert_id() 
```

这一切

[关于 mysql_insert_id 的文档](http://php.net/manual/en/function.mysql-insert-id.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T09:11:36.180

您想使用该`mysql_insert_id()`函数来获取最后一个 ID，如下所示：

```
<?php
$link = mysql_connect('localhost', 'mysql_user', 'mysql_password');
if (!$link) {
    die('Could not connect: ' . mysql_error());
}
mysql_select_db('mydb');

mysql_query("INSERT INTO mytable (product) values ('kossu')");
printf("Last inserted record has id %d\n", mysql_insert_id());
?> 
```

在那一点上，您还想迁移到更新、更闪亮、更安全的[PHP PDO](http://au2.php.net/manual/en/book.pdo.php) - 旧的贬值 mysql_* 函数的所有好处，而不会让人头疼和 STD :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T09:31:14.930

只需使用`mysql_insert_id();`您就可以在数据库中获取激光插入的ID。在您的情况下，您可以像这样使用：

```
$query='INSERT INTO candidates (company_id, name, surname, address1, address2, city, county, postcode, cv, skills, distance) VALUES (10254, \'name\', \'surname\', \'1st Floor\', \'Street\', \'City\', \'County\', \'postcode\', \'0\', \'#6#,#3#,#2#,#1#,\', 25)';
$sql = mysql_query($query, $jobboard) or die(mysql_error());
$last_id=mysql_insert_id();//get last inserted id. 
```

# makecert - makecert.exe - -ss 选项的参数列表？

> ID：11931189
> 
> 赞同：1
> 
> 时间：2012-08-13T09:08:46.583
> 
> 标签：makecert

我想将我的证书放入特定的存储中，但我现在不将此存储的名称作为 makecert.exe 的 -ss 选项的参数。在哪里可以找到此工具的每个选项的所有可能参数？既不是 MSDN 也不是 -? （工具的帮助选项）可以提供帮助。

例如，“受信任的根证书颁发机构”的 -ss 等效项是什么？还有另一个证书商店？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T12:44:01.573

[您可以在http://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.storename.aspx](http://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.storename.aspx)找到商店名称列表 。使用“成员标题”下的“成员名称”列中的值。请注意，并非所有证书存储都可以在所有操作系统中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T22:14:59.613

您可能想`cert:`在 PowerShell 中查看驱动器。只是`cd cert:`。Windows8/Server 2012 具有`Import-PfxCertificate`.

# splash-screen - 如何从 Ubuntu 11.04 更改英特尔 BIOS 屏幕

> ID：11931193
> 
> 赞同：0
> 
> 时间：2012-08-13T09:09:05.017
> 
> 标签：splash-screen, ubuntu-11.04, bios

我有 BIOS 版本为 1.2.2 的戴尔 voestro 220s 系列台式电脑。Ubuntu 11.04 已安装在其上。在系统启动时，它会在屏幕上显示 Dell voestro 和 Intel 标志。我想更改此英特尔和戴尔 voestro BIOS 启动画面。我得到了寡妇系统的解决方案，但我想从我的 ubuntu 11.04 系统中更改它。这怎么可能 ？谢谢阿马尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T00:19:33.340

我相信做到这一点的唯一方法是更改​​ BIOS。您可以转储原始 BIOS 映像（例如使用带有[flashrom](http://flashrom.org)的 Linux 实时映像，如[sysrescuecd](http://www.sysresccd.org/)）并使用 HexEditor 打开它以搜索映像所在的位置（可能是位图映像），或者您可以考虑将 BIOS 更改为一个开源的（如[Coreboot](http://www.coreboot.org) + [SeaBIOS](http://www.seabios.org)）并重建它们以包含自定义图像（有关更多信息，请参见此[页面](http://www.coreboot.org/SeaBIOS#Adding_a_graphical_.22bootsplash.22_image)）。

我应该警告你，这两种选择都不容易。第一个涉及低级“黑客”和修补（并且可能很危险），而第二个主要取决于您的主板是否受支持（不幸的是，大多数英特尔处理器的主板不支持）以及您对在 Linux 中编译东西的熟悉程度.

希望这可以帮助。=)

# java - 如何解决 org.xml.sax.SAXException

> ID：11931196
> 
> 赞同：0
> 
> 时间：2012-08-13T09:09:13.313
> 
> 标签：java

我收到错误：

```
org.xml.sax.SAXException: expected </taxonomy> 
```

我正在创建用于创建父子关系的 xml。我的代码：

```
public void createXML(Map mp) throws SAXException, TransformerConfigurationException{

System.out.println("the size of the mp is              :   "+mp.size());
String parent,child,li,child1;
  li = "li";
Set keySetFinal = mp.keySet();
System.out.println("the size of the key set is : "+keySetFinal.size());
// Get Iterator of keySet
Iterator<String> iterator = keySetFinal.iterator(); 
XMLDocument xml = new XMLDocument(new StreamResult("C:\\Program Files\\Notepad++\\XML_FOR_TAX.xml"), false, 4, null);
  xml.startDocument();
  {
    try {
        xml.startElement("taxonomy");

      while(iterator.hasNext()){          
            //  System.out.println("loop started");
            parent = iterator.next();
            NodeList childNodes = (NodeList) mp.get(parent);
            System.out.println("the size of the child list for this iteration is: "+ childNodes.getLength());
            xml.addElement("li", parent);
            System.out.println("key in the xml creation function is: "+parent);

                for (int i = 0; i < childNodes.getLength(); i++){
                     if (childNodes.item(i).getNodeType() == Node.ELEMENT_NODE){
                     Element child_1 = (Element)childNodes.item(i); 
                     child1 = child_1.getAttribute("name");
                     System.out.println("child now is : "+child1);
                     xml.startElement("ul");
                     xml.addElement("li", child1);
                     xml.endElement("ul");
                     }                     
                     }
                xml.endElement("li");
      }

    }catch (SAXException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                }
    xml.endElement("taxonomy"); 
            }
      xml.endDocument();
  } 
```

# c# - 从预定义的单词生成句子

> ID：11931199
> 
> 赞同：-2
> 
> 时间：2012-08-13T09:09:28.893
> 
> 标签：c#

我正在开发一个系统，该系统为用户生成密码、拨打电话并一次说出一个字符的密码。例如，让密码为“BlaBla123”

现在我有了这个基本词：

“Capitol”、“Small”和“as in”

另外，我有这张桌子：

```
//  Letter | Word     | Code    |
// --------+----------+---------|
//  a      | Alpha    |  97, 65 |
//  b      | Bravo    |  98, 66 |
//  c      | Charlie  |  99, 67 |
//  d      | Delta    | 100, 68 |
//  e      | Echo     | 101, 69 |
//  f      | Foxtrot  | 102, 70 |
//  g      | Golf     | 103, 71 |
//  h      | Hotel    | 104, 72 |
//  i      | India    | 105, 73 |
//  j      | Juliet   | 106, 74 |
//  k      | Kilo     | 107, 75 |
//  l      | Lima     | 108, 76 |
//  m      | Mike     | 109, 77 |
//  n      | November | 110, 78 |
//  o      | Oscar    | 111, 79 |
//  p      | Papa     | 112, 80 |
//  q      | Quebec   | 113, 81 |
//  r      | Romeo    | 114, 82 |
//  s      | Sierra   | 115, 83 |
//  t      | Tango    | 116, 84 |
//  u      | Uniform  | 117, 85 |
//  v      | Victor   | 118, 86 |
//  w      | Whiskey  | 119, 87 |
//  x      | X-ray    | 120, 88 |
//  y      | Yankee   | 121, 89 |
//  z      | Zulu     | 122, 90 |
//  1      | One      | 49      |
//  2      | Two      | 50      |
//  3      | Three    | 51      |
//  4      | Four     | 52      |
//  5      | Five     | 53      |
//  6      | Six      | 54      |
//  7      | Seven    | 55      |
//  8      | Eight    | 56      |
//  9      | Nine     | 57      |
//  0      | Zero     | 48      | 
```

现在，我试图造一个像这样的句子：

“Bravo 中的 Capitol B” “Lima 中的小 L” “Alpha 中的小 A” “Bravo 中的 Capitol B” “Lima 中的小 L” “Alpha 中的小 A” “一” “二” “三"

反对假定的密码。

任何人都可以分享一下我如何将表格存储在内存中并且只为 ForEach 一个密码字符串并为每个遇到的字符获取一个句子的想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:15:16.803

像这样的东西：

填写字典`characterLookup.Add('a', "Alpha")`，注意代码示例中的“ToLower”，只存储小写字母。

键值存储（字典）是首选的数据结构，因为我们正在通过键（在本例中为字母）进行查找。

```
 private Dictionary<char, string> characterLookup = new Dictionary<char, string>();

    public string[] GetSentences(string password)
    {
        string[] sentences = new string[password.Length];

        for (int i = 0; i < password.Length; i++)
        {
            char currentChar = password[i];

            if (char.IsLetter(currentChar))
            {
                sentences[i] = string.Format("{0} {1} as in {2}",
                    char.IsLower(currentChar) ? "Lower" : "Upper",
                    currentChar.ToUpper(),
                    characterLookup[currentChar.ToLower()]);
            }
            else if (char.IsDigit(currentChar))
            { 
                sentences[i] = characterLookup[currentChar];
            }

        }
        return sentences;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T09:22:27.753

一种方法是创建包含字母、单词和代码的类，例如：

```
public class MyClass
{
    public char Letter { get; set; }
    public string Word { get; set; }
    public string Code { get; set; }
} 
```

然后你可以定义 a`HashSet<MyClass>`来包含类似这样的字母：

```
HashSet<MyClass> letters = new HashSet<MyClass>();
letters.Add(new MyClass { Letter = 'a', Word = "alpha", Code = "123,23" });
letters.Add(new MyClass { Letter = 'b', Word = "bravo", Code = "123,23" });
letters.Add(new MyClass { Letter = 'c', Word = "charlie", Code = "123,23" });
letters.Add(new MyClass { Letter = 'd', Word = "delta", Code = "123,23" });
//....................... 
```

然后你可以`StringBuilder`用来构建你的字符串。

```
string password = "acd";
StringBuilder sb = new StringBuilder();
foreach (var val in password)
{
    if (char.IsUpper(val))
        sb.Append("Capital " + val + " as in " + Letters.Where(r => r.Letter == val).FirstOrDefault().Word + Environment.NewLine);
    else
        sb.Append("Small " + val + " as in " + Letters.Where(r => r.Letter == val).FirstOrDefault().Word + Environment.NewLine);
}

string test = sb.ToString(); 
```

# jquery - 为普通文本框选择 css

> ID：11931201
> 
> 赞同：1
> 
> 时间：2012-08-13T09:09:30.983
> 
> 标签：jquery, css, jquery-chosen

我真的很喜欢为选择框选择的 jquery 插件，但是是否可以使用 selected.css 文件中定义的样式来设置普通文本框的样式，或者我是否必须更改 selected.css 才能这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T09:37:00.823

我知道这是一个老问题，但我也做了同样的事情。

我通过为所有输入添加一个新的 css 条目来实现这一点。

```
input {
  background-color: #ffffff;
  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#eeeeee', GradientType=0 );   
  background-image: -webkit-gradient(linear, 0% 0%, 0% 100%, color-stop(20%, #ffffff), color-stop(50%, #f6f6f6), color-stop(52%, #eeeeee), color-stop(100%, #f4f4f4));
  background-image: -webkit-linear-gradient(top, #ffffff 20%, #f6f6f6 50%, #eeeeee 52%, #f4f4f4 100%);
  background-image: -moz-linear-gradient(top, #ffffff 20%, #f6f6f6 50%, #eeeeee 52%, #f4f4f4 100%);
  background-image: -o-linear-gradient(top, #ffffff 20%, #f6f6f6 50%, #eeeeee 52%, #f4f4f4 100%);
  background-image: -ms-linear-gradient(top, #ffffff 20%, #f6f6f6 50%, #eeeeee 52%, #f4f4f4 100%);
  background-image: linear-gradient(top, #ffffff 20%, #f6f6f6 50%, #eeeeee 52%, #f4f4f4 100%); 
  -webkit-border-radius: 5px;
  -moz-border-radius   : 5px;
  border-radius        : 5px;
  -moz-background-clip   : padding;
  -webkit-background-clip: padding-box;
  background-clip        : padding-box;
  border: 1px solid #aaaaaa;
  -webkit-box-shadow: 0 0 3px #ffffff inset, 0 1px 1px rgba(0,0,0,0.1);
  -moz-box-shadow   : 0 0 3px #ffffff inset, 0 1px 1px rgba(0,0,0,0.1);
  box-shadow        : 0 0 3px #ffffff inset, 0 1px 1px rgba(0,0,0,0.1);
  overflow: hidden;
  white-space: nowrap;
  position: relative;
  height: 23px;
  line-height: 24px;
  padding: 0 0 0 8px;
  color: #757575;
  text-decoration: none;
  text-shadow: 0 1px 0 #fff;
  text-transform: uppercase;
  font-family: "Tahoma", sans-serif;
  font-size: 11px;
  font-weight: bold;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T09:31:48.450

是的你可以。只需使用萤火虫/类似的检查员检查他们`CSS`并为您应用这些类`textbox`。

或者，您也可以`CSS`通过检查来获取它们的属性，并将它们与您自己的`id/class`组合一起应用。

# android - 二进制 XML 文件第 39 行：膨胀类时出错

> ID：11931202
> 
> 赞同：0
> 
> 时间：2012-08-13T09:09:34.013
> 
> 标签：android, out-of-memory, inflate-exception

我在 Google Play 的错误报告中收到用户的报告。我的手机 Galaxy s2 i9100 和我拥有的其他 Android 手机从未出现此错误。

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{AnantApps.Moodlytics/anantapps.moodlytics.ui.WhatsNewSlideshow}: android.view.InflateException: Binary XML file line #39: Error inflating class <unknown>
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1970)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)
at android.app.ActivityThread.access$600(ActivityThread.java:128)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4514)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
at dalvik.system.NativeStart.main(Native Method)
Caused by: android.view.InflateException: Binary XML file line #39: Error inflating class <unknown>
at android.view.LayoutInflater.createView(LayoutInflater.java:606)
at  com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
at android.view.LayoutInflater.onCreateView(LayoutInflater.java:653)
at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:678)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:742)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:742)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:742)
at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
at anantapps.moodlytics.ui.WhatsNewSlideshow.setupSlideShow(WhatsNewSlideshow.java:106)
at anantapps.moodlytics.ui.WhatsNewSlideshow.initViews(WhatsNewSlideshow.java:87)
at anantapps.moodlytics.ui.WhatsNewSlideshow.onCreate(WhatsNewSlideshow.java:55)
at android.app.Activity.performCreate(Activity.java:4470)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1053)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1934)
... 11 more
Caused by: java.lang.reflect.InvocationTargetException
at java.lang.reflect.Constructor.constructNative(Native Method)
at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
at android.view.LayoutInflater.createView(LayoutInflater.java:586)
... 27 more
Caused by: java.lang.OutOfMemoryError
at android.graphics.Bitmap.nativeCreate(Native Method)
at android.graphics.Bitmap.createBitmap(Bitmap.java:605)
at android.graphics.Bitmap.createBitmap(Bitmap.java:551)
at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:437)
at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:618)
at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:593)
at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:445)
at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:775)
at android.content.res.Resources.loadDrawable(Resources.java:1968)
at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
at android.widget.ImageView.<init>(ImageView.java:119)
at android.widget.ImageView.<init>(ImageView.java:109)
... 30 more 
```

有时用户也报告这种错误，但我未能重现它。

```
java.lang.OutOfMemoryError
at android.graphics.Bitmap.nativeCreate(Native Method)
at android.graphics.Bitmap.createBitmap(Bitmap.java:605)
at android.graphics.Bitmap.createBitmap(Bitmap.java:551)
at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:437)
at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:618)
at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:593)
at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:445)
at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:775)
at android.content.res.Resources.loadDrawable(Resources.java:1968)
at android.content.res.Resources.getDrawable(Resources.java:677)
at android.widget.ImageView.resolveUri(ImageView.java:542)
at android.widget.ImageView.setImageResource(ImageView.java:315)
at anantapps.moodlytics.ui.WhatsNewSlideshow.setupSlideShow(WhatsNewSlideshow.java:118)
at anantapps.moodlytics.ui.WhatsNewSlideshow.initViews(WhatsNewSlideshow.java:87)
at anantapps.moodlytics.ui.WhatsNewSlideshow.onCreate(WhatsNewSlideshow.java:55)
at android.app.Activity.performCreate(Activity.java:4470)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1053)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1934)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)
at android.app.ActivityThread.access$600(ActivityThread.java:128)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4514)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
at dalvik.system.NativeStart.main(Native Method) 
```

在Activity中，我的功能是这样的......

```
private void setupSlideShow(ArrayList<String> titles, ArrayList<String> desc) {

    realViewSwitcher = (HorizontalPager) findViewById(R.id.horizontalPager);
    realViewSwitcher.removeAllViews();

    LayoutInflater inflater = getLayoutInflater();

    for (int i = 0; i < titles.size(); i++) {

        View v = inflater.inflate(R.layout.whats_new_slide_show_item, null);
        TextView titleTV = (TextView) v
                .findViewById(R.id.whats_new_item_title);
        titleTV.setTypeface(CommonFunctions.getBold(getContext()));
        titleTV.setText(titles.get(i));

        TextView descTV = (TextView) v
                .findViewById(R.id.whats_new_item_desc);
        descTV.setTypeface(CommonFunctions.getNormal(getContext()));
        descTV.setText(desc.get(i));

        ImageView img = (ImageView) v.findViewById(R.id.img_whats_slide);
        img.setImageResource(imgResources.get(i));

        realViewSwitcher.addView(v);

    }

    realViewSwitcher.setOnScreenSwitchListener(onScreenSwitchListener);

} 
```

whats_new_slide_show_item.xml

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_margin="10dp"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:gravity="center_horizontal"
            android:orientation="vertical" >

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:paddingBottom="5dp"
                android:paddingLeft="10dp" >

                <TextView
                    android:id="@+id/whats_new_item_title"
                    style="@style/whats_new_title"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:text="Large Text" />
            </LinearLayout>

            <ImageView
                android:id="@+id/img_whats_slide"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/bug_fixes" />

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:paddingLeft="10dp"
                android:paddingTop="3dp" >

                <TextView
                    android:id="@+id/whats_new_item_desc"
                    style="@style/whats_new_desc"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:text="Medium Text" />
            </LinearLayout>
        </LinearLayout>
    </LinearLayout>
</LinearLayout> 
```

whats_new_slide_show.xml

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<LinearLayout
    android:id="@+id/whats_new_slides_container"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/bar_bg"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/whats_new_header"
        style="@style/TopBarTitle"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:gravity="center"
        android:text="@string/whats_new_title" />

    <LinearLayout
        android:layout_width="2dp"
        android:layout_height="match_parent"
        android:background="@drawable/seperator_whats_new" >
    </LinearLayout>

    <Button
        android:id="@+id/btn_next_slide"
        style="@style/Whats_new_btn"
        android:layout_width="65dp"
        android:layout_height="match_parent"
        android:background="@drawable/whats_new_next_btn"
        android:gravity="center"
        android:paddingLeft="10dp"
        android:paddingRight="10dp"
        android:text="@string/btn_next" />
</LinearLayout>

<LinearLayout
    android:id="@+id/whats_new_slides_container"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="1"
    android:background="@color/tra_white_ninety" >

    <anantapps.moodlytics.view.HorizontalPager
        android:id="@+id/horizontalPager"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
    </anantapps.moodlytics.view.HorizontalPager>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T16:11:33.697

看起来您正在尝试为幻灯片预加载所有图像。如果您重新设计您的应用程序以仅在查看图像时加载它们，它将具有更少的峰值内存使用量，这将帮助您避免内存不足的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T09:22:38.070

我遇到了内存不足的错误，所以我会尝试讲述这一点。

你应该尝试的事情：

1）在暂停或销毁之前的活动时清除资源（`System.gc();`和）。`Runtime.getRuntime().gc();`

2）（这是我的问题）确保您的图像是您的应用程序运行或支持的最大屏幕。（我有两个分辨率为 1000x486 的设计元素，它给了我内存不足的错误）。

# html - 在单个 ul 和多个列中垂直显示列表项

> ID：11931204
> 
> 赞同：3
> 
> 时间：2012-08-13T09:09:41.030
> 
> 标签：html, css

我需要垂直显示列表项，也需要在多列中显示。但必须只使用 single `ul`。怎么可能。请给我建议。

输出应该看起来像

```
a  e  i
b  f  j
c  g
d  h 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T10:01:29.160

Afaik 唯一的方法是使用`column-count`：

```
ul {
    column-count: 3;
} 
```

请注意，它仅适用于现代浏览器并且需要供应商前缀（-webkit-column-count 等）。

如果您使用浮动、内联或内联块，它们将以不同的顺序呈现。

# hibernate - 从 JPA 中的主表控制子实体

> ID：11931206
> 
> 赞同：1
> 
> 时间：2012-08-13T09:09:46.940
> 
> 标签：hibernate, orm, jpa-2.0

假设我有以下实体

```
@Entity
public class Item{

    private Country origin;

    @ManyToOne(optional=true)
    @JoinColumn(name="origin")
    public Country getOrigin() {
        return this.origin;
    }

}

@Entity
public class Country{

    private String code;
    private String desc;

    @Id
    public String getCode() {
        return this.code;
    }

    @Column
    public String getDesc() {
        return this.desc;
    }

} 
```

其中`Country`class 映射到预设的主表，不应修改。用户可以在创建新`origin`的. 如何检查提供的是否已经是主表中的条目？`code``Item``code`

如果我只是`persist()`一个新`Item`的带有一个`code`不存在而没有坚持的孩子，一个`org.hibernate.TransientObjectException`将被报告。我是否只需要尝试捕获此异常以将其视为不存在的主数据？或者有没有更好的选择？

在实际情况下，对象中有很多这些子实体`Item`，我认为明确地逐个查找主数据不是一个好主意。而且我认为这也不是一个好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T11:04:24.150

任何解决方案都需要查看主表以查看是否`Country`已经存在。这是您是否明确地进行此调用，或者您要求您的框架（Hibernate）为您执行此操作的问题。

`Country`如果您知道`Item`不能依赖创建的源/输入，我会明确并根据表验证数据。如果您有一个您可以严格控制的 GUI，那么这个错误可能永远不会发生，因为您应该只为用户提供确实存在的有效选项。同样通过明确，如果您知道由于数据不可靠而必须在持久化之前进行检查，则可以编写单元测试以包含此显式检查。

请记住，Hibernate 会将您的查询缓存到 Country 表中，因此我不认为它会影响您的应用程序的性能。

# php - 如何php转换这个时间格式？

> ID：11931209
> 
> 赞同：-1
> 
> 时间：2012-08-13T09:10:05.900
> 
> 标签：php, date

我正在从数据库中的表中获取这个日期，就像这种格式

```
Sunday 16th of January 2011 06:55:41 PM 
```

我想把它转换成这种格式

```
11-05-2012 
```

如何使用日期功能或任何功能做到这一点

当我使用日期功能时

```
 <td><?php echo date('d-m-Y', $v['v_created']); ?></td> 
```

我收到错误消息

```
 'Severity: Warning

Message: date() expects parameter 2 to be long, string given' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T09:29:49.610

这对我有用（刚刚在本地网络服务器上测试过）

```
<?php

date_default_timezone_set ('Europe/Rome');

$date = "Sunday 16th of January 2011 06:55:41 PM";

//.Strip "of" messing with php strtotime
$date = str_replace('of', '', $date);

$sql_friendly_date = date('y-m-d H:i', strtotime($date));

echo $sql_friendly_date;

?> 
```

您可以根据自己的喜好更改日期函数的第一个参数的格式：http: [//it2.php.net/manual/en/function.date.php](http://it2.php.net/manual/en/function.date.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T09:53:01.933

您具有以下格式：

```
 Sunday 16th of January 2011 06:55:41 PM 
```

这是基于字符串的格式，因此日期信息或多或少以人类可读的格式编码。幸运的是英语。让我们看看，这是由空格分隔的多个事物：

```
 Sunday   - Weekdayname
 16th     - Date of Month, numeric, st/nd/th form
 of       - The string "of".
 January  - Monthname 
 2011     - Year, 4 digits
 06:55:41 - Hour 2 digits 12 hours; Colon; Minute 2 digits; Colon; Seconds 2 digits
 PM       - AM/PM 
```

因此，您可以按空间分隔每个节点，然后分析数据。您只需要所有月份名称和`sscanf`函数，因为您只需要月份、月份和年份：

```
$input = 'Sunday 16th of January 2011 06:55:41 PM';
$r = sscanf($input, "%*s %d%*s of %s %d", $day, $monthname, $year); 
```

这已经为您提供了以下变量：

```
$monthname - string(7) "January"
$day       - int(16)
$year      - int(2011) 
```

所以剩下要做的就是将月份名称转换为一个数字，这可以通过映射（在 PHP 中以数组的形式）和一些格式化的输出来完成：

```
$monthnames = array(
    'January' => 1,
    # ...
);

printf("%02d-%02d-%04d", $day, $monthnames[$monthname], $year); 
```

因此，无论哪个问题，只要输入的格式有点一致，您就可以将其分开，处理获得的数据并根据您的需要进行输出。这就是它的工作原理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T09:23:18.397

试试这个。一直为我工作

```
$date = Sunday 16th of January 2011 06:55:41 PM

$new_date = date('d-M-Y', strtotime($date));

echo $new_date; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T09:23:52.513

您使用的格式`Sunday 16th of January 2011 06:55:41 PM`是错误的格式。从您在数据库中插入的表格中，此日期的日期（Ymd）应该比插入数据库中的日期值（例如：- 11-05-2012）。你可以获取它并获得你想要的格式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T09:33:16.397

```
<?php

$old_date = date('l, F d y h:i:s');         // returns Saturday, January 30 10 02:06:34

$new_date = date('d-M-Y', strtotime($old_date));

echo $new_date
?>

     more details about date plz visit this url

    http://www.php.net/manual/en/datetime.createfromformat.php 
```

# wordpress - 字体目录

> ID：11931210
> 
> 赞同：0
> 
> 时间：2012-08-13T09:10:08.093
> 
> 标签：wordpress, css, font-face

我正在尝试向我的 wordpress 网站添加自定义字体，但我不确定我在这里做什么，所以如果你能帮助我！

目前在我的主题目录中，我有一个字体目录，我将 font.otf 我的 style.css 放在了主题目录中：

主题

------style.css

------字体

----------Museo300-Regular.otf

我正在使用指南针生成这样的字体：

```
@include font-face("Museo300", font-files("font/Museo300-Regular.otf")); 
```

它输出给我：@font-face { font-family: "Museo300"; src: url('fonts/font/Museo300-Regular.otf') 格式('opentype'); }

当我尝试使用它时：

```
#headerContainer header #menu li {
  float: left;
  font-family: "Museo300";
  color: #FFF; } 
```

但是我的字体没有被使用！

所以，如果有人知道我错了！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:31:18.613

您需要这样做，具体取决于您的服务器设置。此外，以前从未使用过字体文件或指南针。我使用`src`但我猜它是你的服务器路径。即它认为你的字体在别处。

```
@include font-face("Museo300", src("../font/Museo300-Regular.otf")); 
```

或者

```
@font-face {
   font-family: 'Museo300';
   src: url('../font/Museo-Regular.otf');
   font-weight: normal;
   font-style: normal;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T09:28:42.917

您的路径错误 - 这只是正确显示目录“路径”的一种情况。

这是要做的：在你的字体目录中，我会放一个新文件 fonts.css

然后在你的 style.css 中放一个 CSS @import (font/fonts.css) 语句

包括该文件。它有助于保持整洁，您可以轻松地在站点之间移动您的字体文件 Font Squirrel 为您的自定义字体生成器，例如这个免费的站点，并且非常有用的 CSS 制作！

# javascript - .innerHTML 不能正常工作（我猜）

> ID：11931211
> 
> 赞同：4
> 
> 时间：2012-08-13T09:10:10.907
> 
> 标签：javascript, html

我用来`.innerHTML`在`textarea`. 但是如果我自己开始编辑文本，`textarea`脚本就会停止工作。

这里是：

```
(function($){
addPort = function(name) {
    switch(name) {
    case 'name1':
        var code = "text1"; 
        break
    case 'name2':
        var code = "text2";
        break
    case 'name3':
        var code = "text3";
        break
    default:
        break
    }
    document.getElementById("codeArea").innerHTML += code;
}; })(jQuery); 
```

不要关注 jQuery。其他一些功能使用它。

这是`textarea`：

```
<textarea id="codeArea" name="codeAreaPost"></textarea> 
```

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T09:11:36.000

`innerHTML`它只是由值属性替换

```
document.getElementById("codeArea").value 
```

不是`innerHTML`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T09:12:58.830

`innerHTML`会将值解析为 HTML 并使生成的 DOM 成为文本区域的子项。这不是你想要的。请尝试使用该`value`属性：

```
document.getElementById("codeArea").value += code; 
```

# c# - 如何在隐式可转换类型之间进行接口？

> ID：11931213
> 
> 赞同：0
> 
> 时间：2012-08-13T09:10:22.183
> 
> 标签：c#, interface, implicit-conversion

我有一个简单的 System.Drawing.Point (int, int) 类。

```
public class Foo
{
    public Point Point;
} 
```

我需要这个类实现一个带有 PointF (float, float) 的接口：

```
public interface IPointable { PointF Point { get; } } 
```

当然，当我尝试时`Foo : IPointable`，我有

```
Error   7   'Foo' does not implement interface member 'Pointable.Point' 
```

所以，我改变了我的 Foo 类

```
public class Foo
{
    public Point IntPoint;
    public PointF Point { get { return IntPoint; } }
} 
```

哦，我编译。那是因为 Point 隐式转换为 PointF ：

```
public static implicit operator PointF(Point p); 
```

但是我觉得很脏。

`Foo`有一个坐标`Point`，`int`这对我的很多代码都很重要。但有时，当`Foo`只需要是时`IPointable`，他的身份`int`并不那么重要。

有没有办法不向我的班级添加愚蠢的属性，并且仍然`Foo`可以使用该`IPointable`界面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T09:17:10.257

您可以显式实现接口：

```
internal interface IPointable
{
    PointF Point { get; }
}

internal class STH : IPointable
{
    public Point Point { get; set; }

    PointF IPointable.Point
    {
        get { return Point; }
    }
} 
```

现在`PointF`属性只是类型化的可见表单变量`IPointable`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T09:18:54.953

不，您不能选择实现接口成员。接口的重点是定义公共合约。通过订阅界面，您需要遵守合同。

如果您想保留旧`Point`属性而不更改它，[请显式实现接口](http://msdn.microsoft.com/en-us/library/ms173157.aspx)：

```
PointF IPointable.Point { get { return Point; } } 
```

并通过转换`Foo`为以下引用来使用它`IPointable`：

```
IPointable p = new Foo(); 
```

# html - 表格布局自动宽度

> ID：11931215
> 
> 赞同：0
> 
> 时间：2012-08-13T09:10:29.660
> 
> 标签：html, css, html-table

我想将“用户 ID”标签右侧对齐，使其更接近它的价值，见图。以下。似乎无法通过额外的 colspan 解决这个问题。用户 ID 可以包含 1-9 位数字。

![在此处输入图像描述](../Images/0c253a20080259ad747f1069d8a28795.png)

```
 <center>
      <table id="customer_info">
        <tr>
          <td><img id="logo" src="img/logo.png" align="middle"></img></td>
          <td colspan="2">User ID</td>
          <td>011238</td>
        </tr>
         <tr>
          <td colspan="3">Items to get:</td>
          <td>390 s.</td>
        </tr>
        <tr>
          <td colspan="3">Complete until:</td>
          <td>21.1.2013</td>
        </tr>
      </table>
      </center>
      <hr />

table {
  white-space: nowrap;
  border: none;
  width: 250px;
  height: 50px;
  border-spacing: 0px;
  color: #806E66;
  font-family: "Arial";
  font-size: 14px;
  text-shadow: 0 0 1px rgba(0,0,0,0.1);
}

#customer_info tr > td:last-child {
  text-align: right;
  font-weight: bold;
  font-size: 16px;
  color: #E36608;
}

#customer_info tr:nth-child(1) > td:nth-child(2) {
  text-align: right;
  font-size: 12px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T09:20:03.937

因为您将所有表格单元格连接在一起并且取决于彼此的宽度

要解决这一问题，请执行以下操作：

```
<center>
      <table id="customer_info">
        <tr>
          <td colspan="3" align="right">
          <table width="100%"><tr><td><img id="logo" src="img/logo.png" align="middle"></img></td><td align="right">User ID</td><td align="right">011238</td></tr></table></td>
        </tr>
         <tr>
          <td colspan="2">Items to get:</td>
          <td width="100%" align="right">390 s.</td>
        </tr>
        <tr>
          <td colspan="2">Complete until:</td>
          <td align="right">21.1.2013</td>
        </tr>
      </table>
</center>
      <hr /> 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T09:21:25.397

[请参阅工作演示](http://codebins.com/bin/4ldqp8f) HTML

```
<center>
  <table id="customer_info">
    <tr>
      <td width="30%">
        <img id="logo" src="img/logo.png" align="middle" />
      </td>
      <td width="15%">&nbsp;</td>
      <td style="text-align:right" width="30%">
        User ID
      </td>
      <td width="30%">
        011238
      </td>
    </tr>
    <tr>
      <td colspan="3">
        Items to get:
      </td>
      <td>
        390 s.
      </td>
    </tr>
    <tr>
      <td colspan="3">
        Complete until:
      </td>
      <td>
        21.1.2013
      </td>
    </tr>
  </table>
</center>
<hr /> 
```

CSS

```
table {
  white-space: nowrap;
  border: none;
  width: 250px;
  height: 50px;
  border-spacing: 0px;
  color: #806E66;
  font-family: "Arial";
  font-size: 14px;
  text-shadow: 0 0 1px rgba(0,0,0,0.1);
}

#customer_info tr > td:last-child {
  text-align: right;
  font-weight: bold;
  font-size: 16px;
  color: #E36608;
}

#customer_info tr:nth-child(1) > td:nth-child(2) {
  text-align: right;
  font-size: 12px;
} 
```

# joomla2.5 - joomla 2.5.6：如何按类别 id 获取所有文章

> ID：11931216
> 
> 赞同：0
> 
> 时间：2012-08-13T09:10:30.190
> 
> 标签：joomla2.5

我正在使用 Joomla 2.5.6 并使用我的自定义查询想要按类别 id 获取所有文章。我研究了**Joomla 2.5.6** db 模型，发现**xma7k_content**表是存储**文章**元和**xma7k_categories**存储**类别**信息 & 似乎我们可以很容易地通过 id 获取记录，xma7k_content**表中的****别名**正是文章图块的内容，但查看路径这篇文章有点像

 **`destinations/2012-08-08-05-05-05/thailand/overview-of-trips`

它存储在**xma7k_menu**表中。

> 1.  如果我在创建文章时从路径中删除日期/时间。（但我怎么能？）
> 
> 或者我如何使用 JOIN **xma7k_content**、**xma7k_categories**和 **xma7k_menu**表来获得所需的结果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T09:44:13.933

使用 Acesef Joomla 扩展，您可以为页面定义自己的 SEF URL，在此处下载[http://www.joomace.net/joomla-extensions/acesef-joomla-seo-sef-urls](http://www.joomace.net/joomla-extensions/acesef-joomla-seo-sef-urls)。

检查文档以获取更多信息。**

# php - 全局通知的数据库设计

> ID：11931217
> 
> 赞同：1
> 
> 时间：2012-08-13T09:10:31.627
> 
> 标签：php, mysql

我有一个通知系统，其中有各种类型的“评论”、“产品添加”等，而且用户也很多。

基于用户的朋友将看到用户或他/她的朋友执行的操作的通知。问题是我必须记录哪个朋友已阅读通知，我已经有一个表，其中存储了：

```
notification_id,    
type_id ,   
item_id ,   
user_id ,   
owner_user_id , 
is_seen,
time_stamp, 
title_html, 
title_text, 
body_html,
body_text,  
href,
icon_url 
```

我应该使用一个数组来存储所有看到通知的朋友 ID，`is_seen`还是应该创建一个名为的新表`notification_seen`，在其中维护每个看到该通知的朋友的记录？

所有通知将持续长达 30 天，并且还必须记住，如果用户有超过 200 个朋友，则将 200 个 id 存储在一个数组中，然后检索它并破坏数组然后显示它们（根据我的简短过程）。

那么，任何人都可以建议哪一种是更好的方法，或者我不知道的更好的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T09:20:31.143

使用单独的表格。关系数据库中的数组总是一个坏主意，因为如果没有用户定义的函数或查询中的复杂表达式，您无法将数据库操作和查询应用于单个数组元素。而且它也不遵循规范化范式。

# php - PDO 连接类

> ID：11931219
> 
> 赞同：0
> 
> 时间：2012-08-13T09:10:38.007
> 
> 标签：php, mysql, pdo

所以我正在尝试构建一个简单的 PDO 连接类，这样我就可以在需要访问数据库时创建一个数据库对象，但无论我尝试什么，我都会遇到同样的错误。

这是我的 DB 类代码

```
<?php
class DbConnect
{
// Database login vars
private $dbHostname = 'localhost';
private $dbDatabase = 'database';
private $dbUsername = 'username';
private $dbPassword = 'password';
public $db = null;

public function connect()
{
    try
    {
        $db = new PDO("mysql:host=".$this->dbHostname.";dbname=".$this->dbDatabase, $this->dbUsername, $this->dbPassword); // Establish DB connection
        $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); // Set error handling
        return $db;
    }
    catch(PDOException $e)
    {
        echo "It seems there was an error.  Please refresh your browser and try again. ".$e->getMessage();
    }
}
}
?> 
```

这是我试图在其中使用它的类的代码：

```
<?php
session_start();
require 'DbConnect.php';

class User
{
    public function bindParams()
    {
        $DbConnect = new DbConnect();
        $sql = $DbConnect->connect();

        $sql->prepare("insert into dbobjectex(firstName, lastName) values (:firstName, :lastName)");
        $sql->bindParam(':firstName', $_SESSION['firstName']);
        $sql->bindParam(':lastName', $_SESSION['lastName']);
        $sql->execute();
    }
}
?> 
```

然后从我创建 User 类的位置调用 bindParams()。我不断收到的两个错误是“NetworkError: 500 Internal Server Error”和“The character encoding of the HTML document was not declared”。关于我在这里做错了什么的任何想法？感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:54:11.637

`What am I doing wrong here?`- 很多事情，但最明显要错过的是：在你的类定义的末尾`DbConnect`，你关闭了 php 标签`?>`，你必须*尽可能避免*使用包含文件[的包含文件](https://stackoverflow.com/questions/4410704/php-closing-tag)。在您的情况下使用它们的结果是标题过早发送，解释了您的第二个错误。

除此之外，每次实例化用户类时，都会创建一个新的 PDO 实例：将其分配给`connect`成员函数本地的变量，至少替换`$db`为`$this->db`. 但最重要的是，我同意@sabre：为什么 PDO 需要额外的包装器？特别是一个只做实例化并返回一个 pdo 实例的实例，如果需要，只需创建一个处理连接的抽象类。

您可能要检查的另一件事是天气或包含路径是否正确，并[阅读有关 autoloading classes 的文档](http://www.php.net/__autoload)。一旦你拥有了一个庞大的类库，它将为你省去一个麻烦的世界。这可能会解释您的第一个错误，就像`?>`标签一样，但只是为了安全起见：使用`require_once`, 而不是`require`: 包括并因此重新定义一个类，这根本不是您想要做的。

# google-chrome - chrome扩展安装后如何显示安装完成消息

> ID：11931220
> 
> 赞同：1
> 
> 时间：2012-08-13T09:10:49.457
> 
> 标签：google-chrome, google-chrome-extension

我只想在扩展安装自动完成一次后打开 chrome 扩展弹出窗口。

我不确定它是否是使用扩展弹出窗口实现的。

我的扩展程序中有一个浏览器操作，我只想在安装后打开该弹出窗口一次，以后点击扩展程序图标（浏览器操作）时我不需要任何弹出窗口来显示。

简而言之，我希望仅从以下链接首次自动安装 Awesome Screenshot 扩展后出现的弹出窗口的功能。

[https://chrome.google.com/webstore/detail/alelhddbbhepgpmgidjdcjakblofbmce](https://chrome.google.com/webstore/detail/alelhddbbhepgpmgidjdcjakblofbmce)

请建议我在我的扩展中实现这一点的一些方法。

# build - Hudson/jenkins 不会因错误而失败

> ID：11931222
> 
> 赞同：3
> 
> 时间：2012-08-13T09:10:52.077
> 
> 标签：build, continuous-integration, hudson, jenkins

在我的 Hudson 日志中，我看到错误或失败，但 hudson 说，构建成功。这样对吗？

这就是 hudson 所做的（运行 ant 几次）

```
call f:\runGenericAntBuild.bat %WORKSPACE%  f:\general-build.properties %WORKSPACE%\build\buildProjects.xml deploy %BUILD_NUMBER%  %SVN_REVISION%

call f:\runGenericAntBuild.bat %WORKSPACE%  f:\general-build.properties %WORKSPACE%\build\buildProjects.xml MyJavaProject %BUILD_NUMBER%  %SVN_REVISION%

call f:\runGenericAntBuild.bat %WORKSPACE%  f:\general-build.properties %WORKSPACE%\build\buildProjects.xml buildGrails %BUILD_NUMBER%  %SVN_REVISION%

call f:\runGrailsClean.bat %WORKSPACE%\MyProject 
```

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-13T11:03:12.513

您是否有一个构建步骤，它是一个批处理步骤，它包含所有四个`call`命令？如果是，那就是你的问题。

您的批次看起来在任何步骤中都没有做任何错误，因此批次的状态是最后一个命令的状态（您的干净步骤）

在 Hudson/Jenkins 中将其拆分为四个单独的构建步骤，或者在批处理脚本中处理错误。

例如

```
 call f:\runGenericAntBuild.bat your params here || exit /b 1  
 call f:\runGenericAntBuild.bat next params here || exit /b 2
 call f:\runGenericAntBuild.bat third param here || exit /b 3
 call f:\runGrailsClean.bat more param as needed || exit /b 4 
```

这样，根据失败的步骤，批处理将以 1-4 的错误退出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T10:46:17.453

据我说，詹金斯/哈德森能够成功完成工作，因为它能够完成分配给他的工作。您可能没有在 buildProjects.xml 文件中设置任何属性，表明构建必须因错误而失败。有一个属性声明构建失败时出错。

# twitter-bootstrap - Twitter Bootstrap 按钮组 50% 宽度

> ID：11931224
> 
> 赞同：4
> 
> 时间：2012-08-13T09:11:03.137
> 
> 标签：twitter-bootstrap, buttongroup

我想创建一个包含两个按钮的按钮组。按钮组是跨度 6 的一部分，我希望里面的按钮有 50% 的宽度，但我猜由于填充和边框的原因，按钮会断线并相互交叉而不是相互相邻。这个调整是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T09:29:59.500

这确实发生了，因为边距和引导程序添加到按钮的所有其他内容。

您可以通过使用引导网格系统来做到这一点，而不是尝试自己为按钮分配宽度。

```
<div class="span6">
  <div class="btn-group row-fluid">
    <button class="btn span6">Button 1</button>
    <button class="btn span6">Button 2</button>
  </div>
</div> 
```

它在行动：http: [//jsfiddle.net/S57SW/1/](http://jsfiddle.net/S57SW/1/)。我使用了 a`row-fluid`因为它在 jsfiddle 上看起来更好，但你可以用 a~~无反应~~静态布局也是。

# iphone - 阻止在 viewWillAppear 中打开窗口

> ID：11931225
> 
> 赞同：-1
> 
> 时间：2012-08-13T09:11:07.413
> 
> 标签：iphone, ios, ipad, uiviewcontroller

在 iOS 中，是否有可能阻止视图加载`viewWillAppear`？

像`[self close];`什么？

我想做的是：

*   创建一个部分加载对象的视图
*   显示视图
*   在 viewWillAppear 中，我完成了对象加载并填充了视图字段
*   如果对象加载失败，我不想显示视图

我知道这并不是真正的好方法，但它是我不想改变太多的现有代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T12:26:46.963

我不确定我是否误解了您的问题，但是如果您只是尝试在 viewController 中设置一个视图，而不是在开始时显示并稍后出现，您可以轻松地 viewName.hide = YES; 它在 viewWillAppear 然后 viewName.hide = NO; 当您希望它显示时。

# mysql - mysql - 当计数大于零时选择true

> ID：11931227
> 
> 赞同：13
> 
> 时间：2012-08-13T09:11:08.800
> 
> 标签：mysql

我有以下查询。

```
SELECT COUNT( * ) AS offer_count
  FROM restaurants_offers
WHERE DATE( NOW( ) ) 
   BETWEEN date_start
   AND date_end
AND restaurant_id =1 
```

现在，当 count 大于零时，我想选择`true`else `false`，而不是 count 作为查询结果。怎么做？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-13T09:12:55.470

试试这个：

```
SELECT IF(COUNT(*) > 0, 'true', 'false') AS NewResult
  FROM restaurants_offers
 WHERE (DATE(NOW())  BETWEEN date_start AND date_end) AND 
       restaurant_id = 1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-24T13:37:37.683

```
SELECT COUNT( * ) > 0 AS has_offers
  FROM restaurants_offers
WHERE DATE( NOW( ) ) 
   BETWEEN date_start
   AND date_end
AND restaurant_id =1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T09:12:43.840

```
SELECT case when COUNT(*) > 0 
            then 1
            else 0
       end AS offer_count
FROM restaurants_offers
WHERE DATE( NOW( ) ) 
BETWEEN date_start
AND date_end
AND restaurant_id =1 
```

或者如果你需要的话`true`和`false`

```
SELECT case when COUNT(*) > 0 
            then 'true'
            else 'false'
       end AS offer_count
... 
```

# javascript - 用 jQuery 求解线性方程

> ID：11931233
> 
> 赞同：0
> 
> 时间：2012-08-13T09:11:32.263
> 
> 标签：javascript

我不知道如何用 jQuery 求解以下线性方程。

12.5x = 20 + x + (20 + x)/10 （注意 12.5、20 和 10 是用户提供的数字）

jQuery中有没有办法获得x？非常感谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T09:17:08.823

### 您的问题完全与数学有关

假设你的方程是格式：

```
ax = b + x + (c + x) / d; 
```

因此解决方案是：

```
var x = (b * d + c) / (a * d - d - 1); 
```

如果`b === c`是这样，解决方案是：

```
var x = (b * d + b) / (a * d - d - 1); 
```

# javascript - CSS 显示框永久

> ID：11931242
> 
> 赞同：1
> 
> 时间：2012-08-13T09:11:55.853
> 
> 标签：javascript, jquery, css

我有一个代码，功能是下拉。下拉菜单可以顺利工作。现在我想在单击评论时，框将永久显示，并在外部单击时关闭。

在这种情况下，当我单击评论时，框显示并且当我拖动鼠标输入评论时，它关闭了。

那么我怎样才能保留这个盒子呢？

```
.dropdown {
position:relative;
}

.dropdown-menu {
position:absolute;
top:100%;
left:0;
z-index:1000;
display:none;
float:left;
min-width:300px;
list-style:none;
background-color:#fff;
border:1px solid rgba(0,0,0,0.2);
border-right-width:2px;
border-bottom-width:2px;
-webkit-border-radius:5px;
-moz-border-radius:5px;
border-radius:5px;
-webkit-box-shadow:0 5px 10px rgba(0,0,0,0.2);
-moz-box-shadow:0 5px 10px rgba(0,0,0,0.2);
box-shadow:0 5px 10px rgba(0,0,0,0.2);
-webkit-background-clip:padding-box;
-moz-background-clip:padding;
background-clip:padding-box;
margin:1px 0 0;
padding:4px 0;

.navbar .dropdown-menu:after {
position:absolute;
top:-6px;
left:10px;
display:inline-block;
border-right:6px solid transparent;
border-bottom:6px solid #fff;
border-left:6px solid transparent;
content:'';

.open .dropdown-menu {
display:block;
}

<span class="navbar">
            <span class="dropdown">
                <a data-toggle="dropdown" class="comment" href="#">Comment</a>
                <ul class="dropdown-menu">
                    <li><input type="text"></li>
                </ul>
            </span>
            </span> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:30:26.587

据我了解，这可能是您想要的[http://jsfiddle.net/H3Vnw/1/](http://jsfiddle.net/H3Vnw/1/)。像这样写

```
$('.comment').click(function(){
    $('.dropdown-menu').css({'display': 'block'});
}); 
```

**更新**

像这样写

```
var com = $('.comment');
var menu = $('.dropdown-menu');

        com.click(function() {
            menu.show(); return false;
        });

        $(document).click(function() {
            menu.hide();
        });

        menu.click(function(e) {
            e.stopPropagation();
        }); 
```

检查这个[http://jsfiddle.net/H3Vnw/4/](http://jsfiddle.net/H3Vnw/4/)

# extjs - GeoExt AttributeStore 未加载数据

> ID：11931243
> 
> 赞同：0
> 
> 时间：2012-08-13T09:12:02.863
> 
> 标签：extjs, openlayers, geoext

我在使用 WFS 请求将数据加载到属性存储时遇到问题。

我正在使用下面的代码来创建商店。

```
var attrStore = new GeoExt.data.AttributeStore({
                url: "http://geoserver:8080/geoserver/ows",
                baseParams: {
                                SERVICE: "WFS",
                                REQUEST: "DescribeFeatureType",
                                VERSION: "1.1.0",
                                TYPENAME: layerID
                },
                autoLoad: true
}) 
```

我已尝试添加侦听器以查看发生了什么，前加载侦听器会触发，但不会触发负载，并且未发送 WFS 请求。Firebug 中没有错误。

任何帮助将不胜感激。

谢谢

汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T05:55:36.237

你想用 AttributeStore 做什么？如果要编辑特征的属性，最好使用 FeatureStore+ExtJs.GridPanelEditor。
AnyWey 有你想要的例子。[http://api.geoext.org/1.1/examples/attributes.html](http://api.geoext.org/1.1/examples/attributes.html)

# iphone - Facebook 分享照片：给我（facebookErrDomain 错误 368。）

> ID：11931246
> 
> 赞同：0
> 
> 时间：2012-08-13T09:12:20.330
> 
> 标签：iphone, ios, xcode, facebook, fbconnect

当我尝试在 Facebook 上分享我的 iOS 应用程序的屏幕截图时，我收到以下回复：

*FB 错误：操作无法完成。（facebookErrDomain 错误 368。）*

发布照片代码

```
NSMutableDictionary *params = [NSMutableDictionary
                               dictionaryWithObjectsAndKeys:fbImage, @"picture", fbContent, @"caption"
                               ,nil];

[_facebook requestWithMethodName:@"photos.upload" andParams:params
                   andHttpMethod:@"POST" andDelegate:self]; 
```

我使用截图

```
UIGraphicsBeginImageContext(self.view.frame.size);
[self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage * image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

问题是，我可以使用完全相同的代码在我的其他应用程序中发布屏幕截图。那么这是否意味着这不仅仅是因为 fb 服务器问题？有什么我可能会丢失的吗？

*编辑* 我也在同一个项目中使用 FBConnect 来共享文本，使用：

```
 [_facebook dialog:@"feed" andParams:params andDelegate:self]; 
```

参数为：

```
NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys: 
                           url, @"link",
                           name, @"name",
                           caption, @"caption",
                           desc, @"description",
                           nil]; 
```

它工作得非常好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T05:35:38.247

谢谢你的意见。我发现了我的错误的原因。在我打印了错误本地化描述的日志后：

```
- (void)request:(FBRequest *)request didFailWithError:(NSError *)error 
{
    NSLog(@"FB error: %@", [error localizedDescription]);
} 
```

它提到了 facebookErrDomain 错误 368 并在打印了整个描述之后：

```
 NSLog(@"FB error: %@", [error description]); 
```

有人写道，Facebook 不允许垃圾邮件链接。

原来我拼错了照片帖子标题中的链接。整改后工作顺利。

因此，如果您收到**facebookErrDomain 错误 368。**请检查您在 Params 中发送的数据。如果它包含您尚未创建的链接或任何其他可能被视为垃圾邮件的数据，请将其删除或将其注释掉，错误应该会消失。

# iphone - 具有多行的 HUD

> ID：11931256
> 
> 赞同：6
> 
> 时间：2012-08-13T09:12:50.787
> 
> 标签：iphone, objective-c, cocoa-touch, hud

如何制作具有多行的 HUD？他是我的代码，但 labelText 是一行

```
HUD = [MBProgressHUD showHUDAddedTo:[[TTNavigator navigator] window] animated:YES];
HUD.customView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"noImage.png"]];
HUD.mode = MBProgressHUDModeCustomView;
HUD.delegate = self;
HUD.labelText = @"text1 \n text2";
[HUD hide:YES afterDelay:3]; 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-17T08:45:12.737

使用 detailsLabelText 方法，即

```
HUD.detailsLabelText = @"your next line here" 
```

您可以使用 detailsLabelFont 更改样式。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-27T03:46:09.633

最简单的方法（扩展乔恩麦迪逊的回答）：

```
hud.labelText = @"Your first line of text is";
hud.detailsLabelText = @"followed by your next line of text";
hud.detailsLabelFont = hud.labelFont; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-13T09:25:24.937

不确定，但您需要修改`MBProgressHUD.m`文件的代码。

在`MBProgressHUD.m`文件中，有一个方法`- (void)setupLabels`。在该方法中，创建了一个标签。通过设置其属性使该标签成为多行标签`numberOfLines`。

前任：

`label.numberOfLines = 2;`

希望它有效..

# java - 检查目录存在和目录包含在 Dropbox api 上不起作用

> ID：11931257
> 
> 赞同：0
> 
> 时间：2012-08-13T09:12:51.287
> 
> 标签：java, android, dropbox, dropbox-api

**DBRoulette.java**

```
private final String DATA_DIR = "/DataBase/"; 
```

投递箱

**下载随机图片**

```
 public DownloadRandomPicture(Context context, DropboxAPI<?> api,
            String dropboxPath, ImageView view) {
    mPath = dropboxPath; 
```

**做背景（）**

```
Entry dirent = mApi.metadata(mPath, 1000, null, true, null);
 if (!dirent.isDir || dirent.contents == null) {
                    // It's not a directory, or there's nothing in it
                    mErrorMsg = "File or empty directory";
                    return false;
                } 
```

此代码不适用于`DownloadRandomPicture.java` 任何人知道如何修复它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:29:53.103

如果我们使用

```
final static private AccessType ACCESS_TYPE = AccessType.DROPBOX; 
```

我们应该

```
Entry dirent = mApi.metadata(mPath, 1000, null, false, null); 
```

但是如果我们使用

```
final static private AccessType ACCESS_TYPE = AccessType.APP_FOLDER; 
```

我们应该使用

```
Entry dirent = mApi.metadata(mPath, 1000, null, true, null); 
```

区别在于 dirent 的布尔值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-31T10:20:57.997

试试这个，它对你有用...

```
 try 
    {
        Entry existingEntry = mApi.metadata("/" + SavedProperties.selectedAddress , 1, null, false, null);
        if(existingEntry.isDir)
        {
            Log.d(TAG, "Folder exists : " + existingEntry.fileName());
            uploadPictures("/"+SavedProperties.selectedAddress + "/");
        }
    } 
    catch (DropboxException  e) 
    {
        Log.d(TAG,"Folder does not exist..." + e.fillInStackTrace());
        try 
        {
            Entry createFolder = mApi.createFolder("/"+SavedProperties.selectedAddress);
            Log.d(TAG,"Folder created..." + createFolder.rev);
            uploadPictures("/"+SavedProperties.selectedAddress + "/");
        } 
        catch (DropboxException e1)
        {
             Log.d(TAG,"Create Folder DropboxException : " + e1.fillInStackTrace() );
        }       
    } 
```

# jquery - 延迟加载博客文章

> ID：11931264
> 
> 赞同：6
> 
> 时间：2012-08-13T09:13:21.273
> 
> 标签：jquery, lazy-loading

我有一个博客文章列表，数量已达到 25+，但都在一页中，所以我需要尝试构建一个惰性加载器。

我尝试了各种插件，但都没有工作

[http://jsfiddle.net/tara_irvine/S9GGz/6/](http://jsfiddle.net/tara_irvine/S9GGz/6/)

[http://jsfiddle.net/tara_irvine/S9GGz/9/](http://jsfiddle.net/tara_irvine/S9GGz/9/)

[http://jsfiddle.net/tara_irvine/S9GGz/13/](http://jsfiddle.net/tara_irvine/S9GGz/13/)

有没有办法检查 div 的最高值，如果它在视图中，则添加一个类，以便 div 变得可见（页面加载 div 被隐藏）

我看过这些帖子，但在尝试了各种解决方案后，没有一个对我有用。

[如何使用 jquery Position of Div 相对于视口顶部](https://stackoverflow.com/questions/1960082/position-of-div-in-relation-to-the-top-of-the-viewport)[检查元素是否在用户的视图中](https://stackoverflow.com/questions/8229291/how-to-check-if-an-element-is-in-the-view-of-the-user-with-jquery)

如果有人能对此有所了解，我将不胜感激。我不知道我哪里错了。

非常感谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T09:58:28.210

[jQuery Waypoints](http://imakewebthings.com/jquery-waypoints/)是一个很好的插件，可以对出现的元素做出反应；他们甚至有[一个延迟加载的例子](http://imakewebthings.com/jquery-waypoints/infinite-scroll/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T12:34:31.467

我不知道您的设置如何，但我建议使用 jquery 找出与页面顶部的距离，这将是：

```
var scrollTop     = $(window).scrollTop(),
    elementOffset = $('#my-element').offset().top,
    distance      = (elementOffset - scrollTop); 
```

根据此堆栈溢出帖子：[使用 javascript 确定从 div 顶部到窗口顶部的距离](https://stackoverflow.com/questions/9880472/determine-distance-from-the-top-of-a-div-to-top-of-window-with-javascript)

通过在每个帖子上加上编号的 ID 或名称（我认为该页面是 PHP 生成的），将其应用于您的第 25 个帖子。

然后当距离达到一定数量时使用ajax加载更多的博客文章。

编辑：您可以使用 jquery 大于来隐藏它们：

```
$(".element-class:gt(24)").css("display","none");​ 
```

此处的文档：http: [//api.jquery.com/gt-selector/](http://api.jquery.com/gt-selector/)

那么只要你滚动过去某个滚动顶部，你就可以设置

```
$("visible-element").css("display","block") 
```

编辑 2：试试这个小提琴 - [http://jsfiddle.net/addiktedDesign/KjNnY/](http://jsfiddle.net/addiktedDesign/KjNnY/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T17:16:58.267

我尝试在视口中获取元素的顶部并显示内容，内容可能只是隐藏或从 ajax 调用加载。试试这个代码。您可以尝试使用灵敏度变量来查看最适合您的方法：

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
    <script type="text/javascript">
        var processScroll = true;
        var sensitivity = 10;
        function handleScroll()
        {
            if (processScroll) {
                processScroll = false;
                topHidden = $('.block_hidden:first').offset().top;
                if(($(window).scrollTop() + $(window).height() ) > (topHidden + sensitivity))
                {
                    console.log('show now');
                    $('.block_hidden:first').removeClass('block_hidden').addClass('block');
                }
            }

            processScroll = true;
        }

        $(document).ready(function()
        {
            $(window).scroll(handleScroll);
        });
    </script>

    <style>
        .block_hidden{
            width:300px;
            background: green;
            margin:5px;
            visibility: hidden;
            height: 10px !important;
        }

        .block{
            height: 200px;
            width:300px;
            background: green;
            margin:5px;
        }
    </style>

</head>
<body>
    <div class="block"></div>
    <div class="block"></div>
    <div class="block"></div>
    <div class="block_hidden"></div>
    <div class="block_hidden"></div>
    <div class="block_hidden"></div>
    <div class="block_hidden"></div>
    <div class="block_hidden"></div>
    <div class="block_hidden"></div>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T20:29:30.870

您在询问延迟加载。

那么答案必须包括服务器端。您的问题未指定您使用的服务器端语言类型。在我的回答中，我将使用一些基本的 PHP 代码来模拟随机博客文章。

延迟加载意味着我们只加载用户可以看到的内容，然后在需要时加载更多数据。

加载数据意味着 - 从服务器请求它。这通常涉及[AJAX](http://www.w3schools.com/ajax/default.asp)，但不一定。（尽管您可能可以使用 AJAX ）。JQuery 有一个美妙的[ajax 接口](http://api.jquery.com/jQuery.ajax/)。

最大的问题是 - 什么应该触发我的下一次加载 - 因此所有插件。

我接受了 Tgr 的建议，并使用航路点实现了延迟加载。我什至按照 Tgr 的建议使用[航点教程进行延迟加载](http://imakewebthings.com/jquery-waypoints/infinite-scroll/)（请给 Tgr 更多积分）。

[你可以在我的网站](http://www.mograbi.info/stackoverflow/question_11931264/main.html)上看到我的实现

我所做的是更改标题的模拟博客文章。每次用户向下滚动足够多时，我都会从服务器获得更多帖子。

我为我的源添加了一个下载链接，因此您可以下载并开始使用它。只要跑`main.html`，你就可以走了。

该文件`more_posts.php`生成`lorem ipsum`带有随机标题的帖子。（我需要一些虚假内容才能在页面上滚动）。

看起来像这样

```
<h1> This is post number <?php echo uniqid("",true)?> </h1>

<div style="color:red">
Lorem ipsum dolor .... Quisque ut pretium nibh.
</div>

<div style="color:blue">
Lorem ipsum dolor .... Quisque ut pretium nibh.
</div> 
```

如您所见，我拥有的唯一 PHP 代码是在标题中随机添加一些内容。

这对您来说应该很熟悉，因为您的博客中已经有 25 多篇文章。

真正的逻辑在于`main.html`- HTML 部分看起来像这样

```
<section id="container">

    </section>

    <footer>
        <nav>
            <ul>
                <!-- Hijack this link for the infinite scroll -->
                <li class="more"><a href="more_posts.php" title="Traditional navigation link">Next Page</a></li>
            </ul>
        </nav>
    </footer> 
```

这个想法是你有`section`它包含前几篇文章 - 并让你在页面上滚动。在底部，您`more`在 a 中有一个链接`footer`，当 JavaScript 被禁用时，它应该充当常规的“下一个”链接。

Waypoint 使用此链接触发下一次加载。每当链接即将显示在屏幕上时，我们将使用 ajax 自动获取下一篇文章。

所以 JavaScript 部分看起来像这样：

```
$(document).ready(function() {

    function loadMorePosts( callback ){
        $.get($('.more a').attr('href'), function(data) { 
                $('#container').append($(data)); 
                if ( typeof(callback) == "function" ){ callback(); }
        })
    }
    loadMorePosts();

    var $footer = $('footer');
    var opts = {
        offset: '100%'
    };

    $footer.waypoint(function(event, direction) {
                        $footer.waypoint('remove');
                        loadMorePosts( function(){ $footer.waypoint(opts);} );

            }, opts);
}); 
```

该函数`loadMorePosts`调用的方法`$.get`是一种更简单的语法`$.ajax({type:'GET' .. })`。它使用与链接的 href 属性相同的 URL。在我的示例中，href 属性指向“more_posts.php”。

当我的演示加载时，内容完全是空的，所以我继续获取我想展示的第一个帖子。然后我告诉航点在页脚上收听 - 每当页脚靠近时，我就会去获取更多帖子。

我做的一个棘手的部分是`$footer.waypoint('remove')`传递一个`callback`将`loadMorePosts`航路点再次绑定到页脚的地方。这只是一个技术性问题 - 航点需要您在获取更多 HTML 时删除触发器，否则您的页面可能会表现得很有趣..

这或多或少是..

我试图让这个尽可能简单，但这是一个需要在一个答案中涵盖的大问题。所以让我知道我是否可以做更多的事情来解决问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-13T09:51:43.947

[http://archive.plugins.jquery.com/project/lazyload](http://archive.plugins.jquery.com/project/lazyload)是延迟加载插件的列表，但更多的是用于图像加载。

您可以尝试隐藏除前三个之外的每个 blogpost 元素，然后打开

# c# - c#中的基本线程

> ID：11931265
> 
> 赞同：2
> 
> 时间：2012-08-13T09:13:30.067
> 
> 标签：c#, multithreading

我看过一些示例代码，它创建了一些如下所示的线程：

```
var simpleThreads = new[] { 
            new Thread(new ThreadStart(ThreadSimple)), 
            new Thread(new ThreadStart(ThreadSimple)), 
            new Thread(new ThreadStart(ThreadSimple))
        }; 
```

从逻辑上讲，这是否与以下相同？

```
var ts = new ThreadStart(ThreadSimple);    
var simpleThreads = new[] { 
                new Thread(ts), 
                new Thread(ts), 
                new Thread(ts)
            }; 
```

我在两段代码上都放了秒表，它们花费的时间大致相同，所以我想知道为什么第一段代码是这样写的，除非是为了节省一行代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T09:55:12.227

我不能真正相信这个答案，但是，引用 Marc Gravell 的话，

> 它们将具有相同的效果；它们在*语义上*是等价的。委托是不可变的，这很有帮助。

以我自己的笨拙方式扩展。

这实际上不是关于线程的问题。如果传递了`Thread`相等的委托，则构造函数将等效地工作。`ThreadStart`

委托类型的关键“属性”是它的不变性。一旦实例化了不可变类型，就无法更改它。这是相关的，因为`ThreadStart`两个代码示例中的所有委托都是使用`ThreadSimple`方法组构造的。因此，`Thread`无论委托的生命周期如何，所有实例都会传递一个等效的委托。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T09:17:11.553

我认为第二个更好，因为您只创建一个 ThreadStart 而不是 3，但我不知道这是否会因为在多个线程上共享此对象而产生问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T09:17:43.300

这两个片段在**逻辑上并不等价**。
在第一个中，您有三个不同的 ThreadStart 类型的对象，而在第二个中，您只有一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T09:23:09.897

```
var simpleThreads = new[] 
{  new Thread(new ThreadStart(ThreadSimple)),
 new Thread(new ThreadStart(ThreadSimple)),
 new Thread(new ThreadStart(ThreadSimple))  }; 
```

和 new Thread(ts) 不是一回事。

在第一个代码块中，您生成了三个新的 threadstart 对象，虽然引用了单个委托，但在第二个代码块中，这是一个更好的实现，您无需创建不必要的对象并保存 LOC。

# kendo-ui - 当网格中存在有限行时，滚动条不应可见

> ID：11931273
> 
> 赞同：7
> 
> 时间：2012-08-13T09:14:00.717
> 
> 标签：kendo-ui

我的视图页面中有一个网格，我可以在其中看到一个滚动条。我需要的是，当行数增加 10 时，滚动条应该是可见的，否则它不应该是可见的。在剑道可以吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-25T04:46:01.927

您可以覆盖默认样式以隐藏它。

尝试这个：

```
.k-grid-content{
    overflow-y: auto    
} 
```

# php - PHPWebSocket 作为单例

> ID：11931277
> 
> 赞同：0
> 
> 时间：2012-08-13T09:14:30.317
> 
> 标签：php, websocket

启动 PHPWebSocket 的正确方法是什么，这样只有一个实例，并且不需要与 apache 本身分开启动它（也就是没有打开的终端和“php websocket.php”）。我正在使用 CodeIgniter，以防万一。

# vb.net - 将数据表保存到两个数据库中

> ID：11931280
> 
> 赞同：0
> 
> 时间：2012-08-13T09:14:39.027
> 
> 标签：vb.net, datatable

我有代码将 mydatatable 中的信息保存到数据库和我的审计文件中，我正在使用下面的代码。但是代码的第一部分效果很好，但第二部分没有做这项工作。为什么相同的代码不适用于另一个数据库。它没有将数据表插入到审计文件中

```
 '**************************************************************************************************************************************************
    '*********************  SAVE PRODUCT RAW MATERIAL DETAILS IN THE GRIDVIEW  ******************************************************

    Dim myConn As OleDbConnection = frmLogIn.Conn
    Dim oledbCmdBuilder As OleDbCommandBuilder
    Dim changes As DataTable

    Dim sql As String = "select * from ProductRawMaterial"
    Dim oledbAdapter As OleDbDataAdapter = New OleDbDataAdapter(sql, myConn)
    'Try
    oledbCmdBuilder = New OleDbCommandBuilder(oledbAdapter)
    changes = myTable.GetChanges()
    oledbCmdBuilder.ConflictOption = ConflictOption.OverwriteChanges

    If changes IsNot Nothing Then
        oledbAdapter.Update(myTable)
    End If
    'myTable.AcceptChanges()
    myConn.Close()

    'Catch ex As Exception
    '    MsgBox(ex.ToString)
    'End Try
    '***************************************************************************************************************************************************
    '*********************************************************    SAVING TO AUDIT   ****************************************************************

    Dim myKonn As OleDbConnection = frmLogIn.Connn
    Dim oledbCmdBuilderAudit As OleDbCommandBuilder
    'Dim changes As DataTable

    Dim sqlAudit As String = "select * from ProductRawMaterial"
    Dim oledbAdapterAudit As OleDbDataAdapter = New OleDbDataAdapter(sqlAudit, myKonn)
    'Try
    oledbCmdBuilderAudit = New OleDbCommandBuilder(oledbAdapterAudit)
    'changes = myTable.GetChanges()
    oledbCmdBuilderAudit.ConflictOption = ConflictOption.OverwriteChanges

    If changes IsNot Nothing Then
        oledbAdapterAudit.Update(myTable)
    End If
    myTable.AcceptChanges()
    myKonn.Close()

    'Catch ex As Exception
    '    MsgBox(ex.ToString)
    'End Try 
```

# c# - 即使具有提升的权限也无法访问注册表

> ID：11931282
> 
> 赞同：0
> 
> 时间：2012-08-13T09:14:54.360
> 
> 标签：c#, .net, visual-studio-2010, permissions, registry

我正在制作一个服务程序，它将更改某些服务的启动类型。我当前的代码甚至不允许我打开注册表进行编写，即使我“以管理员身份运行”也是如此。

代码：

```
ServiceKey = Registry.LocalMachine;
ServiceKey = ServiceKey.OpenSubKey(@"SYSTEM\CurrentControlSet\services\" + ServiceName, true);
ServiceKey.SetValue("Start", 2, RegistryValueKind.DWord); 
```

但是，我收到此错误：不允许请求的注册表访问。有人知道解决方案吗？

（PS。我知道还有其他方法可以做到这一点，但这让我很困扰它不让我访问注册表。）我的程序也作为任何 CPU 运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T03:30:34.930

更改服务配置的方法不是破坏注册表。您使用服务控制管理器。MSDN 甚至有一个改变服务启动类型[的示例程序。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682006%28v=vs.85%29.aspx)我通过转到[About Services](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681921%28v=vs.85%29.aspx)找到此页面，然后单击[Service Configuration Programs](http://msdn.microsoft.com/en-us/library/windows/desktop/ms685147%28v=vs.85%29.aspx)，然后单击 Service [Configuration](http://msdn.microsoft.com/en-us/library/windows/desktop/ms685146%28v=vs.85%29.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T02:46:06.740

发现问题，在某些注册表上，如果您检查“权限”，您会发现即使是管理员也没有更改注册表的权限。您可以自己更改权限，但在我的情况下，我会找到一种不同的方法来编辑服务启动。

# sharepoint-2010 - Sharepoint 2010 - 启用调度时不会触发事件接收器 ItemUpdated 事件

> ID：11931283
> 
> 赞同：1
> 
> 时间：2012-08-13T09:14:59.667
> 
> 标签：sharepoint-2010

当我手动将文档库中项目的状态更改为“已批准”时，事件接收器的 ItemUpdated 事件被触发。但是，当我为另一个项目启用调度（批准项目）时，不会触发 ItemUpdated 事件。任何人都可以在这个问题上帮助我。

谢谢 Sj

# asp.net - Razor 语法不呈现多语句代码块

> ID：11931284
> 
> 赞同：1
> 
> 时间：2012-08-13T09:15:00.693
> 
> 标签：asp.net, asp.net-mvc, visual-studio-2010, razor, html-helper

大家好，我对 Razor 语法有一个奇怪的问题。

我用 Razor 语法编写了相同的代码块，只有内联表达式和多语句块不同。

***关于.cshtml***

```
 <!-- Single statement blocks -->
   <p>
       Put content here.
       @Html.SubmitButton("You are in About")
   </p> 
```

**渲染输出：**
![在此处输入图像描述](../Images/ea5509ab8607ac5a3ef835fc8fa5b21d.png)

***索引.cshtml***

```
<!-- Inline expressions BUT DOESNT WORKS-->
@{ Html.SubmitButton("okay in Index");}

<!-- Multi-statement block BUT DOESNT WORKS-->

@{ 
   Html.SubmitButton("You are in Index");
   Html.CheckBox("A Check Box");
 } 
```

**渲染输出：** ![在此处输入图像描述](../Images/4693b4900b9a9bc48553764cef2e7259.png)

**PS：**忽略截图中的输入按钮文字。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T09:26:20.203

htmlhelpers 只*返回*值。

即使在代码块中，您仍然需要`@`告诉 Razor 如何处理这些值（将它们打印到 HTML 缓冲区）。

所以在这种情况下不要介意代码块，这将是多余的，因为除了 html-helpers 之外没有其他代码。

但是，即使在块中放置了其他代码，您仍然需要在助手前面加上`@`：

```
@{
    var myVar = "something";
    // and so on ...

    @Html.SubmitButton("You are in Index");
    @Html.CheckBox("A Check Box");
 } 
```

# android - Android IntentService 实例化错误

> ID：11931290
> 
> 赞同：12
> 
> 时间：2012-08-13T09:15:27.520
> 
> 标签：android, runtime-error, intentservice

> **可能重复：**
> [Android RuntimeException：无法实例化服务](https://stackoverflow.com/questions/5027147/android-runtimeexception-unable-to-instantiate-the-service)

我正在使用 IntentService 下载我的数据。我的 IntentService 类定义如下：

```
public class DownloadService extends IntentService{
super("DownloadService");
@Override
    protected void onHandleIntent(Intent intent) {
        //download tasks...
    }
} 
```

AndroidManifest.xml：

```
<appilcation>
<service android:name="DownloadService"/>
..
..
..
</application> 
```

LauncherActivity.java：

```
@Override
public void onCreate(Bundle savedInstanceState) {
        ..
        ..
        ..
    Intent dwnldService = new Intent(this, DownloadService.class);
    startService(dwnldService);
} 
```

但我仍然收到此错误：

```
08-13 08:57:09.416: E/AndroidRuntime(942): FATAL EXCEPTION: main
08-13 08:57:09.416: E/AndroidRuntime(942): java.lang.RuntimeException: Unable to instantiate service com.app.android.DowloadService: java.lang.InstantiationException: can't instantiate class com.app.android.DowloadService; no empty constructor
08-13 08:57:09.416: E/AndroidRuntime(942):  at android.app.ActivityThread.handleCreateService(ActivityThread.java:2237)
08-13 08:57:09.416: E/AndroidRuntime(942):  at android.app.ActivityThread.access$1600(ActivityThread.java:123)
08-13 08:57:09.416: E/AndroidRuntime(942):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1201)
08-13 08:57:09.416: E/AndroidRuntime(942):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-13 08:57:09.416: E/AndroidRuntime(942):  at android.os.Looper.loop(Looper.java:137)
08-13 08:57:09.416: E/AndroidRuntime(942):  at android.app.ActivityThread.main(ActivityThread.java:4424)
08-13 08:57:09.416: E/AndroidRuntime(942):  at java.lang.reflect.Method.invokeNative(Native Method)
08-13 08:57:09.416: E/AndroidRuntime(942):  at java.lang.reflect.Method.invoke(Method.java:511)
08-13 08:57:09.416: E/AndroidRuntime(942):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
08-13 08:57:09.416: E/AndroidRuntime(942):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
08-13 08:57:09.416: E/AndroidRuntime(942):  at dalvik.system.NativeStart.main(Native Method)
08-13 08:57:09.416: E/AndroidRuntime(942): Caused by: java.lang.InstantiationException: can't instantiate class com.app.android.DowloadService; no empty constructor
08-13 08:57:09.416: E/AndroidRuntime(942):  at java.lang.Class.newInstanceImpl(Native Method)
08-13 08:57:09.416: E/AndroidRuntime(942):  at java.lang.Class.newInstance(Class.java:1319)
08-13 08:57:09.416: E/AndroidRuntime(942):  at android.app.ActivityThread.handleCreateService(ActivityThread.java:2234) 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-13T09:19:24.247

```
public DownloadService() {
    super("Download service");
} 
```

尝试将此添加到您的服务中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T09:45:22.980

**在您的类中添加带有 super("name") 调用的默认构造函数**

```
public DownloadService() {
    super("DownloadService");
 } 
```

# c# - 如何让我的控制台应用程序在成功运行后自动重启？

> ID：11931293
> 
> 赞同：0
> 
> 时间：2012-08-13T09:15:42.780
> 
> 标签：c#, function, console-application, calculator

用户选择选项后，如何使该程序继续运行？这是我到目前为止的代码。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace calculator_extended
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine("Press A for addition");
            Console.WriteLine("Press S for subtraction");
            Console.WriteLine("Press M for Multiplication");
            Console.WriteLine("Press D for Divide");

            char c = Convert.ToChar(Console.ReadLine());

            int a = Convert.ToInt32(Console.ReadLine());
            int b = Convert.ToInt32(Console.ReadLine());

            switch (c)
            {
                case 'A':
                case 'a':
                    {
                        int d = add(a, b);
                        Console.WriteLine(d);
                        break;

                    }

                case 'S':
                case 's':
                    {
                        int d = sub(a, b);
                        Console.WriteLine(d);
                        break;
                    }

                case 'M':
                case 'm':
                    {
                        int d = mul(a, b);
                        Console.WriteLine(d);
                        break;
                    }

                case 'E':
                case 'e':
                    {
                        int d = div(a, b);
                        Console.WriteLine(d);
                        break;
                    }
                default:
                    {

                        Console.WriteLine("Please Enter the correct Character");
                        break;
                    }

            }
        }
            private static int add(int a, int b)
    {

                   return a + b;
    }
               private static int sub(int a, int b)
    {

                   return a - b;
    }
               private static int mul(int a, int b)
    {
                   return a * b;
    }
               private static int div(int a, int b)
    {

                   return a / b;
    }

        }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T09:17:43.720

用

```
while(true) {
    // Your code here

    // Don't forget to add a switch case for an Exit operation
    case 'q':
        Application.Exit();
} 
```

如果你是编程新手，你应该看看[循环](http://www.csharp-station.com/Tutorial/CSharp/lesson04)——见清单 4-2——这是你想要完成的一个很好的例子。

编辑：我意识到你是编程新手，我*认为*你应该自己完成这个。因为这是一个基本问题，这里有一个完整的解决方案

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace calculator_extended
{
    class Program
    {
        static void Main(string[] args)
        {
            int d = 0;

            while (true)
            {
                Console.WriteLine("Press A for addition");
                Console.WriteLine("Press S for subtraction");
                Console.WriteLine("Press M for Multiplication");
                Console.WriteLine("Press D for Divide");

                char c = Convert.ToChar(Console.ReadLine());

                int a = Convert.ToInt32(Console.ReadLine());
                int b = Convert.ToInt32(Console.ReadLine());

                switch (c)
                {
                    case 'A':
                    case 'a':
                        d = add(a, b);
                        Console.WriteLine(d);
                        break;
                    case 'S':
                    case 's':
                        d = sub(a, b);
                        Console.WriteLine(d);
                        break;
                    case 'M':
                    case 'm':
                        d = mul(a, b);
                        Console.WriteLine(d);
                        break;
                    case 'E':
                    case 'e':
                        d = div(a, b);
                        Console.WriteLine(d);
                        break;
                    case 'q':
                    case 'Q':
                        Application.Exit();
                    default:
                        Console.WriteLine("Please Enter the correct Character");
                        break;
                }
            }
        }
        private static int add(int a, int b)
        {

            return a + b;
        }
        private static int sub(int a, int b)
        {

            return a - b;
        }
        private static int mul(int a, int b)
        {
            return a * b;
        }
        private static int div(int a, int b)
        {

            return a / b;
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T10:03:37.877

首先，为了让程序继续运行，您必须将其包装到 while(true) 循环或 do{}while(some key is press) 循环中。无论如何，您必须在选项列表中添加第五个选项^^（这将是退出选项）

我相信要解决您的问题，您有两种选择：

1.  **使用 while(true) 循环**

    main() 方法中的所有代码都将包装在一个 while(true) 循环中。完成此操作后，您将读取退出键，就像任何其他键（A、S、M、D）一样，并将其发送到正确的退出方法。此“退出方法”将在您的主要功能之外创建。完成后，它应该看起来像这样：

    ```
    static void Main(string args[])
    {
        Console.WriteLine("Press A for addition");
        Console.WriteLine("Press S for subtraction");
        Console.WriteLine("Press M for Multiplication");
        Console.WriteLine("Press D for Divide");
        Console.WriteLine("Press X to exit");
        //... all the stuff up to the switch
        switch(c)
        {
            //all the cases from before
            case 'x' : exitMethod();break;
        }
    }
    private static void exitMethod()
    {
        Application.Exit();
    } 
    ```

2.  **使用 do - while 循环**

main() 方法中的所有代码都将包装在一个 do - while 循环中。是的，它类似于使用 while(true) 循环，但这次您必须更改 while 中的语句。它会是这样的：

```
 do { // here is all the code in main() 
    }while(Console.ReadKey(true).Key != ConsoleKey.X); 
```

这就是 do - while 循环。您不需要调用特殊的退出方法，因为程序将跳出 do while 循环，并像现在（通常）一样关闭自己。

老实说，我宁愿使用 do - while 循环，因为它也可以处理组合键。有关更多信息，请访问此链接： http: [//www.dotnetperls.com/console-readkey](http://www.dotnetperls.com/console-readkey)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T09:46:23.087

您可以通过 goto 命令使用任何迭代技术，通过 unsatisfactory while 或 do while 循环，通过 infinte for 循环调用函数

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T09:18:29.250

这可以通过循环来解决。对于这种控制台应用程序，我通常会使用 Do...While 循环。

你在学习的过程中会遇到这些事情......我建议你在尝试编写你还没有技能完成的代码之前，继续遵循你正在做的任何指导学习课程。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T09:20:45.000

您需要研究[while 循环](http://www.dotnetperls.com/while)的使用，这就是您在此处使用的方法，以使您的程序继续循环，直到满足某些条件，即选择了计算，然后输入了第一个值，然后输入了第二个. 就像是：

```
static void Main(string[] args)
{
    // main loop to keep your program alive
    while (true)
    {
        // handle your program logic
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-13T09:22:53.280

将您的代码放入`do block`

```
 char c = '';
        do
        {
            c = ...
        }
        while (c != 'q'); 
```

# vba - 检查文件夹是否存在的脚本，如果不存在，运行exe文件

> ID：11931294
> 
> 赞同：-2
> 
> 时间：2012-08-13T09:15:48.290
> 
> 标签：vba, vb6, vbscript

我需要这个脚本来寻找一个文件夹

c:\windows\system32\文件夹名。

如果此文件夹存在，那么我希望脚本停止。如果该文件夹不存在，那么我希望脚本从服务器运行 .exe 文件以安装软件。IE

\服务器名\文件夹\software.exe。

在 c:\windows\system32\foldername 中的文件夹中会有文件，但我只希望它查看文件夹而不是其内容。

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T09:30:34.743

你可以试试下面的脚本

```
Option Explicit

Private Const Folder As String = "c:\windows\system32\foldername"
Private Const FileToRun As String = "\\servername\folder\software.exe"

Sub Run(ByVal sFile)
    Dim shell
    Set shell = CreateObject("WScript.Shell")
    shell.Run Chr(34) & sFile & Chr(34), 1, False
    Set shell = Nothing
End Sub

Dim fs
Set fs = CreateObject("Scripting.FileSystemObject")

If Not fs.FolderExists(Folder) Then
   Run FileToRun
End If 
```

# hsqldb - Nutch 2 hsql配置

> ID：11931309
> 
> 赞同：1
> 
> 时间：2012-08-13T09:16:29.267
> 
> 标签：hsqldb, nutch

如何使用 nutch 在此数据库中配置数据映射。可能应该是一些 hsql-mapping.xml 但编译的 nutch 没有这个文件。我问这个是因为有时由于数据截断而出现 sql 错误，所以我需要更改字段的数据长度。

谢谢

# java - 在 Java 中删除主文件表

> ID：11931311
> 
> 赞同：0
> 
> 时间：2012-08-13T09:16:33.763
> 
> 标签：java, android, file, master

我想擦除 Android 手机中的所有数据，因为恢复软件无法以编程方式恢复它们。

我删除内存然后重写它，但是当我恢复文件时，可以恢复已删除文件的名称。我发现有一个主文件表（mft）保存已删除文件的名称，并且没有通过这种方式删除。现在我要擦mft！

我找不到任何用于删除 mft 或格式化内存的 JAVA 源代码？你能帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T09:46:03.937

你想做的事情很难。

*   它需要 root 访问权限，因此对于您的普通 Android 应用程序来说是不可能的。
*   不同的 Android 版本/手机会有不同的文件系统（我的 2.1 手机使用 YAFFS，4.0 现在有 Ext4）。这些文件系统都没有这个名称的“MFT”，当然它们确实存储文件系统信息。确切的结构取决于使用的文件系统。
*   由于与磨损均衡算法的交互，闪存上的安全数据删除非常困难，这导致在磁存储上使用的“多次覆盖”方法变得无用（这可能不是您对“安全”的定义的问题如果您只害怕软件级别的攻击）。

TL;DR：你需要一个不同的设计。

# mapreduce - 通过 map-reduce 程序将表从 hbase 加载到 hdfs

> ID：11931313
> 
> 赞同：0
> 
> 时间：2012-08-13T09:16:47.803
> 
> 标签：mapreduce, hbase, hdfs

如何编写 map-reduce 程序以将任何表从 hbase 加载到 hdfs 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T15:31:25.557

有几种方法：-

1.  使用 Hbase 的 TableMapreduceUtil ( [http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/mapreduce/TableMapReduceUtil.html](http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/mapreduce/TableMapReduceUtil.html) )，您可以在其中指定表扫描，然后他们操作数据或将其写入 hdfs。
2.  您可以使用 hbase 的实用程序将整个 hbase 表的快照创建到 hdfs 中，称为导出（[http://hbase.apache.org/book/ops_mgt.html#export](http://hbase.apache.org/book/ops_mgt.html#export)），*导入*工具可用于加载备份的表从hdfs到hbase。

# matlab - Power spectrum from autocorrelation function with MATLAB

> ID：11931314
> 
> 赞同：1
> 
> 时间：2012-08-13T09:16:48.650
> 
> 标签：matlab, signal-processing, fft, correlation

I have some dynamic light scattering data. The machine pumps out the autocorrelation function, and a count-rate.

I can do a simple fit to the ACF

```
ACF = exp(-D*q^2*t) 
```

and obtain the diffusion coefficient.

I want to obtain the same `D` from the power spectrum. I have been able to create a power spectrum in two ways -- from the Fourier transform of the ACF, and from the count rate. Both agree, but the power spectrum does not look like in the one in the books, so I'm not sure how to use it to work out the line width.

Attached is an image from a PDF that shows what you should get, and what I get from MATLAB. Can anyone make sense of whats going on?

I have used the code of answer #3 on [this](https://stackoverflow.com/questions/3949324/calculate-autocorrelation-using-fft-in-matlab) question. The resulting autocorrelation comes out exactly the same as

1.  the machine gives me and
2.  using MATLAB's `autocorr` command on the photoncount data.

Thank you for your time.

![enter image description here](../Images/35a7199a4e175f0f712d59d15290948c.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T14:45:25.707

When you compute the Fourier transform from short sequences of data it often looks very noisy. There are a number of reasons for this. One reason is that the statistics of individual Fourier components are not Gaussian, and so averaging the spectra across multiple samples of data will only slowly improve the quality of the estimate.

Another causes of "noisiness" in empirical spectra behavior is that you are applying (to a finite data sample) a transform which involves a pathological [sinc function](http://en.wikipedia.org/wiki/Sinc_function) and which assumes an infinite length signal. To diminish this problem, it helps to apply a ["windowing-function"](http://en.wikipedia.org/wiki/Window_function) to your data before computing the Fourier transform. One of the more complicated but also more powerful windowing approaches is the use of so-called 'Slepian tapers'.

MATLAB conveniently implements well-known windows in functions such as `hamming` and `hann`.

# javascript - Google Maps JS API v3 - 添加地图类型

> ID：11931316
> 
> 赞同：1
> 
> 时间：2012-08-13T09:16:50.773
> 
> 标签：javascript, google-maps

如何将混合、卫星、地形和物理视图模式添加到使用 Gmap Javascript API v3 呈现的 Google 地图？

我的代码看起来像：

```
var myLatlng = new google.maps.LatLng(47.283902, 11.526825);
var mapOptions = {
  zoom: 14,
  center: myLatlng,
  mapTypeId: google.maps.MapTypeId.ROADMAP,
  mapTypeControlOptions: {
    mapTypes: [google.maps.MapTypeId.ROADMAP, google.maps.MapTypeId.HYBRID, google.maps.MapTypeId.SATELLITE, google.maps.MapTypeId.TERRAIN]
  }
};

directionsService = new google.maps.DirectionsService();
directionsDisplay = new google.maps.DirectionsRenderer();
map = new google.maps.Map(document.getElementById("gmap"), mapOptions);
directionsDisplay.setMap(map); 
```

但这似乎不起作用！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T23:42:56.783

在将一些旧的 V2 地图转换为 V3 时，我正在研究同样的问题，因为谷歌将在 5 月 19 日杀死 V2。在 V2 中这是一个选项，所以我被要求重新添加。

但是，在 V3 中，卫星和混合是相同的。卫星视图上的标签是唯一的区别。因此，在功能上，不需要为卫星视图和混合视图设置两个按钮。卫星按钮有一个带有标签复选框选项的下拉菜单，用于禁用这些标签。

您当然可以为它编写一个自定义按钮，但这完全是多余的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-13T08:40:43.067

`ROADMAP`, `TERRAIN`,`SATELLITE`和`HYBRID`是基本的地图类型，不需要添加它们。如果要在它们之间进行选择，则必须使用 map 选项启用它`mapTypeControl`（*布尔值：地图类型控件的初始启用/禁用状态*）。

例如，使用：

```
var mapOptions = {
    zoom: 14,
    center: myLatlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    mapTypeControl: true
}; 
```

您将在窗口的右上角获得地图控件。然后您可以选择您喜欢的地图类型。

# android - 如何在 Android 应用程序中使用 SMS 发送表情/表情

> ID：11931318
> 
> 赞同：0
> 
> 时间：2012-08-13T09:17:05.833
> 
> 标签：android

我正在开发一个短信应用程序，但我必须在短信中添加表情/表情。但我不知道该怎么做。请提出任何解决方案。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:24:04.730

您可以将所有笑脸保存在可绘制文件夹中，并使用 a与 the`HashMap`链接，并使用在 TextView 内将图像与文本附加在一起。我刚刚为它创建了一个演示，你可以从.`resource_id``smiley character``ImageSpan`[`here`](https://github.com/lalit3686/SimleyPopUpDemo)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T09:19:45.840

您必须在文本框中使用[ImageSpan](http://developer.android.com/reference/android/text/style/ImageSpan.html)来转换笑脸。

# haskell - 错误处理和单子？

> ID：11931324
> 
> 赞同：1
> 
> 时间：2012-08-13T09:17:24.310
> 
> 标签：haskell, error-handling, monads, maybe

我试图了解如何应用 Haskel 的 Maybe-idiom。我正在阅读[http://en.wikibooks.org/wiki/Haskell/Understanding_monads/Maybe](http://en.wikibooks.org/wiki/Haskell/Understanding_monads/Maybe)这表明字典中的查找可能会返回一个`Maybe`和该值通过`>>=`运算符传播。

来自 URL 的示例：

如果我们想在第三次查询中使用政府数据库查询的结果（比如我们想查询他们的注册号，看看他们是否欠任何汽车税），那么我们可以扩展我们的 getRegistrationNumber 函数：

```
getTaxOwed :: String       -- their name
           -> Maybe Double -- the amount of tax they owe
getTaxOwed name = 
  lookup name phonebook >>=
    (\number -> lookup number governmentalDatabase) >>=
      (\registration -> lookup registration taxDatabase) 
```

或者，使用 do-block 样式：

```
getTaxOwed name = do
  number       <- lookup name phonebook
  registration <- lookup number governmentalDatabase
  lookup registration taxDatabase 
```

**问题：**

我如何处理错误处理？我认为大多数代码将受益于告诉哪里出了问题。而不是仅仅报告“在电话簿或政府数据库中找不到 John Doe”，它应该报告哪个资源有问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-13T10:47:19.543

您可以使用 monad 实例`Either String`，它本质上定义为

```
instance Monad (Either String) where                                             
  fail msg = Left msg                                                            
  return x = Right x                                                             

  Left msg >>= k = Left msg                                                      
  Right x  >>= k = k x 
```

（实际的定义要复杂一些。）

如果我们将字典定义为由标签和查找表组成的对

```
type Dict a b = (String, [(a, b)])

phonebook' :: Dict String Int
phonebook' = ("phone book", phonebook)

governmentalDatabase' :: Dict Int Int
governmentalDatabase' = ("governmental database", governmentalDatabase)

taxDatabase' :: Dict Int Double
taxDatabase' = ("tax database", taxDatabase) 
```

where `phonebook`, `governmentalDatabase`, and`taxDatabase`是你之前定义的，我们可以使用一个替代的 monadic 查找函数，它在`Either String`-monad 中返回它的结果：

```
lookup' :: (Eq a, Show a) => a -> Dict a b -> Either String b
lookup' key (descr, table) = case lookup key table of
  Nothing  -> Left ("couldn't find " ++ show key ++ " in " ++ descr)
  Just val -> Right val 
```

说明 monad 的强大功能，现在唯一需要在客户端函数中更改的是类型签名：

```
getTaxOwed :: String               -- their name                                 
           -> Either String Double -- either an error message                    
                                   -- or the amount of tax they owe              
getTaxOwed name = do
  number       <- lookup' name phonebook'
  registration <- lookup' number governmentalDatabase'
  lookup' registration taxDatabase' 
```

在未知名称上运行此函数会给出：

```
> getTaxOwed "Joe"
Left "couldn't find \"Joe\" in phone book" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-13T09:24:43.963

Maybe 数据类型只有值“Nothing”来表示错误。如果您想返回特定的错误消息，我建议使用数据类型“Either”，它可以返回“Left a”或“Right a”值。[在http://learnyouahaskell.com/for-a-few-monads-more#error](http://learnyouahaskell.com/for-a-few-monads-more#error)阅读更多关于如何使用它的信息

# ruby-on-rails - 如何在主菜单中添加新项目？

> ID：11931326
> 
> 赞同：-1
> 
> 时间：2012-08-13T09:17:34.897
> 
> 标签：ruby-on-rails

1.  创建一个名为 User 的新控制器。为其创建以下页面：索引、注册、登录和注销。使用生成器脚本来完成它就足够了。

2.  在主菜单中添加新项目：注册和登录。主菜单在应用程序布局文件 app\views\layouts\application.html.erb 中定义。请注意，在此阶段我们尚未将菜单链接添加到索引页面。

3.  试用您的应用程序。如果新页面不起作用，请重新启动 Mongrel Web 应用程序。

第二点是什么？我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T09:39:02.103

Jarek Francik 是我在金斯顿大学的老师...

几年前我做了这个教程。第二步是为您生成的新操作添加链接：`index, register, login and logout`

转到您的 application.html.erb 并编辑它：

```
 ...
  <div id="nav">
    <%= link_to_unless_current "Home",  :controller => "site", 
                                        :action => "index" %> | 
    <%= link_to_unless_current "About", :controller => "site", 
                                        :action => "about" %> | 
    <%= link_to_unless_current "Help",  :controller => "site", 
                                        :action => "help" %> |

    #include the new actions as the example below:
    <%= link_to_unless_current "Login", :controller => "user", 
                                        :action => "login" %> | 

 </div> 
```

另请注意，本教程适用于 Rails 2.3.9。我建议你看看他关于 rails 3 和购物车的视频：http: [//ecommerce2011.tumblr.com/post/11687504985/lecture-4-techniques-part-2-the-shop-on-rails](http://ecommerce2011.tumblr.com/post/11687504985/lecture-4-techniques-part-2-the-shop-on-rails)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T09:41:59.557

在[您正在完成的教程的第 3 章](http://rails.francik.name/tutorial/chapter/4)第 9 节（收尾）中，您在以下代码段中创建了一个导航菜单：

```
<div id="nav">
  <%= link_to_unless_current "Home",  :controller => "site", 
                                      :action => "index" %> | 
  <%= link_to_unless_current "About", :controller => "site", 
                                      :action => "about" %> | 
  <%= link_to_unless_current "Help",  :controller => "site", 
                                      :action => "help" %>
</div> 
```

`link_to_unless_current`要将新项目添加到菜单中，您需要在导航 div 中再创建两个调用。例如，更改后的代码可能如下所示：

```
<div id="nav">
  <%= link_to_unless_current "Home",     :controller => "site", 
                                         :action => "index" %> | 
  <%= link_to_unless_current "About",    :controller => "site", 
                                         :action => "about" %> | 
  <%= link_to_unless_current "Help",     :controller => "site", 
                                         :action => "help" %> |
  <%= link_to_unless_current "Register", :controller => "user", 
                                         :action => "register" %> |
  <%= link_to_unless_current "Login",    :controller => "user", 
                                         :action => "login" %>
</div> 
```

我建议回到第 3 章并检查您是否了解正在发生的事情。

# algorithm - 多项式乘法的复杂性

> ID：11931333
> 
> 赞同：2
> 
> 时间：2012-08-13T09:17:48.563
> 
> 标签：algorithm

我正在尝试将两个多项式 A 和 B 相乘，每个多项式都为 'd'，其中基本上有两个运算，即乘法和加法。为了得到一个输出多项式'C'，总共需要多少次操作？我搜索了很多，我假设总乘法运算将是“d^2”，总加法将是“2d-1”。因此总操作数将是 (2d-1)*(d^2)。这是真的？还是假的？如何？请建议....

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T09:37:56.550

多项式`d`具有`d+1`系数。所以一个简单的实现需要`(d+1)^2`乘法。对于非常大`d`的操作数量可以减少到`O( d log(d))`使用 FFT。

# java - 使用 JdbcTemplate 的 queryForList 方法

> ID：11931340
> 
> 赞同：1
> 
> 时间：2012-08-13T09:18:28.230
> 
> 标签：java, spring-batch

我需要使用以下查询。

```
SELECT m.member_id, cardflag FROM member m, member_attribute ma WHERE m.member_number=:memberNumber AND m.ref_club_status IN ('A','S') AND m.member_id=ma.member_id 
```

的数据类型`member_id`是字节数组，的数据类型`cardflag`是varchar。

我需要在我的代码中使用此查询，并查看 jdbctemplate 文档中的选项，queryForList 似乎是最佳选择。我一直在尝试，但无法弄清楚如何将参数传递给我的查询以及如何处理返回类型。

有人可以帮忙吗？

提前非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T09:52:12.410

我的回答是

```
String sql = "SELECT m.member_id, searscc FROM member m, member_attribute ma " +
            "WHERE m.member_number=:memberNumber AND m.ref_club_status IN ('A','S') AND m.member_id=ma.member_id";
String memberNumber = "John Doe";                   //the argument value for the sql above
JdbcTemplate jdbcTemplate = new JdbcTemplate();     //replace this line with your own code to get JdbcTemplate instance.
List<Map<String, Object>> rows = jdbcTemplate.queryForList(sql, new Object[]{memberNumber}) ;
byte[] tempMemberIds = null;
String tempSearscc = null;
if ((rows != null) || (rows.size() > 0)) {
    for (Map<String, Object> tempRow : rows) {
        tempMemberIds = (byte[])(tempRow.get("member_id"));     //key is your search field in your sql
        tempSearscc = (String)(tempRow.get("searscc"));
        //do your own jobs
    }
} else {
    //do something else
} 
```

希望这有用。

# api - 如何为我自己的站点创建 Web Intent 服务？

> ID：11931342
> 
> 赞同：1
> 
> 时间：2012-08-13T09:18:28.450
> 
> 标签：api, twitter, twitter-oauth, webintents

Twitter 提供“Web 意图”，作为对其 API 的 OAuth 访问的替代方案。基本上，这提供了功能较少的丰富体验，但仍然非常方便。用户点击第 3 部分网站可以创建弹出窗口，检查用户是否登录 Twitter，如果登录，允许他们使用 Twitter 的一些功能，例如发推文、转推或关注用户。

我的问题是，我怎样才能实现这样的 API？有教程或库吗？我不确定哪些技术支持网络意图或我应该从哪里开始搜索。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:32:59.033

[您可以在webintents.org](http://webintents.org/)阅读更多关于 web 意图的信息，并阅读 W3C 的[草案规范](http://www.w3.org/TR/2012/WD-web-intents-20120626/)。据我所知，网络意图在网络上仍然是一种新的野兽，它们还没有被标准化。

不过，您可能想阅读[此](http://glennjones.net/2011/08/web-intentsgluing-web-functionality-together/)博客，其中包含一些注册 Web 意图的示例，并查看 Paul Kinlan 的 git 存储库[https://github.com/PaulKinlan/WebIntents](https://github.com/PaulKinlan/WebIntents)

希望能帮助您入门。

# google-app-engine - 谷歌应用引擎项目中战争中的网页文件夹？

> ID：11931343
> 
> 赞同：0
> 
> 时间：2012-08-13T09:18:32.407
> 
> 标签：google-app-engine

我正在开发 Restful Web 应用程序。我正在为 Web 客户端代码和 Google 应用引擎服务器代码维护不同的项目。

每当我对客户端代码进行更改时，我都会重建客户端代码并通过构建脚本将其放置在服务器项目的 war 文件夹中。

在这里，我不想将所有文件直接放在 war 文件夹中，我想将它们放在名为“Publish”的文件夹下，以便更好地维护。怎么办？

有没有更好的方法来维护客户端代码和谷歌应用引擎服务器代码？

该结构也适用于未来的移动应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T15:40:47.850

我对此也还是新手，但是有版本控制。如果您更改项目清单文件中的版本号，它不会成为默认值（即，对您的原始公共 URL 可见）。它是公开的，可供您测试。当您准备好“发布”时，只需将新版本切换为默认版本。准备好后，使用仪表板的*管理*部分并将*版本*设置为默认值。

要测试任何早期版本，您可以通过*管理*访问并单击特定版本。我不知道持久存储是否使用相同的机制进行版本控制——如果你有一个巨大的数据库，我可以想象问题。

# string - 无法理解 http://pine.cs.yale.edu/pinewiki/SuffixArrays 中提到的概念

> ID：11931345
> 
> 赞同：0
> 
> 时间：2012-08-13T09:18:34.287
> 
> 标签：string, algorithm, search, suffix-array

请解释：

> 假设我们有一个对应于一个 n 字符文本的后缀数组，并且我们想要在一个 m 字符模式的文本中查找所有出现。由于后缀是有序的，最简单的解决方案是使用 O(log n) 比较对模式的第一次和最后一次出现（如果有）进行二进制搜索。

在确定 pattern 的第一次和最后一次出现后，我需要知道如何获得*所有出现的 pattern*。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T02:08:44.803

您引用的文字在两个方面有点令人困惑，甚至可能具有误导性：

1.  它说找到模式的第一次和最后一次出现就足够了，但它应该更准确地说：**后缀数组**中模式的第一次和最后一次出现。这与基础文本中的第一次和最后一次出现不同。

2.  它说你需要 O(log n) 比较。仅当“比较”指的是最多 m 个字符的*字符串比较时，这才是正确的。*由于最多比较 m 个字符需要 O(m) 时间，因此计算步骤数（例如在标准 RAM 模型中）为 O(m*log n)。如果构建和使用辅助数据结构，例如 LCP（最长公共前缀）数组，则可以改进它。

现在，回答你的问题：考虑到上面的（1.），你很容易得到所有出现的模式，**因为后缀数组是按字典顺序排序的**。这意味着第一次出现是字典顺序最小的，最后一次出现是字典顺序最大的。因此，剩余的事件**必须在**第一个和最后一个之间。

**例子。**考虑字符串`bcfabcabxbbcabcgdebcd`。它的后缀数组（表示为后缀的起始位置，从0开始计数）是

```
[3, 12, 6, 9, 10, 4, 18, 0, 13, 7, 11, 5, 19, 1, 14, 20, 16, 17, 2, 15, 8] 
```

对应于以下后缀列表：

```
3  : abcabxbbcabcgdebcd
12 : abcgdebcd
6  : abxbbcabcgdebcd
9  : bbcabcgdebcd
10 : bcabcgdebcd            <======= first occurrence of 'bc'
4  : bcabxbbcabcgdebcd
18 : bcd
0  : bcfabcabxbbcabcgdebcd
13 : bcgdebcd               <======= last occurrence of 'bc'
7  : bxbbcabcgdebcd
11 : cabcgdebcd
5  : cabxbbcabcgdebcd
19 : cd
1  : cfabcabxbbcabcgdebcd
14 : cgdebcd
20 : d
16 : debcd
17 : ebcd
2  : fabcabxbbcabcgdebcd
15 : gdebcd
8  : xbbcabcgdebcd 
```

假设您要查找的模式是“bc”。我已经在后缀数组中标记了该模式的第一次和最后一次出现。由于字典排序，介于两者之间的所有条目也必须以“bc”开头，并且任何以“bc”开头的条目都必须介于两者之间。因此，所有以'bc' 开头的后缀，即'bc' 出现的所有位置，必须在第一次和最后一次出现之间。

表示为位置整数，我们确定的范围是

```
[10, 4, 18, 0, 13] 
```

因此，位置 10、4、18、0 和 13 标记了该模式的出现。

（请注意，实际上不使用后缀的完整字符串列表 - 仅使用整数位置列表。）

# c# - 更改 ListView 中 ListView 项的颜色

> ID：11931351
> 
> 赞同：0
> 
> 时间：2012-08-13T09:19:00.683
> 
> 标签：c#, windows-8, microsoft-metro

基本上，我有两个需要维护的状态`ListViewItem`：

1.  按下
2.  已选中

另外，我需要`ListViewItem`在运行时更改颜色，就像我需要应用红色或粉色或绿色等一样。

我四处搜索，发现我需要做一些事情`ItemContainerStyle`，因为我需要它动态更改，我必须通过代码而不是在颜色之间切换`XAML`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T20:03:41.560

要更改按下和选定的颜色，您需要修改 ItemContainerStyle。在 Blend 中，右键单击 ListView，然后选择 Edit Additional Templates -> Edit Generated Item Container (ItemContainerStyle) -> Edit a Copy。使用 States 面板更新 Selected 和 Pressed 状态。您必须导航到文档树中控制要更改的颜色的适当元素。

如果您需要在运行时更改设置，则需要将样式属性数据绑定到某种“ColorSettings”属性。该属性需要来自您绑定列表视图的数据（例如，添加 SelectedColor 属性），或者来自某种主设置对象。

# android - 将特定时区传递给日历事件

> ID：11931354
> 
> 赞同：1
> 
> 时间：2012-08-13T09:19:18.790
> 
> 标签：android, android-intent, calendar

使用我的应用程序向日历添加新事件时如何传递特定时区？假设我手机的默认时区是 (GMT+1:00) London, Dublin.. 我想通过 (GMT+8:00) Hong Kong。谢谢。

我使用这样的东西：

```
Intent intent = new Intent(Intent.ACTION_EDIT);
intent.setType("vnd.android.cursor.item/event");
intent.putExtra("beginTime", stime);
intent.putExtra("allDay", false);
//intent.putExtra("rrule", "FREQ=YEARLY");
intent.putExtra("endTime", etime);
intent.putExtra("title", eventName);
startActivity(intent); 
```

# jquery - 回调不起作用

> ID：11931355
> 
> 赞同：0
> 
> 时间：2012-08-13T09:19:24.063
> 
> 标签：jquery, jquery-ui

我有一个关键问题，即当我单击应该调用回调的元素时，我的 jquery 插件有回调。

我观察到点击事件触发了不止一次，因为我让一些项目正常工作，但有些项目没有触发回调。

```
$(this).children('li').unbind('click').click(function(){
switch(this.id){
    case 'foo' : options.foocallback();
      break;
    case 'bla' : options.blacallback();
      break;
    .....
  }
}); 
```

HTML：

```
<ul>
<li id="foo">...</li>
<li id="bla">...</li>
...
</ul> 
```

现在，当我单击列表项时，一些工作正常并调用回调

** 但是有些项目没有调用回调**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T09:39:40.190

您可以尝试这样的事情*（如果您的事件绑定不依赖于某些条件）*

***HTML***

```
<ul id="listholder">
  <li id="foo">...</li>
  <li id="bla">...</li>
  ...
</ul> 
```

***jQuery***

```
$('#listholder li').on('click', function() {
 switch(this.id){
    case 'foo' : options.foocallback();
      break;
    case 'bla' : options.blacallback();
      break;
    .....
  }
}); 
```

# c# - Log4net 无法写入文件

> ID：11931362
> 
> 赞同：1
> 
> 时间：2012-08-13T09:20:09.167
> 
> 标签：c#, asp.net, log4net

我正在使用 log4net 来记录我的项目。我需要在我的应用程序中创建多个日志文件。我能够创建日志文件，但似乎 log4net 无法写入。

请在下面查看我的编码：

```
public void Execute(IJobExecutionContext context)
{
    strLoadFilePath = @"E:\lewre\excel\stock\";
    strLoadFileName = @"iCenterProductConcept_*.xls";

    strCopyFilePath = @"E:\lewre\excel\stock\Processed\";
    strCopyFileName = @"iCenterProductConceptProcess_" + DateTime.Now.ToString("yyyyMMddHHmm") + ".xls";

    //--Assign log4net path --
    log4net.GlobalContext.Properties["fileName"] = strCopyFilePath + "GeneralLog_" + DateTime.Now.ToString("yyyyMMddHHmm");
    //log4net.GlobalContext.Properties["errorFileName"] = strCopyFilePath +"ErrorLog_"+ DateTime.Now.ToString("yyyyMMddHHmm");
    log4net.Config.XmlConfigurator.ConfigureAndWatch(new FileInfo("App.config"));
    ////**Assign log4net path **

    logger.Debug("test");
} 
```

Log4net 配置：

```
<configSections>
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler,log4net" />
    <section name="quartz" type="System.Configuration.NameValueSectionHandler, System, Version=1.0.5000.0,Culture=neutral, PublicKeyToken=b77a5c561934e089" />
    <sectionGroup name="common">
      <section name="logging" type="Common.Logging.ConfigurationSectionHandler, Common.Logging" />
    </sectionGroup>
  </configSections>
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler,log4net" />
    <section name="quartz" type="System.Configuration.NameValueSectionHandler, System, Version=1.0.5000.0,Culture=neutral, PublicKeyToken=b77a5c561934e089" />
    <sectionGroup name="common">
      <section name="logging" type="Common.Logging.ConfigurationSectionHandler, Common.Logging" />
    </sectionGroup>
  </configSections>
  <appSettings>
    <add key="log4net.Internal.Debug" value="false" />
    <add key="ClientSettingsProvider.ServiceUri" value="" />
  </appSettings>
  <!--<common>
    <logging>
      <factoryAdapter type="Common.Logging.Log4Net.Log4NetLoggerFactoryAdapter,&#xD;&#xA;                        Common.Logging.Log4Net">
        <arg key="configType" value="INLINE" />
        <arg key="configFile" value="E:\\lewre\LewrerpLog\LewreQuartzLog.log" />
        <arg key="level" value="ALL" />
      </factoryAdapter>
    </logging>
  </common>-->
  <log4net>

<appender name="FileAppender" type="log4net.Appender.RollingFileAppender">
  <file type="log4net.Util.PatternString" value="%property{fileName}.txt"/>
  <appendToFile value="false"/>
  <rollingStyle value="Size"/>
  <maxSizeRollBackups value="-1"/>
  <maximumFileSize value="1024KB"/>
  <layout type="log4net.Layout.PatternLayout">
    <conversionPattern value="%date %-5level %logger - %message%newline"/>
  </layout>

  <filter type="log4net.Filter.PropertyFilter">
    <Key value="Version" />
    <StringToMatch value="1" />
  </filter>
</appender>

  <root>
    <level value="All" />
    <appender-ref ref="FileAppender" />      
  </root>
</log4net> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:42:14.163

为net配置日志，只需要添加

```
[assembly: log4net.Config.XmlConfigurator(Watch = true)]
[assembly: log4net.Config.Repository()]
namespace MyApp
{
    public class Main
    {
       private static readonly ILog log = LogManager.GetLogger(typeof(Main));
    }
} 
```

这只需为您的应用程序执行一次。

您想要写入日志文件的日期模式可以使用`DatePattern`.

```
 <appender name="A1" type="log4net.Appender.RollingFileAppender">
    <file value="E:\lewre\excel\stock\Processed\GeneralLog_" />
    <appendToFile value="true" />
    <rollingStyle value="Date" />
    <staticLogFileName value="false" />
    <param name="DatePattern" value="yyyyMMddHHmm'.txt'" />
    <layout type="log4net.Layout.PatternLayout">
      <conversionPattern value="%date [%thread] %-5level %logger - %message%newline" />
    </layout>
  </appender> 
```

# sencha-touch - 甲骨文+煎茶

> ID：11931363
> 
> 赞同：0
> 
> 时间：2012-08-13T09:20:14.687
> 
> 标签：sencha-touch, extjs, sencha-touch-2

如何将我的 sencha 应用程序连接到 oracle db。

有任何想法吗？？

我正在尝试制作包含 2 列的客户书。值将显示在移动应用程序中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:19:23.127

好的@Shaleen，

1.  您可以使用 Java 或 C# 或任何您想要的东西连接到数据库吗？
2.  您从数据库中获得的信息可以转换为 JSON。
3.  使用 Sencha，您可以获得包含可用信息的 JSON 文件。

**希望这些有所帮助。:)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T18:57:11.997

这很简单。

**脚步：-**

1.  从表单面板获取值（假设您使用它）并调用`Ext.Ajax.request()`表单提交。

2.  提供 php 路径的 url（如果您在后端使用 PHP）并在 PHP 文件中建立与 db 的所有连接，使用检索值`$_POST[]`并将它们插入到 db 中。

# c++ - 如何设置 QNetworkReply 的内容

> ID：11931364
> 
> 赞同：0
> 
> 时间：2012-08-13T09:20:22.113
> 
> 标签：c++, qt, qwebkit

这是我在这里的第一篇文章，我对 Qt 还很陌生。

我正在使用 Qwebkit 来加载网页，并且我对不完全从 web 加载一些资源感兴趣。具体来说，我试图只获取 jpg 文件的大小，而不是 jpg 二进制数据（不是 HTML 标记）中的图像数据。为此，我重新实现了 QNAM 的 createRequest 方法，如下所示：

```
QNetworkReply *NetworkAccessManager::createRequest(Operation op,const QNetworkRequest & req,QIODevice * outgoingData )
{

    if (req.url().path().endsWith("jpg"))
    {
        CustomReply *reply = new CustomReply(QNetworkAccessManager::createRequest(op, req, outgoingData));
        return reply->getQNR();
    }else{
        return QNetworkAccessManager::createRequest(op, req, outgoingData);
    }
} 
```

然后我在我的 CustomReply 类中连接一些信号以将传入的数据附加到 QByteArray 中，然后我处理 QByteArray 以查看是否有我正在寻找的[标记。](http://en.wikipedia.org/wiki/JPEG#Syntax_and_structure)现在在这里我不知道如何进行。在此之后我想做的是关闭连接（不下载更多内容）并使用我通过 CustomReply::getQNR() 收到的数据传递回复。我需要实现一个函数来将我的回复内容设置为我存储的 QByteArray，我已经阅读[了这个](http://blogs.kde.org/node/4317)和[那个，](https://stackoverflow.com/questions/4475647/how-to-read-data-from-qnetworkreply-being-used-by-qwebpage)但无法解决我的问题。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:59:31.170

我对您的问题不是 100% 清楚，但是如果您尝试将收到的回复的值返回给另一个 QByteArray，只需设置一个附加信号，该信号在完成时触发或调用`emit`并通过这种方式传递值.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T05:43:13.380

我按照[这里](http://blogs.kde.org/node/4317)的描述做了并解决了我的问题。我错过了偏移量，所以每次调用 readData() 时，都会从头开始读取数据。为了关闭连接，我将 CustomReply 的完成信号连接到原始 QNReply。当我获得足够的数据时，我会发出完成信号以关闭连接。调用 abort 或 close 将导致 ERROR 5（尽管您可以处理该错误，但我发现使用信号有点酷）。

谢谢大家。

# android - 用于 phonegap 的 StatusBar Notofication 插件显示错误

> ID：11931365
> 
> 赞同：0
> 
> 时间：2012-08-13T09:20:30.643
> 
> 标签：android, cordova, push-notification, phonegap-plugins

我正在尝试使用电话间隙向 Android 上的状态栏发送一些推送通知。

我使用了这个[插件](https://github.com/saileshmittal/phonegap-system-notification-plugin/tree/master/android-statusbar-notificaion)，但是当我运行应用程序时，它显示了这个错误：cordona 无法解析。

关于如何修复它的任何想法？

# datalist - BINDING 后对 ASP 数据列表进行排序

> ID：11931367
> 
> 赞同：0
> 
> 时间：2012-08-13T09:20:31.237
> 
> 标签：datalist

我正在将 DataList 与动态值绑定（即从 google api 到特定位置的距离。）

即从 x 位置：

10 公里远 15 公里远等如下

![在此处输入图像描述](../Images/5138f627399af3fdd87451ece2e32a2e.png)

**在ItemDataBound**中使用此代码：

```
private void bindDataList(string location)
{
  DataSet dstProperty = Tbl_PropertyMaster.getPropertiesByLocation(location);
  dlstNearbyProperties.DataSource = dstProperty;
  dlstNearbyProperties.DataBind();
} 
```

.

```
protected void dlstNearbyProperties_ItemDataBound(object sender, DataListItemEventArgs e)
{
    if (e.Item.ItemType == ListItemType.Item ||
         e.Item.ItemType == ListItemType.AlternatingItem)
    {
        Label lblPropId = (Label)e.Item.FindControl("lblPropId");
        Label lblKmAway = (Label)e.Item.FindControl("lblKmAway");
        Label lblPrice = (Label)e.Item.FindControl("lblPrice");
        DataSet dstEnabledStat = Tbl_PropertyMaster.GetPropertyDetailsbyId(Convert.ToInt32(lblPropId.Text));
        if (dstEnabledStat.Tables[0].Rows.Count > 0)
        {
            //string origin = "8.5572357 ,76.87649310000006";
            string origin = InitialOrigin;
            string destination = dstEnabledStat.Tables[0].Rows[0]["Latitude"].ToString() + "," + dstEnabledStat.Tables[0].Rows[0]["Longitude"].ToString();
            lblKmAway.Text = devTools.getDistance(origin, destination) + " Away";
        }
        lblPrice.Text = getMinnimumOfRoomPrice(Convert.ToInt32(lblPropId.Text));
   }
} 
```

**有没有办法以升序或降序对这些值进行排序。**

***注意：距离不是 DB 值，它们是动态的。***

**这可以在 Button1_Click 中排序吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T12:10:27.130

在玩了很多小时的代码之后，我做到了。

**以下是针对 GRIDVIEW 的，对于 DataList 也可以遵循类似的步骤。**

**页面加载：**我在已经存在的数据表中添加了一个额外的列“Miles”

```
protected void Page_Load(object sender, EventArgs e)
{
    dtbl = Tbl_PropertyMaster.SelectAllPropertyAndUserDetails().Tables[0];
    dtbl.Columns.Add("Miles", typeof(int));
    //userId = devTools.checkAdminLoginStatus();
    if (!IsPostBack)
    {
        fillDlPhotoViewAll();
        FillGrProperty();

    }
} 
```

**行数据绑定：**

```
protected void grProperty_RowDataBound(object sender, GridViewRowEventArgs e)
{
if (e.Row.RowType == DataControlRowType.DataRow)
{

    DataSet dstEnabledStat = Tbl_PropertyMaster.GetPropertyDetailsbyId(PropId);
    if (dstEnabledStat.Tables[0].Rows.Count > 0)
    {
        string origin = InitialOrigin;
            string destination = dstEnabledStat.Tables[0].Rows[0]["Latitude"].ToString() + "," + dstEnabledStat.Tables[0].Rows[0]["Longitude"].ToString();
            decimal Kilometre=0.00M;
            if(devTools.getDistance(origin, destination)!=0)
            {
            Kilometre=Convert.ToDecimal(devTools.getDistance(origin, destination))/1000;
            }
            lblmiles.Text = Kilometre.ToString() + "Kms";
            dtbl.Rows[inn]["Miles"] = Convert.ToInt32(devTools.getDistance(origin, destination));
            inn = inn + 1;
    }
}
ViewState["dtbl"] = dtbl;
} 
```

**按距离排序Button_Click：**

```
protected void btnSort_Click(object sender, EventArgs e)
{
    DataTable dataTable;
    dataTable = (DataTable)ViewState["dtbl"];
    if (dataTable.Rows.Count > 0)
    {
        dataTable.DefaultView.Sort = "Miles DESC";
        dataTable.AcceptChanges();
        grProperty.DataSource = dataTable;
        grProperty.DataBind();
    }
} 
```

# configuration - 是否可以在不重新启动整个 Liferay 门户的情况下反映 portal-ext.properties 中的更改？

> ID：11931375
> 
> 赞同：5
> 
> 时间：2012-08-13T09:21:13.030
> 
> 标签：configuration, properties, liferay

我的问题是每次更改 Liferay 后`portal-properties`（这很常见，尤其是在新门户项目开始时）我需要重新启动整个门户。

我可以在挂钩上设置一些属性，这些值将在重新部署后更改。此外，必须可以在运行时更改大多数门户属性。

但是，您知道一些`portal-ext.properties`无需重新启动 Liferay 门户即可反映更改的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T10:20:08.607

As [stoldark](https://stackoverflow.com/a/11931915/468763) mentioned, this is not possible in a production environment at all. Since `portal.properties`'s properties are loaded at portal start-up.

But for development you can use a tool like [JRebel](http://www.zeroturnaround.com/software/jrebel/), some steps to configure it [here](http://www.liferayaddict.com/home/-/blogs/liferay-ext-with-jrebel). The only issue you would get with this tool is that it is paid **;-)**.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-08-10T07:50:49.433

我知道这是一个非常古老的线程，但它可能对正在寻找某种类型的工作的人有所帮助
因为我们知道没有直接的方法，但我通过使用 java 反射和类加载器来做到这一点。
Liferay 版本：6.x

```
//Loading the PropsUtil class by using PortalClassLoader
Class<?> prospsUtilClass = PortalClassLoaderUtil.getClassLoader().loadClass("com.liferay.portal.util.PropsUtil");
//getting the reload method of PropsUtil class
Method reloadMethod = prospsUtilClass.getMethod("reload", null);
//Invoking the static reload method 
reloadMethod.invoke(null, null); 
```

Reload 方法（重新）将门户扩展属性加载到门户，因此我们可以使用新属性而无需重新启动 Liferay 服务器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T09:53:57.213

Liferay 论坛中也有人问过这个问题：

[https://www.liferay.com/community/forums/-/message_boards/message/800954](https://www.liferay.com/community/forums/-/message_boards/message/800954)

但恐怕大多数属性在门户启动期间只读取一次。通常，在这种情况下使用属性文件有这个缺点。

Liferay 甚至有一个关于此问题的公开问题，但仍未解决：

[http://issues.liferay.com/browse/LEP-5579](http://issues.liferay.com/browse/LEP-5579)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-14T11:42:50.290

一些 Liferay 类在初始化静态字段常量时读取它们的属性。例如：

```
public static final boolean ENABLED = GetterUtil.getBoolean(
    PropsUtil.get(DynamicCSSFilter.class.getName())); 
```

基本上，可以重新加载属性（例如通过控制面板中的脚本），但所有这些静态常量都将保留。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-23T21:41:16.723

如果您创建一个挂钩来覆盖门户属性，则只需部署挂钩即可更改属性，而无需重新启动门户。

请注意，您不能使用挂钩修改所有属性。有关可以修改的列表，请查看：[https](https://docs.liferay.com/portal/6.2/definitions/) ://docs.liferay.com/portal/6.2/definitions/ 。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-02T14:23:48.617

我刚刚搜索了重新加载portal-ext.properties 并登陆这里。好的 - 这不是 Liferay 中的一个功能。

所以我会用一个我喜欢的老把戏：

1.  将自定义属性放在 (liferay-tomcat-home)/conf/filename.properties
2.  随时重新加载它们

    ```
    Properties customProperties = new Properties();
    customProperties.load(new FileInputStream(new File(System.getProperty("catalina.base"), "conf/filename.properties"))); 
    ```

我必须承认我没有在 Liferay-Portlet-Environment 中尝试过这个，但是这个系统属性（“catalina.base”）应该在这个上下文中可用，至少通过使用一些 Liferay-Helper-Class。

# emacs - Emacs: Bernt Hansen's Life in a plaintext - Sample git repo？

> ID：11931385
> 
> 赞同：7
> 
> 时间：2012-08-13T09:22:01.037
> 
> 标签：emacs, org-mode

* * *

是否有一个示例 git 存储库在纯文本帖子中遵循 Bernt Hansen 的生活？

[doc.norang.ca/org-mode.html](http://doc.norang.ca/org-mode.html)

这篇文章很鼓舞人心，如果我们有一个准备好使用 git-repo 以及文章中概述的所有设置，那就太好了。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-13T11:59:16.527

您可以在此处下载此网页的 .org 源代码：http: [//doc.norang.ca/org-mode.org](http://doc.norang.ca/org-mode.org)

然后你可以评估 emacs-lisp 代码。

详情请咨询邮件列表。

# c++ - 用于将 SVG 转换为栅格的 C/C 库。

> ID：11931390
> 
> 赞同：4
> 
> 时间：2012-08-13T09:22:16.600
> 
> 标签：c++, c, svg, rasterizing

有谁知道一些免费或非免费的库，用于将 svg 转换为光栅图像（最好是 png）。

我看到有 ImageMagic、GraphicMagic、librsvg。但我无法弄清楚如何使用它们或适合我的问题。我需要从我的代码中以编程方式进行转换。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T09:26:00.750

呈现 SVG 的规范库是[librsvg](http://librsvg.sourceforge.net/)。

你可能想检查一下。

试试这个[链接](http://www.libpng.org/pub/png/pngcode.html)...

它对你很有用..

# android - cocos2d-x 1.0.1-x-0.13.0-beta 的 Classes 文件夹中没有 android.mk 文件

> ID：11931392
> 
> 赞同：0
> 
> 时间：2012-08-13T09:22:21.860
> 
> 标签：android, cocos2d-x

我在 android cocos2d-x 项目中运行 build_native.sh 时遇到问题。原来是一些链接问题。我创建的 cpp 文件未编译，因此成为未定义的引用。

这是错误：

```
SoybeanServer-2:android soybeansoft$ ./build_native.sh 
Using prebuilt externals
make: Entering directory `/Users/soybeansoft/devs/cocos2d-x_1.0/MemeQuiz/android'
SharedLibrary  : libgame.so
./obj/local/armeabi/objs/game_shared/__/__/Classes/AppDelegate.o: In function `AppDelegate::applicationDidFinishLaunching()':
/Users/soybeansoft/devs/cocos2d-x_1.0/MemeQuiz/android/jni/../../Classes/AppDelegate.cpp:111: undefined reference to `MainMenu::scene()'
./obj/local/armeabi/objs/game_shared/__/__/Classes/HelloWorldScene.o: In function `HelloWorld::okButtonCallback(cocos2d::CCObject*)':
/Users/soybeansoft/devs/cocos2d-x_1.0/MemeQuiz/android/jni/../../Classes/HelloWorldScene.cpp:179: undefined reference to `Logic::select()'
./obj/local/armeabi/objs/game_shared/__/__/Classes/HelloWorldScene.o: In function `HelloWorld::newQuiz()':
/Users/soybeansoft/devs/cocos2d-x_1.0/MemeQuiz/android/jni/../../Classes/HelloWorldScene.cpp:172: undefined reference to `Logic::getCurrentQuiz()'
/Users/soybeansoft/devs/cocos2d-x_1.0/MemeQuiz/android/jni/../../Classes/HelloWorldScene.cpp:173: undefined reference to `Logic::getCurrentQuiz()'
./obj/local/armeabi/objs/game_shared/__/__/Classes/HelloWorldScene.o: In function `HelloWorld::swipeRight()':
/Users/soybeansoft/devs/cocos2d-x_1.0/MemeQuiz/android/jni/../../Classes/HelloWorldScene.cpp:151: undefined reference to `Logic::nextImage()'
./obj/local/armeabi/objs/game_shared/__/__/Classes/HelloWorldScene.o: In function `HelloWorld::swipeLeft()':
/Users/soybeansoft/devs/cocos2d-x_1.0/MemeQuiz/android/jni/../../Classes/HelloWorldScene.cpp:145: undefined reference to `Logic::previousImage()'
./obj/local/armeabi/objs/game_shared/__/__/Classes/HelloWorldScene.o: In function `~HelloWorld':
/Users/soybeansoft/devs/cocos2d-x_1.0/MemeQuiz/android/jni/../../Classes/HelloWorldScene.cpp:16: undefined reference to `Logic::unregisterEventHandler()'
/Users/soybeansoft/devs/cocos2d-x_1.0/MemeQuiz/android/jni/../../Classes/HelloWorldScene.cpp:30: undefined reference to `LogicEvent::~LogicEvent()'
/Users/soybeansoft/devs/cocos2d-x_1.0/MemeQuiz/android/jni/../../Classes/HelloWorldScene.cpp:16: undefined reference to `Logic::unregisterEventHandler()'
/Users/soybeansoft/devs/cocos2d-x_1.0/MemeQuiz/android/jni/../../Classes/HelloWorldScene.cpp:30: undefined reference to `LogicEvent::~LogicEvent()'
./obj/local/armeabi/objs/game_shared/__/__/Classes/HelloWorldScene.o: In function `HelloWorld':
/Users/soybeansoft/devs/cocos2d-x_1.0/MemeQuiz/android/jni/../../Classes/HelloWorldScene.cpp:9: undefined reference to `Logic::Logic()'
/Users/soybeansoft/devs/cocos2d-x_1.0/MemeQuiz/android/jni/../../Classes/HelloWorldScene.cpp:9: undefined reference to `Logic::Logic()'
./obj/local/armeabi/objs/game_shared/__/__/Classes/HelloWorldScene.o: In function `HelloWorld::imageChanged()':
/Users/soybeansoft/devs/cocos2d-x_1.0/MemeQuiz/android/jni/../../Classes/HelloWorldScene.cpp:161: undefined reference to `Logic::getCurrentImage()'
/Users/soybeansoft/devs/cocos2d-x_1.0/MemeQuiz/android/jni/../../Classes/HelloWorldScene.cpp:162: undefined reference to `MemeImage::setImage(char const*)'
./obj/local/armeabi/objs/game_shared/__/__/Classes/HelloWorldScene.o: In function `HelloWorld::init()':
/Users/soybeansoft/devs/cocos2d-x_1.0/MemeQuiz/android/jni/../../Classes/HelloWorldScene.cpp:83: undefined reference to `MemeImage::MemeImage()'
/Users/soybeansoft/devs/cocos2d-x_1.0/MemeQuiz/android/jni/../../Classes/HelloWorldScene.cpp:90: undefined reference to `Logic::init(float)'
/Users/soybeansoft/devs/cocos2d-x_1.0/MemeQuiz/android/jni/../../Classes/HelloWorldScene.cpp:91: undefined reference to `Logic::registerEventHandler(LogicEvent*)'
/Users/soybeansoft/devs/cocos2d-x_1.0/MemeQuiz/android/jni/../../Classes/HelloWorldScene.cpp:93: undefined reference to `Logic::getCurrentQuiz()'
/Users/soybeansoft/devs/cocos2d-x_1.0/MemeQuiz/android/jni/../../Classes/HelloWorldScene.cpp:94: undefined reference to `Logic::getCurrentQuiz()'
/Users/soybeansoft/devs/cocos2d-x_1.0/MemeQuiz/android/jni/../../Classes/HelloWorldScene.cpp:96: undefined reference to `Logic::getCurrentQuiz()'
/Users/soybeansoft/devs/cocos2d-x_1.0/MemeQuiz/android/jni/../../Classes/HelloWorldScene.cpp:102: undefined reference to `Logic::getCurrentImage()'
/Users/soybeansoft/devs/cocos2d-x_1.0/MemeQuiz/android/jni/../../Classes/HelloWorldScene.cpp:103: undefined reference to `MemeImage::setImage(char const*)'
./obj/local/armeabi/objs/game_shared/__/__/Classes/HelloWorldScene.o:(.data.rel.ro+0x1d0): undefined reference to `typeinfo for LogicEvent'
collect2: ld returned 1 exit status
make: *** [obj/local/armeabi/libgame.so] Error 1
make: Leaving directory `/Users/soybeansoft/devs/cocos2d-x_1.0/MemeQuiz/android'
SoybeanServer-2:android soybeansoft$ 
```

有人说我需要列出我在 Classes 文件夹中的 Android.mk 文件中创建的所有 cpp 文件。但是在我查看 Classes 文件夹后，那里没有 Android.mk。那么我现在应该如何列出 .cpp 文件呢？

更新 ：

我知道 jni 文件夹中有 android.mk 文件。但即使我在那里列出了我所有的游戏 cpp 文件，cpp 仍然没有在 build_native 过程中编译。所以我真的不知道如何列出我的 cpp 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T08:35:39.553

android.mk 文件将位于 eclipse 项目的 jni 文件夹中。看那边。

# django - Django：过滤掉重复的查询结果

> ID：11931393
> 
> 赞同：0
> 
> 时间：2012-08-13T09:22:22.037
> 
> 标签：django, django-queryset

我有一个模型：

```
class Item(models.Model):
    date = models.DateField() 
```

我想为每个日期选择其中一个对象，没有重复。

因此，如果数据库中有 100 个项目，其日期为 1/1/12 或 1/2/12，我想返回两个对象的列表（一个用于 1/1/12，一个用于 1/ 2/12）。

我不确定这种查询的术语，所以在寻找答案时遇到了麻烦。

我目前正在使用此查询：

```
item_list = Item.objects.distinct('date') 
```

但它没有像我预期的那样工作。

任何帮助appriciated。

谢谢阅读。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T09:32:24.913

你在使用 Postgress SQL 吗？Django 文档说 distinct on fields 仅适用于该数据库。此外，您必须在使用`order_by`之前使用`distinct()`.

检查文档：[django distinct](https://docs.djangoproject.com/en/dev/ref/models/querysets/#distinct)

# sql - 如何通过正确的 Key 关系避免表中的不良数据条目？

> ID：11931394
> 
> 赞同：0
> 
> 时间：2012-08-13T09:22:25.467
> 
> 标签：sql, constraints

我有 3 张桌子。小部件、小部件类型、小部件类型 ID。我在他们之间建立了直接的关系。如何避免错误数据进入基于`Widget_type`和`Widget_sub_Type`. 请看我的代码。只是少了一件小事。

```
Create table widgets (
        Widget_ID int not null primary key,
        Widget_type_ID int not null,
        Widget_Sub_type_ID int,
        Widget_Name varchar (50)
        )

Create table Widget_Type (
        Widget_Type_ID int not null primary key,
        )

Create table Widget_Sub_type (
        Widget_Sub_Type_ID int not null primary key,
        Widget_Type_ID int not null
        )

---adding foregin key constraints

Alter table widgets
    ADD constraint FK_Widget_Type
    FOREIGN KEY (Widget_type_ID)
    References Widget_Type (Widget_type_ID)

Alter table widgets
    ADD constraint FK_Widget_Sub_Type
    FOREIGN KEY (Widget_Sub_type_ID)
    References Widget_SUB_Type (Widget_SUB_type_ID)

Alter table widget_Sub_Type
    ADD Constraint FK_Widget_Type_Alter
    Foreign key (widget_Type_ID)
    References Widget_Type (Widget_Type_ID)

---- insert values
insert Widget_Type values (1)
insert Widget_Type values (5)

insert Widget_Sub_type values (3,1)
insert Widget_Sub_type values (4,1)
insert Widget_Sub_type values (7,5)
insert Widget_Sub_type values (9,5)

-- This will error out which is correct
insert Widget_Sub_type values (5,6)

select * from Widget_Sub_type
select * from Widget_type

--Good
insert widgets (Widget_ID,Widget_Name, Widget_type_ID, Widget_Sub_type_ID)
        values (1, 'TOY', 1, 3)

select * from widgets
--Good
insert widgets (Widget_ID,Widget_Name, Widget_type_ID, Widget_Sub_type_ID)
        values (2, 'BatMan', 5, 7)
-- How to prevenet this, 3 is not sub_type_id of type_ID 5\. This is bad data, It should not be inserted.        
insert widgets (Widget_ID,Widget_Name, Widget_type_ID, Widget_Sub_type_ID)
        values (3, 'Should Not', 5, 3) 
```

# android - 果冻豆搜索键

> ID：11931395
> 
> 赞同：6
> 
> 时间：2012-08-13T09:22:27.223
> 
> 标签：android, android-4.2-jelly-bean

在我的 Android 应用程序中，我使用清单中的这种机制，通过我的许多活动中的搜索键来触发我的特定应用程序搜索

```
 <meta-data 
        android:name="android.app.default_searchable"
        android:value=".Search.SearchActivity" /> 
```

与适当的搜索活动。直到最近，这一切都很好。

随着果冻豆更新，搜索键现在总是启动 Google NOW 搜索功能。

在这个网站上：[http](http://www.android.com/about/jelly-bean/) ://www.android.com/about/jelly-bean/我在“谷歌搜索”部分找到了这个声明：

```
"For devices with a hardware search key, you can tap it to launch Google Search." 
```

谷歌是否完全接管了这个密钥的所有使用，或者有没有办法恢复它？

如果我无法恢复它，那么几乎所有活动中的 UI 设计都会更改，以添加搜索菜单选项或操作按钮......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T09:33:04.393

这样做是为了规避专利问题。这主要只在美国完成，苹果最近在美国获得了关于 Galaxy Nexus 的禁令。因此，从现在开始，美国的所有 Android 手机都将显示此行为。所以果冻豆中的大多数应用程序都有一个屏幕搜索按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-23T15:56:02.143

如果你有一个基于 cyanogenmod 的手机（例如像我这样的 HTC DHD 的 jellytime），旧的行为只是一个设置：

菜单/系统设置/系统/硬件键/搜索/应用内搜索

但是这种更改浪费了我相当多的时间来调试我的应用程序和研究以找到这个解决方案。不用说我讨厌专利，尤其是可笑的专利：像操作系统向应用程序发送硬件关键事件这样的明显行为可以申请专利？？？

# php - 一次为多个用户提供 PHP $_SESSION

> ID：11931401
> 
> 赞同：32
> 
> 时间：2012-08-13T09:22:44.703
> 
> 标签：php, arrays, security, session, login

我想知道 $_SESSION 数组是如何工作的。如果我有很多用户使用我的网站，我需要为每个用户设置一个子数组吗？例如现在我有

```
$_SESSION['userid'] = $userid;
$_SESSION['sessionid'] = $sessionid;
$_SESSION['ipaddress'] = $ipaddress; 
```

但是为了应对更多的用户，我需要制作一个多维数组吗？

```
$_SESSION[$userid]['sessionid'] = $sessionid;
$_SESSION[$userid]['ipaddress'] = $ipaddress; 
```

$_SESSION 全局是按客户端处理还是整体处理？在登录时设置 $_SESSION['userid'] 会踢出前一个用户并设置最新登录的用户吗？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-08-13T09:23:42.080

没有。为每个用户单独`$_SESSION`创建一个。这一切都由服务器完成，您不必担心。编写代码时，将其`$_SESSION`视为站点上只有一个用户。

编辑：实际上，仔细想想，这是一个很好的问题。问这些问题很好，这意味着你在认真思考你的代码是如何*真正工作*的。继续问这些问题，并继续测试。我有一种感觉，有一天你会写出一些*很棒的*代码。

所以在那张纸条上，这里有一些来自[apache](http://httpd.apache.org/docs/2.4/mod/mod_session.html)网站的信息：

*什么是会话？*

会话接口的核心是一个键值对表，可以跨浏览器请求访问。根据使用会话的应用程序的需要，可以将这些对设置为任何有效字符串。

*在服务器上保持会话*

Apache 可以配置为跟踪存储在特定服务器或服务器组上的每个用户会话。此功能类似于典型应用程序服务器中可用的会话。

如果已配置，会话将通过使用存储在 cookie 中的会话 ID 进行跟踪，或者从嵌入在 URL 查询字符串中的参数中提取，如典型的 GET 请求中所示。

并来自Sessions 上的[PHP 文档：](http://www.php.net/manual/en/book.session.php)

PHP 中的会话支持包括一种在后续访问中保留某些数据的方法。这使您能够构建更多定制的应用程序并增加您网站的吸引力。

访问您的网站的访问者被分配一个唯一的 id，即所谓的会话 id。这要么存储在用户端的 cookie 中，要么在 URL 中传播。

会话支持允许您将请求之间的数据存储在 $_SESSION 超全局数组中。当访问者访问您的站点时，PHP 将自动检查（如果 session.auto_start 设置为 1）或根据您的请求（显式通过 session_start() 或隐式通过 session_register()）检查是否已随请求发送了特定会话 ID。如果是这种情况，则重新创建先前保存的环境。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2019-09-21T07:48:23.930

经过大量搜索并在会议上工作后，我找到了自己的方式。我希望它对这里的每个人都有效

这是我的用户的登录页面查询：在匹配来自 mysql 的数据后，我将电子邮件存储为来自输入字段的会话

```
<?php
include_once("dbcon.php");
$que=mysqli_query($con,"select * from agents where companyemail='$email' AND 
pass='$password' AND post != 'Owner'"); 
$record = mysqli_fetch_assoc($que);
$_SESSION[$email]=$email;
header("Location:/dashboard/woresk/Dashboard_For_Agents/light/index.php? 
&loginid=$agentid");
?> 
```

然后在用户的仪表板中有一个注销选项，我使用了这种方法

```
<?php
session_start();
include_once("dbcon.php");
$sid=$_GET['loginid'];
$que=mysqli_query($con,"select * from agents where id='$sid'"); 
$recorde = mysqli_fetch_assoc($que);
$email=$recorde['companyemail'];
unset($_SESSION[$email]); 
header('location:/dashboard/woresk/index.php');
?> 
```

并避免用户在未登录或未设置会话时进入仪表板，以下代码对我很有用

```
<?php
session_start();
include_once("dbcon.php");
$sid=$_GET['loginid'];
$que=mysqli_query($con,"select * from agents where id='$sid'"); 
$recorde = mysqli_fetch_assoc($que);
$email=$recorde['companyemail'];
if(isset($_SESSION[$email]) && isset($_SESSION['alllogout'])){

 }
 else if(!isset($_SESSION[$email])){
    echo 
    "<script>
      window.location.href='/dashboard/woresk/index.php'
    </script>";
  }
  else if (!isset($_SESSION['alllogout'])){
    echo 
    "<script>
      window.location.href='/dashboard/woresk/index.php'
    </script>";
  }
  ?> 
```

我希望这也适用于其他人。如果有任何问题请告诉我

# objective-c - layer.position.y 和 layer.frame.origin.y 有什么区别？

> ID：11931405
> 
> 赞同：3
> 
> 时间：2012-08-13T09:22:58.510
> 
> 标签：objective-c, ios, core-graphics

似乎一个直接指向图层，另一个指向框架，但它们在功能上有何不同？他们都确定了同一个视图的位置……

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T09:26:25.490

框架的原点是框架的左上角，而位置是（只要你不改变锚点）框架的中心。

# php - 使用 codeigniter 发送电子邮件

> ID：11931406
> 
> 赞同：0
> 
> 时间：2012-08-13T09:22:59.693
> 
> 标签：php, codeigniter, email

我正在尝试使用 CodeIgniter 框架发送一封电子邮件，它对我有用，当我尝试将我的消息插入视图并加载该视图时，将我的消息标识为该视图，以及当我检查发送的消息时它的问题是一条空消息...我想知道怎么了：

```
 $data = array(

              'Message'=>       $message, 
              'SenderEmail'=>   $senderEmail,
              'SenderName'=>    $senderName, 
              'SenderImage'=>   $senderImage
            );

           $messageView = $this->load->view('user/SendEmail',$data);

           $params = array(
             'RecieverId'=>$recieverId,

             'Message'=> $messageView
           ); 
```

收到的消息是空的，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T09:24:59.657

尝试：

`$messageView = $this->load->view('user/SendEmail',$data, true);`

它告诉 CodeIgniter 将视图的内容作为返回值返回，而不是将其输出到浏览器；）

希望有帮助。

加文

# javascript - 多条测地线折线上的动画符号

> ID：11931415
> 
> 赞同：1
> 
> 时间：2012-08-13T09:23:37.587
> 
> 标签：javascript, google-maps-api-3, overlay, polyline, geodesic-sphere

我想通过多条测地线多段线为符号设置动画……我厌倦了在 for 循环中执行此操作。线条被绘制但圆圈（符号）没有动画......它只是停留在起点这是我的代码。

```
 var poly;
    var geodesic;
    var map;
    var clickcount = 0;

    function initialize() {

        var styles = [{ featureType: "landscape", stylers: [{ color: "#000514"}] }, { featureType: "administrative.country", stylers: [{ weight: 0.1 }, { color: "#009acd"}] }, { featureType: "water", stylers: [{ color: "#1f4fa5dc"}] }, { featureType: "road", stylers: [{ color: "#000514"}] }, { featureType: "administrative.locality", stylers: [{ color: "#7cfc00" }, { visibility: "off"}] }, { featureType: "landscape.man_made", stylers: [{ visibility: "off"}] }, { featureType: "poi", stylers: [{ visibility: "off"}] }, { featureType: "administrative.province", stylers: [{ visibility: "on"}]}];
        var mapOptions = {
            center: new google.maps.LatLng(7.3, 80.6333),
            zoom: 3,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById("map_canvas"),
        mapOptions);
        map.setOptions({ styles: styles });

        var lineSymbol = {
            path: google.maps.SymbolPath.CIRCLE,
            scale: 2,
            strokeColor: '#FF0000'
        };

        var i;
        for (i = 0; i < 50; i = i + 5) {

            var flightPlanCoordinates = [
            new google.maps.LatLng(7.3, 80.6333),
            new google.maps.LatLng(23.772323 + i, -102.214897 - i)];
            var polyline = new google.maps.Polyline({
                path: flightPlanCoordinates,
                icons: [{ icon: lineSymbol, offset: '100%'}],
                strokeColor: "#FF0000",
                strokeOpacity: 1.0,
                strokeWeight: 1,
                geodesic: true                  
            });

            polyline.setMap(map);
            animateCircle();
        }
    }

    function animateCircle() {
        var count = 0;
        offsetId = window.setInterval(function () {
            count = (count + 1) % 200;

            var icons = polyline.get('icons');
            icons[0].offset = (count / 2) + '%';
            polyline.set('icons', icons);
        }, 20);
    } 
```

请帮我解决这个问题..我很想看到这项工作:) 非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T09:37:50.550

您的折线变量超出了 animateCircle 函数的范围。您必须使用闭包，从 animateCircle 函数中获取代码并将其粘贴到它的调用位置*应该*可以解决问题。

编辑：我像往常一样搞砸了关闭;-)你可以这样做（再次，未经测试）：

```
//vars
var poliylines = new Array();

function initialize() {
    //unchanged code

    var i;
    for (i = 0; i < 50; i = i + 5) {
        //unchanged code
        polylines[i] = polyline;
        animateCircle(i);
    }
}

function animateCircle(var id) {
    var count = 0;
    offsetId = window.setInterval(function () {
        count = (count + 1) % 200;

        var icons = polylines[id].get('icons');
        icons[0].offset = (count / 2) + '%';
        polylines[id].set('icons', icons);
    }, 20);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-23T12:09:59.787

找到了这个问题的简单答案。我正在使用谷歌地图 api v3。[https://developers.google.com/maps/documentation/javascript/examples/overlay-symbol-animate](https://developers.google.com/maps/documentation/javascript/examples/overlay-symbol-animate)

向下滚动并单击**html+javascript 选项卡**，我们有变量**lineCoordinates**。在这里，我们可以传递一组对象而不是像这样的 2 个对象：

```
var lineCoordinates = [
new google.maps.LatLng(latitude1, longitude1),
new google.maps.LatLng(latitude2, longitude2),
new google.maps.LatLng(latitude3, longitude3),
new google.maps.LatLng(latitude4, longitude4)
]; 
```

动画现在将在 lineCoordinates 中的所有对象上发生。在这个例子中，有 4 条折线。

# java - t.replace 不是 selenium RC 中的函数

> ID：11931416
> 
> 赞同：0
> 
> 时间：2012-08-13T09:23:39.850
> 
> 标签：java, selenium, webdriver, payment-gateway

我将 selenium 2.25 与 firefox 3.6 一起使用，并且在运行脚本时遇到了问题。

以下是我的控制台和系统中显示警报消息的错误`"Type error $j undefined"`

```
ERROR: Command execution failure. Please search the forum at http://clearspace.openqa.org for error details from the log window.  The error message is: t.replace is not a function 
```

我可以知道这里有什么问题吗，我使用的脚本早些时候运行良好，但是从上周开始，当我运行我的脚本时，eclipse 显示错误如上。

硒版本：2.25

操作系统：Windows 7.0

浏览器：火狐

浏览器版本：3.6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T09:05:32.700

t.replace 不是一个函数，通常是由于尝试在 JavaScript 中对 null 执行替换而引起的。

我怀疑您正在尝试在所有 JavaScript 完成加载之前与页面上的某些内容进行交互，这会导致错误。这将是间歇性的，因为有时页面会完全加载并且页面上的 JavaScript 会正确处理。而在其他时候，Selenium 可能会太快进入那里。

通常让您的开发人员检查他们的 JavaScript 代码，有一条路径会导致对 null 执行替换。他们应该有一些代码来防止这样的事情，这是由质量差的代码引起的。

基本上你发现了一个错误。

# linux - GCC/G++：在没有 GNU 唯一对象符号的情况下为旧版 Linux 内核构建

> ID：11931420
> 
> 赞同：6
> 
> 时间：2012-08-13T09:23:52.330
> 
> 标签：linux, gcc

我目前正在为大量代码更新构建系统，其中恰好包括一个 Linux C++ 项目。如果这里的所有开发人员都可以在使用自己的想法时运行构建，那就太好了，所以我正在研究是否有可能在模糊的现代 Linux 系统上构建它，尽管目标系统是 2.6.18。

通过“模糊的现代”，我估计像 GCC 4.5+ 这样的东西，过去一两年的发行版可能会附带一些东西。目前，我通过静态编译解决了 libstdc++ 问题，并且任何 glibc 问题都可以通过使用一些快速包装代码重新映射到旧版本的 memcpy 符号（等等）来巧妙地解决。到现在为止还挺好。

我似乎无法完全弄清楚的一个问题是，从 .o 文件构建到可执行文件中的某些符号的类型为“u”，这是 GNU 唯一对象，是 2.6.18 不支持的 ELF 标准的扩展好像完全不认识。这意味着可执行文件不会运行，因为它找不到符号，尽管它们实际上存在（只是目标上的类型“？”，来自“nm”）。

编译 G++ 时可以禁用 GNU 唯一对象，但这并不是最方便的解决方案。在编译代码时我看不到任何方法来禁用它（发行版 gcc/g++ 总是有这个选项），我想让目标系统识别它的唯一方法是更新 ld-linux 和内核. 这几乎肯定不会发生。

有没有我没有找到禁用这些符号类型的选项？或者也许有一些巧妙的方法可以解决这个问题，或者我错过了什么？我开始怀疑它只需要在 G++ 4.1.x 上编译，这意味着旧的 Linux 安装或从源代码构建。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T23:55:05.180

我试图处理同样的问题（这导致我找到了这个问题），经过大量研究得出明确的结论，不，你没有遗漏任何东西，除了编译你自己的 g++ 之外没有其他办法。在 gcc-help 邮件列表中查看这个最近的问题：

[http://gcc.gnu.org/ml/gcc-help/2013-01/msg00008.html](http://gcc.gnu.org/ml/gcc-help/2013-01/msg00008.html)

我比较了 gcc 的来源，发现你可以达到 4.4 的最高价格，因为在 4.5 中添加了独特的符号。然而，在 RHEL/CentOS 6 上，它们默认为 4.4，但在其中修补了唯一符号支持，因此像往常一样必须注意特定于发行版的 gcc 版本。对我来说这是一个巨大的麻烦，因为这意味着在 RHEL 6 上编译的东西不能在 RHEL 5 上运行，即使是为 gcc 4.4 + RHEL 5 制作的 libstdc++ 副本。

顺便说一下，这是首次提出唯一符号支持的消息：

[https://gcc.gnu.org/ml/gcc-patches/2009-07/msg01240.html](https://gcc.gnu.org/ml/gcc-patches/2009-07/msg01240.html)

如果您四处搜索，您会发现人们出于各种原因在其他列表中抱怨它，但我想它会一直存在。

# c - 如何使用 GLib 框架运行单元测试？

> ID：11931422
> 
> 赞同：6
> 
> 时间：2012-08-13T09:24:02.423
> 
> 标签：c, unit-testing, glib

我正在尝试对使用 GLib 编写的一些 C 代码运行简单的单元测试。我正在尝试做类似的事情：

```
#include <math.h>
#include <stdio.h>

#include <glib.h>

static void 
test_stuff () 
{
  g_assert (1 == 1); //Say
}

int main (int argc, char **argv)
{
  g_test_init (&argc, &argv);
  g_test_add_func ("/TestTest", test_stuff);

  return g_test_run();
} 
```

但是当我编译（比如一个名为 exec 的二进制文件）并尝试使用 gtester 运行它（甚至直接运行所述二进制文件）时，我收到以下错误：

```
me@laptop:tests$ gtester exec
TEST: exec... (pid=6503)

(process:6503): GLib-CRITICAL **: g_test_init: assertion `vararg1 == NULL' failed
FAIL: exec
Terminated 
```

有什么我遗漏的东西，也许我在运行测试时应该通过变量？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-13T09:32:15.083

您缺少该`g_test_init()`函数的参数。[文档](http://developer.gimp.org/api/2.0/glib/glib-Testing.html#g-test-init)将原型显示为：

```
void g_test_init(int *argc,
                 char ***argv,
                 ...); 
```

和：

> ... ：保留以供将来扩展。目前，您必须传递 NULL。

因此，您需要传递 a`NULL`作为第三个参数。

# javascript - 重定向到新颜色框后如何关闭上一个颜色框

> ID：11931424
> 
> 赞同：0
> 
> 时间：2012-08-13T09:24:05.443
> 
> 标签：javascript, jquery, colorbox

我正在尝试从父颜色框打开一个新颜色框，但在重定向到新颜色框时应该关闭父颜色框。我已经尝试了很多搜索堆栈中的内容但没有得到解决方案。

```
<script type="text/javascript">

        $(document).ready(function(){

            $("#btnUpdate").click(function(){

            $.ajax({
                url:"cart.php",
                type:"post",
                data:$("#frmCart").serialize(),
                success:function(result){
                    alert('Product updated to cart!');  
                    $.colorbox({html:result});

                    },
                }); 
                parent.$.colorbox.close();
            });

        });
</script> 
```

# java - perl 脚本显示错误：找不到文件

> ID：11931426
> 
> 赞同：-3
> 
> 时间：2012-08-13T09:24:08.557
> 
> 标签：java, perl

我正在尝试运行以下 perl 脚本，但它显示错误。所需的文件是我将它们放在脚本文件的同一目录中。

```
#! /usr/bin/perl

@attackFileList=("_perParamDefaut_URLs.txt", "_perParam_URLs.txt", "_Cartesian_URLs.txt", "_Random_URLs.txt");
@legitFileList=("_Legit_URLs.txt");

$app=$ARGV[0];

print "Testing $app\n";
$startTime=time();
$attackCaught=$notCaught=$syntaxError=$other=$total=$error=$redirect=$success=0;
for $fileEnding (@attackFileList) {
    $fileName="$app$fileEnding";
    open(inputFile, "D:\\$app/$fileName") || die "Could not open $fileName\n";
    while ($line=<inputFile>) {
        chomp $line;
        @wget = split / /, $line;

        if ($wget[1] ne "--post-data") {
                        $wget[1] =~ s/"/\\"/g;
                $wget[1] =~ s/`/\\`/g;
                $wget[1] =~ s/_nosessions/_current/;
                $wget[1] =~ s/endeavor.cc.gt.atl.ga.us/localhost:8080/;
                $wget[1] =~ s/^\\"(.*)\\"$/"\1"/;
                $command=$wget[0]." -O - "."\"".$wget[1]."\"";
        } else {
                $wget[2] =~ s/"/\\"/g;
                $wget[2] =~ s/`/\\`/g;
                $wget[3] =~ s/_nosessions/_current/;
                $wget[3] =~ s/endeavor.cc.gt.atl.ga.us/localhost:8080/;
            $wget[2] =~ s/^\\"(.*)\\"$/"\1"/;
            $command=$wget[0]." -O - ".join(" ", $wget[1], $wget[2], $wget[3]);
        }

        $output=`$command 2>&1`;
        $retValue=$?>>8;
        if (($retValue == 0)||($output=~/302 Moved Temporarily/)) {
            if ($output=~/amnesia\.SQLIAException/) {
                    $attackCaught++;
                #print errorLog "PolicyViolationException:\n \t$wget[3]\n\t$wget[2]\n\t$command\n\n";
                } elsif ($output=~/amnesia\.UndetectedSQLIA/) {
                    $notCaught++;
                print errorLog "UndetectedSQLIA:\n \t$wget[3]\n\t$wget[2]\n\t$command\n\n";
                } elsif ($output=~/lexer\.SQLLexerException/) {
                    $syntaxError++;
                #print errorLog "SyntaxError:\n \t$wget[3]\n\t$wget[2]\n\t$command\n\n";
                } else {
                if ($output=~/302 Moved Temporarily/) {
                    $redirect++;
                }
                    $other++;
            }
            $success++;
        } else {
            $error++;
        }
        $total++;
        if (($total % 100) == 0) {print "$total, ";}
    }
    close(inputFile);
}
print "\n";
$endTime=time();

$elapsedTime=$endTime-$startTime;

print "**Testing Results: Attack**\n";
print "Total: $total\n";
print "\tValid URL requests: $success\n";
print "\t\tSQLIA detected: $attackCaught\n";
print "\t\tUndetected: $notCaught\n";
print "\t\tSyntax Errors: $syntaxError\n";
print "\t\tOther: $other\n";
print "\t\t\tRedirects: $redirect\n";
print "\tError URL requests: $error\n";
$omitted=$total-$error-$success;
print "\tOmitted: $omitted\n";
print "\nTime: $elapsedTime seconds\n";

open (outFile, ">>Effective.results") || die "Could not open Effective.results\n";
print outFile "$app-attk\t$total\t$success\t$attackCaught\t$notCaught\t$syntaxError\t$other\t$error\t$omitted\n";
close(outFile);

$startTime=time();
$attackCaught=$notCaught=$syntaxError=$other=$total=$error=$redirect=$success=0;
foreach $fileEnding (@legitFileList) {
    $fileName="$app$fileEnding";
    open(inputFile, "$app/$fileName") || die "Could not open $fileName\n";
    while ($line=<inputFile>) {
        chomp $line;
        @wget = split / /, $line;

        if ($wget[1] ne "--post-data") {
            $wget[1] =~ s/"/\\"/g;
                $wget[1] =~ s/`/\\`/g;
            $wget[1] =~ s/_nosessions/_current/;
            $wget[1] =~ s/endeavor.cc.gt.atl.ga.us/localhost:8080/;
            $wget[1] =~ s/^\\"(.*)\\"$/"\1"/;
                    $command=$wget[0]." -O - "."\"".$wget[1]."\"";
        } else {
            $wget[2] =~ s/"/\\"/g;
                        $wget[2] =~ s/`/\\`/g;
            $wget[3] =~ s/_nosessions/_current/;
            $wget[3] =~ s/endeavor.cc.gt.atl.ga.us/localhost:8080/;
            $wget[2] =~ s/^\\"(.*)\\"$/"\1"/;
            $command=$wget[0]." -O - ".join(" ", $wget[1], $wget[2], $wget[3]);
        }

        $output=`$command 2>&1`;
        $retValue=$?>>8;
        if (($retValue == 0)||($output=~/302 Moved Temporarily/)) {
            if ($output=~/amnesia\.SQLIAException/) {
                    $attackCaught++;
                print errorLog "SQLIAException:\n\t$wget[3]\n\t$wget[2]\n\t$command\n\n";
                } elsif ($output=~/amnesia\.UndetectedSQLIA/) {
                    $notCaught++;
                print errorLog "UndetectedSQLIA:\n \t$wget[3]\n\t$wget[2]\n\t$command\n\n";
                } elsif ($output=~/lexer\.SQLLexerException/) {
                    $syntaxError++;
                print errorLog "SyntaxError:\n \t$wget[3]\n\t$wget[2]\n\t$command\n\n";
                } else {
                if ($output=~/302 Moved Temporarily/) {
                    $redirect++;
                }
                    $other++;
            }
            $success++;
        } else {
            $error++;
        }

        $total++;
        if (($total % 100) == 0) {print "$total, ";}
    }
    close(inputFile);

}
print "\n";
$endTime=time();
close(errorLog);
$elapsedTime=$endTime-$startTime;

print "**Testing Results: Legit**\n";
print "Total: $total\n";
print "\tValid URL requests: $success\n";
print "\t\tSQLIA detected: $attackCaught\n";
print "\t\tUndetected: $notCaught\n";
print "\t\tSyntax Errors: $syntaxError\n";
print "\t\tOther: $other\n";
print "\t\t\tRedirects: $redirect\n";
print "\tError URL requests: $error\n";
$omitted=$total-$error-$success;
print "\tOmitted: $omitted\n";
print "\nTime: $elapsedTime seconds\n";

open (outFile, ">>Effective.results") || die "Could not open Effective.results\n";
print outFile "$app-legit\t$total\t$success\t$attackCaught\t$notCaught\t$syntaxError\t$other\t$error\t$omitted\n";
close(outFile); 
```

调用：perl script.bat 门户

结果：无法打开文件 portal_perParamDefault_URLs.txt

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T10:59:46.977

你的编码很糟糕，但我建议你的问题的答案可能是你的意思是`_perParamDefault_URLs`你在哪里`_perParamDefaut_URLs`？

在要求其他人抽出时间来帮助您之前，请有礼貌地正确格式化您的代码，以便它可读，添加`use strict`到`use warnings`您的程序顶部，并使用`my`接近它们的第一个使用点声明您的所有变量。

您还应该使用词法文件句柄，即 的三参数形式`open`，并将`$!`变量添加到 die 字符串的内容中。样板调用`open`应该看起来像

```
open my $fh, '<', $filename or die "Unable to open '$filename': $!"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T09:39:02.493

Windows 路径可以用斜杠而不是反斜杠来处理，或者更好地使用`File::Spec`它来处理它，如：

```
my $full_path = File::Spec->catpath( "D", $app, $fileName )
open( inputFile, $full_path) or die $!; 
```

# hibernate - HQL 检索过去 365 天的记录

> ID：11931428
> 
> 赞同：2
> 
> 时间：2012-08-13T09:24:18.097
> 
> 标签：hibernate, db2, hql

在我的 DB2 数据库中，我有一个表，其中存储了一些员工信息以及用于存储记录插入时间的时间戳。

通过使用 HQL，我需要检索过去 365 天创建的记录。任何人都可以帮我找到合适的 HQL 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T10:44:03.243

您可以将查询参数化并作为参数提供过去 365 天的日期。此外，如果首选第一天的所有条目，您还可以将时间字段设置为零。

```
Calendar c = Calendar.getInstance();
c.add(Calendar.DAY_OF_YEAR, -365);
Date d = c.getTime();

List<EntityA> result = 
    em.createQuery("SELECT a FROM EntityA a where a.dateField > :param")
      .setParameter("param", d)
      .getResultList(); 
```

# c# - 为什么“扔前”；隐藏原始堆栈跟踪

> ID：11931432
> 
> 赞同：6
> 
> 时间：2012-08-13T09:24:44.030
> 
> 标签：c#

> **可能重复：**
> [在 C# 中重新引发异常的正确方法是什么？](https://stackoverflow.com/questions/178456/what-is-the-proper-way-to-re-throw-an-exception-in-c)

我想了解为什么“throw ex”用法会隐藏原始堆栈跟踪？在设计 c# 编译器时，幕后的基本理念是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-13T09:28:17.703

这实际上不是 C# 问题，而是 CLI 设计问题，归结为不同的 IL 指令[`throw`](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.throw.aspx)和[`rethrow`](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.rethrow).

基本上，`throw ex;`（对于任何`ex`，甚至是原始的）是一个 IL `throw`，其中 -`throw;`是一个 IL `rethrow`。

如果您要指定要抛出的**特定**异常，则该异常逻辑上源自此处，现在，此方法。如果不是这种情况，那么：

```
throw; 
```

而不是`throw ex;`, or:将异常***包装***在另一个异常中，这样您就可以保留原始异常*并*显示新异常的来源：

```
throw new SomeException(ex); 
```

在这种情况下，调用者可以通过`ex.InnerException`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T09:29:00.060

当你捕捉到一个异常时，它的“出生地”在其他地方，异常在堆栈跟踪中被带到它被抛出的地方。将其视为`throw`初始化`Exception`类实例的堆栈跟踪。所以用当前堆栈`throw ex;`初始化堆栈跟踪。`ex`

# c# - C#中的方面方向

> ID：11931438
> 
> 赞同：0
> 
> 时间：2012-08-13T09:25:24.360
> 
> 标签：c#, aspect

我有一个`FTPDataTransfer`具有状态（`FTPDataTransferState`）的类。此类提供了许多传输方法，例如`ReceiveData`（重载）`SendData`，...我如何将状态更改为`Ready`，，`Transfer`...而不改变每个传输方法中的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T10:31:41.360

.NET 的领先 AOP 工具包是[PostSharp](http://www.sharpcrafters.com/)。它在您的情况下的工作方式是您定义一个自定义属性，指定在执行该方法时应设置的状态，将该属性应用于适当的方法，并定义（在一个地方）代码设置/重置状态。当输入/离开方法时，该工具包将使该代码运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T10:48:22.257

您可以为此使用[PostSharp 。](http://www.sharpcrafters.com/)更详细地说，[`OnMethodBoundaryAspect`](http://www.sharpcrafters.com/blog/post/Day-4-OnMethodBoundaryAspect.aspx)是您要使用的方面。在你的情况下，它可能看起来像：

```
using PostSharp.Aspects;

[Serializable]
public sealed class ReadyOnExit : OnMethodBoundaryAspect
{
    public override void OnExit(MethodExecutionArgs args)
    {
        var state = (FTPDataTransferState)args.Instance;
        state.Transfer(FTPDataTransferState.Ready);
    }
} 
```

# c# - 检索所有子类中的所有 winforms 组件

> ID：11931445
> 
> 赞同：1
> 
> 时间：2012-08-13T09:25:41.393
> 
> 标签：c#, .net, winforms, .net-4.0, user-controls

我想检索属于 Form 或 UserControl 的组件集合的所有组件。组件集合由 VS winforms 设计器添加。components 变量是私有的，问题是如何从所有后代中检索所有组件。我想要一个通过类型层次结构返回组件列表的方法。例如，假设我有 MyForm（BaseForm 的后代）和 BaseForm（Form 的后代）。我想输入方法“GetComponents”，它返回 MyForm 和 BaseForm 的组件。

除了使用反射之外，您还有其他选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T08:21:09.507

前段时间我实现了一个解决方案，在该解决方案中我创建了自定义基本表单和控件实现，添加了一个属性并覆盖了 OnLoad 方法：

```
public partial class FormBase : Form   
{
    public FormBase ()
    {
        this.InitializeComponent();
    }

    protected ConsistencyManager ConsistencyManager { get; private set; }

    protected override void OnLoad(System.EventArgs e)
    {
        base.OnLoad(e);

        if (this.ConsistencyManager == null)
        {
            this.ConsistencyManager = new ConsistencyManager(this);
            this.ConsistencyManager.MakeConsistent();
        }
    }
} 
```

ConsistencyManager 类查找所有控件、组件，还支持在特定控件中搜索自定义子控件。从 MakeConsistent 方法复制/粘贴代码：

```
 public void MakeConsistent()
    {
        if (this.components == null)
        {
            List<IComponent> additionalComponents = new List<IComponent>();

            // get all controls, including the current one 
            this.components =
                this.GetAllControls(this.parentControl)
                .Concat(GetAllComponents(this.parentControl))
                .Concat(new Control[] { this.parentControl });

            // now find additional components, which are not present neither in Controls collection nor in components
            foreach (var component in this.components)
            {
                IAdditionalComponentsProvider provider = GetAdditinalComponentsProvider(component.GetType().FullName);

                if (provider != null)
                {
                    additionalComponents.AddRange(provider.GetChildComponents(component));
                }
            }

            if (additionalComponents.Count > 0)
            {
                this.components = this.components.Concat(additionalComponents);
            }
        }

        this.MakeConsistent(this.components);
    } 
```

如果有人想要完整的样本或来源，请告诉我。

最好的问候，兹冯科

PS：以同样的方式，我还创建了计算主线程调用次数的性能计数器。

# jquery - WPF 网页浏览器 HTML 5

> ID：11931446
> 
> 赞同：0
> 
> 时间：2012-08-13T09:25:53.080
> 
> 标签：jquery, .net, wpf, html, browser

我将 WPF WebBrowser 控件拖到我的 Blend 项目中，然后将源分配为 HTML5 页面。我想在我的 WPF 应用程序中使用 LobsterPot HTML5 PivotViewer(url: LobsterPot HTML5 PivotViewer)。

页面加载，然后我在浏览器顶部收到一条通知，说活动内容已被阻止，当我单击允许时，屏幕保持空白。屏幕上不显示任何内容。任何人都可以指导我并解释我哪里出错了......

```
<Window
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"    
    x:Class="CheckLobster.MainWindow"
    x:Name="Window"
    Width="640" Height="480" UseLayoutRounding="True" WindowStartupLocation="CenterScreen" WindowState="Maximized" Title="HTML 5 Pivot Viewer Sample"
    ResizeMode="CanResizeWithGrip">

    <StackPanel Orientation="Vertical" Margin="5" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
        <StackPanel Orientation="Horizontal">
            <Button x:Name="BackButton" Content="Back" Margin="5" Cursor="Hand" ToolTip="Press this button to navigate to the previous page" FontWeight="ExtraBold" MouseLeftButtonDown="BackButton_MouseLeftButtonDown"/>
            <Button x:Name="NextButton" Content="Next" Margin="5" Cursor="Hand" ToolTip="Press this button to navigate to the next page." FontWeight="ExtraBold" MouseLeftButtonDown="NextButton_MouseLeftButtonDown"/>
            <TextBox x:Name="UriFieldTextBox" TextWrapping="Wrap" Margin="10,5,5,5" VerticalContentAlignment="Stretch" ToolTip="Enter the Web Address that you wanted to navigate to and press the Go Button" HorizontalAlignment="Right" MinWidth="300"/>
            <Button x:Name="GoButton" Content="Go" HorizontalAlignment="Right" Margin="5" FontWeight="ExtraBold" ToolTip="Press this button to navigate to the specified page." Cursor="Hand" MouseLeftButtonDown="GoButton_MouseLeftButtonDown"/>

        </StackPanel>

        <WebBrowser x:Name="MyWebBrowser" Margin="0" MinHeight="600"  VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Loaded="MyWebBrowser_Loaded" />

    </StackPanel>
</Window>

public partial class MainWindow : Window
    {
        public MainWindow()
        {
            this.InitializeComponent();

            // Insert code required on object creation below this point.
        }

        private void BackButton_MouseLeftButtonDown(object sender, System.Windows.Input.MouseButtonEventArgs e)
        {
            // TODO: Add event handler implementation here.
            MyWebBrowser.GoBack();
        }

        private void GoButton_MouseLeftButtonDown(object sender, System.Windows.Input.MouseButtonEventArgs e)
        {
            // TODO: Add event handler implementation here.
            MyWebBrowser.Navigating += new NavigatingCancelEventHandler(MyWebBrowser_Navigating);
            MyWebBrowser.Navigated += new NavigatedEventHandler(MyWebBrowser_Navigated);
            string address = UriFieldTextBox.Text.ToString().Trim();
            MyWebBrowser.Navigate(new Uri(address,UriKind.RelativeOrAbsolute));
        }

        private void NextButton_MouseLeftButtonDown(object sender, System.Windows.Input.MouseButtonEventArgs e)
        {
            // TODO: Add event handler implementation here.
            MyWebBrowser.GoForward();
        }

        private void MyWebBrowser_Loaded(object sender, System.Windows.RoutedEventArgs e)
        {
            // TODO: Add event handler implementation here.
            MyWebBrowser.Navigating += new NavigatingCancelEventHandler(MyWebBrowser_Navigating);
            MyWebBrowser.Navigated+=new NavigatedEventHandler(MyWebBrowser_Navigated);
            Uri uri = new Uri("C:\\Users\\Manthravadi\\Desktop\\lobsterpothtml5pivotviewer-0.6.8\\examples\\PASS Summit 2011.html",UriKind.Absolute);
            MyWebBrowser.Source= uri;
        }

        void MyWebBrowser_Navigating(object sender,NavigatingCancelEventArgs args){
            MessageBox.Show("Page is Loading ...\n\nPlease wait");
        }

        void MyWebBrowser_Navigated(object sender, NavigationEventArgs args){
            MessageBox.Show("Page has been Loaded ...!");
        } 
```

此外，当我在 UriFieldTextBox 中键入诸如“http://google.com”（不带引号）之类的地址并按“执行”按钮时，没有加载页面，有人可以解释我哪里出错了吗？

~ 哈沙

# perl - 告诉 perl 编译器在循环内缓存值

> ID：11931447
> 
> 赞同：1
> 
> 时间：2012-08-13T09:25:56.387
> 
> 标签：perl, optimization, loops, keyword

有没有办法告诉/强制 perl 编译器在循环中缓存值？

当然我可以在循环之外创建我的值，但是随着代码复杂性的增加，我发现在循环内部创建值更具可读性，尽管它们不会改变

例如：

```
my $key = shift;
my @input = @_;
my %output;
foreach(@input) {
    my $output_tmp = specialOperation($_);
    ...
    my $key_tmp = constantOperation($key);
    my $specialKey = specialOperation2($_,$key_tmp);
    ...
    $output{$specialKey} = $tmp;
} 
```

`$keyTmp`在每次迭代中都有相同的值，我希望编译器缓存它

在正则表达式中，您可以使用`o-flag`
是否有类似的东西（例如关键字）来完成此操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T09:41:24.427

通过如下更改代码实际上并没有引入任何额外的复杂性：

```
my $key_tmp = constantOperation($key);
my %output
foreach ( @input ) {
    my $output_tmp = special_operation($_);
    my $specialKey = specialOperation2($_,$key_tmp);
    $output{$specialKey} = $tmp;
} 
```

但是暂时接受你有一个合理的未公开论据来解释你为什么不想这样做，另一种可能性（如果 constantOperation 是一个纯函数）是使用 Memoize。

```
use Memoize;
memoize 'constantOperation';

my $key = shift;
my @input = @_;
my %output;
foreach( @input ) {
    my $output_tmp = special_operation;
    my $key_tmp = constantOperation($key);
    my $specialKey = specialOperation2($_,$key_tmp);
    $output{$specialKey} = $tmp;
} 
```

后者并不能避免重复的函数调用，但确实会在名为 constantOperation 的函数内引起缓存，因此使用先前使用的参数的后续调用将提供缓存的结果。

回到第一个示例，您可以将“my”声明移出循环，然后在循环中使用如下内容 `$key_tmp //= constantOperation($key);`：这可能是这样的：

```
my $key = shift;
my @input = @_;
my %output;
my $key_tmp;
foreach( @input ) {
    my $output_tmp = special_operation;
    $key_tmp //= constantOperation($key);
    my $specialKey = specialOperation2($_,$key_tmp);
    $output{$specialKey} = $tmp;
} 
```

而这就是 Perl，总有另一种方法可以做到这一点。启用“状态”功能，然后更改`my $key_tmp`为`state $key_tmp`. 这可能是这样的：

```
use feature 'state';
my $key = shift;
my @input = @_;
my %output;
foreach( @input ) {
    my $output_tmp = special_operation;
    state $key_tmp = constantOperation($key);
    my $specialKey = specialOperation2($_,$key_tmp);
    $output{$specialKey} = $tmp;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T10:26:25.853

在循环外声明`$key_tmp`，然后在循环内检查它是否已经被分配，然后再重新计算：

```
my ($key, @input) = @_;
my %output;
my $key_tmp;

foreach(@input) {
    my $output_tmp = specialOperation($_);
    ...
    $key_tmp = constantOperation($key) unless $key_tmp;
    my $specialKey = specialOperation2($_,$key_tmp);
    ...
    $output{$specialKey} = $tmp;
} 
```

# vb.net - 具有紧凑数据的 Crystal Report 报表

> ID：11931449
> 
> 赞同：0
> 
> 时间：2012-08-13T09:26:05.867
> 
> 标签：vb.net, crystal-reports

我有这种桌子

```
Name | Month | Usage
-------------------------

A    |  1    |  30 pcs

A    |  5    |  4 pcs

B    |  2    |  11 pcs

C    |  5    |  90 pcs 
```

是否可以在 vb.net 中创建看起来像这样的水晶报告？

```
 |                    MONTH
  Name    | Jan | Feb | Mar | Apr | May | Jun | Jul | Aug | Sep | Oct | Nov | Dec 
 =================================================================================
   A      | 30  | 0   | 0   | 0   | 4   | 0   | 0   | 0   | 0   | 0   | 0   | 0   

   B      | 0   | 11  | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   

   C      | 0   | 0   | 0   | 0   | 90  | 0   | 0   | 0   | 0   | 0   | 0   | 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:15:11.280

Consider using a cross-tab object.

# java - 在调试窗口中的 onPostExecute() 之后 AsyncTask 仍在运行

> ID：11931451
> 
> 赞同：0
> 
> 时间：2012-08-13T09:26:12.107
> 
> 标签：java, android, android-asynctask, terminate

我有一个创建 android 应用程序的程序。

该程序的主类使用**Async Tasks**进行连接，然后请求数据。连接和请求数据都是通过一个按钮启动的，并且在这两种情况下都会显示一个进度条。

当我为**connect启动****异步任务**时，程序会按照预期运行**onPreExecute()**、**doInBackground()**、**onProgressUpdate()**和**onPostExecute()**方法。

 ******但是在**onPostExecute()**之后，当我查看调试器窗口时，**AsyncTask**仍在运行并继续运行。然后当我请求数据时，会创建一个新的**AsyncTask**并且我有两个正在运行。

我如何终止第一个**AsyncTask**（实际上是第二个完成后），因为在使用该程序一段时间后，我最终仍然有大约 20 个**AsyncTask**线程仍在运行！

我在下面包含了我的代码：

```
private ProgressDialog connectionDialog;
private ProgressDialog requestDataDialog;

private ProgressDialog usingDialog;

private int currentDialog;

public void connectClick(View view) //When the connect button is clicked
{
    currentDialog = 1;

    new PerformTask().execute();
}

private class PerformTask extends AsyncTask<Void, Integer, Integer> 
{
    protected void onPreExecute()
    {
        showDialog(currentDialog);
    }

    protected Integer doInBackground(Void... voi) 
    {
        int total = 0;

        //Perform the task required

        publishProgress(total);

        return total;
    }

    protected void onProgressUpdate(Integer... progress) 
    {
        usingDialog.setProgress(progress[0]);
    }

    protected void onPostExecute(Integer result) 
    {
        removeDialog(currentDialog);
    }
}

protected Dialog onCreateDialog(int id) 
{   
    //Setup the dialogs
}

public void requestDownloadClick(View view)
{
    currentDialog = 2;

    new PerformTask().execute();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T09:28:24.317

只是为了完整性，所以我可以接受这个问题，这里是 grv_9098 给出的答案，在 stackoverflow.com/a/3077508/1514187 找到：

AsyncTask 管理一个使用 ThreadPoolExecutor 创建的线程池。它将有 5 到 128 个线程。如果线程数超过 5 个，这些多余的线程最多会停留 10 秒，然后才会被移除。（注意：这些数字是针对目前可见的开源代码，并因 Android 版本而异）。

请不要管 AsyncTask 线程。******

# c++ - 为什么不将模板类型参数推断为“const”？

> ID：11931452
> 
> 赞同：7
> 
> 时间：2012-08-13T09:26:19.553
> 
> 标签：c++, templates, constants, type-parameter

> **可能重复：**
> [从右值参数推导出对 const 的引用](https://stackoverflow.com/questions/6075093/deducing-references-to-const-from-rvalue-arguments)

如果我有

```
template<class T>
void foo(T &) { } 
```

我称它为`foo((const int)5)`，鉴于参数是 a `const int`，为什么编译器不自动推断`T`为`const int`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-13T09:36:46.030

根据 C++03 标准第 2.12.1.2 节，整数文字的类型是`int`，而不是。`const int`

> 整数文字的类型取决于它的形式、值和后缀。如果它是十进制且没有后缀，则它具有可以表示其值的第一种类型：int、long int；...

**更新**

另一个相关的类型扣除规则可能是 14.8.2.1.2。

> 如果 P 不是引用类型：
> 
> [...]
> 
> — 如果 A 是 cv 限定类型，则忽略 A 类型的顶级 cv 限定符进行类型推导。
> 
> 如果 P 是 cv 限定类型，则 P 类型的顶级 cv 限定符将被忽略以进行类型推导。
> 
> 如果 P 是引用类型，则使用 P 所引用的类型进行类型推导。

OP 提供的代码甚至无法编译，因为将非常量引用绑定到右值是非法的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-13T10:05:06.930

如果它被赋予 const 类型，它确实如此。然而，具有非类类型的右值（C++11 中的右值）永远不是 cv 限定的，即使您试图说它们是：表达式`((const int)5)`具有 type `int`。这里的推理是 cv 限定只适用于对象，非类类型的临时对象不是对象，而是纯值；cv-qualifications 不能适用，因为没有什么是`const`or `volatile`。

如果你写：

```
int const i = 42;
foo( i ); 
```

，您的模板将使用`T = int const`. （正如你写的那样，代码不应该编译，因为推导的类型是`int`，所以函数需要一个`int&`，它不能用右值初始化。）

# javascript - jQuery, Javascript : 封装在 jQuery(), $() 中的 Javascript - 这是什么意思？

> ID：11931459
> 
> 赞同：0
> 
> 时间：2012-08-13T09:26:34.493
> 
> 标签：javascript, jquery

我无法理解一种 jQuery 选择，我希望有人能清楚地向我解释。

它取自[这个 Stack Overflow question](https://stackoverflow.com/questions/7193425/how-do-you-animate-fb-canvas-scrollto)。

基本上，它有常见的 jQuery: `$( selector )`.

但在里面它有`$({ y: iFrameScrollY })`。

我以前从未见过这种情况。**括号内有****和****是什么意思？`{ ... }``someVal: anotherVal`**

*另外，请为这个问题推荐一个不同的标题，以便其他人更容易找到它。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T09:33:28.797

将纯 JavaScript 对象包装在 jQuery 对象中，您可以使用一些 jQuery 方法，包括：.data()、.prop()、.bind()、.unbind()、.trigger() 和 .triggerHandler()。

下面是一个取自 jQuery.com 的示例：

```
// define a plain object
var foo = {foo:'bar', hello:'world'};

// wrap this with jQuery
var $foo = $(foo);

// test accessing property values
var test1 = $foo.prop('foo'); // bar

// test setting property values
$foo.prop('foo', 'foobar');
var test2 = $foo.prop('foo'); // foobar

// test using .data() as summarized above
$foo.data('keyName', 'someValue');
console.log($foo); // will now contain a jQuery{randomNumber} property

// test binding an event name and triggering
$foo.bind('eventName', function (){
        console.log('eventName was called');
});

$foo.trigger('eventName'); // logs 'eventName was called' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T09:34:39.373

什么`$({ y: iFrameScrollY })`是围绕 JavaScript 对象包装一个 jQuery 选择器对象`{ y: iFrameScrollY }`。

声明了 JavaScript 对象`{ y: iFrameScrollY }`，这意味着它包含一个名为`y`set 的属性，其值为`iFrameScrollY`。

通过将对象包装到 jQuery 对象中，可以利用对包装对象执行 jQuery 方法。

有关更多详细信息，请参阅此[**文档**](http://api.jquery.com/jQuery/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T09:32:49.773

这是对函数的调用，该[`jQuery()`](http://api.jquery.com/jQuery/#jQuery1)函数被重载以执行许多不同的事情，具体取决于传递的参数。

`{someVal : anotherVal}`是一个 JavaScript 对象，其属性名为，`someVal`其值等于`anotherVal`变量的值。

如果您将这两条信息结合在一起，并查看链接页面，您会看到：

> jQuery（对象）
> 
> object 要包装在 jQuery 对象中的普通对象。

# actionscript-3 - 是否可以在 Microsoft PixelSense（以前的 Surface）表上运行多点触控 Flash (AS3) 应用程序？

> ID：11931463
> 
> 赞同：0
> 
> 时间：2012-08-13T09:26:48.720
> 
> 标签：actionscript-3, flash, pixelsense

我想为 Microsoft PixelSense（以前的 Surface）表开发一个简单的多点触控游戏。所以我的问题是是否可以使用 Flash（ActionScript 3）来创建游戏，或者我是否必须学习 PixelSense SDK 并使用 Visual Studio——这将花费大量时间；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T08:38:48.673

更新：是的，这是可能的 ;) 借助 Flash 的多点触控功能，可以为 PixelSense 表进行开发。

# html - 删除标题栏周围的边框

> ID：11931464
> 
> 赞同：0
> 
> 时间：2012-08-13T09:26:50.530
> 
> 标签：html, css

好的，我这个浅灰色的显示接近标题栏中“独立新闻”中的曲线它实际上是背景显示，而不是寄宿生。

[链接到图片](http://hostmypicture.com/?v=example.)

我有这个作为我的 html ，我认为它在一个表中有一个表导致了这个？但不确定。

```
<div id="contentwrapper">
    <!-- NEWS START -->
    <table width="100%"><tr><td>
        <div class="rounded">
            <div class="rounded_top">
                <div>Indie News</div>
            </div>
            <div class="rounded_content">
                <font align='Right'><a href="#" >Submit Your Story</a> </font>           
            </div>
            <div class="rounded_bottom">
            </div>
        </div> <!-- end of rounded-->
        <table><tr><td align='center'>
            <div id='coin-slider'>
                <a href="images/newsimage/minecraft1.jpg" target="_blank">
                    <img src='images/newsimage/minecraft1.jpg' >
                    <span>
                    Minecraft still an indy game?
                    </span>
                </a>
                <a href="images/newsimage/spider1.jpg">
                    <img src='images/newsimage/spider1.jpg' >
                    <span>
                    Spider just released!
                    </span>
                </a>
            </div><!--end of coin slider-->
        </td></tr></table><!--end of coinslider table-->
    </td></tr></table><!--end of news start table-->

    <!-- Reviews start -->
    <!-- Review #1 -->
    <table style="border:none;">
        <tr>
            <th rowspan="4" width="30%" bgcolor='#7e7e7e'><IMG SRC="images/review image/dj.jpg" ALT="Dinomight jack"></th>
            <td><a href="#" style="text-decoration:none" >Review of Dynimite Jack </a>
            </td>
        </tr>
        <tr>
            <td>By <i>Bob Bobby</i></td>
        </tr>
        <tr>
            <td>Now here's a surprisingly nice piece of news. Stealthy demolition game Dynamite Jack has already been a reasonable .</td>
        </tr>
        <tr>
            <td bgcolor='#7e7e7e'><a href="#" > 0 comments</a> | <a href="#" >Leave a comment</a> </td>
        </tr>
    </table><!--end of review table-->

</div><!--end of contenet wrapper--> 
```

还有css..

```
 /***************/
/* CONTENT */
/***************/
#contentwrapper{
display: table-cell;
width: 700px;
background: #919191;
border: None;

}

#contentcolumn{
margin: 0 20% 0 20%; /*Margins for content column. Should be "0 RightColumnWidth 0 LeftColumnWidth*/
}

#contentwrapper table {
border: none;
width: 100%;/*around 700 max for images*/
border-collapse: collapse;
}

/***************/
/*content round box*/
/***************/
.rounded {
   background: #000000;
   width: auto;
}
.rounded_top div {
   background:  url(../images/up-left641.png) no-repeat top left;
}
.rounded_top {
   background: url(../images/up-right641.png) no-repeat top right;
}
.rounded_bottom div {
   background: url(../images/down-left641.png) no-repeat bottom left;
}
.rounded_bottom {
   background: url(../images/down-right641.png) no-repeat bottom right;
}

.rounded_top div, .rounded_top, 
.rounded_bottom div, .rounded_bottom {
   width: auto;
   height: 25;
   font-size: 24px;
   font-weight:bold;
   text-align:center;
   color:#ffffff;
padding:-40px;
}
.rounded_content { margin: 0 20 0 20;}
.rounded { color:#000000;} 
```

欢迎所有建议。谢谢格伦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T09:33:03.480

在创建网站时重置样式以确保浏览器之间的兼容性通常是一个好主意。风格会是这样的：

```
*{
 margin:0;
 padding:0;
 border:0;
} 
```

你可以在这里更详细地看到这一点：[http ://www.cssreset.com/](http://www.cssreset.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T09:32:50.423

嗨，现在**定义** `#contentwrapper, .rounded` `border raius`

```
#contentwrapper, .rounded{
border-radius:20px 20px 0 0;
-webkit-border-radius:20px 20px 0 0;
-moz-border-radius:20px 20px 0 0;
} 
```

# apache-camel - 为什么我不能写这条骆驼路线？

> ID：11931465
> 
> 赞同：0
> 
> 时间：2012-08-13T09:27:02.767
> 
> 标签：apache-camel

```
from("e1")
  .split()
     .method("bean", "m1")
     .to("e2")
  .end()
  .split()
     .method("bean", "m2")
     .to("e3"); 
```

编译器抱怨 2nd `to`。原因是由于某种原因，它认为第二个`split`返回`ExpressionCaluse`而不是`ExpressionClause<SplitDefinition>`，这导致下面的`method`返回类型是`Object`而不是`SplitDefinition`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T20:13:18.380

我在 Eclipse 中尝试过，首先我得到了和你一样的结果（eclipse 代码完成显示错误）。然后我重写了路线（例如，将其与分配分开

```
ProcessorDefinition pd = from("e1").... 
pd.split()... 
```

然后，回到原始代码，最终 Eclipse 得到了正确的想法，错误标记消失了。我不知道你是否也在尝试eclipse？

```
@Override
public void configure() throws Exception {
            from("e1")
              .split()
                 .method("bean", "m1")
                 .to("e2")
              .end()
              .split().method("bean", "m2")
                 .to("e3");
        } 
```

我的意思是，它应该工作。ProcessorDefinition 中 split() 的签名是正确的：

```
public ExpressionClause<SplitDefinition> split() 
```

我想这是我开发中某个地方的一个小故障。环境。也可能是你的……或者什么。奇怪，反正。

# ruby-on-rails-3 - simple_captcha_valid？总是返回 false

> ID：11931471
> 
> 赞同：1
> 
> 时间：2012-08-13T09:27:28.707
> 
> 标签：ruby-on-rails-3, captcha

我在我的 rails 3 应用程序中使用[simple_captcha 。](https://github.com/galetahub/simple-captcha/)我有一个请求报价的表格，但在我的控制器中

```
if simple_captcha_valid? 
```

总是返回假。

日志说它得到空键值

```
SimpleCaptcha::SimpleCaptchaData Load (1.0ms)  SELECT `simple_captcha_data`.* FROM `simple_captcha_data` WHERE `simple_captcha_data`.`key` IS NULL LIMIT 1 
```

请帮忙..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T20:33:27.070

在这里聚会有点晚了，但我遇到了同样的问题，并在 repo 上打开了一个拉取请求，以使验证码验证是幂等的。似乎验证码条目在您第一次验证时被删除，这既令人惊讶又被代码所掩盖（谓词方法在内部调用 bang 方法）。确保你没有多次验证你的模型，你应该没问题。

# iphone - iOS中的本机Facebook应用程序登录状态

> ID：11931473
> 
> 赞同：1
> 
> 时间：2012-08-13T09:27:34.353
> 
> 标签：iphone

如何以编程方式检查用户是否登录到本机 facebook 应用程序或没有在我的另一个 iPhone 应用程序中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:35:43.667

你不能检查那个。Facebook SDK 将允许用户登录到您的应用程序。但它不支持任何方式来检查用户是否在 facebook 应用程序中登录。

# android - 安卓权限管理器

> ID：11931476
> 
> 赞同：1
> 
> 时间：2012-08-13T09:27:44.887
> 
> 标签：android

我正在编写一个 android 应用程序来管理所有用户安装应用程序的包的权限。

我能够列出来自 /data/app 的所有用户安装应用程序，以及应用程序正在使用它的所有包。

我想知道如何修改安装应用程序包的权限？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:41:32.507

您不能使用任何 api 修改其他应用程序包的权限。您将需要一个自定义 ROM 来执行此操作。

# c++ - C++中C NULL函数指针的等价物？

> ID：11931478
> 
> 赞同：2
> 
> 时间：2012-08-13T09:27:49.680
> 
> 标签：c++, c, oop, function-pointers, vtable

C 中实现“面向对象”的常见做法是使用函数指针数组。这似乎类似于 C++ vtable，本质上 C++ 虚函数机制只是围绕函数指针数组的语法糖。
但是 C 机制有一个 C++ 中缺少的附加特性。函数指针可以为 NULL，调用者可以检查函数是否为 NULL 以查看对象是否实现了某个方法。然而，在 C++ 中，方法不能为 NULL，并且类不能“不实现”方法。

在 C++ 中模仿这种行为的最接近的方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-13T09:32:17.460

这种做法有时被称为[胖接口](http://en.wikipedia.org/wiki/Interface_bloat)，被认为是一种反模式。

正确的面向对象的方式是提供几个子类的层次结构，即将“可选”方法分离到一个额外的接口中，并且只让一些类实现该接口。

您可以通过*测试*一个类是否是相关接口的实例来测试它是否实现了这些方法。

（顺便说一句，在 C 中也是如此——虽然我从未在严肃的项目中使用过 C，但我怀疑你应该`NULL`在那里使用函数指针，而不是对适当的类型层次结构建模。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T09:31:21.687

我不认为这是对 C++ 的有效使用。在 C++ 中，您应该对接口进行编程。该方法存在或不存在。您似乎将 C++ 视为简单的带有类的 C。有点多了。

界面要么说有方法，要么说没有。这提供了 C 不会提供的编译时安全性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T09:31:43.387

有一个在基类中抛出异常（让我们称之为`not_implemented`）的基本虚函数。

无论如何，您通常不想这样做。如其他评论中所述，您最好有一个适当的类层次结构。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T09:33:46.193

最接近的方法是设计一个类层次结构来准确建模 C 风格的 vtable 实现的内容。

两个具有不同数量元素的函数指针 (vtables) 数组正在对两个单独的类进行建模。这是很明显的，但也应该清楚的是，即使数组的大小相同，具有不同数量*非空元素的 vtable 也可以对单独的类进行建模。*

例如，假设我们有一个 vtable 和两个像这样聚合它的对象：

```
 VTABLE                 OBJECT A               OBJECT B
   STRUCTURE
+-------------+        +-------------+        +-------------+
| pfnCreate   |        | 0x.....     |        | 0x.....     |
+-------------+        +-------------+        +-------------+
| pfnUpdate   |        | 0x.....     |        | NULL        |
+-------------+        +-------------+        +-------------+
| pfnDelete   |        | 0x.....     |        | 0x.....     |
+-------------+        +-------------+        +-------------+ 
```

这两个对象不属于同一个类（至少使用类的 C++ 定义），因此您不能仅使用一个类对事态进行建模也就不足为奇了。翻译成 C++，这看起来像

```
class Something {
public:
    void Create();
    void Delete();
};

class UpdatableSomething : public Something {
public:
    void Update();
} 
```

其中 B 是 a`Something`并且 A 是 a `UpdatableSomething`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T21:26:59.430

听起来您正在尝试在运行时进行兼容性检查。有几种方法可以构建类层次结构，您可以使用胖接口，其中基类实现所有可能的派生函数，如果派生类不覆盖实现，则让它们在执行时抛出错误。这就是你在 C 中所做的事情。

另一种更理想的方法是通过能力类和使用多重继承来混合能力。

查看第 9-11 页，了解有关设计和实施的更多详细信息。

[http://www.umich.edu/~eecs381/lecture/IdiomsDesPattsStructural.pdf](http://www.umich.edu/~eecs381/lecture/IdiomsDesPattsStructural.pdf)

# xslt - 将十进制小时转换为小时分钟和秒

> ID：11931481
> 
> 赞同：4
> 
> 时间：2012-08-13T09:27:55.500
> 
> 标签：xslt, xslt-1.0

xslt 1.0 中是否有更优雅的解决方案？我知道 xslt 2.0 有内置函数。

我以十进制小时数取一个数字，需要将其表示为 HH:MM:SS。目前我有以下功能很好。

```
<xsl:variable name="decimal_hours" select="pre_lab_cost div pre_labour_rate"/>
<xsl:variable name="decimal_minutes" select="number(concat('0.',substring-after($decimal_hours, '.')))*60"/>
<xsl:variable name="decimal_seconds" select="number(concat('0.',substring-after($decimal_minutes, '.')))*60"/>
<xsl:value-of select="concat(format-number(floor($decimal_hours), '00'),
                                           ':',
                                           format-number(floor($decimal_minutes), '00'),
                                           ':',
                                           format-number(floor($decimal_seconds), '00')
                                           )"/> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-13T14:55:57.317

这个怎么样 ...

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="text"/>

<xsl:variable name="decimal_hours" select="3.14"/>

<xsl:template match="/">
<xsl:value-of select="concat(
  format-number(floor($decimal_hours              ), '00:'),
  format-number(floor($decimal_hours *  60 mod  60), '00:'),
  format-number(floor($decimal_hours * 360 mod 360), '00'))"/>
</xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-20T04:35:42.587

以防万一有人遇到我刚才遇到的问题，上面的答案很精彩，但我需要将十进制分钟转换为小时：分钟：秒。因此，如果需要，以下是帮助解决此问题的细分，请减少一些...

```
<xsl:value-of select="concat(
  format-number(floor($Decimal_Minutes div 60), '00:'),
  format-number(floor($Decimal_Minutes mod 60), '00:'),
  format-number(($Decimal_Minutes - floor($Decimal_Minutes)) * 60, '00'))"/> 
```

# c# - 如何在程序集中包含来自另一个命名空间的类，而不是将它们写入单独的 DLL 文件？

> ID：11931489
> 
> 赞同：2
> 
> 时间：2012-08-13T09:28:37.787
> 
> 标签：c#, namespaces

我有一个`C#`有两个命名空间的项目。`Stoff3GUI`一个带有 GUI`xaml`和文件的 GUI（作为命名空间） `.cs`，标记为起始对象和一个库（`Stoff3Lib`作为命名空间），所有类都在做实际工作。

现在，当我编译我的代码时，我会收到一个`.exe`文件`Stoff3GUI.exe`和一个`.dll` `Stoff3Lib.dll`. 在 Visual Studio 中，两个命名空间都是同一个项目的一部分。

如何在不生成单独文件的情况下将类从文件编译`Stoff3Lib`到文件中？`.exe``.dll`

**编辑：**

更改`xxx`为我的项目名称 Stoff3 以便更好地理解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-02T19:12:31.947

我相信您真正拥有的是带有 2 个项目的 1 个 Visual Studio 解决方案。

由于一张图片值 1000 个字，并且只是为了澄清术语，这就是 VS2012 中的样子：

![两个项目](../Images/c1c2241c2a073a589230ea593312dbea.png)

此解决方案的输出正是您所描述的：

*   TwoProjects\Stoff3GUI\bin\Debug\Stoff3GUI.exe
*   TwoProjects\Stoff3Lib\bin\Debug\Stoff3Lib.dll

![在此处输入图像描述](../Images/ee26d06a0fae6b490cdf96e07eb506ea.png)

完成您想要的最简单的方法是拥有一个包含 2 个不同命名空间的 VS 项目。添加与您的预期命名空间结构相匹配的文件夹是一种很好的做法，在您的情况下是 Stoff3GUI 和 Stoff3Lib：

![在此处输入图像描述](../Images/de545183b0338b5657da76f7bcedff43.png)

当您编译此解决方案时，输出将是单个 EXE，但您仍然在文件夹/文件结构中非常清楚地保持模型和视图命名空间的分离：

*   OneProject\bin\Debug\OneProject.exe

![在此处输入图像描述](../Images/f7c4ea7dafc25ec5a175b5278516b792.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T09:33:22.683

如果两个命名空间都是同一个项目的一部分，那么您最终应该只得到一个程序集。

这可能与 Web 项目设置不同（各种不同风格的 Web 项目以我从未理解的时间和方式创建程序集），但对于独立的可执行项目，就我而言，在所有情况下，它确实是“一个项目产生一个程序集”我知道。仔细检查您是否真的只有一个项目 - 例如，您不应该在项目中对程序集有任何*引用*`xxxLib`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T09:36:32.120

我不完全确定你在这里做什么。听起来您可能有一个带有两个项目的“解决方案”我的直接想法是将您想要的类移动到 GUI 启动项目中并删除另一个项目。

# c# - 如何在项目外部动态加载 dll？

> ID：11931491
> 
> 赞同：0
> 
> 时间：2012-08-13T09:28:42.030
> 
> 标签：c#, dll

如何动态加载 DLL？

*请**不要**建议：*

1.  不建议 GAC，因为 DLL 已经制作，无法更改或更新。
2.  不建议使用提示路径，`Assembly.LoadFrom(...)`因为此功能适用于不在项目之外的调试。

如果我将该 DLL/exe 复制到项目外部的测试机器上，则会显示错误：无法加载 .dll。

[我还在MSDN 论坛上](http://social.msdn.microsoft.com/Forums/en/csharpide/thread/99691cc4-27df-48e7-b4aa-377f74109425?prof=required)问了一个问题。

有人可以帮我吗？

谢谢阿什什
_

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T10:14:29.600

[`System.Reflection.Assembly.LoadFile()`](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.loadfile)为此工作得很好。

如果您正在获取[`BadImageFormatException`](http://msdn.microsoft.com/en-us/library/system.badimageformatexception.aspx)，请检查您尝试加载的程序集是否针对与执行加载的程序集相同的平台目标（x86 或 x64）进行编译。

**根据评论更新**

听起来您正在尝试将 .NET 2.0 程序集加载到 .NET 4.0 应用程序中，并且您已经将以下内容放入应用程序配置文件中：

```
<configuration> 
    <startup useLegacyV2RuntimeActivationPolicy="true"> 
        <supportedRuntime version="v4.0" />    
    </startup>
</configuration> 
```

在这种情况下，请检查以确保您的配置文件与可执行文件一起部署在目标机器上。例如，如果你的应用程序被调用`MyProgram.exe`，你的配置文件应该被调用`MyProgram.exe.config`——*并且它需要被复制到与目标机器上的可执行文件相同的文件夹中才能生效*——框架将在启动时加载这个文件，如果它存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T06:56:56.697

1) 尝试使用 assembly.loadfile 函数而不是 loadfrom。它也将在项目之外工作。2）如果你得到程序集混合模式错误，只需要复制xml文件以及bin文件夹中生成的dll。xml文件包含app.config文件数据。app.config 文件中的代码是...

还要检查链接... [http://social.msdn.microsoft.com/Forums/en/csharpide/thread/99691cc4-27df-48e7-b4aa-377f74109425](http://social.msdn.microsoft.com/Forums/en/csharpide/thread/99691cc4-27df-48e7-b4aa-377f74109425)

# forms - Razor - umbraco - 从表单中获取价值并重定向

> ID：11931494
> 
> 赞同：2
> 
> 时间：2012-08-13T09:28:56.663
> 
> 标签：forms, razor, umbraco

我在 Razor 中有一个表单我正在检查 Razor 宏中的表单中的帖子。我正在检查使用内置 IsPost 变量发布的表单。我需要从表单（url）中获取值，然后从页面获取值。

```
form action="" method="POST">                      
<select>
<option>Please Select</option>

@foreach(var item in @Model.events){
     <option value="@item.Url">@item.Name</option>   
       }
 </select>

<button id="SubmitForm" type="submit">Submit Enquiry</button>  
 <p>@Message</p>
 </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T15:39:01.047

您将要提供`select`一个 id，但您应该能够通过访问`select`using`Request`集合的值然后使用`Response.Redirect()`.

例子：

```
if (IsPost)
{
    string url = Request["selectId"] as string;

    if (!string.IsNullOrEmpty(url))
    {
        Response.Redirect(url);
    }
} 
```

# c# - C# 将 Excel 保存为复制

> ID：11931497
> 
> 赞同：0
> 
> 时间：2012-08-13T09:29:02.853
> 
> 标签：c#, excel

经过一些测试，似乎很少有问题。

此代码现在正在复制文件..`File.Copy`操作后，后面的代码应该更新某些单元格，当尝试更新时，它的系统会因错误而崩溃，提示它无法找到特定的单元格 A28。

当将我的代码恢复为简单地覆盖原始代码时，它会找到单元格 - A28 并毫无问题地更新值。

有任何想法吗？

代码原样（覆盖原始模板）：

```
// Declaration of variables 
ClientName = txtClientName.Text;

string newFileName = ClientName + ".xls";

string Filename = "C:\\Template.xls";

//File.Copy(Filename, @"C:\\" + newFileName, true);

// If you are using xls format (2003), use this connection string.

string ConnectionString = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + Filename + ";Extended Properties=\"Excel 8.0;HDR=NO;\"";

string SQL1 = "UPDATE [Cover Sheet$A28:A28] SET F1='" + ClientName + "'";

using (OleDbConnection Connection = new OleDbConnection(ConnectionString))
        {
            Connection.Open();
            using (OleDbCommand cmd1 = new OleDbCommand(SQL1, Connection))
            {
                cmd1.ExecuteNonQuery();
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T09:33:22.730

将所需的新文件名传递给您的程序，复制模板并处理新文件。

```
public void MapToExcelDocument(string newFileName) 
{ 
    // Declaration of variables  
    string templateName = "C:\\Template.xls"; 
    File.Copy(templateName, newFileName, true);

    // If you are using xls format (2003), use this connection string.             
    string ConnectionString = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + 
                               newFileName + ";Extended Properties=\"Excel 8.0;HDR=NO;\""; 

 .... 
```

此更改（调用 File.Copy）需要将此行添加到源代码文件的开头：

```
using System.IO; 
```

这条简单的行告诉编译器您正在使用 System.IO 命名空间中的对象、类、枚举和接口。如果没有该行，您应该在每个类（如 File）前加上其完全限定的命名空间

```
System.IO.FileCopy(templateName, newFileName, true); 
```

如您所见，打字不太方便。

编辑：在下面的评论之后，我将添加另一个提示。
如果您传入一个没有路径的简单文件名，File.Copy 会在当前工作目录中创建新文件。当前工作目录在 Visual Studio 中工作时是`bin/debug`或`bim/release`. 部署应用程序时，当前工作目录将是应用程序启动的目录。

你有一些选择：

*   将完全限定的文件名传递给任意目录（即“C:\MyFiles\destinationFile.xls”）。
*   在配置文件中定义一个路径，并将此路径添加到传入的文件名中。
*   在您的配置文件中定义一个相对路径，并写入一个相对于已知路径（如 MyDocuments）的目录

# ruby - 推荐的 Ruby 交互式控制台

> ID：11931498
> 
> 赞同：2
> 
> 时间：2012-08-13T09:29:10.553
> 
> 标签：ruby, shell

我正在寻找一个好的 Ruby 交互式 shell。我正在寻找的外壳必须具有以下功能：

1.  自动完成
2.  语法高亮
3.  智能识别
4.  以前的命令检索
5.  自动显示函数参数
6.  自动显示功能文档
7.  适用于 Windows
8.  快速响应

如果它具有以下特点，我正在寻找的外壳会很好：

1.  文件名自动补全
2.  编码函数调用时自动添加括号
3.  将窗口划分为历史记录框（包含先前的命令及其输出）和代码框（我在其中编写代码）。[DreamPie](http://dreampie.sourceforge.net/)是一个具有该概念的 Python shell 示例。

对这种 Ruby 交互式 shell 有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T09:40:27.363

当前存在的两个主要 ruby​​ shell 是[irb](http://ruby-doc.org/docs/ProgrammingRuby/html/irb.html)和[pry](http://pryrepl.org/)，它们都不能满足您的所有要求。此外，您可以使用[RubyMine](http://www.jetbrains.com/ruby/)之类的 IDE或通过将插件破解到诸如[Sublime](http://www.sublimetext.com/)之类的文本编辑器中来满足您的更多需求。

拥有像这样一个功能齐全的 ruby​​ shell 对社区来说可能很棒。如果您正在处理一个链接，请删除一个链接:)

# sql - 从具有多个 where 子句的多个表中选择

> ID：11931499
> 
> 赞同：0
> 
> 时间：2012-08-13T09:29:14.193
> 
> 标签：sql, stored-procedures

我正在尝试编写一个存储过程，它将计算表中未删除的所有案例的计数，并`CaseStatusID`在另一个表中按 a 分组，但只有具有`CaseStatusID`未删除的 a 的案例。我还希望它返回任何`CaseStatusID`与它无关的案例（即计数为 0）

到目前为止我已经尝试过

```
 Create Table #tCaseStatus   (CaseStatusID int,CaseStatusDesc varchar(200) )
declare @NofCases int
declare @CaseStatusID int
declare @CaseStatusDesc varchar(200)

BEGIN
    INSERT #tCaseStatus 
    Select CaseStatusID, CaseStatusDesc From dbo.CaseStatus Where IsDeleted = 0
    Select @NofCases = Count(*) From #tCaseStatus
    While (@NofCases > 0)
    Begin
        Select Top (1) @CaseStatusID = CaseStatusID, @CaseStatusDesc = CaseStatusDesc from #tCaseStatus 
        SELECT    CaseStatusDesc, Count(CaseID) AS CountCases
        FROM      Cases inner join #tCaseStatus on Cases.CaseStatusID = #tCaseStatus.CaseStatusID
        WHERE     (IsDeleted = 0) AND Cases.CaseStatusID = @CaseStatusID
        Group by  #tCaseStatus.CaseStatusDesc
        Set @NofCases = @NofCases - 1
        Delete Top(1) from #tCaseStatus
    End
END 
```

和

这将返回正确的案例，但不包括任何计数为 0 的 CaseStatusDesc

```
SELECT     CaseStatus.CaseStatusDesc, COUNT(Cases.CaseID) AS CaseCount
FROM         Cases FULL OUTER JOIN
                  CaseStatus ON Cases.CaseStatusID = CaseStatus.CaseStatusID
WHERE     (CaseStatus.IsDeleted = 0) AND
                  (Cases.IsDeleted = 0)
GROUP BY CaseStatus.CaseStatusDesc, CaseStatus.CaseStatusID
ORDER BY CaseStatus.CaseStatusID 
```

和

这将返回所有 CaseStatusDesc，甚至那些被删除的

```
SELECT CaseStatus.CaseStatusDesc, COUNT(CASE
                                        WHEN CaseStatus.IsDeleted = 0 THEN 'ok'
                                        WHEN Cases.IsDeleted = 0 THEN 'ok'
                                        Else null                                       
                                    END) AS [Case] 
FROM   Cases  FULL OUTER JOIN CaseStatus ON Cases.CaseStatusID = CaseStatus.CaseStatusID
GROUP BY CaseStatus.CaseStatusDesc, CaseStatus.CaseStatusID
Order By CaseStatus.CaseStatusID asc 
```

但我似乎无法得到想要的结果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T10:26:10.723

Is this what you're after?

```
select 
    casestatus.casestatusid,
    casestatusdesc,
    COUNT(caseid)
from casestatus
    left join cases 
        on casestatus.casestatusid = cases.casestatusid
        and cases.isdeleted=0
where
    casestatus.isdeleted=0
group by    
    casestatus.casestatusid,
    casestatusdesc 
```

# asp.net - httphandler 可以触发事件吗？

> ID：11931501
> 
> 赞同：1
> 
> 时间：2012-08-13T09:29:35.693
> 
> 标签：asp.net, ihttphandler

我想在某些页面中检查 Session。为此，我将添加要在 web.config 中检查的页面名称作为`appsetting`键。我想在发现会话为空或其他内容后使用 httpHandler 触发事件。

如果我将 httpHandler 创建为 dll（另一个项目）并添加到网站，处理程序可以触发事件并且网站可以在网页中捕获它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:26:40.113

你可以做的是：

您的 HttpHandler 在集合中放置一个值，`HttpContext.Current.Items`告诉您是否存在 Session。就像是

```
HttpContext.Current.Items.Add("SessionWasThere") = true; 
```

您创建一个 BasePage 来检查`Page_Load`事件中的值并引发一个新事件，告诉您：

```
public abstract class BasePage : Page {
    public event EventHandler NoSession;

    protected override void OnLoad(EventArgs e){  
        var sessionWasThere = (bool)HttpContext.Current.Items.Add("SessionWasThere");
        if(!sessionWasThere && NoSession != null)
            NoSession(this, EventArgs.Empty);
    }
} 
```

在您的页面中，您订阅了该事件：

```
public class MyPage : BasePage{

    protected override void OnInit(){
        NoSession += Page_NoSession;
    }

    private void Page_NoSession(object sender, EventArgs e) {
        //...
    }
} 
```

# c# - 如果验证错误停止回发

> ID：11931508
> 
> 赞同：2
> 
> 时间：2012-08-13T09:29:57.283
> 
> 标签：c#, javascript, jquery, .net, validation

我有以下文本框控件；

```
 <asp:TextBox ID="txtAmount" runat="server" AutoPostBack="true" Width="85px" class="validate[ERExpenseTypeDaterequired,custom[float]]"
                                OnTextChanged="txtAmount_TextChanged"   ></asp:TextBox> 
```

在这里，如果文本框中有任何值变化，`txtAmount_TextChanged`将被调用，因为`AutoPostBack="true"`在控件中有。

因此，如果我们在文本框中输入一个非数值，则使用 Jquery 的属性 Class 会触发验证错误，但是这个从文本框中弹出为红色框的错误不会停留超过 3 秒，它会在页面发布时消失在 3 秒内返回，这个帖子正在发生只是因为有一个`AutopostBack="true"`.

我不能这样做`Autopostback="false"`，因为我需要根据这个文本框值的变化当场做一些计算。

如果这样做`Autopostback="false"`，页面将不会发回并且错误消息永远保留，但我无法对“ `txtAmount_TextChanged`”事件进行任何计算，因为如果.textchcange 永远不会调用此事件`Autopostback="false"`。

那么，如果此文本框中有任何验证错误，我该怎么做才能防止此回发？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T09:31:44.803

```
function txtAmount_TextChanged(){
    //do validations here, Eg: validate if txtAmount is valid amount and "> 0"
   return false; //if somethings's wrong, else true

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T09:46:41.507

使用`Input`事件检查使用jquery在文本框中添加的文本

```
jQuery('#txtAmount').live('input', function() 
   {
     // do your Validation 
     // If Valid return True
     // If Invalid Return False
   }
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T09:47:00.123

您可以使用jquery更改功能

```
$('#txtbox').change(function() { if(validationfail){return false;} ); 
```

您也可以使用 keychange 事件

```
 $('#txtbox').keyup(function() { 
       if(validationfail){return false;} 
    }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T09:35:23.677

您需要添加一个客户端事件处理程序，并在您不希望 PostBack 发生时从中返回 false。

```
<asp:TextBox onkeydown="return doMyCheck()" ID="txtAmount" runat="server"
  AutoPostBack="true" Width="85px" class="validate[ERExpenseTypeDaterequired,custom[float]]"
  OnTextChanged="txtAmount_TextChanged"></asp:TextBox> 
```

JavaScript：

```
function doMyCheck() {
  if (// call your jQuery validity check) 
    return false;
} 
```

# android - Android 上的 USB 驱动 - 新设备

> ID：11931513
> 
> 赞同：2
> 
> 时间：2012-08-13T09:30:18.103
> 
> 标签：android, debugging, usb

到目前为止，我在 2 种不同的设备上遇到了这个问题，我希望这可以帮助其他人。
尽管我的所有 sdk 更新都是最新的，但我的 sdk 无法识别 2 个不同的 Android 设备。
我想为所有运行 Android 操作系统但 sdk 无法识别的设备找出通用解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T09:30:18.103

使用@softwarequestioneer 的[回答](https://stackoverflow.com/a/9529648/1369566)和一位同事的一点帮助，我找到了一个适用于我的两种情况的解决方案。

1)**打开 MTP，** 通过转到设置 > 存储 > 菜单（右上角）> USB 计算机连接 > 媒体设备 (MTP)，默认禁用 MTP。

2)**在 android_winusb.inf 中添加新设备引用**

右键单击设备管理器中的未知设备，选择属性，详细信息选项卡，然后从下拉属性列表中选择硬件 ID。复制剪贴板中的 2 个值。

编辑包含在 Google USB 驱动程序中的 android_winusb.inf 文件（Windows 7 上的典型位置是`"C:\Users\yourUser\AppData\Local\Android\android-sdk\extras\google\usb_driver"`，并使用剪贴板值添加以下行：

```
; your device model
%SingleAdbInterface%        = USB_Install, Clipboard - first value
%CompositeAdbInterface%     = USB_Install, Clipboard - second value 
```

在 [Google.NTx86] 和 [Google.NTamd64] 部分的最后几行之后。

3)**更新了设备管理器中的驱动程序**

右键单击设备管理器中的未知设备，告诉它更新驱动程序，并将其指向上面提到的 google usb 驱动程序库。

4）**此时 adb 应该识别设备**。

5)**如果在第 4 步后无法识别，则应重新启动设备**。

希望能帮助到你。在 HP 和 Panasonic 设备上为我工作。

# perl - 嵌套的 foreach 循环不起作用

> ID：11931519
> 
> 赞同：0
> 
> 时间：2012-08-13T09:30:44.243
> 
> 标签：perl, loops, foreach

它应该是一个简单的嵌套 foreach 循环，但它不起作用，并且真的开始让我烦恼，我无法弄清楚这一点！仍然是 perl 初学者，但我想我现在明白了。有人可以向我解释我要去哪里错了吗？这个想法很简单：2 个文件，1 个小文件，1 个大文件，其中包含我想要的小文件中的信息。两者都有唯一的ID。比较并匹配 id 并输出一个新的小文件，其中包含小文件中添加的信息。

我有 2 段代码：1 段没有严格，1 段有且两者都不起作用。我知道使用严格，但我仍然很好奇为什么没有严格的人也不起作用。

无限制：

```
if ($#ARGV != 2){
print "input_file1 input_file2 output_file\n";
exit;
} 

$inputfile1=$ARGV[0];  
$inputfile2=$ARGV[1]; 
$outputfile1=$ARGV[2]; 

open(INFILE1,$inputfile1) || die "No inputfile :$!\n";
open(INFILE2,$inputfile2) || die "No inputfile :$!\n";
open(OUTFILE_1,">$outputfile1") || die "No outputfile :$!\n";

$i = 0;
$j = 0;

@infile1=<INFILE1>;
@infile2=<INFILE2>;

foreach ( @infile1 ){
    @elements = split(";",$infile1[$i]);

    $id1 = $elements[3];
    print "1\. $id1\n";

    $lat = $elements[5];
    $lon = $elements[6];

    $lat =~ s/,/./;
    $lon =~ s/,/./;

    print "2\. $lat\n";
    print "3\. $lon\n";

    foreach ( @infile2 ){
        @loopelements = split(";",$infile2[$j]);

        $id2 = $loopelements[4];

        print "4\. $id2\n";

        if ($id1 == $id2){
        print OUTFILE_1 "$loopelements[0];$loopelements[1];$loopelements[2];$loopelements[3];$loopelements[4];$lat,$lon\n";
        };

        $j = $j+1;
        };

  @elements = join(";",@elements);  # add ';' to all elements
  #print "$i\r";
  $i = $i+1;
  }
close(INFILE1);
close(INFILE2);
close(OUTFILE_1); 
```

如果我没记错的话，第二个循环将不会启动。

有严格要求：

```
use strict;
use warnings;

my $inputfile1 = shift || die "Give input!\n";
my $inputfile2 = shift || die "Give more input!\n";
my $outputfile = shift || die "Give output!\n";

open my $INFILE1, '<', $inputfile1  or die "In use/Not found :$!\n";
open my $INFILE2, '<', $inputfile2  or die "In use/Not found :$!\n";
open my $OUTFILE, '>', $outputfile  or die "In use/Not found :$!\n";

my $i = 0;
my $j = 0;

foreach ( my $infile1 = <$INFILE1> ){
    my @elements = split(";",$infile1[$i]);

    my $id1 = $elements[3];
    print "1: $id1\n";

    my $lat = $elements[5];
    my $lon = $elements[6];

    $lat =~ s/,/./;
    $lon =~ s/,/./;

    print "2: $lat\n";
    print "3: $lon\n";

    foreach ( my $infile2 = <$INFILE2> ){
        my @loopelements = split(";",$infile2[$j]);

        my $id2 = $loopelements[4];

        print "4: $id2\n";

        if ($id1 == $id2){
        print $OUTFILE "$loopelements[0];$loopelements[1];$loopelements[2];$loopelements[3];$loopelements[4];$lat,$lon\n";
        };

    $j = $j+1;
    };

  #@elements = join(";",@elements); # add ';' to all elements
  #print "$i\r";
  $i = $i+1;
  }
close($INFILE1);
close($INFILE2);
close($OUTFILE); 
```

严格的错误：

```
Global symbol "@infile1" requires explicit package name at Z:\Data-Content\Data\test\jan\bestemming_zonder_acco\add_latlon_dest_test.pl line 16.
Global symbol "@infile2" requires explicit package name at Z:\Data-Content\Data\test\jan\bestemming_zonder_acco\add_latlon_dest_test.pl line 31. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T09:50:40.873

由于混淆符号（$ 和 @ 字符）指示变量是标量还是数组，您的“严格”实现会给您带来错误。在循环语句中，您将文件的每一行读入名为 $infile1 的标量中，但在下一行中，您尝试访问数组 @infile1 的元素。这些与变量无关，正如 perl 告诉你的那样，后者没有被声明。

您“严格”实现的另一个问题是您正在循环内读取文件。这意味着对于嵌套循环，您将在外循环的第一次迭代中读取文件 2，而对于所有后续迭代，内循环将无法读取任何行。

我错过了 stevenl 指出的 foreach/while 问题，即使修复了严格问题，也会让你只使用一次迭代就可以使用 foreach 循环。

我不确定你对 unstrict 脚本有什么问题。

但是我根本不会使用嵌套循环来处理两个文件。我会取消嵌套循环，所以它大致看起来像这样：

```
my %cord;
while ( my $line = <$INFILE1> ) {
    my @elements = split /;/, $line;

    $cord{ $elements[3] } = "$elements[5],$elements[6]";
}

while ( my $line = <$INFILE2> ) {
    my @elements = split /;/, $line;

    if ( exists %coord{ $elements[4] } ) {
        print $OUTFILE "....;$cord{ $elements4 }\n";
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T10:03:10.080

我看不出非严格版本的问题到底出在哪里。您遇到的问题是什么？

严格版本的问题尤其在以下两行：

```
foreach ( my $infile1 = <$INFILE1> ){
    my @elements = split(";",$infile1[$i]); 
```

您在第一行中有一个标量`$infile1`，但您在下一行将其视为一个数组。此外，将 更改`foreach`为 a `while`（见下文）。

几点评论。

*   对于非严格版本，您可以将循环折叠为 C 样式`for`循环，如下所示：

    ```
    for (my $i = 0; $i < @infile1; $i++) {
        ...
    } 
    ```

*   如果您完全不使用数组索引，则可以更轻松地阅读：

    ```
    foreach my $infile1 (@infile1) {
        my @elements = split ';', $infile1;
        ...
    } 
    ```

*   但是对于较大的文件，在开始时将整个文件放入数组中可能需要一些时间。所以最好在你去的时候遍历文件：

    ```
    while (my $infile = <$INFILE1>) {
        ...
    } 
    ```

*   注意最后一点应该是严格版本的外观。您需要一个`while`循环而不是一个`foreach`循环，因为分配`<$INFILE1>`给一个标量意味着它将只返回下一行，只要文件中有另一行，它的计算结果为 true。（因此，`foreach`只会让第一行循环。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T11:06:27.603

在内部 foreach 循环运行之前，您不会重置 $j 。因此，第二次运行内部循环时，您将尝试访问超出数组末尾的元素。这个错误在严格和非严格版本中都存在。

您根本不应该使用 $i 和 $j ；foreach 的重点是它会自动为您获取每个元素。这是在内部循环中正确使用 foreach 的示例：

```
foreach my $line ( @infile2 ){
    @loopelements = split(";",$line);

    #...now do stuff as before
} 
```

这会将@infile 的每个元素依次放入变量 $line 中，直到您遍历所有数组。

# django - “排除”但不要忽略结果？

> ID：11931520
> 
> 赞同：0
> 
> 时间：2012-08-13T09:30:46.583
> 
> 标签：django

我有`ModelForm`两个整数字段，`x`和`y`。这些对应于图像上的坐标。对于我们的非 JS 用户，在输入数据时，我提供了一个`input`with `type=image`。这种类型的输入发送它被点击的地方`x`。`y`

问题是，如果我`exclude`的表单中有 x 和 y，则单击图像的结果不会被处理。如果我不排除它们，它们会被正确处理，但会显示两个文本输入。我应该怎么做才能使表单不显示 x 和 y 字段，但不会忽略结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:53:09.040

像这样的东西应该工作：

```
def __init__(self, *args, **kwargs):
    hidden_widget = forms.HiddenInput()
    self.fields['hidden_field'] = forms.CharField(widget=hidden_widget) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T09:38:30.670

它不在官方文档中，如果我没记错的话，但这应该可以。将两个字段都渲染为隐藏：

```
{{ form.field_name.as_hidden }} 
```

您还可以将它的小部件设置为隐藏字段（HidenInput）：[https ://docs.djangoproject.com/en/dev/ref/forms/widgets/](https://docs.djangoproject.com/en/dev/ref/forms/widgets/)

# facebook - 如何通过 Facebook Graph API 获得用户最好的朋友

> ID：11931521
> 
> 赞同：0
> 
> 时间：2012-08-13T09:30:55.430
> 
> 标签：facebook, facebook-graph-api

我正在为 iPhone 设计一个应用程序，我希望用户将我的应用程序分享给他或她最好的朋友。现在我可以通过 Facebook Graph API 获取用户的好友列表。但是我怎样才能找到用户最好的朋友呢？我有一个想法，可以利用用户的墙来查找墙上经常出现的朋友。然而，一些页面和像奥巴马这样的名人总是出现在墙上。有人可以给出一个可行的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T10:27:19.363

请定义“最好的朋友”。

如果这应该是基于用户当时的个人观点的东西——那么最好让他们选择他们的“最好的朋友”，希望通过一个简单的多朋友选择器向自己提出请求。

或者您指的是用户的“亲密朋友”列表，即 Facebook 上每个用户都可以添加朋友的*默认朋友列表？*这可以通过 API 获得，请检查`/me/friendlists`连接。[https://developers.facebook.com/docs/reference/api/FriendList/](https://developers.facebook.com/docs/reference/api/FriendList/)

# mongodb - 为什么 Doctrine2 ODM 的 findBy() 和 createQueryBuilder()->getQuery()->execute() 结果不一样？

> ID：11931525
> 
> 赞同：0
> 
> 时间：2012-08-13T09:31:15.710
> 
> 标签：mongodb, symfony, doctrine-orm, doctrine-odm

我尝试了两种不同的方法来使用 Doctrine 的 MongoDB-ODM 进行相同的查询。

你能弄清楚为什么这两个在我看来相似的查询都返回不同的结果吗？Snippet 1 不返回 Snippet 2 返回正确数据库条目的任何内容。这两个查询在日志文件中看起来很相似——除了 #1 没有跳过和限制行。

**片段 1**

```
$dateDayAgo = new \DateTime('1 day ago');
$recentLogins = $this->get('user_activity_tracker')->findBy(array(
      'targetUser' => $userAccount->getId(),
      'code' => array('$in' => array('login.attempt','login.ok')),
      'ts' => array('$gte', $dateDayAgo)
    ))->sort(['ts' => 1]); 
```

Snippet 1 中 Symfony 的日志条目：

```
[2012-08-13 09:14:33] doctrine.INFO: MongoDB query: { "find": true, "query": { "targetUser": ObjectId("4fa377e06803fa7303000002"), "code": { "$in": [ "login.attempt", "login.ok" ] }, "ts": [ "$gte", new Date("Sun, 12 Aug 2012 09:14:33 +0000") ] }, "fields": [ ], "db": "eventio_com", "collection": "ActivityEvent" } [] []
[2012-08-13 09:14:33] doctrine.INFO: MongoDB query: { "sort": true, "sortFields": { "ts": 1 }, "query": { "targetUser": ObjectId("4fa377e06803fa7303000002"), "code": { "$in": [ "login.attempt", "login.ok" ] }, "ts": [ "$gte", new Date("Sun, 12 Aug 2012 09:14:33 +0000") ] }, "fields": [ ] } [] [] 
```

**片段 2**

```
$recentLoginsQuery = $this->get('user_activity_tracker')->createQueryBuilder()
        ->field('targetUser')->equals($userAccount->getId())
        ->field('code')->in(array('login.attempt','login.ok'))
        ->field('ts')->gte($dateDayAgo)
        ->sort('ts','asc')
        ->getQuery();

$recentLogins = $recentLoginsQuery->execute(); 
```

片段 2 的日志条目：

```
[2012-08-13 09:17:30] doctrine.INFO: MongoDB query: { "find": true, "query": { "targetUser": ObjectId("4fa377e06803fa7303000002"), "code": { "$in": [ "login.attempt", "login.ok" ] }, "ts": { "$gte": new Date("Sun, 12 Aug 2012 09:17:30 +0000") } }, "fields": [ ], "db": "eventio_com", "collection": "ActivityEvent" } [] []
[2012-08-13 09:17:30] doctrine.INFO: MongoDB query: { "limit": true, "limitNum": null, "query": { "targetUser": ObjectId("4fa377e06803fa7303000002"), "code": { "$in": [ "login.attempt", "login.ok" ] }, "ts": { "$gte": new Date("Sun, 12 Aug 2012 09:17:30 +0000") } }, "fields": [ ] } [] []
[2012-08-13 09:17:30] doctrine.INFO: MongoDB query: { "skip": true, "skipNum": null, "query": { "targetUser": ObjectId("4fa377e06803fa7303000002"), "code": { "$in": [ "login.attempt", "login.ok" ] }, "ts": { "$gte": new Date("Sun, 12 Aug 2012 09:17:30 +0000") } }, "fields": [ ] } [] []
[2012-08-13 09:17:30] doctrine.INFO: MongoDB query: { "sort": true, "sortFields": { "ts": 1 }, "query": { "targetUser": ObjectId("4fa377e06803fa7303000002"), "code": { "$in": [ "login.attempt", "login.ok" ] }, "ts": { "$gte": new Date("Sun, 12 Aug 2012 09:17:30 +0000") } }, "fields": [ ] } [] [] 
```

我的“user_activity_tracker”服务就像底层 Doctrine 存储库/文档管理器的代理一样工作。两个片段都在查询后返回一个 LoggableCursor。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T18:53:02.357

使用查询构建器方法的额外日志输出是由于[Query::prepareCursor()](https://github.com/doctrine/mongodb/blob/master/lib/Doctrine/MongoDB/Query/Query.php#L233)，它总是设置额外的游标选项。[使用DocumentPersister::loadAll()](https://github.com/doctrine/mongodb-odm/blob/master/lib/Doctrine/ODM/MongoDB/Persisters/DocumentPersister.php#L388)的存储库`findBy()`方法仅在提供非空值时设置选项。这解释了日志输出的差异，但与结果集的差异无关。

每个示例的记录查询都是相同的，除了`ts`标准中的小偏差。如果两个游标的值不同，并且使用[iterator_to_array()](http://php.net/iterator_to_array)`count()`解开游标后的结果不同，我建议尝试在失败的测试用例中重现这一点，并针对[mongodb-odm](https://github.com/doctrine/mongodb-odm)存储库提交拉取请求。

# python - easy_install pip == [Errno 8] nodename or servname provided, or not known

> ID：11931530
> 
> 赞同：9
> 
> 时间：2012-08-13T09:31:29.667
> 
> 标签：python, pip, easy-install

我在为通过 pythonbrew 安装的 python 2.7.3 安装 pip 时遇到问题：

```
pythonbrew update --master
pythonbrew install 2.7.3 --force 
```

在尝试从 pip.openplans.org 获取 pip 时，这在最后阶段挂起时失败：

```
Installed /Users/andrei/.pythonbrew/pythons/Python-2.7.3/lib/python2.7/site-packages/distribute-0.6.28-py2.7.egg
Processing dependencies for distribute==0.6.28
Finished processing dependencies for distribute==0.6.28
After install bootstrap.
Don't have permissions to write /Users/andrei/.pythonbrew/pythons/Python-2.7.3/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg-info, skipping
Creating /Users/andrei/.pythonbrew/pythons/Python-2.7.3/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg-info
Creating /Users/andrei/.pythonbrew/pythons/Python-2.7.3/lib/python2.7/site-packages/setuptools.pth
Searching for pip
Reading http://pypi.python.org/simple/pip/
Reading http://pip.openplans.org
Download error on http://pip.openplans.org: [Errno 8] nodename nor servname provided, or not known -- Some packages may not be found!
Reading http://pip.openplans.org
Download error on http://pip.openplans.org: [Errno 8] nodename nor servname provided, or not known -- Some packages may not be found!
Reading http://pip.openplans.org
... 
```

运行`easy_install pip`也会导致同样的错误。当然，我仍然可以克隆`pip`repo 并手动安装它，但很高兴知道它为什么会通过`easy_install`. 任何的想法？

* * *

### 更新：

```
$ host pip.openplans.org
pip.openplans.org is an alias for puffin.oddbird.net.
puffin.oddbird.net has address 173.203.85.138 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2016-08-15T16:15:42.200

我有类似的问题；该命令在 iTerm2 中失败，但在默认的 OS X 终端中没有。重启 iTerm2 解决了这个问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-13T09:51:01.573

有两件事可能是错误的：

*   DNS 查找失败`pip.openplans.org`；测试`host pip.openplans.org`。这可能是本地问题；`host pip.openplans.org 8.8.8.8`也使用和对 Google DNS 服务器进行测试`host pip.openplans.org 8.8.4.4`。如果所有这些查找都失败了，那就祭出一只鸡给互联网大神，等待改进。

*   如果 DNS 查找没有失败，但安装失败了，那么您的本地 DNS 缓存可能会持续进行否定查找。用命令刷新它`dscacheutil -flushcache`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-03T10:57:17.363

对我来说，打开和关闭 WiFi 有助于 Max OS X Yosemite。

# sql - 多条记录加入 Access SQL

> ID：11931535
> 
> 赞同：1
> 
> 时间：2012-08-13T09:31:46.720
> 
> 标签：sql, ms-access, multiple-tables

我不确定我想做的事情是否可能，但如果可能的话，这可能是一个我无法弄清楚的非常简单的解决方案。但是，一旦事情达到一定的复杂性，我的头就会开始旋转。请原谅我的无知。

我有一个在 MS Access 2007 中为一所学校运行的数据库，该学校有大量相互连接的表。我正在尝试创建一个查询，从多个表中获取信息。我正在查找不同客户的销售和付款信息，从几个不同的链接表中提取信息。每笔销售分为 4 个类别之一，课程费、注册费、书费和其他。因为每个客户都会有多次购买，所以每一次都是销售表中的一个单独条目。付款信息也在其自己的表中。

我的 SQL 目前看起来像这样：

```
 SELECT StudentContracts.CustomerID, (Customers.CFirstName & " " & Customers.CLastName) AS Name, Customers.Nationality, Courses.CourseTitle, (StudentContracts.ClassesBought + StudentContracts.GiftClasses) AS Weeks, StudentContracts.StartDate, Sales.SaleAmount, SaleType.SaleType, Sales.DueDate,  Payments.PaymentAmount

FROM (
    (
        (Customers INNER JOIN StudentContracts ON Customers.CustomerID = StudentContracts.CustomerID)
            INNER JOIN Payments ON Customers.CustomerID = Payments.CustomerID) 
    INNER JOIN 
        (SaleType INNER JOIN Sales ON SaleType.SalesForID = Sales.SalesForID) 
    ON Customers.CustomerID = Sales.CustomerID) 
INNER JOIN 
    (
        (Courses INNER JOIN Classes ON Courses.CourseID = Classes.CourseID)
     INNER JOIN StudentsClasses ON Classes.ClassID = StudentsClasses.ClassID)
 ON Customers.CustomerID = StudentsClasses.CustomerID; 
```

这有效并提供了我需要的信息。但是，每次销售我都会获得一条记录，如下所示：

```
CustomerID  Name ... SaleAmount  SaleType  PaymentAmount
1           Bob      $600        Course    $1000
1           Bob      $300        RgnFee    $1000
1           Bob      $100        Book      $1000 
```

我需要的是每个客户的一行，但每个销售类型在它自己的行中的列中，销售金额列在其值字段中。如此：

```
CustomerID  Name ... Course  RgnFee  Book  Others  PaymentAmount
1           Bob      $600    $300    $100          $1000 
```

谁能帮助并可能解释我应该/需要做什么？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T10:25:29.120

您可以从已创建的查询创建交叉表。将查询添加到查询设计网格，从查询类型中选择交叉表，然后选择一个或多个行、列和值。

说：

```
TRANSFORM Sum(t.SaleAmount) AS SumOfSaleAmount
SELECT t.ID, t.Name, Sum(t.SaleAmount) AS Total
FROM TableQuery t
GROUP BY t.ID, t.Name
PIVOT t.SaleType 
```

如果您需要特定的顺序，您可以编辑属性表以包括列标题，或者您可以将 In 语句添加到 SQL。请注意，如果添加列标题，则无论数据是否可用，每列都将包含一列，更重要的是，如果未列出具有数据的列，**则不会**包含该列。

```
TRANSFORM Sum(t.SaleAmount) AS SumOfSaleAmount
SELECT t.ID, t.Name, Sum(t.SaleAmount) AS Total
FROM TableQuery t
GROUP BY t.ID, t.Name
PIVOT t.SaleType In ("Course","RgnFee","Book","Others"); 
```

# installation - 管理员级别的 nsis 安装程序需要为非特权用户创建图标

> ID：11931538
> 
> 赞同：3
> 
> 时间：2012-08-13T09:32:02.060
> 
> 标签：installation, nsis

我需要创建一个以管理员权限运行的 NSIS 安装程序。我请求这些特权

```
RequestExecutionLevel admin 
```

到目前为止，这有效。但我还需要在用户桌面上放置快捷方式链接。我不想为所有用户创建快捷方式，而只想为当前登录的用户创建快捷方式。所以我用

```
SetShellVarContext current 
```

在安装程序部分。如果当前用户具有管理员权限，则此方法有效。如果我有一个普通用户，Windows (7) 会要求特权用户的凭据，这也是正确的。但安装程序随后会在特权用户桌面上创建图标，而不是在当前用户上。

那么，我如何告诉 NSIS，如果当前用户没有管理员权限，它应该为当前用户创建桌面图标？

仅供参考，如果我同时省略 RequestExecutionLevel 和 SetShellVarContext，我还会提示我提供管理权限，但安装程序会在当前用户桌面以及管理员用户上创建图标。我认为这是某种兼容性行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T10:14:24.363

你真的不应该这样做（因为这个确切的问题），你基本上是在问如何创建一个被设计破坏的安装程序。这不是特定于 NSIS 的问题，甚至不是特定于 UAC 的问题，它在 Win2000 中添加 runas 后就存在了！当您使用 runas/UAC 提升时，新进程将作为该用户及其 HKCU 和 shell 文件夹执行...

如果您在脚本中需要“RequestExecutionLevel admin”，那么您正在执行机器级别的操作，因此应该调用“SetShellVarContext all”并将文件安装在 $ProgramFiles 中并在 HKLM 下编写卸载注册。这适用于任何版本的 NT，而不仅仅是 Vista+/UAC。（大多数人忘记在 NT4 和 NT5 上以非管理员身份进行测试）

如果为所有用户创建快捷方式是一个大问题，那么我建议您启用开始菜单页面上的“不创建快捷方式”复选框，以便用户可以决定。

如果你仍然想强制破坏行为，那么你需要使用[这个插件](http://nsis.sourceforge.net/UAC_plug-in)。[（你应该可以在NSIS 论坛](http://forums.winamp.com/forumdisplay.php?forumid=65)上找到很多关于这个插件的主题）

# wordpress - youtube 嵌入视频的奇怪视频渲染问题

> ID：11931539
> 
> 赞同：0
> 
> 时间：2012-08-13T09:32:04.257
> 
> 标签：wordpress, firefox, youtube, webpage-rendering

当我通过 Wordpress 嵌入 Youtube 视频时，我的客户的 Firefox 浏览器发生了一些非常奇怪的事情。

我的客户在具有 250GB 固态硬盘和 128GB 内存和 Core i7 的笔记本电脑上运行 Windows 7 平台。他说他在任何其他网站上观看视频时都不会遇到这个问题。

为什么会发生这种情况？任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T04:49:35.587

尝试在嵌入代码的末尾添加“ *?wmode=opaque ”。*

我在 WordPress 中也看到过这个问题，而且只在 Firefox 上。

我已经在一个静态 HTML 页面上测试了来自 YouTube 的嵌入代码和从 WP 生成的嵌入代码（无论如何它们都是相同的），只有 YouTube iframe 嵌入周围的段落标签，但问题仍然存在。

一旦我将*“？wmode = opaque”*参数添加到iframe src url的末尾，问题就会消失。

请记住，**这只有在您实际获取**视频的 YouTube 嵌入代码并将其添加到 URL 的末尾时才有效，因为 WordPress 生成的代码不会通过它。

# javascript - Dropkick - 选择问题数组

> ID：11931542
> 
> 赞同：0
> 
> 时间：2012-08-13T09:32:16.613
> 
> 标签：javascript, jquery, html, select

我在使用 jQuery 的 dropkick 插件时遇到了以下问题。当我添加一个`select`字段并给它一个带方括号的名称时，即`orders[]`，整个选择项消失。我不知道该怎么做，我需要使用选择数组，我想继续使用 dropkick :)

任何想法如何解决这个问题？

干杯:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T09:38:47.923

这可能是由于插件没有正确处理您选择的名称中的方括号。

我会尽快确认这一点，但是我假设它正在尝试使用您的选择来选择另一个或多个元素`name`，其中包括方括号。

结果，jQuery 会认为你试图找到一个带有参数的选择。

**更新**

正如所承诺的，这是我在尝试复制您的问题时遇到的错误：

![错误](../Images/d152a0021f72f10cafe8e9b1246fdc62.png)

这是因为在第 82 行，它试图获取 ID 或名称。

**一个解决方案，为每个选择元素设置一个唯一的 ID，它应该避免使用 Name 属性。**

有关名称为的示例，请参见[http://jsfiddle.net/gRoberts/mw3Xg/](http://jsfiddle.net/gRoberts/mw3Xg/)`orders[]`

# java - 如何从 Mysql 表中删除一个事件？

> ID：11931546
> 
> 赞同：0
> 
> 时间：2012-08-13T09:32:25.360
> 
> 标签：java, mysql, prepared-statement

我有一个包含以下字段的表：

```
 PersonnelTable Table fields:

 * FirstName
 * LastName
 * Address
 * IdNumber
 * UserName
 * Password
 * Status 
```

在该表中，我允许重复记录。

我想从该表中删除一个事件，其中：

```
String sqlStatement = "DELETE FROM `PersonnelTable` WHERE `Password` = ? AND `UserName` = ? ";
m_prepared.setString(1, _password);  // set the password
m_prepared.setString(2, _username);  // set the user-name
int rowsAffected = m_prepared.executeUpdate(); 
```

`Password = ?`但是该查询将删除所有记录 `UserName = ?`

如何使用该查询仅删除**一条记录？**

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T09:34:21.483

该`LIMIT`子句也可以在`UPDATE`or`DELETE`语句中使用：

```
"DELETE FROM `PersonnelTable` WHERE `Password` = ? AND `UserName` = ? LIMIT 1" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T09:44:55.087

> 如何使用该查询仅删除一条记录？

您可以使用 mySQL 的 DELETE 语句的“LIMIT 1”子句。

但是，如果要删除除最后一行之外的所有行，则需要执行以下操作：

```
BEGIN TRANSACTION;
SELECT COUNT(*) FROM `PersonnelTable` WHERE `Password` = ? AND `UserName` = ? FOR UPDATE;
DELETE FROM `PersonnelTable` WHERE `Password` = ? AND `UserName` = ? LIMIT ?; # (last fetched count - 1)
COMMIT; 
```

# c - qsort 不适用于双数组

> ID：11931547
> 
> 赞同：0
> 
> 时间：2012-08-13T09:32:36.163
> 
> 标签：c, qsort

我尝试使用 qsort 对双值数组进行排序，但它似乎不起作用。想知道这里出了什么问题吗？

```
#include <stdio.h>
#include <stdlib.h>
static double compare (const void * a, const void * b)
{
  if (*(double*)a > *(double*)b) return 1;
  else if (*(double*)a < *(double*)b) return -1;
  else return 0;  
}

int main() {

    int idx;
    double* sum_least_square_err;

    sum_least_square_err = (double*) malloc (2500*2500*sizeof(double));

    sum_least_square_err[0] = 0.642;    
    sum_least_square_err[1] = 0.236;
    sum_least_square_err[2] = 0.946;
    idx = 3;

    qsort(sum_least_square_err, idx, sizeof(sum_least_square_err), compare);

    int i;
    for (i=0; i<idx; i++){
       fprintf(stderr,"sum_least_square_err[%d] = %.3f\n", i, sum_least_square_err[i]);            
    }
    fprintf(stderr,"MAEE = %.3f\n", sum_least_square_err[idx/2]);

    free(sum_least_square_err);
} 
```

* * *

## 结果：

sum_least_square_err[0] = 0.642

sum_least_square_err[1] = 0.236

sum_least_square_err[2] = 0.946

MAEE = 0.236

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-13T09:34:22.933

改变：

```
static double compare (const void * a, const void * b) 
```

至：

```
static int compare (const void * a, const void * b) 
```

并改变：

```
qsort(sum_least_square_err, idx, sizeof(sum_least_square_err), compare); 
```

至：

```
qsort(sum_least_square_err, idx, sizeof(sum_least_square_err[0]), compare); 
```

注意：您应该收到关于第一个错误的适当编译器警告 - 您是否正在编译`gcc -Wall`或等效，如果是，您是否注意到编译器警告？（如果没有，请接受提示，让编译器将来为您捕获此类问题。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T09:37:02.190

我相信你的错误在于：

```
qsort(sum_least_square_err, idx, sizeof(sum_least_square_err), compare); 
```

问题是第三个参数应该是`sizeof(double)`，即数组元素的大小。相反，您传递的是指针的大小，它可以（并且通常是）与元素的大小不同。

有关详细信息，请参阅：[http ://www.cplusplus.com/reference/clibrary/cstdlib/qsort/](http://www.cplusplus.com/reference/clibrary/cstdlib/qsort/)

编辑：[Paul R的](https://stackoverflow.com/users/253056/paul-r)[回答](https://stackoverflow.com/a/11931576/14089)是正确的：你的比较函数的原型是错误的。原型应该是：

```
int ( * comparator ) ( const void *, const void * ) 
```

最后但并非最不重要的一点是，在您的代码中：

```
if (*(double*)a > *(double*)b) return 1;
else if (*(double*)a < *(double*)b) return -1; 
```

你正在抛弃`const`. 这在这里没有后果，但仍然是不好的形式。

# c# - 当我使用 Update 方法时，我的 updatePanel 不更新

> ID：11931554
> 
> 赞同：0
> 
> 时间：2012-08-13T09:33:04.777
> 
> 标签：c#, asp.net, ajax, updatepanel

当我在代码隐藏文件中使用 UpDetail.update() 时，我的更新面板不会更新。

```
<asp:UpdatePanel ID="UpDetail" runat="server" RenderMode="Inline" UpdateMode="Conditional">
        <ContentTemplate>
            <asp:Label ID="AAAA" runat="server"> LOL </asp:Label>
            <asp:Label ID="Label1" runat="server"> <%= DateTime.Now.ToString() %> </asp:Label>
        </ContentTemplate>
    </asp:UpdatePanel> 
```

在我的cs文件中：

```
protected void GvGestionnaires_SelectionChanged(object sender, EventArgs e)
    {

                AAAA.Text = "TOTO";
                UpDetail.Update();
    } 
```

我的活动 GvGestionnaires_SelectionChanged 正在运行，但我的面板没有刷新，为什么？

编辑 ：

我尝试使用按钮而不是我的 dx:gridview 并且它可以工作.. 为什么？！:o – user1594914 刚刚编辑

解决了 ：

将 EnableCallBacks="False" 添加到我的 dx:gridview

```
<dx:ASPxGridView runat="server" ID="GvGestionnaires" KeyFieldName="id" DataSourceID="LinqDataSource" EnableCallBacks="False" 
    OnSelectionChanged="GvGestionnaires_SelectionChanged"
    OnPageIndexChanged="GvGestionnaires_PageIndexChanged"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T10:01:52.953

将 UpdateMode="Conditional" 属性放入 <asp:UpdatePanel>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T09:49:35.560

尝试将触发器添加到更新面板：

```
<asp:UpdatePanel ID="UpDetail" runat="server" RenderMode="Inline" UpdateMode="Conditional">
    <ContentTemplate>
        <asp:Label ID="AAAA" runat="server"> LOL </asp:Label>
        <asp:Label ID="Label1" runat="server"> <%= DateTime.Now.ToString() %> </asp:Label>
    </ContentTemplate>
    <Triggers>
        <asp:AsyncPostBackTrigger ControlID="GvGestionnaires" EventName="SelectionChanged" />
    </Triggers>
</asp:UpdatePanel> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T09:50:11.473

尝试添加 ChildrenAsTriggers="false" 属性并重新测试：

```
<asp:UpdatePanel  ChildrenAsTriggers="false" ID="UpDetail" runat="server" RenderMode="Inline" UpdateMode="Conditional">
        <ContentTemplate>
            <asp:Label ID="AAAA" runat="server"> LOL </asp:Label>
            <asp:Label ID="Label1" runat="server"> <%= DateTime.Now.ToString() %> </asp:Label>
        </ContentTemplate>
    </asp:UpdatePanel> 
```

在这篇文章中[http://msdn.microsoft.com/en-us/library/system.web.ui.updatepanel.update.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.updatepanel.update.aspx) .Update() 在尝试设置值之前被调用，尝试在你的 .像这样的cs文件：

```
protected void GvGestionnaires_SelectionChanged(object sender, EventArgs e)
    {
                UpDetail.Update();
                AAAA.Text = "TOTO";

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-29T12:06:13.937

大声笑 <%= DateTime.Now.ToString() %>

# redis - 没有订阅者时的 Redis 发布

> ID：11931556
> 
> 赞同：5
> 
> 时间：2012-08-13T09:33:13.043
> 
> 标签：redis, publish-subscribe

在 Redis pub/sub 中，如果在没有订阅者的情况下发布了某些内容，那么数据就会丢失。

我想要的是订阅者订阅时向发布者发出的通知。

一种方法是保持循环发布并在发布者找到至少一个订阅者时打破循环。但我不认为这是一个好方法。（我也不能保持指数回退）。

```
while(1) {
    $numOfSubscriber = $redis->publish($channel1, $encodePublish);
    if($numOfSubscriber > 0)
        break;
} 
```

有没有更好的方法来解决同样的问题？

我正在使用 Predis。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-13T12:45:48.727

除非您详细说明您的用例，否则很难具体说明，但如果一个订阅者收到任何消息就足够了，您可以使用 redis 列表实现一个队列并将所有消息存储在那里，同时发布。伪代码：

出版商：

```
# Persist message in a queue
lpush channel1.queue message
# Publish message to any connected subscriber
publish channel1 message 
```

订户：

```
# Subscribe to channel1
subscribe channel1
# Process any persisted messages
brpop channel1.queue 
```

**编辑：**另一种解决方案，如果没有订阅者，发布者只存储消息：

出版商：

```
subscribers = publish channel1 message
if subscribers == 0
  lpush channel1.queue message 
```

订户：

```
# handle stored messages
while(message = rpop channel1.queue)
  # process message

# subscribe for new messages
subscribe channel1 
```

# python - 在python中的不同核心上分布多个进程

> ID：11931561
> 
> 赞同：0
> 
> 时间：2012-08-13T09:33:45.140
> 
> 标签：python

我试图在 python 中运行具有多个参数的单个外部程序。为此，我使用类似的东西

```
for i in range(10):
    subprocess.Popen(["./foo", i]) 
```

这些过程是完全独立的。尽管如此，它们仅在我的 Mac OS X 上的单个内核上运行。有没有一种简单的方法可以将进程分布到所有内核（在我的情况下为 4 个）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T09:36:14.070

看一下[`multiprocessing`](http://docs.python.org/library/multiprocessing.html)模块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T09:44:45.363

下面是一个使用多处理并行转换多张图片的程序示例；

```
"""Convert DICOM files to PNG format, remove blank areas. The blank erea
   removal is based on the image size of a Philips flat detector. The image
   goes from 2048x2048 pixels to 1574x2048 pixels."""

import os
import sys
import subprocess
from multiprocessing import Pool, Lock

globallock = Lock()

def checkfor(args):
    """Make sure that a program necessary for using this script is
    available."""
    if isinstance(args, str):
        args = args.split()
    try:
        f = open('/dev/null')
        subprocess.call(args, stderr=subprocess.STDOUT, stdout=f)
        f.close()
    except:
        print "Required program '{}' not found! exiting.".format(args[0])
        sys.exit(1)

def processfile(fname):
    """Use the convert(1) program from the ImageMagick suite to convert the
       image and crop it."""
    size = '1574x2048'
    args = ['convert', fname, '-units', 'PixelsPerInch', '-density', '300',
            '-crop', size+'+232+0', '-page', size+'+0+0', fname+'.png']
    rv = subprocess.call(args)
    globallock.acquire()
    if rv != 0:
        print "Error '{}' when processing file '{}'.".format(rv, fname)
    else:
        print "File '{}' processed.".format(fname)
    globallock.release()

def main(argv):
    """Main program.

    Keyword arguments:
    argv -- command line arguments
    """
    if len(argv) == 1:
        path, binary = os.path.split(argv[0])
        print "Usage: {} [file ...]".format(binary)
        sys.exit(0)
    checkfor('convert')
    p = Pool()
    p.map(processfile, argv[1:])
    p.close()

## This is the main program ##
if __name__ == '__main__':
    main(sys.argv) 
```

# qt - Qt Eclipse 集成。现在总是制作调试和发布版本

> ID：11931563
> 
> 赞同：0
> 
> 时间：2012-08-13T09:33:52.480
> 
> 标签：qt, eclipse-cdt

我在 Linux (OpenSuse) 下编写的 C++ 程序有一个错误，它消耗了所有可用的 RAM，包括页面内存。这严重影响了系统及其正在运行的所有程序。更重要的是，eclipse（在其他程序中）无法正常关闭，我最终不得不关闭机器。在重新启动机器并重新启动 eclipse 之后，一切似乎都很好，除了在 eclipse 下编译时，现在只要我按下 Control-B（我通常的快捷方式），它就会编译调试和发布版本。所以问题是我如何从这种情况中恢复过来，我有一个程序的调试和发布版本，而 Control-B 将编译调试或发布版本，但不能同时编译两者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T10:15:44.877

回答我自己的问题。Control-B 快捷方式执行“全部构建”，因此答案是“按设计”。但这引出了另外两个问题。首先，我确信以前的 Control-B 快捷方式只编译了 Debug 版本。所以我不知道我是如何让 Eclipse 做到这一点的。那是我很久以前做过的事情。其次，我如何仅获得 Debug 或 Release 版本，但不能同时获得两者。我找不到这个选项。在我的设置中，“构建项目”选项仍然调用调试和发布版本。

# amazon-web-services - 如何在 Amazon EC2 中设置时区？

> ID：11931566
> 
> 赞同：84
> 
> 时间：2012-08-13T09:34:04.803
> 
> 标签：amazon-web-services, ubuntu, amazon-ec2

我想将运行 Ubuntu Linux 的 Amazon EC2 实例中设置的时区更改为本地时间？

**我的问题**

如何更改 Amazon EC2 中的时区？

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-08-13T09:55:58.593

它应该与您的桌面 Ubuntu 进程没有什么不同。看[这里](https://help.ubuntu.com/community/UbuntuTime#Using_the_Command_Line_.28terminal.29)

1.  SSH 到您的 EC2 服务器
2.  执行以下（将时区设置为`Australia/Adelaide`）

    ```
    $ echo "Australia/Adelaide" | sudo tee /etc/timezone
    Australia/Adelaide
    $ sudo dpkg-reconfigure --frontend noninteractive tzdata

    Current default time zone: 'Australia/Adelaide'
    Local time is now:      Sat May  8 21:19:24 CST 2010.
    Universal Time is now:  Sat May  8 11:49:24 UTC 2010. 
    ```

**更新**

您可以使用`tzselect`实用程序浏览。见这里： http: [//manpages.ubuntu.com/manpages/precise/man1/tzselect.1.html](http://manpages.ubuntu.com/manpages/precise/man1/tzselect.1.html)

这是一个交互式软件。我的 Ubuntu (11.10) 有它。

您也可以参考这篇[维基百科文章](http://en.wikipedia.org/wiki/List_of_IANA_time_zones)

巴西

```
Brazil/Acre
Brazil/DeNoronha
Brazil/East
Brazil/West 
```

* * *

## 回答 #2

> 赞同：71
> 
> 时间：2013-05-31T07:58:15.670

另一种更改时间的方法（这是在 Amazon EC2 Linux 实例上完成的）

**删除本地时间文件**

```
sudo rm /etc/localtime 
```

**将目录更改为 ZoneInfo**

```
cd /usr/share/zoneinfo 
```

此文件夹包含所有时区信息。然后，您只需软链接到适当的区域。

**创建到 /etc/localtime 的软链接**

```
sudo ln -s /usr/share/zoneinfo/GB /etc/localtime 
```

这会将您的服务器时区更改为 GB

* * *

## 回答 #3

> 赞同：58
> 
> 时间：2016-05-20T19:12:50.247

通过以下方式检查您当前的时区

```
$ date 
```

要更改它，请运行

```
$ sudo dpkg-reconfigure tzdata 
```

这将显示地理区域列表。选择以缩小可用时区的范围。接下来选择城市/时区。而且您已将系统更改为新时区。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2015-10-02T04:33:12.890

aws[文档](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/set-time.html)中提供了有关更改 ec2 机器中时区的信息。请在下面找到详细信息：

更改时区

Amazon Linux 实例默认设置为 UTC（协调世界时）时区，但您可能希望将实例上的时间更改为本地时间或网络中的另一个时区。

更改实例的时区

1.确定要在实例上使用的时区。/usr/share/zoneinfo 目录包含时区数据文件的层次结构。浏览该位置的目录结构以查找您所在时区的文件。

```
[ec2-user ~]$ ls /usr/share/zoneinfo
Africa      Chile    GB         Indian       Mideast   posixrules  US
America     CST6CDT  GB-Eire    Iran         MST       PRC         UTC
Antarctica  Cuba     GMT        iso3166.tab  MST7MDT   PST8PDT     WET
Arctic      EET      GMT0       Israel       Navajo    right       W-   SU
... 
```

此位置的某些条目是目录（例如 America），这些目录包含特定城市的时区文件。查找要用于实例的城市（或您所在时区的城市）。在此示例中，您可以使用洛杉矶的时区文件 /usr/share/zoneinfo/America/Los_Angeles。

2.使用新时区更新 /etc/sysconfig/clock 文件。

a. 使用您喜欢的文本编辑器（例如 vim 或 nano）打开 /etc/sysconfig/clock 文件。您需要在编辑器命令中使用 sudo，因为 /etc/sysconfig/clock 归根用户所有。

b.找到 ZONE 条目，并将其更改为时区文件（省略路径的 /usr/share/zoneinfo 部分）。例如，要更改为洛杉矶时区，请将 ZONE 条目更改为以下内容。

```
ZONE="America/Los_Angeles" 
```

c.保存文件并退出文本编辑器。

3.在/etc/localtime和你的时区文件之间建立一个符号链接，以便实例在引用本地时间信息时找到时区文件。

```
[ec2-user ~]$ sudo ln -sf /usr/share/zoneinfo/America/Los_Angeles /etc/localtime 
```

4.重新启动系统以在所有服务和应用程序中获取新的时区信息。

```
[ec2-user ~]$ sudo reboot 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2014-06-01T03:52:09.017

上述步骤都不适合我，所以想在这里写下这个新答案

```
# Delete any existing localtime link
sudo rm /etc/localtime
# Update time clock file with ZONE property
sudo vi /etc/sysconfig/clock
#Update the ZONE property to what you want say
ZONE="America/Los_Angeles"
sudo ln -sf /usr/share/zoneinfo/America/Los_Angeles /etc/localtime
sudo reboot 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2018-07-03T00:26:08.517

**Ubuntu 16.04 的更新答案：**

做：

```
sudo timedatectl set-timezone America/New_York 
```

更新您的时区。

要列出您可以执行的所有可用时区：

```
timedatectl list-timezones 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2017-04-26T07:28:51.270

来自 RHEL 7 管理员指南

似乎这可能是 REDHAT7 上的命令

```
timedatectl set-timezone "Europe/Stockholm" 
```

要获取所有可用时区类型：

```
timedatectl list-timezone 
```

有关更多信息，请使用

```
man timedatectrl 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2018-04-08T18:20:39.330

在目录中找到您的时区`/usr/share/zoneinfo/`。

例如更改多伦多的时区`/usr/share/zoneinfo/America/Toronto`

将您的时区符号链接到`/etc/localtime`例如多伦多：

```
sudo ln -sf /usr/share/zoneinfo/America/Toronto /etc/localtime 
```

重启完成

```
reboot 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-11-02T05:41:01.620

**在下面的链接中有很好的描述**

**[https://askubuntu.com/questions/3375/how-to-change-time-zone-settings-from-the-command-line/594186#594186?s=8f7d09598b2246629a70bb1928501f52](https://askubuntu.com/questions/3375/how-to-change-time-zone-settings-from-the-command-line/594186#594186?s=8f7d09598b2246629a70bb1928501f52)**

e:g- sudo timedatectl set-timezone Asia/Kolkata

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-05-02T04:02:40.937

注意：这是指应在您的 AWS 启动配置“用户数据”下使用 linux 机器（在我的实例中为 debian）。

如果您打算在下面的实例引导上设置 TIMEZONE（就像魅力一样），请使用您自己的国家/城市而不是“澳大利亚/悉尼”。

```
#!/bin/bash

/bin/rm -f /etc/localtime; /bin/ln -s /usr/share/zoneinfo/Australia/Sydney /etc/localtime 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-07-17T08:26:24.347

当您创建一个新的 EC2 实例并选择“Amazon Linux 2 AMI (HVM)”作为 Amazon 系统映像 (AMI) 时，您可以在“用户数据”部分插入这些行。根据您所在的地区，将第二行更改为适合您的时区。我在中欧时间 (CET)。请记住，此引导代码以 root 身份执行，并且仅在创建实例时执行一次。

```
#!/bin/bash
rm -rf /etc/localtime
ln -s /usr/share/zoneinfo/CET /etc/localtime 
```

如果您想查看所有其他可用时区，请 ssh 到一个实例并运行：

```
ls /usr/share/zoneinfo 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2022-02-28T13:56:16.140

**对于红帽或 CentOS：**

检查时间：

`timedatectl status`

列出所有可用的时区：

`timedatectl list-timezones`

设置您的时区：

`sudo timedatectl set-timezone Europe/Paris`

# algorithm - 检测具有一定曲率的边缘

> ID：11931569
> 
> 赞同：4
> 
> 时间：2012-08-13T09:34:17.793
> 
> 标签：algorithm, image-processing, geometry, computer-vision, edge-detection

我试图在具有一定曲率的图像中找到边缘：边缘较亮的一侧应该是凸面。

sobel或canny的边缘本身没有问题，但我不知道如何检查曲率。

一些例子：我想找到绿色边框，而不是红色边框

![在此处输入图像描述](../Images/e6bb27f412fabf97b398599f4e742cf7.png)----->![在此处输入图像描述](../Images/2bc14aeb7e582aca72dd185eccc89bfc.png)

![在此处输入图像描述](../Images/8a99b1c391c5116a7dec780146512e8c.png)-----> ![在此处输入图像描述](../Images/8f794fd403f8efd827ba2deb5bb2e43f.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T10:24:23.080

If I understand your requirement correctly you want to find edges which are curved and which, on their convex side, 'enclose' a light region of the diagram ?

I translate your requirement into:

*A curve is accepted if any straight line drawn between two points on the curve lies entirely within a light region of the diagram.*

That should be fairly straightforward to implement. If the curves comprise many points checking every straight line between each pair of points will be extremely tedious, but you might be satisfied with checking *enough* straight lines.

But you'll have to define what *enough* is for yourself.

If, as OP has commented, a curve may include segments which meet the requirement and segments which don't and they are to be separated into a compliant curve and a non-compliant curve, this approach should be adaptable though I can see the processing becoming quite onerous as the number of lines used to check for convexity becomes large.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T11:46:10.607

如果您将边缘的几何图形提取为有序的点序列，则可以通过考虑 3 个连续点 ABC 来确定您想要序列的哪些部分。如果 C与较亮区域[位于 AB 线的同一侧](https://stackoverflow.com/questions/3461453/determine-which-side-of-a-line-a-point-lies)，则 ABC 是所需曲线的一部分，您可以继续考虑 BCD，依此类推，直到您发现 C 位于 AB 的错误一侧或者你回到序列的开始。

这将避免 High Performance Mark 解决方案的假阴性问题，即测试线段遇到与当前曲线不相连的暗区。

# visual-c++ - 在 CFrame 中计算空闲区域

> ID：11931571
> 
> 赞同：0
> 
> 时间：2012-08-13T09:34:19.220
> 
> 标签：visual-c++, mfc, dock

我在 MyCFrame 中有 4 个 CToolbar。它们停靠在 MyCFrame 上。如何计算免费的 CFrame 客户区？我需要找到一些具有值的 CRect（没有停靠栏大小的 CFrameClientRect）。 ![在此处输入图像描述](../Images/ea14ab3791cffe1b63bfa3fe957c5722.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T23:07:53.970

通过查看您的快照，我得出结论，您正在使用一些显示图像的窗口。

获取此窗口矩形：调用`GetWindowRectangle(ptrToRect)`

并将其转换为框架窗口的客户端坐标，传递`rect`如下：

`pMyFrame->ScreenToClient(ptrToRect)`

# winapi - 将 REG_BINARY 读入字符串

> ID：11931573
> 
> 赞同：2
> 
> 时间：2012-08-13T09:34:21.277
> 
> 标签：winapi, registry, delphi-7, delphi

我使用此代码将二进制数据从注册表读取到字符串

```
function ReadBinary (RootKey: HKEY; SubKey,ValueName: WideString; var Data : String): Bool;
var
  Key     : HKey;
  Buffer  : array of char;
  Size    : Cardinal;
  RegType : DWORD;
begin
  result  := FALSE;
  RegType := REG_BINARY;
  if RegOpenKeyExW(RootKey, pwidechar(SubKey), 0, KEY_READ, Key) = ERROR_SUCCESS then begin
    if RegQueryValueExW(Key,pwidechar(ValueName),NIL,@RegType, NIL,@Size) = ERROR_SUCCESS then begin
      SetLength (Buffer, Size + 1);
      FillChar(Buffer, SizeOf (Buffer), #0);
      if RegQueryValueExW(Key,pwidechar(ValueName),NIL,@RegType, @Buffer[0],@Size) = ERROR_SUCCESS then begin
        result := TRUE;
        Data := String (Buffer); // Shows empty or sometimes 1 random char.
      end;
    end;        
  end;
  RegCloseKey (Key);
end; 
```

编辑2：

它适用于固定声明的字节/字符数组

```
function ReadBinary (RootKey: HKEY; SubKey,ValueName: WideString; var Data : String): Bool;
var
  Key     : HKey;
  Buffer  : array [0..200] of char;
  Size    : Cardinal;
  RegType : DWORD;
begin
  result  := FALSE;
  RegType := REG_BINARY;
  if RegOpenKeyExW(RootKey, pwidechar(SubKey), 0, KEY_READ, Key) = ERROR_SUCCESS then begin
    if RegQueryValueExW(Key,pwidechar(ValueName),NIL,@RegType, NIL,@Size) = ERROR_SUCCESS then begin
      FillChar(Buffer, SizeOf (Buffer), #0);
      if RegQueryValueExW(Key,pwidechar(ValueName),NIL,@RegType, @Buffer,@Size) = ERROR_SUCCESS then begin
        result := TRUE;
        Data   := String (Buffer);
      end;
    end;        
  end;
  RegCloseKey (Key);
end; 
```

我被困住了。我做错了什么，解决方案是什么？

谢谢您的帮助。

编辑：

我知道我正在从注册表中读取二进制数据。所以它可能已经 0 终止并且可以返回错误的结果。我可以保证二进制数据中没有 #0 字符，因为我之前在 Value 中写了一个长文本（带有 CR/LF 的字符串）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T11:31:35.077

```
Buffer: array of char; 
```

是chars的动态数组，其实就是指针变量。这个字符串将指针重置为 Nil：

```
 FillChar(Buffer, SizeOf (Buffer), #0); 
```

所以**动态数组现在无效**。

要用零填充动态数组的内容，您必须使用

```
 FillChar(Buffer[0], SizeOf(Buffer[0]) * Length(Buffer), #0) 
```

但这不是必需的，因为 SetLength 完成了这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T11:50:30.403

1.  动态数组类似于指针。在 C/C++ 中它是完全一样的。在 Delphi 中它不是，但你可能会为语义这样认为。*@Buffer*不是第一辆车的地址，而是指针本身的地址。Ib 对*FillChar*和*RegQueryValueExW*的调用都应该传递*Buffer[0]*和*@Buffer[0* ]
2.  为什么你使用 Windows API 而不是标准的 TRegistry ？或者也许 TNT Unicode Controls 或类似的东西有现成的 unicode-aware 注册表访问。
3.  Win API *xxxxxxxW*函数支持 unicode。你检查过你得到了什么数据吗？它是 8 位还是 16 位？将接收到的数据视为 HEX 中的字节数组 - 它们是否包含 $00 字节？看起来他们这样做了，并且您将 unicode 数据放入缓冲区。然后，字符串的预期和正确行为将只接受 1 个字母（或 0，取决于英特尔或摩托罗拉字节顺序）。检查 Buffer 中有哪些二进制数据。
4.  就个人而言，我将 Buffer 制作为字节数组。然后在注册表访问之后，如果 D7 有它，我会使用*SetString*过程来获取值。如果没有，那么我会像*SetLength(Data, Size);一样复制它。移动（缓冲区[0]，数据[1]，大小）；*我会完全删除 FillChar。这种方式复制会稍微快一点，并且不会在第一个杂散#0字节上中断。
5.  在进行低级二进制数据类型转换时，我不会使用模棱两可的 char 和 string 类型，而是使用具体的 AnsiString 和 AnsiChar 类型。如果您的代码有时会由支持 Unicode 的新 Delphi 或 FreePascal 编译，那将使其继续工作。快捷键“char”和“string”可能会根据编译器版本改变它们的含义。然后你就很难确定它为什么坏了，在哪里坏了，怎么办。

# oracle - 将分钟转换为 HH24:MI 格式

> ID：11931574
> 
> 赞同：3
> 
> 时间：2012-08-13T09:34:21.260
> 
> 标签：oracle, time

请您帮忙将分钟转换为 ('HH24:MI') 的格式。

我得到整数的结果，即分钟。那么，如何转换它们呢？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T09:36:46.277

假设，您要转换 492 分钟：

```
select to_char(trunc(sysdate) + 492/24/60, 'hh24:mi') from dual; 
```

如果你想要一个功能：

```
create or replace 
  function tq84_convert_minutes_hh24mm (p_minutes in number) 
  return varchar2 is
begin

    return to_char (trunc(sysdate) + p_minutes / 24/60, 'hh24:mi');

end tq84_convert_minutes_hh24mm;
/ 
```

之后 ...

```
begin
  dbms_output.put_line (tq84_convert_minutes_hh24mm(492));
end;
/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T11:51:28.293

另一种方式：

```
WITH c AS
  (SELECT 492 AS MINUTES FROM DUAL)
SELECT TRIM(TO_CHAR(TRUNC(MINUTES / 60), '09')) || ':' ||
       TRIM(TO_CHAR(TRUNC(MOD(ABS(MINUTES), 60)), '09')) AS HHMM
  FROM C 
```

如果时间超过 1440 分钟（24 小时），这会出现问题，但它会给你一些开始的东西。

分享和享受。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-17T19:19:22.147

这可以节省您的时间，但我遇到了超过 1440 分钟的时间问题。

```
select to_char(trunc(sysdate) + [MINUTES]/24/60, 'hh24:mi') from dual; 
```

所以我做了一个函数来验证分钟是否大于或等于 1440：

```
IF (QT_MINUTES_P IS NOT NULL) THEN
   IF (QT_MINUTES_P >= 1440) THEN
         SELECT  ROUND(QT_MINUTES_P/ 60) ||':'|| MOD(QT_MINUTES_P, 60)
         INTO    DS_RESULT
         FROM    DUAL;
     ELSE
       SELECT   TO_CHAR(TRUNC(SYSDATE) + (QT_MINUTES_P)/24/60, 'hh24:mi')
         INTO   DS_RESULT
         FROM   DUAL;
   END IF;
END IF; 
```

# c# - 在存储过程中使用内部联接时，在 C# 中的多个表中显示数据网格上的数据

> ID：11931580
> 
> 赞同：1
> 
> 时间：2012-08-13T09:34:44.087
> 
> 标签：c#, sql-server, join, stored-procedures, datagridview

我正在用 C# 编写代码，我想从具有关系的多个表中选择数据网格中的数据。在这里，我有一个`Client`&`Item_Configuration`作为父表，以及作为子表，它具有和表`Item_Order`的外键。我只想从所有三个表中获取数据并显示在数据网格上。`Client``Item_Configuration`

我的存储过程是：

```
ALTER PROC [dbo].[Full_SP]
    @clientName varchar(50) = null,
    @itemName varchar(50) = null,
    @clientId_FK varchar(50) = null,
    @operation int
AS
BEGIN
    SET NOCOUNT ON;

    IF @operation = 2
    BEGIN
        SELECT 
            Client.clientName, Item_Configuration.itemName,
            Item_Order.orderId, Item_Order.orderDate, 
            Item_Order.Quantity, Item_Order.status, Item_Order.totalPrice      
        FROM
            Item_Order 
        INNER JOIN
            Client ON Item_Order.clientId_FK = Client.clientId
        JOIN
            Item_Configuration ON Item_Order.itemId_FK = Item_Configuration.itemId
    END
END 
```

我对数据网格的搜索功能在 C# 中，即

```
private void btnSrchFull_Click(object sender, EventArgs e)
{
    SqlConnection conn1 = new SqlConnection();

    try
    {
        conn1.ConnectionString = "server=.\\ms2k5;database=Info_Connect;Trusted_Connection=true";
        conn1.Open();

        SqlCommand selectFull = new SqlCommand("Full_SP", conn1);
        selectFull.CommandType = CommandType.StoredProcedure;

        selectFull.Parameters.Add("@operation", SqlDbType.VarChar);
        selectFull.Parameters["@operation"].Value = 2;

        SqlDataReader myReader = selectFull.ExecuteReader();

        List<FullFill> list = new List<FullFill>();

        while (myReader.Read())
        {
                if (myReader.HasRows)
                {
                    FullFill fullfill = new FullFill();
                    fullfill = MapFullfill(myReader, fullfill);
                    list.Add(fullfill);
                }
            }

            myReader.NextResult();

            foreach (FullFill ffll in list)
            {
                if (myReader.Read() && myReader.HasRows)
                {

                    MapClint(myReader, ffll);
                }
            }

            myReader.NextResult();

            foreach (FullFill ffll1 in list)
            {
                if (myReader.Read() && myReader.HasRows)
                {
                    MapItem(myReader, ffll1);
                }
            }

            dataGridView1.DataSource = list;
            double totPrice = 0;

            for (int i = 0; i < dataGridView1.RowCount; i++)
            {
                totPrice = totPrice +
                Convert.ToDouble(dataGridView1.Rows[i].Cells[5].Value);
                totCost.Text = totPrice.ToString();
            }
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.StackTrace + MessageBoxIcon.Error);
    }
    finally
    {
        if (conn1.State != ConnectionState.Closed)
        {
            conn1.Close();
        }
    }
}

private FullFill MapItem(SqlDataReader myReader, FullFill itemName)
{
    itemName.ItemName =myReader["itemName"].ToString();
    return itemName;
}

private FullFill MapClient(SqlDataReader myReader, FullFill clientName)
{
    clientName.ClientName = myReader["clientName"].ToString();
    return clientName;
}

private FullFill MapFullfill(SqlDataReader myReader, FullFill fullfill)
{
    fullfill.OrderNo = myReader["orderId"].ToString();

    fullfill.OrderDate = Convert.ToDateTime(myReader["orderDate"]);
    fullfill.Quantity = Convert.ToInt32(myReader["Quantity"]);
    fullfill.Status = myReader["status"].ToString();
    fullfill.TotalPrice = Convert.ToDouble(myReader["totalPrice"]);
    return fullfill;
} 
```

我为属性创建了一个类，即

```
class FullFill
{
    public string orderNo;
    public string clientName;
    public DateTime orderDate;
    public string itemName;
    public int quantity;
    public double totCost;
    public string status;

    public string OrderNo 
    { 
        get { return orderNo; } 
        set { orderNo = value; } 
    }

    public string ClientName 
    { 
        get { return clientName; } 
        set { clientName = value; } 
    }

    public DateTime OrderDate 
    { 
        get { return orderDate; } 
        set { orderDate = value; } 
    }

    public string ItemName 
    {
        get { return itemName; } 
        set { itemName = value; } 
    }

    public int Quantity 
    { 
        get { return quantity; } 
        set { quantity = value; } 
    }

    public double TotalPrice 
    { 
        get { return totCost; } 
        set { totCost = value; } 
    }

    public string Status 
    { 
         get { return status; } 
         set { status = value; } 
    }
} 
```

问题是我只能从子表中找到数据（Item_Order）我没有从父表中获取数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T11:12:02.237

我只是在函数 MapFullFill() 上编辑了一些代码。使用我在 MapClint() 和 MapItem() 中编写的代码，因为那里只有一个查询返回所有记录，因此不需要 nextResult() 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T09:48:00.550

也许在 SQL 中创建一个[视图](http://msdn.microsoft.com/en-us/library/ms187956.aspx)并在其上运行您的存储过程（选择）更容易，您可以轻松地显示所有内容。

# c# - 从 LAN 中的主机名获取 IP 地址

> ID：11931582
> 
> 赞同：2
> 
> 时间：2012-08-13T09:34:50.087
> 
> 标签：c#, windows-7, network-programming

我发现了很多关于如何通过 IP 地址获取主机名的示例，如何获取 LAN 中主机的 IP 地址？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T09:42:06.797

试试这个

```
public static void DoGetHostAddresses(string hostname)
{

   IPAddress[] ips;

    ips = Dns.GetHostAddresses(hostname);

    Console.WriteLine("GetHostAddresses({0}) returns:", hostname);

    foreach (IPAddress ip in ips)
    {
        Console.WriteLine("    {0}", ip);
    }
} 
```

我从[http://msdn.microsoft.com/en-us/library/system.net.dns.gethostaddresses.aspx得到这个](http://msdn.microsoft.com/en-us/library/system.net.dns.gethostaddresses.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-29T02:19:42.790

如果您想从您的电脑获取 IP 地址（V4），这是简单的代码。

将此库导入您的班级

```
using System.Net; 
```

初始化这些变量并将其声明到您的代码中。它们包含主机名、ipaddress 和主机地址数组：

```
string HostName = Dns.GetHostName().ToString();

IPAddress[] IpInHostAddress = Dns.GetHostAddresses(HostName);

string IPV4Address = IpInHostAddress[1].ToString(); //Default IPV4Address. This might be the ip address you need to retrieve

string IPV6Address = IpInHostAddress[0].ToString(); //Default Link local IPv6 Address 
```

打开命令提示符，只需键入“ipconfig”并按回车键。完成后，您可以检查字符串 IPV4Address 是否与我们电脑中的 IPv4Address 匹配。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T09:39:00.077

只要您知道机器的名称，就可以使用[`Dns.GetHostAddresses`](http://msdn.microsoft.com/en-us/library/system.net.dns.gethostaddresses.aspx). 您的网络 DNS 应将其识别为 LAN 计算机并返回正确的 IP。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-26T09:28:03.697

使用 Dns.GetHostEntry(hostname) 而不是过时的 Dns.GetHostAddresses。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T09:38:28.590

这是一个很好的例子：http: [//www.codeproject.com/Articles/854/How-To-Get-IP-Address-Of-A-Machine](http://www.codeproject.com/Articles/854/How-To-Get-IP-Address-Of-A-Machine)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-13T09:48:44.723

您可以使用 Windows 管理类来执行此操作，它也适用于同一域中的远程计算机（但我不知道他们是否需要启用或禁用任何安全或策略设置才能正常工作）。例如：

```
public List<NetworkAdapter> GetAdapterList()
{
    ManagementClass mgmt = new ManagementClass("Win32_NetworkAdapterConfiguration ");
    ManagementObjectCollection moc = mgmt.GetInstances();
    List<NetworkAdapter> adapters = new List<NetworkAdapter>();

    // Search for adapters with IP addresses
    foreach(ManagementObject mob in moc)
    {
        string[] addresses = (string[])mob.Properties["IPAddress"].Value;
        if (null == addresses)
        {
            continue;
        }

        NetworkAdapter na = new NetworkAdapter();
        na.Description = (string) mob.Properties["Description"].Value;
        na.MacAddress = (string) mob.Properties["MACAddress"].Value;
        na.IPAddresses = addresses;
        adapters.Add(na);
    }
    return adapters;
} 
```

并访问远程机器，而是创建这样的管理类：

```
ManagementClass mgmt = new ManagementClass
    (\\\\servername\\root\\cimv2:Win32_NetworkAdapterConfiguration); 
```

这种方法可能会让您获得更多的 IP，而不仅仅是在 DNS 中注册的那些。

# objective-c - 动画 NSSplitview 和窗口大小

> ID：11931584
> 
> 赞同：0
> 
> 时间：2012-08-13T09:34:55.863
> 
> 标签：objective-c, cocoa, nsanimation, nsanimationcontext

我想要实现的是，当用户按下按钮时，窗口会增长，额外的空间被一个展开 `NSSplitview`并增长以填充空间的面板占用。

我可以轻松地为窗口调整大小和拆分视图独立增长设置动画，但是当我尝试将两个动画放在一起时，一个不可避免地会在另一个之前或逐步发生。首先窗口部分调整大小，然后拆分视图调整大小，然后窗口完成调整大小，最后拆分视图也完成。关于为什么会发生这种情况的任何想法？

这是我使用的代码：

```
- (IBAction)helpButtonPressed:(id)sender
{
   if ([sender isKindOfClass:[NSMenuItem class]]) [sender setState:![sender state]];
   NSWindow *window = [[[self windowControllers] objectAtIndex:0] window];
   NSRect oldFrame = [window frame];
   CGFloat windowWidthAdd;

   if ([sender state]) windowWidthAdd = HELP_WIDTH; else windowWidthAdd = -HELP_WIDTH;    
   NSRect newFrame = NSMakeRect(oldFrame.origin.x, oldFrame.origin.y,oldFrame.size.width+windowWidthAdd, oldFrame.size.height);

   [[NSAnimationContext currentContext] setDuration:0.3f];
   [NSAnimationContext beginGrouping];
   [[window animator] setFrame:newFrame display:YES];
   if ([sender state]) [self uncollapseRightView]; else [self collapseRightView];
   [NSAnimationContext endGrouping];

}

-(void)collapseRightView
{
    NSView *right = [[self.splitView subviews] objectAtIndex:1];
    NSView *left  = [[self.splitView subviews] objectAtIndex:0];
    NSRect leftFrame = [left frame];
    NSRect overallFrame = [self.splitView frame];
    [right setHidden:YES];
    [[left animator] setFrameSize:NSMakeSize(overallFrame.size.width,leftFrame.size.height)];
}

-(void)uncollapseRightView
{
    NSView *left  = [[self.splitView subviews] objectAtIndex:0];
    NSView *right = [[self.splitView subviews] objectAtIndex:1];
    [right setHidden:NO];
    CGFloat dividerThickness = [self.splitView dividerThickness];
    // get the different frames
    NSRect leftFrame = [left frame];
    // Adjust left frame size
    leftFrame.size.width = (leftFrame.size.width-HELP_WIDTH-dividerThickness);
    NSRect rightFrame = [right frame];
    rightFrame.origin.x = leftFrame.size.width + dividerThickness;
    rightFrame.size.width = HELP_WIDTH;
    [[left animator] setFrameSize:leftFrame.size];
    [[right animator] setFrame:rightFrame];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T10:03:23.163

如果您仔细查看 的类引用`NSSplitView`，您会发现它符合`NSAnimatablePropertyContainer`. 这意味着`NSSplitView`将为您提供“自身的动画代理”。如果你打电话`animator`给你`NSSplitView`，你会得到这个代理，你应该能够以动画方式更改属性。

要调整动画持续时间和计时功能，请使用`NSAnimationContext`您已经做过的相同方式。

最后但并非最不重要的一点：你认识`NSSplitView's` `minPossiblePositionOfDividerAtIndex:`和`maxPossiblePositionOfDividerAtIndex:`吗？

# android - 字母索引 ListView 没有光标

> ID：11931586
> 
> 赞同：2
> 
> 时间：2012-08-13T09:34:57.810
> 
> 标签：android, json, listview, indexed, alphabetical-sort

我使用 JSON 从服务器接收数据，我想用字母索引部分按字母顺序对它们进行排序，并将它们存储在 ListView 中。也许会发生的事情：

```
for(int i=0;i<jArray.length();i++){
// here
} 
```

我读到您只能使用光标来订购这样的元素。在我的情况下，将来自服务器的元素存储在数据库中并再次读取它们是非常低效的。浪费时间和记忆。

所以，我问你是否有任何解决方案可以解决我的问题：按字母顺序排列，并使用从 JSON 接收的字母索引部分字符串。

编辑：我希望我的列表视图看起来像这样[http://eshyu.wordpress.com/2010/08/15/cursoradapter-with-alphabet-indexed-section-headers/](http://eshyu.wordpress.com/2010/08/15/cursoradapter-with-alphabet-indexed-section-headers/)。我的意思是那些部分。我发现的所有教程都说您需要使用游标获取信息。我的问题是如果我不能在没有游标的情况下执行此操作，因为将它们存储在本地数据库中也会浪费内存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:48:11.693

您可能需要解析 JSON 数组：

```
List<Project> list = new ArrayList<Project>();

for (int i = 0; i < jArray.length(); i++) {
    JSONObject obj = (JSONObject) jArray.get(i);
    project = new Project();
    project.setId( Long.parseLong(obj.get("id").toString()));
    project.setKey(obj.get("key").toString());
    project.setName(obj.get("name").toString());

    list.add(project);
} 
```

您可以使用这样的比较器类对它们进行排序：

```
Collections.sort(list), new Comparator<Project>() {
    public int compare(Project p1, Project p2) {
        return p1.getKey().compareToIgnoreCase(p2.getKey());
    }
}); 
```

您还可以有`Project`类和`implements`可比较：

```
public class Project implements Comparable<Project> {
   private long id;
   private String key;
   private String name;

   public int compareTo(Project p) {
    if (this.key > p.key)
        return -1;
    else if (this.key < p.key)
        return 1;
    return 0;
   }
} 
```

然后对列表进行排序`Collections.sort(list);`

`My suggestion`是尝试**在Server端对数据进行排序**，因为手机内存有限，可能会使您的应用程序耗时显示数据，但您在Server端没有内存限制问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T09:43:57.047

使用比较器对数组列表进行排序，如此处[所述](https://stackoverflow.com/questions/5815423/sorting-arraylist-in-android-in-alphabetical-order-case-insensitive)。然后使用 ArrayAdapter 在 Listview 中显示项目

# gdb - 确定_dl_start的地址

> ID：11931588
> 
> 赞同：1
> 
> 时间：2012-08-13T09:35:08.190
> 
> 标签：gdb, elf

我想获取函数_dl_start（动态链接器的入口点）的地址。我可以使用 gdb 设置断点。我希望使用 readelf 找到符号，但我没有。如何获取地址/gdb 如何解析 _dl_start？

使用 gdb 设置断点的示例源 (main.cpp) 是

```
int main( int argc, char** argv, char** envp )
{

  return 0;
} 
```

我用它编译了

```
 g++ main.cpp -o teststart 
```

运行程序时的 gdb 输出是

```
(gdb) b _dl_start
Function "_dl_start" not defined.
Make breakpoint pending on future shared library load? (y or [n]) y
Breakpoint 1 (_dl_start) pending.
(gdb) r
Starting program: /tmp/teststart 

Breakpoint 1, 0x00007fa7ee8c4fc4 in _dl_start () from /lib64/ld-linux-x86-64.so.2 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T06:10:05.810

该`_dl_start`符号在`ld-linux-x86-64.so.2`（动态加载器）中，并且该符号是ld-linux*私有的。*这意味着从程序内部找到它的唯一方法是执行与 GDB 相同的操作：读取 的符号表`ld-linux`，并在其中搜索“_dl_start”函数（按名称）。直接链接到它（正如马丁建议的那样）不能也不会起作用（正如您已经发现的那样）。

读取 ELF 符号表并不是很复杂——您只需要查找`.symtab`和`.strtab`部分，并将其`.symtab`作为`Elf64_Sym`条目表读取。或使用`libelf`（从[这里](http://directory.fsf.org/wiki/Libelf)开始）。

另一个复杂的问题是`ld-linux`可能会被剥离（它不需要符号表来工作）。如果它被提示，GDB 和您的程序都无法找到`_dl_start`.

最后，您的查找尝试很可能`_dl_start`毫无意义：您*确实*意识到在执行程序的第一条指令*之前很久就调用了此函数。*到你打的时候`main`，`_dl_start`早就打完了，再也不会叫了。

更新：

> 我还是想知道gdb是如何获取ld-linux中_dl_start的地址的（被剥离了）

如果`ld-linux`被剥离，GDB 将*无法*在其中找到`_dl_start`。既然你 GDB 确实找到了它，要么

1.  你`ld-linux`实际上并没有被剥夺，或者
2.  你已经安装了 glibc 的“单独的调试信息”[包](http://sourceware.org/gdb/onlinedocs/gdb/Separate-Debug-Files.html)。

要验证`ld-linux`是否真的完全剥离，运行`nm /lib64/ld-linux-x86-64.so.2 | grep _dl_start`和`readelf -S /lib64/ld-linux-x86-64.so.2 | grep symtab`. 这两个命令都不应产生任何输出。

要查看 GDB 从哪里加载符号，可以使用`set print symbol-loading on`命令（在运行可执行文件之前）。

> 我想调用_dl_start（在准备堆栈和调整辅助向量之后）来创建已经存储在内存中的程序的可执行映像（文件表示）......

我不明白这怎么*可能*奏效。`_dl_start`在调用它之前期望某些状态（例如，将其全局变量清零），因此即使您不调整辅助向量，第二次调用它也*很*可能导致断言失败。*如果您确实*以某种非平凡的方式调整辅助向量，则断言更有可能，这（显然）是您的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T11:40:31.673

_dl_start 不是程序本身的一部分，它包含在运行时加载程序中（从输出“..._dl_start () from /lib64/ld-linux-x86-64.so.2”可以看出）。GDB 最初无法设置断点，因为它不包含在您的可执行文件中。我有点不清楚，如果您想从程序内部或外部知道 _dl_start 的地址？从内部，您应该能够简单地将它分配给一个 void* 变量，如下所示：

```
void* address = dl_start; 
```

# c# - 创建生成编译器错误的 C# 代码分析规则

> ID：11931590
> 
> 赞同：-1
> 
> 时间：2012-08-13T09:35:22.870
> 
> 标签：c#, compiler-construction, code-analysis

有时，我会在 .NET 框架中遇到令人讨厌的错误，编译器在编译时和运行时都无法清楚地指出这些错误。[比如这个](https://stackoverflow.com/a/11929557/458991)。

它指出，如果您从 Global.asax.cs`MvcApplication.BeginRequest`手动连接`Application_Start`，您将获得一个`NullReferenceException`in `System.Web.HttpRuntime.ProcessRequestNotificationPrivate`。

由于没有明确的方法将错误与原因联系起来，因此最好能够编写一些内容，说明如果您`MvcApplication.BeginRequest`从连接事件`MvcApplication.Application_Start`，抛出编译时错误，迫使您将其删除并解释原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T11:16:06.277

您可以实现自定义 FxCop 规则，该规则检查处理程序是否按照您所说的那样连接，并将该规则包含在您的代码分析规则集中。查看规则[CA2001](http://msdn.microsoft.com/en-us/library/bb385973%28v=vs.100%29.aspx)，它的作用类似于您想要实现的目标。

有关实施自定义 FxCop 规则的信息，请参阅[http://www.binarycoder.net/fxcop/index.html](http://www.binarycoder.net/fxcop/index.html)。

# liferay - 如何以编程方式获取文档库内容的下载 url

> ID：11931592
> 
> 赞同：8
> 
> 时间：2012-08-13T09:35:25.960
> 
> 标签：liferay

我的文档库中有几个内容（图像、文档、视频......），我想以编程方式获取每个内容的下载 url，因此我可以在自定义 portlet 中的 jsp 上显示它们。

调查后，我发现这个页面有一个可能的解决方案： [https](https://www.liferay.com/community/forums/-/message_boards/message/11073293) ://www.liferay.com/community/forums/-/message_boards/message/11073293 但我对此并不满意，因为它意味着手动构建 url几个参数。

我想知道是否有更好的方法（“Liferay 方式”）来做到这一点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-13T10:08:07.080

我很害怕，但那是生命之道:-)。

如果您仍需要更多确认，请查看该方法的[源代码](http://grepcode.com/file/repo1.maven.org/maven2/com.liferay.portal/portal-service/6.1.0/com/liferay/portlet/documentlibrary/util/DLUtil.java#DLUtil.getPreviewURL%28com.liferay.portal.kernel.repository.model.FileEntry,com.liferay.portal.kernel.repository.model.FileVersion,com.liferay.portal.theme.ThemeDisplay,java.lang.String,boolean%29)[`DLUtil#getPreviewURL`](http://docs.liferay.com/portal/6.1/javadocs/com/liferay/portlet/documentlibrary/util/DLUtil.html#getPreviewURL%28com.liferay.portal.kernel.repository.model.FileEntry,%20com.liferay.portal.kernel.repository.model.FileVersion,%20com.liferay.portal.theme.ThemeDisplay,%20java.lang.String,%20boolean,%20boolean%29)。

Liferay`Documents & Media portlet`和`Document and Media display portlet`. 您还可以查看 JSP 源代码，了解这些 portlet 如何使用上述方法[`/portal-web/docroot/html/portlet/document_library/action/download.jspf`](https://github.com/liferay/liferay-portal/blob/master/portal-web/docroot/html/portlet/document_library/action/download.jspf#L20)。

**PS：**
您可以使用此[静态方法](http://docs.liferay.com/portal/6.1/javadocs/com/liferay/portlet/documentlibrary/service/DLAppServiceUtil.html#getFileEntry%28long%29)`DLFileEntry`转换为。`FileEntry`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-13T10:07:14.310

通过这样的问题，我总是看到 Liferay 资源。这是在“文档和媒体库”portlet 中构建文件下载 url 的片段：

```
<liferay-ui:input-resource
   url='<%= themeDisplay.getPortalURL() + themeDisplay.getPathContext() + "/documents/" + themeDisplay.getScopeGroupId() + StringPool.SLASH + fileEntry.getUuid() %>'
/> 
```

但你是对的，我也更喜欢像 DLFile.getUrl() 这样的方法。

# java - 如何跨不同的jframe获取文本字段值？

> ID：11931594
> 
> 赞同：0
> 
> 时间：2012-08-13T09:35:36.910
> 
> 标签：java, user-interface, netbeans

我正在创建一个程序，它使用几个不同的交互菜单来允许用户访问系统的不同部分。我正在使用 Netbeans 来帮助进行编码。

目前我被困在一个任务上。

当用户通过“登录”表单登录系统时，系统会验证详细信息，然后根据凭据将该用户重定向到“user_details”或“admin_menu”。这么多工作正常。从那里，用户可以访问允许他们更新已保存在数据库中的详细信息的表单。

我发现限制简单用户更新其详细信息的唯一方法是要求他们再次登录，然后从那里检索他们的详细信息以便更新。这个过程很混乱，但它确实有效。

考虑到这一点，我如何从另一个 jform（User_details）检索位于 jform Login 中的文本字段“用户名”中的任何内容，User_details jform 仅在登录成功后打开（一旦发生登录被丢弃并且 user_details已打开）。

顺便说一句，我做了很多研究，但似乎找不到我的问题的答案。

## 这是我的登录代码的一部分：

```
String sql = "select * from user where Username =? and password=?";
        try {
            pst = con.prepareStatement(sql);
            pst.setString(1, username.getText());
            pst.setString(2, password.getText());
            rs = pst.executeQuery();

            int count = 0;
            while (rs.next()) {
                count = count + 1;
            }
            if (count == 1) {
                JOptionPane.showMessageDialog(null, "Access Granted");
                if ("manager@manage.com".equals(t.getText())) {
                    rs.close();
                    pst.close();
                    close();
                    Admin_menu am = new Admin_menu();
                    am.setVisible(true);
                } else {
                    rs.close();
                    pst.close();
                    close();
                    User_details M = new User_details();
                    M.setVisible(true);
                }
            } else {
                JOptionPane.showMessageDialog(null, "Incorrect Username or Password");
            }
        } catch (Exception ex) {
            JOptionPane.showMessageDialog(null, ex);

        } finally {
            try {
                rs.close();
                pst.close();
            } catch (Exception ex) {
            }
        } 
```

* * *

我怎样才能让 User_details Jform 获得文本字段用户名中曾经估算过的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:46:01.227

您可能想要创建一些类来表示登录用户在您的应用程序中所做的一切的状态。传统上，您将其称为会话。登录用户是该会话的属性，因此您将其保存在该字段中。您将会话传递到您制作的每一帧中，以便他们都可以访问它。

用户注销时会话无效。

然后从您的框架、组件等中，您可以从会话中获取当前用户。

但是，请尝试在此处将前端代码与后端代码分开。查看[MVC 模式](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T10:02:41.090

像这样创建一个名为 session 的类：

```
public class Session {

    public static String userName = "";

} 
```

当登录发生时，将 Session.userName 的值设置为给定的用户名，当用户注销时，将 Session.userName 设置为“”。您只需键入 Session.userName 即可访问 Session.userName。其他会话变量也应该在 Session 类中定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T09:50:22.287

尝试将变量声明为 public 并使用您想要使用它们的其他 jframe 来初始化它们，例如

```
public your class{

    initComponents();
    String a;

} 
```

希望这可以帮助 ：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T09:54:39.497

您可以创建一个类“BasicView”，其中存在一个类变量来存储您的信息，因此该类的每​​个实例都可以使用 ist。然后你只需要扩展这个基本类，或者只使用 BasicView.value 或 BasicView.getValue()。您也可以使用同步方法来更改此 var。

```
public class BasicView {
    private static Object value;

    public synchronized void setValue(Object value) {
        this.value = value;
    }

    public Oject getValue() {
        return value;
    }
    .
    .
    .
} 
```

我用它来初始化一个 ServicesLocator 来获取我所有的 bean 中的服务。:)

编辑：还要看看 MVC 模式并在控制器（基本控制器）或类似的东西中使用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T09:56:42.087

**1.**使用`Composition`, 并确保您的 GUI 类**在从不同的 JFrame 引用时始终返回相同的 Object。**

**2.**这可以使用`Singleton Principle`.

# android - ParseException：使用 Ksoap 解析无法解析的日期

> ID：11931595
> 
> 赞同：0
> 
> 时间：2012-08-13T09:35:38.737
> 
> 标签：android

我正在开发一个应用程序，我需要在 KSOAP 基础网络服务中解析“日期”，我需要在服务器上以“MM/dd/yyyy”的格式传递日期，所以我使用 SimepldateFormate 并将日期字符串传递给`date` 该类，但在这里出了点问题，让我犯了错误

**错误：**

```
08-13 14:45:20.031: ERROR/KsoapDemoActivity(562): Exception=>java.text.ParseException: Unparseable date: "08/01/2011" 
```

`KSoap`我也有类似的日期类请求`pi1.setType(Date.class);`但没有得到解决。我也尝试过使用 make Class`MarshalDate mdouble = new MarshalDate();`但没有得到解决方案

你能帮我解决这个问题吗

**这是我的代码**

```
private void InsertClientDetailForMobApp() {
    // TODO Auto-generated method stub
    try {
        String NAMESPACE = "urn:MobileApplicationIntf-IMobileApplication";// "http://tempuri.org/";
        String METHOD_NAME = "InsertClientDetailForMobApp";
        String SOAP_ACTION = "urn:MobileApplicationIntf-IMobileApplication#InsertClientDetailForMobApp";
        String URL = ("URL");// 

        SoapObject Request = new SoapObject(NAMESPACE, METHOD_NAME);

        PropertyInfo pi1 = new PropertyInfo();
        pi1.setName("asfirstname");
        pi1.setValue("Nikunj");
        pi1.setType(String.class);
        Request.addProperty(pi1);

        PropertyInfo pi2 = new PropertyInfo();
        pi1.setName("asLastName");
        pi1.setValue("patel");
        pi1.setType(String.class);
        Request.addProperty(pi1);

        PropertyInfo pi3 = new PropertyInfo();
        pi1.setName("asNationalID");
        pi1.setValue("25125514");
        pi1.setType(String.class);
        Request.addProperty(pi1);

        PropertyInfo pi4 = new PropertyInfo();
        pi1.setName("asCountryissued");
        pi1.setValue("asdasdasd");
        pi1.setType(String.class);
        Request.addProperty(pi1);

        PropertyInfo pi5 = new PropertyInfo();
        pi1.setName("asLicenceNo");
        pi1.setValue("asdasd");
        pi1.setType(String.class);
        Request.addProperty(pi1);

        PropertyInfo pi6 = new PropertyInfo();
        pi1.setName("asPassportNo");
        pi1.setValue("12512513221321");
        pi1.setType(String.class);
        Request.addProperty(pi1);

        PropertyInfo pi7 = new PropertyInfo();
        pi1.setName("asGender");
        pi1.setValue("M");
        pi1.setType(String.class);
        Request.addProperty(pi1);

        PropertyInfo pi8 = new PropertyInfo();
        pi1.setName("asAddress1");
        pi1.setValue("Indasdas asd as aia");
        pi1.setType(String.class);
        Request.addProperty(pi1);

        PropertyInfo pi9 = new PropertyInfo();
        pi1.setName("asAddress2");
        pi1.setValue("asdas asd asdasdas ");
        pi1.setType(String.class);
        Request.addProperty(pi1);

        PropertyInfo pi10 = new PropertyInfo();
        pi1.setName("asCountry");
        pi1.setValue("India");
        pi1.setType(String.class);
        Request.addProperty(pi1);

        PropertyInfo pi11 = new PropertyInfo();
        pi1.setName("asCity");
        pi1.setValue("Ahmedabad");
        pi1.setType(String.class);
        Request.addProperty(pi1);

        PropertyInfo pi12 = new PropertyInfo();
        pi1.setName("asProvince");
        pi1.setValue("Gujarat");
        pi1.setType(String.class);
        Request.addProperty(pi1);

        PropertyInfo pi13 = new PropertyInfo();
        pi1.setName("asZip");
        pi1.setValue("356256");
        pi1.setType(String.class);
        Request.addProperty(pi1);

        PropertyInfo pi14 = new PropertyInfo();
        pi1.setName("asDayTelephone");
        pi1.setValue("15165165565456");
        pi1.setType(String.class);
        Request.addProperty(pi1);

        PropertyInfo pi15 = new PropertyInfo();
        pi1.setName("asEveTelephone");
        pi1.setValue("5545654654");
        pi1.setType(String.class);
        Request.addProperty(pi1);

        PropertyInfo pi16 = new PropertyInfo();
        pi1.setName("asFAX");
        pi1.setValue("54145615");
        pi1.setType(String.class);
        Request.addProperty(pi1);

        PropertyInfo pi17 = new PropertyInfo();
        pi1.setName("asEmail");
        pi1.setValue("nkpatel@asd-infotech.com");
        pi1.setType(String.class);
        Request.addProperty(pi1);

        PropertyInfo pi18 = new PropertyInfo();
        pi1.setName("asUserName");
        pi1.setValue("Nik123");
        pi1.setType(String.class);
        Request.addProperty(pi1);

        PropertyInfo pi19 = new PropertyInfo();
        pi1.setName("asPassword");
        pi1.setValue("India");
        pi1.setType(String.class);
        Request.addProperty(pi1);

        PropertyInfo pi20 = new PropertyInfo();
        pi1.setName("asLanguege");
        pi1.setValue("English");
        pi1.setType(String.class);
        Request.addProperty(pi1);

        PropertyInfo pi21 = new PropertyInfo();
        pi1.setName("asQuestion1");
        pi1.setValue("Question1");
        pi1.setType(String.class);
        Request.addProperty(pi1);

        PropertyInfo pi22 = new PropertyInfo();
        pi1.setName("asAnswer1");
        pi1.setValue("Nothing1");
        pi1.setType(String.class);
        Request.addProperty(pi1);

        PropertyInfo pi23 = new PropertyInfo();
        pi1.setName("asQuestion2");
        pi1.setValue("what1");
        pi1.setType(String.class);
        Request.addProperty(pi1);

        PropertyInfo pi24 = new PropertyInfo();
        pi1.setName("asSSN");
        pi1.setValue("123456");
        pi1.setType(String.class);
        Request.addProperty(pi1);

        PropertyInfo pi25 = new PropertyInfo();
        pi1.setName("asAnswer2");
        pi1.setValue("Nothing2");
        pi1.setType(String.class);
        Request.addProperty(pi1);

        PropertyInfo pi26 = new PropertyInfo();
        pi1.setName("asPrimaryCurrency");
        pi1.setValue("INR");
        pi1.setType(String.class);
        Request.addProperty(pi1);

        PropertyInfo pi27 = new PropertyInfo();
        pi1.setName("asSecondaryCurrency");
        pi1.setValue("USD");
        pi1.setType(String.class);
        Request.addProperty(pi1);

        PropertyInfo pi28 = new PropertyInfo();
        pi1.setName("asAgentID");
        pi1.setValue("456");
        pi1.setType(String.class);
        Request.addProperty(pi1);

        PropertyInfo pi29 = new PropertyInfo();
        pi1.setName("asBranchCode");
        pi1.setValue("Tcom India");
        pi1.setType(String.class);
        Request.addProperty(pi1);

        String str_date = "08/01/2011";
        // yyyy-MM-dd'T'HH:mm:ss
        DateFormat formatter;
        Date date;
        //formatter = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss");
        formatter = new SimpleDateFormat("MM-dd-yyyy");
        date = (Date) formatter.parse(str_date);

        PropertyInfo pi30 = new PropertyInfo();
        pi1.setName("dtDOB");
        pi1.setValue(date);
        pi1.setType(Date.class);
        Request.addProperty(pi1);

        /*
         * Call the web service and retrieve result ... how luvly <3
         */

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                SoapEnvelope.VER11);
        envelope.dotNet = true;
        envelope.setOutputSoapObject(Request);

        AndroidHttpTransport androidHttpTransport = new AndroidHttpTransport(
                URL);

        MarshalDate mdouble = new MarshalDate();
        mdouble.register(envelope);

        androidHttpTransport.call(SOAP_ACTION, envelope);
        Log.i("TAG", "soapResponse=>" + envelope.getResponse());
       } catch (Exception e) {
           soapResponseObject = null;
           Log.e(TAG, "niraliwebservice() Exception=>" + e);
       }
} 
```

**元帅日期**

```
package com.KsoapDemo;

import java.io.IOException;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;
import org.kobjects.isodate.IsoDate;
import org.ksoap2.serialization.Marshal;
import org.ksoap2.serialization.PropertyInfo;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.xmlpull.v1.XmlPullParser;
import org.xmlpull.v1.XmlPullParserException;
import org.xmlpull.v1.XmlSerializer;

public class MarshalDate implements Marshal
{

        public Object readInstance(XmlPullParser parser, String namespace, String name, 
                PropertyInfo expected) throws IOException, XmlPullParserException {

            return IsoDate.stringToDate(parser.nextText(), IsoDate.DATE_TIME);

        }

        public void register(SoapSerializationEnvelope cm) {
             cm.addMapping(cm.xsd, "DateTime", Date.class, this);

        }

        public void writeInstance(XmlSerializer writer, Object obj) throws IOException {
             writer.text(IsoDate.dateToString((Date) obj, IsoDate.DATE_TIME));
            }

} 
```

**更新：**

我已将“08-01-2012”更改为“08/01/2012”但现在它引发了我的错误

> SoapFault - 故障代码：“SOAP-ENV:Server”故障字符串：“模块“MobileApp.exe”中地址 00405818 的访问冲突。读取地址 69570A03' faultactor: '' detail: null

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T09:37:04.223

在 simpleDateFormat 中使用`/`而不是...`-`

```
 formatter = new SimpleDateFormat("MM/dd/yyyy"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T12:09:29.923

将 MarshalDate 注册到 SOAP 信封：

```
MarshalDate _MarshalDate = new MarshalDate();
_MarshalDate.register(soapEnvelope); 
```

然后继续使用您的属性，直到您想要通过的日期并执行以下操作：

```
PropertyInfo _PropertyInfo = new PropertyInfo();
_PropertyInfo.setName("yourParameterInYourMethodeInTheWebService");
_PropertyInfo.setType(Date.class);
_PropertyInfo.setValue(yourVariableOfTypeDate);
soapReq.addProperty(_PropertyInfo); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T09:40:00.777

你在`SimpleDateFormat`课堂上使用了错误的模式

利用：

```
formatter = new SimpleDateFormat("MM/dd/yyyy"); 
```

代替：

```
formatter = new SimpleDateFormat("MM-dd-yyyy"); 
```

# jquery - 使用 jquery 的多个按钮操作

> ID：11931598
> 
> 赞同：0
> 
> 时间：2012-08-13T09:35:42.713
> 
> 标签：jquery

我必须将添加、删除、更新、搜索等 4 个功能放在一个 servlet 中。我正在使用 jquery 来验证我的表单。那么，如何在 jquery 中放置单独的按钮操作。我在下面添加了我的验证脚本。任何人都可以请帮我这样做...

```
$(document).ready(function() { 
    $("#departmentId").keypress(function (e)  
    { 
        //if the letter is not digit then display error and don't type anything
        if( e.which!=8 && e.which!=0 && (e.which<48 || e.which>57))
        {
            //display error message
            $("#errmsg").html("Digits Only").show().fadeOut("slow"); 
            return false;
        }   
    });

    $('.btn-delete').click(function(e){

        // Declare the function variables:
        // Parent form, form URL, email regex and the error HTML
        var $formId = $(this).parents('form');
        var formAction = $formId.attr('action');

        var $error = $('<span class="error"></span>');

        // Prepare the form for validation - remove previous errors
        $('li',$formId).removeClass('error');

        $('span.error').remove();

        // Validate all inputs with the class "required"
        $('.required',$formId).each(function(){
            var inputVal = $("#departmentId").val();
            var $parentTag = $("#departmentId").parent();
            if(inputVal == ''){
                $parentTag.addClass('error').append($error.clone().text('Required Field'));
            }

            // Run the email validation using the regex for those input items also having class "email"

            // Check passwords match for inputs with class "password"

        });

        // All validation complete - Check if any errors exist
        // If has errors

        if ($('span.error').length > 0) {

            $('span.error').each(function(){

                // Set the distance for the error animation
                var distance = 5;

                // Get the error dimensions
                var width = $(this).outerWidth();

                // Calculate starting position
                var start = width + distance;

                // Set the initial CSS
                $(this).show().css({
                    display: 'block',
                    opacity: 0,
                    right: -start+'px'
                })
                // Animate the error message
                .animate({
                    right: -width+'px',
                    opacity: 1
                }, 'slow');

            });
        } else {
            $formId.submit();
        }
        // Prevent form submission
        e.preventDefault();

    });

    // Fade out error message when input field gains focus
    $('.required').focus(function(){
        var $parent = $(this).parent();
        $parent.removeClass('error');
        $('span.error',$parent).fadeOut();
    });

    $('.btn-submit').click(function(e){

        // Declare the function variables:
        // Parent form, form URL, email regex and the error HTML
        var $formId = $(this).parents('form');
        var formAction = $formId.attr('action');
        var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
        var $error = $('<span class="error"></span>');

        // Prepare the form for validation - remove previous errors
        $('li',$formId).removeClass('error');

        $('span.error').remove();

        // Validate all inputs with the class "required"
        $('.required',$formId).each(function(){
            var inputVal = $(this).val();
            var $parentTag = $(this).parent();
            if(inputVal == ''){
                $parentTag.addClass('error').append($error.clone().text('Required Field'));
            }

            // Run the email validation using the regex for those input items also having class "email"

            // Check passwords match for inputs with class "password"

        });

        // All validation complete - Check if any errors exist
        // If has errors

        if ($('span.error').length > 0) {

            $('span.error').each(function(){

                // Set the distance for the error animation
                var distance = 5;

                // Get the error dimensions
                var width = $(this).outerWidth();

                // Calculate starting position
                var start = width + distance;

                // Set the initial CSS
                $(this).show().css({
                    display: 'block',
                    opacity: 0,
                    right: -start+'px'
                })
                // Animate the error message
                .animate({
                    right: -width+'px',
                    opacity: 1
                }, 'slow');

            });
        } else {
            $formId.submit();
        }
        // Prevent form submission
        e.preventDefault();

    });

    // Fade out error message when input field gains focus
    $('.required').focus(function(){
        var $parent = $(this).parent();
        $parent.removeClass('error');
        $('span.error',$parent).fadeOut();
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T09:40:15.637

请参阅以下链接以清除所有与概念相关的提交按钮..

[关联](http://www.webmuse.co.uk/blog/using-forms-with-multiple-submit-buttons-and-jquery-events/)

希望你有解决方案。

# python - Python 列表中 \n 的索引

> ID：11931599
> 
> 赞同：4
> 
> 时间：2012-08-13T09:35:54.960
> 
> 标签：python, list, indexing

好的，这里我还有一个问题，我需要`\n`在我的列表中找到一个人的位置。

```
list = ['abc', '\n', 'def', 'ghi', '\n', 'jkl'] 
```

所以，我需要从此列表中获取所有 '\n' 条目的位置。

我用了

```
a=list.index('\n') 
```

但只有一个值为“1”。如何获得两个职位？

例如，我将得到一个位置为 '\n' 的列表

位置 = ['1', '4']

'1' 表示 \n 在列表中的第一个位置，'4' 表示第二个在列表中的第四位。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-13T09:38:29.077

您需要遍历元素。这可以通过使用列表推导和`enumerate`索引轻松完成：

```
indexes = [i for i, val in enumerate(list) if val == '\n'] 
```

演示：

```
>>> lst = ['abc', '\n', 'def', 'ghi', '\n', 'jkl']
>>> [i for i, val in enumerate(lst) if val == '\n']
[1, 4] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-13T09:40:26.313

```
[i for i, x in enumerate(l) if x == "\n"]
# => [1, 4] 
```

并且不要调用列表`list`，因为这是一个内置函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T09:47:10.433

要在列表中查找多次出现的项目的索引，下面的代码应该可以工作

```
print [i for i in range(len(list)) if list[i] == '\n'] 
```

在这里，我使用`list` 了你的问题，但不要使用关键字作为变量。

# crystal-reports-2010 - : is not 将使用水晶报告显示在 pdf 文件中

> ID：11931600
> 
> 赞同：2
> 
> 时间：2012-08-13T09:36:00.337
> 
> 标签：crystal-reports-2010

我有一个水晶报表，其中包含一个字符 (:)，当导出到 pdf 时，这个字符会变成这样“知道从主报表视图按钮查看时，字符： 出现正常！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T11:53:52.373

问题不在于 Crystal Reports，而在于导出文件，您需要验证您使用的字体是否可用于导出文件，例如 Adob​​e Acrobat PDF 文件。否则，字符将无法被识别，并且导出文件字体功能只能使用可用的字体来表示您的实际字符。

# sharepoint-designer - SharePoint Designer 2010 工作流的 xoml.wfconfig.xml 文件中审批表单的 ContentTypeID 的格式是什么？

> ID：11931611
> 
> 赞同：0
> 
> 时间：2012-08-13T09:36:54.913
> 
> 标签：sharepoint-designer, infopath2010

我可以看到 ID 有 74 个十六进制数字，前 24 个数字是任务内容类型 ID，它是表单内容类型 ID 的第一部分（前 48 个十六进制数字），但后面是 00，然后是 24更多的十六进制数字。

最后 24 个十六进制数字是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T04:48:07.380

这标识了与列表关联的内容类型的副本（它继承自父内容类型，其 id 是最后一个实例 00 之前的所有内容。

# javascript - 关于 setTimeout/Interval 上下文

> ID：11931612
> 
> 赞同：-1
> 
> 时间：2012-08-13T09:36:57.003
> 
> 标签：javascript, call, settimeout

为什么我不能这样做：

```
function f(){console.log(this)}
f.call(this);
setInterval(f.call, 1000, this); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T09:39:42.600

您应该使用`.bind`而不是`.call`：

```
function f(){console.log(this)}
setInterval(f.bind(the_context_obj), 1000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T09:40:11.413

试试这个：

```
setInterval(f.call.bind(f, this), 1000); 
```

[http://jsfiddle.net/Qx3jU/](http://jsfiddle.net/Qx3jU/)

`setInterval(f.bind(this), 1000);`虽然这只是一种不好的说法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T09:38:37.187

因为您正在传递 的*值，* `f.call`所以您失去了与 的关联`f`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T09:44:43.423

[来自 Mozilla 开发页面](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)

语法是：

```
var intervalID = window.setInterval(func, delay[, param1, param2, ...]);
var intervalID = window.setInterval(code, delay); 
```

请注意，在第一种语法中将附加参数传递给函数在 Internet Explorer 中不起作用。如果您想在该浏览器上启用此功能，您必须使用兼容性代码（请参阅[回调参数段落](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval#Callback_arguments)）。

然后我会推荐你​​使用这样的匿名函数

```
var x = this;
setInterval( function() { f.call(x); }, 1000 ); 
```

希望这可以帮助。

# html - 如何以源格式显示 HTML 代码？

> ID：11931619
> 
> 赞同：0
> 
> 时间：2012-08-13T09:37:20.810
> 
> 标签：html

我们有一些 HTML 代码，当用户单击浏览器上的某个链接时，我们希望以原始源格式显示这些代码。我们如何防止链接内容被 HTML 浏览器解释？

我正在尝试使用相同的 HTML 文件来呈现以及以源格式显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T09:44:57.497

像这样的东西就足够了

```
<textarea rows=10 cols=50 readonly="true">
    <h1> Hello </h1>
    <emphasis> World </emphasis>
</textarea> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T09:45:28.623

你可以用 JavaScript 试试这个；

**[语法高亮](http://alexgorbatchev.com/SyntaxHighlighter/)**

希望这可以帮助。

# c# - 我可以在 WPF Toolkit 图表中绘制虚线吗？

> ID：11931620
> 
> 赞同：1
> 
> 时间：2012-08-13T09:37:22.023
> 
> 标签：c#, wpf, wpftoolkit, mschart

在我的基于 WPF 的应用程序中，我使用[WPF Toolkit](http://wpf.codeplex.com/)中提供的数据可视化图表组件。我想绘制虚线，类似于[这个](https://stackoverflow.com/a/5011854/650012)SO 答案中的插图：

![实线和虚线](../Images/95112a93fbc5629e81dd09ea93959c02.png)

不幸的是，这仅适用于 Windows 窗体，因为[BorderDashStyle](http://msdn.microsoft.com/en-us/library/system.windows.forms.datavisualization.charting.chart.borderdashstyle)属性仅存在于 Windows 窗体版本的*DataVisualization.Charting*组件中，而不存在于等效的 WPF 工具包中。

*我应该如何使用WPF Toolkit*图表组件生成虚线？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T10:40:55.353

我搜索了[Silverlight Toolkit](http://silverlight.codeplex.com/)图表组件的类似解决方案，并找到[了这个](http://forums.silverlight.net/t/86366.aspx/1).

幸运的是，事实证明同样的方法可以应用于 WPF。通过将属性设置为具有合适属性设置`LineSeries.PolylineStyle`的样式，可以获得所需的虚线。`System.Windows.Shapes.Polyline``Shape.StrokeDashArray`

以编程方式，它可以通过以下方式完成：

```
var series = new LineSeries
    {
         ItemsSource = calcData,
         IndependentValuePath = "X",
         DependentValuePath = "Y",
         PolylineStyle = GetDashedLineStyle()
    };

...

Style GetDashedLineStyle()
{
    var style = new Style(typeof(Polyline));
    style.Setters.Add(new Setter(Shape.StrokeDashArrayProperty, 
                      new DoubleCollection(new[] { 5.0 })));
    return style;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-04T09:37:37.007

在 WPF 中添加到 xaml 的另一种方法：

```
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:chartingToolkit="clr-namespace:System.Windows.Controls.DataVisualization.Charting;assembly=System.Windows.Controls.DataVisualization.Toolkit"

...

    <Window.Resources>
        <Style x:Key="DashedPolyLine" TargetType="{x:Type Polyline}">                        
            <Setter Property="StrokeDashArray" Value="2 3 2" />
        </Style>        
    </Window.Resources>

...

<chartingToolkit:LineSeries  Title="Title" DependentValuePath="Value" IndependentValuePath="Key" ItemsSource="{Binding BindingValue}" PolylineStyle="{StaticResource DashedPolyLine}"/> 
```

# sql-server - SQL Server 数据类型仅存储时间字段，如 09:10 等

> ID：11931621
> 
> 赞同：5
> 
> 时间：2012-08-13T09:37:22.230
> 
> 标签：sql-server, database-design

我想将办公室开始时间等存储在我的数据库中。

我想存储的时间是`09:15 AM`等`1:15PM`

我的问题是存储它的最佳方式是什么？

目前我`int`在 SQL Server 中使用。

我正在存储数据`0915, 1605, 2305`（也许我也可以使用某种约束）

有没有更好更好的方法来做到这一点。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-13T09:46:57.450

如果您使用的是 SQL 2008 或更新版本，则可以使用[TIME](http://msdn.microsoft.com/en-us/library/bb677243.aspx)数据类型仅存储时间。

# scala - 如何使用 Scala 2.10 隐式类

> ID：11931623
> 
> 赞同：13
> 
> 时间：2012-08-13T09:37:29.703
> 
> 标签：scala, implicit, scala-2.10

我认为这是对 Scala 2.10 的新隐式类的正确用法：

```
implicit case class IntOps(i: Int) extends AnyVal {
  def twice = i * 2
}

11.twice 
```

显然不是：

```
<console>:13: error: value twice is not a member of Int
              11.twice
                 ^ 
```

我错过了什么（Scala 2.10.0-M6）吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-13T11:23:30.980

一个线索是隐式类的脱糖，在[SIP-13](http://docs.scala-lang.org/sips/pending/implicit-classes.html)中解释：

```
implicit class RichInt(n: Int) extends Ordered[Int] {
def min(m: Int): Int = if (n <= m) n else m
...
} 
```

将由编译器转换如下：

```
class RichInt(n: Int) extends Ordered[Int] {
def min(m: Int): Int = if (n <= m) n else m
...
}
implicit final def RichInt(n: Int): RichInt = new RichInt(n) 
```

如您所见，创建的隐式函数与原始类具有相同的名称。我想这样做是为了让隐式类更容易导入。

因此，在您的情况下，当您创建隐式**案例**`implicit`类时，关键字创建的方法名称与关键字创建的伴随对象之间存在冲突`case`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T09:42:55.300

这表明存在歧义：

```
val ops: IntOps = 11

<console>:11: error: ambiguous reference to overloaded definition,
both method IntOps of type (i: Int)IntOps
and  object IntOps of type IntOps.type
match argument types (Int) and expected result type IntOps
       val ops: IntOps = 11
                         ^ 
```

不确定到底发生了什么。但是当不使用时`case class`它似乎很好：

```
implicit class IntOps(val i: Int) extends AnyVal {
  def twice = i * 2
}

11.twice  // ok 
```

# ios - CMMotionManager 和 Angular 路径

> ID：11931626
> 
> 赞同：3
> 
> 时间：2012-08-13T09:37:53.603
> 
> 标签：ios, camera, accelerometer, gyroscope, core-motion

我正在尝试编写一个非常基本的全景应用程序。

通过使用 CMMotionManager，我可以获得动态更新以确定拍摄下一张照片的适当时刻。有时此代码运行良好，但在大多数情况下，它拍摄照片太早或太晚。请帮助我了解我到底做错了什么。

下面是 iPhone 在纵向模式下的代码示例。

```
#define CC_RADIANS_TO_DEGREES(__ANGLE__) ((__ANGLE__) * 57.29577951f) // PI * 180
#define FOV_IN_PORTRAIT_MODE 41.5;

double prevTime;
double currAngle;

- (void)motionUpdate:(CMDeviceMotion *)motion
{
    if (!prevTime) {
        prevTime = motion.timestamp;
        return;
    }

    //Calculate delta time between previous motionUpdate call and _now_
    double deltaTime = motion.timestamp - prevTime;
    prevTime = motion.timestamp;

    //Y axis rotation
    CMRotationRate rotationRate = motion.rotationRate;
    double rotation = rotationRate.y;

    if (fabs(rotation) < 0.05) //igonre bias
        return;

    //Calculate the angular distance
    double anglePathRad = rotation * deltaTime;

    //calculate total panoram angle
    currAngle += CC_RADIANS_TO_DEGREES(anglePathRad);

    if (fabs(currAngle) >= FOV_IN_PORTRAIT_MODE) {
        currAngle = 0;
        [self takePicture];
    }

} 
```

# spring - Intellij ApplicationContext 错误被错误地突出显示

> ID：11931629
> 
> 赞同：1
> 
> 时间：2012-08-13T09:38:15.497
> 
> 标签：spring, intellij-idea

*   1) 无法解析目录 javascript
*   2) 此处不允许使用属性 p:cache-manager-ref
*   3) 无法解析符号数据源

全部显示在下面的红色： ![intellij 代码检查错误](../Images/e536849085e7ca4f8fe1534cab7f4f9e.png)

1）因为我的应用程序上下文位于 src/main/resources 并被复制到 WEB-INF，所以我如何通过将 appContext.xml 移动到 WEB-INF 来引用资源？

2) Intellij 不能使用 p 命名空间，因为它不需要 xsd ？但我已经正确声明了命名空间——它在 netbeans 中验证。

3) 不知道

顺便说一句，这些不会影响我的应用程序的正确运行。它可以工作，并且在 eclipse 或 netbeans 中不会显示任何错误。

这是我的 artfiact 设置，javascript 和 images 目录在 webapp 中： ![在此处输入图像描述](../Images/acadfa4448fceb97cfab7c1711ed2e63.png)

事实上，如果我尝试手动将资源目录添加到部署中，我会收到提示消息，这是重复的： ![在此处输入图像描述](../Images/a57488aad69d23429a4310bb28207818.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T10:35:33.713

1）您需要为您的模块配置一个 Web 工件，以让 IDEA 了解您的应用程序布局。2）您需要声明 p-namespace，例如 xmlns:p="http://www.springframework.org/schema/p" 3）您的库似乎不包含调试器信息。我建议在这里使用 type="javax.sql.DataSource" 。

# cakephp - CakePHP 查找两个日期之间查询的条件

> ID：11931633
> 
> 赞同：11
> 
> 时间：2012-08-13T09:38:29.453
> 
> 标签：cakephp, date, time, between

我的数据库中有一个开始日期和一个结束日期，还有一个来自表单字段的 $date 变量。我现在正在尝试查询 $date 是数据库中的开始/结束日期或这两者之间的任何日期的所有行。

这与 daysAsSql 如何工作的文档中描述的内容相反。我不知道如何让它工作。以下行不能作为控制器中的查找条件：

```
'? BETWEEN ? AND ?' => array($date, 'Item.date_start', 'Item.date_end'), 
```

任何帮助是极大的赞赏。这真让我抓狂。

这是完整的查询和相应的 SQL：

```
$conditions = array(
            'conditions' => array(
            'and' => array(
                '? BETWEEN ? AND ?' => array($date, 'Item.date_start', 'Item.date_end'),
                'Item.title LIKE' => "%$title%",
                'Item.status_id =' => '1'
                )));

        $this->set('items', $this->Item->find('all', $conditions));

WHERE (('2012-10-06' BETWEEN 'Item.date_start' AND 'Item.date_end') AND (`Item`.`title` LIKE '%%') AND (`Item`.`status_id` = 1)) 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-13T10:13:56.003

```
$conditions = array(
        'conditions' => array(
        'and' => array(
                        array('Item.date_start <= ' => $date,
                              'Item.date_end >= ' => $date
                             ),
            'Item.title LIKE' => "%$title%",
            'Item.status_id =' => '1'
            ))); 
```

尝试上面的代码并询问它是否不适合您。

**编辑：** 根据@Aryan 的要求，如果我们必须找到在 1 个月内注册的用户：

```
$start_date = '2013-05-26'; //should be in YYYY-MM-DD format
$this->User->find('all', array('conditions' => array('User.reg_date BETWEEN '.$start_date.' AND DATE_ADD('.$start_date.', INTERVAL 30 DAY)'))); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-06-08T11:47:05.207

这是`CakePHP BETWEEN`查询示例。

我将我的数组定义为变量，然后在我的 CakePHP find 函数调用中使用这些变量：

```
// just return these two fields
$fields = array('uri', 'page_views');

// use this "between" range
$conditions = array('Event.date BETWEEN ? and ?' => array($start_date, $end_date));

// run the "select between" query
$results = $this->Event->find('all', 
         array('fields'=>$fields, 
               'conditions'=>$conditions)); 
```

[参考自](http://alvinalexander.com/php/cakephp-find-between-select-query-syntax)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-14T09:03:00.900

CakePHP 2.x 查询的一般示例

```
 $_condition = array("TABLENAME.id" => $id, "TABLENAME.user_id" => array_unique($_array), 'date(TABLENAME.created_at) BETWEEN ? AND ?' => array($start_date, $end_date));
        $result_array = $this->TABLENAME->find("all", array(
            'fields' => array("TABLENAME.id", "TABLENAME.user_id", 'TABLENAME.created_at'),
            "conditions" => $_condition,
            "group" => array("TABLENAME.id"), //fields to GROUP BY
            'joins' => array(
                array(
                    'alias' => 'T2',
                    'table' => 'TABLENAME2',
                    'type' => 'LEFT',
                    'conditions' => array('TABLENAME.t_id = TABLENAME2.t_id')
                ),
                array(
                    'alias' => 'T3',
                    'table' => 'TABLENAME3',
                    'type' => 'LEFT',
                    'conditions' => array(
                        'IF(
                           TABLENAME.t3_id > 0,
                                T2.f_id = T3.f_id,
                                TABLENAME.ff_id = T2.ff_id
                            )'
                    )
                ),
            ),
            'recursive' => 0
                )
        ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-30T06:47:37.633

这是更有效和更易于理解`IN BETWEEN` 的查询`cakephp 2.x`

```
$testing_log_device_site_name = $testingLogData['TestingLogDevice']['Siteid'];

$conditions = array('TestingLogDevice.dateee BETWEEN ? and ?' => array($start_date, $end_date));

$results = $this->TestingLogDevice->find('all', 
    array(
         'fields'=>array('dateee','timeee','Siteid'), 
         'conditions'=>array($conditions, 'TestingLogDevice.Siteid'=>$testing_log_device_site_name)
    )
);
pr($results); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-07-24T21:36:08.613

```
$data=$this->post->find('all')->where([ 'id'=>$id,
'price between'=>$price1,'and'=>$price2])->toArray(); 
```

此查询的工作方式如下：

```
select * from post where id=$id and price between $price1 and $price2; 
```

> " -- 'price between'=>$price1 --" 变为 "price between $price1"

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2019-03-05T12:37:49.747

用这个

```
 $today = new DateTime( date('Y-m-d'));

       $fiveYearsBack = $today->sub(new DateInterval('P5Y')); 
```

# actionscript-3 - 为什么单击文本框上方的按钮时会获得焦点？

> ID：11931637
> 
> 赞同：0
> 
> 时间：2012-08-13T09:38:39.123
> 
> 标签：actionscript-3, apache-flex, flex4.5, mxml, flex-mobile

我有一个 mxml 视图，在 actionContent 中有一个按钮，在 viewMenu 中有两个按钮。

在主要内容中，我有一个滚动条和一个 vgroup，其中包含一些文本框、标签和按钮。

如果我在文本框（TextInput 或 TextArea）下方时单击这 3 个按钮中的任何一个，我最终会专注于文本框，而不是触发按钮的单击。

有谁知道为什么会这样？这是常见的事情吗，因为我在谷歌或这里找不到任何关于它的信息。

顺便说一句，已经使用物理 iPad（1 和 2）和 iPhone 4 以及模拟的 iPhone 4S 和 HTC Wildfire 进行了测试。

# c# - 如何确定一个类是否是 C# 中泛型接口的实例？

> ID：11931638
> 
> 赞同：0
> 
> 时间：2012-08-13T09:38:38.747
> 
> 标签：c#, .net

那么是否有可能获取`Property<T>`is的实例，`Property`并且在不知道其泛型`T`类型参数的情况下调用其方法？

```
private interface Property<T> 
{
    T Value { get;}
    void DestroyEarth();
}

class MyProperty : Property<int>
{
    public int Value{ get { return 1 }; }
    public void  DestroyEarth() { }
} 
```

所以我想知道我是否可以调用`DestroyEarth()`MyProperty 实例收到的方法，如

```
void PropertyCaller(Property p){p.DestroyEarth();} 
```

（注意：我们没有定义或没有简单的`Property`类或接口 nowhere ）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T09:47:21.200

编辑：

对于问题编辑，我会说：声明一个非通用接口并移动与 不相关的方法，`T`例如：

```
interface IProperty {
    object Value { get;}
    void DestroyEarth();
}
interface IProperty<T> : IProperty {
    new T Value { get;}
}

class MyProperty : IProperty<int>
{
    object IProperty.Value { get { return Value; } }
    public int Value{get {return 1;} }
    public void  DestroyEarth(){}
} 
```

当`IProperty`你不知道`T`.

（与您发布代码之前不同的答案在[历史记录](https://stackoverflow.com/revisions/2e7007ba-1244-4b93-85ca-cf66759f5d80/view-source)中，供参考）

然后你有：

```
void PropertyCaller(IProperty p) { p.DestroyEarth(); } 
```

当然，您也可以让编译器找出`T`：

```
void PropertyCaller<T>(IProperty<T> p) { p.DestroyEarth(); } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T10:56:23.027

在您不知道 T 并且仍想以某种方式调用该实例的情况下，您要求的是`Property<T>`类型之间的自动转换（我猜）。`Property<object>`由于各种原因（研究泛型类型中的“协方差/逆变”以获得对问题空间的一些见解），这无法完成。

我建议您自己进行此转换，并在您的类`IProperty`之上实现一个（非通用 - 请参阅 Marc 的答案）接口，该接口具有相同的签名但将 T 写为对象。`Property<T>`然后在需要时手动实现对 T 方法的调用重定向。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-13T09:44:19.013

你的`Property`类应该有一些实现，不管它`T`，并`Property<T>`派生自`Property`，与更多相关的实现`T`。

# vb.net - 将 VB.net DLL 添加到 MS Word VBA 宏

> ID：11931639
> 
> 赞同：0
> 
> 时间：2012-08-13T09:38:39.650
> 
> 标签：vb.net, vba, dll, ms-word

我尝试在 ms word 中从宏项目中添加对 DLL 的引用。该 dll 是使用 MS Visual web Express 2010 和这篇官方的 MS 知识库文章构建的

[http://support.microsoft.com/kb/317535](http://support.microsoft.com/kb/317535)

但是在尝试将其添加到我的宏作为参考时出现此错误： [错误 http://img29.imageshack.us/img29/5859/13082012111759.png](http://img29.imageshack.us/img29/5859/13082012111759.png)

如前所述，我遵循了知识库文章中的所有步骤。

我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:45:31.517

您的组件/类需要是可见的！

尝试指定[ComVisibleAttribute](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.comvisibleattribute.aspx)。然后它必须在[您的系统中注册](http://www.ewall.org/tech/msi/com-registration)。

# javascript - Socket.IO socket.id 为同一个客户端更改而无需重新连接

> ID：11931640
> 
> 赞同：2
> 
> 时间：2012-08-13T09:38:40.670
> 
> 标签：javascript, node.js, websocket, socket.io

我正在制作一个需要将套接字映射到某个对象的应用程序。我认为使用 Socket.IO 提供的 socket.id 变量会很安全。不幸的是，在调试时，我发现 socket.id 在客户端没有断开/重新连接或其他任何情况下发生了变化。

这是一小段代码来显示我正在尝试做的事情：

```
var io         = require('socket.io').listen(8080),
var myVariable = new Array();

// Main event loop
io.sockets.on('connection', function (socket) {
    socket.on('myEvent', function(data) {
        myVariable[socket.id] = data;
    }
    // 'someOtherEvent' which uses the mapped data.
    socket.on('someOtherEvent', function(data) {
        // Doesn't always work because socket.id has changed and var is empty
        doSomethingWith(myVariable[socket.id]);
    }
}); 
```

我不确定，但我认为这不是预期的效果。为什么会发生这种情况，我将如何解决它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T13:31:39.297

我正在使用[节点检查](https://github.com/dannycoates/node-inspector/)器来调试我的应用程序，并且因为我将代码保存在某个断点上，它断开了客户端（可能是某个超时客户端）。这就是为什么我在继续执行代码时得到了一个新的 socket.id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T15:57:45.277

看起来像在“myEvent”或套接字重新连接之前发出的“someOtherEvent”。我在生产中的两个不同项目中使用 socket.id 作为连接标识符，它可以正常工作。

# notifications - 为 Win8 定期磁贴通知设置到期日期并更新通知通道

> ID：11931643
> 
> 赞同：2
> 
> 时间：2012-08-13T09:38:52.367
> 
> 标签：notifications, windows-8, microsoft-metro, windows-runtime

我（仍在）开发 WIn8-UI-App（以前称为 Metro ...），并且我实现了定期磁贴更新。（同样在您的帮助下，请参阅[这篇文章](https://stackoverflow.com/questions/11900579/how-to-register-for-win8-periodic-tile-notifications)。）

我有两个后续问题：

1.  如何设置周期性磁贴的到期日期？[如文档](http://msdn.microsoft.com/en-us/library/windows/apps/hh781199.aspx#setting_an_expiration_time_on_a_notification)中所写，我必须提供通知的 HTTP 响应消息的 X-WNS-Expires 标头。该消息是 XML-(tile)-文件。如何添加到期日期（示例）？

2.  当我阅读一些教程和文档时，我读到通知服务（更新磁贴的 abonnement）永不过期。在一个[示例代码（由 MS）](http://code.msdn.microsoft.com/windowsapps/push-and-periodic-de225603)中，我读到它在 30 天后过期，我应该在应用程序启动时更新它，并且我应该考虑使用后台任务。现在是什么，我应该为我的应用程序做些什么，这些应用程序可能每两个月才使用一次（但通知图块必须一直打开）？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T06:38:57.643

您为定期通知指定的端点需要提供 XML 内容并设置 X-WNS-Expires 标头（可能还有 X-WNS-Tag）。例如，如果您使用 Windows Azure blob 存储或 Amazon S3 来托管模板 XML 并将该 URI 发送到[startPeriodicUpdate](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.notifications.tileupdater.startperiodicupdate.aspx)，那么您没有机会设置这些标头。您需要设置一个轻量级服务来传递 XML 内容**并**适当地设置标头。

30 天是指推送通知渠道，而不是定期通知注册，它只是一个 URI，它会在您指定的任何时间间隔内进行轮询。将检查该 URI，直到您调用[stopPeriodicUpdate](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.notifications.tileupdater.stopperiodicupdate.aspx)；请参阅[定期通知概述](http://msdn.microsoft.com/en-us/library/windows/apps/jj150587.aspx)：

> 轮询会一直持续到您明确停止或卸载您的应用程序为止。否则，即使您的应用程序从未再次启动，Windows 也会继续轮询您的磁贴或徽章的更新。

最后，[定期通知的指南和清单](http://msdn.microsoft.com/en-us/library/windows/apps/hh761461.aspx)确实建议：

> 每次启动应用程序或获得焦点时调用 StartPeriodicUpdate 或[StartPeriodicUpdateBatch方法。](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.notifications.tileupdater.startperiodicupdatebatch.aspx)这可确保每次用户启动或切换到应用程序时更新磁贴内容。

# jquery - jQuery：测试类的正则表达式模式

> ID：11931644
> 
> 赞同：0
> 
> 时间：2012-08-13T09:38:55.957
> 
> 标签：jquery, regex, parent

嘿嘿，

我想解决不同段落的父元素。因为段落以不同的方式嵌套，我不能通过使用“最接近”或某事来以相同的方式解决问题。

这就是为什么我尝试使用正则表达式测试来解决`#text-test`AND `#img-test`：

```
<div class="text-test">
    <p class"tester">texttest</p>
</div>
<div class="img-test">
   <div class="wrapper">
    <p class="tester">imgtest</p>  
   </div>
</div>

$('.tester').click(function() {
    //$(this).closest('div').addClass('active');
    /* get the closest div where the class ends up with -test
    * and add class active 
    * wrapperdiv = $(this).closest('div').attr('class').test(/-test$/);
    */
    //console.log(wrapperdiv)
}); 
```

您对我如何使用测试方法有什么建议吗？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T09:41:15.820

```
$(this).closest('div[class$="-test"]').addClass('active'); 
```

`[name$=value]`**[用选择器](http://api.jquery.com/attribute-ends-with-selector/)**结束。对于上述情况，它将选择那些`div`类以 . 结尾的`-test`.

# svg - 基于 d3.js 的 javascript 高级图表 api

> ID：11931650
> 
> 赞同：5
> 
> 时间：2012-08-13T09:39:06.067
> 
> 标签：svg, d3.js

我喜欢[d3.js](http://d3js.org/)的灵活性，但在某些情况下，它的低级 api 很难使用。有哪些基于 d3.js 的高级图表库？到目前为止，我知道[人力车。](http://code.shutterstock.com/rickshaw/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T08:14:55.700

和你一样，我对 D3 印象深刻，但发现它很棘手。

我见过的最好的 D3 图表库是[NVD3.js](http://nvd3.org/)。我一直在测试它，但还没有在愤怒中使用它。

目前我正在研究一个理论，即要充分利用 D3，您需要对 JavaScript 有深入的了解，所以我正在复习我的[JavaScript 模式](http://shop.oreilly.com/product/9780596806767.do)，我发现这很有帮助。

# java - 将 mojo 生成的代码动态添加到源路径

> ID：11931652
> 
> 赞同：4
> 
> 时间：2012-08-13T09:39:33.833
> 
> 标签：java, maven, pom.xml, mojo, generated-code

我编写了一个生成代码并将其粘贴在*{root}/target/generated-sources/foo*下的 mojo 。当我执行时：

```
mvn clean install 
```

我收到错误，表明生成的源没有包含在构建路径中（生成的文件在那里，但在编译阶段没有被拾取）。我从[这个答案](https://stackoverflow.com/a/4121130/5380)中了解到，我需要动态添加*{root}/target/generated-sources/foo*作为 POM 的源目录。问题是，我无法找到有关如何执行此操作的任何信息。

作为备用计划，我打算使用 Build Helper Maven 插件，但我希望尽可能在我的 mojo 中自动执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T09:47:17.263

我更喜欢将其添加到我的 Mojo 中：

```
/**
  * The current project representation.
  * @parameter expression="${project}"
  * @required
  * @readonly
  */
 private MavenProject project;

/**
 * Directory wherein generated source will be put; main, test, site, ... will be added implictly.
 * @parameter expression="${outputDir}" default-value="${project.build.directory}/src-generated"
 * @required
 */
private File outputDir; 
```

显然，您可以更改`default-value`以匹配您自己的模式。

然后在`execute()`方法中：

```
if (!settings.isInteractiveMode()) {
    LOG.info("Adding " + outputDir.getAbsolutePath() + " to compile source root");
}
project.addCompileSourceRoot(outputDir.getAbsolutePath()); 
```

# javascript - 使用 twitter 按钮定位父元素

> ID：11931655
> 
> 赞同：0
> 
> 时间：2012-08-13T09:39:51.023
> 
> 标签：javascript, twitter, frameset

我正在尝试在这里做一些有点棘手的事情。我有一个带有 2 个框架、标题和内容的 FRAMESET 页面（这个是可变的）。页面 url 看起来像 page.php?url=xxx （xxx 将是内容框架）。我想要做的是在顶部标题框架上放置一个 twitter 分享按钮，并让它分享整个页面。这是推特 js 代码：

```
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script> 
```

要显示按钮，我必须输入以下代码：

```
<a href="https://twitter.com/share" class="twitter-share-button" data-via="SpotMaroc" data-lang="fr">Tweeter</a> 
```

我试着说：

```
target="_parent" 
```

在第二个代码上但它不起作用，它只共享标题框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T09:43:57.633

为什么不让 Twitter 按钮直接指向您的完整 URL？

```
<a href="https://twitter.com/share?url=X" class="twitter-share-button" data-via="SpotMaroc" data-lang="fr">Tweeter</a> 
```

**X**在哪里是**yourdomain.com/page.php?url=xxx**

# python - 时间戳出现在中线。我如何判断是我的读取还是我的写入导致了问题？

> ID：11931656
> 
> 赞同：0
> 
> 时间：2012-08-13T09:39:52.327
> 
> 标签：python, logging, pyserial

我目前正在尝试从串行连接记录数据。我正在使用 python 模块[pyserial](http://pyserial.sourceforge.net/)。

从串行连接读取一行后，我想为其添加时间戳，然后将其写入文件。

这在大多数情况下都有效，但有时时间戳会出现在文件中线。离尾行字符很远。

这是我正在使用的代码片段：

```
self.serialconnection = serial.Serial(port=self.port, baudrate=115200,
                                      timeout=0)
def run(self):
 openfile = open(self.logfile, 'a')
 while not self.stoprequest.isSet():
  try:
    linefromserial = self.serialconnection.readline()
    if linefromserial:
      linefromserial = linefromserial.replace('\00', '')
      datenow = datetime.datetime.strftime(datetime.datetime.now(), "%Y-%m-%d %H:%M:%S   ")
      dated_linefromserial = datenow + linefromserial
      openfile.write(dated_linefromserial)
  except self.stoprequest.isSet():
    openfile.close()
    break 
```

我没有对串行连接使用超时，因为我在单独的线程中运行它，并且我不希望它阻塞。

那么这种方法有什么明显的问题吗？如何确定问题是由于 readline() 方法未能按我的设想运行，还是文件写入问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:44:32.027

您依靠串行线路中的数据来包含换行符，您永远不会自己编写。串行数据也可能包含回车符（通常以与换行符相同的方式解释），您需要清除它们。

从串行数据中删除回车符（可选），并在编写时添加显式换行符：

```
linefromserial = linefromserial.rstrip('\n').replace('\00', '').replace('\r', '')
datenow = datetime.datetime.strftime(datetime.datetime.now(), "%Y-%m-%d %H:%M:%S")
openfile.write('%s   %s\n' % (datenow, linefromserial)) 
```

现在您总是在收到的每一行的末尾写一个换行符（即使 readline() 调用没有返回一个），并且您确定没有`\r`回车导致其他地方换行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T17:34:50.210

问题是您将超时设置为 0。这意味着当您执行 readline() 时，它将读取缓冲区中已经存在的任何数据，但不会等待 eol。

根据 readline() 的 PySerial API 文档 [http://pyserial.sourceforge.net/pyserial_api.html#serial.FileLike.readline](http://pyserial.sourceforge.net/pyserial_api.html#serial.FileLike.readline)

“读取以行尾 (eol) 字符（默认为 \n）或直到超时终止的行。”

你说你在一个单独的线程中运行它，所以不清楚你为什么不希望它阻塞。

一种可能的解决方案是跟踪先前的读取是否被 eol 终止，然后才将时间戳添加到当前读取。

另一种解决方案是存储您读取的片段，直到您收到带有 eol 的片段，然后将片段组装成一整行，添加时间戳并写入日志文件。

# opencv - 更多关于 OpenCV 的 HoG 和 CvSVM 的问题

> ID：11931658
> 
> 赞同：1
> 
> 时间：2012-08-13T09:40:00.543
> 
> 标签：opencv, computer-vision

我已经设法使用 OpenCV 的 HOGDescriptor::compute 函数从正面和负面图像（来自 INRIA 的个人数据集）中提取 HoG 特征。

我还设法正确打包数据并将其输入 CvSVM 以进行培训。

我有几个问题：

*   在提取特征时，我使用尺寸为 96 x 128 的正图像，而负图像平均为 320 x 240。我一直使用 64 x 128 的窗口大小进行 HoG 提取，我应该使用其他窗口大小吗？

*   正图像提取的特征大小约为 28800 个特征，而负图像的特征大小约为 500000+。我一直在将特征从负数截断为 28800，我认为这是错误的，因为我相信在将这些特征提供给 SVM 时我丢失了太多信息。我应该怎么去解决这个问题？（似乎我只能为负面和正面特征提供相同的样本量）

*   在对大于 64 x 128（或 96 x 160）的图像进行预测时，我应该使用滑动窗口进行预测吗？由于大型负片图像仍然为我提供了超过 500000 个特征，但由于样本量，我无法将其输入 SVM。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T19:03:38.423

为什么不能将所有补丁调整为相同大小？猪描述符取决于窗口大小、块和单元大小。你应该尝试不同的组合。使用小细胞，您可以捕捉到小细节，但您会失去一般性，反之亦然。1.) 不明白问题 2.) 使所有描述符的大小相同，从调整大小的图像中提取 hog。3.) 不明白问题

# android - 在 Android 屏幕上显示多个段落

> ID：11931659
> 
> 赞同：0
> 
> 时间：2012-08-13T09:40:01.387
> 
> 标签：android, android-widget

我正在开发一个基于 android 的移动应用程序。我想放置多个用户可以看到并且可以上下滚动的段落。我不知道如何通过 XML 或通过 java 代码添加多个段落。我正在使用 Eclipse IDE 进行 android 开发。如果有人对此有所了解，我将不胜感激。问候！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T11:21:04.253

选项 #1：使用`WebView`.

选项#2：使用 a `TextView`，也许在 a`ScrollView`中，你的段落在 HTML 中定义并转换为 a`TextView`可以使用的东西`Html.fromHtml()`。

# scala - 在 Scala lambda 中使用 _

> ID：11931661
> 
> 赞同：2
> 
> 时间：2012-08-13T09:40:08.823
> 
> 标签：scala

> **可能重复：**
> [Scala 下划线 - 错误：缺少扩展函数的参数类型](https://stackoverflow.com/questions/7627117/scala-underscore-error-missing-parameter-type-for-expanded-function)

假设以下代码编译（`people`is a `List[Person]`）：

```
people.map(_.address).foreach(println) 
```

为什么会出现以下情况：

```
people.foreach(println(_.address)) 
```

产生讯息

```
missing parameter type for expanded function ((x$4) => x$4.address) 
```

每当通配符嵌套在方法调用中时，似乎都是这种情况。

这是因为编译器试图将代码扩展为？：

```
people.foreach(println(x => x.address)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T09:55:13.110

是的。

您可以使用这种命令来验证这一点：

```
echo object Test { (1 to 1).map(println(_.address)) } > test.scala
scalac -Xprint:typer test.scala 
```

你会在结果中找到这个：

```
intWrapper(1).to(1).map[B, That](println(((x$1) => x$1.address))) 
```

# objective-c - 从情节提要中初始化的 UIViewController 调用方法 - 目标 c

> ID：11931665
> 
> 赞同：-1
> 
> 时间：2012-08-13T09:40:15.953
> 
> 标签：objective-c, ios, ios5, storyboard

我是`Storyboarding`目标 c 的新手，我需要从`UIVIewController`. 在`Storyboarding`我初始化或只是`UIViewController`在`AppDelegate`那里分配指针之前，然后只需从任何类调用方法，访问 AppDelegate 属性。`Storyboarding`如果没有`UIViewController`自己初始化怎么办？`UITabBar`如果它确实重要，我的应用程序就是应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:44:12.977

您可以从您的应用程序委托中获取情节提要的根视图控制器。例如：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    UITabbarController *tbc = (UITabbarController *)self.window.rootViewController;

    // Do any setup you want to here
    // You aren't setting up the controller - just accessing the one that has been set up for you by the storyboard

    return YES;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-13T09:43:45.143

如果您想在任何课程中使用此方法，您可以继续这样做。放置在您的 AppDelegate 中，然后只需在您要从中使用它的控制器上检索共享实例。（您的所有应用程序都可以访问您的 appdelegate）因此只需导入应用程序委托的标头，创建特定 appdelegatename 类的新实例，然后调用共享委托。那么您可以使用该方法，就好像该类拥有它一样。

另外你可以使用这样的东西

```
#import "AppDelegate.h"
#define appDelegate (AppDelegate *) [[UIApplication sharedApplication] delegate] 
```

如果您想从情节提要中指定的任何视图控制器调用方法，您可以通过引用它们的标识符来实现：

```
PreviewViewController *tmp = [[self storyboard] instantiateViewControllerWithIdentifier:@"PreviewViewController"]; 
```

# sinatra - “Sinatra：启动并运行”中的流式传输示例不起作用

> ID：11931666
> 
> 赞同：1
> 
> 时间：2012-08-13T09:40:15.583
> 
> 标签：sinatra

我正在尝试从《*Sinatra: Up and Running* p》一书中运行这个示例。46，但不能让它工作。这是程序代码：

```
require 'sinatra'

before do
  content_type :txt
end

connections = []

get '/consume' do
  stream(:keep_open) do |out|
    # store connection for later on
    connections << out
    # remove connection when closed properly
    out.callback { connections.delete(out) }
    # remove connection when closed due to an error
    out.errback do
      logger.warn 'we just lost a connection!'
      connections.delete(out)
    end
  end
end

get '/broadcast/:message' do
  connections.each do |out| 
    out << "#{Time.now} -> #{params[:message]}" << "\n"
  end
  "Sent #{params[:message]} to all clients."
end 
```

测试代码的说明如下：

```
It’s a little tricky to demonstrate the behavior in text, but a good demonstration would
be to start the application, then open a web browser and navigate to http://localhost:
4567/consume. Next, open a terminal and use cURL to send messages to the server.
    $ curl http://localhost:4567/broadcast/hello
    Sent hello to all clients.
If you look back at the web browser, you should see that the content of the page has
been updated with a time stamp and the message that you sent via the terminal. The
connection remains open, and the client continues to wait for further information from
the server. 
```

当我按照这些说明进行操作时，我没有收到任何错误，但浏览器中没有出现消息“你好”。我正在使用 Webrick 运行 Sinatra。为什么它不起作用？

谢谢！

## 更新（康斯坦丁的建议）

我现在开始细化并执行书中和 OP 中描述的两个步骤。您可以看到 Thin 确实收到了这两个请求。但是，我仍然没有在浏览器中看到输出“hello”。

```
>rackup
>> Thin web server (v1.4.1 codename Chromeo)
>> Maximum connections set to 1024
>> Listening on 0.0.0.0:9292, CTRL+C to stop
127.0.0.1 - - [13/Aug/2012 12:48:03] "GET /consume HTTP/1.1" 200 - 0.0900
127.0.0.1 - - [13/Aug/2012 12:48:03] "GET /favicon.ico HTTP/1.1" 404 447 0.0000
127.0.0.1 - - [13/Aug/2012 12:49:02] "GET /broadcast/hello HTTP/1.1" 200 26 0.00
00
127.0.0.1 - - [13/Aug/2012 12:57:00] "GET /consume HTTP/1.1" 200 - 0.0000 
```

也许错误在我的`configu.ru`文件中：

```
require './streaming.rb'

run Sinatra::Application 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:19:11.333

在 Thin 上运行 Sinatra。`:keep_open`Webrick 不支持。确保您运行的是 Sinatra 1.3.3 或更高版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T20:17:53.290

我有同样的问题。为了加快响应速度，我使用了

```
before do
  content_type 'text/event-stream'
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-20T12:32:38.883

第二条路线必须是 POST：

```
post '/broadcast/:message' do
  connections.each do |out|
    out << "#{Time.now} -> #{params[:message]}" << "\n"
  end

  "Sent #{params[:message]} to all clients."
end 
```

之后，您还必须将消息发布到服务器：

```
curl -vX POST 127.0.0.1:4567/broadcast/hello 
```

# javascript - jQuery 字符过滤器

> ID：11931672
> 
> 赞同：0
> 
> 时间：2012-08-13T09:40:28.750
> 
> 标签：javascript, jquery

我正在使用 jQuery[字符过滤器](https://github.com/akzhan/jquery-keyfilter/blob/master/index.html)，它在 jsfiddle 上工作得很好 - [http://jsfiddle.net/itamarperetz/VgjJs/1/](http://jsfiddle.net/itamarperetz/VgjJs/1/)

我在自己的计算机上使用**相同的代码**（到目前为止，我在 xampp、apache 上运行代码），但它根本不起作用——我可以输入我想要的任何字符（在 jsfiddle 中我' m 无法按预期键入 ".!$^$@$" 等。

*我已经导入了 jQuery 并检查了它是否正确导入。

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js">
</script>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1255">
<title>Insert title here</title>

<script type="text/javascript">
/*
 * This plugin filters keyboard input by specified regular expression.
 * Version 1.7
 * $Id$
 *
 * Source code inspired by Ext.JS (Ext.form.TextField, Ext.EventManager)
 *
 * Procedural style:
 * $('#ggg').keyfilter(/[\dA-F]/);
 * Also you can pass test function instead of regexp. Its arguments:
   * this - HTML DOM Element (event target).
   * c - String that contains incoming character.
 * $('#ggg').keyfilter(function(c) { return c != 'a'; });
 *
 * Class style:
 * <input type="text" class="mask-num" />
 *
 * Available classes:
   * mask-pint:     /[\d]/
   * mask-int:      /[\d\-]/
   * mask-pnum:     /[\d\.]/
   * mask-money     /[\d\.\s,]/
   * mask-num:      /[\d\-\.]/
   * mask-hex:      /[0-9a-f]/i
   * mask-email:    /[a-z0-9_\.\-@]/i
   * mask-alpha:    /[a-z_]/i
   * mask-alphanum: /[a-z0-9_]/i
 */

(function($)
{
    var defaultMasks = {
        pint:     /[\d]/,
        'int':    /[\d\-]/,
        pnum:     /[\d\.]/,
        money:    /[\d\.\s,]/,
        num:      /[\d\-\.]/,
        hex:      /[0-9a-f]/i,
        email:    /[a-z0-9_\.\-@]/i,
        alpha:    /[a-z_]/i,
        alphanum: /[a-z0-9_]/i
    };

    var Keys = {
        TAB: 9,
        RETURN: 13,
        ESC: 27,
        BACKSPACE: 8,
        DELETE: 46
    };

    // safari keypress events for special keys return bad keycodes
    var SafariKeys = {
        63234 : 37, // left
        63235 : 39, // right
        63232 : 38, // up
        63233 : 40, // down
        63276 : 33, // page up
        63277 : 34, // page down
        63272 : 46, // delete
        63273 : 36, // home
        63275 : 35  // end
    };

    var isNavKeyPress = function(e)
    {
        var k = e.keyCode;
        k = $.browser.safari ? (SafariKeys[k] || k) : k;
        return (k >= 33 && k <= 40) || k == Keys.RETURN || k == Keys.TAB || k == Keys.ESC;
    };

        var isSpecialKey = function(e)
    {
        var k = e.keyCode;
        var c = e.charCode;
        return k == 9 || k == 13 || (k == 40 && (!$.browser.opera || !e.shiftKey)) || k == 27 ||
            k == 16 || k == 17 ||
            (k >= 18 && k <= 20) ||
            ($.browser.opera && !e.shiftKey && (k == 8 || (k >= 33 && k <= 35) || (k >= 36 && k <= 39) || (k >= 44 && k <= 45)))
            ;

        };

        /**
         * Returns a normalized keyCode for the event.
         * @return {Number} The key code
         */
        var getKey = function(e)
    {
        var k = e.keyCode || e.charCode;
        return $.browser.safari ? (SafariKeys[k] || k) : k;
        };

        var getCharCode = function(e)
    {
        return e.charCode || e.keyCode || e.which;
    };

    $.fn.keyfilter = function(re)
    {
        return this.keypress(function(e)
        {
            if (e.ctrlKey || e.altKey)
            {
                return;
            }
            var k = getKey(e);
            if($.browser.mozilla && (isNavKeyPress(e) || k == Keys.BACKSPACE || (k == Keys.DELETE && e.charCode == 0)))
            {
                return;
            }
            var c = getCharCode(e), cc = String.fromCharCode(c), ok = true;
            if(!$.browser.mozilla && (isSpecialKey(e) || !cc))
            {
                return;
            }
            if ($.isFunction(re))
            {
                ok = re.call(this, cc);
            }
            else
            {
                ok = re.test(cc);
            }
            if(!ok)
            {
                e.preventDefault();
            }
        });
    };

    $.extend($.fn.keyfilter, {
        defaults: {
            masks: defaultMasks
        },
        version: 1.7
    });

    $(document).ready(function()
    {
        var tags = $('input[class*=mask],textarea[class*=mask]');
        for (var key in $.fn.keyfilter.defaults.masks)
        {
            tags.filter('.mask-' + key).keyfilter($.fn.keyfilter.defaults.masks[key]);
        }
    });

})(jQuery);​
</script>

</head>
<body>
<label><input type="text" class="mask-alphanum" /> - mask-alphanum</label>
​
</body>
</html> 
```

如果您有任何想法可能是什么问题，任何建议都会有所帮助！

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T12:54:36.997

您的文件肯定有其他问题。以下工作（但正如您查询的评论中所说：电子邮件验证太严格）：

```
<!DCOCTYPE html>
<html>
  <head>
    <title>Test inputmask</title>
    <script type="application/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="application/javascript">
/*
 * This plugin filters keyboard input by specified regular expression.
 * Version 1.7
 * $Id$
 *
 * Source code inspired by Ext.JS (Ext.form.TextField, Ext.EventManager)
 *
 * Procedural style:
 * $('#ggg').keyfilter(/[\dA-F]/);
 * Also you can pass test function instead of regexp. Its arguments:
   * this - HTML DOM Element (event target).
   * c - String that contains incoming character.
 * $('#ggg').keyfilter(function(c) { return c != 'a'; });
 *
 * Class style:
 * <input type="text" class="mask-num" />
 *
 * Available classes:
   * mask-pint:     /[\d]/
   * mask-int:      /[\d\-]/
   * mask-pnum:     /[\d\.]/
   * mask-money     /[\d\.\s,]/
   * mask-num:      /[\d\-\.]/
   * mask-hex:      /[0-9a-f]/i
   * mask-email:    /[a-z0-9_\.\-@]/i
   * mask-alpha:    /[a-z_]/i
   * mask-alphanum: /[a-z0-9_]/i
 */

(function($)
{
    var defaultMasks = {
        pint:     /[\d]/,
        'int':    /[\d\-]/,
        pnum:     /[\d\.]/,
        money:    /[\d\.\s,]/,
        num:      /[\d\-\.]/,
        hex:      /[0-9a-f]/i,
        email:    /[a-z0-9_\.\-@]/i,
        alpha:    /[a-z_]/i,
        alphanum: /[a-z0-9_]/i
    };

    var Keys = {
        TAB: 9,
        RETURN: 13,
        ESC: 27,
        BACKSPACE: 8,
        DELETE: 46
    };

    // safari keypress events for special keys return bad keycodes
    var SafariKeys = {
        63234 : 37, // left
        63235 : 39, // right
        63232 : 38, // up
        63233 : 40, // down
        63276 : 33, // page up
        63277 : 34, // page down
        63272 : 46, // delete
        63273 : 36, // home
        63275 : 35  // end
    };

    var isNavKeyPress = function(e)
    {
        var k = e.keyCode;
        k = $.browser.safari ? (SafariKeys[k] || k) : k;
        return (k >= 33 && k <= 40) || k == Keys.RETURN || k == Keys.TAB || k == Keys.ESC;
    };

        var isSpecialKey = function(e)
    {
        var k = e.keyCode;
        var c = e.charCode;
        return k == 9 || k == 13 || (k == 40 && (!$.browser.opera || !e.shiftKey)) || k == 27 ||
            k == 16 || k == 17 ||
            (k >= 18 && k <= 20) ||
            ($.browser.opera && !e.shiftKey && (k == 8 || (k >= 33 && k <= 35) || (k >= 36 && k <= 39) || (k >= 44 && k <= 45)))
            ;

        };

        /**
         * Returns a normalized keyCode for the event.
         * @return {Number} The key code
         */
        var getKey = function(e)
    {
        var k = e.keyCode || e.charCode;
        return $.browser.safari ? (SafariKeys[k] || k) : k;
        };

        var getCharCode = function(e)
    {
        return e.charCode || e.keyCode || e.which;
    };

    $.fn.keyfilter = function(re)
    {
        return this.keypress(function(e)
        {
            if (e.ctrlKey || e.altKey)
            {
                return;
            }
            var k = getKey(e);
            if($.browser.mozilla && (isNavKeyPress(e) || k == Keys.BACKSPACE || (k == Keys.DELETE && e.charCode == 0)))
            {
                return;
            }
            var c = getCharCode(e), cc = String.fromCharCode(c), ok = true;
            if(!$.browser.mozilla && (isSpecialKey(e) || !cc))
            {
                return;
            }
            if ($.isFunction(re))
            {
                ok = re.call(this, cc);
            }
            else
            {
                ok = re.test(cc);
            }
            if(!ok)
            {
                e.preventDefault();
            }
        });
    };

    $.extend($.fn.keyfilter, {
        defaults: {
            masks: defaultMasks
        },
        version: 1.7
    });

    $(document).ready(function()
    {
        var tags = $('input[class*=mask],textarea[class*=mask]');
        for (var key in $.fn.keyfilter.defaults.masks)
        {
            tags.filter('.mask-' + key).keyfilter($.fn.keyfilter.defaults.masks[key]);
        }
    });

})(jQuery);

    </script>
  </head>
  <body>
    <div>
      Only alphabeta and numbers are allowed
      <label><input type="text" class="mask-alphanum" /> - mask-alphanum</label>
    </div>
  </body>
</html> 
```

# perl - 在 Perl 中验证 XPath 表达式

> ID：11931674
> 
> 赞同：-3
> 
> 时间：2012-08-13T09:40:33.603
> 
> 标签：perl, xpath

请参考这个[问题](https://stackoverflow.com/questions/1291826/validate-xpath-expression?rq=1)我们如何在 Perl 中做同样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T10:20:12.147

`xmlXPathNewContext`您在 Perl 中寻找 libxml ？这很容易，您[在 CPAN 中搜索 libxml](https://metacpan.org/search?q=libxml)，然后[搜索（grep）您找到的发行版`xmlXPathNewContext`](http://search.cpan.org/grep?release=XML-LibXML-2.0004&string=xmlXPathNewContext). 之后，您应该已经找到了要复制/粘贴的示例或要阅读的文档。

```
$ perl -mXML::LibXML -e'XML::LibXML::XPathExpression->new( q{/foo} )'

$ perl -mXML::LibXML -e'XML::LibXML::XPathExpression->new( q{/foo<} )'
XPath error : Invalid expression
/foo<
     ^

$ perl -mXML::LibXML -e'XML::LibXML::XPathExpression->new( q{/foo[} )'
XPath error : Invalid expression
/foo[
     ^

$ perl -mXML::LibXML -e'XML::LibXML::XPathExpression->new( q{/foo[]} )'
XPath error : Invalid expression
/foo[]
     ^

$ perl -mXML::LibXML -e'XML::LibXML::XPathExpression->new( q{/foo[1]} )'

$ 
```

# java - 通过反射实例化一个Java对象

> ID：11931675
> 
> 赞同：1
> 
> 时间：2012-08-13T09:40:33.940
> 
> 标签：java, reflection

我有一个关于实例化 Java 对象的特定方式的问题。

基本上，我需要实现一个实现接口的单例。我目前尝试使用工厂和一些反射来做到这一点，试图重现[这个例子](http://www.velocityreviews.com/forums/t134995-singleton-through-an-interface.html)（准确地说是第 5 篇文章）。

我喜欢的部分是通过这种方法，我可以很容易地改变 Singleton 的实现。

问题是我真的不明白如何检索类名。在上面的示例中，这`System.getProperty()`似乎是一种方法，但该示例并未准确显示执行此操作所需的所有类型（未键入该字段）。问题是我不知道给该`getProperty()`方法哪个键。似乎它必须是带有.type（即`mySingleton.name`）的单例私有静态字段的名称，但它似乎不起作用......

我想知道如何检索类名。

顺便说一句，如果有更好的方法可以做到这一点，我愿意接受建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:45:44.740

如果您在询问`String typeName = System.getProperty("a.type");`“

```
private synchronized static final void createA()
{
    // This is just one possibility for getting the class name.
    String typeName = System.getProperty("a.type");
    Class type = Class.forName(typeName);
    a = type.newInstance();
} 
```

从哪里来`a.type`？- 它只是系统属性，仅用于此目的在您的操作系统中声明。

```
Class c = Class.forName("java.lang.String"); 
```

如上所示 -`Class.forName()`需要类的完全限定名称 - 带有包声明

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T09:57:53.680

typeName 是 String 。所以你需要的是完全限定的类名来像你一样用反射加载类

> 类类型 = Class.forName(typeName);

System.getProperty() 是一种访问您在执行程序时拥有的系统属性/环境属性的方法。要通过示例为您缩小范围，您可以设置系统变量，如下所示： 如果在 Windows 中：

> cmd> 设置 a.type = mytest.testclass

如果在 linux 中：

> $ export a.type = mytest.testclass

使您尝试加载的类位于类路径中。

在运行程序之前，您需要执行上述步骤。

谈到最佳实践，上述方法可用于测试程序，但在进入实时解决方案时，您可能会有一些方法从文件或数据库中读取这些类名。可能是某种配置参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T09:48:13.287

您可以根据需要制作任何属性。你可以得到属性，`System.getProperty("my.property")`你可以把它变成一个类`Class.forName()`

也许你可以说什么对你不起作用，因为它很简单，我认为你做的几乎是正确的。

# shell - Shell脚本：在不排序的整数序列中查找最大值

> ID：11931676
> 
> 赞同：11
> 
> 时间：2012-08-13T09:40:37.657
> 
> 标签：shell, unix

我有一个包含一长串整数的文件：

```
10
4
66
.... 
```

我想使用 UNIX 命令行工具找到最大值。我知道我可以使用`sort`（并且确实有解决这个问题的解决方案`sort`），但这是低效的，需要 O(N*log(N)) 和大量内存。通过一个简单的 for 循环，我应该能够找到 O(N) 中的最大值和几个字节的内存。

似乎肯定有一些程序（名称如`max`）可以开箱即用地执行此操作——这是真的吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-13T09:43:55.813

如果不需要负数，您可以使用它：

```
awk '$0>x{x=$0};END{print x}' input.txt 
```

使用它来支持负数：

```
awk 'BEGIN{x=-2147483648};$0>x{x=$0};END{print x}' input.txt 
```

初始化`x`允许解决方案正确处理值 <= 0 的整数列表。有关更多详细信息，请参阅注释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T09:44:24.663

```
 max=1

 while read i
 do
  if [[ "$i" > "$max" ]]; then
     max="$i"
  fi
 done < a.txt

 echo "$max" > b.txt 
```

a.txt 是输入文件（每行都有一个整数）。b.txt 包含 a.txt 中整数的最大值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T10:03:36.473

```
awk '{if($1>a)a=$1;}END{print a}' temp3 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-08-22T12:26:31.423

排序-nr 输入文件.txt | head -1 其中 inputfile.txt 包含所有数字。

# android - 如何在android中获取设备的温度

> ID：11931681
> 
> 赞同：6
> 
> 时间：2012-08-13T09:40:59.683
> 
> 标签：android, sensors, temperature

我想从设备获取温度。但我不知道我该怎么做。请帮我写简单。谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-13T09:53:24.787

您可以将[TYPE_AMBIENT_TEMPERATURE](http://developer.android.com/reference/android/hardware/Sensor.html#TYPE_AMBIENT_TEMPERATURE)用于电池或 CPU 温度。[TYPE_TEMPERATURE](http://developer.android.com/reference/android/hardware/Sensor.html#TYPE_TEMPERATURE)是已弃用的常量。

[文档](http://developer.android.com/reference/android/hardware/SensorManager.html)中可用的代码修改版本应如下所示：

```
import android.app.Activity;
import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.hardware.SensorManager;

public class TempSensorActivity extends Activity, implements SensorEventListener {
 private final SensorManager mSensorManager;
 private final Sensor mTempSensor;

 public TempSensorActivity() {
     mSensorManager = (SensorManager)getSystemService(SENSOR_SERVICE);
     mTempSensor = mSensorManager.getDefaultSensor(Sensor.TYPE_AMBIENT_TEMPERATURE);
 }

 protected void onResume() {
     super.onResume();
     mSensorManager.registerListener(this, mTempSensor, SensorManager.SENSOR_DELAY_NORMAL);
 }

 protected void onPause() {
     super.onPause();
     mSensorManager.unregisterListener(this);
 }

 public void onAccuracyChanged(Sensor sensor, int accuracy) {
 }

 public void onSensorChanged(SensorEvent event) {
 }
} 
```

查看[传感器文档](http://developer.android.com/reference/android/hardware/Sensor.html)了解更多信息。

# android - 如何删除我的应用在 Android 图库中拍摄的所有照片？

> ID：11931682
> 
> 赞同：-1
> 
> 时间：2012-08-13T09:41:02.740
> 
> 标签：android, android-gallery

我正在寻找一种干净简单的方法来删除我的应用放入公共画廊的所有图片。

我试过这个，但它不起作用，虽然它进入了正确的目录：

```
File dir =
  Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM);
    File[] files = dir.listFiles();
    if (files != null){
    for (File file : files) {
        deleteRecursively(file);
    }
} 
```

我需要许可吗？为什么我不能删除我在我的应用程序中创建的文件？

这是 deleteRecursively 方法：

```
void deleteRecursively(File fileOrDirectory) {
    if (fileOrDirectory.isDirectory()){
        for (File child : fileOrDirectory.listFiles()){
            deleteRecursively(child);
        }
    }
    fileOrDirectory.delete();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:56:46.267

尝试将 deleteRecursively() 方法更改为：

```
void deleteRecursively(File fileOrDirectory) {
    if (fileOrDirectory.isDirectory()){
        for (File child : fileOrDirectory.listFiles()){
            deleteRecursively(child);
        }
    } else {
        fileOrDirectory.delete();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T09:44:45.657

您必须在清单文件中添加使用权限`android.permission.WRITE_EXTERNAL_STORAGE"`

# php - 推文按钮计数不是增量值

> ID：11931683
> 
> 赞同：-1
> 
> 时间：2012-08-13T09:41:10.977
> 
> 标签：php, joomla

我在 joomla 中开发了一个站点，并在其中使用了推文按钮，并为此使用了以下代码，但它并没有增加推文的计数：

```
<a class="twitter-share-button" href="https://twitter.com/share">Tweet</a>
<script type="text/javascript">
// <![CDATA[!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");
// ]]>
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T09:50:16.510

我建议查看对 Twitter API 的 JavaScript 调用是否与 WebKit 检查器一起使用。可能是您端的网络状况影响了对 Twitter API 的访问。

同样重要的是要注意 Twitter 的大规模性质可能意味着您的推文不会立即（或在某些情况下可能永远）影响“推文计数”，因为运行如此高需求的平台所需的缓存。

Twitter 有一个常见问题解答，其中涵盖了此特定问题：[https ://dev.twitter.com/docs/tweet-button/faq#count-api-increment](https://dev.twitter.com/docs/tweet-button/faq#count-api-increment)

# api - 雅虎财经API所有币种列表

> ID：11931687
> 
> 赞同：4
> 
> 时间：2012-08-13T09:41:24.830
> 
> 标签：api, csv, yahoo, currency, yahoo-finance

我正在使用这样的 Yahoo Finance API：

[http://download.finance.yahoo.com/d/quotes.csv?s=GBPEUR=X&f=l1](http://download.finance.yahoo.com/d/quotes.csv?s=GBPEUR=X&f=l1)

这给了我英镑 -> 欧元的当前汇率。

但是我如何让它列出所有可用的货币呢？

[http://download.finance.yahoo.com/d/quotes.csv?s=X&f=n0](http://download.finance.yahoo.com/d/quotes.csv?s=X&f=n0)和[http://download.finance.yahoo.com/d/quotes.csv?s=X&f=c4](http://download.finance.yahoo.com/d/quotes.csv?s=X&f=c4) `开始，但我不能走得更远。

文档：[http ://code.google.com/p/yahoo-finance-managed/wiki/csvQuotesDownload](http://code.google.com/p/yahoo-finance-managed/wiki/csvQuotesDownload)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-03-04T22:49:17.620

你想看看这个，这正是你要找的：http: [//finance.yahoo.com/webservice/v1/symbols/allcurrencies/quote?format=json](http://finance.yahoo.com/webservice/v1/symbols/allcurrencies/quote?format=json)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-13T14:17:53.497

Yahoo Finance API 没有官方支持的货币/股票列表。

您可以进入[货币页面](http://finance.yahoo.com/currency-investing)，复制粘贴所有交易对并直接使用它们，或者使用此[xml](http://finance.yahoo.com/webservice/v1/symbols/allcurrencies/quote)，对其进行解析并检索名称和价格。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-11T12:07:58.120

你只需这样做：

```
http://finance.yahoo.com/d/quotes.csv?e=.csv&f=sl1d1t1&s=USDGBP=X,USDEUR=X 
```

将 AAABBB=X 添加到末尾，逗号分隔

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-01-08T10:35:42.577

这是一个 bash one-liner，它将使用来自 @swyx 的 JSON 提要并返回与美元配对的每种货币的排序列表：

```
curl http://finance.yahoo.com/webservice/v1/symbols/allcurrencies/quote?format=json \
   | grep USD/ | cut -d'/' -f2 | cut -c1-3 | sort 
```

它在今天有效，但随着时间的推移，提要的格式（当然还有结构）会发生变化。

# sql - 编号表列

> ID：11931688
> 
> 赞同：1
> 
> 时间：2012-08-13T09:41:27.897
> 
> 标签：sql

我有一个有两列的表：

1.  国家
2.  订单视图

`Country`列已填满。所以我需要`OrderView`按以下方式填写列：

```
Country        OrderView
------------------------
United States     1
Afghanistan       2
Aland Islands     3
Albania           4 
```

依此类推（按字母顺序排列）（美国必须是第一个）。

我知道如何在 linq2sql 中执行此操作，但我在使用 SQL 时遇到了麻烦。你能帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T09:51:05.813

如果问题是针对 SQL Server 的，您可以使用 a`case`和`row_number`.

```
update C
set OrderView = case
                  when Country = 'United States' then 1
                  when Country > 'United States' then rn
                  else rn + 1
                end
from (
      select OrderView,
             Country,
             row_number() over(order by Country) rn
      from YourTable
     ) as C 
```

[SE-数据](https://data.stackexchange.com/stackoverflow/query/77223)

# jquery - jquery-ui 自动完成组合框更改跟踪

> ID：11931695
> 
> 赞同：1
> 
> 时间：2012-08-13T09:42:01.617
> 
> 标签：jquery, jquery-ui, triggers

这里的问题是我想触发对 jquery-ui 的自动完成组合框所做的更改。顺便说一句，这是组合框[Jquery UI Combobox](http://jqueryui.com/demos/autocomplete/#combobox)

这是我正在尝试的一个小提琴：[Js fiddle](http://jsfiddle.net/SuNMV/)

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T10:22:22.223

我加

```
focus:function(event, ui){
    alert(ui.item.value);
}, 
```

在您的代码中，这里是示例[http://jsfiddle.net/sechou/SuNMV/4/](http://jsfiddle.net/sechou/SuNMV/4/)

focus ：在焦点**移动到一个项目**（不是选择）之前， ui.item 指的是焦点项目。焦点的默认操作是将文本字段的值替换为焦点项的值，但前提是焦点事件**由键盘交互触发**。取消此事件会阻止更新值，但不会阻止菜单项获得焦点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T10:42:24.767

检查此代码
特别是 if 条件的其他部分
参见[DEMO](http://codebins.com/bin/4ldqp8e)

```
 this.selected = valid = true;
                            return false;
                        }
                    });
                    if (!valid) {
                        // remove invalid value, as it didn't match anything
                        $(this).val("");
                        select.val("");
                        input.data("autocomplete").term = "";
                        return false;
                    }
                }else{
                  alert(ui.item.value);}
            }
        }) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T20:49:29.453

我还需要额外的事件处理来处理触发更改事件，因为当按下回车键或失去对输入的焦点（点击选项卡或鼠标点击）时，“选定”无法处理。

因此，使用最新版本的 jQuery Autocomplete 脚本，我创建了以下解决方案：**[DEMO](http://jsfiddle.net/cKb7U/)**

*   **Enter：**如果菜单可见，则选择第一项
*   **焦点丢失：**部分匹配触发未找到消息并清除条目（jQuery UI），但完全键入的答案“选择”该值（不区分大小写）

如何使用 Change 方法：

```
$("#combobox").combobox({
    selected: function (event, ui) {
        $("#output").text("Selected Event >>> " + $("#combobox").val());
    }
})
.change(function (e) {
    $("#output").text("Change Event >>> " + $("#combobox").val());
}); 
```

希望这有助于其他需要额外更改事件功能的人来弥补“选定”留下的空白。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-13T22:19:34.860

最简单的方法：

```
$( "select" ).combobox({ 
  select: function (event, ui) {
    $(this).trigger("change"); 
  }
}); 
```

# iphone - ios上的实时推送通知教程

> ID：11931700
> 
> 赞同：0
> 
> 时间：2012-08-13T09:42:33.567
> 
> 标签：iphone, ios, xcode, push-notification, apple-push-notifications

我已经尝试了很多教程来为我的应用程序发送推送通知服务。当我在设备上测试它时它可以工作。但是如果我在我的应用程序在 App Store 上启动后对其进行实时测试，并且我通过从商店下载将它安装在我的设备上，我运行 php 文件以发送推送通知，我没有收到它。这是代码我用于推送通知和我从中学到的[教程。](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
// Override point for customization after application launch.
self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController" bundle:nil] autorelease];
self.window.rootViewController = self.viewController;
[self.window makeKeyAndVisible];

[[UIApplication sharedApplication] registerForRemoteNotificationTypes:
 (UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound | UIRemoteNotificationTypeAlert)];

return YES;
}

- (void)application:(UIApplication*)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData*)deviceToken
{
NSLog(@"My token is: %@", deviceToken);

}

- (void)application:(UIApplication*)application didFailToRegisterForRemoteNotificationsWithError:(NSError*)error
{
NSLog(@"Failed to get token, error: %@", error);
} 
```

是否有任何教程可以教我实时使用它。我将我的 php 文件的环境从沙箱更改为实时。请指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T09:22:17.510

我自己解决了这个问题。

不在 Live 上工作的原因是因为

> (void)application:(UIApplication*)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData*)deviceToken

在这种方法中，设备令牌没有正确注册到我的 php 服务器数据库中。以下代码将有助于在 php 服务器中注册设备令牌

```
- (void)application:(UIApplication*)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData*)deviceToken
{
NSLog(@"My token is: %@", deviceToken);

NSString* newToken = [deviceToken description];

newToken = [newToken stringByTrimmingCharactersInSet:[NSCharacterSet characterSetWithCharactersInString:@"<>"]];
newToken = [newToken stringByReplacingOccurrencesOfString:@" " withString:@""];

NSLog(@"%@",newToken);
NSString *urlString = [NSString stringWithFormat:@"http://sample.com/registerDevice.php?appId=xxx&deviceToken=%@",newToken];

NSURL *url = [[NSURL alloc] initWithString:urlString];

NSURLRequest *urlRequest = [NSURLRequest requestWithURL:url];

NSData *urlData;
NSURLResponse *response;
urlData = [NSURLConnection sendSynchronousRequest:urlRequest returningResponse:&response error:nil];
NSLog(@"data send");

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T12:34:17.487

首先，我不认为使用开发推送通知证书（或临时证书）安装应用程序、获取 deviceToken、安装应用商店应用程序并使用以前的设备令牌发送推送通知会起作用。

此链接确认：[沙盒中的 iPhone APNS 设备令牌与生产](https://stackoverflow.com/questions/1943722/iphone-apns-device-tokens-in-sandbox-vs-production)

这可能解释了为什么您不能向您的应用程序发送推送通知。

此外，您需要将设备令牌发送到您的服务器，因为这是您的服务器了解所有设备令牌的唯一方法。

我建议您查看[苹果文档](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html)。

# playframework - 使用查询字符串播放框架路由问题

> ID：11931701
> 
> 赞同：0
> 
> 时间：2012-08-13T09:42:43.477
> 
> 标签：playframework

我有路线

```
GET /public/img/sv_{oldid}.jpg?code={code}&id={id}

Application.fetchImage(code,id) 
```

Java类中的和方法

```
public static void fetchImage(String code, Long id)
{
    System.out.println(id + "   i  " + code);
} 
```

当我尝试放置 URL 网站时

```
127.0.0.1:900/public/img/sv_8.jpg?code=ABC&id=12 
```

在控制台中我得到错误：

> *忽略代码，id（静态参数必须指定为 key:'value',...）*

如果我更改`?`为`/`路线，它会起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T15:11:45.110

您不需要在函数中写下参数的名称。尝试这个

```
GET     /public/img/sv_{<[0-9]+>old_id}.jpg   Application.fetchImage 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-09T08:46:59.843

不知道你用的是什么版本的play。但这对我有用（玩 2.2.2）：

```
GET  /store/:store_id/book/new  controllers.Application.newMemory(store_id: String, bookname: String ?= "") 
```

该路由器可以匹配：

**/store/store01/book/new?bookname=somebook**，它将调用*controllers.Application.newMemory("store01", "somebook")*

**/store/store02/book/new**，它将调用*controllers.Application.newMemory("store02", "")*

# sql-server - SQL Server ssmssqlproj

> ID：11931702
> 
> 赞同：1
> 
> 时间：2012-08-13T09:42:44.580
> 
> 标签：sql-server

我想`.ssmssqlproj`在 SQL Server Management Studio 2008 R2 Developer edition 中打开项目文件。打开它时会出现`ssmssqlproj`未安装的错误。

我在这里想念什么？

# ios - 强制用户重新授权 Facebook 应用

> ID：11931706
> 
> 赞同：2
> 
> 时间：2012-08-13T09:43:03.337
> 
> 标签：ios, facebook

我有一个使用 Facebook 的 iOS 应用程序。

许多用户已经授权该应用程序并拥有有效的访问令牌。我对应用程序权限设置进行了一些更改，我希望所有用户重新授权该应用程序。

我有没有办法强迫他们重新授权？

# asp.net-mvc-3 - 如何在mvc3中下载文件？

> ID：11931708
> 
> 赞同：1
> 
> 时间：2012-08-13T09:43:09.247
> 
> 标签：asp.net-mvc-3, file, razor, upload, download

我正在编写一个需要能够上传和下载各种文件的网站。如.php、.rar、.jpg、.cs、.pdf、.txt等。当我使用普通的 html 时：

```
 <a href="@Model.dList[i].filePath">download</a> 
```

它在浏览器中显示 txt 和 jpeg 文件的内容，但我不希望这种情况发生。我猜我需要使用控制器并为其编写一些代码。我做了一些研究，发现它与文件的 contentType 属性有关。我和他们玩了一下，写了一个函数

控制器：

```
public FileResult DownloadDoc(int dID)
    {
        string filePath = getFilePath(dID);
        string contentType = getContentType(dID);
        filePath = Path.Combine(Server.MapPath(dr.GetString("FilePath")), dr.GetString("FileName"));
        return File(filePath, contentType);
    } 
```

看法：

```
 @Html.ActionLink("Download", "DownloadDoc", new { dID = @Model.dList[i].documentationID }) 
```

使用此功能会下载一个文件，但它的名称始终是 DownloadDoc，并且没有任何扩展名。我被困在这里。

在上传文件时我应该做点什么吗？顺便说一句，在我上传文件后，它们的路径、内容类型和文件名都存储在数据库中。我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T09:47:58.420

```
string fileName = "FileName.txt";
return File(filePath, contentType, fileName); 
```

然后，文件名将是变量的值`fileName`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T09:46:42.347

使用`File()`函数的第三个参数：

```
return File(filePath, contentType, downloadFileName); 
```

# android - Android 图像像素比较

> ID：11931719
> 
> 赞同：0
> 
> 时间：2012-08-13T09:44:00.363
> 
> 标签：android

我正在尝试对相机捕获的任何随机图像进行数学运算。我想对它们进行比较，我想给出 10 分的评分。

我正在使用它，但它不起作用：

```
 bMap1 = BitmapFactory.decodeFile("/sdcard/mahendra.jpeg");
     bMap2 = BitmapFactory.decodeFile("/sdcard/google.jpg");
     System.out.println(">>>>>>>>>>>"+bMap1+"and"+bMap2);

     //image.setImageBitmap(bMap);

     BitmapFactory.Options opt = new BitmapFactory.Options();
     opt.inPreferredConfig = Bitmap.Config.ARGB_8888;
     opt.inSampleSize = 5;

     int intColor1 = 0;
     int intColor2 = 0;
     for (int x = 0; x <  bMap1.getWidth(); x++) {
        for (int y = 0; y <  bMap1.getHeight(); y++) {
             intColor1 =  bMap1.getPixel(x, y);
             intColor2 = bMap2.getPixel(x, y); 
             //System.out.print(" ("+ x + ","+ y +") c:" + intColor1);   
        }
        String resultString = String.valueOf(intColor1);

     }
     //now calculate percentage difference
     double razlika = (((double)intColor1 - intColor2)/intColor2)*100;
     System.out.println(">>>>>>>>>>>>"+razlika);

      if(razlika<100)
      {
          System.out.println(">>>>>>>>Rating of your image is 1 out of 10");

      } 
```

# ruby-on-rails-3 - Heroku 应用程序 - 无法使用设备和 mongoid、monghq 登录

> ID：11931723
> 
> 赞同：1
> 
> 时间：2012-08-13T09:44:15.943
> 
> 标签：ruby-on-rails-3, heroku, device, mongohq, mongoid3

我有[一个简单的设备，mongoid，mongoHQ，基于 rails 的应用程序部署到 heroku](http://bookfoo.heroku.com)。用户登录给出错误。

宝石文件：

```
source 'https://rubygems.org'

gem 'rails', '3.2.3'

group :development, :test do
    gem 'rspec-rails'
end

group :test do
    gem 'database_cleaner'
    gem 'mongoid-rspec'
    gem 'factory_girl_rails'
    gem 'email_spec'
    gem 'capybara'
    gem 'launchy'
end

group :production do
  gem 'thin'
end

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'
gem "mongoid", :git => "git://github.com/mongoid/mongoid.git"
gem "bson_ext"
gem "devise"
gem 'bcrypt-ruby', '~> 3.0.0' 
```

heroku 日志是：

```
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:425:in `_run__3948797537112734549__validation__2233080772974814440__callbacks'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:405:in `__run_callback'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:385:in `_run_validation_callbacks'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:81:in `run_callbacks'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/bundler/gems/mongoid-3936bea43ffe/lib/mongoid/callbacks.rb:100:in `run_callbacks'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activemodel-3.2.3/lib/active_model/validations/callbacks.rb:53:in `run_validations!'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activemodel-3.2.3/lib/active_model/validations.rb:179:in `valid?'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activemodel-3.2.3/lib/active_model/validations.rb:187:in `invalid?'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/bundler/gems/mongoid-3936bea43ffe/lib/mongoid/validations.rb:78:in `valid?'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/bundler/gems/mongoid-3936bea43ffe/lib/mongoid/persistence/insertion.rb:22:in `prepare'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/bundler/gems/mongoid-3936bea43ffe/lib/mongoid/persistence/operations/insert.rb:26:in `persist'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/bundler/gems/mongoid-3936bea43ffe/lib/mongoid/persistence.rb:50:in `insert'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/bundler/gems/mongoid-3936bea43ffe/lib/mongoid/persistence.rb:79:in `save'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/abstract_controller/base.rb:167:in `process_action'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_controller/metal/rendering.rb:10:in `process_action'
2012-08-13T09:39:06+00:00 heroku[router]: POST bookfoo.herokuapp.com/users dyno=web.1 queue=0 wait=0ms service=140ms status=500 bytes=643
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/devise-2.1.2/app/controllers/devise/registrations_controller.rb:15:in `create'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:436:in `_run__3306383019416481801__process_action__1212020691520070708__callbacks'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:405:in `__run_callback'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:81:in `run_callbacks'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/abstract_controller/callbacks.rb:17:in `process_action'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_controller/metal/rescue.rb:29:in `process_action'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/notifications.rb:123:in `block in instrument'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/notifications.rb:123:in `instrument'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/abstract_controller/base.rb:121:in `process'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1
/gems/actionpack-3.2.3/lib/abstract_controller/rendering.rb:45:in `process'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_controller/metal.rb:203:in `dispatch'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_controller/metal.rb:246:in `block in action'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/routing/route_set.rb:73:in `call'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/routing/mapper.rb:40:in `call'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/routing/route_set.rb:36:in `call'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/routing/route_set.rb:600:in `call'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/bundler/gems/mongoid-3936bea43ffe/lib/rack/mongoid/middleware/identity_map.rb:33:in `block in call'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/bundler/gems/mongoid-3936bea43ffe/lib/rack/mongoid/middleware/identity_map.rb:33:in `call'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/bundler/gems/mongoid-3936bea43ffe/lib/mongoid/unit_of_work.rb:39:in `unit_of_work'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/warden-1.2.1/lib/warden/manager.rb:35:in `block in call'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/warden-1.2.1/lib/warden/manager.rb:34:in `catch'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/warden-1.2.1/lib/warden/manager.rb:34:in `call'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/etag.rb:23:in `call'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/head.rb:14:in `call'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/conditionalget.rb:35:in `call'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:205:in `context'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/flash.rb:242:in `call'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:405:in `_run__1603389820304095047__call__2233080772974814440__callbacks'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/cookies.rb:338:in `call'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:200:in `call'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:405:in `__run_callback'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:81:in `run_callbacks'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/rack/logger.rb:26:in `call_app'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/rack/logger.rb:16:in `call'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/request_id.rb:22:in `call'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/runtime.rb:17:in `call'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/lock.rb:15:in `call'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/static.rb:62:in `call'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:143:in `pass'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:155:in `invalidate'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:71:in `call!'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/application.rb:220:in `call'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/engine.rb:479:in `call'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/railtie/configurable.rb:30:in `method_missing'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/connection.rb:80:in `block in pre_process'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/connection.rb:78:in `catch'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/connection.rb:78:in `pre_process'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/connection.rb:53:in `process'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/connection.rb:38:in `receive_data'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/eventmachine-0.12.10/lib/eventmachine.rb:256:in `run_machine'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/eventmachine-0.12.10/lib/eventmachine.rb:256:in `run'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/backends/base.rb:63:in `start'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/controllers/controller.rb:86:in `start'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/runner.rb:185:in `run_command'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/server.rb:159:in `start'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/runner.rb:151:in `run!'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/bin/thin:6:in `<top (required)>'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/bin/thin:19:in `load'
2012-08-13T09:39:06+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/bin/thin:19:in `<main>'
2012-08-13T09:39:06+00:00 app[web.1]: 
2012-08-13T09:39:06+00:00 app[web.1]: 
```

# iphone - iOS - 在 MKMapView 上显示流量

> ID：11931740
> 
> 赞同：1
> 
> 时间：2012-08-13T09:45:05.723
> 
> 标签：iphone, objective-c, ios, xcode, google-maps

我知道如何在地图视图上显示路线/叠加层。我试图检查 iOS 5 Google Maps 或 iOS 6 Beta Apple Maps 上是否有流量 API，但它不可用。

两种地图（谷歌和苹果）都能够在地图视图上以路线形式显示交通。我正在寻找模仿。有没有我可以使用的 API，或者特别是教程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T10:06:54.917

我不相信来自 Google Traffic 的数据是公开的。在这个 Quora 帖子中有一些有效的答案：[http ://www.quora.com/Is-there-any-public-API-for-obtaining-traffic-information](http://www.quora.com/Is-there-any-public-API-for-obtaining-traffic-information)

您很可能必须自己找出该信息并将其添加到您的地图中，如果您愿意，可以进行着色（就像 iOS 设备上的地图应用程序一样）。

希望有帮助。

# visual-studio-2008 - 资源文件夹从 Visual Studio 2008 的解决方案资源管理器中“排除”

> ID：11931741
> 
> 赞同：1
> 
> 时间：2012-08-13T09:45:13.213
> 
> 标签：visual-studio-2008, resources, solution-explorer

我正在使用 Visual Studio 2008 中的 C# 桌面应用程序。在工作时，我打算`"Resources"`通过右键单击将新项目添加到文件夹中，但我不小心单击`"Exclude from project"`并开始处理，并且文件夹在我的文件夹中不再可见解决方案探索者。

如何在我的项目中重新包含该文件夹，只是出于好奇，它的影响是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:55:04.303

解决方案资源管理器的顶部是 (Toggle-)MenuItem “显示所有文件”。

当您激活 MenuItem 时，应该显示解决方案目录中的所有文件和文件夹。

您的“资源”文件夹应带有白色文件夹符号。右键单击文件夹并选择“包含在项目中”-选项。

之后，“资源”目录再次成为您项目的一部分。

# java - 加载没有 OutOfMemoryError 的大图像

> ID：11931742
> 
> 赞同：16
> 
> 时间：2012-08-13T09:45:15.580
> 
> 标签：java, android, android-canvas, android-image

我有一个 5000 x 4000 像素的图像，我想将其绘制到画布上。

首先，我尝试从资源中加载它。我把它放进去`/res/drawable`。

我使用了以下方法：

```
InputStream input = getResources().openRawResource(R.drawable.huge_image);
Drawable d = Drawable.createFromStream(input, "image");
d.setBounds(...);
d.draw(canvas); 
```

它就像一个魅力。

在这种情况下，`InputStream`是一个`AssetManager.AssetInputStream`.

所以现在我想从 sdcard 加载它。

这是我试图做的：

```
File f = new File(path);
Uri uri = Uri.fromFile(f);
InputStream input = mContext.getContentResolver().openInputStream(uri);
Drawable d = Drawable.createFromStream(input, "image"); 
```

在这种情况下，这`InputStream`是一个`FileInputStream`，我`OutOfMemoryError`在创建`Drawable`.

所以我想知道：

有没有办法加载图像而不会出现该错误？或者有没有办法将 a 转换为`FileInputStream`a `AssetInputStream`？

笔记：

我不想调整图像大小，因为我正在实现缩放/平移功能。请不要告诉我阅读[Loading Large Bitmaps Efficiently](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)。

你可以在[这里](https://github.com/BenitoBertoli/ZoomImageView/blob/master/src/com/benitobertoli/largeimagezoom/ZoomImageView.java)查看完整的课程。使用时出现错误`setImageUri()`。

这是我的错误日志：

```
08-13 11:57:54.180: E/AndroidRuntime(23763): FATAL EXCEPTION: main
08-13 11:57:54.180: E/AndroidRuntime(23763): java.lang.OutOfMemoryError: bitmap size exceeds VM budget
08-13 11:57:54.180: E/AndroidRuntime(23763):    at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
08-13 11:57:54.180: E/AndroidRuntime(23763):    at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:468)
08-13 11:57:54.180: E/AndroidRuntime(23763):    at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:332)
08-13 11:57:54.180: E/AndroidRuntime(23763):    at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:697)
08-13 11:57:54.180: E/AndroidRuntime(23763):    at android.graphics.drawable.Drawable.createFromStream(Drawable.java:657)
08-13 11:57:54.180: E/AndroidRuntime(23763):    at com.benitobertoli.largeimagezoom.ZoomImageView.setDrawablefromUri(ZoomImageView.java:187)
08-13 11:57:54.180: E/AndroidRuntime(23763):    at com.benitobertoli.largeimagezoom.ZoomImageView.setImageUri(ZoomImageView.java:588)
08-13 11:57:54.180: E/AndroidRuntime(23763):    at com.benitobertoli.largeimagezoom.TestActivity.onKeyDown(TestActivity.java:30)
08-13 11:57:54.180: E/AndroidRuntime(23763):    at android.view.KeyEvent.dispatch(KeyEvent.java:1257)
08-13 11:57:54.180: E/AndroidRuntime(23763):    at android.app.Activity.dispatchKeyEvent(Activity.java:2075)
08-13 11:57:54.180: E/AndroidRuntime(23763):    at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchKeyEvent(PhoneWindow.java:1673)
08-13 11:57:54.180: E/AndroidRuntime(23763):    at android.view.ViewRoot.deliverKeyEventToViewHierarchy(ViewRoot.java:2493)
08-13 11:57:54.180: E/AndroidRuntime(23763):    at android.view.ViewRoot.handleFinishedEvent(ViewRoot.java:2463)
08-13 11:57:54.180: E/AndroidRuntime(23763):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1752)
08-13 11:57:54.180: E/AndroidRuntime(23763):    at android.os.Handler.dispatchMessage(Handler.java:99)
08-13 11:57:54.180: E/AndroidRuntime(23763):    at android.os.Looper.loop(Looper.java:144)
08-13 11:57:54.180: E/AndroidRuntime(23763):    at android.app.ActivityThread.main(ActivityThread.java:4937)
08-13 11:57:54.180: E/AndroidRuntime(23763):    at java.lang.reflect.Method.invokeNative(Native Method)
08-13 11:57:54.180: E/AndroidRuntime(23763):    at java.lang.reflect.Method.invoke(Method.java:521)
08-13 11:57:54.180: E/AndroidRuntime(23763):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
08-13 11:57:54.180: E/AndroidRuntime(23763):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
08-13 11:57:54.180: E/AndroidRuntime(23763):    at dalvik.system.NativeStart.main(Native Method) 
```

**编辑：**

我在 HTC Desire A8181 上测试我的代码。在被告知第一个代码片段无法在其他设备上运行后，我在三星 Galaxy S2 和模拟器上进行了测试。

结果：从资源加载时，模拟器给出了一个`OutOfMemoryError`，Galaxy S2没有抛出异常但返回`Drawable`为null。

所以我想目前唯一的解决方案是对图像进行下采样。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-14T09:46:01.237

看一眼：

[http://developer.android.com/reference/android/graphics/BitmapFactory.html](http://developer.android.com/reference/android/graphics/BitmapFactory.html)

```
decodeStream (InputStream is, Rect outPadding, BitmapFactory.Options opts) 
```

或者

```
decodeFile (String pathName, BitmapFactory.Options opts) 
```

这样您就可以加载整个位图并将其显示在屏幕上。

您需要设置正确的选项。

[http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html](http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html)

```
inSampleSize 
```

我用你的代码试过了：

```
 BitmapFactory.Options options = new BitmapFactory.Options();

 options.inSampleSize = 4;

 Bitmap myBitmap = BitmapFactory.decodeFile(mUri.getPath(),options);
 Drawable d = new BitmapDrawable(Resources.getSystem(),myBitmap);
 updateDrawable(d); 
```

为我工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T07:22:59.350

在我看来，最好的选择是将图像分割成更小的部分。这将阻止应用程序给出 OutOfMemoryException。这是我的示例代码

首先从 SD 卡中获取图像并将其放入位图中

```
Bitmap b = null;
        try {
            File sd = new File(Environment.getExternalStorageDirectory() + link_to_image.jpg);
            FileInputStream fis;

            fis = new FileInputStream(sd);

            BitmapFactory.Options options = new BitmapFactory.Options();
            options.inPurgeable = true;
            options.inScaled = false;

            b = BitmapFactory.decodeStream(fis, null, options);
            fis.close();

        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } 
```

将位图 (b) 拆分成更小的部分。在这种情况下，SPLIT_HEIGHT 为 400。

```
double rest = (image_height + SPLIT_HEIGHT);
        int i = 0;
        Bitmap[] imgs = new Bitmap[50];

        do {
            rest -= SPLIT_HEIGHT;
            if (rest < 0) {
                // Do nothing
            } else if (rest < SPLIT_HEIGHT) {
                imgs[i] = Bitmap.createBitmap(b, 0, (i * SPLIT_HEIGHT), image_width, (int) rest);
            } else {
                imgs[i] = Bitmap.createBitmap(b, 0, i * SPLIT_HEIGHT, image_width, SPLIT_HEIGHT);
            }

            i++;

        } while (rest > SPLIT_HEIGHT); 
```

现在您有一组较小的图像。如果你想完美地做到这一点，你可以回收这个位图：

```
// Not needed anymore, free up some memory
        if (b != null)
            b.recycle(); 
```

从这一点开始，您可以将较小的图像放到画布上。在我的下一个代码中，我将图像放入 ScrollView。我认为将图像放在画布上的代码并没有太大的不同。

```
// Add images to scrollview
        for (int j = 0; j < imgs.length; j++) {
            Bitmap tmp = imgs[j];
            if (tmp != null) {
                // Add to scrollview
                ImageView iv = new ImageView(activity);

                String id = j + "" + articlenumber;
                iv.setId(Integer.parseInt(id));
                iv.setTag(i);

                iv.setImageBitmap(tmp);

                RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(globalwidth, tmp.getHeight());
                lp.addRule(RelativeLayout.BELOW, previousLongPageImageId);
                lp.addRule(RelativeLayout.ALIGN_PARENT_LEFT);

                container.addView(iv, lp);
                previousLongPageImageId = iv.getId();
            }
        } 
```

我希望这能帮到您。

注意：图像的最大分辨率为 2048*2048（OpenGL 限制或其他限制），因此您始终必须将图像分割成更小的部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T09:52:21.317

我不确定这样做是否正确，但这仍然可以解决您的问题。

尝试在 web 视图中打开您的图像。这将为您提供内置的放大/缩小和平移功能，您不必担心打开任何输入流或其他任何东西。

要从资产在 web 视图中打开图像：

```
 WebView  wv = (WebView) findViewById(R.id.webView1);  
    wv.loadUrl("file:///android_asset/abc.png"); 
```

您可以[使用 WebSettings](http://developer.android.com/reference/android/webkit/WebSettings.html)来允许缩放控制。

希望对你有帮助！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T07:41:05.540

如果它在您从资源加载时有效，而现在在您手动加载时无效，那么我怀疑您的资源管理有问题，可能是内存泄漏。

`OutOfMemoryError`总是在应用程序开始时发生还是在以后发生？是在配置更改吗？您是否使用静态字段（如果使用不正确，这通常会导致 Android 应用程序中的内存泄漏，[示例说明](http://android-developers.blogspot.com/2009/01/avoiding-memory-leaks.html)适合您的情况）？
尝试使用一些分析工具（[谷歌](https://www.google.pl/search?q=android%20memory%20leaks)可以帮助找到有用的东西）。

# regex - 如果不是另一个字符串的子字符串，如何匹配字符串？

> ID：11931743
> 
> 赞同：4
> 
> 时间：2012-08-13T09:45:16.390
> 
> 标签：regex

我正在寻找一种仅在它不是另一个字符串的子字符串时才匹配字符串的方法。

例子：

```
I need to find if text contains string "bbbb" that is not part of a string "aaaabbbbcccc". 
```

正则表达式应该匹配字符串：

```
aaabbbbcccc
aaaabbbbccc
aaabbbbccc
bbbbcccc
aaaabbbb 
```

但不匹配：

```
aaaabbbbcccc 
```

我试图通过环视来做到这一点：

```
(?<!aaaa)bbbb(?!cccc) 
```

但它不起作用。它只匹配

```
aaabbbbccc 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T10:12:04.067

问题是，如果你按照自己的方式使用，这两个断言都必须是真的。使用交替使其仅在两个断言都失败时才失败，而不是在只有一个断言失败时才失败。

```
(?<!aaaa)bbbb|bbbb(?!cccc) 
```

[在 Regexr 上](http://regexr.com?31qmc)查看

我假设您的第三个示例也应该有四个“b”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T09:57:45.007

如果你这样做：

```
.{0,4}b{4}.{0,4} 
```

然后这个：

```
a{4}b{4}c{4} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T10:06:16.723

```
perl -ne 'print if /bbbb/ && $_!~/aaaabbbbcccc/ ' your_input 
```

# string - Bash：用空字符串替换子字符串

> ID：11931745
> 
> 赞同：2
> 
> 时间：2012-08-13T09:45:19.717
> 
> 标签：string, bash, shell, replace, substring

我有名为：

```
example1 example2 example3 
```

我想从他们每个人中提取示例编号。就像是：

```
for exampleSubfolder in `find . -type d`
do
  example_number= #replace 'example' in $exampleSubfolder with empty string
  #do other stuff in this subfolder
done 
```

有什么简单的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T09:49:31.453

如果您只需要号码：

```
find . -type d -name 'example*' | egrep -o "[0-9]+" 
```

但是如果您想知道文件夹名称和编号之间的对应关系：

```
for f in $(find . -mindepth 1 -maxdepth 1 -type d -name 'example*')
do
   number=${f#example}
done 
```

用字符串替换 bashism 更新。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T09:51:30.883

试试这个：

```
for DIR in /path/to/search/example*; do
  if [ ! -d $DIR ]; then continue; fi
  NUMBER=$(echo $DIR | grep -Eo '[0-9]+$')
  pushd $DIR
    # Do stuff here
  popd
done 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-13T09:53:21.410

```
find . -name "example*" -type d | awk -F"example" '{print $NF}' 
```

# ruby - 如何在 ruby Singleton 中初始化实例变量？

> ID：11931746
> 
> 赞同：1
> 
> 时间：2012-08-13T09:45:19.293
> 
> 标签：ruby

我有一个使用单例模式的 ruby​​ 类。我想在创建类后立即初始化一个实例变量（即调用实例）。最好的地方在哪里？

```
require 'singleton'

class SingletonTest
  include Singleton
  @my_var # where / how should I initialize this
end 
```

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-13T09:47:02.863

你应该在构造函数中这样做，即

```
class MySingleton
  include Singleton

  def initialize
    @something = 42
  end
end 
```

您保证在`.instance`返回之前调用构造函数。

# c# - WPF中的多点触控不起作用

> ID：11931748
> 
> 赞同：-1
> 
> 时间：2012-08-13T09:45:26.533
> 
> 标签：c#, wpf, visual-studio-2010, wpf-controls, multi-touch

我是多点触控编程的新手。我使用 windows7、VS-2010 和 WPF 进行开发。我按照此链接中的教程进行操作：

[http://surfacedeveloper.blogspot.in/2009/10/multi-touch-in-wpf-40-and-vs2010.html](http://surfacedeveloper.blogspot.in/2009/10/multi-touch-in-wpf-40-and-vs2010.html)

这里我没有属性**ManipulationMode="All"**。我不知道我做错了什么。请帮我！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T10:23:10.770

`ManipulationMode`似乎是`UIElement`.NET 4.0 beta 1 中的一个属性。我想这就是现在的[IsManipulationEnabled](http://msdn.microsoft.com/en-us/library/system.windows.uielement.ismanipulationenabled.aspx)。

# php - Symfony2 存储库标准文件夹或命名空间

> ID：11931750
> 
> 赞同：6
> 
> 时间：2012-08-13T09:45:29.653
> 
> 标签：php, symfony, namespaces, doctrine-orm

我正在创建一个存储库以将其与 Symfony2 项目中的实体一起使用，但我不知道在哪里存储该类。我一直在 Internet 上进行研究，但我没有任何关于存储存储库的默认命名空间或默认文件夹的信息。

我可以用两种方法“思考”：

1.  使用Entity文件夹：（entity和entityRepository在同一个文件夹）

    /项目/捆绑/实体；

2.  使用存储库文件夹：（实体文件夹中的实体和存储库一中的存储库）

    /项目/捆绑/实体；/项目/实体/存储库；

**这有什么标准吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T10:14:16.033

你可以将它们存储在任何你想要的地方，但是官方的 Symfony[书](http://symfony.com/doc/current/book/doctrine.html)使用

Acme/DemoBundle/存储库/

所以我认为这将是更标准的方式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-25T22:48:33.060

如果 Symfony 无法找到您的存储库，您可以在实体类中使用注释来定义特定的存储库命名空间\类（例如：“Acme\DemoBundle\Entity\Repository\MyEntityRepository”），如下所示：

```
use Doctrine\ORM\Mapping as ORM;

/**
*@ORM\Entity(repositoryClass="Acme\DemoBundle\Entity\Repository\MyEntityRepository")
*/
class MyEntity { ... } 
```

也许它可以通过 YML、XML 或 PHP 定义，但我在实体上使用注释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T09:57:53.303

我现在正在阅读有关如何使用 Symfony2 创建博客的教程，他们有一个存储库目录，其中存储所有存储库类，如下所示：src/Blogger/BlogBu​​ndle/Repository/BlogRepository.php 我不知道这是不是最好的解决方案，但希望它有所帮助。如果你想看看教程 - 它在这里 - [http://tutorial.symblog.co.uk/docs/extending-the-model-blog-comments.html](http://tutorial.symblog.co.uk/docs/extending-the-model-blog-comments.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-06T15:19:30.430

不希望通过猴子中的扳手，Doctrine 实体生成器在 Entity 文件夹中创建存储库类：

`php app/console doctrine:generate:entity`

**实体：**

```
namespace AppBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * Test
 *
 * @ORM\Table()
 * @ORM\Entity(repositoryClass="AppBundle\Entity\TestRepository")
 */
class Test
{
    /**
     * @var integer
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }
} 
```

**存储库：**

```
namespace AppBundle\Entity;

use Doctrine\ORM\EntityRepository;

/**
 * TestRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class TestRepository extends EntityRepository
{
} 
```

# c# - 模拟 Winforms 中的修饰键

> ID：11931752
> 
> 赞同：0
> 
> 时间：2012-08-13T09:45:35.160
> 
> 标签：c#, winforms, keyboard

我有一个程序，它有一个`TreeView`. 如果用户持有密钥，我会以这种方式`Control`将来自每个`Node`树视图的数据不断添加到`ListView`. 现在我想做的是在模拟按下控制键的同时以编程方式选择这些节点。

所以关键是，如果没有按下 Control 键，负责显示与该节点相关的数据的列表视图将在节点选择时被清除。如果按下控制键，则新选择节点的数据将附加到列表视图中。

有没有办法发送密钥保持消息？我的意思是这样的：

```
 var nodeCount = tvTestGroups.Nodes.Count;

    for(int i = 0; i <nodeCount; i++)
    {
        SendKeys.Send("Control");
        tvTestGroups.SelectedNode = tvTestGroups.Nodes[i];
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T11:18:22.223

对于多选基本 treeView，您可以对其节点使用 Checked 属性（将`CheckBoxes`treeView 的属性设置为`true`）：

```
tvTestGroups.Nodes[i].Checked = true; 
```

如果您想在 listView 中进行多选，请使用以下内容：

```
for(int i = 0; i <nodeCount; i++)    
    listView.SelectedIndices.Add(i); 
```

如果您使用带有多选的自定义treeView，那么您可以声明附加变量（或创建覆盖方法），并在将数据添加到listView时检查它的值

# java - 如何将 Hashmap 存储到 android，以便在使用共享首选项重新启动应用程序时重用它？

> ID：11931753
> 
> 赞同：14
> 
> 时间：2012-08-13T09:45:39.500
> 
> 标签：java, android, hashmap, sharedpreferences

我想将 hashmap 存储到我的 android 应用程序中，当重新启动时，它会显示最后保存的 hashmap 值。

```
HashMap<Integer,String> HtKpi=new HashMap<Integer,String>(); 
```

是我的哈希图，44 个值动态存储在其中。这很好用！！！现在，我想存储它以备将来使用（应用程序重新启动或重用）。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-13T09:49:26.657

您可以将其序列化为 json 并将生成的字符串存储在首选项中。然后，当应用程序重新启动时，从首选项中获取字符串并对其进行反序列化。

编辑 ：

为此，您可以使用[Google Gson](http://code.google.com/p/google-gson/)例如。

您需要将地图包装在一个类中：

```
public class MapWrapper {
  private HashMap<Integer, String> myMap;
  // getter and setter for 'myMap'
} 
```

要存储地图：

```
Gson gson = new Gson();
MapWrapper wrapper = new MapWrapper();
wrapper.setMyMap(HtKpi);
String serializedMap = gson.toJson(wrapper);
// add 'serializedMap' to preferences 
```

要检索地图：

```
String wrapperStr = preferences.getString(yourKey);
MapWrapper wrapper = gson.fromJson(wrapperStr, MapWrapper.class);
HashMap<Integer, String> HtKpi = wrapper.getMyMap(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-13T09:50:37.003

对其进行序列化并将其保存在共享首选项或文件中。当然，您能否做到这一点取决于映射自和映射到的数据类型。（例如，如果您尝试序列化视图，这将不起作用。）

例子：

```
//persist
HashMap<String, Integer> counters; //the hashmap you want to save
SharedPreferences pref = getContext().getSharedPreferences("Your_Shared_Prefs", Context.MODE_PRIVATE);
SharedPreferences.Editor editor = pref.edit();    
for (String s : counters.keySet()) {
    editor.putInteger(s, counters.get(s));
}
editor.commit();

//load
SharedPreferences pref = getContext().getSharedPreferences("Your_Shared_Prefs", Context.MODE_PRIVATE);
HashMap<String, Integer> map= (HashMap<String, Integer>) pref.getAll();
for (String s : map.keySet()) {
        Integer value=map.get(s);
        //Use Value
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-06-10T23:57:57.243

使用 Raghav's 我创建了一个完整的工作示例：

```
public class AppCache {
public static HashMap<String, String> hashMap = null;

/* REPOSITORY NAME */
public static final String REPOSITORY_NAME = "HMIAndroid_System_Settings";

/* SETTINGS */
public static final String SETTING_PLANNED = "DATA_PLANNED";
public static final String SETTING_ACTUAL = "DATA_ACTUAL";
public static final String SETTING_ETA = "DATA_ETA";
public static final String SETTING_OR = "DATA_OR";
public static final String SETTING_LINEID = "LINEID";
public static final String SETTING_SERVERIP = "SERVERIP";

public static void LoadSettings(Context context) {
    SharedPreferences pref = context.getSharedPreferences(REPOSITORY_NAME, Context.MODE_PRIVATE);
    hashMap = (HashMap<String, String>) pref.getAll();
    if(hashMap == null) {
        hashMap = new HashMap<String, String>();
    }
}

public static void SaveSettings(Context context) {
    if(hashMap == null) {
        hashMap = new HashMap<String, String>();
    }

    //persist
    SharedPreferences pref = context.getSharedPreferences(REPOSITORY_NAME, Context.MODE_PRIVATE);
    SharedPreferences.Editor editor = pref.edit();
    for (String s : hashMap.keySet()) {
        editor.putString(s, hashMap.get(s));
    }
    editor.commit();
}
} 
```

然后在你的 onCreate 中加载它：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    //load settings
    AppCache.LoadSettings(getApplicationContext());
    Log.d("onCreate","My LineID=" + AppCache.hashMap.get(AppCache.SETTING_LINEID));
    Log.d("onCreate","Dest ServerIP=" + AppCache.hashMap.get(AppCache.SETTING_SERVERIP));
} 
```

随时随地在您的应用更新设置中：

```
AppCache.hashMap.put(AppCache.SETTING_LINEID, "1");
AppCache.hashMap.put(AppCache.SETTING_SERVERIP, "192.168.1.10"); 
```

在你的 onDestroy 保存设置到缓存：

```
@Override
protected  void onDestroy() {
    //save settings
    AppCache.SaveSettings(getApplicationContext());
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T10:06:13.277

我有一个解决方案。我在我的应用程序中做过同样的事情，我想将状态名称存储为键，将状态缩写存储为值。为此在“res/values/string.xml”中声明了一个字符串数组。这是用于声明数组的代码：

```
 <string-array name="array_string">
    <item>yourKey1;yourValue1</item>
    <item>yourKey2;yourValue2</item>
    <item>yourKey3;yourValue3</item>
</string-array> 
```

在此之后，您要在其中实例化您的哈希图，请执行以下操作：

```
HashMap<String, String> map = new HashMap<String, String>();
    Resources res = getResources();

    String[] stringArray = res.getStringArray(R.array.array_string);

    //R.array.array_string is the name of your array declared in string.xml
    if(stringArray == null || stringArray.length == 0) return;

    for(String string : stringArray) {
        String[] splittedString = string.split(";");
        if(splittedString.length > 0) {
            String key = splittedString[0];
            String value = splittedString[1];
            map.put(key, value);
        }
    } 
```

现在您已经准备好使用 HaspMap 实例了。这是我喜欢的简单方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T09:53:14.223

```
 @Override
protected void onSaveInstanceState(Bundle outState) {
    // TODO Auto-generated method stub
    super.onSaveInstanceState(outState);
} 
```

你可以把它存储在这里......这个方法在一个活动可能被杀死之前被调用，这样当它在未来某个时间回来时它可以恢复它的状态。

然后你可以从这里收回它，，，

```
@Override
protected void onRestoreInstanceState(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onRestoreInstanceState(savedInstanceState);
} 
```

当活动从先前保存的状态重新初始化时，在 onStart() 之后调用此方法，此处在 savedInstanceState 中给出...

我认为这会有所帮助

# mobile - TiBlob 对象到字符串的转换

> ID：11931756
> 
> 赞同：0
> 
> 时间：2012-08-13T09:45:51.037
> 
> 标签：mobile, camera, titanium, blob, appcelerator-mobile

我需要将 TiBlob 图像对象转换为字符串。我尝试了以下方法。但没有成功。

```
var imageFile = Titanium.Filesystem.getFile('images8.png');
var oneImage = imageFile.read();
var image = oneImage;
var tempFile = Titanium.Filesystem.createTempFile();
tempFile.write(oneImage);
var contents = tempFile.read();
var x = Ti.Utils.base64decode(contents);

alert('type of x is '+typeof(x));  //Object
alert('type of x is '+x.text);   //null
alert(JSON.stringify(oneImage));  //output is null
alert('value of image is '+image);  //TiBlob Object
alert(typeof(contents.toString()));    //String
alert('value of image after conversion is '+contents.toString()); //null
alert('value of text image is '+typeof(contents.text));  //String
alert('value of image after conversion text is '+contents.text);  //null 
```

提前致谢...........

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:47:22.437

你不应该打电话`Ti.Utils.base64Decode`，你应该打电话`Ti.Utils.base64encode`。

解码将*以前*的base64 编码字符串转换为非 base64 字符串。如果您想将此图像传递给服务器或任何类似性质的东西，编码就是您要寻找的东西。

# openssl - 在centos 6.3上安装openssl

> ID：11931760
> 
> 赞同：2
> 
> 时间：2012-08-13T09:46:07.767
> 
> 标签：openssl, centos

```
# cd openssl-0.9.8o
# ./config shared –prefix=/usr/local
# make
# make test 
```

当我尝试安装并运行 make test .. 收到以下错误。

```
if [ -n "" ]; then \
          ../util/shlib_wrap.sh ./fips_randtest; \
        fi
starting big number library test, could take a while...
test BN_add
Add test failed!
make[1]: *** [test_bn] Error 1
make[1]: Leaving directory `/usr/local/src/openssl-0.9.8o/test'
make: *** [tests] Error 2 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T10:51:28.440

是否一定要从源代码编译 Openssl？如果不尝试使用：

```
# yum -y install openssl 
```

从命令行，直接使用[YUM](http://en.wikipedia.org/wiki/Yellowdog_Updater,_Modified)安装，它使用互联网下载和安装所需的 RPM 包。

如果您的 CentOS 6.3 机器无法访问 Internet，请从[此处](ftp://ftp.ntua.gr/pub/linux/scientificlinux/6.3/x86_64/updates/fastbugs/openssl-1.0.0-25.el6_3.1.i686.rpm)下载 Openssl 包，将其复制到您的机器，然后使用以下命令进行安装：

```
# rpm -Uvh openssl-1.0.0-25.el6_3.1.i686.rpm 
```

# javascript - 禁用 JavaScript = true vs 启用 ASP.NET = False

> ID：11931762
> 
> 赞同：1
> 
> 时间：2012-08-13T09:46:16.723
> 
> 标签：javascript, asp.net, markup

在我的 ASP.NET Web 应用程序中，我有一些元素可能在代码隐藏中被禁用，而一些元素可能在 JavaScript 中被禁用。

对于代码隐藏元素，我只需使用以下 VB.NET 属性：

```
Me.element1.Enabled = False 
```

对于动态元素，我使用以下 JavaScript 属性：

```
document.getElementById('" & Me.element2.ClientID & "').disabled = true; 
```

我注意到的第一件事是更改 Enabled 属性不仅会添加`disabled="disabled"`到标记中，还会将类从`button`（我的按钮的皮肤类名称）更改为`button aspNetDisabled`. 为了弥补这一点，我添加了以下附加的 JavaScript 行：

```
document.getElementById('" & Me.element2.ClientID & "').className = 'button aspNetDisabled'; 
```

（显然，这意味着如果/当我再次启用该元素时，我需要维护 className 属性，并且我需要确保我使用`button`/ `textbox`/etc。如果适用 - 对于奖励积分，如果您对此有任何建议，我会很高兴听到他们）

**但是，我也注意到通过 JavaScript 生成的标记只是`disabled=""`，而 ASP.NET Enabled 属性更改生成的标记是`disabled="disabled"`.**

我尝试摆弄 JavaScript 以将其更改为：

```
document.getElementById('" & Me.element2.ClientID & "').disabled = 'disabled'; 
```

但是，这似乎没有什么区别，属性仍然是空的。有趣`disabled=true;`并且`disabled='disabled';`似乎以相同的方式工作 - 我希望其中一个更正确（我现在坚持`=true;`）。

**在启用和禁用元素方面，是否有推荐的最佳方法使用 JavaScript 实现与服务器端 ASP.NET 相同的结果？**

和...

**渲染的区别`disabled="disabled"`和`disabled=""`可能给我带来什么问题吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:58:34.443

属性值`disabled`无所谓，*隐含* [http://www.w3.org/TR/html401/interact/forms.html#h-17.12.1](http://www.w3.org/TR/html401/interact/forms.html#h-17.12.1)

虽然有一些奇怪的事情发生。

```
var my_elem = document.getElementById('my_elem');
elem.disabled = true;  // disabled
elem.disabled = false;  // enabled
elem.disabled = "false"; // disabled 
```

奇怪的情况是

```
elem.disabled = ""; // disabled 
```

通常`""`是*假*的（如`"" == false`is `true`）。

我建议您使用框架来设置这些属性以捕获任何浏览器特定的行为。因为`disabled`没有太多的冲突，但是像`opacity`这样的属性在所有浏览器中的工作方式并不相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T09:53:54.687

disabled 属性不必有一个固定的值——它过去可以在没有任何值的情况下工作（例如`<input type=text disabled>`），但这会导致一些验证问题。如果您已经在项目中使用 jquery，则可以使用以下内容：

```
$('#elementname').removeAttr('disabled').removeClass('aspNetDisabled');  // Enable 
```

和

```
$('#elementname').attr('disabled').addClass('aspNetDisabled');  // Disable 
```

`disabled="disabled"`和之间的区别`disabled="true"`并不重要。

# symfony - 集成 Symfony 和 Joomla，优缺点

> ID：11931764
> 
> 赞同：0
> 
> 时间：2012-08-13T09:46:22.087
> 
> 标签：symfony, joomla, joomla2.5

我必须开发一个 Web 应用程序（它就像一个真实的后台办公室）并且我已经考虑在 Symfony 中实现它，因为我的客户需要一些高级要求，比如自定义报告生成。

但我的客户也想要 Joomla 中的前端，以便管理模板和一些插件。我的想法是在 Symfony 中开发后端，然后使用 Joomla 在前端网站上显示信息。

这是一个好的决定吗？请告诉我优点和缺点，并欢迎替代方案。

我不知道如何从 Joomla 访问我的数据，我想我必须开发一个组件来访问数据，不是吗？

数据必须与 Joomla 安装在同一个数据库中，还是可以在另一个数据库中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T05:47:15.307

只需向您的客户解释 Joomla 是一个内容管理系统，而不是应该管理其业务的后端应用程序的适当工具。这就像问：“哦，我需要一个物流管理应用程序，但我想用Gmail来管理它，因为我已经习惯了”。

但是如果你真的别无选择，或者不想和他争论，那就用 Symfony 创建一个 REST API，那里有你所有的业务逻辑。然后为 Joomla 创建一个简单的插件，将 GET 和 POST 发送到您的 API，无论是 CRUD 还是只是读取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T15:15:15.703

与其费力地尝试集成另一个系统，不如查看Joomla 扩展目录网站上的[房地产扩展。](http://extensions.joomla.org/extensions/vertical-markets/real-estate)

除非您对 PHP 和 Joomla API 有丰富的经验，否则创建一个如此复杂的组件将花费您很长时间。

总而言之，这将为您节省大量时间，将与 Joomla 集成并易于使用。

# c# - 从文本框中获取整数

> ID：11931770
> 
> 赞同：7
> 
> 时间：2012-08-13T09:46:32.960
> 
> 标签：c#, textbox, integer

我对 C# 很陌生，这个问题听起来可能很愚蠢。我想知道如何从 the 中获取整数（用户输入）`textBox1`并在 if else 语句中使用它？

请举一些例子

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-13T09:47:53.710

您需要将其值解析`textbox.Text`为字符串`int`值。您可以使用[int.TryParse](http://msdn.microsoft.com/en-us/library/system.int32.tryparse.aspx)或[`int.Parse`](http://msdn.microsoft.com/en-us/library/system.int32.parse.aspx)或[`Convert.ToInt32`](http://msdn.microsoft.com/en-us/library/sf1aw27b.aspx)。

`TextBox.Text`属性是`string`类型。您可以查看以下示例代码。

**int.TryParse**

如果解析成功，这将返回 true，如果解析失败，则返回 false。

```
int value;

if(int.TryParse(textBox1.Text,out value))
{
//parsing successful 
} 
else
{
//parsing failed. 
} 
```

**转换.ToInt32**

如果解析不成功，这可能会引发异常。

```
int value = Convert.ToInt32(textBox1.Text); 
```

**int.解析**

```
int value = int.Parse(textBox1.Text); 
```

稍后你可以`value`在你的 if 语句中使用。

```
if(value > 0)
{
}
else
{
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T09:47:57.593

试试这个：

```
int i = int.Parse(textbox1.Text); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T09:50:24.787

```
 int value = 0;
    if (Int32.TryParse(textbox.Text, out value))
    {
       if (value == 1)
       {
          ... //Do something
       }
       else if (value == 2)
       {
          ... //Do something else
       }
       else
       {
          ... //Do something different again
       }
   }
   else
   {
       ... //Incorrect format...
   } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T09:50:45.967

试试这个

```
string value = myTextBox.Text;
int myNumber = 0;

if(!string.IsNullOrEmpty(value))
{
    int.TryParse(value, out myNumber);
    if(myNumber > 0)
    {
         // do stuff
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T09:54:37.987

我会使用：

```
 try 
        {
            int myNumber = Int32.Parse(myTextBox.Text);
        }
        catch (FormatException ex)
        {
           //failed, not a valid number in string
            throw;
        } 
```

或者

```
 int myNumber = 0;
        if (Int32.TryParse(myTextBox.Text, out myNumber))
        { 
            //success do something with myNumber
        } 
```

# python - 使用 distutils 编译： /usr/lib 添加为文件进行编译

> ID：11931775
> 
> 赞同：0
> 
> 时间：2012-08-13T09:46:57.627
> 
> 标签：python, linux, gcc, distutils

编译我的扩展时，我得到一个链接器错误，说`/usr/bin/ld: /usr/lib: No such file: File format not recognized`. 我注意到`/usr/lib`出于某种奇怪的原因将其作为文件添加到 gcc 命令中。以下是命令及其输出：

```
python setup.py build
running build
running build_ext
building 'test' extension
gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes /usr/include -fPIC -I/usr/include/python2.6 -c test.c -o build/temp.linux-x86_64-2.6/test.o
gcc: /usr/include: linker input file unused because linking not done
gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions /usr/lib /usr/include build/temp.linux-x86_64-2.6/test.o -o build/lib.linux-x86_64-2.6/test.so
/usr/bin/ld: /usr/lib: No such file: File format not recognized
collect2: ld returned 1 exit status
error: command 'gcc' failed with exit status 1 
```

我从所有东西中剥离了`setup.py`除了基础知识之外的所有内容：

```
from distutils.core import setup, Extension

setup(
     name = "test", 
     ext_modules  =  
         [
         Extension("test",
             sources = [
             "test.c"
             ]
         )
         ]
) 
```

这是`test.c`：

```
#include <Python.h>

static PyObject *
py_run_executable(PyObject *self, PyObject *args)
{
     char *file_path = NULL;

     if (!PyArg_ParseTuple(args, "s", &file_path))
         return NULL;

     return PyInt_FromSize_t((size_t) 1);
 }

 PyDoc_STRVAR(pet_cpu__doc__, "Testing module");
 PyDoc_STRVAR(run_executable__doc__, "Function doc");

 static PyMethodDef pet_cpu_methods[]  =  {
     {"run_executable", py_run_executable, METH_VARARGS, run_executable__doc__},
     {NULL, NULL}
 };

 PyMODINIT_FUNC
 initpet_cpu(void)
 {
     Py_InitModule3("test", pet_cpu_methods, pet_cpu__doc__);
 } 
```

## 我尝试过的和我的想法

如您所见，我试图消除扩展本身的问题，并保持最低限度。`python`使用或设置路径的方式似乎存在某种配置错误`distutils`。如果我运行失败的命令并删除`/usr/lib /usr/include`：

```
$ gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions build/temp.linux-x86_64-2.6/test.o -o build/lib.linux-x86_64-2.6/test.so 
```

运行此命令将执行链接并`*.so`生成。似乎主要问题是`distutils`编译本身而不是编译本身。

**我的问题是，为什么要添加这两条路径？**

运行它的计算机是安装了 python 2.6.6 的新 Debian 6.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T16:25:21.840

`CFLAGS`如果可用，则尊重环境变量。

如果您查看`Tweaking compiler/linker flags`@ [http://docs.python.org/install/](http://docs.python.org/install/)，它清楚地描述为与环境变量有关的默认行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T12:31:07.843

原来问题出在我的用户的环境路径上。我尝试运行与 root 相同的命令，其中点文件根本没有更改，**并且运行良好。**

问题是当`CXXFLAGS`, `CFLAGS`,`LDFLAGS`手动设置时，`.profile`它们包含在`gcc`命令中。以下是我的问题行`.profile`：

```
export CFLAGS="/usr/include"   
export CXXFLAGS="/usr/include"  
export LDFLAGS="/usr/lib" 
```

为什么添加这些是因为我需要设置路径来编译另一个不使用`autoconf`或`configure`-script 的项目。

我将此标记为答案。如果有人想出为什么`distutils`将这些路径添加到命令中的确切原因，我将接受该答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-29T06:43:33.220

我遇到了同样的问题。正如@rzetterberg 所述，这是`LDFLAGS`.

原来我设置`LDFLAGS`为`~/.bashrc`： `export LDFLAGS=/some/path/cuda/cuda-9.0/cuda/lib64`

并且应该修改为： `export LDFLAGS=-L/some/path/cuda/cuda-9.0/cuda/lib64`

# php - 如何使用 JSON 字符串发出 POST 请求？

> ID：11931777
> 
> 赞同：1
> 
> 时间：2012-08-13T09:47:00.903
> 
> 标签：php, json, http, post

如果没有 cURL，我怎么能做到这一点？

我在解析 JSON 字符串时不会遇到问题，但是如何发出 POST 请求以返回包含数据的 json 字符串？

```
$dataFeed=$_GET["dataFeed"]; 
$url='urlneedtopostto';

$data=array('data'=>$dataFeed);
$jsonString=json_encode($data); 
```

我怎样才能发布这个请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T09:54:18.740

也许您可以使用 jQuery 发布请求？ [http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

# java - 数据库查询 j2me 包括标准

> ID：11931780
> 
> 赞同：2
> 
> 时间：2012-08-13T09:47:05.173
> 
> 标签：java, database, java-me, criteria

我正在使用 J2ME 创建一个应用程序。为了与数据库连接，我正在使用[RecordStore](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/rms/RecordStore.html)。

所以要获得记录，我需要写如下：

```
public boolean SearchRecord(String Rec, int pos )
    {
        String [] data = getRecordData();

        Rec = Rec.substring(0,pos);
        for ( int i = 0 ; i < data.length ; i++ )
        {
            data[i] = data[i].substring(0, pos );
            if ( Rec.toString().trim().equals(data[i].toString().trim()) )
            {
                data = null; // System.gc();
                return true;
            }
        }

        data = null; // System.gc();
        return false;
    } 
```

这是首先获取所有记录并遍历它以搜索记录。但是我有数千条记录，我只需要一些基于标准的记录有什么办法可以解决这个问题吗？我不想遍历数千条记录来获得十条记录。

我对 LWUIT 更好或 JSR 更好实现的 UI 部分感到困惑的另一件事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T15:19:39.663

您在问题中所说的代码是我的[回答](https://stackoverflow.com/a/11606698/996493)中的方法。大约一年前，我开发了这段代码，仅用于搜索目的。RMS 的基础是**平面文件的结构化版本**。您不能在 RMS 上触发查询。没有用于从 RMS 搜索记录的内置方法。这也是经过多次研发开发上述代码的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T11:45:49.500

如果你打电话`SearchRecord`很多，你可以做`String [] data`一个属性。这将导致您的方法的较小版本：

```
public boolean SearchRecord(String rec, int pos )
{
    rec = rec.substring(0, pos).trim();
    for ( int i = 0 ; i < this.data.length ; i++ )
    {
        String comp = this.data[i].substring(0, pos);
        if ( rec.equals(comp.trim()) )
        {
            return true;
        }
    }

    return false;
} 
```

# php - 根据表单数据与 MySQL 数据的两个日期打印 Ymd 工作日列表

> ID：11931783
> 
> 赞同：0
> 
> 时间：2012-08-13T09:47:15.587
> 
> 标签：php, mysql, forms, date, between

我有这两张`MySQL`表：

```
desc students;
+---------------------------+---------------+
| Field                     | Type          |
+---------------------------+---------------+
| student_id                | INT(11)       |
| student_firstname         | VARCHAR(255)  |
| student_lastname          | VARCHAR(255)  |
+---------------------------+---------------+

desc studentabsence;
+---------------------------+---------------+
| Field                     | Type          |
+---------------------------+---------------+
| student_id                | INT(11)       |
| student_absence_startdate | date          |
| student_absence_enddate   | date          |
+---------------------------+---------------+ 
```

如果我运行以下查询：

```
SELECT 
    * 
FROM 
    students s 
        INNER JOIN studentabsence sa 
            ON s.student_id = sa.student_id
WHERE s.student_id = '1' 
```

我得到以下输出：

```
+------------+-------------------+-----------------+------------+---------------------------+-------------------------+
| student_id | student_firstname | student_lastname| student_id | student_absence_startdate | student_absence_enddate |
+------------+-------------------+-----------------+------------+---------------------------+-------------------------+
|       1    | John              | Doe             | 1          | 2012-08-01                | 2012-08-08              |
+------------+-------------------+-----------------+------------+---------------------------+-------------------------+ 
```

现在，我有`<form>`一个用户可以选择学生的位置和日期范围。我想知道是否可以将用户选择的两个日期与数据库值进行比较，如果学生拥有数据的范围之间的所有工作日都存在匹配回显。

因此，如果用户发布以下表单，则使用上面的示例：

```
student_id = '1'
student_absence_startdate = '2012-08-02'
student_absence_enddate = '2012-08-06' 
```

我想`echo`：

```
2012-08-02
2012-08-03
2012-08-06 
```

任何指向正确方向的指针都会受到高度赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T09:56:04.713

我仅根据查询发布此回复。此外，如果您将数据类型保留为日期，将对您有很大帮助。

```
SELECT * FROM students s
INNER JOIN studentabsence sa ON s.student_id = sa.student_id
AND s.student_id = '1'
AND student_absence_startdate >= 2012-08-02
AND student_absence_enddate < 2012-08-06 
```

# c# - 启用树视图 false

> ID：11931787
> 
> 赞同：0
> 
> 时间：2012-08-13T09:47:26.950
> 
> 标签：c#, telerik

如果 Rad Treeview 的 enable 属性分配为 false，则用户无法进入节点。

[http://demos.telerik.com/aspnet-ajax/treeview/examples/programming/databindings/defaultcs.aspx](http://demos.telerik.com/aspnet-ajax/treeview/examples/programming/databindings/defaultcs.aspx)

例如，不应选择/取消选择任何节点，但可以进入所有节点。我该怎么做？它有任何财产吗？

编辑：树视图的启用属性应该是假的，但用户可以走进运动等。 ![树视图的启用属性应该是假的，但用户可以走进运动等。](../Images/22b52f40b9dca78a05342a1570b16625.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-15T15:44:36.673

将每个项目的 IsEnabled 属性设置为 false。之后，用户无法编辑他们的值。

请参阅：[http ://docs.telerik.com/devtools/wpf/controls/radtreeview/features/treeview-item/feautres-treeviewitem-enable-disable-items](http://docs.telerik.com/devtools/wpf/controls/radtreeview/features/treeview-item/feautres-treeviewitem-enable-disable-items)

# android - 计时器不停止

> ID：11931788
> 
> 赞同：1
> 
> 时间：2012-08-13T09:47:29.980
> 
> 标签：android

基本上，当用户赢得比赛时，我想将原始分数动画（计数）到新分数。

我正在尝试使用计时器来执行此操作，如下所示

```
 public final void updatePlayerScore(final int newScore){ 
      final Timer t = new Timer();
      TimerTask tt = new TimerTask() {
        @Override
        public void run() {
            mHandler.post(new Runnable() {
                    public void run() {
                        initialScore++;
                            // update TextView
                        scoresTextView.setText("" + initialScore);
                        if(initialScore >= newScore){
                            t.cancel();
                            mHandler2.postDelayed(mLaunchNextQuestion,1000);
                        }
                    }
           });
    }
};

t.scheduleAtFixedRate(tt, 0, 2); 
```

当 initialScore 等于或大于 newScore 时，每次调用 TimerTask（每 2 毫秒）时，初始分数都会向上增加 - 它应该取消计时器，然后加载新的活动 mLaunchNextQuestion。

实际情况是，mLaunchNextQuestion 被多次调用。我猜这是因为 timer.cancel 不工作或计时器运行速度太快而被取消？

**更新 - -**

感谢关于刷新率太快的建议。我最终放弃了计时器，而是使用了一个在延迟后调用自身的可运行对象。

```
private Runnable updatePlayerScoreNew(final int newScore){

    Runnable aRunnable = new Runnable(){
        public void run(){
            if (initialScore >= newScore) {
                mHandler.postDelayed(mLaunchNextQuestion,1000);
            } else {
                initialScore+=40;
                if(initialScore > newScore){
                    scoresTextView.setText("" + newScore);
                }else{
                    scoresTextView.setText("" + initialScore);
                }
                mHandler.postDelayed(updatePlayerScoreNew(newScore), 40);
            }
        }
    };

    return aRunnable;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T10:03:43.340

为什么要以 500Hz 运行此计时器？这只是显示一个滴答作响的分数，对吧？人眼无法看到快速移动的事物。实际上，它只记录 13Hz 之类的变化（取决于它是什么类型的变化），所以通常情况下，将该速率加倍（到 25Hz 或 30Hz）是安全的。

不过，500Hz 太高了。尝试将速率设置为较慢，然后看看会发生什么。

[您也可以尝试在 TimerTask 上调用 cancel()](http://androidimran.blogspot.com/2012/05/android-timertask-example.html)`cancel()`，尽管我认为调用`Timer`应该是有效的。

# javascript - 统计历史记录的页数

> ID：11931792
> 
> 赞同：3
> 
> 时间：2012-08-13T09:47:55.007
> 
> 标签：javascript, jquery, jquery-ui, jquery-mobile, cordova

有什么方法可以检查 Dom/cache 中有多少页？

在我的应用程序中有几个页面，如果任何时候假设会话过期，那么服务器会给我响应代码 say-1。我每次都检查响应代码，如果它是-1，那么我必须向用户显示索引页面，因为我正在这样做：

```
window.history.go(-4); 
```

但在上述情况下，我将值设为 -4，因为在这里我知道 Dom 中有 4 个页面，但在运行时我如何知道 DOm 中有多少页面？

任何帮助/建议将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-13T09:49:09.070

尝试这个：

```
 window.history.length //4 
```

参考：[https ://developer.mozilla.org/en-US/docs/DOM/window.history](https://developer.mozilla.org/en-US/docs/DOM/window.history)

> 长度 整数 只读。返回会话历史记录中的元素数量，包括当前加载的页面。例如，对于在新选项卡中加载的页面，此属性返回 1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T09:52:15.763

我会`window.location`改用，但如果你真的想计算 DOM 中的页面数，你可以简单地做`$('[data-role="page"]').length`：

# c# - 如何在 C# 中使用 WebBrowser 控件清除浏览历史记录

> ID：11931795
> 
> 赞同：-1
> 
> 时间：2012-08-13T09:47:58.680
> 
> 标签：c#, browser, webbrowser-control, browser-history

我想`WebBrowser`在完成浏览后清除 C# 中控件 的浏览历史记录`WebBrowser`。

这是我的代码：

```
try
{
    foreach (string sr in File.ReadAllLines("link.txt"))
    {
        webBrowser1.Navigate(sr);
        webBrowser1.ScriptErrorsSuppressed = true;
    }
    while (webBrowser1.ReadyState != WebBrowserReadyState.Complete)
    {
        Application.DoEvents();
    }                               
}
catch(Exception)
{
    MessageBox.Show("Internet Connection not found","Error",MessageBoxButtons.OK,MessageBoxIcon.Error);
    this.Close();
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-15T08:06:51.617

临时网络文件

```
System.Diagnostics.Process.Start("rundll32.exe", "InetCpl.cpl,ClearMyTracksByProcess 8") 
```

饼干（）

```
System.Diagnostics.Process.Start("rundll32.exe", "InetCpl.cpl,ClearMyTracksByProcess 2") 
```

历史（）

```
System.Diagnostics.Process.Start("rundll32.exe", "InetCpl.cpl,ClearMyTracksByProcess 1") 
```

表格（数据）

```
System.Diagnostics.Process.Start("rundll32.exe", "InetCpl.cpl,ClearMyTracksByProcess 16") 
```

密码

```
System.Diagnostics.Process.Start("rundll32.exe", "InetCpl.cpl,ClearMyTracksByProcess 32") 
```

删除所有）

```
System.Diagnostics.Process.Start("rundll32.exe", "InetCpl.cpl,ClearMyTracksByProcess 255") 
```

全部删除 – 同时删除附加组件存储的文件和设置

```
System.Diagnostics.Process.Start("rundll32.exe", "InetCpl.cpl,ClearMyTracksByProcess 4351") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T12:52:47.227

实际上，有两种类型的历史。一个是“已访问”页面列表，另一个是您在 IE 历史用户界面中看到的实际历史。

您将获得 3 种类型的缓存，以“Cookie:”开头，另一种以“Visited:”开头 - 仅代表访问过的站点列表（它不是历史记录，不要混淆两者），最后一个类型只是以 http:// 或 https:// 开头的 url 的形式出现。循环播放后，您可以选择要删除的内容。

如果要删除访问过的页面列表，则需要使用 DeleteUrlCacheEntry 删除每个项目。通过使用 FindFirst/NextUrlCacheEntry API 循环访问，您可以访问创建这些项目的时间和日期，因此仅删除在浏览器会话开始之后和完成之前创建的项目。

对于 FindFirst/NextUrlCacheEntry 和 DeleteUrlCacheEntry 信息，网上有预先编写的代码可以使用，然后您可以轻松创建过滤器来决定在循环这些缓存条目时要删除哪些项目。

让我知道我是否可以提供进一步的帮助。

# c# - 目前不允许对 GET 请求进行更新。ON CopyDocumentSet

> ID：11931798
> 
> 赞同：0
> 
> 时间：2012-08-13T09:48:08.183
> 
> 标签：c#, sharepoint

我已经尝试了有关此问题的所有方法，但找不到错误。

我网站的结构是这样的

会议（SiteCollection、RootWeb）

1.1 BoardOFDirectors（子网站）

1.1.1 20120101（子网站）

1.1.2 20120202（子网站）

在会议内部有一个称为会议的列表。在每个子站点内都有一个名为议程点的列表，其中包含文档集。

我创建了一个自定义操作来将议程点从一个会议站点复制到下一个会议站点。

我在 CopyTo 方法中遇到以下异常。如您所见，我在任何地方都设置了 allowunsafeupdates=true 。我错过了什么？？

目前不允许对 GET 请求进行更新。要允许对 GET 进行更新，请在 SPWeb 上设置“AllowUnsafeUpdates”属性。

```
protected void Page_Load(object sender, EventArgs e)
        {
            Logger.LogDebug("CopyAgendaPointToNextMeetingWithAttachments", "Page_Load(object sender, EventArgs e)", "BEGIN");

            string source = Request.Url.ToString();
            string state = Request.GetQueryStringValue(MeetingsCommon.Constants.QUERYSTRINGPARAMETER_STATE_NAME);
            string statusMessage = Request.GetQueryStringValue(MeetingsCommon.Constants.QUERYSTRINGPARAMETER_MESSAGE_NAME);
            this.litMessage.Text = statusMessage;

            if (!string.IsNullOrEmpty(state))
                return;

            using (SPLongOperation operation = new SPLongOperation(this.Page))
            {
                SPWeb currentWeb = SPContext.Current.Web;
                SPSite currentSite = currentWeb.Site;
                try
                {                    
                    operation.Begin();
                    currentSite.WebApplication.FormDigestSettings.Enabled = false;
                    currentSite.RootWeb.AllowUnsafeUpdates = true;
                    currentWeb.AllowUnsafeUpdates = true;  

                    string listID = Request.QueryString[MeetingsCommon.Constants.QUERYSTRINGPARAMETER_LISTID_NAME];
                    string listItemID = Request.QueryString[MeetingsCommon.Constants.QUERYSTRINGPARAMETER_ID_NAME];  
                    string webappUrl = currentSite.WebApplication.GetResponseUri(currentSite.Zone).ToString();
                    source = source.Replace(webappUrl.ToLower(), currentWeb.Url.ToLower() + "/");

                    SPSecurity.RunWithElevatedPrivileges(() =>
                    {
                        SPList currentList = currentWeb.GetSafeListByGuid(new Guid(listID));
                        SPListItem item = currentList.GetItemById(Convert.ToInt32(listItemID));
                        SPWeb siteCollectionRootWeb = currentWeb.ParentWeb.ParentWeb.Site.RootWeb;
                        string type = currentWeb.Name.Substring(0, 2);
                        SPList listMeetingsRoot = siteCollectionRootWeb.GetSafeListByName(Meetings.Common.Constants.LISTS_MEETINGCALENDAR_NAME);

                        SPQuery query = new SPQuery();
                        query.Query = string.Concat(
                            "<Where>",
                            "<And>",
                            "<BeginsWith>",
                                "<FieldRef Name='" + Meetings.Common.Constants.FIELDS_TEXT_TITLE_NAME + "' />",
                                "<Value Type='Text'>" + type + "</Value>",
                            "</BeginsWith>",
                            "<Gt>",
                                " <FieldRef Name='" + Meetings.Common.Constants.FIELDS_EVENTDATE_NAME + "' />",
                                "<Value Type='DateTime'><Today /></Value>",
                            "</Gt>",                                   
                            "</And>",
                            "</Where>");
                        query.RowLimit = 1;

                        SPListItemCollection itemsMeetings = listMeetingsRoot.GetItems(query);
                        if (itemsMeetings.Count == 1)
                        {
                            SPFieldUrlValue value = new SPFieldUrlValue(itemsMeetings[0][Meetings.Common.Constants.FIELDS_MEETINGSITEURL_NAME].ToString());
                            string urlOfNextMeetingSite = value.Url;
                            using (SPSite nextMeetingSite = new SPSite(urlOfNextMeetingSite))
                            {
                                using (SPWeb nextMeetingWeb = nextMeetingSite.OpenWeb())
                                {
                                    try
                                    {
                                        nextMeetingSite.RootWeb.AllowUnsafeUpdates = true;
                                        nextMeetingWeb.ParentWeb.AllowUnsafeUpdates = true;
                                        nextMeetingWeb.AllowUnsafeUpdates = true;
                                        SPList targetList = nextMeetingWeb.GetSafeListByName(MeetingsCommon.Constants.LISTS_AGENDAPOINTS_NAME);
                                        SPDocumentLibrary targetDocumentLibrary = nextMeetingWeb.GetSafeDocumentLibraryByName(MeetingsCommon.Constants.LISTS_AGENDAPOINTS_NAME);
                                        SPContentTypeId targetCTId = targetList.ContentTypes.BestMatch(new SPContentTypeId(MeetingsCommon.Constants.CONTENTTYPES_AGENDAPOINT_ID));
                                        string id = itemsMeetings[0]["UniqueId"].ToString();

                                        DocumentSet sourceDocumentSet = DocumentSet.GetDocumentSet(item.Folder);
                                        DocumentSet targetDocumentSet = null;
                                        if (sourceDocumentSet != null)
                                        {
                                            targetDocumentSet = sourceDocumentSet.CopyTo(targetList.RootFolder, targetCTId);
                                            SPListItem destinationListItem = targetDocumentSet.Item;
                                            destinationListItem[MeetingsCommon.Constants.FIELDS_AGENDAPOINTSRECURRENT_NAME] = "False";
                                            destinationListItem[MeetingsCommon.Constants.FIELDS_AGENDAPOINTSCOPYATTACHMENTS_NAME] = "False";
                                            destinationListItem.Update();
                                            statusMessage = string.Format(HelperFunctions.GetResourceString(MeetingsCommon.Constants.RESOURCES_FILE_NAME, "Message_CopyAgendaPoint"), nextMeetingWeb.Url, nextMeetingWeb.Name);
                                        }
                                    }
                                    catch (Exception)
                                    {
                                        throw;
                                    }
                                    finally
                                    {
                                        nextMeetingWeb.AllowUnsafeUpdates = false;
                                        nextMeetingWeb.ParentWeb.AllowUnsafeUpdates = false;
                                        nextMeetingSite.RootWeb.AllowUnsafeUpdates = false;
                                    }                                    
                                }
                            }
                        }
                        else
                        {
                            statusMessage = HelperFunctions.GetResourceString(MeetingsCommon.Constants.RESOURCES_FILE_NAME, "Message_CopyAgendaPointNoNextSiteFound");
                        }
                    });
                }
                catch (Exception ex)
                {
                    Logger.LogError("CopyAgendaPointToNextMeetingWithAttachments", "Page_Load(object sender, EventArgs e)", ex);
                    statusMessage = ex.Message;
                }
                finally
                {
                    statusMessage = HttpUtility.UrlEncode(statusMessage);                                    
                    currentWeb.AllowUnsafeUpdates = false;
                    currentSite.RootWeb.AllowUnsafeUpdates = false;
                    currentSite.WebApplication.FormDigestSettings.Enabled = true;   
                    operation.End(source, Microsoft.SharePoint.Utilities.SPRedirectFlags.DoNotEncodeUrl, HttpContext.Current, "&state=completed&message=" + statusMessage);
                }
                Logger.LogDebug("CopyAgendaPointToNextMeetingWithAttachments", "Page_Load(object sender, EventArgs e)", "END");
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T10:43:23.303

createdocumentset 或 copyto 方法不允许获取请求

[http://social.technet.microsoft.com/Forums/en-IN/sharepoint2010programming/thread/b2d13a96-f32b-41c5-a1ac-0c9280921f59](http://social.technet.microsoft.com/Forums/en-IN/sharepoint2010programming/thread/b2d13a96-f32b-41c5-a1ac-0c9280921f59)

# objective-c - 在创建谓词时获取 SIGABRT

> ID：11931799
> 
> 赞同：1
> 
> 时间：2012-08-13T09:48:10.260
> 
> 标签：objective-c, ios

在我的应用程序中，我`NSPredicate`用来过滤一个数组，其中填充了来自 iPhone 通讯录的数据。

对于数组中的每个人，我得到`firstName`、和`lastName`，然后根据搜索字符串过滤数组，`email``nickName`

我为此创建了一个谓词`searchString`，但由于某种我无法弄清楚的原因，我的应用程序崩溃了。

我是 Predicates 的新手，无法弄清楚，我哪里出错了，我的代码在 'contains' 而不是 'beginswith' 下运行良好？

这是使我的应用程序崩溃的代码片段，

```
NSPredicate *filterPredicate = [NSPredicate predicateWithFormat:
                                            @"(firstName beginswith[cd] %@) OR (lastName beginswith[cd] %@) OR (nickName beginswith[cd] %@) OR (email beginswith[cd] %@)",
                                            searchTextComponent,searchTextComponent,searchTextComponent]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T09:56:05.187

你有 4 个 "%@" 并且只有 3 个参数。

```
NSPredicate *filterPredicate = [NSPredicate predicateWithFormat:
                                            @"(firstName beginswith[cd] %@) OR (lastName beginswith[cd] %@) OR (nickName beginswith[cd] %@) OR (email beginswith[cd] %@)",
                                            searchTextComponent,searchTextComponent,searchTextComponent, SEARCHTEXTCOMPONENT ONE MORE TIME]; 
```

# html - Chrome 搜索栏 1px 不合适

> ID：11931802
> 
> 赞同：0
> 
> 时间：2012-08-13T09:48:18.687
> 
> 标签：html, css, google-chrome

我的搜索栏在表单输入和搜索输入之间相差 1px。不知道为什么！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:53:22.913

添加`float:left`到您的`#search`输入。

# python - 如果 len == 1，则仅在字典中获取值

> ID：11931804
> 
> 赞同：0
> 
> 时间：2012-08-13T09:48:43.817
> 
> 标签：python, coding-style

如果我的字典只有一个元素，是否有更好的方法来获取字典中的单个值？

我目前正在做`if len(a) == 1: print a.values()[0]`，这是pythonic的方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T16:04:49.240

作为风格问题，您应该将所有字典和列表视为具有多个条目。

```
di={1:'one'}
for e in sorted(di):
    print di[e] 
```

如果您知道您正在处理的数据结构将（或应该）只有一个元素，或者元素的位置是最关键的，请使用不同的结构。在 Python 中，使用元组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-12T20:48:49.953

如果你有这样的字典：

```
nice_dict = {'name': 'rodrigo'} 
```

一个只有一个键的字典，并且想要你可以做这样的事情的价值：

```
def get_single_element_dict_value(single_ement_dict):
    return list(single_element_dict.values())[0] 
```

我认为这是一个很好的方法。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-14T16:11:51.907

没有更好的方法，它应该可以正常工作

# php - 使用 RewriteRule/PHP 时写入 Apache ErrorLog (404)

> ID：11931806
> 
> 赞同：0
> 
> 时间：2012-08-13T09:49:00.697
> 
> 标签：php, apache, mod-rewrite, url-rewriting

使用似乎是相当标准的：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ /index.php [L] 
```

所有请求都转到 index.php 文件来处理（除非 Apache 已经可以在磁盘上看到该文件）。

但是如果脚本确定所请求的 URL 不存在 (404)，您如何将其记录在 Apache ErrorLog 中？

该脚本返回一个 404 标头：

```
HTTP/1.1 404 Not Found 
```

但是错误日志仍然是空的，而访问日志显示404：

```
192.168.2.2 - - [13/Aug/2012:10:39:35 +0100] "GET /404 HTTP/1.1" 404 32958 
```

由于服务器托管了多个网站，我希望它们都使用相同的机制来记录这些错误（而不是必须在 PHP 中写入第二个日志文件，或者尝试让 PHP 对同一个文件进行 fopen/fread/fclose Apache 可能已经锁定）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:55:12.160

您可以写入 stderr，因为 apache 会捕获它并将其附加到自己的错误日志中：

```
$stderr = fopen('php://stderr', 'w'); 
fwrite($stderr, 'My error'); 
fclose($stderr); 
```

您还可以取消设置 中的`error_log`指令`php.ini`，这将导致每个 PHP 错误都附加到`ErrorLog`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T14:49:54.133

还发现在 a 上写入“php://stderr”`<VirtualHost>`不会写入该虚拟主机`ErrorLog`，而是转到主 Apache 错误日志。

然而，还有 PHP 函数 error_log()。

```
error_log('File does not exist: ' . XXX, 4); 
```

4 表示它转到 Apache（SAPI 日志记录处理程序），而不是 php`error_log`文件。

[http://php.net/error_log](http://php.net/error_log)

# objective-c - CTCoreMessage setTo 参数？

> ID：11931807
> 
> 赞同：1
> 
> 时间：2012-08-13T09:49:05.330
> 
> 标签：objective-c, ios, mailcore

有人可以帮我调用`setTo`函数`CTCoreMessage`吗？我`NSSet`作为参数发送，但它给出了运行时错误。我的代码是：

```
CTCoreAddress *to=[CTCoreAddress alloc];
[to setEmail:@"someone@someone.com"];
NSSet *set=[[NSSet alloc]initWithObjects:to,nil];
CTCoreMessage *message=[CTCoreMessage alloc];
[message setTo:set]; 
```

当我写下这行时，一切都很完美

```
 [message setTo:set]; 
```

生成以下运行时错误：

```
err =  mailimf_address_list_add_mb(imfList, strdup(addressName), strdup(addressEmail)); 
```

> Thread1：程序收到信号“EXC_BAD_ACCESS”

# c# - 当我抛出 FaultException 时 WCF 通道重试 5 次

> ID：11931810
> 
> 赞同：0
> 
> 时间：2012-08-13T09:49:13.133
> 
> 标签：c#, wcf, channelfactory, faultexception

我正在使用`DuplexChannelFactory`而不是生成的代理创建 WCF 客户端通道。

对于一个特定的方法，我`FaultException<MyFault>`在服务器端抛出一个已知的。我已根据需要标记了服务接口`[FaultContract(typeof(MyFault))]`。

在客户端，我发现了这个`FaultException<MyFault>`并显示了一个错误。

所有这些工作都很好，但由于某种原因，WCF 在将控制权返回给我的客户端代码之前重试了服务调用 5 次。这会导致客户端出现明显的延迟。

在继续执行我的代码的下一行之前，调试器在我的客户端代码中的服务调用中中断了 5 次。我无法进入它，但调用堆栈显示异常在 WCF 深处引发。

服务端的断点只触发一次。

一旦控制权返回给我，通道就不会出现故障。

调试器输出显示：

```
A first chance exception of type 'System.ServiceModel.FaultException`1' occurred in MyService.dll

Additional information: Fault Test

A first chance exception of type 'System.ServiceModel.FaultException`1' occurred in System.ServiceModel.dll

Additional information: Fault Test

A first chance exception of type 'System.ServiceModel.FaultException`1' occurred in System.ServiceModel.dll

Additional information: Fault Test

A first chance exception of type 'System.ServiceModel.FaultException`1' occurred in System.ServiceModel.dll

Additional information: Fault Test

A first chance exception of type 'System.ServiceModel.FaultException`1' occurred in System.ServiceModel.dll

Additional information: Fault Test

A first chance exception of type 'System.ServiceModel.FaultException`1' occurred in mscorlib.dll

Additional information: Fault Test 
```

这是正常行为吗？当我返回一个已知的预期错误时，为什么 WCF 会重试？

# android - 带有操作栏的菜单 sherlock

> ID：11931811
> 
> 赞同：19
> 
> 时间：2012-08-13T09:49:24.363
> 
> 标签：android, menu, actionbarsherlock

我需要一个关于如何使用操作栏 sherlock 添加菜单项的示例或教程

当我将简单菜单与导入一起使用时

```
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem; 
```

当我打电话时

```
@Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.settings_menu, menu);
        return true;
    }

    public boolean onOptionsItemSelected(MenuItem item) {

        switch (item.getItemId()) {
        case R.id.goToSettings:
            startActivity(new Intent(this, SetPreference.class));
            return true;
        default:
            return super.onOptionsItemSelected(item);
        }

    } 
```

然后我得到无法从 SherlockActivity 错误中覆盖最终方法。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-08-13T09:58:44.153

您必须使用`Menu`,`MenuInflater`和包中的`MenuItem`类`com.actionbarsherlock.view`：

```
import com.actionbarsherlock.view.Menu;
import com.actionbarsherlock.view.MenuInflater;
import com.actionbarsherlock.view.MenuItem;

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getSupportMenuInflater();
    inflater.inflate(R.menu.settings_menu, menu);

    return super.onCreateOptionsMenu(menu);
} 
```

顺便说一句，`ActionBarSherlock`包含很多样本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T18:39:13.647

我在上面使用了@StenaviN 的答案，但遇到了 onContextItemSelected 的问题。[这篇文章](https://groups.google.com/forum/#!msg/actionbarsherlock/OBhjAV_3nHw/YfhPBjeBd-gJ)为我解决了这个问题。

基本上，你只需要使用

```
@Override
public boolean onContextItemSelected(android.view.MenuItem item) {
    /* ... */
} 
```

代替

```
@Override
public boolean onContextItemSelected(MenuItem item) {
    /* ... */
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-20T12:36:45.527

我在上面使用了@Matt 的答案，但遇到了 onContextItemSelected 的问题。

基本上，你只需要使用

```
@Override
public boolean onContextItemSelected(com.actionbarsherlock.view.MenuItem item) {
    /* ... */
} 
```

代替

```
@Override
public boolean onContextItemSelected(android.view.MenuItem item) {
    /* ... */
} 
```

# iphone - 如何在地图视图中仅显示图钉（注释）标题？

> ID：11931814
> 
> 赞同：1
> 
> 时间：2012-08-13T09:49:29.117
> 
> 标签：iphone, objective-c, ios5

我有一个必须推入地图的表格视图。我正在尝试从注释中获取标题以显示在地图视图中，并且我需要比较字幕值中的值以完全根据注释值在地图中显示，但我得到的地图是标题和字幕值。我不想显示字幕，但我希望它比较值这是我的代码：

```
-(MKAnnotationView *)mapView:(MKMapView *)mV viewForAnnotation:
(id <MKAnnotation>)annotation {
MKAnnotationView *pinView = nil;
if(annotation != mapview.userLocation) 
{
    NSLog(@"%i",k);

    static NSString *defaultPinID = @"defaultPinID";
    pinView = (MKAnnotationView *)[mapview dequeueReusableAnnotationViewWithIdentifier:defaultPinID];
    if ( pinView == nil ) pinView = [[[MKAnnotationView alloc]
                                      initWithAnnotation:annotation reuseIdentifier:defaultPinID] autorelease];

    NSString *st=@"0"; 
 NSString *str = [annotation subtitle];

    if ([str isEqualToString:st]) {
        //pinView.pinColor = MKPinAnnotationColorGreen;
        pinView.image=[UIImage imageNamed:@"greyDot.png"];
        //return pinView;
    }       
    NSString *st1=@"10";

    if ([str isEqualToString:st1]) {
        //pinView.pinColor = MKPinAnnotationColorGreen;
        pinView.image=[UIImage imageNamed:@"blackDot.png"];
        //return pinView;
    }
    NSString *st2=@"20";

    if ([str isEqualToString:st2]) {
        //pinView.pinColor = MKPinAnnotationColorPurple;
        pinView.image=[UIImage imageNamed:@"greendot.png"];
        //return pinView;
    }
    NSString *st3=@"30";

    if ([str isEqualToString:st3]) {
        //pinView.pinColor = MKPinAnnotationColorRed;
        pinView.image=[UIImage imageNamed:@"blueDot.png"];
        //return pinView;
    }

    pinView.canShowCallout = YES;

    infoButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
    //Display *t=annotation;
    infoButton.tag=k;
    [infoButton addTarget:self action:@selector(pinLabelClicked:) forControlEvents:UIControlEventTouchUpInside];
    pinView.rightCalloutAccessoryView = infoButton;

} 

else {
    [mapview.userLocation setTitle:@"I am here"];
}

return pinView;
//k++;

} 
```

这是我生成注释的代码

```
- (void)generateAnnotations
{
[mapview setMapType:MKMapTypeStandard];
[mapview setZoomEnabled:YES];
[mapview setScrollEnabled:YES];
[mapview setDelegate:self];

for( int i=0;i<[addressArray count];i++ ){
    AddressInfo *address = [addressArray objectAtIndex:i];
    MKCoordinateRegion region = { {0.0, 0.0 }, { 0.0, 0.0 } }; 
    region.center.latitude = [address.latitude floatValue];
    region.center.longitude = [address.longitude floatValue];
    region.span.latitudeDelta=10.01f;
    region.span.longitudeDelta=10.01f;
    [mapview setRegion:region animated:YES];
    //[mapview setRegion:region animated:TRUE];
    //[mapview regionThatFits:region];      
    DisplayMap *ann = [[DisplayMap alloc] init];
    //ann.tt=i;
    k=i;
        ann.title = address.name;
    ann.subtitle = [NSString stringWithFormat:@"%@",address.category];

    ann.sa = address.streetaddress;
    ann.sb = address.suburb;
    ann.ph = address.phoneNo;
    ann.index = i;
    //ann.image = [NSString stringWithFormat@"image_%d.png",i];

    ann.coordinate=region.center;

    [mapview addAnnotation:ann];
    [ann release];
}
} 
```

我在这里所做的是我正在根据这个值比较类别值我需要在地图视图中显示带有相对颜色的图钉。任何人都知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T12:58:56.220

如上一个问题所述：

[如何使注释字幕从标题菜单中消失？](https://stackoverflow.com/questions/11899665/how-to-make-the-annotation-subtitle-disappear-from-title-menu/11901246#11901246)

您需要`subtitle`留空并在注释类中使用单独的自定义属性来存储您的类别。

这样，`subtitle`标注将不会显示（因为它将为空白），但您仍然可以获取注释的类别来做出决定。

首先，在您的注释类 .h（即 DisplayMap.h）中，添加一个属性`category`：

```
@property (nonatomic, copy) NSString *category; 
```

接下来，在 Display.m 中，合成属性：

```
@synthesize category; 
```

接下来，在`generateAnnotations`您当前设置注释的位置`subtitle`中，`category`改为设置并**留空`subtitle`（不要设置）**：

```
ann.category = [NSString stringWithFormat:@"%@",address.category]; 
```

最后，在 中`viewForAnnotation`，您可以检查注解的`category`. 为此，首先检查注解是否属于类型`DisplayMap`，然后进行强制转换。

所以替换这部分：

```
NSString *str = [annotation subtitle];
//code that sets pinView.image based on value of str... 
```

有了这个：

```
pinView.image = set_to_some_default_image;

if ([annotation isKindOfClass:[DisplayMap class]])
{
    DisplayMap *dmAnn = (DisplayMap *)annotation;
    NSString *str = dmAnn.category;

    //code that sets pinView.image based on value of str...
} 
```

一个完全独立的问题是，您似乎正在使用按钮标签和自定义方法来处理标注按钮的按下。在自定义方法中，您可能试图获取被点击的注释的数据。我强烈不建议使用按钮标签或自定义方法。有关更好的选择，请参阅以下内容：

*   [在弹出标注和用户点击披露按钮后，如何防止与 MKAnnotation 关联的数据丢失？](https://stackoverflow.com/questions/9797047/how-to-keep-data-associated-with-mkannotation-from-being-lost-after-a-callout-po)
*   [详细披露后的注释细节？](https://stackoverflow.com/questions/9876042/annotation-details-after-detail-disclosure-pressed)

# c - 带有位域的结构的大小

> ID：11931819
> 
> 赞同：1
> 
> 时间：2012-08-13T09:49:50.670
> 
> 标签：c, struct

```
 static struct{
            unsigned a:5;
            unsigned b:5;
            unsigned c:5;
            unsigned d:5;
    }v={1,2,3,4};

    printf("%d %d %d %d %d",v.a,v.b,v.c,v.d,sizeof(v)); 
```

**输出**为：1 2 3 4 4

有人可以解释为什么这个结构的大小是 4 吗？不应该是16吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-13T09:52:01.673

您正在使用 20 位，非常适合 4 个字节。不需要 16 个字节。

### 编辑

我认为实际上*需要*像这样包装它们：

> 6.7.2.1
> 
> 实现可以分配任何大到足以容纳位域的可寻址存储单元。如果有足够的空间，结构中紧跟在另一个位域之后的位域应该被打包到同一单元的**相邻位中**

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-13T09:52:52.817

位域打包位，因此您的 20 位非常适合 32 位 int，而不是四个不同的 int。

# c# - 将 TryUpdateModel 与 Html.DropDownListFor 一起使用

> ID：11931822
> 
> 赞同：0
> 
> 时间：2012-08-13T09:50:00.287
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, model-view-controller

所以我正在尝试使用 更新对象`TryUpDateModel`，问题出在下拉列表中。

我有一个带有图像对象作为属性的对象。

目前我正在使用 objects 类作为模型，并从一个列表中生成一个下拉列表，该列表的`SelectListItems`值设置为我想设置为 objects 属性的图像的 guid。

我的查看代码：

```
@Html.LabelFor(m => m.RibbonImage, "Ribbon Image:")
@Html.DropDownListFor(m => m.RibbonImage, (List<SelectListItem>)ViewBag.RibbonImages) 
```

我在哪里生成列表：

```
ViewBag.RibbonImages = this.Datastore.GetAll<Image>()
                                    .Where(x => x.Type == ImageType.Ribbon)
                                    .Select(x => new SelectListItem()
                                    {
                                        Text = x.Description + " \u2013 " + Path.GetFileName(x.Filename),
                                        Value = x.Id.ToString()
                                    })
                                    .ToList(); 
```

我在主要对象类中的属性：

```
/// <summary>
/// Gets or sets the ribbon image to use
/// </summary>
public virtual Image RibbonImage { get; set; } 
```

我的操作方法：

```
[HttpPost]
[..]
public ActionResult Update(Guid? id)
{
    RibbonLookup ribbon = this.Datastore.Query<RibbonLookup>().SingleOrDefault(x => x.Id == id);

    [..]

    string[] properties = new string[]
    {
        "RibbonImage"
    };

    if (this.TryUpdateModel<RibbonLookup>(ribbon, properties))
    {
        this.Datastore.Update<RibbonLookup>(ribbon);

        ModelState.AddModelError(string.Empty, "The ribbon has been updated.");
    }
    else
    {
        ModelState.AddModelError(string.Empty, "The ribbon could not be updated.");
    }

    [..]
} 
```

有没有一种简单的方法来使用`DropDownListFor`with`TryUpdateModel`而不必手动更新每个属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T20:39:06.493

没有完全理解你的问题。然而，首先，我想我会分享我们如何使用对我们来说很好的下拉列表控件。如果下面的代码不能回答你的问题，想了解更多关于问题陈述的信息。

这通常是我在我们的应用程序中使用下拉列表的方式。在我们的表单发布中，包含 SelectedCustomerId 的父模型构建了发布的（选定的）SelectedCustomerId。默认的模型绑定器绑定它没有任何问题。

看法 ：

```
@model SampleDropDown.Models.CustomerData

using (Html.BeginForm("Continue", "Customer"))
{
    if (Model.Customers != null)
    {
@Html.DropDownListFor(m => m.SelectedCustomerId, new SelectList(Model.Customers, "CustomerId", "DisplayText"))

    }

<input type="submit" value="Select" />
}

public class CustomerData
   {

    public List<Customer> Customers { get; set; }
    public string SelectedCustomerId { get; set; }
    public string Response { get; set; }
    }

 public class Customer
    {

    public string DisplayText { get; set; }
    public string CustomerId { get; set; }

   } 
```

控制器 ：

```
 [HttpPost]
    public ActionResult Continue(CustomerData data)
    {
        return View("Index", data);
    } 
```

# java - Java 监控工具

> ID：11931825
> 
> 赞同：0
> 
> 时间：2012-08-13T09:50:10.823
> 
> 标签：java, email, notifications, monitor

我正在为一家开发基于 java 的应用程序的公司工作，该应用程序可以安装在 windows 或 linux 服务器上（取决于我们客户的意愿）。由于运行应用程序的服务器位于我们客户的网络内，我们必须通过不同的 VPN 访问来访问服务器。

所以现在我们有不同的服务器，具有不同的访问权限——但我需要一个 java 监控工具，它可以在任何基于 java 的问题（内存问题、HDD 空间不足等）的情况下通知我们的 IT。出于安全原因，可能无法使用 Nagios，因为可能没有为它打开防火墙，所以我考虑通过电子邮件通知。我想要一个 webapp（因此它可用于 Windows 和 Linux），它可以监控多个值（必须是可配置的）并在必要时发送邮件。

我还询问了 Google，但大多数监控工具必须安装或需要 root 访问权限（在 Linux 系统上），我们 99% 都没有。

您还有其他工具可以推荐吗？

提前致以诚挚的问候和感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T10:17:17.430

You have many options to choose java monitoring tools; See below;

*   [jconsole](http://docs.oracle.com/javase/1.5.0/docs/guide/management/jconsole.html)
*   [visualvm](http://visualvm.java.net/index.html)
*   [Eclipse Memory Analyzer](http://www.eclipse.org/mat/)
*   [GCViewer](http://www.tagtraum.com/gcviewer.html)
*   [PerfAnal](http://java.sun.com/developer/technicalArticles/Programming/perfanal/)

and also uses commercial tools [apperfect](http://www.appperfect.com/) or [manageengine](http://www.manageengine.com/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-30T02:03:23.063

检查 eginnovations Java 监控工具 - 将满足您的需求。

[http://www.eginnovations.com/web/java-monitoring.htm](http://www.eginnovations.com/web/java-monitoring.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T10:05:10.143

[JAMon](http://jamonapi.sourceforge.net/)是您可以使用的好工具。你也可以看看[AspectJ](http://www.eclipse.org/aspectj/)。实际上，我正在使用 Spring 框架，并且我使用 AOP 来跟踪异常，例如如果我遇到异常，那么它的日志将通过电子邮件发送给开发人员，您可以使用 AspectJ 来实现同样的目的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T10:02:55.617

试试 RHQ [http://www.jboss.org/rhq](http://www.jboss.org/rhq)。它是一个开源的监控和管理平台。设置环境非常困难，但是一旦完成，您将获得大量功能。您可以设置一般警报，可以通过电子邮件、推特、jabber、短信等方式通知您。

# java - gwt 应用程序中的复合单元

> ID：11931829
> 
> 赞同：5
> 
> 时间：2012-08-13T09:50:16.970
> 
> 标签：java, gwt, cell, celltable

我正在尝试创建一个由 TextCell 和 ButtonCell 组成的 CompositeCell。我想通常将 CompositeCell 添加到 Column 中，然后将 Column 添加到 CellTable 中。但是我无法弄清楚该列的实例应该如何。特别是我在以下代码中找不到它的类型参数：

```
 Column<FilterInfo, ?> compositeColumn = new Column<FilterInfo, ?>(createCompositeCell()) {

  @Override
  public Object getValue(Object object) {
    // TODO Auto-generated method stub
    return null;
  }}; 
```

创建自定义类FilterInfo的CompositeCell的方法（有必要吗？）是：

```
private CompositeCell<FilterInfo> createCompositeCell(){

HasCell<FilterInfo, String> filterName = new HasCell<FilterInfo, String>() {

  public Cell<String> getCell() {
    return new TextCell();
  }

  public FieldUpdater<FilterInfo, String> getFieldUpdater() {
    // TODO Auto-generated method stub
    return null;
  }

  public String getValue(FilterInfo object) {
    return object.getFilterName();
  }};

  HasCell<FilterInfo, String> filterButton = new HasCell<FilterInfo,String>(){

    public Cell<String> getCell() {
      return new ButtonCell();
    }

    public FieldUpdater<FilterInfo, String> getFieldUpdater() {
      // TODO Auto-generated method stub
      return null;
    }

    public String getValue(FilterInfo object) {
      // TODO Auto-generated method stub
      return "...";
    }
  };

  List<HasCell<FilterInfo, ?>> cells = new ArrayList<HasCell<FilterInfo, ?>>();
  cells.add(filterName);
  cells.add(filterButton);

  CompositeCell<FilterInfo> compositeCell = new CompositeCell<FilterInfo>(cells);

  return compositeCell; 
```

}

如果有任何迹象表明可以调整代码或其他建议以创建所需的 CompositeCell 并将其正确添加到 CellTable 中，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T17:21:39.090

你必须使用复合细胞吗？对我来说，这似乎需要做很多工作，而且创建自己的自定义单元格可能会容易得多。

阅读有关[创建自定义单元的文档](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiCustomCells)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-12T12:51:46.223

不要试图过多地关注这里的类型参数。你的 IDE 太聪明了，会给你输入错误。它会抱怨“原始类型。应该参数化 XXX<C>”但是您应该能够以这种方式编译和运行代码。

这是一个包含 N 个按钮的 CompositeCell 的 Column 的代码：

```
private Column<DTO, DTO> getButtonColumn() {
    return new Column<DTO, DTO>(getButtonsCell()) {
        @Override
        public DTO getValue(DTO object) {
            return object;
        }
    };
} 

private CompositeCell getButtonsCell() {
    HasCell<DTO,DTO> button1 = new AbstractActionButton<DTO>() {
                @Override
                public void execute(final DTO object) {
                    //Action on button click
                }

                @Override
                public void render(Context context, DTO data, SafeHtmlBuilder sb) {
                    //
                }
            };
    HasCell<DTO,DTO> button2 = new AbstractActionButton<DTO>(){ 
        //Complete me ...
    }

    List<HasCell<DTO, ?>> cells = new LinkedList<>();
    cells.add(button1);
    cells.add(button2);
    CompositeCell<DTO> compositeCell = new CompositeCell<>(cells);

    return compositeCell;
}

public abstract class AbstractActionButton<DTO> implements HasCell<DTO, DTO> {

@Override
public Cell<DTO> getCell() {
    return new ActionCell<DTO>("Button title", new ActionCell.Delegate<DTO>() {
        @Override
        public void execute(DTO object) {
            AbstractActionButton.this.execute(object);
        }
    }) {
        @Override
        public void render(Context context, DTO data, SafeHtmlBuilder sb) {
            AbstractActionButton.this.render(context, data, sb);
        }
    };
}

//Replaced by delegate but still need to be overriden
@Override
public FieldUpdater<DTO, DTO> getFieldUpdater() {
    return null; 
}

@Override
public DTO getValue(DTO object) {
    return object;
}

/**
 * You can override this method to render your button differently. Not mandatory
 * @param context
 * @param data
 * @param sb
 */
public abstract void render(Context context, DTO data, SafeHtmlBuilder sb);

/**
 * Called when the button is clicked
 * @param object
 */
public abstract void execute(DTO object);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T21:37:56.303

如果你`CellTable`需要一个列表`FilterInfo`并且你`Cell`需要一个`FilterInfo`，那么使用一个`IdentityColumn`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T01:50:33.037

我使用 GXT XTemplate 创建了一个复合单元格（Checkboxcell + TextCell）来呈现文本单元格的文本。如果您想坚持纯 GWT 并用 GWT 替换其他 GXT 小部件，请使用 Template。

[https://gist.github.com/Aadi1/4949994](https://gist.github.com/Aadi1/4949994)

# c# - 使用css的图像按钮位置

> ID：11931837
> 
> 赞同：1
> 
> 时间：2012-08-13T09:50:38.430
> 
> 标签：c#, asp.net, css

我需要在 div 800x800 中格式化图像按钮以使这些集合@Photo 附加。我只能使用 css 类，也许有人有很好的教程来做到这一点，或者只是帮助我。

按钮需要清晰的线条我很匆忙地做了这个。

![例子](../Images/c6e0dd91204fc2fd51723fab1cc3138f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T09:57:14.673

我会使用一个框架来做到这一点，因此不必从头开始创建它。Twitter Bootstrap 是一个不错的选择，它具有出色的脚手架功能。但是，如果您想自己做，您应该创建一个具有您想要的大小的类，例如 200x200px，然后创建与该类结合的偏移类，例如：

```
.wrapper {
  width: 800px;
  height: 800px;
}

.row {
  display: block;
}

.box {
  width: 200px;
  height: 200px;
  margin: 10px;
  background: #000000;
}

.offset1 {
  margin-left: 210px;
}

.offset2 {
  margin-left: 420px;
}​ 
```

等等。

这是我在 jsfiddle 上制作的一个工作示例：http: [//jsfiddle.net/WUZnW/2/](http://jsfiddle.net/WUZnW/2/)

但是，建议使用已经具有此功能的引导程序，因为您将拥有一个专门的社区来纠正代码中可能存在的任何错误，并确保它与未来的 Web 标准兼容。

链接到 bootstrap 的脚手架功能：http: [//twitter.github.com/bootstrap/scaffolding.html](http://twitter.github.com/bootstrap/scaffolding.html)

# git - 获得“致命：此操作必须在工作树中运行？” 在裸存储库上

> ID：11931840
> 
> 赞同：3
> 
> 时间：2012-08-13T09:50:43.440
> 
> 标签：git, version-control, github

我是 git 的新手，我在[这里浏览了一些视频教程](http://www.youtube.com/watch?v=HaSDIdNkCDQ)

在看到这些教程后，我尝试使用 ssh 与我的朋友建立一个 git repo

笔记：

*   我们正在使用 mac 雪豹
*   Git 版本是 1.7.5.4

我设法在一个文件夹中设置我的代码让我们说'folder1'使用

```
git init 
```

其中有我的代码文件。

然后我在我朋友的机器上创建一个空的存储库让我们说' `folder2`'，然后我使用了`folder2`一个裸存储库

```
git init --bare --shared 
```

现在我想将共享存储库设置为`folder1`代码的存储库在此之后，我尝试使用 ssh 在裸存储库中添加远程

```
git remote add origin myFriend@hisIp:/LocationToFile 
```

在此之后，我推送了给我一条成功消息的代码

现在的问题是 git repo ' `folder2`' 仍然显示一个空 repo（带有空存储库的文件夹），`folder2`即使我执行“ `git status`”，我也无法执行 git 操作，我得到“ `fatal: This operation must be run in a work tree`”

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-13T10:52:33.747

由于它是一个裸仓库，它没有工作树。请参阅“[裸存储库和非裸存储库之间的 -practical- 区别是什么？](https://stackoverflow.com/questions/5540883/whats-the-practical-difference-between-a-bare-and-non-bare-repository) ”。

您应该在本地克隆该文件夹 2 存储库，以便执行您的命令。

```
# on server:
cd /path/to/folder2
git clone folder2 folder2b
cd folder2b
git status 
```

注意：最好遵循裸 repo 目录的命名约定：（`folder2.git`而不是`folder2`）

# windows-phone-7 - windows phone 7 在特定时间打开应用程序

> ID：11931842
> 
> 赞同：1
> 
> 时间：2012-08-13T09:50:51.713
> 
> 标签：windows-phone-7

我正在为 windows phone 7 构建一个唤醒灯警报，但在警报出现之前，我必须更改背景，以模仿日出。

所以当用户定义了他的闹钟并退出应用程序时，应用程序需要在闹钟响起前30分钟启动，以改变背景。

是否可以在特定时间打开应用程序（页面）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T16:49:28.853

不，不可能在指定时间启动应用程序。您可以安排警报或提醒，但它们由操作系统处理。此外，您的应用程序注册的警报或提醒不能提供允许用户直接从警报（o 提醒）打开应用程序的机制。

您可以参考[此](http://msdn.microsoft.com/en-us/library/hh202965%28v=vs.92%29.aspx)文档条目。

# python - python csv分隔符问题

> ID：11931843
> 
> 赞同：-1
> 
> 时间：2012-08-13T09:50:55.240
> 
> 标签：python, csv

我有这个写入 csv 文件的脚本：

```
import sqlite3
import csv
import codecs
import cStringIO
import sys

class UTF8Recoder:

    def __init__(self, f, encoding):
        self.reader = codecs.getreader(encoding)(f)

    def __iter__(self):
        return self

    def next(self):
        return self.reader.next().encode("utf-8")

class UnicodeReader:
    """
    A CSV reader which will iterate over lines in the CSV file "f",
    which is encoded in the given encoding.
    """

    def __init__(self, f, dialect=csv.excel, encoding="utf-8", **kwds):
        f = UTF8Recoder(f, encoding)
        self.reader = csv.reader(f, dialect=dialect, **kwds)

    def next(self):
        row = self.reader.next()
        return [unicode(s, "utf-8") for s in row]

    def __iter__(self):
        return self

class UnicodeWriter:
    """
    A CSV writer which will write rows to CSV file "f",
    which is encoded in the given encoding.
    """

    def __init__(self, f, dialect=csv.excel, encoding="utf-8", **kwds):
        # Redirect output to a queue
        self.queue = cStringIO.StringIO()
        self.writer = csv.writer(self.queue, dialect=dialect, **kwds)
        self.stream = f
        self.encoder = codecs.getincrementalencoder(encoding)()

    def writerow(self, row):
        self.writer.writerow([unicode(s).encode("utf-8") for s in row])
        # Fetch UTF-8 output from the queue ...
        data = self.queue.getvalue()
        data = data.decode("utf-8")
        # ... and reencode it into the target encoding
        data = self.encoder.encode(data)
        # write to the target stream
        self.stream.write(data)
        # empty queue
        self.queue.truncate(0)

    def writerows(self, rows):
        for row in rows:
            self.writerow(row)

with open('agajan.csv', 'w') as f:
    uW = UnicodeWriter(f, delimiter=' ')
    row = ["agaja asa; . ' a", "t, o , ,rayev", "bazargeldiyevich"]
    uW.writerow(row) 
```

问题是它写的列比需要的多，而不是三列。在我的字符串中可能有任何字符，但我想正确地写它。我该如何管理？例如：`row = ["agaja asa; . ' a", "t, o , ,rayev", "columns"]`将分号添加到最后一列将`"colu;mns"`创建新列

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:18:57.487

我将其更改为制表符分隔格式：

```
with open('agajan.csv', 'w') as f:
    #uW = UnicodeWriter(f, delimiter=' ')
    uW = UnicodeWriter(f, delimiter="\t")
    row = ["agaja asa; . ' a", "t, o , ,rayev", "colu;mns"]
    uW.writerow(row)
    row1 = ["I", "am", "ironman"]
    uW.writerow(row1) 
```

当我将 LibreOffice 中的输出作为制表符分隔的文件查看时，它按预期工作。

我不认为在这种情况下使用空格作为分隔符是一个好的选择，因为您的字段几乎肯定会包含空格。因此，我相信作为分隔符的空格可能是创建额外字段的原因，而不是分号。

# iphone - 将数据插入到具有非静态名称 (FMDB) 的数据库表中

> ID：11931846
> 
> 赞同：1
> 
> 时间：2012-08-13T09:51:01.493
> 
> 标签：iphone, objective-c, ios, fmdb

我有一个在数据库中动态创建表的项目。而且我不知道在某些时候使用的是什么表。并想要这样的东西： `[db executeQuery:@"INSERT INTO %@Table (image) VALUES (?)",tableName,imageData];` 但它没有用。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T10:52:59.993

您可以创建一个字符串，然后使用该字符串进行查询，如下所示：

```
NSString* queryStr = [NSString stringWithFormat:@"INSERT INTO %@(image) VALUES (?) ",tableName];
[db executeQuery:queryStr,imageData]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T10:57:07.043

请注意，如果您想使用格式字符串，FMDB 中还有另一个函数。您将不得不使用`executeQueryWithFormat:`而不是`executeQuery:`.

如果`tableName`是“员工”，您的字符串将评估为：

```
"INSERT INTO EmployeesTable (image) values (<data>)" 
```

这是你想要的（即在表名中添加字符串“Table”）？

# opengl - 为什么下面的代码没有给出纯红色的图像？

> ID：11931850
> 
> 赞同：1
> 
> 时间：2012-08-13T09:51:13.940
> 
> 标签：opengl

这是我的确切代码的简化版本，

我希望看到所有红色（因为我只将红色设置为 255，其他设置为 0），但实际上得到了这个：

![在此处输入图像描述](../Images/af7473e969f9dfd8cc39ffb864e2eb1c.png)

```
#include <GLUT/glut.h>                                                                                                                                                                                                                                                        

static GLuint texture;
void reshape(int w, int h) {
    glViewport(0, 0, w, h);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho(-2, 2, -2, 2, -2, 2);
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
}

static void callback(unsigned char *data, long width, long height) {
    glGenTextures(1, &texture);
    glBindTexture(GL_TEXTURE_2D, texture);
    //glTexEnvi(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_MODULATE);
    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP);
    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP);

    int i,j;
    for (i = 0; i < height; i++) {
        for (j = 0; j < width; j++) {
            data[i * 3 * width + 3 * j] = 255;
            data[i * 3 * width + 3 * j + 1] = 0;
            data[i * 3 * width + 3 * j + 2] = 0;
        }
    }

    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, width, height, 0, GL_RGB, GL_UNSIGNED_BYTE, data);
    glBindTexture(GL_TEXTURE_2D, 0);
}

void init() {
    glClearColor(0, 0, 0, 0);//RGBA
}

void display() {
        glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT);
        glEnable(GL_TEXTURE_2D);
        unsigned char data[3 * 350 * 168];
        callback(data, 350, 168);
        glBindTexture(GL_TEXTURE_2D, texture);
        glBegin(GL_QUADS);
            glTexCoord2f(0, 0);glVertex2f(-2, -2);
            glTexCoord2f(0, 1);glVertex2f(-2, 2);
            glTexCoord2f(1, 1);glVertex2f(2, 2);
            glTexCoord2f(1, 0);glVertex2f(2, -2);
        glEnd();
        glBindTexture(GL_TEXTURE_2D, 0);
        glutSwapBuffers();
}

int main(int argc, char *argv[]) {
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_DOUBLE|GLUT_DEPTH|GLUT_RGBA);
    glutInitWindowSize(512, 512);
    glutInitWindowPosition(100, 100);
    glutCreateWindow("hello world texture window");
    glutReshapeFunc(reshape);
    glutDisplayFunc(display);
    glutIdleFunc(display);
    init();
    glutMainLoop();
    return 0;
} 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-13T10:02:02.077

```
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, width, height, 0, GL_RGB, GL_UNSIGNED_BYTE, data); 
```

有你的问题。这是一个常见但微妙的错误。

您告诉 OpenGL 您将提供具有三个分量的颜色数据：R、G 和 B。您说每个分量的`UNSIGNED_BYTE`大小都是一样的。

但是你也告诉了 OpenGL 一些别的东西。函数调用中未提及的内容。即，[像素数据的各个行的对齐](http://www.opengl.org/wiki/Pixel_Transfer#Pixel_transfer_parameters)。默认行对齐方式为***4***。这意味着 OpenGL 将假定每一行的字节宽度将被填充为四个字节。

这一点尤其重要，因为您的行宽是 350。每像素 350 * 3 字节是 1050 字节。*不能*被四整除。这意味着 OpenGL 将假定每一行占用 1052 个字节。因此颜色搞砸了；这就是模式重复的原因。这也是你在右上角得到垃圾像素的原因（因为 OpenGL 将第一行放在底部，它正在从内存中读取前几个像素的垃圾）。

*每当*您上传像素数据时，您都需要设置对齐方式（主要是为了确保将其设置为您需要的位置）。这是通过[glPixelStorei](http://www.opengl.org/wiki/GLAPI/glPixelStore)完成的：

```
glPixelStorei(GL_UNPACK_ALIGNMENT, 1); 
```

这会将行对齐设置为 1。本质上，它是未对齐的。

或者，您可以简单地上传 GL_RGBA 数据，这些数据始终是 4 字节对齐的。然后你就不用担心了。

# scala - Scala 可变参数函数和 Seq

> ID：11931851
> 
> 赞同：14
> 
> 时间：2012-08-13T09:51:18.483
> 
> 标签：scala, data-structures, language-design, variadic-functions

据我所知，类似`List`或的特征`Seq`在 Scala 标准库中实现，而不是语言本身的一部分。

不过，有一件事我不明白：一个具有可变参数函数的语法，看起来像

```
def foo(args: String*) = ... 
```

在内部，一个人可以访问`args`，它将是一个`Seq`.

我不清楚是否：

*   `Seq`被认为是一种足以作为语言的一部分出现的特殊数据结构，或者
*   这里的`*`符号是一种更通用的语法的特例，它设法避免对具体数据结构接口的任何引用。

有谁知道哪一个是正确的解释？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-13T10:02:33.543

在语言和库之间确实有点“模糊”。Scala 语言规范 v2.9 在**§4.6.2 重复参数**中声明：

> 参数部分的最后一个值参数可以用“*”作为后缀，例如(..., *x:T* *)。方法内部这种重复参数的类型就是序列类型`scala.Seq[`*T*`]`。

因此，当您使用重复参数时，假定它`scala.Seq`在运行时可用（应该是这种情况，因为它是标准库的一部分）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T09:56:18.660

我认为这是第一个。语言要求存在几种类型，尽管它们实际上并不是语言的一部分。使用 Seq，您找到了一个。

# unit-testing - 找出我的 FORTRAN 项目中没有经过单元测试的部分

> ID：11931853
> 
> 赞同：1
> 
> 时间：2012-08-13T09:51:26.440
> 
> 标签：unit-testing, frameworks, fortran

我目前正在切换到 funit 来全面测试我相当大的 Fortran 项目。是否有工具可以让我找出我的项目中哪些行尚未测试？我使用 emacs，是否有一个简单的脚本可以让我轻松查看我的文件的哪些部分尚未测试？

我可以想象为类似的事情招募 -prof 编译器，但我才刚刚开始。所以我绝对不能靠我自己做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T21:43:29.350

Depends on your compiler. I use Intel Fortran on Linux for testing purposes, and its coverage checking options. Compile and link your code with something like

```
ifort -g -prof-gen=srcpos ... 
```

(Side note: parallel make does not work for me with `-prof-gen` option enabled) The compilation will produce some extra files in your sources directory. Run the tests, each program execution will produce a `*.dyn` file in you sources directory. After running all the tests execute

```
profmerge
proforder
codecov 
```

This will produce a nice detailed HTML-formatted coverage report. Don't forget to delete old `*.dyn` and `pgopti.dpi*` files before running new series of tests, otherwise you will see an intersection of different coverage results.

# bash - 在带有换行符的 bash 中使用 cURL 进行 Urlencode

> ID：11931857
> 
> 赞同：4
> 
> 时间：2012-08-13T09:51:31.647
> 
> 标签：bash, curl, newline

我正在尝试向我们的 SMS 网关发送一个请求，我想在发送的 SMS 中添加一些换行符。

到目前为止，我得到了这个：

```
/usr/local/bin/curl -G --data-urlencode "text=*****centreon Notification *****\n\nType:$NOTIFICATIONTYPE$\nHost: $HOSTNAME$\nState: $HOSTSTATE$\nAddress: $HOSTADDRESS$\nInfo: $HOSTOUTPUT$\nDate/Time: $DATE$" "http://192.168.11.248:13013/cgi-bin/sendsms?username=user&password=password&from=12345678&to=87654321" 
```

但是，这不起作用，因为我`\n`在我的短信中得到了所有的 '，应该有一个新行。

我有一个可以`\n`运行的 PHP 脚本，但由于我不能调用 PHP 脚本，所以我必须使用一个单行器来执行此操作，其中 cURL 发挥作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T10:04:10.393

您可以在 Bash 中将换行符嵌入到带引号的字符串中，这很简单。

```
/usr/local/bin/curl -G --data-urlencode "text=*****centreon Notification *****

Type:$NOTIFICATIONTYPE$
Host: $HOSTNAME$
State: $HOSTSTATE$
Address: $HOSTADDRESS$
Info: $HOSTOUTPUT$
Date/Time: $DATE$" "http://192.168.11.248:13013/cgi-bin/sendsms?username=userpassword=password&from=12345678&to=87654321" 
```

尾随美元符号应该完成什么？

如果您愿意，Bash 有一种用于字符串转义的语法，例如`$'Hello\nworld'`. 注意开盘价前的美元符号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T11:32:04.467

您可以使用`$''`带有转义序列的 -style 引号或带有文字换行符的其他引号类型将换行符添加到参数中。不过，我会更好地组织这个。那是一个*很*长的“单线”。

```
declare -a a=(
    $'text=*****centreon Notification *****\n'
    "Type: $NOTIFICATIONTYPE"
    "Host: $HOSTNAME"
    "State: $HOSTSTATE"
    "Address: $HOSTADDRESS"
    "Info: $HOSTOUTPUT"
    "Date/Time: $DATE"
)

url=http://192.168.11.248:13013/cgi-bin/sendsms?username=user&password=password&from=12345678&to=87654321

/usr/local/bin/curl -G --data-urlencode "$(printf '%s$\n' "${a[@]}")" "$url" 
```

顺便说一句，ksh 现在通过 原生支持 URL 编码`printf '%(url)q' '...data...'`，在这种情况下可能根本不需要 curl。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-17T20:14:45.610

Nagios 不接受 command_line 参数中的多行值，因此您可以执行以下操作：

```
/usr/local/bin/curl "http://192.168.11.248:13013/cgi-bin/sendsms?username=userpassword=password&from=12345678&to=87654321&text=%2A%2A%2A%2A%2Acentreon%20Notification%20% 2A%2A%2A%2A%2A%0A%0AType:%20$NOTIFICATIONTYPE$%0AHost:%20$HOSTNAME$%0AState:%20$HOSTSTATE$%0AAddress:%20$HOSTADDRESS$%0AInfo:%20$HOSTOUTPUT $%0AD日期/时间：%20$DATE$"

```

# java - 从项目中的外部文件夹加载 dll 库 - Java

> ID：11931865
> 
> 赞同：0
> 
> 时间：2012-08-13T09:52:03.290
> 
> 标签：java, dll, load

我在加载放置在我的 Java 代码中的**dll 文件夹文件中的 dll 时遇到问题。**为了简单起见 - 我尝试在 exampleTest.java 中执行加载 dll，**但**我得到***UnsatisiefLinkException***。

![项目结构](../Images/973d0833357964de3ffc2678e7aac58e.png)

我试过了：

```
InputStream in = this.getClass().getClassLoader().getResourceAsStream("../dll/file.dll"); 
```

但它不起作用。有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T10:07:22.480

如果您只想导入它，您可以随时使用 System loadLibrary 和 nio.Paths，如下所示：

```
System.loadLibrary(Paths.get("/dll/file.dll").toString()); 
```

这实际上是一个包装：

```
Runtime.getRuntime().loadLibrary(Paths.get("/dll/file.dll").toString()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T10:05:33.693

可能会尝试这样的事情。

您不需要包含 dll，但路径应该足够了。

> System.setProperty("java.library.path", "/dll" + File.pathSeparator +
> System.getProperty("java.library.path"));

在执行代码之前添加上面的行。这会将 dll 路径添加到 jvm 运行时库。

它还取决于您运行应用程序的文件夹。您需要为 dll 文件夹提供相对路径。或者，您可以提供完全合格的路径，但从项目配置的角度来看，不建议这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T10:01:07.790

如果要将其作为资源加载，则应将`dll`文件夹设置为源文件夹。*右键单击文件夹 -> 构建路径 -> 用作源文件夹*

然后，您可以像这样简单地加载它：

```
InputStream in = this.getClass().getClassLoader().getResourceAsStream("dll/file.dll"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T09:56:48.683

添加`dll`到运行时类路径并将您的代码更改为

```
InputStream in = this.getClass().getClassLoader().getResourceAsStream("/dll/file.dll"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T09:59:13.980

`getResourceAsStream()`将您的源文件夹视为“文件系统”的根目录。据我所知，`getResourceAsStream()`如果此文件夹在文件夹之外，您将无法通过该文件夹访问文件`src`夹。

如果要访问该 dll 文件，请将 dll 文件夹移动到 src 文件夹。并通过

```
getResourceAsStream("/dll/file.dll") 
```

检查[这篇文章](https://stackoverflow.com/questions/7022256/blackberry-runtime-error-fridg-could-not-find-img-logo-png/7026039#7026039)。这是关于另一个问题，但我认为要点是相同的。

# html - Powershell 打开和编辑 HTML 文件

> ID：11931868
> 
> 赞同：0
> 
> 时间：2012-08-13T09:52:05.343
> 
> 标签：html, powershell, editing

我想知道是否有人可以帮助我解决以下问题。

我有下面的 HTML 文件，我想做的是使用 Powershell 编辑一些行。

```
<br>
<H3><U><FONT COLOR=blue>Server1</U></font></H3>
<table border="1" BORDERCOLOR=black>
<colgroup>
<col/>
<col/>
<col/>
<col/>
<col/>
</colgroup>
<tr><th>Drive</th><th>SizeGB</th><th>UsedGB</th><th>FreeGB</th><th>Usage</th></tr>
<tr><td>C:</td><td>68</td><td>36.73</td><td>30.88</td><td><Font color=Red>¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦</Font><Font Color=Green>¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦</font></td></tr>
<tr><td>D:</td><td>837</td><td>250.13</td><td>586.49</td><td><Font color=Red>¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦</Font><Font Color=Green>¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦</font></td></tr>
<tr><td>E:</td><td>1023</td><td>193.35</td><td>829.65</td><td><Font color=Red>¦¦¦¦¦¦¦¦¦</Font><Font Color=Green>¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦</font></td></tr>
</table>

<br>
<H3><U><FONT COLOR=blue>File Server</U></font></H3>
<table border="1" BORDERCOLOR=black>
<colgroup>
<col/>
<col/>
<col/>
<col/>
<col/>
</colgroup>
<tr><th>Drive</th><th>SizeGB</th><th>UsedGB</th><th>FreeGB</th><th>Usage</th></tr>
<tr><td>C:</td><td>68</td><td>24.28</td><td>43.43</td><td><Font color=Red>¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦</Font><Font Color=Green>¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦</font></td></tr>
<tr><td>D:</td><td>706</td><td>601.68</td><td>104.63</td><td><Font color=Red>¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦</Font><Font Color=Green>¦¦¦¦¦¦¦</font></td></tr>
<tr><td>E:</td><td>409</td><td>248.92</td><td>160.26</td><td><Font color=Red>¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦</Font><Font Color=Green>¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦¦</font></td></tr>
</table>
<br> 
```

所以我需要浏览 HTML 文件，只编辑文件服务器之后的部分，将 D: 设置为“文件”并将 E: 设置为“数据”，保存并使用默认名称关闭。

提前谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T12:57:43.703

给定您在名为 $test 的变量中发布的字符串：

```
$new = $test -replace '(^.+File Server.+)D:(.+)E:(.+$)', '$1Files$2Data$3' 
```

然后只需将 $new 保存到文件中。

# android - 在按钮单击时更改片段

> ID：11931875
> 
> 赞同：0
> 
> 时间：2012-08-13T09:52:24.343
> 
> 标签：android, android-fragments, android-button

我有一些带有一些按钮的片段，即下一个和上一个。每当单击按钮时，我都需要转到下一个片段。实际上我是用 ViewPager 实现的，所以当用户滑动它时，它会移动到下一个片段。但是我怎样才能通过单击按钮来更改片段。请注意，按钮存在于 Fragment 类而不是 FragmentActivity 类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T19:14:27.613

如果按钮是片段的一部分，那么您的父活动应该实现您的片段也可以理解的接口。然后，当按下按钮时，它会告诉父 Activity 并替换片段。如果按钮是活动布局的一部分，请阅读有关使用片段管理器及其事务管理片段的信息。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-02-08T22:00:38.050

```
public class FragmentWithButtons extends Fragment {

    public interface Callbacks {
        void nextFragment();
        void previousFragment();
    }

    private static Callbacks sDummyCallbacks = new Callbacks() {
        void nextFragment() {
            // ignore
        }
        void previousFragment() {
            // ignore
        }
    }

    private Callbacks mCallbacks = sDummyCallbacks;

    private Button mPrevBtn;
    private Button mNextBtn;

    private View.OnClickListener mPrevBtnListener = new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            mCallbacks.previousFragment();
        }
    }

    private View.OnClickListener mNextBtnListener = new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            mCallbacks.nextFragment();
        }
    }

    public void onAttach(Activity activity) {
        super.onAttach(activity);
        if (!(activity instanceof Callbacks) {
            throw new IllegalStateException("Activity: " + activity + " must implement " + Callbacks.getCanonicalName());
        }
        mCallbacks = (Callbacks) activity;
    }

    public void onDetach() {
       super.onDetach();
       mCallbacks = sDummyCallbacks;
    }
} 

public class ActivityWithButtonFragment extends Activity implements FragmentWithButtons.Callbacks {
    @Override
    public void previousFragment() {
        // switch to previous fragment using FragmentManager...
    }

    @Override
    public void nextFragment() {
        // switch to next fragment using FragmentManager...
    }
} 
```

另外，请查看[http://developer.android.com/training/basics/fragments/communicating.html](http://developer.android.com/training/basics/fragments/communicating.html)

这应该让您了解如何进行片段活动通信。

# android - Android 上 USB 摄像头的驱动程序

> ID：11931877
> 
> 赞同：1
> 
> 时间：2012-08-13T09:52:28.210
> 
> 标签：android, android-hardware

一家公司制造了一个 USB 相机（视频和静止图像），他们希望将其与 Android 软件界面配对。相机需要 Windows 上的自定义驱动程序，我希望它也可以在 Android 上使用。我很了解 Android 应用程序，但不了解硬件、Linux 和设备驱动程序的底层知识。

我是否认为如果制造商可以提供合适的驱动程序，该设备将在 Android SDK API 中显示为相机？即，如果他们提供驱动程序，我可以像使用任何其他 Android 设备相机一样使用相机吗？驱动程序是否需要特定于 Android，或者如果他们有 Linux 驱动程序可以工作？如果是后者，对它需要支持的特定 Linux 版本/发行版是否有任何要求？

感谢任何有关在 Android 设备上支持第三方 USB 摄像头的信息来源的建议或指示。

# .net - Visual Studio VB.Net 不显示任何对象

> ID：11931880
> 
> 赞同：1
> 
> 时间：2012-08-13T09:52:36.253
> 
> 标签：.net, vb.net, visual-studio-2010

我对视觉工作室有一个非常奇怪的问题。我想知道是否有其他人遇到过它，因为它正在影响我的头脑。

基本上，当我通过代码进行调试时，它有时会显示一个已成功初始化为 Nothing 的对象，即使我可以打开它并查看它的初始化属性（见下文）

![在此处输入图像描述](../Images/f2e16679708a5f663fbbc141feb6e755.png)

这里到底发生了什么。请大家帮忙！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T09:55:09.637

我怀疑这`ReasonItemLookup`会覆盖`ToString`返回（比如说）该`ID`字段 - 所以如果是`Nothing`，这就是您将在事物的摘要方面看到的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T09:57:09.777

正如 Jon Skeet 建议的那样，调试器中显示的字符串是对对象调用 ToString() 的结果。因此，根据 ToString 的覆盖，是的，您可以获得非空对象的 Nothing。

# ruby - 缺少这些必需的 gem：mongrel（但已安装）

> ID：11931883
> 
> 赞同：0
> 
> 时间：2012-08-13T09:52:42.593
> 
> 标签：ruby, rake, redmine, redmine-plugins

我正在尝试为 redmine 1.4.4 安装新插件。复制文件夹并运行**rake db:migrate_plugins RAILS_ENV=production** rake 写道：

```
Missing these required gems:
  mongrel  >= 0

You're running:
  ruby 1.8.7.370 at C:/Ruby187/bin/ruby.exe
  rubygems 1.8.24 at C:/Ruby187/lib/ruby/gems/1.8, C:/Users/adm/.gem/ruby/1.8

Run `rake gems:install` to install the missing gems. 
```

**耙宝石：安装 --trace**：

```
rake aborted!
uninitialized constant Mongrel
** Invoke gems:install (first_time)
** Invoke gems:base (first_time)
** Execute gems:base
** Invoke environment (first_time)
** Execute environment
rake aborted!
uninitialized constant Mongrel
C:/Ruby187/lib/ruby/gems/1.8/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:469:in `load_missing_constant'
C:/Ruby187/lib/ruby/gems/1.8/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:106:in `const_missing'
C:/Ruby187/lib/ruby/gems/1.8/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:118:in `const_missing'
C:/Ruby187/redmine-1.4.4/config/mongrel.rb:20
C:/Ruby187/lib/ruby/gems/1.8/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:182:in `require'
C:/Ruby187/lib/ruby/gems/1.8/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:182:in `require'
C:/Ruby187/lib/ruby/gems/1.8/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:547:in `new_constants_in'
C:/Ruby187/lib/ruby/gems/1.8/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:182:in `require'
C:/Ruby187/redmine-1.4.4/config/environment.rb:62
C:/Ruby187/lib/ruby/gems/1.8/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:182:in `require'
C:/Ruby187/lib/ruby/gems/1.8/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:182:in `require'
C:/Ruby187/lib/ruby/gems/1.8/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:547:in `new_constants_in'
C:/Ruby187/lib/ruby/gems/1.8/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:182:in `require'
C:/Ruby187/lib/ruby/gems/1.8/gems/rails-2.3.14/lib/tasks/misc.rake:4
C:/Ruby187/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
C:/Ruby187/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `execute'
C:/Ruby187/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
C:/Ruby187/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
C:/Ruby187/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `invoke_with_call_chain'
C:/Ruby187/lib/ruby/1.8/monitor.rb:242:in `synchronize'
C:/Ruby187/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
C:/Ruby187/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
C:/Ruby187/lib/ruby/gems/1.8/gems/rails-2.3.14/lib/tasks/gems.rake:17
C:/Ruby187/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
C:/Ruby187/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `execute'
C:/Ruby187/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
C:/Ruby187/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
C:/Ruby187/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `invoke_with_call_chain'
C:/Ruby187/lib/ruby/1.8/monitor.rb:242:in `synchronize'
C:/Ruby187/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
C:/Ruby187/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:176:in `invoke_prerequisites'
C:/Ruby187/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:174:in `each'
C:/Ruby187/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:174:in `invoke_prerequisites'
C:/Ruby187/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:157:in `invoke_with_call_chain'
C:/Ruby187/lib/ruby/1.8/monitor.rb:242:in `synchronize'
C:/Ruby187/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
C:/Ruby187/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
C:/Ruby187/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
C:/Ruby187/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `top_level'
C:/Ruby187/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
C:/Ruby187/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `top_level'
C:/Ruby187/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
C:/Ruby187/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
C:/Ruby187/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `run'
C:/Ruby187/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
C:/Ruby187/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
C:/Ruby187/lib/ruby/gems/1.8/gems/rake-0.9.2.2/bin/rake:33
C:/Ruby187/bin/rake:23:in `load'
C:/Ruby187/bin/rake:23
Tasks: TOP => environment 
```

**gem list**显示安装了 mongrel (1.1.5 x86-mingw32)。一切都在 Windows 2008 服务器 x64 上运行。在 mongrel win 服务工作的 Redmine。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T08:51:22.377

解决方案：

> 如果您需要加载 Redmine 核心不需要的任何 gem（例如 mongrel、fcgi），请在您的 redmine 目录的根目录下创建一个名为 Gemfile.local 的文件。它会在运行 bundle install 时自动加载。例子：
> 
> > 宝石“杂种”

# javascript - 在这种情况下，`foo[x]` 是什么意思？

> ID：11931885
> 
> 赞同：0
> 
> 时间：2012-08-13T09:52:45.637
> 
> 标签：javascript

我在下面有一个非常标准的 Javascript 循环，但我很难理解其中的部分内容，并且希望了解这些部分代码的作用以及它们的工作方式。

```
var numbers = [3,345,28,90,102];
var max = 0;
for(var i=0;i<numbers.length;i++){
    if(numbers[i] > max){
        max = numbers[i];
    }
}
alert(max); 
```

我的主要问题是理解以下内容：

```
numbers[i] 
```

这是什么意思，它是如何以这种方式存在的？

我认为 [x] 正在访问数组的一部分，如果是这样的话，数组是如何以及在哪里构建的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T09:54:38.583

```
var numbers = [3,345,28,90,102]; 
```

是的简写

```
var numbers = new Array(3,345,28,90,102); 
```

这就是`numbers`数组是如何形成的故事

`numbers[x]`访问`x`数组中的第 th（0 索引）元素。例如`numbers[0]`返回第一项是`3`.

* * *

作为奖励，整个片段可以替换为：

```
var numbers = [3,345,28,90,102];
var max = Math.max.apply(Math, numbers); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T09:59:37.847

```
var numbers = [3,345,28,90,102]; 
```

此代码正在创建一个值为 3,345、28 等的整数数组。

要访问可以使用的数组元素：（数组从 0 索引开始）

```
numbers[0] is 3
numbers[1] is 345
numbers[2] is 28 
```

现在在这段代码中，一个 var i 用于遍历整个数组，直到 'numbers.length' 并使用 numbers[i] 访问所有值。while 循环将遍历 i=0 到 i = 5（数组长度）。

```
if(numbers[i] > max){
    max = numbers[i];
} 
```

此条件试图从数组中找到最大数。并将其设置在变量 max 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T09:55:17.133

```
var numbers = [3,345,28,90,102]; 
```

这是数组“构建”（声明）的地方。

您可以这样做的另一种方法是声明 a`new Array()`然后一个一个地填充元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T09:56:04.753

```
var numbers = [3,345,28,90,102]; 
```

这将使用 members 初始化一个数组`3,345,28,90,102`，因此总共有 5 个项目。

```
var max = 0; 
```

初始化最大值为零。假设所有数字都是非负数。

```
for(var i=0;i<numbers.length;i++){ 
```

遍历数组的所有项`numbers`。

```
 if(numbers[i] > max){ 
```

如果我们得到一个大于我们当前最大值的数字......

```
 max = numbers[i]; 
```

...将我们的最大值调整为该数字。

```
 }
}

alert(max); 
```

输出最大值

# iphone - 将信息按钮导航到另一个屏幕 Xcode

> ID：11931886
> 
> 赞同：0
> 
> 时间：2012-08-13T09:52:48.953
> 
> 标签：iphone, ios, uinavigationbar

我在导航栏的左侧创建了一个信息按钮。单击信息按钮后，如何允许用户导航到另一个名为“AboutViewController”的视图？请帮忙！！（以下是我的代码）

```
UIButton* infoButton = [UIButton buttonWithType:UIButtonTypeInfoLight];
[infoButton addTarget:self action:@selector(viewWillAppear:) forControlEvents:UIControlEventTouchUpInside];
UIBarButtonItem *modalButton = [[UIBarButtonItem alloc] initWithCustomView:infoButton];
[self.navigationItem setLeftBarButtonItem:modalButton animated:YES];
[modalButton release]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T10:07:41.983

我想告诉你的第一件事是`@selector`用另一个合适的名字改变你的方法，就像我给出的这种情况一样`navigateToAboutView:`。因为您在代码中给出的方法名称可能出现在您要调用的同一视图中！

现在在您的自定义方法中编写以下代码 -

```
- (void) navigateToAboutView:(id)sender
{
    AboutViewController *aboutViewCntrl =[[AboutViewController alloc]initWithNibName:@"AboutViewController" bundle:nil];
    [self.navigationController pushViewController:aboutViewCntrl animated:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T10:08:28.590

我不确定为什么在`viewWillAppear:`向按钮添加目标时作为选择器传递，但该选择器定义了在点击按钮时调用的方法。`viewWillAppear:`是一个在每次视图即将显示时调用的方法，所以当你的按钮被点击时调用它是没有意义的。因此，将其更改为类似`openAnotherView`并创建一个类似这样的方法：

```
- (void)openAnotherView {
    // Instantiate the view controller.
    AboutViewController *aboutViewController = [[AboutViewController alloc] init]; // or initWithNibName:bundle: if you use Interface Builder.

    // Present the view controller modally.
    [self presentModalViewController:aboutViewController animated:YES]
} 
```

如果您想关闭 about 视图控制器，请使用以下行`AboutViewController`：

```
[self dismissModalViewControllerAnimated:YES] 
```

# objective-c - 协议作为方法参数

> ID：11931891
> 
> 赞同：4
> 
> 时间：2012-08-13T09:52:57.480
> 
> 标签：objective-c

我希望一个方法可以访问在单个类中声明的方法的子集。显然，这可以通过协议来实现。

方法子集在 HouseProtocol 中声明，而类 House 实现其方法。

```
@protocol HouseProtocol <NSObject>
-(void) foo;
@end 
```

.

```
@interface House : NSObject <HouseProtocol>
-(void) foo;
-(void) bar;
@end 
```

在另一个类的其他地方，定义了一个采用 HouseProtocol 参数的方法：

```
-(void) somemethod:(id<HouseProtocol>)hp; 
```

该方法应该使用 house 的方法，但只能使用 HouseProtocol 中可以访问的方法。意思是方法 foo 但不是方法栏。

以上是否正确，以及在 somemethod 中如何调用 foo 方法？工作代码赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-13T09:57:04.297

这是对的。`hp`像往常一样调用方法：

```
- (void) somemethod: (id<HouseProtocol>) hp
{
    [hp foo];
} 
```

请注意，如果您真的不需要该协议（例如，如果代码非常简单并且编写协议显然是多余的），您可以简单地使用以下`id`类型：

```
- (void) somemethod: (id) hp
{
    [hp foo];
} 
```

在这种情况下，唯一的问题是编译器必须知道它的`-foo`存在。

从问题标题来看，让你感到困惑的是你对`hp`变量类型的看法——`id<HouseProtocol>`不是协议，它是“实现的东西`HouseProtocol`”。这就是为什么您可以`hp`按通常的方式调用方法的原因，因为它只是某种对象。

# iphone - 如何将 Facebook 集成到 iPhone 应用程序中

> ID：11931897
> 
> 赞同：1
> 
> 时间：2012-08-13T09:53:14.263
> 
> 标签：iphone, ios, facebook-graph-api

我知道这是一个经常被问到的问题；但我的观点是：从 iPhone 应用程序连接到 FB 的推荐或经过充分验证的方法是什么。

[类型 1：我在这里](http://www.raywenderlich.com/77/how-to-post-on-facebook-with-your-iphone-app)看到了教程。它使用 AsiHttpRequest、Json 库在 FB 墙上发布。

类型 2：Facebook 网站本身有一个教程[，](https://developers.facebook.com/docs/mobile/ios/build/#graph)它使用相同的 Graph API，但似乎使用不同的 API 调用在墙上发帖、登录等。

以上两个哪个更好？Type-1 使用外部库，但本教程的解释性很强。Type-2 似乎直接来自 Facebook，但不知道教程的更新/过时程度（没有指明日期）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T09:58:00.100

类型 2 于上周二更新，类型 1 于 2010 年 1 月更新，所以我建议使用类型 2 a) 因为代码直接来自 Facebook，b) 它是最新的教程。

但是，集成 Facebook 的最佳方式是使用新的 iOS 6 [Facebook SDK](https://developer.apple.com/technologies/ios6/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T10:19:39.183

要走的路是下载适用于 ios 的[facebook API](http://developers.facebook.com/ios/)（以及那里的 RTFM :-)）。如果您使用的是 ios 5，请将 lib 编译为静态 lib。将您的库链接到您的项目并创建一些类包装器以将您的应用内容发布到 facebook。我还没有查看 Ray Wenderlich 的教程，但您可以尝试使用您自己构建的最新版 facebook API 来完成他的教程。

# ruby-on-rails - Rails：控制器和模型似乎缓存在开发中

> ID：11931899
> 
> 赞同：2
> 
> 时间：2012-08-13T09:53:16.823
> 
> 标签：ruby-on-rails, caching

我正在使用 Rails 3.1，并且已经开发了一年半。今天早上我一定做了什么，现在我的很多文件似乎都被缓存了。这包括视图文件、控制器和模型。

我可以对模型、控制器等进行更改，并且不会对我的应用程序产生任何影响（在 localhost:3000 上运行）。我曾尝试切换端口（例如切换到 localhost:3005），但没有成功。

我没有更改任何配置文件或在我的计算机（Mac、Lion）上进行任何大的更改，但显然我必须做些什么。

*   我正在开发模式下工作
*   我在 Mac 上使用 TextMate
*   公共文件夹是空的，除了 404 页等
*   我已删除 /caches/assets-folder
*   我已删除浏览器上的缓存

重新启动服务器使其始终正常工作！有时（尽管很少）更改无需重新启动即可生效。

这是我的 development.rb：

```
 # Settings specified here will take precedence over those in config/application.rb

  # In the development environment your application's code is reloaded on
  # every request. This slows down response time but is perfect for development
  # since you don't have to restart the web server when you make code changes.
  config.cache_classes = false

  # Log error messages when you accidentally call methods on nil.
  config.whiny_nils = true

  # Show full error reports and disable caching
  config.consider_all_requests_local       = true
  config.action_controller.perform_caching = false

  # Don't care if the mailer can't send
  config.action_mailer.raise_delivery_errors = false

  # Print deprecation notices to the Rails logger
  config.active_support.deprecation = :log

  # Only use best-standards-support built into browsers
  config.action_dispatch.best_standards_support = :builtin

  # Raise exception on mass assignment protection for Active Record models
  config.active_record.mass_assignment_sanitizer = :strict

  # Log the query plan for queries taking more than this (works
  # with SQLite, MySQL, and PostgreSQL)
  config.active_record.auto_explain_threshold_in_seconds = 0.5

  # Do not compress assets
  config.assets.compress = false

  # Expands the lines which load the assets
  config.assets.debug = true 
```

可能发生了什么，我该如何解决或排除故障？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-04T16:29:20.417

我已经遇到了同样的问题。

在我的 development.rb 文件中添加以下行后，我的问题已解决：

```
config.reload_classes_only_on_change = false 
```

我不明白为什么会出现这个缓存问题。在我遇到这个问题的两周内，一切都很好。

我正在使用Textmate，也许......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T10:16:06.337

你可能没有在看你认为你在看的东西。最常见的原因：您使用的是项目的副本，而不是运行应用程序时正在查看的文件夹。

或者你搞砸了你的 development.rb ( config.cache_classes = false )。

缓存提示：此页面包含所有缓存技术。查看关于页面缓存的文章（它甚至不通过 Ruby 堆栈运行）。

[http://guides.rubyonrails.org/caching_with_rails.html](http://guides.rubyonrails.org/caching_with_rails.html)

其他提示：将整个项目复制到一个新文件夹，因此操作系统的任何文件夹魔法都不会干扰。

开发日志是否没有显示任何关于正在发生的事情的提示？特别是如果您将一些非法代码放入您的主要模型之一（这真的应该让它崩溃）......

# python - 通过实例调用方法失败

> ID：11931904
> 
> 赞同：-1
> 
> 时间：2012-08-13T09:53:29.913
> 
> 标签：python, class, instance, attributeerror, method-invocation

我有这个完全荒谬的错误，我已经完全放弃了。这是我的代码：

```
class SaveGame:
    def __init__ (self):
      self.stats ={'strength':player.strength, 'dexterity':player.dexterity, 'inventory':player.inventory, 'read-inventory':player._inventory, 'equipped weapons':player.equippedweapons, 'Consumable supply':procs.consum, 'Health':procs.health, 'poisoned?':procs.poison, 'storypointe':storypointe}

    def save (self):
        try:
            with open (savefile, 'wb') as savebin:
                pickle.dump (self.stats, savefile)
        except KeyError:
            print "Unable to load game"
            sys.exit (0)

    def load (self):
        pickle.load (savefile) 
```

现在，当我去实现时......：

```
startgame = raw_input ("Would you like to load your game or start a new one\n>>> ")

if startgame in ['load game', 'load my game', 'Load my game', 'Load game', 'load', 'Load']:
    loadedgame = SaveGame ()
    loadedgame.load () 
```

我收到此错误：

```
 Traceback (most recent call last):
  File "<pyshell#1>", line 1, in <module>
    import ModRpg
  File "C:\Users\Sammu\The Folder\ModRpg.py", line 317, in <module>
    loadedgame.load ()
  AttributeError: SaveGame instance has no attribute 'load' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T09:55:01.317

您的缩进是错误的，混合了制表符和空格。用于`python -tt`验证。

# c# - 检查重复的电子邮件

> ID：11931905
> 
> 赞同：0
> 
> 时间：2012-08-13T09:53:36.690
> 
> 标签：c#, asp.net

我正在将记录插入数据库并且正在检查重复的电子邮件 ID，但问题是电子邮件已存在消息显示并且记录也被插入数据库

我的巴尔

```
 public int insert(string firstname,string lastname,DateTime dob,string gender,string mobile,string country,string state,string email,string password)
    {
      ProfileMasterDAL dal=new ProfileMasterDAL();
      try
      {
          return ProfileMasterDAL.Insert(firstname, lastname, dob, gender, mobile, country, state, email, password);
      }
      catch (Exception ex)
      {

          throw ex;
      } 
```

我的用户界面

```
 try
        {

            chk = pmBLL.insert(firstname, lastname, dob, gender, mobile, country, state, email, password);

            if (chk >= 0)
            {
                Response.Write("<script language='javascript'>alert('Email already exists');</script>");
            }
            else
            {
                result = pmBLL.insert(firstname, lastname, dob, gender, mobile, country, state, email, password);
                if (result > 0)
                {
                    Session["username"] = TextBox1.Text; 
```

我的插入存储过程

```
 ALTER procedure [dbo].[Insertreg]

( @id int output,@FirstName varchar (50),@LastName varchar(50) ,@Dob datetime,
@Gender varchar(20) ,@MobileNo nchar(10) ,@Country varchar(50) ,
 @State varchar (50),@EmailId varchar (50),@Password nchar (15),@result int output

)
 as 
 begin

if exists(select EmailId from Profile_Master where EmailId=@EmailId)
set @result=0
else
begin
set @result=1

insert into                                                                                            Profile_Master(FirstName,LastName,Dob,Gender,MobileNo,Country,State,EmailId,Password)
 values 
(@FirstName,@LastName,@Dob,@Gender,@MobileNo,@Country,@State,@EmailId,@Password)
 set @id=SCOPE_IDENTITY()
 return
 end 
 end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:59:36.943

对 else 语句使用 begin 和 end

```
if exists(select @EmailId from Profile_Master where EmailId=@EmailId) 
    set @result=0 
else 
begin
    set @result=1 

    insert into Profile_Master(FirstName,LastName,Dob,Gender,MobileNo,Country,State,EmailId,Password) 
      values (@FirstName,@LastName,@Dob,@Gender,@MobileNo,@Country,@State,@EmailId,@Password) 
    set @id=SCOPE_IDENTITY() 
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T10:00:27.080

建议

1）在电子邮件ID上制作唯一键

2) 使用低于 SP

```
 ALTER procedure [dbo].[Insertreg]

 ( @id int output,@FirstName varchar (50),@LastName varchar(50) ,@Dob datetime,
@Gender varchar(20) ,@MobileNo nchar(10) ,@Country varchar(50) ,
 @State varchar (50),@EmailId varchar (50),@Password nchar (15),@result int output

 )
 as 
 begin

   declare @iCount int
    select @iCount = count(EmailId) from Profile_Master where EmailId=@EmailId

  SET @result = @iCount

  if @result > 0
 BEGIN
    set @result=0
    return
     END
    ELSE
     BEGIN
     set @result=1

INSERT INTO        Profile_Master(FirstName,LastName,Dob,Gender,MobileNo,Country,State,EmailId,Password)
 values 
(@FirstName,@LastName,@Dob,@Gender,@MobileNo,@Country,@State,@EmailId,@Password)
 set @id=SCOPE_IDENTITY()
 return @id
 end 
    end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T09:59:34.103

您需要在 BAL 层而不是 UI 层检查这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T10:06:33.107

你的 sql 查询

```
insert into                                                                                           Profile_Master(FirstName,LastName,Dob,Gender,MobileNo,Country,State,EmailId,Password)
 values 
(@FirstName,@LastName,@Dob,@Gender,@MobileNo,@Country,@State,@EmailId,@Password)
 set @id=SCOPE_IDENTITY() 
```

与条件分开放置任何条件使用开始和结束以适当的方式你会得到解决方案

```
Begin
if exists(select @EmailId from Profile_Master where EmailId=@EmailId)
set @result=0
else
 Begin set @result=1

insert into                                                                                           Profile_Master(FirstName,LastName,Dob,Gender,MobileNo,Country,State,EmailId,Password)
 values 
(@FirstName,@LastName,@Dob,@Gender,@MobileNo,@Country,@State,@EmailId,@Password)
 set @id=SCOPE_IDENTITY()
End
End 
```

# javascript - 等待来自 Javascript 模式的“返回值”

> ID：11931906
> 
> 赞同：17
> 
> 时间：2012-08-13T09:53:41.860
> 
> 标签：javascript, jquery, html, twitter-bootstrap, modal-dialog

好吧，我绝不是 JavaScript 大师，也许我还在考虑桌面软件开发，但这就是我想要实现的目标：

*   我正在使用[Twitter Bootstrap 的模态](http://twitter.github.com/bootstrap/javascript.html#modals)
*   在某些情况下，在采取行动之前，我想用“你确定吗？”来验证它。（是/否）模态对话框。

**问题 ：**

*   内在逻辑应该是什么？

**我是说 ：**

*   用户点击 buttonA（最终执行 actionA）
*   我想启动模态，等待输入（两个按钮中的一个 - 是/否）和/或在执行（或不执行）actionA之前将其传递给一些检查程序

这是我的模态 HTML 代码（按钮应该 - 以某种方式 - 通过它们的`onclick`javascript 例程起作用吗？） - 还要注意这`#confirmMessage`将是可变的。

```
<div class="modal fade hide" id="confirmAlert">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">x</button>
        <h3 id="confirmTitle">Are you sure?</h3>
    </div>

    <div class="modal-body">
        <p id="confirmMessage">Body</p>
    </div>
    <div class="modal-footer">
        <a href="#" class="btn" data-dismiss="modal">Cancel</a>
        <a href="#" class="btn btn-danger">Yes</a>
    </div>
</div> 
```

* * *

**只是一个想法：**

*   写一个类似的函数`checkBeforeExec(message,functionToExec)`
*   设置`#confirmMessage`为消息和是'href to`javascript:functionToExec`
*   说得通？

* * *

我知道这听起来可能有点令人困惑 - 但我根本不知道最适合 JavaScript 的方法是什么......

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-13T10:03:05.693

我围绕模态创建了一个对话框管理器，它的`confirm`辅助函数基本上可以做到这一点：

```
var callback = function(result) {
  alert(result);
}); // define your callback somewhere

$('#confirmAlert').on('click', '.btn, .close', function() {
  $(this).addClass('modal-result'); // mark which button was clicked
}).on('hidden', function() {
  var result = $(this).find('.modal-result').filter('.btn-danger').length > 0; // attempt to filter by what you consider the "YES" button; if it was clicked, result should be true.

  callback(result); // invoke the callback with result
}); 
```

此外，您应该同时设置 Cancel 和 Yes 按钮`data-dismiss="modal"`。

[这是一个小提琴，带有我的对话框管理器的简单示例](http://jsfiddle.net/p8LuT/1/)。

请注意，如果您使用的是*Bootstrap 3*，则应向`hidden.bs.modal`事件添加处理程序，而不是`hidden`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T10:06:36.287

使用 jquery，您可以使用类似的东西

```
$('.btn').click(function(){
   val=$(this).val()
   if(val=='Yes'){
     //continue the processing
   }
}) 
```

# javascript - 最后加载脚本

> ID：11931909
> 
> 赞同：0
> 
> 时间：2012-08-13T09:53:45.957
> 
> 标签：javascript, load

我有一个加载时滞后的网页，因为正在尝试处理脚本。脚本为添加服务创建 iframe。我的网页按顺序加载，但脚本延迟了整个页面，因为它出现在顶部......

是否可以最后加载脚本，但仍然显示在页面顶部？

编辑：我试过这个，但它不起作用：

```
<script type="text/JavaScript">
  window.onlaod=function(){
  var root = document.body.getElementById('top-banner');
  var oJs = document.createElement('script');
  oJs.setAttribute('type','text/JavaScript');
  oJs.setAttribute('src','http://anetwork.ir/showad/?adwidth=468&adheight=60&aduser=1341223032');
  root.appendChild(oJs);
  }
</script> 
```

top-banner 是我要展示广告的 div 的 ID。它是空的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T10:01:01.780

如果您在执行脚本时遇到问题，您应该使用函数来调用该脚本，因此，如果您有脚本的函数或者它是自动的，您应该将导致问题的脚本放在函数内部。

完成后，您可以`onload`在标签中添加属性，`body`然后调用`function`创建`iframe`：

```
<body onload="createIframe()">...</body> 
```

像这样，您的脚本将在加载`body`完成后加载。

编辑：

像这样修改您的脚本并保持之前显示的正文 onload：

```
<script type="text/JavaScript">
function createIframe(){
  var root = document.getElementById('top-banner');
  var oJs = document.createElement('script');
  oJs.setAttribute('type','text/JavaScript');
  oJs.setAttribute('src','http://anetwork.ir/showad/?adwidth=468&adheight=60&aduser=1341223032');
  root.appendChild(oJs);
}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T10:01:16.617

您需要将`script`标签移动到页面的末尾（`</body>`例如，就在标签之后）。如果您想使用 javascript 代码修改页面的先前元素，则需要使用 javascript 代码进行修改。

也就是说：例如，如果您想从服务器加载数据并显示其格式，则必须显示 HTML，然后在加载脚本和数据时“解析”结果并在 HTML 中“插入”使用 javascript 函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-09T09:45:28.367

如果您希望最后加载特定的 JS 代码：

```
if (typeof jQuery !== 'undefined') {
    (function($) {
        //use window.bind to load the tinymce per last. Otherwise will throw error
        $(window).bind("load", function() {
           // code here will load after page is loaded
        });
    })(jQuery);
} 
```

# sencha-touch - 更改标签后重置轮播？

> ID：11931918
> 
> 赞同：0
> 
> 时间：2012-08-13T09:54:09.633
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我在标签视图中设置了一个带有 6 个标签的应用程序。其中 2 个选项卡是带有图像的轮播。

遇到2个问题：

1：当我在轮播中切换卡片时，动画只能从右到左工作（下一张幻灯片动画）。但是当从左向右滑动时（上一张幻灯片动画），上一张图片只是出现，没有动画。

2：当我将选项卡更改为任何其他选项卡，然后返回轮播时，我需要将其重置到起始位置 - 再次显示第一张图像。

有没有办法解决这个问题？

这是我用于轮播标签的代码：

```
var Tab1 = {
    id:'Tab1',
    xtype: 'carousel',
    layout: 'card',
    title: 'Product Info',
    iconMask: true,
    iconCls: 'info',
    bufferSize: 5,
    items: [
        { cls: 'card product-info page1' },
        { cls: 'card product-info page2' },
        { cls: 'card product-info page3' },
        { cls: 'card product-info page4' },
        { cls: 'card product-info page5' }
    ],
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T17:20:51.397

由于 Tab1 是轮播的 id，因此您只需在选项卡面板中为 activeItemChange 事件添加一个侦听器并调用执行此操作的函数：

```
resetCarousel: function() {
    Ext.getCmp('Tab1').setActiveItem(0);
} 
```

这是非常基本的，假设您的选项卡面板中有多个轮播或其他容器，您需要确定哪个选项卡具有特定轮播以调用重置功能。此外，您可以直接在侦听器函数中使用该代码。因此，如果您在选项卡面板中添加了一个侦听器，您可以像这样重置特定容器：

```
onTabChange: function(object, value, oldValue, eOpts) {
    console.log(value); //do this and view the console to see what the values are so you can specify them in your conditions
    if (value == "x") {
        Ext.getCmp('Tab1').setActiveItem(0);
    } else if (value == "y") {
        //do something
    } else {
        //do something
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T08:38:24.793

通过在我想使用以下代码重置的每个选项卡上放置一个侦听器来解决此问题：

```
activate : function() {
    Ext.getCmp('Tab2').setActiveItem(0);
} 
```

# jquery - JQuery - 使用 Ajax 重新加载内容后的元素值

> ID：11931926
> 
> 赞同：0
> 
> 时间：2012-08-13T09:54:24.257
> 
> 标签：jquery, ajax, dom

我对使用 Ajax 重新加载的输入值有问题，并且在 Ajax 发布后它的值发生了变化。

当我调用类似的东西时：

```
var blocks_orderParam = $('input[name=blocks_order]').val(); 
```

在 blocks_orderParam 变量中，在 Ajax 发布之前有值。

任何想法如何在 DOM 中重新加载这个值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T10:00:45.400

尝试这个：

```
$.ajax({
   // ...
}).done(function(){
     var blocks_orderParam = $('input[name=blocks_order]').val();
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T09:58:50.033

如果代码超出了ajax回调函数，那么它将在ajax回调函数之前执行。

将代码放在ajax成功回调中，然后你会发现值改变了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T09:59:08.817

你必须打电话给你的

```
var blocks_orderParam = $('input[name=blocks_order]').val(); 
```

`success`在值更改发生后的 ajax 回调函数中。因为，因为`AJAX`是**异步**的，所以从 ajax 函数执行该语句`success`无法捕获更新值。

**例如：**

```
$.ajax({
  ...
  success: function() {
    // get value of the input after change
    var blocks_orderParam = $('input[name=blocks_order]').val();
  }
}); 
```

# php - Magento - Mage 注册表项“_resource_helper/core”已经存在

> ID：11931934
> 
> 赞同：3
> 
> 时间：2012-08-13T09:54:59.170
> 
> 标签：php, mysql, magento, registry, magento-1.6

我正在我的登台服务器上迁移 magento 1.6.1 安装，但我仍然收到错误消息`Mage registry key "_resource_helper/core" already exists`。

我迁移了数据库和整个源代码。然后我更改了`local.xml`数据库设置。

我已经运行`rm -rf var/cache/* var/session/*`并重新启动了 Apache2，但无法使其正常工作。

我该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T13:59:20.907

耶！我终于让它工作了。这里的问题是执行迁移我也更改了`<model><![CDATA[mysql4]]></model>`值。

这导致了异常......现在我恢复了默认值，它所有的工作都没有破坏正常行为:-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T18:33:30.233

我有同样的问题。对我来说，这解决了它：

```
rm -rf /tmp/magento/var/cache/* 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-15T19:41:30.630

您需要在 local.xml 上添加：

```
<model><![CDATA[mysql4]]></model> 
```

如果您已经这样做并且错误仍然存​​在，则需要清除缓存。在您的 magento 文件夹中：

```
rm -rf var/cache/ 
```

或手动删除。;)

# ravendb - Ravendb - 多个where子句？

> ID：11931948
> 
> 赞同：0
> 
> 时间：2012-08-13T09:55:21.690
> 
> 标签：ravendb

是否可以在创建查询后添加多个 where 子句。例如，以下查询正确返回 1 个结果：

```
var q1 = session.Query<Template>()
    .Where(x => x.Tags.Any(y => y == "one"))
    .Where(x => x.Tags.Any(y => y == " two"));
var r1 = q1.ToList(); 
```

但是这个表现就好像没有 where 条件并返回 30 个结果：

```
var q2 = session.Query<Template>();
q2.Where(x => x.Tags.Any(y => y == "one"));
q2.Where(x => x.Tags.Any(y => y == " two"));
var r2 = q2.ToList(); 
```

ravendb 是否完全支持第二个示例？为什么这两个查询不等效？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T10:27:44.823

它们不一样，因为您不使用组合查询。您必须像这样更改代码：

```
var q2 = session.Query<Template>();
q2 = q2.Where(x => x.Tags.Any(y => y == "one"));
q2 = q2.Where(x => x.Tags.Any(y => y == " two"));
var r2 = q2.ToList(); 
```

# qt - 在 Qt 创建者应用程序中，未使用 ubuntu 中的静态库进行编译

> ID：11931951
> 
> 赞同：0
> 
> 时间：2012-08-13T09:55:47.087
> 
> 标签：qt

在 Ubuntu Qt 创建者中，我尝试使用静态库构建应用程序，而我尝试构建主应用程序时显示以下错误

```
TDecTop.cpp:-1: error: undefined reference to `TComAPS::createSaoParam()'
File not Found
.
.
. 
```

此函数在静态库中定义，但包含静态库...

我包括如下静态库（在 .pro 顶部）

```
LIBS += -L$$PWD/../Lib$${COMSATLIB} -lTLibCommon

LIBS += -L$$PWD/../Lib$${DECSATLIB} -lTLibDecoder 
```

以及如何像 VS2008 一样在 Qt creator 中管理多个项目

# silverlight - Silverlight - (Xaml) 文件已损坏？

> ID：11931954
> 
> 赞同：0
> 
> 时间：2012-08-13T09:55:56.660
> 
> 标签：silverlight, xaml

我的文件 xaml n 它的 cs 文件在断电时在 Visual Studio 2010 中打开。现在，当电源恢复时，我打开了我的项目.. 我无法打开那个 xaml n cs 文件。我可以打开该项目的所有其他 xaml n cs 文件。但不能只打开这两个文件。

在 xaml 页面上我得到 n 错误

```
An unhandled exception has occured 

Details:

System.Runtime.InteropServices.COMException
Exception from HRESULT: 0x80041FEB

at System.Runtime.InteropServices.Marshal.ThrowExceptionForHRInternal(Int32 errorCode,   IntPtr errorInfo)
at System.Runtime.InteropServices.Marshal.ThrowExceptionForHR(Int32 errorCode)
at MS.Internal.Providers.DocDataFactory.CreateAndRegisterDocData(IServiceProvider services, String fileName)
at MS.Internal.Providers.VSDesignerContext.GetDocData(String fileName)
at MS.Internal.Providers.VSDesignerContext.Initialize(IServiceProvider provider, IVsHierarchy hierarchy, UInt32 itemid, Object docDataObj)
at MS.Internal.Providers.VSDesignerContext..ctor(IServiceProvider provider, IVsWindowFrame frame, Object docDataObj)
at MS.Internal.Providers.VSDesignerContext.GetContext(IServiceProvider services, IVsWindowFrame frame, Boolean createIfNotExist)
at MS.Internal.Designer.TabbedEditorPane.MS.Internal.Designer.ITabbedEditorService.get_DesignerContext()
at MS.Internal.Designer.DesignerPane.InitializeDesigner() 
```

这到底是什么？它是损坏的还是别的什么？

而且我无法打开cs文件..当我尝试在Visual Studio中打开它时，它会在记事本中打开..它是空白的..里面什么都没有

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T10:08:23.430

看起来断电损坏了文件。

我知道的仅有的两个解决方案：

1.  从源代码管理中获取最新版本并重做今天的工作
2.  再次从头开始（或任何旧副本）

# c# - 快速计算两个相似图像之间的“脏”区域

> ID：11931960
> 
> 赞同：8
> 
> 时间：2012-08-13T09:56:09.730
> 
> 标签：c#, .net, image-processing

我有两个非常相似的图像（特别是两个屏幕截图），我试图找到最好（最快）的方法来查找图像的哪些区域发生了变化（作为代表不同区域的矩形数组）

几个标准：

*   它不需要是像素精确的，但必须包括所有更改，无论多么小（即，单像素更改周围有很大的误差范围是可以接受的）
*   它需要快速（理想情况下，在今天购买的典型消费机器上，2x 1920x1080 图像应该花费 < 20 毫秒）
*   它不需要可配置的阈值（但如果有允许这样做的解决方案，那将是一个不错的奖励）
*   可以假设输入图像总是完美的无损图像。

我有两种可行的解决方案，但一种是蛮力逐像素计算，这当然非常慢。对于另一个我尝试将两个图像分成不同大小的块并为每个块计算校验和，但这也很慢。

只是对于那些想知道我正在构建什么的人 - 它是一种更笨（而且更慢）的远程桌面，可以在没有任何插件的浏览器中使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T10:23:46.717

您需要对每个像素进行一个像素比较。我认为它不应该那么慢。例如代码：

```
 int size = 1920 * 1080 * 3;
        byte[] image1 = new byte[size];
        byte[] image2 = new byte[size];
        byte[] diff = new byte[size];

        var sw = new System.Diagnostics.Stopwatch();
        sw.Start();
        for (int i = 0; i < size; i++)
        {
            diff[i] = (byte) (image1[i] - image1[i]);
        }
        sw.Stop();       
        Console.WriteLine(sw.ElapsedMilliseconds); 
```

在我的笔记本电脑上运行大约 40 毫秒。如果它只是灰度，它运行在 20 毫秒以下。如果您使用真实图像数据，则*diff[i] != 0*将表示两个图像发生了变化。

如果您使用*Bitmap.GetPixel*或其他慢速方法读取像素值，您的解决方案可能会很慢。如果是这种情况，我建议查找*Bitmap.LockBits*或使用不安全的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T19:35:38.437

我之前的答案因其格式而被删除，我会以更好的方式再写一次。

我在问你是否考虑使用 GPU 来计算两个图像之间的图像差异。由于 GPU 与 CPU 计算相比具有高度并行性，因此该解决方案可以大大提高您的计算时间。

使用 C#，您可以尝试使用 XNA 来实现此目的。实际上，我使用单通道 HLSL（它用于使用 direct3D 对 GPU 进行编程）像素着色器进行了一些测试：

```
texture texture1;
texture texture2;

sampler textureSampler1 = sampler_state{
    Texture = <texture1>;
};

sampler textureSampler2 = sampler_state{
    Texture = <texture2>;
};

float4 pixelShaderFunction(float2 TextureCoordinate : TEXCOORD0) : COLOR0{
    float4 color1 = tex2D(textureSampler1,TextureCoordinate);
    float4 color2 = tex2D(textureSampler2,TextureCoordinate);
    if((color1.r == color2.r) && (color1.g == color2.g) && (color1.b == color2.b)){
        color1.r = 0;
        color1.g = 0;
        color1.b = 0;
    }
    else{
        color1.r = 255;
        color1.g = 255;
        color1.b = 255;
    }

    return color1;
}

technique Compare
{
    pass Pass1
    {
        PixelShader = compile ps_2_0 pixelShaderFunction();
    }
} 
```

XNA 部分的计算非常简单。将 XNA 的基本片段与 Visual Studio 一起使用，我刚刚将绘图函数编写为：

```
protected override void Draw(GameTime gameTime) {
   Stopwatch sw = new Stopwatch();
   sw.Start();
   GraphicsDevice.Clear(Color.CornflowerBlue);
   e.Parameters["texture1"].SetValue(im1);
   e.Parameters["texture2"].SetValue(im2);
   spriteBatch.Begin(SpriteSortMode.Immediate, BlendState.AlphaBlend, SamplerState.LinearClamp, DepthStencilState.Default, RasterizerState.CullNone, e);
   spriteBatch.Draw(im1,new Vector2(0,0),Color.White);
   spriteBatch.End();
   base.Draw(gameTime);
   sw.Stop();
   Console.WriteLine(sw.ElapsedMilliseconds);
} 
```

im1 和 im2 是加载为 Texture2D 的两个 1920*1080 彩色 bmp 图像，e 是作为效果加载的 file.fx。

使用这种技术，我在相当普通的计算机（I5-2410m @ 2.3Ghz、4Gb ram、Nvidia Geforce GT525m 的笔记本电脑）上获得了 17/18ms 的计算时间。

这是程序的输出，显示了不同的图像（对不起，这是高度放大的，因为我没有 1920*1080 的屏幕：>），此外还有两个图像 im1 和 im2，它们之间有一些小的差异： [http ://img526.imageshack.us/img526/2345/computationtime.jpg](http://img526.imageshack.us/img526/2345/computationtime.jpg)

我对 GPU 编程很陌生，所以如果我在如何计算时间或其他任何事情上犯了一个巨大的错误，请随时告诉！

编辑：要注意的第一件事，我刚刚读到“这将是一个不平凡的操作，因为 GPU 不能很好地处理分支。”。

最好的祝福

# mysql - mysql搜索表名的段

> ID：11931961
> 
> 赞同：21
> 
> 时间：2012-08-13T09:56:10.770
> 
> 标签：mysql, sql, database

我正在尝试在mysql 数据库中选择具有相同结尾的表，例如staff_name、manager_name、customer_name（示例）。我正在考虑以下内容，因为如果我有一个明确的表名，它就会起作用。

```
SELECT * FROM "%_name"; 
```

我也尝试使用 % 而不是 _ 没有运气。我不确定是否有其他通配符可以尝试。我环顾四周，但似乎没有一个结果适用于部分表名：/有什么建议吗？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-08-13T09:59:07.333

```
SELECT TABLE_NAME 
FROM INFORMATION_SCHEMA.TABLES
WHERE TABLE_NAME like '%_name'
and TABLE_SCHEMA = 'your_db_name' 
```

如果您想在当前数据库中搜索表，您可以这样做

```
SHOW TABLES LIKE '%_name' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-06-21T07:07:12.010

> 你可以用 3 种方式做

```
show tables like '%yourtablename'
show tables like '%yourtablename%'

show tables like 'yourtablename%' 
```

# sql - 如何合并在 sql 视图语句的输出中显示为一个的两个字段？

> ID：11931966
> 
> 赞同：1
> 
> 时间：2012-08-13T09:56:33.260
> 
> 标签：sql, view

我有一个表，其中包含学生 ID 和他们各自的教师 ID。我想向学生展示他们的老师。为此，我通过另外两个名为：Honarjo as for student 和 Morabi as for teacher 的表格来获取学生和老师的名字。我的问题是，我希望将教师姓名作为一个归档而不是两个单独的姓名和家庭字段。这是我用于查看的 Sql 代码：

```
SELECT        dbo.tblHonarjo.CodeMeli, dbo.tblHonarjo.Name, dbo.tblHonarjo.Family, 

dbo.tblHonarjo.PhoneHome, dbo.tblHonarjo.Mobile, dbo.tblMorabi.Name AS TeacherName, 
                         dbo.tblMorabi.Family AS TeacherFamily
FROM            dbo.tblStudentnDriver INNER JOIN
                         dbo.tblHonarjo ON dbo.tblStudentnDriver.SID = dbo.tblHonarjo.CodeMeli INNER JOIN
                         dbo.tblMorabi ON dbo.tblStudentnDriver.TID = dbo.tblMorabi.CodeMeli 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T09:59:39.143

您可以使用该函数`CONCAT(value1, value2, value3)`来连接字段。

例如，在您的情况下，您可能想要`CONCAT(TeacherName, " ", TeacherFamily)`显示这种格式`<TeacherName> <TeacherFamily>`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T10:00:56.477

根据您使用的数据库类型，应该有某种形式的连接运算符，例如在 Postgres 中它是 ||，所以你可以这样做

`dbo.tblHonarjo.Name || dbo.tblHonarjo.Family`

# asp.net-mvc-3 - 工作单元模式以及 Unity 和通用存储库实现

> ID：11931968
> 
> 赞同：0
> 
> 时间：2012-08-13T09:56:43.873
> 
> 标签：asp.net-mvc-3, entity-framework-4, repository-pattern, unit-of-work

我正在实施 DI、UnitOfWork 和存储库模式，如下所示：我需要您的专家对此实施的意见，而且我也面临错误。

* * *

```
**Business Domain(Class Lib)**
-Contracts
     -IWelcomeService.cs
-Repositories
     -BaseRepository.cs
     -DataRepository.cs
     -IDataRepository.cs 
```

* * *

```
**EF project Lib (I have autogenerated code for Existing Oracle DB)**
-MyEntities.cs (This is additional file I have added for IUnitOfWork implementation 
```

* * *

```
**MVC3 Project (Left default folders for simplicity)**
-Factories
     - UnityDependencyResolver.cs
UnityContainerSetup.cs 
```

* * *

**这些自定义实现的代码如下**

**我的实体.cs**

```
public partial class MyEntities : ObjectContext, IUnitOfWork
{
    #region IUnitOfWork Members

    public void Save()
    {
        base.SaveChanges();
    }

    #endregion
} 
```

**IWelcomeService.cs**

```
public interface IWelcomeService
{
    string GetMessage();
} 
```

BaseRepository.cs

```
public class BaseRepository 
{
    protected IUnitOfWork UnitOfWork { get; set; }

    public BaseRepository(IUnitOfWork unitOfWork)
    {
        this.UnitOfWork = unitOfWork;
    }        
}

public interface IUnitOfWork
{
    void Save();
} 
```

数据存储库.cs

```
public class DataRepository : BaseRepository, IDataRepository
{
    public DataRepository(IUnitOfWork unitOfWork)
        : base(unitOfWork)
    {

    }

    #region IDataRepository Members

    public string ChangeMessage()
    {
        return "Changed by repository";
    }

    #endregion
} 
```

IDataRepository.cs

```
public interface IDataRepository
{
    string ChangeMessage();
} 
```

UnityDependencyResolver.cs

```
public class UnityDependencyResolver : IDependencyResolver
{
    IUnityContainer _container;

    public UnityDependencyResolver(IUnityContainer container)
    {
        _container = container;
    }

    #region IDependencyResolver Members

    public object GetService(Type serviceType)
    {
        object instance;

        try
        {
            instance = _container.Resolve(serviceType);

            if (serviceType.IsAbstract || serviceType.IsInterface)
                return null;

            return instance;
        }
        catch (Exception)
        {
            return null;
        }
    }

    public IEnumerable<object> GetServices(Type serviceType)
    {
        return _container.ResolveAll(serviceType);
    }

    #endregion
} 
```

UnityContainerSetup.cs

```
public static void Setup()
    {
        var container = new UnityContainer();
        container.RegisterType<IWelcomeService, WelcomeServices>();
        container.RegisterType<IDataRepository, DataRepository>();
        DependencyResolver.SetResolver(new UnityDependencyResolver(container));
    } 
```

HomeController.cs 公共类 HomeController : Controller { private IWelcomeService _service;

```
 public HomeController(IWelcomeService service)
    {
        _service = service;
    }

    public ActionResult Index()
    {
        ViewBag.Message = _service.GetMessage();

        return View();
    }

    public ActionResult About()
    {
        return View();
    }
} 
```

问题：当我运行应用程序时，出现以下错误：“没有为此对象定义无参数构造函数”

问题：UnitOfWork 何时启动？如何在设置统一容器时注入 IUnitOfWork？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T23:44:47.787

This is WebAPI, not MVC, but should work the same way... See here, for an example... [http://www.asp.net/web-api/overview/extensibility/using-the-web-api-dependency-resolver](http://www.asp.net/web-api/overview/extensibility/using-the-web-api-dependency-resolver)

# php - Slim 框架 .htaccess / 山狮 osx

> ID：11931971
> 
> 赞同：5
> 
> 时间：2012-08-13T09:56:48.433
> 
> 标签：php, .htaccess, http-status-code-404, osx-mountain-lion, slim

我有一个问题让我有些头疼，我希望这里有人可以分享一些光。

我之前运行 OS X Mountain Lion 时使用超薄框架完全没有问题。自从升级到 OS X Mountain Lion 后，我就遇到了麻烦，因为它会重写您的 httpd.conf 和其他设置。其中之一似乎是 htaccess。我有虚拟主机设置，一些以前使用 slim 工作的现在在除`/`.

所以我的 htaccess 文件自升级以来没有改变，所以我想知道问题是什么。我正在使用苗条框架下载中提供的默认 htaccess，我什至尝试了自定义的但无济于事。

访问`/`产生所需的页面。访问不同的 URL 会执行以下操作：

```
Not Found

The requested URL /myurl was not found on this server. 
```

任何人任何提示？

* * *

mod_rewrite 已启用，这就是我的虚拟主机设置：

```
<Directory "/Users/chris/Sites/slimphp/">
    Allow From All
    AllowOverride All
</Directory>
<VirtualHost *:80>
    ServerName "slim.php"
    DocumentRoot "/Users/chris/Sites/slimphp"
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T09:20:00.683

经过一些广泛的研究，我发现是 Apple 的 server.app 改变了很多事情。这个博客对我来说是一个救生员。

[http://petercompernolle.com/2012/07/26/fixing-httpdconf-in-osx-mountainlion](http://petercompernolle.com/2012/07/26/fixing-httpdconf-in-osx-mountainlion)

> 然后几个小时后，我想通了。它不再存储在 /etc/apache2/httpd.conf 中。出于某种原因，Apple 改变了一些长期有效的东西，而是在 /Library/Server/Web/Config/apache2/sites 中创建了一大堆文件。端口 80 上的任何内容都有一个 .conf 文件，我在 Server.app 中创建的站点的另一个 .conf 文件，以及为我在 Server.app 中所做的每次更改所做的一大堆其他备份。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T10:27:30.180

检查是否为 apache 服务器启用了 mod_rewrite，并且为相关的 apache 目录部分启用了`AllowOverride FileInfo`（或）。`all`这将允许 .htaccess 文件指定重写规则。

# c++ - C++ Sqlite 选择语句并存储为向量

> ID：11931978
> 
> 赞同：5
> 
> 时间：2012-08-13T09:57:34.373
> 
> 标签：c++, sqlite

我想像这样从 abe_account 中选择 *

```
sqlite> select * from abe_account;
admin|Peter John|admin_account|password 
```

但我想在 C++ 中做到这一点并返回每个元素，例如

```
admin as vector x[0]
Peter John as vector x[1]
admin_account as vector x[2]
password as vector x[4] 
```

然后在我关闭 sqlite3_close(db) 时在外面使用它

例如 cout << x[0] << endl;

我该怎么做，我试图 cout << str << endl;

但它什么也没打印。

下面的代码是我自己尝试的：

```
#include <iostream>
#include <sqlite3.h>

//g++ -o test test.cpp -lsqlite3
using namespace std;

int main()
{

    sqlite3 *db;
    sqlite3_stmt * stmt;

    if (sqlite3_open("abeserver.db", &db) == SQLITE_OK)
    {
    sqlite3_prepare( db, "SELECT * from abe_account;", -1, &stmt, NULL );//preparing the statement
    sqlite3_step( stmt );//executing the statement
    char * str = (char *) sqlite3_column_text( stmt, 0 );///reading the 1st column of the result
        }
    else
    {
        cout << "Failed to open db\n";
    }

    sqlite3_finalize(stmt);
    sqlite3_close(db);

    cout << str << endl;

    return 0;

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-13T10:10:39.620

当你执行一个语句时，你会得到一个表格的结果。你有一些列，你*知道*的数量和行，你*不*知道的数量。

首先，做一个

```
std::vector< std::vector < std:: string > > result; 
```

该`string`部分是单元格中的文本。内部向量是一行。外部向量是一列。

由于您*确切知道*numbe rof 列，因此您可以“添加列”。在您的情况下，您需要其中 4 个：

```
for( int i = 0; i < 4; i++ )
    result.push_back(std::vector< std::string >()); 
```

现在，您的外部向量有 4 个元素，代表 4 列。

现在，在您的代码中，您会得到这样的数据

```
while( sqlite3_column_text( stmt, 0 ) )
{
    for( int i = 0; i < 4; i++ )
        result[i].push_back( std::string( (char *)sqlite3_column_text( stmt, i ) ) );
    sqlite3_step( stmt );
} 
```

# ios - 发送到已释放实例的消息 - 用僵尸分析

> ID：11931981
> 
> 赞同：0
> 
> 时间：2012-08-13T09:57:48.940
> 
> 标签：ios, crash, sigabrt, nszombie

我的应用程序崩溃并显示消息“...发送到地址...的已释放实例”。因此，我使用僵尸工具分析了该应用程序，并在下面展示了导致崩溃的代码片段。我还没有找到导致这个错误的场景。

```
(void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control
{
if ([view.annotation isKindOfClass:[MKUserLocation class]]) {
}
else {
    CustomAnnotation *ann = (CustomAnnotation *) view.annotation;
    if (ann.annotationType == BusAnnotationType) {
        NSLog(@"accessory button tapped for annotation %@", view.annotation);
        BusInfoViewController *viewController = [[BusInfoViewController alloc] initWithNibName:@"BusInfoViewController" bundle:nil];
        BusForStation *bus = [self getBusWithId:[(CustomAnnotation *)view.annotation ID]];
        viewController.currentBus = bus;
        [self.navigationController pushViewController:viewController animated:YES];
        [viewController release];
    }
} 
```

分析器工具在 [self.navigationController pushViewController:viewController animated:YES] 行获得 91.4%；

有谁知道可能是什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T18:59:28.817

我想我在没有转换为 ARC 的情况下解决了类似的问题。我有一个导航控制器，我的 viewController 包含一个 mapView。加载视图时，我调用`setRegion:myregion animated:YES`. 如果我在动画完成之前单击“返回”，mapView 会在消息上引发“发送到已释放实例的`[respondsToSelector:]`消息”错误。我`myMapView.delegate = nil`在发布 myMapView 之前通过设置解决了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T10:04:14.370

考虑使用 ARC（自动引用计数）。Xcode 可以使用 Menu 几乎完全自动地转换您的项目`"Edit" ➞ "Refactor" ➞ "Convert to Objective-C ARC…"`。继续手动管理内存的原因很少。

您也可以尝试运行静态分析器（菜单`"Product" ➞ "Analyze"`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T10:43:21.463

我认为您遇到的问题是您在将 viewController 推送到视图后直接释放它。此外，如果您已经为 setCurrentBus（在 BusInfoViewController 中）完成了自己的实现，问题可能就在那里。

# mouse - Autohotkey 和 StrokesPlus 之间的冲突

> ID：11931985
> 
> 赞同：2
> 
> 时间：2012-08-13T09:58:11.603
> 
> 标签：mouse, autohotkey

我正在使用[StrokesPlus](http://www.strokesplus.com/)（使用[SendKeys](http://www.codeproject.com/Articles/6819/SendKeys-in-C)的鼠标手势）和以下快捷方式来关闭窗口：

```
acSendKeys("{DELAY=50}^{F_4}") 
```

默认关闭窗口是 control+w，但并非所有程序都接受这一点（UltraEdit，例如，使用 control+F4 - 使用 control+w 切换自动换行，我经常使用它）。

我还使用[Florian Winkelbauer 的 4 Clip](http://ahk.florianwinkelbauer.com/)，它将 F1-F4 绑定到剪贴板，因此 F1+c、F1+v 等用于复制/粘贴到第一个剪贴板。下面是来自 4clip 的绑定示例。

```
*F1::SendInput {blind}{F1}
*F2::SendInput {blind}{F2}
*F3::SendInput {blind}{F3}
*F4::SendInput {blind}{F4}

; F3 + F$
F3 & F4::
    Gosub SetDelimiter
return

; F4
F4 & c::CopyClipboard(4)
F4 & a::AppendClipboard(4)
F4 & s::SwapClipboard(4)
F4 & p::PrintClipboard(4)
F4 & v::PasteClipboard(c4)
F4 & b::PasteClipboard(cp4)
F4 & d::Clear(4) 
```

我发现的问题是，当我使用 StrokesPlus 快捷方式时，窗口会关闭，但随后系统似乎仍被按下控制键：我可以按退出键并出现开始菜单（就像按 control+ 时一样逃脱）。

我已经在 Windows 7 64 位和 Windows XP 64 位上复制了这个。

我已经确认，如果我注释掉 4 剪辑中的所有 F4 绑定，问题就会消失。

我也在[StrokesPlus 论坛](http://www.strokesplus.com/forum/topic.asp?TOPIC_ID=467)和[Autohotkey 论坛](http://www.autohotkey.com/community/viewtopic.php?f=1&t=90067)上发布了这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T23:58:19.493

[Rob](http://www.strokesplus.com/forum/pop_profile.asp?mode=display&id=1)（[StrokesPlus](http://www.strokesplus.com/)的作者）在[回复我在 StrokesPlus](http://www.strokesplus.com/forum/topic.asp?whichpage=1&TOPIC_ID=467#980)论坛上的帖子时解决了这个问题。

```
acSendControlDown()
acSendKeys("{F_4}")
acSendControlUp() 
```

在 StrokesPlus 中使用上述内容而不是默认值：

acSendKeys("{DELAY=50}^{F_4}")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-02-01T05:05:14.170

这是因为该`Ctrl`键在默认情况下被占用为“忽略键” `StrokesPlus`，这意味着当`Ctrl`按下该键时，所有鼠标手势都被暂时禁用。

如果您不使用此功能，您可以转到首选项并将“忽略键”设置为“无”。然后，您可以`Ctrl`像往常一样将密钥写入脚本。

# jquery - 调整 DIV 的大小以仅显示完整的文本行

> ID：11931986
> 
> 赞同：4
> 
> 时间：2012-08-13T09:58:16.010
> 
> 标签：jquery, css, overflow, hide, truncate

**描述** 我有一个固定高度的 div 和另一个带有文本的 div。我需要带有文本的 div 与另一个 div 的高度相同。

**我可以做什么**

我可以为文本 div 设置高度并隐藏溢出

**问题**

在某些情况下，它会将最后一行减半。它不应显示半行。

**示例代码**

[http://jsfiddle.net/LCQHb/](http://jsfiddle.net/LCQHb/)

**HTML 代码（如果 jsfiddle 不起作用）**

```
<div class="long">
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque quis quam sem. Nulla ultricies ultrices nisi, eu aliquam tellus accumsan sed. Praesent sapien mauris, fermentum non aliquam non, congue fermentum massa. Donec diam magna, tristique in luctus dignissim, mattis vitae enim.</p>

<h3>Morbi condimentum</h3>

<p>Fusce egestas aliquam tellus. Fusce dignissim, sapien non euismod adipiscing, odio tortor condimentum mi, at ultrices ligula lectus elementum ante. Pellentesque quis velit at odio venenatis mollis vitae molestie diam. Mauris imperdiet tristique adipiscing. Aliquam ornare tincidunt arcu, nec venenatis nisi mollis in. Proin euismod tempor elit, ut porta mauris euismod vel. Vestibulum congue ullamcorper dolor, a pellentesque nisl interdum non.</p>
<p>Phasellus at mollis tortor. Phasellus eget velit sit amet quam ultricies pretium quis nec augue. Suspendisse vel ante metus. Maecenas venenatis tristique lacus, pulvinar congue eros commodo ut. Donec vitae venenatis magna. Pellentesque posuere orci vitae nisi sagittis rutrum. Donec non mi nec tellus tincidunt malesuada. Nullam ornare ultricies ultrices. Donec mauris augue, pretium eget iaculis eget, tincidunt sit amet libero.</p>
</div>
<div class="short">
</div> 
```

​CSS **代码**

```
.short, .long {
    float: left;
    width: 300px;
}

.short {
    background: #eee;
    height: 210px;
}
.long {
    background: #ddd;
    overflow: hidden;
}
h3 {
    font-size: 18px;
    line-height: 1em;
} 
```

**JS代码**

```
jQuery(document).ready(function($) {
    var height = $('.short').height();
    $('.long').height(height);
});​ 
```

**问题**

*   如果它被切成两半，我如何隐藏最后一行？
*   如果不。有没有一个jQuery插件来解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T11:37:07.053

我试过这个：

[http://jsfiddle.net/LCQHb/13/](http://jsfiddle.net/LCQHb/13/)

这是新手的快速和最肮脏的解决方案。请看一看。

示例代码：

```
jQuery(document).ready(function($) {
var height = $('.short').height();

var x = $('.short').height() % $('.long').css('line-height').replace("px", "");

 $('.long').height(height - x);
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T07:23:43.723

不要使用 jQuery。您可以仅使用 CSS 来解决它。

在 div 下`short`写下两个div。从 中删除高度。将固定高度设置为。使用 CSS 属性并在div 中显示剩余的半行。`long``content``short``content``line-height``overflow``short`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T10:07:37.600

好问题。我不知道在 jquery 或其他方面有什么这样做的。你可以做的是：

*   让 height 成为你想要的 div 高度
*   计算 line-height 低于 height 的最接近倍数
*   显示具有此多重高度的文本 div
*   添加一个新的空白div来填补空白，即高度减去最接近的倍数

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T15:34:25.310

也许一些省略号插件会是一个很好的解决方案？例如：[http](http://pvdspek.github.com/jquery.autoellipsis/) : //pvdspek.github.com/jquery.autoellipsis/ 用于为长文本插入省略号，也可用于切割半行

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-03T06:34:17.970

这是我用来获得两列高度相等的函数，你可以在这里使用它：

```
function equalHeight(group) {
   tallest = 0;
   group.each(function() {
      thisHeight = $(this).height();
      if(thisHeight > tallest) {
         tallest = thisHeight;
      }
   });
   group.height(tallest);
}
$(document).ready(function() {
   equalHeight($(".long"));
   equalHeight($(".short"));
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-13T12:52:51.903

这是一个很好的问题，是真正让你思考的事情之一。我想出了某种解决方案，但是您需要控制元素的某些方面（而且我不确定在**.long**元素中合并其他元素（如标题等）会是什么样子），但在这里你去。我认为不可能得到一个可扩展的、100% 准确的解决方案来解决这个问题——但我还没有用尽所有的可能性，所以这是我目前最好的：

```
$(document).ready(function() {

    var target_height = 65;
    var div_height = parseInt($(".long").height());
    var font_height = parseInt($(".long").css("font-size"));
    var line_height = font_height + 4;

    $(".long").css("line-height", line_height + "px");

    while ((target_height % line_height) !== 0) {
        target_height++;
    }

    $(".long").css("height", target_height + "px");
    $(".short").css("height", target_height + "px");

});​ 
```

[这是 jsFiddle 示例](http://jsfiddle.net/tJzdE/)。尝试使用**target_height**变量，你应该看到你永远不会得到不完整的文本行。

# jquery - MVC 4自定义数据注释手动jquery验证调用

> ID：11931987
> 
> 赞同：6
> 
> 时间：2012-08-13T09:58:16.773
> 
> 标签：jquery, asp.net-mvc, c#-4.0, data-annotations

我们正在尝试使用 MVC 4 数据注释创建一些自定义验证，我们正在创建的验证是一种消息提示，而不是限制性验证。首先，我们创建了一些自定义验证类，继承自 ValidationAttribute 类并覆盖 IsValid() 方法来测试数据，如果无效则返回 ValidationResult。显示此数据的视图具有使用 EditorTemplates 显示剃刀生成的数据的部分视图，使用我们的自定义数据注释和许多内置验证，所有这些都包含在这样的表单中

```
@using (Html.BeginForm(new { ReturnUrl = ViewBag.ReturnUrl })) 
```

我们的要求是让用户回发数据并部分保存表单，但在任何无效字段上提示它们，因此在表单提交上使用 CSS 类以允许像这样回发

```
<input type="submit" value="Save" class="cancel"/> 
```

所有这些都工作正常，但我们现在要求在页面加载时显示所有错误消息，直到我尝试它才发现这是一个问题......</p>

我在 $(document).ready 事件中找到了一些使用 jquery 的示例，这些示例调用了表单有效方法，如此处所示

[MVC 3 和 JQuery 中的手动表单验证](https://stackoverflow.com/questions/5054328/manual-form-validation-in-mvc-3-and-jquery)

但这似乎对我们不起作用 $('form').Validate() 似乎没有做任何事情似乎触发表单验证的唯一调用是 $('form').valid() 但这只是似乎显示了内置验证，例如 [Required] 属性，并且显示自定义验证消息的唯一方法是使用提交按钮回发表单。

必须有一种方法可以让我的自定义数据注释显示消息而无需第一次回发页面，对吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T14:21:47.400

好的，所以我找到了一种方法来获得我想要的结果，尽管它比我想要/想象的要多一点工作。我缺少的东西是我没有在我的自定义验证类中实现 IClientValidatable 并且必须将我的自定义验证添加到我尝试过的 jQuery Validator addmethod 但没有在自定义验证类中使用 IClientValidatable ，我将快速运行假设你已经设置/包含了所有 jQuery 东西，如何让这个工作即时通讯

首先创建使用自定义验证属性的简单模型

```
public class Person
{
    [Required]
    [Display( Name="Name")]
    public string Name { get; set; }
    public int Age { get; set; }

    //Uses a custom data annotation that requires that at lease it self or the property name passed in the constructor are not empty
    [OneOfTwoRequired("Mobile")]
    public string Phone { get; set; }
    [OneOfTwoRequired("Phone")]
    public string Mobile { get; set; }
} 
```

自定义验证类，使用反射获取传入的字符串名称的属性进行测试

注意截至 2012 年 8 月 15 日：如果您使用的是 MVC 4，则需要引用 System.web.mvc 3.0 才能使用 IClientValidatable，因为 MVC 4 中似乎不存在 ModelClientValidationRule

```
public class OneOfTwoRequired : ValidationAttribute, IClientValidatable
    {
        private const string defaultErrorMessage = "{0} or {1} is required.";

        private string otherProperty;

        public OneOfTwoRequired(string otherProperty)
            : base(defaultErrorMessage)
        {
            if (string.IsNullOrEmpty(otherProperty))
            {
                throw new ArgumentNullException("otherProperty");
            }

            this.otherProperty = otherProperty;
        }

        public override string FormatErrorMessage(string name)
        {
            return string.Format(ErrorMessageString, name, otherProperty);
        }

        protected override ValidationResult IsValid(object value, ValidationContext validationContext)
        {
            PropertyInfo otherPropertyInfo = validationContext.ObjectInstance.GetType().GetProperty(otherProperty);

            if (otherPropertyInfo == null)
            {
                return new ValidationResult(string.Format("Property '{0}' is undefined.", otherProperty));
            }

            var otherPropertyValue = otherPropertyInfo.GetValue(validationContext.ObjectInstance, null);

            if (otherPropertyValue == null && value == null)
            {
                return new ValidationResult(this.FormatErrorMessage(validationContext.DisplayName));
            }

            return ValidationResult.Success;
        }
        public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
        {
            yield return new ModelClientValidationRule
            {
                ErrorMessage = FormatErrorMessage(metadata.DisplayName),
                //This is the name of the method aaded to the jQuery validator method (must be lower case)
                ValidationType = "oneoftworequired"
            };

        }
    } 
```

将此添加到视图或部分视图中，您必须确保它不在 $(document).ready 方法中

```
 jQuery.validator.addMethod("oneoftworequired", function (value, element, param) {
        if ($('#Phone).val() == '' && $('#Mobile).val() == '')
            return false;
        else
            return true;
    });

    jQuery.validator.unobtrusive.adapters.addBool("oneoftworequired"); 
```

如果您想验证表单而不回发或在初始页面加载时才需要 jQuery 验证器的东西，并且您只需调用 $('form').valid()

希望这可以帮助某人:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T13:21:44.690

这篇文章帮助了我，它似乎被移动了，但它在 Nuget 包中可用......

[http://www.eminencedigital.com/blog/index.php/2011/11/29/tracking-down-the-new-namespace-for-modelclientvalidationrule-in-asp-net-mvc-4-0-developer-预习/](http://www.eminencedigital.com/blog/index.php/2011/11/29/tracking-down-the-new-namespace-for-modelclientvalidationrule-in-asp-net-mvc-4-0-developer-preview/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-01T20:16:51.043

为什么您的 C# 代码通用，适用于任何两个字段，而脚本代码专门绑定到 id 为 "#Phone" 和 "#Mobile" 的字段？有没有办法概括脚本？

# zend-framework - Doctrine2 Zend 多对多关系问题

> ID：11931996
> 
> 赞同：-1
> 
> 时间：2012-08-13T09:59:15.087
> 
> 标签：zend-framework, doctrine-orm, many-to-many, database-relations

我在列表和类别之间建立了多对多的关系。我正在尝试使用 $listing->setCategories($categories) 为列表设置类别。我没有收到错误，但关系没有保存到数据库中。

我将在下面包含所有相关代码。

映射文件

列表映射

```
<many-to-many field="categories" target-entity="Default_Model_Category" mapped-by="listings" >
     <cascade>
         <cascade-persist/>
     </cascade>
 </many-to-many> 
```

类别映射

```
 <many-to-many field="listings" target-entity="Default_Model_Listing" inversed-by="categories"/> 
```

我在模型文件中有所有相关的变量和获取/设置函数。

试图在控制器中保存关系。

```
 $catModel = $this->em->getRepository('Default_Model_Category');
    $catArray = array();
    foreach($categories as $single) {
       $catArray[] = $catModel->findOneById($single);
    }
    $listing->setCategories($catArray);
    $this->em->flush(); 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T14:35:23.440

我有一个类似的错误。我不知道是什么原因造成的，但在保存新关系之前，我必须保存一个空值数组：

例如：

```
$listing->setCategories(array()); //clear current relationships
$this->em->flush();
$listing->setCategories($catArray); // save new relationships
$this->em->flush(); 
```

[编辑]

看起来您正在将父类别分配给子列表。简单来说，Doctrine 是说父母是对的，孩子是错的，所以孩子列表不能分配一个新的父母。尝试反转代码？

```
$catModel = $this->em->getRepository('Default_Model_Category');
foreach($categories as $single) {
    $cat = $catModel->findOneById($single);
    $listingArray = $cat->getListings();
    $listingArray[] = $listing;
    $cat->setListings($listingArray);
    $this->em->flush();
} 
```

# mysql - 来自 2 个 DB 的 MYSQL 查询为第二个 DB 提供 NULL

> ID：11931997
> 
> 赞同：1
> 
> 时间：2012-08-13T09:59:20.343
> 
> 标签：mysql, left-join, multiple-databases

这是这个[PHP mysql LEFT JOIN 输出的继续故事](https://stackoverflow.com/questions/11895724/php-mysql-natural-left-join-output)

我现在已经对第二个数据库（Cu.data）进行了修改，数据库表是这样的：

```
mysql> desc ins.data;
+-------------------+------------------+------+-----+---------------------+----------------+
| Field             | Type             | Null | Key | Default             | Extra          |
+-------------------+------------------+------+-----+---------------------+----------------+
| ID                | int(10) unsigned | NO   | PRI | NULL                | auto_increment |
| Date              | timestamp        | NO   |     | 0000-00-00 00:00:00 |                |
| Number            | text             | NO   |     | NULL                |                |
| Text              | text             | NO   |     | NULL                |                |
| Email             | text             | NO   |     | NULL                |                |
| TargetID          | varchar(20)      | NO   |     | NULL                |                |
| CSW               | text             | NO   |     | NULL                |                |
| TSW               | text             | NO   |     | NULL                |                |
| Key               | text             | NO   |     | NULL                |                |
| CType             | text             | NO   |     | NULL                |                |
+-------------------+------------------+------+-----+---------------------+----------------+
10 rows in set (0.00 sec)

mysql> desc Cu.data;
+----------+---------------+------+-----+---------+-------+
| Field    | Type          | Null | Key | Default | Extra |
+----------+---------------+------+-----+---------+-------+
| Title    | decimal(15,0) | NO   |     | NULL    |       |
| Cu       | varchar(45)   | NO   |     | NULL    |       |
| Co       | varchar(25)   | NO   |     | NULL    |       |
| Ci       | varchar(25)   | NO   |     | NULL    |       |
| SID      | int(12)       | NO   |     | NULL    |       |
| TargetID | varchar(20)   | NO   | MUL | NULL    |       |
| SType    | varchar(12)   | NO   |     | NULL    |       |
+----------+---------------+------+-----+---------+-------+
7 rows in set (0.00 sec) 
```

我的查询是这样的：

```
mysql> SELECT ins.data.Date,  ins.data.Number,  
ins.data.Email, ins.data.TargetD, ins.data.CSW, 
ins.data.TSW, ins.data.CType, Cu.data.Cu, 
Cu.data.SID, Cu.data.Co,
Cu.data.Ci, Cu.data.SType 
FROM ins.data 
LEFT JOIN  
Cu.data ON (ins.data.TargetID = Cu.data.TargetID); 
```

并且输出显示来自 ins.data（第一个数据库）的所有需要​​的值，但来自 Cu.data 的所有值都是“NULL”

TargetID 是数据库之间的“链接”。IE。使用 TargetID，我可以在数据库之间映射数据。

当人们将数据插入其中时，ins.data 上的数据会缓慢增加。Cu.data 是静态的，可能每年更新一次。

因为我从来没有让 PHP 工作过，所以我决定利用我的 bash 编程技能。通过 cron 脚本发送电子邮件，其中包含从数据库中获取的数据。脚本运行良好，但缺少一些数据。

现在是问题；为什么我的 SQL 子句仅从 ins.data 输出数据！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T11:05:39.647

在调查连接条件问题时，首先要看的是列是否相互兼容（即相同的类型和存储大小）。

对于文本列，可能还存在不容易找到的空格和不可打印字符的问题。