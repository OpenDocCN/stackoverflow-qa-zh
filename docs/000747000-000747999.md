# StackOverflow 问答 000747000-000747999

# drupal - Content Top Drupal Theme

> ID：747007
> 
> 赞同：1
> 
> 时间：2009-04-14T10:24:24.420
> 
> 标签：drupal, themes

I am looking for existing themes that has content top region so that I can put my menu there.

Any suggestion?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-14T10:48:01.570

Zen theme for drupal has a ready to use 'content top' region - [http://drupal.org/project/zen](http://drupal.org/project/zen) This project is by far the best tool for creating custom drupal themes and also comes with a ready to use subtheme 'zen-classic' (it has a content-top region too)

If you are using D6 adding regions to your own theme is a no-brainer ([http://drupal.org/theme-guide](http://drupal.org/theme-guide)). Its not very difficult in D5 either.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-16T14:50:23.490

如果您想要一个基本主题，请考虑以下比较：

[http://www.chapterthree.com/blog/review-drupal-6-starter-themes](http://www.chapterthree.com/blog/review-drupal-6-starter-themes)

这是我见过的可用于 Drupal 的基本主题的最佳评论。

# symbian - Bluetooth obex reception on 3rd edition device fails

> ID：747010
> 
> 赞同：1
> 
> 时间：2009-04-14T10:25:53.587
> 
> 标签：symbian, s60, pys60, s60-3rd-edition

I have got a mix of 2nd edition and 3rd edition s60 phones. I start custom obex listener on both phones using Python and try to send files to them. Though I can send files to 2nd edition phone; I can't send files to 3rd edition phone and the error being "Broken pipe".

Why this is so?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-16T09:15:19.980

至少在 Symbian C++ SDK 中，蓝牙 API 在第 2 版到第 3 版手机之间发生了变化。它可能也会影响 Python。

# .net - 如何为 WCF 服务创建全局异常处理程序？

> ID：747011
> 
> 赞同：65
> 
> 时间：2009-04-14T10:26:55.333
> 
> 标签：.net, wcf

我想记录所有异常**服务器端**。

在 ASP.NET 中，我在 Global.asax.cs 中编写了类似的内容，但这也适用于 WCF 服务吗？

```
public class Global : HttpApplication
{
    protected void Application_Error(object sender, EventArgs e)
    {
        Exception unhandledException = Server.GetLastError();

        //Log exception here
        ...
    }
} 
```

更新：我不想尝试...捕获我的 .svc 文件中的每个 [OperationContract]。我简短...我想确保我的服务抛出的所有异常都由 log4net 记录。我不是在谈论客户端如何处理异常。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2009-04-14T11:09:04.047

您可以通过实现 WCF 错误记录器`IErrorHandler`并将其与服务关联来创建它；通常（用于记录）您`false`将从`HandleError`（允许其他处理程序执行）返回，并在`HandleError`（使用`Exception`）或`ProvideFault`（使用）中记录错误`ref Message fault`。

我通过编写自定义行为（从 继承）来应用此处理程序，如果错误处理程序不存在`BehaviorBase`，该行为（在 中）将添加到该处理程序。`ApplyDispatchBehavior``endpointDispatcher.ChannelDispatcher.ErrorHandlers`

该行为可以通过配置应用。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2017-01-06T10:07:46.883

这本身不是答案，而是**SkyBlade002提供****的[出色答案](https://stackoverflow.com/a/14512310/1638622)**的附录，提供了 C# 中的给定代码，以方便任何 C# 编码人员：

这是我的代码（在 ErrorHandler.cs 中）：

```
/// <summary>
///     This class defines a global ErrorHandler, that allows us to control the fault message returned to the client and
///     perform custom error processing like logging.
/// </summary>
public class ErrorHandler : IErrorHandler {
    private static readonly ILog Log = LogManager.GetLogger(System.Reflection.MethodBase.GetCurrentMethod().DeclaringType);

    /// <summary>
    ///     Enables the creation of a custom <see cref="T:System.ServiceModel.FaultException`1" /> that is returned from an
    ///     exception in the course of a service method.
    /// </summary>
    /// <remarks>
    ///     This method is optionally used to transform standard exceptions into custom FaultException(Of TDetail) that
    ///     can be passed back to the service client.
    /// </remarks>
    /// <param name="error">The <see cref="T:System.Exception" /> object thrown in the course of the service operation.</param>
    /// <param name="version">The SOAP version of the message.</param>
    /// <param name="fault">
    ///     The <see cref="T:System.ServiceModel.Channels.Message" /> object that is returned to the client, or
    ///     service, in the duplex case.
    /// </param>
    public void ProvideFault(Exception error, MessageVersion version, ref Message fault) {}

    /// <summary>
    ///     This method will be called whenever an exception occurs. Therefore,
    ///     we log it and then return false so the error can continue to propagate up the chain.
    /// </summary>
    /// <param name="error">Exception being raised.</param>
    /// <returns>False to let the error propagate up the chain, or True to stop the error here.</returns>
    public bool HandleError(Exception ex) {
        Log.Error(ex); //TODO your own logging
        return false;
    } 
```

这是我的代码（在 ErrorHandlerBehavior.cs 中）：

```
/// <summary>
///     This class defines a BehaviorExtensionElement, so that we can use the ErrorServiceBehavior class, defined above, in
///     our App.config.
/// </summary>
public class ErrorHandlerBehavior : BehaviorExtensionElement {
    /// <summary>
    ///     Gets the type of behavior.
    /// </summary>
    public override Type BehaviorType {
        get { return typeof (ErrorServiceBehavior); }
    }

    /// <summary>
    ///     Creates a behavior extension based on the current configuration settings.
    /// </summary>
    /// <returns>
    ///     The behavior extension.
    /// </returns>
    protected override object CreateBehavior() {
        return new ErrorServiceBehavior();
    }
} 
```

这是我的代码（在 ErrorServiceBehavior.cs 中）：

```
/// <summary>
///     This class defines a ServiceBehavior, that will allow us to add our custom ErrorHandler class, defined above, to
///     each channel we have a service running on.
/// </summary>
public class ErrorServiceBehavior : IServiceBehavior {
    /// <summary>
    ///     Provides the ability to inspect the service host and the service description to confirm that the service can run
    ///     successfully.
    /// </summary>
    /// <param name="serviceDescription">The service description.</param>
    /// <param name="serviceHostBase">The service host that is currently being constructed.</param>
    public void Validate(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase) {}

    /// <summary>
    ///     Provides the ability to pass custom data to binding elements to support the contract implementation.
    /// </summary>
    /// <param name="serviceDescription">The service description of the service.</param>
    /// <param name="serviceHostBase">The host of the service.</param>
    /// <param name="endpoints">The service endpoints.</param>
    /// <param name="bindingParameters">Custom objects to which binding elements have access.</param>
    public void AddBindingParameters(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase, Collection<ServiceEndpoint> endpoints, BindingParameterCollection bindingParameters) {}

    /// <summary>
    ///     Provides the ability to change run-time property values or insert custom extension objects such as error handlers,
    ///     message or parameter interceptors, security extensions, and other custom extension objects.
    /// </summary>
    /// <param name="serviceDescription">The service description.</param>
    /// <param name="serviceHostBase">The host that is currently being built.</param>
    public void ApplyDispatchBehavior(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase) {
        //Enumerate all channels and add the error handler to the collection
        var handler = new ErrorHandler();
        foreach (ChannelDispatcher dispatcher in serviceHostBase.ChannelDispatchers) {
            dispatcher.ErrorHandlers.Add(handler);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2013-01-24T22:51:18.813

我自己遇到了这个问题，经过许多打开的研究标签，包括在其他答案中链接的文章，这正是有人需要的。

这是您将需要的 ErrorHandler 类...

```
Imports System.ServiceModel.Configuration
Imports System.ServiceModel.Description
Imports System.ServiceModel.Dispatcher

''' <summary>
''' This class defines a global ErrorHandler, that allows us to control the
''' fault message returned to the client and perform custom error processing
''' like logging.
''' </summary>
Public Class ErrorHandler
    Implements IErrorHandler

    ''' <summary>
    ''' This method will be called whenever an exception occurs. Therefore,
    ''' we log it and then return false so the error can continue to propagate up the chain.
    ''' </summary>
    ''' <param name="ex">Exception being raised.</param>
    ''' <returns>False to let the error propagate up the chain, or True to stop the error here.</returns>
    Public Function HandleError(ByVal ex As Exception) As Boolean Implements IErrorHandler.HandleError
        'Unknown error occurred at the Service layer, log the event
        logEvent("Encountered an unknown error at the Service layer.", ex, EventLogEntryType.Error)

        Return False
    End Function

    ''' <summary>
    ''' This method is optionally used to transform standard exceptions into custom
    ''' FaultException(Of TDetail) that can be passed back to the service client.
    ''' </summary>
    ''' <param name="ex">Exception being raised.</param>
    ''' <param name="version">SOAP version of the message.</param>
    ''' <param name="fault">Message object that is returned to the client.</param>
    Public Sub ProvideFault(ByVal ex As Exception, ByVal version As Channels.MessageVersion, ByRef fault As Channels.Message) Implements IErrorHandler.ProvideFault
    End Sub

End Class

''' <summary>
''' This class defines a ServiceBehavior, that will allow us to add our
''' custom ErrorHandler class, defined above, to each channel we have a
''' service running on.
''' </summary>
Public Class ErrorServiceBehavior
    Implements IServiceBehavior

    Public Sub AddBindingParameters(serviceDescription As ServiceDescription, serviceHostBase As ServiceHostBase, endpoints As ObjectModel.Collection(Of ServiceEndpoint), bindingParameters As Channels.BindingParameterCollection) Implements IServiceBehavior.AddBindingParameters
    End Sub

    Public Sub ApplyDispatchBehavior(serviceDescription As ServiceDescription, serviceHostBase As ServiceHostBase) Implements IServiceBehavior.ApplyDispatchBehavior
        'Enumerate all channels and add the error handler to the collection
        Dim handler As New ErrorHandler()
        For Each dispatcher As ChannelDispatcher In serviceHostBase.ChannelDispatchers
            dispatcher.ErrorHandlers.Add(handler)
        Next
    End Sub

    Public Sub Validate(serviceDescription As ServiceDescription, serviceHostBase As ServiceHostBase) Implements IServiceBehavior.Validate
    End Sub

End Class

''' <summary>
''' This class defines a BehaviorExtensionElement, so that we can
''' use the ErrorServiceBehavior class, defined above, in our App.config.
''' </summary>
Public Class ErrorHandlerBehavior
    Inherits BehaviorExtensionElement

    Protected Overrides Function CreateBehavior() As Object
        Return New ErrorServiceBehavior()
    End Function

    Public Overrides ReadOnly Property BehaviorType As Type
        Get
            Return GetType(ErrorServiceBehavior)
        End Get
    End Property

End Class 
```

然后，需要在服务项目的 App.config 文件中添加/更新这些部分...

```
<system.serviceModel>
  <extensions>
    <behaviorExtensions>
      <!-- Add in our custom error handler -->
      <add name="ErrorLogging" type="Service.ErrorHandlerBehavior, Service, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" />
    </behaviorExtensions>
  </extensions>
  <services>
    <service name="Service.Service" behaviorConfiguration="Service.ServiceBehavior">
      <endpoint address="" binding="wsHttpBinding" bindingConfiguration="wsHttp"
      contract="SentinelService.IService"/>
      <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
    </service>
  </services>
  <behaviors>
    <serviceBehaviors>
      <behavior name="Service.ServiceBehavior">
        <serviceMetadata httpGetEnabled="True" />
        <serviceDebug includeExceptionDetailInFaults="False" />
        <!-- Add in our custom error handler, from behaviorExtensions element -->
        <ErrorLogging />
      </behavior>
    </serviceBehaviors>
  </behaviors> 
```

具体来说，需要添加一个behaviorExtension，它的名称需要添加到行为部分，行为部分需要命名，并且该行为部分需要是服务的行为配置。

不过要小心 behaviorExtension 上的“type”属性，它必须是准确的。如果您不确定，可以使用以下方法来确定`GetType(ErrorHandlerBehavior).AssemblyQualifiedName`。

如果您有兴趣，这是我使用的 logEvent 函数背后的代码...

```
''' <summary>
''' Logs a message and optional exception to the application event log.
''' </summary>
''' <param name="message">String message to log.</param>
''' <param name="ex">Exception to log.</param>
''' <param name="eventType">EventLogEntryType indicating the message severity.</param>
Public Sub logEvent(ByVal message As String, Optional ByVal ex As Exception = Nothing, _
                    Optional ByVal eventType As EventLogEntryType = EventLogEntryType.Information)
    'Initialize report
    Dim report As String = message + vbNewLine + vbNewLine

    'Create eventLogger
    Dim eventLogger As New EventLog()

    'Register event source, add any Exception information to the report, and then log it
    Try
        'Register the app as an Event Source
        If Not EventLog.SourceExists("MyAppName") Then
            EventLog.CreateEventSource("MyAppName", "Application")
        End If

        If ex IsNot Nothing Then
            'Force eventType to error
            eventType = EventLogEntryType.Error

            'Add Exception Information to report
            report += "Exception Information:" + vbNewLine
            Dim currentException As Exception = ex
            Dim exCount As Integer = 1
            While (currentException IsNot Nothing)
                report += Space(5) + If(exCount = 1, "Message:", "Inner Exception:") + vbNewLine
                report += Space(10) + currentException.Message + vbNewLine
                report += Space(5) + "StackTrace:" + vbNewLine
                report += Space(10) + currentException.StackTrace + vbNewLine
                report += vbNewLine

                currentException = currentException.InnerException
                exCount += 1
            End While
        End If
    Catch reportException As Exception
        'This catch ensures that no matter what some error report is logged.
        report += vbNewLine + vbNewLine + "PARTIAL REPORT!!!...AN ERROR WAS ENCOUNTERED GENERATING ERROR REPORT."
    Finally
        Try
            'Log report
            eventLogger.Source = "MyAppName"
            eventLogger.WriteEntry(report, eventType)
        Catch logEventException As Exception
            'Eat it...nothing can be done at this point and we do
            'not want the application to crash over an error report
            'if we can prevent it
        End Try
    End Try
End Sub 
```

# asp.net - 访问 RadGrid 中 GridEditableItem 的所有元素

> ID：747013
> 
> 赞同：3
> 
> 时间：2009-04-14T10:29:20.647
> 
> 标签：asp.net, telerik, radgrid

我正在拦截 RadGrid 的更新操作。像这样

```
e.Canceled = true;
GridEditableItem item = e.Item as GridEditableItem;
Hashtable dictionary = new Hashtable();
item.ExtractValues(dictionary); 
```

这给了我 HashTable 中的更改值。问题是我想访问当前行的所有元素。我怎么做

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-07-02T10:32:37.970

如果你更换

> `item.ExtractValues(dictionary);`

和

```
e.Item.OwnerTableView.ExtractValuesFromItem(dictionary,item); 
```

您应该拥有字典中的所有元素。

# c++ - How to Disable Windows TCP/IP Stack in VC++ [Programmatically]

> ID：747017
> 
> 赞同：1
> 
> 时间：2009-04-14T10:30:51.813
> 
> 标签：c++, visual-c++, networking, tcp, uninstallation

I wanted to know How to **Disable** Windows TCP/IP Stack in VC++ [ Programmatically ].

We are doing some raw socket programming using winpcap. So our application does not need Windows TCP/IP Stack and We Want to uninstall it the moment our application starts.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-14T10:36:50.847

The TCP/IP stack is an essential part of any modern OS, including recent versions of MS Windows. As explained on [MS knowlegebase Q299357](http://support.microsoft.com/?scid=kb%3Ben-us%3B299357&x=16&y=15) (speaking about Win XP):

> Because TCP/IP is a core component of Windows, you cannot remove it.

At any rate, even if it were possible, no program that uses TCP/IP (which is most modern software, since most contain some kind of net integration, auto update etc.) would work. And most would probably fail in mysterious ways, since no one tested that configuration.

So the short answer is: Don't do it.

Maybe you could explain why you feel it necessary to remove TCP/IP networking? Then we might be able to help you.

**Edit:**

Based on your comment below, if you want bypass/disable the ARP handling of the TCP/IP stack, then WinPcap should let you do that. If not, you probably need to write your own Windows network driver. Again, this seems extremely complicated and intrusive. Could you please describe what your application does and why you even need to mess around with low-level networking?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-12-09T02:05:24.823

您需要拨打MSDN`WSCDeinstallProvider`上[记录的电话。](http://msdn.microsoft.com/en-us/library/ms742231(VS.85).aspx)您还需要使用 枚举提供程序`WSCEnumProtocols`。

我不确定您尝试的方法是否有效，但我祝您好运。让我们知道您是否成功。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-06T14:39:04.437

禁用 TCP/IP 并不少见。我们倾向于在我们的主机上禁用它，以便虚拟机可以不间断地使用 IP 堆栈。

您可以通过转到相关适配器的连接属性页面并取消选中 TCP/IP 框来手动禁用它（如果安装了 IPv6，则可能有多个）。

经过一些简短的调查后，WMI 似乎不支持以编程方式更改此属性。但是，看起来 HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Tcpip\Linkage\Bind 是存储启用 TCP/IP 的每个适配器的关键。从该列表中删除适配器（使用 win32 注册表 API）可能会禁用 TCP/IP。

测试时要小心...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-01-18T14:25:04.227

我知道它不能直接回答这个问题，但是由于我一整天都在寻找完全相同的东西，我虽然可以给其他人我找到的解决方案。

我找到了一个名为[nvspbind](http://archive.msdn.microsoft.com/nvspbind)的工具，它正是这样做的。它可用于在任何 NIC 上设置正确的绑定和启用/禁用特定绑定。

它使用一个名为[INetCfg](http://msdn.microsoft.com/en-us/library/ff547694.aspx)的接口。如果您不想使用该工具并以编程方式进行操作，我认为这是您应该使用的界面。

我仍然是学生，所以我可能错了。

# sql - 展平用于汇总/导出的关系数据

> ID：747021
> 
> 赞同：1
> 
> 时间：2009-04-14T10:33:25.303
> 
> 标签：sql, ms-access

假设我们在 MS Access 数据库中有两个表：

服务用户：

```
| ID | Name | Other details... |
| 1  | Joe  | Blah...          |
| 2  | Fred | Qwerty...        |
| 3  | Bob  | Something else...| 
```

提供服务的团队：

```
| ID | TeamID | UserID |
| 1  | T1     | 1      |
| 2  | T2     | 1      |
| 3  | T2     | 2      |
| 4  | T3     | 2      |
| 5  | T3     | 3      | 
```

我需要生成一个汇总查询，为每个用户生成一行，前几个团队（按 TeamID）分配在不同的列中。像：

询问：

```
| UserID | Name | Team1 | Team2 |
| 1      | Joe  | T1    | T2    |
| 2      | Fred | T2    | T3    |
| 3      | Bob  | T3    | Null  | 
```

我可以使用 max() 从子选择查询中获取 Team1 列，但我对如何实现 Team2、Team3 等有一个完整的心理障碍。（是的，我知道如果有更多的团队分配给用户与我创建列相比，查询将丢失该信息：这不是问题）。

编辑：为了澄清，查询中的列数将是固定的（在实际查询中，总是有 7 个）。如果团队少于列，则附加列应为 Null（如示例所示）。如果团队多于列，则此摘要中仅显示前 7 个团队。

编辑 2 - 可能的解决方案不起作用...：

我试过...

```
SELECT UserTable.ID As UID, UserTable.Name, 
(SELECT TOP 1 TeamID FROM TeamTable WHERE UserTable.ID = TeamTable.UserID
ORDER BY TeamID) As Team1
FROM UserTable 
```

...效果很好。很遗憾...

```
SELECT UserTable.ID As UID, UserTable.Name, 
(SELECT TOP 1 TeamID FROM TeamTable WHERE UserTable.ID = TeamTable.UserID
ORDER BY TeamID) As Team1,
(SELECT TOP 1 TeamID FROM TeamTable WHERE UserTable.ID = TeamTable.UserID
AND TeamID <> Team1 ORDER BY TeamID) As Team2
FROM UserTable 
```

... 为 Team1 抛出一个参数框。关于如何从喷气式查询中跳过第一个/第二个/等...值的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-14T12:53:12.737

交叉表查询应该适合。

查询 1：调用 TeamUser

```
SELECT Teams.UserID, ServiceUsers.SName, Teams.TeamID
FROM ServiceUsers 
INNER JOIN Teams ON ServiceUsers.ID = Teams.UserID; 
```

交叉表

```
TRANSFORM First(TeamUser.TeamID) AS FirstOfTeamID
SELECT TeamUser.UserID, TeamUser.SName
FROM TeamUser
GROUP BY TeamUser.UserID, TeamUser.SName
PIVOT TeamUser.TeamID; 
```

编辑以回应评论

应该可以组合这两个查询并使用联合查询来减少条目数。

```
TRANSFORM First(t.ATeamID) AS FirstOfATeamID
SELECT t.UserID, s.SName
FROM (SELECT Teams.UserID, First(Teams.ID) AS FirstOfID, 
             First(Teams.TeamID) AS ATeamID, "1st" As TeamCount
      FROM Teams
      GROUP BY Teams.UserID
      UNION 
      SELECT Teams.UserID, First(Teams.ID) AS FirstOfID, 
             First(Teams.TeamID) AS ATeamID, "2nd" As TeamCount
      FROM Teams
      WHERE ID Not In (SELECT First(Teams.ID) 
                       FROM Teams GROUP BY Teams.UserID)
      GROUP BY Teams.UserID) t
INNER JOIN ServiceUsers s ON t.UserID = s.ID
GROUP BY t.UserID, s.SName
PIVOT t.TeamCount 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-14T14:00:49.860

首先，您需要一个查询来为与用户关联的团队分配一个从 1 到 N 的数字：

```
SELECT UserID, TeamID, 
       (SELECT count(*) FROM TeamTable t2 WHERE t2.TeamID <= TeamTable.TeamID and t2.UserID=TeamTable.UserID) AS position 
FROM TeamTable 
ORDER BY TeamID 
```

我们将此查询称为 TeamList。现在，您可以在主查询中使用此查询，调用它 7 次，每次过滤不同的位置：

```
SELECT UserTable.ID As UID, UserTable.Name, 
   (SELECT TeamID FROM TeamList WHERE UserTable.ID = TeamList.UserID AND position=1) As Team1,
   (SELECT TeamID FROM TeamList WHERE UserTable.ID = TeamList.UserID AND position=2) As Team2,
   [...]
FROM UserTable 
```

您可以在一个查询中组合所有这些，但定义 TeamList 查询并多次调用它更实用。另请注意，这种编号方式是基于 TeamID 的顺序。您可以通过更改 TeamList 查询来选择其他顺序，但您选择的字段必须为每个 Team 具有不同的唯一值（否则 <= 比较会生成错误的数字）。

显然，如果有大量的行，性能会很糟糕，但对于几百行，它是可以接受的。你得试试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-14T10:53:07.843

我不是 MS-Access 专家，但是否有某种方法可以跳过子查询中的行？因此，对于 Team1，您跳过 0 行，对于 Team2，您跳过 1 行，依此类推。每次使用 MAX() 从子查询中的行中选择最大值。由于每次少一行，因此每次都会获得另一个最大值（当然，如果您对子查询结果进行排序）。

一般的想法是，您的每个子查询（对于 Team1、Team2、...）都返回一个较少的值，这样您的 MAX() 函数每次都返回另一个值。

看看 MS-Access SQL 有什么可能，你只能使用 TOP。但是你必须知道你的子查询有多少行。我认为这是不可能的。假设您确实知道这一点并且用户是 3 个团队的成员，那么每个团队的子查询包括`SELECT TOP(3) ...`、`SELECT TOP(2) ...`、`SELECT TOP(1)...`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T15:11:48.283

只需将 Team1 作为子查询，在获取 Team2 时引用它之前填充 Team1

```
SELECT UserTable.ID As UID,UserTable.Name,T1.Team1,
(SELECT TOP 1 TeamID FROM TeamTable WHERE UserTable.ID = TeamTable.UserID AND TeamID <> T1.Team1 ORDER BY TeamID) As Team2 
FROM UserTable 
LEFT OUTER JOIN
    (
        SELECT UserTable.ID As UID,  
           (SELECT TOP 1 TeamID FROM TeamTable WHERE UserTable.ID = TeamTable.UserID 
        ORDER BY TeamID) As Team1, 
        FROM UserTable 
    )T1 ON UserTable.ID=T1.UID 
```

这也适用于 CTE：

```
;With CTE_Team1 As (
        SELECT UserTable.ID As UID,  
           (SELECT TOP 1 TeamID FROM TeamTable WHERE UserTable.ID = TeamTable.UserID ORDER BY TeamID) As Team1, 
        FROM UserTable )
SELECT UserTable.ID As UID,UserTable.Name,T1.Team1,
   (SELECT TOP 1 TeamID FROM TeamTable WHERE UserTable.ID = TeamTable.UserID AND TeamID <> T1.Team1 ORDER BY TeamID) As Team2 
FROM UserTable 
LEFT OUTER JOIN
CTE_Team1 T1 ON UserTable.ID=T1.UID 
```

# visual-studio-2008 - Visual Studio 2008 在解决方案中切换活动项目

> ID：747023
> 
> 赞同：5
> 
> 时间：2009-04-14T10:34:05.393
> 
> 标签：visual-studio-2008, projects-and-solutions

我不知道它是怎么发生的，但是大约一个星期以来，每次我在同一解决方案中的文件（不同项目的）之间移动时，Visual Studio 都会不断切换活动项目。当然当我按F5开始调试或Ctrl+F5运行测试时，它告诉我无法启动，因为无法直接启动类库……它再次切换了活动项目。

这让我发疯，我找不到将其关闭的设置。我已经安装了以下插件：

*   ReSharper 4.5
*   团队城市
*   AnkhSVN 2.0.something（最新）
*   幽灵医生
*   加里奥

我已启用和禁用在解决方案资源管理器中跟踪活动项目选项，但这没有帮助。

任何人的想法？

谢谢！

* * *

更新：

*   我按照Sharptooth的建议检查了ProjectGuid，所有项目都有一个独特的guid。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-14T10:40:58.030

在解决方案资源管理器中右键单击您的解决方案，在左侧的树视图中选择通用属性 - 启动项目，然后根据需要将单选按钮调整到右侧：

[替代文字 http://www.rgoarchitects.com/nblog/content/binary/multistart.png](http://www.rgoarchitects.com/nblog/content/binary/multistart.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-14T10:42:50.473

在“项目和解决方案”->“构建和运行”下有一个选项“对于新解决方案，使用当前选择的项目作为启动项目”，这可能会导致这种行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-14T10:38:07.817

如果您手动复制项目文件，这种情况经常发生 - 那么您在一个解决方案中有两个具有相同 GUID 的项目，而 VS 无法区分它们，因为它存储了“活动”项目的 GUID。

解决方案是在文本编辑器中打开每个项目文件（记事本就可以了）并更改 GUID。使用“创建 GUID”工具生成新的 GUID。

# php - Array always comes back as empty

> ID：747026
> 
> 赞同：0
> 
> 时间：2009-04-14T10:34:54.080
> 
> 标签：php, arrays

Below is my register form for my game and it is looking for errors that the user may have done, but even if an error is found it wont add it onto the `$errors` array. When I `print_r` the array it returns empty.

I believe something is going wrong with the if functions because if I add a value into the array from outside one of the if functions it adds it.

Here is my code:

```
if (isset($_GET['action'])){
db_connect();
db_select();

if ($_GET['action'] == "register"){
  $username = $_POST['username'];
  $password = $_POST['password'];
  $confirm = $_POST['confirm'];
  $email = $_POST['email'];
  $agree = $_POST['agree'];

  $errors = array();
  if (!isset($username)){
    $errors['0'] = "You did not specifiy a username";
  }elseif (ereg("[^a-z0-9]", $username)) {
    $errors_array['0'] = "Usernames can only contain lowercase letters and numbers";
  }elseif (mysql_num_rows(mysql_query("SELECT username FROM users WHERE username = '{$username}'")) > 0) {
    $errors['0'] = "The username you chose has already been taken";
  }

  if (!isset($password)){
    $errors['1'] = "You did not specify a password";
  }elseif ($password != $confirm){
    $errors['1'] = "The password and password confirm fields do not match";
  }

  if (!isset($email)){
    $errors['2'] = "You did not specify a E-mail address";
  }elseif (mysql_num_rows(mysql_query("SELECT email FROM users WHERE email = '{$email}'")) > 0) {
    $errors['2'] = "The E-mail you specified is already being used";
  }
  print_r($errors);
  }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-14T10:48:44.110

First you do this:

```
$username = $_POST['username'];
$password = $_POST['password'];
$confirm = $_POST['confirm'];
$email = $_POST['email'];
$agree = $_POST['agree']; 
```

And then you check if $username, $password, etc isset(). This will always return true (because you just initialized them). You should do the if(isset()) on the $_POST variables (I.E. not the variables you created).

Because of this all your checks will work perfectly, because you don't do any checks that check the actual data (valid e-mail address, min / max username length, etc).

A simple way to discover problems like this is to set error_reporting to E_ALL. This will show all errors / warnings / notices / etc. This will give you a warning if you use a variable that does not exist / has not been set.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-14T10:41:39.290

Some quick points:

*   In one place you use `$errors_array` instead of `$errors`
*   Instead of using indexes when writing to the array, use `$errors[] = "some_error"`. This will add `some_error` to the end of the array.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-14T10:40:54.520

Well, the first thing I'd do is not address your arrays by key. If the only error is no email address then do you really want the only error to be indexed by '2'?

Better to user $error[] = 'Something...";

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-14T10:40:10.247

try adding a test case to your array on creation.

```
$errors = array('test'=>'Test'); 
```

Then if you receive this output only when you print_r you know your if statements arent working as expected.

Without more information about what values the variables have on entry its difficult to debugs.

Maybe do a dump of $_POST (print_r($_POST)) to make sure you are getting the values you think you are.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-14T10:42:24.390

In one place there you are calling $errors_array['0'], you should add into the array by doing $errors[] = "Foo";

2nd please look into [Safe SQL](http://is.php.net/manual/en/function.mysql-real-escape-string.php)

3rd check what if statements are running. Place `echo "1";` into each of your if statements (and increment that number by 1 for each placement. Then you can see what is actually running. (if at all))

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-04-14T10:57:55.040

Solved my own problem, I should have been using "empty" not "!isset" in my if functions. because they were set as below shows:

```
$username = $_POST['username'];
$password = $_POST['password'];
$confirm = $_POST['confirm'];
$email = $_POST['email'];
$agree = $_POST['agree']; 
```

Thanks for the help anyway.

# project-management - 如何管理单人项目的流程

> ID：747030
> 
> 赞同：6
> 
> 时间：2009-04-14T10:35:27.480
> 
> 标签：project-management, agile, scrum

我们有一个开发人员从事 3 个不同的项目。他曾经致力于错误修复、维护和一些功能实现。在一个特定项目中，他与另一位初级开发人员合作。

我们公司希望为所有项目实施 Scrum。对于 1 人或 2 人项目，处理 Scrum 流程的最佳方法是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-21T11:20:18.483

我同意它应该保持 Simple Stupid，但大多数 Scrum 框架都可以在这里使用。

我有几个人以这种方式从事项目以及维护/运营工作。

产品负责人/待办事项 - 仍然有负责定义业务价值和优先级的负责人，对吗？积压的工作应该仍然存在。如果他是更大 Scrum 企业的一部分，那么他可能需要以更大的 Product Backlog 为食。

Scrum 团队——是的，它是一个 1 人或 2 人的团队。所以它真的是自我组织......但没关系！每日站会？是的，在 2 个人之间，或者如果它有时只是 1 个人，是检查任务和问题的好时机，想想需要向 Scrum of Scrum 或产品负责人提出哪些障碍。

Sprint - 仍然是一个好主意，特别是如果是在 sprint 中工作的大型 Scrum 企业的一部分，但即使没有它。赶上 PO 的好机会，演示你得到了什么，激励自己，回顾并看看你可以做得更好，为下一个 sprint 做计划。请注意，如果在 Scrum 企业/Scrum of Scrum 之外工作，sprint 可以从比平时更短的时间中受益，因为范围可能更小并且计划开销更低。但这取决于情况。

回顾展——是的，它可以单独举行。我认为杀手级程序员需要回顾他们自己的工作/进展，并对阻碍他们的事情采取行动。甚至在您的工作区中保留一张图表以帮助您取得进步。

任务板/燃尽 - 是的，你需要这些。您可以将它们放在墙上的工作空间中，它们可以很小，但即使您是一个人，它们也确实很有帮助。为什么 GTD（Getting Things Done）可以帮助一个人而 TB/BDC 却不能？如果那个人正在做项目工作，那么 Sprint Burndown 和 Release Burndown 会提供很多价值。如果他在做运营/维护工作，这仍然是一种验证他是否走上正轨并相应地采取相关措施的方法。

Scrum Master - 这个人应该是他自己的 Scrum Master。

教练——如果组织有教练帮助团队/SM/PO，那么他也应该帮助这个 Scrum 小组……

总而言之——我很清楚，Scrum/Agile 的价值观和原则也适用于 1-2 人团队。同样清楚的是，大部分 Scrum 也可以应用。

问题是有关个人的想法。

如果管理层、开发人员、PO 都同意并相信价值观/原则是有意义的，并努力改进，它就会奏效。如果他们不这样做，那么首先要达到整体思维有意义的地步，然后处理单个团队......

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-14T10:55:49.243

SCRUM 的理想团队是 8-10 人。所以，我不知道你怎么能让它为这么小的团队工作。

一般来说，管理人员会误解 Scrum 或敏捷流程。仅仅通过阅读 Scrum 的成功率，它就会在管理人员中产生我想做的那种吸引力。

整个 SCRUM 实施有两个方面：

*   流程：站立会议、回顾会议等。
*   工程实践：创建明确的需求（用户故事）、测试自动化、持续集成等。

恕我直言，您的管理层在这里期待工程实践和（可能）一些流程。

你可以零碎地采用这些来获得更好的状态，然后你可能会像现在这样。（至少在管理层的眼中;-)）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-14T10:47:56.233

也许 SCRUM 在这里有点矫枉过正。组织成工作包和基础任务。

最好的办法？保持简单愚蠢。不要用太多的管理开销来膨胀项目。您不必为 Scrum 任务使用软件。Redmine / JIRA 等问题跟踪器非常适合跟踪您的进度和分配任务。但是您也可以使用带有一些磁铁和备忘录（任务名称）的白板。所以你可以通过看板分配任务；）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-04T22:06:45.500

以我的经验，Scrum 仍然适用于由几个人组成的小团队中的项目，这些人有现有的职责。原因如下：

1.  它仍然鼓励任务突破和细粒度估计。
2.  冲刺仍然是固定的工作单元，其范围或持续时间不应改变。
3.  每日站立会议仍然鼓励定期讨论。
4.  您仍然在迭代周期中交付。
5.  还有一个燃尽图可以追踪。
6.  您仍然有回顾性的持续改进阶段。

所有这些都同样适用于 2 人团队或 8 人团队。不要被人们说“只有一种方法可以做 Scrum”或者你需要超过少数人才能让它工作的人吓到。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-20T20:49:01.867

Scrum 在这里肯定是矫枉过正。此外，不要认为 Scrum 是灵丹妙药，如果无法在项目中实施它，就会感到被冷落。阅读 37signals 的 Getting Real 和其他一些关于保持精益的资源，你会发现与 1 或 2 人的跨学科团队合作实际上是一个非常高效的单元，如果所涉及的 1 或 2 人愿意并且有能力的话。

正如 Martin K. 所说：保持简单愚蠢。也就1、2个人而已，没必要有“项目管理”之类的。去掉废话，然后去做。

（这并不是说您不应该遵循预算、支出和衡量进度，但不要在不需要的基础设施上浪费时间和金钱）

# asp.net - 如何获取动态文本框的值

> ID：747046
> 
> 赞同：1
> 
> 时间：2009-04-14T10:43:39.880
> 
> 标签：asp.net

我在单击按钮时添加了一些动态文本框。我需要另一个按钮单击的单击事件中的值。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-14T10:57:57.707

首先，当您添加动态控件时，您必须在每次回发时添加它们。然后，只有当你有你添加的控件的 ID 时，你才能使用 Kirschstein 描述的 FindControl 方法找到它。

[编辑] Roshan，您必须在每次回发时动态添加控件（最好是在 Init 事件中）。为他们提供一个 ID。这将是您每次都可以访问它们的 ID。您可以将控件添加到任何容器控件（asp:Panel、具有 runat="server" 属性的 div 等）[/Edit]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T10:49:52.593

您是否尝试过使用`FindControl(string id)`ParentControl（例如面板）上的方法来查找它们？

```
protected void btnDoStuff_click(Object sender, EventArgs args)
{
   TextBox txtBox = (TextBox) pnlDynamicButtons.FindControl("txtBox1");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-14T10:46:06.317

您需要保存对这些文本框的引用，以便您可以在按钮单击句柄方法中访问它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-14T11:39:36.033

在添加动态控件时，您必须在每次回发期间添加它们，您可以在创建它们时保存对它们的引用，例如将 txtbox id 添加到 List 中。

您可以稍后使用该列表来获取动态创建的文本框并检索它们的值。

```
for (int i = 0; i < listTextBox.Count; i++)
{
     TextBox txt = ((TextBox)(listTextBox[i]));
} 
```

如果您需要在回发之前获取它们的值，则在创建它们时添加一个属性以将它们标记为动态创建

```
txtBox.Attributes.Add("isDynamic", "Y"); 
```

然后在回发之前，循环通过输入控件来获取它们。

```
var inputControls = document.getElementsByTagName("input");
for(var i=0 ; i<inputControls.length ; i++)
{
    if ( inputControls[i].getAttribute("isDynamic") == "Y" ) 
    {
       ...
    }
} 
```

# linux - Is it possible to install ASP on Linux Ubuntu Hardy?

> ID：747055
> 
> 赞同：1
> 
> 时间：2009-04-14T10:47:36.187
> 
> 标签：linux, asp-classic

I have recently purchased a VPS from Slicehost with Ubuntu Hardy installed. Is it possible to set up the server to work with ASP? I have no idea if this is possible, but if it is, does anyone have any good tutorials?

Thanks.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-14T12:46:54.827

答案是一个很大的“取决于”。

**你在谈论经典的 ASP 吗？**
Sun 有（拥有？）一款名为“SunOne ASP”的产品——尽管该产品多次更名，但除了 Sun 购买并重新命名的原始 ChiliSoft ASP 产品外，我无法说出它的真正含义。

无论如何，上述产品将允许您在 *nix 服务器上运行 ClassicASP/VBScript 代码，并且在大多数情况下运行良好。对某些事情有点大惊小怪，有些事情做得不太好，但如果你下定决心去做，你就可以让它发挥作用。说了这么多，我想我在某处读到该项目已停止。所以它可能不再可用。

还有一个 Apache:ASP 模块（根据我的经验），它只适用于考虑到它编写的代码。如果您尝试从 Windows 服务器移植应用程序，则它是“分担风险”选项之一。

**你在谈论 ASP.NET 吗？**
如果是这种情况，您就有更好的机会……前面提到的[Mono 项目](http://mono-project.com/)将是您最好的选择。自从我上次看它以来，它已经走了很长一段路，但由于不必设置任何东西，我真的无法说出它有多好/多坏。

**一切都是平等的……**
一切都是平等的，我真的想说，如果您要使用 MS 编程语言，请在 MS 服务器上运行它。它可能会花费一些额外的费用，但从长远来看，它可能会为您节省更多的麻烦。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-14T10:57:00.127

The [Mono Project](http://mono-project.com/) has some information on this topic. You can either run ASP with Mono under Apache or XSP, a dedicated (but rather limited HTTP server) for hosting ASP.Net on Linux.

You find the information in this [article](http://mono-project.com/ASP.NET).

EDIT: It seems this question is about classic ASP. Afaik there is no way to run this on Linux/Unix.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-14T12:51:25.377

AnonJr 是对的，如果您在进行 .Net 或 Microsoft 开发和部署，那么最好是在 Microsoft 平台上。如果你是一家初创公司，那么微软有一个程序 - “BizSpark” - [http://www.microsoft.com/bizspark/](http://www.microsoft.com/bizspark/) 只要你的初创公司少于一百万美元，你就可以免费获得 3 年的开发和部署许可证. 您可以从上面的链接获取更多详细信息

# asp.net - ASP.NET 双回发 - 总是很有趣的问题

> ID：747068
> 
> 赞同：1
> 
> 时间：2009-04-14T10:54:30.913
> 
> 标签：asp.net, postback

我知道双重回发的一般准则，但这一条让我**抓狂**。这是一个点击按钮。C＃。ASP.NET 2.0。当我在生产中单击它时，它会**间歇性地**发回两次。至少在我迄今为止尝试过的规模上无法从分期中复制。

据我所知，在开始执行此操作之前，代码没有改变，并且逻辑流程当然不会要求在随机时间双击点击代码。我开始深入研究网络跟踪（公平地说，有一些重复的确认和丢弃的段）并想知道是否应该对 Temporary ASP.NET 文件夹进行核对。

还注视着这个返回 true 的 jQuery 模态弹出窗口 .click(function() 调用。我的 Javascript 大脑背后的某些东西让我怀疑。

[这个有趣的错误](http://ddkonline.blogspot.com/2008/02/aspnet-double-postback-bug-strikes.html)与空白 img 源有关。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-14T11:06:55.113

我只看到当按钮单击调用手动调用 form.submit() 但没有正确取消单击事件的 javascript 时弹出此问题，因此它发布了两次。

我不确定，但我相信如果是这种情况，一个回发将包含 ButtonID=ButtonID 而一个则不会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-14T13:07:22.077

确保您也没有处理其他事件的偶数，例如页面加载、页面初始化

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-13T14:34:20.140

并确保您在处理表单标签上的 onsubmit 事件时不会以错误的方式导致双重回发。像：

```
function Loading() {
  $('*').css('cursor','wait'); // To change cursor while waiting for postback
  document.forms[0].submit();  // Cause postback (maybe 2nd time if already fired by Button).
}

<form id="form1" runat="server" onsubmit="Loading();"> 
```

# git - 如何 git-svn 从 Subversion 存储库克隆最后 n 个修订？

> ID：747075
> 
> 赞同：327
> 
> 时间：2009-04-14T10:58:07.287
> 
> 标签：git, svn, git-svn, git-clone, svn-checkout

**问题**

如何使用 git-svn 从 Subversion 存储库创建浅拷贝，例如，如何仅提取最后三个修订版？

如果您使用选项，该`git clone`命令可以从 Git 存储库中获取最后 n 个修订`--depth`，即您获得存储库的浅表副本。例子：

```
git clone --depth 3 git://some/repo myshallowcopyrepo 
```

git-svn 有类似的选项吗？

**到目前为止我的发现**

到目前为止，我只找到了要`-rN`在哪里`N`进行修订的选项。例子：

```
git svn clone -rN svn://some/repo 
```

根据文档，有可能使用`-r$REVNUMBER:HEAD`. 我尝试了以下方法来获取返回错误消息的最后 3 个修订。

```
$ git svn clone --prefix=svn/ -s -rHEAD~3:HEAD http://some/svn/repo .
revision argument: HEAD~3:HEAD not understood by git-svn 
```

所以我用`HEAD~3`第三个但最后一个修订的实际编号替换了 534。这有效，但这需要我首先找出第三个但最后一个提交的修订号。

```
$ git svn clone --prefix=svn/ -s -r534:HEAD http://some/svn/repo . 
```

**文档**

[git克隆](http://git-scm.com/docs/git-clone)

[git-svn](http://git-scm.com/docs/git-svn)

* * *

## 回答 #1

> 赞同：251
> 
> 时间：2009-04-14T19:39:03.493

您已经发现了在 Git-SVN 中指定浅层克隆的最简单方法，方法是指定要在 ( `-r$REV:HEAD`) 处开始克隆的 SVN 修订号。

例如：`git svn clone -s -r1450:HEAD some/svn/repo`

Git 的数据结构基于有向无环图 (DAG) 中的指针，这使得回溯`n`提交变得微不足道。但是在 SVN（因此在 Git-SVN）中，您必须自己找到修订号。

* * *

## 回答 #2

> 赞同：95
> 
> 时间：2010-02-27T19:17:32.553

我发现自己经常使用以下内容从我们巨大的颠覆树中获得有限数量的修订（我们很快就会达到 svn 修订版 35000）。

```
# checkout a specific revision
git svn clone -r N svn://some/repo/branch/some-branch
# enter it and get all commits since revision 'N'
cd some-branch
git svn rebase 
```

找出分支从哪里开始的一个好方法是执行`svn log`它并找到分支上的第一个（执行时列出的最后一个）：

```
svn log --stop-on-copy svn://some/repo/branch/some-branch 
```

到目前为止，我还没有真正发现跟踪所有分支机构的麻烦。克隆需要太多时间，并且 svn 和 git 不能像我想要的那样协同工作。我倾向于创建补丁文件并将它们应用到另一个 svn 分支的 git clone 上。

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2016-02-26T20:31:32.403

*... 7 年后，在沙漠中，风滚草吹过...*

我对接受的答案不满意，因此我[在 Github 上](https://github.com/jonathancone/svn-utils)创建了一些脚本来为您执行此操作。这些应该可以帮助任何想要使用`git svn clone`但不想克隆整个存储库并且不想在历史中间寻找要克隆的特定修订版的人（也许您正在克隆一堆存储库）。在这里，我们可以克隆最后 N 个修订：

**用于`git svn clone`克隆最近的 50 个修订**

```
# -u    The SVN URL to clone
# -l    The limit of revisions
# -o    The output directory

./git-svn-cloneback.sh -u https://server/project/trunk -l 50 -o myproj --authors-file=svn-authors.txt 
```

**从 SVN 存储库中查找前 N 个修订版**

```
# -u    The SVN URL to clone
# -l    The limit of revisions

./svn-lookback.sh -u https://server/project/trunk -l 5 
```

# html - 文字与图片对齐

> ID：747078
> 
> 赞同：0
> 
> 时间：2009-04-14T11:01:03.660
> 
> 标签：html, css

我的网页上有一张图片，我想在其中将文本包裹在其右侧，因此我有一些 CSS，例如：

```
.image {
  float:left
} 
```

但是在到达文本中的某个点后，我想确保文本不再出现在图像的右侧，我希望它位于图像下方。我可以使用什么标签将文本拆分为图像下方的新行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-14T11:05:31.683

将要显示在图像下方的文本包装在容器元素中，并[`clear: left`](http://www.w3.org/TR/CSS21/visuren.html#propdef-clear)应用样式。

CSS 规范的[Floats 部分](http://www.w3.org/TR/CSS21/visuren.html#floats)对此有更多详细信息，包括一个很好的示例来说明`clear`属性如何工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T11:06:34.567

将文本放在具有以下样式的 div 中

```
{ float:left; clear:left; } 
```

下一个对象将出现在下方和左侧。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-14T11:12:20.357

我相信您希望能够定义图像下方有多少可用空间。尝试调整`margin-bottom`图像：

```
 IMG  text text text
 IMG  text text text
         text text text
         text text text
 text text text text
 text text text text 
```

这样所有的文本都可以在同一个段落中。它会很好地环绕图像。

然后在文本之后放置一个带有样式的元素`clear:both;`以禁用换行（以防文本不够长）

# ajax - STOMP 和 JSON

> ID：747079
> 
> 赞同：2
> 
> 时间：2009-04-14T11:02:43.343
> 
> 标签：ajax, json, stomp

如果我有一个 STOMP/JSON AJAX 应用程序，这是否意味着 JSON 在 STOMP 之上运行？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-14T12:18:33.363

假设您指的是[STOMP](http://xircles.codehaus.org/projects/stomp)（协议），而不是[STOMP](http://www.shinywhitebox.com/stomp/stomp.html)（应用程序），那么 JSON 将是通过 STOMP 消息传递协议使用的数据编码方法。您将数据序列化为 JSON，然后将其打包到 STOMP 消息中以发送到连接的另一个端点。

# c# - 在 WebBrowser 对象中从 JS 访问链接

> ID：747080
> 
> 赞同：0
> 
> 时间：2009-04-14T11:03:20.020
> 
> 标签：c#, javascript

我需要在没有 API 的网站上自动化一些任务，并且使用大量 JavaScript，没有任何优雅的回退，所以是否可以使用 C# 解析通过 JS 添加到页面的内容，我假设这将使用 WebBrowser 对象来完成，但到目前为止我还没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-14T11:10:27.273

尝试[SWAT](http://sourceforge.net/projects/ulti-swat)或[WatiN](http://watin.sourceforge.net/)

两者都是用于自动化网站前端测试的单元测试框架，但可以很容易地用于根据需要遍历网站上的 DOM。

# .htaccess - 使用 htaccess 和 htpasswd 进行 Cakephp 密码保护 - howto？

> ID：747096
> 
> 赞同：7
> 
> 时间：2009-04-14T11:11:06.507
> 
> 标签：.htaccess, cakephp, passwords, password-protection, .htpasswd

在使用 Cakephp 中的 htaccess 开发期间，如何密码保护我的网站？

*   我必须更改哪个 htaccess 文件？
*   我必须在 htaccess 中写什么
*   我在哪里放.htpasswd？

我搜索了谷歌，但找不到任何有用的东西，希望你能帮助我！

* * *

谢谢，直到帮助我解决了问题！

对于 CakePHP 用户： - 修改 /app/webroot/ 中的 .htaccess - 在 .htaccess 文件的开头添加类似的内容：

```
AuthName "Restricted Area" 
AuthType Basic 
AuthUserFile /complete/path/to/.htpasswd
AuthGroupFile /dev/null 
require valid-user 
```

现在在 /app/webroot/ 中创建 .htpasswd-File 并将类似这样的内容放入：

```
admin:PASSWORD 
```

“密码”是您真实密码的转换版本，我使用此工具创建它：[http ://tools.dynamicdrive.com/password/](http://tools.dynamicdrive.com/password/)

我认为有更多的方法可以创建它，但对我来说它有效，也许这也有助于其他 cakephp 用户。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-14T11:33:29.667

您的文档根目录中可能有一个`.htaccess`，因此您可以添加到该文件中，因为它是第*一个*可以这么说的文件——如果您想保护整个网站。否则`.htaccess`，在您要保护的目录中添加一个文件。

然后，查看这个方法： [http ://httpd.apache.org/docs/2.2/howto/auth.html](http://httpd.apache.org/docs/2.2/howto/auth.html)

简而言之，这就是您添加的内容：

```
AuthType Basic
AuthName "dev"
AuthUserFile /complete/path/to/.htpasswd
Require valid-user 
```

添加用户的命令是：

```
htpasswd -c /complete/path/to/.htpasswd yourusername 
```

无论如何，请确保您阅读了上述方法！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-08-27T23:20:29.847

[http://snook.ca/archives/servers/password_protect_admin/](http://snook.ca/archives/servers/password_protect_admin/)

第一个链接包含有关在蛋糕应用程序中使用 .htaccess 安全性的信息。评论包括一个 >hackish< 解决方法，说明如何仅对管理员路由执行此操作。

# subsonic - SubSonic - 在 Select() 函数中指定 DataProvider

> ID：747097
> 
> 赞同：1
> 
> 时间：2009-04-14T11:11:46.240
> 
> 标签：subsonic

我在 subsonic Select 中指定 dataprovider，如下例所示：

```
SubSonic.Select(Databases.BLLDB).From(Of Country)().ExecuteTypedList(Of Country)() 
```

但我得到错误：无效的列名'BLLDB'

（它似乎将数据提供者视为列字符串）。

这是指定数据提供者的正确语法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-14T17:45:36.777

这会更好，但有更简单的方法来做同样的事情：

```
[Test]
public void Exec_SOTest()
{

    var test = new Select(DataService.GetInstance(Databases.Northwind))
        .From("Products")
        .ExecuteTypedList<Product>();

    Assert.IsTrue(test.Count == 77);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-14T18:54:43.490

不幸的是，字符串用于带有选择的列。我们应该有一个返回提供程序的结构 - 但如果您使用存储库位，您可以从您需要的存储库中请求 select 语句。

除此之外 - 保罗在这里有一个好主意。

# php - 将图片调整大小/裁剪/填充到固定大小

> ID：747101
> 
> 赞同：8
> 
> 时间：2009-04-14T11:15:07.917
> 
> 标签：php, resize, crop

我需要将图片大小调整为固定大小。但它必须保持宽度和高度之间的因素。

假设我想将图片大小`238 (w) X 182 (h)`从`210 / 150`

我现在要做的是：

```
Original width / target width = 1.333333
Original Height / target Height = 1.213333 
```

现在我取最小的因素。

现在我总是有正确的宽度，因为`238 / 1.333333 = 210`。但身高还在`160`。

如何在`160`不破坏图片的情况下降低高度？

我需要种植吗？如果有怎么办？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-04-14T12:21:19.037

这个解决方案与 Can Berk Güder 的解决方案基本相同，但是在花了一些时间编写和评论之后，我想发帖。

此函数创建一个与您提供的大小完全相同的缩略图。调整图像大小以最适合缩略图的大小。如果它不完全适合两个方向，则它在缩略图中居中。广泛的评论解释了事情的经过。

```
function thumbnail_box($img, $box_w, $box_h) {
    //create the image, of the required size
    $new = imagecreatetruecolor($box_w, $box_h);
    if($new === false) {
        //creation failed -- probably not enough memory
        return null;
    }

    //Fill the image with a light grey color
    //(this will be visible in the padding around the image,
    //if the aspect ratios of the image and the thumbnail do not match)
    //Replace this with any color you want, or comment it out for black.
    //I used grey for testing =)
    $fill = imagecolorallocate($new, 200, 200, 205);
    imagefill($new, 0, 0, $fill);

    //compute resize ratio
    $hratio = $box_h / imagesy($img);
    $wratio = $box_w / imagesx($img);
    $ratio = min($hratio, $wratio);

    //if the source is smaller than the thumbnail size, 
    //don't resize -- add a margin instead
    //(that is, dont magnify images)
    if($ratio > 1.0)
        $ratio = 1.0;

    //compute sizes
    $sy = floor(imagesy($img) * $ratio);
    $sx = floor(imagesx($img) * $ratio);

    //compute margins
    //Using these margins centers the image in the thumbnail.
    //If you always want the image to the top left, 
    //set both of these to 0
    $m_y = floor(($box_h - $sy) / 2);
    $m_x = floor(($box_w - $sx) / 2);

    //Copy the image data, and resample
    //
    //If you want a fast and ugly thumbnail,
    //replace imagecopyresampled with imagecopyresized
    if(!imagecopyresampled($new, $img,
        $m_x, $m_y, //dest x, y (margins)
        0, 0, //src x, y (0,0 means top left)
        $sx, $sy,//dest w, h (resample to this size (computed above)
        imagesx($img), imagesy($img)) //src w, h (the full size of the original)
    ) {
        //copy failed
        imagedestroy($new);
        return null;
    }
    //copy successful
    return $new;
} 
```

示例用法：

```
$i = imagecreatefromjpeg("img.jpg");
$thumb = thumbnail_box($i, 210, 150);
imagedestroy($i);

if(is_null($thumb)) {
    /* image creation or copying failed */
    header('HTTP/1.1 500 Internal Server Error');
    exit();
}
header('Content-Type: image/jpeg');
imagejpeg($thumb); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-04-14T11:35:01.800

这不会裁剪图片，但会在必要时在新图像周围留出空间，我认为在创建缩略图时这是一种更好的方法（比裁剪）。

```
$w = 210;
$h = 150;

$orig_w = imagesx($original);
$orig_h = imagesy($original);

$w_ratio = $orig_w / $w;
$h_ratio = $orig_h / $h;

$ratio = $w_ratio > $h_ratio ? $w_ratio : $h_ratio;

$dst_w = $orig_w / $ratio;
$dst_h = $orig_h / $ratio;
$dst_x = ($w - $dst_w) / 2;
$dst_y = ($h - $dst_h) / 2;

$thumbnail = imagecreatetruecolor($w, $h);

imagecopyresampled($thumbnail, $original, $dst_x, $dst_y,
                   0, 0, $dst_w, $dst_h, $orig_w, $orig_h); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-14T11:22:54.293

你有[想象](http://is.php.net/manual/en/imagick.installation.php)吗？如果是这样，您可以使用它加载图像并执行类似的操作[`thumbnailimage()`](http://is.php.net/manual/en/function.imagick-thumbnailimage.php)

在那里你可以跳过任何一个参数（高度或宽度），它会正确调整大小。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-14T11:27:38.493

也许看看[PHPThumb](http://phpthumb.sourceforge.net/)（它适用于 GD 和 ImageMagick）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-14T14:20:54.227

从大图像快速生成高质量缩略图的提示：（[来自 php.net 站点](http://us.php.net/manual/en/function.imagecopyresampled.php#77679)）

如果您分**两个**阶段生成缩略图：

1.  使用快速调整大小从原始图像到最终尺寸两倍的中间图像
2.  使用高质量重采样从中间图像到最终缩略图

那么这可以更快；步骤 1 中的调整大小质量相对较差，但具有足够的额外分辨率，因此在步骤 2 中质量不错，中间图像足够小，可以进行高质量的重新采样（在 2:1 调整大小时效果很好）进展非常快。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-14T11:36:35.260

我宁愿调整大小以使图像包含在您的限制范围内，然后填写空白部分。因此，在上面的示例中，您将调整大小以使高度正常，然后用背景颜色向左右填充（我认为每端 7 个像素）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-14T11:38:03.243

从 PHP 来源的网页中调整图像大小可能会出现问题。较大的图像（磁盘上接近 2+MB）可能非常大，以至于它们需要超过 32MB 的内存来处理。

出于这个原因，我倾向于从基于 CLI 的脚本（最多可使用 128MB 内存）或标准命令行（也可以根据需要使用）来执行此操作。

```
# where to put the original file/image. It gets resized back 
# it was originally found (current directory)
SAFE=/home/website/PHOTOS/originals
# no more than 640x640 when finished, and always proportional
MAXSIZE=640
# the larger image is in /home/website/PHOTOS/, moved to .../originals
# and the resized image back to the parent dir.
cd $SAFE/.. && mv "$1" "$SAFE/$1" && \
   convert "$SAFE/$1" -resize $MAXSIZE\x$MAXSIZE\> "$1" 
```

'convert' 是 ImageMagick 命令行工具的一部分。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-14T11:56:31.110

这些是缩略图吗？如果是的话，种植就不是什么大问题了。我们一直这样做。我什至不回避将任意比例裁剪成残缺的二次缩略图，完全弄乱图像（是的，我就是*那个铁杆*），如果它看起来不错的话。这是设计师对技术问题的回答，但仍然如此。不要害怕庄稼！

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-04-14T12:17:55.910

我觉得有点混乱。。如果只想调整大小，保持原来的比例，正确的操作是：

```
$ratio = $originalWidth / $originalHeight;
if(//you start from the width, and want to find the height){
 $newWidth = $x;
 $newHeight = $x / $ratio;
}else if(//you start from the height, and want to find the width){
 $newHeight = $x;
 $newWidth = $x * $ratio;
} 
```

否则，如果前缀 newWidth 和 newHeight 无法更改，并且拇指比例与原始比例不同，则唯一的方法是对拇指进行裁剪或添加边框。

如果你要采取削减的方式，这个功能可以帮助你（我几年前在 5 分钟内写过，可能需要一些改进.. 它只适用于 jpg，例如；）：

```
 function thumb_cut($nomeimage, $source_path, $destination_path, $new_width, $new_height){
      list($width, $height, $type, $attr) = getimagesize($source_path.$nomeimage);
      if($type == 2){
        if($width > $new_width){
          $new_width = $width;
          $new_height = $height;
        }
        $compression = 100;
        $destimg = imagecreatetruecolor($new_width,$new_height) or die("Problems creating the image");
        $srcimg = ImageCreateFromJPEG($source_path.$nomeimage) or die("problem opening the image");
        $w = ImageSX($srcimg);
        $h = ImageSY($srcimg);
        $ro = $new_width/$new_height;
        $ri = $w/$h;
        if($ro<$ri){
          $par = "h";
        }else{
          $par = "w";
        }
        if($par == "h"){
          $ih = $h;
          $conv = $new_width/$new_height;
          $iw = $conv*$ih;
          $cw = ($w/2)-($iw/2);
          $ch = ($h/2)-($ih/2);
        }else if($par == "w"){
          $iw = $w;
          $conv = $new_height/$new_width;
          $ih = $conv*$iw;
          $cw = ($w/2)-($iw/2);
          $ch = ($h/2)-($ih/2);
        }
        ImageCopyResampled($destimg,$srcimg,0,0,$cw,$ch,$new_width,$new_height,$iw,$ih) or die("problems with resize");
        ImageJPEG($destimg,$destination_path.$nomeimage,$compression) or die("problems with storing new image");
      }
    } 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-04-18T04:18:35.323

该技术是：

1.  调整图像大小，使一个尺寸匹配，而另一个尺寸超过所需尺寸
2.  从调整大小的图像中心取出所需大小的图像。

最后，如果您对如何进行调整大小数学感到困惑，请记住，如果源图像和目标图像的比例相同，则此关系成立：

```
SourceWidth / SourceHeight = DestinationWidth / DestinationHeight 
```

如果你知道三个参数，你可以很容易地计算出第四个参数。

我写了一篇关于这个的文章：
[Crop-To-Fit an Image Using ASP/PHP](http://salman-w.blogspot.com/2009/04/crop-to-fit-image-using-aspphp.html)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-04-14T11:30:56.350

您必须从顶部和底部裁剪 5 px 才能达到您的目标尺寸，但这可能会破坏图片。

真的你应该有一个目标宽度或高度，然后以相同的比例调整其他尺寸。

# php - 像 PHP 的 Crystal Reports 之类的东西？

> ID：747103
> 
> 赞同：31
> 
> 时间：2009-04-14T11:16:44.870
> 
> 标签：php, report, invoice

我正在寻找可以在 PHP 中使用并且类似于水晶报表的东西。我基本上需要一个布局设置，这意味着我可以通过插入数据来输出发票，然后将其发送到打印机。

到目前为止我发现的最接近的是 PDFB，但它有点痛苦，因为它需要精确定位。

我想要一些可以基于模板（最好是基于 XML）生成发票的东西，然后将其输出到易于我们打印的表单（PostScript 会很好！）

它也需要支持条形码（尽管这些可以生成为 GD 图像）

另一个要求是这必须是 FLOSS

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-14T14:11:19.850

通过[PHP-JavaBridge](http://php-java-bridge.sourceforge.net/pjb/)将 XML + XSL:FO 与[Apache FOP](http://xmlgraphics.apache.org/fop/)一起使用。

方法如下：[http ://wiki.apache.org/xmlgraphics-fop/HowTo/PHPJavaBridge](http://wiki.apache.org/xmlgraphics-fop/HowTo/PHPJavaBridge)

> PostScript会很好！

许多 PostScript 打印机也能理解 PDF。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-06-04T11:09:23.303

我`Spreadsheet_Excel_Writer`在PHP中使用过，它已经足够好了。不是所见即所得，但它确实会生成 XSL 文件，我对此很满意。之后，您可以[使用 OpenOffice 宏](http://www.oooforum.org/forum/viewtopic.phtml?t=3772)将文档转换为 PDF。它适用于命令行，ergo，它也适用于 PHP 脚本。

或者这里有一个更好的方法。

使用 OpenOffice 转换 Smarty 模板。Smarty 是一个很酷的 PHP 模板引擎，我为此推荐它。然后使用 PHP 和 Smarty 生成纯 HTML。最后，只需使用上述方法将生成的 HTML 转换为 PDF。

报告革命（tm）。

**编辑 2009 年 6 月 6 日修改** 了？啊没关系。

无论如何，这种方法可以在没有运行 X11 的无头服务器上工作。我已经从[提到的链接](http://www.oooforum.org/forum/viewtopic.phtml?t=3772)中获取了脚本（除了我把它放在预先存在的集合“标准”而不是“DannysLibrary”中），然后我使用 PuTTY 从 Windows 机器运行了这个命令，并且 X 在远程机器上被关闭，并且没有设置 DISPLAY 变量，并且......好吧，无论如何，OOo 无法找到要连接的 X11。

```
$ openoffice.org -invisible -headless "macro:///Standard.Conversion.ConvertWordToPDF(`pwd`/logaritamska.doc)" 
```

这很有效，我相信这对于需要从另一种格式转换为 PDF（包括从 HTML 生成可打印报告）的任何人来说都非常有用。通过编辑宏，您甚至可以让 OOo 直接从标准输入或临时服务 URL 读取，并输出到预定义的文件中。[一旦你有基本的代码来扩展，链接](http://www.oooforum.org/forum/viewtopic.phtml?t=3772)上的脚本就很简单了。

概括：

*   以 XLS 或 HTML 格式生成报告
*   转换它们
*   即使它是 OOo，它也适用于无头机器

**编辑 2009 年 6 月 9 日** 我试图以这种方式实现在线转换器。您应该让 PHP 在您创建宏的同一用户下运行。该用户显然不能是 www-data。我尝试使用 suphp，但由于某种原因，它没有正确更改用户（`posix_getuid()`一直返回 33，即 www-data）。修复此问题后，我将对其进行编辑。

**编辑 2009 年 6 月 26 日** 猜猜我花了一段时间来报告。是的，这适用于 suphp。然而，我无法现场展示它，因为我拥有的唯一服务器运行的是一个相对关键的网络应用程序，它没有专业的安全审计。这意味着我们保护后端所依赖的一件事是运行前端的用户是一个非常非常没有特权的用户（例如 www-data）。不要问:-)

希望这对某人有所帮助：是的，使用 OO.o 转换为 PDF 非常现实。OO.o 中甚至还有一些远程调用支持，但我并不是为了写这篇文章而研究它的。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-06-07T03:47:35.320

我在php中使用了eclpse：“BIRT Project”

[http://www.eclipse.org/birt/phoenix/](http://www.eclipse.org/birt/phoenix/)

您在 Eclipse 中设计您的报告。然后上传到你的服务器（它必须运行tomcat）我知道。然后您可以从您的 php 应用程序调用该报告，您可以通过查询字符串将参数发送到报告：

/myreport.birt?param=var¶m2=var2

到目前为止，我们有一个像这样工作的 4 年应用程序。大约有 100 份报告，而且效果非常好。

当然它是开源的。

祝你好运

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-04-14T12:12:59.650

如果您有服务器访问权限，您可能还想通过[Apache FOP使用](http://xmlgraphics.apache.org/fop/)[XSL 格式化对象](http://www.w3schools.com/xslfo/xslfo_intro.asp)。XSL-FO 基于 XML，支持多种[输出格式](http://xmlgraphics.apache.org/fop/0.95/output.html)，包括 PostScript 和 PDF

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-03-31T08:21:58.593

[报道](http://www.reportico.org/site/index.php)

在我看来，它是最好的、详细且功能丰富的 PHP 报表设计器之一。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-05-09T15:09:15.380

如果您设法在您的 php 环境中调用 Java 应用程序（这通常应该是可能的）[JasperReports](http://jasperreports.sourceforge.net/)可能是您正在寻找的东西：

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-14T12:03:16.663

嗯..我在当前的项目中遇到了同样的问题，我最终使用水晶报告并使用用 c# 编写的 asp.net Web 服务调用报告。Web 服务并不复杂，您仍然可以使用水晶报表的所有功能。我不认为你会找到任何完全基于 php 的报表引擎，可以与水晶报表相提并论......我还没有找到一个......

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-08T17:57:41.500

大约一年前我遇到了同样的问题。在搜索了一个现有的解决方案后，我没有找到，所以我使用 Zend Framework 的 PDF 生成库编写了一个精简的水晶报告。我不得不大量调整他们的库以支持分组对象、重复部分和模板。它工作，但它真的很笨重，如果我不得不再做一次，我会找到一种方法将 php 连接到水晶报告，或者通过像 Gushiken 说的 Web 服务，或者通过调用命令行应用程序。CPAN 有一个到 CR 的 Perl 接口：[Win32::OLE::CrystalRuntime::Application](http://search.cpan.org/~mrdvt/Win32-OLE-CrystalRuntime-Application-0.08/lib/Win32/OLE/CrystalRuntime/Application.pm)。

如果 PHP 解决方案在过去一年中发布，我怀疑它是否足够成熟，可以与 CR 相提并论。时间很昂贵。软件不行。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-10-31T03:55:02.617

XSL-FO 是满足这一需求的合适工具，因为它非常适合可打印介质。XSL-FO 也是一个 W3C 推荐，带有 XSLT。我制作了一个使用 XSL-FO 作为报告中间语言的 php 工具，这个 XLS-FO 是将报告 XSLT 模板与您的 XML 数据合并（处理）的结果。

您可以使用 MS Word 自动创建模板，并按照用户手册中的说明导出。然后，您向报告引擎提供模板，并在运行时提供数据 XML。

同样在运行时，生成的 XSL-FO 报告呈现为：

a) 相同的 XSL-FO（如果您想调试或只想要 XSL-FO）

b) 完美的 PDF，（ApacheFOP 呈现 XSL-FO）

c) 带有 XSLFO2HTML 转换的 HTML。

这里有项目，它是一个 symfony 1.4 插件： [https ://github.com/juanmf/sfPlugins/tree/master/reportPlugin](https://github.com/juanmf/sfPlugins/tree/master/reportPlugin)

我打算将它与 sf. 不要犹豫，问什么。这是操作方法： [https ://github.com/juanmf/sfPlugins/blob/master/reportPlugin/doc/HowToReport.pdf?raw=true](https://github.com/juanmf/sfPlugins/blob/master/reportPlugin/doc/HowToReport.pdf?raw=true)

这篇文章也可能会给你一些帮助： [https ://stackoverflow.com/questions/5519024/report-engine-solution-for-lamp-application/13042656](https://stackoverflow.com/questions/5519024/report-engine-solution-for-lamp-application/13042656)

问候！

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2010-03-23T06:07:55.923

试试[凝脂](http://www.tufat.com/s_pdf_reports_mysql.htm)

我只是碰巧看到..也许它会帮助你。但是有一个免费版本可供您测试。

你会喜欢的。请分享你的副本。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2011-05-01T15:21:49.643

我使用过[phpreports](http://phpreports.sourceforge.net/)，我必须承认它对于基于 Web 的报告来说还不错，因为它支持页眉、页脚、组、小计等。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2009-06-05T19:33:54.363

看看[siwapp.org](http://www.siwapp.org/)，它是基于 Symphony 框架的开源发票应用程序，它处于早期测试阶段，但非常有前途。

# java - 条件查询中的数学运算符

> ID：747109
> 
> 赞同：4
> 
> 时间：2009-04-14T11:19:39.310
> 
> 标签：java, hibernate, criteria

给定映射的休眠类：

```
@Entity
public class MyTestClass {
  /* id and stuff */

  private Integer aValue;
  private Integer bValue;
} 
```

您可以使用 HQL 执行以下操作：

```
Query query 
  = getCurrentSession().createQuery("select aValue * bValue from MyTestClass");
List<Double> resultList = query.list; 
```

并得出计算结果。

是否可以使用 Criteria API 做类似的事情？我还没有找到一种通过 Criteria API 使用数学运算的方法。我们有 sum、avg 等聚合函数，但没有基本的数学运算符？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-14T20:04:10.470

您可以在您的类中创建一个新属性，即此计算值。只需为该属性指定公式属性。然后，您可以将此属性包含在您的标准中。

```
<property name="product" formula="aValue*bValue" /> 
```

公式（可选）：定义计算属性值的 SQL 表达式。计算属性没有自己的列映射。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T11:30:22.840

你总是可以将它添加为 sql 我认为有一些 sqlProjection/sqlRestriction 方法

# php - Symfony：管理 URL 的选项

> ID：747111
> 
> 赞同：0
> 
> 时间：2009-04-14T11:20:19.447
> 
> 标签：php, symfony1

在开发模式下，我的 symfony admin/backend 应用程序可以通过[http://localhost/backend_dev.php](http://localhost/backend_dev.php)访问。对于生产模式，我创建了一个控制器 php 文件 admin.php，因此现在在生产中可以通过[http://www.domain.com/admin.php](http://www.domain.com/admin.php)访问管理应用程序。

**我需要做什么才能允许在 domain.com/admin 或 admin.domain.com 上访问管理应用程序？**

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-09-16T12:42:32.547

您可以在该子域 (admin.domain.com) 上打开新的子域，并使用您的 symfony 应用程序设置指向服务器的虚拟主机。

您可以查看完整的教程 [这里][1]。

[1]：[http](http://blog.mirthlab.com/2008/03/04/dynamically-loading-symfony-applications-via-subdomains/) ://blog.mirthlab.com/2008/03/04/dynamically-loading-symfony-applications-via-subdomains/这里

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-11T03:11:01.090

您可能最好将所有像管理员一样的东西放在 admin 目录中，但是您可以使用 mod_rewrite 作弊

```
RewriteRule ^admin/?$ admin.php [L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-14T11:30:01.407

以下是您可以做到的一些基本方法：

**将admin.php**转储到 www.domain.com 根目录中名为“ **admin** ”的文件夹中，并将**admin.php**重命名为**index.php**。（最简单的解决方案）

当然，这样你必须将 admin.php 中的所有相对链接调整为上一级（在所有*相对*url 的开头附加 '../' 应该有效），以及所有绝对链接以反映更改。

关于您的 admin.domain.com，您应该联系您的网络主机/域名提供商为您设置子域。

* * *

或者，如果您的虚拟主机允许 .htaccess 文件，您可以编写一个 mod_rewrite 规则。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-29T23:20:32.323

我将创建一个名为 admin 的模块...然后大概是索引操作，我会将您拥有的任何内容放入您的 admin.php 文件中。

然后在您的 routing.yml 文件中，只需将 yourdomain.com/admin 指向 admin/index....这样您就可以将所有内容保存在 symfony 前端控制器中

安德鲁

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-06-17T09:16:11.593

确保您的 DNS 正确解析 admin.domain.com，然后在 /web 中编辑 .htaccess 以让 mod_rewrite 获取您的子域并将请求重写到 admin.php。可以选择将您的 admin.php 重命名为不太明显的名称，或者也可以在其中进行快速子域检查，或者如果有人点击 domain.com/admin.php，则使用 301 重定向扩展重写。

以下简单的 .htaccess 对我有用：

```
Options +FollowSymLinks +ExecCGI

<IfModule mod_rewrite.c>
  RewriteEngine On

  # The admin subdomain returns the backend
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{HTTP_HOST} ^admin\.domain\..*
  RewriteRule ^(.*)$ admin.php [QSA,L]

  # Check if the .html version is here (caching)
  RewriteRule ^$ index.html [QSA]
  RewriteRule ^([^.]+)$ $1.html [QSA]
  RewriteCond %{REQUEST_FILENAME} !-f

  # No?, so we redirect to our front web controller
  RewriteRule ^(.*)$ index.php [QSA,L]
</IfModule> 
```

更改`domain`为您自己的域。

# wix - MSI 按需安装最佳实践？

> ID：747118
> 
> 赞同：1
> 
> 时间：2009-04-14T11:22:43.843
> 
> 标签：wix, windows-installer, wix3

我正在为我们的产品开发一项新功能，其中的一个组件具有一些相当重要的安全隐患：它作为 WCF 服务运行，并执行一些高特权操作。因此，我希望该组件仅在用户需要时安装（并在不再需要时删除），并以编程方式完成安装。

我研究了[广告](http://msdn.microsoft.com/en-us/library/aa367548(VS.85).aspx "广告（视窗）")（特别是指定安装），它似乎是实现这一目标的好机制。 [但是，我不确定广告功能的安装是否可以撤消](https://stackoverflow.com/questions/721322/how-to-revert-an-installed-feature-to-be-advertised "如何恢复要宣传的已安装功能？")，这对于在不再需要组件时删除组件很有用。我也不完全确定是否可以通过广告实现程序化安装：[广告的 COM 类似乎不鼓励](http://robmensching.com/blog/posts/2007/3/12/RobMens-Recommendation-Do-not-advertise-COM-information-in-MSI "不要在 MSI 中公布 COM 信息")。

因此，我想知道，如果简单地调用 msiexec 来安装/删除组件会更明智。该组件可以打包在单独的 MSI 中，或者作为我们主 MSI 的单独功能。

您使用了哪些技术来按需安装功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2011-08-30T09:45:46.987

我通过预先安装所有必要的点点滴滴，然后根据需要启动/禁用 WCF 服务来解决这个问题。

# nhibernate - 具有复杂数据库表的休眠实体

> ID：747141
> 
> 赞同：0
> 
> 时间：2009-04-14T11:33:05.470
> 
> 标签：nhibernate

[替代文字 http://img18.imageshack.us/img18/5668/dbdiagram.jpg](http://img18.imageshack.us/img18/5668/dbdiagram.jpg)

嗨，我遇到了一个问题，如顶部所示。与 oracle 一起使用的 Db 设计如下所示。我想为将通过此 db 图生成的实体开发 CRUD 进程。我必须使用 nhiberante 和 hql 查询。在图中关系在关系表上是成功的（单元属性关系在单元属性表上是成功的，例如）那么如何在这个图表复杂性上完成 nhibarene 实体和 CRUD 操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-14T14:44:44.417

该图并没有什么过于复杂的地方，所以我假设您是 NHibernate 的新手。在这种情况下，我建议阅读[快速入门指南和](http://www.hibernate.org/362.html)[此处](http://www.hibernate.org/365.html)的任何教程。

基本过程是创建代表数据库表的 .NET 类并创建映射文件，以便 NHibernate 了解它们。NHibernate 将负责在您的类和数据库之间创建连接，以便您可以运行 HQL 查询来检索对象。在您的代码中修改/创建对象，然后使用`ISession.Save()`. 要记住的是（通常）*您*没有进行 CRUD 操作，NHibernate 是。

*   创建：新的 MyObject(); 其次是 session.Save()
*   更新：MyObject.change(); 其次是 session.Save()
*   删除： session.Delete(MyObject);

# apache - 为表单数据编写 mod_rewrite

> ID：747145
> 
> 赞同：0
> 
> 时间：2009-04-14T11:34:14.407
> 
> 标签：apache, mod-rewrite, get

我正在尝试使用表单中的 GET 数据重写 url。这在提交仅包含英文字母的字符串时效果很好。但是当我提交挪威语字符（这是一个挪威语页面）时，只显示未重写的 url。我的`mod_rewrite`句子是这样的：

```
RewriteCond %{REQUEST_URI} /resultpage.php$
RewriteCond %{QUERY_STRING} ^querystring=([a-zæøåäëöA-ZÆØÅÄËÖ0-9-\+]+)$
RewriteRule ^(.*)$ /sok/%1? [R=301,L]
RewriteRule ^sok/(.*)$ /resultpage.php?querystring=$1&a=1 [L] 
```

我在 url 中使用挪威字符，而不是从表单中发布，这很好用。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-14T12:16:06.677

挪威语字符很可能是 URL 编码的。

我无法从文档中看到 mod rewrite 将如何处理这些。

猜测

```
RewriteCond %{QUERY_STRING} ^querystring=([a-zA-Z0-9-+%]+)$ 
```

可能会起作用，因为它会拾取 url 编码的扩展字符，但它会允许任何字符，而不仅仅是你想要的集合。你总是可以在应用层解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T12:41:08.427

我会`[^&]`改用：

```
RewriteCond %{REQUEST_URI} ^/resultpage\.php$
RewriteCond %{QUERY_STRING} ^querystring=([^&]+)$
RewriteRule ^resultpage\.php$ /sok/%1? [R=301,L] 
```

你仍然可以简化它：

```
RewriteCond %{THE_REQUEST} ^[A-Z]+\ /resultpage\.php\?querystring=([^&\s]+)\s
RewriteRule ^resultpage\.php$ /sok/%1? [R=301,L] 
```

使用此解决方案，您甚至可以离开`a=1`第二个标志`RewriteRule`。

# php - 在 Visual Studio 中使用 php webservice

> ID：747146
> 
> 赞同：0
> 
> 时间：2009-04-14T11:34:15.420
> 
> 标签：php, visual-studio, web-services

是否可以在 Visual Studio 中使用 php webservice？我有一个带有由 nusoap 创建的 wsdl 文件的 Web 服务，当我尝试在 Visual Studio 中添加 Web 引用时，会显示服务名称和方法，但它抱怨“wsdl 不是已知的文档类型”和发现找不到文档。

任何建议，将不胜感激。

谢谢，理查德

对建议的回应：

*   好吧，目前没有 asmx 文件，因为 .net 应用程序正在使用 php webservice 的功能，而不是相反。也许nusoap可以创建一个asmx？我认为这只是针对.net 方面的。

*   我正在尝试使用 nusoap，因为它会自动为您创建 wsdl，但是我确实首先使用我自己的 wsdl 文件尝试了 php 的内置肥皂处理，但得到了与使用 nusoap 相同的错误。

*   似乎最终的问题实际上是我的网络服务器，我的文件以 utf8 编码并且它不喜欢那样。不过感谢您的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-17T23:35:48.403

我使用[此处](http://www.sanity-free.org/125/php_webservices_and_csharp_dotnet_soap_clients.html)找到的代码模式。这个对我有用。您是否还通过浏览服务的 url 检查了 wsdl？可能是您的服务正在生成无效的 .wsdl 文件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-04-17T19:39:06.977

这是我发现将 nuSoap 与 WCF 一起使用的内容。[http://offroadcoder.com/2008/03/23/CallingYourNusoapPHPWebServiceFromWCF.aspx](http://offroadcoder.com/2008/03/23/CallingYourNusoapPHPWebServiceFromWCF.aspx)

# c# - 找不到程序集

> ID：747149
> 
> 赞同：4
> 
> 时间：2009-04-14T11:35:24.357
> 
> 标签：c#, .net, serialization, arraylist

我正在将 ArrayList 序列化为二进制文件，以便通过 TCP/IP 发送它。序列化文件是由服务器创建的，我希望能够使用我目前正在编写的客户端对其进行反序列化。

但是，当客户端尝试反序列化时，它会抛出 SerializationException，因为它找不到序列化文件开始的程序集（大概）。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-14T11:38:04.100

您的arraylist 是否包含自定义数据类型（即您自己的类）？

除非运行反序列化的代码可以访问 arraylist 中包含的所有类，否则 arraylist 不会被反序列化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T11:39:05.597

如果您使用二进制序列化，客户端将需要有权访问包含您在 ArrayList 中序列化的类型的 DLL。我想我真的不知道您的设置来描述应该如何完成，但这就是它的要点。

如果您使用 xml 序列化之类的东西（使用 XmlSerializaer 或 DataContractSerializer），您将能够生成 Xml。如果您确实无法共享程序集，您可以在服务器/客户端复制目标代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-14T11:40:18.793

您要发送的数据是什么？你是如何序列化它的？如果您使用`BinaryFormatter`，则声明任何自定义类型的程序集必须位于两端。

请注意，`BinaryFormatter`跨系统（包括同一系统的不同版本之间）的序列化存在一系列问题。您可能想查看其他序列化程序，例如`DataContractSerializer`或[protobuf-net](http://code.google.com/p/protobuf-net/)（用于高效的跨平台二进制传输）。

# wpf - 访问 WPF GroupItem 文本以在模板中进行转换

> ID：747150
> 
> 赞同：0
> 
> 时间：2009-04-14T11:35:46.260
> 
> 标签：wpf, listbox, templates, grouping

我正在自定义分组的外观`ListBox`。在`ListBox.Resources`中，我声明了类似（删除格式）：

```
<Style TargetType="{x:Type GroupItem}">
  <Setter Property="Template">
    <Setter.Value>
      <ControlTemplate TargetType="{x:Type GroupItem}">
        <StackPanel Orientation="Vertical">
          <!-- Group label -->
          <ContentPresenter />
          <!-- Items in group -->
          <ItemsPresenter />
        </StackPanel>
      </ControlTemplate>
    </Setter.Value>
  </Setter>
</Style> 
```

实际的组标签不是很易读，我想使用一个值转换器来使它更美观。但是我找不到获取此文本并对其进行转换的方法。

我认为 a`Binding`会让我使用转换器。

我试过用`ContentPresenter`......替换上面的东西

```
<TextBlock Text="{TemplateBinding Content}"/>

<TextBlock Text="{Binding}"/> 
```

...以及许多其他事情，但无济于事。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-14T11:44:14.460

那么这不仅仅是典型的。我在发布后不久就找到了答案......

```
<TextBlock Text="{Binding Path=Content.Name,
  RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=GroupItem},
  Converter={StaticResource MyConverter}}"/> 
```

有时只是实际*提出*问题的过程会凭空得出答案。在这种情况下，查看*.NET Reflector*`GroupItem`的源代码就可以了。

 *希望其他人发现这个边缘案例有用。`GroupItem`不过，如果直接为此暴露一个属性会更好。

我仍然会为任何知道更好的方法的人提供正确的答案。

# video - 我可以使用 FCKeditor 嵌入视频吗？

> ID：747154
> 
> 赞同：0
> 
> 时间：2009-04-14T11:37:35.147
> 
> 标签：video, fckeditor

我需要使用 FCKeditor 创建一个 Wiki，我希望在其中提供用户嵌入视频的灵活性。FCKeditor 是否支持视频嵌入？如果没有，是否有任何可用于 FCKeditor 的插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-14T20:16:38.317

I did something like that at my forums: [How to insert a video](http://www.mrfixitonline.com/viewtopic.php?t=3658). Here's the code of the plugin: [fck_postvideo.html](http://www.mrfixitonline.com/source.php?file=fckeditor/editor/plugins/postvideo/fck_postvideo.html) and [fckplugin.js](http://www.mrfixitonline.com/source.php?file=fckeditor/editor/plugins/postvideo/fckplugin.js).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T11:44:34.880

我相信确实如此。不幸的是，我今天不在工作，所以我不能轻易地仔细检查，但是从 2008 年开始，FCKeditor 论坛上有[这个](http://www.fckeditor.net/forums/viewtopic.php?f=5&t=9719)和[这个](http://www.fckeditor.net/forums/viewtopic.php?f=6&t=9889)。这些有帮助吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-14T11:41:19.133

您可以创建一个插件，简单地添加一个作为播放器的 Flash 对象（默认支持）并将其配置为播放一些视频。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-08-30T10:33:51.337

好吧，除非您使用 HTML5，否则我假设您将使用 Flash 来显示视频。FCKEditor 有一个用于嵌入 Flash 电影的内置对话框。

查看演示[http://www.fckeditor.net/demo](http://www.fckeditor.net/demo)并查找位于第二行右侧第 6 个图标的 Flash 控件。

# database - 像这样的网站的数据库架构？

> ID：747159
> 
> 赞同：2
> 
> 时间：2009-04-14T11:38:32.993
> 
> 标签：database, schema

自从我参加了数据库设计和 SQL 的基础本科课程以来，我还没有真正接触过这样的东西。
所以我的问题是 - 像这样的网站的数据库模式通常会是什么样子？您通常希望找到什么？例如，问题和答案是如何存储的？
有没有一些工具可以让你设计它？还是只是开发人员想出的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-14T11:47:49.553

在几周前进行[数据库重构](http://www.google.com/search?hl=en&q=site%3Ablog.stackoverflow.com+database+refactor&btnG=Google+Search&aq=f&oq=)之前， Stack Overflow 使用了[MediaWiki 数据库模式](http://www.mediawiki.org/wiki/Manual:Database_layout)作为模板。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T12:57:58.170

数据库设计中很少有原则，我敢肯定，如果您参加了该课程，您将非常了解。他们基本上都说您的数据不应该在多个表中重复，并且您的所有列都应该与它们出现的表是一体的。然后在所有软件设计中都应用了通用实体，例如对象和关系。管理它们是最容易的部分，因为它是本能的。然后是可扩展性和性能的优化，如果第一步正确完成，这应该不难。这通常与为您的数据库编写代码的软件团队一起完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-14T11:40:50.880

您可以使用工具来设计数据库，但它们通常只是用于在图表中创建正确形状的模板。

逻辑结构的设计方式与建筑师设计建筑的方式相同，使用他们最好的知识和经验。

此外，始终“用铅笔工作”，直到你开心为止。

# sql - 凌乱的 SQL 语句

> ID：747164
> 
> 赞同：1
> 
> 时间：2009-04-14T11:39:42.180
> 
> 标签：sql, database, sql-server-2005, tsql

我有一个案例，我想选择任何具有无效国家、地区或地区 ID 的数据库条目，无效，我的意思是我的表中不再存在的国家或地区或地区的 ID，我有四个表：属性、国家、地区、地区。我想这样做：

```
SELECT * FROM Properties WHERE 
Country_ID NOT IN 
(
SELECT CountryID FROM Countries
)
OR
RegionID NOT IN
(
SELECT RegionID FROM Regions
)
OR
AreaID NOT IN
(
SELECT AreaID FROM Areas
) 
```

现在，我的查询对吗？你有什么建议我可以做，并以更好的性能达到相同的结果？！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-14T11:51:25.537

您的查询实际上是最佳的。

`LEFT JOIN`其他人提出的更糟糕，因为他们选择了所有值，然后将它们过滤掉。

很可能您的子查询将为此优化：

```
SELECT  *
FROM    Properties p
WHERE   NOT EXISTS
        (
        SELECT  1
        FROM    Countries i
        WHERE   i.CountryID = p.CountryID
        )
        OR
        NOT EXISTS
        (
        SELECT  1
        FROM    Regions i
        WHERE   i.RegionID = p.RegionID
        )
        OR
        NOT EXISTS
        (
        SELECT  1
        FROM    Areas i
        WHERE   i.AreaID = p.AreaID
        ) 
```

, 你应该使用它。

此查询从每个表中最多选择 1 行，并在找到该行时跳到下一次迭代（即，如果它没有找到`Country`给定属性的 a ，它甚至不会检查 a `Region`）。

同样，`SQL Server`它足够聪明，可以为此查询和您的原始查询构建相同的计划。

**更新：**

`512K`对每个表中的行进行测试。

维度表中所有对应`ID`的 ' 都是`CLUSTERED PRIMARY KEY`'，所有度量字段`Properties`都被索引。

对于 , 中的每一行`Property`，`PropertyID = CountryID = RegionID = AreaID`没有实际缺失的行（就执行时间而言最坏的情况）。

```
不存在 00:11（11 秒）
左加入 01:08（68 秒）

```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-14T11:43:06.447

你可以用不同的方式重写它，如下所示：

```
SELECT p.* 
FROM Properties p
LEFT JOIN Countries c ON p.Country_ID = c.CountryID
LEFT JOIN Regions r on p.RegionID = r.RegionID
LEFT JOIN Areas a on p.AreaID = a.AreaID
WHERE c.CountryID IS NULL
OR r.RegionID IS NULL
OR a.AreaID IS NULL 
```

测试性能差异（如果有的话 - 应该有，因为 NOT IN 是一个讨厌的搜索，特别是在很多项目上，因为它必须测试每一个项目）。

您还可以通过为正在搜索的 IDS 建立索引来加快速度——在每个主表（国家、地区、地区）中，它们应该是聚集的主键。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-14T11:44:07.723

由于这似乎是清理sql，这应该没问题。但是如何使用[外键](http://msdn.microsoft.com/en-us/library/aa933117.aspx)以便下次不会打扰您呢？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-14T11:44:36.677

好吧，您可以*尝试*`UNION`（而不是）之类的事情`OR`-但我*希望*优化器已经在提供可用信息的情况下尽其所能：

```
SELECT  * FROM  Properties
WHERE   NOT EXISTS (SELECT 1 FROM Areas WHERE Areas.AreaID = Properties.AreaID)
UNION
SELECT  * FROM  Properties
WHERE   NOT EXISTS (SELECT 1 FROM Regions WHERE Regions.RegionID = Properties.RegionID)
UNION
SELECT  * FROM  Properties
WHERE   NOT EXISTS (SELECT 1 FROM Countries WHERE Countries.CountryID = Properties.CountryID) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-14T11:46:28.950

条件中的子查询可能非常低效。相反，您可以对相关表进行左连接。如果没有匹配的记录，您会得到一个空值。您可以在条件中使用它来仅选择缺少匹配记录的记录：

```
select p.*
from Properties p
left join Countries c on c.CountryID = p.Country_ID
left join Regions r on r.RegionID = p.RegionID
left join Areas a on a.AreaID = p.AreaID
where c.CountryID is null or r.RegionID is null or a.AreaID is null 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-14T11:52:17.467

如果您没有从国家/地区/地区获取行数据，您可以尝试使用“存在”：

```
SELECT Properties.*
FROM Properties
WHERE Properties.CountryID IS NOT NULL AND NOT EXISTS (SELECT 1 FROM Countries WHERE Countries.CountryID = Properties.CountryID)
OR Properties.RegionID IS NOT NULL AND NOT EXISTS (SELECT 1 FROM Regions WHERE Regions.RegionID = Properties.RegionID)
OR Properties.AreaID IS NOT NULL AND NOT EXISTS (SELECT 1 FROM Areas WHERE Areas.AreaID = Properties.AreaID) 
```

这通常会提示使用国家等的 pkey 索引进行存在检查......但这是否是一种改进取决于您的数据统计，您只需将其插入查询分析器并尝试它。

# wpf - 使用 StaticResources 测试 WPF 窗口

> ID：747166
> 
> 赞同：12
> 
> 时间：2009-04-14T11:40:39.867
> 
> 标签：wpf, unit-testing

我有一个简单的窗口，其中引用了 App.xaml 中的 StaticResource。

App.xaml 资源定义：

```
<!-- Standard Text Box Style -->
<Style x:Key="textBoxStyleStd" TargetType="{x:Type TextBox}">
    <Setter Property="FontSize" Value="14" />
</Style> 
```

使用资源的窗口组件：

```
<TextBlock Grid.Column="1" Grid.Row="0" Name="stationIdTitle"
           Style="{StaticResource textBlockStyleStd}"
           VerticalAlignment="Center" HorizontalAlignment="Center"
           Text="{LocText Key=Title, Dict={StaticResource Dictionary},
               Assembly={StaticResource Assembly}}"/> 
```

尝试对此窗口进行单元测试时出现错误：

> System.Windows.Markup.XamlParseException：找不到名为“{textBlockStyleStd}”的资源。资源名称区分大小写。标记文件“Zpg;component/guicomponenets/screens/enterstationidscreen.xaml”第 23 行位置 71 中的对象“stationIdTitle”出错。

有没有办法解决？我的单元测试代码是：

```
[Test]
public void TestEnterKeyPressedNoText()
{
    IPickingBusinessObject pickingBusinessObject = mock.StrictMock<IPickingBusinessObject>();

    EnterStationIdScreen objectUnderTest = new EnterStationIdScreen(pickingBusinessObject);

    Assert.AreEqual(Visibility.Visible, objectUnderTest.stationIdError.Visibility);

    Assert.AreEqual("werwe", "oksdf");

    Replay();

    objectUnderTest.EnterKeyPressed();

    Verify();
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-04-14T16:46:28.040

谢谢肯特，

我查看了您的建议，在大多数情况下，我同意应该使用和测试模型，但是，有一些与控件相关的代码（例如 TextBox 可见性）我仍然想测试。为了解决这个问题，您可以创建应用程序的一个实例（但不初始化它）并手动添加资源。这确实会导致 App.xaml 和基本单元测试中的重复，但这允许我完成我想要的测试。

```
 if (Application.Current == null)
        {
            App application = new App();

            #region Add Static Resources from the App.xaml

            Style textBoxStyle = new Style(typeof(TextBox));
            textBoxStyle.Setters.Add(new Setter(TextBox.FontSizeProperty, 14d));

            Style textBlockStyle = new Style(typeof(TextBlock));
            textBlockStyle.Setters.Add(new Setter(TextBlock.FontSizeProperty, 14d));

            application.Resources.Add("TextBoxStyleStd", textBoxStyle);
            application.Resources.Add("TextBlockStyleStd", textBlockStyle);
            application.Resources.Add("TextBlockStyleError", textBlockStyle);
            application.Resources.Add("Assembly", "Zpg");

            #endregion
        } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-14T12:33:49.617

在单元测试的上下文中，没有运行 WPF 应用程序。因此，`Window`将找不到资源。

我的解决方法是*不对*您的视图进行单元测试。相反，使用 MVVM 并单元测试您的视图模型。如果您想测试您的视图，请改为编写集成测试。您的集成测试实际上可以启动应用程序，因此更接近地模拟您的应用程序的真实运行。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-06-07T13:53:38.057

当我在 app.xaml 资源条目中使用完全限定的程序集名称时，我只需要实例化 App() 类。在此示例中，所有资源都位于 Majesty_of_Omega_GUI 程序集中，由 UnitTest.DLL 引用

```
<Application
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
x:Class="Majesty_of_Omega.GUI.App"
StartupUri="Pages/MainPage.xaml"
>
<Application.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="pack://application:,,,/Majesty_of_Omega_GUI;component/Resources/MainScreens.xaml" />
            <ResourceDictionary Source="pack://application:,,,/Majesty_of_Omega_GUI;component/Resources/PanelResources.xaml" />
            <ResourceDictionary Source="pack://application:,,,/Majesty_of_Omega_GUI;component/Simple Styles.xaml"/>
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</Application.Resources>
</Application> 
```

测试功能：

```
 [Test]
    public void Testfunction()
    {
        if (Application.Current == null)
        {
            App application = new App();
        }

        SomePage page = new SomePage(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-09-24T10:45:18.703

实际上，您可以使用同一个应用程序，如果资源来自同一个程序集，您必须调用 InitializeComponents 方法以使其工作（[此处为 Source](http://blog.lexique-du-net.com/index.php?q=WPF+tip+%3A+How+can+I+use+static%2Fdynamic+resources+in+my+tests)）。

祝你今天过得愉快 ！

# c# - C#比较相似的字符串

> ID：747169
> 
> 赞同：1
> 
> 时间：2009-04-14T11:42:46.040
> 
> 标签：c#, string, compare, similarity

我有一个带有一些文件名的泛型（LIST1）和另一个带有完整名称列表的大泛型（LIST2）。我需要将 LIST1 中的名称与 LIST2 中的类似名称相匹配。例如

```
LIST1
- **MAIZE_SLIP_QUANTITY_3_9.1.aif**

LIST 2
1- TUTORIAL_FAILURE_CLINCH_4.1.aif
2- **MAIZE_SLIP_QUANTITY_3_5.1.aif**
3- **MAIZE_SLIP_QUANTITY_3_9.2.aif**
4- TUTORIAL_FAILURE_CLINCH_5.1.aif
5- TUTORIAL_FAILURE_CLINCH_6.1.aif
6- TUTORIAL_FAILURE_CLINCH_7.1.aif
7- TUTORIAL_FAILURE_CLINCH_8.1.aif
8- TUTORIAL_FAILURE_CLINCH_9.1.aif
9- TUTORIAL_FAILURE_PUSH_4.1.aif 
```

我已经阅读了[Levenshtein distance](http://en.wikipedia.org/wiki/Levenshtein_distance)并在框架（[SignumFramework Utilities](http://www.signumframework.com/Others.ashx#StringDistance)）中使用了它的实现。 **它在第 2 行和第 3 行返回 distance=1。但在我的情况下，第 3 行比第 2 行更好。**

有没有更好的方法来比较相似的字符串？更灵活的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-14T12:00:01.473

当作为字符串比较时，“9.2”并不比“5.1”更好地匹配“9.1”。如果您希望以数字方式评估版本号，则必须解析字符串，以便可以分别比较字符串部分和数字部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T12:12:36.623

您的相似性标准可以是其他几个标准的组合。一个可能是 Levenshtein 距离，其他可能是最长的公共子串或前缀/后缀。

最长公共子串问题实际上是编辑距离的一种特殊情况，当禁止替换并且只有完全匹配的字符匹配、插入和删除是允许的编辑操作时（参见[此处](http://www.cs.sunysb.edu/~algorith/files/longest-common-substring.shtml)）。

[此处](http://en.wikipedia.org/wiki/Category:String_similarity_measures)描述了字符串相似性的更多指标。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-14T12:14:11.300

可以使用正则表达式来获取与名称匹配的项目。版本号可以在匹配的正则表达式组中收集并解析为.net 对象（例如十进制），您可以使用该对象来比较哪个最接近。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-14T12:30:12.743

[这个 SO question](https://stackoverflow.com/questions/473522/word-comparison-algorithm)有一套相当详尽的答案。在底部是我为 soundex、双变音、PHP 相似性和 levenstein 提供的 C# 实现的链接。

# javascript - 如何使用 jQuery 创建多个 HTML 元素？

> ID：747178
> 
> 赞同：7
> 
> 时间：2009-04-14T11:44:54.100
> 
> 标签：javascript, jquery, html

我想要做的是使用 jQuery 创建一个表分页器控件。它包含许多链接和跨度。我已经设法用普通的字符串连接来做到这一点，但我不敢相信 jQuery 不能让它更优雅。我不能在这里使用 jTemplates，因为该生成具有相当多的程序逻辑。

问题：有没有办法用 jQuery 创建一个 HTML 元素数组并将它们附加到某个容器中？

谢谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-04-14T11:49:17.710

`$('**First Element**').add($('*Second Element*')).appendTo($('body'))`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-04-14T11:53:55.093

字符串连接（或 Array.join）很好，只要你让它漂亮；）

```
var structure = [
    '<div id="something">',
        '<span>Hello!</span>',
    '</div>'
];

$(structure.join('')).appendTo(container); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-14T11:53:08.510

总是有[append()](http://docs.jquery.com/Manipulation/append)。

```
$('#container').append('<span>foobar baz</span>'); 
```

在我看来，仅使用字符串连接和追加将是最不复杂，并且可能是最快的选择。但是，以下是（可以说）简化元素创建并允许您将它们附加到给定父元素的方法的*未经测试的示例：*

```
function elemCreate(type, content, attrs) {
   /* type: string tag name
    * content: string element content
    * attrs: associative array of attrs and values
    */
    elem = '<' + type + '></' + type + '>'
    e = $(elem).attr(attrs)
    e.append(content)
    return e
}

stuff = [];    
stuff.push(elemCreate('a', 'Click me!', {'href': 'http://stackoverflow.com'});

$(stuff).appendTo($('#container')); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-25T17:11:06.543

您可以通过这样做来简化事情:)

```
$('.parentElement').append(`
   <table style="width:100%">
     <tr>
      <th>Firstname</th>
      <th>Lastname</th>
      <th>Age</th>
    </tr>
    <tr>
      <td>Jill</td>
      <td>Smith</td>
      <td>50</td>
    </tr>
   </table>
`); 
```

只需在 append 方法中使用 `` 或反引号

# mysql - MySQL编码问题

> ID：747179
> 
> 赞同：0
> 
> 时间：2009-04-14T11:45:06.330
> 
> 标签：mysql, encoding

出于某种原因，我的 mysql 表正在将单引号和双引号转换为奇怪的字符。例如

```
"aha" 
```

改为：

```
â€œahaâ€ 
```

我该如何解决这个问题，或者在 PHP 中检测到这个并解码所有内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-14T11:49:16.383

您的 mysql 客户端和服务器的编码不匹配。使用[SET NAMES](http://dev.mysql.com/doc/refman/5.1/en/charset-connection.html)将连接的字符集与 PHP 文件中使用的字符集匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-14T11:54:33.203

# sql-server - SQL Server 集成服务的当前趋势是什么？

> ID：747181
> 
> 赞同：2
> 
> 时间：2009-04-14T11:45:52.320
> 
> 标签：sql-server, ssis

谁能告诉我 SQL Server 集成服务的当前趋势是什么？它是否比市场上其他可用的 ETL 工具（如 Informatica、Cognos 等）更好？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-14T12:12:06.953

几周前我被介绍给 SSIS。执行摘要：我不太可能在未来的项目中考虑它。

1.  我很确定流程图（即非结构化）长期以来一直被认为是一种有效的编程范式，除了极少数情况。

2.  如果用户仍然需要像程序员一样思考才能知道将箭头拖到哪里，那么用彩色连接点替换干净的文本（源代码）界面是没有意义的。

3.  除非通过一种规定的方法，否则您无法访问的程序设计（例如全文搜索、使用替代方法导航、有效的版本控制......）是一个巨大的生产力杀手。以及 RSI 的绝佳来源。

可能有一个特定的利基市场恰到好处，但我想大多数 ETL 任务会很快超过它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-14T12:10:37.597

根据我的经验，SSIS 不适用于生产应用程序，原因如下：

1.  要远程调用 SSIS 包，您必须调用存储过程，调用作业，调用 SSIS
2.  使用上面的方法，是不能传入参数的。
3.  传递参数意味着您必须调用本地服务器上的 SSIS——这意味着运行在远程服务器上的代码必须调用运行在 SQL 服务器上的代码才能执行包。

我总是宁愿编写特定的代码来处理 ETL 并使用 SSIS 进行一次性转换。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-14T14:58:24.777

在我看来，这是一个相当不错的平台，并且我看到了它的良好进展。许多 2005 版本的 drwabacks 以及社区抱怨的许多问题，都已在 2008 年得到纠正。

从我的角度来看，最好的事情是您可以根据需要以有组织的方式使用 SQL 或 .NET 代码对其进行扩展和补充。

例如，您可以决定在您的解决方案中是需要 80% 的 c# 代码和 20% 的 ETL 组件，还是需要 5% 的 c# 代码和 95% 的 ETL 组件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-14T11:55:38.177

免责声明 - 我为微软工作

现在答案

SSIS 或 SQL Server 集成服务是用于 ETL 操作的绝佳工具，在市场上有很多应用。除了许可 SQL 服务器之外没有额外的费用，您还可以使用 .Net 语言编写任务。 [http://www.microsoft.com/sqlserver/2008/en/us/integration.aspx](http://www.microsoft.com/sqlserver/2008/en/us/integration.aspx) [http://msdn.microsoft.com/en-us/library/ms141026.aspx](http://msdn.microsoft.com/en-us/library/ms141026.aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-06T13:48:08.570

我会列出好处：

*   您将 SSIS 用于更大的项目，可能/最好一次或一次运行，然后使用集成项目数月并进行微小的更改；任务、包和一般的一切都很容易阅读（当然，取决于视角）
*   该工具本身处理计划的运行，向您发送带有日志的邮件，并且 - 只要我的经验达到 - 它与所有其他工具（如 SSAS、SQL Server Management Studio、Microsoft Office Excel、Access 等）的通信非常好。和其他非 Microsoft 工具）
*   手动，详细配置的任务似乎以各种方式接管了责任，只让错误的机会很小
*   如上所述，新版本中修正了许多以前的问题

我会推荐它用于 ETL，特别是如果您继续分析过程，因为 SSIS、SSAS 和 SSRS 工具非常顺利地融合在一起。

缺点：在您习惯之前，调试/查找错误有点困难。

# c# - Ado.Net 实体：对象不显示链接成员（外键）

> ID：747184
> 
> 赞同：3
> 
> 时间：2009-04-14T11:47:08.900
> 
> 标签：c#, entity-framework, ado.net, one-to-many

我有一个简单的数据库方案：用户，帐户。用户与帐户具有一对多的关系。

我已经生成了一个 ado.net 实体数据模型，我可以创建用户和帐户，甚至将它们链接在一起。在数据库中 account.user_id 已正确填写，因此理论上我应该能够通过实体访问 C# 中的 User.Account.ToList() 。

但是，当我尝试访问 User.Account.ToList() 时，结果为零。

```
User user = db.User.First(U => U.id == 1);
List<Account> accounts = user.Account.ToList(); ##count = 0... 
```

当我在前一个代码之前添加以下代码时，它突然给了我正确的计数 2。

```
 Account account1 = db.Account.First(A => A.id == 1);
 Account account2 = db.Account.First(A => A.id == 2);
 User user = db.User.First(U => U.id == 1);
 List<Account> accounts = user.Account.ToList(); ##count = 2...?? 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-14T12:08:32.843

您应该为此使用[ObjectQuery.Include](http://msdn.microsoft.com/en-us/library/bb738708.aspx)方法。您的方法也有效，但会导致额外的查询。

在你的例子中，你会得到

```
User user = db.User.Include("Account").First(u => u.id == 1); 
```

您必须弄清楚字符串`"Account"`是否正确。通常它应该以类似的东西作为前缀`MyEntities`。这取决于您的实体的名称空间，但通过一些试验和错误，您应该能够弄清楚这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-14T12:14:41.703

是的，这是开始使用 Entity 框架时的常见问题 - 父子关系都不是延迟加载的，因此您必须显式加载它们。如果您要在类/方法之间共享对象上下文，您可能需要检查关系是否已经加载：

例如

```
 if(!user.Account.IsLoaded)
        user.Account.Load(); 
```

您可以使用简单的扩展方法使这更容易：

```
public static class EntityExtensions
{
    public static void EnsureLoaded(this RelatedEnd relatedEnd)
    {
        if (!relatedEnd.IsLoaded)
            relatedEnd.Load();
    }
} 
```

使用它可以使您的负载调用再次更短：

```
user.Account.EnsureLoaded(); 
```

并且由于它使用了一个 RelatedEnd，这对于实体框架中的父子关系来说是常见的，因此您也可以将它用于父引用关系 - 例如

```
account.UserReference.EnsureLoaded(); 
```

正如 rwwilden 所说，如果在这种情况下您总是要使用父对象加载子对象，您可能希望使用 Include 来提高调用效率并避免额外的数据库往返。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-14T11:53:02.850

我想我对框架的了解有点少。:)

您需要先显式加载相关帐户。

```
user.Account.Load(); 
```

现在它确实显示正确。

# wpf - 我可以将“像素”单位的尺寸指定为资源（WPF）吗？

> ID：747194
> 
> 赞同：0
> 
> 时间：2009-04-14T11:49:53.917
> 
> 标签：wpf, resources

我一直在尝试以像素为单位指定一个维度作为资源，这样我就可以在我的 UI 中的多个位置使用它。例如

```
...
<ResourceDictionary 
  xmlns:System="clr-namespace:System;assembly=mscorlib">
  <System:Double x:Key="a-width">140px</System:Double>
</ResourceDictionary 
...
<TextBlock 
  Width="{StaticResource a-width}" 
  Text="this TextBlock is a-width wide"/>
... 
```

但是，这不起作用。尽管 Width 是“double”类型，但您不能使用“px”后缀指定 double 的值，因为 LengthConverter 支持这种格式，它是 FrameworkElement.Width 属性的 TypeConverter。

有没有办法将“Npx”格式的宽度指定为资源？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-14T12:42:33.197

px (DIPs) 是默认值，因此您可以指定带有 'px' 后缀的双精度值：

```
<ResourceDictionary 
  xmlns:System="clr-namespace:System;assembly=mscorlib">
  <System:Double x:Key="a-width">140</System:Double>
</ResourceDictionary 
...
<TextBlock 
  Width="{StaticResource a-width}" 
  Text="this TextBlock is a-width wide"/> 
```

# c# - 不管 InvokeRequired 调用 Invoke 有什么问题？

> ID：747210
> 
> 赞同：40
> 
> 时间：2009-04-14T11:56:39.907
> 
> 标签：c#, user-interface, event-handling, invoke, invokerequired

我已经看到了对 GUI 控件的跨线程访问的常见设置，例如这里讨论的： [Shorest way to write a thread-safe access method to a windows forms control](https://stackoverflow.com/questions/571706/shortest-way-to-write-a-thread-safe-access-method-to-a-windows-forms-control)

我发现的所有网络点击都描述了类似的事情。

但是，为什么我们需要检查 InvokeRequired？我们不能直接调用 Invoke 吗？

我认为答案是否定的，所以我真正的问题是“为什么”？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2009-04-14T12:00:36.467

从非 UI 线程我们无法触及 UI - 可能会发生非常糟糕的事情，因为控件具有线程关联性。因此，我们必须（至少）从非 UI 线程调用`Invoke`或`BeginInvoke`.

然而，对于 UI 线程——我们*不想*调用`Invoke`很多时间；问题是，如果您*已经*在 UI 线程上，它仍然具有向表单的泵发送消息并进行处理的不必要开销。

实际上，在大多数线程代码中，您*都知道您希望在***非**UI 线程上调用特定方法，因此在这些情况下，没有额外的开销：只需调用`Invoke`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-14T12:00:09.633

`InvokeRequired`基本上会告诉您是否在正确的线程上执行。如果您不在正确的线程上，则需要将任务编组到正确的线程，否则您不需要。因此需要进行检查。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-18T12:22:55.173

如果您尝试在创建窗口句柄之前调用（例如，在调用表单构造函数时），您将获得一个`InvalidOperationException`. 因此，通常`InvokeRequired`需要检查。

有关详细信息，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/zyzhdc6b.aspx)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-14T12:37:05.490

问题是 GUI 控件要求只有在用于实例化 GUI 控件的同一线程上执行的代码才能访问 GUI 控件。此要求背后的原因与 Windows 的架构方式有关。可以说，要改变这一点非常困难。

InvokeRequired 根据实例化线程的身份检查当前执行线程的身份。如果它们相同，则代码可以自由地与控件交互。如果不是，代码必须将数据从当前线程编组到实例化线程。这是一个缓慢且成本高昂的过程，应尽可能避免。如果您总是调用，您的代码将起作用，并且您可能不会注意到性能下降，但是随着多核系统的使用，这种情况将越来越普遍。最好不要创建以后必须撤消的代码“结”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-14T12:01:02.643

Invoke 将通过 Delegate 而不是直接调用代码，这将是昂贵的。

仅在需要时调用 Invoke 具有成本效益。因此，InvokeRequired 用于找出调用是来自同一个线程还是另一个线程？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-14T12:04:07.347

我能想到的一个原因是性能。如果大多数时候调用线程与创建线程相同，那么您将有一些不必要的开销。

# ruby-on-rails - Rails 验证和'fieldWithErrors'包装选择标签

> ID：747220
> 
> 赞同：6
> 
> 时间：2009-04-14T12:01:08.210
> 
> 标签：ruby-on-rails, validation, actionview, field-with-errors

不获取`<div class="fieldWithErrors">`具有验证错误的包装环绕选择标签是正常行为吗？我个人认为没有理由将选择标签与其他表单标签（输入、文本区域）区别对待。

我*确实*得到了该字段的错误`error_messages_for`和`error_message_on`方法。

PS。`ActionView::Base.field_error_proc`为了获得 span 标签而不是 div，我进行了一些更改，但这不是问题。

```
ActionView::Base.field_error_proc = Proc.new { |html_tag, instance|
   #if I puts html_tag here I only get the <input> tags
   "<span class=\"fieldWithErrors\">#{html_tag}</span>"
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-12-17T07:18:59.923

问题（至少对我而言）是我`f.select :whatever_id`在`object.errors`对象中寻找`:whatever_id`我的验证实际打开时的键`:whatever`，而不是`:whatever_id`.

我通过更改解决了这个烦人的问题

```
object.errors.on(@method_name) 
```

到

```
object.errors.on(@method_name) || object.errors.on(@method_name.gsub(/_id$/, '')) 
```

这是差异（针对 Rails 2.3.4）：

```
diff --git a/vendor/rails/actionpack/lib/action_view/helpers/active_record_helper.rb b/vendor/rails/actionpack/lib/action_view/helpers/active_record_helper.rb
index 541899e..5d5b27e 100644
--- a/vendor/rails/actionpack/lib/action_view/helpers/active_record_helper.rb
+++ b/vendor/rails/actionpack/lib/action_view/helpers/active_record_helper.rb
@@ -247,7 +247,7 @@ module ActionView
       alias_method :tag_without_error_wrapping, :tag
       def tag(name, options)
         if object.respond_to?(:errors) && object.errors.respond_to?(:on)
-          error_wrapping(tag_without_error_wrapping(name, options), object.errors.on(@method_name))
+          error_wrapping(tag_without_error_wrapping(name, options), object.errors.on(@method_name) || object.errors.on(@method_name.gsub(/_id$/, '')))
         else
           tag_without_error_wrapping(name, options)
         end
@@ -256,7 +256,7 @@ module ActionView
       alias_method :content_tag_without_error_wrapping, :content_tag
       def content_tag(name, value, options)
         if object.respond_to?(:errors) && object.errors.respond_to?(:on)
-          error_wrapping(content_tag_without_error_wrapping(name, value, options), object.errors.on(@method_name))
+          error_wrapping(content_tag_without_error_wrapping(name, value, options), object.errors.on(@method_name) || object.errors.on(@method_name.gsub(/_id$/, '')))
         else
           content_tag_without_error_wrapping(name, value, options)
         end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-25T11:34:11.307

因为我不知道为什么选择标签没有包含在那个 Proc 中，所以我创建了一个辅助方法，它做的事情几乎相同。

```
def field_with_error(object, method, &block)
  if block_given?
    if error_message_on(object, method).empty?
      concat capture(&block)
    else
      concat '<span class="fieldWithErrors">' + capture(&block) + '</span>'
    end
  end
end 
```

我在我的视图中使用它，如下所示：

```
<% field_with_error @some_object, :assoc do %>
  <%= f.select(:assoc_id, @associations.collect {|assoc| [ asoc.name, assoc.id ] }) %>
<% end %> 
```

如果有人知道更好或更清洁的方法，我愿意接受建议。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-14T14:13:51.903

我发现这篇博客文章似乎解决了这个问题：

[http://blog.invalidobject.com/2007/09/16/rails-error-wrapping-for-select-input-fields-of-referenced-models](http://blog.invalidobject.com/2007/09/16/rails-error-wrapping-for-select-input-fields-of-referenced-models)

希望对您有所帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-02-14T14:00:30.923

这就是我解决这个问题的方法。

我创建了一个特定的“field_with_errors”选择包装器：

```
ActionView::Base.field_error_proc = Proc.new do |html_tag, instance|
   if html_tag =~ /^<input/
     %{<div class="field_with_errors">#{html_tag}<label for="#{instance.send(:tag_id)}" class="message">#{instance.error_message.first}</label></div>}.html_safe
   elsif html_tag =~ /^<select/
 %{<div class="field_with_errors" id="select-error">#{html_tag}</div>}.html_safe
   else
     %{<div class="field_with_errors">#{html_tag}</div>}.html_safe
   end
end 
```

CSS：

```
#select-error {
    border: 1px solid red;
    overflow-y: auto;
    overflow-x: hidden;
} 
```

我将验证修改为 :whatever_id 而不是*:whatever*

```
validates :whatever_id, :presence => true 
```

我忘记了，选择：

```
f.collection_select(:whatever_id, Whatever.all, :id, :name, prompt: t(:please_choose)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-08-11T20:56:39.100

另一种方式，可以在方法或控制器级别或在 environment.rb 中插入：

ActionView::Base.field_error_proc = proc { |输入，实例| 输入 }

# iphone - 用于 NSXMLParser 的数据类型

> ID：747221
> 
> 赞同：0
> 
> 时间：2009-04-14T12:01:50.363
> 
> 标签：iphone, cocoa-touch, nsxmlparser

我正在使用 NSXMLParser 解析来自远程服务器的 XML 数据。我按照教程启动并运行，对于我正在创建的对象中的任何 (NSString *) 成员来说一切正常。我还需要从 XML 数据中设置整数，例如：

```
<root>
    <child>
        <name> Hello </name>
        <number> 123 </number>
    </child>
    <child>
        <name> World</name>
        <number> 456 </number>
    </child>
</root> 
```

在这种情况下，我将创建两个“子”对象。我正在使用：

```
- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName
      namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {
    ...
    [aChild setValue:currentElementValue forKey:elementName];
    ...
} 
```

委托设置值。这就是我遇到问题的地方。“NSString *name”成员每次都设置得很好，但是如果我使用 NSInteger，那么每当我尝试设置“number”时，我都会得到一个 EXC_BAD_ACCESS。所以我尝试使用“int”代替。但是现在我不能使用键值编程，需要手动查找节点：

```
if([elementName isEqualToString:@"number"]) {
    aChild.number = [currentElementValue intValue]
} 
```

没关系，我可以处理这个问题，因为我知道我将获得哪些节点，但情况会变得更糟。根据教程，当 currentElementValue 是“NSMutableString *”时，即使字符串正确，它也不会返回正确的整数。例如：

```
 NSLog(@"NSMutableString Value: %@, and intValue %d\n", currentElementValue, [currentElementValue intValue]); 
// Value will be 123 but intValue will be 0 
```

因此，我将 currentElementValue 设为 NSString 而不是 NSMutableString，这样我就可以获得正确的 intValue。但我在网上读到它是 NSMutableString 的原因是：

```
- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string 
```

用于设置值的委托*可以*多次出现，但通常不会出现。所以我的问题是有人知道我做错了什么吗？这对于 NSXMLParser 来说似乎是一个非常微不足道的案例，所以我确定这是我误解的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-14T12:24:40.993

我不知道您的代码在哪里失败，但这是处理此问题的正确方法：

```
NSMutableString *buffer = [[NSMutableString alloc] init];

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName attributes:(NSDictionary *)attributeDict {
    [buffer setString:@""];
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {
    if([elementName isEqualToString:@"number"]) {
        [aChild setNumber:[buffer intValue]];
        [buffer setString:@""];
    }
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string {
    [buffer appendString:string];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-14T12:37:48.887

1.  `intValue`应该和 . 一样`NSString`工作`NSMutableString`。你确定 Value 是 '123' 而不是 '\n123' （\n 表示换行符），如果字符串不以十进制数开头，那么`intValue`将返回 0。

2.  您是否正确清除了可变字符串`parser:didStartElement:`？如果您只在那时进行清洁，`parser:didEndElement:`那么`parser:foundCharacters:`也会从父元素中收集字符。在这种情况下，它将在您的字符串前面加上换行符，`intValue`并将返回 0。

3.  您是正确的，因为`parser:foundCharacters:`可以为单个元素多次调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-16T07:42:44.227

这里发生了一些事情。

首先，您的 XML 字符数据中有明显的空白，例如

```
 <number> 456 </number> 
```

你真的应该去掉那个空格。这可能是导致返回值`[NSString intValue]`错误的原因。如果您可以从源头上删除它，那就太好了。如果没有，您可以通过执行以下操作在接收端将其剥离：

```
currentElementValue = [currentElementValue stringByTrimmingCharactersInSet:
    [NSCharacterSet whitespaceAndNewlineCharacterSet]]; 
```

您不能使用键/值的原因是您不能将 NSInteger 值存储在 NSMutableDictionary 中。字典中的键和值都必须从 NSObject 继承，而 NSInteger （我在这里猜测）只是一个平台安全的 int 类型定义。所以你应该使用 NSNumber 代替：

```
NSNumber *theInt = [NSNumber numberWithInt:[currentElementValue intValue]];
[aChild setObject:theInt forKey:elementName]; 
```

# c - 如何按顶点处的特定值（或其他一些距离度量）对一堆多边形/多面体进行排序

> ID：747224
> 
> 赞同：0
> 
> 时间：2009-04-14T12:03:20.530
> 
> 标签：c, sorting, geometry

我正在做一个项目，该项目将使用大型数据集（2D 和 3D），我将把它们变成三角形或四面体，以便渲染它们。

我还将对这些 tris/tets 进行计算。每次计算使用哪些 tris/tets 取决于其顶点的最大值和最小值。

所以我需要按照它们最大价值的顶点的顺序对 tris/tets 进行排序。

--

我尝试过快速排序和二进制插入排序。到目前为止，快速排序提供了最快的解决方案，但由于数据集的大小，它仍然很慢。

在创建 tris/tets 时，我首先考虑的是桶/地图排序；每个遇到的最大值顶点的桶，添加指向三角形的指针，这些三角形都具有该值作为其最大值顶点的值。

这种方法在时间上应该是线性的，但显然需要更多的内存。这不是问题，但我选择的编程语言是 c。而且我不完全确定我将如何编写这样的东西。

所以我对你的问题是，你将如何以一种可以遍历它们的方式获取三角形/tets，从三角形中，其 3 个顶点中值最大的顶点是整个数据中值最大的顶点设置，一直到具有最小最大顶点值的三角形？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-14T12:18:31.570

您不能在生成它们时将它们存储在[二叉搜索树中吗？](http://en.wikipedia.org/wiki/Binary_search_tree)这将使它们保持有序且易于搜索（`O(log(n))`对于插入和查找）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-14T12:45:40.163

您可以使用基于[堆数据结构的](http://en.wikipedia.org/wiki/Heap_(data_structure))[优先级队列](http://en.wikipedia.org/wiki/Priority_queue)。这也应该让您进行插入和提取。`O(log(n))`

# .net - 在 office 07 中打开生成的 excel 文件时出现警告消息

> ID：747227
> 
> 赞同：4
> 
> 时间：2009-04-14T12:06:35.763
> 
> 标签：.net, xml, excel

我在以下帖子中使用 stackoverflow 上概述的 XML 格式生成了一个 excel 文件： [在 .net 中生成 excel 文件](https://stackoverflow.com/questions/150339/generating-an-excel-file-in-asp-net)

但是，当我在 excel 07 中打开它时，我收到以下消息：

> 您尝试打开的文件“blah.xls”的格式与文件扩展名指定的格式不同。在打开文件之前，请确认文件没有损坏并且来自受信任的来源。您现在要打开文件吗？

是什么导致了错误消息，我该如何摆脱它？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-14T12:26:37.340

尝试调用文件`blah.xlsx`而不是`blah.xls`. Excel 显然希望 XML 文件具有“xlsx”扩展名。“xls”扩展名用于二进制格式文件。

编辑以回应您的评论：
我错了：`xlsx`文件不仅仅是 XML 文件，它们是包含 XML 格式和其他元数据的 zip 档案。总而言之，设置起来有点复杂。我会尝试将文件重命名为`blah.xml`，看看是否可行。否则恐怕你可能不得不看看如何制作这些 zip 文件。有两种选择：

*   使用 Microsoft 的 OOXML SDK：请参阅[http://msdn.microsoft.com/en-us/library/bb448854.aspx](http://msdn.microsoft.com/en-us/library/bb448854.aspx)。
*   自己做（更难）。您必须查看[OOXML 标准](http://www.ecma-international.org/publications/standards/Ecma-376.htm)。第 1 部分包含对每个 XML 文件的概述和描述。第 2 部分描述了包格式（即 zip 存档格式）。`xlsx`除了第 2 部分所说的您需要的文件之外，还有其他要求，因此请先阅读第 2 部分，然后再阅读第 1 部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T04:52:52.040

Microsoft office 2007 on wards，office文件以xml格式存储（office open xml包）。早期版本（2003 及以下）不存储为 xml 文件。所以你看不到 xls 文件的标记。当然，您可以看到 xlsx 文件的标记。您不需要任何编辑器。如果您的系统中安装了 WinRar，则足以打开任何 MS-Office 文件。
如果您尝试以编程方式打开它，那么您将获得 DocumentFormat.xml.dll 库（它是免费的）（对于 .net）和 OpenXml4J（对于 java）。

# html - 图像周围的空白区域

> ID：747229
> 
> 赞同：5
> 
> 时间：2009-04-14T12:06:46.873
> 
> 标签：html, ruby-on-rails, css

我在向左浮动的图像周围有一些文字。但是文本正好靠在图像的边界上。如何在它周围留出一些空白？

目前我已经进入了 CSS：

```
.image {
  float:left
} 
```

和观点：

```
<% if article.newspic.exists? %> 
        <div class ="image">
        <%= newspic_thumbnail_tag(article) %>
        </div>
    <% end %>

  <%= simple_format(article.body) %><br> 
```

如果我`margin-right`在图像中添加一个，那么文本将简单地从图像下方开始。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-14T12:20:24.437

在这种情况下，添加一个margin-right 应该可以工作，但我之前遇到过margin 和float 的问题，特别是在处理负margin 时，但你也有collapse margin 的问题。这可能是也可能不是您想要的行为。通常我最终会防御性地将浮动内容包含在 div 中，并使用填充代替，因为结果往往更直观。

此外，IE7 不会处理大于内容宽度的负边距，因此在这种情况下您必须使用封闭元素。这是[该技术的一个示例](https://stackoverflow.com/questions/717131/what-is-a-reliable-way-of-doing-sidenotes-in-html/717149#717149)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-21T23:00:56.300

```
.image {
  padding-right: 10px
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-14T15:06:13.213

如果为图像添加边距使文本简单地显示在下方，那么您需要增加父容器的大小。

如果 2 个组件的总宽度大于父容器的大小，则其中一个进入下一行。

代码示例

```
<div class="parentDiv">
    <div class="image">
        **image here (assume it's 100px wide)**
    </div>
    <div class="otherText">
       **text here**
    </div>
</div> 
```

这不起作用，因为图像大小 + 图像边距 + otherText 宽度 > parentDiv 宽度。它将导致文本转到下一行：

```
.parentDiv
{
    width: 500px;
}

.image
{
    float: left;
    margin-right: 3px;
}

.otherText
{
    float: left;
    width: 400px;
} 
```

这将起作用：

```
.parentDiv
{
    width: 510px;
}

.image
{
    float: left;
    margin-right: 3px;
}

.otherText
{
    float: left;
    width: 400px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-14T12:07:58.740

为图像添加边距。

```
.imageclass
{
  margin-right: 3px;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-14T12:14:56.883

添加：

*   margin-left 或 padding-left 到文本，或
*   图像的 margin-right 或 padding-right

如果没有看到您的 CSS / XHTML，很难说什么会更好。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-14T15:20:04.613

昨天刚碰到这个。如果您计划在图像周围使用边框，请务必使用边距属性而不是填充，否则您将在图像边框和图像本身之间出现空白。

# c# - 包含可变数量值/属性的未知大小的数组

> ID：747236
> 
> 赞同：2
> 
> 时间：2009-04-14T12:09:05.697
> 
> 标签：c#, asp.net, arrays, data-structures

我正在使用一个数据表，对于每一行我想存储一些 3 或 4 个字段，这些字段是不同类型的，最好的字段数是 3，我想注意 row_index （数据表中的行）因为我需要它。

所以像这样我想存储数据表中所有行的值（用于字段）。

请给我一个示例、代码片段或有关如何构造/访问具有行索引（也已存储）的任何第 n 行的此信息的更多信息

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-14T12:10:45.490

必须为数组分配一个长度，以允许任意数量的元素：使用[`List`](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)类。

例如：

```
List<int> myInts = new List<int>();
myInts.Add(5);
myInts.Add(10);
myInts.Add(11);
myInts.Count // = 3 
```

要在列表中存储许多值，我建议创建自己的类并存储它。但如果你不想，你可以有一个对象列表的列表。

```
List<List<object>> myList = new List<List<object>();
myList.Add(new List<object>() { 1, "APPLE", "red", "sweet" } ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T12:11:47.467

如果您完全不知道每个元素中可以包含哪些字段，那么您唯一的选择是创建键值对的属性包（映射/字典）。

您可以使用允许按序号索引的 an[`ArrayList`](http://msdn.microsoft.com/en-us/library/system.collections.arraylist(VS.71).aspx)或 an[`OrderedDictionary`](http://msdn.microsoft.com/en-us/library/system.collections.specialized.ordereddictionary.aspx)来保存每个属性包元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-14T12:22:45.710

您可以使用 XMLDocument 来存储数据。即使您只需要在内存中使用它，它也足够灵活地存储和操作数据。

# ruby-on-rails - 总结文本

> ID：747238
> 
> 赞同：1
> 
> 时间：2009-04-14T12:09:40.517
> 
> 标签：ruby-on-rails, ruby, string, text

如果我有一些`text`想要打印在页面上的内容，但只想打印前 100 个单词，然后再将其遮盖……最简单的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-14T12:18:57.013

这是如何开始的：

```
def first_words(s, n)
  a = s.split(/\s/) # or /[ ]+/ to only split on spaces
  a[0...n].join(' ') + (a.size > n ? '...' : '')
end

s = "The quick brown fox jumps over the lazy dog. " * 20

puts "#{s.size}, #{s.split(/\s/).size}" 
#-> 900, 180

puts first_words(s, 10)
#-> The quick brown fox jumps over the lazy dog. The...

puts first_words("a b c d", 10)
#-> a b c d 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T12:19:54.673

您有几个选择，一种方法是您可以说一个单词是*n 个*字符，然后取一个该长度的子字符串，将[省略号](http://en.wikipedia.org/wiki/Ellipsis)附加到末尾并显示它。或者你可以运行字符串并计算空格的数量，如果你假设每个单词之间只有一个空格，那么第 100 个空格将在第 100 个单词之后，附加省略号就完成了。

哪个具有更好的性能可能取决于函数的编写方式，很可能子字符串操作将比计算空格更快。但是，性能差异可能可以忽略不计，因此除非您经常这样做，否则计算空间可能是最准确的方法。

另外，作为参考，英语单词的平均长度[为 5.1 个字符](http://blogamundo.net/lab/wordlengths/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-14T14:45:53.837

```
text.slice(0..100)
if text.size > 100 then puts "..." 
```

[http://www.ruby-doc.org/core/classes/String.html](http://www.ruby-doc.org/core/classes/String.html)

# sharepoint - SharePoint 讨论板“上次更新”字段不再更新

> ID：747258
> 
> 赞同：1
> 
> 时间：2009-04-14T12:15:25.197
> 
> 标签：sharepoint, moss, sharepoint-discussion-board

今天，我们的一位 SharePoint 用户告诉我，他的一个网站上的讨论板出现了一种奇怪的行为。

通常，讨论列表的标准“主题”视图有一个名为“最后更新”的字段，显示相应线程中最后一个帖子的日期和时间。在我们用户的讨论板上，此字段从未设置为上一篇文章的日期/时间，而是保留在线程开始的日期/时间。

讨论板所在的站点是从包含空讨论板的自定义网站模板创建的。

为了缩小这个问题，我在同一个站点上创建了第二个讨论板，结果它正确设置了 Last updated 字段。

为什么 Last updated 字段不再更新的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-17T17:01:18.227

视图是否已修改为使用创建日期？我遇到过很多问题，人们不小心修改了列表的共享视图而不是个人视图......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T02:23:20.107

我们经历过同样的行为。没有解决方案，但 Last Modified 字段似乎也是如此。

# unit-testing - ReSharper 单元测试运行程序：支持部署项

> ID：747263
> 
> 赞同：11
> 
> 时间：2009-04-14T12:17:18.250
> 
> 标签：unit-testing, resharper

我喜欢 ReSharper 4.5 中的单元测试运行器，并且想将它与我的 MSTest 测试一起使用，但有件事让我很恼火：

在我们的一些解决方案中，我们在 .testrunco​​nfig 文件中设置了一些部署项。ReSharper 单元测试运行器似乎不尊重这一点，因此在尝试从 ReSharper 运行单元测试时出现错误。

有什么解决方法吗？

**更新：**

*citizenmatt*的回答是正确的，ReSharper 的“选项”对话框中存在将 .testrunco​​nfig 与 ReSharper 一起使用的选项。您必须在列表中选择单元测试提供程序，然后会出现执行此操作的控件。（这并不明显或可发现，至少对我来说不是;-)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-14T22:33:45.930

你看过单元测试选项页面吗？有一个设置允许您使用指定的测试运行配置，或元数据文件中指定的测试运行配置。我不确定这意味着什么——我从未使用过它——但听起来它可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T12:28:41.733

为什么不使用测试项目的 Post-Build 事件？将所有可部署项目放入 .BAT (.cmd) 文件中，并在构建后事件中调用它以部署所有内容。

# vb.net - 您如何处理在您自己的班级中在您的班级中提出的事件？

> ID：747265
> 
> 赞同：3
> 
> 时间：2009-04-14T12:17:40.857
> 
> 标签：vb.net, event-handling

我在 VB.NET 中有一个“部分”类。其中一半是由代码生成工具自动生成的。那一半实现了 INotifyPropertyChanged，因此分部类的该部分中的任何属性都会引发 PropertyChanged 事件。

在类的“自定义”部分中，我声明了另一个属性，该属性依赖于自动生成端中的一个属性。因此，当自动生成的属性发生更改时，我还想在依赖于它的自定义属性上引发 PropertyChanged 事件。

如果我进入类的生成部分并在那里引发事件，如果我重新生成该部分，它将被覆盖，所以我不想这样做。我宁愿在分部类的我这边添加一个事件处理程序，检查生成的属性是否更改，如果是，则为我的自定义属性引发另一个事件。

我试图写这个来挂钩我自己的事件，但它不起作用：

```
Private Sub MyProperty_PropertyChangedHandler( _
        ByVal sender As Object, ByVal e As PropertyChangedEventArgs _
        ) Handles Me.PropertyChanged
    Select Case e.PropertyName
        Case "AutoGenProperty"
            RaiseEvent PropertyChanged(Me, _
                New PropertyChangedEventArgs("MyProperty"))
    End Select
End Sub 
```

我假设这是因为通常您会使用 WithEvents 关键字来告诉编译器您正在订阅来自该对象的事件。我不知道如何在实际引发事件的类中执行此操作，或者是否有可能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-14T12:22:11.483

在您的构造函数中，您需要以下内容

```
AddHandler PropertyChanged, addressof MyProperty_PropertyChangedHandler 
```

并从您的事件处理程序中删除“Handles Me.PropertyChanged”，基本上是您手动添加事件处理程序

其中“PropertyChanged”是您要捕获的事件的名称。

**更新**

您不能这样做，因为 ctor 在类的自动生成部分中。因此，您可以使用以下成语为您添加处理程序。您将在类中指定一个私有类，并将其作为新类的私有成员放入，当构造私有成员时，您将添加事件的处理程序。

```
Public Partial MyClass
    private class MyInitialiser
       public sub new(byval myParent as MyClass)
          Addhandler myParent.PropertyChanged, addressof myParent.MyProperty_PropertyChangedHandler
       end sub
    end class
    private _myInitialiser as new MyInitialiser(me)
. . .
End Class 
```

以上内容未经测试，但我之前已经做过很多次了。

希望能帮助到你 ：）

# sockets - socket.SO_REUSEADDR：每个 vs 最新侦听器收到的数据包

> ID：747272
> 
> 赞同：2
> 
> 时间：2009-04-14T12:19:15.237
> 
> 标签：sockets, multicast

我有多个进程在订阅多播地址的同一端口上侦听。到该地址的数据包到达每个进程。但是，当我通过单播联系他们时，只有最新的进程会收到消息。这种行为记录在哪里？我怎样才能改变它？

演示程序（Python）：

```
import socket,os,struct,sys

def server():
    sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
    sock.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
    sock.bind(('', 4242))

    mreq = '\xef\x01\x02\x03' + struct.pack('=I', socket.INADDR_ANY)
    sock.setsockopt(socket.IPPROTO_IP, socket.IP_ADD_MEMBERSHIP, mreq)

    while True:
        d = sock.recvfrom(1024)
        print('[s' + str(os.getpid()) + '] ' + repr(d))

def client():
    caddr = '239.1.2.3'
    caddr = '127.0.0.1' # Uncomment this and all servers print
    csock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
    csock.sendto('data from ' + str(os.getpid()), 0, (caddr, 4242))

def main():
    if sys.argv[1] == 's':
        server()
    else:
        client()

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-14T18:12:09.257

MSDN 指出，多个套接字正在侦听同一端口以获取单播消息的行为是未定义的，并且无法知道哪个套接字将接收数据。我使用 C++ 和 winsock2.2 测试了类似的设置，结果与我在 python 下运行程序时的结果相似（即进程阻塞效果）。

[这是 MSDN 文章](http://msdn.microsoft.com/en-us/library/ms740621(VS.85).aspx)

# .net - 转很简单的表达式 > 进入 SQL where 子句

> ID：747286
> 
> 赞同：2
> 
> 时间：2009-04-14T12:24:35.847
> 
> 标签：.net, sql, linq, linq-to-sql, lambda

我有许多不同的数据源需要查询，并且能够将所有查询限制为非常简单的表达式，条件不超过 2 个。我的 Lamba 表达式的典型复杂性示例是：

```
b => b.user == "joe" && b.domain == "bloggs.com" 
```

在我的非 SQL 数据源上我很好，因为我可以将它们转换为对象列表并使用 LINQ 查询，例如：

```
public override T Get(List<T> assets, Expression<Func<T, bool>> whereClause)
{
    return assets.Where(a => whereClause.Compile()(a)).FirstOrDefault();
} 
```

我的问题是当我需要查询关系数据库时——我只关心 Postgresql 和 MySQL——我一直在苦苦挣扎。我已经让 nHibernate 到 Linq “工作”，但是遇到了一些问题，它停止并停止访问数据库或无法关闭连接，这是 beta 版中典型的事情，所以我没有抱怨。

因为我的查询非常简单，而且我很高兴自己构建 SQL，所以我想知道是否有一种相对轻松的方法可以将我的 Expression 转换为 SQL where 子句？

我快速搜索并找到了一些示例，当然已经有一些 Linq-to-SQL 引擎，所以我知道它可以完成。问题是我是否可以在一天或更少的努力中完成？这就是我估计我需要找到一个兼容的 Linq-to-SQL 库并对其进行负载测试，假设它工作正常。我确实有很大的性能考虑，所以我更喜欢原始 SQL，而不是通过 ORM 运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-14T12:27:53.233

编写 LINQ 提供程序可能*非常*困难。我建议查看这些链接：

> [用于 MySql、Postgres、Oracle 的 Linq 提供程序](http://code2code.net/DB_Linq/)（这是开源的）
> [编写自定义 LINQ 提供程序](http://weblogs.asp.net/mehfuzh/archive/2007/10/04/writing-custom-linq-provider.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-14T14:05:40.970

根据您只想从 lambda 构建 SQL WHERE 子句的评论，让我们看一下 WHERE 子句。我将在完整的 SELECt 语句的上下文中使用它，但更新和删除是相同的。

一个例子

```
SELECT * FROM b
WHERE b.user == 'joe' AND b.domain == 'bloggs.com' 
```

如您所见，构建 where 子句将非常容易：

我认为 b 是表的名称。然后，您只需：

*   切断“=>”运算符之前的所有内容，包括“=>”运算符
*   将所有运算符从 lambda 更改为 SQL 语法：'==' 变为 '='。
*   将 '&&' 更改为 AND 和 '||' 或
*   在字符串操作中相应地更改撇号 (" -> ')。

您可以使用括号对您的逻辑进行分组。使用 LIKE 在字符串中查找子字符串。查看[此站点](http://www.w3schools.com/Sql/sql_where.asp)以了解 where 子句的语法。

使用字符串替换来做魔术：

```
str = str.Replace("==", "="); 
```

# php - 将图像放在登录凭据下的其他计算机上

> ID：747288
> 
> 赞同：0
> 
> 时间：2009-04-14T12:24:43.910
> 
> 标签：php, web-applications, symfony1

我有一个应用程序服务器，一个数据库服务器和一个文件服务器，文件服务器有自己的子域名（即，`file.myexample.com`）

文件服务器存储应用程序中使用的所有图像，关键是我不希望用户在未获得适当身份验证的情况下查看这些图像。所以从某种意义上说，这些图片资源的访问必须经过适当的认证，这意味着只有登录用户才能访问这些图片。如果匿名用户输入图像的 URL，Web 应用程序应将他重定向到登录页面。

我正在寻找 PHP 和 Symfony 示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-14T12:27:41.017

使用 PHP 页面获取图像，即 image.php?id=2345

在此页面的代码中，您可以检查用户的身份验证，如果允许，则重新发送图像。您需要指定正确的 mime 类型。

# configuration - 如何管理单个 Haskell 程序的多个配置？

> ID：747289
> 
> 赞同：5
> 
> 时间：2009-04-14T12:25:04.457
> 
> 标签：configuration, haskell, build-automation, conditional-compilation

Haskell世界中自动工具的替代品是什么？我希望能够在相同源代码的不同配置之间进行选择。

例如，在 Haskell 中至少有两种 MD5 实现：`Data.Digest.OpenSSL.MD5`和`Data.Digest.Pure.MD5`. 我想以这样一种方式编写代码，它可以确定已经安装了哪个库，并且不需要安装另一个。

在 CI 中可以使用 Autotools/Scons/CMake + `cpp`。在 Python 中，我可以捕获`ImportError`. 我应该在 Haskell 中使用哪些工具？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-04-14T13:04:26.110

在 Haskell 中，您使用 Cabal 配置。在您的项目顶级目录中，放置一个扩展名为 的文件`.cabal`，例如`<yourprojectname>.cabal`. 内容大致如下：

```
Name:                myfancypackage
Version:             0.0
Description:         myfancypackage
License:             BSD3
License-file:        LICENSE
Author:              John Doe
Maintainer:          john@example.com
Build-Type:          Simple
Cabal-Version:       >=1.4

Flag pure-haskell-md5
  Description: Choose the purely Haskell MD5 implementation
  Default: False

Executable haq
  Main-is:           Haq.hs
  Build-Depends:     base-4.*
  if flag(pure-haskell-md5)
    Build-Depends:   pureMD5-0.2.*
  else
    Build-Depends:   hopenssl-1.1.* 
```

[Cabal 文档](http://www.haskell.org/cabal/release/cabal-latest/doc/users-guide/authors.html)有更多详细信息，特别是有关[配置](http://www.haskell.org/cabal/release/cabal-latest/doc/users-guide/authors.html#configurations)的部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-14T14:46:01.530

正如 nominolo 所说，Cabal 是使用的工具。特别是“配置”语法。

# computer-science - 我应该知道哪些计算机科学概念？

> ID：747292
> 
> 赞同：96
> 
> 时间：2009-04-14T12:27:32.797
> 
> 标签：computer-science

您认为计算机科学中的哪些概念使您成为更好的程序员？

我的学位是机械工程，所以最终成为一名程序员，我有点缺乏基础知识。我最近学到了一些标准的 CS 概念，这些概念让我对自己正在做的事情有了更深入的了解，特别是：

**语言特点**

*   指针和递归（感谢 Joel！）

**数据结构**

*   链表
*   哈希表

**算法**

*   冒泡排序

显然，目前该列表有点短，所以我希望得到以下建议：

1.  我应该理解哪些概念，
2.  任何可以正确理解它们的好资源（因为维基百科有时可能有点密集和学术性）。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2009-04-14T12:31:25.893

看看 Steve Yegge（以前在亚马逊，现在在谷歌）的这篇博文：

*   [五个基本的电话屏幕问题](http://steve.yegge.googlepages.com/five-essential-phone-screen-questions)

它详细介绍了开发人员应该了解的五个最重要的概念：

1.  基本编程（包括递归、文件 I/O、格式化输出、循环等）
2.  面向对象的设计（包括设计模式等）。您应该能够产生明智的 OO 设计以及理解这些概念。
3.  脚本和正则表达式。
4.  数据结构——列表、集合、哈希表、树、图等等——以及大 O 表示法和算法复杂性。
5.  位、字节和二进制数——数字在计算机中的表示方式，以及如何操作它们。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2009-04-14T12:31:58.637

您绝对应该了解算法的[Big-O](http://en.wikipedia.org/wiki/Big-O_notation)表示法和 Big-O 估计 - 它是什么、如何使用、为什么重要、如何根据 Big-O 估计比较两种算法、如何构建 Big-O 估计对于简单的算法。

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2009-04-14T12:38:09.993

我觉得你在寻找*计算机科学*科目有点好笑，但觉得维基百科太学术了：D

无论如何，这里没有特别的顺序：

*   关系模型：[数据库系统简介](https://rads.stackoverflow.com/amzn/click/com/0321197844)
*   面向对象：[对象思维](https://rads.stackoverflow.com/amzn/click/com/0735619654)
*   复杂性和计算理论（想想图灵机和自动机）：计算理论[导论](https://rads.stackoverflow.com/amzn/click/com/0534950973)
*   一点编译器设计：[The Dragon Book](https://rads.stackoverflow.com/amzn/click/com/0321486811)，尽管这可能有点过于深入，无法满足您的需求。
*   操作系统概念：[现代操作系统](https://rads.stackoverflow.com/amzn/click/com/0136006639)
*   人际交往技巧：[如何赢得朋友和影响他人](https://rads.stackoverflow.com/amzn/click/com/0671027034)
*   团队合作：[人件](https://rads.stackoverflow.com/amzn/click/com/0932633439)
*   用户界面设计：[囚犯正在运行庇护](https://rads.stackoverflow.com/amzn/click/com/0672326140)

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2009-04-14T13:25:22.517

一些帮助我发展的概念（智力和代码）：

*   词法分析、解析、字符串匹配、正则表达式
*   [记忆](http://perl.plover.com/MiniMemoize/memoize.html)
    *   封装/范围/封闭
    *   缓存
*   递归
*   迭代器/生成器
*   函数式编程——John Hughes 的精彩[文章](http://www.cs.chalmers.se/~rjmh/Papers/whyfp.html)让我明白了“为什么”

这些是离散数学的整个领域，但 CS 需要认真介绍：

*   矩阵/线性代数
*   图论

尽管[Mark Jason-Dominus](http://perl.plover.com/)的讲座和文章经常针对 Perl 黑客，但我认为任何程序员都会从他清晰的演示文稿和真实代码中受益，尤其是在[高阶 Perl](http://hop.perl.plover.com/book/)中。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2009-04-14T12:32:00.463

我想说的是，现在必须了解面向对象编程，即使您不需要每天都使用它。

由此，我还想说了解最常见的模式也有帮助。

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2009-04-14T13:21:01.483

我看到了几个很好的 CS 概念，但很少谈论数学。

我建议你研究**[离散数学](http://en.wikipedia.org/wiki/Discrete_mathematics)**。它有很多有用的问题，从逻辑证明开始，可以帮助您在代码中编写条件。图论和组合学也有助于解决复杂问题和优化算法。

当我们讨论数学时，线性代数通常是高级计算机图形课程的先决条件。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2009-04-14T14:53:10.450

[程序员能力矩阵](http://www.indiangeek.net/programmer-competency-matrix/)详细介绍了这一点，但我会强调几个：

*   数据结构
    *   高级数据结构，如 B 树、二项式和斐波那契堆、AVL/红黑树、展开树、跳过列表、尝试等。
*   算法
    *   Tree, Graph, 简单的贪心和分治算法，能够理解这个矩阵层级的相关性。
*   系统编程
    *   了解整个编程堆栈、硬件（CPU + 内存 + 缓存 + 中断 + 微码）、二进制代码、汇编、静态和动态链接、编译、解释、JIT 编译、垃圾收集、堆、堆栈、内存寻址……</li>
*   源代码版本控制
    *   了解分布式 VCS 系统。已试用 Bzr/Mercurial/Darcs/Git
*   构建自动化
    *   可以设置脚本来构建系统以及文档、安装程序、生成发行说明并在源代码控制中标记代码
*   自动化测试
    *   了解并能够设置自动化功能、负载/性能和 UI 测试
*   问题分解
    *   使用适当的数据结构和算法，并提出通用/面向对象的代码，这些代码封装了问题的各个方面，这些方面可能会发生变化。
*   系统分解
    *   能够可视化和设计具有多个产品线并与外部系统集成的复杂系统。还应该能够设计运营支持系统，如监控、报告、故障转移等。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2009-04-14T12:30:17.737

我发现图表和一些应用算法，如深度优先、呼吸优先搜索、最短路径等非常有用。面向对象也是一个非常普遍的概念。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2009-04-14T12:38:26.703

规则 1：**软件是知识获取**。软件意味着什么。如果您不清楚含义，请花更多时间与用户交谈以了解他们的工作。

算法和数据结构是同一枚硬币的两个方面。算法取决于数据结构，数据结构取决于算法。

尽快忘记冒泡排序。严重地。所有现代语言（Java、Python 等）都有实现比冒泡排序更好的排序的集合类。绝对没有任何情况下您应该对任何事情使用冒泡排序。您应该寻找一个包含排序方法的集合类。更好的是，您应该寻找一种完全避免排序的算法。

你必须学习几种语言。

*   编程语言（Java、Python 等）

*   外壳语言。

*   数据库语言 (SQL)

*   演示语言（HTML 和 CSS）

*   其他数据表示语言（XML、JSON）

您必须学习几种数据结构。

*   序列（列表、元组、文件）

*   分层（如 XML 和 HTML 文档，以及基本文件系统）

*   关系型（如数据库，以及带有硬链接和软链接的文件系统）

*   映射（或索引或​​关联数组），包括哈希映射和树映射

*   套

加上一些算法复杂度分析。有时称为“大 O”。为什么冒泡排序不好，因为它是**O** ( *n* ^ 2 )，而快速排序是**O** ( *n* log *n* )。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2009-04-14T17:01:16.837

那么蠕虫罐现在打开了！:)
我从电气工程开始。

**关系数据库设计：** 跟踪数据就像《幼儿园警察》中的阿诺德。
这可能是完全的混乱。必须加以控制。
如何以最少的重复信息将数据保存在最少的位置。如何让您的数据轻松且易于访问。如何控制数据增长和完整性。

**用户界面 (UI) 设计：** 这是用户**必须**访问我们正在跟踪的数据的方式。
大多数 UI 都是由开发人员设计的。因此，不幸的是，大多数 UI 与数据库设计并行。用户根本不关心数据设计。他们只是想要，他们想要什么。他们想轻松获得它。通常这需要与数据设计和用户界面有很大的分离。学会将“工程”的你与“南方的热情好客”的你分开。

**面向对象编程：** 许多语言归结为这种格式。

**并行处理 - 多线程：** 许多处理器使工作变得更快！
并行计算机已经存在了几十年。它们已经在我们的桌面上使用了一段时间了。随着“云计算”的兴起，海量并行处理不仅是强制性的，也是可取的。它非常强大！并行开发人员有很多工作潜力。

**了解业务规则：** 这可以帮助您将大量逻辑基于表。
许多 IFblock 条件可以位于业务规则表中。要更改逻辑，只需更改表中的信息。很少/没有重新编码。很少/没有重新编译。

**事件监督...方法完成工作：**
在代码中保持独立。它使其他人将来更容易进行更新。它也与模型/视图/控制器 (MVC) 框架有些相似。

PJ

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2009-04-14T12:34:40.987

对我来说，我从大学的以下课程中得到了很多

*   项目管理
*   人机交互（帮助我们极客制作更用户友好的屏幕）
*   数据库设计（包括数据库如何工作、事务日志、锁定等）
*   数据仓库
*   图形（OpenGL）
*   高级算法
*   数据结构

我希望我在大学里做过的事情

*   编译器构造
*   设计模式
*   自动机理论

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2009-04-14T16:03:01.423

**逻辑**——我只是夸大了逻辑在编程中的重要性。你说你做过机械工程，所以你必须知道数学可以让你的生活更轻松。

[命题逻辑](http://en.wikipedia.org/wiki/Propositional_logic)、[一阶逻辑](http://en.wikipedia.org/wiki/First-order_logic)、[二阶逻辑](http://en.wikipedia.org/wiki/Second-order_logic)：这些都是非常强大的工具。可能是我在大学学到的最（也是唯一）重要的东西。逻辑就像程序员的重炮——许多非常复杂的问题（以及不太复杂的问题）一旦你把它们变成有组织的逻辑形式，就会变得简单得多。就像机械工程师的线性代数一样。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2009-04-14T16:19:21.570

我认为很好地了解编译器是如何工作的。Aho 有一本关于创建编译器所用概念的经典书籍。标题是编译器：原理、技术和工具。它的别称是龙书。为了真正理解那本书，你应该了解形式语言。Hopcroft 有一本关于这方面的好书 - 自动机理论、语言和计算导论。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2009-04-14T13:48:44.943

这里已经提到了很多好的回应，但我想添加一个重要的子集，但到目前为止还没有被覆盖。

经过 15 年的本科后专业软件开发，我发现我经常使用学校中的以下一些概念：

*   一般 OO 概念和现代编程语言特性（类、数据隐藏等）。
*   算法性能指标（大 O 表示法）。在设计算法时，执行大 O 分析以确定算法的成本，并在瓶颈区域寻找更有效的替代方案。
*   链表和其他复杂的数据结构。
*   快速排序，以及不同的排序概念。
*   树和快速的树操作。

如果您的语言/平台不支持垃圾收集，内存分配和清理至关重要，并将被添加到列表中。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2009-04-14T12:33:56.493

一些操作系统概念

```
 ( memory, IO, Scheduling, process\Threads, multithreading ) 
```

[一本好书“[现代操作系统](http://www.pearsonhighered.com/educator/academic/product/0,,0130313580,00%2Ben-USS_01DBC.html)，第 2 版，Andrew S. Tanenbaum”]

计算机网络基础知识

[[塔南鲍姆](https://rads.stackoverflow.com/amzn/click/com/0133499456)的一本好书

OOPS 概念

有限自动机

一种编程语言（我先学了 C，然后学了 C++）

算法（时间\空间复杂度、排序、搜索、树、链表、堆栈、队列）

[一本好书[《算法导论](http://mitpress.mit.edu/algorithms/)》]

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2009-04-14T12:53:31.550

**封装**

[在计算机科学中，封装是将软件组件的内部机制和数据结构隐藏在定义的接口之后，这样组件（其他软件）的用户只需要知道组件做什么，而不能让自己依赖于它如何做的细节](http://en.wikipedia.org/wiki/Encapsulation_(computer_science))

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2009-04-14T14:59:08.300

我赞成离散数学。计算机科学是抽象的。学习像数学家一样思考是非常有帮助的。

我还想补充一下 S.Lott 关于语言的说法。学习一堆语言类型也很重要。不仅仅是编译 vs 脚本。但是函数式（ML、Lisp、Haskell）逻辑（Prolog）面向对象（C++、Java、Smalltalk）命令式（C、Pascal、FORTRAN 甚至）。

你知道的编程范式越多，当热门的新语言出现时，学习新语言就越容易！

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2009-08-25T20:08:13.767

力求**[低耦合、高内聚](http://www.codeodor.com/index.cfm/2009/6/17/Strive-for-low-coupling-and-high-cohesion-What-does-that-even-mean/2902)**。

[![低耦合、高内聚](https://i.stack.imgur.com/JCVVQ.jpg)](https://i.stack.imgur.com/JCVVQ.jpg)

（我从上面链接的网站上偷了这张图片）

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2009-04-14T12:34:38.257

尝试了解所有级别的编程。从最低级别（装配）到最高级别。

以递归为例，这是一个简单的功能:) 尝试学习汇编并创建一个将在汇编中使用递归的程序。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2009-04-14T12:37:36.440

这显然是对面向对象编程的良好理解、良好的指导原则（如[SOLID 原则](http://www.codetoglory.com/?p=40)）以及遵循既定模式和实践。

如果您查看 SOA 或 DDD，它们最终都会退回到某种形式的 OOP 概念。

我建议你买一些好的 OOP 书籍，然后选择一门丰富的语言，比如 C# 或 Java

[Grady Booch 的 OOP](https://rads.stackoverflow.com/amzn/click/com/020189551X)

（PHP、ruby 的人请不要投我的票，我只是举一些例子让他开始，你可以在这里提供你自己的答案和建议）

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2009-04-14T12:44:24.537

算法。

学习以一种下降的方式使用编程语言是你可以边做边学的东西，但是你自己发明所有广泛使用的算法几乎是不可能的。一个人至少应该知道什么可以做，什么不能做有一些问题。

例如，一个人根本无法编写一些带有冒泡排序的程序并期望它被认为是好的，无论代码多么好。

总结一下 - 看看[算法简介](http://en.wikipedia.org/wiki/Introduction_to_Algorithms)

不需要掌握它，只要知道发生了什么...

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2009-04-14T12:49:25.803

作为计算机科学学位的应届毕业生，我建议以下内容：

*   正如各种帖子中提到的大 O 符号

    面向对象设计

    数据结构和算法（不记得我用过的书的确切标题，如果我记得会更新）

    操作系统 [http://www.amazon.com/Modern-Operating-Systems-2nd-GOAL/dp/0130313580](https://rads.stackoverflow.com/amzn/click/com/0130313580)

    NP问题

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2009-04-14T13:08:15.897

[计算机程序的结构和解释](http://mitpress.mit.edu/sicp/full-text/book/book.html)。如果你理解了这本书，那么其他一切都可以轻松地建立在这个基础上。如果你对书中的概念有疑问，你可能是一名软件开发人员，但不是计算机科学家。

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2009-04-14T14:51:16.680

我不会告诉你任何要学习的具体概念，而是建议你对广泛的主题进行大量的轻读。不要担心对你读到的每个主题有深入的理解——在这一点上，更重要的是你能够识别出你在看什么*样*的问题，这样你就可以做一些只是——当你真正面对它时，及时学习。换句话说，如果您不知道如何解决组合数学问题，那也没关系，只要您知道的足够多，以便在需要查看可以排列一组对象或选择子集的方式时查找“组合数学” .

对于这种广泛的浏览，维基百科是一个很好的资源，特别是如果你只是开始浏览。一个更好的，特别是如果你觉得 Wikipedia 太学术或难以访问，是[C2 wiki](http://c2.com/cgi/wiki)。（有趣的是，这是Ward Cunningham 发明*的*原始 wiki）。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2009-04-14T14:05:29.363

[软件开发生命周期](http://en.wikipedia.org/wiki/Systems_Development_Life_Cycle)——需求收集、设计和分析、实施、测试、支持和维护序列。这与将这些步骤付诸实践的方法论（如瀑布和敏捷）一起也是学习的重要内容。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2009-04-14T12:53:23.063

我认为理解多线程背后的基本理论是很重要的，如果没有这些，甚至很难看出可能存在问题，直到您在周日早上 4 点在实时服务器上进行调试。

信号量、关键部分和事件。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2009-04-14T12:55:31.903

不，不是冒泡排序，而是快速排序。这是大 O 的事情 - 冒泡排序平均 O(n^2)，快速排序是 O(n*log(n))。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2009-04-14T13:15:42.010

我会说下面是最重要的东西

*   面向对象编程
*   操作系统概念
    *   进程和线程
    *   调度算法
*   数据结构
    *   数据存储和收集的类型，类型（链表、哈希、数组等）
    *   排序算法
    *   算法的复杂性

然后转到特定语言相关的东西。我希望这是有帮助的！！

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2009-04-14T13:15:59.123

我将从引用开始：

> “如果你拥有的唯一工具是一把锤子，那么你将一切都视为钉子”。（亚伯拉罕·马斯洛）

IMO 最重要的原则是了解许多不同的编程范式、语言，并充分了解您可以使用的工具。几乎可以用您选择的任何语言解决任何问题，无论是具有庞大默认库的成熟主流语言，还是像 AutoHotKey 这样的小型专业语言。程序员的首要工作是根据问题的规范确定使用什么。一些概念提供了更好的主题方法，无论您的主要目标是什么 - 复杂性、混淆、性能、可移植性、维护性、小代码量......

否则你会像一些程序员一样拼命尝试用他们专门的语言做某事，而在不同的编程环境中解决问题可能很简单。

这个建议符合当今多语言项目的趋势（以 Web 应用程序为例，它可能在单个应用程序中涉及多种语言，如 C#、JS、CSS、XPath、SQL、XML、HMTL、RegExp ......甚至不同的编程范式（例如，C# 最近从函数式编程范式中引入了一些概念，lambdas）。

所以，基本的事情是**不断学习，永远**:)

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2009-04-14T13:16:18.810

我认为**3D-Graphics**是每个人都应该学习的东西。或者至少如何正确使用齐次向量和矩阵变换。

它不仅有助于创建 3d 应用程序，而且**还有助于机械领域**，如机器人的逆运动学、计算力矩和许多其他东西。

直到我读了 3d 图形，我才完全理解线性代数，这是我上过的最好的课程之一，尽管我们的老师很糟糕。

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2009-04-14T13:17:30.073

由于具有多核（CPU 和 GPU）的机器正在成为标准，我想说包括[分布式算法](http://en.wikipedia.org/wiki/Distributed_algorithms)（从多线程到多台机器）。了解多线程和分布式处理至关重要。抱歉，该链接并没有真正提供很多帮助。

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2009-04-14T14:48:06.967

除了冒泡排序之外的任何东西：

*   堆排序
*   快速排序

最重要的是：大 O 表示法，因此您知道为什么应该使用其中一种而不是冒泡排序。

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2009-04-14T19:16:37.150

如果你要教 big-O，至少要解释一下它描述了算法的时间如何随着更大的输入而扩展——这并不意味着算法会花费更少的时间。
例如，建造金字塔是 O(n)，而对它们的照片进行排序最多是 O(n ln n)。因此，建造另一个金字塔比整理假期照片要快。

学生需要了解寄存器、缓存、主存、磁盘和网络上的操作需要多长时间。许多只教授非常高级语言的人没有概念。

（这是有人想讨论的评论）

# matlab - 如何优雅地忽略 MATLAB 函数的某些返回值

> ID：747296
> 
> 赞同：122
> 
> 时间：2009-04-14T12:28:48.783
> 
> 标签：matlab, function, return-value

是否可以从函数中获取“第 n 个”返回值，而不必为`n-1`之前的所有返回值创建虚拟变量？

假设，我在 MATLAB 中有以下函数：

```
function [a,b,c,d] = func()
a = 1;
b = 2;
c = 3;
d = 4; 
```

现在假设，我只对*第三个*返回值感兴趣。这可以通过创建一个虚拟变量来完成：

```
[dummy, dummy, variableThatIWillUse, dummy] = func;
clear dummy; 
```

但我认为这有点*丑陋*。我认为您可能可以执行以下操作之一，但您不能：

`[_, _, variableThatIWillUse, _] = func;`

`[, , variableThatIWillUse, ] = func;`

`variableThatIWillUse = func(3);`

`variableThatIWillUse = func()(3);`

有什么*优雅*的方法可以做到这一点吗？

* * *

到目前为止，最好的解决方案是简单地将`variableThatIWillUse`用作虚拟变量。这使我不必创建一个真正的虚拟变量来污染工作空间（或者我需要清除）。简而言之：解决方案是使用`variableThatIWillUse`for 每个返回值，直到有趣的返回值。之后的返回值可以简单地忽略：

```
[variableThatIWillUse, variableThatIWillUse, variableThatIWillUse] = func; 
```

我仍然认为这是非常丑陋的代码。

* * *

## 回答 #1

> 赞同：232
> 
> 时间：2009-09-10T10:56:32.387

使用 MATLAB 版本 7.9 (R2009b)，您可以使用 ~，例如，

```
[~, ~, variableThatIWillUse] = myFunction(); 
```

请注意，这`,`不是可选的。仅仅输入`[~ ~ var]`是行不通的，并且会引发错误。

有关详细信息，请参阅[发行说明](http://www.mathworks.com/access/helpdesk/help/techdoc/rn/br5fo8o-1.html#br65zmd-1)。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2009-04-14T13:04:10.790

这有点像黑客，但它有效：

首先是一个简单的示例函数：

```
Func3 = @() deal(1,2,3);
[a,b,c]=Func3();
% yields a=1, b=2, c=3 
```

现在这里的关键是，如果您在多表达式赋值的左侧使用了**两次变量，则较早的赋值会被后面的赋值破坏：**

```
[b,b,c]=Func3();
% yields b=2, c=3

[c,c,c]=Func3();
% yields c=3 
```

`[mu,mu,mu]=polyfit(x,y,n)`（只是为了检查，如果您只关心`polyfit`第三个参数，我还验证了这种技术是否有效。）

* * *

有更好的方法；请参阅[ManWithSleeve 的答案](https://stackoverflow.com/a/1404597/44330)。

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2009-04-14T15:31:59.890

如果您希望使用将变量留在位桶中的样式，那么一个合理的选择是

```
[ans, ans, variableThatIWillUse] = myfun(inputs); 
```

`ans`当然是 MATLAB 的默认垃圾变量，在会话过程中经常被覆盖。

虽然我确实喜欢 MATLAB 现在允许的新技巧，使用 a`~`来指定忽略的返回变量，但这是向后兼容性的问题，因为旧版本的用户将无法使用您的代码。

在至少发布几个 MATLAB 版本之前，我通常会避免使用类似的新东西，以确保只有很少的用户会陷入困境。例如，即使现在我发现人们仍在使用足够旧的 MATLAB 版本，以至于他们无法使用匿名函数。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2009-04-14T13:18:15.810

这是您可以使用的另一个选项。首先制作一个元胞数组来捕获所有输出（您可以使用[NARGOUT](http://www.mathworks.com/access/helpdesk/help/techdoc/ref/nargout.html)函数来确定给定函数返回多少输出）：

```
a = cell(1,3);  % For capturing 3 outputs
% OR...
a = cell(1,nargout(@func));  % For capturing all outputs from "func" 
```

然后调用函数如下：

```
[a{:}] = func(); 
```

然后只需从您想要**的 a**中删除元素，并覆盖**a**：

```
a = a{3};  % Get the third output 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2009-08-28T02:52:12.487

我写了一个第 k 个输出函数：

```
function kth = kthout(k, ffnc, varargin)
% kthout: take the kth varargout from a func call %FOLDUP
%
% kth = kthout(k, ffnc, varargin)
%
% input:
%  k                      which varargout to get
%  ffnc                   function to call;
%  varargin               passed to ffnc;
% output:
%  kth                    the kth argout;

[outargs{1:k}] = feval(ffnc, varargin{:});
kth = outargs{k};

end %function 
```

然后你可以打电话

```
val_i_want = kthout(3, @myfunc, func_input_1, func_input_2); 
```

您还可以像这样包装函数：

```
func_i_want = @(varargin)(kthout(3, @myfunc,varargin{:}));  % Assuming you want the third output. 
```

之后你使用

```
val_i_want = func_i_want(func_input_1, func_input_2); 
```

请注意，使用这样的匿名函数会产生开销，这不是我在会被调用数千次的代码中做的事情。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2010-04-16T12:49:14.747

在 MATLAB 2010a 中，我找到了一种巧妙的方式来满足您的要求。

它只是使用字符“~”（当然不带引号）作为你的虚拟变量（返回多个参数时，你想要多少就多少）。如果函数旨在处理丢失的数据，这也适用于函数的输入参数。

我不知道这是否存在于以前的版本中，但我最近才遇到它。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-03-22T13:53:39.183

您可以创建一个仅返回选定输出的函数（或匿名函数），例如

```
select = @(a,b) a(b); 
```

然后你可以这样调用你的函数：

```
select(func,2);
select(func,1:3); 
```

或者您可以将输出分配给变量：

```
output(1,2:4) = select(func,1:3); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-05-23T23:36:36.153

没有任何理由不使用 ans(n)。像这样：

```
a = rand([5 10 20 40]);

size(a);

b = ans(2); 
```

它给出 b = 10，这种方式将与所有 MATLAB 版本兼容。

此外，当您不知道会有多少参数时，这可以获取第二个输出参数！然而，如果你这样做：

```
[~, b] = size(a); 
```

那么b = 8000！（你需要以 , 结尾`~`来捕捉更多的论点！）

# math - 在 JPanel 中移动项目

> ID：747297
> 
> 赞同：0
> 
> 时间：2009-04-14T12:29:03.480
> 
> 标签：math, jpanel

我正在做一个乒乓球比赛，我正在研究移动球的机制。如果我在 x 上加 1，球向右移动 1 个像素，如果我在 y 上加 1，球向底部移动 1 个像素。如果我想以某个角度移动球怎么办 1 如何计算坐标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-14T12:50:04.803

尝试使用角度会变得比您需要的要复杂一些。对于这种动画，您通常希望使用浮点数来存储对象的 x 和 y 坐标并通过应用 x 和 y 增量来移动它（浮点数将保留在屏幕上绘制时由于舍入而丢失的位置细节）。增量表示您的对象在每个轴上移动的速度，可以是负数或正数。

对于动画的每次迭代，将 xdelta 添加到 x 坐标并将 ydelta 添加到 y 坐标。将它们四舍五入以将它们定位在屏幕上。

当您点击顶部或底部边框时，您将交换 ydelta 组件上的符号，同样交换侧边框。

您不希望始终保持相同的 x 和 y 增量，因此当物体碰到桨时，稍微修改 x 或 y 增量以改变角度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T12:36:28.470

你正在寻找线条绘制算法，比如 Bresenham 或 DDA 你可以[在这里](http://www.cs.unc.edu/~mcmillan/comp136/Lecture6/Lines.html)找到一些合理的实现当然不是画一条完整的线你会沿着这条线移动你的球但是找到要移动的线集的方式是相同的.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-14T12:37:33.397

您可能会发现[这些资源](http://processing.org/learning/)很有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-14T12:44:47.013

对于像 Pong 这样的东西，您应该研究矢量数学，但是如果您只想知道一个角度，那么您真正需要的就是[SOHCHAHTOA](http://en.wikipedia.org/wiki/SOHCAHTOA#Overview)。

# .net - Web 控件命名约定和 ReSharper

> ID：747302
> 
> 赞同：2
> 
> 时间：2009-04-14T12:30:34.990
> 
> 标签：.net, asp.net

最近我安装了[ReSharper](http://en.wikipedia.org/wiki/ReSharper) 4.5。它有一个很酷的检查命名约定的新功能，但是在我的 aspx 文件中弹出了很多警告消息，建议在所有 Web 控件名称前加上“_”，因为它是成员字段。您更喜欢 Web 控件的命名约定，您是否在控件名称前加上“_”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-14T12:34:40.347

这个问题已经在 SO 上以许多不同的形式提出，但不是专门针对 Web 控件。然而，普遍的智慧仍然存在：

> 只要您始终如一地使用它，您选择什么并不重要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-14T12:35:12.450

为了用户体验，我在所有 UI 元素前加上“ux”。我更喜欢 txt、lbl 等，因为它可以很容易地更改控件类型。就 ReSharper 而言，我在 ASP.NET 中工作时关闭了命名约定检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-14T13:04:46.780

ReSharper 4.5 允许您为每种实体添加多种命名样式。

因此，就像您可以添加一个*以“_”为前缀指定 UpperCamelCase的方法一样，您可以使用**txt*、*lbl*、*cbo*等前缀来指定相同的内容。但是，这有点费力并且不允许您将每个前缀限制为特定类型的 Web 控件。

我想这是 ReSharper 团队尚未解决的一件事，当然他们没有在[文档](http://www.jetbrains.com/resharper/features/coding_assistance.html#Extended_Naming_Style_Configuration)中提及此类功能。

## 编辑

目前绝对不支持 - [http://www.jetbrains.net/devnet/thread/281015](http://www.jetbrains.net/devnet/thread/281015)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-14T12:33:53.093

匈牙利符号现在通常不受欢迎，但是当您拥有包含相同数据的用户控件和数据实体时，为用户控件添加前缀可能很有用。

我为所有用户控件添加了 ux 前缀。我曾经使用 lblLabel、txtTextbox，但是如果您将其中一个更改为另一个，则会引起很多痛苦。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-14T13:04:32.647

您可以自定义 ReSharper 以打开/关闭或添加您自己的规则。

另一方面，对我来说，这并不重要，重要的是一致性。我的意思是，如果您想采用一种方法，例如为您的 UI 元素添加“Privates”前缀，然后在整个网站上遵循它。

这是你的选择，你的策略:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-07-27T15:25:34.157

您可以强制 ReSharper 全局或专门为 C# 或 VB 查询事件名称。在下面的帖子中查看我的答案：

[事件处理程序名称的 ReSharper 约定](https://stackoverflow.com/questions/2994774/resharper-conventions-for-names-of-event-handlers)

# ruby-on-rails - 时间戳看起来不同

> ID：747303
> 
> 赞同：1
> 
> 时间：2009-04-14T12:31:11.667
> 
> 标签：ruby-on-rails, formatting, timestamp

在 Rails 中，我发现控制台中的时间戳看起来与实际的 html 视图不同，即使您使用相同的代码也是如此。除非我在做一些非常愚蠢的事情：

```
>> article = News.first
=> #<News id: 1, title: "Testing", body: "yadda yadda", role_id: 1, created_at: "2009-04-12 05:33:07", updated_at: "2009-04-12 05:33:07">
>> article.created_at
=> Sun, 12 Apr 2009 05:33:07 UTC +00:00
>> article.created_at.to_date
=> Sun, 12 Apr 2009 
```

在视图中：

```
<% for article in @news %>
    <% @current_date = article.created_at.to_date %>
    <% if @current_date != @date %>
        <%= @current_date %>
        <% @date = @current_date %>
    <% end %> 
```

输出将是：

```
2009-04-14 
```

为什么格式不一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-16T05:29:15.687

在 config/initializers/time_formats.rb 中，写入：

```
Time::DATE_FORMATS[:article] = "%a, %d %B %Y" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-14T12:41:30.360

`<%=`调用对象，这导致无论它在哪里被调用`to_s`：`Date``2009-04-14`

```
>> Date.today
=> Tue, 14 Apr 2009
>> Date.today.to_s
=> "2009-04-14" 
```

我真的不知道当你不使用时会调用什么`to_s`.

**更新：**现在我知道了。如果您不使用`to_s`或等价物，`irb`请调用`inspect`日期对象：

```
>> Date.today.inspect
=> "Tue, 14 Apr 2009" 
```

**更新 2：**

您可以在视图中替换`@current_date`为`@current_date.to_s`（或`@current_date.to_s(:format)`）。格式可以是 short、long、db、long_ordinal、rfc822 或 number。

您还可以在应用程序区域设置中定义默认日期格式。

# html - 如何使我的选择器更具体？

> ID：747308
> 
> 赞同：1
> 
> 时间：2009-04-14T12:33:20.473
> 
> 标签：html, css, stylesheet

在一个页面中，我使用带有自己的样式表的标签条。此标签条使用 div 和锚点编写。

我将其他一些 div 添加到选项卡中，但它们从外部标签条继承样式表。这个新的 div 有自己的 CSS 类。

这是我的问题，有没有办法在不改变 css 结构的情况下打破这种继承？

标签的 CSS 样式：

```
div.tabs {
    padding: .5em;
}
div.tabs div.tabs {
    padding: 0;
}
div.tabs div.tabs div {
    clear: left;
    height: 4em;
    padding: .5em;
    border: 1px solid #003366;
} 
```

新添加的 div 使用此类：

```
.graphTextItem{ font-family:sans-serif; font-size:12px; border: solid 1px #78ACFF; text-align:center; width:150px; }
.graphImageItem{ border-left: solid 1px #78ACFF; border-right: solid 1px #78ACFF; text-align:center; height:70px; } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-15T01:09:02.840

您总是可以尝试为每个嵌套级别而不是所有 div 使用不同的元素：

```
<div>
   <ul>
      <li></li>
   </ul>
</div> 
```

在上面的示例中，您可以设置, 以及任何您想要的样式`div`，`ul`并且可以单独定位它们以应用样式规则。`li`继承不会有问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-14T12:35:45.570

覆盖您不需要在最具体的类中继承的每个元素。

例如在 .graphTextItem 中，覆盖高度和填充。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-14T12:37:07.547

并不真地。继承是 CSS 的一部分。如果您想要一个特定的值，请指定它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-14T12:42:15.617

通过从此样式表中删除**div解决了我的问题：**

```
div.tabs div.tabs {
    clear: left;
    height: 4em;
    padding: .5em;
    border: 1px solid #003366;
} 
```

但我还是想知道有没有办法？

# iphone - 尝试使用 TouchXML 从错误中恢复

> ID：747309
> 
> 赞同：0
> 
> 时间：2009-04-14T12:33:34.547
> 
> 标签：iphone, libxml2, touchxml

我正在尝试使用[TouchXML](http://code.google.com/p/touchcode/wiki/TouchXML)进行 XPath 查询，但如果查询失败，程序会立即崩溃。

有什么办法可以防止这种情况并继续执行程序。

我知道 TouchXML 基于[libxml2](http://www.xmlsoft.org/)并且 lib 有一个名为的选项，`XML_PARSE_RECOVER`但我不知道如何将它与 TouchXML 一起使用。

源代码

```
- (id)initWithData:(NSData *)d
{
    if (![super init])
        return nil;
    NSError *error;

    translation = [[WRTranslation alloc] init];
    parser = [[CXMLDocument alloc] initWithData:d options:0 error:&error];

    if (error)
      NSLog(@"initWithData error = true");

    return self;
}

- (void)dealloc
{
    NSLog(@"dealloc de WRTouchParser = %@", self);
    [translation release];
    [parser release];
    [super dealloc];
}

- (BOOL)queryData:(NSString *)s
{
    // Nécessaire pour faire une requête. Exemple : //x:div[@class="se"]
    NSDictionary *mappings = [NSDictionary dictionaryWithObject:@"http://www.w3.org/1999/xhtml" forKey:@"x"];
    NSArray *res = [parser nodesForXPath:s namespaceMappings:mappings error:nil];

    queryResult = [res description];

    return YES; 
} 
```

我尝试像这样进行错误的 XPath 查询：//x:div[@cla

我得到：

```
XPath error : Invalid predicate 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-09-18T13:31:50.843

我用的是普通的

```
@try {
    ...
} @catch (NSException *e) {
    ...
} 
```

# c++ - 在 Linux 上为 Windows 开发人员调试

> ID：747310
> 
> 赞同：7
> 
> 时间：2009-04-14T12:33:46.480
> 
> 标签：c++, linux, debugging

我主要在 Windows 机器上完成了基本（新手级别）软件开发，但我一直有 MS Visual Studio 来帮助我逐步完成调试过程。

然而，现在看起来我将在 Linux 上，所以为了准备好跳跃，我想确保我有一个工具/工具来帮助我逐步完成代码和调试。

不幸的是，当我口头询问人们如何在 Linux 上进行调试时，我通常会得到以下回答：“哦，我只是放了一堆打印语句。” 我的天啊！你不会说，但是是的，这就是他们的答案。

由于它在 Linux 上，并且将在 CentOS 32 位操作系统上使用 C++ 代码，我希望这是一个首选的开源解决方案。所以，我想我要求在 CentOS Linux 上用于 C++ 代码的首选 OpenSource IDE。

感谢您的任何见解和建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-14T12:37:09.560

> 好问题，当然，但它以前做过：
> 
> *   [https://stackoverflow.com/questions/408418/what-editor-ide-do-you-use-for-c-programming-on-linux-and-why-closed](https://stackoverflow.com/questions/408418/what-editor-ide-do-you-use-for-c-programming-on-linux-and-why-closed)
> *   [https://stackoverflow.com/questions/86676/is-there-a-good-and-free-ide-for-cc-in-linux](https://stackoverflow.com/questions/86676/is-there-a-good-and-free-ide-for-c-c-in-linux)
> *   [https://stackoverflow.com/questions/149321/what-ide-would-be-good-for-linux-kernel-driver-development](https://stackoverflow.com/questions/149321/what-ide-would-be-good-for-linux-kernel-driver-development)
> *   [适用于 Linux 的轻量级 IDE](https://stackoverflow.com/questions/2756/lightweight-ide-for-linux)
> *   [简单的 GUI IDE？](https://stackoverflow.com/questions/524404/simple-gui-ide)

（来自：[https](https://stackoverflow.com/questions/579219/best-unix-linux-c-debuger-ide-closed) ://stackoverflow.com/questions/579219/best-unix-linux-c-debuger-ide-closed ）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-14T13:18:34.250

几年前，我从 VS 迁移到了 emacs/make 类型的环境，而且我从未回头。

我们的想法是使用[makefile](http://en.wikipedia.org/wiki/Makefile)来处理 IDE 的项目管理方面，我使用 emacs+gdb 进行编辑和调试。你需要一段时间来适应 emacs，但如果你坚持下去，那么努力是值得的。启动 emacs 后，按“Ctrl+H”，然后按“t”，这将带您进入教程页面。

掌握基础知识后，您可以使用与任何 IDE/调试器接口类似的方式调试程序。我必须承认，即使经过这么长时间，我仍然使用我第一次迁移到 emacs 时设置的一组 VS 键映射！

```
(global-set-key [f7] 'compile)          ;; Run the compile command
(global-set-key [f4] 'next-error)       ;; The next compile error
(global-set-key [S-f4] 'previous-error) ;; The previous compile error
(global-set-key [f5] 'gdb)              ;; Start the debugger 
```

以下将“VS”键映射设置为您可能使用的不同 GDB 命令：

```
(add-hook 'gud-mode-hook
  '(lambda ()
     (define-key (current-local-map)
       [f10]
       'gud-next)
     (define-key (current-local-map)
       [f11]
       'gud-step)
     (define-key (current-local-map)
       [\S-f11]
       'gud-finish)
     (define-key (current-local-map)
       [f5]
       'gud-cont)
)) 
```

使用上面的键盘映射，我按下“f5”，提示我运行 gdb（并在这个命令中添加我希望调试的二进制文件）。加载 gdb 后，按“f5”继续，按“f10”跳过，“f11”进入，“衬衫+f11”退出。

最后，每次启动“gdb”时，它都会在您的主目录中读取一个名为“.gdbinit”的文件。一个不同的 StackOverflow 问题有这个[答案](https://stackoverflow.com/questions/427589/inspecting-standard-container-stdmap-contents-with-gdb/433917#433917)，这让我注意到 了[stl-views 。](http://www.yolinux.com/TUTORIALS/src/dbinit_stl_views-1.01.txt)[stl-views](http://www.yolinux.com/TUTORIALS/src/dbinit_stl_views-1.01.txt)是一组用于 gdb 的辅助函数，可以显示不同类型的 STL 容器的内容。可以在链接顶部找到如何使用它的说明。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-14T12:39:16.793

我建议使用[Eclipse](http://www.eclipse.org/cdt/)

Eclipse 是一个成熟的 IDE，提供大量支持。

如果你想尝试不同的东西，还有[Code::Blocks](http://www.codeblocks.org/)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-04-14T12:36:44.443

*   蚀
*   NetBeans
*   KDevelop

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-14T12:37:56.780

大多数情况下，对于与 VS 类似（？）的 IDE - 使用[Eclipse](http://www.eclipse.org/)。

请参阅[将 Microsoft VS 项目迁移到 Eclipse C/C++ Development Toolkit](http://www.ibm.com/developerworks/library/os-ecl-vscdt/index.html?ca=dgr-eclipse-1) - 将 Microsoft Visual Studio C/C++ (MSVC) 项目迁移到 Eclipse 的简要分步过程。它比较和对比了 MSVC 和 Eclipse CDT 的优点。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-04-14T12:39:19.540

总是有[GDB](http://www.gnu.org/software/gdb/)。XCode for OSX 在内部使用 GDB 进行调试。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-04-14T12:42:51.763

[Valgrind](http://valgrind.org)，它是你的朋友，可以让你免于遭受 GDB 的痛苦。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-14T12:43:20.870

[Anjuta](http://www.anjuta.org/)是一个非常棒的 GNOME IDE。对于调试，它在内部使用 GDB。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-04-15T09:11:27.347

如果您只想要一个好的调试器，请查看[DDD](http://www.gnu.org/software/ddd/)。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-07-05T18:03:40.627

在 linux 上调试时， 我使用[gdb](http://www.gnu.org/software/gdb/)和[cscope的组合。](http://cscope.sourceforge.net/)

# matrix - MPI矩阵多重编译错误：未声明

> ID：747316
> 
> 赞同：0
> 
> 时间：2009-04-14T12:34:29.287
> 
> 标签：matrix, mpi

我编写了一个 mpi 矩阵乘法程序，它使用`scanf("%d", &size)`, 指定矩阵大小，然后我定义`int matrix[size*size]`了 ，但是当我编译它时，它报告矩阵未声明。请告诉我为什么，或者我的问题是什么！

根据 Ed 的建议，我将矩阵定义更改为`if(myid == 0)`block，但得到了同样的错误！现在我发布我的代码，请帮助我找出我出错的地方！谢谢你！

```
#include "mpi.h"
#include <stdio.h>
#include <math.h>
#include <time.h>

int size;

int main(int argc, char* argv[])
     {

     int myid, numprocs;
     int *p;
     MPI_Status status;

     int i,j,k;

     MPI_Init(&argc, &argv);
     MPI_Comm_rank(MPI_COMM_WORLD,&myid);
     MPI_Comm_size(MPI_COMM_WORLD, &numprocs);

     if(myid == 0)
     {
             scanf("%d", &size);
             int matrix1[size*size];
             int matrix2[size*size];
             int matrix3[size*size];
             int section = size/numprocs;
             int tail = size % numprocs;

             srand((unsigned)time(NULL));

             for( i=0; i<size; i++)
                for( j=0; j<size; j++)
                   {
                        matrix1[i*size+j]=rand()%9;
                        matrix3[i*size+j]= 0;
                        matrix2[i*size+j]=rand()%9;
                   }   

             printf("Matrix1 is: \n"); 
             for( i=0; i<size; i++)
                {
                for( j=0; j<size; j++)
                  {
                        printf("%3d", matrix1[i*size+j]);
                  }
                printf("\n");
                }

             printf("\n");
             printf("Matrix2 is: \n");
             for( i=0; i<size; i++)
                {
                for( j=0; j<size; j++)
                {
                        printf("%3d", matrix2[i*size+j]);
                }
                printf("\n");
                }                
              //MPI_BCAST(matrix1, size*size, MPI_INT, 0, MPI_COMM_WORLD, );

              for( i=1; i<numprocs; i++)
                  {
                      MPI_Send(&size, 1, MPI_INT, i, 0, MPI_COMM_WORLD);
                      MPI_Send(&section, 1, MPI_INT, i, 0, MPI_COMM_WORLD);
                      MPI_Send(&tail, 1, MPI_INT, i, 0, MPI_COMM_WORLD);
                      MPI_Send(maxtrix2, size*size, MPI_INT, i, 0, MPI_COMM_WORLD); 

                  }

              j = 0;

              for( i=1; i<numprocs-1; i++)
                  {
                       p = &matrix1[size*section*j++];
                       MPI_Send(p, size*section, MPI_INT, i, 1, MPI_COMM_WORLD);
                  }
              p = &matrix1[size*section*j];
              MPI_Send(p, size*section+size*tail, MPI_INT, numprocs-1, 1, MPI_COMM_WORLD);

              p = matrix3;
              for( i=1; i<numprocs-1; i++)
                  {
                      MPI_Recv(p, size*section, MPI_INT, i, 1, MPI_COMM_WORLD, &status);
                      p = &matrix3[size*section*i];

                      }
              MPI_Recv(p, size*section+size*tail, MPI_INT, numprocs-1, 1, MPI_COMM_WORLD, &status);

             printf("\n");
             printf("Matrix3 is: \n");
             for( i=0; i<size; i++)
                {
                for( j=0; j<size; j++)
                {
                        printf("%2d ", matrix3[i*size+j]);
                }
                printf("\n");
                }
       }

       else if (myid > 0 && myid<numprocs-1 )
       {      
              MPI_Recv(&size, 1, MPI_INT, 0, 0,MPI_COMM_WORLD, &status);
              MPI_Recv(&section, 1, MPI_INT, 0, 0,MPI_COMM_WORLD, &status);
              MPI_Recv(&tail, 1, MPI_INT, 0, 0,MPI_COMM_WORLD, &status);
              int matrix1[size*size];
              int matrix2[size*size];
              int matrix3[size*size];

              MPI_Recv(matrix2, size*size, MPI_INT, 0, 0, MPI_COMM_WORLD, &status);
              MPI_Recv(matrix1, size*section, MPI_INT, 0, 0, MPI_COMM_WORLD, &status);   

              for( i=0; i<section; i++)
                  for( j=0; j<size; j++)
                    for( k=0; k<size; k++)
                    {
                            matrix1[i*size+j] = matrix1[i*size+k]*matrix2[k*size+j];
                    }

             MPI_Send(matrix1, size*section, MPI_INT, 0, 1, MPI_COMM_WORLD);             
       }

       else if (myid > 0 && myid == numprocs-1)
       {
              MPI_Recv(&size, 1, MPI_INT, 0, 0,MPI_COMM_WORLD, &status);
              MPI_Recv(&section, 1, MPI_INT, 0, 0,MPI_COMM_WORLD, &status);
              MPI_Recv(&tail, 1, MPI_INT, 0, 0,MPI_COMM_WORLD, &status);
              int matrix1[size*size];
              int matrix2[size*size];
              int matrix3[size*size];

              MPI_Recv(matrix2, size*size, MPI_INT, 0, 0, MPI_COMM_WORLD, &status);
              MPI_Recv(matrix1, size*section+size*tail, MPI_INT, 0, 0, MPI_COMM_WORLD, &status);

              for( i=0; i<section+tail; i++)
                  for( j=0; j<size; j++)
                    for( k=0; k<size; k++)
                    {
                            matrix1[i*size+j] = matrix1[i*size+k]*matrix2[k*size+j];
                    }

             MPI_Send(matrix1, size*section+size*tail, MPI_INT, 0, 1, MPI_COMM_WORLD);       
       }

     return 0;         
     MPI_Finalize();     

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-14T14:07:18.407

在设置矩阵的大小之前，您可能在一台机器上使用了 scanf()，但是如果矩阵的大小存储在所有机器上，则 scanf() 将不会在所有机器上运行。

如果是这种情况，在开始使用 MPI 功能之前，您必须在主进程上 scanf() 矩阵的大小，然后发送矩阵的大小（通过 COMM_WORLD.Bcast() 或其他方法）到每个过程，以便正确定义矩阵。

当然，这只是一个猜测，因为您提供的信息太少，无法做出明智的回答，所以我将寻求最可能的解释。

编辑

好的，这里有一些可以编译的更改（其中一些可能无论如何都完成了，当你粘贴它时你的代码有点有趣，可能还有其他我错过了，代码再次格式化有点有趣）

```
MPI_Send(maxtrix2, size*size, MPI_INT, i, 0, MPI_COMM_WORLD); 
```

应该

```
MPI_Send(&matrix2, size*size, MPI_INT, i, 0, MPI_COMM_WORLD); 
```

```
 int section = size/numprocs;
         int tail = size % numprocs; 
```

这些需要在第一个 if 语句之前定义，以便它们进一步工作，因此只需在 main 之后直接定义它们而不分配它们。（否则当您的其他进程尝试使用它们时它们不存在）

抱歉，我没有时间弄清楚代码并真正让它做你想做的事，但这至少应该让你可以调试可运行的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-03-03T23:16:55.457

“size”的值在编译时是未知的。因此错误。

如果您不熟悉编码，您正在读取大小的值并尝试分配它，这似乎是合乎逻辑的。事实上，这适用于 Python 等解释型语言。但是您的代码是在 C 中的。C 程序需要编译才能工作。当编译器查看您的代码时，它不知道变量“size”的值是什么。在下一条语句中，您使用的是变量“size”。因此，您正在尝试使用其值未知的变量。这就是编译器所抱怨的。

解决此问题的两种方法： 1) 声明一个足够大的矩阵，例如 1000 X 1000。在运行时，您决定要使用多少大小。但是不要给出比你在源代码中硬编码的值更多的值，即 1000 X 1000。你在这里所做的是告诉编译器为 1000 X 1000 项分配内存，但你可能会也可能不会使用整个空间。您将浪费内存，这不是一种有效的方法。

2）使用动态分配。但是，鉴于这个问题的性质，目前这对您来说可能太高级了。

# visual-studio - 如何解决此 Visual Studio 键盘映射问题？

> ID：747331
> 
> 赞同：7
> 
> 时间：2009-04-14T12:37:31.620
> 
> 标签：visual-studio, visual-studio-2008, keyboard-shortcuts

某些东西（谁知道，甚至可能是我，虽然肯定不是故意的）改变了 Visual Studio **2008**中的键盘映射，我不知道如何将其恢复为默认值。

我看到的问题的症状是，当我键入不在文件顶部的 using 语句中列出的命名空间中的类的名称时，**将该命名空间添加到文件的快捷方式（展开工具提示），也就是说，默认情况下，`Ctrl`+ （句点）`.`已更改为`Shift`++ 。`Alt``F10`**可能还有其他关键设置发生了变化，但目前这确实让我很烦。

## 我已经尝试解决问题的方法没有奏效

*   工具，选项，环境，键盘，按重置按钮。（附加映射方案设置为默认，但我也尝试过 VC #2005；都没有解决问题。）
*   工具，导入导出设置，重新导入C#开发者设置
*   `devenv /reset`
*   使用安装程序中的“修复”。

我知道我可能可以通过自定义它来修复这个键绑定，但我不想这样做。我想将**所有**键绑定规范重置为默认设置。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-08-20T13:08:34.420

我发现了问题：当我安装 F# 时， `Ctrl`+`.`被 FSI 重新映射。这就是为什么重置键映射不能解决问题：我仍然有 F#。我丢失的其他映射的答案是“由 FSI 映射的那些”（在键盘映射中键入 FSI；只有两个）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-08-20T01:24:26.090

我遇到了同样的问题，（工具-选项->键盘）`View.ShowSmartTag`是您可以手动将快捷方式重新分配给`Ctrl`+的字段`.`

我知道这是几个月后的日期，但这应该可以解决问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-14T13:40:28.580

你周围有“工作”的视觉工作室吗？您可以从该机器导出设置（仅限键盘设置）并将其导入您的机器。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-08-20T01:34:49.260

在默认的 Visual Studio 2008 C# 键绑定中，`Ctrl`+`.`和`Shift`++`Alt`都`F10`映射到显示智能标记。

[您可以在此处](http://www.microsoft.com/downloads/details.aspx?familyid=E5F902A8-5BB5-4CC6-907E-472809749973&displaylang=en)下载 Visual C# 2008 键绑定参考海报。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-14T15:07:11.040

你做了类似安装[ReSharper](http://www.jetbrains.com/resharper/)的事情吗？

如果你这样做了，你可以通过查看 Visual Studio 的选项和/或 ReSharper 的选项（现在不记得）并简单地设置它们以继续使用 Visual Studio 布局而不是加载项的选项来解决此问题.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-08-10T12:42:26.873

发生在我身上的事情......确保键盘上的“F lock”键（如果你是其中之一）是打开的......我没有缝，我把它关掉了，没有任何工作正常。（F5 - 打开打开对话框，F10 切换到拆分模式！）

# javascript - 从剪贴板解析和添加 url

> ID：747336
> 
> 赞同：0
> 
> 时间：2009-04-14T12:37:55.080
> 
> 标签：javascript, regex, url, parsing, bookmarklet

我需要一个 javascript 书签来获取剪贴板中的 url，解析出 2 个数字并创建一个新的 url，并在页面顶部添加一个链接，单击该链接时会将 url 添加到我的书签菜单中。

说我有这样的网址

```
http://www.website.com/frontpageeditor.jhtml?sectionID=2844&poolID=6276
```

```
javascript:getPoolPageUrl(9800,22713)
```

然后我需要将数字添加到这个 url

```
javascript:frames['content'].getPoolPageUrl(9800,22713)
```

然后将 url 添加到框架“内容”的顶部。

我一直在尝试这个，但我无法弄清楚。

**更新**
我已经把一些东西放在一起，向你展示我需要什么。这个虽然行不通。

任何想法为什么？

```
var url = window.clipboardData.getData('Text');
var reg = /(\d+)/g;
var matches = url.match(reg); //returns ["2844","6276"]
var newUrl = "javascript:frames['content'].getPoolPageUrl("+matches[0]+","+matches[1]+")";
var link = document.createElement('a');
link.src = newUrl;
frames['content'].document.body.appendChild(link); 
```

**Update2**
这行得通。我可以做些什么来让它变得更好？

```
var url = window.clipboardData.getData('text');
var matches = url.match(/(\d+)/g);
var link = frames['content'].document.createElement('a');
link.href = "javascript:frames['content'].getPoolPageUrl("+matches[0]+","+matches[1]+")";
link.innerHTML = document.title;
frames['content'].document.body.appendChild(link); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-14T12:56:18.127

好的，首先我认为您无法从 java 脚本中的剪贴板中检索文本，我猜如果可以的话，这将是一个主要的安全问题。

假设您有一个字符串中的剪贴板，您可以调用此函数：

```
var url = "http://www.website.com/frontpageeditor.jhtml?sectionID=2844&poolID=6276"; //clip
var reg = /(\d+)/g;
var matches = url.match(reg); //returns ["2844","6276"]
var newUrl = "javascript:frames['content'].getPoolPageUrl("+matches[0]+","+matches[1]+")";
frames['content'].document.getElementById("linkPlaceHolderWhereYouWantToAdd").href=newUrl; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-14T16:24:52.400

您正在一个文档中创建元素，然后将其附加到位于另一个文档中的子元素。这行不通。您需要在要将其添加到的文档中创建元素。

此外，a 对象没有 src 成员，它使用 href。

例如：

```
var link = frames['content'].document.createElement('a');
link.href = newUrl;
link.innerHTML = newUrl;
frames['content'].document.body.appendChild(link); 
```

但是请注意，window.clipboardData 是特定于 IE 的代码。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-04-14T16:45:11.837

JavaScript 不允许访问剪贴板的内容仅出于一个原因：安全性。

如果您不小心将信用卡号或其他一些个人身份信息复制到了剪贴板中，并且您访问了恶意网站，它很容易在您知道存在风险之前抢走您的剪贴板并将其发送到服务器。因此，浏览器开发人员明确禁止它。

# c# - 使用动态标记渲染 Dundas 控件

> ID：747346
> 
> 赞同：0
> 
> 时间：2009-04-14T12:39:35.967
> 
> 标签：c#, asp.net, controls

我正在使用 VS 2005，我想找到动态创建 Dundas 图表的最佳方法。在我的代码隐藏中，我有一个为 Dundas 图创建标记的过程。当页面呈现时，它不显示任何内容，但视图代码显示图表的标签。

我知道它可能与整个 .net 进程中的 html 渲染有关。做这个的最好方式是什么？我以各种方式创建了动态控件，但这似乎有点不同，因为我构建了一个字符串然后尝试渲染。以下是用户单击页面上的按钮时运行的基本代码。

```
 string dundasXML = "";

    dundasXML = "<DCWC:CHART id='Chart1' runat='server' RenderType='InputTag' ImageType='Png' >";
    dundasXML += "<Series>";
    dundasXML += "<dcwc:Series ChartType='SplineArea' Name='Series1'>";
    dundasXML += "<Points>";
    dundasXML += "<dcwc:DataPoint YValues='6'></dcwc:DataPoint>";
    dundasXML += "<dcwc:DataPoint YValues='9'></dcwc:DataPoint>";
    dundasXML += "<dcwc:DataPoint YValues='3'></dcwc:DataPoint>";
    dundasXML += "</Points>";
    dundasXML += "</dcwc:Series>";
    dundasXML += "</Series>";
    dundasXML += "<ChartAreas>";
    dundasXML += "<dcwc:ChartArea BorderColor='' Name='Default' BackColor='Transparent'>";
    dundasXML += "</dcwc:ChartArea>";
    dundasXML += "</ChartAreas>";
    dundasXML += "</DCWC:CHART>";

    LiteralControl l = new LiteralControl(dundasXML);

    myPanel.Controls.Add(l); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-14T12:43:08.580

您可以使用[ParseControl](http://www.webpronews.com/expertarticles/2007/01/05/aspnet-parse-controls-dynamically)方法从标记生成控件。

解析控件时，您需要在标记之前注入所需的 @Register 指令。有关如何执行此操作的说明，请参阅[本文。](http://somenewkid.blogspot.com/2006/06/implementing-raw-templating-part-1.html)

# c# - 使用 Resharper 自定义大括号格式

> ID：747351
> 
> 赞同：78
> 
> 时间：2009-04-14T12:41:13.140
> 
> 标签：c#, resharper, indentation, auto-indent

我正在使用 Resharper 4.5，并且在编写数组或对象初始化程序时需要自定义大括号格式。Resharper 支持一些样式：

*牛羚风格：*

```
int[] array = new int[]  
                  {  
                      1, 2, 3  
                  } 
```

但是我需要：

```
int[] array = new int[] 
{  
    1, 2, 3  
} 
```

有没有办法自定义这个模板？

* * *

## 回答 #1

> 赞同：165
> 
> 时间：2009-05-04T09:11:55.313

您可以自定义 ReSharper 来做到这一点，您需要执行以下操作（全部在**ReSharper -> Options -> C# -> Formatting Style**中）：

1.  在**Braces Layout**中，将*Array and object initializer*设置为**At Next line (BSD Style)**。
2.  在**Other**中，确保*Continuous line indent multiplier*设置为**1**。
3.  在**Other**中，确保*Indent 数组、对象和集合初始化程序块*未**选中**。

你应该得到你想要的风格。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-04T09:09:29.523

从 R#7.1 开始，一些 Option 属性已更改：

1.  在**Braces Layout**中，将*Array and object initializer*设置为**At Next line (BSD Style)**。
2.  在**Other**中，确保*Continuous line indent multiplier*设置为**1**。

就像在旧版本中一样

1.  在**Other**中，在*Align Multiline Constructs*确保未选中**Array、object 和 collection initializer 。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-29T19:30:56.820

这篇文章似乎有一个类似于您正在寻找的答案：

[ReSharper：修复数组和对象初始化程序缩进](http://hmemcpy.com/2009/04/resharper-fixing-array-object-initializer-indentation/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-23T15:41:35.113

（@igal 和 @mbx 之前的回答继续）

从 R# 2017.1（可能还有更早的版本）开始，请执行以下操作：

1.  在**Formatting Style -> Braces Layout**中，将*Array and object initializer*设置为**At Next line (BSD Style)**
2.  在**Formatting Style -> Other -> Indentation**中，确保将*Continuous line indent multiplier*设置为**1**
3.  在**Formatting Style -> Other -> Align Multiline Constructs**中，确保未**选中***Array、object 和 collection initializer*。如果符合相同的样式，您可能还想取消选中*匿名方法主体。*

 **** * *

## 回答 #5

> 赞同：-4
> 
> 时间：2009-04-14T16:32:58.603

据我所知你不能，Resharper 带有预定义的样式，但也许如果你创建自己的实时模板并按照你想要的方式设置它就会起作用。

希望这可以帮助。

# java - JVM实现之间的差异

> ID：747360
> 
> 赞同：18
> 
> 时间：2009-04-14T12:42:59.173
> 
> 标签：java, generics, jvm, jvm-languages, tail-call-optimization

JVM 实现有何不同（许可除外）？每个 JVM 是否都为通用处理实现类型擦除？

两者的区别在哪里：

*   JRockit
*   IBM JVM
*   太阳虚拟机
*   打开 JDK
*   停电
*   咖啡

.....用尾调用优化处理其中之一？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-04-14T14:24:44.870

JVM 实现在实现 JIT 编译、优化、垃圾收集、支持的平台、支持的 Java 版本等方面可能有所不同。它们都必须满足一组特性和行为，以便正确执行 Java 字节码。

正如您所指出的，主要区别往往在于许可。其他非技术差异往往在于免费/付费支持选项、与其他技术（通常是 J2EE 服务器）的集成以及对源代码的访问。

注意：虽然 J2EE 服务器在 JVM 上运行，但一些服务器集成了用于监视、分析和调整 JVM 性能的工具。

就技术差异而言，这些年来这些差异已经变得不那么重要了。曾几何时，IBM 和 JRockit JVM 的性能远远优于参考的 Sun 实现。这是由于运行时优化的类型、垃圾收集的差异以及本机代码的差异（以及各种类使用多少本机代码）存在显着差异。这些性能差异不再那么重要了。

一些 JVM 还包含或集成了诊断和监控工具。JRockit 包含一组用于监控 JVM 性能的工具。Sun 提供了各种基于 JMX 的工具，这些工具具有重叠的功能来做同样的事情。IBM Websphere 曾经为他们的整个 J2EE 应用程序服务器包含一组类似的工具（不确定他们是否仍然这样做，但我认为这仍然是正确的）......

一些开源 JVM 的性能往往会稍慢一些，因为它们是从头开始重新开发的。因此，他们还有更多的工作要做。大约 2 年前我最后一次检查，Blackdown 比 Sun JVM 慢得多（1.5x-2x？）。它也落后于支持的 Java 版本。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-04-14T12:48:45.913

类型擦除是一个[编译器函数](http://java.sun.com/docs/books/tutorial/java/generics/erasure.html)，因此独立于 JVM。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-14T12:50:17.907

JIT 编译是一些 JVM:s 没有的一件事。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-14T12:51:53.533

类型擦除之类的事情是由编译器完成的，以向后兼容旧的 JVM。大多数 JVM 应该支持您需要的所有功能，但有些可能比其他的更优化。我猜 Sun JVM 可能是最快的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-14T13:14:10.033

如果 JVM 声称是 Java，它必须通过 TCK，提供大量的库存功能。

区别在于非核心的地方，比如垃圾收集、Sun JVM 中的 jconsole/visualvm、预编译等。

* * *

澄清：TCK 是虚拟机必须通过的测试套件才能正式兼容 Java。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-14T15:49:56.493

Java 尚不支持尾调用优化。John Rose 正在努力将其包含在未来的版本中，并描述了该[方法以及所](http://blogs.oracle.com/jrose/entry/tail_calls_in_the_vm)涉及的一些问题。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-08-06T15:00:06.830

JVM 之间的另一个区别是未记录 API 的行为。（例如 com.sun.xxx） 例如，Sun 的 JVM 和 IBM 的 JVM 在信号处理上的行为略有不同。（IBM 的 JVM 在某些情况下不允许应用程序捕获“INT”信号。）

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2010-05-14T10:53:05.367

JVM 就像一个虚拟机，负责加载类和字节码变量，执行代码。而 Applocaion 编程接口是包的集合。和包是类的集合。Java 程序在 JVM 安装和工作的地方执行。

# xml - WCF 数组序列化

> ID：747364
> 
> 赞同：3
> 
> 时间：2009-04-14T12:44:04.113
> 
> 标签：xml, wcf

我正在使用将整数数组作为参数的 WCF OperationContract。它正在使用 basicHttpBinding。

我注意到从使用 Visual Studio“添加 Web 引用”生成的客户端生成的 SOAP 包括 xmlns，因此：

```
<ids>
  <string xmlns="http://schemas.microsoft.com/2003/10/Serialization/Arrays">100</string>
  <string xmlns="http://schemas.microsoft.com/2003/10/Serialization/Arrays">101</string>
  <string xmlns="http://schemas.microsoft.com/2003/10/Serialization/Arrays">102</string>
   ... etc
</ids> 
```

这将增加带有大数组的序列化流的大小。有没有办法消除这个 xmlns 属性？

对于 WCF 客户端，生成的 SOAP 看起来更像我所期望的：

```
<ids xmlns:a="http://schemas.microsoft.com/2003/10/Serialization/Arrays" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
  <a:string>100</a:string>
  <a:string>101</a:string>
  <a:string>102</a:string>
  ... etc..
</ids> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-16T00:03:27.797

不幸的是，这实际上是客户端代理的功能，而不是您的服务。在此示例中，您正在查看使用 XML 序列化与数据协定序列化的客户端。一种在使 XML 更紧凑方面比另一种更好。

WSE 3.0 ([链接](http://www.microsoft.com/downloads/details.aspx?FamilyID=018a09fd-3a74-43c5-8ec1-8d789091255d&displaylang=en "关联"))中的类型生成器可能会让您更幸运100% 的。

您应该让我们知道您的决定。很有意思。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-15T11:15:11.653

我对序列化不太熟悉，但这可能是 SOAP 1.1 和 1.2 之间的区别吗？我打赌你可以指定任何一种格式。是否有令人信服的理由不只使用 WCF 客户端？

# cobol - 如何使用 IEBGENER？

> ID：747367
> 
> 赞同：3
> 
> 时间：2009-04-14T12:44:43.613
> 
> 标签：cobol, mainframe, utilities, jcl

我在弄清楚如何让 IEBGENER 以我想要的方式工作时遇到了一些麻烦。我应该先说我在学术大型机上的 z/OS 环境中运行 IEBGENER。

我有三个 JCL 过程 (PROC) 内联到我正在使用的一些 COBOL 代码中，我需要 IEBGENER 作为将我的 PROC 放入“我的 MVS ID 下的永久过程库”的第一步之一，并将我的 COBOL源“进入我的 MVS ID 下的永久顺序数据集”。

讲师提到要“记住为这些数据集编码正确的 LRECL 和 BLKSIZE 信息”。

我对 IEBGENER 不是很熟悉，也没有找到任何能真正向我解释如何做我想做的事情的东西。

任何“大铁”人可以提供帮助？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-14T18:51:33.903

如前所述，IEBGENER 是一个复制程序。它接受 SYSUT1 上的输入并“生成”它以输出数据集 SYSUT2。在您的实例中，由于您要复制 2 个文件，因此最容易有 2 个 GENER 步骤，每个步骤产生一个输出数据集。

这里唯一棘手的部分是以正确的格式获取输出数据集。所以，要生成 proclib，假设它当前没有被编目，你的 SYSUT2 看起来像这样：

```
//SYSUT2  DD  DSN=&SYSUID.PROCLIB,
//            DISP=(NEW,CATLG,DELETE),
//            DCB=(RECFM=FB,LRECL=80,DSORG=PO) 
```

源输出的顺序数据集看起来相似，但 DCB 选项上没有 DSORG 子参数。那里的 PO 选项说创建一个 PDS 而不是 QSAM 文件。在现代 z/OS 安装中，不需要编码 BLKSIZE，因为如果您不指定，系统将计算最佳大小。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-14T15:32:57.313

这是如何使用 IEBGENER（如前所述，应该在 IBM 文档站点上）：

```
//COPY EXEC PGM=IEBGENER
//SYSUT1 DD DSN=MY.INPUT.FILE,DISP=SHR
//SYSUT2 DD DSN=MY.OUTPUT.FILE,DISP=NEW,SPACE=....
//SYSIN DD DUMMY 
```

IEBGENER 是“只是一个”复制程序，它所需要的只是一个输入文件、输出文件和一个控制文件

我不确定您认为什么是“特定的”，这不只是知道要使用哪些名称的问题吗？

编辑：如果你想要的是定义你的输入内联，试试这个：

```
//SYSUT1 DD *
...
/* 
```

或者更好的是，如果您的输入也包含 JCL：

```
//SYSUT1 DD DATA,DELIMITER=XX
...
XX 
```

不过，JCL 仍然不是例外。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-14T19:08:29.557

这是 IBM Z/OS 手册的链接 [http://www-03.ibm.com/systems/z/os/zos/bkserv/v1r10books.html](http://www-03.ibm.com/systems/z/os/zos/bkserv/v1r10books.html) 搜索 JCL，您会找到 JCL 的手册。IEBGENER 是 IBM 提供的复制程序，用于将数据从一个数据集（文件）复制到另一个数据集。您将拥有输入文件、输出文件和控制文件。LRECL 和 BLKSIZe 是数据集参数。如果输入文件和输出文件参数不匹配，则可能无法正确复制数据。我没有完全理解你的问题。您能否详细说明您需要使用 IEBGENER 做什么。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-06T22:18:38.340

只是为了让您不必担心 DCB 参数，从输入数据集中指向值是一个不错的技巧。

```
//STEP100  EXEC PGM=IEBGENER
//SYSPRINT DD SYSOUT=*
//SYSUT1   DD DISP=SHR,DSN=INPUT.FILE
//SYSUT2   DD DSN=OUTPUT.FILE,
//           DISP=(,CATLG,DELETE),
//           SPACE=(TRK,(300,50),RLSE),
//           DCB=*.SYSUT1
//SYSIN    DD DUMMY 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-09-28T13:15:47.927

几个小点：

> DCB=(RECFM=FB,LRECL=80,DSORG=PO)

DCB= 不再需要，只需代码

> RECFM=FB,LRECL=80,DSORG=PO

还：

> 因为记录是固定格式的，所以 BLKSIZE 必须是 80 的偶数倍。很多时候，人们使用 3120 的值。其原因隐藏在古代的迷雾中。我倾向于使用 27920，以便在 3390 设备上获得最有效的空间使用。

不必为新的 DASD（磁盘）数据集指定块大小。系统确定的块大小将自动为您提供最佳块大小（对于 3390 上的 80 的 LRECL 确实是 27920）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-29T20:24:12.260

听起来好像你的导师在提醒你给“永久过程库”和“永久序列数据集”提供正确的 LRECL 和 BLKSIZE。从历史上看，这样的数据集是 RECFM=FB，LRECL=80。

因为记录是固定格式的，所以 BLKSIZE 必须是 80 的偶数倍。很多时候，人们使用 3120 的值。其原因隐藏在古代的迷雾中。我倾向于使用 27920，以便在 3390 设备上获得最有效的空间使用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-21T17:20:37.377

IEBGENER 是 IBM 拥有的最被低估和误解的实用程序之一。

这是最佳文档的超链接：[IEBGENER](http://publibz.boulder.ibm.com/cgi-bin/bookmgr_OS390/download/DGT3U100.pdf?DT=20130819173322)。

IEBGENER 不仅仅是一个文件到文件实用程序，它只进行复制。它可以轻松、更有效地创建可变的阻止文件。它可以通过适当的缓冲实际上是您最快的文件到文件复制实用程序，因为它过去没有很好地在内部缓冲，尽管现在我相信它现在是最快的。//SYSPRINT 消息 - 可悲的是 - 非常神秘，如果不是真的很荒谬的话。许多商店都有一个称为 BETERGENER 的加速器，因为大多数程序员不知道如何缓冲 IEBGENER，而且由于 IBM 正在迎合那些希望 MVS 看起来像 Windows 并且行为像 Windows 的娇惯的新程序员，因此使用 IEBGENER 对用户来说更加友好。**呸**

# nhibernate - Only get latest results using nHibernate

> ID：747382
> 
> 赞同：1
> 
> 时间：2009-04-14T12:48:52.170
> 
> 标签：nhibernate

I have a nHibernate query like this

```
ICriteria query = session.CreateCriteria(typeof(MyResult))
            .Add(Expression.Eq("ResultTypeId", myResult.ResultTypeId)) 
```

Problem is that users add results all the time and I want to show a table of all the latest results for all the diferent ResultTypes I have.

The MyResult class has a property ResultDate. My question is, what do I add to the query to get it to only return the latest result for the given result type. There is nothing to say that the results will be in date order in the database.

Thanks,

Mark

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-14T12:58:20.243

You can order the result by ResultDate using the AddOrder method, as below:

```
ICriteria query = session.CreateCriteria(typeof(MyResult))
        .Add(Expression.Eq("ResultTypeId", myResult.ResultTypeId))
        .AddOrder(Order.Desc("ResultDate"))
        .List<MyResult>(); 
```

If you want to limit the number of MyResult instances you get back, you can use the SetMaxResults method, like so:

```
ICriteria query = session.CreateCriteria(typeof(MyResult))
        .Add(Expression.Eq("ResultTypeId", myResult.ResultTypeId))
        .AddOrder(Order.Desc("ResultDate"))
        .SetMaxResults(20)
        .List<MyResult>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T12:56:53.477

Order by `ResultDate` (descending) and select top whatever you feel appropriate.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-14T13:11:39.120

If I understand the question well, Mark wants to see an overview of all the last results for each type.

Which means that, for every result type, he only wants to see only one row, and that is the Result which has last been added for that type.

I think that, the easiest way to achieve this, would be to create an additional class, which we can call 'MyResultOverview' for instance:

```
public class MyResultOverview
{
    public int ResultId {get; set;}
    public int ResultTypeId {get; set;}
    public DateTime ResultDate {get; set;}
} 
```

This class should not be mapped, but NHibernate should be aware that this class exists. Therefore, we'll have to import it:

```
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" >
   <import class="MyResultOverview" />
</hibernate-mapping> 
```

Then, we can create an ICriteria which will populate instances of MyResultOverview (and which will also generate the most efficient SQL Query in order to get this overview). It should look something like this:

```
ICriteria criteria = session.CreateCritera (typeof(MyResult));

criteria.SetProjection (Projections.ProjectionList ()
                           .Add (Projections.Property("Id"), "ResultId")
                           .Add (Projections.Property("ResultType"), "ResultType")
                           .Add (Projections.Max("ResultDate"), "ResultDate"));

criteria.SetResultTransformer (Transformers.AliasToBean (typeof(MyResultOverview)));

IList<MyResultOverview> results = criteria.List<MyResultOverview>(); 
```

This should give you a list of MyResultOverview instances which represent the MyResults that you're looking for. Then, in order to retrieve the MyResult itself, you can simply do this by retrieving the MyResult instance for that particalur ResultId that you've retrieved as well.

I haven't tested this, nor did i compile it, but this is the path that I would follow to achieve this.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-31T09:12:45.783

In HQLthis might work:

```
select item, tag
from MyItem item
    join item.Tags tag
where tag.Id = (                                    
    select  max(tag2.Id)  
    from MyItem item2
        join item2.Tags tag2
    where item2.Id = item.Id
    group by item2.Id     
) 
```

# sql - 在 FROM 子句中引用别名为表的其他 SQL SELECT 语句

> ID：747390
> 
> 赞同：0
> 
> 时间：2009-04-14T12:49:58.983
> 
> 标签：sql, oracle

我有一个非常大的查询，遵循以下格式：

```
select ...
  from ( select field1,
                field2
           from some_table ) table1,
       ( select field1,
                field3
           from other_table ) table2

 where ..... 
```

我是否可以在 from 子句中的其他表定义之一中引用 from 子句中“定义”的表之一，比如说 table1？

例如：

```
select ....
  from ( select field1,
                field2
           from some_table ) table1,
       ( select table1.field1,
                field3
           from other_table,
                table1 ) table2

 where ..... 
```

免责声明：我想做的并不像上面的例子那么简单。这个例子只是为了说明这个想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-14T12:51:45.470

```
WITH
table1 AS
        (
        SELECT  field1, field2
        FROM    some_table
        ),
table2 AS
        (
        SELECT  field1, field2
        FROM    other_table, table1
        )
SELECT  *
FROM    table2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-14T12:52:43.923

如果您使用的是 SQL 2005，您可以使用 Common Table Expressions 来做您正在尝试的事情；Quassnoi 给我们举了一个例子，在 Oracle 中我不知道如何实现它

# passwords - 应该如何防御离线暴力密码攻击？

> ID：747394
> 
> 赞同：3
> 
> 时间：2009-04-14T12:50:47.063
> 
> 标签：passwords

我想知道加盐和散列密码是否是一种常见的做法

E（填充 || 哈希（盐 || 密码））

在哪里 || 是连接，例如 E 使用 RSA。我主要问这个问题是为了传输密码数据库（而不是在线存储，服务器将始终拥有私钥来解密加密密码）。

我知道加密哈希应该是不可逆的，但是对弱密码**的离线**暴力攻击很容易泄露密码。为了最终解密该数据库中的记录，服务器将知道填充的长度并简单地删除填充以显示哈希（盐 || 密码）。

这不是一个典型的问题，但我找不到关于有人必须正确传输密码数据库并防御**离线**攻击的参考资料。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-14T13:00:05.777

用强密码文件加密密码文件，那么密码如何存储在文件中就无关紧要了。

IE。使用 PGP 之类的东西进行传输。

我注意到这个答案在其他人投赞成票之前被投了一次，我只是想我会澄清一下，因为我怀疑投反对票的人实际上并没有阅读这个问题。另一方面，对于提出问题的人来说，可能无法对整个文件进行完全加密。如果是这样的话，这将是一个方便的澄清问题。

无论如何，这个问题特别指出这是关于*传输*数据（库）。它还特别指出，这与*在线存储和使用*无关。

因此，对整个文件使用安全可靠的加密方法确实是最好的方法，因为这样您就不必局限于必须操纵文件内容来尝试掩盖每个单独的密码。

相反，整个文件将毫无意义，如果要传输的不仅仅是密码文件，它将与更多数据集中在一起，从而与更多数据一起加密，从而使识别密码的过程几乎不可能，因为出色地。

如果你选择一个有信誉的加密算法和实现（PGP、GPG 等），那么对这种加密文件的攻击成功的可能性要小得多，而不是自己发明一些东西，或者至少让攻击者更容易找到小块的个人密码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-14T12:55:38.580

1.  使用不会出现在字典中的密码。
2.  使用[关键强化](http://en.wikipedia.org/wiki/Key_strengthening)。

或者只是加密密码数据库本身。如果您无法传输解密密钥，您可以使用公钥加密来加密解密密钥。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-14T12:57:14.520

关键是，当您在登录用户和存储密码时进行比较时，您将以相同的方式对密码进行加盐。拥有一个好的盐会阻止某人进行标准查找，它还会加强哈希以抵御字典攻击。如果盐和密码组合在一个哈希中，它将大大减少离线攻击的使用，并且您不需要采取任何特殊的预防措施来保护它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T23:15:19.357

防止暴力攻击的唯一方法是使用慢速哈希算法。现在[bcrypt](http://en.wikipedia.org/wiki/Bcrypt)或[PBKDF2](http://en.wikipedia.org/wiki/Pbkdf2)是要走的路，因为它可以配置为需要大量的 CPU 时间和大量的 RAM。随着 CPU 变得更快和内存更便宜，您只需要增加设置并减慢散列速度。

如果您每秒能猜出数百万个哈希值或只有几十个哈希值，那真的会有所作为。

CodingHorror 有一篇关于这个主题的精彩文章：http: [//www.codinghorror.com/blog/2012/04/speed-hashing.html](http://www.codinghorror.com/blog/2012/04/speed-hashing.html)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-04-14T13:59:46.117

所有其他反应都很好，但我要补充：

定期强制更改密码。

这是破坏离线暴力攻击的可靠方法。击中移动目标更难。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2009-04-14T12:54:54.917

如果您控制尝试解密数据库的功能，请在重试之间放置一个 1 秒的计时器？

那肯定会减慢蛮力的速度

# html - 在 UIWebView 中使用 HTML 和本地图像

> ID：747407
> 
> 赞同：165
> 
> 时间：2009-04-14T12:53:24.403
> 
> 标签：html, ios, iphone, uiwebview, uikit

我的应用程序中有一个 UIWebView，我想用它来显示一个链接到另一个 url 的图像。

我正在使用

```
<img src="image.jpg" /> to load the image. 
```

问题是图像没有加载（即找不到），即使它作为资源添加到我的项目中并被复制到包中。

我尝试使用 NSBundle 来获取图像的完整路径并使用它，但它仍然没有显示在 Web 视图中。

有任何想法吗？

* * *

## 回答 #1

> 赞同：293
> 
> 时间：2009-04-14T13:48:58.890

使用相对路径或文件：引用图像的路径不适用于 UIWebView。相反，您必须使用正确的 baseURL 将 HTML 加载到视图中：

```
NSString *path = [[NSBundle mainBundle] bundlePath];
NSURL *baseURL = [NSURL fileURLWithPath:path];
[webView loadHTMLString:htmlString baseURL:baseURL]; 
```

然后，您可以像这样引用您的图像：

```
<img src="myimage.png"> 
```

（从[uiwebview 重新访问](http://iphoneincubator.com/blog/windows-views/uiwebview-revisited)）

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2012-06-18T09:09:27.513

用这个：

```
[webView loadHTMLString:htmlString baseURL:[[NSBundle mainBundle] bundleURL]]; 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2012-12-05T15:29:39.547

我也遇到了这个问题。就我而言，我正在处理一些未本地化的图像，而另一些则以多种语言处理。基本 URL 没有为我获取本地化文件夹中的图像。我通过执行以下操作解决了这个问题：

```
// make sure you have the image name and extension (for demo purposes, I'm using "myImage" and "png" for the file "myImage.png", which may or may not be localized)
NSString *imageFileName = @"myImage";
NSString *imageFileExtension = @"png";

// load the path of the image in the main bundle (this gets the full local path to the image you need, including if it is localized and if you have a @2x version)
NSString *imagePath = [[NSBundle mainBundle] pathForResource:imageFileName ofType:imageFileExtension];

// generate the html tag for the image (don't forget to use file:// for local paths)
NSString *imgHTMLTag = [NSString stringWithFormat:@"<img src=\"file://%@\" />", imagePath]; 
```

然后，在加载内容时在 UIWebView HTML 代码中使用 imgHTMLTag。

我希望这可以帮助遇到同样问题的任何人。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-11-04T16:38:25.010

尝试使用 base64 图像字符串。

```
NSData* data = UIImageJPEGRepresentation(image, 1.0f);

NSString *strEncoded = [data base64Encoding];   

<img src='data:image/png;base64,%@ '/>,strEncoded 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-06-13T13:06:02.813

我有一个类似的问题，但所有的建议都没有帮助。

但是，问题出在 *.png 本身。**它没有阿尔法通道**。不知何故**，Xcode**在部署过程中会忽略所有没有 alpha 通道的 png 文件。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-05-30T01:52:43.710

在斯威夫特 3 中：

```
webView.loadHTMLString("<img src=\"myImg.jpg\">", baseURL: Bundle.main.bundleURL) 
```

即使图像位于文件夹中而没有任何修改，这也对我有用。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-12-30T20:28:05.560

***您可以通过选择Add Files to "MyProj"***并选择***Create folder references***将文件夹（例如带有子文件夹 css、img 和 js 以及文件 test.html 的 WEB）添加到您的项目中。现在下面的代码将处理所有引用的图像、css 和 javascript

```
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"WEB/test.html" ofType:nil];
[webView  loadRequest:[NSURLRequest requestWithURL:[NSURL fileURLWithPath:filePath]]]; 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-02-02T16:28:29.147

在阅读了 iOS 6 Programming Cookbok 中的几章并开始学习 Objective-c 和 iOS 编程之后，我想补充一点，如果要从*自定义*包中加载资源并在 Web 视图中使用它，可以这样实现：

```
NSString *resourcesBundlePath = [[NSBundle mainBundle] pathForResource:@"Resources" ofType:@"bundle"];
NSBundle *resourcesBundle = [NSBundle bundleWithPath:resourcesBundlePath];
[self.outletWebView loadHTMLString:[html description] baseURL:[resourcesBundle bundleURL]]; 
```

然后，在您的 html 中，您可以使用“自定义”捆绑包作为基本路径来引用资源：

```
body {
    background-image:url('img/myBg.png');
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-11-28T09:44:37.087

**Lithu TV 的 Swift 版本的回答：**

```
webView.loadHTMLString(htmlString, baseURL: NSBundle.mainBundle().bundleURL) 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-01-28T21:46:10.750

Adam Alexanders Objective C 的 Swift 版本答案：

```
let logoImageURL = NSURL(fileURLWithPath: "\(Bundle.main.bundlePath)/PDF_HeaderImage.png") 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-12-17T16:57:17.357

如果您使用图像的相对链接，则图像将不会显示，因为在 iOS 应用程序编译后不会保留所有文件夹结构。您可以做的是通过添加“ **.bundle** ”文件扩展名将您的本地 Web*文件夹*转换为一个*包。*

 **因此，如果您的本地网站包含在文件夹“ **www** ”中，则应将其重命名为“ **www.bundle** ”。这允许保留图像文件夹和目录结构。然后将“ **index.html ”文件作为带有“** **baseURL** ”（设置为 www.bundle 路径）的 HTML 字符串加载到 WebView 中，以启用加载相关图像链接。

```
NSString *mainBundlePath = [[NSBundle mainBundle] resourcePath];
NSString *wwwBundlePath = [mainBundlePath stringByAppendingPathComponent:@"www.bundle"];
NSBundle *wwwBundle = [NSBundle bundleWithPath:wwwBundlePath];
if (wwwBundle != nil) {
    NSURL *baseURL = [NSURL fileURLWithPath:[wwwBundle bundlePath]];
    NSError *error = nil;
    NSString *page = [[NSBundle mainBundle] pathForResource:@"index.html" ofType:nil];
    NSString *pageSource = [NSString stringWithContentsOfFile:page encoding:NSUTF8StringEncoding error:&error];
    [self.webView loadHTMLString:pageSource baseURL:baseURL];
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-01-25T15:04:36.947

这些答案确实帮助了我——特别是文件：\\xxxxxxx.xxx，但我必须做一个解决方法来显示图像。

就我而言，我的服务器上有一个 HTML 文件，我将其下载到文档目录中。我希望它在我无法开始工作的 UIWebView 中显示本地图形。这是我所做的：

1.  将文件从 NSBundle 复制到本地文档目录
2.  将我的 HTML 文档中的文件引用为“file:\\filename.png”

所以在启动时将文件复制到文档目录：

```
-(BOOL)copyBundleFilesToDocumentsDirectoryForFileName:(NSString *)fileNameToCopy OverwriteExisting:(BOOL)overwrite {
        //GET DOCUMENTS DIR
        //Search for standard documents using NSSearchPathForDirectoriesInDomains
        //First Param = Searching the documents directory
        //Second Param = Searching the Users directory and not the System
        //Expand any tildes and identify home directories.
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *documentsDir = [paths objectAtIndex:0];

        //COPY FILE FROM NSBUNDLE File to Local Documents Dir
        NSString *writableFilePath = [documentsDir  stringByAppendingPathComponent:fileNameToCopy];

        NSFileManager *fileManager = [NSFileManager defaultManager];
        NSError *fileError;

        DDLogVerbose(@"File Copy From Bundle to Documents Dir would go to this path: %@", writableFilePath);

        if ([fileManager fileExistsAtPath:writableFilePath]) {
            DDLogVerbose(@"File %@ already exists in Documents Dir", fileNameToCopy);

            if (overwrite) {
                [fileManager removeItemAtPath:writableFilePath error:nil];
                DDLogVerbose(@"OLD File %@ was Deleted from  Documents Dir Successfully", fileNameToCopy);
            } else {
                return (NO);
            }
        }

        NSArray *fileNameParts = [fileNameToCopy componentsSeparatedByString:@"."];
        NSString *bundlePath = [[NSBundle mainBundle]pathForResource:[fileNameParts objectAtIndex:0] ofType:[fileNameParts objectAtIndex:1]];
        BOOL success = [fileManager copyItemAtPath:bundlePath toPath:writableFilePath error:&fileError];

        if (success) {
            DDLogVerbose(@"Copied %@ from Bundle to Documents Dir Successfully", fileNameToCopy);
        } else {
            DDLogError(@"File %@ could NOT be copied from bundle to Documents Dir due to error %@!!", fileNameToCopy, fileError);
        }

    return (success);
} 
```

* * *

## 回答 #13

> 赞同：-8
> 
> 时间：2013-03-31T12:24:29.790

我的 rss-feed（获取 RSSItems）的复杂解决方案（或教程）仅适用于设备：

```
#define CACHE_DIR       [NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES) lastObject]

for (RSSItem *item in _dataSource) {

    url = [NSURL URLWithString:[item link]];
    request = [NSMutableURLRequest requestWithURL:url];
    [request setHTTPMethod:@"GET"];

    [NSURLConnection sendAsynchronousRequest:request
                                       queue:queue
                           completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {

                               @autoreleasepool {

                                   if (!error) {

                                       NSString *html = [[NSString alloc] initWithData:data
                                                                              encoding:NSWindowsCP1251StringEncoding];

                                       {
                                           NSError *error = nil;

                                           HTMLParser *parser = [[HTMLParser alloc] initWithString:html error:&error];

                                           if (error) {
                                               NSLog(@"Error: %@", error);
                                               return;
                                           }

                                           HTMLNode *bodyNode = [parser body];

                                           NSArray *spanNodes = [bodyNode findChildTags:@"div"];

                                           for (HTMLNode *spanNode in spanNodes) {
                                               if ([[spanNode getAttributeNamed:@"class"] isEqualToString:@"page"]) {

                                                   NSString *absStr = [[response URL] absoluteString];
                                                   for (RSSItem *anItem in _dataSource)
                                                       if ([absStr isEqualToString:[anItem link]]){

                                                           NSArray *spanNodes = [bodyNode findChildTags:@"img"];
                                                           for (HTMLNode *spanNode in spanNodes){
                                                               NSString *imgUrl = [spanNode getAttributeNamed:@"src"];
                                                               if (imgUrl){
                                                                   [anItem setImage:imgUrl];
                                                                   break;
                                                               }
                                                           }

                                                           [anItem setHtml:[spanNode rawContents]];
                                                           [self subProcessRSSItem:anItem];
                                                       }
                                               }
                                           }

                                           [parser release];
                                       }

                                       if (error) {
                                           NSLog(@"Error: %@", error);
                                           return;
                                       }

                                       [[NSNotificationCenter defaultCenter] postNotificationName:notification_updateDatasource
                                                                                           object:self
                                                                                         userInfo:nil];

                                   }else
                                       NSLog(@"Error",[error userInfo]);
                               }
                           }]; 
```

和

```
- (void)subProcessRSSItem:(RSSItem*)item{

NSString *html = [item html];
if (html) {

    html = [html stringByReplacingOccurrencesOfString:@"<div class=\"clear\"></div>"
                                           withString:@""];

    html = [html stringByReplacingOccurrencesOfString:@"<p class=\"link\">"
                                           withString:@""];

    html = [html stringByReplacingOccurrencesOfString:@"<div class=\"page\">"
                                           withString:@""];

    html = [html stringByReplacingOccurrencesOfString:@"</div>"
                                           withString:@""];

    NSArray *array1 = [html componentsSeparatedByString:@"<a"];
    if ([array1 count]==2) {
        NSArray *array2 = [html componentsSeparatedByString:@"a>"];

        html = [[array1 objectAtIndex:0] stringByAppendingString:[array2 objectAtIndex:1]];
    }

    NSURL *url;
    NSString *fileName;
    NSString *filePath;
    BOOL success;
    if ([item image]) {

        url = [NSURL URLWithString:
                      [hostString stringByAppendingString:[item image]]];
        NSData *imageData = [NSData dataWithContentsOfURL:url];

        fileName = [[[url relativePath] componentsSeparatedByString:@"/"] lastObject];

        filePath = [NSString stringWithFormat:@"%@/%@",
                              CACHE_DIR,
                              fileName];

        //save image locally
        success = [[NSFileManager defaultManager] createFileAtPath:filePath
                                                               contents:imageData
                                                             attributes:nil];

        //replace links
        html = [html stringByReplacingOccurrencesOfString:[item image]
                                               withString:filePath];

        [item setImage:fileName];

        //Передадим обновление интерфейса, снабдив индексом обновляемой ячейки
        [[NSNotificationCenter defaultCenter] postNotificationName:notification_updateRow
                                                            object:self
                                                          userInfo:[NSDictionary dictionaryWithObject:@([_dataSource indexOfObject:item])
                                                                                               forKey:@"row"]];
    }

    //finalize html
    html = [NSString stringWithFormat:@"<html><body>%@</body></html>",html];

    fileName = [[[item link] componentsSeparatedByString:@"/"] lastObject];
    filePath = [NSString stringWithFormat:@"%@/%@",
                CACHE_DIR,
                fileName];
    success = [[NSFileManager defaultManager] createFileAtPath:filePath
                                                      contents:[html dataUsingEncoding:NSUTF8StringEncoding]
                                                    attributes:nil];

    [item setHtml:
     (success)?filePath:nil];//for direct download in other case
} 
```

}

在视图控制器上

```
- (void)viewDidAppear:(BOOL)animated{

RSSItem *item = [[DataSingleton sharedSingleton] selectedRSSItem];

NSString* htmlString = [NSString stringWithContentsOfFile:[item html]
                                                 encoding:NSUTF8StringEncoding error:nil];
NSURL *baseURL = [NSURL URLWithString:CACHE_DIR];

[_webView loadHTMLString:htmlString
                 baseURL:baseURL]; 
```

}

RSS项目类

```
#import <Foundation/Foundation.h>

@interface RSSItem : NSObject

@property(nonatomic,retain) NSString *title;
@property(nonatomic,retain) NSString *link;
@property(nonatomic,retain) NSString *guid;
@property(nonatomic,retain) NSString *category;
@property(nonatomic,retain) NSString *description;
@property(nonatomic,retain) NSString *pubDate;
@property(nonatomic,retain) NSString *html;
@property(nonatomic,retain) NSString *image;
@end 
```

任何带有图像的 html 的一部分

```
<html><body>
<h2>blah-blahTC One Tab 7</h2>
<p>blah-blah НТС One.</p>
<p><img width="600" height="412" alt="" src="/Users/wins/Library/Application Support/iPhone Simulator/5.0/Applications/2EAD8889-6482-48D4-80A7-9CCFD567123B/Library/Caches/htc-one-tab-7-concept-1(1).jpg"><br><br>
blah-blah (Hasan Kaymak) blah-blah HTC One Tab 7, blah-blah HTC One. <br><br>
blah-blah
 microSD.<br><br>
blah-blah Wi-Fi to 4G LTE.</p>
</p>
</body></html> 
```

为名称**htc-one-tab-7-concept-1(1).jpg保存的图像**

# javascript - 重新格式化输入字段

> ID：747409
> 
> 赞同：0
> 
> 时间：2009-04-14T12:54:49.003
> 
> 标签：javascript, html, forms

我想在提交时重新格式化 HTML 表单域的内容。

例如：用户输入“ `1.234,56`”（这是该语言环境中数字的有效格式），但我想将值“ `1234.56`”提交给服务器。

我想听听其他人的经验。你怎么做到这一点？

我的第一个想法是 onSubmit 事件，它重新格式化内容。但是有没有人对此有任何实施经验？

或者也许是一个更好的主意？

* * *

Javascript 始终可用。如果使用 Dojo 更容易，我可以使用它。

顺便说一句：它实际上有点复杂，因为我也想重新格式化“模糊”。所以用户输入“ `1234,56`”（输入格式）。当焦点改变时，它应该重新格式化为“ `1.234,56`”（显示格式）。但是发送到服务器的实际值应该是“ `1234.56`”（机器格式）。
输入格式和显示格式之间的转换应该很容易，但也许所有这些都可以通过一些巧妙的方式组合起来。

* * *

**编辑：**这不适用于公共网站，因此关于依赖 Javascript 和类似网站的意见不相关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-14T12:59:25.483

好吧，想到的一个想法可能是专门使用 Javascript，并将实际输入的值存储到隐藏字段中。然后捕获文本框的 onBlur Javascript 事件以调用根据您的要求格式化值的函数。

最后，在提交表单时，访问隐藏字段中存在的值，而不是文本框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T13:31:58.413

鉴于这些信息，我可能会执行以下操作：

模糊处理程序应该

1.  获取输入
2.  验证输入 - 它是一个数字吗？是否在范围内？等等
3.  转换为标准化形式以供显示 (1.234,56)
4.  将表单的 [input] 的值设置为规范化表单

提交处理程序应该

1.  获取输入
2.  验证输入 - 同上
3.  从特定于语言环境的值转换为服务器上所需的值。
4.  将表单的 [input] 的值设置为转换后的值。
5.  提交表格。

请记住，无论您进行多少客户端验证，您仍然需要进行服务器端验证。但我会尽可能多地在 Javascript 中进行验证，因为我更愿意让用户知道他的表单值将失败，而不必先对服务器这样做。

此外，我可能会更改服务器端操作，以便能够处理许多语言环境中的金额。这会给我在 Javascript 中的提交处理程序上更多的回旋余地。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-14T13:00:43.483

你问这个问题的方式，你基本上想在客户端进行验证，这在任何情况下都应该是不可行的。只需提交号码并使用特定于语言环境的处理在服务器端验证它。如果您想立即获得反馈，请使用 AJAX，但在服务器端进行验证——您可以使用 AJAX 请求执行 onBlur()。

# wpf - WPF 渲染在 Vista 上丑陋且模糊

> ID：747416
> 
> 赞同：3
> 
> 时间：2009-04-14T12:56:04.927
> 
> 标签：wpf, windows-vista, windows-xp

谁能解释为什么这个简单的 WPF 应用程序在 Vista 上看起来如此糟糕？我试过设置 SnapsToDevicePixels，但这没什么区别。这是一个干净的 WPF 应用程序，除了一个按钮之外没有添加任何内容。使用 VS 2008 SP1。在 IDE 中它看起来很完美，但是在运行时它被搞砸了。我在这台机器上运行的所有 WPF 应用程序都表现出这种行为。

关于非常奇怪的事情：如果我打开 Vista 放大镜应用程序，那么渲染就正确了。想知道这是否是我的视频驱动程序（Geforce 8600）。

在 XP 上：

[XP 上的 WPF 按钮 http://img206.imageshack.us/img206/7339/wpfbuttonxp.png](http://img206.imageshack.us/img206/7339/wpfbuttonxp.png)

在 Vista 上：

[Vista 上的 WPF 按钮 http://img23.imageshack.us/img23/5660/wpfbuttonvista.png](http://img23.imageshack.us/img23/5660/wpfbuttonvista.png)

项目来源：[UglyButton.zip](http://rogojin.googlepages.com/UglyButton.zip)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-14T13:27:15.743

为什么 Vista 会有所作为，我不知道...由于某种原因，我实际上并没有看到您的图像，但我在 WPF 中通常遇到像素对齐和抗锯齿问题，这个[问题/答案](https://stackoverflow.com/questions/467331/anti-aliasing-artifacts-in-wpf)可能为您提供一些帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T15:03:44.123

升级我的视频卡驱动程序解决了这个问题。我的卡是 Geforce 8600 GT。以前的驱动程序是 78.13 (7813)。新驱动程序为 82.50 (8250)。使用 .NET 3.5 SP1 运行 Vista x64。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-14T13:30:39.183

可以发一下源码吗？新的 WPF 应用程序是否有同样的问题？

* * *

DpiScaling.exe 是否说 96 DPI？这是在终端服务上运行的吗？

这些只是猜测，因为我对 WPF/主题内部不太感兴趣。

* * *

我知道 SnapsToDevicePixels 已经为 Button 启用，这可能是问题的来源（即舍入问题）。

登录另一个帐户并在该帐户下运行怎么样？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-08-24T05:57:25.553

这件事发生在我用于 wpf 的 nvidia gforce 笔记本电脑上，这就是我要进行演示的盒子。我解决它的方法是转到 Nvidia 控制面板（右键单击桌面），然后从那里选择让 3d 应用程序决定图像和渲染设置的选项。

# delphi - Excel 类型库/Delphi 2009/错误的变量类型

> ID：747427
> 
> 赞同：1
> 
> 时间：2009-04-14T12:59:20.177
> 
> 标签：delphi, excel, com, delphi-2009

我们刚刚将使用 Excel 类型库的应用程序从 Delphi 2006 更新到 Delphi 2009。我发现现在几乎没有任何效果 - 几乎任何对 Excel 的调用都会导致消息“变量类型错误。”。例如，我们可以这样做： Sheet.Cells.Item[Row, Column].Value := Value 其中 Sheet 是 ExcelWorksheet 而 Value 是 Variant。我们在堆栈中看到的下一件事是调用 Variants 中的 _DispInvoke，然后调用 ComObj。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-14T13:03:25.567

如果 Excel 或 Delphi 版本已更改，我可以建议您重新创建/重新导入类型库。使用来自其他版本的 TLB 通常会产生这些问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-14T15:26:55.253

事实证明，我们有一个通用过程来设置表单单元格的值：

```
procedure SetValue(aSheet: ExcelWorksheet; aRow, aCol: Integer; aValue: Variant)
begin
  aSheet.Cells.Item[aRow, aCol].Value := aValue;
end; 
```

这因我提到的错误而失败。如果我将其更改为：

```
procedure SetValue(aSheet: ExcelWorksheet; aRow, aCol: Integer; aValue: Variant)
var
  sValue: WideString;
begin
  sValue:= aValue;
  aSheet.Cells.Item[aRow, aCol].Value := sValue;
end; 
```

对我来说，这表明 Delphi 2009 对变体做了一些不同的事情（至少与 D2006 不同），这是 COM 不喜欢的，除非有人有更好的解释？无论如何，我很乐意暂时使用这种解决方法。

# c# - 哪个版本的 sdk 和 .NET 与 Visual Studio Express C# 2008 一起提供？

> ID：747435
> 
> 赞同：1
> 
> 时间：2009-04-14T13:03:21.353
> 
> 标签：c#, visual-studio-2008

我正在通过邮件帮助从 c# 开始，我想为此推荐 VS express（来自[此](http://www.microsoft.com/express/vcsharp/)链接）

我不清楚它附带了哪个版本的 .NET，以及是否会有带有命令行编译器 (cs.exe) 的 SDK。

我正在使用 VS2008，并不太热衷于在我的系统上对其进行全部测试。

发送！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-14T13:05:48.960

命令行编译器是标准 .NET 框架的一部分。

Express 2005 已经退役，AFAIK。当前的 C# express 下载是 2008 Express with Service Pack 1，其中包括：

*   .NET Framework 3.5 SP1（以及所有以前的服务包，例如 2.0 SP2、3.0 SP1 等）
*   Visual C# 速成版 2008 SP1

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-14T13:06:22.313

VS 2008 Express 任何语言都有以下 .Net 版本

*   .Net 2.0 SP1
*   .Net 3.5

.Net SDK 将包含在安装中。对于 C# 版本，它将包括 3.0 C# 语言编译器。2.0 版本也将在 2.0 安装目录中提供。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-14T13:29:29.153

有关所有 Visual Studio 产品之间差异的非常广泛的描述，请查看此处的功能比较图表：

[http://msdn.microsoft.com/hi-in/vstudio/products/cc149003(en-us).aspx](http://msdn.microsoft.com/hi-in/vstudio/products/cc149003(en-us).aspx)

# c++ - TypeDef 作为可覆盖的类功能

> ID：747440
> 
> 赞同：4
> 
> 时间：2009-04-14T13:04:19.480
> 
> 标签：c++, typedef

如果我有一个包含许多`typedef`'d 变量的类，如下所示：

```
class X {

typedef token TokenType;

bool doStuff()
{
TokenType data;
fillData(&data);
return true;
}

}; 
```

有什么方法可以覆盖派生类中的`typedef`for吗？`TokenType`

注意这不是使用模板的好地方（这已经是一个模板类，任何更改都可能导致[编辑：*无限*]递归定义[`class X < class Y = class X < class Y . . .> >`等]。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-14T13:09:16.037

您可以做的是阴影，但不能覆盖。也就是说：你可以为 TokenType 定义一个派生类 Y，它有自己的 typedef，但只有当有人直接引用 Y::TokenType 或通过静态类型为 Y 的对象引用 Y::TokenType 时才会发挥作用。任何静态引用 X::TokenType 的代码即使对于 Y 类型的对象也会这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-14T13:10:35.767

Typedef 在编译时被解析——让它们可被覆盖是没有意义的，因为覆盖是*运行时*多态性的一个特性。

简单地重新声明 typedef 就可以了——尽管我不确定你为什么认为模板在这里不是一个好主意——递归模板实际上是可行的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-14T13:13:59.427

简短回答：不，您不能覆盖 typedef。

长答案： typedef 基本上是另一种类型的别名或同义词。他们没有定义新的数据类型。它们只是提供了一种为类型赋予新名称的方法。

# asp.net - ASP.net 按钮 Web 控件的 Javascript 属性

> ID：747442
> 
> 赞同：1
> 
> 时间：2009-04-14T13:04:31.977
> 
> 标签：asp.net, javascript

尝试将确认弹出消息添加到按钮的 onclick 事件时，我遇到了一个相当讨厌的问题。

尝试将消息拆分到新行以使测试包含在弹出窗口中时会出现问题。如果 \n 从字符串中取出，则代码可以正常工作。

```
string confirmationMessage = "text text text text text text text text text text text text text text text text text text \n text text text text ";

submitButton.Attributes.Add("onclick", "return confirm('" + confirmationMessage + "');"); 
```

感谢您提供任何帮助。

不确定是否为此发布一个单独的问题。我有一个新问题，但我可以包含的文本数量似乎是有限的。如果字符串太长，则无法显示确认消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-14T13:08:24.167

我认为你的问题是关于转义字符，试试这个：

```
string confirmationMessage = "text text text text text text text text text text text text text text text text text text \\n text text text text ";

// or : 
// string confirmationMessage = @"text text text text text text text text text text text text text text text text text text \n text text text text ";

submitButton.Attributes.Add("onclick", "return confirm('" + confirmationMessage + "');"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T13:08:26.537

编译器可能正在评估转义序列，而不是将其视为纯文本。在字符串前面添加一个“@”，看看是否有效：

```
string confirmationMessage = @"text text text text text text text text text text text text text text text text text text \n text text text text "; 
```

# javascript - 根据javascript中的timezoneid获取当前时间

> ID：747444
> 
> 赞同：1
> 
> 时间：2009-04-14T13:04:37.950
> 
> 标签：javascript, timezone

有什么方法可以获取特定时区的当前时间（`ex: var currentTime=getCurrentTime(timezoneId)`其中 timezoneId="alaska" 或东部时间），包括 JavaScript 中的夏令时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-14T13:49:39.043

JavaScript 中没有内置时区处理，因此您需要一个包含所有时区详细信息的库（通常从​​ Olson 数据库生成）。例如。[flegix.date](http://js.fleegix.org/plugins/date/date)有一个。

另请参阅[如何在 JavaScript 中确定系统的 Olson zoneinfo？](https://stackoverflow.com/questions/608423/how-do-i-determine-the-systems-olson-zoneinfo-in-javascript)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T13:08:18.800

[这](https://web.archive.org/web/1/http://articles.techrepublic%2ecom%2ecom/5100-10878_11-6016329.html)看起来像是一个解决方案，尽管它使用城市名称作为参考。

# java - 使用 maven2 删除嵌套的测试类

> ID：747452
> 
> 赞同：2
> 
> 时间：2009-04-14T13:07:11.453
> 
> 标签：java, maven-2, nested-class, inner-classes

我使用嵌套类来访问 JUnit 测试中的私有成员。它们总是被命名为“TestProxy”。

我想在构建时使用 maven2 删除它们，而不是将其包含到 jar 文件中。

*   有没有配置选项？
*   可以用插件完成吗？如果是这样，原型会很好！;-)

谢谢

编辑：为什么使用私有方法？我需要从 3rd 方系统注入数据，而每次 JUnit 测试运行都不能调用这些数据。而且我真的不想要私有数据的公共设置器，或者迟早另一个程序员可能会滥用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-15T12:16:52.860

答案如下：可以用maven配置。只需将以下代码插入到 build/plugins 部分的文件 pom.xml 中：

```
<plugin>
 <groupId>org.apache.maven.plugins</groupId>
 <artifactId>maven-jar-plugin</artifactId>
 <configuration>
   <excludes>
     <exclude>**/*$TestProxy*</exclude>
   </excludes>
 </configuration>
</plugin> 
```

@查看文档：[http ://maven.apache.org/plugins/maven-jar-plugin/jar-mojo.html#excludes](http://maven.apache.org/plugins/maven-jar-plugin/jar-mojo.html#excludes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-14T13:46:11.250

对于这类事情，您可能会发现 ant 脚本是第一个调用端口，而不是专用的自定义插件。让 Maven 在构建过程中运行任意 ant 脚本很简单。比创建插件更简单。 [这个问题](https://stackoverflow.com/questions/187550/preprocessing-source-code-as-a-part-of-a-maven-build)很好地描述了如何在 Maven 的`process-sources`构建执行阶段运行 ant 脚本。

稍有不同的是，我希望您会得到一堆答案，询问您为什么要对私有可访问的班级成员进行单元测试...

# .net - .NET 对象层次结构 - 事件或不事件

> ID：747455
> 
> 赞同：4
> 
> 时间：2009-04-14T13:07:48.567
> 
> 标签：.net, oop, class-hierarchy

你的工作是设计一个支持任务跟踪的 Project Plan 类库（类似于 MS Project 的工作方式）。这个类库有一个`Task`对象（等等）。

该`Task`对象具有`EstimatedHours`( `Double`)、`StartDate`( `DateTime`) 和`EndDate`( `DateTime`) 属性等。一个`Task`对象可以有一个父对象`Task`和多个子`Task`对象。具有子代（是父代）的 a的`EstimatedHours`、`StartDate`和`EndDate`属性`Task`取决于其直接子代的那些属性。parent`Task`是其孩子`StartDate`中最早的。`StartDate`parent`Task`是其孩子`EndDate`中最新的。`EndDate`父级是其子级的`Task`总和。因此，更改具有子项的这些属性是无效的。`EstimatedHours``EstimatedHours``Task`

**您将如何处理在具有父级的任务上更改 EstimatedHours、StartDate 或 EndDate 的用例？**（父级的属性是其子级的反映，因此对子级的任何更改都可能需要调整父级的属性以适当地反映更改）

一种选择是在每个属性更改时设置一个事件。父级`Task`将在其直接子级`Task`对象上侦听这些事件，并在这些事件发生时对自己的属性进行适当的更改。这是一个好方法，还是有更好的方法？你会**怎么**做？

下面是一个`Task`对象可能是什么样子的基本概念：

```
Public Class Task

  Private mChildren As List(Of Task)

  Private mEndDate As DateTime = DateTime.MinVlue
  Public Property EndDate() As DateTime
    Get
      Return mEndDate 
    End Get
    Set(ByVal value As DateTime)
      mEndDate = value
      'What to do here?
    End Set
  End Property

  Private mEstimatedHours As Double = 0.0
  Public Property EstimatedHours() As Double 
    Get
      Return mEstimatedHours 
    End Get
    Set(ByVal value As Double)
      mEstimatedHours = value
      'What to do here?
    End Set
  End Property

  Private mStartDate As DateTime = DateTime.MinVlue
  Public Property StartDate() As DateTime
    Get
      Return mStartDate 
    End Get
    Set(ByVal value As DateTime)
      mStartDate = value
      'What to do here?
    End Set
  End Property

End Class 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-14T13:14:00.407

解决这个问题的正确方法是使用观察者设计模式。实现观察者模式的详细解释超出了本次讨论的范围。但是这里有一些很好的观察者模式链接。一个链接在[这里](http://www.dofactory.com/Patterns/PatternObserver.aspx)，另一个在[这里](http://en.wikipedia.org/wiki/Observer_pattern)。

[http://www.dofactory.com/Patterns/PatternObserver.aspx](http://www.dofactory.com/Patterns/PatternObserver.aspx)

[http://en.wikipedia.org/wiki/Observer_pattern](http://en.wikipedia.org/wiki/Observer_pattern)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-14T13:18:47.557

我不确定这就是我实际的做法，但这里有一个不同的选择：不要让 Task 有孩子，而是使用两个对象，一个 Task 和一个实现 ITask 接口的 TaskSet。Task 会有自己的 StartDate、EndDate 和 EstimatedHours，但 TaskSet 会从其子任务中动态计算这些值。使用服务向 ITask 添加和删除子项。对于添加，它会在添加第一个孩子时将 Task 转换为 TaskSet。对于删除，它将在删除最后一个子项时将 TaskSet 转换回 Task，并根据最后一个子项的值设置属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-14T13:17:08.043

我不认为这是模型责任的一部分，而是在它之上的控制器。

向模型添加事件或观察者模式会增加其他领域的复杂性，例如序列化，这是您想要避免的。

让它成为进行修改的类的责任，而不是模型本身。请记住：模型的职责是包含信息，而不是暗示业务规则。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-14T13:17:59.133

请记住，当事件链中的一个事件引发异常时，将不会调用以下事件。因此，如果数据中注册了其他事件，则*可能*不会调用您的事件。

如果基本任务永远不会与其子任务脱节对您的应用程序至关重要，那么不要使用事件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-14T13:18:29.103

我将首先构建对象模型，以便它即时计算值。我将为您提供 C#，因为我对它最满意（我也使用字段而不是属性来保持样本小）：

```
public class Task
{

    public List<Task> Children=new List<Task>();
    public Task Parent;   
    private int _duration;

    public int Duration
    {

       get
       {
          if (Children.Count>0)
          { 
              return SumChildrenDuration();
          }

          return _duration;
       }

       set 
       {
          if (children.Count>0)
              throw new Exception("Can only add to leaves");
          _duration=value;
       }
    }
} 
```

一旦你有了这个，你现在就拥有了运行系统所需的所有代码。您可能会发现系统性能足够好，然后就这样离开了。否则，您可以添加额外的功能来缓存结果，然后在对象更改时重置缓存。无论你做什么，一定要仔细分析它，因为你想确保你的缓存和过期不会比动态计算更昂贵。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-14T13:32:08.070

我告诉我的 ASP.NET 开发人员，“事件监督。方法完成工作。”

事件应该只是调用方法的 IFblocks。没有尝试/捕获等。
方法完成所有数据访问/操作/验证/计算等。
这也在我的开发人员中创造了“可重用代码”的心态。

它使事情分开。
它也很好地平行于 MVC 概念。

控制器对事件做出反应。他们监督。他们调用模型方法。
模型做这项工作。

这不是一个完美的平行。
的确，它很简单，但它提供了很好的指导。

# php - 您对 PHP 编码标准工具/系统/程序有什么建议？

> ID：747456
> 
> 赞同：7
> 
> 时间：2009-04-14T13:08:02.933
> 
> 标签：php, coding-style

我正在与几个开发人员一起开发一个 PHP 项目，每个开发人员都有自己的风格。风格差异很大，会使代码很难阅读，每个人都同意我们需要标准化我们的风格。

我遇到的问题是我找不到任何好的程序或系统来帮助执行 PHP 标准。过去我使用过许多用于 C++ 和 Java 的程序，而且我是 checkstyle 的忠实粉丝，但我找不到任何对 PHP 如此优雅的东西。

您会推荐什么程序、工具或系统来帮助开发人员遵守一套通用的 PHP 编码标准？此外，如果该解决方案还可以处理嵌入在 XHTML 中的 PHP，那就太好了，但这不是必需的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-14T13:15:53.337

[PHP_CodeSniffer](http://pear.php.net/manual/en/package.php.php-codesniffer.php)似乎是一个很棒的工具。我所属的一个项目使用[Zend Framework 编码标准](http://framework.zend.com/manual/en/coding-standard.html)作为我们自己的基础，我们研究了使用它。

然而，我们的截止日期并没有给试验新工具留下太多余地，所以我们从未在最初的测试之后使用它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-14T13:16:35.783

我过去使用过[phpCodeBeautifier](http://www.waterproof.fr/products/phpCodeBeautifier/)。它没有很多选项，但它可以在一定程度上完成工作并有助于保持标准代码。

它从命令行运行，并且如果您的 IDE 支持外部格式化程序，您可以与之集成，或者创建一个脚本来在您的所有文件上运行。

或者，如果您使用 Eclipse 或者您不打算偶尔运行它，您可以使用 Eclipse 及其 PHP 插件。只需单击几下，您就可以重新格式化文件夹内的代码。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-14T13:25:44.450

我之前遇到过同样的问题，但在我使用 Zend Studio for Eclipse 之后没有

[http://www.zend.com/en/products/studio/](http://www.zend.com/en/products/studio/)

使用 Zend Studio 有以下好处：

1.  100% 没有语法错误的代码

2.  使用 PHP 或 Zend Standard 格式化的代码。只需按 Ctrl+Shift+F，一切都会很好地格式化。

3.  检测潜在警告，例如变量文件包含的安全警告，例如：

    包括$文件；

您可以在他们的网站上找到更多详细信息。现在我不能没有 Zend Studio。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-14T13:41:44.460

如果您有多个开发人员，您肯定在使用某种版本控制和持续集成，对吧？我使用[PHP `_`CodeSniffer](http://pear.php.net/manual/en/package.php.php-codesniffer.php)（带有 Zend 规则和自动制表符间距更改）来监视编码违规并使用 phpUnderControl 报告它们。如果您不使用持续集成，iBuildings 上有一个很好的指南，关于如何设置它以及 PHP_CodeSniffer、phpUnit 和 phpDocumetor：[http ://techportal.inviqa.com/2009/03/03/getting-started-带-phpundercontrol/](http://techportal.inviqa.com/2009/03/03/getting-started-with-phpundercontrol/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-14T13:20:47.303

我过去使用过 Zend 的编码标准部分，它对我来说效果很好。如果您正在使用 Zend 开发代码，您可以在[Zend Coding Standard](http://framework.zend.com/manual/en/coding-standard.html)中找到它。

# shell - 递归列出所有目录和文件

> ID：747465
> 
> 赞同：49
> 
> 时间：2009-04-14T13:10:16.890
> 
> 标签：shell, recursion, directory-listing

我想收到以下输出。

假设文件系统上的目录结构是这样的：

```
  -dir1
      -dir2
        -file1
        -文件2
             -dir3
                -file3
                -file4
            -dir4
                -file5
       -dir5
             -dir6
             -dir7

```

脚本的输出必须类似于：

目录：

```
/目录1
/目录1/目录2
/dir1/dir2/dir3
/dir1/dir2/dir4
/dir1/dir5
/dir1/dir5/dir6
/dir1/dir5/dir7

```

文件：

```
/目录1
/dir1/dir2/file1
/dir1/dir2/file2
/dir1/dir2/dir3/file3
/dir1/dir2/dir3/file4
/dir1/dir2/dir4/file5
/dir1/dir5/dir6
/dir1/dir5/dir7

```

你能告诉我如何将输出保存`find . -type d`到`find . -type f`另一个文件中吗？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2009-04-14T13:16:16.330

在 Windows 中，仅列出目录：

```
dir /ad /b /s 
```

列出所有文件（没有目录）：

```
dir /a-d /b /s 
```

将输出重定向到文件：

```
dir /a-d /b /s > filename.txt 
```

[维基百科上解释的 dir 命令参数](http://en.wikipedia.org/wiki/List_of_DOS_commands#dir "目录命令")

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2009-04-14T13:13:36.447

在外壳中：

```
find . -type d 
```

给出当前工作目录中的目录，并且：

```
find . -type f 
```

给出当前工作目录中的文件。

替换`.`为您感兴趣的目录。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2009-04-14T13:13:27.477

## Bash/Linux 外壳

目录：

```
find ./ -type d 
```

文件：

```
find ./ -type f 
```

## Bash/Shell 进入文件

目录：

```
find ./ -type d  > somefile.txt 
```

文件：

```
find ./ -type f  > somefile.txt 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-04-14T13:47:08.550

在 Windows 上，您可以像大多数灵活的解决方案一样这样做，它允许您额外处理目录名称。

您使用 FOR /R 递归地执行批处理命令。

查看此批处理文件。

```
@echo off
SETLOCAL EnableDelayedExpansion

SET N=0
for /R %%i in (.) do (
     SET DIR=%%i

     ::put anything here, for instance the following code add dir numbers.
     SET /A N=!N!+1
     echo !N! !DIR!
) 
```

对于文件的相似之处，您可以将模式添加为一组而不是点，在您的情况下

```
 (*.*) 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-01-16T11:34:35.283

这是一个老问题，但我想无论如何我都会添加一些东西。

DIR 无法正确遍历您想要的所有目录树，尤其是 C: 上的目录树。由于保护措施不同，它只是在某些地方放弃了。

ATTRIB 工作得更好，因为它发现更多。（为什么会有这种差异？为什么 MS 会让一个实用程序以一种方式工作，而另一个在这方面工作不同？如果我知道的话，该死的。）根据我的经验，处理这个问题的最有效方法，虽然它是一个 kludge，是获得两个列表：

> 属性 /s /d C:\ >%TEMP%\C-with-directories.txt
> 
> 属性 /s C:\ >%TEMP%\C-without-directories.txt

并得到它们之间的区别。区别在于 C: 上的目录（除了那些隐藏得太好的目录）。对于 C:，我通常会以管理员身份运行。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-04-14T13:16:11.713

**在 Windows 中：**

目录 /ad /b /s

目录 /ad /b /s

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-04-14T13:18:40.723

在 Linux 中，一个简单的

```
find . -printf '%y %p\n' 
```

将为您提供所有包含项目的列表，其中包含混合的目录和文件。您可以将此输出保存到临时文件中，然后提取所有以 'd' 开头的行；这些将是目录。以“f”开头的行是文件。

# nhibernate - Nhibernate - 无法在单个查询中获取多个集合

> ID：747469
> 
> 赞同：0
> 
> 时间：2009-04-14T13:11:31.927
> 
> 标签：nhibernate

我有一个实体食谱，它有 3 个集合图像、评论和成分。它们被映射为一个包。

对于一个网站，我想用食谱加载食谱集合，即不是延迟加载，所以我发现我可以使用这个查询来做到这一点：

```
from Recipe r
left join fetch r.Images
left join fetch r.Ingredients
left join fetch r.Comments 
```

但这给出了一个例外：

> 如果其中一个是包，则无法在单个查询中获取多个集合

那么我如何不延迟加载我的食谱并加载集合，以允许该集合中可能没有任何行？我是新手，需要解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T09:50:57.433

避免笛卡尔查询。我将使用期货和左外连接执行 3 个查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T13:36:18.687

更改为 Sets 将允许这样做，但您确定这是您想要做的吗？

以这种方式“获取”多个子集合可能对您的系统性能非常不利。您很容易得到一个笛卡尔积，它从数据库中获取的行数是您需要的行数的许多倍。

[Ayende在这里](http://ayende.com/Blog/archive/2007/03/17/Performance-Multiply-Collections-Fetch-With-NHibernate.aspx)指出了潜在的问题

您可能想查看`session.CreateMultiQuery()`或`session.CreateMultiCriteria()`代替。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-14T13:13:14.153

将集合映射为一组。

包是可以包含同一项目的多个副本的集合。

# c++ - numeric_limits 是什么意思 ::数字10

> ID：747470
> 
> 赞同：16
> 
> 时间：2009-04-14T13:11:38.400
> 
> 标签：c++, stl

numeric_limits::digits10 的确切含义是什么？stackoverflow 中的一些其他相关问题让我认为这是双精度的最大精度，但是

*   当精度大于 17 ( == 2+numeric_limits::digits10) 时，以下原型开始工作（成功为真）
*   使用 STLPort，最后 readDouble==infinity；使用微软的 STL，readDouble == 0.0。
*   这个原型有什么意义吗:)？

这是原型：

```
#include <float.h>
#include <limits>
#include <math.h>
#include <iostream>
#include <iomanip>
#include <sstream>
#include <string>
int main(int argc, const char* argv[]) {
  std::ostringstream os;
  //int digit10=std::numeric_limits<double>::digits10; // ==15
  //int digit=std::numeric_limits<double>::digits; // ==53
  os << std::setprecision(17);
  os << DBL_MAX;
  std::cout << os.str();
  std::stringbuf sb(os.str());
  std::istream is(&sb);
  double readDouble=0.0;
  is >> readDouble;
  bool success = fabs(DBL_MAX-readDouble)<0.1;
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-04-14T14:13:53.977

`numeric_limits::digits10`是可以无损保存的小数位数。

例如`numeric_limits<unsigned char>::digits10`是 2。这意味着一个 unsigned char 可以保持 0..99 而不会丢失。***如果***是 3，它可以保持 0..999，但众所周知，它只能保持 0..255。

[这个手册页](http://msdn.microsoft.com/en-us/library/af6x78h6.aspx)有一个浮点数的例子，它（当缩短时）表明

```
cout << numeric_limits<float>::digits10 <<endl;
float f = (float)99999999; // 8 digits
cout.precision ( 10 );
cout << "The float is; " << f << endl; 
```

印刷

```
6
The float is; 100000000 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-14T13:19:26.340

numeric_limits::digits10 指定小数点左侧的小数位数，您可以在不损失精度的情况下表示。每种类型都有不同数量的可表示十进制值。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-06-05T13:51:39.913

See this very readable paper: [http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2006/n2005.pdf](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2006/n2005.pdf)

Although DBL_MAX ( = std::numeric_limits::digits10 = 15 digits) is the minimum guaranteed number of digits for a double, the DBL_MAXDIG10 value (= 17 digits) proposed in the paper has the useful properties:

*   Of being the minimum number of digits needed to survive a round-trip to string form and back and get the same double in the end.

*   Of being the minimum number of digits needed to convert the double to string form and show different strings every time you get (A != B) in code. With 16 or fewer digits, you can get doubles that are not equal in code, but when they are converted to string form they are the same (which will give the case where they are different when compared in the code, but a log file will show them as identical - very confusing and hard to debug!)

When you compare values (e.g. by reviewing them manually by diff'ing two log files) we should remember that digits 1-15 are ALWAYS valid, but differences in the 16th and 17th digits *MAY* be junk.

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-04-14T13:23:09.450

'53' 是您的类型（双精度）持有的[有效](http://en.wikipedia.org/wiki/Significand)数字的位宽。“15”是可以以这种精度*安全表示的**十进制位数。*

 ** * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-01-10T13:08:38.047

`digits10`用于转换：string → double → string
`max_digits10`用于转换：double → string → double

在您的程序中，您正在使用转换（double → string → double）。您应该使用`max_digits10`而不是`digits10`.

有关 and 的更多详细信息`digits10`，`max_digits10`您可以阅读：

*   [stackoverflow 解释的差异](https://stackoverflow.com/questions/22458355/what-is-the-purpose-of-max-digits10-and-how-is-it-different-from-digits10)
*   [数字10](http://en.cppreference.com/w/cpp/types/numeric_limits/digits10)
*   [max_digits10](http://en.cppreference.com/w/cpp/types/numeric_limits/max_digits10)

# linq - 可观察的 LINQ，存在吗？

> ID：747473
> 
> 赞同：0
> 
> 时间：2009-04-14T13:12:34.687
> 
> 标签：linq

对于那些知道我在说什么的人来说，这是一个简单的问题。

我想查询一个来源，并一直保持 UI 更新，而不是自己做。

有几篇文章对此进行了一些讨论：

[http://dotnetaddict.dotnetdevelopersjournal.com/dynamic_linq.htm](http://dotnetaddict.dotnetdevelopersjournal.com/dynamic_linq.htm)

但我的观点是，有什么办法可以直接从数据库源中获取？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-14T17:10:55.580

那篇文章中的最后一篇文章总结了这一点，总的来说，该方法只是监听 ObservableCollection 中的更改事件。除非你真的很想实现推送功能，否则你会更安全地运行一个线程安全的计时器来更新绑定到视图的集合。

# php - 连接到 MS SQL 2000/2005 的正确 PHP 配置是什么？

> ID：747477
> 
> 赞同：1
> 
> 时间：2009-04-14T13:12:57.463
> 
> 标签：php, sql-server, windows, iis-6

我有许多使用 FastCGI 在 Windows 2003/IIS6 上运行[PHP 5.2.6（非线程安全构建）的服务器。](http://museum.php.net/php5/php-5.2.6-nts-Win32.zip)

我在连接到 MS SQL 2000/2005 时遇到了一些问题（MySQL 连接工作正常，ASP/ASP.NET 脚本也可以成功连接到 MS SQL）。[一种解决方案](http://www.userscape.com/helpdesk/index.php?pg=kb.page&id=13)建议将 SQL 客户端工具`ntwdblib.dll`文件复制到 PHP 扩展文件夹或在 Web 服务器上安装所有 SQL 客户端工具（我不愿意这样做）。

建议的另一个解决方案是使用[Microsoft SQL Server 2005 Driver for PHP](http://blogs.msdn.com/sqlphp/archive/2008/07/28/microsoft-sql-server-2005-driver-for-php-v1-0-has-released.aspx)。这对于编写未开发的应用程序看起来不错，但对于 phpBBS 或 WordPress 等应用程序，这似乎不起作用。

例如，以下脚本：

```
<?php 
$host = "mssqlhost"; 
$user = "phpbb2"; 
$password = "phpbb2"; 

$connect_sql_server = mssql_connect($host, $user, $password); 
?> 
```

失败：

> PHP 警告：mssql_connect() [function.mssql-connect]：无法连接到服务器：第 6 行 E:\AppsDev.NET_UK_Minds\phpSqlNC\www\test.php 中的 mssqlhost

目标是允许 PHP 脚本连接到运行在不同服务器上的 SQL 2000 和 SQL 2005。我还应该补充一点，此时升级到更高版本的 PHP 不是一个选项。

在 Windows 2003/IIS6 上配置 PHP 以连接到 SQL 2000/2005 的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-14T18:11:49.520

在尝试了各种“解决方案”后，发现问题只是通过替换`ntwdblib.dll`PHP 可执行文件文件夹中的文件来解决。

正如许多死胡同所暗示的那样，无需安装任何：*SQL Native Client*、*SQL Client Tools*或*Microsoft SQL Server 2005 Driver for PHP 。*

所需要做的就是确保将`ntwdblib.dll`版本 2000.80.2039.0 放入`c:\php`文件夹（或您安装/解压缩 PHP 的任何位置），然后重置 IIS。PHP 文档[建议](http://us2.php.net/manual/en/mssql.requirements.php)复制`ntwdblib.dll`到 %SYSTEMROOT%\System32 这不起作用，他们还建议这只会支持命名管道，这也是错误的。

我没有尝试查看更高版本是否`ntwdblib.dll`有效，但 2000.80.2039.0 对我有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-10-14T14:46:51.827

不是真正的答案，而是更多有用的信息......

最新的 php 5.2.X 附带的 ntwdblib.dll (2000.2.8.0) 版本与 Apache 和 MSSQL (2008) 配合得很好。我有一份 2000.80.XX 版本的 DLL 副本，它比 PHP 附带的更新。我不知道这是否会使它变得更好。

“mssql_”函数不包含在[官方的 msft php mssql](http://blogs.msdn.com/sqlphp/)驱动程序中。他们已将它们更改为不同的命名约定。("sqlsrv_") 您发布的链接是 1.0 版，但它们已经在 1.1 版上。“mssql_”函数要求存在 ntwdblib.dll。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2010-02-11T19:14:39.140

## Apache 2.2.14 /PHP 5.2.12/MS-SQL 2008 集成

*   下载 Apache 2.2.14 for Windows Installer package 2008 32 bit httpd DOT apache DOT org/download.cgi --> apache_2.2.14-win32-x86-no_ssl
*   安装 Apache 时遵循默认值
*   停止 Apache 2.2 服务

*   下载适用于 Windows 2008 32 位的 PHP 5.2.12 Windows Zip 包；（用作 Apache 模块的 PHP 需要 VC6 线程安全版本）。

windows DOT php DOT net/download/ --> php-5.2.12-Win32-VC6-x86.zip - 解压到 C:\PHP - 验证安装：C:\PHP>php -v
- 设置环境变量 PHPRC=C:\PHP - 将 'C:\PHP\php.ini-recommended' 重命名为 'C:\PHP\php.ini' - 编辑 C:\PHP\php,ini 文件：

```
modify:     extension_dir = "C:\PHP\ext"
uncomment:  extension=php_mssql.dll 
```

*   将以下行添加到“C:\Program Files\Apache Software Foundation\Apache2.2\conf\httpd.conf”

    ```
    PHPIniDir "C:/PHP/"
    LoadModule php5_module "C:/PHP/php5apache2_2.dll"
    AddHandler application/x-httpd-php .php 
    ```

*   将以下行添加到“C:\Program Files\Apache Software Foundation\Apache2.2\conf\mime.types”

    ```
    application/x-httpd-php php
    application/x-httpd-php-source  phps 
    ```

*   确保包含以下内容的 phpinfo.php 文件：位于文件夹 C:\Program Files\Apache Software Foundation\Apache2.2\htdocs

*   启动 Apache 2.2 服务

*   Apache/PHP 集成验证：[http://localhost/phpinfo.php](http://localhost/phpinfo.php) --> 'PHP Version 5.2.12' 信息显示
*   验证是否加载了mssql'模块：c:\php\php -m

所有的作品都像一个魅力......不需要额外的步骤。

# unit-testing - 对不同用户行为不同的软件进行单元测试的最佳方法是什么？

> ID：747478
> 
> 赞同：3
> 
> 时间：2009-04-14T13:12:58.803
> 
> 标签：unit-testing

正如问题的标题所指出的，对根据当前登录的用户而表现不同的应用程序执行单元测试的最佳方法是什么？

此外，对于维护内部状态信息的应用程序，执行测试和管理所有测试的最佳方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-14T13:25:06.840

如果用户是指系统用户，例如 windows 登录 - 那么对于单元测试，最好将您的代码与此依赖项分离。

我的意思是让你的代码有一个易于在单元测试中设置的内部用户概念。那么你的大部分代码只会知道这个内部概念，并且可以测试而不用担心真正的登录。

然后将更难测试的层（将系统用户和您从中派生的所有内容（例如文件夹位置、权限等）映射到您的内部登录名的层）最小化。然后可以使用可以处理高级登录的某种类型的验收测试来测试这一层。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T13:17:57.747

为不同类型的用户创建单独的测试并模拟他们登录（或登录）。这样，您可以测试每种类型的用户应该是什么行为，例如，基于用户权限。

如果应用程序的内部状态也发挥了作用，那么您将几乎无法为每个（合理的）场景创建测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-14T13:52:03.890

我假设有一些提供商说“此用户可以执行此操作”或“对于此用户，执行此操作”。

如果是这种情况，您只需为该提供程序创建一个存根，并让它针对您要测试的情况返回不同的内容。

如果不是这样，我会创建这样一个提供者。

状态也是如此：将状态存储在一个状态保持类中并询问它您处于什么状态。在测试环境中，为它创建一个存根。

当然，您也可以对状态保持类进行单元测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-14T13:19:08.150

如果定义行为的只是登录的用户类型，那么只需为每个用户类型编写一个测试就很容易了[你最终得到了 n 个测试；n 是用户类型的数量]。

如果它是某些内部系统状态和用户类型之间的组合，则您为每种用户类型的每种状态编写一个测试[您最终得到 n*m 测试；n 是用户类型的数量，m 是内部系统状态的数量]。

# performance - 您如何找到专注于编码项目/任务的最佳方式？

> ID：747483
> 
> 赞同：5
> 
> 时间：2009-04-14T13:13:44.853
> 
> 标签：performance, focus

简而言之，当您计划或考虑了要创建的想法时 - 您使用什么来帮助您完成任务，或者确保您在没有（负面）分心的情况下继续编程？

我发现阅读书籍和与志同道合的人在一起确实有助于激发动力，尽管当需要自己再次在键盘上打字时，很容易迷失不相关的跟踪网站。

任何人都可以推荐一种思维方式或您为最大限度地提高生产力而采取的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-14T13:21:53.760

我通常首先切断我的互联网连接，否则我知道在完全不相关的页面上冲浪只是时间问题。此外，我通常会在开始工作之前计划好我的时间，并确保包含频繁的短刹车（例如，工作 45 分钟、休息 15 分钟、工作 30 分钟、休息 5 分钟，等等......）。这样，如果我饿了，我需要等待下一次休息才能吃东西，这将有助于我集中注意力，因为我知道在休息前考虑食物是没有意义的。而且，如果您设法进入“如果我现在这样做，以后就不需要再这样做”的心态，那总是一个好地方。

最后，大量的咖啡和舒适的工作姿势（躺在沙发上，肚子上的电脑并不是一个很好的工作姿势）可能是我最好的建议。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T13:22:25.303

我相信它真的只在你愿意接受的范围内。至少对于个人项目。如果您在没有任何动机的情况下编写代码并且想要退出，那么您很可能无法集中精力，并且您的代码会很糟糕。

我发现列出一个待办事项清单，并给自己设定个人期限来完成某些事情，这让我继续前进。这对我来说都是挑战的乐趣。就像您提到的那样，与志同道合的人谈论您的项目并看到他们的热情真的可以让您前进。留出一个特定的时间坐下来编写代码，一天中分心最少并且您有时间思考和放松的时间可以真正提高生产力。至于保持你的头脑在游戏中，唯一的方法是真正确保分心是有限的。例如 Stackoverflow 之类的干扰；）。如果您在使用计算机并且对编码感到厌倦，那么很难阻止您的思绪寻找其他事情要做。在 MSN 上聊天并回答 Stackoverflow 问题可以'

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-14T13:23:18.093

对我来说，写一个待办事项列表并在我移动时保持更新是有帮助的。例如
1- 编写 X 类的单元测试。
2- 编写 X 类。
/*
在编写 XI 类时遇到了难题，在我求助于强大的 Google 寻求帮助之前，我添加了另一个项目
*/
3- 了解如何实现功能 Y。

并在我处理完项目后立即划掉它们，并尝试记录我花了多少时间以供将来参考。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-14T13:30:31.443

把事情做好：

*   [大卫艾伦的网站](http://www.davidco.com/)
*   [书](http://www.amazon.co.uk/Getting-Things-Done-Stress-Free-Productivity/dp/0142000280)。_
*   维基[百科条目](http://en.wikipedia.org/wiki/Getting_Things_Done)。
*   谷[歌视频](http://video.google.co.uk/videosearch?hl=en&q=Getting+Things+Done+david+allen&um=1&ie=UTF-8&ei=gY_kSdunOeDtlQeP2bDgDg&sa=X&oi=video_result_group&resnum=8&ct=title#)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-14T14:54:49.043

*   为早上和晚上的电子邮件留出时间。
*   关闭所有弹出窗口和提醒（电子邮件通知）
*   来杯咖啡
*   放入耳机或戴在耳机上
*   Start the music.
*   Take a 2 minute break every hour
*   Stop for lunch.
*   Rinse and repeat.

# c - 如何定义函数

> ID：747489
> 
> 赞同：0
> 
> 时间：2009-04-14T13:14:25.180
> 
> 标签：c, objective-c

我想定义以下函数：

```
 if(stmtToFinalize) {
        NSLog(@"Finalizing statement stmtToFinalize");
        if (sqlite3_finalize(stmtToFinalize) !=SQLITE_OK)
            NSLog(@"An error occured while trying to finalize a statement stmtToFinalize: '%s'", sqlite3_errmsg(database));
        stmtToFinalize = NULL;
    } 
```

但我不熟悉#define 指令。我希望使用 sqlite3_stmt 类型的任何语句而不是 stmtToFinalize。

我该如何实施？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-14T13:20:16.133

for 的语法`#define`不是特定于 Objective-C 的。

```
#define MY_FUNCTION(x) do { \
    if( (x) ) { \
        NSLog(@"Finalizing statement stmtToFinalize"); \
        if (sqlite3_finalize( (x) ) !=SQLITE_OK) \
                NSLog(@"An error occured while trying to finalize a statement stmtToFinalize: '%s'", sqlite3_errmsg(database)); \
        (x) = NULL; \
    } } while (0) 
```

NSLog() 格式字符串中的文本未更改。

# comet - 与twisted进行网络聊天

> ID：747495
> 
> 赞同：2
> 
> 时间：2009-04-14T13:16:11.433
> 
> 标签：comet, twisted

我已经进行了一次聊天，可以通过 Telnet 进行连接。我的聊天当前实现为 Twisted TCP 服务器。如何将其转换为浏览器的聊天？

我想我应该使用彗星服务器（例如 Orbited）来同时提供静态 HTML 和动态内容。这样的彗星服务器是否需要快速可靠的聊天？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-14T13:34:35.053

Comet 是最好的选择，无需使用任何特殊的东西（如 Flash，见下文）。这是一项经过验证的技术，已被许多大型网站使用，例如 Gmail 的聊天和 Facebook 的聊天。

您唯一的其他选择是轮询，但这有时会在服务器上变得有点紧张。您基本上必须权衡服务器负载与速度 - 如果您经常轮询，您会得到一个响应速度非常快的客户端，但是您在服务器上放置了很多负载。轮询太少，您会保持负载轻，但客户端只能每*n*秒接收一次消息，因此看起来很慢。

如果您决定进行轮询，您总是可以创建一个“退避”系统。例如，该页面每 2 秒检查一次是否有任何聊天消息发送。它这样做了 5 次，如果什么都没有，它将延迟增加到 3 秒。它这样做了 5 次，然后什么也没做，它会持续 4 秒..等等。当发送聊天消息时，它会返回到最短延迟。

另一个更好的选择是使用 Flex 或 Flash 客户端。这样，您可以只使用仅发送数据（如果有）的 TCP 套接字。但前提是您真的想要在您的网站上安装 Flash 应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-14T13:28:33.197

是啊，就是！检查[www.meebo.com](http://www.meebo.com)！他们使用彗星作为他们的基本平台！

# jquery - Json 对象访问

> ID：747504
> 
> 赞同：0
> 
> 时间：2009-04-14T13:16:49.480
> 
> 标签：jquery, asp.net-mvc, json

我正在使用 $.getJSON(url,data,callback) 方法。

并从 url 返回一个列表类型的 JSON 对象（例如 states.ToList()），那么我如何读取该对象？

states.ToList 将有 ID 和 Name 的记录，

我想将它与选择标签绑定（用于客户端页面的选择列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-14T15:14:52.223

```
$.getJSON(url, null,
  function(data) {
    for (i in data) {
      var state = data[i];
      // do something with state
    }
  }
); 
```

如果你尝试这个并且它不起作用，那么你要么没有返回一个数组，要么你没有正确指定名称。查看 Firebug 中的 Net/XHR 面板以查看数据的真实形状。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-14T13:22:33.960

环形！valueArray <= states.ToList()

```
for(var i=0; i<valueArray.length; i++){
  //do something by accessing valueArray[i];
} 
```

# asp.net - 如何获取正在使用我的网络服务的网站的 URL？

> ID：747511
> 
> 赞同：2
> 
> 时间：2009-04-14T13:18:21.147
> 
> 标签：asp.net, web-services

我已经开发了一个 Web 服务并将其托管在我的服务器上，我想知道谁在使用这个 Web 服务（站点 Url）。我尝试使用“Request.UrlReferrer”，但它没有返回任何东西！有什么建议/建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-14T13:25:04.157

您无法获取 Web 服务调用者的 URL，因为并非所有调用者都有规范的 URL。但是，您可以假设 IP 地址不在代理/nat 后面。在这种情况下，您将获得 nat / 代理的 IP。

假设您使用 ASMX Web 服务，您可以通过以下方式：

```
HttpContext.Current.Request.UserHostAddress 
```

获得 IP 地址后，您可以尝试进行反向查找以获取主机名。我建议存储 IP 地址，然后编写一个离线进程，尝试确定谁拥有该 IP。我确信有一些网络服务可以帮助解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-14T13:19:55.417

您可以使用 Request.Url 属性来获取有关对 Web 服务的请求的所有信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-14T13:23:13.177

referrer是客户端设置的，客户端*不能*设置。这就是为什么你什么也看不见。如果客户端是服务器，那么您能做的最好的事情就是获取客户端连接的 IP 并转到该 IP。如果是一个简单的设置，没有虚拟主机，那么这就是访问您的 Web 服务的*“网站” 。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-14T15:16:18.150

正如[Josh 所说](https://stackoverflow.com/questions/747511/how-can-i-get-the-url-of-the-web-site-which-is-using-my-web-service/747556#747556)，[HttpRequest](http://msdn.microsoft.com/en-us/library/system.web.httprequest.aspx)对象是要走的路，那里有一些属性可能会有所帮助：

1.  [UserHostName](http://msdn.microsoft.com/en-us/library/system.web.httprequest.userhostname.aspx) - 获取远程客户端的 DNS 名称。
2.  [UserAgent](http://msdn.microsoft.com/en-us/library/system.web.httprequest.useragent.aspx) - 获取客户端浏览器的原始用户代理字符串。
3.  [UserHostAddress](http://msdn.microsoft.com/en-us/library/system.web.httprequest.userhostaddress.aspx) - 获取远程客户端的 IP 主机地址。

这可能会为您提供更多信息。

# c# - 接口与抽象类

> ID：747517
> 
> 赞同：142
> 
> 时间：2009-04-14T13:18:57.307
> 
> 标签：c#, inheritance, interface, abstract-class

在 C# 中，什么时候应该使用接口，什么时候应该使用抽象类？什么可能是决定因素？

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2009-04-14T13:21:52.433

***更新：C# 8.0 新特性：* 从 C# 8.0 开始，接口可以为成员定义默认实现，包括属性。为接口中的属性定义默认实现很少见，因为接口可能不定义实例数据字段。**

抽象类的优点是：

*   能够指定方法的默认实现
*   向函数添加了不变检查
*   对如何调用“接口”方法有更多的控制
*   能够“免费”提供与界面相关或无关的行为

接口只是数据传递合约，没有这些功能。但是，它们通常更灵活，因为类型只能从一个类派生，但可以实现任意数量的接口。

* * *

## 回答 #2

> 赞同：111
> 
> 时间：2009-04-14T13:26:28.567

抽象类和接口在语义上是不同的，尽管它们的用法可以重叠。

抽象类通常用作类似类的构建基础。类的通用实现可以在抽象类中。

接口通常用于指定类的能力，其中类不必非常相似。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2009-04-14T13:29:37.860

要考虑的另一件事是，由于没有多重继承，如果您希望一个类能够从您的接口/抽象类实现/继承，但从另一个基类继承，请使用接口。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2009-04-14T13:24:04.720

真正的问题是：是使用接口还是基类。这在之前已经介绍过了。

在 C# 中，抽象类（用关键字“abstract”标记的）只是一个无法实例化对象的类。这与简单区分基类和接口的目的不同。

# c# - C# 帮助将此代码从 VB.NET 转换为 C#

> ID：747518
> 
> 赞同：3
> 
> 时间：2009-04-14T13:19:03.047
> 
> 标签：c#, vb.net

任何帮助将不胜感激，我正在尝试将下面的代码转换为 C#，我从未使用过 VB.NET，所以 ReDim 对我来说是一个新的。

谢谢

```
Dim inFile As System.IO.FileStream
Dim binaryData() As Byte
Dim strFileName As String

strFileName = "C:\MyPicture.jpeg"

inFile = New System.IO.FileStream(strFileName, System.IO.FileMode.Open, System.IO.FileAccess.Read)

''//Retrive Data into a byte array variable
ReDim binaryData(inFile.Length)
Dim bytesRead As Long = inFile.Read(binaryData, 0, CInt(inFile.Length))
inFile.Close() 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-14T13:22:13.087

代码可以逐字转换，但有一种更简单的方法可以实现这一点（从文件中读取所有字节），即

```
var binaryData = File.ReadAllBytes(strFileName); 
```

就我个人而言，我会重命名`strFileName`为`fileName`匈牙利符号在 .NET 代码中不受欢迎......但这是另一回事！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-14T13:24:19.087

这很容易转换为 C#。

```
FileStream inFile;
byte[] binaryData;
string strFileName;

strFileName = @"C:\MyPicture.jpeg";

inFile = new System.IO.FileStream(strFileName, System.IO.FileMode.Open, System.IO.FileAccess.Read);

binaryData = new byte[inFile.Length];
int bytesRead = inFile.Read(binaryData, 0, binaryData.Length);
inFile.Close(); 
```

但是有一个更好的方法来写这个。

```
string fileName = @"C:\MyPicture.jpeg";
byte[] binaryData = File.ReadAllBytes(fileName); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-14T13:22:49.763

我相信 ReDim 语句只是用来初始化数组：

```
byte[] binaryData;

binaryData = new byte[inFile.Lenght]; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-14T13:23:51.960

好吧，*最接近*的翻译是：

```
binaryData = new byte[inFile.Length]; 
```

因为它没有被分配，或者：

```
Array.Resize(ref binaryData,inFile.Length); 
```

如果*之前*已分配。然而，代码本身是**非常**不安全的（你不应该假设`Read`读取了所有请求的数据）；这里一个更简单的方法是：

```
binaryData = File.ReadAllBytes(strFileName); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-14T13:33:57.740

如果您要将大量 VB.NET 转换为 C#，您可能需要查看[VBConversions 转换工具](http://vbconversions.net/)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-14T13:22:56.173

ReDim 重新分配数组。大多数情况下，这是一种代码异味：一种症状或真的想要一个集合类型而不是数组。这段代码应该做你想做的事：

```
string FileName = @"C:\MyPicture.jpeg";
byte[] binaryData;
long bytesRead;

using (var inFile = new System.IO.FileStream(FileName, System.IO.FileMode.Open, System.IO.FileAccess.Read) )
{
    binaryData = new byte[inFile.Length];
    bytesRead = inFile.Read(binaryData, 0, (int)inFile.Length);
}
//I'm assuming you're actually doing something with each byte array here 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-14T13:22:33.057

ReDim 用于调整数组大小。（如果需要，您也可以保留内容。此代码不这样做）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-14T13:33:37.083

这是一个永久性的解决方案，以防您将来需要再次执行此操作。

以下是在线 VB 到 C# 代码转换器的链接，反之亦然。一个在[这里](http://www.developerfusion.com/tools/convert/vb-to-csharp/)，另一个在[这里](http://converter.telerik.com/)。

LinkText1： http: [//www.developerfusion.com/tools/convert/vb-to-csharp/](http://www.developerfusion.com/tools/convert/vb-to-csharp/) LinkText2：[http ://converter.telerik.com/](http://converter.telerik.com/)

# perl - 如何列出给定范围内的所有变量？

> ID：747521
> 
> 赞同：32
> 
> 时间：2009-04-14T13:19:20.597
> 
> 标签：perl

我知道我可以使用and列出给定范围内的所有包和词法变量[`Padwalker`](http://search.cpan.org/dist/PadWalker/PadWalker.pm)，但是如何获取所有全局变量的名称和值，例如and ？`peek_our``peek_my``$"``$/`

```
#!/usr/bin/perl

use strict;
use warnings;

use PadWalker qw/peek_our peek_my/;
use Data::Dumper;

our $foo = 1;
our $bar = 2;

{
    my $foo = 3;
    print Dumper in_scope_variables();
}

print Dumper in_scope_variables();

sub in_scope_variables {
    my %in_scope = %{peek_our(1)};
    my $lexical  = peek_my(1);
    #lexicals hide package variables
    while (my ($var, $ref) = each %$lexical) {
        $in_scope{$var} = $ref;
    }
    ##############################################
    #FIXME: need to add globals to %in_scope here#
    ##############################################
    return \%in_scope;
} 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2009-04-14T15:47:05.640

您可以访问符号表，请查看 p。《Programming Perl》的293 也可以看看《Mastering Perl：[http](http://www252.pair.com/comdog/mastering_perl/) ://www252.pair.com/comdog/mastering_perl/ 具体：[http ://www252.pair.com/comdog/mastering_perl/Chapters/08.symbol_tables.html](http://www252.pair.com/comdog/mastering_perl/Chapters/08.symbol_tables.html)

您正在寻找的那些变量将位于主命名空间下

一个快速的谷歌搜索给了我：

```
{
    no strict 'refs';

    foreach my $entry ( keys %main:: )
    {
        print "$entry\n";
    }
} 
```

你也可以做

```
*sym = $main::{"/"} 
```

同样对于其他值

如果您想找到可以执行的符号类型（来自掌握 perl）：

```
foreach my $entry ( keys %main:: )
{
    print "-" x 30, "Name: $entry\n";

    print "\tscalar is defined\n" if defined ${$entry};
    print "\tarray  is defined\n" if defined @{$entry};
    print "\thash   is defined\n" if defined %{$entry};
    print "\tsub    is defined\n" if defined &{$entry};
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-14T17:07:04.497

就这样。感谢 MGoDave 和 kbosak 在我面前提供了我太愚蠢以至于看不到的答案（我从 %main:: 开始查看，但错过了他们没有他们的印记）。这是完整的代码：

```
#!/usr/bin/perl

use strict;
use warnings;

use PadWalker qw/peek_our peek_my/;
use Data::Dumper;

our $foo = 1;
our $bar = 2;

{
    my $foo = 3;
    print Dumper in_scope_variables();
}

print Dumper in_scope_variables();

sub in_scope_variables {
    my %in_scope = %{peek_our(1)};
    my $lexical  = peek_my(1);
    for my $name (keys %main::) {
        my $glob = $main::{$name};
        if (defined ${$glob}) {
            $in_scope{'$' . $name} = ${$glob};
        }

        if (defined @{$glob}) {
            $in_scope{'@' . $name} = [@{$glob}];
        }

        if (defined %{$glob}) {
            $in_scope{'%' . $name} = {%{$glob}};
        }
    }

    #lexicals hide package variables
    while (my ($var, $ref) = each %$lexical) {
        $in_scope{$var} = $ref;
    }
    return \%in_scope;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-14T15:52:19.637

您可以执行以下操作来检查主包的符号表：

```
{
    no strict 'refs';

    for my $var (keys %{'main::'}) {
        print "$var\n";
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-07-08T20:30:16.790

谢谢，Chas，非常有用的代码。作为 perl > 5.12 代码的未来用户的注释：

我在我的 pdl2 .perldlrc 中使用它来查找词法变量（如调试器中的 'y' 命令），我收到了以下警告：

> load_rcfile: 加载
> 
> /homes/pmg/.perldlrc defined(%hash) 在 (eval 254) 第 36 行已弃用。
> 
> ```
>  (Maybe you should just omit the defined()?) 
> ```

从 perldoc -f 定义

> 不推荐使用已定义的聚合（散列和数组）。它用于报告该聚合的内存是否已分配。这种行为可能会在 Perl 的未来版本中消失。您应该改为使用简单的大小测试：

```
>     if (@an_array) { print "has array elements\n" }
>     if (%a_hash) { print "has hash members\n" } 
```

我不明白的是为什么它只抱怨定义的哈希而不是数组？

# sql-server - MSSQL：只允许读取某些视图的受限帐户？

> ID：747538
> 
> 赞同：4
> 
> 时间：2009-04-14T13:22:37.063
> 
> 标签：sql-server, security

如何创建只允许读取特定数据库的某些视图的 MS SQL 服务器用户？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-14T13:31:58.227

这是一个脚本，它创建一个新用户并让他只选择特定视图的权限。

```
USE [master]
GO
CREATE LOGIN [LimitedUser] WITH PASSWORD=N'testPass', 
           DEFAULT_DATABASE=[master], 
           CHECK_EXPIRATION=OFF, CHECK_POLICY=OFF
GO
USE [TestDB]
GO
CREATE USER [LimitedUser] FOR LOGIN [LimitedUser]
GO
use [TestDB]
GO
GRANT SELECT ON [dbo].[myView] TO [LimitedUser]
GO 
```

# 编辑

与其为特定用户执行此操作，您可能需要考虑使用角色来代替。

```
USE [TestDB]
GO
CREATE ROLE [LimitedRole]
GO
GRANT SELECT ON [dbo].[TestView] TO [LimitedRole]
GO
EXEC sp_addrolemember N'LimitedRole', N'LimitedUser'
GO 
```

这样，如果您有多个用户，例如在 Windows 身份验证模式下，您可能有很多用户，所有用户都可以被授予访问此角色的权限。这样，当您添加/删除视图时，您不必接触每个用户。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-14T13:41:15.770

这样做的诀窍是不给 Public 角色任何明确的权限。每个用户都是该角色的不可撤销的成员，因此无法阻止数据库的任何用户拥有您授予 Public 的任何权利。

除此之外，您只需将用户添加到适当的数据库，并仅授予他们对您感兴趣的对象的权限。

# java - 是否有用于访问串行端口的 Java 库或框架？

> ID：747539
> 
> 赞同：17
> 
> 时间：2009-04-14T13:22:40.607
> 
> 标签：java, serial-port

在访问串行和并行端口（尤其是 RS-232 ）时，是否有易于使用的 java 库或框架（Sun 提供的 javax.comm 除外）。我需要可以在 Windows 和 Linux 上运行的免费软件。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-14T13:25:21.050

最常用的框架是[rxtx](http://rxtx.qbang.org/)。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-04-14T13:42:50.493

正如 andri 指出的那样，[RXTX](http://rxtx.qbang.org/)几乎是您的最佳选择。这里有一篇关于[在 Windows 上使用 RXTX](http://kuligowski.pl/java/rs232-in-java-for-windows,1)的文章（与 RXTX 2.1 相关）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-14T14:48:17.763

如果不需要免费——请记住，你的时间不是免费的——那么[Serial IO SerialPort](http://serialio.com/products/serialport/serialport.php/)可能会很有用。这是我发现在以下所有方面都按原样工作的唯一方法：

*   32/64 位 Windows
*   64 位 Solaris（未测试 32 位）
*   32 位 Linux（未测试 64 位）
*   Mac OS X

您确实获得了产品的源代码，尽管有一些奇怪和烦人的构建实践。

FWIW，我只是一个满足的用户，不隶属于公司。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-14T13:51:48.447

rxtx 正如其他海报所说的那样。我一直在使用它，而且效果很好。如果使用非标准高速波特率会出现问题（115200 的倍数，例如 230400、921600 都可以，但即使硬件和底层操作系统支持 1MB 也不行），我被告知这将在 rxtx 2.2 中得到纠正。

# .net - “Critical Section”、“Critical Region”和“Constrained Execution Region”的区别

> ID：747551
> 
> 赞同：15
> 
> 时间：2009-04-14T13:24:12.863
> 
> 标签：.net, critical-section, critical-region, constrained-execution-reg

这实际上是三个不同的概念还是我变得混乱？（我一直在阅读有关线程和垃圾收集的文章，并让自己感到困惑。）

**“关键部分”** - 我认为这可能只是您不希望多个线程同时访问的代码部分的术语，即在 lock 和 Monitor.Enter/Exit 语句中？

**“关键区域”** ——这里没有真正的线索——MSDN 说了类似“这告诉主机在该部分中抛出的异常可能会产生更广泛的影响”。并且“CLR 的主机，例如 Sql Server”可以选择“以不同的方式”处理关键区域内抛出的异常。不一样怎么办？为什么？而且，最重要的是，在哪些现实世界场景中，我可能需要将代码标记为关键区域？

**“受约束的执行区域”** - 我在阅读垃圾收集文章中的 CriticalFinalizerObject 时遇到了这个问题。

我可以从 MSDN 中了解到，这些区域之一中的代码以某种方式保证运行（但如何运行？），因此不得抛出“带外”异常。

什么是`out-of-band exception`? （我确实在谷歌上搜索过，但它只是问我是否是指“越界异常”）。

是否有任何未处理的异常？还是只有某些类型的例外？再一次，最重要的是，在哪些现实世界场景中我可能需要“受约束的执行区域”？

由于我完全不了解这些概念，因此我不确定这个问题除了“.NET”之外还需要什么标签。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-01-04T00:56:13.283

微软可能对事物的定义不同，但总的来说，**临界区**和**临界区**是**同一回事**。

它们用于描述两个或多个进程（或线程）正在**访问**同一**共享内存的*****区域***，*如果无法*协调它们将导致竞争条件，从而阻止所需的执行行为，例如 Pétur 给出的递增的经典示例并减少上面的变量。

 *可以在 Tanenbaum, AS 和 Bos, H. (2015) 中找到一个很好的讨论。*Modern Operating Systems* (Pearson, Boston, Ma)，第 4 版，第 1101 页。早期版本以及提供操作系统课程材料的众多大学的课程网站。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-14T13:58:27.570

只是我对这些概念的理解：

**关键部分**- 正如你所说。

**临界区**- 这似乎是“不要让异常从线程中逃脱”的大图版。

**受约束的执行区域**——这是一种通过防止异常中断来使一段代码或多或少具有原子性的方法。[此页面上](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.runtimehelpers.prepareconstrainedregions.aspx)的示例使用它来确保句柄的分配和存储都被执行。请注意，没有回滚，它更像是一个预防系统。

有一些“正常编程”的指导方针看起来有点像这样，即当覆盖 Equals 或隐式运算符时，你不应该抛出（任何东西）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-14T13:49:54.940

根据 Joe Duffy 在 Windows 上的并发编程，临界区/区域的定义如下：

**临界区**：在 Win32 中临界区是一个简单的数据结构（`CRITICAL_SECTION`），用于构建临界区。

**临界区**：是一个享有互斥的代码区域（这似乎是您在上面所说的临界区）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2010-11-10T02:17:55.413

这篇博文将填补你的困惑。 [关联](https://web.archive.org/web/20150826080016/http://blogs.msdn.com:80/b/bclteam/archive/2005/06/14/429181.aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-23T16:18:23.543

**临界区**一组指令，其中一些访问共享对象。

暂时忽略 ProcessA 和 ProcessB 都可以同时执行。如果 ProcessA 或 ProcessB 要由许多不同的线程同时执行，您不希望依赖 x 的值，因为它很可能会导致竞争条件。

在此示例中，两个 while 循环是关键部分。

```
int x = 0;
Process A() {
    while(true) {
        x++;
        x--;
    }
}
Process B() {
    while(true) {
        x++;
        x--;
    }
} 
```

**临界区**一组临界区。

现在假设您可以同时执行 ProcessA 和 ProcessB。每个进程都有一个临界区。两个部分共享相同的变量 (x)。两个临界区一起形成一个临界区。为什么这很重要？如果您假设 ProcessA 的关键部分由互斥保护，您仍然会在 x 中得到不正确的结果，因为 ProcessB 不遵守互斥。您需要在关键区域上实现互斥，方法是在构成该区域的每个关键部分上实现互斥。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-14T16:36:40.873

在 Windows 中，到目前为止，我只使用了**关键部分。**根据我的经验，它是一种 Win32 用户空间线程锁定机制。这意味着它可以在一个进程中用于锁定多个线程共享的资源。这不是系统范围的，只是进程范围的。它不是一个例子是内核空间锁（如互斥锁）。

例如，boost::thread 在其 Win32 实现中使用了关键部分——或者至少在我使用它时是这样——并在 Linux 中通过 pthreads 使用互斥锁。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-25T08:48:05.037

任何在另一个进程进入之前应该由每个进程完成的代码部分称为临界区。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-03-17T17:59:44.727

临界区：是一段代码。每个进程都有一个临界区，用于交换公共变量、更新表、写入文件等...重要的特点是，当一个进程在其临界区执行时，不允许其他进程进入其临界区，并提供手动排除。当然，为了实现这一点，当有 arw 'n' 个进程时，使用称为“信号量”的同步工具。信号量是一个整数变量。

临界区：是一种同步结构，可防止与程序员可能对临界区问题的信号量解决方案相关的某些简单错误。

# c# - 从字符串填充 XDocument

> ID：747554
> 
> 赞同：376
> 
> 时间：2009-04-14T13:24:43.690
> 
> 标签：c#, xml, c#-3.0, linq-to-xml

我正在做一些事情，并试图弄清楚是否可以从字符串中加载 XDocument。`XDocument.Load()`似乎将传递给它的字符串作为物理 XML 文件的路径。

我想尝试绕过首先必须创建物理 XML 文件并直接跳转到填充 XDocument 的步骤。

有任何想法吗？

* * *

## 回答 #1

> 赞同：574
> 
> 时间：2009-04-14T13:27:37.537

你可以用[`XDocument.Parse`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.parse.aspx)这个。

* * *

## 回答 #2

> 赞同：84
> 
> 时间：2009-04-14T13:28:03.680

您可以使用[`XDocument.Parse(string)`](http://msdn.microsoft.com/en-us/library/bb345532.aspx)而不是`Load(string)`.

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2009-04-14T13:29:51.993

这个怎么样...？

```
TextReader tr = new StringReader("<Root>Content</Root>");
XDocument doc = XDocument.Load(tr);
Console.WriteLine(doc); 
```

这取自 XDocument.Load 的 MSDN 文档，可在此处找到...

[http://msdn.microsoft.com/en-us/library/bb299692.aspx](http://msdn.microsoft.com/en-us/library/bb299692.aspx)

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2009-04-14T13:29:37.813

尝试[解析](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.parse.aspx)方法。

# c# - 列表 方法 () where T : Iclient 无法将客户端对象添加到列表中

> ID：747576
> 
> 赞同：2
> 
> 时间：2009-04-14T13:29:16.953
> 
> 标签：c#, .net, generics, generic-method

公共 IList GetClientsByListofID(IList ids) 其中 T : IClient { IList clients = new List(); 客户。添加（新客户（3））；}

我在这里遇到编译器错误：

**无法从“Bailey.Objects.Client”转换为“T”**

客户端对象实现 IClient 接口。我的目标是尝试放松我的类之间的耦合（学习 DI 的东西 atm）。我在想我可以说它可以使用任何类型的客户端对象并且会被返回。

我完全不在这儿吗？

谢谢

乔恩·霍金斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-14T13:32:02.517

您不能以这种方式使用通用约束。编译器如何保证类型参数`Client`只是因为它实现了`IClient`接口？许多类型不能实现该接口吗？

在这种情况下（*即在您需要使用类型而不是接口的情况下*）最好使用类型本身来约束类型参数，如下所示：

```
public IList<T> GetClientsByListofID<T>(IList<int> ids) where T : Client
{
    IList<T> clients = new List<T>();
    clients.Add(new Client(3));
    // ...
} 
```

一旦这样做，我想知道您是否需要一个通用方法：

```
public IList<Client> GetClientsByListofID(IList<int> ids)
{
    IList<Client> clients = new List<Client>();
    clients.Add(new Client(3));
    // ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T13:36:27.937

`Client`是一个`IClient`。 `T`是一个`IClient`。

你在哪里指定这`T`是一个`Client`？无处！

我认为您需要一个`IClientFactory`or`IClientRepository`来为您创建/检索 IClient 实例。然后，您将能够使用此工厂/存储库的不同实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-14T13:55:54.130

试试这个：

```
public interface IClient
{
    string Name { get; }
}

public class Client : IClient
{
    public string Name { get; set; }
}

     ...

public IList<T> GetClientsByListofID<T>( IList<int> ids )
         where T : class, IClient
{
    var clients = new List<T>();
    var client = new Client { Name = "bob" } as T;

    clients.Add( client );

    return clients;
} 
```

用法：

```
 var clients = this.GetClientsByListOfID<Client>( null ); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-14T14:10:21.333

您的问题不在约束范围内

```
where T : IClient 
```

而是在使用您的列表时。

你不能这样说：

```
IList<T> clients = new List<T>();
clients.Add( new Client(3)); 
```

你可以这样说：（这假设你的约束包括“新”）

```
IList<T> clients = new List<T>();
clients.Add( new T()); 
```

在这种情况下，您的约束将需要是：

```
 where T : new(), IClient 
```

或者你可以这样做，但它根本不会使用泛型：

```
IList<T> clients = new List<Client>();
clients.Add( new Client(3)); 
```

你不能做你想做的事情的原因是因为编译器不能保证类型 T 将是客户端类型，这就是它给你编译器错误的原因。它实际上与您的约束没有任何关系。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-14T14:00:33.917

您正在做的事情不起作用，因为在 C# 3.0 中，泛型不支持协变。

你可以这样做：

```
 interface IClient
    {
        int Id { get; set; }
    }

    class Client : IClient
    {
        public int Id { get; set; }
        public Client() { }
    }

    // ...

    public IList<T> GetClientsByListofID<T>(IList<int> ids) where T : IClient, new()
    {
        IList<T> clients = new List<T>();
        clients.Add(new T() { Id = 3 });
        // ...
        return clients;
    } 
```

...但我想知道你是否需要泛型。

# sql-server-2005 - 如何处理宽的扁平表的列增长

> ID：747596
> 
> 赞同：0
> 
> 时间：2009-04-14T13:35:34.567
> 
> 标签：sql-server-2005, database-design

DBA 将如何处理这个问题？我已经拥有了一个现有的应用程序 (VB6) 和 1999 年编写的数据库。数据库设计相当“扁平”，这意味着主表相当宽（100 多列），开发人员继续在其他列上添加桌子的尽头。这导致列有很多 Null，因为它们与主键没有直接关系。

我正在考虑将主表拆分出来，以便将自己从多年来的“列爆炸”中抽离出来。我敢肯定，随着新要求的出现，新字段将继续添加。

所以问题是，当需要新字段时，你是否继续增加现有表格的宽度？或者您是否停止扩展现有表并将其拆分为一个单独的支持表，该表将容纳新字段，从而创建一对一的关系？如果要拆分主表，您的**命名方案**是什么？

假设对于这个例子，我有一个名为“Foreclosure”的表，其中包含 150 个字段。新的 1 对 1 表的好名字是什么？“止赎延长”？止赎其他信息'？

顺便说一句，需要修改视图和存储过程以支持任何新表，但无论如何添加列时这是不可避免的。

提前感谢您的任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-14T13:44:37.900

80% 的时间，你的空值有明确的模式。

这些模式定义了表的子类。在您的情况下，它们将是`Foreclosure`.

您的拆分应该基于这些子类关系。

比如说，有些`Foreclosure`实例有一堆与法律程序相关的字段，几乎都被填写了。而其他`Foreclosure`实例的法律程序字段则完全用空值填充。

你有两个班级。你需要弄清楚它们之间的关系——它们是超类-子类还是其他超类的对等子类？

这告诉您如何对表进行分区以使有用的东西发生。

*   您可能有适当的超类子类关系

*   `LegalProceeding`你可能已经找到了一个本来应该是一个单独的表的东西 (a )。它不应该永久加入`Foreclosure`. 这非常普遍。

您现在有一些关系实现选择。

*   一个常见的选择是将所有子类放入一个包含大量空值的大型表中。这就是你今天所拥有的，但它不起作用。

*   一种选择是将两个子类关系表拆分为对等，复制公共信息。

*   一种选择是拥有一个超类表，其中包含对子类中附加信息的可选 FK 引用。

*   一种选择是有一个子类表，其中包含对超类信息的强制 FK 引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T13:54:39.687

除非您真的很勇敢，否则应用程序非常小/简单，或者存在重大性能问题，请不要修复架构。如果它没有坏，就不要修理它。

只需按照您的建议使用相同的键创建一个新表 ForeclosureExtended 并开始添加列。或者，您可以在出现新列时制作带有分组列的适当表格。无论哪种方式，如果架构如此糟糕，我敢打赌代码非常脆弱。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-14T13:57:51.393

为什么觉得自己有问题？在我看来，处理一个包含很多列的表比处理大量更窄的表和您必须维护的所有相关视图更容易。

# visual-studio - 我们如何跟踪工作副本的分支？

> ID：747597
> 
> 赞同：9
> 
> 时间：2009-04-14T13:35:37.017
> 
> 标签：visual-studio, svn, tortoisesvn, visualsvn, ankhsvn

有什么好的技术可以帮助我们知道我们的工作副本来自哪个分支（或主干）？我们最近转换为 Subversion，并且正在使用发布分支。我有两个开发人员将更改提交到应该提交到主干的发布分支。我们正在使用 CI (TeamCity)，所以我立即认识到了问题并能够恢复更改，但我想防止它再次发生。特别是在 Visual Studio 中，很容易犯错误并提交到错误的分支。

我们正在使用 TortoiseSVN 和 AnkhSVN。

编辑补充：只是为了澄清，我正在寻找一种防止粗心错误的方法，我已经知道如何找到这些信息。我试图防止两个粗心的错误：

1.  在错误的分支上工作。如果这在提交之前被捕获，开发人员必须将更改合并回正确的分支。
2.  提交到错误的分支。这结合了第 1 点的痛苦和必须恢复 Subversion 中的更改。

编辑添加：我们刚刚切换到 VisualSVN VS 插件，它有一个工具栏，显示当前工作副本的路径。我真的很喜欢我在正确的分支上工作的保证。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-14T13:58:15.620

也许您应该考虑使用预提交挂钩：[http ://svnbook.red-bean.com/nightly/en/svn.reposadmin.create.html](http://svnbook.red-bean.com/nightly/en/svn.reposadmin.create.html)

然后你可以做一些事情，比如只批准在特定分支的评论中包含“for release”的签入或类似的事情，否则返回错误消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-14T14:24:28.523

Tortoise SVN 将列添加到 Windows 资源管理器视图。在“详细信息”模式下，右键单击列标题以获取可用列的列表，在底部选择“更多”以获取所有可用列类型的对话框。

SVN 短 URL 应该会快速向您显示存储库中的位置。

但这似乎在 vista 下不起作用......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-15T11:43:04.550

在 AnkhSVN（在 Visual Studio 中）中，工作副本的项目 url 显示在 Pending Changes 窗口（View->Pending Changes）的“Working on”字段中。

当您在 Pending Changes Window 或 Working Copy Explorer 中选择一个文件时，文件/文件夹的 url 也会显示在 Visual Studio 项目窗口中（在许多情况下，即使您在解决方案资源管理器中选择了一个文件；但这取决于项目类型）。

[更新：我刚刚添加了 AnkhSVN[问题 #581](http://ankhsvn.net/issues?id=581)以扩展提交对话框。]

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-14T13:39:10.253

右键单击文件夹，移动到颠覆选项卡，那里显示它链接到的项目。

此外，在提交对话框中，它在对话框顶部这样说。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-14T13:47:43.633

从工作目录：

```
svn info 
```

URL 将包含您的工作目录指向的分支。

<EDIT> 看到有多少人不喜欢命令行，我从 TortoiseSVN 找到的关闭的东西是“repo browser”，它似乎使用选定的分支作为你在 repo 中的起始路径。</编辑>

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-14T14:26:50.763

避免重复使用工作副本。如果您在存储库中的 2 个位置工作，请有 2 个工作副本，并适当命名，例如：Project-trunk、Project-release。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2010-07-22T14:25:59.847

这是一个可能有帮助的简单想法：
创建一个名为“branch_XX”（或任何名称）的空文本文件并将其添加到您的分支。
提交这个，然后当您切换到主干时，该文件将不会出现在解决方案资源管理器中。

这听起来很愚蠢......但它的伎俩。

我真的希望他们能添加一些东西来标记我们正在使用的分支，而无需转到其他窗口。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-08-06T11:20:03.737

在 AnkhSVN（在 Visual Studio 中）中，右键单击您的项目/解决方案，然后源代码控制 -> 颠覆 -> 在存储库资源管理器中选择。它将自动选择您当前正在处理的分支（即您切换到的分支）。

我认为 AnkhSVN 的公认答案不适用于项目，因为即使在项目上使用“切换项目”选项后，我也总是在“待定更改”中看到相同的 URL。

# asp.net - 你能通过没有专有软件的 ASP.NET 发送传真吗

> ID：747603
> 
> 赞同：3
> 
> 时间：2009-04-14T13:36:58.323
> 
> 标签：asp.net, vb.net

我想知道是否可以通过 ASP.NET 发送传真而不使用专有传真软件（即使用所有 .NET 本机类）

我所追求的只是将生成的 PDF 发送到远程传真机而不是打印机。

已经有[这个](https://stackoverflow.com/questions/545173/sending-fax-with-net)问题了，但是这个小伙子使用第 3 方程序作为传真软件

编辑：我们无法控制远程传真，并且几乎看不到传真的设置方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-14T13:44:02.007

如果您设置了 Microsoft 传真服务器，则可以使用 Interop.FAXCOMLIB COM 组件连接到服务器并发送传真。这不是一个纯粹的 .NET 解决方案，但您可以从任何 .NET 代码执行此操作。我也不确定是否要发送 PDF。我只用图片做过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T13:45:01.957

最简单的方法是将传真服务器设置为网络打印机，然后您可以从您的应用程序进行打印。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-14T13:48:48.187

有许多传真到电子邮件提供商通过将任何 pdf 电子邮件附件转发到您指定的传真号码来工作。这种方法还有一个优点，即您不必担心大型传真会占用您的电话线或在传真线已经占线时排队和重试等。

.Net Mail 类易于使用，可以轻松发送带有 .pdf 附件的电子邮件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-14T13:49:07.610

您可能会发现使用为您发送传真的第三方服务更容易、更可靠。有一些服务非常便宜并且有网络服务前端。

这样，他们将处理所有重试逻辑，例如当线路忙或电路忙等时......

这也使您的 Web 服务器与发送传真分离。如果您在 Asp.Net 请求管道中发送传真，我只能想象这会对可伸缩性产生什么影响。更不用说当五个用户同时发送传真时会发生什么。

# php - 在哪里可以找到双美元 PHP 语法的参考资料？

> ID：747605
> 
> 赞同：3
> 
> 时间：2009-04-14T13:37:37.480
> 
> 标签：php, syntax

我希望这里的每个人都知道 php 'variable variable' 语法：

```
$color = 'red';
$red = 'yes, im red';
echo $$color;
//output: 'yes, im red'; 
```

但我的问题是：这种语法是如何命名的？我正在尝试在 php.net 上查找参考，但没有结果（我想知道此功能是否会保留在 php6、其他属性等中……）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-14T13:38:37.557

[变量变量](http://is.php.net/manual/en/language.variables.variable.php)

是的，据我所知，它将保存在 PHP6 中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-14T13:42:44.287

只是分享一些技巧。

为避免混淆，您可以使用花括号。

```
${$color} 
```

我的一位团队成员删除了双 $，考虑到拼写错误。也许这样做可以避免混淆。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-10-03T15:28:14.930

从 php 中删除它将是一个非常没有意义的决定，因为此功能在许多情况下非常方便，同时没有与之相关的真正缺点/问题。

# c# - .NET 2.0 Web 服务 WSDL 故障元素被忽略？

> ID：747606
> 
> 赞同：2
> 
> 时间：2009-04-14T13:37:45.313
> 
> 标签：c#, .net, web-services, wsdl, asmx

我有一个 Web 服务方法，我想在其中抛出一些自定义异常，例如 SomeException、SomeOtherException 等，然后 Web 服务将变成客户端能够处理的 SOAP 错误。在 Java 中，我可以在 WSDL 的 wsdl:operation 元素中包含 wsdl:fault 元素。.NET 似乎不适合这种情况，并且无法将属性放在 WebMethod 上以显示可能发生的 SOAP 错误。

如果我创建一个具有 wsdl:fault 元素的 Java Web 服务并添加对 .NET 项目的 Web 引用，我会期望 wsdl:fault 元素会导致创建适当命名的异常，就像创建其他实体一样，但是这似乎并非如此。

.NET 是否完全忽略了 WSDL 中的 wsdl:fault 元素？它们是[http://www.w3.org/TR/wsdl](http://www.w3.org/TR/wsdl)中定义的 WSDL 规范的一部分，所以这不是我所期望的行为。

如果是这种情况，可能的解决方法可能是返回一个包含成功/失败布尔值和错误消息/枚举的结果对象。或者通过使用 SoapExceptions。如果我选择使用 SoapExceptions，那么我会将重点放在我的 Web 服务的用户上，以处理这些并正确反序列化它。这两种方法似乎都不是处理这个问题的好方法，并添加了额外的问题和代码来解决这个问题。

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-14T13:43:19.870

由于您要求.net 2.0，我想您知道这在 WCF 中是“固定的”，您可以在其中添加属性 [FaultContract(typeof(YourCustomException))]。

正如您所说，在 2.0 中完成此操作的“正常”方式是添加一个带有成功布尔值、结果和错误属性的响应消息。

您通常可以在 EntLib 中看到这是如何完成的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-14T14:03:45.703

ASMX Web 服务不支持客户端或服务器上的 wsdl:fault 元素。他们永远不会。

正如[ThorHalvor](https://stackoverflow.com/users/63243/thorhalvor)所说，对此的错误修复称为“WCF”。

我已经成功地手写了一个包含 wsdl:fault 元素的 WSDL，然后通过将错误消息作为 SoapException 的 Detail 属性通过 ASMX Web 服务返回了这些错误。然后，Java 和 WCF 客户端正确地将其视为适当类型的异常。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-01T17:52:03.447

```
[return: System.Xml.Serialization.XmlElementAttribute("ResultWS", typeof(ResultWS), Namespace = "http://...")]
[return: System.Xml.Serialization.XmlElementAttribute("ResultFaultWS", typeof(ResultFaultWS), Namespace = "http://...")]
public object SumTest_Operation([System.Xml.Serialization.XmlElementAttribute(Namespace = "http://...")] ParamWS param)
{            
    ResultWS result = null;
    try
    {
        result.Value = param.P1 + param.P2;              

    }
    catch (Exception)
    {
        ResultFaultWS resultFault = new ResultFaultWS();
        resultFault.Status = noOK;

        return resultFault;;
    }
    return result;
} 
```

# sharepoint - 是否有用于编写可升级的 SharePoint 工作流的设计模式？

> ID：747609
> 
> 赞同：2
> 
> 时间：2009-04-14T13:38:56.167
> 
> 标签：sharepoint, serialization, workflow, upgrade

我在另一个线程上问了一个关于升级长期运行的工作流程的问题，但没有收到我想听到的答案。（[如何升级已经投入生产的长期运行的 SharePoint 工作流](https://stackoverflow.com/questions/357032/how-to-upgrade-a-long-running-sharepoint-workflow-already-in-production)）

答案与我在该主题上所做的其他研究相匹配，建议以并行方法安装新的 WF（工作流）并将旧 WF 标记为无新实例。

我已经读过，如果新的 WF 具有相同的界面，那么可能只需替换原始 WF 的 dll，现有的长期运行的工作流程将继续运行。

是否有设计模式或指南可用于创建允许在产品生命周期内更改代码的原始工作流，而无需替换每个 SharePoint 列表实例中的工作流？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-07T01:31:37.237

SharePoint 中的工作流有两个部分 - .net 代码和 xml 配置。

对于代码中的更改，您可以进行更改并重新部署您的解决方案包 - 只要程序集的强名称不更改，新代码将在现有工作流中下一次发生事件时被调用。在进行更改时，您只需要小心，您的代码不会假定工作流是使用当前代码启动的。

xml 配置（实际上是工作流的接口定义）中的任何更改都需要更完整的新部署。

# dom - 如何使用 ActiveState 的 dom 包向元素添加数据

> ID：747613
> 
> 赞同：1
> 
> 时间：2009-04-14T13:40:31.593
> 
> 标签：dom, tcl, activestate, activetcl

在 TCL 中，如果您使用 DOM 包（可在 ActiveState 发行版中获得），您可以创建一个 xml。

```
set xmlDoc [::dom::create]
set root [::dom::document createElement $xmlDoc "trafficStatistics"]

set statElement [::dom::document createElement $root "Tx_Frames"]
::dom::element setAttribute $statElement "type" "numericlist"
::dom::element setAttribute $statElement "displayName" "Tx Frames"

puts [::dom::serialize $xmlDoc -indent true] 
```

创建这个简单的 xml：

```
<result>
    <trafficStatistics type="structure">
        <Tx_Frames type="numericlist" displayName="Tx Frames"></Tx_Frames>
    </trafficStatistics>
</result> 
```

如何向 Tx_Frames 元素添加一些数据？

```
<Tx_Frames type="numericlist" displayName="Tx Frames">some data</Tx_Frames> 
```

请注意，dom 包实际上是 libxml2 的包装器

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-14T15:25:13.120

我相信你想要这个`::dom::document createTextNode`命令。例如：

```
::dom::document createTextNode $statElement "some data" 
```

当我将此命令添加到您的示例脚本时：

```
set xmlDoc [::dom::create]
set root [::dom::document createElement $xmlDoc "trafficStatistics"]

set statElement [::dom::document createElement $root "Tx_Frames"]
::dom::element setAttribute $statElement "type" "numericlist"
::dom::element setAttribute $statElement "displayName" "Tx Frames"
::dom::document createTextNode $statElement "some data" 
```

它产生这个 XML：

```
<trafficStatistics>
  <Tx_Frames type="numericlist" displayName="Tx Frames">some data</Tx_Frames>
</trafficStatistics> 
```

你可以在这里找到 dom 包的文档：

[http://docs.activestate.com/activetcl/8.5/tcldom/index.html](http://docs.activestate.com/activetcl/8.5/tcldom/index.html)

希望有帮助，

埃里克·梅尔斯基

# android - 如何在 G1 电话上设置主机名

> ID：747614
> 
> 赞同：3
> 
> 时间：2009-04-14T13:40:56.270
> 
> 标签：android, hostname

我有一个 root'd G1 电话，我想设置它的主机名。作为 root 我可以运行`hostname`命令并设置它，但该名称在重新启动后无法生存。

首先，我尝试创建一个`/etc/hostname`只包含我的主机名的文件，但这不起作用。

接下来，我`/etc/hosts`这样编辑：

```
127.0.0.1     g1-phone localhost 
```

然而这也失败了。有没有其他方法可以尝试永久设置主机名？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-09-19T15:30:22.393

适用于 Android 手机的 Cyanogen ROM 包含一个您可以自定义的 userinit.sh 脚本。About 页面是这样描述的：

```
Runs /system/sd/userinit.sh after A2SD setup and before starting the runtime for user scripts 
```

[http://www.cyanogenmod.com/about](http://www.cyanogenmod.com/about)

我没有尝试将主机名命令放在那里，因为我在论坛中读到很容易破坏该脚本并且要么变砖要么必须重置手机。

# .net - 如何让移动应用保持领先？

> ID：747615
> 
> 赞同：3
> 
> 时间：2009-04-14T13:41:11.857
> 
> 标签：.net, windows-mobile, compact-framework

我正在为 Windows Mobile 开发一个移动应用程序。我希望该应用程序在启动时由系统默认启动，并且用户无法将其最小化。

所以只有这个应用程序可用，所有其他功能都被禁用。

我确信我可以定义一个启动器，它在启动时执行。但是我想到了一些问题：是否可以进行一些内存优化？我的意思是，因为只有一个应用程序可用和使用，也许其他一些程序可以被禁用，这可能会减少使用的内存？

你有这个目的的链接吗？

## 编辑

感谢您的回答。我阅读了您关于信息亭模式的链接，并发现了另一篇关于此主题的非常有趣的帖子。

它说，对于kiosk模式的应用程序，从长远来看，使用Windows CE而不是Windows mobile似乎更好，因为前者更容易适应这些需求。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-14T13:44:16.967

以后可能会发布更多有用的东西，但现在我可以告诉你你想在谷歌搜索的词是：“信息亭模式”。

**更新**-*有用的东西（希望如此）*

现在坦率地说，任何信息亭模式或多或少都是一种黑客行为。Windows Mobile 不是为它设计的，当您遇到越来越多的边缘情况时，您会发现奇怪的差距，但是对于大多数程序而言，以下内容就足够了：

* * *

**任务 1** -*覆盖 UI 和任务栏，使其无法访问：*

在主窗体上，将 WindowState 设置为 Maximized，将 FormBorderStyle 设置为 None。在较旧的操作系统上，您可能需要实际禁用任务栏本身并将表单移到其顶部。这是通过 PInvoking 实现的：

FindWindow 带有参数“HHTaskBar”（这可能取决于平台，HHTaskbar 适用于 Pocket PC 2003）和 String.Empty

```
[DllImport("coredll.dll", EntryPoint="FindWindowW", SetLastError=true)]
private static extern IntPtr FindWindowCE(string lpClassName, string lpWindowName); 
```

EnableWindow 与来自 FindWindow 的 IntPtr 和 false

```
[DllImport("coredll.dll", SetLastError=true)]
public static extern bool EnableWindow(IntPtr hWnd, bool bEnable); 
```

ShowWindow 与来自 FindWindow 的 IntPtr 和 0 (SW_HIDE)

```
[DllImport("coredll.dll")]
public static extern bool ShowWindow( IntPtr hwnd, int nCmdShow); 
```

* * *

**任务 2** -*防止硬连线的应用程序密钥。*

你知道的，按橙色和左键，它会自动打开 Pocket Outlook。为此，我将在这里打破排名，并推荐我知道的唯一可行的方法，即使用未记录的 Win32 API 调用。这是一个非常稳定的调用，我每天都有一系列使用它的项目运行我只是想在未来的升级中，如果代码被删除，我可能需要修改代码，所以请记住这一点。

您需要通过 PInvoke 调用设置一个低级系统范围的键盘挂钩：

```
[DllImport("coredll.dll")]
private static extern IntPtr SetWindowsHookEx(int idHook, HookHandlerDelegate lpfn, IntPtr hMod, uint dwThreadId); 
```

这是相当复杂的，最好只是指向像[这样](http://www.codeproject.com/KB/system/CSLLKeyboard.aspx)的指南来解释理论。基本前提是发现烦人的“特殊键”的keycode，然后通过钩子将它们屏蔽（即不要传递它们）。

如果您正在研究 CF，我建议您也深入研究 OpenNETCF，因为我相信它内部已经有一个全局 KeyHook。

正如我之前所说，这并不完美，IIRC 音量控制是不可阻止的，如果您不在注册表中设置各种标志（告诉它），新无线网络等通知可能会侵入您的信息亭模式不要那样做:)）。

尽管如此，这并没有太多的努力，对于您的大多数应用程序来说应该足够了。

* * *

**任务 3** -*让您的应用从启动开始运行*

根据设备的不同，这一点可能会有很大的不同。如果您想保留托管代码，问题是 NETCF 未预装在某些设备上。在大多数情况下，您可以只编写一个位于 autorun 目录中的非托管引导程序（应该有一个，检查制造商的文档），然后安装 .NETCF、您的应用程序，然后运行您的应用程序。如果您不想弄脏非托管代码，那么大多数硬件制造商都会提供某种脚本系统来设置您认为合适的设备。然而，这些可能会以不同程度的有效性起作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-14T14:03:45.750

您想在“信息亭模式”下运行您的设备。实际上，Windows Mobile 设备并不打算在 kiosk 模式下运行。如果您可以选择要使用的设备，请选择一个 Windows CE 设备，您可以为其修改映像。Windows CE 设备确实可以选择在 kiosk 模式下运行。这是最好的解决方案，但是您需要 Platform Builder 和可以下载图像的设备。

对于 Windows Mobile，您可以“模拟”信息亭模式。这是你需要做的：

*   在启动时启动您的应用程序。
*   使您的应用程序全屏显示。任务栏应该是隐藏的。
*   拦截可以让您远离应用程序的硬件按钮
*   如果其他程序在启动时运行，请禁用它们。通常程序不会在启动时启动，所以你不应该担心这个。

这篇[文章](http://www.codeproject.com/KB/smart/CF_kiosk_mode.aspx)可以作为一个起点。我相信实现一个通用的解决方案将是困难的，甚至是不可能的。而是专注于单个设备。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-14T14:14:30.480

这是[一篇关于 CodeProject](http://www.codeproject.com/KB/smart/CF_kiosk_mode.aspx)的文章，其中讨论了将设备置于 Kiosk 模式。

这至少对您来说是一个入门，但请务必注意文章中列出的有关示例将在哪些设备上运行的警告！

# php - 在 PHP 中读取重音字符时出现问题

> ID：747618
> 
> 赞同：0
> 
> 时间：2009-04-14T13:42:15.003
> 
> 标签：php, encoding

在 PHP 领域遇到了一个奇怪的问题。这是一个精简的示例：

```
 $handle = fopen("file.txt", "r");
    while (($line = fgets($handle)) !== FALSE) {
        echo $line;
    }
    fclose($handle); 
```

例如，如果我有一个如下所示的文件：

```
Lucien Frégis 
```

然后从命令行运行的上述代码输出相同的名称，但我得到的不是 e 锐角：

```
Lucien FrÚgis 
```

查看文件的十六进制转储，我看到有问题的字节是 E9，这是我在 php 的默认编码 (ISO-8859-1) 中对 e 急性期的期望，通过输出 default_charset 的当前值来确认。

有什么想法吗？

编辑：

正如建议的那样，我检查了 Windows 代码页，显然它的 850 已过时（但确实解释了为什么 0xE9 以它的方式显示......）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-14T14:25:16.960

`0xE9`是iso-8859-1中**é的编码。**它也是同一字符的 unicode 代码点。如果您的控制台以不同的编码（例如 cp-850）解释输出，则相同的字节将转换为不同的代码点，从而在屏幕上显示不同的字符。如果您查看[cp-850 的代码页](http://en.wikipedia.org/wiki/Code_page_850)，您会看到该字节`0xE9`转换为**Ú**（Unicode 代码点`0xDA`）。所以基本上你的控制台错误地解释了字节。我不确定如何，但您应该将控制台的字符集更改为 iso-8859-1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-14T14:48:24.550

在命令行上运行 php 之前，请尝试执行以下命令：

```
chcp 1252 
```

这会将代码页更改为您所期望的重音字符。

有关 850 和 1252 代码页之间的区别，请参见以下链接：

[http://en.wikipedia.org/wiki/Code_page_850](http://en.wikipedia.org/wiki/Code_page_850)

[http://en.wikipedia.org/wiki/Windows-1252](http://en.wikipedia.org/wiki/Windows-1252)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2009-04-14T14:13:00.047

重音可能被认为是 unicode 数据，您必须将其存储为这样。查看[`utf_decode`](http://www.php.net/utf_decode)、[`utf_encode`](http://www.php.net/utf_encode)和[`iconv`](http://www.php.net/iconv)函数。

不用等待，它在[ISO 8859-1](http://htmlhelp.com/reference/charset/iso224-255.html)字符集中。我不知道。您是否尝试过以二进制模式阅读或使用`file_get_contents`？

# svn - 如何使用 Subversion 设置网络“参考目录/文件夹”？

> ID：747635
> 
> 赞同：0
> 
> 时间：2009-04-14T13:47:11.280
> 
> 标签：svn

我们正在转向使用 Subversion（Windows 平台，TortoiseSVN 作为客户端）作为我们的版本控制系统。使用我们之前使用过的工具，可以在网络上设置一个“参考目录”或文件夹，用于存储已签入的所有内容的最新版本，这样人们就可以轻松浏览最新版本，而无需使用专用工具。是否可以配置 Subversion 来执行此操作？

理想情况下，它会在每次签入时更新此参考目录。如果做不到这一点，每天更新就足够了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-14T13:58:13.577

如果您只需要查看每个单独文件的最新版本，那么与[Apache SVN](http://svnbook.red-bean.com/en/1.4/svn-book.html#svn.serverconfig.choosing.apache)的默认 Web 服务器集成就可以解决问题。

否则，如果您想通过文件系统访问完整的目录结构，任何简单的脚本都可以运行 svn update 命令。

您可以使用一个简单的任务来运行[CruiseControl](http://cruisecontrol.sourceforge.net/)之类的东西，该任务会监视存储库并在每次更改时进行更新。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-14T14:44:18.630

有很多方法可以做到这一点：

*   [如果您使用 Apache 存储库访问方法，您可以使用Repository Browsing](http://svnbook.red-bean.com/en/1.5/svn.serverconfig.httpd.html#svn.serverconfig.httpd.extra.browsing)免费获得此信息。这是最简单的方法。
*   另一种选择是使用TortoiseSVN 上的[存储库浏览器。](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-repobrowser.html)
*   如果你*真的*想要一个网络共享，那么你可以创建一个[提交后挂钩](http://svnbook.red-bean.com/en/1.5/svn.ref.reposhooks.post-commit.html)，它在工作副本上调用 svn update。然而，这样做的风险更大，因为存在工作副本可能由于某种原因（合并冲突等）而失效的可能性。每次提交时重新结帐可以解决这个问题，但效率低下。

恕我直言，前两个选项比最后一个要好得多，但是选择很好:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-14T13:52:05.137

Subversion 没有内置此功能，TortoiseSVN 也没有。您可以将提交后脚本添加到服务器，但在您的情况下，我宁愿使用持续集成之类的东西。检查[巡航控制](http://confluence.public.thoughtworks.org/display/CCNET/Welcome+to+CruiseControl.NET)。

通常，它允许您在每次将提交添加到存储库时执行“操作”。此操作可以但不必包括启动自动构建，一旦“参考副本”工作正常，您可能想要添加一些内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-14T14:34:28.873

最简单的答案是检查整个存储库的工作副本，并定期安排“svn 更新”。

不过，这不是理想的解决方案 - 分支在颠覆中应该很便宜，而这个解决方案使它们*非常*昂贵，尽管您可以随时关闭它 - 或者只是检查主干或一些相关的特定文件夹。

但实际上，TortoiseSVN 在向您展示正在发生的事情方面是一个宝石。

此外，还有大量基于 Web 的 svn 查看器，它们具有完全集成，超出了简单的 apache 服务提供给您的功能。

# sql - UNIQUE 键上的 GROUP BY 是否在应用 LIMIT 子句之前计算所有组？

> ID：747639
> 
> 赞同：3
> 
> 时间：2009-04-14T13:47:55.427
> 
> 标签：sql, mysql, grouping, limit

如果我`GROUP BY`使用唯一键并将`LIMIT`子句应用于查询，是否会在应用限制之前计算所有组？

如果我在表中有一百条记录（每条记录都有一个唯一的键），在应用 a 之前我会`100`在临时表中创建（用于`GROUP BY`）记录`LIMIT`吗？

一个案例研究为什么我需要这个：

举个`Stack Overflow`例子。

您运行的每个查询都会显示问题列表，还会显示提出此问题的用户以及他拥有的徽章数量。

因此，虽然用户<->问题是一对一的，但用户<->徽章是一对一的。

在一个查询中执行此操作（而不是一个查询问题，另一个查询用户然后组合结果）的唯一方法是通过主键 (question_id) 和 join+group_concat 将查询分组到 user_badges 表。

**问题TAGS也是如此。**

```
Code example:
Table Questions:
question_id  (int)(pk)|   question_body(varchar)

Table tag-question:
question-id (int) | tag_id (int)

SELECT:

SELECT quesuestions.question_id,
       questions.question_body,
       GROUP-CONCAT(tag_id,' ') AS 'tags-ids'
FROM
       questions
   JOIN
       tag_question
   ON
       questions.question_id=tag-question.question-id
GROUP BY
       questions.question-id
LIMIT 15 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-14T13:50:11.087

是的，查询执行的顺序是：

*   从
*   在哪里
*   团体
*   拥有
*   种类
*   选择
*   限制

LIMIT 是最后计算出来的，所以你的分组会很好。

现在，看看你改写的问题，那么你不是每组只有一行，而是很多：在stackoverflow的情况下，每行只有一个用户，但有很多徽章 - 即

```
(uid, badge_id, etc.)
(1, 2, ...)
(1, 3, ...)
(1, 12, ...) 
```

所有这些将被组合在一起。

为了避免全表扫描，您需要的只是索引。除此之外，例如，如果您需要求和，则无法避免全面扫描。

**编辑：**

您将需要这样的东西（查看 WHERE 子句）：

```
SELECT
  quesuestions.question_id,
  questions.question_body,
  GROUP_CONCAT(tag_id,' ') AS 'tags_ids'
FROM
  questions q1
  JOIN tag_question tq
    ON q1.question_id = tq.question-id
WHERE
  q1.question_id IN (
    SELECT
      tq2.question_id
    FROM
      tag_question tq2
        ON q2.question_id = tq2.question_id
      JOIN tag t
        tq2.tag_id = t.tag_id
    WHERE
      t.name = 'the-misterious-tag'
  )
GROUP BY
  q1.question_id
LIMIT 15 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T14:04:20.427

如果您要分组的字段已编入索引，则不应执行全表扫描。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-14T14:33:19.500

`LIMIT`确实在之后应用`GROUP BY`。

是否创建临时表取决于索引的构建方式。

如果您在分组字段上有一个索引并且不按聚合结果排序，则`INDEX SCAN FOR GROUP BY`应用 an，并且每个聚合都会即时计数。

这意味着如果您由于 不选择聚合`LIMIT`，则永远不会计算它。

但是，如果您按聚合排序，那么当然，所有这些都需要在排序之前进行计算。

这就是为什么先计算它们然后再`filesort`应用它们的原因。

**更新：**

至于你的查询，看看`EXPLAIN EXTENDED`它说了什么。

最有可能`question_id`的是`PRIMARY KEY`，它适用于您的表，并且很可能会在扫描中使用。

这意味着 no`filesort`将被应用，并且连接本身不会`15'th`在行之后发生。

为了确保，重写您的查询如下：

```
SELECT question_id,
       question_body,
       (
       SELECT  GROUP_CONCAT(tag_id, ' ')
       FROM    tag_question t
       WHERE   t.question_id = q.question_id
       )
FROM   questions q
ORDER BY
       question_id
LIMIT 15 
```

*   首先，它更具可读性，
*   二是效率更高，
*   第三，它甚至会返回未标记的问题（您当前的查询没有）。

# javascript - decodeURIComponent 和 decodeURI 有什么区别？

> ID：747641
> 
> 赞同：427
> 
> 时间：2009-04-14T13:48:19.700
> 
> 标签：javascript

`decodeURIComponent`JavaScript 函数和有什么区别`decodeURI`？

* * *

## 回答 #1

> 赞同：457
> 
> 时间：2009-04-14T14:03:29.057

为了解释这两者之间的区别，让我解释一下 和 之间的`encodeURI`区别`encodeURIComponent`。

主要区别在于：

*   该`encodeURI`函数旨在用于完整的 URI。
*   该`encodeURIComponent`函数旨在用于 .. 好 .. URI 组件，即位于分隔符之间的任何部分 (; / ? : @ & = + $ , #)。

因此，在`encodeURIComponent`这些分隔符中进行编码也是因为它们被视为文本而不是特殊字符。

现在回到解码函数之间的区别，每个函数解码由其对应的编码对应物生成的字符串，并处理特殊字符的语义及其处理。

* * *

## 回答 #2

> 赞同：126
> 
> 时间：2009-04-14T14:26:08.690

encodeURIComponent/decodeURIComponent() 几乎总是您想要使用的对，用于将 URI 部分中的文本字符串连接在一起和拆分。

encodeURI 不太常见，而且名称有误导性：它实际上应该称为 fixBrokenURI。它需要一些几乎是 URI，但其中包含无效字符（如空格）的内容，并将其转换为真正的 URI。它可以有效地修复来自用户输入的无效 URI，也可以用于将 IRI（带有裸 Unicode 字符的 URI）转换为纯 URI（使用 %-转义的 UTF-8 来编码非 ASCII ）。

在真正应该将 encodeURI 命名为 fixBrokenURI() 的地方，decodeURI() 可以同样称为潜在的 BreakMyPreviousWorkingURI()。我想不出它在任何地方的有效用途；避免。

* * *

## 回答 #3

> 赞同：74
> 
> 时间：2009-04-14T14:04:28.273

```
js> s = "http://www.example.com/string with + and ? and & and spaces";
http://www.example.com/string with + and ? and & and spaces
js> encodeURI(s)
http://www.example.com/string%20with%20+%20and%20?%20and%20&%20and%20spaces
js> encodeURIComponent(s)
http%3A%2F%2Fwww.example.com%2Fstring%20with%20%2B%20and%20%3F%20and%20%26%20and%20spaces 
```

看起来[`encodeURI`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURI)通过编码空格和一些其他（例如不可打印的）字符来生成“安全”URI，而[`encodeURIComponent`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent)另外编码冒号和斜杠以及加号字符，并且旨在用于查询字符串。+ 和 ? 的编码 和 & 在这里特别重要，因为它们是查询字符串中的特殊字符。

* * *

## 回答 #4

> 赞同：34
> 
> 时间：2014-12-03T17:58:38.203

由于我有同样的问题，但在这里没有找到答案，所以我做了一些测试以找出实际的区别。我这样做了，因为我需要一些与 URL/URI 无关的编码。

*   `encodeURIComponent("A")`返回“A”，它不会将“A”编码为“%41”
*   `decodeURIComponent("%41")`返回“A”。
*   `encodeURI("A")`返回“A”，它不会将“A”编码为“%41”
*   `decodeURI("%41")`返回“A”。

- 这意味着两者都可以解码字母数字字符，即使它们没有编码它们。然而...

*   `encodeURIComponent("&")`返回“%26”。
*   `decodeURIComponent("%26")`返回“&”。
*   `encodeURI("&")`返回“&”。
*   `decodeURI("%26")`返回“%26”。

尽管 encodeURIComponent 不编码所有字符，但 decodeURIComponent 可以解码 %00 和 %7F 之间的任何值。

*注意：似乎如果您尝试解码 %7F 以上的值（除非它是 unicode 值），那么您的脚本将失败并出现“URI 错误”。*

* * *

## 回答 #5

> 赞同：27
> 
> 时间：2009-04-14T14:06:57.863

> **`encodeURIComponent()`**
> 
> 将输入转换为 URL 编码的字符串
> 
> **`encodeURI()`**
> 
> URL 对输入进行编码，但假定给出了完整的 URL，因此通过不编码协议（例如*http://*）和主机名（例如 *www.stackoverflow.com*）返回一个有效的 URL。

`decodeURIComponent()`并且与`decodeURI()`上述相反

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2009-04-14T14:06:04.917

decodeURIComponent 将解码 URI 特殊标记，例如 &、?、# 等，decodeURI 不会。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2018-05-24T08:57:43.980

encodeURIComponent 未转义：

```
A-Z a-z 0-9 - _ . ! ~ * ' ( ) 
```

encodeURI() 未转义：

```
A-Z a-z 0-9 ; , / ? : @ & = + $ - _ . ! ~ * ' ( ) # 
```

[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent)

[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURI](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURI)

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2021-08-19T08:58:42.897

encodeURI() 函数不对 URI 具有特殊含义的字符（保留字符）进行编码。

# django - Django分页和“当前页面”

> ID：747648
> 
> 赞同：16
> 
> 时间：2009-04-14T13:49:46.623
> 
> 标签：django, django-templates, django-views

我目前正在开发一个 Django 应用程序，它将利用臭名昭著的“分页”技术。我试图弄清楚 django.core.paginator 模块是如何工作的。

我有一个带有问题模型的应用程序。我将使用这个分页器列出所有问题。每页将有 20 个问题。

```
def show_question(question_pk):
    questions = Question.objects.all()
    paginator = Paginator(questions, 20)
    page      = ... # Somehow figure out which page the question is on
    return render_to_response('show_question.html', { 'page' : page }) 
```

在视图中，我将不同的页面列为“... 2, 3, **4** , 5, 6, ...” 我想以某种方式突出显示当前页面，就像许多页面一样。

我真的想知道两件事：

1.  如何让 Django 找出问题所在的页面？
2.  我将如何编写模板以正确“突出显示”当前访问的页面？

编辑：对不起，我忘记了这个问题的一部分。我还希望除当前页面之外的任何页面都可以链接到`/questions/{{ that_page.start_index }}`. 所以基本上每个页面链接都会链接到该页面上的第一个问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-15T00:24:23.230

嗯...我从您的评论中看到您不想执行 ol' GET 参数，这是 django.core.paginator 为使用而编写的。为了做你想做的事，我想不出比预先计算每个问题所在的页面更好的方法了。例如，您的视图最终将类似于：

```
ITEMS_PER_PAGE = 20
def show_question(question_pk):
    questions = Question.objects.all()
    for index, question in enumerate(questions):
        question.page = ((index - 1) / ITEMS_PER_PAGE) + 1
    paginator = Paginator(questions, ITEMS_PER_PAGE)
    page = paginator.page(questions.get(pk=question_pk).page)
    return render_to_response('show_question.html', { 'page' : page }) 
```

要突出显示模板中的当前页面，您需要执行类似的操作

```
{% for i in page.paginator.page_range %}
    {% ifequal i page.number %}
        <!-- Do something special for this page -->
    {% else %}
        <!-- All the other pages -->
    {% endifequal %}
{% endfor %} 
```

至于这些项目，您将有两个不同的 object_lists 可以使用...

```
page.object_list 
```

将是当前页面中的对象和

```
page.paginator.object_list 
```

将是所有对象，无论页面如何。这些项目中的每一个都有一个“页面”变量，它将告诉您它们在哪个页面上。

话虽如此，你在做的事情听起来很不合常规。您可能需要重新考虑，但无论如何，祝您好运。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2010-11-08T16:19:46.683

Django，[至少](http://docs.djangoproject.com/en/1.2/topics/pagination/)从 1.2 版本开始，允许我们通过使用纯默认分页模板标签来完成这项任务。

```
{% for page in article_list.paginator.page_range %}
  {% if page == article_list.number %}
    {{ page }}
  {% else %}
    <a href="/page{{ page }}">{{ page }}</a>
  {% endif %}
{% endfor %} 
```

其中 article_list 是

```
paginator = Paginator(article_list, 20)
    try:
        article_list = paginator.page(int(page))
    except (EmptyPage, InvalidPage):
        article_list = paginator.page(paginator.num_pages) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-14T14:06:35.757

[django-pagination](http://eflorenzano.com/blog/post/first-two-django-screencasts/#using-django-pagination)应该做你想做的，并包装在一个漂亮的包中，你可以插入和使用。它本质上将代码从您的视图移动到模板和中间件。

编辑：我刚看到你的编辑。您可以使用 获取页面上的当前对象`{% autopaginate object_list %}`，它将替换`object_list`为任何给定页面的当前对象。您可以遍历它，如果您想要第一个，您应该能够将它视为一个列表并执行`object_list[0]`.

如果您想将此保留在您的视图中，您可以执行以下操作：

```
def show_question(question_pk):
    questions = Question.objects.all()
    paginator = Paginator(questions, 20)
    return render_to_response('show_question.html', { 'page' : paginator }) 
```

在您的模板中，您可以通过以下方式访问您所在的当前页面：

```
# Gives you the starting index for that page.
# For example, 5 objects, and you're on the second page. 
# start_index will be 3.
page.start_index

# You can access the current page number with:
# 1-based index
page.number 
```

有了这个，你应该能够做你需要的一切。[这里](http://docs.djangoproject.com/en/dev/topics/pagination/)有几个很好的例子。

# log4j - 选择日志文件

> ID：747650
> 
> 赞同：0
> 
> 时间：2009-04-14T13:49:49.933
> 
> 标签：log4j

我们的应用程序中有多个日志文件，例如数据库日志、weblog、quartzlog。

来自包 /app/database 下文件的任何日志都将转到数据库日志。/app/offline 包下的文件中的任何日志都将转到quartzlog 日志。

我们现在需要的是 - 想要将 /app/database 下的 java 文件之一中的日志 staments 输出到quartzlog 而不是数据库日志。

我们如何在 java 文件中选择特定的日志文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-14T14:12:38.613

您需要定义登录所需文件的适当附加程序。阅读[这个简短的介绍](http://logging.apache.org/log4j/1.2/manual.html)，了解如何做到这一点。

然后在配置文件中，您可以指示来自特定包的所有消息进入选定的附加程序：

```
log4j.logger.my.package = DEBUG, myFileAppender 
```

**编辑：**

我相信在 log4j 中，只有包解析是可能的——你不能为每个文件或方法使用附加程序。您可以尝试通过在 log4j 之上添加一个额外的层或实现您自己的附加程序来解决此问题。

例如，代替 log.debug 使用：

```
my.loggerproxy.log.debug(message); 
```

如果您只需要从一种方法中完成它，那么以上就足够了。只需指示记录器代理包记录在不同的文件中。

# html - 为图像添加字幕

> ID：747652
> 
> 赞同：5
> 
> 时间：2009-04-14T13:50:02.677
> 
> 标签：html, css, markup, semantic-markup

使用最新的 HTML/CSS 在网络上为图像添加字幕的最简洁方法是什么？请演示代码。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-04-14T15:34:35.203

有几种语义方法可以标记图像及其标题。

## 老学校的方式

一种老派的方法是使用 HTML 定义列表，请参阅[Image captions the semantic way](http://www.naterkane.com/blog/image-captions-the-semantic-way/)。（还有其他[很好的教程](http://www.tjkdesign.com/articles/thumbnail_and_caption/gallery_of_thumbnails.asp)演示了这种方法。）

```
<dl>
    <dt><img src="foo.jpg" /></dt>
    <dd>Foo</dd>
</dl> 
```

## 微格式

还有一个适用于任何常规标记的[图形微格式：](http://microformats.org/wiki/figure)

```
<div class="figure">
  <img class="image" src="foo.jpeg" alt="" /><br/>
  <small class="legend">Foo</small>
</div> 
```

## HTML5

[`<figure>`而 HTML5 现在通过和`<figcaption>`元素](http://html5doctor.com/the-figure-figcaption-elements/)为带有标题的图像提供了一种干净直接的方法。

```
<figure>
  <img src="foo.jpg" alt="">
  <figcaption>Foo</figcaption>
</figure> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-14T14:04:55.713

我知道我已经在 www.alistapart.com 上看到了一些包含一些好的代码的文章 - 但这里有一篇文章可以让你开始：[http ://www.alistapart.com/articles/practicalcss/](http://www.alistapart.com/articles/practicalcss/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-14T13:53:17.943

**编辑 -**

悬停图像标题上的漂亮示例[CSS](http://www.sohtanaka.com/web-design/css-on-hover-image-captions/)

其他示例：[网页上的图片说明](http://www.cs.tut.fi/~jkorpela/www/captions.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-28T08:14:03.500

您可以使用这些很酷的图像标题效果。

[带有 CSS 的酷图片标题](http://webtips.in/image-caption-effects-css#.U14NlVWSxyI)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-14T15:52:52.337

这就是我会做的

```
.img-container {position:relative;}
,img-container h4{position:absolute;bottom:0; left:0;height:Npx;line-height:20px; font-size:18px;}
.img-container img {margin-bottom:Npx;} 
```

如果文本存在超过一行的风险，您需要使 N 的值更大，否则 20px 就可以了。

```
<div class="img-container">
<h4 class="caption">A picture of a dog</h4> //or h3, or h5 etc... - whichever is most appropriate given how you've used headings on your site
<img src,,,,>
</div> 
```

在标记中将标题放在图像之前并使其成为标题，我认为在语义上尽可能接近地说“这是……的图片”

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-08-23T12:28:09.590

很难在此处的帖子中列出所有详细信息。

以下是一些深入讨论 CSS 图像字幕的链接：

[使用 CSS 的半透明图像标题](http://www.cssbakery.com/2009/03/captioning-image-in-blogger.html)

[使用 CSS 和 Javascript 的半透明图像标题](http://www.cssbakery.com/2009/11/semi-transparent-image-captions-using.html)

[带有可重复使用圆角的 CSS 图像标题](http://www.cssbakery.com/2009/03/more-on-captioning-images-reusable.html)

最后是一个独立的工具，可以生成为图像添加字幕所需的 CSS 代码：

[CSS 图像字幕工具](http://tools.cssbakery.com/welcome/caption)

# apache-flex - 使用奇怪的掩码将精灵绘制到位图数据中

> ID：747656
> 
> 赞同：1
> 
> 时间：2009-04-14T13:51:25.730
> 
> 标签：apache-flex, flash, actionscript-3, actionscript, sprite

我遇到了将精灵绘制到 BitmapData 中的奇怪行为。当直接绘制到屏幕上时，这个精灵看起来很好。但是当这个精灵被绘制到一个 BitmapData 中时，精灵被屏蔽了......*但是没有这样的屏蔽应用于那个精灵！*

可以通过对我正在绘制的精灵应用/不应用不同的蒙版来关闭和打开这个“坏蒙版”。这个面具与“坏面具”的形状或位置不同。

[替代文字 http://img5.imageshack.us/img5/8310/masked.png](http://img5.imageshack.us/img5/8310/masked.png)

我想知道我是否做错了什么或者这是一个错误？我正在以[文档中描述](http://livedocs.adobe.com/flash/9.0/ActionScriptLangRefV3/flash/display/DisplayObject.html#mask)的方式添加掩码。“坏面具”似乎是从我正在绘制的精灵（drawingSprite）相对于它的父母的位置获取它的坐标。

* * *

```
package
{

import flash.display.Bitmap;
import flash.display.BitmapData;
import flash.display.Sprite;

import mx.core.UIComponent;

public class tmpa extends UIComponent
{

    public function tmpa( ):void
    {   var topSprite:Sprite = new Sprite();
        topSprite.x = 0;
        topSprite.y = 0;
        addChild( topSprite );

        var canvasSprite:Sprite = new Sprite();
        canvasSprite.x = 5;
        canvasSprite.y = 35;
        topSprite.addChild( canvasSprite );

        var drawingSprite:Sprite = new Sprite();
        canvasSprite.addChild( drawingSprite );

        var maskSp:Sprite = new Sprite();
        maskSp.graphics.beginFill( 0xFFFFFF, 1 );
        maskSp.graphics.drawRect( 0, 0, 200, 200 );
        maskSp.graphics.endFill();

        //toggle these two lines of code
        canvasSprite.addChild( maskSp );
        drawingSprite.mask = maskSp;

        drawingSprite.graphics.beginFill( 0xFF0000, 1 );
        drawingSprite.graphics.drawRect( 0, 0, 200, 200 );
        drawingSprite.graphics.endFill();

        drawingSprite.graphics.beginFill( 0x00FF00, 1 );
        drawingSprite.graphics.drawCircle( 0, 0, 100 );
        drawingSprite.graphics.endFill();

        //a snapshot with default blue background
        var bmd:BitmapData = new BitmapData( 100, 100, false, 0x0000FF );
        bmd.draw( drawingSprite );
        var bm:Bitmap = new Bitmap( bmd );
        bm.x = 300;
        bm.y = 35;
        addChild( bm );
    }

}
} 
```

* * *

```
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" xmlns:a="*" width="100%" height="100%">
    <a:tmpa id="t" width="100%" height="100%" x="0" y="0" left="0" top="0"/>
</mx:Application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-14T16:04:55.053

将添加行的掩码更改为：

```
canvasSprite.addChild( maskSp );
canvasSprite.mask = maskSp; 
```

解决了这个问题，因此剪辑的相对坐标空间可能存在一些混淆。我认为您应该将遮罩与显示列表中的遮罩 DisplayObject 保持在同一级别，以避免混淆。

# silverlight - 如何在 Silverlight DatePicker 控件中禁用未来日期

> ID：747657
> 
> 赞同：6
> 
> 时间：2009-04-14T13:51:34.170
> 
> 标签：silverlight, datepicker

我需要能够在 Silverlight DatePicker 控件中禁用对未来日期的选择 - 有什么想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-14T13:54:02.450

[http://msdn.microsoft.com/en-us/library/system.windows.controls.datepicker.displaydateend(VS.95).aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.datepicker.displaydateend(VS.95).aspx)

```
DatePicker.DisplayDateEnd = DateTime.Now; 
```

?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-02-17T18:58:33.913

使用 MaxDate 来封锁未来的日期

System.DateTime DatesDisplayEnd = today.Add(duration); System.DateTime MaxDate = DateTime.MaxValue;

stkDatePicker.BlackoutDates.Add(new CalendarDateRange(DatesDisplayEnd, MaxDate));

# javascript - 如何解析/规范化 GWT/Javascript 中的 URL？

> ID：747665
> 
> 赞同：1
> 
> 时间：2009-04-14T13:53:01.140
> 
> 标签：javascript, url, gwt

给定两个 URL，我如何解决其中一个与另一个？我正在尝试模拟 Java 的[URI.resolve()](http://java.sun.com/j2se/1.5.0/docs/api/java/net/URI.html#resolve(java.lang.String))，它在 GWT 的模拟库中不存在。我不得不手动实现这一点，正如您所料，这非常容易出错。是否有用于**解析**或**规范化**URL 的 GWT 或 Javascript 库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-11-25T08:12:32.163

我使用 Closure 的[Uri 类](http://closure-library.googlecode.com/svn/trunk/closure/goog/docs/class_goog_Uri.html)来执行此操作，它有一个`resolve()`方法。如果您将其链接到其中，您可以使用 GWT 的[JavaScript 本机接口](http://googlewebtoolkit.blogspot.com/2008/07/getting-to-really-know-gwt-part-1-jsni.html)(JSNI) 来编写本机 JavaScript 方法——可能类似于：

```
native String resolve(String base, String relative) /*-{
  var baseUri = goog.Uri.parse(base);
  var relativeUri = goog.Uri.parse(relative);
  return baseUri.resolve(relativeUri).toString();
}-*/; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T17:32:53.910

如果您想保持简单，请创建一个 GWT RPC 来解析 url。你可以在 5 分钟内完成 :)

# jquery - jQuery：选中选中的复选框

> ID：747670
> 
> 赞同：35
> 
> 时间：2009-04-14T13:55:05.567
> 
> 标签：jquery, checkbox, input, jquery-selectors

假设我有以下 HTML：

```
<form id="myform">
  <input type='checkbox' name='foo[]'/> Check 1<br/>
  <input type='checkbox' name='foo[]' checked='true'/> Check 2<br/>
  <input type='checkbox' name='foo[]'/> Check 3<br/>
</form> 
```

现在，如何选择名称为 'foo[]' 的选中输入字段？

这是我的尝试，但它不起作用：

```
$("#myform input[name='foo']:checked:enabled"); 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2009-04-14T13:59:11.750

该字段的名称不是`foo`，而是`foo[]`。您可以使用[attributeStartsWith](http://docs.jquery.com/Selectors/attributeStartsWith#attributevalue)选择器：

```
$("input[name^='foo']:checked:enabled",'#myform'); 
```

理想情况下，您可以这样做：

```
$("input[name='foo[]']:checked:enabled",'#myform'); 
```

但正如[这个答案](https://stackoverflow.com/questions/739695/jquery-selector-value-escaping/740168#740168)所解释的，jQuery 使用它来解析条件的`value`一部分`attr=value`：

```
(['"]*)(.*?)\3|)\s*\] 
```

> \3 是包含开头引号的组，奇怪的是允许多个开头引号，或者根本没有开头引号。这 。*？然后可以解析任何字符，包括引号，直到它遇到第一个 ']' 字符，结束匹配。没有提供反斜杠转义 CSS 特殊字符的规定，因此您无法匹配 jQuery 中的任意字符串值。

换句话说，一旦 jQuery 击中第一个`]`，它就认为值结束了。因此，正如该答案所解释的那样，您会被 startsWith 或使用纯 DOM 元素所困扰。

**SUPER DUPER IMPORTANT EDIT** :
这个错误显然是固定的。您应该能够使用我在上面描述为“理想”的代码。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-14T14:01:00.933

您应该在选择和包含时引用该属性`[]`：

```
$("#myform input[name='foo[]']:checked:enabled"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-14T14:06:00.703

实际上，你所拥有的一切都很好，只需使用双引号，并包含括号以便它可以匹配。

```
 $("#myform input[name='foo[]']:checked:enabled"); 
```

你可以在这里看到它的实际效果：http: [//jsbin.com/oyoro](http://jsbin.com/oyoro)

请注意，jQuery 过去曾遇到过括号问题，这可以解释围绕转义需要的许多困惑。我知道我自己在括号和引用方面遇到了问题。

见：[http ://dev.jquery.com/ticket/3443](http://dev.jquery.com/ticket/3443)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-14T14:00:39.827

我相信它是这样的：

```
$("input #foo[] :checked"); 
```

编辑：评论者是对的。我应该带着我的第一反应走了。:) 这次我将使用“^”。

```
$("input[name^=foo] :checked"); 
```

# iphone - iPhone 上的大多数游戏都是用 OpenGL ES 完成的吗？

> ID：747672
> 
> 赞同：5
> 
> 时间：2009-04-14T13:56:16.173
> 
> 标签：iphone, opengl-es, core-animation, quartz-graphics

我只是想知道 iPhone 上的大多数游戏是否都是在 OpenGL ES 中完成的，而不是使用 Quartz 和 Core Animation。Quartz 和 Core Animation 主要用于创建流畅的界面吗？或者，如果游戏中有一点可能必须使用 OpenGL 而不是使用其他工具？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-14T14:08:10.043

出于效率原因，OpenGL ES 是您游戏的最佳选择，除非您编写“简单”的棋盘游戏或纸牌游戏（如纸牌游戏）。在这种情况下，Core Animation 将是一个很好的选择。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-15T02:08:02.527

如果你打算做一个 2d 游戏，你应该看看 cocos2d-iphone。这似乎是一个非常坚实的基础。它配备了花栗鼠物理引擎，一切就绪。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-15T05:37:49.420

我认为 OpenGL 是你最好的选择，我不同意 Quartz 的东西更容易使用。

此外，如果您成功了，那么您的大部分代码都可以移植到其他平台。需要考虑的事情。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-04-14T16:43:50.590

主要取决于您是否需要 3D。如果您的游戏完全是二维的，那么使用 Quartz 进行绘图可能更简单。并不是说 OpenGL 有那么复杂，而是它比 Quartz 接口更复杂。

Quartz 绘图和合成将尽可能加速 OpenGL，因此如果您严格执行 2D 绘图，性能应该不会有太大差异。

# java - 注释元素类型

> ID：747674
> 
> 赞同：3
> 
> 时间：2009-04-14T13:57:39.070
> 
> 标签：java, annotations

以下注解的 ElementType 是什么意思？

```
@Entity
@Table(table="application")
@ElementType(type=1L) 
class application extends Element 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-15T09:44:40.153

请检查：[ElementType](http://java.sun.com/j2se/1.5.0/docs/api/java/lang/annotation/ElementType.html)。这是一个枚举，所有字段都在那里定义。您不应该依赖代码中的数值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-14T14:31:15.323

这是类型`long`和值 1 的文字。它的含义取决于注解的定义，但很可能在`ElementType`注解类中定义了常量，您应该使用这些常量而不是长文字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-20T16:27:51.717

假设这段代码可以编译，它有很多错误。ElementType 是 JDK 中的枚举，不是注解，所以这必须是自定义注解接口。它使用与注释相关的通用类名作为注释，造成混淆。它使用 long 而不是枚举，或者至少使用声明的常量来定义最有可能不被理解为数字的类型。并且它声明了一个全小写的类名。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-22T21:29:47.337

前两个注解显然是 Java Persistence 注解。没有 JPA 或 Hibernate 注释**ElementType**，因此无法从这段代码片段中看出它的含义。

ElementType 的完全限定名称会提供更多线索，但这很可能是自定义注释；其定义位于您的代码库中。

# .net - 如何在 C++ 中实现 IListSource 接口

> ID：747677
> 
> 赞同：1
> 
> 时间：2009-04-14T13:58:09.193
> 
> 标签：.net, c++-cli

我想从 C++ 实现 IListSource 接口。它包含 1 个方法 GetList() 和一个名为 ContainsListCollection 的属性。

我该怎么做。如何在 C++ 中将属性设置为 false/true

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-26T01:25:13.690

此 MSDN 文章包含 C# 中 IListSource 的示例实现。从那里弄清楚如何在 C++ 中执行此操作应该相当简单：msdn.microsoft.com/en-us/library/system.componentmodel.ilistsource.aspx（添加一个 http://，因为我是新用户。）

看起来 GetList() 每次都应该返回一个新的 IList。如果 GetList() 返回的 IList 是 IList 的集合（如何元），则 ContainsListCollection 应设置为 true，否则设置为 false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-14T14:38:30.500

以下是你的做法：

```
ref class ListSource : IListSource

{

static BindingList<String ^> ^list = gcnew BindingList<String ^>();

public:

property bool ContainsListCollection

{

virtual bool get() = IListSource::ContainsListCollection::get

{

return true;

}

}

virtual IList^ GetList() = IListSource::GetList

{

return gcnew ArrayList();

}

}; 
```

# php - PHP如何使用字符串作为超全局

> ID：747686
> 
> 赞同：0
> 
> 时间：2009-04-14T14:00:01.747
> 
> 标签：php, string, superglobals

我正在构建一个小的抽象类，它应该使某些任务更容易。

例如： $var = class::get('id'); 将运行检查 $_GET 中是否有指针 id，根据参数返回字符串或数组。这也应该适用于发布和请求，甚至更多。

我正在按照所有超全局变量的功能进行操作。我以 get 为例：

get 函数获取一个指针作为参数，它调用 fetchdata 函数并使用指针和“$_GET”作为参数。

fetchdata 应该只是盲目地使用它作为超全局获得的字符串并用另一个参数指向它。然后检查它是否存在并返回 value 或 false 以获取函数，该函数将 value/false 返回给调用者。

唯一的问题是当你不知道它是什么时，让字符串作为超全局工作。我之前用一个检查参数的开关来做到这一点，如果它是“get”，它将 $_GET 设置为另一个变量的值。但是我不想那样做，我希望能够轻松添加更多功能，而无需触及 fetchdata。

我尝试了 $method = eval($method)，但没有成功。($method = "$_GET")，有什么建议吗？

编辑：对不起，如果我说得不够清楚。我有一个带有字符串值“$_GET”的变量 X，我怎样才能让它从字符串中描述的源中获取值？

所以很简单

$X = $_GET 如果 X 的值为 "$_GET"

$X = $_POST 如果 X 的值为 "$_POST"

我只是不知道 X 有什么值，但它需要从超全局中获取与它的值同名的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-14T14:39:06.257

根据[手册中的这个页面](http://uk.php.net/manual/en/language.variables.superglobals.php)：

> **注意：变量变量**
> 
> 超全局变量不能用作函数或类方法中的变量。

这意味着您**不能**在函数或方法中执行此操作（您可以使用其他变量执行此操作）：

```
$var = '_GET';
${$var}[$key] 
```

与其将字符串传递给`fetchdata()`，你能不传递`$_GET`自己吗？我认为 PHP 不会复制一个变量，除非你修改它（'写时复制'），所以这不应该不必要地使用内存。

否则只有九个超全局变量，因此您所建议的 switch-case 并非不合理。

`eval()`如果你真的必须这样做，你可以这样做，比如：

```
eval('return $_GET;'); 
```

我认为那是不必要的，也是一个坏主意；它很慢，您需要非常小心地让不受信任的字符串靠近它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-14T17:00:54.543

不要使用评估。只是使用参考。

```
//test value for cli
$_GET['test'] = 'test';

/**
 * @link http://php.net/manual/en/filter.constants.php reuse the filter constants
 */
function superglobalValue($key, $input = null) {
    if ($input === INPUT_POST)
        $X = &$_POST;
    else
        $X = &$_GET;
    return (isset($X[$key]) ? $X[$key] : false);    
}

function getArrayValue(&$array, $key) {
    return (array_key_exists($key, $array) ? $array[$key] : false); 
}

//test dump
var_dump(
    superglobalValue('test', INPUT_GET),
    superglobalValue('test', INPUT_POST),
    getArrayValue($_GET, 'test'),
    getArrayValue($_POST, 'test')
); 
```

$_GET、$_POST 和 $_REQUEST 默认没有任何空值，只有字符串或数组。所以我在那里使用 isset 而不是 array_key_exists。

参数顺序：我总是尽可能将必需参数放在可选参数之前，并将数据对象放在操作/主观参数之前。这就是为什么 key 是 superglobalValue 的第一个参数和 getArrayValue 的第二个参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-14T14:21:02.383

我不太确定你想要实现什么，但你可以看看 __callStatic 魔术方法

```
class example{
 protected static $supers = array('GET', 'POST', 'SERVER', 'COOKIE');
 public static function __callStatic($functionName, $arguments){
  $index = arguments[0];
  $desiredSuper = strtoupper($functionName);
  if(in_array($desiredSuper, self::$supers)){
   doStuff ( $_{$desiredSuper}[$index] );
  }
  else{
    throw new Exception("$desiredSupper is not an allowed superGlobal");
  }
 }
} 
```

然后你可以这样做：

```
 example::get('id'); //wo do stuff to $_GET['id']
 example::server('REQUEST_METHOD'); //Will do stuff to $_SERVER['REQUEST_METHOD']
 example::foo('bar'); //throws Exception: 'FOO is not an allowed superGlobal' 
```

关于魔法方法的 PHP 手册：http: [//ca.php.net/manual/en/language.oop5.overloading.php#language.oop5.overloading.methods](http://ca.php.net/manual/en/language.oop5.overloading.php#language.oop5.overloading.methods)

**编辑**
我刚刚注意到您的编辑，您可以尝试：

```
 $X  = {$X}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-14T14:07:41.340

您可以使用 $_REQUEST["var"] 代替 $_GET["var"] 或 $_POST["var"]。

更复杂的方法是测试变量是否存在于 GET 数组中，如果不存在则其 POST。如果它执行它的 GET。

```
$var = null;
if (isset($_GET["varname"]))
{
  $var = $_GET["varname"];
}
别的
{
  $var = $_POST["varname"];
}

```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2009-04-14T14:11:54.683

如果您希望一个变量可以全局访问，您可以将它添加到`$GLOBALS`数组中。

```
$GLOBALS['test']='test'; 
```

现在你可以`$GLOBALS['test']`在任何地方获取。

# visual-studio - 如何自动将大量 .vcproj 文件添加到解决方案中？

> ID：747687
> 
> 赞同：1
> 
> 时间：2009-04-14T14:00:19.593
> 
> 标签：visual-studio, visual-studio-2008

我有大量 .vcproj 文件（约 200 个）存储在不同的位置。我有这些文件的完整路径列表。如何自动将它们添加到解决方案文件（.sln）？

UPD：我正在寻找现有的工具/方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-14T16:37:30.777

这是我的做法：

1.  创建并保存一个空白解决方案以将 vcproj 文件插入（文件->新项目->其他项目类型->Visual Studio 解决方案->空白解决方案）

2.  创建一个 VS 宏，将项目添加到解决方案、保存解决方案并退出。尝试以下操作：

    ```
    Public Sub AddProjectAndExit(Optional ByVal vcprojPath As String = "")
        If Not String.IsNullOrEmpty(vcProjPath) Then
            DTE.ExecuteCommand("File.AddExistingProject", vcprojPath)
            DTE.ExecuteCommand("File.SaveAll")
            DTE.ExecuteCommand("File.Exit")
        End If
    End Sub 
    ```

3.  创建一个批处理脚本，从 Visual Studio 命令提示符执行此宏，迭代每个 .vcproj 文件。单次执行的命令是：

    ```
    devenv.exe BlankSolution.sln /Command "Macros.MyMacros.Module1.AddProjectAndExit MyProject1.vcproj" 
    ```

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-14T14:20:49.577

.vcproj 和 .sln 文件是 ascii 格式，因此您可以编写一个宏/脚本/程序来运行您的项目列表并将正确的信息插入到 .sln 文件中。您需要获取的有关项目的唯一附加信息是项目 GUID，它可以在 .vcproj 文件中找到（假设每个项目的构建配置都相同）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-05-07T01:07:20.623

修改现有的 vcwizard。

```
function CreateCustomProject(strProjectName, strProjectPath)
{
    try
    {
            //This will add the default project to the new solution

            prj = oTarget.AddFromTemplate(strProjTemplate, strProjectPath, strProjectNameWithExt);

            //Create a loop here to loop through the project names
//you want to add to the new solution.
            var prjItem = oTarget.AddFromFile("C:\\YourProjectPath\\YourProject.vcproj", false);

        }
        return prj;
    }
    catch(e)
    {
        throw e;
    }
} 
```

# c# - 在 ASP MVC 中填充 2 个或更多表

> ID：747690
> 
> 赞同：1
> 
> 时间：2009-04-14T14:00:43.383
> 
> 标签：c#, javascript, asp.net-mvc

我正在寻找一种在 MVC 中填充多个表的方法，因为该方法只允许我返回一个 ModelView 或者我不知道如何返回更多。我是否必须在控制器中构建表并存储到 ViewData 并在页面中显示 viewData？

编辑：对不起，我想我没有表达这个想法。关键是我想在页面中填充 2 个或更多数据表。

例如，如果我有一个客户并且该客户有 5 个联系人和 5 个地址，我想显示客户信息和 2 个包含联系人和地址的表。

```
for each p in modelview
{
"<td>" + p.Name + "</td>"
}

for each p2 in modelview2
{
"<td>" + p2.Product + "</td>"
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-14T14:04:08.227

ViewData 是一个字典；您可以在其中存储多个项目，只需通过：

```
ViewData["foo"] -= ...
ViewData["bar"] -= ... 
```

然后，您可以（单独）在视图中获取这些。另一种方法是声明一个*封装*两个属性的类型，并使用该类型的实例作为模型（和类型化视图）。就个人而言，我更喜欢简单的 key/cast 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-14T14:07:09.813

您可以返回多个模型，但在绑定控制器参数时需要视图的复合模型和前缀的使用。

假设您有一个视图模型：

```
public class VM
{
   public FooClass Foo { get; set; }
   public BarClass Bar { get; set; }
} 
```

然后在您的控制器中，您将拥有

```
public ActionResult MyAction( [Bind(Prefix="Foo")]FooClass foo,
                             [Bind(Prefix="Bar")]BarClass bar )
{
   ...
} 
```

在您看来，您将使用：

```
<%= Html.TextBox( "Foo.Value" ) %>
<%= Html.TextBox( "Bar.Name" ) %> 
```

# wcf - “WCF”是什么意思？

> ID：747691
> 
> 赞同：5
> 
> 时间：2009-04-14T14:00:43.527
> 
> 标签：wcf

任何人都可以定义 WCF 吗？WCF的目的是什么？

有哪些好的阅读材料可以学习 WCF？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2009-04-14T14:19:03.357

**WCF（Windows Communication Foundation）**是 Microsoft 用于**框架**的名称，该框架**可以独立于其操作系统或技术在多个服务器之间进行通信**。

您可以使用此框架向世界上的任何计算机发送和接收消息和附件（文件、图像等）。

从开发人员的角度来看，具有 MTOM（SOAP 消息传输优化机制）的 WSE（Web 服务增强）的新版本本身就是简单 Web 服务 (.ASMX) 的更新版本。

WCF 被称为**服务框架**而不是 Web 服务，因为它**不再依赖于**要托管的 IIS（Internet 信息服务器）。现在，您可以使用 TCP/IP 托管 WCF 应用程序，将其托管为 Windows 服务，甚至将其托管为应用程序 - 您仍然可以将其托管在 IIS 中。

它使用 SOAP 协议和其他协议（仅可在一个文件中配置），并且还支持 HTTP 和 HTTPS，用于消息传递和附件。您现在拥有大量新的安全选项……它是用于从任何地方向任何地方发送/接收消息的“**顶级解决方案”。**

它在**AJAX 世界**中被大量使用，因为它可以发送 JSON 格式的消息。正因为如此，jQuery 和其他 JavaScript 框架可以很好地使用它。

**对于阅读材料**，我建议买一本好书，因为这是一种自学的好方法，以后可以参考。我个人购买了[Wrox Professional WCF](http://www.wrox.com/WileyCDA/WroxTitle/Professional-WCF-Programming-NET-Development-with-the-Windows-Communication-Foundation.productCd-0470089849.html)，我很喜欢它。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-04-14T14:03:54.080

WCF 代表 Windows 通信基础。

*   [MSDN 链接](http://msdn.microsoft.com/en-us/netframework/aa663324.aspx)
*   [维基百科链接](http://en.wikipedia.org/wiki/Windows_Communication_Foundation)

MSDN有点枯燥，但维基百科表达得很好：

> WCF 是专用于通信的 .NET Framework 的一部分。

就我而言，这意味着比普通的旧 Web 服务更丰富的替代方案，可以在通信层之间进行选择。

## 编辑

[15 Seconds对 WCF](https://web.archive.org/web/20100323131337/http://www.15seconds.com/Issue/061130.htm)也有很好的介绍：

> WCF 是一个统一的编程模型，它将 XML Web 服务、.NET Remoting、MSMQ 和 COM+ 中的最佳特性组合到一个完全基于一组开放行业标准的集成平台中。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-14T14:19:40.813

WCF 代表“Windows 通信基础”。它的超简化版本是它是工具和库的集合，为开发人员提供了统一的通信视图。WCF 中的所有内容都围绕**端点**、**通道**和**消息**这三个核心概念展开。端点是进入或退出代码的一种方式。通道是消息在这些端点之间传播的方式。使用此范例，您可以使用 UDP、TCP、HTTP、Peer-to-Peer、MSMQ - 所有这些都使用相同的 3 个核心概念。

至于学习资源，称我为老式的，但当我学习新技术时，我喜欢蜷缩在一本好书上。一旦我掌握了基础知识，我喜欢使用在线参考来增强我的基础......但对于介绍，恕我直言，没有什么比一本好书更好的了。

您找不到比 Juval Lowy 的“ [Programming WCF Services](https://rads.stackoverflow.com/amzn/click/com/0596521308) ”更好的 WCF 书籍了。“ [Essential Windows Communication Foundation](https://rads.stackoverflow.com/amzn/click/com/0321440064) ”也是一本不错的书，但我仍然认为 Juval 的书更适合您。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-14T14:12:11.283

“WCF”代表 Windows 通信框架。WCF 是 WSE（现已过时）、ASMX（旧的 ASP.NET Web 服务）的替代品，并且在某种程度上也是 .NET Remoting 的替代品。

WCF 涵盖了 ASMX 和 WSE 涵盖的所有 Web 服务场景，然后添加了对更多的支持，包括 TCP/IP 上的二进制通信、消息队列和命名管道上的通信等等。

丰富的可扩展性模型允许 Microsoft、第三方开发人员和您扩展 WCF 以满足未来的需求。请参阅[云计算](http://msdn.microsoft.com/en-us/magazine/dd569759.aspx)文章和[基础：使用 MSDN 杂志 2009 年 4 月号中的服务总线](http://msdn.microsoft.com/en-us/magazine/dd569756.aspx)文章，了解 WCF 如何扩展到一些非常现代的场景。

如果可能的话，所有新的 Web 服务开发都应该在 WCF 中进行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-14T14:23:41.287

WCF 将服务与协议分开的方式与 XHTML 和 CSS 将内容与表示分开的方式非常相似。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-14T14:09:53.457

简而言之，它的技术允许您的服务使用各种协议/模式与应用程序或服务进行通信

# http - 如果查询字符串丢失，给用户一个 404？

> ID：747697
> 
> 赞同：3
> 
> 时间：2009-04-14T14:02:59.433
> 
> 标签：http, http-headers, http-status-code-404

假设我需要一个查询字符串；例如“项目”。如果该查询字符串由于某种原因丢失，我应该给用户一个 200 错误页面还是“404 Not Found”？

我会赞成 404 但我不太确定。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-14T14:10:56.887

也许你应该给出一个“400 Bad Request”。

> 由于语法错误，服务器无法理解该请求。客户端不应该在没有修改的情况下重复请求。

有关更多可能性，请参阅[http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)。

就像 Chris Simpson 所说，当没有找到对应项目 ID 的项目时，给出“404 Not Found”。

您还可以查看流行的 RESTful api，看看其他人是如何处理这个问题的。例如[推特](http://apiwiki.twitter.com/REST+API+Documentation#HTTPStatusCodes)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T14:10:07.107

好问题。就我个人而言，我会使用 200 并提供一个用户友好的错误来解释问题，但这实际上取决于具体情况。

如果他们确实提供了 itemid 但特定项目不存在，您还会显示 404 吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-14T14:10:56.107

从可用性的角度来看，我都不会说。

您应该显示一个页面，告诉用户出了什么问题并让他们有机会修复它。

如果链接来自您网站上的另一个页面（或另一个网站），那么一个页面会告诉他们未找到所请求的项目并将他们重定向到适当的页面，也许是让他们浏览项目的页面？

如果用户自己输入查询字符串，那么我不得不问为什么？由于 URI 通常不是用户友好的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-14T14:11:16.603

你应该给用户 200，只有当你得到的 HTTP 请求得到了适当的响应时，即使它只是一个简单的 HTML 表明他们缺少参数。404 代码是当用户代理请求丢失的资源时。

检查此列表以获取更多信息 [http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-04-14T14:10:39.493

给出 500 错误，可能是 501。这将允许浏览器或代码通过现有的 onError 机制来处理它，而不必以某种自定义方式来监听它。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-04-14T14:26:35.367

我看到这个工作的方式，你应该返回一个 200 - 因为它应该是一个有效的资源。

假设您的 URL 之一是`widgets.com/browse.php?itemid=100`- 并且该 URL 显示目录中的特定项目。

现在，一个用户输入`widgets.com/browse.php`——我们期望这个动作是什么？当然，要列出目录中的所有项目（或至少是分页列表）。

重新考虑您的 URL 结构以及目录级别和参数如何相互关联。

# c# - FxCop 规则不与空值进行比较

> ID：747698
> 
> 赞同：1
> 
> 时间：2009-04-14T14:03:07.373
> 
> 标签：c#, .net, fxcop

我正在尝试为 fxcop 编写规则：

如果将某个类与 null 进行比较，则错误。

你认为有可能吗？

我写了一部分代码，我可以找到我正在寻找的类型但不知道如何找到值的语句。

因为知道我有那个代码，但不知道去哪里..

```
public override ProblemCollection Check(Microsoft.Cci.Member member)
        {
            Method m = member as Method;

            if (m != null)
            {   
                foreach (Statement s in m.Body.Statements)
                {
                    Block b = s as Block;
                    if (b != null)
                    {
                        foreach (Statement s1 in b.Statements)
                        {
                          ?
                        }
                    }
                }
            }

            return this.Problems;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-21T14:48:18.670

如果您有[reflector](http://www.red-gate.com/products/reflector/ "反射器")，您可以从 Microsoft.FxCop.Rules.Performance.TestForEmptyStringsUsingStringLength 的代码中获得灵感 - 它的作用类似于您要编写的规则。

# flash - Actionscript 3：以像素获取显示对象

> ID：747709
> 
> 赞同：7
> 
> 时间：2009-04-14T14:04:17.447
> 
> 标签：flash, actionscript-3

如何枚举相对于舞台的像素下的显示对象？

**澄清：**我想编写一个函数，它将**(x,y)**作为输入并返回一个**对象数组**作为输出。

**更新**：我想避免遍历所有显示对象，以判断哪一个在指定像素下。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-04-14T14:42:34.563

任何 DisplayObjectContainer（例如 MovieClip 或舞台）都有一个名为 getObjectsUnderPoint 的方法，该方法返回该点下的显示对象数组。它需要一个 Point 对象作为参数。

```
var myObjects: Array = stage.getObjectsUnderPoint(new Point(5, 5));
```

如果您在课堂上使用它，请不要忘记导入 flash.geom.Point；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-14T14:11:22.157

如果 DisplayObject 位于指定点（[http://livedocs.adobe.com/flash/9.0/ActionScriptLangRefV3/flash/display/DisplayObject.html#hitTestPoint()](http://livedocs.adobe.com/flash/9.0/ActionScriptLangRefV3/flash/display/DisplayObject.html#hitTestPoint())） ，hitTestPoint() 方法将为您获取信息

要获得对象列表，您必须递归地调查舞台的所有孩子，我认为没有预定义的函数。

或者：你想达到什么目的？也许您可以只使用事件并使它们冒泡？

# svn - 撤回意外签到

> ID：747713
> 
> 赞同：57
> 
> 时间：2009-04-14T14:04:35.043
> 
> 标签：svn

您正在使用颠覆，并且您在准备好之前不小心签入了一些代码。例如，我经常：a) 签入一些代码，然后 b) 稍微编辑，然后 c) 敲击，回车重复上一个命令，不幸的是这是签入。

是否可以通过颠覆从服务器中撤回这种意外签入？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2009-04-14T14:11:03.860

请参阅[SVNBook](http://svnbook.red-bean.com/en/1.8/svn.branchmerge.basicmerging.html#svn.branchmerge.basicmerging.undo)，特别是“撤消更改”部分和反向合并。

> svn merge 的另一个常见用途是回滚已经提交的更改。假设您在 /calc/trunk 的工作副本上愉快地工作，并且您发现在修订版 303 中所做的更改（更改了 integer.c）是完全错误的。它不应该被提交。您可以使用 svn merge 来“撤消”工作副本中的更改，然后将本地修改提交到存储库。您需要做的就是指定反向差异：
> 
> $ svn merge -r 303:302 [http://svn.example.com/repos/calc/trunk](http://svn.example.com/repos/calc/trunk)

澄清一下，您的初始更改*仍将在存储库中*。但是您现在在以后的修订中收回了它。即存储库已捕获您的所有更改（这确实是您想要的！除非您已签入明文密码或类似密码！）

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2010-12-08T12:36:04.450

**注意：这可能不适用于当前版本的 SUBVERSION 并且是一个坏主意 - 但我将其留在这里以供参考**

**注意：** *通常当您错误地签入时，您应该只恢复提交 - 请参阅此问题的其他答案。但是，如果您想知道如何实际撤消提交的影响并将存储库更改为以前的样子，下面有一些解释：*

这不是您通常想要的，但是如果您**真的**想从存储库中删除实际提交的版本，那么您可以按如下方式对存储库进行令人讨厌的回滚（假设`$REV`设置为最新修订版，您是删除）：

*   **首先备份您的存储库**，因为这些更改可能会破坏它（并阅读下面的假设）
*   将您的本地副本恢复到以前的版本，以免混淆 ( `svn revert -r $((REV-1))`)
*   在存储库中，删除`db/revs/$REV`并`db/revprops/$REV`
*   在存储库中，删除`db/current`and（对于 subversion 1.6 或更高版本）`db/rep-cache.db`，然后运行`svnadmin recover .`
*   （可能）调整权限`db/rep-cache.db`以防止*尝试写入只读数据库*错误

这一切都假设：

*   您正在使用`fsfs`基于 - 的存储库
*   Subversion release 大于`1.5.0`（否则您必须手动编辑`db/current`和更改修订号而不是运行`svnadmin recover .`）
*   没有其他后续修订已提交
*   您对存储库的文件系统具有写入权限
*   当您执行上述操作时，您并不害怕其他人试图访问它

当一个巨大的文件被提交到一个我不想永远留在历史（和镜像等）中的存储库时，我已经做到了；这绝不是理想或正常的做法......

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2011-06-08T17:42:03.953

**警告**：接受的答案（由大卫弗雷泽）应该适用于 SVN 1.5 存储库，但对于 SVN 1.6，您还必须`db/rep-cache.db`在下一次提交之前删除，否则**您将损坏您的存储库**并且可能直到下次您尝试完整时才意识到它查看。我已经看到后续的完整结帐失败并出现“格式错误的表示标头”错误。

什么是 rep-cache.db，您可能会问？[FSFS 布局上](https://svn.apache.org/repos/asf/subversion/trunk/subversion/libsvn_fs_fs/structure)的文档说，如果您删除此文件，您将失去“代表共享功能”；但是，它将在您的下一次提交时重新创建。 [表示共享是在 1.6 中添加的](http://subversion.apache.org/docs/release-notes/1.6.html#filesystem-improvements)。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2009-04-14T14:10:47.073

使用 TortoiseSVN，选择 Show log 并找到您想要恢复到的版本。从上下文菜单中，选择恢复到此版本。这将反向合并到您的工作副本中，因此您必须提交工作副本才能完成操作。

另请参阅[我们如何跟踪工作副本的分支？](https://stackoverflow.com/questions/747597/how-do-we-keep-track-of-our-working-copys-branch):-)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2009-04-14T14:23:48.883

如果您的意思是，我如何干净地删除意外签入的历史记录：这很难。

svn 不允许您撤消任何操作，因为它将修订保存为变更集。但是，有一些工具可以让您对存储库的转储执行几乎任何操作。你*可以*：

1.  转储你的回购。

2.  使用[svn 管理工具中的](http://svnbook.red-bean.com/en/1.7/svn.reposadmin.maint.html)[svndumpfilter](http://svnbook.red-bean.com/en/1.7/svn.reposadmin.maint.html#svn.reposadmin.maint.tk.svndumpfilter)来摆脱签入。

3.  把它放回回购。

但这会彻底毁掉你的 repo，所以永远不要尝试这样做，除非你完全知道你在做什么并且有所有的备份。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-04-14T14:15:32.960

您无法删除修订 - 这里的几个答案似乎完全误解了您想要的内容。但是您可以更改签入消息以表明它是无意的。签到的费用并不高，所以多加一个也没什么大不了的。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-14T14:05:51.423

是的，这确实是 Subversion 的用途。

您需要做的只是将您的副本替换为 SVN 存储库中的先前版本。

有几种选择：

1.  替换为修订。
2.  替换为网址
3.  来自存储库的最新版本（但在您的情况下，您已经拥有最新版本）
4.  替换为分支

但我强烈建议您在替换本地副本之前执行以下操作：

1.  执行“与存储库/修订/ URL 比较”。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-02-20T08:55:57.113

有时需要在服务器上编辑 repo，例如当您不小心提交了一个难以更改的密码时。这是我认为完全安全的方法（@David Fraser 的回答对我造成了回购损坏）。注意，这种方法只会从 repo 的末尾删除修订，因此如果您立即发现错误，这是最有用的。

1.  通知您的所有用户 repo 正在离线，他们需要从服务器创建新的结帐。
2.  使 repo 脱机，获取备份副本并将主 repo 移动到名称类似于 reponame_old 的安全位置。
3.  将您的 repo 转储为单个文件表示形式，将不需要的修订留在最后：
    *   `svnadmin dump -r 0:N > reponame.dump`
    *   例如`svnadmin dump -r 0:6610 > reponame.dump`将从 6611 版开始删除
    *   请注意，repodump 文件可能是您的 repo 文件夹大小的两倍。
4.  创建一个新的存储库以将这些修订加载到：
    *   `svnadmin create reponame`
5.  将修剪后的修订集加载到新的存储库中
    *   `svnadmin load reponame < reponame.dump`
6.  将任何必要的定制应用到您的新存储库（例如挂钩）并将其返回服务。
    *   我们正在使用 VisualSVN 服务器，因此必须恢复 conf\VisualSVN-WinAuthz.ini 文件。
    *   在我们重新启动服务器之前，我们还看到了一些奇怪的行为，因此 VisualSVN 可能会缓存 repo 状态；YMMV 与其他托管设置。
7.  不要忘记删除包含秘密数据的备份，或者将其放在安全的地方。
8.  `svn checkout`告诉所有用户从 repo 服务器做一个新的。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-14T14:10:24.267

我会怀疑的。源代码控制的主要思想之一是存储库不会丢失任何历史记录。您无法删除历史记录。你能做的最好的就是获得一个旧版本并用它覆盖当前版本。但是历史日志仍然会显示你的错误。

（题外话：你使用什么样的 IDE 来做这样的事情？）

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-04-14T14:11:44.623

您无法撤回修订，您最多只能恢复到先前的修订并再次签入。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-04-14T14:19:58.877

对此也发表评论：这是我在存储库上执行的一系列命令，用于将其从修订版 2 恢复到修订版 1。不过，您也需要在最后签入。

```
Last login: Mon Apr 13 16:01:34 on ttys004
[wlynch@orange ~] cd /tmp
[wlynch@orange /tmp] svnadmin create foo
[wlynch@orange /tmp] svn co file:///tmp/foo foo-repo
Checked out revision 0.
[wlynch@orange /tmp] cd foo-repo/
[wlynch@orange foo-repo] ls
[wlynch@orange foo-repo] touch blah
[wlynch@orange foo-repo] touch repl
[wlynch@orange foo-repo] touch bar
[wlynch@orange foo-repo] svn add *
A         bar
A         blah
A         repl
[wlynch@orange foo-repo] svn ci
Adding         bar
Adding         blah
Adding         repl
Transmitting file data ...
Committed revision 1.
[wlynch@orange foo-repo] echo "hi" > bar
[wlynch@orange foo-repo] echo "oh no" > blah
[wlynch@orange foo-repo] svn ci
Sending        bar
Sending        blah
Transmitting file data ..
Committed revision 2.
[wlynch@orange older-foo] svn diff -r 1:2 file:///tmp/foo
Index: bar
===================================================================
--- bar (revision 1)
+++ bar (revision 2)
@@ -0,0 +1 @@
+hi
Index: blah
===================================================================
--- blah    (revision 1)
+++ blah    (revision 2)
@@ -0,0 +1 @@
+oh no

[wlynch@orange foo-repo] svn diff -r 1:2 file:///tmp/foo | patch -R
patching file bar
patching file blah 
```

# c# - 在 asp.net 网站项目中获取安装版本

> ID：747717
> 
> 赞同：1
> 
> 时间：2009-04-14T14:05:29.007
> 
> 标签：c#, asp.net, setup-deployment

我有一个**ASP.NET 项目**，其中包含一个**Web 部署项目**（用于编译网站）和一个**安装项目**（用于创建安装程序并安装网站的编译版本）。

我总是在**设置项目**中更改**应用程序版本**，我希望能够将该版本号引用到网站本身，但无需在 web.config 中使用版本号创建条目（不是今天，但我认为将来会这样）我会忘记更改 web.config 中的版本号）

 **有什么技巧可以用来获得这种行为吗？

就像在*WinForms*中使用 App.Config 一样，只需：

```
Version vrs = new Version(Application.ProductVersion);
myVersionLabel.Text = "Major: " + vrs.Major + " Minor: " + vrs.Minor; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-14T20:55:50.547

您始终可以执行自定义操作，将安装版本写入/更新到您的 web.config。不用担心忘记手动操作。编辑：我发表了一篇关于如何做到这一点的博客文章。看看[这里](http://insomniacgeek.com/blog/how-to-determine-setup-version-from-within-an-asp-net-page/)。

# classpath - 如何构建 GNU Classpath 和 JamVM

> ID：747719
> 
> 赞同：5
> 
> 时间：2009-04-14T14:05:32.797
> 
> 标签：classpath, gnu, jamvm

我正在尝试构建 GNU Classpath 0.98 和 JamVM 1.5.2。
按照 JamVM 自述文件，我做了“配置”；制作; 在 jamVM 上进行安装，它工作正常。

然后我将 jamvm 和 Sun javac 添加到路径中。
然后使用 GNU Classpath 我这样做了：

```
./configure --enable-jni --disable-gtk-peer --disable-gconf-peer --disable-plugin 
```

我收到了这个错误：

> javac 失败（请参阅 config.log）

在 上`config.log`，我看到 javac 找不到 VMStackWalker（它是 jamvm 特定的）我将 jamvm 类添加到 CLASSPATH 中，然后出现此错误：

> Java VM jamvm 失败（请参阅 config.log）

在 上`config.log`，我看到 jamvm 找不到`java.lang.Class`。

怎么了？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-17T07:05:49.250

找到它！

[http://sourceforge.net/forum/message.php?msg_id=7193290](http://sourceforge.net/forum/message.php?msg_id=7193290)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-22T22:48:17.140

为 Ubuntu12.04 编译 GNU 类路径的步骤： [https ://groups.google.com/forum/#!topic/jruby-gsoc/-fnKnP7zxbI](https://groups.google.com/forum/#!topic/jruby-gsoc/-fnKnP7zxbI)

为 Ubuntu 12.04 编译 JamVM 的步骤： [https ://groups.google.com/forum/#!topic/jruby-gsoc/uJ6RlVvHR-0](https://groups.google.com/forum/#!topic/jruby-gsoc/uJ6RlVvHR-0)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-04-26T11:00:13.120

试试ecj，classpath需要java编译器，sun sdk在这里好像不行

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-30T15:55:21.413

我的 Mac OS X 10.11 历险记：

## 虚拟机

[用](https://stackoverflow.com/questions/9940503/building-jamvm-1-5-4-on-os-x-lion) `make clean && CFLAGS="-m32" ./configure`.

## GNU 类路径

花了一点时间：

```
# If you already made an attempt
make clean

## If you don't --disable-tools. I didn't have antlr, so I downloaded it.
#curl -O http://www.antlr.org/download/antlr-4.5.1-complete.jar

./configure --disable-gtk-peer --disable-gconf-peer \
    --disable-tools # for tools: --with-antlr-jar=antlr-4.5.1-complete.jar 
```

如果您`make`现在，编译将失败并显示 `java_io_VMConsole.c:80:19: error: use of undeclared identifier 'IUCLC'`. 我最终在谷歌上[搜索了那个符号是什么](http://lxr.free-electrons.com/ident?i=IUCLC)——它是一个八进制 01000，并将它添加到源代码中：

```
vim ./native/jni/java-io/java_io_VMConsole.c
# add this line in the beginning of the file: #define IUCLC   0001000 
```

在那之后，./configure 一直抱怨你`javac`不是 GCJ。它看起来像 GNU Classpath 的一个老错误，我发现提到了类似的问题。正如您在下面看到的，`./configure`它已损坏并且不能`javac`与`gcj`.

我最终只是编辑`./configure`：

*   一开始，我加了一行`export JAVAC=$(which javac)`
*   我用`JAVAC_IS_GCJ=no`

现在，`./configure`应该通过，但`make`不会。

我对为 生成的所有`Makefiles`内容`./configure`进行了grep，然后如果有带有参数的备用行，则`-fsource=`用（这是一个gcj特定标志）注释掉行，或者只是用.`-fsource``-source``fsource``source`

最后一步，我必须编辑顶层并从行中`Makefile`删除- 它没有编译并出现错误：`$(EXAMPLESDIR)``SUBDIRS = ...`

```
./gnu/classpath/examples/CORBA/NamingService/Demo.java:99: error: 
    package gnu.classpath.tools.tnameserv does not exist
      gnu.classpath.tools.tnameserv.Main.main(args);" 
```

## 它建成了！

我运行它时出错，但这[是一个完全不同的故事](https://stackoverflow.com/questions/19776571/error-dlopen-library-not-loaded-reason-image-not-found)......

```
$ DYLD_FALLBACK_LIBRARY_PATH=/usr/local/classpath/lib/classpath \
  /usr/local/jamvm/bin/jamvm -verbose:class -verbose:jni Test
...
Failed to open library /usr/local/classpath/lib/classpath/libjavanio:
dlopen(/usr/local/classpath/lib/classpath/libjavanio.so, 
1): image not found]
...
Exception occurred while printing exception (java/lang/NoClassDefFoundError)...
Original exception was java/lang/UnsatisfiedLinkError 
```

（如果我设法运行它，我会更新答案）

# c# - Visual Studio - 拦截和更改解决方案和项目的创建路径

> ID：747721
> 
> 赞同：1
> 
> 时间：2009-04-14T14:05:42.483
> 
> 标签：c#, visual-studio, templates, automation, customization

我正在开发一个自动化流程来构建一个包含通用库和项目的基础应用程序，将所有内容检查到源代码控制中并为解决方案设置基础构建。我已经解决的大多数问题除了一个。是否可以拦截用户给定的解决方案和项目路径并更改该路径？

换句话说。

用户在创建新项目屏幕上提供 C:/Projects/App1。解决方案和项目实际上存储在 C:/Projects/App1/trunk/source/App1

我想更改路径以促进如何设置 TFS 以进行持续构建。除了这个问题，我已经解决了大多数其他问题，看起来这应该是最简单的。我试图看看我是否可以在我的 IWizard 课程中改变它，但到目前为止，还没有运气。任何建议将不胜感激。

我应该补充一点，这个过程是由用户选择自定义模板触发的。如果使用自定义模板没有答案，我将切换到 VS 加载项。

-斯科特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-14T14:22:44.160

您应该查看[Guidance Automation Toolkit](http://msdn.microsoft.com/en-us/teamsystem/aa718948.aspx)。除其他外，它还允许您创建解决方案模板，让您可以执行您提到的所有操作等等。您甚至可以向用户提供一个向导 UI，询问您可以使用哪些选项自定义解决方案，包括哪些项目和文件引用。您可以设置各种项目设置；执行标准等

[您可以在服务工厂](http://www.codeplex.com/servicefactory/)中看到一个复杂的 GAT 示例。[在http://social.msdn.microsoft.com/forums/en-US/vsgatk/threads/](http://social.msdn.microsoft.com/forums/en-US/vsgatk/threads/)上还有一个 GAT 论坛。

GAT 是使用 Visual Studio 可扩展性真正完成任务的好方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T20:15:53.403

After looking into it some more, I discovered that the IWizard interface is not even called until after the folder structure for the solution (not the projects) has already been created. Since I need to make progress, I've decided to go ahead and switch it to an Add-In to Visual Studio instead of a purely templated process.

I've already had much more luck creating the solution programmatically then adding in the templated projects to my solution. I was able to get around the problem. I've snipped some code but this gives the basic idea.

System.Type vsType = System.Type.GetTypeFromProgID("VisualStudio.DTE.9.0"); DTE2 vs = (DTE2)System.Activator.CreateInstance(vsType, true);

soln = (Solution2)vs.Solution;

soln.Create(PathProjectRoot, SolutionName);

soln.SaveAs(SolutionName);

Thanks everyone for the suggestions.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-14T14:15:19.980

我不确定您在做什么，但是使用项目模板可以实现类似的操作。不确定这是否适用于您的情况。

**补充：**像这样的东西：

```
<TemplateContent>
    <Project>
        <Folder>
            <Folder>
                <ProjectItem></ProjectItem
            </Folder>
        </Folder>
    </Project>
</TemplateContent> 
```

# c# - 如何在 C# 中找到当前时间作为 long？

> ID：747722
> 
> 赞同：2
> 
> 时间：2009-04-14T14:05:46.837
> 
> 标签：c#, java

我有这个 Java 代码，我想在 C# 中做同样的事情：

```
long now =System.currentTimeMillis()/1000; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-14T14:10:59.163

检查[java 返回的内容](http://java.sun.com/j2se/1.4.2/docs/api/java/lang/System.html#currentTimeMillis())（1970/1/1 等）：

```
static readonly DateTime epoch=new DateTime(1970,1,1,0,0,0,DateTimeKind.Utc);
...
long ms = (long)(DateTime.UtcNow - epoch).TotalMilliseconds;
long result = ms / 1000; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-14T15:17:09.503

在 C# 中没有直接的等价物（我的意思是在一行中），但假设您只想要功能相似的东西，但不一定是您可以使用的 Java 实现：

```
DateTime.Now.Ticks; 
```

刻度是：

> 此属性的值表示自 0001 年 1 月 1 日午夜 12:00:00 以来经过的 100 纳秒间隔数，它表示 DateTime.MinValue。

[http://msdn.microsoft.com/en-us/library/system.datetime.ticks.aspx](http://msdn.microsoft.com/en-us/library/system.datetime.ticks.aspx)

这可能与您根本不相关，但是以 ticks/ms 为单位的时间通常用于微基准测试，以测量代码中某些内容需要多长时间，而 C# 有一个更好的类，即`Stopwatch`. 它更容易使用，也更准确。

像这样使用它：

```
Stopwatch s = Stopwatch.StartNew();
s.Stop();
Console.Write(s.Elapsed); 
```

这可能不是您想要做的，但无论如何都知道有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-14T14:15:28.560

currenTimeMillis 给出了自 1970 年 1 月 1 日以来的毫秒数，因此，如果您需要完全相同的答案，则需要以下内容：

```
((DateTime.Now - new DateTime(1970,1,1)).TotalMilliseconds) / 1000 
```

# business-objects - 如何列出 webi 报告中使用的 BO XIR2 Universe 对象？

> ID：747726
> 
> 赞同：0
> 
> 时间：2009-04-14T14:06:10.593
> 
> 标签：business-objects, business-objects-sdk

如何使用适用于 XIR2 的 Business Objects SDK 从 webi 报告中列出 Universe 对象？
没有sdk有没有自动化的方法？

使用 SDK，我已经能够遍历 webi 报表和 Universe 集合，但看不到检索查询对象或报表查询的本机方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2010-07-29T01:16:25.600

BusinessObjects 存储库（数据库）包含复杂的数据，散布在复合表列中。

通过CMS查询解密的存储库数据；意思是，它不能直接连接/查询，即覆盖了一个宇宙，因此查询直接从它运行。

但是，可以通过“查询构建器”GUI（通过管理员 Launchpad <= XIR2.x 或通过安装服务器程序菜单 XI 3.x+ 访问 - 两者都有 URL）或通过 Enterprise SDK 提交简单查询来质疑 BusinessObjects 存储库/网页服务。

返回的数据是 InfoObjects 的形式。InfoObject 是存储库中保存的数据的程序化、面向对象的表示。InfoObjects 可能有一个或多个相关的对象 inset，这些对象在查询结果中被投影为表中的表，但是数据输出可以在 MS Excel 等工具中操作并转换为表格格式。

SAP 开发人员在相关论坛和博客中讨论了查询存储库 InfoObjects 的访问方法，我建议阅读：[http](http://weblogs.sdn.sap.com/pub/wlg/13214) ://weblogs.sdn.sap.com/pub/wlg/13214了解更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-19T00:51:38.217

我不得不使用管理查询工具（构建查询——非常初级）从 CMS 中提取数据。我在输出中看到的一件事是数据连接和 SQL 语句。这在技术上不使用 SDK（呃，您正在使用他们对信息存储的内置访问），但您可能需要 SDK 文档来确定您正在寻找的内容。他们的实现非常粗糙，如果您查询错误，它不会告诉您它有什么问题。如果查询稍有错误，它可能会返回“未找到记录”语句。

返回的记录是多级的……如果查询中的一个字段可以引用另一个表，您可能会得到一个字段，其中包含子查询的结果。其中一些字段可能有子查询结果。弄清楚是一件很痛苦的事情，但是一旦您弄清楚了这些字段，您就可以（手动）从中提取数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-08-12T22:59:12.857

使用查询生成器，以下查询将返回与 Universe 关联的每个报告的 SI_ID 值：

SELECT * FROM CI_APPOBJECTS WHERE SI_KIND='Universe'

使用查询生成器，以下查询将根据 ID 返回 WebI 报告名称：

选择 SI_NAME,SI_DESCRIPTION,SI_ID,SI_AUTHOR,SI_PARENT_FOLDER,SI_UNIVERSE,SI_HAS_PROMPTS FROM CI_INFOOBJECTS WHERE SI_ID IN (xxx,xxx,xxx)

我看不到将两者结合在一起以仅显示带有报告的宇宙的方法。此外，我看不到将这些数据作为 WebI 报告导入 Business Objects 本身的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-29T10:51:11.870

有一种方法可以使用 BO 4.0 SDK 来实现：

```
// Get the list of webi documents
IInfoStore infoStore = (IInfoStore) enterpriseSession.getService("InfoStore");
String query = "select SI_NAME, SI_ID from CI_INFOOBJECTS "
      + "where SI_KIND = 'Webi' and SI_INSTANCE=0";
IInfoObjects infoObjects = (IInfoObjects) infoStore.query(query);

for (Object object : infoObjects) {
    IInfoObject infoObject = (IInfoObject) object;
    if (getInfoObjectPathAndTitle(infoObject).startsWith("/")) {
      System.out.println("REPORT: " + infoObject.getTitle());

      IDocumentInstance doc = documentInstanceManagementService
          .openDocument(context, infoObject.getID());

      List list = ReportDictionaryHelper
          .getDictionaryObjectsFlatList(context, doc);
      if (list.size() > 0) {
        System.out.println("OBJECTS:");
        for (DictionaryExpression expr:list) {
          System.out.println(expr.getName());
        }
      }

      List vars = ReportDictionaryHelper.getDocumentVariables(context,doc);
      if (vars.size() > 0) {
        System.out.println("VARIABLES:");
        for (Variable var:vars) {
          System.out.println(var.getName());
        }
      }

      documentInstanceManagementService.closeDocument(context, doc);
      System.out.println();
} 
```

但我正在寻找一种使用 BO XI R2 SDK 的方法。它不包含所需的 API。

# c++ - 如何使用 TR1 中的 regex_replace？

> ID：747735
> 
> 赞同：2
> 
> 时间：2009-04-14T14:07:16.037
> 
> 标签：c++, regex, c++11

我无法从 TR1 获得 regex_replace 工作。

```
#include <iostream>
#include <string>
#include <tr1/regex>

int main()
{
std::string str = "Hello world";
std::tr1::regex rx("world");
std::string replacement = "planet";
std::string str2 = std::tr1::regex_replace(str, rx, replacement);

std::cout << str2 << "\n";
} 
```

str2 是一个空字符串。

# silverlight - 如何在 Silverlight 中调试 Web 服务

> ID：747736
> 
> 赞同：0
> 
> 时间：2009-04-14T14:07:17.050
> 
> 标签：silverlight, web-services

我有托管在加载我的 silverlight 项目的同一个 web 项目中的 web 服务（我自己为数据库交互创建的）。每当我放置断点以通过异步方法遍历代码时，Visual Studio 只会将我指向响应事件（已完成事件），从而跳过 Web 服务中的代码，因此不知道它们内部发生了什么。是否有在 web 服务中启用调试的选项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-15T06:59:03.657

弄清楚为什么它进入了webservices，我将silverlight项目而不是web项目设置为启动项目

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-06-19T06:11:58.420

如果您的服务和 Web 项目都在同一环境中，那么，

1.  右键单击 wcfservice1（服务项目文件夹）---> 调试 ---> 启动新实例

2.  同样，右键单击 web 项目文件夹 ---> 调试 ---> 启动新实例

现在在两个文件中都设置断点并开始调试..简单...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-14T21:48:43.243

一种方法是启用 WebService 跟踪选项。默认情况下，WCF 服务不报告详细信息，因为服务错误是特定于该服务的技术，不应超出服务边界。您需要编写额外的代码来披露详细的异常信息。启用服务跟踪将允许您记录服务调用和异常，并查看堆栈跟踪，而无需额外编码，并使用服务异常处理程序污染您的客户端。

最快的方法是使用 WCF 服务配置编辑器（在 VS2008 的工具下）。运行编辑器后，打开包含服务设置的配置文件。在编辑器中，转到诊断菜单“文件夹”，然后单击“启用跟踪”。单击 Trace Level 选项将弹出一个对话框...将 Trace Level 下拉菜单设置为 Error。单击 ServiceModelTraceListener 并检查 Callstack 选项...为方便起见，可能会更改日志文件的路径。节省。

当您双击生成的 .svclog 文件时，Microsoft Service Trace Viewer 将启动，向您显示该服务正在做什么。

ib。

# mysql - 使用带有月/周/年日期函数的 MySql group by 子句时获取不存在的月/周/年

> ID：747738
> 
> 赞同：0
> 
> 时间：2009-04-14T14:07:23.243
> 
> 标签：mysql, datetime, group-by

我正在尝试实现一个查询，其中我使用聚合来汇总某些值，然后按 mysql 日期函数（月 | 年 | 周）分组。出于明显的原因，这些 group by 子句不会分别返回不存在的月或年或周。我想知道是否有办法得到它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-15T00:03:58.833

解决方案是否必须完全在 MySQL 中？如果它是对 Web 应用程序的查询，那么我将对 Web 应用程序进行编码以查找丢失的行并将它们插入到输出数据中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-14T14:13:43.510

您需要创建一个虚拟表：

```
CREATE TABLE t_dummy (num int PRIMARY KEY); 
```

, 填写并在`OUTER JOIN`:

```
SELECT  @start + INTERVAL num DAY, SUM(mytable.value)
FROM    t_dummy
LEFT JOIN
        mytable
ON      mytable.datetime >= @start + INTERVAL num DAY
        AND mytable.datetime < @start + INTERVAL num + 1 DAY
WHERE   t_dummy.num BETWEEN @start and @start + @days 
```

您需要在虚拟表中包含尽可能多的 consequent `NUM`，就像您希望报告涵盖的天数一样。

不幸的是，[**`MySQ`L 没有内置的行生成器**](https://stackoverflow.com/questions/701444/how-do-i-make-a-row-generator-in-mysql/707845)。

# c# - Windows/C# 系统级序列号生成器？

> ID：747742
> 
> 赞同：2
> 
> 时间：2009-04-14T14:07:55.863
> 
> 标签：c#, sequence, sequential-number

是否有托管的系统级序列号生成器？DateTime.Now.Ticks 不会这样做，因为我正在做的操作有时会在每个滴答声中发生不止一次。

* * *

**需求说明：**

*   进程不可知论——实际上只有一个进程可以访问它。
*   性能很关键！这用于记录广告服务器上的展示次数，可以达到 1k/秒

它需要是以下之一：

*   一个 4 字节的序列号，每个刻度都重置
*   一个 12 字节的序列号 - 本质上为 DateTime 添加了 4 个字节的粒度

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-14T14:13:38.470

没有用于此目的，但您可以使用[System.Diagnostics.PerformanceCounter](http://msdn.microsoft.com/en-us/library/system.diagnostics.performancecounter.aspx)。您也可以使用注册表，但您需要跨进程序列化读/写访问。

```
System.Diagnostics.PerformanceCounter pc 
    = new System.Diagnostics.PerformanceCounter("SeqCounter", "SeqInstance");
long myVal=pc.Increment(); 
```

# 编辑

我想得越多，我认为这可能是一个很好的解决方案。增量将通过原子操作将计数器增加 1，该原子操作应该在系统上的所有进程中工作。

# 编辑

根据您的编辑，我不建议使用性能计数器。性能计数器是一种跨多个进程协调的方法。我不确定内部实现是如何编码的。

为什么你不能只使用一个静态变量并增加它？如果您希望它是线程安全的，您将不得不锁定某些东西。

[System.Threading.Interlocked.Increment](http://msdn.microsoft.com/en-us/library/dd78zt0c.aspx)

仅供参考：如果您在 32 位系统上使用长版本，它不一定是线程安全的。

* * *

编辑以显示我使用的实现（DS）：

```
public static class Int32Sequencer
{
    private static Int32 lastSequence = Int32.MinValue;
    private static Object lockObject = new Object();
    public static Int32 GetNextSequence()
    {
        lock (lockObject)
        {
            unchecked { lastSequence++; }
            return lastSequence;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T14:12:49.830

Guid 与您将获得的一样接近，但它们是“唯一的”并且不一定是连续的。如果您真的想在系统级别跨多个进程按顺序执行，您可能不得不自己动手。

编辑：

好的，所以根据您的新要求，我将假设：

1.  只需要一个进程来完成这项工作
2.  您正在追加到数据库

所以这是我推荐的：

1.  在流程启动时，查询数据库以获取最后（最大）值（如果不存在，则为 0）。
2.  对每个 DB 行使用简单的 long 和 increment。由于数据速率高，您将希望分批插入。

那应该这样做。把事情简单化。这没有锁，启动时有轻微的（可忽略的）命中，以及数据库中的序列号。只要您只有一个进程运行该算法，它也与进程无关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-14T14:12:16.930

我认为最接近的东西是 guid，我相信你知道它充其量只是部分顺序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-14T14:19:34.167

我认为我们需要更多地了解您在寻找什么。你能澄清一下你的问题吗？尤其是服务...

*   需要跨所有进程、一个进程或特定用户工作？
*   数字必须是唯一的还是只是连续的？

根据您的问题，您可能正在寻找几个不同的项目。

## 需要跨系统上所有进程的一组连续数字

AFAIK，不存在这样的服务。一个应该相当容易编写，但让它在所有进程中工作是很棘手的。

## 需要跨系统上所有进程的唯一顺序数字组

第一个问题略有不同。这样的服务不存在，因为它不可能实现。使用内置数据类型无法保证唯一的序号，因为该值最终会溢出并给您留下重复的数字。

## 需要一种在系统中获取唯一值的方法

正如其他几个用户所提到的，最好的选择是 System.Guid 实例。您可以使用 Guid.NewGuid() 创建一个新的。对于几乎所有目的，它们可以被认为是唯一的，但不是连续的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-14T14:24:22.050

这里有一篇文章提供了有关 sql server 的一些详细信息： [SQL Server 中的顺序 GUID](http://www.yafla.com/dennisforbes/Sequential-GUIDs-in-SQL-Server/Sequential-GUIDs-in-SQL-Server.html)该技术用于最小化由于 GUID 的随机性而导致的页面拆分。也许这个链接会给你一些提示或想法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-14T15:26:03.600

我喜欢数据库选项只是为了安全。确保你安装一个怪物 SQL 服务器，在你的服务器之间分配带宽，但有足够的内存。在我工作过的第一家公司（甚至在我成为程序员之前）实施了一个类似的系统，它非常狡猾。你可能会努力扩大规模。

另一种选择是在您的代码中实现一个单例函数......只要一个应用程序域将调用它。可能比执行数据库之旅要快一些。但是，如果您无论如何都要把这些东西记录到数据库中......那么将两者结合起来怎么样......运行一个单例以提高速度，然后在资源允许时写入数据库。

同样，如果顺序要求不是那么强，那么 Guid 将是您最好的选择。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-14T19:03:06.403

没有锁定就无法获得单个顺序系列。无论您使用什么机制来分配下一个值——性能计数器、静态变量等等——当两个线程同时需要下一个值时，一个线程必须等待另一个线程。

我要做的第一件事是编写一个生成大量线程的测试程序，每个线程重复调用一个锁定增量函数，例如 Daniel Schaffer 发布的那个。这会让你找到你的应用程序开始崩溃的阈值——它花费更多的时间等待而`Monitor.Enter`不是做任何其他事情。

如果这被证明是一个问题——我敢打赌，如果你谈论的卷是真实的，它会的——那么你应该让每个线程维护自己的顺序计数器，你可以通过标记计数器字段来做到这一点与`ThreadStaticAttribute`. 然后，您可以根据线程 ID 和计数器的组合生成唯一标识符。

如果您不使用线程池，则此方法将不起作用（因为计数器在它所属的线程执行时死亡）。而且您可能还想让应用程序的启动计数成为复合 ID 的一部分，这样您就不必将线程计数器写入持久存储。（如果您不这样做，当您重新启动服务器时，线程将再次从零开始生成计数器，并且如果您的应用程序创建了一个与早期实例具有相同 ID 的线程，您将获得重复的标识符。）

这显然不是简单的编写（或更重要的是，测试），所以我绝对建议首先证明它是必要的。

# javascript - 如何（重新）启用 VS2008 Pro 在 IE8 中调试 javascript？

> ID：747744
> 
> 赞同：0
> 
> 时间：2009-04-14T14:08:59.043
> 
> 标签：javascript, visual-studio-2008, debugging, internet-explorer-8

由于我安装了 IE8 (Win XP) Visual Studio 2008 Pro 停止调试 javascript。当我在一行 javasscript 代码上设置断点并开始调试时，我不再受到打击。这在我安装了 IE7 时效果很好。代码没有改变。没有同时执行其他系统更改。

我该如何解决这个问题（如果可能，永久解决）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-14T14:15:01.820

在 Internet Explorer 中，转到：

工具（菜单）-> Internet 选项-> 高级（选项卡）

在浏览部分取消选中两个：

'禁用脚本调试 (Internet Explorer)'

和

'禁用脚本调试（其他）'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-08-20T13:20:27.077

现在 whit ie 8 你可以直接在开发工具栏中调试 javascript。打开开发工具栏，转到选项卡脚本并单击按钮开始调试。在右侧窗格中，您可以使用其他选项卡来获取监视、断点和其他功能。

# functional-programming - 把我的头绕在 OCaml 周围

> ID：747752
> 
> 赞同：7
> 
> 时间：2009-04-14T14:10:44.610
> 
> 标签：functional-programming, ocaml

我只是一个新手程序员（我这样做是为了好玩），我来自 Python/C++/其他程序语言的世界，以及解决问题的程序风格。在被 OCaml 的功能风格困扰了大约一周后，我爱上了 OCaml 的简单性。由于我不是工程师或数学家，有哪些有用的书籍或资源可以帮助我转变思维过程以更有效地思考？只是标准练习还是有书可以帮助我以这些方式思考？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-14T14:44:45.870

我是“The Little MLer”的忠实粉丝，“The Little Schemer”的 ML 版本（nee “The Little Lisper”）整本书采用问答格式，引导您了解语言。

最大的缺点是它并没有真正涵盖（IIRC）OCaML 的“O”部分......但它很好地覆盖了 ML 部分......

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-14T21:55:22.917

Jason Hickey 的“Objective Caml 简介”很好地介绍了 OCaml，可在线获取：http: [//files.metaprl.org/doc/ocaml-book.pdf](http://files.metaprl.org/doc/ocaml-book.pdf)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-15T02:20:03.840

It's not specific to OCaml, but if you want to learn to think in a functional way, a great place to start is with John Hughes's paper [Why Functional Programming Matters](http://www.cs.chalmers.se/~rjmh/Papers/whyfp.html).

# visual-studio-2008 - 如何在 Visual Studio 2008 中开发并为 .Net 2 嵌入报表查看器对象？

> ID：747757
> 
> 赞同：0
> 
> 时间：2009-04-14T14:11:02.190
> 
> 标签：visual-studio-2008, sql-server-2005, reporting-services, reportviewer, reportingservices-2005

应用程序正在开发中`VS 2008`。使用报告查看器并从`SQL Server 2005`服务器上的 SSRS 调用报告。

```
Error:
Server Error in '/AppName' Application. 

Configuration Error 
Description: An error occurred during the processing of a configuration file required to service this request. Please review the specific error details below and modify your configuration file appropriately. 

Parser Error Message: Could not load file or assembly 'Microsoft.ReportViewer.WebForms, Version=9.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' or one of its dependencies. The system cannot find the file specified.

Source Error: 
Line 41: <add assembly="Microsoft.ReportViewer.WebForms, Version=9.0.0.0 
```

我的猜测是，这是因为`.Net 3.5`vs`.Net 2.0`的事情。Application Server 没有也`3.5`不会。

您如何修复`VS 2008`以使其使用适合`.Net 2`应用程序的报告查看器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-28T09:37:48.563

如果您在项目中为 ReportViewer 引用设置了 Copy Local = True，那么在您发布时，所需版本的 dll 将被复制到您的 bin 文件夹中。

有关详细信息，请参阅[http://dotnetslackers.com/_NET/re-100203_Error_Could_not_load_file_or_assembly_Microsoft_ReportViewer_WebForms_Version_9_0_0_0.aspx 。](http://dotnetslackers.com/_NET/re-100203_Error_Could_not_load_file_or_assembly_Microsoft_ReportViewer_WebForms_Version_9_0_0_0.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T13:49:20.073

我们通过将 2005 Report Viewer 和 2008 Report Viewer 都放在服务器上解决了这个问题。感谢您的回复。

# usability - 如何找到合适的人进行 API 功能审查？

> ID：747765
> 
> 赞同：-1
> 
> 时间：2009-04-14T14:12:12.280
> 
> 标签：usability, business-logic, review

我们正在开发一个提供 API 接口的产品，以便其他开发人员可以使用主要产品的某些功能。

这已经实施并记录在案。

但我不确定这是否非常有用，并且文档对于开发人员来说非常清晰。

我们如何找到人来评论这个功能？应该是什么样的人？

从某种意义上说，我们正在为单个功能/组件寻找产品负责人。是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-14T14:14:21.120

让对您的产品没有经验的人为您的 API 制作一些示例代码或客户端的参考实现。然后他们会很好地了解文档的不足之处或 API 需要改进的地方。这可以是承包商，也可以是新开发人员（让他们跟上进度的好方法）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T14:16:13.097

首先，如果您正在开发供他人使用的 API，我建议您阅读以下书籍：[http ://www.amazon.com/Framework-Design-Guidelines-Conventions-Development/dp/0321545613](https://rads.stackoverflow.com/amzn/click/com/0321545613)

在需要进行任何审查之前，遵循这些规则将避免您的界面出现大量可用性问题。

其次，对一些目标开发人员进行可用性研究，这些开发人员可能会使用此 API，但以前从未见过它。把他们放在系统前面，给他们一些任务，然后观察他们是如何弄清楚如何去做的。他们的痛点会告诉你需要改进的地方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-14T14:18:10.503

轮询您的最终用户并找出哪些用户正在使用您的 API 与您的软件进行交互。然后，您可以调查这些用户，并了解他们对您在 API 中提供的各种功能以及文档的易用性和清晰度的看法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-14T14:26:45.210

每个 API 都有一些目标受众（即开发与您的产品集成的客户）。从这个角度来看，最好从这些观众那里获得反馈。您可以建立一些早期访问程序，或者发布一些公共测试版。

如果您没有这样的受众（即您正在为尚未公开的产品开发 API），我建议您进行一些“可用性测试”之王 - 即选择一个具有大致目标受众技能的开发人员并给他一些任务涉及API使用。然后得到他的反馈。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-14T14:28:14.397

最好找到一个已经为所讨论的语言设计了一些已知框架的程序员。

我认为您的用户认为无关紧要，因为您无法通过向任意程序员询问他对框架的看法来判断框架。他的答案将取决于他的知识水平和个人方法，而 API 是为更广泛的人群设计的（我假设这是你的情况）。为了完成这一点，在我公司使用 VB.NET 的程序员认为 C# 是蹩脚的语言，因为你不能在 C# 中编写 Button = "Text" 并让编译器自动为你找到默认属性。你不希望这样的人评判你的框架。

即使是有不同语言经验的设计师也可能会有所帮助，因为更广泛使用的 API 应该在人们已经熟悉的众所周知的编程模式的帮助下实现。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-14T15:50:52.217

如果我站在你的立场上，我会开始编写示例应用程序，或者做一个演示来引导人们完成这些步骤，或者做一些其他类似的练习。它不如从用户那里获得反馈，但它可以解决一些问题。

另一个（可能是坏的）想法是在 elance/guru 网站上花钱，并提出一个您认为代表用户将如何使用 API 的示例应用程序/功能。为此制作项目，然后作为项目的一部分从开发人员那里获得反馈。

你可能会想要能用你的母语交流的人......

By the way, waiting until it is all documented and implemented is probably not the best time to review it... it would have been a lot better to do the review before implementation.

# python - wxPython：手动调用事件

> ID：747781
> 
> 赞同：22
> 
> 时间：2009-04-14T14:14:27.017
> 
> 标签：python, user-interface, events, wxpython

如何从我自己的代码中手动调用特定事件？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2009-05-08T17:55:39.943

老话题，但我想我在困惑了很长时间后已经弄清楚了，所以如果其他人来这里寻找答案，这可能会有所帮助。

要手动发布事件，您可以使用

```
self.GetEventHandler().ProcessEvent(event) 
```

[（此处](http://www.wxpython.org/docs/api/wx.EvtHandler-class.html)为wxWidgets 文档，[此处](http://docs.wxwidgets.org/stable/wx_wxevthandler.html#wxevthandlerprocessevent)为 wxPython 文档）

或者

```
wx.PostEvent(self.GetEventHandler(), event) 
```

（[wxWidgets 文档](http://docs.wxwidgets.org/stable/wx_miscellany.html#wxpostevent)，[wxPython 文档](http://www.wxpython.org/docs/api/wx-module.html#PostEvent)）

`event`您要发布的活动在哪里。用例如构造事件

```
wx.PyCommandEvent(wx.EVT_BUTTON.typeId, self.GetId()) 
```

如果您想发布 EVT_BUTTON 事件。使其成为[PyCommandEvent](http://www.wxpython.org/docs/api/wx.PyCommandEvent-class.html)意味着它将向上传播；其他事件类型默认不传播。

您还可以创建自定义事件，这些事件可以携带您想要的任何数据。这是一个例子：

```
myEVT_CUSTOM = wx.NewEventType()
EVT_CUSTOM = wx.PyEventBinder(myEVT_CUSTOM, 1)

class MyEvent(wx.PyCommandEvent):
    def __init__(self, evtType, id):
        wx.PyCommandEvent.__init__(self, evtType, id)
        myVal = None

    def SetMyVal(self, val):
        self.myVal = val

    def GetMyVal(self):
        return self.myVal 
```

（我想我在某处的邮件列表存档中找到了此代码，但我似乎无法再次找到它。如果这是您的示例，谢谢！请添加评论并记下它！）

所以现在，发布一个自定义事件：

```
event = MyEvent(myEVT_CUSTOM, self.GetId())
event.SetMyVal('here is some custom data')
self.GetEventHandler().ProcessEvent(event) 
```

你可以像任何其他事件一样绑定它

```
self.Bind(EVT_CUSTOM, self.on_event) 
```

并在事件处理程序中获取自定义数据

```
def on_event(self, e):
    data = e.GetMyVal()
    print 'custom data is: {0}'.format(data) 
```

或者在事件构造函数中包含自定义数据并保存一个步骤：

```
class MyEvent(wx.PyCommandEvent):
    def __init__(self, evtType, id, val = None):
        wx.PyCommandEvent.__init__(self, evtType, id)
        self.myVal = val 
```

等等

希望这对某人有帮助。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-04-14T18:28:22.150

我想你想要[wx.PostEvent](https://docs.wxpython.org/wx.functions.html#wx.PostEvent)。

在 wxPython wiki 上还有一些关于从其他线程为[长时间运行的任务](http://wiki.wxpython.org/LongRunningTasks)发布事件的信息。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2010-11-15T23:38:17.387

使用最新版本的 wxPython 有一种简单直接的方法（参见[http://wiki.wxpython.org/CustomEventClasses](http://wiki.wxpython.org/CustomEventClasses)）：

```
 # create event class
   import wx.lib.newevent
   SomeNewEvent, EVT_SOME_NEW_EVENT = wx.lib.newevent.NewEvent()

   # post it, with arbitrary data attached
   wx.PostEvent(target, SomeNewEvent(attr1=foo, attr2=bar))

   # bind it as usual
   target.Bind(EVT_SOME_NEW_EVENT, target.handler) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-07-21T15:11:48.890

虽然其他答案中提到的`PostEvent`和`ProcessEvent`之类的方法可以做到这一点，但请注意它们有很大的局限性：

*   您可以轻松创建的事件受到限制。例如，没有办法`wx.KeyEvent`使用特定的键码创建 a，因为构造函数不采用键码并且没有设置器。也许有解决方法（比如 subclassing `KeyEvent`），但你基本上不得不绕过框架的限制。
*   即使对于您*可以*创建的事件（例如单击事件），您通过以编程方式调度事件获得的行为也不会与您作为用户实际执行该操作所获得的行为相匹配，因为事件的*本机*处理不会不开火。例如，以编程方式在文本字段上触发单击事件不会使文本字段获得焦点。

我建议不要在大多数情况下使用`PostEvent`or 。`ProcessEvent`如果你只是为了让你的事件处理函数运行，那么手动创建事件是没有意义的；相反，只需显式调用该函数。如果你想要它们是因为你正在尝试编写一个自动化的 UI 测试，那么由于上面列出的限制，你可能最终不会得到满足你的东西；相反，我建议使用[`wx.UIActionSimulator`](https://wxpython.org/Phoenix/docs/html/wx.UIActionSimulator.html). 这有点恶心，并且会控制您系统的鼠标和键盘，这通常会使此类测试不适合您在开发机器上运行的测试套件......但至少它*可以工作*，`PostEvent`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-04T23:09:19.443

我想这取决于您的事件与什么相关联，但是当您在列表中选择一个项目时，我需要对显示数据的 LabelFrame 执行相同的操作。这是我能够做到的方式：

```
'This is the line that binds my function "get_selected_location()"
to the action of selecting an item in my List box.'

self.list1_scoring.bind('<<ListboxSelect>>', self.get_selected_location) 
```

因此，每当您单击“list1_scoring”框中的某个项目时，get_selected_location() 将运行，有关所选项目的详细信息将出现在另一个 LabelFrame 中。我需要在更新过程完成后调用此事件以刷新我的显示窗口。所以我在运行更新的函数末尾添加了这一行。

```
self.get_selected_location('<<ListboxSelect>>') 
```

这会再次运行 get_selected_location() ，就好像我刚刚再次单击了我的列表一样。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-04-14T14:19:36.880

你的意思是你想要一个事件调度？

> ::wxPostEvent 无效 wxPostEvent(wxEvtHandler *dest, wxEvent& 事件)
> 
> 在 GUI 应用程序中，此函数使用 wxEvtHandler::AddPendingEvent 将事件发布到指定的目标对象。否则，它会立即使用 wxEvtHandler::ProcessEvent 调度事件。有关详细信息（和注意事项），请参阅相应的文档。
> 
> 包含文件
> 
> `<wx/app.h>`

[wxPython API 文档](http://www.wxpython.org/onlinedocs.php)

# apache-flex - FLEX：使元素在姐妹元素上扩展

> ID：747791
> 
> 赞同：0
> 
> 时间：2009-04-14T14:16:52.550
> 
> 标签：apache-flex

我的应用程序包含一个面板，里面有 3 个 VBox。最左边的 VBox 包含一个 TileList。TileList 有很多瓷砖并且向下滚动很远，所以我想给他们一个扩展它的选项。我希望 Tilelist 向右伸展，覆盖其他 2 个 VBox。因为它在左边，所以它在 MXML 中是第一个，我相信这使它在显示列表中的位置较低。

这样做的最佳方法是什么？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-15T14:48:21.123

我将面板设置为绝对布局，然后将 TileList VBox 放在 MXML 中的最后，这样它就会在显示列表中处于最高位置。然后我使用 < Resize /> 使其扩展到其姐妹元素。

# python - Python 博格模式问题

> ID：747793
> 
> 赞同：7
> 
> 时间：2009-04-14T14:17:36.637
> 
> 标签：python, design-patterns

我在 python 中实现 borg 时遇到问题。[我在这个问题](https://stackoverflow.com/questions/736335/python-superglobal)的答案中找到了一个例子，但它对我不起作用，除非我遗漏了一些东西。这是代码：

```
 class Config:
    """
    Borg singleton config object
    """
    __we_are_one = {}
    __myvalue = ""

    def __init__(self):
        #implement the borg pattern (we are one)
        self.__dict__ = self.__we_are_one
        self.__myvalue = ""

    def myvalue(self, value=None):
        if value:
           self.__myvalue = value
        return self.__myvalue

conf = Config()
conf.myvalue("Hello")
conf2 = Config()
print conf2.myvalue() 
```

我认为这是为了打印“Hello”，但对我来说它只是打印一个空行。任何想法为什么会这样？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-04-14T14:33:32.790

看起来它工作得很好:-)

问题在于，每次创建新 Borg 时，分配`self.__myvalue = ""`总是会`__init__`破坏价值。`myvalue`如果您在测试中添加一些额外的打印语句，您可以看到这一点：

```
conf = Config()
conf.myvalue("Hello")
print conf.myvalue()  # prints Hello
conf2 = Config()
print conf.myvalue()  # prints nothing
print conf2.myvalue() # prints nothing 
```

删除`self.__myvalue`，一切都会好起来的。

话虽如此，实现`myvalue()`有点奇怪。更好的是，我会说，让明确的 getter 和 setter 使用属性。您还需要一些代码`__init__`来初始化`myvalue`如果它尚不存在的值，或者至少处理它在 getter 中可能不存在的情况。也许是这样的：

```
class Config(object):
    """
    Borg singleton config object
    """
    _we_are_one = {}

    def __init__(self):
        #implement the borg pattern (we are one)
        self.__dict__ = self._we_are_one

    def set_myvalue(self, val):
        self._myvalue = val

    def get_myvalue(self):
        return getattr(self, '_myvalue', None)

    myvalue = property(get_myvalue, set_myvalue)

c = Config()
print c.myvalue # prints None
c.myvalue = 5
print c.myvalue # prints 5
c2 = Config()
print c2.myvalue #prints 5 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-14T14:43:16.823

结合[新式 Borg](http://code.activestate.com/recipes/66531/#c20)`self.__myvalue = ""`的删除和避免在变量名中使用的建议，我们得到：`__`

```
class Config(object):
    """
    Borg singleton config object
    """
    _we_are_one = {}
    _myvalue = ""

    def __new__(cls, *p, **k):
        self = object.__new__(cls, *p, **k)
        self.__dict__ = cls._we_are_one
        return self

    def myvalue(self, value=None):
        if value:
           self._myvalue = value
        return self._myvalue

if __name__ == '__main__':
    conf = Config()
    conf.myvalue("Hello")
    conf2 = Config()
    print conf2.myvalue() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-14T14:32:26.163

问题似乎是 init() 正在将 myvalue 重置为空字符串。当我删除该行时，我得到了预期的输出。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-01-31T23:12:20.273

```
class Borg(object):
    """Demonstrating the Borg-pattern: All the instances of a class already
    know what one of them learned... Scary, isn't it?"""

    def __init__(self, name):
        self.name = name

    @classmethod
    def borg_knowledge(cls, who_is_it):
        if hasattr(cls, "b_knowledge"):
            return "%s: I already know that the borg pattern is awesome!" % who_is_it
        else:
            cls.b_knowledge = True
            return "%s: Learning about the borg pattern..." % who_is_it

    def personal_experience(self):
        if hasattr(self, "p_knowledge"):
            return "%s: I already know that!" % self.name
        else:
            self.p_knowledge = True
            return "%s: Learning something..." % self.name

b1 = Borg("b1")
b2 = Borg("b2")
print ">> Created b1 and b2, both Borg"; print

print ">> Usual class behavior. One instance does not know what the other does."
print b1.personal_experience()
print b2.personal_experience()

print
print ">> Borg have a shared knowledge a.k.a. why classmethods are different!"
print b1.borg_knowledge(b1.name)
print b2.borg_knowledge(b2.name) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-04-09T04:21:28.417

```
> The problem appears to be that init() is resetting myvalue to an
> empty string. When You remove that
> line ('self.__myvalue = ""')  then you will get the expected
> output. 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-04T01:11:39.753

我尝试使用“旧式”和“新式”来实现这一点，但我看不出它们之间的区别。一个比另一个有优势吗？或者这些基本上是等价的？

```
class Borg(object):
    shared_state = {'a_value': True}
    def __init__(self):
        self.__dict__ = self.shared_state

class NewBorg(object):
    shared_state = {'a_value': True}

    def __new__(cls, *p, **k):
        self = object.__new__(cls, *p, **k)
        self.__dict__ = cls.shared_state
        return self

borg_a = Borg()
borg_b = Borg()

print id(borg_a), '!=', id(borg_b)
assert borg_a.shared_state == borg_b.shared_state
borg_a.shared_state['a_value'] = False
assert borg_a.shared_state == borg_b.shared_state

new_borg_a = NewBorg()
new_borg_b = NewBorg()

print id(new_borg_a), '!=', id(new_borg_b)
assert new_borg_a.shared_state == new_borg_b.shared_state
new_borg_a.shared_state['a_value'] = False
assert new_borg_a.shared_state == new_borg_b.shared_state 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-01-09T02:26:41.673

尝试这个

```
class Config:
    """
    Borg singleton config object
    """
    __we_are_one = {}
    __myvalue = ""

    def __init__(self):
        #implement the borg pattern (we are one)
        self.__dict__ = self.__we_are_one
        if self.__we_are_one:
            return
        self.__myvalue = ""

    def myvalue(self, value=None):
        if value:
           self.__myvalue = value
        return self.__myvalue

conf = Config()
conf.myvalue("Hello")    # print "Hello"
conf2 = Config()
print conf2.myvalue()    # print "Hello" 
```

# sql-server - MSSQL - 当列名动态时呈现数据

> ID：747800
> 
> 赞同：0
> 
> 时间：2009-04-14T14:19:07.443
> 
> 标签：sql-server, tsql, dynamic-sql

我正在向员工提交最终权威评估分数。每一行都是员工的数据，并且由于要评估的类别可以随时期而变化，因此列名不能在存储过程中硬编码。我已经设计了以下解决方案。

1 创建一个临时表
2 动态使用 Alter Table 命令添加所有适用的列（存储在 @ColumnNames 中）
3 在游标内使用动态 SQL 为每个获得正确分数的员工编写插入（IE N 员工意味着 N 插入）

```
(SELECT @ECMScores = COALESCE(@ECMScores + ',', '') + CAST(EIS.ECMScore AS NVARCHAR(1000)) (FROM...))

SET @SQLString = ''

SET @SQLString = @SQLString + 'INSERT INTO      #ResultSet ('
SET @SQLString = @SQLString + 'EvaluationScoreID,'
SET @SQLString = @SQLString + 'EmployeeID,'
SET @SQLString = @SQLString + 'EmployeeName,'
SET @SQLString = @SQLString + @ColumnNames
SET @SQLString = @SQLString + ') '

SET @SQLString = @SQLString + 'VALUES ('
SET @SQLString = @SQLString + ''+CAST(@EvaluationScoreID AS NVARCHAR(MAX))+','
SET @SQLString = @SQLString + ''+CAST(@EmployeeID AS NVARCHAR(MAX))+','
SET @SQLString = @SQLString + '"'+@EmployeeName+'",'
SET @SQLString = @SQLString + @ECMScores
SET @SQLString = @SQLString + ')'

EXECUTE sp_executesql   @SQLString 
```

问题是每 100 名员工大约需要 1 秒。这很快就变得不可接受了……</p>

有没有人对如何进行有更好的想法？删除光标（显然），并使用一个插入（也许选择进入）是我的第一个想法，也许是从动态创建的 XML 变量中读取......</p>

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-14T15:02:45.700

不要将数据存储在架构中

创建这样的表：

```
Assignment
AssignmentID   int not null primary key identity(1,1)
AssignmentName varchar(50)  not null
AssignmentDate datetime not null
etc..

Score
ScoreID       int not null primary key identity(1,1)
EmployeeID    int not null
AssignmentID  int not null
ScoreValue    int not null

Employee
EmployeeID    int not null primary key identity(1,1)
EmployeeName  varhar(100) not null
etc.. 
```

您现在可以创建“作业”并插入“分数”，而无需构建动态查询，因为您的列总是会发生变化。您的列现在将保持不变，数据将发生变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T14:37:10.207

首先，你有机会改变数据库结构吗？如果我理解正确，字段*EIS.ECMScore*包含多个值，这违反了规范化规则。我个人会重新设计表*EIS*并对其进行规范化，因为它会使您的任务更容易。

# database - 数据库中的整数与字符串

> ID：747802
> 
> 赞同：26
> 
> 时间：2009-04-14T14:19:30.547
> 
> 标签：database, language-agnostic, database-design

在数据库中定义数据类型时，我一直在选择是使用整数还是字符串来存储某些“数字”数据时遇到问题。

假设我正在构建[另一个](http://www.freewebmasterhelp.com/tutorials/phpmysql/2) [地址](http://www.thundersoftware.com/churchdb/sqltutorial/sql_tutorial.html)[簿，并且有](http://www.peacecomputers.com/addressbook/step7.html)[一个](http://www.globalguideline.com/sql/SQL_Create_Index.php) 邮政编码字段。如果邮政编码*始终*是 4 位数字，我将其存储为哪种数据类型？整数还是字符串？从技术上讲，它是一个整数，但我没有对其进行任何类型的计算，我只是将它吐到一个表中。如果我想按邮政编码对表格进行排序，您的意见会改变吗？

 *现在，我不傻。我确实认识到对整数的有效需求，例如页面浏览量和唯一用户或登录用户和访客用户。但是如何存储洪流中的文件数量呢？整数还是字符串？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2009-04-14T14:27:28.937

在我的国家，邮政编码也总是 4 位数字。但第一个数字可以为零。

如果将“0700”存储为整数，则会遇到很多问题：

*   它可以被读取为八进制值
*   如果正确读取为十进制值，则变为“700”
*   当你得到值“700”时，你必须记得加上零
*   我不加零，以后怎么知道“700”是“0700”，还是有人打错了“7100”？

从技术上讲，我们的邮政编码实际上是字符串，即使它始终是 4 位数字。

您可以将它们存储为整数，以节省空间。但请记住，这是一个简单的 DB 技巧，请注意前导零。

> 但是如何存储洪流中的文件数量呢？整数还是字符串？

这显然是一个整数。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2009-04-14T14:51:37.177

我总是使用以下规则：

如果您计划对其执行数学计算（加/减/等），请将其设为整数或其他数字数据类型。

如果您不打算对该字段执行任何类型的数学计算，请将其存储为字符串。

在邮政编码的实例中，您永远不应该需要将两个邮政编码相加、相减或相乘。数学函数通常不用于邮政编码，因为它们用作标识符而不是数量。因此，您应该将邮政编码存储为字符串数据类型

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-04-14T14:24:12.360

在我看来，对于邮政编码，您必须使用字符串，因为您可以使用以零开头的邮政编码（09100），如果您使用整数，它将是 9100：排序不是问题，因为仍然存在字母顺序（' 09100' 在 '09101' 之前）。对于存储文件编号，我希望使用整数，因此您在增加/减少其数量时没有任何问题。所以整数与字符串取决于你的用途！

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2009-04-14T14:25:27.227

这是一个语义问题。您正在尝试确定合适的存储数据类型，这可能是一个棘手的问题。如果您需要将数据用作整数，最好的经验法则是将数据存储为整数。

换句话说，由于您永远不会将邮政编码用作数字，因此将其存储为一个数字是没有意义的。*数据长什么样*并不重要，重要的是它*是*什么。邮政编码是数字吗？不，它是一串字符，恰好由全数字字符组成。因此，邮政编码最好存储为字符串。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2009-04-14T14:52:54.397

就邮政编码而言，这是典型的英国邮政编码：

```
EC2R 6PK 
```

在大学里，我的数据库讲师告诉我一些一直困扰着我并且在 15 年后仍然存在的东西：

> 如果您对其进行算术运算，请将其存储为数字。否则它是一个字符串。

坦率地说，我认为你不会对这个建议出错。

显然，您不对邮政编码执行算术运算，因此它们是字符串。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2009-04-14T14:33:19.703

邮政编码不是数字：它是代码或标识符。这同样适用于电话号码。

torrent 中的文件数是整数。

尤其重要的是，在这种情况下，您可以创建一个`CHECK CONSTRAINT LIKE '[09][09][09][09]'`以在数据库级别保持数据正确。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-04-14T14:23:55.217

对于邮政编码，我会选择一个字符串。它本质上不是整数。它只是某物的标识符，也可以是一系列四个字符。

至于种子中的文件数，应该是整数。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-04-14T14:23:57.387

'0000' 是邮政编码吗？它与 '0' 不同吗？

如果它总是一个四位数字，我总是将它存储为 4 位数字，这将指向将其保存为字符串。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-04-14T14:31:09.583

除非我希望对数据进行数学运算，否则我不会使用数值数据类型。为什么要冒险在将来为您“确定”的事情冒险发现问题总是有人决定放入非数字字符的数字。

如果您不打算对其进行数学运算，请将其设为字符串。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-04-14T14:43:08.790

请记住，并非所有国家/地区的所有邮政编码都只是数字。仅仅因为您现在在加拿大没有任何地址并不意味着您将没有任何地址。我一直遵循规则，如果你想进行数学计算，将其存储为数字类型，如果它只是一个代码（邮政编码、电话、SSN、零件号等），那么我将其存储为字符串。您要避免的是每次调用时将数据不必要地转换为另一种格式（例如，如果您将邮政编码存储为数字，则添加前导零的代码或将字符串转换为数字以进行计算的代码）。如果您需要重复执行这些操作，这些操作可能会很昂贵，尤其是当表很大并且您最终不得不在 where 子句中进行转换时。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-05-12T12:56:17.500

即使您不希望对其执行数学运算，我也认为将邮政编码存储为数字没有问题。

在我们的企业数据仓库中，我们是来自许多遗留系统的数据的接收者。结果，我们看到大量垃圾数据被使用。

以我们的例子为例，我们有一个地理标识符，它是一个零填充的 4 位“数字”值。该字段通常用于将表连接在一起。

我将采用以下两种方法之一：1）将该列声明为长度为 4 的 char 字段并添加一个 CONSTRAINT LIKE '[09][09][09][09]' 2）将其定义为数字长度 4 并且，如果用户需要它，请仅在显示时格式化该值。

方法数字 1 为您省去了不断格式化的麻烦，这没什么大不了的，但如果您经常过滤甚至索引/加入列，我会考虑说我们不使用选项 #2。

第三个原因是我的经验是人们在向数据库添加约束时只是懒惰，或者他们是无知的。我个人认为这更多的是懒惰。我发现确实存在的约束主要应用于最初捕获数据的应用程序中的编辑，而这些编辑并未统一应用。

因此，我们的数据仓库最终会收到各种变化，包括不一致的预填充零或值的合理性。

当您将某些内容定义为 INTEGER 时，您会自动获得更高效的存储，尤其是。在对列进行索引时，以及编辑每个人都理解并且更有可能被具有各种能力的数据库设计人员在遗留系统中一致地应用。

我对选项＃1 没有任何问题，除了在索引中使用该字段以及我对一旦您接受一个字段作为 apha 数字的方法的担忧，人们往往会在其中投入更多的垃圾。

以我们的 Peoplesoft 员工标识符为例。有人决定在员工 6 字符零填充的“数字”前添加一个“X”，以指定该员工是承包商。这违反了我的个人习惯，即不将单独的信息组合到一个字段中。这导致了各种系统之间的各种不一致问题。如果这个字段是一个数字，没有人会尝试这样做。

评论？

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-04-14T14:22:46.687

邮政编码是字符串。对于某些国家，这些字符串可能仅包含数字，但这并不能使它们成为整数。迟早你的potal系统会用完数字并决定开始使用字母。如果您的数据库使用整数作为邮政编码字段，那么您将陷入困境。

底线 - 如果你不对它做算术，它可能不是一个真正的数字。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-04-14T14:31:33.670

关键的决定因素，恕我直言，是应用程序是否需要对值进行数值算术计算，如果不需要，那么使用整数的唯一原因是减少存储要求，（这“可能”对关键性能很重要）应用程序 - 例如，通过减小表索引的宽度来提高索引性能）但除此之外，通常并不重要......

如果不需要对这些值进行算术运算，那么最好使用字符串。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-04-14T16:50:21.307

有时“总是”的意思是“下个月”。在我的职责范围内，我不会指望 4 位代码不会变成字母数字。

一些 SQL 方言支持类似于 NUMBER(4) 的数据类型。这很像字符串，但字母表是 0 到 9。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-01-10T20:44:09.590

了解您正在使用的数据的语义总是很重要的。让我在例子中解释一下。

考虑您想将 PIN 存储在数据库中。要回答您应该使用什么数据类型，您必须首先回答 PIN（[个人识别号](https://en.wikipedia.org/wiki/Personal_identification_number)）的真正含义。

1.  如果它真的是一个数字，正如它的名字所表明的那样，那么我看不出有什么理由不应该将它表示为整数。

    有些人可能会争辩说您无法区分 0001 和 01。显然他们不认为 PIN 是一个数字，如果他们正在使用这种语义，他们应该使用字符串。

    **注意**：如果 PIN 长度固定为 4 位数字，他们仍然可以使用整数，因为任何数字都将始终用前导零填充，并且意味着完全相同（0001 将与 01 相同） - 但这些固定长度限制是典型的数字以避免错误输入。*

2.  如果语义清楚地表明 PIN 是一个数字，即 PIN 0001 与 PIN 01 完全相同，我将使用整数表示。

    因此，在您的情况下，了解[邮政编码](https://en.wikipedia.org/wiki/Postal_code)语义很重要。该语义在不同国家/地区可能会有所不同（甚至会随着时间而变化），因此您要使用哪个也很重要。为了涵盖所有类型的邮政编码甚至可能的更改，我会考虑使用更抽象的数据类型或仅使用字符串（我相信已经存在包含更多字符而不仅仅是数字的语义）。

我不建议遵循简化的规则，例如关于数据表示上的算术运算的规则。如果您现在不想对数据执行数学运算并不意味着您将来有时也不想。

您有数据并且想要存储它，以某种方式表示它 - 只需考虑您正在使用的数据是什么。

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2020-05-11T21:22:53.647

如果必须对数字字段执行算术运算，则应仅使用数字字段。否则只需使用 string/varchar/etc

# c# - BackgroundWorker 和线程

> ID：747807
> 
> 赞同：8
> 
> 时间：2009-04-14T14:19:52.323
> 
> 标签：c#, multithreading, backgroundworker

使用两者来完成给定任务的优点和缺点是什么。

百万美元的问题是使用哪一个以及何时使用？

非常感谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-14T14:23:38.713

如果您所说的“线程”是指明确使用 System.Threading.Thread 类来创建、配置和启动您自己的线程，那么答案是您需要做更多的工作，涉及更多的 CPU 周期，而不仅仅是拉线程来自线程池，（这是其他技术所做的），但它为您提供了更大的灵活性，因为它允许您指定线程优先级，以及使用线程池线程无法提供的其他几个特性。

当所需的线程数在设计时未知时，“线程池”方法更合适。池最初包含少量线程，“准备好”供您调用它们。它可以按需动态创建新线程，并为您管理未使用线程的创建、协调和删除。您可以使用三种机制来访问和使用池中的线程。

1.  使用 Delegate.BeginInvoke()（最常用的技术）
2.  使用计时器（几种变体）
3.  System.Threading.ThreadPool 提供了其他几个功能（BackGroundWorker 类、QueueUserWorkItem() 等）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-14T14:29:07.530

看看[这个很棒的线程概述](http://www.albahari.com/threading/part3.aspx#_BackgroundWorker)：

> [BackgroundWorker] 提供以下功能：
> 
> *   一个“取消”标志，用于指示工作人员在不使用 Abort 的情况下结束
>     
>     
> *   用于报告进度、完成和取消的标准协议
>     
>     
> *   IComponent 的实现，允许它位于工作线程上的 Visual Studio 设计器异常处理中
>     
>     
> *   能够更新 Windows 窗体和 WPF 控件以响应工作进程或完成。
>     
>     
> 
> 最后两个功能特别有用——这意味着您不必在工作方法中包含 try/catch 块，并且无需调用 Control.Invoke 即可更新 Windows 窗体和 WPF 控件。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-14T14:24:09.007

仅当您不必使用 UI（WinForms 或 WPF）时才使用线程，而当您必须处理 UI 时才使用后台工作人员。

您避免了UI 和后台工作人员的**许多问题。**

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-14T14:23:48.697

我曾经将 BackgroundWorker 关联为 Threads 的包装器。所以我在 GUI 工作上使用 BackgroundWorker，在更专业或肮脏的工作（Windows 服务等）上使用线程

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-14T14:24:35.573

BackgroundWorker 类是一种向窗体添加线程以执行一些繁重操作而不阻塞 UI 的简单方法。你可以用线程做同样的事情，但编码要多一些。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-14T14:41:29.900

BackgroundWorker 类只是为您提供切换到 UI 线程上下文的事件，但不要混淆；DoWork 事件（实际上是你做工作的地方）仍然在另一个线程的上下文中执行（因为这是整个事情的重点）并且在那里执行任何类型的 UI 交互或更新都会引发异常最好的，最坏的情况下崩溃。当您尝试执行需要更新 UI 并且其范围不超出表单范围的事情时，应在表单上使用 BackgroundWorker。对于其他后台操作，请考虑使用 ThreadPool（用于短期操作）或创建自己的 Thread。

BackgroundWorker 为 ProgressChanged 事件提供了便利，但不要太舒服并开始在 DoWork 中进行 UI 更新。

# .net - 如何创建可折叠的数据网格？

> ID：747809
> 
> 赞同：0
> 
> 时间：2009-04-14T14:20:36.147
> 
> 标签：.net, winforms, gridview, datagridview, collapsable

如何在点网窗口窗体应用程序中创建可折叠数据网格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-14T14:32:56.303

AFAIK 没有默认控件可以支持这一点。您将需要一个 3rd 方控件库。我推荐[Devexpress](http://www.devexpress.com/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-04-14T14:26:23.340

我不知道特定的 API 方法，但您可以使用 Javascript 使其折叠，或者只是一个只设置可见性的回发。

# apache-flex - 根据windows的Flex NumberFormatter

> ID：747811
> 
> 赞同：1
> 
> 时间：2009-04-14T14:20:46.083
> 
> 标签：apache-flex, localization, number-formatting, regional

是否可以根据windows
“区域设置”直接设置NumberFormatter的属性？

如果没有，Flex 中有一个函数可以获取区域设置，然后我们可以根据它更改 NumberFormatter 的属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-14T15:46:58.870

这是关于本地化如何在 Flex 中工作的一个很好的教程：

[http://livedocs.adobe.com/flex/3/html/help.html?content=l10n_1.html](http://livedocs.adobe.com/flex/3/html/help.html?content=l10n_1.html)

至于检测用户的区域和/或语言，您可以在 ActionScript 中尝试：

```
Capabilities.language 
```

或者在 Javascript 中可能是这样的（通过 Flash 的 ExternalInterface 调用）：

```
var lan = ((navigator.browserLanguage) ? 
navigator.browserLanguage : 
(navigator.language) ? navigator.language : navigator.userLanguage); 
```

# c# - 我应该从哪里开始使用带有 C# 客户端的 PHP 的 Web 服务？

> ID：747816
> 
> 赞同：1
> 
> 时间：2009-04-14T14:21:24.317
> 
> 标签：c#, php, web-services

我之前一直在 C# 中工作，最近又开始使用 PHP；我想知道是否可以在 php 中制作可以从 C# 使用的 Web 服务。

谷歌搜索，我发现了各种框架，如 NuSOAP、Zend 等。

我的问题是：

*   有什么好的框架可以用 PHP 进行 SOAP Web 服务开发？
*   我可以从哪里开始？
*   如何在 PHP 中实现数据库不可知论？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-14T14:36:09.273

> 有什么好的框架可以用 PHP 进行 SOAP Web 服务开发？

PHP 现在有[一个本地的soap 客户端和服务器库](http://www.php.net/soap)。不要使用 nusoap。

> 我可以从哪里开始？

[手册。](http://www.php.net/manual/en/soapserver.soapserver.php)

> 如何在 PHP 中实现数据库不可知论？

[您可以通过 PDO](http://www.php.net/manual/en/book.pdo.php)获得数据库连接抽象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T14:50:13.610

只要您发布 WSDL，就可以很容易地从任何客户端使用 Web 服务。在 Visual Studio 中，实际上有一个生成器可以读取 WSDL 并生成帮助您自行访问 Web 服务的类。

我有一段时间没有这样做了，但我只是让你知道它的存在。另外，我过去用 PHP 编写了一个 SOAP Web 服务，并使用 C# 客户端来访问它。所以这绝对是可能的。

我相信我使用了 NuSOAP，它非常简单，因为它实际上是通过在 URL 末尾添加 ?wsdl 来自动生成 WSDL。我不认为 N​​uSOAP 正在开发中，但我不确定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-14T17:19:50.880

PHP 支持 SOAP 已经有一段时间了，如果需要，您也可以使用 nusoap。 [http://sourceforge.net/projects/nusoap/](http://sourceforge.net/projects/nusoap/) Nusoap 可能需要做更多的工作，但上次我检查过它支持更多的标准。

从那时起它可能已经改变了。

# visual-studio - 在 Visual Studio 2005 中将接口方法插入类的快速方法

> ID：747820
> 
> 赞同：2
> 
> 时间：2009-04-14T14:22:32.070
> 
> 标签：visual-studio, eclipse, interface, methods

我知道在 Eclipse 中，如果您的类实现了一个接口或扩展了一个抽象类，那么有一种快速的方法可以将方法定义添加到您的类中。这可以用VS2005完成吗？如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-14T14:24:45.450

这是特定于语言的，但

对于 C#：右键单击接口，导航到实现接口并选择显式或隐式选项。相同的菜单可用于抽象类（名称略有不同）

还有一个智能标记将显示在具有相同选项的 C# 接口/抽象基础上。让它弹出的热键是“CTRL+”。

对于 VB.Net：只需在接口名称后按 Enter 键，方法就会自动填充。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-14T14:26:32.510

使用界面名称中的插入点，按 Alt-Shift-F10，然后输入。

同样的事情可以自动添加 using 语句。（即。Alt-Shift-F10 是显示该菜单的键盘命令，小蓝色下划线表示）

编辑：我认为这是仅限 C#——我很少使用 VB.Net

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-14T14:25:55.697

将鼠标悬停在接口名称上，您将获得一个悬停下拉菜单，其中将包含用于隐式或显式实现接口的菜单选项。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-14T14:27:09.000

右键单击接口名称`IInterface1`

```
public class Class1 : IInterface1 
```

从上下文菜单中选择“实现接口”。

# c# - 文件类型的默认构建操作

> ID：747844
> 
> 赞同：14
> 
> 时间：2009-04-14T14:26:02.013
> 
> 标签：c#, visual-studio-2008, xsd

每次我将 xsd 文件添加到我的 Visual Studio 2008 构建项目时，它的构建操作默认为“无”。我经常忘记把这个放到“内容”中，这会破坏构建......

无论如何将xsd文件的默认构建操作设置为“内容”？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2011-04-28T08:38:55.130

终于在[另一个stackoverflow问题](https://stackoverflow.com/questions/3320190/visual-studio-how-to-override-the-default-build-action-for-certain-extension-t)中找到了答案：

[http://blog.andreloker.de/post/2010/07/02/Visual-Studio-default-build-action-for-non-default-file-types.aspx](http://blog.andreloker.de/post/2010/07/02/Visual-Studio-default-build-action-for-non-default-file-types.aspx)

* * *

来自文章：

> 更改文件类型的默认构建操作 可以在注册表中配置文件类型的默认构建操作。但是，我们没有手动破解注册表，而是使用了一种更好的方法：pkgdef 文件（一篇关于 pkgdef 文件的好文章）。本质上，pkdef 是类似于 .reg 文件的配置文件，它们定义了注册表项和值，这些注册表项和值会自动合并到真实注册表中的正确位置。如果删除 pkgfile，更改将自动撤消。因此，您可以安全地修改注册表，而不会有破坏任何东西的危险——或者至少，很容易消除损坏。
> 
> 最后，这是一个如何更改文件类型的默认构建操作的示例：
> 
> 1: [$RootKey$\Projects{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}\FileExtensions.spark] 2: "DefaultBuildAction"="Content" 键中的 Guid 是指项目类型。在这种情况下，“{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}”表示“C#项目”。可以在此处找到相当全面的项目类型指南列表。尽管没有明确涵盖 Visual Studio 2010，但这些指南也适用于当前版本。顺便说一句，我们可以在这里使用 C# 作为项目类型，因为基于 C# 的 MVC 项目实际上是 C# 项目（和 Web 应用程序项目）。对于 Visual Basic，您可以改用“{F184B08F-C81C-45F6-A57F-5ABD9991F28F}”。
> 
> $RootKey$ 是 Visual Studio 存储配置的真实注册表项的抽象：HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\10.0_Config（注意：不要尝试手动编辑此项下的任何内容，因为它可以随时被覆盖通过 Visual Studio）。
> 
> 其余的应该是不言自明的：此选项将 .spark 文件的默认构建操作设置为“内容”，因此这些文件包含在发布过程中。
> 
> 您现在需要做的就是将这段文本放入扩展名为 pkgdef 的文件中，将其放在 %PROGRAMFILES(x86)%\Microsoft Visual Studio 10.0\Common7\IDE\Extensions 下（在 64 位系统上）或%PROGRAMFILES(x86)%\Microsoft Visual Studio 10.0\Common7\IDE\Extensions（在 32 位系统上）和 Visual Studio 将在下次启动时自动加载和应用设置。要撤消更改，只需删除文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T15:54:34.453

转到项目 > 自定义构建规则并为`xsd`扩展添加适当的构建时操作。或者，你想要别的东西吗？

# asp.net - 使用 AJAX 进行增量保存与 ASP.NET 和多层 Web 应用程序

> ID：747846
> 
> 赞同：0
> 
> 时间：2009-04-14T14:26:15.383
> 
> 标签：asp.net, ajax

我希望在您继续使用 AJAX 将数据发布回服务器时实现增量保存。

我倾向于 JQuery AJAX 实现，但无论我使用什么，我都想知道这如何适合使用对象数据源的三层 Web 架构。

在增量保存的情况下，我只需要绕过对象数据源并直接在 AJAX 方法中调用我的对象还是有办法将两者挂钩。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-14T14:38:37.227

在不知道您的模型是什么样子的情况下，我只能假设您正在做的是将二进制数据的 blob 推送到服务器，并且您不想一次将整个 blob 推回。

不问为什么 - 在这种情况下，您会想要做一个基本的“分块”模式，您可以在其中获取您要保存的数据，将其拆分为块。您将带有序列号的块发送到服务器，并以您喜欢的任何顺序继续异步发送块。当服务器收到所有块时（可能通过您已经向服务器发送“块清单”来了解这一点），它可以将所有这些块提交到数据库或磁盘或其他任何东西。

如果您处理的是数据行而不是二进制数据块，则模式仍然非常相似。无论您的 Ajax 实现库是什么，目标都是确定您计划发送回多少行，设置某种动态更新的进度条，然后不断调用提交一行更改数据的方法。每次您这样做（成功）时，您都可以将进度条向前一点点，让用户完全了解长时间运行的操作的进度。

无论您如何存储底层对象，这种模式都应该有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-14T15:24:31.653

是否可以只使用 AJAX 计时器控件，将其设置为每 30 秒（或其他）执行一次，从您的输入字段中获取数据，将它们应用于您的 ObjectDataSource 参数并根据它是新的还是旧的来调用更新或插入内容？

# php - 如何在 PDO 中简单地返回对象？

> ID：747847
> 
> 赞同：6
> 
> 时间：2009-04-14T14:26:16.037
> 
> 标签：php, object, pdo

第一次尝试 PDO。

```
$dbh = new PDO("mysql:host=$hostname;dbname=animals", $username, $password);

$stmt = $dbh->query("SELECT * FROM animals");
$stmt->setFetchMode(PDO::FETCH_INTO, new animals);

foreach($stmt as $animals)
{
    echo $animals->name;
} 
```

如果我跳过该`setFetchMode()`方法，那么我需要调用`$animals["name"]`我不想要的方法。

但我不想为`setFetchMode()`我所做的每个查询调用。

有没有办法设置默认的 FetchMode ？或其他一些方法来使`query()`返回对象具有一个全局设置。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-14T15:12:12.357

也许您可以尝试扩展 PDO 类以自动为您调用该函数......简而言之：

```
myPDO 类扩展 PDO
{
   函数动物查询（$ sql）
   {
     $result = parent::query($sql);
     $result->setFetchMode(PDO::FETCH_INTO, 新动物);
     返回$结果；
   }

// // 如果你有不同的类很有用
// 函数蔬菜查询($sql)
// {
// $result = parent::query($sql);
// $result->setFetchMode(PDO::FETCH_INTO, 新蔬菜);
//返回$结果；
// }
}

$dbh = new myPDO("mysql:host=$hostname;dbname=animals", $username, $password);

$stmt = $dbh->animalQuery("SELECT * FROM animals");

foreach($stmt 作为 $animals)
{
    回声$动物->名称；
}

```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2011-03-04T20:37:29.900

由于 PDO 需要知道您想要获取的对象，因此您需要手动指定它。但是您只想使用对象来检索数据而不是数组并且不在乎它是否不是动物对象，当您在连接字符串之后设置属性时，您可以默认使用匿名对象，这可以在包装的构造函数

```
 $connection = new PDO($connection_string);
  //PDO::FETCH_OBJ: returns an anonymous object with property names that correspond to the column names returned in your result set 
  $connection->setAttribute(PDO::ATTR_DEFAULT_FETCH_MODE, PDO::FETCH_OBJ); 
```

然后所有查询都将返回对象。虽然它不完全是你想要的关闭。

* * *

您还可以将数据注入您的动物类：

```
while($dataObj = ...) {
 $animal = new Animal($dataObj);
} 
```

* * *

如果您查看查询功能，可以通过传递额外参数来更改一些选项： [http](http://www.php.net/manual/en/pdo.query.php) ://www.php.net/manual/en/pdo.query.php 我还没有测试它，但它看起来像你接近你想要的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-24T09:20:26.153

说到一般的获取对象，PDO 有六种不同的模式来完成这项任务。我必须写一篇关于[使用 PDO 获取对象](https://phpdelusions.net/pdo/objects)的专门文章来列出它们。

关于您的具体问题，

> 如何在 PDO 中简单地返回对象？

只需使用`PDO::FETCH_OBJ`模式

> 有没有办法设置默认的 FetchMode？

这取决于。
如果您关心的只是一种语法，并且您只是想使用`$animal->name`而不是`$animal['name']`，那么您可以要求 PDO 默认创建 的实例`stdClass()`。为此，只需添加

```
PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_OBJ 
```

到您的[PDO 连接选项](https://phpdelusions.net/pdo_examples/connect_to_mysql)列表（该链接指向我编写的另一个示例，我强烈建议您查看该示例，因为与 PDO 的连接是一项复杂的业务，除了您的示例中的一行）。

设置此选项后，您可以立即使用对象语法：

```
$stmt = $dbh->query("SELECT * FROM animals");
foreach($stmt as $animal)
{
    echo $animal->name;
} 
```

虽然如果您需要获取特定类，但对于对象列表，可以使用您当前的方法`setFetchMode()`/`foreach` 或者您可以使用`fetchAll()`专用的`PDO::FETCH_CLASS`获取模式：

```
$herd = $pdo->query('SELECT name FROM animals')->fetchAll(PDO::FETCH_CLASS, 'Animal'); 
```

这就是您所能拥有的一切，仅仅是因为您需要告诉 PDO，您将需要哪个特定类的实例。

还有其他选项，例如提供构造函数参数等。您可以在上面链接的文章中查看它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-24T09:06:04.173

你可以这样试试：

```
$dbh = new PDO("mysql:host=$hostname;dbname=animals", $username, $password);

$stmt = $dbh->query("SELECT * FROM animals");
$stmt->setFetchMode(PDO::FETCH_CLASS, animals::class);

foreach($stmt as $animals)
{
    echo $animals->name;
} 
```

# jquery - $(document).ready() 如何在 IE 8 中工作？

> ID：747854
> 
> 赞同：9
> 
> 时间：2009-04-14T14:26:59.343
> 
> 标签：jquery, internet-explorer

我最近安装了 IE 8，但似乎无法触发 jquery $(document).ready 事件。有什么我遗漏的特殊注意事项吗？从字面上看，这就是我的 html 中的所有内容，它在 Chrome 和 Firefox 中按预期工作：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>Page full of awesomeness</title>
    <script type="text/javascript" src="~/Scripts/jquery-1.3.2.js" />
    <script type="text/javascript">        
        $(document).ready(function() {
            alert("Hello?");           
        });
    </script>
</head>

<body>

</body> 
```

在 Internet Explorer 中，页面只是毫无意外地加载。没有警报框，我看不到任何报告的 javascript 错误。这是我不知道的正常现象吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2009-04-14T14:31:12.547

试着转动这个。

```
<script type="text/javascript" src="~/Scripts/jquery-1.3.2.js" /> 
```

进入这个

```
<script type="text/javascript" src="~/Scripts/jquery-1.3.2.js"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T15:47:56.137

使用当前的 XHTML 严格标准：

即使`src`指定了，脚本标签也不是空标签，不能写入`<script src=".... />`。如果包含，则`src`不应在开始标签和结束标签之间包含任何脚本，因为浏览器处理标签之间的任何脚本都不可靠。

基本上，不要自行关闭标签。使用`</script>`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-14T14:32:17.240

我的猜测是这个（对不起，我这台机器上没有 ie8 来测试）

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>Page full of awesomeness</title>
    <script type="text/javascript" src="~/Scripts/jquery-1.3.2.js"></script>
    <script type="text/javascript">        
        $(document).ready(function() {
            alert("Hello?");           
        });
    </script>
</head>

<body>

</body> 
```

`/Scripts/jquery-1.3.2.js`如果您指的是您网站的根目录，我也建议使用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-14T16:03:04.417

除了其他人所说的之外，您还缺少`</html>`文档末尾的 。也许只是一个复制/粘贴错误:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-28T11:14:58.920

还要检查 jQuery 的兼容性。目前 jQuery 2.x 只支持 IE9 或更高版本。不是 IE8

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-24T11:29:58.230

```
$(document).ready() 
```

在 IE8 中不起作用我从这个链接 [https://plainjs.com/javascript/events/running-code-when-the-document-is-ready-15/](https://plainjs.com/javascript/events/running-code-when-the-document-is-ready-15/)中找到了一个代码示例 它适用于 Jquery 1.10.2

```
 function run() {
    // do something
    alert('working');
}

// in case the document is already rendered
if (document.readyState!='loading') run();
// modern browsers
else if (document.addEventListener) document.addEventListener('DOMContentLoaded', run);
// IE <= 8
else document.attachEvent('onreadystatechange', function(){
    if (document.readyState=='complete') run();
});
```

# c# - 照片应用

> ID：747860
> 
> 赞同：1
> 
> 时间：2009-04-14T14:27:26.533
> 
> 标签：c#, image, image-manipulation

我正在开发一个应用程序只是为了好玩，它包括从网络摄像头捕获图像。

我想知道的是如何将一些过滤器应用于我捕获的图像？理想情况下，我想开发 Apple iPhoto 之类的东西；有损形象的东西。

我使用的编程语言是 C#。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-14T14:32:53.400

如果你想实现过滤算法，首先你必须找到算法中涉及的所有操作（一个简单的低通也可能涉及一些工作）然后你需要访问图像的每个像素（你可以使用 Image 或 Bitmap 类，使用 Set/GetPixel 方法来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-14T14:35:11.307

你将不得不做一些有趣的编码来实现这一点。我的建议是做一些研究。图像处理，例如转换格式、调整大小、裁剪、缩放，非常简单。您甚至可以为现有的图像处理工具编写一个前端，例如：http: [//kfoo.net/products/imgman/](http://kfoo.net/products/imgman/)

如果您希望进行图像“变形”或其他高级操作，那么您一定会很开心。

# joomla - 子目录中的Joomla安装，根目录中的index.php？

> ID：747863
> 
> 赞同：0
> 
> 时间：2009-04-14T14:28:06.393
> 
> 标签：joomla

是否可以在子目录中安装 Joomla 并将 index.php 移动到根目录。我知道这可以用 WordPress 完成，但我似乎找不到 Joomla Equivalent。

我已经在使用重定向，不是一个很好的重定向。

我真的不希望所有 joomla 文件夹都堵塞我的根目录。

提前谢谢，山姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-14T15:49:07.650

不幸的是，Joomla！没有记录在案的方式来做到这一点。您也许可以更改定义`JPATH_BASE`常量和`JURI`类的代码，但您肯定必须破解核心才能这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-14T15:14:02.553

做一个虚拟主机有帮助吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T12:05:34.377

我知道它已经过时了，但我已经找到了解决这个问题的方法，不会强迫你去破解系统。要重定向 Joomla 你可以这样做（它适用于：Joomla！2.5）： 1.`public_html`使用以下代码将 .htaccess 文件放入你的根网络目录（通常是：）：

```
# .htaccess main domain to subfolder redirect
# Copy and paste the following code into the .htaccess file
# in the public_html folder of your hosting account
# make the changes to the file according to the instructions.

# Do not change this line.
RewriteEngine on

# Change yourdomain.com to be your main domain.
RewriteCond %{HTTP_HOST} !^www.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]

# Change 'subfolder' to be the folder you will use for your main domain.
RewriteCond %{REQUEST_URI} !^/subfolder/

# Don't change these lines.
# You may have to comment this if You i.e. have na `index.php` file which You dont want load
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Change 'subfolder' to be the folder you will use for your main domain.
RewriteRule ^(.*)$ /subfolder/$1 [L]

# Change yourdomain.com to be your main domain again.
# Change 'subfolder' to be the folder you will use for your main domain
# followed by / then the main file for your site, index.php, index.html, etc.
RewriteCond %{HTTP_HOST} ^(www.)?{HTTP_HOST}$ [NC]
RewriteRule ^(/)?$ /subfolder/index.php [L] 
```

1.  在您的 Joomla`config.php`文件中，更改此行：

    `public $live_site = 'http://www.your-domain.com';`

将您的域更改为您的实际域。

# asp.net - 从 ASP.NET Web 应用程序联系 ASP.NET Web 服务时出现 401 Unauthorized

> ID：747865
> 
> 赞同：2
> 
> 时间：2009-04-14T14:28:23.367
> 
> 标签：asp.net, web-services, iis-6, windows-authentication

我有一个服务器（Windows 2003/IIS 6）。该服务器在 IIS 中有几个不同的“网站”设置。每个站点都在 IIS 中配置有不同的主机标头（端口 80）。此外，每个站点也可以通过指定的端口号访问（没有主机头）。

例如：

MySite1： [http](http://apps.mysite1.com) ://apps.mysite1.com 或 [http://myserver:xxxx](http://myserver:xxxx)

MySite2： [http](http://something.mysite2.com) ://something.mysite2.com 或 [http://myserver:yyyy](http://myserver:yyyy)

我已经编辑了我的主机文件（它是一台开发机器）以将每个站点的主机头重定向到本地机器（127.0.0.1）。

我在一个 IIS 站点 (mysite1) 中有一个 ASP.NET 2.0 网站，在另一个 IIS 站点 (mysite2) 中有一个 ASP.NET 2.0 Web 服务。该网站使用类似于以下的代码与 Web 服务进行通信：

```
MyWebService svc = new MyWebService();
//also have tried "http://myserver:yyyy/MyWebService.asmx" below
svc.Url = "http://something.mysite2.com/MyWebService.asmx"; 
svc.Credentials = System.Net.CredentialCache.DefaultCredentials;
svc.MyMethod(); 
```

所有站点都针对 Windows 集成安全性进行了配置，并且 ASP.NET 配置为使用 <identity impersonate="true" /> 进行 Windows 身份验证。安全模型规定，登录到 Web 应用程序的用户应该一直通过 Web 服务进行身份验证（然后再到底层数据库，但这并不一定相关）。

我的工作正常，但是我重建了我的 Web 服务（新方法），现在任何以 401 Unauthorized 消息结尾的 Web 服务调用的结果都无法正常工作。

这听起来确实像一个双跳问题。我认为这与 Web 服务不接受正在传递的凭据以及对要传递的新凭据的挑战有关。只是不确定如何确认这一点。不知道为什么它会挑战 - 我以机器/域管理员身份登录，并且 IE 配置为在 Internet 选项 > 安全选项卡 > 自定义级别 > Intranet 区域中的自动登录中传递凭据。是的，相关站点已添加到我的“Intranet 区域”中。

解决此问题的最佳方法是什么？关于现在可能导致这种情况的任何想法？

蒂亚！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-14T16:04:13.167

这听起来像是一个[双跳问题](http://weblogs.asp.net/owscott/archive/2008/08/22/iis-windows-authentication-and-the-double-hop-issue.aspx)。为了确认是否是双跳问题，我将更改读取`svc.Credentials =`并明确放入凭据以进行测试的行，并查看它是否有效。如果它确实有效，那么它就是双跳问题，您需要解决它。

# security - “50289 由于项目受到保护，无法执行操作”但是为什么？

> ID：747866
> 
> 赞同：4
> 
> 时间：2009-04-14T14:28:59.150
> 
> 标签：security, excel, vba, vbscript, xls

我提供了正确的密码

```
Set objExcel = CreateObject("Excel.Application")
Set objWorkbook = objExcel.Workbooks.Open("H:\M\X\C.xls", 0, , , "password") 
```

'这些行中的任何一行都会导致提到的错误

```
Set vbcomp = objWorkbook.VBProject.VBComponents(modname)
objWorkbook.VBProject.VBComponents.Remove vbcomp
objWorkbook.VBProject.VBComponents.Import modpath & modtest 
```

任何想法可能是什么问题？Tools-Macro-Security 设置为允许VB项目访问

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-14T16:05:08.063

VBA 项目本身受密码保护，该密码与工作表密码不同。打开 VBA IDE - 选择 Tools-VBA Project Properties 并查看 Protection 选项卡。

不确定如何或是否可以使用代码删除 VBA 项目密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-11-18T11:50:03.923

这听起来可能很极端，但是我设法通过下载 Windows Installer Clean up Utility（在 Google 中查找 msicuu2.exe）并删除了 office 2003 来解决这个问题。然后我重新安装了 office 2003，我的问题就消失了。希望它也能解决你的问题。亚历克斯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-23T20:59:53.590

我今天发现，如果您在将模块保存到项目之前尝试使用访问项目模型，您将得到这个答案！

我粘贴了一个我之前在另一个数据库中多次使用过的函数，但是当我尝试运行它时遇到了这个错误，**直到**我将新创建的模块保存到项目中。非常愚蠢，但这可能是其他人的疏忽，所以我将其包括在这里。

# database - Oracle Lite - 无法连接到新创建的数据库。[POL-3013]

> ID：747868
> 
> 赞同：2
> 
> 时间：2009-04-14T14:30:11.677
> 
> 标签：database, oracle, embedded-database

当我尝试连接到新创建的 Oracle Lite 数据库时出现错误。但是我可以连接到使用 Oracle SOA 安装创建的 orabpel 数据库。

以下是我创建它的步骤：

1.  冉：`createdb polite db1 manager`

2.  结果：

    ```
    Oracle Lite CREATEDB Version 10.2.0.2.0.
    Copyright (c) 1997, 2005, Oracle. All rights reserved.
    Database C:\SOFTWARE\ORACLEAS\MOBILE\SDK\OLDB40\DB1.odb created (VolID = 1738). 
    ```

3.  冉：`validatedb polite db1`

4.  结果：没有发现错误！

5.  冉：`msql system/manager@jdbc:polite:db1`

6：结果：`[POL-3013] bad database or invalid password.`

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-01T00:58:01.610

根据[Oracle](http://download.oracle.com/docs/html/A95916_01/emgtext.htm#i1004863)，错误意味着：

> POL-3013 数据库错误或密码无效
> 
> 原因：数据库无法打开数据库或日志文件，或者文件头已损坏。可能是由于使用不正确的密码来解密数据库造成的。
> 
> 行动：提供正确的密码，检查您的硬盘驱动器，或重新启动操作系统。

我不知道它是否有帮助，但我在[Oracle 论坛](http://forums.oracle.com/forums/message.jspa?messageID=1351586)上找到了一个类似的问题和答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-14T15:11:23.073

不熟悉这个特定的数据库，但在新数据库允许本地但不允许远程访问默认帐户之前，我已经看到了一些问题。我必须要么创建一个具有远程访问权限的新用户，要么将这些权限添加到默认用户（显然细节取决于您的数据库）。

模糊，但我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-30T20:51:39.700

更改在 ODBC 中配置的数据库名称。

转到控制面板 -> 管理工具 -> 数据源 (ODBC)。在“用户 DSN”选项卡下找到“POLite”条目并进行编辑。将“数据库”字段更改为“db1”，使其与您创建的数据库的名称相匹配。

# c# - WPF：为 GridView 的项目显示上下文菜单

> ID：747872
> 
> 赞同：20
> 
> 时间：2009-04-14T14:31:02.313
> 
> 标签：c#, wpf, xaml, contextmenu

我有以下内容`GridView`：

```
<ListView Name="TrackListView" ItemContainerStyle="{StaticResource itemstyle}">
    <ListView.View>
        <GridView>
            <GridViewColumn Header="Title" Width="100" HeaderTemplate="{StaticResource BlueHeader}" DisplayMemberBinding="{Binding Name}"/>
            <GridViewColumn Header="Artist" Width="100" HeaderTemplate="{StaticResource BlueHeader}" DisplayMemberBinding="{Binding Album.Artist.Name}" />
            <GridViewColumn Header="Album" Width="100" HeaderTemplate="{StaticResource BlueHeader}" DisplayMemberBinding="{Binding Album.Name}"/>
            <GridViewColumn Header="Length" Width="100" HeaderTemplate="{StaticResource BlueHeader}"/>
        </GridView>
     </ListView.View>
</ListView> 
```

现在我想在有界项目上右键单击显示上下文菜单，这将允许我在处理后面代码中的事件时检索所选项目。

我可以通过什么方式实现这一点？

* * *

**[更新]**

按照[Dennis Roche](https://stackoverflow.com/questions/747872/wpf-displaying-a-context-menu-for-a-gridviews-items/749671#749671)的代码，我现在有了这个：

```
 <ListView Name="TrackListView" ItemContainerStyle="{StaticResource itemstyle}">
        <ListView.ItemContainerStyle>
            <Style TargetType="{x:Type ListViewItem}">
                <EventSetter Event="PreviewMouseLeftButtonDown" Handler="OnListViewItem_PreviewMouseLeftButtonDown" />
                <Setter Property="ContextMenu">
                    <Setter.Value>
                        <ContextMenu>
                            <MenuItem Header="Add to Playlist"></MenuItem>
                        </ContextMenu>
                     </Setter.Value>
                </Setter>
            </Style>
        </ListView.ItemContainerStyle>

        <ListView.View>
            <GridView>
                <GridViewColumn Header="Title" Width="100" HeaderTemplate="{StaticResource BlueHeader}" DisplayMemberBinding="{Binding Name}"/>
                <GridViewColumn Header="Artist" Width="100" HeaderTemplate="{StaticResource BlueHeader}" DisplayMemberBinding="{Binding Album.Artist.Name}" />
                <GridViewColumn Header="Album" Width="100" HeaderTemplate="{StaticResource BlueHeader}" DisplayMemberBinding="{Binding Album.Name}"/>
                <GridViewColumn Header="Length" Width="100" HeaderTemplate="{StaticResource BlueHeader}"/>
            </GridView>
         </ListView.View>
    </ListView> 
```

但是在运行时，我收到了这个异常：

> 无法将“System.Windows.Controls.ContextMenu”类型的内容添加到“System.Object”类型的对象。标记文件“Mus​​icRepo_Importer;component/controls/trackgridcontrol.xaml”中的对象“System.Windows.Controls.ContextMenu”出错。

问题是什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-04-14T23:03:51.300

是的，使用上下文菜单添加 ListView.ItemContainerStyle。

```
<ListView>
  <ListView.Resources>
    <ContextMenu x:Key="ItemContextMenu">
      ...
    </ContextMenu>
  </ListView.Resources>
  <ListView.ItemContainerStyle>
    <Style TargetType="{x:Type ListViewItem}">
      <EventSetter Event="PreviewMouseLeftButtonDown" Handler="OnListViewItem_PreviewMouseLeftButtonDown" />
      <Setter Property="ContextMenu" Value="{StaticResource ItemContextMenu}"/>
    </Style>
  </ListView.ItemContainerStyle>
</ListView> 
```

注意：您需要将 ContextMenu 作为资源引用，并且不能在本地定义它。

这将为整行启用上下文菜单。:)

另请参阅我处理了该`PreviewMouseLeftButtonDown`事件，因此我可以确保该项目具有焦点（并且是您查询 ListView 时当前选择的项目）。我发现在应用程序之间更改焦点时我必须这样做，在您的情况下可能并非如此。

**更新**

在代码隐藏文件中，您需要遍历可视化树以查找列表容器项，因为事件的原始源可以是项模板的元素（例如堆栈面板）。

```
void OnListViewItem_PreviewMouseLeftButtonDown(object sender, MouseButtonEventArgs e)
{
  if (e.Handled)
    return;

  ListViewItem item = MyVisualTreeHelper.FindParent<ListViewItem>((DependencyObject)e.OriginalSource);
  if (item == null)
    return;

  if (item.Focusable && !item.IsFocused)
    item.Focus();
} 
```

那`MyVisualTreeHelper`是使用我编写的包装器来快速遍历可视化树。下面发布了一个子集。

```
public static class MyVisualTreeHelper
{
  static bool AlwaysTrue<T>(T obj) { return true; }

  /// <summary>
  /// Finds a parent of a given item on the visual tree. If the element is a ContentElement or FrameworkElement 
  /// it will use the logical tree to jump the gap.
  /// If not matching item can be found, a null reference is returned.
  /// </summary>
  /// <typeparam name="T">The type of the element to be found</typeparam>
  /// <param name="child">A direct or indirect child of the wanted item.</param>
  /// <returns>The first parent item that matches the submitted type parameter. If not matching item can be found, a null reference is returned.</returns>
  public static T FindParent<T>(DependencyObject child) where T : DependencyObject
  {
    return FindParent<T>(child, AlwaysTrue<T>);
  }

  public static T FindParent<T>(DependencyObject child, Predicate<T> predicate) where T : DependencyObject
  {
    DependencyObject parent = GetParent(child);
    if (parent == null)
      return null;

    // check if the parent matches the type and predicate we're looking for
    if ((parent is T) && (predicate((T)parent)))
      return parent as T;
    else
      return FindParent<T>(parent);
  }

  static DependencyObject GetParent(DependencyObject child)
  {
    DependencyObject parent = null;
    if (child is Visual || child is Visual3D)
      parent = VisualTreeHelper.GetParent(child);

    // if fails to find a parent via the visual tree, try to logical tree.
    return parent ?? LogicalTreeHelper.GetParent(child);
  }
} 
```

我希望这些附加信息有所帮助。

丹尼斯

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-16T13:47:13.417

丹尼斯，

喜欢这个例子，但是我没有发现你的 Visual Tree Helper 有任何需要......

```
 <ListView.Resources>
    <ContextMenu x:Key="ItemContextMenu">
        <MenuItem x:Name="menuItem_CopyUsername"
                  Click="menuItem_CopyUsername_Click"
                  Header="Copy Username">
            <MenuItem.Icon>
                <Image Source="/mypgm;component/Images/Copy.png" />
            </MenuItem.Icon>
        </MenuItem>
        <MenuItem x:Name="menuItem_CopyPassword"
                  Click="menuItem_CopyPassword_Click"
                  Header="Copy Password">
            <MenuItem.Icon>
                <Image Source="/mypgm;component/Images/addclip.png" />
            </MenuItem.Icon>
        </MenuItem>
        <Separator />
        <MenuItem x:Name="menuItem_DeleteCreds"
                  Click="menuItem_DeleteCreds_Click"
                  Header="Delete">
            <MenuItem.Icon>
                <Image Source="/mypgm;component/Images/Delete.png" />
            </MenuItem.Icon>
        </MenuItem>
    </ContextMenu>
</ListView.Resources>
<ListView.ItemContainerStyle>
    <Style TargetType="{x:Type ListViewItem}">
        <Setter Property="ContextMenu" Value="{StaticResource ItemContextMenu}" />
    </Style>
</ListView.ItemContainerStyle> 
```

然后在 MenuItem_Click 事件中，我添加了如下代码：

```
private void menuItem_CopyUsername_Click(object sender, RoutedEventArgs e)
{
    Clipboard.SetText(mySelectedItem.Username);
} 
```

mySelectedItem 用于 ListView.SelectedItem：

```
 <ListView x:Name="ListViewCreds" SelectedItem="{Binding mySelectedItem, UpdateSourceTrigger=PropertyChanged}" .... 
```

如果有帮助请点我...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-07-15T18:08:32.163

您可能对[这个 SO 问题](https://stackoverflow.com/questions/1127538/determining-which-listviewitem-was-clicked-on-in-a-listview-when-executing-a-cont)的答案感兴趣- 我有同样的问题，但对使用 mousedown 事件捕获被点击的项目不满意。有几个人回答了您可能感兴趣的简单易懂的解决方案。

摘要：您可以使用数据上下文将项目传递给处理程序，或命令+命令参数设置。

# deployment - 简化 web.config 连接字符串加密

> ID：747876
> 
> 赞同：0
> 
> 时间：2009-04-14T14:31:22.470
> 
> 标签：deployment, encryption, web-config

部署 Web 应用程序后，有没有办法简化加密连接字符串的过程？

这是背景故事。我们管理着许多 .NET 网站。我们将它们移至开发服务器，然后最终移至生产服务器。但是在开发箱或服务器箱上创建每个站点后，我必须进入服务器并加密敏感数据（用户名/密码/连接字符串）。

当您开始谈论数百个网站时，这变得乏味。有没有比手工做更好的方法？无法访问远程服务器的开发人员可以在部署应用程序后运行吗？

或者这只是一厢情愿？

* * *

## 回答 #1

> 赞同：-4
> 
> 时间：2013-03-29T01:23:44.997

I would use deployment software (like Octopus for .NET), and then write a post deployment powershell script that would execute those commands for you. Add that powershell script to the PostDeploy hook, and it should take care of that (Most, if not all, mainstream deployment tools come with ways to execute commands after a deployment).

# hudson - 如何配置 Hudson 作业以使用特定的 JDK？

> ID：747878
> 
> 赞同：30
> 
> 时间：2009-04-14T14:31:59.190
> 
> 标签：hudson, java

我有许多在哈德逊奴隶上运行的项目。我希望其中一个在 Java6 下运行 Ant，而不是默认的（在我的环境中是 Java5）。

在项目配置视图中，我希望找到：

*   一个明确的选项，允许我设置用于此项目的自定义 JDK 位置。
*   一种为此项目设置自定义环境变量的方法，这将允许我将 JAVA_HOME 设置为 JDK6 位置。这将使 Ant 能够根据需要在 Java6 上运行。

有没有办法做到以上任何一个？如果这些设施之一可用，我看不到如何访问它。我在 Hudson 1.285 上运行。

如果可能的话，我宁愿避免使用“执行 shell”操作而不是“调用 Ant”操作：我的奴隶在 z/OS 上，Hudson 似乎没有在这个平台上正确创建临时 shell 脚本（可能是编码问题）。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2009-04-14T15:00:44.287

我们已经配置了 Java 5 和 Java 6 以在我们的 Hudson 实例中使用。

在 Manage Hudson -> Configuration System 下，您可以添加多个 JDK 并指定 JAVA_HOME 的路径。然后，在每个作业的配置中，您选择了希望该作业在哪个 JDK 上运行。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2009-08-12T20:03:19.997

事实证明，如果您将构建参数化，您添加的任何字符串参数都会成为环境变量。使用这种方法，可以为构建设置任何环境变量，包括由 Ant 拾取的 JAVA_HOME。

所以对我来说最好的解决方案是：

1.  在作业配置页面中勾选“This build is parameterized”
2.  添加一个名为 JAVA_HOME 的新字符串参数，并将默认值设置为 JDK 位置

构建字符串参数会变成环境变量并不明显，但是一旦知道它们会变成环境变量，这样设置 JDK 就很容易了。

Hudson 邮件列表上的开发人员[推荐了另一种方法](http://jenkins.361315.n4.nabble.com/Using-a-specific-JDK-when-running-Ant-on-a-Slave-td379560.html)，使用主 JDK 配置并在节点配置中覆盖......但仅设置 JAVA_HOME env var 对我来说似乎更容易。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T12:02:27.973

我们通过使用两个不同的 Java Hudson 节点来解决这个问题。一个用于 Java 6，一个用于 Java 7。然后我们根据需要将作业分配给不同的节点。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-06-14T13:02:23.100

可以将各个从代理配置为在您运行它们的系统上使用特定的 JDK。

管理节点 > 从站 > 配置 > 环境变量

例如

名称：JAVA_HOME 值：C:\Program Files (x86)\Java\jdk1.6.0_45\

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-19T05:46:06.143

最好的办法是，

1.  将所有必需的 JDK 安装到您的系统。
2.  将这些添加到配置页面中 JDK 标题下的 jenkins 中。
3.  将 Maven Info 插件安装到 jenkins
4.  重启詹金斯
5.  转到您的作业配置页面。
6.  从出现在 Maven 信息插件配置下的 JDK 组合框中选择所需的 JDK
7.  构建它
8.  享受！！！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-14T14:52:46.660

> 一种为此项目设置自定义环境变量的方法，这将允许我将 JAVA_HOME 设置为 JDK6 位置。这将使 Ant 能够根据需要在 Java6 上运行。

为 Ant 配置构建步骤时，在“调用 Ant”下，如果单击“高级”，则可以设置自定义 Java 选项。屏幕帮助说：

> 如果您的构建需要自定义 ANT_OPTS，请在此处指定。通常，这可用于指定要使用的 java 内存限制，例如 -Xmx512m。请注意，其他 Ant 选项（例如 -lib）应转到“Ant 目标”字段。

但是，我感觉这不适用于 JDK。

`Manage Hudson`您是否在/下为此 Hudson 实例配置了多个 JDK 安装`Configure System`？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-08-04T04:28:45.220

你可以这样使用。

在批处理命令窗口中，您最初可以设置变量名称 JAVA_HOME，将此自定义变量名称分配给 PATH 变量。然后你可以调用一个蚂蚁脚本来选择特定的文件。

例子：

设置 JAVA_HOME=C:/java/jdk1.6.1

PATH=%JAVA_HOME%/bin;%PATH%

蚂蚁构建.xml

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2010-05-27T11:27:48.347

看看 Setenv 插件。在那里你可以设置变量，如 JAVA_HOME=C:/java/jdk1.6.1 PATH=%JAVA_HOME%/bin;%PATH%

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-11-04T16:34:51.453

我有一个问题，安装的 JDK 是 JDK 8 而我希望 Jenkins 使用 JDK 7 。因此，在 Jenkins 构建盒上安装 JDK 7 后，

我将 JDK 路径添加到 jenkins 配置：

Jenkins -> 管理 Jenkins -> 配置系统 -> JDK -> 添加 JDK 名称和路径

另外，编辑 jenkins-runner.sh：添加以下行：

导出 JAVA_HOME=""

将最后两行更改为：

echo "/bin/java" $javaArgs -jar "$war" $args

exec "/bin/java" $javaArgs -jar "$war" $args

# iphone - iphone开发新手任何例子

> ID：747879
> 
> 赞同：-5
> 
> 时间：2009-04-14T14:32:01.080
> 
> 标签：iphone

我有一部 iPhone，我想出了一些我想制作的应用程序

anyoen 有什么打法和tips吗

我也很想看到一些可以帮助我入门的 hello world 类型的应用程序

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-14T14:35:48.247

[iPhone 开发中心](http://developer.apple.com/iphone/)有很多很好的例子可以帮助你入门。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-14T14:53:00.997

这就是我要做的（以及我所做的）。

1.  注册成为 Apple 的开发人员。
2.  得到每一本书，你可以得到你的手。亚马逊有一个清单。去寻找它们并购买它们并阅读它们。做练习。ADC上面有很多东西。全部阅读，或尽可能多地阅读。
3.  指定一个项目。这可能是一些愚蠢的事情。这里有一个想法：制作一个应用程序，让人们可以拍摄东西并将它们上传到您的服务器，以及他们的位置数据和可能的注释。尽可能多地构建它。

到 2 点时，您将准备好开始思考如何将您的想法变为现实。不要担心是否已经有类似的东西在那里，做你自己的事情并尝试钉它。

我非常喜欢通过应用程序设计避免功能军备竞赛。不要试图为功能“匹配竞争”功能。这是设计应用程序的愚蠢方式。做你的事，专注于解决你打算解决的问题，并且只做那个。这比听起来更难（我认为）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-02T14:13:39.193

以下是一些不错的资源：

[iPhone 开发入门](http://developer.apple.com/iphone/library/documentation/Cocoa/Conceptual/ObjectiveC/Articles/ocObjectsClasses.html)和[介绍](http://developer.apple.com/iphone/library/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/Introduction/Introduction.html)

[Objective-C](http://www.otierney.net/objective-c.html)

[设备准备 - 如果您已注册](http://developer.apple.com/iphone/library/documentation/Xcode/Conceptual/iphone_development/128-Managing_Devices/devices.html#//apple_ref/doc/uid/TP40007959-CH4-SW9)

作为一般经验法则 - 从开发中心下载示例并通过它们更改细节以查看您了解发生了什么。还要创建几个新项目并开始向它们添加内容。

希望有帮助，

-一个

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-14T14:38:51.373

ADC 有一个“[你的第一个 iPhone 应用程序](http://developer.apple.com/iphone/library/documentation/iPhone/Conceptual/iPhone101/Articles/00_Introduction.html)”howto。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-14T18:07:43.383

至于“Hello World”风格的应用程序，当您注册 ADC 后，您当然会注意到大量的 Apple 示例应用程序。

还有一些开源应用程序和游戏，您可以从中吸收知识。

我的游戏 ( [Gorillas](http://gorillas.lyndir.com) ) 是开源的，例如，在 GPLv2 下。所有源代码可从以下位置获得：[http://gorillas.lyndir.com/trac/browser](http://gorillas.lyndir.com/trac/browser)。它已经帮助许多开发人员解决了一般问题以及 OpenGL/ES 和[cocos2d](http://cocos2d-iphone.googlecode.com/)问题。

# c# - Java 事务 API 和 .NET System.Transactions

> ID：747890
> 
> 赞同：2
> 
> 时间：2009-04-14T14:33:53.943
> 
> 标签：c#, java, transactions, jta, system.transactions

我正在分析 JTA（Java 事务 API）和 .NET 对应的 System.Transactions 之间的不同行为：两者之间的方法完全不同。事实上，Java 版本的 Transactions 似乎更像是一种规范，让开发人员有义务实现定义的`Transactions`和`TransactionManager`其他接口。.NET 有一个更具体的实现，它不允许开发人员定义自己的`Transaction`对象，但提供接口来处理事务生命周期内管理的资源（而 Java 提供一些 XTA* 接口用于相同目的）

*   我想知道是否有人有机会将一些使用 JTA 的 Java 代码移植到 .NET，他/她注意到了哪些主要差异。

*   此外，谁能澄清我`TransactionManager.setRollbackOnly`反对`TransactionManager.rollback`（在JTA中）的行为？.NET 版本只有`Transaction.Rollback`更重要的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-03T22:33:22.120

rollback() 向底层资源发送一个实际的回滚命令。setRollbackOnly() 在当前事务上放置一个标记，在决定是否提交或回滚时读取该标记。一旦调用了 setRollbackOnly()，唯一可能的结果就是回滚，但是当调用 setRollbackOnly() 时，实际上并没有进行回滚调用。

这就是这两种方法背后的想法。我不确定不同的实现在多大程度上做出了这种区分，即使 setRollbackOnly() 在调用时实际上会进行回滚，它也不会产生任何实际差异。

# .net - 命名：价目表与价目表

> ID：747891
> 
> 赞同：3
> 
> 时间：2009-04-14T14:33:56.393
> 
> 标签：.net, naming-conventions, naming, code-analysis, fxcop

哪个更正确，“价格表”或“价格表”？

FxCop 说：CA1702：Microsoft.Naming：类型名称“PriceList”中的复合词“PriceList”作为一个离散术语存在。如果您打算使用单个单词，请将其大小写为“价格表”。

编辑：这是一个带有标题、开始/结束日期等的对象。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-14T14:36:51.660

您应该使用价格表。标准命名约定要求类名和属性使用 Pascal 大小写。由于字典将短语`price list`列为两个单词，因此第二个单词应使用 Pascal 大小写大写。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-14T14:40:34.070

像 FxCop 一样，这取决于您的意图。如果你有一个代表价格表的对象，它可能有一个标题和一个发行日期，然后包含一个带有名称和价格的项目列表，那么价格表似乎是正确的。

如果你有一个类型的对象，`List<Price>`那么价格列表（或价格）会更好。

重要的是不要太*拘泥于遵守*规则而错过所涉及的原则。在这种情况下，这是一个完全人为的问题（就编译器而言，它可以称为 Pinkelephants、pinkElephants 或 PinkElephants，它不在乎）。在这种情况下，你应该选择任何感觉最自然或最正常的东西。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-14T14:40:36.347

价格表在 Merriam Webster 或 Oxford 中都不是一个独立的术语。FxCop 一定是在编造文字。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-14T15:06:25.207

“PriceList”和“Pricelist”都可以。

但是，如果它是一个列表，那么“价格列表”（或价格）会更好，因为它清楚地表明这是两个结合在一起的概念。但是，如果您有一个名为“Pricelist”的类（可能带有标题和发布日期）和/或 Pricelist 是您的问题领域中的一个概念，我会倾向于使用“Pricelist”</p>

最后没关系，因为两者都易于理解和阅读，如果您选择的女巫在整个系统中使用，那将是最好的。

**标准**的FxCop 规则往往会提供大量输出，只有一些女巫是有帮助的。如果您正在处理**大型**系统，您可能希望编写自定义 FxCop 规则来强制执行您在此系统中选择使用的“PriceList”或“Pricelist”中的任何一个。

# c# - 如何在 C# 中将任何类型的数字作为参数接受到函数中？

> ID：747893
> 
> 赞同：2
> 
> 时间：2009-04-14T14:35:06.703
> 
> 标签：c#, .net

c#：如何在函数中接受任何类型的数字作为参数？目前，我的 AddDataInt32() 专门要求 Int32，但我如何接受任何数字、字节、整数或无符号整数，以便将其传递给 BitConverter.GetBytes()？为每种类型编写相同的函数似乎很愚蠢:(

```
public void AddDataInt32(Int32 i)
{
    Data = ConcatTwoByteArrays(Data, BitConverter.GetBytes(i));
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-14T14:38:43.357

您可以重载该方法...

```
public void AddData (Int32 i)
{...}

public void AddData (Int16 i)
{...} 
```

等每个号码类型一个。当您调用该过程时，它将采用您编码的任何形式的数字，并具有相同的过程名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-14T14:36:15.903

好吧，您可以使用反射和泛型将其自动化，但 IMO 重载是更好的选择 - 非常类似于您现有的代码。

反射/泛型示例 - 虽然我并不真正推荐这条路线：

```
static void Main()
{
    byte[] bytes = GetBytes(123);
}
static byte[] GetBytes<T>(T value) {
    return Cache<T>.func(value);
}
static class Cache<T> {
    public static readonly Func<T, byte[]> func;
    static Cache() {
        MethodInfo method = typeof(BitConverter)
            .GetMethod("GetBytes", new Type[] { typeof(T) });
        if (method == null) {
            func = delegate { throw new ArgumentException(
                "No GetBytes implementation for " + typeof(T).Name); };
        } else { 
            func = (Func<T, byte[]>)Delegate.CreateDelegate(
                typeof(Func<T, byte[]>), method);
        }
    }
} 
```

然后，您可以将其与`AddData<T>`调用`GetBytes<T>`等的通用方法混合使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-14T14:37:59.973

```
public void AddData(object data )
{
} 
```

或者

```
public void AddData<T>( T data )
{
} 
```

虽然我认为我更喜欢重载方法。

# web-services - IIS Web 服务调用需要访问 unix 文件共享的 COM dll

> ID：747894
> 
> 赞同：0
> 
> 时间：2009-04-14T14:35:10.243
> 
> 标签：web-services, iis, unix, com

我们有一个使用 COM 与一些 DLL 对话的 Web 服务。DLL 函数所依赖的数据文件位于一个 unix 共享上，我们必须在初始化 COM 调用时指定数据文件的位置。我们在 Windows Server 2003 服务器上安装了 SFU 3.5。我们不能使用映射驱动器，因为 IIS 作为服务运行（或者我们可以吗？）。使用 UNC 似乎也不起作用：作为登录用户，它在您第一次输入该位置时失败，然后工作。我不知道如何从 IIS 的角度对其进行测试，因为我们从 DLL 中得到的只是“无效数据文件位置”错误。unix 共享已打开 [无需用户/密码]。

也许问题根本不在于 IIS，而在于 DLL 必须访问 UNC 或映射驱动器？毕竟，实际访问数据文件的是 DLL，而不是 IIS 或 Web 服务可执行文件。

我对 COM、DCOM、COM+ 知之甚少。拉起组件服务，我找不到我们正在使用的 COM 对象。[但我可以使用“自动化对象”下的 MS OLEVIEW 找到它们]。

我在这里有什么选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-15T15:12:46.683

Web 服务被加载到在 ASPNET 用户下运行的 aspnet_wp.exe 进程中。如果您有源代码并且使用调试信息（生成的.pdb 文件）编译代码，您可以附加到此过程并进行调试。

鉴于它们具有适当的访问限制，您应该能够使用 UNC 文件共享。由于 Web 服务是在本地用户下运行的，因此您可能很难在文件服务器上设置访问限制，因为它不知道如何验证凭据。在这种情况下，您可以创建一个 COM+ 应用程序来托管您的 COM 组件并在单独的帐户下运行它。

# c# - 在 .NET 中跨语言访问具有区分大小写名称的成员

> ID：747896
> 
> 赞同：3
> 
> 时间：2009-04-14T14:35:19.777
> 
> 标签：c#, .net, vb.net

我刚刚遇到了一个有趣的场景。我在 C# 中有一堂课：

```
public class Test
{
  public int A;
  public int a;
} 
```

由于 C# 区分大小写，这会将两个变量`A`视为`a`不同的。我想在我的 VB 代码中继承上面的类，它不区分大小写。VB 代码将如何访问这两个不同的变量`A`和`a`？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-14T14:38:31.703

确保跨语言兼容性的公共语言规范 (CLS) 告诉您不要声明两个公共成员，它们只是大小写不同。这样的代码将不符合 CLS。

如果无法更改库的代码，可以使用反射 API 手动选择所需的字段：

```
obj.GetType().GetField("a").GetValue(obj)
obj.GetType().GetField("A").GetValue(obj) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-14T14:49:05.077

就像 Mehrdad 说的那样，声明两个公共成员不符合

CLS

```
[assembly: System.CLSCompliant(true)] 
```

在您的**AssemblyInfo.cs**文件中，如果您在编写此行后做错了什么，Visual Studio 将不高兴:)
编辑：或**AssemblyInfo.vb**，如果您使用的是 VB.NET，谢谢[Lucas](https://stackoverflow.com/users/24231/lucas)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-14T14:40:23.570

为此，您需要使用反射功能

我在某个地方看到了，我会尝试找到它

[这是如何链接](http://www.codeproject.com/KB/dotnet/rCaseIssue.aspx)

在上面的这个解决方案中，它是关于函数的，对于一个变量，我认为[这样就可以了](https://stackoverflow.com/questions/747896/accessing-members-across-languages-in-net/747915#747915)

至少你现在两个都得到了:-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-14T14:39:51.933

如果您打算让您的代码在语言之间具有跨功能，则需要遵循适用于两种语言的命名标准。

我个人觉得拥有两个名称相同的公共成员非常复杂，只是大小写不同。

# html - 列出颠覆存储库

> ID：747898
> 
> 赞同：3
> 
> 时间：2009-04-14T14:35:37.577
> 
> 标签：html, svn

如何在 html 页面上列出我的所有 subversion 存储库？所有存储库都位于根文件夹中。

我想将它们列为链接列表，以了解我的存储库并轻松访问它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-14T14:45:12.497

在您的 Apache httpd.conf 中尝试：

```
<Location /svn>
  DAV svn

  # any "/svn/foo" URL will map to a repository /usr/local/svn/foo
  SVNParentPath /usr/local/svn
</Location> 
```

见[红豆](http://svnbook.red-bean.com/en/1.4/svn-book.html#svn.serverconfig.choosing.apache)

其中 /usr/local/svn 成为您的存储库父文件夹。

编辑：我假设您使用专用文件夹来定位您的存储库，即。你不要在里面放任何东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T14:45:33.417

尝试查看此链接：

[http://blog.platinumsolutions.com/node/76](http://blog.platinumsolutions.com/node/76)

我们使用 WebSVN，它运行良好。

# web-services - ColdFusion：如何使用 SharePoint 的 getListItems()

> ID：747905
> 
> 赞同：4
> 
> 时间：2009-04-14T14:36:53.657
> 
> 标签：web-services, sharepoint, coldfusion, moss

有人知道我如何从 SharePoint 列表中获取所有项目吗？

应该可以使用 4 个参数调用函数[getListItems() ：](http://msdn.microsoft.com/en-us/library/ms774532.aspx)

*   一个用于存储信息的列表，
*   第二个用于查询，
*   第三个用于显示的字段，以及
*   第四个指定要返回的行数。

我的代码是：

```
<cfobject webservice="http://sharepointserver:16999/blog/_vti_bin/SiteData.asmx?wsdl" name="siteDataService"
    password="pw"
    username="user"
    >

<cfset siteDataService.GetListItems(
    "{9BE74555-1150-4AC8-ADE7-EE52923D7CE8}", 
    "<Where><Lt><FieldRef Name=""ID"" /><Value Type=""Counter"">3</Value></Lt></Where>", 
    "<FieldRef Name=""ID"" /><FieldRef Name=""Title"" />", 
    "4"
    )>      

<cfset ServiceResponse = GetSOAPResponse(siteDataService)>
<cfdump var="#ServiceResponse#"> 
```

但我得到的只是错误消息：

> 找不到参数为 {{9BE74555-1150-4AC8-ADE7-EE52923D7CE8},3,,4} 的 Web 服务操作 GetListItems。

Normaly 你必须将 xmlNodes 传递给函数，就像[这里](http://msdn.microsoft.com/en-us/library/lists.lists.getlistitems.aspx)所说的那样。

我也试过了，但不知道如何制作 xmlNode。我的代码，也不起作用是这个：

```
<cfset xmlDoc = XmlNew()>
<cfset ndQuery = xmlElemNew(xmlDoc, "Query")>
<cfset ndViewFields = xmlElemNew(xmlDoc, "ViewFields")>
<cfset ndQueryOptions = xmlElemNew(xmlDoc, "QueryOptions")>

<cfset ndQuery = "<Where><BeginsWith><FieldRef Name='Name' /><Value Type='Text'>D</Value></BeginsWith></Where>">
<cfset ndViewFields = "<FieldRef Name='ID' />">
<cfset ndQueryOptions = "">

<cfset listsService.GetListItems(
    "{52D3A638-FA12-44E8-9C17-5FBCD2899199}", 
    "", 
    ndQuery, 
    ndViewFields, 
    "1", 
    ndQueryOptions, 
    ""
    )>

<cfset ServiceResponse = GetSOAPResponse(listsService)>
<cfdump var="#ServiceResponse#"> 
```

我调用网络服务的方式是否正确？

谢谢你，凯文

* * *

编辑：谢谢您的回答，我认为 XML 元素有效。

```
<cfset listsService.GetListItems(
    "{9BE74555-1150-4AC8-ADE7-EE52923D7CE8}", 
    "{1DD69D36-FD18-42B8-B57D-CCA49FD12AFE}", 
    ndQuery.xmlRoot, 
    ndViewFields.xmlRoot, 
    "1", 
    ndQueryOptions.xmlRoot,
    ""
)> 
```

但是现在我得到了一个“非法参数异常”（这很好，因为它告诉我，网络服务正在响应；））：

```
无法执行 Web 服务调用 GetListItems。

调用 Web 服务操作时返回的错误是：

'' java.lang.IllegalArgumentException: java.lang.ClassCastException@f70df9

错误发生在 D:\wwwroot\SharePoint-Tests\blog.cfm: 第 83 行
81：“1”，
82：ndQueryOptions.xmlRoot，
83：“”
84:)>

```

**编辑2：**

这是我的新代码（4 月 28 日）

```
 <cfset xmlDoc = XmlNew()>
<cfset xmlDoc.xmlRoot = xmlElemNew(xmlDoc, "xmlRoot")>
<cfset xmlDoc.xmlRoot.Query = xmlElemNew(xmlDoc, "Query")>
<cfset xmlDoc.xmlRoot.ViewFields = xmlElemNew(xmlDoc, "ViewFields")>
<cfset xmlDoc.xmlRoot.QueryOptions = xmlElemNew(xmlDoc, "QueryOptions")>    

<cfset xmlDoc.xmlRoot.Query.XmlChildren[1] = xmlElemNew(xmlDoc, "Where")>
<cfset xmlDoc.xmlRoot.Query.where.XmlChildren[1] = xmlElemNew(xmlDoc, "GT")>
<cfset xmlDoc.xmlRoot.Query.where.gt.XmlChildren[1] = xmlElemNew(xmlDoc, "Value")>

<cfdump var="#xmlDoc#">

<cfset ndQuery = XmlParse("<Query><Where><Gt><FieldRef Name='ID' /><Value Type='Counter'>0</Value></Gt></Where></Query>", true)>
<cfset ndViewFields = XmlParse("<ViewFields><FieldRef Name='ID' /><FieldRef Name='Title' /></ViewFields>", True)>
<cfset ndQueryOptions = XmlParse("<queryOptions xmlns:SOAPSDK9=""http://schemas.microsoft.com/sharepoint/soap/""><QueryOptions/></queryOptions>", True)>

<cfdump var="#ndQuery#">
<cfdump var="#ndViewFields#">
<cfdump var="#ndQueryOptions#">

<cfoutput>#XMLFormat(ndQuery)#</cfoutput><br>
<cfoutput>#XMLFormat(ndViewFields)#</cfoutput><br>
<cfoutput>#XMLFormat(ndQueryOptions)#</cfoutput><br>
<cfinvoke 
  webservice     = "#listsService#" 
  method         = "GetListItems"
  returnvariable = "result"
  timeout        = "10"
>
  <cfinvokeargument name="listName"     value="{9BE74555-1150-4AC8-ADE7-EE52923D7CE8}">
  <cfinvokeargument name="viewName"     value="">
  <cfinvokeargument name="query"        value="#ndQuery.XmlRoot#">
  <cfinvokeargument name="viewFields"   value="#ndViewFields.XmlRoot#">
  <cfinvokeargument name="rowLimit"     value="1">
  <cfinvokeargument name="queryOptions" value="#ndQueryOptions.XmlRoot#">
      <cfinvokeargument name="webID"        value="" omit="yes">

  <!--- setting "omit" to "yes" will turn the parameter to null --->
</cfinvoke>

<cfdump var="#result#" label="result"> 
```

错误信息是：

```
Cannot perform web service invocation GetListItems.
The fault returned when invoking the web service operation is:
java.lang.IllegalArgumentException: argument type mismatch 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T17:15:10.620

你能让下面的例子工作吗：

```
<cfinvoke webservice="http://sharepointserver:16999/blog/_vti_bin/usergroup.asmx?wsdl" method="GetUserCollectionFromWeb" password="[pw]" username="[username]" returnvariable="listOfUsers"/>

<cfdump var="#listOfUsers#"> 
```

此外，SharePoint 身份验证机制是基本身份验证吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T15:41:33.970

尝试这个：

```
<!--- parse a bunch of XML documents, case-sensitively --->
<cfset ndQuery = XmlParse("<Where><BeginsWith><FieldRef Name='Name' /><Value Type='Text'>D</Value></BeginsWith></Where>", True)>
<cfset ndViewFields = XmlParse("<FieldRef Name='ID' />", True)>
<cfset ndQueryOptions = XmlParse("<QueryOptions />", True)>

<cfset listsService.GetListItems(
        "{52D3A638-FA12-44E8-9C17-5FBCD2899199}", 
        "", 
        ndQuery.XmlRoot, 
        ndViewFields.XmlRoot, 
        "1", 
        ndQueryOptions.XmlRoot, 

)>

<cfset ServiceResponse = GetSOAPResponse(listsService)>
<cfdump var="#ServiceResponse#"> 
```

也许不需要显式传入 XML 根节点，Web Service 也可以处理完整的 XML 文档对象。在这种情况下，以下调用也可以：

```
<cfset listsService.GetListItems(
        "{52D3A638-FA12-44E8-9C17-5FBCD2899199}", 
        "",
        ndQuery, 
        ndViewFields, 
        "1", 
        ndQueryOptions, 
        ""
)> 
```

* * *

[编辑： Lists.GetListItems Method](http://msdn.microsoft.com/en-us/library/lists.lists.getlistitems.aspx)上的 MSDN 页面指出：

> *`queryOptions`*：要为此参数传递一个空值，请包括一个空的 QueryOptions 元素，如下所示。
> 
> ```
> <queryOptions 
>  xmlns:SOAPSDK9="http://schemas.microsoft.com/sharepoint/soap/">
>    <QueryOptions/>
> </queryOptions> 
> ```

所以，让我们试试这个：

```
<cfset ndQueryOptions = XmlParse("<queryOptions xmlns:SOAPSDK9="http://schemas.microsoft.com/sharepoint/soap/"><QueryOptions/></queryOptions>", True)> 
```

* * *

编辑#2

可能还有一个完全不同的问题——方法的最后一个参数是可选的，如果您不想传递 GUID 字符串`GetListItems()`，则应设置为。`null`

不幸的是，您使用的调用语法无法表达省略的参数，并且 CFML 没有文字 null。为此，您必须将调用转换为更详细（但更灵活）`<cfinvoke>`/`<cfinvokeargument>`样式：

```
<cfobject 
  webservice = "http://sharepointserver:16999/blog/_vti_bin/Lists.asmx?wsdl"
  name       = "listsService"
  password   = "pw"
  username   = "user"
>

<cfinvoke 
  webservice     = "#listsService#" 
  method         = "GetListItems"
  returnvariable = "result"
  timeout        = "10"
>
  <cfinvokeargument name="listName"     value="{52D3A638-FA12-44E8-9C17-5FBCD2899199}">
  <cfinvokeargument name="viewName"     value="">
  <cfinvokeargument name="query"        value="#ndQuery.XmlRoot#">
  <cfinvokeargument name="viewFields"   value="#ndViewFields.XmlRoot#">
  <cfinvokeargument name="rowLimit"     value="1">
  <cfinvokeargument name="queryOptions" value="#ndQueryOptions.XmlRoot#">
  <cfinvokeargument name="webID"        value="" omit="yes">
  <!--- setting "omit" to "yes" will turn the parameter to null --->
</cfinvoke>

<cfdump var="#result#" label="result"> 
```

在这方面更深入的阅读是talktree.com：How
[to invoke a Web Service while omitting optional service method arguments](http://www.talkingtree.com/blog/index.cfm/2006/7/12/cfinvokeargument-omit-attr)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-04T08:57:40.513

这是另一个简单的演示..

[http://dotnetdreamer.com/2009/06/04/moss-web-services-accessing-sharepoint-list-data/](http://dotnetdreamer.com/2009/06/04/moss-web-services-accessing-sharepoint-list-data/)

# sql-server - 在文本字段中查询 xml 存储

> ID：747906
> 
> 赞同：0
> 
> 时间：2009-04-14T14:36:54.593
> 
> 标签：sql-server, xml, sql-server-2005, foxpro

我有一个 sql server 2005 表，它在文本字段中存储了 xml。我想知道是否有一种简单的方法（使用 TSQL）从 xml 数据中检索 a 值而无需逐行解析文本？

可以进行逐行解析，因为 xml 的数量非常少。但是，如果可能的话，我想找到一种性能更高的方法。

注意： xml 是通过 FoxPro CURSORTOXML 函数（在 FoxPro 前端应用程序中）创建的，随后被保存到 sql server 表中的文本字段中。xml 模式作为存储的 xml 的一部分内置。

任何建议，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-14T14:39:34.260

您可以从列中获取 XML 数据并将其转换为 XML 数据类型，并使用 XQuery 轻松查询 XML 或使用 XPath 从中提取值。

[SQL Server 2005 中的 XML 支持](http://msdn.microsoft.com/en-us/library/ms345117.aspx)

例如

```
DECLARE @xml XML
Select @xml = CAST(ColData AS XML)
@xml.value('<xquery expression goes here>'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T14:42:55.420

是的。此处的示例“[将 XML 导入 SQL Server](https://stackoverflow.com/questions/688015/importing-xml-into-sql-server/) ”和另一个“[在 SQL Server 中搜索 XML](https://stackoverflow.com/questions/697256/697379) ”

否则，请您发布 xml，我们可以提供一些想法...根据是否读取值、属性、层次结构等，解决方案略有不同

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-14T17:37:16.063

您将希望对这两种解决方案进行性能测试（转换为 XML 与逐行解析）。

# c# - 污损图像并应用过滤器

> ID：747908
> 
> 赞同：0
> 
> 时间：2009-04-14T14:37:12.237
> 
> 标签：c#, image-processing, image-manipulation

**的精确副本**

> [照片应用](https://stackoverflow.com/questions/747860/photo-application)

大家好。

我正在开发一个应用程序，只是为了好玩，它包括从网络摄像头捕获图像。

我想知道的是：如何将一些过滤器应用于图像，以制作像 Apple 的 iPhoto programm 之类的东西。诸如污损之类的东西。

我使用 C# 作为编程语言。

感谢：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-14T14:43:06.090

您应该寻找合适的库。

有一个在： [codeproject](http://www.codeproject.com/KB/GDI-plus/Image_Processing_Lab.aspx)

我不知道这是否适合你。那里应该还有其他人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-14T14:44:24.840

我首先要看的是你是否可以用[ImageMagick](http://www.imagemagick.org/)做你想做的事——一个相当完整的图像处理开源库，它的 API 可用于大多数语言。

# oop - 为什么我会在装饰器上使用责任链？

> ID：747913
> 
> 赞同：73
> 
> 时间：2009-04-14T14:38:18.350
> 
> 标签：oop, design-patterns, decorator, chain-of-responsibility

我只是在阅读[责任链](http://www.dofactory.com/Patterns/PatternChain.aspx)模式，我无法想象一个我更喜欢使用它而不是使用[decorator](http://www.dofactory.com/Patterns/PatternDecorator.aspx)的场景。

你怎么看？CoR 有利基用途吗？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2009-04-14T14:54:24.097

**您可以在任何时候打破链条这一事实将责任链模式与装饰者模式区分开来**。装饰器可以被认为是一次执行，而不与其他装饰器进行任何交互。链中的链接可以被认为是一次执行一个，因为它们每个都依赖于前一个链接。

**当您可以将程序概念化为由链接组成的链时，请使用责任链模式，其中每个链接都可以处理请求或将请求传递到链上。**

当我使用 Win32 API 时，有时我需要使用它提供的挂钩功能。挂钩 Windows 消息大致遵循责任链模式。当您挂钩诸如 WM_MOUSEMOVE 之类的消息时，将调用您的回调函数。将回调函数视为链中的最后一个环节。链中的每个环节都可以决定是丢弃 WM_MOUSEMOVE 消息还是将其沿链向上传递到下一个环节。

如果在该示例中使用了装饰器模式，您将收到 WM_MOUSEMOVE 消息的通知，但您将无法阻止其他挂钩也处理它。

另一个使用命令链模式的地方是游戏引擎。同样，您可以挂钩引擎函数、事件和其他内容。对于游戏引擎，您不想简单地添加功能。您想要添加功能并阻止游戏引擎执行其默认操作。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2009-04-14T14:49:43.063

**链**

> 通过让多个对象有机会处理请求，避免将请求的发送者与其接收者耦合。链接接收对象并沿链传递请求，直到对象处理它。

对比

**装饰者**

> 动态地将附加职责附加到对象。装饰器为扩展功能提供了一种灵活的替代子类的方法。

我会说它围绕事情发生的顺序。如果将它们链接起来，将沿链调用。使用装饰器时，您不能保证此订单，只能附加额外的责任。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2009-04-14T14:41:05.923

我会说*责任链是**Decorator*的一种特殊形式。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-04-14T14:50:25.450

当您想向对象添加功能时使用装饰器。

当许多参与者之一可能对一个对象采取行动时，使用 COR。

根据类型调用*特定*的装饰器以执行操作；而COR沿着定义的链传递对象，直到其中一个参与者决定动作完成。

当有多个级别的升级到不同的处理程序时，可能会使用 COR - 例如，客户对公司的价值决定呼叫是否转到特定级别的支持的呼叫中心。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-04-14T14:49:27.510

好吧，我可以想到两种情况：

*   您没有核心对象，即在请求通过所有层/过滤器后，您不知道如何处理请求。（类似于拦截器链之类的方面，它并不真正关心请求在哪里结束）。
*   您需要有选择地对请求应用一些预处理或后处理。不像装饰器那样采用一般的增强形式。即过滤器可能会或可能不会处理特定请求，但添加装饰器总是会通过某些功能增强您的对象。

现在想不出更多了，很想听到更多关于这个话题的信息。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2010-12-11T22:42:28.043

我同意从结构的角度来看，这两种模式非常相似。我的想法是关于最终行为：

在处理请求的 CoR 元素的经典解释中，链中断了。

如果装饰器中的任何元素破坏了链条，那么这将是装饰器的**错误**实现，因为行为的基本部分将丢失。装饰器的想法是在基本行为保持不变时透明地添加新行为。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-04-05T16:55:21.030

***装饰者***

1.  [装饰器](https://en.wikipedia.org/wiki/Decorator_pattern)模式允许将行为动态添加到单个对象。

2.  它为扩展功能提供了一种灵活的替代**子类的方法。**即使它使用继承，它也继承自最低公分母 ( LCD ) 接口。

**装饰器的 UML 图**

[![装饰器的 UML 图](https://i.stack.imgur.com/UsS2q.png)](https://i.stack.imgur.com/UsS2q.png)

**结果：**

1.  通过装饰，还可以动态删除添加的功能。
2.  装饰在运行时向对象添加功能，这会使调试系统功能更加困难。

**有用的链接：**

[何时使用装饰器模式？](https://stackoverflow.com/questions/1549743/when-to-use-the-decorator-pattern/37504043#37504043)

来自维基百科的[Decorator_pattern](https://en.wikipedia.org/wiki/Decorator_pattern)

来自 sourcemaking 的[装饰师](https://sourcemaking.com/design_patterns/decorator)

**责任链：**

> 责任链模式是一种由一个命令对象源和一系列处理对象组成的设计模式。每个处理对象都包含定义它可以处理的命令对象类型的逻辑；其余的被传递给链中的下一个处理对象

*UML 图*

[![在此处输入图像描述](https://i.stack.imgur.com/d7eoj.gif)](https://i.stack.imgur.com/d7eoj.gif)

这种模式在以下情况下更有效：

1.  多个对象可以处理一个命令
2.  处理程序事先不知道
3.  处理程序应自动确定
4.  希望将请求发送给一组对象，而无需明确指定其接收者
5.  必须以动态方式指定可以处理命令的对象组

*有用的链接：*

来自维基百科[的责任链模式](https://en.wikipedia.org/wiki/Chain-of-responsibility_pattern)

oodesign[的责任链模式](http://www.oodesign.com/chain-of-responsibility-pattern.html)

[来自sourcemaking](https://sourcemaking.com/design_patterns/chain_of_responsibility)的chain_of_responsibility

**现实世界的例子：**在公司中，指定的角色对处理采购请求有特定的限制。如果具有指定角色的人没有足够的权力批准采购法案，他会将命令/请求转发给拥有更大权力的继任者。该链将一直持续到命令被处理为止。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-01-24T11:38:43.967

1.  关键字“扩展” - 静态扩展。
2.  装饰器模式——动态扩展。
3.  责任链模式 - 仅使用一组处理对象处理命令对象，并且这些对象彼此不知道。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-03-18T19:09:24.007

在阅读了四人帮的定义之后，我不相信有真正的区别。（为方便起见包括在内）

*   装饰器：允许动态包装对象以修改它们现有的职责和行为
*   责任链：通过将接收对象链接在一起，为多个对象提供处理请求的机会

维基百科稍微充实了它们，但其中一些有点武断。

*   装饰器通常实现为链表。但我认为这太低级了，不能被视为模式的“一部分”。
*   责任链链接仅在其负责时处理数据；但确定责任和数据处理都是行为的一部分。装饰者可以很容易地做到这一点。
*   装饰器要求您调用委托。
*   “纯” CoR 链接仅应在不处理数据的情况下调用委托。

前两个属性并不能真正区分模式。后两个可以，但是通常实现装饰器和 CoR 的方式并没有强制执行这些属性——设计者只是希望没有人编写破坏链的装饰器或在处理数据后继续链的 CoRLink。

要实际实现这些属性，您需要以下内容。

强制装饰器：

```
abstract class Decorated {

public Decorated delegate;

public final Object doIt(Object args) {
    Object returnVal = behavior(arg);
    if(delegate != null) returnVal = delegate.doit(returnVal);
    return returnVal;
}

protected abstract Object behavior(Object args); //base or subclass behavior
} 
```

强制责任链：

```
abstract class Link {

public Link delegate;

public final Object processIt(Obect args) {
    Object returnVal = args;
    if(isMyResponsibility) returnVal = processingBehavior(returnVal);
    else returnVal = delegate.processIt(returnVal);
    return returnVal;
}

protected abstract Boolean isMyResponsibility(Object args);

protected abstract Object processingBehavior(Object args);
} 
```

（或者，您可以在 javadoc 中添加一行，如果您只想免除自己的责任，以防其他人搞砸了您的设计——但为什么要让它碰运气呢？）

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2011-11-05T16:51:36.247

我认为应用这两种模式的情况是不同的。顺便说一下，对于装饰器模式，装饰器应该知道它包装的组件。而对于 CoR 来说，不同的拦截器可能对彼此一无所知。

# opengl - glTexGeni 和 glBindTexture

> ID：747925
> 
> 赞同：1
> 
> 时间：2009-04-14T14:40:12.620
> 
> 标签：opengl

要调用`glTexGeni()`，我必须先调用以下内容吗？

```
glBindTexture(texType, texId);
glEnable(texType); 
```

这样做会将我设置`glTexGeni()`为所需的texId吗？

`glTexGeni()`否则，如果我之前打电话会有什么行为`glBindTexture()`：

```
glTexGeni(...);
glBindTexture(texType, texId);
glEnable(texType); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-15T14:02:45.540

`[glTexGeni()](http://www.opengl.org/documentation/specs/man_pages/hardcopy/GL/html/gl/texgen.html)`不处理纹理 ID。您（间接）使用的纹理 ID`[glBindTexture()](http://www.opengl.org/documentation/specs/man_pages/hardcopy/GL/html/gl/bindtexture.html)`由`[glGenTextures()](http://www.opengl.org/documentation/specs/man_pages/hardcopy/GL/html/gl/gentextures.html)`.

[这个页面](http://www.nullterminator.net/gltexture.html)有一个关于如何使用`glGenTextures()`和的示例`glBindTexture()`。

# activex - Windows Media Player 忽略我

> ID：747926
> 
> 赞同：7
> 
> 时间：2009-04-14T14:40:14.867
> 
> 标签：activex, windows-media-player

我是前阵子来这里[询问通过 Java 控制 Windows Media Player 的人。](https://stackoverflow.com/questions/711560/programmatically-controlling-windows-media-player-preferably-from-java) 我已经取得了进展，但我遇到了一个令人烦恼的问题，所以我回来寻求帮助。

我按照上次得到的建议安装了 Jacob。我从测试脚本中执行这些行：

```
ActiveXComponent wmp = new ActiveXComponent("WMPlayer.OCX");
wmp.invoke("openPlayer", "http://somafm.com/wma128/groovesalad.asx"); 
```

...然后 WMP 弹出，播放 SomaFM。“哇！” 我认为。“我已经解决了这个问题！”

除了当我在创建该对象后与它进行交互时，它似乎与播放的 WMP 实例没有任何关系。当我执行此代码时：

```
ActiveXComponent wmpSettings = new
ActiveXComponent(wmp.getProperty("settings").toDispatch());
System.out.println("VOLUME: " + wmpSettings.getProperty("volume"));
wmpSettings.setProperty("volume", 0);
System.out.println("VOLUME: " + wmpSettings.getProperty("volume")); 
```

...我得到以下输出：

```
音量：50
音量：0

```

这似乎无伤大雅，除了

1.  “50”的音量与实际设置的播放器音量无关，
2.  在 setProperty 调用之后，播放器的音量实际上并没有改变。

我也尝试过其他属性，但都是一样的：属性的值似乎与玩家实际在做什么无关，而更改它们似乎会改变被操纵*对象*的状态，它对实际*播放器没有影响。* （每次运行脚本时我都会得到完全相同的输出，所以无论我在旋转“音量”时更改的是什么，它在代码之外都没有任何持久性。）

显然我做错了什么，但我盲目地摸索着想弄清楚是什么。任何人都可以向我提供任何关于出了什么问题的见解，或者我接下来应该尝试什么？

（注意：我什至不确定“WMPlayer.OCX”是正确的输入参数。我在注册表中的 HKEY_CLASSES_ROOT 中尝试了看起来很可能的条目，直到找到这个。）

我提前感谢任何人可以提供的任何帮助。

* * *

**编辑，2009 年 4 月 15 日：** 我在一家名为 EZ JCom 的公司的产品中发现了一个特定于 WMP 的软件包。它的失败方式与我之前看到的完全相同，要么它只是 Jacob 的包装器，要么 WMP ActiveX/COM 接口完全损坏。（等等，我为什么说“要么”？）

我与客户服务聊天，他们最终展示了您如何在没有实际用处的情况下提供帮助。他们帮助我更正了他们提供的非编译示例代码，作为他们的 WMP 代码运行示例，但是当我纠缠他们以了解 get/set volume 方法应该如何工作时，我得到了这个：

“抱歉，这里没有 WMP 深入的专业知识 - EZ JCom 只是 Java 和 WMP 等其他程序之间的桥梁建设者。”

请记住，我正在评估的他们的软件包实际上称为“wmp.WindowsMediaPlayer”。如果我让它发挥作用，我将不得不说服我的老板花 600 美元购买许可证。有人想知道如果他们真的对自己的产品有一些专业知识，他们会收取什么费用。

所以，没有真正的进展。只是想我会分享。

* * *

**编辑，2009 年 4 月 20 日：** 是的，我还在纠结这个。我目前的操作理论是，为了获得音量设置，我需要远程访问 WMP。我见过提到 IWMPRemoteMediaServices 和 IServiceProvider 接口，后者的 QueryService 方法提供了指向前者的指针。不幸的是，我没有任何运气弄清楚如何获得 IServiceProvider。我已经看到提到它可以从 Windows“系统”对象访问，但我不知道如何获取该对象。（而且由于“系统”这个词在 Java 中占有很大比重，谷歌给了我一个可怕的噪音：信号比。）如果有人对我如何处理表示 System.dll 的 COM 对象有任何建议，我很乐意听到。

* * *

**编辑，2009 年 4 月 21 日：** 澄清：这是在 XP 系统上。

另外：我的研究表明仅与 WMP 对象交谈是不够的；你需要把它包得更紧，这样它才能回话。有一个包含很多 C++ 内容的 WMP SDK，但它似乎依赖于 Microsoft Visual C++ 对我没有的代码的扩展，而且它们并不是免费赠送的。（此外，我已经有 12 年没有使用过 C++了。）我知道使用 C# 是可能的，但是如果我不使用 Java，我需要解决方案是一个独立的可执行文件，并且没有安装 .NET相关机器。

* * *

**编辑，2009 年 4 月 22 日：** 根据 Mark 在下面的回答，我从 WinUser.h 中挖掘了 APPCOMMAND_MEDIA_* 常量并尝试了以下代码，该代码使用了[NativeCall](http://johannburkard.de/software/nativecall/) api：

```
final int APPCOMMAND_MEDIA_PLAY = 46;
final int APPCOMMAND_MEDIA_PAUSE = 47;

NativeCall.init();

IntCall findWindow = new IntCall("user32", "FindWindowA");
int wmpHandle = findWindow.executeCall(new Object[] { null, "Windows Media Player" });
System.out.println("wmpHandle: " + wmpHandle);
System.out.println("Find Window Error? " + findWindow.getLastError());

IntCall sendMessage = new IntCall("user32", "SendMessageA");

int playResult = sendMessage.executeCall(new Object[] { wmpHandle, APPCOMMAND_MEDIA_PLAY, 0, 0 });
System.out.println("Play Result: " + playResult);
System.out.println("Play Error? " + sendMessage.getLastError());

try { Thread.sleep(5000); } catch (Exception e) {}

int pauseResult = sendMessage.executeCall(new Object[] { wmpHandle, APPCOMMAND_MEDIA_PAUSE, 0, 0 });
System.out.println("Pause Result: " + pauseResult);
System.out.println("PauseError? " + sendMessage.getLastError()); 
```

这给了我一个结果：

```
wmpHandle: 1640048
查找窗口错误？空值
播放结果：-1
播放错误？空值
暂停结果：-1
暂停错误？空值

```

...但实际上并不影响媒体播放器。

我也用 APPCOMMAND_MEDIA_PLAY_PAUSE (14) 进行了尝试，它给出了不同的返回值 (20)，但也没有做任何事情。

FWIW，我真的需要让单独的 PLAY/PAUSE 命令来工作，这是一个可行的选择；只是盲目地切换状态对我没有帮助，因为我不知道当我开始时玩家处于什么状态。

有没有人对我做错了什么或我可以尝试什么有任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T15:21:15.080

那么这些不起作用吗？

```
wmp.getProperty("settings").toDispatch().setProperty("mute", 1);
wmp.getProperty("controls").toDispatch().invoke("pause"); 
```

（为不正确的代码道歉；我以前从未使用过 Jacob）

* * *

在这种情况下，创建/[查找](http://msdn.microsoft.com/en-us/library/ms633499.aspx)任何窗口并将其[发送](http://msdn.microsoft.com/en-us/library/ms644950.aspx)[`APPCOMMAND_MEDIA_PLAY_PAUSE`](http://msdn.microsoft.com/en-us/library/ms646275.aspx)。默认消息处理将使其影响 WMP。（发送静音不好，因为这会使整个系统静音。）

为了可移植性，我建议创建一个 C++ 命令行实用程序或使用 JNI，但现在[NativeCall](http://johannburkard.de/software/nativecall/)可能就足够了。

* * *

您的代码看起来不错，但我认为您只需将参数更改为 SendMessage。尝试：

```
final int WM_APPCOMMAND = 0x0319;
int playResult = sendMessage.executeCall(new Object[] {
        wmpHandle,
        WM_APPCOMMAND,
        wmpHandle,
        APPCOMMAND_MEDIA_PLAY << 16}); 
```

`APPCOMMAND_MEDIA_PLAY`需要 XP SP1，但我假设您已经部署了它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-15T12:51:37.520

看起来当您将 wmpSettings 实例化为新的 ActiveXComponent 时，Jacob 实际上正在做一些有趣的事情来将组件包装在新的媒体播放器对象中，而不是检索您要求的设置属性。

您是否简单地尝试过：

```
Dispatch wmpSettings = wmp.getProperty("settings").toDispatch();
wmpSettings.setProperty("volume", 0); 
```

我还回去阅读了让你开始使用 Jacob 的原始问题，我可以建议一种不同的方法，以防你在这个问题上旋转太久。

我已经设置了一个 Web 应用程序，该应用程序与当前登录到 Web 应用程序服务器的特定用户桌面上的 winamp 运行的直播服务器进行交互。我无法使用 COM 从 Web 应用程序的上下文中直接与用户的 winamp 实例通信，因此我设置了一个简单的 C# TCP/IP winamp 桥应用程序，该应用程序在shoutcast 用户的桌面上运行并允许 Web 应用程序创建一个来自本地主机的套接字连接。

对于 WMP，我相信您可以找到一些 C# 包装器，例如 WmpRemote.zip 的代码，如果您在[http://d.hatena.ne.jp/punidama/20080227上进行文本搜索，您可以找到](http://d.hatena.ne.jp/punidama/20080227)

如果您需要任何具体示例来进行设置，请告诉我。

# asp.net-mvc - 与 ASP.NET MVC 的关系

> ID：747935
> 
> 赞同：1
> 
> 时间：2009-04-14T14:42:27.527
> 
> 标签：asp.net-mvc, foreign-key-relationship

我通常使用 Ruby on Rails 框架，但对于这个项目，我需要使用 ASP.NET MVC 并且我很困惑。

基本上我有 1 张桌子：

*页面 = (id, name, category_id)*

Category_id 实际上是一个页面的链接（一个页面可以链接到另一个页面）。我设置了外键和所有内容，模型已启动并正常工作。

我的问题是：如何将一个页面链接到另一个页面？如果我尝试设置 category_id，它似乎不起作用......有没有一种简单的方法可以从页面模型创建一个下拉菜单并在我的应用程序的创建/编辑操作中使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-14T14:47:21.760

您需要一个具有类似操作的控制器

```
public ActionResult DetailPage(int categoryId)
{
   return View(new ModelObject(categoryId));
} 
```

然后在页面上使用 Html Helper Form 创建一个表单，其中包含您的下拉列表。下拉菜单应该使用 HTml 帮助下拉菜单，并且应该有 categoryId 作为它的 id。像这样;

```
<%=Html.DropDownList("categoryId",ViewData["CategoryID"])%> 
```

在带有下拉菜单的页面的控制器或模型中使用它；

```
NorthwindDataContext db = new NorthwindDataContext();
var categories = from c in db.Categories select c;
ViewData["CategoryID"] = new SelectList(
   categories, "CategoryID", "CategoryName"); 
```

希望这可以帮助

# c# - 在编译时将文件复制到应用程序文件夹中

> ID：747941
> 
> 赞同：107
> 
> 时间：2009-04-14T14:43:18.570
> 
> 标签：c#, visual-studio

如果我想`.\bin\debug\`在编译时将一些文件从我的项目复制到文件夹中，那么似乎我必须将它们放入项目的根目录中。将它们放入子文件夹似乎会将它们复制到与`.\bin\debug\`存储它们相同的结构中的文件夹中。

有没有办法避免这种情况？

只是要清楚一点：如果我有一个文件夹，`MyFirstConfigFile.txt`并且我将它们的*Copy to Output*设置为*Copy...*，那么它们就会出现在文件夹中。我希望它们出现在文件夹中。`MySecondConfigFile.txt``ConfigFiles`**`.\bin\debug\ConfigFiles\``.\bin\debug\`**

 *** * *

## 回答 #1

> 赞同：99
> 
> 时间：2009-04-14T14:46:50.903

您可以通过构建后事件来做到这一点。将文件设置为编译时无操作，然后在宏中将文件复制到所需的目录。

这是一个构建后宏，我认为可以通过将名为 Configuration 的目录中的所有文件复制到根构建文件夹中来工作：

```
copy $(ProjectDir)Configuration\* $(ProjectDir)$(OutDir) 
```

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2009-04-14T14:46:33.273

您可以像这样在您的 csproj 上使用 MSBuild 任务。

编辑你的 csproj 文件

```
 <Target Name="AfterBuild">
    <Copy SourceFiles="$(OutputPath)yourfiles" DestinationFolder="$(YourVariable)" ContinueOnError="true" />
  </Target> 
```

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2014-10-30T10:04:53.357

您还可以将文件或链接放入解决方案资源管理器的根目录，然后设置文件属性：

`Build action = Content`

和

`Copy to Output Directory = Copy if newer`（例如）

对于链接，将文件从 Windows 资源管理器拖动到解决方案资源管理器中，并按住 shift 和 control 键。

[![在此处输入图像描述](https://i.stack.imgur.com/nLce3.png)](https://i.stack.imgur.com/nLce3.png)

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2019-12-22T18:39:30.770

我个人更喜欢这种方式。

修改`.csproj`添加

```
<ItemGroup>
    <ContentWithTargetPath Include="ConfigFiles\MyFirstConfigFile.txt">
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
      <TargetPath>%(Filename)%(Extension)</TargetPath>
    </ContentWithTargetPath>
</ItemGroup> 
```

或概括，如果你想复制所有子文件夹和文件，你可以这样做：

```
<ItemGroup>
    <ContentWithTargetPath Include="ConfigFiles\**">
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
      <TargetPath>%(RecursiveDir)\%(Filename)%(Extension)</TargetPath>
    </ContentWithTargetPath>
</ItemGroup> 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-12-08T16:12:12.983

从子文件夹复制到子文件夹

```
 if not exist "$(ProjectDir)$(OutDir)subfolder" mkdir "$(ProjectDir)$(OutDir)subfolder"

 copy "$(ProjectDir)subfolder\"  "$(ProjectDir)$(OutDir)subfolder\" 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-14T14:47:11.197

您想在您的项目上使用 Post-Build 事件。您可以在那里指定输出，并且有用于项目路径、项目名称等常用内容的宏值。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-14T14:48:07.157

您可以使用项目的 PostBuild 事件。构建完成后，您可以运行 DOS 批处理文件并将所需文件复制到所需文件夹。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-08-14T15:24:58.327

我发现这个问题正在搜索“在编译时将文件复制到应用程序文件夹中”。OP 似乎已经对此进行了排序，但如果您不这样做：

在 Visual Studio 中右键单击该文件，选择属性，然后将选项“复制到输出”更改为“始终”。请参阅[http://msdn.microsoft.com/en-us/library/0c6xyb66.aspx](http://msdn.microsoft.com/en-us/library/0c6xyb66.aspx)

# codedom - 如何使用 CodeDom 添加 #pragma 警告禁用 1591

> ID：747942
> 
> 赞同：2
> 
> 时间：2009-04-14T14:43:33.470
> 
> 标签：codedom

我们应用程序的一部分使用了使用 CodeDom 生成的代码。此代码不需要 Xml 注释，因此我们想添加一个

```
#pragma warning disable 1591 
```

到那些生成的文件。CodeDom 是否可以做到这一点，如果没有，那么关于如何实现这一点还有其他建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2010-01-12T01:52:33.423

```
provider.GenerateCodeFromCompileUnit(
    new CodeSnippetCompileUnit("#pragma warning disable 1591"),
    sourceWriter, options);
provider.GenerateCodeFromCompileUnit(targetUnit, sourceWriter, options);
provider.GenerateCodeFromCompileUnit(
    new CodeSnippetCompileUnit("#pragma warning restore 1591"),
    sourceWriter, options); 
```

（根本）不能很好地翻译成其他语言。YMMV-伊恩

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-14T17:59:48.147

查看所有反射器代码，没有任何东西弹出“正确”的方式。但是，如果您愿意进行一些后期处理，可能会有一种方法。使用 RegionDirective，在 RegionText 值中放置一个特殊标记。然后，一旦您的代码生成，返回并进行字符串替换。

由于我在代码中没有看到任何强制匹配代码区域的内容，因此您可以在末尾有一个起始代码区域以再次启用警告。

例如。您的令牌可能是“#PRAGMA1591”和“#ENABLEWARNINGS”。因此，生成代码后，您将拥有

```
#region #PRAGMA1591

...

#region #WARNINGRESTORE
#endregion 
```

然后你会做一个字符串替换来产生这个：

```
#region Disable Warning 1591
#pragma warning disable 1591

...

#pragma warning restore
#endregion 
```

您的字符串扩展如下：

*   # PRAGMA1591 -> 忽略缺少 XML 文档 \n #pragma 警告

    禁用 1591
*   # 区域 #WARNINGSRESTORE -> #pragma 警告恢复

# php - 如何将 MySQL 数据库中的日期偏移 1 秒？

> ID：747954
> 
> 赞同：4
> 
> 时间：2009-04-14T14:45:57.037
> 
> 标签：php, mysql, wordpress, date, phpmyadmin

我已经将一堆帖子导入了一个 Wordpress 网站，它们都具有完全相同的日期。我想编辑发布日期，使它们偏移一秒。

我担心的是，当所有日期都相同时，可能会出现性能问题。

任何人都知道使用 phpMyAdmin 编辑 MySQL 数据库或其他方法的快速方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-14T14:49:55.373

您可以将它们全部设置为“现在”+ id。

它可能看起来像；

```
 UPDATE  wp_posts
 SET     createdDate = DATE_ADD(now(), INTERVAL wp_posts.wp_id SECOND); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-14T14:58:32.717

在你搞砸之前，我建议你确保实际上有同时时间的问题。

我经常发现像这样弄乱数据会产生意想不到的后果。如果问题真的很严重，我会感到有点惊讶。

在我看来，我看到了将所有行设置为相同偏移值的提案。

假设您有一个整数代理键，并且行是相邻的，您可以使用

> UPDATE table
> SET mydate = DATE_ADD(my_date, INTERVAL id - SECOND)
> WHERE id BETWEEN AND ;

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-14T14:48:56.687

```
UPDATE table SET mydate = DATE_ADD(my_date, INTERVAL 1 SECOND); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-14T14:52:39.483

```
SET @r := '2009-04-14';
UPDATE  mytable
SET     mydate = (@r := @r + INTERVAL 1 SECOND); 
```

或者在单个查询中，如果您无法保持会话状态：

```
UPDATE  mytable,
        (
        SELECT  @r := '2009-04-14'
        ) q
SET     mydate  = (@r := @r + INTERVAL 1 SECOND) 
```

# c++ - 盲反卷积算法题

> ID：747959
> 
> 赞同：2
> 
> 时间：2009-04-14T14:46:44.337
> 
> 标签：c++, optimization, graphics, image-processing, image-manipulation

我正在研究反卷积，
偶然发现了[Richardson-Lucy 反卷积](http://en.wikipedia.org/wiki/Richardson-Lucy_deconvolution)，
我正在考虑编写一个简单的程序来使用这种方法进行后处理，
有人知道我在哪里可以找到完整的可实现算法或源代码，我可以学习和玩耍和？

最好用C++语言或matlab。

我读过几本书，但它们有点笼统，太​​理论化了。

谢谢，查尔斯·莫比。
但我在网上查找 .m 文件时仍然遇到问题，
我得到的只是参考形式，参考不是​​真实文件。
如果您能提供更多详细信息，我们将不胜感激。
提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-14T14:55:25.157

MATLAB 有一个不错的实现（在 Google 上搜索 corelucy.m 和 deconvlucy.m，或下载 MATLAB 和图像处理工具箱演示）。

MathWorks 在其网站上有文档：

[http://www.mathworks.com/access/helpdesk/help/toolbox/images/bqqhld4.html](http://www.mathworks.com/access/helpdesk/help/toolbox/images/bqqhld4.html)

外循环（设置反卷积点扩散函数，进行迭代）在这里：
[http ://ecco2.jpl.nasa.gov/opendap/hyrax/matlab/images/images/deconvlucy.m](http://ecco2.jpl.nasa.gov/opendap/hyrax/matlab/images/images/deconvlucy.m)

内循环（LR算法的核心部分）：
[https ://svn.ecdf.ed.ac.uk/repo/ph/IGM/matlab/generic/images/corelucy.m](https://svn.ecdf.ed.ac.uk/repo/ph/IGM/matlab/generic/images/corelucy.m)

非常感谢 NASA 托管 MATLAB 的一部分！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T14:51:48.583

我建议使用[MATLAB](http://www.mathworks.com/)或 F/OSS 替代[GNU Octave](http://www.gnu.org/software/octave/)。它们对于这类事情要好得多，因为它们有图像处理例程库，而卷积是一个经过高度优化的内置函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-17T21:54:25.527

如果要使用 MATLAB 图像处理工具箱 ( [DECONVLUCY](http://www.mathworks.com/access/helpdesk/help/toolbox/images/deconvlucy.html) ) 自带的 Richardson-Lucy 反卷积算法，需要先获取图像处理工具箱 =)。在[我为 SO question 给出的另一个答案中](https://stackoverflow.com/questions/571985/free-matlab-environment/572013#572013)，我提到了如何试用 MATLAB 及其各种工具箱（如果您还没有的话）。获得工具箱后，您可能可以查看 DECONVLUCY 的源代码（.m 或 .c 文件）来研究算法并弄清楚它是如何工作的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-30T21:45:57.633

这是 Richardson-Lucy 反卷积的一个非常简单的 Matlab 实现：

```
function result = RL_deconv(image, PSF, iterations)
    % to utilise the conv2 function we must make sure the inputs are double
    image = double(image);
    PSF = double(PSF);
    latent_est = image; % initial estimate, or 0.5*ones(size(image)); 
    PSF_HAT = PSF(end:-1:1,end:-1:1); % spatially reversed psf
    % iterate towards ML estimate for the latent image
    for i= 1:iterations
        est_conv      = conv2(latent_est,PSF,'same');
        relative_blur = image./est_conv;
        error_est     = conv2(relative_blur,PSF_HAT,'same'); 
        latent_est    = latent_est.* error_est;
    end
    result = latent_est;

original = im2double(imread('lena256.png'));
figure; imshow(original); title('Original Image') 
```

[![在此处输入图像描述](https://i.stack.imgur.com/OcJOg.png)](https://i.stack.imgur.com/OcJOg.png)

```
hsize=[9 9]; sigma=1;
PSF = fspecial('gaussian', hsize, sigma);
blr = imfilter(original, PSF);
figure; imshow(blr); title('Blurred Image') 
```

[![在此处输入图像描述](https://i.stack.imgur.com/8rUb7.png)](https://i.stack.imgur.com/8rUb7.png)

```
res_RL = RL_deconv(blr, PSF, 1000); toc;
figure; imshow(res_RL2); title('Recovered Image') 
```

[![在此处输入图像描述](https://i.stack.imgur.com/B9mXv.png)](https://i.stack.imgur.com/B9mXv.png)

您也可以在频域中工作，而不是像上面那样在空间域中工作。在这种情况下，代码将是：

```
function result = RL_deconv(image, PSF, iterations)
fn = image; % at the first iteration
OTF = psf2otf(PSF,size(image)); 
for i=1:iterations
    ffn = fft2(fn); 
    Hfn = OTF.*ffn; 
    iHfn = ifft2(Hfn); 
    ratio = image./iHfn; 
    iratio = fft2(ratio); 
    res = OTF .* iratio; 
    ires = ifft2(res); 
    fn = ires.*fn; 
end
result = abs(fn); 
```

要消除边缘的伪影，您可以在边缘镜像输入图像，然后裁剪掉镜像位，或者`image = edgetaper(image, PSF)`在调用之前使用 Matlab 的`RL_deconv`。

本地 Matlab 实现 deconvlucy.m 稍微复杂一点 - 可以在[此处](http://ecco2.jpl.nasa.gov/opendap/hyrax/matlab/images/images/deconvlucy.m)找到源代码，并使用[基本算法的加速版本](https://www.osapublishing.org/ao/abstract.cfm?uri=ao-36-8-1766)。

# design-patterns - 使用状态模式的对象应该如何转换到下一个状态？

> ID：747961
> 
> 赞同：4
> 
> 时间：2009-04-14T14:46:57.877
> 
> 标签：design-patterns, state-machine, state-pattern

我有一个 Order 类，它经历了一系列定义的状态。为了解决这个问题，我实现了 State 模式，使得 Order 对象有一个 CurrentState 成员，该成员实现了 IOrderState 接口。然后我有这个接口的具体实现，例如 OrderStateNew、OrderStateDelivered 等

我的问题是，在状态之间转换 Order 对象的正确方法是什么？有一个允许外部服务设置状态的 Order.SetState() 方法是否可以接受？确定状态更改的标准存储在 Order 对象的外部，因此这似乎是显而易见的答案，但我对在我的对象上使用公共方法来更改像这样基本的东西有点不安。

**附加说明** 我认为添加更多关于我的实现的细节可能会很有用，因为我想知道我是否首先正确地使用了该模式。这是用于创建和授权订单的公共 API

```
Dim orderFacade As New OrderFacade
Dim order = orderFacade.createFrom(customer)

' Add lines etc

' This will validate the order and transition it to status 'Authorised'
Dim valid = orderFacade.Authorise(order)

' This will commit the order, but only if it is at status 'Authorised'
Dim result = orderFacade.Commit() 
```

OrderFacade.Authorise() 函数看起来像这样

```
Public Function Authorise(ByRef originalOrder As Order) As ValidationSummary

    If originalOrder.CurrentState.CanAuthorise() Then

       Dim validator = OrderValidatorFactory.createFrom(originalOrder)
       Dim valid = validator.ValidateOrder(originalOrder)

      If valid.IsValid Then
          originalOrder.SetOrderStatus(OrderStatus.Authorised)
      End If

     Return valid

    End If

 End Function 
```

如您所见，CurrentState 成员是当前 IOrderState 实现，它确定哪些活动对对象有效。我想知道这是否应该负责确定过渡而不是 OrderFacade？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-14T15:26:26.173

考虑通过暗示而不是赋值来改变状态。

在我见过的几乎所有情况下，状态都可以从其他属性中推断出来（希望在类中）。如果是这样，不要持久化状态，而是在需要时派生它。否则，您通常会在推断值和分配值之间出现有问题的分歧。（根据我的经验，“派生”总是正确的。）

（复杂性通常是查看类的事务日志，并考虑最近的事件。但无论如何这都是值得的。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-14T15:03:41.190

SetState() 方法在扩展具有更多状态的订单以及检测更改方面具有优势——但我不推荐它。[状态模式](http://en.wikipedia.org/wiki/State_pattern)是关于在不同的类中收集特定于不同状态的行为，而不是关于如何向其他类呈现有状态的接口。

对于订单，考虑自然发生的业务事件（例如确认、确认、发货通知、发货、发票等）并围绕它们设计一个明确的界面。究竟如何设计接口取决于您的应用程序逻辑的结构，以及如何从其他层使用它。经典的答案是为每个业务事件定义抽象方法（例如 Confirm()、Acknowledge()、ShipDateChanged()）。如果您使用例如 C#，您可能会决定使用 Order 对象的传入和传出事件。或者你可以尝试一些混合物或它们的组合。要点是 SetOrderState() 接口的描述性不是很强，并且可能会导致笨拙的实现（每个 OrderState 类中的大型方法）。

再说一次，如果您没有围绕不同状态更改的大量代码，则类内部的 SetState() 方法（从您的每个特定方法或事件调用）可能没问题：但我不会将其公开为一个外部接口。缺点是您可能会在内部 IOrderState 接口的方法和外部公开的 Order 接口的方法之间出现一些重叠。

这是一个判断电话，但如果我是你，我会按照你的直觉不要将你的 State 实现的细节暴露给客户。使用您的 Order 类的代码应该是可读和可理解的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-14T15:00:07.143

例如，您可以降低封装私有方法的可见性。但在你的情况下，我认为这是唯一的方法，另一种方法是拥有一个实现状态机的父抽象类，并且只有一组 nextState(inputParameter) 方法将订单的状态转移到相应的状态。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-14T15:00:58.560

我认为这没有“正确”的答案。它实际上取决于您为状态机选择的架构。如果更改状态的所有逻辑都封装在您的 Order 类中，那么我会说公开 SetState 方法是不好的做法。但是，由于您已经在 Order 类之外放置了一些状态确定逻辑，因此公开一个公共 SetState 方法或类似方法似乎是合适的（也是必要的）。

当然，您的另一个选择是将状态确定逻辑移到 Order 类中，尽管根据您发布的内容，这似乎会创建一个非常复杂的类。

无论如何，简而言之，模式实际上只是为了帮助您构建代码，而不是设置硬性和快速的规则。您应该以最有效的方式将模式应用于您的架构，而不是架构师到模式。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-14T15:16:42.220

我认为，状态之间的转换应该在课堂上。

例如，当您在订单中执行某种操作时，订单知道如何移动到其他状态。例如：

```
 public void setPaid(int amount)
 {
    //Code to pay.
    this.State = new PaidState();   //State implements the IState Interface
 } 
```

其他替代方法可能是为 Example Transformer 创建一个新类，它实现了这样的方法。

```
 public class Transformer
 {
    public static void setState(Order o, IState s)
    {
         //Change the State.
    }
 } 
```

或者 yoy 可以使用 Enum 在那里设置状态：

```
 public class Transformer
 {
    public static void setState(Order o, StatesEnum s)
    {
         //Change the State.
    }
 } 
```

但我建议班级操纵自己的状态。但请记住，另一方面您将拥有的复杂性。

最好的祝福！

# ffmpeg - ffmpeg可以显示进度条吗？

> ID：747982
> 
> 赞同：74
> 
> 时间：2009-04-14T14:51:29.800
> 
> 标签：ffmpeg, progress-bar

我正在使用 ffmpeg 将 .avi 文件转换为 .flv 文件。由于转换文件需要很长时间，我想显示一个进度条。有人可以指导我如何去做。

我知道 ffmpeg 必须以某种方式在文本文件中输出进度，我必须使用 ajax 调用来读取它。但是如何让 ffmpeg 将进度输出到文本文件？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2011-06-05T19:54:07.687

这几天我一直在玩这个。那个“ffmpegprogress”的东西有帮助，但是很难使用我的设置，也很难阅读代码。

为了显示 ffmpeg 的进度，您需要执行以下操作：

1.  从 php 运行 ffmpeg 命令而不等待响应（对我来说，这是最难的部分）
2.  告诉 ffmpeg 将其输出发送到文件
3.  从前端（AJAX、Flash 等）直接点击该文件或可以从 ffmpeg 的输出中提取进度的 php 文件。

这是我解决每个部分的方法：

1.我从“ffmpegprogress”得到以下想法。这就是他所做的：一个 PHP 文件通过 http 套接字调用另一个文件。第二个实际上运行“exec”，第一个文件就挂断了。对我来说，他的实现太复杂了。他正在使用“fsockopen”。我喜欢卷曲。所以这就是我所做的：

```
$url = "http://".$_SERVER["HTTP_HOST"]."/path/to/exec/exec.php";
curl_setopt($curlH, CURLOPT_URL, $url);
$postData = "&cmd=".urlencode($cmd);
$postData .= "&outFile=".urlencode("path/to/output.txt");
curl_setopt($curlH, CURLOPT_POST, TRUE);
curl_setopt($curlH, CURLOPT_POSTFIELDS, $postData);

curl_setopt($curlH, CURLOPT_RETURNTRANSFER, TRUE);

// # this is the key!
curl_setopt($curlH, CURLOPT_TIMEOUT, 1);
$result = curl_exec($curlH); 
```

将 CURLOPT_TIMEOUT 设置为 1 意味着它将等待 1 秒的响应。最好会更低。还有 CURLOPT_TIMEOUT_MS 需要几毫秒，但它对我不起作用。

1 秒后，CURL 挂断，但 exec 命令仍在运行。第 1 部分已解决。

顺便说一句 - 一些人建议为此使用“nohup”命令。但这似乎对我不起作用。

*还！在您的服务器上拥有一个可以直接在命令行上执行代码的 php 文件是一个明显的安全风险。您应该有密码，或以某种方式对发布数据进行编码。

2.上面的“exec.php”脚本也必须告诉ffmpeg输出到一个文件。这是代码：

```
exec("ffmpeg -i path/to/input.mov path/to/output.flv 1> path/to/output.txt 2>&1"); 
```

注意“1> path/to/output.txt 2>&1”。我不是命令行专家，但据我所知，这一行说“将正常输出发送到这个文件，并将错误发送到同一个地方”。查看此网址了解更多信息：[http ://tldp.org/LDP/abs/html/io-redirection.html](http://tldp.org/LDP/abs/html/io-redirection.html)

3\. 从前端调用一个 php 脚本，为其提供 output.txt 文件的位置。然后，该 php 文件将从文本文件中提取进度。我是这样做的：

```
// # get duration of source
preg_match("/Duration: (.*?), start:/", $content, $matches);

$rawDuration = $matches[1];

// # rawDuration is in 00:00:00.00 format. This converts it to seconds.
$ar = array_reverse(explode(":", $rawDuration));
$duration = floatval($ar[0]);
if (!empty($ar[1])) $duration += intval($ar[1]) * 60;
if (!empty($ar[2])) $duration += intval($ar[2]) * 60 * 60;

// # get the current time
preg_match_all("/time=(.*?) bitrate/", $content, $matches); 

$last = array_pop($matches);
// # this is needed if there is more than one match
if (is_array($last)) {
    $last = array_pop($last);
}

$curTime = floatval($last);

// # finally, progress is easy
$progress = $curTime/$duration; 
```

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2010-06-10T13:35:30.537

有[一篇](http://kpumuk.info/ruby-on-rails/encoding-media-files-in-ruby-using-ffmpeg-mencoder-with-progress-tracking/)俄语文章描述了如何解决您的问题。

关键是`Duration`在编码之前捕获`time=...`值并在编码期间捕获值。

```
--skipped--
Duration: 00:00:24.9, start: 0.000000, bitrate: 331 kb/s
--skipped--
frame=   41 q=7.0 size=     116kB time=1.6 bitrate= 579.7kbits/s
frame=   78 q=12.0 size=     189kB time=3.1 bitrate= 497.2kbits/s
frame=  115 q=13.0 size=     254kB time=4.6 bitrate= 452.3kbits/s
--skipped-- 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2015-05-27T12:17:37.673

如果使用 pipeview 命令，这非常简单。为此，变换

```
ffmpeg -i input.avi {arguments} 
```

至

```
pv input.avi | ffmpeg -i pipe:0 -v warning {arguments} 
```

无需进入编码！

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2009-04-14T14:57:27.867

FFmpeg 使用 stdout 输出媒体数据，使用 stderr 记录/进度信息。您只需要将 stderr 重定向到文件或能够处理它的进程的标准输入。

对于 unix shell，这类似于：

```
ffmpeg {ffmpeg arguments} 2> logFile 
```

或者

```
ffmpeg {ffmpeg arguments} 2| processFFmpegLog 
```

无论如何，您必须将 ffmpeg 作为单独的线程或进程运行。

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2015-07-11T05:07:30.793

你可以用`ffmpeg`' 的 `-progress`论点和`nc`

```
WATCHER_PORT=9998

DURATION= $(ffprobe -select_streams v:0 -show_entries "stream=duration" \
    -of compact $INPUT_FILE | sed 's!.*=\(.*\)!\1!g')

nc -l $WATCHER_PORT | while read; do
    sed -n 's/out_time=\(.*\)/\1 of $DURATION/p')
done &

ffmpeg -y -i $INPUT_FILE -progress localhost:$WATCHER_PORT $OUTPUT_ARGS 
```

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2018-08-11T01:13:06.017

遗憾的是，`ffmpeg`它本身仍然无法显示进度条——此外，许多上述基于 bash 或 python 的权宜之计解决方案已经过时且无法使用。

**因此，我建议尝试全新的[ffmpeg-progressbar-cli ：](https://github.com/sidneys/ffmpeg-progressbar-cli)**

[![ffmpeg-progressbar-cli 截屏视频](https://i.stack.imgur.com/V2eYN.gif)](https://i.stack.imgur.com/V2eYN.gif)

它是可执行文件的包装`ffmpeg`，显示**彩色居中进度条**和剩余时间。

此外，它是开源的，基于 Node.js 并积极开发，处理了大部分提到的怪癖（完全披露：我是它目前的首席开发人员）。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2019-04-25T16:25:28.007

如果您只需要隐藏所有信息并在最后一行显示像 ffmpeg 这样的默认进度，您可以使用`-stats`选项：

```
ffmpeg -v warning -hide_banner -stats ${your_params} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-06-26T07:53:26.860

javascript 应该告诉 php 开始转换 [1] 然后执行 [2] ...

* * *

**[1]** *php：*开始转换并将状态写入文件（见上文）：

```
exec("ffmpeg -i path/to/input.mov path/to/output.flv 1>path/to/output.txt 2>&1"); 
```

* * *

对于第二部分，我们**只需要 javascript**来读取文件。以下示例将 dojo.request 用于 AJAX，但您也可以使用 jQuery 或 vanilla 或其他任何东西：

**[2]** *js：*从文件中获取进度：

```
var _progress = function(i){
    i++;
    // THIS MUST BE THE PATH OF THE .txt FILE SPECIFIED IN [1] : 
    var logfile = 'path/to/output.txt';

/* (example requires dojo) */

request.post(logfile).then( function(content){
// AJAX success
    var duration = 0, time = 0, progress = 0;
    var resArr = [];

    // get duration of source
    var matches = (content) ? content.match(/Duration: (.*?), start:/) : [];
    if( matches.length>0 ){
        var rawDuration = matches[1];
        // convert rawDuration from 00:00:00.00 to seconds.
        var ar = rawDuration.split(":").reverse();
        duration = parseFloat(ar[0]);
        if (ar[1]) duration += parseInt(ar[1]) * 60;
        if (ar[2]) duration += parseInt(ar[2]) * 60 * 60;

        // get the time 
        matches = content.match(/time=(.*?) bitrate/g);
        console.log( matches );

        if( matches.length>0 ){
            var rawTime = matches.pop();
            // needed if there is more than one match
            if (lang.isArray(rawTime)){ 
                rawTime = rawTime.pop().replace('time=','').replace(' bitrate',''); 
            } else {
                rawTime = rawTime.replace('time=','').replace(' bitrate','');
            }

            // convert rawTime from 00:00:00.00 to seconds.
            ar = rawTime.split(":").reverse();
            time = parseFloat(ar[0]);
            if (ar[1]) time += parseInt(ar[1]) * 60;
            if (ar[2]) time += parseInt(ar[2]) * 60 * 60;

            //calculate the progress
            progress = Math.round((time/duration) * 100);
        }

        resArr['status'] = 200;
        resArr['duration'] = duration;
        resArr['current']  = time;
        resArr['progress'] = progress;

        console.log(resArr);

        /* UPDATE YOUR PROGRESSBAR HERE with above values ... */

        if(progress==0 && i>20){
            // TODO err - giving up after 8 sec. no progress - handle progress errors here
            console.log('{"status":-400, "error":"there is no progress while we tried to encode the video" }'); 
            return;
        } else if(progress<100){ 
            setTimeout(function(){ _progress(i); }, 400);
        }
    } else if( content.indexOf('Permission denied') > -1) {
        // TODO - err - ffmpeg is not executable ...
        console.log('{"status":-400, "error":"ffmpeg : Permission denied, either for ffmpeg or upload location ..." }');    
    } 
},
function(err){
// AJAX error
    if(i<20){
        // retry
        setTimeout(function(){ _progress(0); }, 400);
    } else {
        console.log('{"status":-400, "error":"there is no progress while we tried to encode the video" }');
        console.log( err ); 
    }
    return; 
});

}
setTimeout(function(){ _progress(0); }, 800); 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2020-03-24T21:19:33.583

我找到了将参数透明地传递给 FFmpeg 的`ffpb`Python 包 ( `pip install ffpb`)。由于它的鲁棒性，它不需要太多的维护。最后一个版本是 2019 年 4 月 29 日。

![](https://github.com/althonos/ffpb/raw/master/static/showcase.v1.gif)

[https://github.com/althonos/ffpb](https://github.com/althonos/ffpb)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-04-14T14:56:09.837

调用 php 的系统函数会阻塞该线程，因此您需要产生 1 个 HTTP 请求来执行转换，并产生另一个轮询一个来读取正在生成的 txt 文件。

或者，更好的是，客户提交视频进行转换，然后另一个进程负责执行转换。这样客户端的连接在等待系统调用终止时不会超时。轮询以与上述相同的方式完成。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2011-08-24T01:30:59.500

第二个 php 部分有问题。所以我改用这个：

```
$log = @file_get_contents($txt);
preg_match("/Duration:([^,]+)/", $log, $matches);
list($hours,$minutes,$seconds,$mili) = split(":",$matches[1]);
$seconds = (($hours * 3600) + ($minutes * 60) + $seconds);
$seconds = round($seconds);

$page = join("",file("$txt"));
$kw = explode("time=", $page);
$last = array_pop($kw);
$values = explode(' ', $last);
$curTime = round($values[0]);
$percent_extracted = round((($curTime * 100)/($seconds))); 
```

完美输出。

想为另一个进度条查看多次上传的内容。这为当前文件传递了一个百分比。然后是整体进度条。差不多好了。

此外，如果人们难以获得：

```
exec("ffmpeg -i path/to/input.mov path/to/output.flv 1> path/to/output.txt 2>&1"); 
```

去工作。

尝试：

```
exec("ffmpeg -i path/to/input.mov path/to/output.flv 1>path/to/output.txt 2>&1"); 
```

“ **1> 路径**” 到 “ **1> 路径**” 或 “ **2> 路径**” 到 “ **2> 路径**”

我花了一段时间才弄清楚。FFMPEG一直失败。当我改为没有空间时工作。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-06-03T10:21:22.557

这是我的解决方案：

我使用[ffpb](https://github.com/althonos/ffpb)和 python 子进程来跟踪 ffmpeg 进度。然后我将状态推送到数据库（例如：Redis）以在网站上显示进度条。

```
import subprocess

cmd = 'ffpb -i 400MB.mp4 400MB.avi'

process = subprocess.Popen(
    cmd,
    stdout=subprocess.PIPE,
    stderr=subprocess.STDOUT,
    shell=True,
    encoding='utf-8',
    errors='replace'
)

while True:
    realtime_output = process.stdout.readline()

    if realtime_output == '' and process.poll() is not None:
        break

    if realtime_output:
        print(realtime_output.strip(), flush=True)
        print('Push status to Redis...') 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2022-02-17T21:41:39.413

These answers that use multiple tools/consoles are complicating things too much.
`pv` is a good option but has the noted drawbacks of missing non-senquential data.
Just use the `progress` utility: Run ffmpeg as normal then in another console monitor with `progress -m -c ffmpeg`

# javascript - 如何在我的 Javascript 库中添加语法糖？

> ID：747990
> 
> 赞同：1
> 
> 时间：2009-04-14T14:53:15.613
> 
> 标签：javascript, syntactic-sugar

现在图书馆可以翻译这个操作

```
Select * from List where name = k% order by desc 
```

到

```
List.filter(function(x) { return x.first_char() == 'k' }).sort().reverse()); 
```

删除 () 的最佳方法是什么，以便开发人员可以编写如下语句：

```
List.filter(fn(x) { return x.first_char == 'k' }).sort.reverse; 
```

天真的方法：

```
maxfn = function() {this[0]..};  Array.prototype.max = maxfn(); 
```

但是通过这种方法，我无法访问“this”。

我想为

```
new Array("1","2","3") 
```

类似于:)（需要的建议）

```
_("1","2" ,"3") 
```

就像我们在方案中一样 list -> '

我试图克隆参数但失败了。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-14T15:04:41.717

对于列表，您可以使用[JSON](http://json.org)表示法：

```
["1", "2", "3"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T15:52:19.403

如果您控制列表，则可以使用 RoBorg 建议的 JSON 表示法......但是，没有跨浏览器的方式将属性视为方法。注意：spidermonkey (firefox) 支持使用 getter（获取属性的方法）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-14T16:04:35.583

> 什么是删除 () 的最佳方法

JavaScript 中的[属性获取器/设置器。](http://ejohn.org/blog/javascript-getters-and-setters/#postcomment)不幸的是，它是一个相对较新的 JavaScript 功能，无法在 IE6/7（以及各种其他较旧的浏览器）上运行，因此它还没有真正准备好迎接黄金时段（尽管链接文章的介绍）。

您可以通过创建一个 JavaScript 对象来执行此特定示例，该对象包含一个字符串并隐藏所有字符串的方法，然后在初始化时将一个静态的“first_char”属性集添加到字符串的第一个字符。但这真的不值得。

> 新数组（“1”，“2”，“3”）
> 
> 类似于:)（需要的建议）
> 
> _("1","2","3")

好吧，这很简单：

```
function _(/* items */) {
    var a= new Array();
    for (var i= 0; i<arguments.length; i++)
        a[i]= arguments[i];
    return a;
} 
```

但是，现在这样做没有意义，因为数组文字语法：

```
['1', '2', '3'] 
```

从 JavaScript 1.1-1.2 时代开始就可以使用，并且可以在当今的每个浏览器中使用。（它比 JSON 早很多很多年。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-14T15:38:42.587

我将尝试一一回答：1）为什么要从函数调用中删除括号？2）如果“天真”方法失败，可能是因为您正在调用 maxFn 并将结果分配给 Array.prototype.max。它应该是这样的：

```
maxfn = function() {this[0]..};  Array.prototype.max = maxfn; 
```

3) RoBorg 是正确的，只需使用文字符号来动态构造数组。

* * *

编辑：
这是在数组对象上实现 max 函数的一种方法。可选的 evaluator 参数是一个接受两个参数的函数，即当前最大值和数组中的当前值。它应该返回“更大”的对象。对非基元有用。

```
Array.prototype.max = function(evaluator) {
    var max, i = 1; len = this.length;
    if (len > 0) max = this[0];
    for (; i < len; i++) {
        if (evaluator) {
            max = evaluator(max, this[i]);
        }
        else if(max < this[i]) {
            max = this[i];
        }
    }
    return max;
};

var a = [1, 3, 4, 5, 6];
alert(a.max());
var b = ["Arnold", "Billy", "Caesar"];
alert(b.max());
var c = ["Arnold", new Date(), 99, true];
alert(c.max());
var d = [1, 3, 4, 5, 6];
alert(d.max(function (max, val) { return max < val ? val : max })); 
```

# c# - 列出从 GAC 实现特定接口的所有 DLL

> ID：747991
> 
> 赞同：3
> 
> 时间：2009-04-14T14:53:19.327
> 
> 标签：c#, plugins, gac

阿罗哈

给定一个插件架构 (C# / .NET 3.5)，插件存储在 GAC 中，我如何列出/加载所有包含实现我的特定接口的类型的 dll？换句话说，我想通过查看 GAC 来调查我的应用程序的哪些插件安装在机器上。

-Edoode

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-14T15:18:37.237

要添加到 BFree 的答案，我建议您可以[加载程序集仅用于反射](http://msdn.microsoft.com/en-us/library/ms172331.aspx)。这为您提供了增强的安全性（程序集根本无法执行）而无需应用程序域和灵活性（您可以加载用于不同体系结构的程序集）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-14T15:03:44.917

Gac 实际上只是您机器上的一个目录，就像其他任何目录一样。这是典型的细分：

```
c:\windows\assembly\GAC

                   \GAC_32

                   \GAC_MSIL 
```

也许还有一些人..

在每个文件夹中，您都会找到存储实际 dll 的子文件夹。您首先需要编写一个递归方法来获取在 \assembly\ 下找到的所有 dll，（如果您自己不习惯这样做，您可以轻松地在网上找到这些）。获得 dll 列表后，您可以继续使用 Assembly.LoadFile 加载程序集并检查所有类型以查看它们是否实现给定接口。

我唯一的建议是将这些 dll 加载到单独的 appdomain 中，这样您就不会允许任何潜在的有害 dll 加载到您的应用中。

一些链接：

[搜索目录。](http://support.microsoft.com/kb/303974)

[加载程序集并检查给定接口。](http://crazorsharp.blogspot.com/2009/03/net-reflection-part-2-loading.html)

[创建新的 AppDomain。](http://msdn.microsoft.com/en-us/library/ms130766.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-14T15:14:45.813

首先澄清一下：DLL 不能实现接口。DLL 包含可以实现特定接口的类型。这是一个围绕 fusion.dll 的[.NET 包装器](http://www.codeproject.com/KB/system/gacapi.aspx)，它允许您枚举 GAC 中的所有程序集。使用[Assembly.Load](http://msdn.microsoft.com/en-us/library/ky3942xh.aspx)加载程序集后，您可以尝试查找实现特定接口的所有类型：

```
foreach (var type in assembly.GetTypes())
{
    var myInterfaceType = typeof(IMyInterface);
    if (type != myInterfaceType && myInterfaceType.IsAssignableFrom(type))
    {
        Console.WriteLine("{0} implements IMyInterface", type);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-14T15:16:31.877

您应该查看 Enterprise Library 中的[类型选择器工具](http://msdn.microsoft.com/en-us/library/dd139957.aspx)。它可能不是您直接想要的，但它会按照您的描述进行，您可能可以从中借用一些实现。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-14T15:23:58.257

首先，我建议**不**要这样做。为此，您必须从 GAC 加载所有程序集。我建议您让您的用户（或管理员或其他）告诉您尝试从哪些程序集加载（尽管为此，您可能需要所有选项的列表，这可能就是您问这个的原因。 ..)

也就是说，这可能有效，但它会为它应该适用的几个程序集抛出错误，我不知道为什么....另外，我不知道如何检测 GAC 的位置 - c:\windows \assembly 是默认值，但我不知道实际值存储在哪里（注册表？）

```
var targetType = typeof(IComparable);
var errors = new List<Exception>();
var c = Directory.GetFiles(@"c:\windows\assembly", "*.dll", SearchOption.AllDirectories).ToList()
    .ConvertAll(f => Path.GetFileNameWithoutExtension(f))
    .Where(f => !f.EndsWith(".ni"))
    .Distinct().ToList()
    .ConvertAll(f => { try { return Assembly.ReflectionOnlyLoad(f); } catch (Exception ex) { errors.Add(ex); return null; } })
    .Where(a => a != null)
    .SelectMany(a => { try { return a.GetTypes(); } catch (Exception ex) { errors.Add(ex); return new Type[] { }; } })
    .Where(t => targetType.IsAssignableFrom(t)); 
```

祝你好运。

# java - 使用正确的 JRE 从批处理文件启动 Java 应用程序

> ID：747994
> 
> 赞同：3
> 
> 时间：2009-04-14T14:54:26.780
> 
> 标签：java, windows, batch-file, saxon

`java net.sf.Saxon.transform...`我有一个非常简单的批处理文件，它使用简单的命令“ ”启动 Java 应用程序（Saxon）

此应用程序需要 java 版本 1.5。

这个批处理文件将被 400 多个用户使用，每个用户可能在他们的机器上安装了某些版本的 JRE，也可能没有。

我原以为只需安装最新版本的 JRE 就可以解决问题，但不是：在我们的初步测试中，虽然安装了最新版本的 JRE（1.6.0_13），但命令“ `java`”调用旧的 Java 版本（1.3.1...）。

从批处理文件中执行以下操作的最简单（但最强大）的方法是什么：

*   检查哪个是最近安装的 JRE
*   如果最新版本 >= 1.5，则使用批处理命令中的此 JRE
*   如果没有，告诉用户去下载最新的 JRE

即使机器上根本没有安装 JRE 版本，这也应该可以工作。

我已经阅读了一些关于 Java Webstart 的信息，但不确定它是否是最简单的工具。我不知道它是否必须安装，是否可以在没有安装任何 Java 版本的情况下运行，等等。

还有什么其他工具可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-14T14:57:15.777

我从未使用过它，但有人在[另一个问题中建议](https://stackoverflow.com/questions/7720/packaging-java-apps-for-the-windows-linux-desktop)[了 Launch4j](http://launch4j.sourceforge.net/)。

# web-services - 我是在重新发明这个想法吗？

> ID：747995
> 
> 赞同：-1
> 
> 时间：2009-04-14T14:54:33.240
> 
> 标签：web-services, gps, wordpress, windows-mobile-gps

好的，就这样吧，希望这是一个原创的想法。情景是这样的。我托管了一个个人网站，其中也包含一个 wordpress 博客。我有一个通过 GPRS 连接到互联网的 windows mobile。

我想为我的 windows mobile 编写一个应用程序，它会跟踪我当前的 GPS 坐标（我没有 GPS，但我想出了一种找出坐标的方法），并将它们上传到我的网站，我会提供可以获取或设置 GPS 坐标的 Web 服务。然后我想在我的博客（作为 wordpress 插件）或另一个页面中显示我当前的位置，它会再次与我的网络服务对话以获取我最新的 GPS 坐标。

那么我是在重新发明轮子，还是有一个完整的解决方案可供我实现这一目标？

请任何指点。它与编程没有直接关系，但肯定涉及编程！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-14T14:58:19.610

听起来像[谷歌纵横](http://www.google.com/latitude/intro.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T14:58:48.127

这些类型的应用程序/系统很少。
我自己也写了一个类似的系统来尝试在手机被盗时找回它。
在 codeplex 上，您可以找到[This](http://www.codeplex.com/gpstracker)（不是我的）。*************