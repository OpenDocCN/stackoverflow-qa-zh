# StackOverflow 问答 11552000-11552999

# jquery - jQuery asp按钮单击功能未触发

> ID：11552004
> 
> 赞同：1
> 
> 时间：2012-07-18T23:45:48.520
> 
> 标签：jquery, jquery-selectors

以下不起作用。有一个服务器提交按钮并尝试调用客户端按钮的单击操作以进行一些验证。但是，该函数不会被调用！

```
<head runat="server">
<script type="text/javascript" src="scripts/jQuery.js"></script>
</head>
<body>
    <form id="form1" runat="server">
    <div>
    <asp:Button runat="server" Text="Next" ID="btnNext" />
    </div>
    </form>
</body>

$(document).ready(function() {
$('#<%= btnNext.ClientID %>').click(function() {
    alert("Success");
});
}); 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T23:58:28.457

如果您正在调用 btnNext_Click，则该代码将运行**server-side**。所以按钮的点击事件永远不会被客户端触发。

如果要在客户端触发它，则需要使用**客户端脚本**，例如：

```
if (<%= some_condition %>)
{
    $('#<%= btnNext.ClientID %>').click();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T00:24:46.380

试试这个

```
<asp:Button runat="server" Text="Next" ID="btnNext" onClientClick="fnClickEvent();"/> 
```

然后在客户端代码中

```
 function fnClickEvent(){
        var valid = false;
        if (//validation code---){
             valid = true;
                } 
        if valid{ return true; }
        if notvalid { return false;} \\\ this prevents postback

         } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T18:17:41.930

由于某些奇怪的原因，当这个特定的“点击”事件被内嵌到 aspx 页面本身时，它就会运行。我将它保存到 js 文件的那一刻，它停止工作。请记住，我在页面上还有其他控件，它们在同一个 js 文件中具有完美运行的事件。

# java - 从网络中读取经纬度

> ID：11552008
> 
> 赞同：1
> 
> 时间：2012-07-18T23:46:05.693
> 
> 标签：java, android, latitude-longitude

我正在使用以下代码来获取纬度和经度。总是依赖网络提供商可以吗？

```
public static String getLatitudeLongitudeString() {
    LocationManager lm = (LocationManager) GlobalApplication
            .getAppContext().getSystemService(Context.LOCATION_SERVICE);

    Location location = lm
            .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);

    if (location == null) {
        return "";
    } else {
        Geocoder geocoder = new Geocoder(GlobalApplication.getAppContext());
        try {
            List<Address> user = geocoder.getFromLocation(
                    location.getLatitude(), location.getLongitude(), 1);
            double lat = (double) user.get(0).getLatitude();
            double lng = (double) user.get(0).getLongitude();
            return lat + "," + lng;
        } catch (Exception e) {
            Trace.e("Failed to get latitude and longitude", e);
            return "";
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T00:40:22.587

老实说，它“取决于”。但我想说查看[这篇文章](http://android-developers.blogspot.com/2011/06/deep-dive-into-location.html)并找出选项的最佳组合是什么。您可能希望被动提供程序 (Froyo+) 从其他应用程序中获取一些 GPS 更新...还取决于您使用它的目的。如果它是一个地图应用程序，那么你需要 GPS，但如果它只是用于“你在旧金山”类型的文本，那么不太准确就可以了……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T03:12:15.030

正如 Salil 在您的用例中提到的那样，这取决于您的用例。换句话说，它将归结为您需要的位置详细信息的粒度。例如，如果您要编写一个天气应用程序，那么在大多数情况下，了解城市就足够了。如果您希望在用户移动时更新地图，那么您将需要精确的位置，最好由 GPS 提供商提供。

# android - Android - 为什么我保存的图像没有出现在手机的默认图库中？

> ID：11552014
> 
> 赞同：4
> 
> 时间：2012-07-18T23:46:45.257
> 
> 标签：android, image, save, storage, internal

我正在尝试将应用程序中的图像保存到手机的默认图库中。如果我的手机上有 SD 卡，下面的代码可以完美运行。正如预期的那样，保存的图像会出现在手机的图库和所有内容中：

```
private Uri saveMediaEntry(File f, String title, String description, int orientation,      Location loc) {

    ContentValues v = new ContentValues();
    v.put(Images.Media.TITLE, title);
    v.put(Images.Media.DISPLAY_NAME, title);
    v.put(Images.Media.DESCRIPTION, description);

    v.put(Images.Media.ORIENTATION, orientation);

    String nameFile = f.getName();
    File parent = f.getParentFile() ;
    String path = parent.toString().toLowerCase() ;
    String nameParent = parent.getName().toLowerCase() ;
    v.put(Images.ImageColumns.BUCKET_ID, path.hashCode());
    v.put(Images.ImageColumns.BUCKET_DISPLAY_NAME, nameParent);
    v.put(Images.Media.SIZE,f.length()) ;

    if( nameFile.toLowerCase().contains(".png") ){
        v.put(Images.Media.MIME_TYPE, "image/png");

    }else if( nameFile.toLowerCase().contains(".jpg") || 
              nameFile.toLowerCase().contains(".jpeg") ){
         v.put(Images.Media.MIME_TYPE, "image/jpeg");

    }else{
        v.put(Images.Media.MIME_TYPE, "image/jpeg");
    }

    String imagePath = f.getAbsolutePath();
    v.put("_data", imagePath) ;
    ContentResolver c = getContentResolver() ;

    Uri uriOfSucessfulySavedImage = null;
    uriOfSucessfulySavedImage = c.insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, v);

    return uriOfSucessfulySavedImage;
  } 
```

但是，如果我尝试将相同的图像保存到内部存储中（当手机没有 SD 卡时），图像不会出现在手机的图库中！为此，我只从上面的代码中更改了一行：

```
uriOfSucessfulySavedImage = c.insert(MediaStore.Images.Media.INTERNAL_CONTENT_URI, v); 
```

然而，有趣的是该变量`uriOfSucessfulySavedImage`不为空（它返回 `content://media/internal/images/media/x`，其中 'x' 是一个数字）。因此，图像被保存在手机内部存储的某个位置，但它没有像我使用`MediaStore.Images.Media.EXTERNAL_CONTENT_URI`.

有人知道发生了什么吗？如何将图像保存到手机的内部存储中并将该图像保存*在手机的图库中*？

## 更新

我忘记了一个重要信息。*方法“saveMediaEntry”*的参数中的文件“f”来自安装SD卡时的另一种方法（即第一个代码）：

```
public static File getCacheDirectory(String desiredNameOfTheDirectory){

File fileCacheDir = null;

    if (Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED) ){

        fileCacheDir = new File( Environment.getExternalStorageDirectory(), desiredNameOfTheDirectory );
   }

    if(!fileCacheDir.exists()){
        fileCacheDir.mkdirs();
    }

    return fileCacheDir;
} 
```

并从以下代码中获取**未**创建 SD 卡的时间：

```
public static File getCacheDirectory(String desiredNameOfTheDirectory, Context   context){

    File fileCacheDir = null;

        fileCacheDir = context.getCacheDir();

    if(!fileCacheDir.exists()){
        fileCacheDir.mkdirs();
    }

    return fileCacheDir;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-04-09T02:11:37.890

另一种简单的方法。保存文件后添加它。

```
File imageFile = ...
MediaScannerConnection.scanFile(this, new String[] { imageFile.getPath() }, new String[] { "image/jpeg" }, null); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T02:49:17.143

我没有尝试过，但我相信您需要运行 Media Scanner 来扫描内部存储目录，以便图库可以看到您新保存的图像。在这里查看这篇[文章](https://stackoverflow.com/a/5815005/1055373)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-01-31T13:32:44.023

在您的活动中复制此功能

```
private void scanner(String path) {

        MediaScannerConnection.scanFile(FrameActivity.this,
                new String[] { path }, null,
                new MediaScannerConnection.OnScanCompletedListener() {

                    public void onScanCompleted(String path, Uri uri) {
                        Log.i("TAG", "Finished scanning " + path);
                    }
                });
    } 
```

然后在保存图像的位置添加此行

```
scanner(imageFile.getAbsolutePath()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-27T08:19:59.907

尝试这个。

一旦图像存储在图库中，请记下这一行。

```
File file = ..... // Save file

context.sendBroadcast(new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE, Uri.fromFile(file))); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-09T08:34:03.113

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.KITKAT) {

                sendBroadcast(new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE,
                        Uri.parse("file://"
                                + Environment.getExternalStorageDirectory())));
            } else {
                sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED,
                        Uri.parse("file://"
                                + Environment.getExternalStorageDirectory())));
            } 
```

# .net - RequestReduce And ReWriting CSS Paths

> ID：11552016
> 
> 赞同：1
> 
> 时间：2012-07-18T23:47:38.660
> 
> 标签：.net, asp.net-mvc-3, requestreduce

I've recently implemented RequestReduce on a site we have in development.

It's working well except for one behavior that's proving problematic. I noticed that ReduceRequest rewrites the paths of background images, for example, to be a full path instead of relative. This is a problem for this application because it contains a css style (from a common, shared site and style sheet, via a virtual directory) that contains an .htc file fix for IE pngs. (I know, I know, don't ask me why we still do this).

When RequestReduce re-writes the style, the style becomes

```
img.pngfix,div.pngfix img{behavior:url(http://[domain]/_common/htc/iepngfix.htc)} 
```

(_common is a virtual directory to our common includes site)

This throws a permission denied error in IE as you can't use htc from an external domain the way I understand it (it does function as expected without the domain).

![enter image description here](../Images/85016da671b269128998847e7021aac5.png)

So I've been trying to come up with a way to have RequestReduce *not* re-write the CSS rules to add domain. Parsing through the documentation I came across this:

[https://github.com/mwrock/RequestReduce/wiki/The-RequestReduce-Api](https://github.com/mwrock/RequestReduce/wiki/The-RequestReduce-Api) (specifically, the section labelled Transforming the URLs generated by RequestReduce)

The API seems to indicate this can be done with something like the following:

```
RequestReduce.Api.Registry.UrlTransformer =
                    (context, x, y) =>
                    y.Replace("[http://domain]", ""); 
```

But so far, I've never seen this work. It never actually replaces the domain portion with nothing as I'm requesting.

I've also posted on this bug thread which seems to indicate that there is an issue with this functionality: [https://github.com/mwrock/RequestReduce/issues/177](https://github.com/mwrock/RequestReduce/issues/177)

Does anyone have any experience with ReduceRequest and URL transformations? I'm hoping to verify I'm not doing anything improperly as I'm pretty new to the tool. This tool would be a definite win for our applications so I'm hoping to be able to work around this.

Thanks for any help you can offer.

# varnish - Varnish ESI include only works when parent page is fetched from backend

> ID：11552017
> 
> 赞同：0
> 
> 时间：2012-07-18T23:47:38.277
> 
> 标签：varnish, esi

I'm running Varnish 3.0.2, Apache2, Pressflow. I am trying to get ESI up and working for the first time, and it does work, but only the first time the parent page is requested. After that it just pulls the parent page and the replaced content from the cache. The only thing I can think of is that the included content is being cached permanently, even though I am telling it to not cache the included file at all, here is the object for the included file being stored...

```
11 ObjProtocol  c HTTP/1.1
11 ObjResponse  c OK
11 ObjHeader    c Date: Wed, 18 Jul 2012 23:25:56 GMT
11 ObjHeader    c X-Powered-By: PHP/5.3.3-1ubuntu9.10
11 ObjHeader    c Last-Modified: Wed, 18 Jul 2012 23:25:56 +0000
11 ObjHeader    c Expires: Sun, 11 Mar 1984 12:00:00 GMT
11 ObjHeader    c Vary: Cookie,Accept-Encoding
11 ObjHeader    c ETag: "1342653956"
11 ObjHeader    c Content-Encoding: gzip
11 ObjHeader    c Content-Length: 656
11 ObjHeader    c Content-Type: text/html
11 ObjHeader    c Server: Apache/2.2.11
11 ObjHeader    c Cache-Control: no-store 
```

I've spent a full day on this, searched, read every article I can find, tried a whole heap of config tweaking, both in the VCL and in the HTTP headers. I can't see anything I'm doing wrong.

This is a snippet from my VCL, trying to force it to not store in the cache

```
sub vcl_fetch {
  set beresp.do_esi = true;
  if (req.url ~ "^/esi_") {
    set beresp.http.Cache-Control = "no-store";
    set beresp.ttl = 0s;
  }
} 
```

I would add that I am seeing nothing to inidicate errors in the varnishlog. I've tried using just the path, and host + path in the include src, but no difference. It simply won't ask the backend for fresh content. If you were looking at the logs for the second and subsequent requests, you wouldn't realise it was an ESI page.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:30:07.663

在 sub vcl_recv {} 中提供一些信息，告诉 varnish 不要在缓存中查找请求，并从后端服务器定义一个额外的 http 响应元素，该元素由 vcl 中的条件处理。例如“编译指示：无缓存”..

您可以使用 ~ "^/esi_" .. 在 vcl_recv 中扩展此条件。

```
sub vcl_recv(
  # ...
  # the rest goes here ..
  # ...
  if ((req.url ~ "^/esi_") && (req.http.pragma ~ "no-cache")) {
    return (pass);
  }
 # ...
} 
```

# php - 如何处理在同一服务器上运行的两个应用程序实例的 PHP 会话变量名称？

> ID：11552021
> 
> 赞同：3
> 
> 时间：2012-07-18T23:47:59.597
> 
> 标签：php, session

例如，假设我有一个使用`$_SESSION['user_id']`. 现在，如果我有两个这样的应用程序在同一台服务器上运行，那么它们将共享这个 user_id 变量，这会破坏事情。

我唯一能想到的就是像这样添加一些唯一的 id：

`$_SESSION['/app1/user_id']`

`$_SESSION['/app2/user_id']`

那是最好的选择吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T00:00:57.337

这就是 的目的[`session_name()`](http://us3.php.net/manual/function.session-name.php)。为每个应用程序的会话分配不同的名称以避免`$_SESSION`键之间的冲突。该名称将用作会话 cookie 的名称，因此虽然两个会话 cookie 都将传递给两个应用程序，但只有与应用程序匹配的一个`session_name()`将用于填充`$_SESSION`.

```
// App 1
session_name('app1');
session_start();

// App 2
session_name('app2');
session_start(); 
```

# php - Why am I able to rotate small photos, but not large photos using PHP's imagerotate() function?

> ID：11552022
> 
> 赞同：0
> 
> 时间：2012-07-18T23:48:11.233
> 
> 标签：php, gd, image-rotation

I have written a PHP script that allows me to rotate an image, by using PHP's `imagerotate()` function. It works great with most of the photos I have tested. However, the script crashes when trying to rotate larger photos ( > 644 KB, 2112px x 2816px). This isn't a very large photo, but my script only crashes when the photo is around this size or larger. Is there a file size limit when using imagerotate()?

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-25T01:01:44.680

您可以尝试使用 GD 的包装器（例如[PHP Image Magician](http://phpimagemagician.jarrodoberto.com)）来简化流程。

# awk - 比较 2 个文件中的关键字并将与关键字关联的值从一个文件替换到另一个文件

> ID：11552025
> 
> 赞同：1
> 
> 时间：2012-07-18T23:48:28.330
> 
> 标签：awk, tcl

抱歉没有明确的标题。我会尽力解释我的问题。

我有两个文件 A 和 B。

**文件 A**的格式是这样的：

```
set_time 10 temp max 2 min 1 xyzzy
set_time 10 temp max 2 min 1 abcde
set_time 10 temp max 3 min 2 ersfg
set_time 8  temp max 2 min 0 fdfdf 
```

**文件 B**如下所示：

```
xyzzy 7.5
abcde 8.5
ersfg 9.5
fdfdf 9.0 
```

现在，需要做的是，我必须搜索**文件 A**中的最后一列名称（`xyzzy`、`abcde`、`fdfdf`等），并将第二列值替换为**文件 B**中的第二列值。

因此，输出应如下所示：

```
set_time 7.5 temp max 2 min 1 xyzzy
set_time 8.5 temp max 2 min 1 abcde
set_time 9.5 temp max 3 min 2 ersfg
set_time 9.0 temp max 2 min 0 fdfdf 
```

任何帮助表示赞赏。这是 TCL 流程的一部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T00:39:15.650

读取带有映射的第二个文件，如下所示：

```
set f [open file_B]
set mapping [dict create]
while {[gets $f l]} {
    if {[feof $f]} break
    dict set mapping {*}$l
} 
```

然后通过制作一个输出自身的命令来处理原始文件`set_time`，同时更改所需的值：

```
proc set_time {num_to_replace temp max maxnum min minnum mapval} {
    puts "set_time [dict get $::mapping $mapval] $temp $max $maxnum $min $minnum $mapval"
} 
```

然后只是`source`原始数据文件：

```
source file_A 
```

这当然假设这两个文件中没有其他行会打乱处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T01:44:56.977

也许你会发现一个`awk`有用的脚本：

```
FNR == NR {
    fileA[$1] = $2
    next
}

{
    for (i in fileA) {
        if (i == $NF) {
            $2 = fileA[i]
            print
        }
    }
} 
```

像这样运行：

```
awk -f script.awk fileB.txt fileA.txt 
```

结果：

```
set_time 7.5 temp max 2 min 1 xyzzy
set_time 8.5 temp max 2 min 1 abcde
set_time 9.5 temp max 3 min 2 ersfg
set_time 9.0 temp max 2 min 0 fdfdf 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T00:02:30.237

您可以使用您选择的语言编写一个简单的脚本来执行此操作，在空格字符处拆分字符串并使用数组（取决于文件的大小）。

但是，如果这是您这次只需要完成的一次性情况，请打开 Excel 并将文件导入为由空格字符（或任何相关字符）分隔的 CSV 文件。然后，您可以根据需要对行进行排序并复制“n”粘贴整列值。在包含空格的值之间添加一些额外的列，填写它们然后将文件保存为纯文本。

它可能不漂亮，但对于组合简单的数据集可能非常有效。尤其是一次性任务。

# box2d - box2d 中的慢速回放

> ID：11552028
> 
> 赞同：0
> 
> 时间：2012-07-18T23:48:58.597
> 
> 标签：box2d

我试图在我的 box2d 游戏中显示特定事件的缓慢重播。此事件涉及基于生命值移动、旋转、碰撞和被破坏的对象。

我所做的是在事件开始之前存储我的世界中所有对象的状态，并在事件结束时恢复它们，以便一切都可以重新发生。由于我希望此重播更慢，因此我将传递给我的世界更新函数的实际时间的一小部分。除了碰撞处理之外，所有运动和对象都很好，并且在原始运行中被破坏的一些对象在重放中仍然存在，反之亦然。

这件事实际上可以在理论上用 box2d 正确完成还是我在浪费时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T01:23:03.107

最重要的是保持两次运行的时间步长相同。为了让它看起来很慢，您可以插入位置以进行渲染。Box2D 保留一些内部状态以帮助提高效率，我认为您不能通过将位置和速度重置回存储状态并再次运行来完全消除这一点。

如果慢动作不太长，我可能只运行一次模拟并记录每一步中所有内容的位置，然后用它来渲染慢动作和全速运行。例如，如果慢动作是 3 秒长并且您以 60fps 的速度运行，只要您想要一个慢动作场景，Step() 将世界移动 180 步（不渲染）并将所有内容的位置存储在数组什么的。然后，您可以通过以您喜欢的任何速度（向前或向后）插入阵列中的位置来渲染慢动作：) 当慢动作场景完成后，扔掉阵列并照常继续。缺点是如果你有一个很大的世界，运行 180 步可能需要相当长的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T05:44:07.447

iforce2d 是对的。进行回放的最佳方法是记录所有位置。因为即使您向 box2d 提供相同的输入，也有可能产生不同的输出。

# php - only echo html if a $get condition is met

> ID：11552030
> 
> 赞同：0
> 
> 时间：2012-07-18T23:49:03.417
> 
> 标签：php, html

I am redirecting various messages from a header and echoing them onto a new page. How can I change this so that the html only appears if there is a message variable to echo. i.e., if one of the `$_GET` conditions are met? Thanks

```
$message="";

if(isset($_GET['pw']))
{
  $message = "first message";
}
else if(isset($_GET['em']))
{
  $message = "second message";
}
else if(isset($_GET['fn']))
{
  $message = "third message";
}
else if(isset($_GET['ln']))
{
  $message = "forth message";
}
    ?>
<html>
     <body>
         <table class='tab2'>
             <td class='td2'><?php echo $message; ?></td>
         </table>
     </body>
<html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T23:54:38.580

```
<?php
   if($message)
   {
?>

   <html>
   ....

   </html>

<?php
   }
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T00:13:12.190

你可以使用这个：

```
<?php
$message="";

if(isset($_GET['pw']) && !empty($_GET['pw']))
{
  $message = "first message";
}
else if(isset($_GET['em']) && !empty($_GET['em']))
{
  $message = "second message";
}
else if(isset($_GET['fn']) && !empty($_GET['fn']))
{
  $message = "third message";
}
else if(isset($_GET['ln']) && !empty($_GET['ln']))
{
  $message = "forth message";
}
echo $message;
?> 
```

演示：[http ://shaquin.tk/experiments/get-conditions.php](http://shaquin.tk/experiments/get-conditions.php)

它检查`$_GET`是否定义了变量，如果它不为空，则设置`$message`为适当的消息。

请参阅[空 - PHP 手册](http://php.net/manual/en/function.empty.php)和[isset - PHP 手册](http://php.net/manual/en/function.isset.php)。

**编辑：**

如果要显示多条消息，请使用以下代码：

```
$message=array();
if(isset($_GET['pw']) && !empty($_GET['pw']))
{
  $message[] = "first message";
}
if(isset($_GET['em']) && !empty($_GET['em']))
{
  $message[] = "second message";
}
if(isset($_GET['fn']) && !empty($_GET['fn']))
{
  $message[] = "third message";
}
if(isset($_GET['ln']) && !empty($_GET['ln']))
{
  $message[] = "forth message";
}
echo implode("\n", $message); 
```

演示：[http ://shaquin.tk/experiments/get-conditions2.php](http://shaquin.tk/experiments/get-conditions2.php)

它初始化`$message`为一个数组，然后在满足条件时添加到数组中。

在打印消息之前，它就是`implode`它，使用换行符作为“胶水”。

请参阅[implode-PHP 手册](http://php.net/manual/en/function.implode.php)。

对于 HTML 页面，您可能希望将“胶水”设置为`<br />`元素，如下所示：

```
echo implode('<br />', $message); 
```

（或者如果您使用的是 HTML4）：

```
echo implode('<br>', $message); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T23:59:11.723

你可以做

```
if ($message != "") { ?> 
   All your HTML code (including echo $message) goes here 
<?php
} else { do nothing here }
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T23:51:58.923

`<?php if (!empty($message)) { echo $message;}?>`

or

`<?php if (isset($message)) { echo $mssage;}?>`

or

`<?php if (($message !== "") || (isset($message)) { echo $message; } ?>`

or anything to do `if message exists then do this`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-19T00:11:10.110

每个人的答案都有几乎相同的想法，但具体来说，您可以这样做：

```
$message="";

if(isset($_GET['pw']))
{
  $message = "first message";
}
else if(isset($_GET['em']))
{
  $message = "second message";
}
else if(isset($_GET['fn']))
{
  $message = "third message";
}
else if(isset($_GET['ln']))
{
  $message = "forth message";
}
?>
<?php if ($message) :?>
<html>
    <head>
    <style type='text/css'>
        .tab2
        {
            width:400px; height:40px;
            position: absolute; right: 300px; top: 70px;
        }

        .td2
        {
            background-color:pink;
            color:blue;
            text-align:center;
        }
     </style>
     </head>
     <body>

         <table class='tab2'>
             <td class='td2'><?php echo $message; ?></td>
         </table>
     </body>
<html>
<?php endif;?> 
```

# android - Remove odd characters

> ID：11552033
> 
> 赞同：0
> 
> 时间：2012-07-18T23:49:57.690
> 
> 标签：android, mysql, input, non-printing-characters

I've developed an app that syncs its data with a website I also developed. When I input data from on the web and sync the data to my app, sometimes the data comes down with non-printable characters. During my sync process (or better yet, prior to saving the data in my database, perhaps both...), how can I identify and remove the characters?

![screen-shot](../Images/70b0e5ed88605efb7ed37cd1849b3373.png)

# c++ - 闪存驱动器上的 Qt SDK 1.2.1

> ID：11552048
> 
> 赞同：0
> 
> 时间：2012-07-18T23:52:17.767
> 
> 标签：c++, qt, ide, installation, usb-flash-drive

有谁知道如何在闪存驱动器上安装 Qt SDK 1.2.1 包以便在任何地方即插即用？如果我想为 Windows 做这件事，我会简单地从安装程序包中安装它吗？这甚至可能吗？

**更新：**

下面针对三个操作系统进行了回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T21:15:24.813

**视窗**

您可以安装 Qt SDK 1.2.1 以在安装时在闪存 USB 分配的驱动器号上运行。

但是，要回答这个问题，没有办法设置 Qt Creator 设置来动态更改驱动器目标资源以实现即插即用。如果您希望在外部系统上加载 Qt Creator，则必须为 USB 驱动器分配安装时分配的驱动器号。

**Unix / Linux**

据报道，UNIX 和 Linux 系统具有为 USB 应用程序实现动态驱动器路径分配的方法。

**苹果电脑**

未知。请继续关注或提供答案。

我确实记得读过 Mac 有自己的迷你操作系统，只是为了让应用程序仅在闪存驱动器上运行。在我确定之前，我想确认一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T00:35:59.810

在闪存驱动器设备上安装 Qt SDK ？是的。

# wpf - 图像源绑定不起作用

> ID：11552052
> 
> 赞同：1
> 
> 时间：2012-07-18T23:53:16.487
> 
> 标签：wpf, data-binding

我将图像绑定`Source`到`BitmapImage`我的代码中的 a 但它没有显示出来。

xml:

```
<Window x:Class="bleh.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow"
    mc:Ignorable="d" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" d:DesignHeight="600" d:DesignWidth="600">
<Grid x:Name="LayoutRoot">
    <Image x:Name="current" HorizontalAlignment="Center" Stretch="None" VerticalAlignment="Center" Source="{Binding Picture}" />
</Grid>
</Window> 
```

和我的cs：

```
public partial class MainWindow : Window, INotifyPropertyChanged
{
    /// <summary>
    /// Event implementing INotifyPropertyChanged interface.
    /// </summary>
    public event PropertyChangedEventHandler PropertyChanged;

    public BitmapImage Picture { get; set; }

    public MainWindow()
    {
        Uri uri = new Uri("Images/xpto.jpg", UriKind.Relative);
        this.Picture = new BitmapImage(uri);
        InitializeComponent();
        //setup();
    }
} 
```

奇怪的是，窗口以图像的大小打开，但我看不到图像。我也尝试在 xaml 中手动分配，它可以工作。

做`current.source="Images/xpto.jpg"`也行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T00:12:29.713

您的视图 (MainWindow) 的 DataContext 未设置，因此没有要绑定的“图片”属性。如果您希望视图绑定到自身，请添加

```
this.DataContext = this; 
```

到您的 MainWindow 构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T13:23:28.437

您没有为属性 Picture: public BitmapImage Picture { get; 实现 INotifyPropertyChanged 放; 你必须这样做：

```
BitmapImage _picture;
public BitmapImage Picture {
get {return _picture;}
 set{
      _picture=value;
      OnPropertyChanged("Picture");
    }`
 } 
```

# unit-testing - ControllerUnitTestCase 中域对象的 JSON 呈现失败

> ID：11552053
> 
> 赞同：3
> 
> 时间：2012-07-18T23:53:19.770
> 
> 标签：unit-testing, grails, groovy

我正在为将域类呈现为 JSON 响应的 Grails 控制器编写单元测试：

```
class MyController {
    def find = {
        def domainInst = MyDomainClass.get(params.id)
        render ([data: domainInst] as JSON)
    }
} 
```

单元测试扩展了 ControllerUnitTestCase 并为域对象提供了一个模拟：

```
class MyControllerTests extends ControllerUnitTestCase {
    @Before
    void setUp() {
        super.setUp()
        mockDomain(MyDomainClass, [new MyDomainClass(id: 7)])
    }

    @Test
    void testFind() {
        def inst = MyDomainClass.get(7)
        controller.params.id = inst.id
        controller.find()
        assert(controller.response.json.data.id == inst.id)
    } 
```

这一切似乎都运行良好，除了 JSON 渲染，它吐出一个讨厌的堆栈跟踪：

```
| Failure:  testFind(MyControllerTests)
|  org.apache.commons.lang.UnhandledException: 
        org.codehaus.groovy.grails.web.converters.exceptions.ConverterException: Error converting Bean with class MyDomainClass
        Caused by: org.codehaus.groovy.grails.web.converters.exceptions.ConverterException: Error converting Bean with class MyDomainClass
at grails.converters.JSON.value(JSON.java:199)
at grails.converters.JSON.convertAnother(JSON.java:162)
at grails.converters.JSON.value(JSON.java:199)
at grails.converters.JSON.render(JSON.java:134)
... 5 more
        Caused by: java.lang.reflect.InvocationTargetException
... 9 more
        Caused by: groovy.lang.MissingMethodException: No signature of method: MyDomainClass.isAttached() is applicable for argument types: () values: []
        Possible solutions: isAttached(), attach()
... 9 more 
```

将返回更改为 Map 而不是域类有效：

```
render ([data: [id: domainInst.id]] as JSON) 
```

是什么导致 JSON 编组器在域类上死掉？它可以在正常环境中工作，但不能在模拟测试环境中。有没有办法使这个测试工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T20:50:59.013

看起来您可能需要进行一些微调以使转换器意识到您正在尝试将域类呈现为 JSON 对象。当您手动将 id 放入地图时，它会起作用，因为它正在呈现来自 Map 对象而不是 Grails 域类的响应，后者需要通过特殊的 ObjectMarshaller。

像这样的东西：

```
// Domain Class
class Foo {
    String foo
}

// Controller class
class MyController {
    def find = {
        def domainInst = Foo.get(params.id)
        render domainInst as JSON
    }
}

// Controller Test Class
class MyControllerTests extends ControllerUnitTestCase {

    static application

    @Before
    void setUp() {
        super.setUp()

        // Register some common classes so that they can be converted to XML, JSON, etc.
        def convertersInit = new ConvertersConfigurationInitializer()
        convertersInit.initialize(application)
        [ List, Set, Map, Errors ].each { addConverters(it) }
        def xmlErrorMarshaller = new ValidationErrorsMarshaller()
        XML.registerObjectMarshaller(xmlErrorMarshaller)
        def jsonErrorMarshaller = new ValidationErrorsMarshaller()
        JSON.registerObjectMarshaller(jsonErrorMarshaller)

        ApplicationHolder.application.addArtefact("Domain", Foo)
        mockDomain(Foo, [new Foo(foo: "foo")] )
    }

    @Test
    void testJSON() {
        def inst = Foo.list()[0]
        controller.params.id = inst.id
        def model = controller.find()
        assert controller.response.json.foo == "foo"
    }

    @Override
    protected def bindMockWebRequest(GrailsMockHttpServletRequest mockRequest, GrailsMockHttpServletResponse mockResponse) {
        MockApplicationContext ctx = new MockApplicationContext()
        application = new DefaultGrailsApplication([testClass] as Class[], getClass().classLoader)
        application.initialise()
        ctx.registerMockBean("grailsApplication", application)
        ctx.registerMockBean(testClass.name, testClass.newInstance())
        def lookup = new TagLibraryLookup(applicationContext: ctx, grailsApplication: application)
        lookup.afterPropertiesSet()
        ctx.registerMockBean("gspTagLibraryLookup", lookup)
        ctx.registerMockBean(GroovyPagesUriService.BEAN_ID, new DefaultGroovyPagesUriService())
        mockRequest.servletContext.setAttribute(ApplicationAttributes.APPLICATION_CONTEXT, ctx)
        mockRequest.servletContext.setAttribute(WebApplicationContext.ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE, ctx)

        webRequest = new GrailsWebRequest(mockRequest, mockResponse, mockRequest.servletContext)

        mockRequest.setAttribute(GrailsApplicationAttributes.WEB_REQUEST, webRequest)
        RequestContextHolder.setRequestAttributes(webRequest)
    }
} 
```

希望这可以帮助！

# windows - 不断观察文件夹中的新文件

> ID：11552059
> 
> 赞同：1
> 
> 时间：2012-07-18T23:53:56.953
> 
> 标签：windows, macos, directory, wget

`Mac`我在(running `MAMP Pro`)上有一个 web 文件夹，并在其中动态添加了文件，`URL`如下所示。 [http://abc.com/folder/](http://abc.com/folder/)

我有另一`Windows`台机器应该经常监视这个文件夹并将任何新文件下载到这个文件夹`web folder`（`c:\macfolder\`文件总是`tsv's`）。

我知道我可以`wget`用来获取文件并运行任何可以作为 Windows 中的调度程序执行此操作的程序以不断观看，但是观看此文件夹中新文件的最佳方式是什么。

谢谢

PS我不知道这个问题的最佳标签是什么。也帮我解决这个问题..：P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T02:09:57.920

由于该目录已安装在 Windows 上，因此您的问题似乎与此（和相关）重复 - 假设您可以使用 C# 构建这样的工具：

[在没有 FileSystemWatcher 的情况下监视目录以创建新文件](https://stackoverflow.com/questions/3612311/monitoring-a-folder-for-new-file-creation-without-using-filesystemwatcher-in-ne)

如果不是那么热衷于 C# 工具，这里有类似这样的命令行解决方案：

[批处理文件以监视下载文件夹的添加](https://stackoverflow.com/questions/4230976/batch-file-to-monitor-additions-to-download-folder)

# javascript - 在对象上设置属性时调用函数

> ID：11552064
> 
> 赞同：9
> 
> 时间：2012-07-18T23:54:30.497
> 
> 标签：javascript, node.js

我真的不知道如何解释这一点，但我会向您展示代码并告诉您我想要实现的目标。

假设我制作了一个快速对象：

```
var test = {}; 
```

然后我给它设置了一个属性：（我**坚持**语法，它不能使用任何函数作为setter）

```
test.hello = 'world'; 
```

很简单吧？现在我想向该对象添加一个函数，每次设置新属性时都会调用该函数。像这样：

```
var test = { 
                newPropertyHasBeenSet: function(name){ 
                    console.log(name + 'has been set.'); 
                } 
            };

test.hello = 'world';

// Now newPropertyHasBeenSet gets called with 'hello' as an argument.
// hello has been set. 
```

我不知道这是否可能，但这将是非常惊人的。任何人都知道如何实现这一目标？

编辑：我也希望能够对属性 get 做同样的事情（例如，这样`test.hello`会调用`get('hello')`）。

EDIT2：**这是使用 node.js 的服务器端javascript**。

非常感谢，祝您有愉快的一天！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T01:18:30.107

在 chrome 中尝试这个示例（如之前的评论中提到的，它使用[ES6 Proxy](http://wiki.ecmascript.org/doku.php?id=harmony:proxies)）：

```
var p = new Proxy(
    {},
    {
        get: function(obj, name) {
            console.log('read request to ' + name + ' property');
            if (name == 'test_test') return 1234;
            else return 'Meh';
        },
        set: function(obj, name, value) {
            console.log('write request to ' + name + ' property with ' + value + ' value');
        },
    }
);

console.log(p.test_test);
console.log(p.test);
p.qqq = 'test'; 
```

结果：

```
read request to test_test property
1234
read request to test property
Meh
write request to qqq property with test value 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T00:17:04.547

```
var test = {};

Object.defineProperty(test, "hello", {
    get : function () {
        return this._hello;
    },
    set : function (val) {
        alert(val);
        this._hello = val;
    }
});

test.hello = "world"; 
```

类似的东西。但它不适用于旧浏览器。

您可以在这里找到更多选项：[http ://robertnyman.com/javascript/javascript-getters-setters.html](http://robertnyman.com/javascript/javascript-getters-setters.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-19T00:19:20.640

如果您真的坚持使用`test.hello = "world"`语法来检测**现有属性**的更改，那么您将不得不等待几年`Object.watch`才能成为下一个 EcmaScript 标准的一部分。

幸运的是，您可以在 EcmaScript 5 中使用`Object.defineProperty`. [Eli Gray 做了一个很好的`Object.watch`polyfill](https://gist.github.com/384583)，你可以这样称呼它：

```
var test = {};
test.watch("hello", function(propertyName, oldValue, newValue) {
    console.log(propertyName + " has been set to " + newValue);
});
test.hello = "world"; // triggers the watch handler 
```

您也可以修改他的代码以在内部触发不同的处理程序`getter`，以便检测属性访问。

不幸的是，[浏览器支持仅限于现代浏览器](http://kangax.github.com/es5-compat-table/)，包括 Internet Explorer 9、Firefox 4、Chrome、Opera 12 和 Safari 5。

如果您想在设置**新属性**时触发处理程序，您将遇到更多麻烦。您能做的最好的事情就是将您的对象包装在[代理](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Proxy)中并放置一个`set`陷阱。然后，您可以通过测试是否`this.getOwnPropertyDescriptor(name)`返回“真实”值来检测该属性是否已经存在。虽然代理 API 是非常实验性的，只有少数浏览器提供了原型实现来玩。您可能需要等待相当长的一段时间才能获得完整的 API 并提供不错的浏览器支持。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T23:58:05.293

您需要一个提供键值观察和绑定的库。

[ember-metal 就是这样一个库。](http://toolbox.no.de/packages/ember-metal)

基本上你创建对象，你可以在这些对象的属性上注册观察者。

```
var obj = Em.Object.create({
   val: null
   valDidChange:function(){...}.observes('val')
}); 
```

valDidChange 将在`val`属性更改时触发，因此

```
obj.set('val', 'newValue'); 
```

将导致观察者开火。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T23:59:37.040

这样的事情呢？[这是一个jsfiddle。](http://jsfiddle.net/lbstr/xKDRF/)

```
var objectManager = function(obj, setCallback){
    this.obj = obj;
    this.setCallback = setCallback;
};

objectManager.prototype.setProperty = function(prop, value){
    this.obj[prop] = value;
    this.setCallback(prop);
};

objectManager.prototype.getObj = function(){
    return this.obj;
};

// USAGE:
var testMgr = new objectManager({}, function(prop){
    console.log(name + ' has been set.'); 
});
testMgr.setProperty("hello", "world"); //should log "hello has been set."; 
```

# c++ - 如何遵循此链接器错误？

> ID：11552066
> 
> 赞同：-1
> 
> 时间：2012-07-18T23:54:45.293
> 
> 标签：c++, visual-studio-2008, linker-errors, unresolved-external, lnk2001

我正在做我的第一次实习，仍然试图在 Visual Studio 2008 上[编译这个可怕的东西](https://stackoverflow.com/questions/11478887/unresolved-externals-nightmare)。我花了一个星期的时间来玩弄 IDE 设置和 Windows SDK 安装，但我认为我不会做任何事情在这个方向上取得更大进展。每个人都在这里度假，我没有高级工程师可以求助。帮助我 Stack Overflow，你是我唯一的希望！

今天，我正在尝试跟踪特定的错误，所以我知道*为什么*一切都失败了。也许那时我会更好地了解如何解决它。在过去的几个小时里，我一直在研究这个：

`6>ResizableLib.lib(ResizablePage.obj) : error LNK2001: unresolved external symbol "public: virtual int __thiscall CWnd::Create(char const *,char const *,unsigned long,struct tagRECT const &,class CWnd *,unsigned int,struct CCreateContext *)" (?Create@CWnd@@UAEHPBD0KABUtagRECT@@PAV1@IPAUCCreateContext@@@Z)`

我的理解是在我正在使用的 ResizableLib 项目中找不到 CWnd::Create 函数。我想我会找到它被调用的文件，并跟踪包含以查看它是否应该在被调用的位置定义 CWnd::Create。我首先在整个项目 (alt+E+F+I) 中搜索 Create( 因为我认为这将获取调用 Create 函数的每个实例。我发现了其他几个以 Create 结尾的函数调用，但只有一个似乎正在调用 Create 函数本身：

`ResizableGrip.cpp(127): BOOL bRet = m_wndGrip.Create(WS_CHILD | WS_CLIPSIBLINGS`

所以...我打开了 ResizableGrip.cpp 并查看了包含的内容。该文件的第一行是：

`#include "stdafx.h"`

我想我会去检查那个文件，看看是否有 CWnd::Create 的函数声明，或者可能是它的某种继承版本。包含这个文件没有预处理条件（因为在这个程序中的许多其他点），所以我认为可以肯定地说 stdafx.h 将被包含。为了弄清楚*哪个*将包含 stdafx.h 文件（什么是 stdafx.h 文件通常用于什么？我到处都能看到它们！），我首先查看了与 ResizableGrip.cpp 文件相同的目录，因为我相信编译器首先看起来在检查项目中的其他包含路径之前，与包含文件位于同一目录中，最后是主要 Visual Studio VC++ 设置中列出的包含路径。它是否正确？无论如何，在同一目录中有一个 StdAfx.h 文件，所以我断定这将是包含在内的文件。文件的前几行如下所示：

```
#if !defined(AFX_STDAFX_H__0A781DD9_5C37_49E2_A4F5_E517F5B8A621__INCLUDED_)
#define AFX_STDAFX_H__0A781DD9_5C37_49E2_A4F5_E517F5B8A621__INCLUDED_
#pragma message("StdAfx CommonClasses/ResizableLib")
#ifdef INC_DEBUG
#pragma message("In ResizeLib::StdAfx.h") 
#endif

#if _MSC_VER > 1000
#pragma once
#endif // _MSC_VER > 1000

#if _MSC_VER >= 1300
#define  WINVER      0x0500
#define _WIN32_WINNT 0x0500
#endif

#define VC_EXTRALEAN        // Exclude rarely-used stuff from Windows headers

#include <afxwin.h>         // MFC core and standard components
#include <afxext.h>         // MFC extensions
#ifndef _AFX_NO_AFXCMN_SUPPORT
#include <afxcmn.h>         // MFC support for Windows Common Controls
#endif // _AFX_NO_AFXCMN_SUPPORT 
```

我承认我并不完全理解这里发生的所有预处理器的事情，但由于没有围绕 #include 的条件，我假设它也被包含在内。项目目录中没有 afxwin.h 文件，所以我查看了项目的附加包含。唯一指定的查看位置是 ....\COMMON，所以我去了两个目录，找到了 COMMON 文件夹，然后查找 afxwin.h。那里什么都没有，所以我查看了 VC++ 目录包含的 IDE 设置。第一个清单是： $(WindowsSdkDir)\include 所以我查找了 WindowsSdkDir 环境变量，它当然不存在。我也检查了注册表。没有骰子。最终我发现您可以通过单击其中一个省略号 (... ) 出现在项目配置窗口中文本字段的最右端，当您单击它们并展开宏窗格时会出现这些窗口。通过这样做，我发现 $(WindowsSdkDir) 指向：C:\Program Files\Microsoft SDKs\Windows\v6.0A\ 所以我去了那里，打开了 Include 文件夹，并没有找到 afxwin.h 文件。$(FrameworkSDKDir)include 指向与 $(WindowsSdkDir)\include 相同的位置，因此我继续查看 Visual Studio VC++ 目录包含列表中的下一行：$(VCInstallDir)atlmfc\include 解析为 C:\Program Files\ Microsoft Visual Studio 9.0\VC\atlmfc\include\ 在那里我终于找到了 afxwin.h。在这个文件中，最后有一个名为 Cwnd 的类，其中定义了一个名为 Create 的函数：

`virtual BOOL Create(LPCTSTR lpszClassName, LPCTSTR lpszWindowName, DWORD dwStyle, const RECT& rect, CWnd* pParentWnd, UINT nID, CCreateContext* pContext = NULL);`

我不知道这些参数是什么，但我假设这是链接器最初抱怨的函数的一个极其重新定义的版本：

`CWnd::Create(char const *,char const *,unsigned long,struct tagRECT const &,class CWnd *,unsigned int,struct CCreateContext *)`

否则，编译器不会在链接器接管之前将其作为函数的不同版本捕获吗？实际上，现在我考虑了一下（这就是我发帖的全部原因），我想我所做的只是遍历代码，就像解决编译器错误一样。我做对了吗？这东西是个怪物，我只是在这里猜测。

再说一次，就像标题所说的那样，**你应该如何跟踪链接器错误？** 是否有与我在这里所做的类似的过程？[MSDN 文章](http://msdn.microsoft.com/en-us/library/f6xx1b1z%28v=vs.90%29.aspx)听起来像是在代码正常工作并且编译器以某种方式设法丢失 .obj 文件或 .lib 文件时发生此错误。我怎样才能让它再次指向正确的地方？

呃，-亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T00:09:55.023

链接器错误意味着它*找到了标头*但找不到实现（obj 或 lib）。检查标头是否存在毫无意义-您的代码已编译，因此编译器找到了标头。

看起来您需要**链接到 MFC**（即包含 CWnd 实现的库）。

在您的项目属性中，设置：

```
General > Use of MFC > Use MFC in a Shared DLL 
```

至于stdafx.h，它是一个*预编译的头文件*。您可以自己阅读这些内容。;) 如果您不想要它，您可以在项目属性中将其关闭：

```
C/C++ > Precompiled Headers > Precompiled Header > Not Using Precompiled Headers 
```

# ios - 如何读取文件和 URL（.plist 或 .txt）

> ID：11552070
> 
> 赞同：0
> 
> 时间：2012-07-18T23:54:58.800
> 
> 标签：ios, xcode, nsdata, nsurl

我需要读取一个文件。plist 或。来自网址的txt

例如。

[http://www.nordenmovil.com/BuscadorTopTen/carros.plist](http://www.nordenmovil.com/BuscadorTopTen/carros.plist)

[http://www.nordenmovil.com/BuscadorTopTen/texto.txt](http://www.nordenmovil.com/BuscadorTopTen/texto.txt)

```
NSString * path = @ "www.nordenmovil.com/BuscadorTopTen/carros.plist";
     NSError * error;
     NSString * stringFromFileAtPath = [[NSString alloc]
                                       initWithContentsOfFile: path
                                       encoding: NSUTF8StringEncoding
                                       error: & error];
     if (stringFromFileAtPath == nil) {
         / / An error occurred
         NSLog (@ "Error reading file at% @ \ n% @",
               path, [error localizedFailureReason]);
     }
     NSLog (@ "% @", stringFromFileAtPath); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T00:18:49.407

所以你使用 NSURLConnection，你给它 URL，你得到一个数据对象。然后，您需要将该对象转换为您可以处理的东西——也就是说，您可以找到可以将该对象转换为所需格式的 iOS 类。假设数据是图像。然后你会使用：

[UIImage imageWithData:];

它与所有其他对象相似

# zend-framework - 验证默认值

> ID：11552071
> 
> 赞同：0
> 
> 时间：2012-07-18T23:55:25.523
> 
> 标签：zend-framework

我有一个由选择/下拉列表组成的表单。我已将它们的默认值设置为-1。提交表单时，我想验证提交的值不等于默认值。我试过`setRequired(true)`了，但据我所知，这只是添加`notEmpty`验证器的一种方便方式，这并不是我真正想要的。

这是我的表格的一部分：

```
 $select = new Zend_Form_Element_Select('myselect');
    $select->setMultiOptions(array(
                        '-1' => 'Gender',
                        '0' => 'Female',
                        '1' => 'Male'
                    ))
                    ->addValidator(new Zend_Validate_Int(), false);

    $this->setDefaults(array('myselect' => -1)); 
```

这是我的控制器：

```
if ($this->getRequest()->isPost()) {
            $form = new My_Form_Contact();

            if ($form->isValidPartial(array('myselect' => $this->getRequest()->getPost('myselect')))) {
                // "myselect" is valid
            } 
```

我需要使用该`isValidPartial`方法，因为我需要使用不同的逻辑，具体取决于哪些元素的值与其默认值不同。我想我需要的是一个 notEqual 验证器，但我找不到。我知道可以制作自己的验证器，但我想先问问是否有更简单的方法。我也看过`Zend_Validate_Identical`，但我认为在这种情况下我不能使用它。

**总结一下：**如果提交的值不等于默认值，我只希望我的选择能够成功验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T00:53:36.903

最简单的解决方案是使用空字符串作为默认值：

```
$select->setMultiOptions(array(
                    '' => 'Gender',
                    '0' => 'Female',
                    '1' => 'Male'
                ))
                ->addValidator(new Zend_Validate_Int(), false)
                ->addValidator(new Zend_Validate_NotEmpty(), false);

$this->setDefaults(array('myselect' => '')); 
```

但我猜你已经想到了这一点，并且出于某种原因打折了。

因此，下一个最简单的方法是使用`GreaterThan()`：

```
$select->setMultiOptions(array(
                    '-1' => 'Gender',
                    '0' => 'Female',
                    '1' => 'Male'
                ))
                ->addValidator(new Zend_Validate_Int(), false)
                ->addValidator(new Zend_Validate_GreaterThan(-1), false);

$this->setDefaults(array('myselect' => '-1')); 
```

我希望这就是你要找的。

# hadoop - 当节点数少于复制因子时，HDFS 如何复制？

> ID：11552075
> 
> 赞同：2
> 
> 时间：2012-07-18T23:55:33.367
> 
> 标签：hadoop, hdfs

例如，如果一个 Hadoop 集群由 2 个 DataNode 组成，并且 HDFS 复制因子设置为默认值 3，那么文件复制方式的默认行为是什么？

根据我的阅读，HDFS 似乎基于机架感知，但是对于这样的情况，有谁知道它是如何确定的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T00:00:40.023

它将认为这些块复制不足，并且会不断抱怨，并且会永久尝试将它们带到预期的复制因子。

HDFS 系统有一个参数（复制因子 - 默认为 3），它告诉名称节点每个块应该如何复制（在默认情况下，每个块应该在整个集群中复制 3 次，根据给定的副本放置策略） . 在系统设法按照复制因子指定的次数复制每个块之前，它将继续尝试这样做。

# android - 当我们使用 SoundPool 在单独的线程中播放音乐时弹出 ANR

> ID：11552077
> 
> 赞同：4
> 
> 时间：2012-07-18T23:55:44.760
> 
> 标签：android, soundpool

当我们使用 Thread 播放音乐时，该项目仍然会弹出 ANR。

--这里有 ANR keyDispatchingTimedOut 日志和 SoundManager 供参考----- -- 日志开始 ---：

```
DALVIK THREADS:
(mutexes: tll=0 tsl=0 tscl=0 ghl=0 hwl=0 hwll=0)
"main" prio=5 tid=1 NATIVE
  | group="main" sCount=1 dsCount=0 obj=0x40022300 self=0xce70
  | sysTid=2144 nice=0 sched=0/0 cgrp=default handle=-1345006496
  at android.os.MessageQueue.nativePollOnce(Native Method)
  at android.os.MessageQueue.next(MessageQueue.java:119)
  at android.os.Looper.loop(Looper.java:110)
  at android.app.ActivityThread.main(ActivityThread.java:3683)
  at java.lang.reflect.Method.invokeNative(Native Method)
  at java.lang.reflect.Method.invoke(Method.java:507)
  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:864)
  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:622)
  at dalvik.system.NativeStart.main(Native Method)

"SoundPoolThread" prio=5 tid=11 NATIVE
  | group="main" sCount=1 dsCount=0 obj=0x405b84d0 self=0x236e20
  | sysTid=2155 nice=0 sched=0/0 cgrp=default handle=2170064
  at dalvik.system.NativeStart.run(Native Method)

"SoundPool" prio=5 tid=10 NATIVE
  | group="main" sCount=1 dsCount=0 obj=0x405ba348 self=0x212120
  | sysTid=2154 nice=0 sched=0/0 cgrp=default handle=2189688
  at dalvik.system.NativeStart.run(Native Method)

"Timer-0" prio=5 tid=9 TIMED_WAIT
  | group="main" sCount=1 dsCount=0 obj=0x4056c488 self=0x212af8
  | sysTid=2152 nice=0 sched=0/0 cgrp=default handle=2151992
  at java.lang.Object.wait(Native Method)
  - waiting on <0x4056c488> (a java.util.Timer$TimerImpl)
  at java.lang.Object.wait(Object.java:395)
  at java.util.Timer$TimerImpl.run(Timer.java:238)

"Binder Thread #2" prio=5 tid=7 NATIVE
  | group="main" sCount=1 dsCount=0 obj=0x40514f50 self=0x1aa300
  | sysTid=2150 nice=0 sched=0/0 cgrp=default handle=590104
  at dalvik.system.NativeStart.run(Native Method)

"Binder Thread #1" prio=5 tid=6 NATIVE
  | group="main" sCount=1 dsCount=0 obj=0x40514e88 self=0x197748
  | sysTid=2149 nice=0 sched=0/0 cgrp=default handle=1667104
  at dalvik.system.NativeStart.run(Native Method)

"Compiler" daemon prio=5 tid=5 VMWAIT
  | group="system" sCount=1 dsCount=0 obj=0x40511908 self=0x197610
  | sysTid=2148 nice=0 sched=0/0 cgrp=default handle=1667040
  at dalvik.system.NativeStart.run(Native Method)

"Signal Catcher" daemon prio=5 tid=4 RUNNABLE
  | group="system" sCount=0 dsCount=0 obj=0x40511848 self=0x198000
  | sysTid=2147 nice=0 sched=0/0 cgrp=default handle=586176
  at dalvik.system.NativeStart.run(Native Method)

"GC" daemon prio=5 tid=3 VMWAIT
  | group="system" sCount=1 dsCount=0 obj=0x405117a0 self=0x196760
  | sysTid=2146 nice=0 sched=0/0 cgrp=default handle=592768
  at dalvik.system.NativeStart.run(Native Method)

"HeapWorker" daemon prio=5 tid=2 VMWAIT
  | group="system" sCount=1 dsCount=0 obj=0x405116e8 self=0x8ff80
  | sysTid=2145 nice=0 sched=0/0 cgrp=default handle=592704
  at dalvik.system.NativeStart.run(Native Method) 
```

* * *

// 下面是我的 SoundManager 类供参考。

```
public class SoundManager {

private static final String TAG = "SoundManager";
private static boolean DEBUG = IConstants.DEBUG;

private SoundPool soundPool;
private HashMap<String, Integer> mapSound = new HashMap<String, Integer>();
private AudioManager audioManager;
private String inUseThemePath;
private int currentPlayStreamID;
private int currentPlayNonstop = 0;

private SoundPlayTask soundPlayTask = null;

public SoundManager(Context context) {
    audioManager = (AudioManager) context.getSystemService(Context.AUDIO_SERVICE);
}

public void playSound(String soundFile, int loop, int nonstop) {
    if (soundPool == null)
        return;

    if (DEBUG) Log.i(TAG, "playSound enter");
    if (soundPlayTask != null) {

        soundPlayTask.cancel();
        try {
            soundPlayTask.join(100);
            if (soundPlayTask.isAlive()) {
                if (DEBUG) Log.i(TAG, "force stop the thread");
                soundPlayTask.interrupt();
            }
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        soundPlayTask = null;
    }
    soundPlayTask = new SoundPlayTask(this, soundFile, loop, nonstop);
    soundPlayTask.start();
             Log.i(TAG, "playSound leave");
}

public void stopSound() {

    if (soundPool == null)
        return;
    if (soundPlayTask == null)
        return;

    soundPlayTask.cancel();
    try {

        soundPlayTask.join(100);
        if (soundPlayTask.isAlive()) {
            if (DEBUG) Log.i(TAG, "force stop the thread");
            soundPlayTask.interrupt();
        }

    } catch (InterruptedException e) {
        e.printStackTrace();
    }
    soundPlayTask = null;

    new SoundStopTask(this, currentPlayStreamID, currentPlayNonstop).start();

    Log.i(TAG, "stopSound leaving");
}

public void initThemeSound(String inUsethemePath) {
    this.inUseThemePath = inUsethemePath;
    soundPool = new SoundPool(3, AudioManager.STREAM_MUSIC, 0);
}

public void release() {
    if (soundPool != null) {
        for (String soundFile : mapSound.keySet()) {
            Integer soundID = mapSound.get(soundFile);
            soundPool.unload(soundID);
        }
        soundPool.stop(currentPlayStreamID);
        soundPool.release();
    }
    mapSound.clear();

    if (soundPlayTask != null)
        soundPlayTask.cancel();
    soundPlayTask = null;

    soundPool = null;
    currentPlayStreamID = 0;
    inUseThemePath = null;
}

public static class SoundStopTask extends Thread {
    private SoundManager soundManager;
    private int currentPlayStreamID;
    private int nonstop;
    public SoundStopTask(SoundManager soundManager, int currentPlayStreamID, int nonstop) {
        this.soundManager = soundManager;
        this.currentPlayStreamID = currentPlayStreamID;
        this.nonstop = nonstop;
    }

    public void run() {
        synchronized (soundManager) {
            Log.i(TAG, "SoundStopTask to cancel the sound " + currentPlayStreamID + " in mainthread" + " currentPlayNonstop=" + nonstop);
            if (nonstop == 0 && currentPlayStreamID != 0) {
                if (DEBUG) Log.i(TAG, "stopSound canceled the sound ");
                soundManager.soundPool.stop(currentPlayStreamID);
                currentPlayStreamID = 0;
            }
        }
    }
}

public static class SoundPlayTask extends Thread {
    private SoundManager soundManager;
    private boolean isCancelled = false;
    private String soundFile;
    private int loop;
    private int nonstop;

    public SoundPlayTask(SoundManager soundManager, String soundFile, int loop, int nonstop) {
        this.soundManager = soundManager;
        this.soundFile = soundFile;
        this.loop = loop;
        this.nonstop = nonstop;
    }

    public void cancel() {
        isCancelled = true;
    }

    @Override
    public void run() {
        if (DEBUG) Log.i(TAG, "enter doInBackground");

        synchronized (soundManager) {
            int ringerMode = soundManager.audioManager.getRingerMode();
            if (ringerMode == AudioManager.RINGER_MODE_SILENT || ringerMode == AudioManager.RINGER_MODE_VIBRATE)
                return;

            if (isCancelled)
                return;
            Log.i(TAG, "doInBackground begin to play sound");

            soundManager.currentPlayNonstop = nonstop;

            Integer soundID;
            soundID = soundManager.mapSound.get(soundFile);
            if (soundID == null) {
                soundID = soundManager.soundPool.load(soundManager.inUseThemePath + soundFile, 1);
                soundManager.mapSound.put(soundFile, soundID);
            }

            if (soundID == 0)
                return;

            Log.i(TAG, "doInBackground get the sound id " + soundID);

            if (isCancelled)
                return;

            float actualVolume = (float) soundManager.audioManager.getStreamVolume(AudioManager.STREAM_MUSIC);
            float maxVolume = (float) soundManager.audioManager.getStreamMaxVolume(AudioManager.STREAM_MUSIC);
            float volume = actualVolume / maxVolume;

            soundManager.currentPlayStreamID = soundManager.soundPool.play(soundID, volume, volume, 1, 0-loop, 1f);

            if (isCancelled) {
                if (DEBUG) Log.i(TAG, "doInBackground begin to cancel after begining to play " + soundManager.currentPlayStreamID);
                if (soundManager.currentPlayNonstop == 0 && soundManager.currentPlayStreamID != 0) {soundManager.soundPool.stop(soundManager.currentPlayStreamID);
                    soundManager.currentPlayStreamID = 0;
                }
            }
        }

    }
}
} 
```

# iphone - 关闭卷曲的页面

> ID：11552078
> 
> 赞同：0
> 
> 时间：2012-07-18T23:55:47.313
> 
> 标签：iphone, objective-c, ios, page-curl

从我的主要观点来看，我有一个按钮，按下该按钮会触发具有卷曲效果的模态转场，这反过来会显示 3 个按钮，它们都具有模态转场。当按下这些按钮中的任何一个时，它们会显示另一个视图，但我似乎无法摆脱卷曲的视图。感谢您在加载新视图之前摆脱卷曲视图的任何帮助。

再会！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T00:00:30.643

如果它是模态的，您只需调用`[self dismissModalViewControllerAnimated:YES];`要关闭的视图类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T01:02:59.893

由于 ios5`dismissModalViewControllerAnimated`已弃用，请使用以下命令：

```
[self dismissViewControllerAnimated:TRUE completion:^{
       //completion or NULL
 }]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-26T12:54:21.890

尝试这个

```
[self.flipViewOneController.view removeFromSuperview]; 
```

# node.js - nodester 节点版本错误

> ID：11552079
> 
> 赞同：1
> 
> 时间：2012-07-18T23:55:55.933
> 
> 标签：node.js, npm, nodester

每次我尝试安装一个模块或列出已安装的模块时`nodester npm`，我都会得到这个。

```
nodester Error: npm doesn't work with node v0.8.1
nodester Required: node@0.4 || 0.5 || 0.6
nodester     at /usr/lib/node_modules/npm/bin/npm-cli.js:57:23
nodester     at Object.<anonymous> (/usr/lib/node_modules/npm/bin/npm-cli.js:77:
3)
nodester     at Module._compile (module.js:449:26)
nodester     at Object.Module._extensions..js (module.js:467:10)
nodester     at Module.load (module.js:356:32)
nodester     at Function.Module._load (module.js:312:12)
nodester     at Module.runMain (module.js:487:10)
nodester     at process.startup.processNextTick.process._tickCallback (node.js:2 
```

有谁知道这条消息的真正含义？我似乎找不到任何关于它的信息。它正在谈论根据路径判断的节点服务器上的 npm 版本（我在 Windows 上）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:34:56.060

我最近在我的 Ubuntu 设置中遇到了这个问题，基本上我更新了 NPM 并解决了这个问题。对我来说，似乎我需要配置 NPM 以使用安装的当前版本的节点。希望这可以帮助其他偶然发现这篇文章的人，因为我在任何地方都在努力寻找答案。

# asp.net-mvc - MVC、RAD 和视图设计工具

> ID：11552080
> 
> 赞同：2
> 
> 时间：2012-07-18T23:56:12.727
> 
> 标签：asp.net-mvc, rad

我们公司需要构建一个包含 50 多种表格的基于 Web 的业务线解决方案。其中很多将是中央数据库上的 CRUD。到目前为止，我们之前还没有处理过网络空间，所以这对我们来说都是相对较新的。

目前我们正计划将 ASP.net MVC 用于：

*   可测试性（单元测试等）
*   关注点分离
*   更好的长期维护（根据我从其他帖子中收集到的信息，这可能成为 WebForms 的一个问题。）

然而，我们遇到了障碍。经过对各种论坛和教程视频的大量研究，我们意识到 ASP.net MVC 不支持拖放设计环境。

我们已经研究过在 ASP.net MVC 中使用代码模板等，这些肯定会加快在代码中构建视图的速度。事实上，大多数论坛都建议使用代码模板等。

但是，我们公司的应用程序构建和修改通常具有非常快的周转率。有时我们需要在接下来的一天或一周内推出更新。

我们觉得没有视图设计工具可能会在某种程度上阻碍我们。

到目前为止，我们已经考虑/调查了以下内容：

*   用代码在 Visual Studio 中构建。在第二个屏幕上刷新在 IDE 旁边运行的网站。调整冲洗并重复。

*   使用 Microsoft Expression 产品。（表达网络等）。构建视图等然后在 Visual Studio 中重新加载以处理后面的代码。但是我想我在这个不是 ASP.net MVC 中测试了 WebForms。

*   使用诸如 Dreamweaver（或其他）之类的网页设计工具，然后将用于视图/页面的 html 复制到 Visual Studio 中，并在后面连接代码等。

*   改用 LightSwitch（我们不想要 silverlight 的要求，这似乎对我们的要求过于简单，所以这是不可能的）

我们认为也许其他人也有类似的经历，可以分享他们的想法。

所以我的问题是，如果你们中的任何人有过类似的情况，你们使用什么工具来设计 ASP.net MVC 视图，同时保持快速轻松地构建新 UI 或进行调整的能力？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T14:14:07.837

在我看来，如果您遵循一些提示，在代码中构建 UI 比在拖放环境中构建 UI 更快：

## 使用表格进行布局

我知道语义狂热者会因为这样说而杀了我，但是您的表单会看起来更好，并且您不必在多个浏览器中与 CSS 作斗争。节省大量时间。

## 让你的观点尽可能赤裸裸

对于裸体，我的意思是让你的输入看起来像：

```
<tr>
    <th>@Html.LabelFor(model => model.Name)</th>
    <td>@Html.EditorFor(model => model.Name)
        @Html.ValidationMessageFor(model => model.Name)
    </td>
</tr> 
```

依靠 MVC `EditorFor`、 Editor Templates 和 UIHint 为您的应用程序制作标准输入类型。在我的应用程序中，我有文本、十进制数字、整数、日期、时间、月份、注释 (textarea) 的模板。我已经调整了模板以允许更多属性用于自定义外观。

## 使用静态 SelectList 构建器

这以某种方式打破了 MVC 规则，但它也节省了大量时间，并且避免了多次处理控制器中的 SelectList

我通常有这种代码

```
public class ProductType
    public static SelectList GetSelectList(int? ValorActualSeleccionado, string IncludeAllItemsText = "") {
        var lista = DbHelper.CurrentDb().Fetch<ProductType>(BaseQuery());
        if (!IncludeAllItemsText.IsEmpty()) {
            lista.Insert(0, new ProductType { Name = IncludeAllItemsText, ProductTypeID = 0 });
        }
        return new SelectList(lista, "ProductTypeID", "Name", ValorActualSeleccionado);
    } 
```

在视图中：

```
@Html.DropDownList("ProductTypeID", ProductType.GetSelectList(Model.ProductTypeID)) 
```

## 对添加和编辑使用相同的视图

您不需要查看收集几乎相同的数据，只需将其添加到您的控制器：

```
 public ViewResult NewProduct() {
        var VM = new Product();
        return View("Edit", VM );
    } 
```

这到您的编辑视图：

```
@using (Html.BeginForm("Edit", "Product")) { 
```

并在同一位置添加要添加或编辑的逻辑。

## 使用 jQuery

使用 jQuery，您将能够在系统范围内插入一些插件（如 Numeric 或 Date Dropdown），而无需更改视图中的代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:22:48.150

如果您需要良好的拖放体验并且没有 webdev 经验，我会继续使用 rad-controlls 和老式 ASP.NET。

如果您更接近 HTML、Javascript 和 HTTP，则 ASP.NET MVC 会大放异彩。在不了解 Web 的情况下，您可以使用老式 ASP.NET 和 rad-controlls 走得很远。

# ruby - 需要'command_line_argument_parser'？

> ID：11552082
> 
> 赞同：0
> 
> 时间：2012-07-18T23:56:17.707
> 
> 标签：ruby, rubygems, gem

我正在关注一个简​​单的网络爬虫教程（http://www.skorks.com/2009/07/how-to-write-a-web-crawler-in-ruby/），其中一条是到`require 'command_line_argument_parser'`.

我的系统无法找到 gem。这篇文章写于 2009 年。没有 gem，我从这家伙那里下载的代码不起作用。

知道如何进行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T00:03:36.740

如果代码的重点是 Web 爬虫，那么 cli arg 解析器可能可以被关闭而不会造成太大的麻烦。我只会使用 Ruby 的内置`optparse`库。[http://ruby-doc.org/stdlib-1.9.3/libdoc/optparse/rdoc/OptionParser.html](http://ruby-doc.org/stdlib-1.9.3/libdoc/optparse/rdoc/OptionParser.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T00:09:48.440

我`command_line_argument_parser`在本教程的[ZIP 存档中找到。](http://www.skorks.com/wp-content/uploads/2009/07/web-crawler.zip)如果您已将文件提取到与爬虫相同的目录中，但仍然无法正常工作，请尝试将 require 行更改为[`require_relative`](https://stackoverflow.com/questions/3672586/what-is-require-relative-in-ruby).

如果您有时间，我还建议您切换到 optparse，它更强大。

# jquery - 为什么这个 Flexslider 不工作？

> ID：11552087
> 
> 赞同：0
> 
> 时间：2012-07-18T23:57:12.630
> 
> 标签：jquery, wordpress, slider, flexslider

我对此有点困惑。我已经按顺序将 flexslider.css、jquery.flexslider.js 和 jquery 初始化添加到这个 wordpress 中，但它的行为就好像根本没有 jquery。

[http://www.brainbuzzmedia.com/themes/framework/](http://www.brainbuzzmedia.com/themes/framework/)

图像只是堆叠在一起。谁能告诉我出了什么问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T00:01:02.083

我认为页面上的某个地方`jQuery.noConflict`正在被调用。

将 flexslider 调用替换为以下调用：

```
<script type="text/javascript">
   (function($) {
      $(window).load(function(){
      $('.flexslider').flexslider({
        animation: "slide",
        start: function(slider){
          $('body').removeClass('loading');
        }
      });
    });
   })(jQuery);

</script> 
```

# facebook - 流帖子上的验证码

> ID：11552088
> 
> 赞同：2
> 
> 时间：2012-07-18T23:57:18.127
> 
> 标签：facebook, facebook-wall

截至昨晚，Facebook 似乎会自动为我的应用程序中的任何流帖子弹出验证码。这是针对我自己的墙以及我的朋友墙的流式帖子。所有流帖子都链接回[http://apps.facebook.com/fortyhumans](http://apps.facebook.com/fortyhumans)，并带有一些用于分析跟踪的附加参数。所以我不认为我违反了链接必须指向应用程序画布或网站 url 的要求。

我正在使用以下代码来发布帖子。

```
 FB.ui(
    {
        method: 'stream.publish',
        message: '',
        attachment: {
            name: sName,
            caption: sCaption,
            description: (sDescription),
            href: sHrefLink,
            media: [{'type':'image', 'src':sImgSrc, 'href':sHrefLink}]
            },
        action_links: [
            { text: sHrefTitle, href: sHrefLink }
        ],
        user_prompt_message: sUserPrompt
    }, 
```

有没有办法避免这个验证码弹出？我应该使用不同的 api 发布吗？验证码的用户体验非常差。即使在我自己的墙上发帖也会弹出验证码。

我在以前的帖子中读到，有些人改用 bit.ly url 或类似的东西。但这似乎违反了流帖子中的链接必须指向画布或网站 url 的要求。

任何帮助将不胜感激，或者如果这不是正确的地方，那么应该在哪里发布这样的问题。

# java - 更改图像不透明度

> ID：11552092
> 
> 赞同：14
> 
> 时间：2012-07-18T23:58:00.503
> 
> 标签：java, image, animation, resize, opacity

在一个项目中，我想同时调整图像的大小和不透明度。到目前为止，我认为我已经缩小了大小。我使用这样定义的方法来完成调整大小：

```
public BufferedImage resizeImage(BufferedImage originalImage, int type){

    initialWidth += 10;
    initialHeight += 10;
    BufferedImage resizedImage = new BufferedImage(initialWidth, initialHeight, type);
    Graphics2D g = resizedImage.createGraphics();
    g.drawImage(originalImage, 0, 0, initialWidth, initialHeight, null);
    g.dispose();

    return resizedImage;
} 
```

我从这里得到了这个代码。我找不到解决方案是改变不透明度。这就是我想知道该怎么做（如果可能的话）。提前致谢。

**更新**：

我尝试使用此代码显示内部和外部透明的圆形图片（见下图），并且变得越来越不透明，但它不起作用。我不确定出了什么问题。所有代码都在一个名为 Animation 的类中

```
public Animation() throws IOException{

    image = ImageIO.read(new File("circleAnimation.png"));
    initialWidth = 50;
    initialHeight = 50;
    opacity = 1;
}

public BufferedImage animateCircle(BufferedImage originalImage, int type){

      //The opacity exponentially decreases
      opacity *= 0.8;
      initialWidth += 10;
      initialHeight += 10;

      BufferedImage resizedImage = new BufferedImage(initialWidth, initialHeight, type);
      Graphics2D g = resizedImage.createGraphics();
      g.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_OVER, opacity));
      g.drawImage(originalImage, 0, 0, initialWidth, initialHeight, null);
      g.dispose();

      return resizedImage;

} 
```

我这样称呼它：

```
Animation animate = new Animation();
int type = animate.image.getType() == 0? BufferedImage.TYPE_INT_ARGB : animate.image.getType();
BufferedImage newImage;
while(animate.opacity > 0){

    newImage = animate.animateCircle(animate.image, type);
    g.drawImage(newImage, 400, 350, this);

} 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-19T00:05:33.773

首先确保您传递给方法的类型包含一个 alpha 通道，例如

```
BufferedImage.TYPE_INT_ARGB 
```

然后在绘制新图像之前，调用 Graphics2D 方法 setComposite，如下所示：

```
float opacity = 0.5f;
g.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_OVER, opacity)); 
```

这会将绘图不透明度设置为 50%。

# c - 为什么我需要 glut.h、glut32.lib、glut32.dll ALL 来编译一个 openGL 程序？

> ID：11552100
> 
> 赞同：0
> 
> 时间：2012-07-18T23:58:25.073
> 
> 标签：c, opengl, glut

据我所知，.lib 文件是某种编译文件，当然 dll 文件包含其中的所有函数。为什么我不能只使用 .lib 文件或 .dll 文件？为什么说明告诉我要获得所有三个？

顺便说一句，我们有一个“freeGLut”，openGL 文件不是免费的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T00:45:31.387

*   `glut32.h`是编译阶段使用的头文件
*   `glut32.lib`是链接器用来解析对库提供的函数和/或对象的引用的库文件`glut32`。当与 DLL 一起使用时，.lib 文件通常称为“导入库”，它包含链接器用来使可执行文件隐式引用 DLL 中的函数的信息，而不是实际代码，因此运行时加载程序也将加载 DLL在运行时加载可执行文件时。一些工具链提供了一个工具（通常称为`implib`），它可以使用 DLL 作为输入来生成导入库。
*   `glut32.dll`是在运行时用于在可执行时提供函数和对象的动态库。

一些工具（例如 GCC 工具链）可以直接使用 DLL 代替 .lib 文件 - 实际上提供了自己的`implib`功能。我不确定为什么微软在他们的工具中不支持这一点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T00:54:16.153

> 据我所知，.lib 文件是某种编译文件，当然 dll 文件包含其中的所有函数。

不，没那么简单。

DLL 是可执行二进制文件，减去启动入口点。DLL 导出一些符号，但这些符号没有特征，只是地址空间中的位置。编译器无法从标准 DLL（或 SO）中推断出每个符号的*签名。*为此，需要通过其他来源以某种方式告知签名。这是头文件 (.h)。

然而，为了真正有用，DLL 必须在执行时加载到进程中。为此，可执行文件需要增加附加信息，即要加载的 DLL。在 Windows 下，这是使用存根库 (.lib) 完成的，该库仅携带该 DLL 导入信息。在其他操作系统上，您可以通过将链接器指向该“DLL”来链接该“DLL”。

> 为什么我不能只使用 .lib 文件或 .dll 文件？

因为 .lib 不包含实际代码而只包含信息，所以要使用某个 DLL。并且因为 Microsoft 工具无法从目标 DLL 中提取其动态链接信息。

> 为什么说明告诉我要获得所有三个？

因为每个文件都有一个特定的功能，你需要这三个文件

*   获取函数签名 (.h)
*   告诉您的可执行文件加载某个 DLL (.lib)
*   并以 .dll 的形式获取实际的库

> 顺便说一句，我们有一个“freeGLut”，openGL 文件不是免费的吗？

GLUT 不是 OpenGL 的一部分。这是一个独立开发的库。此外，OpenGL 本身只是一个规范，没有“那个”OpenGL 源代码；只有特定的实现，其中*一些*是免费的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-19T00:48:16.490

GLUT 是一个可选组件。如果你的程序不使用它，你就不需要它。但是如果你使用它，你需要它`glut.h`是因为你的程序`#include`是它，你需要`glut32.lib`它是因为它是链接器用来建立可执行文件与 DLL 关系的[导入库。](https://en.wikipedia.org/wiki/Dynamic-link_library#Import_libraries)在编译或链接程序时不需要`glut32.dll`它（因为导入库用于此目的），但在*运行*程序时需要它，因为它包含程序正在调用的实际 GLUT 函数。

Freeglut 是原始 GLUT 的开源克隆，因为原始 GLUT 已过时，并且其许可证不允许其他人进行更改以改进它。

# python - Python 内存不足（使用后缀树）

> ID：11552103
> 
> 赞同：2
> 
> 时间：2012-07-18T23:58:47.327
> 
> 标签：python, memory-leaks, python-c-extension, suffix-tree, large-data

我在一些代码上遇到了一些麻烦。请记住，我是一个糟糕的程序员，所以我的解决方案可能不是很有说服力（这可能是我内存不足的原因 - 我有 4 GB 并且脚本会慢慢填充它）。

这就是问题所在。我在一个目录中有大约 3,500 个文件。每个文件由一行组成，该行可以包含相对较少或许多没有空格的字符（最小的文件为 200 字节，而最大的文件为 1.3 兆字节）。我想要做的是在设定长度的两个文件之间找到一个公共子字符串（在下面的代码中它是 13 个字符）。我一次做两个，因为我不是在所有这些中寻找一个共同的子字符串，而是在比较所有文件之前两个的组合。即，文件之间设置长度的任何公共子字符串，而不是所有文件共有的子字符串。

我使用了一个包装了 C 实现的后缀树模块（[在这里](http://www.daimi.au.dk/~mailund/suffix_tree.html)）。首先，我列出目录中的所有文件，然后查找两个文件的组合以覆盖所有组合，一次将两个文件传递给后缀树，然后查找作为公共子字符串的序列。

但是，我真的不知道为什么它会慢慢耗尽内存。我希望我们可以对代码进行修改，以便它以某种方式清除未使用内容的内存？显然，处理 3,500 个文件需要很长时间，但我希望无需增量填充 4 GB 内存就可以做到。任何帮助将不胜感激！这是我到目前为止的代码：

```
from suffix_tree import GeneralisedSuffixTree
from itertools import combinations
import glob, hashlib, os

alist = open('tmp.adjlist', 'w')

def read_f(f):
    f = open(f, "r")
    s = str(f.readlines())
    f.close()
    return s

def read_gs(a,b):
    s1 = read_f(a)
    s2 = read_f(b)
    print str(a) + ":" + str(hashlib.md5(s1).hexdigest()) + " --- " + str(b) + ":" + str(hashlib.md5(s2).hexdigest())
    return [s1,s2]

def build_tree(s):
    hlist = []

    stree = GeneralisedSuffixTree(s)

    for shared in stree.sharedSubstrings(13):
        for seq,start,stop in shared:
            hlist.append(hashlib.md5(stree.sequences[seq]).hexdigest())
        hlist = list(set(hlist))
        for h in hlist:
            alist.write(str(h) + " ")
        alist.write('\n')

glist = []

for g in glob.glob("*.g"):
    glist.append(g)

for a,b in list(combinations(glist, 2)):
    s = read_gs(a,b)
    build_tree(s)

alist.close()

os.system("uniq tmp.adjlist network.adjlist && rm tmp.adjlist") 
```

**更新#1**

这是更新的代码。我添加了 Pyrce 提出的建议。然而，在 jogojapan 发现 C 代码中的内存泄漏之后，鉴于这超出了我的专业知识范围，我最终采用了一种慢得多的方法。如果有人在这方面知识渊博，我真的很想知道如何修改 C 代码以修复内存泄漏或释放函数，因为我认为 Python 的 C 后缀树绑定非常有价值。在没有后缀树的情况下通过这个脚本运行数据可能需要几天时间，所以我绝对愿意看看是否有人有创造性的修复！

```
from itertools import combinations
import glob, hashlib, os

def read_f(f):
    with open(f, "r") as openf:
        s = str(openf.readlines())
    return s

def read_gs(a,b):
    s1 = read_f(a)
    s2 = read_f(b)
    print str(a) + ":" + str(hashlib.md5(s1).hexdigest()) + " --- " + str(b) + ":" + str(hashlib.md5(s2).hexdigest())
    return [s1,s2]

def lcs(S1, S2):
    M = [[0]*(1+len(S2)) for i in xrange(1+len(S1))]
    longest, x_longest = 0, 0
    for x in xrange(1,1+len(S1)):
        for y in xrange(1,1+len(S2)):
            if S1[x-1] == S2[y-1]:
                M[x][y] = M[x-1][y-1] + 1
                if M[x][y]>longest:
                    longest = M[x][y]
                    x_longest  = x
            else:
                M[x][y] = 0
    return S1[x_longest-longest: x_longest]

glist = glob.glob("*.g")

for a,b in combinations(glist, 2):
    s = read_gs(a,b)
    p = lcs(s[0],s[1])
    if p != "" and len(p) >= 13:
        with open("tmp.adjlist", "a") as openf:
            openf.write(hashlib.md5(s[1]).hexdigest() + " " + hashlib.md5(s[0]).hexdigest() + "\n")

os.system("uniq tmp.adjlist network.adjlist && rm tmp.adjlist") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T02:26:01.657

我有理由相信您使用的后缀树包内部存在内存泄漏。

**证据 1：**在 valgrind 中运行 python，然后运行这个简单的 Python 脚本

```
from suffix_trees import SuffixTree
t = SuffixTree("mississippi")
t = None 
```

报告此泄漏：

```
==8800== 1,413 (32 direct, 1,381 indirect) bytes in 1 blocks are definitely lost in loss record 1,265 of 1,374
==8800==    at 0x4A0884D: malloc (vg_replace_malloc.c:263)
==8800==    by 0xBE70AEC: make_helper (suffix_tree.c:193)
==8800==    by 0xBE704B2: SuffixTree_init (python_bindings.c:240)
==8800==    by 0x3F98C9867B: ??? (in /usr/lib64/libpython2.7.so.1.0)
==8800==    by 0x3F98C49A7D: PyObject_Call (in /usr/lib64/libpython2.7.so.1.0)
==8800==    by 0x3F98CD71D6: PyEval_CallObjectWithKeywords (in /usr/lib64/libpython2.7.so.1.0)
==8800==    by 0x3F98C5EB45: ??? (in /usr/lib64/libpython2.7.so.1.0)
==8800==    by 0x3F98C49A7D: PyObject_Call (in /usr/lib64/libpython2.7.so.1.0)
==8800==    by 0x3F98CD93F2: PyEval_EvalFrameEx (in /usr/lib64/libpython2.7.so.1.0)
==8800==    by 0x3F98CDDB2E: PyEval_EvalCodeEx (in /usr/lib64/libpython2.7.so.1.0)
==8800==    by 0x3F98C6D7B5: ??? (in /usr/lib64/libpython2.7.so.1.0)
==8800==    by 0x3F98C49A7D: PyObject_Call (in /usr/lib64/libpython2.7.so.1.0) 
```

**证据 2：**查看 suffix_tree.c 和 python_bindings.c 中的代码时，您会发现`make_helper()`为后缀树分配内存的函数（使用`malloc`），但`free`代码中没有任何地方。我专门查看了为 python_bindings 中定义的 Python 类型定义的分配和释放函数，但找不到树对象的任何函数。有一个用于节点对象，但这只会释放对象的 Python 包装器部分，而不是 C 中的底层结构。

**证据 3：** python_bindings.c 中 Python 对象的数据类型定义附有一条明显的注释：

```
/* FIXME: deallocation of this guy! */
static PyTypeObject SuffixTreeType = {
    PyObject_HEAD_INIT(NULL)
    .tp_name      = "_suffix_tree.SuffixTree",
    /* ... */
    .tp_new       = SuffixTree_new,
}; 
```

**建议：**您可能需要联系包的作者并让他们意识到问题。根据网页上的信息，他们已经在研究解决问题的方法，即理想情况下，树本身与其包含的节点对象之间应该存在循环依赖关系——这是一个相关问题，并且可能是程序的原因目前不执行任何解除分配。

由于您的目的可能不需要节点到树的依赖关系，因此您还可以通过在 python_bindings.c 中的树对象定义中添加一个释放函数来应用您自己的修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T00:34:02.167

我不能 100% 确定您的原始代码的逻辑是否完全符合您的意图——而且肯定有一个不断增长的列表，我认为您打算在其中重置。变量 hlist 不断被添加，而不是在“共享”的循环中。在该循环本地设置一个集合解决了这个问题。此外，您不需要列出一组列表，只需使用一个集合开始并迭代该集合。我建议更多地了解 Python 中的可迭代对象——其中几乎所有 Python 数据保存对象都是（可迭代的）。基本上你不需要 list() 那些对象，除非你需要一个特定的排序，即使那样你通常只使用 sort()。

下面的 build_tree 解决了这些问题，应该会显着减少你的内存占用——并希望阻止它不断增长。

```
def build_tree(s):
    stree = GeneralisedSuffixTree(s)

    for shared in stree.sharedSubstrings(13):
        hset = set()
        for seq,start,stop in shared:
            hset.add(hashlib.md5(stree.sequences[seq]).hexdigest())

        for h in hset:
            alist.write(str(h) + " ")
        alist.write('\n')
        # Request cleanup on finished data
        del hset
    # Request cleanup on finished data
    del stree 
```

在使用文件时还要使用'with'关键字——它保证文件在你完成后会被关闭——如果抛出异常，打开/关闭可能会在以后阻止代码库。

```
def read_f(f):
    with open(f, "r") as openf:
        s = str(openf.readlines())
    return s 
```

正如我上面提到的，删除所有返回的变量的 list() 包装器——它们已经是可迭代的，并且对它们执行 list() 可能会消耗大量的内存/运行时间来处理大型可迭代项。IE：

```
for a,b in list(combinations(glist, 2)): 
```

应该：

```
for a,b in combinations(glist, 2): 
```

和

```
glist = []
for g in glob.glob("*.g"):
    glist.append(g) 
```

应该变成：

```
glist = glob.glob("*.g") 
```

这些更改应该会有所帮助，让我知道您是否仍然内存不足，但是您现在应该只会随着 alist 变大而增加内存使用量——一旦它变得太大，应该会刷新。C 代码也可能存在内存泄漏（我没有使用该库），在这种情况下，您也会遇到内存问题。但你的 Python 代码更有可能是罪魁祸首。

**注意：** 我没有测试我在此处发布的建议更改，因此此处和此处可能存在轻微的语法错误。

# c# - 在不同表单之间传输数据/值 - C#

> ID：11552109
> 
> 赞同：0
> 
> 时间：2012-07-18T23:59:18.030
> 
> 标签：c#, .net, winforms, visual-studio-2010, forms

我已经研究了很多关于如何让它工作但我无法解决问题，我也不喜欢一些研究方法，因为我认为它浪费了 Ram Space。无论如何，这是问题所在：

我有两种形式：Form1（有 DataGridView（修改器：Public），TextBox1，Button1） - 父窗体 Form2（有 TextBox1，Button1） - 子窗体

```
public partial class Form1 : Form
{
Pivate Void Button1_Click()
TransferText("Text_Example")

Public Void TransferText(string text)
Form2 frm2 = new Form2();
frm2.show()
frm2.textbox1 = text;
} 
```

这显然不起作用，这样做的正确方法是什么？我正在尝试打开 Form2，并更改 Form2 的 textbox1 值。

在 Form2 上，我有以下代码：

```
public partial class Form2 : Form
{
Private Void Button1_click()
RowAdder("Example-Text", "Example2");

Public Void RowAdder(string text1, string text2)
Form frm1 = ?? // What should I write here ?
frm1.DataGridView1.Rows.Add(text1, text2) 
```

这也不起作用，那么我该如何解决呢？我正在尝试在 Form1 上添加来自 Form2 的行。

非常感谢您对此问题的任何帮助。我已经坚持了一段时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T00:13:44.527

只需在您的 form2 上创建公共属性：

`public string passtext`;

在您的 Form1 上执行以下操作：

```
 Form2 frm2 =  new Form2(){ passtext= "Text_Example"};
   frm2.Show(); 
```

在你 Form2 上：

试试这个进行测试：

```
MessageBox.Show(passtext); 
```

问候

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T00:22:08.813

在 WPF 中已经很好地解决了在视图（表单）之间绑定公共数据的问题，但是我建议使用 Winforms 的一种方法：

1) 对于父子传输，在子节点上创建一个公共/内部属性，用于处理到所需控件的映射。更好的是，如果要映射多个字段/控件，请使用 ViewModel 之类的东西：包含相关字段的类或结构。例如：（使用字符串值）在 Form2（子）中

```
public string ExampleText
{
   get { return exampleTextControl.Text; }
   set { exampleTextControl.Text = value; }
} 
```

表格 1（父母）

```
form2.ExampleText = "fred"; 
```

一般规则是只公开您需要的最少量的细节。回到 VB 中，“hack”是公开控件，以便您可以通过设置访问器属性来公开整个文本框。您可以在 C# 中执行此操作，但非常不建议这样做。

2）对于子父关系：我能建议的最简洁的选择是采用事件通知模型。孩子公开了一个事件，该事件将提供详细信息供聆听的父母使用。父窗体捕获事件并执行自己的更新。

从一个简单的事件参数声明开始：

```
public class ExampleEventArgs : EventArgs
{
   public string Value1 
   {
      get;
      set;
   }
   public string Value2 
   {
      get;
      set;
   }
} 
```

在子窗体 (Form2) 中创建事件声明：

```
public event EventHandler<ExampleEventArgs> OnRowAdded; 
```

当您想向父级发送信号以添加一行时：

```
if (OnRowAdded != null)
{
   OnRowAdded(this, new ExampleEventArgs { Value1 = text1, Value2 = text2 });
} 
```

在初始化 Form2 的实例时，在父表单 (Form1) 中，您给它一个方法委托以用于 OnRowAdded 事件处理程序。这可以是一个私有方法（当您添加事件处理程序时，VS 可以为您自动生成它）或者您可以使用 Lambda 表达式：

```
var form2 = new Form2();
form2.OnRowAdded += (sender, e) => { this.DataGridView1.Rows.Add(e.Value1, e.Value2); };
// or form2.OnRowAdded += new EventHandler<ExampleEventArgs>( /* generate private method... */ ); 
```

*免责声明：上面的代码是从内存中摘录的，它可能无法按原样编译，但应该让您了解如何解决问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T00:37:50.637

Form 类有一个 Form 类型的 Owner 属性和一个设置该属性的 show 方法重载。这允许您将父表单的引用传递给子表单。

您必须将调用更改为 show 如下所示：

```
form2.Show(this); 
```

然后在 form2 中的 RowAdder 方法中，您必须将所有者转换为 Form1 才能访问那里的 datagridview，如下所示：

```
((Form1)Owner).DataGridView1.Rows.Add(text1, text2); 
```

这将解决从子表单获取数据到父表单的问题。很多人已经回答了从父母到孩子获取数据的最佳方式，所以我只想说阅读其他答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T00:08:41.907

您可以更改 ctor`Form2`以接收字符串作为参数并在实例化时发送它。

```
Form2 form = new Form2(text); 
```

在 Form2 的 ctor 上，您使用该文本

```
public Form2(string someText)
{
InitializeComponent();
//...
    this.textbox1.Text = someText;
//...
} 
```

问候

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T00:20:37.277

为了保持类的良好设计，不建议将窗体内控件的 ID 暴露给外部。但是，您可以使用 C# 属性或指定的公共方法来更改控件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-19T01:15:42.613

但这有点乱这里是ùy的建议！

创建一个类以将这项工作与 UI 分开：

```
public class YourController
{
    public DataGridView MyView { get; set; }

    //The method to add a row
    public void AddRowToView(string passedText)
    {
        using (Form2 f2 = new Form2())
        {
            if (f2.ShowDialog() == DialogResult.OK)
            {
                MyView.Rows.Add(passedText, f2.txEdit.Text);
            }
        }
    }
} 
```

在您的父表单中，调用该方法来添加行：

```
//In your parent form, on the click button event :
YourController controller = new YourController() { MyView = view };
controller.AddRowToView("myText"); 
```

# javascript - 如何在 Chrome 扩展的弹出窗口中为复选框添加事件侦听器？

> ID：11552125
> 
> 赞同：15
> 
> 时间：2012-07-19T00:01:03.270
> 
> 标签：javascript, checkbox, google-chrome-extension

我正在尝试捕获`checkbox`我的 Chrome 扩展程序弹出窗口中的更改。文档[说](http://code.google.com/chrome/extensions/trunk/contentSecurityPolicy.html#H3-1)：

> 内联 JavaScript 不会被执行

同一页面上提供了一个示例，但它用于`button`. 我不知道如何修改它，所以它会捕获 chekbox 的状态变化。

```
document.addEventListener('DOMContentLoaded', function () {
      document.querySelector('button').addEventListener('click', clickHandler);
}); 
```

![例子](../Images/d95792cbb71349bbaeb771d8bde07adc.png)

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-01T15:49:22.500

有同样的问题，但参考了一个非常有用的网站，该网站列出了 Javascript 中的事件。在对关键字“check”进行快速搜索（Ctrl+F）后，我发现列出了“change”事件……据说与大多数浏览器兼容。果然它在那里，所以我的假设是复选框可能有一个“更改事件”。低，看看只是测试它，它似乎工作。这是您的代码稍作修改和事件链接（[http://help.dottoro.com/larrqqck.php](http://help.dottoro.com/larrqqck.php)）：

popup.html 中的 html 示例

```
 <div class="menu" >
<input type="checkbox" id="showAlert" name="showAlert"/>
<label for="showAlert"><nobr>Show Alert</nobr></label></div> 
```

popup.js 中的代码片段示例

```
document.addEventListener('DOMContentLoaded', function () {
      document.querySelector('#showAlert').addEventListener('change', changeHandler);
}); 
```

当然，您需要将其传递给如下函数：

```
function changeHandler(){
   //Do Something...maybe another function showAlert(), for instance
   if(showAlert.checked){
      //do something
   }
   else{
      //do something else
   }
} 
```

**2018 年 1 月 6 日 - 编辑：** 我刚刚回顾了这篇文章，看来这很可能会被弃用。因此，您可能希望使用 MutationObserver ( [https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver](https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver) )。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-19T00:57:43.860

尝试：

```
document.querySelector('checkbox').addEventListener('CheckboxStateChange', Handler); 
```

或者，您可以收听“onChange”或“onClick”事件，因为每次单击都会更改复选框的状态。

# facebook - 我可以以编程方式在评论中显示朋友 ID 吗？

> ID：11552129
> 
> 赞同：0
> 
> 时间：2012-07-19T00:02:24.027
> 
> 标签：facebook, facebook-graph-api

我正在开发一个与 Facebook API 交互的网站。基本上，当您登录（使用您的 Facebook 帐户）时，它会获取您所有的朋友并让您选择他们，然后将他们放在一个列表中。

那么问题是，您可以将其分享到 facebook（带有“推荐”按钮）。

然后，我想要做的是，当您在 facebook 上推荐此内容时，该列表中的用户会出现在评论或网站元数据等标签上。

有可能的？另外，可以使用默认文本调用“推荐”按钮，因此用户不需要输入？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T00:17:57.613

阅读此内容 - 它解释了如何获取朋友 ID 的列表

[Facebook](https://developers.facebook.com/docs/reference/api/FriendList/)

编辑：

这里[标签-用户-facebook-graph](http://digitizor.com/2011/01/24/tag-user-facebook-graph/)

# ruby-on-rails - ruby on rails 尝试将 add_index 添加到新表时出现 ODBC 3700 错误

> ID：11552133
> 
> 赞同：0
> 
> 时间：2012-07-19T00:02:55.553
> 
> 标签：ruby-on-rails, ruby-on-rails-3, sql-server-2005

我正在使用 gem`activerecord-sqlserver-adapter`连接到使用 Ruby on Rails 的现有 Microsoft SQL Server。我修改了`config\application.rb`文件以将我`table_name_prefix`的设置如下

```
config.active_record.table_name_prefix = 'msr.FSCR_' 
```

这样我使用 Ruby on Rails 创建的所有表都在`msr`模式中，并与`FSCR_`前缀组合在一起。我有一个使用以下创建的表/脚手架

```
rails generate scaffold Customer name:string status:string 
rake db:migrate 
```

它创建了`msr.FSCR_customers`正确的表。然后我为网站创建了一个模型，如下所示

```
rails generate scaffold Site name:string addr1:string addr2:string city:string
    state:string zip:string 
```

并且模型/脚手架已正确生成。generate命令创建的数据库迁移文件`20120718221629_create_sites.rb`如下

```
class CreateSites < ActiveRecord::Migration
  def change
    create_table :sites do |t|
      t.string :name
      t.string :addr1
      t.string :addr2
      t.string :addr3
      t.string :city
      t.string :state
      t.string :zip
      t.string :phone
      t.string :fax
      t.integer :created_by
      t.references :customer

      t.timestamps
    end
    add_index :sites, :customer_id
  end
end 
```

但是，当我运行`rake db:migrate`推荐时，我收到以下错误消息：

```
ODBC::Error: 37000 (102) [Microsoft][ODBC SQL Server Driver][SQL Server]Incorrect
syntax near '.'.: CREATE INDEX [index_msr].[FSCR_sites_on_customer_id] ON [msr].
[FSCR_sites] ([customer_id]) 
```

如果我注释掉这行`add_index :sites, :customer_id`它会创建表格就好了。创建表时，我看到我的外键不存在。如何更改/解决此问题？

**更新**

我想我找到了问题，但我不知道如何改变它。因为我正在使用它的表前缀，`msr.FSCR_`所以它试图创建前缀为 ++ {index_name} 的索引名称，`index_`所以`msr.FSCR_`插入试图创建

```
[index_msr].[sites_on_customer_id] 
```

没有架构，`index_msr`所以我希望这会失败。我真正想要的是索引名称是

```
[index_msr_sites_on_customer_id] 
```

有没有办法`].[`从类的创建索引部分中删除`ActiveRecord`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T00:08:20.927

您没有 customer_id 列。添加它会有所帮助吗？或者只是在站点上添加索引并摆脱 customer_id

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T21:07:04.553

我可以通过修改从 rails 生成的 db 迁移文件来解决这个问题，如下所示：

**生成的文件**

```
class CreateSites < ActiveRecord::Migration
  def change
    create_table :sites do |t|
      t.string :name
      t.string :addr1
      t.string :addr2
      t.string :addr3
      t.string :city
      t.string :state
      t.string :zip
      t.string :phone
      t.string :fax
      t.integer :created_by
      t.references :customer

      t.timestamps
    end
    add_index :sites, :customer_id
  end
end 
```

**更新后的文件**

```
class CreateSites < ActiveRecord::Migration
  def change
    create_table :sites do |t|
      t.string :name
      t.string :addr1
      t.string :addr2
      t.string :addr3
      t.string :city
      t.string :state
      t.string :zip
      t.string :phone
      t.string :fax
      t.integer :created_by
      t.references :customer

      t.timestamps
    end
    add_index :sites, :customer_id, :name => 'sites_by_customer'
  end
end 
```

# mysql - MySQL：MAX 不返回

> ID：11552134
> 
> 赞同：0
> 
> 时间：2012-07-19T00:03:03.423
> 
> 标签：mysql

如何获取按最大列排序并按 id 分组的行列表？我不断得到正确的最大值，但其他字段是从其他行获得的。

我正在使用以下内容：

```
SELECT p.*
            FROM `logs` AS p
            JOIN
            (SELECT person_id,
             MAX(`datetime`) AS datetime
             FROM `logs`
             GROUP BY `person_id`
             ) AS pg
             ON  pg.person_id = p.person_id
             AND pg.`datetime` = p.datetime
             group by person_id 
```

我的查询哪里错了？日期时间和人员 ID 始终正确，但其他字段不正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T00:06:21.347

看到这个：[http ://bugs.mysql.com/bug.php?id=54784](http://bugs.mysql.com/bug.php?id=54784)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T00:10:43.447

> SELECT MIN(datetime) 并不总是返回最小日期时间值。与 MAX 相同。

临时解决方法：

```
 SELECT p.*
        FROM   `logs` AS p
        JOIN
              (SELECT person_id,
                      MAX(CAST(`datetime` as CHAR(25))) AS `datetime`
               FROM `logs`
               GROUP BY `person_id`
               ) AS pg
                   ON  pg.person_id = p.person_id AND
              pg.`datetime` = p.datetime
         group by person_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T00:55:21.297

请尝试以下方法：

```
SELECT logs.* 
  FROM ( SELECT person_id,
             MAX(`datetime`) AS latest
             FROM `logs` 
         GROUP BY person_id) AS dt
INNER
  JOIN logs 
    ON logs.person_id= dt.person_id
   AND logs.datetime= dt.latest 
```

# asp.net - 将输入提交变成asp控件

> ID：11552141
> 
> 赞同：0
> 
> 时间：2012-07-19T00:04:11.803
> 
> 标签：asp.net, .net, html, submit, aspbutton

我有这个：

```
<img src="inc/img/import_up.png" alt="Import" width="73" height="31" style="cursor: pointer;" onmouseover="src='inc/img/import_ov.png'" onmouseout="src='inc/img/import_up.png'" ID="btnImport" runat="server" Text="Import" CssClass="import_form_submit" OnClientClick="return Import_ClientClick()" onclick="btnImport_Click" /> 
```

并且需要把它变成这样的东西：

```
 <asp:Button ID="btnImport" runat="server" Text="Import" CssClass="import_form_submit" OnClientClick="return Import_ClientClick()" onclick="btnImport_Click" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T12:37:39.510

使用示例：

```
<asp:ImageButton id="imagebtn" runat="server"
           AlternateText="Import"
           ImageAlign="left"
           ImageUrl="inc/img/import_up.png"
           OnClick="Import_ClientClick"/> 
```

# objective-c - 我可以将我的#define 加载到 NSString 中吗？

> ID：11552149
> 
> 赞同：1
> 
> 时间：2012-07-19T00:05:07.310
> 
> 标签：objective-c

> **可能重复：**
> [C 预处理器，将宏的结果字符串化](https://stackoverflow.com/questions/3419332/c-preprocessor-stringify-the-result-of-a-macro)

我有这个定义：

```
#define VERSION 0.3.2 
```

我想把它转换成`@"0.3.2"`（一个 NSString）——这可能吗？假设我不允许在#define 中添加引号。

像这样的东西，但大概有一个额外的步骤：

```
NSString *myVersion = [NSString stringWith???:VERSION]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T00:15:43.943

正如我链接的可能的 dup 中一样，您还需要两个级别的宏，因为您想对宏扩展进行字符串化：

```
#define VERSION 0.3.2
#define StringifyWithoutExpandingMacros(x) #x
#define Stringify(x) StringifyWithoutExpandingMacros(x)

NSLog(@"VERSION = %@", @StringifyWithoutExpandingMacros(VERSION));
// output: VERSION = VERSION

NSLog(@"VERSION = %@", @Stringify(VERSION));
// output: VERSION = 0.3.2 
```

请注意，您可以`@`在宏调用前面加上一个。它不需要在宏内部。但是，如果需要，您可以将其放入宏中：

```
#define NSStringifyWithoutExpandingMacros(x) @#x
#define NSStringify(x) NSStringifyWithoutExpandingMacros(x)

NSLog(@"VERSION = %@", NSStringify(VERSION));
// output: VERSION = 0.3.2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T00:15:35.423

[字符串化](http://www.decompile.com/cpp/faq/file_and_line_error_string.htm)！

```
#define STRINGIFY(x) #x
#define TOSTRING(x) STRINGIFY(x)
#define AT __FILE__ ":" TOSTRING(__LINE__) 
```

@HotLick 的宏魔法是最好的。

# c# - SA1126：基类方法需要前缀，但并非在所有上下文中

> ID：11552150
> 
> 赞同：2
> 
> 时间：2012-07-19T00:05:11.440
> 
> 标签：c#, stylecop

我有一个基类（它派生自`System.Web.UI.Page`）

它有两种方法：

```
public static void LogError(string message, Exception exception) { ... }
public static string GetSupplierLogo(string supplierName) { ... } 
```

在我的派生类中，我这样做

```
this.uxLogoImage.ImageUrl = GetSupplierLogo("CompanyName"); 
```

和同一班的其他地方

```
LogError("Exception...", ex); 
```

Stylecop 说：“SA1126：对 GetSupplierLogo 的调用必须以 'this.'、'base.'、'object.' 开头。或“我的班级”。前缀表示预期的方法调用。

但它没有说明对 LogError() 的调用。为什么？

* * *

更新当对任一方法的调用在 catch 块之外时，stylecop 会不高兴：

```
protected void Page_Load(object sender, EventArgs e)
{
    LogError("Testing...", null);
} 
```

但是在一个捕获中，它很高兴：

```
protected void Click(object sender, EventArgs e)
{
    try { }
    catch()
    {
        LogError("Exception...", ex);
    }
} 
```

这是一个错误，还是有什么不同的原因？

# jquery - JQUERY .resizable() 仅在 $(document).ready(function() 上工作一次

> ID：11552154
> 
> 赞同：0
> 
> 时间：2012-07-19T00:05:27.540
> 
> 标签：jquery, resizable

我有`$(document).ready(function()`以下代码：

```
$(".resizable" ).resizable({
    handles: 'n',
    minHeight: 1,
    minWidth: maxBarWidth,
    maxHeight: maxBarHeight,
    maxWidth: maxBarWidth
}); 
```

这允许我在我创建的条形图上调整条形 (DIV) 的大小。它在页面加载后工作。当我调整栏的大小时，我会运行一些代码来为栏设置动画并更新它位于栏上的标签。问题是顶部手柄消失了，我无法再调整任何条的大小。任何想法？

这里有更多代码：

```
$(document).ready(function(){
//position and draw bars
setBarPosition();

//make bars resizable with mouse and set their max and min dimentions
var maxBarWidth = $('.graphBar').width();
var maxBarHeight = $('.graphArea').height();

//activate resize on bars
$(".resizable" ).resizable(
    {handles: 'n', minHeight: 1, minWidth: maxBarWidth, maxHeight: maxBarHeight,     maxWidth: maxBarWidth}
);

//update input fields and graph labels after bars resizing
$(".resizable" ).bind( "resizestop", function(event, ui) {
    targetInput = $(this).attr("label");
    $('input[name=' + targetInput +   ']').val(Math.round($(this).height()/window.chartScale));
    setBarPosition()    
});

});

function setBarPosition(){
window.chartHeight = Number($('.graphArea').height());
window.barWidth = $('.graphArea .graphBar').width();
window.highestYlabel = Number($('.graphYAxis p').first().html());
window.chartHeightArea = window.chartHeight - Number($('p.axis-  value').first().height());
window.chartScale = chartHeightArea / window.highestYlabel;
window.barSpacing = Number($('.graphArea').attr('barSpacing'));

$orderNo = 1;
$itemNo = 1;

//count how many bars are present and calculate incremental position
$('.graphArea .graphBar').each(function(index){

//if bar is from second series then attach to the side of the previous one
if (index%2 == 0)
    {
        var barPosition = (index * barWidth) + (index * window.barSpacing) +   window.barSpacing;       
    }
else
    {
        var barPosition = (index * barWidth) + (index * window.barSpacing); 
    }

//assign left position to each bar
$(this).css('left', barPosition + 'px');

//add numeric values on bars. Values are read from input form
if (index%2 == 0)
    {
        elementName = 'orders' + $orderNo; 
        $orderNo = $orderNo + 1;        
    }
else
    {
        elementName = 'items' + $itemNo;
        $itemNo = $itemNo + 1;      
    }

//attach paragraphs holding the bar heights to the divs generating the bars 
currentBarValue = $('input[name="'+ elementName +'"]').val();
$(this).attr('barValue', currentBarValue);
$(this).html('<p class="resizable" title="' + elementName + '">' + $(this).attr('barValue') + '</p>');

//add X axis labels
$('.graphXAxis').append('<p style="left:' + (barPosition - (window.barWidth/2)) + 'px">' + $(this).attr('label') + '<p>');

//find out the bar with the maximum value assigned
var barValue = Number($(this).attr('barValue'));

if (barValue > window.maxValue) 
    {
        window.maxValue = barValue;
    }

//calculate value to display
window.valueMultiplier = window.maxValue / window.highestYlabel;

 });

//animate bars and labels
runAnimation();
}

function runAnimation(){
$('.graphArea .graphBar').each(function(index){
    //calculate relative bar heights
    var scaledValue = Number($(this).attr('barValue')) * window.chartScale; 
    var delayTime = 125 * index;

    //animate bars
    $(this).delay(delayTime).animate({height:scaledValue},1000,function(){
        //for each children element apply delay (in built JQUERY function)
        $(this).children('p').delay(500).fadeIn(250);   
    });
});
} 
```

非常感谢您的帮助，

多纳托

# javascript - 说话的几率是多少？

> ID：11552158
> 
> 赞同：62
> 
> 时间：2012-07-19T00:05:43.327
> 
> 标签：javascript, random

我想写一个程序：

*   80%的时间会说`sendMessage("hi");`
*   5%的时间会说`sendMessage("bye");`
*   15% 的时间会说`sendMessage("Test");`

它与 有什么关系`Math.random()`吗？像

```
if (Math.random() * 100 < 80) {
  sendMessage("hi");
}
else if (Math.random() * 100 < 5) {
  sendMessage("bye");
} 
```

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-07-19T00:10:10.827

是的，`Math.random()`这是实现这一目标的绝佳方式。你想要做的是计算一个随机数，然后根据它做出决定：

```
var d = Math.random();
if (d < 0.5)
    // 50% chance of being here
else if (d < 0.7)
    // 20% chance of being here
else
    // 30% chance of being here 
```

这样你就不会错过任何可能性。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-07-19T00:09:36.237

对于这样的情况，通常最好生成*一个*随机数并根据该单个数字选择情况，如下所示：

```
int foo = Math.random() * 100;
if (foo < 80) // 0-79
    sendMessage("hi");
else if (foo < 85) // 80-84
    sendMessage("bye");
else // 85-99
    sendMessage("test"); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-12-07T15:49:27.260

我通过创建一个池并使用 Fisher yates shuffle 算法来获得一个完全随机的机会，从而创建了一个百分比机会函数。下面的代码片段测试了 20 次机会随机性。

```
var arrayShuffle = function(array) {
   for ( var i = 0, length = array.length, swap = 0, temp = ''; i < length; i++ ) {
      swap        = Math.floor(Math.random() * (i + 1));
      temp        = array[swap];
      array[swap] = array[i];
      array[i]    = temp;
   }
   return array;
};

var percentageChance = function(values, chances) {
   for ( var i = 0, pool = []; i < chances.length; i++ ) {
      for ( var i2 = 0; i2 < chances[i]; i2++ ) {
         pool.push(i);
      }
   }
   return values[arrayShuffle(pool)['0']];
};

for ( var i = 0; i < 20; i++ ) {
   console.log(percentageChance(['hi', 'test', 'bye'], [80, 15, 5]));
}
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-05-28T10:23:40.290

我一直用我的不和谐机器人这样做

```
const a = Math.floor(Math.random() * 11);
    if (a >= 8) { // 20% chance
        /*
          CODE HERE
        */
    } else { // 80% chance
        /*
          CODE HERE
        */
    } 
```

如果需要，您可以将 11 更改为 101。

它有一个额外的原因是它做 1 - 10 而不是 1 - 9 （或 1 - 100 而不是 1 - 99）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-22T01:25:50.990

产生 20% 的几率获得“Yupiii!” 在 console.log 中

```
const testMyChance = () => {

  const chance = [1, 0, 0, 0, 0].sort(() => Math.random() - 0.5)[0]

  if(chance) console.log("Yupiii!")
  else console.log("Oh my Duck!")
}

testMyChance() 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2021-02-27T09:49:55.677

爪哇

```
/**
 * Zero or less returns 'false', 100 or greater returns 'true'. Else return probability with required percentage.
 * @param percentage for example 100%, 50%, 0%.
 * @return true or false with required probability.
 */
private static boolean probably(int percentage) {
    double zeroToOne = Math.random(); // greater than or equal to 0.0 and less than 1.0
    double multiple = zeroToOne * 100; // greater than or equal to 0.0 and less than 100.0
    return multiple < percentage;
} 
```

JavaScript

```
function probably(percentage) {
  return Math.random() * 100 < percentage;
} 
```

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2017-11-27T01:08:15.697

这是该问题的一个非常简单的近似解决方案。随机对一组真/假值进行排序，然后选择第一项。

这应该有三分之一的机会是真实的..

```
var a = [true, false, false]
a.sort(function(){ return Math.random() >= 0.5 ? 1 : -1 })[0] 
```

# php - Facebook PHP如何知道是谁上传的图片？

> ID：11552159
> 
> 赞同：0
> 
> 时间：2012-07-19T00:05:53.603
> 
> 标签：php, facebook, facebook-graph-api

我创建了一个应用程序，使用户能够将他们的图像从我的网站上传到我的 Facebook 页面。我们最近创建了一个比赛，人们必须上传他们的照片，哪张照片获得最多的喜欢就赢了。该应用程序仍在构建中。该应用程序正在使用 PHP 构建。

根据我的研究，在照片说明中标记某人已被禁用（除非我的资源不正确）。

请问我们怎么知道谁上传了哪张照片？想知道谁赢了？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T02:34:26.553

您应该能够对其中一张照片进行 Graph API / FQL 调用并获取上传此照片的用户的 ID。

[在Graph API Explorer](https://developers.facebook.com/tools/explorer)中试试这个 FQL ：

```
SELECT post_id, actor_id, app_id, target_id, message, attachment, likes FROM stream 
 WHERE filter_key = 'others' AND source_id = 'YOUR_PAGE_ID' AND app_id = 'YOUR_APP_ID'
  AND attachment.fb_object_type = 'photo' 
```

该`actor_id`字段应该是上传图像的人。

您可以添加`ORDER BY likes.count DESC`到此内容的末尾以按喜欢对其进行排序。您需要做更多的按摩，以确保您退回所有符合比赛条件的物品。

# objective-c - Mac 应用程序的内存问题

> ID：11552160
> 
> 赞同：1
> 
> 时间：2012-07-19T00:05:56.327
> 
> 标签：objective-c, memory-management, automatic-ref-counting

我的 AppDelegate 中的以下方法存在问题。

```
- (void)itemDiscovered:(PodcastShow *)show
{
    NSLog(@"%@", show);
    NSArray* newArray = [self.showArray arrayByAddingObject:show];
    self.showArray = (NSMutableArray*)newArray; //This line signals SIGABRT
} 
```

总的来说，我对 ARC 和 Objective-C 还是个新手。显然，存在内存问题，但我不知道我做错了什么。我已经写了很多这样的代码，我从来没有遇到过这样的问题。这是 showArray 属性：

```
@property (strong, nonatomic) NSMutableArray *showArray; 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T00:11:50.243

为什么不直接将新对象添加到 showArray？

```
[self.showArray addObject: show]; 
```

还是我在创建 时遗漏了什么`newArray`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T00:19:17.403

尝试`[self.showArray addObjectsFromArray:newArray]`或`[self.showArray addObject:show]`。

还要确保通过`self.showArray = [NSMutableArray array]`在代码中的某处调用（或类似的东西）来创建可变数组。

# c++ - 其他用户帐户上的 OpenProcess iexplore.exe 因拒绝访问而失败

> ID：11552170
> 
> 赞同：2
> 
> 时间：2012-07-19T00:07:01.360
> 
> 标签：c++, winapi, openprocess

我正在枚举所有用户的 iexplore.exe 实例。我能够获得机器上匹配进程的列表，但要识别用户，我需要使用 OpenProcess。这适用于我自己的实例，但即使使用以管理员身份运行和 EnableDebugPriv，我仍然会收到拒绝访问消息。我错过了什么吗？iexplore.exe 是否受到某种保护？

这是我用于调试权限的内容：

```
void EnableDebugPriv()
{
    HANDLE hToken;
    LUID luid;
    TOKEN_PRIVILEGES tkp;

    OpenProcessToken(GetCurrentProcess(), TOKEN_ADJUST_PRIVILEGES | TOKEN_QUERY, &hToken);

    if (!::LookupPrivilegeValue(NULL, SE_DEBUG_NAME, &luid))
    {
        wprintf(_T("ERROR %u\n"),GetLastError());
        CloseHandle(hToken); 
        return;
    }

    tkp.PrivilegeCount = 1;
    tkp.Privileges[0].Luid = luid;
    tkp.Privileges[0].Attributes = SE_PRIVILEGE_ENABLED;

    if (!::AdjustTokenPrivileges(hToken, false, &tkp, sizeof(tkp), NULL, NULL))
    {
        wprintf(_T("ERROR %u\n"),GetLastError());
        CloseHandle(hToken); 
        return;
    }

    CloseHandle(hToken);
    wprintf(_T("Should have worked"));
} 
```

运行此程序时不会发生错误。运行时出现 ACCESS DENIED 错误

```
hProcess = OpenProcess( PROCESS_QUERY_INFORMATION|PROCESS_VM_READ|PROCESS_TERMINATE , FALSE, pe32.th32ProcessID ); 
```

对于不属于我的进程。“其他”用户是从控制面板以正常方式在这台机器上创建的标准和访客帐户。任何想法将不胜感激。我被困住了！最终我想为用户提供关闭应用程序的能力，但即使只有 PROCESS_QUERY_LIMITED_INFORMATION 它也会失败。我仍然需要检查这是否是除 IE 之外的其他应用程序的问题。

**更新**我最终得到了这个工作。错误出现在 OpenProcessToken 中。我需要不同于我要求的特权。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T00:40:19.543

在 Windows Vista 及更高版本上，IE 在保护模式下作为低完整性进程运行。 [根据 MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684880.aspx)，非受保护进程对受保护进程的访问受到限制，包括`PROCESS_QUERY_INFORMATION`和`PROCESS_VM_READ`权限。

# macos - 无法在我的 Mac 上使用 brew 安装软件？

> ID：11552171
> 
> 赞同：2
> 
> 时间：2012-07-19T00:07:27.740
> 
> 标签：macos, homebrew, cpython, libtool

我正在使用 brew 安装一些软件，当我尝试安装软件时，我得到了这个：

```
localhost:~ timger$ brew install autoconf
Error: No available formula for autoconf
localhost:~ timger$ brew install automake
Error: No available formula for automake
localhost:~ timger$ brew install libtool
Error: No available formula for libtool
localhost:~ timger$ brew install pkg-con 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T00:12:55.667

您尝试安装的所有东西都是 Xcode 命令行工具包的一部分，除了`pkg-config`您拼错的 .

从 App Store 安装 Xcode，然后从 Xcode 首选项的“下载”选项卡安装“命令行工具”包。

# php - http.responseText 正在返回调用的 PHP 函数的名称

> ID：11552172
> 
> 赞同：1
> 
> 时间：2012-07-19T00:07:47.097
> 
> 标签：php, mysql, ajax

我正在使用 AJAX 在 PHP 中调用函数。它可以很好地返回我的数据，但是它一直将函数名称放在 returnText 的开头。

我的 Javascript/ajax

```
function getfirst() {
    var myphp=document.getElementById('myphp').value ;
    http=createRequestObject();
    url= tablename + '.php?filename=' + tablename;
    url= url + '&function=movefirst';
    url= url + '&seekindex=CustomerKey';
    url= url + '&maxdata=' + maxdata;
    http.open('GET',url,false);
    http.send(null);
    document.getElementById('myreturn').value;
} 
```

我的 PHP

```
<?php include '../../tophat.php';

$_REQUEST['function']();

function movefirst(){
    $filename=$_REQUEST['filename'];
    $seekindex=$_REQUEST['seekindex'];
    $maxdata=$_REQUEST['maxdata'];
    opendbdata();
    $query="SELECT * FROM ". $filename . " ORDER BY " . $seekindex; 
    $result=mysql_query($query);
    $returnkey='';
    for ($i=0; $i<=$maxdata-1; $i++)  {
         $returnkey = $returnkey . mysql_result($result,0,$i) . "~";
    }
    echo $returnkey;
} 
```

我正在我的客户数据库中查找第一个客户，它返回记录，但在 returnText 的开头是函数的名称。这是 .returnText 的开头：`"movefirst4SEASONS1~4 Seasons Pottery~336 Hammond Dr NE~"`

我以前从未遇到过这个问题。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:19:10.197

请注意，您

*   允许用户执行此范围内可用的任何功能（类似于`dropDatabase()`or `rebootServer()`），因为您正在调用`$_REQUEST['function']`
*   允许用户利用[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)对您的数据库进行任何更改或读取机密信息！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T15:25:37.777

我怀疑tophat.php 中还有一些调试代码。尝试在包含之后放置一个 die() 并查看新的 responseText 是否仅包含函数名称。

也就是说，我同意并赞成 Steffen 的回答——语法如

```
$_REQUEST['function'](); 
```

看起来就像一场等待发生的灾难。即使它不是，它仍然看起来像它，无论如何这很糟糕。

# jquery - jQuery绑定点击事件最佳实践

> ID：11552174
> 
> 赞同：19
> 
> 时间：2012-07-19T00:07:58.313
> 
> 标签：jquery

最近在 jQuery 中绑定点击事件时，我发现自己在质疑是使用 jQuery 快捷方式`click()`还是应该`.on('click', ...)`自己指定调用。

.click [()。](http://api.jquery.com/click/)jQuery 中的函数只是一个捷径。对我来说，使用它是有意义的，因为 jQuery 会在幕后处理所有使用的 jQuery 版本的首选方法。当我从 jQuery 1.6 -> 1.7 升级我的脚本时，我知道我所有的`click()`s 从一个快捷方式变成`bind()`了首选`on()`方法。仅凭这一点，似乎就有足够的理由使用这些快捷方式。

*...然而....*

我非常尊敬的 Trevor Burnham 在他的电子书[Async Javascript](http://leanpub.com/asyncjs)中说，他

> ...更喜欢始终使用更强大的绑定/打开）（点击）

这让我很困惑，我想知道为什么使用 bind/on 会“更强大”。

在 jQuery 中绑定具有快捷方式的事件时，您发现什么是最佳实践？使用快捷方式还是自己做？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-07-19T00:13:49.593

**我认为这与个人喜好和代码可读性有关。**

就更强大的功能而言`.on`，您可以委托事件，而快捷方式始终直接对元素进行操作。例如，即使是在使用 ajax 或其他方式添加的元素，也`$('body').on('click', '.button', function(){});`适用于每个元素。`.button`虽然快捷方式无法做到这`$('.button').click(function(){});`一点，但这是添加侦听`.button`器且不具有委托功能的唯一方法，因此`.button`稍后添加的元素将没有此绑定。

多个元素上的直接未委托事件（如快捷方式）的效率也略低于父对象上的委托事件。例如：假设`.button`页面上有 15 个元素，`$('.button').click(...`将遍历所有 15 个元素并为每个元素添加一个事件侦听器；然而`$('#parentElem').on('click', '.button', ...`，将简单地将单个事件侦听器附加到`#parentElem`对目标的检查，因此一个附加和一个侦听器，而不是一个循环和 15 个侦听器。

最后，`.on`它的优点是允许您从多个事件中将一个函数附加到一个元素，这是使用快捷方式无法实现的，例如：`$('.button').on('click mouseover keyup', ...`该函数将通过单击、鼠标悬停或按键触发！

* * *

`.button`让我们再次说在一个名为 div 中有 15 个元素`#parent`

快捷方式处理程序：

```
 $('.button').click(turnRed);
 $('.button').mouseover(turnRed);
 $('.button').keyup(turnRed);

 function turnRed(){
      $(this).css('color','red');
 } 
```

*   创建了 4 个 jQuery 对象（是的，我知道您可以将其缓存到 2 个对象，但这是一个示例）
*   3 个元素循环，每个循环 15 个，因此 jQuery 在这里点击元素 45 次并附加监听器
*   总共 45 个事件监听器
*   添加到场景中的未来`.button`元素不会`turnRed`

`.on`处理程序：

```
 $('#parent').on('click mouseover keyup', '.button', turnRed);

 function turnRed(){
      $(this).css('color','red');
 } 
```

*   创建了 2 个 jQuery 对象
*   没有元素循环，所以 jQuery 一次点击元素
*   总共 3 个事件监听器
*   未来`.button`添加到场景中的元素实际上会`turnRed`

这里`.on`明显有优势

* * *

如果您的情况比这更简单，那么 的优势`.on`可能不会对您产生影响，并且该快捷方式可能是首选，因为它更具可读性。

`$('#button').click(...`几乎与`$('#button').on('click', ...`（请参阅@Fabrício Matté 的回答）相同，如果我们只想为一个事件添加一个侦听器，那么`.on`' 的力量是一个有争议的问题。

就个人而言，因为有时我希望`.on`我总是使用的优势`.on`只是为了保持一致。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T00:46:10.797

您可以快速查看[源代码](http://code.jquery.com/jquery-1.7.2.js)，并亲自了解您的函数调用实际上做了什么。

在 jQuery 对象`extend`（第 3754 行）中，jQuery 在第 3909 行迭代了所有这些方法名称：

> 模糊焦点 focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu

创建速记方法，在调用`.on`这些方法时调用给定方法的方法而不传递选择器属性（第 3921 行）：

```
this.on( name, null, data, fn ) 
```

这只是意味着它不会有**事件委托**效果。

* * *

> 在 jQuery 中绑定具有快捷方式的事件时，您发现什么是最佳实践？使用快捷方式还是自己做？

调用之间的唯一区别

```
$(selector).eventname(function(){...}) 
```

和

```
$(selector).on('eventname', function(){...}) 
```

速记方法是否具有另一个函数调用的开销（可以忽略不计）。

**更新：**当使用 Grunt 自定义构建 jQuery 时，可以使用`custom:-event-alias`参数排除速记方法，以获得更小的构建（[此处的文档](https://github.com/jquery/jquery#how-to-build-your-own-jquery)）。不过，我个人倾向于坚持使用 CDN 构建。

* * *

至于事件委托的工作方式和首选方式，请查看[文档](http://api.jquery.com/on/#direct-and-delegated-events)和[@Fresheyeball 的答案](https://stackoverflow.com/a/11552212/1331430)。

# events - 在 JavaFX 中生成 MouseEvent

> ID：11552176
> 
> 赞同：8
> 
> 时间：2012-07-19T00:08:23.980
> 
> 标签：events, mouse, javafx-2

我需要模拟一个`MouseEvent.MOUSE_CLICKED`. 我想使用特定**节点的****fireEvent**方法来调度上述类型的事件。但是，我正在努力生成一个。似乎**javafx.scene.input.MouseEvent**没有有效的构造函数，但可以通过这种方式实例化旧对象。尽管如此，我还没有找到任何有效的转换解决方案。我该如何解决这个问题？****`java.awt.event.MouseEvent`****

 ****谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-01-24T08:16:04.567

这将在您的节点上触发一次主鼠标单击：

```
import javafx.event.Event; 
import javafx.scene.input.MouseButton; 
import javafx.scene.input.MouseEvent;

Event.fireEvent(YOUR NODE, new MouseEvent(MouseEvent.MOUSE_CLICKED, 0,
                0, 0, 0, MouseButton.PRIMARY, 1, true, true, true, true,
                true, true, true, true, true, true, null)); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-19T18:31:32.313

您可以使用已弃用的 MouseEvent.impl_mouseEvent API 生成 MouseEvent。我之前在JavaFX 2.0的这个[论坛主题中这样做过。](https://forums.oracle.com/forums/thread.jspa?threadID=2302889)请注意，该 API 已被弃用是有原因的 - 它是用于实现 JavaFX 的私有 API，并且不保证该 API 保持相同的签名，甚至不保证在未来的版本中存在（这可以证明，因为我在论坛主题不再编译。

生成此类事件的正确解决方案是拥有一个公共 API，因此支持这一点。已经提交了提供此功能的请求[RT-9383 "Add proper constructors & factory methods to event classes, remove impl"](http://javafx-jira.kenai.com/browse/RT-9383)。这个 jira 计划在明年为 JavaFX 3.0 完成。

同时，使用 Sergey 建议的 Robot 类可能是您最好的方法。

* * *

*更新：* Java 8[为 javafx.event.MouseEvent 添加了公共构造函数](https://docs.oracle.com/javase/8/javafx/api/javafx/scene/input/MouseEvent.html#MouseEvent-javafx.event.EventType-double-double-double-double-javafx.scene.input.MouseButton-int-boolean-boolean-boolean-boolean-boolean-boolean-boolean-boolean-boolean-boolean-javafx.scene.input.PickResult-)（如 Jay Thakkar 的回答所示），您可以使用[Event.fireEvent](https://docs.oracle.com/javase/8/javafx/api/javafx/event/Event.html#fireEvent-javafx.event.EventTarget-javafx.event.Event-)触发此类事件（您也可以[在 Windows 上触发事件](https://docs.oracle.com/javase/8/javafx/api/javafx/stage/Window.html#fireEvent-javafx.event.Event-)）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-12-17T17:42:43.967

或者，您可以使用简单的“hack”来以编程方式单击按钮。在“Util”类中创建此方法：

```
public static void click(javafx.scene.control.Control control) {
    java.awt.Point originalLocation = java.awt.MouseInfo.getPointerInfo().getLocation();
    javafx.geometry.Point2D buttonLocation = control.localToScreen(control.getLayoutBounds().getMinX(), control.getLayoutBounds().getMinY());
    try {
        java.awt.Robot robot = new java.awt.Robot();
        robot.mouseMove((int)buttonLocation.getX(), (int)buttonLocation.getY());
        robot.mousePress(InputEvent.BUTTON1_MASK);
        robot.mouseRelease(InputEvent.BUTTON1_MASK);
        robot.mouseMove((int) originalLocation.getX(), (int)originalLocation.getY());
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

然后，要“单击”按钮，只需调用方法单击将按钮作为参数传递。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-08T06:23:31.430

当你设置一个处理程序时，它会设置一个公共属性。您可以从该属性获取事件并调用 handle()：

```
button1.setOnMouseClicked()....
the corresponding property is
button1.onMouseClickedProperty().get().handle(me);//where me is some MouseEvent object 
```****

# ruby-1.9 - 如何在 Ruby 1.9 中将“slice_before”与 initial_state 一起使用？

> ID：11552179
> 
> 赞同：4
> 
> 时间：2012-07-19T00:08:53.043
> 
> 标签：ruby-1.9, ruby-1.9.3

我看到 Ruby 1.9 有一个新的枚举器，`slice_before`. [API 文档](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-slice_before)非常神秘。

特别是我对`initial_state`取值的变化感到困惑。

例如，每当元素的累进总和超过某个值时，我想将带有数字的数组拆分为子数组：

```
a = [1,2,0,1,2,3]
a.slice_before(0) do |elem, sum|
  sum += elem
  sum > 3
end.to_a 
```

预期输出：

```
[[1,2,0], [1,2], [3]] 
```

我认为总和就像一个“随身携带”或“备忘录”，`inject`但这似乎并没有成功。

此代码中的故障是一个神秘的错误：

```
TypeError: can't dup Fixnum
from (irb):43:in `each' 
```

看起来`slice_before`不接受 a`Fixnum`作为初始值。为什么？红宝石错误？

我可以通过保留我自己的状态变量来解决这个问题，但这并不是我想要的漂亮的 Ruby 语义。

```
sum = 0
a.slice_before do |elem|
  sum += elem
  sum > 3 && sum = 0
end.to_a

# => [[1, 2, 0], [1, 2], [3]] 
```

那么是否`initial_state`可用于此目的？文档中的示例似乎主要是关于文本处理的。我正在使用 Ruby 1.9.3p194。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T12:04:11.757

这`initial_state`通常是存储键值对的状态散列。

要使用状态哈希编写代码：

```
a.slice_before(sum: 0) do |elem, state|
  state[:sum] += elem
  if state[:sum] > 3
    # Reset the sum, so we'll get more elements
    state[:sum] = 0  
  end
end.to_a 
```

`initial_state`必须响应该方法`#dup`，因为它在每个循环中都重复。

`Fixnum`不起作用的原因是因为它没有响应`#dup`. Fixnum 不起作用，因为它无法跟踪每个循环的状态。

# java - 当代码抛出许多异常并且句柄相同时，哪个选择更好？

> ID：11552182
> 
> 赞同：3
> 
> 时间：2012-07-19T00:09:22.527
> 
> 标签：java, exception

当代码抛出许多异常并且句柄相同时，哪个选择更好？

```
try{
}catch(ExceptionOne e1)
{
someHandle()
}
catch(ExceptionTwo e2){
someHandle()
}
catch(ExceptionThree e3)
{
someHandle()
} 
```

或者

```
try{
}catch(Exception e1)
{
someHandle()
} 
```

有的书提到遇到异常时，尽量清楚地捕捉它，而不是尝试捕捉所有异常。

那么哪个更好呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T00:11:19.297

第一个更好。第二个捕获所有异常，这可能包括一些您不想捕获的异常。

如果您升级到 Java 7，您可以使用[可以捕获多种异常的 catch 块](http://docs.oracle.com/javase/7/docs/technotes/guides/language/catch-multiple.html)，这是一种更简洁的解决方案。

```
try {
    // Something that might throw.
}
catch(ExceptionOne | ExceptionTwo | ExceptionThree e) {
    someHandle()
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-19T00:14:38.830

如果你不关心异常是什么，你可以抛出一般的“异常：”

```
try {
    ...
} catch (Exception e) {

  } 
```

# python - Python unicodeescape 问题

> ID：11552183
> 
> 赞同：0
> 
> 时间：2012-07-19T00:09:26.270
> 
> 标签：python, char, hex, unicode-escapes

我工作了一整天，在 Python 3.2中将整数转换为形式为**"\x.."的字符串没有任何结果。**当使用 ascii 转换或其他时，我得到 '0x..' 或 '\\x..'，这不适合我。任何字节或 unicode ("\u92") 添加操作都会导致*"SyntaxError: (unicode error) 'unicodeescape' codec can't decode bytes in position 0-2: end of string in escape sequence"*

```
>>>bytes([92])
b'\\'

>>>chr(92) + "x" + str(42)
'\\x42' 

>>> str(hex(66))
'0x42'

>>>ascii(bytes([255])).replace(r"'b\", "")
File "<stdin>", line 1
   ascii(bytes([255])).replace(r"'b\", "")
                                      ^
SyntaxError: invalid syntax

>>> "\x".encode('raw_unicode_escape').decode('ascii')
  File "<stdin>", line 1
SyntaxError: (unicode error) 'unicodeescape' codec can't decode bytes in position 0-1: end of string in escape sequence 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T01:07:57.480

OY合租...

```
>>> b'\\x42'.decode('unicode-escape')
'B' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T00:32:30.463

我很难阅读这个问题，但我相信这就是你想要做的。

```
>>> aString = str('\\') + str(42)
>>> print aString
\42 
```

如果你需要 \ 之后的 x

```
>>> aString = str('\\') + 'x' + str(42)
>>> print aString
\x42 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T00:33:33.477

请注意，在`ascii(bytes([255])).replace(r"'b\", "")`，`\`之后`b`转义了以下内容`"`，从而导致`SyntaxError`.

尝试转义`\`：

```
>>>ascii(bytes([255])).replace(r"'b\\", "") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T00:37:23.413

```
>>> chr(92)
'\\' 
```

结果显示 2 个斜杠，但字符串实际上只包含一个。这就是字符串的显示方式。如果您使用`print`它，您将看到它真正包含的内容。

```
>>> r"'b\"
SyntaxError: EOL while scanning string literal 
```

原始字符串不允许以 a 结尾，`\`以便`\`可以用来转义字符串中间的引号。不确定我是否同意 Python 设计的这一方面，但可以在[为什么 Python 的原始字符串文字不能以单个反斜杠结尾？](https://stackoverflow.com/questions/647769/why-cant-pythons-raw-string-literals-end-with-a-single-backslash)

```
>>> "\x"
SyntaxError: (unicode error) 'unicodeescape' codec can't decode bytes in position 0-1: end of string in escape sequence 
```

您启动了一个转义序列，该序列将通过其十六进制数字标识一个字符，但没有在其后跟一个十六进制数字。

跟进第 1 点，也许这可以解释您的困惑：

```
>>> chr(92) + "x" + str(42)
'\\x42'
>>> print(chr(92) + "x" + str(42))
\x42 
```

# iphone - UITapGestureRecognizer 在 UIImageView 中不起作用

> ID：11552184
> 
> 赞同：32
> 
> 时间：2012-07-19T00:09:27.057
> 
> 标签：iphone, objective-c, ios, ipad, uiimageview

我有以下代码：

```
UITapGestureRecognizer *showStoryTapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(showNewsStory:)];
[showStoryTapRecognizer setDelegate:self];
[self.storyImageView_ addGestureRecognizer:showStoryTapRecognizer];
[showStoryTapRecognizer release]; 
```

然而，这不会触发 showNewsStory，这是为什么呢？我在图像视图中启用了 userInteraction。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-07-19T00:14:48.923

`UIImageView`您应该为对象启用用户交互：

```
[self.storyImageView_ setUserInteractionEnabled:YES]; 
```

* * *

 ~~~~### 编辑：~~ 

尝试删除

```
[showStoryTapRecognizer setDelegate:self]; 
```

~~`UITapGestureRecognizer`据我所知，我 认为没有它的委托方法。~~

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2012-07-19T10:56:38.963

```
UITapGestureRecognizer *oneTouch=[[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(OneTouchHandeler)];

[oneTouch setNumberOfTouchesRequired:1];

[imageView addGestureRecognizer:oneTouch];

imageView.userInteractionEnabled = YES; 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-07-19T00:52:05.627

`UIImageView``UIView`与UIKit 中的大多数其他子类不同，默认情况下禁用用户交互。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-06-21T21:30:51.050

我还注意到，在 swift3 中，如果您要添加一个手势识别器，该手势识别器也会查找目标并且目标通常是`self`，那么您必须将要添加手势识别器的 UIView 设置为`lazy var`. 否则手势识别器将无法工作。我认为这是swift3中的一个错误。理想情况下，如果您在类完全初始化之前访问变量中的 self，它应该会引发错误。下面的代码不会检测手势识别器。

```
let messageImageView: CachedImageView = {
    let iv = CachedImageView()
    iv.translatesAutoresizingMaskIntoConstraints = false
    iv.layer.cornerRadius = 16
    iv.layer.masksToBounds = true
    iv.contentMode = .scaleAspectFill
    iv.isUserInteractionEnabled = true
    let zoomTap = UITapGestureRecognizer(target: self, action: #selector(handleZoomTap))
    zoomTap.numberOfTapsRequired = 1
    iv.addGestureRecognizer(zoomTap)
    return iv
}() 
```

要解决这个问题，你必须使用`lazy var`

```
lazy var messageImageView: CachedImageView = {
    let iv = CachedImageView()
    iv.translatesAutoresizingMaskIntoConstraints = false
    iv.layer.cornerRadius = 16
    iv.layer.masksToBounds = true
    iv.contentMode = .scaleAspectFill
    iv.isUserInteractionEnabled = true
    let zoomTap = UITapGestureRecognizer(target: self, action: #selector(handleZoomTap))
    zoomTap.numberOfTapsRequired = 1
    iv.addGestureRecognizer(zoomTap)
    return iv
}() 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-07-19T01:23:18.217

也许......`action:@selector(showNewsStory)`而不是 `action:@selector(showNewsStory:)` 。请检查一下 。`UITapGestureRecognizer`这个控制器里还有其他的吗？尝试这个：

```
otherTapRecognizer.cancelsTouchesInView = NO; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-12-12T05:21:14.583

目标c ios 10

```
UITapGestureRecognizer *oneTouch=[[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(OneTouchHandeler)];

[oneTouch setNumberOfTouchesRequired:1];

[imageView addGestureRecognizer:oneTouch];

imageView.userInteractionEnabled = YES; 
```

// 快速 3.0

```
 let oneTouch = UITapGestureRecognizer(target: self, action: #selector(self.OneTouchHandeler(_:)))

imageView.addGestureRecognizer(oneTouch)

imageView.isUserInteractionEnabled = true 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-06-21T03:18:57.247

如果您已经设置`imageView.userInteractionEnabled = YES;`但操作仍然没有触发。也许是因为 imageView userInteractionEnabled 的超级视图之一是 NO；

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-04-26T22:17:25.110

添加

`storyImageView.isUserInteractionEnabled = true;`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-04-17T09:44:23.217

```
 use lazy var instead of let . Here is an example.

    lazy var loginSignUpView: LoginSignUpView = {
            let lsv = LoginSignUpView()
            lsv.loginRegisterButton.addTarget(self, action: #selector(handleLoginRegistrationButton), for: .touchUpInside)
            lsv.segmentedControlForLoginRegister.addTarget(self, action: #selector(handleSegmentedControlForLoginRegister), for: .valueChanged)
            lsv.profileImageView.addGestureRecognizer(UITapGestureRecognizer(target: self, action: #selector(handleSelectProfileImageView)))

            return lsv
        }()

@objc func handleSelectProfileImageView() {
        print("Image tapped")
    } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-11-01T08:23:08.277

如果您允许 2 种不同的手势，您应该添加下面的代码片段。例如，您使用 pickerView 并且还想检测相同 pickerView 的点击手势。

> 询问代理是否应允许两个手势识别器同时识别手势。

**目标 C**

```
 -(BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer{
    return true;
} 
```

**迅速**

```
func gestureRecognizer(_ gestureRecognizer: UIGestureRecognizer, shouldRecognizeSimultaneouslyWith otherGestureRecognizer: UIGestureRecognizer) -> Bool {
    return true
} 
```~~

# java - 在 MVC WAR 和 Batch Jar 之间共享 Spring 应用程序上下文

> ID：11552186
> 
> 赞同：1
> 
> 时间：2012-07-19T00:09:41.343
> 
> 标签：java, spring, jpa, spring-mvc, spring-batch

我有一个 Spring MVC 应用程序，当前所有内容都包含在单个 JVM 上的单个应用程序上下文中。代码分为好几层，每一层只是通过Maven依赖拉取它所依赖的层。这是我的图层示例：

Spring MVC 层 -> 服务层 -> DAO 层

DAO 层已通过 Hibernate 使用 JPA 实现，并包含一些同步部分。

现在我正在实现 Spring Batch，我希望它的服务层调用与来自 Spring MVC 层的调用位于相同的上下文/JVM 中，以充分利用 JPA 缓存和同步。

实现这一目标的最佳方法是什么？我是否将服务层变成内部 SOAP 服务？服务层是否应该拆分为单独的 WAR？

任何帮助/建议将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T07:48:11.870

将整个 Spring 批处理代码放入您的 webapp。

从 MVC 应用程序上下文加载 Spring Batch xml 文件，您的 Spring Batch bean 将在 webapp 中可用。

然后您可以使用您的 webapp 启动 Spring 批处理：它将在同一个 JVM 中执行。

# visual-studio-2010 - Visual C# 2010 - 项目未运行

> ID：11552189
> 
> 赞同：1
> 
> 时间：2012-06-26T19:08:30.550
> 
> 标签：visual-studio-2010, c#

我在一台运行良好的特定机器上创建了一个项目，但是当我尝试通过网络运行它（作为 .exe 并打开项目本身）时，它会闪烁一秒钟，然后返回到默认状态。在 VS C# 中，它甚至不会打开窗口。不过，这只发生在某些项目上，其他项目可以在我想要的任何机器上运行。重新创建整个项目解决了这个问题，但我希望这不是最好的解决方案:)。

# mysql - mysql索引中的排序规则和基数是什么意思？

> ID：11552193
> 
> 赞同：1
> 
> 时间：2012-07-19T00:10:29.957
> 
> 标签：mysql, indexing

在表格中显示索引时，有两部分排序规则和基数，我不明白它们的用法。谁能简要解释一下？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T00:17:05.360

排序规则是根据您指定的字符集进行排序的方式。见[https://dev.mysql.com/doc/refman/5.5/en/charset-charsets.html](https://dev.mysql.com/doc/refman/5.5/en/charset-charsets.html)

基数基本上是“该列包含多少独特元素”。具有低基数的表几乎没有唯一值。查找表的基数通常比特定实体（如客户）的表低得多。

[http://en.wikipedia.org/wiki/Cardinality_%28SQL_statements%29](http://en.wikipedia.org/wiki/Cardinality_%28SQL_statements%29)

# javascript - twitter 引导轮播行布局，无幻灯片

> ID：11552194
> 
> 赞同：1
> 
> 时间：2012-07-19T00:10:39.850
> 
> 标签：javascript, html, twitter-bootstrap

我一直在尝试学习和使用 twitter 引导程序，尤其是轮播元素。为此，我设法复制了文档中的示例，一切似乎都很好——按预期工作。我的示例 HTML 轮播代码位于：[http ://dpaste.com/772419/](http://dpaste.com/772419/)

但是，我想做的是，告诉引导程序不要制作幻灯片，而是在一行中显示所有三个（存在多少）图像 - 类似于亚马逊展示其产品的方式。我已阅读文档，但无法弄清楚如何做到这一点。

任何想法，指导将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T00:25:31.230

根据我过去使用引导程序的经验，我使用过这种 HTML 结构。所以我相信你可以在一张幻灯片中加载多张图片......就像下面......

```
<div class="carousel">
      <div class="carousel-inner">

    <!-- your slide -->
         <div class="item active">
                <div class="product">
                    <img src="" alt="" />
                    <p>this is a caption</p>
                </div>
                <div class="product">
                    <img src="" alt="" />
                    <p>this is a caption</p>
                </div>
                <div class="product">
                    <img src="" alt="" />
                    <p>this is a caption</p>
                </div>

         </div> 
    <!-- end slide -->

    <!-- your slide -->
         <div class="item">
                <div class="product">
                    <img src="" alt="" />
                    <p>this is a caption</p>
                </div>
                <div class="product">
                    <img src="" alt="" />
                    <p>this is a caption</p>
                </div>
                <div class="product">
                    <img src="" alt="" />
                    <p>this is a caption</p>
                </div>
         </div> 
    <!-- end slide -->

      </div>

</div> 
```

基本上每个带有标签 ITEM 的 DIV 都是一张幻灯片。ACTIVE 确定第一张幻灯片。

**编辑**

好的，所以我在本地尝试重现您的问题。看起来标题问题很可能来自 bootstrap.css 文件中的 CSS。这是代码...

```
.carousel-caption {
position: absolute;
right: 0;
bottom: 0;
left: 0;
padding: 10px 15px 5px;
background: #333;
background: rgba(0, 0, 0, 0.75);
} 
```

这里的问题是您的标题位于项目容器的底部。所以你只能看到一个的原因是因为 position:absolute; 让它们都叠放在一起。因此，对于您的情况，您最有可能需要调整此 CSS 以获得您正在寻找的内容。

**另请注意：**如果您不想更改 twitter 引导 CSS，您可以在 body 标签中添加一个类并使用伪类覆盖引导 CSS。

**如何让图片分栏显示：**

要制作图像列，您可以执行类似于此的结构...

**HTML**

```
<!-- product one -->
<div class="product-container">
    <img src="" alt="" />
    <div class="carousel-caption">
        <h4>Something For Sale</h4>
       <p>Some description</p>
    </div>
</div>

<!-- product two -->
<div class="product-container">
    <img src="" alt="" />
    <div class="carousel-caption">
        <h4>Something For Sale</h4>
       <p>Some description</p>
    </div>
</div>

<!-- product three -->
<div class="product-container">
    <img src="" alt="" />
    <div class="carousel-caption">
        <h4>Something For Sale</h4>
       <p>Some description</p>
    </div>
</div> 
```

**CSS**

```
.product-container {
   width:33%;
   float:left;
}

.product-container img {
  margin:0 auto 0 auto;
} 
```

无论如何，这应该让你进入球场......它可能需要稍微调整一下。

# python - 如何使用 python urllib2 复制数据库而不会出现错误 500？

> ID：11552206
> 
> 赞同：0
> 
> 时间：2012-07-19T00:12:54.613
> 
> 标签：python

我想在我的计算机上复制一个托管在[网站](http://archive.unctad.org/iia-dbcases/cases.aspx)上的数据库。

我尝试使用 python urllib2 并创建一个循环来打开每个链接并编写一个包含页面内容的文件。它大约适用于前一百个链接，然后我收到错误 500，似乎网站也已关闭（运行时错误）。

是因为数据库中的安全机制吗？有什么技巧可以避免吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T00:26:49.260

我还收到 HTTP 500（内部服务器错误）。所以我不认为这是一种安全机制，而可能是真正的服务器错误。

也许您的爬虫“点击”了导致服务器崩溃的链接？当然，服务器错误也可能完全独立于您的爬网工作。

无论如何，如果问题仍然存在，可能值得使用此处提供的联系方式联系数据库所有者：http: [//archive.unctad.org/iia-dbcases/](http://archive.unctad.org/iia-dbcases/)

# c++ - 使用堆栈检查 HTML 标签的平衡

> ID：11552209
> 
> 赞同：1
> 
> 时间：2012-07-19T00:13:27.273
> 
> 标签：c++, stack

我正在尝试编写一个程序，它会告诉我 HTML 文件中的所有标签是否都是平衡的，所以每个标签`<tag>` 都有一个`</tag>`. 在这一点上，我并不担心自闭标签。我认为我认为会起作用，但并不完全正确。它正在查看每个元素，而不是作为一个整体寻找打开和关闭标签。谁能告诉我我做错了什么？

```
const string opening = "<*>";
const string closing = "</*>";
string input;

int main()
{
    char element;
    stack<char> stk;
    ifstream file;

    cout << "Please Enter File name: ";
         cin >> input;

    //std::file.open(input);

    file.open(input.c_str());

    if(file.fail())
        cout<<"File is corrupt or does not exists!"<<endl;

    while(!file.eof())
    {
        file>>element;

        //push left group symbols onto stack
        if(element==opening[0])
            stk.push(element);
        else if(element==opening[1])
            stk.push(element);
        else if(element==opening[2])
            stk.push(element);

    }
    file.close();
    file.open(input.c_str());
    while(!file.eof())
    {
        file>>element;

        if(stk.top()==opening[0])
        {
            if(element==closing[0])
                stk.pop();
        }
        else if(stk.top()==opening[1])
        {
            if(element==closing[1])
                stk.pop();
        }
        else if(stk.top()==opening[2])
        {
            if(element==closing[2])
                stk.pop();
        }
    }
    file.close();

    if(!stk.empty())
        cout<<"\nILLEGAL"<<endl;
    else if(stk.empty())
        cout<<"\nLEGAL"<<endl;

    cout << "\n\nProgram complete." <<  endl;
    return 0;
} 
```

我对 C++ 非常陌生，尤其是堆栈，所以请解释答案，以便我学习。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T00:33:04.177

我发现了你的错误。你这样说：

```
 if(stk.top()==opening[0])
    {
        if(element==closing[0])
            stk.pop();
    }
    else if(stk.top()==opening[1])
    {
        if(element==closing[1])
            stk.pop();
    }
    else if(stk.top()==opening[2])
    {
        if(element==closing[2])
            stk.pop();
    } 
```

打开[0] = '<' 和关闭[0] = '<' 所以没关系。但不幸的是，这不适用于其他角色：

打开[1] = '*' 和关闭[1] = '/'

不幸的是，即使我将代码更改为：

```
 if(stk.top()==opening[0])
    {
        if(element==closing[0])
            stk.pop();
    }
    else if(stk.top()==opening[1])
    {
        if(element==closing[2])
            stk.pop();
    }
    else if(stk.top()==opening[2])
    {
        if(element==closing[3])
            stk.pop();
    } 
```

它仍然不起作用。我会进一步调查。

# ios - Xcode 内联类/方法文档？

> ID：11552210
> 
> 赞同：1
> 
> 时间：2012-07-19T00:13:33.220
> 
> 标签：ios, objective-c, xcode, comments

我想记录我的一些类，但我可以按 ALT + Click 并显示一个带有描述或返回值、抽象或参数的小弹出窗口，就像在 Xcode 中为系统中的类构建的方式一样.

我**不是**在谈论像 Doxygen 那样使用所有文档制作 HTML。我想从实现它的地方获得方法或类的内联信息。

# c# - 应用程序之间的网络通信

> ID：11552214
> 
> 赞同：-1
> 
> 时间：2012-07-19T00:14:28.043
> 
> 标签：c#, networking

您好，我将构建两个测试应用程序，一个在用户计算机上运行。它将是一种系统托盘类型的后台应用程序，用于管理指定文件夹的内容。另一个是 Admin 类型的屏幕，显示当前网络中的哪些计算机正在运行第一个应用程序并读取一些数据（文件夹的内容）。

如何通过网络传输数据以查看我的应用程序中的特定数据？同样，我只想查看正在运行的应用程序以及它们正在发送的数据（从管理屏幕）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T07:29:59.670

这种应用程序间通信非常适合[ØMQ](http://www.zeromq.org/)，它是一个异步消息传递库，具有套接字风格的 API，并且不需要代理 - 有一个很好的[C# Binding](http://www.zeromq.org/bindings%3aclr)。

代码示例：

```
var publisher = new ZmqPublishSocket {
    Identity = Guid.NewGuid().ToByteArray(),
    RecoverySeconds = 10
};

publisher.Bind( address: "tcp://127.0.0.1:9292" );

// Add a subscriber.
var subscriber = new ZmqSubscribeSocket();

subscriber.Connect( address: "tcp://127.0.0.1:9292" );
subscriber.Subscribe( prefix: "" ); // subscribe to all messages

// Add a handler to the subscriber's OnReceive event
subscriber.OnReceive += () => {
    String message;
    subscriber.Receive( out message, nonblocking: true );

    Console.WriteLine( message );
};

// Publish a message to all subscribers.

publisher.Send( "Hello world!" ); 
```

# sql - SQL - 修改特定行条目的文本

> ID：11552216
> 
> 赞同：0
> 
> 时间：2012-07-19T00:14:32.567
> 
> 标签：sql, view, format

假设我在一个简单的 SELECT 语句中有一个 SQL 列。

如何在不覆盖数据的情况下修改特定行条目的文本？

我正在考虑为我在 VS 中创建的表缩进一些特定条目（例如，每个名为“名称”的条目都将更改为“名称”）。所以我想修改我的 SQL 查询以更改某些特定字段在调用时缩进。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T00:19:24.570

对于 MySQL，您可以使用[替换](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_replace)

```
SELECT REPLACE(field, 'Name', ' Name') 
```

对于 Oracle，您可以进行[翻译](http://www.techonthenet.com/oracle/functions/translate.php)

```
SELECT TRANSLATE(...). 
```

您也可以通过[CASE](http://dev.mysql.com/doc/refman/5.0/en/case-statement.html)语句在 MySQL 和 T-SQL 中执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T00:21:42.083

在 mysql...

```
UPDATE TABLE_NAME SET NAME = CONCAT(' ', NAME) WHERE ... 
```

# php - cakephp 1.2 requestAction 分页

> ID：11552221
> 
> 赞同：0
> 
> 时间：2012-07-19T00:15:06.563
> 
> 标签：php, cakephp, cakephp-1.2

我正在使用 Cakephp 1.2。我应该能够使用分页按 AZ 或 ZA 进行排序。但是，我在下面收到此错误。在其他资源中找不到太多信息。请帮忙。

注意 (8)：未定义变量：分页器 [APP/views/elements/products.ctp，第 25 行] 致命错误：在 /Applications/MAMP/htdocs/development03/app 中的非对象上调用成员函数 sort() /views/elements/products.ctp 第 25 行

**控制器**

```
var $helpers = array('Html','Form','Ajax','Javascript', 'Text');

// Pagination 
var $paginate = array('limit' => 8, 'page' => 1,'order'=>array('Product.name' => 'asc')); 
```

函数列表（）{

```
 $categories = $this->Category->find('all', array('order' => 'Category.id ASC' ));       
    $categories = $this->Category->buildCategories($categories, $this->passedArgs['c']);
    $children_ids  = $this->Category->getChildCategories($categories, $this->passedArgs['c'], true);
    $allCatIds = array_merge(array($this->passedArgs['c']), $children_ids);
    //return lists
    return $this->Product->lists($allCatIds);
} 
```

元素

```
<?php 

$products = $this->requestAction("/products/lists/c:$catId/"); 

?>

 <?php echo $paginator->sort('Name', 'name', array('title' => 'Sorting Title Alphabetically','class' => 'normalTip')); ?>

<?php foreach ($products as $product): ?>
 ...
<?php endforeach; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T04:06:32.057

要在你的元素中使用分页器类，你必须在你的控制器中包含辅助类。所以你的控制器的代码看起来像：

```
var $helpers = array('Html','Form','Ajax','Javascript', 'Text', 'Paginator'); 
```

更多说明：“致命错误：在非对象上调用成员函数 sort()”是在您尝试通过从未被任何类实例化的对象访问方法时出现的。所以你的应用程序必须知道它是哪种对象。

请问它是否不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T01:00:48.843

听起来 $paginator 没有设置任何东西。

如果你把这段代码放在你的视图中，它会说 $paginator 是 NULL 吗？

```
var_dump($paginator); 
```

从提供的代码很难说，但我假设你要么

1.  没有使 $paginator 可用于您的控制器中的视图
2.  完全使用了不正确的变量名

# python - 如何在继承 wx.Frame 的类之外的类中创建 staticBitmap

> ID：11552225
> 
> 赞同：1
> 
> 时间：2012-07-19T00:15:35.627
> 
> 标签：python, class, inheritance, wxpython, python-2.7

我的应用程序具有以下结构：

```
class GameWindow(wx.Frame):
    imageFile = r"C:\Users\Trufa\Desktop\pyll\img\ball.png"
    data = open(imageFile, "rb").read()
    stream = cStringIO.StringIO(data)
    bmp = wx.BitmapFromImage(wx.ImageFromStream(stream))
    image = wx.Image(imageFile, wx.BITMAP_TYPE_ANY).ConvertToBitmap()
    self.ball = wx.StaticBitmap(self, -1, image, (0, 0), (image.GetWidth(), image.GetHeight()))
    self.ball.Center()

if __name__ == '__main__':    
    app = wx.App()
    GameWindow(None, title='Pyll')
    app.MainLoop() 
```

这个简化版本按预期工作，创建球然后将其居中。

现在我尝试了各种方法，但无法解决以下问题：我想在一个单独的类中创建球及其方法，如下所示：

```
class Ball:
    #Code to make the ball
    def move(self):
        self.ball.Center() 
```

首先，这是一个很好的方法，如果我尝试留在`GameWindow`课堂上，我认为我会从将`Ball`概念抽象为一个类中受益。

无论如何，这怎么能做到。我确定 Ball 类必须从某人那里继承，但我不确定从谁那里继承。

我尝试继承`GameWindow`和继承`wx.Frame`，但没有任何好的结果，但我不确定我是否在概念上做错了，或者编程错了，并且由于我缺乏对编程类和 OO 的一般知识而无法做到在蟒蛇。

总而言之，我想要这样的东西：

```
class Ball():#What should I inherit from?
    imageFile = r"C:\Users\Trufa\Desktop\pyll\img\ball.png"
    data = open(imageFile, "rb").read()
    stream = cStringIO.StringIO(data)
    bmp = wx.BitmapFromImage(wx.ImageFromStream(stream))
    image = wx.Image(imageFile, wx.BITMAP_TYPE_ANY).ConvertToBitmap()
    self.ball = wx.StaticBitmap(self, -1, image, (0, 0), (image.GetWidth(), image.GetHeight()))
    def move(self):
        self.ball.Center() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:36:08.633

您真正需要做的只是子类 wx.StaticBitmap。至少，这是我对你想要做什么的理解。这是一个简单的例子：

```
import wx

########################################################################
class Ball(wx.StaticBitmap):
    """"""

    #----------------------------------------------------------------------
    def __init__(self, parent, imageFile):
        """Constructor"""
        wx.StaticBitmap.__init__(self, parent=parent)
        image = wx.Image(imageFile, wx.BITMAP_TYPE_ANY)
        self.SetBitmap(wx.BitmapFromImage(image))
        self.Center()

########################################################################
class GamePanel(wx.Panel):
    """"""

    #----------------------------------------------------------------------
    def __init__(self, parent):
        """Constructor"""
        wx.Panel.__init__(self, parent)

        sizer = wx.BoxSizer(wx.VERTICAL)
        self.ball = Ball(self, "ball.png")
        sizer.Add(self.ball, 0, wx.ALL|wx.CENTER, 5)
        self.SetSizer(sizer)

########################################################################
class GameWindow(wx.Frame):

    #----------------------------------------------------------------------
    def __init__(self, title):
        """"""
        wx.Frame.__init__(self, None, title=title, size=(400,400))
        panel = GamePanel(self)
        self.Show()

#----------------------------------------------------------------------
if __name__ == '__main__':    
    app = wx.App()
    GameWindow('Pyll')
    app.MainLoop() 
```

# html - Firefox - 从未装饰的复选框中删除边框

> ID：11552228
> 
> 赞同：1
> 
> 时间：2012-07-19T00:16:12.253
> 
> 标签：html, css, firefox, checkbox, border

我有一个复选框，有`appearance: none;`. 这在 chrome 中工作，但在 Firefox 中，它留下了我无法删除的嵌入边框。我已经试过`border: none`了。

我在这里有一个小提琴：http: [//jsfiddle.net/jcJJ5/](http://jsfiddle.net/jcJJ5/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T01:09:20.507

不幸的是，在复选框上设置任何属性似乎没有帮助。

我发现的唯一简单的解决方法是将复选框包装在 a 中`<div>`，并遮盖边框。

见我的[小提琴](http://jsfiddle.net/jcJJ5/14/)。

**HTML：**

```
<div class="checkbox-container"><input type="checkbox" /></div> 
```

**CSS：**

```
input[type="checkbox"] {
    width: 110px;
    height: 110px;
    background: red;
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    border: none;
    position: relative;
    left: -5px;
    top: -5px;
}
.checkbox-container {
    position: absolute;
    display: inline-block;
    margin: 20px;
    width: 100px;
    height: 100px;
    overflow: hidden;
} 
```

顺便说一句，（至少在 Firefox 中），设置`background`没有任何效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T02:36:30.593

您可以尝试设置 -moz-box-shadow: 两条线的颜色较浅，以覆盖 Firefox 创建的深色插图...

此外，我尝试在萤火虫中玩耍，如果你打开 -moz-appearance: none，复选框完全没问题，并且具有正常的样式，你不需要玩弄。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-03T12:32:37.957

**从 2021 年开始更新**，似乎`appearance`在 Firefox 中运行良好已有一段时间了。这个[问题](https://bugzilla.mozilla.org/show_bug.cgi?id=605985)涵盖了这个过程。

# c# - 带有 Nullable 的 C# 的行为

> ID：11552229
> 
> 赞同：1
> 
> 时间：2012-07-19T00:16:15.607
> 
> 标签：c#, nullable

在 C# 中

```
`int? a1 = 0;
int? a2 = 100;
a1 = a1 | default(int?);
a2 = a2 | default(int?);` 
```

`a1 和 a2 都为空。如果有人能解释它的工作原理，那就太好了。

## 更新

我提出这个疯狂示例的原因是 int? 被布尔取代？和绑定过程。

```
`bool? a1 = null;
bool? a2 = true;
a1 = a1 | default(bool?);
a2 = a2 | default(bool?);` 
```

`这段代码没有给出警告说表达式的结果总是空的。推断的原因是**'I_dont_know'|int = 'I_dont_know'**其中**'I_dont_know' | 真 = 真**`

 `如我错了请纠正我

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-19T00:23:33.190

这是因为以下原因..

```
1] default(int?) will always return 'null'
2] null | <anything> returns 'null' 
```

[http://msdn.microsoft.com/en-us/library/xwth0h0d%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/xwth0h0d%28v=vs.80%29.aspx)

顺便说一句，Visual Studio 应该抱怨你的表达式总是解析为 null。（一个警告）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-19T00:23:26.617

首先请注意，这与写作没有什么不同：

```
int? a1 = 0   | default(int?);
int? a2 = 100 | default(int?); 
```

这相当于：

```
int? a1 = 0   | null;
int? a2 = 100 | null; 
```

因为**[在引用类型上使用的 default 关键字产生`null`](http://msdn.microsoft.com/en-us/library/xwth0h0d%28v=vs.80%29.aspx)**. 而且因为

```
<any integer> | null 
```

总是评估为`null`，你有：

```
int? a1 = null;
int? a2 = null; 
```

这就解释了为什么这两个值都是`null`.``

# cgi - 使用 HTML5 标签将实时 PCM 流式传输到 Web 浏览器

> ID：11552234
> 
> 赞同：1
> 
> 时间：2012-07-19T00:16:50.123
> 
> 标签：cgi, fastcgi, audio-streaming, pcm, lame

我目前有一个应用程序，它通过 UDP 从远程源接收实时的原始 PCM 数据。我想通过一个简单、直接的 HTML5 标记将其流式传输到 Web 浏览器。在研究这个项目时，我多次遇到 IceCast，据我所知，它可以配置为接收原始 PCM 并提供 MPEG 音频流，从而满足我的需求。但是，无论这可能与 IceCast 一起工作或不工作，我都想实现我自己的自定义解决方案。

所以，用更具体的术语来表述这个问题，解决这个问题是否像 LAME 一样简单地在原始 PCM 数据到达时对其进行编码并通过 HTTP 传递它？我认为这可以作为 CGI/FastCGI 应用程序工作，但我绝不会拘泥于这种形式的解决方案。IceCast 的幕后是否还有其他魔法？最后，进行完整性检查：我不需要先发送特殊的“流/文件头”，对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T00:26:23.787

不需要任何额外的标题。然而，Icecast 正在做的、CGI/FCGI 应用程序无法做的主要额外事情（至少，不是很好）是将流分发给多个并发侦听器。这部分很难做好；我建议您使用 Icecast，除非有令人信服的理由避免使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T10:26:05.850

是的，您可以使用 ogg 流式传输 pcm。它创建页面，这允许流式传输仍然使用文件容器。但这又意味着只有 firefox 和 chrome。实际上有一个音频 api javascript。如果您在客户端请求块和缓冲区中的 pcm 数据并将其提供给音频 api，它可以解决问题。此 api 用于客户端的音频处理。再次不要期望超级棒的速度。[https://dvcs.w3.org/hg/audio/raw-file/tip/webaudio/specification.html](https://dvcs.w3.org/hg/audio/raw-file/tip/webaudio/specification.html)

# iphone - UITableViewCell 的子视图偶尔会消失

> ID：11552238
> 
> 赞同：1
> 
> 时间：2012-07-19T00:17:17.797
> 
> 标签：iphone, objective-c, ios, uitableview

我有一个`UITableViewCell`子类，它有一个名为 entryView 的属性来代替只读的 cell.contentView。我以为我正确地使用了表格视图——记住每个条目都会重复使用单元格，并且每次都需要添加所有内容。然而，偶尔滚动时，entryView 会在单元格上消失。单元格仍然存在，但 entryView 似乎已从 superview 中删除。这是我的 cellForRowAtIndexPath：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Cell";
    JTimelineCell *cell = (JTimelineCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[JTimelineCell alloc] initWithStyle:UITableViewCellStyleDefault
                                    reuseIdentifier:CellIdentifier];

    }

    JTimelineCellContentView *contentView;

    Entry *entry = [_fetchedResultsController objectAtIndexPath:indexPath];

    if ([self.cellContentCache objectForKey:entry.entryID]) {
        contentView = [self.cellContentCache objectForKey:entry.entryID];

        contentView.frame = cell.bounds;
        [contentView setNeedsDisplay];
    }
    else {

        contentView = [[JTimelineCellContentView alloc] initWithFrame:cell.bounds];

        [self.cellContentCache setObject:contentView forKey:entry.entryID];

        contentView.time = [NSDate timeStringForTime:entry.creationDate];

        contentView.message = entry.message;

        [cell setNeedsDisplay];
}

    [cell.entryView removeFromSuperview];
    cell.entryView = contentView;

    [cell addSubview:cell.entryView];

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T00:24:55.317

我相信您在另一个问题中发布了类似的内容。您不能缓存单元格的 contentView。您可以缓存图像、字符串、数字、值等 - 但最后，当您获得一个单元格时，您需要检索将显示这些值的元素，然后设置它们的值以执行此操作。因此，您可以缓存图像、字符串、CGRect 等 - 然后当被要求填充单元格时，您可以查看缓存，如果有效则获取您缓存的值。如果未设置缓存，则需要从头开始创建它们。

每次您获得特定部分/行的单元格时，它都会有所不同。它可能包含旧值，也可能是新值。您需要为每个项目设置每个 GUI 元素。一种便于找到这些元素的方法是给每个元素一个唯一的标签，这样您就可以使用 [cell.contentView viewForTag:xxx] 来获取项目，然后设置它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-19T05:46:24.460

如果是的话，你是否使用了**heightForRowAtIndexPath**方法，那么在我的情况下增加它的高度解决问题我正在尝试类似的修复，它让我发疯。

# cron - CentOS 上的 crontab 配置问题？

> ID：11552241
> 
> 赞同：1
> 
> 时间：2012-07-19T00:18:04.533
> 
> 标签：cron, centos, crontab

我已经在我的 CentOS 服务器中安排了一个 cron 作业，让它在昨晚晚上 8 点运行，它只是调用一个 URL 并将输出转储到一个文件中。所以我在我的 crontab 中所做的如下所示，

```
* 20 * * wed root curl http://www.something.com/index/exportcustomers?delta=1 >> /home/myuser/logs/cron_customer.log 
```

所以我预计这将在周三（昨晚）晚上 8 点运行一次。但我发现它每分钟都运行一个小时。意味着它从晚上 8 点开始，每分钟运行一次，直到晚上 9 点才停止。

我只希望它在晚上 8 点开始，它应该调用一次 url，然后它应该停止，就是这样。为此，我在我的 crontab 配置中做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T02:11:44.863

为此，我认为正确的 cron 语法应该是：

```
0 20 * * wed root curl http://www.something.com/index/exportcustomers?delta=1 >> /home/myuser/logs/cron_customer.log 
```

希望这会有所帮助~！

# cvs - cvs结帐：用户 无法阅读

> ID：11552242
> 
> 赞同：0
> 
> 时间：2012-07-19T00:18:20.687
> 
> 标签：cvs

我绝对不是很熟悉 cvs，但希望能得到一些帮助来解决这个问题。

Ubuntu 12.04 LTS (GNU/Linux 3.2.0-26-generic-pae i686)

[user]~$ cvs -d [一些有效路径] checkout [folder]/[file.ext]

得到我：

cvs checkout：用户[用户]无法读取[文件夹]

是的，cvslockd 正在运行，不，我不确定它是否配置正确。文件系统权限 (chmod) 似乎设置正确。

从互联网上，我很难找到其他人发生的同样问题，但这个链接是[一个例子](http://cvs2svn.tigris.org/ds/viewMessage.do?dsForumId=1670&viewType=browseAll&dsMessageId=2908462)

干杯，史蒂夫。

# java - 何时使用 @QueryParam 与 @PathParam

> ID：11552248
> 
> 赞同：321
> 
> 时间：2012-07-19T00:18:57.290
> 
> 标签：java, rest, jax-rs

我不是在问这里已经问过的问题： [@PathParam 和 @QueryParam 有什么区别](https://stackoverflow.com/questions/5579744/what-is-the-difference-between-pathparam-and-queryparam)

这是一个“最佳实践”或约定问题。

你什么时候用`@PathParam`vs `@QueryParam`。

我能想到的决定可能是使用两者来区分信息模式。让我在下面说明我的 LTPO - 不太完美的观察。

PathParam 的使用可以保留给信息类别，这将很好地落入信息树的一个分支中。PathParam 可用于深入了解实体类层次结构。

然而，QueryParam 可以保留用于指定属性以定位类的实例。

例如，

*   `/Vehicle/Car?registration=123`
*   `/House/Colonial?region=newengland`

`/category?instance`

```
@GET
@Path("/employee/{dept}")
Patient getEmployee(@PathParam("dept")Long dept, @QueryParam("id")Long id) ; 
```

对比`/category/instance`

```
@GET
@Path("/employee/{dept}/{id}")
Patient getEmployee(@PathParam("dept")Long dept, @PathParam("id")Long id) ; 
```

对比`?category+instance`

```
@GET
@Path("/employee")
Patient getEmployee(@QueryParam("dept")Long dept, @QueryParam("id")Long id) ; 
```

我不认为有这样做的标准惯例。有没有？但是，我想听听人们如何使用 PathParam 与 QueryParam 来区分他们的信息，就像我上面举例说明的那样。我也很想听听这种做法背后的原因。

* * *

## 回答 #1

> 赞同：294
> 
> 时间：2012-07-19T20:49:24.180

REST 可能不是这样的标准，但阅读一般 REST 文档和博客文章应该为您提供一些指导，以了解构建 API URL 的好方法。大多数 REST API 往往在路径中只有资源名称和资源 ID。如：

```
/departments/{dept}/employees/{id} 
```

一些 REST API 使用查询字符串进行过滤、分页和排序，但由于 REST 不是一个严格的标准，我建议您检查一些 REST API，例如[github](http://developer.github.com/v3/repos/)和[stackoverflow](https://api.stackexchange.com/docs)，看看哪些方法适合您的用例。

我建议将任何必需的参数放在路径中，任何可选参数当然应该是查询字符串参数。在尝试编写匹配不同组合的 URL 处理程序时，将可选参数放在路径中最终会变得非常混乱。

* * *

## 回答 #2

> 赞同：106
> 
> 时间：2012-07-19T01:14:10.353

这就是我所做的。

如果有根据 id 检索记录的场景，例如需要获取 id 为 15 的员工的详细信息，则可以使用 @PathParam 获取资源。

```
GET /employee/{id} 
```

如果您需要获取所有员工的详细信息，但一次只能获取 10 个，您可以使用查询参数

```
GET /employee?start=1&size=10 
```

这表示起始员工 id 1 获得 10 条记录。

总而言之，使用@PathParam 进行基于id 的检索。用户 @QueryParam 用于过滤器，或者如果您有用户可以通过的任何固定选项列表。

* * *

## 回答 #3

> 赞同：49
> 
> 时间：2013-04-03T14:00:25.337

我认为如果参数标识了一个特定的实体，你应该使用一个路径变量。例如，要获取我博客上的所有帖子，我请求

```
GET: myserver.com/myblog/posts 
```

要获得 id = 123 的帖子，我会要求

```
GET: myserver.com/myblog/posts/123 
```

但要过滤我的帖子列表并获取自 2013 年 1 月 1 日以来的所有帖子，我会要求

```
GET: myserver.com/myblog/posts?since=2013-01-01 
```

在第一个示例中，“帖子”标识了一个特定实体（整个博客帖子集合）。在第二个示例中，“123”还表示特定实体（单个博客文章）。但在最后一个示例中，参数“since=2013-01-01”是过滤帖子集合而不是特定实体的请求。分页和排序将是另一个很好的例子，即

```
GET: myserver.com/myblog/posts?page=2&order=backward 
```

希望有帮助。:-)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-07-19T00:35:19.743

我个人使用的方法是“如果用户将包含这些参数的 URL 加入书签有意义，则使用 PathParam”。

例如，如果用户配置文件的 URL 包含一些配置文件 id 参数，因为这可以由用户添加书签和/或通过电子邮件发送，我将包含该配置文件 id 作为路径参数。此外，另一个考虑因素是包含路径参数的 URL 表示的页面不会改变——用户将设置他/她的个人资料，保存它，然后不太可能从那里改变那么多；这意味着网络爬虫/搜索引擎/浏览器/等可以根据路径很好地缓存此页面。

如果 URL 中传递的参数可能会更改页面布局/内容，那么我会将其用作查询参数。例如，如果配置文件 URL 支持指定是否显示用户电子邮件的参数，我会认为这是一个查询参数。（我知道，可以说，你可以说它`&noemail=1`或任何参数都可以用作路径参数并生成 2 个单独的页面——一个带有电子邮件，一个没有它——但从逻辑上讲，情况并非如此：它仍然是显示或不显示某些属性的同一页面。

希望这会有所帮助——我很欣赏解释可能有点模糊:)

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-07-19T00:43:40.127

您可以使用查询参数进行过滤，使用路径参数进行分组。以下链接有关于[何时使用 pathParams 或 QueryParams 的详细信息](https://stackoverflow.com/questions/6345769/when-to-use-pathparams-or-queryparams)

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-02-13T09:11:39.030

这是一个非常有趣的问题。

你可以同时使用它们，关于这个主题没有任何严格的规则，但是使用 URI 路径变量有一些优点：

*   *缓存*：互联网上的大多数 Web 缓存服务在包含查询参数时不会缓存 GET 请求。他们这样做是因为有很多 RPC 系统使用 GET 请求来更改服务器中的数据（失败！！Get 必须是一种安全的方法）

但是如果你使用路径变量，所有这些服务都可以缓存你的 GET 请求。

*   *层次结构*：路径变量可以表示层次结构：/City/Street/Place

它为用户提供了有关数据结构的更多信息。

但是，如果您的数据没有任何层次关系，您仍然可以使用路径变量，使用逗号或分号：

/城市/经度、纬度

通常，当参数的顺序很重要时使用逗号，当顺序无关紧要时使用分号：

/IconGenerator/红色;蓝色;绿色

除了这些原因之外，在某些情况下使用查询字符串变量很常见：

*   当您需要浏览器自动将 HTML 表单变量放入 URI 时
*   当你处理算法时。例如谷歌引擎使用查询字符串：

http://www.google.com/search?q=rest

总而言之，没有任何充分的理由使用其中一种方法，但只要可以，请使用 URI 变量。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-04-20T17:40:49.903

[来自维基百科：统一资源定位器](https://en.wikipedia.org/wiki/Uniform_Resource_Locator)

**包含数据的路径**，*通常以分层形式组织*，显示为由斜线分隔的一系列段。

**一个可选的查询**，用问号 (?) 与前面的部分分隔，包含*非分层数据*的查询字符串。

— 根据 URL 的概念设计，我们可以为分层数据/指令/定位器组件实现 PathParam，或者在数据不分层时实现 QueryParam。这是有道理的，因为路径是自然排序的，而查询包含可以任意排序的变量（无序变量/值对）。

之前的一位评论者写道，

> 我认为如果参数标识了一个特定的实体，你应该使用一个路径变量。

另一位写道，

> 使用 @PathParam 进行基于 id 的检索。用户 @QueryParam 用于过滤器，或者如果您有用户可以通过的任何固定选项列表。

其他，

> 我建议将任何必需的参数放在路径中，任何可选参数当然应该是查询字符串参数。

— 然而，人们可能会实施一种灵活的、非分层的系统来识别特定实体！一个人可能在一个 SQL 表上有多个唯一索引，并允许使用构成唯一索引的字段的任意组合来识别实体！不同的组合（可能也有不同的排序），可能用于来自各种相关实体（引用者）的链接。在这种情况下，我们可能正在处理用于识别单个实体的非分层数据——或者在其他情况下，可能只指定某些变量/字段——唯一索引的某些组件——并检索一个列表/记录集。在这种情况下，将 URL 实现为 QueryParams 可能更容易、更合乎逻辑和更合理！

一个长的十六进制字符串会稀释/减少路径其余部分中关键字的值吗？[将变量/值放置在路径或查询中](https://webmasters.stackexchange.com/questions/51/why-is-it-preferable-to-use-paths-with-slashes-instead-of-query-string-variables)可能值得考虑潜在的 SEO 影响，以及我们是否希望用户能够通过编辑地址栏的内容来遍历/探索 URL 的层次结构的人机界面含义。我的 404 Not Found 页面使用 SSI 变量自动将损坏的 URL 重定向到其父级！搜索机器人也可能遍历路径层次结构。另一方面，就我个人而言，当我在社交媒体上分享 URL 时，我会手动删除任何私有的唯一标识符——通常是通过截断 URL 中的查询，只留下路径：在这种情况下，放置唯一标识符有一些实用性在路径中而不是在查询中。我们是否想促进将路径组件用作粗略的用户界面，可能取决于数据/组件是否是人类可读的。人类可读性的问题在某种程度上与层次结构问题有关：通常，可以表示为人类可读关键字的数据也是分层的；而分层数据通常可以表示为人类可读的关键字。（搜索引擎本身可能被定义为增加使用 URL 作为用户界面。）关键字或指令的层次结构可能没有严格排序，但它们通常足够接近，我们可以覆盖路径中的其他情况，并且[将一个选项标记为“规范”案例](https://support.google.com/webmasters/answer/139066?hl=en)。

从根本上说，我们可以用每个请求的 URL 来回答几种问题：

1.  我们要求/提供什么样的记录/东西？
2.  我们对哪些（哪些）感兴趣？
3.  我们希望如何呈现信息/记录？

几乎可以肯定，Q1 最好由路径或 PathParams 覆盖。Q3（可能通过一组任意排序的可选参数和默认值来控制）；几乎可以肯定 QueryParams 覆盖得最好。Q2：这取决于……</p>

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-05-14T17:10:44.313

正如theon 所说，REST 不是标准。但是，如果您希望实现基于标准的 URI 约定，则可以考虑[oData URI 约定](http://www.odata.org/documentation/odata-version-2-0/uri-conventions)。版本 4 已被[批准为 OASIS 标准](http://www.odata.org/blog/status-updates-of-odata-libraries-that-support-odata-version-4-0/)，并且存在用于各种语言的 oData 库，包括通过[Apache Olingo](http://olingo.incubator.apache.org/)的 Java 。不要因为它是微软的产物而让你失望，因为它也[获得了其他行业参与者的支持](https://www.oasis-open.org/news/pr/oasis-approves-odata-4-0-standards-for-an-open-programmable-web)，包括 Red Hat、Citrix、IBM、Blackberry、Drupal、Netflix Facebook 和 SAP

[此处列出了更多采用者](http://chriswoodruff.com/2012/05/24/the-great-ecosystem-of-the-open-data-protocol-odata/)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-12-06T13:24:33.923

您可以同时支持查询参数和路径参数，例如，在资源聚合的情况下——当子资源的集合本身就有意义时。

```
/departments/{id}/employees
/employees?dept=id 
```

查询参数可以支持分层和非分层子集；路径参数仅是分层的。

资源可以表现出多个层次结构。如果您要查询跨层次边界的广泛子集合，请支持短路径。

```
/inventory?make=toyota&model=corolla
/inventory?year=2014 
```

使用查询参数来组合正交层次结构。

```
/inventory/makes/toyota/models/corolla?year=2014
/inventory/years/2014?make=toyota&model=corolla
/inventory?make=toyota&model=corolla&year=2014 
```

在组合的情况下仅使用路径参数——当资源与其父级分离时没有意义，并且所有子级的全局集合本身不是有用的资源。

```
/words/{id}/definitions
/definitions?word=id   // not useful 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2020-08-31T06:20:48.477

在谈论 QueryParam 和 PathParam 之前。让我们首先了解 URL 及其组件。URL 由端点 + 资源 + queryParam/PathParam 组成。

例如，

```
URL: https://app.orderservice.com/order?order=12345678 
```

或者

```
URL: https://app.orderservice.com/orders/12345678 
```

在哪里

端点：[https ://app.orderservice.com](https://app.orderservice.com)

资源：订单

查询参数：订单=12345678

路径参数：12345678

`@QueryParam:`

当要求根据某些标准/标准过滤请求时，使用 QueryParam。标准用 ? 在 URL 中的资源之后。可以使用 & 符号在 queryParam 中指定多个过滤条件。

例如：

> `https://app.orderservice.com/orders?order=12345678 & customername=X`

`@PathParam:`

当需要根据 guid/id 选择特定订单时，使用 PathParam。PathParam 是 URL 中资源的一部分。

例如：

> `https://app.orderservice.com/orders/12345678`

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2021-07-23T05:59:30.290

PATH PARAMETER - 路径参数是 URL 路径中的一个变量，有助于指向某些特定资源。

```
Example - https://sitename.com/questions/115 
```

在这里，如果 115 是路径参数，则可以将其更改为其他有效数字以获取/指向同一应用程序上的某些其他资源。

QUERY PARAMETER - 查询参数是 URL 路径中的变量，用于过滤列表中的某些特定资源。

```
Example - https://sitename.com/questions/115?qp1=val1&qp2=val2&qp3=val3 
```

这里 qp1、qp2 和 qp3 是查询变量，它们的值分别为 val1、val2 和 val3。这些可用于在获取/保存我们的数据时用作过滤器。查询变量总是附加在 URL 中的问号 (?) 之后。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2014-08-27T14:54:42.760

原因其实很简单。使用查询参数时，您可以输入诸如“/”之类的字符，并且您的客户端不需要对它们进行 html 编码。还有其他原因，但这是一个简单的例子。至于何时使用路径变量。我会说，每当您处理 id 或路径变量是查询的方向时。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2014-12-18T12:27:57.310

我举一个例子来了解我们什么时候使用`@Queryparam`和`@pathparam`

例如，我正在学习一个资源是`carResource`类

如果你想让你的资源方法的输入是强制性的，那么使用参数类型 as `@pathaparam`，如果你的资源方法的输入应该是可选的，那么保持那个参数类型作为`@QueryParam`参数

```
@Path("/car")
class CarResource
{
    @Get
    @produces("text/plain")
    @Path("/search/{carmodel}")
    public String getCarSearch(@PathParam("carmodel")String model,@QueryParam("carcolor")String color) {
        //logic for getting cars based on carmodel and color
            -----
        return cars
    }
} 
```

为此资源传递请求

```
req uri ://address:2020/carWeb/car/search/swift?carcolor=red 
```

如果你像这样给req，resouce将给出基于的汽车型号和颜色

```
 req uri://address:2020/carWeb/car/search/swift 
```

如果你给 req 这样的 resoce 方法将只显示基于 swift 模型的汽车

```
req://address:2020/carWeb/car/search?carcolor=red 
```

如果你这样给出，我们将得到 ResourceNotFound 异常，因为在汽车资源类中我声明了汽车模型，因为`@pathPram`那是你必须并且应该将汽车模型作为 reQ uri 否则它不会将 req 传递给资源，但如果你不传递颜色它还将req传递给资源，因为颜色`@quetyParam`在req中是可选的。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-01-21T12:03:12.327

1.  `@QueryParam`可以方便地与 Default Value 注解一起使用，这样可以避免在未传递查询参数时出现空指针异常。

当您想从 GET 请求中解析查询参数时，您可以简单地为将处理 GET 请求的方法定义相应的参数并使用注释对其进行`@QueryParam`注释

2.  `@PathParam`提取 URI 值并匹配到`@Path`. 因此得到输入参数。2.1`@PathParam`可以多于一个并且设置为方法参数

    ```
    @Path("/rest")
    public class Abc {

        @GET
        @Path("/msg/{p0}/{p1}")
        @Produces("text/plain")
        public String add(@PathParam("p0") Integer param1, @PathParam("p1")  Integer param2 )
        {
            return String.valueOf(param1+param2);
        }
    } 
    ```

在上面的例子中
`http://localhost:8080/Restr/rest/msg/{p0}/{p1}`，
`p0`匹配`param1`和`p1`匹配`param2`。所以对于 URI
`http://localhost:8080/Restr/rest/msg/4/6`，
我们得到了结果`10`。

在 REST 服务中，JAX-RS 提供`@QueryParam`和`@FormParam`两者都用于接受来自 HTTP 请求的数据。可以通过 GET 和 POST 等不同的方法提交 HTTP 表单。

`@QueryParam`：接受 GET 请求并从查询字符串中读取数据。

`@FormParam`：接受 POST 请求并从 HTML 表单或媒体的任何请求中获取数据

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-02-22T01:32:39.387

简而言之，

`@Pathparam`适用于通过资源和查询字符串传递的值

*   `/user/1`
*   `/user?id=1`

`@Queryparam`适用于仅传递查询字符串的值

*   `/user?id=1`

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-11-20T09:59:31.320

对于资源名称和 ID，我使用`@PathParams`. 对于可选变量，我使用`@QueryParams`

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-07-05T07:32:50.333

据我了解：

1.  使用`@PathParam`- 当它是强制性项目时，例如 ID

    获取/气球/{id}

2.  使用`@QueryParam`- 当您拥有确切的资源但需要根据一些可选特征（例如颜色、大小等）对其进行过滤时。

    获取 /balloon/123?color=red&size=large

# ios - iOS 内存管理工具

> ID：11552255
> 
> 赞同：1
> 
> 时间：2012-07-19T00:19:48.347
> 
> 标签：ios, xcode, memory

我有几个关于内存管理的问题。我正在使用 ARC，xcode 4.2.1，部署到 ios 5.0+

1) 您如何知道您的应用何时有效且正确地管理内存？如果它没有泄漏内存，正如您在仪器泄漏工具中测量的那样，那么您的应用程序是否完全健康？

2) 我是否应该使用 Leaks 以外的其他工具来确定我的应用程序是否能很好地管理内存？

3) 随着我继续运行我的应用程序，我的实时字节数不断增长。我的应用程序有一个 UITableView 显示一些数据。当用户单击一行时，我会将他们带到更详细的页面。如果这就是我的应用程序正在做的所有事情，为什么我的活动字节继续增长？不应该释放所有对象，将我的活动字节降低到我第一次启动应用程序时的状态吗？

4）究竟什么是malloc？

我即将完成应用程序，我只想知道如何衡量应用程序是否可发布，以及如何识别任何问题。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T01:48:14.937

> 您如何知道您的应用程序何时有效且正确地管理内存？

*   考虑到它正在运行的任何数据，它似乎在合理数量的内存中运行，还是它使用的内存比您预期的要多得多？

*   当程序不做任何事情时，它的内存使用是否合理且稳定？

*   如果您彻底地运行程序，内存使用量是否稳定或似乎无限制地增长？

*   您的程序是否对来自操作系统的内存警告做出适当响应？

*   它是否能优雅地容忍低内存条件？

> 我是否应该使用 Leaks 以外的其他工具来确定我的应用程序是否能很好地管理内存？

Instruments 中的各种工具应该足以帮助您了解应用程序如何使用内存。您可能要考虑做的一件事是保存 Instruments 会话的结果以及一些注释，以便您可以看到应用程序的内存使用如何随时间变化。

> 随着我继续运行我的应用程序，我的实时字节数不断增长。

这可能是也可能不是问题；了解不断添加的块中的内容会有所帮助。如果设备上有可用内存，使用它并没有什么问题，特别是如果这意味着您的应用程序性能更好，可以避免从某个来源下载类似的数据等。但是如果您的应用程序不断分配新的视图控制器和视图而不释放旧的，这可能是泄漏。

> 究竟什么是malloc？

`malloc()`是 C 标准库中的内存分配函数之一。我感觉你在问，因为你在 Allocations 工具的 Category 列中看到像*Malloc 16 bytes这样的行：*

![来自 Instruments 的插图](../Images/95cd52856eccbcb571b559da211d0baf.png)

这些行表示由 分配的一类内存块`malloc()`。如您所见，在我的情况下`malloc()`，我的程序中当前正在使用 3318 个 16 字节块。确切的数字并不那么重要——您关心的是该数字如何随时间变化。如果您发现`malloc()`每次执行某些操作时都使用了一些块并且从未释放，那么您将知道在程序中的何处查找内存问题。（当然，任何其他类型的块也是如此。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T00:34:22.633

1.  您如何知道您的应用程序何时有效且正确地管理内存？当您没有泄漏并且您的内存大小不会增长时，您就会知道这一点，除非有原因。Apple 发布了许多信息丰富的视频，例如[WWDC 2012](https://developer.apple.com/videos/wwdc/2012/) “iOS App Performance: Memory”和[WWDC 2010](https://developer.apple.com/videos/wwdc/2010/) “Advanced Memory Analysis with Instruments”。

2.  泄漏将帮助您找到无法访问的内存：您的程序无法再访问它。它不会帮助您找到可访问但无用的内存：无限制增长的缓存，或者不断获取隐藏旧子视图的新子视图的视图。随着时间的推移，您可以使用分配工具查看分配内存的内容。基本技术是单击“标记堆”，执行一些您认为应该导致分配的净零变化的操作（在您的应用程序中），然后再次标记堆并查看应该释放的新内容。同样，Apple 有视频更详细地解释了这一点。

3.  见#2。

4.  stackoverflow 上已经有解决此问题的答案，例如：

[malloc() 是如何在内部实现的？](https://stackoverflow.com/questions/3479330/how-is-malloc-implemented-internally)
[malloc() 和 free() 是如何工作的？](https://stackoverflow.com/questions/1119134/how-do-malloc-and-free-work)
[free 和 malloc 在 C 中是如何工作的？](https://stackoverflow.com/questions/1957099/how-do-free-and-malloc-work-in-c)

和网页，例如：

[http://en.wikipedia.org/wiki/C_dynamic_memory_allocation](http://en.wikipedia.org/wiki/C_dynamic_memory_allocation)
[http://web.eecs.utk.edu/~huangj/cs360/360/notes/Malloc1/lecture.html](http://web.eecs.utk.edu/~huangj/cs360/360/notes/Malloc1/lecture.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T00:34:31.280

1）这取决于你的应用程序做什么。如果您正在运行一个执行简单任务的简单应用程序，那么高效的内存使用并不是什么大问题。你更专注于编写一个裸露的、消耗内存的应用程序。但是，如果您的项目需要肌肉或执行密集计算，那么内存优化将完全集中在修剪边缘周围的脂肪上。

2) 当然。Zombies、Allocations 甚至 Time Profiler 都可以帮助您管理对象生命周期。

3）您的应用程序实际上应该使用您所描述的越来越多的内存。您似乎期望导航堆栈在堆栈的更高位置释放视图控制器，这与导航堆栈存在的原因完全相反。随着您将更多视图控制器推送到堆栈中，内存使用量会增加，因为现在有一个新的视图控制器需要管理。如果您的应用程序正在删除大部分内存，那将是需要担心的事情，因为这样您就会遇到僵尸对象的重大问题。

4) malloc 是alloc 的C 版本。唯一的区别是 alloc 在最终调用 malloc 之前执行了一些运行时魔法并设置类的 isa 指针并调整一些较小的每个对象的值。Malloc 分配一块内存，并返回一个指向该对象的指针。这就是为什么您只分配对象而不是原语的原因（请注意，可以指向原语，然后确实需要 malloc），因为您需要一个有效的指针，它本身就是一块内存。

# ruby-on-rails - 使用 Omniauth 确定用户的 Facebook 图像是否为默认值

> ID：11552260
> 
> 赞同：1
> 
> 时间：2012-07-19T00:20:14.797
> 
> 标签：ruby-on-rails, facebook, facebook-graph-api, omniauth

我正在获取用户的 facebook 图片：

```
https://graph.facebook.com/#{omniauth.uid}/picture?type=large 
```

但我如何检查这是否是 Facebook 默认图片？如果是，我有我自己想使用的图像。

我正在使用 Ruby on Rails 和 Omniauth。因此，如果 Omniauth 提供任何有助于解决这种情况的方法，请告诉我。

**更新**

当我使用上面的链接转到我自己的页面时，如果我没有设置我的用户 ID，我会被重定向到这个文件。

[https://fbcdn-profile-a.akamaihd.net/static-ak/rsrc.php/v2/yL/r/HsTZSDw4avx.gif](https://fbcdn-profile-a.akamaihd.net/static-ak/rsrc.php/v2/yL/r/HsTZSDw4avx.gif)

我有一个朋友也检查过，他得到了相同的页面。

所以我可以“临时”检查该文件名，但显然这将是一种可怕的做法。如果 Facebook 更改其默认图像，一切都会失败。有什么标志可以告诉我用户是否设置了图像？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T05:18:07.853

使用`is_silhouette`布尔值。从文档中：

> 您可以将 redirect=false 添加到 HTTP 请求以获取位置而不是实际数据。这个电话：

```
<img src="https://graph.facebook.com/shaverm/picture?redirect=false"/> 
```

> 将返回描述图片位置的 JSON 编码数据。url 是图片的位置，is_silhouette 布尔值表示对象是否设置了图片。

```
{
    "data": {
        "url": "https://fbcdn-profile-a.akamaihd.net/hprofile-ak-ash4/372183_100002526091955_998385602_q.jpg",
        "is_silhouette": false
    }
} 
```

# javascript - jQuery 在使用 load() 时在页面上查找元素，这些元素在您加载到的元素之外

> ID：11552261
> 
> 赞同：0
> 
> 时间：2012-07-19T00:20:30.533
> 
> 标签：javascript, jquery

好的，我有一个页面使用该页面上的`load()`一个元素。这通常工作正常。但是，添加了一个新功能，我已经难倒自己了。所以这就是它的工作原理，当页面加载时页面是 php/html（父级而不是相关元素）它向页面添加一个元素，该元素仅存在于产品的特定实例中，当一个特定的条件满足.. 因此，使用的元素`load()`需要查看该元素是否在页面上。

通常我会使用类似的东西

```
if($('#element').length > 0)
{
   //found, do something
} 
```

我自己通常不喜欢加载，但这就是系统最初的构建方式，还有很多其他的东西与这个现有的特性有关。所以重写它目前不是一种选择。

无论如何，我现在发现的是它没有找到我需要在最初呈现的父元素中找到的元素。我的小 if-else 在那里不起作用。所以我想知道有没有办法解决这个问题？

***编辑*** 我正在谈论的 html 我将尝试在这里详细说明以表达问题所在。

```
<html>
   <head>
      <title></title>
   </head>
   <body>

Everything in here initially renders server-side.
In the event a particular case is found the php also renders an addition div
<div id="specialDiv">some text</div>
Link Link Link Link Link
<div id="elementwithLoad">
   when a link outside of this element is clicked (just for sake of example).
   the jquery load() event is fired off, and loads an external html file.
   its from within this element that I need to find "specialDiv" thats sitting on the outside of this element.
   which doesn't seem to be working through the normal means of my above if-else which is placed inside of this HTML file.
</div>

   </body>
</html> 
```

# javascript - 正则表达式帮助：分解单词以完成句子测验

> ID：11552262
> 
> 赞同：1
> 
> 时间：2012-07-19T00:20:35.833
> 
> 标签：javascript, jquery, regex

我正在用 JS 编写一个脚本，用于生成*完整的句子*类型的测验。

> ***_* __ *_* __ *_***棕色狐狸跳过懒惰的***_* __ *_* _**。

**第 1 步：**将向用户显示一个文本框以输入句子。
**第 2 步：**将句子分解为实际单词（无逗号、句号等）放入一个数组中。
**第 3 步：**在后台，我将遍历每个***单词***并将它们包裹在锚点中`<a />`
**第 4 步：**用户将能够单击一个或多个单词来标记它们以供测验者完成。我会围绕这个做一些验证。
**第 5 步：**最终结果将是一个带有空格的句子，这些单词是用随机数 (1-n) 的额外字符选择的单词，因此没有单词长度的确切提示。

大多数功能我都可以使用，但我需要将句子拆分成确切的单词（大概使用正则表达式）。

对此有一些规则，应忽略逗号和句号以及任何特殊字符。我也在考虑限制输入，以便不允许特殊字符使这变得更容易。单引号和连字符应包含在单词匹配中，因为某些单词包含这些。

可能还有其他规则我想不出，所以很高兴您发表评论并提出建议。

我从一个基本的[jsFiddle](http://jsfiddle.net/wRxhf/)开始，它只是用空格分隔。

谢谢阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T00:29:36.533

# 非词分割

单词是字母、单引号和连字符的组合，其他任何重复的都是非单词。

为此，请将`split`语句更改为以下内容：

```
var textArray = text.split(/[^a-zA-Z'-]+/) 
```

[Javascript 不会使用 regex 进行拆分](https://stackoverflow.com/questions/812144/javascript-wont-split-using-regex)，除非您使用它`/`来定义正则表达式。

为了保留分隔符，请使用捕获它们`match`，然后按照捕获的顺序重新插入它们。

```
var splitArray = text.match(/[^a-zA-Z'-]+/) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T04:17:19.223

嗯...我有一个非常简单的解决方案：

```
[\w'-]+ 
```

而已。

适用于这条线：

我喜欢 2 有“冰淇淋”，​​花花公子和花花公子。

是的，这是上面的一个奇怪的句子。但它可以作为一个测试用例。试试看。它将在那里包含数字 2 作为单词。不确定你是否想要那个。只需在连字符旁边添加您需要的任何其他特殊字符。

# actionscript-3 - Flash AS3 中的 2D 增强现实

> ID：11552264
> 
> 赞同：1
> 
> 时间：2012-07-19T00:20:42.407
> 
> 标签：actionscript-3, flash, 2d, detection, augmented-reality

我想设置一个 AS3 Flash 项目，借此我可以使用 AR 技术通过网络摄像头在任何给定时间检测打印符号的 X、Y 坐标和距离。

我想最终使用这些数据，将电影剪辑和/或视频放在可以交互的屏幕上。例如.. 如果符号位于屏幕的左上角，则将 MovieClip A 加载到屏幕上。如果符号在右下角，则加载 MovieClip B 并将其附加到屏幕上的符号等。

我已经看过 FLAR，但它的文档是日文的，而且教程很少。此外，似乎大多数 AR 解决方案/库都是为 3D 对象的转换和旋转而设计的。这远远超出了我想要实现的简单性。对于以前从未使用过 AR 的人来说，文档的信息量也不是很大。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T13:49:58.000

[http://www.libspark.org/wiki/saqoosha/FLARToolKit/en](http://www.libspark.org/wiki/saqoosha/FLARToolKit/en) 包括主要 Flash 3D 引擎（Papervision3D、Away3D、Sandy、Alternativa3D）的辅助类。

# android - IntelliJ Idea Android 项目，包括 apk 中的 un-watned 文件

> ID：11552273
> 
> 赞同：3
> 
> 时间：2012-07-19T00:22:25.953
> 
> 标签：android, build, intellij-idea

我有一个复杂的应用程序结构，主项目有 android 库，它们有自己的 android 库和 jars。

主要项目

*   库
    *   Android Lib项目A
        *   罐子
        *   Android Lib 项目 B
    *   罐子

为了澄清，我有一个具有 ActionBarSherlock 依赖项和 Facebook 依赖项的 android 库项目，我在几个类似的应用程序之间使用这个库项目。

在过去，我只能将库添加为依赖项，它只会构建与 android 相关的文件（src/res），但现在它包含了路径中的所有内容（测试、文档、示例文件夹、网站）。

我不确定发生了什么变化，但我的 apk 现在塞满了很多我不想要的文件，我不确定在哪里指定不包含它们。

注意：我不能只是“删除”不需要的文件的原因是因为我正在使用子模块克隆存储库。

我正在使用 IntelliJ Idea 11.1.2 和 android r20

**更新：** 这是我遇到的问题的示例项目：http: [//dl.dropbox.com/u/713581/TestDependency.zip](http://dl.dropbox.com/u/713581/TestDependency.zip)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T01:28:20.760

发生这种情况是因为您将模块保存在`libs`默认为本地库（通常是`.so`文件）设计的目录中。在构建项目时，`libs`目录中的所有文件都包含在目标`apk`文件中。

要解决此问题，请转到**Project Structure**，选择**Test Dependency**模块，打开**Android** facet 设置，将**Native libs 目录**设置更改为其他路径（例如`libs_`代替`libs`）。**对TestLib**模块重复相同的操作，重新构建项目。现在最终`apk`大小约为 486KB，`libs`不包括文件夹中的文件。

![本机库目录](../Images/bc037fc9bfdc08507afbf0d4009d1739.png)

# javascript - 什么是stristr函数？

> ID：11552274
> 
> 赞同：0
> 
> 时间：2012-07-19T00:22:26.380
> 
> 标签：javascript

我一直在搜索，似乎无法理解这个功能。我在代码审查上发布了我的 javascript 代码，有人为我编辑了我的代码，我只是想从中学习。

这是我不明白的部分，它是一个函数，但脚本中的任何地方都没有调用该函数，我认为必须调用所有函数。我只想一步一步地理解这段代码。也许有人甚至可以给我一个关于如何使用它以及在脚本中何处调用它的示例。

```
function stristr (haystack, needle) { 
    var pos = 0 
    haystack += '' 

    pos = haystack.toLowerCase().indexOf((needle + '').toLowerCase()) 
    if (pos >= 0) return haystack.substr(0, pos) 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T00:27:39.260

第 1 行：fcn 声明

第 2 行：将 pos 变量定义为 0

第 3 行：或多或少类型转换为字符串

第 5 行：将 position 设置为与 needle 表示的字符在字符串中的位置相等

第 6 行：如果大海捞针中存在针，则将整个字符串返回到针之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T00:27:59.317

从[这里](http://php.net/manual/en/function.stristr.php)，您可以看到函数的 php 版本“返回从第一次出现的 needle 到结束的所有 haystack”。这意味着给定字符串（或 haystack）'thisisthehaystack' 和我们正在搜索的术语（needle）'the'，stristr 函数将返回字符串'thehaystack'。您发布的函数类似，因为它在大海捞针中搜索针，但随后返回从第一个字符开始并在找到针的点结束的子字符串，或“thisis”。

# c# - 命名类时使用“描述符”一词

> ID：11552278
> 
> 赞同：0
> 
> 时间：2012-07-19T00:22:46.053
> 
> 标签：c#, naming-conventions, descriptor

我发现这很难解释，所以我将从一些背景开始。括号中的示例过于简单，但应该足以让我理解。

*   有6种画笔类（即Pencil、Pen）
*   这 6 个画笔类中的每一个都可能有无数个实例，其中每个实例都定义了一个特定的画笔（即 HB Pencil、B8 Pencil）

我想创建一个描述符类来描述 6 种画笔中的每一种。这个类将包括`System.Type`画笔类、`System.Type`画笔编辑器类以及一些更高级的东西。

应该叫我的课`BrushDescriptor`还是`BrushKindDescriptor`？

我想澄清描述符描述的是`Pencil`类本身而不是`HB Pencil`对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:12:17.600

首先，我不认为*描述符*或*种类*在这里是正确的词；但首先是答案。

这个类应该被称为`BrushDescriptor`BrushKindDescriptor 是一个重言式并且不添加任何东西。

但是，由于*描述符*确实意味着描述或识别 - 而您并没有真正这样做，您正在构建一个允许定义特定类型的画笔的类，所以这个词应该是*定义*。

如果您说“6 种画笔定义”而不是“6 种画笔类”，我认为更好的英语使其更清晰，因此也许您应该`BrushDefinition`改用。

# java - 一个对象拥有另一个对象

> ID：11552279
> 
> 赞同：4
> 
> 时间：2012-07-19T00:23:03.130
> 
> 标签：java, object, ownership

目前我正在使用 Java 设计一个大富翁游戏。

游戏中的每个玩家都可以拥有不同的属性。我遇到的问题是如何为每个玩家分配不同的属性对象。我有一个 Player 类和一个 Properties 类。组合是最好的方法吗？如果是这样，我会怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T00:59:19.227

我会添加一个新类 PropertyManager。

这使您可以轻松地在单个位置提供业务规则（良好的关注点分离），而如果您选择组合，则不必深入研究一堆玩家或属性对象。这将使 Player 和/或 Property 类在未来不会被买卖业务规则所拖累。

```
public final class PropertyManager {

  /**
   * The PropertyManager instance, example usage:
   *   PropertyManager.INSTANCE.buyProperty(property, buyer);
   * NB: Good candidate for dependency injection instead if you are doing this.
   */
  public static final PropertyManager INSTANCE = new PropertyManager();

  private static final Map<Property, Player> propertyListing = new HashMap<Property, Player>();

  /**
   * Buy a property from the banker, banker or property manager could maintain
   * Collection of available properties
   */
  public void buyProperty(Player buyer, Property property) {
    if (propertyListing.containsKey(property)) {
      throw new IllegalStateException("Unable to buy unless owner sells it");
    }
    propertyListing.put(property, buyer);
  }

  /**
   * Broker a transaction between two players for the sale of a property
   */
  public void sellProperty(Player seller, Player buyer, Property property) {
    if (!propertyListing.containsKey(property)) {
      throw new IllegalStateException("Unable to sell Property which is not owned");
    }
    Player owner = propertyListing.get(property);
    if (!owner.equals(seller)) {
      throw new IllegalStateException("Unable to sell property seller doesn't own");
    }
    // TODO : Deduct/transfer monies (ensure sufficient value in buyer account etc)
    propertyListing.put(property, buyer); 
  }

  /**
   * Retrieve a List of all of the Player's properties
   */
  public List<Property> getProperties(Player owner) {
    // TODO Either iterate through the propertyListing or use a second Map for player to List<Property>, NB: they should be guarded with a shared lock if you do this (threading).
  }

  /**
   * Retrieve the owner of a Property or null if it is unowned
   */
  @Nullable // javax annotation indiciates can be null
  public Player getOwner(Property property) {
    return propertyListing.get(property);
  }

  /**
   * Hide the constructor as the only property manager should be INSTANCE
   */
  private PropertyManager() {
    // Prevent further instantiation
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T00:37:12.437

用现实世界的术语来思考它。

当您在玩大富翁游戏并购买房产时，您会拿起房产卡并将其添加到您面前的房产列表中。

因此，在这种情况下，您是一个将 Property 对象添加到您的属性列表的 Player 对象。

```
public class Player
{
    private List<Property> properties;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T00:24:33.307

作曲作品。只要玩家有一个属性对象，并且属性对象包含所有必要的数据，你应该没问题（假设你实现了必要的 getter 和 setter 方法）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T00:25:34.990

该属性可以有一个 Owner 属性，即 Player。

您还可以在属性播放器上建立一个列表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T00:37:31.397

您将需要组合和多态性。

假设一个玩家可以拥有多个属性，您将需要一个属性列表。如果属性的属性不同，您可以应用多态和继承。您可能只会在下面看到继承，但是当您获取不同的属性并对其进行操作时，您将需要多态性。

主要：

```
public static void main(String args[]){
  Player player1 = new Player();

  BlackProperty blackProperty = new BlackProperty();
  BlueProperty blueProperty = new BlueProperty();

  player1.addProperty(blackProperty);
  player1.addProperty(blueProperty);
} 
```

您所有的域类：

```
public class Player{
  private List<Properties> propertyList;

  // getters and setters

  public void addProperty(Properties properties){
    if(this.propertyList == null){
      this.propertyList = new ArrayList<Properties>();
    }

    this.propertyList.add(properties);
  }
}

public class Properties{
  private int noOfFloor;
  // getters and setters
}

public class BlackProperty extend Properties{
  private String noOfGate;
  // getters and setters
}

public class BlueProperty extend Properties{
  private String noOfLawn;
  // getters and setters
} 
```

# compilation - 程序如何知道何时在扩展指令集中使用操作码？

> ID：11552284
> 
> 赞同：0
> 
> 时间：2012-07-19T00:23:31.577
> 
> 标签：compilation, opcode, instruction-set

我知道在 SSE4 中，添加了一些有利于字符串搜索的指令，特别是 xml 解析。假设我编写了一个利用这些指令的程序，当我将程序移动到另一台具有较旧处理器但没有 SSE4 指令集的计算机时会发生什么？程序会中断吗？

我假设编译器生成哪些指令作为其优化过程的一部分使用，如果编译器在旧 i386 上运行但软件针对 i486，我会丢失这六个指令吗？

如果这就是它的工作原理，那么我如何拥有一些音频制作软件，它可以在我安装它的任何计算机上正常工作，但声称可以利用这些扩展指令。它只是运行时检查和不同的代码路径吗？

所有这些对 Java 字节码或 msil 等中间语言有何影响？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T15:41:25.020

What you have to do is the following:

You write different versions of the code for different instruction sets. You don't need to rewrite the entire program, but you will have to rewrite those specific areas. Then on program execution you check what is supported and branch appropriately.

So basically you provide an alternative code path for systems without this instruction set.

# android - 剪切的 TableRow 文本

> ID：11552298
> 
> 赞同：0
> 
> 时间：2012-07-19T00:24:55.893
> 
> 标签：android, android-layout

我有一个 TableLayout，我正在向其中动态添加具有以下配置的表格行。

```
<?xml version="1.0" encoding="utf-8"?>
<TableRow xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/myRow"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_weight="1"
android:padding="4dp"
>

<TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/name"
                android:textAppearance="?android:attr/textAppearanceMedium" 
                android:gravity="left"/>

            <TextView
                android:id="@+id/textView5"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/colon" 
                android:padding="10dip"/>

            <EditText
                android:id="@+id/add_server_name"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" 
                android:background="#FFBFCCCC"
                android:inputType="text"
                android:gravity="left"
                android:paddingLeft="5dp"/>
 </TableRow> 
```

我使用添加表行的代码如下：

```
 TableLayout table = (TableLayout) findViewById(R.id.create_table);
    LayoutInflater inflater = getLayoutInflater();
    ArrayList<String> edit_test_items = getTextFields();
    if(edit_test_items!=null){
        for (String item : edit_test_items) {
            View row = inflater.inflate(R.layout.tbl_row_label_and_edittext,
                    table, false);
            TextView label = (TextView) row.findViewById(R.id.textView1);
            label.setText(item);

            EditText value = (EditText) row.findViewById(R.id.add_server_name);
            value.setTag(item);
            actTextVals.add(value);
            table.addView(row);
        }
    }

    ArrayList<String> spinner_items = getSpinnerFields();
    if(spinner_items!=null){
        for (String item : spinner_items) {
            View row = inflater.inflate(R.layout.tbl_row_label_and_spinner,
                    table, false);
            TextView label = (TextView) row.findViewById(R.id.textView4);
            label.setText(item);
            Spinner spinner = (Spinner) row.findViewById(R.id.group);
            spinner.setTag(item);
            adapter = getSpinnerDataArray(item);
            // ArrayAdapter.createFromResource(this,
            // R.array.groups_array,android.R.layout.simple_spinner_item);
            // set the appearance of widget items that show when open the widget
            adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            // set the adapter to spinner
            spinner.setAdapter(adapter);
            // set the action listener
            spinner.setOnItemSelectedListener(this);
            actSpinnerVals.add(spinner);
            table.addView(row);
        }
    }

    ArrayList<String> checkbox_items = getCheckBoxFields();
    if(checkbox_items!=null){
        for (String item : checkbox_items) {
            View row = inflater.inflate(R.layout.tbl_row_label_and_checkbox,
                    table, false);
            TextView label = (TextView) row.findViewById(R.id.textView4);
            label.setText(item);
            CheckBox checkBox = (CheckBox) row.findViewById(R.id.checkbox);
            checkBox.setTag(item);
            actCheckBoxVals.add(checkBox);
            table.addView(row);
        }
    } 
```

现在，当我在 edit_test_items 列表中只有大约 4 个项目时，我正在正确渲染屏幕但是当我在列表中有大约 10 个项目时，文本正在获取 cl请找到下面的屏幕截图

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T03:56:31.313

尝试`android:shrinkColumns="1"`在您的 TableLayout 中设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T02:05:08.360

我实际上弄清楚出了什么问题。我的表格布局在线性布局内。我将其更改为滚动视图，一切看起来都很好。

# sql-server - 如何对搜索页面进行通用查询？

> ID：11552310
> 
> 赞同：0
> 
> 时间：2012-07-19T00:26:58.200
> 
> 标签：sql-server, search

我有一个订单搜索页面，用户可以在其中输入任何搜索条件并提交。如果如果点击提交而不输入任何标准，我们应该显示所有订单。如果用户输入 orderId，我们应该只显示相应的订单。如果用户输入日期范围和状态，我们应该在所选日期范围内显示具有所选状态的订单。

我试过了，如图。

```
SELECT * FROM dbo.Orders
WHERE ( OrderNumber ='' OR OrderNumber ='212' )
AND ( (OrderDate BETWEEN '2010-01-01' AND '2012-10-10') 
OR (OrderDate BETWEEN '' AND '')  ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T00:35:48.070

您无法检查该字段是否具有该值以及该字段是否具有该值。无论如何，您将始终获得所有记录。您需要将值提取到变量中。除非你正在编写动态 SQL；如果是这种情况，那么如果您打算过滤，您只会添加到 where 子句......

```
DECLARE @OrderNumber VARCHAR, @StartDate VARCHAR, @EndDate VARCHAR

SET @OrderNumber = '212'
SET @StartDate = '2010-01-01'
SET @EndDate = '2012-01-01'

SELECT  * 
FROM    dbo.Orders 
WHERE   (@OrderNumber ='' OR OrderNumber = @OrderNumber) 
AND     (@StartDate = '' OR OrderDate >= @StartDate)
AND     (@EndDate = '' OR OrderDate <= @EndDate) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T07:06:44.117

这是一个非常简单的查询
声明 @ordernumber int = null
SELECT * FROM dbo.Orders
WHERE
(@ordernumber 为 null 或 (OrderNumber IS NOT NULL AND OrderNumber IN (@ordernumber)))
AND ((OrderDate BETWEEN '2010-01-01 ' AND '2012-10-10') OR (OrderDate BETWEEN '' AND '') )

虽然这个查询很简单，但这里解释一下：如果@ordernumber 为空，那么它将显示所有记录，而对于另一种情况，它将只显示与传递的 orderid 对应的记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T02:14:03.557

查看 Erland 的这篇完整[文章](http://www.sommarskog.se/dyn-search-2005.html)，尤其是标题“ [Umachandar 的一袋子技巧](http://www.sommarskog.se/dyn-search-2005.html#Umachandar)”

还要检查[实现动态 WHERE 子句](http://www.sqlteam.com/article/implementing-a-dynamic-where-clause)

上述文章的摘录展示了如何利用 COALESCE 来实现这一点：

```
DECLARE @Cus_Name varchar(30),
                  @Cus_City varchar(30),
                  @Cus_Country varchar(30)

SET @Cus_Name = NULL
SET @Cus_City = 'Paris'
SET @Cus_Country = NULL

SELECT Cus_Name,
               Cus_City,
               Cus_Country
FROM Customers
WHERE Cus_Name = COALESCE(@Cus_Name,Cus_Name) AND
      Cus_City = COALESCE(@Cus_City,Cus_City) AND
      Cus_Country = COALESCE(@Cus_Country,Cus_Country) 
```

# php - 在本地测试 PHP 文件

> ID：11552312
> 
> 赞同：0
> 
> 时间：2012-07-19T00:27:02.837
> 
> 标签：php, testing, localhost, mamp

我创建了 2 个 php 文件（index.php 和 header.php）。我正在尝试测试标头的“包含”参数。我想在我的 Mac 上本地测试文件。我似乎无法让它工作。

我下载并安装了 MAMP，一切似乎都运行良好。我将文档根目录指向正确的文件夹。当我转到 //localhost:8888 时，我收到一条服务器错误消息。

我究竟做错了什么？我是否需要对 mysql 数据库进行配置或执行某些操作？任何帮助都会很棒。

谢谢。

**编辑**

PHP 文件：

header.php：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>header</title>
</head>
<body>

<h1> My Logo </h1>

<ul>
    <li> <a href=""> home </a> </li>
    <li> <a href=""> about </a> </li>
    <li> <a href=""> portfolio </a> </li>
    <li> <a href=""> contact </a> </li>
</ul>

</body>
</html> 
```

索引.php：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>header</title>
</head>
 <body>
<?php include("header.php"); ?>

<h2> blah blah blah </h2>

<p>
    dfgwgwergfwrgrgrjgjkfjkwfjwkfnkjnfwekjnfkjewnfknfwef <br />
    dkkngkjernjkeer er gk erjg jrek gjkerjkeg jker gerj ge <br />
    dfjdgnreg ergjer gjkerg erg er gjerjg kjer gjker gkerj gerk <br />
</p>

</body>
</html> 
```

服务器错误消息：

[“网站在检索“ http://localhost:8888/](http://localhost:8888/) ”时遇到错误。它可能因维护而关闭或配置不正确。

以下是一些建议： 稍后重新加载此网页。

HTTP 错误 500（内部服务器错误）：服务器尝试完成请求时遇到了意外情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T01:12:58.353

删除两个文件第一行中的 XML 标记

此外，仅使用 header.php 中的基本内容。它不是必需的，但可以生成更好的代码。像这样：

```
<h1> My Logo </h1>

<ul>
    <li> <a href=""> home </a> </li>
    <li> <a href=""> about </a> </li>
    <li> <a href=""> portfolio </a> </li>
    <li> <a href=""> contact </a> </li>
</ul> 
```

# android - 谷歌地图绘制路线更新运动

> ID：11552314
> 
> 赞同：1
> 
> 时间：2012-07-19T00:27:34.177
> 
> 标签：android, google-maps, gps

刚刚完成了我的应用程序，该应用程序使用 MapView 显示了两个给定位置之间的路线。没什么特别的，我刚开始使用谷歌地图。经过一番思考，我发现如果它像真正的 GPS 服务一样在运动上重新绘制会很好。

所以我的问题是：

*   自己实现 GPS 有多难？我知道我现在可以通过每隔一段时间不断地感染一个 kml 文件来制作一个。但考虑到电池使用和 CPU 的效率如何？谷歌地图允许您每天请求 2500 次，这些更新中的每一个都算作一次吗？

*   你能用给定的开始和结束位置启动谷歌地图应用程序吗？那么这对我来说可能是一个更简单的解决方案..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T02:35:17.353

你为什么不打开谷歌地图，意图给出你的起点和终点。

```
Intent navigation = new Intent(Intent.ACTION_VIEW, Uri
        .parse("http://maps.google.com/maps?saddr="
                + Constants.latitude + ","
                + Constants.longitude + "&daddr="
                + latitude + "," + longitude));
startActivity(navigation); 
```

这将打开任何地图应用程序。表示浏览器或谷歌地图应用程序。如果您只想要谷歌地图并摆脱对话框，您可以向意图提示您要使用哪个包。

在`startActivity()`添加之前：

```
intent.setClassName("com.google.android.apps.maps", "com.google.android.maps.MapsActivity"); 
```

# objective-c - 强标识符是@property 语句的默认值吗？

> ID：11552317
> 
> 赞同：21
> 
> 时间：2012-07-19T00:27:54.433
> 
> 标签：objective-c, cocoa

我正在学习 Objective-C 和 Cocoa 框架（通过 Aaron Hillgass 的书）并试图弄清楚为什么以下行包含“强”标识符。

```
@property (strong) NSManagedObjectContext *managedObjectContext; 
```

据我了解，strong 是默认设置，那么为什么我需要显式声明它呢？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-19T00:34:57.280

你可以在不写任何东西的情况下声明它，但是当你回到代码或其他开发人员查看你的代码时会发生什么？

您可能知道默认值将设置为强，但初级程序员会很困惑地确定声明的变量是强还是弱。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-08T19:57:36.370

同意理查德。

//强引用和弱引用 ARC 引入了两个新的对象引用限定符：强引用和弱引用。

在 ARC 下，所有对象引用变量默认都是强的。这不仅适用于属性；@property 语句的默认标识符是为非对象类型分配的，因为对象类型应该是强的。所有对象引用 - 属性值、实例变量、自动变量、参数变量和静态变量 - 就像 ARC 下的保留属性一样。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-19T00:51:52.363

在[Objective-C 编程语言中](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html)：

> **分配**
> 
> 指定 setter 使用简单赋值。此属性是默认值。

也就是说，setter 语义的默认属性是**assign**，而不是**strong**。

# python - 暂停 Python 程序的正确方法

> ID：11552320
> 
> 赞同：201
> 
> 时间：2012-07-19T00:28:17.843
> 
> 标签：python, sleep

我一直在使用该`input`函数来暂停我的脚本：

```
print("something")
wait = input("Press Enter to continue.")
print("something") 
```

有没有正式的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：258
> 
> 时间：2012-07-19T00:32:24.190

这对我来说似乎很好（或`raw_input()`在 Python 2.X 中）。或者，`time.sleep()`如果您想暂停一定的秒数，您可以使用。

```
import time
print("something")
time.sleep(5.5)    # Pause 5.5 seconds
print("something") 
```

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2015-10-02T14:21:14.330

*仅适用于 Windows*，请使用：

```
import os
os.system("pause") 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2016-01-17T20:25:02.940

所以，我发现这在我的编码工作中非常有效。我只是在程序的一开始就*创建了一个函数*，

```
def pause():
    programPause = raw_input("Press the <ENTER> key to continue...") 
```

现在我可以在`pause()`需要时使用该功能，就像我正在编写批处理文件一样。*例如*，在这样的程序中：

```
import os
import system

def pause():
    programPause = raw_input("Press the <ENTER> key to continue...")

print("Think about what you ate for dinner last night...")
pause() 
```

现在显然这个程序没有目标，只是为了举例，但你可以准确地理解我的意思。

`input`注意：对于Python 3，您需要使用`raw_input`

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2012-07-19T00:33:05.630

我假设您想在没有输入的情况下暂停。

利用：

[时间.睡眠（秒）](http://docs.python.org/library/time.html#time.sleep)

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2015-10-07T13:21:03.883

我有一个类似的问题，我正在使用信号：

```
import signal

def signal_handler(signal_number, frame):
    print "Proceed ..."

signal.signal(signal.SIGINT, signal_handler)
signal.pause() 
```

因此，您为信号 SIGINT 注册一个处理程序并暂停等待任何信号。现在从您的程序外部（例如，在 bash 中），您可以运行`kill -2 <python_pid>`，这会将信号 2（即 SIGINT）发送到您的 python 程序。您的程序将调用您注册的处理程序并继续运行。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2018-01-14T08:42:28.413

我对 Python 2 和 Python 3 使用以下命令来暂停代码执行，直到用户按下`Enter`

```
import six

if six.PY2:
    raw_input("Press the <Enter> key to continue...")
else:
    input("Press the <Enter> key to continue...") 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2018-01-05T17:05:21.903

```
print ("This is how you pause")

input() 
```

* * *

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2015-08-04T08:54:01.743

[正如mhawke](https://stackoverflow.com/users/21945/mhawke)和[steveha](https://stackoverflow.com/users/166949/steveha)的评论所指出的，这个确切问题的最佳答案是：

> 对于较长的文本块，最好使用`input('Press <ENTER> to continue')`（或`raw_input('Press <ENTER> to continue')`在 Python 2.x 上）提示用户，而不是延时。快读者不想等待延迟，慢读者可能想要更多的延迟时间，有人可能在阅读时被打断，想要更多的时间，等等。另外，如果有人经常使用这个程序，他/她可能会习惯它的工作方式，甚至不需要阅读长文本。让用户控制文本块显示多长时间以供阅读更友好。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2017-06-09T01:26:33.230

很简单：

```
raw_input("Press Enter to continue ...")
print("Doing something...") 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2020-07-28T15:41:45.033

我与喜欢简单解决方案的非程序员一起工作：

```
import code
code.interact(banner='Paused. Press ^D (Ctrl+D) to continue.', local=globals()) 
```

这会产生一个解释器，其行为几乎与真正的解释器完全相同，包括当前上下文，只有输出：

```
暂停。按 ^D (Ctrl+D) 继续。
>>>
```

[Python 调试器](https://docs.python.org/3/library/pdb.html)也是暂停的好方法。

```
import pdb
pdb.set_trace() # Python 2 
```

或者

```
breakpoint() # Python 3 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2020-07-19T18:21:51.027

***跨平台方式；无处不在***

```
import os, sys

if sys.platform == 'win32':
    os.system('pause')
else:
    input('Press any key to continue...') 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2020-04-10T20:16:31.723

通过这种方法，您可以通过按下您指定的任何指定键来恢复您的程序：

```
import keyboard
while True:
    key = keyboard.read_key()
    if key == 'space':  # You can put any key you like instead of 'space'
        break 
```

相同的方法，但以另一种方式：

```
import keyboard
while True:
    if keyboard.is_pressed('space'):  # The same. you can put any key you like instead of 'space'
        break 
```

注意：您可以[`keyboard`](https://github.com/boppreh/keyboard)简单地通过在 shell 或 cmd 中编写以下代码来安装模块：

```
pip install keyboard 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-03-23T00:16:20.167

我想我喜欢这个解决方案：

```
import getpass
getpass.getpass("Press Enter to Continue") 
```

它隐藏了用户输入的任何内容，这有助于澄清此处未使用输入。

但请注意 OS X 平台。它显示一个可能令人困惑的键。

[![它显示了一个键，就像我说的](../Images/1ee2a83865c546f1eaf78d1591b66e8f.png)](https://i.stack.imgur.com/29idw.png)

* * *

可能最好的解决方案是自己做一些类似于*getpass*模块的事情，而无需`read -s`拨打电话。也许使前景色与背景相匹配？

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-04-09T21:31:55.527

在 Linux 中，您可以`kill -TSTP <pid>`向后台发出并停止进程。所以，它就在那里，但不消耗 CPU 时间。

然后，`kill -CONT <pid>`它关闭并再次运行。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-02-19T15:24:05.120

我认为停止执行的最好方法是*time.sleep()*函数。

如果您只需要在某些情况下暂停执行，您可以简单地实现一个*if*语句，如下所示：

```
if somethinghappen:
    time.sleep(seconds) 
```

您可以将*else*分支留空。

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2019-06-29T17:44:00.437

对于跨 Python 2/3 兼容性，您可以`input`通过`six`库使用：

```
import six
six.moves.input( 'Press the <ENTER> key to continue...' ) 
```

# javascript - 没有 HTML 的光标位置需要转换为有 HTML 的位置

> ID：11552322
> 
> 赞同：0
> 
> 时间：2012-07-19T00:28:28.577
> 
> 标签：javascript, jquery, html, nicedit

假设我有以下文字：

```
this is some example c|ode 
```

管道符号是光​​标在 nicEditor div 中的位置。nicEditor 具有获取光标“getRng()”位置的功能。

但是 getRng() 没有得到光标的位置，包括 HTML，据我所知，不存在这样的函数（如果我错了，请纠正我）。

nicEditor div 中的代码实际上可能是：

```
<span style='font-weig|ht: bold;'>this i</span>s some example code 
```

你可以看到我的问题。我正在尝试在 nicEditor div 中插入一些内容，并将其插入 HTML 标记的中间。

我的问题是：有没有办法用包含的 HTML 标签转换光标的位置？或者有没有其他替代解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T04:59:47.933

我最终解决了这个问题，这不是一个简单的解决方案。我必须编写一个状态机，它有四种状态“Text”=>“HTML”=>“String”=>“Character”。基本上我写了 jQuery 插件，它接受字符串和位置并相应地移动。

# python - 如何确定在wxpython中选择了列表框的哪个项目

> ID：11552325
> 
> 赞同：0
> 
> 时间：2012-07-19T00:29:01.320
> 
> 标签：python, wxpython

我正在制作音乐播放器。我有一个列表框，其中包含“歌曲”目录中的歌曲列表。如何确定选择了哪首歌曲以及如何播放它？

代码：

```
 songlist = os.listdir('songs')
    self.myListBox = listbox = wx.ListBox(panel2, -1, (10,200), (140,200), songlist, wx.LB_SINGLE)

    self.Bind(wx.EVT_LIST_ITEM_SELECTED, self.selLoadFile, listbox)

def selLoadFile(self, event):
    file_path = os.path.join(os.os.getcwd(), "songs", self.myListBox.getSelectedItem())
    self.doLoadFile(file_path)

   ########### I believe the problem is above ^ here. But I could be wrong. 

def Load(self, event):
    dlg = wx.FileDialog(self, "Choose a media file", "songs", "", "*.*", wx.OPEN)
    if dlg.ShowModal() == wx.ID_OK:
        path = dlg.GetPath()
        self.doLoadFile(path)
        dlg.Destroy() 

def doLoadFile(self, path):
    if not self.mc.Load(path):
        wx.MessageBox("Unable to load %s: Unsupported format?" % path, "ERROR", wx.ICON_ERROR | wx.OK)

    else:
        folder, filename = os.path.split(path)
        self.st_file.SetLabel('%s' % filename)
        self.mc.SetBestFittingSize()
        self.mc.Play() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T14:00:05.690

有几个问题。首先，您绑定了错误的事件。EVT_LIST_ITEM_SELECTED 用于 wx.ListCtrl。你想要 EV​​T_LISTBOX。接下来在您的处理程序中，您有 getSelectedItem，这不是一个真正的方法。有 GetSelection，它返回所选项目的整数位置（从 0 开始），还有 GetStringSelection()，这可能是您想要的。

你没有说你用什么来播放。你在使用 wx.media.MediaCtrl 吗？如果是这样，那么我写的关于播放 MP3 的教程可能会对您有所帮助：http: [//www.blog.pythonlibrary.org/2010/04/20/wxpython-creating-a-simple-mp3-player/](http://www.blog.pythonlibrary.org/2010/04/20/wxpython-creating-a-simple-mp3-player/)

我也玩过 MplayerCtrl，它包裹了 Mplayer，看起来比 MediaCtrl 更强大，尽管设置起来可能有点复杂。如果您愿意，可以在这里阅读：http: [//www.blog.pythonlibrary.org/2010/07/24/wxpython-creating-a-simple-media-player/](http://www.blog.pythonlibrary.org/2010/07/24/wxpython-creating-a-simple-media-player/)

# ruby-on-rails - Rails 3.2 datetime_select include_blank 未按预期工作

> ID：11552326
> 
> 赞同：0
> 
> 时间：2012-07-19T00:29:06.380
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, datetime-select

我对 Rails 很陌生，正在使用 3.2.6 版。到目前为止，我已经制作了一个包含日期时间的简单练习应用程序。在我的部分表格中，我有

```
<%= form_for(@item) do |f| %>
  [...snip irrelevant form fields...]
  <div class="field">
    <%= f.label :copyright_date, %><br />
    <%= f.datetime_select :copyright_date, { include_blank: true } %>
  </div>
<% end %> 
```

从选项文档[http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-date_select](http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-date_select)我的印象是选项哈希的`{ include_blank: true }`部分`datetime_select`将允许我设置空日期。但是，如果我将任何日期字段（但不是时间字段）设置为空白选项，则整个内容将返回`nil`. 我正在处理有时不知道整个日期而只知道一部分的档案数据。如果存在，我需要能够捕获所有日期时间数据，但将任何未知部分留空。我认为这就是`include_blank`目的，但也许我误解了文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T03:08:14.803

include_blank 所做的只是在每个下拉菜单的开头放置一个空格，因此您可以选择将其留空。没有它，它将默认为值，并且无法将其留空。

要执行您所描述的操作，您可以创建一个日期时间对象，并通过它设置小时、分钟等的值，然后保存它。

[http://corelib.rubyonrails.org/classes/DateTime.html#M000524](http://corelib.rubyonrails.org/classes/DateTime.html#M000524)

# jquery - JQuery：同时在同一页面上打开多个简单模式

> ID：11552328
> 
> 赞同：0
> 
> 时间：2012-07-19T00:30:18.450
> 
> 标签：jquery, simplemodal

我使用简单的模态 jquery 插件。是否可以同时在同一页面上打开多个模式。如果不是开箱即用，如何修改核心插件代码以启用此功能？

# rabbitmq - 使用 unix 套接字连接到 RabbitMQ

> ID：11552329
> 
> 赞同：6
> 
> 时间：2012-07-19T00:30:24.817
> 
> 标签：rabbitmq

有谁知道 RabbitMQ 是否支持 unix 套接字连接而不是 TCP ？我问这个是因为我所有的生产者和消费者都在同一台机器上。

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-22T21:29:38.297

目前这是不可能的 - RabbitMQ 只允许 TCP 连接[0]。如果你真的需要使用 unix 套接字，我*认为*redis 允许它通过 unix 套接字。

[0] [https://www.rabbitmq.com/configure.html](https://www.rabbitmq.com/configure.html)

# php - 从 php url 字符串中删除中断？

> ID：11552330
> 
> 赞同：1
> 
> 时间：2012-07-19T00:30:26.657
> 
> 标签：php, string, variables, replace

我这辈子都想不通...

我有一个表单，它最终将一些字段作为查询字符串传递。

```
$f = $_GET['full'];
$t = $_GET['title'];

$illegal = array("&#039;", "#039;");
$f = str_replace($illegal, "", $f);
$t = str_replace($illegal, "", $t); 
```

由于一些奇怪的原因，撇号弄乱了我需要的东西，所以我在它们出现时删除了它们（'第一次出现和 #039; 之后）。

现在 $t 输出一个可用的字符串。但是，$f 可以包含中断。他们最终在字符串中

```
<br+%2F> 
```

我试过了

```
$f = preg_replace("/\r?\n/", "", $f); 
```

和

```
$breaks = array("<br+%2F>", "/\r?\n/", "<br />");
$f = str_replace($breaks, "%20", $f); 
```

但是当我在一个网址中输出它时，我仍然得到

```
http://www.domain.com?t=good%20string&f=bad<br+%2F>string 
```

导致 404 页面未找到错误。:(

**编辑**

```
$f = html_entity_decode($_GET['full']);
$t = html_entity_decode($_GET['title']);

$illegal = array("&#039;", "#039;");
$f = str_replace($illegal, "", $f);
$t = str_replace($illegal, "", $t);

$f = htmlspecialchars($f);

$breaks = array("<br+%2F>%0D%0A<br+%2F>%0D%0A", "<br+%2F>%0D%0A");
$f = str_replace($breaks, "%20", $f);

if (---private-stuff---) {
header( 'Location: /?title=' . $t . '&full=' . $f . '&fifth=fith%20percent');
} 
```

最后一个 $f STILL 包含

```
<br+%2F>%0D%0A<br+%2F>%0D%0A 
```

在网址中。这些功能中的一个不应该将其剥离吗？！？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T00:34:14.693

使用[html 实体解码](http://php.net/manual/en/function.html-entity-decode.php)

```
$string = html_entity_decode("&#039;");
echo $string ; // ' 
```

所以在你的情况下

```
$f = html_entity_decode($_GET['full']);
$t = html_entity_decode($_GET['title']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T00:44:17.820

由于您收到 404，可能是您有一个 .htaccess 规则（ModRewrite）试图将您路由到其他页面（不存在）。听起来你可能有两个不同的问题......

要从查询字符串中获取实际文本，Ibu 是正确的...使用 html_entity_decode()

# c# - 如何使用 DockPanel 及其扩展器在浮动窗口上显示表单自己的图标？

> ID：11552334
> 
> 赞同：1
> 
> 时间：2012-07-19T00:30:41.353
> 
> 标签：c#, .net-4.0, dockpanel-suite

使用[Weifen Luo DockPanel](https://github.com/dockpanelsuite/dockpanelsuite)组件，可以在他们的 .net 项目中添加将表单停靠在其他表单中的能力。该组件做得很好。

现在，我[在 github 的项目论坛上](https://github.com/dockpanelsuite/dockpanelsuite/wiki/Customize-the-FloatWindow)的这个页面上看到（现在托管这个组件），通过使用它`dock.extender`来允许浮动窗口具有正常的 winform 外观是可能的，也就是说，`sizeable`与常规 Windows标题栏、最大化框、最小化框等（[也请参见此处](https://stackoverflow.com/questions/8674266/using-weifenluo-dockpanel-suite/11551374#11551374)）。这也允许显示表单的图标。

我的问题是，因此我的问题是，我在表单属性中分配的图标将显示在设计器中，但它在调试中作为浮动面板运行，通用表单图标出现在其位置。

现在，我尝试通过代码（在表单自己的代码中以及在调用表单的主应用程序代码中）而不是通过属性来分配图标，但这也不起作用。

那么，当表单浮动并使用扩展器时，如何让我自己的自定义图标显示为表单的图标？我在`DockingWindow`模式下使用主对接面板。

**[编辑]**

我认为这是一个很难的问题！已经2天了，我还没有得到任何答案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T14:25:07.907

这需要更改 FloatWindow 类本身，以便在内容更改时在内部设置和更新 Icon 属性。

我刚刚检查了更改，它将包含在库的 2.7 版本中。

[https://github.com/dockpanelsuite/dockpanelsuite/issues/35](https://github.com/dockpanelsuite/dockpanelsuite/issues/35)

# c - c中的位移位字符

> ID：11552335
> 
> 赞同：4
> 
> 时间：2012-07-19T00:30:50.783
> 
> 标签：c, types, bit-shift, bitmask

我试图在所有小端系统中以可移植的方式将字节从 int 转换为一系列字符。

我有以下代码：

```
#include <stdio.h>

int
main()
{
  int i = 0xabcdef12;
  printf("i: %x\n", i);
  char a, b, c, d;
  a = (i >> 000) & 0xFF;
  b = (i >> 010) & 0xFF;
  c = (i >> 020) & 0xFF;
  d = (i >> 030) & 0xFF;
  printf("a b c d: %x %x %x %x\n", a , b, c, d);
  if(a == 0x12)
    printf("a is 0x12\n");
  if(b == 0xef)
    printf("b is 0xef\n");
  if(c == 0xcd)
    printf("c is 0xcd\n");
  if(d == 0xab)
    printf("d is 0xab\n");
  if(a == 0xffffff12)
    printf("a is 0x12\n");
  if(b == 0xffffffef)
    printf("b is 0xffffffef\n");
  if(c == 0xffffffcd)
    printf("c is 0xffffffcd\n");
  if(d == 0xffffffab)
    printf("d is 0xffffffab\n");
  return 0;
} 
```

这段代码在使用 -Wall 时编译时没有任何警告。

运行时给出：

```
i: abcdef12
a b c d: 12 ffffffef ffffffcd ffffffab
a is 0x12
b is 0xffffffef
c is 0xffffffcd
d is 0xffffffab 
```

这里有一些 gcc 打印：

```
Breakpoint 1, main () at test.c:14
14    if(a == 0x12)
(gdb) p/x a
$1 = 0x12
(gdb) p/x b
$2 = 0xef
(gdb) p/x c
$3 = 0xcd
(gdb) p/x d
$4 = 0xab 
```

我很确定我做错了什么。如果您能回答以下几个问题，那真的会帮助我理解发生了什么：

*   char 如何具有大于 0xff 的值？
*   什么是`& 0xff`位掩码不起作用？
*   为什么 gdb 报告正确的值？

如果有人有可靠的（与系统无关，但字节序并不重要）从 int 到 char[] 的方式，那就太好了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T00:36:38.070

这是一个快速修复。

改变：

```
char a, b, c, d; 
```

到

```
unsigned char a, b, c, d; 
```

原因是`char`在您的系统上签名。当您通过 , `a`, `b`,进入时`c`，他们将被提升为。它们是符号扩展的。这就是为什么你会得到所有这些领先的 ​​s。`d``printf()``int``ff`

GDB 正在报告正确的值，因为它正在`chars`直接读取。（因此没有整数提升）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T00:39:24.223

在比较过程中`a`，`b`、`c`和`d`被提升为`int`。由于它们都是`char`，因此最高有效位被视为符号位。`int`将 MSB 填充到更高位的提升。

`0x12`的 MSB 为 0， 和`0xef`的`0xcd`MSB`0xab`为 1。这就是为什么升级后你会得到`0x00000012`but`0xffffffef`和。`0xffffffcd``0xffffffab`

如果你改变

```
char a, b, c, d; 
```

进入

```
unsigned char a, b, c, d; 
```

然后你可以得到你所期望的。

# api - Magento 通过 API 导出订单 - 使用 sales_order.info 方法的 SOAP

> ID：11552338
> 
> 赞同：1
> 
> 时间：2012-07-19T00:30:56.477
> 
> 标签：api, magento

sales_order.info 方法允许检索所需的订单信息，例如 product-sku 或 customer-id 等。

但是如何将我自己创建的属性添加到此方法中，以便我可以通过 API SOAP 获取这些属性？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T04:42:02.883

如果您想在调用 sales_order.info 时获取其他属性，则必须编辑/重写

```
Mage/Sales/Model/Order/Api.php 
```

我所知道的。API 获取“销售/订单”模型的所有属性。

将您的属性添加到 $result 示例：

```
$result['your attribute'] = $this->_getAttributes($yourattribute, 'attribute_name'); 
```

^^

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-01T11:25:51.297

您可以使用下面的 SOAP api 脚本来获取订单列表

```
<?php 
$client = new SoapClient('http://magentohost/api/soap/?wsdl');

$session = $client->login('apiUser', 'apiKey');
$result = $client->call($session, 'order.list');

var_dump ($result); 
```

# html - 无法在同一行排列 2 个对象

> ID：11552341
> 
> 赞同：-4
> 
> 时间：2012-07-19T00:31:30.463
> 
> 标签：html, css

我试图在同一行中排列两个对象，即文本框和一个搜索框，但由于某种原因它没有排列。尝试了几个教程，但仍然没有成功。据我所知，我错过了一些东西。任何帮助表示赞赏。这是代码：

```
<!DOCTYPE html>
<html>
<head>
    <style type="text/css">
        div.transbox {
            background-color: grey;
            border: 1px solid black;
            opacity:0.6;
            filter:alpha(opacity=60); /* For IE8 and earlier */
            padding: 5%;
        }
        div.transbox pt {
            border: 1px solid #505050; /*#123360;*/
            position: relative;
            left: 0;
            font-size: 12px;
            width: 27%;
            background-color: white;
            -moz-border-radius:3px;
            -khtml-border-radius:3px;
            -webkit-border-radius:3px;
            border-radius:10px;
            font-weight: bold;
            color: black;
            padding: 5px;
        }
        div.transbox ps {
            position: absolute;
            right: 0;
            border: 1px solid #505050; /*#123360;*/
            font-size: 12px;
            width: 27%;
            background-color: white;
            -moz-border-radius:3px;
            -khtml-border-radius:3px;
            -webkit-border-radius:3px;
            border-radius:10px;
            font-weight: bold;
            color: black;
            padding: 5px;
        }
    </style>
</head>
<body>
    <div class="transbox">
        <pt> example.com</pt>
        <ps><form>
            <input type="text" name="search" />
        </form> </ps>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T01:21:37.547

`<pt>`并且`<ps>`不是*有效*的标签。

我在这里做了一个符合标准的工作示例：http: [//jsfiddle.net/7LXQ9/](http://jsfiddle.net/7LXQ9/)。

**代码：**

```
<!DOCTYPE html>
<html>
<head>
    <style type="text/css">
        div.transbox {
            background-color: grey;
            border: 1px solid black;
            opacity:0.6;
            filter:alpha(opacity=60); /* For IE8 and earlier */
            padding: 5%;
        }
        div.transbox #site-name {
            border: 1px solid #505050; /*#123360;*/
            position: relative;
            left: 0;
            font-size: 12px;
            width: 27%;
            background-color: white;
            -moz-border-radius:3px;
            -khtml-border-radius:3px;
            -webkit-border-radius:3px;
            border-radius:10px;
            font-weight: bold;
            color: black;
            padding: 5px;
        }
        div.transbox form {
            display: inline-block;
            position: absolute;
            right: 0;
            border: 1px solid #505050; /*#123360;*/
            font-size: 12px;
            width: 27%;
            background-color: white;
            border-radius:10px;
            -moz-border-radius:3px;
            -webkit-border-radius:3px;
            font-weight: bold;
            color: black;
            padding: 5px;
        }
        div.transbox input {
            appearance: none;
            -moz-appearance: none;
            -webkit-appearance: none;
            border: none;
        }
    </style>
</head>
<body>
    <div class="transbox">
        <span id="site-name">example.com</span>
        <form>
            <input type="search" name="search" />
        </form>
    </div>
</body> 
```

顺便说一句，该`input`类型`search`是用[HTML5](https://developer.mozilla.org/en/HTML/HTML5)添加的。

# svn - SVN 更新但忽略某些修订

> ID：11552344
> 
> 赞同：0
> 
> 时间：2012-07-19T00:31:48.250
> 
> 标签：svn

我想做的我不认为 SVN:ignore 命令会做我想做的事。

我有一个 SVN 存储库，它是为少数单独的客户端部署的相同应用程序。我已经对一组文件进行了更改，但只有一个客户端（我们称之为客户端 A）想要这些更改（他们希望他们的 Web 应用程序可以在 iframe 中访问，而其他人则不需要）。

我不想忽略其他服务器上的文件，因为将来我将对他们需要的那些文件进行修改。

基本上对于不是客户端 A 的每个人，我都需要更新他们的服务器，但不更新仅适用于客户端 A 的修订版 x 上的任何更改。

我什至不知道这是否可能，因为将来很容易覆盖这些文件，不是吗？我将永远必须记住忽略该修订，不是吗？

如果不可能，人们是否使用过其他解决方法？我认为但似乎无法按照理论上我认为的方式工作的一种方法是将客户端 A 的服务器的这些更改合并到不同的分支中，但是每次客户需要时我都必须维护一个不同的存储库分支与其他客户有什么不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T01:27:23.627

在这里有点逆向，我不认为分支或标签是解决您的问题的正确方法，除非您有无限的时间在开发线之间合并代码。

另一种方法是使用单体代码库，您可以在其中为所有客户端调整功能的超集。对于每个客户端，您可以打开和关闭功能。（您对每个客户端的配置与您的代码库是分开的，对吗？）即使您的代码为每个客户端遵循不同的路径，您也可以获得一次修复通用功能的好处。

此外，当您为每个客户开发不同的功能时，您就有机会向客户销售可能已经构建的功能。您需要做的就是配置它。

诚然，如果您的每个客户的需求大不相同，则此解决方案可能行不通。但是，由于您将代码库保存在同一个存储库中，我将假设它是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T01:17:04.920

我认为单独的分支是最合理的解决方案。至少在这种情况下，您可以设置测试系统以从两个分支运行测试：客户端 A 和其他分支。您要么在某些颠覆分支/主干中保留更改，要么很容易丢失/忘记它们。您不能完全自动排除修订版 X，因为理论上在应用修订版 Y > X 的某些更改时可能会发生冲突，假设修订版 X 的更改存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T01:08:39.400

此处使用的正确方法是为客户端 A 创建一个分支。SVN 忽略是针对完全不同的东西。

# git - 比较相似文件并仅应用与两者相关的更改

> ID：11552345
> 
> 赞同：0
> 
> 时间：2012-07-19T00:31:51.820
> 
> 标签：git, version-control, comparison

我将从事基于相同样板 PHP 主题的两个项目（比如 project`A`和 project ）。`B`通常我必须对两者进行相同的更改，即使每个项目中的代码会略有不同。

例如，假设我添加了`function_1()`and `function_2()`，`A/index.php`但我*只想*添加`function_2`to `B/index.php`。或者对于删除内容或进行更改也是如此。

对于重大更改，在文件之间来回粘贴将是低效的。

我假设这是更高级的 git 教程可能会提供帮助的那种东西？——或者也许有专门为此目的制作的工具？-- 我在哪里可以找到处理这类事情的文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T00:36:31.663

您真正应该做的是创建一个包含通用代码的“模板”分支/存储库。然后，您从该模板分支分支自定义存储库。当您对模板进行更改时，您可以将它们合并到自定义的存储库中。

现在，由于您已经拥有其他存储库，因此您必须捏造更改。基本上创建一个模板存储库，其中包含所有存储库已手动更新的非自定义更改。然后将自定义存储库作为远程添加到此模板存储库`git remote add customized1 URL`并签出相应的分支`git checkout -t -b customized1-master customized1/master`

然后从模板的母版“假”合并到每个自定义母版中：

```
for f in customized1 customized2; do
  git checkout $f-master
  git merge -s ours master
  git push $f $f-master:master
done 
```

你当然可以在推送之前检查它做了什么。

此时，您已将模板分支作为相关祖先注入到您的自定义存储库/分支中。然后，您可以更改您的模板分支（在这个新仓库的示例中称为 master），并在提交后进行真正的合并：

```
for f in customized1 customized2; do
  git checkout $f-master
  git merge master
  git push $f $f-master:master
done 
```

你几乎肯定想在这次推送之前检查发生了什么。现在，对模板的更改可以轻松地与所有自定义存储库共享。此外，如果您需要一个新的自定义 repo，您​​可以从模板分支分支它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T00:42:32.813

实际上有一个专门为此而设计的工具。如果您在项目之间共享代码，它们应该被视为您从中提取的库，并且应该有自己的开发分支/存储库。Git 包括向项目添加远程存储库并独立开发它们的能力。

您将需要 3 个存储库。存储库 A、存储库 B 和共享存储库 C。

共享的代码应位于存储库 C 中，存储库 A 和存储库 B 应将存储库 C 添加为远程存储库。这是有关远程存储库如何工作的指南，并且应该让您对如何设置此概念有一个很好的了解：http: [//gitref.org/remotes/](http://gitref.org/remotes/)

干杯，快乐的编码！

# javascript - jQuery when().done() 对我不起作用

> ID：11552347
> 
> 赞同：2
> 
> 时间：2012-07-19T00:32:11.637
> 
> 标签：javascript, jquery, asp.net-mvc-3, asynchronous

我有下面的 jQuery 代码，但`when().done()`对我来说没有按预期工作。那个`updateResultFooter()`叫做bedore的`doReverseSearch()`方法完成了她的工作。因此，我视图中的一个按钮被启用，然后`replace`在`doReverseSearch()`方法中重新获取他的默认值（禁用）。

```
$("#idBnSearch").click(function () 
{
    $.when(doReverseSearch(telValue, pageIndex, methodUrl))
    .done(function () 
    {
        updateResultFooter("@ViewBag.CountResult", pageIndex, "@ViewBag.PageCount");
    });

});

function updateResultFooter(resultCount, pageIndex, pageCount) 
{
    if (pageIndex == 0)
        $("#bnPreviousPage").attr('disabled', 'disabled');
    else
        $("#bnPreviousPage").removeAttr('disabled');

    if ((pageIndex + 1) == pageCount)
        $("#bnNextPage").attr('disabled', 'disabled');
    else
        $("#bnNextPage").removeAttr('disabled');
    }

function doReverseSearch(telValue, pageIdx, methodUrl) 
{
    $.ajax(
    {
        url: methodUrl,
        type: 'post',
        data: JSON.stringify({ Telephone: telValue, pageIndex: pageIdx }),
        datatype: 'json',
        contentType: 'application/json; charset=utf-8',
        success: function (data) {
            $('#result').replaceWith(data);
        },
        error: function (request, status, err) {
            alert(status);
            alert(err);
        }
    });
} 
```

先感谢您

# phpunit - 如何测试只检索模板输出的函数？

> ID：11552351
> 
> 赞同：0
> 
> 时间：2012-07-19T00:32:27.580
> 
> 标签：phpunit

我有一个模板类，它抓取 HTML 并基本上将 html 返回给调用者。如何使用 PHP Unit 测试调用者？我只是`assertTrue(is_string(call_function))`？这似乎是一个愚蠢的测试，我想我可能测试不正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T23:28:54.543

返回的 HTML 是否应该格式正确？如果是这样，您可以验证它。

和/或如果总是应该存在某个节点或文本字符串，您可以检查它的存在。使用`strpos`、正则表达式或适当的 DOM 解析器。

这个 StackOverflow 问题为您提供了一些关于解析和查询 HTML 的方法的想法：[如何在 PHP 中解析和处理 HTML/XML？](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)

更一般地说，我通常处理如何测试返回字符串的函数的方法是使用：

```
$html=call_function();
$this->assertEquals("dummy",$html); 
```

然后它失败了，但告诉我正确的输出，所以我将其粘贴到：

```
$html=call_function();
$expected=<<<EOD
<html>
...
</html>
EOD;
$this->assertEquals($expected,$html); 
```

*如果它再次失败，我会研究我拥有的两个正确*答案之间的差异。如果这是一个很好的单元测试，它们真的应该不同吗？我是否想使用模拟对象来替换系统的某些不可控方面？（例如，如果它返回的 HTML 是谷歌搜索结果，那么也许我想要一个模拟对象来模拟调用谷歌，但总是返回完全相同的搜索结果页面。）

如果唯一的区别是时间戳，我可能会使用正则表达式来搜索和销毁它们，给我一个应该始终相同的字符串，例如

```
$html=preg_replace('/\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}/','[TIMESTAMP]',$html); 
```

添加 如果 HTML 字符串非常大，一种替代方法是将`md5()`其缩减为短字符串。这仍然会在发生故障时向您发出警告，但（大）缺点是当它发生故障时您将不知道在哪里。如果您对此感到担忧，那么最好使用 DOM 方法（或其可怜的表亲，正则表达式）来挑选 HTML 的几个关键部分进行测试。

# javascript - jQuery，使用主题标签

> ID：11552358
> 
> 赞同：1
> 
> 时间：2012-07-19T00:33:12.523
> 
> 标签：javascript, jquery, tabs, jquery-tools, hashtag

我找到了这篇文章

[http://www.netmagazine.com/tutorials/create-jquery-tab-system](http://www.netmagazine.com/tutorials/create-jquery-tab-system)

并修改了此选项卡以适合我当前的设计。我唯一需要做的就是让这个标签插件与主题标签一起工作。例如，如果用户打开 mydomain.com/#firstTab 打开此选项卡。

我的代码看起来像这样

```
var url, tabToken;
$(function() {

    var indicator = $('#indicator'),
    indicatorHalfWidth = indicator.width()/2,
    lis = $('#tabs').children('li');

    $("#tabs").tabs("#content section", {
        effect: 'fade',
        fadeOutSpeed: 0,
        fadeInSpeed: 400,
        onBeforeClick: function(event, index) {
            var li = lis.eq(index),
            newPos = li.position().left + (li.width()/2) - indicatorHalfWidth;
            indicator.stop(true).animate({
                left: newPos
            }, 600, 'easeInOutExpo');
        }
    }); 

});

$(document).ready(function() {
    url = document.location.href;
    tabToken=url_data = url.split('#')[1];
    if(tabToken){
         What to do???
    }
}); 
```

请查看我发布的链接，并检查我是否可以使其与主题标签一起使用？我不想改变这个插件，因为我不会找到任何类似设计的插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T00:42:24.637

看起来您所指的教程是使用[jQuery 工具选项卡系统](http://jquerytools.org/demos/tabs/)，

它已经具有历史选项以及后退按钮支持

检查[http://jquerytools.org/demos/tabs/history.html#tab3](http://jquerytools.org/demos/tabs/history.html#tab3)

```
$(function() {
  $(".css-tabs:first").tabs(".css-panes:first > div", { history: true });
}); 
```

[http://jquerytools.org/demos/tabs/history.html#tab1](http://jquerytools.org/demos/tabs/history.html#tab1)

[http://jquerytools.org/demos/tabs/history.html#tab2](http://jquerytools.org/demos/tabs/history.html#tab2)

[http://jquerytools.org/demos/tabs/history.html#tab3](http://jquerytools.org/demos/tabs/history.html#tab3)

还要检查这个内部链接

[http://jquerytools.org/demos/tabs/anchors.html](http://jquerytools.org/demos/tabs/anchors.html)

# javascript - 在 iframe 中通过 id 获取元素

> ID：11552360
> 
> 赞同：0
> 
> 时间：2012-07-19T00:33:24.603
> 
> 标签：javascript

> **可能重复：**
> [如何通过 javascript 获取 iframe 的正文内容？](https://stackoverflow.com/questions/926916/how-to-get-body-content-of-iframe-by-javascript)

我正在创建一个 Chrome 扩展，我希望能够访问 iframe 中的元素。到目前为止，我可以访问 iframe，但是当我访问我想要的元素时，它会返回错误“Uncaught TypeError: Object # has no method 'getElementById'”。iframe 中的 canvas 元素的 id 为“canvas”。

```
 var divElement, iframeElement, canvasElement;

    if (document.getElementById("puzzle")) {
      divElement = document.getElementById("puzzle");
      iframeElement = divElement.getElementsByTagName("iframe")[0];
      canvasElement = iframeElement.getElementById("canvas");
      console.log(canvasElement);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T00:47:55.647

iframe 是否与尝试访问它的站点具有不同的域？[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy "同源政策")禁止跨站点脚本，这可能是您看不到所需元素的原因。

# wordpress - 上传完成后如何使用uploadify保存上传文件的路径？

> ID：11552364
> 
> 赞同：0
> 
> 时间：2012-07-19T00:33:32.960
> 
> 标签：wordpress, uploadify

我已经在 stackoverflow 上浏览了将近 2 个小时来寻找答案。通过在这里阅读一些答案，我已经设法使我的文件上传功能很好。但这一次是没有办法的。我真的需要问一下上传后如何保存上传文件的路径。看，我在我的 wordpress 插件中使用了 uploadify。我所做的是将上传的文件（准确地说是.pdf）保存到我目录上的特定文件夹中。然后我想要的是在发布帖子时保存保存文件的路径。所以从技术上讲，上传后，我希望在帖子中的某处有上传文件的路径，这样当我发布帖子时，路径也将保存在数据库中。这甚至可能吗？

这是我插件中的代码片段，

```
/* Displays the box content which is the dropdown list of Funds */
function wnm_pengana_investor_upload_investor_box( $post ) {
    /* Use nonce for verification */
    wp_nonce_field( plugin_basename( __FILE__ ), 'wnm_pengana_funds_noncename' );

    echo        '<p class="uploadify_container">';
    echo            '<label style="margin-left: 15px;" for="investor_file_upload">Upload one or more files at once.</label>';
    echo            '<input type="file" name="investor_file_upload" id="investor_file_upload" />';
    echo        '</p>';
}

/* When the post is saved, saves our custom data */
function wnm_pengana_save_investor_upload_box( $post_id ) {
    /*verify if this is an auto save routine. If it is our form has not been submitted, so we dont want to do anything */
    if ( defined( 'DOING_AUTOSAVE' ) && DOING_AUTOSAVE ) 
    return;

    /* verify this came from the our screen and with proper authorization,because save_post can be triggered at other times */
    if ( !wp_verify_nonce( isset($_POST['wnm_pengana_funds_noncename']), plugin_basename( __FILE__ ) ) )
    return;

    // Check permissions
    if ( 'page' == $_POST['post_type'] ) {
        if ( !current_user_can( 'edit_page', $post_id ) )
            return;
    } else {
        if ( !current_user_can( 'edit_post', $post_id ) )
        return;
    }

    // OK, we're authenticated: we need to find and save the data
    $mydata = $_POST['investor_file_upload'];

    update_post_meta($post_id, 'uploaded_forms_path', $mydata);
} 
```

目前，发布时，postmeta upload_forms_path 将添加到 postmeta 表中，但它是空的。我想我需要放一些东西，``echo '<input type="file" name="investor_file_upload" id="investor_file_upload" />';` 遗憾的是我不知道我该放什么。谁能帮我？谢谢。`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T16:55:33.410

谢谢大家。似乎没有人想回答，所以我不得不拼命地为我找到一个答案。

好的，我所做的是，保存文件后，从文件uploadify.php，如果文件上传成功，我`$newTargetFile`会使用uploadify的onUploadSuccess事件返回这样的，我可以显示其中的值`$newTargetFile`是路径上传的文件。然后我将其分配为 hidden 的值`<input value="$newTargetFile" />`，因此当发布帖子时，该隐藏输入的数据将作为 postmeta 数据发布。:)

# javascript - 使用 IE9 更新 XML 数据岛

> ID：11552366
> 
> 赞同：1
> 
> 时间：2012-07-19T00:33:38.420
> 
> 标签：javascript, html, internet-explorer-9, legacy

我正在开发一个仅限 IE6 的内部遗留网站。由于使用了[XML Data Island](http://msdn.microsoft.com/en-us/library/windows/desktop/ms766512%28v=vs.85%29.aspx)特定的脚本，IE8/9 失败。目标是将站点修改为可在 IE9 上查看。其他浏览器不是问题。

有数千页和超过 100 多个 JS 文件，所以这里的另一个目标不是重写所有内容，而是修复我们可以为 IE9 启用该站点的内容。

我不完全确定我这样做是否正确，但以下是典型页面布局的示例。我把它浓缩成一个小测试来证明什么是有效的，什么是无效的。

**作品**

*   初始绑定 XML 数据岛。
*   当一个 XML 元素被更新时，相同的 XML 元素在页面的其他地方也被更新（修改两个输入字段之一的值，另一个输入字段在失去焦点时将跟随套件）。

**不工作**

*   在值更改后检索 XML 数据岛的值（至少我尝试过的方式）。
*   使绑定到 XML 数据岛的字段与嵌入的 XML 保持同步。

**重现问题的步骤**

1.  (ok) 单击*查看消息*按钮，嵌入的 xml 中的值正确显示。
2.  (ok) 更改其中一个输入字段中的值；另一个已正确更新。
3.  （不行）再次点击*查看消息*按钮；消息的新值**不会**更新。
4.  (1/2 ok) 点击*修改消息*按钮，XML 更新；但是绑定到 XML 数据岛的输入字段不会更新。
5.  (ok) 再次点击*查看消息*按钮；正确显示更新 XML 值的脚本。

**样本**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html>
<head>
    <title>Data Islands</title>

    <xml id="ResultsIsland">
        <result>
            <msg>Initial Message</msg>
        </result>
    </xml>

    <script type="text/javascript">
        function modifyDataIsland() {
            var dataIsland = document.getElementById("ResultsIsland");
            var xmlDoc = new ActiveXObject("Microsoft.XMLDOM");
            xmlDoc.loadXML(dataIsland.innerHTML);

            var xmlRoot = xmlDoc.documentElement;
            xmlRoot.getElementsByTagName("msg")[0].text = new Date();
            dataIsland.innerHTML = xmlDoc.xml;

            alert("msg element updated to: " + xmlRoot.getElementsByTagName("msg")[0].text);
        }

        function viewMessage() {
            var d = document.getElementById("Message");
            var dataIsland = document.getElementById("ResultsIsland");
            var xmlDoc = new ActiveXObject("Microsoft.XMLDOM");
            xmlDoc.loadXML(dataIsland.innerHTML);
            d.innerHTML = xmlDoc.getElementsByTagName("msg")[0].text;
        }
    </script>
</head>
<body style="margin: 100px;">

<div style="margin: 10px;">
    <button onclick="viewMessage();">view message</button>
    message is: <span id="Message"/>
</div>

<table datasrc="#ResultsIsland" style="margin: 10px;">
    <tr>
        <td>
            message: <input type="text" datafld="msg" />
        </td>
    </tr>
</table>

<table datasrc="#ResultsIsland" style="margin: 10px;">
    <tr>
        <td>
            message: <input type="text" datafld="msg" />
        </td>
    </tr>
</table>

<div style="margin: 10px;">
    <button onclick="modifyDataIsland();">modify message</button>
</div>

</body>
</html> 
```

**问题**：是否可以使用 IE9 更新 XML 数据岛，以便将更改反映在嵌入的 XML 和绑定的数据字段中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T15:58:24.023

经过各种测试，我发现强制 IE9 进入 quirks 模式可以让 IE9 与 XML Data Islands 很好地配合使用。这允许您对 XML 数据岛使用 IE5/6 脚本。

这是适用于 IE9 的修改后的示例：

```
<!--
    This comment and the following DocType forces IE9
    into quirks mode which is needed for the XML Data Islands
-->
<!DOCTYPE HTML>

<html>
<head>
    <title>Data Islands</title>

    <xml id="ResultsIsland">
        <result>
            <msg>Message</msg>
        </result>
    </xml>

    <script type="text/javascript">
        function modifyDataIsland() {
            var xml = document.all("ResultsIsland").XMLDocument;
            xml.getElementsByTagName("msg")[0].text = new Date();
            alert('msg element updated to: ' + xml.getElementsByTagName("msg")[0].text);
        }

        function viewMessage() {
            var xml = document.all("ResultsIsland").XMLDocument;
            document.getElementById("Message").innerHTML = xml.getElementsByTagName("msg")[0].text;
        }
    </script>
</head>
<body style="margin: 100px;">

<p style="margin: 30px 10px;">
   Document is in
    <strong>
    <script type="text/javascript">document.write(document.compatMode)</script>
    </strong> mode.
</p>

<div style="margin: 10px;">
    <button onclick="viewMessage();">view message</button>
    message is: <span id="Message"></span>
</div>

<table datasrc="#ResultsIsland" style="margin: 10px;">
    <tr>
        <td>
            message: <input type="text" datafld="msg"/>
        </td>
    </tr>
</table>

<table datasrc="#ResultsIsland" style="margin: 10px;">
    <tr>
        <td>
            message: <input type="text" datafld="msg"/>
        </td>
    </tr>
</table>

<div style="margin: 10px;">
    <button onclick="modifyDataIsland();">modify message</button>
</div>

</body>
</html> 
```

# iphone - NSInvocation 错误

> ID：11552373
> 
> 赞同：0
> 
> 时间：2012-07-19T00:34:17.630
> 
> 标签：iphone, cocos2d-iphone

所以我一直在尝试为我开发的游戏创建菜单。我正在使用 Cocos2d 并且游戏设置为纵向。我写的 menu.m 文件是这样的。

```
// Import the interfaces
#import "Menu.h"
#import "BankerInfo.h"

// HelloWorldLayer implementation
@implementation MenuLayer

+(CCScene *) scene
{
    // 'scene' is an autorelease object.
    CCScene *scene = [CCScene node];

// 'layer' is an autorelease object.
MenuLayer *layer = [MenuLayer node];

// add layer as a child to scene
[scene addChild: layer];

// return the scene
return scene;
}

// on "init" you need to initialize your instance
-(id) init
{
// always call "super" init
// Apple recommends to re-assign "self" with the "super" return value
if( (self=[super init])) {

    // ask director the the window size
    CGSize winSize = [[CCDirector sharedDirector] winSize];

    CCSprite *menubackground = [CCSprite spriteWithFile:@"Ninja Menu Background.png"];
    menubackground.position = ccp(winSize.width/2, winSize.height/2);
    [self addChild:menubackground z:-1];

    CCLabelTTF *title = [CCLabelTTF labelWithString:@"Catch It If You Can!"             fontName:@"Zapfino" fontSize:22];
    title.position =  ccp(160, 420);
    [self addChild: title];

    CCLayer *menuLayer = [[CCLayer alloc] init];
    [self addChild:menuLayer];

    CCMenuItem *Bankerbutton = [CCMenuItemImage
                               itemFromNormalImage:@"Bankernotpressed.png"
                               selectedImage:@"Bankerpressed.png"
                               target:self
                               selector:@selector(startBanker:)];
    //Bankerbutton.position = ccp(100, 175);

    CCMenuItem *Babybutton = [CCMenuItemImage
                                 itemFromNormalImage:@"Babynotpressed.png"
                                 selectedImage:@"Babypressed.png"
                                 target:self
                                 selector:@selector(startBaby:)];
    //Babybutton.position = ccp(100, 75);
    CCMenuItem *Mommaduckbutton = [CCMenuItemImage
                              itemFromNormalImage:@"Mommaducknotpressed.png"
                              selectedImage:@"Mommaduckpressed.png"
                              target:self
                              selector:@selector(startMommaduck:)];
    //Mommaduckbutton.position = ccp(350, 175);
    CCMenuItem *Baseballbutton = [CCMenuItemImage
                                itemFromNormalImage:@"Baseballnotpressed.png"
                                selectedImage:@"Baseballpressed.png"
                                target:self
                                selector:@selector(startArcher:)];
    //Baseballbutton.position = ccp(350, 75);
    CCMenuItem *Newtonbutton = [CCMenuItemImage
                                  itemFromNormalImage:@"Newtonnotpressed.png"
                                  selectedImage:@"Newtonpressed.png"
                                  target:self
                                  selector:@selector(startArcher:)];
    //Newtonbutton.position = ccp(350, 75); 

    CCMenu *menu = [CCMenu menuWithItems: Bankerbutton, Babybutton, Mommaduckbutton,         Baseballbutton, Newtonbutton, nil];
    menu.position = ccp(winSize.width/2, (winSize.height/2)-30);
    [menu alignItemsInRows:
     [NSNumber numberWithInt:2], [NSNumber numberWithInt:2], nil];
    [menuLayer addChild: menu];

}
return self;
}

- (void) startBanker: (id) sender
{
[[CCDirector sharedDirector] replaceScene:[BankerInfoLayer scene]];
}
/*- (void) startBaby: (id) sender
{
[[CCDirector sharedDirector] replaceScene:[Backgroundinfo_Soldier scene]];
}
- (void) startMommaduck: (id) sender
{
[[CCDirector sharedDirector] replaceScene:[Backgroundinfo_Mage scene]];
}
- (void) startBaseball: (id) sender
{
[[CCDirector sharedDirector] replaceScene:[Backgroundinfo_Archer scene]];
}
- (void) startNewton: (id) sender
{
[[CCDirector sharedDirector] replaceScene:[Backgroundinfo_Archer scene]];
}
*/
// on "dealloc" you need to release all your retained objects
- (void) dealloc
{
// in case you have something to dealloc, do it in this method
// in this particular example nothing needs to be released.
// cocos2d will automatically release all the children (Label)

// don't forget to call "super dealloc"
[super dealloc];
}
@end 
```

我得到的错误看起来像这样。

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', 
reason: '+[NSInvocation invocationWithMethodSignature:]: 
method signature argument cannot be nil' 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T00:49:30.963

该错误指出，这是由于对不存在的方法签名的错误调用而发生的。如果你提供菜单创建时使用的功能，它仍然会崩溃吗？

第 1 步：确保棒球按钮和牛顿按钮指向正确的选择器，而不仅仅是不存在的“startArcher：”。

```
CCMenuItem *Baseballbutton = [CCMenuItemImage
                            itemFromNormalImage:@"Baseballnotpressed.png"
                            selectedImage:@"Baseballpressed.png"
                            target:self
                            selector:@selector(startBaseball:)]; // CHANGED HERE
//Baseballbutton.position = ccp(350, 75);
CCMenuItem *Newtonbutton = [CCMenuItemImage
                              itemFromNormalImage:@"Newtonnotpressed.png"
                              selectedImage:@"Newtonpressed.png"
                              target:self
                              selector:@selector(startNewton:)]; // CHANGED HERE 
```

第 2 步：取消注释函数，以便您实际上拥有有效的选择器

```
- (void) startBanker: (id) sender
{
    [[CCDirector sharedDirector] replaceScene:[BankerInfoLayer scene]];
}
- (void) startBaby: (id) sender
{
    [[CCDirector sharedDirector] replaceScene:[Backgroundinfo_Soldier scene]];
}
- (void) startMommaduck: (id) sender
{
    [[CCDirector sharedDirector] replaceScene:[Backgroundinfo_Mage scene]];
}
- (void) startBaseball: (id) sender
{
    [[CCDirector sharedDirector] replaceScene:[Backgroundinfo_Archer scene]];
}
- (void) startNewton: (id) sender
{
    [[CCDirector sharedDirector] replaceScene:[Backgroundinfo_Archer scene]];
} 
```

# css - 如何自动裁剪和居中图像

> ID：11552380
> 
> 赞同：174
> 
> 时间：2012-07-19T00:34:46.780
> 
> 标签：css

给定任意图像，我想从图像的中心裁剪一个正方形并将其显示在给定的正方形内。

这个问题类似于：[CSS Display an Image Resized and Cropped](https://stackoverflow.com/questions/493296/css-display-an-image-resized-and-cropped)，但我不知道图像的大小，所以我不能使用设置边距。

* * *

## 回答 #1

> 赞同：345
> 
> 时间：2012-07-19T00:45:07.690

一种解决方案是使用以裁剪尺寸为大小的元素中居中的背景图像。

* * *

# 基本示例

```
.center-cropped {
  width: 100px;
  height: 100px;
  background-position: center center;
  background-repeat: no-repeat;
}
```

```
<div class="center-cropped" 
     style="background-image: url('http://placehold.it/200x200');">
</div>
```

* * *

# `img`带标签的示例

这个版本保留了`img`标签，这样我们就不会失去拖动或右键单击来保存图像的能力。归功于[Parker Bennett](http://css-tricks.com/crop-top/)的不透明技巧。

```
.center-cropped {
  width: 100px;
  height: 100px;
  background-position: center center;
  background-repeat: no-repeat;
  overflow: hidden;
}

/* Set the image to fill its parent and make transparent */
.center-cropped img {
  min-height: 100%;
  min-width: 100%;
  /* IE 8 */
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
  /* IE 5-7 */
  filter: alpha(opacity=0);
  /* modern browsers */
  opacity: 0;
}
```

```
<div class="center-cropped" 
     style="background-image: url('http://placehold.it/200x200');">
  <img src="http://placehold.it/200x200" />
</div>
```

* * *

# `object-fit`/`-position`

*[请参阅支持的浏览器](http://caniuse.com/#feat=object-fit)。*

[CSS3 图像规范](http://www.w3.org/TR/css3-images/)定义了`object-fit`和属性，`object-position`它们一起允许更好地控制`img`元素图像内容的比例和位置。有了这些，就可以达到预期的效果：

```
.center-cropped {
  object-fit: none; /* Do not scale the image */
  object-position: center; /* Center the image within the element */
  height: 100px;
  width: 100px;
}
```

```
<img class="center-cropped" src="http://placehold.it/200x200" />
```

* * *

## 回答 #2

> 赞同：85
> 
> 时间：2015-02-24T09:32:44.530

我一直在寻找使用`img`标签（而不是背景图像方式）的纯 CSS 解决方案。

[我发现了这种使用 css](http://jonathannicol.com/blog/2014/06/16/centre-crop-thumbnails-with-css/)实现裁剪缩略图目标的绝妙方法：

```
.thumbnail {
  position: relative;
  width: 200px;
  height: 200px;
  overflow: hidden;
}
.thumbnail img {
  position: absolute;
  left: 50%;
  top: 50%;
  height: 100%;
  width: auto;
  -webkit-transform: translate(-50%,-50%);
      -ms-transform: translate(-50%,-50%);
          transform: translate(-50%,-50%);
}
.thumbnail img.portrait {
  width: 100%;
  height: auto;
} 
```

它类似于@Nathan Redblur 的答案，但它也允许肖像图像。

对我来说就像一个魅力。关于图像，您唯一需要知道的是它是纵向还是横向才能设置`.portrait`类，因此我不得不在这部分使用一些 Javascript。

* * *

## 回答 #3

> 赞同：55
> 
> 时间：2015-11-03T21:15:18.720

试试这个：设置你的图像裁剪尺寸并在你的 CSS 中使用这一行：

```
object-fit: cover; 
```

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2014-11-14T02:16:46.347

# `img`带标签但不带标签的示例`background-image`

这个解决方案保留了`img`标签，这样我们就不会失去拖动或右键单击以保存图像的能力，但不会失去`background-image`中心和 css 裁剪。

除非在非常高的图像中，否则保持宽高比正常。（检查链接）

[（查看实际）](http://jsfiddle.net/vYdBt/452/)

**标记**

```
<div class="center-cropped">
    <img src="http://placehold.it/200x150" alt="" />
</div> 
```

**​CSS**

 **```
div.center-cropped {
  width: 100px;
  height: 100px;
  overflow:hidden;
}
div.center-cropped img {
  height: 100%;
  min-width: 100%;
  left: 50%;
  position: relative;
  transform: translateX(-50%);
} 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2014-03-13T09:38:27.210

我使用@Russ 和@Alex 的答案创建了一个 angularjs 指令

在 2014 年及以后可能会很有趣：P

html

```
<div ng-app="croppy">
  <cropped-image src="http://placehold.it/200x200" width="100" height="100"></cropped-image>
</div> 
```

js

```
angular.module('croppy', [])
  .directive('croppedImage', function () {
      return {
          restrict: "E",
          replace: true,
          template: "<div class='center-cropped'></div>",
          link: function(scope, element, attrs) {
              var width = attrs.width;
              var height = attrs.height;
              element.css('width', width + "px");
              element.css('height', height + "px");
              element.css('backgroundPosition', 'center center');
              element.css('backgroundRepeat', 'no-repeat');
              element.css('backgroundImage', "url('" + attrs.src + "')");
          }
      }
  }); 
```

[小提琴链接](http://jsfiddle.net/pferdefleisch/Q7HNj/1/)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-19T00:51:07.777

试试这个：

```
#yourElementId
{
    background: url(yourImageLocation.jpg) no-repeat center center;
    width: 100px;
    height: 100px;
} 
```

请记住，`width`只有`height`当您的 DOM 元素具有布局（块显示元素，如 a`div`或 an `img`）时，它才会起作用。如果不是（例如跨度），请添加`display: block;`到 CSS 规则中。如果您无权访问 CSS 文件，请将样式内联放入元素中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-04-06T08:12:12.907

还有另一种方法可以将图像居中裁剪：

```
.thumbnail{position: relative; overflow: hidden; width: 320px; height: 640px;}
.thumbnail img{
    position: absolute; top: -999px; bottom: -999px; left: -999px; right: -999px;
    width: auto !important; height: 100% !important; margin: auto;
}
.thumbnail img.vertical{width: 100% !important; height: auto !important;} 
```

您唯一需要的是将类“垂直”添加到垂直图像，您可以使用以下代码来完成：

```
jQuery(function($) {
    $('img').one('load', function () {
        var $img = $(this);
        var tempImage1 = new Image();
        tempImage1.src = $img.attr('src');
        tempImage1.onload = function() {
            var ratio = tempImage1.width / tempImage1.height;
            if(!isNaN(ratio) && ratio < 1) $img.addClass('vertical');
        }
    }).each(function () {
        if (this.complete) $(this).load();
    });
}); 
```

注意：“！important”用于覆盖 img 标签上可能的宽度、高度属性。**

# byte-order-mark - php 文件中没有 BOM 的 UTF-8

> ID：11552381
> 
> 赞同：0
> 
> 时间：2012-07-19T00:34:55.160
> 
> 标签：byte-order-mark

在我网站的每个页面上都看到这些符号“ï»¿ï»¿”我不知道为什么有些人建议将 charset=\"UTF-8\" 放在页面顶部，但也没有人可以帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T06:55:04.763

尝试在 Notepad++ 中加载代码文件，然后选择 Encoding > Encode in UTF-8 without BOM。

# java - 在 Java 正则表达式中捕获组

> ID：11552387
> 
> 赞同：1
> 
> 时间：2012-07-19T00:35:28.923
> 
> 标签：java, regex

我写了这个正则表达式：

```
String REGEX = "^\\s+something\\s+(not\\s+)?else\\s+((\\d+|\\d+-\\d+),\\s+)*(\\d+|\\d+-\\d+)$"; 
```

这是我的主要方法：

```
 public static void main(String... args) {
    Matcher matcher = PATTERN.matcher(" something else 1, 3, 4, 5-7");
    if (matcher.matches()) {
      for (int index = 0; index <= matcher.groupCount(); index++) {
        System.out.println(index + ": " + matcher.group(index));
      }
    }
  } 
```

这是我的输出：

```
0:  match cos 1, 3, 4, 5-7
1: null
2: 4, 
3: 4
4: 5-7 
```

它似乎`1`并且`3`没有被捕获。（输出很好。）如何修复我的正则表达式以便我可以捕获它们（并在最后捕获它们而不用逗号）`4`？`5-7`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T01:02:13.187

如果您的目标是找到预测的数字，`something else`或者`something not else`可能将它们分组为一组，然后用 拆分`,\\s+`，例如

```
String REGEX = "^\\s+something\\s+(not\\s+)?else\\s+((((\\d+|\\d+-\\d+),\\s+)*)(\\d+|\\d+-\\d+))$";
Pattern PATTERN = Pattern.compile(REGEX);
Matcher matcher = PATTERN.matcher(" something else 1, 3, 4, 5-7");
if (matcher.matches()) {
    System.out
            .println(Arrays.toString(matcher.group(2).split(",\\s+")));
} 
```

输出：

```
[1, 3, 4, 5-7] 
```

# java - 从 Java 调用的 SQL Server 中的表变量问题

> ID：11552404
> 
> 赞同：4
> 
> 时间：2012-07-19T00:37:06.987
> 
> 标签：java, tsql, jdbc

我有一个 SQL 语句，它在 MS Server Management Studio 中执行时有效，从 C# 提交时有效，但从 Java 提交时无效（1.6，使用 sqljdbc4.jar）。

基本问题似乎是选择表变量。继第一条评论之后，我已经使用更简单的示例完全重写了这个问题，以显示哪些有效，哪些无效。

以下查询：

```
DECLARE @IsLoadRaw as INT = ? 
DECLARE @PrimaryID as varchar(1000) = ?
--Declare temporary table to hold message IDs and fill according to Primary ID.
DECLARE @MessageIDs TABLE ( MessageID BIGINT )
SELECT MessageID FROM Messages WHERE PrimaryID = @PrimaryID 
```

在 SQL Management Studio 和从 Java 提交时都可以使用。在这两种情况下，它都会返回一个带有两个 MessageID 的结果集（对于我用来测试的给定 PrimaryID 是正确的）。

以下查询：

```
DECLARE @IsLoadRaw as INT = ? 
DECLARE @PrimaryID as varchar(1000) = ?
--Declare temporary table to hold message IDs and fill according to Primary ID.
DECLARE @MessageIDs TABLE ( MessageID BIGINT );
INSERT @MessageIDs SELECT MessageID FROM Messages WHERE PrimaryID = @PrimaryID;
SELECT * FROM @MessageIDs; 
```

在 SQL Management Studio 中工作，它返回具有相同两个 MessageID 的结果集。从 Java 提交时，它不返回任何结果集。

使我们使用@MessageIDs 的完整语句在通过ADO.NET 从C# 提交时起作用。我假设这里的第二个示例也可以。该问题与 Java 无关，似乎与使用表变量有关。由于代码看起来正确并在 SQL Management Studio 下运行，我对如何调试它感到困惑。

知道为什么这不适用于 Java 吗？当从 Java 提交时，我可以使用哪些工具来了解服务器对此查询的操作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T19:48:21.673

我做了更多的挖掘并找到了答案：

```
INSERT @MessageIDs SELECT MessageID FROM Messages WHERE PrimaryID = @PrimaryID; 
```

从 Java 提交时返回更新计数。从 C# 或 SQL 管理控制台提交时，它不会返回更新计数。我没想到会这样，所以花了一些时间才找到。

用于单步执行结果的 java API`execute()`令人困惑，没有可能的示例，而且我发现至少有一个不完全正确。我将解释我如何理解它的工作原理。

由于大多数语句都很简单，一改一选，因此 Statement 上有方便的执行方法，例如`executeQuerry()`，它返回一个结果集。大多数情况下都使用这些，这就是故事的结尾。

如果你有一个更复杂的语句，它做了几件事情，你调用`execute()`并返回一个事情列表。 `INSERT`, `UPDATE`, 和`DELETE`（我相信）返回修改的记录数。 `SELECT`返回一个结果集。执行复杂语句的结果是更新计数和结果集的列表，按执行顺序排列。然后，您编写逐个遍历此列表的代码，处理每个项目。

该声明

```
DECLARE @MessageIDs TABLE ( MessageID BIGINT )
INSERT @MessageIDs SELECT MessageID FROM Messages WHERE PrimaryID = @PrimaryID;
SELECT * FROM Messages WHERE MessageID IN (SELECT MessageID FROM @MessageIDs) ORDER BY MessageID;
SELECT * FROM Attrs WHERE MessageID IN (SELECT MessageID FROM @MessageIDs) ORDER BY MessageID; 
```

返回 2 个结果集。在 java 中，并且出于我不知道的原因仅在 java 中，该`INSERT @MessageIDs...`语句返回一个更新计数，它是列表中的第一项。

用于此的 java API 令人困惑。Statement.execute() 和 Statement.getMoreResults() 返回：

*   `true`如果下一个结果是 ResultSet
*   `false`如果下一个结果是更新计数或没有更多结果

`false`有两层意思，不能解释为结果的结束。您还必须检查非零更新计数。

最终的功能代码最终看起来像这样：

```
List<DtaMessage> msgList = new ArrayList<DtaMessage>();
boolean isResult = stmt.execute();

// Skip over update counts.  
while (!isResult) {
    if (stmt.getUpdateCount() == 0)
        // End of results.
        return msgList;
    isResult = stmt.getMoreResults();
}

// Process first result set.
ResultSet rs = stmt.getResultSet();
while (rs.next())
{
    DtaMessage msg = PopulateMessage(rs, isLoadRaw);
    msgList.add(msg);
}
rs.close();

// Skip over update counts.
isResult = stmt.getMoreResults();
while (!isResult) {
    if (stmt.getUpdateCount() == 0)
        // end of results.
        return msgList;
    isResult = stmt.getMoreResults();
}

// Process second result set.
rs = stmt.getResultSet();
while (rs.next())
{
    // process.
}
rs.close();
return msgList; 
```

尽管我的示例 SQL 没有执行任何会在两个结果集之间生成更新计数的操作，但此方法将处理来自多个不同 SQL 语句的结果，因此我添加了代码以跳过在某些情况下可能出现的更新日期计数。

# linux - Linux cmd行，如何将所有找到的文件移动到上层目录

> ID：11552412
> 
> 赞同：1
> 
> 时间：2012-07-19T00:37:41.737
> 
> 标签：linux, shell, command-line

我想要做的是递归查找某些文件并将它们移动到其当前目录的上层。

例如，

```
foo1/bar1/abc
foo2/bar2/bar3/abc 
```

将更新为

```
foo1/abc
foo2/bar2/abc 
```

我试过

```
find -name \*abc -exec /bin/mv '{}' .. \; 
```

但这是错误的，因为它将所有内容都移到了`$PWD`.

有没有类似的命令行方式来动态移动东西？还是我必须使用更复杂的脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T00:47:54.477

干得好 ..

这就是结构开始时的样子......

```
$ tree

[.]
 +-- foo1
 !   `-- bar1
 !       `-- abc
 !
 `-- foo2
     `-- bar2
         `-- bar3
             `-- abc 
```

然后我们运行命令来移动文件

```
$ find . -type f -name "*abc" -exec bash -c ' mv -v  {} `dirname {}`/.. '  \; 
```

这会产生这个输出......

```
`./foo1/bar1/abc' -> `./foo1/bar1/../abc'
`./foo2/bar2/bar3/abc' -> `./foo2/bar2/bar3/../abc' 
```

现在目录结构看起来像..

```
$ tree

[.]
 +-- foo1
 !   +-- abc
 !   `-- bar1
 !
 `-- foo2
     `-- bar2
         +-- abc
         `-- bar3 
```

重要的位...

```
-type f        <-- Make sure that you pick files not folders, if you need folders too omit this.
-name "*abc"   <-- Your file-match pattern
-exec bash -c ' mv -v  {} `dirname {}`/.. '  \; 
```

这里 .. 执行 bash，给它传递一个字符串，该字符串将找到文件的目录，并在末尾添加一个 '/..' 以使 mv 将文件带到父目录。

重要警告：

> 如果您希望该文件位于搜索的根目录中，那么最终该文件将移动到您的搜索根目录的父目录，从而永远将它们从您的匹配模式中移除。

或者

> 如果您位于文件系统的根目录，则文件将*始终*匹配，并且 mv 将成为无操作。

无论如何，最好测试一下您最终不会在根目录下使用文件，除非这是意图所在。:-)

希望这可以帮助。

# iphone - 在 UIView 中加载不同的视图控制器（如 Xcode 的 iFrame）

> ID：11552413
> 
> 赞同：4
> 
> 时间：2012-07-19T00:37:42.850
> 
> 标签：iphone, ios, xcode, uiview, uiviewcontroller

我正在用 Xcode 中的故事板制作我的第一个 iPhone 应用程序，但我被卡住了。我的主屏幕有一个名为 MemberViewController 的视图控制器，它是主屏幕。这个屏幕有一个 UIView，它比名为 mainContent 的视图控制器小。

所以基本上，我希望能够在 UIView 中加载不同的视图控制器（与 UIView 的大小相同）。

MemberViewController（主页）-mainContent（UIView）

GetStartedViewController（我想在 UIView 中显示的单独视图控制器） ProfileViewController（我想在 UIView 中显示的单独视图控制器）

例如，我希望 GetStartedViewController 有一个按钮，我可以按下该按钮来切换到 ProfileViewController。视图控制器需要能够在 mainContent UIView 中相互替换。

非常感谢您的帮助。如果有更简单的方法可以做到这一点，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T03:45:20.627

我实际上经常使用这种技术。我典型的根设置`UIViewController`（你称之为它`memberController`）在底部有一个视图`UITabBar`，然后是另一个`UIView`（你称之为它`mainContent`）包含该栏上方的其余空间的视图。

`memberController`一直停留在屏幕上。在里面`mainContent`，添加一个`UINavigationController`并用你的第一个内容承载初始化它`GetStartedViewController`。当你想在你的标签栏上切换标签时，向它发送适当的消息，`UINavigationController`里面的视图就会改变。

提示：说你`UINavigationController`的被叫`navController`- 你可以通过发送消息摆脱导航栏（顶部的蓝色）`[navController setNavigationBarHidden:TRUE];`

编辑：您请求的代码如下所示。这会将导航控制器添加到`applicationDidFinishLaunchingWithOptions`方法中的窗口视图。而不是窗口，只需在`viewDidLoad`.

`window`并且`navController`都是属性

```
 self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
self.navController = [[UINavigationController alloc] initWithRootViewController:[YourViewController new]];
[self.navController setNavigationBarHidden:YES];
[self.window addSubview:self.navController.view];
[self.window makeKeyAndVisible]; 
```

希望这可以帮助！

# c# - 寻找没有两个或更多连续 6 的下一个数字的算法

> ID：11552415
> 
> 赞同：1
> 
> 时间：2012-07-19T00:37:52.070
> 
> 标签：c#, algorithm

我被赋予了一个相当奇怪的要求来满足特定的解决方案。要求是在给定当前数字的情况下编写一个函数，以查找下一个连续数字，该数字不包括具有两个或多个连续 6 的数字。

到目前为止，我有以下代码（在 C# 中），我用一些输入进行了测试，它可以工作。我知道这不是最有效的解决方案，但它可以完成工作，我只是想看看是否有更有效的方法来做到这一点。我采取的方法是将数字转换为字符串并使用简单的正则表达式来查看下一个序列是否是给定要求的有效序列。我也知道，一旦数字达到其 (2^31) - 1 限制，它将引发错误，但目前这不是问题。

```
public int GetNextSequenceNumber(int currentSequenceNumber)
{
    var nextSequenceCandidate = currentSequenceNumber + 1;
    var strNum = nextSequenceCandidate.ToString();

    if (IsValidSequenceNumber(strNum))
    {
        return nextSequenceCandidate;
    }
    else
    {
        do
        {
            strNum = (++nextSequenceCandidate).ToString();

        } while (!IsValidSequenceNumber(strNum));

        return nextSequenceCandidate;
    }
}

private bool IsValidSequenceNumber(string sequenceNumber)
{
    return !Regex.IsMatch(sequenceNumber, "[6]{2,}");
} 
```

我在想还有另一种方法可以使用除法和模运算来找出数字位置并根据需要递增。任何输入表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T00:42:05.257

我看到的最有效的解决方案实际上是使用字符串替换，但这仅在您递增并返回序列的所有值时才有效。只需替换`66`为`67`.

如果允许任何起始数字，则必须在数字字符串中`0`第一次出现后附加与数字一样多的 s 。`66`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T00:46:05.713

将您的数字转换为十进制格式，例如字节数组，扫描 66。

如果你找不到它，你就完了。否则，将其更改为 67，后跟全零。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T01:03:25.953

我认为你最好的选择是不要考虑增加一个数字，而是考虑验证一个字符串。像下面这样的东西可以防止潜在的长时间循环运行，并且应该提供下一个可能没有“66”的最低值。

```
public static int GetNextSequenceNumber(int currentSequenceNumber)
    {
        int nextNumber = currentSequenceNumber += 1;
        string nextNumberStr = nextNumber.ToString();
        if (!nextNumberStr.Contains("66"))
        {
            return nextNumber;
        }
        else
        {
            //travel from left to right, find the 66, and increment the last 6 and reset the remaining values.
            bool doreset = false;
            bool lastwassix = false;
            string newString = string.Empty;
            for (int i = 0; i < nextNumberStr.Length; i++)
            {
                if (doreset) { newString += '0'; continue; }
                char c = nextNumberStr[i];
                if (c == '6')
                {
                    if (lastwassix)
                    {
                        newString += '7';
                        doreset = true;
                        continue;
                    }
                    lastwassix = true; 
                }
                newString += c;
            }
            return Convert.ToInt32(newString);
        }
    } 
```

# javascript - EmberJS：如何从控制器的动作过渡到路由器

> ID：11552417
> 
> 赞同：13
> 
> 时间：2012-07-19T00:38:35.147
> 
> 标签：javascript, ember.js, ember-old-router

我有一个动作：

```
{{action create target="controller"}} 
```

我的目标是绑定控制器（而不是路由器），如下所示：

```
App.AddBoardController = Ember.Controller.extend
    create: ->
        App.store.createRecord App.Board, {title: @get "boardName"}
        App.store.commit()
        //TODO: Redirect to route 
```

如何从控制器操作重定向回路由？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-07-25T02:05:49.527

使用[transitionToRoute('route')](http://emberjs.com/api/classes/Ember.Controller.html#method_transitionToRoute)在 Ember 控制器操作中重定向：

```
App.AddBoardController = Ember.Controller.extend({
    create: function(){ 
        ...
        //TODO: Redirect to route
        this.transitionToRoute('route_name');
    }
... 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-07-19T06:22:08.460

事实上，这不是 Ember 惯用的。根据我所知道的以及我从 Tom Dale 本人那里学到的东西，这里有一些关于该代码的评论：

*   首先，您不应该从路由器内部以外的其他地方转换到：这样做会使您面临严重的问题，因为您不知道路由器处于哪个状态，因此要保持运行，您将很快不得不降级您的设计，顺便说一下代码的整体质量，最后是应用程序的稳定性，
*   其次，您要显示的操作内容应位于路由器内部，以避免不必要的上下文执行。路由器确实是一种为整个应用程序强制执行连贯行为的方法，仅在某些状态下处理操作。当您将动作实现放入控制器时，可以随时调用这些动作，包括错误的......
*   最后，Ember 的控制器并非旨在包含行为，因为它们是增值包装器，主要包含计算属性。如果您仍然想分解原语，那么模型可能是一个好地方，或者第三方上下文，但肯定不是控制器。

您绝对应该将动作放在路由器内部，并相应地转换到。

希望这会有所帮助。

**更新**

**第一个示例（接近您的示例）**

在适当的路线中：

```
saveAndReturnSomewhere: function (router, event) {
  var store = router.get('store'),
      boardName = event.context; // you pass the (data|data container) here. In the view: {{action saveAndReturnSomewhere context="..."}}
  store.createRecord(App.Board, {
    title: boardName
  });
  store.commit();
  router.transitionTo('somewhere');
} 
```

**重构示例**

我建议有以下路线：

*   `show`：显示现有项目，
*   `edit`: 建议输入项目的字段

进入封闭路线，以下事件处理程序：

*   `createItem`：创建一个新记录和transitionTo`edit`路由，例如
*   `editItem`: 过渡到`edit`路由

进入`edit`路线，以下事件处理程序：

*   `saveItem`: 这将提交 store 和 transitionTo`show`路由，例如

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-19T01:19:39.563

编辑：继续阅读，迈克的回答讨论了这种方法的一些问题。

您可以直接在路由器上调用 transitionTo 。如果您使用默认值，这看起来像`App.router.transitionTo('route', context)`.

# python - xlrd安装问题

> ID：11552427
> 
> 赞同：2
> 
> 时间：2012-07-19T00:40:14.897
> 
> 标签：python, import, installation, xlrd

我目前在 Windows 7 64 位上运行 python 2.7，并且很难让 xlrd 工作。

运行任何脚本后：

```
import xlrd 
```

我得到“ImportError：没有名为 xlrd 的模块”

使用[http://pypi.python.org/pypi/xlrd/](http://pypi.python.org/pypi/xlrd/)中的 exe 和 msi 安装正常完成，我可以看到 xlrd 文件夹及其内容在常规​​目录 C:\Python27\Lib\site-packages 中。但我仍然收到“ImportError”。然后，我尝试使用源文件夹进行安装。我打开powershell并将目录更改为源文件夹，然后输入：

```
python setup.py install 
```

但是在这个过程的中间，我得到了消息：

```
...
creating C:\Program Files <x86>\PsychoPy2\Lib\site-packages\xlrd
error: could not create 'C:\Program Files (x86)\PsychoPy2\Lib\site-packages\xlrd': Access is denied" 
```

我假设我之前安装的psychopy 库存在某种问题。但这是一个单独的问题吗？还有其他解决方法吗？任何帮助将不胜感激。

# javascript - Javascript图像动画闪烁图像错误

> ID：11552431
> 
> 赞同：2
> 
> 时间：2012-07-19T00:40:25.010
> 
> 标签：javascript, jquery, css

我有一些用于为天气雷达制作动画的 javascript，但图像会在每个时间间隔闪烁。有谁知道如何解决这一问题？这是我到目前为止的代码。一个.. [http://jsfiddle.net/5a2BZ/46/](http://jsfiddle.net/5a2BZ/46/)

**HTML**

```
<script src="http://code.jquery.com/jquery-1.5.2rc1.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.11/jquery-ui.min.js"></script>

<div id="slider">
    <div id="bar">
    </div>
</div> 
```

**JavaScript**

```
$('#bar').draggable({
    containment: 'parent'
});

var animate = null;
var even = true;

animate = setInterval(function () {

    if (even) {
        $("#bar").css("background-image", "url('http://static.baynews9.com/images/wx/bn9/radar/7_county/1342653720.jpg')");
        even = false;
    } else { 
        $("#bar").css("background-image", "url('http://static.baynews9.com/images/wx/bn9/radar/7_county/1342654440.jpg')");
        even = true;
    }

}, 500);

var el = document.getElementById('bar'); 
el.addEventListener("touchstart", touchHandler, true);
el.addEventListener("touchmove", touchHandler, true);
el.addEventListener("touchend", touchHandler, true);
el.addEventListener("touchcancel", touchHandler, true);

function touchHandler(event){
    var touches = event.changedTouches,
        first = touches[0],
        type = "";

    switch(event.type)
    {
        case "touchstart": type = "mousedown"; break;
        case "touchmove":  type="mousemove"; break;        
        case "touchend":   type="mouseup"; break;
        default: return;
    }
    var simulatedEvent = document.createEvent("MouseEvent");
    simulatedEvent.initMouseEvent(type, true, true, window, 1,
                              first.screenX, first.screenY,
                              first.clientX, first.clientY, false,
                              false, false, false, 0/*left*/, null);

    first.target.dispatchEvent(simulatedEvent);
    event.preventDefault();
} 
```

**CSS**

```
#slider {
    width: 700px;
    border: 1px solid #000;
    height: 500px;
}

#bar {
    border: 1px solid #000;
    left:30px;
    top:30px;
    height: 355px;
    cursor: pointer;
    width: 666px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T00:54:44.180

使用与您的雷达图像匹配的静态图像作为背景。这不是最好的解决方案，但似乎对我有用。这是CSS和HTML。我没有更改javascript。

```
#slider {
width: 700px;
border: 1px solid #000;
height: 500px;
}

#bar {
border: 1px solid #000;
left:30px;
top:30px;
height: 355px;
cursor: pointer;
width: 666px;
}
#well{
width: 100%;
height: 100%;
z-index:-1;
position:relative;
background-image: url('http://static.baynews9.com/images/wx/bn9/radar/7_county/1342653720.jpg');
} 
```

并将您的酒吧包裹在一个井周围，例如：

```
<div id="slider">
    <div id="bar">
        <div id="well">
        </div>
    </div>
</div>​ 
```

​这里是完整的解决方案：http: [//jsfiddle.net/5a2BZ/70/](http://jsfiddle.net/5a2BZ/70/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T01:08:54.190

亚历克斯和肖恩都是正确的。

这是一个版本，它允许它处理任意数量的图像（在合理范围内）。

[http://jsfiddle.net/5a2BZ/66/](http://jsfiddle.net/5a2BZ/66/)

```
<script src="http://code.jquery.com/jquery-1.5.2rc1.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.11/jquery-ui.min.j></script>

<style>
.slider {
    width: 700px;
    border: 1px solid #000;
    height: 500px;
}

.bar {
    border: 1px solid #000;
    left:30px;
    top:30px;
    height: 355px;
    cursor: pointer;
        width: 666px;
    }

    .bar img {
        display: none;   
    }
</style>

<div class="slider">
    <div class="bar">
        <img src="http://static.baynews9.com/images/wx/bn9/radar/7_county/1342653720.jpg"/>
        <img src="http://static.baynews9.com/images/wx/bn9/radar/7_county/1342654440.jpg"/>
    </div>
</div>​

<script>
$('.bar').draggable({
    containment: 'parent'
});

var animate = null,
    i = 0;

animate = setInterval(function () {
    var imgs = $('.bar').children('img'),
        currentImg = imgs.eq(i-1),
        nextImg = imgs.eq(i);

    if (i === 0) {
        currentImg = imgs.eq(imgs.length - 1);
    }            

    currentImg.hide();
    nextImg.show();

    if (i >= imgs.length - 1) {
        i = 0;
    }
    else {
        i += 1;
    }

}, 500);

var el = document.getElementById('bar'); 
el.addEventListener("touchstart", touchHandler, true);
el.addEventListener("touchmove", touchHandler, true);
el.addEventListener("touchend", touchHandler, true);
el.addEventListener("touchcancel", touchHandler, true);

function touchHandler(event){
    var touches = event.changedTouches,
        first = touches[0],
        type = "";

    switch(event.type)
    {
        case "touchstart": type = "mousedown"; break;
        case "touchmove":  type="mousemove"; break;        
        case "touchend":   type="mouseup"; break;
        default: return;
    }
    var simulatedEvent = document.createEvent("MouseEvent");
    simulatedEvent.initMouseEvent(type, true, true, window, 1,
                              first.screenX, first.screenY,
                              first.clientX, first.clientY, false,
                              false, false, false, 0/*left*/, null);

    first.target.dispatchEvent(simulatedEvent);
    event.preventDefault();
}
</script>

​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T01:01:39.693

如果我是你，我宁愿有几个带有正确图像的 DIV，并在需要时显示和隐藏这些 div，这样你就不会有任何闪烁。

像这样的一些简单代码：

```
 <div id="slider" class="Normal" style="position: relative; ">

<img alt="" src="http://static.baynews9.com/images/wx/bn9/radar/7_county/1342653720.jpg" style="" class="bar img1">
<img alt="" src="http://static.baynews9.com/images/wx/bn9/radar/7_county/1342654440.jpg" style="display:none;" class="bar img2">

    </div> 
```

然后你可以在你的 JavaScript 中有这样的东西：

```
if (even) {
        $(".bar").hide();
        $(".img1").show();
        even = false;
    } else { 
        $(".bar").hide();
        $(".img2").show();
        even = true;} 
```

这是演示：http: [//jsfiddle.net/webwarrior/xnePc/4/](http://jsfiddle.net/webwarrior/xnePc/4/)

这将首先隐藏具有类横幅的所有图像，然后显示类“img1”/“img2”的特定图像。img1 和 img2 也可以是 id。

也看看这个库，以获得更多想法：

[http://sorgalla.com/projects/jcarousel/](http://sorgalla.com/projects/jcarousel/)

[http://sorgalla.com/projects/jcarousel/examples/static_simple.html](http://sorgalla.com/projects/jcarousel/examples/static_simple.html)

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T01:06:53.067

发生闪烁是因为图像在每次刷新时都在更改（并再次加载）。旧背景在新背景结束从其源下载之前被清除。如果您真的不希望发生闪烁，您应该使用两个 div，将一个放在另一个的顶部，并在每次迭代中交替顺序。

# c# - 如何在 MVC 视图中处理丢失的图像 URL

> ID：11552434
> 
> 赞同：0
> 
> 时间：2012-07-19T00:41:06.590
> 
> 标签：c#, asp.net-mvc

我有一个 MVC 视图，它有几个图像（每页 1 个）。

例子：

```
<img alt ='thumb1' src='<%= Model.ThumbnailURL %>' height="65" width="90" /> 
```

问题是模型可能有也可能没有 ThumbnailURL，这会导致对象引用未设置消息。

当图像不存在时如何防止它们加载。我不想使用默认图像

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T01:01:04.663

在它周围加上一个 if 语句。

```
<% if (!string.IsNullOrEmpty(Model.ThumbnailURL)) { %>
<img alt ='thumb1' src='<%= Model.ThumbnailURL %>' height="65" width="90" />
<% } %> 
```

编辑：更改为 WebForms 视图引擎，我假设您使用的是 Raser。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T00:48:06.447

要绕过*NRE*（空引用异常），请使用*[空合并运算符](http://msdn.microsoft.com/en-us/library/ms173224.aspx)* `??`：

```
<img alt ="thumb1"
     src="<%= Model.ThumbnailURL ?? "" %>"
     height="65"
     width="90" /> 
```

# cocoa - 开发过程中 NSUserDefaults 保存在哪里？

> ID：11552436
> 
> 赞同：3
> 
> 时间：2012-07-19T00:41:18.850
> 
> 标签：cocoa, nsuserdefaults

我正在使用 NSUserDefaults 在我的应用程序中保存一些数据。在哪里可以找到在开发过程中存储我的数据的文件？这是一个普通的可可应用程序（所以没有 ios/iphone！）

部署后，它应该在 Library/Preferences/appname.plist 中可用，对吗？但是，当我仍在处理应用程序时，我在哪里可以找到它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T00:55:10.803

“开发”和“部署”没有区别。NSUserDefaults 不知道您是否进行了调试或发布构建。位置应该是`~/Library/Preferences/yourAppIdentifier.plist`无论如何。

如果您发现开发版本和部署版本之间存在差异，请检查`CFBundleIdentifier`应用程序的`Info.plist`.

另外：如果您的应用程序被沙盒化，您的首选项将最终进入沙盒：`~/Library/Containers/yourAppIdentifier/Data/Library/Preferences/yourAppIdentifier.plist`. 该[文档](http://developer.apple.com/library/mac/documentation/Security/Conceptual/AppSandboxDesignGuide/MigratingALegacyApp/MigratingAnAppToASandbox.html#//apple_ref/doc/uid/TP40011183-CH6-SW1)声称，如果需要，系统会在首次启动应用程序的沙盒版本时自动将您的旧首选项文件移动到沙盒中。

# git - git pull 远程分支找不到远程引用

> ID：11552437
> 
> 赞同：104
> 
> 时间：2012-07-19T00:41:29.817
> 
> 标签：git

我不确定为什么这不起作用。当我这样做时`git branch -a`，这就是我所看到的：

![在此处输入图像描述](../Images/f1a260fb4912d643c79a3f303956bebe.png)

我正在尝试从在线 GitHub 存储库上的 DownloadManager 中提取。我努力了

*   git pull，但它抱怨不知道从哪个分支拉
*   git pull origin，不知道哪个分支
*   git pull origin 下载管理器`fatal: Couldn't find remote ref downloadmanager. Unexpected end of commands stream`
*   git pull origin remotes/origin/DownloadManager`'fatal couldn't find remote ref remotes/origin/DownloadManager. Unexpected end of commands stream`

有什么我想念的吗？在 Xcode 中，当我尝试连接到存储库时，什么也没有出现。我过去一直能够推动它。但是在我拉出最近的更改之前，我不能再次推动。

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-07-19T09:56:41.780

***小心 - 你在本地和远程分支之间有大小写混合！***

假设您现在在本地分支*downloadmanager* ( `git checkout downloadmanager`)

您有以下选择：

1.  *每次在拉/推*命令中指定远程分支（区分大小写）：

    `git pull origin DownloadManager`

    或者

    `git pull origin downloadmanager:DownloadManager`

* * *

2.  在下次推送时指定跟踪分支：

    `git push -u origin DownloadManager`

    （*-u*是*--set-upstream*的缩写形式）

    这将自动在配置中保留*downloadmanager:DownloadManager*链接（与下一步相同的结果）。

* * *

3.  在 git config 中设置默认远程跟踪分支：

    `git branch -u downloadmanager origin/DownloadManager`

    （注意，因为*分支*命令的 git 1.8 *-u*是*--set-upstream-to的缩写形式，这与弃用**的 --set-upstream*有点不同）

    或手动编辑配置（我更喜欢这种方式）：

    `git config --local -e`

    -> 这将打开编辑器。在下面添加块（猜测，在“主”块之后）：

    ```
    [branch "downloadmanager"]
            remote = origin
            merge = refs/heads/DownloadManager 
    ```

* * *

在任何这些步骤之后，您都可以轻松使用：

`git pull`

如果您使用 TortoiseGit：右键单击 repo -> TortoiseGit -> 设置 -> Git -> 编辑本地 .git/config

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-05-16T18:12:21.763

发生此错误是因为本地存储库第一次无法识别远程分支。所以你需要先做。可以使用以下命令完成：

```
git remote add origin 'url_of_your_github_project'

git push -u origin master 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-02-24T06:24:44.783

Git 中的分支名称区分大小写。要查看 Git “看到”的分支名称（包括正确的大小写），请使用：

```
git branch -vv 
```

...现在您可以看到要使用的正确分支名称，请执行以下操作：

```
git pull origin BranchName 
```

其中“BranchName”是您的分支的名称。确保正确匹配大小写

因此，在 OP（原始海报）的情况下，命令将是：

```
git pull origin DownloadManager 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2019-02-22T10:40:40.687

如果这些答案都不起作用，我将首先在您的`.git/config`文件中查找对产生问题的分支的引用，然后将其删除。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2018-01-04T06:14:21.020

对我来说，这是因为我试图拉出一个已经从 Github 中删除的分支。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2021-04-21T16:49:51.147

If the remote branch was deleted (or renamed), then you might get such error when trying to fetch that *old-branch*:

```
$ git fetch --prune --all

  Fetching origin
  fatal: couldn't find remote ref refs/heads/old-branch
  error: Could not fetch origin 
```

Check your local git config if it still refers to the *old-branch*:

```
 $ git config --get-all remote.origin.fetch

    +refs/heads/*:refs/remotes/origin/*
    +refs/heads/old-branch:refs/remotes/origin/old-branch
    +refs/heads/master:refs/remotes/origin/master 
```

Removing the old refs entries, can fix the fetch problem:

```
$ git config --unset-all remote.origin.fetch

$ git fetch --prune --all
  Fetching origin
  ...
   * branch            HEAD       -> FETCH_HEAD 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2021-03-18T15:49:45.567

我遇到了同样的问题，因为 GitHub 将默认分支名称从 master 更改为 main 所以 `git pull origin master`对我不起作用。

试试这个
`git pull origin main` 如果问题是由于分支名称冲突引起的，这将拯救你。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-07-19T09:19:44.873

您需要设置本地分支来跟踪远程分支，如果它们具有不同的大小写，它将不会自动执行。

尝试：

```
git branch --set-upstream downloadmanager origin/DownloadManager
git pull 
```

**更新：**

*不再支持“--set-upstream”选项。*

```
git branch --set-upstream-to downloadmanager origin/DownloadManager
git pull 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2021-09-06T10:20:06.387

就我而言，发生此错误是由于 Github 对默认分支从**`master`**to进行的命名更改**`main`**

所以不要使用，

```
git pull origin master 
```

**你可以使用，**

```
git pull origin main 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-07-19T09:16:47.623

这是因为你的远程分支名称是“DownloadManager”，我猜当你签出你的分支时，你给这个分支一个新的名字“downloadmanager”。

但这只是您的本地名称，而不是远程参考名称。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-05-28T12:12:05.123

检查您的仓库中的分支。也许有人删除它。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2022-02-11T09:46:53.613

就我而言，我在本地分支中有一个从服务器中删除的分支

只需将其从本地分支机构中删除，然后 pull 将按预期工作

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-04-27T16:52:20.000

对我来说，它失败了，因为我的远程分支丢失了（它在之前的合并运行中被删除了。）

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-08-12T09:27:28.100

`ABC-100`就我而言，当我这样做时，我在分支上弄错了大写字母`git checkout abc-100`，然后我开始工作。我的解决方案是将代码从`abc-100`into`ABC-100`然后删除`abc-100`。

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2020-04-19T02:51:01.323

重新启动并重新打开 VSCode 的最后一个副本后，我遇到了这个问题。上述修复不起作用，但是当我通过资源管理器关闭并重新打开 VSCode 时，它​​起作用了。以下是我执行的步骤：

```
//received fatal error
git remote remove origin
git init
git remote add origin git@github:<yoursite>/<your project>.git
// still received an err 
//restarted VSCode and folder via IE 
//updated one char and resaved the index.html  
git add .
git commit -m "blah"
git push origin master
```

* * *

## 回答 #16

> 赞同：-2
> 
> 时间：2021-06-29T10:38:03.183

在我自己的情况下，我只是将“master”更改为“main”，并且能够从远程仓库中提取。

# ios - 专注于 TextBox 并使用 iOS 自动为 UIWebView 内的页面显示键盘

> ID：11552443
> 
> 赞同：1
> 
> 时间：2012-07-19T00:42:41.247
> 
> 标签：ios, uiwebview

我有一个非常简单的页面，它使用以下代码在 UIWebView 中加载：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    NSURL *url = [NSURL URLWithString:@"http://www.highoncoding.com/home/test"];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];

    [self.webView loadRequest:request];

} 
```

我正在尝试使用以下代码专注于文本框“txtName”：

```
- (void)webViewDidFinishLoad:(UIWebView *)wv
{
    NSLog(@"webViewDidFinished");

    [wv stringByEvaluatingJavaScriptFromString:@"if(document.getElementById('txtName') != null) { document.getElementById('txtName').focus() }"];
} 
```

虽然它确实找到了 TextBox，但它从不关注 TextBox，键盘也永远不会弹出。

# ruby-on-rails - 在 rails 中删除了一个用户，但会话仍然存在——如何也清除这个？

> ID：11552446
> 
> 赞同：0
> 
> 时间：2012-07-19T00:43:01.843
> 
> 标签：ruby-on-rails, session

我在我的 rails 应用程序中创建了几个测试用户来测试登录。他们通过设置会话自动登录。

一旦我对用户登录感到满意，我就进入 rails 控制台并删除了用户 `User.last.delete`

但是，现在当我尝试加载 localhost:3000 时，我的浏览器仍在寻找我刚刚删除的用户号 14。

```
ActiveRecord::RecordNotFound in StaticPagesController#home

Couldn't find User with id=14

app/controllers/application_controller.rb:7:in `current_user'
app/views/static_pages/home.html.erb:2:in `_app_views_static_pages_home_html_erb___2558135612319095530_70269927858560'

Request

Parameters:

None 
```

即使重新启动服务器并使用 in 完全清除数据库`rake db:reset`也无济于事——这不应该破坏告诉我的应用程序查找 id=14 的任何会话问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T00:46:40.067

清除您的cookie，这就是导致问题的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-18T12:24:05.630

如果清除 cookie 没有帮助，您可以尝试使用负责创建会话的控制器。你应该有方法，它会破坏会话，例如：

```
def destroy
  session[:user_id] = nil
  redirect_to root_path, notice: 'Logged out'
end 
```

添加一些路线，然后只需在浏览器中导航到

```
localhost:3000/logout 
```

# linux - Linux删除一行字符后的空格

> ID：11552448
> 
> 赞同：6
> 
> 时间：2012-07-19T00:43:06.177
> 
> 标签：linux, replace, sed

在 Linux 中，如果我有一个包含以下条目的文件：

> 我的号码是 = 1234；#这是一个随机数

我可以使用 sed 或其他任何东西将 '#' 之后的所有空格替换为 '+'，以便输出如下所示：

> 我的号码是 = 1234；#This+is+a+随机+数字

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T01:12:12.350

你可以在纯shell中做到这一点......

```
$ foo="My Number is = 1234; #This is a random number"
$ echo -n "${foo%%#*}#"; echo "${foo#*#}" | tr ' ' '+'
My Number is = 1234; #This+is+a+random+number
$ 
```

将这些数据捕获到变量中以供进一步使用留给读者作为练习。:-)

请注意，这也可以承受行上的多个 # 字符：

```
$ foo="My Number is = 1234; #This is a # random number"
$ echo -n "${foo%%#*}#"; echo "${foo#*#}" | tr ' ' '+'
My Number is = 1234; #This+is+a+#+random+number
$ 
```

或者，如果您更愿意创建一个变量而不是通过管道`tr`：

```
$ echo -n "${foo%%#*}#"; bar="${foo#*#}"; echo "${bar// /+}"
My Number is = 1234; #This+is+a+#+random+number 
```

最后，如果您不介意带有管道的子外壳，您可以这样做：

```
$ bar=$(echo -n "$foo" | tr '#' '\n' | sed -ne '2,$s/ /+/g;p' | tr '\n' '#')
$ echo "$bar"
My Number is = 1234; #This+is+a+#+random+number
$ 
```

为了好玩，这里有一个简短的`awk`解决方案：

```
$ echo $foo | awk -vRS=# -vORS=# 'NR>1 {gsub(/ /,"+")} 1'
My Number is = 1234; #This+is+a+#+random+number
#$ 
```

注意尾随的 ORS。我不知道是否可以避免使用最终记录分隔符。我想你可以通过将上面的行通过管道来摆脱它`head -1`，假设你只处理一行输入数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T00:48:37.147

一种使用方式`awk`：

```
awk -F# 'OFS=FS { gsub(" ", "+", $2) }1' file.txt 
```

结果：

```
My Number is = 1234; #This+is+a+random+number 
```

**编辑：**

阅读下面的评论后，如果您的文件包含多个`#`，您可以尝试以下操作：

```
awk -F# 'OFS=FS { for (i=2; i <= NF; i++) gsub(" ", "+", $i); print }' file.txt 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-19T06:21:19.633

这可能对您有用（GNU sed）：

```
echo 'My Number is = 1234; #This is a random number' | 
sed 's/#/\n&/;h;s/.*\n//;y/ /+/;H;g;s/\n.*\n//'
My Number is = 1234; #This+is+a+random+number 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-19T00:51:21.340

效率不高，但是：

```
perl -pe '1 while (s/(.*#[^ ]*) /\1+/);' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-19T01:55:02.117

这是另一个`perl`单线：

```
echo 'My Number is = 1234; #This is a random number' \
| perl -F\# -lane 'join "#", @F[1,-1]; s/ /+/g; print $F[1], "#", $_' 
```

*   `-F`指定如何将字符串拆分为`@F`数组。
*   `-an`用以下方式包装标准输入：

```
while (<>) {
  @F = split('#');
  # code from -e goes here
} 
```

# git - Git 1.7.11 Debian 致命：找不到“https”的远程助手

> ID：11552450
> 
> 赞同：5
> 
> 时间：2012-07-19T00:43:43.277
> 
> 标签：git, debian

我正在使用 bitbucket 和 git 来管理项目。我在 Windows 开发环境下没有遇到任何问题，但是我在 debian 挤压中遇到了问题。克隆时不存在问题，仅在推送时存在。我得到的错误是：

致命：找不到“https”的远程助手

我试过用 curl 编译它，尝试安装几个版本的 curl，但没有成功。在这个[问题](https://stackoverflow.com/questions/10928215/git-push-error-fatal-unable-to-find-remote-helper-for-https)中，git 版本是 1.7.1，答案是移到 1.7.7，但是我的 git 版本是 1.7.11

我怎样才能解决这个问题？

**更新：**

我的[config.log](http://pastebin.com/zib5ZfJ2)说 NO_CURL=''

我在 https 中单独使用 curl 没有问题

**更新2：**

我的配置还说 NO_OPENSSL = ''

在 root 上执行 find -name git-remote-* 会显示以下内容：

```
./usr/share/man/man1/git-remote-helpers.1.gz
./usr/local/libexec/git-core/git-remote-fd
./usr/local/libexec/git-core/git-remote-ext
./usr/local/libexec/git-core/git-remote-https
./usr/local/libexec/git-core/git-remote-testgit
./usr/local/libexec/git-core/git-remote-ftps
./usr/local/libexec/git-core/git-remote-ftp
./usr/local/libexec/git-core/git-remote-http
./usr/lib/git-core/git-remote-https
./usr/lib/git-core/git-remote-testgit
./usr/lib/git-core/git-remote-ftps
./usr/lib/git-core/git-remote-ftp
./usr/lib/git-core/git-remote-http
./home/osednaca/git-1.7.11/git-remote-ftps
./home/osednaca/git-1.7.11/git-remote-ext
./home/osednaca/git-1.7.11/git-remote-https
./home/osednaca/git-1.7.11/git-remote-testgit.py
./home/osednaca/git-1.7.11/git-remote-ftp
./home/osednaca/git-1.7.11/git-remote-fd
./home/osednaca/git-1.7.11/Documentation/git-remote-helpers.txt
./home/osednaca/git-1.7.11/Documentation/git-remote-fd.txt
./home/osednaca/git-1.7.11/Documentation/git-remote-testgit.txt
./home/osednaca/git-1.7.11/Documentation/git-remote-ext.txt
./home/osednaca/git-1.7.11/git-remote-testgit
./home/osednaca/git-1.7.11/git-remote-http
./home/osednaca/git-1.7.11/contrib/mw-to-git/git-remote-mediawiki
./home/osednaca/git-1.7.11/contrib/mw-to-git/git-remote-mediawiki.txt 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-05T17:46:09.863

如果你要**strace -f** this 你会看到它实际上是在试图找到那个助手，但是在系统路径中。要更改该根，您可以使用 --exec-path 或 GIT_EXEC_PATH。

例如，假设我从存档中获取了 git-core，并将 dpkg -x 放入 ~/opt，然后我会

```
导出 GIT_EXEC_PATH=/home/ppetraki/opt/usr/lib/git-core

```

在哪里，

```
找到 ~/ -name git-remote-https
/home/ppetraki/opt/usr/lib/git-core/git-remote-https

```

使用它来调试，

```
strace -f $FOO/usr/bin/git clone https://uri > trace.out 2>&1

```

希望这可以帮助。

# c++ - 使用前向引用

> ID：11552453
> 
> 赞同：1
> 
> 时间：2012-07-19T00:43:55.777
> 
> 标签：c++, header-files

我有一个圆形标题问题，与这里已经问过的大多数问题不同。我有两个相互依赖但*不是成员*的类，所以不要遇到编译器无法计算类大小的问题。所以我可以使用前向声明来打破循环。

但是，我不希望客户端必须包含这两个标头才能使用我的类。标头应该是自包含的，因此用户不需要知道这种依赖关系。有没有办法做到这一点？

编辑：棘手的部分是 A 和 B 必须仅定义标题。

在标题 A.hpp

```
#ifndef A_HPP
#define A_HPP

#include "B.hpp"

struct A
{
    B foo() { ... }
};

#endif 
```

在标题 B.hpp

```
#ifndef B_HPP
#define B_HPP

struct A;

struct B
{
    void bar()
    {
        A a = A();
        ...
    }
};

#endif 
```

在 main.cpp

```
#include "B.hpp"
B().bar(); // error: 'a' uses undefined class 'A' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T00:48:35.283

标头 B.hpp

```
#ifndef B_HPP
#define B_HPP

struct A;

struct B
{
   void bar();
};

#endif 
```

源 B.cpp

```
#include "A.hpp"

void B::bar()
{
   A a;
} 
```

**编辑。**因此，如果您想要仅使用标头实现，请使用 AndreyT 解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T01:09:54.097

只需在B.hpp`#include "A.hpp"`的*底部添加一个。*你仍然会有一个循环包含，但现在它不会伤害任何东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-19T00:49:36.287

如果两个头文件都包含要求其他类型完整的代码，那么在一般情况下，它不可能由自包含头文件实现。

在您的具体示例中（这太简单而无法代表），您可以简单地将定义移动`B::bar`到`A.hpp`：

```
inline void B::bar()
{
    A a = A();
    ...
} 
```

但是，当然，`B`定义 in的方法`A.hpp`看起来并不优雅。

如果 的“内联”对`B::bar`您很重要，那么“工业”解决方案将涉及将 的定义`B::bar`放入额外的头文件`B_aux.hpp`中。当您包含标题时，您应该在包含所有“正常”标题之后包含“辅助”标题，即`main.cpp`您将拥有

```
#include "A.hpp"
#include "B.hpp"
#include "C.hpp"
...
#include "B_aux.hpp"
... 
```

但这显然不是一种“自成一体”的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T02:16:17.267

通常循环包含是这两种类型密切相关的标志，这可能意味着它们是一个单独的组件。如果是这种情况，那么只需将两个标头合并为组件的单个标头，首先是类型声明，最后是成员函数定义，此时两种类型都已完全定义。

# wpf - 在 UserControl 中为双向绑定实现自定义 DependencyProperty 的适当方法是什么？

> ID：11552461
> 
> 赞同：2
> 
> 时间：2012-07-19T00:45:20.067
> 
> 标签：wpf, user-controls, dependency-properties

我试图实现一个名为 UserControl`ParityTypeSelect`的包含两个 RadioButton - `Odd`& `Even`，并且 UserControl 将调用一个 DependencyProperty `ParityType`，它将在双向绑定中使用。这个想法很简单 - 如果`Odd`选择`ParityType`应该返回 1，如果`Even`选择`ParityType`应该返回 0。
这是代码 -

XAML（用户控件）：

```
<StackPanel Orientation="Horizontal">
    <RadioButton Name="rdoOdd" Content="Odd" Margin="5" Checked="rdoOdd_CheckedChnaged" Unchecked="rdoOdd_CheckedChnaged" />
    <RadioButton Name="rdoEven" Content="Even" Margin="5"/>
</StackPanel> 
```

代码隐藏（用户控件）：

```
public partial class ParityTypeSelect : UserControl
{
    //Some Code

    static ParityTypeSelect()
    {
        FrameworkPropertyMetadata parityTypeMetaData =
            new FrameworkPropertyMetadata(new PropertyChangedCallback(OnParityTypeChanged),
                                          new CoerceValueCallback(CoerceParityTypeValue));
        ParityTypeProperty = DependencyProperty.Register("ParityType", typeof(int?), typeof(ParityTypeSelect),
                                                         parityTypeMetaData,
                                                         new ValidateValueCallback(ValidateParityTypeValue));
    }

    public static readonly DependencyProperty ParityTypeProperty;
    public int? ParityType
    {
        get { return (int?)GetValue(ParityTypeProperty); }
        set { SetValue(ParityTypeProperty, value); }
    }

    private static void OnParityTypeChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        ParityTypeSelect select = (ParityTypeSelect)d;
        int? newValue = (int?)e.NewValue;

        if (newValue != null && newValue <= 1)
        {
            if (newValue == 1)
                select.rdoOdd.IsChecked = true;
            else
                select.rdoEven.IsChecked = true;
        }
        else
            return;
    }

    private void rdoOdd_CheckedChnaged(object sender, RoutedEventArgs e)
    {
        RadioButton radioButton = (RadioButton)sender;
        if (radioButton.IsChecked != null)
        {
            if (radioButton.IsChecked.Value)
                SetValue(ParityTypeProperty, 1);
            else
                SetValue(ParityTypeProperty, 0);
        }
    }

    //Some more Code
} 
```

XAML（消费者）：

```
<StackPanel>
     <aucl:ParityTypeSelect ParityType="{Binding Path=Format.FisrtBitType, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>                
</StackPanel> 
```

...而且它正在工作。但问题是，这是我第一次实现 DependencyProperty。所以我有点担心我是否做得对。我是否`OnParityTypeChanged`以正确的方式使用该方法？使用`rdoOdd_CheckedChnaged`事件处理程序设置属性值可以吗？有没有更好或更合适的方法来完成整个实现？我一直期待高质量的编码。因此，任何建议，改进建议，来自`WPF`人们的评论将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T01:39:22.073

我试图在评论中写这个，但我会单独回答。我会绑定属性，而不是在后面的代码中进行。您将需要一个转换器，因为 int? 将需要转换为布尔值。为了使转换器尽可能通用，我将使用`EqualityConverter`您可以像这样绑定的转换器：

```
<RadioButton Content="Odd" Margin="5" IsChecked="{Binding ParityTypeSelect,Mode=TwoWay,Converter={StaticResource equalityConverter}, ConverterParameter=1}" /> 
```

转换器的代码在这里：

```
public class EqualityConverter : IValueConverter
{
    public object TrueValue { get; set; }
    public object FalseValue { get; set; }

    public EqualityConverter()
    {
        //default the TrueValue and FalseValue to true and false.
        //this way we can easily use the same converter for simple comparison or as an IIF statement
        TrueValue = true;
        FalseValue = false;
    }
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        if (value == null && parameter == null) return TrueValue;
        if (value == null && parameter != null) return FalseValue;

        //in some cases we might need to compare an enum value to an integer.
        //this will fail unless we specifically convert them
        if (value is int && parameter is Enum)
            parameter = System.Convert.ToInt32(parameter);
        else if (value is Enum && parameter is int)
            value = System.Convert.ToInt32(value);

        return value.Equals(parameter) ? TrueValue : FalseValue;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        if (value == null && TrueValue == null) return true;
        if (value == null && FalseValue == null) return false;
        if (value.Equals(TrueValue)) return true;
        return false;
    }
} 
```

我要说的其他几件事：-与其使用用户控件，不如从 Control 继承（就像标准类一样，没有 xaml）。然后将 xaml 放入名为 Generic.xaml 的文件中。涉及的内容很少，因此您需要搜索详细信息 - 您对 CoerceParityTypeValue 和 ValidateParityTypeValue 进行了不必要的调用，您可以忽略这些。- 定义依赖道具时，只需键入“propdp”（不带引号）并按下选项卡 - 通常控件上的控件以 PART_ 开头，例如 PART_OddButton

编辑：这是一篇似乎显示要点但并不完整的文章： [http ://wpftutorial.net/HowToCreateACustomControl.html](http://wpftutorial.net/HowToCreateACustomControl.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T00:55:27.540

但有一件事可能会更好，那就是不是在更改的事件代码中设置单选按钮的值，而是可以将它们绑定在 xaml 中，例如

```
<RadioButton Name="rdoOdd" Content="Odd" Margin="5" IsChecked="{Binding ParityTypeSelect,Mode=TwoWay,Converter=StaticResource booltoNullIntConverter }" /> 
```

booltoNullIntConverter 是一个转换器，可根据您的要求将 bool 更改为 null int。我希望这将有所帮助。

# objective-c - 用 Cocoa 编写的全功能示例应用程序（Mac 桌面）

> ID：11552465
> 
> 赞同：-6
> 
> 时间：2012-07-19T00:45:44.277
> 
> 标签：objective-c, cocoa

是否有一个功能齐全的可可示例应用程序可以推荐给我看？

我在 developer.apple.com 网站上看到过该示例，但它们通常专注于单一功能。

寻找不那么简单的东西，并且用干净的代码等编写。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T12:34:22.577

那里有很多，但肯定很难找到。这是我能想到的清单。虽然请注意，如果您刚刚开始进行 OS X 开发，这些可能看起来非常压倒性（对不起，我没有足够的声誉来建立这些所有实际链接）。

[QuickSilver](https://github.com/quicksilver/Quicksilver)是一个非常复杂的应用程序启动器，最近又开始积极开发。

[nvALT](https://github.com/ttscoff/nv)是一个与 SimpleNote 同步的笔记应用程序

[QuickCursor](https://github.com/jessegrosjean/quickcursor/)是一个小型菜单栏实用程序，用于在不同的编辑器中打开复制的文本。

[Kod](https://github.com/rsms/kod/)这是一个未完成的程序员文本编辑器。即使只完成了一半（它不再处于积极开发中）它仍然是一个很棒的应用程序。

[Colloquy](http://colloquy.info/project/wiki/Source%20Code)是一个 IRC 应用程序。

[Chuck](https://github.com/msanders/Chuck)是一个非常小的应用程序启动器。

[Adium](http://trac.adium.im/wiki/GettingNewestAdiumSource)（正如 Rob 所提到的）是一个具有大量功能的 IM 应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T00:54:30.417

[http://cocoadev.com/wiki/CocoaOpen](http://cocoadev.com/wiki/CocoaOpen)有一个列表，其中至少 Adium 和 MacHg 看起来不错。

# python - Python 2.7：设置 I/O 编码，“？

> ID：11552467
> 
> 赞同：4
> 
> 时间：2012-07-19T00:46:02.103
> 
> 标签：python, character-encoding

尝试在 Python 2.7 中向文本文件写入一行，并具有以下代码：

```
# -*- coding: utf-8 -*-
...
f = open(os.path.join(os.path.dirname(__file__), 'output.txt'), 'w')
f.write('Smith’s BaseBall Cap') // Note the strangely shaped apostrophe 
```

但是，在 output.txt 中，我得到了`Smith‚Äôs BaseBall Cap`，而不是。不确定如何纠正此编码问题？有这类问题的任何提示吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-19T00:56:32.987

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T00:55:32.377

有几种可能性，但第一个要检查的是输出文件实际上包含您认为的内容。您确定您没有查看编码错误的文件吗？一些编辑器可以选择您正在查看文件的编码。编辑器需要知道文件的编码，如果它将文件解释为 UTF-8 以外的其他编码，它甚至会显示错误的内容尽管文件的内容是正确的。

当我运行您的代码（在 Python 2.6 上）时，我会在文件中得到正确的输出。另一件事要尝试：使用`codecs`模块打开文件以进行 UTF-8 写入：`f = codecs.open("file.txt", "w", "utf-8"). Then declare the string as a unicode string with`u"'Smith's BaseBall Cap'"`。

# javascript - 过滤源数据后的项目工具提示

> ID：11552476
> 
> 赞同：1
> 
> 时间：2012-07-19T00:47:12.040
> 
> 标签：javascript, filtering, d3.js, tooltip

快速熟悉 D3.js。我注意到的一个项目是，如果我有一系列圆圈（即散点图）并且我将工具提示附加到从它们的源数据派生的它们，那么当我过滤数据时更新这些工具提示似乎存在问题和重画圆圈。这是过滤数据时调用的代码的一部分。请注意，过滤器是通过鼠标悬停在不同但相关的图中调用的：

```
circs = itemCircles.selectAll('circle')
    .data(filteredData)
    .attr("cy", function (d) { return scatY(d.sim_fnl_occ); } )
    .attr("cx", function (d) { return scatX(d.sim_curr_occ); } )
    .attr('r', 5)
    ;

circs.enter().append('circle')
    .data(filteredData)
    .attr("cy", function (d) { return scatY(d.sim_fnl_occ); } )
    .attr("cx", function (d) { return scatX(d.sim_curr_occ); } )
    .attr('r', 5)
    ;

circs.append("svg:title")
    .text(function(d) { console.log(d.sim_curr_occ); // looking good!
    return d.sim_curr_occ });// looking bad:( 
```

将新子集数据的正确值写入控制台；但是工具提示本身的数据不正确。实际上，看起来新绘制的圆圈保留了原始工具提示。我应该指出，圆圈是正确绘制的，只有通过 svg:title 的工具提示是不正确的。关于我做错了什么的任何指导？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:22:36.053

将标题附加到`enter()`而不是仅将其附加到`circs`.

```
circs.enter().append('circle')
.data(filteredData)
.attr("cy", function (d) { return scatY(d.sim_fnl_occ); } )
.attr("cx", function (d) { return scatX(d.sim_curr_occ); } )
.attr('r', 5)
.append("svg:title")
.text(function(d) { 
  console.log(d.sim_curr_occ);
  return d.sim_curr_occ })
; 
```

# javascript - jQuery，在切换（）中重置表单值

> ID：11552478
> 
> 赞同：0
> 
> 时间：2012-07-19T00:47:30.533
> 
> 标签：javascript, jquery, toggle

我正在使用 JQuery toggle() 函数来允许用户在表单中动态地向选择框添加新值。

如果用户单击“添加”，则会显示一个带有输入框的 DIV，并且“添加”文本将更改为“删除”。

在用户点击“添加”，然后在新的输入框中输入一些文本，然后点击“删除”的情况下，我想清除输入框。

这里的一切都有效，但我不清楚在用户切换“删除”的情况下如何重置新创建的输入框的表单值

这是我的代码

```
$(".newName").click(function(){
    var frm = $(this).closest("form"); 

    $(".newContainer", frm).toggle(); // toggles the newContainer to show or hide
    $(this).text($(this).text() == 'Add' ? 'Remove' : 'Add'); // changes our text 
    $("#nameList", frm).prop('disabled', $(this).text() != 'Add') // disables the original list if we are adding a new one

});

<div class="names">
    <form id="newForm">
        <select id="nameList"></select>
        <p><a href="#" class="newName">Add</a></p>
        <div class="newContainer">
            <input type="text" id="theNewName" />
        </div>
    </form>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T00:59:01.550

```
$(".newName").click(function(){
    var frm = $(this).closest("form"); 

    $(".newContainer", frm).toggle(); // toggles the newContainer to show or hide
    if($(this).text() == 'Remove'){$("#nameList", frm).val('');}
    $(this).text($(this).text() == 'Add' ? 'Remove' : 'Add'); // changes our text 

    $("#nameList", frm).prop('disabled', $(this).text() != 'Add') // disables the original list if we are adding a new one

}); 
```

如果您担心文本（“添加”/“删除”）被更改 + 一些优化：

```
<a href="#" class="newName add" data-add-text="Add" data-remove-text="Remove">
Add
</a>

$('body').on('click',".newName",function(){
    var frm = $(this).closest("form"); 
    $(".newContainer", frm).toggle();
    $("#nameList", frm).val('').prop('disabled', $(this).hasClass('remove'));
    var newText = $(this).hasClass('remove')?
        $(this).data('addText'):$(this).data('removeText');
    $(this).text(newText).toggleClass('add remove');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T01:00:55.747

```
$(".newName").click(function(){
    var frm = $(this).closest("form");

    $(".newContainer", frm).toggle(); // toggles the newContainer to show or hide
    $(this).text($(this).text() == 'Add' ? 'Remove' : 'Add'); // changes our text
    if($(this).text() == 'Remove' )
    {
    $("#theNewName",frm).val('');
    }
    $("#nameList", frm).prop('disabled', $(this).text() != 'Add') // disables the original list if we are adding a new one

}); 
```

在此处查看演示：http: [//jsfiddle.net/](http://jsfiddle.net/abdYJ/)

# ajax - Why cant I get the result out of the jQuery AJAX

> ID：11552483
> 
> 赞同：0
> 
> 时间：2012-07-19T00:48:05.680
> 
> 标签：ajax, jquery

My function is very simple, and based on what I found [here](https://stackoverflow.com/questions/905298/jquery-storing-ajax-response-into-global-variable). Yet I cant seem to make it work, whats wrong?

```
function ajax(url) {
    var result;
    $.ajax({
        url: url,
        success: function(data) {
            result = data;
            //$('#test').html(data);
            }
        });
    return result;
    } 
```

The function is getting the data, for if I uncomment the commented code and call it, then the data is shown inside the #test element. However, if I write

```
var test = ajax('my-url.php');
$('#test').html(test); 
```

then it doesnt work. My guess is that for some reason, the data in "data" is not being stored in the variable "result". But I cant figure out why, nor how to solve it. Any help is appreciated.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T00:52:51.850

The `result` variable is not being changed until the AJAX call finishes, by which point the `ajax` function has already returned. This is the entire point of callbacks, the ability to schedule a task to be executed when an event is finished.

Javascript (in-browser) is inherently asynchronous.

Alternatively, you can pass in `async: false` to your `$.ajax` call and it will wait until it's finished, but reverting back to your original style makes more sense.

Edit: It looks like what you're doing can be accomplished with [`$.load()`](http://api.jquery.com/load/).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T00:52:48.690

If you modify your `$.ajax` call to not execute asynchronously it will work as you expect:

```
function ajax(url) {
  var result;
  $.ajax({
    async: false,
    url: url,
    success: function(data) {
        result = data;
        //$('#test').html(data);
        }
    });
  return result;
} 
```

The `$.ajax` function returns immediately and does not wait for the AJAX call to return.

# ruby - 检查散列的键是否包含所有键集

> ID：11552490
> 
> 赞同：61
> 
> 时间：2012-07-19T00:48:46.423
> 
> 标签：ruby

我正在寻找更好的方法

```
if hash.key? :a &&
   hash.key? :b &&
   hash.key? :c &&
   hash.key? :d 
```

最好是类似的东西

```
hash.includes_keys? [ :a, :b, :c, :d ] 
```

我想出了

```
hash.keys & [:a, :b, :c, :d] == [:a, :b, :c, :d] 
```

但我不喜欢两次添加数组

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2012-07-19T00:58:16.220

```
%i[a b c d].all? {|s| hash.key? s} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-07-19T01:04:36.080

@Mori 的方式是最好的，但这是另一种方式：

```
([:a, :b, :c, :d] - hash.keys).empty? 
```

或者

```
hash.slice(:a, :b, :c, :d).size == 4 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-07-19T01:16:48.843

只是本着 TIMTOWTDI 的精神，这里有另一种方式。如果你`require 'set'`（在标准库中）那么你可以这样做：

```
Set[:a,:b,:c,:d].subset? hash.keys.to_set 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-07-25T15:24:23.120

您可以通过以下方式获取缺失键的列表：

```
expected_keys = [:a, :b, :c, :d]
missing_keys = expected_keys - hash.keys 
```

如果您只想查看是否缺少任何键：

```
(expected_keys - hash.keys).empty? 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2015-05-07T11:43:51.940

我喜欢这样解决这个问题：

```
subset = [:a, :b, :c, :d]
subset & hash.keys == subset 
```

它快速而清晰。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-07-18T19:29:29.883

这是我的解决方案：

（[也作为答案给出](https://stackoverflow.com/questions/13786550/check-if-two-hashes-have-the-same-set-of-keys/51409600#51409600)）

```
class Hash
    # doesn't check recursively
    def same_keys?(compare)
      return unless compare.class == Hash

      self.size == compare.size && self.keys.all? { |s| compare.key?(s) }
    end
end

a = c = {  a: nil,    b: "whatever1",  c: 1.14,     d: false  }
b     = {  a: "foo",  b: "whatever2",  c: 2.14,   "d": false  }
d     = {  a: "bar",  b: "whatever3",  c: 3.14,               }

puts a.same_keys?(b)                    # => true
puts a.same_keys?(c)                    # => true
puts a.same_keys?(d)                    # => false   
puts a.same_keys?(false).inspect        # => nil
puts a.same_keys?("jack").inspect       # => nil
puts a.same_keys?({}).inspect           # => false 
```

# python - 匹配两个.txt文件并用python导出到excel

> ID：11552491
> 
> 赞同：0
> 
> 时间：2012-07-19T00:48:50.607
> 
> 标签：python, excel, for-loop, iteration, match

我是 python 新手，我试图匹配我从两个 .txt 中提取的数据，如果每个文件的每一行的第一个元素与每个文件的每一行的第一个元素重合，它应该给出一个输出这将把该信息写在excel表上。到目前为止，这就是我所得到的，但我被阻止了，所以我将不胜感激。我只是使用 for 循环进行迭代，所以我不知道该怎么做，以便我可以在两个文件之间进行比较，以及是否有匹配项以在没有 for 循环的情况下编写它

```
import xlwt
c1=-1
c2=0

file1=open('/Users/whatever.txt','r')
file2=open('/Users/whatever2.txt','r')

style0=xlwt.easyxf('font:name Times New Roman,colour black,bold on')
wb=xlwt.Workbook()

ws=wb.add_sheet('x',cell_overwrite_ok=True)

ws2=wb.add_sheet('y',cell_overwrite_ok=True)
row=0
row2=0

for lineA in file1:

    split=lineA.split('\t')
    split.pop(5)
    split.pop(5)
    split.pop(6)
    split.pop(6)
    split.pop(6)
    split.pop(6)
    split.pop(7)
    split.pop(7)
    split.pop(7)
    if '123\n'in split:
        continue
    elif '567\n' in split:
        continue
    elif '8910\n' in split:
        continue
    else:
        ws.write(0,0,euk,style0)
        ws.write(row,0,str(c1),style0)
        ws.write(row,1,split[0],style0)
        ws.write(row,2,split[1],style0)
        ws.write(row,3,split[2],style0)
        ws.write(row,4,split[3],style0)
        ws.write(row,5,split[4],style0)
        ws.write(row,6,split[5],style0)
        ws.write(row,7,split[6],style0)
        ws.write(row,8,split[7],style0)

        row+=1

for lineB in file2:

    split1=lineB.split('\t')
    split1.pop(5)
    split1.pop(5)
    split1.pop(5)
    split1.pop(5)
    split1.pop(5)
    split1.pop(5)
    split1.pop(5)
    split1.pop(-2)
    split1.pop(-2)
    split1.pop(-2)

  if '654\n' in split1:

        ws2.write(0,0,prok,style0)
        ws2.write(row2,0,str(c2),style0)
        ws2.write(row2,1,split1[0],style0)
        ws2.write(row2,2,split1[1],style0)
        ws2.write(row2,3,split1[2],style0)
        ws2.write(row2,4,split1[3],style0)
        ws2.write(row2,5,split1[4],style0)
        ws2.write(row2,6,split1[5],style0)
        ws2.write(row2,7,split1[6],style0)
        #print(split1)
        c2=c2+1
        row2+=1

wb.save('Hello.xls') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T17:45:47.623

我想我遵循您正在尝试做的事情。比较每一行的第一个元素应该不会太难。尝试以下操作：

```
file1=open('/Users/whatever.txt','r')
file2=open('/Users/whatever2.txt','r')

for line in file1.readlines():
    # Split the line by tab spaces
    split_line = line.split('/t')
    # get the first element
    l1 = split_line[0]
    # Split the first line of file2 by tab spaces
    split_line2 = file2.readline().split("/t")
    # Get the first element of the file2 split line
    l2 = split_line2[0]

    # Check if they match
    if l1 == l2:
        # If they match, add it to your file
        # Add your write code here
    # If they don't match, nothing will be written 
```

以下应该做同样的事情，但更简洁：

```
for line in file1.readlines():
    if line.split("/t")[0] == file2.readline().split("/t")[0]:
        # Add your write code here 
```

# c# - 将绑定 datagridview 的更改应用回 SQL Server CE

> ID：11552498
> 
> 赞同：1
> 
> 时间：2012-07-19T00:49:51.820
> 
> 标签：c#, datagridview, sql-server-ce

所以我一直在关注这个 SQL Server CE 的伟大指南： [http ://weblogs.asp.net/scottgu/archive/2011/01/11/vs-2010-sp1-and-sql-ce.aspx](http://weblogs.asp.net/scottgu/archive/2011/01/11/vs-2010-sp1-and-sql-ce.aspx)

对于 WinForms 而不是 ASP.NET。我已经将我绑定`datagridview`到本地数据库源，并且可以很好地查看我的虚拟信息。

问题是当我尝试写回表格或修改现有单元格的内容时。我无法保存更改。如何写回表？喜欢之后我需要一个活动`CellEndEdit`吗？在另一个网站上是否有一些很好的例子可以做到这一点？

表单加载事件只包含这个来加载，`datagridview`所以我不确定它是否真的“绑定”。

```
this.productsTableAdapter.Fill(this.testDBDataSet2.Products); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T20:37:16.517

刚刚处理了一个类似的问题，我学到了一些东西。首先，在验证单元格之前，您对 DataGridView 所做的更改不会提交到数据库。使用数据绑定的 DataGridView，单元格在行级别进行验证，并且在您将焦点从正在编辑的行上移开之前，除非您使用 CellChangeEvent 强制验证行，否则不会提交更改类似于以下内容：

```
 if (e.ColumnIndex > 9 && e.RowIndex >= 0)
    {
        if (dataGridView.Rows[e.RowIndex].Cells[0].Value is DBNull)
        {
            //do nothing
        }
        else
        {
            this.Validate();
        }
    } 
```

如果您尝试让 dataGridView 显示您对底层数据库所做的更改，则需要刷新表适配器，如上所述。但是，如果您在提交更改之前执行填充，您将丢失所做的更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T01:26:53.113

哇，我们在这里： `productsTableAdapter.Update(testDBDataSet2);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T05:09:13.000

这通常发生在您使用开发环境时。当您使用 SQLCE 时，您可能已经在项目中创建了 db 文件。Visual Studio 还将在 bin 文件夹中复制您的数据库。现在，您所做的任何数据库事务都会影响驻留在 bin 文件夹中的本地数据库副本。因此，请尝试使用 SQL Management Studio 或 Visual Studio 附加该 bin 数据库。这将毫无疑问地显示您最近插入的数据。

# sql - 从字符串中提取大小（数字）

> ID：11552502
> 
> 赞同：0
> 
> 时间：2012-07-19T00:50:40.063
> 
> 标签：sql, sql-server, string, tsql, string-parsing

我在表中有列，其值存储为

```
HX CAP SCR GD5 1/2-13 X 3 3/4
HX CAP SCR GD8 1/2-13 X 4 1/4 
HX CAP SCR Grade 5 1/2-13 X 5 1/2
HX CAP SCR Grade 8 1/2-13 X 6 1/2 
```

现在，我需要将这些值存储到另一个表中，例如

```
CATEGORY               SIZE
HX CAP SCR GD5         1/2-13 X 3 3/4
HX CAP SCR GD8         1/2-13 X 4 1/4
HX CAP SCR Grade 5     1/2-13 X 5 1/2
HX CAP SCR Grade 8     1/2-13 X 6 1/2 
```

我需要将类别与大小值分开。

```
This is what I have so far, but it is not working the GD5 and GR8 are part of the category column.

SELECT  CustDesc
        ,'??????' as Category
        ,SUBSTRING(CustDesc,PatIndex('%[0-9.-]%', CustDesc),8000) as Size   
FROM [##CustParts] 
```

上述查询的结果

```
CustDesc                    Category    Size
HX CAP SCR GD5 1/2-13 X 3   ??????          5 1/2-13 X 3 
```

请让我知道执行此操作的查询是什么......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T01:24:35.813

你需要制定一个看似合理的规则。例如，看起来大小在“X”之前的第一个空格之后开始。我们可以使用 SQL Server 中的（原始）字符串函数来实现这一点：

```
select ltrim(rtrim(left(val, pos1 - spacebefore))) as product,
     substring(val, pos1 - spacebefore + 1, 1000) as size
from (select t.*, charindex(' ', reverse(left(val, pos1-1))) as spacebefore
      from (select t.*,
                   charindex(' X ', val) as pos1
            from (select 'abce 15/3 x 2' as val) t
           ) t
     ) t 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T01:19:27.243

根据您的示例，它看起来数字 1 是您解析每个元组中的值的参考。研究 tsql 的 SQL CHARINDEX 命令 - 查找字符串中文本的位置

是否有更多值需要解析？请提供要解析的更好的横截面数据。- 谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T04:41:10.637

嗨，如果您的字符串始终包含字符“1/2”，那么这将完美无缺。

```
CREATE TABLE #tbl(col1 varchar(200))

INSERT INTO #tbl 
VALUES('HX CAP SCR GD5 1/2-13 X 3 3/4'),
('HX CAP SCR GD8 1/2-13 X 4 1/4'),
('HX CAP SCR Grade 5 1/2-13 X 5 1/2'),
('HX CAP SCR Grade 8 1/2-13 X 6 1/2')

select Left(col1,CHARINDEX('1/2',col1,1)-1),RIGHT(col1,len(col1)-(CHARINDEX('1/2',col1,1)-1)) from #tbl 
```

# scala - Play 2.0 是否禁用了 1.x 中提供的包罗万象的路由使用

> ID：11552506
> 
> 赞同：2
> 
> 时间：2012-07-19T00:51:27.647
> 
> 标签：scala, playframework, playframework-2.0

Play 1.x 提供了一条包罗万象的路线`conf/route`：

```
# Catch all
*       /{controller}/{action}                  {controller}.{action} 
```

但似乎 Play 2.x 删除了这个功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T08:23:58.490

总的来说，这种变化是`type-safe`朝着整个 2.0 理念的方向迈出的一步，我不认为这是错误的。

在带有路由的框架中`type-safe`——比如在 Play 2 中，链接是逻辑的重要组成部分，因此使用“未知”目的地会增加错误的可能性并同时降低安全性，这不是一件好事。与 1.2 不同的是，新的`router`验证参数类型还提高了应用程序的质量，尽管需要为每个`action`.

最后，总是有可能在您的类中添加自定义“调度程序”方法并“捕获”多段路径`asterisk rule`（单个参数用冒号标识）：

```
GET   /multi/*path    controllers.Application.mySubRouter(path) 
```

这将在之后传递链接的整个部分`http://domain.tld/multi/`并将其作为 a 发送到调度程序操作，`String`因此您可以使用它通过斜杠分割段，并使用两个第一个元素作为您想要重定向到的控制器和操作名称。

```
http://domain.tld/multi/MyController/myAction/p1/p2 
```

但是在这种情况下，我肯定会**建议**在您的调度程序中对允许的组合进行一些额外的验证（可能通过自定义数据库规则集或一些正则表达式或其他方式），否则您将回到我论证的切入点：`error prone`+`low security`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-25T15:17:54.460

您可能会在 GlobalSettings 上找到 onRouteRequest 方法，该方法允许您拦截路由请求。文档在[这里](http://www.playframework.com/documentation/2.0/ScalaInterceptors)

# c# - 映射：将 lan 和 lon 转换为 XY

> ID：11552511
> 
> 赞同：0
> 
> 时间：2012-07-19T00:52:29.023
> 
> 标签：c#, html, json, esri

```
for(var i = 0; i < jsonIncident.length; i++)
{
    var x = jsonIncident[i].Latitude        
    var y = jsonIncident[i].Longitude 

    //I can only retreive lat and lon for the image position
    //However to add an image i need it to be in x and y format.

    var type = jsonIncident[i].IncidentType
    var time = jsonIncident[i].MyDate
    var loc = jsonIncident[i].MyDate
    var desc = jsonIncident[i].Description
    var image

    //This where you add the image

    var incident = new esri.Graphic({ "geometry": { "x": x, "y": y,
        "spatialReference": { "wkid": 3414 }
        }, "attributes": { "Title": type,
        "Time": time, "Location": loc, "Description": desc, } });

        incident.setSymbol(image);
        incident.setInfoTemplate(infoTemplate);
        map.graphics.add(incident);

}

map.infoWindow.resize(320, 130); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T01:25:25.617

我相信您可以使用投影或地理坐标系创建图形。请参阅[http://resources.esri.com/help/9.3/arcgisserver/apis/javascript/arcgis/help/jshelp_start.htm#jshelp/inside_graphics.htm](http://resources.esri.com/help/9.3/arcgisserver/apis/javascript/arcgis/help/jshelp_start.htm#jshelp/inside_graphics.htm)

# iframe - 嵌入在需要重定向到其他页面的详细信息页面中的 Visualforce 页面

> ID：11552514
> 
> 赞同：14
> 
> 时间：2012-07-19T00:53:05.507
> 
> 标签：iframe, salesforce

我有一个嵌入在机会的详细信息页面上的 Visualforce 页面。

页面中有一个命令按钮，它调用支持控制器扩展中的方法。

**支持方法完成后，如何将用户重定向到另一个页面？**

我可以从该方法返回一个 PageReference，但它只会重定向显示嵌入式 Visualforce 页面的 iframe。

理想情况下，我想刷新顶级窗口，但我担心如果嵌入的 visualforce 页面与父窗口不在同一个域中，可能会出现跨域问题。

* * *

作为一个基本测试，我尝试将以下内容添加到嵌入式 Visualforce 页面：

```
<script>
    window.setTimeout(testRedirect,2000);
    function testRedirect() {
        top.location.reload();
    }
</script> 
```

这导致 Chrome 记录错误：

> 不安全的 JavaScript 尝试从 URL https://ab2.na2.visual.force.com/servlet/servlet.Integration?lid=066400000000000&ic=1 的框架访问具有 URL [https://na2.salesforce.com/006400000000000](https://ab2.na2.visual.force.com/servlet/servlet.Integration?lid=066400000000000&ic=1)[的](https://na2.salesforce.com/006400000000000)框架 。域、协议和端口必须匹配。

因此，Visualforce 页面的域不同。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-19T12:41:01.847

这是更多的代码，但这在所有浏览器中都适用于我，而且我没有收到任何类型的跨域错误。

控制器扩展：

```
public class Opp_Ext {
    private ApexPages.StandardController stdController;
    public String redirectUrl {public get; private set;}
    public Boolean shouldRedirect {public get; private set;}

    public Opp_Ext(ApexPages.StandardController stdController) {
        this.stdController = stdController;
        shouldRedirect = false;
    }

    public PageReference doStuffAndRedirect() {
        shouldRedirect = true;
        redirectUrl = stdController.view().getUrl();
        return null;
    }
} 
```

VF 页面：

```
<apex:page standardController="Opportunity" extensions="Opp_Ext" >
    <apex:form >
        <apex:commandButton value="Do Stuff" action="{!doStuffAndRedirect}" rerender="redirectPanel" />
        <apex:outputPanel id="redirectPanel" >
            <apex:outputText rendered="{!shouldRedirect}">
                <script type="text/javascript">
                    window.top.location.href = '{!redirectUrl}';
                </script>
            </apex:outputText>
        </apex:outputPanel>
    </apex:form>
</apex:page> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T12:31:32.670

尝试使用[**PageReference**](http://www.salesforce.com/us/developer/docs/pages/Content/apex_pages_pagereference.htm)类

此外 setRedirect 将很有用

样本：

```
public class mySecondController {
Account account;

public Account getAccount() {
    if(account == null) account = new Account();
    return account;
}

public PageReference save() {
    // Add the account to the database.  

    insert account;
    // Send the user to the detail page for the new account. 

    PageReference acctPage = new ApexPages.StandardController(account).view();
    acctPage.setRedirect(true);
    return acctPage;
} 
```

}

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-01-04T19:43:14.807

你需要使用`oncomplete = "window.top.location.href = '{!'/'+obj.id}';"`

# jenkins - 如何使用 Jenkins 警告插件？

> ID：11552515
> 
> 赞同：1
> 
> 时间：2012-07-19T00:53:19.317
> 
> 标签：jenkins, warnings, jenkins-plugins

我想为我的 Jenkins 项目生成编译器警告报告，这是我到目前为止所做的： -安装了警告插件 -安装了静态分析收集器插件

现在，当我构建我的项目时，我在控制台上看到编译器警告，但没有看到警告插件所承诺的任何类型的报告。

是否需要任何额外的配置？我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T22:21:53.757

我真的觉得自己很傻！我的构建失败了，因此它没有发布任何报告。

# git - 使用 Go 包的修改分支而不是已安装的包

> ID：11552516
> 
> 赞同：2
> 
> 时间：2012-07-19T00:53:21.047
> 
> 标签：git, package, go

我做了一个“go get”来安装 github.com/chsc/gogl。显然这似乎把东西放在了 C:\Go\src\pkg\github.com\chsc\gogl 中。当我导入“github.com/chsc/gogl”时，我可以很好地使用这个包。

但是假设我想对包进行一些编辑。如何管理和组织我的项目和代码？我应该把我的 gogl 副本放在哪里，如何让我的所有项目使用我的 gogl 副本，而不是安装在 C:\Go\src\pkg\github.com\chsc\gogl 下的那个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T03:36:00.047

1.  创建你的 github 帐户
2.  fork 你自己的 gogl 版本
3.  go get github.com/user782220/gogl （假设 user782220 是你的 github 帐户）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T02:13:04.403

您可以修改 C:\Go\src\pkg\github.com\chsc\gogl 中的代码，然后运行“go install github.com/chsc/gogl”。

或者，如果您打算长期进行更改，最好的办法是在 github 上分叉该项目，然后使用您的分叉 (github.com/yourname/gogl)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T03:21:00.047

您可以在项目文件夹中拥有一份来自 github.com 的 gogl 副本：

1.  制作 C:/my_go_project/local_github.com/chsc/gogl 文件夹

2.  将所有内容复制`C:\Go\src\pkg\github.com\chsc\gogl` 到`C:\my_go_project\local_github.com\chsc\gogl`

3.  将您的库包含在您的 .go 文件中，例如

> 导入“local_github.com/chsc/gogl”

现在您可以根据需要编辑本地副本。

# mobile - 将移动网站同步到主网站

> ID：11552518
> 
> 赞同：1
> 
> 时间：2012-07-19T00:53:39.900
> 
> 标签：mobile, sync, html-content-extraction

我正在为我的客户建立移动网站。一家大公司提供移动站点和主站点之间的自动同步，以便在主站点上更新图像或文本时，移动站点会自动更新。我想提供相同的功能。我将无法访问主站点代码，但我可以将移动站点构建为动态站点。如何从主站点提取/抓取图像和文本并为其分配名称/值（？），以便我的动态移动站点连接到主站点。

如果我认为这一切都错了，请指出正确的方向。

先感谢您！芯片

# objective-c - 将块包装在相同类型的块中

> ID：11552519
> 
> 赞同：3
> 
> 时间：2012-07-19T00:53:47.803
> 
> 标签：objective-c, objective-c-blocks

我有一个对象链。存在链上的对象以很好地划分功能。完成块向上传递，我想如果另一个对象想向完成块添加东西，我可以将完成块包装在相同类型的块中，调用第一个块，一切都会是 ace。我得到 EXC_BAD_ACCESS。我的语法是错误的还是我完全以错误的方式处理这个问题？

```
-(void)archiveChatWithDictionary:(NSDictionary*)dictionary andCompletionBlock:(ServerConnectionCompletionBlock)completionBlock
{
    ServerConnectionCompletionBlock localCompletionBlock = ^(ServerConnection *connection, NSError *error) {

        // Do some stuff
        // ...

        //  This line produces EXC_BAD_ACCESS
        completionBlock(connection, error);
    };    

    [self.chatEndpointInterface archiveChatWithDictionary: dictionary andCompletionBlock: localCompletionBlock];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T00:58:39.250

最后，completionBlock 是否被复制（或内联在被复制的块中）？

默认情况下，块存储在堆栈中。如果你想保留一个块（通常是完成块），你必须复制它（所以它移动到堆中）。

好消息是，如果你复制一个块，所有嵌套的块也将被复制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:43:20.693

我正在做完全相同的事情，并且运行良好。

不过，我确实遇到了崩溃，结果发现**被包裹的块​​是 nil**。也许你可以检查一下。

我建议断言该块不是 nil 或在块调用之前放置一个 if 语句，具体取决于您的具体情况。

# c# - 循环数组时间 C# Winforms

> ID：11552520
> 
> 赞同：0
> 
> 时间：2012-07-19T00:53:53.483
> 
> 标签：c#, arrays, winforms, loops, time

假设我有一个密码数组......

> ```
>  var pass = new int[5];
>         pass[0] = 111111;
>         pass[1] = 222222;
>         pass[2] = 333333;
>         pass[3] = 444444;
>         pass[4] = 555555; 
> ```

并验证当前时间。例如，您有一个从上午 7:30:00 到上午 11:30:00 的时间表，如果还没有到 7:30，并且已经过了 11:30，您将无法获取密码。但是在那个时间范围内，没关系，你可以得到你的密码。单击 Button1 后（w/c 表示您已获得授权 - 时间正确），将出现一个消息框，显示如下内容，

> 您的密码是 111111。

以此类推，直到所有密码用完，然后又回到密码111111、222222、333333等……我该怎么办？比如什么时间格式？我很难进行时间比较。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T04:16:45.997

函数**isValidTime**仅在一天中的几个小时检查时间。

您可以使用模运算来包装您的密码，如下所示。

以下对我有用：

```
 private int currentPassword = -1;
    private int[] passwords = new int[]{111111,222222,333333,444444,555555};

    private DateTime startTime = new DateTime(2012, 7, 18, 22, 0, 0);
    private DateTime endTime = new DateTime(2012, 7, 18, 22, 15, 0);

    private void button1_Click(object sender, EventArgs e)
    {
        if (isValidTime(DateTime.Now))
        {
            currentPassword++;
            currentPassword = currentPassword % passwords.Length;

            MessageBox.Show(passwords[currentPassword].ToString());
        }
        else
        {
            MessageBox.Show( "Try again at a different time" );
        }
    }

    private bool isValidTime( DateTime now )
    {
        if ( startTime.TimeOfDay.CompareTo(now.TimeOfDay) <= 0)
        {
            if ( now.TimeOfDay.CompareTo(endTime.TimeOfDay) <= 0)
            {
                return true;
            }
        }
        return false;
    } 
```

只需启动一个新的 windows 窗体，添加一个 button1，这段代码就可以工作了。

# php - 计算字段值在表中的出现次数

> ID：11552522
> 
> 赞同：0
> 
> 时间：2012-07-19T00:53:58.307
> 
> 标签：php, mysql, publish, field

我有一个值为 1 或 0 的已发布字段。我希望能够提醒用户有多少记录需要发布或未发布。我想计算表推荐中`published`等于的记录数`0`并将该值输出为

`Awaiting to be published:#with published=0`

我有这个，我意识到这是错误的：

```
$sql = mysql_query("SELECT * FROM testimonials WHERE published='0'");
$result=mysql_num_rows($sql);
echo $result; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T00:58:24.140

```
$sql = mysql_query("SELECT SUM(published=0) AS nb_unpublished,
                           SUM(published=1) AS nb_published FROM testimonials");
$result = mysql_fetch_assoc($sql);
echo "Records awaiting to be published:" . $result['nb_unpublished'] . '<br>';
echo "Records already published:" . $result['nb_published'] . '<br>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T01:01:02.330

这是正确的。您还可以找到这样的记录计数：

```
$sql = mysql_query("SELECT COUNT(*) AS `rows` FROM `testimonials` WHERE `published`='0'");
$result=mysql_fecth_array($sql);
echo "Awaiting to be published:".$result['rows']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T00:59:06.323

你可以使用这个：

```
SELECT SUM(IF(published='0',1,0)) AS 'count_awaiting',
  SUM(IF(published='1',1,0)) AS 'count_publish' 
FROM testimonials

#count_awaiting is number of records with published=0 
#count_publish is number of records with published=1 
```

# java - 从 JOptionPane 将字符串添加到面板

> ID：11552523
> 
> 赞同：1
> 
> 时间：2012-07-19T00:54:03.377
> 
> 标签：java, swing, jframe, joptionpane

我正在开发一个允许用户输入消息的程序。当用户按下位于我的框架中的“消息”菜单项时，`JOptionPane`会弹出一个输入对话框，提示他们输入一个字符串。问题是我现在必须获取该字符串并将其粘贴到我的面板类中。此外，当用户按下同样位于我的框架中的另一个菜单项时，我还允许用户从不同的对话框中选择形状和颜色。字符串必须在我绘制的形状的顶部。我试过绘制字符串，但它不能正常工作。这是我的代码不起作用。当我在`JOptionPane`. 我该怎么做？

在我的框架里

```
private void messageItemActionPerformed(java.awt.event.ActionEvent evt) {
    // TODO add your handling code here:

    String message = JOptionPane.showInputDialog("Enter your string");

    // my panel
    drawP.setMessage(message);

} 
```

在我的面板中

```
public void setMessage(String s) {
    message = s;
}

@Override
public void paintComponent(Graphics g) {
    super.paintComponent(g);

    // the user can select two different shapes this is
    // a boolean
    if (shape == true) {
        g.setColor(shapeColor);
        g.fillRect(x, y, 40, 40);
        g.drawString(message, x, y);

    } else {
        g.setColor(shapeColor);
        g.fillOval(x, y, 40, 40);
        g.drawString(message, x, y);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T01:37:12.993

Have you call [repaint()](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html#repaint%28%29) after you set the message? I tried before, repaint JFrame doesn't seems to works, but repaint JPanel works.

# ruby - Ruby 无法加载此类文件 --ftools（加载错误）

> ID：11552524
> 
> 赞同：7
> 
> 时间：2012-07-19T00:54:05.087
> 
> 标签：ruby

我是一个完整的 Ruby 新手，我想做的只是运行一个遗留的 ruby​​ 脚本（这也是 Erik Veenstra 的开源脚本）。我有一个 Windows 批处理脚本，它基本上运行它，我正在尝试执行。我在我的计算机上安装了 Ruby，允许它设置路径，然后我尝试运行它，这是我得到的错误：

```
I:/2011/devl/3rdparty/ruby/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- ftools (LoadError)
        from I:/2011/devl/3rdparty/ruby/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from C:/Users/<blah>/AppData/Local/Temp/tar2rubyscript.d.6692.1/rubyscript2exe/ev/ftools.rb:1:in `<top (required)>'
        from I:/2011/devl/3rdparty/ruby/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from I:/2011/devl/3rdparty/ruby/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from C:/Users/<blah>/AppData/Local/Temp/tar2rubyscript.d.6692.1/rubyscript2exe/init.rb:15:in `<top (required)>'
        from I:/2011/devl/path/to/<myrbsrc>/trunk/bin/../src/rubyscript2exe.rb:627:in `load'
        from I:/2011/devl/path/to/<myrbsrc>/trunk/bin/../src/rubyscript2exe.rb:627:in `block in <main>'
        from I:/2011/devl/path/to/<myrbsrc>/trunk/bin/../src/rubyscript2exe.rb:577:in `block in newlocation'
        from I:/2011/devl/path/to/<myrbsrc>/trunk/bin/../src/rubyscript2exe.rb:505:in `block in newlocation'
        from I:/2011/devl/path/to/<myrbsrc>/trunk/bin/../src/rubyscript2exe.rb:472:in `newlocation'
        from I:/2011/devl/path/to/<myrbsrc>/trunk/bin/../src/rubyscript2exe.rb:505:in `newlocation'
        from I:/2011/path/to/<myrbsrc>/trunk/bin/../src/rubyscript2exe.rb:577:in `newlocation'
        from I:/2011/devl/path/to/<myrbsrc>/trunk/bin/../src/rubyscript2exe.rb:619:in `<main>' 
```

感谢有关如何解决此问题的任何想法！如果有帮助，我可以发布源 Ruby 代码。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-01T06:44:35.543

利用

> 需要“fileutils”

而是因为 ruby​​-1.9.x 不支持 ftools

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T22:10:09.213

显然，我拥有的源代码要旧得多，即使在获得最新版本后，它也有问题。但是知道它在某个时候可以工作，我继续在 Windows 上安装旧版本的 Ruby（1.8.7-p358），然后一切正常，我能够构建并获取我的可执行文件。无论如何，这不是最优雅的解决方案。但如果有人知道 ruby​​script2exe 的最新 Windows 版本 Ruby 的修复，请回复。谢谢。

# node.js - Node.js REST 服务 - express + 主干

> ID：11552527
> 
> 赞同：0
> 
> 时间：2012-07-19T00:54:17.637
> 
> 标签：node.js, rest, backbone.js, express

我正在寻找使用骨干网和快递建立一个网站。我是新手，所以我想知道在同一台服务器上同时拥有快速 API 和主干客户端代码与在不同服务器上部署 API 和客户端代码之间是否有任何区别？如果我将两者放在同一台服务器上，我如何构建应用程序以同时使用 express 和骨干网？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T01:07:36.147

好吧，您仍然必须有某种方式来“提供”主干文件，因此将其保存在同一台服务器上可能更方便。这是我过去使用的

```
node_app
|-- apps
|    |-- authentication
|    |    |    |-- routes.coffee 
|-- bin
|-- public
|    |-- scripts
|    |    |-- models
|    |    |    |-- backbone_model_here.coffee
|    |    |-- views
|    |    |    |-- backbone_view_here.coffee
|    |    |-- collections
|    |    |    |-- backbone_collection_here.coffee
|    |    backbone_app.coffee

|    |-- stylesheets
|-- specs
|-- views
|    |-- authentication
|    |    |-- login.jade
server.js 
```

另外，这有点固执己见，但是我喜欢将不同的节点逻辑分成单独的“应用程序”，例如身份验证应用程序或图像应用程序

# php - 集成 PHP + Javascript

> ID：11552528
> 
> 赞同：0
> 
> 时间：2012-07-19T00:54:27.990
> 
> 标签：php, javascript, quotes, double-quotes, quote

我在单引号内的 javascript 中的 php 代码中集成有问题

我需要放置`$video`将获取 YT 视频 id 的变量，而不是视频的 id `**VARIABLEVIDEOHER**E`，但我尝试了所有放置单引号和双引号的方法来整合更多，有人可以给我一个亮点

```
<?php $video = 'BYN-DEM7Mzw';
$desc = '<script type="text/javascript">
function youtubeFeedCallback( data ){
document.writeln( data.entry[ "media$group" ][ "media$description" ].$t.replace( /\n/g, "<br/>" ) + "<br/>" ); }
</script>
<script type="text/javascript" src="http://gdata.youtube.com/feeds/api/videos/VARIAVELVIDEOAQUI?v=2&amp;alt=json-in-script&amp;callback=youtubeFeedCallback"></script>';
echo $desc; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T00:56:47.693

用于`json_encode()`将字符串转换为 JavaScript 文字，然后将其添加到字符串的其余部分。

```
var foo = "bar" + <?php echo json_encode('quux'); ?>; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T01:10:38.373

你是这个意思吗？

```
<?php $video = 'BYN-DEM7Mzw';
$desc = '<script type="text/javascript">
function youtubeFeedCallback( data ){
document.writeln( data.entry[ "media$group" ][ "media$description" ].$t.replace( /\n/g, "<br/>" ) + "<br/>" ); }
</script>
<script type="text/javascript" src="http://gdata.youtube.com/feeds/api/videos/'.$video.'?v=2&amp;alt=json-in-script&amp;callback=youtubeFeedCallback"></script>';
echo $desc; ?> 
```

看来您只是想在字符串中插入变量，而不是真正的 javascript 问题。作为旁注，从互联网上复制代码而不真正了解它的作用是非常*糟糕的*，并且通常会导致难以维护的意大利面条代码很容易损坏，但这是一个不同的问题。

# javascript - Javascript错误的警报顺序

> ID：11552530
> 
> 赞同：1
> 
> 时间：2012-07-19T00:54:36.070
> 
> 标签：javascript, jquery

我有一个这样的javascript调用：

```
usernameTest('queijo');
alert('a'); 
```

该函数`usernameTest()`正在工作，并且为了调试，它会警告字符串“t”或“f”。

为什么，当我加载此页面时，显示的第一个警报是“a”并且仅在“t”或“f”之后？（顺便说一句，jQuery 也被加载到页面中。）

[编辑]

源代码：

```
function usernameTest(username) {
    var unReg = /^[0-9a-zA-Z_]{1,20}$/;
    if(!unReg.test(username))
        return false;
    $.ajax({
        type : 'POST',
        url : 'checkuser.php',
        data : 'username=' + username,
        cache : false,
        success : function(response) {
            if(response == 1) {
                alert('f');
                return false;
            } else {
                alert('t');
                return true;
            }
        }
    });
} 
```

[编辑2]

我已经知道问题在于调用 AJAX。新的主要问题现在是另一个问题。我这样称呼它（在适当的地方，而不是用于调试的代码）；

```
if(!usernameTest(argument))
    //do something 
```

我怎么能做这样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T01:03:34.830

@Bergi 所说的或者`usernameTest()`是 AJAX 函数——这意味着它是异步的。考虑`usernameTest()`在问题中包含函数的来源——这样会更容易回答。

更新：我看到它是一个 AJAX 函数。您需要将代码放入回调中：

```
success : function(response) {
            if(response == 1) {
               //do stuff here - you can't return from here as this is asynchronous - i.e. happening independently (not at the same time) of the rest of the code
            } else {
                //do stuff here - you can't return from here as this is asynchronous - i.e. happening independently (not at the same time) of the rest of the code
            }
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T01:17:25.723

`usernameTest`发出ajax请求。ajax 中的第一个 A 代表异步：发出请求，然后代码立即继续执行，包括`alert('a')`调用。只有当响应从服务器返回时才会执行成功回调，包括`alert('t')`.

这种异步执行风格是 Javascript 开发的核​​心。你必须接受它并用它来解决你的问题。与之抗争只会带来悲伤。

请注意，您拥有的 return 语句不会从`usernameTest`. 他们从成功回调中返回。您的`usernameTest`函数不返回任何内容。没有办法将这样的异步请求转换为同步函数返回。

您需要找到一种方法来异步使用来自服务器的答案。例如，无论您要在`if`调用的子句中放入什么，而是将该代码放入成功回调本身。然后它将有权访问 true 或 false 值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T01:41:26.630

如果要使用的代码可能会根据系统状态发生变化，您可以将该函数作为参数传递给 usernameTest 以执行您想要的操作。否则，您可以直接在 if 语句中编写代码。

```
function usernameTest(username, onFailure) {
    // code here...

    $.ajax({
        // ajax setup here...
        success : function(response) {
            if(response == 1) {
                //...
            } else if (typeof(onFailure) === 'function' ) {
                onFailure();
            }
        }
    });
}

var name = 'Bob';
var onFailure = function() {
    // do something
};

usernameTest(name, onFailure); 
```

另外，当你提出问题时，请尽量具体，除非不清楚或需要详细说明，否则不要更改问题。如果有人回答了最初的问题，他/她应该得到认可，其他问题应该单独提出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T01:40:39.423

永远不要使用警报。使用 () { console.log() } 或 () { console && console.log() }。

通过使用警报，您只会看到一条消息。你从来不想拥有的味精。

使用 console.log 您可以在实例中看到函数的消息，而不是破坏网络：

什么？[好的]

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T00:59:03.367

您的`usernameTest`函数不会*发出*任何警报，否则会出现在警报“a”之前。

我确定它为某些东西安装了一个事件侦听器（可能是文档就绪？-如果您给我代码，我可以告诉您更多信息），其中“用户”被警告。事件侦听器函数不会立即执行，而是在将来的某个时间执行。

# android - 如何将模拟器中的数据列表视图存储到 sqlite 数据库中？

> ID：11552531
> 
> 赞同：1
> 
> 时间：2012-07-19T00:54:37.547
> 
> 标签：android, sqlite, android-listview

我需要将数据的 ListView 存储到 SQLite 数据库中。当我单击列表中的名称时，它应该存储到数据库中。我怎么做？我需要创建 DBAdapter 类吗？请帮忙。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-19T01:09:02.543

下面是 DBAdapter，它包含了 insert 和其他有用的方法。我给你数据库结构。您可以在列表中添加一个监听器。尝试使用谷歌搜索 listview onClick 侦听器。

```
import java.util.ArrayList;

import com.Test7.Tasks;

import android.R.integer;
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;

public class DBAdapter {

private Context context;
private SQLiteDatabase notesdb;
private DBHelper helper;

public DBAdapter(Context context)
{
    this.context = context;
    helper = new DBHelper(context);
}

public void open()
{
    notesdb = helper.getWritableDatabase();
}

public void close()
{
    notesdb.close();
}

public long insertTasks(Tasks tasks)
{
    ContentValues values = new ContentValues();
    values.put(DBHelper.TASKS_TITLE, tasks.getTasksTitleString());
    return notesdb.insert(DBHelper.TABLE_NAME, null, values);
}

public long updateTask(Tasks tasks, int id)
{
    ContentValues values = new ContentValues();
    values.put(DBHelper.TASKS_TITLE, tasks.getTasksTitleString());
    return notesdb.update(DBHelper.TABLE_NAME, values, DBHelper.TASKS_ID + "= ? ", 
            new String[] { String.valueOf(id) });
}

public ArrayList<Tasks> getAllTasks()
{
    ArrayList<Tasks> tasks = new ArrayList<Tasks>();
    String[] columns = {DBHelper.TASKS_ID, DBHelper.TASKS_TITLE};
    Cursor cursor = notesdb.query(DBHelper.TABLE_NAME, columns, null, null, null, null, null);
    String tasksTitleString = "";
    int count = cursor.getCount();
    int id = 0;
    if(cursor != null && count > 0)
    {
        cursor.moveToFirst();
        for (int i = 0; i < count; i++) {
            id = cursor.getInt(cursor.getColumnIndex(DBHelper.TASKS_ID));
            tasksTitleString = cursor.getString(cursor.getColumnIndex(DBHelper.TASKS_TITLE));
            cursor.moveToNext();
        }
    }
    return tasks;
}

public int getID(Tasks tasks)
{
    String[] columns = {DBHelper.TASKS_ID, DBHelper.TASKS_TITLE};
    Cursor cursor = notesdb.query(DBHelper.TABLE_NAME, columns, null, null, null, null, null);
    String tasksTitleString = "";
    int count = cursor.getCount();
    int id = 0;
    if(cursor != null && count > 0)
    {
        cursor.moveToFirst();
        for (int i = 0; i < count; i++) {
            id = cursor.getInt(cursor.getColumnIndex(DBHelper.TASKS_ID));
            tasksTitleString = cursor.getString(cursor.getColumnIndex(DBHelper.TASKS_TITLE));
            if(tasksTitleString.equals(tasks.getTasksTitleString()))
            {
                return id;
            }
            cursor.moveToNext();
        }
    }
    return id;
}
    } 
```

使用以下类来构建您的数据库。尝试为您的数据库创建 POJO。我的跟随。

```
import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class DBHelper extends SQLiteOpenHelper {

public static final String DB_NAME = "tasksdb8";
public static final String TABLE_NAME = "tasks";
public static final String TASKS_ID = "_id";
public static final String TASKS_TITLE = "title";

private static String CREATE_TABLE_SQL = "Create table "
        + DBHelper.TABLE_NAME + " ( " + DBHelper.TASKS_ID
        + " INTEGER PRIMARY KEY AUTOINCREMENT, " + DBHelper.TASKS_TITLE
        + " TEXT);";

public DBHelper(Context context)
{
    super(context, DBHelper.DB_NAME, null, 1);
}

@Override
public void onCreate(SQLiteDatabase database) {
    database.execSQL(DBHelper.CREATE_TABLE_SQL);
    Log.d("DBHelper", "Table Created: " + DBHelper.CREATE_TABLE_SQL);
}

@Override
public void onUpgrade(SQLiteDatabase arg0, int arg1, int arg2) {
    // TODO Auto-generated method stub

}

} 
```

这是我的 POJO：

```
public class Tasks {

private String tasksTitleString;
private int id;

public Tasks(String tasksTitleString, int id) {
    super();
    this.tasksTitleString = tasksTitleString;
    this.id = id;
}

public Tasks(String tasksTitleString) {
    super();
    this.tasksTitleString = tasksTitleString;
}

public String getTasksTitleString() {
    return tasksTitleString;
}

public int getId() {
    return id;
}
public void setId(int id) {
    this.id = id;
}

public String isTasksCompleted() {
    return tasksCompleted;
}

public void setTasksCompleted(String tasksCompleted) {
    this.tasksCompleted = tasksCompleted;
}

} 
```

# drupal - 内容节点的测验多项选择字段以创建测验

> ID：11552533
> 
> 赞同：2
> 
> 时间：2012-07-19T00:54:54.730
> 
> 标签：drupal, drupal-7, drupal-modules, content-type

我正在寻找一个模块来生成多项选择题，即具有一个问题和许多可能答案的可重复字段，我可以将其添加到我的内容类型中。我研究了 Drupal 网站，除了“测验”模块之外找不到我想要的东西，目前 D7 还没有稳定的版本发布。

我只需要有关可能实现该目标的模块的建议或开始寻找的地方。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T15:16:19.803

看起来刚刚出来：[http](http://drupal.org/project/exam) ://drupal.org/project/exam ！

有些人还使用[webform 模块](http://drupal.org/project/webform/)来创建在线测试/测验。使用该模块的唯一问题是，尽管它已经很成熟，但您得到的只是学生提交的答案。如果您实际上还希望立即给用户反馈（例如 -- 对他们进行评分并在线显示结果），那么您必须自己进行一些编程。

我实际上会使用测验（您已经提到过）或考试并对其进行测试，因为它们是为这种类型的事情而设计的。它们可能不是稳定版本，但它们可能已经具有您想要的大部分功能。此外，使用它们的人越多，调试的速度就越快。如果您发现任何问题，只需在问题队列中报告！;-) 这就是开源的美妙之处。我们都参与测试和修复。

无论如何，只想提一下考试和网络表单模块....

# javascript - python通过POST使用javascript提交发送数据

> ID：11552534
> 
> 赞同：1
> 
> 时间：2012-07-19T00:55:02.953
> 
> 标签：javascript, python, authentication, urllib2, form-submit

我从 python 脚本提交表单的问题.. 这是 FORM

```
<form id="userLogin" autocomplete="OFF" action="LoginPage.aspx" method="post" name="userLogin"
<input type="text" class="txt" id="Userid" name="Userid" maxlength="12">
<input type="password" class="txtpwdbox" id="Password" name="Password" readonly="" maxlength="10">
<img style="CURSOR:pointer" onclick="userIdValidation();" src="/ENG/images/but-login-en.gif" id="idSubmit"> 
```

从上面的代码中，我们可以注意到最后一行是关于提交的，但是在 python 中怎么做呢？

这是我的python代码

```
import urllib,urllib2,cookielib
login_data = urllib.urlencode({'Userid':'test','Password':'123456'})
cj = cookielib.CookieJar()
op = urllib2.build_opener(urllib2.HTTPCookieProcessor(cj))
c = op = urllib2.urlopen('https://www.example.com/Login/LoginPage.aspx', login_data)
print c.read() 
```

但它没有提交..如果你徘徊什么是`userIdValidation()`功能，它基本上是检查用户是否填写了用户名和密码字段然后执行该命令`document.userLogin.submit();`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T01:04:51.083

也许您可以尝试[机械化](http://wwwsearch.sourceforge.net/mechanize/)（[PyPI 页面](http://pypi.python.org/pypi/mechanize/)）。不确定它是否处理 Javascript，但它对我在页面之间导航和提交表单有很大帮助。此外，您将摆脱 cookie 管理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T03:03:04.023

您可以在上面尝试，但是当您通过以下方式构建开瓶器“操作”时

> op = urllib2.build_opener(urllib2.HTTPCookieProcessor(cj))

你为什么使用

> urllib2.urlopen('https://www.example.com/Login/LoginPage.aspx', login_data)

这不能通过 cookie

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T02:53:09.663

我猜您是从 .net 框架实现站点获取该页面。（此处为“LoginPage.aspx”）

.net框架的很多站点都启用了PageView属性，它是维护页面的状态方法之一，但它会附加一些数据请求发起

因此，如果您想发布请求，请不要忘记 PageView 或其他 .net 框架数据。

# jquery - jQuery scrollTo.js 键盘控制行为异常

> ID：11552540
> 
> 赞同：0
> 
> 时间：2012-07-19T00:55:57.637
> 
> 标签：jquery, twitter-bootstrap, scrollto

**这是相关页面的实时版本：http: [//agoodman.com.au/index1.html](http://agoodman.com.au/index1.html)**

我正在使用 Bootstrap 构建一个单页网站，并且 scrollTo 用于向上/向下滚动不同的部分。有一个顶部导航栏，代码如下：

```
<ul class="nav">
  <li class="active"><a href="#intro" onclick="$.scrollTo( '#intro', 600 );">Top</a></li>
  <li><a href="#service" onclick="$.scrollTo( '#service', 600 );">What we do</a></li>
  <li><a href="#howitworks" onclick="$.scrollTo( '#howitworks', 600 );">How it works</a></li>
  <li><a href="#fees" onclick="$.scrollTo( '#fees', 600 );">Our fees</a></li>
  <li><a href="#why" onclick="$.scrollTo( '#why', 600 );">Why do it?</a></li>
  <li><a href="#map" onclick="$.scrollTo( '#map', 600 );">Map</a></li>
  <li><a href="#contact" onclick="$.scrollTo( '#contact', 600 );">Contact</a></li>
</ul>​ 
```

当您用鼠标单击导航栏时，滚动工作正常，根本没有奇怪的行为。然后，我使用此 jquery 代码通过键盘的向上/向下箭头控制导航栏：

```
$(document).keyup(function(e) {
          var p = $("li.active");
          if (e.keyCode === 38) {
          p.prev().find("a").click();
          } else if (e.keyCode === 40) {
          p.next().find('a').click();
          }
        }); 
```

这在大多数情况下都有效。但是，我想解决两个问题：

**1.**当向上/向下按时，页面向上/向下移动一个小跳跃（就像在任何网站上按箭头键一样）*然后*滚动到下一个div。我试着把 event.preventDefualt(); 在 jquery if/else 语句中，但它没有做任何事情。关于如何在此处防止默认向上/向下操作的任何想法？

**2.**按“向上”键会使页面向上滚动*两个*部分而不是一个部分。例如，转到“#why”部分，然后按向上键。它滚动到“#fees”，然后再次滚动到“#howitworks”。也许 scrollspy.js 在这里发生冲突？

希望在这一点上指出正确的方向。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T01:57:31.210

不太确定为什么页面会跳过，可能是因为查找和您在哈希列表中的位置。我为代码组织编写了一个小片段，因此更容易在您所在的位置进行调试。

**编辑：**好的，我终于修改了代码以使其正常工作。早些时候，我觉得它行不通，但我想给你一个关于如何处理卷轴的骨架。

笔记：

1.  $("a") 获取所有锚点的列表
2.  window.location.hash.slice(1) 获取您当前所在的哈希值，以防您单击链接
3.  anchors.index 是您所在的锚的索引（从第 1 步收集）
4.  anchors.get 只是获取下一个位置
5.  currentHash.hash 是您要从中获取的下一个地址的哈希值

    ```
    var anchors = $("a.links");
    var currentPos = 0;
    var nextPos = 0;
    var current = window.location.hash.slice(1); //get current hash;

    $('#navbar').scrollspy();

    $(document).ready(function(){       
        $(document).keyup(function(e){
             e.preventDefault();
            currentPos = anchors.index($('a[href$="' + $('input[name="hash"]').val() + '"]'));
            //currentPos = anchors.index($('a[href$="' + current + '"]'));
             if(e.keyCode === 38){
                scrollUp(currentPos);
             } else if (e.keyCode === 40){
                scrollDown(currentPos);
             }

        });

        function scrollUp(pos){
            currentHash = anchors.get(pos-1);
            if(!(currentHash===undefined) && (pos-1) >= 0){
                current = currentHash.hash;
            }
             $(document).scrollTo(current,600);

        }

        function scrollDown(pos){
            currentHash = anchors.get(pos+1);
            if(!(currentHash===undefined)){
                current = currentHash.hash;
            }
             $(document).scrollTo(current,600);
        }
    }); 
    ```

小费：

我会将一个类与您的链接相关联，例如：

```
 <a class="links" href="#service" ....> 
```

然后在注释的第 1 步中你可以做一个选择器：

```
 $(a) will then be $(a.links) 
```

**EDIT2**：我编辑了上面的 javascript 以利用以下更改：

我发现了一种不幸的方式来使用 scrollspy。显然，他们使用原型来包装他们的功能，你真的不能直接调用这些方法。所以解决方法是这样的：

将此 html 代码放入您的网页中：

```
<input type="hidden" name="hash" value="" /> 
```

然后打开scrollspy，进入原型设计，它为您提供“激活”并输入以下代码：

```
$('input[name="hash"]').val(this.activeTarget); 
```

在线以上：

```
active.trigger('activate') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T05:47:53.507

使用`keydown`. 然后要么`return true`做`e.preventDefault()`你想做的事。

# java - 尝试从另一个不起作用的 ArrayList 中过滤

> ID：11552542
> 
> 赞同：1
> 
> 时间：2012-07-19T00:56:25.963
> 
> 标签：java, arraylist, filtering

尝试从另一个不起作用的 ArrayList 中过滤

我有一个名为 listaGrande 的 ArrayList（bigList 的西班牙语）。它包含来自名为 Objeto 的类的对象，该类有一个名为 loTengo (iHaveIt) 的字符串。

如果 loTengo = "Yes" 或 "yes"，只有那些词，没有其他词，那些标记为 Objeto 的应该形成一个新的 ArrayList，称为 inventario（库存）。

这是使用 CONFLICTIVE 方法的类：

```
public class FiltraListas { // ListsFilter.

    public String registro; // registry.
    public ArrayList<Objeto> listaGrande;
    public ArrayList<Objeto> inventario; // CONFLICTIVE by being declared here?
    public String loTengo;
    public Objeto unObjeto; // oneObject 

    public FiltraListas(String registro) {
        this.registro = registro;
        listaGrande = new ArrayList<Objeto>();
        this.loTengo = "Yes"; 

    }

    public ArrayList<Objeto> setInventario() {
        for (Objeto cualquiera : listaGrande){ // cualquiera is Spanish for any.
            if("YES".equalsIgnoreCase(cualquiera.getLoTengo())) { // FILTER NOT WORKING.
                inventario.add(cualquiera);
            }
        }
        return inventario;

    } 
```

该类的其余部分具有 getInventario、Eclipse 自动生成的 getter 和 setter，以及 listaGrande 的 add/remove 方法。

这是 JUnitTestCase。

```
public class FiltraListasTest extends TestCase {

    private FiltraListas checador;
    private Objeto n1;
    private Objeto n2;

    public void testFiltraListas() {
        FiltraListas checa = new FiltraListas("Arranque");
        assertEquals("Arranque", checa.registro);
        assertTrue(checa.listaGrande instanceof ArrayList);
        assertTrue(checa.inventario instanceof ArrayList); // Smooth.

    }
        public void setup() {
        checador = new FiltraListas("Probador"); // Tester.
        checador.addToListaGrande(n1); // Two Objeto on
        checador.addToListaGrande(n2); // right list.
        n1 = new Objeto("Pinzas eléctricas");
        n2 = new Objeto("Multímetro");
        n1.setLoTengo("yes"); // CONFLICTIVE. Should make setInventario to work.
        n2.setLoTengo("Pronto lo compraré"); // I'll buy it soon.

    }

    public void testListaGrande() {
        setup();
        ArrayList<Objeto> todasCosas = checador.getListaGrande();
        ArrayList<Objeto> pruebaInventario = checador.getInventario();
        assertEquals(2, todasCosas.size());
        assertEquals(1, pruebaInventario.size()); // Probes to be wrong.

    }
} 
```

这是我对丹建议的实施。我认为应该工作。但事实并非如此。有什么想法可以解决吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T01:05:33.713

您是指以下内容吗？：

```
List<Dice> myInventory = new ArrayList<Dice>();
for (Dice die : bigList) {
    if ("YES".equalsIgnoreCase(die.getHaveIt())) {
        myInventory.add(die);
    }
}
return myInventory; 
```

希望这就是你要找的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T01:22:40.403

如果您可以选择使用 Apache Commons Collections ，请根据您的需要考虑使用[filter](http://commons.apache.org/collections/api-release/org/apache/commons/collections/CollectionUtils.html#filter%28java.util.Collection,%20org.apache.commons.collections.Predicate%29)或[select方法。](http://commons.apache.org/collections/api-release/org/apache/commons/collections/CollectionUtils.html#select%28java.util.Collection,%20org.apache.commons.collections.Predicate,%20java.util.Collection%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T01:06:34.753

这是你要找的吗？

```
public class Dice {

    private static ArrayList<String> myInventory;
    private static String haveIt;

    public void setMyInventory() {
        if (haveIt.equals("Yes") || haveIt.equals("yes"))
            myInventory = new ArrayList<String>();
        else
            myInventory = null;
    }

} 
```

# css - css，点击一个div下的东西

> ID：11552546
> 
> 赞同：1
> 
> 时间：2012-07-19T00:56:51.377
> 
> 标签：css, html, clicking

好的，所以我有一些代码，我希望能够单击顶部 div 下的内容。由于某种原因，它不起作用，我不知道为什么。经过广泛的谷歌搜索，我很确定我正确地使用了指针事件，所以如果有人能对我的问题提供一些见解，一百万个拥抱。

```
 <html>
<head>
<style type="text/css">
#profilecontainer{
position:absolute;
top:0;
}
#topdiv{
background-image:url('http://img805.imageshack.us/img805/7227/profilek.png');
width:621;
height:365;
z-index:3!important;
pointer-events:none;
}
#content{
height:75;
width:571;
position:absolute;
clip:shape;
top:270;
left:25;
z-index:-2;
pointer-events:auto;
}
</style>
</head>
<div id="profilecontainer"><div id="content" class=""><a href=http://www.youtube.com/watch?v=9LlYs_s1494>Test clicker</a></div><div id="topdiv"></div></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T01:07:33.060

添加`&nbsp;`到，`topDiv`因为它不会以其他方式显示。

然后添加`position: absolute;`到`topDiv`'s CSS，它应该可以正常工作。

这方面的相关资料：

[单击 DIV 到底层元素](https://stackoverflow.com/questions/3680429/click-through-a-div-to-underlying-elements)

不要忘记使用 IE 解决方法。

# wpf - VB.Net 中的二维图形应该使用什么技术？WPF、DirectX、SlimDX？

> ID：11552548
> 
> 赞同：2
> 
> 时间：2012-07-19T00:57:39.863
> 
> 标签：wpf, vb.net, directx, slimdx

我最近受雇帮助编写一些基于计算机的视觉测试，并且大部分代码都是用 VB.Net 编写的。我个人认为用 c++ 编写会更好，但我认为那艘船已经航行了。大多数测试在图形上都相当简单，例如深度感知测试只是黑色背景上的三个灰色/银色条，中间条可以使用 nvidia 3D 眼镜弹出或弹出。其他测试不同，但通常涉及简单的 2d 图形。我的理解是 DX9 之后托管语言不再支持 DirectX。我知道我可以使用 XNA，但我不希望最终客户必须下载 XNA 安装程序。我正在考虑使用 WPT，但我的理解是 WPF 基于矢量图形，一个 WPF 像素不一定是真正的像素。我需要非常精确地控制对象到像素的间距，以便测试准确。我想我的问题归结为我应该使用旧版本的 DX9 a 还是 b，还是应该使用像 slimDX 这样的 DX 包装器。我的最后一个想法是在 c++ 和 directX 中为每个测试的图形方面创建一个 Windows 应用程序控件，然后如果可能的话，在我的 vb.net 应用程序中使用该控件。任何想法都会受到欢迎。网络应用程序，如果可能的话。任何想法都会受到欢迎。网络应用程序，如果可能的话。任何想法都会受到欢迎。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T02:24:57.127

更新：OP 已澄清他想使用支持 NVidia 3D Vision 的 API

SlimDX 是 DirectX 的 C# 包装器，非常完整。事实上 - 这是一篇关于在 NVidia 3D 中使用 SlimDX 的相关 SO 帖子：[Nvidia 3d Video using DirectX11 and SlimDX in C#](https://stackoverflow.com/questions/11277069/nvidia-3d-video-using-directx11-and-slimdx-in-c-sharp?rq=1) （如果你阅读后续内容，你会看到海报在 DX9 中工作）

对于仅 2D 部分，WinForms/GDI+ 是一个很好的匹配，但是您也可以使用 SlimDX 对整个事物进行编码，因为您已经获得了它。

GDI+： - 2D 图形 API - 您可以使用 C#（更接近您想要的 C++）并与旧版 VB.Net 集成 - 像素级控制

GDI+ 唯一的缺点是它相对于 DX 和 OpenGL 等 GPU 加速 3D 库来说速度较慢，但​​老实说，除非您推动许多百万像素并且对帧速率有高要求，否则这不会引起注意。

您是正确的，托管 DirectX 在 DX9 停止（并且仅适用于 x86 目标）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T01:34:37.873

你可以试试旧的 GDI+

[http://en.wikibooks.org/wiki/Visual_Basic_.NET/GDI%2B](http://en.wikibooks.org/wiki/Visual_Basic_.NET/GDI%2B)

# ios - ios APNS 计数限制

> ID：11552552
> 
> 赞同：0
> 
> 时间：2012-07-19T00:58:03.157
> 
> 标签：ios, push, in-house-distribution

我正在为电子邮件服务制作内部应用程序，可能会有超过 10,000 名用户使用此应用程序（因为这是大学电子邮件服务）。我担心一天有超过 100,000 次推送。在这种情况下，Apple 是否有任何推送限制，或者服务器端、客户端、APNS 等出现问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T01:04:48.147

[如果您严格遵守通用提供者指南](http://developer.apple.com/library/ios/#DOCUMENTATION/NetworkingInternet/Conceptual/RemoteNotificationsPG/CommunicatingWIthAPS/CommunicatingWIthAPS.html)，您应该没问题。最重要的是：

1) 批量发送通知。

2) 定期检查反馈服务，不要发送到报告失败交付的设备。

祝你好运！

# objective-c - 这是糟糕的设计/违反模型视图控制器吗？

> ID：11552557
> 
> 赞同：0
> 
> 时间：2012-07-19T00:58:26.707
> 
> 标签：objective-c, model-view-controller, design-patterns

我正在编写一个连接到服务器并获取图像列表的应用程序，然后下载它们并将它们显示在网格中。

此过程的第一部分由我拥有的客户端类完成，该类连接到服务器并要求提供图像 URL 列表。我在我的视图控制器中执行此操作并将其传递给我的视图。

第二部分由我编写的图像缓存类完成，它获取每个图像 URL 并检查应用程序是否已下载并存储它。如果是这样，它会从文件系统中获取图像并返回它。否则，它会异步下载图像并存储它。

我现在做事的方式是，我的视图控制器获取图像标识符列表并将它们传递到我的视图中。然后视图为每个图像创建图像视图并用占位符图像填充它们，然后为每个图像询问图像缓存并在下载图像时填充图像。

我的视图的绘制功能本身具有这种下载图像的逻辑是否是糟糕的设计？感觉有点像违反 MVC，因为我的视图正在努力获取它应该显示的数据。但是，实际的网络是在其他地方（在图像缓存类中）完成的，并且被抽象出来，因此视图只是调用`[ImageCache getImageForIdentifier:... completionHandler:...]`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T01:12:32.440

您的`ImageCache`课程是模型级别课程的示例。它不了解任何 UI。好的 MVC 会说 View 类，如您的网格视图，*永远不*应该直接与 Model 类对话。这就是控制器的用途。

更简洁的实现是让控制器使用 ImageCache 进行下载并随时更新网格视图。这将一些业务逻辑从网格视图类中移出，让它只关心表示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T01:13:42.813

好吧，视图类不应该进行任何网络调用。视图可以只与控制器通信以获取需要显示的数据。所以，

1.  您的控制器工作是获取 URL 或图像。
2.  有一个模型类，它收集了需要稍后显示的所有图像。将此模型类引用添加到您的控制器中。
3.  控制器应该检查缓存并填充您的模型类。如果缓存没有图像，那么您的控制器应该为您的模型下载这些图像。
4.  从控制器公开一个公共方法以从模型对象填充您的视图。

* * *

我的目标是创建三个不同的类，

1.  ImageCahce = 模型类
2.  ImageCollection = 模型类
3.  ImageDataController = 控制器类。

ImageCache 类存储已经下载的图片，可能在 CoreData 中。ImageCollection 类每次都会从 ImageCache 中填充，之后需要更多的新图像，然后从 ImageDataController 中填充。

# ffmpeg - 使用ffmpeg垂直或水平堆叠（马赛克）几个视频？

> ID：11552565
> 
> 赞同：51
> 
> 时间：2012-07-19T00:59:42.057
> 
> 标签：ffmpeg, video-processing

我有两个完全相同长度的视频，我想使用 ffmpeg 将它们堆叠成一个视频文件。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：209
> 
> 时间：2015-11-17T18:59:51.413

使用[vstack](https://ffmpeg.org/ffmpeg-filters.html#vstack)（垂直）、[hstack](https://ffmpeg.org/ffmpeg-filters.html#hstack)（水平）或[xstack](https://ffmpeg.org/ffmpeg-filters.html#xstack)（自定义布局）过滤器。它比其他方法更容易和更快。

# 合并/堆叠两个视频或图像

## 垂直的

使用[vstack](https://ffmpeg.org/ffmpeg-filters.html#vstack)过滤器。

[![在此处输入图像描述](../Images/8b51fbf15dbc6eb9305d34297506ae5e.png)](https://i.stack.imgur.com/IfrXw.png)

```
ffmpeg -i input0 -i input1 -filter_complex vstack=inputs=2 output 
```

视频必须具有相同的宽度。

## 水平的

使用[hstack](https://ffmpeg.org/ffmpeg-filters.html#hstack)过滤器。

[![在此处输入图像描述](../Images/77f39905ebc72a27e437c9ead421ee8f.png)](https://i.stack.imgur.com/MCFP5.png)

```
ffmpeg -i input0 -i input1 -filter_complex hstack=inputs=2 output 
```

视频必须具有相同的高度。

## 带边框

使用[垫](https://ffmpeg.org/ffmpeg-filters.html#pad)过滤器。此示例在两侧之间创建一个 5px 的黑色边框。

[![在此处输入图像描述](../Images/f4cf180c5c8dfb8d2f3125beb05b9be7.png)](https://i.stack.imgur.com/p1w5C.png)

```
ffmpeg -i input0 -i input1 -filter_complex "[0]pad=iw+5:color=black[left];[left][1]hstack=inputs=2" output 
```

* * *

# 带音频

## 缩混并使用原始频道位置

[![在此处输入图像描述](../Images/75e022c2ff491dc38c7096cd04d9baf5.png)](https://i.stack.imgur.com/V1aYS.png)

添加[amerge 过滤器](https://ffmpeg.org/ffmpeg-filters.html#amerge)以组合来自两个输入的音频通道：

```
ffmpeg -i input0 -i input1 -filter_complex "[0:v][1:v]vstack=inputs=2[v];[0:a][1:a]amerge=inputs=2[a]" -map "[v]" -map "[a]" -ac 2 output 
```

*   这假设每个输入都包含一个立体声音频流。

*   `-ac 2`如果两个输入都包含多声道音频，则包含缩混为立体声。例如，如果两个输入都是立体声，如果省略`-ac 2`.

## 将来自每个输入的所有音频放入单独的通道中

[![在此处输入图像描述](../Images/983156138bb838d4ed404f2e16437c9b.png)](https://i.stack.imgur.com/1pAXi.png)

使用[amerge](https://ffmpeg.org/ffmpeg-filters.html#amerge)（或[amix](https://ffmpeg.org/ffmpeg-filters.html#amix)）和[pan](https://ffmpeg.org/ffmpeg-filters.html#pan)过滤器：

```
ffmpeg -i input0 -i input1 -filter_complex "[0:v][1:v]vstack=inputs=2[v];[0:a][1:a]amerge=inputs=2,pan=stereo|c0<c0+c1|c1<c2+c3[a]" -map "[v]" -map "[a]"  output 
```

*   这假设每个输入都包含一个立体声音频流。

## 使用来自一个特定输入的音频

此示例将使用来自的音频`input1`：

```
ffmpeg -i input0 -i input1 -filter_complex "[0:v][1:v]vstack=inputs=2[v]" -map "[v]" -map 1:a output 
```

## 添加静音音频/如果一个输入没有音频

如果您混合有音频的输入和没有音频的输入，则 amerge 将失败，因为每个输入都需要音频。[您可以使用anullsrc 过滤器](https://ffmpeg.org/ffmpeg-filters.html#anullsrc)添加静音音频来防止这种情况：

```
ffmpeg -i input0 -i input1 -filter_complex "[0:v][1:v]vstack=inputs=2[v];anullsrc[silent];[0:a][silent]amerge=inputs=2[a]" -map "[v]" -map "[a]" -ac 2 output.mp4 
```

* * *

# 3 个视频或图像

[![在此处输入图像描述](../Images/c9b2e6dd0a96f225f8fe4b3eb1729b07.png)](https://i.stack.imgur.com/wCkyB.png)

```
ffmpeg -i input0 -i input1 -i input2 -filter_complex "[0:v][1:v][2:v]hstack=inputs=3[v]" -map "[v]" output 
```

如果你想垂直使用 vstack 而不是 hstack。

* * *

# 2x2 网格

[![在此处输入图像描述](../Images/7d1e65debebfee4c5ae27a318b627170.png)](https://i.stack.imgur.com/B214q.png)

## 使用[xstack](https://ffmpeg.org/ffmpeg-filters.html#xstack)

```
ffmpeg -i input0 -i input1 -i input2 -i input3 -filter_complex "[0:v][1:v][2:v][3:v]xstack=inputs=4:layout=0_0|w0_0|0_h0|w0_h0[v]" -map "[v]" output 
```

## 使用[hstack](https://ffmpeg.org/ffmpeg-filters.html#hstack)和[vstack](https://ffmpeg.org/ffmpeg-filters.html#vstack)

```
ffmpeg -i input0 -i input1 -i input2 -i input3 -filter_complex "[0:v][1:v]hstack=inputs=2[top];[2:v][3:v]hstack=inputs=2[bottom];[top][bottom]vstack=inputs=2[v]" -map "[v]" output 
```

这种语法更容易理解，但比使用上面显示的 xstack 效率低。

* * *

# 带文本的 2x2 网格

[![在此处输入图像描述](../Images/d108c5a8389338090f01140961ec67aa.png)](https://i.stack.imgur.com/z6Nn0.png)

使用[drawtext](https://ffmpeg.org/ffmpeg-filters.html#drawtext)过滤器：

```
ffmpeg -i input0 -i input1 -i input2 -i input3 -filter_complex
"[0]drawtext=text='vid0':fontsize=20:x=(w-text_w)/2:y=(h-text_h)/2[v0];
 [1]drawtext=text='vid1':fontsize=20:x=(w-text_w)/2:y=(h-text_h)/2[v1];
 [2]drawtext=text='vid2':fontsize=20:x=(w-text_w)/2:y=(h-text_h)/2[v2];
 [3]drawtext=text='vid3':fontsize=20:x=(w-text_w)/2:y=(h-text_h)/2[v3];
 [v0][v1][v2][v3]xstack=inputs=4:layout=0_0|w0_0|0_h0|w0_h0[v]"
-map "[v]" output 
```

* * *

# 4x4

使用[xstack 过滤器](https://ffmpeg.org/ffmpeg-filters.html#xstack)。总共 16 个视频的示例：

```
ffmpeg -i input0 -i input1 -i input2 -i input3 -i input4 -i input5 -i input6 -i input7 -i input8 -i input9 -i input10 -i input11 -i input12 -i input13 -i input14 -i input15 -i input16 -filter_complex "[0:v][1:v][2:v][3:v][4:v][5:v][6:v][7:v][8:v][9:v][10:v][11:v][12:v][13:v][14:v][15:v]xstack=inputs=16:layout=0_0|w0_0|w0+w1_0|w0+w1+w2_0|0_h0|w4_h0|w4+w5_h0|w4+w5+w6_h0|0_h0+h4|w8_h0+h4|w8+w9_h0+h4|w8+w9+w10_h0+h4|0_h0+h4+h8|w12_h0+h4+h8|w12+w13_h0+h4+h8|w12+w13+w14_h0+h4+h8" output.mp4 
```

如果您需要先缩放输入：

```
ffmpeg -i input0 -i input1 -i input2 -i input3 -i input4 -i input5 -i input6 -i input7 -i input8 -i input9 -i input10 -i input11 -i input12 -i input13 -i input14 -i input15 -i input16 -filter_complex "[0:v]scale=iw/4:-1[v0];[1:v]scale=iw/4:-1[v1];[2:v]scale=iw/4:-1[v2];[3:v]scale=iw/4:-1[v3];[4:v]scale=iw/4:-1[v4];[5:v]scale=iw/4:-1[v5];[6:v]scale=iw/4:-1[v6];[7:v]scale=iw/4:-1[v7];[8:v]scale=iw/4:-1[v8];[9:v]scale=iw/4:-1[v9];[10:v]scale=iw/4:-1[v10];[11:v]scale=iw/4:-1[v11];[12:v]scale=iw/4:-1[v12];[13:v]scale=iw/4:-1[v13];[14:v]scale=iw/4:-1[v14];[15:v]scale=iw/4:-1[v15];[v0][v1][v2][v3][v4][v5][v6][v7][v8][v9][v10][v11][v12][v13][v14][v15]xstack=inputs=16:layout=0_0|w0_0|w0+w1_0|w0+w1+w2_0|0_h0|w4_h0|w4+w5_h0|w4+w5+w6_h0|0_h0+h4|w8_h0+h4|w8+w9_h0+h4|w8+w9+w10_h0+h4|0_h0+h4+h8|w12_h0+h4+h8|w12+w13_h0+h4+h8|w12+w13+w14_h0+h4+h8" output.mp4 
```

* * *

# 调整/缩放输入

由于两个视频都需要与 vstack 相同，并且 hstack 的高度相同，因此您可能需要缩放其他视频之一以匹配另一个：

简单[的缩放](https://ffmpeg.org/ffmpeg-filters.html#scale)过滤器示例，将 input0 的宽度设置为 640，并在保留纵横比的同时自动设置高度：

```
ffmpeg -i input0 -i input2 -filter_complex "[0:v]scale=640:-1[v0];[v0][1:v]vstack=inputs=2" output 
```

*   有关将任何大小的视频调整为特定大小同时保留纵横比的更高级方法，请参阅[Resizing videos with ffmpeg to fit into static sized player](https://superuser.com/a/1136305/110524)。

*   您还可以使用[scale2ref](https://ffmpeg.org/ffmpeg-filters.html#scale2ref)过滤器自动调整一个视频的大小以匹配另一个视频的尺寸。

* * *

# 延迟/暂停视频

此示例将播放左上角的视频，同时暂停其他视频。一旦左上角的视频结束，右上角的视频就会播放，依此类推。

使用[tpad](https://ffmpeg.org/ffmpeg-filters.html#tpad)、[adelay](https://ffmpeg.org/ffmpeg-filters.html#adelay)、[xstack](https://ffmpeg.org/ffmpeg-filters.html#xstack)和[amix](https://ffmpeg.org/ffmpeg-filters.html#amix)过滤器：

```
ffmpeg -i top-left.mp4 -i top-right.mp4 -i bottom-left.mp4 -i bottom-right.mp4 -filter_complex "[1]tpad=start_mode=clone:start_duration=5[tr];[2]tpad=start_mode=clone:start_duration=10[bl];[3]tpad=start_mode=clone:start_duration=15[br];[0][tr][bl][br]xstack=inputs=4:layout=0_0|w0_0|0_h0|w0_h0[v];[1:a]adelay=5s:all=true[a1];[2:a]adelay=10s:all=true[a2];[3:a]adelay=15s:all=true[a3];[0:a][a1][a2][a3]amix=inputs=4[a]" -map "[v]" -map "[a]" output.mp4 
```

*   此示例假定每个输入的持续时间为 5 秒。根据需要调整`start_duration`和`adelay`值。

*   此命令需要 FFmpeg 4.3 或更高版本。

*   如果您不喜欢 xstack 的复杂性，您可以使用多个 hstack/vstack 来代替，如**示例 4：2x2 grid**所示。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-07-19T02:32:44.507

请参阅[此问题的答案](https://stackoverflow.com/a/33764934/85950)以获得更新、更简单的方法。

* * *

旧版本：
您应该可以使用FFmpeg 中的[pad](http://ffmpeg.org/ffmpeg-filters.html#pad)、[movie](http://ffmpeg.org/ffmpeg-filters.html#movie)和[overlay过滤器来做到这一点。](http://ffmpeg.org/ffmpeg-filters.html#overlay-1)该命令将如下所示：

```
ffmpeg -i top.mov -vf 'pad=iw:2*ih [top]; movie=bottom.mov [bottom]; \
  [top][bottom] overlay=0:main_h/2' stacked.mov 
```

首先，应该在顶部的电影被填充到其高度的两倍。然后加载底部电影。然后底部电影以填充电影高度的一半的偏移量覆盖在填充顶部电影上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-15T10:36:09.240

对于 2 个视频：

```
ffmpeg -i 1.mp4 -i 2.mp4 -filter_complex hstack out.mp4 
```

更多视频（本例中为 3 个）：

```
ffmpeg -i 1.mp4 -i 2.mp4 -i 3.mp4 -filter_complex hstack=3 out.mp4 
```

# php - 检查在windows上运行的php

> ID：11552569
> 
> 赞同：3
> 
> 时间：2012-07-19T01:01:01.550
> 
> 标签：php

我已经在我的 Windows 7 上安装了 XAMPP 1.7。正如预期的那样，PHP 已经包含在这个安装程序包中。我查看了硬盘驱动器 ( `C:\xampp`) 上的 XAMPP 安装文件夹，它确实有一个名为 php.ini 的文件夹。

现在，当我打开 XAMPP 并查看 Windows 任务管理器时，我看到 apache 和 mysql 都出现在进程选项卡和服务选项卡上，但 php 没有出现在任何这些选项卡上。

我只想检查 php 是否正在运行？你能告诉我为什么上面的检查失败或者PHP当时真的没有运行（请注意我此时已经激活了XAMM）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T01:04:08.653

通过 apache 调用 PHP 时没有正在运行的进程。而是为每个 apache 请求执行 PHP 解释器。要测试它是否正在运行，请将

```
<?php phpinfo(); 
```

在一个名为的文件中`index.php`，然后在浏览器中点击它。

如果 PHP 正常工作，就像默认安装的 XAMPP 一样，那么您应该会在该页面上看到有关 PHP 安装的一些信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T01:05:46.850

简而言之，apache 会在它认为有必要时运行 php（例如，当有新请求时）。尝试在 C:\xampp\htdocs\mystuff 中放置一个脚本（例如 script.php），然后使用您喜欢的浏览器转到 //localhost/mystuff/script.php ——如果它出现，它就会正常运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T01:05:03.277

PHP 不是通过 XAMPP 作为进程运行的，它实际上是通过 apache 模块运行的。

如果您想检查 php 是否正在运行，请在文档根目录中创建一个包含其中的空 file.php 并`<?php phpinfo();`在浏览器中运行它。

# javascript - 使用 ctrl+s 保存链接的 Javascript

> ID：11552574
> 
> 赞同：0
> 
> 时间：2012-07-19T01:01:10.380
> 
> 标签：javascript

当用户单击图像链接时，它应该提示保存选项（而不是右键单击并保存）。`ctrl`如果用户按下+ ，我找到了提醒用户的方法`s`。但是，当他单击链接时，我如何显示保存选项。下面是我的代码，它不起作用。

```
<script type="text/javascript">
function myFunction()
{
   if  (event.ctrlKey && event.keyCode == 115)
   {
       event.keyCode = 0;
   }
}
</script>

<input type="button" onclick="myFunction()" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T01:22:43.557

您不能在 Javascript 中手动打开另存为提示。您唯一能做的就是将窗口的位置更改为图像，您可以使用来自服务器的特殊标头来提供图像。例如：

```
<img onclick="saveFunction()">

<script type="text/javascript">
    function saveFunction() {
        window.location.href = this.getAttribue('src') + '?somethingspecial';
    };
</script> 
```

查看[此线程](https://stackoverflow.com/questions/1804446/prompt-user-to-download-pdf-file-instead-of-opening)以了解如何提供文件以提示下载。看起来您需要`Content-Disposition`使用您使用的任何 Web 服务器设置标头。

# javascript - 使用过滤延迟加载项目

> ID：11552577
> 
> 赞同：6
> 
> 时间：2012-07-19T01:02:15.090
> 
> 标签：javascript, search, backbone.js, infinite-scroll

我正在使用 Backbone.js 在页面上一次加载 20 个项目，当您向下滚动到底部时会获取更多项目，直到没有剩余可以从服务器获取。

同时，我想要一个输入字段，当您输入名称时，它会过滤匹配的项目。

问题是，如果您尚未滚动到底部并获取完整集，则输入过滤器将仅匹配页面上当前的项目。

将 UI 过滤与延迟加载项相结合的最佳技术和视觉解决方案是什么？

编辑：这里的真实场景是加载你所有的 facebook 朋友，这可能非常慢，并将它们与其他 api 混合在一起。我不想一次加载所有内容，因为体验被延迟了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T05:41:31.260

当用户搜索时，为什么不使用包含过滤器的 fetch 重置集合？

Collection.fetch({ term : $("#search").val()})

如果您为此集合设置后端 API 端点以通过术语参数限定您的结果，那么您的集合将仅包含来自服务器的与用户输入匹配的结果。

您还可以将初始提取限制为用户输入的前 3 个字符，然后在他们继续键入时执行其余的过滤客户端。也就是说，如果您没有在第一次调用时限制搜索结果服务器端。

# java - Java Method.getName() 与字符串不匹配

> ID：11552578
> 
> 赞同：0
> 
> 时间：2012-07-19T01:02:31.883
> 
> 标签：java, methods, matching

我已经用几种不同的方法对此进行了测试。我比较的字符串`s`与日志文件中显示的字符串完全相同。撇号是为了确保没有空格。有谁知道发生了什么？

```
import java.lang.reflect.Method;
import android.util.Log;

public class Button {
    public Button () {
        for(Method m1:MyOtherClass.class.getMethods()) {
        String s = m1.getName();
            if(s == "Update") {
                Log.i("result","true");
            }
            Log.i("test", "'" + s + "'");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T01:05:36.447

你的问题在于：

```
if(s == "Update") 
```

将其替换为

```
if (s.equals("Update")) 
```

== 在处理对象（如字符串）时比较引用，而不是内容/值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T01:05:32.560

不要用 . 比较字符串（或任何对象）`==`。利用`s.equals("Update")`

`==`用于检查引用是否包含相同的对象，而不是对象是否包含相同的值，

例如

```
Integer i1=new Integer(1);
Integer i2=new Integer(1);
Integer i3=i1;
//checking references
System.out.println(i1==i2);//false
System.out.println(i1==i3);//true

//checking values
System.out.println(i1.equals(i2));//true
System.out.println(i1.equals(i3));//true 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T01:06:05.017

使用`String`类中的 equals() 方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T01:05:20.400

使用 `"Update".equals(s)` 这会进行正确的值比较。

# java - 有没有办法在我的整个 Android 应用程序中使 SharedPreferences 全球化？

> ID：11552579
> 
> 赞同：13
> 
> 时间：2012-07-19T01:02:47.747
> 
> 标签：java, android, android-preferences

有没有办法在我的整个应用程序中使 SharedPreferences 全球化？现在，我在整个代码中的很多地方都使用这些行来存储我的用户可以设置的许多首选项的简单开/关设置。如果可能的话，我只想在全球范围内给他们打一次电话：

```
SharedPreferences settings = getSharedPreferences("prefs", 0);
SharedPreferences.Editor editor = settings.edit(); 
```

关于如何在所有类中只调用这些行的任何提示都会很棒：

```
editor.putString("examplesetting", "off");
editor.commit(); 
```

和

```
String checkedSetting = settings.getString("examplesetting", ""); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-19T01:16:15.780

我知道，我知道，我会发炎，被扔进地狱的余烬中……

使用包含设置的单例类`SharedPreference`.. 像这样：

```
public class PrefSingleton{
   private static PrefSingleton mInstance;
   private Context mContext;
   //
   private SharedPreferences mMyPreferences;

   private PrefSingleton(){ }

   public static PrefSingleton getInstance(){
       if (mInstance == null) mInstance = new PrefSingleton();
       return mInstance;
   }

   public void Initialize(Context ctxt){
       mContext = ctxt;
       //
       mMyPreferences = PreferenceManager.getDefaultSharedPreferences(mContext);
   }
} 
```

并围绕您的示例在问题中表示的内容创建包装函数，例如，

`PrefSingleton.getInstance().writePreference("exampleSetting", "off");`

并且实现可能是这样的：

```
// Within Singleton class

public void writePreference(String key, String value){
     Editor e = mMyPreference.edit();
     e.putString(key, value);
     e.commit();
} 
```

从您的第一个活动开始，以这种方式激活单例类，如下所示：

```
PrefSingleton.getInstance().Initialize(getApplicationContext()); 
```

我冒险投反对票的原因是，使用全局静态类可能是一个坏主意，并且违背了编程基础的实践。**但是**话虽如此，除了挑剔之外，它将确保只有一个也是唯一的类对象`PrefSingleton`可以存在并且无论代码处于什么活动都可以访问。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-19T01:29:03.097

我会扩展`Application`并包含`SharedPreferences.Editor`一个带有吸气剂的字段。

```
public class APP extends Application {
    private final SharedPreferences settings = getSharedPreferences("prefs", 0);
    private final SharedPreferences.Editor editor = settings.edit();

    public SharedPreferences.Editor editSharePrefs() {
        return editor;
    }
} 
```

然后你可以从任何访问`Activity`它

```
((APP) getApplication()).editSharePrefs().putString("examplesetting", "off");
((APP) getApplication()).editsharePrefs().commit(); 
```

或者，您也可以在方法中抛出

```
 public static APP getAPP(Context context) {
        return (APP) context.getApplicationContext();
    } 
```

虽然，这只会改变您拨打的电话

```
APP.getAPP(this).editSharePrefs().putString("examplesetting", "off");
APP.getAPP(this).editsharePrefs().commit(); 
```

所以这真的是个人喜好，对你来说看起来更干净。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-14T20:35:20.450

我会这样做：

```
public class BaseActivity extends Activity {

        protected boolean setInHistory;
        protected SharedPreferences sharedPrefs;

            @Override
        protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    sharedPrefs = PreferenceManager.getDefaultSharedPreferences(this);
    setInHistory = true;
       }

}

public class MainActivity extends BaseActivity {

         public void onCreate(Bundle savedInstanceState) {
               super.onCreate(savedInstanceState);
                setContentView(R.layout.activity_main);

              System.out.println(setInHistory+" <-- setInhistory");

          }
} 
```

然后可以访问 sharedPrefs，因为它受到保护，然后可以通过包访问。

```
In the console you have : true <-- setInhistory 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T02:25:00.907

使用 Helper 类来获得你想要的一切，使方法成为静态的。这就是 ADW 的做法。

# c++ - 编译文件时出现 C++ 错误

> ID：11552580
> 
> 赞同：0
> 
> 时间：2012-07-19T01:02:49.627
> 
> 标签：c++, header, compiler-errors

我有一个名为 BottlingPlant 的课程。我创建了以下头文件：

```
#ifndef __BOTTLINGPLANT_H__
#define __BOTTLINGPLANT_H__

#include <iostream>

class BottlingPlant {
public:
BottlingPlant( Printer &prt, NameServer &nameServer, unsigned int numVendingMachines, unsigned int maxShippedPerFlavour, unsigned int maxStockPerFlavour, unsigned int timeBetweenShipments );
void getShipment( unsigned int cargo[ ] );
void action();  
};

#endif 
```

以及以下 .cc 文件：

```
#include <iostream>
#include "PRNG.h"
#include "bottlingplant.h"

BottlingPlant::BottlingPlant( Printer &prt, NameServer &nameServer, unsigned int numVendingMachines, unsigned int maxShippedPerFlavour, unsigned int maxStockPerFlavour, unsigned int timeBetweenShipments ) {

}

void BottlingPlant::getShipment( unsigned int cargo[ ] ) {

}

void BottlingPlant::action() {

} 
```

当我尝试编译 .cc 时，它在 .cc 和 .h 行中出现错误：

```
BottlingPlant::BottlingPlant( Printer &prt, NameServer &nameServer, unsigned int numVendingMachines, unsigned int maxShippedPerFlavour, unsigned int maxStockPerFlavour, unsigned int timeBetweenShipments ) 
```

说在token`)`之前有一个expect。`&`这对我来说没有任何意义，因为没有 open `(`。我只是不确定为什么会出现此错误。`Printer`并且`NameServer`只是项目的一部分单独的类，但是..我是否也需要包含它们的头文件？

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T01:08:21.917

您需要包含您正在使用的任何类的头文件，甚至是同一个项目中的类。编译器将每个单独的源文件作为一个单独的翻译单元处理[，](https://en.wikipedia.org/wiki/Translation_unit_%28programming%29)如果定义它的头文件没有包含在该翻译单元中，它就不会知道一个类的存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T01:12:54.157

您的 .h 文件应包含具有 Printer 和 NameServer 类定义的标头。例如，如果它们位于 MyHeader.h 中，则显示的以下示例应修复这些错误。

```
#ifndef __BOTTLINGPLANT_H__
#define __BOTTLINGPLANT_H__

#include <iostream>
#include "MyHeader.h"

class BottlingPlant {
public:
BottlingPlant( Printer &prt, NameServer &nameServer, unsigned int numVendingMachines, unsigned int maxShippedPerFlavour, unsigned int maxStockPerFlavour, unsigned int timeBetweenShipments );
void getShipment( unsigned int cargo[ ] );
void action();  
};

#endif 
```

# ruby-on-rails - 将路线作为模型是一个坏主意吗？

> ID：11552586
> 
> 赞同：0
> 
> 时间：2012-07-19T01:04:08.000
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, routes

我正要做

```
rails g scaffold Route 
```

但我不知道拥有 Route 模型和 Routes 控制器是否是个坏主意，以及它是否会与 config/routes.rb 冲突

我没有在[http://oldwiki.rubyonrails.org/rails/pages/ReservedWords](http://oldwiki.rubyonrails.org/rails/pages/ReservedWords)的保留字下看到“路线”，所以我假设没问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T01:46:00.567

名称冲突似乎不会有问题。但我会避免它只是不合常规。路线是我们作为 RoR 开发人员经常讨论的内容，为您的路线设置路线可能会引发一些有趣的对话。

# php - php文件上传所有权问题

> ID：11552593
> 
> 赞同：0
> 
> 时间：2012-07-19T01:04:57.647
> 
> 标签：php, file-upload, imagick, ownership

我正在尝试在 PHP 中实现照片上传和调整大小（我正在使用 LAMP 堆栈和 Imagick 扩展来调整大小）。但是，每次我尝试上传文件时，文件的所有权默认设置为 www-data，这使得无法对文件应用任何更改。以下是我正在使用的代码：

```
<?php

if (is_uploaded_file($_FILES['picture']['tmp_name'])){

  $photoPath = $_SERVER['DOCUMENT_ROOT'] . '/photo_app/uploads/' . $_FILES['picture']['name'];

  if (move_uploaded_file($_FILES['picture']['tmp_name'], $photoPath)){

        $image = new Imagick($photoPath);
        $image -> scaleImage(250, 250, true);
        $image -> writeImage($photoPath);

  }   

}

?> 
```

照片被移动到正确的位置，但由于所有权问题没有调整大小。有没有办法解决这个问题？谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T01:10:05.410

上传文件的用户将是运行 PHP 的用户。由于您正在从同一个 php 实例上传和操作文件，因此您应该拥有完整的文件权限。

# routes - 如何查看 Kohana 内所有已定义的路线？

> ID：11552597
> 
> 赞同：0
> 
> 时间：2012-07-19T01:05:26.923
> 
> 标签：routes, kohana

我的意思是，有没有办法打印出 Kohana 设置的路线？我知道我要设置什么，并且我正在以编程方式进行设置，但由于它没有找到路线，我只想看看 Kohana 定义了什么。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T06:21:42.013

`$routes = Route::all();`

[http://kohanaframework.org/3.2/guide/api/Route#all](http://kohanaframework.org/3.2/guide/api/Route#all)

# clojure - 如何从clojure中的序列制作一个集合

> ID：11552603
> 
> 赞同：4
> 
> 时间：2012-07-19T01:05:51.520
> 
> 标签：clojure

在 Clojure 中将序列转换为集合的惯用方法是什么？例如，我在点处填写什么？

```
(let s [1 1 2 2 3 3]
  ...) 
```

所以它产生：

```
#{1 2 3} 
```

我想出：

```
(let [s [1 1 2 2 3 3]]
  (loop [r #{} s s]
    (if (empty? s) r (recur (conj r (first s)) (rest s))))) 
```

但这似乎不是要走的路？是否已经有一个功能可以做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-19T01:09:28.807

大多数集合都有一个函数，可以从任何可序列化的形式生成它们：

```
(set [1 1 2 2 3 3])
#{1 2 3} 
```

对于更有趣的情况，该`into`功能很高兴了解：

```
(into #{1}  [2 2 3 3])
#{1 2 3} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T01:09:43.207

来自[http://clojure.org/data_structures#Data](http://clojure.org/data_structures#Data) Structures-Sets：

您还可以使用 set 函数获取集合中的一组值：

```
(set [1 2 3 2 1 2 3])
#{1 2 3} 
```

# java - 在 JTextPane 中编辑文本时出现空指针异常

> ID：11552605
> 
> 赞同：1
> 
> 时间：2012-07-19T01:06:04.393
> 
> 标签：java, swing, nullpointerexception

这是我的程序界面的图片，只是为了在解释我的问题时简单。 ![我的程序界面](../Images/73cf7deaf404fd87109d4ae58987da2a.png)

所以程序从这个屏幕开始，第一步是编辑你的名字，通过点击编辑名字按钮，它调用这个方法：

```
private void editName() {
     NameLabel = new javax.swing.JLabel();
     NameField = new javax.swing.JTextField();
     Sumbit = new javax.swing.JButton();
     Sumbit.addActionListener(this);

     setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
     setAlwaysOnTop(true);
     setType(java.awt.Window.Type.POPUP);

     NameLabel.setText("Name:");
     NameField.setText(name);
     Sumbit.setText("Sumbit");
     ..location code.. 
```

因此，您在弹出的文本字段中输入您的姓名，然后点击提交。然后我得到这个错误：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException  
at kraz.Kraz.game(Kraz.java:62)  
at kraz.Kraz.actionPerformed(Kraz.java:186) 
```

第 186 行的 actionPerformed 是提交按钮：

```
 else if (e.getSource() == Sumbit)
    {
        name = NameField.getText();
        NameField.setText("" + name);

        if (step == 1)
        {
            ++step;
            game();
        }
    } 
```

第 62 行是我调用 game() 方法的地方。下一个，第 162 行是：

```
public void game() {
    if (step == 1)
    {
        HealthBar.setValue(100);
    }
    else if (step == 2)
    {
        EventField.setText("Test");
        ProgressBar.setValue(1);
    }
} 
```

错误是我在 EventField 中设置文本时。

完整代码： http: [//pastebin.com/rBWju8vX](http://pastebin.com/rBWju8vX)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T01:22:34.267

您有 2 个构造函数，一个调用`initComponents()`，另一个没有：

```
public Kraz() {
    initComponents();
    setVisible(true);
    game();
}

public Kraz(String check) {
    if (check.equals("editName"))
    {
        editName();
        setVisible(true);
    }
} 
```

在 main 方法中，您调用`new Kraz();`which 是调用`initComponents()`. 但是当您处理 EditName 事件时，您会再次调用构造函数，但另一个`new Kraz("editName")`不会调用`initComponents()`，因此 EventField 为空：

```
else if (e.getSource() == EditName)
{
    new Kraz("editName");
} 
```

因此，当您在 的这个新实例中`Kraz`点击“提交”按钮时，新实例将处理事件并调用`game()`，但没有任何字段被初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T02:57:34.790

调用`this()`第二个构造函数：

```
public Kraz() {
    initComponents();
    setVisible(true);
    game();
}

public Kraz(String check) {

    this(); // <-- Add here

    if (check.equals("editName"))
    {
        editName();
        setVisible(true);
    }
} 
```

# google-apps-script - 编写 Google Apps 脚本以向 10 天前提交表单并满足其他条件的用户发送电子邮件

> ID：11552610
> 
> 赞同：0
> 
> 时间：2012-07-19T01:06:49.493
> 
> 标签：google-apps-script

所以我有一个谷歌表单，它提供谷歌文档电子表格。此表格是为我们镇上的新人注册我们的新人组。

我想编写一个 Google Apps 脚本，该脚本将以编程方式向提交表单 10 天后仍未缴纳会费的用户发送提醒电子邮件。

应该很容易吧？

以下是电子表格副本的链接，其中个人数据已被删除：

[https://docs.google.com/spreadsheet/ccc?key=0AjsoIob8dJfodG9WN0ZmWUE1ek9rc3JrVFpDQ0J0OGc](https://docs.google.com/spreadsheet/ccc?key=0AjsoIob8dJfodG9WN0ZmWUE1ek9rc3JrVFpDQ0J0OGc)

似乎我应该能够使用 A 列（“时间戳”）与 now() 进行某种比较来确定 10 天部分。并且要获得尚未支付的会费，必须是 D 列不等于是。显然，收件人的电子邮件地址在 X 列中。

我已经编写了一个脚本来向收件人“提交表单”发送一封确认电子邮件。所以我对 MailApp.sendEmail 类很满意。

如果您注意到“Updaid”选项卡，您会看到我已经使用查询来拉出尚未付款的人。

但我不确定如何让 MailApp.sendEmail 类对已经在工作表中的数据进行操作。提交表单时不会自动触发。

而且我不知道如何调整我的查询以解释 10 天前的内容。

而且我什至不确定我是否应该为此应用程序使用查询。

任何人都可以纠正我的道路吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T01:25:36.203

知道日期是否晚于 10 天的最简单方法可能是计算毫秒数！

我知道这听起来像个笑话，但事实并非如此；-)

例子 ：

```
function test(){
var today = new Date();
var tendaysBefore = new Date(today.getTime()-10*24*60*60*1000);// 10 times 24 hours
Logger.log(today+' is 10 later than '+tendaysBefore);
} 
```

getTime() 方法返回从参考日期开始的毫秒数，它将工作到 2070 年，所以我想现在可以安全使用 ;-)

*科尼利厄斯的回答已经解决了触发问题，谢谢*

**编辑：**这是一个可能的代码来做你想做的事：（在你的工作表上测试）

```
 var sh = SpreadsheetApp.getActiveSheet();
 var ss = SpreadsheetApp.getActiveSpreadsheet();// replace these with openbyId''ID') and getSheetByName(name) when you run it with trigger since the sheet wil be 'closed'
 var lastrow = ss.getLastRow();

function onOpen() {
  var menuEntries = [ {name: "check late paiments", functionName: "test"},
                      {name: "send mails to tagged users", functionName: "mailunpaid"},
                                     ];
  ss.addMenu("custom functions",menuEntries);// custom menu
  } 

function test(){ // check column D and set it to "no" if not paid
     var paidcol = sh.getRange(2, 4, lastrow-1, 1).getValues();//read only col D
     for(nn=0;nn<paidcol.length;++nn){
       if(paidcol[nn][0].toString().toLowerCase().match('yes')!='yes'){
       paidcol[nn][0]='no'
       }
       }
      sh.getRange(2, 4, lastrow-1, 1).setValues(paidcol);// write back to sheet
      }

function mailunpaid(){
     var data = sh.getDataRange().getValues();//read the whole sheet in an array, col D is idx3, timestamp is idx0 email is idx 23 
     var today = new Date();
     var tendaysBefore = new Date(today.getTime()-10*24*60*60*1000);// 10 times 24 hours
       for (nn=1;nn<data.length;++nn){  // iterate from row 2 to end ie idx 0 to last
    // Logger.log(data[nn][3]+'   '+data[nn][0])
         if(data[nn][0]<=tendaysBefore && data[nn][3]=='no'){
     //    MailApp.sendEmail(data[nn][23], 'subject', 'body'); // you have to define the mail subject & content somewhere ;-) and uncomment when finished your tests
     Logger.log('row '+Number(nn+1)+' = to send because '+data[nn][0])
         sh.getRange(nn+1,4).setValue('SENT');// tag this user to know that mail has been sent to avoid multiple emails
          }
       }
    } 
```

请注意，为了清楚起见，我将代码拆分为 2 个函数，但是当它作为触发器运行时，您应该将这两个函数组合在一起以进行自动检查...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T01:12:51.430

编写比较函数应该很容易，然后您只需要添加自己的每日触发器。

查看脚本编辑器中的 Resources-> Triggers。

[这是来自 Google 的触发器教程的链接。](https://developers.google.com/apps-script/understanding_triggers)

# ruby - 没有 Rails 的 Ruby 中的 Action Mailer - 超时错误

> ID：11552619
> 
> 赞同：3
> 
> 时间：2012-07-19T01:08:34.533
> 
> 标签：ruby, smtp, actionmailer, google-apps

我正在使用 Action Mailer 发送每日电子邮件，但没有使用 Rails。我还在这里查看了其他问题：[Action Mailer 3 without Rails](https://stackoverflow.com/questions/4951310/actionmailer-3-without-rails)、[ActionMailer 和 Ramaze](https://stackoverflow.com/questions/741989/actionmailer-and-ramaze)

这是我的代码：

```
require 'action_mailer'

class Mailer < ActionMailer::Base
  def daily_names_email(names,subject="test daily mail",to = "test@domain.com")
  @names = "test names"
  mail(
      :to      => to,
      :from    => "me@domain.com",
      :subject => subject
    ) do |format|
    format.text
    format.html
    end
  end
end

Mailer.raise_delivery_errors = true
Mailer.delivery_method = :smtp
Mailer.smtp_settings = {
 :address   => "smtp.gmail.com",
 :port      => 465,
 :domain    => "google",
 :authentication => :plain,
 :user_name      => "me@domain.com",
 :password       => "*****",
 :enable_starttls_auto => true
}
Mailer.view_paths = File.dirname(__FILE__)
Mailer.logger = Logger.new(STDOUT)

email = Mailer.daily_names_email('hello')

puts email
email.deliver 
```

这是错误输出：

```
Date: Thu, 19 Jul 2012 08:46:18 +0800
From: me@domain.com
To: me@domain.com

Message-ID: <500758da4dbda_151082d87c10766@ubuntu.mail>
Subject: test daily mail
Mime-Version: 1.0
Content-Type: multipart/alternative;
 boundary="--==_mimepart_500758da4a289_151082d87c104fb";
 charset=UTF-8
Content-Transfer-Encoding: 7bit
----==_mimepart_500758da4a289_151082d87c104fb
Date: Thu, 19 Jul 2012 08:46:18 +0800
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-ID: <500758da4c2f6_151082d87c10515@ubuntu.mail>

/usr/lib/ruby/1.9.1/net/protocol.rb:146:in `rescue in rbuf_fill': Timeout::Error (Timeout::Error)
from /usr/lib/ruby/1.9.1/net/protocol.rb:140:in `rbuf_fill'
from /usr/lib/ruby/1.9.1/net/protocol.rb:122:in `readuntil'
from /usr/lib/ruby/1.9.1/net/protocol.rb:132:in `readline'
from /usr/lib/ruby/1.9.1/net/smtp.rb:929:in `recv_response'
from /usr/lib/ruby/1.9.1/net/smtp.rb:552:in `block in do_start'
from /usr/lib/ruby/1.9.1/net/smtp.rb:939:in `critical'
from /usr/lib/ruby/1.9.1/net/smtp.rb:552:in `do_start'
from /usr/lib/ruby/1.9.1/net/smtp.rb:519:in `start'
from /var/lib/gems/1.9.1/gems/mail-2.4.4/lib/mail/network/delivery_methods/smtp.rb:144:in `deliver!'
from /var/lib/gems/1.9.1/gems/mail-2.4.4/lib/mail/message.rb:2034:in `do_delivery'
from /var/lib/gems/1.9.1/gems/mail-2.4.4/lib/mail/message.rb:229:in `block in deliver'
from /var/lib/gems/1.9.1/gems/actionmailer-3.2.6/lib/action_mailer/base.rb:415:in `block in deliver_mail'
from /var/lib/gems/1.9.1/gems/activesupport-3.2.6/lib/active_support/notifications.rb:123:in `block in instrument'
from /var/lib/gems/1.9.1/gems/activesupport-3.2.6/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
from /var/lib/gems/1.9.1/gems/activesupport-3.2.6/lib/active_support/notifications.rb:123:in `instrument'
from /var/lib/gems/1.9.1/gems/actionmailer-3.2.6/lib/action_mailer/base.rb:413:in `deliver_mail'
from /var/lib/gems/1.9.1/gems/mail-2.4.4/lib/mail/message.rb:229:in `deliver'
from mailer.rb:34:in `<main>'' 
```

任何帮助，将不胜感激！提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T04:00:01.343

除非是拼写错误，否则“域”参数是错误的。

`:domain => 'google'`应该`:domain => 'yourdomain.com'`

您在下面给出的代码，具有正确的域可以正常工作

```
require 'action_mailer'

class Mailer < ActionMailer::Base
  def daily_names_email(names,subject="test daily mail",to = "recipient@domain.com")
  mail(
      :to      => to,
      :from    => "you@yourdomain.com",
      :subject => subject
    ) do |format|
    format.text
    format.html
    end
  end
end

Mailer.raise_delivery_errors = true
Mailer.delivery_method = :smtp
Mailer.smtp_settings = {
 :address   => "smtp.gmail.com",
 :port      => 587,
 :domain    => "yourdomain.com",
 :authentication => :plain,
 :user_name      => "you@yourdomain.com",
 :password       => "*****",
 :enable_starttls_auto => true
}
Mailer.view_paths = File.dirname(__FILE__)
Mailer.logger = Logger.new(STDOUT)

email = Mailer.daily_names_email('hello').deliver

puts email 
```

# javascript - 如何在不向函数添加代码的情况下向现有的 javascript 函数添加回调函数？

> ID：11552628
> 
> 赞同：3
> 
> 时间：2012-07-19T01:09:21.837
> 
> 标签：javascript, jquery, javascript-events

假设我有 foo()。有没有办法在 foo() 之后执行 bar() 而无需修改 foo()？

```
foo(){ /* logic */}

bar(){ /* more logic *}

afterEvent1AlwaysExecute2(foo,bar); 
```

谢谢！任何非 jquery 或 jquery 评论表示赞赏:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-19T01:13:32.713

您可以在不添加代码的情况下`foo`通过重新分配名称来做到这一点`foo`：

```
var original_foo = foo;
var foo = function() { original_foo(); bar(); } 
```

# google-maps-api-3 - 如何从融合表中检索坐标信息

> ID：11552630
> 
> 赞同：0
> 
> 时间：2012-07-19T01:09:39.830
> 
> 标签：google-maps-api-3, google-maps-markers, google-fusion-tables

我正在开发一个网页，我在该网页上使用带有美国县界的谷歌地图，并允许用户在其上放置标记。我目前正在使用来自 [https://www.google.com/fusiontables/DataSource?docid=0IMZAFCwR-t7jZnVzaW9udGFibGVzOjIxMDIxNw](https://www.google.com/fusiontables/DataSource?docid=0IMZAFCwR-t7jZnVzaW9udGFibGVzOjIxMDIxNw)的多边形数据，现在我想检索一个特定县的所有坐标。例如，用户在华盛顿州金县放置一个标记，并且用户想要检索和存储其相关坐标。从在线融合表中，有一个名为几何的列，其中包含有关特定县的所有坐标信息，但是如何检索该信息？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T01:52:37.773

它在谷歌 API 文档中。您可能需要请求该表，然后解析 json 以找到您要查找的县。从那里您可以从列中获取几何字段。

[https://developers.google.com/fusiontables/docs/v1/reference/column/get](https://developers.google.com/fusiontables/docs/v1/reference/column/get)

# matlab - MATLAB中构造矩阵的方法

> ID：11552642
> 
> 赞同：2
> 
> 时间：2012-07-19T01:11:38.260
> 
> 标签：matlab, matrix, wav

我使用函数“wavread()”将 .wav 文件加载到内存中，并将信号存储在列向量 y 中，然后得到一个行向量 yRow(=y')。

然后我定义了一个矩阵 myframe=zeros(frameNum,frameLen);

我想要做的是用 yRow 的项目填充 myframe：

```
index=1;
myframe(1,:)=yRow(index:index+frameLen-1)

for i=2:frameNum-1
   myframe(i,:)=yRow(index*frameStep:index*frameStep+frameLen-1)
   index=index+1
end

myframe(frameNum,1:sigLen-frameNum*frameStep+1)=yRow(frameNum*frameStep:sigLen) 
```

但是填写“myframe”需要很长时间，我认为肯定有问题，请帮助我找出问题所在。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T03:49:33.223

在 matlab 中使用**reshape函数为：**

```
myframe=reshape(y,frameNum,frameLen); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T13:28:38.970

在每句末尾添加分号可以停止在命令窗口中输出信息。程序可以在后端快速运行。所以，这是“;”的问题。

# r - 在 R 的循环中使用变量

> ID：11552643
> 
> 赞同：-4
> 
> 时间：2012-07-19T01:11:41.817
> 
> 标签：r, variables, loops

我的数据的列名是 LABELXYZ123_river、LABELXYZ123_lake、LABELXYZ345_river、LABELXYZ345_lake 等......我有一个实际变量 LABELXYZ123、LABELXYZ345 等的列表......我想为每个标签绘制河流和湖泊数据在单独的数字上。我带着那个代码来了，那行不通。我认为变量及其名称的问题。你能建议我解决方案吗？谢谢...

```
data <- read.table("data.txt",header=T,row.names=1)
lst  <- c("LABELXYZ123","LABELXYZ345")
for(i in lst) {
lbl_river <- paste("data","$",LABELXYZ123,"_river",sep="")
lbl_lake <- paste("data","$",LABELXYZ123,"_lake",sep="")
allt <- c(lbl_lake,lbl_river)
png(filename=i".png")
plot(paste(lbl_river,xaxt='n',xlab="",ylab="i",type="b",col="darkgreen",lwd=3,ylim=c(min(allt),max(allt)))
lines(paste(lbl_lake,type="b",col="darkred",lwd=3)
dev.off()
} 
```

lbl_river 其实是`data$LABELXYZ123_river`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T01:21:19.097

努力挽救一些东西....更多的情节在整理后

```
data <- read.table("data.txt",header=T,row.names=1)
lst  <- c("LABELXYZ123","LABELXYZ345")
for(label_name in lst) {
  lbl_river <- data[[paste(label_name, "river", sep = "_"]]
  lbl_lake  <- data[[paste(label_name, "lake", sep = "_"]]

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T11:47:13.243

使用 mnel 建议...

```
data <- read.table("data.txt",header=T,row.names=1)
lst  <- c("LABELXYZ123","LABELXZZ123","LABELXYZ345","LABELXYZ567","LABELXYY1234","LABELXXX123")
labs <- row.names(data)
for(i in lst) {
    png(filename=paste(i,".png",sep=""),width = 700, height = 350)
    river  <- data[[paste(i, "_river", sep = "")]]
    lake <- data[[paste(i, "_lake", sep = "")]]
    allt <- c(river,lake)
    plot(river, xaxt='n',xlab="",ylab=i,type="b",col="darkred",lwd=3,ylim=c(min(allt)*1.05,max(allt)*0.95))
    lines(lake,type="b",col="darkgreen",lwd=3)
    axis(1,at=1:16,labels=labs,las=2)
    dev.off()
} 
```

# c# - 从 Youtube 下载视频的问题？

> ID：11552644
> 
> 赞同：1
> 
> 时间：2012-07-19T01:11:45.170
> 
> 标签：c#, youtube, youtube-api

我正在尝试用 C# 为桌面制作视频下载应用程序。
现在的问题是以下代码可以正常工作：

```
WebClient webOne = new WebClient();
string temp1 = " http://www.c-sharpcorner.com/UploadFile/shivprasadk/visual-studio-and-net-tips-and-tricks-15/Media/Tip15.wmv";
webOne.DownloadFile(new Uri(temp1), "video.wmv"); 
```

但以下代码没有：

```
temp1="http://www.youtube.com/watch?v=Y_..." 
```

（在这种情况下，会下载 200-400 KB 的垃圾文件）

两个 URL 之间的区别很明显，第一个包含文件的确切名称，而另一个似乎以某种方式加密.​​.....

我无法找到任何适当且令人满意的解决方案，因此我非常感谢您在这里提供一些帮助，谢谢。

注意：
从这里的一个问题中，我得到了一个链接[http://youtubefisher.codeplex.com/](http://youtubefisher.codeplex.com/)所以我访问了那里，得到了源代码并阅读了它。这是一项伟大的工作，但我似乎不明白的是，这个人到底是如何知道他必须制作哪些结构和课程才能下载 YouTube 视频，以及为什么他必须经历所有这些麻烦，为什么不我的方法行不通？

请有人指导。再次感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T01:23:17.473

要从 youtube 下载视频，您必须找到实际的视频位置。不是您用来观看视频的页面。`http://www.youtube.com/watch?v=...`url，是一个 html 页面（很像这个），它将从它的源位置加载视频并显示它。通常，您必须解析 html 并从 html 中提取视频位置。

在您的情况下，您已经找到了执行此操作的代码 - 幸运的是，因为从 youtube 下载视频一点也不简单。查看您在问题中提供的链接，疯狂背后的魔力可在`YoutubeService.cs / GetDownloadUrl()`：

[http://youtubefisher.codeplex.com/SourceControl/changeset/view/68461#1113202](http://youtubefisher.codeplex.com/SourceControl/changeset/view/68461#1113202)

该方法正在解析 youtube 观看 url 返回的 html 页面，并找到实际的视频内容。增加的复杂性是 youtube 视频也可以是各种不同的格式。

如果下载后需要转换视频类型，我推荐FFMPEG

EDIT: In response to your comment - You didnt look at the source code of YoutubeFisher at all, did you.. I'd recommend analysing the file I mentioned (`YoutubeService.cs`). Although after taking a quick look myself, you'll have to parse the `yt.playerConfig` variable within the html page.

Use that source to help you.

EDIT: In response to your second comment: "Actually I am trying to develop an application that can download video from any video site." You say that like its easy - fyi, its not. Since every video website is different, you cant just write something that will work for everything out of the box. If I had to do it though, heres how i would: I would write custom parsers for the major video sharing websites (Metacafe, Youtube, Whatever else) so that those ones are guarenteed to work. After that, I would write a "fallover" if you will. Basically, if you're requesting a video from an unknown website, it would scour the html looking for known video extentions (flv, wmv, mp4, etc) and then extract the url from that.

You could use a regex for extracting the url in the latter case, or a combination of something like indexof, substring, and lastindexof.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-27T05:37:46.380

I found this page @ CodeProject, it shows you how to make a very efficient Youtube downloader using no third party libraries. Remember it is sometimes necessary to slightly modify the code as Youtube sometimes makes changes to it's web structure, which may interfere with the way your app interacts with Youtube. Here is the link: here you can also download the C# project files and see the files directly.

[CodeProject - Youtube downloader using C# .NET](http://www.codeproject.com/Tips/323771/YouTube-Downloader-Using-Csharp-NET)

# regex - 可以找出哪些输入字符与正则表达式的哪一部分匹配吗？

> ID：11552654
> 
> 赞同：2
> 
> 时间：2012-07-19T01:12:58.403
> 
> 标签：regex, computer-science, regular-language, computation-theory

我正在尝试构建一个使用正则表达式之类的工具来查找字符串中的模式（不是文本字符串，但这现在并不重要）。我熟悉自动机理论，即我知道如何实现基本的正则表达式匹配，如果字符串匹配我的正则表达式，则输出真或假，通过以教科书的方式模拟自动机。

假设我对 s 之前的所有`a`s 感兴趣，在 s 之前`b`没有更多`a`的`b`s，所以，这个正则表达式：`a[^a]*b`。但我不只是想知道我的字符串是否包含这样的部分，我想将 . 作为输出`a`，以便我可以检查它（请记住，我实际上不是在处理文本）。

总结：假设我`a`用括号标记 ，如下所示：`(a)[^a]*b`然后在输入字符串上运行它，`bcadacb`然后我想要第二个`a`作为输出。

或者，更一般地说，可以找出输入字符串中的哪些字符与正则表达式的哪一部分匹配吗？它是如何在文本编辑器中完成的？他们至少知道比赛从哪里开始，因为他们可以突出显示比赛。我必须使用回溯方法，还是有更智能、计算成本更低的方法？

编辑：正确的反向引用，即用括号捕获和用 \1 引用等可能不是必需的。我确实知道反向引用确实需要回溯（或类似的东西）并使问题（IIRC）NP-hard。从本质上讲，我的问题是：在没有反向引用的情况下，捕获部分的计算成本是否比正确的反向引用低？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T11:39:01.367

大多数文本编辑器通过使用回溯算法来做到这一点，在这种情况下，记录匹配位置很容易添加。

通过使用括号位置信息增加状态列表，也可以直接进行 NFA 模拟。这可以通过保持线性时间保证的方式来完成。请参阅[http://swtch.com/~rsc/regexp/regexp2.html#submatch](http://swtch.com/~rsc/regexp/regexp2.html#submatch)。

Timos 的答案在正确的轨道上，但是您不能标记 DFA 状态，因为 DFA 状态对应于可能的 NFA 状态的集合，因此一个 DFA 状态可能代表通过了一个括号的可能性（但也可能是其他东西）和如果事实并非如此，那么将其记录为事实是不正确的。您确实需要进行 NFA 模拟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T01:20:42.027

在为匹配构建 DFA 后，在正则表达式中的左括号后标记与第一个状态相对应的所有状态。当你访问这样一个状态时，保存当前输入字符的索引，当你访问一个右括号对应的状态时，也保存索引。当您达到接受状态时，输出两个索引。我不确定这是否是文本编辑器中使用的算法，但我就是这样做的。

# ios - 如何将视网膜捕获的图像绘制回视网膜并保持高质量？

> ID：11552658
> 
> 赞同：2
> 
> 时间：2012-07-19T01:13:30.497
> 
> 标签：ios, uiimage, retina-display

我有一个应用程序可以在视网膜 iPad (iPad3) 上进行屏幕截图。或者我只是用 HOME+POWER 进行屏幕截图并以这种方式获取图像，没关系。最后，我有一个 2048x1536 的捕获图像——即 1024x768 @2x。

现在我想在屏幕上显示这个图像——这个 2048x1536 图像——我想保留它可爱的视网膜。

当我做这样的事情时*（在网络浏览器中输入代码）*：

```
UIImage *myImage = [UIImage imageWithContentsOfFile: pathToMyHiresImage];
UIImageView *myImageView = [[UIImageView alloc] initWithImage: myImage];
myImageView.frame = screenBounds;  // make it fit
// etc... 
```

我最终得到了图像的低分辨率（锯齿状对角线和文本）版本。

所以我的问题是：我必须做些什么才能将该图像重新显示在屏幕上并让它显示@2x-DPI，所以它具有漂亮的视网膜外观？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T01:39:50.833

这就是Quartz（即真实数据）和UIImage（单板）发生碰撞的地方。所以你得到了你创建的 UIImage。向它询问 CGImage，然后查看该图像。宽度和高度最好是 2048x1536 或有问题。

一旦您知道如何获得“真实”大小的图像，您可以将其保存为“foo@2x.png”，然后将其大小调整一半，并将其保存为“foo.png”。

UIImage 让没有人的事情变得非常容易，但是当你想要真正的控制时，你必须潜入 Quartz 并在橡胶碰到道路的地方工作。

我的猜测是你认为你有一个视网膜图像，但没有，然后当你去展示它的一半 rez。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T03:55:25.927

这应该可以解决问题：

```
UIImage *myImage = [UIImage imageWithContentsOfFile: pathToMyHiresImage];
// *****Added Code*****
myImage = [UIImage imageWithCGImage:myImage.CGImage scale:2 orientation:myImage.imageOrientation];
// ********************
UIImageView *myImageView = [[UIImageView alloc] initWithImage: myImage];
myImageView.frame = screenBounds;  // make it fit
// etc ... 
```

祝你好运！

**编辑**（Olie）这是最终代码，考虑到 DavidH 的建议：

```
UIImage *myImage = [[UIImage alloc] initWithContentsOfFile: path];

if ([[UIScreen mainScreen] respondsToSelector: @selector(scale)])
{
    float screenScale = [[UIScreen mainScreen] scale];
    if (screenScale > 1.)
    {
        id oldImage = myImage;
        myImage = [[UIImage imageWithCGImage: myImage scale: screenScale orientation: myImage.imageOrientation] retain];
        [oldImage release];
    }
} 
```

# wpf - 绑定动态 Application.Resource WPF - 用户控件

> ID：11552664
> 
> 赞同：0
> 
> 时间：2012-07-19T01:14:09.603
> 
> 标签：wpf, dynamic, user-controls, resources

我有一个自定义类：

```
class CustomClass
{
    public string Test { get; set; }

    CustomClass()
    {
        this.Test = "";
    }
} 
```

我在这样的 Application.Resources 上声明这个自定义类：

```
<Application.Resources>
    <local:CustomClass x:Key="myobj"/>
</Application.Resources> 
```

此资源是网格的 DataContext，TextBox 绑定了 Test 属性，如下所示：

```
<Grid DataContext="{DynamicResource myobj}">
    <TextBox Text="{Binding Path=Test, Mode=TwoWay}"></TextBox>        
</Grid> 
```

突然在运行时，我改变了资源的价值

```
this.Resources["myobj"] = new CustomClass() { Test = "12456" }; 
```

我希望 TextBox 上引用的值始终是当前位于“myobj”资源上的对象的值，并且我希望在 TextBox 的 Text 属性值发生更改时自动更改当前对象的值，因此，我使用了 Mode=TwoWay，但它没有发生。

我使用了 WPF Inspector，我看到资源值何时更改，绑定了一个新的已清除对象而不是我创建的对象

我是 WPF 的新手，对不起我的英语和我的无知；

问候，

### 编辑 1

它可以实现道德逻辑发布的代码，谢谢！但是很抱歉，如果我之前不清楚，当绑定一个新资源时，如下所示

```
this.Resources["myobj"] = new instance; 
```

当它在声明此资源的同一窗口中调用时，它工作正常，与我在 UserControl 中调用此行不同，似乎 UserControl 不继承 MainWindow 资源，它是如何工作的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T02:05:07.027

```
 class CustomClass:INotifyPropertyChanged
{
    private string _test;
    public string Test 
    {
        get
        {
            return _test;
        }

        set
        {
            _test = value;
            Notify("Test");
        }
    }

    CustomClass()
    {
        this.Test = "";
    }

    #region INotifyPropertyChanged Members

    public event PropertyChangedEventHandler PropertyChanged;

    #endregion

    private void Notify(string propName)
    { 
        if(PropertyChanged!=null)
            PropertyChanged(this,new PropertyChangedEventArgs(propName);
    }
} 
```

使用这个类。我希望这会有所帮助。

# bayesian-networks - 关于贝叶斯网络中条件独立的一些事情

> ID：11552666
> 
> 赞同：0
> 
> 时间：2012-07-19T01:14:21.663
> 
> 标签：bayesian-networks

这个问题与论文“识别贝叶斯网络中的独立性”中的一个概念有关，第 2 页和第 3 页。

在贝叶斯网络中，每个节点都表示为变量，箭头表示依赖关系。贝叶斯网络的标准查询是这样的：给一个变量a，一个贝叶斯网络D，一组变量Y的值y，任务是计算P(b|y)，给出证据y。

然后我们应该确定：（1）查询的答案是否对变量 a 的值敏感（2）查询的答案是否对存储的参数 p_a=P(c|pa(c)) 敏感节点 a。

在这里，我对（2）感到困惑。

首先，我认为每个节点代表一个ramdon变量，为什么p_a=P(c|pa(c))的信息也存储在节点中？这是什么意思？

其次，考虑变量b和a之间的条件独立性，为什么我们要区别对待（1）和（2）？

谢谢你。

论文链接： [http ://www.cs.technion.ac.il/~dang/journal_papers/geiger1990identifying.pdf](http://www.cs.technion.ac.il/~dang/journal_papers/geiger1990identifying.pdf)

# c# - C#如何在屏幕上的特定鼠标位置显示表单？

> ID：11552667
> 
> 赞同：8
> 
> 时间：2012-07-19T01:14:24.207
> 
> 标签：c#, forms, position, show, mouse-position

我有两个表单，我的主表单是 Form1，我的辅助表单按需显示为对话框是 Form2。现在，如果我调用 Form2，它总是显示在我屏幕的左上角。第一次我以为我的表格根本不存在，但后来我看到它挂在屏幕上角。我想在用户单击上下文菜单以显示模式对话框的当前鼠标位置显示我的表单。我已经尝试了不同的方法并搜索了代码示例。但是除了数千个不同的代码之外，我什么也没找到，这些代码是关于如何以我已经知道的不同方式获取实际鼠标位置的。但无论如何，这个位置总是相对于屏幕、主窗体、控件或任何当前上下文。这是我的代码（我也尝试过的桌面定位不起作用，并且中心到屏幕仅将表单居中，

```
 Form2 frm2 = new Form2();
        frm2.textBox1.Text = listView1.ToString();
        frm2.textBox1.Tag = RenameFile;
        DialogResult dlgres=frm2.ShowDialog(this);
        frm2.SetDesktopLocation(Cursor.Position.X, Cursor.Position.Y); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-19T01:18:54.903

您的问题是您的第一个电话：`frm2.ShowDialog(this);`然后调用`frm2.SetDesktopLocation`实际上仅在表单（frm2）已经关闭后才被调用。

*ShowDialog*是一个阻塞调用 - 这意味着它仅在您调用 ShowDialog 的表单关闭时返回。因此，您将需要一种不同的方法来设置表单位置。

可能最简单的方法是在您的 Form2（您想要定位的）上创建第二个构造函数，该构造函数接受两个参数，用于 X 和 Y 坐标。

```
public class Form2
{

    // add this code after the class' default constructor

    private int desiredStartLocationX;
    private int desiredStartLocationY;

    public Form2(int x, int y)
           : this()
    {
        // here store the value for x & y into instance variables
        this.desiredStartLocationX = x;
        this.desiredStartLocationY = y;

        Load += new EventHandler(Form2_Load);
    }

    private void Form2_Load(object sender, System.EventArgs e)
    {
        this.SetDesktopLocation(desiredStartLocationX, desiredStartLocationY);
    } 
```

然后，当您创建要显示它的表单时，请使用此构造函数而不是默认构造函数：

```
Form2 frm2 = new Form2(Cursor.Position.X, Cursor.Position.Y);
frm2.textBox1.Text = listView1.ToString();
frm2.textBox1.Tag = RenameFile;
DialogResult dlgres=frm2.ShowDialog(this); 
```

您也可以尝试`this.Move(...)' instead of 'this.SetDesktopLocation`在 Load 处理程序中使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T01:24:14.947

您需要在 ShowDialog() 方法之前调用 SetDesktopLocation，如下所示：

```
using(Form2 frm2 = new Form2())
{
    frm2.textBox1.Text = listView1.ToString();
    frm2.textBox1.Tag = RenameFile;
    frm2.SetDesktopLocation(Cursor.Position.X, Cursor.Position.Y);

    DialogResult dlgres=frm2.ShowDialog(this);
} 
```

建议使用 using 语句。祝你好运 ;）

# function - 为mac os x lion 10.7创建可执行文件时如何保持c文件中asm函数的汇编指令不变

> ID：11552669
> 
> 赞同：0
> 
> 时间：2012-07-19T01:15:18.290
> 
> 标签：function, assembly, x86, clang, inline-assembly

这是从注入捆绑项目复制的c文件中的asm函数：

```
asm void mach_thread_trampoline(void)
{

    // Call _pthread_set_self with pthread_t arg already on stack
    pop     eax
    call    eax
    add     esp, 4

    // Call cthread_set_self with pthread_t arg already on stack
    pop     eax
    call    eax
    add     esp, 4

    // Call function with return address and arguments already on stack
    pop     eax
    jmp     eax

} 
```

在 gcc 之后（我在 mac os x lion 10.7.4 上工作）：

$gcc -m32 -fasm-blocks -oa ac -g

gdb 目标，观察 gdb 中的 mach_thread_trampoline 内容：

```
(gdb) x/17i mach_thread_trampoline

0x1f80 <mach_thread_trampoline>:    pop    %eax
0x1f81 <mach_thread_trampoline+1>:  call   *%eax
0x1f83 <mach_thread_trampoline+3>:  mov    %esp,%eax
0x1f85 <mach_thread_trampoline+5>:  mov    %eax,%esp
0x1f87 <mach_thread_trampoline+7>:  add    $0x4,%esp
0x1f8a <mach_thread_trampoline+10>: mov    %esp,%eax
0x1f8c <mach_thread_trampoline+12>: mov    %eax,-0x8(%ebp)

0x1f8f <mach_thread_trampoline+15>: pop    %eax
0x1f90 <mach_thread_trampoline+16>: call   *%eax
0x1f92 <mach_thread_trampoline+18>: mov    %esp,%eax
0x1f94 <mach_thread_trampoline+20>: mov    %eax,%esp
0x1f96 <mach_thread_trampoline+22>: add    $0x4,%esp
0x1f99 <mach_thread_trampoline+25>: mov    %esp,%eax
0x1f9b <mach_thread_trampoline+27>: mov    %eax,-0x8(%ebp)

0x1f9e <mach_thread_trampoline+30>: pop    %eax
0x1f9f <mach_thread_trampoline+31>: jmp    *%eax
0x1fa1 <mach_thread_trampoline+33>: ret 
```

目标为 mach_thread_trampoline 函数添加了一些指令。

是否有任何方法可以保持 asm 功能不变？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-08-05T17:51:31.493

看起来你不能用 来做到这一点，但你可以用&`gcc`编写函数。 看起来像：`a.asm``a.asm``nasm``a.asm`

```
[BITS 32]
global _mach_thread_trampoline
_mach_thread_trampoline:
; Call _pthread_set_self with pthread_t arg already on stack
pop     eax
call    eax
add     esp, 4

; Call cthread_set_self with pthread_t arg already on stack
pop     eax
call    eax
add     esp, 4

; Call function with return address and arguments already on stack
pop     eax
jmp     eax 
```

要从 C 中使用它，您需要`a.h`包含：

```
void mach_thread_trampoline(void); 
```

请注意，该功能是 intituled `_mach_thread_trampoline`in `a.asm`& `mach_thread_trampoline`in `a.h`。这是因为在 OS X 上，函数名称前有一个下划线。如果你将它移到 linux，程序集也会有`mach_thread_trampoline`，因为 linux 没有任何前缀。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-05T19:59:16.790

如果你有非平凡大小的 asm 函数，你应该把它/它们放在单独的`.S`文件中，`.intel_syntax noprefix`如果你愿意，你可以使用，或者像另一个答案建议的那样使用 NASM。

但是，如果您想将一个用 GAS 语法编写的小函数粘贴到or中，您可以使用`asm("");`全局范围内的语句来解决任何编译错误/怪异问题，请参阅此答案的最后一部分。`.c``.cpp`

* * *

`asm`由于函数类型似乎是 Apple 扩展，因此 (Linux) gcc 或 Godbolt 编译器资源管理器上的 clang 不支持它。

它看起来与`__attribute__ ((naked))`（主流（不仅仅是 Apple）clang 3.3 及更高版本以及最近的 GCC 在 x86 上支持）具有相同的用途。但是@MichaelPetch 报告说`gcc`在 OS X 10.7 ( `gcc version 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2335.15.00)`) 上*不*支持`__attribute__ ((naked))`.

（较新的 OS X为 . 创建`gcc`别名`clang`，但较旧的 OS X 具有自定义版本的 GCC）。

**`asm void func(void) {`您正在使用的编译器版本中的语法**似乎存在编译器错误；**它可以假设存在一个框架点并插入诸如`mov %eax,-0x8(%ebp)`. `asm`如果编译器允许这样做，我看不出该扩展如何有用。也许它不会发生在`-O3`，因此您可以通过启用优化来解决它。**

 **顺便说一句，常规（非 Apple）GCC 不支持 MSVC 样式的 asm 块，但仅支持 GNU C `asm("instructions");`asm 语句。但是使用 LLVM 的 Apple 版本的 gcc 确实支持它。

* * *

### `__attribute__ ((naked))`（OS X 10.7 gcc 不支持）

如果你有一个错误的编译器，它在 asm 块中引入了额外的指令，IDK 如果这会有所作为。（即使它被支持，它不在 OS X 10.7 上`gcc`）

此语法适用于现代 clang。（不是 gcc，因为它仍然不支持`-fasm-blocks`）

这可以在带有 clang 3.3[的 Godbolt上正确编译。](https://godbolt.org/#g:!((g:!((g:!((h:codeEditor,i:(j:1,lang:c%2B%2B,source:'__attribute__+((naked))+void+mach_thread_trampoline(void)%0A%7B%0A++++asm+%7B%0A++++//+Call+_pthread_set_self+with+pthread_t+arg+already+on+stack%0A++++pop+++++eax%0A++++call++++eax%0A++++add+++++esp,+4%0A%0A++++//+Call+cthread_set_self+with+pthread_t+arg+already+on+stack%0A++++pop+++++eax%0A++++call++++eax%0A++++add+++++esp,+4%0A%0A++++//+Call+function+with+return+address+and+arguments+already+on+stack%0A++++pop+++++eax%0A++++jmp+++++eax%0A++++%7D%0A%7D'),l:'5',n:'0',o:'C%2B%2B+source+%231',t:'0')),k:38.71822033898306,l:'4',m:100,n:'0',o:'',s:0,t:'0'),(g:!((g:!((h:compiler,i:(compiler:clang33,filters:(b:'0',binary:'0',commentOnly:'0',demangle:'0',directives:'0',execute:'1',intel:'0',trim:'1'),lang:c%2B%2B,libs:!(),options:'-xc+-O3+-Wall+-fasm-blocks+-m32+-nostdlib',source:1),l:'5',n:'0',o:'x86-64+clang+3.3+(Editor+%231,+Compiler+%231)+C%2B%2B',t:'0')),k:100,l:'4',m:63.98278398982241,n:'0',o:'',s:0,t:'0'),(g:!((h:output,i:(compiler:1,editor:1,wrap:'1'),l:'5',n:'0',o:'%231+with+x86-64+clang+3.3',t:'0')),header:(),l:'4',m:36.017216010177584,n:'0',o:'',s:0,t:'0')),k:61.28177966101696,l:'3',n:'0',o:'',t:'0')),l:'2',n:'0',o:'',t:'0')),version:4)我使用“二进制”输出来确保我在目标文件中看到了真实的机器代码，所以我不得不使用`-nostdlib`它来链接它。`-O0`它避免了使用or扭曲你的 asm `-O3`，但**我使用的是一个非常不同的编译器，这种语法更改可能不相关。**

```
__attribute__ ((naked)) void mach_thread_trampoline(void)
{
    // asm block *inside* a function
    asm { 
    // Call _pthread_set_self with pthread_t arg already on stack
    pop     eax
    call    eax
    add     esp, 4

    // Call cthread_set_self with pthread_t arg already on stack
    pop     eax
    call    eax
    add     esp, 4

    // Call function with return address and arguments already on stack
    pop     eax
    jmp     eax
    }
} 
```

* * *

### 便携式 GNU C`asm("");`

您可以在 GNU C 中将[Basic ASM 语句置于全局范围内。](https://gcc.gnu.org/onlinedocs/gcc/Using-Assembly-Language-with-C.html)

***这种*语法可能会解决 OS X 10.7 上的编译器错误**，因为我们根本没有使用`-fasm-blocks`，而且编译器没有机会认为它在函数内部。`.text`它应该只是在该部分中组装此代码

```
void mach_thread_trampoline(void);   // prototype

// definition: name mangling / leading underscore must be done manually
asm(".globl  _mach_thread_trampoline\n\t"
    "_mach_thread_trampoline:\n\t"
    "pop   %eax\n\t"
    "call  *%eax\n\t"
    ...
    "jmp    *%eax"
); 
```

因此，裸函数在 C++ 中可能具有优势，其中名称修饰是不平凡的。可能裸函数是自动内联的。

如果你想要真正便携，你可以使用方言替代品，`jmp {*%eax|eax}`这样你的代码无论是否编译都可以工作`-masm=intel`。

我不建议在 asm 块中使用，然后在编译器的其余代码最后`.intel_syntax noprefix`切换回。`.att_syntax`如果您（或 Godbolt 编译器资源管理器之类的工具）使用`-masm=intel`.**

# sql - 将控件值转换为 SQL 参数时出现 InvalidCastException

> ID：11552673
> 
> 赞同：0
> 
> 时间：2012-07-19T01:16:38.620
> 
> 标签：sql, vb.net, tostring, datetimepicker

nudAge.Value 是向上向下的数字。在我的 sql 数据库中，它是`Age(int, null)`. 我做到了，

```
 insert.Parameters.AddWithValue("@age", nudAge.Value.ToString()) 
```

我不确定是否应该使用 .ToString()

date_of_confinement 是我数据库中的日期时间。格式应该是这样吗？

```
 insert.Parameters.AddWithValue("@date_of_confinement", dtpDate.Value.ToShortDateString) 
```

此外，对于 number_of_bottles 是 vb.net 中的文本和 db 中的 Int，我使用了 Int32.Parse 但不确定，

```
 insert.Parameters.AddWithValue("@number_of_bottles", Int32.Parse(txtBottle.Text)) 
```

但我仍然收到错误“System.InvalidCastException”。

这是我的代码：

```
 PatientInfoConnection.Open() 'open database connection

      Dim sql As String = ""
      sql = "insert into PatientInfo (name, age, date_of_confinement,type_of_sickness, type_of_IVfluid, number_of_bottles, drop_rate)" & _
      " values (@name, @age, @date_of_confinement, @type_of_sickness, @type_of_IV_fluid, @number_of_bottles, @drop_rate)"

      Dim insert As New SqlCommand(sql, PatientInfoConnection)
      insert.Parameters.AddWithValue("@name", txtName.Text)
      insert.Parameters.AddWithValue("@age", Int32.Parse(txtAge.Text))
      insert.Parameters.AddWithValue("@date_of_confinement", Date.Parse(dtpDate.Value))
      insert.Parameters.AddWithValue("@type_of_sickness", txtSickness.Text)
      insert.Parameters.AddWithValue("@type_of_IV_fluid", txtFluid.Text)
      insert.Parameters.AddWithValue("@number_of_bottles", Int32.Parse(txtBottle.Text))
      insert.Parameters.AddWithValue("@drop_rate", Int32.Parse(txtDrop.Text))

      insert.ExecuteNonQuery() 
```

这是我的新代码：（我修改了一些。我没有收到任何错误，但是当我想通过单击保存按钮进行保存时，它什么也没做。我与数据库的连接有问题吗？谢谢！）

```
 Private Sub PatientInfoBindingNavigatorSaveItem_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles PatientInfoBindingNavigatorSaveItem.Click
    Me.Validate()
    Me.PatientInfoBindingSource.EndEdit()
    Me.PatientInfoTableAdapter.Update(Me.PatientInfoDBDataSet.PatientInfo)

End Sub

Private Sub EditInfo_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    'TODO: This line of code loads data into the 'PatientInfoDBDataSet.PatientInfo' table. You can move, or remove it, as needed.
    Me.PatientInfoTableAdapter.Fill(Me.PatientInfoDBDataSet.PatientInfo)

End Sub
Private Sub cmdSave_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles cmdSave.Click
    Try

        'To check if all values have been filled up
        If txtName.Text = "" Or txtAge.Text = "" Or dtpDate.Value = "" _
        Or txtSickness.Text = "" Or txtFluid.Text = "" Or txtBottle.Text = "" Or txtDrop.Text = "" _
        Then

            MsgBox("Please Complete All the Required Fields")

        Else
            Try

                Dim PatientInfoConnection As SqlConnection = New _
                SqlConnection("Server=CATH-PC; database=PatientInfoDB;user id=sa;password=********") 'connection to SQL database

                PatientInfoConnection.Open() 'open database connection

                Dim sql As String = ""
                sql = "insert into PatientInfo (name, age, date_of_confinement,type_of_sickness, type_of_IVfluid, number_of_bottles, drop_rate)" & _
                                   " values (@name, @age, @date_of_confinement, @type_of_sickness, @type_of_IV_fluid, @number_of_bottles, @drop_rate)"

                Dim insert As New SqlCommand(sql, PatientInfoConnection)
                insert.Parameters.AddWithValue("@name", txtName.Text)
                insert.Parameters.AddWithValue("@age", Convert.ToInt32(txtAge.Text))
                insert.Parameters.AddWithValue("@date_of_confinement", Date.Parse(dtpDate.Value))
                insert.Parameters.AddWithValue("@type_of_sickness", txtSickness.Text)
                insert.Parameters.AddWithValue("@type_of_IV_fluid", txtFluid.Text)
                insert.Parameters.AddWithValue("@number_of_bottles", Convert.ToInt32(txtBottle.Text))
                insert.Parameters.AddWithValue("@drop_rate", Convert.ToInt32(txtDrop.Text))

                insert.ExecuteNonQuery()

                PatientInfoConnection.Close() 'close database connection

                MsgBox("Successfully Saved")
                Me.Visible = False
                Mainform.Show()

            Catch myerror As MySqlException
                MessageBox.Show("Error Connecting to Database: " & myerror.Message & ". Please contact the operator")

            End Try
        End If
    Catch ex As Exception
    End Try
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T03:08:10.357

在您的方法上添加断点，逐步遍历每一行，以找到发生异常的确切行。

试试这个：

```
Dim sql As String
sql = "insert into PatientInfo (name, age, date_of_confinement,type_of_sickness, type_of_IVfluid, number_of_bottles, drop_rate)" & _
                      " values (@name, @age, @date_of_confinement, @type_of_sickness, @type_of_IV_fluid, @number_of_bottles, @drop_rate)"

                Dim insert As New SqlCommand(sql, PatientInfoConnection)
                insert.Parameters.AddWithValue("@name", txtName.Text)
                insert.Parameters.AddWithValue("@age", Convert.ToInt32(txtAge.Text))
                insert.Parameters.AddWithValue("@date_of_confinement", Date.Parse(dtpDate.Value))
                insert.Parameters.AddWithValue("@type_of_sickness", txtSickness.Text)
                insert.Parameters.AddWithValue("@type_of_IV_fluid", txtFluid.Text)
                insert.Parameters.AddWithValue("@number_of_bottles", Convert.ToInt32(txtBottle.Text))
                insert.Parameters.AddWithValue("@drop_rate", Convert.ToInt32(txtDrop.Text))

                insert.ExecuteNonQuery() 
```

问候

# objective-c - 块在执行时是否被复制？

> ID：11552680
> 
> 赞同：2
> 
> 时间：2012-07-19T01:17:21.487
> 
> 标签：objective-c

我在“块编程主题”中读过这个

“块的每次调用都会提供该变量的新副本。这些变量又可以用作包含在块中的块中的常量或引用变量。”

所以，我测试了以下代码。

```
// Employee.h
@interface Employee : NSObject
@end

// Employee.m
@implement Employee
@end

// main.m
int main() {
    NSAutoreleasePool* pool = [[NSAutoreleasePool alloc] init];
    Employee* john = [[Employee alloc] init] autorelease];

    void (^blockTest)(void) = ^ {
        NSLog(@"john = %@", john);
        NSLog(@"john retain count = %ld", [john retainCount]);
    };

    blockTest();

    [pool drain];
    return 0;
} 
```

我预计执行 blockTest 时“John”保留计数将为 2，但结果为 1。

谁能帮我理解它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T01:29:42.223

您的报价不完整。如果您阅读之前的内容：

> 在块的词法范围内声明的局部变量，其行为与函数中的局部变量完全相同。

您会看到更准确的报价是：

> 块的每次调用都提供了[局部变量]的新副本。这些变量又可以用作包含在块中的块中的常量或引用变量。

`john`不是块本地的，所以引用不适用；它适用于块中定义的变量。此外，“提供一个新副本”并不意味着`copy`消息被发送到变量*contents*，它意味着有一个单独的*变量*具有相同的名称，就像每个函数调用都会产生一个局部变量的新副本（“行为完全一样就像函数中的局部变量一样”）。

```
typedef int (^IntFunc)(int);
typedef IntFunc (^IntFuncFunc)(int);

int main() {
    NSAutoreleasePool* pool = [[NSAutoreleasePool alloc] init];
    IntFuncFunc makeAdder;
    IntFunc add2, add3;

    makeAdder = ^(int x) {
        // 'x' is local to this block. Each invocation provides a new copy of 'x'
        return (IntFunc) [[^(int y) {
            return x + y;
        } copy] autorelease];
    };
    add2 = makeAdder(2);
    add3 = makeAdder(3);
    // add2 and add3 each refer to an 'x', but it's not a shared 'x'        
    NSLog(@"add2(0): %d\nadd3(0): %d\n", add2(0), add3(0));

    [pool drain];
    return 0;
} 
```

输出：

> ```
> 添加2（0）：2
> 添加3（0）：3
> 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T01:23:27.527

来自[Apple](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html#//apple_ref/doc/uid/20000052-BBCDAAJI)关于retainCount：

> 重要此方法在调试内存管理问题时通常没有价值。因为任何数量的框架对象可能已经保留了一个对象以保存对它的引用，而同时自动释放池可能在一个对象上保存了任何数量的延迟释放，所以您不太可能从中获得有用的信息方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T01:23:49.310

注意：假设此答案禁用了 ARC，就像在 ARC 环境中一样，这将完全改变。

当一个块捕获一个变量时，它会将指针 const 复制到您正在使用的对象，而不是对象本身。

例子：

```
void copyPointer(NSObject *input)
{
    NSLog(@"I have copied the input's pointer! %@", input);
}

void copyObject(NSObject *input)
{
    input = [input copy];

    NSLog(@"I have copied the object itself! %@", input);

    [input release];
} 
```

因此，当您调用 时`-retainCount`，它相当于外部变量的 retainCount，因为没有调用可以增加接收者的 retainCount 的方法。

# c++ - 只听多端口

> ID：11552683
> 
> 赞同：1
> 
> 时间：2012-07-19T01:17:31.657
> 
> 标签：c++, linux, sockets, port, dump

我正在创建一个可执行文件，它应该只监听多个端口并打印（转储）数据。是否有可能在 C++ 中做到这一点？我只获取服务器客户端模型的示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T01:20:49.067

您可以为每个套接字/端口创建一个线程并让它做显而易见的事情。您可以使用 select 来监听一组文件描述符，当一个准备好时，做显而易见的事情。

boost asio 可能会为您完成繁重的工作。 [http://www.boost.org/doc/libs/1_38_0/doc/html/boost_asio/tutorial.html](http://www.boost.org/doc/libs/1_38_0/doc/html/boost_asio/tutorial.html)

# ruby - 猪：java.lang.NoClassDefFoundError：org/jruby/embed/ScriptingContainer

> ID：11552684
> 
> 赞同：3
> 
> 时间：2012-07-19T01:17:33.987
> 
> 标签：ruby, user-defined-functions, apache-pig

pig 0.10.0 支持 ruby​​ UDF。所以，我正在尝试一个非常简单的例子。但出现以下错误。你知道为什么吗？

```
Pig Stack Trace
--------------- ERROR 2998: Unhandled internal error. org/jruby/embed/ScriptingContainer

java.lang.NoClassDefFoundError: org/jruby/embed/ScriptingContainer  at
org.apache.pig.scripting.jruby.JrubyScriptEngine.<clinit>(JrubyScriptEngine.java:65)
    at java.lang.Class.forName0(Native Method)  at
java.lang.Class.forName(Class.java:169)     at
org.apache.pig.scripting.ScriptEngine.getInstance(ScriptEngine.java:254)
    at org.apache.pig.PigServer.registerCode(PigServer.java:523)    at
org.apache.pig.tools.grunt.GruntParser.processRegister(GruntParser.java:422)
    at
org.apache.pig.tools.pigscript.parser.PigScriptParser.parse(PigScriptParser.java:419)
    at
org.apache.pig.tools.grunt.GruntParser.parseStopOnError(GruntParser.java:189)
    at
org.apache.pig.tools.grunt.GruntParser.parseStopOnError(GruntParser.java:165)
    at org.apache.pig.tools.grunt.Grunt.exec(Grunt.java:84)     at
org.apache.pig.Main.run(Main.java:555)  at
org.apache.pig.Main.main(Main.java:111)     at
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)     at
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)     at
org.apache.hadoop.util.RunJar.main(RunJar.java:156) Caused by:
java.lang.ClassNotFoundException: org.jruby.embed.ScriptingContainer
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)   at
java.security.AccessController.doPrivileged(Native Method)  at
java.net.URLClassLoader.findClass(URLClassLoader.java:190)  at
java.lang.ClassLoader.loadClass(ClassLoader.java:306)   at
sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)   at
java.lang.ClassLoader.loadClass(ClassLoader.java:247)   ... 17 more
================================================================================ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T18:25:06.470

我有同样的问题。您应该查看是否安装了 w pig 的 jruby.jar。

似乎 jython.jar 在那里，所以也许这对人们使用 python 是一个友好的推动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-09T15:39:35.897

我必须明确地将 jruby.jar 放在类路径中：

```
java -cp $PIG_HOME/pig-0.11.1.jar:$PIG_HOME/lib/jruby.jar org.apache.pig.Main -x local myscript.pig 
```

# r - 递归累积函数

> ID：11552686
> 
> 赞同：5
> 
> 时间：2012-07-19T01:18:06.120
> 
> 标签：r

我需要在 R 中编写一个累积求和函数，但我一直在碰壁。该函数具有以下结构：

```
a*x1
a*x2 + a^2*x1
a*x3 + a^2*x2 + a^3*x1
a*x4 + a^2*x3 + a^3*x2 + a^4*x1 
```

等等。cumsum 似乎不适用于此类功能。有什么方法可以在 R 中实现吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-19T01:31:59.837

因为你的递归是

```
u[n+1] = a * ( x[n+1] + u[n] ) 
```

IE，

```
u[n+1]/a = x[n+1] + a * u[n]/a, 
```

你可以使用`filter`：

```
x <- 1:5
a <- 2
a*filter(1:5, a, method="recursive")

# Compare with the expected values
a*x[1]
a*x[2] + a^2*x[1]
a*x[3] + a^2*x[2] + a^3*x[1]
a*x[4] + a^2*x[3] + a^3*x[2] + a^4*x[1] 
```

# ruby-on-rails-3 - SASS box-shadow Mixin 使 Internet Explorer 8 崩溃

> ID：11552687
> 
> 赞同：0
> 
> 时间：2012-07-19T01:18:16.197
> 
> 标签：ruby-on-rails-3, sass

我在 RVM 中将 SASS 与 Rails 3.2.3 和 Ruby 1.9.3 一起使用。

我的问题是，出于某种原因，我的 SASS box-shadow mixin 导致 Internet Explorer 8 在页面加载时崩溃，IE 没有错误，只是完全关闭。如果我删除 mixin，它会完美打开...... mixin 看起来像：

```
@mixin boxShadow($params) {
  -moz-box-shadow: $params;
  -webkit-box-shadow: $params;
  box-shadow: $params;
} 
```

我在 application.scss 的顶部有这个

`@import 'mixins';`

我正在使用 mixin：

`@include boxShadow(0px 1px 3px #999);`

知道为什么会发生这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T21:06:05.623

原来是一个旧版本的 respond.min.js 把事情搞砸了！

# mysql - MySQL 将 Oracle Pl/SQL (+) 转换为 MySQL

> ID：11552688
> 
> 赞同：0
> 
> 时间：2012-07-19T01:18:23.287
> 
> 标签：mysql, outer-join

我正在尝试使用外连接进行查询，过去我一直使用 Oracle Pl/SQL，但现在正在尝试学习 MySQL。我正在尝试加入 3 个表，USERS、USER_TYPE 和 GRADE。USERS 表包含列 USER_TYPE_ID，它是 USER_TYPE 的外键，它还包含列 GRADE_ID，它是 GRADE 的外键。我需要外连接，因为用户类型可以是学生、教员等，如果它是教员，那么 USER 没有成绩，因此 USER 表中的 NULL GRADE_ID。这是我的查询在过去使用 (+) 进行外部连接时的样子。

```
SELECT A.USER_NAME
     , A.USER_TYPE_ID
     , B.USER_TYPE_DESC
     , A.GRADE_ID
     , C.GRADE_DESC
  FROM USERS A
     , USER_TYPE B
     , GRADE C
 WHERE A.USER_TYPE_ID = B.USER_TYPE_ID
   AND A.GRADE_ID = C.GRADE_ID (+); 
```

有人可以帮我把它翻译成 MySQL 查询吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T01:22:27.117

```
SELECT u.user_name, u.user_type_id, ut.user_type_desc, u.grade_id, g.grade_desc
FROM users u JOIN user_type ut ON (ut.user_type_id = u.user_type_id)
LEFT JOIN grade g ON (u.grade_id = g.grade_id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-05T03:53:55.887

```
SELECT u.user_name, u.user_type_id, ut.user_type_desc, u.grade_id, g.grade_desc
FROM users u, user_type ut
LEFT OUTER JOIN grade g ON u.grade_id = g.grade_id
WHERE ut.user_type_id = u.user_type_id 
```

# jquery - Jquery缩略图按钮不起 作用

> ID：11552692
> 
> 赞同：0
> 
> 时间：2012-07-19T01:18:43.803
> 
> 标签：jquery, image

我想通过单击缩略图来更改更大的图片。无论出于何种原因，它都不起作用。我不知道我做错了什么，我为这么简单的事情浪费了太多时间。感谢您的关注：

**HTML - Head.php**

```
.......
 <section>
<img id="theImage" src="images/mods/angiograph/head/Ag1.jpg" title="Ag-01" alt="Ag-01">
</section>
<section id="rightMenu">
    <div id="addHolder">
        <h3 class="topHeader"><a href="#">Quick Pick</a></h3>
            <div id="quickPick">
                <ul id="thumbList">
                </ul>
            </div>
</section>  

...... 
```

**JS - 位于正文末尾** *调用 substring() 是因为缩略图的 src 是使用 imageList 函数动态创建的（参见 imageProvider.js） 因为这些文件存储在子目录中，所以根目录前面有一个句点, Head.php 文件中的源码需要去掉*困惑了吗？

`

```
<script>
   window.onload = imageProvider.initLinks;
   $(document).ready(modUI.modAccord);

$(".Agthumb").click(function(){
    var location = $(this).attr("src");
    $("#theImage").attr("src", location.substring(1));
    });
 </script> 
```

**JS - imageProvider.js**

```
 var imageProvider = {
thisPic: 0,

initLinks: function () {
    imageProvider.imageList(14, 2);
    document.getElementById("nextPic").onclick = imageProvider.processNext;
    document.getElementById("prevPic").onclick = imageProvider.processPrev;

},

multiDimensionArray:function (rows, columns) {
    var myArray = new Array(rows);
    for (var i = 0; i < rows; i++) {
        myArray[i] = new Array(columns);
        for (var j = 0; j < columns; j++) {
            myArray[i][j] = "";
        }
    }
    return (myArray);
},

imageList:function (qty, data) {
    var imageData = imageProvider.multiDimensionArray(qty, data);
    var filePath = './images/mods/angiograph/head/';
    var imgPrefix = 'Ag';
    var imageType = '.jpg';

    for (var i = 0; i < qty; i++) {
        imageData[i][1] = filePath + imgPrefix + (i + 1) + imageType;
    }

   for (var j = 0; j<imageData.length; j++){
            $("<li>", { html:"<img class='"+ imgPrefix + "thumb' alt='"+ imgPrefix + (j + 1) + "' src=" + imageData[j][1] + " width='75' height='75'/>"}).appendTo("#thumbList");
    }

}
}; 
```

我不认为 css 与这篇文章相关，但我发布它没有问题。让我知道！再次感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T06:15:51.977

我认为这是因为选择首先`$('.Agthumb')`在生成缩略图之前运行（它们是在 window.onload 事件中生成的）。在您的代码中，`$('.Agthumb').length`将返回零。单击处理程序未绑定到任何元素。

您可以使用 jQuery 的`.on()`. jsfiddle 在这里：http: [//jsfiddle.net/HMPjP/](http://jsfiddle.net/HMPjP/)

```
// Used on() to bind click event on thumbnails created
// by imageProvider
$(document).ready(function () {
     $('#thumbList').on('click', '.Agthumb', function() {
          console.log('I was clicked');
          var location = $(this).attr("src");
          $("#theImage").attr("src", location.substring(1));
      });
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-19T01:29:59.217

如果 $ = document.getElementById

那么，我当时的问题是为什么使用中有句号和英镑符号？

所以，这不应该

```
$(".Agthumb") 
```

是：`$("Agthumb")`

# google-docs-api - 何时称其为“Docs”以及何时称其为“Drive”

> ID：11552695
> 
> 赞同：0
> 
> 时间：2012-07-19T01:19:17.743
> 
> 标签：google-docs-api, google-drive-api

所以，快速背景。我制作生产力应用程序（特别是 CRM 和项目管理）。我喜欢 Google 制作的文档、电子表格和演示文稿产品。不出所料，我的产品很长一段时间以来都用 Google Docs 做了很多“事情”：

*   创建“本机”（即文档/电子表格/演示文稿）文档
*   使用本机文档作为模板
*   链接和修改 Docs/Drive 中任何文件的权限
*   上传任意文件
*   等等

我感到困惑的是谷歌希望我在我的应用程序按钮上的标签上做什么。现在，他们都说“Google Docs”。您正在将任意文件链接到演示文稿，您正在从“Google Docs”链接它。您正在导出时间表条目的电子表格，您正在将其导出到“Google Docs”。您上传 PDF，然后将其上传到 Google Docs。等等。

我对此感到困惑，如果我错了，请纠正我，但我认为这不是完全切换到“驱动器”。我仍然在 Google 网站上看到 Google 文档的标签。所以，这就是我认为的细分：

如果它是 Google“本机”文件，那么它就是 Docs，否则就是 Drive。因此，如果您上传任意文件，该按钮应指驱动器。但是，如果您要将数据电子表格导出为 Google 电子表格格式，那就是 Docs。

这完全正确吗？谷歌在某处有一些信息吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T01:34:26.783

免责声明：个人观点

我会在任何地方都使用 Drive，除非专门谈论 Google Drive 中提供的协作文字处理器，即 Google Doc。

我还会确保我的所有集成都使用新的[Google Drive API](http://developers.google.com/drive)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T11:52:11.473

这里有相当好的指导：[https ://developers.google.com/drive/branding](https://developers.google.com/drive/branding)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T01:25:35.440

Google Docs 和 Google Drive 是 Google 的两个独立产品。它们可以一起工作，但它们仍然是各自独立的产品，使用时应称其为各自的名称

# parsing - 手动计算 FIRST 组

> ID：11552698
> 
> 赞同：2
> 
> 时间：2012-07-19T01:19:39.397
> 
> 标签：parsing, compiler-construction, grammar

我有一个小问题一直困扰着我很长一段时间，我一直无法在网上找到合适的答案。

给定一个语法：

`S = Sc | Eab | Db | b`
`D = EDcD | ca | ɛ`
`E = dE | DY`
`Y = Ed | Dad | ɛ`

要找到第一组说 Y，所以 FIRST(Y)，我是否正确假设它是这样的：

`FIRST(Y)`
`= FIRST(Ed) ∪ FIRST(Dad) ∪ FIRST(ɛ)`
`= FIRST(E) ∪ (FIRST(D)\{ɛ}) ∪ FIRST(ad) ∪ {ɛ}`
`= FIRST(E) ∪ (FIRST(D)\{ɛ}) ∪ {a, ɛ}`

现在的问题是如何找到 FIRST(E) 和 FIRST(D)？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T01:37:14.090

因此，FIRST(E) 和 FIRST(D) 的问题在于 E 和 D 相互引用。当您想要一种“最小固定点”时，解决方案是通常的解决方案——从所有内容开始，并不断迭代直到它们稳定。

即：首先，将所有 FIRST 集初始化为空集。现在，反复考虑每个产品，并假设您当前对非终端的 FIRST 集的估计是真实的。（实际上，它们通常会“低估”。）计算出产品告诉您的有关其 LHS 的 FIRST 集的内容，并相应地更新您对该非终端的 FIRST 集的估计。继续这样做，依次处理所有产品，直到您完成所有产品并且您的估计没有改变。到那时，你就完成了。

在这种情况下，事情是这样的（当然，假设我没有犯错）。第一遍依次产生 S: {b}, D: {c,ɛ}, E: {c,d}, Y: {c,d,ɛ}。第二个依次产生 S: {b,c,d}, D: {c,d,ɛ}, E: {c,d,ɛ}, Y: {c,d,ɛ}。第三个不会改变任何一个，所以这些是最终的答案。

# ruby-on-rails - 创建模型之间的关系。导轨 3

> ID：11552699
> 
> 赞同：0
> 
> 时间：2012-07-19T01:20:04.283
> 
> 标签：ruby-on-rails, activerecord, relation

我有两个这样的模型

```
 class User < ActiveRecord::Base

   attr_accessible :email, :password, :password_confirmation, :remember_me, :fname, :lname
 end

 class Course < ActiveRecord::Base

  belongs_to :university
   attr_accessible :course_code, :department, :name, :path, :university_code, :department_code

 set_primary_key :course_code
end 
```

现在一个用户可以参加很多课程，一个课程可以有很多用户。此外，连接表将具有一些属性，例如用户正在学习的课程状态、他可能已完成的讲座等。

我该如何建立关系？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T01:28:23.710

如果课程具有“唯一性”概念，那么您将需要一个中间模型（例如 UserCourseResults），因此在数据库的任何给定状态下，每个课程都可以是唯一的。然后，您只需按如下方式组织：

```
User:
  has_many    :user_course_results
  has_many    :courses, through: user_course_results
Course:
  has_many:   :user_course_results
  has_many:   :users, through: user_course_results
UserCourseResult:
  attr_accessible :result # So each user can have a result on each course, for instance.
  belongs_to  :user
  belongs_to: :course 
```

你看到中间模型的意义了吗？

高温下，

皮埃尔。

编辑：我刚刚看到您的编辑，我想这正是您的想法。您必须记住，用户模型只保存每个用户唯一的数据，课程模型也是如此。所以最好的可能是拥有这个中间的“UserCourseResult”模型，它可以保存任何用户课程特定的数据......这种关系，当你不需要中间数据时，除了用户和课程之间的链接，被称为HABTM（拥有并属于许多）。您应该查看活动记录文档中的这个特定部分（参见 has_many: through => * 和 has_and_belongs_to_many）。

# arrays - 如何从影片剪辑访问主文档类数组？

> ID：11552702
> 
> 赞同：0
> 
> 时间：2012-07-19T01:20:28.827
> 
> 标签：arrays, actionscript-3, flash

我的主目录中有一个数组

```
public var graphArray:Array = [1,2,3,4,5,6]; 
```

我正在尝试从我放在时间轴上的 MovieClip 中访问它：

```
var graph1scale:Number = MovieClip(root).graphArray[0] 
```

看起来这对我来说很有意义，但是当我尝试运行它时，我收到了这个错误：

> TypeError：错误 #1009：无法访问空对象引用的属性或方法。

使用 MovieClip(root) 尝试访问它是不是错了？我才刚刚开始使用外部类（这是我第一个这样做的项目），通常我只是在时间线上做所有事情。所以 MovieClip(root) 对我来说很熟悉，但我想这不是正确的做法。

有没有办法可以从 Main.as 访问变量？

**- - -解决了 - - -**

我意识到 MovieClip(root) 一直都在工作，但我只是在 Main.as 中定义数组之前调用了数组。我延迟调用 graphArray 并且它起作用了。

不知道这有什么意义，因为 graphArray 是我在整个 main.as 类中定义的第一件事

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T02:03:40.913

尝试改用这个

```
MovieClip(this.root) 
```

这对我来说适用于您可以在此处看到的测试：

[http://marksost.com/test/as3arrayaccess/](http://marksost.com/test/as3arrayaccess/)

以及这里的源文件：

[http://marksost.com/test/as3arrayaccess/test.zip](http://marksost.com/test/as3arrayaccess/test.zip)

# iphone - 从 SWF 到 AIR 再到 iOS 应用程序

> ID：11552710
> 
> 赞同：7
> 
> 时间：2012-07-19T01:22:17.287
> 
> 标签：iphone, ios, flash, air, flash-cs5

我有现有的 Flash 应用程序，它编译为 SWF 并在 Web 上运行。我正在考虑将该应用程序转换为在 iPhone/iPad 等移动设备上运行。

我发现现在有一种方法可以[在移动设备上发布 Adob​​e Air 应用程序](http://www.youtube.com/watch?v=_hkfOk8P79s)。我的想法是为什么不[将 SWF 转换为 AIR 应用程序](http://tv.adobe.com/watch/flash-downunder/converting-a-flash-project-to-air/)，然后使用该 AIR 应用程序在移动设备上发布。是否有意义？这甚至可能或可行吗？

人们正在做什么来将他们现有的 Flash SWF 应用程序转换为在移动设备上运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T02:31:57.723

这个问题刚刚[在这里得到解答](https://stackoverflow.com/questions/11481099/can-all-flash-games-be-readily-ported-to-adobe-air-for-deployment-on-ios/11481333#11481333)，但回顾一下，任何 Flash 内容都可以使用 AIR 打包到 iOS 或其他移动设备。

AIR 可以覆盖到 Flash Professional 或 Flash Builder，或者您的 SWF 可以使用 ADT 命令行打包程序打包：

*   下载 AIR 3.0 SDK。
*   确保 JRE，或使用来自 Flash Builder 的 JRE。
*   执行 adt 将 SWF 打包到 IPA：

    ```
    adt -package -target [ipa-test | ipa-debug | ipa-app-store | ipa-ad-hoc]
        -keystore iosPrivateKey.p12 -storetype pkcs12 -storepass qwerty12
        -provisioning-profile ios.mobileprovision
        HelloWorld.ipa
        HelloWorld-app.xml
        HelloWorld.swf icons Default.png 
    ```

请务必注意，所有可执行代码必须驻留在单个 SWF 中才能在 iOS 平台上运行。不支持 SWFLoading 或执行代码的任何动态加载的 SWF。因此，将所有 Flash 链接到一个 SWF。

还有其他考虑因素，例如[优化性能](https://stackoverflow.com/questions/8380789/what-are-the-major-performance-hitters-in-as3-aside-from-rendering-vectors/8380883#8380883)和处理多个屏幕分辨率和纵横比。

参考：

*   [http://www.adobe.com/devnet/air/articles/packaging-air-apps-ios.html](http://www.adobe.com/devnet/air/articles/packaging-air-apps-ios.html)
*   [http://www.adobe.com/devnet/air/articles/packaging-air-apps-android.html](http://www.adobe.com/devnet/air/articles/packaging-air-apps-android.html)
*   [http://www.adobe.com/devnet/air/articles/packaging-air-apps-blackberry.html](http://www.adobe.com/devnet/air/articles/packaging-air-apps-blackberry.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T02:39:49.560

有几种方法可以实现这一点：

1.  您可以下载[Adob​​e AIR SDK](http://www.adobe.com/devnet/air/air-sdk-download.html)，并按照他们的[帮助](http://help.adobe.com/en_US/air/build/WSfffb011ac560372f-5d0f4f25128cc9cd0cb-7ffb.html)或[本教程](http://wiki.colorinfection.com/index.php/How_to_create_an_iPhone_app_from_a_Flash_.swf_file_with_Adobe_AIR_SDK)进行操作。如果您对命令行不满意，这种方法会有点乏味，但它可能是最强大的选项，因为您可以调整和控制很多选项。

2.  如果您有 FLA 文件，最新版本的 Flash CS6 应该为您提供更轻松地创建 IOS IPA 文件的方法。如果您是 Windows 用户，则需要获取 p12 文件以及移动配置文件。Adobe 有关于如何在没有 Mac 的情况下执行此操作的文档。最终，当您的 IPA 适合 AppStore 时，您将需要一台 Mac。

请记住，SWF 的用户体验不会立即适用于 iOS。例如，按钮的大小、交互式用户控件的可提供性以及最重要的鼠标悬停事件有时会对移动应用程序的体验产生不利影响。

但这些问题与 SWF 无关，因为我在其他基于 HTML 的 Web 应用程序中也看到了类似的问题。

祝你好运，我会说编写 Flash 并且它可以在包括 iPhone/iPad 在内的任何地方运行，这确实是大多数人不知道的一件了不起的事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-19T04:12:00.647

我一直在做这件事一年左右。

您必须使用 Mac 上的钥匙串设置您的证书，并且您必须从 Mac 上传应用程序。但是，我没有 Mac 。. . [相反，我使用（ macincloud](http://www.macincloud.com/)或其他）在远程 Mac 上租用时间，并使用 DropBox 来回发送文件。

根据 SWF 的创建方式，您不一定需要购买 Adob​​e 产品。我使用[FlashDevelop](http://www.flashdevelop.org/)，它会自动设置最新的 Air 和 Flex SDK。只要您拥有开发者许可证，就可以从中创建 Air 应用程序，还可以创建 IPA 文件以加载到 iTunes（或 Google Play 或其他）中。

确保您也阅读了@JasonSturges 的回复。好的提示和链接。

# javascript - 如何处理 MongoDB 键名中的点？

> ID：11552711
> 
> 赞同：11
> 
> 时间：2012-07-19T01:22:20.667
> 
> 标签：javascript, node.js, mongodb

我正在 Node 和 MongoDB 中开发这个软件，我基本上想在其中存储具有以下结构的包版本：

```
{
    "versions":
    {
        "1.2.3": { stuff }
    }
} 
```

（类似于 npm 在沙发上做事的方式）

问题是，当我更新 MongoDB 时，我发现它不允许在键名中使用点（由于点符号存在），导致我的代码失败。在研究了这一点之后，我能发现的是，您需要在存储到数据库之前将点转换为其他字符，然后在访问时再次将它们转换回来。真的没有更好的方法来解决这个问题吗？

如果没有，如何在不将数据复制到另一个键并删除原始数据的情况下进行此转换？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T01:29:00.263

您可以使用带有东西的版本集合吗？

喜欢：

```
{
    "versions":
    [
              {
                   "version_num": "1.2.3",
                   "stuff": { stuff }
              },
              {
                   "version_num": "1.2.4",
                   "stuff": { stuff }
              }
    ]
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T01:33:46.010

点限制当前是驱动程序强制执行的，并非所有驱动程序从一开始就阻止字段名称中的点。你可以编写原始协议代码来在 Mongo 中做各种疯狂的事情，包括在集合名称中使用非常奇怪的字符。

如果你清理它（可能用 - 或其他一些有效字符替换点），你会好得多，但是使用任何类型的智能过滤都很难做到这一点。您很可能需要遍历整个集合，在您的应用程序中调整值，然后覆盖文档中的整个“版本”字段。就地覆盖这应该是相当快的，因为它们不会调整文档的大小，并且可能不会更改任何索引。

# php - 是否可以在获取参数完整的情况下重新加载 Symfony2 中的页面？

> ID：11552718
> 
> 赞同：1
> 
> 时间：2012-07-19T01:22:58.050
> 
> 标签：php, symfony, get, routes

在我的网络应用程序中，如果用户登录并点击徽标，我不会以匿名用户身份进入入口页面，而是加载他们的会员主页 URL。它的工作原理是当用户加入或登录时，我生成此路由`$this->generateUrl('member_page'), array('member' => $member->getName()));` 并且我的路由配置为这样，

```
member_page: pattern: /member/{member}/
defaults: { _controller: HomeBundle:Default:member } 
```

它生成这个网址：

```
http://website.com/member/John+joe/ 
```

问题是，当我回忆起路线时，它只显示了这个 url

```
http://website.com/member/ 
```

我曾尝试调用一个新操作并使用`$request->getURI()`，但它不维护动态获取参数。

我试图避免每次单击徽标时调用数据库以获取用户名。任何帮助都会很棒，谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T08:09:36.653

几周前，我不得不做一些非常相似的事情，并从 PagerFantaBundle 中激发了自己。您是否在控制器中尝试过此代码：

```
$request = $this->getRequest();
return $this->redirect($this->generateUrl($request->get('_route'), $request->query->all())); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T01:36:57.930

您可以使用登录后将保存到用户会话中的用户 ID，而不是使用用户名。这也将避免与具有相同名称的用户发生任何冲突。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T12:56:54.607

一种可能的解决方案是在 Twig 中生成正确的路线：

```
{% if app.user %}
   <a href="{{ path('member_page', {'member': app.user.name}) }}">
{% else %}
   <a href="{{ path('your_homepage') }}">
{% endif %}
      <img src="yourlogo.png" />
   </a> 
```

# jquery - 通过 JQuery 导航 Active/Hover/Inactive 状态

> ID：11552723
> 
> 赞同：1
> 
> 时间：2012-07-19T01:23:32.980
> 
> 标签：jquery, css, menu, hover

下面的代码是我所拥有的，但不幸的是它没有做任何事情。以前我有一个部分用于交换图像，但它的代码要简单得多......如果有更简单的方法可以做到这一点，我会全力以赴。

回顾一下我想要完成的是：

登陆主页 > 导航中未选择任何内容 悬停在 - 图像切换到选定状态 单击时图像切换到选定状态。

谢谢你的帮助！

我遇到的另一个问题是艺术家给我的文件在图像中有文字。我有两个不同的图像，一个处于选定状态，带有文本，另一个处于非活动状态，带有文本。所以我不能把文字放在上面。

**jQuery**

```
var menu = {
init: function () {

    $('.nav-image').hover(function () {
        if (!$(this).attr('id') != menu._selectedId + '-nav' && $(this).attr('src').indexOf("_on.png") == -1) {
            var src = $(this).attr('src').replace("_off.png", "_on.png");
            $(this).attr('src', src);
        }
    },

        function () {

            if ((page == "index" && $(this).attr('id') != "index-nav") || (page == "about" && $(this).attr('id') != "about-nav") || (page == "portfolio" && $(this).attr('id') != "portfolio-nav") || (page == "blog" && $(this).attr('id') != "blog-nav") || (page == "contact" && $(this).attr('id') != "contact-nav") || page == "index") {
                if (!$(this).attr('id') != menu._selectedId + '-nav' && $(this).attr('src').indexOf("_on.png") >= 0) {
                    var src = $(this).attr('src').replace("_on.png", "_off.png");
                    $(this).attr('src', src);
                }
            }
        });

}} 
```

**HTML**

```
<div class="menu">
    <div style="float: left; hieght: 45px; width: 193px;"><img src="images/nav/left_end.png" class="nav-image"></div>
    <div style="float: left; height: 45px; width: 73px;"><a href="index.php"><img src="images/nav/home_off.png" class="nav-image" id="index-nav"></a></div>
    <div style="float: left; height: 45px; width: 80px;"><a href="about.php"><img src="images/nav/about_off.png" class="nav-image" id="about-nav"></a></div>
    <div style="float: left; height: 45px; width: 112px;"><a href="portfolio.php"><img src="images/nav/portfolio_off.png" class="nav-image" id="portfolio-nav"></a></div>
    <div style="float: left; height: 45px; width: 69px;"><a href="http://info.arkmediainc.com/blog"><img src="images/nav/blog_off.png" class="nav-image" id="blog-nav"></a></div>
    <div style="float: left; height: 45px; width: 98px;"><a href="http://info.arkmediainc.com/contact-us"><img src="images/nav/contact_off.png" class="nav-image" id="contact-nav"></a></div>
    <div style="float: left; height: 45px; width: 35px;"><img src="images/nav/right_end.png"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T01:52:43.343

你可以让 CSS 为你做这件事。

每个 div 可以是任何菜单项的背景图像，这也可以让您在其上放置文本。

[然后使用与此示例](http://css-tricks.com/hover-on-everything-but/)类似的代码。

因此，对于每个链接，您可以拥有更简洁的代码：

```
<div class="nav home"><a href="index.php">Home</a></div>

<script>
jQuery('.nav').click(function() {
    jQuery(this).css("background-image",jQuery(this).css("background-image").replace("on","clicked");
});
<script>

<style>
.nav {
    float: left; 
    height: 45px; 
    width: 73px;;
}

.home {
    background-image: url("images/nav/home_off.png");
    }

.home:hover {
    background-image: url("images/nav/home_on.png");
    }

</style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T01:54:14.387

我认为如果您将 css 中的图像作为背景图像放入 2 个类，然后只需切换元素上的类会更容易。

# spring - 如何防止 Maven 在可部署战争中包含某些依赖项？

> ID：11552724
> 
> 赞同：1
> 
> 时间：2012-07-19T01:23:37.310
> 
> 标签：spring, security, maven, dependency-management

我正在将使用 Spring security 3.0 的应用程序迁移到 Spring security 3.1。

我收到有关引用不正确架构的错误：

```
SEVERE: Exception sending context initialized event to listener instance of class    
org.springframework.web.context.ContextLoaderListener
org.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration    
problem: You must use a 3.0 schema with Spring Security 3.0.(2.0 or 3.1 versions are not  
valid) Please update your schema declarations to the 3.0.3 schema (spring-security- 
3.0.3.xsd).
Offending resource: ServletContext resource [/WEB-INF/security-context.xml] 
```

当我查看 /lib 时，我看到许多 3.1 版本的 jar 被复制为 3.0 版本。我怀疑这是导致上述错误的原因。

当我使用 Eclipse Maven 插件查看 pom.xml 的依赖关系树时，我可以看到引用早期版本的位置（例如 spring-security-acl 依赖于几个 3.0 jar），但它们被标记为“因冲突而忽略”和...'。这是否意味着它们应该从构建的战争文件中省略？

我已经尝试在我的 pom 根目录中明确命名这些文件的 3.1 版本，但旧版本仍然包含在内。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T05:24:38.653

> 违规资源：ServletContext 资源 [/WEB-INF/security-context.xml]

实际上，该消息表明`security-context.xml`使用了与 spring-security-3.1 不兼容的架构/声明。该消息要求您改用 3.0 版本的库。您可能需要查看和更新​​它并重试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T13:14:05.073

我仍然不确定发生了什么，但我尝试在 Eclipse 中使用相同的 pom 和源文件创建一个新项目，现在该项目似乎可以正常运行。

# database - 是否有管理小型非事务性查找表的标准/最佳实践？

> ID：11552725
> 
> 赞同：2
> 
> 时间：2012-07-19T01:23:38.917
> 
> 标签：database, database-design, enums, standards

我有一个 ERP 应用程序，其中包含大约 50 个包含非事务性数据的小型查找表。示例是 ItemTypes、SalesOrderStatuses 等。有很多不同的类型、类别和状态，并且每个新模块都添加了新的查找表。我有一项服务可以从这些表中提供 List 对象。这些表通常只包含两列（Id 和 Description）。它们只有几行，最多 8 到 10 行。

我正在考虑将它们全部放在一个带有 ID、描述和 LookupTypeID 的表中。有了这张桌子，我就可以摆脱 50 张桌子。这是个好主意吗？馊主意？很坏的主意？

是否有管理小型查找表的标准/最佳实践？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T06:30:31.710

在一些专业人士中，单一的通用查找表是您应该避免的设计错误。至少，它会降低性能。原因是您必须有一个公共表的复合主键，并且通过复合键查找比通过简单键查找要花费更长的时间。

根据 Anith Sen 的说法，这是您应该避免的五个设计错误中的第一个。见这篇文章：[五个简单的设计错误](http://www.simple-talk.com/sql/database-administration/five-simple--database-design-errors-you-should-avoid/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T06:34:05.320

您可以将它们存储在文本搜索（即 nosql）数据库中，例如[Lucene](http://lucene.apache.org)。他们的速度快得离谱。

我已经实现了这一点，效果很好。请注意，虽然有一些初始设置需要克服，但并不多。Lucene 对 id 的查询非常容易编写。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T07:51:28.113

如果您关心数据的完整性（并且应该！），合并查找表是一个坏主意：

*   它将允许“客户”表引用它们不打算引用的数据。例如，DBMS 不会保护您免于引用`SalesOrderStatuses`仅`ItemTypes`应允许的位置 - 它们现在位于同一个表中，您无法（轻松）分离相应的 FK。
*   它将强制所有查找数据共享相同的列和类型。

除非由于过多的 JOIN 导致性能问题，否则我建议您保留当前的设计。

如果这样做，那么您可以考虑在查找表中使用自然键而不是代理键。这样，自然键通过外键“传播”到“客户端”表，从而减少了对 JOINing 的需求，但代价是增加了存储空间。例如，不是`ItemTypes {Id PK, Description AK}`have ，只有 have `ItemTypes {Description PK}`，并且您不再需要 JOIN`ItemTypes`来获得`Description`- 它会自动传播到 FK。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T21:07:38.130

“一个大查找表”方法存在允许愚蠢值的问题 - 例如，当您只有具有“颜色：黄色”的汽车时，库存中的卡车为“颜色：黄色”。一张大查找表：说不。

副手，我会使用查找表的自然键，除非您遇到诸如“2012 年型号 CX300R 是红色但 2010-2011 年型号 CX300R 是蓝色（并且型号 ID 也表示颜色）”之类的情况。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T06:44:16.833

传统上，如果您询问 DBA，他们会说您应该有单独的表。如果你问程序员，他们会说使用单表更容易。（使编辑状态网页变得非常容易，您只需制作一个网页并将其传递给不同的 LookupTypeID 而不是许多类似的页面）

然而，现在使用 ORM 访问不同状态表的 SQL 和代码实际上并没有任何额外的努力。

我已经使用了这两种方法，并且都可以正常工作。我必须承认使用单个状态表是最简单的。我已经为小型应用程序和企业应用程序做了这个，并没有注意到性能影响。

最后，我通常喜欢在这些通用状态表上添加的另一个字段是 OrderBy 字段，因此您可以根据需要按描述以外的其他内容对 UI 中的状态进行排序。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-19T02:10:26.523

对我来说听起来是个好主意。您可以将 ID 和 LookupTypeID 作为多属性主键。你只需要知道所有不同的 LookupTypeID 代表什么，你就应该像黄金一样优秀。

编辑：至于标准/最佳实践，老实说，我没有给你答案。我只有一个学期的 SQL/数据库设计，所以我对这件事还不太了解。

# c# - 字符串格式化为百分比以及如何处理空值？

> ID：11552729
> 
> 赞同：0
> 
> 时间：2012-07-19T01:24:05.647
> 
> 标签：c#, asp.net, string, gridview, formatting

您好，我在 gridview 中有一个绑定字段，我将其格式化为显示为百分比。一切正常，但是当列有空值时，它会抛出错误。你能否让我知道一种解决空值的方法。

```
 <asp:BoundField DataField="ip_per" SortExpression="ip_per" DataFormatString="{0.0%}" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T01:27:56.267

你可以设置 `NullDisplayText`.

```
 <asp:BoundField DataField="ip_per" 
                 SortExpression="ip_per"
                 NullDisplayText=""
                 DataFormatString="{0.0%}" /> 
```

# ruby-on-rails - 在 Rails 中的视图之间传递参数

> ID：11552732
> 
> 赞同：0
> 
> 时间：2012-07-19T01:24:50.617
> 
> 标签：ruby-on-rails

我正在尝试完成这样的事情：

我正在创建一个简单的博客。我已经为我的博客设置了类别。我希望当我的用户转到帖子/索引时，他会看到所有类别的列表。

示例：文本图像

单击类别后，我的用户将被重定向到帖子/新页面，其中 category_id 字段将通过 hidden_​​field 传输。

所以我现在的代码是：

在帖子/索引中

```
<% @categories.each do |c| %> 
  <%= link_to c.name, new_post_path(:category => c.id) %><br />
<% end %> 
```

在我的帖子/_form 中，我正在尝试做这样的事情

```
<%= f.hidden_field :category_id, :value => params[:category_id] %> 
```

但这是行不通的，因为 html 输出是

没有值被传递。

在这里进行的正确方法是什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T01:27:50.090

乍一看，混淆了参数名称 category 和 category_id 似乎是一个简单的错误。

尝试这个：

```
<% @categories.each do |c| %> 
  <%= link_to c.name, new_post_path(:category_id => c.id) %><br />
<% end %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T01:42:52.153

另外，根据我在您的代码中的理解，似乎帖子属于一个类别。在这种情况下，您可以将一个路由嵌套在另一个路由中，并且可以访问创建嵌套对象的路径，例如 new_category_post(@category)。

路由看起来像这样：

```
resources :categories do
  resources :posts
end 
```

您可以在此处阅读有关此问题的信息：http: [//guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)

# php - 正则表达式是在 HTML 中搜索某些文本组合的唯一方法，还是在这种情况下我可以使用 XPath？

> ID：11552733
> 
> 赞同：0
> 
> 时间：2012-07-19T01:24:54.493
> 
> 标签：php, html, dom, xpath

我已经阅读了一种在 php 5.3+ 中将正则表达式与 xpath 一起使用的方法，但我没有该版本，并且由于某些原因无法升级。

所以我想知道是否有一种方法可以使用 Xpath 实现以下目标，或者我应该坚持使用正则表达式。我希望能够检查 HTML 文档是否包含/匹配以下某些内容：

*   `{Powered by|Script Source:|....} <a href='some-domain.com'>Text 1|Text 2|...</a> [e.g. should match: Powered by <a href='http://wordpress.com'>Wordpress</a>`

*   `<img src='....' alt='img-[0-9]-[a-zA-Z].(jpg|png)'>`

*   `<script src='contains particular script'>`

有没有办法通过 xpath 查询实现上述任何条件，同时又不影响速度和效率？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:27:23.920

这是一个带有[简单 HTML DOM](http://simplehtmldom.sourceforge.net)的 PHP 脚本：

[例子](http://shaquin.tk/experiments/htmldom-test.php)。

我已将代码和结果放在该页面上。

字符串/URLs/`src`可以放在一个数组中。

当它在一个数组中循环时，它会测试链接`href`和内容、`script` `src`和 与`img` `src`正则表达式匹配。

# routes - Kohana 模块路由优先级

> ID：11552737
> 
> 赞同：0
> 
> 时间：2012-07-19T01:25:32.957
> 
> 标签：routes, kohana

我正在创建一个 Kohana 模块，并在该模块中动态创建一个路由。我希望该路线优先于应用程序其余部分中的路线。（特别是默认的，包罗万象的路线）。

关于如何做到这一点的任何想法？

谢谢！

====== 更新：

我想我忘了提到我正在动态加载模块，如下所示：

```
Kohana::modules(array_merge(array($module_name=>$directory), Kohana::modules())); 
```

然后我正在为模块运行 HMVC 请求，如下所示：

```
$response = Request::factory('versioned-api')
            ->method('POST')
            ->secure(true)
            ->post(array('data'=>serialize($request))) // Performing a straightforward POST
            ->execute(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T04:52:12.267

Kohana（从 3.2 开始）模块和路由优先级的一些背景知识：

1.  `Kohana::modules`模块按调用顺序进行初始化。根据所需的路由优先级，这一点很重要。在您的示例中，`Kohana::modules(array_merge(array($module_name=>$directory), Kohana::modules()));`已放置的任何模块`Kohana::modules()`都已初始化。即使您将新模块合并到列表的开头，模块也会在`Kohana::modules()`调用时被初始化。如果您查看“system/classes/kohana/core.php”第 565 行，您会注意到“init.php”需要一次（如果存在于模块中）。
2.  路由按照添加的顺序进行匹配。如果使用相同的路由名称，它们也会被覆盖。

总之，在 Kohana 中没有办法将 Route 推送到列表的开头。当然，保证首先加载有问题的模块会解决您的问题（只要以后不覆盖路由）。如果您可以透明地扩展 Route，如果稍后通过将路由添加到堆栈的开头来加载模块，则可以通过以下方式完成此操作：

GitHub Gist（包括单元测试）：[https ://gist.github.com/3148737](https://gist.github.com/3148737)

```
<?php defined('SYSPATH') or die('No direct script access.');
/**
 * Route transparently extended. Place in "classes" directory of Kohana 3+ application or module.
 */
class Route extends Kohana_Route
{
    /**
     * Prepend Route to beginning of stack. If name already exists further in the stack, it is 
     * removed.
     * 
     *  Route::prepend('default', '(<controller>(/<action>(/<id>)))')
     *      ->defaults(array(
     *          'controller' => 'welcome'
     *      ));
     * 
     * @static
     * @access  public
     * @param   string   route name
     * @param   string   URI pattern
     * @param   array    regex patterns for route keys
     * @return  Route
     */
    public static function prepend($name, $uri_callback = NULL, $regex = NULL)
    {
        // Ensure entry does not already exist so it can be added to the beginning of the stack
        if (isset(Route::$_routes[$name]))
        {
            unset(Route::$_routes[$name]);
        }

        // Create reference
        Route::$_routes = array_merge(array($name => NULL), Route::$_routes);

        // Overwrite reference
        return Route::$_routes[$name] = new Route($uri_callback, $regex);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T06:33:01.990

这是一个简单的路由示例：

```
// APPPATH/bootstrap.php
// define route before module loading
Route::set('route1', ...);
// load module list
Kohana::module(array(
    'module1'  => 'module1',
    'module2'  => 'module2',
));
Route::set('catch-all', ...); 
```

module1 和`mroute1`module2`mroute2`在`init.php`. 所以，Kohana 将使用这个路由序列：

```
 1\. `route1`    // defined in bootstrap before modules
 2\. `mroute1`   // from first module
 3\. `mroute2`   // from second module
 4\. `catch-all` // this one was loaded after all modules 
```

1.  请注意，如果您在模块控制器或任何助手中的某处创建路由，它将在`catch-all`路由之后添加。
2.  您可以更改模块顺序：`Kohana::modules(array('module3' => 'module3') + Kohana::modules());`将重新排列您的模块并将`module3`在列表中排在第一位。但是，这不会影响模块初始化的顺序。之前的任何`Kohana::modules`调用都已初始化。尽管该模块现在位于列表的开头，但它是在其他模块之后初始化的（请参阅[http://kohanaframework.org/3.2/guide/api/Kohana_Core#modules](http://kohanaframework.org/3.2/guide/api/Kohana_Core#modules)）。

# sql - 逗号分隔一列的结果以显示在另一列旁边？

> ID：11552742
> 
> 赞同：1
> 
> 时间：2012-07-19T01:26:39.137
> 
> 标签：sql, sql-server-2008, tsql

我有一张桌子：

> 租约 ID、套件 ID

租赁是一把钥匙，您可以在一个租赁中拥有多个套房。我正在尝试创建一个查询，向我显示与租约关联的所有套件，本质上是如下输出：

> 租赁 ID：1 套件列表：A1、A2、B1

不幸的是，我不确定如何解决这个问题（甚至如何开始），因为这对我来说是一种新的问题......任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T01:49:02.390

您可以使用 FOR XML。

代码将是这样的：

```
-- Sample data tables
select *
into #leases
from (
    select '1' as lease_id
    union 
    select '2' as lease_id
    ) a

select *
into #leaseSuites
from (
    select '1' as lease_id,
        'A1' as suite_id
    union 
    select '1' as lease_id,
        'A2' as suite_id
    union
    select '1' as lease_id,
        'B1' as suite_id
    union 
    select '2' as lease_id,
        'C2' as suite_id
    union
    select '2' as lease_id,
        'B3' as suite_id        
    ) a 

-- Creates comma delimited with child table.
select left(suite_list, LEN(suite_list) - 1) as suite_list
from (
    SELECT 'lease_id: ' + lease_id + ' ' +
      'suite_list: ' + (
      SELECT s.suite_id + ','
      FROM #leaseSuites s
      WHERE l.lease_id = s.lease_id
      ORDER BY s.suite_id
      FOR XML PATH('')
      ) AS suite_list
    FROM #leases l ) a 
```

单击[此处](http://blog.namwarrizvi.com/?p=140)查看带有示例的文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T02:25:17.453

我假设你的桌子叫做 LeasedSuites。

我们需要一个函数：

```
 create function dbo.AllSuite (@l int) returns varchar(100)
     as begin
       declare @v varchar(2);
       declare @r varchar(100);

       DECLARE sc CURSOR FOR select suite_id from LeasedSuites where lease_id = @l
       OPEN sc
       FETCH NEXT FROM sc INTO @v
       WHILE @@FETCH_STATUS = 0 BEGIN
         select @r = @r + ',' + @v;
         FETCH NEXT FROM sc INTO @v
       END
       CLOSE sc
       DEALLOCATE sc

       return substring(@r, 2, len(@r) - 1);
     end 
```

和一个查询：

```
 declare @l int;

     create table #out (lease_id int, suite_str varchar(100) null)
     insert #out (lease_id) select distinct lease_id from LeasedSuites

     while (select count(*) from #out where suite_str is null) > 0 begin
       select @l = min(lease_id) from #out where suite_str is null;
       update #out set suite_str = dbo.AllSuite(@l) where lease_id = @l;
     end

     select 'Lease ID: ' + cast(lease_id as varchar(3)) + ' Suites: ' + suite_str from #out order by l; 
```

希望这可以帮助。问候 JB

如果这代表答案，请标记为答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T03:18:13.097

我最终以两种方式解决了这个问题。我的第一种方法，不幸的是很慢是：

```
declare @period_id  integer =
                (
                     select period_id
                     from   property.period
                     where  getdate() between period_start and period_end
                 )

;with cte_data as
(
    select  lp.*
    from    property.lease_period lp
    where   period_id = @period_id
)       
, cte_suites as
(
    select  d.lease_id
        ,   (
                select stuff
                ( 
                    (   select ', ' + a.suite_id
                        from 
                        (   select  a.suite_id
                            from    cte_data a
                            where   a.lease_id = d.lease_id
                         ) a
                        for xml path(''))
                     , 1, 2, ''
                ) as suite_list 
            ) suite_list

    from    cte_data d
    group by d.lease_id
) ,
cte_count as
(
    select  lease_id ,
            count(suite_id) as 'suites'
    from    property.lease_period
    where   period_id = @period_id
            and lease_id <> 'No Lease'
    group by lease_id

)
select  d.period_id , 
        d.building_id , 
        d.lease_id , 
        s.suite_list
from    cte_data d
        left outer join cte_suites s
            on d.lease_id = s.lease_id
        inner join cte_count c
            on d.lease_id = c.lease_id
where   period_id = 270
        and d.lease_id <> 'No Lease'
        and c.suites > 1
group by 
        d.period_id , 
        d.building_id , 
        d.lease_id , 
        s.suite_list 
```

然后我将其剥离并以新的方向重新接近它，结果如下（快得多）：

```
declare @period_id  integer =
            (
                 select period_id
                 from   property.period
                 where  getdate() between period_start and period_end
             )

;with CteLeaseInMultSuites as 
(
    select  period_id, 
            building_id,
            lease_id
    from    property.lease_period
    where   period_id = @period_id
            and lease_id <> 'No Lease'
    group by 
            period_id, 
            building_id, 
            lease_id
    having  count(*) > 1
)

select  period_id, 
        building_id, 
        lease_id, 
        left(x.suite_list, len(x.suite_list) - 1) as suite_list
from    CteLeaseInMultSuites lm
        cross apply
        (
            select  suite_id + ', '
            from    CteLeaseInMultSuites lmx
                    inner join property.lease_period lp
                        on lp.period_id = lmx.period_id
                        and lp.building_id = lmx.building_id
                        and lp.lease_id = lmx.lease_id
            where   lmx.period_id = lm.period_id
                    and lmx.building_id = lm.building_id
                    and lmx.lease_id = lm.lease_id
            for xml path('')
        ) x (suite_list) 
```

# database-backups - 数据库备份、删除事务日志、收缩、删除非聚集索引、重建表填充因子 100%、压缩

> ID：11552743
> 
> 赞同：0
> 
> 时间：2012-07-19T01:26:51.977
> 
> 标签：database-backups, transaction-log, data-compression

首先让我说我是一名开发人员，我只是在进行数据库备份以进行错误测试/修复。

我想获得我正在删除的备份的大小，因为目前将备份发布给我会比通过 Intranet 传输它们更快，并且在我的开发系统上恢复任何备份后我做的第一件事就是 drop无论如何都要缩小事务日志。

有没有办法使用 SQL Server Managment Studio 2005 进行不包括事务日志或非聚集索引表的备份，并且可以重建备份中的表，使其填充因子为 100%，然后压缩备份文件？

或者至少有一种方法可以进行不包含事务日志的备份？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T00:25:57.057

我得到了一个脚本，它可以备份数据库并更改表上的填充因子并删除索引并创建一个脚本以在恢复它们时重新创建它们，但它对之后数据库的最终大小没有太大影响压缩，所以坚持只是备份数据库，然后使用 7zip 压缩它。

# asp.net - 如何将文本颜色设置为红色以获得gridview中的最大值？

> ID：11552755
> 
> 赞同：0
> 
> 时间：2012-07-19T01:29:12.790
> 
> 标签：asp.net, vb.net

我想将gridview中的'LeadTime'的最大值设置为红色。

```
 If e.Row.RowType = DataControlRowType.DataRow Then
            Dim LeadTime As Integer = Convert.ToInt32(DataBinder.Eval(e.Row.DataItem, "LeadTime"))
            If LeadTime > 0 Then
                e.Row.ForeColor = System.Drawing.Color.Blue
       End If
End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T06:13:55.987

首先，您需要遍历 Grid View 的所有行以找到 Lead Time 的最高值，例如：

```
int maxLeadTime=0;
int maxRowIndex=0;
for(int i=0;i<yourGv.Rows.Count;i++)
{
    int currentLeadTime =Convert.ToInt32(yourGv.Rows[i].FindControl("idOfControlStoresLeadTime").ToString());
    if(maxLeadTime<currentLeadTime)
    {
        maxLeadTime=currentLeadTime;
        maxRowIndex=i;
    }
} 
```

现在您可以使用以下方法设置该行的颜色：

```
yourGv.Rows[maxRowIndex].ForeColor = System.Drawing.Color.Red; 
```

上述解决方案会将前置时间最高值的前景色设置为红色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T03:11:12.273

有很多方法可以做到这一点。最简单的一个（我认为）是获取max(LeadTime) 的行*索引*。

```
gridView1.Rows(obtainedRowIndex).ForeColor=System.Drawing.Color.Blue 
```

# gradle - Gradle脚本无法解析工件

> ID：11552756
> 
> 赞同：6
> 
> 时间：2012-07-19T01:29:23.953
> 
> 标签：gradle, artifactory

我正在使用 Gradle 访问 Artifactory。Artifactory 具有特定的依赖关系，但不知何故 gradle 无法向 Artifactory 发送任何请求。即使我试图清理缓存并运行`gradle build`命令来获取文件。但我没有取得任何成功。通过 gradle.build 文件如下。

```
buildscript {
    repositories {
        maven { url 'http://repo.jfrog.org/artifactory/gradle-plugins' }
    }
    dependencies {
        classpath(group: 'org.jfrog.buildinfo', name: 'build-info-extractor-gradle', version: '2.0.12')
    }
}

apply plugin: 'maven'
apply plugin: 'artifactory'
apply plugin: 'java'

repositories {
    maven {
      url 'http://artifactory/repo'
    } 
}

group = 'com.locationlabs'
version = '1.1'

artifacts {
   archives file("${project.name}-${project.version}-jstest.txt")

}

artifactory {
    contextUrl = 'http://artifactory'
    publish {
       repository {
          repoKey = 'autotest' 
          username = 'rakesh.kumar'  
          password = 'password'
       }
       defaults {
          publishBuildInfo = true
          publishArtifacts = true
          publishPom = true
          publishIvy = false
       }
    }
}

artifactoryPublish {
   publishConfigs('archives')
}

dependencies {
  compile group: 'com.locationlabs', name: 'gradletest', version: '1.0', classifier: 'jstest', ext: 'txt'
 } 
```

每当我运行 gradle 脚本时，它都会失败并出现以下异常和堆栈跟踪。

```
akesh.kumar@rakesh:~/automation/gradletest$ gradle build --stacktrace
:compileJava

FAILURE: Build failed with an exception.

* What went wrong:
Could not resolve all dependencies for configuration ':compile'.
> java.lang.NullPointerException (no error message)

* Try:
Run with --info or --debug option to get more log output.

* Exception is:
org.gradle.api.artifacts.ResolveException: Could not resolve all dependencies for configuration ':compile'.
    at org.gradle.api.internal.artifacts.ivyservice.ErrorHandlingArtifactDependencyResolver.wrapException(ErrorHandlingArtifactDependencyResolver.java:47)
    at org.gradle.api.internal.artifacts.ivyservice.ErrorHandlingArtifactDependencyResolver.access$000(ErrorHandlingArtifactDependencyResolver.java:26)
    at org.gradle.api.internal.artifacts.ivyservice.ErrorHandlingArtifactDependencyResolver$BrokenResolvedConfiguration.rethrowFailure(ErrorHandlingArtifactDependencyResolver.java:127)
    at org.gradle.api.internal.artifacts.configurations.DefaultConfiguration$ConfigurationFileCollection.getFiles(DefaultConfiguration.java:458)
    at org.gradle.api.internal.artifacts.configurations.DefaultConfiguration.getFiles(DefaultConfiguration.java:203)
    at org.gradle.api.internal.artifacts.configurations.DefaultConfiguration_Decorated.getFiles(Unknown Source)
    at org.gradle.api.internal.file.collections.DefaultFileCollectionResolveContext$FileTreeConverter.convertInto(DefaultFileCollectionResolveContext.java:191)
    at org.gradle.api.internal.file.collections.DefaultFileCollectionResolveContext.doResolve(DefaultFileCollectionResolveContext.java:103)
    at org.gradle.api.internal.file.collections.DefaultFileCollectionResolveContext.resolveAsFileTrees(DefaultFileCollectionResolveContext.java:75)
    at org.gradle.api.internal.file.collections.DefaultFileCollectionResolveContext$FileTreeConverter.convertInto(DefaultFileCollectionResolveContext.java:182)
    at org.gradle.api.internal.file.collections.DefaultFileCollectionResolveContext.doResolve(DefaultFileCollectionResolveContext.java:98)
    at org.gradle.api.internal.file.collections.DefaultFileCollectionResolveContext.resolveAsFileTrees(DefaultFileCollectionResolveContext.java:75)
    at org.gradle.api.internal.file.CompositeFileCollection$1.resolve(CompositeFileCollection.java:88)
    at org.gradle.api.internal.file.CompositeFileCollection.getSourceCollections(CompositeFileCollection.java:143)
    at org.gradle.api.internal.file.CompositeFileTree.getSourceCollections(CompositeFileTree.java:30)
    at org.gradle.api.internal.file.CompositeFileCollection.getFiles(CompositeFileCollection.java:38)
    at org.gradle.api.internal.file.AbstractFileCollection.iterator(AbstractFileCollection.java:60)
    at org.gradle.api.internal.changedetection.DefaultFileSnapshotter.snapshot(DefaultFileSnapshotter.java:42)
    at org.gradle.api.internal.changedetection.InputFilesChangedUpToDateRule.create(InputFilesChangedUpToDateRule.java:35)
    at org.gradle.api.internal.changedetection.CompositeUpToDateRule.create(CompositeUpToDateRule.java:35)
    at org.gradle.api.internal.changedetection.DefaultTaskArtifactStateRepository$HistoricExecution.calcCurrentState(DefaultTaskArtifactStateRepository.java:80)
    at org.gradle.api.internal.changedetection.DefaultTaskArtifactStateRepository$HistoricExecution.isUpToDate(DefaultTaskArtifactStateRepository.java:88)
    at org.gradle.api.internal.changedetection.DefaultTaskArtifactStateRepository$TaskArtifactStateImpl.isUpToDate(DefaultTaskArtifactStateRepository.java:128)
    at org.gradle.api.internal.changedetection.ShortCircuitTaskArtifactStateRepository$ShortCircuitArtifactState.isUpToDate(ShortCircuitTaskArtifactStateRepository.java:77)
    at org.gradle.api.internal.changedetection.FileCacheBroadcastTaskArtifactStateRepository$1.isUpToDate(FileCacheBroadcastTaskArtifactStateRepository.java:37)
    at org.gradle.api.internal.tasks.execution.SkipUpToDateTaskExecuter.execute(SkipUpToDateTaskExecuter.java:44)
    at org.gradle.api.internal.tasks.execution.ValidatingTaskExecuter.execute(ValidatingTaskExecuter.java:57)
    at org.gradle.api.internal.tasks.execution.SkipEmptySourceFilesTaskExecuter.execute(SkipEmptySourceFilesTaskExecuter.java:41)
    at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:51)
    at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:52)
    at org.gradle.api.internal.tasks.execution.ExecuteAtMostOnceTaskExecuter.execute(ExecuteAtMostOnceTaskExecuter.java:42)
    at org.gradle.api.internal.AbstractTask.executeWithoutThrowingTaskFailure(AbstractTask.java:247)
    at org.gradle.execution.DefaultTaskGraphExecuter.executeTask(DefaultTaskGraphExecuter.java:192)
    at org.gradle.execution.DefaultTaskGraphExecuter.doExecute(DefaultTaskGraphExecuter.java:177)
    at org.gradle.execution.DefaultTaskGraphExecuter.execute(DefaultTaskGraphExecuter.java:83)
    at org.gradle.execution.SelectedTaskExecutionAction.execute(SelectedTaskExecutionAction.java:36)
    at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:61)
    at org.gradle.execution.DefaultBuildExecuter.access$200(DefaultBuildExecuter.java:23)
    at org.gradle.execution.DefaultBuildExecuter$2.proceed(DefaultBuildExecuter.java:67)
    at org.gradle.api.internal.changedetection.TaskCacheLockHandlingBuildExecuter$1.run(TaskCacheLockHandlingBuildExecuter.java:31)
    at org.gradle.cache.internal.DefaultCacheAccess$1.create(DefaultCacheAccess.java:111)
    at org.gradle.cache.internal.DefaultCacheAccess.useCache(DefaultCacheAccess.java:126)
    at org.gradle.cache.internal.DefaultCacheAccess.useCache(DefaultCacheAccess.java:109)
    at org.gradle.cache.internal.DefaultPersistentDirectoryStore.useCache(DefaultPersistentDirectoryStore.java:103)
    at org.gradle.api.internal.changedetection.DefaultTaskArtifactStateCacheAccess.useCache(DefaultTaskArtifactStateCacheAccess.java:79)
    at org.gradle.api.internal.changedetection.TaskCacheLockHandlingBuildExecuter.execute(TaskCacheLockHandlingBuildExecuter.java:29)
    at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:61)
    at org.gradle.execution.DefaultBuildExecuter.access$200(DefaultBuildExecuter.java:23)
    at org.gradle.execution.DefaultBuildExecuter$2.proceed(DefaultBuildExecuter.java:67)
    at org.gradle.execution.DryRunBuildExecutionAction.execute(DryRunBuildExecutionAction.java:32)
    at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:61)
    at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:54)
    at org.gradle.initialization.DefaultGradleLauncher.doBuildStages(DefaultGradleLauncher.java:155)
    at org.gradle.initialization.DefaultGradleLauncher.doBuild(DefaultGradleLauncher.java:110)
    at org.gradle.initialization.DefaultGradleLauncher.run(DefaultGradleLauncher.java:78)
    at org.gradle.launcher.cli.RunBuildAction.execute(RunBuildAction.java:42)
    at org.gradle.launcher.cli.RunBuildAction.execute(RunBuildAction.java:28)
    at org.gradle.launcher.cli.CommandLineActionFactory$ParseAndBuildAction.execute(CommandLineActionFactory.java:201)
    at org.gradle.launcher.cli.CommandLineActionFactory$ParseAndBuildAction.execute(CommandLineActionFactory.java:174)
    at org.gradle.launcher.cli.CommandLineActionFactory$WithLogging.execute(CommandLineActionFactory.java:170)
    at org.gradle.launcher.cli.CommandLineActionFactory$WithLogging.execute(CommandLineActionFactory.java:139)
    at org.gradle.launcher.exec.ExceptionReportingAction.execute(ExceptionReportingAction.java:31)
    at org.gradle.launcher.exec.ExceptionReportingAction.execute(ExceptionReportingAction.java:20)
    at org.gradle.launcher.Main.doAction(Main.java:48)
    at org.gradle.launcher.exec.EntryPoint.run(EntryPoint.java:45)
    at org.gradle.launcher.Main.main(Main.java:39)
    at org.gradle.launcher.ProcessBootstrap.runNoExit(ProcessBootstrap.java:50)
    at org.gradle.launcher.ProcessBootstrap.run(ProcessBootstrap.java:32)
    at org.gradle.launcher.GradleMain.main(GradleMain.java:24)
Caused by: java.lang.NullPointerException
    at org.gradle.api.internal.artifacts.ivyservice.resolveengine.DependencyGraphBuilder$ConfigurationNode.getArtifacts(DependencyGraphBuilder.java:651)
    at org.gradle.api.internal.artifacts.ivyservice.resolveengine.DependencyGraphBuilder$DependencyEdge.attachToParents(DependencyGraphBuilder.java:356)
    at org.gradle.api.internal.artifacts.ivyservice.resolveengine.DependencyGraphBuilder$ConfigurationNode.attachToParents(DependencyGraphBuilder.java:764)
    at org.gradle.api.internal.artifacts.ivyservice.resolveengine.DependencyGraphBuilder.assembleResult(DependencyGraphBuilder.java:140)
    at org.gradle.api.internal.artifacts.ivyservice.resolveengine.DependencyGraphBuilder.resolve(DependencyGraphBuilder.java:56)
    at org.gradle.api.internal.artifacts.ivyservice.resolveengine.DefaultDependencyResolver.resolve(DefaultDependencyResolver.java:67)
    at org.gradle.api.internal.artifacts.ivyservice.CacheLockingArtifactDependencyResolver$1.create(CacheLockingArtifactDependencyResolver.java:36)
    at org.gradle.api.internal.artifacts.ivyservice.CacheLockingArtifactDependencyResolver$1.create(CacheLockingArtifactDependencyResolver.java:34)
    at org.gradle.cache.internal.DefaultCacheAccess.useCache(DefaultCacheAccess.java:126)
    at org.gradle.cache.internal.DefaultPersistentDirectoryStore.useCache(DefaultPersistentDirectoryStore.java:99)
    at org.gradle.api.internal.artifacts.ivyservice.DefaultCacheLockingManager.useCache(DefaultCacheLockingManager.java:49)
    at org.gradle.api.internal.artifacts.ivyservice.CacheLockingArtifactDependencyResolver.resolve(CacheLockingArtifactDependencyResolver.java:34)
    at org.gradle.api.internal.artifacts.ivyservice.SelfResolvingDependencyResolver.resolve(SelfResolvingDependencyResolver.java:42)
    at org.gradle.api.internal.artifacts.ivyservice.ShortcircuitEmptyConfigsArtifactDependencyResolver.resolve(ShortcircuitEmptyConfigsArtifactDependencyResolver.java:78)
    at org.gradle.api.internal.artifacts.ivyservice.ErrorHandlingArtifactDependencyResolver.resolve(ErrorHandlingArtifactDependencyResolver.java:36)
    at org.gradle.api.internal.artifacts.configurations.DefaultConfiguration.getResolvedConfiguration(DefaultConfiguration.java:236)
    at org.gradle.api.internal.artifacts.configurations.DefaultConfiguration_Decorated.getResolvedConfiguration(Unknown Source)
    at org.gradle.api.internal.artifacts.configurations.DefaultConfiguration$ConfigurationFileCollection.getFiles(DefaultConfiguration.java:456)
    ... 65 more

BUILD FAILED 
```

一件非常奇怪的事情是，相同的脚本文件在另一台机器上工作，但在我的机器上却不起作用，即使另一台机器具有相同的配置和设置。

我试图在互联网上搜索，但无法获得任何帮助。任何形式的帮助都非常感谢这里。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T09:16:07.280

在我尝试在*gradle.settings* ( `rootProject.name = 'something'`) 中更改我的项目名称后，我昨天看到了相同的 NPE。当我从*gradle.settings*中删除这一行时，异常消失了。

经过一番调查并在[http://forums.gradle.org/gradle/topics/how_to_get_the_latest_integration_version_number](http://forums.gradle.org/gradle/topics/how_to_get_the_latest_integration_version_number)的帮助下，我终于发现原因是一种循环依赖，当我的项目依赖于某个传递依赖的模块时与“当前”项目具有相同组和项目名称的模块。

这可能是你的情况吗？你的项目叫什么名字？什么是依赖关系`gradletest`？请检查您引用的`gradletest`模块是否不依赖于您的项目。或者，如果您的项目本身名为`gradletest`，那肯定会解释错误。

# c++ - 如何在 boost/c++ 中使用 zero_vector 进行初始化？

> ID：11552759
> 
> 赞同：0
> 
> 时间：2012-07-19T01:30:09.397
> 
> 标签：c++, boost, vector, ublas, boost-ublas

我正在查看以下答案之一： [填充 boost 向量或矩阵](https://stackoverflow.com/questions/798002/filling-a-boost-vector-or-matrix) ，但我认为我是 boost（和 xcode，就此而言）的新手，并且正试图将我的头绕在 boost zero_vector 周围。

我尝试了一个简单的程序，我认为它与其中一个答案大致相同：

```
#include <boost/numeric/ublas/vector.hpp>
#include <boost/numeric/ublas/io.hpp>

int main (int argc, char * const argv[]) {
    // insert code here...
    using namespace boost::numeric::ublas;

    int gameSize = 9;

    typedef vector<int> possiblesVector;
    possiblesVector foo;
    foo.resize(gameSize);
    foo = zero_vector<int>(gameSize);
    std::cout << foo << std::endl;

    return 0;
} 
```

它可以编译，但是当它运行时，我得到一个运行时错误（用“/PATH/TO”代替真实路径）。

```
Check failed in file /PATH/TO/boost_1_48_0/boost/numeric/ublas/detail/vector_assign.hpp at line 370:
detail::expression_type_check (v, cv)
terminate called after throwing an instance of 'boost::numeric::ublas::external_logic'
  what():  external logic or bad condition of inputs
Program received signal:  “SIGABRT”.
sharedlibrary apply-load-rules all 
```

在这里，我只是使用一个 main.cpp 作为测试区域。在我的真实程序中，我将声明拆分为一个 .h 文件，并将我的初始化放在我的对象的一个​​ .cpp 文件中。但是上面的代码和我的真实程序一样失败。（即为什么我将声明和初始化分为两个步骤）

另外，我知道调整大小已经初始化为零。也许我会做一个 scalar_vector 代替，或者我可能需要稍后重置数组或其他东西。我只是想隔离正在破坏的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T02:35:24.167

```
 template<template <class T1, class T2> class F, class V, class E>
    // BOOST_UBLAS_INLINE This function seems to be big. So we do not let the compiler inline it.
    void vector_assign (V &v, const vector_expression<E> &e, sparse_tag) {
        BOOST_UBLAS_CHECK (v.size () == e ().size (), bad_size ());
        typedef F<typename V::iterator::reference, typename E::value_type> functor_type;
        BOOST_STATIC_ASSERT ((!functor_type::computed));
        typedef typename V::value_type value_type;
#if BOOST_UBLAS_TYPE_CHECK
        vector<value_type> cv (v.size ());
        indexing_vector_assign<scalar_assign> (cv, v);
        indexing_vector_assign<F> (cv, e);
#endif
        v.clear ();
        typename E::const_iterator ite (e ().begin ());
        typename E::const_iterator ite_end (e ().end ());
        while (ite != ite_end) {
            value_type t (*ite);
            if (t != value_type/*zero*/())
                v.insert_element (ite.index (), t);
            ++ ite;
        }
#if BOOST_UBLAS_TYPE_CHECK
        if (! disable_type_check<bool>::value) 
            BOOST_UBLAS_CHECK (detail::expression_type_check (v, cv), 
                               external_logic ("external logic or bad condition of inputs"));
#endif
    } 
```

其中 v 是你的`vector<int> possiblesVector`，e 是临时的`zero_vector<int>`

```
// Weak equality check - useful to compare equality two arbitary vector expression results.
// Since the actual expressions are unknown, we check for and arbitary error bound
// on the relative error.
// For a linear expression the infinity norm makes sense as we do not know how the elements will be
// combined in the expression. False positive results are inevitable for arbirary expressions!
template<class E1, class E2, class S>
BOOST_UBLAS_INLINE
bool equals (const vector_expression<E1> &e1, const vector_expression<E2> &e2, S epsilon, S min_norm) {
    return norm_inf (e1 - e2) < epsilon *
           std::max<S> (std::max<S> (norm_inf (e1), norm_inf (e2)), min_norm);
}

template<class E1, class E2>
BOOST_UBLAS_INLINE
bool expression_type_check (const vector_expression<E1> &e1, const vector_expression<E2> &e2) {
    typedef typename type_traits<typename promote_traits<typename E1::value_type,
                                 typename E2::value_type>::promote_type>::real_type real_type;
    return equals (e1, e2, BOOST_UBLAS_TYPE_CHECK_EPSILON, BOOST_UBLAS_TYPE_CHECK_MIN);
} 
```

检查功能。

zero_vector的所有元素都是0，所以之后

```
 v.clear ();
    typename E::const_iterator ite (e ().begin ());
    typename E::const_iterator ite_end (e ().end ());
    while (ite != ite_end) {
        value_type t (*ite);
        if (t != value_type/*zero*/())
            v.insert_element (ite.index (), t);
        ++ ite;
    } 
```

向量 v 为空且检查失败。尝试使用`double`or`float`代替`int`。

# javascript - 当许多相同的元素时，Javascript数组排序无法正常工作

> ID：11552760
> 
> 赞同：1
> 
> 时间：2012-07-19T01:30:14.983
> 
> 标签：javascript, sorting

我正在尝试使用自定义比较器函数对数组进行排序。

比较器函数只关心两个特定元素之间的顺序。

在下面的示例中，您希望在排序后 'a' 出现在 'b' 之前，但事实并非如此。

```
var ar = ["b", "c", "d", "a"];

ar.sort(function(x, y) {
  if (x == 'a' && y == 'b') { return -1; }
  if (x == 'b' && y == 'a') { return 1; }
  return 0; // only the order between 'a' and 'b' matters.
});

console.log(ar);

// ar is still ["b", "c", "d", "a"]; 
```

那么为什么'a'不在'b'之前呢？有解决方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T01:32:33.593

考虑在列表的连续对上调用您的比较器：

```
"b", "c" --> 0
"c", "d" --> 0
"d", "a" --> 0 
```

您的比较器说所有对都是相等的，因此根本不需要更改顺序。

既然你不关心其他元素出现的顺序（对吗？），那么让你的比较器说“a”小于任何东西，“b”大于任何东西：

```
ar.sort(function(x, y) {
  if (x == 'a' || y == "b") { return -1; }
  if (x == 'b' || y == 'a') { return 1; }
  return 0; // only the order between 'a' and 'b' matters.
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T01:41:31.577

想想这样的 Array.prototype.sort 函数......

```
Array.prototype.sort = function( sortFunc ){
    if( typeof sortFunc !== "function" ){
        sortFunc = function(a,b){
            return a-b;
        }
    }
    var arr = [];
    for(var i = 0, len = arr.length; i <= len; i++ ){
        sortFunc( arr[i], arr[i+1] );
    }
    return arr;
} 
```

如您所见，`Array.prototype.sort`仅提供`sortFunc`具有仅相隔一个单元的元素的功能。

所以 sortFunc( "b", "a" ) 不会发生，因为它们的索引不是相隔 1 个单位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T01:34:21.543

如果`'a' = 'c'`, 和`'b' = 'c'`- 根据你的功能它是，那么`'a'`也等于`'b'`。

# haskell - 将字符串文字限制为仅文本

> ID：11552764
> 
> 赞同：41
> 
> 时间：2012-07-19T01:31:33.380
> 
> 标签：haskell, ghc, string-literals, overloaded-strings

我知道语言编译指示包含所有字符串文字`OverloadedStrings`的隐含。`fromString`我想做的实际上并不是*重载*字符串，而只是改变它们的含义，以便它们*总是*变成`Text`，因此，使用字符串文字作为字符列表应该会导致类型错误。

在不导入该类的实例的情况下导入`IsString`该类似乎是不可能的。`String`ghc 是否为我提供了一些将字符串文字限制为`Text`仅的方法？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-07-19T02:42:10.807

这有点矫枉过正，但一种解决方案是将 and 结合[`OverloadedStrings`](http://www.haskell.org/ghc/docs/7.0.1/html/users_guide/type-class-extensions.html#overloaded-strings)起来[`RebindableSyntax`](http://www.haskell.org/ghc/docs/latest/html/users_guide/syntax-extns.html#rebindable-syntax)。该`RebindableSyntax`扩展导致 Haskell 语法使用的所有隐式函数调用引用范围内的任何函数；例如，整数文字使用 any `fromIntegral`，不一定使用`Prelude.fromIntegral`。作为副作用，`Prelude`不再隐式导入，因此您必须手动执行此操作。只要您*确实*导入它，隐式使用错误函数的语法就不应该有任何问题（我认为 - 我实际上并没有使用过这种技术）。与 结合时`OverloadedStrings`，这会导致`"foo"`转换为范围内`fromString "foo"`的任何内容`fromString`，不一定是`Data.String.fromString "foo"`. 所以成为`fromString`同义词`pack`会做你想做的。一个完整的例子：

```
{-# LANGUAGE OverloadedStrings, RebindableSyntax #-}
import Prelude

import qualified Data.Text    as T
import qualified Data.Text.IO as T

fromString :: String -> T.Text
fromString = T.pack

main :: IO ()
main = T.putStrLn "Hello, world!" 
```

这工作正常，并更改`main`为`main = putStrLn "Hello, world!"`产生所需的错误：

```
TestStrings.hs:11:17:
    Couldn't match expected type `String' with actual type `T.Text'
    Expected type: [Char] -> String
      Actual type: String -> T.Text
    In the first argument of `putStrLn', namely `"Hello, world!"'
    In the expression: putStrLn "Hello, world!" 
```

注释掉的定义`fromString`会导致不同的错误：

```
TestStrings.hs:11:19:
    Not in scope: `fromString'
    Perhaps you meant `showString' (imported from Prelude) 
```

如果您希望它同时处理严格文本和惰性文本，您可以定义自己的`IsString`类型类，并将它们都设为实例；不必调用该类`IsString`，只要它具有`fromString`方法即可。

另外，警告一句：GHC 手册的部分`RebindableSyntax`没有提到`fromString`功能，并且部分`OverloadedStrings`没有提到`RebindableSyntax`. 没有理由这*不应该*起作用，但我认为这意味着该解决方案在技术上依赖于未记录的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-26T17:13:27.437

现在不是实现这一点的方法，但也许最终，是在讨论`instance force`中的[GHC 功能提案](https://github.com/nomeata/ghc-proposals/blob/patch-1/proposals/0000-forced-class-instantiation.rst)中提出的，你会说

```
instance force IsString Text 
```

在你的模块中。这是该提案的主要激励示例之一。

# python - 为什么这个 Pymongo 更新不起作用？

> ID：11552766
> 
> 赞同：1
> 
> 时间：2012-07-19T01:32:05.887
> 
> 标签：python, mongodb, pyramid, pymongo

我正在使用 Pyramid 框架（非常棒）编写一个小型 Web 应用程序，但在更新文档时遇到了问题。我在查询具有相同 ID 的文档时没有问题 - 我似乎无法更新它。这是我正在使用的代码：

```
 for key, value in request.POST.iteritems():
    if value:
      to_insert[key] = value  

  if "_id" in request.POST:
   try:
     _id = ObjectId(request.matchdict['id'])
   except InvalidId:  
     return Response("Error generating id")    

  request.db['concerts'].update( 
    { '_id': _id  }, 
    { "$set": to_insert }, 
    upsert=False
   ) 
```

如果我做：

```
request.db['concerts'].find( {'_id' : _id } 
```

我找到了我希望更新的文档，因此似乎不是 id 不存在的问题。它似乎没有向数据库提交任何内容。我能看到的唯一问题是我更新了整个文档——我没有事先检查这些字段。这是解决这个问题的正确方法吗？我在文档中没有看到太多关于更新不分青红皂白的字段的内容。

# c# - 无法与站点连接到共享主机数据库

> ID：11552768
> 
> 赞同：0
> 
> 时间：2012-07-19T01:32:38.260
> 
> 标签：c#, asp.net-mvc, database, asp.net-mvc-3, sql-server-2008

有点不知所措。构建了一个应用程序，在本地运行良好。毫无问题地将我的数据库迁移到 MSSQL，上传了站点，似乎无法让应用程序连接到数据库。访问数据库的任何页面我都会收到一般错误消息。

我已经尝试了使用 Godaddy 推荐的连接字符串的所有单独的连接字符串组合。也许我忽略了一些简单的事情？

我正在使用实体框架代码优先——我的上下文模型称为 CombosContext。

```
<add name="CombosContext" connectionString=" Server=jelatin.db.9508732.hostedresource.com; Database=jelatin; User ID=jelatin; Password=********; Trusted_Connection=False" providerName="System.Data.SqlClient" />

<remove name="LocalSqlServer"/>

<add name="LocalSqlServer" connectionString=" Server=jelatin.db.9508732.hostedresource.com; Database=jelatin; User ID=jelatin; Password=********; Trusted_Connection=False" providerName="System.Data.SqlClient" /> 
```

**服务器**：jelatin.db.9508732.hostedresource.com

**数据库名称**：jelatin

**用户**： jelatin

**表**：组合

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T01:42:23.580

我不熟悉 GoDaddy 托管的 SQL，但通常与 MS SQL Server 的连接字符串使用“数据源”而不是“服务器”和“初始目录”而不是“数据库”。

更新

我没有意识到连接字符串中允许使用服务器和数据库选项。对困惑感到抱歉。

关于数据库本身 - 你让 EF 创建数据库吗？用户是否有权在 GoDaddy 的系统上创建数据库？

如果您已经创建了数据库，您是否填充了任何内容？我发现如果数据库存在而元数据表不存在，EF Code First 将无法正确填充数据库。如果可以，请尝试将本地数据库复制到 GoDaddy，然后查看连接是否有效。

最后，对于您的一般错误消息 - 它是否返回 500 错误？如果是这样，您是否尝试过使用 IE 或 Chrome 的开发工具来检查响应？更好的错误信息通常隐藏在那里。

# javascript - Backbone.js 路由器模式，用于对浏览器“后退”按钮或直接导航的不同响应

> ID：11552769
> 
> 赞同：2
> 
> 时间：2012-07-19T01:32:57.383
> 
> 标签：javascript, backbone.js, backbone-views, backbone-routing

是否有一个很好的模式来实现对这两个事件做出不同响应的 Backbone.js 路由器：

*   **直接导航**- 用户通过将 url 直接放入浏览器或通过调用应用程序直接导航到页面`Router.navigate()`
*   **浏览器“返回”按钮**- 用户按下“返回”按钮可以转到他们之前所在的页面。

我问的原因是因为如果由于用户按下“后退”按钮而调用路由器，我只想将旧视图放回其元素中，`$('element_id').html(view.el)`而无需将数据重新加载到模型中并重新渲染风景。

如果由于用户通过在浏览器中输入 url、单击链接或从应用程序中调用 Router.navigate() 直接导航到页面而调用路由器，我希望路由器指示模型重新请求数据并触发视图的重新渲染。

任何帮助和建议将不胜感激，非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T05:03:36.827

不久前我遇到了类似的问题。这可能比您想要的要多，但这是我发现的作品。

## 直接导航

对于直接导航，通常的流程是这样的：

*   **初始化应用程序**：大多数backbone.js 项目都会有一些初始化应用程序的代码（App.init）。虽然很多示例在实际 HTML 中插入集合（待办事项等）的 JSON，但我个人喜欢使用此代码作为在页面加载后获取集合的机会，如下所示（coffeescript）：

    ```
    window.App =
      ...
      init: ->
        @todos = new App.Todos()
        @todos.deferred = @todos.fetch()

        @threads.deferred.done ->
          App.appRouter = new App.AppRouter(collection: self.todos)
          ... 
    ```

    （使用 jQuery 的 deferred 是为了确保在实际渲染页面之前获取集合。）

*   **初始化路由器**：在这里您有机会为路由器分配一个元素并将集合分配给路由器（我正在使用 thinkbot 的[骨干支持](https://github.com/thoughtbot/backbone-support)中的“SwappingRouter”，我强烈建议您检查一下）：

    ```
    App.Router = Support.SwappingRouter.extend
    ...
      initialize: (options) ->
        @el = $('.content')
        @collection = options.collection 
    ```

*   **执行路由处理程序**：这是最后一步，此时集合已经初始化并且路由器有一个指向它的指针，所以我们只需要创建视图并渲染它：

    ```
     show: (id) ->
        view = new App.TodosView(model: @collection.get(id))
        @swap(view) 
    ```

    （Swap 渲染视图并做一些其他的事情来清理。）

## 浏览器后退按钮

在这种情况下，既不会调用 App.init 也不会调用 AppRouter.initialize，因此默认情况下不会重新加载集合。Backbone 将自动调用上一条路由的导航，因此根据您的路由处理程序中的内容，视图可能会重新呈现。在上面的示例中，它将是（交换调用渲染），但您可以解决此问题。

这里和主干始终存在的关键问题是，您同时使用无状态 (HTTP) 协议和有状态（富客户端应用程序）环境。将两者对齐以使它们很好地协同工作可能非常棘手。

# php - 读取文件并使用分隔符拆分

> ID：11552771
> 
> 赞同：0
> 
> 时间：2012-07-19T01:34:20.563
> 
> 标签：php, delimiter

我有这个文本文件

```
acmst501:57:Runningacmst506:201:Runningacmst506:203:Runningacmst506:209:Runningacmst506:213:Failed 
```

我想用分隔符分割。我有这个代码工作。

```
 <?php
function parseFile($filename, $delimiter) {
    global $splitcontents;
    //$fd = fopen ($filename, "r");
    //$contents = fread ($fd,filesize ($filename));
    //fclose ($fd);
    $contents = file_get_contents($filename);
    $splitcontents = explode($delimiter, $contents);
    return $splitcontents;
}
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Read file and split with delimiter</title>
</head>

<body>
<?php
    parseFile("c:\emap\asrvr505-cslot_state.txt",":");
    foreach ( $splitcontents as $value ) {
        echo "<b>$value<br>";
    }
?>
</body>
</html> 
```

我得到的输出是这样的：

```
acmst501
57
Running acmst506
201
Running acmst506
203
Running acmst506
209
Running acmst506
213
Failed 
```

但是，我希望它是这样的：

```
acmst501
57
Running
acmst506
201
Running
... 
```

所以基本上，我想将运行/失败部分与 acmst 字段分开。

我如何将这些分开？另外，我的函数是否正确，所以我可以将它与同一个 PHP 文件中的不同文件一起使用？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T01:37:32.557

这：

```
$fd = fopen ($filename, "r");
$contents = fread ($fd,filesize ($filename));
fclose ($fd); 
```

一次将整个缓冲区放入`$contents`- 如果这是您的目标，您不妨使用`file_get_contents()`

在您的输入中，您有`Runningacmst506`：那里没有分隔符。我假设您正在拆分`:`，但 Running 附近没有冒号。

您的示例输入中有错字吗？

如果你澄清你的意见，我可以给你一个更好的答案。

# c# - 比较数据网格视图列和列

> ID：11552773
> 
> 赞同：0
> 
> 时间：2012-07-19T01:34:22.393
> 
> 标签：c#, linq, datagridview, foreign-keys

我被困在一个部分，我不知道如何解决它。基本上，我有一张桌子，“Shifthours”，另一张桌子是“employeeshift”。Shifthours 表有 shift_Start 和 shift_Stop。employeeshift 表有 StartTime 和 EndTime。我正在比较 shift_Start 和 StartTime。我已经使用外键将这两个表链接在一起，我问的问题是我希望 shift_Start 与 StartTime 进行比较，将 shift_Stop 与 EndTime 进行比较，并查看员工适合哪个班次，并且 shift_Start 和 shift_Stop 将出现在列中该雇员符合资格。

目前我得到了一个代码，它只将 2 个表连接在一起，但不比较时间。

```
private void LoadAllEmpShift()
    {
        using (testEntities Setupctx = new testEntities())
        {
            BindingSource BS = new BindingSource();
            var Viewemp = from ES in Setupctx.employeeshifts
                          join shifthour sh in Setupctx.shifthours on ES.ShiftHourID equals sh.idShiftHours
                         select new
                         {
                             ES.EmployeeShiftID,
                             ShiftHour_Start = sh.shiftTiming_start,
                             ShiftHour_Stop = sh.shiftTiming_stop,
                             ES.EmployeeName,
                             ES.StartTime,
                             ES.EndTime,
                             ES.Date
                         };

            BS.DataSource = Viewemp;
            dgvShift.DataSource = BS;
        }
    } 
```

任何人都知道如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T02:23:56.993

编辑：

您说您试图找到员工工作时间与一组轮班时间相匹配的位置。最好有一些样本数据和您想要用来确定什么是好的班次时间匹配的算法。

我在这里假设最好的方法是根据最近的班次开始时间来确定员工的开始时间。

在下面的代码中，我使用该`let`函数实质上查看轮班时间并找到最接近员工开始时间的轮班时间集。

```
var Viewemp = from ES in Setupctx.employeeshifts
      join sh in Setupctx.shifthours on ES.ShiftHourID equals sh.idShiftHours 
         into shifts
      let diff = shifts
          .OrderBy (s => 
                    // this is the line that needs attention:
                    System.Math.Abs((int)(ES.StartTime - s.shiftTiming_start))
                   )
                   .First ()
      select new
      {
          ES.EmployeeShiftID,
          ShiftHour_Start = diff.shiftTiming_start,
          ShiftHour_Stop = diff.shiftTiming_stop,
          ES.EmployeeName,
          ES.StartTime,
          ES.EndTime,
          ES.Date
      }; 
```

### 更新

> 我在数据库中的 StartTime 和 EndTime 类型是字符串而不是时间

`ES.StartTime`在上面的代码中，重要的逻辑是找到和之间的绝对值差`s.shiftTiming_start`，最小的差表示轮班时间的最佳匹配。不幸的是，您的数据库将此数据存储为字符串，您需要将它们作为数字进行比较。

Linq-to-Entities 不包含转换`string`为`int`函数的简单方法。

我认为您的下一步是研究如何将这些`string`值转换为`int`值。看看这个问题，因为我认为它可能会帮助你：

[在 EF 4.0 中将 String 转换为 Int](https://stackoverflow.com/questions/5754218/convert-string-to-int-in-ef-4-0)

# string - 删除字符串中包含正斜杠的部分

> ID：11552775
> 
> 赞同：0
> 
> 时间：2012-07-19T01:34:30.390
> 
> 标签：string, parsing, sed, tr

我很困惑如何删除其中包含正斜杠和问号的字符串的一部分。

例子：`/diag/PeerManager/list?deviceid=RXMWANT8WFYJNF7K6DXXXJLJVN`

我需要输出`RXMWANT8WFYJNF7K6DXXXJLJVN`

我已经尝试过`tr`，`sed`但`tr`删除了输出中我需要的一些字符。`sed`由于正斜杠，给我带来了麻烦。

`/diag/PeerManager/list?deviceid=`删除字符串部分的快速方法是什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T02:03:41.900

> echo "/diag/PeerManager/list?deviceid=RXMWANT8WFYJNF7K6DXXXJLJVN" | sed -n 's:/[a-zA-Z] */[a-zA-Z]* /[a-zA-Z] *?[a-zA-Z]* =::p'

这应该可以解决问题。我选择冒号作为分隔符，因为它不会导致正斜杠出现任何问题。这对它将接收的输入类型做出了很多假设，特别是它只包含三个反斜杠，它们之间有大小写字母，一系列以问号结尾的字母，另一系列以等号结尾的字母符号。然后删除这些项目并打印剩余的字符（您的设备 ID）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T01:44:32.277

这对我有用：

```
sed 's/.*deviceid=\([^&]*\).*/\1/' 
```

例子：

```
$ echo '/diag/PeerManager/list?deviceid=RXMWANT8WFYJNF7K6DXXXJLJVN' | sed 's/.*deviceid=\([^&]*\).*/\1/'
RXMWANT8WFYJNF7K6DXXXJLJVN 
```

这不是最强大的解决方案，但如果您有一组永远不会改变的固定输入，它可能就足够了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T01:48:33.920

使用 的一种方法`awk`，如果`=` 每行仅出现一次 a ：

```
awk -F= '{ print $2 }' file.txt 
```

结果：

```
RXMWANT8WFYJNF7K6DXXXJLJVN 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T01:49:45.543

### 使用等号作为字段分隔符

如果您知道您的 GET[查询字符串](http://en.wikipedia.org/wiki/Query_string)将始终只有一个参数（在本例中为*deviceid*），那么您可以使用等号作为标准*剪切*实用程序的字段分隔符。例如：

```
$ echo '/diag/PeerManager/list?deviceid=RXMWANT8WFYJNF7K6DXXXJLJVN' |
    cut -d= -f2-
RXMWANT8WFYJNF7K6DXXXJLJVN 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T01:57:03.433

怎么样：

```
$ echo /diag/PeerManager/list?deviceid=RXMWANT8WFYJNF7K6DXXXJLJVN | sed 's/^.*=//'
RXMWANT8WFYJNF7K6DXXXJLJVN 
```

# objective-c - 为什么 UIPopoverController KVO 不兼容？

> ID：11552778
> 
> 赞同：1
> 
> 时间：2012-07-19T01:34:50.513
> 
> 标签：objective-c, ios

我正在使用 a`UIPopoverController`来显示一些内容，并且我想使用 KVO 来观察`popoverVisible`属性。不幸的是，这似乎`UIPopoverController`不符合 KVO。

任何人都可以解释为什么会这样吗？有什么方法可以子类化`UIPopoverController`并*使其*属性为`popoverVisible`KVO 吗？如果Apple的代码直接更改实例变量而不是通过属性，我觉得这不一定有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T02:15:51.107

其实，不只是`UIPopoverController`。大多数 UIKit 都不兼容 KVO。实例变量通常是直接设置的。不幸的是，除了提交一个请求 KVO 支持的错误之外，您实际上无能为力。

# python - Django密码重置表单

> ID：11552784
> 
> 赞同：2
> 
> 时间：2012-07-19T01:35:34.590
> 
> 标签：python, django, passwords, reset

我希望用户能够通过我网站上的链接重置他们的密码。我正在尝试使用内置的 django 密码重置表单，但有一点困难。我的 urls.py 中包含以下内容

```
urlpatterns = patterns('',
    url(r'^admin/password_reset/$', 'django.contrib.auth.views.password_reset', name='admin_password_reset'),
    url(r'^admin/password_reset/done/$', 'django.contrib.auth.views.password_reset_done'),
    url(r'^reset/(?P<uidb36>[0-9A-Za-z]+)-(?P<token>.+)/$', 'django.contrib.auth.views.password_reset_confirm'),
    url(r'^reset/done/$', 'django.contrib.auth.views.password_reset_complete'),
    url(r'^admin/', include(admin.site.urls)), 
```

我通过以下方式访问链接：

```
<h3><a href="{% url 'password_reset' %}">Forgot your password?</a></h3> 
```

我也尝试过像这样包含它：

```
{% url django.contrib.auth.views.password_reset_confirm uid, token %}
{% url django.contrib.auth.views.password_reset_confirm uidb36=uid, token=token %} 
```

我收到以下错误：

```
NoReverseMatch at /account/
Reverse for 'password_reset' with arguments '()' and keyword arguments '{}' not found. 
```

我已经尝试了很多不同的东西，但没有任何运气。我需要传入 uid/token 吗？如果是这样，我该如何定义它们？

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T06:08:43.790

您的网址已命名`admin_password_reset`

`<h3><a href="{% url 'admin_password_reset' %}">Forgot your password?</a></h3>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T01:39:18.523

这听起来与我遇到的问题非常相似。您可以查看我的解决方案：如果您使用 {% load url from future %}，[Django {% url %} reverse not working 。](https://stackoverflow.com/questions/10039050/django-url-reverse-not-working/10039561#10039561)

祝你好运！

# textmate - 当我关闭项目抽屉时，如何让 TextMate 自动展开？

> ID：11552785
> 
> 赞同：0
> 
> 时间：2012-07-19T01:35:35.583
> 
> 标签：textmate, usability

因此，当我按 control-option-command-D 打开/关闭项目抽屉时，窗口不会像以前那样回到最大尺寸。

有没有办法启用它？这适用于 TextMate 1.5.11。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T07:35:49.280

如果您愿意升级，TextMate 2.0 有显示/隐藏文件浏览器的快捷方式。我认为升级对 1.5 用户也是免费的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T21:53:05.330

不，但您可以尝试[ProjectPlus](http://ciaranwal.sh/2008/08/29/projectplus-update-2)或[MissingDrawer](https://github.com/jezdez/textmate-missingdrawer)。

# java - 从带有线程的方法返回

> ID：11552786
> 
> 赞同：0
> 
> 时间：2012-07-19T01:35:50.787
> 
> 标签：java, multithreading, return

很抱歉标题令人困惑，我不知道如何用最少的词来描述它，但基本上我想要做的是从一个方法返回一个 LinkedList。但我想将实际内容放在线程内的方法中，然后在线程完成时返回数据。这是我正在使用的代码：

```
public static LinkedList<Result> get(final String prefix){
    final LinkedList<Result> results = new LinkedList<Result>();
    if(thread != null){
        thread.stop();
        thread = null;
    }
    thread = new Thread(
            new Runnable(){
                public void run(){
                    try{
                        URL url = new URL(String.format(URL_INFO, prefix));
                        URLConnection connection = url.openConnection();
                        connection.setReadTimeout(Timeout.TIMEOUT);
                        connection.setConnectTimeout(Timeout.TIMEOUT);
                        InputStream is = connection.getInputStream();
                        Scanner reader = new Scanner(is);
                        while(reader.hasNextLine()){
                            String line = reader.nextLine();
                            if(line != null){
                                if(line.contains(String.format(WORDS_INFO, prefix))){
                                    String[] s = line.split(String.format(PREFIX_INFO, prefix));
                                    String[] s2 = s[1].split("\">");
                                    if(s2.length > 0){
                                        for(int i = 1; i < s2.length; i++){
                                            String l = s2[i];
                                            String[] split = l.split(FINAL_SPLIT);
                                            results.add(new Result(prefix, split[0].trim()));
                                        }
                                    }
                                    break;
                                }
                            }
                        }
                        reader.close();
                    }catch(Exception e){
                        e.printStackTrace();
                    }
                }
            }
    );
    thread.start();
    return results;
} 
```

线程是在变量部分中静态定义的。基本上这里的问题是它返回一个空的 LinkedList 因为它没有等待线程完成。如何等到线程完成后再返回 LinkedList？任何帮助将不胜感激。谢谢。

注意：这个问题与读取 URL 无关，问题是它返回一个空的 LinkedList，因为 Thread 尚未完成，我想知道如何等到 Thread 完成后再返回一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T01:39:33.957

您需要等到线程完成执行。在 上查找文档[`Thread.join`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html#join%28%29)。

这只是做你正在尝试的事情的一种方法。还有很多其他的，比如[ExecutorService](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ExecutorService.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T13:40:34.543

我不确定你为什么在这里使用线程。如果您必须分叉线程然后等待它完成，那么您应该`run()`直接在父线程中执行代码。

同样重要的是要意识到，当您执行以下操作时：

```
final LinkedList<Result> results = new LinkedList<Result>();
thread = new Thread(
        new Runnable(){
            public void run(){
                ...
                results.add(new Result(prefix, split[0].trim()));
...
return results; 
```

您正在`results`以非线程安全的方式使用该对象。 `results`不是同步集合，因此`Runnable`如果您确实想在线程仍在运行时返回它，则需要在外部线程和外部线程中对其进行同步。否则，两个线程在没有内存同步的情况下访问对象。由于您现在可能在返回*之前*`join()`调用线程，因此这将不是问题，因为将为您同步。但重要的是要意识到那里的后果。*`join()`*

 *最后，`thread.stop()`被弃用。中断线程的正确方法是调用`thread.interrupt()`which 在线程上设置中断标志并导致`Thread.sleep()`,`wait()`和其他一些方法抛出`InterruptedException`。*

# c - ARGV中的向量是指一维数组吗？

> ID：11552787
> 
> 赞同：-1
> 
> 时间：2012-07-19T01:35:56.323
> 
> 标签：c, argv

只是对编程领域中的向量一词感到好奇？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T01:38:23.327

是的，这里的“向量”是指一维数组。这有点令人困惑，因为表示数学向量也使用一维数组来存储每个维度中的坐标，但这是一种不同的用法。在这种情况下，“矢量”会显示排列成一行的数组的所有元素的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T01:39:46.587

如果您指的是 C、C++ 或 Perl（所有这些都使用术语“argv”，尽管 Perl 是唯一一个通常将其大写为“ARGV”）：是的，它表示一维数组。

术语“向量”还有其他用途，但它们通常也非常接近“一维数组”。例如，C++ 标准库定义了一系列`vector`类型，其行为类似于可扩展数组。

（还有其他用途——例如，“中断向量”——与此无关。我假设你对这些不感兴趣。）

# javascript - 如何从第二页访问参数？

> ID：11552794
> 
> 赞同：0
> 
> 时间：2012-07-19T01:37:50.083
> 
> 标签：javascript, ajax, parameter-passing

我有一个列出课程的页面。当学生点击其中一个课程标题时，它将使用 AJAX 将参数 (courseId) 传递到第二个页面，该页面将返回课程详细信息。第二页如何访问参数（courseId）？如果我直接在源中输入一个值而不是访问参数，它会显示详细信息：

```
var idInput = 12345;
var regNoInput = 098766; 
```

当我尝试`getElementById`访问该参数时，它没有显示任何详细信息：

```
var idInput = document.getElementById("courseId").value;
var regNoInput = document.getElementById("regNo").value; 
```

我也尝试将参数作为 PHP 变量访问，但仍然没有详细信息：

```
var idInput = "${courseId}";
var regNoInput = "${regNo}"; 
```

这是我的第一页脚本，参数是使用 url 传递的：

```
 success: function(json_results){
    $('#list').append('<ul data-role="listview" data-inset="true"</ul>');
    listItems = $('#list').find('ul');
    $.each(json_results.rows, function(key) {
     html = "<li data-mini='true' id='icon'><a href='MRegisteredClassesDetail.html?
            courseId=" + [json_results.rows[key].courseId] + "&regNo=" +
            [json_results.rows[key].regNo] +"' rel='external'>" + 
            json_results.rows[key].courseName+ "</a>" + "<a 
            href='http://137.57.102.146:8080/Training/MRateCourse.phone?courseId="+ 
            [json_results.rows[key].courseId] + "&regNo=" +   
            [json_results.rows[key].regNo] + "' rel='external'>RATE THIS COURSE</a>
            </li>" ; 
     listItems.append(html); 
    }); 
```

这是我的第二页，它应该读取参数值：

```
 var idInput = "${courseId}";
  var regNoInput = "${regNo}";

   success: function(json_results){
     $('#list').append('<ul data-role="listview" data-inset="true"</ul>');
     listItems = $('#list').find('ul');
     $.each(json_results.rows, function(courseId) {
     html  ='<h1 align=center>'+json_results.rows[courseId].courseName+'</h1>';
     html +='<li>Registration Number:'+json_results.rows[courseId].regNo+'</li>';
     html +='<li>Registration Date:'+json_results.rows[courseId].regDate+'</li>';
         listItems.append(html);
     }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T02:33:24.213

如果url中的参数，试试这个：

```
var params=window.location.search.substr(1).split("&"),
    idInput=params[0].split("=")[1],
    regNoInput=params[1].split("=")[1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T03:23:17.350

我声明一个变量

```
var idInput = getParameterByName('courseId'); 
```

并定义函数

```
function getParameterByName(name) {
        var match = RegExp('[?&]' + name + '=([^&]*)').exec(window.location.search);
        return match && decodeURIComponent(match[1].replace(/\+/g, ' '));
    } 
```

它运作良好。

# c# - 带有 SQL 数据库的 C# 控制台应用程序

> ID：11552796
> 
> 赞同：-3
> 
> 时间：2012-07-19T01:38:06.597
> 
> 标签：c#, database

我有一个 Visual C# 控制台应用程序（最终我会添加一些图形）。我想将此项目与具有以下功能的数据库集成：

1.  在执行期间，程序应能够将数据写入数据库
2.  在执行期间，程序应能够从数据库中读取数据
3.  数据库应存储在服务器上（现在本地就可以了）

如何在 Visual Studio 2010 Ultimate 中获得此功能？（如果您需要更多信息，请告诉我）

我应该在 Visual Studio 中的项目中添加什么“项目”，以便可以使用查询字符串编写 SQL 语句？

随着时间的推移，我希望能够将数千条记录存储到在线数据库中。谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-19T02:46:53.233

我不会为你编写实际的代码，因为我没有看到任何迹象表明你已经尝试过自己先做这件事。但是，以下是涉及的基本步骤：

1.  添加对`System.Data`、`System.Data.Common`和`System.Data.SqlClient`项目的引用。

2.  声明成员（类）变量以保存对`SqlAdapter`、`SqlConnection`和的引用`SqlCommand`。

3.  在您的类构造函数或初始化方法中创建上述每一项，根据需要为每一项设置属性（例如，`SqlConnection`要求您为 提供一个值`ConnectionString`，以及`SqlCommand`需要`CommandType`和`CommandText`值，等等）。

4.  就像在 GUI 应用程序中一样，使用上述成员变量访问数据，除了您没有用于显示数据的 UI 控件 - 所有数据访问都是通过您的代码进行的。

对于设置的具体方法，创建一个标准的 WinForms 应用程序并设置您的数据库连接、查询等。查看 VS 为保存每个变量而创建的变量，以及它们是如何初始化的`InitializeComponents`——您需要自己在代码中执行相同的步骤，而不是通过在 VS 用户界面中拖放内容。

这应该足以让你开始。尝试后，您可以在 SO 上将与特定问题相关的任何问题作为新问题发布。

# ajax - AJAX 请求在 IE 中不起作用

> ID：11552797
> 
> 赞同：1
> 
> 时间：2012-07-19T01:38:07.247
> 
> 标签：ajax, internet-explorer

```
$('.sizeSelect').change(function(size) {
sizeId = $(this).attr('id');
size = $('#' + sizeId).val();
lastChar = sizeId.substr(5);
addBtn = "#btn_" + lastChar;
shipId = "shipping_" + lastChar;

if (size=="")
 {
   document.getElementById(shipId).innerHTML="";
   return;
 } 
if (window.XMLHttpRequest)
 {// code for IE7+, Firefox, Chrome, Opera, Safari
 xmlhttp=new XMLHttpRequest();
 }
else
 {// code for IE6, IE5
 xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
 }
xmlhttp.onreadystatechange=function()
 {
 if (xmlhttp.readyState==4 && xmlhttp.status==200)
  {
   document.getElementById(shipId).innerHTML=xmlhttp.responseText;
   var response = xmlhttp.responseText;
    if (response == 0.00) {
        $(addBtn).addClass('invisible');
    }
    else if (response > 0.00) {
        $(addBtn).removeClass('invisible');
    }
}
}

xmlhttp.open("POST","cart.php?size="+size+"&shipId="+lastChar, true);
xmlhttp.send();

 }); 
```

谁能告诉我为什么这适用于 Chrome、Firefox 和 safari 而不是 IE。我在某处读到它与强制即不缓存有关，并且将请求从 get 更改为 post 会有所帮助......它没有:(

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-15T14:57:54.887

诀窍是为 IE 浏览器或小于 10 的版本使用单独的代码 XML。

所以每次调用 Ajax 时都会使用输入参数 XML Dom 或文本调用方法 parseXml，具体取决于浏览器....如果当前浏览器是 IE，它会上传 XML 文档，根据 Microsoft 标准对其进行处理并返回 XML 和其余部分Ajax 中的进程按预期进行！

注意：jQuery 1.9 不支持 browser.msie，但您可以添加 jquery-migrate-1.2.1.min.js 以使其兼容或使用 userAgent 并查找当前浏览器

```
 $.ajax({
  type: 'GET',
  url: 'XML_file.xml',
  dataType: ($.browser.msie) ? "text" : "xml",
  success: function (xml) {

     var processedXML = parseXml(xml);

     $(processedXML).find('my record').each(function () {  //code  } 
   });

 function parseXml(xml) {

 if ($.browser.msie)  {

  if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
      xmlhttp = new XMLHttpRequest();
  }
  else {// code for IE6, IE5
    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
  }

    xmlhttp.open("GET", "XML_file.xml", false);
    xmlhttp.send();
    xmlDoc = xmlhttp.responseXML;

    xml = xmlDoc;
 }
   return xml;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T20:36:41.543

你试过使用 jQuery 吗？您是否检查过 IE 是如何处理响应的 - 也许它将“0.00”视为您必须解析的文本？

# php - 包含 .0 的舍入

> ID：11552798
> 
> 赞同：2
> 
> 时间：2012-07-19T01:38:14.077
> 
> 标签：php

我正在寻找四舍五入以包含零，例如：

我们将 2.99 舍入为 3，所以它显示 3。我希望它改为显示 3.0。

如果这很重要，我将在之后将此值移动到数据库中。

我找到了一个 sprintf 的解决方案，由于上述原因，它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T01:41:31.060

做`number_format(round(2.99, 1), 1)`。首先它四舍五入到正确的位置，然后添加一个零（并将其变成一个字符串）。

但是您不需要数据库中的 .0 - 它会忽略它。不仅如此，它还将是一个字符串，因此它可能不适用于绑定变量。

如果您希望 .0 在数据库输出中显示，您可以配置它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-19T01:40:46.273

使用[number_format](http://php.net/manual/en/function.number-format.php)函数并将 1 设置为第二个参数。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-19T01:41:00.140

您可以使用[此处](http://php.net/manual/en/function.number-format.php)`number_format`找到的功能

# google-analytics - Google Analytics：跟踪用户注册/会员升级

> ID：11552811
> 
> 赞同：4
> 
> 时间：2012-07-19T01:40:11.233
> 
> 标签：google-analytics, google-analytics-api

我对谷歌分析相当陌生，我正在建立一个会员基地网站。GA 似乎非常擅长描述访问和用户行为，但我想对其进行自定义，以便它还可以跟踪跟踪用户注册数量和升级会员的用户数量。我只是想为这两个领域建立一个计数器，我想知道最好的方法是什么？

我最好的猜测是事件跟踪。每次用户注册或升级其会员资格时，我都会粘贴必要的 js 以将其注册为事件。我以前从未这样做过，所以我不确定最好的方法是什么。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T09:55:14.757

您需要制作一些自定义标签:)这应该可以帮助您入门：

[https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingCustomVariables](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingCustomVariables)

这也应该有帮助：
[https ://developers.google.com/analytics/devguides/collection/gajs/#EventHandlers](https://developers.google.com/analytics/devguides/collection/gajs/#EventHandlers)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T19:04:29.747

**案例1：**如果您只需要维护计数器，事件将是一个好方法，您可以参考@Ryan Brodie 提到的链接。此外，将计数器存储在表中可以是一个选项：P。

**案例2：**如果您想维护计数器+研究各种类别用户的访问者行为，您可以选择自定义变量。现在假设您的网站为用户提供登录功能，您可以使用范围为会话级别的自定义变量用户登录状态。通过这种方式，您可以按登录成员和匿名访问者的访问来划分访问。有关更多详细信息，请访问 [此链接](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingCustomVariables)

# c# - 是否可以在同一个 AppDomain 上托管 WebMethods 和 ASP.NET 应用程序？

> ID：11552812
> 
> 赞同：2
> 
> 时间：2012-07-19T01:40:28.593
> 
> 标签：c#, asp.net, web-services, appdomain

我在我的 ASP.NET 页面中添加了一些[Web 方法](http://msdn.microsoft.com/en-us/library/byxd99hx%28v=vs.90%29.aspx)，如下所示，以在我的应用程序的客户端[使用 jQuery 启用 AJAX 调用：](http://api.jquery.com/jQuery.ajax/)

```
public partial class MyPage : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        // Page load logic...
    }

    [WebMethod]
    [ScriptMethod(UseHttpGet = true, ResponseFormat = ResponseFormat.Json)]
    public static string MyWebMethod()
    {
        // web method logic...
    }
} 
```

但是，我注意到使用调试器时，我的 Web 方法正在与我的 ASP.NET 页面的 AppDomain 不同的 AppDomain 上处理[，](http://msdn.microsoft.com/en-us/library/system.appdomain.aspx)因此它们中的每一个都有自己的一组静态变量，这给我带来了一些麻烦。

所以我想知道是否有可能在同一个 AppDomain 上托管 WebMethods（或 Web 服务）和 ASP.NET 应用程序，使它们都能够访问同一组静态变量？

提前致谢！

**编辑 1**

我在 IIS 7.0 上托管我的应用程序

**编辑 2**

正如 Jupaol 的回答清楚地表明，可以在同一个 appDomain 上托管 WebMethods 和 ASP.NET 页面，但这是我在运行更多测试后发现的：

如果我的 jQuery.ajax 调用将其 URL 设置为：

```
$.ajax({
         url: "/MyFolder/MyPage.aspx/MyWebMethod",
         contentType: "application/json; charset=utf-8",
         success: AjaxSuccess,
         error: AjaxError
}); 
```

IIS 在我的网站上创建了两个 appDomain（相同[的网站密钥](http://msdn.microsoft.com/en-us/library/ms524661%28v=vs.90%29.aspx)），一个用于页面请求，另一个用于 WebMethod 请求。他们的[FriendlyNames](http://msdn.microsoft.com/en-us/library/system.appdomain.friendlyname.aspx)如下所示：

*   “/LM/W3SVC/1/ROOT-6-129872125368848248”（WebMethod）
*   “/LM/W3SVC/1/ROOT/WebApp-5-129872125273487796”（ASP.NET 页面请求）

但是，如果 jQuery.ajax 调用 URL 设置如下：

```
$.ajax({
         url: "MyPage.aspx/MyWebMethod",
         contentType: "application/json; charset=utf-8",
         success: AjaxSuccess,
         error: AjaxError
}); 
```

只创建一个 appDomain 来服务这两个请求：

*   “/LM/W3SVC/1/ROOT/WebApp-7-129872126989518526”

不幸的是，我无法找到这种行为的解释，我唯一能想到的可能与这个问题有关的是我的网站在某些页面上使用[https](http://en.wikipedia.org/wiki/HTTP_Secure)而在其他页面上没有。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T02:11:07.483

你确定你是在比较AppDomain的ID？？？

我刚刚做了一个实验，它们**确实属于同一个 AppDomain**

如果您在代码中显式创建 AppDomain，则并非总是如此。

示例：（我刚刚更新了一个旧示例，专注于`AppDomain.CurrentDomain.Id`）

## 代码背后

```
 protected void Page_Load(object sender, EventArgs e)
    {
        this.lblMessage.Text += "AppDomain ID: " + AppDomain.CurrentDomain.Id.ToString() + "<br/>";
    }

    [WebMethod]
    public static string Execute1()
    {
        JavaScriptSerializer j = new JavaScriptSerializer();
        string r = string.Empty;
        var o = Observable.Start(() =>
        {
            Thread.Sleep(2000);
            r = "My Name1: " + DateTime.Now.ToString() + " Background thread: " + Thread.CurrentThread.ManagedThreadId.ToString();
        }, Scheduler.NewThread);
        o.First();
        r += " Main thread: " + Thread.CurrentThread.ManagedThreadId.ToString();
        r += " AppDomain ID: " + AppDomain.CurrentDomain.Id.ToString();
        r = j.Serialize(new { res = r });
        return r;
    } 
```

## 输出

![在此处输入图像描述](../Images/5db6b0201367d9f8bac79b9511fa2c21.png)

# database - 数据库表设计思路。.

> ID：11552816
> 
> 赞同：2
> 
> 时间：2012-07-19T01:40:59.633
> 
> 标签：database, database-design

我有一个数据库结构问题，我正在寻找一些意见。

假设有一个场景，用户将使用应用程序来请求材料。

需要跟踪请求者是谁。

请求者有三种可能的“类型”。个人（Person）、部门和供应商自己提供材料。

此外，Supplier 对象也需要与 Supplier 相关联。

所以这个想法是在 Request 表中有一个 RequestedByID FK。但是相关的请求者对每个数据都有如此不同的结构，如果它只是一个表（人们与部门和供应商有不同的属性），则需要一个完全非规范化的表才能关联回来。

我对如何处理这个问题有一些想法，但认为 SO 社区会有一些深刻的见解。

感谢您的任何帮助。

编辑：

伪结构：

## 要求

RequestID 请求者ID

## 部门

部门 ID DepField1 DepField2

## 人

人员 ID 人员字段 1 人员字段 2

## 供应商

供应商 ID SuppFiel1 SuppField2

Department、Person 和 Supplier 都有单独的表，因为它们的属性有很大不同。但是它们中的每一个都可以作为请求的请求者（RequesterID）。如果没有一个（非规范化表）充满不同的可能请求者，最好的方法是什么？

希望这可以帮助。. .

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T08:22:39.037

You need what is in ER modeling know as inheritance (aka. category, subtype, generalization hierarchy etc.), something like this:

![enter image description here](../Images/508fbed7217d7edeb37355b7dd6e110b.png)

This way, it's easy to have different fields and FKs per requester kind, while still having only one REQUEST table. Essentially, you can varry the requester without being forced to also vary the request.

There are generally [3 ways to represent inheritance](https://stackoverflow.com/questions/9174200/how-to-create-multiple-one-to-ones/9178524#9178524) in the physical database. What you have tried is essentially the strategy #1 (merging all classes in single table), but I'd recommend strategy #3 (every class in separate table).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T01:51:14.717

You could have two different IDs: RequesterID and RequesterTypeID. RequesterTypeID would just be 1, 2, or 3 for Person, Department, and Supplier, respectively, and RequesterTypeID paired with RequesterID would together make a multi-attribute primary key.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T01:56:05.903

What Jack Radcliffe suggested is probably the best option. So I'd just add an alternative option:

You might also consider having 3 requests tables... One for ppl requests, one for suppliers requests, and one for departments requests... So you don't need to explicitly store the RequesterTypeID, since you can deduce it from the name of the table... You can then create the table Jack Radcliffe as a view, by "uniting" all the 3 individual tables...

Also, if you implement Jack Radcliffe approach, you can create 3 views to simulate the 3 tables I've mention... So then you can use whichever table/view is best for each situation, and if you want to change from approach A to B it's really easy too...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T02:14:28.603

What I like about Jack Radcliffe's thought is if you store them in a separate table or make the sql statement generic to handle any number passed in by the application, they can be expanded e.g. manufacture, entity, subsidiary, etc

However, you choose the expansion will entail overhead.

# javascript - 向父元素和子元素添加“活动”类

> ID：11552822
> 
> 赞同：0
> 
> 时间：2012-07-19T01:41:33.247
> 
> 标签：javascript, jquery

如果用户单击列表中的子元素，则需要将活动类添加到父元素和子元素。我的html如下： -

```
<ul class="tabs">
      <li class="accordion"><a href="#tab1">Bar</a>
         <ul class="sub">
           <li>lorem/li>
           <li>ipsum</li>
           <li>Lorem Ipsum</li>
           <li>Dolor Sit Amet</li>
         </ul>
      </li> 
```

我正在使用下面的 jquery 代码向父元素和子元素添加一个活动类，但我遇到了错误：-

```
$("ul.tabs li").click(function() {
      $("ul.tabs li").removeClass("active").find(".sub li").removeClass("active"); 
      $(this).addClass("active").find(".sub li").addClass("active"); 
}); 
```

然后在 CSS 中为我​​的活动类设置样式。说例子

```
.active {background:#EFEFEF;} 
```

只有被点击的（this）子元素应该应用活动类，而不是整个 li 子元素。现在与子 li（比如 lorem）一起，父 li（bar）也应该被突出显示。把它想象成一个树形手风琴菜单，其中选定的子元素和它的父 li 都有具有不同 css 样式的活动类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T04:50:09.397

我只是在这里假设您只想将活动类添加到列表项中，如下所示：http: [//jsfiddle.net/gfkM4/](http://jsfiddle.net/gfkM4/)

我希望这就是你要找的。干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T01:47:59.207

试试这个：

```
$("ul.tabs li").click(function() {
      $("ul.tabs li, .sub li").removeClass("active"); 
      $(this).find(".sub li").andSelf().addClass("active"); 
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T01:56:34.587

**更新： http:** [//jsfiddle.net/4G7TJ/3/](http://jsfiddle.net/4G7TJ/3/)（根据您的新要求，只选择一个孩子）

```
$("ul.tabs li").click(function() {
    // remove .active from all li descendants
    $("ul.tabs li").not(this).removeClass("active");

    $(this)
        .addClass("active")
        .not('.accordion')
        .parents("li:first").addClass("active");
    return false;
}); 
```

返回 false 背后的想法是防止在单击子项`li`时将“单击”事件传播到父项`li`，因为这会撤消子项的样式更改。

* * *

**更新**：工作演示 - [http://jsfiddle.net/4G7TJ/1/](http://jsfiddle.net/4G7TJ/1/)

```
// only trigger the click on direct descendants
// (otherwise the kids get the event first and this won't work)
$("ul.tabs > li").click(function() {

    // remove .active from all li descendants
    $("ul.tabs li").not(this).removeClass("active");

    $(this).addClass("active").find(".sub li").addClass("active");
}); 
```

此外 -`<li>lorem/li>`没有关闭，这意味着您的所有标签都可能不匹配，并且当您单击时，您无法确定“当前”列表项是什么（以及在哪个列表中）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T15:00:16.617

这是使用 jQuery 在手风琴菜单选项上应用活动类的演示。

**HTML：**

```
<ul class="tabs">
  <li class="accordion">
    <a href="#tab1">
      Bar
    </a>
    <ul class="sub">
      <li>
        lorem
      </li>
      <li>
        ipsum
      </li>
      <li>
        Lorem Ipsum
      </li>
      <li>
        Dolor Sit Amet
      </li>
    </ul>
  </li>

  <li class="accordion">
    <a href="#tab2">
      Foo
    </a>
    <ul class="sub">
      <li>
        lorem
      </li>
      <li>
        ipsum
      </li>
      <li>
        Lorem Ipsum
      </li>
      <li>
        Dolor Sit Amet
      </li>
    </ul>
  </li>  
</ul> 
```

**CSS：**

```
.tabs li{
  list-style:none;
}
.tabs li:hover{
  background:#88ccf9;
}
.tabs li a{
  color:#334499;
}
.tabs{
  border:1px solid #3344ff;
  background:#dcfcff;
  padding:10px;
}
.tabs .accordion .sub{
  padding:3px 3px 3px 18px;
  display:none;
}
.tabs .active .sub{
  display:block;
}
.tabs li.active{
  background:#77d9c9;
} 
```

**查询：**

```
$(function() {
    $("ul.tabs li").click(function() {
        // remove .active from all li descendants
        $("ul.tabs li").not(this).removeClass("active");
        //hide all sub menu except current active
        $("ul.tabs li").not(this).find(".sub").hide(400);
        //apply active class on current selected menu
        $(this).addClass("active");

        //check if sub menu exists
        if($(this).find(".sub").length>0){
              //show the selected sub menu 
              $(this).find(".sub").show(500);
               //apply active class on all sub menu options
              $(this).find(".sub li").andSelf().addClass("active");
        } 
    });
}); 
```

我在[http://codebins.com/bin/4ldqpa5上完成了完整的 bin](http://codebins.com/bin/4ldqpa5)

# php - PHP While 循环和 jQuery

> ID：11552823
> 
> 赞同：0
> 
> 时间：2012-07-19T01:41:57.760
> 
> 标签：php, jquery

我创建了一个 while 循环，它从我的服务器中选择随机图像并将其发布。现在我想添加一些 jquery 代码并允许我单击其中一张图像并在 jQuery 中运行 slideUp() 函数。这是我的问题。我可以单击 while 循环中生成的第一张图像，但是当我单击第二张图像时，什么也没有发生。slideUp() 函数不起作用。我不知道该怎么办。这是下面的代码。

```
<script src="http://code.jquery.com/jquery-latest.js"></script>

<?php    
   $num_dresses = dress_count ();   
   $i=0;    
   while ($i < 2){  
?>

<style>     
   div:hover { border:2px solid #021a40; cursor:pointer;}      
</style>

<script>  
    $("div").click(function () {
           $(this).slideUp();    
    });
</script>   

<?php       
    $rand_id = rand(1, $num_dresses);       
    $dress_feed_data = clothing_data($rand_id, 'file_name', 'user_defined_name', 'user_defined_place' , 'user_who_uploaded', 'match_1');
    $new_file_name = $dress_feed_data['file_name']; 

    if (file_exists('fashion_images/' . $new_file_name)){

      echo str_replace("|", " ", $dress_feed_data['user_defined_name']);
?>

    <br>                    
    <div>    
     <img  src=" fashion_images/<?php echo $new_file_name;?> " width="50" height="50" />  
    <div>
        <br><br>  
    <?php      
        echo str_replace("|", " ", $dress_feed_data['user_defined_place']);      
    ?>

    <br><br>

    <?php
    }    
    $i++;           
    }    
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T01:54:46.463

在将元素插入 DOM 之前，您将点击处理程序绑定到元素，

可能在第一次调用时没有称为 div 的元素存在，因此绑定变为无效，然后插入第一个元素。现在已经完成了第二个元素的绑定，现在它在匹配时附加到第一个元素`$('div')`。所以你只有一个工作。

干净的方法是将点击绑定从while循环中取出，使其只发生一次，并在DOM就绪事件上调用它

```
<script>
$(document).ready(function(){
  $("div").click(function(){
    $(this).slideUp();
    });
  });
</script> 
```

如果你想进行实时绑定，它适用于所有动态添加的图像以及使用委托：

```
<script>
$(document).ready(function(){
  $('body').on('click',"div",function(){
    $(this).slideUp();
    });
  });
</script> 
```

如果您使用 html 将上述图像发布到主机/父页面，只需将上述委托逻辑添加到父页面，然后仅发布图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T02:25:17.853

尝试这个 ：

```
<style>
div:hover { margin:10px 0; border:2px solid #021a40; cursor:pointer;}
</style>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script>
$(function(){
    $("div.randomImage").click(function() {
        $(this).slideUp();
    });
});
</script>
<?php
$num_dresses = dress_count();
$i=0;
while ($i < 2) {
?>
<?php
    $rand_id = rand(1, $num_dresses);
    $dress_feed_data = clothing_data($rand_id, 'file_name', 'user_defined_name', 'user_defined_place' , 'user_who_uploaded', 'match_1');
    $new_file_name = $dress_feed_data['file_name'];
    if (file_exists('fashion_images/' . $new_file_name)) {
        echo str_replace("|", " ", $dress_feed_data['user_defined_name']);
?>
<div class="randomImage">
    <img src="fashion_images/<?php echo $new_file_name;?>" width="50" height="50" />
</div>
<?php
        echo str_replace("|", " ", $dress_feed_data['user_defined_place']);
    }
    $i++;
}
?> 
```

笔记：

*   样式表和脚本移出 php while 循环。重复是不必要的，也是不受欢迎的。
*   jQuery 语句现在在一个`$(function(){...})`结构中，以确保它在文件准备好时运行，即。在浏览器解释提供的 HTML 以创建 DOM 元素之后。
*   class="randomImage" 添加到`<div>`
*   第二个`<div>`改为`</div>`
*   为了源代码和服务页面的可读性，PHP 和 HTML 是独立缩进的。

我没有尝试验证 PHP。

# c# - ClientBase 创建通道方法

> ID：11552825
> 
> 赞同：0
> 
> 时间：2012-07-19T01:42:01.047
> 
> 标签：c#, wcf

我按照以下链接中的教程进行操作：[http](http://wcftutorial.net/WCF-Self-Hosting.aspx) : //wcftutorial.net/WCF-Self-Hosting.aspx 来学习基本的自托管，我被困在第 10 位。

有人可以解释一下 xml 文件应该如何为我工作吗？我应该创建一个类似的 xml 文件，但是我应该在哪里保存它的扩展名和位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T03:26:18.657

您需要为项目创建一个 App.Config 文件。然后将文件内容复制到该文件，并构建项目。它应该工作。

# c# - 在 asp.net 4 和 C# 中单击按钮时，将文本框值传递给网格视图内的标签

> ID：11552826
> 
> 赞同：0
> 
> 时间：2012-07-19T01:42:14.877
> 
> 标签：c#, asp.net, visual-studio-2010, asp.net-4.0

我有 2 个 asp：面板。一个 asp:panel 包含一个文本框和一个按钮，其代码如下

```
 <asp:TextBox ID="tbGoal" runat="server" CssClass="textbox" Width="222px" Height="26px"></asp:TextBox><br />

<asp:Button ID="btnUpdate" runat="server" Text="Update Goal" CssClass="button"  OnClick="btnUpdate_Click" />

/* **************************************************************************** 
*                     CODE BEHIND
*
******************************************************************************** */

protected void btnUpdate_Click(object sender, EventArgs e)
{
    // I am trying to pass the updated textbox value to a label which is inside a GridView
   // which is inside the second ASP:PANEL  
} 
```

有人可以告诉我这是否可能。欣赏它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T02:04:16.877

首先，确定标签所在的行。

第二，确定是否可以找到`FindControl`网格视图选定行的标签的方法。

找到控件后，设置值。

以下仅为示例，可能不准确。

```
Label l = (Label)gv.rows[0].FindControl["label"] //again determine the index.

if (l != null)
    l.text = textbox.Text 
```

**选择：**

更改绑定到 Gridview 的数据集，而不是修改网格值。最终，这些值很可能无论如何都必须保存/存储，所以首先要做。

# c# - 从 sql server 在 javascript 中创建 HTML 表

> ID：11552828
> 
> 赞同：0
> 
> 时间：2012-07-19T01:42:20.677
> 
> 标签：c#, javascript, asp.net

我有一个从我的 SQL Server 2008 数据库中获取的标准数据集。

```
ID       Name
1        Joe
2        Ted 
```

我通常使用 c# 处理数据并将其添加到表中。

我想在我的页面上用 javascript 创建一个表格，但我不知道从哪里开始。

此表中的列和行明显更多，但为方便起见，我只包含了一小部分数据。

```
 <div id="divWhatIf" runat="server">
                <table id="tblWhatIfByMonth" border="1" cellpadding="0" cellspacing="0" runat="server">
                    <tr id="rowWhatIfHeaderRow" runat="server">
                    </tr>
                </table>
            </div> 
```

我的 aspx 页面看起来像，我想将每个数据行添加到 tblWhatIfByMonth。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T02:20:15.353

您可以使用 AJAX 来获取表格的内容。响应文本可以是表格的整个标记（这让生活变得非常简单），或者如果只需要替换表格的一部分，则将数据作为[JSON](http://www.json.org/)格式的文本发送。

JSON 被转换为可用于创建表的对象，例如

```
[
  {"ID":"1","Name":"Joe"},
  {"ID":"2","Name":"Ted"}
] 
```

或者

```
[
  ["ID","Name"],
  ["1","Joe"],
  ["2","Ted"}
] 
```

您还可以发送 CSV 数据并对其进行解析（例如使用正则表达式）并构建全部或部分表格。

# jquery - SVG 从中心缩放

> ID：11552831
> 
> 赞同：1
> 
> 时间：2012-07-19T01:43:12.417
> 
> 标签：jquery, svg, jquery-animate, scale, center

我一直在尝试在我的网站上缩放我的徽标，以便填充背景。这个想法是整个浏览器视口应该“潜入”徽标的中心。为此，我制作了徽标的 SVG 文件，并将 jQuery SVG 包含在我的网站中。

我已经开始掌握 jQuery SVG 动画的窍门，但我无法让整个东西从中心缩放。在研究时，我想到了一个想法，即应该在缩放时翻译 SVG，但我还没有完全弄清楚算法或如何将它与 jQuery animate 一起使用。

如果有人可以提供答案，我将不胜感激。

该项目位于此处（以及动画的当前状态）：[http ://danieldunderfelt.com](http://danieldunderfelt.com)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T03:28:00.613

这实际上只是一个 CSS 问题。一开始，您正在使用

```
position: absolute;
top: 50%;
left: 50%;
margin: -60px 0 0 -50px; 
```

将包含小 svg 的部分居中。这是古老的经典负边距技巧。

问题是，当您放大 svg 时，您还需要将负边距增加到您尚未完成的新（更大）高度和宽度的一半。要么，要么将`top`值设置为零，这样它就不会向下推。这不是特定于 svg 的问题。您需要为元素的比例和将其定位在页面上的 css 值设置动画。现在你只做第一个。

我建议使用 margin: auto 来使您的部分水平居中。为自己节省一些工作。然后设置 the`top`和 the ，`top-margin`以便在动画结束时将它们放在您想要的位置。

PS 我不确定你是否需要 jquery-svg 来解决这个问题。只需在标记中编写 svg 内联，然后使用 jquery`animate()`进行动画 css 更改。

# php - PHP 连接优先级

> ID：11552834
> 
> 赞同：6
> 
> 时间：2012-07-19T01:44:21.623
> 
> 标签：php, casting, operator-precedence

这种行为在 PHP 中是否正确？

```
<?php echo '-' . 1 + 1 . ' crazy cats'; ?>
// Outputs:
0 crazy cats 
```

我知道减号被连接到第一个'1'和'-1'转换为整数，而不是'2'到字符串。

请解释原因。

解决它的最佳方法是什么？这个？

```
<?php echo '-' . (string)1 + 1 . ' crazy cats'; ?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T01:52:39.023

首先，它是正确的，如果它不同，它也是正确的，这就是 PHP 开发人员定义操作数优先级的方式。
在这种情况下，没有操作数具有优先级，所以你从左到右阅读它

1.  `'-' . 1 ==> '-1'`
2.  `'-1' + 1 ==> 0`（对字符串的算术运算，将尝试先将它们转换为数字，然后再进行算术运算）。
3.  `0 . ' crazy cats' ==> "0 crazy cats"`（对数字的字符串操作，会将它们转换为字符串）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T01:54:49.213

如果你想要-2个疯猫，你可以用括号设置操作优先级：

```
echo '-' . (1 + 1) . ' crazy cats'; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-19T02:28:36.540

`echo`也遵循将`echo 'foo', 'bar'`项目分成不同的陈述以呼应的构造。在这种情况下，您不必担心连接顺序。

所以你可以这样做`<?php echo '-', (1 + 1), ' crazy cats'; ?>`，你的猫不会在乎底片！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T01:53:59.037

你的措辞已关闭。`'-'`不是被铸造而是被连接的。

PHP 仍将`(string) 1`and`-1`视为整数。

`.`并且`+/-`在 PHP 中具有相同的优先级，因此可以从左到右读取字符串。

上面类似于说：

```
echo '-1' + '1 crazy cats'; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-19T03:09:38.030

如果您愿意，这可以避免优先级：

```
printf('-%d crazy cats',1+1); 
```

# java - 用 Java 读取 JPEG

> ID：11552838
> 
> 赞同：5
> 
> 时间：2012-07-19T01:44:51.993
> 
> 标签：java, jpeg, javax.imageio

我正在尝试将 JPEG 转换为 a`BufferedImage`以显示在`JPanel`. 然而，`javax.imageio.ImageIO.read()`它似乎对它处理的 JPEG 非常挑剔，经常抛出`IIOException`. 几乎所有您想命名的图像阅读器都可以很好地打开相同的 JPEG。

我看过 Apache 的[Sanselan](http://commons.apache.org/imaging/)和[JAI](http://www.oracle.com/technetwork/java/current-142188.html)。但是 Sanselan 不能处理 JPEG，而且 JAI 不适用于 64 位 Windows 平台，而且似乎也没有得到维护（最后一次更新是在 2006 年）。[StackOverflow](https://stackoverflow.com/questions/7177655/java-imageio-iioexception-unsupported-image-type)上的先前答案建议 `com.sun.image.codec.jpeg.JPEGCodec`，但这在 Java 5 中已被弃用，并在 7 中消失。

这些是我唯一的选择吗？真的没有 Java 库能够稳健地将 JPEG 读入`BufferedImage`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T03:55:58.247

众所周知，诸如[createImage](http://docs.oracle.com/javase/7/docs/api/java/awt/Toolkit.html#createImage%28java.lang.String%29)和[getImage](http://docs.oracle.com/javase/7/docs/api/java/awt/Toolkit.html#getImage%28java.lang.String%29)之类的旧版[Toolkit](http://docs.oracle.com/javase/7/docs/api/java/awt/Toolkit.html)方法比.`ImageIO`

Werner Randelshofer 还编写了一个[服务提供程序](http://www.randelshofer.ch/blog/2011/08/reading-cmyk-jpeg-images-with-java-imageio/)来读取带有`ImageIO`.

通过结合这两种方法（尝试所有可能的`ImageReader`然后回退到`Toolkit`），您将能够处理合理数量的 JPEG 图像。

[阅读带有 CMYK 配置文件的 JPEG](http://www.javahelp.info/2009/10/31/reading-jpegs-with-cmyk-profile/)可能会很有趣。

# makefile - 临时标记makefile中的一些目标

> ID：11552841
> 
> 赞同：1
> 
> 时间：2012-07-19T01:44:57.947
> 
> 标签：makefile, gnu-make

我希望编译**$(APPS)**的部分目标，但不包括makefile中**$(OFF)中的目标：**

```
APPS = a b c d e f g
OFF = d e

all: $(APPS)

partial: $(APPS) - $(OFF) 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T02:04:21.037

我可能会采取稍微不同的方法：

```
ON = a b c f g
OFF = d e
APPS = $(ON) $(OFF)

partial: $(ON) 
```

但是，如果这对于您的需求来说过于简单，那么有一个[`filter-out`函数](http://www.gnu.org/software/make/manual/html_node/Text-Functions.html#Text-Functions)可以提供您想要的确切操作：

```
 objects=main1.o foo.o main2.o bar.o
      mains=main1.o main2.o
      $(filter-out $(mains),$(objects)) 
```

我认为以这种格式重写您的示例将是：

```
APPS = a b c d e f g
OFF = c d

partial: $(filter-out $(APPS),$(OFF)) 
```

# ruby-on-rails - Rails - 限制 has_many 关系以显示特定列名的每个唯一值的 1 个项目

> ID：11552847
> 
> 赞同：1
> 
> 时间：2012-07-19T01:47:17.630
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

我有一`Person`堂课，里面有很多`Contact`东西。这些`Contact`项目有一列`field_name`指定条目是否是电话号码、推特 ID、电子邮件地址等。对于某些人，我有许多`Contact`项目具有该人的不同电话号码。但是，我只需要显示最流行的一个（`popularity`是另一`Contact`列，目前它是 default_scope）。

所以我需要的是一个查询，它可以让我做类似的事情`Person.find(1).contacts(:LIMIT_TO_1_PER_FIELD_NAME)`

我目前正在以一种糟糕的方式执行此操作，每个 field_name 有一个查询，我确信有更好的方法可以做到这一点，但我对尝试的事情感到茫然。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T02:40:59.210

我不完全确定我理解你的问题，但从我得到的，这样的事情怎么样：

```
person = Person.find(1)
person.contacts.order('popularity DESC').limit(1) 
```

**更新** 这可以重构为：

```
#contact.rb
default_scope order('popularity DESC')    

#person.rb
def best_contact(field_name)
  contacts.where(field_type:field_name).first
end 
```

然后调用它：

```
person = Person.find(1)
person.best_contact('phone') 
```

# amazon-web-services - AWS 命令 行工具需要重新编码以实现安全登录？

> ID：11552850
> 
> 赞同：5
> 
> 时间：2012-07-19T01:47:57.657
> 
> 标签：amazon-web-services, mechanicalturk

AWS 命令​​行工具在 Linux (Ubuntu PP) 和 Windows (7) 上似乎都被破坏了。在这两种情况下，在正确设置登录凭据并尝试运行最基本的工具 ( `getBalance.sh`) 后，我都无法进行身份验证。

```
An error occurred while fetching your balance: This request must be made over a secure channel. You must use 'https' rather than 'http'. 
```

看起来很简单，但是手册和安装目录中没有任何内容表明这是命令行工具支持的选项。

是否有人已经修改了 shell 脚本以使用安全连接？如果没有，关于我应该从哪里开始修改的任何线索？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-13T09:17:43.323

我没有广泛使用这些工具，所以不能说这个解决方案经过了广泛的测试，但是 getBalance.sh 在这样做之后工作了

看到这个线程：

[https://forums.aws.amazon.com/message.jspa?messageID=333485](https://forums.aws.amazon.com/message.jspa?messageID=333485)

从链接：

> 编辑命令行工具安装目录\bin\mturk.properties 文件并编辑 service_url 以使用 https 而不是 http – 即[https://mechanicalturk.amazonaws.com/?Service=AWSMechanicalTurkRequester](https://mechanicalturk.amazonaws.com/?Service=AWSMechanicalTurkRequester)用于生产，以及[https://mechanicalturk。 sandbox.amazonaws.com/?Service=AWSMechanicalTurkRequester](https://mechanicalturk.sandbox.amazonaws.com/?Service=AWSMechanicalTurkRequester)用于沙盒。

# javascript - 正则表达式禁止 ._ 或 .- （电子邮件验证 / javascript）

> ID：11552852
> 
> 赞同：-1
> 
> 时间：2012-07-19T01:48:03.753
> 
> 标签：javascript, regex

这是我当前的正则表达式：

```
^([-a-zA-Z0-9'_+\/]+([-.'_+\/][-a-zA-Z0-9'_+\/]+)*)@(([a-zA-Z0-9]+((\.|[-]{1,2})[a-zA-Z0-9]+)*)\.[a-zA-Z]{2,6})$ 
```

验证电子邮件地址（是的，我知道我不应该尝试验证电子邮件地址，除非使用最简单的术语，但是我们的电子邮件供应商将拒绝特殊字符等）。

这个正则表达式满足所有要求，除了一个 -

> “在一段时间后没有连字符或下划线”

正则表达式不是我的专长，尽管我能够到达这里。任何帮助，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T01:53:06.697

`(...)`您的正则表达式（除了以开头的分组`^[-a-zA-Z0-9'_+\/]+`，这意味着开头`^`后面跟着一个或多个`+`允许的字符`[...]`。在这种情况下，它们是连字符、小写/大写字母、数字、撇号、下划线、加号或前斜线。

第二部分是你需要改变的。在您的正则表达式中它是`([-.'_+\/][-a-zA-Z0-9'_+\/]+)*`，这是一种可能多次出现的模式，但也不必`*`. 该模式有两部分： 一个允许的字符：连字符、句点/点、撇号、下划线、加号或前斜线；后跟一个或多个连字符、小写/大写字母、数字、撇号、下划线、加号或前斜线。

如果您从模式的第一部分删除句点/点，则不允许使用此字符。但是因为您希望允许句点/点，但不能使用相同的字符集，所以必须定义替代模式。

如果第二部分将从您`([-.'_+\/][-a-zA-Z0-9'_+\/]+)*`的模式更改为具有 period/dot: 替代方案的模式`([-'_+\/][-a-zA-Z0-9'_+\/]+|\.[a-zA-Z0-9'+\/]+)*`，那么最终的正则表达式将满足您的需求。如您所见，`|\.[a-zA-Z0-9'+\/]+`已添加，内容为：或`|`模式单个句点/点后跟一个或多个小写/大写字母、数字、撇号、加号或前斜线。

最终的正则表达式是：

```
^([-a-zA-Z0-9'_+\/]+([-'_+\/][-a-zA-Z0-9'_+\/]+|\.[a-zA-Z0-9'+\/]+)*)@(([a-zA-Z0-9]+((\.|[-]{1,2})[a-zA-Z0-9]+)*)\.[a-zA-Z]{2,6})$ 
```

# iphone - iOS-如何在代码开始之前显示 alertView

> ID：11552853
> 
> 赞同：2
> 
> 时间：2012-07-19T01:48:13.400
> 
> 标签：iphone, ios, ibaction, alertview

我有以下代码：

```
-(IBAction)showAlertView:(id)sender{

alertView = [[UIAlertView alloc] initWithTitle:@"Atualizando" message:@"\n"delegate:self cancelButtonTitle:nil otherButtonTitles:nil];

spinner = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];   
spinner.center = CGPointMake(139.5, 75.5); // .5 so it doesn't blur
[alertView addSubview:spinner];
[spinner startAnimating];
[alertView show]; 
}

-(IBAction)getContacts:(id)sender {

[self showAlertView:(id)self];

ABAddressBookRef addressBook = ABAddressBookCreate( );
CFArrayRef allPeople = ABAddressBookCopyArrayOfAllPeople( addressBook );
CFIndex nPeople = ABAddressBookGetPersonCount( addressBook ); 
```

我想在 IBAction 的其余部分开始之前显示警报，但我只在 IBAction 结束时看到 alertView。我究竟做错了什么？

**编辑：**我有：

```
-(IBAction)getContacts:(id)sender {

// display the alert view
[self showAlertView:self];

// do the synchronous operation on a different queue
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

ABAddressBookRef addressBook = ABAddressBookCreate( );
CFArrayRef allPeople = ABAddressBookCopyArrayOfAllPeople( addressBook );
CFIndex nPeople = ABAddressBookGetPersonCount( addressBook ); 
```

`....`

```
if ([contact length] == 8) {

            NSString *first = (NSString*)ABRecordCopyValue(person, kABPersonFirstNameProperty);
            NSString *last = (NSString*)ABRecordCopyValue(person, kABPersonLastNameProperty);
            NSString *phone = contact;
            ContactInfo *user1 = [[ContactInfo alloc] init];
            user1.first = first;
            user1.last = last;
            user1.phone = phone;
            user1.person = person;
            user1.phoneIdx = j;
            user1.book = addressBook;
            NSLog(@"phone is %@", phone);
            [secondViewController.users addObject:user1];
        }
        ABRecordSetValue(person, kABPersonPhoneProperty, mutablePhones, &error);
    }
}
bool didSave = ABAddressBookSave(addressBook, &error);
if(!didSave){
    NSLog(@"error!");
}
dispatch_async(dispatch_get_main_queue(), ^{
    [self hideAlertView]; // or however you want to do it
});

UIAlertView *alertAlmost = [[UIAlertView alloc] initWithTitle:@"Quase Pronto" message:@"Os seguintes contatos não tem código de área. Porfavor, selecione os contatos que você deseja adicionar o digito 9 e pressione Ok (caso não queira adicionar em nenhum, pressione Ok) " delegate:self cancelButtonTitle:@"Ok!" otherButtonTitles:nil];
[alertAlmost show];

[self presentViewController: secondViewController animated:YES completion: NULL];
 });
} 
```

我希望解除警报，然后我可以调用表格视图。有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T02:02:48.000

显示 a`UIAlertView`是异步完成的，因此如果您`showAlertView:`在方法的顶部调用，它将显示警报视图，然后立即返回，然后执行方法的其余部分。

如果您希望在关闭警报视图后发生其余方法，则需要将自己添加为警报视图`delegate`，然后实现该方法

```
- (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex 
```

并在那里做剩下的事情。

* * *

**编辑：**好的，我想我明白了你的问题。您正在主队列上执行一些耗时的同步操作，这会阻止它，以便稍后才会显示警报视图。

您应该将耗时的操作移至不同的队列，如下所示：

```
-(IBAction)getContacts:(id)sender {
    // display the alert view
    [self showAlertView:self];

    // do the synchronous operation on a different queue
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        ABAddressBookRef addressBook = ABAddressBookCreate( );
        CFArrayRef allPeople = ABAddressBookCopyArrayOfAllPeople( addressBook );
        CFIndex nPeople = ABAddressBookGetPersonCount( addressBook );

        // once this operation has finished, you can hide the alert view like so:
        dispatch_async(dispatch_get_main_queue(), ^{
            [self hideAlertView]; // or however you want to do it
        });
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T02:01:49.897

`getContacts:`当您的警报被解除时，您需要执行“”中的其余代码。在“”的 UIAlertView 上设置一个委托`self`（显示警报的视图控制器），然后在用户单击按钮以解除警报时执行“地址簿”操作。

例如，实现 UIAlertViewDelegate 方法[`alertView:clickedButtonAtIndex:`](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIAlertViewDelegate_Protocol/UIAlertViewDelegate/UIAlertViewDelegate.html#//apple_ref/occ/intfm/UIAlertViewDelegate/alertView%3aclickedButtonAtIndex%3a)并在其中处理您的地址簿内容（我为您链接了文档）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T02:20:33.383

我想你是说你想弹出一个警报，就像一个进度指示器，**当**那个警报出现时，你想开始你的另一个过程。目前，您请求立即显示警报，但正如其他答案所说，该调用是异步的，并且 UI 线程无法在开始其他工作之前显示警报。

你可以试试这个：

```
-(IBAction)getContacts:(id)sender {

    [self showAlertView:(id)self];
    [self performSelectorInBackground: @selector(initAddressBook) withObject: nil];
}

-(void)initAddressBook {
    ABAddressBookRef addressBook = ABAddressBookCreate( );
    CFArrayRef allPeople = ABAddressBookCopyArrayOfAllPeople( addressBook );
    CFIndex nPeople = ABAddressBookGetPersonCount( addressBook );
} 
```

如果在后台运行地址簿工作时出现问题，您甚至可以给 UI 线程足够的时间来发布警报，如下所示：

```
-(IBAction)getContacts:(id)sender {

    [self showAlertView:(id)self];
    [self performSelector: @selector(initAddressBook) withObject: nil afterDelay: 0.1f];
} 
```

# html - 背景拒绝适合整个页面 CSS

> ID：11552858
> 
> 赞同：1
> 
> 时间：2012-07-19T01:48:33.253
> 
> 标签：html, css

所以我有一个 2300 像素长的背景。但是当单击更多按钮并且页面扩展时，背景停止在 1400 像素左右。这是有问题的网站。[http://morzi.com/constantine/index.php](http://morzi.com/constantine/index.php) 这是非常令人沮丧的，因为昨天一切都很完美，我做了一些小的调整，一切都变糟了，现在我很难过。

我只想让背景一直持续到页面下方谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T01:51:14.313

我在 HTML CSS 中添加了背景，现在它似乎工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T02:09:19.010

您是否尝试设置背景图像大小属性？

就像是

```
background-size:100% 100%; 
```

或者有一个类似的解决方案：

[http://css-tricks.com/how-to-resizeable-background-image/](http://css-tricks.com/how-to-resizeable-background-image/)

希望这可以帮助

# php - 特殊字符的 PHP 编码 iso-8859-1

> ID：11552866
> 
> 赞同：1
> 
> 时间：2012-07-19T01:49:49.270
> 
> 标签：php, character-encoding

我的 PHP 脚本解析一个网站并拉出一个看起来像这样的 HTML DIV（并将其保存为字符串）

```
<div id="merchantinfo">The following merchants: Nautica®, Brookstone®, Teds® ©2012 Blabla</div> 
```

我将其存储为 $merchantList（字符串）。

但是，当我将数据输出到网页时

```
echo $merchantList 
```

编码变得混乱并显示为：

```
NauticaÃ‚Â®, BrookstoneÃ‚Â®, TedsÃ‚Â® Â©2012 Blabla 
```

我尝试将以下内容添加到显示页面：

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
</head> 
```

但这并没有做任何事情。 - 谢谢

**编辑::** ------------

对于这个问题，接受的答案是正确的。

但我意识到我的实际问题略有不同。

使用 DOMDocument::loadHTML 的初始解析已经破坏了 UTF-8 编码，导致字符串另存为

```
<div id="merchantinfo">The following merchants: NauticaÃ®, BrookstoneÃ®, TedsÃ® ©2012 Blabla</div> 
```

这是通过以下方式解决的：

```
$html = mb_convert_encoding($html, 'HTML-ENTITIES', "UTF-8");
$dom->loadHTML($html); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T01:54:09.520

采用：

```
ini_set('default_charset', 'UTF-8'); 
```

并且不要使用 iso-8859-1。使用 UTF-8。

从您发布的 mojibake 中，输入字符串是 utf-8，而不是 iso-8859-1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-30T16:38:51.697

您只需要使用[htmlspecialchars_decode](http://php.net/manual/en/function.htmlspecialchars-decode.php)函数，例如：

```
$string = '&quot;hello dude&quot;';
$decodechars = htmlspecialchars_decode($string);
echo $decodechars; // output : "hello dude" 
```

# ios - 开始/结束外观转换的不平衡调用...- UIViewController 包含

> ID：11552871
> 
> 赞同：1
> 
> 时间：2012-07-19T01:50:49.757
> 
> 标签：ios, uiviewcontroller, uinavigationcontroller, uikit, uitabbarcontroller

![在此处输入图像描述](../Images/87ac89b3d17a61013d544a689fddd9a0.png)

好的，所以苹果在 iOS 5 中引入了视图控制器容器（太棒了！）

以上是我的应用层的样子。TabBar 包含 NavController 包含 ViewController（容器），它包含 2 个表视图，由分段控件切换。

当我选择一个表格单元格时，它会轻松推送新视图。但是，如果我在 detailViewController 中按下一个按钮，我希望它以模态方式显示 MFMailComposeViewController。它短暂地呈现自己，然后立即消失。我得到的错误日志是：

> 对 UITabBarController 的开始/结束外观转换的不平衡调用

现在，这意味着我试图在另一个视图仍在显示或在运行时循环中时呈现一个视图，我尝试添加延迟来阻止它，但没有任何效果。我已经添加了我的所有代表，并正确导入了我的所有库。

我认为这可能与我如何从原始 tableview 推送新视图或如何将视图加载到容器中有关。该项目使用 Xcode 的 Tab Bar 应用程序模板的基本代码，如您所知。这是代码：

视图控制器/容器

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // Alloc Init View Controllers
    menuDrinksViewController = [[MenuDrinksViewController alloc] init];
    menuFoodViewController = [[MenuFoodViewController alloc] init];

    // Create Parent/Child relationship
    [menuFoodViewController didMoveToParentViewController:self];
    [self addChildViewController:menuFoodViewController];

    [menuDrinksViewController didMoveToParentViewController:self];
    [self addChildViewController:menuDrinksViewController];

    [appearanceClass setBackgroundImage:self.view];

    // segmented controller
    segmentedControl = [[SVSegmentedControl alloc] initWithSectionTitles:[NSArray arrayWithObjects:@"              Eat              ", @"               Drink               ", nil]];
    [segmentedControl addTarget:self action:@selector(segmentAction:) forControlEvents:UIControlEventValueChanged];
    [appearanceClass setSegmentedControl:segmentedControl];
    [self.view addSubview:segmentedControl];

    //self.view.backgroundColor = [UIColor redColor];

    // Add and Size subviews
    [self.view addSubview:menuFoodViewController.view];
    menuFoodViewController.view.frame = CGRectMake(0, 39, 320, self.view.frame.size.height - 40 + 1);
    menuDrinksViewController.view.frame = CGRectMake(0, 39, 320, 327 + 1);
}

-(IBAction)segmentAction:(id)selector
{
    // it's a custom segmented control, dw bout the code.
    if (segmentedControl.selectedIndex == 0)
    {
        [self.view addSubview:menuFoodViewController.view];
        [menuDrinksViewController.view removeFromSuperview];
    }
    else if (segmentedControl.selectedIndex == 1)
    {
        [self.view addSubview:menuDrinksViewController.view];
        [menuFoodViewController.view removeFromSuperview];
    }

} 
```

表视图控制器

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    MenuFoodDetailViewController *menuFoodDetailViewController = [[MenuFoodDetailViewController alloc] initWithNibName:nil bundle:nil];
    //MenuFoodDetailViewController *menuFoodDetailViewController = [[MenuFoodDetailViewController alloc] init];

    [self.parentViewController.navigationController pushViewController:menuFoodDetailViewController animated:YES];
    [tableView deselectRowAtIndexPath:indexPath animated:NO];
} 
```

来自详细视图控制器的 ButtonPress 代码。

```
- (void)showMailComposer
{
    // attempt to delay the presentModalView call, doesnt work...
    double delayInSeconds = 0.1;
    dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
    dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
        [self.navigationController presentModalViewController:mailComposeViewController animated:YES];
    });
} 
```

我知道这有很多问题要问，但我已经在这个问题上待了好几天了。所有与视图无关的代码，即 MFMailViewComposer 工作正常，我已经在其他应用程序中对其进行了测试。

我已经尝试了各种变化来推动新的模态视图，即 `self.parentViewController.navigationController presentModal...`（等）

什么都没有工作=/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T14:53:29.323

原来这是iOS5中的一个错误。在一个单独的项目上重新创建代码后，它工作了。因此，我将问题追溯到 iOS5 外观自定义协议，当我尝试更改 UINavigationBar 中的字体时，它会导致 MFMailComposeViewController 中的错误和 iOS6 中的另一个模式视图。

我已经向 Apple 提交了雷达

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T22:58:22.940

我前两天也遇到了同样的问题。。

尝试这个..

当您按下“detailViewController”上的按钮时，您正试图以模态方式呈现 MFMailComposeViewController，对吗？

因此，它引发异常的一个原因是，一旦您以模态方式显示 MFMailComposeViewController，就会释放“detailViewController”。因此，MFMailComposeViewController 无法返回到“detailViewController”。

检查您是否在“detailViewController”上使用了自动释放或在“detailViewController”的析构函数中放置断点并对其进行调试。

# opencv - OpenCV：cv::imshow() 冻结

> ID：11552872
> 
> 赞同：2
> 
> 时间：2012-07-19T01:50:54.637
> 
> 标签：opencv, freeze

我编写了一些代码，目前由两个窗口组成，以显示某些处理算法的不同阶段。很简单，我已经创建了两个窗口`cv::namedWindow()`，并且我正在`cv::Mat`显示`cv::imshow()`。我遇到了一个问题，即不时随机（但并非总是）`cv::imshow()`拒绝更新两个窗口。该程序没有挂起，我可以看到它仍在工作并处理传入的帧（因为我正在将内容打印到终端以显示这一点），只是窗口没有显示新帧。我`cv::waitKey(2)`在每次调用后都包括在内`cv::imshow()`，但这无济于事。

这很烦人，我似乎在网上找不到任何东西。这并不总是发生，但它经常发生。有时需要几分钟，有时需要几秒钟。

我正在使用带有 OpenCV 2.3.1 的 Ubuntu 12.04（和 Ubuntu 11.10 - 这发生在我的两台带有两个不同摄像头的机器上）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:32:40.930

One way I've been able to get around that issue is by using cv::destroyWindow() after calling a window. This works well if you're just showing a sequence of images, but not so well if you're showing video.

# c - 如何使用C反转字符串？

> ID：11552875
> 
> 赞同：0
> 
> 时间：2012-07-19T01:51:15.360
> 
> 标签：c, string, pointers, reverse

我想用 C 语言反转一个字符串。我有点新，所以我很想得到一些帮助和解释。为什么我的解决方案不起作用？

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <string.h>

char *rev(char *str) {
  char *q = str;
  int len = strlen(str);
  char *p = (char*)calloc(len+1, sizeof(char));
  int j=0;
  if (NULL == str || len == 1) return str;
  for (j = len+1 ; j > 0 ; j-- ) {
    p[j]=*q;
    q++;
  }
  return p;
}

int main(int argc, char **argv){
  char *t = argv[1];
  char *p ;
  printf("%s",t);
  p=rev(t);
  printf("%s",p);
  getchar();
  return 0;
} 
```

它不工作:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T02:10:05.120

首先，你很聪明地使用`calloc`它来确保你的结果缓冲区最后为零。

但它也把零放在了开头！

您的循环终止条件`j > 0`意味着您从未在结果中填充插槽 0。

因此，当您尝试打印时`p`，它指向的缓冲区中的第一个字符包含一个`\0`-- 标记字符串的结尾，因此您的结果*始终是空字符串*。

我在[http://codepad.org/QppfYQkm](http://codepad.org/QppfYQkm)做了一些“修复” （我没有更改格式，我对参数进行了硬编码，因此它是独立的。）

旁白：我删除了您对`if (len == 1) return str`. 不要这样做！如果您有一个单字符的字符串，您将返回与保存参数的缓冲区相同的缓冲区，这意味着对该结果的更改会破坏您的输入。将这些缓冲区分开。

你真的很亲近。:)

**附录**

这是一些使用命令行参数的代码：

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <string.h>

char *rev(char *str) {
  char *q = str;
  int len = strlen(str);
  char *p = (char*)calloc(len + 1, sizeof(char));
  int j;

  if (NULL == str) return NULL;

  for (j = len-1 ; j >= 0 ; j--) {
    p[j] = *q;
    q++;
  }
  return p;
}

int main(int argc, char **argv) {
  if (argc > 1) {
    char *t = argv[1];
    char *p ;

    printf("%s\n",t);
    p = rev(t);
    printf("%s\n",p);

    return 0;
  }
} 
```

当我运行它时：

```
$ gcc rev.c && ./a.out "hello there, reverse me"
hello there, reverse me
em esrever ,ereht olleh
$ gcc rev.c && ./a.out ""

$ gcc rev.c && ./a.out
$ 
```

该程序适用于文本和空字符串。当没有参数时，它默默地什么也不做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T02:04:12.970

您必须小心边界处的索引。

一种解决方法是`for`用这个替换你的行：

```
for (j = len-1; j >= 0 ; j-- ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T02:06:25.527

您需要遍历列表的一半（向下舍入，如果它是奇数长度的字符串，则中间字符不能反转），然后通过临时变量交换它。

您正在编写超过一半的字符串，因为您没有使用临时变量。尝试类似：

```
for( j = 0; j < len / 2; ++j ) {
    char tmp = p[ j ];
    p[ j ] = p[ len - j - 1 ];
    p[ len - j - 1 ] = tmp;
} 
```

编辑：这样做到位；如果您在另一个缓冲区中执行此操作，则需要添加 p[len] = 0;

# regex - 正则表达式匹配确切的短语，短语之前或之后没有任何内容

> ID：11552877
> 
> 赞同：48
> 
> 时间：2012-07-19T01:51:52.890
> 
> 标签：regex

我不确定这是否完全可能。考虑这个示例数据集：

```
Mountain
Big mountain
Mountain of stone
A mountain on a hill 
```

我想匹配山。没有其他的。该系列没有其他部分。正是准确的路线，山。我尝试过的所有东西要么匹配 Mountain 的所有实例，要么不匹配。很多人都想匹配一个确切的单词或短语，但我似乎是唯一一个只想匹配一个确切的单词或短语的人。

如果这可以扩展为一个完美的短语。认为：

```
Go for a hike
Go for a hike, on a mountain.
I want to go for a hike. 
```

我只想匹配“去远足”但没有包含它的短语。

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-07-19T01:54:14.457

要匹配确切的“Mountain”行，请使用以下命令： `/^Mountain$/`

你还没有提到你正在使用什么语言，所以模式的确切形式可能必须改变。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T03:51:28.970

如果您有一个包含多行的字符串，以下两个正则表达式可能会有所帮助：

```
\r\nWORD\r\n|^WORD\r\n|\r\WORD$|^WORD$

\r\nA\sPHRASE\r\n|^A\sPHRASE\r\n|\r\A\sPHRASE$|^A\sPHRASE$ 
```

# jquery - jquery 电子邮件验证有效的电子邮件地址，如 gmail.com

> ID：11552878
> 
> 赞同：-1
> 
> 时间：2012-07-19T01:52:12.453
> 
> 标签：jquery, validation, email

```
 $('#reg_submit').click(function () {
               var reg_email = $('#reg_email').val();

 var errorMessage = '';
 if (reg_email == '') {
 errorMessage = "please enter email";
 $('#msg_regemail').html(errorMessage).show();
} else {
if ((!(/\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b/im.test(reg_email)))) {
errorMessage ="please enter valid email id" ;
$('#msg_regemail').html(errorMessage).show();
} else {
 $('#msg_regemail').html('').hide();
} 
} 
```

我有这个代码来检查空的电子邮件字段和无效的电子邮件格式。但现在我的要求是验证电子邮件地址，如 gmail.com、yahoo.com。如果我输入 xyz@xy.com，它应该显示错误消息，如无效电子邮件。所以 jquery 应该只接受 gmail.com 等电子邮件 ID。任何人都可以建议上述要求的代码。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T02:01:14.130

如果您只是检查简单的电子邮件地址，则可以使用此正则表达式来提取域，然后对照预制列表进行检查。您也可以制作一个非法列表并对其进行检查。

```
var legalDomains = {
    "-yahoo.com": true,
    "-gmail.com": true,
    "-hotmail.com": true,
    "-msn.com": true
};

var matches = reg_email.match(/@(.*)$/);
if (matches) {
    // matches[1] is the part after the @ sign in the email address
    if (("-" + matches[1]) in legalDomains) {
        // found the domain in the permitted list
    }
} 
```

注意：列表中使用前导“-”以确保我们永远不会匹配 javascript 对象上的任何内置方法名称，例如“keys”或“create”，这会为某些单词提供错误的答案。

工作演示：http: [//jsfiddle.net/jfriend00/rTzUd/](http://jsfiddle.net/jfriend00/rTzUd/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T02:14:05.493

请试试这个：**工作版本： http:** [//jsfiddle.net/Uummr/2/show/](http://jsfiddle.net/Uummr/2/show/) **代码** [http://jsfiddle.net/Uummr/2/](http://jsfiddle.net/Uummr/2/)

您所需要的只是一个允许的合法域名来源，其余的将像魅力一样发挥作用。在这种情况下，除了法律电子邮件之外，它不会接受任何其他电子邮件，即`var emailLegalReg = /^([\w-\.]+@(?!gmail.com)(?!yahoo.com)(?!hotmail.com)(?!aol.com)([\w-]+\.)+[\w-]{2,4})?$/;`

*读这个：（*我做了相反的事情）[http://www.designchemical.com/blog/index.php/jquery/email-validation-using-jquery/](http://www.designchemical.com/blog/index.php/jquery/email-validation-using-jquery/)

希望这有助于事业`:)`

**代码**

```
// prepare the form when the DOM is ready
$(document).ready(function() {

        $('#btn-submit').click(function() {  

                $(".error").hide();
                var hasError = false;
                var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
                var emailLegalReg =  /^([\w-\.]+@(?!gmail.com)(?!yahoo.com)(?!hotmail.com)(?!aol.com)([\w-]+\.)+[\w-]{2,4})?$/;

                var emailaddressVal = $("#UserEmail").val();
                if(emailaddressVal == '') {
                    $("#UserEmail").after('<span class="error">Please enter your email address.</span>');
                    hasError = true;
                } else if(!emailReg.test(emailaddressVal)) {    
                    $("#UserEmail").after('<span class="error">Enter a valid email address.</span>');
                    hasError = true;
                } else if(emailLegalReg.test(emailaddressVal)) {    
                    $("#UserEmail").after('<span class="error">No eamil apart from gmail, hotmail or yahoo is allowed.</span>');
                    hasError = true;
                }

                if(hasError == true) { return false; }
                else {
                    $("#UserEmail").after('<span class="error">Email accepted.</span>');
                    return false;
                }
    });    
}); 
```

**工作图像**

![在此处输入图像描述](../Images/f4b224ccb2f3c9de877a21fcdcad79b7.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T02:07:24.580

一个更复杂的（不是我创作的，但我用这个）

```
if(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(email)){
validated = true;
} 
```

您是否正在寻找 @jfriend 建议的特定域？

# c# - 在 C# 字符串中用“替换”

> ID：11552879
> 
> 赞同：0
> 
> 时间：2012-07-19T01:52:35.433
> 
> 标签：c#

我需要获取一个最初从文本文件中读取的字符串，并在字符串中找到的任何和所有双引号前面加上一个反斜杠。我试过

```
String myString = inputString.Replace("\"", "\\\""); 
```

乃至

```
String myString = "";
foreach (Char Character in inputString)
    if (Character == '"')
        myString += "\\\"";
    else
        myString += Character; 
```

但是，我仍然收到与收到的相同的字符串（双引号前没有反斜杠）。

在我的示例中，inputString 的一个值将在调试器中显示为“div id="loader""，并且我希望生成的 myString 为在调试器中看到的“div id=\"loader\""。

有没有人对我如何达到我想要的结果有任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T01:59:11.533

> inputString 的值将在调试器中显示为 ...

不要相信调试器。它尊重字符串中的转义序列。代码（或至少您的一次尝试）可能正在做它应该做的事情。

如果您使用您的第一个示例（后期编辑）并在受人尊敬的文本编辑器中检查输出，它应该可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T01:55:56.267

您使用的`+=`运算符不正确。

试试这个：

```
String myString = inputString.Replace("\"", @"\"""); 
```

# javascript - 是否可以在经过 HTML 转换的画布上使用 getDataImage？

> ID：11552893
> 
> 赞同：0
> 
> 时间：2012-07-19T01:54:42.637
> 
> 标签：javascript, html, canvas

我试图抓住画布的特定部分，然后以一种非常特殊的方式将该图像放回画布上。但是，get 和 put ImageData 方法似乎在不受图像操作影响的绝对画布上工作。有没有办法在 HTML5 中使用带有 get 和 put dataImage 操作的翻译？

我有一个以一定角度出现的线条图，我想捕获该图像，将其放在自己的画布上，对其进行一些处理，然后以确切的角度和位置将其放回画布上。我最初认为我可以通过根据绘图的位置和角度重新定位画布来做到这一点，但这不起作用，因为 get 和 put dataImage 使用绝对坐标而不是相对坐标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T02:53:10.130

您可以将数据发送到图像，并将图像绘制到新画布上进行处理。这样，您将获得画布上显示的内容，与显示的内容完全相同。

```
var img = new Image();
img.onload = function(){
    processingCanvas.width = this.width;
    processingCanvas.height = this.height;
    processingCanvas.drawImage(this,0,0);
}

img.src = originalCanvas.toDataURL(); 
```

并且繁荣，它在你的处理画布上（在你等待它之后）。只要您没有绝对巨大的画布，这种方法应该会很快奏效。只要得到你想要的一切，并确保它在画布上可见。然后您知道如何将处理后的数据返回到另一个画布。我希望这就是你要找的。

# asp.net - 无法加载类型“System.Web.Optimization.StyleBundle”

> ID：11552898
> 
> 赞同：10
> 
> 时间：2012-07-19T01:55:42.747
> 
> 标签：asp.net, asp.net-mvc

有时在构建并启动我的 MVC4 Web 应用程序后，我会收到此错误。它可以在重建或不重建后消失。发布到 Windows Azure 后，我遇到了同样的问题。

有谁知道如何解决这个错误？

```
Server Error in '/' Application.

Could not load type 'System.Web.Optimization.StyleBundle' from assembly 'System.Web.Optimization, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35'.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.TypeLoadException: Could not load type 'System.Web.Optimization.StyleBundle' from assembly 'System.Web.Optimization, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35'.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace: 
[TypeLoadException: Could not load type 'System.Web.Optimization.StyleBundle' from assembly 'System.Web.Optimization, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35'.]
   Inventarium.Web.Mobile.App.BundleConfig.RegisterBundles(BundleCollection bundles) in c:\dev\Inventarium\Inventarium.Web\Inventarium.Web.Mobile.App\App_Start\BundleConfig.cs:30
   Inventarium.Web.Mobile.App.MvcApplication.Application_Start() in c:\dev\Inventarium\Inventarium.Web\Inventarium.Web.Mobile.App\Global.asax.cs:18

[HttpException (0x80004005): Could not load type 'System.Web.Optimization.StyleBundle' from assembly 'System.Web.Optimization, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35'.]
System.Web.HttpApplicationFactory.EnsureAppStartCalledForIntegratedMode(HttpContext context, HttpApplication app) +4058245
System.Web.HttpApplication.RegisterEventSubscriptionsWithIIS(IntPtr appContext, HttpContext context, MethodInfo[] handlers) +191
System.Web.HttpApplication.InitSpecial(HttpApplicationState state, MethodInfo[] handlers, IntPtr appContext, HttpContext context) +352
System.Web.HttpApplicationFactory.GetSpecialApplicationInstance(IntPtr appContext, HttpContext context) +407
System.Web.Hosting.PipelineRuntime.InitializeApplication(IntPtr appContext) +375

 [HttpException (0x80004005): Could not load type 'System.Web.Optimization.StyleBundle' from assembly 'System.Web.Optimization, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35'.]
 System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +11703488
 System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +141
 System.Web.HttpRuntime.ProcessRequestNotificationPrivate(IIS7WorkerRequest wr, HttpContext context) +4870277 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-03-10T13:58:21.040

**根据 Roman Nikitin 评论：**

我自己发现了问题。引用错误`System.Web.Optimization.dll`，我的网站尝试使用旧版本。删除包然后重新添加并非每次都有帮助。

**解决方案是：**从所有网站中完全删除旧包、引用和包配置，然后重新添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-26T14:48:44.120

当尝试访问基于 .net 5 的新应用程序作为现有 .net 4.7.x 网站的子应用程序时，我们在带有 IIS 10.10 的 Windows 2019 Server 上遇到了同样的问题。

在我们的 Web 服务器上，我们使用不同的 .net 框架运行多个 Web 应用程序

我们可以通过应用以下步骤来解决异常：

*   在服务器上下载并安装 .NET Core Hosting Bundle
*   转到 IIS
*   选择“应用程序池”
*   添加具有以下参数的新应用程序池：
    *   .NET CLR 版本：无托管代码
    *   托管管道：经典
*   将此新应用程序池分配给您的新 .net 5 Web 应用程序（在高级设置下）

# sql-server - 使用 Visual Studio 2010 创建 SQL Server 2012 数据库项目

> ID：11552902
> 
> 赞同：1
> 
> 时间：2012-07-19T01:56:25.850
> 
> 标签：sql-server

我想使用 Visual Studio 2010 创建一个 SQL Server 2012 数据库项目。

你能用 VS 2010 Professional 做到这一点（下载 SSDT 之后）还是我必须升级到 Premium

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T04:47:48.490

我不确定是否有类似 SQL Server 2012 Database Project for VS 的东西。但是你可以试试这个：

[http://msdn.microsoft.com/en-us/data/hh297027](http://msdn.microsoft.com/en-us/data/hh297027)

# include - gnu 制作、包含和清理目标

> ID：11552909
> 
> 赞同：0
> 
> 时间：2012-07-19T01:57:21.187
> 
> 标签：include, makefile

我正在开发一个由许多项目和 makefile 组成的系统。每个 makefile 都包含来自其依赖项的 .inc 文件。如果缺少依赖项，它会抱怨并告诉用户首先编译依赖项。这部分工作正常。问题是干净的目标。

如果首先清理依赖项并删除它的 inc 文件（因为 inc 文件包含编译时选项和硬路径，我们更愿意删除它们），则 Makefile 无法加载 .inc 文件并中止。因此，确保我们拥有正确依赖项的机制不允许我们调用不需要依赖项的干净目标。

有没有办法根据规则包含或忽略 .inc 文件？

PS：由于我们已经使用“-”进行错误检查，所以这不是一个选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-10-16T12:23:46.453

防止清洁时包含的规范方法如下：

```
ifneq ($(MAKECMDGOALS),clean)
include $(some .inc files)
endif 
```

如此处所述[https://www.gnu.org/software/make/manual/make.html#Goals](https://www.gnu.org/software/make/manual/make.html#Goals)

尽管如果我理解正确，您遇到的错误不是因为包含失败的包含，您已经在使用它来抑制`-include`，而是因为您的 makefile 依赖于包含中的某些值。

为了帮助您解决问题，我们需要一些代码来演示问题。请阅读此处了解如何操作：[https](https://stackoverflow.com/help/minimal-reproducible-example) ://stackoverflow.com/help/minimal-reproducible-example和[http://www.sscce.org/](http://www.sscce.org/)

# c# - 验证是否在 asp:ListBox 中选择了特定选项的最佳方法是什么？

> ID：11552911
> 
> 赞同：1
> 
> 时间：2012-07-19T01:57:39.027
> 
> 标签：c#, asp.net

我有一个包含多个值的 asp:ListBox。用户必须始终在此框中选择一个特定项目，并可选择其他项目。

做这个的最好方式是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T03:45:13.193

我认为没有 ASP.Net 验证器符合您的开箱即用要求，您需要使用`CustomValdiator`并编写服务器和客户端代码来执行验证

例子：

## ASPX

```
<script type="text/javascript" src="Scripts/jquery-1.7.2.min.js"></script>
<script type="text/javascript">
    function clientValidate(sender, args) {
        args.IsValid = false;
        $("#" + sender.controltovalidate + " option:selected").each(function (index, item) {
            if ($(this).text() == "QuestionText1") {
                args.IsValid = true;
                return;
            }
        });
    }
</script>

    <asp:ListBox runat="server"
        SelectionMode="Multiple" ID="lb" AppendDataBoundItems="false"
        DataTextField="QuestionText" DataValueField="ID"
     >
        <asp:ListItem Text="text1" />
        <asp:ListItem Text="text2" />
    </asp:ListBox>
    <br />
    <br />
    <asp:CustomValidator ErrorMessage="errormessage" ControlToValidate="lb"
        ClientValidationFunction="clientValidate"
        OnServerValidate="cv_ServerValidate"
        runat="server" ID="cv" />
    <asp:Button Text="text" runat="server" /> 
```

## 代码背后

```
 protected void cv_ServerValidate(object sender, ServerValidateEventArgs e)
    {
        e.IsValid = false;
        foreach (ListItem item in this.lb.Items)
        {
            if (item.Selected)
            {
                if (item.Text.ToLower().Trim() == "questiontext1")
                {
                    e.IsValid = true;
                    break;
                }
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T02:03:53.123

我要做的是在提交表单时进行一些 javascript 验证，然后进行服务器端验证以确保他们提交的内容是有效的。

您也可以使用自定义验证控件来完成此操作，然后只需检查以确保页面在回发时有效。

# c# - 无法绑定到新的显示成员 C#

> ID：11552913
> 
> 赞同：1
> 
> 时间：2012-07-19T01:57:51.497
> 
> 标签：c#, winforms, combobox, member

我收到此错误：无法绑定到新的显示成员 C#

```
 sConn = new SqlConnection(sStr);
        daSched = new SqlDataAdapter("Select Subject from Schedules where Username = '" + lblUsername.Text + "'", sConn);
        dsSched = new DataSet();
        daSched.Fill(dsSched, "Schedules");
        dsSched.Tables["Schedules"].PrimaryKey = new DataColumn[] { dsSched.Tables["Schedules"].Columns["ScheduleID"] };

        cbxSubject.DataSource = dsSched.Tables["Schedules"];
        cbxSubject.DisplayMember = "Schedule";
        cbxSubject.ValueMember = "ScheduleID";
        cbxSubject.Text = "Choose Subject"; 
```

我不知道哪里出错了。这是表格时间表的预览：http: [//i47.tinypic.com/1zzoz5z.png](http://i47.tinypic.com/1zzoz5z.png)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T02:02:13.750

您的表中没有名为“Schedule”的字段，因此控件找不到名为“Schedule”的成员，并且您只选择了主题

ScheduleID 已经是您的主键，因此您最好将 Sql Query 更改为：

`Select ScheduleID, Subject From`...（你也可能应该[参数化](http://msdn.microsoft.com/en-us/library/bbw6zyha%28v=vs.100%29.aspx)它）

这行 ->`dsSched.Tables["Schedules"].PrimaryKey = new DataColumn[] { dsSched.Tables["Schedules"].Columns["ScheduleID"] };`是不必要的。

据我所知，我相信您希望您的展示成员成为“主题”

另外 - 你应该**打开**你的连接（我在你的帖子中没有看到它） - 更理想的是将它包装在 using 语句中

就像是：

```
using (SqlConnection con = new SqlConnection(connectionString))
    {
        string userName = lblUsername.Text;
        con.Open(); 
        var adapter = new SqlDataAdapter("Select ScheduleID, Subject From 
                                 Schedules Where Username = @username", conn);
        adapter.Parameters.Add("@username", SqlDbType.VarChar, 50, userName)
        var dsSched = new DataSet();
        adapter.Fill(dsSched);

        cbxSubject.DataSource = dsSched.Tables[0];
        cbxSubject.DisplayMember = "Subject";
        cbxSubject.ValueMember = "ScheduleID";
        cbxSubject.DataBind();

    } 
```

# java - Java 外观和感觉 JTabbedPane

> ID：11552918
> 
> 赞同：1
> 
> 时间：2012-07-19T01:58:33.160
> 
> 标签：java, swing, look-and-feel, jtabbedpane

我在我的一个项目中使用 JTabbedPane，并且我正在尝试更改应用程序的外观和感觉。当我设置窗口的外观和感觉（以及与此相关的任何其他外观和感觉）时，所有按钮、检查按钮等都会更改为它们应该的样子，但选项卡仍然看起来像默认的摆动选项卡。这是它的外观示例：

![在此处输入图像描述](../Images/ff5a37167522411ffacdeaf117f0763c.png)

按钮和复选框看起来像 windows 组件，但选项卡看起来像默认的 swing。如果有帮助，我将使用在单独的类文件中定义的 JTabbedPane 的子类。我的问题是如何让 JTabbedPane 中的选项卡看起来像 Windows 选项卡？

这段代码为我模拟了这个问题。选项卡显示为摇摆，但按钮显示为不同的 l&f：

```
import javax.swing.*;
import java.awt.*;
public class TabbedFrame
{
    private static JFrame window;
    private static JPanel pane;
    private static JTabbedPane tabs = new JTabbedPane();
    public static void main(String[] vars) 
    {
        try
        {
                UIManager.setLookAndFeel("com.sun.java.swing.plaf.motif.MotifLookAndFeel");
        } catch (Exception ee){
            ee.printStackTrace();
        }
        window = new JFrame("tabs");
        pane = new JPanel();
        window.setSize(200, 300);
        window.setLocation(100, 100);
        window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        window.setContentPane(pane);    
        Panel[] panes;
        panes = new Panel[2];
        panes[0] = new Panel();
        panes[1] = new Panel();
        panes[0].add(new Label("PANEL 1..................."));
        panes[1].add(new Label("PANEL 2 ....."));   
        tabs.addTab("tab 1", panes[0]);
        tabs.addTab("tab 2", panes[1]);
        tabs.setSize(480, 640);
        pane.add(tabs);
        pane.add(new JButton("test"));
        pane.add(new JCheckBox());
        pane.add(new JRadioButton());
        tabs.setBounds(20, 20, 200, 200);
        window.setVisible(true);    
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T02:49:05.403

`JTabbedPane`是在设置 PLAF 之前创建的。至少有两个修复。

1.  将创建选项卡式窗格的行移动到 中`main`，并将其放在调用设置 PLAF 之后。
2.  调用`SwingUtilities.updateComponentTreeUI(topLevelContainer)`如[嵌套布局示例](https://stackoverflow.com/a/5630271/418556)中所示。该示例允许用户在运行时更改 PLAF。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T02:14:16.913

有几个 UIManager 设置可用于管理 JTabbedPane 的外观。下面的链接提供了可用于自定义 JTabbedPane 外观的所有属性。

[自定义 JTabbedPane 外观](http://books.google.com/books?id=YPjZNlEgAMcC&pg=PA401&lpg=PA401&dq=customizing%20a%20jtabbedpane%20look%20and%20feel&source=bl&ots=GO7qm-bYd8&sig=8nlhhzZsrJXmo0UZePKcHZ_L4z0&hl=en&sa=X&ei=iWsHUP3RCIW70QHr_cXJAw&ved=0CGQQ6AEwBQ#v=onepage&q=customizing%20a%20jtabbedpane%20look%20and%20feel&f=false)

例如，您可以使用以下方式自定义颜色：

```
UIManager.put("TabbedPane.selected", Color.RED); 
```

JTabbedPane 已在发布的代码中实例化，因此 UIManager 设置没有更改。

```
import javax.swing.*;
import java.awt.*;
public class TabbedFrame
{
private static JFrame window;
private static JPanel pane;
private static JTabbedPane tabs;
public static void main(String[] vars) 
{
    try
    {
            UIManager.setLookAndFeel("com.sun.java.swing.plaf.motif.MotifLookAndFeel");
            UIManager.put("TabbedPane.selected",Color.GREEN);

    } catch (Exception ee){
        ee.printStackTrace();
    }
    window = new JFrame("tabs");
    pane = new JPanel();
    tabs = new JTabbedPane();
    window.setSize(200, 300);
    window.setLocation(100, 100);
    window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    window.setContentPane(pane);    
    Panel[] panes;
    panes = new Panel[2];
    panes[0] = new Panel();
    panes[1] = new Panel();
    panes[0].add(new Label("PANEL 1..................."));
    panes[1].add(new Label("PANEL 2 ....."));   
    tabs.addTab("tab 1", panes[0]);
    tabs.addTab("tab 2", panes[1]);
    tabs.setSize(480, 640);
    pane.add(tabs);
    pane.add(new JButton("test"));
    pane.add(new JCheckBox());
    pane.add(new JRadioButton());
    tabs.setBounds(20, 20, 200, 200);
    window.setVisible(true);    
} 
```

}

# c# - 游戏控制台为 StringBuilder、String[] 还是其他？

> ID：11552925
> 
> 赞同：0
> 
> 时间：2012-07-19T01:59:54.417
> 
> 标签：c#, string, console, stringbuilder

我正在制作一个 XNA 游戏机，它应该在添加时绘制输出线。我只想绘制最后 10 行，但不知道如何生成实际的输出字符串。

我试图用来`StringBuilder`收集其中的所有行，然后将最后一行读入 a `String`，但事实证明`StringBuilder`没有特定的行检索方法。我尝试使用`String[]`，但随着时间的推移，它会增加显着的延迟。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T02:06:45.747

如果您不再需要超过 10 行的消息，则可以使用类型化的[Queue](http://msdn.microsoft.com/en-us/library/7977ey2c.aspx)。

根据您呈现它的方式，它可能是管理该数据的最简单方法。

# python - 如何从python opencv中的数组中读取原始png？

> ID：11552926
> 
> 赞同：15
> 
> 时间：2012-07-19T01:59:56.620
> 
> 标签：python, opencv, png

我正在通过 tcp 将 png 图像从我的 iPhone 流式传输到我的 MacBook。MacBook 代码来自[http://docs.python.org/library/socketserver.html#requesthandler-objects](http://docs.python.org/library/socketserver.html#requesthandler-objects)。如何将图像转换为与 OpenCV 一起使用？选择 png 是因为它们很有效，但也可以使用其他格式。

我写了一个从文件中读取 rawImage 的测试程序，但不知道如何转换它：

```
# Read rawImage from a file, but in reality will have it from TCPServer
f = open('frame.png', "rb")
rawImage = f.read()
f.close()

# Not sure how to convert rawImage
npImage = np.array(rawImage)
matImage = cv2.imdecode(rawImage, 1)

#show it
cv.NamedWindow('display')
cv.MoveWindow('display', 10, 10)
cv.ShowImage('display', matImage)
cv. WaitKey(0) 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2015-12-26T21:09:40.643

@Andy Rosenblum 的作品，如果使用过时的 cv python API（与 cv2 相比），它可能是最好的解决方案。

但是，因为这个问题对于最新版本的用户来说同样有趣，所以我建议以下解决方案。下面的示例代码可能比公认的解决方案更好，因为：

1.  它与较新的 OpenCV python API（cv2 与 cv）兼容。此解决方案在 opencv 3.0 和 python 3.0 下测试。我相信 opencv 2.x 和/或 python 2.7x 只需要进行微不足道的修改。
2.  进口较少。这一切都可以直接用 numpy 和 opencv 完成，不需要 StringIO 和 PIL。

以下是我如何创建直接从文件对象或从文件对象读取的字节缓冲区解码的 opencv 图像。

```
import cv2
import numpy as np

#read the data from the file
with open(somefile, 'rb') as infile:
     buf = infile.read()

#use numpy to construct an array from the bytes
x = np.fromstring(buf, dtype='uint8')

#decode the array into an image
img = cv2.imdecode(x, cv2.IMREAD_UNCHANGED)

#show it
cv2.imshow("some window", img)
cv2.waitKey(0) 
```

请注意，在 opencv 3.0 中，各种常量/标志的命名约定发生了变化，因此如果使用 opencv 2.x，您将需要更改标志 cv2.IMREAD_UNCHANGED。此代码示例还假设您正在加载标准的 8 位图像，但如果不是，您可以使用 np.fromstring 中的 dtype='...' 标志。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-07-09T11:50:46.710

另一种方式，

在读取实际文件的情况下，这也适用于 unicode 路径（在 Windows 上测试）

```
with open(image_full_path, 'rb') as img_stream:
    file_bytes = numpy.asarray(bytearray(img_stream.read()), dtype=numpy.uint8)
    img_data_ndarray = cv2.imdecode(file_bytes, cv2.CV_LOAD_IMAGE_UNCHANGED)
    img_data_cvmat = cv.fromarray(img_data_ndarray) #  convert to old cvmat if needed 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-22T15:17:56.440

I figured it out:

```
# Read rawImage from a file, but in reality will have it from TCPServer
f = open('frame.png', "rb")
rawImage = f.read()
f.close()

# Convert rawImage to Mat
pilImage = Image.open(StringIO(rawImage));
npImage = np.array(pilImage)
matImage = cv.fromarray(npImage)

#show it
cv.NamedWindow('display')
cv.MoveWindow('display', 10, 10)
cv.ShowImage('display', matImage)
cv. WaitKey(0) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-11-01T09:51:34.850

这对我有用（这些天）：

```
import cv2
import numpy as np

data = open('016e263c726a.raw').read()
x = np.frombuffer(data, dtype='uint8').reshape(2048,2448)
cv2.imshow('x',x); cv2.waitKey(); cv2.destroyAllWindows() 
```

但它会读取没有任何特定格式保存的**RAW图像。**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T06:20:18.050

（您的问题似乎被标记为objective-c，但您要求使用Python，您的示例也是如此，所以我将使用它。）我在Stack Overflow 上的第一篇文章！

cv.LoadImageM 方法似乎是您正在寻找的。

[http://opencv.willowgarage.com/documentation/python/reading_and_writing_images_and_video.html](http://opencv.willowgarage.com/documentation/python/reading_and_writing_images_and_video.html)

使用示例：http: [//opencv.willowgarage.com/wiki/PythonInterface/](http://opencv.willowgarage.com/wiki/PythonInterface/)

> LoadImage(文件名, iscolor=CV_LOAD_IMAGE_COLOR) → 无
> 
> ```
> Loads an image from a file as an IplImage.
> Parameters:   
> 
>     filename (str) – Name of file to be loaded.
>     iscolor (int) –
> 
>     Specific color type of the loaded image:
>         CV_LOAD_IMAGE_COLOR the loaded image is forced to be a 3-channel color image
>         CV_LOAD_IMAGE_GRAYSCALE the loaded image is forced to be grayscale
>         CV_LOAD_IMAGE_UNCHANGED the loaded image will be loaded as is. 
> ```
> 
> 函数 cvLoadImage 从指定文件加载图像并返回指向加载图像的指针。目前支持以下文件格式：
> 
> ```
> Windows bitmaps - BMP, DIB
> JPEG files - JPEG, JPG, JPE
> Portable Network Graphics - PNG
> Portable image format - PBM, PGM, PPM
> Sun rasters - SR, RAS
> TIFF files - TIFF, TIF 
> ```
> 
> 请注意，在当前实现中，alpha 通道（如果有）会从输出图像中剥离，例如 4 通道 RGBA 图像将作为 RGB 加载。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2017-02-12T21:18:44.523

当您必须从文件加载时，这个简单的解决方案可以完成工作（用 测试`opencv-python-3.2.0.6`）：

```
import cv2

img = cv2.imread(somefile) 
```

# excel - 更改形状的背景颜色

> ID：11552930
> 
> 赞同：2
> 
> 时间：2012-07-19T02:00:43.333
> 
> 标签：excel, backcolor, vba

我正在尝试更新工作表上所有标签的背景色。我想使用 RGB 值来表示颜色，但我被困在两个地方。这是我现在拥有的代码：

```
Sheet2.Shapes("Label 2").Fill.BackColor.RGB = RGB(220, 105, 0) 
```

此代码将运行而不会出错，但似乎没有任何效果。我的标签一开始是白色的（或者可能是透明的）并且永远不会改变。谁能告诉我我需要做什么才能完成这项工作？我也添加了这个，但它什么也没做：

```
shp.Fill.Solid 
```

接下来，我想在一个变量中捕获这个 RGB 值，这样我就不必重复重新输入。本质上，我正在寻找这样的东西：

```
dim col as Color
col = RGB(220,105,0)
Sheet2.Shapes("Label 2").Fill.BackColor.RGB = col 
```

我知道没有名为 Color 的变量类型，但我想你可以看到我想要做什么。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-19T02:11:40.330

尝试设置 ForeColor：

```
Sheet2.Shapes("Label 2").Fill.ForeColor.RGB = RGB(220, 105, 0) 
```

弄清楚该怎么做的一个好方法是在您自己进行调整时录制宏。您可以稍后检查生成的代码并将其用作起点。

* * *

这是一个程序示例，它将向活动表添加一个矩形，向其中添加一些文本，然后使用您的 RGB 值对其进行着色：

```
Public Sub AddRectangleWithText()
    Dim textRectangle As Shape

    Set textRectangle = ActiveSheet.Shapes & _
        .AddShape(msoShapeRectangle, 10, 80, 250, 50)

    ' add your text
    textRectangle.TextFrame.Characters.Text = "Your mother was a hamster."

    ' fill the shape with the rgb color of your choice
    textRectangle.Fill.ForeColor.RGB = RGB(220, 105, 0)

End Sub 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-12-27T16:12:16.910

`ForeColor`实际上控制Excel中注释/文本框的背景色如下；

*   `Activecell.Comment.Shape.Fill.ForeColor.RGB = RGB(240, 255, 250) 'Mint Green`

因为`Comment`/`TextBox` `ForeColor`是应用程序背景颜色的前景填充。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-10T09:25:21.590

我需要添加

```
textRectangle.Fill.Visible = msoTrue 
```

在 Office 2016 中

```
textRectangle.Fill.ForeColor.RGB = RGB(220, 105, 0) 
```

产生效果。

# cocoa - Cocoa：AVFoundation - 没有活动/启用的连接

> ID：11552932
> 
> 赞同：3
> 
> 时间：2012-07-19T02:01:12.103
> 
> 标签：cocoa, qtkit

我正在尝试构建一个简单的应用程序，从 MacBook 的内置 iSight 摄像头中捕获视频。我查看了开发人员网站上的几个示例项目，并在此处遵循教程：[Apple's AVFoundation Guide](http://developer.apple.com/library/mac/#documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/04_MediaCapture.html#//apple_ref/doc/uid/TP40010188-CH5-SW2)。

每次我不断中断 AVCaptureMovieFileOutput 时，我都会收到一个未捕获的异常 - 没有活动/启用的连接。我是 AV 框架的新手，所以我不确定它为什么能识别 iSight，允许我将其输入到会话中，允许我为会话制作电影输出，但然后告诉我没有连接？它在寻找什么联系？（注意：我的视图控制器中还没有 QTMovieView，但我认为我只需要它来播放，而不是录制）。

我知道 iSight 可以正常工作，因为我最近在 Skype 上使用过它。

这是我的相关代码：

```
thisSession = [[AVCaptureSession alloc] init];

//set presets for this session
if ([thisSession canSetSessionPreset:AVCaptureSessionPreset640x480]) {

    thisSession.sessionPreset = AVCaptureSessionPreset640x480;
    NSLog(@"Session Preset: OK");

    //capture a device - captures all the devices, microphone, camera, etc.
    NSArray *devices = [AVCaptureDevice devices];

    //this will hold our decvice
    AVCaptureDevice* iSightCamera;

    for (AVCaptureDevice *device in devices) {

        //we only want to work with the internal camera
        if ([[device localizedName] isEqualToString:@"Built-in iSight"]) { 

            iSightCamera = device;

            //creating an input of the device for the session
            NSError *error = nil;
            AVCaptureDeviceInput* iSightCameraInput =
            [AVCaptureDeviceInput deviceInputWithDevice:iSightCamera error:&error];
            if (!iSightCameraInput) {
                NSLog(@"Error creating device input: %@", error);
            } else { 
                NSLog(@"iSight device input created!");

                //adding the device input to the session
                if ([thisSession canAddInput:iSightCameraInput]) {

                    [thisSession addInput:iSightCameraInput];
                    NSLog(@"iSight input added to session!");

                    //add the output to the session
                    AVCaptureMovieFileOutput *movieOutput = [[AVCaptureMovieFileOutput alloc] init];

                    if ([thisSession canAddOutput:movieOutput]) {

                        [thisSession beginConfiguration];
                        [thisSession addOutput:movieOutput];
                        [thisSession commitConfiguration];

                        NSLog(@"Movie output added to the session!");

                        //start writing the movie
                        NSURL *movieFolder = [NSURL fileURLWithPath:[@"~/Movies" stringByExpandingTildeInPath]];

                        [movieOutput startRecordingToOutputFileURL:movieFolder recordingDelegate:self];
                    }
                    else {
                        NSLog(@"Error: Could not add movie output to the session.");
                    }
                }
                else {
                    NSLog(@"Error: Could not add iSight to session.");
                }

            }

        }

    } 
```

# aem - Adobe CQ5 设置默认页面属性

> ID：11552935
> 
> 赞同：0
> 
> 时间：2012-07-19T02:02:03.937
> 
> 标签：aem

创建页面时是否可以在 CQ5 中设置默认页面属性值？通过在模板、组件等中指定它...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T10:24:05.107

找到了，只需要直接在templates下添加属性//_jcr_content

# ruby - Google App 引擎是否支持 Rails 3.1？

> ID：11552937
> 
> 赞同：0
> 
> 时间：2012-07-19T02:02:44.000
> 
> 标签：ruby, ruby-on-rails-3, google-app-engine, ruby-on-rails-3.1, jruby

目前，[谷歌](http://code.google.com/p/appengine-jruby/)的所有链接都说他们不支持 GAE for rails 3.1

寻找一些建设性的步骤来在 Eclipse 上使用 rails 3.1 来解决 GAE。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T02:11:49.760

AppEngine 不直接支持 Rails。由于 AppEngine 支持 Java，因此通过 JRuby 运行 Rails 可能会有一些运气，但是考虑到有多少简单的托管解决方案可以原生支持 Rails，您可能会发现您正在尝试将方形钉子敲入圆孔。

# ios - 显示 UIActionSheet 时禁用 UIScrollView

> ID：11552940
> 
> 赞同：1
> 
> 时间：2012-07-19T02:02:55.937
> 
> 标签：ios, uiscrollview, uiactionsheet

按下 UIActionSheet 的按钮时是否有禁用滚动功能？

我的应用程序使用水平滚动来访问不同的页面。我还有一个条形按钮项目，按下时会调用 UIActionSheet，并为用户提供不同的选项（保存、共享等）。但是，用户仍然可以水平滚动到下一页。有没有办法防止这种情况，当按下条形按钮时，滚动被禁用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T02:16:49.907

UIScrollView 从 UIView 继承 userInteractionEnabled 属性。显示操作表时将其设置为 NO（并在关闭时返回 YES）。

# scala - 在 Scala 中，有没有办法让两个重载方法仅在隐式是否可用方面有所不同？

> ID：11552943
> 
> 赞同：3
> 
> 时间：2012-07-19T02:03:21.283
> 
> 标签：scala, overloading

我正在编写一个访问数据库的 Scala 应用程序。大多数时候，会有可用的连接，但有时不会。我想做的是如下所示：

```
object User {
  def authenticate(username: String, password: String)
      (implicit conn: Connection): Option[User] = {
    // use conn to grab user from db and check that password matches
    // return Some(user) if so, None if not
  }
  def authenticate(username: String, password: String): Option[User] = {
    implicit val conn = DB.getConnection()
    authenticate(username, password)
  }
} 
```

我希望发生的是，如果有`Connection`可用的类型的隐式值，编译器将使用第一种方法。如果没有，它将使用第二个。不幸的是，我发现编译器并不那么聪明，或者，如果是的话，我并没有告诉它以正确的方式做什么。

所以，我的基本问题是，有没有一种方法可以编写一个需要隐式参数的方法，然后提供相同方法的重载版本，如果没有可用的隐式参数类型，该方法会创建一个可接受的值。

你可能会说，“你为什么要做这样的事情？如果你可以创建一个合适类型的可接受值，为什么不总是这样做呢？” 这基本上是正确的，除了如果我有一个开放的数据库连接，我宁愿继续使用它而不是创建一个新的连接。但是，如果我没有打开的数据库连接，我知道在哪里可以找到一个。

我的意思是，简单的答案是给这两种方法不同的名称，但我不应该这样做，gosh-darn-it。但也许我会...

谢谢！托德

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-19T03:30:12.587

您不需要重载方法。只需给你的隐式参数一个默认值，即

```
object User {
  def authenticate(username:String, password:String)(implicit conn:Connection = null): Option[User] = {
    val real_conn = Option(conn).getOrElse(DB.getConnection())
    // do the rest with the real_conn
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T07:19:32.653

我能想到的更简洁的解决方案是使用嵌套方法，并且正如有人建议的那样，使用默认值作为隐式。

```
class Testclass {

  def myMethod(a:Int)(implicit b:Option[Int]=None):Int = {

    def myMethodInternal(a:Int, b:Int):Int = {
      // do something
      a+b
    }
    val toUse = b.getOrElse(30)
    myMethodInternal(a,toUse)
  }
} 
```

在您的方法中，您定义了一个 myMethodInternal，它不接受隐式参数，而只接受显式参数。此方法仅在 myMethod 中可见，您将准备第二个参数，如下所示：

```
 val toUse = b.getOrElse(30) 
```

最后使用显式参数调用您的方法：

```
 myMethodInternal(a,toUse) 
```

# linux-kernel - Linux内核命令行开关上的三连字符

> ID：11552950
> 
> 赞同：6
> 
> 时间：2012-07-19T02:04:05.983
> 
> 标签：linux-kernel, bootloader, xen

我正在尝试添加一个开关以将 linux 内核日志发送到 XenServer6 上的串行控制台。

可以在 EXTLinux 配置文件 ( `/boot/extlinux.conf`) 上编辑内核命令选项。

这是一段摘录：

```
serial 1 115200
default xe
prompt 1
timeout 50

label xe
  # XenServer
  kernel mboot.c32
  append /boot/xen.gz mem=1024G dom0_max_vcpus=4 dom0_mem=752M lowmem_emergency_pool=1M crashkernel=64M@32M console= vga=mode-0x0311 --- /boot/vmlinuz-2.6-xen root=LABEL=root-tfnnfzfp ro xencons=hvc com2=115200,8n1 console=com2 console=hvc0 console=tty0 quiet vga=785 splash --- /boot/initrd-2.6-xen.img

label xe-serial
  # XenServer (Serial)
  kernel mboot.c32
  append /boot/xen.gz com1=115200,8n1 console=com1,vga mem=1024G dom0_max_vcpus=4 dom0_mem=752M lowmem_emergency_pool=1M crashkernel=64M@32M --- /boot/vmlinuz-2.6-xen root=LABEL=root-tfnnfzfp ro console=tty0 xencons=hvc console=hvc0 --- /boot/initrd-2.6-xen.img 
```

`---`命令行中的三个破折号 ( ) 是什么意思？

是加载 3 个引导文件吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T22:34:24.913

**TL;DR 是的，是的。ExtLinux 必须同时加载 Xen 和 Linux 内核。它使用 mboot.c32 来执行此操作。--- 将 Xen 映像路径及其命令行与 Linux 映像路径及其命令行分开。**

这正是 ExtLinux（实际上是[SysLinux](http://www.syslinux.org/wiki/)系列中的所有引导加载程序）实现多重引导的方式，这是加载 Xen 所必需的。

大多数简单的引导配置只会加载一个内核。引导加载程序有一种方法可以将命令行写入您期望的位置。在 Syslinux 风格中：

```
label Simple
    kernel linux.c32
    append <linux kernel filename> <linux command line> 
```

或者在 Grub 中：

```
title Simple Boot
    root (hd0,0)
    kernel <linux kernel filename> <linux command line> 
```

更复杂的引导配置可能会加载引导 Xen 和内核。它们使用一个名为“multiboot”的系统，该系统加载两者并为它们提供各自的命令行。这允许您传递 Xen 的命令和 Linux 的命令。您甚至可以通过另一个阶段来加载其他内容，例如初始 ramdisk。在 SysLinux 风格中：

```
label Complex
    kernel mboot.32
    append <xen kernel filename> <xen command line> --- <linux kernel filename> <kernel command line> --- <initrd filename> 
```

或者在 Grub 中：

```
label Complex Boot
kernel <xen kernel filename> <xen command line>
module <linux kernel filename> <linux command line>
module <initrd filename> 
```

如果您使用的是 grub，它实际上会在它们自己的节中指定这些。Grub 充当了一种超级引导加载程序，因为它可以将大量的小模块加载到其中，以实现多重引导（或不同的文件系统等）等功能。在这种情况下，Grub 会在你不知道的情况下神奇地完成大部分工作。

Syslinux 和家庭分工不同。它们不是拥有一个必须处理所有情况的巨型引导加载程序，而是具有两个具有许多不同部分的层。最重要的是，他们拥有知道系统启动的核心引导加载程序（即[syslinux](http://www.syslinux.org/wiki/index.php/SYSLINUX)知道使用 FAT 文件系统上的文件引导 BIOS，[pxelinux](http://www.syslinux.org/wiki/index.php/PXELINUX)知道通过网络加载东西，[isolinux](http://www.syslinux.org/wiki/index.php/ISOLINUX)知道从 CD-ROM 加载文件等）。 [Extlinux](http://www.syslinux.org/wiki/index.php/EXTLINUX)只是知道如何从 Ext2、Ext3、Ext4 或 BTRFS 文件系统启动的系统。

其他常见功能被实现为“comboot”模块，可以插入任何引导加载程序。例如：

*   多重引导 ( [mboot.c32](http://www.syslinux.org/wiki/index.php/Mboot.c32) )
*   直接加载 Linux 内核 ( [linux.c32](http://www.syslinux.org/wiki/index.php/Linux.c32) )
*   菜单支持 ( [menu.c32](http://www.syslinux.org/wiki/index.php/Menu.c32) )
*   Lua 解释器 ( [lua.c32](http://www.syslinux.org/wiki/index.php/Lua.c32) )
*   硬件检测工具（[hdt.c32](http://www.syslinux.org/wiki/index.php/Hdt_%28Hardware_Detection_Tool%29)）
*   基于 CPU 标志的备用引导 ( [ifcpu.c32](http://www.syslinux.org/wiki/index.php/Ifcpu.c32) )

在多重引导的情况下，它们加载实现多重引导的 mboot.c32 模块。与 Grub 和家族（知道多个命令行）不同，syslinux 必须将所有模块及其命令行包含在一个命令行中。由于 -- 在其他程序中经常用作参数分隔符，他们选择使用 --- 来分隔模块。

在这种情况下，Xen 需要多重引导，这需要该语法来分隔 Xen 管理程序内核和作为其初始特权来宾运行的 Linux 内核的命令行。

# php - PHP - 将字符串值添加到关联数组

> ID：11552958
> 
> 赞同：2
> 
> 时间：2012-07-19T02:05:20.557
> 
> 标签：php, arrays, string, variables, associative-array

这看起来很简单，但我无法在任何地方找到解决方案。

我想要做的是将变量的*内容*（r 值）添加到关联数组而不是对变量的*引用*。

例如，我想要这个：

```
$myStr1 = "sometext";
$myStr2 = "someothertext";

$myArray = array(
    "key1"=>$myStr1,
    "key2"=>$myStr2
);

echo($myArray["key1"]); 
```

要产生这个：

```
"sometext" 
```

而不是这个：

```
"1"        // why?? 
```

任何帮助，将不胜感激。

**编辑：**

以上作品；我的错。这是*真正的*问题——我的`$myStr1`变量不只是像上面那样分配字符串文字；它是使用以下语法创建的：

```
$myStr1 = "sometext" + anObject->intProperty + "moretext"; 
```

基本上我使用 将`+`各种类型连接成一个字符串。也许`+`不是在做我认为它在做的事情？

**编辑：**

肯定是`+`运营商。我将所有非字符串转换为字符串并用于`.`连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T02:12:50.070

你第一次就对了。 [试试这个：](http://ideone.com/V3BQN)

```
$myStr1 = "sometext";
$myStr2 = "someothertext";

$myArray = array(
    "key1"=>$myStr1,
    "key2"=>$myStr2
);

unset($myStr1);

echo($myArray["key1"]); 
```

即使我们`unset()`是`$myStr1`变量，它仍然回显`sometext`。

需要注意的是，虽然可以`$myStr1` [通过引用](http://www.php.net/manual/en/language.references.whatdo.php)设置，但它不是默认设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T02:09:55.763

试试你的代码，它的结果是：

```
sometext 
```

# iphone - IPhone Security 框架和常用加密库中的 Openssl RSA_PKCS1_OAEP_PADDING 等价物

> ID：11552959
> 
> 赞同：2
> 
> 时间：2012-07-19T02:05:22.877
> 
> 标签：iphone, xcode, openssl, rsa, padding

我正在尝试将用 Openssl 编写的代码转换为 iphone 的内置安全框架和加密库。内置的苹果函数中是否有等效的填充值 RSA_PKCS1_OAEP_PADDING？是否有一个值我可以硬编码我的填充变量以获得相同的值？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T17:52:24.753

我通过合并 Openssl 解决了填充问题，因此我不必使用加密库。

# c - 关于c中的表达式“&anArray”

> ID：11552960
> 
> 赞同：0
> 
> 时间：2012-07-19T02:05:34.223
> 
> 标签：c

首先，我读到：

*   `array`
*   `&array`
*   `&array[0]`

只要“array”真的是一个数组，它们都是一样的。所以我尝试了：

```
int main(){ 
     char ar[]={'a','b','c','\0'};
     printf("argument: &ar     %s\n",&ar);
     printf("argument: &ar[1]    %s\n",&ar[1]);
} 
```

输出：

```
argument:&ar   abc  
argument:&ar[1]  bc 
```

似乎它`&ar`被视为指向第一个元素的指针，而不是指向“ar”的指针，如果我没记错的话，它本身就是指向第一个元素的指针。

因为这不应该是 &(pointer to a char) 的处理方式，我试过：

```
char a='s';
char *pa=&a;
printf("argument: &pa   %c\n",&pa); 
```

的输出`%c`甚至不是一个字符。也不应该是如何处理指向数组第一个元素的指针。我试过：

```
char *pa=&ar[0];
char **ppa= &pa;
printf("argument: &pa   %s\n", ppa); 
```

`%s`毫不奇怪，输出是胡说八道；但为什么没有`&ar`胡说八道？因为如果`ar`是一个指针，不应该`&ar`是指向指针的指针`ppa`吗？

我的问题：

1.  将“&”放在数组名称之前是否会被忽略？数组名称是否只是特殊的？
2.  如果是这样，编译器如何验证“&”后面的标识符是对数组的引用？它实际上是否在声明的数组列表中搜索它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T02:35:11.157

> 似乎这`&ar`被视为指向第一个元素的指针而不是指向“ar”的指针，如果我没记错的话，它本身就是指向第一个元素的指针的指针。

你错了 *。*`&ar`是指向数组的指针`ar`，但数组`ar`不是*任何*类型的指针（它是数组），因此`&ar`也不是指向指针的指针。

数组是一个连续的对象序列 - 在 的情况下`ar`，它是一个连续的 4 `char`s 集合。 `&ar`是指向*这组 4 个字符*的指针，这必然意味着它与 指向同一位置`&ar[0]`，指向`char`该集中第一个字符的指针。但是，它具有不同的类型：`&ar`has type`char (*)[4]`表示“指向 4 个字符的数组的指针”，并`&ar[0]`has type`char *`表示“指向 char 的指针”。

之所以会产生混淆，是因为在几乎所有表达式中，都会`ar`计算出指向数组第一个元素的指针（例外情况是它是一元运算`&`符或运算符的操作数`sizeof`）。这并不意味着它`ar` *是*一个指针——它不是——只是在大多数情况下它计算为一个指针值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T02:38:09.813

printf 格式 %s 的意思是“对应的参数是一个指向 char 的指针。在那个位置打印字符串。” 为此，字符串是以空字符结尾的字符序列。

当您传递`&ar`给 printf 时，您传递了“a”的地址（尽管类型错误；printf 需要一个指向字符的指针，而您传递了一个指向字符数组的指针，但它们具有相同的地址），并且 printf 看到了字符串 'a'、'b'、'c'、'\0'，所以它打印了“abc”。`ar`如果您通过或`&ar[0]`;也会发生同样的情况 那些评估到相同的地址。

当你传递`&ar[1]`给 printf 时，你传递了一个指向 'b' 所在位置的指针，并且 printf 看到了字符串 'b'、'c'、'\0'，所以它打印了“bc”。

如果您只想在某个位置传递单个字符，请使用 %c 格式并传递一个字符（而不是指向字符的指针）。例如，如果您使用 %c 格式`*ar`，将打印 'a'，如果您使用 %c 和`*&ar[1]`，将打印 'b'。

> 似乎 &ar 被视为指向第一个元素的指针，而不是指向“ar”的指针，如果我没记错的话，它本身就是指向第一个元素的指针。

在表达式中使用时，`ar`充当指向数组第一个元素的指针，与`&ar[0]`. `&ar`并且`ar`是相同的地址（数组中的第一个字符与数组的开头位于相同的地址），尽管它们具有不同的类型（指向 char 数组的指针和指向 char 的指针）。

> %c 的输出甚至不是字符

它是一个字符，只是不是您所期望的，可能不是普通字符或可打印字符。%c 期望传递一个字符参数，但您传递了一个地址参数。

> 如果是这样，编译器如何验证“&”后面的标识符是否引用了数组，它实际上是否在声明的数组列表中搜索它？

解析比这更复杂（本质上，标识符在考虑 & 之前被识别为已知数组，然后计算 & 和标识符的组合表达式）。但是，效果是`&ar`计算到与第一个元素相同的地址。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T03:38:15.080

如果您的代码在没有警告的情况下编译，则说明您没有充分利用您的编译器。如果您要求它这样做，它将对您有所帮助。了解如何让它在编译时出现警告，并了解如何修复它诊断出的问题。我使用以下命令中的一个或另一个编译了以下代码：

```
gcc -O3 -g -std=c99 -Wall -Wextra -m64 array-stuff.c -o array-stuff
gcc -O3 -g -std=c99 -Wall -Wextra -m32 array-stuff.c -o array-stuff 
```

这是使用 GCC 编写干净代码的一个很好的起点。确实，`-Wall`没有`-Wextra`也很好。

这是您的代码的改编版（在文件中`array-stuff.c`）-尽管其中大部分都不同：

```
#include <stdio.h>
#include <inttypes.h>

int main(void)
{ 
    // DC4M = Doesn't compile for me, because I compile with stringent warnings
    char ar[16] = { 'a', 'b', 'c', '\0' };  // Note explicit size
    printf("%-18s  %s\n", "Code:", "char ar[16] = { 'a', 'b', 'c', '\0' };");
    //printf("argument: &ar     %s\n", &ar);    // DC4M
    printf("argument: &ar[1]  %s\n", &ar[1]);

    printf("%-18s  0x%" PRIXPTR "\n", "ar:",       (uintptr_t)ar);
    printf("%-18s  0x%" PRIXPTR "\n", "&ar:",      (uintptr_t)&ar);
    printf("%-18s  0x%" PRIXPTR "\n", "(ar+1):",   (uintptr_t)(ar+1));
    printf("%-18s  0x%" PRIXPTR "\n", "(&ar+1):",  (uintptr_t)(&ar+1));
    printf("%-18s  0x%" PRIXPTR "\n", "&ar[1]:",   (uintptr_t)(&ar[1]));
    printf("%-18s  0x%" PRIXPTR "\n", "&(ar[1]):", (uintptr_t)(&(ar[1])));
    printf("%-18s  0x%" PRIXPTR "\n", "(&ar)[1]:", (uintptr_t)((&ar)[1]));

    printf("%-18s  %zu\n", "sizeof(ar):",       sizeof(ar));
    printf("%-18s  %zu\n", "sizeof(&ar):",      sizeof(&ar));
    printf("%-18s  %zu\n", "sizeof(void*):",    sizeof(void*));
    printf("%-18s  %zu\n", "sizeof(ar[1]):",    sizeof(ar[1]));
    printf("%-18s  %zu\n", "sizeof(&ar[1]):",   sizeof(&ar[1]));
    printf("%-18s  %zu\n", "sizeof(&(ar[1])):", sizeof(&(ar[1])));
    printf("%-18s  %zu\n", "sizeof((&ar)[1]):", sizeof((&ar)[1]));

    {
    char  a = 's';
    char *pa = &a;
    printf("%-18s  %s\n", "Code:", "char  a = 's';");
    printf("%-18s  %s\n", "Code:", "char *pa = &a;");
    //printf("argument: &pa   %c\n", &pa);    // DC4M
    printf("%-18s  0x%" PRIXPTR "\n", "&pa:",  (uintptr_t)&pa);
    printf("%-18s  0x%" PRIXPTR "\n", "&a:",   (uintptr_t)&a);
    printf("%-18s  0x%" PRIXPTR "\n", "pa:",   (uintptr_t)pa);
    }

    {
    char  *pa = &ar[0];
    char **ppa = &pa;
    //printf("argument: &pa   %s\n", ppa);  // DC4M
    printf("%-18s  %s\n", "Code:", "char  *pa = &ar[0];");
    printf("%-18s  %s\n", "Code:", "char **ppa = &pa;");

    printf("%-18s  0x%" PRIXPTR "\n", "&pa:",  (uintptr_t)&pa);
    printf("%-18s  0x%" PRIXPTR "\n", "ppa:",  (uintptr_t)ppa);
    printf("%-18s  0x%" PRIXPTR "\n", "*ppa:", (uintptr_t)*ppa);
    printf("%-18s  0x%" PRIXPTR "\n", "&ppa:", (uintptr_t)&ppa);
    }

} 
```

这是具有 64 位编译的 Mac OS X 10.7.4 机器的输出：

```
Code:               char ar[16] = { 'a', 'b', 'c', '
argument: &ar[1]  bc
ar:                 0x7FFF6C9DE570
&ar:                0x7FFF6C9DE570
(ar+1):             0x7FFF6C9DE571
(&ar+1):            0x7FFF6C9DE580
&ar[1]:             0x7FFF6C9DE571
&(ar[1]):           0x7FFF6C9DE571
(&ar)[1]:           0x7FFF6C9DE580
sizeof(ar):         16
sizeof(&ar):        8
sizeof(void*):      8
sizeof(ar[1]):      1
sizeof(&ar[1]):     8
sizeof(&(ar[1])):   8
sizeof((&ar)[1]):   16
Code:               char  a = 's';
Code:               char *pa = &a;
&pa:                0x7FFF6C9DE560
&a:                 0x7FFF6C9DE56F
pa:                 0x7FFF6C9DE56F
Code:               char  *pa = &ar[0];
Code:               char **ppa = &pa;
&pa:                0x7FFF6C9DE558
ppa:                0x7FFF6C9DE558
*ppa:               0x7FFF6C9DE570
&ppa:               0x7FFF6C9DE550 
```

这是 32 位编译的输出：

```
Code:               char ar[16] = { 'a', 'b', 'c', '
argument: &ar[1]  bc
ar:                 0xC008A670
&ar:                0xC008A670
(ar+1):             0xC008A671
(&ar+1):            0xC008A680
&ar[1]:             0xC008A671
&(ar[1]):           0xC008A671
(&ar)[1]:           0xC008A680
sizeof(ar):         16
sizeof(&ar):        4
sizeof(void*):      4
sizeof(ar[1]):      1
sizeof(&ar[1]):     4
sizeof(&(ar[1])):   4
sizeof((&ar)[1]):   16
Code:               char  a = 's';
Code:               char *pa = &a;
&pa:                0xC008A668
&a:                 0xC008A66F
pa:                 0xC008A66F
Code:               char  *pa = &ar[0];
Code:               char **ppa = &pa;
&pa:                0xC008A664
ppa:                0xC008A664
*ppa:               0xC008A670
&ppa:               0xC008A660 
```

当您了解各种数字是如何得出的时，您就会很好地理解事物。

注意`&array[1]`被解释为`&(array[1])`; 它与`(&array)[1]`类型和大小不同。数组下标等后缀运算符比地址 ( `&`) 和间接 ( `*`) 运算符等一元运算符绑定得更紧密。

# android - 如何使用报告按钮获取崩溃对话框

> ID：11552963
> 
> 赞同：14
> 
> 时间：2012-07-19T02:06:06.220
> 
> 标签：android

我故意让我自己的应用程序崩溃。我得到以下对话框。

![在此处输入图像描述](../Images/62ec66de2bf802542fda048d88bbac90.png)

但是，我希望得到以下带有报告按钮的崩溃对话框。

![在此处输入图像描述](../Images/4b496d79b48784ff4a78633317347ac9.png)

我可以知道我该怎么做吗？我已经签署了我的申请。（但我将 APK 本地传输到我的手机，而不是通过 Android 市场）。我仍然无法获得`Report`按钮。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-19T02:10:16.327

据我所知，该`Report`按钮仅在通过 Market 安装应用程序时显示（即已签名且未处于调试模式或使用调试密钥）。如果您是 USB 调试，这些数据都会显示在 LogCat 中。

**编辑**：此外，如果需要，您可以使用[此](https://stackoverflow.com/questions/601503/how-do-i-obtain-crash-data-from-my-android-application)方法捕获此信息并自己提交报告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T03:02:39.243

在您的应用程序中使用[acra](http://code.google.com/p/acra/)库。这基本上是“一个使 Android 应用程序能够自动将其崩溃报告发布到 GoogleDoc 表单的库”。你可以修改它的使用来弹出一个像上面这样的对话框，并要求用户报告问题，甚至还有一个额外的用户键入的消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T02:17:47.600

您的手机可能会运行像 CM 这样的自定义 rom。如果您想在您的应用程序获得 FC 时报告日志，一种方法是捕获异常并邮寄它们。

# ruby-on-rails - 如何覆盖设计控制器路由以使用我原来的 users#create 操作？

> ID：11552969
> 
> 赞同：1
> 
> 时间：2012-07-19T02:07:09.303
> 
> 标签：ruby-on-rails, controller, devise

我已经进行了设计设置，当新用户自己完成注册过程时效果很好，但在实施设计之前，管理员能够在我的旧用户控制器中创建用户和与之相关的行为。现在我在访问旧表单时正在使用设计，新操作触发正常，但是当我实际提交表单时，无论我做什么，它都会进入设计的注册控制器创建操作。我知道我可以覆盖控制器并复制我在旧用户控制器中的代码，但我想知道是否有办法防止某些调用出现这种行为？

我已经尝试专门为表单指定控制器和操作，但它什么也没做。

以下是我的路线中定义的两条相关路径：

```
 POST   /users(.:format)                                                           users#create
                       user_registration POST   /users(.:format)                                                           users/registrations#create 
```

我要解决这个问题了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T02:50:23.913

通常，当我使用设计时，我会为与用户相关的管理员 CRUD 创建一个单独的控制器。就像是：

```
# /app/controllers/admin
class Admin::UsersController < ApplicationController
  # your controller actions
end

# config/routes
namespace :admin do
  resources :users
end 
```

我发现将它们全部分开使它更易于维护并且减少了头痛。

**更新：** Devise 添加它自己的路由和路由助手，因此您的 user_registration_path 和 POST /users 将被 devise 中给出的路由所取代，在这种情况下，它也是 /users 的 POST。您可以在 github 上找到这些路线的来源：[https ://github.com/plataformatec/devise/blob/master/lib/devise/rails/routes.rb](https://github.com/plataformatec/devise/blob/master/lib/devise/rails/routes.rb)

附注：您在问题中引用的两条路径是相同的，只有第二条路径可以通过路由帮助程序访问，即 user_registration_path 或 user_registration_url ，而另一个大多数直接引用。

# c# - 需要在使用 C# 生成的 Excel 工作表中进行自定义验证（日期 + 特定文本）

> ID：11552972
> 
> 赞同：0
> 
> 时间：2012-07-19T02:07:20.957
> 
> 标签：c#, excel, validation

我希望在使用 C# 生成的 excel 表中进行验证，以便它允许在 excel 单元格中使用日期值或文本“train”。我发现`XlDVType.xlValidateDate`用于验证单元格中的日期并`XlDVType.xlValidateList`允许文本值。但我想要两者的结合，用户应该能够在单元格中输入日期或特定文本。**这可以使用完成`XlDVType.xlValidateCustom`吗？**

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T04:07:10.950

> 我想要两者的组合，用户应该能够在单元格中输入日期或特定文本。

以下代码片段为工作表中的单元格 A1 设置所需的验证：

```
Excel.Range range = xlWorkSheet.Range["A1"];
range.ClearFormats();
range.Validation.Delete();
range.Validation.Add(Excel.XlDVType.xlValidateCustom,
    Formula1: "=OR(EXACT(LEFT(CELL(\"format\",A1)),\"D\"),EXACT(A1,\"train\"))"); 
```

最复杂的部分是实际的验证公式。它使用以下功能：

`EXACT(cell,string)`将单元格的内容与文字字符串进行比较，`TRUE`仅当它们完全相同时才返回。

`CELL("format",cell)`返回包含指定单元格格式的代码，其中日期代码始终以`D`. 有关说明和所有可能代码的列表，请参阅[Office 帮助。`CELL`](http://office.microsoft.com/en-us/excel-help/cell-function-HP010062392.aspx)此片段仅查看第一个字符，它必须是 a`D`才能将内容格式化为某种日期。

`LEFT(text,count)`返回 中最左边的`count`字符`text`，`count`默认为 1。在这种情况下，`TRUE`如果内容是某种日期，则返回。

`OR(logical1, logical2)`返回`logical1 OR logical2`，所以`TRUE`如果内容是日期，或者完全等于字符串`"train"`。

此解决方案尚不理想，因为`A1`已硬编码到公式中。有一种方法可以解决这个问题，[这里](http://mediaczar.com/blog/2008/12/referring-to-this-cell-using-excel-conditional-formatting/)[`INDIRECT`](http://office.microsoft.com/en-us/excel-help/indirect-function-HP010062413.aspx)描述。您可能需要这样做，例如，如果您想一次性将验证应用于整个单元格范围。在这种情况下，硬编码需要替换为，这是指示当前 shell 的机制。您可以将其作为.`A1``INDIRECT("RC",FALSE)``INDIRECT("R"&ROW()&"C"&COLUMN(),FALSE)`

通过这种调整，他的最后一行代码看起来像这样（在 Excel 中测试，但不是从 C# 中测试）：

```
range.Validation.Add(Excel.XlDVType.xlValidateCustom,
    Formula1: "=OR(EXACT(LEFT(CELL(\"format\",INDIRECT(\"RC\",FALSE))),\"D\"),EXACT(INDIRECT(\"RC\",FALSE),\"train\"))" 
```

* * *

更新

正如 OP 指出的那样，如果首先将日期输入到单元格中，然后将日期更改为不正确的字符串或数字值，则这种方法似乎存在问题 - 请参阅下面的评论。因此，使用该`CELL`功能似乎不是最好的方法。

但是，如果单元格格式被显式设置为（更灵活的）`Text`格式，则可以使用以下行进行验证：

```
range.Validation.Delete();
range.NumberFormat = "Text";
range.Validation.Add(Excel.XlDVType.xlValidateCustom,
    Formula1: =OR(ISNUMBER(DATEVALUE(INDIRECT(\"RC\",FALSE))),EXACT(INDIRECT(\"RC\",FALSE),\"train\")); 
```

再次在 Excel 中测试，但不是在 C# 中测试。

# django - Django：保存模型后调用函数

> ID：11552975
> 
> 赞同：0
> 
> 时间：2012-07-19T02:07:42.360
> 
> 标签：django, django-models, django-admin

我想要做的是在模型保存后执行一个函数。例如：当我通过管理员上传一个数据库转储文件时，我想将它加载到数据库。

我通过覆盖保存功能尝试了以下操作：

```
class DumpFile(models.Model)
 file = models.FileField(upload_to="dump")
 def save():
  super(models.Model,self).save()
  <LOAD DUMP  LOGIC> 
```

这里给出属性错误 super 没有属性 save()。我不明白那里有什么问题。请让我知道这个问题或保存模型后可以使用的任何功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T02:09:56.023

`super`应该被赋予当前类，而不是父类：

```
super(DumpFile, self).save() 
```

另外，查看[信号](https://docs.djangoproject.com/en/dev/ref/signals/#post-save)，这是在标准 Django 事件之后使事情发生的另一种机制。

# java - 如何使用 Java 在 MongoDB 中执行通配符搜索

> ID：11552976
> 
> 赞同：1
> 
> 时间：2012-07-19T02:07:48.047
> 
> 标签：java, mongodb, wildcard

我刚刚开始使用 MongoDB！正在尝试此处支持的各种搜索功能。

我可以搜索一个文档，比如包含 name=MongoDB 并带有以下选项（无论哪种情况） - *goDB、Mongo*、*go*。努力在以下选项中搜索文档 - Mon*DB、*on*DB。也就是说，在同一搜索文本中有多个通配符。

任何指针将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T02:13:51.843

您可以对 Mongo 中的字段进行[正则表达式](http://www.mongodb.org/display/DOCS/Java+Types#JavaTypes-RegularExpressions)匹配，这是您第一个模式的执行方式：

```
Pattern p = Pattern.compile("Mon.*DB", CASE_INSENSITIVE);
BasicDBObject query = new BasicDBObject("name", p);

// finds all records with "name" matching /Mon.*DB/i
DBCursor cursor = collection.find(query); 
```

但是要小心，许多正则表达式匹配需要全表扫描。这意味着如果您针对大型集合运行它们，引擎将不得不遍历所有文档（可能会命中磁盘）并单独检查每个文档是否匹配。这比使用索引的查询慢得多。

唯一会命中索引的正则表达式是区分大小写的前缀匹配。您可以像这样搜索所有“Mon*”并使用索引：

```
Pattern p = Pattern.compile("^Mon.*");
BasicDBObject query = new BasicDBObject("name", p);

// finds all records with "name" matching /^Mon.*/
DBCursor cursor = collection.find(query); 
```

# iphone - 如何将菜单项添加到 iOS 中的共享菜单

> ID：11552978
> 
> 赞同：4
> 
> 时间：2012-07-19T02:08:08.117
> 
> 标签：iphone, objective-c, ios, menu

我刚刚进入 iOS 开发，但我必须尽早做的是向系统菜单添加一个按钮，例如 Dropbox 在与电子邮件附件交互时如何添加其按钮。

此应用程序将用于视频，因此在快速播放器的共享菜单上添加一个按钮将是理想的。

我搜索了文档，只找到了 UIMenuItem 类。这是我想要的还是有其他方法来实现这个功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T03:04:59.537

1.  设置 project-info.plist -> 添加新项目 (UTExportedTypeDeclarations)

    ```
    <key>UTExportedTypeDeclarations</key>
    <array>
    <dict>
        <key>UTTypeConformsTo</key>
        <array>
            <string>com.apple.quicktime-movie</string>
        </array>
        <key>UTTypeIdentifier</key>
        <string>com.company.project</string>
        <key>UTTypeTagSpecification</key>
        <dict/>
    </dict>
    </array> 
    ```

2.  在 .m 文件中编码 ButtonClick 事件

    ```
    -(IBAction)actionClick:(id)sender{

        UIDocumentInteractionController *documentController = 
              [UIDocumentInteractionController interactionControllerWithURL:
                                      [NSURL fileURLWithPath:MOVIE_FILE_PATH]];
        documentController.delegate = self;
        documentController.UTI = @"com.apple.quicktime-movie";
        [documentController presentOpenInMenuFromRect:CGRectZero 
                                               inView:self.view 
                                             animated:YES];
    } 
    ```

# java - 通过套接字在 Java 桌面应用程序和 Java 浏览器小程序之间建立通信

> ID：11552980
> 
> 赞同：1
> 
> 时间：2012-07-19T02:08:37.917
> 
> 标签：java, javascript, sockets, google-chrome, japplet

我是网络 I/O 编程的新手，我遇到了一个障碍——基本上我想做的是让桌面应用程序与 google maps javascript API 对话。为了促进这一点，我构建了一个 java 小程序，它将充当桌面应用程序和浏览器 javascript 应用程序之间的桥梁。当我在 Eclipse 中一起运行桌面应用程序和小程序时，它们可以完美通信，并且我能够通过将字符串写入绑定到小程序已建立 ServerSocket 连接的同一端口的套接字来调用小程序函数。为了在 Eclipse 中进行测试，我将字符串“sendJSAlertTest”发送到套接字的输出流，然后使用 java.lang.reflect API 从 ServerSocket 输入流派生一个 Method 实例，最后在 applet 中调用生成的方法。当小程序在浏览器中运行时，我将“sendJSAlert”写入套接字，因为它会导致实际调用 javascript。在 Eclipse 中使用 appletviewer 的结果是桌面应用程序上下文打印输出“awesome sendJSAlert”，而applet 上下文打印来自 sendJSAlertTest() 方法的输出“Hello Client，我是服务器！”。将“sendJSAlert”传递给在浏览器中运行的小程序的结果是桌面应用程序打印 null，这表明由于某种原因 ServerSocket 的输入流为空，并且浏览器本身在它应该生成一个 JavaScript 警报框时什么也不做文本“你好客户端，我是服务器！”。我使用的浏览器是谷歌浏览器，

下面是相关的Java代码和HTML：

SocketClient.java

```
import java.awt.event.*;
import java.io.*;
import java.net.*;

public class SocketClient {

Socket socket = null;
PrintWriter out = null;
BufferedReader in = null;
private InetAddress myAddress;
private String remoteFunction;

public SocketClient(){

}

public void listenSocket(int portNum){
//Create socket connection

 try{
   System.out.println("@Client Trying to create socket bound to port " + portNum);
   socket = new Socket(<my hostname here as a string>, portNum);
   System.out.println("the attached socket port is " + socket.getLocalPort());
   System.out.flush();
   out = new PrintWriter(socket.getOutputStream(), true);
   out.println("sendJSAlertTest");
   in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
   String line = in.readLine();
   System.out.println("@CLient side Text received from server: " + line);
 } catch (UnknownHostException e) {
   System.out.println("Unknown host: <my hostname here as a string>.eng");
   System.exit(1);
 } catch  (IOException e) {
   System.out.println("No I/O");
   e.printStackTrace();
   System.exit(1);
 }
}

public void setRemoteFunction(String funcName){
  remoteFunction = funcName;
}
public String getRemoteFunction(){
 return remoteFunction;
}

} 
```

SocketServer.java

```
import java.io.*;
import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;
import java.net.*;

class SocketServer {

ServerSocket server = null;
Socket client = null;
BufferedReader in = null;
PrintWriter out = null;
String line;
private NetComm hNet;
private Method serverMethod;

SocketServer(NetComm netmain){
   hNet = netmain;

}

public void listenSocket(int portNum){

try{
  System.out.println("@server Trying to create socket bound to port " + portNum);
  server = new ServerSocket(portNum);
  System.out.println("the attached socket port is " + server.getLocalPort());
} catch (IOException e) {
  System.out.println("Could not listen on port " + portNum);
  System.exit(-1);
}

try{
  client = server.accept();
  System.out.println("Connection accepted!");
} catch (IOException e) {
  System.out.println("Accept failed: " + portNum);
  System.exit(-1);
}

try{
  in = new BufferedReader(new InputStreamReader(client.getInputStream()));
  out = new PrintWriter(client.getOutputStream(), true);
} catch (IOException e) {
  System.out.println("Accept failed: " + portNum);
  System.exit(-1);
}

while(true){
  try{
     System.out.println("trying to read from inputstream...");
    line = in.readLine();
    System.out.println(line);
    //Now that we have a method name, invoke it
    try {
        serverMethod = hNet.getClass().getDeclaredMethod(line,
  String.class);
    } catch (SecurityException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (NoSuchMethodException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    try {
        serverMethod.invoke(hNet, "Hello Client, I'm a Server!");
    } catch (IllegalArgumentException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IllegalAccessException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (InvocationTargetException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    //Send data back to client
    out.println("awesome " + line);

   } catch (IOException e) {
     System.out.println("Read failed");
     System.out.flush();
     System.exit(-1);
   }

  }
  }

  protected void finalize(){
  //Clean up
  try{
    in.close();
    out.close();
    server.close();
  } catch (IOException e) {
    System.out.println("Could not close.");
    System.exit(-1);
 }
}

public int getBoundLocalPort(){
  return server.getLocalPort();
}

} 
```

NetComm.java

```
import cresco.ai.att.ccm.core.CCMMain;
import cresco.ai.att.ccm.gui.DataPanel;

import java.io.*;
import java.lang.reflect.Method;
import java.net.MalformedURLException;
import java.net.ServerSocket;
import java.net.Socket;
import java.net.URL;
import java.util.ArrayList;

import javax.servlet.*;
import javax.servlet.http.*;

import java.applet.*;

public class NetComm extends JApplet{//HttpServlet{
private CCMMain hMain;
private DataPanel dpLocal;
private SocketServer sockserver;
private Method serverMethod;

String testStr;
Integer testInt;  /*integer */
Character testChar; /*character*/

//Testing this...
ServerSocket server = null;
Socket client = null;
BufferedReader in = null;
PrintWriter out = null;
String line;

@Override
public void init(){
    sockserver = new SocketServer(this);

    //For offline debug (should be disabled in a release to the webapp):
            //initSocketServer is commented out in the release version and
            //invoked in the Eclipse testbed version.  In the webapp,
            //initSocketServer is invoked from javascript (see below js sockPuppet())
    //////initSocketServer(0);

    String msg = "Hello from Java (using javascript alert)";
    try {
        getAppletContext().showDocument(new URL("javascript:doAlert(\"" +
   msg +"\")"));
    }
    catch (MalformedURLException me) { }

}

public void sendJSAlertTest(String message){
    System.out.println("sendJSAlert remotely invoked, with message: " +
    message);

}

public void sendJSAlert(String message){

    try {
        getAppletContext().showDocument(new URL("javascript:doAlert(\"" +
    message +"\")"));
    }
    catch (MalformedURLException me) { }

}

public void initSocketServer(int portNum){
    sockserver.listenSocket(portNum);
}
public void finalizeSocketServer(){
    sockserver.finalize();
}

public int socket2Me(int portNum){

    try {
        socks.add(new ServerSocket(portNum));
        return 0; //socket opened successfully
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        return -1; //socket failed to open
    }

}

public int getSocketServerPort(){
    return sockserver.getBoundLocalPort();
}

public void showRectTest(){
    try {
        getAppletContext().showDocument(new
                    URL("javascript:overlayRect()"));
    }
    catch (MalformedURLException me) { }
}

public void setGUI(DataPanel d){
    dpLocal = d;
}

 } 
```

MapViz.html

```
<html>
<head>
<title>Welcome to Geographic Midpoint Map Vizualization!</title>
<meta name="viewport"
    content="width=device-width, initial-scale=1.0, user-scalable=no">
<meta charset="UTF-8">
<link href="https://google-developers.appspot.com/maps/documentation/javascript
/examples/default.css"
    rel="stylesheet" type="text/css">

...google maps stuff omitted...

<script type="text/javascript">
<script type="text/javascript">
function overlayRect(){
    var c=document.getElementById("myCanvas");
    var ctx=c.getContext("2d");
    ctx.fillStyle="#FF0000";
    ctx.fillRect(0,0,150,75);
}
function doAlert(s){
    alert(s);
}
function testJava(){
    document.ccmApplet.showRectTest();
}
function sockPuppet(){
    var i = parseInt(document.getElementById("args").value,10);
    alert("parsing the input args... got " + i);
    if(i == NaN || i == null){
        i = 0;
    }
    alert("passed NaN OR null block, i is " + i);
    //i = 6672; //because $%*& you, that's why!
    document.ccmApplet.initSocketServer(i);
    //document.ccmApplet.listenSocket(i);
    alert("inittializing socket server...");
    //queryPort();
    alert("querying port...");
    document.ccmApplet.finalizeSocketServer();
    //document.ccmApplet.finalize();
    alert("finalizing socket server...");
}
function queryPort(){
    var d = document.getElementById("debug");
    var s1 = "Last port opened was: ";
    //var s2 = document.ccmApplet.getLastBoundPort();
    var s2 = document.ccmApplet.getSocketServerPort();
    var sFinal = s1.concat(s2);
    d.value = sFinal;
}
</script>
 </head>
 <body>
 <applet width="500" height="50" name="ccmApplet" archive="CCM.jar"
 code="cresco.ai.att.ccm.io.NetComm" MAYSCRIPT></applet>
 <p></p>
<canvas id="myCanvas" width="200" height="100"></canvas>
 <div id="map_canvas"></div>
<input id="args" type="textentry" value="" />
<button height="50" width="50" onClick="sockPuppet()">Test Socket
    Creation</button>
<input id="debug" type="debugthingy" value="debug area..." />
<button height="50" width="50" onClick="testJava()">Test Java Callback</button>
  </body>
 </html> 
```

在 webapp 中，我用本地机器上的有效端口号填写 args 输入，然后按下调用 sockPuppet() javascript 的 Test Socket Connection 按钮。这应该创建一个 ServerSocket 并将其绑定到指定的端口，然后我通过 SocketClient.listenSocket 将我的桌面客户端应用程序单独连接到该端口。Eclipse 在桌面应用程序上下文中的结果是“很棒的 sendJSAlertTest”，而在 appletviewer 上下文中是输出“远程调用 sendJSAlert，带有消息：Hello Client，我是服务器！”。调用 sendJSAlert() 的 web 应用程序应该在同一条消息上调用 javascript 警报函数，创建一个弹出框，其中包含消息“sendJSAlert 远程调用，消息：Hello Client，我是服务器！”

所以问题是：不同结果的原因可能是什么？我知道浏览器的安全沙箱可能是一个问题，但我已经包含了一个权限文件，它应该允许通过任何 localhost 端口上的套接字进行通信：

```
grant {
 permission java.net.SocketPermission
    "localhost:1024-", 
 "accept, connect, listen, resolve";
}; 
```

虽然我没有正确应用权限，但肯定有可能（我使用了 sun policytool gui）；在小程序代码（如果有的话）中究竟需要做什么来应用权限？安全问题会导致我看到没有响应吗？我希望在 Chrome 的 java 调试控制台中报告一个异常，但没有任何...

任何帮助将不胜感激，谢谢！

-CCJ

更新：好的，一些新信息：我在打开 javascript 控制台的情况下再次在 Chrome 中运行小程序（可以发誓我之前尝试过但没有效果，但显然没有）并收到以下控制台输出 -

```
"Uncaught Error: java.security.AccessControlException: access denied 
("java.net.SocketPermission" "<myipaddress>:4218" "accept,resolve") MapVizApp.html:154
 sockPuppet MapVizApp.html:154 onclick MapVizApp.html:179 Uncaught Error: Error 
 calling method on NPObject. sockPuppet onclick " 
```

所以现在的问题是我为什么要触发这个安全异常？上面给定权限的策略文件与html页面和包含applet的jar文件在同一个工作目录下，我在我系统的JRE安全策略文件中添加了以下内容

```
//Grants my NetComm applet the ability to accept, connect, and listen on unpriv. ports
grant codeBase "file:${user.home}\Desktop\dev\invention\ATT\MapViz\CCM.jar" {
  permission java.net.SocketPermission
    "localhost:1024-", 
  "accept, connect, listen, resolve";
}; 
```

我还没有签署小程序，但我的理解是，如果策略文件是有序的，则不需要签署小程序......如果我错了，请告诉我。无论如何，尽管策略文件具有上述授予权限，但是否有人对为什么抛出此安全异常有任何建议？JRE 查找的工作目录中的策略文件是否有命名约定？我现在的工作目录策略文件只是命名为 ccmPolFile，但我不清楚 JRE 应该如何定位它；是否需要在小程序代码中添加一些内容以将 JRE 指向预期的工作目录策略文件？此外，我添加的系统策略文件授权本身是否足以满足我在 CCM.jar 中的小程序的套接字权限？

更新 2：我签署了 applet 并将行 policy.url.3=file:${user.home}\Desktop\dev\invention\ATT\MapViz\ccmPolFile.policy 添加到我的 java.security 文件中 ${java. home}/lib/security （通过[http://docs.oracle.com/javase/tutorial/security/tour2/step4.html#Approach2](http://docs.oracle.com/javase/tutorial/security/tour2/step4.html#Approach2)这显然是 JRE 定位要加载的策略文件的方式）......遗憾的是，结果是完全相同的安全异常。我所知道的唯一剩下的就是

```
AccessController.doPrivileged(new PrivilegedAction() {
    public Object run() {
        // perform the security-sensitive operation here
        return null;
    }
}); 
```

自从小程序现在签名以来，这应该让我几乎可以做任何事情。我想继续退出等式，但策略文件由于某种原因无法正常工作。我很快就会回来看看结果如何

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T21:08:07.177

对，所以在我上面的更新 2 之后，我将 SocketServer.java 代码中的 listenSocket() 方法更改为

```
public void listenSocket(int portNum){
  AccessController.doPrivileged(new PrivilegedAction() {
        public Object run() {
            int portNum = 4444;
try{
  System.out.println("@server Trying to create socket bound to port " + portNum);
  server = new ServerSocket(portNum); 
  System.out.println("the attached socket port is " + server.getLocalPort());
} catch (IOException e) {
  System.out.println("Could not listen on port " + portNum);
  System.exit(-1);
}

try{
  client = server.accept();
  System.out.println("Connection accepted!");
} catch (IOException e) {
  System.out.println("Accept failed: " + portNum);
  System.exit(-1);
}

try{
  in = new BufferedReader(new InputStreamReader(client.getInputStream()));
  out = new PrintWriter(client.getOutputStream(), true);
} catch (IOException e) {
  System.out.println("Accept failed: " + portNum);
  System.exit(-1);
}

while(portNum==4444){
  try{
     System.out.println("trying to read from inputstream...");
    line = in.readLine();
    System.out.println(line);
    //Now that we have a method name, invoke it
    try {
        serverMethod = hNet.getClass().getDeclaredMethod(line, 
     String.class);
    } catch (SecurityException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (NoSuchMethodException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    try {
        serverMethod.invoke(hNet, "Hello from Javascript invoked by the
    desktop app!");
    } catch (IllegalArgumentException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IllegalAccessException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (InvocationTargetException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    //Send data back to client
    out.println("awesome " + line);
    //System.out.println(line);
    //System.out.flush();

  } catch (IOException e) {
    System.out.println("Read failed");
    System.out.flush();
    System.exit(-1);
  }

}

return null;
        }
    });//end doPrivileged
} 
```

显然这是一个不安全的组合，但它可以解决问题——我没有收到任何安全异常，桌面应用程序会打印“awesome sendJSAlert”，所以我知道 IO 正在通过套接字在客户端和服务器上下文之间工作。实际的 js 警报功能没有触发，但我认为这与上面 listenSocket() 中可怕的无限 while 循环有关......

带回家的消息：出于某种原因，为了从谷歌浏览器中的小程序建立套接字连接，我需要签署小程序并使用 AccessController.doPrivileged() 来调用我的安全敏感代码，尽管我已经设置了我的本地策略和安全文件来授予我的权限小程序这些权限

谷歌人看到参考：

[http://www.coderanch.com/how-to/java/HowCanAnAppletReadFilesOnTheLocalFileSystem](http://www.coderanch.com/how-to/java/HowCanAnAppletReadFilesOnTheLocalFileSystem)

[http://docs.oracle.com/javase/7/docs/api/java/security/AccessController.html](http://docs.oracle.com/javase/7/docs/api/java/security/AccessController.html)

[http://www-personal.umich.edu/~lsiden/tutorials/signed-applet/signed-applet.html](http://www-personal.umich.edu/~lsiden/tutorials/signed-applet/signed-applet.html)

[http://docs.oracle.com/javase/tutorial/security/tour2/step4.html](http://docs.oracle.com/javase/tutorial/security/tour2/step4.html)

更新：终于 100% 工作：DI 将上面 SocketServer.java 中的 listenSocket() 方法更改为：

```
public void listenSocket(int portNum){
  AccessController.doPrivileged(new PrivilegedAction() {
        public Object run() {
            int portNum = 4444;
try{
  System.out.println("@server Trying to create socket bound to port " + portNum);
  server = new ServerSocket(portNum); 
  System.out.println("the attached socket port is " + server.getLocalPort());
} catch (IOException e) {
  System.out.println("Could not listen on port " + portNum);
  System.exit(-1);
}

try{
  client = server.accept();
  System.out.println("Connection accepted!");
} catch (IOException e) {
  System.out.println("Accept failed: " + portNum);
  System.exit(-1);
}

try{
  in = new BufferedReader(new InputStreamReader(client.getInputStream()));
  out = new PrintWriter(client.getOutputStream(), true);
} catch (IOException e) {
  System.out.println("Accept failed: " + portNum);
  System.exit(-1);
}

try {
    line = in.readLine();
    System.out.println("line is " + line + " from the inputstream to the 
            serversocket");
} catch (IOException e1) {
    // TODO Auto-generated catch block
    e1.printStackTrace();
}

if(line != null){
  System.out.println("trying to read from non-null inputstream...");
//line = in.readLine();
System.out.println(line);
//Now that we have a method name, invoke that bitch!
try {
    serverMethod = hNet.getClass().getDeclaredMethod(line, String.class);
} catch (SecurityException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (NoSuchMethodException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}

try {
    serverMethod.invoke(hNet, "Hello From Javascript invoked by a desktop 
             app!");
} catch (IllegalArgumentException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (IllegalAccessException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (InvocationTargetException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}

//Send data back to client
out.println("awesome " + line);
//System.out.println(line);
//System.out.flush();

 }

return null;
        }
    });//end doPrivileged
} 
```

server.accept() 方法会一直阻塞，直到建立连接为止，因此对于我只想一次将一个命令传递给 serversocket 输入流的这种情况，while 循环没有意义。对 if 的更改允许程序实际继续执行 java.reflect 内容，该内容调用 applet 中的一个方法，该方法直接调用 javascript 函数。由于端口仍然是硬编码的并且小程序使用 doPrivileged(...) 这仍然不是一个很好的解决方案，但它确实满足了通过 Java 小程序桥从桌面 Java 应用程序调用 Web 浏览器中的 JavaScript 的用例所以它为更强大的实现提供了一个很好的跳板！

# javascript - 如何在动画进行时隐藏此 div？

> ID：11552982
> 
> 赞同：0
> 
> 时间：2012-07-19T02:09:25.323
> 
> 标签：javascript, jquery

```
 $('body').animate({scrollTop: $('#content-display').offset().top}, function () {
        $("#loading").hide();
    }, 'slow'); 
```

JSHint 喜欢它，但我得到了一个`Uncaught TypeError: Object #<Object> has no method 'slow'`控制台。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T02:11:48.180

你的论点有问题：

```
$('body').animate({scrollTop: $('#content-display').offset().top}, 'slow', function () {
    $("#loading").show();
}); 
```

从[`animate`](http://api.jquery.com/animate)文档中：

> .animate（**属性[，持续时间] [，缓动] [，完成]**）

但是，如果你想做你的标题所说的，你会想要在动画*之前*`show`的 div ，然后在之后隐藏它：

 *```
$("#loading").show();
$('body').animate({scrollTop: $('#content-display').offset().top}, function () {
    $("#loading").hide();
}, 'slow'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T02:19:25.797

反之亦然.. animate 函数的语法是

动画（属性，持续时间，功能）

请改成

`$('body').animate({scrollTop: $('#content-display').offset().top}, 'slow', function () { $("#loading").show(); });`*

# parsing - 节点 CSV 解析器输出问题

> ID：11552983
> 
> 赞同：1
> 
> 时间：2012-07-19T02:09:53.643
> 
> 标签：parsing, node.js, mongodb, csv, mongoose

我正在尝试使用 Node CSV Parser 从我的 Mongo 数据库中读取查询结果并将其写入 csv 文件。

当我运行我的脚本时，我得到一个 csv 文件，第一行有两个 [object] 条目，其他所有内容都是空白的。

这是我的代码：

```
// node samples/sample.js
var csv = require('csv');

var mongoose = require('mongoose');

var User = require('../models/userModel').User;

dsn = "mongodb://localhost/test";

mongoose.connect(dsn);

console.log ("here");

var users = User.find({}, function(err, result){
        console.log(result);
        });
var columns = ['userName','agencyName','email','password','id']; 

csv()
.from(users, {
    columns: true
    })
.toPath(__dirname+'/users.csv',{
    columns: ['userName','agencyName','email','password','id']
    })
.transform(function(data){
    data.unshift(data.pop());
    return data;
})
.on('data',function(data,index){
    console.log('#'+index+' '+JSON.stringify(data));
})
.on('end',function(count){
    console.log('Number of lines: '+count);  
})
.on('error',function(error){
    console.log(error.message);
}); 
```

这是终端中显示的数据：

```
[ { userName: 'LasVegas',
    agencyName: 'City of Las Vegas',
    email: 'lasvegas@gmail.com',
    password: 'upload1',
    _id: 4ffe2e6bddc0c02b15000001 } ] 
```

我只在数据库中输入了一个用户，所以我相信它是正确的。

任何帮助将不胜感激！

编辑：

这是我尝试在回调中调用 csv 后的代码：

```
// node samples/sample.js
var csv = require('csv');

var mongoose = require('mongoose');

var User = require('../models/userModel').User;

dsn = "mongodb://localhost/test";

mongoose.connect(dsn);

console.log ("here");

var columns = ['userName','agencyName','email','password','id']; 

var users = User.find({}, function(err, result){
    console.log(result);

if (err){
    callback(err,null);
}else{

csv()
.from(users, {
columns: true
})
.toPath(__dirname+'/users.csv',{
columns: ['userName','agencyName','email','password','id']
})
.transform(function(data){
data.unshift(data.pop());
return data; 
})
.on('data',function(data,index){
console.log('#'+index+' '+JSON.stringify(data));
})
.on('end',function(count){
console.log('Number of lines: '+count);
})
.on('error',function(error){
console.log(error.message);
})
}
}); 
```

现在不是两个 [object] 字段，而是这些字段包含奇怪的符号，并且在打开文件时要求我选择一个过滤器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T04:21:40.700

您的调用`User.find()`是异步的；它没有将搜索结果分配给`users`. 您需要将调用移动到回调中，并将对那里`csv`的引用替换为或将回调参数重命名为.`users``results``users`

# java - 将带有 ajax 的列表发送到我的 Spring Controller

> ID：11552984
> 
> 赞同：1
> 
> 时间：2012-07-19T02:09:55.000
> 
> 标签：java, spring

我在使用 Spring MVC 和 Ajax 时遇到问题。我正在尝试向我的 Spring Controller 发送一个 javascript 列表，但我不能。我必须进行搜索，并且需要发送带有一些参数的列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:28:00.317

如果您通过 ajax 发送，则必须将列表转换为 json，这[来自 spring 博客本身](http://blog.springsource.com/2010/01/25/ajax-simplifications-in-spring-3-0/)：

```
$("#account").submit(function() {
    var account = $(this).serializeObject();
    $.postJSON("account", account, function(data) {
        $("#assignedId").val(data.id);
        showPopup();
    });
    return false;
});

@RequestMapping(method=RequestMethod.POST)
public @ResponseBody Map<String, ? extends Object> create(@RequestBody Account account, HttpServletResponse response) {
    Set<ConstraintViolation<Account>> failures = validator.validate(account);
    if (!failures.isEmpty()) {
        response.setStatus(HttpServletResponse.SC_BAD_REQUEST);
        return validationMessages(failures);
    } else {
        accounts.put(account.assignId(), account);
        return Collections.singletonMap("id", account.getId());
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T08:35:56.473

您必须将列表转换为 JSON String ，然后才能将其用作 AJAX 参数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T08:38:03.677

SO中的这个[答案可能会有所帮助](https://stackoverflow.com/questions/8265717/how-to-send-js-array-in-ajax)

客户端的jquery ajax

```
$.ajax({
        type: "POST",
        url: "submit",
        data:JSON.stringify(detailsArr),
        success: function(html){
          alert( "Submitted");
            }
      }); 
```

在服务器端

```
@RequestMapping(value = "/search", method=RequestMethod.POST)
public String yourMethod(@RequestBody String body){
//convert body to array using JSONLib, FlexJSON or Gson
} 
```

# javascript - 轻松清理 sinon 存根

> ID：11552991
> 
> 赞同：155
> 
> 时间：2012-07-19T02:10:37.553
> 
> 标签：javascript, testing, mocha.js, stubbing, sinon

有没有一种方法可以轻松地重置所有可以与 mocha 的 beforeEach 块一起干净地工作的 sinon spys 模拟和存根。

我看到沙盒是一种选择，但我看不出如何为此使用沙盒

```
beforeEach ->
  sinon.stub some, 'method'
  sinon.stub some, 'mother'

afterEach ->
  # I want to avoid these lines
  some.method.restore()
  some.other.restore()

it 'should call a some method and not other', ->
  some.method()
  assert.called some.method 
```

* * *

## 回答 #1

> 赞同：318
> 
> 时间：2012-12-26T13:55:40.393

[Sinon 通过使用Sandboxes](http://sinonjs.org/releases/v4.0.0/sandbox/)来提供此功能，可以通过以下几种方式使用：

```
// manually create and restore the sandbox
var sandbox;
beforeEach(function () {
    sandbox = sinon.sandbox.create();
});

afterEach(function () {
    sandbox.restore();
});

it('should restore all mocks stubs and spies between tests', function() {
    sandbox.stub(some, 'method'); // note the use of "sandbox"
} 
```

或者

```
// wrap your test function in sinon.test()
it("should automatically restore all mocks stubs and spies", sinon.test(function() {
    this.stub(some, 'method'); // note the use of "this"
})); 
```

* * *

## 回答 #2

> 赞同：100
> 
> 时间：2019-03-19T23:45:47.753

以前的答案建议使用`sandboxes`来完成此操作，但根据[文档](https://sinonjs.org/releases/latest/sandbox/)：

> 从 sinon@5.0.0 开始， sinon 对象是默认沙箱。

这意味着清理你的存根/模拟/间谍现在很容易：

```
var sinon = require('sinon');

it('should do my bidding', function() {
    sinon.stub(some, 'method');
}

afterEach(function () {
    sinon.restore();
}); 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2017-04-19T03:30:13.833

@keithjgrant 答案的更新。

**从v2.0.0**版本开始，**sinon.test**方法已移至[单独的](https://www.npmjs.com/package/sinon-test)[模块](https://www.npmjs.com/package/sinon-test)中。要使旧测试通过，您需要在每个测试中配置这个额外的依赖项：**[`sinon-test`](https://www.npmjs.com/package/sinon-test)**

 **```
var sinonTest = require('sinon-test');
sinon.test = sinonTest.configureTest(sinon); 
```

或者，您不使用沙箱`sinon-test`并使用[沙箱](http://sinonjs.org/releases/v2.0.0/sandbox/)：

```
var sandbox = sinon.sandbox.create();

afterEach(function () {
    sandbox.restore();
});

it('should restore all mocks stubs and spies between tests', function() {
    sandbox.stub(some, 'method'); // note the use of "sandbox"
} 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-07-11T21:36:46.323

您可以使用 sinon 库的作者在[这篇](http://cjohansen.no/en/javascript/higer_level_stubbing_and_mocking_tools_in_sinon)博文（日期为 2010 年 5 月）中说明的 sinon.collection。

sinon.collection api 已更改，使用方法如下：

```
beforeEach(function () {
  fakes = sinon.collection;
});

afterEach(function () {
  fakes.restore();
});

it('should restore all mocks stubs and spies between tests', function() {
  stub = fakes.stub(window, 'someFunction');
} 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-06-16T16:22:02.613

`restore()`只是恢复存根功能的行为，但不会重置存根的状态。您必须使用存根包装测试`sinon.test`并使用`this.stub`或单独调用`reset()`存根

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-07-18T12:41:47.857

如果您想要一个让 sinon 始终为所有测试自行重置的设置：

**在 helper.js 中：**

```
import sinon from 'sinon'

var sandbox;

beforeEach(function() {
    this.sinon = sandbox = sinon.sandbox.create();
});

afterEach(function() {
    sandbox.restore();
}); 
```

**然后，在您的测试中：**

```
it("some test", function() {
    this.sinon.stub(obj, 'hi').returns(null)
}) 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-04-18T14:54:07.847

请注意，当使用 qunit 代替 mocha 时，您需要将它们包装在一个模块中，例如

```
module("module name"
{
    //For QUnit2 use
    beforeEach: function() {
    //For QUnit1 use
    setup: function () {
      fakes = sinon.collection;
    },

    //For QUnit2 use
    afterEach: function() {
    //For QUnit1 use
    teardown: function () {
      fakes.restore();
    }
});

test("should restore all mocks stubs and spies between tests", function() {
      stub = fakes.stub(window, 'someFunction');
    }
); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-04-20T09:43:04.397

创建一个沙盒，它将充当所有间谍、存根、模拟和伪造品的黑盒容器。

您所要做的就是在第一个描述块中创建一个沙箱，以便在所有测试用例中都可以访问它。一旦你完成了所有的测试用例，你应该释放原始方法并使用 `sandbox.restore()`afterEach 钩子中的方法清理存根，以便在运行时它释放持有的资源`afterEach`测试用例通过或失败。

这是一个例子：

```
 describe('MyController', () => {
    //Creates a new sandbox object
    const sandbox = sinon.createSandbox();
    let myControllerInstance: MyController;

    let loginStub: sinon.SinonStub;
    beforeEach(async () => {
        let config = {key: 'value'};
        myControllerInstance = new MyController(config);
        loginStub = sandbox.stub(ThirdPartyModule, 'login').resolves({success: true});
    });
    describe('MyControllerMethod1', () => {
        it('should run successfully', async () => {
            loginStub.withArgs({username: 'Test', password: 'Test'}).resolves();
            let ret = await myControllerInstance.run();
            expect(ret.status).to.eq('200');
            expect(loginStub.called).to.be.true;
        });
    });
    afterEach(async () => {
        //clean and release the original methods afterEach test case at runtime
        sandbox.restore(); 
    });
}); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-05-11T15:09:58.843

下面将重置所有存根和嵌套存根。

```
sinon.reset(); 
```

或者你做 `NameOfFunctiontionYouWantToReset.resetHistory();`

像 `addingStub.resetHistory();`**

# javascript - 在不重新加载页面的情况下更新 URL 哈希

> ID：11552993
> 
> 赞同：3
> 
> 时间：2012-07-19T02:10:49.550
> 
> 标签：javascript, jquery, url

```
<script>
function CurHash(){
    var id = parseInt(window.location.hash.replace("#", ""));
    alert(id);
}
</script>

<!-- START URL: test.htm#1 -->
<a href='#1' onClick='CurHash()'>#1</a>
<a href='#2' onClick='CurHash()'>#2</a>
<a href='#3' onClick='CurHash()'>#3</a> 
```

如果我们现在在 test.htm#1 并点击链接 #2，alert 显示 1 数字，而不是 2，并且在 URL 中的这个哈希更改为 2 之后。当你下次点击 3 时，它将显示 prevouse 2，依此类推.

对我来说有问题，因为我使用哈希在固定高度上滚动我的页面内容（由于架构问题而不能使用锚点），并且单击链接后这种行为只会在第二次单击时发生滚动，这是完全错误的.

问题：**如何更新哈希并获取更新的（不是以前的）值以供进一步使用，而不在浏览器中重新加载页面（页面上已经滚动的所有内容，从服务器重新加载不是好的解决方案）。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T02:23:04.520

不完全是跨浏览器，但如果你愿意，你可以得到跨浏览器的 hashchange 变通方法，

```
<script>
$(window).on('hashchange load',function(){
    var id = parseInt(window.location.hash.replace("#", ""));
    alert(id);
});
</script>

<!-- START URL: test.htm#1 -->
<a href='#1'>#1</a>
<a href='#2'>#2</a>
<a href='#3'>#3</a> 
```

使用绑定：http: [//jsfiddle.net/KdqWK/1/](http://jsfiddle.net/KdqWK/1/)

使用：http: [//jsfiddle.net/KdqWK/2/](http://jsfiddle.net/KdqWK/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T02:49:13.917

不要在onclick中调用curHash，而是在设置hash后在href中调用它。请找到以下代码。

```
<a href='javascript:location.hash="#1";CurHash();'>#1</a>
<a href='javascript:location.hash="#2";CurHash();'>#2</a>
<a href='javascript:location.hash="#3";CurHash();'>#3</a> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T02:27:47.070

我会使用**onpopstate**和**onhashchange**事件监听器：

```
<html>
<head>
<title>Untitled Document</title>
<script type="text/javascript">

    if (typeof window.onpopstate != 'undefined') {
        window.onpopstate = curHash;
    } else if (typeof window.onhashchange != 'undefined') {
        window.onhashchange = curHash;
    }

    function curHash() {
        var h = window.location.hash;
        if (h == '') return; // no hash. this is probably the first load
        h = h.substr(1); // hash always starts with #
        alert('hash: ' + h);
    }

</script>
</head>

<body>
<ul style="margin:0; padding:0;">
    <li><a href="#1">Click here for 1</a></li>
    <li><a href="#2">Click here for 2</a></li>
    <li><a href="#3">Click here for 3</a></li>
    <li><a href="#4">Click here for 4</a></li>
</ul>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-19T02:31:20.437

您可以设置 URL 的哈希值

```
window.location.hash = '#newhash'; 
```

您也可以只使用 JS 变量来存储单击的链接并将其传递到您的代码中......除非我误解了这个问题。

# apache - .htaccess 重写多个规则不起作用

> ID：11552996
> 
> 赞同：0
> 
> 时间：2012-07-19T02:11:31.693
> 
> 标签：apache, .htaccess, mod-rewrite

我已经阅读了一些关于如何进行重写的资源，并在以下方面取得了一些成功：

```
RewriteEngine On
RewriteBase /~me/website.net/html/
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteRule ^(.*)$ property.php?property=$1 
```

...我可能不需要告诉你皈依者...

```
http://imac-i3.local/~me/website.net/html/property-name 
```

...至 ....

```
http://imac-i3.local/~me/website.net/html/property.php?property=property-name 
```

无论我读了多少书，我都无法弄清楚我需要做的下一阶段是转换......

```
http://imac-i3.local/~me/website.net/html/1
http://imac-i3.local/~me/website.net/html/property/property-name 
```

至...

```
http://imac-i3.local/~me/website.net/html/index.php?page=1
http://imac-i3.local/~me/website.net/html/property.php?property-name 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T02:18:11.640

您想将规则从更改`RewriteRule ^(.*)$ property.php?property=$1`为：

```
RewriteRule ^property/(.*)$ property.php?property=$1 [L] 
```

并为分页添加这个（它可以在你已经拥有的规则之后）：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([0-9]+)$ index.php?page=$1 [L] 
```