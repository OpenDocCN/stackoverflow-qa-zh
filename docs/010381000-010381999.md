# StackOverflow 问答 10381000-10381999

# mysql - MySQL 比较 VARCHAR 列

> ID：10381003
> 
> 赞同：1
> 
> 时间：2012-04-30T09:04:09.267
> 
> 标签：mysql, casting, varchar

我有一个名为`D1_VAL`

此列中的行具有如下所示的数据：

```
C:10
R:200
E:3
N:77 
```

我正在尝试使用逻辑运算符对这些值进行搜索。我试过这个：

```
SELECT * FROM d1 WHERE CAST(`D1_VAL` AS UNSIGNED) > 5 
```

它不返回任何行。我也试过：

```
SELECT * FROM d1 WHERE (0 + `D1_VAL`) > 5 
```

我将如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T09:11:08.593

这个查询会做，

```
SELECT * FROM d1 WHERE CAST(SUBSTRING(`D1_VAL`, 3) AS UNSIGNED) > 5 
```

但最好将值标准化`C:10`为两个单独的列。

```
create table d1(
    letter char(1),
    number int,
    // ... other columns
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T09:17:14.140

您要进行的比较是什么？

如果将数字（在冒号右侧）与 5 进行比较，请尝试以下操作：

```
CAST(SUBSTRING(`D1_VAL`, INSTR(`D1_VAL`, `:`)) AS UNSIGNED) > 5 
```

有关字符串函数的更多信息，请参见[此处](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html)。

Also, I would suggest having a think about the database design - i.e. would the contents of this column be better off being stored in two columns - e.g. a char and an integer? That would be more efficient - requiring less disk space and allowing faster queries. If you have lots of rows, doing various string functions, casting etc. could make your queries run quite slowly.

# java - 在 pom.xml 和 settings.xml 中覆盖 Maven 属性的顺序是什么？

> ID：10381005
> 
> 赞同：18
> 
> 时间：2012-04-30T09:04:18.353
> 
> 标签：java, maven

今天我观察到 maven 中定义的属性`settings.xml`覆盖了`pom.xml`.

因为这只是一个观察，我不确定这是否完全正确。`settings.xml`所以我正在寻找参考资料或一些文章，但我没有找到关于覆盖在和中定义的同名属性的行为的具体说明`pom.xml`。

也许有人可以提供参考部分的链接（我可能会忽略）或可靠的文章/博客？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-30T09:32:05.930

根据我认为的[文档](http://maven.apache.org/settings.html#Profiles)，很明显哪个优先于另一个（文档摘录）：

> 如果配置文件在设置中处于活动状态，则其值将覆盖 POM 或 profiles.xml 文件中任何等效的 ID 配置文件。

profile.xml 在 Maven 3 中不再存在，仅在 Maven 2.2.1 中受支持，但不应使用。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-12-23T11:31:04.630

我认为具有相同名称的属性在下一个序列中被覆盖（从最高到最低的上下文）：

*   全球的
*   配置文件描述符
*   每个项目
*   每个用户

[http://maven.apache.org/guides/introduction/introduction-to-profiles.html](http://maven.apache.org/guides/introduction/introduction-to-profiles.html)

因此，`pom.xml`属性（每个项目）被`settings.xml`（每个用户）具有相同名称的属性覆盖。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-24T13:11:36.043

刚刚在我的 maven 3.3.9 上测试过。

首先，如果我们谈论的是 settings.xml，属性总是在配置文件中定义。来自全局设置 XML 的属性具有最高优先级，并将覆盖 user`settings.xml`和特定的`pom.xml`，**除非**配置文件之间存在名称冲突。

如果是这种情况，那就是在全局、用户设置以及 pom.xml 中存在**具有相同 id 的配置文件，用户/本地 settings.xml 是老板。**即使 in 中的属性`pom.xml`不在配置文件中，`settings.xml`来自具有相同名称的活动配置文件的用户/本地属性也会击败它。顺便说一句， global`settings.xml`也会在没有配置文件的情况下击败 pom.xml 属性。

***附带说明：*** For`<repositories>`和`<mirrors>`逻辑略有不同：

*   用户/本地设置的优先级高于全局`<mirrors>`。
*   但是，对于`<repositories>`： pom - 最高，然后 - 本地，然后 - 全局。

# php - 将字段更新 1

> ID：10381007
> 
> 赞同：1
> 
> 时间：2012-04-30T09:04:22.573
> 
> 标签：php, mysql

提交此表单时，当希望将字段 completed_status 更新为 0 时，它保持为 0。查询 $submission 是用户表的更新。这是我一直在使用的代码：

```
$user_id = intval($_SESSION['user_id']);
if (isset($_POST['doPersonal'])) {

    if (empty($err)) {

        $Sex = mysql_real_escape_string($_POST['Sex']);
        $Second_Nationality = mysql_real_escape_string($_POST['Second_Nationality']);
        $Birth_Place = mysql_real_escape_string($_POST['Birth_Place']);
        $Birth_Country = mysql_real_escape_string($_POST['Birth_Country']);
        $children = mysql_real_escape_string($_POST['children']);

        $the_query =   "INSERT INTO personal (user_id, Sex, Second_Nationality, 
Birth_Place, Birth_Country, children)
VALUES ('$user_id', '$Sex', '$Second_Nationality','$Birth_Place', '$Birth_Country',
'$children')
ON DUPLICATE KEY UPDATE Sex=VALUES(Sex), Second_Nationality=VALUES(Second_Nationality),
Birth_Place=VALUES(Birth_Place) , children=VALUES(children)";

        // query is ok?
        if (mysql_query($the_query, $link) ){

            // redirect to user profile
            header('Location: myaccount.php?id=' . $user_id);

            $submission= "update users set completed_status=completed_status+1 where 
id='$_SESSION[user_id]'";
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T09:07:25.233

从上面的代码我们可以看出你是`redirecting`之前的页面`update query`所以请修改为，

```
if (mysql_query($the_query, $link) ){

           $submission= "update users set completed_status=completed_status+1 where 
id='$_SESSION[user_id]'";

           mysql_query($submission,$link);  // to execute the update query              

          // redirect to user profile
          header('Location: myaccount.php?id=' . $user_id);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T09:07:29.353

您还没有调用 mysql_query：

```
$submission= "update users set completed_status=completed_status+1 where 
id='$_SESSION[user_id]'";
mysql_query($submission, $link); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T09:07:42.153

我猜你忘了运行查询。

```
 if (mysql_query($the_query, $link)){

        $submission= "update users set completed_status=completed_status+1 where id='$_SESSION[user_id]'";
        mysql_query($submission, $link);

        // redirect to user profile
        header('Location: myaccount.php?id=' . $user_id);

    } 
```

请注意，[重定向不会影响任何事情](https://stackoverflow.com/a/2747803/468793)（即使其他人在这里告诉您）。因为一个习惯，我只是把它放在查询之后。重定向后的代码仍然会运行，只是在浏览器中看不到输出。如果要在重定向后停止执行，可以使用`exit`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T09:10:43.120

试试这个作为你的最后一个`if`块：

```
if (mysql_query($the_query, $link)) {
  $query = 'update users set completed_status=completed_status+1 where id = ' . $_SESSION[user_id];
  mysql_query($query, $link);

  // redirect to user profile
  header('Location: myaccount.php?id=' . $user_id);
} 
```

但是，您使用`$user_id`的和`$_SESSION['user_id']`. 这两个是不同的user_id吗？

# c# - 寻找一种用 mvvm 显示很多功能的好方法

> ID：10381011
> 
> 赞同：0
> 
> 时间：2012-04-30T09:04:52.747
> 
> 标签：c#, wpf, mvvm

我需要创建一个小型 GUI 应用程序来手动调用一些驱动程序命令。总共有大约 40 个命令，其中一些带有附加参数。

要求是，所有命令都应该在一个页面上。除此之外，没有任何要求，因为它只是一个测试环境，所以用户体验只是一个小问题。

当我开始以“常规”方式进行操作并为参数添加按钮和输入元素时，我最终会得到一个非常混乱的 UI。做类似的事情也感觉完全错误

```
<Button Command="{Binding DriverCommand} CommandParameter=1/> 
```

对于所有 40 个命令

所以我的问题是，什么是使许多具有不同参数的命令可用的好方法？我更喜欢 MVVM 方式，只是因为我想进一步学习这种模式。我的视图模型中有我的命令（作为枚举？）并且可以将其绑定到视图中的控件的实现将是理想的。然后我可以使用不同的驱动程序重用 UI（这是很有可能的）。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T09:55:24.233

您可以使用类似于以下内容的内容：

视图模型：

```
public class CommandDashboardViewModel
{
    public ObservableCollection<DriverCommandViewModel> DriverCommands { get; set; }
}

public class DriverCommandViewModel
{
    // all of these properties have to implement INPC
    public string CommandText { get; set; }
    public ICommand Command { get; set; }
    public object CommandParameter { get; set; }
} 
```

看法：

```
<!-- the DataContext of this view is instance of CommandDashboardViewModel -->
<ItemsControl ItemsSource="{Binding DriverCommands}">
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <Button Content={Binding CommandText} Command={Binding Command} CommandParameter={Binding CommandParameter}/> 
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl> 
```

我已经把它放在了我的脑海中，所以我对任何语法错误表示歉意。

# c# - 为什么我的 .net 应用程序占用 RAM？

> ID：10381014
> 
> 赞同：1
> 
> 时间：2012-04-30T09:05:03.660
> 
> 标签：c#, .net, garbage-collection

我添加了一些 .dispose() 和 .close() 调用，它们似乎帮助了一小部分，但一旦所有操作完成，我仍然看到应用程序使用 600MB 的 RAM。我错过了什么？

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    public void CreateCSVFile(DataTable dt, string strFilePath)
    {
        #region Export Grid to CSV
        // Create the CSV file to which grid data will be exported.
        StreamWriter sw = new StreamWriter(strFilePath, false);
        // First we will write the headers.
        //DataTable dt = m_dsProducts.Tables[0];
        int iColCount = dt.Columns.Count;
        for (int i = 0; i < iColCount; i++)
        {
            sw.Write(dt.Columns[i]);
            if (i < iColCount - 1)
            {
                sw.Write(",");
            }
        }
        sw.Write(sw.NewLine);
        // Now write all the rows.
        int current_row = 0;
        foreach (DataRow dr in dt.Rows)
        {
            current_row++;
            if (current_row % 1000 == 0)
            {
                lbl_progress.Text = current_row.ToString() + " of " + dt.Rows.Count.ToString();
                this.Refresh();
                Application.DoEvents();
            }
            for (int i = 0; i < iColCount; i++)
            {
                if (!Convert.IsDBNull(dr[i]))
                {
                    if (dr[i] is string)
                    {
                        sw.Write("\"" + dr[i].ToString().Replace(Environment.NewLine,", ").Replace("\"", "") + "\"");
                    }
                    else
                    {
                        sw.Write(dr[i].ToString());
                    };
                }
                if (i < iColCount - 1)
                {
                    sw.Write("|");
                }
            }
            sw.Write(sw.NewLine);
        }
        dt.Dispose();
        sw.Close();
        #endregion
    }

    private void button1_Click(object sender, EventArgs e)
    {
        button1.Enabled = false;
        string strConn = ConfigurationManager.AppSettings["sql_connection"].ToString();
        SqlConnection conn = new SqlConnection(strConn);
        for (int i = 1; i <= int.Parse(ConfigurationManager.AppSettings["query_count"].ToString()); i++)
        {
            try
            {
                SqlDataAdapter da = new SqlDataAdapter(System.Configuration.ConfigurationManager.AppSettings["sql" + i.ToString()].ToString(), conn);
                DataSet ds = new DataSet();
                da.Fill(ds);
                da.Dispose();
                DataTable dt = ds.Tables[0];
                ds.Dispose();
                textBox1.Text += "\r\n[" + DateTime.Now.ToString("HH:mm:ss") + "] Starting sql" + i.ToString();
                this.Refresh();
                Application.DoEvents();
                CreateCSVFile(dt, System.Configuration.ConfigurationManager.AppSettings["output_path"].ToString() + i.ToString() + ".csv");
                textBox1.Text += "\r\n[" + DateTime.Now.ToString("HH:mm:ss") + "] Finished sql" + i.ToString();
                dt.Dispose();
                this.Refresh();
                Application.DoEvents();
            }
            catch (Exception ex)
            {
                textBox1.Text += "\n" + ex.Message;
                //break;
            }
        }
        textBox1.Text += "\r\n[" + DateTime.Now.ToString("HH:mm:ss") + "] All done";
        button1.Enabled = true;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T09:35:47.053

采取以下措施将感知到的 600 MB 减少到测量的 0 字节：

*   您的所有`Dispose`和`Close`调用都属于`finally`异常安全的块；或者更好的是，了解`using`评论已经建议的声明。这种风格问题是许多致命内存泄漏的根源，但鉴于您的样本有多小，您的情况可能并非如此。
*   要测量分配和保留的内存，请`GC.GetTotalMemory(true)`在测量块之前和之后进行。不要将其留在生产代码中，除非您了解并愿意支付性能成本。
*   还处置数据库连接。（这在客户端内存消耗方面是微不足道的，但不这样做可能会产生各种副作用。连接本身就是一种可耗尽的资源，它们也会消耗数据库服务器上的内存，而陈旧的连接可能会阻塞一些数据库操作或混淆人类。 )
*   在同一过程中运行整个测量周期两次，忽略第一组结果。.NET 框架可能会在试运行期间为其自己的静态结构分配一些内存。仅当内存泄漏不断增长或具有潜在的无限大小时，才值得您注意。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T12:05:47.240

首先，我要说 Disposal 与垃圾收集无关 - 处理某些东西不会将其标记为 GC，也不会回收任何托管内存。它是一种机制，代码可以通过它确定性地释放资源，通常是外部的或非托管的。

从[MSDN](http://msdn.microsoft.com/en-us/library/ee787088.aspx#conditions_for_a_garbage_collection)中撤出：

> 当下列条件之一为真时，就会发生垃圾收集：
> 
> *   系统物理内存不足。
> *   托管堆上分配的对象使用的内存超过了可接受的阈值。这意味着
>     已超过托管堆上可接受的内存使用量的阈值。
>     随着流程的运行，此阈值会不断调整。
> *   GC.Collect 方法被调用。在几乎所有情况下，您都不必调用此方法，因为垃圾收集器会持续运行。此方法主要用于特殊情况和测试。

这些是 GC 运行的条件。

我相信您在当前使用的 RAM 和仅具有大型工作集的应用程序之间感到困惑（操作系统已为进程提供内存，不一定使用）。它可能在峰值时使用了 600Mb，并且因为没有其他东西需要更多空间，所以与您的进程关联的 RAM 将被单独留下。任务管理器不能很好地判断一个进程实际使用了多少 RAM，而不能很好地判断它已经被分配了多少 RAM。

您确实需要使用适当的内存分析器来查看在给定时间点有多少对象处于活动状态。

此外，任何实现`IDisposable`都可以在`using`语句中使用：

```
using (var connection = new SqlConnection(""))
{
    connection.Open();
} // Dispose is called here, even on exception or return within using. 
```

`using`语句只是在后台编译成`try/finally`块。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T09:47:27.640

它不做垃圾收集 - 因为它不需要？

看，600mb 在您的计算机上可能并不多，并且 GC 仅在需要空间（即其他应用程序要求它）或达到阈值时才会启动。

所以，除非这是一个问题，否则它可能只是一个错误的观察。

运行内存分析器以查看实际内存负载是什么（它将强制收集，然后查看发生了什么并允许您分析什么使用内存以及为什么使用内存）。

不要（！）手动运行 GC.Collect，除非在非常罕见的情况下（基本上：你因为这样做而被解雇，现在争论为什么我不应该解雇你）。我需要的内存不是这样的条件 - GC.Collect 有不好的副作用（混合世代统计）。

# asp.net-mvc - 在 IIS7 上安装 MVC 网站

> ID：10381016
> 
> 赞同：8
> 
> 时间：2012-04-30T09:05:14.493
> 
> 标签：asp.net-mvc, iis-7

我使用 VisualStudio 构建了一个 C#-MVC3 网站，效果很好。

我需要在另一台计算机上安装该网站以检查它。电脑有IIS7。

我尝试安装（我的第一次......我真的不知道 IIS），当我浏览网站（localhost/mySite）时，我可以看到所有目录（控制器、视图......）但我不能查看网站本身。

我**可以**看到一个特定的文件（如 localhost/mySite/Content/img.jpg），但我看不到带有控制器的站点（localhost/mySite 或 localhost/mySite/Home）

要做什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-30T09:13:33.173

首先，安装[ASP MVC](http://www.asp.net/mvc)，然后根据您的体系结构运行以下之一：

32 位 (x86) 视窗

```
%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_regiis.exe -ir 
```

64 位 (x64) 视窗

```
%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_regiis.exe -ir 
```

另请查看此线程以获取更多信息： [IIS 7.5 上的 ASP.NET MVC](https://stackoverflow.com/questions/2374957/asp-net-mvc-on-iis-7-5)

在这些步骤之后，您可能还需要重新创建您的应用程序/站点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-02-22T11:05:06.433

@mikus 答案的扩展（2017 年 2 月）

**我的本地计算机上的ASP.NET MVC 4.5**项目出现了上述确切问题，该项目显示 IIS 403 错误。

可能对其他人有用的修复：

1）。在命令提示符窗口中按照上面 mikus 的回答（我使用 x64 版本）。我收到了一条包含“不受支持”消息的回复，但包含一个有用的链接：

> ...此版本的操作系统不支持此选项。管理员应该使用“打开/关闭 Windows 功能”对话框、服务器管理器管理工具或 dism.exe 命令行工具来安装/卸载带有 IIS8 的 ASP.NET 4.5。有关详细信息，请参阅[http://go.microsoft.com/fwlink/?LinkID=216771](http://go.microsoft.com/fwlink/?LinkID=216771) ..."

2）。使用 Microsoft 帮助页面链接中给出的分步说明：http: [//go.microsoft.com/fwlink/](http://go.microsoft.com/fwlink/?LinkID=216771) ?LinkID=216771 。**我只需要执行第 7 步和第 8 步，我将在下面详细说明：**

```
- Open 'Turn Windows features on or off' [Windows key then type 'Turn Windows features on or off' and open]
- Scroll down the list and expand 'Internet Information Services'
- Within that expand 'World Wide Web Services'
- Within that expand 'Application Development Features'
- Make sure 'ASP.NET 4.6' (or 3.5 if you require that) is ticked - mine was not.
- Save and close. 
```

3）。您的 IIS 站点现在应该可以按预期工作了——对我来说确实如此。再次在浏览器中点击该站点进行测试。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T09:08:57.887

是否安装了 MVC3？这是将 MVC 站点发布到另一台 PC 时最常见的原因

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-14T12:17:53.947

如果您在 Global.asax.cs 中已经有 MVC 的默认设置，请将您的 App Pool Managed Pipeline Mode 更改为 Integrated

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute(
        "Default", // Route name
        "{controller}/{action}/{id}", // URL with parameters
        new { controller = "Home", action = "Index", id = UrlParameter.Optional });
} 
```

# java - JPopupMenuItem 获取触发 JPopupMenu 的组件

> ID：10381019
> 
> 赞同：2
> 
> 时间：2012-04-30T09:05:23.523
> 
> 标签：java, swing, right-click, jcomponent, jpopupmenu

我有一个 JRadioButton 并为其设置了一个 ComponentPopupMenu。

```
JRadioButton rdbtnTest = new JRadioButton();
rdbtnTest.setComponentPopupMenu(popupMenu); 
```

popupMenu 是一个`JPopupMenu`with one `JPopupMenuItem`。有`JPopupMenuItem`一个`MouseListener`, 以便在鼠标点击时打开一个网页。

```
JPopupMenu popupMenu = new JPopupMenu("GO");
PopupMenuListener popupMenuListener = new MyPopupMenuListener();
popupMenu.addPopupMenuListener(popupMenuListener);
MenuItem openMenuItem = new JMenuItem("Open Webpage");

openMenuItem.addMouseListener(new MouseListener() {
        @Override
        public void mousePressed(MouseEvent arg0) {
            Component comp = arg0.getComponent(); // will only return the JPopupMenuItem
            // Determine the right-clicked radio button and open webpage
        }
popupMenu.add(openMenuItem); 
```

我的问题是：如果我有另一个`JRadioButton rdbtnTest2`具有相同的 popupMenu，我能否确定两个单选按钮中的哪一个触发了 JPopupMenu？打开网页时，我需要根据右键单击哪个单选按钮传递一个特定的参数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T09:12:28.390

当您在 MouseListener 中显示弹出菜单时，只需获取事件源并将其存储在某处（调用菜单的单选按钮）。在您的代码中，只需检查弹出调用程序。

# sql-server-2008 - 使用 ms sql server 选择当前日期项

> ID：10381020
> 
> 赞同：1
> 
> 时间：2012-04-30T09:05:23.650
> 
> 标签：sql-server-2008, date

我卡在 sql 语句中。请在下面询问我

```
select 

 master_brand.BRAND_NAME as AcCompanyID, 
                                    lewre_product.SKU_CODE as AcStockID,
                                    lewre_product.SKU_CODE as BarCode,
                                    lewre_product.SKU_CODE as StockBarCode,
                                    lewre_product.SKU_CODE as StockDescription1,
                                    NULL as StockDescription2,
                                    lewre_project.PROJECT_NAME as AcStockBrandID,
                                    lewre_artice.ARTICLE_NUMBER as AcStockGroupID,
                                    icenter_acStockCategory.CATEGORY_CODE as AcStockCategoryID,
                                    icenter_acStockColor.AcStockColorID as AcStockColorID,
                                    lewre_product.SIZE as AcStockSizeID,
                                    'NA' as ISBN,
                                    master_product_type.UOM as AcStockUOMID,
                                    lewre_article_price.FINAL_COST as StockCost,
                                    lewre_article_price.PRICE as StockPrice1,
                                    0 as StockPrice2,
                                    0 as StockPrice3,
                                    0 as StockPrice4,
                                    0 as StockPrice5,
                                    lewre_artice.CREATE_DATE

 from [LEWRE.ARTICLE]as lewre_artice,
                                 [iCENTER.ACSTOCKCATEGORY]  as icenter_acStockCategory,
                                 [iCENTER.ACSTOCKCOLOR] as icenter_acStockColor,
                                 [LEWRE.PRODUCT] as lewre_product,
                                 [MASTER.BRAND] as master_brand,
                                 [LEWRE.PROJECT] as lewre_project,
                                 [MASTER.PRODUCT_TYPE] as master_product_type,
                                 [LEWRE.ARTICLE_PRICE] as lewre_article_price

   where
                                (icenter_acStockCategory.CATEGORY_ID = lewre_artice.PRODUCT_CATEGORY_ID
                             AND icenter_acStockCategory.PRODUCT_TYPE_ID = lewre_artice.PRODUCT_TYPE_ID)
                             AND lewre_product.ARTICLE_ID = lewre_artice.ARTICLE_ID
                             and lewre_product.COLOR_ID = icenter_acStockColor.COLOR_ID
                             and master_brand.BRAND_ID = lewre_artice.BRAND_ID
                             and lewre_artice.PROJECT_ID = lewre_project.PROJECT_ID
                             and master_product_type.PRODUCT_TYPE_ID = lewre_artice.PRODUCT_TYPE_ID
                             and lewre_artice.ARTICLE_ID = lewre_article_price.ARTICLE_ID
                             and lewre_artice.CREATE_DATE 

                             order by lewre_artice.CREATE_DATE 
```

这是我得到的结果

![在此处输入图像描述](../Images/b2098e467ad8262bd8d7ba1b40b00fd5.png)

我想选择 create_date 为当前日期的所有行。例如 (2012-04-30)' 。我怎样才能得到结果？请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T09:10:42.567

将此添加到您的 where 子句中。

```
 lewre_artice.CREATE_DATE >= cast(getdate() as date) and 
  lewre_artice.CREATE_DATE < cast(dateadd(day, 1, getdate()) as date) 
```

`getdate()`返回当前时间戳并`cast(getdate() as date)`删除时间部分。`dateadd(day, 1, ....)`增加一天。比较返回`CREATE_DATE`区间内的行。

# xcode - 从 Xcode 项目中删除本地 git 存储库？

> ID：10381028
> 
> 赞同：12
> 
> 时间：2012-04-30T09:05:47.160
> 
> 标签：xcode, git, xcode4.2, git-svn

我在创建 xcode 项目时选择了本地 git 存储库。但是当导入到 SVN 并提交时，它在本地而不是在 SVN 中提交。我该如何解决这个问题？我想从 Xcode 项目中删除所有隐藏的本地 git 文件而不影响源代码？请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-16T11:44:50.017

打开终端并输入

```
defaults write com.apple.finder AppleShowAllFiles TRUE
killall Finder 
```

在finder中打开项目 **删除**.git

很好走。享受

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T09:08:55.430

您可以在这个问题中找到解决方案： [如何完全删除使用 init 创建的 git 存储库？](https://stackoverflow.com/questions/1213430/how-to-fully-delete-a-git-repository-created-with-init)

在询问 SO 之前，您真的应该先尝试 google。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T09:09:10.713

本地 git 存储库存储在`.git`项目文件夹内命名的文件夹中。它是隐藏的（任何以 a 开头的文件/文件夹`.`），但您可以使用终端删除或移动它。一旦它消失，您的文件夹将不再被识别为具有 git 存储库。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-11-03T22:49:40.147

打开项目所在的文件夹，按住 Cmd、Shift、. （句号），您将看到一个名为“.git”的文件夹。删除那个文件夹，你就很好了。按住 Cmd、Shift、. 再次隐藏隐藏文件。（时期）

# google-maps - Gmaps4jsf 标记集群

> ID：10381030
> 
> 赞同：1
> 
> 时间：2012-04-30T09:05:50.920
> 
> 标签：google-maps, jsf-1.2

我正在研究谷歌地图项目。我想使用标记集群标签显示许多标记。但我不知道如何使用 java 代码提供 lat 和 long 来标记集群标签。请任何人在 java 中有这样的代码然后让我知道。

我正在使用的技术是

*   JSF

*   gmaps4jsf

*   爪哇

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T16:12:33.743

查看 GMaps4JSF 的示例：http: [//www.mashups4jsf.com/gmaps4jsf-examples/home.jsf](http://www.mashups4jsf.com/gmaps4jsf-examples/home.jsf)

如您所见，markerCluster 组件：

```
<pre>
<m:markerCluster>
    <m:marker address="Moncloa, Madrid" />
    <m:marker address="Paris, France" />
    <m:marker address="Cairo, Egypt" />
</m:markerCluster>
</pre> 
```

标记组件可以将纬度和经度作为属性而不是地址属性，如下所示： [http](http://code.google.com/p/gmaps4jsf/wiki/markerComponent)
://code.google.com/p/gmaps4jsf/wiki/markerComponent Hazem Saleh
GMaps4JSF Founder

# java - 速度中的 ResourceNotFoundException

> ID：10381034
> 
> 赞同：0
> 
> 时间：2012-04-30T09:06:16.407
> 
> 标签：java, velocity

当我使用 File.exists 检查时它是“真的”，但是当我使用 Template t = ve.getTemplate(pathContent); 我收到 ResourceNotFoundException 错误。为什么会这样，

我的 EmailSender 类：

```
public class EmailSender {
    public static boolean send(String to, String newUsername, String newPassword, String contentPath) {
        try{
            .......................
            VelocityEngine ve = new VelocityEngine();
            ve.init();
            VelocityContext context = new VelocityContext();
            context.put("username", newUsername);
            context.put("password", newPassword);

            Template t = ve.getTemplate(contentPath);
            StringWriter writer = new StringWriter();
            t.merge( context, writer );
            System.out.println(writer.toString());
            return true;

        } catch (Exception e) {
            e.printStackTrace();
            return false;
        }
    }
} 
```

我尝试在我的服务类中传递真实路径

```
public class UserServiceImpl {
    public ResultDto sendNotifEmail(Users user) {
        try{
            String emailFormatPath = context.getRealPath("emailFormat");
            if(!EmailSender.send(user.getEmail(), user.getUsername(), password, emailFormatPath+"\\emailFormat.vm")){

            }           

        } catch (Exception e) {
            e.printStackTrace();
            return false;
        }
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T05:33:49.893

我通过在我的spring xml（applicationContext.xml）中注入类velocityEngine来解决它

```
<bean id="velocityEngine" class="org.springframework.ui.velocity.VelocityEngineFactoryBean">
    <property name="velocityProperties">
        <props>
            <prop key="resource.loader">class</prop>
            <prop key="class.resource.loader.class">
                org.apache.velocity.runtime.resource.loader.ClasspathResourceLoader
            </prop>
        </props>
    </property>
</bean>

<bean id="emailSender" class="com.satunol.pms.helper.EmailSender">
    <property name="velocityEngine"><ref bean="velocityEngine"/></property>
</bean> 
```

在我的 EmailSender 类中

```
private VelocityEngine velocityEngine;
public void setVelocityEngine(VelocityEngine velocityEngine) {
    this.velocityEngine = velocityEngine;
}
......................
Template t = velocityEngine.getTemplate("emailFormat.vm");
StringWriter writer = new StringWriter();
System.out.println(writer.toString()); 
```

将我的 emailFormat 放入资源文件夹（WEB-INF/classes）

谢谢闪

# xcode - xcode中的联系人数据

> ID：10381039
> 
> 赞同：-1
> 
> 时间：2012-04-30T09:06:46.063
> 
> 标签：xcode, contacts, abaddressbook, abrecordref

大家..我正在尝试为iPhone开发一个应用程序，它基本上处理`ABAddressBook`和联系人数据......我的目标是通过电子邮件将所有联系人数据（第一步，姓名和电话）发送到一个文件中......

现在，我正在尝试访问联系人数据，并且我想将它们添加到两个不同的数组中，名称和电话数组..

起初，当我按下“列出联系人”按钮时，我试图查看屏幕中的所有数据。数据应显示在屏幕上。然后当我按下第二个按钮“发送联系人”时，它应该将文件发送到电子邮件帐户。这就是我的应用程序的工作方式。

我在屏幕上显示数据时遇到问题。我写了一些东西，但在 textView 的屏幕上没有给出任何内容。你能帮我解决这个问题吗？

这是列出联系人的代码（listCon 方法）：

* * *

```
-(IBAction)listCon:(id)sender
{

    NSMutableArray *names = [[NSMutableArray alloc] init];

    NSMutableArray *numbers1= [[NSMutableArray array] init];

    NSMutableArray *numbers2= [[NSMutableArray array] init];

    NSMutableArray *numbers3= [[NSMutableArray array] init];

    ABAddressBookRef addressBook = ABAddressBookCreate();

    if (addressBook != nil)
    {

        NSLog(@"Successfully accessed the address book.");

        CFArrayRef allPeople = ABAddressBookCopyArrayOfAllPeople(addressBook);
        CFIndex nPeople= ABAddressBookGetPersonCount(addressBook);

        NSUInteger peopleCounter = 0;
        for (peopleCounter = 0;peopleCounter < nPeople; peopleCounter++)
        {

            ABRecordRef thisPerson = CFArrayGetValueAtIndex(allPeople,peopleCounter);

            NSString *contactFirstLast = [NSString stringWithFormat:@"%,%",ABRecordCopyValue(thisPerson, kABPersonFirstNameProperty), ABRecordCopyValue(thisPerson,kABPersonLastNameProperty)];

            [names insertObject:contactFirstLast atIndex:peopleCounter];

            ABMultiValueRef phoneNumbers = ABRecordCopyValue(thisPerson,kABPersonPhoneProperty);

            NSString *firstPhone = (__bridge_transfer NSString*) ABMultiValueCopyValueAtIndex(phoneNumbers, 0);

            NSString *secondPhone = (__bridge_transfer NSString*) ABMultiValueCopyValueAtIndex(phoneNumbers, 1);

            NSString *thirdPhone = (__bridge_transfer NSString*) ABMultiValueCopyValueAtIndex(phoneNumbers, 2);

            [numbers1 insertObject:firstPhone atIndex:peopleCounter];
            [numbers2 insertObject:secondPhone atIndex:peopleCounter];                             
            [numbers3 insertObject:thirdPhone atIndex:peopleCounter];
    }          
}

myView.text=[names componentsJoinedByString:@"\n\n"];     

myView.text=[numbers1 componentsJoinedByString:@"\n\n"];    

myView.text=[numbers2 componentsJoinedByString:@"\n\n"];

myView.text=[numbers3 componentsJoinedByString:@"\n\n"];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T20:18:20.437

只是看一眼你的代码，你不能这样做：

```
NSString *contactFirstLast = [NSString stringWithFormat:@"%,%",ABRecordCopyValue(thisPerson, kABPersonFirstNameProperty), ABRecordCopyValue(thisPerson,kABPersonLastNameProperty)]; 
```

有几个错误：首先`%`在你`stringWithFormat:`的不是格式说明符；你可能在想`%@`。其次，复制 的值`kABPersonFirstNameProperty`将返回 a `CFStringRef`，这不是您想要在文本字段中显示名称的内容。您必须免费桥接`ABRecordCopyValue()`. 您可以通过在您的 's`(__bridge_transfer NSString *)`前面添加这一行来做到这一点 - - `ABRecordCopyValue()`进行所有更正后，它应该如下所示：

```
NSString *contactFirstLast = [NSString stringWithFormat:@"%@,%@", (__bridge_transfer NSString *)ABRecordCopyValue(thisPerson, kABPersonFirstNameProperty), (__bridge_transfer NSString *)ABRecordCopyValue(thisPerson,kABPersonLastNameProperty)]; 
```

希望有帮助（可能无法涵盖所有​​错误）！

# c - 如何使用 valgrind 在 c 中查看函数的堆和堆栈使用情况？

> ID：10381041
> 
> 赞同：7
> 
> 时间：2012-04-30T09:06:50.420
> 
> 标签：c, embedded, arm, valgrind, memcheck

我正在研究嵌入式系统。我们的嵌入式系统中的堆栈和堆通常是 64k (ram)。我正在尝试使用 polar-ssl 库调用。是否有任何工具可以告诉 C 函数使用了多少堆栈和堆内存？

valgrind 中是否有任何选项可以打印以下内容：

1.  函数的堆栈和堆使用。
2.  调用内部 malloc 且无字节的函数的调用跟踪。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T09:33:55.477

There is a valgrind tool massif that measures how much heap memory an application uses. Similarly memcheck can give you stack trace. More explanation here

[http://wiki.eclipse.org/Linux_Tools_Project/Valgrind/User_Guide#Analyzing_Memcheck_Profile_Results](http://wiki.eclipse.org/Linux_Tools_Project/Valgrind/User_Guide#Analyzing_Memcheck_Profile_Results)

# android - 未收到 C2DM 消息

> ID：10381048
> 
> 赞同：0
> 
> 时间：2012-04-30T09:07:24.457
> 
> 标签：android, android-c2dm

为什么 C2DM 推送通知消息有时虽然状态为成功，但设备却收不到？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T13:43:43.030

如果服务器返回 200 成功消息，那么过期密钥是不可能的。

事实是，C2DM 并不总是可靠地发送您的消息（它可能会延迟发送，如果您发送多个，则订单将被更改，或者它可能根本不会到达另一边）。

我有一个类似的问题，在我发送消息的第一天，我收到了 200 状态码，但设备上没有消息。我得到的答案与我给您的答案相同。

此外，请始终确保您何时需要连接互联网。

# c# - 为 MySQL 中的所有列创建索引

> ID：10381053
> 
> 赞同：1
> 
> 时间：2012-04-30T09:07:35.650
> 
> 标签：c#, mysql, sql, indexing

我正在用 C# 开发一个使用用户输入的查询动态创建表的应用程序。我为此使用的语法是：

```
CREATE TABLE <table name> (<user query>) 
```

有没有一种方法可以在不指定确切列名的情况下向包含所有列的表添加索引。这样的事情会很棒，但这不起作用：

```
CREATE INDEX <index name> ON <table name> (*) 
```

或者，有没有一种方法可以查询数据库中的列。如果我有这些信息，那么我可以使用确切的列名来构建查询，以便在创建表后添加索引。

任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T09:11:15.190

你可以使用

```
SHOW [FULL] COLUMNS FROM <table name> 
```

获取列

# mysql - 从 ASP.Net MVC 连接到 MySQL 数据库

> ID：10381060
> 
> 赞同：5
> 
> 时间：2012-04-30T09:08:01.153
> 
> 标签：mysql, asp.net-mvc

我退出了 ASP.Net MVC 世界的新手。但我找不到任何关于如何从 ASP.Net MVC 网站连接到 MySQL 数据库服务器的示例。有谁能帮忙吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T09:14:31.490

### 描述

首先，您需要下载`MySQLConnector`. 然后您可以使用实体框架或 SqlCommand 连接到您的数据库。

### 更多信息

*   [.NET 的 MySQL 连接器](http://www.mysql.com/downloads/connector/net)
*   [MySQL 实体框架教程](http://www.devart.com/dotconnect/mysql/articles/tutorial_ef.html)

# javascript - 如何在 ajax 定期更新中添加切换

> ID：10381062
> 
> 赞同：0
> 
> 时间：2012-04-30T09:08:08.310
> 
> 标签：javascript, ajax, toggle

我在 JSP 中有一个动态页面，它从服务器中提取数据/事件。而且我已经使用 Ajax 在一定的时间间隔内定期更新页面。现在我想放一个切换（播放/暂停）按钮，这样我就可以暂停页面的自动更新并再次播放。以下是我的页面-

输出页面：

```
<html>  
<head>  
<title>EventMonitoring</title>  
<script type="text/javascript">  
var page = "realTime.jsp";  
function ajax(url,target)  
{  
    // native XMLHttpRequest object  
   document.getElementById(target).innerHTML = 'sending...';  
   if (window.XMLHttpRequest) 
   {  
       req = new XMLHttpRequest();  
       req.onreadystatechange = function() {ajaxDone(target);};  
       req.open("GET", url, true);  
       req.send(null);  
   // IE/Windows ActiveX version  
   } 
   else if (window.ActiveXObject) 
   {  
       req = new ActiveXObject("Microsoft.XMLHTTP");  
       if (req) 
       {  
           req.onreadystatechange = function() {ajaxDone(target);};  
           req.open("GET", url, true);  
           req.send();  
       }  
   }  
   setTimeout("ajax(page,'scriptoutput')", 60000);  
}  

function ajaxDone(target) 
{  
    // only if req is "loaded"  
    if (req.readyState == 4) 
    {  
    // only if "OK"  
    if (req.status == 200 || req.status == 304) 
    {  
        results = req.responseText;  
        document.getElementById(target).innerHTML = results;  
    } 
    else 
    {  
        document.getElementById(target).innerHTML="ajax error:\n" +  
        req.statusText;  
    }  
    }  
}  
</script>  

</head>  
<body onLoad="ajax(page,'scriptoutput')">  
<span id="scriptoutput"></span></p>  
</body>  
</html> 
```

1.  动态页面（从服务器拉取数据）

    ```
     <%@page contentType="text/html; charset=iso-8859-1" language="java"      import="java.sql.*,java.util.*,java.io.*,javax.servlet.jsp.JspException" errorPage="" %>  
     <%@ page import="event.activeMq.*"%>  
     <jsp:include page="../include/adminSessionManager.jsp" />  
     <jsp:useBean id="msg" scope="request" class="event.activeMq.ConsumerTool">  
     <jsp:setProperty name="msg" property="*" />  
     </jsp:useBean>  
     <%  
     MessageBean msgs = msg.getMessages();  
     java.util.Iterator dateList = msgs.getDateTime().iterator();  
     java.util.Iterator atmList = msgs.getAtmId().iterator();  
     java.util.Iterator eventTextList = msgs.getEventText().iterator();  
     java.util.Iterator evtNumList = msgs.getEventNumber().iterator();  
     java.util.Iterator sevList = msgs.getSeverity().iterator();  
     java.util.Iterator genList = msgs.getGenerator().iterator();  
     java.util.Iterator genBldList = msgs.getGeneratorBuildVsn().iterator();  
     java.util.Iterator ssidList = msgs.getSubsystemID().iterator();  
     java.util.Iterator taskList = msgs.getTaskID().iterator();  
     java.util.Iterator uniqueList = msgs.getUniqueEventID().iterator();  
     %>  

    <html>  
    <head>  
    <title>Event Monitoring</title>  
    <link href="../css/style.css" rel="stylesheet" type="text/css">  
    <script language="JavaScript" type="text/JavaScript">  

    </script>  

    <script language="javascript">  
       /*gives the branchname and branchcode for bank selected*/  
    </script>  

     </head>  
     <body topmargin="0" leftmargin="0" marginheight="0" marginwidth="0" onLoad="document.forms[0].name.focus();">   
     <jsp:include page="../include/header.jsp"/>  

      <table width="100%" height="450"  border="0" cellpadding="0" cellspacing="0">  
        <tr>  
        <td width="220" align="left" valign="top" bgcolor="#f2f2f2">  
        <jsp:include page="../include/menuManager.jsp" />  
        </td>  
          <td height="100%" valign="top" bgcolor="#FFFFFF"><table width="100%"  border="0" cellspacing="0" cellpadding="8">  
              <tr>  
                <td bgcolor="#FFFFFF"><table width="100%"  border="0" cellspacing="0" cellpadding="0">  
                  <tr>  
                    <td><table width="100%" border="0" cellspacing="0" cellpadding="0">  
                      <tr>  
                        <td>&nbsp;</td>  
                      </tr>  
                      <tr>  
                        <td height="1" bgcolor="#999999"></td>  
                      </tr>  
                    </table></td>  
                  </tr>  
                  <tr>  
                    <td height="2"></td>  
                  </tr>  
                </table>  
                <table width="100%"  border="0" cellspacing="0" cellpadding="0">  
                    <tr>  
                      <td><table width="100%"  border="0" cellspacing="0" cellpadding="0">  
                        <tr>  
                          <td width="183" height="19" bgcolor="#373948" class="titlelink"> &nbsp;<span class="title">&nbsp;RealTime Events </span></td>  
                          <td width="148" bgcolor="" class="titlelink"> <font color="#FF0000">&nbsp; </font> </td>  
                          <td width="439" bgcolor="" class="titlelink"><font color="#FF0000">  
                            <%//if(msg != null){  
                            //out.print(msg);  
                            //}%>  
                          </font></td>  
                        </tr>  
                      </table></td>  
                    </tr>  
                    <tr>  
                      <td>  

                      <table width="100%" border="0" align="center" cellpadding="2" cellspacing="1" bgcolor="#373948">  
                          <tr align="center" bgcolor="#FAFAFA">  
                            <td width="14%">  
                             <form name="f1"action="doAddUser.jsp" method="post">  

                          <table width="100%"  border="0" cellpadding="2" cellspacing="0" bgcolor="#ECE9D8">  
                            <%while(dateList.hasNext() || atmList.hasNext() || eventTextList.hasNext() || evtNumList.hasNext() || sevList.hasNext() || genList.hasNext() || genBldList.hasNext() || ssidList.hasNext() || taskList.hasNext() || uniqueList.hasNext()){  
                      String dateTime=(String)dateList.next();  
                      String atmId=(String)atmList.next();  
                      String eventText=(String)eventTextList.next();  
                      String eventNumber=(String)evtNumList.next();  
                      String severity=(String)sevList.next();  
                      String generator=(String)genList.next();  
                      String generatorBuildVsn=(String)genBldList.next();  
                      String subsystemID=(String)ssidList.next();  
                      String taskID=(String)taskList.next();  
                      String uniqueEventID=(String)uniqueList.next();  
                             %>                        
     <tr>   
        <td width="45%"><strong> SubsystemId </strong></td>  
        <td width="55%">  <%=subsystemID%></td>  
     </tr>  
     <tr>  
          <td><strong>Severity</strong></td>  
                                    <td><%=severity%></td>  
                                    </tr>  
                                    <tr>  
                                    <td><strong>TaskID</strong></td>  
                                    <td><%=taskID%>  </td>  
                                    </tr>  
                                    <tr>  
                                    <td><strong>UniqueEventID</strong></td>  
                                    <td><%=uniqueEventID%></td>  
                                    </tr>  
                                    <tr>  
                                    <td><strong>Event Text</strong></td>  
                                    <td><%=eventText%></td>  
                                    </tr>  
                                    <tr>  
                                    <td><strong>Event Number</strong></td>  
                                    <td><%=eventNumber%></td>  
                                    </tr>  
                                    <tr>  
                                    <td><strong>Date Time</strong></td>  
                                    <td><%=dateTime%>  </td>
                                    </tr>  
                                    <tr>  
                                    <td><strong>Generator</strong></td>  
                                    <td><%=generator%></td>  
                                    </tr>  
                                    <tr>  
                                    <td><strong>Generator Build VSN</strong></td>  
                                    <td><%=generatorBuildVsn%></td>  
                                    </tr>  
                                    <tr>  
                                    <td><strong>Atm ID</strong></td>  
                                               <td><%=atmId%></td>  
                                    </tr>  
                                    <tr>  
                                    <td><hr></td>  
                                    <td><hr></td>  
                                    </tr>  

        <%}%>                                 
                          </table>  
                         </form>  
                            </td>  
                          </tr>  
                      </table></td>  
                    </tr>  
                </table></td>  
              </tr>  
          </table></td>  
        </tr>  
      </table></td>         
      </tr>  
      <tr>  
      <td valign="top" bgcolor="#FFFFFF">  
      <jsp:include page="../include/footer.html" />  
      </td>  
      </tr>  
      </table>  
      </body>  
      </html> 
    ```

有人可以帮我添加播放/暂停按钮吗？非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T09:45:40.843

您想使用[setInterval](https://developer.mozilla.org/en/window.setInterval)而不是 setTimeout。[这是](http://jsfiddle.net/cmK6a/1/)一个例子：

```
<div id="mydivtag">
    <button id="start">start</button>
    <button id="stop">stop</button>
</div> 
```

JavaScript：

```
var intervalId;

var sayHello = function() {
    document.getElementById('start').disabled = true;
    document.getElementById('stop').disabled = false;
    intervalId = setInterval(function() { 
        var node = document.createTextNode("hello!");        
        document.getElementById('mydivtag').appendChild(node);
    }, 1000);
}

window.onload = sayHello;

document.getElementById('start').onclick = sayHello;    

document.getElementById('stop').onclick = function() {
    document.getElementById('start').disabled = false;
    document.getElementById('stop').disabled = true;   
    clearInterval(intervalId);
} 
```

​​</p>

# email - 邮件服务器重定向到另一台服务器

> ID：10381064
> 
> 赞同：1
> 
> 时间：2012-04-30T09:08:22.760
> 
> 标签：email

我有一个站点，其中有一个安装了“Parallels Plesk Panel”的服务器。我想从该站点向 info@domain.com 电子邮件发送一封“联系我们”的电子邮件。

问题是这封电子邮件已经由使用谷歌邮件系统的程序员之一创建（显然你可以使用不同于 gmail.com 的域名创建帐户）。

所以现在，服务器拒绝了我的消息，告诉我它找不到具有此名称的电子邮件。当我发送到任何其他域时它工作正常，但是当发送到同一个域时，它会失败。我创建了另一个电子邮件 info2@domain.com 并在那里发送了电子邮件，它可以工作。

我现在的问题是，如何将电子邮件发送到已经在 gmail 中创建的现有 info@domain.com 而不会让服务器阻止我。我在此面板上看到的选项之一是将对该电子邮件的请求重定向到另一个邮件系统（并指定其 IP）。如果我想把gmails IP放在那里，也许会有所帮助？

谢谢。

**编辑**：

使用我的联系我们表格，我正在向 info@domain.com 发送电子邮件。我收到 SMTP 错误 550，找不到邮箱。当发送到除@domain.com 之外的任何东西时，它都可以工作。将该电子邮件添加到我的服务器时，也可以。

现在，之前的程序员已经创建了 info@domain.com，但不是使用我们的 plesk 面板，而是使用 gmail 服务器。显然，使用 gmail，您可以创建 info@domain.com 类型的电子邮件，而不仅仅是 info@gmail.com。明显的问题是我尝试发送到这封电子邮件。它看到服务器是 domain.com 并尝试在那里找到它（与我发送消息的站点相同的域）。它失败并给了我 550 错误。

我希望服务器将带有该消息的电子邮件发送到实际上在 gmail 上的 info@domain.com。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T11:50:12.063

如果我理解正确，您的问题是两台服务器认为它们托管邮件域：您的 plesk 服务器和 gmail。

解决方案：在 plesk 服务器上禁用该域的本地邮件传递，并确保 plesk 可以正确解析该域的 mx 记录，`dig mx +short domain.com`在 plesk 服务器上运行应该返回 google 拥有的主机名，而不是本地主机名。

我没有 plesk 服务器，所以我不知道如何确切地禁用邮件域，但快速谷歌搜索返回：[http ://www.serveridol.com/2011/03/16/disabling-email -在 plesk 中为域服务/](http://www.serveridol.com/2011/03/16/disabling-email-service-for-a-domain-in-plesk/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T23:15:52.220

[http://search.yahoo.com/search?p=email+form+service&ei=UTF-8&fr=chr-greentree_ff&type=827316](http://search.yahoo.com/search?p=email+form+service&ei=UTF-8&fr=chr-greentree_ff&type=827316)

尝试远程电子邮件表单服务。大多数托管公司的邮件服务器都是本地的。为此，您必须制作自己的 .htaccess 文件，其中包含 php.ini 邮件服务器设置。我认为这是正确的。您可以自己安装 php 以查看这些设置是什么。这是您可能必须通过网络托管控制面板执行的操作。

顺便说一下，除非您将服务器配置为将 XHTML 作为 XHTML 提供，否则 XHTML 将作为 HTML 提供。因此，除非您知道如何操作，否则请尽可能使用 HTML。就是这样。

[http://jesusnjim.com/web-design/setup-test-server.html](http://jesusnjim.com/web-design/setup-test-server.html)

# javascript - 使用 jsfiddle：我如何使用 underscore.js 或backbone.js 库？

> ID：10381066
> 
> 赞同：8
> 
> 时间：2012-04-30T09:08:50.857
> 
> 标签：javascript, backbone.js, underscore.js, jsfiddle

例如`jsfiddle`，可以使用 jQuery。
但我看不到任何引用，例如下划线或主干.js。

如果我运行这个[演示](http://jsfiddle.net/J6Pq5/)，我会收到错误：

```
Uncaught ReferenceError: _ is not defined 
```

如何在 jsfiddle 中使用 underscore.js 或bone.js 库？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-30T09:10:26.207

在左侧的“添加资源”按钮下添加所需库的 URL。

见[http://jsfiddle.net/alnitak/BwHxv/](http://jsfiddle.net/alnitak/BwHxv/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T11:16:20.390

我使用的是自制的 jsfiddle 基础，其日志包含在 HTML 中，因此您不必打开开发人员工具：

包括主干和下划线

[http://jsfiddle.net/dinchev/NL2z9/2/](http://jsfiddle.net/drinchev/NL2z9/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T09:13:14.087

我通常从这个开始：http: [//jsfiddle.net/dandiebolt/auHFG/](http://jsfiddle.net/dandiebolt/auHFG/)

这是搜索“jsfiddle underscore”时的第一个结果。

# gcc - libpam 链接问题 ubuntu 12.04

> ID：10381072
> 
> 赞同：2
> 
> 时间：2012-04-30T09:09:13.533
> 
> 标签：gcc, ubuntu, pam

我已经安装了 libpam0g-dev libpam0g

但是当我链接到 libpam 时，我收到错误 undefined reference to `pam_start' 并且我的链接器标志包括 -lpam。

相同的代码在 Ubuntu 11 中运行。

链接标志

```
-Wl,--start-group  -lssl -lpam -lcrypto  -lnspr4 -licui18n -licuuc -licudata -lcurl -lcares -lpthread -lpcrecpp -loauth -ldl -lrt -lz  -Wl,--end-group 
```

不工作

但这有效

```
-Wl,--start-group  -lssl -lpam -lcrypto  -lnspr4 -licui18n -licuuc -licudata -lcurl -lcares -lpthread -lpcrecpp -loauth -ldl -lrt -lz -lpam -Wl,--end-group 
```

# c# - 接口组织 Visual Studio 项目的最佳实践是什么？

> ID：10381078
> 
> 赞同：2
> 
> 时间：2012-04-30T09:09:39.283
> 
> 标签：c#, .net, vb.net, visual-studio

所有接口的单个​​文件还是每个接口定义一个文件？

Balena 和 Dimauro 的“实用指南”一书提倡使用一个名为 Interfaces.vb/cs 的文件来保存所有接口定义。他们的目标是尽量减少小文件的扩散，每个小文件都有一个接口定义。

我可以看到这两种方法的好处。有没有人有强烈支持一种方法的强烈观点或经验？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T09:16:13.270

好吧，您自己也说过-每种方法都有其优点和缺点。但是，为了更容易做出决定，我会这样说：

如果您只开发一个小型应用程序（假设最多 10 个接口），您可以根据需要使用单个文件并对此感到满意。

但是，如果您开发需要随时间扩展的大型应用程序，请使用多个文件。以这种方式维护当然更容易。

好吧，至少这是我的看法。:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T09:19:01.147

我想说，如果您的解决方案在源代码管理中，最好将它们放在单独的文件中。如果您在源代码管理中禁用了多个签出，则只有一名开发人员可以处理一个文件/接口。您还可以比较每个界面签入的内容，而不是查看文件的差异。
如果您有一个仅在一个类中实现的接口，那么我宁愿将它们都放在同一个文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-20T23:05:51.607

在 Visual Studio 中，您可以拥有一个包含多个类或接口的文件。在解决方案资源管理器中，文件将像树视图一样展开，以公开文件中的所有类/接口。

我的偏好是将所有接口都放在一个文件中的同一命名空间下。换句话说，按名称空间将它们分组到一个文件中。

# iphone - 当 Gesture 应用于 self.view 时，我们如何才能使表格视图工作？

> ID：10381081
> 
> 赞同：3
> 
> 时间：2012-04-30T09:09:53.300
> 
> 标签：iphone, objective-c, ios, uigesturerecognizer

我已经在整个视图上应用了手势，我想与 self.view 中的表格视图进行交互。我已经应用了自定义手势。如下所示：

```
 #import "TouchEvent.h"
#import <UIKit/UIGestureRecognizerSubclass.h>

@implementation TouchEvent
@synthesize xInc=_inc;
@synthesize prev=_prev;
@synthesize diff=_diff;

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
 [self setState:UIGestureRecognizerStateBegan];
}

-(void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event
{
 [self setState:UIGestureRecognizerStateCancelled];
}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
 UITouch *touch = [touches anyObject];

 // A tap can have slight movement, but we're not interested
 // in a tap. We want more movement. So if a tap is detected
 // fail the recognizer. 

 if ([self state] == UIGestureRecognizerStatePossible) {
  [self setState:UIGestureRecognizerStateBegan];
 } else {
  [self setState:UIGestureRecognizerStateChanged];
 }

 UIView *view = [self view];
 CGPoint touchpoint = [touch locationInView:view];
 CGPoint prevPoint=[touch previousLocationInView:view];

 if (prevPoint.x<touchpoint.x) 
  [self setDiff:(touchpoint.x-prevPoint.x)];
 else
  [self setDiff:(prevPoint.x-touchpoint.x)];

 NSLog(@"difference is: %f",self.diff);
 NSLog(@"x is: %f",touchpoint.x);
 [self setXInc:touchpoint.x];
 [self setPrev:prevPoint.x];

}

-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
 [self setState:UIGestureRecognizerStateEnded];

}
@end 
```

> 我正在申请这样

```
- (void)viewDidLoad
{
 NSArray *ary=[NSArray arrayWithObjects:@"Friends",@"Message",@"Chats",@"New Feeds",@"Photos",@"Notes", nil];
 array=ary;

 gestur=[[TouchEvent alloc] initWithTarget:self action:@selector(SLideTheView:)];

 [self.view addGestureRecognizer:gestur];

    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

-(void)moveIt:(CGFloat)x_pos
{
 [UIView beginAnimations:nil context:NULL];
 [UIView setAnimationDuration:0.5];
 [UIView setAnimationDelegate:self];

 [viewU setFrame:CGRectMake(x_pos, 0, 320, 460)];

 [UIView commitAnimations];

}

-(void)SLideTheView:(TouchEvent*)gesture
{

 CGPoint pt=[gesture locationInView:viewU];

      if (pt.x>13&&pt.y>5&&pt.x<29&&pt.y<23) 
      {
       [self slideView];
      }
      else
      {
         if (gesture.state==UIGestureRecognizerStateEnded) 
         {
          if (viewU.frame.origin.x!=0) {
           if (gesture.prev<gesture.xInc) 
           {
            [self moveIt:270];
           }
           else
            [self moveIt:0];
          }
         }
         else
         {
          if (viewU.frame.origin.x!=0) 
          {
           if (gesture.prev<gesture.xInc) 
            x=viewU.frame.origin.x+gesture.diff; 
           else
            x=viewU.frame.origin.x-gesture.diff;

           [viewU setFrame:CGRectMake(x, 0, 320, 460)];
          }
         }

      }

}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
 label.text=[array objectAtIndex:[indexPath row]];
 [self slideView];
} 
```

运行图像如下：

![在此处输入图像描述](../Images/976ba5cc130c168961a239759b9d06ab.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T09:17:00.570

您可以使用**`requireGestureRecognizerToFail:`**来识别同一视图上的两个或多个手势识别器，请参见[此处的示例代码](https://github.com/AalokParikh/pinch-and-uiguesture)

**编辑**

所以你可以参考**[这个](https://stackoverflow.com/questions/5222998/uigesturerecognizer-blocks-subview-for-handling-touch-events)**

要引用的方法是**`- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch`**

参考[这个问题](https://stackoverflow.com/questions/4885693/how-do-you-stop-uitapgesturerecognizer-from-catching-every-tap)了解更多

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T09:31:01.280

```
//add gesture to mapview-for single touch
UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(SLideTheView:)];
[self.view addGestureRecognizer:tap];
tap.numberOfTapsRequired = 1;

//add another gesture to terminate first one
UITapGestureRecognizer *secondGest= [[UITapGestureRecognizer alloc] init];
[tableview addGestureRecognizer:secondGest]; 
[tap requireGestureRecognizerToFail:secondGest];
[secondGest release];
[tap release]; 
```

# http - 使用 Nodejs HTTP 服务器的自定义 HTTP 方法

> ID：10381084
> 
> 赞同：18
> 
> 时间：2012-04-30T09:10:08.870
> 
> 标签：http, node.js, networking

目前正在通过 HTTP 编写同步机制，我开始在 NodeJS 上构建我的服务器，这看起来是一个不错的解决方案。

所以好吧，我可以让 GET 和 HEAD 方法工作。但是一旦我尝试使用非标准方法，例如“SYNC”。这是代码：

```
var http = require("http");
var server = http.createServer(function (req, res) {
    res.writeHead(200);
    res.end(req.method);
});
server.listen(8080); 
```

看起来不错...让我们远程登录，发出 GET 然后发出 SYNC 请求

```
mylaptop:~ aob$ telnet localhost 8080
Trying ::1...
telnet: connect to address ::1: Connection refused
Trying 127.0.0.1...
Connected to localhost.
Escape character is '^]'.
GET / HTTP/1.1

HTTP/1.1 200 OK
Connection: keep-alive
Transfer-Encoding: chunked

3
GET
0

SYNC / HTTP/1.1
Connection closed by foreign host. 
```

关于如何让 SYNC 工作的任何想法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-30T13:08:12.160

**编辑：** http 解析器已经更新和改变了很多。因此，添加自定义 HTTP 方法并不那么简单，但感谢@admix -这是节点 5.x 中[的相关入口点：](https://github.com/nodejs/node/blob/v5.x/deps/http_parser/http_parser.c#L961)

```
 switch (ch) {
      case 'A': parser->method = HTTP_ACL; break;
      case 'B': parser->method = HTTP_BIND; break;
      case 'C': parser->method = HTTP_CONNECT; /* or COPY, CHECKOUT */ break;
      case 'D': parser->method = HTTP_DELETE; break;
      case 'G': parser->method = HTTP_GET; break;
      case 'H': parser->method = HTTP_HEAD; break;
      case 'L': parser->method = HTTP_LOCK; /* or LINK */ break;
      case 'M': parser->method = HTTP_MKCOL; /* or MOVE, MKACTIVITY, MERGE, M-SEARCH, MKCALENDAR */ break;
      case 'N': parser->method = HTTP_NOTIFY; break;
      case 'O': parser->method = HTTP_OPTIONS; break;
      case 'P': parser->method = HTTP_POST;
        /* or PROPFIND|PROPPATCH|PUT|PATCH|PURGE */
        break;
      case 'R': parser->method = HTTP_REPORT; /* or REBIND */ break;
      case 'S': parser->method = HTTP_SUBSCRIBE; /* or SEARCH */ break;
      case 'T': parser->method = HTTP_TRACE; break;
      case 'U': parser->method = HTTP_UNLOCK; /* or UNSUBSCRIBE, UNBIND, UNLINK */ break;
      default:
        SET_ERRNO(HPE_INVALID_METHOD);
        goto error;
    } 
```

**原回复：**

您必须修补节点才能添加任意方法。请参阅[相关的源代码行](https://github.com/joyent/node/blob/v0.6.15/src/node_http_parser.cc#L122-L151)：

```
static inline Persistent<String>
method_to_str(unsigned short m) {
  switch (m) {
    case HTTP_DELETE:     return delete_sym;
    case HTTP_GET:        return get_sym;
    case HTTP_HEAD:       return head_sym;
    case HTTP_POST:       return post_sym;
    case HTTP_PUT:        return put_sym;
    case HTTP_CONNECT:    return connect_sym;
    case HTTP_OPTIONS:    return options_sym;
    case HTTP_TRACE:      return trace_sym;
    case HTTP_PATCH:      return patch_sym;
    case HTTP_COPY:       return copy_sym;
    case HTTP_LOCK:       return lock_sym;
    case HTTP_MKCOL:      return mkcol_sym;
    case HTTP_MOVE:       return move_sym;
    case HTTP_PROPFIND:   return propfind_sym;
    case HTTP_PROPPATCH:  return proppatch_sym;
    case HTTP_UNLOCK:     return unlock_sym;
    case HTTP_REPORT:     return report_sym;
    case HTTP_MKACTIVITY: return mkactivity_sym;
    case HTTP_CHECKOUT:   return checkout_sym;
    case HTTP_MERGE:      return merge_sym;
    case HTTP_MSEARCH:    return msearch_sym;
    case HTTP_NOTIFY:     return notify_sym;
    case HTTP_SUBSCRIBE:  return subscribe_sym;
    case HTTP_UNSUBSCRIBE:return unsubscribe_sym;
    default:              return unknown_method_sym;
  }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-12-15T17:46:05.103

根据当前nodejs版本（5.2.0），你可以在这里找到HTTP METHODS，你可以自定义：

[https://github.com/nodejs/node/blob/master/deps/http_parser/http_parser.c#L961](https://github.com/nodejs/node/blob/master/deps/http_parser/http_parser.c#L961)

相关代码：

```
parser->method = (enum http_method) 0;
    parser->index = 1;
    switch (ch) {
      case 'A': parser->method = HTTP_ACL; break;
      case 'B': parser->method = HTTP_BIND; break;
      case 'C': parser->method = HTTP_CONNECT; /* or COPY, CHECKOUT */ break;
      case 'D': parser->method = HTTP_DELETE; break;
      case 'G': parser->method = HTTP_GET; break;
      case 'H': parser->method = HTTP_HEAD; break;
      case 'L': parser->method = HTTP_LOCK; /* or LINK */ break;
      case 'M': parser->method = HTTP_MKCOL; /* or MOVE, MKACTIVITY, MERGE, M-SEARCH, MKCALENDAR */ break;
      case 'N': parser->method = HTTP_NOTIFY; break;
      case 'O': parser->method = HTTP_OPTIONS; break;
      case 'P': parser->method = HTTP_POST;
        /* or PROPFIND|PROPPATCH|PUT|PATCH|PURGE */
        break;
      case 'R': parser->method = HTTP_REPORT; /* or REBIND */ break;
      case 'S': parser->method = HTTP_SUBSCRIBE; /* or SEARCH */ break;
      case 'T': parser->method = HTTP_TRACE; break;
      case 'U': parser->method = HTTP_UNLOCK; /* or UNSUBSCRIBE, UNBIND, UNLINK */ break;
      default:
        SET_ERRNO(HPE_INVALID_METHOD);
        goto error;
    }
    UPDATE_STATE(s_req_method); 
```

# javascript - 如何在 jQuery 中正确获取时间和顺序

> ID：10381098
> 
> 赞同：0
> 
> 时间：2012-04-30T09:10:54.813
> 
> 标签：javascript, jquery, delay, timing

假设我们有三个灯泡，我想点亮第一个，保持几毫秒，关闭它，打开下一个，然后以同样的方式继续。

通过添加和删除一个类来打开和关闭灯泡。我如何实现这一目标？

PS我用灯泡只是为了让我的问题更清楚。基本上我需要的是，如何将类添加到 div，保留一段时间，删除类，将类应用到另一个 div，保留一段时间并删除它等等......

*编辑说明：灯泡的数量是动态的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T09:21:18.500

您可以使用 setInterval 和 jquery 选择器的简单组合检查这个小提琴[http://jsfiddle.net/aqXtL/1/](http://jsfiddle.net/aqXtL/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T09:16:24.457

Javascript 函数 setInterval(code, interval) 将按照您的时间间隔重复执行代码。只需保留一个带有计数器的变量，并使用 jquery 的 addClass 和 removeClass 来打开和关闭灯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T09:14:24.077

您可以使用[setTimeout](http://www.w3schools.com/js/js_timing.asp)之类的 setTimeout(yourfuncname, 3000) == 等待 3 秒，然后运行该函数。如果您需要使用动画，则 jquery`animate`方法将完成回调作为参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T09:14:44.003

非常简化的例子...

```
function startDimming(){
  setTimeout(_interval,function(){
    // Remove all "glowing" bulbs.
    // Add class to first "bulb".
    setTimeout(_interval,function(){
      // Remove all "glowing" bulbs.
      // Add class to second "bulb".
      setTimeout(_interval,function(){
        // Remove all "glowing" bulbs.
        // Add class to last "bulb".
        startDimming();
      });
    });
  });
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T09:19:05.143

您可以使用 jquery 的动画并使用完整的功能来完成其他任务。

```
.animate（属性[，持续时间] [，缓动] [，完成]）

   $('#clickme').click(function() {
      $('#book').animate({
      不透明度：0.25，
      左：'+=50'，
    高度：'切换'
    }, 5000, 函数() {
          // 这里你已经为对象设置了动画并且动画完成了，所以
          // 你可以在这里开始一个新的动画
    });
  });

```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-30T09:20:17.303

HTML：

```
<div class="bulb"> </div>
<div class="bulb"> </div>
<div class="bulb"> </div> 
```

CSS：

```
.bulb {
    width: 50px;
    height: 100px;
    border: 2px #000 solid;
    float: left;
    margin: 10px;
}
.bulb.on {
    background: #ff0;
} 
```

查询：

```
var timer;
function light ( i ) {
    i = i % $(".bulb").length;
    $(".bulb").eq(i).addClass("on").siblings().removeClass("on");
    timer = setTimeout(function(){
        light( ++i );
    }, 1000);
}
$(document).ready( function() {
    light(0);
}); 
```

编辑：这是一个工作示例，[http://jsfiddle.net/QdWgM/](http://jsfiddle.net/QdWgM/)

# windows-phone-7 - 从 WP7 应用程序向 WCF 服务发送 Base64 字符串

> ID：10381099
> 
> 赞同：1
> 
> 时间：2012-04-30T09:10:58.857
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone

你好朋友，我正在开发 wp7 应用程序，我在其中浏览媒体库中的图像，获取它的 Base64 字符串并将其发送到 WCF 服务以将其上传到服务器，但我无法将长 Base64 字符串发送到我得到的 Web 服务以下错误：“格式化程序在尝试反序列化消息时引发异常：反序列化操作'UploadFile'的请求消息正文时出错。读取XML数据时已超出最大字符串内容长度配额（8192）。此配额可能是通过更改创建 XML 阅读器时使用的 XmlDictionaryReaderQuotas 对象的 MaxStringContentLength 属性而增加。第 1 行，位置 23083。请帮助解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T05:24:00.790

不确定，这是否可行..但您可以尝试将数据以块（小于 8192 字节）的形式发送到服务，然后在服务端汇总以重新生成文件。我的意思是使用逻辑同步下载文件，这可能会有所帮助..这里不是 WP 人，但似乎是一个可能的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T09:44:19.537

这是服务器端应用程序中的配置问题。

您必须编辑 web.config 文件并更改绑定[readerQuotas](http://msdn.microsoft.com/en-us/library/ms731325.aspx)元素以增加 max* 值。

它应该是这样的：

```
<readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" /> 
```

# c# - 无法更新实体框架中的多对多关系

> ID：10381106
> 
> 赞同：6
> 
> 时间：2012-04-30T09:11:20.657
> 
> 标签：c#, entity-framework, ef-code-first, entity-framework-4.3

我正在使用 Entity Framework 4.3 Code First，我在更新多对多关系时遇到问题。

我定义了以下类：

```
public abstract class Entity
{
    [Column(Order = 0)]
    [Key]
    public int Id { get; set; }

    [Timestamp]
    [Column(Order = 1)]
    public byte[] Version { get; set; }
}

public class Video : Entity
{
    public string Title { get; set; }
    public string Description { get; set; }
    public TimeSpan Length { get; set; }

    public virtual ICollection<Coworker> Coworkers { get; set; }
}

public class Coworker : Entity
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public virtual ICollection<Video> Videos { get; set; }
} 
```

创建数据库后，架构看起来正确：也有一个 Videos、Coworkers 和 VideoCoworkers 表，没有

我在 N 层应用程序中使用存储库模式来访问数据库，我的插入和更新方法如下所示：

```
public T Insert(T entity)
{
    //Creates database context. When it disposes, it calls context.SaveChanges()
    using (var session = new DatabaseSession())
    {
        session.Context.Set<T>().Add(entity);
    }
}

public T Update(T entity)
{
    //Creates database context. When it disposes, it calls context.SaveChanges()
    using (var session = new DatabaseSession())
    {
        entity = session.Context.Set<T>().Attach(entity);
        session.Context.Entry(entity).State = EntityState.Modified;
    }
    return entity;
} 
```

当我更新实体时，我从 DTO 创建实体对象，这就是为什么使用 DbSet.Attach 而不是选择它并逐个更新属性的原因。

当我初始化数据库时，我添加了一些测试数据：

1.  创建 3 个同事，我在其中设置名字和姓氏。（甲、乙、丙）
2.  创建 3 个视频，我在其中设置标题、描述和长度，还设置了一些同事。第一个视频有A，B，第二个有B，C，第三个有A，C。

当我从代码中列出视频时，我可以看到 Video.Coworkers 集合充满了良好的值，当我在 SQL Server Management Studio 中查询链接表 (VideoCoworkers) 时，它看起来也不错。

**我的问题是** 当我更新例如视频的标题时，它可以工作。但是，当我尝试从 Video2 中删除现有同事（B 和 C）并尝试添加同事 A 时，关系不会更新。当我只尝试添加新同事或只尝试删除一个时，它也不起作用。我创建了用作 Update() 方法参数的实体，方法是创建一个新的 Video 实体，其中包含一个新的 Coworkers 集合（通过 Id 使用 Find() 方法从数据库中选择）。

更新多对多关系的正确方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T11:56:00.553

> 但是，当我尝试从 Video2 中删除现有同事（B 和 C）并尝试添加同事 A 时，关系不会更新。

如果不使用通用存储库，正确的过程将是：

```
using (var session = new DatabaseSession())
{
    video2 = session.Context.Set<Video>().Include(v => v.Coworkers)
        .Single(v => v.Id == video2Id);

    coworkerA = new Coworker { Id = coworkerAId };
    session.Context.Set<Coworker>().Attach(coworkerA);

    video2.Coworkers.Clear();
    video2.Coworkers.Add(coworkerA)

    session.Context.SaveChanges();
} 
```

重要的部分是您必须加载或附加原始状态的实体，更改实体，即删除和添加子项，然后保存更改。EF 的更改检测将为链接表条目创建必要的 INSERT 和 DELETE 语句。`Modified`在您的通用方法中尝试设置状态的简单过程`Update`仅适用于更新标量属性 - 例如更改视频标题 - 但不适用于更新实体之间的关系。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-29T18:10:21.610

为了解决这个问题：

1.  将实体附加到上下文
2.  加载集合（集合未加载，因为）
3.  将实体的状态更改为已修改
4.  保存更改

所以你的更新代码应该是这样的：

```
public Video Update(Video entity)
{
    //Creates database context. When it disposes, it calls context.SaveChanges()
    using (var session = new DatabaseSession())
    {
        entity = session.Context.Set<Video>().Attach(entity);
        session.Context.Entry(entity).Collection(p => p.Coworkers).Load();
        session.Context.Entry(entity).State = EntityState.Modified;
    }
    return entity;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-30T09:28:55.210

请参考[此处](http://www.zahidadeel.blogspot.com/2011/05/master-detail-form-in-aspnet-mvc-3-i.html) 了解如何首先使用数据库将主详细信息保存在 asp.net mvc 中。希望它能让您首先了解代码。您还可以查看[knokout.js](http://knockoutjs.com/examples/cartEditor.html)示例

# javascript - 加载和定位图像，当加载其他图像时

> ID：10381108
> 
> 赞同：0
> 
> 时间：2012-04-30T09:11:31.010
> 
> 标签：javascript, jquery

我在加载和定位我的一张图片时遇到了一个小问题。最小的一个。我正在使用 spacegallery 脚本（[http://www.eyecon.ro/spacegallery/](http://www.eyecon.ro/spacegallery/)）。

它加载得很好，但我希望它定位在更大图像的角落，当我第一次加载我的页面时，它没有定位，当我重新加载它时 - 一切都很好，但第一次加载是错误的。

以下是屏幕： 这是第一次加载而不刷新站点：

[首先加载 http://derivativeofln.com/withoutload.png](http://derivativeofln.com/withoutload.png)

第二次和下一次加载：

[第二次加载 http://derivativeofln.com/withload.png](http://derivativeofln.com/withload.png)

我的 HTML：

```
 <div id="myGallery" class="spacegallery">   

    <img class="imaz" src=http://derivativeofln.com/magnifier.jpg />
    <img class="aaa" src=images/bw1.jpg alt="" atr1="bw1" />
    <img class="aaa" src=images/bw2.jpg alt="" atr1="bw2" />
    <img class="aaa" src=images/bw3.jpg alt="" atr1="bw3" />

            </div> 
```

我的CSS：

```
#myGallery0 {
width: 100%;
height: 300px;
 }

#myGallery0 img {
border: 2px solid #52697E;
 }

a.loading {
background: #fff url(../images/ajax_small.gif) no-repeat center;
}

.imaz {
 z-index: 10000; 
}

.imaz img{
position: absolute;
left:10px;
top:10px;
z-index: 10000;
width: 35px;
height: 35px;   
} 
```

我的 Jquery 主脚本文件：（第一个定位说明在底部，请随意向下滚动：））

```
(function($){
   EYE.extend({

    spacegallery: {

        animated: false,

        //position images 
        positionImages: function(el) {

            var top = 0;

            EYE.spacegallery.animated = false;
            $(el)
                .find('a')
                    .removeClass(el.spacegalleryCfg.loadingClass)
                    .end()
                    .find('img.aaa')
                    .removeAttr('height')
                    .each(function(nr){
                        var newWidth = this.spacegallery.origWidth - (this.spacegallery.origWidth - this.spacegallery.origWidth * el.spacegalleryCfg.minScale) * el.spacegalleryCfg.asins[nr];

                        $(this)
                            .css({
                                top: el.spacegalleryCfg.tops[nr] + 'px',
                                marginLeft: - parseInt((newWidth + el.spacegalleryCfg.border)/2, 10) + 'px',
                                opacity: 1 - el.spacegalleryCfg.asins[nr]
                            }) 
                            .attr('width', parseInt(newWidth));
                        this.spacegallery.next = el.spacegalleryCfg.asins[nr+1];
                        this.spacegallery.nextTop = el.spacegalleryCfg.tops[nr+1] - el.spacegalleryCfg.tops[nr];
                        this.spacegallery.origTop = el.spacegalleryCfg.tops[nr];
                        this.spacegallery.opacity = 1 - el.spacegalleryCfg.asins[nr];
                        this.spacegallery.increment = el.spacegalleryCfg.asins[nr] - this.spacegallery.next;
                        this.spacegallery.current = el.spacegalleryCfg.asins[nr];
                        this.spacegallery.width = newWidth;
                    })

        },

        //constructor
        init: function(opt) {
            opt = $.extend({}, EYE.spacegallery.defaults, opt||{});
            return this.each(function(){
                var el = this;
                if ($(el).is('.spacegallery')) {
                    $('<a href="#"></a>')
                        .appendTo(this)
                        .addClass(opt.loadingClass)
                        .bind('click', EYE.spacegallery.next);

                    el.spacegalleryCfg = opt;
                    var listunia, images2 = [], index;
                    listunia = el.getElementsByTagName("img");

                    for (index = 1; index < listunia.length; ++index) {
                        images2.push(listunia[index]);
                    } 

                    el.spacegalleryCfg.images = images2.length;             
                    el.spacegalleryCfg.loaded = 0;
                    el.spacegalleryCfg.asin = Math.asin(1);
                    el.spacegalleryCfg.asins = {};
                    el.spacegalleryCfg.tops = {};
                    el.spacegalleryCfg.increment = parseInt(el.spacegalleryCfg.perspective/el.spacegalleryCfg.images, 10);
                    var top = 0;

                    $('img.aaa', el)
                        .each(function(nr){
                            var imgEl = new Image();
                            var elImg = this;

                            el.spacegalleryCfg.asins[nr] = 1 - Math.asin((nr+1)/el.spacegalleryCfg.images)/el.spacegalleryCfg.asin;
                            top += el.spacegalleryCfg.increment - el.spacegalleryCfg.increment * el.spacegalleryCfg.asins[nr];
                            el.spacegalleryCfg.tops[nr] = top;
                            elImg.spacegallery = {};
                            imgEl.src = this.src;
                            if (imgEl.complete) {

                                el.spacegalleryCfg.loaded ++;
                                elImg.spacegallery.origWidth = imgEl.width;
                                elImg.spacegallery.origHeight = imgEl.height
                            } else {
                                imgEl.onload = function() {
                                    el.spacegalleryCfg.loaded ++;
                                    elImg.spacegallery.origWidth = imgEl.width;
                                    elImg.spacegallery.origHeight = imgEl.height
                                    if (el.spacegalleryCfg.loaded == el.spacegalleryCfg.images) {

                                        EYE.spacegallery.positionImages(el);

                                    }
                                };
                            }
                        });

                    el.spacegalleryCfg.asins[el.spacegalleryCfg.images] = el.spacegalleryCfg.asins[el.spacegalleryCfg.images - 1] * 1.3;
                    el.spacegalleryCfg.tops[el.spacegalleryCfg.images] = el.spacegalleryCfg.tops[el.spacegalleryCfg.images - 1] * 1.3;
                    if (el.spacegalleryCfg.loaded == el.spacegalleryCfg.images) {

                            if(el.spacegalleryCfg.images == 3){
                            $('img.imaz', this).css('top', '27px'); // HERE IS POSITIONING OF MY IMAGES, WHEN SCRIPT LOADS FOR THE FIRST TIME!
                            $('img.imaz', this).css('left', (($(el).find('img.aaa:last').width())/2 + 77) + 'px' );
                            }
                            else if(el.spacegalleryCfg.images==2){
                                $('img.imaz', this).css('top', '33px');     
                                $('img.imaz', this).css('left', (($(el).find('img.aaa:last').width())/2 + 77) + 'px' ); // HERE IT ENDS:)
                            }

                        EYE.spacegallery.positionImages(el);
                    }
                }
            });
        }
    }
});
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T09:23:38.570

这似乎是一个缓存的东西尝试在您的 html 上指定图像尺寸（宽度和高度），因为在第一次加载（图像不在缓存中）时，浏览器只知道加载后的尺寸，并且定位可能不正确。

或者，您可以在加载文档时运行定位代码

```
$(document).ready(«your poisitioning function here») 
```

有关该 jquery 就绪功能，请参见[http://api.jquery.com/ready/](http://api.jquery.com/ready/)

# ruby - 匹配数组中的模式

> ID：10381113
> 
> 赞同：32
> 
> 时间：2012-04-30T09:11:50.650
> 
> 标签：ruby, arrays

有一个包含 2 个元素的数组

```
test = ["i am a boy", "i am a girl"] 
```

我想测试是否在数组元素中找到了一个字符串，比如：

```
test.include("boy")  ==> true
test.include("frog") ==> false 
```

我可以那样做吗？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-04-30T09:15:22.320

使用正则表达式。

```
test = ["i am a boy" , "i am a girl"]

test.find { |e| /boy/ =~ e }   #=> "i am a boy"
test.find { |e| /frog/ =~ e }  #=> nil 
```

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2012-04-30T09:16:13.820

那么你可以像这样grep（正则表达式）：

```
test.grep /boy/ 
```

甚至更好

```
test.grep(/boy/).any? 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-10-02T21:27:49.260

你也可以做

```
test = ["i am a boy" , "i am a girl"]
msg = 'boy'
test.select{|x| x.match(msg) }.length > 0
=> true
msg = 'frog'
test.select{|x| x.match(msg) }.length > 0
=> false 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-07-11T15:25:17.393

我拿了彼得斯片段并对其进行了一些修改以匹配字符串而不是数组值

```
ary = ["Home:Products:Glass", "Home:Products:Crystal"]
string = "Home:Products:Glass:Glasswear:Drinking Glasses" 
```

采用：

```
ary.partial_include? string 
```

数组中的第一项将返回 true，它不需要匹配整个字符串。

```
class Array
  def partial_include? search
    self.each do |e|
      return true if search.include?(e.to_s)
    end
    return false
  end
end 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-30T19:16:36.837

如果您不介意对 Array 类进行猴子补丁，您可以这样做

```
test = ["i am a boy" , "i am a girl"]

class Array
  def partial_include? search
    self.each do |e|
      return true if e[search]
    end
    return false
  end
end

p test.include?("boy") #==>false
p test.include?("frog") #==>false

p test.partial_include?("boy") #==>true
p test.partial_include?("frog") #==>false 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-30T09:15:07.720

如果你想测试一个单词是否包含在数组元素中，你可以使用这样的方法：

```
def included? array, word
  array.inject([]) { |sum, e| sum + e.split }.include? word
end 
```

# unix - 用于检查 informatica 工作流状态的 Shell 脚本

> ID：10381118
> 
> 赞同：0
> 
> 时间：2012-04-30T09:12:16.627
> 
> 标签：unix, informatica

我们有两个并行运行的 Informatica 作业。

一个从欧洲中部时间 11.40 开始，其中包含大约 300 个 Informatica 工作流，其中一个是 fact_sales。

另一个作业在 3.40 CET 运行，它有大约 115 个工作流，其中许多在数据一致性方面依赖于 fact_sales。

问题是 fact_sales 应该在流程 2 中的某些工作流程开始之前完成以使数据准确，但这通常不会发生。

我们正在尝试做的是拆分流程 2，使 fact_sales 相关的工作流仅在 fact_sales 完成后运行。

**您能否提供一种方法来编写一个 unix shell 脚本来检查这个 fact_sales 的状态，如果它成功则启动其他相关的工作流程，如果没有，那么它应该发送失败邮件。谢谢**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T20:54:59.237

我认为不需要为此编写自定义 shell 脚本。其中大部分是非常标准/常见的功能，可以使用命令任务和事件等待来实现。

```
**Process1 - 11:50 运行**
....工作流程
...
 fact_sales 工作流程。**最后添加命令任务
                      **这会丢下一个标志，例如 fact_sales_0430.done
...
....工作流程..500

```

并且所有依赖的进程都会有一个等待这个 .done 文件的事件等待。由于有多个相关的工作流程，请确保它们都不会立即删除文件。您可以在一天结束时或第二天开始加载时删除此 .done 文件。

```
工作流程1
......
dependantworkflow1 -- 事件等待，等待 fact_sales_0430.done（不删除文件）。
dependantworkflow2 -- 事件等待，等待 fact_sales_0430.done（不要删除文件）。
一些其他工作流程
dependantworkflow3 -- 事件等待，等待 fact_sales_0430.done（不删除文件）。
……
……

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-10T10:18:33.227

我认为下面提到的脚本对你有用。请更新参数。

```
 WAIT_LOOP=1
    while [ ${WAIT_LOOP} -eq 1 ]
    do
        WF_STATUS=`pmcmd getworkflowdetails -sv $INFA_INTEGRATION_SERVICE -d $INFA_DOMAIN -uv INFA_USER_NAME -pv INFA_PASSWORD -usd Client -f $FOLDER_NAME $WORKFLOW_NAME(fact_sales) | grep "Workflow run status:" | cut -d'[' -f2 | cut -d']' -f1`
            echo ${WF_STATUS} | tee -a $LOG_FILE_NAME
                    case "${WF_STATUS}" in
                            Aborted)
                               WAIT_LOOP=0
                               ;;
                            Disabled)
                               WAIT_LOOP=0
                               ;;
                            Failed)
                               WAIT_LOOP=0
                               ;;
                            Scheduled)
                               WAIT_LOOP=0
                               ;;
                            Stopped)
                               WAIT_LOOP=0
                               ;;
                            Succeeded)
                               WAIT_LOOP=0
                               ;;
                            Suspended)
                               WAIT_LOOP=0
                               ;;
                            Terminated)
                               WAIT_LOOP=0
                               ;;
                            Unscheduled)
                               WAIT_LOOP=0
                               ;;
                    esac
                    if [ ${WAIT_LOOP} -eq 1 ]
                    then
                            sleep $WAIT_SECONDS
                    fi
    done
            if [ ${WF_STATUS} == "Succeeded" ]
            then
                    pmcmd startworkflow -sv $INFA_INTEGRATION_SERVICE -d $INFA_DOMAIN -uv INFA_USER_NAME -pv INFA_PASSWORD -usd Client -f $FOLDER_NAME -paramfile $PARAMETER_FILE $WORKFLOW_NAME(dependent_one) | tee $LOG_FILE_NAME
            else
                    (echo "Please find attached Logs for Run" ; uuencode $LOG_FILE_NAME $LOG_FILE_NAME )| mailx -s "Execution logs" $EMAIL_LIST
                    exit 1
            fi 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T07:17:27.150

第二种方法可以如下 -

您必须运行某种调度程序来启动这些工作流。由于 Informatica 无法在一个集合中调度多个工作流，因此它只能在该依赖关系管理级别处理工作集/会话。

从调度程序中，跨销售事实加载 wf 和其他相关工作流创建依赖关系。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-04T18:18:23.327

您可以使用 REP_SESS_LOG 等表从存储库数据库中触发查询，并检查事实销售的状态是否成功。然后只有您可以继续进行第二份工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-23T07:03:05.787

我可以看到您面临的主要挑战 - 保持大量 infa 工作流程之间的依赖关系。你有两个选择——

1.  您可以使用一些自动调度工具来设置依赖关系并正确运行它们。有许多免费工具，但取决于您的舒适度/时间/成本等，您应该选择。链接[在这里](http://www.findbestopensource.com/tagged/job-scheduler)。
2.  其次，您可以创建自定义作业调度程序。我使用 UNIX 脚本、oracle 表做了一个类似的调度程序。所以这里是步骤 -
    *   将您的所有工作流程分类。独立流应该进入组 1，而依赖于组 1 的流应该进入组 2，依此类推。
    *   将您的流程设置为从上述小组中一一挑选并开始他们。如果启动队列为空，则它应该等待。称之为循环2。
    *   保持一个轮询循环来检查启动流的状态。如果失败、中止等失败，则向用户发送邮件并将所有“队列中/相关”流标记为失败。如果运行继续轮询。如果成功，则将控制权交给循环 2。 -如果启动队列为空，则仅当该组中的所有工作流都成功时才转到下一个组。

这是一个有点棘手的过程，但一旦你设置它就会得到回报。您可以根据需要添加任意数量的工作流，与 infa 调度程序或 infa worklet 等相比，您的维护将更加顺畅。

# java - Java JNI 和未来任务

> ID：10381121
> 
> 赞同：4
> 
> 时间：2012-04-30T09:12:27.253
> 
> 标签：java, java-native-interface

我正在尝试实现一个代码，我想从 JNI 调用一个应该有超时的函数。如果超过超时，我想终止本机任务。我发布了一段代码作为示例。

```
void myFunction(timeOutInSeconds)
{
    if(timeOutInSeconds > 0)
    {
        ExecutorService executor = Executors.newCachedThreadPool();
        Callable<Integer> task = new Callable<Integer>() {
            public Integer call() {
                System.out.println("Calling JNI Task");
                JNI_Task();
                System.out.println("Finished JNI Task");
                return 0;                              
            }
        };

        Future<Integer> future = executor.submit(task);
        try 
        {
            @SuppressWarnings("unused")
            Integer result = future.get(timeOutInSeconds, TimeUnit.SECONDS); 
        } 
        catch (TimeoutException ex)
        {
            // handle the timeout               
            kill_task_in_JNI();     

            // future.cancel(true);
            return TIMEOUT;

        } catch (InterruptedException e) {
            // handle the interrupts
        } catch (ExecutionException e) {
            // handle other exceptions
        } 
        finally 
        {
            // future.cancel(true);
            executor.shutdown();
        }
    }
    else
        JNI_Task();
} 
```

有几个问题——

*   我应该把future.cancel（）放在哪里。有 2 个位置被评论。
*   如果我在 timeOutInSeconds = 0 的情况下运行此函数，它会完美运行。然而，无论 timeOutInSeconds 的值如何，任务都会被卡住并且不会调用 JNI 任务。我通过将 printf 放在 JNI 代码中来检查这一点。该任务需要 1 秒才能执行，我给了 30 秒、5 分钟等，但它仍然卡住了。

这种方法有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T15:36:13.800

您可以（并且在这种情况下应该）`future.cancel()`仅在 finally 块中调用。[http://docs.oracle.com/javase/tutorial/essential/exceptions/finally.html](http://docs.oracle.com/javase/tutorial/essential/exceptions/finally.html)。

关于第二个问题，我不清楚 timeOutInSeconds = 0 时是否也会出现问题。是这样吗？能否提供 JNI_TASK() 方法的内容？

# c# - 在反序列化期间在两种不同类型之间进行选择

> ID：10381123
> 
> 赞同：4
> 
> 时间：2012-04-30T09:12:31.683
> 
> 标签：c#, json.net

我得到了一个可以有以下选择的对象：

```
"params": [23, 42]
"params": {"minuend": 42, "subtrahend": 23} 
```

如何让 json.net 自动`object[]`为第一个创建一个属性，为`Dictionary<string,object>`第二个创建一个属性？

示例（存根）类：

```
[DataContract]
public class JsonRcpRequest
{
    [DataMember(Name = "params")]
    public object Parameters { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T10:39:22.243

`JsonConverter`解决方案是使用以下方法创建自定义：

```
public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
{
    object source;

    //[42, 23]
    if (reader.TokenType == JsonToken.StartArray)
    {
        reader.Read();
        var values = new List<object>();
        while (reader.TokenType != JsonToken.EndArray)
        {
            values.Add(reader.Value);
            reader.Read();
        }

        reader.Read();
        source = values.ToArray();
    }
    else if (reader.TokenType == JsonToken.StartObject)//{"subtrahend": 23, "minuend": 42}
    {
        reader.Read();
        var values = new Dictionary<string, object>();
        while (reader.TokenType != JsonToken.EndObject)
        {
            if (reader.TokenType != JsonToken.PropertyName)
                throw new FormatException("Expected a property name, got: " + reader.TokenType);
            string propertyName = reader.Value.ToString();
            reader.Read();

            values.Add(propertyName, reader.Value);
            reader.Read();
        }

        source = values;
    }
    else
        throw new FormatException("Expected start of object or start of array");

    reader.Read();
    return source;
} 
```

然后用它标记属性：

```
[DataMember(Name = "params", IsRequired = false)]
[JsonConverter(typeof(ArgumentConverter))]
public object[] Parameters { get; set; } 
```

# c# - C# bulkcopy 到 SQL 表类型问题

> ID：10381125
> 
> 赞同：2
> 
> 时间：2012-04-30T09:12:57.980
> 
> 标签：c#, sql, datagridview, sqlbulkcopy

使用 C#、.net 4、Visual Studio 2010 和 SQL Server 2008。

我目前有一个名为`NewPeriodPareto`包含以下列的表：

*   PG nvarchar(50)
*   部分 nvarchar(50)
*   销售浮动
*   LostSales 浮动
*   帕累托6整数
*   p6 图像
*   Pareto5 整数
*   p5 图像
*   Pareto4 整数
*   p4 图像
*   Pareto3 整数
*   p3 图像
*   当前帕累托整数
*   p新建图像
*   新帕累托整数

以下是我尝试填写表格的代码：

```
private void CreateNewPeriod()
{
        DataSet dsDG = new DataSet();
        DataTable dt = new DataTable();

        dsDG = (DataSet)ParetoGrid.DataSource;
        dt = dsDG.Tables[0];

        string ThetableName = "NewPeriodPareto";
        BulkInsertDataTable(myConn, ThetableName, dt);
}

public static void BulkInsertDataTable(string connectionString, string tableName, DataTable table)
{
        using (SqlConnection connection = new SqlConnection(connectionString))
        {
            SqlBulkCopy bulkCopy =
                new SqlBulkCopy
                (
                connection,
                SqlBulkCopyOptions.TableLock |
                SqlBulkCopyOptions.FireTriggers |
                SqlBulkCopyOptions.UseInternalTransaction,
                null
                );

            bulkCopy.DestinationTableName = tableName;
            connection.Open();

            bulkCopy.WriteToServer(table);
            connection.Close();
        }
} 
```

如您所见，提供的代码尝试从我的数据表中复制数据。数据表绑定到我的数据网格源。

以下是我得到的错误：

> @bulkCopy.WriteToServer(table);
> 来自数据源的 Int32 类型的给定值无法转换为指定目标列的类型图像。

现在我想到的第一件事是我的SQL表的一个字段中的类型设置错误，但经过多次检查，似乎没有任何问题。

所以我追求的是这个小问题的解决方案，甚至是实现相同目标的替代/更简单的方法，即从程序 DataTable 填充 SQL 表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T15:29:16.363

【时间不多，给你个提示】

您应该查看 SqlBulkCopy 的 ColumnMappings。这允许您将源的列显式映射到目标。现在可能有一些额外的列，例如 ID 或类似的列。

# javascript - 将 javascript 和 css 存储在数据库中是一个坏主意吗？

> ID：10381130
> 
> 赞同：6
> 
> 时间：2012-04-30T09:13:14.753
> 
> 标签：javascript, mysql, css, database

好的，所以我正在尝试将用户自定义 css 和 javascript 存储在 mysql 数据库中，以便稍后在页面上的 head 部分使用，那么将 css 和 javascript 存储在数据库中是个好主意吗？如果不是，那么安全的方法是什么？

我正在使用 wordpress 并在 javascript 代码上使用 esc_js() 我注意到它在引号前添加了一个反斜杠，并添加了 \n 而不是新行，那么对于 javascript 是否足够？

并提前感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T09:17:15.767

简短的回答：是的，只要是您信任的人就可以。

长答案：

确保您 100% 信任您的用户。有很多漏洞可以通过 CSS/JS 完成，因此请确保您只允许您完全信任的人执行此操作。即使您尝试实施某种过滤，人们也会找到解决方法。

根据您找出文件名的难易程度，我可能会考虑将数据存储在文件中。毕竟，如果您可以轻松确定文件名，则数据库是不必要的开销。如果您不能轻松确定文件名，我就直接将其存储在数据库中。（或者，如果您打算存储任何元数据或版本信息或任何东西，我会继续使用数据库。）

# sql-server - 是否可以在 SQL Server 中优化 ShowPlan XML

> ID：10381131
> 
> 赞同：0
> 
> 时间：2012-04-30T09:13:17.123
> 
> 标签：sql-server, sql-server-2008, sql-execution-plan

我有一个相当复杂的查询，一旦 SQL Server 建立了查询计划（令人满意），它就需要不到一秒钟的时间来运行。但是，根据分析器，查询第一次运行 ShowPlanXML 事件大约需要 14 秒（不令人满意）。

有什么方法可以优化 ShowPlanXML 以便它第一次运行时完成得更快？

还是我要创建一个计划指南？

这里的信息是 SQL 查询（由 NHibernate 生成）：

```
SELECT top 20 this_.UserId as UserId55_0_, this_.User_Version as User2_55_0_, this_.User_ApplicationId as User3_55_0_, this_.User_DeletedOn as User4_55_0_, this_.User_CreatedOn as User5_55_0_, this_.User_ModifiedOn as User6_55_0_, this_.User_CreatedById as User7_55_0_, this_.User_CreatedByName as User8_55_0_, this_.User_ModifiedById as User9_55_0_, this_.User_ModifiedByName as User10_55_0_, this_.User_Name as User11_55_0_, this_.User_ExternalId as User12_55_0_, this_.User_DynamicFields as User13_55_0_, 
this_.User_FirstName as User14_55_0_, this_.User_LastName as User15_55_0_, this_.User_Prefix as User16_55_0_, this_.User_Gender as User17_55_0_, this_.User_Language as 
User18_55_0_, this_.User_Code as User19_55_0_, this_.User_Nationality as User20_55_0_, this_.User_FirstLanguage as User21_55_0_, this_.User_DrivingLicence as User22_55_0_, 
this_.User_Category as User23_55_0_, this_.User_UserStatus as User24_55_0_, this_.User_UserType as User25_55_0_, this_.User_WorkPhone as User26_55_0_, this_.User_MobilePhone as 
User27_55_0_, this_.User_Fax as User28_55_0_, this_.User_Mail as User29_55_0_, this_.User_Login as User30_55_0_, this_.User_Password as User31_55_0_, this_.User_BornOn as 
User32_55_0_, this_.User_StartedOn as User33_55_0_, this_.User_FinishedOn as User34_55_0_, this_.User_Address as User35_55_0_, this_.User_PostalCode as User36_55_0_, 
this_.User_City as User37_55_0_, this_.User_Country as User38_55_0_, this_.User_PositionTitle as User39_55_0_, this_.User_Comments as User40_55_0_, this_.User_OptionalField1 as 
User41_55_0_, this_.User_OptionalField2 as User42_55_0_, this_.User_OptionalField3 as User43_55_0_, this_.User_PasswordConsecutiveFailedAttempts as User44_55_0_, 
this_.User_PasswordModificationDate as User45_55_0_, this_.User_WrongPasswordAttemptDate as User46_55_0_, this_.User_PictureUrl as User47_55_0_, this_.User_PasswordModificationStatus as User48_55_0_, this_.User_SecretQuestionConsecutiveFailedAttempts as User49_55_0_, this_.User_PlatformMailTransfer as User50_55_0_, this_.User_TimeZoneId as User51_55_0_, this_.User_ConnectionState as User52_55_0_, this_.User_LastConnectionId as User53_55_0_, this_.User_TotalPercentRealized as User54_55_0_
FROM Dir_User this_ 
WHERE this_.UserId in (
      SELECT distinct this_0_.UserId as y0_ 
      FROM Dir_User this_0_ inner join Dir_UserDynamicGroup dynamicgro3_ on this_0_.UserId=dynamicgro3_.UsDy_UserId 
      inner join Dir_Group dynamicgro1_ on dynamicgro3_.UsDy_DynamicGroupId=dynamicgro1_.GroupId 
      WHERE dynamicgro1_.GroupId = (51904517) 
      and this_0_.User_ApplicationId = 65536 
      and this_0_.User_DeletedOn is null 
      and this_0_.UserId in (
            SELECT distinct this_0_0_.TargetUserId as y0_ 
            FROM Dir_UserGroupMember this_0_0_ 
            WHERE this_0_0_.OwnerUserId = 7341195 
            and ( (this_0_0_.Scope & 139280) != 0  or ( (this_0_0_.Scope & 139280) != 0  
            and this_0_0_.GroupId = this_0_0_.SubGroupId)))) 
            ORDER BY this_.User_Name asc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-04T15:06:40.433

显示计划探查器事件可能对 SQL Server 的性能产生重大影响（请参阅[sqlserver.query_post_execution_showplan 性能影响](http://connect.microsoft.com/SQLServer/feedback/details/732870/sqlserver-query-post-execution-showplan-performance-impact)）。如果您想获得编译存储过程所花费时间的准确表示，您应该使用另一种方法。

您应该能够通过直接查看计划缓存来确定计划编译所花费的时间，请参阅[从计划缓存中识别高编译时间语句](http://www.sqlskills.com/blogs/jonathan/identifying-high-compile-time-statements-from-the-plan-cache/)。

不幸的是，除了简单地降低查询的复杂性之外，我不知道有很多方法可以减少 SQL Server 查询的编译时间。尝试通过计划缓存降低计划编译所需的频率是提高性能的标准方法。

# magento - 如何在 Magento 的运输方式中添加费用

> ID：10381134
> 
> 赞同：1
> 
> 时间：2012-04-30T09:13:25.657
> 
> 标签：magento, payment

我按照本教程（[http://www.magentocommerce.com/wiki/5_-_modules_and_development/payment/create-payment-method-module](http://www.magentocommerce.com/wiki/5_-_modules_and_development/payment/create-payment-method-module)）中创建付款方式的步骤操作一切正常，但我需要额外的功能。

*   如果选择付款方式，则在总额中额外收取 6% 的费用。

我也使用这个模块 - [http://www.magentocommerce.com/magento-connect/payment-method-charge-4050.html](http://www.magentocommerce.com/magento-connect/payment-method-charge-4050.html)但我需要 2 个条件。这就是我创建新付款方式的原因。

*   第一种付款方式 - 6% 的费用
*   第二种付款方式 - 2% 的费用

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T15:52:25.883

您很可能只想创建一个观察者来做您需要的事情：

您需要四处寻找要挂钩的正确观察者事件，但是这里有一个示例观察者方法：

```
public function updateShippingAmount( $observer )
{
   $MyPaymentMethod = Mage::getSingleton('namespace/mypaymentmethod');

   $order = $observer->getEvent()->getOrder();
   $payment = $order->getPayment()->getData();

   if( $payment['method'] == $MyPaymentMethod->getCode() )
   {
       $shipping_amount =  $order->getShippingAmount();
       $order->setShippingAmount( $shipping_amount + $MyPaymentMethod->getPostHandlingCost() );
   }
} 
```

取自这篇文章：

*   ~~[http://www.candesprojects.com/magento/add-payment-method-handling-cost/](http://www.candesprojects.com/magento/add-payment-method-handling-cost/)~~

更多关于如何创建观察者的阅读：

*   [http://www.magentocommerce.com/wiki/5__-_modules_and_development/0__-_module_development_in_magento/customizing_magento_using_event-observer_method](http://www.magentocommerce.com/wiki/5_-_modules_and_development/0_-_module_development_in_magento/customizing_magento_using_event-observer_method)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-06T12:50:33.780

最近我有同样的要求，我通过实现事件观察器方法来解决。
事实上，您可以通过实现称为事件的任何条件为任何运输方法添加任何额外的运输成本，`sales_quote_collect_totals_before`
并且观察者模型方法（虽然是虚拟代码）看起来像：

```
public function salesQuoteCollectTotalsBefore(Varien_Event_Observer $observer)
    {
        /**@var Mage_Sales_Model_Quote $quote */
        $quote = $observer->getQuote();
        $someConditions = true; //this can be any condition based on your requirements
        $newHandlingFee = 15;
        $store    = Mage::app()>getStore($quote>getStoreId());
        $carriers = Mage::getStoreConfig('carriers', $store);
        foreach ($carriers as $carrierCode => $carrierConfig) {
            if($carrierCode == 'fedex'){
                if($someConditions){
                    Mage::log('Handling Fee(Before):' . $store->getConfig("carriers/{$carrierCode}/handling_fee"), null, 'shipping-price.log');
                    $store->setConfig("carriers/{$carrierCode}/handling_type", 'F'); #F - Fixed, P - Percentage                  
                    $store->setConfig("carriers/{$carrierCode}/handling_fee", $newHandlingFee);

                    ###If you want to set the price instead of handling fee you can simply use as:
                    #$store->setConfig("carriers/{$carrierCode}/price", $newPrice);

                    Mage::log('Handling Fee(After):' . $store->getConfig("carriers/{$carrierCode}/handling_fee"), null, 'shipping-price.log');
                }
            }
        }
    } 
```

# c++ - 将 UTC time_t 转换为不同的时区 C++ 线程安全

> ID：10381138
> 
> 赞同：1
> 
> 时间：2012-04-30T09:13:28.933
> 
> 标签：c++, timezone

[更新] 我正在尝试找到将 UTC 时间戳转换为不同时区的正确方法。

确切的问题：我的程序中有时间戳，它总是存储在 UTC 中，所以很好。但是，我必须能够根据用户偏好在不同的时区显示它们（实际上将它们写入文件）。

我正在使用 linux，但我想编写与 pateform 无关的代码。我不想使用 boost 库（我们已经在使用 Qt，它没有提供与 boost 日期一样多的功能）。我想编写线程安全代码我想识别像美国/东部这样的时区以简化配置（这是由用户完成的，我不太相信他们会正确使用 EST、CET、CEST 等缩写...）。

我已经在 Internet 上查看并发现了一些或多或少的工作代码，但是

*   大多数时候它使用**TZ**环境变量，据说这是一种非线程安全的方法。
*   它使用时区的缩写（如 EST、CET ...）。

有人可以告诉我一个好方法吗？

这是我现在所拥有的（几天前在 Internet 上找到并在此示例中修改为使用我的 Qt 库）。此代码可能不是线程安全的。

新版本： **仍然不是线程安全的**，但它或多或少地完成了这项工作。可能不容易移植到窗口环境。

它处理日光变化见下面的例子（巴黎的日光变化发生在 2012 年 3 月 25 日 01H00 UTC（从当地时间 02H00 到当地时间 03H00 传递）。这是将时间戳从 UTC 转换为巴黎（有日光变化）和 Kuala_Lumpur（没有日光变化）。

```
#include <QtCore/QCoreApplication>
#include <QDateTime>
#include <stdio.h>
#include <stdlib.h>
#include <QDebug>

void treatTimestamp(QString timestamp,QString format);

int main(int argc, char *argv[])
{
    QString format = "MM:dd:yyyy hh:mm:ss";
    treatTimestamp("03:25:2012 00:59:59",format);
    qDebug()<<"---------------------";
    treatTimestamp("03:25:2012 01:00:00",format);
    return 0;
}

void treatTimestamp(QString timestamp_s,QString format)
{
    unsetenv("TZ");
    setenv("TZ", "UTC", 1);
    QDateTime timestamp = QDateTime::fromString(timestamp_s, format);
    qDebug()<<"CUSTOM TS UTC:"<<timestamp.toUTC().toString(format).toStdString().c_str();;
    time_t tmp = timestamp.toUTC().toTime_t();
    setenv("TZ", ":Asia/Kuala_Lumpur", 1);
    qDebug()<<"CUSTOM TS KL:"<<QDateTime::fromTime_t(tmp).toString(format);
    setenv("TZ", "Europe/Paris", 1);
    qDebug()<<"CUSTOM TS Paris:"<<QDateTime::fromTime_t(tmp).toString(format);
    unsetenv("TZ");
} 
```

输出（第一：时间变化前一秒，第二：后一秒）。

自定义 TS LOC：03:25:2012 01:00:00

自定义 TS UTC：03:25:2012 01:00:00

自定义 TS KL：“03:25:2012 09:00:00”

定制 TS 巴黎：“03:25:2012 03:00:00”

* * *

自定义 TS LOC：03:25:2012 03:00:00

自定义 TS UTC：03:25:2012 03:00:00

自定义 TS KL：“03:25:2012 11:00:00”

定制 TS 巴黎：“03:25:2012 05:00:00”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T10:22:59.780

根据[这个线程](http://qt-project.org/forums/viewthread/11559)，使用 QDateTime 可以`dateTime.addSecs(3600*timeZoneOffset);`在 dateTime 是 QDateTime 的地方做。

根据[gmtime reference](http://www.cplusplus.com/reference/clibrary/ctime/gmtime/)，C 库中没有内置的时区支持，但您可以通过在`tm->tm_hour`. 顺便说一句，它不会正确调整日期（与 QDateTime 方法不同）。

根据[mktime](http://www.cplusplus.com/reference/clibrary/ctime/mktime/)参考，mktime 将“标准化”日期时间值，因此您可以将时间偏移添加到 tm_hour，调用 mktime。但是，没有指定 mktime 如何调整 struct tm 的字段 - 如果您说，将 tm_hour 设置为 27，它会将 tm_hour 设置为 23 还是将 tm_hour 设置为 3，从而增加 tm_day（可能还有月/年）？

如果我是你，我会简单地使用`QDateTime::addSecs`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T11:13:54.757

我给 SigTerm +1，因为他的回答很有建设性。最后，我与用户验证一个正在运行的进程只需要 2 个时区：一个指定的时区和一个 UTC 时区（主要用于日志记录）。所以最后我在程序的顶部使用它 unsetenv("TZ"); setenv("TZ", "", 1);

然后在我需要 UTC 时间的特定部分，我总是调用 Qt toUTC 方法。这真的不令人满意，但完整的软件是关于数据采集的，时间戳是其中的重要部分，所以我不想在代码中进行自己的计算。我听说 Qt5 将实现类似于 boost 库中的时区操作。可能会在代码发布时重构代码。

# java - 如何查询高分辨率性能计数器

> ID：10381140
> 
> 赞同：4
> 
> 时间：2012-04-30T09:13:53.847
> 
> 标签：java, winapi

早上好，

我需要获取 CPU 高分辨率性能计数器的值，以测量各种软件应用程序之间的延迟。在我的 c(++|#) 中，我使用

BOOL WINAPI QueryPerformanceCounter( __out LARGE_INTEGER *lpPerformanceCount );

WinApi 调用。从java中获取计数器的正确方法是什么？我搜索 jna 没有成功。我知道这是一个特定于平台的问题，但也许有比编写自己的 jni 包装器更快的方法？

最良好的祝愿，阿明

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T09:41:10.293

怎么用[`System.nanoTime`](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#nanoTime%28%29)？我认为已经使用了机器的性能计数器，不需要编写本机包装器。

**更新：**根据“Windows 上的时钟和定时器”部分[中关于 jvm 中时钟和定时器的这篇文章](https://blogs.oracle.com/dholmes/entry/inside_the_hotspot_vm_clocks)

> System.nanoTime() 使用 QueryPerformanceCounter/QueryPerformanceFrequency API 实现

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T09:28:07.173

这是本机包装器代码

1) 文件 W32Call.java

```
package jmSense.Native; public class W32Call {
public native static long QueryPerformanceCounter( );
public native static int QueryPerformanceCounterInt32( ); 
```

2) 运行 java h 创建包含文件

3）从创建一个 dll “My Native Extensions.dll”

```
#include "stdafx.h"
#include "windows.h"
#include "jmSense_Native_W32Call.h" 

JNIEXPORT jlong JNICALL Java_jmSense_Native_W32Call_QueryPerformanceCounter(JNIEnv *, jclass)
{  
    LARGE_INTEGER g_CurentCount; 
    QueryPerformanceCounter((LARGE_INTEGER*)&g_CurentCount); 
    return g_CurentCount.QuadPart; 
}

JNIEXPORT jint JNICALL Java_jmSense_Native_W32Call_QueryPerformanceCounterInt32(JNIEnv *, jclass)
{  
     LARGE_INTEGER g_CurentCount; 
     QueryPerformanceCounter((LARGE_INTEGER*)&g_CurentCount); 
     return g_CurentCount.LowPart;
} 
```

4）像这样使用它：

```
System.loadLibrary("My Native Extensions");
System.out.println(W32Call.QueryPerformanceCounter()); 
```

美好的

# windows-7 - Windows 7 上的 Malloc

> ID：10381143
> 
> 赞同：1
> 
> 时间：2012-04-30T09:14:05.237
> 
> 标签：windows-7, malloc

我曾经用 nedmalloc 替换 windows XP 上的 malloc 例程 非常快速和更好的碎片管理。（编译器为VS2008）

现在，它仍然适用于 windows7 吗？我在 windows 7-x86 上测试过，有时 nedmalloc 失败了。我很快就会做一些基准测试来看看性能。

你知道更好的 malloc 替代品吗？

# c++ - 错误 C2361：“找到”的初始化被“默认”标签跳过

> ID：10381144
> 
> 赞同：20
> 
> 时间：2012-04-30T09:14:12.507
> 
> 标签：c++, compiler-errors, switch-statement

> **可能重复：**
> [为什么不能在 switch 语句中声明变量？](https://stackoverflow.com/questions/92396/why-cant-variables-be-declared-in-a-switch-statement)

我在下面的代码中有一个奇怪的错误：

```
char choice=Getchar();
switch(choice)
{
case 's':
    cout<<" display tree ";
    thetree->displaytree();
    break;

case 'i':
    cout<<"  enter value to insert "<<endl;
    cin>>value;
    thetree->insert(value);
    break;
case 'f' :
    cout<< "enter value to find ";
    cin>>value;
    int found=thetree->find(value);
    if(found!=-1)
        cout<<" found  =  "<<value<<endl;
        else
            cout<< " not found " <<value <<endl;
        break;
default:
    cout <<" invalid entry "<<endl;;
    } 
```

Visual Studio 2010 编译器说：

```
1>c:\users\daviti\documents\visual studio 2010\projects\2-3-4\2-3-4\2-3-4.cpp(317): error C2361: initialization of 'found' is skipped by 'default' label
1>          c:\users\daviti\documents\visual studio 2010\projects\2-3-4\2-3-4\2-3-4.cpp(308) : see declaration of 'found' 
```

我认为我已经正确编写了 break 和 default 语句，那么错误在哪里？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-04-30T09:23:14.843

您需要`case 'f':`用范围大括号括起来：

```
case 'f' :
{  
    cout<< "enter value to find ";
    cin>>value;
    int found=thetree->find(value);
    if(found!=-1)
        cout<<" found  =  "<<value<<endl;
    else
        cout<< " not found " <<value <<endl;
    break;
} 
```

或将声明`found`置于`switch`

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-04-30T09:27:26.897

a 的语义是 a 的语义`switch`：`goto`s`case`不会引入新的范围。所以`found`在你的`default:`情况下是可以访问的（尽管你实际上并没有访问它）。跳过非平凡的初始化是非法的，因此您的代码变得非法。

鉴于您的复杂性`case 'f':`，最好的解决方案可能是将其分解为一个单独的函数。如果做不到这一点，您可以将整个案例放入 中`{...}`，创建一个单独的范围，或者放弃初始化，编写：

```
int found;
found = thetree->find(value); 
```

（我提到这一点是为了完整性。这*不是*我推荐的解决方案。）

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-30T09:17:22.750

您需要在花括号内声明`switch`'的内部变量。`case`IE

```
case 'f' :
{
    ...
    int found=thetree->find(value);
    ...
} 
```

# java - 包含“@”的应用程序 url 引发异常

> ID：10381146
> 
> 赞同：0
> 
> 时间：2012-04-30T09:14:20.043
> 
> 标签：java, url, url-rewriting, tapestry

我有我的应用程序 url，我通过他们的电子邮件发送给最终用户。

现在该 url 包含“用户名”字段，该字段可以包含“@”字符。

例如发送给最终用户的链接：

```
http://localhost:8080/my-app/someaction/activateuser/abc@def.com/somedata/ 
```

现在，每当用户点击上面的链接时，它都会抛出以下异常：

```
java.lang.IllegalArgumentException
    Input string 'abc@def.com' is not valid; the character '@' at position 4 is not valid.
    at org.apache.tapestry5.internal.services.URLEncoderImpl.decode(URLEncoderImpl.java:144)
    at $URLEncoder_137022607d9.decode($URLEncoder_137022607d9.java)
    at org.apache.tapestry5.internal.services.ContextPathEncoderImpl.decodePath(ContextPathEncoderImpl.java:92)
    at $ContextPathEncoder_137022607cd.decodePath($ContextPathEncoder_137022607cd.java)
    at org.apache.tapestry5.internal.services.ComponentEventLinkEncoderImpl.checkIfPage(ComponentEventLinkEncoderImpl.java:328)
    at org.apache.tapestry5.internal.services.ComponentEventLinkEncoderImpl.decodePageRenderRequest(ComponentEventLinkEncoderImpl.java:307)
    at org.apache.tapestry5.internal.services.linktransform.LinkTransformerInterceptor.decodePageRenderRequest(LinkTransformerInterceptor.java:68)
    at $ComponentEventLinkEncoder_137022607c1.decodePageRenderRequest($ComponentEventLinkEncoder_137022607c1.java)
    at org.apache.tapestry5.internal.services.PageRenderDispatcher.dispatch(PageRenderDispatcher.java:41)
    at $Dispatcher_137022607c2.dispatch($Dispatcher_137022607c2.java)
    at $Dispatcher_137022607bd.dispatch($Dispatcher_137022607bd.java)
    at org.apache.tapestry5.services.TapestryModule$RequestHandlerTerminator.service(TapestryModule.java:321)
    at org.apache.tapestry5.internal.services.RequestErrorFilter.service(RequestErrorFilter.java:26) 
```

有没有办法处理这种情况，比如编码/解码 url？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T09:47:11.957

url 中不能有 @，因为它是保留字符（具体的 RFC 是[RFC 3986](https://www.ietf.org/rfc/rfc3986.txt)）。

您可以使用[URLEncoder 类](http://docs.oracle.com/javase/1.5.0/docs/api/java/net/URLEncoder.html)将 url 编码为可接受的值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T11:38:39.100

正如 MiniBill 已经回答的那样，这是行不通的，而且正如 Howard 所补充的那样，Tapestry 有自己的 URL 编码器。这意味着获取 Tapestry 可以读取格式的 URL 的最简单方法是让 Tapestry 创建它，然后将其传递给发送电子邮件的组件：

```
@Inject
private LinkSource linkSource;

@OnEvent(...)
void sendActivationEmail() {
    final Link activationLink = this.createUserActivationLink(email, otherStuff);
    this.activationEmailSender.sendWithActivationLink(email, activationLink);
}

private Link createUserActivationLink(String email, String otherStuff) {
    return linkSource.createPageRenderLink(
       "someaction/activateuser", false, email, otherStuff);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-15T16:00:35.727

我能够通过将我的字符串编码为 Base64 并在 Tapestry Java 端解包来解决这个问题。我的字符串是 UTF-8 编码的字符。

我从这个答案修改了 Base64 编码器：[https ://stackoverflow.com/a/40392850/5339857](https://stackoverflow.com/a/40392850/5339857)

```
function b64EncodeUnicode(str) {
    return btoa(encodeURIComponent(str).replace(/%([0-9A-F]{2})/g, function(match, p1) {
        return String.fromCharCode('0x' + p1);
    })).replace(/\=+$/, '');
} 
```

（只是`.replace`最后加了，去掉`=`Tapestry 不喜欢的 padding ）

在 Java 方面，解码轻而易举：（这个例子是来自 javascript 的 ajax 点击 - Base64 编码发生的地方）

```
@OnEvent(value = "clickAjax")
Object clickAjax(String parameter) {
    somePagePropetry = new String(java.util.Base64.getDecoder().decode(parameter));
    return this;
} 
```

# c# - 单一管理员，使用角色和会话？

> ID：10381149
> 
> 赞同：0
> 
> 时间：2012-04-30T09:14:28.763
> 
> 标签：c#, .net, entity-framework

我已经建立了一个“CRUD”页面，它应该只有一个管理员。我在[http://example/Admin/action/id](http://example/Admin/action/id)中获得了我的管理部分，作为一个单一的控制器（也许不是最好的方法）。但我的想法是使用一个会话和一些我放在管理控制器中的角色。你怎么看，这是一个好方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T09:17:44.830

在安全方面，您不应该重新发明轮子。使用 asp.net 会员提供程序肯定会适合。可能对会员提供者进行一些定制以满足您的需求。

您可以创建角色并将其分配给用户，然后您可以使用修饰的 [Authorize] 属性保护页面或像这样保护所选用户

```
 [Authorize(Roles = "Admin, Super User")] 
```

# web-services - 带有时区信息的 Web 服务日期

> ID：10381166
> 
> 赞同：1
> 
> 时间：2012-04-30T09:15:44.653
> 
> 标签：web-services, date, soap, asmx

我正在从 Excel 查询一个（.net）Web 服务（*从反冲中获取掩护*），它返回一个日期数组。我注意到当天边界上的任何日期都会向前移动 1 小时，我已经检查了服务器上的 Web 服务，并且原始日期是正确的。

然后，我使用 Fiddler 在客户端计算机上查看呼叫，并且在午夜的日期末尾有一个 Z（将其标记为 UTC），而所有其他日期时间都没有。

**UPDATE 上面的说法是错误的，用Z标记的是第一个和最后一个日期，与时间无关。其余的是正确的，客户端只调整了第一个和最后一个日期**

我认为 SOAP 然后将其从 UTC 更改为本地（BST），因此增加了一个小时。

我的问题是如何阻止 Z 被添加到这些日期（或将其更改为本地）？

我检查了 IIS 7.5 中的文化，它设置为 en-GB，服务器设置为 UK。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T11:28:00.150

这有点繁琐，这不是一个真正的答案，但应该给你一些尝试的东西。

一种方法可能是删除偏移量。我没有要拥有的代码，但在类似伪代码中它可能是

```
TimeZone tz = GlobalizationNamespace.GetTimeZone("Greenwich Mean Time");
SomeDateTimeNoOffset = SomeDateTime.AddHours(tz.GetUtcOffset(SomeDateTime)); 
```

这可能会阻止服务将 Z 放在末尾，因为它没有 TimeZone 偏移量。

另一种选择是将服务合同中的属性公开为字符串

```
public string DateTimeNoTzInfo
{
   get { DateTime.ToString('yyyy-MM-ddThh:mm:ss.ttttt') }
} 
```

# java - Drools 最好成绩为空

> ID：10381169
> 
> 赞同：0
> 
> 时间：2012-04-30T09:16:06.190
> 
> 标签：java, drools, drools-planner

我正在使用 Drools 5.4.0.CR1，当我开始使用

```
...
XmlSolverFactory configurer = new XmlSolverFactory();
configurer.configure(SOLVER_CONFIG);
Solver solver = configurer.buildSolver();
solver.setPlanningProblem(initialSolution);
solver.solve();
.... 
```

我有这个输出

```
[exec:exec]
2012-04-30 11:10:46,296 [main] INFO  Solving started: time spend (169), score (-13hard/0soft), new best score (-13hard/0soft), random seed (0).
2012-04-30 11:10:46,338 [main] DEBUG     Step index (0), time spend (213), score (-12hard/0soft), new best score (null), accepted move size (10) for picked step (03-05-2012 P emp:EMPLOYEE1 => L).
2012-04-30 11:10:46,356 [main] DEBUG     Step index (1), time spend (231), score (-12hard/0soft), new best score (null), accepted move size (10) for picked step (02-05-2012 P emp:EMPLOYEE2 => S).
java.lang.NullPointerException
    at org.drools.planner.core.score.buildin.hardandsoft.DefaultHardAndSoftScore.compareTo(DefaultHardAndSoftScore.java:125)
    at org.drools.planner.core.score.buildin.hardandsoft.DefaultHardAndSoftScore.compareTo(DefaultHardAndSoftScore.java:27)
    at org.drools.planner.core.localsearch.decider.acceptor.tabu.AbstractTabuAcceptor.isAccepted(AbstractTabuAcceptor.java:121)
    at org.drools.planner.core.localsearch.decider.acceptor.CompositeAcceptor.isAccepted(CompositeAcceptor.java:58)
    at org.drools.planner.core.localsearch.decider.DefaultDecider.processMove(DefaultDecider.java:159) 
```

这是跟踪日志：

```
2012-04-30 11:40:16,745 [main] INFO  Solving started: time spend (110), score (-13hard/0soft), new best score (-13hard/0soft), random seed (0).
    2012-04-30 11:40:16,781 [main] TRACE         Move score (-13hard/0soft), accepted (true) for move (01-05-2012 M emp:EMPLOYEE1 => P).
    2012-04-30 11:40:16,794 [main] TRACE         Move score (-13hard/0soft), accepted (true) for move (04-05-2012 L emp:EMPLOYEE2 => G).
    2012-04-30 11:40:16,794 [main] TRACE         Ignoring not doable move (01-05-2012 P emp:EMPLOYEE3 => P).
    2012-04-30 11:40:16,807 [main] TRACE         Move score (-13hard/0soft), accepted (true) for move (01-05-2012 M emp:EMPLOYEE4 => S).
    2012-04-30 11:40:16,819 [main] TRACE         Move score (-13hard/0soft), accepted (true) for move (03-05-2012 P emp:EMPLOYEE5 => A).
    ...
    2012-04-30 11:40:16,876 [main] TRACE         Move score (-12hard/0soft), accepted (true) for move (03-05-2012 P emp:EMPLOYEE21 => L).
    2012-04-30 11:40:16,876 [main] TRACE         Ignoring not doable move (01-05-2012 L emp:EMPLOYEE22 => L).
    2012-04-30 11:40:16,876 [main] TRACE         Ignoring not doable move (03-05-2012 N emp:EMPLOYEE23 => N).
    2012-04-30 11:40:16,887 [main] TRACE         Move score (-13hard/0soft), accepted (true) for move (02-05-2012 N emp:EMPLOYEE14 => TS).
    2012-04-30 11:40:16,898 [main] DEBUG     Step index (0), time spend (265), score (-12hard/0soft), new best score (null), accepted move size (10) for picked step (03-05-2012 P emp:EMPLOYEE21 => L). 
```

似乎最好的解决方案没有使用分数值进行更新，但我们将解决方案类定义为您的示例（皇后示例），其中包含 getter 和 setter 分数。

有人对“新的最佳成绩”是否为空有任何建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T07:02:36.933

疯狂的猜测，但是`cloneSolution`您的解决方案是否可靠地克隆了分数和**所有**其他问题事实？

我在那里经历了一些无声的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T09:30:21.767

那条线是不可能的（理论上）：

```
2012-04-30 ...     Step index (0), ..., new best score (null), ... 
```

调试并找出产生空分数的原因。这绝对是一个错误（在规划器或您的代码中）。

我以前没见过这个。您是否使用自定义分数定义？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T06:32:26.597

我遇到了与上面相同的错误，我可以通过简单地在我的解决方案类的克隆中设置分数来解决它，就像----->

```
public EmployeeRoster cloneSolution() {
    EmployeeRoster employeeRoster=new EmployeeRoster();
    employeeRoster.id=id;
    employeeRoster.shiftList=shiftList;
    employeeRoster.employeeList=employeeList;
    employeeRoster.score=score;
    return employeeRoster;
} 
```

> 在 org.drools.planner.core.score.buildin.hardandsoft 的 org.drools.planner.core.score.buildin.hardandsoft.DefaultHardAndSoftScore.compareTo(DefaultHardAndSoftScore.java:125) 的线程“主”java.lang.NullPointerException 中的异常.DefaultHardAndSoftScore.compareTo(DefaultHardAndSoftScore.java:27) at org.drools.planner.core.localsearch.decider.acceptor.tabu.AbstractTabuAcceptor.isAccepted(AbstractTabuAcceptor.java:121) at org.drools.planner.core.localsearch.decider .DefaultDecider.processMove(DefaultDecider.java:159) at org.drools.planner.core.localsearch.decider.DefaultDecider.doMove(DefaultDecider.java:129) at org.drools.planner.core.localsearch.decider.DefaultDecider.decideNextStep (DefaultDecider.java:103) 在 org.drools.planner.core.localsearch.DefaultLocalSearchSolverPhase。在 org.drools.planner.core.solver.DefaultSolver.runSolverPhases(DefaultSolver.java:183) 处解决(DefaultLocalSearchSolverPhase.java:57) 在 org.drools.planner.core.solver.DefaultSolver.solve(DefaultSolver.java:151)

# image - 图像 onclick 事件不起作用

> ID：10381176
> 
> 赞同：0
> 
> 时间：2012-04-30T09:16:19.147
> 
> 标签：image, onclick, jquery

我试图为我的图像制作一个 onclick 事件，但它不起作用..警报没有显示..

```
$(document).ready(function(){
    $('img.closeAttrIcon').click(function(){
        alert("ww");
    });
}); 
```

即使我尝试这样用..bind ..没有希望...

```
$(document).ready(function(){
    $('img.closeAttrIcon').bind('click',function(){
        alert("ww");
    });
}); 
```

html 将在此事件期间创建：

```
$('a#btnAddStdntAttr').click(function(){
    var newAttr = '<div class="attrParent"><br class="clear"><label></label><input type="text" id="stdntAttributeKey1" maxlength="250" style="width: 13%;" name="stdntAttributeKey1"/>';
    newAttr+= '<input type="text" id="stdntAttributeValue1" maxlength="250" style="width: 13%;" name="stdntAttributeValue1"/>';
    newAttr+= '<img src="<c:url value="/static/images/closeIcon.png"/>" onclick="removeStdntAttr();" class="closeAttrIcon" alt="Close" title="Close" /></div>';
    $(this).after(newAttr);
}); 
```

我在这里做错了什么..请帮忙..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T10:58:05.220

它不起作用，因为您是在第一次创建 DOM 之后注入它，为此您需要使用[`live`](http://api.jquery.com/live/)（如果使用 til jQuery 1.7）或[`on`](http://api.jquery.com/on/)使用（1.7+）绑定方法

将您的电话更改为：

```
$(function(){
   $('img.closeAttrIcon').live('click', function() {
        alert("ww");
    });
}); 
```

如果您使用的是 jQuery 1.7+，那么您也可以这样做：

```
$(document).on('click', 'img.closeAttrIcon', function() {
    alert("ww");
}); 
```

# php - PHPEXCEL：阅读电子表格->审核并应用格式->保存审核的电子表格。内存问题

> ID：10381178
> 
> 赞同：1
> 
> 时间：2012-04-30T09:16:29.183
> 
> 标签：php, phpexcel

关于 PHPEXCEL 内存问题的记录很多，所以我的问题假定已应用“块”中的读取 - 正如 Mark Ba​​ker 所描述的那样。我的具体情况是这样的：
- 读取上传到数据库记录的“原始”电子表格（工作正常）
- 检索所述电子表格，使用 PHPExcel 打开，并审核单元格
- 读取行和列并查找条件。
- 如果单元格有 [信息|警告|错误] (a) 应用条件格式并插入单元格注释（工作正常）
- 对所有行和列执行此操作。在完成之前耗尽内存。
- 将格式化的电子表格保存到服务器目录中，以便用户可以下载并查看所有嵌入的错误警告或信息项 - 如果我限制读取的行数，也可以正常工作。

电子表格不是特别大的 130 行和 60 列。

这就是我尝试过的：
- 阅读“块” ala Mark Ba​​ker。问题是过滤器只返回行的子集。与块规则相关的那些。因此，当我在块读取和处理结束时进行保存时，只保存那些行，而不是整个电子表格。
- 使用单元缓存（

```
$cacheMethod = PHPExcel_CachedObjectStorageFactory::cache_to_discISAM;
PHPExcel_Settings::setCacheStorageMethod($cacheMethod); 
```

) 允许我读取和更新每一行和相关的单元格，但是当我去做时，`$objWriter->save(str_replace('.php', '.xlsx', $theDIRandFileName)`我在 XMLWriter.php 中遇到了内存问题：

```
Fatal error: Allowed memory size of 18874368 bytes exhausted (tried to allocate 238592 bytes) in ... /PHPExcel/Shared/XMLWriter.php on line 100 
```

啊！

任何帮助将不胜感激。现在看来，我唯一要尝试的是打开两个副本，使用块方法，但要弄清楚如何读取未经编辑的版本但更新块版本。一定有更好的方法。

# c# - 如何确定 DataGridView.CellFormatting 事件是否有任何事件处理程序？

> ID：10381179
> 
> 赞同：0
> 
> 时间：2012-04-30T09:16:34.597
> 
> 标签：c#, datagridview, event-handling

我正在编写一个继承自 DataGridView 的控件。我想做的一件事是处理在不处理 CellFormatting 事件*（并自己进行格式化）*的情况下不使用列的格式提供程序的错误。

我想我会写一个“OnCellFormatting”方法，上面写着*“如果有列格式提供程序，并且没有 CellFormatting 事件处理程序，请进行格式化”*。

重要的一点（我认为）是*“......并且没有 CellFormatting 事件处理程序”*。

现在，过去当我用事件编写控件时，我做过这样的事情：

```
 public event EventHandler SomethingHappened;

  protected void OnSomethingHappened(EventArgs e)
  {
     EventHandler handler = this.SomethingHappened;
     if (handler != null) handler(this, e);
  } 
```

这很好用，我的理解是这种模式确定处理程序是否附加到事件，如果是，则调用这些处理程序。很公平，但为什么我不能这样做：

```
 protected void OnCellFormatting(EventArgs e)
  {
     EventHandler handler = this.CellFormatting;
     if (handler == null) DoSomething();
  } 
```

错误是“事件'System.Windows.Forms.DataGridView.CellFormatting'只能出现在+=或-=的左侧

这种（类型）事件有什么不同？

如果我去事件的定义，并创建我自己的，即。

公共事件 DataGridViewCellFormattingEventHandler CellFormatting2

...编译器很乐意将其分配给我的“处理程序”变量，所以我的问题是 - CellFormatting 事件有什么不同*（并且假设还有许多其他事件）*我无法确定它是否有任何事件处理程序?

谢谢，罗斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T09:23:41.067

只有声明事件的类才能完全访问它。

例如，您不能从其他类调用事件——甚至是派生类。

您处于这种情况，因为您来自`DataGridView`.

* * *

您也许可以使用反射：

[如何通过 .NET (c#) 中的反射引发事件？](https://stackoverflow.com/questions/198543/how-do-i-raise-an-event-via-reflection-in-net-c)

[MSDN：Type.GetEvent 方法](http://msdn.microsoft.com/en-us/library/system.type.getevent(v=vs.100).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T09:26:19.007

这表明无法执行分配，因为它是只读的。也许您可以尝试将处理程序声明为私有？

# c# - dll 服务参考上的新关键字

> ID：10381181
> 
> 赞同：2
> 
> 时间：2012-04-30T09:16:48.777
> 
> 标签：c#, service-reference

我创建了包含服务引用的 ComVisible .Net (C#) dll。尝试从外部 COM 客户端 (VBScript) 访问 dll 时，每当我创建对象时都会引发异常。

抛出的异常是 InvalidOperationException (0x80131509)。

经过短暂的调查，我注意到它在创建服务引用对象时失败（“新建”它）。

1.  下面代码中使用的服务引用对象名称为`ServiceClient`
2.  `ServiceClient`对于 C# dll 是私有的
3.  尝试在构造函数中创建引用也失败了
4.  从类或构造函数中删除“new”关键字会使代码通过，
5.  该服务已启动并正在运行

dll代码：

```
namespace UIIdentifier.Updater
{
    [ClassInterface(ClassInterfaceType.AutoDispatch)]
    public class Client
    {

        [ComVisible(false)]
            //<<--This throws the exception  -->>
        private ServiceClient uiSpySrv = new ServiceClient(); 

        [ComVisible(true)]
        public string hello()
        {
            return "hello";
        }
    }
} 
```

客户端代码：

```
Dim oUpdater
Set oUpdater = CreateObject("UIIdentifier.Updater.Client")

MsgBox oUpdater.hello 
```

有什么建议为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T11:23:18.623

最可能的原因是 WCF 无法从 app.config 文件加载服务配置。

当您的库作为 COM 对象加载时，不存在 app.config 文件。

最好的办法是在代码中创建 WCF 客户端，而不是使用配置文件。这很简单。你可以在这里看到它是如何完成的：[没有配置文件的 WCF 配置](https://stackoverflow.com/questions/54579/wcf-configuration-without-a-config-file)

使用在 app.config 文件中配置的 WCF 服务在调试器中运行您的示例代码会生成以下异常，我认为这是不言自明的。

> System.InvalidOperationException 发生
> 在 ServiceModel 客户端配置部分中找不到引用合同“ServiceReference1.IService1”的默认端点元素。这可能是因为没有为您的应用程序找到配置文件，或者因为在客户端元素中找不到与此协定匹配的端点元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T09:38:12.167

我已成功将您的 C# 代码编译为类库，并将其注册到 COM。我运行了示例 .vbs 脚本，出现了一个带有文本“hello”的消息框

ServiceClient 的构造函数或构造函数中调用的某些代码是否会引发异常？

在我的示例项目中，ServiceClass 只是一个空类。

```
    [ComVisible(假)]
    公共类 ServiceClient{}

```

**您可以使用 Visual Studio 调试您的 COM 库。**

*   打开类库的属性
*   选择调试选项卡并将启动操作更改为：启动外部程序。
*   输入“c:\windows\system32\wscript.exe”作为外部程序。
*   输入 vbs 文件的路径作为命令行参数。

**打破所有例外**

*   在 Visual Studio 的调试菜单下选择异常。
*   勾选每种异常类型的抛出框。

开始调试。当引发 InvalidOperation 异常时，Visual Studio 应该会中断，然后您可以检查堆栈跟踪。

# linq - 创建表达式树时如何在两侧（即表达式左侧和表达式右侧）使用 DateTime.Parse() 方法？

> ID：10381182
> 
> 赞同：1
> 
> 时间：2012-04-30T09:16:49.480
> 
> 标签：linq, expression-trees

```
lstReport=lstReport.Where(o=>DateTime.Parse(o.Field)==DateTime.Parse(o.FieldValue));
//I am creating above statement dynamically like this 
var variable = Expression.Variable(typeof(Report));
foreach (SQWFilterConstraint oFC in oFilter.LstFilterConstraint) //using this collection I am making dynamic query
{
    Expression  ExprLeft =Expression.Property(variable, oFC.Field);
    MethodInfo methodDateTimeParse = typeof(DateTime).GetMethod("Parse", newType[] { typeof(string) });
    var methodParam = Expression.Parameter(typeof(string), oFC.FieldValue);
    Expression exprRight = Expression.Call(methodDateTimeParse, methodParam ); //This is working fine for right side
}
var props = new[] { variable };
var lambda = Expression.Lambda<Func<Report, bool>>(ExprPrev, props).Compile();
ReportList = ReportList.Where(lambda).ToList(); 
```

所以我需要`DateTime.Parse`在左侧的字段上应用该方法（在运算符左侧上方加下划线和粗体）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:50:11.183

不确定您要达到的目标。

1) foreach 有什么用？必须比较的每个属性？

2) ExprPrev 从未被声明过。

无论如何，创建该表达式的方法如下。

```
[TestMethod]
        public void TestDateTimeParse()
        {
            var variable = Expression.Variable(typeof (Report));

            var parseMethodInfo = typeof (DateTime).GetMethod("Parse", new[] {typeof (string)});
            var left = Expression.Call(parseMethodInfo, Expression.Property(variable, "Field"));
            var right = Expression.Call(parseMethodInfo, Expression.Property(variable, "FieldValue"));
            var equals = Expression.Equal(left, right);

            var expression = Expression.Lambda<Func<Report, bool>>(equals, variable).Compile();

            var target = new Report {Field = DateTime.Now.ToString()};
            target.FieldValue = target.Field;
            expression(target).Should().Be.True();
        }

        public class Report
        {
            public string Field { get; set; }
            public string FieldValue { get; set; }
        } 
```

# facebook - 我的应用的粉丝和非粉丝页面

> ID：10381185
> 
> 赞同：2
> 
> 时间：2012-04-30T09:17:03.427
> 
> 标签：facebook, facebook-like

我希望我的应用程序有两个备用屏幕，一个用于非粉丝用户（那些没有按下按钮的用户），一个用于粉丝。在不要求用户授权我的应用程序的情况下如何做到这一点？我必须先使用页面或页面标签吗？或者是其他东西？

我尝试使用 JS SDK 和 $_REQUEST["signed_request"] 但如果用户“喜欢”该应用程序，则没有任何信息。我也尝试了 FQL 方法，但大多数表都要求 user_likes 权限。

我完全迷失了，任何帮助都会感激不尽。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T10:38:54.450

您可以从**signed_request**参数中获取此信息，该参数将添加到您提供的页面选项卡或画布 URL 上的应用程序请求 URL。signed_request 参数包含 JSON 数据，其中包括安装您的应用程序的页面的 id，如果用户已经喜欢该页面，则附加一个**喜欢的字段。**您可以使用此字段将用户重定向到您的应用程序的适当视图。

[有关更多信息，请参阅https://developers.facebook.com/docs/appsonfacebook/pagetabs/](https://developers.facebook.com/docs/appsonfacebook/pagetabs/)上标有“与 Facebook API 集成”的部分。

# javascript - 使用 YUI 3 格式化输入数据

> ID：10381188
> 
> 赞同：1
> 
> 时间：2012-04-30T09:17:13.503
> 
> 标签：javascript, input, yui

有没有办法使用 yui3 在输入中应用掩码？

是否可以有一个用户只能输入电话号码的字段？如果是这样，怎么办？

多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T00:55:22.320

I would say that your best bet is to have an onChange or onKeyup (or even onValuechange - a YUI construct) handler listening on that input. Whenever it detected a change, you would run a formatting function on the current value of the input, which formatted it in the way you wanted.

if you want to be light-handed about it, just put the dashes in where they go, for example : `"1105551212" --> "110-555-1212"`

if you want to be heavy-handed about it, the event handler could literally strip out any non-numeric, or non-dash characters, which effectively prevents the user from entering bad input, though they could of course put in a non-existent phone number.

one step further: do both. strip out invalid characters, and do auto-formatting.

# ios - SharedInstance 的全局变量不是最新的

> ID：10381191
> 
> 赞同：0
> 
> 时间：2012-04-30T09:17:22.493
> 
> 标签：ios, uitableview, global-variables, uitabbar

我对全局变量有一点问题。这是class.h：

```
#import <Foundation/Foundation.h>

@interface GlobalVariables : NSObject{
    NSMutableArray *categories;
}

@property (nonatomic, retain) NSMutableArray *categories;

+ (GlobalVariables *)sharedInstance;

@end 
```

这是 class.m 文件：

```
#import "GlobalVariables.h"

@implementation GlobalVariables

@synthesize categories;

+ (GlobalVariables *)sharedInstance
{
    // the instance of this class is stored here
    static GlobalVariables *myInstance = nil;

    // check to see if an instance already exists
    if (nil == myInstance) {
        myInstance  = [[[self class] alloc] init];
        // initialize variables here
    }
    // return the instance of this class
    return myInstance;
}

@end 
```

所以我现在有 4 个选项卡`UITableViewController`，每个选项卡都需要上面类别数组中的数据。

问题是，在第一个选项卡中，更新算法正在运行以更新此数组，但是如果我重新启动应用程序，此更新仅在选项卡 2 中可用。

我该怎么做才能立即在所有其他选项卡中看到这些更改？

# windows - 如何在 Windows 中从 WLAN 捕获信标帧？

> ID：10381193
> 
> 赞同：6
> 
> 时间：2012-04-30T09:17:24.110
> 
> 标签：windows, frames, wifi, access-point

我在 Windows 上使用本机 Wifi api 以编程方式使用 WLAN 执行一些任务。但是，我的问题是它暴露了有限的功能集。我想访问提供接入点负载、通话时间等的信标帧的某些字段。可以使用哪些工具来做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T08:01:06.887

我会看看[winpcap](http://www.winpcap.org)。它能够捕获 802.11 帧。但是，在 Windows 中，芯片组驱动程序可能不允许将 WLAN 设置为监控模式。如果是这种情况，那么 winpcap 可能无法获得有关信标帧的必要信息。

还有一个商业产品[airpcap](http://www.riverbed.com/us/products/cascade/wireshark_enhancements/airpcap.php)，它似乎与驱动程序和硬件捆绑在一起，可以在 Windows 中进行全面的 wifi 监控。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-10T21:56:08.677

有一种方法可以在 Windows 下使用 Wireshark**捕获 WiFi 数据包。**您必须安装[Acrylic WiFi 软件](https://www.acrylicwifi.com/en/acrylic-wifi-free/)

Acrylic WiFi 是一款适用于 windows 的 WiFi 嗅探器，它安装了一个 NDIS 驱动程序，该驱动程序在监控模式下捕获 wlan 数据包，并添加了对 wireshark 和 Cain & Abel 捕获 WiFi 数据包的支持。

一旦安装了 Acrylic，您必须以管理员身份启动 Acrylic、wireshark 或 Cain 并选择您的 NDIS WiFi 接口。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-29T15:39:40.927

在 Windows Vista 或更高版本中，您可以使用“支持原始 802.11 流量”的 Npcap。Npcap 是使用 NDIS 6 Light-Weight Filter (LWF) 对 WinPcap 的更新。

[https://wiki.wireshark.org/CaptureSetup/WLAN#Starting_from_Windows_Vista:_Npcap](https://wiki.wireshark.org/CaptureSetup/WLAN#Starting_from_Windows_Vista:_Npcap)

# facebook - 启用 Facebook Connect 以登录我的移动网站

> ID：10381198
> 
> 赞同：0
> 
> 时间：2012-04-30T09:18:03.763
> 
> 标签：facebook, mobile

我想启用**Facebook 连接**以登录我的移动网站。

我该怎么做？

提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T10:33:12.560

查看 Facebook 开发人员文档中的指南。你可以在这里看到它：[https](https://developers.facebook.com/docs/guides/web/#login) ://developers.facebook.com/docs/guides/web/#login 。

# c++ - 如何确保最近创建的区域指向 NULL？

> ID：10381200
> 
> 赞同：-2
> 
> 时间：2012-04-30T09:18:20.303
> 
> 标签：c++

如何确保对于堆区域上每个分配的新空间，最近创建的指针向量元素指向 NULL ？

```
 Ex:
   vector < Sometype* >

   vector ----------------------
          |  |  |  | ...       |
          ----------------------

   new element is pushed back but no available area so double space

   index                         x  x+1            y
   vector -------------------------------------------
          |  |  |  | ...       |   |   | ...        |
          -------------------------------------------

                               ^^^^^^^^^^^^^^^^^^^^^
                                 recently created

         x, x+1, ... y all points to the NULL 
```

我希望最近创建的部分上的每个空间都指向 NULL ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T09:25:21.293

如果我正确理解了您的问题，一个简单的解决方案是调用`resize()`自己`NULL` [作为第二个参数](http://en.cppreference.com/w/cpp/container/vector/resize)传递，用作新创建项目的默认值：

```
if (v.size() == v.capacity()) //vector is full
{
    //compute the new size
    size_t newSize = 2 * v.size();

    //second argument is the default value for newly added items
    v.resize(newSize, NULL); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T09:27:28.600

这个新空间是向量容量的一部分，但不是大小的一部分。您不需要关心它包含什么值，因为无论如何您都不允许访问它。除了您推回的一个值之外，额外的空间不是“向量的元素”，它只是未使用的空间。

就标准而言，如果需要，实现可以使用它来存储有意义的东西。例如，一个实现可以合法地将一些引人注目的值存储在未使用的内存中，这与您希望未使用的内存包含空指针的愿望相冲突。

你可以这样写代码：

```
v.push_back(some_value);
if (v.capacity() > v.size()) {
    size_t oldsize = v.size();
    v.resize(v.capacity(), NULL);
    v.resize(oldsize);
} 
```

无法保证一旦您再次调整大小，这实际上会将内存设置为 0，但它可能会。所以它可能足以用于调试。如果您的目的不是调试，请说出它是什么，因为如果不是调试，那么您的目的是非法的，或者我们中的一个人误解了某些东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T09:28:25.010

为什么你需要它为 NULL 除非它是被构造的？例如，如果您创建一个包含 10 个对象的向量，然后将额外的第 11 个项目推送到向量上，则该向量可能会为另外 10 个项目*保留*足够的空间，但您不能使用这些项目，除非您将项目推送到向量上以增加其大小，或者你打电话`resize`。

`size`不一样`capacity`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T09:28:47.353

你为什么需要那个？`vector`无论如何都不允许您访问这些元素。其容量的扩展是向量的实现细节，与分配空间中元素的值无关。`push_back`一旦你在那里，或者`resize`具有给定值的向量，这些元素将被覆盖。

向量之间有一个重要的区别`capacity`。`size`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T09:36:17.833

当您将新元素推入向量并且没有空间时，尽管 std::vector 为新元素分配了额外的内存（类似于 reserve() 调用），但它不会创建它们（不调用构造函数）。请参阅[展示位置“新”](http://www.parashift.com/c++-faq-lite/dtors.html#faq-11.10)以了解其工作原理。没有真正的方法来为新元素强制执行某些值，因为没有新元素 - 只有为未来元素分配的原始内存块。通过使用 std::vector::at 而不是 operator[] 您可以确保您正在访问有效范围内的元素。

如果您通过调用[std::vector::resize](http://www.cplusplus.com/reference/stl/vector/resize/)自己调整矢量大小，则只需在第二个参数中为新元素提供默认值。但是，有一个问题。当您自己调整 std::vector 的大小并且不为 std::vector::resize 的第二个参数提供值时，如果存储在 std::vector 中的值具有构造函数并对它们进行零初始化，则 std::vector 将对新元素进行值初始化除此以外。这意味着，如果你这样做`std::vector<int*> v; v.resize(200);`， v 的所有新元素都将被初始化为零。有关详细信息，请参阅[此](https://stackoverflow.com/a/9481693/271376)答案。

# file-io - 使用 vb 脚本读取和存储数据

> ID：10381202
> 
> 赞同：0
> 
> 时间：2012-04-30T09:18:40.137
> 
> 标签：file-io, vbscript

我有一个包含以下内容的文件

```
 aaaaaaaaa    filename1.txt
  bbbbbbbbbb   filename2.dat 
```

我想读取这个文件并将数据单独存储到相关文件中。

例如：- aaaaa ---> filename1.txt

有人可以告诉我这样做的方法吗？如果您有任何示例，那将是一个真正的帮助！

子主

```
Set ctlpath = "\\Download_Directory\CA.ctl"
Set subDirectory = "AUB"
Set MkrExtention = ".mkr"

ReadCtl(ctlpath,subDirectory,MkrExtention )

End Sub

 Function ReadCtl(ctlFileName,ctlSubDirectory,MarkerFileExtension)

Const ForReading = 1
Const ForWriting = 2

Dim lineData,hashValue,fileName,fileToWrite

Set objFSO = CreateObject("Scripting.FileSystemObject")
If objFSO.FileExists(ctlFileName) Then

Set objFile = objFSO.OpenTextFile(ctlFileName, ForReading)

Do Until objFile.AtEndOfStream

    lineData = objFile.ReadLine
    hashValue =Split(lineData,"  ") (0)
    fileName =Split(lineData,"  ") (1)

    WriteFileText("\\Download"+ctlSubDirectory+"
\"+fileName+MarkerFileExtension,hashValue)

Loop

objFile.Close
objFSO.Close

End If

ReadCtl = True

End Function

Function WriteFileText(sFilePath, sText)

Dim objFSO1 'As FileSystemObject
Dim objTextFile 'As Object

Set objFSO1 = CreateObject("Scripting.FileSystemObject")
Set objTextFile = objFSO1.CreateTextFile(sFilePath, True)

' Write hash data in to the file .mkr file
objTextFile.Write (sText)

objTextFile.Close
objFSO1.Close

 End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T15:10:21.067

好久没问这个了，没想到没人回答，很简单。希望你还在，反正这里供参考。当然，这不是真正的哈希，例如在 Ruby 中，但我保留了足够的脚本以便您进行比较。

```
ReadCtl("file2hash1.txt")

function ReadCtl(ctlFileName)
  const ForReading = 1, ForWriting = 2, ForAppending = 8, createIfNeeded = true
  set oFso = createObject("Scripting.FileSystemObject")
  Set oRegExpre = new RegExp
  oRegExpre.Global = true
  oRegExpre.Pattern = "(.*) +(.*)"
  if oFso.FileExists(ctlFileName) then
    set objFileRead  = oFso.OpenTextFile(ctlFileName, ForReading)
    do until objFileRead.AtEndOfStream
      lineData = objFileRead.ReadLine
      hashValue = oRegExpre.Replace(lineData,"$1")
      fileName  = oRegExpre.Replace(lineData,"$2")
      if oFso.fileExists(fileName) then
        modus = ForAppending
      else
        modus = ForWriting
      end if
      set objFileWrite = oFso.OpenTextFile(fileName, modus, createIfNeeded)
      objFileWrite.writeLine hashValue
      objFileWrite.close
    loop
    objFileRead.close
  end if
  set oFso = nothing
end function 
```

# c# - 全年视图的日历

> ID：10381205
> 
> 赞同：1
> 
> 时间：2012-04-30T09:18:54.097
> 
> 标签：c#, asp.net, ajax, calendar

我有以下要求：

全年的日历（墙壁计划）并从数据库中指定我的事件。

是否有提供年视图功能的免费控件？

我已经搜索过，我发现的只是日、周和月视图。甚至是`telerik`进度控制。

请问有什么建议或建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T10:06:43.933

据我所知，没有任何免费的完整日历视图控制。Stackoverflow 上有一个类似的线程，得出了相同的结论：

[任何可用的年视图调度程序和日历 asp.net 控件](https://stackoverflow.com/questions/9397964/any-year-view-scheduler-and-calendar-asp-net-control-available-there)

因此，我建议您使用数千个 jquery 月度日历控件中的一个，并根据您的需要对其进行自定义，如果您不想在适当的解决方案上花费一些钱，这应该是您唯一的选择。

我想您已经找到了一些最有趣的控件，这些控件可以为您提供每月视图。无论如何，我会发布一些好的：

[http://www.devcurry.com/2010/06/5-jquery-calendar-plugins-that-c ​​an-be.html](http://www.devcurry.com/2010/06/5-jquery-calendar-plugins-that-can-be.html) [http://www.queness.com/post/656/10-beautiful-jquery-and -mootool 日历插件](http://www.queness.com/post/656/10-beautiful-jquery-and-mootool-calendar-plugins)

还有另一个版本（不是免费软件）但有一个免费软件版本： [http](http://web2cal.com/ajaxeventscalendar/calendar-demo/912-premium-demo/172-year-view-demo) ://web2cal.com/ajaxeventscalendar/calendar-demo/912-premium-demo/172-year-view-demo --> 给它试试看，对我来说很有希望！！！

我希望这个答案可以帮助您解决您的问题。

问候

# javascript - 使用二维数组从 MySQL 中检索数据

> ID：10381209
> 
> 赞同：0
> 
> 时间：2012-04-30T09:19:01.880
> 
> 标签：javascript, jsp, google-maps, google-maps-api-3

我正在研究谷歌地图 api v3 代码。

我将所有标记保存在 MySQL 中，我想检索这些标记并将它们显示在地图上。我正在寻找执行此操作的代码，但我发现所有代码都使用 xml 文件来保存检索到的数据。我的想法不同，我可以从 MySQL 中检索数据并将其保存在二维数组中。

我想知道这是否是一个坏主意并且会使我的网站变慢？

我的代码中的这些部分：

(markersDAO.java)

```
 String searchQuery = "select * from map";
     try 
        {
            //connect to DB 
            currentCon = ConnectionManager.getConnection();
            stmt=currentCon.createStatement();
            rs = stmt.executeQuery(searchQuery);            
            int i=0;
            // if user does not exist set userExits to false
            while (rs.next()){
                m[i][0]=rs.getString(1);
                m[i][1]=Double.toString(rs.getDouble(2));
                m[i][2]=Double.toString(rs.getDouble(3));
                i++;
            }            
        }
     catch (Exception ex) 
        {
            System.out.println("Datamap failed 2: An Exception has occurred! " + ex);
        }

 return m; 
```

**（谷歌地图.jsp）**

```
 <% markersDAO u= new markersDAO();
          String[][] locations= u.dataMap();%>

  <script type="text/javascript">

    var map = new google.maps.Map(document.getElementById('map'), {
      zoom: 10,
      center: new google.maps.LatLng(-33.92, 151.25),
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    var marker;
    var f=0;   

    var myOptions= {

           disableAutoPan: false
            ,maxWidth: "auto"
            ,pixelOffset: new google.maps.Size(0, 0)
            ,zIndex: null
            ,infoBoxClearance: new google.maps.Size(1, 1)
            ,isHidden: false
            ,pane: "floatPane"
            ,enableEventPropagation: false
    };
   <%for (int i = 0; i < locations.length; i++) { %> 

  marker = new google.maps.Marker({
    position: new google.maps.LatLng(<%=locations[i][1]%>, <%=locations[i][2]%>),
    map: map,
  });
  var infobox = new InfoBox(myOptions);

  google.maps.event.addListener(marker, 'mouseover', (function(marker,f) {
    return function() {    
       infobox.setContent('<%=locations[i][0]%>');
      infobox.open(map, marker);            
    }
    f++;
  })(marker, f));

   <% } %>
  </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T09:32:25.103

我认为你的想法可以很好地工作，我所做的是将数据保存在 JSON 对象上，在我生成一个包含所有标记信息的 JSONArray 并从 Javascript 函数读取该数据以在地图上创建标记之后，我会做什么done 使用 200 个标记快速工作。一些代码可以给你一些不同的想法：

```
JSONArray ajson = new JSONArray();
while(rset.next()){
    JSONObject json = new JSONObject();
    json.put("id_coord", rset.getString("IDCOORD"));
    json.put("nombreequipo", rset.getString("MarkerName"));
    json.put("lat", rset.getDouble(5));
    json.put("long", rset.getDouble(6));
    ajson.put(json);
} 
```

在 javascript 上解析 JSON

```
var data = JSON.parse(response);
for (var i=0; i<data.length; i++) {
    displayLocation(data[i]);
} 
```

以及显示位置功能：

```
function displayLocation(location){
    var latLng = new google.maps.LatLng(parseFloat(location.latitud), parseFloat(location.longitud));
    var marker = new google.maps.Marker({
        position: latLng,
        map: map,
        icon: imagen,
        draggable: false,
        visible: true,
        title: location.nombreequipo
    });
} 
```

# objective-c - CoreData，我的实体是空的..为什么？

> ID：10381215
> 
> 赞同：0
> 
> 时间：2012-04-30T09:19:20.697
> 
> 标签：objective-c, core-data, entity

你能帮我告诉我为什么我的实体是空的吗？

我正在用我的 JSON 填充我的实体，我的实体的属性与我的 JSON 中的名称相同

这是我填充我的实体的代码：

```
 NSManagedObjectContext *cxt = [self managedObjectContext];
    NSManagedObject *newBoxes = [NSEntityDescription insertNewObjectForEntityForName:@"Boxes" inManagedObjectContext:cxt];
    NSDictionary *parsedFeed = [[newBoxes entity] attributesByName];
    for (NSString *key in parsedFeed) {
        id value = [parsedFeed objectForKey:key];
        // Don't assign NSNull, it will break assignments to NSString, etc.
        if (value && [value isKindOfClass:[NSNull class]])
            value = nil;

        @try {
            [Boxes setValue:value forKey:key];
        } @catch (NSException *exception) {
            // Exception means such attribute is not defined in the class or some other error.
        }
    }

    NSError *err;
    if (![cxt save:&err]) {
        NSLog(@"An error has occured: %@", [err localizedDescription]);
    }

NSLog(@"ENTITY  %@", newBoxes); 
```

这是我的 NSLOG 的结果：

```
2012-04-30 11:16:23.352 Wonder[9987:fb03] ENTITY  <Boxes: 0x6d87330> (entity: Boxes; id: 0x6d8b010 <x-coredata://EFDCC0BA-644D-42AC-8DE8-452F02B7C680/Boxes/p26> ; data: {
    codeArticle = nil;
    descriptionBox = nil;
    dlu = 0;
    kindBox = nil;
    nameBox = nil;
    nbActivities = 0;
    note = 0;
    priceBox = 0;
    texteMarketing = nil;
    typeBox = nil;
}) 
```

这是我的 JSON：

```
{
    "totalBox":{
        "boxes":[
        {
         "codeArticle": "WPCDE01C412L",
         "nameBox": "boxName",
         "texteMarketing": "boxTextMarketing",
         "descriptionBox" : "boxDescritpion",
         "nbActivities": 1650,
         "kindBox": "boxKind",
         "typeBox": "boxType",
         "priceBox": 20,
         "dlu": 2014,
         "note": 3
        },
        {
         "codeArticle": "BOOYAKA!!",
         "nameBox": "boxNameName",
         "texteMarketing": "boxTextMarketing",
         "descriptionBox" : "boxDescritpion",
         "nbActivities": 1650,
         "kindBox": "boxKind",
         "typeBox": "boxType",
         "priceBox": 39,
         "dlu": 2014,
         "note": 3
         }
        ]
            }
} 
```

这是我的实体：

![在此处输入图像描述](../Images/42ffdcf001d35d59a60ff62984c4fa88.png)

编辑：我给了我的 JSON，所以我应该“告诉”我的 coredata 它应该读什么来填充我的实体，对吗？

```
dataToDisplay = [[NSMutableArray alloc] init];

//récupération du chemin vers le fichier contenant le JSON
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"JSON" ofType:@"txt"];

//création d'un string avec le contenu du JSON
NSString *myJSON = [[NSString alloc] initWithContentsOfFile:filePath encoding:NSUTF8StringEncoding error:NULL];   

//Parsage du JSON à l'aide du framework importé
NSDictionary *json    = [myJSON JSONValue];

//récupération  du total des Boxes
NSDictionary *resultats    = [json objectForKey:@"totalBox"]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T09:50:39.073

> 我正在用我的 JSON 填充我的实体，我的实体的属性与我的 JSON 中的名称相同

不在您在问题中发布的任何代码中。

这一行：

```
NSManagedObject *newBoxes = [NSEntityDescription insertNewObjectForEntityForName:@"Boxes" inManagedObjectContext:cxt]; 
```

创建一个新的**空**托管对象。没有数据。

这段代码：

```
NSDictionary *parsedFeed = [[newBoxes entity] attributesByName]; 
```

获取托管对象的所有属性名称和属性描述的字典。这是模型的一部分。我不知道你为什么要费心去访问它。

这段代码

```
for (NSString *key in parsedFeed) {
    id value = [parsedFeed objectForKey:key];
    // Don't assign NSNull, it will break assignments to NSString, etc.
    if (value && [value isKindOfClass:[NSNull class]])
        value = nil;

    @try {
        [Boxes setValue:value forKey:key];
    } @catch (NSException *exception) {
        // Exception means such attribute is not defined in the class or some other error.
    }
} 
```

很奇怪。您访问属性描述（它告诉 Core Data 诸如属性是字符串、数字等），然后`Boxes`为该值设置一个键。我猜`Boxes`是`NSManagedObject`你创建的子类来模拟一个盒子。如果您还没有决定捕获异常，我猜您的代码会在此处崩溃并显示“不响应选择器”。

基本上，您在代码中所做的任何事情都没有任何意义。您需要做的是获取 JSON 的 NSDictionary，请参阅[NSJSONSerialization](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)，并在您当前使用 parsedFeed 的地方使用它。然后您的代码或多或少会起作用（替换`Boxes`为`newBoxes`. 但是，我将建议进行一些修改：

```
NSDictionary *parsedFeed = [NSJSONSerialization JSONObjectWith....]; // can use an NSData or a stream
for (NSString *key in parsedFeed) {
    id value = [parsedFeed objectForKey:key];
    // Don't assign NSNull, it will break assignments to NSString, etc.
    if ([value isEqual:[NSNull null]]) // nil is already handled OK
        value = nil;

    if ([legalKeys containsObject: key]) // see comment below
    {
        [newBoxes setValue: value forKey: key];
    } 
    else
    {
        // report bad data
    }       
} 
```

`legalKeys`是您在源代码中创建的集合，说明可以从 JSON 合法设置哪些键，这可能来自外部。这是一种验证形式，可防止不应​​该设置的键被错误数据设置。例如，`NSObject`有一个名为`scriptingProperties`. 您可能不希望传入的 JSON 设置它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T09:25:11.317

在上面的代码中，您尝试在非对象上设置值。

```
[Boxes setValue:value forKey:key]; 
```

应该

```
[newBoxes setValue:value forKey:key]; 
```

我建议你看看[http://rentzsch.github.com/mogenerator/](http://rentzsch.github.com/mogenerator/)和这篇关于 JSON 和 CoreData 的超级有用的文章[http://www.cimgf.com/2012/01/11/handling-incoming- json-redux/](http://www.cimgf.com/2012/01/11/handling-incoming-json-redux/)

干杯

# java - 你会选择在 Java 应用程序中运行 HTML/Javascript 吗？

> ID：10381216
> 
> 赞同：1
> 
> 时间：2012-04-30T09:19:22.173
> 
> 标签：java, javascript, webkit, webview

我有一个专有的 Java API，我想从我的 HTML/Javascript 应用程序中调用它。所以我正在考虑使用 WebView 或类似的组件将 WebKit 嵌入到生成的 Java 应用程序中。

在 Javascript 和 Java 之间实现接口的最佳方法是什么？我可以轻松地在 Java 中扩展窗口 DOM 对象吗？

我将在桌面上运行应用程序（很可能是 Windows 7），但最好尽可能便携，因为将来我需要在不同的设备上运行相同的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T09:31:23.607

如果您不想使用服务器（这将使使用 ajax 的事情变得容易），您需要嵌入 javascript 引擎。

最好的可能是使用 Rhino javascript 引擎（完全用 java 编写）：

[http://www.mozilla.org/rhino/](http://www.mozilla.org/rhino/)

还有一个非常好的 V8 引擎（[http://code.google.com/p/jav8/](http://code.google.com/p/jav8/)）的集成，但我不知道这个集成是否完整或可靠。

# c# - 验证输入字符串

> ID：10381217
> 
> 赞同：-8
> 
> 时间：2012-04-30T09:19:33.083
> 
> 标签：c#, asp.net, validation

我需要验证文本框的输入字符串是否包含字母之间的任何数值，并在 asp.net 中将错误显示为“它包含数值”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T09:26:31.973

看看[正则表达式验证器](http://msdn.microsoft.com/en-us/library/ff650303.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T09:26:32.277

您可以使用

```
public bool IsAlpha(string strToCheck)
  {
    Regex objAlphaPattern=new Regex("[^a-zA-Z]");

    return !objAlphaPattern.IsMatch(strToCheck);
  }
Regards 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T09:27:05.120

最好自己在网上搜索这些东西。

你需要一个`RegularExpressionValidator`如下：

```
 <asp:RegularExpressionValidator runat=server display=dynamic
        controltovalidate="txtWhatever" 
        errormessage="Whatever cannot contain numbers." 
        validationexpression="[a-zA-Z]*" /> 
```

# c# - C#：如何在 SharpGs 客户端库中发出 POST 请求以在 Google Cloud Storage 中启动可恢复上传？

> ID：10381219
> 
> 赞同：0
> 
> 时间：2012-04-30T09:19:59.633
> 
> 标签：c#, post, google-cloud-storage

我正在尝试从基于[SharpGs](https://github.com/acropolium/SharpGs)客户端库的 C# 控制台应用程序实现可恢复上传。到目前为止，我可以将数据从我的控制台应用程序放到文件大小 > 2 GB 的 Google 云存储中。

在发起 POST 请求时，为了实现可恢复的上传，服务器会对此做出响应。

“远程服务器返回错误：(403) Forbidden。”} System.Net.WebException 。

我发送的 Uri 是带有 POST 请求的“https://mybucket_name.commondatastorage.googleapis.com/Test1Gb.rar”。

“Test1Gb.rar”----是文件名。

正如 Google Cloud Developers Guide 中所述，我发送 POST 请求如下。

```
private HttpWebRequest PostCreateRequest(string authValue, DateTime date, string contentType,int contentLength)
    {
        var request = (HttpWebRequest)WebRequest.Create(_uri);
        request.Method = PureRequestMethod(_method).ToString();
        request.Headers.Add(@"Authorization", authValue);
        request.Headers.Add(@"x-goog-resumable", "start");
        request.Date = date;
        request.ContentLength = 0;
        request.ContentType = contentType;
        return request;
    }

public string PostRequest(string authValue, DateTime date, string contentType,int contentLength, Bucket.ObjectHead objectHead)
    {
        try
        {
            var request = PostCreateRequest(authValue, date, contentType,contentLength);

            using (var response = (HttpWebResponse)request.GetResponse())
            {  
                if (response.StatusCode == HttpStatusCode.Created)
                {
                    return String.Empty;
                }
                else
                    return StreamToString(response.GetResponseStream());
            }
        }
        catch (WebException exception)
        {
            return StreamToString(exception.Response.GetResponseStream());
        }
    } 
```

我已经尝试了 1 周。我不知道这有什么问题。

我可以从任何人那里得到任何帮助吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T15:38:52.093

403 通常表示权限问题。可能是您无权在目标存储桶中创建对象，也可能是该名称的对象已存在于目标存储桶中，而您无权覆盖它。我会尝试使用 gsutil 来获取和检查与您尝试上传到的存储桶和对象关联的 ACL。语法为“gsutil getacl gs://mybucket_name”和“gsutil getacl gs://mybucket_name/Test1Gb.rar”。

另一个常见的陷阱是人们有多个项目，他们使用一个项目来创建存储桶，并使用另一个项目来获取用于操作（在这种情况下将对象上传到）存储桶的 OAauth 令牌。

另一种策略是尝试使用 POST 对同一对象进行不可恢复的上传。如果可行，那么您就知道问题与您使用可恢复上传协议有关。如果失败，则更可能是 ACL/权限问题，与可恢复上传无关。

# symfony - Symfony2 可选路由

> ID：10381226
> 
> 赞同：0
> 
> 时间：2012-04-30T09:20:35.873
> 
> 标签：symfony, routing

正如 Symfony Book 所建议的（[http://symfony.com/doc/current/book/routing.html#required-and-optional-placeholders](http://symfony.com/doc/current/book/routing.html#required-and-optional-placeholders)），为了创建一个可选占位符以在路由中使用，您只需做一些事情像那样：

```
participant_list:
       pattern:  /list/{filter}/
       defaults: { _controller: ParticipantBundle:Default:list, filter: 1} 
```

并在控制器中定义该变量：

```
public function listAction($filter) {
…
} 
```

但是，当我访问 mypage.dev/list/ 时，如果没有参数，它会显示“找不到 GET /list/ 的路由”。

你知道有什么办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T09:31:12.313

我不确定，但 url 必须是 mypage.dev/list，末尾没有斜线，并且路由应该是

```
participant_list:
   pattern:  /list/{filter}
   defaults: { _controller: ParticipantBundle:Default:list, filter: 1} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T09:28:25.087

尝试在控制器中定义变量的默认值：

```
public function listAction($filter = 1) {
  …
} 
```

# c# - 处理差异，在编码 URI 部分时使用 c# 和 javascript 方法

> ID：10381227
> 
> 赞同：2
> 
> 时间：2012-04-30T09:20:36.923
> 
> 标签：c#, javascript, model-view-controller, urlencode

在我的 MVC 应用程序中，有时我会动态创建查询字符串：一次来自 javascript，一次来自 c# 服务器代码。在 javascript 中，我使用的是`encodeURIComponent(value)`，而在 c# 中，我使用的是`HttpUtility.UrlEncode(value)`来自`System.Web`

假设，我有*空间*，`value`例如：**aq**：

*   `encodeURIComponent(value)`返回**a%20q**
*   `HttpUtility.UrlEncode(value)`返回**a+q**

使用这两种方法对空间进行不同的编码。这是否是它以这种方式工作的任何原因，与“很久以前就这样写并且保持不变”不同？

另外，假设我有*加号*，`value`例如：**a+q**

*   `encodeURIComponent(value)`返回**a%2Bq**
*   `HttpUtility.UrlEncode(value)`返回**a%2bq**

js 方法返回大写编码字符，而 c# 方法返回小写字符。

与这两种方法并行合作以使应用程序以一致的方式运行的最佳方法是什么？我应该编写替代 c# 方法来模仿 js 方法的行为吗？我想解码方法有相同的差异。是否有任何“正确”的方式与这些一起工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T09:28:22.947

百分比编码在[RFC3986](https://www.rfc-editor.org/rfc/rfc3986#section-2.1)中定义。它定义了一个空格字符被编码为`%20`. 但是，查询字符串通常采用*application/x-www-form-urlencoded*格式，这也允许将空格编码`+`为`%20`. 如果解码器需要这种格式的查询字符串，那么编码器可以选择它喜欢的任何一个。

如果您希望空格始终被编码为，您可以使用[Uri.EscapeDataString 方法](http://msdn.microsoft.com/en-us/library/system.uri.escapedatastring.aspx)`%20`：

```
var result = Uri.EscapeDataString("a q");
// result == "a%20q" 
```

在大写和小写上，RFC3986 说：

> 大写十六进制数字“A”到“F”分别等效于小写数字“a”到“f”。如果两个 URI 仅在百分比编码的八位字节中使用的十六进制数字不同，则它们是等价的。

> 为了保持一致性，URI 生产者和规范化者应该对所有百分比编码使用大写的十六进制数字。

```
var result = Uri.EscapeDataString("a+q");
// result == "a%2Bq" 
```

# ios - 无法通过 Facebook 验证 iOS 应用

> ID：10381228
> 
> 赞同：2
> 
> 时间：2012-04-30T09:20:42.837
> 
> 标签：ios, facebook, api, appcelerator, sharekit

希望有人可以在这里提供帮助，这非常令人沮丧！

我有几个使用 Appcelerator Titanium 构建的 iOS 应用程序，并使用最新的 Sharekit 模块允许我通过 Twitter 和 Facebook 共享内容。

Twitter 模块工作正常，但我遇到了 Facebook 身份验证问题。

现在，我认为我在 Titanium 中的代码不是问题，因为我在另一个可以正常工作和发布的应用程序中使用“完全相同”的代码。

我正在努力解决的这两个有问题的应用程序是新添加到 Facebook 的应用程序门户的，其中两个正在工作的是我几个月前添加的。

我试图用不正确的设置复制正在工作的设置，但没有运气。

在设备上，当您点击“与 Facebook 共享”时，它会打开 Facebook 应用程序，要求我验证我的应用程序，然后将视图滑开，将我留在 Facebook 应用程序中，并且不会将我重定向回我的本地应用程序。

在模拟器中，它需要我到 Safari 进行身份验证，然后一旦我单击接受它就会引发“找不到页面”错误。

这几乎就像它无法计算出回调 URL。

其他人有建议吗？我很确定这是我在 Facebook 端没有正确设置的东西。

西蒙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:04:19.400

问题是由于我的 plist 文件没有更新。我最初将它从构建文件夹复制到我的项目资源文件夹中，所以应用程序每次都用它覆盖新的 plist。

现在都整理好了！

# ios - 是否需要为每个 iOS 应用程序创建配置证书？

> ID：10381229
> 
> 赞同：1
> 
> 时间：2012-04-30T09:20:45.700
> 
> 标签：ios, xcode, ios-provisioning

我想知道，是否需要为每个 iOS 应用程序创建每个配置证书。

或者一项配置足以满足所有应用程序的需求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T09:22:30.257

如果您不使用 In-App、Push 和 iCloud，一个就足以用于开发目的，甚至用于分发。否则，您需要为每个应用程序提供一个配置。

# c# - C# 中的计算器，如 Perl 中的计算器

> ID：10381231
> 
> 赞同：0
> 
> 时间：2012-04-30T09:21:00.970
> 
> 标签：c#, perl, calculator

我想用 C# 开发一个计算器。我一直在编程[Perl](http://learn.perl.org/)。在 Perl 中，我可以通过以下方式使用[字符串 eval ：](http://perldoc.perl.org/functions/eval.html)

```
while(<STDIN>) {
    $i = $_; chomp($i); unless($i) { last }
    $o = eval($i); print "$i = $o\n";
} 
```

使用此代码，我可以输入：

1.  (2+2+2)*5
2.  因(5)
3.  平方（4）

它可以识别很多不同的表达方式。

我对 C# 不是很熟悉 - 所以我的问题是：

我可以在 C# 而不是 Perl 中做类似上面的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T09:36:11.360

不幸的是，没有像 Perl 那样直接的方法，因为 C# 是一种编译语言，它不能即时解释源代码字符串。因此，您至少有两种选择：

*   使用表达式求值器，例如这里的：http: [//flee.codeplex.com](http://flee.codeplex.com)或[http://ncalc.codeplex.com](http://ncalc.codeplex.com) 在 codeproject.com 中也有很多搜索短语“表达式求值器”

    *   使用 C# 4.0 动态方法 (http://msdn.microsoft.com/en-us/library/exczf7b9.aspx) 即时编译代码片段并运行它。这是一个现成的案例：[http ://www.360doc.com/content/07/0314/20/8309_397508.shtml](http://www.360doc.com/content/07/0314/20/8309_397508.shtml)

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T09:23:21.270

是的，当然有选择如何做到这一点。看看这个，例如：

[http://www.c-sharpcorner.com/UploadFile/mgold/CodeDomCalculator08082005003253AM/CodeDomCalculator.aspx](http://www.c-sharpcorner.com/UploadFile/mgold/CodeDomCalculator08082005003253AM/CodeDomCalculator.aspx)

# objective-c - 以数字开头的字母顺序排序

> ID：10381235
> 
> 赞同：0
> 
> 时间：2012-04-30T09:21:15.640
> 
> 标签：objective-c, cocoa

我有一个这样的数组值：{apple，queen，microsoft，50cent}。我想对数组的字母顺序和最后的 50cent 进行排序。我正在使用以下方法，但它将 50cent 排序在顶部：

```
[albums sortUsingDescriptors:[NSArray arrayWithObject:
                                  [[[NSSortDescriptor alloc] 
                                    initWithKey:@"name" 
                                    ascending:YES 
                                    selector:@selector(localizedCaseInsensitiveCompare:)] 
                                   autorelease]]]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T09:51:38.833

您可以使用[比较器块](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html)。

在您的情况下，该块应执行以下操作：

*   检查两个字符串的第一个字母，它们都是数字还是字母，做`return [obj1 compare:obj2]`

*   如果第一个对象以数字开头，而第二个对象以字母开头，`return NSOrderedAscending`，如果反过来，`return NSOrderedDescending`

要获取第一个字母，请使用`[obj1 substringToIndex:1]`

* * *

这个想法的完整代码：

```
NSArray *array = [NSArray arrayWithObjects:@"peach",@"apple",@"banana",@"ananas",@"50cents", @"papaya", nil];

array = [array sortedArrayUsingComparator:^NSComparisonResult(id obj1, id obj2) {
    NSString *s1 = [obj1 substringToIndex:1];
    NSString *s2 = [obj2 substringToIndex:1];

    if ([s1 rangeOfCharacterFromSet:[NSCharacterSet decimalDigitCharacterSet]].location == [s2 rangeOfCharacterFromSet:[NSCharacterSet decimalDigitCharacterSet]].location) {
        return  [obj1 compare:obj2];
    } else {
        if ([s1 rangeOfCharacterFromSet:[NSCharacterSet decimalDigitCharacterSet]].location == NSNotFound) {
            return NSOrderedAscending;
        }
    }
    return  NSOrderedDescending;
}]; 
```

当你使用`sortUsingDescriptors:`时，你必须使用 NSMutableArray。您可以使用带有比较器的就地排序`sortUsingComparator:`。

```
[array sortUsingBlock:<The block stays the same>]; 
```

# wpf - 如何根据wpf中的计时器值将按钮控件移向X轴

> ID：10381239
> 
> 赞同：0
> 
> 时间：2012-04-30T09:21:34.543
> 
> 标签：wpf, wpf-controls

我在 wpf 中创建了一个按钮，并将 dispatchertimer 添加到 wpf，现在我希望按钮随着计时器的状态移动，并且按钮应该移动直到计时器停止。有人可以帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T10:57:57.967

好吧，您最好使用 Storyboard，但如果您想使用计时器，您可以更改 StepValue，即使用 n 步从 0.0 变为 1.0 的值。如果您的计时器的频率是 f 呼叫/秒，那么您的动画将持续 n/f。然后您可以构建一个公共属性 ButtonMargin (a Thickness )，您更新每个计时器调用 ( ButtonMargin = New Thickness(StepValue * MovingWidth, 0,0,0) )，并且您在 ButtonMargin 的设置器中 NotifyPropertyChanged。然后将 ButtonMargin 绑定到 Button 的边距。

# java - 在 Junit 中访问延迟加载的实体对象

> ID：10381240
> 
> 赞同：2
> 
> 时间：2012-04-30T09:21:39.877
> 
> 标签：java, spring, jpa, junit, persistence

我正在尝试在 Junit 中测试实体值，该实体与惰性获取类型具有多对多关系。

当我尝试在 Junit 中扩展它时，我收到以下错误。 ***如果我的理解有误，请高亮，我只需要在 Junit 中打开会话并加载此对象。***

**严重：未能延迟初始化角色集合：com.example.stock.model.Stock.locations，没有会话或会话已关闭** org.hibernate.LazyInitializationException：未能延迟初始化角色集合：com.example.stock.model.Stock.locations，在 org.hibernate.collection.AbstractPersistentCollection.throwLazyInitializationException（AbstractPersistentCollection.java:358）处没有关闭会话或会话在 org.hibernate.collection.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:343) 在 org.hibernate.collection.AbstractPersistentCollection.java:350) 在 org.hibernate.collection.AbstractPersistentCollection.throwLazyInitializationExceptionIfNotConnected(AbstractPersistentCollection.java:350) ) 在 org.hibernate.collection.PersistentBag.iterator(PersistentBag.java:249) 在 com.example.common.StockManytoManyTest.testGetStock(StockManytoManyTest.java:53) 在 sun.reflect。Sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 处的 NativeMethodAccessorImpl.invoke0(Native Method)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T09:25:36.013

用 .注释您的集成测试类或方法`@Transactional`。另见：[10.3.5.4 事务管理](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/testing.html#testcontext-tx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-10T17:57:33.713

```
@TransactionConfiguration(transactionManager = "transactionManager", defaultRollback = true)
@Transactional
公共类 TestAnything{
   ...
}

```

# ruby-on-rails - Rails 路由：嵌套在范围内的命名空间

> ID：10381241
> 
> 赞同：3
> 
> 时间：2012-04-30T09:21:39.893
> 
> 标签：ruby-on-rails, namespaces, scope, url-routing

使用 Rails 3.2，我在 config/routes.rb 中有以下内容

```
scope "/:locale" do
    resource :users, :only => [:new, :create]

    namespace :admin do
        resources :specifications
    end
end 
```

用户路线按预期工作，规范路线工作，除了索引。通过对“/en/admin/specifications”的 GET 调用，将返回以下错误：

```
No route matches {:action=>"show", :controller=>"admin/specifications", :locale=>#<Specification id: 1, name: "Check-in", created_at: "2012-04-28 12:10:29", updated_at: "2012-04-28 12:10:29">} 
```

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T10:58:08.367

尝试将其添加到您的应用程序控制器中：

```
def default_url_options(options={})
  {:locale => I18n.locale}
end 
```

它对我有用，我建议您阅读 I18n 指南的部分，其中解释如何[从 URL 参数设置语言环境](http://guides.rubyonrails.org/i18n.html#setting-the-locale-from-the-url-params)。

PS：欢迎来到 StackOverflow ;)

# postgresql - 删除递归子代

> ID：10381243
> 
> 赞同：3
> 
> 时间：2012-04-30T09:21:47.127
> 
> 标签：postgresql, sql-delete, recursive-query

我有以下 sql，它可以让我获得根论坛帖子的所有子孙。

```
with recursive all_posts (id, parentid, root_id) as
                (
                select t1.id,
                t1.parent_forum_post_id as parentid,
                t1.id as root_id
                from forumposts t1

                union all

                select c1.id,
                c1.parent_forum_post_id as parentid,
                p.root_id
                from forumposts
                c1
                join all_posts p on p.id = c1.parent_forum_post_id
                )

                select fp.id
                from forumposts fp inner join all_posts ap
                on fp.id=ap.id 
                where
                root_id=1349 
                group by fp.id 
```

事情是我希望删除选择的记录。类似于从论坛帖子 fp 中删除的内容，其中 fp.id=（*最后从上面的代码*中选择），但这不起作用（我在“删除”处或附近出现语法错误）。这是我第一次使用递归，我一定遗漏了一些东西。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T09:32:37.207

You can simply use the `DELETE` statement instead of `SELECT` to do your job:

```
with recursive all_posts (id, parentid, root_id) as (
    select t1.id,
    t1.parent_forum_post_id as parentid,
    t1.id as root_id
    from forumposts t1

    union all

    select c1.id,
    c1.parent_forum_post_id as parentid,
    p.root_id
    from forumposts
    c1
    join all_posts p on p.id = c1.parent_forum_post_id
)
DELETE FROM forumposts
 WHERE id IN (SELECT id FROM all_posts WHERE root_id=1349); 
```

Other combinations possible, like deleting from master table based on the deleted rows in the child one, [check out the documentation](http://www.postgresql.org/docs/current/interactive/queries-with.html#QUERIES-WITH-MODIFYING).

**EDIT:** For PostgresSQL versions prior to 9.1, you can use your initial query like this:

```
DELETE FROM forumposts WHERE id IN (
    with recursive all_posts (id, parentid, root_id) as (
        select t1.id,
        t1.parent_forum_post_id as parentid,
        t1.id as root_id
        from forumposts t1

        union all

        select c1.id,
        c1.parent_forum_post_id as parentid,
        p.root_id
        from forumposts c1
        join all_posts p on p.id = c1.parent_forum_post_id
    )
    select id from all_posts ap where root_id=1349
); 
```

# java - 为什么 this() 和 super() 不能在构造函数中一起使用？

> ID：10381244
> 
> 赞同：40
> 
> 时间：2012-04-30T09:21:54.500
> 
> 标签：java, inheritance, constructor

为什么不能`this()`和`super()`两者在构造函数中一起使用？

加入这样一个东西的原因是什么？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-04-30T09:24:46.003

`this(...)`将调用同一个类中的另一个构造函数，而`super()`将调用一个超级构造函数。如果`super()`构造函数中没有，编译器将隐式添加一个。

因此，如果两者都被允许，您最终可能会调用`super`构造函数两次。

示例（不要在参数中寻找意义）：

```
class A {
  public A() {
    this( false );
  }

  public A(boolean someFlag) {
  }
}

class B extends A {
  public B() {
    super();
  }

  public B( boolean someFlag ) {
    super( someFlag );
  }

  public B ( int someNumber ) {
    this(); //
  }
} 
```

现在，如果您调用`new B(5)`以下构造函数，则会调用：

```
 this( false);
A() ---------------> A(false)
^
|
| super(); 
|
|     this();
B() <--------------- B(5)  <--- you start here 
```

*更新*：

如果你能够使用`this()`并且`super()`你最终可能会得到这样的结果：

（**注意**：这是为了表明*如果您被允许这样做，*可能会出现什么问题- 幸运的是，您没有这样做）

```
 this( false);
A() ---------------> A(false)
^                    ^
|                    |
| super();           | super( true ); <--- Problem: should the parameter be true or false? 
|                    |
|     this();        |
B() <--------------- B(5)  <--- you start here 
```

如您所见，您会遇到一个问题，即`A(boolean)`可以使用不同的参数调用构造函数，您现在必须以某种方式决定应该使用哪个。此外，其他构造函数 ( `A()`and `B()`) 可能包含现在可能无法正确调用的代码（即乱序等），因为调用 to`super( true )`会绕过它们而`this()`不会。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-30T09:32:04.273

`super()`和之间有区别`this()`。

`super()`- 调用基类构造函数，而
`this()`- 调用当前类构造函数。

`this()`和都是`super()`构造函数调用。
构造函数调用必须始终是第一条语句。所以你要么有`super()`要么`this()`作为第一个陈述。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-30T09:24:05.980

`this()`和都是`super()`构造函数调用，构造函数调用必须是构造函数中的第一个（也是唯一一个）调用。否则，`Object`在实例化单个对象时将多次调用构造函数。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-04-22T16:10:07.173

*   我们在构造函数链中使用*this()关键字来访问**同一个类的构造函数*
*   当我们想要在继承中访问直接父类的构造函数时，我们使用*super()关键字。*

两者都有一个条件，它们必须在您使用的构造函数的*第一行中声明。*这就是为什么我们不能在单个构造函数中同时使用两者的原因，因为您只能在*第一行*中编写一个东西。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-30T10:01:28.833

因为没有意义。构造函数必须调用`this()`或`super()`（隐式或显式）。`this()`调用另一个构造函数，该构造函数必须像以前一样调用`this()`or`super()`等​​。一个调用两者的构造函数，`this()`因此`super()`最终会调用`super()`两次。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-10-11T05:14:32.367

因为如果在构造函数中同时使用`this()`and`super()`会产生编译时错误。因为`this()`and`super()`必须是第一个可执行语句。如果你`this()`先写比`super()`将成为第二个语句，反之亦然。这就是为什么我们不能一起使用`this()`和`super()`。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-04-08T11:17:54.123

this() 和 super() 不能在构造函数中一起使用。

this() 用于调用同一个类的默认构造函数。它应该是构造函数中的第一个语句。

super() 用于调用基类的默认构造函数。它应该是构造函数中的第一个语句。

所以 this() 和 super() 都用于构造函数调用，但都想首先执行。这就是为什么它会显示编译器错误，例如：

错误：调用 this 必须是构造函数 this() 中的第一条语句；或者

错误：调用 this 必须是构造函数 super() 中的第一条语句；

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-07-25T08:47:13.487

比较下面的例子。FirstChild 类在 2 个构造函数中设置实例变量名称，因为从第一个构造函数调用第二个构造函数被排除在调用 super() 之外。

在 SecondChild 类中引入了第三个私有构造函数，它接受 2 个参数——第一个传递给 supper()，第二个用于设置名称。前 2 个构造函数正在调用第三个。Super() 只被调用一次，实例变量也只在一个构造函数中设置。代码产生相同的结果，无需在同一个构造函数中调用 super() 和 this()。

```
class FirstChild extends ConstructorTest{
    private String name = null;
    public FirstChild(){
        super("super text 1");
        //this("Unknown"); //UNCOMMENTED DOES NOT COMPILE
        name = "Unknown";
    }
    public FirstChild(String name){
        super("super text 2");
        this.name = name;
    }
    public String getName(){
        return name;
    }
}

class SecondChild extends ConstructorTest{
    private String name = null;
    public SecondChild(){
        this("super text 1", "Unknown");
    }
    public SecondChild(String name){
        this("super text 2", name);
    }
    private SecondChild(String superStr, String name)
    {
        super(superStr);
        this.name = name;
    }
    public String getName(){
        return name;
    }
}

public class ConstructorTest{
    public ConstructorTest(String str){
        System.out.println("ConstructorTest constructor called with parameter \"" + str + "\"");
    }
    public static void main(String... args)
    {
        System.out.println("Hello from main, FirstChild results:");
        FirstChild fc1 = new FirstChild();
        FirstChild fc2 = new FirstChild("John");
        System.out.println("           child fc1 name: " + fc1.getName());
        System.out.println("           child fc2 name: " + fc2.getName());
        System.out.println("Hello from main, SecondChild results:");
        SecondChild sc1 = new SecondChild();
        SecondChild sc2 = new SecondChild("John");
        System.out.println("           child sc1 name: " + sc1.getName());
        System.out.println("           child sc2 name: " + sc2.getName());
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-08-14T14:39:17.157

this() 和 super() 都是构造函数，所以必须是第一个语句。但是我们可以在一个程序中同时使用它们。

**this()**：用于调用同类默认或参数化构造函数。

**super()**：用于调用直接超/父类默认或参数化构造函数。

```
//Super Class
    public class SuperConstructor {
    SuperConstructor(){
        this(10);
        System.out.println("Super DC");
    }

    SuperConstructor(int a){
        this(10,20);
        System.out.println("Suer SPC with Iteger");
    }

    SuperConstructor(int i,int j){
        System.out.println("Super with  DPC with Iteger and Integer");
    }
}

//subclass
    public class ThisConstructor extends SuperConstructor{  
    ThisConstructor(){
        this(10,20);
        System.out.println("Subcalss DC ");//DC Default Constructor
    }

    ThisConstructor(int i){
        super(i);       
        System.out.println("Subcalss  SPC with Iteger");//SPC Single Parameterized Constructor
    }

    ThisConstructor(int i, String s){
        this();
        System.out.println("Subcalss  DPC with Iteger and String");//DPC double Parameterized Constructor
    }

    ThisConstructor(int i,int age){
        super(i,age);
        System.out.println("Subcalss  DPC with Iteger and Integer");
    }

    public static void main(String []k){
        System.out.println("=================Frist time Calling ==========================\n");
        ThisConstructor t = new ThisConstructor(1);

        System.out.println("=================Second time Calling ==========================\n");
        ThisConstructor t1 = new ThisConstructor(1,2);
    }
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-10-13T10:59:08.377

super() - 引用直接父类实例。可用于调用直接父类方法。this() - 引用当前类实例。可用于调用当前类方法。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-06-04T07:30:46.080

由于构造函数调用必须是方法中的第一条语句，所以如果我们在一个方法中同时定义 this 和 super 构造函数，就会产生如下冲突。假设首先调用此构造函数，那么它将检查当前类构造函数，如果在当前类构造函数中我们有另一个方法调用或语句。所以在这个调用中，当前类构造函数中的所有方法和语句都会在调用超类构造函数之前被调用，然后它会拒绝语句“构造函数调用必须是方法中的第一个语句”

# linq - 使用 LINQ to Object 选择 2 个值

> ID：10381246
> 
> 赞同：1
> 
> 时间：2012-04-30T09:22:17.777
> 
> 标签：linq

仅 1 个 Linq 查询如何实现以下目标？是不是更有效率？

```
var o = new myObject {
    Value =
        (from value in g
        select value.Value).FirstOrDefault(),
    Id =
        (from value in g 
        select value.Id).FirstOrDefault(),
    ... } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T09:26:11.220

```
var result = (from value in g 
             select new 
               {
              Value = value.Value,
              ID = value.ID
               }).FirstOrDefault(); 
```

编辑：（基于已编辑的问题）
在这种情况下，我宁愿先获得该值，然后在我的对象的构造函数中使用它。您的选择可能涉及条件或 where 子句。我认为在 Linq to object 中，性能并不那么重要，或者可能取决于集合大小，但我仍然相信它会很小。最好的方法仍然是先选择项目，然后在对象初始化中使用它。

```
var result = (from value in g 
             select new 
               {
              Value = value.Value,
              ID = value.ID
               }).FirstOrDefault();

var o = new myObject{Value = result.Value, ID = result.ID} 
```

# objective-c - 如何将布尔值解析为 NSString

> ID：10381249
> 
> 赞同：3
> 
> 时间：2012-04-30T09:22:32.767
> 
> 标签：objective-c, nsstring, boolean

我有以下方法可以进行一些字符串构建，但不幸的是，我在将布尔值解析为我的 NSString 时遇到了问题。

代码如下：

```
- (void)setToolOutput:(int) outputNumber state: (BOOL) value {
    NSString *str =  [NSString stringWithFormat:@"this=%i is=%c",outputNumber,value];
    NSData* data = [str dataUsingEncoding:NSUTF8StringEncoding];
    [OutputStream write:[data bytes] maxLength:[data length]];
    NSLog(@"%@", str);
} 
```

我试图通过使用`%c`for char 和`%s`字符串来解析它。两种方式都将我的布尔值输出为`question mark turned upside down`.

编辑：我希望它解析为`True`or `False`。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-30T09:28:53.290

Boolean 基本上是一个整数，因此您可以使用`%i`它来获取它的十进制表示。你通常想要的是这样的：

`NSString *booleanString = (value) ? @"True" : @"False";`

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-30T09:25:46.043

编辑：对不起我的错误

您还可以检查布尔值以抛出您喜欢的字符串，如“True”或“False”

```
 NSString *target = @"";
        if(tmp)
        {
            target = @"True";
        }
        else {
            target = @"False";
        }

        // use target variable as you prefer 
```

# jquery - 移除更高层

> ID：10381250
> 
> 赞同：1
> 
> 时间：2012-04-30T09:22:41.287
> 
> 标签：jquery

我想删除高于该层的第 8 层。

所以我写了这段代码：http: [//jsfiddle.net/3JaGg/](http://jsfiddle.net/3JaGg/) 这个代码现在可以工作了，但我想知道有没有更好的方法？

因为我用`parent()`了8次。

```
$(this).parent().parent().parent().parent().parent().parent().parent().parent().remove(); 
```

注意：我使用了很多 DIV，因为我想用 CSS2 圆角

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T09:25:26.600

使用[`closest()`](http://api.jquery.com/closest/)方法而不是多次调用`parent()`.

> 获取与选择器匹配的第一个元素，从当前元素开始，向上遍历 DOM 树。

```
closest('.popup') 
```

## [工作示例](http://jsfiddle.net/3JaGg/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T09:26:01.317

使用`closest()`，这将遍历 DOM 以使用您提供的选择器找到最近的元素 - 在您的情况下，`closest(".popup")`将起作用。

```
$('.closeBtn').click(function() {
    $(this).closest(".popup").remove();
}); 
```

[**示例小提琴**](http://jsfiddle.net/3JaGg/2/)

# ruby - Ruby agent.click page.links.text iframe 中断

> ID：10381253
> 
> 赞同：0
> 
> 时间：2012-04-30T09:23:02.140
> 
> 标签：ruby, linux, sms, mechanize

我不知道标题是否合适，但我希望得到一些帮助。我正在寻找一种使用 Linux 终端发送短信的方法，我找到了一个脚本。该脚本是用 Ruby 编写的，看起来不错。我对 Ruby 不熟悉，但代码解释得很好，因此普通人可以轻松使用它。

```
require 'mechanize'
number   = ARGV.shift
message  = ARGV * " "

if message.length > 160 || message.length < 1
  $stderr.puts "Message too short or too long.."
  exit 1
end

agent = WWW::Mechanize.new

page = agent.get('http://www.xxxxxx.com/')
hp_formlogin = page.form('login')
hp_formlogin.username = 'xxxxxxxx'
hp_formlogin.pass = 'xxxxxxxx'
page = agent.submit(hp_formlogin)

#ONLY USED IF YOUR SITE REDIRECTS YOU AFTER LOGIN
page = agent.click page.links.text('Send Free SMS')
pp page

page = agent.get('http://www.xxxxxxxx.com/send/free-sms')
#ONLY USED IF THERE'S NO NAME FOR THE FORMFIELD.
# SO IF YOU HAVE ONE, COMMENT OUT THE LINE BELOW AND ENTER THIS
 hp_formsms = page.form('freesms2')
#hp_formsms = page.forms.first
hp_formsms.frno = number
hp_formsms.message3 = message
page = agent.submit(hp_formsms) 
```

这是代码......但问题是，在登录网站时，它会在进入配置文件之前显示一个中间框架（我认为是 iframe）。这样 page = agent.click page.links.text('Send Free SMS') 不起作用。这是因为，此帧没有名为 send free sms 的链接。这有一个由图像制成的关闭按钮。如何绕过此框架进入个人资料页面并发送消息。请帮助..欢迎任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T15:22:23.730

您可以通过 frame_with、iframe_with 和其他获取框架。
例子：

```
page.frame_with(:src => %rfoo/).click 
```

请参阅以下文档。
[http://mechanize.rubyforge.org/Mechanize/Page.html](http://mechanize.rubyforge.org/Mechanize/Page.html)

# java - Android：向位图添加填充权

> ID：10381258
> 
> 赞同：1
> 
> 时间：2012-04-30T09:23:16.420
> 
> 标签：java, android, selector

我需要在我的箭头位图中添加填充 有一种简单的方法来设置它吗？

![在此处输入图像描述](../Images/b7f0ad2d23c5594eb9c9b7bb72970733.png)

代码：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item>
  <bitmap android:src="@drawable/img_0002" android:gravity="right" />
</item> 
```

谢谢！

**编辑：**

布局代码：

```
 <LinearLayout style="@style/menu_container">
        <RelativeLayout
            android:id="@+id/item_services"
            style="@style/menu_item">
            <TextView
                android:id="@+id/textView2"
                style="@style/font_menu"
                android:text="@string/section_menu_services" />
        </RelativeLayout>

        <RelativeLayout
            android:id="@+id/item_social" 
            style="@style/menu_item">
            <TextView
                android:id="@+id/textView3"
                style="@style/font_menu"
                android:text="@string/section_menu_social"/>
        </RelativeLayout> 
```

款式：

```
 <style name="menu_container">
    <item name="android:layout_width">fill_parent</item>
    <item name="android:layout_height">wrap_content</item>
    <item name="android:layout_centerHorizontal">true</item>
    <item name="android:layout_centerVertical">true</item>
    <item name="android:background">@drawable/bg_menu_container</item>
    <item name="android:layout_marginLeft">25dp</item>
    <item name="android:layout_marginRight">25dp</item>
    <item name="android:orientation">vertical</item>
</style>

<style name="menu_item">
    <item name="android:background">@drawable/bg_menu_drawable</item>
    <item name="android:clickable">true</item>
    <item name="android:focusable">true</item>
    <item name="android:layout_marginLeft">1dp</item>
    <item name="android:layout_marginRight">1dp</item>
    <item name="android:layout_width">wrap_content</item>
    <item name="android:layout_height">wrap_content</item>
</style> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T02:41:00.553

我发现修复它的更简单和肮脏的方法。我在图标的右侧添加了一个透明块。我为此感到羞耻...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-30T18:48:01.210

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item>
        <layer-list>
            <item android:right="16sp">
            <bitmap android:src="@drawable/new_switch" android:gravity="center"/>
            </item>
        </layer-list>
    </item>
</selector> 
```

layerlist 中的 item 节点可以被赋予 padding

# ruby-on-rails - 我可以使用 curl 或 curl 发布到使用 rails 的跨站点请求伪造保护的表单吗？

> ID：10381261
> 
> 赞同：0
> 
> 时间：2012-04-30T09:23:30.730
> 
> 标签：ruby-on-rails, ruby, curb

我有一个简单的 rails 网页，用户在其中输入几个文本字段并上传图片。然后 Rails 存储图片并更新服务器上的数据库。它工作正常。

但是，我还需要另一台计算机上的脚本来偶尔使用 curl/curb 库更新网页。但是，当我尝试这样做时，出现此错误：

> ActionController::InvalidAuthenticityToken (ActionController::InvalidAuthenticityToken)

当我仔细观察时，似乎 rails 在创建表单时都会放入一个名为“authenticity_token”的隐藏字段：

> ```
> <form action="/headshots/single" enctype="multipart/form-data" method="post">
> <input name="authenticity_token" type="hidden" value="798b514826513c881613a0c18b52839489a12181" />
> . . .
> </form> 
> ```

遏制脚本不起作用，因为它没有“authenticity_token”的东西。有没有办法解决？也许制作另一个网页做同样的事情，但只是为了我的遏制脚本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T09:45:48.477

隐藏的输入是为了防止[Cross-Site Request Forgery](http://www.google.com/url?sa=t&rct=j&q=csrf&source=web&cd=1&ved=0CDgQFjAA&url=http://en.wikipedia.org/wiki/Cross-site_request_forgery&ei=PF6eT8_rAeO3iQfI7IDWDg&usg=AFQjCNHTv-BNCKp3W0AVfOZ4jWQLWbdhgA&cad=rja)。`authenticity_token`如果没有首先获取表单并提取隐藏参数，您将无法发布到受到如此保护的 rails 操作。curl 不够聪明，无法自行完成此操作。

你有两个选择：

1.  `protect_from_forgery`通过从控制器中删除调用来关闭 CSRF 保护。馊主意。
2.  运行一个请求以获取表单，使用快速而肮脏的正则表达式来获取参数，例如

    `/name="authenticity_token".*value="([^"]+)"/`

    然后运行另一个发布该值的请求`authenticity_token`。它很脆弱，可能会让人们讨厌你，但它会起作用。

3.  使用比`curl`对表单和连续提交提出必要请求更复杂的方法。 [机械化](http://mechanize.rubyforge.org/)似乎是事实上的标准。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T10:20:42.883

如何使用机械化提交表单：

```
Mechanize.new.get('url_with_form').forms[0].tap{|f| f.field = 'value'}.submit 
```

# java - 深度复制和遗传算法

> ID：10381267
> 
> 赞同：1
> 
> 时间：2012-04-30T09:23:42.417
> 
> 标签：java

我目前正在做一个项目，试图创建一个简单的遗传算法。关于结构，我有一个基因，它是 char []，有四个数字和一个染色体，它是一个由 10 个基因对象组成的数组。

我正在尝试编写一个简单的交叉方法，从每个父染色体的一半创建一个孩子。我从下面的方法开始，但很快意识到我只是浅拷贝。在过去的几天里，我阅读了许多关于使用可克隆接口实现深度复制的文章，但所有尝试都没有成功。请有人帮我解决这个问题。任何提示和指示将不胜感激

```
public Chromosome createChild (Chromosome parentA, Chromosome parentB)
{
    Chromosome child=new Chromosome();
    for (int i=0;i<10; i++)
    {   
        if (i<5)
        {
            child.genes[i] = parentA.genes[i]; 
        }
        else
        {
            child.genes[i] = parentB.genes[i];
        }

    }   
    return child;       
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T10:19:42.517

让我们首先考虑`Gene`该类：根据您的规范（*我有一个 Gene 是 char [] 和四个数字*），您需要一个`char`数组作为该类的属性。而且，这个类应该是可克隆的，那么你必须让这个类实现[`Cloneable`](http://docs.oracle.com/javase/6/docs/api/java/lang/Cloneable.html)接口：为此，你必须声明这个`Gene`类实现了`Cloneable`接口（简单地写`implements Cloneable`在类定义中）并且你必须实现[`clone`](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#clone%28%29)这个类中的方法（在此方法中，您必须制作对象字段的深层副本并返回克隆的对象，请参阅下面的代码了解详细信息）。

```
import java.util.Arrays;

/*
 * Definition of the class that also includes the declaration
 * of the implementation of the Cloneable interface.
 */
public class Gene implements Cloneable {

    /*
     * The length of a gene.
     * It is defined as constant (final) in order to use the same value
     * in the whole class, where and when necessary.
     */
    private static final int GENE_LENGTH = 4;

    /*
     * In biology a gene it corresponds to a sequence of nucleic acids,
     * so I thought of naming m_sequence this field.
     */
    private char m_sequence[];

    /*
     * This constructor allows you to instantiate a new object from a char array.
     */
    public Gene(char sequence[]) {
        // The field m_sequence is initialized with a copy
        // of the array specified in the constructor.
        m_sequence = Arrays.copyOf(sequence, GENE_LENGTH);
    }

    /*
     * Simple getter method.
     * Since m_sequence is private, you need a method like this
     * in order to access elements of the array.
     */
    public char getUnit(int index) {
        return m_sequence[index];
    }

    /*
     * Simple setter method.
     * Since m_sequence is private, you need a method like this
     * in order to set the elements of the array.
     */
    public void setUnit(int index, char unit) {
        m_sequence[index] = unit;
    }

    /*
     * The Cloneable declaration requires that this class has clone method.
     * This method should return an Gene object within an Object.
     */
    protected Object clone() throws CloneNotSupportedException {
        // First, we invoke the clone method of the superclass
        Gene clone = (Gene)(super.clone());

        // Then, make the deep copy of the object.
        // In this case the only field present in the Gene object is an array,
        // then you must make a deep copy of this array: in order to make a deep
        // copy of the array, you should use the Arrays.copyOf method.
        clone.m_sequence = Arrays.copyOf(m_sequence, GENE_LENGTH);

        return clone;
    }

    /*
     * Get a representation of this object as a String.
     * Just a method for simple testing.
     */
    @Override
    public String toString() {
        return Arrays.toString(m_sequence);
    }
} 
```

请注意，为了复制数组，我使用了类的方法[`copyOf`](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#copyOf%28char%5B%5D,%20int%29)（有关数组复制的更多详细信息，`Arrays`请阅读[此处](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)）。

一个简单的测试来检查`Gene`对象中深拷贝的功能：

```
public static void main(String args[]) throws CloneNotSupportedException {
    Gene g1 = new Gene(new char[]{'a', 'b', 'c', 'd'});
    Gene g2 = (Gene)(g1.clone());

    // now Let's modify g1
    g1.setUnit(0, 'e');
    g1.setUnit(1, 'f');
    g1.setUnit(2, 'g');
    g1.setUnit(3, 'h');

    System.out.println("g1: " + g1);
    System.out.println("g2: " + g2);   // g2 has not changed
} 
```

所以，在你应该改变你的`createChild`方法如下。

```
public class Chromosome {
    private static final int CHROMOSOME_LENGTH = 10;

    /* Array of Gene object. */
    private Gene genes[];

    /* Default constructor. */
    public Chromosome() {
        // Simply allocates an array of 10 elements.
        genes = new Gene[CHROMOSOME_LENGTH];
    }

/*
     * Simple getter method.
     * Since m_Genes is private, you need a method like this
     * in order to access elements of the array.
     */
    public Gene getGene(int index) {
        return genes[index];
    }

/*
     * Simple setter method.
     * Since m_Genes is private, you need a method like this
     * in order to set the elements of the array.
     */
    public void setGene(int index, Gene gene) {
        genes[index] = gene;
    }

    /* The method which make the cross-over. */
    public Chromosome createChild(Chromosome parentA, Chromosome parentB) throws CloneNotSupportedException {
        Chromosome child = new Chromosome();

        // make the cross-over
        for (int i=0;i<10; i++)
        {   
            if (i<5)
            {
                // you need to call the clone() method
                child.genes[i] = (Gene)(parentA.genes[i].clone());
            }
            else
            {
                // you need to call the clone() method
                child.genes[i] = (Gene)(parentB.genes[i].clone());
            }
        }

        return child;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-17T19:37:40.847

我将以下代码用于我的调查项目的交叉。也许它可以帮助你。

```
 package geneticSource;

import java.util.*;
import java.util.Random;

public class Crossover { 
//                                          //Var for seeds
private Random rdn;            
private Random rdn2;
private Random rdn3;
private double PROB_CROSS=1;

public Crossover(double value,int seed){
    this.PROB_CROSS=value;  
    this.rdn= new Random(seed);
    this.rdn2= new Random(seed+1);
    this.rdn3= new Random(seed+2);
}

public Population Cross(Population p){
    int pointCross=0;        //Crossover point
    int n1=0;                
    int n2=0;
    double probCross=0;
    double probMut=0;
    Chromosome cr1=null;
    Chromosome cr2=null;
    List<Gen> mum1=new LinkedList<Gen>();
    List<Gen> dad1=new LinkedList<Gen>();
    List<Gen> mum2=new LinkedList<Gen>();
    List<Gen> dad2=new LinkedList<Gen>();
    ArrayList<Gen> geno1=new ArrayList<Gen>();
    ArrayList<Gen> geno2=new ArrayList<Gen>();
    Population pnew = new Population();
    //Integer[] cruce=new Integer [p.population.size()];
    ArrayList <Integer>cruceControl=new ArrayList<Integer>();
    for(int i=0;i<p.population.size();i++){
        cruceControl.add(i);
    }
    int aux=0;
    for(int i=0;i<p.population.size()/2;i++){

        n1=rdn.nextInt(cruceControl.size());
        aux=cruceControl.get(n1);
        cruceControl.remove(n1);    
        n1=aux;
        n2=rdn.nextInt(cruceControl.size());
        aux=cruceControl.get(n2);
        cruceControl.remove(n2);
        n2=aux;

        mum1=new LinkedList<Gen>();
        dad1=new LinkedList<Gen>();
        mum2=new LinkedList<Gen>();
        dad2=new LinkedList<Gen>();
        geno1=new ArrayList<Gen>();
        geno2=new ArrayList<Gen>();
        cr1=p.population.get(n1);
        cr2=p.population.get(n2);   

        probCross=this.rdn3.nextDouble();   
        probMut =this.rdn2.nextDouble();    
        if(probCross<=PROB_CROSS){               
            pointCross=rdn.nextInt(p.population.get(0).getChromosome().size());
            mum1=cr1.getChromosome().subList(0,pointCross );
            dad1=cr1.getChromosome().subList(pointCross,cr1.getChromosome().size() );
            mum2=cr2.getChromosome().subList(0,pointCross );
            dad2=cr2.getChromosome().subList(pointCross,cr2.getChromosome().size() );
            //cross;
            geno1.addAll(mum1);
            geno1.addAll(geno1.size(), dad2);
            geno2.addAll(mum2);
            geno2.addAll(geno2.size(), dad1);

            //Update the number for chromosome
            int Nva1=0;
            int Nva2=0;
            for(int j=0;j<geno1.size();j++){
                if(geno1.get(j).getValue()==1)Nva1++;
                if(geno2.get(j).getValue()==1)Nva2++;
            }
            p.population.set(n1, new Chromosome(geno1));
            p.population.get(n1).setNVariables(Nva1);
            p.population.set(n2, new Chromosome(geno2));
            p.population.get(n2).setNVariables(Nva2);
            if(Nva1<p.fminV) p.fminV=Nva1;
            if(Nva2<p.fminV) p.fminV=Nva2;
            if(Nva1>p.fmaxV) p.fmaxV=Nva1;
            if(Nva2>p.fmaxV) p.fmaxV=Nva2;

        }

    }
    int k=0;
    for(Chromosome c : p.getPopulation()){
        k=0;
        for(Gen g : c.getChromosome())
            if(g.getValue()==1)k++;
                    if(k!=c.getNVariables())System.out.println(".................................................................");
    }

    return p;
    }

  } 
```

我使用了种子，并计算了染色体的数量，因为我将这个变量用于健身属性。

# android - 如何在android的sdcard中获取所有可用的图像文件？

> ID：10381270
> 
> 赞同：1
> 
> 时间：2012-04-30T09:23:56.037
> 
> 标签：android, image, android-sdcard

> **可能重复：**
> [如何从模拟器的 sdcard 中获取所有图片并将其显示在 listView 中？](https://stackoverflow.com/questions/7303943/how-to-get-all-the-pictures-from-the-sdcard-of-emulator-and-display-it-in-a-list)

我在 sdcard 下有很多文件夹。每个文件夹包含图像文件、文本文件和子文件夹。如何获取 sdcard 下所有文件夹和子文件夹中的所有图像文件？我需要将所有图像文件路径存储到一个数组中。谁能帮助我。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-30T09:49:41.800

您可以使用以下代码从 SD 卡中搜索所有图像。

```
 private String SD_CARD_ROOT;
            File mFile=Environment.getExternalStorageDirectory();
    SD_CARD_ROOT=mFile.toString();

private List<String> FindFiles() {
    final List<String> tFileList = new ArrayList<String>();
    Resources resources = getResources();
    // array of valid image file extensions
    String[] imageTypes = resources.getStringArray(R.array.image);
    FilenameFilter[] filter = new FilenameFilter[imageTypes.length];

    int i = 0;
    for (final String type : imageTypes) {
        filter[i] = new FilenameFilter() {
            public boolean accept(File dir, String name) {
                return name.endsWith("." + type);
            }
        };
        i++;
    }

    FileUtils fileUtils = new FileUtils();
    File[] allMatchingFiles = fileUtils.listFilesAsArray(
            new File(SD_CARD_ROOT), filter, -1);
    for (File f : allMatchingFiles) {
        tFileList.add(f.getAbsolutePath());
    }
    return tFileList;
} 
```

在图像类型的资源数组中：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<string-array name="image">
<item>bmp</item>
<item>cmx</item>
<item>cod</item>
<item>gif</item>
<item>ico</item>
<item>ief</item>
<item>jpe</item>
<item>jpeg</item>
<item>jpg</item>
<item>jfif</item>
<item>pbm</item>
<item>pgm</item>
<item>png</item>
<item>pnm</item>
<item>ppm</item>
<item>ras</item>
<item>rgb</item>
<item>svg</item>
<item>tif</item>
<item>tiff</item>
<item>xbm</item>
<item>xpm</item>
<item>xwd</item>
</string-array>
</resources> 
```

希望这将帮助您找到图像。

这里缺课

```
public class FileUtils {

        public void saveArray(String filename, List<String> output_field) {
             try {
                FileOutputStream fos = new FileOutputStream(filename);
                GZIPOutputStream gzos = new GZIPOutputStream(fos);
                ObjectOutputStream out = new ObjectOutputStream(gzos);
                out.writeObject(output_field);
                out.flush();
                out.close();
             }
             catch (IOException e) {
                 e.getStackTrace(); 
             }
          }

          @SuppressWarnings("unchecked")
        public List<String> loadArray(String filename) {
              try {
                FileInputStream fis = new FileInputStream(filename);
                GZIPInputStream gzis = new GZIPInputStream(fis);
                ObjectInputStream in = new ObjectInputStream(gzis);
                List<String> read_field = (List<String>)in.readObject();
                in.close();
                return read_field;
              }
              catch (Exception e) {
                  e.getStackTrace();
              }
              return null;
          }

        public File[] listFilesAsArray(File directory, FilenameFilter[] filter,
                int recurse) {
            Collection<File> files = listFiles(directory, filter, recurse);

            File[] arr = new File[files.size()];
            return files.toArray(arr);
        }

        public Collection<File> listFiles(File directory,
                FilenameFilter[] filter, int recurse) {

            Vector<File> files = new Vector<File>();

            File[] entries = directory.listFiles();

            if (entries != null) {
                for (File entry : entries) {
                    for (FilenameFilter filefilter : filter) {
                        if (filter == null
                                || filefilter
                                        .accept(directory, entry.getName())) {
                            files.add(entry);
                            Log.v("ImageViewFlipper", "Added: "
                                    + entry.getName());
                        }
                    }
                    if ((recurse <= -1) || (recurse > 0 && entry.isDirectory())) {
                        recurse--;
                        files.addAll(listFiles(entry, filter, recurse));
                        recurse++;
                    }
                }
            }
            return files;
        }
    } 
```

# c# - 子菜单回退到 jqGrid

> ID：10381271
> 
> 赞同：0
> 
> 时间：2012-04-30T09:24:01.927
> 
> 标签：c#, asp.net, jqgrid

我`Asp.Net` `jqGRid`在我的一个页面中使用，没有问题。但是我有一个下拉菜单，在这个阶段只包含几个子菜单，我遇到的问题是我的子菜单出现在后面。`jqGRid`我不知道怎么做我解决了这个问题。我尝试给`z-index`包含菜单的 div 更高的值，但没有帮助。这是图像

![在此处输入图像描述](../Images/0038521861fb78f2aa3dbc4beb149375.png) 任何建议都非常感谢。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T05:25:03.477

因此，通过将以下样式设置为包含 jqGrid 的我的 div jgGridDiv 来解决问题。这是我的代码

```
#jqGridDiv
{
position:relative;
z-index:1;
} 
```

现在工作正常。此外，我为包含菜单的 div 设置了更高的 z-index，这非常重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T10:03:52.123

我建议您使用 Chrome 的开发人员工具来检查创建 jqGrid 的 div 的“计算样式”。

我知道您描述的效果可能会出现两个问题：

*   IE兼容模式的使用。这是只能在 Internet Explorer 中存在的问题。由于这个问题，我尝试`<head>`在每个有 jqGrid 的页面上放置该行`<meta http-equiv="X-UA-Compatible" content="IE=edge" />`。它适用于所有`!DOCTYPE`HTML5 `!DOCTYPE`( `<!DOCTYPE html">`) 例外。更安全的是设置`"X-UA-Compatible"`

```
<system.webServer>
    <httpProtocol>
        <customHeaders>
            <clear />
            <add name="X-UA-Compatible" value="IE=edge"/>
        </customHeaders>
    </httpProtocol>
</system.webServer> 
```

（就像[这里](http://msdn.microsoft.com/en-us/library/cc817572.aspx)一样，但带有另一个`"X-UA-Compatible"`HTTP 标头值）

*   `z-index`将从您放置 jqGrid 的某些父 div 继承。在这种情况下，您可以考虑使用将分页器`<table>`和分页`<div>`器放置在附加的“容器”div 中，并设置为 div`position: relative; z-index: auto;`或`position: relative; z-index: 1;`（或其他小值）的样式。

# iphone - Xcode：带有引号解析问题的 XML 链接

> ID：10381275
> 
> 赞同：1
> 
> 时间：2012-04-30T09:24:19.317
> 
> 标签：iphone, xml, xcode, xml-parsing, quotes

我正在尝试解析 XML，但 XML 代码中的引号引起了问题并且无法运行。有没有办法调用这个xml `<table border="0" cellpadding="0" cellspacing="0" width="392">`，如代码所示？

预先感谢。

```
- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName 
{

    if ( [elementName isEqualToString:@" table border="0" cellpadding="0" cellspacing="0" width="392" "] ) {

        [[self titleArray] addObject:[self currentStringValueTitle]];

    }

    [self setCurrentStringValueTitle:nil]; 
```

我想阅读这个源页面

```
<body>
<table border="0" cellpadding="0" cellspacing="0" width="392">
    <tr>
        <td width="392" class="hdlnType2">
        <div
            style="FONT-WEIGHT: bold; FONT-SIZE: 1.12em; FLOAT: left; ">
            <!-- enable chat --> 

        I wanna print this text....

        </td>
    </tr>
    <tr>
        <td></td>
    </tr>
</table>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T10:16:36.177

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict {

     if([elementName isEqualToString:@"table"]){

         NSString *border=[attributeDict valueForKey:@"border"];
         NSString *cellpadding=[attributeDict valueForKey:@"cellpadding"];
         NSString *cellspacing=[attributeDict valueForKey:@"cellspacing"];
         NSString *width=[attributeDict valueForKey:@"width"];

     }

     if([elementName isEqualToString:@"div"]){

         //fetch values here like did for table tag from attributedDict

     }
} 

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string { 
if(!currentElementValue) 
    currentElementValue = [[NSMutableString alloc] initWithString:string];
else
    [currentElementValue appendString:string];
//NSLog(@"Processing Value: %@", currentElementValue);
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName 
   namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {

        if([elementName isEqualToString:@"div"]) {
            NSLog(currentElementValue,nil);
        }
        [currentElementValue release];
        currentElementValue = nil;
 } 
```

任何标签的参数都会被解析并保存到 didStartElement 方法的属性Dict 参数中

# haskell - 默认约束类型被忽略

> ID：10381278
> 
> 赞同：9
> 
> 时间：2012-04-30T09:24:26.043
> 
> 标签：haskell, default, type-constraints

我在定义默认约束时遇到了一个奇怪的问题。如果约束是单位，则不选择默认实例。在所有其他情况下，它按预期工作。

```
{-# LANGUAGE TypeFamilies, ConstraintKinds #-}
import qualified GHC.Exts as E

class Expression a where
  type Constr a v :: E.Constraint
  --type Constr a v = ()         -- with this line compilation fails
  --type Constr a v = v ~ v      -- compiles
  wrap :: Constr a v => a -> Maybe v

instance Expression () where
  wrap () = Just undefined

main = print (wrap () :: Maybe Int) 
```

有人可以澄清类型检查器行为的原因吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T15:26:54.920

这是 7.4.1 中关联类型默认值的错误。几周前，我在#haskell 上被告知这是一个已修复的已知错误，但我在 GHC trac 上找不到它的提及。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T10:08:11.183

不是真正的答案，但这不是关于`ConstraintKinds`

```
class Expression a where
   type Type a v
   type Type a v = ()
   wrap :: (Type a v) ~ () => a -> Maybe v

instance Expression () where
   wrap () = Just undefined

main = print (wrap () :: Maybe Int) 
```

不编译，但是

```
class Expression a where
   type Type a v
   type Type a v = v
   wrap :: (Type a v) ~ v => a -> Maybe v

instance Expression () where
   wrap () = Just undefined

main = print (wrap () :: Maybe Int) 
```

做

# c# - C# - 何时调用 base.OnSomething？

> ID：10381279
> 
> 赞同：3
> 
> 时间：2012-04-30T09:24:29.110
> 
> 标签：c#, winforms, winapi, overriding, base

我正在使用`Windows.Forms`并且必须继承一些控件来提供自定义行为。这种继承显然会导致方法覆盖。

*那么，问题来了*——在哪些情况下调用顺序`base.OnSomething(...)`会真正影响程序的可见行为？

```
protected override OnRetrieveVirtualItem(RetrieveVirtualItemEventArgs e)
{
    // base.OnRetrieveVirtualItem(e); - Could this potentially break something?

    // Perform your custom method.
    // ...

    base.OnRetrieveVirtualItem(e); // Is this always "correct"?
} 
```

`OnDrawItem, ...`据我所知，这个顺序在覆盖与绘画相关的*方法*（`Windows.Forms`

**那么，什么时候可能重要呢​​？**`base`在这些情况下，选择正确位置调用方法的经验法则是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T10:07:10.750

您只需要在`base.SomeVirtualMethod`该 API 的文档指定您应该这样做时调用。否则，它应该被暗示为可选的。要求您调用基本方法但没有明确说明的 API 设计得很糟糕。

需要基本调用的原因是糟糕的设计，因为您永远无法期望覆盖您的方法的人会做什么，并且您不能确定他们会调用基本方法来执行任何必需或关键代码。

所以简而言之，请参阅文档，否则通常没有必要。.NET Framework 是按照这样的准则设计的，由于这些原因，大多数虚拟方法不需要调用基。那些做的记录在案。

感谢 roken 指出调用基本虚拟方法的一个非常重要的原因是在使用事件时。但是，我认为情况并非总是如此的反驳仍然适用，特别是如果您使用不遵循 .NET 习惯用法和模式的第三方库或类，则无法确定。举这个例子。

```
namespace ConsoleApplication12
{
    using System;
    using System.Diagnostics;

    class Foo
    {
        public Foo() {
        }

        public event EventHandler Load;

        protected virtual void OnLoad() {
            EventHandler handler = Load;

            if (handler != null) {
                handler(this, new EventArgs());
            }

            Debug.WriteLine("Invoked Foo.OnLoad");
        }

        public void Run() {
            OnLoad();
        }
    }

    class DerivedFoo : Foo
    {
        protected override void OnLoad() {
            base.OnLoad();
            Debug.WriteLine("Invoked DerivedFoo.OnLoad");
        }
    }

    class Program
    {
        static void Main(string[] args) {
            DerivedFoo dFoo = new DerivedFoo();

            dFoo.Load += (sender, e) => {
                Debug.WriteLine("Invoked dFoo.Load subscription");    
            };

            dFoo.Run();
        }
    }
} 
```

`Foo.OnLoad`如果您运行此示例，您将获得对、`DerivedFoo.OnLoad`和事件订阅的三个调用`dFoo.Load`。如果您注释掉对`base.OnLoad`in的调用`DerivedFoo`，您现在只会获得一次对 的调用`DerivedFoo.OnLoad`，并且不会调用 base 和订阅者。

这一点仍然很重要，它取决于文档。仍然不能确定基本虚拟方法实现是否调用其订阅者。所以这应该很清楚。幸运的是，多亏了框架设计者，.NET 框架与 .NET 事件模型非常一致，但我仍然无法强调总是阅读 API 的文档。

当您根本不处理事件而是处理抽象基类之类的事情时，它会发挥很大作用。您如何知道是否为抽象类调用基事件？抽象类是否提供默认实现，还是希望您提供它？

文档是为虚拟会员定义合同的最有力、最清晰的方式。这就是 .NET 框架设计团队通常为交付的抽象类提供至少一个具体实现的原因之一。

我认为 Krzysztof Cwalina 在框架设计指南中说得最好。

> 我得到的一个常见问题是虚拟成员的文档是否应该说覆盖必须调用基本实现。答案是覆盖应该保留基类的契约。他们可以通过调用基本实现或其他方式来实现。很少有成员可以声称保留其合同（在覆盖中）的唯一方法是调用它。在很多情况下，调用 base 可能是保留合约的最简单方法（文档应该指出这一点），但很少绝对需要。

我完全同意。如果您覆盖基本实现并决定不调用它，您应该提供相同的功能。

我希望这能消除我在评论中的一些困惑。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T11:13:24.383

作为 WinForms 中的“经验法则”，对于 On[EventName]（即 OnFormClosing）方法，您必须调用基本方法才能让框架类触发相应的事件（否则该事件不会由控制）。设计不好与否，这是一种非常常见的模式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T09:33:53.777

In general, you'd better to call the base method first : it configures a class. Then you run your own logic.

**For example:** When you override `OnSelectedItemChanged` - you call base method, it switches you class to the right condition, and then you can do what you want (do something whith a new selected item).

So, it will be useful to know what's going on in base method. Maybe you don't need to call it.

**How to choose:** just check the class in DotPeek and see if you really need to call base method.

**When it matter:** The base method can override your changes. And you'll get strange behaviour.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-30T10:15:06.240

需要考虑的一种特殊情况：如果您使用 Dispose(bool) 习惯用法，则必须在清理自己的资源后调用 base.Dispose(bool)。

（我认为这与 Windows.Forms 相关，因为它们使用 Dispose(bool) 习语）

# jsp - 从 JSP 访问 struts 动作方法

> ID：10381286
> 
> 赞同：1
> 
> 时间：2012-04-30T09:24:49.880
> 
> 标签：jsp, struts2, struts

我在返回的 JSP 中从我的 struts 2 操作访问方法时遇到问题。据我了解，如果我有如下所示的操作：

```
public class HomeAction {
    public String execute() {
        return "SUCCESS";
    }

    public String getSomething() {
        return "somethh";
    }
} 
```

然后从 JSP 我应该能够调用`${something}`并`"somethh"`返回。然而，这似乎不能正常工作。有没有我可能错过的明显配置？我正在使用 struts 2、spring 3.1 和 tomcat 7。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T10:00:39.593

事实证明，环境问题导致 struts 行为异常。它按我的预期工作，为这个模糊的问题道歉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T10:03:52.673

我不确定您要做什么，因为您所问的内容非常抽象，并且总是更好地向您的 JSP 页面显示您正在尝试的地方，或者执行您所描述的事情，这样可以更好地展示其他人。

您需要告诉 S2 您希望它调用哪个方法，以防您尚未定义任何方法 default is `execute()`.

在您的情况下，您可以通过使用配置文件（struts.xml）或通过注释来告诉 S2 您要调用哪个方法

```
<action name="default" class="tutorial.HomeAction">
  <result>Welcome.jsp</result>
</action>
<action name="somethh" class="tutorial.HomeAction" method=getSomethh>
  <result>Welcome.jsp</result>
</action> 
```

在这里你必须配置不同的动作名称，比如`<s:url value="default.action"/> and <s:url value="somethh.action"/>`

如果您想要相同的操作名称但想要重定向到您的操作类的不同方法，您可以在您的`<s:url>`也喜欢配置方法名称

```
<s:url value="generic.action" method="getSomethh"> 
```

在上面的示例中，您通过标签告诉 S2 您要调用您的操作类的哪个方法，以及您需要在 struts.xml 文件中配置它们

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-30T09:36:30.190

你不能直接从jsp文件调用方法。如果你这样做，那么为什么mvc.Struts2是一个非常简单的框架。你可以配置方法和类strutsconfig.xml。并用一个动作映射它。实例变量可以直接在jsp中访问。例如如果你有一个方法

```
 public class ABCAction extends ActionSupport{
    public String getNames(){

    nameslist=dao.getNamelist();
    retrun "success";
    }
    //getters and setters for namelist
    public setNamesList(List nameslist){
    this.nameslist-namelist;

}
}
public List getNames(){
return this.nameslist;
}
} 
```

你可以直接在你的jsp中访问nameslist——

# c# - ASP.NET MVC 3 - 将字符串值显示为 Bool

> ID：10381287
> 
> 赞同：0
> 
> 时间：2012-04-30T09:24:52.347
> 
> 标签：c#, asp.net-mvc-3, razor

我希望能得到一些帮助。我有一个字符串值 - 将返回为 Y 或 N。在页面上，我想将其转换并显示为页面上的只读复选框。

我试过了

```
@Html.CheckboxFor( model => Convert.ToBoolean(MyString)) 
```

但它不喜欢那样。有没有人知道如何实现这一点。我需要在我的 c# 控制器页面中对我的字符串进行转换为 bool 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T09:32:00.683

在您的模型上创建一个进行转换的字段。`CheckBoxFor`期望一个，`Expression<Func<TModel, Boolean>>`因为它需要根据表达式知道属性名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T09:30:25.303

为什么将其存储为具有 Y/N 值的字符串？

我不知道您是否可以使用 CheckboxFor() 来做到这一点 - 您可能需要使用常规复选框，并确保它被禁用，并且该值`MyString == "Y"`应该根据您的存储选项返回 true 或 false。

不过，更明智的做法是在进入数据库的过程中将 Y/N 更改为 true/false，这样您就可以更实际地使用数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T09:31:36.417

关于什么：

> @Html.CheckBoxFor(Model => Model.MyString=="Y", new { @Readonly = "readonly" })

这可能有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-20T20:05:14.293

这种简单的方法效果很好

```
@Html.CheckBox("IsActive", Model.MyString == "Y" ? true : false) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-30T09:29:27.460

```
string stringValue = "true";
bool value;
bool.TryParse(stringValue, out value); 
```

或在 ASP.NET 中

```
@Html.CheckboxFor( model => C bool.Parse(model.MyString)) 
```

# asp.net - GridView 在同一列上有不同的控件

> ID：10381288
> 
> 赞同：0
> 
> 时间：2012-04-30T09:24:59.110
> 
> 标签：asp.net, gridview

我正在使用流动的 gridview 来绑定数据

```
 <asp:GridView ID="gvDesign" runat="server" AutoGenerateColumns="False" Width="190px" ShowHeader="false">

            <Columns>

            <asp:TemplateField HeaderText="Title" HeaderStyle-HorizontalAlign="Left">
                <ItemTemplate>

                <asp:Label ID="lblText" runat="server" Text='<%# Bind("Title") %>'></asp:Label>
                 </ItemTemplate>

                </asp:TemplateField>
                <asp:TemplateField HeaderText="Count" HeaderStyle-HorizontalAlign="Left">
                <ItemTemplate>

                 <asp:LinkButton ID="lbRevCount" runat="server" Text='<%# Bind("Count") %>' OnClick="lbRevCount_Click"></asp:LinkButton>
                 </ItemTemplate>

                </asp:TemplateField>

            </Columns>

        </asp:GridView> 
```

我只需要 gridView 的第一行就有链接按钮。其他行应该有一个标签。目前我在所有行上都有链接按钮。我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T09:29:24.747

试试下面的代码

```
protected override void Render(HtmlTextWriter writer)
    {

        for(int i = 1; i < gvDesign.Rows.Count; i++)
        {
            LinkButton lb = gvDesign.Rows[i].FindControl("lbRevCount") as LinkButton;
            if(lb != null)
               lb.Visible = false;
        }
        base.Render(writer);
    } 
```

希望能帮助到你。

# ios - iOS app 收不到 adWhirl 的广告怎么办

> ID：10381295
> 
> 赞同：1
> 
> 时间：2012-04-30T09:25:28.103
> 
> 标签：ios, iad, adwhirl

我已成功将 adWhirl 集成到我的 iOS 应用程序中。我在 Apple 文档中读到，如果您的应用没有任何广告可显示，那么您应该隐藏横幅。但在 AdWhirl 的情况下，它写在[AdWhirl 的常见问题解答中](http://code.google.com/p/adwhirl/wiki/FrequentlyAskedQuestions)

> AdWhirl SDK 是否会在尝试请求广告之前检查网络连接并防止电池耗尽？
> 
> 是的。客户端 SDK 在允许运行任何广告请求之前检查网络连接是否可用。如果没有可用的网络连接，则不会发出广告请求。因此，请注意，由于未发出任何广告请求，因此不会进行回调。

那么我该如何处理这种情况呢？Apple 会拒绝我的申请吗？任何形式的帮助都将受到高度赞赏。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T15:57:46.507

查看 iAd 的 AdWhirl 适配器，它看起来像这样初始化 AdBannerview：

```
 ADBannerView *iAdView = [[ADBannerView alloc] initWithFrame:CGRectZero]; 
```

然后只有在`bannerViewDidLoadAd:`回调中是广告集的框架，如下所示：

```
 CGRect newFrame = banner.frame;
 newFrame.origin.x = newFrame.origin.y = 0;
 banner.frame = newFrame; 
```

因此，我认为您不必担心这一点，因为 AdWhirl 的 iAd 适配器会确保广告的大小为 CGRectZero，直到实际广告出现。

# javascript - 获取子节点的最佳方法

> ID：10381296
> 
> 赞同：263
> 
> 时间：2012-04-30T09:25:35.807
> 
> 标签：jquery, javascript, dom, elements, children

我想知道，JavaScript 提供了多种方法来从任何元素中获取第一个子元素，但哪种方法最好？最好，我的意思是：在行为方面，大多数跨浏览器兼容、最快、最全面和可预测。我用作别名的方法/属性列表：

```
var elem = document.getElementById('container');
var child = elem.children[0];
var child = elem.firstElementChild; // == children[0] 
```

这适用于两种情况：

```
var child = elem.childNodes[0]; // or childNodes[1], see below 
```

这是在形式或`<div>`迭代的情况下。如果我可能遇到文本元素：

```
var child = elem.childNodes; // treat as NodeList
var child = elem.firstChild; 
```

据我所知，`firstChild`使用来自 的 NodeList`childNodes`并`firstElementChild`使用`children`. 我将这个假设基于 MDN 参考：

> `childNode`是对元素节点的第一个子元素的引用，或者`null`如果没有。

我猜测，就速度而言，差异（如果有的话）将几乎没有，因为`firstElementChild`实际上是对 的引用`children[0]`，并且`children`对象已经在内存中。

什么让我失望，是`childNodes`对象。我用它来查看表格元素中的表格。虽然`children`列出了所有表单元素，但`childNodes`似乎也包括 HTML 代码中的空格：

```
console.log(elem.childNodes[0]);
console.log(elem.firstChild); 
```

两个日志`<TextNode textContent="\n ">`

```
console.log(elem.childNodes[1]);
console.log(elem.children[0]);
console.log(elem.firstElementChild); 
```

所有日志`<input type="text"`……<代码>>。怎么会？我知道一个对象将允许我使用“原始”HTML 代码，而另一个坚持使用 DOM，但该`childNodes`元素似乎在两个级别上都有效。

回到我最初的问题，我的猜测是：如果我想要最全面的对象，`childNodes`就是要走的路，但由于它的全面性，就返回我想要的元素而言，它可能不是最可预测的/期待在任何给定的时刻。在这种情况下，跨浏览器支持也可能是一个挑战，尽管我可能是错的。

谁能澄清手头对象之间的区别？如果有速度差异，无论多么微不足道，我也想知道。如果我看到这一切都错了，请随时教育我。

* * *

PS：拜托，拜托，我喜欢 JavaScript，所以是的，我想处理这种事情。像“jQuery 为你处理这个”之类的答案不是我想要的，因此没有[jquery](/questions/tagged/jquery "显示标记为“jquery”的问题")标记。

* * *

## 回答 #1

> 赞同：243
> 
> 时间：2012-04-30T09:52:45.153

听起来你想多了。您已经观察到 和 之间的区别`childNodes`，`children`它`childNodes`包含所有节点，包括完全由空格组成的文本节点，而`children`只是作为元素的子节点的集合。这就是它的全部。

尽管有几个问题需要注意，但这两个集合都没有什么不可预测的：

*   IE <= 8 不包含纯空格文本节点，`childNodes`而其他浏览器包含
*   IE <= 8 包含注释节点，`children`而其他浏览器只有元素

`children`,`firstElementChild`和朋友只是方便，呈现仅限于元素的 DOM 过滤视图。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-04-30T09:33:39.940

firstElementChild 在 IE<9 中可能不可用（仅 firstChild）

在 IE<9 firstChild 是 firstElementChild 因为 MS DOM (IE<9) 不存储空文本节点。但如果你在其他浏览器上这样做，它们将返回空文本节点......

我的解决方案

`child=(elem.firstElementChild||elem.firstChild)`

即使在 IE<9 上，这也会给第一个孩子

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2014-11-24T10:18:54.570

跨浏览器的方法是使用`childNodes`get ，然后使用[ELEMENT_NODE](https://developer.mozilla.org/en-US/docs/Web/API/Node.nodeType)`NodeList`创建一个包含所有节点的数组。`nodeType`

```
/**
 * Return direct children elements.
 *
 * @param {HTMLElement}
 * @return {Array}
 */
function elementChildren (element) {
    var childNodes = element.childNodes,
        children = [],
        i = childNodes.length;

    while (i--) {
        if (childNodes[i].nodeType == 1) {
            children.unshift(childNodes[i]);
        }
    }

    return children;
} 
```

[http://jsfiddle.net/s4kxnahu/](http://jsfiddle.net/s4kxnahu/)

如果您使用诸如[lodash 之](https://lodash.com/)类的实用程序库，这尤其容易：

```
/**
 * Return direct children elements.
 *
 * @param {HTMLElement}
 * @return {Array}
 */
function elementChildren (element) {
    return _.where(element.childNodes, {nodeType: 1});
} 
```

**未来：**

您可以与伪类`querySelectorAll`结合使用（匹配作为选择器参考点的元素）：[`:scope`](https://developer.mozilla.org/en-US/docs/Web/CSS/:scope#Browser_compatibility)

```
parentElement.querySelectorAll(':scope > *'); 
```

在撰写本文时，Chrome、Firefox 和 Safari[`:scope`都支持此功能。](https://developer.mozilla.org/en-US/docs/Web/CSS/:scope#Browser_compatibility)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-06-21T17:44:57.730

只是为了添加其他答案，这里仍然存在值得注意的差异，特别是在处理`<svg>`元素时。

我已经使用了这两种方法`.childNodes`，`.children`并且更喜欢使用getter`HTMLCollection`提供的方法。`.children`

然而今天，我`.children`在`<svg>`. 虽然`.children`IE 支持基本 HTML 元素，[但不支持文档/文档片段*或*SVG 元素](https://developer.mozilla.org/en-US/docs/Web/API/ParentNode/children#Browser_compatibility)。

对我来说，我能够通过简单地抓取所需的元素，`.childNodes[n]`因为我不需要担心多余的文本节点。你也许可以这样做，但正如上面其他地方所提到的，不要忘记你可能会遇到意想不到的元素。

希望这对挠头试图弄清楚为什么`.children`在现代 IE 上的 js 中的其他地方有效而在文档或 SVG 元素上失败的人有所帮助。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-03-27T06:06:00.527

不要让空白欺骗你。只需在控制台浏览器中测试即可。

使用本机 JavaScript。这是两个具有相同类的“ul”集的示例。您不需要将“ul”列表全部放在一行中以避免出现空白，只需使用数组计数跳过空白即可。

`querySelector()`如何使用`childNodes[]`js fiddle 链接绕过空白： [https ://jsfiddle.net/aparadise/56njekdo/](https://jsfiddle.net/aparadise/56njekdo/)

```
var y = document.querySelector('.list');
var myNode = y.childNodes[11].style.backgroundColor='red';

<ul class="list">
    <li>8</li>
    <li>9</li>
    <li>100</li>
</ul>

<ul class="list">
    <li>ABC</li>
    <li>DEF</li>
    <li>XYZ</li>
</ul> 
```

# solr - 如何使用 DataImportHandler 生成 Id？

> ID：10381298
> 
> 赞同：3
> 
> 时间：2012-04-30T09:25:40.397
> 
> 标签：solr, dataimporthandler, dih

我是 Solr 的新手，我正在努力导入一些不包含 ID 字段的 XML 数据，尽管它说我的 schema.xml 是必需的：

一个 XML 示例：

```
<results>
<estacions>
<estacio id="72400" nom="Aeroport"/>
<estacio id="79600" nom="Arenys de Mar"/>
...
</estacions>
</results> 
```

架构.xml：

```
<uniqueKey>id</uniqueKey> 
```

此时，我需要从 http fetch 中导入这个 xml，然后我使用 DataimportHandler。这是我的 data-config.xml

```
<dataConfig>
    <dataSource type="URLDataSource" />
    <document>
            <entity name="renfe"                        
                    url="http://host_url/myexample.xml"
                    processor="XPathEntityProcessor"
                    forEach="/results/estacions/estacio"
                    transformer="script:generateCustomId">
                    <field column="idestacio"   xpath="/results/estacions/estacio/@id" commonField="true" />
                    <field column="nomestacio"  xpath="/results/estacions/estacio/@nom" commonField="true" />
            </entity>
    </document> 
```

然后，它似乎工作正常，但我收到以下错误：org.apache.solr.common.SolrException: [doc=null] missing required field: id

这让我认为我应该在导入时生成一个自动 ID，并使用 data-config.xml，但我不知道如何去做。

我应该怎么做？使用 ScriptTransformer？任何想法不胜感激

还有一个问题：我可以在导入期间强制一个值吗？

例如：（`<field column="site" value="estacions"/>`显然这不起作用）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T10:09:29.563

您可以使用以下代码生成 ID：

```
<dataConfig>
  <script><![CDATA[
        id = 1;
        function GenerateId(row) {
            row.put('id', (id ++).toFixed());
            return row;
        }
       ]]></script>
    <dataSource type="URLDataSource" />
    <document>
            <entity name="renfe"                        
                    url="http://host_url/myexample.xml"
                    processor="XPathEntityProcessor"
                    forEach="/results/estacions/estacio"
                    transformer="script:GenerateId">
                    <field column="idestacio"   xpath="/results/estacions/estacio/@id" commonField="true" />
                    <field column="nomestacio"  xpath="/results/estacions/estacio/@nom" commonField="true" />
            </entity>
    </document> 
```

# html - 带有图像的导航链接向右对齐（基本 CSS）

> ID：10381318
> 
> 赞同：0
> 
> 时间：2012-04-30T09:27:16.537
> 
> 标签：html, css

嗨，我有一个非常基本的问题，但我找不到对我有帮助的教程，而且似乎没有任何效果。

我有一个导航：

```
<ul>
 <li>
  <a href="?page=home" ><img src="img/HOME.png"/></a>
 </li>
 <li>
  <a href="?page=team" ><img src="img/TEAM.png"/></a>
 </li>
</ul> 
```

我想将链接标签中的图像向右对齐，这样我就得到了一个向右对齐的图像块。浮动不工作，文本对齐：右不工作和右：0px；位置：绝对；也不工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T09:30:56.663

`<a>`显式设置标签的宽度，`text-align: right`将起作用。如果您还没有，我建议您使用 FireBug（或替代方法）来查看页面上的框布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T09:34:04.450

检查继承和图像大小。无论如何，下面的css应该可以工作：

```
 ul li{float:right;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T09:34:37.393

不要使用`!important`.

您要使它们正确对齐吗？向右浮动。`li`并且`a`标签不是块元素 text align 不起作用，因为`li`'s 和`a`'s 只会扩展到内部的宽度。如果你想这样做，你需要弄清楚你想要列表的宽度，然后给 li 的宽度......这有意义吗？

[这样](http://jsfiddle.net/leereichardt/bfuu8/)的事情应该有帮助

# android - Android OpenGL ES - 使用 glTranslatef 或直接更新顶点

> ID：10381323
> 
> 赞同：2
> 
> 时间：2012-04-30T09:28:06.807
> 
> 标签：android, opengl-es

如果我的应用程序要修改对象顶点而不是使用 ，会不会提高性能`glTranslatef`？

NPC对象的顶点设置如下；这允许它们是屏幕宽度的 1/10，因为之前调用`gl.glScalef()`

```
protected float[] vertices = {
    0f, 0f, -1f,    //Bottom Left
    1f, 0f, -1f,    //Bottom Right
    0f, 1f, -1f,    //Top Left
    1f, 1f, -1f     //Top Right
}; 
```

目前我有一组在屏幕上绘制的 NPC 对象，当它们移动时，X 和 Y 值会更新，我`onDraw`可以访问这些对象以在正确的位置绘制 NPC。

```
onDraw(GL10 gl){
    for(int i=0; i<npcs.size(); i++){
        NPC npc = npcs.get(i);
        npc.move();
        translate(npc.x, npc.y);
        npc.draw(gl);
    }
} 
```

`translate(x,y)`- 在调用与`gl.glTranslatef()`屏幕大小和比例相关的计算方法时推送和弹出矩阵

`npc.draw(gl)`- 启用客户端状态并绘制数组

如果移动函数改变顶点和NPC对象，性能会不会提高？例如;

```
move(){
    // ... do normal movement calculations
    float[] vewVertices = {
    x, y, 0f,
    x+npc.width, y, z,
    x, y+npc.height, z,
    x+npc.width, y+npc.height, z
    }
    vertexBuffer.put(newVertices);
    vertexBuffer.position(0);
} 
```

我即将创建一个简短的测试，看看我是否可以看到任何性能提升，但我想问一下是否有人以前有过这方面的经验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T10:24:29.723

最好的方法是简单地使用 translate 函数，因为在平移过程中模型视图矩阵的转换包括对 3 个浮点值的操作，而顶点信息的变化与您拥有的顶点数量成正比。

恕我直言，您提出的方式非常不方便，您应该坚持使用矩阵操作来代替顶点操作。

有关翻译操作期间矩阵更改的更多信息，您可以参考此文档：

[http://www.songho.ca/opengl/gl_transform.html](http://www.songho.ca/opengl/gl_transform.html)

干杯毛里齐奥

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T08:36:54.420

就像 Maurizio Benedetti 指出的那样，只有当您的顶点数足够大时，您才会开始看到差异。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T07:54:43.030

在我当前的 Open GL 应用程序中创建测试状态后，直接更改顶点时似乎没有性能提升，超过使用`gl.glTranslatef()`

# gwt - GWT Editors - 处理不同的视图/编辑/创建布局

> ID：10381324
> 
> 赞同：1
> 
> 时间：2012-04-30T09:28:16.887
> 
> 标签：gwt, editor, requestfactory

我开始使用 GWT 编辑器框架。我的应用程序允许查看一些实体、编辑它们或创建新实体。但是，在每个州，表格的布局都有些不同——

1.  “查看”模式下的标签应该成为“编辑”和“创建”中的文本框
2.  某些字段仅在编辑/创建模式下可见，但在查看模式下不可见
3.  某些字段仅在创建时可编辑，但以后无法在编辑时更改
4.  总体布局可能不同（字段顺序、表单中的位置）
5.  还有很多很多...

我知道这是一个非常普遍的问题——我正在寻找能够强大而灵活地处理这些问题的最佳实践。我害怕的是不得不写三个不同的编辑器......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T17:49:02.747

也许你不喜欢听这个，但我为每个人创建了不同的编辑器。但最后，这与为每个编辑器使用相应 Composite 的不同 UIBinder 实现起来几乎没有什么区别。副编辑是相同的，因此它在一天结束时不包含那么多工作；

# c# - 如何在 C# 中对 Ms access 数据库表执行快速搜索

> ID：10381328
> 
> 赞同：-1
> 
> 时间：2012-04-30T09:28:33.637
> 
> 标签：c#, ms-access, search

大家好，我有一个来自 Ms access 的名为 VMS 的表，我想对表的不同字段进行简单搜索并将其显示在 C# 2010 的 datagridview 中，这是我尝试用于字段“plate no”但不起作用的代码有错误

```
private void textBox10_TextChanged(object sender, EventArgs e)
{
    vMSDataGridView.DataSource = 
        this.vMSDataSet.VMS.Select("PlateNo ="  & textBox10.Text);
 } 
```

任何帮助都将得到回报！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T09:37:59.020

如果 PlateNo 是一个字符串列，从您的代码中可以看出，那么您应该编写

```
this.vMSDataSet.VMS.Select("PlateNo ='"  + textBox10.Text + "'"); 
```

# android - ListView 项目布局

> ID：10381329
> 
> 赞同：1
> 
> 时间：2012-04-30T09:28:39.877
> 
> 标签：android, android-layout, android-listview, android-fragments

我正在设计我的应用程序，但我在设计 ListView 项目时遇到了一些问题。

附上你可以找到它的样子，以及我想要的样子。

这是项目的布局：

```
<TwoLineListItem xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:background="?android:attr/activatedBackgroundIndicator"
android:minHeight="?android:attr/listPreferredItemHeight" >

        <TextView android:id="@android:id/text1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="?android:attr/listPreferredItemPaddingLeft"
            android:layout_marginTop="8dip"
            android:textAppearance="?android:attr/textAppearanceListItem"
        />

        <RelativeLayout android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_alignParentRight="true" >

            <ImageView
            android:id="@+id/favourite_status"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_alignParentRight="true"
            android:layout_alignTop="@android:id/text1"
            android:src="@drawable/is_not_favourite"
            android:contentDescription="@string/list_favorites_status"
            android:background="@null"
            android:layout_margin="9dp"/>

        </RelativeLayout>

        <TextView android:id="@android:id/text2"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_below="@android:id/text1"
            android:layout_alignLeft="@android:id/text1"
            android:textAppearance="?android:attr/textAppearanceMedium"
        />

  </TwoLineListItem> 
```

问题是文本：我不希望描述在应该为空的空间中溢出。提前感谢您的帮助。

![它看起来如何](../Images/aaede0765a692c66823044ff9b89e852.png)

![应该如何](../Images/7f57a55b86be06ec4f117e1dce7eb169.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T09:35:45.930

很简单，您可以执行以下操作：

```
<LinearLayout
    ....
    android:orientation="horizontal" 
    ....>
    <LinearLayout
        ....
        android:orientation="vertical" 
        ....>
        <TextView />
        <TextView />
    </LinearLayout>
    <ImageView />
</LinearLayout> 
```

这是一个基本布局，您也可以使用 RelativeLayout 实现相同的效果

# cakephp - cakephp中递归的含义是什么？

> ID：10381334
> 
> 赞同：14
> 
> 时间：2012-04-30T09:28:55.677
> 
> 标签：cakephp

好吧，我正在关注的教程中有这行代码。但是，它没有为我提供有关递归的明确解释。我是 cakephp 的新手，并搜索了这个“递归”。我希望有人可以为我提供此代码的外行解释：

```
$this->Author->recursive = 1; 
```

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-30T09:33:24.447

谷歌上的第一个结果是对 Cakephp 本身的参考的明确解释：http: [//book.cakephp.org/2.0/en/models/model-attributes.html#recursive](http://book.cakephp.org/2.0/en/models/model-attributes.html#recursive)

需要设置与模型数据关联的记录的检索深度，以便在模型之间存在多个关联级别时限制从查询中获取的数据量。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-04-30T23:43:21.740

我建议您先检查文档。

递归定义将从数据库中获取的数据量，Cakephp 默认情况下将获取您正在查询的模型/表的数据以及链接到主模型/表的模型/表的数据（ hasmany，属于等）

通过设置递归，你强制 Cakephp 只获取一定数量的数据，它可能或多或少，取决于模型/表之间的关联深度和递归中指定的数量。

将 recursive 设置为 -1 只会获取您正在查询的模型的数据，将其设置得更高将要求 Cakephp 获取更深的关联。

可以说，在我们的应用程序中，我们有销售书籍的作者，他们得到了读者的评论。

作者 1 <> * 书 1 <> * 评论

如果我们在获取作者列表时没有设置递归，Cakephp 将获取作者列表、他们的书籍和评论。

```
$authors = $this->Author->find('all'); 
```

问题是对于每个列表显示，Cakephp 和数据库都在处理大量不必要的数据！这反过来会影响您的 http 和数据库服务器的性能。

假设列表以 10/s 的速度显示，每个列表显示 20 位作者（作者可以拥有从 1 本书到 *，假设 10 本书作为此示例的平均数量，每本书有 5 条评论）进行数学运算，您会看到服务器正在处理大量不必要的数据，这些数据最终不会被使用。

用户只想查看作者列表，因此无需获取所有书籍和评论，除非您要在控制器中处理它们或在视图中显示它们。我们可以通过将 recursive 设置为 -1 来实现。

```
$this->Author->recursive = -1; 
$authors = $this->Author->find('all'); 
```

您可能希望优化查询，使其仅获取您要使用的字段，这将提高整体性能，但这是另一个主题。

有时您会发现自己想做相反的事情：假设应用程序在用户登录时更新 Auth Session 变量（更新 ip、浏览器信息、oauth 令牌、组信息等）并且应用程序使用所有用户亲属信息以适应用户体验，例如，如果用户属于某个组，则显示该特定组的相关信息和选项，如果用户已允许应用访问第三方提供商（谷歌？）的某些帐户信息，则显示使用这种数据的服务 - 比如说显示 google+ feed 或其他东西 - 等等。

一旦用户登录后，获取用户的所有相关信息并将其存储在 Session 中会容易得多，作为回报，视图将使用这些信息来调整用户体验。一种方法是逐个获取相关数据并将其存储在 Session 中，或者简单地将递归设置为 2 并将结果存储在 Session 中，它将获取用户模型的所有相关数据。

* * *

## 旧响应

递归允许您定义从数据库中获取的数据量。可以说作者有很多出版物。

如果在从数据库中获取某个作者之前指定 -1 进行递归，如下所示：

```
$this->Author->recursive = -1; 
$author = $this->Author->findByName('Someone'); 
```

您将仅获得作者信息/您将仅从 Authors 表中获得信息，而不会从相关表（如出版物）中获得信息。

您可以使用以下代码自行查看：

```
//only author info

$this->Author->recursive = -1; 
$author = $this->Author->findByName('Someone');

//display the result
debug($author);

//get the author and related publications info
$this->Author->recursise = 1;
$authorAndPublications =  $this->Author->findByName('Someone');

//display result
debug($authorAndPublications);
exit; 
```

然后，递归属性指定您希望从数据库中获取多少信息。

我应该在哪里使用它？

假设每个作者至少有 10 篇出版物，并且您想查询数据库以查找作者，如果您没有指定递归属性，Cakephp 也会获取所有作者及其出版物！所以让我们说 50 个作者 * 10 个出版物......你明白了，你正在查询大量不必要的数据。

如果它是一个高流量的网站，这很重要，因为例如在每个作者列表显示中，您查询 500 个不必要的出版物信息（不会使用）只是为了在列表/表格中显示 50 个作者的一些信息。

通过使用递归 = -1; 在查询作者之前，您可以减轻数据库的压力，从而提高反应性和性能。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-30T09:32:44.090

从文档[v1.3](http://book.cakephp.org/1.3/en/The-Manual/Developing-with-CakePHP/Models.html#recursive)，[v2.0](http://book.cakephp.org/2.0/en/models/model-attributes.html#recursive)：

> recursive 属性定义了 CakePHP 通过`find()`,`findAll()`和`read()`方法获取关联模型数据的深度。
> 
> 想象一下，您的应用程序具有属于某个域并拥有许多用户的组，而这些用户又拥有许多文章。您可以根据希望从呼叫`$recursive`中返回的数据量设置为不同的值：`$this->Group->find()`
> 
> *...省略级别的文档...*
> 
> 将其设置为不高于您的需要。让 CakePHP 获取您不会使用的数据会不必要地减慢您的应用程序的速度。另请注意，默认递归级别为 1。

# java - 如何使用人工智能开发光学字符识别器？

> ID：10381343
> 
> 赞同：4
> 
> 时间：2012-04-30T09:29:42.123
> 
> 标签：java, artificial-intelligence, ocr

我开发了一个完全专用于字体类型及其大小的 OCR。我只是用来计算字体的高度和宽度，找出我与数据库值比较的比率，然后选择字体。

我想将逻辑扩展到所有类型的字体和大小。我想用人工智能来做到这一点。我看过一些开源 OCR 的 Coding。但是，不会有用的。

请指导我应该遵循/开始开发自己的 OCR 的方式。我想让它成为全世界的开源项目，也想为 Java 中的进一步项目特定开发提供 API。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T11:13:56.940

为此目的，有很多算法和具体工具。主流趋势是为此使用人工神经网络。在 java 中，最好的 ANN 库是 Neuroph。您也可以为此使用 Matlab，然后从 java 调用它（有很多教程如何做到这一点[http://www.cs.virginia.edu/~whitehouse/matlab/JavaMatlab.html](http://www.cs.virginia.edu/~whitehouse/matlab/JavaMatlab.html) 还有 R 语言可以帮你。

现在 OCR 也有很多新方法：计算智能甚至这样的东西： [http ://www.amazon.com/Knowledge-Based-Intelligent-International-Computational-Intelligence/dp/084939807X](https://rads.stackoverflow.com/amzn/click/com/084939807X)

# php - PHP如何对HTML进行转义

> ID：10381344
> 
> 赞同：5
> 
> 时间：2012-04-30T09:29:48.990
> 
> 标签：php, mysql

我有一些页面存储在数据库中。出于安全目的，所有页面在保存到数据库之前都被转义，但是当我打印页面时，HTML标签仍然被转义。像这样

```
<a href=\"mypage.se\" alt=\"\">Link</a> 
```

显然，这不是很好，所以我如何取消转义页面？我试过 html_entity_decode 没有任何成功。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-30T09:32:45.120

While data should be escaped before inserting it into the database, it shouldn't still be escaped when you take it out. The root cause of your problem is that it is being escaped **twice** between collection and examining it after it comes out of the database.

You should track down why it is being escaped twice and fix that.

That may leave the existing data broken though (it depends on if the data is being escaped twice on the way in or if it is being escaped on the way out of the database with [magic_quotes_runtime](http://www.php.net/manual/en/security.magicquotes.what.php)). If so, you will need to clean it up. That form of escaping has nothing to do with HTML and can be reversed with [`stripslashes`](http://php.net/stripslashes).

The clean up will look something like:

1.  SELECT * from database_table
2.  Create a [prepared UPDATE statement](https://stackoverflow.com/a/60496/19068) to update a row
3.  foreach row `stripslashes` on the data that was double escaped, pass the data to the prepared statement

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T09:31:25.880

使用`stripslashes()`：[http ://uk3.php.net/manual/en/function.stripslashes.php](http://uk3.php.net/manual/en/function.stripslashes.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T10:41:24.260

用于`stripslashes($str)`检索内容并删除在将内容插入数据库期间添加的斜线。

谢谢

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-04-30T09:49:20.887

mysql 数据库输入字符串应始终使用 mysql_real_escape_string() 进行转义，当它们出现时，应使用 stripslashes() 对其进行转义。对于像 id 这样的数字，应该使用 int() 将它们转换为整数，然后进行范围检查：例如，像 id 这样的 AUTO_INCREMENT 列默认以 1 开头。因此，对于从 $_GET[] 或 $_POST 获得的任何内容进行验证检查[]，检查您的 int() 编号是否 >= 1。通过 int() 过滤所有整数。通过 doubleval() 过滤所有实数，除非您正在处理货币值并且您有自己的十进制数类 - 浮点可以破坏金钱。

# javascript - Webrole 没有启动并且总是很忙

> ID：10381345
> 
> 赞同：5
> 
> 时间：2012-04-30T09:29:57.350
> 
> 标签：javascript, azure, azure-web-roles

我正在开发一个 Azure Web 应用程序。代码在我的本地机器上编译并运行良好。但是当我在 Azure 平台上上传包时，webrole 不会启动并给出忙碌状态并显示消息：“等待角色启动...系统正在初始化。[2012-04-30T09:19:08Z]”

Onstart() 和 Run() 都不包含任何代码。我不会阻止 OnStart 的返回。

但是我在javascript中使用window.setInterval。javascript 函数每 10 秒从数据库中检索一次值。

可以做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-30T15:54:10.257

在角色（Web 或 Worker）卡住的大多数情况下，我发现以下步骤非常有用：

1.  始终为您的角色添加 RDP 访问权限，因为在某些情况下，当角色卡住时，您仍然可以对您的实例进行 RDP 并自行调查问题。在某些情况下，您无法 RDP 到您的实例，因为依赖服务尚未准备好让您进入。因此，如果您启用了 RDP 或可以 RDP 到您的实例，请尝试让您登录。

2.  一旦您的实例具有 RDP。获取本地机器 IP 地址并直接在浏览器中启动。在内部 IP 地址从 10.xxx 开始，因此您可以根据您的端点配置打开浏览器，即[http://10.xxx:80](http://10.x.x.x:80)或[https://10.xxx:443](https://10.x.x.x:443)

3.  如果您无法通过 RDP 进入实例，那么最好的办法是获取诊断信息以了解问题所在。诊断信息在您的实例中收集并发送到 Azure 存储，由您在 WebRole.cs（在 Web 角色中）或 WorkerRole.cs（在 Worker 角色中）代码中配置。诊断在你的角色中发挥作用后，你可以在配置的 Azure Blob/表存储中收集诊断数据以了解问题。

4.  如果您没有 RDP 访问权限并且没有配置任何 Azure 诊断（或无法获取任何诊断数据来了解问题），最好的办法是通过以下链接联系 Azure 支持团队（24x7 通过网络或电话）他们将有能力访问您的实例（在您的许可下）并为您提供根本原因。

[https://support.microsoft.com/oas/default.aspx?gprid=14928&st=1&wfxredirect=1&sd=gn](https://support.microsoft.com/oas/default.aspx?gprid=14928&st=1&wfxredirect=1&sd=gn)

联系 Azure 支持时，请提供您的订阅 ID、部署 ID、您的 Azure 真实帐户 ID 和您的问题的简短描述。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T11:25:41.447

要检查的两件事：

1.  确保您的诊断连接字符串指向真实帐户，而不是开发存储
2.  检查 web.config 中的会话状态提供程序。默认情况下，它指向Windows Azure 中不存在的~~SQL Express LocalDB。~~

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T15:01:47.943

我遇到最多的原因是程序集丢失或无效。但是有几个很棒的帖子可以帮助解决这个问题，所以我自己不会深入探讨这个问题。

[http://social.msdn.microsoft.com/Forums/en-US/windowsazuretroubleshooting/thread/6c739db9-4f6a-4203-bbec-eba70733ec16](http://social.msdn.microsoft.com/Forums/en-US/windowsazuretroubleshooting/thread/6c739db9-4f6a-4203-bbec-eba70733ec16)

[http://blogs.msdn.com/b/tom/archive/2011/02/25/help-with-windows-azure-role-stuck-in-initializing-busy-stopped-state.aspx](http://blogs.msdn.com/b/tom/archive/2011/02/25/help-with-windows-azure-role-stuck-in-initializing-busy-stopped-state.aspx)

[http://blogs.staykov.net/2009/12/windows-azure-role-stuck-in.html](http://blogs.staykov.net/2009/12/windows-azure-role-stuck-in.html)

# android - Android：录制的视频未保存在图库中

> ID：10381346
> 
> 赞同：1
> 
> 时间：2012-04-30T09:30:00.450
> 
> 标签：android

我正在创建应用程序来录制视频并显示录制的视频。我关注[了 http://android-er.blogspot.in/2011/10/simple-exercise-of-video-capture-using.html](http://android-er.blogspot.in/2011/10/simple-exercise-of-video-capture-using.html)。但是视频开始录制，我停止了录制。但它不会显示在图库中。会在哪里……？或者我错过了保存录制的视频的任何内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T09:53:29.213

遵循Android 开发人员在其开发指南中提供的[相机示例。](http://developer.android.com/guide/topics/media/camera.html)

# php - PHP如何显示纯URL

> ID：10381347
> 
> 赞同：1
> 
> 时间：2012-04-30T09:30:14.650
> 
> 标签：php, javascript, url, seo

我正在使用一些 Javascript 和 PHP 来获取浏览器视口并根据访问者的浏览器/设备动态提供合适的布局。我的`index.php`文件是这样的：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body>

<?php
if (isset($_GET['width']) AND isset($_GET['height'])) {
  $layoutWidth = $_GET['width'];
      if ( $layoutWidth >= 240 && $layoutWidth <= 900 ) {
        require_once('layout1.php');
      } else {
         require_once('layout2.php');
      }
} else {
  echo "<script language='javascript'>\n";
  echo "  location.href=\"${_SERVER['SCRIPT_NAME']}?${_SERVER['QUERY_STRING']}"
            . "&width=\" + document.documentElement.clientWidth;\n";
  echo "</script>\n";
  exit();
}
?>
</body>
</html> 
```

**输出网址是这样的：**

`http://mydomain.com/index.php?&width=1600&height=812`

**我正在寻找的是一种使此 URL 看起来像的方法：**

`http://mydomain.com/`

**有可能这样做吗？如果是，那怎么办？**

任何 PHP 或纯 JavaScript 解决方案都可以

*（请不要使用 jQuery 或 MooTools 或任何此类库，因为这是我整个网站中唯一的 JavaScript 函数，为了完成这个小任务而加载 50 到 100 KB 的库没有任何意义。）*

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T10:48:25.733

您应该能够使用 .htaccess 重写 URL（代码不包括常见的资源类型和 index.php 循环）：

```
# Turn rewriting on
Options +FollowSymLinks
RewriteEngine On
# Redirect requests to index.php
RewriteCond %{REQUEST_URI} !=/index.php
RewriteCond %{REQUEST_URI} !.*\.png$ [NC]
RewriteCond %{REQUEST_URI} !.*\.jpg$ [NC]
RewriteCond %{REQUEST_URI} !.*\.css$ [NC]
RewriteCond %{REQUEST_URI} !.*\.gif$ [NC]
RewriteCond %{REQUEST_URI} !.*\.js$ [NC]
RewriteRule .* http://mydomain.com/ 
```

然后用于`$_SERVER["REQUEST_URI"]`访问实际请求的 URI，您可以从中解析高度和宽度值。例如

```
$height = 0;
$width = 0;
$requestParts = explode('?', $_SERVER['REQUEST_URI']);
$requestParts = explode('&', $requestParts['1']);
foreach ($requestParts as $requestPart) {
    $getVarParts = explode('=', $requestPart);
    if ($getVarParts['0'] == 'height') {
        $height = $getVarParts['1'];
    } else if ($getVarParts['0'] == 'width') {
        $width = $getVavParts['1'];
    }
} 
```

# java - 来自 Java 的 Flex 图表的 ArrayCollections

> ID：10381351
> 
> 赞同：1
> 
> 时间：2012-04-30T09:30:45.413
> 
> 标签：java, apache-flex, blazeds

当我们创建弹性图表时，例如柱形图，我们必须绑定一个 ArrayCollection，如下所示：

```
[Bindable]
private var chartData:ArrayCollection = new ArrayCollection([
    {X: "Jan", Y: 10},
    {X: "Feb", Y: 20},
    {X: "Mar", Y: 30}
]); 
```

如果我需要从 Java 后端获取这些数据，那么在 java 中可以使用什么样的数据结构？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T12:37:26.157

尝试这个

```
// this class is used for the arraylist/collection of point X and Y
// on actionscript side you will see the property you declare as public 
public class ChartPoint {
    public String X;
    public String Y;      
}

public class ChartData{          
 // method called from remoteobject from actionscript
 // it will return a java arraylist of type chartpoint
 // actionscript will receive an arraycollection with the property of 
 // ChartPoint you declared public
  public ArrayList<ChartPoint> getValuesFromChart()
  { 
   ArrayList<ChartPoint> chartData = new ArrayList<ChartPoint>();
   ....
   // initialization and fill the chartData list...
   return chartData;
  }
} 
```

在 actionscript 中，您将使用 AMF 协议...

```
ro = new RemoteObject();
ro.destination = "destination"; // configured in blazeds/tomcat server
var cs:ChannelSet = new ChannelSet();
var customChannel:Channel = new AMFChannel("my-amf", "http://your-amf-channel");
cs.addChannel(customChannel);
ro.channelSet = cs;             
ro.addEventListener(ResultEvent.RESULT,
    function(e:ResultEvent):void{       
        if (e.result != null)
        {                       
            // you have a result...
                   this.chartData = e.result;
        }               
    });         
ro.addEventListener(FaultEvent.FAULT,function(e:FaultEvent):void{ 
 // manage the error
});         

ro.getValuesFromChart(); 
```

# playframework-2.0 - play2.0中如何操作Session、Request和Response进行测试

> ID：10381354
> 
> 赞同：7
> 
> 时间：2012-04-30T09:30:58.927
> 
> 标签：playframework-2.0

嗨，我有一个身份验证服务，它适用于请求（一些 Header-Data 和 Cookie）、响应（设置或删除 cookie）和会话（存储 userId 和 rememberMe 信息）。

在 play 1.x 中，很容易伪造请求、响应、Cookie 和会话。它可以很容易地用`Session.current().set(new Session())`. 在 play 2.0 中，这不再起作用了。

如何在请求中添加 cookie？我怎么能操纵会话？我看到存在 FakeApplication 和 FakeRequest 但我没有得到它，如何使用它们。

任何提示表示赞赏。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-30T11:41:56.197

它还没有为 Play 2.0 做好准备，但在 Play 2.1（和当前的 master）中，您将能够编写：

```
fakeRequest(GET, "/foo")
    .withSession("bar", "baz")
    .withCookies(cookie("bah", "toto")); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T12:53:52.747

可以像 play1.x 那样做。中心点是`Context`. 此外，您必须创建一个`DummyRequest`实现所需方法的方法。然后可以创建以下内容

```
final Request request = new DummyRequest();
Context.current.set(new Context(request, new HashMap <String, String>(), 
        new HashMap <String, String>())); 
```

在你的测试中你可以得到`Context.current().session()`,`Context.current().response()`或`Context.current().request()`.

你可以在这里看到一个[test-example](http://bazaar.launchpad.net/~opensource21/permsec/trunk/view/head:/psec/test/de/ppi/psec/services/AuthenticationServiceTest.java)。

# java - 这里的断言平等是怎么回事？

> ID：10381356
> 
> 赞同：1
> 
> 时间：2012-04-30T09:31:08.860
> 
> 标签：java, reference, assert, equality

发现这个网站可能是为了测试想要的开发人员......

[http://www.devchallenge.co.uk/challenge-2](http://www.devchallenge.co.uk/challenge-2)

问题是这个...

> 根据给定的代码，以下哪些测试将返回“真”答案并通过，哪些将返回“假”答案并失败？

```
ArrayList array1 = new ArrayList();
ArrayList array2 = new ArrayList();

array1.add(1);
array1.add(2);
array1.add("Aviva");

array2.add(1);
array2.add(2.0);
array2.add("Aviva");

Asserts
   Equality
      (array1[0],array2[0]);

Asserts
   Equality
      (array1[1],array2[1]);

Asserts
   Equality
      (array1[2],array2[2]); 
```

显然答案是“失败”、“失败”、“通过”。

我不是 Java 开发人员——我假设这个挑战来自 Java（尽管没有说明）。

平等到底在做什么？它是检查相同的*对象*还是相同的*值*？我知道有些对象被嵌入到 Java 中的字符串/整数池中，所以我可以理解为什么最后一个对象是正确的。但是为什么第一个不是真的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T09:38:15.977

这不是有效的 Java 语法。你不能打电话`Asserts Equality ()`。

作为 JUnit 测试中的断言，这必须是`Assert.assertEquals(array[0], array2[0])`导致比较两个`Integer`s 的原因。所以这应该通过。

所以我也不明白你对该代码提出的结果。我会说通过，失败，通过是正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T09:43:53.727

如果标量被“自动装箱”，那么它们将具有不同的对象持有者，因此 == 的测试将是错误的，但字符串将通过 == 测试，因为编译器确保与常量相同的确切字符串是用过的。如果您正在考虑 .equals() 测试，那么它们都将是相等的。

# java - Ubuntu 11（64 位）上的 JAVA/JAI？

> ID：10381362
> 
> 赞同：2
> 
> 时间：2012-04-30T09:31:27.347
> 
> 标签：java, ubuntu

我可以在 Ubuntu 11（64 位）上从 Oracle（jre 和 jdk）安装 Java 7 吗？听说 Sun Java 下架了，不得不用 openJDK。那正确吗？那么JRE呢？

**编辑**

我下载了 JAI 和 ImageIO 文件，然后按照以下说明操作： [http](http://docs.geoserver.org/latest/en/user/production/java.html#installing-native-jai-on-linux) ://docs.geoserver.org/latest/en/user/production/java.html#installing-native-jai-on-linux 但是当我运行它时：

```
sudo sh jai-1_1_3-lib-linux-amd64-jre.bin
sudo sh jai-1_1_3-lib-linux-amd64-jdk.bin 
```

我得到了错误：

```
this is not a proper jdk directory. exiting install. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T10:49:46.627

> 我从 Oracle 下载了 jre 和 jdk。然后当我运行它时：
> 
> ```
> sudo sh jai-1_1_3-lib-linux-amd64-jre.bin
> sudo sh jai-1_1_3-lib-linux-amd64-jdk.bin 
> ```

您下载的不是 JRE 或 JDK，而是[Java Advanced Imaging library](http://download.java.net/media/jai/builds/release/1_1_3/README.html)。

> 我可以在 Ubuntu 11（64 位）上从 Oracle（jre 和 jdk）安装 Java 7 吗？听说 Sun Java 下架了，不得不用 openJDK。那正确吗？那么JRE呢？

哪个 Ubuntu 11？每年有两个版本，分别在 4 月和 10 月：11.04 (Natty) 和 11.10 (Oneiric)。和软件包`openjdk-7-jdk`可`openjdk-7-jre`从 Ubuntu 11.10 获得。

由于许可原因，Sun/Oracle JDK/JRE 已从主要发行版中删除。OpenJDK JDK 和 JRE 与 Sun/Oracle JDK 和 JRE 非常相似（大部分代码库是共享的），尽管您可能会发现某些版本在 Ubuntu 打包方面可能会滞后。例如，Ubuntu 10.04 (Lucid) 仍在提供 OpenJDK 6b20，它远远落后于最新的 Oracle Java 6 版本（更新 32），后者提供了各种修复，包括针对安全相关的问题（尽管一些安全补丁被退回-移植）。

如果您想使用 OpenJDK，请安装`openjdk-7-jdk`和`openjdk-7-jre`软件包（前提是您至少运行的是 Ubuntu 11.10）。

否则，您可以从以下地址下载 Oracle JRE/JDK 二进制包：[http ://www.oracle.com/technetwork/java/javase/downloads/index.html](http://www.oracle.com/technetwork/java/javase/downloads/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T09:41:00.800

请注意，OpenJDK 可通过软件包系统获得，但我不记得 Java 7 是否包含在 Ubuntu 11 中。

`apt-get install openjdk-6-jdk` 对于 Java 6 和`apt-get install openjdk-7-jdk`Java 7。

如果您不能使用 OpenJDK 但必须使用 Oracle 或 IBM 实现，您可以下载这些实现并手动设置 PATH 和 JAVA_HOME 变量。

# jquery - 浏览器中的 AJAX 请求问题

> ID：10381366
> 
> 赞同：2
> 
> 时间：2012-04-30T09:31:42.670
> 
> 标签：jquery, error-handling, cross-browser, jsonp

我正在对我的服务器执行一些 AJAX 请求。两种情况下请求类型和参数完全相同，但来自服务器的响应类型不同。

**案例一**：

这是 Titanium 中使用钛网络 http 客户端的实现。

```
var xhr = Ti.Network.createHTTPClient({
    onload : function() {
        alert('sucess');
    },
    onerror : function(e) {
         alert('error');
    },
    timeout : 5000
});
var main_url = "http://localhost:3000/shops/560/login.json?api_token=some_token&customer[phone_number]=9988776655&customer[pin]=9876";
xhr.open('GET', main_url);
xhr.send(); 
```

它完美地返回了响应，似乎对我有用。

**案例2**：

这是使用 JQuery AJAX 方法在本地文件中的实现。

```
var main_url = "http://localhost:3000/shops/560/login.json?api_token=some_token&customer[phone_number]=9988776655&customer[pin]=9876";

       $.ajax({
        url: main_url,
        type: "GET",
        dataType: "json",
        timeout: 5000,
        success: function(data, status, xmlstatus) {
            alert("success");
        },
        error: function(data, status, xmlstatus){
            if (t === "timeout") {
                alert("timeout");
            } else {
                alert("some error");
            }
        }
     }); 
```

但是由于**浏览器中的****跨域策略**，它返回

 **```
 XMLHttpRequest cannot load http://localhost:3000/shops/560/login.json?api_token=some_token&customer[phone_number]=9988776655&customer[pin]=9876\. Origin null is not allowed by Access-Control-Allow-Origin. 
```

所以，为了避免这种情况，我添加了另一个参数

```
 &callback = ? 
```

但它仍然返回

```
 alert('some error'); 
```

无法弄清楚事情哪里出错了。当 URL、参数、类型一切都一样。

**- - - - - - - -编辑 - - - - - - -**

挖掘 iniside 给了我回应：

```
 console.log(data) => parsererror 
```

和

```
 console.log(xmlstatus) => jQuery164023596301255747676_1335786441349 was not called 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T11:56:49.887

我认为您的服务器没有用 jsonp 回答，而只是用 json 回答。

JSONP 的答案是这样的：

```
callback(someJson) 
```

其中 callback 是您提供的回调名称或 jquery 自动提供的名称。您不能简单地在 JSONP 中调用为 JSON 查询创建的服务器。

这是一个示例（有点复杂，它是真实的代码，但也许您会过滤与您的问题无关的内容）：

客户端：[https ://github.com/Canop/braldop/blob/master/chrome/braldop/inext_com.js](https://github.com/Canop/braldop/blob/master/chrome/braldop/inext_com.js)

服务器：[https ://github.com/Canop/braldop/blob/master/go/src/braldopserver/BraldopServer.go](https://github.com/Canop/braldop/blob/master/go/src/braldopserver/BraldopServer.go)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T11:40:54.140

正如您所说的“本地文件”，请注意，如果您使用协议 file:// 加载文件，则不能在 ajax 中做很多事情。即使服务器是 localhost，您也需要使用 http://。**

# java - 如何在 Hadoop 的 MultithreadedMapRunner 中设置线程数？

> ID：10381371
> 
> 赞同：0
> 
> 时间：2012-04-30T09:32:03.837
> 
> 标签：java, hadoop, mapreduce

我正在使用 JobConf 并且我正在使用这样的多线程映射器：

```
import org.apache.hadoop.mapred.lib.MultithreadedMapRunner;
conf.setMapRunnerClass(MultithreadedMapRunner.class); 
```

现在如何设置线程数？

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T10:32:22.093

它在该类的 Javadoc 中，但是有一个关于 javadoc 没有正确生成该类的[JIRA 错误。](https://issues.apache.org/jira/browse/MAPREDUCE-2815)无论如何，您正在寻找的财产是：

`mapred.map.multithreadedrunner.threads`

# asp.net - 在 Linq 到实体框架查询中使用“包含”查询性能问题

> ID：10381374
> 
> 赞同：1
> 
> 时间：2012-04-30T09:32:06.510
> 
> 标签：asp.net, entity-framework-4, linq-to-entities

我正在使用实体框架 4.0。我已经使用 conatins 查询实体表来再次检查 id 列表。例如

```
List<int> lstIds = lstComapreObjaects.select(c => c.Id).ToList();
IQueryable<ResultedEntity> qry = from su in Context.ResultedEntites 
                                 where lstIds.Contains(su.Id ?? 0) == true
List<ResultedEntity> lst = qry.ToList(); 
```

这工作正常，但问题是执行查询大约需要 3-4 分钟......

所以我的问题是如何提高性能？？？我可以在实体和通用列表之间加入吗？？？

# ios - 使用 Sandbox 在 iOS 中测试应用内购买的问题

> ID：10381375
> 
> 赞同：2
> 
> 时间：2012-04-30T09:32:08.097
> 
> 标签：ios, in-app-purchase, sandbox

在使用沙盒进行测试时，我在 iOS 中使用应用内购买时遇到了奇怪的行为。我观察到的几件事，请在我错的地方发表评论。

1.  我知道沙盒的订阅时间间隔很短，比如 30 分钟订阅 6 个月。我正在使用订阅模式，当我尝试多次购买同一个项目时，它允许。那样可以么 ？根据我的理解，它应该只允许购买一次，在随后的电话中，它应该说“已经购买”。
2.  当我恢复我之前的购买时。Storekit 正在调用具有大量先前事务的 updateTransations。不知道为什么它在每次还原时都会返回 100、200、245、360、650 之类的大量数据，这似乎是随机的。

请发表您的意见。提前致谢。

问候， OP

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T08:11:15.523

各位，

```
 As I did not get reply on this thread. We have done testing an make the app live, app is working fine. Here are my comments that might be helpful to others. 
```

1.  使用沙盒进行测试时，由于时间间隔与实时应用不同。您可以获得 5 分钟的 3 个月订阅时间，依此类推，因此一旦您的订阅到期，您的订阅将被续订。如果您在订阅有效的情况下再提出一次付款请求，您将收到已购买的弹出窗口。
2.  苹果发送大量交易，我们需要自己添加条件，这样我们才能识别当前交易并只处理，其余的将被忽略。

希望这会对大家有所帮助。

谢谢，欧姆

# javascript - 如何更改ajax获取帖子

> ID：10381377
> 
> 赞同：-1
> 
> 时间：2012-04-30T09:32:17.943
> 
> 标签：javascript, ajax

我已经阅读了论坛和谷歌，但我只是不明白如何将我的 ajax GET 查询更改为 POST。如果有人可以帮助我实现它，那就太好了。谢谢！

这是我的代码：

```
function ajax(query,parameters,progress_div,progress_txt,result_div) { 
            //  Sisend:
            //      0 or 1 | (main_error) error string OR (resdiv) result string

            var xmlhttp;

            if (progress_div) { progdiv = document.getElementById(progress_div); }
            if (result_div) { resdiv = document.getElementById(result_div); }

            if (progdiv) { progdiv.innerHTML = progress_txt; }

            // ajax
            if (window.XMLHttpRequest) {
                  xmlhttp=new XMLHttpRequest();
            }
            else {
                  xmlhttp=new ActiveXObject('Microsoft.XMLHTTP');
            }
            xmlhttp.onreadystatechange=function() {
                if (xmlhttp.readyState==4 && xmlhttp.status==200) {
                    var response = xmlhttp.responseText;
                    var string = response.split("<?php echo $vs; ?>");

                    //kui päring oli ok
                    if (string[0] == '1' || string[0] == '0') {
                        if (progdiv) { progdiv.innerHTML = ''; }
                        if (resdiv) { resdiv.innerHTML = string[2]; }
                    }
                    else {
                        errdiv = document.getElementById('main_error');
                        if (string[0] == '0') { errdiv.innerHTML = string[2]; }
                        else { errdiv.innerHTML = string[0]+string[1]; }
                        progdiv.innerHTML = '';
                        errdiv.style.display = 'block';
                    }
                    if (string[0] == '1' && string[1] != '0') {
                        window.location.href = string[1];
                    }
                }
            }
            xmlhttp.open('GET','?leht=ajax&query='+query+'&parameters='+parameters,true);
            xmlhttp.send();
            return false;
        } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-30T09:41:18.733

更改以下行

```
xmlhttp.open('GET','?leht=ajax&query='+query+'&parameters='+parameters,true); 
```

像这样

```
var url = 'http://yoursite.com/yourfile.php?leht=ajax&query='+query+'&parameters='+parameters;
xmlhttp.open("GET", url, true); //GET method
xmlhttp.open("POST", url, true); //POST method 
```

您错过了行中的文件名。

jQuery POST

```
$.ajax({ url: "yourfilename.php",

data: {leht: 'ajax',"query":query,"parameters":parameters},

type: 'post',

success: function(output) {
    //process the output

}

}); 
```

# c# - 远程检查交换凭据并检查用户登录

> ID：10381378
> 
> 赞同：5
> 
> 时间：2012-04-30T09:32:22.653
> 
> 标签：c#, winforms, exchangewebservices, exchange-server-2010

我尝试过这个并没有太大成功。基本上我需要使用 EWS 远程登录到 Exchange。

问题是我不知道用户是否登录正常，或者凭据是否错误，因为我什么也没得到！如果我提供了错误的凭据，软件就会继续运行！

有什么我遗漏的吗，我检查了有关 EWS 的 MSDN 资料，它向您展示了如何连接到交换，但没有关于验证凭据的内容！

下面是我目前必须连接的代码。

```
public void connect(string Email, string Password)
    {
        try
        {            
            _useremail = Email;
            _userpass = Password;

            // Define the credentials to use.
            var credentials = new WebCredentials(_useremail, _userpass);

            _ExchangeServer = new ExchangeService(ExchangeVersion.Exchange2010_SP1);
            _ExchangeServer.Credentials = credentials;
            _ExchangeServer.Url = new Uri(_ExchangeEWSURL);
            _ExchangeServer.Timeout = 60;
            _ExchangeServer.KeepAlive = true;
            _ExchangeConnected = true;
        }
        catch (Exception ex)
        {
            _ExchangeConnected = false;
            throw ex;
        }
    } 
```

正如您目前所看到的，我只是在类中将 bool 值设置为 true。有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-30T13:54:58.987

为了检查给定的凭据是否有效，您必须查询您希望用户有权访问的资源（*日历、收件箱、联系人等*）。没有明确的**登录**方法 - 当您请求用户资源（*通过[`FindItems`](http://msdn.microsoft.com/en-us/library/microsoft.exchange.webservices.data.exchangeservice.finditems%28v=exchg.80%29.aspx)、、等[`FindFolders`](http://msdn.microsoft.com/en-us/library/microsoft.exchange.webservices.data.exchangeservice.findfolders%28v=exchg.80%29.aspx)[`FindAppointments`](http://msdn.microsoft.com/en-us/library/microsoft.exchange.webservices.data.exchangeservice.findappointments%28v=exchg.80%29.aspx)*）时*，身份验证会隐式发生。*

# iphone - 取消导航栏图像

> ID：10381379
> 
> 赞同：0
> 
> 时间：2012-04-30T09:32:23.187
> 
> 标签：iphone, ios, xcode, uiimageview, uinavigationbar

我想关闭我的导航栏图像（*不是背景图像*）。也就是说，我在左侧设置了导航栏图像。当我转到下一个控制器时，图像与后退按钮重叠。这是我的主屏幕，带有蓝色标记的图像。![主屏幕](../Images/a8415dd06bf8768938b404071609c5f7.png)

这是我的第二个屏幕，图像重叠

![在此处输入图像描述](../Images/aac87adf457e7ab69f1751d914049e56.png)

这是我用来在栏中设置图像的代码

```
UINavigationBar *bar = [self.navigationController navigationBar];
UIImageView *barImg=[[UIImageView alloc]initWithFrame:CGRectMake(2, 3, 49, 39)];
barImg.image=[UIImage imageNamed:@"smalllogo.png"];

[bar addSubview:barImg];
[barImg release]; 
```

现在我不想在我的其他屏幕上显示图像，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T10:12:45.723

您已在导航栏中添加了图像，但在移动到其他视图之前未将其删除。使用`

```
-(void)viewWillDisappear:(BOOL)animated{

    [barImg removeFromSuperview];
}` 
```

将其从超级视图中删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T09:52:06.093

您可以做的一件事是在方法中添加您的图像，并在`viewWillAppear:`方法时将其从导航栏中删除`viewWillDisappear:`。相关代码块如下。

```
 - (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    UINavigationBar *bar = [self.navigationController navigationBar];
    UIImageView *barImg=[[UIImageView alloc]initWithFrame:CGRectMake(2, 3, 49, 39)];
    barImg.image=[UIImage imageNamed:@"smalllogo.png"];
    barImg.tag = 100;
    [bar addSubview:barImg];
    [barImg release];
}

- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];
    UINavigationBar *bar = [self.navigationController navigationBar];
    [[bar viewWithTag:100] removeFromSuperview];
} 
```

或者这是另一个简单的解决方案。将以下代码段添加到`viewWillAppear:`方法中

```
UIBarButtonItem *item = [[UIBarButtonItem alloc] initWithCustomView:[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"smalllogo.png"]]];
[self.navigationItem setLeftBarButtonItem:item];
[item release]; 
```

# c# - 如何从 IEnumerable 正确转换 列出 ?

> ID：10381382
> 
> 赞同：1
> 
> 时间：2012-04-30T09:32:35.070
> 
> 标签：c#, linq, list, ienumerable

我有这个 LINQ

```
 var questions = _context.Questions
            .Where(q => q.Level.Level == level)
            .Select(q => new QuestionViewModel
            {
                Text = q.Text,
                Id = q.Id,
                IsMultiSelected = q.IsMultiSelected,
                AnswerViewModels = q.Answers
                                       .Select(
                                           a => new AnswerViewModel
                                                    {
                                                        Checked = false,
                                                        Text = a.Text,
                                                        Id = a.Id
                                                    }) as List<AnswerViewModel>
            });
        return questions.ToList(); 
```

我明白了

```
Exception Details: System.NotSupportedException: The 'TypeAs' expression with an input of type 'System.Collections.Generic.IEnumerable`1' and a check of type 'System.Collections.Generic.List`1' is not supported. Only entity types and complex types are supported in LINQ to Entities queries. 
```

在

```
return questions.ToList(); 
```

我不在选择中使用匿名类型。如何解决此错误？

# 更新

我编写了一些解决方案

```
 List<QuestionViewModel> result = new List<QuestionViewModel>();
    var questions = from q in _context.Questions
                    where q.Level.Level == level
                    select new QuestionViewModel()
                               {
                                   Text = q.Text,
                                   Id = q.Id,
                                   IsMultiSelected = q.IsMultiSelected,
                                   AnswerViewModels = from a in q.Answers
                                                      select new AnswerViewModel
                                                                 {
                                                                     Text = a.Text,
                                                                     Id = a.Id,
                                                                     Checked = false
                                                                 }
                               };
    var qList = questions.ToList();
    for(int i = 0; i < questions.Count(); i++)
    {
        var q = qList[i]; //question
        var a = q.AnswerViewModels.ToList(); //answers for question
        var answers = new List<AnswerViewModel>(); //List answers
        for(int j = 0; j < a.Count(); j++)
        {
            //add new Answer from IEnumerable<AnswerViewQuestion> to List<...>
            answers.Add(new AnswerViewModel
                            {
                                Checked = false,
                                Id = a[j].Id,
                                Text = a[j].Text
                            });
        }
        result.Add(q);
    } 
```

如何优化？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T09:35:35.973

问题在于

```
.Select(a => new AnswerViewModel { ... }) as List<AnswerViewModel> 
```

它应该是

```
.Select(a => new AnswerViewModel { ... }).ToList() 
```

原因是，将 LINQ 生成的转换为 a 的正确方法`IEnumerable`当然`List`是调用`ToList`扩展方法，您已经在给出的​​最后一行中执行了该方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T09:40:13.853

尝试这样的事情：

```
var questions = _context.Questions
            .Where(q => q.Level.Level == level)
            .Select(q => new QuestionViewModel
            {
                Text = q.Text,
                Id = q.Id,
                IsMultiSelected = q.IsMultiSelected,
                AnswerViewModels = q.Answers
                                       .Select(
                                           a => new AnswerViewModel
                                                    {
                                                        Checked = false,
                                                        Text = a.Text,
                                                        Id = a.Id
                                                    })
            }).AsEnumerable().Select(x => new QuestionViewModel
              {
                   Text = x.Text,
                   Id = x.Id,
                   IsMultiSelected = x.IsMultiSelected,
                   AnswerViewModels = x.Answers.ToList()
               });
        return questions.ToList(); 
```

# solr - 如何存储文章的关键字

> ID：10381383
> 
> 赞同：0
> 
> 时间：2012-04-30T09:32:36.877
> 
> 标签：solr

在 SOLR 中，我有一个包含`id, words (indexed), raw_text`字段的文档。我想以`words`这种方式搜索字段：单词是文章的不定式（或说关键字）。对于解析和词形还原（词干），我使用了另一个工具，所以这不是问题的重点。

例如：对于这两篇文章（文本），单词将是：

**1**昨天我没有去上班，因为是假期。

话：昨天上班，因为假期

**2**明天我早上去上班，晚上去购物。

话：明天上班早上晚上去商店

**3个** 字：明天上班

在搜索“go”时，我希望首先检索**2**（更相关），因为“go”-s 比**1**多。此外，我想对一堆单词使用更长的查询，并且大部分时间都检索到包含大部分单词的文章。

例如：搜索：“去明天工作”将返回**2**比**3**更相关，因为有两个“去”-s 与只有三分之一**相反**

那么**问题**来了：我应该如何存储`words`？多值还是单值？应该使用什么字段类型？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T10:00:13.610

（单值）`text`会适合你。

文本带有标记化、词干和停用词分析器。

* * *

Stemming 使用启发式方法来推导单词的词根。除此之外，它甚至可以以不定式形式找到您文章的根源:-)

为您的样本试一试（添加一些内容）[：](http://qaa.ath.cx/porter_js_demo.html)

```
Original: Yesterday [yesterday's] I didn't go to work [working, workable], because it was holiday [holidays].
Stemmed: Yesterdai yesterdai s I didn t go to work work workabl becaus it wa holidai holidai
Original: Tommorrow I am going [go,going,gone] to work in the morning [mornings] and in the evening I am going shopping [shoppers, shops].
Stemmed: Tommorrow I am go go go gone to work in the morn morn and in the even I am go shop shopper shop 
```

因为它使用启发式，“workable”不与“work”共享根，“gone”不与“go”共享根。**但它是一种折衷方案，在不降低结果质量的**情况下工作得更简单、更快捷。

* * *

而“didnt”和“I”[根据这个列表](http://www.ranks.nl/resources/stopwords.html)是停用词，所以它们会被自动消除。

* * *

如果您经常观察到不可接受的结果，请尝试实施[Wordnet](http://wordnetweb.princeton.edu)。他们[有](http://wordnet.princeton.edu/man/wngloss.7WN.html)引理、词性和其他自然语言的好东西。

# web-services - Why does Dynamics AX Client stop working, after deploying a Service Group?

> ID：10381385
> 
> 赞同：4
> 
> 时间：2012-04-30T09:32:38.460
> 
> 标签：web-services, x++, dynamics-ax-2012, axapta

I know this is not a coding issue, but this is part of the development in AX.

> THE PROBLEM > After deploying a Service Group in the Client, AX crashes and I get this error:
> 
> Microsoft Dynamics AX has stopped working

and then

> Microsoft Dynamics AX is restarting

This happens every time when I try to deploy a Service Group.

I develop in MS Dynamics AX 2012

Thank you in advance.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T10:37:02.657

首先尝试增量 CIL 更新，如果这不能解决问题，请尝试完整 CIL 更新。

还要检查 Windows 应用程序日志以了解错误的任何详细信息。

# jquery - how can i remove checkboxes text

> ID：10381386
> 
> 赞同：2
> 
> 时间：2012-04-30T09:32:39.487
> 
> 标签：jquery

i can simply remove checked checkboxes with this code

```
 $(".ImdbAddArtist:checked").slideUp('slow'); 
```

however, i cannot delete checkbox's texts

How can i do that ?

For example

```
 <input type="checkbox" value="1500-374-Tom Cruise" class="ImdbAddArtist" name="artist[]">Tom Cruise 
```

for example, when i remove with this code

```
 $(".ImdbAddArtist:checked").slideUp('slow'); 
```

It only removes checkboxes.How can i remove also text? In example, it's Tom Cruise

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T09:36:02.460

将其包裹在标签中。包装在标签中的好处是标签也可以点击。

```
<label id="myLabel"><input type="checkbox" value="1500-374-Tom Cruise" class="ImdbAddArtist" name="artist[]">Tom Cruise</label> 
```

# ruby - ruby automate multiple regular expression replacements

> ID：10381390
> 
> 赞同：1
> 
> 时间：2012-04-30T09:32:55.867
> 
> 标签：ruby, regex

i want do do multiple regular expression replacements on a array, i have this working code but it seems not the ruby-way, anyone who has a better solution ?

```
#files contains the string that need cleaning
files = [
   "Beatles - The Word ",
  "The Beatles - The Word",
  "Beatles - Tell Me Why",
  "Beatles - Tell Me Why (remastered)",
  "Beatles - Love me do"
]

#ignore contains the reg expr that need to bee checked
ignore = [/the/,/\(.*\)/,/remastered/,/live/,/remix/,/mix/,/acoustic/,/version/,/  +/]

files.each do |file|
  ignore.each do |e|
    file.downcase!
    file.gsub!(e," ")
    file.strip!
  end
end
p files
#=>["beatles - word", "beatles - word", "beatles - tell me why", "beatles - tell me why", "beatles - love me do"] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T10:05:25.383

```
ignore = ["the", "(", ".",  "*", ")", "remastered", "live", "remix",  "mix", "acoustic", "version", "+"]
re = Regexp.union(ignore)
p re #=> /the|\(|\.|\*|\)|remastered|live|remix|mix|acoustic|version|\+/ 
```

`Regexp.union`照顾逃跑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T09:40:20.137

您可以将其中大部分放在单个正则表达式替换操作中。此外，您应该使用单词边界锚 ( `\b`) 或者例如`the`也将 match `There's a Place`。

```
file.gsub!(/(?:\b(?:the|remastered|live|remix|mix|acoustic|version)\b)|\([^()]*\)/, ' ') 
```

应该注意这一点。

然后，您可以在第二步中去除多个空格：

```
file.gsub!(/  +/, ' ') 
```

如果要将正则表达式保留在数组中，则需要遍历数组并为每个正则表达式进行替换。但是您至少可以从循环中取出一些命令：

```
files.each do |file|
  file.downcase!
  ignore.each do |e|
    file.gsub!(e," ")
  end
  file.strip!
end 
```

当然，您需要在忽略列表中的每个单词周围设置单词边界：

```
ignore = [/\bthe\b/, /\([^()]*\)/, /\bremastered\b/, ...] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T11:52:48.483

我根据您的答案制作了这个解决方案，有 2 个版本，一个带有转换为字符串（不更改文件数组，另一个带有 Array 的扩展，它确实更改了文件数组本身。类 approuch 快 2 倍。如果还有人有建议，请分享。

```
files = [
   "Beatles - The Word ",
  "The Beatles - The Word",
  "Beatles - Tell Me Why",
  "The Beatles - Tell Me Why (remastered)",
  "Beatles - wordwiththein wordwithlivein"
]

ignore = /\(.*\)|[_]|\b(the|remastered|live|remix|mix|acoustic|version)\b/

class Array
  def cleanup ignore
    self.each do |e|
      e.downcase!
      e.gsub!(ignore," ")
      e.gsub!(/  +/," ")
      e.strip!
    end
  end
end

p files.join("#").downcase!.gsub(ignore," ").gsub(/  +/," ").split(/ *# */)
#=>["beatles - word", "beatles - word", "beatles - tell me why", "beatles - tell me why", "beatles - wordwiththein wordwithlivein"]

Benchmark.bm do |x| 
  x.report("string method")  { 10000.times { files.join("#").downcase!.gsub(ignore," ").gsub(/  +/," ").split(/ *# */) } }
  x.report("class  method")   { 10000.times { files.cleanup ignore } }
end

=begin
       user     system      total        real
string method  0.328000   0.000000   0.328000 (  0.327600)
class  method  0.187000   0.000000   0.187000 (  0.187200)
=end 
```

# android - getview method is not calling in custom listview method in android

> ID：10381391
> 
> 赞同：1
> 
> 时间：2012-04-30T09:32:56.037
> 
> 标签：android, android-listview

I am having an `Arraylist` as [x,y,z..]. I want this `ArrayList` [x,y,z..] in `ListView` but `getview()` method is not getting invoked
I am trying this code :

```
public class CustomAdapter extends BaseAdapter
{
public static ArrayList<String> arr=new ArrayList<String>();

public Context Context;
private LayoutInflater inflater;

HashMap<String, String> map = new HashMap<String, String>();
public CustomAdapter(Context context, ArrayList<String> arr) 
{
    Context=context;
    inflater=LayoutInflater.from(context);
    arr=arr;

}
public int getCount() 
{
    // TODO Auto-generated method stub
    return arr.size();
}

public Object getItem(int position) 
{
    // TODO Auto-generated method stub
    return arr.get(position);
}

public long getItemId(int position) 
{
    // TODO Auto-generated method stub
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) 
    {
    System.out.println(arr.get(posstion));
        ViewHolder holder;

        if (convertView == null) 
        {
            convertView = inflater.inflate(R.layout.selecteditemlistview, null);
            holder = new ViewHolder();

   holder.textViewSelectedText = (TextView)convertView.findViewById(R.id.selectedtext);
            convertView.setTag(holder);
        }
        else 
        {
            holder = (ViewHolder) convertView.getTag();
        }

        holder.textViewSelectedText.setText(arr.get(position));
        return convertView;
    }

    class ViewHolder
    {
        TextView textViewSelectedText = null;
    }
} 
```

`System.out.println(arr.get(posstion));`

This line is inside `getview()` method and it is not printing the values.. please help me.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T09:50:59.367

您应该在 ListView 上使用 setAdapter 函数，让它使用您的自定义适配器

编辑：CustomAdapter 构造函数中有一个错字：代码应为

```
this.arr = arr 
```

代替

```
arr = arr 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T10:14:34.770

在你的 getview 方法中，你的 sop 是 System.out.println(arr.get(posstion));。我认为应该是 System.out.println(arr.get(position));
因为在您的 getview 方法中定义了 int 位置而不是位置。检查代码中的拼写

```
public View getView(int position, View convertView, ViewGroup parent){
   System.out.println(arr.get(position));
} 
```

即使这不起作用，也尝试给予 sop

```
public CustomAdapter(Context context, ArrayList<String> arr) 
{     
   Context=context;  
   inflater=LayoutInflater.from(context);  
   arr=arr;  
   System.out.println("arr: " + arr.size);

} 
```

如果大小为 0，那么您不会从活动类中获得任何结果到此适配器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T09:42:45.207

你拼错了位置变化

```
System.out.println(arr.get(posstion)); 
```

经过

```
System.out.println(arr.get(position)); 
```

# cocoa-touch - Objective C - attachments via MFMailComposeViewController not showing up

> ID：10381392
> 
> 赞同：2
> 
> 时间：2012-04-30T09:32:57.050
> 
> 标签：cocoa-touch, email, audio, wav, mfmailcomposeviewcontroller

I'm trying to attach a wav-file from an iOS application but the attachment is not delivered even though it's visible in the composed mail.

Heres the related code:

```
if ([MFMailComposeViewController canSendMail]) {
    MFMailComposeViewController* controller = [[MFMailComposeViewController alloc] init];
    controller.mailComposeDelegate = self;
    [controller setSubject:NSLocalizedString(@"mailTopic", nil)];
    [controller setMessageBody:NSLocalizedString(@"mailBody", nil) isHTML:YES];
    NSString *wavPath = [self exportAssetAsWaveFormat:self.myRec.soundFilePath]; // CAF->Wav export

    if (wavPath != nil) {
        NSLog(@"wavPath: %@", wavPath);
        NSData *recData = [NSData dataWithContentsOfFile:wavPath];
        NSString *mime = [self giveMimeForPath:wavPath];
        [controller addAttachmentData:recData mimeType:mime fileName:@"MySound.wav"];
        [self presentModalViewController:controller animated:YES];
        [controller release];
    }
}

-(NSString *) giveMimeForPath:(NSString *)filePath {
    NSURL* fileUrl = [NSURL fileURLWithPath:filePath];
    NSURLRequest* fileUrlRequest = [[NSURLRequest alloc] initWithURL:fileUrl cachePolicy:NSURLCacheStorageNotAllowed timeoutInterval:.1];
    NSURLResponse* response = nil;

    [NSURLConnection sendSynchronousRequest:fileUrlRequest returningResponse:&response  error:nil];
    NSString* mimeType = [response MIMEType];
    NSLog(@"MIME: %@", mimeType);
    [fileUrlRequest release];

    return mimeType;
} 
```

NSLog results:

NSLog(@"wavPath: %@", wavPath); -> "wavPath: /var/mobile/Applications/71256DCA-9007-4697-957E-AEAE827FD97F/Documents/MySound.wav"

NSLog(@"MIME: %@", mimeType); -> "MIME: audio/wav"

The file path seams to be ok (see NSLog data), and the mime type set to "audio/wav".. Cant figure this out..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T09:02:30.243

错误是，当我用它创建 NSData 时，wav 文件不是 100% 写入的。duuuh

感谢大佬们的努力

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T10:19:30.950

也许目的地是剥离该类型的附件？您是否尝试过手动发送带有 .wav 的消息并查看它是否有效？我在尝试发送到 Zendesk 时遇到了同样的问题。事实证明，他们剥离了某些 mimetypes 的附件。

# iphone - iPhone 应用程序的弹出通知

> ID：10381394
> 
> 赞同：0
> 
> 时间：2012-04-30T09:32:58.393
> 
> 标签：iphone, objective-c, ios, xcode, push-notification

嗨，先生们（和女孩们）！

我真的很感激这里的任何见解......

我们都知道应用内弹出窗口会显示“确认 XYZ 应用程序是否可以使用您的位置”或其他内容。这些就像在应用程序中弹出的通知窗口。

我希望能够 1\. 选择我的应用程序的用户 2\. 随时向他们发送我选择的应用程序内弹出消息...在应用程序已在 Appstore 上分发后从服务器端完成所有操作

假设的例子......所以一个例子是我可以看到一个没有填写他们的个人资料的用户，我们（从管理员方面）可以向他们发送一个应用内弹出窗口，上面写着“用户，请填写您的个​​人资料！ ”。只是一个例子。

客户端明智的......在我们将它提交到应用商店之前，我们需要在 XCode 中做什么（什么库等）？允许我们的服务器端在以后随时执行此操作？

非常感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T09:38:55.473

它称为“推送通知”，您可以选择具有设备 UDID 的特定用户。

你也可以从这些[问题](https://stackoverflow.com/questions/2558645/push-notification-in-iphone-application)中学习。

# objective-c - Split main class into different files

> ID：10381395
> 
> 赞同：0
> 
> 时间：2012-04-30T09:33:01.000
> 
> 标签：objective-c, xcode

I just finished my first application for Mac, and now works fine. The application has a main class of NSObject. This class has become huge, because I have many for loops and if-else statements. Since these cycles are repeated several times I wanted to know if you can put them in a separate class and call the point of the main class were i need them. But these cycles using variables defined in the main class. I'm a newbie and I would need a simple solution to understand and execute. Thank you.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T09:38:27.683

你的问题很笼统，它不仅适用于mac或客观编程顺便说一句。好吧，有几种方法可以解决这种情况，例如，您可以在新的分段类的方法中返回变量的值并将其分配到主类中。或者常见的方法是使用构造函数的引用。

# apache2 - Hosting multiple sites with Apache2

> ID：10381399
> 
> 赞同：0
> 
> 时间：2012-04-30T09:33:24.743
> 
> 标签：apache2, dns, virtualhost

I have on a server machine a local domain called "localwiki.com" that points to /var/www/wiki and works fine.

The sites-available and sites-enable configuration:

```
<VirtualHost *:80>
DocumentRoot /var/www/wiki/
ServerName localwiki.com
ServerAlias *.localwiki.com
</VirtualHost> 
```

I wanted to create a second local domain for /var/www/doxygen (which I can access using "serverIP"/doxygen).

Here is the localdoxygen.com config file created at /etc/apache2/sites-available/localdoxygen.com

```
<VirtualHost *:80>
DocumentRoot /var/www/doxygen/
ServerName localdoxygen.com
ServerAlias *localdoxygen.com
</VirtualHost> 
```

I used "a2ensite" in order to create a symbolic link in sites-enable pointing to localdoxygen.com in sites-available:

```
sudo a2ensite localdoxygen.com 
```

I also have reloaded the new configuration:

```
sudo /etc/init.d/apache2 reload 
```

And restarted apache:

```
sudo service apache2 restart 
```

But the domain (localdoxygen.com), still doesn't work.

Any suggestions on how to fix this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T10:45:03.877

为了解决这个问题，我必须在 /etc/bind 中添加一个条目以激活域的 DNS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T04:31:02.060

我认为这些 conf 文件必须以 .conf 结尾才能加载：即 localdoxygen.com.conf

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T05:58:35.200

1.  禁用默认站点 - a2dissite default (!!!)
2.  DNS 正确
3.  签入 /etc/apache2/sites-enabled 有你的网站
4.  重新加载 apache2 /etc/init.d/apache2 重新加载

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T09:49:14.610

您需要`NameVirtualHost`在您的中定义一个`apache2.conf`以支持一个 IP 下的多个域。

```
NameVirtualHost 123.456.789.123:80 
```

或者

```
NameVirtualHost *:80 
```

另请参阅[在单个 IP 地址上运行多个基于名称的网站](http://httpd.apache.org/docs/2.0/vhosts/examples.html)。

# android - Adding activity context to search suggestion Intent

> ID：10381400
> 
> 赞同：0
> 
> 时间：2012-04-30T09:33:30.830
> 
> 标签：android, android-searchmanager, search-suggestion

First some background.

In my edit item activity I have added search functionality to change of one of the item's data fields. (Its manufacturer and make). Since the user can select from quite a large amount of items, we have decided to use search with suggestions to change the manufacturer/model.

Using the normal Android search, from the edit activity I can override the `onSearchRequested()` method and add the current item's ID as part of the extra data. The actual updating of the data item, is done in the search activity. (I know, not the best idea, but my edit activity doesn't know what the user did in the search activity.)

This works fine for a simple search, but I can't seem to find a place to inject this context data (the item's id) for **Search Suggestions**.

I have read through the [android docs](http://developer.android.com/guide/topics/search/adding-custom-suggestions.html) and the closest I have come across is [SUGGEST_COLUMN_INTENT_EXTRA_DATA](http://developer.android.com/guide/topics/search/adding-custom-suggestions.html#SuggestionTable) column for the resultant row in my suggestion, but since my search content provider also doesn't have any context of what item I am editing, it doesn't seem like it will solve my problem. The Intent is still launched from the suggestion by the Android system, and I can't seem to get the required context info added to it.

Is this even possible given that search suggestions seems to be geared towards context-less global searches i.e. Android's quick search?

For completeness sake: we are targeting platforms less than Android 3.0, so the functionality of [SearchView](http://developer.android.com/reference/android/widget/SearchView.html) is not available.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T10:17:17.953

好消息：建议直接启动的 Intent 与活动在对“onSearchRequested()”的调用中设置的 Intent 相同。任何上下文信息都可以在那里设置。任何人都可以在文档中找到对此的参考吗？

# c# - A transport-level error has occurred on Linq query

> ID：10381405
> 
> 赞同：0
> 
> 时间：2012-04-30T09:33:52.560
> 
> 标签：c#, asp.net, sql, linq

I am trying to fill a listview like this

```
ListView.DataSource = DataContext.Session.Query<Companies>(); 
```

With the above I get the list filled, but when i want try to page it like this

```
ListView.DataSource = DataContext.Session.Query<Companies>().Page(...); 
```

I get the error

A transport-level error has occurred when sending the request to the server. (provider: TCP Provider, error: 0 - An existing connection was forcibly closed by the remote host.)

Source: `Session.Flush();`

# symfony - Symfony 2 Form bindRequest 方法没有正确绑定一对多关系

> ID：10381411
> 
> 赞同：2
> 
> 时间：2012-04-30T09:34:11.093
> 
> 标签：symfony, one-to-many, symfony-forms

我对 Symfony 2 框架很陌生，因此由于对框架的内部功能的理解不成熟而提出了一些无聊的问题。基本上，我有一个一对多关系的嵌入式表单。我有一个名为 event 的实体，它至少有一个或多个时间对象

所以这是我的实体类

事件.php

```
<?php namespace KlikEvent\EventBundle\Entity; use Doctrine\ORM\Mapping as ORM;

> /**  
>      * @ORM\Entity  
>      * @ORM\Table(name="events")  
>      */ 
>     class Event {
> 
>     /**
>      * @ORM\Id
>      * @ORM\Column(type="integer")
>      * @ORM\GeneratedValue(strategy="AUTO")
>      */
>     protected $id;
> 
>     /**
>      * @ORM\Column(type="string", length=50)
>      */
>     protected $eventTitle;
> 
>     ....   
> 
>     /**
>     * @ORM\OneToMany(targetEntity="Time", mappedBy="event", cascade={"all"})
>     */
>     protected $eventTimes; 
> 
>     ......  
> 
>     public function __construct() {
>         $this->eventCategories = new \Doctrine\Common\Collections\ArrayCollection();
>         $this->eventTimes = new \Doctrine\Common\Collections\ArrayCollection();
>     }
> 
>     ...... setter + getter stuff ....
> 
> 
> 
>     /**
>      * Add eventTimes
>      *
>      * @param KlikEvent\EventBundle\Entity\Time $eventTimes
>      */
>     public function addTime(\KlikEvent\EventBundle\Entity\Time $eventTimes)
>     {
>         $this->eventTimes[] = $eventTimes;
>     }
> 
>     /**
>      * Get eventTimes
>      *
>      * @return Doctrine\Common\Collections\Collection 
>      */
>     public function getEventTimes()
>     {
>         return $this->eventTimes;
>     }
> 
>     ......
> 
>     } 
```

时间.php

```
 <?php namespace KlikEvent\EventBundle\Entity;

 use Doctrine\ORM\Mapping as ORM;

 /**  * @ORM\Entity  * @ORM\Table(name="eventTime")  */ class Time {

     /**
      * @ORM\Id
      * @ORM\Column(type="integer")
      * @ORM\GeneratedValue(strategy="AUTO")
      */
     protected $id;

     /**
      * @ORM\ManyToOne(targetEntity="Event", inversedBy="eventTimes")
      * @ORM\JoinColumn(name="event_id", referencedColumnName="id")
      */
     protected $event;

     /**
      * @ORM\Column(type="datetime")
      */    
     protected $begin;

     /**
      * @ORM\Column(type="datetime")
      */    
     protected $end;

    ...... setter + getter stuff

     /**
      * Set event
      *
      * @param KlikEvent\EventBundle\Entity\Event $event
      */
     public function setEvent(\KlikEvent\EventBundle\Entity\Event $event)
     {
         $this->event = $event;
     }

     /**
      * Get event
      *
      * @return KlikEvent\EventBundle\Entity\Event 
      */
     public function getEvent()
     {
         return $this->event;
     }

  } 
```

现在，当我制作嵌入式表单时，我扩展了 AbstractType 以制作可重用的表单类（[http://symfony.com/doc/current/book/forms.html#creating-form-classes](http://symfony.com/doc/current/book/forms.html#creating-form-classes)）

这是我的表单类

时间类型.php

```
<?php

namespace KlikEvent\EventBundle\Form;

use Symfony\Component\Form\AbstractType; use Symfony\Component\Form\FormBuilder;

class TimeType extends AbstractType {
    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder
            ->add('begin')
            ->add('end')
        ;
    }

    public function getDefaultOptions ( array $options )
    {
        return array (
            'data_class'=>'KlikEvent\EventBundle\Entity\Time',
            );
    }

    public function getName()
    {
        return 'klikevent_eventbundle_timetype';
    } } 
```

和

事件类型.php

```
<?php

namespace KlikEvent\EventBundle\Form;

use Symfony\Component\Form\AbstractType; use Symfony\Component\Form\FormBuilder;

use KlikEvent\EventBundle\Form\FeedbackType; use KlikEvent\EventBundle\Form\TimeType;

class EventType extends AbstractType {
    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder
            ->add('feedback', new FeedbackType())
            ->add('eventTitle')
            ->add('eventLocation1')
            ->add('eventLocation2')
            ->add('eventShortDescription')
            ->add('eventDescription')
            ->add('eventFurtherDescription')
            ->add('eventCoverImage')
            ->add('eventImages')
            ->add('eventVideos')
            ->add('eventCategories')
            ->add('eventTimes', 'collection', 
                array ('type' => new TimeType(), 
                    'allow_add' => true,
                    'prototype' => true,
                    'by_reference' => false
                    ))

        ;
    }

    public function getName()
    {
        return 'klikevent_eventbundle_eventtype';
    } } 
```

现在，每当我想在控制器中处理输入的输入时，我都会调用 $form->bindRequest($request) 方法，但它会抛出一个错误，即在事件类中没有 setEventTimes () 方法

```
Property "eventTimes" is not public in class "KlikEvent\EventBundle\Entity\Event". Maybe you should create the method "setEventTimes()"? 
```

这很奇怪，因为 generate:doctrine:entities 只生成 addTimes 方法而不是 setEventTimes，我假设 bindRequest 方法的预期操作过程是将所有输入的时间对象添加到事件对象。我对这个错误感到困惑，很高兴得到帮助、指导甚至暗示我做错了什么

问候

编辑 1.. 添加控制器

给你控制器。我只显示相关的控制器方法，因为如果我显示所有内容会太长

```
<?php

namespace KlikEvent\EventBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Symfony\Component\HttpFoundation\Request;

use Doctrine\ORM\Query\ResultSetMapping;

use KlikEvent\EventBundle\Entity\Subscriber;
use KlikEvent\EventBundle\Entity\Event;
use KlikEvent\EventBundle\Entity\Category;
use KlikEvent\EventBundle\Entity\Feedback;
use KlikEvent\EventBundle\Entity\Time;

use KlikEvent\EventBundle\Form\SubscribeType;
use KlikEvent\EventBundle\Form\FeedbackType;
use KlikEvent\EventBundle\Form\EventType;
use KlikEvent\EventBundle\Form\TimeType;

class DefaultController extends Controller<?php

namespace KlikEvent\EventBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Symfony\Component\HttpFoundation\Request;

use Doctrine\ORM\Query\ResultSetMapping;

use KlikEvent\EventBundle\Entity\Subscriber;
use KlikEvent\EventBundle\Entity\Event;
use KlikEvent\EventBundle\Entity\Category;
use KlikEvent\EventBundle\Entity\Feedback;
use KlikEvent\EventBundle\Entity\Time;

use KlikEvent\EventBundle\Form\SubscribeType;
use KlikEvent\EventBundle\Form\FeedbackType;
use KlikEvent\EventBundle\Form\EventType;
use KlikEvent\EventBundle\Form\TimeType;

class DefaultController extends Controller{

....

    public function defaultTipsEventOwnerAction( Request $request )
    {
        $feedback_event_owner = new Event();
        $time =  new Time(  );

        $feedback_event_owner->addTime( $time );

        $form_event_owner = $this->createForm(new EventType(), $feedback_event_owner);

        if ($request->getMethod() == 'POST') {

            $form_event_owner->bindRequest($request);

            if ($form_event_owner->isValid()) {

                $em = $this->getDoctrine()->getEntityManager();
                $em->persist($feedback_event_owner);
                $em->flush();

                $this->get('session')->setFlash('tips-notice-ok', 'Terima kasih untuk tips');

                $feedback_event_owner = new Feedback();
                $form_event_owner = $this->createForm(new FeedbackType(), $feedback_web);

                return $this->render .....

                );
            }
            else
            {
                $this->get('session')->setFlash('tips-notice-error', 'Maaf, Ada error. Coba lagi');
                 return $this->render .....
            }

        }
        return $this->render .....
    }

......

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T12:02:52.757

好的，经过几天的努力，我得到了这个。这是一个丑陋的黑客

基本上 generate:doctrine:entities 无法为实体类正确生成适当的方法。这可能是也可能不是由于我的错误使用，但在我的特定情况下，它没有正确创建 setEventTimes () 方法。

所以我所做的是，创建 setEventTimes () 方法，它基本上替换了实体内的整个 eventTimes 集合

像这样

```
public function setEventTimes( $eventTimes )
{
    $this->eventTimes = $eventTimes;
} 
```

这与 Symfony 生成脚本生成的方法不同，后者本质上是一个一个添加时间实体

```
/** THIS IS GENERATED
 * Add eventTimes
 *
 * @param KlikEvent\EventBundle\Entity\Time $eventTimes
 */
public function addTime(\KlikEvent\EventBundle\Entity\Time $eventTimes)
{
    $this->eventTimes[] = $eventTimes;
} 
```

这解决了 Symfony 2 早些时候抛出的错误。

经过进一步检查，时间实体没有对事件实体的引用，在数据库中，时间的 event_id 列始终输入为 NULL。因此，为了避免这种情况，我添加了一些代码来在每次输入对象时添加对事件实体的引用，如下面的代码片段，然后再将对象持久化到数据库中

```
 foreach ( $feedback_event_owner->getEventTimes() as $times )
            {
                $times->setEvent($feedback_event_owner);
            } 
```

希望这对像我一样面临同样问题的人有所帮助。

感谢@flukey 帮助我的努力：D

# ssl - Nginx config for WSS

> ID：10381412
> 
> 赞同：14
> 
> 时间：2012-04-30T09:34:14.183
> 
> 标签：ssl, nginx, websocket

I am having a problem in connecting through WSS to my server. I followed the following article to setup nginx with websockets: [http://www.letseehere.com/reverse-proxy-web-sockets](http://www.letseehere.com/reverse-proxy-web-sockets)

The following is my nginx config which serves a Play! application:

```
#user  nobody;
worker_processes  1;  

error_log  logs/error.log;
#error_log  logs/error.log  notice;
#error_log  logs/error.log  info;

#pid        logs/nginx.pid;

events {
    worker_connections  1024;
}

tcp {

     upstream websockets {
      ## Play! WS location
       server 127.0.0.1:9000;
     }    

    server {
        listen 80; 
        listen 8000;
        server_name socket.domain.com;

        tcp_nodelay on; 
        proxy_pass websockets;
        proxy_send_timeout 300;
    }   

     # virtual hosting
     #include /usr/local/nginx/vhosts/*;
}

http {

  server {
        listen 443 ssl;
        server_name socket.artoo.in;

        ssl_certificate      /usr/local/nginx/key/socket.domain.com.crt;
        ssl_certificate_key  /usr/local/nginx/key/socket.domain.com.key;

        ssl_session_timeout  5m;

        ssl_protocols  SSLv2 SSLv3 TLSv1;
        ssl_ciphers  ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP;
        ssl_prefer_server_ciphers   on;

        location / {
            proxy_pass http://127.0.0.1:9000;
        }
  }
} 
```

While the server is accessible on [http://socket.domain.com](http://socket.domain.com), [https://socket.domain.com](https://socket.domain.com), ws://socket.domain.com but not wss://socket.domain.com

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T23:38:01.703

我能够整理出问答格式的指南，向您展示如何使用 NGINX 模块完成所有这些工作，这要容易得多；）

[NGINX 反向代理 websocket 并启用 SSL (wss://)？](https://stackoverflow.com/questions/12102110/nginx-to-reverse-proxy-websockets-and-enable-ssl-wss)

您将需要重建 NGINX 并按照上述问题中的配置进行操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T06:44:19.003

我至少在短期内通过使用 stunnel 解决了它（参考这篇文章：[http ://www.darkcoding.net/software/proxy-socket-io-and-nginx-on-the-same-port-over -ssl/](http://www.darkcoding.net/software/proxy-socket-io-and-nginx-on-the-same-port-over-ssl/) )。

Stunnel 可以将 HTTPS 转换为 HTTP，并通过该令牌将 WSS 转换为 WS。Nginx 像往常一样为在 9000 端口上运行的套接字应用程序提供服务：

/etc/stunnel/stunnel.conf

```
[https]
accept  = 443
connect = 80 
TIMEOUTclose = 0 
```

/usr/local/nginx/conf/nginx.conf

```
#user  nobody;
worker_processes  1;  

error_log  logs/error.log;
#error_log  logs/error.log  notice;
#error_log  logs/error.log  info;

#pid        logs/nginx.pid;

events {
    worker_connections  1024;
}

tcp {

     upstream websockets {
      ## Play! WS location
       server 127.0.0.1:9000;
       check interval=3000 rise=2 fall=5 timeout=1000;
     }    

    server {
        listen 80; 
        listen 8000;
        server_name socket.artoo.in;

        tcp_nodelay on; 
        proxy_pass websockets;
        proxy_send_timeout 300;

    }   

     # virtual hosting
     #include /usr/local/nginx/vhosts/*;
}

#http {
#
#  server {
#        listen 443 ssl;
#        server_name socket.artoo.in;
#
#        ssl_certificate      /usr/local/nginx/key/socket.domain.com.crt;
#        ssl_certificate_key  /usr/local/nginx/key/socket.domain.com.key;
#
#        ssl_session_timeout  5m;
#
#        ssl_protocols  SSLv2 SSLv3 TLSv1;
#        ssl_ciphers  ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP;
#        ssl_prefer_server_ciphers   on;
#
#        location / {
#            proxy_pass http://127.0.0.1:9000;
#        }
#  }
#} 
```

现在我唯一需要担心的是如何增加 nginx 上 websockets 的超时时间，连接似乎每 75 秒中断一次（nginx 的默认值）。

# ios - add a new row to the top of UITableView while using core data

> ID：10381415
> 
> 赞同：3
> 
> 时间：2012-04-30T09:34:28.860
> 
> 标签：ios, cocoa-touch, uitableview, core-data

i have a textfield where i enter a value and save it and retrieve them in a tableView. the last item saved is shown at the bottom of the table view. But i want it to be shown at the top of the table view.

i tried the following code but failed.

```
- (void)viewDidLoad
{

   CoreDataOneAppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
   NSManagedObjectContext *context = [appDelegate managedObjectContext];
   NSEntityDescription *entityDesc = 
   [NSEntityDescription entityForName:@"Employee" inManagedObjectContext:context];
   NSFetchRequest *request = [[NSFetchRequest alloc] init];
   [request setEntity:entityDesc];
    NSError *error;
    objects = [[context executeFetchRequest:request error:&error]retain];
    [request release];
    [super viewDidLoad];
}

-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return  [objects count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    labelOne = [[UILabel alloc]initWithFrame:CGRectMake(5, 11, 110, 21)];
    labelTwo = [[UILabel alloc]initWithFrame:CGRectMake(230, 11, 70, 21)];

    static NSString *cellIdentifier = @"CellIdentifier";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];

    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithFrame:CGRectZero reuseIdentifier:cellIdentifier]autorelease];
    }

    [cell.contentView addSubview:labelTwo];
    [cell.contentView addSubview:labelOne];

    NSManagedObject *matches = nil;
    matches = [objects objectAtIndex:indexPath.row];

    labelOne.text = [matches valueForKey:@"name"];
    labelTwo.text = [matches valueForKey:@"amount"];

    NSArray *index = [NSArray arrayWithObject:[NSIndexPath indexPathForRow:0 inSection:0]];
    [tableView insertRowsAtIndexPaths:index withRowAnimation:YES];

    return cell;
} 
```

//Saving

```
-(IBAction)save:(id)sender
{
CoreDataOneAppDelegate  *appDelegate = 
[[UIApplication sharedApplication] delegate];

NSManagedObjectContext *context = 
[appDelegate managedObjectContext];
NSManagedObject *newContact;
newContact = [NSEntityDescription
              insertNewObjectForEntityForName:@"Employee"
              inManagedObjectContext:context];
[newContact setValue:name.text forKey:@"name"];
[newContact setValue:amount.text forKey:@"amount"];
name.text = @"";
amount.text = @"";
//label
status.text = @"saved";
NSError *error;
[context save:&error];
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T09:54:07.077

我假设你在某个地方做`[objects addObject:newEntry]`。将其更改为`[objects insertObject:newEntry atIndex:0]`.

# string - 带空格的字符串连接

> ID：10381417
> 
> 赞同：5
> 
> 时间：2012-04-30T09:34:33.073
> 
> 标签：string, matlab, concatenation

我想连接字符串。我尝试使用`strcat`：

```
x = 5;
m = strcat('is', num2str(x)) 
```

但是这个函数会从每个字符串中删除尾随的空白字符。是否有另一个 MATLAB 函数来执行保持尾随空格的字符串连接？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-30T09:48:28.633

您可以使用`horzcat`代替`strcat`：

```
>> strcat('one ','two')
ans =
onetwo
>> horzcat('one ','two')
ans =
one two 
```

或者，如果您要将数字替换为字符串，最好使用`sprintf`：

```
>> x = 5;
>> sprintf('is %d',x)
ans =
is 5 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T16:34:32.100

怎么样

```
strcat({' is '},{num2str(5)}) 
```

这给了

```
' is 5' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T09:49:55.300

查看[`strcat`文档](http://www.mathworks.co.uk/help/techdoc/ref/strcat.html)中的最后一个示例：尝试使用水平数组连接而不是`strcat`：

```
m = ['is ', num2str(x)] 
```

此外，请查看[`sprintf`](http://www.mathworks.co.uk/help/techdoc/ref/sprintf.html)有关字符串格式（前导/尾随空格等）的更多信息。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-10-20T09:31:04.633

怎么用[`strjoin`](http://www.mathworks.com/help/matlab/ref/strjoin.html)？

```
x = 5;
m ={'is', num2str(x)};
strjoin(m, ' ') 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-04-30T09:48:36.917

这没有考虑哪些空间？只有你没有提到的空间！你的意思是：

```
m = strcat( ' is ',num2str(x) ) 
```

也许 ？

Matlab 不会猜测 (a) 你想要空格或 (b) 它猜测你想要的空格放在哪里。

# android - 安卓登录应用

> ID：10381419
> 
> 赞同：0
> 
> 时间：2012-04-30T09:34:42.170
> 
> 标签：android, database, login

我想开发一个具有类似登录界面的应用程序...而不是用户名和密码，它有一个产品密钥激活，当您成功输入产品密钥时，当用户重新打开应用程序时，产品密钥激活窗口将不会再次打开。 . 有人可以帮我处理这个应用程序吗.. 提前感谢想要帮助的人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T09:37:23.073

老兄，共享偏好并存储产品密钥。在这里，它仅在第一次询问产品密钥时，在以后的情况下不会询问。如果您满意，请将其标记为答案...谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T09:42:24.333

尝试以编程方式添加**ProductKet TextBox**，在显示菜单之前，验证是否已输入产品密钥：您可以使用[共享首选项存储它](http://developer.android.com/reference/android/content/SharedPreferences.html)

# php - PHP 日历多日活动

> ID：10381425
> 
> 赞同：0
> 
> 时间：2012-04-30T09:35:00.283
> 
> 标签：php, events, calendar

我创建了一个完美运行的日历，但是我需要能够插入运行多天的事件。日历显示单日上午和下午的事件，但是当输入多天的事件时，事件显示在事件开始日期和结束日期之间的日期。我使用时间戳作为开始和结束时间。这是我当前的 SQL：

```
$day_start = mktime(0, 0, 0, $cMonth, ($i - $startday + 1), $cYear);
$day_morning_end = mktime(11, 59, 59, $cMonth, ($i - $startday + 1), $cYear);
$day_afternoon_start = mktime(12, 0, 0, $cMonth, ($i - $startday + 1), $cYear);
$day_end = mktime(23, 59, 59, $cMonth, ($i - $startday + 1), $cYear);

$morn_sql = "SELECT * FROM tbl_events WHERE (start_stamp>='$day_start' AND end_stamp<='$day_morning_end') OR (start_stamp<'$day_start' AND end_stamp>'$day_end')"; 
```

下午还有一个查询。正如我所说，它工作正常，除了在事件开始和结束的那一天显示事件，但它在中间的几天显示。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T10:05:10.967

这未经测试，因为我没有表格/数据，但我希望这会有所帮助。:)

```
 $day_sql = "SELECT * FROM tbl_events 
       WHERE start_stamp BETWEEN '$day_start' AND '$day_end' 
            AND end_stamp BETWEEN '$day_start' AND '$day_morning_end'
                OR end_stamp BETWEEN '$day_afternoon_start' AND '$day_end'"; 
```

# c - C：重新分配一个字符串数组

> ID：10381426
> 
> 赞同：0
> 
> 时间：2012-04-30T09:35:19.043
> 
> 标签：c, arrays, string, realloc

我想用一个函数重新分配一个字符串数组。我在这里编写了一个非常简单的程序来演示。我希望输出字母“b”，但我得到 NULL。

```
void gain_memory(char ***ptr) {
    *ptr = (char **) realloc(*ptr, sizeof(char*) * 2);
    *ptr[1] = "b\0";
}

int main()
{
    char **ptr = malloc(sizeof(char*));
    gain_memory(&ptr);
    printf("%s", ptr[1]); // get NULL instead of "b"
    return 0;
} 
```

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T09:51:43.157

[] 运算符的优先级高于 *，因此像这样更改代码将正常工作。

```
(*ptr)[1] = "b"; 
```

PS "\0" 是不必要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T09:45:26.023

您应该在 gain_memory 中的 *ptr 周围加上括号：

```
(*ptr)[1] = "b\0"; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-30T09:50:41.613

您没有为字符串数组中的实际字符串分配任何内存，您需要执行以下操作：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

void gain_memory(char ***ptr, int elem) {
    *ptr = (char**)realloc(*ptr, 2*elem*sizeof(char*));
    (*ptr)[1] = "b";
}

int main()
{
    //How many strings in your array?
    //Lets say we want 10 strings
    int elem = 10;
    char **ptr = malloc(sizeof(char*) * elem);
    //Now we allocate memory for each string
    for(int i = 0; i < elem; i++)
        //Lets say we allocate 255 characters for each string
        //plus one for the final '\0'
        ptr[i] = malloc(sizeof(char) * 256);

    //Now we grow the array
    gain_memory(&ptr, elem);
    printf("%s", ptr[1]);
    return 0;
} 
```

# ios - 将 iOS 应用预览分发给非开发人员（例如音乐家、插画家）

> ID：10381427
> 
> 赞同：3
> 
> 时间：2012-04-30T09:35:23.200
> 
> 标签：ios, distribution

我想向我正在合作的音乐家分发 App 预览。他不是我公司的员工，而是让我免费做游戏配乐。

我检查了 iOS Provisioning Portal 并发现了以下 dislcaimer：

**“重要提示：如果您将预发布的 Apple 软件提供给除员工、承包商和组织成员以外的任何注册为 Apple 开发者并且明显需要了解或使用 Apple 软件的人，那么您的 iOS 开发者计划会员资格可能会被终止。以代表您开发和测试应用程序。禁止未经授权分发 Apple 机密信息（包括预发布的 Apple 软件），这可能使您承担民事和刑事责任。”**

据此，我只能分发预览应用程序来测试我以某种方式雇用的开发人员。这不包括免费从事非编码事务的朋友（例如音乐家）的情况。

你们中有人有类似的担忧吗？

非常感谢！

**EDIT2：我在**[新帖子](https://stackoverflow.com/questions/10509077/apple-email-confuses-me-trying-to-understand-ad-hoc-iphone-distribution) 上再次发布了这个问题，并附有更多详细信息，因为苹果公司就此事回复了我，并且确实提供了与以下答案不同的答案。我试图为这些答案添加评论，但这个问题似乎没有更多的可见性，需要快速解决这个问题，所以认为这是要走的路。如果这不正确，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T09:47:10.503

这适用于**预发布的 Apple 软件**，例如新版本的 iOS 测试版。您可以将自己的应用程序发送给您的朋友，以便他进行测试，但您不能让他访问预发布的 Apple 软件和其他机密信息。

这是一个[指南](http://www.raywenderlich.com/1669/how-to-host-a-beta-test-for-your-ios-app)，展示了如何将应用程序发送给 Beta 测试人员，这是一个使该过程更容易的[Web 应用程序。](https://testflightapp.com/)

Apple的[工具工作流程指南](https://developer.apple.com/library/ios/documentation/Xcode/Conceptual/ios_development_workflow/35-Distributing_Applications/distributing_applications.html#//apple_ref/doc/uid/TP40007959-CH10-SW1)还说：

> 使用应用程序潜在用户的代表性样本进行更广泛的测试总是一个好主意。此类测试可能会揭示仅在特定使用模式下才会出现的问题。应用程序测试员是您的应用程序的潜在用户，**他不属于您的开发团队**，但愿意在应用程序通过 App Store 发布之前对其进行测试。）将应用程序测试员添加到您的测试员组会使您的应用程序暴露于各种使用风格. 您可以从这些测试人员收集和分析崩溃报告（也称为崩溃日志）以解决执行问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T09:52:56.560

不，我想你误会了。您可以将自己的应用程序作为 Ad-Hoc 分发给您的朋友，无论他们是否是开发人员。但是，有 100 台设备的限制。Apple 鼓励您在将应用程序提交到 App Store 之前这样做。

> 您无法以应用用户使用它的方式测试您的应用。它们有不同的数据和不同的使用模式。在 App Store 上发布您的应用程序之前，请对其进行实际测试，以发现并解决尽可能多的问题。

您可以参考[此文档](https://developer.apple.com/library/ios/#documentation/Xcode/Conceptual/ios_development_workflow/35-Distributing_Applications/distributing_applications.html#//apple_ref/doc/uid/TP40007959-CH10-SW1)以了解如何发布您的应用程序以供用户测试。

# ios - Cocoa XCode 中基本 RegEx 实现（在另一个字符串中搜索字符串）的简单（教程/博客/解释）？

> ID：10381436
> 
> 赞同：2
> 
> 时间：2012-04-30T09:35:57.350
> 
> 标签：ios, xcode, nsregularexpression

我有一个存储在字符串中的 html 代码。现在我想从源代码中提取其中一张图像。

我之前使用的是 REgExKitLite 但根据此链接[http://www.cocoabuilder.com/archive/cocoa/288966-applications-using-regexkitlite-no-longer-being-accepted-at-the-appstore.html](http://www.cocoabuilder.com/archive/cocoa/288966-applications-using-regexkitlite-no-longer-being-accepted-at-the-appstore.html)，建议如果我们想将我的应用提交到应用商店，请不要使用 REgExKitLite。

我只需要一个非常简单的实现来使用 regEx 从另一个字符串中提取一个字符串。大多数其他 SO 解决方案都试图完成相当复杂的任务，因此对于像我这样的初学者来说很难理解。

即使是一个很好的教程链接（关于 NSRegularExpression 实现）也可以。只要教程简单明了，我真的不介意阅读它并学习基础知识。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T09:47:07.133

在 iOS 4.0+ 中，您可以使用**NSRegularExpression**：

```
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"stack(.*).html" options:0 error:NULL];
NSString *str = @"stackoverflow.html";
NSTextCheckingResult *match = [regex firstMatchInString:str options:0 range:NSMakeRange(0, [str length])];
// [match rangeAtIndex:1] gives the range of the group in parentheses
// [str substringWithRange:[match rangeAtIndex:1]] gives the first captured group in this example 
```

您可以按照此[参考](https://stackoverflow.com/questions/4184845/how-to-get-matches-in-ios-using-regular-expression)获得更多解决方案。

# lisp - LISP - 从具有嵌套列表的列表中删除元素

> ID：10381438
> 
> 赞同：0
> 
> 时间：2012-04-30T09:36:00.673
> 
> 标签：lisp, common-lisp

我需要从包含内部列表的列表中删除一个元素。预定义的元素也应该从每个内部列表中删除。

我已经开始使用以下代码：

```
(SETQ L2 '(a b ( a 2 b) c 1 2 (D b (a s 4 2) c 1 2 a) a )) ; defined my list 

; Created a function for element removing
(defun elimina (x l &optional l0)
(cond (( null l)(reverse l0))
((eq x (car l))(elimina x (cdr l) l0))
(T (elimina x (cdr l) (cons (car l) l0))))
)

(ELIMINA 'a L2) 
```

但不幸的是，它只删除了嵌套列表之外的元素。

我试图创建一个附加函数，它将从内部列表中删除元素。

```
(defun elimina-all (x l)
(cond ((LISTP (CAR L))(reverse l)(elimina x (car l)))
(T (elimina-all  x (CDR L)))
)
) 
```

但仍然没有成功。

你能帮我解决吗？

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T17:30:53.160

首先，我建议你阅读这本书，至少，[这个页面](http://mitpress.mit.edu/sicp/full-text/book/book-Z-H-15.html)，它解释了（并给出了很好的例子！）如何遍历树，但最重要的是，如何组合函数以利用更复杂的任务从更简单的任务。

```
;; Note that this function is very similar to the built-in
;; `remove-if' function. Normally, you won't write this yourself
(defun remove-if-tree (tree predicate)
  (cond
    ((null tree) nil)
    ((funcall predicate (car tree))
     (remove-if-tree (cdr tree) predicate))
    ((listp (car tree))
     (cons (remove-if-tree (car tree) predicate)
           (remove-if-tree (cdr tree) predicate)))
    (t (cons (car tree)
             (remove-if-tree (cdr tree) predicate)))))

;; Note that the case of the symbol names doesn't matter
;; with the default settings of the reader table. I.e. `D' and `d'
;; are the same symbol, both uppercase.
;; Either use \ (backslash) or || (pipes
;; around the symbol name to preserve the case. Eg. \d is the
;; lowercase `d'. Similarly, |d| is a lowercase `d'.
(format t "result: ~s~&"
        (remove-if-tree
         '(a b (a 2 b) c 1 2 (D b (a s 4 2) c 1 2 a) a)
         #'(lambda (x) (or (equal 1 x) (equal x 'a))))) 
```

这是解决问题的一种方法的简短示例。阅读评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T09:49:45.303

也许是这样的：

```
(defun elimina (x l &optional l0)
  (cond ((null l) (reverse l0))
        ((eq x (car l)) (elimina x (cdr l) l0))
        (T (elimina x (cdr l) (cons (if (not (atom (car l))) 
                                        (elimina x (car l)) 
                                        (car l))
                                     l0))))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-11T23:34:37.143

我一直在寻找与您相同的答案，不幸的是，我无法完全理解上面的答案，所以我一直在研究它，最后我在 Lisp 中得到了一个非常简单的函数，它完全符合您的要求。

```
(defun remove (a l)
(cond
    ((null l) ())
        ((listp (car l))(cons (remove a (car l))(remove a (cdr l))))
        ((eq (car l) a) (remove a (cdr l)))
        (t (cons (car l) (remove a (cdr l))))
        )
    ) 
```

该函数从两个简单的情况开始，它们是：'list is null'和'first element is a list'。在此之后，您将“神奇地”获得`car`列表的 和`cdr`没有给定元素的列表的 。要将其修复为整个列表的答案，您只需使用`cons`.

# javascript - 仅在日期选择器中显示特定月份的天数

> ID：10381454
> 
> 赞同：0
> 
> 时间：2012-04-30T09:37:46.457
> 
> 标签：javascript, date, datepicker, mootools

我有一个日期选择器，它正在显示一个日期。但问题是每个月都显示上个月的某些日子和下个月的某些日子，我不想显示。我希望每个月都应该显示该特定月份的天数。

例如，假设 Month **JUNE**，这里显示了**MAY**月的某些天和**JULY 月**的某些天，但我希望只`JUNE`显示天。我该怎么做？我正在尝试，但没有结果。

这是小提琴：

[http://jsfiddle.net/cBwEK/](http://jsfiddle.net/cBwEK/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T09:43:39.537

您可以通过添加使其他月份值不可见：

```
​.datepicker .otherMonth {
    visibility: hidden;        
} 
```

到你的 CSS。请参阅[更新的小提琴](http://jsfiddle.net/cBwEK/5/)。

# android - 如何禁用视图中某些药水的onTouch

> ID：10381456
> 
> 赞同：0
> 
> 时间：2012-04-30T09:38:01.687
> 
> 标签：android, view, touch-event

我正在使用画布绘制一个矩形表面，并且我想禁用某些区域的 onTouchEvent()，例如，如果您点击矩形的右侧（触摸）它不应该执行 onTouchEvent()。谁能告诉我如何做到这一点。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T10:18:25.747

您必须使用 Hit and Trial 方法并生成公式以在不同屏幕尺寸的设备上运行您的应用程序。并检查用户点击的位置，如果他在受限区域点击什么也不做。

像

@Override public boolean onTouchEvent(MotionEvent 事件) {

```
 // TODO Auto-generated method stub

    int x = (int)event.getX();
    int y = (int)event.getY();

    if (x<height-100 && y>width-100) {
        // Do nothing
    }
    return super.onTouchEvent(event);
}else{
//Do what you want here
} 
```

# jquery - 如何让 Galleria 处理通过 jQuery 的 load() 函数加载的图像

> ID：10381463
> 
> 赞同：0
> 
> 时间：2012-04-30T09:38:42.057
> 
> 标签：jquery, load, galleria

我正在为摄影网站使用 Galleria 1.2.7 和 jQuery 1.7.1。我有 3 组照片希望 Galleria 展示，所以我在页面上有 3 个链接。我想使用 load() 将它们加载到索引页面中。

我的代码是：

```
 <div id="galleria"></div>

<ul id="nav">
  <li><a href="gallery1.html">Gallery 1</a></li>
  <li><a href="gallery2.html">Gallery 2</a></li>
  <li><a href="gallery3.html">Gallery 3</a></li>
</ul>

<script> 

        $(document).ready(function(){
            Galleria.loadTheme('galleria/themes/folio/galleria.folio.min.js');

             $('#nav a')
                .click(function(){
                    $('#galleria').load(this.href, function(){
                        $('#galleria').galleria();
                    });
                    return false;
                });
        });

</script> 
```

这在我单击其中一个链接时有效，但当单击第二个链接时它停止工作。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T09:44:28.827

你试过处理回发吗？

```
postbackFunction();

if (Sys.WebForms.PageRequestManager.getInstance().get_isInAsyncPostBack()){
    postbackFunction();
});

function postbackFunction(){
        $(document).ready(function(){
            Galleria.loadTheme('galleria/themes/folio/galleria.folio.min.js');
         $('#nav a')
            .click(function(){
                $('#galleria').load(this.href, function(){
                    $('#galleria').galleria();
                });
                return false;
            });
    });
} 
```

# android - 在android的服务中动态获取捕获的图像路径

> ID：10381465
> 
> 赞同：0
> 
> 时间：2012-04-30T09:38:44.037
> 
> 标签：android, path, camera

在我的应用程序中，我硬编码了捕获相机图像的路径。但是，这不适用于所有设备，因为不同设备的图像存储路径不同。有没有办法动态获取对所有设备都有效的路径？

这是我尝试过的：

```
 if (externalStorageState.equals(Environment.MEDIA_MOUNTED)

        || externalStorageState.equals(Environment.MEDIA_UNMOUNTED)

        || externalStorageState
                .equals(Environment.MEDIA_MOUNTED_READ_ONLY)) {

    File path = Environment
            .getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM

                    + "/Camera");//////////----path of captured images

    Log.d("operator", " path: " + path);

    if (path.exists()) {

        if (path.isDirectory()) {

            fo = new FileObserver(path.toString(),

                    FileObserver.CLOSE_WRITE) {

                @Override
                public void onEvent(int event, String path) {

                    SimpleDateFormat sdfDateT = new SimpleDateFormat(

                            "yy-MM-dd HH:mm:ss", Locale.US);

                    String st = sdfDateT.format(System

                            .currentTimeMillis());
                    Log.d("operator", "in event");

                    Log.d("operator", "lat: " + lat + " " + "lng: "

                            + lng + " " + "location: " + addre + " " + "time: " + st);

                    ptd.insert(st, String.valueOf(lat), String.valueOf(lng), addre);

                }
            }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T09:48:39.773

如果 API 级别低于 7 则使用`getExternalStorageDirectory()`，然后附加`/Pictures`以获取照片存储的路径。

对于 API 级别 > 7 使用`getExternalStoragePublicDirectory (DIRECTORY_PICTURES)`.
你也可以看看[这个链接](http://developer.android.com/guide/topics/data/data-storage.html)。

# php - 如何在php数组中传递javascript jQuery变量值

> ID：10381468
> 
> 赞同：0
> 
> 时间：2012-04-30T09:38:53.347
> 
> 标签：php, javascript, ajax, jquery

例如

```
var dirnm = jQuery.trim($('#dirname').val());
var parent1 = jQuery.trim($('#parent').val());

var url = '<?=$this->url(array('controller'=>'index','action'=>'dirnameex','dirname'=>dirnm ,'parent'=>parent1))?>'; 
```

`dirnm`并且`parent1`是一个ajax变量。所以我想传递`dirnm`到`parent1`一个php数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T09:49:47.920

这不起作用，因为 JavaScript 在浏览器中执行，PHP 在服务器上执行.. 所以 PHP 将在页面加载到浏览器和 JavaScript 执行之前执行..

你可以做的是`POST`PHP 的变量：

```
var dirnm = jQuery.trim($('#dirname').val());
var parent1 = jQuery.trim($('#parent').val());
$.post("sript.php", { dirname: dirnm, parent: parent1 } ); 
```

然后在 PHP ( `script.php`) 中：

```
// get the variables from $_POST
$dir = $_POST['dirname'];
$par = $_POST['parent'];
$this->url(array('controller'=>'index','action'=>'dirnameex','dirname'=> $dir,'parent'=> $par)) 
```

[$.post() (jQuery)](http://api.jquery.com/jQuery.post/)的[文档和 $_POST (PHP) 的文档](http://php.net/manual/en/reserved.variables.post.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T09:48:46.650

php 运行服务器端，javascript 运行客户端，所以你不能这样做。

您可以使用 ajax 将变量传递给 php。但这将是一个单独的线程。

# fitnesse - 如何阻止 FitNesse SuiteSetup 显示黄色

> ID：10381471
> 
> 赞同：0
> 
> 时间：2012-04-30T09:38:58.797
> 
> 标签：fitnesse

[FitNesse](http://fitnesse.org)的 SuiteSetup 页面在测试结果中显示为黄色而不是绿色。这可以通过添加一个具有至少一个绿色单元的虚拟测试来纠正。但是，设置页面肯定不需要实际的测试单元吗？有解决办法吗？

使用 FitNesse 20111026。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T16:57:22.143

这是一个错误。我添加了一个问题。[http://github.com/unclebob/fitnesse/issues/80](http://github.com/unclebob/fitnesse/issues/80)

# objective-c - 自定义 ABNewPersonViewController 屏幕，带有个人资料图片的图像编辑选项？

> ID：10381472
> 
> 赞同：0
> 
> 时间：2012-04-30T09:39:04.787
> 
> 标签：objective-c, uiimagepickercontroller

自定义 ABNewPersonViewController 屏幕，带有个人资料图片的图像编辑选项？我们可以定制 ABNewPersonViewController 吗？有可能吗？我已经拿了一张桌子并创建了自定义联系人，现在我正在尝试进行图像编辑？我们可以自定义 ABNewPersonViewController 吗？有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T10:13:34.957

据我所知，您无法自定义 ABNewPersonViewController，它是由苹果预定义的，您无权更改它。但是您始终可以为用户图像创建编辑视图。

# css - 如何判断在嵌套类中应用的正确 css 行是什么

> ID：10381473
> 
> 赞同：0
> 
> 时间：2012-04-30T09:39:20.557
> 
> 标签：css

这是我的检查元素视图：[http ://www.freeimagehosting.net/4wxq7](http://www.freeimagehosting.net/4wxq7)

我想将样式应用于`class="lyrics"`

我像这样在我的CSS上使用

```
.postcontent .lyrics { styles... } 
```

但它不工作。

针对该类的正确css行是什么。这是在 wordpress 帖子中。基本上，我希望能够为帖子的某些内容设置样式而不影响其他人。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T09:42:54.560

在您的 HTML 中，父 div 具有类`post-content`而不是`postcontent`.

因此，您需要将 HTML 中的类更改为`postcontent`或更改 CSS：

```
.post-content .lyrics { styles... } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T09:49:16.470

您可以将其定义为：

```
.post-content .lyrics { styles... } 
```

或者，如果您希望您的样式不被其他 CSS 覆盖，请使用 ID 父选择器：

```
#content .lyrics { styles... } 
```

编辑：在这里检查工作示例：http: [//jsfiddle.net/SmH6B/](http://jsfiddle.net/SmH6B/)

# algorithm - 为什么大多数图算法不能那么容易地适应负数？

> ID：10381474
> 
> 赞同：9
> 
> 时间：2012-04-30T09:39:20.853
> 
> 标签：algorithm, data-structures, graph

[算法设计手册](http://www.algorist.com/)说：

> 大多数图形算法都不容易适应负数。事实上，最短路径算法在处理负数时会遇到问题，并且使用这种技术当然不会生成可能的最长路径。

但为什么？当我们只是在原始权重前面加上一个负数`-`时，我认为大多数涉及权重的图形问题都可以平等处理，对吧？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T09:41:58.140

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T09:56:30.877

> 事实上，最短路径算法在处理负数时会遇到麻烦，

这对于[Dijkstra 的 Algorithm](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)是正确的，但对于一般的最短路径算法则不然。如果图不包含负循环，[Bellman-Ford 算法可以处理负边权重。](http://en.wikipedia.org/wiki/Bellman%E2%80%93Ford_algorithm)然而：

> Bellman-Ford 可以检测负循环并报告它们的存在，但如果无法从源头到达负循环，它就无法产生正确的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-11T19:51:41.403

我将专门为最短路径问题添加答案。[杰克的回答](https://stackoverflow.com/a/10381508/2157640)很好地描述了负边缘的一般问题。

考虑一个图，每条边都有边`G = (V, E)`长。中的最短路径与中的最长路径相同。[已知最长路径问题](http://en.wikipedia.org/wiki/Longest_path_problem)在一般图中是 NP 难的。*尽管它可以在 DAG 和其他类别的图中以线性时间求解。*`l(e) ≤ 0``e ∈ E``G``G'``l'(e) = - l(e) ≥ 0 ∀e ∈ E`

 *正如[cls 回答](https://stackoverflow.com/a/10381707/2157640)的那样，问题仅在于负循环，[Bellman-Ford 算法](http://en.wikipedia.org/wiki/Bellman%E2%80%93Ford_algorithm)可以处理一些负边。但是最长路径算法必须处理图中的循环，Bellman-Ford 无法对具有负循环的图给出正确答案。因此，Bellman-Ford 算法只能用于计算没有正循环的图中的最长路径。*提到，因为这种想法[显然并不少见](https://www.or-exchange.org/questions/823/why-cant-we-solve-longest-path-problem-by-using-shortest-path-algoritms)。**

# magento - Magento 中的编译器模式

> ID：10381477
> 
> 赞同：1
> 
> 时间：2012-04-30T09:39:37.060
> 
> 标签：magento, compiler-construction

Magento 中的编译器模式是什么？

我想知道这个概念，如果有人知道，请告诉我？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T09:45:06.017

谷歌->“magento 编译器模式”[第一次命中](http://alanstorm.com/magento_compiler_path)：

> 事实证明，让 PHP 在大量不同目录中搜索大量包含文件可能会在某些类型的负载下产生性能瓶颈。为了解决这个问题，Magento 核心团队创建了 Magento 编译器扩展，并在 1.4 CE 版本左右开始发布带有此功能的 Magento。
> 
> 编译器所做的是复制 Magento 系统中的每个类并将它们放在一个文件夹中。类的全名用于文件名以确保唯一性
> 
> 包括/src/Mage_Core_Model_Abstract.php
> 
> 包括/src/Foo_Module_FooController.php
> 
> ETC...
> 
> 这是一次。然后，当 Magento 配置为使用编译器类时，它的自动加载将在编译器文件夹中查找，而不是运行其正常的自动加载例程。这使 PHP 无需为所有不同的包含路径遍历文件系统的开销。

# svn - SVN 将目录的内容移动到其父目录中

> ID：10381479
> 
> 赞同：1
> 
> 时间：2012-04-30T09:39:49.473
> 
> 标签：svn

我无法确定将目录的内容向上移动一级到其父目录然后删除该目录所需的 svn 命令。在unix中我会这样做：

```
$ cd ~/parentdir/subdir
$ mv * ..
$ cd ..
$ rm -r subdir 
```

现在 subdir 下的所有文件现在都在 parentdir 中，而 subdir 现在已经消失了。在维护这些文件的历史记录的同时，我将如何在 SVN 中做同样的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T09:57:49.070

```
$ cd ~/parentdir/subdir
$ svn cp * ..
$ cd ..
$ svn rm subdir
$ svn ci -m"Copy parentdir/subdir/* into parentdir, remove subdir" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-19T19:05:12.250

[这确实是一个评论，但我缺乏它的声誉]

`$ svn cp * .[^.]* ..`如果您也想复制点文件和 .folders/，请改用。

在[Super User](https://superuser.com/questions/62141/how-to-move-all-files-from-current-directory-to-upper-directory "linux - 如何将所有文件从当前目录移动到上层目录？ - 超级用户")中找到，它显示了执行相同操作的替代方法。

# javascript - HTML 音频 - 使用 jQuery 检测位置

> ID：10381480
> 
> 赞同：2
> 
> 时间：2012-04-30T09:39:51.037
> 
> 标签：javascript, jquery, html, dom, audio

无论如何，当使用 HTML5 音频标签有一个 eventListener 或使用 Dom/jQuery 的动作在播放期间或结束时触发事件时？

[此](https://stackoverflow.com/questions/2596104/html-5-audio-current-position)答案链接到 currentTime 但没有示例，下面是伪代码。

```
<!DOCTYPE html>
<html>
<body>

<audio controls="controls">
  <source src="file.ogg" type="audio/ogg" />
  <source src="file.mp3" type="audio/mpeg" />
Your browser does not support the audio element.
</audio>

<script src="jquery.js"></script>
<script>
$(document).ready(function () {
    $("audio").addEventListener("end", function () {
        alert("song has ended");
    });
    $("audio").addEventListener('20.2', function () {
        alert("your currently at 20.2 seconds in the track");
    });
});
</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T09:49:33.397

您可以使用该`ended`事件：

```
$("audio").on("ended", function() { 
     // do stuff
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T10:03:09.853

你可以试试这个：

获取音频的持续时间并根据 currentTime 发出警报，并在您需要的任何地方显示警报。

```
audio.addEventListener("timeupdate", function(){    
var duration = document.getElementById('duration');
var s = parseInt(audio.currentTime % 60);    var m = parseInt((audio.currentTime / 60) % 60);
duration.innerHTML = m + '.' + s + 'sec'; 
}, false); 
```

# flash - MP4 视频略微异步 - 但仅在初始播放时

> ID：10381485
> 
> 赞同：1
> 
> 时间：2012-04-30T09:40:13.040
> 
> 标签：flash, video, ffmpeg, h.264, mp4

这是我们的程序：

1.  我们使用 ffmpeg (H264/AAC) 作为 API 和命令行工具创建实时 MP4 视频。*
2.  qt-faststart 用于将元数据移动到文件的开头，以在我们的 Flash 客户端中启用快速播放。
3.  视频重命名为 *.m4v。
4.  用户使用我们的 Flash 客户端下载视频并立即开始播放，因为元数据位于开头。

*编辑：* *首先，使用 ffmpeg API 创建 MPG 视频，然后将其与介绍和结尾视频一起复制（您可以简单地链接 MPG 视频）。然后使用以下命令将生成的 MPG 转换为 MP4：

```
ffmpeg -i inputvideo.mpg -sameq -b 3000000 -vcodec libx264 -acodec libvo_aacenc -ac 2 -g 60 -y outputvideo.mp4 
```

基本上，这确实有效。

问题：

我们注意到，在初始播放期间（用户还没有点击任何内容，视频是否仍在下载并没有影响），音频正在异步播放，如果您注意它，您会注意到它。

但是，只要您在视频中四处点击（一次就足够了，无论您点击哪里），其余视频的音频变得更加同步（仍然不完美！）。

无论您是通过我们的 Flash 播放器还是 Windows Media Player 观看，此行为都是相同的。我们可以从我们这边（在 ffmpeg 或 qt-faststart 中）做些什么来让它从一开始就同步吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T07:04:59.983

哈！

原来问题在于音频与视频的长度不同。一旦这个问题得到解决，一切都再次同步。应该先检查一下……所以，不是真正的编码错误或问题，更多的是我们内容部门的错。;)

# cocoa - Xcode如何从自定义类中检索滑块值

> ID：10381490
> 
> 赞同：0
> 
> 时间：2012-04-30T09:40:31.653
> 
> 标签：cocoa, uikit

我正在尝试绘制一个根据滑块的值上下移动的图形。我的图表是在属于自定义类 GraphView 的视图中绘制的。项目有一个 ViewController，滑块调用方法 moveLine。这有一个属性 endXPoint 我已经设置为： endXPoint = mySlider.value

我的问题是我不知道如何从我的 GraphView 的 drawRect 方法中引用这个值。

我尝试在 ViewController 中创建对 GraphView 的引用并在那里设置属性，但它不起作用：
GraphView *myGraphView = (GraphView *)self.view;
myGraphView.endXPoint = mySlider.value;

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T09:52:22.487

您必须像这样为 GraphView 类设置一个属性：

```
@interface GraphView : UIView
@property float endXPoint; 
```

然后从 ViewController 中设置 GraphView 变量，如：

```
[myGraphView setendXPoint: [mySlider value]];
[myGraphView setNeedsDisplay]; 
```

最后一行要求 GraphView 更新 View，调用 drawRect 方法。在 drawRect 方法中，您可以直接使用 endXPoint，因为它是一个类属性。

这是正确的版本：

```
//ViewController.h

#import <UIKit/UIKit.h> 
#import "GraphView.h" //import headers in the header file

@interface ViewController : UIViewController  

@property (strong, nonatomic) IBOutlet UISlider *mySlider;  
@property (strong, nonatomic) IBOutlet UILabel *myLabel;  
@property (strong, nonatomic) IBOutlet GraphView *myGraphView; //Connect this with the IB

- (IBAction)moveLine:(id)sender; 
- (IBAction)setLabelText:(id)sender;  
@end  

//ViewController.m

#import "ViewController.h"   

@implementation ViewController  
@synthesize mySlider;  
@synthesize myLabel;  
@synthesize myGraphView;

- (IBAction)moveLine:(id)sender {  
    [myGraphView setendXPoint:[mySlider value]];  
    [myGraphView setNeedsDisplay];  
}  

@end 

//GraphView.h 

#import <UIKit/UIKit.h>  

@interface GraphView : UIView  
@property float endXPoint;  

@end

//GraphView.m  

#import "GraphView.h"   

@implementation GraphView  
@synthesize endXPoint;  

- (void)drawRect:(CGRect)rect  
{

    CGContextRef ctx = UIGraphicsGetCurrentContext(); //get the graphics context  
    CGContextSetRGBStrokeColor(ctx, 1.0, 0, 0, 1);   
    CGContextMoveToPoint(ctx, 0, 0);  
    //add a line from 0,0 to the point 100,100;   
    CGContextAddLineToPoint( ctx, endXPoint,100);  
    //"stroke" the path  
    CGContextStrokePath(ctx);  
}  

@end 
```

# android - 在 Android 音乐应用中显示专辑封面

> ID：10381499
> 
> 赞同：1
> 
> 时间：2012-04-30T09:41:27.360
> 
> 标签：android, android-mediaplayer

我正在尝试将 mp3 文件中的专辑封面包含到我的应用程序中，但它显示：调用 getEmbeddedPicture 失败。

在我的歌曲课上，我设置了每首歌的艺术作品：

```
metaDataRetriver = new MediaMetadataRetriever();
metaDataRetriver.setDataSource(path);
//path = /mnt/sdcard/chan_mp3/Titel.mp3
byte[] artwork = metaDataRetriver.getEmbeddedPicture(); 
```

在我的 CustomAdapter 中，我尝试显示封面：

```
// This code works perfectly fine: for each song I get artist and title
textView.setText(values.get(position).getArtist() + " - " + values.get(position).getTitle());

// This code doesn't work at all
byte[] artwork = values.get(position).getArtwork();
Bitmap bMap = BitmapFactory.decodeByteArray(artwork, 0, artwork.length);
imageView.setImageBitmap(bMap); 
```

问题是我在哪里遗漏了什么？是艺术品变量没有正确初始化还是我的请求错误？

或者有没有更好的方法来获取专辑封面和音乐信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T12:33:50.727

我找到了另一种方法......我将为每首歌曲保存每个专辑 ID，然后我可以使用以下代码获取封面艺术：

```
 Uri sArtworkUri = Uri.parse("content://media/external/audio/albumart");
          Uri uri = ContentUris.withAppendedId(sArtworkUri, Integer.valueOf(albumId));
          ContentResolver res = context.getContentResolver();
          InputStream in;
          try {
              in = res.openInputStream(uri);
              artwork = BitmapFactory.decodeStream(in);
              } catch (FileNotFoundException e) {
                  e.printStackTrace();
              } 
```

# c# - Microsoft 蓝牙堆栈 RSSI 解决方法

> ID：10381503
> 
> 赞同：3
> 
> 时间：2012-04-30T09:41:47.097
> 
> 标签：c#, bluetooth, rssi

我完成了一个机器人蓝牙应用程序的实现。在服务器方面，我使用 Windows 7 作为带有 MS-BT-Stack 的操作系统，并使用 C# 作为带有“In the hand”-蓝牙库的语言。
目标是在机器人在范围内时通过蓝牙连接机器人。

就像扩展一样，我试图读取信号强度以确定机器人的距离（估计）。好的，在谷歌搜索（以及在 stackoverflow 上搜索^^）时，我发现你不能用我用过的 BT-stack 做到这一点。从那以后，我试图找出一种解决方法来计算或估计信号强度（或距离）。
比如通过蓝牙发送一个字节，看看应答时间有多长。虽然由于时间不够，我还没有实现它，但有人认为这是一个好主意吗？或者对这个问题有其他想法？

我真的很感激任何意见。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T22:46:38.033

不，我认为这不是一个好主意。您将无法根据响应时间获得有意义的距离估计。MAC 层和软件堆栈中有许多因素会引入可变性。

即使使用 RSSI 也不能很好地工作，因为

1) 室内 2.4GHz 的 RSSI 存在严重的多径问题，这意味着您可以离开并看到信号变得更强

2) 蓝牙具有功率控制反馈，两侧不断调整 Tx 功率，使其处于固定的黄金范围内。所以你走开，RSSI 瞬间下降，然后功率控制回路提高 Tx 功率以将 RSSI 保持在固定水平。

3) 蓝牙硬件通常具有低精度的 RSSI 测量值，这意味着您只能获得粗略的测量值，而不是您可以准确依赖的东西来获得良好的距离指标。

# excel - When pasting a link, I want the blank cells in the source worksheet to remain blank in the destination worksheet

> ID：10381511
> 
> 赞同：0
> 
> 时间：2012-04-30T09:42:10.107
> 
> 标签：excel, excel-formula

I have an Excel spreadsheet consisting of a client (master) worksheet with monthly (clone) worksheets for workflow and task controls. The same client details are used on all the worksheets. If I add a new line or column in the master sheet, it also needs to add same on all the clone sheets. However, I do not want to have the blank cells in the master to display 0's in the clone sheets; they should remain blank in the clone sheets also. I've used the `Paste Link` function. How else can I update clone sheets from the master sheet without displaying 0's in blank cells from master sheet?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T13:10:31.630

如果您关心的只是将空白单元格*显示*为 0，那么请考虑客户表单元格的自定义格式，例如`#;-#;;@`（第三个参数用于`0`值）（当然，这也会显示实际包含`0`'s 作为空白的单元格）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-19T17:29:47.433

转到文件>选项>高级>“此工作表的显示选项：”{您的工作表}>

> 单击关闭“在具有零值的单元格中显示零”

希望有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-08T10:19:39.117

简而言之，问题在于 Excel 错误地解释了该类型的`Empty`返回值。`Variant`如果源数据受到控制，还有另一种方法：将空（空白）单元格设置为 formula `=""`。工作表`INDIRECT`功能正确地再现了主工作表和“复制”工作表的上述错误。这是示例“前景”（Excel 活动工作表）和“背景”（VBA 编辑器的监视窗口以及该工作表的内部）的屏幕截图：

![测试 Excel 对空变量值的解释](../Images/610f0393598a97bc55fafb26603bfb25.png)

正如我们所见，单元格`A1`( `ActiveSheet.UsedRange.Cells(1, 1).Formula`) 设置了公式`=""`，而`A2`( `ActiveSheet.UsedRange.Cells(2, 1).Formula`) 则没有。因此，基于`INDIRECT`Worksheet 函数（集合`B1`和`B2`单元格）的公式为“相同”输入`""`（空字符串）显示不同的值。从 Excel 和 Watches 的角度来看，输入`""`只是看起来相同。但是，它们确实与我们在使用基于调试的“发现”技术时看到的不同。

PS
我在我的一个解决方案中使用了所描述的技巧，使用宏设置的公式。

# sql - 此查询对创建逗号分隔列表 SQL Server 做了什么？

> ID：10381512
> 
> 赞同：12
> 
> 时间：2012-04-30T09:42:17.423
> 
> 标签：sql, sql-server, sql-server-2008

我在 google 的帮助下编写了这个查询，以从表中创建一个分隔列表，但我对此查询一无所知。

谁能解释一下发生了什么

```
 SELECT 
    E1.deptno, 
    allemp = Replace ((SELECT E2.ename AS 'data()' 
                       FROM emp AS e2 
                       WHERE e1.deptno = e2.DEPTNO 
                       FOR xml PATH('')), ' ', ', ') 
 FROM EMP AS e1 
 GROUP BY DEPTNO; 
```

给我结果

```
10  CLARK, KING, MILLER
20  SMITH, JONES, SCOTT, ADAMS, FORD
30  ALLEN, WARD, MARTIN, BLAKE, TURNER, JAMES 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-04-30T10:15:37.247

解释它的最简单方法是查看`FOR XML PATH`实际 XML 的工作原理。想象一个简单的表格`Employee`：

```
EmployeeID      Name
1               John Smith
2               Jane Doe 
```

你可以使用

```
SELECT  EmployeeID, Name
FROM    emp.Employee
FOR XML PATH ('Employee') 
```

这将创建如下 XML

```
<Employee>
    <EmployeeID>1</EmployeeID>
    <Name>John Smith</Name>
</Employee>
<Employee>
    <EmployeeID>2</EmployeeID>
    <Name>Jane Doe</Name>
</Employee> 
```

删除 'Employee' from`PATH`会删除外部 xml 标记，因此此查询：

```
SELECT  Name
FROM    Employee
FOR XML PATH ('') 
```

会创建

```
 <Name>John Smith</Name>
    <Name>Jane Doe</Name> 
```

您所做的并不理想，列名“data()”会强制出现 sql 错误，因为它正在尝试创建一个不是合法标签的 xml 标签，因此会生成以下错误：

> 列名“Data()”包含 FOR XML 要求的无效 XML 标识符；'('(0x0028) 是第一个错误字符。

相关子查询隐藏了这个错误，只生成了没有标签的 XML：

```
SELECT  Name AS [Data()]
FROM    Employee
FOR XML PATH ('') 
```

创建

```
John Smith Jane Doe 
```

然后你用逗号替换空格，相当不言自明......

如果我是你，我会稍微调整一下查询：

```
SELECT  E1.deptno, 
        STUFF(( SELECT  ', ' + E2.ename 
                FROM    emp AS e2 
                WHERE   e1.deptno = e2.DEPTNO 
                FOR XML PATH('')
            ), 1, 2, '') 
FROM    EMP AS e1 
GROUP BY DEPTNO; 
```

没有列别名将意味着没有创建 xml 标记，并且在选择查询中添加逗号意味着任何带有空格的名称都不会导致错误，`STUFF`将删除第一个逗号和空格。

**附录**

为了详细说明 KM 在评论中所说的话，因为这似乎得到了更多的意见，转义 XML 字符的正确方法是使用`.value`如下：

```
SELECT  E1.deptno, 
        STUFF(( SELECT  ', ' + E2.ename 
                FROM    emp AS e2 
                WHERE   e1.deptno = e2.DEPTNO 
                FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)'), 1, 2, '') 
FROM    EMP AS e1 
GROUP BY DEPTNO; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-30T09:49:39.723

一步一步地把它拆开——从里到外。

**第1步：**

运行最里面的查询，看看它产生了什么：

```
SELECT E2.ename AS 'data()' 
FROM emp AS e2 
WHERE e2.DEPTNO = 10
FOR XML PATH('') 
```

你应该得到类似的输出：

```
CLARK KING MILLER 
```

**第2步：**

只是将`REPLACE`空格替换为`,`- 从而将您的输出变为

```
CLARK, KING, MILLER 
```

**第 3 步：**

外部查询获取`deptno`值 - 加上内部查询的结果 - 并产生最终结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-30T11:41:09.253

**SQL Server 2017**使用[新`STRING_AGG`](https://docs.microsoft.com/en-us/sql/t-sql/functions/string-agg-transact-sql)的. 最近看到这篇文章，并切换了我的**STUFF/FOR XML**策略以使用新的字符串函数。也避免了额外的 JOIN/SUBQUERY 和 FOR XML 的开销（*以及奇怪的编码问题*）和难以解释的 SQL。

```
SELECT  E1.deptno, 
        STRING_AGG(E1.ename, ', ') AS allemp
FROM    EMP AS e1 
GROUP BY DEPTNO; 
```

**注意**：还请务必[查看对应`STRING_SPLIT`](https://docs.microsoft.com/en-us/sql/t-sql/functions/string-split-transact-sql)的内容，以便更轻松地处理 SQL 分隔数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T09:45:32.810

外部查询检索部门编号列表，然后为每个部门编号运行子查询以返回属于该部门的所有名称。子查询使用 FOR XML 语句将输出格式化为单行逗号分隔列表。

# android - Android：调用特定版本的 API

> ID：10381513
> 
> 赞同：0
> 
> 时间：2012-04-30T09:42:23.623
> 
> 标签：android, api

我的应用程序（从 Android 2.3.3 开始）还必须支持 Android Ice Cream OS 4.0.3。一切正常，但是当使用 GROUP BY 并且 SQL 抱怨这会导致崩溃时，来自 Content Resolver 的查询会在圆括号中产生奇怪的事情。Android API 级别 10 没有出现同样的情况。也就是说，我的问题是：是否可以在冰淇淋上使用旧版本或 API（在我的情况下为 10）？当然，如果我的问题有更好的解决方案，那将受到欢迎。

预先感谢。

代码（简化版）如下：

```
ContentResolver contentResolver = context.getContentResolver();
Uri uri = Uri.withAppendedPath( ContactsContract.Data.CONTENT_URI, "");
StringBuilder where = new StringBuilder();
allContactCursor = contentResolver.query( uri,
PROJECTION_CONTACT,
"1) GROUP BY ( "+ RawContacts.CONTACT_ID,
null,
ContactsContract.Contacts.DISPLAY_NAME + " COLLATE NOCASE"); 
```

问题是 Ice Cream Sandwich 在编译 Sqlite 查询时不允许 GROUP BY 注入，而是在 Gingerbread 2.3.3 上工作。如果没有 GROUP BY，联系人会根据联系人拥有的电话号码数量而重复。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T15:21:01.333

Android 4.+ 向后兼容，因此即使使用 android 2.3.3 api，它也应该可以正常运行您的应用程序。除非您使用的是 4.0 特有的 api 功能。您最好的选择是将您的应用程序构建到 2.3.3，然后在 ICS 4.0 上进行测试......我希望这会有所帮助

# data-structures - 跳过列表是如何初始化的？

> ID：10381516
> 
> 赞同：0
> 
> 时间：2012-04-30T09:42:25.697
> 
> 标签：data-structures

我正在阅读[William Pugh 关于 skip-list 的论文](http://www.google.it/url?sa=t&rct=j&q=&esrc=s&source=web&cd=3&ved=0CEcQFjAC&url=http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.85.9211&rep=rep1&type=pdf&ei=HFueT9PaD8ucOr6I8PsB&usg=AFQjCNGaB1pJbYsiO40s6jeKjDlcudGDTA&sig2=2qeuXpTXiYt9VDYMvrLFAA)。在*初始化*部分他说：

> 一个元素 NIL 被赋予一个大于任何合法键的键。所有跳过列表的所有级别都以 NIL 终止。初始化一个新列表，使列表的级别等于 1，并且列表头的所有前向指针都指向 NIL。

我不确定他说什么。我认为他的意思是：让*n*为每个节点的最大允许级别。因此，构建一个级别为*n*的标题。在第一步中，标题的每一级都指向 NIL。这是正确的？

现在，当第一个节点到达时，它将以概率的方式插入，因此它的级别应该是不可预测的。为什么他谈到 1 级列表？我错过了什么？

此致

MC

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T10:06:34.587

我无法阅读该文档，但如果我没记错的话，那将`NIL`是列表中的一个元素，并且它`level`大于任何有效值`level`，以确保它始终是最后一项。假设您的级别从`1`到`3`，那么您将`NIL`' 级别设置为`4`。当您创建一个新的跳过列表时，它应该如下所示：

```
H = Header
N = Nil
   _    _
4 |H|->|N| 
3 |H|->|N| <- max for normal elements
2 |H|->|N|
1 |H|->|N| 
```

添加一些元素后，您将拥有：

```
 _                   _
4 |H|---------------->|N| 
3 |H|-------|B|------>|N|
2 |H|-------|B|->|C|->|N|
1 |H|->|A|->|B|->|C|->|N| 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T10:11:32.023

空列表（一个新列表）应该有级别 1。在插入过程中根据需要添加更多级别（稍后会出现）。

# android - PreferenceFragment / PreferenceActivity 崩溃 - 无法弄清楚原因

> ID：10381517
> 
> 赞同：0
> 
> 时间：2012-04-30T09:42:42.010
> 
> 标签：android, android-fragments, preferenceactivity

我想实现一个偏好屏幕。所以我基本上遵循了[开发者文档](http://developer.android.com/reference/android/preference/PreferenceActivity.html#addPreferencesFromResource%28int%29)中的示例。当我开始活动时，我看到标题列表，有一个标题（这部分似乎有效）。但是，一旦我单击此标题，活动就会因以下日志而崩溃。

我搜索了 SO 和 google，但找不到有关此错误的任何进一步信息。

我试图将**preference_appearance_screen.xml**缩短为一个CheckBoxPreference 项。XML Line 18 上的错误仍然相同。所以我猜这个文件中找不到错误。

**我的活动课：**

```
public class TrainerPreferenceActivity extends PreferenceActivity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    }

    @Override
    public void onBuildHeaders(List<Header> target) {
        loadHeadersFromResource(R.xml.preference_headers, target);
    }

    public static class AppearancePrefFragment extends PreferenceFragment {
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            addPreferencesFromResource(R.xml.preference_appearance_screen);
        }
    }
} 
```

**preference_headers.xml 文件：**

```
<?xml version="1.0" encoding="utf-8"?>
<preference-headers
    xmlns:android="http://schemas.android.com/apk/res/android">
    <header android:fragment=".TrainerPreferenceActivity$AppearancePrefFragment"
           android:title="Appearance"
           android:summary="An example of some preferences." />
</preference-headers> 
```

**preference_appearance_screen.xml 文件：**

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
    <PreferenceCategory 
        android:title="@string/pref_app_cat_theme">
    </PreferenceCategory>
    <PreferenceCategory 
        android:title="@string/pref_app_cat_background">
        <CheckBoxPreference 
            android:key="@string/pref_app_bg_iscustom_key" 
            android:title="@string/pref_app_bg_iscustom_title"
            android:summary="An example of some preferences."/>
        <CheckBoxPreference 
            android:key="@string/pref_app_bg_hascolor_key" 
            android:title="@string/pref_app_bg_hascolor_title"
            android:summary="An example of some preferences."/>  
        <CheckBoxPreference 
            android:key="@string/pref_app_bg_hasimage_key" 
            android:title="@string/pref_app_bg_hasimage_title"
            android:summary="An example of some preferences."/>
    </PreferenceCategory>
    <PreferenceCategory 
        android:title="@string/pref_app_cat_behavior">
        <CheckBoxPreference 
            android:key="@string/pref_app_orientationisenabled_key" 
            android:title="@string/pref_app_orientationisenabled_title"
            android:summary="An example of some preferences."/>        
        <CheckBoxPreference 
            android:key="@string/pref_app_gestureisenabled_key" 
            android:title="@string/pref_app_gestureisenabled_title"
            android:summary="An example of some preferences."/>
   </PreferenceCategory>
</PreferenceScreen> 
```

**日志猫：**

> 04-30 17:22:01.215: E/AndroidRuntime(16775): 致命异常: main 04-30 17:22:01.215: E/AndroidRuntime(16775): java.lang.RuntimeException: Binary XML file line #18: You必须提供 layout_width 属性。04-30 17:22:01.215: E/AndroidRuntime(16775): 在 android.content.res.TypedArray.getLayoutDimension(TypedArray.java:491) 04-30 17:22:01.215: E/AndroidRuntime(16775): 在android.view.ViewGroup$LayoutParams.setBaseAttributes(ViewGroup.java:5318) 04-30 17:22:01.215: E/AndroidRuntime(16775): 在 android.view.ViewGroup$LayoutParams.(ViewGroup.java:5271) 04- 30 17:22:01.215: E/AndroidRuntime(16775): 在 android.widget.AbsListView$LayoutParams.(AbsListView.java:5718) 04-30 17:22:01.215: E/AndroidRuntime(16775): 在 android.widget .AbsListView.generateLayoutParams(AbsListView.java:5355) 04-30 17:22:01.215:

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T06:47:01.763

好的，我设置了一个快速测试项目，但我无法重现该错误 - 它在我的 Galaxy Nexus 上显示并正常工作。你在什么设备上运行它，你有没有尝试过其他/模拟器？

我能找到的唯一可能相关的问题是[这种风格/主题相关的问题](http://www.mail-archive.com/android-developers@googlegroups.com/msg64082.html)，它似乎无处不在。您是否进行了任何自定义？如果是这样，请尝试以“vanilla”的形式运行上面的代码，看看是否会有所作为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-13T13:41:28.790

这是因为您引用了首选项屏幕正在使用的应用程序的自定义样式，并且该自定义样式没有继承那些必需的属性。要保留您的自定义样式并避免此问题，请确保您的自定义样式具有“layout_width”和“layout_height”属性。在你的情况下：

```
 <style name="MyListSeperator" parent="android:Widget.Holo.Light.TextView">
        <item name="android:layout_width">match_parent</item>
        <item name="android:layout_height">wrap_content</item>
        ...
    </style> 
```

然后你继续取消评论：

```
 <item name="android:listSeparatorTextViewStyle">@style/MyListSeparator</item> 
```

# android - android displaymetrics 返回 2/3 的屏幕尺寸

> ID：10381524
> 
> 赞同：2
> 
> 时间：2012-04-30T09:42:55.897
> 
> 标签：android, android-screen

我使用 displaymetrics 来获取设备的屏幕尺寸。在智能手机中效果很好，但在平板电脑中它返回屏幕宽度和高度的 2/3。谁能告诉我这是为什么？

那是代码：

```
DisplayMetrics metrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(metrics);
int screenheight = metrics.heightPixels;
int screenwidth= metrics.widthPixels; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-05T21:36:11.580

请尝试`getRealMetrics()`：

```
DisplayMetrics metrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getRealMetrics(metrics); 
```

这个 API 是在 API 17 中正式添加的，但在我有限的测试中，即使在 4.0 设备上它也能正常工作，所以在此之前它可能是一个隐藏的 API。

官方文档[here](http://developer.android.com/reference/android/view/Display.html#getRealMetrics%28android.util.DisplayMetrics%29)，尽管似乎有更多的原因表明其他 API 没有按照您的预期做，而不是那里的文字所暗示的。

如果有 ICS 设备无法使用此 API，您也可以尝试[此处](https://stackoverflow.com/a/17512853/642160)提到的后备方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T10:24:56.147

您没有按密度缩放。

尝试这个：

```
int screenHeight = metrics.heightPixels * getResources().getDisplayMetrics().density;
int screenWidth = metrics.widthPixels * getResources().getDisplayMetrics().density; 
```

还

```
(WindowManager) context.getSystemService(Context.WINDOW_SERVICE).getDefaultDisplay().getWidth(); 
```

# silverlight - 使用表示模型使用 wcf ria 服务将 rss 数据插入数据库

> ID：10381526
> 
> 赞同：0
> 
> 时间：2012-04-30T09:43:14.490
> 
> 标签：silverlight, mvvm, wcf-ria-services, presentation-model

我已经阅读了很多帖子，但找不到我的答案。我的问题有点具体。在我的 silverlight 项目中，我想从雅虎天气中获取天气数据，如温度、状态和日期，并通过从其 rss 更改将其保存到我的数据库中.so 使用 webclient 及其 DownloadStringAsync 和 DownloadStringCompleted 来获取数据。我还在服务器的模型文件夹中创建了一个演示模型（因为我想在我的服务中使用它）所以在我的 DownloadStringCompleted 事件处理程序中我做了这样的事情：

```
 void xmlclient_DownloadStringCompleted(object sender,DownloadStringCompletedEventArgs e)
    {
        XNamespace yweather = "http://xml.weather.yahoo.com/ns/rss/1.0";
        if (e.Error == null)
        {
            XElement x = XElement.Parse(e.Result);
            weatherquery1 =
               from items in x.Descendants("item")

               select new BusinessApplication1.Web.Models.WeatherConditionModel
               {

               PubDate = items.Element(yweather +"condition").Attribute("date").Value,
               Status = items.Element(yweather + "condition").Attribute("text").Value
               };
             }

           } 
```

这是在我的视图模型中，我测试了它所有的作品。我可以获取数据，也可以在数据网格或列表框中查看结果。现在我想将数据保存在我的数据库中。我希望它自动完成，而不是通过按钮或命令。例如，我希望它始终读取数据并每 5 分钟将其保存到数据库中。所以我创建了我的服务我创建了一个自定义插入，我可以自己塑造它：

```
 private void MapwcModel(WeatherConditionTable wctable, WeatherConditionModel wcPM)
     {
        wctable.Status = wcPM.Status;
        wctable.PubDate = wcPM.PubDate;
        wctable.WeatherConditionID = wcPM.WeatherConditionID;

     }

    [Insert]
    [Invoke]
    public void InsertWeatherConditionData(WeatherConditionModel WeatherConditionData)
    {
        WeatherConditionTable wc = WeatherConditionContext.WeatherConditionTables.CreateObject();
        MapwcModel(wc, WeatherConditionData);
        wc.Status = WeatherConditionData.Status;
        wc.PubDate = WeatherConditionData.PubDate;
        WeatherConditionContext.WeatherConditionTables.AddObject(wc);
        WeatherConditionContext.SaveChanges();

    } 
```

和我的获取数据：

```
 public IQueryable<WeatherConditionModel> GetWeatherConditionData()
           {
         return from p in this.WeatherConditionContext.WeatherConditionTables
               select new WeatherConditionModel
               {
                   WeatherConditionID = p.WeatherConditionID,
                   Status = p.Status,
                   PubDate = p.PubDate,

               };
           } 
```

现在我不知道如何强制它保存数据。我在我的 iewmodel 中写了这个但没有工作：

```
 foreach (BusinessApplication1.Web.Models.WeatherConditionModel el in weatherquery1)

                {
                WeatherConditionDomainContext context = new WeatherConditionDomainContext();
                EntityQuery<BusinessApplication1.Web.Models.WeatherConditionModel> weatherLoadQuery = context.GetWeatherConditionDataQuery();
                context.Load<BusinessApplication1.Web.Models.WeatherConditionModel>(weatherLoadQuery);
                context.SubmitChanges(delegate(SubmitOperation operation)
                {
                    if (operation.HasError)
                    {
                        operation.MarkErrorAsHandled();
                    }
                }, null);
                } 
```

我不知道如何强制插入方法起作用。有人请告诉我我错在哪里？我知道在某个地方。告诉我路。最好的祝福

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T14:40:53.710

我很难理解您要做什么，但是您展示的最后一步的模式应该更像：

```
// Create data context
WeatherConditionDomainContext context = new WeatherConditionDomainContext();

// Load existing entities
EntityQuery<BusinessApplication1.Web.Models.WeatherConditionModel> weatherLoadQuery = context.GetWeatherConditionDataQuery();
context.Load<BusinessApplication1.Web.Models.WeatherConditionModel>(weatherLoadQuery);

// Update or insert new entries
foreach (BusinessApplication1.Web.Models.WeatherConditionModel el in weatherquery1)
{
    // Update existing entries

    // Or, add new entries if they did not exists
}

// Submit all changes (updates & inserts)
context.SubmitChanges(delegate(SubmitOperation operation)
    {
        if (operation.HasError)
        {
            operation.MarkErrorAsHandled();
        }
    }, null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T16:12:12.887

我找到了它。非常感谢书：Silverlight 4 Unleased-第 13 章-来自伟大的：Laurent Bugnion。

首先，没有必要将 WeatherConditionModel 用作表示模型（当您需要将数据保存在多个表中时使用表示模型 id）。它只是用作我的查询输出的持有者的类。其次，根本不需要更改服务中的插入方法（因为这里我只想将数据保存在一个表中）所以，只需在您的实体模型上创建您的服务并构建它。以这种方式构建后，您可以调用您在视图模型中的表（我不能，因为我更改了我的服务方法（我将 WeatherConditionTable 更改为 WeatherConditionModel（类！！），如您所见）。第三，在我的 foreach 循环中，我可以将我的数据保存到我的数据库。.我有一个组合框和一个列表框和一个按钮，我从组合框中选择我的城市，然后点击使用命令到我的 GetRss 的按钮，它现在很好地完成了这项工作。它显示数据并将其保存到数据库。这是我的视图模型代码（描述部分）：

```
 internal void GetRssFeed()
          {
            Feed selectedFeed = (Feed)FeedModel.FeedList[FeedModel.SelectedIndex];
            FeedModel.SelectedFeedName = selectedFeed.FeedName;
            WebClient xmlclient = new WebClient();
            xmlclient.DownloadStringCompleted += new DownloadStringCompletedEventHandler(xmlclient_DownloadStringCompleted);
        xmlclient.DownloadStringAsync(new Uri(selectedFeed.FeedUrl));

    }

    WeatherConditionDomainContext context = new WeatherConditionDomainContext();
    WeatherConditionTable wct = new WeatherConditionTable();
    void xmlclient_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
        XNamespace yweather = "http://xml.weather.yahoo.com/ns/rss/1.0";
        if (e.Error == null)
        {

            XElement x = XElement.Parse(e.Result);
            weatherquery1 =
               from items in x.Descendants("channel")
               let item=items.Element("item")
               select new WeatherConditionModel
               {
                   Temp = Convert.ToInt32(item.Element(yweather + "condition").Attribute("temp").Value),
                   PubDate = item.Element(yweather + "condition").Attribute("date").Value,
                   Status = item.Element(yweather + "condition").Attribute("text").Value,
                   Humidity=Convert.ToInt32(items.Element(yweather + "atmosphere").Attribute("humidity").Value)
               };

            foreach (WeatherConditionModel wc in weatherquery1)
           {

                   wct.Temp = wc.Temp;
                   wct.Status = wc.Status;
                   wct.PubDate = DateTime.Now.ToShortTimeString();
                   wct.Humidity = wc.Humidity;
                   context.WeatherConditionTables.Add(wct);
                   context.SubmitChanges();

           }
        }
        else
        {
            MessageBox.Show(e.Error.Message);
        }
    } 
```

thanks for all attention.i hope it helped someone.tell me if anyone have better ideas. please mark as answer if it helped anyone.

# windows - Acrobat（阅读器）：在 Windows 上通过命令行全屏打开

> ID：10381528
> 
> 赞同：0
> 
> 时间：2012-04-30T09:43:18.857
> 
> 标签：windows, command-line, adobe, acrobat

我希望通过 Windows 上的命令行以全屏模式打开我的 PDF 文档。像这样的东西：

```
"C:\Program Files\Adobe\Acrobat 8.0\Acrobat\Acrobat.exe" "pagemode=fullscreen" "myfile.pdf" 
```

我不认为该`fullscreen`参数的选项`pagemode`存在。

我无法`myfile.pdf`通过文档属性预先设置文件的*文档属性*以全屏模式打开，因为 PDF 文件是由*LaTeXing*使用批处理文件生成的。所以一切都必须通过 Windows 命令行来完成。

PS：此处提出的解决方案： [How to open a pdf in fullscreen view via command line](https://stackoverflow.com/questions/6557920/how-to-open-a-pdf-in-fullscreen-view-via-command-line)不适用于 Acrobat。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T15:52:33.257

我正在寻找同样的东西。我已经能够使窗口适合我的屏幕。虽然没有全屏。
例子：`start "" /max "Acrobat path" /A "parameter=value" "PDF path"`

你的情况：

```
start "" /max "C:\Program Files\Adobe\Acrobat 8.0\Acrobat\Acrobat.exe" /A "zoom=100" "myfile.pdf" 
```

PS：缩放值100表示​​缩放值为100%。

您可以在单个 URL 中指定多个参数。使用与号 (&) 或井号 (#) 字符分隔每个参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-18T05:48:48.967

测试下面的，我用 Adob​​e Reader 10 start "" /max "C:\Program Files Xxxxx.exe" /A "pagemode=FullScreen" ".pdf" 测试过

# joomla - joomla 2.5 中升级组件的脚本文件？

> ID：10381530
> 
> 赞同：0
> 
> 时间：2012-04-30T09:43:37.787
> 
> 标签：joomla

关于安装升级组件

错误是：JInstaller: :Install: 文件不存在 D:\xampp\htdocs\jeema6\tmp\install_4f9e645ee90d9\install.php 组件更新：无法复制 PHP 安装文件。

install.php 文件用于复制根文件夹中的几个文件

如果有任何方法可以在脚本文件中调用 install.php

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T13:18:46.587

如果您谈论的是在新更新出现时更新 Joomla 2.5 的升级组件，那么就没有必要了。Joomla 2.5 已经内置了这个功能。

# android - 在 android 上的 localhost 中读取简单的 Json

> ID：10381534
> 
> 赞同：1
> 
> 时间：2012-04-30T09:43:52.687
> 
> 标签：android, json

```
{
    "TopNews": [{
        "id": "5",
        "title": "http:\/\/Test\/news_images\/title5",
        "image": "http:\/\/Test\/news_images\/image5",
        "description": "desc5",
        "canComment": true
    }, {
        "id": "4",
        "title": "http:\/\/Test\/news_images\/title4",
        "image": "http:\/\/Test\/news_images\/image4",
        "description": "desc4",
        "canComment": true
    }, {
        "id": "3",
        "title": "http:\/\/Test\/news_images\/title3",
        "image": "http:\/\/Test\/news_images\/image3",
        "description": "desc3",
        "canComment": true
    }, {
        "id": "2",
        "title": "http:\/\/Test\/news_images\/title2",
        "image": "http:\/\/Test\/news_images\/image2",
        "description": "description2",
        "canComment": true
    }, {
        "id": "1",
        "title": "http:\/\/Test\/news_images\/title1",
        "image": "http:\/\/Test\/news_images\/image1",
        "description": "desc1",
        "canComment": true
    }]
} 
```

我想在我的应用程序中阅读和显示的是“id”标签。请有人告诉我一个简单的方法。非常感谢任何帮助。请大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T09:49:11.900

从创建您自己的自定义对象**News**开始，它具有所有属性 id、title、image...

然后在解析 JSON 对象时填充对象，如下所示：

```
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

JSONObject json = getJSONfromURL("localhost/SericeReturnsJSONObject.whatEver");

try 
{
   ArrayList<News> alNewsListfromJson = alGetNewsList(json);
}
catch (JSONException e) 
{
   e.printStackTrace();
} 
```

* * *

```
private ArrayList<News> alGetNewsList(JSONObject json) throws JSONException {

  JSONArray TopNews = json.getJSONArray("TopNews");
  News oNews = null;
  ArrayList<News> alNewslist = new ArrayList<News>(); 

  for (int i = 0; i < TopNews.length(); i++) {

      JSONObject oJSONObject = shows.getJSONObject(i);
      oNews = new News();

      oNews.setNewsID(oJSONObject.getString("id"));     
      oNews.setNewsTitle(oJSONObject.getString("title")); 
      // .. etc

      alNewslist.add(oNews);
      oNews = null;
  }
 return alNewslist;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T09:47:34.270

```
JSONObject fullJObj = new JSONObject(myStr);
JSONArray jArr = fullJObj.getJSONArray("TopNews");
for (int i = 0; i < jArr.length(); ++i ) {
    JSONObject jObj = jArr.getJSONObject(i);
    String id = jObj.getString("id");
} 
```

欲了解更多信息，请访问：

*   [JSONObject 文档](http://developer.android.com/reference/org/json/JSONObject.html)。
*   [JSONArray 文档](http://developer.android.com/reference/org/json/JSONArray.html)。
*   [JSON 文档](http://json.org)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T09:47:07.390

[http://www.vogella.com/articles/AndroidJSON/article.html](http://www.vogella.com/articles/AndroidJSON/article.html)

```
JSONArray jsonArray = new JSONArray(readTwitterFeed);..... 
```

看这个简单的例子......这可能会帮助你

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T09:47:38.607

使用**JSONObject**和**JSONArray**类。

[http://developer.android.com/reference/org/json/JSONObject.html](http://developer.android.com/reference/org/json/JSONObject.html)

[http://developer.android.com/reference/org/json/JSONArray.html](http://developer.android.com/reference/org/json/JSONArray.html)

网络正在爬取 Android 的简单示例。

基本上你需要做的是：

*   将字符串加载到 JSONObject

*   用 TopNews 制作一个 JSONArray

*   通过它并获取 id

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T10:01:04.107

```
JSONObject jsonObject = new JSONObject(payload); // payload is your JSON
JSONArray my_news = jsonObject.getJSONArray("TopNews");

List<int> my_ids = new ArrayList<int>();

for (int i = 0; i < my_news.length(); i++) {
   JSONObject my_object = my_news.getJSONObject(i);
   int id = Integer.parseInt(my_object.getString("id"));
   my_ids.push(id);
} 
```

需要时不要忘记用 try/catch 包围。

# ruby-on-rails-3 - Exception notifier only in Production mode?

> ID：10381542
> 
> 赞同：0
> 
> 时间：2012-04-30T09:44:33.413
> 
> 标签：ruby-on-rails-3, exception-handling

I use **Exception Notifier** for handling errors in my app and in `/config/initializers/exception_notification.rb` I have followings:

```
MyAPP::Application.config.middleware.use ExceptionNotifier,
  :email_prefix => "[ERROR] ",
  :sender_address => '"Notifier" <notifier@yourdomain.com>',
  :exception_recipients => ['account@gmail.com'] 
```

But the notification email is sent also in development mode, how can I allow sending email only in production mode?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T09:57:14.593

You can configure the ExceptionNotifier separately for each environment. [See also the documentation](https://github.com/smartinez87/exception_notification).

> As of Rails 3 ExceptionNotification is used as a rack middleware, so you can configure its options on your config.ru file, or in the environment you want it to run. In most cases you would want ExceptionNotification to run on production.

So you just configure it in your `config/environments/production.rb` with e.g.

```
Whatever::Application.config.middleware.use ExceptionNotifier,
  :email_prefix => "[Whatever] ",
  :sender_address => %{"notifier" <notifier@example.com>},
  :exception_recipients => %w{exceptions@example.com} 
```

There is also [a nice blog entry handling this topic](http://www.storm-consultancy.com/blog/development/basic-exception-notification-in-rails-3/).

# salesforce - 我可以通过 apex 代码创建新的远程站点设置吗？

> ID：10381543
> 
> 赞同：3
> 
> 时间：2012-04-30T09:44:37.693
> 
> 标签：salesforce, apex-code

我得到了必须在运行时发送请求的端点。后来我想向这个端点发送一个 HTTP post 请求，所以我必须在运行时创建一个远程站点设置。

有没有办法通过 apex 代码创建远程站点设置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T18:31:37.190

我不相信有办法做你所要求的（我找不到）。允许使用 Apex 创建远程站点设置会产生很多安全问题；这可能是不允许的原因。

但是，我能够找到与该问题相关的一些建议的[问题](https://stackoverflow.com/q/6832695/549141)和[答案。](https://stackoverflow.com/a/6836769/549141)

> “我发现保存配置值的最佳方法是使用 Apex[自定义设置](http://www.salesforce.com/us/developer/docs/apexcode/index_Left.htm#StartTopic=Content/apex_methods_system_custom_settings.htm#kanchor672)。要以编程方式设置远程站点设置，您可以使用[元数据 API](http://www.salesforce.com/us/developer/docs/api_meta/index_Left.htm#StartTopic=Content/meta_remotesitesetting.htm#kanchor148)。” -[亚当](https://stackoverflow.com/users/75802/adam)

# java - 尝试实例化 Hibernate 时出现 SQLException (UnsupportedOperationException)

> ID：10381546
> 
> 赞同：1
> 
> 时间：2012-04-30T09:44:58.157
> 
> 标签：java, sql, hibernate

对于我的工作，我必须在项目中第一次使用**Hibernate 。**实际上，一切都是由其他人设置的，现在我必须稍微扩展“查询”。我们有一个运行在**Eclipse中的****Tomcat v7.0**服务器，**Quartz**框架用于每 5 分钟安排一次查询。然后这个查询由 Hibernate 执行/处理。我想我理解了大部分内容，但正如我所说：我是这里的新手，所以这个问题可能真的很愚蠢，但我无法使用 Google/StackOverflow 找到答案，所以就这样吧。

 ****由于我在hibernate的查询配置中修改了一些东西，所以我一直得到`null`结果。经过一番挣扎，我已经登录并运行。这是我在启动 Tomcat 服务器时得到**的日志的（我认为）相关部分：**

```
30-apr-2012 11:02:32 org.hibernate.cfg.SettingsFactory buildSettings
WARNING: Could not obtain connection metadata
java.sql.SQLException: An SQLException was provoked by the following failure: java.lang.UnsupportedOperationException
    at com.mchange.v2.sql.SqlUtils.toSQLException(SqlUtils.java:106)
    at com.mchange.v2.sql.SqlUtils.toSQLException(SqlUtils.java:65)
    at com.mchange.v2.sql.SqlUtils.toSQLException(SqlUtils.java:62)
    at com.mchange.v2.c3p0.impl.NewPooledConnection.handleThrowable(NewPooledConnection.java:369)
    at com.mchange.v2.c3p0.impl.NewProxyDatabaseMetaData.getDatabaseMajorVersion(NewProxyDatabaseMetaData.java:3692)
    at org.hibernate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:126)
    at org.hibernate.cfg.Configuration.buildSettingsInternal(Configuration.java:2863)
    at org.hibernate.cfg.Configuration.buildSettings(Configuration.java:2859)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1870)
    at org.springframework.orm.hibernate3.LocalSessionFactoryBean.newSessionFactory(LocalSessionFactoryBean.java:753)
    at org.springframework.orm.hibernate3.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:691)
    at org.springframework.orm.hibernate3.AbstractSessionFactoryBean.afterPropertiesSet(AbstractSessionFactoryBean.java:211)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1390)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1359)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:540)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$1.run(AbstractAutowireCapableBeanFactory.java:485)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:455)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:251)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:169)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:248)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:170)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:268)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:104)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1274)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1042)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:539)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$1.run(AbstractAutowireCapableBeanFactory.java:485)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:455)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:251)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:169)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:248)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:170)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:268)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:104)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1274)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1042)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:539)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$1.run(AbstractAutowireCapableBeanFactory.java:485)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:455)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:251)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:169)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:248)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:170)
    at com.mh2o.dbase.manager.HibernateDaoManager.getInstance(HibernateDaoManager.java:17)
    at com.mh2o.dbase.wbuserlist.WelcomeBoardMgr.<init>(WelcomeBoardMgr.java:11)
    at com.mh2o.application.cache.welcomeboard.WelcomeCache.synchronize(WelcomeCache.java:44)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.springframework.util.MethodInvoker.invoke(MethodInvoker.java:283)
    at org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean$MethodInvokingJob.executeInternal(MethodInvokingJobDetailFactoryBean.java:272)
    at org.springframework.scheduling.quartz.QuartzJobBean.execute(QuartzJobBean.java:86)
    at org.quartz.core.JobRunShell.run(JobRunShell.java:216)
    at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:549)
Caused by: java.lang.UnsupportedOperationException
    at sun.jdbc.odbc.JdbcOdbcDatabaseMetaData.getDatabaseMajorVersion(Unknown Source)
    at com.mchange.v2.c3p0.impl.NewProxyDatabaseMetaData.getDatabaseMajorVersion(NewProxyDatabaseMetaData.java:3678)
    ... 53 more
30-apr-2012 11:02:32 org.hibernate.transaction.TransactionFactoryFactory buildTransactionFactory 
```

因此，SQL 中似乎存在错误。现在，我添加了一些文件，所以我猜这就是错误出现的地方。数据库包含一个可以连接到已经查询过的表的表，这就是我所做的：

**employeeavailablehours.hbm.xml**（描述数据库中的表）：

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD//EN"  "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping package="com.mh2o.application.vo.planningview" schema="N_C">
 <class name="EmployeeAvailableHours" table="WerknemersBeschikbareUr">
    <id column="ID" name="id" type="string">
        <generator class="native"/>
    </id>
    <property column="InitialenWerknemer"  name="initial" generated="never" lazy="false" not-null="true" type="string"/>
    <property column="Vanaf"  name="from" generated="never" lazy="false" not-null="true" type="string"/>
    <property column="Tot"  name="to" generated="never" lazy="false" not-null="true" type="string"/>
    <property column="Volgnummer"  name="indexnumber" generated="never" lazy="false" not-null="true" type="string"/>
  </class>
</hibernate-mapping> 
```

**employeeinfo.hbm.xml**（已经由其他人创建，由我修改以包含对上表的引用）：

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD//EN"  "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping package="com.mh2o.application.vo.planningview" schema="N_C">
 <class name="EmployeeInfo" table="WerknemersInfo">
    <id column="ID" name="id" type="string">
        <generator class="native"/>
    </id>
    <property column="Naam"  name="name" generated="never" lazy="false" not-null="true" type="string"/>
    <property column="InitialenWerknemer"  name="initial" generated="never" lazy="false" not-null="true" type="string"/>
    <set name="employeeavailablehours" table="WerknemersBeschikbareUr" inverse="false" lazy="false" fetch="select">
        <key>
            <column name="InitialenWerknemer" not-null="true" />
        </key>
        <one-to-many class="EmployeeAvailableHours"  />
    </set>
  </class>

</hibernate-mapping> 
```

当然，我已经`context.xml`在 xml 文件中添加了新表 employeeavailablehours，并创建了类来表示新表中的数据。此外，我还编辑了代表现有表的类，以保存对我添加的表的引用。我认为这不是错误出现的地方，查看异常，这就是为什么我在这里不包括这些类的 Java 源代码。如果需要，我当然会。

如果你们需要更多信息，请询问，我会编辑我的问题。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T15:48:44.830

事实证明我做错了什么：我用作外键的键根本不能用作外键。更改将一张表与另一张表连接的位置的完整设置解决了该问题。****

# java - 为什么不给静态最终变量默认值？

> ID：10381551
> 
> 赞同：5
> 
> 时间：2012-04-30T09:45:30.837
> 
> 标签：java

为什么静态最终变量没有被赋予默认值，而静态（但非最终变量被赋予默认值）。

在 Java 中实现这种行为的原因是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-30T09:53:18.403

当然，静态最终变量被赋予默认值，例如：

```
class Test {
    static final int x;
    static {
        printX();
        x = 42;
        printX();
    }

    static void printX() {
        System.out.println("Here x is "+x);
    }
    public static void main(String[] args) { }
} 
```

输出是：

```
Here x is 0
Here x is 42 
```

如果`x`没有给出[JLS 4.12.5](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.12.5)`0`中指定的默认值，则输出将取决于所使用的 JVM。您可能会看到一些随机数。

**更新**：既然我们已经证明静态最终字段确实获得了默认值，您可能想知道为什么默认值还不够。这个问题没有很好的答案，除了显而易见的问题：[“规范是这样说的”](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.3.1.2)。摘自 8.3.1.2：

> 如果声明它的类的静态初始化程序（第 8.7 节）未明确分配（第 16.8 节）一个空白 final（第 4.12.4 节）类变量，则这是编译时错误。

我们只能猜测这种限制背后的动机，但我认为这是为了让程序更容易理解。如果您想将变量设置为 0，则明确地执行此操作会更清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T09:48:28.873

简单的。由于它们是`final`，因此您以后将无法修改它们，因此默认值也将是 final。以后将不允许您对其进行修改。不是很有用。

# c++ - VS 2010 中的 C++ 中的 static_cast 无法从 void* 转换为 size_t 错误

> ID：10381558
> 
> 赞同：3
> 
> 时间：2012-04-30T09:46:09.060
> 
> 标签：c++

我有以下代码，我收到以下错误

> 错误 C2036：“void *”：未知大小
> 错误 C2440：“static_cast”：无法从“void *”转换为“size_t”

在线

```
void *addr = static_cast <void*> (static_cast <size_t> (mem + bytesAlreadyAllocated)); 
```

我的问题是为什么我会遇到错误以及如何摆脱这些错误？

感谢帮助。

```
class MemoryChunk {
public:
    MemoryChunk (MemoryChunk *nextChunk, size_t chunkSize);
    ~MemoryChunk() {delete mem; }

    inline void *alloc (size_t size);
    inline void free (void* someElement);

    // Pointer to next memory chunk on the list.
    MemoryChunk *nextMemChunk() {return next;}
    // How much space do we have left on this memory chunk?
    size_t spaceAvailable() { return chunkSize - bytesAlreadyAllocated; }

    // this is the default size of a single memory chunk.
    enum { DEFAULT_CHUNK_SIZE = 4096 };
private:

    // The MemoryChunk class is a cleaner version of NextOnFreeList. It separates the next pointer from
    // the actual memory used for the allocated object. It uses explicit next and mem pointers, with no 
    // need for casting.

    MemoryChunk *next;
    void *mem;

    // The size of a single memory chunk.
    size_t chunkSize;
    // This many bytes already allocated on the current memory chunk.
    size_t bytesAlreadyAllocated;
};

MemoryChunk::MemoryChunk(MemoryChunk *nextChunk, size_t reqSize) {
    chunkSize = (reqSize > DEFAULT_CHUNK_SIZE) ? reqSize : DEFAULT_CHUNK_SIZE;
    next = nextChunk;
    bytesAlreadyAllocated = 0;
    mem = new char [chunkSize];
}

void* MemoryChunk :: alloc (size_t requestSize) {
    void *addr = static_cast <void*> (static_cast <size_t> (mem + bytesAlreadyAllocated));
    bytesAlreadyAllocated += requestSize;
    return addr;
}

inline void MemoryChunk :: free (void *doomed) {} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T09:50:19.057

表达方式：

```
static_cast <size_t> (mem + bytesAlreadyAllocated) 
```

使用未定义大小 ( `void`) 的类型应用偏移量。由于`void`没有大小，因此程序格式不正确。

`char*`是适合您在这种情况下使用的指针。例如：

```
`char* mem;`
 // and
 char* addr(mem + bytesAlreadyAllocated); 
```

**更新**

所以在下面的程序中：

```
#include <iostream>

int main(int argc, const char* argv[]) {
    const int array[3] = {-1, 0, 1};
    std::cout << *(array + 0) << ", "
      << *(array + 1) << ", " << *(array + 2) << "\n";
    return 0;
} 
```

输出是`-1, 0, 1`。元素偏移量是根据数组元素的大小和类型应用的。与`void`-- 大小不合适。

# ios - 为什么百分比 UILabel 显示 'nan%'

> ID：10381562
> 
> 赞同：0
> 
> 时间：2012-04-30T09:46:34.427
> 
> 标签：ios, xcode, uilabel, nan, uistepper

目前，该应用程序本身会记录某项体育比赛的线索。它通过更新来捕获信息，`UIStepper`这会将`UILabel`'s 更新为 1、2、3... 等。

但是，当我按下“减号”以将`UIStepper`其变`UILabel`回零时，显示提示百分比`UILabel`的右侧`UIStepper`显示“nan%”请参见附图。

![在此处输入图像描述](../Images/ef5e35a1a4c86b74b374a9dd8b340744.png)

为什么这样做？

**百分比标签的代码**

```
self.smashPercentageLabel.text = [NSString stringWithFormat:@"%.2f%%",([self.smashLabel.text floatValue]/self.rallies)*100]; 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T10:10:09.923

要检查是否 nan，您可以使用一种 `isnan()`方法。

然后如果它是一个nan那么简单`yourVar = 0;`

例子：

```
double test = NAN;
if(isnan(test))
    NSLog(@"YES, it is a NAN!"); 
```

编辑：

```
if(isnan([self.smashLabel.text floatValue]))
       self.smashPercentageLabel.text = [NSString stringWithString:@"0%"];
else
       self.smashPercentageLabel.text = [NSString stringWithFormat:@"%.2f%%",([self.smashLabel.text floatValue]/self.rallies)*100]; 
```

这应该可以解决问题，如果不尝试更改`floatValue`为`doubleValue`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-23T16:28:43.820

`[NSString stringWithFormat:@" %i%%",averageValue] ;`

用价值显示百分比:)

# html - 表格图像上的 CSS 过渡

> ID：10381564
> 
> 赞同：0
> 
> 时间：2012-04-30T09:46:48.577
> 
> 标签：html, css, css-transitions

我如何在假期列表中使用 css 转换，这样当我将鼠标悬停在图像上时，它需要显示大图像大小，当我将鼠标移出时，它需要返回到正常状态，我知道使用 javascript，但我希望这样做使用 css3 [http://jsfiddle.net/TwRTc/](http://jsfiddle.net/TwRTc/)

```
<html>
 <head>
 <style>
# select
{
transition:width 2s;
-moz-transition:width 2s; /* Firefox 4 */
-webkit-transition:width 2s; /* Safari and Chrome */
-o-transition:width 2s; /* Opera */
}
 </style>
  </head>
  <body>
  <table border="0" cellpadding="0" cellspacing="15" style="font-family:Comic Sans MS; color:#0066CC;">
<tr align="left">
        <TH></TH>
         <th>HOLIDAYS </th>
         <th>DAYS OBSERVED</th>
</tr>
<tr>
        <td><img class="select" src="C:/Documents and Settings/user/Desktop/new year1.jpg" width="25" height="25" border="1">&nbsp;</td>
        <td> NEW YEARS DAY </td>
        <td>JANUARY 01, 2012</td>
</tr>
<tr>
        <td><img class="select" src="C:/Documents and Settings/user/Desktop/bhogi.jpg" width="25" height="25" border="1"></td>
        <td>BHOGI/MAKAR SANKRANTHI</td>
        <td> JANUARY 13, 2012</td>
</tr>
<tr>
        <td><img src="C:/Documents and Settings/user/Desktop/republic day.jpg" width="25" height="25" border="1"></td>
        <td>REPUBLIC DAY </td>
        <td>JANUARY 26, 2012</td>
</tr>
<tr>
        <td><img src="C:/Documents and Settings/user/Desktop/ugadhi.jpg" width="25" height="25" border="1" ></td>
        <td>UGADI </td>
        <td> MARCH 23, 2012</td>
</tr>
<tr>
        <td><img src="C:/Documents and Settings/user/Desktop/good friday.jpg" width="25" height="25" border="1" ></td>
        <td>GOOD FRIDAY </td>
        <td>APRIL 06, 2012</td>
</tr>
<tr>
        <td><img src="C:/Documents and Settings/user/Desktop/independence day.jpg" width="25" height="25" border="1"></td>
        <td>INDEPENDENCE DAY</td>
        <td>AUGUST 15, 2012</td>
</tr>
<tr>
        <td><img src="C:/Documents and Settings/user/Desktop/489ramzan.gif" width="25" height="25" border="1"></td>
        <td> RAMZAN</td>
        <td>AUGUST 20, 2012</td>
</tr>
<tr>
        <td><img src="C:/Documents and Settings/user/Desktop/vinaka chowathi.jpg" width="25" height="15" border="1" ></td>
        <td>VINAYAKA CHAVITHI</td>
        <td> SEPTEMBER 19, 2012</td>
</tr>
<tr>
        <td><img src="C:/Documents and Settings/user/Desktop/dasara.jpg" width="25" height="25" border="1"></td>
        <td>DASARA</td>
        <td>OCTOBER 24, 2012</td>
</tr>
<tr>
        <td><img src="C:/Documents and Settings/user/Desktop/diwali1.jpg" width="25" height="25" border="1"></td>
        <td>DIWALI</td>
        <td>NOVEMBER 13,2012</td>
</tr>
<tr>
        <td><img src="C:/Documents and Settings/user/Desktop/images.jpg" width="25" height="25" border="1"></td>
        <td>CHRISTMAS</td>
        <td>DECEMBER 25, 2012</td>
</tr>
</table>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T18:24:24.993

您将需要使用 CSS3 比例。我会写一个快速的示例。

这是一个简单的实现：

```
img:hover { 
    -webkit-transform: scale(1.5);
    -moz-transform: scale(1.5);
    -o-transform: scale(1.5);
    transform: scale(1.5);
} 
```

请记住，您可能应该缩小默认图像视图以获得最佳视觉效果。

如果您的图像是 300 像素 x 200 像素，那么您可以这样做：

```
img {
  width: 200px; 
} 
```

更新了你的小提琴：http: [//jsfiddle.net/TwRTc/2/](http://jsfiddle.net/TwRTc/2/)

# ruby-on-rails - 在 ruby on rails 中一次更新 2 个具有相同属性的模型

> ID：10381565
> 
> 赞同：2
> 
> 时间：2012-04-30T09:46:48.790
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, rails-models

我的 store_opening_stock 表格中有这个

```
 <%= simple_form_for @store_opening_stock do |f| %>
      <%= f.error_messages %>
      <p>
      <%= f.hidden_field :user_id, :value => current_user.id %>

      <%= f.label :employee_id %>
      <%= f.collection_select :employee_id, Employee.all, :id, :name, options ={:prompt => "-Select  employee  Name"}, :class => "employee name", :style=>'width:210px;'%><br />

         <%= f.label :date %>
        <%= f.datepicker :date, :dateFormat => 'dd MM, yy',  :showOn => "both", :buttonImage => "/assets/calendar.gif", :buttonImageOnly => true, :changeMonth => true, :changeYear => true, :placeholder => "Click on the calender", :yearRange =>'1950:2042' %><br/>

        <%= f.label :product_id %>
        <%= f.collection_select :product_id, Product.all, :id, :title, options ={:prompt => "-Select  Product  Name"}, :class => "product name", :style=>'width:210px;'%><br /> 

        <%= f.input :batch_no,  :label => 'Batch No', :input_html => { :size => 30}%><br/>
        <%= f.input :price,  :label => 'price', :input_html => { :size => 30}, :placeholder =>'Enter Digits'%><br/> 
        <%= f.input :quantity,  :label => 'quantity', :input_html => { :size => 30}, :placeholder =>'Enter Digits'%><br/>
       <p><%= f.submit %></p>
<% end %> 
```

我有 2 个模型，一个是 store_opening_stock.rb 和 stock.rb

```
class StoreOpeningStock < ActiveRecord::Base
    attr_accessible :comments_attributes, :stocks_attributes
  attr_accessible :user_id, :date ,:store_location_id, :product_id, :batch_no
  attr_accessible :expiry_date, :price, :quantity, :comment_id, :employee_id
  attr_accessible :goods_receipt_id

  has_many :stocks    
end

class Stock < ActiveRecord::Base
    attr_accessible :date, :store_location_id, :product_id, :batch_no, :expiry_date, :price, :quantity, :goods_reciept_id

    belongs_to :store_opening_stock, :foriegn_key => "store_opening_stock_id"
    acts_as_store_opening_stock
    accepts_nested_attributes_for :store_opening_stocks
end
end 
```

有没有一种方法可以在我单击 store_opening_stock 表单中的提交后立即将 PRICE、PRODUCT_ID、QUANTITY、BATCH-NO 从 store_opening_stocks 更新为库存？？？？当我在 Ruby on rails 中按下提交时，我可以一次更新 2 个表吗？？？？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T10:16:26.467

是的。看到您已经在 stock.rb 模型中使用“accepts_nested_attributes_for”，这是一个很好的做法，同时从库存模型表单中保存多个“store_opening_stock”记录。

但是如果你想在表单中有不同的模型属性，你可以使用[fields_for](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-fields_for)

# windows - 通过 Windows 批处理从 svnlook 获取日志消息

> ID：10381572
> 
> 赞同：3
> 
> 时间：2012-04-30T09:47:13.297
> 
> 标签：windows, batch-file, logging, multiline, svnlook

我尝试为我的 svn 存储库准备一个提交后挂钩。因此，我需要使用命令获得的最后一次提交的日志消息`svnlook log -r %REV% %REPOS%`。用适当的参数填充片段，我得到以下多行日志消息：

```
This
is
my
transaction. 
```

到目前为止，这运作良好。现在我把它放在一个 .bat 文件中：

```
@ECHO OFF

REM just for testing purpose...
SET REPOS=C:\repo
SET REV=40

FOR /F %%i in ('svnlook log -r %REV% %REPOS%') do SET VAR=%%i

ECHO %VAR% 
```

当我执行脚本时，只回显最后一行`transaction.`。for 循环是我认为的一个片段，它会将 svnlook 输出读入`%var%`.

我的方法是在一个变量中获取日志消息，我将其作为参数传递给另一个 exe 文件。但它不会起作用。我不知道如何正确使用循环。

日志消息应作为参数提供给另一个 exe 文件。

我将脚本修改为以下（@thx PA。）

```
@ECHO OFF
setlocal enabledelayedexpansion

SET REPOS=C:\repo
SET REV=40

SET MSG=
FOR /F %%i in ('svnlook log -r %REV% %REPOS%') do SET VAR=!VAR! %%i
ECHO !VAR! 
```

现在的输出是`This is my transaction.`但是换行符消失了，但我需要进一步处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T11:04:04.217

由于您还需要换行符，您可以在连接行时添加它们。

```
@ECHO OFF
setlocal enabledelayedexpansion
set LF=^

rem ** The two empty lines are NECESSARY

SET REPOS=C:\Users\CH.ROSESOFT\Downloads\t3\repo
SET REV=40

SET MSG=
FOR /F %%i in ('svnlook log -r %REV% %REPOS%') do (
    SET "VAR=!VAR!!LF!%%i"
    SET "PAR=!PAR!^^!LF!!LF!%%i"
)
ECHO !VAR!
myProgram.exe !par! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T10:09:59.550

如果我正确理解您的问题，您需要将 svnlook 命令的输出连接到一个变量中（类似于 VAR = VAR & %%i）

`%`在 BAT 中，您通过编写用符号包裹的变量来访问变量的内容。你只需将它们粘在一起就可以连接起来。`SET X=%A%`. `SET Y=%A%%B%`. 因此，在您的情况下，您应该将`SET`分配更改为`SET VAR=%VAR% %%i`.

但是，这行不通。由于分配在`FOR`循环内，因此每次迭代都需要重新评估。您需要*启用延迟扩展*。阅读`HELP SET`以获取更多信息。

类似的东西，

```
@ECHO OFF
setlocal enabledelayedexpansion
...
SET VAR=
FOR /F %%i in ('solook log -r %REV% %REPOS%') do SET VAR=!VAR! %%i
ECHO !VAR! 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T21:24:25.203

没有分隔符，有些词会丢失

这是我的预提交脚本，我刚刚写完

如果您将 debug 设置为 1，它将开始一直失败，您将看到带有一些 var 输出的消息

```
@echo off

set DEBUG=0

:::::::::::::::::::::::::: Dont touch this part :::::::::::::
setlocal enabledelayedexpansion
set space= 
set LF=^

rem ** The two empty lines are NECESSARY
:::::::::::::::::::::::::: Dont touch above     :::::::::::::

set REPOS=%1
set TXN=%2   

::: Get the author ::::::::::::::::::::::::::::::::::
set author=
For /F %%I in ('svnlook author %REPOS% -t %TXN%') Do Set author=!author!%%I

::: Get the message ::::::::::::::::::::::::::::::::::
set message=
For /F "delims=" %%I in ('svnlook log %1 -t %2') Do Set message=!message!%%I%space%

 :: Make sure that author is not blank or guest - if readonly accounts are enabled and something goes wrong
  echo %author% | FindStr [a-zA-Z0-9] >nul
  IF %ERRORLEVEL% NEQ 0 GOTO AUTHOR_NOT_OK

  echo %author% | FindStr \C:guest >nul
  IF %ERRORLEVEL% EQU 0 GOTO AUTHOR_NOT_OK
  :: %ERRORLEVEL% = 1 at this point means its no error!

  :: Make sure that the log message contains some text.
  echo "%message%" | FindStr [a-zA-Z0-9] >nul
  IF %ERRORLEVEL% NEQ 0 GOTO COMMENT_NOT_OK

  :: Make sure that the log message contains ACR
  echo "%message%" | FindStr /I /C:acr >nul
  IF %ERRORLEVEL% NEQ 0 GOTO COMMENT_NOT_OK

  GOTO OK

:COMMENT_NOT_OK
  echo COMMENT_NOT_OK 1>&2
  echo "D:\SYSAPPS\HATS\ci\repositories\repo\java\hooks\pre-commit.bat 1>&2
  echo Your commit has been blocked because you didn't provide adequate log message 1>&2
  echo Please write a log message describing the purpose of your changes and 1>&2
  echo then try committing again. -- Thank you 1>&2
  echo e.g. 1>&2
  echo ACR: 12345 1>&2
  echo fixed blah blah blah 1>&2
  if %DEBUG% EQU 1 GOTO EXITDEBUG

  exit 1

:AUTHOR_NOT_OK
  echo AUTHOR_NOT_OK 1>&2

:OK
  if %DEBUG% EQU 1 GOTO EXITDEBUG
  exit 0

:EXITDEBUG

  echo == EXITDEBUG == 1>&2
  echo ---- %AUTHOR% %message% ----  1>&2
  echo txn %TXN% repos %REPOS% 1>&2
  echo  changedpath  1>&2
  svnlook changed %REPOS% -t %TXN% 1>&2
  echo ERRORLEVEL %ERRORLEVEL% 1>&2
  echo "D:\SYSAPPS\HATS\ci\repositories\repo\java\hooks\pre-commit.bat" 1>&2
  exit 1 
```

# jakarta-ee - 如何找到浏览器的地理位置（如 Google 搜索）？

> ID：10381574
> 
> 赞同：0
> 
> 时间：2012-04-30T09:47:31.363
> 
> 标签：jakarta-ee, web

当我们执行搜索操作时，Google 搜索如何获取我们位置的详细信息（即城市和州的名称）？

我正在使用 Java J2EE，请告诉我如何实现这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T10:06:48.473

有几种方法

*   按照 Quentin 的建议使用 HTTP 标头中的 ip 地址，然后使用反向地理编码服务（谷歌提供）。问题在于这并不准确，因为用户可以使用隐私代理（例如 TOR）、通过 VPN 路由、故意屏蔽他的 IP 等
*   明确询问用户是否允许浏览器进行地理定位。这具有让用户知道服务器正在地理定位的隐含好处。搜索“HTML 5 地理位置”以获取更多信息

# dos - DOS批处理文件需要解压缩文件目录并重命名

> ID：10381579
> 
> 赞同：0
> 
> 时间：2012-04-30T09:47:46.763
> 
> 标签：dos

我有一个 zip 文件目录 ( 60 )，当打开/解压缩其中很多文件时，我的 SHOCK 与 Jim.txt 和 Jim.txt 同名。对于目录中的所有 zip 文件，我需要解压缩每个文件，将其重命名为文件 1、文件 2 等原始文件。已经下载了用于 DOS 的 winzip 命令行实用程序，因此从 DOS 解压缩是这样完成的， "C:\Program Files (x86)\WinZip\wzunzip" FILNEAME.zip 。所以在伪代码中：

以 File1.zip 为例。解压缩将其重命名为 File1 将 File2.zip 解压缩将其重命名为 File2 并循环相同，直到所有 zip 文件完成。

问题是如何在 DOS 批处理文件中编写代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T09:15:41.533

通过以下创建的批处理文件解决....

::设置舞台... SETLOCAL ENABLEDELAYEDEXPANSION SET folder=C:\P\DataSource2_W SET count=1

::Action CD "%folder%" FOR %%F IN ("*.zip") DO (

"C:\Program Files (x86)\WinZip\wzunzip" %%F MOVE *.txt "C:\P\DataSource2_W\TextFiles!count!.txt" SET /a count=!count!+1 ) ENDLOCAL

# objective-c - UIscrollView DidScroll - 仅在触摸时

> ID：10381582
> 
> 赞同：5
> 
> 时间：2012-04-30T09:47:49.507
> 
> 标签：objective-c, uiscrollview

我想检测用户何时滚动 UIScrollView。发生这种情况时会调用 scrollViewDidScroll ，但它也会在另一个时间调用 - 当用户将视图滚动到边界之外，然后释放时，视图会跳回它的位置 - 即使用户没有触摸，也会调用该方法整个屏幕（视图自行滚动）。

如何同时检测滚动和用户触摸？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-01T17:23:02.817

UIScrollView 具有`dragging`指示滚动是否由用户完成的属性。因此，要查看用户滚动滚动视图还是滚动是由其他原因（如动画）引起的，您可以执行以下操作：

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
   if (scrollView.dragging) {
      // scrolling is caused by user
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-13T01:08:42.177

对于**斯威夫特 5**

```
func scrollViewDidScroll(_ scrollView: UIScrollView) {
        if scrollView.isDragging {
            print("Scroll View is scrolled by the user!")
        }
    } 
```

还要确保在`videoDidLoad()`

# c# - C# 将文本框保存到数组以打印到第二个文本框（聊天客户端）

> ID：10381583
> 
> 赞同：0
> 
> 时间：2012-04-30T09:47:54.310
> 
> 标签：c#, arrays, list, textbox, chat

我无法让我的聊天应用程序正常工作。我有 2 个文本框，1 个用于输入您要发送的内容，另一个用于显示对话。现在我正在尝试在显示框中显示用户在 typeBox 中输入的内容。我想我需要一个字符串类型的数组或列表，并在每次按下按钮时将输入的文本添加到其中，然后将数组/列表打印到显示框。我一直在尝试一些方法，但我不能让它正常工作。

任何人都可以阐明采取什么方法吗？

**编辑：**

这是我到目前为止的代码。它打印出数组，但没有换行符，并且每次都无法清除显示框，因此我重复出现了相同的消息。

```
 string ArrayData = string.Empty;
    ArrayList listData = new ArrayList();

    private void button1_Click(object sender, EventArgs e)
    {
        listData.Add(entryBox.Text);

        foreach (string textItem in listData)
        {

            ArrayData = "You >> " +ArrayData + textItem + "\n";

        }
        entryBox.Focus();
        displayBox.Text = "";
        displayBox.Refresh();
        this.displayBox.Text = ArrayData;
        entryBox.Text = "";

    } 
```

这可能很明显这里出了什么问题，但我一直在看它这么久我看不到它。

干杯，

: 丹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T09:50:32.643

将输入框中的字符串附加`\n`到显示框中的字符串不会解决您的问题吗？您不需要将每一行保存在数组或数组列表中

伪代码

```
onclick
displaybox.text = displaybox.text + inputbox.text +"\n" 
```

# java - 使用spring social在facebook的墙上安排帖子

> ID：10381590
> 
> 赞同：0
> 
> 时间：2012-04-30T09:48:27.690
> 
> 标签：java, facebook, spring, quartz-scheduler, spring-social

我会安排一个任务在 facebook 的墙上使用 spring social 发布。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T10:51:36.200

[Github](https://github.com/SpringSource/spring-social-samples)上的 Spring 社交示例有一些可以发布的示例。

这是您需要使用的代码的特定部分。我假设您可能需要深入研究一下才能使用此代码。

```
public void postConnect(Connection<Facebook> connection, WebRequest request) {
        if (request.getAttribute(POST_TO_WALL_ATTRIBUTE, WebRequest.SCOPE_SESSION) != null) {
            try {
                connection.updateStatus("I've connected with the Spring Social Showcase!");
            } catch (ApiException e) {
                // Do nothing: No need to break down if the post-connect post can't be made.
            }
            request.removeAttribute(POST_TO_WALL_ATTRIBUTE, WebRequest.SCOPE_SESSION);
        }
    } 
```

现在，由于您有发布部分，您需要编写一个调度程序来调用此方法。在此处阅读有关如何使用 spring编写[Quartz 调度程序的信息。](http://www.mkyong.com/spring/spring-quartz-scheduler-example/)[在此处](http://static.springsource.org/spring/docs/1.2.x/reference/scheduling.html)阅读相同的 Spring API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:22:01.587

实际上现在 Facebook 发布了这个调度功能，所以你不需要使用一些 3rd 方应用程序！

更多相关信息：[Facebook 品牌页面更新和发布时间安排](http://www.vectorash.ro/facebook-brand-pages-update-post-scheduling/ "Facebook 品牌页面更新和发布计划")

# sql-server-2008 - 具有特定格式的 SQL SELECT 查询输出

> ID：10381592
> 
> 赞同：0
> 
> 时间：2012-04-30T09:48:28.887
> 
> 标签：sql-server-2008, tsql

如果可能的话，我需要一个 T-SQL 查询，它将以特定格式从列中返回值。

我可以以编程方式 (c#) 执行此操作，但是否可以使用 SQL Server 2008 进行查询？

这是当前查询

```
select id, server_name, domain_name 
from mastertable 
```

电流输出：

```
id server_name   domanin_name
1  sys1          one.abc.in
2  sys2          two.pqr.in 
3  sys3          three.abc.in 
4  sys4          four.xyz.in 
```

我需要将数据显示为（在 (.) 列 domain_name 之后跳过值）：

```
id server_name domanin_name
1  sys1        one
2  sys2        two
3  sys3        three 
4  sys4        four 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T09:57:12.800

您可以尝试以下方法：

```
SELECT id, server_name, SUBSTRING(domain_name, 1, CHARINDEX('.', domain_name) - 1)
FROM mastertable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T09:59:02.030

你可以使用这样的东西：

```
SELECT
    id,
    server_name,
    mod_domain_name =
        CASE CHARINDEX('.', domain_name)
            WHEN 0 THEN domain_name
            ELSE SUBSTRING(domain_name, 1, CHARINDEX('.', domain_name) - 1)
        END
FROM mastertable 
```

这会测试以确保在 中存在 a `.`，`domain_name`如果是，它会“剪辑”域名以仅显示第一个之前的位`.`

# python - 基于一些十六进制生成随机字符串

> ID：10381594
> 
> 赞同：0
> 
> 时间：2012-04-30T09:48:31.893
> 
> 标签：python, string, random, passwords, md5

我在 python 中有一个 md5 校验和；喜欢`s = '14966ba801aed57c2771c7487c7b194a'`。

我想要的是缩短它并使其成为'a-zA-Z0-9_.-'形式的字符串，而不会丢失我的随机md5校验和的熵。

输出必须是可发音的，所以我不能这样做`binascii.unhexlify(s)`。我也不能做`base64.encodestring(s)`和削减它，因为那样我会失去熵。

关于如何在不将十六进制对（00->FF）的疯狂数字（256）映射到不同字母的情况下解决此问题的任何想法？

我想要这个的原因是能够通过电话说出整个 md5 校验和，但使用整个字母+数字+一些特殊字符。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T11:15:04.700

我将根据您的要求快速而松散地玩一下，并尝试一些我认为可能对您有帮助的东西。

阅读您所写的内容，对我来说突出的要求是通过电话阅读消息摘要的一种方式。

为此，您可能需要查看[Bubble Babble](http://wiki.yak.net/589)。Bubble Babble 旨在将摘要（或其他内容）编码为可发音的字符串：

```
ASCII 输入编码
-------------------------------------------------- ----------------
`' (空字符串) `xexax'
`1234567890' `xesef-disof-gytuf-katof-movif-baxux'
`菠萝' `xigak-nyryk-humil-bosek-sonax'

```

这是一个 Python 实现：[http ://code.activestate.com/recipes/299133-bubblebabble/](http://code.activestate.com/recipes/299133-bubblebabble/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T12:35:30.870

由于您希望“数字”（是的，md5 哈希只不过是一个 base16 数字，我们当然可以将其转换为 base-something 以缩短字符串）在电话中可以发音，因此我建议避免混合大写/小写. 而当我们只允许 [0-9A-Z] 时，我们可以简单地使用带有 Base36 的内置 int() 进行解码。

看：

```
>>> def encode(num):
        import string
        ALPHABET = string.digits + string.ascii_uppercase
        tmp = []
        while num:
            num, rem = divmod(num, len(ALPHABET))
            tmp.append(ALPHABET[rem])
        return ''.join(reversed(tmp))

>>> import hashlib
>>> the_hash = hashlib.md5('test').hexdigest()
>>> decimal_representation = int(the_hash, 16)
>>> encoded = encode(decimal_representation)
>>> the_hash
'098f6bcd4621d373cade4e832627b4f6'
>>> decimal_representation
12707736894140473154801792860916528374L
>>> encoded
'KDISMNX5MOYU6Q6PZT8TQDPY'
>>> decimal_representation == int(encoded, 36)
True
>>> hex(int(encoded, 36))
'0x98f6bcd4621d373cade4e832627b4f6L' 
```

您当然可以使用更长的字母来缩短生成的字符串，但是您必须编写自己的 decode() 函数。不过，应该不会太难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T11:06:04.287

# report - 根据值隐藏/显示报告字段

> ID：10381595
> 
> 赞同：0
> 
> 时间：2012-04-30T09:48:36.027
> 
> 标签：report, reporting, axapta, dynamics-ax-2009, x++

这是一个非常简单的查询，但我对它有一个完全的心理障碍。

我正在修改客户帐户报表报告，我们有两个发票 ID 字段，如果另一个有值，我想隐藏一个。例如;

```
If(custTrans.InvoiceID_1 != '')
{
    return CustTrans.InvoiceID_1
}

else return InvoiceID_2; 
```

我知道这将在 Fetch Method 中执行，但我相信情况并非如此，我已经尝试了几种执行此更改的方法但没有运气，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T10:45:55.067

好吧，一种方法是使用报告字段的可见属性。

但是，这在列表中效果不佳，在这里您最好使用两种显示方法：

```
display InvoiceId invoiceId_1()
{
     return this.InvoiceId_1 ? this.InvoiceId_1 : this.InvoiceId_2;
}    
display InvoiceId invoiceId_2()
{
     return this.InvoiceId_1 ? this.InvoiceId_2 : '';
} 
```

# javascript - Facebook 申请链接“错误”

> ID：10381599
> 
> 赞同：4
> 
> 时间：2012-04-30T09:48:49.960
> 
> 标签：javascript, facebook, facebook-graph-api, request

我使用这个文档和脚本向一些朋友发送应用请求。

[https://developers.facebook.com/docs/reference/dialogs/requests/](https://developers.facebook.com/docs/reference/dialogs/requests/)

```
FB.ui({
    method: 'apprequests',
    message: 'My message',
    max_recipients: 3
}, requestCallback); 
```

它工作正常，但如果他们单击 FB 通知栏中的链接，他们不会直接链接到我的页面和应用程序。相反，他们处于“中间的一步”。该应用程序在小于 810 像素且没有点赞按钮的 iframe 中可见（因此设计已损坏，点赞门无法停用。

这是链接参数：

```
/?fb_source=notification&request_ids=1234567890&ref=notif&app_request_type=user_to_user&notif_t=app_request 
```

哪里有问题？为什么 FB 不直接将用户链接到页面中的应用程序？

我想解决方案可能在应用程序设置中的某个地方......但我不知道。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T04:31:44.770

引用请求文档：

> 接受请求会将用户定向到发送请求的应用程序的画布页面 URL。

也就是说，一旦用户接受请求，他将登陆您的应用程序画布（720 像素宽）。

![应用程序设置截图](../Images/6dd768a95a8ece64aa11c9705077a372.png)

这是所需的行为，并且有其他参数传递给 Canvas URL 以提供有关请求的详细信息。

*   `fb_source`- 指出用户从哪里接受请求
*   `request_ids`- 提供用户正在接受的请求的逗号分隔 ID

一旦用户通过接受请求登陆到您的应用程序，您就可以自由地发出额外的重定向到所需页面。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T19:36:57.667

查看您的应用设置：

*   转到：[https](https://developers.facebook.com/apps/) ://developers.facebook.com/apps/单击您的应用程序，然后进行编辑。
*   点击左侧的高级
*   检查您的应用是否处于沙盒模式
*   查看画布设置

# javascript - JavaScript 中的简单图像滑块

> ID：10381604
> 
> 赞同：0
> 
> 时间：2012-04-30T09:49:10.027
> 
> 标签：javascript, image, mobile, slider

我想使用 JavaScript 创建一个简单的图像滑块。滑块应该有一个用于更改图像的后退和上一个箭头，以及下方显示当前幻灯片处于活动状态的标签。

我不想使用任何 JS 框架，因为它适用于移动网站，所以我希望它尽可能优化。

提前致谢！！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-30T09:59:59.850

这是帮助你[http://www.trans4mind.com/personal_development/JavaScript/imageSlideShow.htm](http://www.trans4mind.com/personal_development/JavaScript/imageSlideShow.htm)

# c++ - 使用 boost::iostreams mapped_file_source 和 filtering_streambuf 解压文件

> ID：10381610
> 
> 赞同：4
> 
> 时间：2012-04-30T09:49:24.770
> 
> 标签：c++, memory-mapped-files, boost-iostreams

我计划处理大型压缩文件，我想对文件进行内存映射以加快阅读速度。我采用了带有常规文件输入的现有示例，但无法编译或工作:-) 我使用的是 C++ Boost 1.49

欢迎任何建议！

```
#include<iostream>
#include<boost/iostreams/filtering_streambuf.hpp>
#include<boost/iostreams/copy.hpp>
#include<boost/iostreams/filter/zlib.hpp>
#include<boost/iostreams/device/file.hpp>
#include<boost/iostreams/device/mapped_file.hpp>

void test_decoder_mmf()
{
   using namespace std;
   using namespace boost::iostreams;
   //ifstream file("my_file.txt", ios_base::in | ios_base::binary);
   mapped_file_source file( "my_file.txt" );
   filtering_streambuf< input > in;
   in.push(zlib_decompressor());
   in.push(file);
   copy(in,cout);
}

int main()
{   
   test_decoder_mmf();
   return 0;
}

In file included from /usr/local/include/boost/iostreams/operations.hpp:20:0,
                 from /usr/local/include/boost/iostreams/detail/adapter/mode_adapter.hpp:24,
                 from /usr/local/include/boost/iostreams/detail/resolve.hpp:19,
                 from /usr/local/include/boost/iostreams/detail/push.hpp:24,
                 from /usr/local/include/boost/iostreams/chain.hpp:29,
                 from /usr/local/include/boost/iostreams/filtering_streambuf.hpp:17,
                 from test_boost_iostreams2.cc:2:
/usr/local/include/boost/iostreams/optimal_buffer_size.hpp: In function ‘std::streamsize boost::iostreams::optimal_buffer_size(const T&) [with T = boost::iostreams::mapped_file_source, std::streamsize = long int]’:
/usr/local/include/boost/iostreams/chain.hpp:248:9:   instantiated from ‘void boost::iostreams::detail::chain_base<Self, Ch, Tr, Alloc, Mode>::push_impl(const T&, std::streamsize, std::streamsize) [with T = boost::iostreams::mapped_file_source, Self = boost::iostreams::chain<boost::iostreams::input, char, std::char_traits<char>, std::allocator<char> >, Ch = char, Tr = std::char_traits<char>, Alloc = std::allocator<char>, Mode = boost::iostreams::input, std::streamsize = long int]’
/usr/local/include/boost/iostreams/chain.hpp:216:1:   instantiated from ‘void boost::iostreams::detail::chain_base<Self, Ch, Tr, Alloc, Mode>::push(const T&, std::streamsize, std::streamsize, typename boost::disable_if<boost::iostreams::is_std_io<T> >::type*) [with T = boost::iostreams::mapped_file_source, Self = boost::iostreams::chain<boost::iostreams::input, char, std::char_traits<char>, std::allocator<char> >, Ch = char, Tr = std::char_traits<char>, Alloc = std::allocator<char>, Mode = boost::iostreams::input, std::streamsize = long int, typename boost::disable_if<boost::iostreams::is_std_io<T> >::type = void]’
/usr/local/include/boost/iostreams/chain.hpp:500:7:   instantiated from ‘void boost::iostreams::detail::chain_client<Chain>::push_impl(const T&, std::streamsize, std::streamsize) [with T = boost::iostreams::mapped_file_source, Chain = boost::iostreams::chain<boost::iostreams::input, char, std::char_traits<char>, std::allocator<char> >, std::streamsize = long int]’
/usr/local/include/boost/iostreams/chain.hpp:488:1:   instantiated from ‘void boost::iostreams::detail::chain_client<Chain>::push(const T&, std::streamsize, std::streamsize, typename boost::disable_if<boost::iostreams::is_std_io<T> >::type*) [with T = boost::iostreams::mapped_file_source, Chain = boost::iostreams::chain<boost::iostreams::input, char, std::char_traits<char>, std::allocator<char> >, std::streamsize = long int, typename boost::disable_if<boost::iostreams::is_std_io<T> >::type = void]’
test_boost_iostreams2.cc:17:17:   instantiated from here
/usr/local/include/boost/iostreams/optimal_buffer_size.hpp:39:55: error: ‘optimal_buffer_size’ is not a member of ‘impl {aka boost::iostreams::detail::optimal_buffer_size_impl<boost::iostreams::mapped_file_source>}’ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T18:28:32.530

对于那些可能对这里感兴趣的是工作代码：

```
#include<iostream>
#include<boost/iostreams/copy.hpp>
#include<boost/iostreams/device/mapped_file.hpp>
#include<boost/iostreams/filter/zlib.hpp>
#include<boost/iostreams/filtering_streambuf.hpp>
#include<boost/iostreams/filtering_stream.hpp>
#include<boost/iostreams/stream.hpp>

using namespace std;
using namespace boost::iostreams;

void test_decoder_mmf(const std::string&filename)
{
    stream<mapped_file_source> file;
    filtering_streambuf< input > in;
    file.open(mapped_file_source(filename));
    in.push(zlib_decompressor());
    in.push(file);
    copy(in,cout);
}

int main()
{
   test_decoder_mmf("zlib-compressed-file");
   return 0;
} 
```

# iphone - 处理 sudzc.com 肥皂结果时出现无法识别的选择器异常

> ID：10381615
> 
> 赞同：0
> 
> 时间：2012-04-30T09:49:45.220
> 
> 标签：iphone, objective-c, selector, unrecognized-selector, sudzc

我已经围绕 sudzc.com 生成的代码构建了一个应用程序来访问我的肥皂网络服务。肥皂请求和处理放在我的 UITableViewController 子类中。

这是相关代码：

```
 1 - (void)viewDidLoad {
 2 [...]
 3 NSLog(@"Starting Soap Request");
 4 CCExample_ManagerService* soapService = [[CCExample_ManagerService alloc] init];
 5 [soapService getActiveVehicles:self action:@selector(getActiveVehiclesHandler:)];
 6 }
 7
 8 - (void) getActiveVehiclesHandler: (id) value {
 9 [...]
10 } 
```

我在第 5 行收到以下异常：

> ***由于未捕获的异常 'NSInvalidArgumentException' 导致应用程序终止，原因：'-[__NSArrayI addObject:]: unrecognized selector sent to instance 0x112730'

经过大量搜索，我真的很绝望，因为选择器方法在同一个类中，因此可见。相同的代码也可以在另一个项目中完美运行，所以我不确定是什么阻止了它在这种特殊情况下运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T09:56:01.223

您正在某个地方创建一个`NSArray`，然后尝试向其中添加一个对象。 `NSArray`是不可变的并且不响应`-addObject:`. 所以寻找你在哪里创造或得到一个`NSArray`——可能在某个地方`getActiveVehiclesHandler:`——然后把它变成一个`NSMutableArray`。

# macos - 如何修复谷歌浏览器中显示的维基百科页面的背景？

> ID：10381620
> 
> 赞同：0
> 
> 时间：2012-04-30T09:50:16.947
> 
> 标签：macos, google-chrome

在此处查看图片：

![例子](../Images/466b2914c688837b11da560c5751c34f.png)

在 Chrome 中，所有维基百科页面的背景总是蓝色的。我不知道如何解决这个问题，我已经尝试了一些明显的方法，比如关闭并重新打开 Chrome 并删除我的缓存。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T10:02:55.137

我之前遇到过这个问题，这与为维基百科设置的缩放级别有关。更多信息[在这里](http://code.google.com/p/chromium/issues/detail?id=113711)。对你来说可能不是同一个问题，但对我有用。

# ruby-on-rails - RoR 更改从数据库显示的日期格式？

> ID：10381623
> 
> 赞同：0
> 
> 时间：2012-04-30T09:50:34.517
> 
> 标签：ruby-on-rails, ruby

我的数据库中有一行以以下格式显示日期：`2012-04-26`. 假设我采用该值并将其存储在变量`@date`中。我怎样才能将这种格式更改为 2012 年 4 月 26 日，或者甚至是 4 月 26 日？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T09:52:24.750

涵盖您的问题的精彩片段：http: [//snippets.dzone.com/posts/show/2255](http://snippets.dzone.com/posts/show/2255)

示例用法：

`<%= @date.strftime("%d-%m-%Y") %>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T13:42:43.830

你应该定义一个辅助方法，这样你就可以保持你的视图更干净。像这样做：

在帮助文件中，例如。助手/application_helper.rb

```
def formatted_date(date)
  date.strftime("%d-%m-%Y")
end 
```

那么在您看来，您只需执行以下操作：

```
<%= formatted_date(@date) %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T14:04:54.370

如果您使用 Rails，您可能希望在视图中显示日期或时间。为此，您可以简单地使用`localize`（或`l`）辅助方法。例如：

```
<%= l(@model.created_at) %> 
```

只需在语言环境文件中定义默认格式和您想要的任何其他格式（例如，`en.yml`）：

```
time: 
  formats: 
    default: "%d %b %Y, %H:%M"
    date_only: "%d %b %Y"

date: 
  formats: 
    default: "%d %b %Y" 
```

格式语法与用于`strftime`.

使用自定义格式：

```
<%= l(@model.created_at, :format => :date_only) %> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T10:02:10.020

您不必担心 ORM 系统如何在数据库中序列化和反序列化日期对象，以及它们以什么格式存储在那里。

您只需要知道如何将您的`Date`对象转换为所需格式的字符串。这是类似[`strftime`](http://apidock.com/ruby/Date/strftime)和[其他](http://apidock.com/ruby/Date)方法有用的地方。

# iphone - 在以编程方式创建的控件中检测 iOS UI 事件

> ID：10381625
> 
> 赞同：2
> 
> 时间：2012-04-30T09:50:37.237
> 
> 标签：iphone, objective-c, ios, events

我想要在主视图控制器中创建的文本输入（UITextField）对用户的输入做出反应（特别是当他们点击键盘的“返回”键时），但我找不到任何方法来做到这一点。

我知道执行此操作的“通常”方法是在 Interface Builder 中创建控件并使用它将控件上的事件连接到公开的 IBAction 方法，但我想在没有 Interface Builder 的情况下执行此操作。

***或者***

我可以在 Interface Builder 中创建控件并使其事件正常连接，但是我如何从我的代码中获取对象来控制它（我只想能够隐藏/显示它并可能重新定位）？

我又找不到办法做到这一点

任何一条路线都适合我——我真的不在乎如何创建 UITextField。

TIA

迈克·皮特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T10:14:30.217

您需要为 TextField 设置一个委托。

```
textField.delegate = self; 
```

委托具有某些对文本字段的操作做出反应的方法。

您可以使用委托方法对 UserInput 做出反应：

```
- (void)textFieldDidEndEditing:(UITextField *)textField 
```

在按下 DoneKey（或您用来结束编辑的任何键）后调用它

希望这是您正在寻找的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T10:07:06.223

您可以像这样向通知中心添加观察者：

```
[[NSNotificationCenter defaultCenter] addObserver: self selector: @selector(keyPressed:) name: UITextFieldTextDidChangeNotification object: nil]; 
```

并实现相应的方法：

```
-(void) keyPressed: (NSNotification*) notification
{
  NSLog([[notification object]text]);
} 
```

# php - php imagick setCompressionQuality 和compositeImage

> ID：10381626
> 
> 赞同：1
> 
> 时间：2012-04-30T09:50:37.530
> 
> 标签：php, image, merge, compression, imagick

在将两个图像（图像和背景）连接在一起时，我遇到了获得压缩效果的问题。通常的想法是制作最终图像，而首先，主图像不会丢失其质量，但背景会丢失（实际上是压缩的）。

```
<?
        /* --- */
        $imageOutput = new Imagick();
        $image = new Imagick( $orginalPath );
        $wathermark = new Imagick( $watherMarkFile );

        // I'm compressing background image     
        $image->setImageCompression(imagick::COMPRESSION_JPEG );
        $image->setimagecompressionquality( 20 );
        $image->flattenimages();            

        // We're creating an image wich contains compressed background
        $imageOutput->newImage($image->getimagewidth(), $image->getimageheight(), new ImagickPixel('white') );
        $imageOutput->compositeimage($image, Imagick::COMPOSITE_DEFAULT, 0, 0);
        $imageOutput->setImageFormat('jpeg');

        // And we are composing them
        $imageOutput->compositeImage(   $wathermark, Imagick::COMPOSITE_OVERLAY, 10,10)

        $data = $imageOutput->getimageblob();

        /.... output..../
?> 
```

有谁知道如何在不保存包含背景的压缩文件的情况下做到这一点。

请原谅我的英语并感谢您的任何回复。帕韦拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T10:51:38.400

如果添加：

```
$imageOutput->setImageCompression(imagick::COMPRESSION_JPEG );
$imageOutput->setimagecompressionquality( 100 ); 
```

# c# - GetWindowRect 在一个应用程序上返回错误值，所有其他应用程序都是正确的

> ID：10381631
> 
> 赞同：3
> 
> 时间：2012-04-30T09:50:52.553
> 
> 标签：c#, .net, windows, winapi

我正在使用 Windows API 中的 GetWindowRect 来获取正在运行的应用程序的边界，然后我使用这些边界来截取应用程序。

我的代码适用于我测试过的大约 10 个程序，notepad.exe 和其他一些程序，但是我想将它与 RocLink800 一起使用的一个应用程序返回不正确的静态值，无论应用程序位置如何。

代码是 C# .NET

```
 [StructLayout(LayoutKind.Sequential)]
    public struct RECT
    {
        public int X;
        public int Y;
        public int Width;
        public int Height;
    }

    [DllImport("user32.dll", SetLastError = true)]
    static extern bool GetWindowRect(IntPtr hWnd, ref RECT Rect);

    IntPtr error = GetWindowRect(proc.MainWindowHandle, ref rect);

    ... main code
    while (error == (IntPtr)0)
    {
        error = GetWindowRect(proc.MainWindowHandle, ref rect);
    }

    int width = rect.right - rect.left;
    int height = rect.bottom - rect.top; 
```

现在所有应用程序都返回正确的宽度和高度，使用 roclink800 它返回错误值 1 表示成功，但无论应用程序位置如何，它都会返回以下值：

rect.right = 960 rect.left = 960 rect.bottom = 600 rect.top = 600

我完全不知道为什么会发生这种情况或如何纠正它，roclink800 是从 windows95 天移植的旧程序，所以它可能正在使用一些奇怪的 api，如果是这种情况，是否有任何来自 windows API 的替代方案（user32.dll ) 来获取它的屏幕坐标？

我想我可以强制应用程序全屏并以这种方式截屏，但它不太优雅。

任何人的想法？

编辑：我获取句柄的代码

```
 Process roclink = new Process();
        roclink.StartInfo.FileName = "C:/Program Files (x86)/ROCLINK800/Roclink.exe";
        //roclink.StartInfo.FileName = "notepad.exe";
        roclink.Start();
        IntPtr error = GetWindowRect(roclink.MainWindowHandle, ref rect); 
```

或者

```
 try
        {
            proc = Process.GetProcessesByName("roclink")[0];
        }
        catch (IndexOutOfRangeException e)
        {
            return null;
        } 
```

两个代码块都返回相同的 IntPtr 并且它们都返回 960,960,600,600 但是如果我调用

```
int error = SetWindowPos(roclink.MainWindowHandle, HWND_TOPMOST, 0, 0, 25,50, SWP_SHOWWINDOW); 
```

然后我得到返回的坐标是 0,0,25,50 但应用程序大小没有改变。

我尝试破坏程序，关闭 roclink 并且 SetWindowPos 和 GetWindowRect 都返回 0 并且不返回指示句柄确实是正确句柄的错误值。

所以看起来这个应用程序不能设置或通过 windowsAPI 获取它的窗口大小，有人知道为什么会这样吗？

```
roclink.StartInfo.WindowStyle = ProcessWindowStyle.Maximized; 
```

这也被忽略，应用程序不会以全屏方式打开，只是上次打开时的大小。

编辑：我能想出的唯一解决方案是复制 roclink.exe 并手动全屏打开它然后关闭它，如果没有其他人打开此文件，它将始终全屏打开，这是狡猾的，我这样做不喜欢它，但除非有人知道为什么会这样，否则我可能不得不这样做。:(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T09:54:41.397

我认为很明显，就您的应用程序而言，`MainWindowHandle`它不是应用程序启动的实际“主窗口”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T10:22:01.773

查看这个 RockLink800 应用程序的屏幕截图，似乎这是一个 Delphi 应用程序，而旧版本的 Delphi 有一个隐藏窗口，即 Application.Handle。

这是一个 SO answer 如何获取旧 Delphi 应用程序的主窗口句柄：

[检索 Delphi 窗口句柄](https://stackoverflow.com/questions/1408898/retrieving-delphi-window-handles)

# c++ - 对向量设置操作

> ID：10381637
> 
> 赞同：-1
> 
> 时间：2012-04-30T09:51:18.213
> 
> 标签：c++, stl-algorithm

我想在两个向量上进行所有集合操作，即联合、交集、异或和减法。我怎样才能做到这一点 ？

查看链接：[设置操作的图像](http://www.mathworks.com/help/toolbox/map/ref/polybool-venn.gif)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T10:01:53.997

最简单的答案是使用[标准库](http://en.cppreference.com/w/cpp/algorithm) 算法`set_difference`等`set_union`。`set_intersection`

然而，缺点是您的输入集合需要进行排序，并且元素必须使用`operator<`或比较仿函数进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T09:57:37.403

您必须对向量进行排序（并使它们保持排序）。完成此操作后，您想要的所有操作都可以在标准库中使用。

# php - 找不到位于 www.facebook.com100003773239192%26photoid%3D 的服务器，因为 DNS 查找失败

> ID：10381640
> 
> 赞同：0
> 
> 时间：2012-04-30T09:51:33.533
> 
> 标签：php, facebook, facebook-graph-api, web-applications, facebook-php-sdk

```
//Create an album
$album_details = array(
        'message'=> 'How will you die?',
        'name'=> 'How will you die?'
);
$create_album = $facebook->api('/me/albums', 'post', $album_details);

//Get album ID of the album you've just created
$album_uid = $create_album['id'];

//Upload a photo to album of ID...

$file='img/'.$fbid.'.jpg'; //Example image file

$photo_details = array( 'message'=> 'Find...51', 'image' => '@'.realpath($file));

 if ($session) {
    // We have a valid FB session, so we can use 'me'
    $upload_photo = $facebook->api('/me/photos', 'post', $photo_details);
} elseif( isset($_SESSION['user_id']) ) {
    $upload_photo = $facebook->api("/{$_SESSION['user_id']}/photos", 'post', $photo_details);
}

$upphoto = $upload_photo['id'];

ImageDestroy( $canvas );

header("Location: http://www.facebook.com".$fbid."&photoid=".$upphoto."") 
```

我创建了一个上传照片用户墙的 facebook 应用程序。

但我反复收到上述错误。我猜`/`上面的代码中某处缺少''，但我不知道在哪里放置' `/`'。如果发现任何其他错误，请帮助我完成此代码并使其正常工作。

谢谢你 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T09:54:20.820

改变

```
header("Location: http://www.facebook.com".$fbid."&photoid=".$upphoto."") 
```

到

```
header("Location: http://www.facebook.com/".$fbid."&photoid=".$upphoto); 
```

# html - 为什么 Javascript:history.back() 不显示表单值？

> ID：10381641
> 
> 赞同：0
> 
> 时间：2012-04-30T09:51:33.753
> 
> 标签：html, forms, header, cross-browser, meta-tags

我正在研究一个向 php 提交一些值的 HTML 公式。现在，如果我在那里遇到一些问题，我目前正在显示错误和其中的链接`javascript:history.back()`。

在 chrome 中，表单会再次打开，并像上次尝试一样填写所有值。但同样在 Firefox 中不起作用，表单显示为完全空白。在 Internet Explorer 中也是如此。

有没有办法将 chrome 的行为设置为标准，例如任何 PHP 标头或 html 元标记？

感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T09:59:47.677

您可以使用 $_SESSION 来保存答案，当浏览器关闭时，结果将不会被保存。但是使用 history.back(); 你会用它来检查是否设置了 $_SESSION['name'] 。如果是，我可能会通过 AJAX 解析它，以便在您的 Web 应用程序中获得一些流量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T10:04:31.097

如果 history.back() 与单击浏览器中的后退按钮相同，那么我认为保存（或不保存）表单值与浏览器设置的关系比 history.back() 函数本身更多。

我刚刚在 Firefox 和 chrome 中进行了快速测试，使用后退按钮时也会发生同样的情况（chrome 会记住除密码之外的所有内容，而 firefox 则不会）。

# ios5 - 自定义键盘

> ID：10381645
> 
> 赞同：0
> 
> 时间：2012-04-30T09:51:49.990
> 
> 标签：ios5

出现时如何在键盘上方添加黑条。我的意思是当您单击 Safari 的搜索框时，会出现在键盘上方并让您在页面上搜索的栏？以及如何自定义栏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T10:14:29.077

这是附件视图。

你可以像这样添加

`textField.inputAccessoryView = toolbar`

并且您需要将其添加到文本字段委托方法中

如果您需要一个好的教程，请参考以下链接

[http://www.theappcodeblog.com/2011/02/27/keyboard-tutorial-part-3-add-a-toolbar-to-the-keyboard/](http://www.theappcodeblog.com/2011/02/27/keyboard-tutorial-part-3-add-a-toolbar-to-the-keyboard/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T10:10:29.093

它被称为附件视图。[本教程](http://gabriel-tips.blogspot.co.uk/2011/05/input-accessory-view-how-to-add-extra.html)应该为您提供一个起点。

# java - 用低于零的数字计算

> ID：10381648
> 
> 赞同：0
> 
> 时间：2012-04-30T09:52:12.587
> 
> 标签：java, string

如果这个问题真的很明显，请原谅我，但我已经尝试了一切。

我正在尝试制作一个计算数字百分比的计算器。

但是当我使用此代码时，它会一直为输出输出 0：

```
import java.io.*;

class pCalc {
     public static void main(String args[])
     {
          InputStreamReader istream = new InputStreamReader(System.in) ;
          BufferedReader bufRead = new BufferedReader(istream) ;

          System.out.println("Hello...");

          try {
               System.out.println("Please Enter In The Percentage You Want To Find (e.g 25): ");
               String rpercent = bufRead.readLine();

               System.out.println("Please Enter In The Number You Wish To Find The Percentage Of (e.g 200): ");
               String rnumber = bufRead.readLine();

               int repercent = Integer.parseInt(rpercent);
               int number = Integer.parseInt(rnumber);
               int percent = repercent / 100;

               int awnswer = number * percent ;

               System.out.println("Percent is: " + percent);
               System.out.println("Awnswer is: " + awnswer);
          }
          catch (IOException err) {
               System.out.println("Error reading line");
          }
          catch(NumberFormatException err) {
               System.out.println("Error Converting Number");
          }         
     }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T09:56:51.457

你的问题出在这里：

```
 int repercent = Integer.parseInt(rpercent);
       int number = Integer.parseInt(rnumber);
       int percent = repercent / 100; 
```

整数除法的结果最终将是一个整数，因此，例如，如果计算产生`0.2`，它将更改为`0`.

这样做应该可以解决它：

```
 double repercent = Double.parseDouble(rpercent);
   double number = Double.parseDouble(rnumber);
   double percent = repercent / 100.0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T09:58:05.460

`int`是自然数（或者它是负数......等等，**`int`是 Integer**），它不能是 0 或 1 之间的任何东西。你必须使用`float`或者`double`如果你想看到类似的东西`0,25`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T09:59:05.590

尝试使用`float`而不是`int`

```
float repercent = Float.parseFloat(rpercent);
float number = Float.parseFloat(rnumber);
float percent = repercent / 100; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T09:57:39.930

`int percent = repercent / 100;`不会工作。[使用](http://www.java-samples.com/showtutorial.php?tutorialid=261)`float`or`double`数据类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T10:03:05.290

我已经清理了你的代码。正如其他人所指出的，主要问题是过早的整数除以 100。删除了异常处理，因为它是多余的，并掩盖了默认异常处理程序将打印的完整堆栈跟踪。

```
package test;

import static java.lang.Integer.parseInt;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

public class Test {
  public static void main(String args[]) throws Exception {
    final BufferedReader bufRead = new BufferedReader(new InputStreamReader(System.in)) ;
    System.out.println("Hello...");
    System.out.println("Please Enter In The Percentage You Want To Find (e.g 25): ");
    final int percent = parseInt(bufRead.readLine());
    System.out.println(
        "Please Enter In The Number You Wish To Find The Percentage Of (e.g 200): ");
    final int number = parseInt(bufRead.readLine());
    final int answer = number * percent / 100; // or use a floating-point type here
    System.out.println("Percent is: " + percent);
    System.out.println("Answer is: " + answer);
  }
} 
```

# java - 自定义 index.html javadoc 页面？

> ID：10381649
> 
> 赞同：5
> 
> 时间：2012-04-30T09:52:12.773
> 
> 标签：java, ant, javadoc

我正在运行带有 ant 任务的 javadoc：

```
<target name="javadoc"  description="create javadoc">
    <delete dir="javadoc" />
    <mkdir dir="javadoc" />
    <javadoc destdir="javadoc">
        <fileset dir="src/main/java" includes="sk/**" />
    </javadoc>
</target> 
```

我想更改默认 index.html 页面以提供简短的用户指南。我可以更改 index.html 将其复制到其他地方并在 javadoc 的 ant 任务完成后重写它，但这似乎有点愚蠢。有没有更常见的方法来实现这一目标？谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-30T10:14:05.393

您正在寻找 javadoc 的 -overview 选项。有关详细信息，请参阅[http://docs.oracle.com/javase/6/docs/technotes/tools/windows/javadoc.html#overviewcomment](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/javadoc.html#overviewcomment)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T05:36:33.903

在 Ant 中，您需要`overview`像这样使用属性：

```
<javadoc destdir="javadoc" overview="src/overview.html">...</javadoc> 
```

# mysql - 在 Sequel::Model 中使用另一个数据库中的表

> ID：10381652
> 
> 赞同：0
> 
> 时间：2012-04-30T09:52:17.447
> 
> 标签：mysql, ruby, sequel

我正在使用带有 MySQL 数据库和 Padrino 的 Sequel。要从我正在使用的数据库中获取统计信息：

```
class Stats < Sequel::Model(:"#{OTHER_DB}__stats")
end 
```

OTHER_DB 是 stats 表所在的数据库的名称。一切正常，使用此类时我成功获得了统计信息，但是在启动 padrino 时出现此错误：

```
FATAL - [30/Apr/2012 11:33:29] "Mysql2::Error: Table 'api_test.stats' doesn't exist: DESCRIBE stats" 
```

api_test 是我没有指定任何其他内容时使用的默认数据库的名称。

为什么我会收到此错误？我该如何预防？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T16:10:38.347

这是由于 Sequel 中的一个错误。它将在明天的 3.35.0 版本中修复。

# jquery - Jquery 从隐藏的文本字段中获取值

> ID：10381654
> 
> 赞同：1
> 
> 时间：2012-04-30T09:52:24.343
> 
> 标签：jquery

我正在尝试使用 jquery 从隐藏的文本字段中获取值，但没有成功。这是动态添加 html 到页面的 javascript 函数。

```
 function(lng,lat)
          {
             document.getElementsByClassName("BranchDetails").item(0).innerHTML+=""
          +" <div class='Branches'>"
          +"     <div class='DeleteIcon'><img src='../Images/deleteicon.png' width='15' height='15'></div>"

          +"     <div class='BranchName'>"
          +"      <div class='CompanyBranchNameText'>"
          +"          Company Name"
          +"      </div>"

          +"      <div class='EditCompanyBranchName'>"
          +"          <label>Company Name:</label><input type='text' class='EditNameText' >"
          +"          <input type='hidden' class='longitudeVal' value='"+lng+"' /><input type='hidden' class='latitudeVal' value='"+lat+"' />"
          +"      </div>"
          +"      <a href='javascript:void(0)' class='EditNameLink'><p>edit...</p></a>"
          +"    </div>"
          +" </div>";
          } 
```

现在我想获取隐藏文本字段的值。到目前为止，我所做的是。

```
 $('.Branches').children('.DeleteIcon').click(

        function()
        {
               alert($(this).siblings('.EditCompanyBranchName').children('.longitudeVal').val());
        }
             ); 
```

但这给我返回了一个未定义的值。lng 和 lat 值已成功放入隐藏字段中，我已使用警报框对其进行了检查。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T09:59:00.613

问题是因为`.EditCompanyBranchName`不是`.DeleteIcon`- 它是一个孩子的兄弟姐妹。尝试这个：

```
$('.Branches').children('.DeleteIcon').click(function() {
    var long = $(this).parent().find('.longitudeVal').val();
    var lat = $(this).parent().find('.latitudeVal').val();
    alert(long);
    alert(lat);
}); 
```

这将在与单击的元素相同的元素中找到`.logitudeVal`and`.latitudeVal`字段。`.Branches``.DeleteIcon`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T10:00:04.047

为了简化您的 javascript 点击事件，您可以使用唯一 ID 设置隐藏输入，并使用 Jquery 定位该 ID：

**关于你的功能（lng，lat）**

```
...
<input type='hidden' id="Jquery_latitude" class='latitudeVal' value='"+lat+"' />
... 
```

**现在对于“.DeleteIcon”点击事件：**

```
$('.Branches').children('.DeleteIcon').live("click", function() {
  var lat = $('#Jquery_latitude').val();
  alert(lat);
}); 
```

**注意：我已经使用**[.live()](http://api.jquery.com/live/) 设置了这个点击事件，以允许它可用于动态创建的元素。

# asp.net-mvc-3 - 安装 WebMatrix 和 IIS Express 后，我的 Windows 7 错误 404 的 IIS 站点

> ID：10381658
> 
> 赞同：1
> 
> 时间：2012-04-30T09:52:28.133
> 
> 标签：asp.net-mvc-3, sql-server-ce, orchardcms, webmatrix, iis-express

我使用 Orchard CMS (MVC 3)，首先使用 SQLCE 安装，将站点添加到 IIS 并运行良好。

后来，我安装 WebMatrix 以从 SQLCE 迁移到 SQL Express。

之后，我在默认 IIS 上的站点无法再运行（错误 404）。我只能从 WebMatrix 运行站点（使用 IIS Express）

请帮我解决这个问题！

感谢先进。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T17:36:34.137

检查您的日志 (App_data\logs)。我的猜测是您获得了错误的数据库凭据，或者您完全忘记了将 ASP.NET 应用程序池的用户添加到数据库登录名并赋予其 db_owner 权限。

# git - 如何保护github中的“大师”？

> ID：10381672
> 
> 赞同：58
> 
> 时间：2012-04-30T09:53:44.283
> 
> 标签：git, github, branch, acl, protection

我的 github 项目中有一些贡献者。我只想让他们中的一个“推动”掌握。而且这个人不是我（存储库的所有者）。有可能吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-05-22T13:53:50.743

当时，当这个问题被发布时，GitHub 不允许您在分支级别指定访问权限。您只能在存储库级别执行此操作。所以你要求的是不可能的。

如果您想解决此限制，我个人看到两个选项：

*   您可以使用某种提交挂钩等来至少通知某人发生了错误
*   如果你真的需要这种严格的控制，你可以使用两个存储库，一个只保存你的“master”分支。然后，您需要确保只有您的“人”才能获得对主存储库的写入权限

我认为通过一些组织更容易解决这个问题。在我的团队中，我们从不直接将任何东西推送到 master，而是总是创建拉取请求。这样可以确保在合并代码之前至少有人看一下，您还可以定义一个策略，只允许您的“人”合并拉取请求。

**更新**

[GitHub 现在宣布](https://github.com/blog/2051-protected-branches-and-required-status-checks)他们将推出一项名为受保护分支的新功能。多年来，此功能已存在于其他 git 发行版中，例如 Atlassian Stash。它将允许您保护一些分支免受推送。但是，它仍然不允许对单个分支进行完整的基于 ACL 的保护。因此，如果您不想依赖上述组织解决方案，您可能需要检查此功能。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-09-03T19:26:44.967

注意：[受保护的分支和所需的状态检查](https://github.com/blog/2051-protected-branches-and-required-status-checks)（2015 年 9 月 3 日）将允许您保护分支

*   反对强推
*   反对删除
*   反对合并的更改，直到所需的状态检查通过

[![https://cloud.githubusercontent.com/assets/25792/9596474/27db3ce6-502a-11e5-9b19-5b47a8addc65.png](../Images/5e177f46103967fddf488d710c5e47b2.png)](https://i.stack.imgur.com/LBlbk.png)

* * *

自 2016 年 3 月以来，正如[Sander在下面](https://stackoverflow.com/users/1233062/sander)[评论](https://stackoverflow.com/questions/10381672/how-to-protect-master-in-github/32383909?noredirect=1#comment61475865_32383909)的那样，您有**[用户和团队限制](https://github.com/blog/2137-protected-branches-improvements)**

> 有时，合并到受保护的分支最好留给发布经理或负责该特定分支稳定性的团队。组织现在可以指定哪些成员和团队能够推送到受保护的分支。

[![https://cloud.githubusercontent.com/assets/4719/14140705/ed98abac-f67a-11e5-951e-b48c842fb77f.png](../Images/3b54e305f2a1e08008bd69b67c1e154b.png)](https://i.stack.imgur.com/2aXsr.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-02-09T02:32:18.290

这正是分叉的设计目的。您将保护主存储库，并且您将允许所有贡献者对该存储库的读取权限。这些贡献者将分叉回购，并将他们的更改推送到他们的主回购的个人副本。当他们准备好将代码引入主存储库时，他们将向主存储库提交拉取请求。在这种情况下，主项目的所有者可以完成拉取请求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-26T11:32:05.023

我们现在可以使用“CODEOWNERS”文件来要求代码所有者审查以验证拉取请求。我们可以根据他们的 GitHub 账号设置不同的权限。

看[这里](https://github.com/blog/2392-introducing-code-owners) 和[这里](https://help.github.com/articles/enabling-required-reviews-for-pull-requests/)

# c# - WPF 图像淡入淡出 c#

> ID：10381673
> 
> 赞同：0
> 
> 时间：2012-04-30T09:53:55.993
> 
> 标签：c#, wpf, bitmapimage

我有一个我控制的图像列表

```
public List<BitmapImage> Images { get; set; } 
```

我正在使用计时器来更改图像。

```
 Image imgpanel = new System.Windows.Controls.Image();
        imgpanel.Source = image;
        imgpanel.Stretch = maintainAspectRatio ? Stretch.Uniform : Stretch.Fill;
        imgpanel.StretchDirection = StretchDirection.Both; 
```

有谁知道我可以交叉淡化图像以便交换它们时看起来更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T09:56:57.917

您可以在布局中有两个重叠`Image`的控件，并使用故事板将它们淡入/淡出。然后您可以将图像加载到隐藏`Image`控件中，完成后，将其淡入并淡出。这种情况一直在...

# android - 如何开发分享按钮来分享链接？

> ID：10381677
> 
> 赞同：2
> 
> 时间：2012-04-30T09:54:16.357
> 
> 标签：android, share, mime

例如我想分享这个链接：

```
http://www.orientaldaily.com.my/index.php?option=com_k2&view=item&id=6780:&Itemid=198 
```

这是代码

```
private void shareIt() {
    Intent sharingIntent = new Intent(android.content.Intent.ACTION_SEND);
    sharingIntent.setType("text/plain");
    String shareBody = "Here is the share content body";
    sharingIntent.putExtra(android.content.Intent.EXTRA_SUBJECT,
            "Subject Here");
    sharingIntent.putExtra(android.content.Intent.EXTRA_TEXT, shareBody);
    startActivity(Intent.createChooser(sharingIntent, "Share via"));
} 
```

所以，

1) 如何让它分享到 facebook 的链接？

2）如何编辑分享列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T10:06:43.200

一旦您将文本交给系统，系统`createChooser()`就会脱离您的控制。

1.  这取决于用户的选择，他们选择共享的方式（ *app/source ）。*
2.  您无法更改共享应用程序列表。（由系统管理）

# javascript - 将html放在javascript字符串中？

> ID：10381681
> 
> 赞同：3
> 
> 时间：2012-04-30T09:54:27.403
> 
> 标签：javascript, html, hyperlink, dom-manipulation

我需要将 html 放在 javascript 字符串中。具体来说，我想使用 javascript 将 HTML 链接添加到 div 标记。

html:

```
<div id="mydivtag"></div> 
```

javascript:

```
document.getElementById('mydivtag').innerHTML = "<li><a href=\"someLink\">Some Link</a></li> "; 
```

我是否正确格式化了通过 javascript 添加的 html 链接？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-30T09:59:23.377

看起来不错，[在这里](http://jsfiddle.net/HnEu2/)工作。您可能需要考虑混合单引号而不是转义双引号，但这只是一种偏好。

```
document.getElementById('mydivtag').innerHTML = "<li><a href='someLink'>Some Link</a></li>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T10:14:48.423

您可以将它放在一行中：

```
document.getElementById("mydivtag").appendChild(function(li, l, t) { li.appendChild(function(a, l, t) { a.href = l; a.innerHTML = t; return a; } (document.createElement("a"), l, t)); return li; } (document.createElement("li"), "mylink", "mytext")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T13:27:47.063

它需要更多的 jQuery：

```
$('#mydivtag').html('<li><a href="someLink">Some Link</a></li>'); 
```

# ios - 如何在 iOS 上删除 UIImage 中的矩形？

> ID：10381688
> 
> 赞同：0
> 
> 时间：2012-04-30T09:55:10.630
> 
> 标签：ios, xcode, uiimageview, mask

如何删除 UIImage 中的矩形区域？我的想法是我有一个纯色图像和一个 CGRect 矩形，我想删除 UIImage 中的 CGrect，以便 CGRect 区域是透明的。请参考下图。半红色是我的 uiimage，我想删除中间的矩形，以便我可以透明地查看背景图像。

![例子](../Images/18e930b616ca2dfd174e17500546ee08.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T09:59:14.827

CGContextClearRect(context, your_rect)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T10:12:57.377

```
UIImage *yourImage;
CGRect imageRect = CGRectMake(0, 0, yourImage.size.width, yourImage.size.height);
CGRect grayRect = CGRectMake(20, 20, 20, 20);
CGRect rects[2] = {
  imageRect,
  grayRect
};
CGContextClipToRects(context, rects, 2);
[yourImage drawInRect:imageRect]; 
```

# c++ - 使用 InvalidateRect 后背景颜色仍然存在

> ID：10381690
> 
> 赞同：0
> 
> 时间：2012-04-30T09:55:12.723
> 
> 标签：c++, winapi, win32gui

我有一个窗口和一个子窗口。一开始，子窗口和客户区一样大（不包括菜单和工具栏）。在某些时候，我使用 SetWindowPos 来缩小子窗口的大小并改变它的位置。问题是：“主窗口的客户区”和“子窗口”之间的区域仍然有背景颜色或子窗口的绘画。在主窗口的窗口程序中，我把之前`WM_PAINT`用过的. 据我所知，这将擦除主窗口客户区的背景并对其进行验证。但是子窗口的背景色还保留在主窗口的客户区吗？`InvalidateRect(hwndmain, NULL, TRUE)``BeginPaint`

如何解决这个问题呢？

备注：我只使用了 BeginPaint 和 EndPaint。我不在那里画画。但据我所知，这仍然应该消除背景，对吧？

# android - 实时股票更新或实时（板球）比分更新 Android 应用程序如何工作？

> ID：10381693
> 
> 赞同：2
> 
> 时间：2012-04-30T09:55:23.407
> 
> 标签：android, client-server

我想知道 Live Stock Update 或 Live (Cricket) score update Android 应用程序是如何工作的？服务器是连接到客户端（应用程序）还是客户端（应用程序）连接到服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T10:07:41.790

可以是两种方式，具体取决于您要提供的提要类型

1.  设备连接。

您可以在后台使用服务连接到服务器并使用[AlarmManagers](http://developer.android.com/reference/android/app/AlarmManager.html) / [Timer](http://developer.android.com/reference/java/util/Timer.html)等在固定时间间隔后获取数据。

1.  服务器连接

您可以使用[c2DM](http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CCcQFjAA&url=http%3A%2F%2Fwww.vogella.com%2Farticles%2FAndroidCloudToDeviceMessaging%2Farticle.html&ei=B2SeT-rXO4TkrAeLrcxO&usg=AFQjCNE2tjLs0kanqB98Qh_t1OVVcuwRmw&sig2=aXPeM1O1rneg5zFV8nSdLg)来强制通知设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T10:03:50.453

物理上是客户端连接到服务器，因为手机没有服务器可以用来连接的静态 IP 或名称。

但在功能上，这种类型的应用程序通常使用模拟服务器到客户端通信的 PUSH 通知来实现。您可以查看[此处](https://stackoverflow.com/questions/1378671/push-notifications-in-android-platform)或[此处](https://developers.google.com/android/c2dm/)以获取一些信息

# java - 使用 ireport 在 html 报告中显示图像

> ID：10381696
> 
> 赞同：1
> 
> 时间：2012-04-30T09:55:32.503
> 
> 标签：java, spring, jasper-reports

我尝试了很长时间，我正在使用 iReport 设计器创建报告。因为它以所有格式（PDF、Excel、RTF）显示图像。但是当我试图以 html 格式显示时，图像没有显示。我想做什么来解决dis问题。我尝试了很长时间。谁能帮助我。以下是我在控制器类中为 html 报告中的图像使用的代码。

```
 String image = request.getSession().getServletContext().getRealPath("/"); 
Map parameterMap = new HashMap();

 parameterMap.put("datasource", JRdataSource);
        parameterMap.put("Image1",image);
        parameterMap.put("Image2",image);
        parameterMap.put(JRExporterParameter.CHARACTER_ENCODING, "UTF8");
        parameterMap.put(JRHtmlExporterParameter.IMAGES_URI, "../report/image?image=");
        parameterMap.put(JRHtmlExporterParameter.IS_USING_IMAGES_TO_ALIGN, Boolean.FALSE);
 //htmlReport bean has ben declared in the jasper-views.xml file
        modelAndView = new ModelAndView("htmlReport", parameterMap);

        return modelAndView; 
```

下面是我的 jrxml 代码。

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="testreport2" language="java" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">
    <property name="ireport.zoom" value="1.0"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="0"/>
    <parameter name="Image1" class="java.lang.String"/>
    <parameter name="Image2" class="java.lang.String"/>
    <field name="activePackage" class="java.lang.String"/>
    <background>
        <band splitType="Stretch"/>
    </background>
    <title>
        <band height="60" splitType="Stretch">
            <staticText>
                <reportElement mode="Opaque" x="0" y="0" width="555" height="56"/>
                <textElement/>
                <text><![CDATA[]]></text>
            </staticText>
            <staticText>
                <reportElement mode="Opaque" x="0" y="2" width="515" height="54" backcolor="#E6E6E6"/>
                <textElement/>
                <text><![CDATA[]]></text>
            </staticText>
            <image scaleImage="Clip" isUsingCache="false">
                <reportElement key="image-1" x="308" y="2" width="187" height="58"/>
                <imageExpression class="net.sf.jasperreports.engine.JRRenderable"><![CDATA[net.sf.jasperreports.engine.JRImageRenderer.getInstance(image-dir"/flower1.png"))]]></imageExpression>
            </image>
            <image scaleImage="Clip" isUsingCache="false">
                <reportElement key="image-1" x="0" y="0" width="226" height="57"/>
                <imageExpression class="net.sf.jasperreports.engine.JRRenderable"><![CDATA[net.sf.jasperreports.engine.JRImageRenderer.getInstance(image-dir"/flower2.png"))]]></imageExpression>
            </image>
        </band>
    </title>
    <pageHeader>
        <band height="35" splitType="Stretch"/>
    </pageHeader>
    <columnHeader>
        <band height="61" splitType="Stretch">
            <staticText>
                <reportElement x="0" y="0" width="100" height="20"/>
                <textElement/>
                <text><![CDATA[activePackage]]></text>
            </staticText>
        </band>
    </columnHeader>
    <detail>
        <band height="39" splitType="Stretch">
            <textField>
                <reportElement x="0" y="0" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{activePackage}]]></textFieldExpression>
            </textField>
        </band>
    </detail>
    <columnFooter>
        <band height="45" splitType="Stretch"/>
    </columnFooter>
    <pageFooter>
        <band height="54" splitType="Stretch"/>
    </pageFooter>
    <summary>
        <band height="42" splitType="Stretch"/>
    </summary>
</jasperReport> 
```

这两个图像位于 webapp/images 下。我将这些图像作为参数从控制器类传递给 jrxml 文件。

图像未显示。我的代码有任何问题。任何帮助将不胜感激。

# search - 用 vim 捕获重复的表达式

> ID：10381698
> 
> 赞同：2
> 
> 时间：2012-04-30T09:55:33.080
> 
> 标签：search, vim, design-patterns, capture

vim中的以下问题：

我想在不同的匹配组中捕获子模式的每个匹配。一个例子：对于该行：

```
#abcONE# #abcTWO# 
```

和搜索模式

```
\(#abc...#\)* 
```

我想同时获得这两个群体

```
1: #abcONE#   2: #abcTWO# 
```

不幸的是，我只获得了一组，其中包含最后识别的子模式，即

```
#abcTWO# 
```

你知道解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T11:58:57.260

由于您只能通过数字`\1`（而不是范围或通配符）直接引用捕获的组，因此您必须事先知道使用的组数。

那么为什么不将多项扩展`*`成不同的组，所有匹配可选`\?`：

```
\(#abc...#\)\?\(#abc...#\)\?\(#abc...#\)\?\(#abc...#\)\? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T10:33:09.350

你会如何处理匹配的模式？替换？

```
/#abc...# will select both
:%s/\v(#abc...#)/foo/g will replace both 
```

你的`\(#abc...#\)*`行不通。因为你的两个“#abc ...#”之间有一个空格

# cocoa - 在 NSWindow 中的视图之间切换

> ID：10381699
> 
> 赞同：0
> 
> 时间：2012-04-30T09:55:36.137
> 
> 标签：cocoa, nswindow, nswindowcontroller

我对 Mac 开发真的很陌生（尽管我有很多 iOS 经验），我正在尝试在 NSWindow 中的 NSViewControllers 之间切换。这真的很简单：当按下按钮时，显示第二个视图并隐藏第一个视图。这是我的代码：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification {
    firstView = [[FirstView alloc] initWithNibName:@"FirstView" bundle:nil];
    [_window setContentView:menu.view];
}

- (IBAction)openSecondView:(id)sender {
    secondView = [[SecondView alloc] initWithNibName:@"SecondView" bundle:nil];
    [_window setContentView:game.view];
} 
```

我确保调用了该方法，并且正确加载了 secondView。这里有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T10:00:57.103

一种更简单的方法是将两个视图加载到您的内容视图中并仅调整 alpha 值。

```
- (void) switchToFirstView: (id) sender {
    [[_secondView animator] setAlphaValue: 0.0f];
    [[_firstView animator] setAlphaValue: 1.0f];
}

- (void) switchToSecondView: (id) sender {
    [[_secondView animator] setAlphaValue: 1.0f];
    [[_firstView animator] setAlphaValue: 0.0f];
} 
```

我冒昧地使用动画师使过渡在上方淡出，但如果您更喜欢即时切换，也可以不使用它。

# java - 使用正则表达式搜索不受保护的记录器

> ID：10381702
> 
> 赞同：0
> 
> 时间：2012-04-30T09:55:58.477
> 
> 标签：java, regex, eclipse

我有一个相当大的项目，其中我的一位同事使用了记录器，但在调用记录器之前忘记放置“可记录”测试，如您所知，在日志消息中使用字符串连接时，这可能会大大降低效率。但是，一些记录器已得到适当保护。

我正在寻找可以在 Eclipse 中使用的正则表达式来搜索所有那些未受保护的记录器调用，但我找不到正确的正则表达式，并带有否定的后视功能。

这里有一些示例可以使这一点更清楚：

我想匹配这个：

```
logger.fine("Exception raised: " + 
    e.getClass().getName() + ". See console for details."); 
```

我不想匹配这个：

```
if (logger.isLoggable(Level.FINE)) {
    logger.fine("Exception raised: " + 
        e.getClass().getName() + ". See console for details.");
} 
```

也不是这个：

```
if (logger.isLoggable(Level.FINE)) 
    logger.fine("Exception raised: " + 
        e.getClass().getName() + ". See console for details."); 
```

我不在乎匹配消息内容或记录器方法调用之后的任何内容（severe()、warning()、...），我所需要的只是拥有该`logger.fine`部分。

到目前为止，我已经使用了这个正则表达式： `((?<!if\s?.?logger\.isLoggable.?Level.{0,20})logger.(severe|warning|info|fine|finer|finest))`但它匹配我不想匹配的东西。关于如何解决这个问题的任何想法？

代码是格式化的（缩进是用制表符完成的），这意味着我们可以对我们的期望非常严格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T10:31:30.033

试试这个：

```
(?<!if\s?\(logger\.isLoggable[^\n]{0,20}\n\s{0,20})logger\.fine 
```

解释：

```
(?<!         # open negative lookbehind
if\s?\(logger\.isLoggable  # look for your if statement
[^\n]{0,20}  # then gobble up a bunch of characters ...
\n           # ... up to the end of the line
\s{0,20}     # optional whitespace at the beginning of the next line
)            # close the look behind
logger\.fine # now, is logger.fine there? 
```

# html - 正确排列浮动 HTML 元素

> ID：10381704
> 
> 赞同：0
> 
> 时间：2012-04-30T09:56:06.600
> 
> 标签：html, css, layout, css-float

我正在使用浮动来安排布局。

```
<style>
div {
    float: left;
}

.pro {
    width : 100px;
    color : blue;
}
</style>

<span>
<div class="pro">Long property name : </div>
<div>value</div>
</span> 
```

当“长属性名称：”溢出到新行时，我希望“值”也转到新行。我应该在这个 HTML 代码中做什么？谢谢。现在，“价值”仍然居于首位。

当前结果

![当前结果](../Images/b7da789dffb909292bd453b1a8227144.png)

我想要的是

![在此处输入图像描述](../Images/dda463dff9dab70a79ad35841f897a54.png)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T10:07:54.553

如果您使用`display: inline-block`而不是`float`这样做会更好：

```
div {
    display: inline-block;
    *display: inline; /*For IE7*/
    *zoom: 1;
} 
```

检查这个：http: [//jsfiddle.net/thirtydot/wczcC/2/](http://jsfiddle.net/thirtydot/wczcC/2/)

# c# - 选择器表达式如何在 .net 中工作？

> ID：10381708
> 
> 赞同：1
> 
> 时间：2012-04-30T09:56:32.317
> 
> 标签：c#, .net

从 Stackoverflow 中，我挑选了一些有用的代码来从我的应用程序中删除魔术字符串。代码如下所示：

```
protected void OnPropertyChanged<T>(Expression<Func<T>> selectorExpression) { } 
```

该方法由以下方式调用：

```
this.OnPropertyChanged( () => DisplayName); 
```

`DisplayName`（类的属性在哪里。）

使用这种形式的方法真的很有用（我喜欢它很容易重构），但我真的不明白它在做什么。

在哪里`T`赋值，取什么值？智能感知如何获取类具有哪些属性（`T`从调用方法的上下文中隐式设置？）

表达式是`() => DisplayName`在编译时固定的，还是每次调用方法时计算的？相关：使用魔术字符串更有效吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T09:59:05.290

检查这个问题：[从 lambda 表达式中检索属性名称](https://stackoverflow.com/questions/671968/retrieving-property-name-from-lambda-expression)。这要归功于可以在运行时分析的表达式，并且可以从中获取属性名称。

您还应该阅读这个问题：[Expression<Func<>> 和 Func<> 之间的区别](https://stackoverflow.com/questions/2664841/difference-between-expressionfunc-and-func)。

最重要的是，表达式是不仅可以执行而且可以在运行时作为表达式树进行分析的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T10:11:25.210

Expression 类通常用于编写可在运行时更改的动态代码。T 是您的 lambda 返回的类型。它可以是任何类型。

来自 MSDN：表达式树表示树状数据结构中的代码，其中每个节点都是一个表达式，例如，方法调用或二元运算，例如 x < y。 [http://msdn.microsoft.com/en-us/library/bb397951.aspx](http://msdn.microsoft.com/en-us/library/bb397951.aspx)

然后可以在运行时编译或分析表达式树。

```
Expression<Func<T>> selectorExpression 
```

是表达式的类型，它是一个没有参数的函数，返回类型 T。

您可以在运行时编译并运行 selectorExpression。

在您的 OnPropertyChanged 方法 selectorExpression 未编译和执行的情况下，它只是被分析以检索属性名称。这篇文章详细介绍了它的工作原理：[Retrieving Property name from lambda expression](https://stackoverflow.com/questions/671968/retrieving-property-name-from-lambda-expression)

尽管我认为 OnPropertyChanged 处理程序可以忽略不计，但这样做会产生性能开销。轻松重构的好处大大超过了性能成本。

# java - Java apache Beanutils vs 反射 - 获取属性的性能

> ID：10381710
> 
> 赞同：0
> 
> 时间：2012-04-30T09:56:36.933
> 
> 标签：java, performance, reflection, apache-commons-beanutils

我有一堆 java bean 类，我需要遍历它们的所有字段/属性并将它们放入一个对象中。例如。

```
ConfClass A - FieldA, FieldB
ConfClass B - FieldC, FieldD 
```

归根结底，我的目标是有一个统一的目标：

```
conf.get("FiledA");
conf.get("FiledB");
conf.get("FiledC");
conf.get("FiledD"); 
```

我正在将 beanutils 与反射进行比较，看看哪个能给我带来更好的性能。我知道这并没有太大的区别，但是出于好奇，使用一个比另一个有什么区别。

# android - 在应用小部件中读取 txt 文件

> ID：10381719
> 
> 赞同：0
> 
> 时间：2012-04-30T09:57:16.310
> 
> 标签：android, android-widget

我需要在应用小部件中读取 txt 文件。

我在名为“NASTAVENI”的外部集活动中创建了 txt：

```
@Override
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    setContentView(R.layout.set);
    editor=(EditText)findViewById(R.id.editor);
    Button btn=(Button)findViewById(R.id.close);    
    btn.setOnClickListener(new Button.OnClickListener() {
        public void onClick(View v) {
            phoneNo = editor.getText().toString(); 
            finish();
        }
    });
}

public void onResume() {
    super.onResume();

    try {
        InputStream in=openFileInput("notes.txt");

        if (in!=null) {
            InputStreamReader tmp=new InputStreamReader(in);
            BufferedReader reader=new BufferedReader(tmp);
            String str;
            StringBuilder buf=new StringBuilder();

            while ((str = reader.readLine()) != null) {
                buf.append(str+"\n");
            }

            in.close();
            editor.setText(buf.toString());
        }
    }
    catch (java.io.FileNotFoundException e) {

    }
    catch (Throwable t) {
        Toast
            .makeText(this, "Exception: "+t.toString(), 2000)
            .show();
    }
}

/*BACK**************************************************************************************************************************************/
public void onPause() {
    super.onPause();

    try {
        OutputStreamWriter out=
                new OutputStreamWriter(openFileOutput("notes.txt", 0));

        out.write(editor.getText().toString());
        out.close();        
    }
    catch (Throwable t) {
        Toast
            .makeText(this, "Exception: "+t.toString(), 2000)
            .show();
    }
}

} 
```

应用小部件的主要活动名称为“小部件”。我需要在此活动“Widget”中读取外部活动“NASTAVENI”的 txt 文件。Activity Widget 和 NASTAVENI 在同一个包中。

这段代码不好（错误 java.lang.NullPointerException）

```
 try {
                    InputStream in=openFileInput("notes.txt");

                        InputStreamReader tmp=new InputStreamReader(in);
                        BufferedReader reader=new BufferedReader(tmp);
                        String str;
                        StringBuilder buf=new StringBuilder();

                        while ((str = reader.readLine()) != null) {
                            buf.append(str+"\n");
                        }

                        in.close();
                        editor.setText(buf.toString());
                        phoneNo = "77"; 

                }
                catch (java.io.FileNotFoundException e) {
                    Toast toast=Toast.makeText(context, "Error FFE!", 1000);
                    toast.setGravity(Gravity.CENTER, 0, 0);
                    toast.show();
                }
                catch (Throwable t) {
                    Toast toast=Toast.makeText(context, "Error T!" +t.toString(), 1000);
                    toast.setGravity(Gravity.CENTER, 0, 0);
                    toast.show();
} 
```

对不起我的英语不好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T08:48:36.910

我不确定您是否只想要一个从 txt 读取的小部件，或者您还想要“一个活动”。为了读取 txt 文件，我用这样的函数创建了一个读取文件并返回所需内容的类：

```
 ShowLine(){
    try {
                InputStream is = mContext.getAssets().open(monthFile);
                BufferedReader reader = new BufferedReader(new InputStreamReader(is,"UTF-8"));
                // Skips lines
                Log.w("day", String.valueOf(monthFile));
                for (int i = 0; i< DayMonth-1; i++) {
                    reader.readLine();
                }
                Line = reader.readLine(); // read the line of the day

                Name= Line.substring(Line.indexOf("*") + 1,Line.indexOf("-"));// I read between + and (my data is like: DAY * NAME -)
                dia= ""+DayMonth+" de "+ monthNames[Month]+"" ;
                Log.w("Name", String.valueOf(Name)); //to check that it works

            } catch (IOException e) {
                e.printStackTrace();
            }

        }

    } 
```

对于小部件，您需要创建一个小部件类：

```
public class Widget extends AppWidgetProvider {
String dia = "1 Feb.";
String Name= "Pavel";

    @Override
    public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds){

        mContext = context;
        Resources res = mContext.getResources();

        ComponentName thisWidget = new ComponentName(context,Widget.class);
        int[] allWidgetIds = appWidgetManager.getAppWidgetIds(thisWidget);

        for(int widgetIds: allWidgetIds){

            RemoteViews remoteViews = new RemoteViews(context.getPackageName(), R.layout.widget);
            //Log.w("Widget test", String.valueOf(number));

            try{
                ShowLine();
                Log.w("Line 1", String.valueOf(Name));

            }catch (Exception e) {
                Name= "error";
            } 
```

我不确定我的代码是否完美，可能你必须完成一点，因为我没有粘贴整个函数。但是如果您有疑问，这是一个很好的教程：[vogella.com](http://www.vogella.com/articles/AndroidWidgets/article.html) 我希望它对您有所帮助:)

# facebook-graph-api - 包含来自墙壁/时间轴的图片的相册

> ID：10381721
> 
> 赞同：1
> 
> 时间：2012-04-30T09:57:22.800
> 
> 标签：facebook-graph-api, facebook-php-sdk, facebook-wall, image

在我的应用程序中，我需要获取所有用户的 FB 内容（状态更新、图片、视频）。在获取墙/时间线帖子时，我提出以下要求：

> 1.  饲料：[http](http://graph.facebook.com/me/feed?access_token=) ://graph.facebook.com/me/feed?access_token= ...
> 2.  帖子：[http](http://graph.facebook.com/me/posts?access_token=) ://graph.facebook.com/me/posts?access_token= ...
> 3.  状态：[http](http://graph.facebook.com/me/statuses?access_token=) ://graph.facebook.com/me/statuses?access_token= ...

*   我得到了当前用户的所有 3 种类型的元素（状态更新、图片、视频）。

获取照片时，我首先提出相册请求：

> [http://graph.facebook.com/me/albums?access_token=](http://graph.facebook.com/me/albums?access_token=) ...

然后对于每张专辑，我都会得到里面的照片。

一些相册（如“墙照片”或“手机照片”）包含我在提出墙/时间线请求后已经拥有的照片，因此我不再需要它们。我想跳过那些专辑，到目前为止我一直在使用一个简单的条件（在 PHP 中）：

```
if ( !in_array($album->type, array('wall','mobile')) ) { ... } 
```

但现在我看到可能还有其他相册包含已显示在墙上/时间轴上的照片 - 在本例中为“Instagram Pics”。问题是这张专辑的 type = normal 就像用户手动创建的专辑一样（这些是我需要处理的专辑）。当然，我可以添加如下条件：

```
... && ($album->name != 'Instagram Pics') 
```

但如果专辑名称发生变化，这将不再是有效条件，我想避免它。另外，我意识到可能还有其他类型的相册包含墙上显示的图片，这会再次产生同样的问题。

另一个问题是这两个项目（保存在相册中的图片和贴在墙上的图片）具有不同的 ID，因此我无法通过这种方式识别双打。

我的问题是：如何识别包含也显示在墙上/时间轴上的图片的相册（= 在请求墙上帖子时会出现），以便在处理用户个人相册时可以跳过它们？谢谢你。

# php - 如何在 javascript/jquery 中调用 php 值？

> ID：10381724
> 
> 赞同：0
> 
> 时间：2012-04-30T09:57:35.353
> 
> 标签：php, javascript, jquery, ajax, codeigniter

我正在使用 php codeigniter mvc 框架。我的控制器包含以下代码

```
$data2['rows2']=$this->data_model->getYear();
$this->load->view('new',$data2); 
```

我的观点（在头部）有以下代码

```
<script>
$(document).ready(function() {
 var namesArr = **<?php echo var_dump(json_decode($rows2));?>;**

 var progressTrendsData = [[1304294461000,69,1304899261000,28],[1304294431000,3,1304899161000,32],[1304294431000,3,1304899161000,32],[1304294431000,3,1304899161000,32]];
 var chart;
 var options = {
     chart: {
         renderTo: 'trendsDiv',
         type: 'spline'
     },
     series: [{
     name: '',
     data: []
     }]
 };

 for(var i=0;i<namesArr.length;i++) {
    options.series.push({
            name: namesArr[i],
            data: progressTrendsData[i]
    });
 }

 chart = new Highcharts.Chart(options); 
 });
</script> 
```

这是在视图的脚本部分调用 php 值的正确方法吗？我希望脚本作为按钮单击事件，并且`var namesArr`应该检索和存储数组`['sdad','sadsad'.....]`。我应该使用 ajax 来做到这一点吗？如果是这样，请在此处举例说明如何使用 ajax。

**更新**

我尝试了以下方式，但没有显示输出。

```
<script>
$(document).ready(function() {
 //var namesArr = <?php echo var_dump(json_decode($rows2));?>;
 var namesArr = new Array();
namesArr = <?php $rows2; ?>
 var progressTrendsData = [[1304294461000,69,1304899261000,28],[1304294431000,3,1304899161000,32],[1304294431000,3,1304899161000,32],[1304294431000,3,1304899161000,32]];
 var chart;
 var options = {
     chart: {
         renderTo: 'trendsDiv',
         type: 'spline'
     },
     series: [{
     name: '',
     data: []
     }]
 };
 for(var i=0;i<namesArr.length;i++) {
    options.series.push({
            name: namesArr[i],
            data: progressTrendsData[i]
    });
 }
 chart = new Highcharts.Chart(options); 
 });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T10:00:48.143

在你的控制器做

```
$data2['rows2']=$this->data_model->getYear();
$data2['rowsArray']=json_decode($data2['rows2']); 
```

然后在视图中尝试

```
var namesArr = ['<?php echo implode("', '", $rowsArray); ?>'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T11:23:30.497

也许尝试（如果您使用的是 jQuery）：

```
$data2['rows2']=json_encode($this->data_model->getYear()); 
```

在视图中：

```
<script>
$(document).ready(function() {
 var namesArr =  jQuery.parseJSON('<?php echo $rows2;?>');

 var progressTrendsData = [[1304294461000,69,1304899261000,28],[1304294431000,3,1304899161000,32],[1304294431000,3,1304899161000,32],[1304294431000,3,1304899161000,32]];
 var chart;
 var options = {
     chart: {
         renderTo: 'trendsDiv',
         type: 'spline'
     },
     series: [{
     name: '',
     data: []
     }]
 };

 for(var i=0;i<namesArr.length;i++) {
    options.series.push({
            name: namesArr[i],
            data: progressTrendsData[i]
    });
 }

 chart = new Highcharts.Chart(options); 
 });
</script> 
```

否则，您可以尝试通过以下方式将字符串从 php 评估为 json：

```
var namesArr =  eval('('+<?php echo $rows2;?>+')'); 
```

在此之后，您应该使用以下方法检查包含 namesArr 变量的内容：

```
console.log(namesArr); 
```

并检查您的 javascript 控制台（应该在 Chrome 和 Firefox 中工作）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-30T10:10:24.567

您可以在 JS 中调用 php 值，只需将 php 代码插入 javascript。尝试这样做：

```
var namesArr = new Array();
namesArr = <? print_r($rows2); ?> 
```

确保**$rows2**返回一个数组。

# java - 由“中间”面板分隔的两个 JList 的布局？（Java 摇摆）

> ID：10381729
> 
> 赞同：0
> 
> 时间：2012-04-30T09:57:47.650
> 
> 标签：java, swing, layout, layout-manager

我正在使用 BoxLayout 在一行中水平布局 3 个组件 - 两个 JList（J1 和 J2）和一个介于 (X) 之间的 JPanel。

```
---------------
|             |
|             |
|  J1  X  J2  |
|             |
|             |
--------------- 
```

我遇到的问题是 BoxLayout 使每一列的大小相等，但我想要的是 X 成为它的最小大小，而 J1 和 J2 占据所有可用的水平空间。我怎样才能做到这一点？基本上，我想要的外观是这样的。

![在此处输入图像描述](../Images/8c2bd18e85ea6a5e0a2dfb60b0d1ead4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T14:23:49.640

我会使用[GridBagLayout](http://docs.oracle.com/javase/6/docs/api/java/awt/GridBagLayout.html)。

中心按钮将包含在 JPanel 中。

JList、按钮 JPanel 和 JList 将包含在 1 行中，其中 3 个元素跨行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T13:32:45.457

在 JList 之间放置水平胶水：

```
box.add(Box.createHorizontalGlue()) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-30T10:20:34.637

您应该使用`setPreferredSize`and`setMinimumSize`方法。这些可以与此方法结合使用，以根据屏幕大小确定窗格大小：

`screen Dimension dim = Toolkit.getDefaultToolkit().getScreenSize();`

尽管您可能只是将窗口设置为固定大小。

对于列表，您应该将项目添加到 a `JPanel`，根据对象的数量设置面板的大小，然后将`JScrollPane`视图设置为`JPanel`with`setViewPort`以确保滚动窗格的大小正确。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-07-24T15:05:17.800

```
 JPanel panel_20 = new JPanel();
    tabbedPane_2.addTab("New tab", null, panel_20, null);
    panel_20.setLayout(new BoxLayout(panel_20, BoxLayout.X_AXIS));

    JPanel panel_24 = new JPanel();
    panel_24.setBorder(new EmptyBorder(3, 3, 3, 3));
    panel_20.add(panel_24);
    panel_24.setLayout(new BorderLayout(0, 0));

    JList list_7 = new JList();
    list_7.setBorder(new BevelBorder(BevelBorder.LOWERED, null, null, null, null));
    panel_24.add(list_7);

    JPanel panel_25 = new JPanel();
    panel_20.add(panel_25);
    panel_25.setLayout(new BoxLayout(panel_25, BoxLayout.Y_AXIS));

    JButton btnNewButton_4 = new JButton(">");
    panel_25.add(btnNewButton_4);

    JButton btnNewButton_5 = new JButton("<");
    panel_25.add(btnNewButton_5);

    JPanel panel_26 = new JPanel();
    panel_26.setBorder(new EmptyBorder(3, 3, 3, 3));
    panel_20.add(panel_26);
    panel_26.setLayout(new BorderLayout(0, 0));

    JList list_8 = new JList();
    list_8.setBorder(new BevelBorder(BevelBorder.LOWERED, null, null, null, null));
    panel_26.add(list_8, BorderLayout.CENTER); 
```

# php - Drupal 内联 JavaScript

> ID：10381731
> 
> 赞同：0
> 
> 时间：2012-04-30T09:57:57.183
> 
> 标签：php, drupal, drupal-7, drupal-6, drupal-modules

在添加内联 JavaScript 代码时，Drupal 会`\`自动添加。

```
 <script type=\"text/javascript\">
     alert(\'hello world\');
  </script> 
```

我们怎样才能避免这种情况？在 Drupal 中添加内联 JavaScript 代码的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T07:05:28.113

如果你想在你的 PHP 代码中添加 javascript 代码，最好使用[drupal_add_js](http://api.drupal.org/api/drupal/includes!common.inc/function/drupal_add_js/7) ()。

然后在`$options`数组内部，设置`type`equals `inline`。

以下代码添加了内联 javascript。（复制的表格文件）

```
drupal_add_js('jQuery(document).ready(function () { alert("Hello!"); });',
    array(
        'type' => 'inline', 
        'scope' => 'footer', 
        'weight' => 5
    )
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T23:12:46.070

你的文本格式是什么，如果你想让内联 javascript 工作，你需要有“完整的 HTML”

# jakarta-ee - 应用架构：服务器和层

> ID：10381732
> 
> 赞同：-2
> 
> 时间：2012-04-30T09:57:58.970
> 
> 标签：jakarta-ee, tomcat, architecture, glassfish

我想知道应用服务器和web服务器有什么区别，glassfish和Tomcat（应用服务器还是web服务器）的分类是什么。在哪种服务器中，我们可以找到 servlet 和 JSP。请有任何想法，如果你能给我一份关于应用程序架构的电子书或链接的列表：（层......）如何制作它以及如何为你的应用程序选择最好的。

先感谢您

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T10:05:15.267

Tomcat 是一个 Java EE 服务器，它不支持完整的 Java EE 堆栈。它专注于 webapp 支持（servlet 和 JSP），提供 JDBC 连接池和 JNDI 支持，但没有 EJB 和 JMS 等。

GlassFish 是一个全栈 Java EE 服务器，它支持 Java EE 规范中的所有内容（servlet、JSP、EJB、JMS、JPA、JTA 等）

Oracle 有关于 Java EE 的教程。谷歌为他们。

# javascript - 我如何重组这个 JSON 使其更易于访问

> ID：10381735
> 
> 赞同：0
> 
> 时间：2012-04-30T09:58:43.560
> 
> 标签：javascript, json

我有一些格式如下的 JSON 数据：

```
 [ {"stage1" : [{
        "checkpoints" : 
            [
                { 
                    "id" : "checkpoint1",
                    "name" : "a checkpoint name 1",
                    "purpose" : "a string about the purpose here", 
                                         },
                 { 
                    "id" : "checkpoint2",
                    "name" : "a checkpoint name 2",
                    "purpose" : "a string about the purpose here", 

                 }
             ],                      

          "stages" : 
                  [
                     {

                     "id" : "an id here",
                     "name" : "a checkpoint name 1",
                     "purpose" : "a string about the purpose here yah", 

                     } 
             ]          
         }
     ]},

   {"stage2" : [{
        "checkpoints" : 
            [
                { 
                    "id" : "checkpoint1",
                    "name" : "a checkpoint name 1",
                    "purpose" : "a string about the purpose here", 
                                         },
                 { 
                    "id" : "checkpoint2",
                    "name" : "a checkpoint name 2",
                    "purpose" : "a string about the purpose here", 

                 }
             ],                      

          "stages" : 
                  [
                     {

                     "id" : "an id here",
                     "name" : "a checkpoint name 1",
                     "purpose" : "a string about the purpose here yah", 

                     } 
             ]          
         }
     ]},

     {"stage3" : [{
        "checkpoints" : 
            [
                { 
                    "id" : "checkpoint1",
                    "name" : "a checkpoint name 1",
                    "purpose" : "a string about the purpose here", 
                                         },
                 { 
                    "id" : "checkpoint2",
                    "name" : "a checkpoint name 2",
                    "purpose" : "a string about the purpose here", 

                 }
             ],                      

          "stages" : 
                  [
                     {

                     "id" : "an id here",
                     "name" : "a checkpoint name 1",
                     "purpose" : "a string about the purpose here yah", 

                     } 
             ]          
         }
     ]},

                         ] 
```

目前我必须参考这样的数据才能进入一个阶段：

```
alert(data[0].stage1[0].checkpoints.length); 
```

为了获得第 2 阶段的数据，我必须这样做：

```
alert(data[1].stage2[0].checkpoints.length); 
```

我想要做的只是使用阶段名称来访问数据，而不必在“数据”声明之后指定索引：

```
alert(data.stagex[0].checkpoints.length); 
```

我不想在数据部分之后声明索引。如何重组我的 JSON，以便我可以使用阶段名称来获取我需要的数据，而无需先指定索引？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T10:01:51.723

不要将 Stage1、Stage2 放在数组中。它们可以作为键直接访问

# sql - 为 2 列创建唯一约束

> ID：10381736
> 
> 赞同：1
> 
> 时间：2012-04-30T09:58:43.577
> 
> 标签：sql, sql-server, sql-server-2008

我需要基于两列创建一个唯一约束。

如何在 SQL Server 2008 Express 版本中实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T10:03:02.230

```
ALTER TABLE dbo.YourTable
ADD CONSTRAINT YourConstraintName UNIQUE (Column1, Column2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T10:05:12.150

```
ALTER TABLE mytable
ADD CONSTRAINT myconstraint UNIQUE NONCLUSTERED (
  Col1,
  Col2
) ON [PRIMARY] 
```

或者如果您更喜欢使用索引：

```
CREATE UNIQUE NONCLUSTERED INDEX myindex ON mytable (
  Col1,
  Col2
) ON [PRIMARY] 
```

# javascript - 使用 Backbone 和 Rails 实现星号收藏系统

> ID：10381737
> 
> 赞同：1
> 
> 时间：2012-04-30T09:58:47.153
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3, backbone.js, coffeescript

我正在尝试将收藏添加到我正在构建的应用程序中。

基本设置涉及拥有“概念”集合的用户。他们可以通过提交文本字段将新概念建议到集合中。

用户还可以通过点击小星星来“收藏”概念，就像在 Gmail 或其他一百万个应用程序中所做的那样。最喜欢的概念应该放在概念集合的顶部，从而使新创建的概念出现在它们的下方。

要收藏一个概念，我必须将该概念的 id 发布到`"/favourites"`.

```
class ConceptView extends Backbone.View
  events:
    'click .empty-star' : 'favourite'

  favourite: ->
    @model.favourite()

class Concept extends Backbone.Model
  favourite: ->
    $.post("/favourites", { concept_id: @id }, "json") 
```

我的问题是关于如何在客户端管理受欢迎和不受欢迎的概念。

我应该有两个单独的集合，一个用于收藏的概念，另一个用于非收藏的概念，还是应该尝试坚持一个收藏？

如果我要在一个集合中有一个`Concept`模型`FavouritedConcepts`

```
class FavouritedConcepts extends Backbone.Collection
  url: "/favourited_concetpts"
  model: Concept 
```

然后我可以通过该集合列出概念就好了，因为 favourited_concepts#index 很自然地将概念范围仅限于最喜欢的那些。

但是，概念会被`ConceptsController`at破坏`"/concepts"`，如果我尝试在位于集合中的`model.destroy()`a上调​​用 Backbone，那么它将错误地向.`Concept``FavouritedConcepts``DELETE``"/favourited_concepts"`

解决方案可能是只坚持一个概念集合，将`favourite`布尔属性混搭到每个概念上，并定义一个比较器以强制最喜欢的概念保持在列表的顶部。但是，我觉得这样做会在视图层中失去一些灵活性。我不能拥有监听`FavouritedConceps`集合中事件的视图。

实现此功能时采取的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T19:25:02.577

我会坚持使用带有布尔标志的收藏。这将为您节省所有的内务处理，以确保集合之间的正确状态。

您仍然可以在绑定到来自概念的事件的视图中实现侦听器，您只需要在回调中执行一个 concept.favourite 检入。

# visual-studio-2010 - 使用 Visual Studio 运行 Fortran DLL

> ID：10381739
> 
> 赞同：1
> 
> 时间：2012-04-30T09:58:51.817
> 
> 标签：visual-studio-2010, dll, fortran, dllimport, intel-fortran

我用 Visual Studio 2010 开发了一个网站。我想运行一个 Fortran DLL。我使用 Intel Visual Fortran 创建了一个 .dll 并测试了如何使用它。我的代码是：

```
 SUBROUTINE SIMPSON (N,H,I)

     !DEC$ ATTRIBUTES DLLEXPORT, DECORATE, ALIAS : "SIMPSON" :: SIMPSON
     !DEC$ ATTRIBUTES REFERENCE::N
     !DEC$ ATTRIBUTES REFERENCE::H
     !DEC$ ATTRIBUTES REFERENCE::I
      INTEGER N,H,I

      I=N+H

      RETURN
      END 
```

它实际上需要两个整数，将它们相加并返回结果。现在我有了 .dll，我不知道如何使用 Visual Studio 运行它。有谁知道请给我步骤吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T00:33:24.277

我一直这样做。我所做的是在调用项目（`C#`, `VB.NET`）中，我将`.dll`输出作为现有项目添加到项目中，并带有`Add as Link`选项。然后我将它设置为在项目树中更新时复制。

![添加项目](../Images/270b1b95cd022bf16330477f005d3316.png)

![添加为链接](../Images/23d92a31092dfd553f3fef99e50af552.png)

![如果较新则复制](../Images/2556b34568d88c2088a888b6f66a5f16.png)

最后，当您将其编译到`bin/Debug`或`bin/Release`文件夹中时，它会跟随二进制文件。

然后和`C#`你一起使用这样的`[DllImport()]`属性：

```
[DllImport("trex_pc.dll")]
static extern Simpson(ref int N, ref int H, ref int I); 
```

有关更多详细信息，请查看我的[这个](https://stackoverflow.com/a/10318273/380384)答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T23:10:53.457

您可以简单地在 IVF 中创建一个控制台项目并链接到您的 DLL 中。这可能需要生成一个包含对您的 DLL 的引用的 .lib 文件。我不是 100% 确定如何做到这一点，尽管它可能是为您自动创建的。

链接库后，您可以简单地`call simpson`使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-17T14:20:28.170

您可以在 dll 属性页中使用 Post-Build 事件：

*   在解决方案资源管理器中右键单击 DLL 项目
*   转到构建事件 - 构建后事件
*   命令行 `copy/y "$(OutDir)\$(ProjectName).dll" "$(SolutionDir)\bin\debug\"` 每次构建 DLL 或解决方案时都会复制 DLL。目标位置可能不同。

# json - Sinatra - 读取 sqlite，输出 json

> ID：10381744
> 
> 赞同：1
> 
> 时间：2012-04-30T09:59:05.857
> 
> 标签：json, activerecord, sinatra, datamapper

作为一个周末发现 sinatra 的红宝石新手，我正在尝试设置一个本地 json 提要来开发移动应用程序。

每个示例都显示了如何访问 sqlite 文件，定义模型，然后定义 json 输出，但他们都假设您将定义一个新的空白 sqlite 文件并写入它 - 不加载现有数据。或者我误解了这个？

我对库-active_record 或 datamapper 持开放态度（AR 看起来稍微容易一些，因为您不必定义表字段，并且 datamapper 的文档对我没有太大启发）。

您对此的任何意见将不胜感激

# facebook - Facebook API 和 OAUTH - 在显示应用程序之前请求权限

> ID：10381751
> 
> 赞同：3
> 
> 时间：2012-04-30T09:59:36.477
> 
> 标签：facebook, request

我安装了一个 facebook 应用程序并且运行良好。我想做的是添加请求用户权限数据的功能。例如 - read_friendlists、user_groups、email、user_birthday、status_update、publish_stream、

首先，这是检查我们的 Facebook 时间线应用程序中是否有粉丝的代码。

```
// If a fan is on your page
if ($like_status) {
$a = file_get_contents("http://www.domain.com/home.php");
echo ($a);
} 
else {
// If a non-fan is on your page
$a = file_get_contents("http://www.domain.com/home.php");
echo ($a);
} 
```

我想做的是，如果我们的页面上没有粉丝，请打开 Facebook 请求权限并设置一些权限。然后将它们重定向到 // 如果粉丝在我们的页面上。

我在这里仔细看了看，但我仍然不清楚如何设置权限页面的“请求”。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T12:14:46.220

你可以通过两种方式做到这一点..

1）通过设置url在页面中打开oauth对话框

```
var oauth_url = 'https://www.facebook.com/dialog/oauth/';
oauth_url += '?scope=email,user_birthday,user_location,user_about_me,user_likes';
oauth_url += '&client_id=' + appid;
oauth_url += '&redirect_uri=' + encodeURIComponent('https://www.facebook.com/pages/' +   appname + '/' + pageId + '/?sk=app_' + appid);

window.top.location = oauth_url; 
```

2）或者您可以在弹出窗口中打开 oauth 对话框：

```
FB.login(function(loginResponse) {
    if (loginResponse.authResponse) {
        var userId = loginResponse.authResponse.userID;
    }
    else {
        //'User cancelled login or did not fully authorize.
    }
}, { scope: 'email,user_birthday,user_location' }); 
```

# linq - 来自 2 个不同组框中的多个复选框的多个选择查询

> ID：10381755
> 
> 赞同：0
> 
> 时间：2012-04-30T09:59:46.527
> 
> 标签：linq, select, checkbox

我有 2 个分组框，一个用于所有类型的活动，一个用于语言。每个组框都包含许多从数据库中创建的带有循环的复选框。

标签 = ID 文本 = 描述

现在我想用这些作为过滤器来找出哪些人提供了选定的活动和选定的语言（例如，Mountainbike 和法语和英语导游）。所以我想要一个 AND AND AND AND AND 选择。

表：tblGuides / tblLanguages / tblActivities / tblGuideLanguages / tblGuideActivities

tblGuides：ID/姓名/名字/地址/... tblLanguages：ID/描述 tblActivities：ID/名称/持续时间/免费 tblGuidelanguages：GuideID/LanguageID tblGuideActivities：GuideID/ActivityID

第一步：我列出 2 个列表，一种选定的语言和一项选定的活动

```
List<int> lstExcursionID = new List<int>();

foreach (Control oControl in sgbExcursion.Controls)
{
    if (oControl.GetType() == typeof(CheckBox))
    {
        CheckBox oCheckBox = (CheckBox)oControl;
        if (oCheckBox.Checked)
        {
            lstExcursionID.Add(int.Parse(oCheckBox.Tag.ToString()));
        }
    }
} 
```

我现在有 2 个列表：lstExcursionID 和 lstLanguagesID

但是我怎样才能从数据库中获取正确的数据呢？我尝试了不同的 LINQ 查询，但它始终是 OR 选择。有人可以让我走上正确的轨道吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T12:26:14.337

您似乎想要加入列表，但根据您的描述，我无法确定他们是否有任何可以加入的内容。

如果您显示输入数据的示例，将会有所帮助。

更新：

这是我将如何尝试接近它的草稿 - 这应该找到所选语言的所选活动的指南名称/ID。

```
var guide = from g in tblGuides
            join ga in tblGuideActivities on g.Id equals ga.GuideID
            join gl in tblGuideLanguages on g.ID equals gl.GuideID
            where ga.ActivityID == [selectedActivity]
            and gl.LanguageID == [selectedLanguage]
            select g.Name 
```

您可以为每个活动/语言对执行这样的查询，这将为您提供指南列表 - 然后您可以从列表中选择不同的条目。

它可能需要重构，因为在没有所有数据的情况下很难对其进行测试 - 希望这会有所帮助。

# jquery - jquery打印彩盒窗口

> ID：10381758
> 
> 赞同：0
> 
> 时间：2012-04-30T10:00:00.577
> 
> 标签：jquery, printing, popup, window, colorbox

我正在尝试仅打印颜色框的内容

```
$(".print-invoice").on("click", function(event){
    window.print();
  return false;
}); 
```

这会打印整个页面，文件路径是 popups/info.html

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T22:12:17.300

它晚了几个月，但为了其他可能遇到此问题的人的利益：如果您使用 iframe 显示内容，则该内容中的打印按钮只会打印颜色框中的内容。要使用 iframe，请将`iframe`设置设置为 true：

```
$(document).ready(function(){
    $(".linktocolorbox").colorbox({iframe:true});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T10:36:18.273

你可以试试这个：

```
$(".print-invoice").click(function() {
    $('#the_Iframe_ID')[0].print();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-15T08:47:12.983

这是我对内部 HTML 的解决方案，其中包含多个具有相同类的 div

[https://stackoverflow.com/a/32580793/3888517](https://stackoverflow.com/a/32580793/3888517)

# php - 在多个文本框上使用自动完成插件

> ID：10381760
> 
> 赞同：0
> 
> 时间：2012-04-30T10:00:06.130
> 
> 标签：php, jquery, mysql, codeigniter

我有一个自动完成插件，它需要 3 个参数

```
 $(function(){
    setAutoComplete("id", "results", "url");
}); 
```

现在我试图在多个文本框中使用它，在这些文本框中有不同的 url 可以从中获取数据但它不起作用。如果我在单个文本框上使用它，它的工作原理。我已经在javascript中完成了这个

```
$(function(){
    setAutoComplete("searchField1", "results", "url1");
});
$(function(){
    setAutoComplete("searchField2", "results", "url2");
});
$(function(){
    setAutoComplete("searchField3", "results", "url3");
}); 
```

但它仍然无法正常工作。需要帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T10:10:41.587

而不是使用多个功能试试这个。为您希望显示自动完成功能的所有输入字段分配一个类。假设类名是自动完成的。然后使用单个函数

```
$(function()
{
    $('.autocomplete').click(function()// or focus or keyperess
    {
    var id = $(this).attr('id');

    if(id == 'color'){
       setAutoComplete( id, "results", "url");
    }else if(id == 'name'){
       setAutoComplete( id, "results", "another url");
    }else if(id == 'blah blah'){
       setAutoComplete( id, "results", "blah blah url");
    }
     });
}); 
```

# c++ - C++：arr.size() 是循环的好条件吗？

> ID：10381761
> 
> 赞同：5
> 
> 时间：2012-04-30T10:00:07.903
> 
> 标签：c++, caching, for-loop

如果有一个名为 arr 的向量包含大量数据，我将打印该向量中的所有值。我要么使用：

```
int arr_size = arr.size();
for(int i=0; i<arr_size; ++i) {//print the values} 
```

或以这种方式实现它：

```
for(int i=0; i<arr.size(); ++i) {//print the values} 
```

在我看来，第一种实现方式会将向量的大小提取到缓存中，从而在第一次未命中后使条件更快。第二个实现呢？是不是比较慢？每次满足条件时系统都会调用size()方法吗？

编辑：假设它使用 C++。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T10:20:22.307

概括为具有任意主体的循环，您给出的两个变体之间存在一个关键区别：如果`arr`循环期间的大小发生变化怎么办？

对于第二种情况，如果编译器可以假设它没有改变，那么它可以优化循环，因此`arr.size()`只调用一次，生成的代码与第一种情况大致相同。

但是如果循环体调用了一个外部函数（很有可能），那么它就不能再做这个假设了，必须检查`arr.size()`每个循环迭代。

Having said that `arr.size()` will probably work out to a simple structure member access which would be no slower than storing the value in a local variable, so there isn't much to be gained out of using the first variant anyway. Unless `arr` is a pointer or reference in which case it's an indirect and then an access, so the first version would be a *litte* faster.

If it's a particularly commonly run loop and you have to compile without optimisation for some reason, you might want to go with the first case to speed it up.

But *then*, the readability of the code is not impaired much at all by that one extra line is it?

To sum up, I would go with variant 2 unless the loop was an inner loop that had to be tight, in which case I would go with variant 1 just to be sure.

And of course if elements are added to `arr` inside the loop and the loop needs to cover those elements then only the second variant will be correct.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T10:25:57.060

I would suggest if is possible for you use iterators instead of indices. e.g:

In c++:

```
for( const_iterator it = arr.begin(), ite = arr.end();
     it != ite; ++it)
{
 ....
} 
```

In c#:

```
foreach(var item in arr){....} 
```

One of the advantages in c++ is when you have list instead of vector, in vector size() is O(1) but in list it's O(n). Also this prevents from situations which calls, arr.Size() too many times.

General advantage is more readable codes in both c# and c++ but still there are some situations that you can't use them, and you should use indices.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T10:35:56.493

If you have a modern enough compiler:

```
for (auto i: arr)
{
    //print the values
} 
```

Or better still... avoid rolling your own `for`-loop (this will work with pre-C++11 compilers, too):

```
std::copy(arr.begin(), arr.end(), std::ostream_iterator<int>(std::cout, ",")); 
```

*   [**`std::copy()`**](http://en.cppreference.com/w/cpp/algorithm/copy) is in [`<algorithm>`](http://en.cppreference.com/w/cpp/algorithm)
*   [**`std::ostream_iterator<>`**](http://en.cppreference.com/w/cpp/iterator/ostream_iterator) is in [`<iterator>`](http://en.cppreference.com/w/cpp/iterator).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T10:13:10.963

第二种选择更好：

```
for(int i=0; i<arr.size(); ++i) {//print the values} 
```

循环结束后，变量 i 将被释放。arr.size() 将在循环初始化后计算。不会分配内存来存储 arr_size 变量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-22T04:59:31.343

I did a few tests, and caching the values seem to be [marginally] better than evaluating the condition with every iteration.

Here are my test results when using `std::vector`.

Code: [Testing for-loop caching with std::vector](https://rextester.com/EAJC42685) Timing results (4 runs for evaluated and cached runs each):

```
Evaluated:
- Compilation time: 2,16 sec, absolute running time: 10,94 sec, absolute service time: 13,11 sec
- Compilation time: 1,76 sec, absolute running time: 9,98 sec, absolute service time: 11,75 sec
- Compilation time: 1,76 sec, absolute running time: 10,11 sec, absolute service time: 11,88 sec
- Compilation time: 1,91 sec, absolute running time: 10,62 sec, absolute service time: 12,53 sec

Cached:
 - Compilation time: 1,84 sec, absolute running time: 9,55 sec, absolute
   service time: 11,39 sec
 - Compilation time: 1,75 sec, absolute running
   time: 9,85 sec, absolute service time: 11,61 sec
 - Compilation time:
   1,83 sec, absolute running time: 9,41 sec, absolute service time:
   11,25 sec
 - Compilation time: 1,86 sec, absolute running time: 9,87
   sec, absolute service time: 11,73 sec 
```

Here are my test results when using `std::list`.

Code: [Testing for-loop caching with std::list](https://rextester.com/NTUA16539) Timing results (2 runs for evaluated and cached runs each):

```
Evaluated:
 - Compilation time: 1,9 sec, absolute running time: 17,94 sec, absolute service time: 19,84 sec
 - Compilation time: 1,84 sec, absolute running time: 17,52 sec, absolute service time: 19,36 sec

Cached:
 - Compilation time: 1,81 sec, absolute running time: 17,74 sec, absolute service time: 19,56 sec
 - Compilation time: 1,92 sec, absolute running time: 17,29 sec, absolute service time: 19,22 sec 
```

The *absolute running time* is what I used as a comparison metric. Caching the condition is consistently (yet marginally) better than evaluating the condition.

# c# - Metro 应用程序中的 system.web.services.dll

> ID：10381766
> 
> 赞同：0
> 
> 时间：2012-04-30T10:00:18.180
> 
> 标签：c#, windows-runtime

我想在我的 Metro 应用程序中使用一个使用 system.web.services.dll 的 dll。当我将它添加为参考并编译时，它对我来说失败并出现错误`can't resolve assembly or windows metadata file system.web.services.dll`

如果有一个用 C# 编写的库，我可以将它转换为 .net 核心库吗？

# xml - 如何在 xslt 中获得第一人称？

> ID：10381767
> 
> 赞同：-1
> 
> 时间：2012-04-30T10:00:23.607
> 
> 标签：xml, xslt

我有类似 dis 的代码

```
 <xsl:if test='last-name="andrew"'>
print first person
</xsl:if> 
```

那么如何获得`person`姓氏的第一个安德鲁？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T12:05:52.503

> 如何获得第一个姓安德鲁的人

**如果上下文（当前）节点是`person`元素的父节点，那么您想要的 XPath 表达式是**：

```
person[last-name = 'andrew'][1] 
```

这将选择上下文节点的第一个（按文档顺序）子节点，使其名称为`person`，其第一`last-name`个子节点的字符串值为 string `"andrew"`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T12:03:58.540

Without seeing your source hard to be definite but probably

```
select='person[last-name="andrew"][1]' 
```

assuming a structure such as

```
<person><first-name>David</first-name><last-name>Carlisle</last-name></person>
<person><first-name>David</first-name><last-name>andrew</last-name></person>
<person><first-name>andrew</first-name><last-name>andrew</last-name></person> 
```

# c# - C# - 图像无法在 Windows XP 中打开，但相同的代码在 Windows 7 中有效

> ID：10381768
> 
> 赞同：1
> 
> 时间：2012-04-30T10:00:35.043
> 
> 标签：c#, windows-7, windows-xp, gdi+, tiff

我有两张tiff图像，一张是黑白的，另一张是grayscale8。

当我尝试打开它们时，我需要在图片框中显示它们：

```
Image.FromFile("path"); 
```

BW 一打开没有问题，灰度一给我一个例外：“内存不足”

这只发生在我在 WinXP SP3 机器上执行代码时，使用 Windows 7 的同事在这两种情况下都没有问题

有任何想法吗？

更多信息：MS Paint 和标准 Microsoft Image Viewer 无法打开灰度图像，而 Office Picture Manager 可以

Windows 7 可以用任何软件打开图像

我有这个临时解决方案，但我认为不是最好的：

```
System.Windows.Media.Imaging.BitmapImage bImg = null;

using (var fs = new FileStream(dlg.FileName, FileMode.Open))
{
    bImg = new System.Windows.Media.Imaging.BitmapImage();
    bImg.BeginInit();
    bImg.StreamSource = fs;
    bImg.EndInit();
}

if (bImg.Format == System.Windows.Media.PixelFormats.Gray8)
{
    Bitmap bitmap;

    using (MemoryStream outStream = new MemoryStream())
    {
        BitmapEncoder enc = new BmpBitmapEncoder();
        enc.Frames.Add(BitmapFrame.Create(bImg));
        enc.Save(outStream);
        bitmap = new System.Drawing.Bitmap(outStream);
    }
    AssignImage(bitmap);
}
else
    AssignImage(Image.FromFile(dlg.FileName)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T11:01:10.303

Image.FromFile 使用本机 GDI 调用来加载图像。

在加载不受支持的 TIFF 文件时，有很多关于内存不足异常的报告。

[http://social.msdn.microsoft.com/Forums/en-US/winformsdesigner/thread/582c0a29-97ef-4136-8a7f-81eb1b1f1c94/](http://social.msdn.microsoft.com/Forums/en-US/winformsdesigner/thread/582c0a29-97ef-4136-8a7f-81eb1b1f1c94/)

[http://www.pcreview.co.uk/forums/opening-tiff-file-throws-out-memory-exception-t3105542.html](http://www.pcreview.co.uk/forums/opening-tiff-file-throws-out-memory-exception-t3105542.html)

TIFF 文件格式有许多编码选项，并非所有这些选项都被 Windows 天真地支持。TIFF 文件有点像 AVI 文件，因为它的内容可以以不同的方式压缩。Windows 7 中可能已添加对其他格式的支持。

是否可以更改 TIFF 文件的编码选项？

# javascript - 继承 - 实例变量

> ID：10381770
> 
> 赞同：2
> 
> 时间：2012-04-30T10:00:41.060
> 
> 标签：javascript, inheritance, prototypejs, openlayers

我刚刚偶然发现了我认为奇怪的行为，这很可能只是我对 javascript 继承如何工作的误解......

我正在使用 OpenLayers，它基于prototypejs 来创建类和子类。我希望在超类中声明的字段将在类或子类的每个实例中成为单独的对象。然而，情况似乎并非如此，正如您在下面的示例中看到的那样。

超类`MySuperClass`定义了该字段，`collection`但是即使我构造了此类的多个实例，并且通过子类该字段`collection`似乎是共享的，就好像它是`static`？

为什么会这样，如何在超类的定义中安全地创建实例变量？

```
<script type="text/javascript" src="http://openlayers.org/dev/OpenLayers.js"></script>
<script type="text/javascript">
    OpenLayers.MySuperClass = OpenLayers.Class(
    {
        collection: [],

        initialize: function(options)
        {
            OpenLayers.Util.extend(this, options);
        },

        addItem: function(listener)
        {
            this.collection.push(listener);
        }
    });

    OpenLayers.MySubClassOne = OpenLayers.Class(OpenLayers.MySuperClass,
    {
        initialize: function(options)
        {
            OpenLayers.MySuperClass.prototype.initialize.apply(this, arguments);
        }
    });

    OpenLayers.MySubClassTwo = OpenLayers.Class(OpenLayers.MySuperClass,
    {
        initialize: function(options)
        {
            OpenLayers.MySuperClass.prototype.initialize.apply(this, arguments);
        }
    });

    var instanceOne = new OpenLayers.MySubClassOne();
    instanceOne.addItem("one");

    var instanceTwo = new OpenLayers.MySubClassTwo();
    instanceTwo.addItem("two");

    var instanceSuperOne = new OpenLayers.MySuperClass();
    instanceSuperOne.addItem("three");

    var instanceSuperTwo = new OpenLayers.MySuperClass();
    instanceSuperTwo.addItem("four");

    alert(instanceOne.collection);
    alert(instanceTwo.collection);
    alert(instanceSuperOne.collection);
    alert(instanceSuperTwo.collection);
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T10:18:36.870

我不太确定这个，但我想这是因为你`collection`在类中初始化了这个字段。请注意，该类只是一个对象，而不是一个函数。如果您希望它处于实例级别，则应在构造函数中对其进行初始化，如果是 OpenLayers，则为`initialize`. 我在 jQuery UI 中观察到类似的行为，并且来自面向对象的语言，我发现这种情况令人困惑。

# java - java - 如何在JNI中将指针从java传递到C？

> ID：10381773
> 
> 赞同：3
> 
> 时间：2012-04-30T10:00:53.750
> 
> 标签：java, pointers, java-native-interface

我有一个本机方法`int sum(int *,int *)`。如何从 java 端传递此方法的参数。

编辑：我成功运行的示例方法是 double gsl_stats_mean(doubleArray,int,int); 这个方法在 GSL 中可用，因为我已经创建了共享对象，并且从 java 端我已经发送了所需的参数，并且我得到了双精度值作为返回值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T15:10:23.173

如果该方法不更改引用的值，那么您只需将参数作为值传递，并在本机代码中获取它们的地址：

```
JNIEXPORT jint JNICALL Java_com_example_Summator_sum(JNIEnv *env, jobject thisObj,
        jint firstAddend, jint secondAddend) {
     return (jint) sum(&firstAddend, &secondAddend);
} 
```

Java中的方法是：

```
native int sum(int firstAdded, int secondAddend); 
```

显然，除了函数之外，您在任何地方都不需要指针`sum`，因此没有理由在 Java 中使用它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T10:12:55.240

看看[这个讨论](https://stackoverflow.com/questions/1632367/passing-pointers-between-c-and-java-through-jni)它是关于通过 JNI 在 C 和 Java 之间传递指针

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T11:23:24.193

除非您需要使用 JNI，否则[JNA](https://github.com/twall/jna#readme)可能是更好的选择。我发现它更容易使用。

# javascript - 发送消息时如何通知用户

> ID：10381779
> 
> 赞同：0
> 
> 时间：2012-04-30T10:01:45.197
> 
> 标签：javascript, asp.net, internet-explorer, firefox, google-chrome

有谁知道制作弹出聊天窗口的代码。发送消息时如何通知用户？如何让用户的窗口聚焦？或闪烁弹出窗口。目前我有这个代码：

```
function stateChangeHandler() {
    //readyState of 4 or 'complete' represents that data has been returned 
    if (xmlHttp.readyState == 4 || xmlHttp.readyState == 'complete') {
        //Gather the results from the callback 
        var str = xmlHttp.responseText;
        if (str != "") {  
            var chatmsgs = eval(str);
            for (ind = 0; ind < chatmsgs.length; ind++) {
                var senderId = chatmsgs[ind].Sender;
                var chatId = chatmsgs[ind].ChatId;
                var message = chatmsgs[ind].Msg;
                var msgId = chatmsgs[ind].MsgId;

                message = restoreHtmlTags(message);
                document.getElementById('msgPanel').innerHTML += "<br><b>" + senderId + ": </b>" + message;
                MessageReceived(msgId, msgCounter);

                document.getElementById('msgPanel').scrollTop = document.getElementById('msgPanel').scrollHeight;
                window.focus();             

           }
        }
    }
} 
```

它只在 Internet Explorer 中工作，Firefox 和 Chrome 不工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T10:11:41.107

我使用下面的 JS 文件弹出，非常简洁。

[http://yensdesign.com/2008/09/how-to-create-a-stunning-and-smooth-popup-using-jquery/](http://yensdesign.com/2008/09/how-to-create-a-stunning-and-smooth-popup-using-jquery/)

在页面底部添加两个 div，例如

```
<div id="popupContact" runat="server" clientidmode="Static"></div>
<div id="backgroundPopup" runat="server" clientidmode="Static"></div> 
```

在服务器端做这样的代码

```
popupContact.innerHTML = "your message";
ScriptManager.RegisterStartupScript(this, this.GetType(), "open", "centerPopup();loadPopup();", true); 
```

您可以从页面本身调用这些。虽然它是小型 JS 和 CSS 文件。

# java - 获取linkedhashmap的第一项

> ID：10381783
> 
> 赞同：12
> 
> 时间：2012-04-30T10:01:55.870
> 
> 标签：java, collections, linkedhashmap

我正在使用`LinkedHashMap`. 我将始终处理第一个值并且可以删除（如果可能），以便在下一次迭代期间我将再次从映射中获取相同的第一个值进行处理。我可以用什么来获得第一个值。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-30T10:05:21.803

您可以使用它来获取第一个元素键：

```
 Object key = linkedHashMap.keySet().iterator().next(); 
```

然后获取值：

```
Object value = linkedHashMap.get(key); 
```

最后删除该条目：

```
linkedHashMap.remove(key); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T10:05:50.870

在值集上使用迭代器 - 例如

```
Map map = new LinkedHashMap();
map.put("A", 1);
map.values().iterator().next(); 
```

根据您的问题，我不清楚地图是用于当前任务的最佳对象。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-26T09:30:01.907

如果您需要值和键，最好使用 EntrySet。

```
LinkedHashMap<Integer,String> map = new LinkedHashMap<Integer,String>();
Entry<Integer, String> mapEntry = map.entrySet().iterator().next();
Integer key = mapEntry.getKey();
String value = mapEntry.getValue(); 
```

# javascript - 当它的父div样式变成显示块时如何刷新codemirror？

> ID：10381784
> 
> 赞同：12
> 
> 时间：2012-04-30T10:02:00.610
> 
> 标签：javascript, codemirror

我在选项卡式界面中使用带有 textareas 的 codemirror，当我不在包含 codemirror 的选项卡中然后转到它时，我得到没有行号或光标的空白区域，当我刷新页面时它可以工作，我知道这是因为标签内容被隐藏使用`display: none;`所以我该如何解决这个问题？

这是我的代码，（我也在使用 jquery）：

```
var editor = CodeMirror.fromTextArea(document.getElementById($this.attr('id')), {
        lineNumbers: true,
        mode: text/html,
        enterMode: "keep",
        tabMode: "shift"
    });

    $(editor.getScrollerElement()).width(300);
    width = $(editor.getScrollerElement()).parent().width();
    $(editor.getScrollerElement()).width(width);
    editor.refresh(); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-01T08:44:34.530

`refresh`确保在切换到包含编辑器的选项卡时也调用。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-09-06T20:38:08.797

**试试这个 ：**

```
// Refresh CodeMirror
$('.CodeMirror').each(function(i, el){
    el.CodeMirror.refresh();
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-03-28T17:05:08.507

您可以使用[`autorefresh`](https://codemirror.net/addon/display/autorefresh.js)插件：

> 显示/自动刷新.js
> 
> 当在隐藏的 DOM 节点中初始化编辑器时，这个插件很有用，在编辑器变得可见时很难调用刷新的情况下。它定义了一个选项 autoRefresh ，您可以将其设置为 true 以确保如果编辑器在初始化时不可见，它将在第一次可见时刷新。这是通过每 250 毫秒轮询一次来完成的（您可以传递像 {delay: 500} 这样的值作为选项值来配置它）。请注意，此插件只会在编辑器首次可见时刷新一次，并且不会处理进一步的重新设置样式和调整大小。

您只需要添加 JS 库并设置`autoRefresh`为`true`：

```
var editor = CodeMirror.fromTextArea(document.getElementById($this.attr('id')), {
    lineNumbers: true,
    mode: text/html,
    enterMode: "keep",
    tabMode: "shift",
    autoRefresh: true
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-06T00:46:22.403

**选择“.CodeMirror”的类并实例化对象以在更改大小时进行刷新**

*例如，在我的情况下，我想单击一个按钮来添加和删除一个“活动”类，以使 CodeMirror 的内容出现和消失。*

```
.CodeMirror {
  border-radius: 3px;
  margin: 10px 0 8px;
  padding: 5px;
  width: 100%;
  height: auto;
  display: none;
}

.CodeMirror.active {
  display: block;
} 
```

代码镜像对象

```
const editor = CodeMirror.fromTextArea(textarea,{
    lineNumbers:true,
    tabSize:4,
    theme: 'material',
    mode:"javascript",
    readOnly: true,
  }); 
```

btn 事件

```
 btn.addEventListener('click', showCode) 
```

**解决方案**

```
function showCode () { 
  const editor= document.querySelector('.CodeMirror')
  editor.classList.toggle('active')

  // use the object for refresh CodeMirror 
  editor.CodeMirror.refresh()
} 
```

# jquery - 移动 changePage 错误：无法识别的表达式

> ID：10381788
> 
> 赞同：0
> 
> 时间：2012-04-30T10:02:59.437
> 
> 标签：jquery, jquery-mobile

我有 aspx 页面，其中有：

```
<li><a href="switchPage('#intro', 'pop', false);" data-rel="dialog" data-icon="check" class="ui-btn-right">Welkom</a></li> 
```

我也有 js 文件，其中有：

```
function switchPage(pageref, method, reverseP)
{
$.mobile.changePage(pageref, {transition: method, reverse: reverseP, changeHash:  true});
} 
```

当我单击链接时，出现此异常：

Microsoft JScript 运行时错误：语法错误，无法识别的表达式：[data-url='intro','pop', false]')

以前我使用 jquery.mobile-1.0a4.1.min.js 和这段代码：

```
<li><a href="JavaScrit:switchPage('#intro', 'pop', false)" data-rel="dialog" data-icon="check" class="ui-btn-right">Welkom</a></li> 
```

它正在工作。但后来我想使用淘汰赛库和最新版本的 jquery 和 jquery.mobile。当我切换到 1.1.0.min.js 时，它停止工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T11:17:25.727

试试这个`<a href="javascript:switchPage('#intro', 'pop', false)">`。这应该对您有用，但请注意，最好将您的代码绑定到单击事件。甚至更好地利用必要的数据属性。

```
<a href="#intro" data-transition="pop" data-direction="reverse">Welkom</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T22:25:57.027

尝试以下，我有同样的问题，几乎无法弄清楚：

```
<li><a href="#" onclick="switchPage('#intro', 'pop', false)" data-rel="dialog" data-icon="check" class="ui-btn-right">Welkom</a></li> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-18T07:34:31.720

问题解决了。我使用了不同版本的移动 jquery 和 css

# eclipse-cdt - C中的堆栈粉碎

> ID：10381789
> 
> 赞同：0
> 
> 时间：2012-04-30T10:03:00.393
> 
> 标签：eclipse-cdt

我想通过解析来检测 C 程序中发生堆栈粉碎的情况。我想在 Java 中做到这一点。

任何人都可以引导我开始。

如何检测 C 程序中是否存在堆栈粉碎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T10:21:22.600

一般来说，这可能是不可行的。实际上，它看起来像是[停机问题](http://en.wikipedia.org/wiki/Halting_problem)的一种表达方式。堆栈粉碎检测在运行时执行。您可以先查看有关[缓冲区溢出](http://en.wikipedia.org/wiki/Buffer_overflow_protection)的文章，以及stackoverflow 上已经提供的[许多问题和答案。](https://stackoverflow.com/search?q=stack%20smashing)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-13T12:45:41.487

您可以先编写一个程序来进行堆栈粉碎。根据我自己的经验，一个示例是以下代码。

```
int main(void)
{
    char hello[] = "hello";
    printf("%s\n",strcat(hello, "world"));
} 
```

这可以为您提供带有分段错误的堆栈粉碎检测警告

您还可以通过插入足以容纳附加字符串的字符串大小来纠正此问题。IE，

```
int main(void)
{
    char hello[50] = "hello";
    printf("%s\n",strcat(hello, "world"));
} 
```

# javascript - 检查文本框的内容已更改

> ID：10381790
> 
> 赞同：0
> 
> 时间：2012-04-30T10:03:01.750
> 
> 标签：javascript

在我的表单中，我有 2 个文本框（txtDate、txtTime）、1 个隐藏文本框（txtDateTime）和保存按钮。我想要 txtDateTime = txtDate + txtTime 的值，如果用户在 txtDate 或 txtTime 更改，它将自动更改值。

我怎样才能做到这一点？如果你知道，请建议我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T10:06:05.490

您可以使用`onchange`这样的事件：

```
var ttime = document.getElementById('txtTime');
var tdate = document.getElementById('txtDate');
var tdt = document.getElementById('txtDateTime');

ttime.onchange = function(){
  tdt.value = tdate.value + ttime.value;
};

tdate.onchange = function(){
  tdt.value = tdate.value + ttime.value;
}; 
```

确保`id`为您的文本框分配属性，例如`txtTime`，`txtDate`和`txtDateTime`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T10:05:35.430

使用 onchange

```
<input type='text' onchange='change()' />

function change() {
    //code
} 
```

# java - 移动应用程序开发（不适用于安卓）

> ID：10381795
> 
> 赞同：0
> 
> 时间：2012-04-30T10:03:13.030
> 
> 标签：java, mobile

我对java中的移动应用程序开发很感兴趣，但找不到任何教程，我怀疑哪个是最好的网络教程？以及我需要的所有东西[我现在有 javase]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T10:52:08.780

这里是，

[http://www.javaworld.com/javaworld/jw-05-2005/jw-0502-midlet.html](http://www.javaworld.com/javaworld/jw-05-2005/jw-0502-midlet.html) http://www.digilife.be/quickreferences/pt/j2me%20step%20by%20step.pdf

# pass-by-reference - 引用传递的语义原因

> ID：10381796
> 
> 赞同：0
> 
> 时间：2012-04-30T10:03:18.957
> 
> 标签：pass-by-reference, pass-by-value

我真的很想知道，通过引用传递（或传递指针）在语义上是否是“最佳”解决方案？特别是对于原始类型，感觉就像：

```
int x = 5;
x = foo(x); 
```

比自然

```
int x = 5;
foo(x); 
```

我首先想到了需要返回错误代码的代码，但是后来我意识到使用异常机制总是（？）比这更可取。是否有真正的理由希望通过引用传递？- 暂时不考虑速度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T10:38:34.560

可以说，对于原始类型，按值传递它们确实更自然。只看数学，我们都对值有了解，并且知道将值**映射**到其他值是什么意思。

例如，当我们编写 时`sin(x)`，我们真的希望我们的函数`sin`将值 (of) 映射`x`到我们简单表示的另一个值`sin(x)`。有时我们想给映射的值一个不同的名字，所以我们可以写一些类似的东西`y := sin(x)`并使用`y`而不是`sin(x)`.

现在，如果`sin`通过引用获取此参数，`sin(x)`则意味着 的值`x`将被映射到`sin(x)`并再次隐式存储`x`- 因此旧的值`x`将丢失！

在许多情况下，这真的很烦人，因为我们可能想再次使用“旧” `x`——所以我们必须事先复制它的值。

现在让我们看看另一方面：OOP。在那里你想要有对象，例如汽车，并且这个对象应该能够**改变**。例如，汽车可以移动（如果有汽油），因此它们可以改变位置；开车会消耗汽油，因此油箱会随着时间的推移而耗尽；你可以打开门等...

在这里，我们不会考虑将一辆车映射到另一辆车（副本），车门打开或油箱略微减少，但我们真正考虑的是**同一**辆车，但现在车门打开。

* * *

简而言之：

*   当我们希望参数不失去其原始含义时，按值传递是好的——它对于**映射**值最有用。

*   **当我们希望我们的值（我们在这里解释为一个对象）改变**时，通过引用传递是好的。

* * *

因此，从语义上讲，您通常希望使用按值传递/按引用传递是很清楚的，但是按值传递可能会遇到一些问题：

如果您的对象是一个**资源**，那么按值传递该资源将（可能）意味着您将分配第二个资源！这有时根本不可能——例如考虑（TCP）网络连接。当您已经拥有一个时，不可能在同一个端口上打开另一个，在已经打开的连接中共享上下文。所以在这种情况下，你真的别无选择，只能通过引用传递你的网络连接（套接字、数据流等）。

# powershell - Powershell：如何捕获 powershell 输出

> ID：10381797
> 
> 赞同：3
> 
> 时间：2012-04-30T10:03:23.153
> 
> 标签：powershell, powershell-3.0

我有一组从命令提示符调用的 powershell 脚本。当前脚本返回成功或失败代码。

有时脚本中的某些 powershell 命令会引发错误。我想捕获所有输出（日志/消息/错误）。我发现我可以使用类似的命令

.\test.ps1 2>&1 | foreach 对象 {$_.ToString()} | 输出文件 e:\log.txt

尽管此方法记录了错误消息，但以下是问题

1.  它只记录错误消息，而不是当我从 powershell 控制台运行相同脚本时出现的行号。

2.  现在 powershell 没有输出消息。我不想隐藏控制台的输出并希望将 powershell 日志记录作为附加内容。

3.  我必须修改脚本调用命令。是否有任何独立工具可以运行和捕获来自 powershell 窗口的输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T10:01:08.557

我要提到 Start-Transcript 是一种很好的方法。

您还可以使用 Get-History 来找出您输入的命令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T14:01:24.073

刚刚找到 Start-Transcript 和 Stop-Transcript 命令。我们可以使用它将所有输出内容（错误/消息/信息等）捕获到文件中。

# javascript - 如何通过 id 获取元素的值

> ID：10381798
> 
> 赞同：-4
> 
> 时间：2012-04-30T10:03:31.533
> 
> 标签：javascript, jquery

我正在使用 JavaScript 和 JQuery，当我在应用程序中选择某个页面时，名为 myId 的内容 div 中的 id 显示字符串“未找到结果”。这意味着当我选择页面时，将执行包含在每个页面上的搜索。如果有记录要显示，我会得到这些记录。如果没有，那么我会得到“未找到结果”字符串。

我想要的是检查 myId 的值，当它为空时（“未找到结果”），我想隐藏该页面上的一些控件。

我已经尝试过`$('#myId').val();`了，但它只给出了 2 个双引号，即使它不是空的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T10:06:04.720

一个不错的方法可能是使用 data 属性。

如果没有找到结果，请执行以下操作。

```
 $('#myId').data('results', '0'); 
```

当你想检查时，访问它

```
 var x = $('#myId').data('results'); 
```

检查 x 是否为 0，如果为真则隐藏结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T10:07:19.067

使用`text`方法获取元素的内容：

```
if ($("#myId").text() == "No results found") {
  // hide some elements
} 
```

# c - 快速确定函数返回的位置

> ID：10381799
> 
> 赞同：0
> 
> 时间：2012-04-30T10:03:46.960
> 
> 标签：c, gdb

我有一个很长的 C 函数，可以`return`在不同的行。是否可以让 GDB 运行该函数并在函数`return`编辑的哪一行打印出来？到目前为止，我一次只通过一行（使用`n`），这变得乏味。

我可以用 GDB 动态调用一个函数并知道它在哪一行返回吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T10:31:47.597

如果您正在使用 GCC 编译并且可以编辑代码，那么一个讨厌的技巧是执行宏并搜索+替换编辑器中的所有返回...

```
int global_return_lineno;
#define return2(x) {global_return_lineno=__LINE__;return(x);} 
```

然后调用该函数并检查全局变量。

# sql - 通过 Ruby 运行 SQL 脚本时的 SQL 结果

> ID：10381807
> 
> 赞同：0
> 
> 时间：2012-04-30T10:04:40.683
> 
> 标签：sql, ruby

我正在使用[本](http://www.tutorialspoint.com/ruby/ruby_database_access.htm)教程通过 ruby​​ 运行 SQL 命令。关键是编写一个小脚本并自动化，以便它每天使用 cron 运行。无论如何，我想知道是否有人知道如何让 ruby​​ 脚本输出运行这些 SQL 命令的结果？

例如，如果更新成功，它应该说 1（或任意数量）行受到影响。或者像你这样的。我没有为此使用 Rails 平台。只是红宝石dbi宝石。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T11:36:25.510

不确定 DBI，从未使用过，但是，例如，[`Sequel`](http://sequel.rubyforge.org/)文档说[`update`](http://sequel.rubyforge.org/rdoc/classes/Sequel/Dataset.html#method-method-i-update)返回更新的行数，但是，这是特定于适配器的，即并非所有数据库服务器都返回更新的行数。

# pdf - 黑莓中的PDF渲染

> ID：10381808
> 
> 赞同：1
> 
> 时间：2012-04-30T10:04:41.773
> 
> 标签：pdf, blackberry-jde

我是黑莓智能手机开发的新手。我的应用程序包含 PDF 图书阅读器的功能。我从服务器下载了完整的 PDF，但我不知道如何查看 PDF 文件。是否有任何图书馆可以帮助我查看 PDF 文件？电子邮件中的内置 PDF 附件显示在浏览器中。我不想在浏览器中打开它。如果有人知道，请帮助我。

# c# - 获取数字的 n 位二进制表示

> ID：10381810
> 
> 赞同：-1
> 
> 时间：2012-04-30T10:04:48.483
> 
> 标签：c#, data-conversion

我已经尝试过这种方式来获取 C# 中的二进制表示

```
int i = 1;
string binary = Convert.ToString(i, 2); 
```

它返回单个字符字符串“1”

我需要一个数字字符串假设数字是 8 ni 想要 5 位二进制表示，

我需要它是“01000”

位数（n）是输入。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T10:08:49.293

```
string binary = Convert.ToString(i, 2).PadLeft(5, '0'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T10:11:03.430

你可以这样做。

```
string str = Convert.ToString(8, 2).PadLeft(5, '0'); 
```

PadLeft 用于将 0 放在表达式的左侧，这里我们给出 5 是数字的总宽度。第二个参数是当数字小于 5 个字符时放在左边的字符

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T10:26:23.893

滚动你自己，你可以使用这样的东西（未经测试，但我认为这应该可行）：

```
int i = 8; // your number
int noZeros = 5;
StringBuilder sb = new StringBuilder();
while(i != 0 && noZeros > 0){
    if(i & 1 != 0){ sb.Insert(0, "1"); }
    else { sb.Insert(0, "0"); }
    i = i >> 1;
    noZeros --;
}

string binary = sb.ToString(); 
```

这应该适用于任何 int。

# scheme - Scheme 中的延续示例

> ID：10381811
> 
> 赞同：2
> 
> 时间：2012-04-30T10:05:01.747
> 
> 标签：scheme, continuations

我在理解我的教授用作示例的这段代码时遇到了一些麻烦：

```
(define saved-cont #f)  

(define (test-cont)
     (let ((x 0))
      (call/cc
       (lambda (k)     
        (set! saved-cont k))) 

      (set! x (+ x 1))
      (display x)
      (newline))) 
```

如果我们第一次运行包含`(test-cont)`什么`k`？

注意：我使用的是 R6RS 方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T14:04:37.050

`call/cc`以当前延续作为其唯一参数调用给定函数。因此，`k`这是当前的延续。当您使用值调用它时，`call/cc`将返回您提供的值。（不过，由于您没有`call/cc`在上面的代码中使用 ' 返回值，并且由于 R6RS 在这种情况下允许零值返回，因此您可以`saved-cont`不带参数调用并仍然执行您期望的操作。）

在这里，基本上，每次调用`(saved-cont)`，下面的代码`call/cc`都会再次运行。因此，`x`将增加，并显示其新值。

# jsp - 全局变量 jsp servlet

> ID：10381816
> 
> 赞同：0
> 
> 时间：2012-04-30T10:05:18.017
> 
> 标签：jsp, servlets, global-variables

我有 2 个 jsp 文件（索引和 go）和 1 个 java 类 MyClass。在 index.jsp 中，我有一个 MyClass 的实例。我想在 go.jsp 文件中使用这个相同的实例。我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T10:12:08.777

在 index.jsp 中使用 ->

```
application.setAttribute("myclass" , new MyClass()); 
```

在 go.jsp 中使用 ->

```
MyClass myclass = (MyClass)application.getAttribute("myclass"); 
```

在上面的代码`application`中是一个应用程序级别的变量，你可以从所有的jsp 和servlet 中访问它。

# java - Eclipse Android 项目中缺少 Java 库

> ID：10381823
> 
> 赞同：0
> 
> 时间：2012-04-30T10:05:48.427
> 
> 标签：java, android, eclipse, rmi

因此，我被赋予了一项繁琐的任务，即尝试对我大学的一名前研究生的旧 Android 项目进行一些更新，而我对该项目有一些奇怪的行为。有人告诉我，该项目过去运行良好，但我一直对此感到头疼。

特别是一个问题经常来来去去。也就是说，该项目忘记了几个库是什么。“无法解析导入 java.rmi”，同样 Eclipse 无法识别“org.omg”。但这里有一个棘手的问题 - 它有时会识别它们。我将重新创建项目，或者使用类路径，或者重新启动我的机器，然后错误就会消失并且项目可以运行。还有进一步的问题，但至少它可以编译。但是随后错误又回来了，我尝试做与以前相同的事情以使其消失，但它会持续存在。但是，我暂时搁置了一会儿，一两天后回来，问题似乎是任意（暂时）解决的。

关于什么会导致这种行为的任何想法？

# handlebars.js - handlerbars.js 检查列表是否为空

> ID：10381827
> 
> 赞同：135
> 
> 时间：2012-04-30T10:06:07.973
> 
> 标签：handlebars.js

Handlebars.js 模板中有没有办法在遍历列表/集合之前检查集合或列表是否为空或空？

```
// if list is empty do some rendering ... otherwise do the normal
{{#list items}}

{{/list}}

{{#each items}}

{{/each}} 
```

* * *

## 回答 #1

> 赞同：255
> 
> 时间：2014-02-06T18:29:04.563

如果您想要显示*一次*且*仅当数组有数据*时，请使用

```
{{#if items.length}}
    //Render
{{/if}} 
```

`.length`将为空数组返回 0，因此我们获得了真正的虚假值。

* * *

## 回答 #2

> 赞同：225
> 
> 时间：2012-07-22T01:11:44.363

“each”标签也可以包含“else”部分。所以最简单的形式是：

```
{{#each items}}
// render item
{{else}}
// render empty
{{/each}} 
```

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2012-04-30T11:47:57.697

好的，这比我想象的要简单：

```
{{#if items}}
// render items

{{#each items}}
// render item
{{/each}}

{{else}}
// render empty
{{/if}} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-06-22T07:06:11.243

如果要检查集合（光标）是否为空，则以前的答案将没有用，而是必须使用`count()`方法：

```
{{#if items.count}}
    <p>There is {{items.count}} item(s).</p>
{{else}}
    <p>There is nothing</p>
{{/if}} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-12-04T11:25:55.533

对于需要在 {{#if}} 之上使用 {{#each}} 的任何人（即 for 循环内的 if 循环）。他们是否有三个不同的数组列表。

在 if 语句中使用查找为我解决了这个问题。因为，上面的答案并没有解决我的问题。

这是我的代码，

```
{{#each OtherRandomItems}}

  {{this}}

  {{lookup ../AnotherRandomItems @index}}

  {{#if (lookup ../RandomItems @index)}}
  // render items
  {{else}}
  // render empty
  {{/if}}

{{/each}} 
```

# excel - 用数组分配 Range 时出现 VBA 内存问题

> ID：10381834
> 
> 赞同：2
> 
> 时间：2012-04-30T10:06:34.477
> 
> 标签：excel, vba, memory, range, memory-leaks

我的目的是用二维变量数组的值分配一个 Excel 单元格范围。

分配工作正常，但我面临内存问题（泄漏）：当我启动 Excel 时，该过程需要或多或少 22 Mo 的 Ram。运行以下代码（创建新工作簿、分配范围、关闭工作簿而不保存）后，该过程占用 33 Mo 的 RAM。

有谁知道我做错了什么？

问候， 亚历山大

这里的代码

```
Option Explicit

Sub test()
   Dim nLines As Long
   Dim xSize As Long
   Dim j As Long
   Dim i As Long

   'Creating New Empty Workbook
   Application.Workbooks.Add
   Range("A1").Select

   Application.ScreenUpdating = False

   nLines = 10000
   xSize = 200

   Dim myRange As Range
   Dim myArray() As Variant

   ReDim myArray(1 To nLines, 1 To xSize)

   'Assigning some values
   For j = 1 To nLines:
       For i = 1 To xSize:
        myArray(j, i) = i * 4 / 3#
       Next i
   Next j

   Set myRange = Range(ActiveCell, ActiveCell.Offset(nLines - 1, xSize - 1))
   myRange .Value = myArray

   'Cleaning up
    Erase myArray
    Set myRange = Nothing

    'Closing workbook without saving
    Application.ActiveWorkbook.Close (False)

    Application.ScreenUpdating = True

End Sub 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-30T20:06:25.893

VBA isn't C, don't count on being able to control Excel's memory footprint in any way. Excel isn't great at memory management all on its own and often times the fact that you're running macros or what you're doing in those macros has little to no control on how much memory Excel decides to allocate, or whether it ever decides to free it up again.

That being said, there are a few things you can do in your code to try to reduce its mess.

1.  `Range("A1").Select`

    > It's generally bad practice to select cells before operating on them in Excel. The only time you need to select a cell is if you are illustrating something to the viewer of the macro. Furthermore, this code can actually cause a problem in certain versions of excel since you just added a workbook and it there's nothing to tell excel what workbook, and what worksheet from that workbook it should be selecting. You should remove this code altogether (it doesn't impact your logic anyway).

2.  `Set myRange = Range( ...`

    > This code isn't necessary since you're only performing one action with the range. You don't need to create the myRange variable at all, so you also don't have to worry about setting it to nothing, or more importantly - the fact that setting it to nothing doesn't actually accomplish anything memory-wise.

3.  `ActiveCell` and `Application.ActiveWorkbook`

    > Again, these unqualified references based on calls to 'Select' and the 'ActiveWorkbook' aren't explicit, and can cause unreliable behavior, especially if the user has other spreadsheets open in the same instance of excel. You're better off storing a reference to the workbook you added in the beginning.

All in all, I would change your code to this:

```
Sub test()
    Const nLines As Long = 10000, xSize As Long = 200
    Dim i As Long, j As Long
    Dim newWorkbook As Workbook

    Application.ScreenUpdating = False

    'Creating New Empty Workbook
    Set newWorkbook = Application.Workbooks.Add

    'Assigning some values
    Dim myArray(1 To nLines, 1 To xSize) As Double
    For j = 1 To nLines:
       For i = 1 To xSize:
        myArray(j, i) = i * 4 / 3#
       Next i
    Next j

    With newWorkbook.Sheets(1)
        .Range(.Cells(1, 1), .Cells(nLines - 1, xSize - 1)).Value = myArray
    End With

    'Closing workbook without saving
    newWorkbook.Close (False)

    'Cleaning up
    Erase myArray
    Set newWorkbook = Nothing

    Application.ScreenUpdating = True
End Sub 
```

**Closing remarks:**

VBA coding lessons aside - Note that the act of opening a new workbook will ask Excel to allocate a lot of new memory - way more than creating your temporary array. This is memory that is up to excel to free or keep around, even after you close the new workbook. There will be no getting around these kinds of increases. Note that the memory footprint of Excel isn't associated with just your current workbooks, it's the entire lifetime of the instance (which supports multiple workbooks), and their backups, optimized calculation trees, undo histories, etc. It really makes no sense to compare the footprint of a newly launched instance of excel to that of one that's just done 'a bunch of stuff'.

Also note that just because Excel doesn't decide to free that memory, it doesn't make it a leak. Excel might have allocated the memory in recyclable / reusable objects that will be repopulated with whatever next workbook you decide to open. Repeatedly rerunning the code may result in a small increase in memory each time, but Excel could just as well be tracking a certain amount of instance action history.

To (anecdotally) illustrate my point, here's the memory footprint of Excel (2007) upon opening a fresh instance, and running your code once, 9 more times, and then 40 more times after that.

![enter image description here](../Images/60611cf0871746feb0b7119e543cb06e.png)

It's not your code's fault, the onus is not on you to worry about it, and if your business users are worried about it, they shouldn't be choosing old versions of Excel as their target development platform.

# php - SSRS SDK 是否支持 SQL Server 2008（我的意思是非速成版）？

> ID：10381836
> 
> 赞同：1
> 
> 时间：2012-04-30T10:06:39.427
> 
> 标签：php, sql-server-2008, reporting-services, ssrs-2008

我参与部署 SSRS SDK ( [http://ssrsphp.codeplex.com](http://ssrsphp.codeplex.com) ) 以访问 Reporting Services 已有一段时间了。但是无论我遵循的任何教程、博客、工作示例都表明使用“SQL Server 2008 Express with Advanced Services edition”。是否仅在该版本中支持此 SDK。

目前我使用的是 SQL Server 2008（不是快速版）。到目前为止，我得到的只是：-

```
Failed to connect to Reporting Service
Make sure that the url (http://localhost:80/reportServer/) and credentials are correct! 
```

对于代码： -

```
<?php require_once 'SSRSReport.php';
try{
    $ssrs_report = new SSRSReport(new Credentials(UID, PASWD), SERVICE_URL);
}catch (SSRSReportException $serviceException){
    echo $serviceException->GetErrorMessage();
}?> 
```

虽然我已经在我的机器中正确设置了报告服务器，而且我的凭据也是正确的；但我无处可去。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-14T01:17:02.053

您还可以输入位于“:\Program Files\Microsoft SQL Server\MSRS11.MSSQLSERVER\Reporting Services\ReportServer”中的 rsreportserver.config 文件的身份验证类型。

```
<Authentication>
    <AuthenticationTypes>
        <RSWindowsNTLM/>
        <RSWindowsBasic/>
    <AuthenticationTypes>
<Authentication> 
```

[参考](http://msdn.microsoft.com/en-us/library/cc281309.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T13:12:22.437

有几件事可能发生。

可以直接通过 URL访问[http://localhost:80/reportServer/吗？](http://localhost:80/reportServer/)它会提示您输入用户\密码吗？您的 SSRS 实例是否称为默认实例？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T11:32:58.977

发现在企业版中使用SSRSPHP是完全可以的。当代码尝试查看 Web 服务 URL 是否正常时，此库一直抛出异常。请参阅从第 195 行开始的 SSRSReport.php 上的以下行：

```
$context = stream_context_create($stream_conext_params);
$content = @file_get_contents($executionServiceUrl, false, $context); 
if ($content === FALSE)
    {
        throw new SSRSReportException("",
                    "Failed to connect to Reporting Service  <br/> Make sure " .
                    "that the url ($this->_BaseUrl) and credentials are correct!");
    } 
```

您会看到“无法连接到报告服务...”的异常一直出现在我和其他人身上。这是无法修复的错误。我可以解释这一点，但现在不是正确的时间。只要让它像下面这样，工作就完成了。

```
$context = stream_context_create($stream_conext_params);
$content = @file_get_contents($executionServiceUrl, false, $context);
if ($content === FALSE)
{
    //throw new SSRSReportException("",
      //          "Failed to connect to Reporting Service  <br/> Make sure " .
       //        "that the url ($this->_BaseUrl) and credentials are correct!");
} 
```

它有效，真的！这一直对我有用。我希望你也一样。

# sql - Sage 200 - 计数器表而不是标识列 - 奇怪的行为

> ID：10381841
> 
> 赞同：3
> 
> 时间：2012-04-30T10:06:53.353
> 
> 标签：sql, database, tsql, database-design, sage-erp

我最近的任务是编写一个导入 Quantity Price Break Discounts 的 Sage 导入工具。

有问题的 Sage 200 表是：

*   **StockItem** - 主要产品表
*   **StockItemDiscount** - 主折扣表
*   **StockItemQtyDiscBreak** - 折扣数量价格中断

我不会用架构信息让你厌烦，因为它与我的问题无关，我只想说 - 所有 3 个表中的主键都是**没有**标识集的 BigInt（叹息），1 个 StockItem 可以有很多折扣，1 个折扣可以有很多 Qty Discount休息。

现在，要创建导入例程，我首先必须分析 Sage 200 在 SQL 上做了什么，如果您在 sage 中手动创建 Discount 和 Breaks（使用 SQL Profiler）。正如我所说，Sage 200 不使用标识列，而是使用计数器表。

将新行插入 StockItemDiscount 执行以下操作：

```
UPDATE [Counter] SET [NextValue] = [NextValue] + 10 WHERE [CounterID] = 1 
```

然后它选择新的 ID：

```
SELECT NextValue FROM Counter WHERE CounterID = 1 
```

然后它使用刚刚从计数器中选择的新值插入新行：

```
INSERT INTO StockItemDiscount (StockItemDiscountID, /.../) VALUES (@NewID, /.../) 
```

**我的问题是**：Sage到底为什么要这样做？背后的原因可能是什么？（特别是 +10 THEN 读取值）

所有表也共享相同的计数器，因此 1 个表中的 5 行会导致另一个表的 id 出现间隙 - 我真的不知道他们为什么这样做？

**我问的原因：**在插入一行后，`StockItemDiscount`我需要删除任何相关行`StockItemQtyDiscBreak`并插入替换 - 但是，使用 SQL 分析器我看不到计数器表的增量，除非我插入 5 个或更多折扣（第 6 个导致它命中再次查看计数器表，就好像 Sage UI 保留了这 10 个 ID，将它们用于各种插入，然后根据需要保留另外 10 个 - 这对我来说似乎很奇怪？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T12:43:36.253

Sage 没有将数据库设计为直接写入（在这种情况下他们不支持开发）。

Sage 有一个 SDK，使您能够通过对象写入数据库，这简化了编写例程以导入汇率或折扣等的过程。

要获得 SDK，需要成为经过认证的 Sage 开发人员，而这又涉及金钱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T21:05:55.983

理论#1：

他们在 N0 上插入，并保留 N1-N9 以供将来编辑？

理论#2：

他们使用 N0 作为父记录，并使用 N1-N9 作为子记录 ID？虽然你说所有 5 个表都使用相同的计数器和方法，所以这似乎不太可能。

**是否有使用 N1-N9 的行？**

理论#1a & #2a：

他们打算实现其中一个，并改变了主意，或者他们以前实现了这个，并离开了这个模型，但从未清理过他们的代码/方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-11T14:51:50.227

理论#4 开发人员故意试图混淆插入记录的逻辑，以防止没有经验的“开发人员”将数据写入他们的数据库，并使其更难以与数据库交互以保护他们的收入流.. I认为他们完全知道自己在做什么

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-03T14:29:47.547

Sage API 通过以 10 个为单位从 dbo.SYSCounter 中提取增量值来管理 ID。显然，他们认为以 1 为增量拉动太慢了。任何未使用的计数器都会在退出时转储。您可以安全地将 SYSCounter 向前推 xx 万，然后将这些 ID 用于您的任务。

不支持直接 SQL 编辑。如果您操纵 ID，任何查看审计线索的人都可以清楚地看到。建议使用 SDK 记录的 API。与您的 BP 或第 3 方开发人员交谈以获取更多信息。

# php - SELECT epoch timestamp 比我的变量大

> ID：10381842
> 
> 赞同：2
> 
> 时间：2012-04-30T10:06:54.010
> 
> 标签：php, sql, sqlite

为什么是这样

```
SELECT strftime('%s', timestamp,'localtime') from locationLog WHERE strftime('%s', timestamp,'localtime') > 999999999999999999 ORDER BY _id DESC 
```

当我的所有行在“时间戳”中的值都较低时，返回任何输出

在我的情况下，上面的查询返回

```
1334735588
1334735349
1334734317
1334734178
1334734172
and so on... 
```

它返回我的整张桌子。

如果我切换`>`到`<`它不会返回任何内容。

我想我正在尝试比较不同类型的变量或类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T10:38:26.680

猜测一下，您使用的是 32 位平台，并且您使用了大于 2147483647 的整数这一事实导致您遇到了[“2038 年问题”](http://en.wikipedia.org/wiki/Year_2038_problem)的变体。

尝试使用`2147483647`作为您在查询中比较的数字。

这将持续到 2038 年，届时您可能会将您的应用程序托管在 64 位平台上（或者到那时甚至可能是 128 位或 256 位！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T13:53:07.273

您正在将`text`值与`integer`值进行比较，因此 sqlite 将`integer`值转换为`text`，并进行字符串比较：

```
sqlite> select strftime('%s', '2002-02-02', 'localtime');
1012611600
sqlite> select typeof(strftime('%s', '2002-02-02', 'localtime'));
text
sqlite> select typeof(999999999999999999);
integer
sqlite> select strftime('%s', '2002-02-02', 'localtime') > 999999999999999999;
1
sqlite> select cast(strftime('%s', '2002-02-02', 'localtime') as integer) > 999999999999999999;
0 
```

如上所示，解决方法是将 的返回值强制`strftime`转换为某种数值类型。

# python - 从文本文档中读取信息

> ID：10381843
> 
> 赞同：0
> 
> 时间：2012-04-30T10:07:01.377
> 
> 标签：python, import

我刚开始编写一个应该创建、比较和加载文本文件条目的代码。该程序正在询问您的姓名、年龄和身高。然后它将创建一个文本文件，如下所示：

> 文森特，18,190

我已经让它工作了，但是一旦我关闭它，我就无法弄清楚如何将这些信息加载回 Python 中。我想调用`load`，然后它将加载所有文本文件条目并将它们显示为：

> 姓名：“姓名”
> 年龄：“年龄”
> 身高：“身高”

我可以这样做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T10:12:28.203

您可以像这样打开以前保存的文本文件

```
with open('myData.txt') as infp:
   for line in infp:
      # process line
      line = line.rstrip() 
```

（这也会为您关闭文件）

例如，如果您的文件中每行存储三个项目，您可以编写

```
 name, age, height = line.split(',') 
```

将值放入变量中（假设数据在最初存储时用逗号分隔，没有空格）。然后以您指定的格式生成输出：

```
 print 'Name:"%s"' %name
      print 'Age:"%s"' %age
      print 'Height:"%s"' %height 
```

正如@pepr 所指出的，取决于数据的存储方式（单词和逗号之间的空格），在生成的数据中可能存在前导/尾随空格，`split(',')`在这种情况下，有必要使用它`strip()`来消除任何额外的空格. 在显示的数据示例中，情况并非如此，上面的代码应该可以工作。

以下是将所有内容包装到一个函数中来执行此操作：

```
def load(datafile):

   with open(datafile) as infp:
      for line in infp:
         line = line.rstrip()
         name, age, height = line.split(',')
         print 'Name:"%s"' %name
         print 'Age:"%s"' %age
         print 'Height:"%s"' %height 
```

如果您的数据保存在名为“myData.txt”的文件中，请`load`像这样调用上述函数

```
load('myData.txt') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T10:12:28.963

```
data = open('file.txt').read().splitlines()
for line in data:
    person = line.split(',')
    print 'Name:', person[0]
    print 'Age:', person[1]
    print 'Height:', person[2] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T10:29:11.140

```
fil=open('file.txt','r')

for line in fil:                  # iterate through the file.txt line by line

  name,age,height=line.rstrip().split(',')     #now after this name='Vincent' and age='18' , height='190'

  print(name,age,height) 
```

**输出 ：**

```
vincent 18 190 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T10:31:12.653

另一种方法是使用标准 csv 模块将文件行读入像`['Vincent', '18', '190']`.

如果您希望将数字作为整数（即​​不作为字符串），则必须通过显式转换字符串`int(str_variable)`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T03:47:11.257

这对我有用

```
f = open('temp.txt', 'r')
for line in f.readlines():
     a,b,c = line.split(',')
     print "Name:%s\nAge:%s\nHeight:%s\n" % (a,b,c)
f.close() 
```

输出

```
Name:Vincent
Age:18
Size:190 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-30T10:39:33.540

保存文件后，使用它来阅读它：

```
import csv

filename = 'myfile.txt'

# the code that creates
# the file goes here

the_file = csv.reader(open(filename, 'rb'))
for line in the_file:
   # line[0] is Name
   # line[1] is Age
   # line[2] is Height 
```

# python - Qt 动画 - 使用 QPropertyAnimation 同时改变比例和位置

> ID：10381851
> 
> 赞同：0
> 
> 时间：2012-04-30T10:07:30.090
> 
> 标签：python, qt, animation, pyqt, pyside

我目前正在尝试在 QAnimation 框架的帮助下使用 Qt 构建幻灯片查看器。我在移动照片的同时更改照片的大小时遇到​​问题，因为在幻灯片中更改照片在移动时的大小似乎会影响其轨迹。

具体来说，我正在尝试为一组照片设置动画，使它们在窗口的水平中心线上从右到左连续移动，同时改变大小。基本上，它是一种“鱼眼”效果，当照片向窗口中心移动时会变大，然后在移开时缩小回原来的大小。

在任何给定时间，窗口只会显示 3 张照片（加上 1 张离开左侧窗口的照片）。假设从左到右排序的 3 张照片分别标记为 P1、P2、P3。考虑一张照片，最右边的照片 P3。随着 P3 从窗口右侧向中心移动，它的大小应逐渐增加并在窗口中心达到最大大小。随着它继续向左移动并最终退出窗口，它的大小应该减小回原来的值。

如果我只是移动照片而不调整它们的大小，我当前的实现是有效的。当同时移动和缩放图像时，照片不再在窗口中心水平移动。照片的大小似乎已正确缩放。

我当前的实现依赖于 QPropertyAnimation 类来执行动画。我正在使用 Python 和 Qt 的 PySide 绑定编写程序，但是 C++ 或 PyQt 代码中的解决方案很好。我只会将它们翻译成 Python 和 PySide。

相关代码如下：

```
def animate(self, items):
'''@params: items The photos to animate'''
    logging.debug('Creating %d animation objects', len(items))
    self.animationGroup.clear()
    for i, item in enumerate(items):
        self.animatePosition(item, i, len(items))
        self.animateScale(item, i)
    QTimer.singleShot(START_DELAY, self.animationGroup.start)    

def animatePosition(self, item, index, numItems):
    isLastItem = (index == numItems - 1)
    isFirstItem = (index == 0)

    posAnimation = QPropertyAnimation(item, 'position')
    posAnimation.setDuration(SLIDE_INTERVAL)
    posAnimation.setStartValue(item.pos())
# I've tried changing dh depending on the scale of the current image with limited success.
dh = 0 
    if isLastItem:
        posAnimation.setEndValue(item.pos() - QPointF(slideshow.RIGHT_MARGIN + slideshow.STANDARD_SLIDE_WIDTH, dh))
    elif isFirstItem:
        posAnimation.setEndValue(item.pos() - QPointF(slideshow.LEFT_MARGIN + slideshow.STANDARD_SLIDE_WIDTH, dh))
    else:
        posAnimation.setEndValue(item.pos() - QPointF(slideshow.IMAGE_GAP + slideshow.STANDARD_SLIDE_WIDTH, dh))
    posAnimation.setEasingCurve(QEasingCurve.OutExpo)
    self.animationGroup.addAnimation(posAnimation)

def animateScale(self, item, index):
    if self.animatedView is not None:
        scaleAnimation = QPropertyAnimation(item, 'slideScale')
        scaleAnimation.setDuration(SLIDE_INTERVAL)
        scaleAnimation.setStartValue(item.scale())
        endScale = self.getSlideScale(index - 1)
        scaleAnimation.setEndValue(endScale)
        scaleAnimation.setEasingCurve(QEasingCurve.OutExpo)
        self.animationGroup.addAnimation(scaleAnimation) 
```

我知道通常照片必须在应用缩放变换之前移回原点，然后移回其轨迹上的下一个位置。我怀疑用于缩放照片的 QPropertyAnimation 正在应用于翻译后的照片并因此影响其轨迹，但我可能是错的，因为我在过去 1-2 周才开始使用 Qt。

有谁知道我如何让 QPropertyAnimation 知道另一个动画正在发生？或者任何人都可以提出一种不同的方法（不一定涉及 QPropertyAnimation）来解决上述问题？

提前感谢任何回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T12:53:07.627

我假设您正在使用 QGraphicsView 框架（如果您发布了一个最小的、正在运行的示例程序，那么理解和调试您的问题会容易得多）。

~~我建议使用[QGraphicsWidgets](http://doc.qt.nokia.com/qgraphicswidget.html)并直接为其[“几何”属性](http://doc.qt.nokia.com/qgraphicswidget.html#geometry-prop)设置动画~~（编辑：我在这里错了，这不起作用）。

您需要在不使用两个 QPropertyAnimation 的情况下同时更改大小和位置。最简单的解决方案很可能是*继承*QVariantAnimation（甚至是 QVariantAnimation）并`updateCurrentValue()`适当地实现。我想我会插入一个 QRectF 从中提取位置和大小/比例，否则你当然可以插入一个浮点数（这意味着你将有更多的插值代码自己做，但它不必计算比例规模）。考虑将所需的比例编组为 QRectF 的大小（例如，通过`QSizeF(scale, scale)`给构造函数）。这有点骇人听闻，因为 QRectF 不再是/不是/所需的项目几何形状，但其他方面很简单并且效果很好（也适用于缓动曲线）。这是一个有用的片段：

```
class GeometryAnimation(QtCore.QVariantAnimation):
    def __init__(self, item, parent = None):
        QtCore.QVariantAnimation.__init__(self, parent)
        self._item = item

    def updateCurrentValue(self, value):
        self._item.setPos(value.topLeft())
        self._item.setScale(value.width()) 
```

为什么您当前的代码不起作用很难说，取决于“slideScale”属性的实现；如果转换相互作用（我认为这是不受欢迎的行为），那就是原因。

# zend-framework - Mysqli 准备错误：命令不同步；

> ID：10381852
> 
> 赞同：0
> 
> 时间：2012-04-30T10:07:31.653
> 
> 标签：zend-framework, stored-procedures

执行此代码时发生命令不同步错误。

```
foreach ($groupsId as $gpId) {

            $stmt = $db->query("CALL addUserToGroup(?,?)", array($userId, $gpId));
        $stmt->execute();

 } 
```

出现此错误

```
 Db_Statement_Mysqli_Exception' with message 'Mysqli prepare error: Commands out of sync; you can't run this command now' in /var/www/html/zend/Zend/Db/Statement/Mysqli.php:77 Stack trace: #0 
```

这是存储过程

```
DELIMITER //
 CREATE PROCEDURE addUserToGroup(IN groupId INT(11),IN userId INT(11) )

   BEGIN
        insert into `group_users`(`group_id`,`user_id`) values(groupId ,userId );
   END //

 DELIMITER ; 
```

我应该怎么办 ？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-08T15:02:02.753

像这样的东西

```
foreach ($groupsId as $gpId) {

    $stmt = $db->query("CALL addUserToGroup(?,?)", array($userId, $gpId));
    $result = $stmt->execute();
    //or $result = $query->fetchAll();
    $stmt->closeCursor();
} 
```

应该管用 ：）

# qt - 如何创建 QWidget 的屏幕截图？

> ID：10381854
> 
> 赞同：14
> 
> 时间：2012-04-30T10:07:39.113
> 
> 标签：qt, save, qwidget, qpixmap

我在 Qt Creator 中做作业，在那里我绘制到 QWidget，我需要保存这个 QWdiget 的一部分。

我试图解决这个问题：

```
 QPixmap pixmap;
 pixmap.copy(rectangle); // rectangle is part of QWidget, which I need to save
 pixmap.save("example.png"); 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-30T10:16:29.373

你可以用[`QWidget::render`](http://qt-project.org/doc/qt-4.8/qwidget.html#render)这个。假设`rectangle`是一个 QRect：

```
QPixmap pixmap(rectangle->size()); 
widget->render(&pixmap, QPoint(), QRegion(rectangle)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-11-29T12:12:35.557

来自[QWidget::Grab](http://doc.qt.io/qt-5/qwidget.html#grab)：

```
QPixmap QWidget::grab(const QRect &rectangle = QRect(QPoint(0, 0), QSize(-1, -1))) 
```

# batch-file - 用于更新所有文件的批处理文件 修改和访问的日期和时间

> ID：10381856
> 
> 赞同：0
> 
> 时间：2012-04-30T10:07:44.240
> 
> 标签：batch-file, dos

是否可以编写一个批处理文件，将修改和访问的日期/时间更新为今天的日期？我需要在计划任务中每晚对目录中的所有文件执行此操作。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T13:27:08.827

我用了

```
cd c:\MyFolder
copy c:\MyFolder,,+ 
```

# javascript - 是否可以在 javascript 中重写存储的 cookie 的值？

> ID：10381861
> 
> 赞同：1
> 
> 时间：2012-04-30T10:08:04.090
> 
> 标签：javascript, cookies

是否可以重写存储的 cookie 的值？如果是这样怎么做？

我的确切情况是，
我创建了一个带有一些**PATH**的 cookie （frm 用户，我可能不知道）。我必须在其他地方重写这个 cookie 的值。我可以创建一个具有相同名称的 cookie，但这里的问题是我不知道 PATH 值。

1.  要么我应该得到存储cookie的路径..
2.  否则，我应该重写现有的 cookie

任何帮助将是最受欢迎的谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T10:11:04.240

你可以这样保存cookie：

```
function setCookie(name, value, expires) {  
document.cookie = name + "=" + escape(value) + "; path=/" + ((expires == null) ? "" : "; expires=" + expires.toGMTString()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T11:42:08.633

来自[DOC](https://www.rfc-editor.org/rfc/rfc6265#page-10)

> 如果用户代理接收到一个新的 cookie，其 cookie 名称、域值和路径值与它已经存储的 cookie 相同，则现有 cookie 将被驱逐并替换为新 cookie。请注意，服务器可以通过向用户代理发送具有过去值的 Expires 属性的新 cookie 来删除 cookie。

所以，@Royi Namir 发布的是解决方案。因为除了重新设置它之外，没有特定的方法可以重写 cookie。

[请参阅SO](https://stackoverflow.com/questions/2802760/is-it-possible-to-get-a-stored-cookies-path)中有关获取存储的 cookie 的路径信息的答案

# c# - C#从圆边到圆边画线

> ID：10381863
> 
> 赞同：2
> 
> 时间：2012-04-30T10:08:08.753
> 
> 标签：c#, graphics

假设我有 2 分

```
Point p1 = new Pen(100, 100);
Point p2 = new Pen(200, 150); 
```

我为给定半径的那个点画椭圆，那个点在椭圆的中心。

```
int radius = 5;
RectangleF rectangle = new RectangleF();
rectangle.Width = radius  * 2;
rectangle.Height = radius  * 2;
rectangle.X = Convert.ToSingle(p1.X - radius);
rectangle.Y = Convert.ToSingle(p1.Y - radius);
g.FillEllipse(brush, rectangle);
rectangle.X = Convert.ToSingle(p2.X - radius);
rectangle.Y = Convert.ToSingle(p2.Y - radius);
g.FillEllipse(brush, rectangle);

g.DrawLine(pen, p1, p2); 
```

如果我在这些点之间画线，我会得到从一个中心到另一个中心的线。目前我可以忍受，但我想做，那条线从椭圆的边缘开始，所以它不会穿过它。我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T00:19:24.760

找到答案：

```
 public static PointF getPointOnCircle(PointF p1, PointF p2, Int32 radius)
    {
        PointF Pointref = PointF.Subtract(p2, new SizeF(p1));
        double degrees = Math.Atan2(Pointref.Y, Pointref.X);
        double cosx1 = Math.Cos(degrees);
        double siny1 = Math.Sin(degrees);

        double cosx2 = Math.Cos(degrees + Math.PI);
        double siny2 = Math.Sin(degrees + Math.PI);

        return new PointF((int)(cosx1 * (float)(radius) + (float)p1.X), (int)(siny1 * (float)(radius) + (float)p1.Y));
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T10:30:11.523

你有2个选择，

1）先画线，然后简单地用`FillEllipse`

2) 移动行的开始和结束位置。

要移动线位置，您需要：
**a** ) 计算中心之间的角度。 -如果使用实际椭圆而不是圆，
则为 Theta = tan-1(y2-y1/x2-x1) ： **b** ) 计算该角度的椭圆半径。 - 这是 r(Theta) = (x*y) / Sqrt(x*Cos(Theta)^2 + y*sin(Theta)^2) **c** ) 计算线的偏移量。 - 这是 x = rCos(Theta) 和 y = rSin(Theta)

# c# - 以编程方式创建本机 Outlook 分发列表

> ID：10381867
> 
> 赞同：0
> 
> 时间：2012-04-30T10:08:12.403
> 
> 标签：c#, exchange-server, file-format

如果我在 Outlook 中以“Outlook 格式”共享分发列表，则结果是一个 .msg 文件。双击此文件会在 Outlook 中打开分发列表窗口。

我有一个包含电子邮件联系人列表的应用程序，我的用户希望能够将此列表作为 Outlook 分发列表发送出去。

现在，我知道我可以将它导出为 .csv 文件，以便用户可以导入它，但这不是必需的。

那么，对于这个问题：有谁知道是否可以从第 3 方应用程序以正确格式生成此 .msg 文件以供 Outlook 使用？

如果它有任何重要或相关性，则该应用程序是 ASP.NET C# WebApplication

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T16:50:16.693

您可以为此使用扩展 MAPI（仅限 C++ 或 Delphi，使用 OpenIMsgOnIStg 等）并设置一堆命名属性。您还可以使用[Redemption](http://www.dimastr.com/redemption/)并使用 RDOSession.CreateMessageFromMsgFile 创建 MSG 文件：

```
 set Session = CreateObject("Redemption.RDOSession")
  set DL = Session.CreateMessageFromMsgFile("c:\temp\TestDL.Msg", "IPM.DistLIst", 1)
  DL.AddMemberEx "Joe The User", "user@test.demo", "SMTP"
  DL.Save 
```

# mysql - mysql选择查询中的错误

> ID：10381868
> 
> 赞同：0
> 
> 时间：2012-04-30T10:08:33.680
> 
> 标签：mysql, select

我从用户那里取一个名字来从页面 search.php 中搜索我的数据库。

```
<?php
 mysql_connect("localhost","root","");
mysql_select_db("amdsvcjdsvhck");
$re=$_GET['text'];

$sql="select sdf from contact where zip = '$re'";
$ess=mysql_query($sql);
$num=mysql_num_rows($ess);
for($i=0;$i<$num;$i++)
{$fow=mysql_fetch_assoc($ess);
echo '<div>'.$fow['zip'].'</div>' ; 
}
?> 
```

现在，当我在名称中传递单引号（'）或反斜杠（`\`）时，此页面出现错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T10:14:12.603

尝试：

```
$re=$_GET['text'];
$re = mysql_real_escape_string($re);
$sql="select sdf from contact where zip = '".$re."'"; 
```

# javascript - jQuery - 选择除特定孩子之外的类

> ID：10381873
> 
> 赞同：1
> 
> 时间：2012-04-30T10:08:53.210
> 
> 标签：javascript, jquery, select, except

我正在使用此处的照片滑块代码：http: [//tympanus.net/codrops/2010/10/07/slider-gallery/](http://tympanus.net/codrops/2010/10/07/slider-gallery/)并尝试对其进行修改，以便图像下方的链接在新窗口中加载。

例如：

```
<div class="content">
<div><a href="#"><img src="http://imageurl" alt="largeimageurl" /></a></div>
<div class="caption"><a target="_blank" href="image.php?id=someid&svc=somesvc" rel="nofollow">More Info</a></div>
</div> 
```

我已经用 javascript 文件尝试了各种不同的东西，该文件目前显示：

```
$fp_content_wrapper.find('.content').bind('click',function(e){
    var $current = $(this);
    //track the current one
    current = $current.index();
    //center and show this image
    //the second parameter set to true means we want to
    //display the picture after the image is centered on the screen
    centerImage($current,true,600);
    e.preventDefault();
    }); 
```

我需要做的是更改第一行，使其正常选择，但不对包含链接的标题 div 应用任何内容，使其行为正常。

我知道关于 SO 有类似的问题，但我已经尝试了大多数建议的问题。我根本没有太多的 JS 经验，所以很容易是我做错了。

感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T12:14:29.363

尝试这个：

```
$fp_content_wrapper.find('.content>*:not(.caption)').bind('click',function(e) ..... 
```

发生的事情是您正在选择内容标签，而不是您想要选择其中的内容，除了 .csption 类的任何内容。'>' 表示正下方的元素，'*' 表示全选。所以它的意思是“选择.content 正下方不是.caption 类的所有内容”。

如果您继续使用 jquery，那么研究选择器是值得的。

祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T10:11:43.947

尝试：

```
$fp_content_wrapper.find('.content:not(.caption)').bind("click", ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T10:42:41.543

试试这个詹姆斯

```
$fp_content_wrapper.find('.content').bind('click',function(e){     
   if(!$(this).attr('class'))   
   {
     var $current = $(this);     
     //track the current one     
     current = $current.index();     
     //center and show this image     
     //the second parameter set to true means we want to     
     //display the picture after the image is centered on the screen     
     centerImage($current,true,600);     
     e.preventDefault();  
   }
}); 
```

有一种更简洁的方法可以做到这一点，但这应该可以。这应该确保只有没有类的 div 运行该函数。如果要在另一个 div 上使用类，显然要小心或更改逻辑。

干杯

**编辑：**

再次查看代码后，您还可以测试 div 中的超链接以检查它是否具有`alt`属性或`alt`属性是什么。这将是一个更具体的测试。

# wordpress - pdf文件的Wordpress-URL重写

> ID：10381875
> 
> 赞同：0
> 
> 时间：2012-04-30T10:09:04.773
> 
> 标签：wordpress, .htaccess, url, url-rewriting

我试图解决我们的一个 wordpress 博客的问题。我们有一个 pdf 存储在网站的根目录中。

[www.mydomain.com/pdfs/mypdf.pdf](http://www.mydomain.com/pdfs/mypdf.pdf)

但是 wordpress 中指向该 pdf 的所有链接都有一些原因，我还不确定所有这些链接都是相对于当前的帖子/标签/类别等进行的

[www.mydomain.com/blog/mypost/pds/mypdf.pdf](http://www.mydomain.com/blog/mypost/pds/mypdf.pdf)

这导致了很多 404 错误。现在有几百页这样的页面，我真的不想手动浏览它们。我可以用 .htaccess 做些什么来解决这个问题吗？

提前致谢

艾伦

我现在有这个。

```
RewriteRule ^urlaub_cornwall_sonderangebote\.pdf$ "http\:\/\/www\.urlaubcornwall\.de\/pdf\/urlaub_cornwall_sonderangebote\.pdf" [R=301,L] 
```

尽管肯定启用了 url 重写，但它在我的本地机器上完成了这项工作，但在服务器上却没有。有什么提示吗？

需要将规则移到标准 wordpress 规则之上才能正常工作。现在一切都解决了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T11:38:49.087

我不确定您是否需要在此处重写 URL。有一个简单的解决方案 - 您可以尝试通过 MySQL 查询更新您的帖子表中的链接。MySQL 数据库有一个方便且简单的字符串函数`REPLACE()`，允许将匹配字符串 ( `from_string`) 的表数据替换为新字符串 ( `to_string`)。如果需要搜索和替换影响许多记录或行的文本字符串，例如更改公司名称、邮政编码、URL 或拼写错误，这将非常有用。

的语法`REPLACE`是`REPLACE(text_string, from_string, to_string)`.

[MySQL 参考](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_replace)将 REPLACE 描述为返回字符串的函数，`text_string`其中所有出现的字符串都`from_string`替换为 string ，其中在搜索时`to_string`匹配**区分大小写**`from_string`。`text_string`也可以从数据库表中的 a 字段中检索，如下所示：

```
UPDATE wp_posts SET post_content = REPLACE(post_content, 'www.mydomain.com/pdfs/mypdf.pdf', 'www.mydomain.com/blog/mypost/pds/mypdf.pdf') 
```

我假设您没有更改默认的 Wordpress 表名称，如果没有更改，只需在复制粘贴之前替换上述查询中的名称。

# php - 如何将数据发布到 Asana 而不是 GET？

> ID：10381877
> 
> 赞同：0
> 
> 时间：2012-04-30T10:09:18.407
> 
> 标签：php, curl, asana

我在 PHP 中使用 cURL 来访问 Asana API。

我很高兴将我的值作为 GET 附加到 URL，但现在，随着我的应用程序变大，我发布的数据越来越多，所以我一直在尝试将其转换为发布。

到目前为止，我已经尝试过：

```
setting post['data'] to a json object {key:value,key:value}
setting post['data'] to a json object {options:{key:value,key:value}}
setting post['data'] to a json object {data:{options:{key:value,key:value}}}
setting post['data'] to a json object {data:{key:value,key:value}}
setting post['body'] to all of the above json objects 
```

到目前为止，对于我的方法，我最终得到了错误：

```
Could not parse request data, invalid JSON 
```

当然，使用 cURL，我正在这样做：

```
$post = json_encode($myFields);
curl_setopt(CURLOPT_POSTFIELDS,array('data'=>$post)); 
```

对于所有这些测试，我将输出 JSON 并使用 JSLint 对其进行验证。这是非常有效的 JSON，所以问题绝对不是那个。我只需要知道为什么它无效。

我只是不能让它工作。感谢您的帮助-丹尼尔。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T08:45:55.603

我为 Asana API 制作了一个 PHP 类包装器。你可以在这里抓住它：[https ://github.com/ajimix/asana-api-php-class](https://github.com/ajimix/asana-api-php-class)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T10:33:13.233

尝试在 JSON 中编码所有数组，而不仅仅是“数据”部分：

```
$post = json_encode(array('data' => $myFields));
curl_setopt(CURLOPT_POSTFIELDS, $post); 
```

# jquery - Rails3 中的 Ajax 请求，无法正常工作

> ID：10381878
> 
> 赞同：1
> 
> 时间：2012-04-30T10:09:19.323
> 
> 标签：jquery, ruby-on-rails, ajax, ujs

我尝试使用 AJAX 重构我的项目。我有一个链接...

```
= link_to("Please work", "show_recent_chart", :remote => true) 
```

... 一个 xxx 控制器动作 ...

```
def show_recent_chart
  ...
  respond_to do |format|
    format.js
  end
end 
```

...和一个 show_recent_chart.js.erb 模板

```
alert("Done!"); 
```

单击链接后，我的日志文件说：

```
Started GET "/show_recent_chart" for 10.0.2.2 at 2012-04-30 05:56:43 -0400
Processing by XXXController#show_recent_chart as JS
MONGODB (0ms) 
  Rendered xxx/show_recent_chart.js.erb within layouts/application (0.4ms)
  Rendered shared/_header.slim (18.0ms)
  Rendered shared/_footer.slim (0.1ms)
Completed 200 OK in 8360ms (Views: 1276.0ms) 
```

所以看起来一切正常。但是 js.erb 模板中的 javascript 代码永远不会被执行。Firebug 只显示请求，但没有其他内容。

我怎样才能让它工作？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T06:12:26.577

最后我想通了。使用 firebug 我看到对我的 ajax 请求的响应是完整的 html 文档。我不得不使用

```
format.js { render :layout => false } 
```

做这项工作。

# c# - WP7 - 控制模板 - 未知异常

> ID：10381881
> 
> 赞同：0
> 
> 时间：2012-04-30T10:09:24.613
> 
> 标签：c#, .net, windows-phone-7, xaml

我正在阅读一本 wp7 的初学者书籍，并且在其中一个基本教程中我遇到了一个未知的异常。

应用程序资源（App.xaml）文件中定义的控制模板如下。

```
<Application.Resources>
    <Style x:Key="CustomButtonStyle" TargetType="Button">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate>
                    <Border Width="{TemplateBinding Width}" Height="{TemplateBinding Height}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}">
                        <StackPanel>
                            <Image Source="Images\image.png" Width="200" Height="300" />
                            <TextBlock Text="{TemplateBinding Content}" TextAlignment="Center" />
                        </StackPanel>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</Application.Resources> 
```

然后当我创建一个使用这个模板的按钮时，例如

```
<Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
            <Button x:Name="CustomButton" Width="250" Height="350" Content="Custom Button" Style="{StaticResource CustomButtonStyle}" />
        </Grid> 
```

我总是得到一个未知的异常。我已经把它缩小到

```
Text="{TemplateBinding Content}" 
```

但是控件模板中的属性，为什么会出现异常？我在那里有内容，它是字符串格式的。不知道还有什么可能？当我创建一个项目时，我的目标是 Windows Phone 7.1。有什么我不知道的变化吗？任何帮助表示赞赏。谢谢乔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T10:32:21.347

更改`<TextBlock Text="{TemplateBinding Content}" TextAlignment="Center" />` 为`<ContentPresenter HorizontalAlignment="Center" />`

```
 <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate>
                    <Border Width="{TemplateBinding Width}"
                            Height="{TemplateBinding Height}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}">
                        <StackPanel>
                            <Image Width="200"
                                   Height="300"
                                   Source="Images\image.png" />
                            <ContentPresenter HorizontalAlignment="Center" />
                        </StackPanel>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter> 
```

[关于 ContentControls 的一些细节](http://msdn.microsoft.com/en-us/library/dd334411%28v=vs.95%29.aspx)

# c# - C#：将电子邮件发送到个人邮件和群组邮件（不适用于群组邮件）

> ID：10381882
> 
> 赞同：0
> 
> 时间：2012-04-30T10:09:26.240
> 
> 标签：c#, .net, email

在 ASP.NET/C# 应用程序 (mvc3) 中，我希望能够发送邮件。

这是我正在使用的功能：

```
 public static void SendEmail(string fromEmail, string fromName, string toEmail, string toName, string subject, string emailBody, bool isBodyHtml, string[] attachments, string emailServer, int portNumber, string loginName, string loginPassword)
    {
        // setup email header
        System.Net.Mail.MailMessage mailMessage = new System.Net.Mail.MailMessage();

        // Set the message sender
        // sets the from address for this e-mail message.
        mailMessage.From = new System.Net.Mail.MailAddress(fromEmail, fromName);
        // Sets the address collection that contains the recipients of this e-mail message.
        string[] toEmailList = toEmail.Split(',');
        string[] toNameList = toName.Split(',');
        for (int i = 0;i<toEmailList.Length;++i) 
        {
            mailMessage.To.Add(new System.Net.Mail.MailAddress(toEmailList[i],toNameList[i]));
        }
      //  mailMessage.To.(new System.Net.Mail.MailAddress(toEmail, toName));

        // sets the message subject.
        mailMessage.Subject = subject;
        // sets the message body.
        mailMessage.Body = emailBody;
        // sets a value indicating whether the mail message body is in Html.
        // if this is false then ContentType of the Body content is "text/plain".
        mailMessage.IsBodyHtml = isBodyHtml;

        // add all the file attachments if we have any
        if (attachments != null && attachments.Length > 0)
            foreach (string _Attachment in attachments)
                mailMessage.Attachments.Add(new System.Net.Mail.Attachment(_Attachment));

        // SmtpClient Class Allows applications to send e-mail by using the Simple Mail Transfer Protocol (SMTP).
        System.Net.Mail.SmtpClient _SmtpClient = new System.Net.Mail.SmtpClient(emailServer);

        //Specifies how email messages are delivered. Here Email is sent through the network to an SMTP server.
        _SmtpClient.DeliveryMethod = System.Net.Mail.SmtpDeliveryMethod.Network;

        // Some SMTP server will require that you first authenticate against the server.
        // Provides credentials for password-based authentication schemes such as basic, digest, NTLM, and Kerberos authentication.
        System.Net.NetworkCredential _NetworkCredential = new System.Net.NetworkCredential(loginName, loginPassword);
        _SmtpClient.UseDefaultCredentials = false;

        _SmtpClient.Credentials = _NetworkCredential;
        _SmtpClient.Port = portNumber;
        //Let's send it
        try
        {
            _SmtpClient.Send(mailMessage);
            mailMessage.Dispose();
            _SmtpClient = null;
        }
        catch (Exception ex)
        {
            throw ex;
        }

    } 
```

一切都适用于个人电子邮件。

**问题是这样的：**

如果其中一个 TO 电子邮件（我要发送到的电子邮件）是组电子邮件，则它不会发送给它。

通过群组电子邮件，我的意思是附有多个联系人的电子邮件，当有人将其发送到该电子邮件时，他们都会收到该消息。

群组电子邮件示例

如果有人向 MyFamily@somedomain.com 发送电子邮件，我的所有家人都会收到它。

我怎样才能使它适用于所有类型的电子邮件，而不仅仅是个人电子邮件。

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T11:15:12.120

我的个人 Google Apps 域也有同样的问题。但问题出在群组电子邮件的配置中，而不是在 c# 代码中。

您是否检查了您对群组电子邮件的权限？您通常可以定义谁可以向该组电子邮件发送电子邮件。因此，您必须使用正确的电子邮件地址或重新配置权限。通常，该组的所有成员都可以向该组发送电子邮件。

# android - 如何在特定进度范围之外禁用搜索栏跟踪

> ID：10381884
> 
> 赞同：1
> 
> 时间：2012-04-30T10:09:33.803
> 
> 标签：android, seekbar

我有 SeekBar 可以跟踪一些下载进度。现在，当用户在当前进度之外点击搜索栏时，我想禁用搜索栏跟踪。

也就是说，如果我下载了 50% 的文件，我的搜索栏是半绿半空的（后半部分是空的）。我想防止用户在下半场的任何地方点击，但允许在上半场的任何地方点击

# c++ - 在 C++ 中使用 new 和 delete 在可变大小内存分配器中崩溃

> ID：10381885
> 
> 赞同：0
> 
> 时间：2012-04-30T10:09:34.647
> 
> 标签：c++

我正在编写一个工具可变大小的内存池，如下所示。

我没有这个的堆栈跟踪。通过逐步检查，我发现它在 Rational::deleteMemPool(); 中崩溃；

我不知道为什么会这样？欢迎任何意见。

谢谢！

// MemoryChunk 用于将不同大小的内存块串在一起，形成一个块序列。

```
class MemoryChunk {
public:
    MemoryChunk (MemoryChunk *nextChunk, size_t chunkSize);
    ~MemoryChunk() {delete mem; }

    inline void *alloc (size_t size);
    inline void free (void* someElement);

    // Pointer to next memory chunk on the list.
    MemoryChunk *nextMemChunk() {return next;}
    // How much space do we have left on this memory chunk?
    size_t spaceAvailable() { return chunkSize - bytesAlreadyAllocated; }

    // this is the default size of a single memory chunk.
    enum { DEFAULT_CHUNK_SIZE = 4096 };
private:

    // The MemoryChunk class is a cleaner version of NextOnFreeList. It separates the next pointer from
    // the actual memory used for the allocated object. It uses explicit next and mem pointers, with no 
    // need for casting.

    MemoryChunk *next;
    void *mem;

    // The size of a single memory chunk.
    size_t chunkSize;
    // This many bytes already allocated on the current memory chunk.
    size_t bytesAlreadyAllocated;
};

MemoryChunk::MemoryChunk(MemoryChunk *nextChunk, size_t reqSize) {
    chunkSize = (reqSize > DEFAULT_CHUNK_SIZE) ? reqSize : DEFAULT_CHUNK_SIZE;
    next = nextChunk;
    bytesAlreadyAllocated = 0;
    mem = new char [chunkSize];
}

void* MemoryChunk :: alloc (size_t requestSize) {
    void *addr = static_cast <void*> (static_cast <char*> (mem) + bytesAlreadyAllocated);
    bytesAlreadyAllocated += requestSize;
    return addr;
}

inline void MemoryChunk :: free (void *doomed) {}

class ByteMemoryPool {
public:
    ByteMemoryPool (size_t initSize = MemoryChunk::DEFAULT_CHUNK_SIZE);
    ~ByteMemoryPool ();

    // Allocate memory from private pool.
    inline void *alloc (size_t size);
    // Free memory previously allocated from the pool
    inline void free (void* someElement);
private:

    // A list of memory chunks. This is our private storage.
    MemoryChunk *listOfMemoryChunks;
    // Add one memory chunk to our private storage
    void expandStorage(size_t reqSize);
};

// Construct the ByteMemoryPool object. Build the private storage.
ByteMemoryPool :: ByteMemoryPool (size_t initSize) {
    expandStorage(initSize);
}

ByteMemoryPool :: ~ByteMemoryPool () {

    MemoryChunk *memChunk = listOfMemoryChunks;
    while (memChunk) {
        listOfMemoryChunks = memChunk->nextMemChunk();
        delete memChunk;
        memChunk = listOfMemoryChunks;
    }
}

void* ByteMemoryPool :: alloc (size_t requestSize) {
    size_t space = listOfMemoryChunks->spaceAvailable();
    if ( space < requestSize ) {
        expandStorage(requestSize);
    }   
    return listOfMemoryChunks->alloc(requestSize);
}

inline void ByteMemoryPool :: free (void *doomed) {
    listOfMemoryChunks->free(doomed);
}

void ByteMemoryPool :: expandStorage(size_t reqSize) {
    listOfMemoryChunks = new MemoryChunk(listOfMemoryChunks, reqSize);
}

class Rational {
public:
    Rational (int a = 0, int b = 1 ) : n(a), d(b) {}
    void *operator new(size_t size) {return memPool->alloc(size);}
    void operator delete(void *doomed,size_t size) {memPool->free(doomed);}

    static void newMemPool() { memPool = new ByteMemoryPool;}
    static void deleteMemPool() { delete memPool; }
private:
    int n; // Numerator
    int d; // Denominator
    static ByteMemoryPool *memPool;
};

ByteMemoryPool* Rational::memPool = 0;
int main(){

    Rational *array[1000];
    Rational::newMemPool();
    // Start timing here
    for (int j = 0; j < 1; j++) {
        for (int i = 0; i < 5; i++) {
            array[i] = new Rational(i);
        }

        for (int i = 0; i < 5; i++) {
            delete array[i];
        }
    }

    // Stop timing here
    Rational::deleteMemPool();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T10:22:00.357

next 和 nextChunk 似乎没有指向任何地方。同样在 MemoryChunk 的析构函数中，您需要一个数组删除。这是 10 的入门，除非我读错了代码。

# java - 康威的生命游戏 GUI

> ID：10381887
> 
> 赞同：4
> 
> 时间：2012-04-30T10:09:38.543
> 
> 标签：java, swing, jpanel, conways-game-of-life

我一直在为课程制作 Conway 的 GOL 副本，但在 GUI 呈现时遇到了问题。

快速概要：GUI 创建一个 Frame 和一个 mainPanel，设置为 BorderLayout。

一旦我实例化了 Grid 本身并将其分配给 mainPanel，它应该在 Grid 中显示我的 2D 数组，但它没有。在过去的 2 个小时里，我一直把头撞在墙上。

FWIW，我不能在此基础上使用 IDE 进行 GUI 构建。下面的代码：

**图形用户界面**

```
 import java.awt.*;
import java.awt.event.*;
import java.awt.Color;
import java.awt.GridBagLayout;
import java.awt.BorderLayout;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.border.*;
import java.util.Observer;
import java.util.Observable;

public class GameOfLifeGUI extends JFrame implements Observer {

    private JPanel mainPanel;
    private JPanel gridPanel;
    private JPanel startPanel;
    private JPanel titlePanel;
    private JButton start;
    private Cell cell;
    private Grid grid;
    private MouseEvent mouseClicked;
    private MouseEvent mouseDragged;
    private MouseEvent mousePressed;
    private MouseEvent mouseRelease;
    private MouseListener mouseListener;

    public GameOfLifeGUI() {
        super("");
        //Create Start Button for startPanel
        JButton start = new JButton("Start");

        //Creates a Grid to add to the panel
        grid = new Grid(75,75);

        //Create JPanels
        mainPanel = new JPanel();
        gridPanel = new JPanel();
        startPanel = new JPanel();
        titlePanel = new JPanel();

        /**
         * Add Grid to gridPanel
         * Modify Grid(int, int) to change size of Grid. Per spec, this grid should always be 75x75
         */

        //Create gridPanel
        gridPanel.setLayout(new GridLayout(75,75));
        gridPanel.setBackground(Color.WHITE);
        gridPanel.add(grid);

        //Set Layout of Panels
        mainPanel.setLayout(new BorderLayout());
        mainPanel.add(gridPanel, BorderLayout.CENTER);
        mainPanel.add(startPanel, BorderLayout.SOUTH);
        mainPanel.add(titlePanel, BorderLayout.NORTH);

        //Add Start Button to startPanel
        startPanel.add(start);

        //Creates a window for displaying the GUI
        this.setTitle("Conway's Game of Life");
        this.setSize(1000, 750);
        this.setLocationRelativeTo(null);
        this.add(mainPanel);
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        this.setVisible(true);

    }//end Constructor 
```

**网格**

```
import java.awt.*;
import javax.swing.*;
import java.awt.event.*;
import java.awt.Component;
import java.awt.Color;
import javax.swing.JPanel.*;
import java.util.Observer;
import java.util.Arrays;
import java.util.Observable;

public class Grid extends JPanel{

  private Cell[][] grid;
  private int column;
  private int row;

  /**
   * Constructs a Grid of Cells
   * columns is a column of cells
   * rows is a row of cells
   */

  public Grid(int column, int row){
    this.column = column;
    this.row = row;

    // create a grid of cells
    grid = new Cell[row][column];
    for (int r = 0; r < row; r++){
      for (int c = 0; c < column; c++){
        grid[r][c] = new Cell(r,c);
      }
    }
    //Creates a border of cells around grid for edge case handling
    //All cells in this border will be dead and incapable of living
    for (int c = 0; c < column; c++){
        grid[0][c] = new Cell(row, column);
    }
    for (int c = 0; c < column-1; c++){
        grid[row-1][c] = new Cell(row, column);
    }
    for (int r = 0; r < row; r++){
        grid[r][0] = new Cell(row, column);
    }
    for (int r = 0; r < row-1; r++){
        grid[r][column - 1] = new Cell(row, column);
    }
  }//end Constructor 
```

如果您需要更多信息，请告诉我 - 不想在我的第一篇文章中转储代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T19:47:39.243

Grid 类没有绘制组件的**方法**。使用 java 图形类中的 drawRect() 方法的简单嵌套 for 循环解决了该问题。

# regex - 用于验证字符串的正则表达式模式

> ID：10381904
> 
> 赞同：2
> 
> 时间：2012-04-30T10:10:47.513
> 
> 标签：regex

让我把我的问题简单化我想要的是我使用白名单正则表达式模式来避免 xss 和 sql 注入，因此我允许的字符串中的字符是 [A-Za-z0-9,()[]{}\"\: ./_\s] 并且我想限制 -- 在来自客户端的任何请求中的出现，但它应该允许 - 或 jjdfasd-dsfads-12321 字符串

简而言之，它下面的测试用例应该成功运行

```
import java.util.regex.Pattern;

public class RegExTest {

private static Pattern xssAttackPattern;

private static final String XSS_ATTACK_REGULAR_EXPRESSION1 = "-?[A-Za-z0-9,\\(\\)\\[\\]\\{\\}\"\\:./_\\s]*";

public static Pattern getXSSAttackPattern1() {
    xssAttackPattern = Pattern.compile(XSS_ATTACK_REGULAR_EXPRESSION1);
    return xssAttackPattern;
}

public static boolean hasXSSAttackOrSQLInjection1(String value) {

    if (getXSSAttackPattern1().matcher(value).matches()) {
        return true;
    }
    return false;
}

public static void main(String arg[]) {

    System.out.println(" :::::: Regular Expression ::::::");
    regexTest();

}

private static void regexTest() {

    String str1 = "-dsfdsfddsfd2112212s";
    String str2 = "--dsfdsfddsfd2112212s";
    String str3 = "-dsfdsfdd-sfd2112212s";
    String str4="http://rss.cnn.com/rss/edition_business.rss?id=121132511$@#$@$@#%242444+gfghgfhg";
    String str5="(.:[]{}";
    String str6="--";
    String str7="-";

    System.out.println("String::" + str1 + "::Result::"
            + hasXSSAttackOrSQLInjection1(str1));
    System.out.println("String::" + str2 + "::Result::"
            + hasXSSAttackOrSQLInjection1(str2));
    System.out.println("String::" + str3 + "::Result::"
            + hasXSSAttackOrSQLInjection1(str3));
    System.out.println("String::" + str4 + "::Result::"
            + hasXSSAttackOrSQLInjection1(str4));
    System.out.println("String::" + str5 + "::Result::"
            + hasXSSAttackOrSQLInjection1(str5));
    System.out.println("String::" + str6 + "::Result::"
            + hasXSSAttackOrSQLInjection1(str6));
    System.out.println("String::" + str7 + "::Result::"
            + hasXSSAttackOrSQLInjection1(str7));
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T10:22:10.000

您当前的正则表达式匹配

*   由单个`-`字符组成的字符串，或
*   由一系列字母、数字和一些特殊字符组成的字符串，或
*   一个空字符串

如果您想将其更改为`-`仅在字符串开头允许零个或一个破折号，请从表达式中删除*OR*字符`|`；如果您想在字符串中的任意位置最多匹配一个破折号，请将表达式更改为

```
[A-Za-z0-9,\\(\\)\\[\\]\\{\\}\"\\:./_\\s]*-?[A-Za-z0-9,\\(\\)\\[\\]\\{\\}\"\\:./_\\s]* 
```

**编辑 1：**如果您需要避免两个*连续*的破折号，您可以将此表达式与[否定的lookbehind](http://www.regular-expressions.info/lookaround.html)一起使用：

```
([A-Za-z0-9,\\(\\)\\[\\]\\{\\}\"\\:./_\\s]|(?<!-)-)* 
```

上面的`(?<!-)-`表达式部分匹配一个破折号，除非它前面有另一个破折号。

**编辑 2：**如果您有 10000+ 长度的字符串，则正则表达式解决方案不如负正则表达式解决方案好。与寻找相比，寻找并使用此表达式进行否定匹配`myString.matches(positiveExpr)`更有效。`!myString.matches(negativeExpr)`换句话说，您可以为不需要的字符串定义一个更简单的表达式，而不是指定定义所需字符串的表达式：

```
[^A-Za-z0-9,\\(\\)\\[\\]\\{\\}\"\\:./_\\s]|-- 
```

注意：清理字符串并不是避免 SQL 注入攻击的最佳方法；使用参数化语句是。

# hibernate - 在hibernate中构建会话工厂的困难

> ID：10381905
> 
> 赞同：1
> 
> 时间：2012-04-30T10:10:49.737
> 
> 标签：hibernate, gwt

我正在使用 gwt 和 hibernate 创建一个应用程序。这里我使用下面给出的代码来构建会话工厂：

```
 Configuration configuration = new Configuration();
    System.out.println("configuration: " + configuration);
    Configuration configur = configuration.configure("com/aro/hibernate.cfg.xml");
    java.util.Properties prop = configur.getProperties();
    System.out.println("prop "+prop);           
    System.out.println("configur: " + configur);
    SessionFactory sessFactory = configur.buildSessionFactory(); 
```

这里 sessFactory 在最后一行执行时抛出 NullPointerException 。异常堆栈跟踪如下：

```
Initializing App Engine server
Apr 30, 2012 12:43:43 PM com.google.apphosting.utils.jetty.JettyLogger info
INFO: Logging to JettyLogger(null) via com.google.apphosting.utils.jetty.JettyLogger
Apr 30, 2012 12:43:44 PM com.google.apphosting.utils.config.AppEngineWebXmlReader readAppEngineWebXml
INFO: Successfully processed E:\workSpace\abc2\war\WEB-INF/appengine-web.xml
Apr 30, 2012 12:43:44 PM com.google.apphosting.utils.config.AppEngineWebXmlReader readAppEngineWebXml
WARNING: appengine-web.xml does not contain a <threadsafe> element. This will become required in a future release.
See http://code.google.com/appengine/docs/java/config/appconfig.html#Using_Concurrent_Requests for more information.
You probably want to enable concurrent requests.
Apr 30, 2012 12:43:44 PM com.google.apphosting.utils.config.AbstractConfigXmlReader readConfigXml
INFO: Successfully processed E:\workSpace\abc2\war\WEB-INF/web.xml
Apr 30, 2012 6:13:45 PM com.google.appengine.tools.development.DevAppServerImpl start
INFO: The server is running at http://localhost:8888/
Apr 30, 2012 6:13:46 PM com.google.appengine.tools.development.DevAppServerImpl start
INFO: The admin console is running at http://localhost:8888/_ah/admin
40 [23163381@qtp-26726104-0] INFO org.hibernate.cfg.Environment - Hibernate 3.3.1.GA
46 [23163381@qtp-26726104-0] INFO org.hibernate.cfg.Environment - hibernate.properties not found
53 [23163381@qtp-26726104-0] INFO org.hibernate.cfg.Environment - Bytecode provider name : javassist
62 [23163381@qtp-26726104-0] INFO org.hibernate.cfg.Environment - using JDK 1.4 java.sql.Timestamp handling
configuration: org.hibernate.cfg.Configuration@11486aa
190 [23163381@qtp-26726104-0] INFO org.hibernate.cfg.Configuration - configuring from resource: /hibernate.cfg.xml
190 [23163381@qtp-26726104-0] INFO org.hibernate.cfg.Configuration - Configuration resource: /hibernate.cfg.xml
340 [23163381@qtp-26726104-0] INFO org.hibernate.cfg.Configuration - Reading mappings from resource : com/aro/client/Abc2Bean.hbm.xml
450 [23163381@qtp-26726104-0] INFO org.hibernate.cfg.HbmBinder - Mapping class: com.aro.client.Abc2Bean -> signup
478 [23163381@qtp-26726104-0] INFO org.hibernate.cfg.Configuration - Configured SessionFactory: null
prop {hibernate.connection.password=arosys123, java.runtime.name=Java(TM) SE Runtime Environment, sun.boot.library.path=C:\Program Files\Java\jre6\bin, java.vm.version=19.0-b09, hibernate.connection.username=root, java.vm.vendor=Sun Microsystems Inc., java.vendor.url=http://java.sun.com/, path.separator=;, java.vm.name=Java HotSpot(TM) Client VM, file.encoding.pkg=sun.io, java.util.logging.config.file=WEB-INF/logging.properties, user.country=US, sun.java.launcher=SUN_STANDARD, sun.os.patch.level=, com.google.appengine.application.id=no_app_id, java.vm.specification.name=Java Virtual Machine Specification, user.dir=E:\workSpace\abc2\war, java.runtime.version=1.6.0_23-b05, org.mortbay.log.class=com.google.apphosting.utils.jetty.JettyLogger, java.awt.graphicsenv=sun.awt.Win32GraphicsEnvironment, java.endorsed.dirs=C:\Program Files\Java\jre6\lib\endorsed, os.arch=x86, java.io.tmpdir=C:\Users\rahul\AppData\Local\Temp\, line.separator=
, java.vm.specification.vendor=Sun Microsystems Inc., user.variant=, os.name=Windows 7, devappserver-thread-23163381@qtp-26726104-0=true, prospectivesearch.autocommit=true, sun.jnu.encoding=Cp1252, java.library.path=C:\Program Files\Java\jre6\bin;.;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;C:/Program Files/Java/jre6/bin/client;C:/Program Files/Java/jre6/bin;C:/Program Files/Java/jre6/lib/i386;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;E:\eclipse;, com.google.appengine.runtime.version=1.6.4, java.specification.name=Java Platform API Specification, java.class.version=50.0, sun.management.compiler=HotSpot Client Compiler, os.version=6.1, datastore.default_high_rep_job_policy_unapplied_job_pct=50, com.google.appengine.application.version=1.1, user.home=C:\Users\rahul, java.security.policy==C:\Users\rahul\AppData\Local\Temp\test8925387590881978776.policy, user.timezone=Asia/Calcutta, java.awt.printerjob=sun.awt.windows.WPrinterJob, file.encoding=Cp1252, java.specification.version=1.6, hibernate.connection.driver_class=com.mysql.jdbc.Driver, com.google.appengine.runtime.environment=Development, java.class.path=E:\workSpace\abc2\src;E:\workSpace\abc2\test-classes;E:\workSpace\abc2\war\WEB-INF\classes;E:\eclipse\plugins\com.google.appengine.eclipse.sdkbundle_1.6.4.v201203300216r36\appengine-java-sdk-1.6.4\lib\shared\appengine-local-runtime-shared.jar;E:\eclipse\plugins\com.google.appengine.eclipse.sdkbundle_1.6.4.v201203300216r36\appengine-java-sdk-1.6.4\lib\shared\el-api.jar;E:\eclipse\plugins\com.google.appengine.eclipse.sdkbundle_1.6.4.v201203300216r36\appengine-java-sdk-1.6.4\lib\shared\jsp\repackaged-appengine-ant-1.7.1.jar;E:\eclipse\plugins\com.google.appengine.eclipse.sdkbundle_1.6.4.v201203300216r36\appengine-java-sdk-1.6.4\lib\shared\jsp\repackaged-appengine-ant-launcher-1.7.1.jar;E:\eclipse\plugins\com.google.appengine.eclipse.sdkbundle_1.6.4.v201203300216r36\appengine-java-sdk-1.6.4\lib\shared\jsp\repackaged-appengine-jasper-6.0.29.jar;E:\eclipse\plugins\com.google.appengine.eclipse.sdkbundle_1.6.4.v201203300216r36\appengine-java-sdk-1.6.4\lib\shared\jsp\repackaged-appengine-jasper-el-6.0.29.jar;E:\eclipse\plugins\com.google.appengine.eclipse.sdkbundle_1.6.4.v201203300216r36\appengine-java-sdk-1.6.4\lib\shared\jsp\repackaged-appengine-tomcat-juli-6.0.29.jar;E:\eclipse\plugins\com.google.appengine.eclipse.sdkbundle_1.6.4.v201203300216r36\appengine-java-sdk-1.6.4\lib\shared\jsp-api.jar;E:\eclipse\plugins\com.google.appengine.eclipse.sdkbundle_1.6.4.v201203300216r36\appengine-java-sdk-1.6.4\lib\shared\servlet-api.jar;E:\eclipse\plugins\com.google.appengine.eclipse.sdkbundle_1.6.4.v201203300216r36\appengine-java-sdk-1.6.4\lib\user\appengine-api-1.0-sdk-1.6.4.jar;E:\eclipse\plugins\com.google.appengine.eclipse.sdkbundle_1.6.4.v201203300216r36\appengine-java-sdk-1.6.4\lib\user\appengine-api-labs-1.6.4.jar;E:\eclipse\plugins\com.google.appengine.eclipse.sdkbundle_1.6.4.v201203300216r36\appengine-java-sdk-1.6.4\lib\user\appengine-jsr107cache-1.6.4.jar;E:\eclipse\plugins\com.google.appengine.eclipse.sdkbundle_1.6.4.v201203300216r36\appengine-java-sdk-1.6.4\lib\user\jsr107cache-1.1.jar;E:\eclipse\plugins\com.google.appengine.eclipse.sdkbundle_1.6.4.v201203300216r36\appengine-java-sdk-1.6.4\lib\user\orm\datanucleus-appengine-1.0.10.final.jar;E:\eclipse\plugins\com.google.appengine.eclipse.sdkbundle_1.6.4.v201203300216r36\appengine-java-sdk-1.6.4\lib\user\orm\datanucleus-core-1.1.5.jar;E:\eclipse\plugins\com.google.appengine.eclipse.sdkbundle_1.6.4.v201203300216r36\appengine-java-sdk-1.6.4\lib\user\orm\datanucleus-jpa-1.1.5.jar;E:\eclipse\plugins\com.google.appengine.eclipse.sdkbundle_1.6.4.v201203300216r36\appengine-java-sdk-1.6.4\lib\user\orm\geronimo-jpa_3.0_spec-1.1.1.jar;E:\eclipse\plugins\com.google.appengine.eclipse.sdkbundle_1.6.4.v201203300216r36\appengine-java-sdk-1.6.4\lib\user\orm\geronimo-jta_1.1_spec-1.1.1.jar;E:\eclipse\plugins\com.google.appengine.eclipse.sdkbundle_1.6.4.v201203300216r36\appengine-java-sdk-1.6.4\lib\user\orm\jdo2-api-2.3-eb.jar;E:\eclipse\plugins\com.google.appengine.eclipse.sdkbundle_1.6.4.v201203300216r36\appengine-java-sdk-1.6.4\lib\appengine-tools-api.jar;E:\eclipse\plugins\com.google.gwt.eclipse.sdkbundle_2.4.0.v201203300216-rel-r36\gwt-2.4.0\gwt-user.jar;E:\eclipse\plugins\com.google.gwt.eclipse.sdkbundle_2.4.0.v201203300216-rel-r36\gwt-2.4.0\gwt-dev.jar;E:\eclipse\plugins\com.google.gwt.eclipse.sdkbundle_2.4.0.v201203300216-rel-r36\gwt-2.4.0\validation-api-1.0.0.GA-sources.jar;E:\eclipse\plugins\com.google.gwt.eclipse.sdkbundle_2.4.0.v201203300216-rel-r36\gwt-2.4.0\validation-api-1.0.0.GA.jar;C:\Users\rahul\Desktop\projectJar\antlr-2.7.6.jar;C:\Users\rahul\Desktop\projectJar\commons-collections-2.1.1.jar;C:\Users\rahul\Desktop\projectJar\dom4j-1.6.1.jar;C:\Users\rahul\Desktop\projectJar\jta.jar;C:\Users\rahul\Desktop\projectJar\mysql-connector-java-5.1.7-bin.jar;C:\apache-tomcat-7.0.27\lib\annotations-api.jar;C:\apache-tomcat-7.0.27\lib\catalina-ant.jar;C:\apache-tomcat-7.0.27\lib\catalina-ha.jar;C:\apache-tomcat-7.0.27\lib\catalina-tribes.jar;C:\apache-tomcat-7.0.27\lib\catalina.jar;C:\apache-tomcat-7.0.27\lib\ecj-3.7.2.jar;C:\apache-tomcat-7.0.27\lib\el-api.jar;C:\apache-tomcat-7.0.27\lib\jasper-el.jar;C:\apache-tomcat-7.0.27\lib\jasper.jar;C:\apache-tomcat-7.0.27\lib\jsp-api.jar;C:\apache-tomcat-7.0.27\lib\servlet-api.jar;C:\apache-tomcat-7.0.27\lib\tomcat-api.jar;C:\apache-tomcat-7.0.27\lib\tomcat-coyote.jar;C:\apache-tomcat-7.0.27\lib\tomcat-dbcp.jar;C:\apache-tomcat-7.0.27\lib\tomcat-i18n-es.jar;C:\apache-tomcat-7.0.27\lib\tomcat-i18n-fr.jar;C:\apache-tomcat-7.0.27\lib\tomcat-i18n-ja.jar;C:\apache-tomcat-7.0.27\lib\tomcat-jdbc.jar;C:\apache-tomcat-7.0.27\lib\tomcat-util.jar;E:\workSpace\abc2\war\WEB-INF\lib\antlr-2.7.6.jar;E:\workSpace\abc2\war\WEB-INF\lib\appengine-api-1.0-sdk-1.6.4.jar;E:\workSpace\abc2\war\WEB-INF\lib\appengine-api-labs-1.6.4.jar;E:\workSpace\abc2\war\WEB-INF\lib\appengine-jsr107cache-1.6.4.jar;E:\workSpace\abc2\war\WEB-INF\lib\asm.jar;E:\workSpace\abc2\war\WEB-INF\lib\commons-collections-2.1.1.jar;E:\workSpace\abc2\war\WEB-INF\lib\datanucleus-appengine-1.0.10.final.jar;E:\workSpace\abc2\war\WEB-INF\lib\datanucleus-core-1.1.5.jar;E:\workSpace\abc2\war\WEB-INF\lib\datanucleus-jpa-1.1.5.jar;E:\workSpace\abc2\war\WEB-INF\lib\dom4j-1.6.1.jar;E:\workSpace\abc2\war\WEB-INF\lib\geronimo-jpa_3.0_spec-1.1.1.jar;E:\workSpace\abc2\war\WEB-INF\lib\geronimo-jta_1.1_spec-1.1.1.jar;E:\workSpace\abc2\war\WEB-INF\lib\gwt-servlet.jar;E:\workSpace\abc2\war\WEB-INF\lib\hibernate-core-3.3.1.GA.jar;E:\workSpace\abc2\war\WEB-INF\lib\javassist-3.9.0.GA.jar;E:\workSpace\abc2\war\WEB-INF\lib\jdo2-api-2.3-eb.jar;E:\workSpace\abc2\war\WEB-INF\lib\jsr107cache-1.1.jar;E:\workSpace\abc2\war\WEB-INF\lib\jta.jar;E:\workSpace\abc2\war\WEB-INF\lib\mysql-connector-java-5.1.7-bin.jar;E:\workSpace\abc2\war\WEB-INF\lib\slf4j-api-1.6.1-tests.jar;E:\workSpace\abc2\war\WEB-INF\lib\slf4j-simple-1.0.1.jar;E:\workSpace\abc2\war\WEB-INF\lib\slf4j.api-1.6.1.jar;C:\Users\rahul\Desktop\projectJar\javassist-3.9.0.GA.jar;C:\Users\rahul\Desktop\projectJar\asm.jar;C:\Users\rahul\Desktop\jarnew\ehcache-1.2.3.jar;C:\Users\rahul\Desktop\jarnew\ejb3-persistence.jar;C:\Users\rahul\Desktop\jarnew\hibernate3.jar;C:\Users\rahul\Desktop\jarnew\hibernate-tools.jar;C:\Users\rahul\Desktop\jarnew\jdbc2_0-stdext.jar;C:\Users\rahul\Desktop\jarnew\hibernate-annotations.jar;C:\Users\rahul\Desktop\jarnew\hibernate-commons-annotations.jar;C:\Users\rahul\Desktop\jarnew\hibernate-entitymanager.jar;C:\Users\rahul\Desktop\jarnew\commons-logging-1.1.jar;C:\Users\rahul\Desktop\jarnew\asm-attrs.jar;C:\Users\rahul\Desktop\jarnew\cglib-2.1.3.jar;C:\Users\rahul\Desktop\jarnew\commons-io-1.2.jar;E:\eclipse\plugins\com.google.appengine.eclipse.sdkbundle_1.6.4.v201203300216r36\appengine-java-sdk-1.6.4\lib\agent\appengine-agent.jar, user.name=rahul, hibernate.bytecode.use_reflection_optimizer=false, java.vm.specification.version=1.0, java.home=C:\Program Files\Java\jre6, sun.arch.data.model=32, hibernate.connection.url=jdbc:mysql://localhost:3306/test, hibernate.dialect=org.hibernate.dialect.MySQLDialect, user.language=en, java.specification.vendor=Sun Microsystems Inc., awt.toolkit=sun.awt.windows.WToolkit, java.vm.info=mixed mode, sharing, java.version=1.6.0_23, java.ext.dirs=C:\Program Files\Java\jre6\lib\ext;C:\Windows\Sun\Java\lib\ext, sun.boot.class.path=C:\Program Files\Java\jre6\lib\resources.jar;C:\Program Files\Java\jre6\lib\rt.jar;C:\Program Files\Java\jre6\lib\sunrsasign.jar;C:\Program Files\Java\jre6\lib\jsse.jar;C:\Program Files\Java\jre6\lib\jce.jar;C:\Program Files\Java\jre6\lib\charsets.jar;C:\Program Files\Java\jre6\lib\modules\jdk.boot.jar;C:\Program Files\Java\jre6\classes, java.vendor=Sun Microsystems Inc., file.separator=\, hibernate.hbm2ddl.auto=update, java.vendor.url.bug=http://java.sun.com/cgi-bin/bugreport.cgi, sun.io.unicode.encoding=UnicodeLittle, sun.cpu.endian=little, sun.desktop=windows, sun.cpu.isalist=pentium_pro+mmx pentium_pro pentium+mmx pentium i486 i386 i86}
configur: org.hibernate.cfg.Configuration@11486aa
Apr 30, 2012 6:13:59 PM com.google.appengine.tools.development.ApiProxyLocalImpl log
SEVERE: javax.servlet.ServletContext log: Exception while dispatching incoming RPC call
com.google.gwt.user.server.rpc.UnexpectedException: Service method 'public abstract java.lang.String com.aro.client.GreetingService.greetServer(java.lang.String)' threw an unexpected exception: java.lang.NullPointerException
    at com.google.gwt.user.server.rpc.RPC.encodeResponseForFailure(RPC.java:385)
    at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:588)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)
    at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:35)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:60)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:122)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:78)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:369)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:938)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:755)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)
Caused by: java.lang.NullPointerException
    at com.aro.server.GreetingServiceImpl.greetServer(GreetingServiceImpl.java:46)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.google.appengine.tools.development.agent.runtime.Runtime.invoke(Runtime.java:112)
    at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:569)
    ... 34 more 
```

那么我该如何解决这个问题。谢谢拉胡尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T10:16:21.087

尝试这样做：

```
 private static final SessionFactory sessionFactory = buildSessionFactory();

    private static SessionFactory buildSessionFactory() {
        try {
            // Create the SessionFactory from hibernate.cfg.xml
            return new Configuration().configure().buildSessionFactory();

        }
        catch (Throwable ex) {
            // Make sure you log the exception, as it might be swallowed
            System.err.println("Initial SessionFactory creation failed." + ex);
            throw new ExceptionInInitializerError(ex);
        }
    } 
```

并且您在 src 文件夹中的 hibernate.cfg.xml 应该是：

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-configuration PUBLIC
"-//Hibernate/Hibernate Configuration DTD 3.0//EN"
"http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd">

<hibernate-configuration>
<session-factory>
    <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
    <property name="hibernate.connection.url">jdbc:mysql://localhost:3306/tutorialDB</property>
    <property name="hibernate.connection.username">dummyuser</property>
    <property name="hibernate.connection.password">dummyuser</property>
    <property name="hibernate.hbm2ddl.auto">update</property> 
    <property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>
    <property name="show_sql">true</property>
    <mapping class="com.vanilla.entity.Student" />
</session-factory>
</hibernate-configuration> 
```

# html - 对齐 3 个 div。其中2个宽度固定宽度和第三个自动

> ID：10381906
> 
> 赞同：0
> 
> 时间：2012-04-30T10:11:01.967
> 
> 标签：html, css

我想对齐 3 个 div。其中两个具有固定宽度，右边一个具有自动宽度以填充右侧的空白空间。

有什么提示吗？

这是我的例子：

```
<div id="container" style="width:100%; background-color:Red;">
    <div id="left" style="width:100px; height:400px; background-color: yellow; float:left; display:inline-block">
    </div>        

    <div id="center" style="width:600px; height:400px; background-color: blue; float:none; display:inline-block">
    </div>    

    <div class="right" style=" height:400px; width:auto;background-color: green; float:right; display:inline-block">
    </div>    
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T10:16:16.343

你可以这样写：

**CSS：**

```
.fixed{
    height:40px;
    width:40px;
    float:left;
    background:green;
}

.fuild{
    overflow:hidden;
    height:40px;
    background:red;
}
div{
    border:1px solid yellow;
} 
```

**HTML**

```
<div class="fixed">1</div>
<div class="fixed">2</div>
<div class="fuild">3</div> 
```

检查这个[http://jsfiddle.net/AScBN/](http://jsfiddle.net/AScBN/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T10:19:08.303

**CSS**

```
#div-1, #div-2 {width:100px;float:left}
#div-3 {margin-left:200px} 
```

**HTML**

```
<div id="div-1"></div>
<div id="div-2"></div>
<div id="div-3"></div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-22T15:13:08.070

这仅在您希望第三个 div 具有固定位置的情况下才有效，但如果您希望第二个 div 具有流动性，则需要这样做。

**HTML**

```
<div class="left"></div>
<div class="center"></div>
<div class="right"></div> 
```

**CSS**

```
.left, .right {
float:left;
width: 100px;
}
.right {
float: right;
}
.center {
position: absolute;
left: 100px;
right: 100px;
} 
```

# ios - 如何在 PWM 中转换 iOS 核心运动

> ID：10381909
> 
> 赞同：2
> 
> 时间：2012-04-30T10:11:07.767
> 
> 标签：ios, pwm

我会使用我的 Iphone 加速度计和陀螺仪以及 Arduino。对于我的项目，我需要以 PWM“格式”向 arduino 代码提供有关 iphone 加速度计和陀螺仪（滚动、俯仰、偏航）的数据。我已经阅读了一些 iOS 文档，并且从 iOS 核心运动库中，我似乎只能访问运动数据的旋转矩阵、欧拉和四元数表示。您能建议我获得 PWM 值的解决方案吗？

最好的，

卢西奥

# cassandra - Cassandra 在单节点集群上比 HBase 快吗？

> ID：10381912
> 
> 赞同：2
> 
> 时间：2012-04-30T10:11:22.400
> 
> 标签：cassandra, hbase

我计划设计一个需要扩展到大量数据的系统。在其操作开始时，它将使用预算有限的小型数据集，因此它也必须在小型数据集上运行良好。

据我所知，HBase 在小型数据集上效果不佳，它至少需要一个 5 节点集群。但目前这种配置很昂贵。我知道 HBase 和 Cassandra 对于大型数据集都是很好的解决方案。但是 Cassandra 在具有小数据集的单个节点上更快吗？

我假设 Cassandra 在小型数据集上没有问题，因为所有节点都是基于 P2P 系统的相同的。这个对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T02:31:22.977

Cassandra 和 hbase 具有不同的性能特征，虽然它们都擅长一些问题，但您可能应该选择最适合您的应用程序的数据库，而不是数据库对小型数据集的性能。

不太了解您的问题，我可能会从一个简单的 sql 数据库开始，并在需要时担心扩展。

您可以在单个节点上运行 cassandra，它会正常工作。

我怀疑您可以在单个物理机器上使用多个 vm 运行 hbase。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T19:27:39.480

您也可以使用单节点 Hbase。无论如何请记住，单节点 Hbase/Cassandra 在性能上无法与多个节点相媲美，因为您没有复制。

# objective-c - 如何防止 NSTimer 多次调用我的选择器函数？

> ID：10381916
> 
> 赞同：0
> 
> 时间：2012-04-30T10:11:35.460
> 
> 标签：objective-c, ios, nstimer

我的计时器从`viewDidLoad`. 计时器第一次调用选择器时，预期的结果很好。但是逐渐地，当进行调用时，选择器会以某种方式多次调用该函数。我记录了一个`NSLog`显示输出数量正在增加的结果。我有下面的代码。希望它使情况清楚。

```
-(void)viewDidLoad
{
    remainingTicks = 10;
    [self updateLabel];
    myTimer = [NSTimer scheduledTimerWithTimeInterval:1.0
                       target:self
                       selector:@selector(handleTimerTick)
                       userInfo:nil
                       repeats:YES];
}

-(void)handleTimerTick
{
    remainingTicks--;
    [self updateLabel];
    if (remainingTicks <= 0) {
        [myTimer invalidate];
        myTimer = nil;
        UIButton *but = [[UIButton alloc] init];
        if (answerAt == 0) {
            [buttonA setBackgroundColor:[UIColor greenColor]];
        }
        else if (answerAt == 1) {
            [buttonB setBackgroundColor:[UIColor greenColor]];
        }
        else if (answerAt == 2) {
            [buttonC setBackgroundColor:[UIColor greenColor]];
        }
        else {
            [buttonD setBackgroundColor:[UIColor greenColor]];
        }

        [self performSelector:@selector(next:) withObject:but afterDelay:1.5 ];       
    }
}

-(void)updateLabel
{
    timerLabel.text = [[NSNumber numberWithUnsignedInt: remainingTicks] stringValue];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T21:02:14.160

`ViewDidLoad`可以在 a 的生命周期内多次调用`UIViewController`（例如，如果您收到内存警告并且您的视图不可见，控制器将释放它并在下次需要时重新加载它）。要正确处理此行为，您应该：

A）在创建定时器之前测试定时器是否存在（例如`if (myTimer == nil) { /* initialize the timer */ }`）

或者

B) Clear the timer in your `viewDidUnload` method. (This is probably more along the lines of what you want since you most likely don't want the timer to fire events related to an invisible view).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-10T22:10:47.543

Set the target for the NSTimer to be a weak self variable, like this:

```
__weak Object *weakSelf = self;
[NSTimer scheduledTimerWithTimeInterval:5.f target:weakSelf selector:@selector(actionMethod) userInfo:nil repeats:YES]; 
```

That will prevent the action being called multiple times.

# c++ - 如何为弹出菜单的子菜单设置延迟？

> ID：10381918
> 
> 赞同：1
> 
> 时间：2012-04-30T10:11:40.703
> 
> 标签：c++, qt4

我有一个带有子菜单的上下文菜单。当主菜单失去焦点时，子菜单会突然隐藏。我希望在主菜单失去焦点后显示子菜单几秒钟。我怎样才能做到这一点？

# c++ - 将数组转换为函数返回中的指针

> ID：10381921
> 
> 赞同：0
> 
> 时间：2012-04-30T10:11:47.343
> 
> 标签：c++, function, pointers, return

我遇到了关于 C++ 中指针的问题。代码是：

```
int * initArray() {
    int a [2];

    a[0] = 1;
    a[1] = 2;
    return a;
}

int main () {
    int * b = initArray();

    cout << b << "---" << *(b) << endl;
    cout << b + 1<< "---" << *(b + 1) << endl;
} 
```

输出是

```
0021FC20---1
0021FC24---1431629120 
```

您可以看到该值是错误的。

当我尝试将`init`数组代码放入主函数时，它运行正常。

你能告诉我的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T10:14:42.147

`initArray`正在返回函数返回后不再存在的本地数组的地址。这是一种未定义的行为。

要使变量`a`即使在函数返回时也保持不变，您可以：

*   将其声明为`static`
*   使其全球化
*   动态分配

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T10:19:08.247

实现您想要做的事情的解决方案是：

```
int * initArray() {
    int* a = new int[2];

    a[0] = 1;
    a[1] = 2;
    return a;
} 
```

由于内存是手动分配的，所以会持久化，构造应该是有效的。是的，在您的情况下，内存是自动分配的，并在函数结束时被删除，导致未定义的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T10:16:09.730

a 是 initArray 方法的局部变量。一旦方法返回，a就不再有效，所以initArray返回的指针也不再有效。

您需要在 main 方法中分配数组，然后将指针传递给 initArray 方法：

```
void initArray(int *a) {
    a[0] = 1;
    a[1] = 2;
}

int main () {
    int b[2];
    initArray(b);

    cout << b << "---" << *(b) << endl;
    cout << b + 1<< "---" << *(b + 1) << endl;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T10:14:57.390

您的数组`int a[2]`是一个本地数组，它在函数存在时被释放。

# c++ - 高效的浮点比较 (Cortex-A8)

> ID：10381927
> 
> 赞同：6
> 
> 时间：2012-04-30T10:12:25.130
> 
> 标签：c++, c, neon, cortex-a8, arm7

有一个很大的（~100 000）**浮点**变量数组，并且有一个阈值（也是**浮点数**）。

问题是我必须将数组中的每个变量与阈值进行比较，但是 NEON 标志传输需要很长时间（根据分析器，大约 20 个周期）。

有什么有效的方法来比较这些值吗？

**注意：**由于舍入误差无关紧要，我尝试了以下方法：

```
float arr[10000];
float threshold; 
....

int a = arr[20]; // e.g.
int t = threshold;
if (t > a) {....} 
```

但在这种情况下，我得到以下处理器命令序列：

```
vldr.32        s0, [r0]
vcvt.s32.f32   s0, s0
vmov           r0, s0    <--- takes 20 cycles as `vmrs APSR_nzcv, fpscr` in case of 
cmp            r0, r1         floating point comparison 
```

当转换发生在 NEON 时，无论我是通过描述的方式还是浮点数来比较整数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T11:24:52.617

如果浮点数是 32 位 IEEE-754 而整数也是 32 位，并且如果没有 +infinity、-infinity 和`NaN`值，我们可以通过一个小技巧将浮点数与整数进行比较：

```
#include <stdio.h>
#include <limits.h>
#include <assert.h>

#define C_ASSERT(expr) extern char CAssertExtern[(expr)?1:-1]
C_ASSERT(sizeof(int) == sizeof(float));
C_ASSERT(sizeof(int) * CHAR_BIT == 32);

int isGreater(float* f1, float* f2)
{
  int i1, i2, t1, t2;

  i1 = *(int*)f1;
  i2 = *(int*)f2;

  t1 = i1 >> 31;
  i1 = (i1 ^ t1) + (t1 & 0x80000001);

  t2 = i2 >> 31;
  i2 = (i2 ^ t2) + (t2 & 0x80000001);

  return i1 > i2;
}

int main(void)
{
  float arr[9] = { -3, -2, -1.5, -1, 0, 1, 1.5, 2, 3 };
  float thr;
  int i;

  // Make sure floats are 32-bit IEE754 and
  // reinterpreted as integers as we want/expect
  {
    static const float testf = 8873283.0f;
    unsigned testi = *(unsigned*)&testf;
    assert(testi == 0x4B076543);
  }

  thr = -1.5;
  for (i = 0; i < 9; i++)
  {
    printf("%f %s %f\n", arr[i], "<=\0> " + 3*isGreater(&arr[i], &thr), thr);
  }

  thr = 1.5;
  for (i = 0; i < 9; i++)
  {
    printf("%f %s %f\n", arr[i], "<=\0> " + 3*isGreater(&arr[i], &thr), thr);
  }

  return 0;
} 
```

输出：

```
-3.000000 <= -1.500000
-2.000000 <= -1.500000
-1.500000 <= -1.500000
-1.000000 >  -1.500000
0.000000 >  -1.500000
1.000000 >  -1.500000
1.500000 >  -1.500000
2.000000 >  -1.500000
3.000000 >  -1.500000
-3.000000 <= 1.500000
-2.000000 <= 1.500000
-1.500000 <= 1.500000
-1.000000 <= 1.500000
0.000000 <= 1.500000
1.000000 <= 1.500000
1.500000 <= 1.500000
2.000000 >  1.500000
3.000000 >  1.500000 
```

当然，`isGreater()`如果您的阈值没有改变，那么预先计算比较运算符中使用的最终整数值是有意义的。

如果您害怕上述代码中 C/C++ 中未定义的行为，您可以在汇编中重写代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T10:31:23.377

如果您的数据是浮点数，那么您应该与浮点数进行比较，例如

```
float arr[10000];
float threshold;
....

float a = arr[20]; // e.g.
if (threshold > a) {....} 
```

否则您将进行昂贵的浮点整数转换。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T07:49:02.103

您的示例显示了编译器生成的代码有多糟糕：

它使用 NEON 加载一个值，只是为了将其转换为 int，然后执行 NEON->ARM 传输，这会导致管道刷新，从而浪费 11~14 个周期。

最好的解决方案是完全手工组装编写函数。

但是，有一个简单的技巧可以在不进行类型转换和截断的情况下进行快速浮点比较：

阈值为正（与 int 比较一样快）：

```
void example(float * pSrc, float threshold, unsigned int count)
{
  typedef union {
    int ival,
    unsigned int uval,
    float fval
  } unitype;

  unitype v, t;
  if (count==0) return;
  t.fval = threshold;
  do {
    v.fval = *pSrc++;
    if (v.ival < t.ival) {
      // your code here
    }
    else {
      // your code here (optional)
    }
  } while (--count);
} 
```

阈值为负（每个值比 int 比较多 1 个周期）：

```
void example(float * pSrc, float threshold, unsigned int count)
{
  typedef union {
    int ival,
    unsigned int uval,
    float fval
  } unitype;

  unitype v, t, temp;
  if (count==0) return;
  t.fval = threshold;
  t.uval &= 0x7fffffff;
  do {
    v.fval = *pSrc++;
    temp.uval = v.uval ^ 0x80000000;
    if (temp.ival >= t.ival) {
      // your code here
    }
    else {
      // your code here (optional)
    }
  } while (--count);
} 
```

我认为它比上面接受的要快得多。再说一次，我有点晚了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T10:30:40.287

如果舍入错误无关紧要，那么您应该使用[std::lrint](http://en.cppreference.com/w/cpp/numeric/math/rint)。

[Faster Floating Point to Integer Conversions](http://www.mega-nerd.com/FPcast/)建议将其用于浮点到 int 的转换。

# c# - asp.net c#中字符文字中的字符太多

> ID：10381931
> 
> 赞同：2
> 
> 时间：2012-04-30T10:12:34.037
> 
> 标签：c#, javascript, asp.net, html

面临的困难： **我正在寻找 asp.net-c 中聊天应用程序的弹出窗口#**

```
 protected void Page_Load(object sender, EventArgs e)
     {
         System.Text.StringBuilder sb = new System.Text.StringBuilder(); 
         sb.Append("<script language='javascript'>function Open() {"); 
         sb.Append(string.Format("window.open('Chat.aspx?rid={0}'",lstRooms.SelectedValue));
         sb.Append(, 'newwindow','toolbar=no,location=no,menubar=no,width=290,height=330,resizable=no,scrollbars=no,top=350,left=980,right=500'");return false;"); 
         sb.Append("}</script>"); 
```

这是

```
 if (!ClientScript.IsClientScriptBlockRegistered("JSScriptBlock")) 
    {
            ClientScript.RegisterClientScriptBlock(this.GetType(), "JSScriptBlock", sb.ToString()); 
    }

    if (!ClientScript.IsClientScriptBlockRegistered("JSScriptBlock")) 
    {
            ClientScript.RegisterClientScriptBlock(this.GetType(), "JSScriptBlock", sb.ToString()); 
    } 
```

我收到错误...**字符文字中的字符太多**...在这一行

```
sb.Append(, 'newwindow','toolbar=no,location=no,menubar=no,width=290,height=330,resizable=no,scrollbars=no,top=350,left=980,right=500'");return false;"); 
```

谢谢指导

我如上所述更新了我的问题....请帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T10:50:10.573

在这里，您可以找到一个非常简单且不错的使用 asp.net 和 ajax 弹出窗口的教程：

[http://www.asp.net/web-forms/tutorials/ajax-control-toolkit/modalpopup/launching-a-modal-popup-window-from-server-code-cs](http://www.asp.net/web-forms/tutorials/ajax-control-toolkit/modalpopup/launching-a-modal-popup-window-from-server-code-cs)

希望它可以帮助你。

问候

**更新：**

此代码经过测试并且工作正常：

HTML：

```
<asp:Button ID="Button1" runat="server" OnClientClick="JavaScript:Open()" Text="Button" /> 
```

C＃

```
 protected void Page_Load(object sender, EventArgs e)
        {
            System.Text.StringBuilder sb = new System.Text.StringBuilder();
            sb.Append("<script language='javascript'>function Open() {");
            sb.Append(string.Format("window.open('Chat.aspx?rid={0}'", lstRooms.selectedvalue));
            sb.Append(", 'newwindow','toolbar=no,location=no,menubar=no,width=290,height=330,resizable=no,scrollbars=no,top=350,left=980,right=500');return false;");
            sb.Append("}</script>");

            if (!ClientScript.IsClientScriptBlockRegistered("JSScriptBlock"))
            {
                ClientScript.RegisterClientScriptBlock(this.GetType(), "JSScriptBlock", sb.ToString());
            }
        } 
```

当然，您必须将 OnClick 属性添加到您的 html 按钮并指向 Open() 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T07:59:25.047

错误消息指向一个特定的错误：在 C# 中，您需要将字符串括在双引号中。单引号用于表示单个字符。

```
string mystring = "This is a test";
Console.WriteLine(mystring[0] == 'T'); // prints "True" 
```

根据编译器，您尝试将字符串括在单引号中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-03T09:19:24.127

在链接样式表/javascript/jquery 时，请避免在标签内使用 runat="server"。

如果我们包含 runat="server"。它也可能导致上述错误。

# .net - Web 服务客户端从服务器引用 DLL

> ID：10381933
> 
> 赞同：1
> 
> 时间：2012-04-30T10:12:45.770
> 
> 标签：.net, web-services, serialization, dll-reference

我有一个输出 JSON 序列化字符串对象的 Web 服务。这只是一个具有简单属性的简单对象。我真的希望服务的消费者能够反序列化对象，以便拥有完整的对象以便在他们的项目中轻松使用。

我的问题是，我的客户是否可以从他们的项目中引用我网站上的 DLL（我可能会偶尔更新以提供更多属性），以便他们始终拥有最新版本的 DLL？还是我唯一的选择是为所有客户端 Web 服务用户分发一个轻量级 DLL，只包含他们需要的对象？问题是，使用这种方法，如果我更新 Web 服务上的对象，那么所有使用该服务的客户端都会失败，直到他们从我这里更新 DLL。

任何其他选项或解决方案，还是我错过了一些完全明显的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T10:21:59.440

SOA 背后更重要的思想之一是解耦。这与您尝试做的相反 - 您将客户与您的服务紧密耦合。尽量避免这样做。

无论如何，如果您将 SOAP 与 WCF 一起使用，那么执行此操作将是微不足道的。我不知道您可以将“重用类型”与基于 JSON 的服务一起使用。

你当然*不能*用 ASMX 服务做到这一点。

# php - 使用 cakephp 将亚马逊 s3 帐户中的文件下载到另一个 s3 帐户

> ID：10381934
> 
> 赞同：0
> 
> 时间：2012-04-30T10:12:50.123
> 
> 标签：php, cakephp, amazon-s3

我在亚马逊上托管了我的网站。我希望我的客户允许以下功能。

用户将其 s3 帐户的有效凭据和文件路径输入到我的网站。我的网站将该文件在用户的 amazon s3 帐户位置下载到我的 amazon s3 帐户。我需要使用 cake php 1.2 来执行此操作，并且这些文件大部分时间都可能超过 10GB。他们有什么推荐的方法吗？我谷歌这个，还没有找到好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T20:02:27.270

我会看看 AWS PHP SDK。您可以将 sdk 作为供应商库包含在 cakephp 中。

[http://aws.amazon.com/sdkforphp/](http://aws.amazon.com/sdkforphp/)

更具体地说，它们具有允许您将文件从一个存储桶复制到另一个存储桶的功能。

[http://docs.amazonwebservices.com/AWSSDKforPHP/latest/#m=AmazonS3/copy_object](http://docs.amazonwebservices.com/AWSSDKforPHP/latest/#m=AmazonS3/copy_object)

# asp.net - 如何在ext.Net中设置视口的宽度和高度

> ID：10381935
> 
> 赞同：0
> 
> 时间：2012-04-30T10:12:55.393
> 
> 标签：asp.net, viewport, ext.net

我正在使用 Ext.Net1.0。**我正在使用 ext:Desktop 和 ext:Viewport**我 想在屏幕上调整我的页面，无论分辨率如何，并且不允许缩放。如何在 Ext.Net 中适合我的页面？

![在此处输入图像描述](../Images/2492d37c9e7f6d1e0575d651f484bb8a.png)

我的桌面和视图看起来像上面的图像。在一个窗口中，我采用了视口并为其提供了北方和中心布局。

在中心，我取了一个面板，再取 2 个半宽度的面板。像显示器中的左面板和右面板。

但是在所有面板中，**我都明确地为我的所有面板指定了宽度和高度**（比如外部面板的宽度为 1000，因此内部 2 面板的宽度为 500），这样它就不会相应地设置我的屏幕布局。那我该怎么办？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:18:54.113

您可能希望在视口上设置“fitlayout”以使其适合窗口，然后在其中使用“ext:columnlayout”组件将内部部分一分为二

# asp.net-mvc - 可以浏览 DataAnnotations 的自定义 Html 助手

> ID：10381939
> 
> 赞同：11
> 
> 时间：2012-04-30T10:13:01.443
> 
> 标签：asp.net-mvc, data-annotations, modelmetadata

说我有这样的模型

```
public class User
{
    [Required]
    [StringLength(14, ErrorMessage = "Can only be 14 characters long")]
    public string UserName;

} 
```

我想创建一个这样的 Html 助手：

```
@Html.ValidatableEditorFor(m => m.UserName) 
```

以便它吐出一个具有正确格式的文本字段，以便 jQuery Vaidation 插件能够验证，如下所示：

```
 <input type="text" class="required" maxlength="14" /> 
```

根据我的研究，似乎没有办法遍历 MetaDataModel 中的所有数据注释，以便我可以检查哪些适用于 jQuery Validation。

我如何设想它在伪代码中工作：

```
 var tag = new TagBuilder("input");
    tag.mergeAttribute("type", "text");
    foreach(var attribute in metadata.attributes)
    {
       CheckForValidatableAttribute(attribute, tag);
    }

...
    private void CheckForValidatableAttribute(DataAnnotation attribute, TagBuilder tag)
    {
        switch(attribute.type)
       {
          case Required:
             tag.addClass("required");
             break;
          case StringLength
             tag.mergeAttribute("maxlength", attribute.value)
             break;
       }
    } 
```

我怎样才能实现这样的助手？我希望它可以处理数据注释，这样我就不必复制验证文字。

例如，当前的 Html 助手（如 TextEditorFor）确实将可验证的属性附加到其输出字段。它是如何做到这一点的，我该如何进行自己的实现？

干杯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T10:24:04.317

你可以使用这个简单的条件：

```
if(attribute.Type is ValidationAttribute)
{
   string className = attribute.Type.Name.Replace("Attribute", "").ToLower();
} 
```

* * *

# 更新

定义一个 Html 助手：

```
public static MvcHtmlString ValidationEditorFor<TModel, TProperty>(this HtmlHelper<TModel> htmlHelper, 
        Expression<Func<TModel, TProperty>> expression)
{
    ....
} 
```

创建这个辅助方法：

```
private static string GetPropertyNameFromExpression<TModel, TProperty>(HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TProperty>> expression)
{
    MemberExpression memberExpression = expression.Body as MemberExpression;
    if (memberExpression == null)
        throw new InvalidOperationException("Not a memberExpression");

    if (!(memberExpression.Member is PropertyInfo))
        throw new InvalidOperationException("Not a property");

    return memberExpression.Member.Name;
} 
```

现在使用它`ValidationEditorFor`：

```
var propertyName = GetPropertyNameFromExpression(htmlHelper, expression);
var propertyType = typeof(TModel).GetProperties().Where(x=>x.Name == propertyName).First().PropertyType;
var attributes = propertyType.GetCustomAttributes(true).OfType<ValidationAttribute>(); 
```

现在您可以检查属性.... 休息很容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T11:55:08.550

稍作改动并提取为助手。

```
using System;
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;
using System.Linq;
using System.Linq.Expressions;
using System.Reflection;

namespace Payntbrush.Infrastructure.Web.Mvc
{
    public static class ReflectionHelper
    {
        public static IEnumerable<ValidationAttribute> GetAttributes<TModel, TProperty>(Expression<Func<TModel, TProperty>> expression)
        {
            Type type = typeof(TModel);
            var prop = type.GetProperty(GetPropertyNameFromExpression(expression));
            return prop.GetCustomAttributes(true).OfType<ValidationAttribute>();
        }

        private static string GetPropertyNameFromExpression<TModel, TProperty>(Expression<Func<TModel, TProperty>> expression)
        {
            var memberExpression = expression.Body as MemberExpression;
            if (memberExpression == null)
                throw new InvalidOperationException("Not a memberExpression");

            if (!(memberExpression.Member is PropertyInfo))
                throw new InvalidOperationException("Not a property");

            return memberExpression.Member.Name;
        }
    }
} 
```

# html - 如何将样式表应用到 MVC3 网站？

> ID：10381944
> 
> 赞同：0
> 
> 时间：2012-04-30T10:13:51.087
> 
> 标签：html, css, asp.net-mvc-3, stylesheet

我需要使用 CSS 样式表制作一些模拟屏幕截图，但我不知道如何将其应用于我的 MVC3 应用程序。

当我替换以前的样式表时，我的页面没有样式。

```
<link href="@Url.Content("~/Content/insstyle.css")" rel="stylesheet" type="text/css" /> 
```

如果我在样式稍微改变后将它放在一个新行中，但它没什么好，它几乎没有变化，我知道这个样式表很大而且看起来不错。

```
<link href="@Url.Content("~/Content/site.css")" rel="stylesheet" type="text/css" /> 
<link href="@Url.Content("~/Content/insstyle.css")" rel="stylesheet" type="text/css" /> 
```

这是我查找合并两个样式表的方法。

问题 ...

1）我是否正确合并样式表，如果不是，我如何正确合并两个不同的样式表？

2) 使用 MVC3 应用程序，我可以删除原始样式表吗？我可以只将我的新样式表作为主要样式表吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T10:22:02.877

1.  您不是“合并”样式表，而是单独加载它们并将它们应用于网站。如果要合并它们，则应将它们放入一个文件中，以便您的网站仅加载 1 个资源文件。拥有这两个文件并没有什么坏处，但有时拥有 1 个 css 文件比拥有多个文件更好。有关更多信息，请参见此处[单个巨大的 .css 文件与多个较小的特定 .css 文件？](https://stackoverflow.com/questions/2336302/single-huge-css-file-vs-multiple-smaller-specific-css-files)

2.  您可以删除原始样式表，但根据您在新样式表中的内容，您的网站看起来会有所不同。

如果您的页面在使用新样式表时没有样式，那么我怀疑您没有将正确的样式应用于正确的元素。如果您从新样式发布您的 css 代码，那么我们可以为您提供更多帮助。或者，您可能没有在正确的位置创建新的 CSS 文件？它应该在 Content 文件夹`/Content/insstyle.css`中。还要检查文件的拼写等...

# python - pysnmp 线程安全吗？

> ID：10381963
> 
> 赞同：3
> 
> 时间：2012-04-30T10:14:58.237
> 
> 标签：python, networking, thread-safety, snmp, pysnmp

如果我想用 执行并发[`pysnmp`](http://pysnmp.sourceforge.net/)线程`cmdgen.CommandGenerator().nextCmd()`，[`pysnmp`](http://pysnmp.sourceforge.net/)线程安全吗？

当我测试它时，我没有看到表明存在问题的问题；但是，我之前没有运行[`pysnmp`](http://pysnmp.sourceforge.net/)过线程，这些查询的结果将用于做出业务决策，所以我想得到一个关于[`pysnmp`](http://pysnmp.sourceforge.net/)线程安全的明确答案。

```
from threading import Thread
import time

# See SNMP.py module at the bottom of the question
from SNMP import v2c

class SNMP_Walk_Thread(Thread):
    def __init__(self, address='127.0.0.1', oid='sysDescr'):
        Thread.__init__(self)
        self.address = address
        self.oid = oid
        self.results = None

    def run(self):
        self.snmp = v2c(self.address)
        self.results = self.snmp.walk(self.oid)

if __name__=='__main__':
    managers = set()
    finished = set()
    start = time.time()
    for addr in ['172.25.116.20', '172.25.116.21', '172.25.116.22',
        '172.25.116.5']:
        print "Calling %s(address=%s)" % ('SNMP_Walk_Thread', addr)
        poll = SNMP_Walk_Thread(address=addr) 
        poll.start(); managers.add(poll)
    while (len(finished)<len(managers)):
        for instance in managers.difference(finished):
            instance.join(0.5)
            if not instance.is_alive():
                finished.add(instance)
                print "RESULT:", instance.results
    print "   Execution time: %0.3f seconds" % ((time.time()-start)) 
```

* * *

```
"""SNMP.py (Updated to include single CommandGenerator() instances per thread, as 
suggested in Ilya's answer"""
from collections import namedtuple as NT
from datetime import datetime
import string
import re

from pysnmp.entity.rfc3413.oneliner import cmdgen
from pysnmp.smi import builder, view, error
from numpy import int64, float64

# NOTE!!!
# It is best to install the pysnmp-mibs package from pypi... this makes
# a lot of symbolic MIB names "just work"

# See this link below for many oneliner examples...
# http://pysnmp.sourceforge.net/examples/4.x/v3arch/oneliner/index.html

class v2c(object):
    """Build an SNMPv2c manager object"""
    def __init__(self, ipaddr=None, device=None, community='Public', 
        retries=3, timeout=9):
        self.device = device
        self.ipaddr = ipaddr
        self.community = community
        self.SNMPObject = NT('SNMPObject', ['modName', 'datetime', 'symName', 
            'index', 'value'])
        self.SNMPIndexed = NT('SNMPIndexed', ['modName', 'datetime', 'symName', 
            'index', 'value'])
        self.query_timeout = float(timeout)/int(retries)
        self.query_retries = int(retries)
        self._index = None

        self.cmdGen = cmdgen.CommandGenerator()
        #mibBuilder = builder.MibBuilder()
        #mibPath = mibBuilder.getMibPath()+('/opt/python/Models/Network/MIBs',)
        #mibBuilder.setMibPath(*mibPath)
        #mibBuilder.loadModules(
        #    'RFC-1213',
        #    )
        #mibView = view.MibViewController(mibBuilder)

    def index(self, oid=None):
        """Build an SNMP Manager index to reference in get or walk operations.  First v2c.index('ifName').  Then, v2c.get_index('ifHCInOctets', 'eth0') or v2c.walk_index('ifHCInOctets').  Instead of referencing a numerical index, the index will refer to the value that was indexed."""
        self._index = dict()
        self._intfobj = dict()
        snmpidx = self.walk(oid=oid)
        for ii in snmpidx:
            ## the dicts below are keyed by the SNMP index number
            # value below is the text string of the intf name
            self._index[ii.index] = ii.value
            # value below is the intf object
            if not (self.device is None):
                self._intfobj[ii.index] = self.device.find_match_intf(ii.value, 
                    enforce_format=False)

    def walk_index(self, oid=None):
        """Example usage, first index with v2c.index('ifName'), then v2c.get_index('ifHCInOctets', 'eth0')"""
        if not (self._index is None):
            tmp = list()
            snmpvals = self.walk(oid=oid)
            for idx, ii in enumerate(snmpvals):
                tmp.append([ii.modName, datetime.now(), ii.symName, 
                    self._index[ii.index], ii.value])

            return map(self.SNMPIndexed._make, tmp)
        else:
            raise ValueError, "Must populate with SNMP.v2c.index() first"

    def walk(self, oid=None):
        if isinstance(self._format(oid), tuple):
            errorIndication, errorStatus, errorIndex, \
            varBindTable = self.cmdGen.nextCmd(  
                        cmdgen.CommunityData('test-agent', self.community),  
                        cmdgen.UdpTransportTarget((self.ipaddr, 161),
                        retries=self.query_retries,
                        timeout=self.query_timeout),  
                        self._format(oid),
                    )
            # Parsing only for now... no return value...
            self._parse(errorIndication, errorStatus, errorIndex, varBindTable)
        elif isinstance(oid, str):
            errorIndication, errorStatus, errorIndex, \
                             varBindTable = self.cmdGen.nextCmd(
                # SNMP v2
                cmdgen.CommunityData('test-agent', self.community),
                # Transport
                cmdgen.UdpTransportTarget((self.ipaddr, 161)),
                (('', oid),),
                )
            return self._parse_resolve(errorIndication, errorStatus, 
                errorIndex, varBindTable)
        else:
            raise ValueError, "Unknown oid format: %s" % oid

    def get_index(self, oid=None, index=None):
        """In this case, index should be similar to the values you indexed from... i.e. if you index with ifName, get_index('ifHCInOctets', 'eth0')"""
        if not (self._index is None) and isinstance(index, str):
            # Map the interface name provided in index to an ifName index...
            snmpvals = None
            for idx, value in self._index.items():
                if index == value:
                    # if there is an exact match between the text index and the
                    # snmp index value...
                    snmpvals = self.get(oid=oid, index=idx)
                    break
            else:
                # TRY mapping the provided text index into an interface obj
                _intfobj = self.device.find_match_intf(index)
                if not (_intfobj is None):
                    for key, val in self._intfobj.items():
                        if (val==_intfobj):
                            snmpvals = self.get(oid=oid, index=key)
                            break

            # Ensure we only parse a valid response...
            if not (snmpvals is None):
                tmp = [snmpvals.modName, datetime.now(), snmpvals.symName, 
                    self._index[snmpvals.index], snmpvals.value]
                return self.SNMPIndexed._make(tmp)

        elif not isinstance(index, str):
            raise ValueError, "index must be a string value"
        else:
            raise ValueError, "Must populate with SNMP.v2c.index() first"

    def get(self, oid=None, index=None):
        if isinstance(self._format(oid), tuple):
            errorIndication, errorStatus, errorIndex, \
            varBindTable = self.cmdGen.getCmd(  
                        cmdgen.CommunityData('test-agent', self.community),  
                        cmdgen.UdpTransportTarget((self.ipaddr, 161),
                        retries=self.query_retries,
                        timeout=self.query_timeout),  
                        self._format(oid),
                    )
            # Parsing only for now... no return value...
            self._parse(errorIndication, errorStatus, errorIndex, varBindTable)
        elif isinstance(oid, str) and isinstance(index, int):
            errorIndication, errorStatus, errorIndex, \
                             varBindTable = self.cmdGen.getCmd(
                # SNMP v2
                cmdgen.CommunityData('test-agent', self.community),
                # Transport
                cmdgen.UdpTransportTarget((self.ipaddr, 161)),
                (('', oid), index),
                )
            return self._parse_resolve(errorIndication, errorStatus, 
                errorIndex, [varBindTable])[0]
        else:
            raise ValueError, "Unknown oid format: %s" % oid

    def bulkwalk(self, oid=None):
        """SNMP bulkwalk a device.  NOTE: This often is faster, but does not work as well as a simple SNMP walk"""
        if isinstance(self._format(oid), tuple):
            errorIndication, errorStatus, errorIndex, varBindTable = self.cmdGen.bulkCmd(  
                        cmdgen.CommunityData('test-agent', self.community),  
                        cmdgen.UdpTransportTarget((self.ipaddr, 161),  
                        retries=self.query_retries,
                        timeout=self.query_timeout), 
                0,
                25,
                self._format(oid),
                )
            return self._parse(errorIndication, errorStatus, 
                errorIndex, varBindTable)
        elif isinstance(oid, str):
            errorIndication, errorStatus, errorIndex, varBindTable = self.cmdGen.bulkCmd(  
                        cmdgen.CommunityData('test-agent', self.community),  
                        cmdgen.UdpTransportTarget((self.ipaddr, 161),  
                        retries=self.query_retries,
                        timeout=self.query_timeout), 
                0,
                25,
                (('', oid),),
                )
            return self._parse_resolve(errorIndication, errorStatus, 
                errorIndex, varBindTable)
        else:
            raise ValueError, "Unknown oid format: %s" % oid

    def _parse_resolve(self, errorIndication=None, errorStatus=None, 
        errorIndex=None, varBindTable=None):
        """Parse MIB walks and resolve into MIB names"""
        retval = list()
        if errorIndication:
            print errorIndication
        else:
            if errorStatus:
                print '%s at %s\n' % (
                    errorStatus.prettyPrint(),
                    varBindTable[-1][int(errorIndex)-1]
                    )
            else:
                for varBindTableRow in varBindTable:
                    for oid, val in varBindTableRow:
                        (symName, modName), indices = cmdgen.mibvar.oidToMibName(
                            self.cmdGen.mibViewController, oid
                            )
                        val = cmdgen.mibvar.cloneFromMibValue(
                            self.cmdGen.mibViewController, modName, symName, 
                            val)
                        # Try to parse the index as an int first, 
                        # then as a string
                        try:
                            index = int(string.join(map(lambda v: v.prettyPrint(), indices), '.'))
                        except ValueError:
                            index = str(string.join(map(lambda v: v.prettyPrint(), indices), '.'))

                        # Re-format values as float or integer, if possible...
                        tmp = val.prettyPrint()
                        if re.search(r"""^\s*\d+\s*$""", tmp):
                            value = int64(tmp)
                        elif re.search(r"""^\s*\d+\.\d+\s*$""", tmp):
                            value = float64(tmp)
                        else:
                            value = tmp

                        retval.append(self.SNMPObject._make([modName, 
                            datetime.now(), symName, index, value]))
            return retval

    def _parse(self, errorIndication, errorStatus, errorIndex, 
        varBindTable):
        if errorIndication:
           print errorIndication
        else:
            if errorStatus:
                print '%s at %s\n' % (
                    errorStatus.prettyPrint(),
                    errorIndex and varBindTable[-1][int(errorIndex)-1] or '?'
                    )
            else:
                for varBindTableRow in varBindTable:
                    for name, val in varBindTableRow:
                        print '%s = %s' % (name.prettyPrint(), val.prettyPrint())

    def _format(self, oid):
        """Format a numerical OID in the form of 1.3.4.1.2.1 into a tuple"""
        if isinstance(oid, str):
            if re.search('(\d+\.)+\d+', oid):
                tmp = list()
                for ii in oid.split('.'):
                    tmp.append(int(ii))
                return tuple(tmp)
        else:
            return oid 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T13:05:38.990

如果您在各自的线程中运行专用的 CommandGenerator 实例，则 pysnmp 应该是 MT 安全的。最新的 pysnmp 版本 (4.2.2) 有相关修复。

我会考虑对您的代码进行以下更改：

*   在每个线程中使用单个且长期存在的 CommandGenerator 实例，这将在初始化时保护大量 CPU
*   如果您只需要一个 SNMP v2c，那么重写您的应用程序以使用较低级别的 SNMPv1 API 可能是值得的 - 这几乎可以消除所有关键部分或将它们置于您的控制之下，性能也会提高 -[低级 GETNEXT 实现](http://pysnmp.sourceforge.net/examples/4.x/v1arch/manager/nextgen.html)

# java - java servlet 出现了令人惊讶的结果

> ID：10381965
> 
> 赞同：2
> 
> 时间：2012-04-30T10:15:02.133
> 
> 标签：java, date, servlets, datepicker

我在 java servlet 中得到了令人惊讶的结果。我将输入参数（日期）从 jsp 传递到 servlet，如下所示：

```
 <input name='date_allow_empty' type='text' value='' class='date picker' /> 
```

日期选择器在这里：http: [//jsfiddle.net/cBwEK/](http://jsfiddle.net/cBwEK/)

假设我选择了：05-04-2012，当我将此日期传递给 servlet 时，我得到：

```
1333620371 
```

但我应该在 servlet 中得到 05-04-2012

```
Servlet:

  String t= request.getParameter("date_allow_empty");

  out.println(t); //displaying 1333620371 in stead of 05-04-2012 
```

为什么这种类型的结果会显示在 servlet 中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T10:19:43.537

该值 ,`1333620371`是自大纪元（1970 年 1 月 1 日）以来的秒数。要从中生成 Java `Date`，请使用[`Date(long)`](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html#Date%28long%29)构造函数，该构造函数预计自 The Epoch 以来的*毫秒*数（因此乘以 1,000）：

```
Date dt = new Date(value * 1000); 
```

如果您将值作为 a `String`，则首先需要[`parseLong`](http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html#parseLong%28java.lang.String,%20int%29)它，例如：

```
Date dt = new Date(Long.parseLong(value, 10) * 1000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T10:20:06.293

您将获得自 1970 年 1 月 1 日 00:00:00 GMT 以来的秒数，请参阅：[http](http://docs.oracle.com/javase/6/docs/api/java/util/Date.html#getTime) ://docs.oracle.com/javase/6/docs/api/java/util/Date.html#getTime ()

要将其转换为 java.util.Date 对象，只需使用：

```
String t= request.getParameter("date_allow_empty");
Date theDate = new Date(Long.valueOf(t) * 1000); 
```

(http://docs.oracle.com/javase/6/docs/api/java/util/Date.html#Date(long))

编辑：它以秒为单位，而不是毫秒:(

# python - Python setter 装饰器是如何工作的

> ID：10381967
> 
> 赞同：4
> 
> 时间：2012-04-30T10:15:05.847
> 
> 标签：python, decorator

我刚刚开始使用 Python，所以如果我遗漏了一些明显的东西，请多多包涵。我已经阅读了有关装饰器及其工作原理的信息，并且我试图了解它是如何被翻译的：

```
class SomeObject(object):

    @property
    def test(self):
        return "some value"

    @test.setter   
    def test(self, value):
        print(value) 
```

根据我的阅读，这应该变成：

```
class SomeObject(object):

    def test(self):
        return "some value"

    test = property(test)

    def test(self, value):
        print(value)

    test = test.setter(test) 
```

但是，当我尝试这个时，我得到

```
AttributeError: 'function' object has no attribute 'setter' 
```

有人可以解释在这种情况下翻译是如何工作的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T10:20:30.520

你得到它的原因是`AttributeError`在类的范围内`def test`重新定义`test`。类中的函数定义并没有什么特别之处。

您的示例将像这样工作

```
class SomeObject(object):

    def get_test(self):
        return "some value"

    def set_test(self, value):
        print(value)

    test = property(get_test)
    test = test.setter(set_test)
    # OR
    test = property(get_test, set_test) 
```

# android - 我制作的 Android 应用程序无法安装但在模拟器中运行良好？

> ID：10381971
> 
> 赞同：0
> 
> 时间：2012-04-30T10:15:25.890
> 
> 标签：android, installation, apk

我在我的 Android 设备上安装导出的、未签名的 .apk 时遇到问题。我有一个 HTC Droid Incredible 2，但无法安装我的 apk。每当我尝试使用 Astro File Manager 应用程序或 AppInstaller 应用程序时，它都会提示我进行安装和所有内容，并说明它使用的权限，然后当我点击“安装”按钮时，它会显示加载栏大约半秒钟然后说“未安装应用程序”，我无法在手机上进行调试或任何操作，因为无论我启用或尝试什么，Incredible 2 都无法连接到我的电脑，并且它不会显示在 adb 上。

这是我的清单的副本，是否有任何可能导致安装问题或我遗漏的内容？它在我的模拟器上运行，有 0 个问题。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.slammednavigator"
    android:versionCode="1"
    android:versionName="1.0" >
    <supports-screens
        android:largeScreens="true"
        android:normalScreens="true"
        android:smallScreens="true"
        android:resizeable="true"
        android:anyDensity="true"
    />
    <uses-sdk android:minSdkVersion="3" android:targetSdkVersion="4"/>
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS"     />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:hardwareAccelerated="true" >
        <activity
            android:name=".SlammedNavigatorActivity"
            android:label="@string/app_name"
            android:configChanges="orientation|keyboardHidden" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity 
            android:name="org.apache.cordova.DroidGap" 
            android:label="@string/app_name" 
            android:configChanges="orientation|keyboardHidden" >
            <intent-filter> 
            </intent-filter> 
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T11:54:27.173

您是否在移动设备中启用了未知来源。在安装未签名的 apk 时，您必须启用未知来源。要启用设置 -> 应用程序 -> 检查列表中的未知来源 -> 单击确定按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T10:22:21.420

您需要签署您的 .apk 文件，否则 Android 将无法安装它。当您在模拟器上运行它时，或者通过 eclipse 在设备上运行它时，.apk 会使用允许安装的特定调试证书进行签名。

# javascript - 在新选项卡中打开链接并转到特定 div

> ID：10381974
> 
> 赞同：0
> 
> 时间：2012-04-30T10:15:35.093
> 
> 标签：javascript, html

我想在新选项卡中打开一个链接并转到该链接中的特定 div。链接是：

[http://paper.li/f-1333760510](http://paper.li/f-1333760510)

`#paper-window`我想在单击链接时转到 div 。这是我尝试过的：

1.

```
<a href="http://paper.li/f-1333760510#paper-window" target="_blank" /> 
```

2

```
<a href="#" onclick="load-link(); return false" />

function load-link() {
    var w = window.open("http://paper.li/f-1333760510");
    w.location.href = "http://paper.li/f-1333760510#paper-window";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T10:18:42.273

链接看起来不错...但是您将 location.hash 与元素的 id 放在了一起...

OLD：您的锚标记绝对没问题：

```
<a href="http://paper.li/f-1333760510#paper-window" target="_blank">open me</a>
<a name="paper-window"></a> 
```

导致`#something`url 的一部分是指向该页面上某个锚点的跳转点，而不是指向 id

更新（关于您的评论，感谢你们所有人:)）用于[导航到片段标识符](http://dev.w3.org/html5/spec/single-page.html#scroll-to-fragid)的 HTML5 规范确实说两者都可以工作......顺序是首先查找 id，然后查找具有属性名称的锚点（尽管为了向后兼容在 HTML5 中已弃用）

所以这意味着打开[http://www.example.com#foo](http://www.example.com#foo)会导致搜索：

```
// check for an element with an id matching "foo"
<div id="foo"></div>

// if no element was found check for an anchor with that name (also backward compatibility)
<a name="foo"></a>

// compare location.hash with "top"
// would jump to the top of the page if it matches 
```

# javascript - 如何在 javascript 或 jquery 中获取 td 的值？

> ID：10381977
> 
> 赞同：0
> 
> 时间：2012-04-30T10:15:46.187
> 
> 标签：javascript, jquery, html

我有一个

```
<td id="example" value="tedan!"></td> 
```

我如何获得 td 的值？td 内不应该有文本，这就是为什么我只是将值放在值标签中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T10:17:04.553

TD 没有 value 属性。使用 jQuery，您**可以**通过 访问它`$('example').attr('value')`，但这是错误的。在 HTML5 中，您可以使用一个`data-value`完全合法的属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T10:16:39.530

```
$('#example').attr('value'); 
```

尽管在无效`value`的 HTML 上使用该属性...[工作示例](http://jsfiddle.net/hRnq7/)..您应该使用该属性在 DOM 元素上存储任意数据-[请参见此处](http://ejohn.org/blog/html-5-data-attributes/)`td``data-<name>`

[这使用 .attr()](http://api.jquery.com/attr/)`value`从您的元素中获取属性

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T12:08:41.360

```
document.getElementById( 'example' ).getAttribute( 'value' ) 
```

[http://jsfiddle.net/Ralt/MmaMa/](http://jsfiddle.net/Ralt/MmaMa/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T02:37:45.427

感谢您的所有回答！:D 但我找到了另一个解决方案：我将值放在 td 标签之间并使用 css 隐藏它。我在 Javascript 中使用 .text 获取值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T10:25:01.197

这将为您带来价值：

```
document.getElementById('example').firstChild.nodeValue 
```

# entity-framework-4 - 展开无效

> ID：10381990
> 
> 赞同：0
> 
> 时间：2012-04-30T10:16:34.647
> 
> 标签：entity-framework-4, linq-to-entities, wcf-data-services

我在数据库项目和详细信息中有两个表，但是当我执行

```
Item item = _inventoryContext.Items
                             .Expand("Details")
                             .Where(i => i.Id == theAuction.InventoryReference)
                             .First(); 
```

要获取已填充详细信息的项目列表，则永远不会填充详细信息。

我试过的：

*   查看数据库，详细信息肯定已填充
*   使用浏览器查看我可以从 url 获取详细信息 - 我可以
*   更新了服务参考

到目前为止没有任何帮助。

谢谢，

萨钦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T11:04:03.973

我通过在上下文中设置 MergeOption 解决了这个问题。我将值设置为 MergeOption.OverwriteChanges。因为我不会在使用它时在本地更改值，所以我可以这样做。它似乎没有设置值的原因可能是因为 Details 开始时不为空，因此它的值是“设置”。

# html - 如何限制我的输入类型=“文件”只接受在 Firefox 中不起作用的 png 图像文件

> ID：10381999
> 
> 赞同：25
> 
> 时间：2012-04-30T10:17:00.607
> 
> 标签：html, input

我正在使用输入类型 =“文件”，现在我的要求是我只想选择 png 图像，即当我选择浏览时应该应用“png”过滤器。

我已经提到`www.w3schools.com/tags/att_input_accept.asp`，下面是我正在使用的代码，这适用于 Chrome，但不适用于 Firefox 和 IE。

请谁能帮我理解我必须做错什么？

```
 <h2>Below uses accept="image/*"</h2>
 <input type="file" name="pic1" accept="image/*" /> 

 <h2>Below I need to accept only for png</h2>
 <input type="file" name="pic1" accept="image/png" /> 
```

​这里有一个小提琴链接[http://jsfiddle.net/Jcgja/2/](http://jsfiddle.net/Jcgja/2/)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-30T10:55:45.530

您需要通过 java 脚本对其进行验证。下面是java脚本验证的代码

```
function CheckFileName() {
        var fileName = document.getElementById("uploadFile").value
        if (fileName == "") {
            alert("Browse to upload a valid File with png extension");
            return false;
        }
        else if (fileName.split(".")[1].toUpperCase() == "PNG")
            return true;
        else {
            alert("File with " + fileName.split(".")[1] + " is invalid. Upload a validfile with png extensions");
            return false;
        }
        return true;
    } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-30T10:29:08.480

w3schools 该页面上的浏览器支持信息不正确。

如果你检查这个页面，你会看到`accept`它没有在 Firefox 中实现的属性：

[https://developer.mozilla.org/en/HTML/Element/Input](https://developer.mozilla.org/en/HTML/Element/Input)

更新：
该`accept`属性现已在 Firefox 中实现，但没有最新版本的用户仍然无法获得支持。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T10:21:34.477

如您所见，任何主要浏览器都不正确支持“接受”属性。您可以在表单 onsubmit 事件上使用 javascript 验证来验证文件类型是否正确，否则返回 false。

不要将此属性用作验证工具。文件上传应在服务器上进行验证。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T11:11:18.957

```
<?php
if ((($_FILES["pic1"]["type"] == "image/png")
{
if ($_FILES["pic1"]["error"] > 0)
{
echo "Error: " . $_FILES["pic1"]["error"] . "<br />";
}
else
{
echo "Upload: " . $_FILES["pic1"]["name"] . "<br />";
echo "Type: " . $_FILES["pic1"]["type"] . "<br />";
echo "Size: " . ($_FILES["pic1"]["size"] / 1024) . " Kb<br />";
echo "Stored in: " . $_FILES["pic1"]["tmp_name"];
}
}
else
{
echo "Invalid file";
}
?> 
```

这只是对文件类型的验证。不是整个上传脚本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-22T10:27:45.580

您可以使用文件函数的 javascript 函数 onChane 事件

```
filesChange() {
        checkFile();
        } 
<script type="text/javascript">
function checkFile() {
    var fileElement = document.getElementById("uploadFile");
    var fileExtension = "";
    if (fileElement.value.lastIndexOf(".") > 0) {
        fileExtension = fileElement.value.substring(fileElement.value.lastIndexOf(".") + 1, fileElement.value.length);
    }
    if (fileExtension == "gif") {
        return true;
    }
    else {
        alert("You must select a GIF file for upload");
        return false;
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-17T16:25:10.297

正如评论中所指出的，接受的解决方案不适用于带有多个“。”的文件名。在里面。这应该可以更好地处理它，它更防错且更灵活，并且**您可以通过编辑 array 来管理接受的扩展**。

```
function checkFileExtension() {
    var fileName = document.getElementById("uploadFile").value;

    if(!fileName)
      return false;

    var extension = fileName.split(".");
    if(extension && extension.length > 1){
        extension = [extension.length-1].toUpperCase();
        if (["PNG"].indexOf(extension) != -1)
            return true;
        else{
            alert("Browse to upload a valid File with png extension");
            return false;
        }
    }
    else{
        alert("Browse to upload a valid File with png extension");
        return false;
    }
} 
```