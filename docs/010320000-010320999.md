# StackOverflow 问答 10320000-10320999

# build - 如何使用 cmake（或任何其他便携式构建工具）去除文件扩展名？

> ID：10320002
> 
> 赞同：9
> 
> 时间：2012-04-25T16:37:30.523
> 
> 标签：build, cmake

我正在开发一个由多个小型可执行文件组成的项目。可执行文件旨在从终端（或命令提示符）运行，并且可以用任何编程语言编写。那些用解释语言编写的文件有一个适用于 unixy 系统的 shebang 行，而它们的文件扩展名被添加到 Windows 上的 PATHEXT 环境变量中。

为了在所有编程语言和两个主要平台组中一致地使用可执行文件，我需要从 unixy 系统上解释程序的文件名中去除文件扩展名。（我所说的“一致使用”是指：只需键入程序的名称即可启动它，而无需指定其文件扩展名。）

为了更深入地了解具体情况，假设我编写了类似于以下 CMakeLists 文件的内容：

```
project (Mixed Example)

add_executable (banana banana.cpp)
add_executable (grape grape.hs)
add_script? (orange orange.py)
add_script? (strawberry strawberry.lua)

install (TARGETS banana grape orange strawberry DESTINATION bin) 
```

然后我希望`banana.cpp`和`grape.hs`以通常的方式编译，而我希望根据平台有条件地剥离`orange.py`和的文件扩展名。`strawberry.lua`因此，该`bin`目录应包含 unixy 系统上的以下文件：

```
banana grape orange strawberry 
```

以及 Windows 上的以下内容：

```
banana.exe grape.exe orange.py strawberry.lua 
```

我怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-25T17:49:50.280

如果您不将这些脚本文件视为 CMake 目标，而是将它们视为文件，您应该能够：

```
project (Mixed Example)

add_executable (banana banana.cpp)
add_executable (grape grape.hs)

install (TARGETS banana grape DESTINATION bin)
if (UNIX)
  install (FILES orange.py DESTINATION bin RENAME orange)
  install (FILES strawberry.lua DESTINATION bin RENAME strawberry)
else (WIN32)
  install (FILES orange.py strawberry.lua DESTINATION bin)
endif () 
```

如果你想使用一个函数而不是`install (FILES ...`多次调用，你可以这样做：

```
function (install_files)
  if (UNIX)
    foreach (file ${ARGV})
      get_filename_component (name_without_extension ${file} NAME_WE)
      install (FILES ${file} DESTINATION bin RENAME ${name_without_extension})
    endforeach ()
  else (WIN32)
    install (FILES ${ARGV} DESTINATION bin)
  endif ()
endfunction ()

install (TARGETS banana grape DESTINATION bin)
install_files (orange.py strawberry.lua) 
```

# jquery - JQuery 不适用于 JSF 动态 UI 组件

> ID：10320004
> 
> 赞同：1
> 
> 时间：2012-04-25T16:37:37.167
> 
> 标签：jquery, jsf

我在 JSF 数据表上应用 JQuery 时遇到问题。

我有这样的代码：

```
<script type="text/javascript" charset="utf-8">
            $(document).ready(function() {
                $('<b>#example</b>').dataTable( {
                    "aoColumns": [
                        { "asSorting": [ "asc" ] },
                        { "asSorting": [ "asc" ] },
                        { "asSorting": [ "desc", "asc", "asc" ] },
                        { "asSorting": [ "desc" ] },
                        { "asSorting": [ "asc" ] },
                        { "asSorting": [ "asc" ] }
                    ]
                } );
            } );
        </script> 
```

XHTML

```
<h:dataTable id="example" name="example" value="#{notificationBean.notificationList}" var="item"
                cellpadding="0" cellspacing="0" border="0"
                styleClass="display"
                rowClasses="gradeC"
                style="background-image: url('../images/ClientCare_Menu_Gradient.jpg'); background-repeat: repeat-x;"> 
```

渲染时：

```
<table id="searchform:example" class="display" cellspacing="0" cellpadding="0" border="0" style="background-image: url('../images/ClientCare_Menu_Gradient.jpg'); background-repeat: repeat-x;"> 
```

现在我的问题是必须申请数据表的 CSS 没有得到应用。

我尝试了不同的表示法，但它在我试过的 Jquery 中不起作用：

${'#searchform:example'}, ${'#searchform.example'} 在这些情况下，包含表本身的悬停操作将无法显示数据表。

${'searchform#example'}, ${'#example'} 在这些情况下，悬停动作有效并且数据表被渲染，但 CSS 不适用

任何人都可以帮忙吗？

提前感谢迪帕克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T16:57:03.640

您需要选择生成的 HTML`<table>`元素的客户端 ID，而不是通过 JSF`<h:dataTable>`组件的组件 ID。HTML ID 在您的特定情况下`searchform:example`。由于`:`是 CSS 选择器中的非法字符，您需要对其进行转义：

```
$("#searchform\\:example") 
```

或改用属性选择器：

```
$("[id='searchform:example']") 
```

更容易的是改为提供`<h:dataTable>`样式类。

```
<h:dataTable styleClass="example"> 
```

在您的特定情况下，您已经有一个

```
<h:dataTable styleClass="display"> 
```

所以你也可以只使用

```
$(".display") 
```

# jquery - 使用 jQuery Mobile 从常规链接中删除 ajax 调用

> ID：10320005
> 
> 赞同：7
> 
> 时间：2012-04-25T16:37:38.210
> 
> 标签：jquery, jquery-mobile

使用 jQuery Mobile 我想禁用 DOM 特定部分中链接的 ajax 调用。

我不想放一个

```
data-ajax = false 
```

每次我不想使用 jquerymobile ajax。

例如，任何属于“内容”子级的链接：

```
<div class="content">
    <a href="http://externalwebsite.com">External Link</a>
</div> 
```

我想将“data-ajax = false”添加到作为“内容”子项的每个链接上

有没有办法用jquery做到这一点？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-25T16:42:32.783

如果您想从锚标记禁用 ajax 链接行为，您可以放入`rel=external`链接，链接将在没有 ajax 的情况下加载，然后您的 url 将是正常的。

[http://jquerymobile.com/demos/1.0a4.1/#docs/pages/docs-navmodel.html](http://jquerymobile.com/demos/1.0a4.1/#docs/pages/docs-navmodel.html)

```
<a href="User/somepage" rel="external" />I wont be using ajax for navigation</a> 
```

如果您想在 jQuery 中为内容 div 中的某些标签执行此操作，您可以尝试这样

```
$(function(){
  $(".content a").each(function(){
    $(this).attr("rel","external");
  });
}); 
```

这是一个示例[http://jsfiddle.net/4WEBk/3/](http://jsfiddle.net/4WEBk/3/)

更简化的版本。（感谢[tandu](https://stackoverflow.com/users/454533/tandu)指点）

```
$(function(){
  $(".content a").attr("rel","external");
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-25T16:40:38.910

```
$(".content a").attr('data-ajax', false); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-24T00:36:41.940

我还必须添加 rel="external" 和 target="_self" 才能使其正常工作。

> 在某些情况下，将使用普通的 http 请求而不是 Ajax 请求。一种情况是在链接到外部网站上的页面时。您还可以通过以下链接属性指定进行正常的 http 请求：
> 
> *   相对=外部
>     
>     
> *   目标（具有任何值，例如“_blank”）

# java - 我们可以在 Web 服务类中实现方法重载吗？

> ID：10320006
> 
> 赞同：7
> 
> 时间：2012-04-25T16:37:38.943
> 
> 标签：java, wsdl, jax-ws, axis2

我想在 Java Web 服务类中实现方法重载，如下所示：

```
public String myMethod(User user)
{
    // My code
} 

public String myMethod(User[] user)
{
    for(int i=0; i<user.length; i++)
    {
        myMethod(user[i]);
    }
} 
```

如果我将单个`User`对象转发到`myMethod()`，它应该触发第一个方法，如果我发送一个 s 数组`User`，它应该触发第二个方法。

在 WSDL 文件中，它只显示一个方法。但是，如果我尝试同时调用`@WebMethod(operationName="")`这两个调用，我将无法生成 WSDL 文件。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-25T16:48:04.260

**Web 服务不允许**操作重载。
它在[WS-BP](http://www.ws-i.org/Profiles/BasicProfile-1.0-2004-04-16.html)中被明确禁止，并且[WSDL 1.2](http://www.w3.org/TR/2002/WD-wsdl12-20020709/)也不允许它。
即使您找到了对此有一些支持的堆栈，我也建议您**不要**遵循这种方法。
重载是一个`OO`概念。不要试图将它们应用于`Service Oriented`范式

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-25T16:48:07.303

重载 Web 服务方法并不困难。至少使用 Axis 1.4，它相当简单。如果服务中有两个重载方法，如下所示：

```
public String myMethod(String firstName, String lastName) throws RemoteException
public String myMethod(String name) throws RemoteException 
```

然后是这样的请求：

```
http://localhost:8080/services/testService?method=myMethod&name=<name> 
```

将调用第二种方法。

还有这样一个请求：

```
http://localhost:8080//services/testService?method=myMethod&firstName=<first_name>&lastName=<last_name> 
```

将调用第一个方法。

分辨率由 Axis 完成。

# android - Android：ListView 中的 RatingBar 值未正确保存在数据库中

> ID：10320011
> 
> 赞同：1
> 
> 时间：2012-04-25T16:37:58.767
> 
> 标签：android, listview

我有一个 ListView，其中每一行包含一个 CheckBox、一个 TextView 和一个 RatingBar。我还有一个数据库，用于存储唯一的文本、浮点数的评级和其他与此处无关的信息。

每次我启动我的应用程序时，它都会从数据库中收集信息并将其显示在 ListView 上就好了。除了 RatingBar。当用户更改 RatingBar 的评级时，我想将新值保存在数据库中，以便以后可以将其与存储在数据库中的其余信息一起使用。但问题是这个值没有正确保存，我不知道为什么，所以这个值没有正确显示，甚至显示在错误的行中。

我尝试了一些在本网站上找到的代码，但无法使其正常工作。

这是我自定义的 ArrayAdapter 的 getView：

```
public View getView(final int position, View convertView, ViewGroup parent) {
        View row = convertView;
        FilaLlistaHolder holder = null;
        if(row == null) {
            LayoutInflater inflater = ((SeriesDBActivity)context).getLayoutInflater();
            row = inflater.inflate(layoutResourceId, parent, false);
            holder = new FilaLlistaHolder();
            holder.txtTitle = (TextView)row.findViewById(R.id.txtTitle);
            holder.rating = (RatingBar)row.findViewById(R.id.ratingBar1);
            holder.checkbox = (CheckBox)row.findViewById(R.id.checkBox1);            
            row.setTag(holder);
            if (holder.rating != null) {
                holder.rating.setOnRatingBarChangeListener(new RatingBar.OnRatingBarChangeListener() {
                    public void onRatingChanged(RatingBar ratingBar,
                            float rating, boolean fromUser) {
                            if (fromUser) {

                                data[position].stars = rating;
                                FilaLlista filaLlista = data[position];
                                bd.openToWrite();
                                bd.saveRating(filaLlista.titol, rating);
                                bd.close();
                            }
                    }                   
                });
                holder.rating.setRating(data[position].stars);
            }
        }

        else
            holder = (FilaLlistaHolder)row.getTag();

        FilaLlista filaLlista = data[position];
        holder.txtTitle.setText(filaLlista.titol);
        holder.rating.setRating(filaLlista.stars);
        return row;
    }

```

如您所见，我有一个 setOnRatingBarChangeListener 调用数据库来更新已更改其评级的行。我会说更新调用是正确的。

在此先感谢您的帮助。

# c - C 私有变量 Get 和 Set 方法

> ID：10320025
> 
> 赞同：13
> 
> 时间：2012-04-25T16:38:46.277
> 
> 标签：c, private-members, private-methods

我在 C 中工作，并且有一些我不想成为全局变量，但我确实希望为它们提供可以在文件外部“全局”访问的 get 和 set 方法。我习惯在 Java 中这样做，但 C 在这种方式上非常不同。基本上我正在寻找遵循这个伪代码的东西，但是我无法在任何地方找到我可能会看到的示例。

```
main.c
#include data.h
set(b);

datalog.c
#include data.h
get(b);

data.c
private int c;
set(b){
    c = b;
}
get(c){
    return c;
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-25T16:47:03.603

你做变量`static`。当一个全局变量被创建`static`时，它的作用域被限制在当前文件中。

一个例子如下：

文件名：main.c

```
#include <stdio.h>

#include "header.h"

extern int get();
extern void set(int);

int main()
{
    set(10);
    printf("value = %d \n", get());   
    set(20);
    printf("value = %d \n", get());   
    set(30);
    printf("value = %d \n", get());   
    set(40);
    printf("value = %d \n", get());   
    return 0;
} 
```

文件名：header.h

```
#include <stdio.h>

int get(void);
void set(int); 
```

文件名：header.c

```
#include "header.h"

static int value = 0;

int get(void)
{
    return value;
}

void set(int new_value)
{
    value = new_value;
} 
```

输出：

```
$ gcc -Wall -o main main.c header.h header.c 
$ ./main 
value = 10 
value = 20 
value = 30 
value = 40 
$ 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-25T16:45:03.190

如果您想在 c 中使用私有变量，有许多技术可以近似私有变量，但 C 语言实际上没有延伸到私有、公共、受保护的“保护”概念（就像 C++ 那样）。

C 将显示任何变量的*名称*（这是 C 中的要求），因此您必须通过隐藏变量*类型*的信息来处理它（使取消引用变得非常困难）。

一个技巧是将变量*定义*为一个仅在一个模块`void*`中知道实际变量类型的变量。`.c`

```
 /* somefile.h */

 extern void* counter; 

 /* somefile.c */

 #include "somefile.h"

 int actualCounter = 0;
 void* counter = &actualCounter;

 /* otherfile.c */

 #include "somefile.h"

 // we can see "counter", but we cannot "use" it here; because we don't have access
 // to the real "hidden" type of "int". 
```

更好的方法是使用`struct`关键字扩展这个想法，并制作伪方法，就像这样

```
 /* person.h */

 struct s_person;

 typedef Person struct s_person;

 Person* new_Person(char* name);
 void delete_Person(Person* person);

 void Person_setName(Person* person, char* name);
 char* Person_getName(Person* person);

 /* person.c */

 struct s_person {
   char* name;
 };

 Person* new_Person(char* name) {
   Person* object = (Person*)malloc(sizeof(struct s_person));
   // duplicate the string for more security, otherwise constructor
   // could manipulate the "private" string after construction.
   object->name = strdup(name);
   return object;
 }

 void delete_Person(Person* person) {
   // some implementations pass a Person** to set the reference to 0
   // this implementation requires that the caller sets his own references to 0
   free(person->name);
   free(person);
 }

 void Person_setName(Person* person, char* name) {
   // free the old
   free(person->name);
   // duplicate the new to provide "out of simulated class" modification by malicious 
   // name setter.
   person->name = strdup(name);
 }

 char* Person_getName(Person* person) {
   // must return a copy, otherwise one can manipulate name
   // from reference provided by Person_getName(...);
   return strdup(person->name);
 }

 /* otherfile.c */

 #include "Person.h"

 /* Now we can hold Person "simulated objects", but we cannot */
 /* manipulate their "state" without using the C simulated object */
 /* methods */

 int main(int argc, char** argv) {

   Person* bob = new_Person("bob");
   printf("%s\n", Person_getName(bob));
   delete_Person(bob);
   // critical or we hold a pointer to freed memory.
   bob =  0;

   return 0;
 } 
```

像这样的技术有几种变体，一种是有一个“公共结构”和一个指向“私有结构”的 void* 指针。一种是将“方法”作为函数指针包含在“公共结构”中（支持多态性的一步），一种是实际编写一个完整且适当的 C++ 类型系统，该系统试图完全按照 C++ 的方式解决问题（类层次结构，多态性、后期绑定、信息隐藏等）。

基本上，您无需太多工作就可以获得一些“面向对象”，但是随着您添加更多的 -ornamentation 功能，您将添加更多胶水代码（直到实际使用面向对象的编程语言变得更加简单*）* .

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T16:41:07.117

您可以键入：

```
static int c; 
```

这样，“.o”就不会导出“c”变量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-25T16:48:29.230

通过您的示例，您可以尝试使用一些`struct`带有此信息的信息。A`struct`就像 a`class`只有*公共*成员变量（即没有函数）。所以考虑如下

```
#include <stdio.h>

typedef struct _somestruct
{
  int c;
} theStruct;

int getC(theStruct* obj)
{
  if(obj == NULL)
    return -1;
  return obj->c;
}

void setC(theStruct* obj, int val)
{
  if(obj == NULL)
    return;
  obj->c = val;
}

int main()
{
  theStruct myStruct;
  setC(&myStruct, 5);
  printf("%d\n", getC(&myStruct));
  return 0;
} 
```

如您所见，`C`仅适用于对象和函数。但是要在所有文件中获取全局变量，请尝试`static int c = 0;`

上面的示例几乎与您可能获得的“java 风格”约定一样接近。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-25T17:02:01.057

```
static int c;

int get(void) {
    return c;
}

int set(int n) {
    c = n;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-10-12T19:38:16.713

您可以使用函数指针改进@RageD 的答案：

```
#ifndef MYCLASS_H
#define MYCLASS_H

/********************************* MyClass.h **********************************/
// Typedef function pointers for usage clarity
typedef int (*GetInt)();
typedef void (*SetInt)();

typedef struct MyClass {
    int  Value;
    GetInt GetValue;
    SetInt SetValue;
} MyClass_t;

// Make the default class accessible to other modules
extern MyClass_t new_MyClass;

#endif    

/********************************* MyClass.c **********************************/
#include <stdio.h>

static int getValue(MyClass_t* obj){
    if(obj == NULL)
        return -1;

    return obj->Value;
}
static void setValue(MyClass_t* obj, int value){
    if(obj == NULL)
        return;

    obj->Value = value;
}

// Default "constructor" of MyClass 
MyClass_t new_MyClass = {0, &getValue, &setValue};

/*********************************** main.c ***********************************/
//#include "MyClass.h"

int main(){
    // Create a default instance of the class
    MyClass_t myClass = new_MyClass;

    // Call the private (static) Getter function --> Prints 0
    printf("%d\n", myClass.GetValue(&myClass));

    // Set the instance's value by the Setter function
    myClass.SetValue(&myClass, 9);

    // Prints 9
    printf("%d\n", myClass.GetValue(&myClass));

    return 0;
} 
```

# django - Django ManyToManyField 不突出显示所选项目

> ID：10320027
> 
> 赞同：0
> 
> 时间：2012-04-25T16:39:00.523
> 
> 标签：django, django-models, django-admin

我正在尝试将 ManyToManyField 添加到我的 Django 应用程序中，它几乎可以工作。我唯一的问题是，当我保存一个对象并在管理员中再次查看它时，ManyToMany-fields 没有被选中。

我设置了空白=真，否则它不会让我在不选择至少一项的情况下保存，并且我希望多对多字段是可选的。

整个多对多管理字段是灰色的，这可能与它有关。 [http://dl.dropbox.com/u/3184097/manytomany.png](http://dl.dropbox.com/u/3184097/manytomany.png)

模型：

```
class Disease(models.Model):
    name = models.CharField(max_length=100)
    text = models.CharField(max_length=2000)
    vaccines = models.ManyToManyField(Vaccine, blank=True)
    countries = models.ManyToManyField(Country, blank=True)
    def __unicode__(self):
        return self.name 
```

行政：

```
from dbaccess.models import *
from django.contrib import admin

admin.site.register(Vaccine)
admin.site.register(Disease)
admin.site.register(Country)
admin.site.register(Medicine) 
```

编辑：我检查了 disease_vaccine 和 disease_countries 确实包含项目，因此当在管理员中再次打开疾病时，它们被保存，只是没有显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T10:58:06.970

尝试做：

```
class DiseaseAdmin(admin.ModelAdmin):
    pass

admin.site.register(Disease, DiseaseAdmin) 
```

# regex - Mod_rewrite 未按预期工作

> ID：10320029
> 
> 赞同：0
> 
> 时间：2012-04-25T16:39:09.197
> 
> 标签：regex, apache, mod-rewrite

我正在尝试将特定的结构化 url 重写为另一个结构。

原来的网址是

[http://www.mywebsite.com/FF_Supersneaker_Black_Metallica_p/155-157.htm](http://www.mywebsite.com/FF_Supersneaker_Black_Metallica_p/155-157.htm)

我正在尝试将其重写为

[http://www.mywebsite.com/FF_Supersneaker_Black_Metallica.html](http://www.mywebsite.com/FF_Supersneaker_Black_Metallica.html)

基本上删除“_p/155-157.htm”并附加.html

我用来执行此操作的 htaccess 文件是

```
<IfModule mod_rewrite.c>  
    RewriteEngine On    
    RewriteRule /(.*)/(.*)_p/[^/]*.htm$ /$1$2.html
</IfModule> 
```

但它似乎失败了，这是我进入页面时得到的重写日志。

```
255.255.255.255 - - [25/Apr/2012:12:34:43 --0400] [www.mywebsite.com/sid#9b25ed8][rid#9e33c28/initial] (3) [perdir /var/www/test/] strip per-dir prefix: /var/www/test/FF_Supersneaker_Black_Metallica_p/155-157.htm -> FF_Supersneaker_Black_Metallica_p/155-157.htm
255.255.255.255 - - [25/Apr/2012:12:34:43 --0400] [www.mywebsite.com/sid#9b25ed8][rid#9e33c28/initial] (3) [perdir /var/www/test/] applying pattern '/(.*)/(.*)_p/[^/]*.htm$' to uri 'FF_Supersneaker_Black_Metallica_p/155-157.htm'
255.255.255.255 - - [25/Apr/2012:12:34:43 --0400] [www.mywebsite.com/sid#9b25ed8][rid#9e33c28/initial] (1) [perdir /var/www/test/] pass through /var/www/test/FF_Supersneaker_Black_Metallica_p/155-157.htm 
```

我相信我的规则似乎有问题，但我不确定是什么。如果有人能给我一些想法，我将不胜感激。

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T16:46:12.523

首先，看看这个：

```
strip per-dir prefix: /var/www/test/FF_Supersneaker_Black_Metallica_p/155-157.htm -> FF_Supersneaker_Black_Metallica_p/155-157.htm 
```

您匹配的路径实际上是`FF_Supersneaker_Black_Metallica_p/155-157.htm`因为您在目录上下文中运行（来自`.htaccess`文件）。所以它不会匹配任何以`/`...开头的东西

这表明你真正想要的只是......

```
RewriteRule (.*)_p/[^/]*.htm$ /$1.html 
```

...如果您希望结果是：

```
FF_Supersneaker_Black_Metallica.html 
```

# jena - 是否有任何免费的猫头鹰推理器可以在不将所有数据加载到内存的情况下进行推理？

> ID：10320031
> 
> 赞同：5
> 
> 时间：2012-04-25T16:39:15.657
> 
> 标签：jena, owl, inference

我使用 Jena 和 TDB 来存储 RDF，我想对它做一些推断。但是 RDF 数据很大，Jena 的猫头鹰推理器必须将所有数据加载到内存中。所以我想找到一个推理器，可以在不将所有数据加载到内存的情况下进行推理，有没有一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T17:29:25.210

并不真地。DL 推理即使在小规模下也难以计算。有*大量*数据，这不适用于现有方法。在二级存储上做这件事仍然是一个开放的研究问题。

但是，存在各种 OWL 配置文件来解决这个问题。它们都有不同的计算复杂性，这些都比深度学习“更容易”，这使得它们更适合大规模推理。特别是，QL 专为查询时间推理而设计，根据我的经验，它往往具有非常小的内存占用，而 RL 可以使用标准规则推理器来实现。

因此，如果您不需要使用 DL，那么我会使用支持其中一个配置文件的工具，并且您应该从中获得相当不错的收益。

作为参考，您可能会发现这份关于各种 OWL 方言的计算复杂性的文档很有趣[。](http://www.w3.org/TR/owl2-profiles/#Computational_Properties)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T08:19:27.003

如果您准备采用 OWL 的一个子集，您可以以流处理方式执行某些操作，而无需将所有 RDF 数据加载到内存中，这将实现所有推断的三元组。

举个例子，看看 RIOT 的 infer 命令：

*   [http://incubator.apache.org/jena/documentation/io/riot.html#inference](http://incubator.apache.org/jena/documentation/io/riot.html#inference)

源代码在这里：

*   [https://svn.apache.org/repos/asf/incubator/jena/Jena2/ARQ/tags/jena-arq-2.9.0-incubating/src/main/java/riotcmd/infer.java](https://svn.apache.org/repos/asf/incubator/jena/Jena2/ARQ/tags/jena-arq-2.9.0-incubating/src/main/java/riotcmd/infer.java)
*   [https://svn.apache.org/repos/asf/incubator/jena/Jena2/ARQ/tags/jena-arq-2.9.0-incubating/src/main/java/org/openjena/riot/pipeline/inf/推理处理器RDFS.java](https://svn.apache.org/repos/asf/incubator/jena/Jena2/ARQ/tags/jena-arq-2.9.0-incubating/src/main/java/org/openjena/riot/pipeline/inf/InferenceProcessorRDFS.java)
*   [https://svn.apache.org/repos/asf/incubator/jena/Jena2/ARQ/tags/jena-arq-2.9.0-incubating/src/main/java/org/openjena/riot/pipeline/inf/ InferenceSetupRDFS.java](https://svn.apache.org/repos/asf/incubator/jena/Jena2/ARQ/tags/jena-arq-2.9.0-incubating/src/main/java/org/openjena/riot/pipeline/inf/InferenceSetupRDFS.java)

使用 RIOT 的推断并将其与 MapReduce 之类的东西并行运行是微不足道的，示例如下：

*   [https://github.com/castagna/tdbloader4/blob/f5363fa49d16a04a362898c1a5084ade620ee81b/src/main/java/org/apache/jena/tdbloader4/InferDriver.java](https://github.com/castagna/tdbloader4/blob/f5363fa49d16a04a362898c1a5084ade620ee81b/src/main/java/org/apache/jena/tdbloader4/InferDriver.java)

另一种使用 MapReduce 应用 RDFS 和 OWL ter Horst 规则并实现所有派生语句的不同方法在这里：

*   [http://www.few.vu.nl/~jui200/webpie.html](http://www.few.vu.nl/~jui200/webpie.html)

也许，您可以查看您感兴趣的 OWL 部分，并检查您是否可以以流媒体方式进行操作。如果是这样，您可以使用 RIOT 的推断并对其进行扩展，添加您感兴趣的 OWL 部分。这将是对 Apache Jena 的一个很好的贡献（如果您想这样做，请与 jena-dev 邮件列表联系） .

WebPIE 是一个聪明而有趣的项目，但正如您所见，它有点复杂，而且它是一个研究项目（从长期支持和维护的角度来看，这意味着）。但是，如果您想要/需要的是 OWL ter Horst，WebPIE 就可以了。如果其他人有兴趣使用它，您甚至可以付出努力，分叉 WebPIE 并将其贡献给开源项目。

您可能也有兴趣查看 Ymris（但这目前正在睡觉...... zzzzz）：

*   [https://svn.apache.org/repos/asf/incubator/jena/Import/Jena-SVN/Ymris/trunk/](https://svn.apache.org/repos/asf/incubator/jena/Import/Jena-SVN/Ymris/trunk/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-27T01:36:56.427

您可能想尝试 GRAKN.AI，它们对分布式系统中的持久数据进行实时推理。

# ruby-on-rails - 如何在 ActiveRecord 中使用 :inverse_to

> ID：10320035
> 
> 赞同：1
> 
> 时间：2012-04-25T16:39:38.427
> 
> 标签：ruby-on-rails, activerecord

## :inverse_to 不适用于我的复杂案例

```
class Communication::Message < ActiveRecord::Base
  belongs_to :conversation_for_proposal, {
    :class_name  => 'Communication::Conversation::ForProposal',
    :foreign_key => :conversation_id,
    :inverse_of  => :messages_for_proposal
  }
end

class Communication::Conversation::ForProposal < ActiveRecord::Base
  has_many :messages_for_proposal, {
    :class_name  => 'Communication::Message',
    :foreign_key => :conversation_id,
    :inverse_of  => :conversation_for_proposal
  }
end 
```

**问题：Communication::Conversation::ForProposal 不知道消息**

```
Communication::Conversation::ForProposal.new.messages_for_proposal.build.conversation_for_proposal # => ok

Communication::Message.new.build_conversation_for_proposal.messages_for_proposal # => [] 
```

思考：

```
Communication::Message.reflect_on_association(:conversation_for_proposal).active_record
# => Communication::Message

Communication::Message.reflect_on_association(:conversation_for_proposal).inverse_of.active_record
# => Communication::Conversation::ForProposal 
```

我想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T17:01:07.880

您需要指定 :inverse_of 选项。

```
class Post < AR::Base
  has_many :comments, :inverse_of => :post
end

class Comment < AR::Base
  belongs_to :post, :inverse_of => :comments
end 
```

# objective-c - 为什么我不能在 iOS 中删除 NSMutableArray 的所有对象？

> ID：10320039
> 
> 赞同：0
> 
> 时间：2012-04-25T16:39:50.930
> 
> 标签：objective-c, ios, cocoa

我正在使用 ARC 开发使用 sqlite 数据库进行搜索的应用程序。

当 UISearchBar 的 textDidChange 事件发生时，我必须将数据从数据库检索到 NSMutableArray 以显示检索到的数据。

当 UISearchBar 的 textDidChange 时，它​​从数据库中检索了大量数据。

从数据库中检索到大量数据后，我总是使用以下代码从 NSMutableArray 中清除。

```
[self.myArrayData removeAllObjects]; 
```

但是我从 NSMutableArray 中删除了所有数据，内存分配仍在发生。没有减少。

下次当我在 UISearchBar 中输入内容时，内存分配仍在增加。在我输入 10 次或以上后，我收到来自 XCodes 的内存警告和内存不足。

我想知道为什么当我调用 removeAllObjects 方法时来自 NSMutableArray 的数据不清楚。我正在使用 ARC 开发我的应用程序。请帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T16:46:28.243

您在这里没有很多信息，但它可能不是 NSMutableArray 持有数据。SQLite 还保留最近检索记录的缓存。您可以在打开数据库后通过执行此操作来减少/删除 SQLCache。将缓存大小设置为您希望 SQLite 缓存的页数。默认值为 2000。每页大小为 1024 字节。

```
 const char *pragmaSql = "PRAGMA cache_size = 0";
    if (sqlite3_exec(database, pragmaSql, NULL, NULL, NULL) != SQLITE_OK) {
        NSAssert1(0, @"Error: failed to execute pragma statement with message '%s'.", sqlite3_errmsg(database));
    } 
```

编辑：从技术上讲，您不能将缓存减少到 10 以下。如果您尝试，程序只会将缓存设置为 10。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T22:51:56.117

如果在`[self.myArrayData removeAllObjects];` `[self.myArrayData count] == 0`你确定你的数组已经删除了它的对象并减少了它们的保留计数之后......但是如果其他对象仍然拥有它们，它们实际上不会被`dealloc`ed......所以这些对象可能会过度`retained`泄漏，或者它们可能只是由其他东西拥有。

# c++ - 指针的多态性

> ID：10320040
> 
> 赞同：-1
> 
> 时间：2012-04-25T16:39:53.097
> 
> 标签：c++, constructor, polymorphism

我正在使用 a `boost::ptr_vector`，但我相信这也适用于标准`std::vector`。我正在尝试将指向对象的指针多态地放入`boost::ptr_vector`层次结构中，因为我有一个`Entity`继承自`Object`使用该行创建的对象

```
Object * newObject = new Entity(param1, param2);  // then I attempt to add it to the ptr_vector 
```

但是如果我打破程序（Visual Studio 2010）来查看正在保存的内容，则指针永远不会从垃圾中重定向，并且垃圾正在被保存。我单步执行代码，它确实进入了参数化构造函数，并遵循正确的逻辑步骤。

我不确定出了什么问题。我是否需要在父级或子级中具有特定的成员函数才能使这种多态行为起作用（当前所有子级都具有其类型独有的参数化构造函数，以及析构函数以及多态交互方法）。我必须有赋值运算符，还是应该在`Object`类中有构造函数。

似乎对运算符的调用`new`不是解析为对象，而是解析为其他内容，但 VS2010 并没有引发错误。

* * *

编辑：解释应该发生的事情。

穿过 2D `std::vector`（矩形/非锯齿状）

用于`case/switch`确定要生成的对象，并添加到结构中

创建指向 Object 的指针，并分配给 new // 我认为这就是问题所在

然后将该指针的引用推送到管理器成员`boost::ptr_vector`

在 Visual Studio 2010 中，我在创建指针的行处放了一个断点，并分配新的（多态的）和一个用于观察指针的`push_back()`行`boost::ptr_vector`。临时指针值被创建，并进入构造函数，它遵循该构造函数的所有逻辑步骤，当构造函数完成时，堆栈返回到调用构造函数的行，指针仍然是相同的值（我认为这是可接受），但是当我查看它指向的对象时，所有值都显示为问号（包括静态组合的成员对象）。然后当推回触发并进入 boost-header 时，该`x`值显示相同的信息。

似乎正在创建指针，并且创建了对象的数据，但是一旦构造函数完成，它实际上并没有将值分配给父类对象，这对于多态行为应该相当简单。

关注的示例标头（真正的标头确实具有成员变量，并且它们的实现位于单独的 cpp 文件中）：

```
class Object{
public :
    virtual void interact(int action, Object& source){}
    virtual void updateObject(float duration){}
    virtual ~Object(){}
    bool operator==(const Object& _other)const;
    bool operator!=(const Object& _other)const;
};

class Entity : public Object{
public:
    Entity(Vector3 location, Type thisType, SpecialType difficulty=noSpecial);
    ~Entity();
    void interact(int action, Object& source);
    void updateObject(float duration);
}; 
```

* * *

编辑：更改上下文以更好地解决手头的问题，并获得解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T16:44:37.870

指针值只有在构造函数完成*后*才会改变，这不是问题。这是合乎逻辑的，因为首先对临时指针进行操作，并且仅将它分配给您的指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T18:07:29.713

后

```
Object * newObject = new Entity(param1, param2); 
```

您将`newObject`指向新创建的对象。虽然构造函数正在运行，`newObject`但仍未分配。如果你之后有

```
vec.push_back(newObject); 
```

您可以进入该`push_back`方法并查看参数是`Object`具有引用`Entity`方法的虚拟表。（你至少有一个虚拟析构函数，对吧？）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T14:30:43.673

根据您发布的内容，很难（如果可能的话）确定问题，更不用说它是如何发生的/如何解决它。

也许最好从实际可行的东西开始，并添加您需要的功能，或者至少了解您偏离预期/有效的地方。因此，这里有一个动态创建对象的小示例，将它们放入 a`ptr_vector`中，在每个对象中使用一个虚函数来验证容器中的内容是否符合预期，然后让容器超出范围（在此过程中，销毁它包含的指针引用的对象）。

```
#include "boost/ptr_container/ptr_vector.hpp"
#include <iostream>
#include <string>
#include <sstream>

class Object { 
    std::string name;
public:
    Object(std::string const &n) : name(n) {}

    virtual std::ostream &write(std::ostream &os) const {
        return os << name;
    }

    virtual ~Object() { std::cout << "Object being destroyed\n"; }
};

class Entity : public Object { 
    int value;
public:
    Entity(int v, std::string name) : Object(name), value(v) {}

    std::ostream &write(std::ostream &os) const { 
        return os << "Entity: " << value;
    }
    ~Entity() { std::cout << "Entity being destroyed\n"; }  
};

int main() { 
    boost::ptr_vector<Object> objects;

    for (int i=0; i<10; i++) {
        std::stringstream name;
        name << "object: " << i;
        if (i & 1)
            objects.push_back(new Object(name.str()));
        else
            objects.push_back(new Entity(i, name.str()));
    }

    boost::ptr_vector<Object>::iterator pos;
    for (pos = objects.begin(); pos != objects.end(); pos++) {
        pos->write(std::cout);
        std::cout << "\n";
    }
    return 0;
} 
```

至少对我来说，输出看起来像这样：

```
Entity: 0
object: 1
Entity: 2
object: 3
Entity: 4
object: 5
Entity: 6
object: 7
Entity: 8
object: 9
Entity being destroyed
Object being destroyed
Object being destroyed
Entity being destroyed
Object being destroyed
Object being destroyed
Entity being destroyed
Object being destroyed
Object being destroyed
Entity being destroyed
Object being destroyed
Object being destroyed
Entity being destroyed
Object being destroyed
Object being destroyed 
```

对于它的价值，请注意析构函数 - 当 an`Object`被销毁时，仅调用基本 dtor，但是当 an`Entity`被销毁时，首先调用派生 dtor，然后调用基本 dtor（所以我们看到两个'实体被销毁' 和 '对象被破坏")。

# matlab - MatLab 绘制函数矩阵维数误差

> ID：10320041
> 
> 赞同：0
> 
> 时间：2012-04-25T16:39:57.727
> 
> 标签：matlab

我写了一个简单的函数

```
function[] = myfun(p,q)
fminbnd(@(x)myfun1(q,p,b),0,1) 
```

其中 myfun1 的输出来自函数 quad。

如何绘制 myfun？我试过 fplot(@(x)myfun(1,x),0,1) 但这给了我一个矩阵尺寸必须同意的错误......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T17:52:04.307

您的问题没有包含足够的信息来准确确定问题所在，但一个问题肯定是`myfun`没有返回任何输出。`fplot`如果函数没有返回任何内容，应该绘制什么？

尝试

```
function out = myfun(p,q)
%# you may want to define b here
out = fminbnd(@(x)myfun1(q,p,b),0,1); 
```

如果这不能解决问题，请通过`dbstop if error`在命令行键入来打开调试模式。这将显示错误发生的确切位置，并允许您检查变量的正确形状。

# javascript - 检查文本的 URL，然后使用 jquery 或 js 将类添加到 li

> ID：10320051
> 
> 赞同：0
> 
> 时间：2012-04-25T16:40:15.930
> 
> 标签：javascript, jquery, css

我的网址如下所示：

```
http://www.site.co.uk/en-us/aboutus/abgroup.aspx

http://www.site.co.uk/en-us/casestudies.aspx 
```

这是菜单 HTML 标记

```
<ul class="sf-menu">
    <li class="first"><a href="http://www.site.co.uk/en-us/home.aspx">Home</a></li>
    <li class=""><a href="http://www.site.co.uk/en-us/aboutus/abgroup.aspx">About Us</a></li>
    <li class=""><a href="http://www.site.co.uk/en-us/casestudies.aspx">Case Studies</a></li>
</ul> 
```

如何阅读 URL 并查找 /aboutus/ 并突出显示该特定列表项？我也想用 casetudies << 这是不同的，因为它没有子目录。

我想用jquery？我想我需要解析网址？然后检查单词，然后在 li 中添加一个类或粗体？？

**编辑**：我想知道浏览器中的 URL 是什么，它应该与 jquery 中的检查相匹配，然后将 li 设为粗体或添加一个类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T16:46:05.163

这种方法没什么太复杂的：

```
$(document).ready(function() {
    $("ul.sf-menu li a").each(function() {
        if ($(this).attr('href').match(/aboutus/) && window.location.match(/aboutus/)) {
            $(this).parent().addClass('aboutus-highlight');
        }
        if ($(this).attr('href').match(/casestudies/) && window.location.match(/casestudies/)) {
            $(this).parent().addClass('casestudies-highlight');
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T16:46:11.730

给每个菜单元素一个 ID：

```
<ul class="sf-menu">
    <li class="first" id="home"><a href="http://www.site.co.uk/en-us/home.aspx">Home</a></li>
    <li class="" id="aboutus"><a href="http://www.site.co.uk/en-us/aboutus/abgroup.aspx">About Us</a></li>
    <li class="" id="casestudies"><a href="http://www.site.co.uk/en-us/casestudies.aspx">Case Studies</a></li>
</ul> 
```

并使用这个 jQuery：

```
$(function() {
    var currentPage = window.location.href.split("/")[4]);​​​​​​
    $(".sf-menu li")each(function() {
        if($(this).attr("href").indexOf(currentPage) > -1) $(this).addClass("highlight");
    });
} 
```

​</p>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T16:49:16.947

简单地：

```
$('a[href*="/aboutus/"]').css('color', 'red'); 
```

请参阅[jsFiddle 示例](http://jsfiddle.net/powtac/tGKZZ/1/)。

* * *

**更新：**

如果您想知道浏览器中的当前 URL 是否与其中一个链接匹配，请使用以下命令：

```
$('a[href*="'+window.location.href+'"]').css('color', 'red'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T16:43:29.957

```
<?php if ($_SERVER["SCRIPT_NAME"] == "/en-us/aboutus/abgroup.aspx") { //whatever } ?> 
```

哦，你想要js，在这里：

```
<script style='text/javascript'>
function checkURL() {
    if(window.location == "http://www.site.co.uk/en-us/aboutus/home.aspx") {
    document.getElementById('home').style.background = "yellow";
    } else if (window.location == "http://www.site.co.uk/en-us/aboutus/abgroup.aspx") {
    document.getElementById('abgroup').style.background = "yellow";
    } else {
    document.getElementById('casestudies').style.background = "yellow";
    }
}
</script>
<body onload='checkURL()'>
<ul class="sf-menu">
  <li class="first" id='home'><a href="http://www.site.co.uk/en-us/home.aspx">Home</a></li>
  <li class="" id='abgroup'><a href="http://www.site.co.uk/en-us/aboutus/abgroup.aspx">About Us</a></li>
   <li class="" id='casestudies'><a href="http://www.site.co.uk/en-us/casestudies.aspx">Case Studies</a></li>
</ul> 
```

是的，这行得通

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-25T16:44:01.333

您不需要解析 URL，因为 href 应该匹配它（根据您的示例），所以这应该可以工作。

```
$('a[href=' + window.location.toString() +']').parents('ul').eq(0).addClass('highlight'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-25T16:48:50.223

如果您想突出显示 /aboutus/ 下的任何页面 - 也就是说，您不只有这一页，而是几个，但您确实希望突出显示关于我们的菜单项：

```
if(window.location.indexOf('aboutus') != -1){
       $('.sf-menu a[href$="aboutus/abgroup.aspx"]).addClass('here');
 } 
```

然后做你的造型：

```
.sf-menu .here { background: red; } 
```

或者你想要的任何其他东西。

# agda - ≡-推理和“与”模式

> ID：10320052
> 
> 赞同：13
> 
> 时间：2012-04-25T16:40:25.073
> 
> 标签：agda

我正在证明 和 的一些性质`filter`，`map`一切都非常顺利，直到我偶然发现了这个性质：`filter p (map f xs) ≡ map f (filter (p ∘ f) xs)`. 这是相关的代码的一部分：

```
open import Relation.Binary.PropositionalEquality
open import Data.Bool
open import Data.List hiding (filter)

import Level

filter : ∀ {a} {A : Set a} → (A → Bool) → List A → List A
filter _ [] = []
filter p (x ∷ xs) with p x
... | true  = x ∷ filter p xs
... | false = filter p xs 
```

现在，因为我喜欢使用该`≡-Reasoning`模块编写证明，所以我尝试的第一件事是：

```
open ≡-Reasoning
open import Function

filter-map : ∀ {a b} {A : Set a} {B : Set b}
             (xs : List A) (f : A → B) (p : B → Bool) →
             filter p (map f xs) ≡ map f (filter (p ∘ f) xs)
filter-map []       _ _ = refl
filter-map (x ∷ xs) f p with p (f x)
... | true = begin
  filter p (map f (x ∷ xs))
    ≡⟨ refl ⟩
  f x ∷ filter p (map f xs)
--  ... 
```

但很可惜，这并没有奏效。试了一个小时，终于放弃了，用这种方式证明：

```
filter-map (x ∷ xs) f p with p (f x)
... | true  = cong (λ a → f x ∷ a) (filter-map xs f p)
... | false = filter-map xs f p 
```

仍然好奇为什么通过`≡-Reasoning`没有工作，我尝试了一些非常微不足道的事情：

```
filter-map-def : ∀ {a b} {A : Set a} {B : Set b}
                 (x : A) xs (f : A → B) (p : B → Bool) → T (p (f x)) →
                 filter p (map f (x ∷ xs)) ≡ f x ∷ filter p (map f xs)
filter-map-def x xs f p _  with p (f x)
filter-map-def x xs f p () | false
filter-map-def x xs f p _  | true = -- not writing refl on purpose
  begin
    filter p (map f (x ∷ xs))
  ≡⟨ refl ⟩
    f x ∷ filter p (map f xs)
  ∎ 
```

但是 typechecker 不同意我的看法。似乎当前目标仍然存在`filter p (f x ∷ map f xs) | p (f x)`，即使我在 上进行模式匹配`p (f x)`，`filter`也不会减少到`f x ∷ filter p (map f xs)`.

有没有办法让这个工作`≡-Reasoning`？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T15:17:55.987

-clauses的问题`with`在于 Agda 会忘记它从模式匹配中学到的信息，除非您事先安排好保留这些信息。

更准确地说，当 Agda 看到一个`with expression`子句时，它会将`expression`当前上下文和目标中`w`所有出现的

在您的情况下，您`filter p (map f (x ∷ xs))`在 with-block 内写入，因此在 Agda 执行重写后它进入范围，因此 Agda 已经忘记了这个事实`p (f x)`并且`true`不会减少该术语。

您可以使用标准库中的“检查”模式之一来保留相等性证明，但我不确定它在您的情况下如何有用。

# wpf - WPF 中两个 ListBox 之间的通信

> ID：10320054
> 
> 赞同：2
> 
> 时间：2012-04-25T16:40:42.030
> 
> 标签：wpf, mvvm, viewmodel, publish-subscribe

我想为商店构建一个 WPF 后端应用程序。一个视图应该包含 2 个列表框。1 表示可以购买的项目，1 表示类别。

我想根据选择将项目变灰。现在更多细节：

到目前为止，我的视图模型有一个`ObservableCollection<ShopItem>` ，类`ShopItem`有一个`price`，`title`和一个`list of Categories`

我想绑定`ShopItems`到 1`ListBox`和 Distinct`Category`到另一个 2nd`ListBox` 因为 a`ShopItem`可以有多个类别，所以我想将`categories`属于 Selected 的所有其他类别变灰`ShopItem`。所以我第一次的选择`listbox`应该控制我第二次的表现`listbox`。

另一方面，当我选择 a 时，`category`我想将`ShopItems`属于该 的所有其他都变灰`category`。所以再次`listbox`2也应该影响`listbox`1的外观。

“变灰”是指这些项目应该有另一种风格。

我看到了一些关于 MultiTrigger 的东西，它可以根据条件换出模板样式。我不确定我是否可以只绑定我的`ObservableCollection<ShopItem>`或者需要在这里有两个列表。我是否需要两个列表之间的一些发布/订阅。我想避免在每次选择更改时遍历视图模型中的所有元素，这里有什么想法吗？我现在正在摸索如何解决这个问题。任何建议都会很棒...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T23:50:28.053

我不确定您是否可以通过迭代集合来将列表更改为灰色，然后列表中的每个项目都必须通知更改。以下是您如何做到这一点的示例。您可以在哪里`IsSelected`定义 a`ValueConverter`来更改字体颜色。

```
class ViewModel : ViewModelBase
{
    //displayed on the first list
    public ObservableCollection<ShopItemViewModel> Shops { get; private set; }

    //displayed on the second list
    public ObservableCollection<CategoryViewModel> AllCategories { get; private set; }

    //when the user clicks an item on the first list
    private ShopItemViewModel _selectedShop;
    public ShopItemViewModel SelectedShop
    {
        get { return _selectedShop; }
        set
        {
            _selectedShop = value;
            RaisePropertyChanged("SelectedShop");
            foreach (CategoryViewModel cat in AllCategories)
                cat.Refresh();
        }
    }

    //when the user clicks an item on the second list
    private CategoryViewModel _selectedCat;
    public CategoryViewModel SelectedCategory
    {
        get { return _selectedCat; }
        set
        {
            _selectedCat = value;
            RaisePropertyChanged("SelectedCategory");
            foreach (ShopItemViewModel shops in Shops)
                shops.Refresh();
        }
    }
}

class ShopItemViewModel : ViewModelBase
{
    public ObservableCollection<CategoryViewModel> Categories { get; private set; }

    public ShopItemViewModel(ViewModel vm)
    {
        _vm = vm;
    }
    private ViewModel _vm;

    public void Refresh()
    {
        RaisePropertyChanged("IsSelected");
    }

    public bool IsSelected
    {
        get
        {
            if (_vm.SelectedCategory != null)
            {
                return Categories.Contains(_vm.SelectedCategory);
            }
            return true;
        }
    }
}

class CategoryViewModel : ViewModelBase
{
    public CategoryViewModel(ViewModel vm)
    {
        _vm = vm;
    }
    private ViewModel _vm;

    public string Title { get; set; }

    public void Refresh()
    {
        RaisePropertyChanged("IsSelected");
    }

    public bool IsSelected
    {
        get
        {
            if (_vm.SelectedShop != null)
            {
                return _vm.SelectedShop.Categories.Contains(this);
            }
            return false;
        }
    }
} 
```

# c# - 我有 2 个具有相同结构的数据库，如何使用它们/将它们与 Linq O/R 接口？

> ID：10320057
> 
> 赞同：0
> 
> 时间：2012-04-25T16:40:51.233
> 
> 标签：c#, linq

我有两个数据库： - 一个开发数据库（用于测试和开发） - 一个生产数据库（由最新版本使用）

我可以使用 VS2010 设计器成功地将我的 DEV 数据库连接到 Linq（拖放我感兴趣的表，其余的会生成）。这为我创建了一个 dev.dbml，然后，我可以实例化派生自 DataContext 的类，它免费为我提供漂亮的强类型 Linq 容量，这将反映数据库中用于静态代码编写的更改。

我的程序是一个 .exe，它带有一个字符串参数：“dev”或“prod”。分别地，我想透明地使用“dev”或“prod”数据库，而不会失去 Linq 的强类型和自动生成优势。更重要的是，代码必须是数据库通用的。

1.  也许一种解决方案是以某种方式使用 dev.dbml 中声明的设置，但在数据源上引入灵活性。我知道这可能会在“prod”中引入失败（即存在于“dev”中的表不在“prod”中）但我会在每次发布时将“dev”结构复制到“prod” .

2.  我正在研究的另一个解决方案是为 DataContext 编写一个包装器，但这会迫使我将数据库中的手动实体复制到代码中......这里的示例：http: [//andrewtokeley.net/archive/2008/07/06/mocking -linq-to-sql-datacontext.aspx](http://andrewtokeley.net/archive/2008/07/06/mocking-linq-to-sql-datacontext.aspx)

3.  我会看到的另一个解决方案是将 dev.dbml 和 prod.dbml 映射到它们各自的数据库，但是，如何提供通用代码的可能性？

你将如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T16:44:24.773

LINQ-to-SQL 将其连接字符串存储在应用程序配置文件中，这是默认构造函数所使用的。它应该提供一个构造函数，允许您传入自己的连接字符串。只需使用它在运行时将连接字符串传递到您要连接的任何数据库。

当然，这确实要求您连接到的任何数据库都具有与您设计时相同的表、列等。

# task-parallel-library - 在 .Net 4.0 与 .Net 4.5 中使用任务？

> ID：10320058
> 
> 赞同：0
> 
> 时间：2012-04-25T16:40:53.653
> 
> 标签：task-parallel-library, task, .net-4.5, c#-5.0

当我运行这段代码时

```
 private void button1_Click(object sender, EventArgs e)
    {
        Start(sender, e);
    }

    private void Start(object sender, EventArgs e)
    {
        for (int i = 0; i < 5; i++)
        {
            System.Threading.Tasks.Task.Factory.StartNew(() => dosomething(i));
            Debug.WriteLine("Called " + i);
        }
        Debug.WriteLine("Finished");

    }
    public void dosomething(int i)
    {
        Debug.WriteLine("Enters " + i);
        lock (this)
        {
            Debug.WriteLine("Working " + i);
            Thread.Sleep(100);
        }
        Debug.WriteLine("Done " + i);
    } 
```

.Net 4.0 和 4.5 版的输出不同。随着 4.0 数字 5 重复，我可以看到 i 的原因值在一些任务执行之前被移动到 5，但是 4.5 的相同代码显示不同的输出。

（输出使用 VS 2010 .Net 4.0 运行）

```
Called 0
Called 1
Enters 1
Working 1
Called 2
Called 3
Called 4
Finished
Enters 0
Done 1
Enters 5
Working 0
Working 5
Done 0
**Enters 5
Working 5
Done 5
Enters 5
Done 5
Working 5
Done 5** 
```

但是当我使用.Net 4.5（VS 2011 beta）运行时，结果是，

（输出与 VS 2011 beta .Net 4.5 一起运行）

```
Enters 0
Working 0
Called 0
Called 1
Enters 2
Called 2
Enters 2
Enters 3
Called 3
Called 4
Finished
Done 0
Working 2
Enters 5
Done 2
Working 3
Done 3
Working 5
Done 5
Working 2
Done 2 
```

我看不到 CLR 4.5 下的 Task 所做的更改？谁能指出.Net 4.5的变化是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T18:00:42.800

您的代码有竞争条件。假设循环在任何任务开始之前完成执行。这是完全可能的。

*然后我在所有*任务中的值为 5 。这是错误。

解决方案：将 i 复制到一个循环局部变量并在任务的 lambda 中使用这个局部变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T17:09:12.613

您的代码有[竞争条件](http://en.wikipedia.org/wiki/Race_condition)。这意味着它可以以各种方式运行，具体取决于操作的确切顺序。

而且任何微小的变化都可能影响操作的顺序，所以你的代码在不同版本的框架下会有不同的表现也就不足为奇了。实际上，我希望它在为同一版本的 .net 运行多次时表现不同。

# jquery - ASPxUploadControl - 上传前预览图像？

> ID：10320060
> 
> 赞同：1
> 
> 时间：2012-04-25T16:41:06.977
> 
> 标签：jquery, asp.net, vb.net, devexpress

有没有办法通过使用 ASPxUploadControl 在浏览后单击“确定”按钮时自动上传图像，然后显示所述图像的预览，但只有在单击“确定”按钮后才正式将图像上传到服务器？

我发现[http://www.devexpress.com/Support/Center/p/E2531.aspx](http://www.devexpress.com/Support/Center/p/E2531.aspx)看起来像是自动上传，但这就是我迄今为止发现的所有内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T16:25:00.287

好吧，当您尝试在使用`ASPxUploadControl`或任何其他控件上传后显示图像时，您必须将图像上传到服务器上。因此，一种可能的方法是，您可以`ASPxUploadControl`暂时在服务器上上传图像并显示图像。当用户单击`OK`按钮时，将此图像从该临时目录移动到最终目录。如果用户没有单击`OK`或单击`cancel`，则从临时目录中删除该图像。因此，无论哪种方式，该临时目录都将始终免费。

# java - 如何使用 servlet 在 postgresql 数据库中存储 pdf 文件？

> ID：10320062
> 
> 赞同：0
> 
> 时间：2012-04-25T16:41:25.167
> 
> 标签：java, file, postgresql, servlets

我正在从 HTML 上传文件

```
 <center><form action="pdf" method="post" enctype="multipart/form-data">
       <b>Upload Certificate</b>
       <input type="file" name="file"/></center>
      <center> <input type="submit" /></center>
</form> 
```

在提交表单时，会调用 pdf Servlet。在 servlet 内部，请求对象被解析并使用 InputStream 读取文件（pdf），如下面的代码所示。

```
protected void doPost(HttpServletRequest paramHttpServletRequest, HttpServletResponse paramHttpServletResponse)
    throws ServletException, IOException
  {
    try
    {
      List localList = new ServletFileUpload(new DiskFileItemFactory()).parseRequest(paramHttpServletRequest);
      for (FileItem localFileItem : localList)
      {
        String str1 = localFileItem.getFieldName();
        String str2 = FilenameUtils.getName(localFileItem.getName());
        System.out.println("fieldname:" + str1);
        System.out.println("filename:" + str2);
        InputStream localInputStream = localFileItem.getInputStream();
        try
        {
          PdfReader localPdfReader = new PdfReader(localInputStream);
          paramHttpServletResponse.sendRedirect("takedetails.jsp");
        }
        catch (InvalidPdfException localInvalidPdfException)
        {
          paramHttpServletResponse.sendRedirect("upload.jsp");
        }

      }

    }
    catch (FileUploadException localFileUploadException)
    {
      throw new ServletException("Cannot parse multipart request.", localFileUploadException);
    }
  } 
```

如您所见，我使用 InputStream 对象来检查文件格式是否为 pdf。

**现在我想将此 pdf 文件保存到 postgresql 数据库。我应该在 postgresql 中使用什么字段，如何从 InputStream 对象中获取文件以将其存储在数据库中？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T21:12:26.933

目前尚不清楚您使用的是什么持久性 API。JDBC？JPA？很好的冬眠？我将假设 JDBC。在 JDBC 中，您可以使用[`PreparedStatement#setBinaryStream()`](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html#setBinaryStream%28int,%20java.io.InputStream%29)将 a 存储`InputStream`在数据库中，或者[`PreparedStatement#setBytes()`](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html#setBytes%28int,%20byte%5B%5D%29)将 a 存储`byte[]`在数据库中。无论哪种方式，在 PostgreSQL 中，您都需要一个[`bytea`](http://www.postgresql.org/docs/9.0/static/datatype-binary.html)列。

当您首先验证上传的文件时`PdfReader`，这`InputStream`是不合适的。即只能读取一次。每次您需要再次阅读时，客户端不会多次重新发送文件`InputStream`。你需要先复制`InputStream`到一个`byte[]`。

```
ByteArrayOutputStream output = new ByteArrayOutputStream();
IOUtils.copy(localFileItem.getInputStream(), output);
byte[] filecontent = output.toByteArray(); 
```

*（`IOUtils`是 Apache Commons IO 的一部分；如果您使用 FileUpload，那么您已经拥有它）*

不要忘记更改 iText 以使用`byte[]`：

```
PdfReader localPdfReader = new PdfReader(filecontent); 
```

通过 iText 对其进行验证后，您可以`bytea`使用 JDBC 将其存储在 PostgreSQL 列中，如下所示：

```
statement = connection.prepareStatement("INSERT INTO files (name, content) VALUES (?, ?)");
statement.setString(1, filename);
statement.setBytes(2, filecontent);
statement.executeUpdate(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T17:36:21.690

这个[论坛](http://forums.devshed.com/postgresql-help-21/how-to-save-bitmap-image-into-postgresql-100626.html)有一个类似的问题。它使用图像而不是pdf。但程序可能相同。将流保存到文件并将其存储到数据库中。看看这个。也许可以帮助你。

```
For example, suppose you have a table containing the file name of an image and you also want to store the image in a bytea column:

CREATE TABLE images (imgname text, img bytea);

To insert an image, you would use:

File file = new File("myimage.gif");
FileInputStream fis = new FileInputStream(file);
PreparedStatement ps = conn.prepareStatement("INSERT INTO images VALUES (?, ?)");
ps.setString(1, file.getName());
ps.setBinaryStream(2, fis, file.length());
ps.executeUpdate();
ps.close();
fis.close(); 
```

# c++ - How to keep position and names of nodes in Igraph + C

> ID：10320068
> 
> 赞同：0
> 
> 时间：2012-04-25T16:41:30.813
> 
> 标签：c++, c, igraph

Taking into acount [How to keep position of nodes in igraph + R](https://stackoverflow.com/questions/10085046/how-to-keep-position-of-nodes-in-igraph-r), I have a graph of four vertex id(0,1,2,3), name(1,2,3,4) and positions(0,0, 0,1, 1,1, 1,0), for a simple example, I'd like to eliminate vertex id(1), and keep the position and names of the other ones. the next code ilustrates a plot implementation to debug it. I have to do several eliminations while keep the position and names of the others vertex, how to do this in C?

```
#include <igraph.h>
#include <fstream>
#include <iostream>
#include <stdlib.h>

#include <vector>
#include <algorithm>
#include <map>
#include <set>

using namespace std;

void plot(igraph_t g) {
      FILE *ofile;
      ofile=fopen("test.txt", "w+");
      igraph_write_graph_edgelist(&g,ofile);
      fclose (ofile);

      ofstream gp("data.R");
      gp << "library(igraph)"<<endl;
      gp << "library(Cairo)"<<endl;
      gp << "g1 <-read.table(\"test.txt\")"<< endl;
      gp << "g1 <- t(as.matrix(g1))"<< endl;
      gp << "g<-graph(g1,n=4,dir=FALSE)"<< endl;
      gp << "V(g)$name<-c(1:4)"<< endl;
      gp << "V(g)$label<-V(g)$name"<< endl;
      gp << "V(g)$id<-c(0:3)"<< endl;
      gp << "coords <- c(0,0,0,1,1,1,1,0)"<< endl;
      gp << "coords <- matrix(coords, 4,2,byrow=T)"<< endl;
      gp << "plot(g,layout=coords[V(g)$name,])"<< endl;
      gp.close();

      system("R CMD BATCH data.R");
}

int main() {

      igraph_t g;
      igraph_vector_t v;

      igraph_vector_init(&v,8);
      VECTOR(v)[0]=0; VECTOR(v)[1]=1;
      VECTOR(v)[2]=1; VECTOR(v)[3]=2;
      VECTOR(v)[4]=2; VECTOR(v)[5]=3;
      VECTOR(v)[6]=3; VECTOR(v)[7]=0;

      igraph_create(&g, &v, 0,0);

      //plot(g);

      igraph_delete_vertices(&g,igraph_vss_1(1));

      plot(g);

      igraph_destroy(&g);
      igraph_vector_destroy(&v);

      return 0;
} 
```

EDIT PROGRAM BASED ON Chapter 9\. Graph, Vertex and Edge Attributes(Tamás):

I edited the program, now i keep the names but how to get edges in function of these vertex names and then write them in igraph_write_graph_edgelist(&g,ofile)?

```
#include <igraph.h>
#include <fstream>
#include <iostream>
#include <stdlib.h>

#include <vector>
#include <algorithm>
#include <map>
#include <set>

#include <string.h>
#include <stdlib.h>

using namespace std;

void plot(igraph_t g) {
      FILE *ofile;
      ofile=fopen("test.txt", "w+");
      igraph_write_graph_edgelist(&g,ofile);
      fclose (ofile);

      ofstream gp("data.R");
      gp << "library(igraph)"<<endl;
      gp << "library(Cairo)"<<endl;
      gp << "g1 <-read.table(\"test.txt\")"<< endl;
      gp << "g1 <- t(as.matrix(g1))"<< endl;
      gp << "g<-graph(g1,n=4,dir=FALSE)"<< endl;
      gp << "V(g)$name<-c(1:4)"<< endl;
      gp << "V(g)$label<-V(g)$name"<< endl;
      gp << "V(g)$id<-c(0:3)"<< endl;
      gp << "coords <- c(0,0,0,1,1,1,1,0)"<< endl;
      gp << "coords <- matrix(coords, 4,2,byrow=T)"<< endl;
      gp << "plot(g,layout=coords[V(g)$name,])"<< endl;
      gp.close();

      system("R CMD BATCH data.R");
}

int main() {
      igraph_i_set_attribute_table(&igraph_cattribute_table);

      igraph_t g;
      igraph_vector_t v;

      igraph_strvector_t vnames1,vnames2;

      igraph_vector_init(&v,8);
      VECTOR(v)[0]=0; VECTOR(v)[1]=1;
      VECTOR(v)[2]=1; VECTOR(v)[3]=2;
      VECTOR(v)[4]=2; VECTOR(v)[5]=3;
      VECTOR(v)[6]=3; VECTOR(v)[7]=0;

      igraph_create(&g, &v, 0,0);

      igraph_strvector_init(&vnames1, 0);
      igraph_strvector_init(&vnames2, 0);

      SETVAS(&g, "name", 0, "1");
      SETVAS(&g, "name", 1, "2");
      SETVAS(&g, "name", 2, "3");
      SETVAS(&g, "name", 3, "4");

      //plot(g);

      igraph_delete_vertices(&g,igraph_vss_1(1));
      plot(g);

      VASV(&g,"name",&vnames2);

       long int i;
       for (i=0; i<igraph_strvector_size(&vnames2); i++) {
             printf("%s ", STR(vnames2, i));
        }

      igraph_destroy(&g);
      igraph_vector_destroy(&v);

      return 0;
} 
```

Thanks in advance

vacing

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T20:50:09.543

Attach the names and any relevant information to the nodes using vertex attributes; these will be kept even after deletions.

See the relevant section of the documentation: [Chapter 9\. Graph, Vertex and Edge Attributes](http://igraph.sourceforge.net/doc/html/igraph-Attributes.html)

# c++ - RTTI 和异常之间有关系吗？

> ID：10320072
> 
> 赞同：15
> 
> 时间：2012-04-25T16:41:53.227
> 
> 标签：c++, exception, rtti

我记得在同时禁用 RTTI 和异常的平台上以及同时启用它们的其他平台上进行编码。但是，我不记得在一个平台上编码会启用一个和禁用另一个。

这两个概念之间是否存在某种依赖关系？换句话说，异常是否需要 RTTI 才能起作用？还是相反？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-25T16:43:44.507

不，例外不需要 RTTI 功能，反之亦然，两者都是单独的功能。

某些实现可能允许您禁用异常（gcc 中的-fnoexceptions），但我不知道有任何实现需要 RTTI 来处理异常，反之亦然。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-03-14T11:27:33.990

我刚刚阅读了这个 C++ 提案“零开销确定性异常：抛出值”（[http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2018/p0709r0.pdf](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2018/p0709r0.pdf)？），其中我读：

“C++ 允许存在多个任意类型的活动异常对象，它们必须具有唯一的地址并且不能折叠；并且它需要在运行时使用 RTTI 来匹配处理程序，这在所有主要实现中具有静态不可预测的成本，并且可能取决于什么else 链接到整个程序中。”

和其他地方说：

“4) 今天的动态异常需要使用某种形式的 RTTI 来匹配处理程序。”

因此，似乎异常和 RTTI 之间存在关系

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T16:49:04.933

它们不相互依赖，但它们都是重功能，因此如果有一个性能不佳的平台，它们可能会被同时切割。

# javascript - 为什么 knockout.js 以更适合小型项目而闻名，backbone.js 适合大型项目？

> ID：10320074
> 
> 赞同：65
> 
> 时间：2012-04-25T16:41:59.610
> 
> 标签：javascript, backbone.js, knockout.js

我已经使用 knockout.js 几个月了，每天使用它都很开心。不必在 dom 上管理状态或应用您自己的自定义绑定所带来的好处是令人难以置信的，而且我不介意没有开箱即用的模型功能。但是每次我读到 knockout.js 与其他框架的概览时，大家的共识似乎是它很棒，它总体上会减少代码和复杂性，但它更适合较小的项目。这个陈述总是作为事实给出，没有太多解释，所以我对共识似乎是什么感到困惑。（公平地说，我还没有使用过 Backbone，所以不知道它们是如何比较的）

我在两个相当大的项目中使用了它，每个项目都有大约十几个模型和十几个视图模型，并且没有发现它有问题。在大型项目中，我可以看到与 Backbone 相比的唯一缺点是，在应用淘汰赛和管理所有绑定时，您将获得一些不可忽略的性能影响。但这是主要问题还是我还缺少其他东西？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-04-26T00:52:38.967

从我对 Knockout 和 Backbone 的（简短）[比较](http://lostechies.com/derickbailey/2011/11/22/backbone-vs-knockout/)：

> Knockout 旨在在 HTML 和模型之间提供流畅、易于使用的模型绑定。它的实现和使用模式非常类似于 XAML/Silverlight/WPF（考虑到它的来源，这很有意义）。但是，Knockout 不提供模型之外的指导或构造。除了模型和模型绑定之外，开发人员还需要构建结构良好的 JavaScript 应用程序。这通常会导致没有良好 JavaScript 经验的开发人员走上一条糟糕的道路，因为他们没有意识到在使用 Knockout 时需要考虑良好的应用程序结构。当然，这个问题无论如何都不是 Knockout 的错。在许多情况下，这只是对工具提供的内容或如何构建大型 JavaScript 应用程序缺乏了解。

就个人而言，我不喜欢 Knockout。我不是 MVVM 模式的粉丝。我更喜欢 Backbone 的方法，并且我大部分时间都在使用它。但是，我认为关于 Knockout 不适合大型应用程序的“事实”观点是错误的。您可以使用 Knockout 构建非常大、复杂且结构良好的应用程序。但是您必须提供除数据绑定和模型之外的*所有结构。*

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-04-26T16:49:56.883

您会发现 Web 应用程序趋势，就像流行趋势一样，会引发很多自以为是的讨论。大多数时候，没有正确或错误的答案。但是每个人都有自己的个人风格，你只需要找到你的。

就个人而言，我喜欢 Knockout 和 Backbone，并且很高兴得知您实际上不必在它们之间进行选择；您可以使用一个名为“Knockback”的插件，将它们很好地连接在一起。

我喜欢 Backbone 的 MVP 结构，以及 Knockout 的声明式绑定。 如果您想了解更多信息，[我写了一篇关于此的博客文章，并附有一些示例。](http://www.geekdave.com/?p=79)

至于 Knockout 对大型复杂 DOM 的性能影响，您可以通过限制绑定到特定 DOM 元素而不是全局应用来解决这个问题：

```
ko.applyBindings(myViewModel, $('#myElement')[0]); 
```

最后的 [0] 是必要的，因为 Knockout 需要一个 DOM 元素，而不是 jQuery 对象作为第二个参数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-10T18:04:20.777

大型 javascript 应用程序的代码组织是一个具有挑战性的问题，并且完全独立于您使用的框架 - 除非该框架提供了很多自以为是的结构。

考虑到 Backbone.js 和 Knockout.js 都没有推荐的目录结构，或者推荐的生命周期管理方法，并且任何一个相对于另一个缺少的功能都可以用社区支持的插件或独立的微框架来填补，这真的没有意义在应用的规模/复杂性方面考虑一个优于另一个。

附带说明一下，如果目前开始使用大型 javascript 应用程序，如果您更喜欢声明性方法、基于 DOM 属性的数据绑定和 MVVM 模式，则使用 Angular.js 可能比 Knockout.js 更适合，而 Ember.js 可能如果您更喜欢 MVC 和基于字符串的（Handlebars）模板，则比 Backbone.js 更适合。两者都在积极开发中，并且在功能方面并肩比较，并且专门设计用于缓解人们在使用以前出现的 Backbone 和 Knockout 等较小框架的大型应用程序时所面临的问题。

# maven-2 - Maven 复制 src/main/resources/services 文件夹到 /META-INF

> ID：10320078
> 
> 赞同：2
> 
> 时间：2012-04-25T16:42:11.420
> 
> 标签：maven-2

**编辑**

好的，我现在可以更具体了：

我的 scr/main/resources 中有一个 META-INF 文件夹，其中包含**services** /javax.annotation.processing.Processor

我的 pom 还是一样的（有评论）。如果我执行“mvn clean install”，输出 jar 将只包含 META-INF 文件夹。

但是如果我重命名文件夹**services**，输出 jar 包含我的类和 META-INF 文件夹以及新重命名的文件夹和他的内容。

* * *

我有 - 我想 - 对于常规 maven2 用户来说是一个简单的问题。我有一个简单的子项目的简单 pom

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>aida</groupId>
  <version>0.0.1-SNAPSHOT</version>
  <artifactId>aida-annotationProcessors</artifactId>
  <packaging>jar</packaging>
  <name>AIDA Annotation Processors</name>

  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>
    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>1.7</source>
                    <target>1.7</target>
                </configuration>    
            </plugin>
        </plugins>
<!--        <resources> -->
<!--            <resource> -->
<!--                <directory>src/main/resources/services</directory> -->
<!--                <targetPath>META-INF/services</targetPath> -->
<!--            </resource> -->
<!--        </resources> -->
    </build>

    <dependencies>
    </dependencies>

</project> 
```

我的目标很简单：我只想将我的 src/main/resources/services/javax.annotation.processing.Processor 文件复制到我生成的 jar 的 {root}/META-INF/services 文件夹中。

但是如果我取消注释资源部分，我的 jar 将只包含一个没有类的 META-INF 文件夹！

你可以帮帮我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-22T11:50:03.357

这是 maven 编译器插件中的一个错误/功能。

[http://jira.codehaus.org/browse/MCOMPILER-97](http://jira.codehaus.org/browse/MCOMPILER-97)

一种解决方法是禁用包含处理器 -proc:none 的项目的注释处理。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-09T09:49:55.923

一个更灵活的解决方案是使用注释处理器来生成`services/javax.annotation.processing.Processor`文件，这样类就可以保持不变，如果项目依赖于额外的注释处理器，则不需要额外的工作。

[META-INF/services 生成器](http://metainf-services.kohsuke.org/)在主仓库中：

```
<dependency>
  <groupId>org.kohsuke.metainf-services</groupId>
  <artifactId>metainf-services</artifactId>
  <version>1.1</version>
  <scope>provided</scope>
</dependency> 
```

用 注释处理器`@MetaInfServices`- 请注意，我必须手动提供注释`Processor.class`，否则它会生成`META-INF/services/javax.annotation.processing.AbstractProcessor`

```
import org.kohsuke.MetaInfServices;

@MetaInfServices(javax.annotation.processing.Processor.class)
public class SoapPropertyProcessor extends AbstractProcessor 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T17:02:05.813

以下是[Apache](http://maven.apache.org/guides/getting-started/index.html#How_do_I_add_resources_to_my_JAR)提供的有关如何执行此操作的说明，但您似乎做得正确。看看那个页面，确保你没有犯一些小错误。

# php - MySql：定义值的规则？

> ID：10320082
> 
> 赞同：-2
> 
> 时间：2012-04-25T16:42:25.170
> 
> 标签：php, mysql

任何人都可以用MySql的简单英语解释。定义值的规则？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T16:44:40.327

我想你的意思是数据类型？

你可以在这里看到它们：

[http://dev.mysql.com/doc/refman/5.5/en/data-types.html](http://dev.mysql.com/doc/refman/5.5/en/data-types.html)

有关数据类型的摘要，请参见此处：

[http://dev.mysql.com/doc/refman/5.5/en/data-type-overview.html](http://dev.mysql.com/doc/refman/5.5/en/data-type-overview.html)

> 11.1。数据类型概述
> 11.1.1\. 数字类型概述
> 11.1.2\. 日期和时间类型概述
> 11.1.3。字符串类型概述
> 11.1.4\. 数据类型默认值

# mysql - Linux 上的 Mysql 事件调度程序

> ID：10320084
> 
> 赞同：0
> 
> 时间：2012-04-25T16:42:28.363
> 
> 标签：mysql, events

我在我的`/etc/my.cnf`文件中尝试过：

```
event-scheduler = ON 
```

使用 MYSQL 5.5。我已关闭/打开服务，但没有全局变量`EVENT_SCHEDULER = ON`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T16:49:42.040

在 的`[mysqld]`部分中`my.cnf`，添加以下内容：

```
event_scheduler=ON 
```

这应该使它能够用于未来的启动。

对于您当前的 MySQL 会话，您可以通过以下方式启用它：

```
SET GLOBAL event_scheduler = 1; 
```

# asp.net-mvc - .net MVC 3 在多对一虚拟对象中显示值

> ID：10320086
> 
> 赞同：2
> 
> 时间：2012-04-25T16:42:31.330
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework, oracle11g

我正在创建一个费用报告项目——我第一次使用 MVC。

这是一个 Database First 项目，我正在使用 Oracle ODP。

我有一个具有以下类的实体模型： ExpenseReport ExpenseItem ExpenseType

费用报告将包含许多费用项目。
每个费用项目都将属于该 ExpenseType 类中的类型列表中的特定费用类型 - 因此是多对一的关系。

单个费用类型记录包含每种类型的类别，以及与该类型一起使用的描述/评论字段的标题。

在我看来，我能够显示该报告以及该报告的所有费用项目的列表。我正在使用以下代码通过我的 Edit 或 Details 控制器执行此操作：

```
public ActionResult Details(long id)
{
   using (var db = new Entities())
   {
      var thisReport = db.ExpenseReport.Find(id);
      thisReport.expItems = db.ExpenseItem.Where(e => e.BB_EXPREPORT_ID == id).ToList();
      return View(thisReport);
   }
} 
```

我尝试将其添加到代码中（就在返回视图行上方）以还包括每种类型的费用类型值（类别、标题），但由于转换问题而失败 - 无法隐式转换（您是否缺少转换？ )

```
foreach (ExpenseItem item in thisReport.expItems)
{
  item.expType = db.ExpenseType.Where(e => e.BB_EXP_TYPE == item.BB_EXP_TYPE);
} 
```

我的问题：

1.  有没有办法可以设置我的模型类，这样我就不需要添加这些语句？IE 我不能修改虚拟对象 Get 语句以将它们拉到那里吗？或者我可以修改实体模型文件来获取这些值吗？是加载问题吗？我关闭了延迟加载。
2.  如果没有办法在模型级别执行此操作以便将虚拟对象包含在 get 中，那么我如何在上面的代码中设置强制转换以从 ExpenseType 表中提取该给定费用类型的值？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T00:39:20.577

诚然，我不确定您要做什么，但看起来您只想一次加载所有对象。您可以使用 Entity Framework 使用 Include 方法来执行此操作。

我假设您正在使用“复数”功能来命名您的数据库集，但话又说回来，您对“db.ExpenseReport”的调用最后缺少一个（s）。

```
public ActionResult Details(long id) {
 using (var db = new Entities()) {
  ExpenseReport thisReport = db.ExpenseReport.Include("ExpenseItems.ExpenseType").Single(id);

  return View(thisReport);
 }
} 
```

然后你可以像这样在 Razor 视图中使用它。

```
<ul>
 foreach (var item in Model.ExpenseItems) {
  <li>Name: @item.YourExpenseItemName - Type: @item.ExpenseType.YourTypeName</li>
 }
</ul> 
```

# objective-c - 检查多个 WebView 是否已完成加载

> ID：10320089
> 
> 赞同：2
> 
> 时间：2012-04-25T16:42:35.920
> 
> 标签：objective-c, xcode, cocoa

我目前正在使用 NSNotificationCentre 为 5 个 WebView 传递 WebViewStart 和 WebViewFinish 事件。

在 WebViewStart 方法中，我启动了进度条的动画。在 WebViewFinish 方法中，我停止了进度条的动画。

显然问题在于，如果正在加载 5 个 WebView，并且一个 WebView 完成加载，它会触发 WebViewFinish 方法并停止动画，即使其他 WebView 仍在加载。

有没有办法检查以下内容？

```
- (void)_webViewProgressFinished:(NSNotification *)notification
{
    if ([webView1 & webView2 & webView3 finishedLoading]) {
        [_loadingIndicator stopAnimation:self];
    }
} 
```

我目前拥有的代码似乎不适合我拥有的 WebView 数量。我目前正在使用并遇到问题的代码如下：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(_webViewProgressStarted:) name:WebViewProgressStartedNotification object:_mainWebView];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(_webViewProgressFinished:) name:WebViewProgressFinishedNotification object:_mainWebView];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(_webViewProgressStarted:) name:WebViewProgressStartedNotification object:_subWebView1];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(_webViewProgressFinished:) name:WebViewProgressFinishedNotification object:_subWebView1];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(_webViewProgressStarted:) name:WebViewProgressStartedNotification object:_subWebView2];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(_webViewProgressFinished:) name:WebViewProgressFinishedNotification object:_subWebView2];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(_webViewProgressStarted:) name:WebViewProgressStartedNotification object:_subWebView3];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(_webViewProgressFinished:) name:WebViewProgressFinishedNotification object:_subWebView3];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(_webViewProgressStarted:) name:WebViewProgressStartedNotification object:_subWebView4];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(_webViewProgressFinished:) name:WebViewProgressFinishedNotification object:_subWebView4];
}

- (void)_webViewProgressStarted:(NSNotification *)notification
{
    [_loadingIndicator startAnimation:self];
}

- (void)_webViewProgressFinished:(NSNotification *)notification
{
    [_loadingIndicator stopAnimation:self];
} 
```

我希望有人能帮帮忙。提前谢谢大家！

**编辑：我最终自己找到了解决方案。可能不是最优雅的，但尽管如此：**

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{ 
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(_webViewProgressStarted:) name:WebViewProgressStartedNotification object:_mainWebView];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(_webViewProgressFinished:) name:WebViewProgressFinishedNotification object:_mainWebView];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(_webViewProgressStarted:) name:WebViewProgressStartedNotification object:_subWebView1];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(_webViewProgressFinished:) name:WebViewProgressFinishedNotification object:_subWebView1];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(_webViewProgressStarted:) name:WebViewProgressStartedNotification object:_subWebView2];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(_webViewProgressFinished:) name:WebViewProgressFinishedNotification object:_subWebView2];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(_webViewProgressStarted:) name:WebViewProgressStartedNotification object:_subWebView3];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(_webViewProgressFinished:) name:WebViewProgressFinishedNotification object:_subWebView3];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(_webViewProgressStarted:) name:WebViewProgressStartedNotification object:_subWebView4];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(_webViewProgressFinished:) name:WebViewProgressFinishedNotification object:_subWebView4];
}

- (void)_webViewProgressStarted:(NSNotification *)notification
{
    if ([_mainWebView isEqual:[notification object]]) {
        [_mainWebViewProgress startAnimation:self];
    } else if ([_subWebView1 isEqual:[notification object]]) {
         [_subView1Progress startAnimation:self];       
    } else if ([_subWebView2 isEqual:[notification object]]) {
     [_subView2Progress startAnimation:self];   
    } else if ([_subWebView3 isEqual:[notification object]]) {
         [_subView3Progress startAnimation:self];   
    } else if ([_subWebView4 isEqual:[notification object]]) {
         [_subView4Progress startAnimation:self];   
    }
} 
```

这样做是获取通知对象，它是一个 ID，并将其与我们的 WebView 进行比较。如果它们相同，则该 WebView 已开始/完成加载。

希望这对任何人都有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T16:50:17.557

为 5 个 Web 视图中的每一个创建一个单独的通知。创建 5 个布尔值，可以在每个 Web 视图完成时设置为 true。当网络视图完成时，让通知中心发布它的通知。接收此通知的方法应首先将其布尔值设置为 true，表示它已完成。然后检查是否所有 5 个布尔值都设置为 true。如果是，请停止活动指示器。如果没有，让它旋转。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-21T11:40:51.590

您可以一直数到收到 5 条通知。您还可以在视图一次完成一个时估计进度，Nx20% 的聚合百分比。

# c# - C# - 从多个文件中解析年/月，运行程序并在子文件夹中创建新文件（年/月）

> ID：10320090
> 
> 赞同：1
> 
> 时间：2012-04-25T16:42:38.370
> 
> 标签：c#, file, parsing, datetime, logging

我目前有一个程序，我从目录中获取现有日志文件，运行每个日志文件并计算统计信息，然后从中创建一个新文件。

日志文件当前命名为：2012-4-24.log

创建新的统计文件后，它保持类似的格式，但添加了“-Stats”：2012-4-24-Stats.log

这是我要解决的问题：我想为每年和每月创建新目录，这样我就可以拥有如下文件夹结构：

DailyStatistics -> 2012 -> 4 -> 2012-4-24-Stats.log

DailyStatistics -> 2012 -> 5 -> 2012-5-1-Stats.log

等等等等

我不确定如何从文件名中解析年份和月份，然后运行具有相同年份和月份的所有文件，然后让我的程序通过我的循环来创建实际文件。

这是我的代码...

```
class Processor
{
    public void ProcessDailyLogFiles()
    {
        foreach (string fullFileName in Directory.GetFiles(Settings.LogPath))
        {
            string fileName = Path.GetFileNameWithoutExtension(fullFileName);
            new DailyReader().CalculateStatistics(fileName);
            new DailyReader().MoveLogFile(fileName);
        }

    }
} 
```

下节课……

```
public void CalculateStatistics(string filename)
    {
        string path = Settings.DailyPath;

        if (!path.EndsWith(@"\"))
            path = path + @"\";

        if (!Directory.Exists(path))
        {
            Directory.CreateDirectory(path);
        }

        string tempFileName = Settings.LogPath + filename + ".log";
        string destFileName = path + filename + "-Stats.log";

        var statistics = File.ReadLines(tempFileName)
        .Where(line => line.StartsWith("Process"))
        .Select(line => line.Split('\t'))
        .GroupBy(items => items[1])
        .Select(g =>
        new
        {
            Division = g.Key,
            ZipFiles = g.Sum(i => Convert.ToInt32(i[4])),
            Conversions = g.Sum(i => Convert.ToInt32(i[5])),
            ReturnedFiles = g.Sum(i => Convert.ToInt32(i[6])),
            TotalEmails = g.Sum(i => Convert.ToInt32(i[7]))
        });

        Log myLog = new Log(destFileName);
        statistics
           .ToList()
           .ForEach(d => myLog.Write(d.Division, d.ZipFiles, d.Conversions, d.ReturnedFiles, d.TotalEmails));
        //Add error handlers
        myLog.Close();
    } 
```

最后的日志类...

```
#region Member Variables

    StreamWriter dailyStats;

    #endregion

    public Log(string filename)
    {
        this.Open(filename);
    }

    #region Public Static Functions

    public void Open(string tempFileName)
    {
        var sb = new StringBuilder();

        if (!File.Exists(tempFileName))
        {
            dailyStats = File.AppendText(tempFileName);
            sb.Append("Division");
            sb.Append("\t");
            sb.Append("Zip Files");
            sb.Append("\t");
            sb.Append("Conversions");
            sb.Append("\t");
            sb.Append("Returned Files");
            sb.Append("\t");
            sb.Append("Total E-Mails");
            sb.Append("\t");
            dailyStats.WriteLine(sb.ToString());
        }
        else
        {
            dailyStats = new StreamWriter(tempFileName);
        }
    }

    public void Write(string division,
                             int zipFiles, int conversions, int returnedFiles, int totalEmails)
    {

        var sb = new StringBuilder();

        if (writeLog)
        {
            sb.Append(division);
            sb.Append("\t");
            sb.Append(zipFiles);
            sb.Append("\t");
            sb.Append(conversions);
            sb.Append("\t");
            sb.Append(returnedFiles);
            sb.Append("\t");
            sb.Append(totalEmails);
            sb.Append("\t");
            dailyStats.WriteLine(sb.ToString());
        }
    }

    public void Close()
    { 
        dailyStats.Close();
    }
} 
```

多谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T16:51:22.053

```
 String filename = "2012-4-24.log";
  String file = Path.GetFileNameWithoutExtension(filename);
  String[] parts = file.Split('-');
  if (parts.Length == 3)
  {
    String year = parts[0];
    String month = parts[1];
    String day = parts[2];

    Console.WriteLine(string.Format("year:{0} - month:{1} - day:{2}", year, month, day));
  } 
```

# ruby - 使用 Rails 应用程序覆盖应用程序依赖的文件时的最佳实践

> ID：10320091
> 
> 赞同：0
> 
> 时间：2012-04-25T16:42:39.720
> 
> 标签：ruby, ruby-on-rails-3

我有一个 Rails 应用程序，每次执行搜索时都会从 .yml 文件中读取。（这是一个全文搜索应用程序。）.yml 文件告诉应用程序它应该向哪个 url 发出搜索请求，因为不同版本的搜索索引驻留在不同的服务器上，我偶尔会在索引之间切换。

我有一个应用程序的管理部分，允许我重写上述 .yml 文件，以便我可以添加新的搜索 url 或删除不需要的。虽然我可以手动编辑服务器上的文件，但我更希望能够在我的站点管理部分中编辑它，这样当我无权访问服务器时，我仍然可以进行任何必要的更改。

对我的应用实际使用的文件进行编辑的最佳做法是什么？（我想这也适用于，比如说，一个能够在部署后重写自己的帮助文件的应用程序。）

当另一个连接到我的站点的用户想要执行搜索时，我可能正在重写此文件，这是否是一个问题？如果我正在进行写操作，我可以让他们的搜索失败吗？我应该最初将新的 .yml 文件写入临时文件，然后再替换原始的 .yml 文件吗？我知道写操作非常快，但我只是想看看其他人的想法。

**更新：**感谢大家的回复！虽然我发现我最好使用某种缓存而不是在每个请求上读取文件，但它有助于找出实际执行文件重写的最佳方法是什么，因为我特别希望重新- 在这种特定情况下每次都阅读它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T19:22:28.407

如果您必须为此使用文件，则安全过程如下所示：

1.  将新内容写入某种临时文件。
2.  用于[`File.rename`](https://ruby-doc.org/core/File.html#method-c-rename)以原子方式将旧文件替换为新文件。

如果你不使用单独的文件，当不可避免的问题发生时，你很容易得到一个写一半的损坏文件。`File.rename`类方法只是系统调用的一个包装器，它[`rename(2)`](https://pubs.opengroup.org/onlinepubs/9699919799/functions/rename.html)保证是原子的（即它要么完全成功，要么完全失败，它不会让你处于不一致的中间状态）。

如果你想替换，`/some/path/f.yml`那么你会做这样的事情：

```
begin
  # Write your new stuff to /some/path/f.yml.tmp here
  File.rename('/some/path/f.yml.tmp', '/some/path/f.yml')
rescue SystemCallError => e
  # Log an error, complain loudly, fall over and cry, ...
end 
```

正如其他人所说，文件确实不是处理此问题的最佳方法，如果您有多个服务器，当服务器不同步时，使用文件将失败。您最好使用多个服务器可以访问的数据库，然后您可以：

1.  缓存每个 Web 服务器进程中的值。
2.  每 10 分钟（或任何可行的方法）盲目刷新一次。
3.  如果连接到远程服务器失败，则刷新缓存值（使用额外的错误检查以避免刷新/连接/失败循环）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T17:10:58.377

如果您真的想通过覆盖文件来做到这一点，请使用文件系统的锁定功能来阻止其他线程在写入配置文件时访问您的配置文件。也许看看这样的[东西](http://disjointthoughts.com/2007/01/15/file-locking-in-ruby-using-flock/)。

我强烈建议不要在不重新部署应用程序的情况下使用需要更改的配置文件。首先，您现在要求每次有人进行搜索时都读取一个文件。其次，出于安全原因，允许您的 Web 应用程序对其自己的代码进行写访问通常不是一个好主意。我会将这些搜索索引 URL 存储在数据库或 memcached 键中。

**编辑：**正如@bioneuralnet 指出的那样，重要的是决定您是需要实时配置更新还是最终同步。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T17:15:52.617

首先，让我说在每个请求上读取该文件是性能杀手。不要这样做！如果您确实需要将该数据保存在 .yml 文件中，那么您需要缓存它并仅在它更改后重新加载（基于文件的时间戳）。

但是不要检查每个请求的时间戳 - 这几乎一样糟糕。如果自上次检查以来已经过了 n 分钟，请在请求中检查它。大概在`before_filter`某个地方。如果您在线程模式下运行（大多数人不是），请注意您使用的是 Mutex 或其他东西。

# c# - 发布任意数量的文本区域

> ID：10320092
> 
> 赞同：0
> 
> 时间：2012-04-25T16:42:42.293
> 
> 标签：c#, asp.net-mvc-3, razor

我正在使用 C# 中的 ASP.NET MVC3 工作。

我的数据库中有一个包含问题的表。管理员可以添加新问题、编辑问题等。

我有另一个存储问题和答案的表（所以是响应）。

例子：

问题表：

> QuestionId............问题
> 
> ........1.......你好吗？
> 
> .......2............为什么天空是蓝色的？

在我看来，我说“对于每个问题，打印问题并提供一个文本区域来回答问题”

然后我想说“当他们提交时，将每个问答对保存到问答表中”

答案表：

> AnswerId............问题............回答
> 
> ......1............你好吗？......我很好
> 
> ......2....为什么天空是蓝色的？......因为

问题是存在任意/可变数量的问题，因此存在任意数量的文本区域。如何将该信息传递给 Post 操作？

**编辑**

这是我在 Xander 推荐后的看法

```
@using (Html.BeginForm("QuestionsAndAnswers", "Product"))
{
    int i = 0;
    foreach (var m in Model.Questions)
    {
    i++;
    <div>@m.Body</div>
    @Html.TextArea(string.Format("textareas[{0}]", i))
    <br />
    }
    <input type="submit" value="Save"/>
    @Html.ActionLink("Cancel", "Index", "Home");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T10:10:36.217

用你的观点......

```
@using (Html.BeginForm("QuestionsAndAnswers", "Product"))
{

    foreach (var m in Model.Questions)
    {
    <div class="formfields">
    <input type="hidden" name="QuestionId" id="QuestionId" value="@m.QuestionId" />
    <div>@m.Body</div>
    <textarea name="Answer" id="Answer"></textarea>
    </div>
    }
    <input type="submit" value="Save"/>
    @Html.ActionLink("Cancel", "Index", "Home");
} 
```

这是Jquery ......

```
<script type="text/javascript">
    $.fn.serializeObject = function () {
        var o = {};
        var a = this.serializeArray();
        $.each(a, function () {
            if (o[this.name]) {
                if (!o[this.name].push) {
                    o[this.name] = [o[this.name]];
                }
                o[this.name].push(this.value || '');
            } else {
                o[this.name] = this.value || '';
            }
        });
        return o;
    };
    $(document).ready(function () {
        $("#Submit").click(function () {
            var QuestionAnswerArray = [];
            var QuestionAnswerLength = $(".formfield").length;
            $(".formfield").each(function (i) {
                var test = $(this).find("textarea, input").serializeObject()
                QuestionAnswerArray.push(test);
                if ((i + 1) == QuestionAnswerLength) {
                    $.ajax({
                        type: 'POST',
                        url: '/../Product/QuestionsAndAnswers',
                        data: JSON.stringify(QuestionAnswerArray),
                        contentType: 'application/json; charset=utf-8',
                        dataType: 'json',
                        success: function (return_flag) {                            
                            if (return_flag == true) {
                                alert("Question and Answers Saved Succesfully!");                                
                            } else {
                                alert("Error Occured");
                            }
                        }
                    });
                }
            });
        });
    });
</script> 
```

然后你在 Controller 中行动......

```
[HttpPost]
public ActionResult QuestionsAndAnswers(Answers[] answers)
{
                foreach (var item in answers)
                {
                    // do whatever you want here
                }
                return View();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T23:28:40.090

楷模：

```
public class Question
{
    public int Id { get; set; }
    public string QuestionText { get; set; }
}

public class Answer
{
    public int Id { get; set; }
    public string QuestionText { get; set; }
    public string AnswerText { get; set; }
} 
```

视图模型：

```
public class AnswersViewModel
{
    public IList<Answer> Answers { get; set; }
} 
```

控制器：

```
public class AnswersController : Controller
{
    QuestionRepository _questionRepository = new QuestionRepository();

    public ActionResult Index()
    {
        AnswersViewModel model = new AnswersViewModel();
        model.Answers = new List<Answer>();
        IEnumerable<Question> questions = _questionRepository.GetRandomQuestions();
        foreach (Question question in questions)
        {
            model.Answers.Add(new Answer() { QuestionText = question.QuestionText });
        }
        return View(model);
    }

    [HttpPost]
    public ActionResult Index(AnswersViewModel model)
    {
        //the model will be properly bound here
        return View(model);
    }
} 
```

视图/答案/Index.cshtml

```
@model MvcApplication1.Models.AnswersViewModel
@{
    ViewBag.Title = "Index";
}
@using (Html.BeginForm("Index", "Answers", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    @Html.EditorFor(x => x.Answers)
    <input name="submit" type="submit" value="Submit" />
} 
```

视图/答案/EditorTemplates/Answer.cshtml

```
@model MvcApplication1.Models.Answer
@Html.HiddenFor(x => x.Id)
@Html.HiddenFor(x => x.QuestionText)
@Html.DisplayFor(x => x.QuestionText)
<br />
@Html.TextAreaFor(x => x.AnswerText)
<br /> 
```

**编辑：**

我更新了答案以使其更清楚。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T12:10:38.723

我们可以编写控制器来接收来自模型或视图模型的数组，但数组不是 ORM 友好的（如果您打算直接使用域模型来查看视图）。考虑到这一点，我们的 Controller 的 View 将在`IList`; `IList`是灵活的，它不受元素数量的限制，不像数组；与数组相比，IList 是 ORM 就绪的。

我们应该做的唯一调整是在视野中；HTML或者更确切地说是javascript，没有列表的概念，它只能使用数组或关联数组。承认这一限制，我们会将这些项目从`List<ClassType>`对 javascript 友好的数组中发出。

最后，当我们提交时，我们友好的社区 ASP.NET MVC 将为我们处理这些事情，即它可以`List<ClassType>`根据提交的 HTML/javascript 数组自动填充我们的变量，即我们不需要迭代`Request.Form`,不需要手动填充，我们的代码操作的一切都是以模型/视图模型为中心的，因为它们应该是。ASP.NET MVC 程序员的生活很美好不是吗？;-)

完整代码如下：

* * *

模型：

```
namespace SoQna.Models
{
    public class Question
    {
        public int QuestionId { get; set; }
        public string QuestionText { get; set; }
    }

    public class Answer
    {
        public int AnswerId { get; set; }
        public Question Question { get; set; }
        public string AnswerText { get; set; }
    }
} 
```

视图模型：

```
using System.Collections.Generic;

namespace SoQna.ViewModels
{
    public class QnaViewModel
    {
        public IList<AnswerToQuestion> Answers { get; set; }
    }

    public class AnswerToQuestion
    {
        public int ToQuestionId { get; set; }
        public string QuestionText { get; set; }
        public string AnswerText { get; set; }
    }
} 
```

控制器：

```
using System.Collections.Generic;
using System.Linq;
using System.Web.Mvc;

namespace SoQna.Controllers
{
  public class HomeController : Controller
  {
    IList<SoQna.Models.Question> _qnaRepo = new List<SoQna.Models.Question>
    {
      new SoQna.Models.Question { QuestionId = 1, 
        QuestionText = 
          "Why is there a proliferation of different kind of ORMs?" 
      },
      new SoQna.Models.Question { 
          QuestionId = 2, QuestionText = "How are you?" 
      },
      new SoQna.Models.Question { 
          QuestionId = 3, QuestionText = "Why the sky is blue?" 
      },          
      new SoQna.Models.Question { 
          QuestionId = 4, QuestionText = "Why is MVC the bees knees?" 
      },          
    };

    public ActionResult Index()
    {
      var qna = new SoQna.ViewModels.QnaViewModel { 
          Answers = new List<SoQna.ViewModels.AnswerToQuestion>() 
      };

      foreach (var question in _qnaRepo)
      {
        if (question.QuestionId == 1) continue; // subjective :-)

        qna.Answers.Add(
          new SoQna.ViewModels.AnswerToQuestion { 
              ToQuestionId = question.QuestionId, 
              QuestionText = question.QuestionText, 
              AnswerText = "Put your answer here" 
          }
        );         
      }

      return View(qna);
    }

    [HttpPost]
    public ViewResult SubmitAnswers(SoQna.ViewModels.QnaViewModel a)
    {
      foreach (var answer in a.Answers)
      {
        answer.QuestionText = _qnaRepo.Single(x => 
           x.QuestionId == answer.ToQuestionId).QuestionText;
      }
      return View(a);
    }

  }//HomeController
}//namespace 
```

查看主页/索引

```
@model SoQna.ViewModels.QnaViewModel

@{
    ViewBag.Title = "Index";
}

<h2>Hahah</h2>

@using (Html.BeginForm("SubmitAnswers", "Home"))
{

    int i = 0;
    foreach (var answer in Model.Answers)
    {
        @: Question #@(answer.ToQuestionId) <br />

        @Html.Hidden("Answers[" + i + "].ToQuestionId", answer.ToQuestionId)

        @Html.Label("Answers[" + i + "].QuestionText", answer.QuestionText)

        @* 
           to save bandwidth we didn't include QuestionText on submit, 
           this is done by assigning it on Label, and no need to persist 
           QuestionText on Hidden 
        *@

        <br />

        @Html.TextArea("Answers[" + i + "].AnswerText", answer.AnswerText)

        <hr />

        ++i;

    }

    <input type="submit" value="Done" />
} 
```

查看主页/提交答案

```
@model SoQna.ViewModels.QnaViewModel

@{
    ViewBag.Title = "SubmitAnswers";
}

<h2>SubmitAnswers</h2>

@foreach (var item in Model.Answers)
{
    @: Answer to question: @item.QuestionText
    <br />    
    @item.AnswerText

    <hr />
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T15:05:35.680

我建议建立隐藏字段，如下所示：

```
<input type="hidden" name="questionsAndAnswers" 
value="[{'id':questionId, 'question':questionName, 'answer':answerName}, 
        {'id':questionId, 'question':questionName, 'answer':answerName}...] /> 
```

然后你序列化发布的隐藏值

# javascript - 如果用户从 Facebook 连接/断开连接，动态更新页面？

> ID：10320093
> 
> 赞同：1
> 
> 时间：2012-04-25T16:42:50.413
> 
> 标签：javascript, facebook

当用户从他的 Facebook 连接/断开应用程序时，有没有办法动态更新页面？

即使用 javascript SDK 附带的事件订阅者方法之一？

我正在尝试`authResponseChange`但是如果我从我的 Facebook 帐户中删除该应用程序，我的回调函数似乎不会被调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T16:53:12.507

尝试也注册到*auth.statusChange*事件，但根据我的经验，两者都不是真正可靠的。

当用户取消对您的应用程序的授权时，您可以在服务器端知道，在应用程序设置 > 高级选项卡中有*取消授权回调*字段，您可以在其中将 URL 放入服务器中，当用户删除应用程序时将被 ping 通。

有了它，您就可以以某种方式同步您的客户端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T16:52:53.130

您可以手动检查用户是否已登录，但尚未授权您的应用程序，使用`FB.getLoginStatus`，传入回调函数（请参阅Facebook JS SDK 文档中的[此处）。](http://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/)你可以使用已经存在的事件，然后每次都进行这种检查吗？也许订阅`auth.authResponseChange`and`auth.statusChange`事件，然后调用`FB.getLoginStatus`以查看它是否已更改。

# c# - DataGridView 隐藏列不会保持隐藏状态

> ID：10320094
> 
> 赞同：1
> 
> 时间：2012-04-25T16:42:59.330
> 
> 标签：c#, datagridview, datatable, hide

我有一个绑定到 DataTable 源的 DataGridView。表中元素的数据中有一个我想隐藏的 Guid。（仅供内部参考，但不应显示。）我用来创建表的代码如下：

```
private DataTable mEntities = new DataTable();
private System.Windows.Forms.DataGridView EntitiesGridView; 
```

这些是在别处声明的，这里仅显示以供参考。

```
private void BuildEntityTable()
{
    mEntityTable.Columns.Add("id", typeof(Guid));
    mEntityTable.Columns.Add("Name", typeof(string));
    ...  (some other columns)

    foreach (Foo foo in mEntities)
    {
        DataRow row = mEntityTable.NewRow();
        row["id"] = foo.id;
        row["Name"] = foo.Name;
        ...  (rest of data)
        mEntityTable.Rows.Add(row);
    }

    DataColumn[] entityKeys = new DataColumn[1];
    entityKeys[0] = entityTable.Columns["id"];
    mEntityTable.PrimaryKey = entityKeys;

    EntitiesGridView.DataSource = mEntityTable.DefaultView;

    EntitiesGridView.Columns["id"].visible = false;
} 
```

到目前为止，一切都很好。该表已创建，并且没有可见的“id”列。但是，如果我稍后将一个新对象添加到表中，我们就会遇到麻烦。代码几乎相同：

```
void AddNewObject(object sender, MyArgs e)
{
    Foo foo = e.Foo;
    lock (mEntities)
    {
        mEntities.Add(foo);
    }
    lock (mEntityTable)
    {
        DataRow row = mEntityTable.NewRow();
        row["id"] = foo.id;
        row["Name"] = foo.Name;
        ...  (rest of data)
        mEntityTable.Rows.Add(row);
    }
} 
```

出于某种原因，这使得“id”列回来了。我尝试 `EntitiesGridView.Columns["id"].visible = false;`从以前的代码中复制该行，但它没有用。在此之后我所做的任何事情都不会使该列消失并保持消失。任何线索我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T10:45:07.720

只写这一行

```
datagridview1.Columns[0].visible = false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-05T10:52:38.347

在你的 form_load() 中调用这个事件

```
 private void dgv_DataBindingComplete(Object sender, DataGridViewBindingCompleteEventArgs e)
    {
        DataGridView dgv = (DataGridView)sender;
        dgv.Columns[3].Visible = false;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-28T11:03:05.980

我也遇到过这个问题，但是发现你可以在设计的时候让你的datagridview修改然后保存项目。运行应用程序，然后退出应用程序。设计表单上的 dgv 现在已自动更改其显示。关闭表单并重新打开它，您将看到您最初包含/排除的列被返回。此修复不需要额外的代码。

# python - 从没有括号和逗号的 raw_input 打印排列？

> ID：10320096
> 
> 赞同：-1
> 
> 时间：2012-04-25T16:43:10.250
> 
> 标签：python

我想让我的代码输出不带括号和逗号：

```
import itertools
import pprint
run = 1
while run != 0:
    number = raw_input('\nPlease type between 4 and 8 digits and/or letters to run permutation: ')

    if len(number) >= 4 and len(number) <= 8:
        per = list(itertools.permutations(number))
        pprint.pprint(per)
        print '\nNumber of possible combinations: ',len(per),'\n'

    elif number == 'exit':
        run = 0

    else:
        raw_input('length must be 4 to 8 digits and/or letters. Press enter to exit')
        run = 0 
```

因此，它会在新行中打印出每个组合的列表。如何在没有括号和逗号的情况下打印它？我仍然希望能够调用 per[x] 来获得某种组合。任何帮助表示赞赏！谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T16:51:32.150

而不是 using `pprint.pprint`，它将打印对象的 repr ，您应该使用常规打印，它不会将换行符更改为文字`'\n'`：

```
print('\n'.join(map(str, per))) 
```

必须 map `str`over `per`，正如`string.join`预期的字符串列表。

**编辑**：示例输出显示每个排列没有用逗号分隔，并且您看不到列表的括号：

```
>>> print('\n'.join(map(str, itertools.permutations([0, 1, 2, 3]))))
(0, 1, 2, 3)
(0, 1, 3, 2)
(0, 2, 1, 3)
(0, 2, 3, 1)
(0, 3, 1, 2)
(0, 3, 2, 1)
(1, 0, 2, 3)
(1, 0, 3, 2)
(1, 2, 0, 3)
(1, 2, 3, 0)
(1, 3, 0, 2)
(1, 3, 2, 0)
(2, 0, 1, 3)
(2, 0, 3, 1)
(2, 1, 0, 3)
(2, 1, 3, 0)
(2, 3, 0, 1)
(2, 3, 1, 0)
(3, 0, 1, 2)
(3, 0, 2, 1)
(3, 1, 0, 2)
(3, 1, 2, 0)
(3, 2, 0, 1)
(3, 2, 1, 0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T16:52:27.200

替换`pprint.pprint`为：

```
for line in per:
    print ''.join(line) 
```

这是您的代码片段的更紧凑版本：

```
import itertools

while True:
    user_input = raw_input('\n4 to 8 digits or letters (type exit to quit): ')
    if user_input == 'exit':
        break
    if 4 <= len(user_input) <= 8:
        # no need for a list here, just unfold on the go
        # counting via enumerate
        for i, p in enumerate(itertools.permutations(user_input)):
            print(''.join(p))
        print('#permutations: %s' % i) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T16:52:53.347

循环遍历它们并打印出由你喜欢的字符分隔的每一个（这里是空格）：

```
#pprint.pprint(per)
for p in per:
    print ' '.join(p) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T16:53:05.343

只需用您自己的代码替换 pprint() 即可输出数据。像这样的东西：

```
for i in per:
    print i 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-25T16:55:02.223

采用`join()`

```
per = list(itertools.permutations(number))
        for x in per:
            print "".join(x)
        print '\nNumber of possible combinations: ',len(per),'\n' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-25T16:57:00.197

我会将列表转换为字符串，然后删除括号和逗号：

```
x = str(per)[1 : -1]
x.replace(",", "")
print x 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-23T09:23:42.877

答案的其他变体

`(lambda x: ''.join(x))(x)`

# ruby-on-rails-3 - Rails 3 - 图像附件和性能

> ID：10320103
> 
> 赞同：1
> 
> 时间：2012-04-25T16:43:46.060
> 
> 标签：ruby-on-rails-3, performance, paperclip, carrierwave

我正在寻找附加 4 张图片并寻找建议的最高效方式。我觉得我的选择如下。我猜选项 1 是最快的性能，选项 3 是最昂贵但灵活和可扩展的。我只允许 4 张图像，如果需要确保我只拥有我需要的对象所需的照片，我可以创建一个 object_photo 和 object2_photo 模型。随着时间的推移，我将收到大量的请求和图像。已经达到 2000 次，现在每月获得大约 11,000 次点击。

选项1）

```
class Object < ActiveRecord::Base
   # add 4 image field on the object
end 
```

选项 2)

```
class Object < ActiveRecord::Base
   has_many :photos, :dependent => :destroy
end

class Photo < ActiveRecord::Base
   belongs_to :object
end 
```

选项 3)

```
class Object < ActiveRecord::Base
   has_many :photos, :as => :attachable, :dependent => :destroy
end

class Photo < ActiveRecord::Base
   belongs_to :attachable, :polymorphic => true
   belongs_to :object
end 
```

# c# - 哪个更适合相互比较 - 列表 或int []？

> ID：10320111
> 
> 赞同：0
> 
> 时间：2012-04-25T16:44:15.167
> 
> 标签：c#, arrays, list, int

我需要将控件集合中的原始值（文本值，具体而言，转换为 0..3 的整数）与更新后的值进行比较。

哪个更适合（*List*或*int[]*）进行此类比较？

我需要将每个元素与其在另一个列表或数组中的“伴侣”元素进行比较。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T16:45:15.903

内部`List`也使用数组（即动态调整大小的数组），因此就操作而言，它们是相同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T16:55:21.847

任何`IEnumerable<int>`应该都可以。

```
var pre = Enumerable.Range(1, 3);
var post = new [] {0, 2, 1};

var same = pre.Zip(post, (before, after) => new {before, after})
    .Where(x => x.before == x.after);

Assert.AreEqual(1, same.Count()); 
```

# google-docs-api - Google 文档列表 API 和 Google Drive SDK

> ID：10320123
> 
> 赞同：2
> 
> 时间：2012-04-25T16:44:42.917
> 
> 标签：google-docs-api, google-drive-api

DOcument List Api 的路线图是什么？它比 Google Drive SDK 有更多的功能（即 ACL）。现在 JAVA 或 PHP 的示例已从文档中消失。它会在不久的将来被弃用吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T16:51:23.283

目前，Documents List API 是与 Google Drive SDK 相关的 API，可用于访问相同的数据。我们计划将来 Drive API 本身将直接包含 Documents List API 的所有功能。

抱歉，答案有些含糊，但我们没有就时间表和未来产品做出具体承诺。

# mpi - 高效的单方面沟通

> ID：10320127
> 
> 赞同：2
> 
> 时间：2012-04-25T16:44:46.523
> 
> 标签：mpi, rdma

我正在寻找一个高效的单向通信库，可以用来有效地实现 RDMA。

目前，我查看了 MPI-2 实现，例如 MPICH2 和 MVAPICH2（使用 RDMA 的基于 InfiniBand 架构的 MPI-2 实现）。

MVAPICH2 有很多我正在寻找的功能，不幸的是，我无法使用它，因为我目前无法访问我所在大学的 InfiniBand 架构。

所以我真正想要的是，是否有任何其他库（不是必需的 MPI 实现变体）在减少通信进程之间的开销方面可以被认为是有效的（例如：避免在集合协议中握手，从而从目标进程中卸载开销）。

我也很感激任何可以帮助我做一些不同的事情而不是找到一个合适的库的建议。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T04:00:12.623

首先，RDMA 和 RMA 不是一回事。RDMA*需要*某种专用硬件（例如 InfiniBand）才能直接访问应用程序缓冲区。例如，如果您通过 TCP 进行单方面的 RMA 操作，您仍然会通过操作系统内核并在此过程中制作多个数据副本。

您可以使用单方面的 MPI 操作编写应用程序，使用在以太网上运行的 MPI 库对其进行测试，当时机成熟并且您可以访问更快的硬件时，只需将 MPI 库替换为支持 RDMA 的东西。

或者，查看一些较低级别的库，例如 ARMCI 和 GASNet。但是，如果没有专门的硬件，RDMA 什么也做不了。

您是否有针对这些要求的特定应用？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T12:32:36.770

为了补充 G.Inozemtsev 的答案，这里有更多参考资料。

在几个项目中研究了通过千兆以太网进行有效的单向通信。有几个 GigE 供应商为其提供硬件支持的 iWARP（Internet 上的广域 RMDA 协议）。

DK Panda 1\. P. Balaji 等人的小组有几篇关于 iWARP 的论文。Supporting iWARP Compatibility and Features for Regular Network Adapters, 2005 2\. S. Naravulla 等人。基于 iWARP 的高性能 MPI：早期体验，2007

另一种选择是可以在 UDP 之上实现的[Berkeley Active Messages 。](http://www.cs.berkeley.edu/~bonachea/amudp/)

据我所知，随着 InfiniBand 织物的广泛使用，这一研究方向并未得到积极发展。

# android - Phonegap IOS Android如何保护APP和APK中的信息www

> ID：10320138
> 
> 赞同：1
> 
> 时间：2012-04-25T16:45:30.697
> 
> 标签：android, ios, cordova

我正在构建一个基于 HTML5 和 CSS3 的多平台应用程序。对于我使用Phonegap的建筑。该构建生成适用于 IOS 的 APP 和适用于 Android 的 APK。但是在解压生成的ipa或apk文件时，我可以浏览www结构，看到所有文件的内容。其中一个文件包含 js 到我的一个外部服务器的 AJAX 请求 URL。有没有办法保护这个 URL 不被轻易发现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T17:48:28.270

您可能想要编写一个插件来将您的 URL 存储在本机端并在需要执行 AJAX 请求时检索它。请注意，这只会使找出 URL 变得更加困难，这并非不可能。一旦你开始走这条路，你最终会让你自己和你的用户的生活变得更加艰难。

# nginx - 配置通过子 url 在 nginx 服务器上服务网站

> ID：10320141
> 
> 赞同：2
> 
> 时间：2012-04-25T16:46:00.013
> 
> 标签：nginx, vhosts

我们有两个 nginx 服务器。第一台服务器通过 接收请求`www.example.com/partner`。他将整个请求发送到配置了 php+fastCgi 的第二台服务器。来自第二台服务器的 Nginx 访问日志：

> “获取/合作伙伴/HTTP/1.0”200 2845

在第二台服务器上，我有一个看起来像这样的虚拟主机：

```
server {
       listen my.ip:80;
       server_name www.example.com;
       root /var/www/example;

       if ($http_host != "www.example.com") {
                 rewrite ^ http://www.example.com$request_uri permanent;
       }

       index index.php index.html;

       location = /partner/favicon.ico {
                log_not_found off;
                access_log off;
                expires max;
       }

        location @nocache {
                try_files $uri $uri/ /index.php?$args;
       }
       location = /partner/robots.txt {
                allow all;
                log_not_found off;
                access_log off;
       }

       location ^~ /partner/typo3temp/tx_ncstaticfilecache {
                expires 43200;
                charset utf-8;
       }

       location = /partner/clear.gif {
                empty_gif;
                expires max;
       }
       location ^~ /partner/typo3/gfx {
                expires max;
       }
       location ^~ /partner/typo3temp/compressor {
                expires max;
       }   

    location /partner {    

                if ($query_string ~ ".+") {
                        return 405;
                }
                # pass requests from logged-in users to PHP
                if ($http_cookie = 'nc_staticfilecache|be_typo_user' ) {
                        return 405;
                } # pass POST requests to PHP
                if ($request_method !~ ^(GET|HEAD)$ ) {
                        return 405;
                }
                if ($http_pragma = 'no-cache') {
                        return 405;
                }
                if ($http_cache_control = 'no-cache') {
                        return 405;
                }
                error_page 405 = @nocache;

                # serve requested content from the cache if available, otherwise pass the request to PHP
                try_files /typo3temp/tx_ncstaticfilecache/$host${request_uri}index.html @nocache;

       location ~* \.(sql|htaccess|htpasswd|tpl|html5|xhtml) {
                deny all;
       }

       location ~*  \.(jpg|jpeg|png|gif|css|js|ico)$ {
                expires max;
                log_not_found off;
       }

       location ~* \.(cur|ico|gif|png|jpe?g|css|js|swf|woff)((\?\d\d\d\d\d\d\d\d\d\d)|(\?s=\d\d\d\d\d\d\d\d\d\d))$ {
                expires max;
                log_not_found off;
       }
       location ~* \.(cur|ico|gif|png|jpe?g|css|js|swf|woff)(\?v\d\d?\.\d\d?\.\d\d?)$ {
                expires max;
                log_not_found off;
       }
       location ~* ^(/typo3/sysext|/typo3conf/ext).*\.(cur|ico|gif|png|jpe?g|css|js|swf|woff) {
                expires max;
                log_not_found off;
       }

       location ~ /\. {
                deny all;
                access_log off;
                log_not_found off;
       }

       location ~ \.php$ {
                try_files $uri =404;
                include /etc/nginx/fastcgi_params;
                fastcgi_pass 127.0.0.1:9000;
                fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
                fastcgi_index index.php;
       }
    }
} 
```

我得到的问题和 403 错误。有什么想法有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T23:02:40.877

php 文件被下载的最可能原因是因为 php 处理位置块嵌套在另一个位置块下（这假设 php 已正确设置）。

总体而言，您的配置似乎过于复杂，我确信它正在执行的任何任务都可以通过更简单的配置来完成。

我已经完成了基本的清理/合并，但没有完整的画面，有些部分可能会丢失。不过应该给你一些想法。

尽管关于 PHP 的重要事情是将其从嵌套位置中拉出来。

此外，使用状态码 418 而不是 405 进行重定向，因为 405 可以出于其他原因合法生成。

为 example.com 到 www.example.com 重定向使用单独的服务器块以获得更好的性能。

```
server {
    listen my.ip:80;
    server_name example.com;
    rewrite ^ http://www.example.com$request_uri? permanent;
}

server {
    listen my.ip:80;
    server_name www.example.com;
    root /var/www/example;
    index index.php index.html;
    error_page 418 = @nocache;

    if ($query_string ~ ".+") {
        return 418;
    }
    # pass requests from logged-in users to PHP
    if ($http_cookie = 'nc_staticfilecache|be_typo_user' ) {
        return 418;
    } 
    # pass POST requests to PHP
    if ($request_method !~ ^(GET|HEAD)$ ) {
        return 418;
    }

    location = /partner/robots.txt {
        allow all;
        log_not_found off;
        access_log off;
    }

    location ^~ /partner/typo3temp/tx_ncstaticfilecache {
        expires 43200;
        charset utf-8;
    }

    location = /partner/clear.gif {
        empty_gif;
        expires max;
    }

    location ^~ /partner/typo3/gfx {
        expires max;
    }
    location ^~ /partner/typo3temp/compressor {
        expires max;
    }

    location /partner {
        # serve requested content from the cache if available, 
        # otherwise pass the request to PHP
        try_files /typo3temp/tx_ncstaticfilecache/$host${request_uri}index.html @nocache;
    }

    location ~* \.(sql|tpl|html5|xhtml) {
        deny all;
    }

    location ~*  \.(jpg|jpeg|png|gif|css|js|ico)(.*)$ {
        expires max;
        log_not_found off;
    }

    location ~ /\. {
        deny all;
        access_log off;
        log_not_found off;
    }

    location ~ \.php$ {
        return 418;
    }

    location @nocache {
        try_files $uri =404;
        include /etc/nginx/fastcgi_params;
        fastcgi_pass 127.0.0.1:9000;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        fastcgi_index index.php;            
    }
} 
```

# java - 除了初始化之外，如何为匿名数组赋值？

> ID：10320148
> 
> 赞同：-2
> 
> 时间：2012-04-25T16:46:22.690
> 
> 标签：java, arrays, anonymous

方法只接受匿名数组，例如：

```
setSomeValue(new String[] {'v1', 'v2', 'v3')); 
```

我想将另一个数组的值复制到这个匿名数组中，然后再将其发送到 setSomeValue 方法。

setsomeValue 方法：

```
public void setSomeValue(String[] pArrayName) { vararray = pArrayName; } 

public void getSomeValue() { return vararray;} 
```

但是调用 getSomeValue 的地方会执行一些 Rql 查询等。

```
QueryExpression valueQE =
    pQueryBuilder.createConstantQueryExpression(getSomeValue()); 
```

我认为这是该方法`createConstantQueryExpression`期望的关键和对象！但一直以来我都在设置 String[] 数组，但由于它是匿名的，所以它被视为一个对象。

回答：对不起，让你们混淆了。。是的，你们都是天才，不要低估自己，哈哈。。问题是正在生成的查询不正确，内容有问题，数组本身是否被正确处理一个匿名数组与否！并且是的，没有条件只接受一个匿名数组（至少在这种情况下不是）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T16:49:01.953

如果要将数组的副本传递给方法，请尝试以下操作：

```
setSomeValue(Arrays.copyOf(arr, arr.length)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T17:10:42.193

复制数组最简单的方法是使用 clone()

```
String[] array = "v1,v2,v3".split(",");
String[] someOtherArray = array.clone();
setSomeValue(someOtherArray); 
```

顺便说一句：这是一个浅拷贝。

# visual-studio - 压缩一个完整的视觉工作室项目

> ID：10320149
> 
> 赞同：2
> 
> 时间：2012-04-25T16:46:25.100
> 
> 标签：visual-studio, zip

问这么简单的问题我觉得有点傻，但是这里有......

我正在尝试将我的 Visual Studio 2008 项目发送到一个压缩文件夹中，以便我可以将其上传以提交 - 所有项目文件都需要存在。

但是，尽管程序在压缩之前运行良好，但当我压缩文件夹时，我收到错误消息，提示无法找到某些文件。我的程序文件旁边有一个黄色感叹号警告。

我猜这个问题是由于文件丢失或移动造成的，但我有点困惑如何压缩项目的所有内容会导致这个问题。

注意 - 我正在尝试使用压缩文件夹 'Visual C# Project File' 中的以下文件打开压缩项目。

如果有人可以帮助我解决这个问题，将不胜感激！

与此同时，我将继续寻找解决此问题的方法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T16:49:28.217

您是否对已压缩的项目文件夹外部的库有任何依赖关系，例如 GAC 中的 dll？

# emacs - 为什么我在emacs中调用byte-recompile-directory函数时需要先输入cu 0？

> ID：10320150
> 
> 赞同：2
> 
> 时间：2012-04-25T16:46:27.720
> 
> 标签：emacs, compilation, org-mode

我正在将 org-mode 安装到我的 emacs。网上某处的教程告诉我应该执行以下步骤`c-u 0 m-x byte-recompile-directory<RET>`：而且我知道我在后面的步骤（`m-x byte-recompile-directory<RET>`）中做什么，但是这里的含义是`"c-u 0"`什么？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T16:59:33.760

从`byte-recompile-directory`文档中：

> 如果 '.elc' 文件不存在，通常这个函数**不会** 编译对应的 '.el' 文件。但是，如果前缀参数 *ARG*为 0，则意味着编译所有这些文件。非零 *ARG*意味着询问用户，对于每个这样的 '.el' 文件，是否编译它。非零*ARG*也意味着在扫描之前询问每个子目录。

`C-u`是向交互函数提供数字参数的常用方法。除非您使用 提供零参数`C-u 0`，否则`.elc`不会重新编译没有文件的文件。

# jquery - 标签（或跨度）没有淡出？

> ID：10320153
> 
> 赞同：0
> 
> 时间：2012-04-25T16:46:39.890
> 
> 标签：jquery, asp.net

我在 asp.net 的页面上有一个简单的标签，当它通过 HTML 生成时，它看起来像这样：

`<span id="LineItemContent_lblLineItemMessage"></span>`

在 jquery 我这样做：

`$('#LineItemContent_lblLineItemMessage').fadeOut(25000, function () { });`

因为我希望它最终淡出。但它永远不会只是停留在我的页面上。不确定我的语法是否错误或其他任何东西都可能无法正常工作。有人可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T16:48:43.460

确保在 DOM 准备就绪时执行脚本：

```
$(function(){
    $('#LineItemContent_lblLineItemMessage').fadeOut(25000);
}); 
```

* * *

此外，最好使用服务器控件的 clientid - 因为它将来可能会改变：

```
$(function(){
    $('#<%= lblLineItemMessage.ClientID %>').fadeOut(25000);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T16:50:04.100

确保将 jQuery 行放在文档就绪标签中：

```
$(document).ready(function(){
    $('#LineItemContent_lblLineItemMessage').fadeOut(25000, function () { });
}); 
```

# objective-c - UIPopoverController中的iOS5.0 MFMailComposerViewController在键盘弹出时动画关闭屏幕

> ID：10320162
> 
> 赞同：1
> 
> 时间：2012-04-25T16:47:23.680
> 
> 标签：objective-c, ios5

我有一个在 iOS4.x 上运行良好的应用程序，在大多数情况下在 iOS5.0 上运行良好。但是，我注意到我的“发送电子邮件”功能存在问题。

我在 iPad 的 UIPopoverController 中有一个 MFMailComposerViewController。这在 iOS4.x 上工作得很好，但在 iOS5.0 上，当键盘弹出以输入（例如）目标电子邮件地址时，UIPopoverController 会在屏幕上显示动画。当键盘被关闭时， UIPopoverController 动画回到屏幕上。看起来不错，但不是很有用。这不会发生在 iOS4.x 上。

我尝试更改 UIPopoverController 的内容大小，以使键盘不会覆盖弹出框的任何部分，但仍会在屏幕外导航。下面的代码片段。我不得不认为这是我没有看到的明显的东西。任何想法将不胜感激。

我应该补充一点，我在测试期间在模拟器中看到了这种行为——我没有运行 iOS5.0 的 iPad。

```
MFMailComposeViewController *mailController;

mailController = [[[MFMailComposeViewController alloc] init] autorelease];
mailController.mailComposeDelegate = self;

[mailController setSubject:@"email subject"];
[mailController setMessageBody:@"email message body" isHTML:NO];

[[[UIApplication sharedApplication] keyWindow] setRootViewController:self];

mailPopoverController = [[UIPopoverController alloc] initWithContentViewController: mailController];
[mailPopoverController setDelegate:self];

[mailPopoverController presentPopoverFromRect:CGRectMake(keyWindow.bounds.size.width / 2.0, 0.0f, 1.0f, 1.0f)
                                       inView:self.view
                     permittedArrowDirections:UIPopoverArrowDirectionUp
                                     animated:NO]; 
```

# sql - 对患者进行分组并显示重复访问

> ID：10320163
> 
> 赞同：0
> 
> 时间：2012-04-25T16:47:26.463
> 
> 标签：sql, sql-server, stored-procedures, user-defined-functions

我有一张桌子叫`Visits`：

```
ID(PKey,Int)
PatiendID(int),
DoctorID(int),
ExpectedDate(date),
ActualDate(date), 
```

我如何编写一个查询，为每个患者返回重复访问的次数。

如果距离上次访问不到一年的一半，则认为该访问是重复的。

换句话说，我需要为每个患者找到（**最后一次访问**-6 个月）和最后一次访问之间的访问次数，不包括最后一次访问。是否可以编写没有游标的查询？

和其他问题。我有表患者 `ID(int, PKey),Name,Pasport,State` 是否可以从这里为每个客户找到相同的信息？或者最好将下面的查询和不在访问表中的所有客户联合起来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T16:59:46.450

> 换句话说，我需要为每个患者找到（最后一次就诊 - 6 个月）和最后一次就诊之间的就诊次数，不包括最后一次就诊。

```
WITH CTE AS
(
    SELECT PatientID, MAX(ActualDate) AS LastVisit
    FROM Visits
    GROUP BY PatientID
)
SELECT CTE.PatientID, COUNT(1)-1 AS RepeatVisits
FROM CTE INNER JOIN Visits ON CTE.PatientID = Visits.PatientID
WHERE ActualDate BETWEEN DATEADD(month, -6, LastVisit) AND LastVisit
GROUP BY CTE.PatientId 
```

这将按患者对最后一次就诊前六个月内的所有就诊进行分组。它会给你 COUNT（总数）减一（不包括最后一次访问）。

完整示例： http: [//pastebin.com/vpCdASpB](http://pastebin.com/vpCdASpB)

对于第二部分（患者表），请参见此处： http: [//pastebin.com/nKw0Wqvp](http://pastebin.com/nKw0Wqvp)

```
WITH CTE AS
(
    SELECT Patients.PatientID, Patients.Name, MAX(ActualDate) AS LastVisit
    FROM Patients LEFT JOIN Visits ON #patient.PatientID = Visits.PatientID
    GROUP BY Patients.PatientID, Patients.Name
)
SELECT CTE.PatientID, CTE.Name, COUNT(1)-1 AS RepeatVisits
FROM CTE LEFT JOIN Visits ON CTE.PatientID = Visits.PatientID
                          AND Visits.ActualDate BETWEEN DATEADD(month, -6, LastVisit) AND LastVisit
GROUP BY CTE.PatientId, CTE.Name
ORDER BY PatientID; 
```

# coldfusion - 缺少条目的 CFLoop 错误

> ID：10320166
> 
> 赞同：1
> 
> 时间：2012-04-25T16:47:29.580
> 
> 标签：coldfusion, cfloop

**请忽略此帖。我在这里对我的问题做了一个更清楚的例子： [当条目丢失时 CFLoop 出错](https://stackoverflow.com/questions/10321272/error-with-cfloop-when-entries-are-missing)**

我正在运行下面的 CFLoop 代码。

```
<cfset data = queryNew("sid,firstname,lastname,age","integer,varchar,varchar,integer")>
<cfloop index="x" from="1" to="50">
    <cfset queryAddRow(data)>
    <cfset querySetCell(data,"sid",x)>
    <cfset querySetCell(data,"firstname","#first[x]#")>
    <cfset querySetCell(data,"lastname","#last[x]#")>
    <cfset querySetCell(data,"age","#studentage[x]#")>
</cfloop>

<cfoutput query="data">
    #sid# -  #firstnamet# #lastname# - #age#<br />
</cfoutput> 
```

变量`first[x]`、`last[x]`和`studentage[x]`是从外部数据源中提取的，`X`它们是循环索引。请注意，CFloop 有 50 个条目。

当有可用数据时，代码运行良好。但是，当缺少数据时，代码会中断。我的意思是，如果条目 11 没有为`first[x]`变量列出名称，我会收到如下错误`"Element first is undefined. The error occurred on line 5`

（第 5 行是名字的条目）。

发生这种情况时，我想从我的结果中省略条目 11（以及所有其他导致错误的条目）并防止显示错误。我怎样才能做到这一点？

**澄清：**请假设数据已定义。因为我使用的是外部数据源，所以它有点毛茸茸。但我要说的是条目 1 到 10 出现了。轮到它的条目 11 时，就会出现错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T17:10:25.287

在循环中使用外部数据库的记录计数应该可以防止错误。

```
<cfloop index="x" from="1" to="#ExternalDatabaseQuery.RecordCount#"> 
```

假设您确实在内存中有查询，更好的解决方案是使用查询查询。

```
<cfquery dbtype='query' name='data'>
SELECT SID, First AS FirstName, Last AS LastName, Age AS StudentAge
FROM ExternalDatabaseQuery
</cfquery> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T17:23:54.307

迈克，如果我误解了你所追求的，我深表歉意，但似乎一些基本条件可以完成这项工作。以下对您的代码的编辑只是关于如何进行的建议（当然，您的完整代码库可能会稍有不同）。

```
<cfset data = queryNew("sid,firstname,lastname,age","integer,varchar,varchar,integer")>
<cfloop index="x" from="1" to="50">
    <cfif isDefined("first[x]") AND isDefined("last[x]") AND isDefined("studentage[x]")>
    <cfset queryAddRow(data)>
    <cfset querySetCell(data,"sid",x)>
    <cfset querySetCell(data,"firstname","#first[x]#")>
    <cfset querySetCell(data,"lastname","#last[x]#")>
    <cfset querySetCell(data,"age","#studentage[x]#")>
    </cfif>
</cfloop>

<cfoutput query="data">
    #sid# -  #firstnamet# #lastname# - #age#<br />
</cfoutput> 
```

这里的主要问题（也许这对您来说不是问题）是这将输出 50 - 错误。因此，如果有 3 个错误（即未找到数据），您将输出 47 个条目而不是 50 个。如果这是一个问题，请添加评论......有一些替代方法可以确保您始终拥有 50 个条目输出。

# html - CSS HTML如何将div内的图像对齐到右下角

> ID：10320168
> 
> 赞同：3
> 
> 时间：2012-04-25T16:47:35.293
> 
> 标签：html, css

所以我有一个带有背景图片的 div

标记如下

```
<div class="leadgen">
    <h3><asp:Literal ID="LeadGenSpotTitleLiteral" runat="server"></asp:Literal></h3> 
    <img src="/images/leadGen_hand.png"/>
    <span>
        <asp:Literal ID="LeadGenSpotDescriptionLiteral" runat="server"></asp:Literal>    
    </span>
</div> 
```

我想要做的是保持`<img src="/images/leadGen_hand.png"/>`右下角的图像浮动到跨度文本的右侧。

当前的 CSS

```
#solutionsNav div.leadgen {
    background:url(/images/leadGen_bg2.png) no-repeat;
    background-size: 100% 100%;  
    padding: 10px;
    color: #FFF;
    cursor: pointer;
}

#solutionsNav div.leadgen h3 {
     font-weight: bold;
     font-family: arial;
     color: #ffffff;
     font-size: 12pt;
     padding-bottom: 3px;
}

#solutionsNav div.leadgen span {
     font-family: arial;
     color: #ffffff;
     font-size: 10pt;
     margin: 0;
     padding: 0;
}

#solutionsNav div.leadgen img {
    padding: 0 5px 10px 10px;
    float: right;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T16:54:33.267

我认为使用纯 CSS 将图像保持在右侧和底部的唯一方法是绝对定位它：

```
#solutionsNav div.leadgen {
    background:url(/images/leadGen_bg2.png) no-repeat;
    background-size: 100% 100%;  
    padding: 10px;
    color: #FFF;
    cursor: pointer;
    position: relative;
}
#solutionsNav div.leadgen img {
    padding: 0 5px 10px 10px;
    position: absolute;
    bottom: 0;
    right: 0;
} 
```

不过，我不知道这是否能保持你想要的布局。

如果图像纯粹是装饰性的，您可以将其作为背景的一部分，然后将其与背景位置一起放置在父元素上。

# javadoc - 如何使用 Guice 的 Javadoc 配置 Eclipse？

> ID：10320171
> 
> 赞同：0
> 
> 时间：2012-04-25T16:47:49.270
> 
> 标签：javadoc, guice

[我在Guice 3.0 下载](http://code.google.com/p/google-guice/downloads/list)的任何地方都没有看到 Javadoc jar 。

包含 Javadocs 的官方 jar 是否可用？或者除了解压缩源文件并将其指向解压缩的文件夹之外，还有其他方法可以将 Eclipse 指向 Javadocs 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T17:08:13.187

maven Central 中的 Guice jar 有 javadocs：

[http://search.maven.org/#artifactdetails|com.google.inject|guice|3.0|jar](http://search.maven.org/#artifactdetails%7Ccom.google.inject%7Cguice%7C3.0%7Cjar)

[http://search.maven.org/remotecontent?filepath=com/google/inject/guice/3.0/guice-3.0-javadoc.jar](http://search.maven.org/remotecontent?filepath=com/google/inject/guice/3.0/guice-3.0-javadoc.jar)

如果您使用的是 maven（m2eclipse？），您可以在 Eclipse 中使用 javadocs 自动获取这些 java 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T16:56:55.720

您可以将[压缩的源存档](http://code.google.com/p/google-guice/downloads/detail?name=guice-3.0-src.zip&can=2&q=)添加到 jar 中，而不是在项目的属性中仅指定 Javadoc，Eclipse 将识别并显示 Javadocs 以及源。

我确实看到 javadocs 在 .

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T17:10:39.237

不直接回答您的问题，但 javadocs 也托管在：

[https://google-guice.googlecode.com/git/javadoc/](https://google-guice.googlecode.com/git/javadoc/)

如果您想在生成自己的 javadoc 时链接到它们。

# c# - 加快 linq/entity 结果的返回

> ID：10320174
> 
> 赞同：2
> 
> 时间：2012-04-25T16:48:03.250
> 
> 标签：c#, asp.net, linq, entity

不幸的是，我正在维护一个系统，它没有考虑一旦系统拥有数百万条记录会发生什么。

我遇到的问题是当前编写代码的方式主要是 GetList 方法实际上从数据库中返回每条记录，并且过滤是在 getfull 方法中完成的。

我尝试通过将调整的 id 传递给 getlist 方法来更改此设置，但是当我尝试执行 .Where(a=>a.Id == journalid) 时出现此错误

**无法将类型“System.Linq.IQueryable”隐式转换为“System.Data.Objects.ObjectQuery”**

```
public Adjustment GetFull(int id) {
            var result = GetList(id).FirstOrDefault(ja => ja.Id == id);
            if(result == null) {
                throw new InvalidOperationException(
                    String.Format(" Adjustment with Id={0} not found.", id)
                );
            }
            return LoadFullActivities(result);
        }

        private IQueryable<Adjustment> GetList(int journalid) {
            return GetList(journalid,"Original", "Activities",
                "Original.Employee", "Original.Employee.EmployeeType", 
                "Original.Employee.WorkType", "Original.Employee.Department", 
                "Original.Activities", "Original.Status", 
                "Original.Approver", "Status");
        }

        private IQueryable<Adjustment> GetList(int journalid, params string[] includes) {
            var tempResult = dataContext.AdjustmentSet;
            foreach (var property in includes) {
                tempResult = tempResult.Include(property).Where(a=>a.Id == journalid) ;
            }
            return tempResult;
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T16:54:07.190

这将修复错误

```
private IQueryable<Adjustment> GetList(int journalid, params string[] includes) {
         var tempResult = dataContext.AdjustmentSet.AsQueryable();
         foreach (var property in includes) {
              tempResult = ((ObjectQuery<Adjustment>)tempResult).Include(property);
         }            
         return tempResult.Where(a=>a.Id == journalid);
      } 
```

这些包括减慢查询速度。由于查询将只获得一行（并且由于包含而进行其他连接），我认为性能不会那么慢。为了提高性能，为每个外键添加索引。我猜 a.Id 已经有一个聚集索引。

# animation - 使用滚动视图将动画移出屏幕

> ID：10320176
> 
> 赞同：0
> 
> 时间：2012-04-25T16:48:05.987
> 
> 标签：animation, ios5, uiscrollview, xcode4.3

我的应用程序开始时有一个小动画，两扇门水平打开，顶部和底部显示屏幕。到目前为止一切都很好，顶部移动得很好，但是因为我有滚动视图，所以页面比标准长，准确地说是 175000。我知道如何修改代码以将底部的 png 从屏幕上发送出去，因为此时它会卡在标准屏幕结束的位置。有人可以建议吗？到目前为止，我已经尝试过手动添加高度，`self.view.size.height;`但这没有用，我假设它在我应该改变的某个地方

```
CGRect doortopFrame = doortop.frame;
doortopFrame.origin.y = -doortopFrame.size.height;

CGRect doorbottomFrame = doorbottom.frame;
doorbottomFrame.origin.y = self.view.bounds.size.height;

[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:2.0];
[UIView setAnimationDelay:0.5];
[UIView setAnimationCurve:UIViewAnimationCurveEaseOut];

doortop.frame = doortopFrame;
doorbottom.frame = doorbottomFrame;

[UIView commitAnimations]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T18:34:07.630

修复了这个问题，改变底部动画来解决`origin.X`问题

# python - 使用python在数据库中的字典中发送数据

> ID：10320178
> 
> 赞同：0
> 
> 时间：2012-04-25T16:48:20.793
> 
> 标签：python, sql, wxpython, sqlalchemy

我有一个使用 wxpython 和 postgresql 作为我的数据库构建的应用程序。我不知道将数据从 GUI 发送到数据库的正确方法是什么，但我正在做的是将 GUI(txtctrl) 输出存储在字典中并尝试将其发送到 postgresql。我的问题是：有什么方法可以使用 sqlalchemy 将数据发送到数据库，其中字典键充当 column_fields，字典值充当其值。是否有更优雅的方式来进行 GUI 和数据库之间的数据通信？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T17:00:43.310

假设您`declaratives`在 sqlalchemy 中使用，并且您的对象名称是 Object，您可以使用：

```
# I suppose you already have your session somehow...
# If you want to add it to the database
# Assuming you did not change the __init__ method
obj = Object(**data_dictionary_with_keys_matching_column_names)
session.add(obj)

# If you want to issue an update
# obj is already there somehow...
for k, v in data_dictionary_with_keys_matching_column_names.iterkeys():
    setattr(obj, k, v)

session.commit() 
```

仅当您使用 ORM 和声明性时。（你提到了 sqlalchemy，所以我猜如果它是 postgresql 或另一个它不会改变）

**编辑**：我认为您正在采用正确的方法，只需确保将`wx.Validator`s 用于表单并将数据存储在字典中，这非常实用。

# android - Android Actionbar 向上按钮与系统返回按钮

> ID：10320179
> 
> 赞同：31
> 
> 时间：2012-04-25T16:48:21.813
> 
> 标签：android, android-actionbar

我正在使用操作栏，它是“向上”按钮，可以从详细活动返回到主要活动，效果很好。同样，用户可以按下系统的“返回”按钮返回到主活动。

在我的主要活动中，`onCreate()`从互联网下载数据以在应用启动时显示。我注意到，当我使用操作栏“向上”按钮从详细信息转到主要活动时，`onCreate()`正在运行，重新下载数据。但是`onCreate()`当我使用系统“后退”按钮时没有运行，因此立即显示主活动视图。

我在详细活动中用于实现“向上”按钮的代码是：

```
switch (item.getItemId()) {
   case android.R.id.home:
      Intent intent = new Intent(this, MainActivity.class);
      intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
      startActivity(intent);
      return true; 
```

我希望“向上”按钮的行为类似于“后退”按钮而不是重新运行`onCreate()`。但我不确定如何实现这一点，或者“后退”按钮实现哪个代码路径以返回主要活动。

谢谢！

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-04-25T16:52:05.540

无需开始一个全新的活动，只需完成您所在的详细信息活动

```
switch (item.getItemId()) {
   case android.R.id.home:
      finish();
      return true; 
```

然后您将返回到活动堆栈上的上一个活动（您的主要活动）并且不应调用 onCreate

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-10-01T23:43:55.740

如果您希望 Up 完全执行 Back 所做的操作，您可以这样做：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch(item.getItemId()) {
        case android.R.id.home:
            onBackPressed();
            return true;
        default:
            break;
    }
    return super.onOptionsItemSelected(item);
} 
```

请注意，默认实现`onBackPressed()`只是调用`finish()`，但`onBackPressed`可以被覆盖。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-05-03T02:38:40.183

我认为可以在[这篇文章](https://stackoverflow.com/a/20306670/1435804)中找到更好的解决方案。

调用`finish()`在特定情况下有效，但可能并不总是产生[文档](http://developer.android.com/design/patterns/navigation.html)中描述的行为，例如：

![在此处输入图像描述](../Images/cf16392c63b589c12ddcf333b0233383.png)

通过调用

```
Intent intent = NavUtils.getParentActivityIntent(this); 
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP|Intent.FLAG_ACTIVITY_SINGLE_TOP); 
NavUtils.navigateUpTo(this, intent); 
```

您将以离开它的状态返回父活动。如果你有一个扁平的应用程序结构，它仍然会像返回按钮一样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T17:16:52.523

对于真正的“家庭”功能，您应该在“应用程序/活动/重新排序活动”下查看 api 演示。

原因：如果你有这样的东西：activity1->activity2->activity3，现在你希望通过按操作栏上的主页按钮进入activity1？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-26T14:51:58.140

我相信最简单的方法是覆盖添加标志“Intent.FLAG_ACTIVITY_CLEAR_TOP”的详细活动的“getParentActivityIntent”方法：

```
@Nullable
@Override
public Intent getParentActivityIntent() {
    Intent intent = super.getParentActivityIntent();
    if (intent != null) {
        return super.getParentActivityIntent().addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    }
    return intent;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-23T15:32:15.247

还有另一种解决方案可供某人使用。当用户按下 Back 和 ActionbarBack 按钮时，我有同样的双重行为。我对 Back btn 行为很好。我不希望重新创建活动。所以我覆盖了这个方法

```
 @Override
public boolean onSupportNavigateUp() {
    onBackPressed();
    return true;
} 
```

对我来说很好

# iphone - 检查 NSString 是否包含 base64 数据

> ID：10320186
> 
> 赞同：1
> 
> 时间：2012-04-25T16:48:43.677
> 
> 标签：iphone, objective-c, ios, base64, nsdata

如何检查 NSString 是否在 if 语句中包含 base64 数据？因为 base64 以完全随机的方式对数据进行编码，所以我无法在 NSString 中搜索短语，因此我需要检查字符串的内容是否会生成数据文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T17:33:31.067

`NSString`这是我创建的一个应该可以工作的类别：

```
@interface NSString (MDBase64Additions)
- (BOOL)isBase64Data;
@end

@implementation NSString (MDBase64Additions)

- (BOOL)isBase64Data {
    if ([self length] % 4 == 0) {
        static NSCharacterSet *invertedBase64CharacterSet = nil;
        if (invertedBase64CharacterSet == nil) {
            invertedBase64CharacterSet = [[[NSCharacterSet
               characterSetWithCharactersInString:
        @"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="]
                                     invertedSet] retain];
        }
        return [self rangeOfCharacterFromSet:invertedBase64CharacterSet
           options:NSLiteralSearch].location == NSNotFound;
    }
    return NO;
}

@end 
```

如果您希望数据中有换行符或空格，您可以更新此方法以首先删除那些（可能是`NSCharacterSet`'s `+whitespaceCharacterSet`）。

如果主要只有一个类将使用此类别方法，则可以将此代码放在该类`@implementation`块上方的 .m 文件中。如果您认为您可能希望从多个类中使用该类别，您可以创建一个单独的 .h 和 .m 对来包含它（例如`MDFoundationAdditions.h`, `MDFoundationAdditions.m`），然后将其导入到这些类中。

要使用：

```
NSString *dataString = /* assume exists */;

if ([dataString isBase64Data]) {

} 
```

# c++ - Open Babel C++ API 为什么不能将他们的自定义迭代器直接用作函数的参数？

> ID：10320188
> 
> 赞同：1
> 
> 时间：2012-04-25T16:48:53.230
> 
> 标签：c++, iterator, type-conversion

在 Open Babel 库中，为 OBMol 类定义了许多迭代器对象，例如[OBMolAtomiter](http://openbabel.org/dev-api/classOpenBabel_1_1OBMolAtomIter.shtml)。在链接页面上，有以下代码示例说明了用法。

```
 #include <openbabel/obiter.h>
  #include <openbabel/mol.h>

  OpenBabel::OBMol mol;
  double exactMass = 0.0;
  FOR_ATOMS_OF_MOL(a, mol)
  {
     // The variable a behaves like OBAtom* when used with -> and * but
     // but needs to be explicitly converted when appearing as a parameter
     // in a function call - use &*a

     exactMass +=  a->GetExactMass();
  } 
```

（`FOR_ATOMS_OF_MOL(a, mol)`扩展为一个 for 循环，`a`被声明为迭代器类型。`mol`是要迭代的现有分子）

我想问，为什么`&*p`评论中描述的东西是必要的。当我将迭代器传递给需要指针的函数时，代码会编译，但程序的行为很奇怪。

我试着用谷歌搜索它，我找到了关于[iterator_traits](http://www.sgi.com/tech/stl/iterator_traits.html)的页面，它是否相关？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T16:53:34.187

类型的`FOR_ATOMS_OF_MOL(a, mol)`宏构造。要返回s，and运算符已被重载。这就是为什么不能直接传递给函数，而是表现得好像是一个.`a``OBMolAtomIter``OBAtom``*``->``a``*a``a->``a``OBAtom *`

[http://openbabel.org/api/2.2.0/classOpenBabel_1_1OBMolAtomIter.shtml](http://openbabel.org/api/2.2.0/classOpenBabel_1_1OBMolAtomIter.shtml)

# c# - 在我们的应用程序中为第 3 方系统提供 SSO 支持，无需其他登录页面

> ID：10320191
> 
> 赞同：0
> 
> 时间：2012-04-25T16:48:58.133
> 
> 标签：c#, asp.net-mvc-3, security, single-sign-on

我们有一个应用程序，我们需要它允许来自我们客户系统的用户能够在不看到另一个登录屏幕的情况下登录。

为我们的客户提供 SSO 类型体验的最佳方式是什么？我曾尝试研究 Azure ACS 和 Windows 身份框架，但它们似乎都是基于所有站点都使用的弹出/屏幕通用登录的想法。除非这个联合身份系统有其他方面，否则我认为这对我们不起作用。基本上，我们的客户是教育机构，有学生登录并使用他们自己的网络应用程序/门户。这些客户购买了对我们应用程序的访问权，并希望他们的学生能够从他们的门户中单击一个链接并自动登录我们的系统。

环顾四周，知道这些系统在完全独立的域上运行似乎很重要。对于一些遗留系统，我们已经要求我们的客户提供简单的 api 端点来实现非常自定义的 sso。我正在寻找有关 SSO 更标准方法的任何信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T16:53:06.920

[SAML 2.0](http://en.wikipedia.org/wiki/Security_Assertion_Markup_Language)是单点登录的标准。您的客户需要在他们的网站上有一些身份验证机制，可以将其转换为对您的应用程序的 SAML 调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T16:59:45.223

当他们为学生注册时，他们应该快速调用您的应用程序，将登录者的用户名传递给您。作为回报，您生成一个令牌，将其与用户名一起存储在数据库中，然后将令牌发送给他们. 他们将该令牌以 GET 形式附加到您的应用程序的任何链接，并且它“用完”令牌（将其从数据库中删除）但将它们登录到该帐户。

生成令牌后，您还可以从该应用程序允许的请求中删除一个“信用”，或者您想要在那里执行的任何其他操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T03:32:33.637

我们的特定需求要求我们使用一些简单的秘密令牌握手来推出自己的 SSO 类型系统。

# python - 在nltk python中从同一个句子中提取两个名字

> ID：10320194
> 
> 赞同：0
> 
> 时间：2012-04-25T16:49:10.347
> 
> 标签：python, nltk, extraction, sentence

嗨，这些天我开始玩 Python，这似乎很容易，所以我在 Python 的 nltk 中找到了语料库。当我尝试

```
text1.concordance("Moby") 
```

它给了我句子的数量和包含单词 Moby，cool 的句子的显示。

所以我试图测试我是否能找到所有名字为 Moby 和 Ahab 的句子，但遗憾的是我得到了错误。

我做错了什么还是应该能够得到包含这两个名字的所有句子？我应该使用 nltk 的另一个功能吗？哦

这可能很容易，但对我来说并不那么容易看到它...希望有人能提供帮助，谢谢。

PS：如果我需要写一些代码，一个例子会很棒。^^

编辑：由于有人要求错误，我也会编写我编写的代码。

```
import nltk
from nltk.book import *

text1.concordance("Moby","Ahab") 
```

给我错误：

```
Traceback (most recent call last):
  File "<pyshell#2>", line 1, in <module>
    text1.concordance('Moby','Ahab')
  File "C:\Programmering\Python27\lib\site-packages\nltk\text.py", line 314, in concordance
    self._concordance_index.print_concordance(word, width, lines)
  File "C:\Programmering\Python27\lib\site-packages\nltk\text.py", line 174, in print_concordance
    half_width = (width - len(word) - 2) / 2
TypeError: unsupported operand type(s) for -: 'str' and 'int' 
```

我猜想我会得到一些比赛，比如跑步：

```
text1.concordance("Moby") 
```

我有 84 场比赛。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T12:44:03.787

你不能用`concordance`. 它只接受一个单词并打印出结果。没有（合理的）方法可以将它们作为列表获取，因此您无法进一步过滤它们。问题是，`Text`后面的对象`text1`，只适合简单的交互式探索——我一直不明白为什么nltk书是用它开头的。所以忘了`Text`，跳过本章的其余部分，直接进入第 2 章。Moby Dick 是`gutenberg`语料库的一部分，所以你可以遍历它的句子并得到你的答案，如下所示：

```
from nltk.corpus import gutenberg
for s in gutenberg.sents('melville-moby_dick.txt'):
    if 'Ahab' in s and 'Moby' in s:
        print " ".join(s) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-09-07T08:32:03.173

您可以列出所有您想要与之一致的名称，例如：

```
name_list = ['Moby', 'Ahab'] 
```

这样做的代码是：

```
import nltk
from nltk.book import *
name_list = ['Moby', 'Ahab']
for name in name_list: 
    text1.concordance(name) 
```

# javascript - 在关键字前添加字符串 - javascript

> ID：10320198
> 
> 赞同：1
> 
> 时间：2012-04-25T16:49:18.583
> 
> 标签：javascript, regex, string, search

我有一个论坛，我想自动解析一些主要链接。例如，如果用户发布这样的帖子：

> 您应该访问 StackOverflow。我在维基百科上找到了它。

它会像这样自动解析它：

> 您应该访问 <a href="http://stackoverflow.com">StackOverflow</a>。我在 <a href="http://en.wikipedia.org/wiki/">维基百科</a> 上找到了它。

仅使用 JavaScript 是否可行？

感谢您的帮助。:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T17:07:53.873

您想要创建一个干净且可扩展的代码是创建一个 word => 链接库，然后您可以对其进行迭代并在您的代码中进行替换。

这是一个小提琴演示[http://jsfiddle.net/MjV84/](http://jsfiddle.net/MjV84/)

```
$(function() {

    var text = $('#foo').text(),
        library = {
            stackoverflow: 'http://stackoverflow.com',
            wikipedia: 'http://wikipedia.com'
        },
        name;

    for (name in library) {
        text = text.replace(new RegExp(name, 'gi'), function(word) {
            return '<a href="' + library[name] + '">'+word+'</a>';
        });  
    };

    $('#foo ').html(text);
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T16:53:27.280

如果您正在预处理文本，则可以使用[`replace`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace)带有[回调](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace#Specifying_a_function_as_a_parameter)的函数和使用交替的正则表达式：

```
var str = "You should visit StackOverflow. I found it on Wikipedia.";
str = str.replace(/StackOverflow|Wikipedia|etc/gi, function(m) {
    var href;
    switch (m.toLowerCase()) {
        case "stackoverflow";
            href = "http://stackoverflow.com";
            break;
        case "wikipedia";
            href = "http://en.wikipedia.org";
            break;
        // ...and so on...
    }
    return '<a href="' + href + '">' + m + '</a>';
}); 
```

* * *

YMMD 指出，上面需要对每个关键字定义两次，这是真的。当我不得不使用大量关键字来执行此操作时，我通过将关键字作为键、`href`值作为值的对象来完成它，并动态构建表达式：

```
// ==== Setup code you presumably do once

// The substitutions -- make sure the keys are in lower case
var substitutions = {
    "stackoverflow": "http://stackoverflow.com",
    "wikipedia":     "http://en.wikipedia.org",
    // ...and so on...
};

// Build the regex. Here I've used `Object.keys` which is an ES5 feature
// but you can use an ES5 shim (since it's something a shim can provide).
// Note that if your keywords include any special regular expression
// characters, you'll have to loop through the keys manually and escape
// those.
var subrex = new RegExp(Object.keys(substitutions).join("|"), "gi");

// ==== Where you're using it
var str = "You should visit StackOverflow. I found it on Wikipedia.";
str = str.replace(subrex, function(m) {
    return '<a href="' + substitutions[m.toLowerCase()] + '">' + m + '</a>';
}); 
```

[实例](http://jsbin.com/aleyaj)| [资源](http://jsbin.com/aleyaj/edit)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T16:54:05.223

是的，使用 String.replace(regex, replaceString) 来做到这一点。

这是一个例子：

```
var text = "You should visit StackOverflow. I found it on Wikipedia.";

var newText=text.replace(/stackoverflow/gi,
                         "<a href='http://www.stackoverflow.com/'>StackOverflow</a>"); 
```

代表全局，因此`g`它将替换所有实例，并且`i`表示不区分大小写的搜索。

如果您要替换常用词，例如“字典”链接到`dictionary.com`它，如果您仅在用户添加特殊标签时替换它会更好，例如：

```
"You should visit StackOverflow. I found it on Wikipedia." 
```

除非它是这样写的，否则不应用链接替换：

```
"You should visit &StackOverflow. I found it on Wikipedia." 
```

然后你的方法只需要添加特殊符号。

另外，我会将数据放在这样的数组中：

```
var linkArray = [ ["StackOverflow", "http://www.stackoverflow.com/", "Description"],
                  ["Wikipedia", "http://wikipedia.org/", "Free encyclopedia"] ]; 
```

然后创建一个循环来查找和替换实例：

```
function addLinks(textInput) {
    for (var i=0; i<linkArray.length; i++) {
        textInput = addLink(textInput, linkArray[i]);
    }
    return textInput;
}

function addLink(textInput, link) {
    var replaceString = "<a href=\"" + link[1] + "\" title=\""
                      + link[2] + "\">"
                      + link[0] + "</a>";
    return textInput.replace(new RegExp("&"+link[0], "gi"), replaceString);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T17:58:09.930

如果目标字符串包含大小写不同的替换字符串的变体，则在正则表达式上使用 i 修饰符的所有先前答案都会失败。这是因为目标字符串子字符串与替换属性名称不匹配。

这个版本通过捕获每个替换字符串并在参数数组中搜索找到的字符串来解决这个问题。

```
function substitute (str) { 'use strict';
  var substitutions = {
        "Stack Overflow": "http://stackoverflow.com",
        "Wikipedia":     "http://en.wikipedia.org",
        // ...and so on...
      },
      skeys = Object.keys (substitutions);

  // build regexp which will capture each match separtely
  return str.replace (new RegExp ('(' + skeys.join(")|(") + ')', "gi"), function (m0) {
    // Now scan the arguments array (omitting the last two arugments which
    // are the source string and match index)
    for (var ai, i = arguments.length - 2; --i;) {
      // The index of the argument (less 1) corresponds to the index in skeys of
      // the name in the substitutions  
      if ((ai = arguments[i])) {
        return '<a href="' + substitutions[skeys[i - 1]] + '">' + ai + '</a>';
      }
    }    
    return m0;    
  });
}

var str = "You should visit stack overflow. I found it on Wikipedia."; 

// check in console log that links are correctly built.
console.log (substitute (str));
document.write (substitute (str)); 
```

请参阅 jsfiddle：http: [//jsfiddle.net/NmGGN/](http://jsfiddle.net/NmGGN/)

# java - 将用户输入字符串转换为大写 Java

> ID：10320200
> 
> 赞同：7
> 
> 时间：2012-04-25T16:49:32.930
> 
> 标签：java, user-input, uppercase

这似乎是一个愚蠢的问题，但是在浏览了谷歌页面之后，我还没有找到我想要的答案。

```
s1.setName(JOptionPane.showInputDialog("Enter Name: "); 
```

对于上面的代码，我将如何将用户输入的数据格式化为全大写？

这里的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-25T16:53:07.713

String 类有一个 toUpperCase() 方法。

JOptionPane.showInputDialog(..) 返回一个字符串，因此您可以使用：

```
JOptionPane.showInputDialog("Enter name: ").toUpperCase(); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-25T16:51:00.480

请参见 String.toUpperCase()

请记住 String 是不可变的，因此这会创建一个重复的字符串

# javascript - 如何在 VB.NET mvc 控制器中调用 javascript 函数？

> ID：10320204
> 
> 赞同：0
> 
> 时间：2012-04-25T16:49:52.453
> 
> 标签：javascript, asp.net-mvc, vb.net-2010

我有一个 mvc 应用程序。我试图在控制器操作代码中调用一个 javascript 函数（比如 Create）......我的想法是当用户点击[http://localhost/somecontroller/someaction/id](http://localhost/somecontroller/someaction/id) .. 控制器应该运行 Create 函数。 .在这个函数中，我使用 xhrget 从 web 服务获取信息并将其写入视图。现在我的问题是如何在控制器中调用 Create 函数

这是创建功能

```
Create: function (obj)
{
var xhrGet1 = dXhr.get({
                url: "http://localhost/SomeService/parameter?id=" + obj.id,
                handleAs: "json",
                headers: { 'accept': 'application/json' }
            });
---
---
---
} 
```

这是我如何启动控制器但无法继续前进......有什么想法吗？

```
Function somecontroller (id As string) As ... 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T17:46:21.740

如果您尝试使用 直接调用`Create`可能存在于您的客户端 javascript 代码中的函数`somecontroller`，您将希望在您的`ActionResult`方法中执行类似的操作，以拦截存在于的初始请求`somecontroller`：

```
ViewBag.Id = id 
```

然后在您`.cshtml`看来，您必须在页面加载时添加此功能（`$(document).ready() { ... }`使用 jQuery 或简单地`window.onload = function() { ... }`：

```
someObj.Create({id: @ViewBag.Id}); 
```

*但是*有更好的方法来做到这一点。一个简单的解决方案可能是简单地`http://localhost/SomeService/`在您的控制器中调用并将结果作为强类型模型传递给您的视图？

# php - 如何将类似的 XML 与 PHPUnit 进行比较？

> ID：10320205
> 
> 赞同：6
> 
> 时间：2012-04-25T16:49:57.110
> 
> 标签：php, zend-framework, phpunit

所以假设我想比较两个 DOMDocument 对象。它们具有相同的内容，但顺序和格式可能会关闭。例如，第一个输出这个 XML：

```
<responses>
    <response id="12">
        <foo>bar</foo>

 <lorem>ipsum</lorem>
           <sit>dolor</sit>

    </response></responses> 
```

其他输出：

```
<responses>
<response id="12">

            <lorem>ipsum</lorem><sit>dolor</sit>
        <foo>bar</foo>
                            </response>
</responses> 
```

如您所见，它们包含相同的 XML 结构，但某些元素的顺序可能不同，并且格式是完全随机的。

如果我做：

```
$this->assertEquals(); 
```

测试当然会失败。我不想只测试 XML 结构，还要测试内容。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T09:26:30.153

这似乎解决了这个问题：

[https://phpunit.de/manual/current/en/appendixes.assertions.html#appendixes.assertions.assertXmlStringEqualsXmlString](https://phpunit.de/manual/current/en/appendixes.assertions.html#appendixes.assertions.assertXmlStringEqualsXmlString)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T16:53:25.580

这是哪个版本的 PHPUnit？我很确定最近的版本都支持 DomDocument 比较。

短版：使用`$doc->preserveWhiteSpace`设置删除空格，然后使用[`$doc->C14N()`](http://php.net/manual/en/domnode.c14n.php)删除注释并获取可以比较的字符串。

* * *

好的，这是一个您可以使用的脚本，请注意，这些`EOD;`行不能有任何尾随或前导空格。

```
 $x1 = <<<EOD
<responses>
    <response id="12">
        <foo>bar</foo>

 <lorem>ipsum</lorem>
           <sit>dolor</sit>
        <!--This is a comment -->

    </response></responses>
EOD;

$x2 = <<<EOD
<responses>
<response id="12">

            <lorem>ipsum</lorem><sit>dolor</sit>
        <foo>bar</foo>
        <!--This is another comment -->
                            </response>
</responses>
EOD; 
```

// 下一个块是同一个文件的一部分，我只是做这个格式化中断，这样 StackOverflow 语法高亮系统就不会阻塞。

```
$USE_C14N = true; // Try false, just to see the difference.

$d1 = new DOMDocument(1.0);
$d2 = new DOMDocument(1.0);

$d1->preserveWhiteSpace = false;
$d2->preserveWhiteSpace = false;

$d1->formatOutput = false; // Only useful for "pretty" output with saveXML()
$d2->formatOutput = false; // Only useful for "pretty" output with saveXML()

$d1->loadXML($x1); // Must be done AFTER preserveWhiteSpace and formatOutput are set
$d2->loadXML($x2); // Must be done AFTER preserveWhiteSpace and formatOutput are set   

if($USE_C14N){
    $s1 = $d1->C14N(true, false);
    $s2 = $d2->C14N(true, false);
} else {
    $s1 = $d1->saveXML();
    $s2 = $d2->saveXML();
}

echo $s1 . "\n";
echo $s2 . "\n"; 
```

输出与`$USE_C14N=true;`

```
<responses><response id="12"><foo>bar</foo><lorem>ipsum</lorem><sit>dolor</sit></response></responses>
<responses><response id="12"><lorem>ipsum</lorem><sit>dolor</sit><foo>bar</foo></response></responses> 
```

输出与`$USE_C14N=false;`

```
<?xml version="1.0"?>
<responses><response id="12"><foo>bar</foo><lorem>ipsum</lorem><sit>dolor</sit><!--This is a comment --></response></responses>

<?xml version="1.0"?>
<responses><response id="12"><lorem>ipsum</lorem><sit>dolor</sit><foo>bar</foo><!--This is another comment --></response></responses> 
```

请注意，这`$doc->C14N()`可能会更慢，但我认为删除评论似乎是可取的。请注意，所有这些还假设您的 XML 中的空格并不重要，并且可能存在一些用例，其中该假设是不正确的......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T16:53:41.043

我建议您将 XML 转换为`DOMDocuments`然后`assertEquals`与它们一起使用。PHPUnit 已经支持它 - 但是它可能无法满足您的所有需求。

您也可以重新格式化文档并重新加载它们，请参阅[PHP XML 如何输出漂亮的格式](https://stackoverflow.com/q/8615422/367456)：

```
$doc->preserveWhiteSpace = false;
$doc->formatOutput = true; 
```

另一个想法是按孩子的标记名对孩子进行排序——不知道以前是否这样做过。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-07T09:02:20.700

您可以使用 PHPUnit 的 assertXmlFileEqualsXmlFile()、assertXmlStringEqualsXmlFile() 和 assertXmlStringEqualsXmlString() 函数；然而，他们没有提供有什么不同的信息，他们只是让测试失败

```
Failed asserting that two DOM documents are equal. 
```

因此，您可能想使用 PHP 的[XMLDiff PECL 扩展](http://www.php.net/manual/en/book.xmldiff.php)，或者编写自己的递归比较函数。如果时间很重要，我建议不要使用 DOM，而是使用 SimpleXML，因为 API 更简单。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-24T21:46:10.067

我一直在玩这里提出的一些概念，并认为我不妨发布我的最终结果。我想做的一件事是比较两个节点或两个文档的结果。（从技术上讲，只要将类似文档的第一个孩子与另一个孩子进行比较，这个就可以进行比较）

基本上，如果我发送 DomDocument，它会使用 $clone->loadXml($obj->saveXml) 克隆它，但如果它是发送的节点，它会执行 $clone->importNode($obj); if 的顺序变得很重要，因为 DomDocument 也是 DomNode 的一个实例。

```
/**
 * @param \DOMDocument|\DOMNode $n1
 * @param \DOMDocument|\DOMNode $n2
 * @return bool
 * @throws \Exception for invalid data
 */
function compareNode($n1, $n2)
{
    $nd1 = new \DOMDocument('1.0', "UTF-8");
    if ($n1 instanceof \DOMDocument) {
        $nd1 = $n1->cloneNode(true);
        $nd1->preserveWhiteSpace = false;
        $nd1->formatOutput = false;
        $nd1->loadXML($n1->saveXML());
    } elseif ($n1 instanceof \DOMNode) {
        $nd1->preserveWhiteSpace = false;
        $nd1->formatOutput = false;
        $nd1->importNode($n1);
    } else {
        throw new \Exception(__METHOD__ . " node 1 is invalid");
    }

    $nd2 = new \DOMDocument('1.0', "UTF-8");
    if ($n2 instanceof \DOMDocument) {
        $nd2 = $n2->cloneNode(true);
        $nd2->preserveWhiteSpace = false;
        $nd2->formatOutput = false;
        $nd2->loadXML($n2->saveXML());
    } elseif ($n1 instanceof \DOMNode) {
        $nd2->preserveWhiteSpace = false;
        $nd2->formatOutput = false;
        $nd2->importNode($n2);
    } else {
        throw new \Exception(__METHOD__ . " node 2 is invalid");
    }

    return ($nd1->C14N(true, false) == $nd2->C14N(true, false));
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-29T07:23:33.883

使用以下断言：

```
$this->assertXmlStringEqualsXmlString($expected, $actual); 
```

# c - 使用 GDB 调试以编程方式调用的函数

> ID：10320209
> 
> 赞同：6
> 
> 时间：2012-04-25T16:50:13.953
> 
> 标签：c, gdb

我正在为 ARM32 调试一个软件。我已经能够以编程方式调用 GDB 中的函数`call`，甚至可以使用`print`. 问题是我似乎无法在函数上设置断点，然后以编程方式调用它。例如，如果我这样做：

```
break test_function
call test_function() 
```

然后我收到错误消息

> 正在调试的程序在从 GDB 调用的函数中停止。评估包含函数的表达式。函数执行完毕后，GDB 会静默停止。

有没有办法使用 GDB 以编程方式调用函数*并*逐步执行它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-25T17:32:59.613

> 然后我收到错误消息
> 
> `The program being debugged stopped while in a function called from GDB. Evaluation of the expression containing the function. When the function is done executing, GDB will silently stop.`

这不是错误。这*正是*您想要发生的事情：触发断点，您现在可以进行调试了。

# facebook - 如何使用 Javascript sdk 进入页面发送 FB 请求？

> ID：10320215
> 
> 赞同：0
> 
> 时间：2012-04-25T16:50:55.340
> 
> 标签：facebook, facebook-javascript-sdk

当用户进入特定的 .php 页面时，我会使用 FB.ui 发送请求。

我使用这个脚本来异步加载 javascript SDK：

```
<div id="fb-root"></div>
<script>
window.fbAsyncInit = function() {
FB.init({
  appId      : 'YOUR_APP_ID', // App ID
  channelUrl : '//WWW.YOUR_DOMAIN.COM/channel.html', // Channel File
  status     : true, // check login status
  cookie     : true, // enable cookies to allow the server to access the session
  xfbml      : true  // parse XFBML
});

// Additional initialization code here
};

// Load the SDK Asynchronously
(function(d){
 var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
 if (d.getElementById(id)) {return;}
 js = d.createElement('script'); js.id = id; js.async = true;
 js.src = "//connect.facebook.net/en_US/all.js";
 ref.parentNode.insertBefore(js, ref);
}(document));

function sendRequestToRecipients(user_id) {
    FB.ui({method: 'apprequests',
      message: 'My Great Request',
      to: user_id, 
    }, requestCallback);
  }
</script> 
```

然后，我尝试使用 onLoad 函数在标签内调用函数 sendRequestToRecipients()：

```
<body onLoad="sendRequestToRecipients('0000'); return false;"> 
```

但我收到 2 个错误“意外的标识符”，但没有任何反应。

另外，如果我从正文中删除 onload 并使用按钮手动调用 sendRequestToRecipients 函数

```
<input type="button"
    onclick="sendRequestToRecipients('0000'); return false;"
    value="Send"
  /> 
```

一切顺利！

有什么帮助吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T17:10:27.267

您不能从*onload*事件中调用它，因为您只能在 facebook sdk 完成加载和初始化后发出 api 请求。

它应该是：

```
<script>
    window.fbAsyncInit = function() {
        FB.init({
            appId      : 'YOUR_APP_ID', // App ID
            channelUrl : '//WWW.YOUR_DOMAIN.COM/channel.html', // Channel File
            status     : true, // check login status
            cookie     : true, // enable cookies to allow the server to access the session
            xfbml      : true  // parse XFBML
        });

        sendRequestToRecipients("USER_ID");
    };

    // Load the SDK Asynchronously
    (function(d){
        var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
        if (d.getElementById(id)) {return;}
        js = d.createElement('script'); js.id = id; js.async = true;
        js.src = "//connect.facebook.net/en_US/all.js";
        ref.parentNode.insertBefore(js, ref);
    }(document));

    function sendRequestToRecipients(user_id) {
        FB.ui({method: 'apprequests',
            message: 'My Great Request',
            to: user_id, 
        }, requestCallback);
    }
</script> 
```

请注意，我在*FB.init*之后的*window.fbAsyncInit*回调方法中调用了*sendRequestToRecipients*。

# entity-framework - EF WillCascadeOnUpdate

> ID：10320216
> 
> 赞同：0
> 
> 时间：2012-04-25T16:50:57.730
> 
> 标签：entity-framework, entity-framework-migrations

在 ef 迁移中有没有办法将外部 GUID 键设置为在更新时级联？如果我有两个带有用户表的数据库和具有不同主键的同一个用户，我想将一个的主 GUID 键设置为另一个。

基本上我试图避免在它们之间创建另一列来检查同步。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T11:13:36.247

这里面有两个问题需要解决：

1.  如何获得所需的数据库和/或代码行为。
2.  如何让 EF Migrations 从第 1 点生成解决方案所需的东西（触发器或其他）。

对于第一部分，我会考虑使用触发器。对于第二部分，使用迁移创建触发器，可以通过在迁移步骤中运行原始 sql 命令来完成（您必须使用基于代码的迁移）。

# asp.net-mvc - 通过 id 获取房间

> ID：10320219
> 
> 赞同：1
> 
> 时间：2012-04-25T16:51:12.147
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我正在 MVC 3 中进行酒店预订项目在这里我显示房间： ![在此处输入图像描述](../Images/12baf7f21049d8ff49de369bfe7fb6b6.png)

当我点击预订 romm 时，我到了这里：

![在此处输入图像描述](../Images/071083550eae089d7af81ed7017262a3.png)

但我想做的是直接在预订表格房间框中获取我选择的房间号。

这是我的预订创建视图：

```
@using (Html.BeginForm()) {
@Html.ValidationSummary(true)
<fieldset>
    <legend>Reservation</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.Room_ID, "Room")
    </div>
    <div class="editor-field">
        @Html.DropDownList("Room_ID", String.Empty)
        @Html.ValidationMessageFor(model => model.Room_ID)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Guest_ID, "Client")
    </div>
    <div class="editor-field">
        @Html.DropDownList("Guest_ID", String.Empty)
        @Html.ValidationMessageFor(model => model.Guest_ID)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Data_Check_in)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Data_Check_in)
        @Html.ValidationMessageFor(model => model.Data_Check_in)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Data_Check_out)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Data_Check_out)
        @Html.ValidationMessageFor(model => model.Data_Check_out)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Preference_ID, "Preferinte")
    </div>
    <div class="editor-field">
        @Html.DropDownList("Preference_ID", String.Empty)
        @Html.ValidationMessageFor(model => model.Preference_ID)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Price)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Price)
        @Html.ValidationMessageFor(model => model.Price)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Card_ID, "Card_de_credit")
    </div>
    <div class="editor-field">
        @Html.DropDownList("Card_ID", String.Empty)
        @Html.ValidationMessageFor(model => model.Card_ID)
    </div>

    <p>
        <input type="submit" value="Create" />
    </p>
</fieldset> 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T16:53:45.510

您可以使用视图模型将房间 ID 从第一页传递到表单页面吗？

# excel - 以编程方式访问 Excel

> ID：10320229
> 
> 赞同：3
> 
> 时间：2012-04-25T16:51:32.583
> 
> 标签：excel

我收到了一个包含大量数据和公式的巨大 Excel 文件，我需要访问其中实现的功能以创建在 MacOSX 上运行的 Web 服务。起初我尝试使用 POI 从 Java 访问其功能，但不幸的是 POI 不支持某些功能，如 MINVERSE、TRANSPOSE、MMULT 等，我发现实现它们特别困难（另见[这个问题](https://stackoverflow.com/questions/10298512/apache-poi-how-to-register-a-function/10306350)）。

是否有编程方式访问 Excel 工作表？我为 R 找到了 RCOMClient，但它似乎只能在 Windows 上运行。Perl、Python、R、Octave、C++、Java 或任何可以提供超过 Excel 公式的完整功能的东西。

**Python Excel**：为什么 Python Excel 不能解决我的问题。在教程中是这样写的：

> 仅当您对可以将哪些单元格用作原点有外部知识时，相对参考才有用。Excel 文件中的许多公式都包含函数调用和多个引用，它们没有用处，而且可能难以评估。**xlrd 中不包含完整的计算引擎。**

不幸的是，我需要一个非常好的 Excel 引擎支持。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T16:54:54.567

你当然可以。

你检查过精彩的[Python Excel](http://www.python-excel.org/)项目吗？

更好的是：你可以看看[那个惊人的博客文章](http://michalisavraam.org/2009/06/manipulating-excel-files-using-python-part-1-reading-files/)。

玩得开心，如果您需要更多帮助，请随时联系我们。

*   不要费心从 Python 以外的其他语言访问 Excel，因为 Python 会浪费更少的时间。

# xml - 有没有办法拥有一个 标签渲染*仅*如果其内容模板具有子数据或原始数据，即复杂或简单类型？

> ID：10320231
> 
> 赞同：0
> 
> 时间：2012-04-25T16:51:36.883
> 
> 标签：xml, xslt, filter, transform, xslt-1.0

伙计们，

**有没有办法让标签*仅*在其内容模板具有子数据或原始数据（即复杂或简单类型）时呈现？**

假设我的 XML 数据如下所示：

## 数据

```
<Root>
   <Data>stringdata</Data>
</Root> 
```

我的 XSLT 看起来像这样：

## XSLT

```
<xsl:template match="/Root">
  <xsl:element name="Empty">
    <xsl:choose>
      <xsl:when test="Data = 'stringdata'">
        <xsl:value-of select="Data"/>
      </xsl:when>
    </xsl:choose>
  </xsl:element>
</xsl:template> 
```

当不包含“stringdata”时，将显示一个名为的空元素。如果没有使用选择或 if 语句进行包装，或者设计第二个转换以仅匹配在第一个转换中生成且其中包含数据的元素，我该如何防止生成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T19:54:29.143

除非我遗漏了什么，否则您只需检查模板中的条件即可

```
<xsl:template match="Root[Data = 'stringdata']">
   <!-- Output Empty Element -->
<xsl:template> 
```

您还需要第二个模板来匹配不匹配且不执行任何操作的**Root元素**

```
<xsl:template match="Root" /> 
```

请注意，更具体的模板将始终具有优先权。

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:template match="Root[Data = 'stringdata']">
      <Empty>
         <xsl:value-of select="Data"/>
      </Empty>
   </xsl:template>

   <xsl:template match="Root"/>
</xsl:stylesheet> 
```

当应用于您的 XML 时，它会输出以下内容

```
<Empty>stringdata</Empty> 
```

将文本更改为其他任何内容，并且不输出任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T19:48:49.850

根据您所说的上述评论：

> 我想要这个数据：`<Root> <Data>stringdata</Data> </Root>`生产：[nothing] 和这个数据：`<Root> <Data>NOTstringdata</Data> </Root>`生产：当它没有内容时，`<Empty>NOTstringdata</Empty>`我希望不被生产。`<Empty>`

我相信这可以实现您想要的：

```
<xsl:template match="/Root">
  <xsl:choose>
      <xsl:when test="not(Data='')">
        <!-- Data is not null, now we look to see what sort of Data is there-->
        <xsl:choose>
            <xsl:when test="Data = 'stringdata'">
                <!--nothing-->
            </xsl:when>
            <xsl:otherwise>
                <!--ie. have notstringdata-->
                <xsl:element name="Empty">
                    <xsl:value-of select="Data"/>
                </xsl:element>
            </xsl:otherwise>
        </xsl:choose>

      </xsl:when>
    <xsl:otherwise>
        <!--no Data, so no element created, or you could do something specific for this scenario-->
    </xsl:otherwise>
  </xsl:choose>
</xsl:template> 
```

不过，我必须说，考虑到您期望使用它的方式，使用名称“Empty”作为元素名称会使事情变得有点混乱。

# c# - 如何接受文件 POST

> ID：10320232
> 
> 赞同：267
> 
> 时间：2012-04-25T16:51:47.623
> 
> 标签：c#, asp.net-mvc-4

我正在使用 asp.net mvc 4 webapi beta 来构建一个休息服务。我需要能够接受来自客户端应用程序的 POST 图像/文件。这可以使用webapi吗？以下是我目前正在使用的操作。有谁知道这个应该如何工作的例子？

```
[HttpPost]
public string ProfileImagePost(HttpPostedFile profileImage)
{
    string[] extensions = { ".jpg", ".jpeg", ".gif", ".bmp", ".png" };
    if (!extensions.Any(x => x.Equals(Path.GetExtension(profileImage.FileName.ToLower()), StringComparison.OrdinalIgnoreCase)))
    {
        throw new HttpResponseException("Invalid file type.", HttpStatusCode.BadRequest);
    }

    // Other code goes here

    return "/path/to/image.png";
} 
```

* * *

## 回答 #1

> 赞同：398
> 
> 时间：2013-11-02T21:01:16.070

我很惊讶你们中的很多人似乎都想在服务器上保存文件。将所有内容保存在内存中的解决方案如下：

```
[HttpPost("api/upload")]
public async Task<IHttpActionResult> Upload()
{
    if (!Request.Content.IsMimeMultipartContent())
        throw new HttpResponseException(HttpStatusCode.UnsupportedMediaType); 

    var provider = new MultipartMemoryStreamProvider();
    await Request.Content.ReadAsMultipartAsync(provider);
    foreach (var file in provider.Contents)
    {
        var filename = file.Headers.ContentDisposition.FileName.Trim('\"');
        var buffer = await file.ReadAsByteArrayAsync();
        //Do whatever you want with filename and its binary data.
    }

    return Ok();
} 
```

* * *

## 回答 #2

> 赞同：177
> 
> 时间：2012-04-26T05:39:03.210

请参阅[http://www.asp.net/web-api/overview/formats-and-model-binding/html-forms-and-multipart-mime#multipartmime](https://web.archive.org/web/20120510173913/http://www.asp.net/web-api/overview/formats-and-model-binding/html-forms-and-multipart-mime#multipartmime)，虽然我认为这篇文章使它看起来比确实如此。

基本上，

```
public Task<HttpResponseMessage> PostFile() 
{ 
    HttpRequestMessage request = this.Request; 
    if (!request.Content.IsMimeMultipartContent()) 
    { 
        throw new HttpResponseException(HttpStatusCode.UnsupportedMediaType); 
    } 

    string root = System.Web.HttpContext.Current.Server.MapPath("~/App_Data/uploads"); 
    var provider = new MultipartFormDataStreamProvider(root); 

    var task = request.Content.ReadAsMultipartAsync(provider). 
        ContinueWith<HttpResponseMessage>(o => 
    { 

        string file1 = provider.BodyPartFileNames.First().Value;
        // this is the file name on the server where the file was saved 

        return new HttpResponseMessage() 
        { 
            Content = new StringContent("File uploaded.") 
        }; 
    } 
    ); 
    return task; 
} 
```

* * *

## 回答 #3

> 赞同：118
> 
> 时间：2013-12-03T16:33:26.143

请参阅下面的代码，改编自[本文](http://www.c-sharpcorner.com/UploadFile/2b481f/uploading-a-file-in-Asp-Net-web-api/)，它演示了我能找到的最简单的示例代码。它包括文件和*内存*（更快）上传。

```
public HttpResponseMessage Post()
{
    var httpRequest = HttpContext.Current.Request;
    if (httpRequest.Files.Count < 1)
    {
        return Request.CreateResponse(HttpStatusCode.BadRequest);
    }

    foreach(string file in httpRequest.Files)
    {
        var postedFile = httpRequest.Files[file];
        var filePath = HttpContext.Current.Server.MapPath("~/" + postedFile.FileName);
        postedFile.SaveAs(filePath);
        // NOTE: To store in memory use postedFile.InputStream
    }

    return Request.CreateResponse(HttpStatusCode.Created);
} 
```

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2017-09-28T13:33:40.790

ASP.NET Core 方式现在[在这里](https://docs.microsoft.com/en-us/aspnet/core/mvc/models/file-uploads)：

```
[HttpPost("UploadFiles")]
public async Task<IActionResult> Post(List<IFormFile> files)
{
    long size = files.Sum(f => f.Length);

    // full path to file in temp location
    var filePath = Path.GetTempFileName();

    foreach (var formFile in files)
    {
        if (formFile.Length > 0)
        {
            using (var stream = new FileStream(filePath, FileMode.Create))
            {
                await formFile.CopyToAsync(stream);
            }
        }
    }

    // process uploaded files
    // Don't rely on or trust the FileName property without validation.

    return Ok(new { count = files.Count, size, filePath});
} 
```

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2014-12-31T19:34:22.883

这是一个快速而肮脏的解决方案，它从 HTTP 正文中获取上传的文件内容并将其写入文件。我为文件上传包含了一个“基本”HTML/JS 片段。

**网络 API 方法：**

```
[Route("api/myfileupload")]        
[HttpPost]
public string MyFileUpload()
{
    var request = HttpContext.Current.Request;
    var filePath = "C:\\temp\\" + request.Headers["filename"];
    using (var fs = new System.IO.FileStream(filePath, System.IO.FileMode.Create))
    {
        request.InputStream.CopyTo(fs);
    }
    return "uploaded";
} 
```

**HTML 文件上传：**

```
<form>
    <input type="file" id="myfile"/>  
    <input type="button" onclick="uploadFile();" value="Upload" />
</form>
<script type="text/javascript">
    function uploadFile() {        
        var xhr = new XMLHttpRequest();                 
        var file = document.getElementById('myfile').files[0];
        xhr.open("POST", "api/myfileupload");
        xhr.setRequestHeader("filename", file.name);
        xhr.send(file);
    }
</script> 
```

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2013-05-01T18:46:05.120

在我更新我的 webapi mvc4 项目中的所有 NuGet 之前，我使用了 Mike Wasson 的答案。完成后，我必须重新编写文件上传操作：

```
 public Task<HttpResponseMessage> Upload(int id)
    {
        HttpRequestMessage request = this.Request;
        if (!request.Content.IsMimeMultipartContent())
        {
            throw new HttpResponseException(new HttpResponseMessage(HttpStatusCode.UnsupportedMediaType));
        }

        string root = System.Web.HttpContext.Current.Server.MapPath("~/App_Data/uploads");
        var provider = new MultipartFormDataStreamProvider(root);

        var task = request.Content.ReadAsMultipartAsync(provider).
            ContinueWith<HttpResponseMessage>(o =>
            {
                FileInfo finfo = new FileInfo(provider.FileData.First().LocalFileName);

                string guid = Guid.NewGuid().ToString();

                File.Move(finfo.FullName, Path.Combine(root, guid + "_" + provider.FileData.First().Headers.ContentDisposition.FileName.Replace("\"", "")));

                return new HttpResponseMessage()
                {
                    Content = new StringContent("File uploaded.")
                };
            }
        );
        return task;
    } 
```

**显然 BodyPartFileNames 在 MultipartFormDataStreamProvider 中不再可用。**

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2013-07-17T21:10:45.667

朝着同样的方向，我发布了一个使用 WebApi，c# 4 发送 Excel 文件的客户端和服务器片段：

```
public static void SetFile(String serviceUrl, byte[] fileArray, String fileName)
{
    try
    {
        using (var client = new HttpClient())
        {
                client.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json"));
                using (var content = new MultipartFormDataContent())
                {
                    var fileContent = new ByteArrayContent(fileArray);//(System.IO.File.ReadAllBytes(fileName));
                    fileContent.Headers.ContentDisposition = new ContentDispositionHeaderValue("attachment")
                    {
                        FileName = fileName
                    };
                    content.Add(fileContent);
                    var result = client.PostAsync(serviceUrl, content).Result;
                }
        }
    }
    catch (Exception e)
    {
        //Log the exception
    }
} 
```

和服务器 webapi 控制器：

```
public Task<IEnumerable<string>> Post()
{
    if (Request.Content.IsMimeMultipartContent())
    {
        string fullPath = HttpContext.Current.Server.MapPath("~/uploads");
        MyMultipartFormDataStreamProvider streamProvider = new MyMultipartFormDataStreamProvider(fullPath);
        var task = Request.Content.ReadAsMultipartAsync(streamProvider).ContinueWith(t =>
        {
            if (t.IsFaulted || t.IsCanceled)
                    throw new HttpResponseException(HttpStatusCode.InternalServerError);

            var fileInfo = streamProvider.FileData.Select(i =>
            {
                var info = new FileInfo(i.LocalFileName);
                return "File uploaded as " + info.FullName + " (" + info.Length + ")";
            });
            return fileInfo;

        });
        return task;
    }
    else
    {
        throw new HttpResponseException(Request.CreateResponse(HttpStatusCode.NotAcceptable, "Invalid Request!"));
    }
} 
```

还有自定义 MyMultipartFormDataStreamProvider，需要自定义文件名：

PS：我从另一篇文章[http://www.codeguru.com/csharp/.net/uploading-files-asynchronously-using-asp.net-web-api中获取了这段代码.htm](http://www.codeguru.com/csharp/.net/uploading-files-asynchronously-using-asp.net-web-api.htm)

```
public class MyMultipartFormDataStreamProvider : MultipartFormDataStreamProvider
{
    public MyMultipartFormDataStreamProvider(string path)
        : base(path)
    {

    }

    public override string GetLocalFileName(System.Net.Http.Headers.HttpContentHeaders headers)
    {
        string fileName;
        if (!string.IsNullOrWhiteSpace(headers.ContentDisposition.FileName))
        {
            fileName = headers.ContentDisposition.FileName;
        }
        else
        {
            fileName = Guid.NewGuid().ToString() + ".data";
        }
        return fileName.Replace("\"", string.Empty);
    }
} 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2014-06-20T06:39:00.657

```
[HttpPost]
public JsonResult PostImage(HttpPostedFileBase file)
{
    try
    {
        if (file != null && file.ContentLength > 0 && file.ContentLength<=10485760)
        {
            var fileName = Path.GetFileName(file.FileName);                                        

            var path = Path.Combine(Server.MapPath("~/") + "HisloImages" + "\\", fileName);

            file.SaveAs(path);
            #region MyRegion
            ////save imag in Db
            //using (MemoryStream ms = new MemoryStream())
            //{
            //    file.InputStream.CopyTo(ms);
            //    byte[] array = ms.GetBuffer();
            //} 
            #endregion
            return Json(JsonResponseFactory.SuccessResponse("Status:0 ,Message: OK"), JsonRequestBehavior.AllowGet);
        }
        else
        {
            return Json(JsonResponseFactory.ErrorResponse("Status:1 , Message: Upload Again and File Size Should be Less Than 10MB"), JsonRequestBehavior.AllowGet);
        }
    }
    catch (Exception ex)
    {

        return Json(JsonResponseFactory.ErrorResponse(ex.Message), JsonRequestBehavior.AllowGet);

    }
} 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2017-10-02T15:25:27.613

这里有两种接受文件的方法。一种使用内存提供程序**MultipartMemoryStreamProvider**，另一种使用**MultipartFormDataStreamProvider**保存到磁盘。请注意，这仅适用于一次上传一个文件。您可以肯定地扩展它以保存多个文件。第二种方法可以支持大文件。我已经测试了超过 200MB 的文件，它工作正常。使用内存中的方法不需要你保存到磁盘，但是如果超过一定的限制就会抛出内存不足的异常。

```
private async Task<Stream> ReadStream()
{
    Stream stream = null;
    var provider = new MultipartMemoryStreamProvider();
    await Request.Content.ReadAsMultipartAsync(provider);
    foreach (var file in provider.Contents)
    {
        var buffer = await file.ReadAsByteArrayAsync();
        stream = new MemoryStream(buffer);
    }

    return stream;
}

private async Task<Stream> ReadLargeStream()
{
    Stream stream = null;
    string root = Path.GetTempPath();
    var provider = new MultipartFormDataStreamProvider(root);
    await Request.Content.ReadAsMultipartAsync(provider);
    foreach (var file in provider.FileData)
    {
        var path = file.LocalFileName;
        byte[] content = File.ReadAllBytes(path);
        File.Delete(path);
        stream = new MemoryStream(content);
    }

    return stream;
} 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2018-08-30T14:28:12.933

即使对于 .Net Core，这个问题也有很多很好的答案。我正在使用两个框架，提供的代码示例工作正常。所以我不会重复它。就我而言，重要的是如何使用**[Swagger](https://swagger.io/)**的文件上传操作，如下所示：

[![Swagger 中的文件上传按钮](../Images/c0f16f2d3f56749b5c500c01bbf8ce72.png)](https://i.stack.imgur.com/AVHJK.png)

这是我的回顾：

**ASP .Net WebAPI 2**

*   上传文件使用：**MultipartFormDataStreamProvider**在这里查看答案
*   如何[**与 Swagger 一起使用**](https://stackoverflow.com/questions/42435635/api-file-upload-using-http-content-not-exposed-in-swagger)

**.NET 核心**

*   要上传文件使用：**IFormFile**请参阅此处的答案或[MS 文档](https://docs.microsoft.com/en-us/aspnet/core/mvc/models/file-uploads?view=aspnetcore-2.1)
*   如何[**与 Swagger 一起使用**](http://www.talkingdotnet.com/how-to-upload-file-via-swagger-in-asp-net-core-web-api/)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-04-25T16:58:22.647

对于预览版 Web API，我遇到了类似的问题。尚未将该部分移植到新的 MVC 4 Web API，但这可能会有所帮助：

[使用 HttpRequestMessage 或 Stream 上传 REST 文件？](https://stackoverflow.com/questions/9290342/rest-file-upload-with-httprequestmessage-or-stream)

请让我知道，明天可以坐下来尝试再次实施。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2018-11-12T15:41:41.680

API控制器：

```
[HttpPost]
public HttpResponseMessage Post()
{
    var httpRequest = System.Web.HttpContext.Current.Request;

    if (System.Web.HttpContext.Current.Request.Files.Count < 1)
    {
        //TODO
    }
    else
    {

    try
    { 
        foreach (string file in httpRequest.Files)
        { 
            var postedFile = httpRequest.Files[file];
            BinaryReader binReader = new BinaryReader(postedFile.InputStream);
            byte[] byteArray = binReader.ReadBytes(postedFile.ContentLength);

        }

    }
    catch (System.Exception e)
    {
        //TODO
    }

    return Request.CreateResponse(HttpStatusCode.Created);
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-05-03T03:21:25.560

补充 Matt Frear 的回答 - 这将是一个 ASP NET Core 替代方案，用于直接从 Stream 读取文件，而不是从磁盘保存和读取它：

```
public ActionResult OnPostUpload(List<IFormFile> files)
    {
        try
        {
            var file = files.FirstOrDefault();
            var inputstream = file.OpenReadStream();

            XSSFWorkbook workbook = new XSSFWorkbook(stream);

            var FIRST_ROW_NUMBER = {{firstRowWithValue}};

            ISheet sheet = workbook.GetSheetAt(0);
            // Example: var firstCellRow = (int)sheet.GetRow(0).GetCell(0).NumericCellValue;

            for (int rowIdx = 2; rowIdx <= sheet.LastRowNum; rowIdx++)
               {
                  IRow currentRow = sheet.GetRow(rowIdx);

                  if (currentRow == null || currentRow.Cells == null || currentRow.Cells.Count() < FIRST_ROW_NUMBER) break;

                  var df = new DataFormatter();                

                  for (int cellNumber = {{firstCellWithValue}}; cellNumber < {{lastCellWithValue}}; cellNumber++)
                      {
                         //business logic & saving data to DB                        
                      }               
                }
        }
        catch(Exception ex)
        {
            throw new FileFormatException($"Error on file processing - {ex.Message}");
        }
    } 
```

# git - git log foo..bar -- 如何查看变更集的*合并日期*？

> ID：10320234
> 
> 赞同：13
> 
> 时间：2012-04-25T16:51:58.593
> 
> 标签：git

是否可以让“git log”给出*变更集登陆分支*的日期而不是创建变更集的日期？'git log --graph'（下面的截断输出示例）给了我很多我想要的东西，但它仍然打印各个变更集的创建日期，而不是它们合并到这个分支的日期。

```
*   commit 7e8d68fc58b915cc17bca41be833c4f7a062cd3c
|\  Merge: 1b4f10d af0dcdd
| | Date:   Wed Apr 25 17:40:16 2012 +0100
| |     Merge branch 'foo'
| * commit af0dcdd078197a852fcfad11c5111aa11579aa05
| | Date:   Wed Apr 25 17:36:50 2012 +0100
| |     t2: adding lorem ipsum again
| * commit 569f5de0eb40cbf198771812f9b099cf71b5b056
| | Date:   Wed Apr 25 17:36:36 2012 +0100
| |     t1: adding lorem ipsum
* | commit 1b4f10d3eea7c9c6304f7b1fd41818b932e4dad0
| | Date:   Wed Apr 25 17:38:24 2012 +0100
| |     t4: fi fo fa fum x 2
* | commit d25fa0359fbe655b6a4adeb6225ac283b3543ece
|/  Date:   Wed Apr 25 17:38:10 2012 +0100
|       t3: fi fo fa fum
* commit d3239b3e327f740fc7194ecf164538361f715ab5
  Date:   Wed Apr 25 17:34:50 2012 +0100 
```

上面的输出来自`master`分支。t1 和 t2 在`foo`分支上创建；t3 & t4 创建于`bar`. 然后`bar`被合并到`master`，然后被合并`foo`到master。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-25T17:07:45.363

您可以看到部分答案：当分支`foo`合并到`master`时，它创建了一个具有两个父级的新提交 (7e8d68)。

但是当`bar`被合并到时`master`，它是一个*快进*合并。也就是说，所有的提交`bar`都比最新的工作更新`master`，所以它们可以被添加到最后。

这使得布局更简单，因此它是默认行为。但它没有留下合并记录——就您的历史而言，看起来这些提交是`master`首先完成的。

为了解决这个问题，可以明确地告诉 git 避免快进合并：也就是说，即使快进合并是可能的，每次合并都应该导致两个父级的合并提交。为此，只需使用命令`--no-ff`上的标志。`git merge`

不幸的是，因为这是*合并*行为而不是*日志记录*行为的变化，所以您将无法追溯 - 来自先前快进合并的信息不存在，因此无法`git log`显示它。

# android - 从数据库调用自定义对话框？

> ID：10320237
> 
> 赞同：0
> 
> 时间：2012-04-25T16:52:11.833
> 
> 标签：android, database, dialog

从这个问题开始：

[用于调用数据的理想数据库字段](https://stackoverflow.com/questions/10253748/ideal-database-field-for-calling-data-to)

我已经意识到，我可以通过使用对话框或自定义对话框来简化将信息带到屏幕上的需求，并且通过其中一种方法，我可以从数据库中调用整个完成的页面，而不是使用静态字符串进入布局，用我目前的数据填充特定字段。
在我的应用程序中可能需要调用几百个项目或数据片段所以我对这个假设是否正确，或者我是否需要特定的其他方法来实现这一点？

要么使页面完整，包括图像等所有数据，要么我是否坚持我最初的计划，即拥有一个模板屏幕，其中已经存在不变的字段，并根据需要从 Sqlite 数据库填充不断变化的信息？希望这是有道理的对不起，如果我最初的问题太模糊了，我还在学习。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T16:41:20.927

你的问题很模糊，但我会冒险回答：

如果您想制作一个类似于您在上一个问题上发布的图像的对话框，那么这就是这样做的方法：

1.  创建一个自定义对话框，其内容为 a `LinearLayout`（其中 3`TextViews`代表图像中的标题标签：和`COMPONENT`，这将与下面的列表行布局有些相同）+ a将显示实际数据。`TYPE``AMOUNT``ListView`

2.  `ListView`为您的行创建一个布局文件以供使用（如`LinearLayout`上面将包含 3`TextViews`用于饮料名称、类型编号和数量编号）。

3.  当需要显示对话框时，只需从数据库中获取所有饮料名称、类型和数量，并将其绑定到`ListView`基于 a 的适配器之一`Cursor`（如 a `SimpleCursorAdapter`）

`TextViews`不建议从数据库中获取值并将它们绑定到多个（如果您有很多（我看到了`few hundred items or pieces of data`）），您的对话框也可能在短时间内被用户调用很多次并且您不希望每次为许多视图执行此绑定。

> 要么使页面完整，包括图像等所有数据

请不要这样做！

# jakarta-ee - JDK、J2EE 和 J2SE 代号之间的区别

> ID：10320239
> 
> 赞同：10
> 
> 时间：2012-04-25T16:52:13.140
> 
> 标签：jakarta-ee, java

我在这里看到了相同的主题，在其他站点上也看到了一些主题，但我仍然很困惑，Sun 是如何命名这些版本的。

这是我对这些代号的了解。请检查并为我更正：

**JDK：**全称**Java Development Kit**，可以称为Java中最基本的，用于开发客户端应用程序（如桌面应用程序（使用Swing，awt，...）或Applet，...）

**J2EE：**代表**Java Enterprise Edition**，用于在服务器端开发应用程序（如Servlet、EJB、...）

**J2SE：**我还不知道这个！

当我在一些著名的论坛/网站上阅读时（`stackoverflow`,`byte`等`javabranch`...）。我的问题有一些不同的答案。（或者我理解错了，因为我的英语不好）。

这是我搜索的一些答案：

JDK 就像 J2SEE ！！！哦，我不太相信这个。当我在 Eclipse 上配置 Glassfish 服务器时，Eclipse 警告这个版本以后需要 j2se 1.4（但我有 JDK 7 或 jdk 1.7 ！！！）

[correlation-between-jee-j2ee-to-j2se-jdk-versions](https://stackoverflow.com/questions/2013958/correlation-between-jee-j2ee-to-j2se-jdk-versions)我不理解短语`will be built`（标有正确答案的帖子）。

例如：

> J2EE 1.4 是 Java 平台 1.4 版的企业版，因此​​将构建在 J2SE 1.4 之上。

所以，这意味着 J2EE 是 J2SE 的“测试版”？？！！请为我解释。

我尝试学习EJB，那么我需要安装哪个版本？

谢谢 ：）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-25T17:03:43.570

J2SE 是一个旧名称。现在他的名字是 Java SE。

Java SE 是 java 的基础。使用 Java SE，您可以构建 Java 应用程序，如 Swing、Applet 等。

Java EE 是企业应用程序的规范。当您需要开发一个应用程序并在 JBoss、Glassfish、Websphere 和其他容器下运行它时，您就是在谈论 Java EE。

你应该阅读这篇关于 java ee 的文章：[http ://en.wikipedia.org/wiki/Java_Platform,_Enterprise_Edition](http://en.wikipedia.org/wiki/Java_Platform,_Enterprise_Edition)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T09:01:08.157

Java SE 是通用名称，其中包含两个不同的组件。JDK 和 JRE。如上所述，Java EE 是企业版，其中包含更多组件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T17:12:55.860

说到JDK，你可能会想到开发，说到JRE，你可能会想到可用性。

J2SE 和 J2EE 分别是基本 java 应用程序和 web 企业 java 应用程序的 API

# eclipse - 为什么在使用 http Javadoc 位置时 Eclipse 的 Javadoc 会出现故障？

> ID：10320243
> 
> 赞同：0
> 
> 时间：2012-04-25T16:52:27.607
> 
> 标签：eclipse, javadoc, guice

当我转到项目属性库选项卡并使用填充有的“Javadoc 位置路径”字段指定在线 javadoc 的路径时`http://google-guice.googlecode.com/svn/trunk/javadoc`，我在悬停或 javadoc 视图中得到一个“裸”javadoc，显示一些正确的信息，如“从 API 3.0 开始”。但它缺少所有文本文档和公共方法列表。

奇怪的是，如果我单击“在浏览器中打开附加的 Javadoc”，则会显示所有正确的信息。这是一个 Eclipse 错误吗？Guice Javadoc 格式化错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T14:51:18.627

[可能是对“如何将 Java API 文档添加到 Eclipse？”](https://stackoverflow.com/questions/4600172/how-do-i-add-the-java-api-documentation-to-eclipse)这个问题的第一个答案。也会回答你的问题。如果链接停止工作，相关报价是：

> Eclipse 不会从 javadoc 位置提取工具提示。如果您 [选择] '在浏览器中打开'，它只会使用 javadoc 位置添加到链接。您需要下载并附上源 [...] 以获取工具提示。

我没有找到上述声明的来源，尽管它似乎也适用于我的安装。

# wpf - 使用 XAML MarkupExtension 管理友好的枚举

> ID：10320245
> 
> 赞同：2
> 
> 时间：2012-04-25T16:52:36.657
> 
> 标签：wpf, xaml, binding

我从这个开始： [按位标志枚举](http://dotnet-journey.blogspot.it/2010/09/c-bitwise-flag-enum.html) 和这个： [访问枚举成员](http://agsmith.wordpress.com/2008/09/19/accessing-enum-members-in-xaml/)

这是我的代码

```
[Flags]
public enum DeliveryDays
{
    [Description("None")]
    NONE = 0, // 0000000

    [Description("monday")]
    MON = 1,  // 0000001

    [Description("tuersady")]
    TUE = 2,  // 0000010

    [Description("wedsnay")]
    WED = 4,  // 0000100

    [Description("thursday")]
    THU = 8,  // 0001000

    [Description("friday")]
    FRI = 16, // 0010000

    [Description("saturday")]
    SAT = 32, // 0100000

    [Description("sunday")]
    SUN = 64, // 1000000

    WORKDAYS = MON | TUE | WED | THU | FRI,  //0011111
    WEEKENDS = SAT | SUN  //1100000
} 

public class Finder 
{
    public DeliveryDays AvailableDays = DeliveryDays.WEEKENDS;

    public DeliveryDays SelectedDays { get; set; }

    public Finder()
    {
        SelectedDays = DeliveryDays.NONE;
    }    
} 
```

这是 XAML

```
<ComboBox Height="50"
          ItemsSource="{Binding Source={my:Enumeration {x:Type my:DeliveryDays}}}"
          DisplayMemberPath="Description"
          SelectedValue="{Binding SelectedDays}"
          SelectedValuePath="Value" /> 
```

现在组合框向我显示所有枚举`DeliveryDays`类型，但我只想要`AvailableDays`实例成员字段中的枚举值。所以我需要修改自定义`MarkupExtension`以仅在我的`AvailableDays`字段中显示枚举值。如何从我的自定义`EnumListExtension`方法访问此字段？如果在 XAML 中不可能，你有什么解决方法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T18:19:18.120

我不知道纯 XAML 解决方案，但这有效：

我在`UriKind`枚举上测试了它（为了速度）。我认为仅查看整个解决方案会更容易。

这是 XAML

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:sys="clr-namespace:System;assembly=mscorlib"
        xmlns:sysSys="clr-namespace:System;assembly=System"
        xmlns:cm="clr-namespace:System.ComponentModel;assembly=WindowsBase"
        Title="MainWindow"
        Height="350"
        Width="525">
    <Window.Resources>
        <ObjectDataProvider x:Key="UriKindProvider"
                            ObjectType="{x:Type sys:Enum}"
                            MethodName="GetValues">
            <ObjectDataProvider.MethodParameters>
                <x:Type Type="sysSys:UriKind" />
            </ObjectDataProvider.MethodParameters>
        </ObjectDataProvider>
        <CollectionViewSource x:Key="EnumCollection"
                              Source="{StaticResource UriKindProvider}"
                              Filter="CollectionViewSource_Filter"/>
    </Window.Resources>
    <Grid>
        <ComboBox HorizontalAlignment="Center"
                  VerticalAlignment="Center"
                  ItemsSource="{Binding Source={StaticResource EnumCollection}}" />
    </Grid>
</Window> 
```

这是代码隐藏

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace WpfApplication1
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        private void CollectionViewSource_Filter(object sender, FilterEventArgs e)
        {
            var valueToCompare = (UriKind)e.Item;
            e.Accepted = IsInAvailableDays(valueToCompare);
        }

        private bool IsInAvailableDays(UriKind value)
        {
            //this is for testing only, replace with actual logic to compare to AvailableDays
            if (value.ToString().Contains("Abs"))
            {
                return true;
            }
            return false;
        }
    }
} 
```

当你运行它时，你会看到一个只有值“RelativeOrAbsolute”和“Absolute”的组合（“Relative”被过滤掉了）。

# php - UNION SELECT MySQL 查询，做数学运算并在 PHP 中显示

> ID：10320247
> 
> 赞同：4
> 
> 时间：2012-04-25T16:52:43.273
> 
> 标签：php, mysql, select, union

我有 3 张桌子。寻找一种`PRICE`使用三个不同表格查找字段差异的好方法，然后显示前 3 个最大的负差异。我想首先找到要使用的最佳 MySQL 查询，并找到在 php.ini 中显示它的最佳方式。

可维护：

```
COMPANY       | MODEL    | PRICE
Main Company  | ProductA | 100.00
Main Company  | ProductB | 50.00
Main Company  | ProductC | 25.00
Main Company  | ProductD | 300.00 
```

兼容1：

```
COMPANY     | MODEL    | PRICE
Competitor1 | ProductA | 100.00 //0
Competitor1 | ProductB | 55.00 //5
Competitor1 | ProductC | 50.00 //25
Competitor1 | ProductD | 200.00 //-100 
```

兼容2：

```
COMPANY     | MODEL    | PRICE
Competitor2 | ProductA | 99.00 //-1
Competitor2 | ProductB | 44.00 //-6
Competitor2 | ProductC | 20.00 //-5
Competitor2 | ProductD | 100.00 //-200 
```

**因此，我希望在我的页面中显示的 PRICE 的最大负面差异是：**

1.  竞争对手 2 ProductD 与主要公司 ProductD 的差异 -200
2.  竞争对手 1 ProductD 与主要公司 ProductD 的差异 -100
3.  竞争对手 2 产品 B -6 与主要公司产品 B 的差异

**IDEA：**我对它不是很熟悉，但我可以`UNION SELECT`在三张桌子上使用 .. `WHERE MODEL=XXX`。我可能会遍历每个收集数据、进行数学运算并吐出信息的人。唯一的问题是，我不知道如何将每个变量存储为每个表的自己的价格。另外，我认为它会显示所有差异，除非有办法在进行数学运算后存储每个变量，然后显示前 3 个差异。

任何可以最好地解决此查询的想法或建议将不胜感激。（注意：不，我不能把它们都放在一张桌子上=p）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T17:05:41.120

在 PHP 方面无能为力，但此查询应该可以满足您的需求。您必须进行联合才能获得所有合格的结果。这将有所有可用的列并预先计算好，以便您以任何您需要的方式放入一个简单的网格列表中。由于计算是竞争对手与主要公司，通过自然排序的价格差异将首先具有最大的负数，然后变为正数。因此，订购后将应用 LIMIT 命令，只发回 3 条记录。

```
select 
      MT.Model,
      MT.Company as MainCompany,
      MT.Price as MainPrice,
      CT1.Company as Competitor,
      CT1.Price as CompPrice,
      CT1.Price - MT.Price as PriceDifference
   from
      MainTable MT
         JOIN CompTable1 CT1
            on MT.Model = CT1.Model
UNION
select 
      MT.Model,
      MT.Company as MainCompany,
      MT.Price as MainPrice,
      CT2.Company as Competitor,
      CT2.Price as CompPrice,
      CT2.Price - MT.Price as PriceDifference
   from
      MainTable MT
         JOIN CompTable2 CT2
            on MT.Model = CT2.Model
order by
   PriceDifference
limit 3 
```

**建议...从长远来看，您的表格结构方式确实很糟糕。您应该尝试标准化您的数据以获得更佳的性能。如果你有 100 个竞争对手会发生什么。你到处都有重复。还要更改型号名称。这是我将如何重组表...不是显式的数据类型，而是在概念上**

```
COMPANY 
   CompanyID     auto-increment
   CompanyName   character

PRODUCT
   ProductID     auto-increment
   ProductModel  character

VendorPricing
   VPriceID      auto-increment
   CompanyID     (ID pointing to company table -- to get name when needed)
   ProductID     (ID pointing to product table -- to get model name too)
   Price         actual price for this particular company and product 
```

然后，使用适当的索引，如果您想从一个供应商到另一个供应商的定价，以及任何型号，您的查询将来可能更容易扩展......就像

```
select 
      VP1.CompanyID,
      C1.CompanyName as MainCompany,
      C2.CompanyName as Competitor,
      P1.ProductModel,
      VP1.Price as MainPrice,
      VP2.Price as CompetitorPrice,
      VP2.Price - VP1.Price as PriceDifference
   from
      VendorPricing VP1

         JOIN Company C1
            on VP1.CompanyID = C1.CompanyID

         JOIN Product P1
            on VP1.ProductID = P1.ProductID

         JOIN VendorPricing VP2
            on VP1.ProductID = VP2.ProductID
           AND NOT VP1.CompanyID = VP2.CompanyID

           JOIN Company C2
              on VP2.CompanyID = C2.CompanyID

   where
      VP1.CompanyID = TheOneCompanyYouAreInterestedIn
   order by
      PriceDifference
   limit 3 
```

所以现在，如果您有 2、5、10 或 100 个竞争对手，那么查询是完全相同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T17:10:37.550

```
SELECT CASE WHEN C1.Price<C2.Price THEN C1.COMPANY ELSE C2.COMPANY END AS company, 
       M.Model, 
       CASE WHEN C1.Price<C2.Price THEN C1.Price-M.Price ELSE C2.Price-M.Price END AS diff
FROM MAINTABLE M, COMPTABLE1 C1, COMPTABLE2 C2
WHERE M.Model=C1.Model AND M.Model=C2.Model
ORDER BY diff ASC
LIMIT 3 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T17:23:41.707

```
select mt1.company, tt1.company, mt1.price, tt1.price, (mt1.price - tt1.price) as delta
from mt1
    -- treats tables as single table and allows you flexibility to add more later
    left join (
    select company, model, price from t1
    union
    select company, model, price from t2
    ) tt1 on tt1.model = mt1.model
order by  (mt1.price - tt1.price) 
limit 3 -- actually should be parameter to sproc 
```

您需要考虑空值和缺失值。你没有指定任何东西，所以我也没有处理它们。

之前有人提到mysql在计算时性能不佳。这类事情正是数据库的设计目的。mysql 的性能不佳与它不“智能”以及自动创建优化计划（如 sql server、postgres 或 oracle）有关。您可以在此处进行优化的一件事是确保价格列是数字列，并且模型列在每个表中都有索引。

题外话——但是当你听说 google 使用 mysql 时——他们有 dba 专家团队来优化他们的系统。使用 sql server express（免费）或 postgres（开源）可能会更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T16:58:36.373

在 mysql 中进行大量计算是个坏主意。在我们的项目中，我们很难优化游戏中的 mysql 部分。最好的决定是在 php 代码中然后在 mysql 中计算硬数学。因此，在您的位置上，我想在 php 中对其进行编码，并将 mysql 仅用于简单查询和一些连接。

# c - pelles c的奇怪输出

> ID：10320264
> 
> 赞同：0
> 
> 时间：2012-04-25T16:53:32.967
> 
> 标签：c, pelles-c

```
float f=44268/107402;
printf("\n%f",f); 
```

输出 ：

> 0.000000

怎么会这样！

我在win 7上使用pelles c ide。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T16:55:13.710

编译器将操作数视为整数。尝试：

```
float f = 44268.0 / 107402;
                ^ 
```

或许

```
float f = (float)44268 / 107402; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T16:59:15.257

`Integer division truncates`

```
float f=44268.0/107402; 
```

使一个数字浮动将自动提升另一个数字 ti 浮动以及最终以浮点结果结束。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T16:57:43.760

```
float f = 44268 / 107402; 
```

该变量将使用整数值初始化。你应该添加一个浮点数，告诉编译器你想要一个浮点值。

```
float f = 44268\. / 107402.; 
```

# android - Google Play 上的三星 Galaxy Player 4.0 权限过滤器

> ID：10320269
> 
> 赞同：0
> 
> 时间：2012-04-25T16:53:46.867
> 
> 标签：android, permissions, google-play, samsung-mobile

我的应用程序没有出现在 Google Play（前 Android 市场）的三星 Galaxy Player 4.0 上。

如果我通过 Play 网页界面登录，我会收到错误消息：“此应用与您的 Samsung YP-G1 不兼容。Samsung YP-G1 此项目与您的设备不兼容。”。使用相同的设备进行开发，在其上运行应用程序没有问题。应用程序使用了最少的权限集，到目前为止，我在 Google Play 上进行过滤没有任何问题。我能够在三星 Galaxy Player 5.0 上安装应用程序，而 Google Play 没有任何问题，所以希望它与三星无关。

有人知道要寻找什么吗？Player 4.0 可以成为我的应用程序的优秀设备，因为它可以在没有电话合约的情况下仅在 Wi-Fi 上运行。

这是AndroidManifest中与权限相关的部分：

```
<uses-permission android:name="android.permission.CAMERA"/>
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.VIBRATE" />

<uses-feature android:name="android.hardware.camera" android:required="false"/>
<uses-feature android:name="android.hardware.vibrate" android:required="false"/>

<uses-sdk android:minSdkVersion="7" android:targetSdkVersion="7" /> 
```

$ aapt dump 徽章的输出

```
uses-permission:'android.permission.CAMERA'
uses-permission:'android.permission.INTERNET'
uses-permission:'android.permission.WRITE_EXTERNAL_STORAGE'
uses-permission:'android.permission.ACCESS_NETWORK_STATE'
uses-permission:'android.permission.VIBRATE'
uses-feature-not-required:'android.hardware.camera'
uses-feature-not-required:'android.hardware.vibrate'
sdkVersion:'7'
targetSdkVersion:'7'
...
uses-feature:'android.hardware.touchscreen'
uses-feature:'android.hardware.screen.landscape'
main
other-activities
supports-screens: 'small' 'normal' 'large'
supports-any-density: 'true'
locales: '--_--'
densities: '120' '160' '240' '320' 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-19T06:01:41.840

在清单页面中删除相机权限。然后上传到谷歌播放，然后检查它是否可以工作并会在谷歌播放中显示。

# android - 使用 for 循环动态更改 TextView

> ID：10320274
> 
> 赞同：0
> 
> 时间：2012-04-25T16:54:11.123
> 
> 标签：android

我正在尝试更改几个 TextView 元素的值，但遍历数组列表并添加这些值。但是，我似乎找不到更改每次使用的 R.id 值的方法。例如：

```
for (int i=0; i<arrayList.size(); i++)
{
    TextView t = (TextView) dialog.findViewById(R.id.value+(i));
    t.setText(arrayList.get(i));
} 
```

值的格式为animals_eng1，animals_eng2等。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T17:01:02.640

最好的办法是创建一个数组，其中包含每个文本视图的资源 ID 并循环遍历它们。

前任。

```
int[] textViewIds = new int[] { R.id.animals_eng1, R.id.animals_eng2, R.id.animals_eng3 }; 
```

然后在您的活动中，您可以遍历它们并设置您想要的值

```
for (int i=0; i<arrayList.size(); i++)
{
   ((TextView)findViewById(textViewIds[i])).setText(arrayList.get(i));
} 
```

您必须确保您的 arrayList 大小与您设置的 textview 资源 ID 的数量相同，否则您将在循环时出现越界异常

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T16:59:23.530

我不知道一种方法可以完全按照您的要求进行操作，但这里有两种选择：

1.创建一个Integers数组，并将数组的每个元素分配给不同的view id值

```
int[] ids = new int[arrayList.size()];
ids[0] = R.id.view0;
ids[1] = R.id.view1;
ids[2] = R.id.view2;
//...ids[n] = R.id.viewN; where n goes up to arrayList.size()
for (int i : ids){
     ((TextView)dialog.findViewById(ids[i])).setText(arrayList.get(i));
} 
```

请注意，上面的方法有点失败，因为`TextView`如果你想要更动态的东西，你必须为 each 设置一行：

2.`TextViews`在布局 xml 中添加标签`android:tag="prefix0"`，例如，添加到您的每个`TextViews`. 在循环之前找到布局的父视图，然后`findViewWithTag`在循环中使用该视图的方法`for`。从您的代码中，我猜您正在使用`Dialog`带有自定义布局 xml 的 a，因此您首先要找到它的父级：

```
ViewGroup parent = dialog.findViewById(R.id.parent); //or whatever the name of your parent LinearLayout/RelativeLayout/whatever is
String commonPrefix = "prefix"; //or whatever you've tagged your views with
for (int i=0; i<arrayList.size(); i++){ 
    TextView t = (TextView) parent.findViewWithTag(commonPrefix+i);
    t.setText(arrayList.get(i)); 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T16:59:59.097

解决此问题的一种方法是将您的资源 id 放在一个 int 数组中并在索引 i 处获取资源。

```
TextView t = (TextView) dialog.findViewById(R.id.value+(i)) 
```

变成

```
TextView t = (TextView) dialog.findViewById(resourceArray[i]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T17:20:55.623

如果您的所有视图都在同一个容器上（并且只有它们），则只需迭代其子级。

如果没有，您可以添加一个 id 数组（在 res 中）并对其进行迭代。

# mysql - 时间约束查询

> ID：10320278
> 
> 赞同：1
> 
> 时间：2012-04-25T16:54:23.097
> 
> 标签：mysql, sql

我有下表：

编号 | 房间| 课程ID | 天(NUM) | 开始（时间） | 时间结束）

这是我坚持的大查询的一部分。如何在特定日期显示特定房间的课程之间没有时间休息的所有 id？有点卡在这里。我想我必须使用'ADDTIME（）'函数来找出有0的课程1结束时间和课程2开始时间=>的差异。我已经看了很长时间了，我被卡住了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T17:13:33.353

如果您感兴趣的只是充分利用。如果一天是 7 小时（9-5 - 1 小时的午休时间），请称其为 420 分钟以使事情变得容易。然后 420 - Sum(MINUTE(TIMEDIFF(t2,t1)) = 0 表示房间已订满。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T17:21:01.110

也许玩弄 CTE 可以帮助你。尝试从这样的事情开始

```
WITH RU_CTE AS (
    SELECT your_fields
      FROM RoomUtilization
     WHERE day = @DayParameter
       AND start = @startTimeParameter
     UNION ALL
    SELECT your_fields
      FROM RoomUtilization RU
     WHERE day = RU_CTE.day
       AND start = RU_CTE.end
)
SELECT *
  FROM RU_CTE 
```

看看一些twiches是否满足您的需求

但正如 eggyal 所说，获取当天和房间的数据并在应用程序代码上解决这个问题可能更容易。

# ruby-on-rails - Rails 3\. 为什么 Rails 在我的编辑表单中删除小数点？

> ID：10320280
> 
> 赞同：0
> 
> 时间：2012-04-25T16:54:30.990
> 
> 标签：ruby-on-rails, ruby

我将语言环境更改为西班牙语（es），现在当我转到编辑表单并且它包含诸如 100.00 之类的数量时，它删除了零并将数量转换为 10000。为什么要这样做，我该如何解决？

我认为这与 time.es.yml 文件有关...

```
es:
  date:
    abbr_day_names:
    - dom
    - lun
    - mar
    - mié
    - jue
    - vie
    - sáb
    abbr_month_names:
    - 
    - ene
    - feb
    - mar
    - abr
    - may
    - jun
    - jul
    - ago
    - sep
    - oct
    - nov
    - dic
    day_names:
    - domingo
    - lunes
    - martes
    - miércoles
    - jueves
    - viernes
    - sábado
    formats:
      default: ! '%d/%m/%Y'
      long: ! '%d de %B de %Y'
      short: ! '%d de %b'
    month_names:
    - 
    - enero
    - febrero
    - marzo
    - abril
    - mayo
    - junio
    - julio
    - agosto
    - septiembre
    - octubre
    - noviembre
    - diciembre
    order:
    - :day
    - :month
    - :year
  datetime:
    distance_in_words:
      about_x_hours:
        one: alrededor de 1 hora
        other: alrededor de %{count} horas
      about_x_months:
        one: alrededor de 1 mes
        other: alrededor de %{count} meses
      about_x_years:
        one: alrededor de 1 año
        other: alrededor de %{count} años
      almost_x_years:
        one: casi 1 año
        other: casi %{count} años
      half_a_minute: medio minuto
      less_than_x_minutes:
        one: menos de 1 minuto
        other: menos de %{count} minutos
      less_than_x_seconds:
        one: menos de 1 segundo
        other: menos de %{count} segundos
      over_x_years:
        one: más de 1 año
        other: más de %{count} años
      x_days:
        one: 1 día
        other: ! '%{count} días'
      x_minutes:
        one: 1 minuto
        other: ! '%{count} minutos'
      x_months:
        one: 1 mes
        other: ! '%{count} meses'
      x_seconds:
        one: 1 segundo
        other: ! '%{count} segundos'
    prompts:
      day: Día
      hour: Hora
      minute: Minutos
      month: Mes
      second: Segundos
      year: Año
  errors: &errors
    format: ! '%{attribute} %{message}'
    messages:
      accepted: debe ser aceptado
      blank: no puede estar en blanco
      confirmation: no coincide con la confirmación
      empty: no puede estar vacío
      equal_to: debe ser igual a %{count}
      even: debe ser par
      exclusion: está reservado
      greater_than: debe ser mayor que %{count}
      greater_than_or_equal_to: debe ser mayor que o igual a %{count}
      inclusion: no está incluido en la lista
      invalid: no es válido
      less_than: debe ser menor que %{count}
      less_than_or_equal_to: debe ser menor que o igual a %{count}
      not_a_number: no es un número
      not_an_integer: debe ser un entero
      odd: debe ser impar
      record_invalid: ! 'La validación falló: %{errors}'
      taken: ya está en uso
      too_long: es demasiado largo (%{count} caracteres máximo)
      too_short: es demasiado corto (%{count} caracteres mínimo)
      wrong_length: no tiene la longitud correcta (%{count} caracteres exactos)
    template:
      body: ! 'Se encontraron problemas con los siguientes campos:'
      header:
        one: No se pudo guardar este/a %{model} porque se encontró 1 error
        other: No se pudo guardar este/a %{model} porque se encontraron %{count} errores
  helpers:
    select:
      prompt: Por favor seleccione
    submit:
      create: Crear %{model}
      submit: Guardar %{model}
      update: Actualizar %{model}
  number:
    currency:
      format:
        precision: 2
    human:
      decimal_units:
        format: ! '%n %u'
        units:
          billion: mil millones
          million: millón
          quadrillion: mil billones
          thousand: mil
          trillion: billón
          unit: ''
  support:
    array:
      last_word_connector: ! ', y '
      two_words_connector: ! ' y '
      words_connector: ! ', '
  time:
    am: am
    formats:
      default: ! '%A, %d de %B de %Y %H:%M:%S %z'
      long: ! '%d de %B de %Y %H:%M'
      short: ! '%d de %b %H:%M'
    pm: pm
  # remove these aliases after 'activemodel' and 'activerecord' namespaces are removed from Rails repository
  activemodel:
    errors:
      <<: *errors
  activerecord:
    errors:
      <<: *errors 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T17:02:25.590

在墨西哥，小数点分隔符是“.”。所以你应该没事。但是在西班牙，小数点分隔符是“，”（至少根据维基百科——如果我正在阅读您正确发布的那个文件，它似乎是“”）。大概您设置为西班牙语言环境而不是墨西哥西班牙语语言环境，并且 Rails 正在剥离 . 假设它是千位分隔符，则从您的数字中得出。

你能以某种方式将语言环境设置为墨西哥西班牙语吗？如果不能，或者您肯定想要西班牙语言环境，则必须编辑语言环境文件以修改十进制格式以匹配英语格式。

编辑：从头开始。尽管 Wikipedia 对小数分隔符有什么说法，[但此页面](http://publib.boulder.ibm.com/infocenter/wf/v2r7m0/index.jsp?topic=/com.ibm.help.wf.doc/locale_spec/i_xfdl_r_formats_es_MX.html)表示 es-MX 语言环境使用“，”作为小数分隔符。

我不认为编辑您的语言环境文件是一个好主意，但如果您确定这是您想要的，您应该能够从工作的英语语言环境文件中复制并粘贴相关部分。

# c++ - 强制转换是可覆盖的操作吗？如果是这样，如何？

> ID：10320282
> 
> 赞同：4
> 
> 时间：2012-04-25T16:54:34.750
> 
> 标签：c++, casting, overriding

是否可以在 C++ 中覆盖（C 风格）强制转换？

假设我有代码

```
double x = 42;
int k = (int)x; 
```

我可以让第二行中的演员执行我写的一些代码吗？就像是

```
// I don't know C++
// I have no idea if this has more syntax errors than words
operator (int)(double) {
    std::cout << "casting from double to int" << std::endl;
} 
```

^(我问的原因是因为[“有什么方法可以让 gcc 或 clang 对显式强制转换发出警告吗？”](https://stackoverflow.com/questions/10318646/is-there-any-way-to-get-gcc-or-clang-to-warn-on-explicit-casts) 和我的建议。)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T17:01:19.407

> § 12.3.1/1 “类对象的类型转换可以由构造函数和转换函数指定。这些转换称为用户定义的转换，用于隐式类型转换（第 4 条）、初始化（8.5）和显式类型转换（5.4、5.2.9）。”

是的，我们可以进行转换，但前提是一侧或两侧都是用户定义的类型，所以我们不能为`double`to进行转换`int`。

```
struct demostruct {
    demostruct(int x) :data(x) {} //used for conversions from int to demostruct
    operator int() {return data;} //used for conversions from demostruct to int
    int data;
};

int main(int argc, char** argv) {
    demostruct ds = argc; //conversion from int to demostruct
    return ds; //conversion from demostruct to int
} 
```

正如 Robᵩ 指出的那样，您可以将`explicit`关键字添加到任何一个转换函数中，这需要用户在代码中使用 a`(demostruct)argc`或`(int)ds`like 显式转换它们，而不是让它们隐式转换。如果您在同一类型之间进行转换，通常最好使用一个或两个 as `explicit`，否则可能会出现编译错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-25T17:00:02.993

是的，但仅适用于您自己的类型。看这个：

```
#include <iostream>
struct D {
  // "explicit" keyword requires C++11
  explicit operator int() { std::cout << __FUNCTION__ << "\n"; }
};

int main () {
  int i;
  D d;
  //i = d;
  i = (int)d;
} 
```

所以，你不能创造`double::operator int()`，但你可以创造`MyDouble::operator int()`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-25T16:59:22.077

您不能为内置类型重载运算符，但可以为用户定义类型编写转换运算符：

```
struct Double {
    double value;
    operator int() const {
        shenanigans();
        return value;
    }
}; 
```

由于您的问题源于需要在代码中找到显式转换，因此还要注意 C++ 具有显式转换运算符。这些不仅比 C 风格的演员表更清晰，而且非常易于搜索：

```
static_cast<T>(x)      // Cast based on static type conversion.
dynamic_cast<T>(x)     // Cast based on runtime type information.
const_cast<T>(x)       // Add or remove const or volatile qualification.
reinterpret_cast<T>(x) // Cast between unrelated pointer and integral types. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-25T16:58:13.007

转换为其他类型是 C++ 中的可重载运算符（[这里有一些示例](http://publib.boulder.ibm.com/infocenter/comphelp/v8v101/index.jsp?topic=/com.ibm.xlcpp8a.doc/language/ref/cplr383.htm)），但这个事实对您没有帮助。

Stroustrup[希望](http://www2.research.att.com/~bs/whitespace98.pdf)语言是可扩展的，但不是可变的。因此，重载运算符只会将操作扩展到新类型，但您无法重新定义任何旧类型会发生什么。

“*但是，为了避免荒谬，（仍然）不允许为内置类型的内置运算符提供新的含义。因此，该语言保持可扩展但不可变。* ”

# php - php - 如何为 curl 启用 php://input 流包装器

> ID：10320283
> 
> 赞同：0
> 
> 时间：2012-04-25T16:54:40.320
> 
> 标签：php, libcurl

我试图做以下事情

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL,"php://input" );
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1 );
$result=curl_exec ($ch);
echo curl_error($ch);
echo $result; 
```

使用 curl 获取原始帖子数据，因为我的托管 com 禁用了除 curl 之外的所有套接字功能，因此我无法执行 file_get_contents("php://input");

我收到一个错误

> libcurl1 中不支持或禁用协议 php

我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T16:58:51.850

您可以使用[`$HTTP_RAW_POST_DATA`](http://www.php.net/manual/reserved.variables.httprawpostdata.php)代替“php://input”。[有关详细信息，请参阅http://php.net/manual/wrappers.php.php](http://php.net/manual/wrappers.php.php)的 php://input 部分

其他解决方案：[当 file_get_contents 和 always_populate_raw_post_data 被禁用时，php://input 和 $HTTP_RAW_POST_DATA 的替代方案是什么](https://stackoverflow.com/questions/9907896/what-are-the-alternatives-for-php-input-and-http-raw-post-data-when-file-get/10320453#10320453)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T17:02:50.973

您不需要套接字功能来访问`php://input`，它是通过标准访问的`fopen`，如果您的托管公司阻止，`fopen` 那么您应该考虑更改提供程序而不是代码。

# camera - PlayN 相机和输入支持

> ID：10320286
> 
> 赞同：0
> 
> 时间：2012-04-25T16:54:50.797
> 
> 标签：camera, playn

我们不想为 ios、android 和 html5 实现游戏。

我们非常感谢 playN 项目。但我们不确定 playN 是否涵盖了我们的功能。特别是以下内容：

*   文本输入（用户名和简短声明）
*   通过相机捕获二维码（读取和处理二维码）

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T04:51:25.610

目前，通过[TriplePlay](https://github.com/threerings/tripleplay)进行文本输入的大部分工作实现，但尚不支持相机。

# amazon-ec2 - Amazon EC2 集群设置

> ID：10320290
> 
> 赞同：0
> 
> 时间：2012-04-25T16:55:01.850
> 
> 标签：amazon-ec2, hdfs

我正在开发一个 HDFS 高可用性项目。

我在一个 Amazon EC2 实例上配置了 Hadoop。它是小型实例（AMI：Ubuntu 服务器）

我想形成一个 EC2 实例集群。所以，我正在考虑复制同一台机器。有没有人知道如何在另一个 EC2 实例上复制这个实例。如果是，请分享。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T18:10:07.700

如果您的实例是 EBS 支持的，您可以制作快照，然后从中运行任意数量的实例。

# asp-classic - 从数组中删除一条记录

> ID：10320293
> 
> 赞同：0
> 
> 时间：2012-04-25T16:55:20.030
> 
> 标签：asp-classic, vbscript

我需要从数组中删除记录

基本上我正在为我的数组分配一个 RecordSet（一个部门表）。我想从这个数组中删除一个部门记录。我怎样才能做到这一点。

我是 VB 脚本的新手，如果您能给我代码如何操作，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T17:06:04.277

VBScript 不支持对数组进行推送和弹出操作。你有三个选择：

1.  在构建新数组时迭代数组，跳过要删除的值。
2.  使用 Scripting.Dictionary 对象而不是数组。它支持添加/删除操作。
3.  使用实用程序类可以更轻松地处理数组。 [这篇文章](http://www.4guysfromrolla.com/webtech/032800-1.shtml)有一个很好的例子。(http://www.4guysfromrolla.com/webtech/032800-1.shtml)

# ruby - 在 Ruby 中绘制点和矩形

> ID：10320297
> 
> 赞同：7
> 
> 时间：2012-04-25T16:55:26.173
> 
> 标签：ruby, svg, plot

我正在寻找一种简单的方法来绘制大约 10 个点和矩形，以便能够查看我的算法出错的地方。我看了一下 gnuplot，但绘制矩形似乎特别糟糕。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-25T17:21:48.997

SVG ( [MDN Tutorial](https://developer.mozilla.org/en/SVG/Tutorial) ) 是一种非常简单的基于文本 (XML) 的格式，您可以使用 Ruby 轻松发出它，而无需任何 SVG 库并在任何现代 Web 浏览器中查看。这是一个例子：

## 通过字符串插值的 SVG 点

```
points = (0..5).map{ [rand(100)-50,rand(100)-50] }

puts <<ENDSVG
<svg xmlns="http://www.w3.org/2000/svg" viewBox="-100 -100 200 200">
#{points.map{ |x,y| "<circle cx='#{x}' cy='#{y}' r='3' />" }.join("\n")}
</svg>
ENDSVG 
```

### 输出：http: [//jsfiddle.net/xwnVY/](http://jsfiddle.net/xwnVY/)

* * *

如果你想比字符串插值更有条理：

## 使用 Nokogiri XML Builder 的 SVG 点

```
require 'nokogiri' # gem install nokogiri
b = Nokogiri::XML::Builder.new do |doc|
  doc.svg xmlns:"http://www.w3.org/2000/svg", viewBox:"-100 -100 200 200" do
    points.each do |x,y|
      doc.circle r:3, cx:x, cy:y
    end
  end
end
puts b.to_xml 
```

将输出另存为“foo.svg”并在现代网络浏览器中打开以查看。

* * *

## 绘制矩形

要绘制矩形，您可以使用以下任何一种：

```
<rect transform="rotate(45)" x="0" y="0" width="100" height="200" />
<polygon points="0,0 100,0 100,100 0,100" />
<path d="M0,0 L100,0 100,100 0,100 Z" /> 
```

如果您想连接未轴对齐的任意点而不担心变换，则多边形可能是最容易生成的。请注意，虽然为了清楚起见，我以格式显示了上面的坐标，但如果您的代码更容易生成这些坐标`x,y x,y`，SVG 也将接受`x,y,x,y`or 。`x y x y`

* * *

## 一点格式化

如果你想绘制轮廓而不是填充形状，你可以在你的 SVG 中添加这个 CSS：

```
<style>
  rect, polygon, path { fill:none; stroke:black; stroke-width:1px }
</style> 
```

* * *

## 将 Haml 用于 XML

最后，Haml 是您可以考虑在没有 SVG 特定库的情况下制作 XML 的另一种选择：

```
@points = (0..7).map{ [rand(100)-50,rand(100)-50] }

require 'haml'
puts Haml::Engine.new(<<ENDHAML).render(self)
%svg(xmlns="http://www.w3.org/2000/svg" viewBox="-100 -100 200 200")
  :css
    circle { fill:orange }
    rect, polygon, path {
      fill:none; stroke:black;
      vector-effect:non-scaling-stroke
    }
  - @points.each_slice(4) do |rect|
    %polygon{ points:rect.join(" ") }
  - @points.each do |x,y|
    %circle{r:3, cx:x, cy:y}
ENDHAML 
```

### 输出：http: [//jsfiddle.net/xwnVY/4/](http://jsfiddle.net/xwnVY/4/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-25T16:58:33.950

也许你可以试试 SVG。易于创建（纯 XML）、开放、跨平台，您可以使用 Inkscape 等打开和编辑。

*   [http://www.w3schools.com/svg/default.asp](http://www.w3schools.com/svg/default.asp)
*   [https://developer.mozilla.org/en/SVG/Tutorial](https://developer.mozilla.org/en/SVG/Tutorial)
*   [http://www.svgbasics.com/](http://www.svgbasics.com/)
*   [http://www.carto.net/svg/samples/](http://www.carto.net/svg/samples/)

# apache - Apache+SVN 设置 - 在某些 SVN 请求上接收禁止但不是全部

> ID：10320302
> 
> 赞同：0
> 
> 时间：2012-04-25T16:55:33.370
> 
> 标签：apache, svn, configuration

第三方提供了运行 Apache 和 SVN 的服务器。但是，我正在设置 repo 并访问它。

**有什么作用**

我可以在浏览器中访问存储库。我的问题似乎在于使用版本或在终端中运行 SVN 命令。

使用 svn+ssh 从主干或分支中检出，并提交到这些位置。

**什么不起作用**

使用复制命令创建分支：

```
svn cp ^/trunk ^/branches/test -m'creating test branch'
svn: Repository moved permanently to 'http://svn.server/repo/'; please relocate 
```

访问存储库的根目录

```
svn ls  http://svn.server/repo
svn: Repository moved permanently to 'http://svn.server/repo/'; please relocate 
```

我认为 svn 错误是一个红鲱鱼。对于每个失败的请求，我都会在访问日志中看到以下内容：

```
60.60.60.60 - - [25/Apr/2012:09:15:24 -0700] "OPTIONS /Repo HTTP/1.1" 401 478
60.60.60.60 - TravisKs [25/Apr/2012:09:15:24 -0700] "OPTIONS /Repo HTTP/1.1" 301 315 
```

查看我的浏览器对根目录的请求的访问日志（成功）

```
60.60.60.60 - - [25/Apr/2012:09:47:31 -0700] "GET / HTTP/1.1" 200 936 
```

因此，我的配置/安全性似乎存在错误，但无法找到它。

我的虚拟主机配置

```
NameVirtualHost *:80

<VirtualHost *:80>
    DocumentRoot /var/www/svn/
    ServerName svn.server
    ServerAlias svn.server

        <Directory "/var/www/svn" >
                Options Indexes FollowSymLinks
                AllowOverride All
                Allow from all
                Order allow,deny
        </Directory>

    ErrorLog /var/log/svn.server.com-error_log
    CustomLog /var/log/svn.server.com-access_log common

</VirtualHost> 
```

我的 SVN 配置

```
<location "/repo">
  DAV svn
  SVNPath /var/www/svn/repo

  AuthType Basic
  AuthName "Subversion Repository"
  AuthUserFile /var/www/svn/repo/conf/passwd
  Require valid-user
</location> 
```

**编辑**

确认目录的文件权限

```
/var/www
[TravisKs@server ~]$ ls -la /var/www/svn
total 10032
drwxr-xr-x. 3 root   root       4096 Apr 23 16:46 .
drwxr-xr-x. 7 root   root       4096 Feb 13 14:33 ..
drwxr-xr-x. 7 apache apache     4096 Apr 20 17:19 repo
[TravisKs@server ~]$ ls -la /var/www/svn/repo/
total 1180
drwxr-xr-x. 7 apache apache    4096 Apr 20 17:19 .
drwxr-xr-x. 3 root   root      4096 Apr 23 16:46 ..
drwxr-xr-x. 2 apache apache    4096 Apr 20 15:44 conf
drwxr-xr-x. 3 apache apache    4096 Apr 20 17:19 dav 
drwxr-sr-x. 6 apache apache    4096 Apr 24 19:10 db
-r--r--r--. 1 apache apache       2 Apr 20 14:18 format
drwxr-xr-x. 2 apache apache    4096 Apr 20 14:18 hooks
-rw-r--r--. 1 apache apache 1167874 Apr 20 14:34 import_log.txt
drwxr-xr-x. 2 apache apache    4096 Apr 20 14:18 locks
-rw-r--r--. 1 apache apache     229 Apr 20 14:18 README.txt 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T20:48:29.113

所以这个问题似乎源于 VirtualHost 和 SVN 之间的冲突。我重新配置了我的 httpd.conf 文件，删除了虚拟主机并只保留了 location 指令：

```
<location "/svn">
  DAV svn
  SVNParentPath /var/www/svn
  SVNListParentPath on

  AuthType Basic
  AuthName "Subversion Repository"
  AuthUserFile /var/www/svn/repo/conf/passwd
  Require valid-user
</location> 
```

下一步将在适当的位置创建和使用身份验证文件。此时，我们可以通过浏览器浏览整个 SVN 存储库，并在控制台命令和版本客户端中正常运行。

# python - 'Request' 对象没有属性 'get' Python 错误

> ID：10320307
> 
> 赞同：16
> 
> 时间：2012-04-25T16:55:52.560
> 
> 标签：python, query-string, flask

我正在尝试在 Python 中获取 url 参数。

我正在使用这段代码：

```
from flask import request, url_for, redirect
# ...
controller = request.get('controller') 
```

但我收到此错误：

```
'Request' object has no attribute 'get' 
```

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-25T17:17:36.740

您想[`request.args`](http://flask.pocoo.org/docs/api/?highlight=args#flask.Request)在 Flask 中使用 GET 参数。[这是快速入门](http://flask.pocoo.org/docs/quickstart/#accessing-request-data)文档的访问请求数据部分的示例引用。

* * *

要访问在 URL (?key=value) 中提交的参数，您可以使用 args 属性：

```
searchword = request.args.get('key', '') 
```

# xcode - Xcode 中的 SDL 错误

> ID：10320308
> 
> 赞同：1
> 
> 时间：2012-04-25T16:55:58.180
> 
> 标签：xcode, macos, sdl

我试图使用 SDL 框架来加载 opengl 纹理的 jpg，但是当我尝试构建时，我收到了这条消息：

```
 ld: warning: in /Developer/SDKs/MacOSX10.5.sdk/Library/Frameworks//SDL.framework/SDL, missing required architecture ppc in file 
```

我该怎么做才能使 SDL 在 i386 中工作？必须下载源代码然后制作文件，还是i386已经有一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T19:25:11.100

警告消息表明您机器上的 SDL 框架版本仅适用于 Intel，但您正在构建通用（Intel 和 PowerPC）SDL 应用程序。SDL 1.2.15 的主要 Mac 版本放弃了对 PowerPC 的支持。最简单的解决方案是访问 SDL 站点并下载支持 PowerPC 和 Mac OS X 10.4 的 SDL 库版本。

另一种解决方案是修改项目中的架构构建设置，并告诉 Xcode 仅为英特尔构建。

# java - 当比较器降序排序时，这是如何实现升序排序的？

> ID：10320310
> 
> 赞同：0
> 
> 时间：2012-04-25T16:56:03.023
> 
> 标签：java, comparator

当比较器降序排序时，这是如何实现升序排序的？

```
// Sorts the emails alphabetically by subject in ascending order.
public void sortBySubjectAscending()
{
Collections.sort(emails, Collections.reverseOrder(new Email.SubjectDescendingComparator()));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T17:03:52.410

是的，它确实。如果你反转一个降序比较器，你会得到一个升序比较器。

分解它，这就是你正在做的事情：

```
Comparator ascending = Collections.reverseOrder(new Email.SubjectDescendingComparator());
Collections.sort(emails, ascending); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T17:02:45.933

冒着成为“那个 StackOverflow 家伙”的风险...... :)

来自[http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#reverseOrder%28%29](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#reverseOrder%28%29)

> 公共静态比较器 reverseOrder()
> 
> 返回一个比较器，它对实现 Comparable 接口的对象集合施加与自然排序相反的 >。（自然排序是对象自己的 compareTo 方法强加的排序。）这实现了一个简单的习惯用法，用于以反向自然顺序实现 Comparable 接口的对象的集合（或数组）排序（或维护）。

考虑如何自己实现它是很有教育意义的，compareTo 返回一个 int，你需要做的就是反转结果......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T17:03:27.640

是的，这是一个很好的解决方案

就个人而言，我会让比较器成为静态成员，因此您无需在每次想要排序时都重新初始化它，并且电子邮件也可以提供升序比较器

```
public class Email{

    private static class SubjectDescendingComparator implements Comparable<Email>{
        //...
    }

    private static final Comparable<Email> subjectDescendingComparator =new SubjectDescendingComparator();
    private static final Comparable<Email> subjectAcendingComparator = Collections.reverseOrder(subjectDescendingComparator);

    public static Comparable<Email> getDecendingSubjectComparator{
        return subjectDescendingComparator;
    }

    public static Comparable<Email> getAcendingSubjectComparator{
        return subjectAcendingComparator;
    }

} 
```

# php - 从 2 个日期之间的差异中获取日期对象，取决于时区

> ID：10320311
> 
> 赞同：1
> 
> 时间：2012-04-25T16:56:27.147
> 
> 标签：php

我有一个使用时区 UTC 存储在数据库中的日期，该日期比现在提前几天/几小时/几分钟。然后我需要计算现在和给定日期之间的时间差，记住可能有不同的时区在起作用。

我一直在做以下事情，但这是错误的，因为没有考虑时区。

```
$interval = date_create('now')->diff(date_create($listing_end_date));
//$interval->d = days
//$interval->h = hours
//$interval->i = minutes 
```

如何在考虑时区的情况下执行上述操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T17:01:37.333

您需要传递第二个参数来`date_create`告诉它哪个时区由`$listing_end_date`. 例如，假设字符串是 UTC：

```
$interval = date_create('now')->diff(date_create($listing_end_date, 
                                                 new DateTimeZone('UTC'))); 
```

# c# - 是否可以在 windows 窗体内显示 xaml 视图

> ID：10320312
> 
> 赞同：1
> 
> 时间：2012-04-25T16:56:29.317
> 
> 标签：c#, wpf

我有一个 Windows 窗体，它调用在我的应用程序中工作的其他窗体。我想要完成的是摆脱这整个“窗口形式”的事情，而是使用 WPF 视图（用户控件）。有没有办法可以调用视图从我的表单中显示它？

```
ElementHost host = new ElementHost();
            Cars.WPF.Views.DescriptionView descView = new Cars.WPF.Views.DescriptionView();
            host.Controls.Add(descView);
            host.Dock = DockStyle.Fill; 
```

我收到错误：--> 参数 1：无法从 'Car.WPF.Views.DescriptionView' 转换为 'System.Windows.Forms.Control'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T17:13:02.333

在你的winform中添加一个面板（让我们说panel1）在类级别定义ElementHost，还在类级别定义WPF控件

```
ElementHost host;
Cars.WPF.Views.DescriptionView descView; 
```

在表单加载事件中：

```
host= new ElementHost();
panel1.Controls.Add(ctrlHost); //Add Element host to panel1
descView = new Cars.WPF.Views.DescriptionView();
descView.InitializeComponent();
host.Child = descView; //Instead of adding WPF control to Winform do this 
```

同样在您的项目参考中添加：

```
PresentationCore
PresentationFramework
WindowsBase 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T16:57:54.953

是的，使用元素主机。

[http://www.switchonthecode.com/tutorials/wpf-tutorial-using-wpf-in-winforms](http://www.switchonthecode.com/tutorials/wpf-tutorial-using-wpf-in-winforms)

[http://msdn.microsoft.com/en-us/library/system.windows.forms.integration.elementhost.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.integration.elementhost.aspx)

# javascript - 根据 rel 值选择所有 html 元素

> ID：10320313
> 
> 赞同：5
> 
> 时间：2012-04-25T16:56:30.320
> 
> 标签：javascript, jquery

我的代码中有一些像这样的html元素

```
<div rel="test1">item1</div>
<div rel="test1">item2</div>
<div rel="test1">item3</div>
<div rel="test2">item4</div>
<div rel="test2">item5</div> 
```

我需要一种方法来选择所有使用的 div`rel="test1"`并向它们添加一个类我该怎么做`jQuery`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T16:57:53.407

```
$('div[rel=\'test1\']') 
```

[http://api.jquery.com/category/selectors/attribute-selectors/](http://api.jquery.com/category/selectors/attribute-selectors/)

然后，您可以使用`.addClass()`. [http://api.jquery.com/addClass/](http://api.jquery.com/addClass/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-25T17:00:49.340

```
​$('div[rel="test1"]')​.addClass("myClass");​ 
```

[**演示**](http://jsfiddle.net/mHHMk/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T16:58:20.373

```
$('div[rel="test1"]').addClass('fooClass'); 
```

[**现场演示**](http://jsfiddle.net/rcEzG/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-25T16:59:53.487

```
$(function(){
    $("div[rel='test1']").addClass("newClass");       
}); 
```

工作样本[http://jsfiddle.net/4WEBk/13/](http://jsfiddle.net/4WEBk/13/)

# android - 如何销毁 PhoneStateListener 类的对象？

> ID：10320318
> 
> 赞同：5
> 
> 时间：2012-04-25T16:57:03.627
> 
> 标签：android, listener, state, destroy

在某些情况下，我不想听我的手机状态。如何销毁 PhoneStateListener 类的对象？

我以这种方式创建对象

```
 try {
     phoneCallListener = new WnetPlayerPhoneCallListener();
     TelephonyManager mTM = (TelephonyManager) this.getSystemService(Context.TELEPHONY_SERVICE);
     mTM.listen(phoneCallListener, PhoneStateListener.LISTEN_CALL_STATE);
 } catch(Exception e) {
     Log.e("PhoneCallListener", "Exception: "+e.toString()); 
 } 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-25T17:04:06.017

在[文档](http://developer.android.com/reference/android/telephony/TelephonyManager.html#listen%28android.telephony.PhoneStateListener,%20int%29)中，它声明传递侦听器对象并标记[LISTEN_NONE](http://developer.android.com/reference/android/telephony/PhoneStateListener.html#LISTEN_NONE)以取消注册侦听器。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-25T17:03:58.010

根据[这个答案](https://stackoverflow.com/a/6995651/321697)`TelephonyManager`，您应该保留对and的引用`WnetPlayerPhoneCallListener`，并将其设置为禁用，如下所示：

```
mTm.listen(phoneCallListener, PhoneStateListener.LISTEN_NONE); 
```

为什么他们不只是有标准`addListener()`和`removeListener()`方法，我不知道，但这似乎是解决您的问题的公认方法。

# ruby-on-rails - Facebook Javascript SDK 和 OmniAuth

> ID：10320320
> 
> 赞同：1
> 
> 时间：2012-04-25T16:57:09.917
> 
> 标签：ruby-on-rails, facebook

我已成功地将 OmniAuth Facebook 登录流程集成到服务器端的 rails 应用程序中。但是，我也试图在客户端使用 Facebook Javascript SDK 让它工作，并且遇到了一些问题。

编辑：这个问题似乎只发生在 Chrome 中，而不是在 Safari 或 Firefox 中

**会话控制器**- 这适用于服务器端流程

```
def create

      auth = request.env['omniauth.auth']
      #if an authorization does not exisit, it will create a new authorization record. it will also create a new user record if a user is not currently logged in
      unless @auth = Authorization.find_from_hash(auth)
        # Create a new user or add an auth to existing user, depending on
        # whether there is already a user signed in.
        @auth = Authorization.create_from_hash(auth, current_user)

        #add the friends array to user record. as of now only doing this on the initial user create
        @friends = []
        FbGraph::User.me(@auth.user.authorization.facebook_token).fetch.friends.each do |t|
          @friends << t.identifier
        end
        u = @auth.user
        u.facebook_friends = @friends
        u.save

      end

      #store a new auth token if needed (if the new token in the hash does not match the one stored in the database for authorization)
      Authorization.check_if_new_auth_token_is_needed(auth)

      # Log the authorizing user in.
      self.current_user = @auth.user

      redirect_to root_url

  end 
```

如果我只是点击 /auth/facebook 路径，用户将登录

路线

```
match '/auth/:provider/callback', :to => 'sessions#create' 
```

现在在主页视图上，我正在尝试运行客户端流登录

**主页视图**

```
<script>
$(function() {
  $('a').click(function(e) {
    e.preventDefault();
    FB.login(function(response) {
      if (response.authResponse) {
        $('#connect').html('Connected! Hitting OmniAuth callback (GET /auth/facebook/callback)...');
        // since we have cookies enabled, this request will allow omniauth to parse
        // out the auth code from the signed request in the fbsr_XXX cookie
        $.getJSON('/auth/facebook/callback', function(json) {
          $('#connect').html('Connected! Callback complete.');
          $('#results').html(JSON.stringify(json));
        });
      }
    }, { scope: 'email,publish_stream' }); 
  });
});
</script>
<p id="connect">
          <a href="#">Connect to FB</a>
        </p>

        <p id="results" /> 
```

我的日志中出现以下错误

> {"error":{"message":"缺少授权码","type":"OAuthException","code":1}}

基本上，Omniauth 并没有收到来自 FB.login 操作的 facebook 签名请求（正如[https://github.com/mkdynamic/omniauth-facebook/blob/master/example/config.ru](https://github.com/mkdynamic/omniauth-facebook/blob/master/example/config.ru)所说的那样）。

**关于如何让它正常工作或我可能做错了什么的任何想法？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-27T22:41:59.273

我意识到这个问题已经有一年了，但我现在已经两次遇到这个问题，所以希望这对某人有所帮助。

有两个与此问题相关的 github 线程： [https](https://github.com/mkdynamic/omniauth-facebook/issues/73) ://github.com/mkdynamic/omniauth-facebook/issues/73 和 [https://github.com/intridea/omniauth-oauth2/issues/31](https://github.com/intridea/omniauth-oauth2/issues/31)

问题的根源是omniauth-oauth2 gem 中的callback_phase 方法：

```
if !options.provider_ignores_state && (request.params['state'].to_s.empty? || request.params['state'] != session.delete('omniauth.state'))
   raise CallbackError.new(nil, :csrf_detected)
end 
```

request.params['state'] 和 session['omniauth.state'] 都为 nil，因此条件失败并引发 CallbackError 异常。

一种解决方案是将 provider_ignores_state 设置为 true 以规避该条件：

```
config.omniauth :facebook, ENV['FACEBOOK_APP_ID'], ENV['FACEBOOK_APP_SECRET'], {
  strategy_class: OmniAuth::Strategies::Facebook,
  provider_ignores_state: true,
} 
```

正如在上面的线程中所指出的，它不是一个永久的解决方案，因为它可能会让你容易受到 csrf 攻击。

需要注意的另一件事是 Chrome 在将 cookie 写入 localhost 时存在问题。尝试使用 lvh.me 作为您的域（解析为 127.0.0.1）。

修复问题的更多代码通常不是一条好路，但如果这些解决方案都不起作用，那么您始终可以创建自己的处理程序并解析 Facebook cookie：

```
def handle_facebook_connect
    @provider = 'facebook'
    @oauth = Koala::Facebook::OAuth.new(ENV["FACEBOOK_ID"], ENV["FACEBOOK_SECRET"])
    auth = @oauth.get_user_info_from_cookies(cookies)

    # Get an extended access token
    new_auth = @oauth.exchange_access_token_info(auth['access_token'])
    auth['access_token'] = new_auth["access_token"]

    # Use the auth object to setup or recover your user. The following is
    # and example of how you might handle the response
    if authentication = Authentication.where(:uid => auth['user_id'], :provider => @provider).first
      user = authentication.user
      sign_in(user, :event => :authentication)
    end

    # Redirect or respond with json 
    respond_to do |format|
      format.html { redirect_to user }
      format.json { render json: user } 
    end
end 
```

然后，当您收到连接的响应时，您需要重定向到“handle_facebook_connect”方法：

```
FB.Event.subscribe('auth.authResponseChange', function(response) {
  if(response.status === 'connected'){
    if(response.authResponse){

      // Redirect to our new handler
      window.location = '/handle_facebook_connect';

      // Or make an ajax request as in the code in the original question:
      // $.getJSON('/handle_facebook_connect', function(json) {
      //   $('#connect').html('Connected! Callback complete.');
      //   $('#results').html(JSON.stringify(json));
      // });

    }
  } else if (response.status === 'not_authorized'){
    Facebook.message(Facebook.authorize_message);
  } else {
    FB.login();
  }
 }); 
```

# java - JList 列出对象的 ArrayList 的 toString()

> ID：10320325
> 
> 赞同：2
> 
> 时间：2012-04-25T16:57:26.843
> 
> 标签：java, swing, user-interface, arraylist, jlist

我有一个对象的 ArrayList（一个名为 OrderItem 的类）。OrderItem 中有一个 toString() 方法。

我还有一个 GUI 类，其中有一个 JList。我想列出arrayLists 元素的所有toString()。

我知道对于字符串的arrayList，您可以使用以下方法使它们显示在 JList 中：

```
ArrayList<String> myArrayList  = new ArrayList<String>();
myArrayList.add("Value1");
myArrayList.add("Value2");
myJList = new JList(myArrayList.toArray()); 
```

但我想列出对象 arrayList 的 toString() 方法，例如：

```
ArrayList<OrderItem> myArrayList  = new ArrayList<OrderItem>();
myJList = new JList(myArrayList.toString()); 
```

我意识到 JList 有可能不支持这样的功能，或者存在某种逻辑问题。如果是这样，你能告诉我为什么吗？因为肯定字符串的arrayList 应该以与对象arrayList 的toString() 类似的方式工作。我只想为元素提取一个字符串值并将这些值用于我的列表。

我在网上搜索了答案，但找不到对我有帮助的答案，所以我来到这里试图解决这个问题。

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T17:01:26.810

默认情况下，`JList`显示`toString`对象的值。因此，无需将您的对象转换为字符串。

`JList`如果需要，您可以通过创建自定义单元格渲染器来覆盖该行为。有关更多详细信息，请参阅[如何使用列表](http://docs.oracle.com/javase/tutorial/uiswing/components/list.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T17:01:14.463

您可以将列表转换为数组，然后将其放入列表中。

```
ArrayList<OrderItem> myArrayList  = new ArrayList<OrderItem>();
OrderItem[] items = new OrderItem[myArrayList.size()];
myArrayList.toArray(items);
myJList = new JList(items); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-24T08:22:07.943

实际上，toArray() 方法显示了 arrayList 中的每个项目。JList 默认不显示任何内容。您必须根据需要设置可见性。

听起来您正试图在列表中简单地显示对象的 toString 方法，而不是完整的对象；换句话说，您只想显示字符串表示。而不是数组表示。

您可以重写数组以表示您要显示的数据（在构建数组时提供“toString 构造）：

```
ArrayList<> myNewArrayList =  new ArrayList<OrderItem>();
for (int i=0; i< oldArray.size(); i++)
{    
    newArray.add(oldArray.get)i).toString(); 
}
    ...  rest of code  ... 
```

然后使用面板中的新数组，并使用索引作为对象数组的引用进行对象处理。

HTH 法学学士

# nhibernate - 急切获取引用时重复（多对一）

> ID：10320328
> 
> 赞同：6
> 
> 时间：2012-04-25T16:57:35.477
> 
> 标签：nhibernate, fluent-nhibernate, nhibernate-mapping, hql, fluent-nhibernate-mapping

首先，是的，我正在使用 DistinctRootEntityResultTransformer。

我有以下（Fluent NHibernate）映射：

```
public FirstObjectMap() 
{
    Id(x => x.Id):
    HasMany<SecondObject>(x => x.SecondItems).KeyColumn("FirstObject_ID");
}

public SecondObjectMap()
{
    Id(x => x.Id).Column("ID");
    References(x => x.ThirdObject).Column("ThirdObject_ID");
}

public ThirdObjectMap()
{
    Id(x => x.Id).Column("ID");
    HasMany<D>(x => x.FourthItems).KeyColumn("ThirdObject_ID");
}

public FourthObjectMap()
{
    Id(x => x.Id).Column("ID");
} 
```

请注意，SecondObject 指的是 ThirdObject（意味着密钥在 SecondObject 上）。

我的查询如下所示：

```
var query = session.CreateQuery("select distinct first from " + 
   "FirstObject as first " +
   "left join fetch first.SecondItems as second " +
   "left join fetch second.ThirdObject as third " + 
   "left join fetch third.FourthItems as four where ...");

// This is not even needed as I'm using distinct in HQL
query.SetResultTransformer(new DistinctRootEntityResultTransformer());

var results = query.List<ReinsurableObject>(); 
```

为了测试，我在数据库中有 1 个 FirstObject、1 个 SecondObject、1 个 ThirdObject 和 24 个 FourthObject。SQL 查询按预期返回 24 行。

然而，这里有一个问题：NHibernate 创建：

```
1 FirstObject
  24 SecondObject (should be 1)
     24 x 1 ThirdObject (should be 1)
         24 x 1 x 24 FourthObject (should be 24) 
```

因此，无论出于何种原因，NH 都会创建 24 个 SecondObject 而不是 1。

我猜它不知道如何将“join fetch”（左或内似乎无关紧要）映射到 Reference（对 SecondObject 中的 ThirdObject 的引用）。

我有什么选择？我无法更改数据模型，但我确实需要全部加载。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T17:05:05.413

仅当您加载父项和子项时，不同的根实体才有效。对于孙子和曾孙来说，这是行不通的。问题是您正在加载多个集合关联并返回一个大`cartesian product`

请阅读[Ayende 的这篇文章，](http://ayende.com/blog/4367/eagerly-loading-entity-associations-efficiently-with-nhibernate)其中解释了为什么会出现这种情况以及解决方法。

> 一些可能不会立即显现出来的东西会导致笛卡尔积。[文档](http://www.nhforge.org/doc/nh/en/index.html#queryhql-joins)中指出了这一点，但我认为我们都可以同意，虽然这种行为可能有原因，但远非理想。

# c++ - 如何使用 OpenGL 在 2D 模式下渲染完美的线框矩形？

> ID：10320332
> 
> 赞同：16
> 
> 时间：2012-04-25T16:57:44.587
> 
> 标签：c++, opengl

**编辑：**只是让你知道：我还没有完美地解决这个问题，目前我正在使用 0.5px 偏移，它*似乎*工作，但正如其他人所说，这不是“正确”的解决方案。所以我正在寻找真正的交易，钻石退出规则解决方案根本不起作用。

我相信这可能是显卡中的一个错误，但如果是这样，那么任何专业程序员都应该有他们的防弹解决方案，对吧？

**编辑：**我现在买了一张新的 nvidia 卡（以前有 ATI 卡），我仍然遇到这个问题。我在很多很多游戏中也看到了同样的错误。所以我想不可能以干净的方式修复？

这是错误的图像：

![在此处输入图像描述](../Images/9ace9144322bc4fce8e4355af0697a12.png)

你如何克服这个问题？如果可能，最好使用非着色器解决方案。当我自己绘制 4 条单独的线而不是使用线框模式时，我尝试为第一条线设置偏移量，但效果不佳：如果矩形大小发生变化，它有时看起来是完美的矩形，但有时甚至比我修复之前更糟.

这就是我渲染四边形的方式：

```
glPolygonMode(GL_FRONT_AND_BACK, GL_LINE);
glBegin(GL_QUADS);
    glVertex2f(...);
    glVertex2f(...);
    glVertex2f(...);
    glVertex2f(...);
glEnd();
glPolygonMode(GL_FRONT_AND_BACK, GL_FILL); 
```

是的，我知道我可以使用顶点数组或 VBO，但这不是重点。

我也试过`GL_LINE_LOOP`了，但它并没有修复错误。

**编辑：**一种解决方案，到目前为止有效： Lie Ryan 的[Opengl 像素完美 2D 绘图](https://stackoverflow.com/questions/10040961/opengl-pixel-perfect-2d-drawing)：

> 请注意，OpenGL 坐标空间没有整数的概念，一切都是浮点数，OpenGL 像素的“中心”实际上是在 0.5,0.5 而不是左上角。因此，如果你想要一条从 0,0 到 10,10 的 1px 宽的线，**你真的必须画一条从 0.5,0.5 到 10.5,10.5 的线。**
> 
> 如果您打开抗锯齿，这一点尤其明显，如果您有抗锯齿并且您尝试从 50,0 到 50,100 绘制，您可能会看到一条模糊的 2px 宽线，因为该线位于两个像素之间。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-25T22:10:31.367

This is not a bug, this is exactly following the specification. The last pixel of a line is not drawn to prevent overdraw with following line segments, which would cause problems with blending. **Solution: Send the last vertex twice.**

### Code Update

```
// don't use glPolygonMode, it doesn't
// do what you think it does
glBegin(GL_LINE_STRIP);
    glVertex2f(a);
    glVertex2f(b);
    glVertex2f(c);
    glVertex2f(d);
    glVertex2f(a);
    glVertex2f(a); // resend last vertex another time, to close the loop
glEnd(); 
```

BTW: You should learn how to use vertex arrays. Immediate mode (glBegin, glEnd, glVertex calls) have been removed from OpenGL-3.x core and onward.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-26T21:44:01.803

尽管您发现将您的分数移动 0.5 会使问题消失，但这并不是您认为的原因。

答案确实在于钻石退出规则，这也是正确接受[Opengl 像素完美 2D 绘图](https://stackoverflow.com/questions/10040961/opengl-pixel-perfect-2d-drawing)答案的核心。

下图显示了四个片段/像素，每个片段/像素中都刻有一颗钻石。四个彩色点代表四边形/线循环的可能起点，即第一个顶点的窗口坐标。

![碎片菱形之外的可能顶点](../Images/b7131256bfb2c9df0774e806559d145d.png)

你没有说你画四边形的方式，但这没关系。为了争论，我假设你是顺时针绘制的。问题是显示的四个片段的左上角是否将通过光栅化您的第一行或最后一行（不能同时是两者）来产生。

1.  如果您从黄色顶点开始，则第一条线穿过菱形并在它水平向右通过时退出它。因此，片段将作为第一行光栅化的结果产生。

2.  如果您从绿色顶点开始，那么第一行会退出片段而不通过菱形，因此永远不会退出菱形。然而，最后一行将垂直穿过它并在它上升回到绿色顶点时退出它。因此，片段将作为最后一行光栅化的结果产生。

3.  如果您从蓝色顶点开始，则第一条线穿过菱形并在它水平向右通过时退出它。因此，片段将作为第一行光栅化的结果产生。

4.  如果您从红色顶点开始，那么第一行会退出片段而不通过菱形，因此永远不会退出菱形。最后一行也不会穿过菱形，因此不会在它上升回到红色顶点时退出它。*因此，任何一条线的光栅化都不会*产生片段。

请注意，菱形内部的任何顶点都会自动导致生成片段，因为第一行必须退出菱形（当然，前提是您的四边形实际上足够大以离开菱形）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-25T00:47:01.620

@Troubadour 完美地描述了这个问题。这不是驱动程序错误。GL 完全按照规定行事。它专为设备空间中世界空间对象的亚像素精确表示而设计。这就是它正在做的事情。解决方案是 1) 抗锯齿，因此设备空间提供更高的保真度和 2) 安排一个世界坐标系，其中所有变换的顶点都落在设备像素的中间。这是您正在寻找的“通用”解决方案。

在所有情况下，您都可以通过移动输入点来实现 2)。只需将每个点移动到足以将其变换到设备像素的中间即可。

对于某些（未更改的）点集，您可以通过稍微修改视图转换来实现。1/2 像素偏移就是一个例子。例如，如果世界空间是设备空间的整数比例变换，然后是整数平移，则它可以工作，其中世界坐标也是整数。但是，在许多其他条件下，+1/2 不起作用。

** 编辑 **

注意，正如我所说的，可以在视图变换中构建统一移位（1/2 或任何其他）。没有理由摆弄顶点坐标。只需添加翻译，例如`glTranslatef(0.5f, 0.5f, 0.0f);`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-14T10:25:40.553

尝试将 0.5 更改为到处使用的奇数幻数 0.375。曾经是opengl，和X11等。

由于提到的钻石规则以及图形卡如何绘制以避免不必要的像素过度绘制。

提供一些链接，但链接很多，如果您需要更多信息，只需搜索关键字 opengl 0.375 钻石规则。这是关于如何在 opengl 中通过算法处理轮廓和填充。例如 2d 精灵中的纹理的像素完美渲染也需要它。

看看[这个](http://www.opengl.org/discussion_boards/showthread.php/166043-The-meaning-of-the-0-375-pixel-translation)。

想加点东西；所以做你想做的事，在代码中实现钻石规则将只是一条线；像这样将 0.5 更改为 0.375；它应该正确渲染。

```
glTranslatef(0.375, 0.375, 0.0); 
```

# facebook - Facebook PHP sdk 中的“getLoginStatusUrl()”无法正常工作？

> ID：10320335
> 
> 赞同：0
> 
> 时间：2012-04-25T16:57:49.573
> 
> 标签：facebook, facebook-php-sdk, facebook-apps, loginstatus

我正在尝试确定用户是否已登录 Facebook。在与我合作的情况下，我想强制他登录我的网站，即使他已经登录了 facebook 并且之前已经给了我权限。

```
$params = array(
  'ok_session' => 'http://localhost/fb_connect?ok_session=1',
  'no_user' => 'http://localhost/fb_connect?no_user=1',
  'no_session' => 'http://localhost/fb_connect?no_session=1',
);
$next_url = $facebook->getLoginStatusUrl($params); 
```

我试图使用上面的代码（根据 [http://developers.facebook.com/docs/reference/php/facebook-getLoginStatusUrl/](http://developers.facebook.com/docs/reference/php/facebook-getLoginStatusUrl/)上的说明）来确定我需要什么流程来引导我的用户，但在这种情况下当有 'no_session' 又名没有人登录 Facebook，而不是获取`'no_session'`指定的 url 时`$params`，我在 facebook 上收到消息`Application Error`“检查登录状态页面”欢迎任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T19:33:00.207

你是对的，它坏了：http: [//developers.facebook.com/bugs/295348980494364](http://developers.facebook.com/bugs/295348980494364)

# javascript - 不要在循环中创建函数

> ID：10320343
> 
> 赞同：74
> 
> 时间：2012-04-25T16:58:24.503
> 
> 标签：javascript, jslint

在这种情况下解决 jslint 错误的正确方法是什么？我正在向使用它的对象添加一个 getter 函数。如果不在循环内创建函数，我不知道该怎么做。

```
for (var i = 0; i<processorList.length; ++i) {
   result[i] = {
       processor_: timestampsToDateTime(processorList[i]),
       name_: processorList[i].processorName,
       getLabel: function() { // TODO solve function in loop.
            return this.name_;
       }
   };
} 
```

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2012-04-25T17:00:09.580

将函数移出循环：

```
function dummy() {
    return this.name_;
}
// Or: var dummy = function() {return this.name;};
for (var i = 0; i<processorList.length; ++i) {
   result[i] = {
       processor_: timestampsToDateTime(processorList[i]),
       name_: processorList[i].processorName,
       getLabel: dummy
   };
} 
```

...或者只是使用文件顶部的[`loopfunc`选项](http://www.jshint.com/docs/options/#loopfunc)忽略该消息：

```
/*jshint loopfunc:true */ 
```

# css - 为什么某些 CSS 属性不适用于 a:visited？

> ID：10320351
> 
> 赞同：16
> 
> 时间：2012-04-25T16:59:03.353
> 
> 标签：css

我有一些我们网站的链接样式，CSS如下：

```
a:link {
    font-family: Verdana, Tahoma, Geneva, sans-serif;
    text-decoration: none;
    color: #0676b3;
}

a:visited {
    color: #666;
    text-decoration: underline;
}

a:hover {
    color: #fff;
    background: #A5C2DB;
    border-radius: .1875em;
    padding: 0 .1875em;
} 
```

这是一个[jsfiddle](http://jsfiddle.net/danferth/xmewM/)来展示它们在不同状态下**应该如何看待：**

```
a {
  display: inline-block;
  margin: 10px;
}
/*  these styles are for presentation of the link states they are NOT the styles in my stylesheet*/

a.link {
  font-family: Verdana, Tahoma, Geneva, sans-serif;
  font-size: .875em;
  text-decoration: none;
  color: #0676b3;
}
a.visited {
  color: #666;
  text-decoration: underline;
}
a.hover {
  color: #fff;
  background: #A5C2DB;
  border-radius: 0.1875em;
  padding: 0 0.1875em;
}
```

```
<a class="link">Regular Link</a>
<br />
<a class="visited">Visited Link</a>
<br />
<a class="hover">Hovered Link</a>
```

:link = 蓝色文字无装饰

:visited = 带下划线的灰色文本

:hover = 浅蓝色背景的白色文本

`:link`和工作正常，`:hover`但由于某种原因，`:visited`国家拒绝显示下划线。在使用 firebug 或检查器的 Chrome 和 Firefox 中，我可以看到正在运行的`:visited`样式，并且文本是灰色的，只有它拒绝`underline`状态。

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-25T17:20:18.637

你没有做错任何事——它只是不再那样工作了。:visited 的样式被用作安全漏洞，因此浏览器制造商基本上消除了 :visited 的替代样式，除了少数属性（例如“颜色”、“背景颜色”）

见：[http ://hacks.mozilla.org/2010/03/privacy-related-changes-coming-to-css-vistited/](http://hacks.mozilla.org/2010/03/privacy-related-changes-coming-to-css-vistited/)

# c# - 不透明度在 C# 中没有正确应用

> ID：10320353
> 
> 赞同：1
> 
> 时间：2012-04-25T16:59:17.503
> 
> 标签：c#, windows, opacity

我想改变另一个窗口的不透明度。我设法用 SetWindowLong 和 SetLayeredWindowAttributes 改变了不透明度，但它没有直接应用。当我更改不透明度时：窗口将变得透明，但是当我再次将其更改为另一个不透明度时，不透明度消失了。

这是如何实现的，我该如何解决这个问题，这是重绘问题吗？我还尝试应用 2 倍相同的不透明度；如果你这样做，也会发生同样的事情。

这就是我改变不透明度的方式：

```
public void Opacity(IntPtr WindowHandle, byte WindowOpacity)
{
    SetWindowLong(WindowHandle, -20, GetWindowLong(WindowHandle, -20) ^ 0x080000);
    SetLayeredWindowAttributes(WindowHandle, 0, WindowOpacity, 0x002);
} 
```

# jquery - 使用 jQuery 在 iF rame 中防止 F5

> ID：10320357
> 
> 赞同：3
> 
> 时间：2012-04-25T16:59:22.670
> 
> 标签：jquery, internet-explorer, iframe

我们的应用程序要求不允许用户使用 F5 刷新网页。

我在[这里](https://stackoverflow.com/questions/7896660/how-can-i-rewrite-onkeydown-on-the-html-element "这里")实现了解决方案，但是我刚刚发现这在页面上的 iframe 内不起作用。

iframe 是从 Telerik Radeditor 控件生成的。

我尝试在包含 radeditor 的页面中执行以下操作。

```
$(function () {
    $('#<%=RadEditor1.ClientID %>_contentIframe html').bind('keydown', function () {
        if (window.event && window.event.keyCode == 116) {
            window.event.cancelBubble = true;
            window.event.returnValue = false;
            window.event.keyCode = 0;
            window.status = "F5 is disabled on all popups";
            return false;
        }
    });
}); 
```

但是它不起作用。

我缺少的 iframe 有什么特别之处吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T17:06:37.897

知道您想防止用户在页面上工作时丢失数据，我会提出一个不同的解决方案。为什么不在他们离开页面时直接挂钩，并提示他们是否打算这样做？

[检测用户何时离开网页的最佳方法？](https://stackoverflow.com/questions/147636/best-way-to-detect-when-user-leaves-a-web-page)

当邮件尚未保存/发送时，Gmail 会使用此方法。这将帮助您涵盖许多场景，让您的用户满意，并且如果有人愿意，仍然允许 F5 工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T21:29:04.470

这种方法始终如一地工作。

```
$(function () {
    function addF5Handler(){
        el = $('body', $('#myframe').contents());
        if(el.length != 1) {
            setTimeout(addF5Handler, 100);
            return;
        }
        $($('#myframe').get(0).contentWindow.document).keydown(function () {
            var myWindow = $('#myframe').get(0).contentWindow;
            if (myWindow.event && myWindow.event.keyCode == 116) {
                myWindow.event.cancelBubble = true;
                myWindow.event.returnValue = false;
                myWindow.event.keyCode = 0;
                myWindow.status = "F5 is disabled on all popups";
                return false;
            }
        });
    }
    addF5Handler();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T17:31:56.303

我认为您唯一的选择是：

```
$(window).on('beforeunload', function () {
  return 'Leave?';
}); 
```

把它放在 iFrame 页面中。

# android - Android listview如何实现onscrollchanged和onscroll

> ID：10320362
> 
> 赞同：0
> 
> 时间：2012-04-25T16:59:35.873
> 
> 标签：android, listview

我有一个列表视图，一次将填充 3000 多个项目。每个项目都有一个图像视图，我必须从服务器获取其图像。我希望当用户滚动并完成时，listview 仅加载那些在屏幕上可见的视图的图像，并删除那些在屏幕上向上和向下滚动（不可见）的行的图像，以便可以重新下载它们的图像它们出现在屏幕上是因为由于内存限制，我无法保留所有数据的图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T18:13:03.073

ListView 已经重用了不可见的视图，因此无需在之后删除它们，但您可以通过向列表添加滚动侦听器来优化这一点，并且仅在滚动停止时才下载图像。

# python - 添加整页图片作为reportlab的最后一页

> ID：10320372
> 
> 赞同：1
> 
> 时间：2012-04-25T17:00:17.500
> 
> 标签：python, reportlab

我有一个用reportlab 生成的pdf。我正在使用`SimpleDocTemplate`前 n 个页面呈现文档，但最后一个页面完全不同（格式和内容），由一个应该占据整个页面的图像组成。将图像添加为`Flowable`元素时，出现越界错误，因为它对于定义的页面边界来说太大了。

我可以使用画布很好地渲染它，但它会出现在每一页上 - 有没有人建议最好的方法来解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T17:17:41.573

如果您知道最后页码：

```
def onLaterPages(self, doc, canvas):
    if doc.page == TOTAL_PAGES:
        canvas.saveState()
        canvas.drawImage(filename, 0, 0, *pagesize)
        canvas.restoreState()

# and when calling doc.build
doc.build(..., onLaterPages=onLaterPages) 
```

如果您不知道总页码，请查看[这个](https://stackoverflow.com/questions/637800/showing-page-count-with-reportlab)，但我认为他们没有使用 SimpleDocTemplate...

# javascript - How to open a new jsp page with JavaScript

> ID：10320374
> 
> 赞同：0
> 
> 时间：2012-04-25T17:00:29.927
> 
> 标签：javascript

I have the following dropdown menu how can i redirect each menu to corresponding page by clicking each of menu? is it possible by using one javascript function if yes how? thanks in advance...

```
<div>
 <ul>
  <li id=home onclick="show(this.id)"><a href="home.jsp">Home</a></li>
  <li id=collection onclick="show(this.id)><a href="collection.jsp">Collection</a></li>
     <ul>
       <li id=men onclick="show(this.id)><a href="men.jsp">Men</a></li>
       <li id=women onclick="show(this.id)><a href="women.jsp">Women</a></li>
     </ul>
  <li id=contact onclick="show(this.id)><a href="contact.jsp">Contact</a></li>
</ul>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T17:04:07.923

Yes you can.

Use `window.open("URL")` in your case URL is `this.id`

Also you can update `window.location`

read more here [http://www.tizag.com/javascriptT/javascriptredirect.php](http://www.tizag.com/javascriptT/javascriptredirect.php)

Like Niko said you need closing quotes

```
.. onclick="window.open(this.id)" .. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T17:04:25.167

Try this?

```
$("div > ul li a").click(function() {
    window.location.href += "/" + $(this).parent()[0].id;
}); 
```

I tried to use a selector that didn't modify your HTML, so that's why it looks so icky.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T17:20:27.537

If you only need o JS function to redirect based on a parameter that, in your case, is the component ID, this will do the work:

```
<script type="text/javascript">
    var show = function(id) {
        window.location.href = id + '.jsp';
    };
</script> 
```

If you want to navigate DOM and get link's href attribute use:

```
document.getElementById(id).firstChild.href 
```

Considering that the first element inside the component referred by ID is a link tag.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T17:28:46.570

This makes no sense.

I understand that your particular functional requirement is to invoke the link when the enduser clicks somewhere in the space of the `<li>` *outside* the link. To achieve that just set the CSS `display` property of the `<a>` element to `block`. This way the link will span the entire space of its parent element.

```
<ul id="menu">
  <li><a href="home.jsp">Home</a></li>
  <li><a href="collection.jsp">Collection</a></li>
     <ul>
       <li><a href="men.jsp">Men</a></li>
       <li><a href="women.jsp">Women</a></li>
     </ul>
  <li><a href="contact.jsp">Contact</a></li>
</ul> 
```

with this CSS

```
#menu li a {
    display: block;
} 
```

No need for ugly JavaScript hacks. Opening a new JSP page location in the current window is by the way to performed by `window.location = 'some.jsp';`. But this is not necessary if you use the right solution for the concrete problem. In the future questions, try to elaborate more about the functional requirement instead of concentrating only on the solution of which you thought that it's the right solution for the particular functional requirement.

# objective-c - 应用程序在调用 dispatch_sync() 时不一致地停止

> ID：10320375
> 
> 赞同：1
> 
> 时间：2012-04-25T17:00:30.623
> 
> 标签：objective-c, cocoa, grand-central-dispatch, xmppframework

> **可能重复：**
> [调度队列时应用程序阻塞](https://stackoverflow.com/questions/10315645/app-blocks-while-dipatching-a-queue)

我正在使用 XMPPFramework，在它的代码中有这样的方法：

```
- (NSDictionary *)occupants
{
    if (dispatch_get_current_queue() == moduleQueue)
    {
        return occupants;
    }
    else
    {
        __block NSDictionary *result;

        dispatch_sync(moduleQueue, ^{//IT BLOCKS HERE
            result = [occupants copy];
        });

        return [result autorelease];
    }
} 
```

它不一致地卡在那里，并非总是如此；该应用程序没有响应，但它没有崩溃，所以我暂停它，我看到线程（线程 1）已停止在那里。如果我按下播放键，什么都不会改变。怎么了？有任何想法吗？

# android - 尝试通过 v4 兼容性使用 DialogFragments 会导致 NoClassDefFoundErrors

> ID：10320378
> 
> 赞同：0
> 
> 时间：2012-04-25T17:00:46.367
> 
> 标签：android, noclassdeffounderror, android-dialogfragment, android-fragmentactivity

问候和问候，

简短版本：我试图在我的 Android 应用程序中使用 DialogFragment，它的 minSkdVersion 为 8（Android 2.2）。为了使用它们，我必须能够调用“getSupportFragmentManager()”。为了做到这一点，我尝试将调用 Activity 更改为 FragmentActivity，它允许 getSupportFragmentManager() 在运行时解析，但是当尝试在运行时创建该意图时，我得到一个 NoClassDefFoundError，因为应用程序无法解析上游的某些东西它

> W/dalvikvm(333)：无法解析超类...

在这种情况下，我怎样才能从一个简单的 Activity 调用 getSupportFragmentManager() 而不使该 Activity 成为 FragmentActivity （它无法工作）？还是我需要将活动变成 FragmentActivity，但我需要进行一些其他更改才能使其工作？

仅作记录：我已经将 android-support-v4.jar 添加到项目中（否则，我根本无法编译）。

预先感谢您的协助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T22:08:58.700

由于 FragmentActivity 是找不到的类，我想我知道问题出在哪里。您确定您的兼容性库包含在您的 apk 中吗？您可以使用 dex2jar 来检查这一点。您似乎需要将您的库移动到该`libs`文件夹​​，以便它们包含在 android 工具的较新版本中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T17:22:56.497

查看支持库的示例。它们从“FragmentActivity”扩展以支持这些功能。

他们还写道，您必须扩展它才能使用支持库：http: [//developer.android.com/reference/android/support/v4/app/FragmentActivity.html](http://developer.android.com/reference/android/support/v4/app/FragmentActivity.html)

片段活动：

> “想要使用基于支持的 Fragment 和 Loader API 的活动的基类。
> 
> 当使用此类而不是新平台的内置片段和加载器支持时，您必须分别使用 getSupportFragmentManager() 和 getSupportLoaderManager() 方法来访问这些功能。”

# forms - 如何在 PrestaShop 中自定义注册表和联系表？

> ID：10320382
> 
> 赞同：2
> 
> 时间：2012-04-25T17:01:14.010
> 
> 标签：forms, registration, prestashop, contact-form

我需要知道如何自定义我的联系方式和注册表单。如何添加新字段（和）并使这些字段中的信息为必填或不需要。

我需要知道我必须为这些表单编辑哪些文件...

我使用 prestashop 1.4.7.0

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T15:54:59.547

这实际上是两个独立的问题，因为您处理每种情况的方式存在重大差异。

## 答案 1

对于注册表单，您可以编写一个包含两个钩子处理函数的模块。这些将是：

```
public function hookCreateAccountForm() {}
public function hookCreateAccount($params) {} 
```

第一个功能允许您向注册表单添加其他字段（默认情况下，这些字段被插入到表单的末尾`authentication.tpl`，尽管您可以将它们作为一个单独的组移动到其他地方）。它应该只返回您需要的附加表单 html。

第二个函数为您提供了两个参数来处理帐户创建过程。这是在标准字段被验证并创建新客户之后执行的。不幸的是，您无法使用它对附加字段进行验证（您需要使用 javascript 或覆盖`AuthController`在`preProcess()`成员函数中执行您自己的身份验证）。在我自己的网站自定义模块之一中，我有以下内容，例如：

```
public function hookCreateAccount($params)
{
  $id_lang = (int)Configuration::get('PS_LANG_DEFAULT');
  $customer = $params['newCustomer'];
  $address = new Address(Address::getFirstCustomerAddressId((int)$customer->id));
  $membership_number = $params['_POST']['membership_number'];
  ....
  ....
} 
```

`$params['newCustomer']`是数组中的标准 Prestashop 元素，包含新创建的客户对象。您的字段将在`$params['_POST']`数组中 - 在我的情况下，它是一个名为`membership_number`.

## 答案 2

对于联系表格，恐怕要复杂得多。html 最简单的方法是在模板文件中硬编码您的附加字段`contact-form.tpl`。

要实际处理表单，您需要通过创建一个名为`ContactController.php`in的文件来为控制器创建一个覆盖，该文件`/<web-root>/<your-optional-ps-folder>/override/controller`包含以下内容：

```
<?php
class ContactController extends ContactControllerCore {

  function preProcess()
  {
    if (Tools::isSubmit('submitMessage'))
    {
      // The form has been submitted so your field validation code goes in here.
      // Get the entered values for your fields using Tools::getValue('<field-name>')
      // Flag errors by adding a message to $this->errors e.g.
      $this->errors[] = Tools::displayError('I haven't even bothered to check!');
    }
    parent::preProcess();
    if (Tools::isSubmit('submitMessage') && is_empty($this->errors))
    {
      // Success so now perform any addition required actions
      // Note that the only indication of success is that $this->errors is empty
    }
  }
} 
```

另一种方法是复制整个 preProcess 函数`controllers\ContactController`并对其进行修改，直到它完成你想要的......

# php - Google Docs API Adding a ressource to a collection (Zend/gdata)

> ID：10320384
> 
> 赞同：1
> 
> 时间：2012-04-25T17:01:15.883
> 
> 标签：php, zend-framework, gdata, google-docs-api, google-drive-api

I'm trying to do this following the API documentation there: [https://developers.google.com/google-apps/documents-list/#adding_a_resource_to_a_collection](https://developers.google.com/google-apps/documents-list/#adding_a_resource_to_a_collection)

With the Zend PHP gdata Framework my code is :

```
$docs->insertDocument($entryFile,  'https://docs.google.com/feeds/default/private/full/folder%3A0B--Zn-zouTFrOXdrV3lRelhuNHM/contents'); 
```

[Documentation on this method](http://www.zendframeworkdocumentation.com/classZend__Gdata__Docs.html#aac7859c97301161c3698e2e0ef2a077c)

I don't know how to find the correct URI then...

The entryFile parameter is the right type, it's the url that cause the problem the error

Response from the server :

> HTTP/1.1 400 Bad Request Content-type: text/html; charset=UTF-8 Date: Wed, 25 Apr 2012 17:10:51 GMT Expires: Wed, 25 Apr 2012 17:10:51 GMT Cache-control: private, max-age=0 X-content-type-options: nosniff X-frame-options: SAMEORIGIN X-xss-protection: 1; mode=block Server: GSE Connection: close Invalid request URI

The exception :

> Fatal error: Uncaught exception 'Zend_Gdata_App_HttpException' with message 'Expected response code 200, got 400 Invalid request URI' in C:\Program Files (x86)\EasyPHP-5.3.6.1\www\workspace\library\Zend\Gdata\App.php:709 Stack trace: #0 C:\Program Files (x86)\EasyPHP-5.3.6.1\www\workspace\library\Zend\Gdata.php(219): Zend_Gdata_App->performHttpRequest('POST', 'https://docs.go...', Array, 'performHttpRequest('POST', 'https://docs.go...', Array, 'post(Object(Zend_Gdata_Docs_DocumentListEntry), 'https://docs.go...', NULL, NULL, Array) #3 C:\Program Files (x86)\EasyPHP-5.3.6.1\www\workspace\library\Zend\Gdata\Docs.php(300): Zend_Gdata_App->insertEntry(Object(Zend_Gdata_Docs_DocumentListEntry), 'https://docs.go...', 'Zend_Gdata_Docs.. in C:\Program Files (x86)\EasyPHP-5.3.6.1\www\workspace\library\Zend\Gdata\App.php on line 709

(If you need any info please let me know, i'm really stuck on this and i'm willing to give as much details as possible if needed)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T23:23:35.163

Could you please log the exact HTTP request that is performed by Zend and compare it ti the one listed in the documentation: [https://developers.google.com/google-apps/documents-list/#adding_a_resource_to_a_collection](https://developers.google.com/google-apps/documents-list/#adding_a_resource_to_a_collection)

I'm sure the differences will show you what is done wrong.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T16:32:49.680

I solved the problem using the Php Client Library for the Google Drive SDK

# android - AppEngine 上的 Google 语音/语音识别 API？

> ID：10320388
> 
> 赞同：2
> 
> 时间：2012-04-25T17:01:34.390
> 
> 标签：android, google-app-engine, voice-recognition

我目前正在开发一个使用语音作为主要输入法的 Android+AppEngine 项目。在 android 上，您可以使用语音包将语音命令转换为纯文本。语音识别不在设备本身上完成，而是发送到谷歌服务器，该服务器返回文本。

供您参考：http: [//developer.android.com/resources/articles/speech-input.html](http://developer.android.com/resources/articles/speech-input.html)

我的目标是使用相同的谷歌服务在 appengine 端进行语音识别。这意味着将语音记录发送到 appengine，将其存储在 blobstore 中，并在必要时运行语音识别服务。有没有办法连接到同一个服务（最好是在 java 中）？

我做了一些研究，发现了一些使用 ie microsoft 的第三方解决方案可能会起作用。但在花很多时间集成这样的解决方案之前，我想知道是否有可能留在谷歌生态系统中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T17:05:56.880

AFAIK 这个 API 不是公开的。谷歌群组上的这篇文章讨论了语音识别：[http ://productforums.google.com/forum/#!topic/voice/YoUZStcv_EA](http://productforums.google.com/forum/#!topic/voice/YoUZStcv_EA)

以下是人们成功调用 Google 语音 API 的一些链接。请注意，这不是官方 API，因此不提供支持，并且可能随时消失：

[http://techcrunch.com/2009/12/14/the-unofficial-google-text-to-speech-api/](http://techcrunch.com/2009/12/14/the-unofficial-google-text-to-speech-api/)

[http://mikepultz.com/2011/03/accessing-google-speech-api-chrome-11/](http://mikepultz.com/2011/03/accessing-google-speech-api-chrome-11/)

# c - awk 减少对系统的依赖

> ID：10320394
> 
> 赞同：5
> 
> 时间：2012-04-25T17:01:55.043
> 
> 标签：c, bash, awk

如果我没记错的话，awk 会根据操作系统语言解析一个数字（例如，`echo "1,2" | awk '{printf("%f\n",$1)}'`在英语系统中将被解释为 1，而在逗号将整数与小数部分分开的系统中会被解释为 1.2）。

我不知道 C printf 是否也这样做，所以我添加了 C 标签。

我想修改前面的命令，使其返回相同的值 (1.2)，而不管使用的系统如何。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-25T17:04:37.050

*欢迎来到语言环境*的丑陋。要解决您的问题，首先将语言环境设置为 C 语言。

```
export LC_NUMERIC=C
echo "1,2" | awk '...your code...' 
```

要关闭其他依赖于语言环境的愚蠢行为，您可以

```
export LC_ALL=C 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T19:16:20.567

如果您正在使用`gawk`，则可以使用该`--use-lc-numeric`选项。

```
$ LC_NUMERIC=de_DE.UTF-8 awk 'BEGIN {printf("%f\n", "1,2")}'
1.000000
$ LC_NUMERIC=de_DE.UTF-8 awk --use-lc-numeric 'BEGIN {printf("%f\n", "1,2")}'
1,200000 
```

来自 [GAWK 手册](http://gnu.org/software/gawk/manual/html_node/Conversion)

> POSIX 标准规定，在读取 awk 程序源代码和命令行变量赋值时，awk 始终使用句点作为小数点（请参阅其他参数）。但是，在解释输入数据时，对于 print 和 printf 输出，以及对于数字到字符串的转换，使用本地小数点字符。以下是一些说明 GNU/Linux 系统上行为差异的示例：
> 
> ```
>  $ gawk 'BEGIN { printf "%g\n", 3.1415927 }'
>  -| 3.14159
>  $ LC_ALL=en_DK gawk 'BEGIN { printf "%g\n", 3.1415927 }'
>  -| 3,14159
>  $ echo 4,321 | gawk '{ print $1 + 1 }'
>  -| 5
>  $ echo 4,321 | LC_ALL=en_DK gawk '{ print $1 + 1 }'
>  -| 5,321 
> ```
> 
> 'en_DK' 语言环境适用于丹麦的英语，其中逗号充当小数点分隔符。在正常的“C”语言环境中，gawk 将“4,321”视为“4”，而在丹麦语言环境中，将其视为完整数字 4.321。
> 
> 一些早期版本的 gawk 完全符合标准的这一方面。然而，许多非英语语言环境的用户抱怨这种行为，因为他们的数据使用句点作为小数点，因此恢复默认行为以使用句点作为小数点字符。您可以使用该`--use-lc-numeric`选项（请参阅选项）强制 gawk 使用区域设置的小数点字符。（在 POSIX 模式下，gawk 也使用区域设置的小数点字符，或者 via `--posix`，或者`POSIXLY_CORRECT`环境变量。）

我得到了类似的行为`/usr/bin/printf`

```
$ LC_NUMERIC=de_DE.UTF-8 /usr/bin/printf "%f\n" "1,2"
/usr/bin/printf: 1,2: value not completely converted
1,000000
$ LC_NUMERIC=de_DE.UTF-8 /usr/bin/printf "%f\n" "1.2"
1,200000 
```

但没有能力覆盖它。

如果您的意图相反，即采用“欧洲”输入并输出“美国”数字，您将需要使用更强大的东西。可能的 Python 或 Perl 及其语言环境模块。

# perl - 如何从多个列表中生成一个有序的父子元素列表？

> ID：10320398
> 
> 赞同：2
> 
> 时间：2012-04-25T17:02:15.473
> 
> 标签：perl, list, parent-child

我有这个问题：给定一些数组（例如在 Perl 或任何其他语言中）：

```
1\. (A,B,C)
2\. (B,D,E,F)
3\. (C,H,G)
4\. (G,H) 
```

在每个数组中，第一个元素是父元素，其余元素是它的子元素。在这种情况下，元素 A 有两个孩子 B 和 C，B 有三个孩子 D、E 和 F 等。我想处理这组数组，并生成一个包含正确顺序的列表。在这种情况下，A是根元素，所以有B和C，那么B下面是D，E和F，C下面是G和H，G也有H作为子元素（这意味着一个元素可以有多个父元素）。这应该是结果数组。

**重要提示**：查看第 3 个数组，H 在 G 之前，即使它是第四个数组中 G 的子元素。所以每个数组中的孩子没有特定的顺序，但在最终结果中（如下所示），在它的孩子/人之前必须有任何父母。

(A,B,C,D,E,F,G,H) 或 (A,C,B,D,E,F,G,H) 或 (A,B,C,G,H,D,E ，F）

有一些创建该数组的递归方式会很好，但不是必需的。谢谢你的时间..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T20:17:13.973

如果不是因为节点有多个父节点的可能性，这将是一个简单的后序遍历。

为了解决这个问题，最简单的方法是为每个节点分配一个*层级。*在这种情况下`H`，出现在第 3 层和第 4 层上，并且始终是所需的*最*高层号。

此代码实现了该设计。

```
use strict;
use warnings;

my @rules = (
  [qw/ A B C / ],
  [qw/ B D E F / ],
  [qw/ C H G / ],
  [qw/ G H / ],
);

# Build the tree from the set of rules
#
my %tree;

for (@rules) {
  my ($parent, @kids) = @$_;
  $tree{$parent}{$_}++ for @kids;
}

# Find the root node. There must be exactly one node that
# doesn't appear as a child
#
my $root = do {
  my @kids = map keys %$_, values %tree;
  my %kids = map {$_ => 1} @kids;
  my @roots = grep {not exists $kids{$_}} keys %tree;
  die qq(Multiple root nodes "@roots" found) if @roots > 1;
  die qq(No root nodes found) if @roots < 1;
  $roots[0];
};

# Build a hash of nodes versus their tier level using a post-order
# traversal of the tree
#
my %tiers;
my $tier = 0;
traverse($root);

# Build the sorted list and show the result
#
my @sorted = sort { $tiers{$a} <=> $tiers{$b} } keys %tiers;
print "@sorted\n";

sub max {
  no warnings 'uninitialized';
  my ($x, $y) = @_;
  $x > $y ? $x : $y;
}

sub traverse {
  my ($parent) = @_;
  $tier++;
  my @kids = keys %{ $tree{$parent} };
  if (@kids) {
    traverse($_) for @kids;
  }
  $tiers{$parent} = max($tiers{$parent}, $tier);
  $tier--;
} 
```

**输出**

```
A B C F E D G H 
```

* * *

**编辑**

这作为数组的散列工作得稍微干净一些。这是重构。

```
use strict;
use warnings;

my @rules = (
  [qw/ A B C / ],
  [qw/ B D E F / ],
  [qw/ C H G / ],
  [qw/ G H / ],
);

# Build the tree from the set of rules
#
my %tree;

for (@rules) {
  my ($parent, @kids) = @$_;
  $tree{$parent} = \@kids;
}

# Find the root node. There must be exactly one node that
# doesn't appear as a child
#
my $root = do {
  my @kids = map @$_, values %tree;
  my %kids = map {$_ => 1} @kids;
  my @roots = grep {not exists $kids{$_}} keys %tree;
  die qq(Multiple root nodes "@roots") if @roots > 1;
  die qq(No root nodes) if @roots < 1;
  $roots[0];
};

# Build a hash of nodes versus their tier level using a post-order
# traversal of the tree
#
my %tiers;
traverse($root);

# Build the sorted list and show the result
#
my @sorted = sort { $tiers{$a} <=> $tiers{$b} } keys %tiers;
print "@sorted\n";

sub max {
  no warnings 'uninitialized';
  my ($x, $y) = @_;
  $x  > $y ? $x : $y;
}

sub traverse {

  my ($parent, $tier) = @_;
  $tier //= 1;

  my $kids = $tree{$parent};
  if ($kids) {
    traverse($_, $tier + 1) for @$kids;
  }
  $tiers{$parent} = max($tiers{$parent}, $tier);
} 
```

假设有多个正确的排序，输出等效于前面的解决方案**。**请注意，这`A`将始终是第一个和`H`最后一个，并且`A C B F G D E H`是可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T10:22:34.923

这个版本也可以，但它给你所有正确答案的排列，所以你每次都能得到正确的结果，但它可能不像你以前的结果（除非你有很多空闲时间......:-)）。

```
#!/usr/bin/perl -w

use strict;
use warnings;

use Graph::Directed qw( );

my @rules = (
   [qw( A B C )],
[qw( B D E F )],
[qw( C H G )],
[qw( G H )],
);

print @rules;

my $graph = Graph::Directed->new();

for (@rules) {
   my $parent = shift(@$_);
   for my $child (@$_) {
  $graph->add_edge($parent, $child);
   }
}

$graph->is_dag()
    or die("Graph has a cycle--unable to analyze\n");
$graph->is_weakly_connected()
or die "Graph is not weakly connected--unable to analyze\n";

print join ' ', $graph->topological_sort(); # for eks A C B D G H E F 
```

# bash - 如何在没有大量转义的情况下使用 find -exec

> ID：10320399
> 
> 赞同：2
> 
> 时间：2012-04-25T17:02:22.610
> 
> 标签：bash

我经常`find`在一堆文件上运行相同的脚本。因此，例如，如果我想`process.py`在 中的所有`.png`文件上运行`dir`，我会这样做：

```
find dir -name '*.png' -execdir process.py \{\} \; 
```

最后的尖桩篱笆很烦人，有什么办法解决吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T17:04:37.410

采用：

```
find dir -name '*.png' -execdir process.py {} + 
```

`{}`不需要逃避；它们仅在相当有限的情况下对 shell 具有特殊意义。（特别是，`echo {}`回显大括号，而回显`echo {a,b,c}`。`a b c`）`+`也不需要转义。它告诉`find`我们要“玩现`xargs`”。也就是说，它将在每次执行时使用尽可能多的文件名运行命令。

请注意，使用`-exec`or`-execdir`自动和全面地处理文件名中的空格（和其他尴尬的字符 - 换行符、退格符、换页符，任何人？）的问题。`-print`用into管道名称`xargs`在这里遇到问题。GNU `find`plus GNU`xargs`提供了解决文件名中奇数字符问题的`-print0`选项`find`和`-0`选项。`xargs`

如果您必须对每个文件执行一次脚本，那么最后需要一个转义的分号；没有简单的方法解决这个问题（除非你数：`SC=";"; find ... {} $SC`，我没有）。

我看到的唯一问题是`-execdir`在子目录中运行脚本。当不同的目录中有不同的文件时，您必须检查它的行为是否正常，并且您需要确保在使用时`{}`转换为“相对于它所在目录的文件名” `-execdir`（否则，通常，该文件无法通过赋予脚本的名称来定位）。所有这些都应该“正常工作”，因为如果不这样做，这些选项将无法有意义地使用。

就个人而言，我宁愿只使用 plain `-exec`，但你选择 可能是有充分理由的`-execdir`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-25T17:13:04.413

根据您的键盘布局，`"`使用起来可能比`'`或更方便`\`。[就Unix & Linux](https://unix.stackexchange.com/questions/8647/gnu-find-and-masking-the-for-some-shells-which) Stack Exchange 站点所知，`{}`不需要转义。没有人能识别出需要转义的 shell，并且手册页中的示例没有转义大括号。`{}`

```
find dir -name "*.png" -execdir process.py {} ";" 
```

Jonathan Leffler 有一个最后加上 + 的解决方案，它在语义上并不相同，但通常可以使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T17:07:03.057

你可以单引号 '{}' ';' 相反，但您必须以某种方式阻止 shell 本身解释这些字符。如果找到的数量很少，xargs 也会起作用。

# sql-server - 通过嵌套连接选择最高 Seq 号

> ID：10320407
> 
> 赞同：1
> 
> 时间：2012-04-25T17:03:13.033
> 
> 标签：sql-server

我想为每个客户 ID 取最大的序列号（最大的序列号将根据最高的银行账户余额计算）。

该表有 100000 条记录。

表

客户端序列表 T1

```
ClID              SeqId     
1                 11         
1                 12         
1                 13         
1                 14         
1                 15         
2                 16         
2                 17         
2                 18         
2                 19         
3                 110         
3                 111         
3                 112         
3                 113 
```

SeqBranchTable T2

```
SeqId    BalID  
11         1  
12         2  
13         3  
14         4  
15         5  
16         6  
17         7  
18         8  
19         9  
110         10  
111         11  
112         12  
113         13 
```

平衡表t3

```
BalID Balance  
1     30000  
2     26789  
3     23456  
4     12345  
5     21234  
6     12456  
7     45632  
8     23456  
9     99999  
10    12345  
11    21234  
12    12456  
13    45632 
```

结果将是

```
ClID              SeqID          Balance  
1                 1              30000  
2                 9              99999  
3                 4              45632 
```

我已经尝试过这种方式，但对我没有用

```
SELECT  RS.Investigationid,MAX(stt.sequenceid) 'SeqId', T.HighestBalance 'Balance' 
FROM    ClientSeqTable  T1, SeqBranchTable T2, branbaltable t3,  
                ( SELECT    t1.clid ,MAX(T3.Balance) 'HighestBalance'
                    FROM    ClientSeqTable  T1, SeqBranchTable T2, branbaltable t3,
                    WHERE   t1.seqid =  T2.seqID
                    AND     T2\. balId= T3\. balId
                    GROUP BY  RS.Investigationid,stt.SequenceId
                    ) T
WHERE   T2.balId =  T3.BalId
AND T1.SeqId = T2.SeqId
AND     T3.HighestBalance = T2.balance
AND     T1.clID = t.ClID
GROUP BY  T1.ClID 
```

以上查询结果如下。

```
ClID            SeqNu          Bal    
1               1              30000    
1               2              30000  
1               3              30000  
1               4              30000  
1               5              30000  
2               3              99999    
2               4              99999    
2               1              99999    
2               9              99999    
3               2              45632  
3               5              45632  
3               3              45632  
3               4              45632 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T17:58:59.107

如果您能够使用 row_number 函数，那么应该可以工作：

```
select 
    *
from 
(
    select 
        t1.ClID, t1.SeqId, t3.Bal, 
        RowNumber = row_number() over (PARTITION BY t1.ClID order by t3.bal desc)
    from 
        ClientSeqTable t1
    inner join
        SeqBranchTable t2 on t2.SeqId = t1.SeqId
    inner join
        Balancetable t3 on t3.BalID = t2.BalID
) t
where
    t.RowNumber = 1 
```

重要的一点是按客户端 ID 划分行号，然后按余额降序排列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T18:25:37.543

如果你想在 MAX 上使用 In-line，你可以这样做

```
SELECT t1.ClID, 
       t1.SeqId, 
       t3.Balance 
FROM   ClientSeqTable t1 
       INNER JOIN SeqBranchTable t2 
         ON t2.SeqId = t1.SeqId 
       INNER JOIN Balancetable t3 
         ON t3.BalID = t2.BalID 
       INNER JOIN (SELECT Max(Balance) Bal, 
                          t1.ClID 
                   FROM   ClientSeqTable t1 
                          INNER JOIN SeqBranchTable t2 
                            ON t2.SeqId = t1.SeqId 
                          INNER JOIN Balancetable t3 
                            ON t3.BalID = t2.BalID 
                   GROUP  BY t1.ClID) max_bal 
         ON t1.ClID = max_bal.ClID 
            AND t3.Balance = max_bal.bal 
```

[演示](http://sqlfiddle.com/#!3/6b974/18)

但是您应该注意，这实际上并不等同于使用 row_number （[muters](https://stackoverflow.com/a/10321152/119477)解决方案）。如果 max(balance) 存在平局，则每个 ClID 可能会返回多行。如果您需要这种处理关系的方式并且想要使用窗口函数，则[可以使用 RANK](http://sqlfiddle.com/#!3/6b974/22)。

# css - 相同的 z-index 在不同的站点中表现不同

> ID：10320412
> 
> 赞同：1
> 
> 时间：2012-04-25T17:03:26.573
> 
> 标签：css, z-index

我看到一个我认为是由于 z-index 的错误，这个错误真的很奇怪。在两个不同的站点中查看这两个帖子（同时请记住，数据相同，只有站点具有不同的 css）

```
1st site (buggy one) : http://bloghutsbeta.blogspot.com/2012/03/testing-3.html

2nd site (the okay one) : http://www.bloghuts.com/2011/08/wizard-fashion.html 
```

要查看错误，请转到第一个站点，然后单击“播放”并保持打开状态，请转到第 2 个站点，然后单击“播放”，您将看到我正在谈论的错误，我无法理解发生了什么?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T17:30:48.233

好吧，我想我发现了我不确定的问题，因为我使用了 firebug，我的朋友，问题是因为你给 #postarea #sidebar #sidebar1 #sidebar2 等的 z-index 的值，他们有 z-index:1如果您使用萤火虫关闭它们，它会完全解决您面临的问题。我认为 z-index:1 被认为大于 z-index:99999999 这就是为什么您的内容出现在游戏上方并为您带来问题的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T17:20:36.070

我认为问题不是因为 z-index 因为它们对于两个站点都是相同的，它必须是其他影响它的东西。我的猜测是，这个有问题的网站的设计可能会弄乱它，因为我看到游戏中出现了内容，当你点击边框时，游戏就会消失。

# c++ - 内存中的 C++ 程序大小

> ID：10320414
> 
> 赞同：4
> 
> 时间：2012-04-25T17:03:28.347
> 
> 标签：c++, memory, memory-management, memory-leaks

我正在尝试让一个 c++ 程序打印出它自己的内存占用。

什么是打印出 C++ 程序当前正在使用的内存 KB 的好方法？

我需要它用于 Linux 和 Windows ......所以一些独立于平台的东西......

谢谢你，女士

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T17:09:56.483

我不认为有这样做的多平台方式。但是你可以使用宏来做到这一点：

```
#ifdef __GCC__
//linux code
#else 
//windows code
#endif 
```

这是windows方法的链接：

[如何在 C++ 中获取 Windows 下的内存使用情况](https://stackoverflow.com/questions/282194/how-to-get-memory-usage-under-windows-in-c)

一个用于linux方法：

[如何在 C++ 中获取运行时的内存使用情况？](https://stackoverflow.com/questions/669438/how-to-get-memory-usage-at-run-time-in-c)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T17:15:11.623

查看它是如何在 LLVM 中实现的：

[对于 Unix](http://llvm.org/viewvc/llvm-project/llvm/trunk/lib/Support/Unix/Process.inc?revision=154805)

[对于 Windows](http://llvm.org/viewvc/llvm-project/llvm/trunk/lib/Support/Windows/Process.inc?revision=154805)

相关功能是`GetTotalMemoryUsage()`。

# ios - 音频无法在所有 iOS 设备上播放

> ID：10320424
> 
> 赞同：0
> 
> 时间：2012-04-25T17:04:08.203
> 
> 标签：ios, ipad, audio, xcode4, avfoundation

我有一个 xcode (4.3.2) 项目，我正在尝试播放音频。我有两台 iPad2 设备要测试。两者都运行 iOS 5.1 (9B176)，虽然一个是 3G 而一个不是。声音在模拟器和无 3G iPad 中播放，但我无法在 3G 设备上播放音频。

音频适用于我在设备上的程序。我播放声音的方法如下

```
-(void) playSound {
  NSString* filePath = [[NSBundle mainBundle] pathForResource:@"gbm_menu_music"   
                                                       ofType:@"m4a"];
  NSURL *soundURL = [NSURL fileURLWithPath:filePath];
  avPlayer = [[AVPlayer alloc] initWithURL:soundURL];
  [avPlayer play];
} 
```

我打电话来的

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T21:31:43.287

这似乎是设备本身特有的问题。在 iPad 上的“设置”中的“通用”下，“使用侧边开关到：”标题下，设备被设置为“锁定旋转”。将其更改为“静音”可以解决问题。将其切换回“锁定旋转”也很好。

答案在： [https ://devforums.apple.com/message/610297#610297](https://devforums.apple.com/message/610297#610297)

# mysql - Django ORM 数据库失败

> ID：10320425
> 
> 赞同：0
> 
> 时间：2012-04-25T17:04:10.203
> 
> 标签：mysql, django, orm

我想用 Django ORM 调用数据库。我有这个问题：

```
 *@*:~/standAlone$ python manage.py sql MyApp
    Traceback (most recent call last):
      File "manage.py", line 10, in <module>
        execute_from_command_line(sys.argv)
      File "/home/*/django/core/management/__init__.py", line 443, in execute_fr                                                                                        om_command_line
        utility.execute()
      File "/home/*/django/core/management/__init__.py", line 382, in execute
        self.fetch_command(subcommand).run_from_argv(self.argv)
      File "/home/*/django/core/management/__init__.py", line 261, in fetch_comm                                                                                        and
        klass = load_command_class(app_name, subcommand)
      File "/home/*/django/core/management/__init__.py", line 69, in load_comman                                                                                        d_class
        module = import_module('%s.management.commands.%s' % (app_name, name))
      File "/home/*/django/utils/importlib.py", line 35, in import_module
        __import__(name)
      File "/home/*/django/core/management/commands/sql.py", line 4, in <module>
        from django.core.management.sql import sql_create
      File "/home/*/django/core/management/sql.py", line 6, in <module>
        from django.db import models
      File "/home/*/django/db/__init__.py", line 11, in <module>
        if DEFAULT_DB_ALIAS not in settings.DATABASES:
      File "/home/*/django/utils/functional.py", line 184, in inner
        self._setup()
      File "/home/*/django/conf/__init__.py", line 42, in _setup
        self._wrapped = Settings(settings_module)
      File "/home/*/django/conf/__init__.py", line 95, in __init__
        raise ImportError("Could not import settings '%s' (Is it on sys.path?): %s"                                                                                         % (self.SETTINGS_MODULE, e))
    ImportError: Could not import settings '{{ project_name }}.settings' (Is it on s 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T20:05:53.067

这是`{{ project_name }}.settings`您复制/粘贴代码方式的产物吗？还是`{{ project_name }}`真的在您的 manage.py 文件中？这将解释错误。可能是使用某些工具生成项目后遗留下来的？

或者，您的 django 设置环境变量设置为 (django < 1.4) 是什么。或者，你的 manage.py 中的相应`os.environ['...']`设置是什么（如果你使用 django 1.4）？

# java - Android如何识别GS1 DataBar条码？

> ID：10320427
> 
> 赞同：0
> 
> 时间：2012-04-25T17:04:14.947
> 
> 标签：java, android, barcode-scanner

我正在寻找一种从 Android 应用程序读取[GS1 DataBar样式条码的方法。](http://en.wikipedia.org/wiki/GS1_DataBar)有人试过吗？是否有任何开源条码扫描器项目可以用来读取 GS1 条码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T17:11:21.697

是的

[http://code.google.com/p/zxing/](http://code.google.com/p/zxing/)

这将扫描 GS1 代码，但 GS1 不是条形码格式，而是编码到条形码中的数字格式。处理这些数字的含义超出了 zxing 的范围。

[http://helpdesk.gs1.org/ArticleDetails.aspx?id=d5ac7325-e5cc-496d-b821-c209f4718536](http://helpdesk.gs1.org/ArticleDetails.aspx?id=d5ac7325-e5cc-496d-b821-c209f4718536)

# javascript - 上一个和下一个按钮 - 展开隐藏面板

> ID：10320428
> 
> 赞同：0
> 
> 时间：2012-04-25T17:04:17.873
> 
> 标签：javascript, jquery, html, iphone

我有一个由多个面板组成的表格。每个面板都被折叠（显示：无），直到用户触摸标题/栏以取消折叠它，除了第一个。所以我的问题是，当我到达展开表单的最后一个输入时，我无法专注于下一个输入元素（在 iOS 上使用下一个按钮），因为它没有显示。我想在我的表单上的最后一个元素之后有一个不可见的元素，当它获得焦点时，它会展开折叠的面板下方。希望这是有道理的。问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T06:20:50.453

谢谢大家，但我想通了。我在表单的最后一个元素处使用了一个输入来检测焦点并折叠下一个面板。就像这里做的那样[http://www.webdeveloper.com/forum/showthread.php?t=130036](http://www.webdeveloper.com/forum/showthread.php?t=130036)

Tnks

# powershell - Powershell：删除模块不会卸载嵌套模块中定义的全局[常量]变量

> ID：10320432
> 
> 赞同：2
> 
> 时间：2012-04-25T17:04:33.940
> 
> 标签：powershell, powershell-2.0

我有一个模块清单文件 [.psd1 文件]，通过它我导入**嵌套模块**[.psm1 文件]。其中一个模块 [.psm1] 文件在全局范围内定义了一个**常量**变量，如下所示 -

```
set-variable -name DataDirectory -option Constant -value "DataSources" -scope global -description "Data Directory" 
```

当我**删除**psd1 文件的模块然后再次尝试在 Powershell ISE 的同一会话中执行**导入模块**时，我收到以下错误 -

```
+ set-variable <<<<  -name DataDirectory -option Constant -value "DataSources" -scope global -description "Data Directory"
    + CategoryInfo          : WriteError: (DataDirectory:String) [Set-Variable], SessionStateUnauthorizedAccessException
    + FullyQualifiedErrorId : VariableNotWritable,Microsoft.PowerShell.Commands.SetVariableCommand 
```

这意味着在嵌套模块之一中定义的变量尚未卸载。

我必须明确做一个 remove-variable 吗？我认为 remove-module 会卸载所有内容

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T18:00:00.630

`Remove-Module`将卸载模块范围内定义的所有内容。只有定义变量的模块才能删除它。卸载模块时不会删除全局变量。此外，在模块范围之外，您不能使用`Remove-Variable`. 您可以尝试的一件事是在尝试创建变量之前测试变量是否已经存在。

# sql - 由于 ORDER BY 子句，Partition By Clause 给出不同的结果

> ID：10320435
> 
> 赞同：3
> 
> 时间：2012-04-25T17:04:36.217
> 
> 标签：sql, oracle, oracle11g

我正在尝试对示例数据运行分区查询。如果我删除 ORDER BY 子句，它会给我不同的结果。不同结果的原因是什么。请检查以下链接。

[http://www.sqlfiddle.com/#!4/a0f10/5](http://www.sqlfiddle.com/#!4/a0f10/5)

```
SELECT MAX(B1.ET) OVER(PARTITION BY B1.MAS_DIV_KEY,B1.STN_KEY,B1.SBSC_GUID_KEY ORDER BY B1.ST)AS TEST_COL
FROM AM_PROGRAM_TUNING_EVENT_TMP1 B1;

SELECT MAX(B1.ET) OVER(PARTITION BY B1.MAS_DIV_KEY,B1.STN_KEY,B1.SBSC_GUID_KEY)AS TEST_COL1
FROM AM_PROGRAM_TUNING_EVENT_TMP1 B1; 
```

![在此处输入图像描述](../Images/8c06404666c0965a8af46d5f48ef6485.png)

![在此处输入图像描述](../Images/9ef9da7aef2a80480ab391f7acd8b836.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T17:45:19.337

当您在 OVER() 子句中对通常对排序不敏感的聚合（最小值、最大值、标准差等）进行排序时，它将成为一个运行小计。有关更彻底的治疗，请参阅 Justin Cave 对以下问题的回答。

[Oracle MIN 作为分析函数 - ORDER BY 的奇怪行为？](https://stackoverflow.com/questions/7393974/oracle-min-as-analytic-function-odd-behavior-with-order-by)

**编辑**

参考这里的sqlfiddle：

[http://www.sqlfiddle.com/#!4/a0f10/33](http://www.sqlfiddle.com/#!4/a0f10/33)

第一个查询：

```
SELECT B1.ST
  , B1.ET
  , MAX(B1.ET) 
    OVER(PARTITION BY B1.MAS_DIV_KEY
             ,B1.STN_KEY
             ,B1.SBSC_GUID_KEY 
         ORDER BY B1.ST
         ) AS TEST_COL
FROM AM_PROGRAM_TUNING_EVENT_TMP1 B1
ORDER BY B1.ST; 
```

...返回

```
ST                            ET                            TEST_COL
March, 28 2012 11:00:00-0700  March, 28 2012 11:05:00-0700  March, 28 2012 11:05:00-0700
March, 28 2012 11:03:00-0700  March, 28 2012 11:15:00-0700  March, 28 2012 11:50:00-0700
March, 28 2012 11:03:00-0700  March, 28 2012 11:50:00-0700  March, 28 2012 11:50:00-0700
March, 28 2012 11:10:00-0700  March, 28 2012 11:30:00-0700  March, 28 2012 11:50:00-0700
March, 28 2012 11:20:00-0700  March, 28 2012 11:50:00-0700  March, 28 2012 11:50:00-0700 
```

所以让我们分解一下……第一行是一个不同的 ST，所以到那一点的 MAX 就是该行中的任何内容。下一行，ST 不是唯一的。因此，截至该点的所有行的 MAX 不是 11:15，而是 ST 11:03 的两行的 11:50。最后两行在 11:50 之后永远不会有 ET，所以这就是我们为所有剩余行显示的内容。我们在 OVER 子句中使用了 ORDER BY，这就是我们告诉 Oracle 要做的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T18:31:28.180

[用于分析功能的](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions001.htm#i97640)Oracle文档说：

```
*If you omit the windowing_clause entirely, then the default is RANGE BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW.* 
```

如果您了解*RANGE*的工作原理，那么您应该清楚为什么会看到这样的结果。

# c# - 元组上的 C# containskey

> ID：10320439
> 
> 赞同：1
> 
> 时间：2012-04-25T17:04:45.303
> 
> 标签：c#, class, dictionary

我有一个字典，它包含一个元组函数和一个 int

```
Dictionary<Tuple<string,string>, int> fullNames = new Dictionary<Tuple<string,string>, int>(); 
```

Tuple 类定义为

```
public class Tuple<T, T2> 
{ 
    public Tuple(T first, T2 second) 
    { 
        First = first; 
        Second = second; 
    } 
    public T First { get; set; } 
    public T2 Second { get; set; } 

} 
```

我想这样使用 Containskey 函数

```
if (fullNames.ContainsKey(Tuple<"firstname","lastname">)) 
```

但我收到一个过载错误。有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T17:08:35.547

您提供的代码无效，因为您试图在实际对象应该存在的地方提供类型定义（并且类型定义也无效，因为字符串实际上不是`System.String`泛型期望的类型）。如果元组是字典的键值，那么你可以这样做：

```
if(fullNames.ContainsKey(new Tuple<string, string>("firstname", "lastname"))) 
```

但是您可能会遇到引用相等问题，因为在内存中创建的具有相同属性的两个元组不一定是同一个对象。这样做会更好：

```
Tuple<string, string> testTuple = new Tuple<string, string>("firstname", "lastname");
if(fullNames.Keys.Any(x => x.First == testTuple.First && x.Second == testTuple.Second)) 
```

这将告诉您是否存在共享相同属性数据的密钥。然后访问该元素将同样复杂。

编辑：长话短说，如果您打算为您的密钥使用引用类型，您需要确保您的对象实现`Equals`并`GetHashCode`以正确识别内存中两个独立实例的方式相同。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-25T17:08:47.687

```
if (fullNames.ContainsKey(new Tuple<string, string> ("firstname", "lastname")))
{ /* do stuff */ } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-25T17:09:47.497

为了`Tuple`在 Dictionary<> 中使用您的 as 键，您需要正确实现方法`GetHashCode`和`Equals`：

```
public class Tuple<T, T2> 
{ 
    public Tuple(T first, T2 second) 
    { 
        First = first; 
        Second = second; 
    } 
    public T First { get; set; } 
    public T2 Second { get; set; }

    public override int GetHashCode()
    {
      return First.GetHashCode() ^ Second.GetHashCode();
    }

    public override Equals(object other)
    {
       Tuple<T, T2> t = other as Tuple<T, T2>;
       return t != null && t.First.Equals(First) && t.Second.Equals(Second);
    }

} 
```

否则，通过引用完成密钥相等检查。具有这样的效果`new Tuple("A", "B") != new Tuple("A", "B")`。

有关哈希码生成的更多信息： [覆盖 System.Object.GetHashCode 的最佳算法是什么？](https://stackoverflow.com/q/263400/181108)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-25T17:09:08.780

.Net 4.0 有一个`Tuple`类型，它适用于您的情况，因为该`Equal`方法被重载以使用`Equal`您的类型中的 。

```
Dictionary<Tuple<string, string>, int> fullNames = 
    new Dictionary<Tuple<string, string>, int>();
fullNames.Add(new Tuple<string, string>("firstname", "lastname"), 1);
Console.WriteLine(fullNames.ContainsKey(
    new Tuple<string, string>("firstname","lastname"))); //True 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-25T17:08:47.060

```
Tuple<type,type> tuple = new Tuple("firsdtname", "lastname") 
```

您已编写代码来创建未知类型的元组实例。

# atk4 - 默认where子句，记录查看限制

> ID：10320442
> 
> 赞同：1
> 
> 时间：2012-04-25T17:04:57.657
> 
> 标签：atk4

在许多应用程序中，用户只能根据不同的事物（例如状态、角色、工作流）查看表中的某些记录……有没有办法在模型级别指定始终应用的 where 子句使用模型的任何地方。或者使用 atk 的最佳实践是什么？

例如，你做一个项目管理应用程序。您希望用户只看到分配给他或她的项目，并且在任何地方，在记录时间、创建缺陷等时......他/她只能看到那些项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T07:25:06.687

这取决于您希望如何设计您的应用程序。约束是通过使用 `addCondition`or来施加的，`setMasterField`如果你把这些约束放在模型初始化中，你会得到你想要的。您可以设计一个基本模型来访问所有（出于管理目的）并在前端应用程序中使用一个或多个具有 init 约束的子类。这是确保模型仅限于数据的特定部分的常用方法。

# ruby-on-rails - 带有歌曲的数据库建模播放列表

> ID：10320443
> 
> 赞同：2
> 
> 时间：2012-04-25T17:04:59.430
> 
> 标签：ruby-on-rails

我试图弄清楚为 a`Playlist`和设置模型的逻辑`Song`。

到目前为止，我有：

`User has_many :playlists, has_many :songs`

`Playlist belongs_to :user, has_many :songs`

`Song belongs_to :user`

我不确定我应该如何关联一首歌曲可以属于许多播放列表。

我是要`has_and_belongs_to_many :playlists`建立一个连接表还是建立一个`has_many :through`关联？

您可以仅对一个模型进行 HABTM 关联，​​还是必须在您关联的两个模型上声明它？在模型上建立`has_and_belongs_to_many :songs`关联听起来不正确。`Playlist`

`User`和之间的关系`Song`很好，我只是想实现`Playlist`. 当然，歌曲不必属于播放列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T17:08:24.880

通常会有一个具有以下结构的表：

```
unique_id song_id playlist_id 
```

这允许任意数量的歌曲属于任意数量的播放列表。unique_id 仅适用于新表中的行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T09:00:41.137

虽然 HABTM 完全可以工作，但我认为您会想要使用 has_many :through，因为您很可能想要在列表/歌曲关系模型中添加一些额外的信息。例如，歌曲位置。

就像是：

```
List
  belongs_to :user
  has_many :relationships
  has_many :songs, :through => relationships

Song
  belongs_to :user
  has_many :relationships
  has_many lists, :through => :relationships

Relationship
  belongs_to :song
  belongs_to :list 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T15:49:43.777

这个怎么样。

```
User:
  has_many :lists 
  has_many :songs

List: 
  belongs_to :user
  has_and_belongs_to_many :songs

Song
  belongs_to :user
  has_and_belongs_to_many :lists 
```

# download - 下载动态创建的 Flash

> ID：10320448
> 
> 赞同：0
> 
> 时间：2012-04-25T17:05:31.837
> 
> 标签：download, flash

有没有办法下载动态创建的 Flash (SWF) 文件？我想获取它们并转换为 PNG。（这可以通过例如 swfrender 来完成。）

例如，当将我的网络浏览器指向[http://flashserver.company.com/statsgraph.jsp?data=2012-04（URL](http://flashserver.company.com/statsgraph.jsp?data=2012-04)完全虚构）时，该服务器上的 JSP 脚本会创建一个统计图。但这是即时完成的，因此没有可以下载的 SWF**文件**（例如使用 wget）。

我可以从浏览器显示的内容中截取屏幕截图，但我更喜欢使用**服务器端**（shell 或 PHP）脚本自动执行此操作，因为每月需要下载大约几十个图表。BWT，我打算做的是完全合法的。:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T21:06:03.723

在服务器端呈现 SWF 不太可能而且过于复杂。SWF 本身可能不包含任何数据，无论如何，它可能只是显示它。

您需要使用 Firebug 或类似工具来挖掘 SWF 数据源并保存该数据集而不是 SWF。[然后，您可以使用jpGraph](http://jpgraph.net/)或类似的工具从该数据集中创建自己的图像图。

# c# - 如何在没有任何调试器的情况下在 Ubuntu 上调试 Mono 中的分段错误？

> ID：10320450
> 
> 赞同：3
> 
> 时间：2012-04-25T17:05:41.710
> 
> 标签：c#, mono, segmentation-fault

我有一个应用程序，我最近拆分为在单独的进程中运行，这些进程通过本地套接字相互通信。我将它分开是为了提高稳定性，因为核心“观察者”进程可以检测到故障并重新启动受影响的子进程。

但是，现在我的观察者进程经常崩溃，只显示“分段错误”消息。我已经在 try/catch 块中包围了所有线程操作，以尝试转储任何输出，但我仍然得到相同的结果。

我一直无法让调试器在 MonoDevelop 中工作（所以如果没有这些鬼问题，开发已经够困难了）。

Mono 不应该在托管环境中以防止此类问题吗？有什么办法可以缩小问题的根源吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-26T00:09:44.983

必须 (1) 使用 gdb 调试分段错误。要使用 gdb 调试单声道，您首先需要阅读[此](http://www.mono-project.com/Debugging#Debugging_with_GDB).

完成后，启动程序，运行`ps auxf`以查找程序的 pid，然后执行：

`gdb program PID`

这会将 gdb 附加到您的程序中。您应该看到一个 gdb 提示：

```
$ (gdb) 
```

执行以下操作（来自您现在应该已经阅读的链接）：

```
$ (gdb) handle SIGXCPU SIG33 SIG35 SIGPWR nostop noprint
$ (gdb) continue 
```

现在等到您的程序停止响应。当这种情况发生时，返回 gdb，你会发现你的程序已经停止在分段错误 (SIGSEGV) 处，并且你应该能够获得有关崩溃的更多信息。这尤其有用：

```
$ (gdb) thread apply all backtrace 
```

这将显示所有线程的堆栈跟踪。

(1) 您还可以使用更粗暴的方式通过调用 Console.WriteLine 来散布您的代码。当一切都失败时，这是你最后的手段:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T18:01:34.973

Mono 是一个托管环境，这让你的问题对我来说真的很奇怪。在什么情况下，您会以实际导致段错误的方式处理内存？你有任何标记的代码部分`unsafe`吗？如果你这样做，我会先看看那里。否则，有一种方法可以将调试器附加到已经运行的进程。如果您不使用 Monodevelop 进行调试，我会尝试这样做。

我想得越多，如果您自己从不进行任何内存操作，那么段错误就不会出现在您的代码中。它可能在运行时，如果是这样，try/catchs 不会帮助你。

我的建议是充分利用文本和/或控制台日志记录，并逐行详细查看正在发生的事情。或者跳进视觉工作室并做一些跟踪。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-27T17:44:42.477

好吧，这一定是我的套接字线程的问题。我切换到使用 Begin/End 函数而不是自己处理线程并解决了这个问题。

# image - 图像分析和检测未分析区域

> ID：10320456
> 
> 赞同：0
> 
> 时间：2012-04-25T17:06:12.503
> 
> 标签：image, canvas, analysis

所以这里有一个问题和疑问：

我正在分析 HTML5 Canvas 上的文档页面并检测某些功能，例如框、标签、文本块、图像、表格等。因为 Canvas 的像素读/写速度很慢，并且图像需要永远是高分辨率的精度例如：1500 x 2500，我无法分析每个像素，更不用说多次通过了。

我的算法做了一些随机像素戳，并做了一些最小的分析，以查找是否有可用的边界框进行进一步处理以及需要完成的处理类型；某些部分可能会发送到服务器，例如 OCR。

随后的每一次随机戳都会检查越来越多的成功找到的边界框，然后戳到其他地方，直到进入未知水域。该技术出奇地简单和有效，但这会导致大量额外的随机戳，并且如果没有大量戳数（1% 的区域）就无法提供一致的结果，即使这样它也会间歇性地遗漏一些部分。

最好是实现一些空间分析算法，它可以告诉我未戳区域在所有边界框之外的位置，这样我就可以将我的 x/y 随机坐标选择限制在那里。它应该会显着提高功效和速度。

我对完整分析的文档页面的典型框数是 < 200。

公共领域/维基中是否存在任何可以在 JavaScript 中相当快地做到这一点的算法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T20:05:32.337

我希望可能会有所帮助的一些想法。一个广泛的想法，它仍然需要一些工作！

假设没有边界框重叠并且一次找到一个。

以下将变成对文档的递归过程“检查”，当文档太小而无法继续时，该过程会停止。

检查（文件）

如果（文档是根文档）{

在文档中查找边界框

将文档水平拆分为 4 个新文档

对于每个新文档检查（新文档）

}

别的 {

在文档中查找边界框

if（边界框完全在文档内）{

将文档水平拆分为 4 个新文档

对于每个新文档检查（新文档）

}

别的 {

将父文档垂直拆分为 4

使用找到的关于边界框位置的信息

检查（适当的垂直文件）

对于其他每个垂直文档检查（文档）

}

以下是一个 pdf 文件来帮助说明这个想法。

[边界框](https://docs.google.com/viewer?a=v&pid=sites&srcid=ZGVmYXVsdGRvbWFpbnxqa2dhZGdldHN0b3JlfGd4OjE1NGRmNjc5OWRkNDhiY2E&pli=1)

# java - 如何通过正则表达式替换所有出现的 ${...}

> ID：10320458
> 
> 赞同：1
> 
> 时间：2012-04-25T17:06:17.833
> 
> 标签：java, html, regex

我有未受保护的具有 XSS 漏洞的 JSP。我需要将所有`${...}`不在*标签*内的字符串替换`<c:out value="${...}" />`为`<c:out value="${...}" />`.

例如，

```
<select>
   <option value="${foo}">label</option>
</select>    
${bar}
<c:out value="${message}" /> 
```

需要正则表达式替换为以下内容：

```
<select>
   <option value="<c:out value="${foo}" />">label</option>
</select>    
<c:out value="${bar}" />
<c:out value="${message}" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T21:37:20.590

听起来您的起始文本中混合了`<c:out value="${...}" />`和`${...}`。如果是这种情况，你可以尝试这样的事情：

```
str = str.replaceAll(
             "(?:<c:out\\s+value=\")?\\$\\{([^}]*)\\}(?:\"\\s*/>)?", 
             "<c:out value=\"\\${$1}\" />"
      ); 
```

我对我的 Java 正则表达式语法有点生疏，所以请检查我的反斜杠是否正确。否则，我认为这会奏效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T21:37:22.897

正则表达式不是需要上下文时使用的工具。`<c:out value="${...}" />`但是，通过首先替换to的所有实例，`${...}`然后替换所有`${...}`to ，分两步完成就足够简单了`<c:out value="${...}" />`。

常用表达

```
\${[^}]+}
<c:out value="\${[^}]+}" /> 
```

# php - 最佳实践/结构 PHP AJAX 调用

> ID：10320464
> 
> 赞同：0
> 
> 时间：2012-04-25T17:06:52.100
> 
> 标签：php, ajax

这是一个最佳实践/结构问题：

我已经构建了一个迷你 cms 并使用 AJAX 处理对数据库的操作（例如 a/e/d 项目）。我目前进行此设置的方式是一个带有`case`调用的 process.php 文件，在 JQ AJAX 调用中，我将操作定义如下：

```
$.post("inc/process.php", {page: "add_page", form:
$('#form').serialize(),}, function(data){...}); 
```

我的问题是，`case`在单个 process.php 文件中使用和分组这些项目是解决此问题的最佳方法，还是应该使用类和函数来构建它以调用各种操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T17:09:05.873

你这样做是正确的，因为代码是可重用的，因此更容易更改。但是，如果数据转换变得更大一些，您可能需要考虑更多地分离事物。

# c++ - Triclops Stereo API 可以用来处理离线图像吗？

> ID：10320467
> 
> 赞同：2
> 
> 时间：2012-04-25T17:07:07.153
> 
> 标签：c++, image-processing, opencv, stereo-3d

还是完全依赖于 Bumblebee（或任何其他点灰色成像传感器）？我正在尝试链接 Bumblebee 2 立体设备附带的立体处理 API 来处理一些离线图像。看来，triclops 立体函数需要一些上下文标志和校准文件，格式为 input.cal 和 input.ppm（即包含两个立体校正图像的一张图像以某种方式模糊和重叠）。如何从其他离线图像中获取此 input.ppm 文件以仍然能够使用 triclops stereo API。校准文件input.cal怎么样，能不能得到与离线图像一致的，如何得到？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T12:43:20.817

是的，Triclops API 可用于处理离线图像。您指出的要求是来自相机和图像文件的校准文件（.cal）。校准文件最好在图像捕获时提取，但根据我的经验，除非您更改设置，否则它始终保持不变。为了满足 Triclops API 的输入，您还需要使用 Point Gray Fly Capture API，因为它提供了图像转换的方法。我的项目正在做你所要求的所有事情。我在现场捕捉原始像素交错图像，然后使用 FlyCapture 和 Triclops API 处理它们，以创建校正和视差图像以及来自立体对的点云。

查看 Point Grey 样本及其 API 文档，了解如何获取校准文件。本质上，方法是这样`flycaptureGetCalibrationFileFromCamera( context, &szCalFile );` 的：上下文是“相机上下文”

您的初始图像文件格式将改变转换方法，但在我的例子中，这是我使用 C++ 从原始到立体声的转换。我正在使用 Bumblebee XB3 彩色相机，原始图像大小为 1280x960，并从外部两个相机抓取图像：

```
 // Read raw file 
   //pFile = fopen ( "FlyCap.raw" , "rb" );
   pFile = fopen ( argv[1] , "rb" );
   if (pFile==NULL) {fputs ("File error",stderr); exit (1);}

   // Set raw file size 
   ISize = (numCols*numRows*bytesPerPixel);

   // allocate memory to contain the whole file:
   buffer = (unsigned char*) malloc (sizeof(char)*ISize);
   if (buffer == NULL) {fputs ("Memory error",stderr); exit (2);}

   // copy the file into the buffer:
   result = fread (buffer,1,ISize,pFile);
   if (result != ISize) {fputs ("Reading error",stderr); exit (3);}

   // Create the FlyCapture Context for processing
   fe = flycaptureCreateContext( &flycapture );
   _HANDLE_FLYCAPTURE_ERROR( "flycaptureCreateContext()", fe );

   fe = flycaptureSetColorProcessingMethod(flycapture, FLYCAPTURE_HQLINEAR);
   _HANDLE_FLYCAPTURE_ERROR( "flycaptureSetColorProcessingMethod()", fe );

   fe = flycaptureSetColorTileFormat(flycapture, FLYCAPTURE_STIPPLEDFORMAT_GBRG);
   _HANDLE_FLYCAPTURE_ERROR( "flycaptureSetColorTileFormat()", fe );

   //Import the raw image in buffer into FlyCaptureImage structure
   flycaptureImage.iCols = 1280;
   flycaptureImage.iRows = 960;
   flycaptureImage.iNumImages = 2;
   flycaptureImage.bStippled = true;
   flycaptureImage.pixelFormat = FLYCAPTURE_RAW16;   
   flycaptureImage.iRowInc = 2560;
   flycaptureImage.timeStamp.ulSeconds = 100;
   flycaptureImage.timeStamp.ulMicroSeconds = 100;
   flycaptureImage.pData = buffer;

   // Create buffers for holding the color and mono images
   unsigned char* rowIntColor = 
   new unsigned char[ numCols * numRows * flycaptureImage.iNumImages * 4 ];
   unsigned char* rowIntMono = 
   new unsigned char[ numCols * numRows * flycaptureImage.iNumImages ];

   // Create a temporary FlyCaptureImage for preparing the stereo image
   FlyCaptureImage tempColorImage;
   FlyCaptureImage tempMonoImage;

   tempColorImage.pData = rowIntColor;
   tempMonoImage.pData = rowIntMono;

   // Convert the pixel interleaved raw data to row interleaved format
   fe = flycapturePrepareStereoImage( flycapture, flycaptureImage, &tempMonoImage,   &tempColorImage  );
   _HANDLE_FLYCAPTURE_ERROR( "flycapturePrepareStereoImage()", fe );

   //Save side-by-side color stereo image
   fe = flycaptureSaveImage( flycapture, &tempColorImage, stereoimg, FLYCAPTURE_FILEFORMAT_PPM );
   _HANDLE_FLYCAPTURE_ERROR( "flycaptureSaveImage()", fe );  

   printf ("Saving Stereo...\n"); 
```

请注意，到目前为止，我根本没有使用 Triclops API。的输出`flycaptureSaveImage();`是输入 Triclops 方法的内容。那时有一些选项可以处理彩色与单色。看一下他们的 Triclops API 附带的 Point Grey 示例，称为“stereoto3dpoints.cpp”，它从我离开的地方接管。我希望这能够帮到你。

# php - If, then, else regex - 如何编写条件

> ID：10320468
> 
> 赞同：2
> 
> 时间：2012-04-25T17:07:17.870
> 
> 标签：php, regex

试图捕获 name= 和 value= US 或 NONE（如果 selected="selected" 不包括在内）。鉴于以下（较大的 $page 的一部分）：

```
$page = '
<select name="country" ><option value="NONE">Select One</option>    
<option value="AE">UNITED ARAB EMIRATES</option>
<option value="GB">UNITED KINGDOM</option>
<option value="US" selected="selected">UNITED STATES</option>
<option value="UY">URUGUAY</option>
<option value="UZ">UZBEKISTAN</option>
<option value="ZW">ZIMBABWE</option></select>'; 
```

编辑 1 如果未选择任何选项，此模式将不会选择 NONE。

```
$pattern = '/select name="([a-zA-Z]*)"\s?>[\w\W]*value="([A-Z]{2,4})"(selected="selected">)?/' 
```

所以，我正在寻找一种模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T03:03:41.673

php 中 if、then、else 正则表达式的语法是：

```
(if 'selected=' found) then find pattern     | else find this pattern
  (if condition)        then regex           |   else regex
(?(?=.*selected=)value="([A-Z]+)"\s+selected=|value="(NONE)">) 
```

条件成立的`.*`必要条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T19:38:32.717

它必须是一个正则表达式吗？

我建议以这种方式拆分它：

*   匹配元素

*   tryMatch 与“选定”属性

*   根据结果​​进行 - 我不确定逻辑是什么，因为当你想要哪个值时，从你的描述中不太明白。但无论哪种方式，都应该很容易获得值或名称属性。

这种方法的好处是您正在处理 html 代码的一部分，而且它更不容易出错。

**编辑：**

顺便说一句：你怎么知道它永远不会评估为 true ？它似乎按预期工作（即匹配'select'或'select name =“country”）在这里
[http://www.pagecolumn.com/tool/pregtest.htm](http://www.pagecolumn.com/tool/pregtest.htm)

（您需要转义引号`(?(?=selected=\"selected\")select|select name=\"([a-zA-Z]*)\")`才能在此处使用它）

**编辑2**

如果是其他情况，我仍然无法为您提供帮助，但根据您的解释，我可以提出以下建议：

```
<select name="([^"]*)".*?(?!</select>)<option value="[^"]*" selected="selected"|<select name="([^"]*)"\s*>\s*<option value="([^"]*)"> 
```

*   因此，选择 tryMatch，如果失败，则仅匹配第一个选项

# php - 如何使 php Outlook.Application 工作并发送邮件？

> ID：10320470
> 
> 赞同：1
> 
> 时间：2012-04-25T17:07:20.530
> 
> 标签：php, outlook

```
if (!defined(‘olMailItem’)) define(“olMailItem”,0);
$objApp = new COM(“Outlook.Application”);
$myItem = $objApp->CreateItem(olMailItem);
$myItem->To=’xxxx@xxx.com’;
$myItem->SentOnBehalfOfName = ‘yyy@xxyyx.com’;
$myItem->Subject=”This is a test”;
$myItem->Body=”This is a Body Section now…..!”;
$myItem->Send(); 
```

我得到这个错误

> 致命错误：在 D:\NotEncrypted\xampp\htdocs\copper\system\modules\projects\index.php 第 11251 行 (!) com_exception: 错误 [0x80004004] D:\ NotEncrypted\xampp\htdocs\copper\system\modules\projects\index.php 在第 11251 行

谢谢大家的评论和帮助。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T20:40:18.327

很可能您的 Outlook 组件服务没有运行

跑

```
 Start -> run -> dcomcnfg.exe 
```

看看它是否在那里

`MAPI.Session` 如果可用，您还需要检查您的 Windows 注册表

```
 Start -> Run -> HKEY_CLASSES_ROOT  -> Outlook.Application -> MAPI.Session 
```

如果找不到，请使用本教程

[http://www.digiways.com/articles/php/outlook/](http://www.digiways.com/articles/php/outlook/)

例子

```
set_time_limit(10);

if (! defined ( "olMailItem" ))
{
    define ("olMailItem", 0 );
}

try {
    $objApp = new COM ( "Outlook.Application" ) or die ( "Cannot Load Outlook.Application" );
    $namespace = $objApp->GetNamespace("MAPI");  // or MAPI.Session
    $namespace->Logon();
    $myItem = $objApp->CreateItem ( olMailItem );
    $myItem->To = "xxxx@xxx.com";
    $myItem->SentOnBehalfOfName = "yyy@xxyyx.com";
    $myItem->Subject = "This is a test";
    $myItem->Body = "This is a Body Section now…..!";
    $myItem->Send ();

} catch ( Exception $e ) {
    var_dump ( $e->getMessage () );
    debug_print_backtrace ();
} 
```

我希望它有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-14T19:55:36.833

我刚刚从这个页面找到了另一个解决方案：[http ://forums.devshed.com/php-development-5/php-com-automating-outlook-46167.html](http://forums.devshed.com/php-development-5/php-com-automating-outlook-46167.html)

基本上 PHP 没有类似的常量`olMailList`，所以你必须通过值来引用它。因此，要使您当前的脚本正常工作，请更改此行：

```
$myItem = $objApp->CreateItem(olMailItem); 
```

到：

```
$myItem = $objApp->CreateItem(0); 
```

这对我的情况很好。

# c++ - 确定是否可以使用单个三角形扇形绘制 2d 多边形

> ID：10320475
> 
> 赞同：11
> 
> 时间：2012-04-25T17:07:57.923
> 
> 标签：c++, math, geometry, computational-geometry

起初，我认为这个问题相当于确定一个多边形是否是凸多边形，但似乎一个三角形扇形仍然可以绘制一个非凸多边形。 [考虑这个形状](http://en.wikipedia.org/wiki/File:Simple_polygon.svg)，一个非凸多边形。可以很容易地想象一些中心点区域允许用三角形扇形绘制这个多边形（尽管会有其他中心点不会）。给定一个固定的中心点，我希望能够确定定义多边形的 2d 点集是否允许用单个三角形扇形绘制它。

似乎关键是确保从中心点到任何顶点的线没有“妨碍”，这意味着顶点的其他边缘线。但是，重要的是要使其在计算上尽可能便宜，而且我不确定是否有一个很好的数学捷径可以做到这一点。

最终，我将让多边形的顶点移动，并且我需要确定允许顶点移动的“边界”，因为其余部分是固定的（也许稍后甚至允许直接的同时反应移动2 个邻居），以保持多边形能够在单个三角形扇形中绘制。但这就是未来，希望对整个多边形的测试可以分解为计算的子集，以在假设已经是凸多边形的情况下测试单个顶点的移动边界。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-25T17:25:30.067

您要找的物业是“[星形](http://en.wikipedia.org/wiki/Star-shaped_polygon)”。星形多边形是由一个点定义的，从该点可以看到整个多边形。

要测试多边形是否为星形，您可以构建整个多边形可见的区域。该区域将是一个凸集，因此您可以将它与 中的半平面相交`O(log(n))`。

这意味着您可以与边形成的半平面相交，并检查生成的可见区域在 中是否为非空`O(n log n)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T17:35:15.067

如果从锚点到每个顶点的角度沿相同方向移动，则可以将多边形绘制为三角形扇形。最简单的测试方法是检查连续顶点的叉积的点积。

它看起来像这样：

```
vector lastCross = cross_product( vector(vertex[0] - center), vector(vertex[numVerts - 1] - center) );

canBeFan = true;
for (n = 1; canBeFan && n < numVerts; ++n) {
    vector testCross = cross_product( vector(vertex[n] - center), vector(vertex[n - 1] - center) );
    if (0.0 >= dot_product(testCross, lastCross) ) {
        canBeFan = false;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T17:37:47.490

看起来所有潜在的中心点都需要位于多边形每个边缘的内侧。因此，将所有边视为半空间，并确定它们的交点是否为空。

正如@jpalecek 所说，这个术语是*星形的*。如果您的多边形是星形的，则将有一个凸多边形（在原始多边形的内部），其点可以查看原始多边形的所有边缘-相反，如果不存在这样的子多边形，则原始多边形不是星形的，你不能用三角扇画它。

确定这个子多边形基本上是[凸包](http://en.wikipedia.org/wiki/Convex_hull)问题的[双重](http://en.wikipedia.org/wiki/Dual_%28mathematics%29)应用；它可以在 中计算。`O(n log n)`

# c# - 验证连接字符串是否适用于 Sql Server 2008

> ID：10320480
> 
> 赞同：-7
> 
> 时间：2012-04-25T17:08:21.957
> 
> 标签：c#, sql-server-2008

如何验证用户输入的连接字符串是否适用于 Sql Server 2008？我正在使用 C#。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T17:12:18.060

1.  尝试连接到 SQL 服务器。出错时无效
2.  使用连接字符串生成器 ( [http://msdn.microsoft.com/de-de/library/ms254947.aspx](http://msdn.microsoft.com/de-de/library/ms254947.aspx) ) 并询问用户所需的值。也许对您的用户来说更容易一些

*编辑：*如果你想获得 SQL Server 的版本，你可以得到它，你可以`select @@version`在连接后使用。请参阅[http://msdn.microsoft.com/de-de/library/ms254947.aspx](http://msdn.microsoft.com/de-de/library/ms254947.aspx)以供参考。但是您首先需要连接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T17:12:31.213

我不知道您为什么需要验证或用户正在输入连接字符串，但您可以从下面的链接中找到 sql 2008 的连接字符串。

[http://www.connectionstrings.com/sql-server-2008](http://www.connectionstrings.com/sql-server-2008)

```
Standard Security
Data Source=myServerAddress;Initial Catalog=myDataBase;User Id=myUsername;Password=myPassword;
Use serverName\instanceName as Data Source to connect to a specific SQL Server instance.
Are you using SQL Server 2008 Express? Don't miss the server name syntax Servername\SQLEXPRESS where you substitute Servername with the name of the computer where the SQL Server Express installation resides.

COPY

Standard Security alternative syntax
This connection string produce the same result as the previous one. The reason to include it is to point out that some connection string keywords have many equivalents.
Server=myServerAddress;Database=myDataBase;User ID=myUsername;Password=myPassword;Trusted_Connection=False;

COPY

Trusted Connection
Data Source=myServerAddress;Initial Catalog=myDataBase;Integrated Security=SSPI;

COPY

Trusted Connection alternative syntax
This connection string produce the same result as the previous one. The reason to include it is to point out that some connection string keywords have many equivalents.
Server=myServerAddress;Database=myDataBase;Trusted_Connection=True;

COPY

Connecting to an SQL Server instance
The syntax of specifying the server instance in the value of the server key is the same for all connection strings for SQL Server.
Server=myServerName\theInstanceName;Database=myDataBase;Trusted_Connection=True;

COPY

Trusted Connection from a CE device
Often a Windows CE device is not authenticated and logged in to a domain. To use SSPI or trusted connection / authentication from a CE device, use this connection string.
Data Source=myServerAddress;Initial Catalog=myDataBase;Integrated Security=SSPI;User ID=myDomain\myUsername;Password=myPassword;
Note that this will only work on a CE device.
Read more about connecting to SQL Server from CE devices here 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T17:16:30.407

我不完全确定你在问什么。您能否用简单的语言（不是代码）告诉我们您将如何确定连接字符串是否适用于 SQL Server 2008？连接字符串指定服务器名称（和适当的实例）、数据库名称、凭据等。连接字符串中没有任何内容指定它的版本。

您的意思是要验证服务器是否正在运行 SQL Server 2008？您可以通过发出以下命令成功连接后执行此操作：

```
SELECT SERVERPROPERTY('ProductVersion'); 
```

一个答案：

```
 8.0.xxxx.xx = SQL Server 2000
  9.0.xxxx.xx = SQL Server 2005
 10.0.xxxx.xx = SQL Server 2008
10.50.xxxx.xx = SQL Server 2008 R2
 11.0.xxxx.xx = SQL Server 2012 
```

如果您有早期版本，祝您好运。:-)

# php - sql语句按字母顺序排列和计数

> ID：10320484
> 
> 赞同：3
> 
> 时间：2012-04-25T17:08:47.293
> 
> 标签：php, mysql, sql, database

这是我得到的 mySQL

```
id   terms    
1    a       
2    c       
3    a       
4    b       
5    b       
6    a       
7    a
8    b
9    b
10   b 
```

我想得到一个按计数排序的字母列表，如下所示

```
terms  count
a      4
b      5
c      1 
```

为此我需要什么 mySQL 语句？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T17:10:29.947

我相信这样的事情会奏效：

```
SELECT terms, COUNT( id) AS count 
    FROM table 
GROUP BY terms 
ORDER BY terms DESC 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-25T17:12:40.637

阅读：[分组（Transact-SQL）](http://msdn.microsoft.com/en-us/library/ms177673.aspx)

根据 SQL 中一个或多个列或表达式的值，将一组选定的行分组为一组汇总行。每组返回一行。SELECT 子句列表中的聚合函数提供有关每个组而不是单个行的信息。

您只需要申请`group by`子句即可获得结果

```
select terms, count (id) as count from table 
group by terms 
order by terms 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T20:29:01.200

我非常需要一家二手唱片店来按字母顺序显示库存中的艺术家，括号中是他们的数量，例如：

斯莫基·罗宾逊和奇迹 (2) | 音速青年 (2) | 勺子 (3) | 钢铁丹 (1) | 史提夫汪达 (2) | 苏菲扬史蒂文斯 (1) |

请注意，我从表“记录”中提取时使用了 SELECT DISTINCT。以下是相关的代码片段：

```
//QUERY
$arttool = mysql_query("SELECT DISTINCT * FROM records GROUP BY artist ORDER BY artist ASC");

//OUTPUT LOOP START
while($row = mysql_fetch_array($arttool)){

//CAPTURE ARTIST IN CURRENT LOOP POSITION
$current=$row['Artist'];    

//CAPTURING THE NUMBER OF ALBUMS IN STOCK BY CURRENT ARTIST
$artcount = mysql_num_rows(mysql_query("SELECT * FROM records WHERE artist = '$current'"));

//ECHO OUT. 
echo $current . "($artcount)"; 
```

我网站中的实际代码更复杂，但这是它的基本内容。希望有帮助...

# mysql - MySQL 难查询

> ID：10320486
> 
> 赞同：2
> 
> 时间：2012-04-25T17:08:57.360
> 
> 标签：mysql

我删除了我之前的问题，以便更容易理解。我正在使用这个数据库模式开发一个论坛：

```
ID:INT->PRIMARY-KEY->AUTO_INCREMENT
IDTOPIC:INT (0 if it is the "father" topic OR father's ID if it's a reply)
IDUSER:INT (ID of user who posted)
CONTENT:MEDIUMTEXT
DATE:TIMESTAMP 
```

如果没有回复，我需要按日期排序查询，仅在哪里获得最后一个线程回复（如果“我是最后一个回复的用户”，IDUSER<>$userid）或父线程主题。即使主题或回复结果，我需要打印第一个线程 IDTOPIC/IDUSER

我的理想结果应该是这样的：

```
ID:IDTOPIC:IDUSER:CONTENT:DATE:IDLASTREPLY:IDLASTUSERREPLY:LASTCONTENTREPLY:LASTDATEREPLY 
```

如果最后四个字段为 NULL，则没有问题。我需要尽可能快的查询。请帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T17:57:49.513

```
SELECT fa.ID, fa.IDTOPIC, fa.IDUSER, fa.CONTENT, fa.DATE,
  re.ID as IDLASTREPLY,
  re.IDUSER as IDLASTUSERREPLY,
  re.CONTENT as LASTCONTENTREPLY,
  re.DATE as LASTDATEREPLY,
  CASE WHEN (re.DATE is NULL) THEN fa.DATE ELSE re.DATE END as LASTUPDATE
FROM post fa
  LEFT JOIN post re ON re.ID =
    (SELECT ID FROM post WHERE IDTOPIC = fa.ID ORDER BY DATE DESC LIMIT 1)
WHERE fa.IDTOPIC = 0
ORDER BY LASTUPDATE DESC 
```

并随心所欲地订购。
但这并不是那么好的表现。我认为你可以改进你的表结构。

编辑：为 ORDER 添加 LASTUPDATE

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T23:15:55.137

不幸的是，在一些帖子之后，这个选择不太好......今天，表上总共有大约 900 条记录，当我按我的用户 ID 过滤线程时（只有 45 个不同的线程！），MySQL 需要 0.30 秒（一开始，只需要 0.04/0.05 秒......我认为恶化与我订阅的线程数成正比）这可能意味着当我订阅 300 个不同的线程时，我应该等待大约 2 秒来进行此查询。 .. 太多了。奇怪的是，如果我“限制 0,10”这个查询或获得完整查询，执行速度不会改变！这就是为什么我认为它不好......因为我想即使我限制它也必须选择整个数据。没有办法解决。这就是我设置查询的方式。有一个新的通知表，

通知表字段：id、idcontent、userid

```
SELECT 
    CASE WHEN (re.id is NULL) THEN fa.id ELSE re.id END AS id, 
    fa.id as idtopic, 
    CASE WHEN (re.userid is NULL) THEN fa.userid ELSE re.userid END AS userid, 
    CASE WHEN (re.content is NULL) THEN fa.content ELSE re.content END AS content, 
    n.notify, 
    u.id as reuserid, u.name, u.surname, u.photo, 
    CASE WHEN (re.date is NULL) THEN unix_timestamp(fa.date) ELSE unix_timestamp(re.date) END AS LASTUPDATE 
FROM notifications AS n 
LEFT JOIN post AS fa 
    ON fa.id = n.idcontent 
LEFT JOIN post AS re 
    ON re.id=(SELECT ID FROM post WHERE IDTOPIC = fa.ID AND userid <> $USERID ORDER BY DATE DESC LIMIT 1) 
LEFT JOIN users AS u 
    ON u.id = ( CASE WHEN (re.userid is NULL) THEN fa.userid ELSE re.userid END ) 
WHERE 
    n.userid = $USERID 
    AND NOT (fa.userid = $USERID AND re.userid = $USERID) 
```

# objective-c - 表视图数据的 Min/Max 方法

> ID：10320487
> 
> 赞同：0
> 
> 时间：2012-04-25T17:09:02.550
> 
> 标签：objective-c, xcode4.3

在我的表格视图上，在搜索后填充它之前，我想在表格视图顶部的文本字段中添加当前搜索的最小距离和最大距离。我似乎找不到确定这些参数的方法，我的搜索结果会从 2 到 50 不等。我不想在循环中只比较从当前位置到每个项目的距离的hackcish方式。任何人都可以指出一个干净的方法来确定可变数组中元素的最小值/最大值吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T17:23:45.280

如果您需要数组中每个元素的一些值，那么您将不得不以某种方式迭代数组。循环没有错。*尽管如此，除了显式*循环之外，还有其他方法可以遍历数组。或许[`-[NSArray enumerateObjectsUsingBlock:]`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/doc/uid/20000137-SW19)会让你开心：

```
__block CGFloat minDistance = INF;
__block CGFloat maxDistance = -INF;
[locationsArray enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop){
    CGFloat dist = // calculate distance from obj to current location
    if( dist < minDistance ){
        minDistance = dist;
    }
    if( dist > maxDistance ){
        maxDistance = dist;
    }
 }]; 
```

枚举数组的其他选项可以在 Collections Programming Topics 文档的[Enumeration](http://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/Collections/Articles/Enumerators.html#//apple_ref/doc/uid/20000135-BBCFABCB)下找到。

您还应该查看[Key-Value Collection Operators](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/CollectionOperators.html)：`[locationsArray valueForKey:@"@max.distance"]`将提取`distance`数组中任何成员所持有的最大值。这可能看起来正是您正在寻找的东西，但有两件事需要注意。首先，对象必须*已经具有*该`distance`属性——作为此过程的一部分，您不能进行任何计算。其次，该属性必须是一个对象（在这种情况下，可能是一个`NSNumber`）而不是一个原始类型，例如`CGFloat`，因为`valueForKey:`它将发送`compare:`到每个属性访问的结果。

# c# - 使用 visio 使用 c# 自动绘制图表 - 无法设置自定义属性

> ID：10320489
> 
> 赞同：1
> 
> 时间：2012-04-25T17:09:06.123
> 
> 标签：c#, visio

我有从数据库中获取的数据，我想使用这些值来填充 visio 图表上形状的属性。我打开自己的模板，并毫无问题地在工作表上显示形状。我的服务器图标具有自定义属性，例如“制造商”、“网络”等。当我打印出每个形状的自定义属性时，我得到以下输出：

形状 = 服务器标签 = 制造商值 = 0

等等。这都是正确的，因为我还没有设置任何值。当我去设置值时，使用 Visio 2003 SDK (SettingACustomProperty.cs) 中的代码我得到一个错误，“这个形状没有通用名称为制造商的自定义属性” - 但清楚地打印出自定义属性显示它确实如此（就像在 Visio 中绘制形状后查看 shapeSheet 一样）。我已经插入了我如何调用 SettingACustomProperty。有人可以帮我弄清楚我需要做什么才能将值插入到形状上的自定义属性中吗？

这是我调用代码的方式（出于测试目的，我自己插入了字符串）：

```
 string keyword = "Manufacturer";
  string manuValue = "\"Dell\"";

  string three = SettingACustomProperty.SetCustomPropertyFormula(visioStarShape, keyword, manuValue); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T05:34:20.040

Visio 自定义属性具有三个不同的概念，可以视为一个名称。

第一个是标签。这是您通常在用户界面中看到的内容，并且存储在 shapesheet 的自定义属性行中的标签单元格中。标签通常不用于以编程方式访问自定义属性。

第二个是行名。这是您在查看 shapesheet 中的自定义属性行时将看到的名称。它会出现在行中的其他单元格之前，并以“Prop”为前缀。这是使用自定义属性行的[Name 属性](http://msdn.microsoft.com/en-us/library/ff767719.aspx)通过自动机访问的。

最后的行名称是通用名称。通用名称的存在主要是为了允许代码通过名称查找特定的 Visio 对象，即使在对象本地化时更改了名称，即名称已被翻译。可以使用自定义属性行的[NameU 属性访问通用名称。](http://msdn.microsoft.com/en-us/library/ff766420.aspx)要了解有关通用名称的更多信息，请参阅[使用通用名称和语法本地化您的 Visio 解决方案](http://msdn.microsoft.com/en-us/library/aa168460%28v=office.11%29.aspx)

当您调用 SetCustomPropertyFormula 时，第二个参数必须是通用名称。这是因为在内部 SetCustomPropertyFormula 使用[get_CellsU](http://msdn.microsoft.com/en-us/library/ff768120.aspx)，它使用行的通用名称查找自定义属性单元格。我怀疑您在调用 SetCustomPropertyFormula 时使用的是标签或行名称，而不是通用名称。

如果您使用的是标签，则需要切换到使用通用名称。

如果您使用的是该名称，则它不再与通用名称匹配。当您重命名行时，可能会发生这种情况。您可以找出通用名称，然后在您的代码中使用它。VBA 即时窗口通常是获取行的 NameU 属性的简单方法。或者，您可以更新形状或实例化它的母版以将 NameU 属性设置为等于 Name 属性，然后您将避免这种混淆（直到您重命名该行）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-04T10:12:46.840

凯西：你可以找出你需要使用的名字

```
Debug.Print visioStarShape.Section(visSectionProp).Row(0).NameU 
```

添加“道具”。在此名称之前在您的代码中使用它。

或者，选择形状后，您可以通过单击开发人员工具箱中的此按钮来显示 ShapeSheet

![显示 ShapeSheet 按钮](../Images/7dfdebdd49b2b4f80ab9db0572eb2437.png)

你会看到这样的东西。查找自定义属性部分，您可以在其中看到属性的标签和名称：

![在此处输入图像描述](../Images/62c78e869d9d94adf691ef0bd90dfb7c.png)

然后，您使用此名称来引用属性（即您的关键字字符串）。

```
keyword = """Prop.CustProp1"""

or....

keyword = "\"Prop.CustProp1"\" 
```

不过，您不需要 SettingACustomProperty.cs 文件，因为您可以从 VBA 代码中引用形状工作表中的所有单元格。您可以在其中获取或设置公式。

看看这是否符合您的目的。这是我刚刚在 Office 技术中心发布的答案：http: [//social.technet.microsoft.com/Forums/office/en-US/c837db4c-b90c-4500-b8ae-8d36efca44b6/can-i-apply-custom -property-sets-from-vba-in-visio-2003](http://social.technet.microsoft.com/Forums/office/en-US/c837db4c-b90c-4500-b8ae-8d36efca44b6/can-i-apply-custom-property-sets-from-vba-in-visio-2003)

由于我的系统是西班牙文，我通过猜测更改了模板和大师的名称。但重要的方法是 AddSection、AddNamedRow，尤其是对你来说 .Formula one（FormulaForce 是相同的，但它甚至适用于受 GUARD 函数保护的单元格）。

祝你好运。我爱上了 Visio 2003（但我希望我的公司购买了 Visio 2010）：D

```
'Set the value for the property: vsoShape is an object referencing the shape
vsoShape.Cells("Prop.CustProp1").FormulaU = """Hello"""
vsoShape.Cells("Prop.CustProp2").FormulaU = 2556 
```

CustProp1 的类型是字符串，CustProp2 的类型是数字。

问候，

# c# - 尝试使用路径字符串获取 Win32_BIOS 版本

> ID：10320493
> 
> 赞同：3
> 
> 时间：2012-04-25T17:09:21.307
> 
> 标签：c#, wmi

我正在绞尽脑汁思考如何做到这一点。大约 2 个月前，我发现了一个链接，该链接显示了如何从 wmi 调用中获取单个元素。

```
class Sample
{
    public static int Main(string[] args)
    {
        ManagementObject o =
            new ManagementObject("Win32_Service.Name='Alerter'");

        //or with a full path :

        ManagementObject mObj =
            new ManagementObject(
            "\\\\MyServer\\root\\MyApp:MyClass.Key='abc'");

        return 0;
    }
} 
```

我认为这很棒，因为它返回结果比通过 WMI 进行完整搜索以获得 1 个属性要快得多。我摆弄它并让这段代码与 Win32_ComputerSystem 一起工作，我想我什至让它与 Win32_DiskDrive 和 BaseBoard 一起工作，但我不记得我的头顶，因为我找不到那段特定的代码. 所以现在我正试图让它与 Win32_BIOS 一起工作并继续罢工。我似乎找不到“关键”属性，因此它会返回有效结果。

我尝试了以下路径无济于事。

```
\\.\root\cimv2:Win32_BIOS.SoftwareElementState=3
\\.\root\cimv2:Win32_BIOS.TargetOperatingSystem=0
\\.\root\cimv2:Win32_BIOS.SoftwareElementState=3,TargetOperatingSystem=0 
```

我在 Win32_BIOS 类中找到的 2 个键是名称和版本。但版本是我需要的。由于我试图在不同的计算机上获取它，因此我不能只是硬编码一个名称，也找不到另一种获取 BIOS 名称的方法。所以我想我有点卡住了。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T21:52:28.957

您正在查找的 WMI 对象路径由 Name、SoftwareElementID、SoftwareElementState、TargetOperatingSystem 和 Version 属性构成。

看起来像这样

```
Win32_BIOS.Name="Ver 1.00 BIOS A05 PARTTBL",SoftwareElementID="Ver 1.00 BIOS A05 PARTTBL",SoftwareElementState=3,TargetOperatingSystem=0,Version="DELL   - 6040000" 
```

如果您想知道具体实例的对象路径，您可以使用[Wmi delphi code creator](http://code.google.com/p/wmi-delphi-code-creator/)之类的工具。

![在此处输入图像描述](../Images/848d19a53058ec4f21677500b2a76cb5.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T19:06:34.100

我们使用 WMI 来枚举 LAN 中的网络接口信息。这是一组精简的代码，可以满足您的需求。您可以看到替换计算机名称很容易。此外，如果您通过 LAN 查询不同的计算机，则需要在 ConnectionOptions 对象中提供凭据。

```
String path = @"\\{0}\ROOT\CIMV2";
String BiosVersion = String.Empty;

ConnectionOptions co = new ConnectionOptions();
ManagementScope scope = 
    new ManagementScope(String.Format(path, "."), co);

scope.Connect();

ObjectQuery query = new ObjectQuery("SELECT * FROM Win32_BIOS");
ManagementObjectSearcher search = new ManagementObjectSearcher(scope, query);

ManagementObjectCollection moc = search.Get();

foreach (ManagementObject mo in moc)
{
    BiosVersion = (String)mo["SMBIOSBIOSVersion"];
} 
```

# facebook - 为什么“graph.facebook.com/:page_id/insights”不返回任何东西？

> ID：10320494
> 
> 赞同：1
> 
> 时间：2012-04-25T17:09:23.550
> 
> 标签：facebook, facebook-graph-api

`/insights/page_engaged_users`但是，像等等一级深的 url`/insights/page_consumptions`返回数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T18:05:28.343

嗯，这绝对应该工作，它曾经。它现在坏了。凌晨 1 点 46 分为此提交了一个错误：

[https://developers.facebook.com/bugs/226310404141320](https://developers.facebook.com/bugs/226310404141320)

请转到该错误并订阅并复制它，以便 Facebook 快速修复此问题。

# php - 使用 curl 获取重定向的 url 名称？

> ID：10320496
> 
> 赞同：1
> 
> 时间：2012-04-25T17:09:35.610
> 
> 标签：php, curl

我有以下链接：

[http://www.compredia.eu/finder_listing.php?cpath=10728,100021,1063355&mode=finder](http://www.compredia.eu/finder_listing.php?cpath=10728,100021,1063355&mode=finder)

它会自动重定向到：

[http://www.compredia.eu/hp-printcartridges-for-hp-business-inkjet-2800.html](http://www.compredia.eu/hp-printcartridges-for-hp-business-inkjet-2800.html)

如何使用 curl 获取 url 的重定向页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T09:24:12.907

这是我正在使用的 - 它也应该对你有用：

```
<?php
function getRedirectUrl($url){ 
        $redirect_url = null;

        $url_parts = @parse_url($url);
        if (!$url_parts) return false;
        if (!isset($url_parts['host'])) return false; //can't process relative URLs
        if (!isset($url_parts['path'])) $url_parts['path'] = '/';

        $sock = fsockopen($url_parts['host'], (isset($url_parts['port']) ? (int)$url_parts['port'] : 80), $errno, $errstr, 30);
        if (!$sock) return false;

        $request = "HEAD " . $url_parts['path'] . (isset($url_parts['query']) ? '?'.$url_parts['query'] : '') . " HTTP/1.1\r\n";
        $request .= 'Host: ' . $url_parts['host'] . "\r\n";
        $request .= "Connection: Close\r\n\r\n";
        fwrite($sock, $request);
        $response = '';
        while(!feof($sock)) $response .= fread($sock, 8192);
        fclose($sock);

        if (preg_match('/^Location: (.+?)$/m', $response, $matches)){
                if ( substr($matches[1], 0, 1) == "/" )
                        return $url_parts['scheme'] . "://" . $url_parts['host'] . trim($matches[1]);
                else
                        return trim($matches[1]);

        } else {
                return false;
        }

}

function getAllRedirects($url){
        $redirects = array();
        while ($newurl = getRedirectUrl($url)){
                if (in_array($newurl, $redirects)){
                        break;
                }
                $redirects[] = $newurl;
                $url = $newurl;
        }
        return $redirects;
}

function getFinalRedirect($url){
        $redirects = getAllRedirects($url);
        if (count($redirects)>0){
                return array_pop($redirects);
        } else {
                return $url;
        }
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T15:18:35.170

* * *

### 更新

（这将适用于您的情况）

* * *

**代码 ：**

```
<?php

function curlRedir($url)
{
    $go = curl_init($url);
    curl_setopt ($go, CURLOPT_URL, $url);

    static $curl_loops = 0;
    static $curl_max_loops = 20;

    if ($curl_loops++>= $curl_max_loops)
    {
        $curl_loops = 0;
        return FALSE;
    }

    curl_setopt($go, CURLOPT_HEADER, true);
    curl_setopt($go, CURLOPT_RETURNTRANSFER, true);

    $data = curl_exec($go);
    $pattern = '/self\.location\.href=\'(.+)\';/';
    preg_match($pattern, $data, $matches);

    curl_close($go);
    return $matches[1];
}

$c = curlRedir("http://www.compredia.eu/finder_listing.php?cpath=10728,100021,1063355&mode=finder");

echo $c;

?> 
```

**输出 ：**

> [http://www.compredia.eu/hp-printcartridges-for-hp-business-inkjet-2800.html](http://www.compredia.eu/hp-printcartridges-for-hp-business-inkjet-2800.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T17:18:40.453

```
$ch = curl_init($url);
//set options
curl_exec($ch);
$lasturl = curl_getinfo($ch, CURLINFO_EFFECTIVE_URL); 
```

# iphone - 在 CCParticleSystemQuad 中弹跳粒子

> ID：10320500
> 
> 赞同：1
> 
> 时间：2012-04-25T17:09:50.430
> 
> 标签：iphone, ios, ipad, cocos2d-iphone, particles

我正在使用 cocos2d 在 iOS 上制作游戏。我有一个粒子发射器，我希望粒子在撞击屏幕底部时反弹。问题是我似乎无法找到一种方法来做到这一点，而且我对 open GL 的了解有限，答案显然摆在我面前，但我看不到。有没有这样的例子或使用CCBounce或box2d之类的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T01:58:18.093

这是一个使用 cocos2d + Box2D 的弹跳球教程：

*   [http://www.raywenderlich.com/457/intro-to-box2d-with-cocos2d-tutorial-bouncing-balls](http://www.raywenderlich.com/457/intro-to-box2d-with-cocos2d-tutorial-bouncing-balls)

cocos2d 中还有 EaseBounce 动作（`CCEaseBounceIn`, `CCEaseBounceOut`, `CCEaseBounceInOut`）供您在 sprite 上运行。[请参阅《 cocos2d 编程指南：动作 - 缓](http://www.cocos2d-iphone.org/wiki/doku.php/prog_guide%3aactions_ease)动》中的“EaseBounce 动作”部分。

# c# - C# 调用 C 函数，该函数返回具有固定大小的 char 数组的结构

> ID：10320502
> 
> 赞同：18
> 
> 时间：2012-04-25T17:10:01.743
> 
> 标签：c#, pinvoke

所以，这个问题有很多变种，看了几个还是想不通。

这是C代码：

```
typedef struct
{
unsigned long Identifier;
char Name[128];
} Frame;

Frame GetFrame(int index); 
```

这是 C# 代码：

```
struct Frame
{
    public ulong Identifier;
    [MarshalAs(UnmanagedType.ByValArray, ArraySubType = UnmanagedType.I1, SizeConst = 128)]
    public char[] Name;
}

[DllImport("XNETDB.dll", CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Ansi)]
private static extern Frame GetFrame(int index); 
```

这是我在 C# 中尝试的最后一次尝试，看起来很合乎逻辑，但我收到错误“方法的签名与 PInvoke 不兼容”。所以，我有点不知道下一步该尝试什么。任何帮助表示赞赏。

谢谢，凯文

**更新** *的凯文将此添加为我的答案的编辑*

我应该改为更改我的 C 代码：

```
void GetFrame(int index, Frame * f); 
```

并用于 C#：

```
struct Frame
{
    public uint Identifier;
    [MarshalAsAttribute(UnmanagedType.ByValTStr, SizeConst = 128)]
    public string Name;
}

[DllImport("XNETDB.dll", CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Ansi)]
private static extern void GetFrame(int index, ref Frame f); 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-25T17:25:18.633

您选择的 PInvoke 签名存在两个问题。

第一个很容易修复。你有一个错误的翻译`unsigned long`。在 C 中，an`unsigned long`通常只有 4 个字节。`long`您选择了8 个字节的 C# 类型。更改要使用的 C# 代码`uint`将解决此问题。

第二个有点难。正如 Tergiver 指出的那样，CLR Marshaller 仅支持在返回位置的结构，如果它是 blittable 的话。Blittable 是一种奇特的说法，它在本机代码和托管代码中具有完全相同的内存表示。您选择的结构定义不是 blittable，因为它有一个嵌套数组。

如果您记得 PInvoke 是一个非常简单的过程，则可以解决此问题。CLR Marshaller 真的只需要你用你的类型和 pinvoke 方法的签名来回答 2 个问题

*   我要复制多少字节？
*   他们需要朝哪个方向发展？

在这种情况下，字节数是`sizeof(unsigned long) + 128 == 132`。所以我们需要做的就是建立一个可blittable 且大小为132 字节的托管类型。最简单的方法是定义一个 blob 来处理数组部分

```
[StructLayout(LayoutKind.Sequential, Size = 128)]
struct Blob
{
   // Intentionally left empty. It's just a blob
} 
```

这是一个没有成员的结构，在编组器看来，它的大小为 128 字节（作为奖励，它是 blittable！）。现在我们可以轻松地将`Frame`结构定义为 an`uint`和 this 类型的组合

```
struct Frame
{
    public int Identifier;
    public Blob NameBlob;
    ...
} 
```

现在我们有了一个 blittable 类型，编组器将看到其大小为 132 字节。这意味着它可以与`GetFrame`您定义的签名一起正常工作

剩下的唯一部分是让您访问`char[]`名称的实际值。这有点棘手，但可以通过一些元帅魔法来解决。

```
public string GetName()
{
    IntPtr ptr = IntPtr.Zero;
    try
    {
        ptr = Marshal.AllocHGlobal(128);
        Marshal.StructureToPtr(NameBlob, ptr, false);
        return Marshal.PtrToStringAnsi(ptr, 128);
    }
    finally
    {
        if (ptr != IntPtr.Zero) 
        {
            Marshal.FreeHGlobal(ptr);
        }
    }
} 
```

注意：我不能对调用约定部分发表评论，因为我不熟悉`GetFrame`API，但这是我肯定会检查的。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-25T18:21:45.543

问题是本机函数返回一个非 blittable 类型作为返回值。

[http://msdn.microsoft.com/en-us/library/ef4c3t39.aspx](http://msdn.microsoft.com/en-us/library/ef4c3t39.aspx)

*P/Invoke 不能将非 blittable 类型作为返回值。*

您不能 p/Invoke 该方法。[**编辑** *实际上是可能的，请参阅[JaredPar 的回答](https://stackoverflow.com/questions/10320502/c-sharp-calling-c-function-that-returns-struct-with-fixed-size-char-array/10320690#10320690)*]

按值返回 132 个字节是个坏主意。如果这个本机代码是你的，我会修复它。您可以通过分配 132 个字节并返回一个指针来修复它。然后添加一个 FreeFrame 方法来释放该内存。现在它可以被 p/Invoked。

或者，您可以将其更改为接受指向它将填充的帧内存的指针。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-25T22:22:00.637

JaredPar 的另一个选择是利用 C# 固定大小缓冲区功能。但是，这确实需要您打开设置以允许不安全的代码，但它避免了 2 个结构。

```
class Program
{
    private const int SIZE = 128;

    unsafe public struct Frame
    {
        public uint Identifier;
        public fixed byte Name[SIZE];
    }

    [DllImport("PinvokeTest2.DLL", CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Ansi)]
    private static extern Frame GetFrame(int index);

    static unsafe string GetNameFromFrame(Frame frame)
    {
        //Option 1: Use if the string in the buffer is always null terminated
        //return Marshal.PtrToStringAnsi(new IntPtr(frame.Name));

        //Option 2: Use if the string might not be null terminated for any reason,
        //like if were 128 non-null characters, or the buffer has corrupt data.

        return Marshal.PtrToStringAnsi(new IntPtr(frame.Name), SIZE).Split('\0')[0];
    }

    static void Main()
    {
        Frame a = GetFrame(0);
        Console.WriteLine(GetNameFromFrame(a));
    }
} 
```

# javascript - javascript和在Firefox中拖动

> ID：10320505
> 
> 赞同：0
> 
> 时间：2012-04-25T17:10:14.927
> 
> 标签：javascript, scroll, mootools

我正在编写一个脚本来使用 javascript 滚动一个 div 容器。不幸的是，它在 Firefox 中效果不佳。在 Firefox 中，一旦我开始拖动旋钮，光标旁边就会出现停止图标，然后我的脚本无法获取 mouseup 事件。

有谁知道如何解决这个问题？

[http://www.novuspix.de/scroll/](http://www.novuspix.de/scroll/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T18:00:40.473

检查该`mousemove`事件是否附加`document`到`window`元素`.knob`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-11-09T17:11:15.150

对于那些寻求修复阻止 mouseup 事件的停止图标的人（就像我发现这篇文章时一样），我也问了这个问题，最后自己找到了答案：[**已解决**单击并拖动链接在 Firefox 中阻止 mouseup 事件](https://stackoverflow.com/questions/53227879/solved-click-and-drag-on-links-in-firefox-are-blocking-mouseup-events)

这是JS代码，关于问题的一切都更详细

```
const links = document.querySelectorAll('a');
links.forEach(element => {element.addEventListener('mousedown',function(e) { 
  e.preventDefault();
})
}) 
```

# php - 如何实现两个网站之间的安全通信

> ID：10320517
> 
> 赞同：0
> 
> 时间：2012-04-25T17:11:03.943
> 
> 标签：php, security, encryption, openssl, aes

我正在准备两个网站之间的通信和数据交换系统，并希望使用 Stackoverflow 社区成员发布的建议来增强它。

让我通过以下示例来解释我现在是如何做的。

有2个网站

*   server-example.com（现在将称为 SE.com）
*   client-example.com（现在称为 CE.com）

在执行站点之间的数据交换之前，执行以下步骤。

*   使用 openssl_* 函数，在 SE.com 生成异步密钥对
*   私钥保存在 SE.com
*   公钥通过正常的 HTTP 请求发送到 CE.com（详细过程如下）
*   公钥使用 json_encode 函数编码
*   编码数据推送到 CE.com

更远，

*   一旦 CE.com 接收到编码数据，它使用 json_decode 函数检索 PublicKey
*   CE.com 使用自定义函数生成随机字符串（称为 rkey）
*   rkey 使用 openssl_public_encrypt 函数加密
*   加密数据推送到 SE.com

更远，

*   在接收到加密数据时，SE.com 使用 openssl_private_decrypt 对其进行解密
*   现在，SE.com 拥有相同的 rkey（与 CE.com 相同）

现在，假设 SE.com 需要向 CE.com 发送以下字符串“Hello World”

这两个站点都有用于 AES 加密解密的自定义库。

*   SE.com 使用带有 AES 加密功能的 rkey 生成加密文本
*   生成的加密文本使用 json_encode 函数编码并推送到 CE.com

现在，CE.com 获得了加密文本

*   在接收加密文本时，它使用 json_decode 进行解码并获得“Hello World”字符串

**问题**

*   通信网络安全吗？从某种意义上说是网络安全的，在 SE.com 和 CE.com 之间传输的数据可以以与 GET 请求类似的方式传输吗？
*   如果有人试图在传输过程中读取传输的数据，他是否可以解密它，看看它包含什么？

    此外，提供改进安全和通信的建议。

    帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T17:22:14.480

实施客户端证书。虽然使用服务器端证书可以防止/阻止截取消息，但它不能阻止欺骗 SE 的人首先与 CE 对话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T09:54:26.280

您需要使用[双向 SSL 身份验证](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&sqi=2&ved=0CDEQFjAA&url=http://publib.boulder.ibm.com/infocenter/tivihelp/v5r1/topic/com.ibm.itim.infocenter.doc/cpt/cpt_ic_security_ssl_authent2way.html&ei=0mCeT8-QBoXt0gHQtOmhDw&usg=AFQjCNHSJhui6D9h5Hz_uS-fCW0WilPcmg&sig2=YWFZXV3h-T5isOL50_Ja8Q)。

# java - 从两个冲突的 jar 导入类时，使用哪一个？

> ID：10320522
> 
> 赞同：4
> 
> 时间：2012-04-25T17:11:25.533
> 
> 标签：java, import, jar

在 Java 中，我最近遇到了一个案例，我得到了两个不同的 jar，每个 jar 都定义了一个类。问题是这些 jar 中的一个已过时，并且所讨论的类缺少一个存在于一个 jar 而不是另一个 jar 中的方法。

因此，我收到一个错误，即找不到代码中使用的方法。我最终能够通过删除旧 jar 来解决这个问题，以便它导入正确的。

许多人使用相同的代码（使用相同的两个、冲突、导入的 jar）并且没有这个问题。所以，他们一定是在导入最新的 jar。

我的问题是：是什么导致我将一个罐子导入另一个罐子？什么逻辑决定了哪个是“使用”的？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T17:14:15.773

根据订单。第一个将被使用，第二个将开始引起问题。

确保您不包含同一类的不同版本。因此，您可能会遇到奇怪的错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T17:18:59.790

类路径确定顺序的方式与 PATH 确定将运行哪个程序的方式相同，如果您有多个具有相同名称的程序。

您可能会遇到奇怪的错误，但大多数时候拥有多个版本的 jar 不是问题（这意味着它可能已经存在了一段时间并且难以测试）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T17:18:46.460

看看你的`CLASSPATH`. 你的 jar 文件出现在什么顺序`CLASSPATH`？

如果您没有显式设置`CLASSPATH`变量（或命令行参数，或者您的框架找到类），请以您想要的类更早出现的方式设置它。

# javascript - 如何将自定义按钮添加到 JqGrid 添加/编辑表单？

> ID：10320523
> 
> 赞同：3
> 
> 时间：2012-04-25T17:11:33.787
> 
> 标签：javascript, jquery, jqgrid

是否可以将自定义按钮添加到 JqGrid 添加/编辑表单？

除了提交和取消之外，我还想要一个显示“保存并新建”的按钮，一个显示“保存并关闭”的按钮，以及一个显示“取消”的按钮。

有可能实现这一目标吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-25T21:47:56.097

jqGrid 有一些用于按钮的 CSS 类。[您可以在beforeShowForm](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:form_editing#events)回调中添加新按钮，例如：

```
$.extend($.jgrid.edit, {
    bSubmit: "Save and Close",
    bCancel: "Cancel",
    width: 370,
    recreateForm: true,
    beforeShowForm: function () {
        $('<a href="#">Save and New<span class="ui-icon ui-icon-disk"></span></a>')
            .click(function() {
                alert("click!");
            }).addClass("fm-button ui-state-default ui-corner-all fm-button-icon-left")
              .prependTo("#Act_Buttons>td.EditButton");
    }
}); 
```

查看[演示](http://www.ok-soft-gmbh.com/jqGrid/NewButtonInEditForm.htm)：

![在此处输入图像描述](../Images/3b95c4317d545f411ead8bfc7d345c0a.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T18:27:36.540

您可以通过插入 ClientSideEvents-AfterAddDialogShown="AddButton" 来添加按钮

然后您的函数 AddButton 可以将您的按钮 html 插入到添加对话框的表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T17:54:33.760

要添加清除模式窗口中所有输入元素的按钮：

```
$.extend($.jgrid.edit, {
    bSubmit: "Save and Close",
    bCancel: "Cancel",
    width: 370,
    recreateForm: true,
    beforeShowForm: function () {
        $('<a href="#">Clear<span class="ui-icon ui-icon-document-b"></span></a>')
            .click(function() {
              $(".ui-jqdialog input").val("");    
            }).addClass("fm-button ui-state-default ui-corner-all fm-button-icon-left")
              .prependTo("#Act_Buttons>td.EditButton");
    }
}); 
```

# php - 正确的帖子变量

> ID：10320536
> 
> 赞同：-1
> 
> 时间：2012-04-25T17:12:37.953
> 
> 标签：php

我有一个这样的提交按钮：

```
<?php
   echo "<form id='abottom' method='post'>
         <button name='".$row3[$ww]."' id='".$row3[$ww]."' type='button'>More Details</button>
         <input type='hidden' name='action' value='".$row3[$ww]."' />
         </form>";
?> 
```

和 ids 在表格行的按钮右侧工作（通过[Firebug](http://en.wikipedia.org/wiki/Firebug_%28software%29)）。但是当我想`$_POST`在查询`while`循环中输出时，这些都不适合我：

```
<?php
    echo $_POST[$row3[$ww]]." <br />";
    echo $_POST['$row3[$ww]']." <br />";
    echo $_POST[$row3['$ww']]." <br />";
    echo $_POST["$row3[$ww]"]." <br />";
    echo $_POST[$row3["$ww"]]." <br />";
    echo $_POST[$row3['".$ww."']]." <br />";
?> 
```

哪一个是正确的？上面的那些对我不起作用。

```
 $row3 // is a fetch result of sql3
  $ww // is table rows name on which one is selected 
```

原始 HTML 输出示例：

```
<form name ='dets' method='POST'>
    <input class = 'showt' name ='6' id ='6' type='button' value= 'More Details'></input>
    <input type='hidden' name='data' value='6' />
    <noscript><input type='submit' value='Submit'></noscript>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T17:14:46.477

更好的调试和找到正确的变量是使用

```
<?php
    echo '<pre>';
    var_dump($_REQUEST);
    echo '</pre>'; 
```

查看哪些变量到达您的脚本。

* * *

**更新：**

我想，你需要的是：

```
<form method="post">
    <input type="hidden" name="data" value="<?php echo $row3[$ww]; ?>"/>
    <input type="submit" value="More Details"/>
</form>

<?php
    echo $_POST['data']]; 
```

如果您有多个值，`$row3`则添加额外的表单，如下所示：

```
<form method="post">
    Second Data
    <input type="hidden" name="data" value="<?php echo $row4[$ww]; ?>"/>
    <input type="submit" value="More Details"/>
</form> 
```

始终保持隐藏输入的名称相同（`data`）！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T11:04:55.050

你的按钮有`type="button"`. 这应该是`type="submit"`，否则它不会提交它所在的表单。

您的[PHP](http://en.wikipedia.org/wiki/PHP)代码应如下所示：

```
<?php
    echo "<form id='abottom' method='post'>
          <button name='".$row3[$ww]."' id='".$row3[$ww]."' type='submit'>More Details</button>
          <input type='hidden' name='action' value='".$row3[$ww]."' />
          </form>";
?> 
```

# javascript - 如何使用帖子/评论框创建 Facebook Like

> ID：10320539
> 
> 赞同：0
> 
> 时间：2012-04-25T17:12:51.573
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-like

我正在尝试将*带有*评论框的 Facebook 按钮添加到[*网站*。](http://en.wikipedia.org/wiki/Like_button) 当你点击点赞按钮时，你会喜欢 Facebook 页面本身，*即*. 我在哪里可以找到一个很好的入门示例来允许它工作？**`Facebook.com/thesitesname`**

 **我得到了点赞*按钮*，但没有评论框...

```
<div id="fb-root"></div>
    <script>
        (function (d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) 
                return;
            js = d.createElement(s); js.id = id;
            js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=111116358987784";
            fjs.parentNode.insertBefore(js, fjs);
        } (document, 'script', 'facebook-jssdk'));
    </script>
<div class="fb-like" 
     data-href="http://www.facebook.com/ASITE" 
     data-send="false" 
     data-layout="box_count" 
     data-width="50" 
     data-show-faces="false" d
     ata-font="arial">
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T17:56:00.483

在[Like Button](https://developers.facebook.com/docs/reference/plugins/like/)页面中，FAQ 部分的最后一个问题：

> **当我单击“赞”按钮时，不会显示弹出窗口（或“弹出窗口”）。为什么？**
> 
> 如果将 Like 按钮放置在 HTML 元素的边缘附近，并且溢出属性设置为隐藏，则单击按钮时弹出按钮可能会被剪裁或完全隐藏。这可以通过将溢出属性设置为隐藏以外的值来解决，例如可见、滚动或自动。**

# google-app-engine - Scala 与 JPA 和 GAE

> ID：10320540
> 
> 赞同：1
> 
> 时间：2012-04-25T17:12:51.747
> 
> 标签：google-app-engine, scala, jpa, google-cloud-datastore, jpa-2.0

我想用 scala 编写我的 dto，但它似乎不起作用。当我想在本地网络服务器上解聚网络应用程序时，我收到以下消息：

```
Caused by: org.datanucleus.metadata.InvalidMetaDataException: 
Class de.cassys.gkasse.model.Application has application-identity 
and no objectid-class specified yet has 0 primary key fields. 
Unable to use SingleFieldIdentity. 
```

令人困惑的是，我已经定义了一个主键字段。看看这段代码：

```
@Table(name = "applications")
@Entity
class Application(
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    var id: Key = null,
    var currentVersion: String = null,
    var certificate: Array[Byte] = null,
    var created: Date = null,
    var exec: Array[Byte] = null) 
```

我应该怎么办？

# regex - 在 Perl 中搜索、创建和移动

> ID：10320548
> 
> 赞同：1
> 
> 时间：2012-04-25T17:13:29.620
> 
> 标签：regex, perl, html-parsing

我有一个大约 800 个 html 文件的目录。我正在尝试搜索每个文件并返回标签之间的文本。然后我想用该文本创建一个目录并在那里移动（或复制）文件。当我想到这一点时，这似乎是一个非常容易的尝试，但即使确定我需要的模块，我也遇到了很多问题。我已经查看了 File::Find 和 glob，但我不确定如何在文件中使用 txt 的正则表达式（不是文件名）来实现这一点。我基本上是 perl 的新手，所以任何和所有的帮助都会受到赞赏。提前致谢。

编辑澄清：我想要完成的事情：

读取目录 = ~/me/project/

对于 ~/me/project/ 找到所有文件 =~ /.html$/i

对于每个文件，在 html 中搜索 = div class="recip" id="objectTo">(.*) /div

为每个 (.*) IE john@doewww.com 或 John Doe 创建一个具有相同名称的目录

循环并移动具有 xxxxxxxx@xxxxx.com 或 John Doe 实例的每个文件到其对应目录。

我真的很感激帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T17:20:23.450

使用 File::Find，您走在了正确的轨道上。

您将创建一个 'wanted()' 函数，在该函数中，找到的文件的名称将是`$File::Find::name`. 然后，您可以使用它来打开文件句柄、读入文件、搜索标签并提取您要查找的数据，然后关闭文件句柄。File::Find 将移动到下一个文件。

```
#! /usr/bin/perl

use warnings;
use strict;
use File::Find;

sub wanted {
    my $file=$File::Find::name;

    # if the file has the extension '.html' (case insensitive) ...
    if( $file =~ /\.html$/i ) {
        my $FH;
        open( $FH, '<', $file) or die "Could not open '$file' for reading: $!";
        local $/ = '';
        my $contents = <$FH>; # slurp file into $contents
        # search $contents for the tags that you're looking for,
        # 
        close $FH;
    }
}

my @directories = (
      './htmlfiles'
    , './www'
    , './web'
);

find(\&wanted,  @directories); 
```

警告：代码通过`perl -c`了，但我没有运行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T19:19:09.327

对于您问题的第二部分，请查看[HTML::Strip](http://search.cpan.org/~kilinrax/HTML-Strip-1.06/Strip.pm)以从文本中剥离 HTML 标记。

# php - 如何使用 jquery 和 php 验证密码？

> ID：10320556
> 
> 赞同：2
> 
> 时间：2012-04-25T17:14:28.887
> 
> 标签：php, jquery, authentication, passwords

我以前从未这样做过，而且我还没有在 Google 或 StackOverflow 上找到太多帮助。

这就是我所拥有的： 密码输入：

```
<input type="text" placeholder="password" name="pass" id="password" /> 
```

和一些 jQuery 来检查密码：

```
<script>
$('form').submit(function(){
input = $('#password').val();
var finish = $.post("pass.php", { request: "opensesame" }, function(data) {
   return (input==data) ? true : false;
});
if(finish){
alert('sent');
}else{
alert('not sent');
}
return false;
});
</script> 
```

还有一个密码分配的php页面（pass.php）：

```
<?php
if(isset($_POST['request'])&&$_POST['request']=="opensesame"){
echo 'graphics';
}
?> 
```

现在，我可以让它提醒“图形”，但我不能让它将数据与输入值匹配以检查它是否是正确的密码。

我做错了什么，以这种方式验证密码的潜在危险是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T17:20:18.263

“AJAX”中的“A”代表**异步**。

调用后的代码`$post`将在函数内容之前执行`$post`。的值`finish`将始终是一个`jqXHR`对象，结果`(input==data) ? true : false`将被忽略。

更清楚：

```
var finish = $.post("pass.php", { request: "opensesame" }, function(data) {
   // THIS EXECUTES SECOND, and the return value is discarded
   return (input==data) ? true : false;
});

// THIS EXECUTES FIRST, with finish set to a jqXHR object
if(finish){
... 
```

您需要重新考虑密码检查的方法，或通过在`$.post`调用之前添加以下内容来使用同步回发：

```
$.ajaxSetup({async:false}); 
```

或者通过使用`$.ajax`和传递`async: false`：

```
jQuery.ajax({
  type: 'POST',
  url: "pass.php",
  data: { request: "opensesame" },
  success: function(result) { ... },
  async:   false
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-25T17:22:36.157

首先要做的就是清理代码，恐怕它太晦涩难懂了。

我会这样写：

```
<script>

$('form').submit(function(event){
    event.preventDefault(); // stop the form from submitting
    var passwd = $('#password').val();
    var finish = $.post("pass.php", { request: passwd }, function(data) {
        if(data){
            alert('Success!');
        }else{
            alert('Failure :(');
        }
    });
});

</script> 
```

这里需要注意的事项：

*   AJAX POST 是异步的，您不能在回调中更改变量后立即检查变量，您需要在回调中处理*内容*。
*   您**必须**在服务器上验证密码，而不是在 javascript 中！
*   添加到上一个项目符号中，不要在 javascript 中写入您的密码！

在服务器上：

```
<?php

    if(isset($_POST['request']) && $_POST['request']=="opensesame"){
        echo 'true';
    }else{
        echo 'false';
    }

?> 
```

这里需要注意的事项：

*   您曾经`isset()`检查变量**good call**是否存在。继续做。
*   jQuery POST 需要来自服务器的 javascript 值（除非您另有说明）。
*   这就是我的代码打印`'true'`or的原因`'false'`，这在 javascript 中转换为布尔值。
*   我建议返回一个带有错误详细信息的对象，如下所示：

    ```
    <?php
        $result = array('success'=>false, 'reason'=>'Unknown error.');
        if(isset($_POST['request'])){
            if(trim($_POST['request'])!=''){
                if($_POST['request']=='opensesame'){
                    $result['success'] = true;
                    $result['reason'] = 'Welcome home!';
                }else $result['reason'] = 'Password is wrong';
            }else $result['reason'] = 'Password must not be empty';
        }else $result['reason'] = 'Expected parameter "request"';
        echo json_encode($result);
    ?> 
    ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T17:17:04.243

您必须将输入字段序列化为脚本的所有数据：

```
$.post("pass.php", { request: $('form').serialize() }, function(data) { 
// ... 
```

只要您在自己的服务器上，我就看不到太多潜在的危险，因为它会发送一个普通表单无论如何都会执行的 POST 请求。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-25T17:26:06.520

像这样发送数据是非常不安全的，任何人都可以使用 firebug 或其他类似工具拦截和读取您通过 ajax 发送的数据以及 ajax 返回的值。因此，您应该对字段进行序列化或清理，并在发送数据之前对其进行加密。

& 检查完成后发出警报的代码将在响应来自 ajax 之前执行（注意它是异步的），因此您将获得一个存储在完成变量中的对象。

# sql - SQL单字节双字节汉字

> ID：10320558
> 
> 赞同：0
> 
> 时间：2012-04-25T17:14:33.760
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我们的中文数据库中有一个表，它以字符形式存储某些列的信息。

我们想把它转换成普通的汉字。

我将如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T17:51:55.033

您需要将这些列转换为 unicode 编码。我相信汉字是 2 个字节，所以希望你的 char 字段没有截断任何信息：

*   创建一个新列 - 我将其称为 [NVChar1] 和旧列 [Char1]

    更新 tblMyTable SET [NVChar1] = CONVERT(NVARCHAR, [Char1])

[这](http://www.sqlusa.com/bestpractices2005/chinesecharacters/)是一篇包含更多信息的文章。

# sencha-touch - SenchaTouch 2 向 WebService 发送值 - 初学者

> ID：10320559
> 
> 赞同：1
> 
> 时间：2012-04-25T17:14:41.983
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我正在关注一个`senchaTouch`教程。我有一个名为的 Web 服务`HelloWorld.php`，位于 URL 中`http://mydomainTest.com/Proj/HelloWorld.php`。它需要 3 个值`name`，`email`和`description`。

Web 服务使用`POST`方法。

我的代码如下；我想知道的是我没有指定键的值（`POST`值键）以及网络服务如何知道，为键保存什么（`name,email, description`）

在创建时`native iPhone apps`，我常说`setPostValue: forKey:`（in `ASIHttpRequest`），我需要知道的是如何为传入的值设置Key `Sencha`。我在下面附上了我的代码，请看看并帮助我。

```
Ext.define('GS.view.Contacts', {
    extend:'Ext.form.Panel', 
    xtype:'contactform',

        config:{
            title:'Contact',
            iconCls:'user',
            url:'http://mydomainTest.com/Proj/HelloWorld.php',

            items:[
                {
                    xtype:'fieldset',
                    title: 'Contact Us',
                    instructions: '(email is not required)',

                    items: [
                        {
                            xtype:'textfield',
                            name: 'name',
                            label:'Name'
                        },
                        {
                            xtype:'emailfield',
                            name:'email',
                            label:'Email'
                        },
                        {
                            xtype:'textareafield',
                            name:'message',
                            label:'Message'
                        }
                    ]
                },
                {
                items:[
                    {
                        xtype:'button',
                        text: 'Submit',
                        ui:'confirm',
                        handler: function(){
                            this.up('contactform').submit();
                        }
                    }
                ]
            }
            ]
        }

} ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T17:32:20.277

请按照以下步骤操作：-

*   `var values = Ext.getCmp('contactForm').getValues()`使用where contactForm is an `id`of this formpanel获取所有表单值。
*   创建一个`Ext.Ajax request`并将 params 属性的值传递给`values`
*   使用成功处理程序来验证请求是否成功。在控制台日志中打印响应文本

试试这个

```
 Ext.define('GS.view.Contacts', {
    extend:'Ext.form.Panel', 
    xtype:'contactform',
    id:'contactForm',
    config:{
            title:'Contact',
            iconCls:'user',
            items:[
                {
                    xtype:'fieldset',
                    title: 'Contact Us',
                    instructions: '(email is not required)',

                    items: [
                        {
                            xtype:'textfield',
                            name: 'name',
                            label:'Name'
                        },
                        {
                            xtype:'emailfield',
                            name:'email',
                            label:'Email'
                        },
                        {
                            xtype:'textareafield',
                            name:'message',
                            label:'Message'
                        }
                    ]
                },
                {
                items:[
                    {
                        xtype:'button',
                        text: 'Submit',
                        ui:'confirm',
                        handler: function(){
                          var values = Ext.getCmp('contactForm').getValues();
                          // prints the values filled in the form 
                          // text fields of name, email and message.     
                          console.log(values.name+","+values.email+","+values.message);                          

                          Ext.Ajax.request({
                            url: 'http://mydomainTest.com/Proj/HelloWorld.php',
                            params : values,
                            success: function(response){
                                var text = response.responseText;
                                Ext.Msg.alert('Success', text); 
                            }
                           });
                        }
                    }
                ]
            }
            ]
        }
  } ); 
```

# jquery - 如何在 asp.net mvc3 Web 应用程序中的 json 调用期间处理会话超时？

> ID：10320560
> 
> 赞同：0
> 
> 时间：2012-04-25T17:14:44.603
> 
> 标签：jquery, asp.net-mvc-3, asp.net-mvc-routing

在我们的项目中，我们为各种操作制作了大量的 json 回调。我将在下面给你一个这样的 ajax 调用的例子

```
$.ajax({
    url: '../Controller1/Method1',
    type: "POST",
    data: "{'Id': '" + Id "'}",
    dataType: "html",
    contentType: "application/json; charset=utf-8",
    success: function (result) {
        $('#div').html(result);
    }, error: function (s) {
        ShowAlert(s.responseText);
    }
}); 
```

现在当会话超时并且如果我们正在进行 json ajax 回调，那么它不会正确重定向到登录页面，那么如何在 json ajax 回调期间处理会话超时以及会话是否过期并进行 ajax 回调它应该将我重定向到登录页面。

如何做到这一点？任何帮助（代码示例，有用的链接）将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-03T09:21:01.670

当进行 ajax 调用并且会话超时时返回带有特定错误消息，现在如果响应带有特定错误消息，那么只需执行 window.location =

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T17:20:02.817

12030 是http响应吗？为什么不返回或抛出（取决于您是在 web-api 还是普通控制器中）：

返回新的 HttpStatusCodeResult(HttpStatusCode.BadRequest);

然后在ajax调用中：

```
$.ajax({
  //.........
  statusCode: {
      408: function () {
          console.log('Call timed out');
      }
  }
}); 
```

也许

# memory - 从版本 285 开始，nvidia 驱动程序中 cudaMalloc 的灾难性减速

> ID：10320562
> 
> 赞同：4
> 
> 时间：2012-04-25T17:14:48.253
> 
> 标签：memory, cuda, driver, nvidia

近年来，我们在许多 64 位项目中将 CUDA 用于时间关键型任务。几天前，我更新了我的开发系统上的 nvidia 驱动程序，发现与 CUDA 相关的算法出现了灾难性的减速。经过一番挖掘，很明显 cudaMalloc 的许多连续调用会导致延迟增加（每次下一个调用）：

```
void *p[65000];
for (int n = 0; 65000 > n; n++)
   cudaMalloc(&p[n], 256); 
```

此代码在最高版本 285 的 nvidia 驱动程序上运行大约 4 秒，但从驱动程序版本 285 开始执行此代码需要 8 分钟以上（慢 120 倍）。在不同 x64 系统上的 GeForce GTX 560Ti、GeForce GTX 460 和 Quadro FX4600 上进行了测试。

好吧，问题是：这是新驱动程序的错误吗？或者，也许是某种尝试处理碎片和改进 CUDA 中的内存管理（通过更复杂的分配）？或者是其他东西？

更新：我已经向 nvidia 报告了这个问题，并得到答复，他们能够重现它并已将其分配给调查。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T00:23:07.507

我根据 OP 的错误报告对此进行了跟踪。原来这是一个已经报告的已知问题，并且已在 CUDA 5.0 中修复。如果您下载 CUDA 5.0~~预览版（可供注册的 CUDA 开发人员使用）~~Release Candidate 或更高版本，您应该会看到改进。

**编辑**：修复将在 CUDA 5 RC 中，而不是在预览中。因此，截至本次编辑（2012 年 5 月 31 日），该修复程序尚不可用。

# c - 为什么不允许多次定义 C 结构的成员？

> ID：10320563
> 
> 赞同：0
> 
> 时间：2012-04-25T17:14:51.727
> 
> 标签：c, struct, header-files, include-guards

在我看来，C 中反对多次声明结构成员的规则似乎是需要包含守卫的主要原因。如果我们在“header.h”中有以下内容：

```
struct s {
    int a;
    char b;
}; 
```

和文件“ah”#include 的 header.h，那么我们不能同时包含“ah”和“header.h”，因为 struct s 被定义了两次。

我的问题是，这样做有什么问题？为什么不允许多个相同的结构定义？这将消除对包含保护的需求，并大量清理 C 头文件。

C 中的规则是允许多个声明，但只能定义一个。由于某种原因，指定结构的成员称为“定义”，即使它没有定义变量或函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T17:32:57.040

重新定义结构非常容易出错。即使在您的简单示例中，如果 ah`#pragma`在包含“header.h”之前包含调整结构包装或对齐的 a，那么这两个定义可能不再一定相同。这种类型的问题很难调试，因为它取决于标头包含顺序。

通常，当您允许重新定义数据类型时，可能会出现许多问题。作为交换，除了能够放弃头球后卫之外，您不会从中获得任何真正的好处。标头保护解决了这个问题，并且只是很小的开销，不会使代码不合理地混乱。一些编译器支持一个`#pragma once`（或类似的）作为包含保护但只需要一行代码的。

在我个人看来，默认情况下防止多次包含会是一个更好的主意，并且仅在*设计*为多次包含的标头上需要保护宏（将开销留给极少数的用例）。不过，这不是 C 最初实现的方式（而且它会使预处理器更加复杂），因此它极不可能改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T17:22:00.087

嗯，它就像 C 一样工作......它是定义，因为它提供了对象的实际实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T17:42:02.963

您不能两次定义它们，因为正如@Kirilenko 所说，定义是提供对象的实现。但是，我想知道您的问题是否也在问其他问题。

编辑：将实例化更改为定义。

你对 s 的定义

```
struct s {
    int a;
    char b;
}; 
```

将进入 .c 文件，或者至少您可以将结构外部化到 .h 文件中并将结构实例化放在 .c 文件中，或者在 .h 文件中使用 typedef 。

```
typedef struct s {
    int a;
    char b;
} my_struct_type; 
```

即使您希望在 .h 文件中定义结构，也可以通过像这样的括号来防止其“被定义两次”

编辑：从宏 #ifdef MY_STRUCT_DEFINED struct s { int a; 中删除了下划线 字符 b; }; ＃万一

# html - iOS 在网站上放置白条

> ID：10320566
> 
> 赞同：1
> 
> 时间：2012-04-25T17:15:03.413
> 
> 标签：html, css, ios, ipad, web

我已经尝试了几件事，但没有解决我的问题。在 iOS 上，站点右侧会显示一个白条，截断部分内容。帮助？

[http://qusik.com/newsite/](http://qusik.com/newsite/)

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T18:43:21.317

由于页面在平板电脑/移动设备上缩小，您可能会看到该空白，因为您的内容溢出了视口，修复它的一种方法是从您的`header`和创建中删除该背景图像和颜色一个`.bg`带有它的 div 并将其绝对定位（在所有方向上拉伸，例如`top:0; right:0; bottom:0; left:0;`），相对于身体，因此它将在屏幕的所有方向上拉伸，如下所示：

```
.bg {
    background-color: #000000;
    background-image: url("images/tint_blue.png");
    background-position: 50% 0;
    background-repeat: no-repeat;
    border-bottom: 1px solid #FFFFFF;
    position:absolute;
    top:0; left:0; bottom:0; right:0;
    z-index:-1; /* to place it behind everything else, just make sure not to have bg colors on your page elements */
} 
```

另一种（虽然非常不正统）的方法是将背景图像和颜色放在`html`标签上，如下所示：

```
html {
    background-color: #000000;
    background-image: url("images/tint_blue.png");
    background-position: 50% 0;
    background-repeat: no-repeat;
    border-bottom: 1px solid #FFFFFF;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T17:25:04.390

我重新检查了您的网站，您的 ipad 图像及其容器比您的其他容器宽得多，尝试将其尺寸减小到 960-940 宽度

# android - Android 3.0 中奇怪的 NullPointerException

> ID：10320568
> 
> 赞同：0
> 
> 时间：2012-04-25T17:15:26.220
> 
> 标签：android, nullpointerexception, android-2.3-gingerbread, android-3.1-honeycomb

我不知道相同代码在 Android 2.3 上运行正常的原因，但是当涉及到 android 3.1 平板电脑时，它会抛出 NullPointerExceptions ......这是代码：

```
public class CalleeButton extends Button implements OnClickListener, AddressAware {
private AddressText mAddress;
private OnClickListener externalClickListener;
public void setExternalClickListener(OnClickListener e) {externalClickListener = e;}
public void setAddressWidget(AddressText a) {a=mAddress;}

//set Uri SipUri ,so we can initialize the mAddress inside calleebutton --smartclassroom
//because every calleebutton will have one sip account/ext. this will replace the information for original mAddress --smartclassroom
public void setSip(String StudentName,String SipUri, AddressText a)
{
    Log.i("CalleeButton-35");
    super.setText(StudentName);
    //mAddress.setText(SipUri);
    Log.i("CalleeButton-38");
    mAddress.setContactAddress(SipUri, StudentName);
    Log.i("CalleeButton-40");
    setAddressWidget(a);
    Log.i("CalleeButton-42");

}

public CalleeButton(Context context, AttributeSet attrs) {
    super(context, attrs);
    setOnClickListener(this);

    //must use this line or you got null pointer exception...smartclassroom
    Log.i("CalleeButton-50");
    mAddress = new AddressText(context, attrs);
    //mAddress = null;
    Log.i("CalleeButton-52");
}

public void onClick(View v) {
    try {
        if (!LinphoneManager.getInstance().acceptCallIfIncomingPending()) {
            if (mAddress.getText().length() >0) { 
            LinphoneManager.getInstance().newOutgoingCall(mAddress);
                //add new action here
                /*******************************************************/
                /*******************************************************/
            }
        }
    } catch (LinphoneCoreException e) {
        LinphoneManager.getInstance().terminateCall();
        onWrongDestinationAddress();
    };

    if (externalClickListener != null) externalClickListener.onClick(v);
}

protected void onWrongDestinationAddress() {
    Toast toast = Toast.makeText(getContext()
            ,String.format(getResources().getString(R.string.warning_wrong_destination_address),mAddress.getText().toString())
            ,Toast.LENGTH_LONG);
    toast.show();
}

} 
```

实际上我在 Android 2.3 平台上得到了 NullPointerException 一次，但在添加之后：

```
mAddress = new AddressText(context, attrs); 
```

然后它编译并顺利运行...直到我尝试在 android 3.1 平板电脑上安装相同的程序...很奇怪，不是吗？请让我了解我在这方面犯了什么错误，在此先感谢！logcat 的错误消息是：

```
04-25 23:58:13.308: ERROR/AndroidRuntime(6728): FATAL EXCEPTION: main
04-25 23:58:13.308: ERROR/AndroidRuntime(6728): java.lang.RuntimeException: Unable to start activity ComponentInfo{org.linphone/org.linphone.LinphoneActivity}: java.lang.RuntimeException: Unable to start activity ComponentInfo{org.linphone/org.linphone.DialerActivity}: java.lang.NullPointerException
04-25 23:58:13.308: ERROR/AndroidRuntime(6728):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1751)
04-25 23:58:13.308: ERROR/AndroidRuntime(6728):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1767)
04-25 23:58:13.308: ERROR/AndroidRuntime(6728):     at android.app.ActivityThread.access$1500(ActivityThread.java:122)
04-25 23:58:13.308: ERROR/AndroidRuntime(6728):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1005)
04-25 23:58:13.308: ERROR/AndroidRuntime(6728):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-25 23:58:13.308: ERROR/AndroidRuntime(6728):     at android.os.Looper.loop(Looper.java:132)
04-25 23:58:13.308: ERROR/AndroidRuntime(6728):     at android.app.ActivityThread.main(ActivityThread.java:4028)
04-25 23:58:13.308: ERROR/AndroidRuntime(6728):     at java.lang.reflect.Method.invokeNative(Native Method)
04-25 23:58:13.308: ERROR/AndroidRuntime(6728):     at java.lang.reflect.Method.invoke(Method.java:491)
04-25 23:58:13.308: ERROR/AndroidRuntime(6728):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:844)
04-25 23:58:13.308: ERROR/AndroidRuntime(6728):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602)
04-25 23:58:13.308: ERROR/AndroidRuntime(6728):     at dalvik.system.NativeStart.main(Native Method)
04-25 23:58:13.308: ERROR/AndroidRuntime(6728): Caused by: java.lang.RuntimeException: Unable to start activity ComponentInfo{org.linphone/org.linphone.DialerActivity}: java.lang.NullPointerException
04-25 23:58:13.308: ERROR/AndroidRuntime(6728):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1751)
04-25 23:58:13.308: ERROR/AndroidRuntime(6728):     at android.app.ActivityThread.startActivityNow(ActivityThread.java:1592)
04-25 23:58:13.308: ERROR/AndroidRuntime(6728):     at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:130)
04-25 23:58:13.308: ERROR/AndroidRuntime(6728):     at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:342)
04-25 23:58:13.308: ERROR/AndroidRuntime(6728):     at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:676)
04-25 23:58:13.308: ERROR/AndroidRuntime(6728):     at android.widget.TabHost.setCurrentTab(TabHost.java:345)
04-25 23:58:13.308: ERROR/AndroidRuntime(6728):     at android.widget.TabHost.setCurrentTabByTag(TabHost.java:282)
04-25 23:58:13.308: ERROR/AndroidRuntime(6728):     at org.linphone.LinphoneActivity.gotToDialer(LinphoneActivity.java:481)
04-25 23:58:13.308: ERROR/AndroidRuntime(6728):     at org.linphone.LinphoneActivity.fillTabHost(LinphoneActivity.java:207)
04-25 23:58:13.308: ERROR/AndroidRuntime(6728):     at org.linphone.LinphoneActivity.onCreate(LinphoneActivity.java:126)
04-25 23:58:13.308: ERROR/AndroidRuntime(6728):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1048)
04-25 23:58:13.308: ERROR/AndroidRuntime(6728):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1715)
04-25 23:58:13.308: ERROR/AndroidRuntime(6728):     ... 11 more
04-25 23:58:13.308: ERROR/AndroidRuntime(6728): Caused by: java.lang.NullPointerException
04-25 23:58:13.308: ERROR/AndroidRuntime(6728):     at org.linphone.DialerActivity.onCreate(DialerActivity.java:128)
04-25 23:58:13.308: ERROR/AndroidRuntime(6728):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1048)
04-25 23:58:13.308: ERROR/AndroidRuntime(6728):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1715)
04-25 23:58:13.308: ERROR/AndroidRuntime(6728):     ... 22 more 
```

在我看来，logcat msgs 告诉了我有关该功能的信息：

```
 mCallee1.setSip("Jack","sip:xxx@xxx.xxx.xxx.xxx",mAddress); 
```

在 DailerActivity.java（您可以将其视为主要函数）中导致 NullPointerExcetion，然后我将代码跟踪到 CalleeButton.java，但仍然无法找到导致空指针异常的点...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T17:36:04.280

在该行 ( `setSip()`) 上设置断点，并检查 mCallee1 和 mAddress 变量。一个应该为空。那将是你的问题。然后只需追溯它并找出它没有被实例化的原因——或者如果 null 是变量的有效状态，只需在调用之前检查它是否为 null `setSip()`。

# c# - 在视图之间进行通信

> ID：10320569
> 
> 赞同：0
> 
> 时间：2012-04-25T17:15:31.610
> 
> 标签：c#, .net, winforms, mvp

我在尝试理解这种模式时遇到了很多麻烦。在工作中，我们正在使用被动视图实现 MVP。我们正在使用 WinForms。

*   所以我们有一个View（它是一个windows窗体），它实现了一个接口并有一个presenter。
*   演示者获取视图实现的接口实例，并管理视图抛出接口。
*   演示者可以看到模型和经理。
*   管理器处理几个模型的数据库持久性，但它不会手动添加它们，它使用一个单独的层，称为数据，因此它告诉该层持久化数据
*   然后数据层使用实体框架将数据持久化到数据库中

假设我们有一个客户端视图，它代表一个模型客户端，并且我们的数据库中有一个名为客户端的表。客户可以有姓名和城市。

我们还有一个 Cities 视图，它是一个简单的添加、编辑和删除，它还​​代表了一个模型 City 和一个表 City。

现在在我们的客户视图中，我们想让用户添加一个新城市，所以在视图中，我们打开另一个视图，城市视图，然后用户创建一个新城市。

从客户视图，我想看看用户添加了哪个城市，这怎么可能？视图会返回一些东西吗？

（我想把它放在内存中，添加城市时不要将任何东西保存到数据库中，我只想要城市的模型）

我认为返回模型并从视图中查看模型不是 MVP。那我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T04:08:49.493

一个视图打开另一个视图是完全合理的，但我个人不赞成视图返回一个供调用者使用的值。如果其他视图需要访问这个新城市怎么办？

在此处查看我的答案：[MVP 演示者之间的通信？](https://stackoverflow.com/questions/9761546/mvp-communication-between-presenters/9763505#9763505)有关使用 pub/sub 实现目标的示例。

# php - 在不损失质量的情况下调整图像大小

> ID：10320579
> 
> 赞同：1
> 
> 时间：2012-04-25T17:16:02.603
> 
> 标签：php, image, image-processing

我使用 Firebird 主题在[WordPress中开发了一个网站。](http://en.wikipedia.org/wiki/WordPress)滑块图像将以较小的分辨率压缩。

看看[这张图片](http://theme-dutch.com/presents/firebird/wp-content/uploads/2012/01/firebird-wp.jpg)。

它会被挤压——见[http://theme-dutch.com/presents/firebird/](http://theme-dutch.com/presents/firebird/)。我们可以通过动态调整它的大小来避免它的挤压吗？有没有办法在运行时根据用户分辨率调整图像大小，这是否是一种好习惯？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T11:49:55.877

问题出在主题滑块上。它将图像放大到 1900 像素以上。所以图像会失去质量。我降低了几乎解决问题的价值

# php - 如何遍历数组然后替换匹配id的数据

> ID：10320586
> 
> 赞同：0
> 
> 时间：2012-04-25T17:16:35.877
> 
> 标签：php, arrays, iteration

好的，所以我要做的是遍历 Json 解码数组，然后搜索 ID(key)，然后将该数据发布到表单中进行编辑，然后对其进行编码，然后保存它，这似乎是一项简单的任务，但是我没有使用数据库或 java 或 java 脚本我必须仅使用 Json、PHP 和 HTML 来执行此操作，我的主要代码（控制器）文件如下

```
<?php

$file_name = 'engagements.json'; // Serialized speaking engagments

/**
* Controller for Speaking Engagements
*/

if (!isset($_REQUEST['act']) || !$action = $_REQUEST['act']){
  $action = 'list';
} //End If

switch ($action) {
  case 'list': // List
    $json_data = file_get_contents($file_name);
    if (!$engagements = json_decode($json_data, true)) { // Convert serialized data to               array
      $engagements = array();
    } //End If
    include 'engagements_list.phtml';
    break;

  case 'view': // View
    $json_data = file_get_contents($file_name);
    $temp_array = json_decode($json_data);

    foreach($temp_array as $key=>$id){
      if($id->ID == 2){
        echo "got it \n";
        echo "ID: $id->ID \n";
        echo "Title: $id->Title \n";
        echo "Description: $id->Description \n";
      }// End If
    }
    break;

  case 'add': // Add
    $temp_array = array();
    $file = file_get_contents($file_name);
    $json_data = json_decode($file);
    $high_value = count($json_data);
    $high_value++;
    $temp_array['ID'] = $high_value;
    $temp_array['Title'] = $_POST['Title'];
    $temp_array['Description'] = $_POST['Description'];
    $json_data[] = $temp_array;
    file_put_contents($file_name, json_encode($json_data));

    include 'engagements_add.phtml';
    break;

  case 'edit': // Edit

    $file = file_get_contents($file_name);
    $json_data = json_decode($file, true);

    // what comes next here

    include 'engagements_edit.phtml';
    break;

  case 'delete': // Delete
    break;

  default:
    throw(new Exception('Invalid action given'));
    break;
}//End Switch

exit;

<!-- Edit View -->
<form action="engagements.php?act=edit?ID=<?php $_GET['ID']?>" method="get">
  <table>
    <tr><td><input type="hidden" name="ID"></td></tr>
    <tr><td><input type="text" style="width:500px;" name="Title"></td></tr>
    <tr><td><textarea cols="40" rows="2" style="width: 500px; height:250px;" name="Description"></textarea></td></tr>
    <tr><td><input type="submit" name="Submit" value="Submit"/></td></tr>
  </table>
</form> 
```

请帮助我，我到处寻找答案，但可以找到任何解释如何正确执行此操作的资源

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T19:03:12.123

一点点。

```
<form action="engagements.php?act=edit?ID=<?php $_GET['ID']?>" method="get"> 
```

我假设您打算这样输入：

```
<form action="engagements.php?act=edit&ID=<?php echo $_GET['ID']?>" method="get"> 
```

该`$_GET`声明也缺少一个`echo`。

**更新：**

`?>`我注意到在编辑视图之前缺少php 关闭标记。以及开关中的“查看”部分，为什么要回显 ID 属性？它可能如下：

```
echo "ID: $id['ID'] \n"; 
```

# javascript - pagemethods 未定义 - 我相信一切都应该没问题

> ID：10320593
> 
> 赞同：1
> 
> 时间：2012-04-25T17:17:11.640
> 
> 标签：javascript, asp.net, ajax, vb.net, pagemethods

我正在尝试使用 PageMethods 从服务器端调用一个函数，但我收到一个错误，即 PageMethods 未定义。

这是我放入 html 的内容

```
 <asp:ScriptManager ID="ScriptManager1" runat="server"   
  EnablePageMethods="True"> 
```

这是后面代码中的函数。

```
 <System.Web.Services.WebMethod()> _
Public Function LoadChild(ByVal EntityID, ByVal EntityCat, ByVal lnType, ByVal FullExpand, ByVal lnEquip, ByVal lnTemplate) As String 
```

这是使用页面方法对函数的调用。

```
PageMethods.LoadChild(lnEntityID, lnEntityCat, GLOBALEQUIPID, FullExpand, 0); 
```

谁能明白为什么我会不断收到 PageMethods undefined 错误？谢谢你。

编辑 - 部分问题可能是因为该功能未共享，但是当共享时，我在大约 15 个地方收到此错误。- 这是指我正在使用的会话 - 这是正在使用的会话的片段，显示错误。

```
prm4.Value = Session.Item("user_id") 
```

我收到以下错误消息下划线的单词 session - 有关如何解决此问题的任何建议？这可以一起解决整个问题。

错误 305 不能在没有类的显式实例的情况下从共享方法或共享成员初始化程序中引用类的实例成员。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T18:14:44.133

页面方法应该是静态（C#）/共享（VB.NET）方法。否则它不起作用。是的，您不能在静态方法中引用实例属性。要获取`Session`对象，您可以使用`HttpContext.Current.Session`.

# php - 数组列的总和

> ID：10320594
> 
> 赞同：5
> 
> 时间：2012-04-25T17:17:21.460
> 
> 标签：php, arrays, sum

这里有人可以帮我解决这个问题吗？我只想获取某列的总数或总和，请参考下图。已经尝试对此进行排序 2 天，但没有运气，希望有人可以帮助我。我非常感谢，并提前感谢。

这是一个示例图片[http://www.freeimagehosting.net/pig81](http://www.freeimagehosting.net/pig81)

```
<?php $sql = "SELECT name, doc_date, descs, debit, credit FROM statement WHERE  
member_id = $member_id ORDER BY doc_date";

$query = mysql_query($sql);
$combinedResults = array();

while($result = mysql_fetch_array($query)) {
$combinedResults[$result[`name`]][] = array(`name` => $result[`name`], `doc_date` =>   
$result[`doc_date`], `descs` => $result[`descs`],`debit` => $result[`debit`], `credit` 
=> $result[`credit`]);}

foreach(array_keys($combinedResults) as $groupKey) { ?>
<table>
  <tr><?php  foreach($combinedResults[$groupKey] as $item) {?>
    <td>Date</td>
    <td>Description</td>
    <td>Debit</td>
    <td>Credit</td>
    <td>Balance</td>
  </tr>
<tr>
<td colspan="2"><?php  echo $groupKey; ?></td>
<td width="105">&nbsp;</td>
<td width="105">&nbsp;</td>
<td width="105">&nbsp;</td>
</tr>
<tr><?php  foreach($combinedResults[$groupKey] as $item) {?>
<td><?php echo $item[`doc_date`];?></td>
<td><?php echo $item[`descs`];?></td>
<td><?php echo $item[`debit`];?></td>
<td><?php echo $item[`credit`]; ?></td>
<td>&nbsp;</td>
</tr>
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>sum of debit goes here</td>
</tr>
<?php }} ?>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T17:26:03.937

你可以用类似的东西改变你的 SQL 语句

```
SELECT name, doc_date, descs, debit, credit, SUM(debit) AS sum FROM statement WHERE member_id = $member_id ORDER BY doc_date 
```

然后你打印它

```
<?php echo $item['sum']; ?> 
```

您可能还想看看[PDO](http://php.net/manual/en/book.pdo.php "PHP 数据对象")和替换函数的[准备好的语句。](http://php.net/manual/en/mysqli.quickstart.prepared-statements.php "MySQLiprepared statement相关函数")`mysql_`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T19:06:17.303

我已经根据我在其中看到的内容重构了代码，并添加了一个余额计算器，但我还没有实际测试过它。

```
<?php

$sql = "SELECT name, doc_date, descs, debit, credit
        FROM statement
        WHERE  member_id = $member_id
        ORDER BY doc_date";

$query = mysql_query($sql);
$combinedResults = array();

// Slurp SQL results into array
while ($result = mysql_fetch_array($query)) {
  $combinedResults[$result['name']][] = array(
    'name' => $result['name'],
    'doc_date' => $result['doc_date'],
    'descs' => $result['descs'],'debit' => $result['debit'],
    'credit' => $result['credit']
  );
}

// Define a format for all table lines (add CSS as required)
$fmt = "<tr>\n  <td>%s</td>\n  <td>%s</td>\n  <td>%s</td>\n  <td>%s</td>\n  <td>%s</td>\n</tr>";

print "<style type='text/css'>TD{width:105px;}</style>\n";

print "<table>\n";

// Walk through array...
foreach ($combinedResults[$groupKey] as $item) {
  // Start a section...
  printf($fmt, "Date", "Description", "Debit", "Credit", "Balance");
  printf($fmt, $groupKey, "", "", "", "");
  $balance = 0; // Initialize the balance for this section...
  foreach ($combinedResults[$groupKey] as $item) {
    printf($fmt, $item['doc_date'], $item['descs'], $item['debit'], $item['credit'], "");
    $balance += $item['debit'];
  }
  printf($fmt, "", "", "", "", $balance); // Print the balance.
}

print "</table>\n"; 
```

我有兴趣知道它是否有效。:)

请注意，我没有考虑到您的“colspan”；我怀疑您应该先确定您的逻辑，然后再尝试将其构建到实际布局中。

# php - 使用密钥/公钥进行摘要认证

> ID：10320595
> 
> 赞同：0
> 
> 时间：2012-04-25T17:17:23.697
> 
> 标签：php, api, digest-authentication

我正在努力通过 API 向客户端提供一些数据，并且一直在研究各种验证请求的方法。看起来摘要式身份验证将是最佳途径，因为我不能确定服务器是否会提供 SSL，并且不需要严格的安全性。

我过去曾（作为客户）使用大量 API，包括：

*   使用密钥对（公钥、密钥）的 Amazon AWS
*   使用应用程序 ID 和密钥的 Facebook，（应用程序 ID、密钥）

是否有这些系统如何工作的通用方法？这种技术是否有名称，或者这是摘要身份验证的一些变体？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T17:25:34.517

根据我对您的解释，您正在寻找[数字签名](http://en.wikipedia.org/wiki/Digital_signature)。

# ruby - 在使用 ruby 中的“邮件”宝石阅读电子邮件时需要帮助

> ID：10320596
> 
> 赞同：6
> 
> 时间：2012-04-25T17:17:26.333
> 
> 标签：ruby, email

我正在使用 Watir 进行自动化，它创建了一封我需要检查的电子邮件。我被指出电子邮件 gem 是最简单的方法。

我添加了以下代码，并且能够从我的收件箱中收到第一封电子邮件。

```
require 'mail' 
require 'openssl'

Mail.defaults do 
  retriever_method :pop3, :address    => "email.someemail.com", 
                          :port       => 995, 
                          :user_name  => 'domain/username', 
                          :password   => 'pwd', 
                          :enable_ssl => true 
end 

puts Mail.first 
```

我是这个论坛的新手，有以下问题：

1.  如何获取所有未读邮件？我试过`Mail.all`, `Mail.first`, `Mail.last`，但没有返回未读电子邮件。

2.  如何获取电子邮件中存在的所有链接？还是来自特定电子邮件的邮件正文？我需要获取第一封未读电子邮件的电子邮件正文。

3.  如果我的收件箱中有子文件夹，如何从特定文件夹中获取电子邮件？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-07-19T17:53:39.357

IMAP 协议的第[6.4.4](http://james.apache.org/server/rfclist/imap4/rfc2060.txt)节指出了可用于搜索消息的不同搜索标志。

您可以通过将搜索标志传递给 find 方法来仅检索新消息，如下所示：

```
new_messages = Mail.find(keys: ['NOT','SEEN']) 
```

此消息也在[Mail GitHub repo 上的一个问题中](https://github.com/mikel/mail/issues/258)得到了回答。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T16:35:21.613

看起来您阅读了一些[文档](https://github.com/mikel/mail/)。Mail.all 返回所有电子邮件，包括已读电子邮件。Mail.first 返回第一个未读。我想再次这样做会返回下一个未读。如果您的系统受到控制，您不必担心有这么多未读电子邮件。如果我是你，我会在 IRB 中尝试一下，直到你掌握它，甚至可能构建一个让你更容易使用的类。祝你好运。

更新：来自 Mail gem 的文档。如果 Mail.first 没有返回未读的电子邮件（一直），那么作者应该知道。你可以提交一个问题。我自己不使用那个宝石。我使用 gmail gem 进行测试。

```
Mail.all    #=> Returns an array of all emails
Mail.first  #=> Returns the first unread email
Mail.last   #=> Returns the first unread email 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T12:16:02.653

如何节省阅读邮件的时间，然后下次阅读所有邮件时处理邮件仅晚于该日期？我知道它是一种解决方法，但我相信邮件 gem 不支持它。Mailman gem 确实支持这一点，但是一旦您处理它，它就会删除邮件。

# php - 运行存储过程的 mssql_execute 将浏览器重定向到站点主页，而不是满足请求

> ID：10320597
> 
> 赞同：-1
> 
> 时间：2012-04-25T17:17:29.983
> 
> 标签：php, sql-server

我有一个 php/mysql 站点，它还连接到 mssql 数据库以运行一些存储过程。有一种表格要求输入邮政编码、与邮政编码的距离，并有效地返回该邮政编码距离内的商店。由于某种原因，当此函数运行并且没有结果时，表单会正确返回，并显示一条消息，指出未找到结果。如果由于某种原因有结果，浏览器软重定向回主页。如果我注释掉函数的 mssql_execute 部分，重定向不会发生，显然我没有得到任何结果。当我将 mssql_execute 放入并运行相同的请求时，页面被重定向。执行存储过程的函数如下。

```
function getCompaniesByAddress(){
    global $msdb;

    //initiate function
$proc = mssql_init('usp_Search_Scope_And_Range', $msdb); 

//Load Parameters 
mssql_bind($proc, '@SuperscopeID', $_POST['activity'], SQLINT4, false, false, 10);
mssql_bind($proc, '@ScopeID', $_POST['scheme'], SQLINT4, false, false, 10);
mssql_bind($proc, '@PCode', $_POST['postcode'], SQLVARCHAR, false, false, 10);
mssql_bind($proc, '@Distance', $_POST['distance'], SQLINT4, false, false, 10);

try
  {
  $result = mssql_execute($proc);
  //If the exception is thrown, this text will not be shown
  }

//catch exception
catch(Exception $e)
  {
  echo 'Message: ' .$e->getMessage();
  }

//Execute Procedure 
//$result = mssql_execute($proc);

//Free Memory 
mssql_free_statement($proc); 

while ($row = mssql_fetch_assoc($result))
    $results[] = $row;

$res = array_chunk(sortDataSet($results,'Mileage_FL'),20);

return $res[0];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T17:23:04.947

你不能在这里雇用`try`/`catch`吗？然后，您至少可以打印出正在返回的错误消息（您显然没有显示任何只会让您进入重定向的全局错误处理）。我不是 PHP 人，所以我不知道这种语法是否 100% 准确，但您可以尝试以下方法：

```
try
{
  $result = mssql_execute($proc);
  while ($row ...
  ...
  return $res[0];
}
catch (Exception $e) 
{
  echo ($e->getMessage());
} 
```

（基于此处的示例：[在文件未上传的 PHP 中尝试 catch 语句](https://stackoverflow.com/questions/933081/try-catch-statements-in-php)）

# database - 声纳：com.mysql.jdbc.exceptions.jdbc4.CommunicationsException：通信链路故障

> ID：10320603
> 
> 赞同：2
> 
> 时间：2012-04-25T17:17:38.753
> 
> 标签：database, jenkins, sonarqube

我正在运行 Jenkins 的声纳。声纳版本是 2.13 我得到了这个异常

请帮我

```
[ERROR] [21:49:15.205] JDBC begin failed
com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure

The last packet successfully received from the server was 7,028,219 milliseconds ago.  The last packet sent successfully to the server was 16 milliseconds ago.
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[na:1.6.0_18]
    at 
```

声纳的 Jenkins 工作几乎跑了 1:30 分钟是 jdbc 连接松动的原因

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T18:19:34.350

您能否使用标准 SQL 导航器产品（如[squirrel](http://www.squirrelsql.org/) ）连接到相同的 JDBC URL ？

也许这很明显，例如数据库已关闭。

# 更新

以下线程描述了相同的问题：

*   [http://ubuntuforums.org/showthread.php?t=991141](http://ubuntuforums.org/showthread.php?t=991141)

在这种情况下，这是 MySQL 服务器上的权限问题。客户端 IP 地址受到限制。

# timezone - Unix 时间戳和时区

> ID：10320607
> 
> 赞同：1
> 
> 时间：2012-04-25T17:17:56.063
> 
> 标签：timezone, unix-timestamp, php

快速提问。我正在使用 Instagram API，我从他们的回复中得到的一切似乎都是太平洋时区。现在，我想保存这些数据以供使用并将其显示给访问者。问题是，访客可能来自所有不同的时区。那么我应该将其转换为 GMT 的 unix 时间戳，然后在显示时使用某种 javascript 或 PHP 将 unix 时间戳转换为用户友好的时区调整日期时间？

如果是这样，我的两个问题是......如何将 PST 时区的时间戳转换为 GMT 以及如何将其显示给来自不同时区的用户？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T17:27:40.647

您可以创建几个 TimeZone 对象，然后在正确的时区创建 DateTime 对象以进行转换

```
$pdtTimezone = new DateTimeZone('America/Los_Angeles');
$userTimeZone = new DateTimeZone(whatever_you_need);

$orig_date_obj = new DateTime( time_to_convert , $pdtTimezone) ;
$orig_date_obj->setTimeZone($usertimezone); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T17:29:20.657

您可以通过在 php 中使用 DateTime 来计算从一个时区转换到另一个时区所需的偏移量。见[http://blog.serverdensity.com/2009/03/21/handling-timezone-conversion-with-php-datetime/](http://blog.serverdensity.com/2009/03/21/handling-timezone-conversion-with-php-datetime/)

# scroll - Bootstrap：如何启用滚动条？

> ID：10320608
> 
> 赞同：15
> 
> 时间：2012-04-25T17:18:02.787
> 
> 标签：scroll, scrollbar, twitter-bootstrap

我在我的一个项目中使用 Twitter Bootstrap，但是我的内容超出了浏览器视图的问题。通常您会在屏幕右侧看到滚动条，但在我的情况下没有。`overflow: hidden;`我在之后或类似的东西中搜索了引导 css 文件并将其删除，但这并没有解决问题。

有人知道如何在引导 css 中启用滚动条吗？（没有引导 css 显示条形）

编辑：

我发现`navbar-fixed`您可以添加的黑色导航栏中的问题。没有`postition: fixed`它工作正常。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-02T17:48:53.983

确保`<div>`导航栏中的所有内容都已关闭。如果不是，则固定属性由降序标签继承，滚动条消失。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T16:55:45.453

**我发现删除导航栏的“位置：固定”为我解决了这个问题：**

```
.navbar-fixed-top, .navbar-fixed-bottom {
    /*position: fixed;*/
    right: 0;
    left: 0;
    z-index: 1030;
    margin-bottom: 0;
} 
```

这家伙还有一些更有用的信息：[http ://davidlains.com/strange-twitter-bootstrap-scrolling-issue](http://davidlains.com/strange-twitter-bootstrap-scrolling-issue)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-12-18T10:23:32.810

用你的最后一个样式表覆盖它。
（可能是您自己的主题样式表。）

```
html, body {
    overflow: visible;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-17T07:40:25.780

`</div>`您的 HTML 代码中缺少一个结束符。对于每一个`<div class="foobar">`你必须有一个结束`</div>`。当使用 twitter 引导程序而不关闭 div 时，可能会发生此（滚动问题）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-15T16:36:51.127

```
<style type="text/css">
            body, html {
                height: 100%;
                overflow: hidden;
            }

            .navbar-inner {
                height: 40px;
            }

            .scrollable {
                height: 100%;
                overflow: auto;
            }

            .max-height {
                height: 100%;
            }

            .no-overflow {
                overflow: hidden;
            }

            .pad40-top {
                padding-top: 40px;
            }
    </style> 
```

希望这是您正在寻找的

# android - 使用 sdcard 或文件系统中某处的文件启动 Android 应用程序

> ID：10320609
> 
> 赞同：0
> 
> 时间：2012-04-25T17:18:14.253
> 
> 标签：android, cordova, filesystems

我使用 phonegap/cordova 制作了一个应用程序，我需要让很多文件保持最新。一些文件（主要是图像）需要及时删除，一些新文件将被下载。问题是，在 Android 中，要操作这些文件，我似乎需要将它们放在 sdcard 上；所以我将应用程序开始的文件从我的资产文件夹复制到 sdcard。这似乎是在浪费内存空间。

你知道我是否可以从应用程序开始，这些应用程序已经在 sdcard 中启动了这些文件？或者至少在某个地方我可以稍后删除它们？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T18:46:21.723

作为 APK 的一部分传递到设备的文件将以您的应用程序无法修改的形式存储（更新到新版本的 apk 除外）。

如果您将APK中的文件复制到私有内部存储区域或外部存储区域，则可以修改这些副本，但会保留apk中的原始文件。

最有效的解决方案可能是不将这些文件放在您的 apk 中，而是让您的应用程序在第一次运行时单独下载它们，使用您将来想要使用的任何机制来更改它们。

（有些人反对这种感觉，即此类文件对于未经授权的使用不太安全，但由于 .apk 的内容很容易提取，这不是一个强有力的论据。需要维护一个服务器来下载是一个稍微更实质性的反对意见.)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T17:41:01.067

您不需要将文件存储在 SD 卡上。每个应用程序都有自己的内部存储，任何其他应用程序都无法访问。更多信息参见官方文档：http: [//developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

# ios - Xcode 4 Memory Leak Instrument如何获取发生泄漏的代码行

> ID：10320610
> 
> 赞同：0
> 
> 时间：2012-04-25T17:18:19.643
> 
> 标签：ios, memory, automatic-ref-counting, memory-leaks

我正在尝试在带有 iOS 5.1（启用 ARC）的 Xcode 4 中使用 Memory Leak 工具，并且我发现了内存泄漏，但是我到底是如何到达导致泄漏的代码行的呢？我已经阅读了一些关于此的教程，但它似乎是检测工具的旧版本，因为当我单击扩展详细信息选项卡并双击回溯中的项目时，我只会看到无用的汇编代码。此外，stacktrace 上的所有项目都不是我编写的任何类。我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T20:13:56.430

If your code leaks memory, you will see your relevant methods in the details tab, right where you are looking. They are displayed in black as opposed to methods in the APIs which are gray. You can't look into API Methods of course, hence the assembly code. If there is really something wrong in your code, set the slider on the bottom of the tab on the rightmost position and you should see the concerned methods.

If still none of them are in your code, you probably just don't leak anything. (There are actually not many scenarios in which ARC-Code can leak memory. Retain cycles are probably the most common one) I stumbles over one or two cases in which an API was 'leaking' memory. There is really nothing you can do about it and most likely, it's just a false positive anyway rather than a real leak. If you are only 'leaking' a few bytes, I wouldn't worry about it.

# java - 在 JfreeChart Plot 中识别“点击点”和点击的子图的问题

> ID：10320612
> 
> 赞同：1
> 
> 时间：2012-04-25T17:18:22.137
> 
> 标签：java, plot, jframe, mouseevent, jfreechart

我花了几天时间试图解决它，但它似乎比预期的要复杂。

我有一个应用程序，它有一个 Jframes 树作为结构（像往常一样）；在这棵树中，我有一个如下所示的子结构：

MyPanel（扩展 JPanel）包含：MyChartPanel（扩展 ChartPanel）包含：FreeChart 图表 => CombinedDomainXYPlot - globalPlot 包含：几个 XYPlot

我已经放了“打印”，所以我可以看到用户（我，到目前为止）点击或移动鼠标的位置。我不知道为什么，只是子情节总面积的一个子区域说“是我”。我的意思是，只是一个子矩形告诉我那个情节，虽然我可以看到子情节更大，但是如果我点击或将鼠标移动到最右边，任何子情节都没有答案。

从左侧到右侧有一个恒定的距离，我当然可以点击子图，但是从那个“垂直边界”，我点击并且我没有得到子图，即使至少有 15 - 20 % 以上右边的子图。

我对“自上而下”的方向没有任何问题，只有右侧的 15-20%。

如果我缩小应用程序窗口，使其宽度等于或小于该恒定距离，那么我可以毫无问题地单击子图的最右边；它告诉我完美的 X 子图。

即使我没有添加除主要情节之外的任何其他情节，但在尝试识别我正在单击的子情节（唯一的情节）时我也会遇到同样的问题。

我不是在寻求解决方案，而是想知道可能是什么问题，因为我已经用完了它们。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T08:49:17.897

问题是我不小心注释了我用来将坐标从屏幕转换为 Jav2D 的代码。

希望发布我的错误可以为某人节省一些时间。

# java - 从 java GUI 检索多个文件

> ID：10320615
> 
> 赞同：1
> 
> 时间：2012-04-25T17:18:26.210
> 
> 标签：java, database, user-interface

所以我正在做一个项目，我应该将.csv文件的内容动态加载到数据库中。到目前为止，我一直在硬编码文件的路径，比如

*插入 = insertFromFile("C:/Users/Student/Desktop/Book1.csv",connection, "customer");*

但是现在我必须从一个文件夹中读取多个文件并将程序与 GUI 集成。我有两个问题：

a）我如何从一个文件夹中读取多个文件 b）我如何检索插入语句的文件路径

任何帮助表示赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T17:22:46.367

文件选择器的 Java[教程](http://docs.oracle.com/javase/tutorial/uiswing/components/filechooser.html)是一个很好的入门资源。要从文件夹中读取多个文件，您可以设置文件选择器，以便您只能选择目录。这将假设您想要从该文件夹加载*所有*文件。否则，您可以有自己的逻辑来加载哪些文件扩展名。

如果您只想要文件夹中某些文件的子集，则需要在文件选择器中允许多选。

同一教程将向您展示如何检索所选文件名，但简短的回答是：您调用`getSelectedFiles()`

# google-chrome - 在不卸载我的扩展程序的情况下恢复 chrome new-tab

> ID：10320616
> 
> 赞同：2
> 
> 时间：2012-04-25T17:18:29.030
> 
> 标签：google-chrome, google-chrome-extension

我有一个 chrome 扩展，其中包括替换新标签功能。但由于我无法恢复所有新标签功能（帐户同步登录、书签、网络应用程序、最近的网站、最流行的）。我希望用户能够在不卸载我的扩展程序的情况下恢复默认的新选项卡。

根据我的调查，有内部 chrome 方案：“ **chrome-internal://** ”，其 URL 为：**chrome-internal://new-tab/**。当我尝试从我的扩展程序导航到它时，它似乎不起作用（拒绝授权，尽管我在 mainfest 中请求了它）。但是当从 chrome（js 控制台）导航到它时，它确实显示了默认的新选项卡。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T04:10:27.373

在 Chrome 扩展程序中，您可以通过调用`update`它来设置一个标签以显示原始的 chrome 新标签页：

```
chrome.tabs.update({
    url: 'chrome-internal://newtab/'
}); 
```

“[新标签”](https://chrome.google.com/webstore/detail/new-tab/adcpijkmbecohfalcbafjgadfnpchhlg) chrome 扩展就是这样做的。[查看 GitHub 上的代码](https://github.com/adamschwartz/chrome-new-tab/blob/e705facdca77f575ad3d8b66df1c43be2b34088e/app.js#L38)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-07T04:03:29.430

亚历克斯是对的。来自 Chrome 33+

```
https://www.google.co.jp/_/chrome/newtab?ie=UTF-8 
```

代替`chrome-internal`

和`chrome://apps`作品。

# jquery - jQuery Mobile：固定侧边栏与固定标题一起使用

> ID：10320617
> 
> 赞同：0
> 
> 时间：2012-04-25T17:18:37.160
> 
> 标签：jquery, html, jquery-mobile, css-position

我想在页面左侧有一个垂直拆分视图栏，它像`data-position="fixed"`我拥有的​​标题栏一样保持固定。

就像在[这个例子](http://jquerymobile.com/test/docs/toolbars/bars-fixed.html)中一样（编辑：这个链接现在坏了），但左边的列表也固定了，与标题一起标记。

我考虑过尝试将其插入标题中以“继承”固定定位。不确定这是否可行。

这是我的样式表的内容。

```
.content-right {
    float: right;
    width: 75%;
}
.content-left {
    width: 23%; /* Not 25%: I am not using padding */
} 
```

div 首先出现`.content-right`在 HTML 中。

如果固定标题被隐藏（通过单击），我还希望该栏优雅地向上滑动，但这并不重要（我现在可以强制单击隐藏）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T22:07:06.183

Nothing out of the box.

You could use my [multiview plugin](https://github.com/frequent/multiview), which is in the works. I'm finishing the navigation and panel history right now. Plus fixing everything for tablet/smartphone view. If you don't mind the bugs still in there for now it would be ready to use (please post issues on Github).

Here is one sample page I'm working currently testing with: [sample-overthrow](http://www.stokkers.mobi/jqm/multiview/sample-over.html)

This view locks the screen and scrolls each panel separately using [overthrow](https://github.com/filamentgroup/Overthrow/). Nothing to configure except add *data-scrollmode="overthrow"* to the wrapper page. Check the HTML to see how its set up. Also beware, this is my first attempt at integrating Overthrow and it's not very smooth yet.

in which the whole page scrolls like a regular JQM page. This is the default behavior.

You can use 1/2/3 panels side by side (need to label them "menu", "mid" and "main", I'm removing "fullwidth" from the code - used in previous versions), so if you only want a "navbar/sidebar" on the side, just use a menu with ... 50px width and put your toolbar in there. The main panel should scale automatically to fill the screen. I also started on a yield-mode which allows to slide in/out the toolbar. Haven't got around to finishing this yet.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T15:56:43.063

我想出的解决方案在左侧使用一个固定的 div，而右侧是自然滚动的实际“页面”。

由于我的左 div 超出了页面，因此在桌面浏览器上，滚动条也离开了页面。这需要处理。但是，在iOS5上，*完美*`-webkit-overflow-scrolling: touch`的使用 了固定的div滚动功能！

# jquery - ajax 'GET' 调用返回 jsonp 正常，但回调产生 'undefined' 数据

> ID：10320619
> 
> 赞同：3
> 
> 时间：2012-04-25T17:18:45.063
> 
> 标签：jquery, get, jsonp

我正在使用来自 html 页面的 an.ajax jquery 调用访问跨域 Web 服务。虽然我可以使用 firebug 查看 jsonp 数据，但我无法将其加载到变量中，甚至无法显示它（出于调试目的）。尝试使用 jsonpCallback、success 和 complete 函数检索数据始终会导致“未定义”/空数据。

最终，我需要将数据保存到变量中。任何帮助将不胜感激！

```
$.ajax({
    data: {
        User: UserValue,
        GUID: GUIDValue
    },
    cache: false,
    dataType: "jsonp", // tried json
    type: "GET",
    crossDomain: true,
    jsonp: false,  // tried true
    jsonpCallback: function (saveData) {
        if (saveData == null) {
            alert("DATA IS UNDEFINED!");  // displays every time
        }
        alert("Success is " + saveData);  // 'Success is undefined'
    },
    url: "http://localhost/NotifMOD/NotifService.svc/GetAllMessages?callback=success?",
    async: false, // tried true
    error: function (XMLHttpRequest, textStatus, errorThrown) {
         console.log(textStatus, errorThrown);
    },
    complete: function (a, b) {
        alert(a); //[object Object]
        alert(b); // parseerror
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T17:22:45.617

在 JSONP 中，您必须在代码中定义您的函数。

jsonpCallback 必须是这个函数的名字，而不是一个函数。

见[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

你这样做：

```
function receive(saveData) {
    if (saveData == null) {
            alert("DATA IS UNDEFINED!");  // displays every time
    }
    alert("Success is " + saveData);  // 'Success is undefined'
}

$.ajax({
    data: {
        User: UserValue,
        GUID: GUIDValue
    },
    cache: false,
    dataType: "jsonp", // tried json
    type: "GET",
    crossDomain: true,
    jsonp: false,  // tried true
    jsonpCallback: "receive",
    url: "http://localhost/NotifMOD/NotifService.svc/GetAllMessages?callback=receive?",
    async: false, // tried true
    error: function (XMLHttpRequest, textStatus, errorThrown) {
         console.log(textStatus, errorThrown);
    }
}); 
```

# xml - 在 XSL 转换后保留 PDF 中的空白

> ID：10320622
> 
> 赞同：12
> 
> 时间：2012-04-25T17:19:05.260
> 
> 标签：xml, xsl-fo

我正在使用 XSL 转换将 XML 转换为 PDF。不幸的是，它没有保留 XML 中的空白。例如：

我想转换这个：

```
Test Line Data         : 0xAA 
```

从 XML 到 PDF。它在 XML 中看起来不错，它在 Data 和 : 之间有 9 个空格，但在 PDF 中它显示

```
Test Line Data : 0xAA 
```

这是我目前所做的。将数据写入 XML 后，我将执行以下操作：

```
XPathDocument xPathDocDiag = new XPathDocument(this.FileNameDiagXml);
XslCompiledTransform xslTransDiag = new XslCompiledTransform();
XmlTextWriter xmlWriterDiag = new XmlTextWriter(outputFO, System.Text.Encoding.UTF8);
xslTransDiag.Transform(xPathDocDiag, null, xmlWriterDiag);
xmlWriterDiag.Flush();
xmlWriterDiag.Close(); 
```

然后启动 Apache FOP 将 FO 转换为 PDF。就像我说的，不幸的是，当我需要它时，空白并没有被保留。我尝试在 XML 中手动添加空格（查找和替换），这在转换后确实有效，但众所周知，文字 & 不能在 XML 中，因此该选项不可用。我试过使用 XmlReader 然后使用

```
<xsl:preserve-space elements="*"/> 
```

但同样，这也不起作用（没有错误或任何东西，只是不起作用）。
XSL 部分如下所示：

```
<xsl:when test="Data != ''">
                <fo:table-cell text-align="left">
                    <fo:block />
                </fo:table-cell>
                <fo:table-cell text-align="left" number-columns-spanned="7">
                    <fo:block font-family="Courier New, Courier, monospace" font-size="9pt"><xsl:value-of select="Data" /></fo:block>
                </fo:table-cell>
            </xsl:when> 
```

我尝试了各种属性修改无济于事。我在这里遗漏了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-25T18:37:45.593

将属性添加到要保留空白的`white-space="pre"`任何内容中。`fo:block`

例子：

```
<fo:block white-space="pre">Test Line Data         : 0xAA</fo:block> 
```

该属性`white-space-treatment="preserve"`也应该有效，但是当我在 FOP 中尝试时，它没有。

该属性`white-space-collapse="false"`也有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T18:42:05.670

我找到了答案。 [http://groups.yahoo.com/group/XSL-FO/message/4128](http://groups.yahoo.com/group/XSL-FO/message/4128) 当我将 white-space-collapse="false" 放入 fo:block 时，空白被保留。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-30T05:47:30.597

您可以在 fo 块标签中使用 space-after=5mm。例子

```
<fo:block space-after=5mm>Something</fo-block>
<fo:block>SomethingSomething</fo:block> 
```

第一行将在文本“Something”之后创建 5 毫米的空间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-04T04:17:58.373

您可以在后面添加空格

```
<fo:block space-after=7mm>Your te</fo-block> 
```

# r - 在 r 中的一个因子的级别内排序和编号

> ID：10320632
> 
> 赞同：3
> 
> 时间：2012-04-25T17:20:34.633
> 
> 标签：r

如果我有以下数据框 G：

```
z    type   x   
1     a     4
2     a     5 
3     a     6
4     b     1
5     b     0.9
6     c     4 
```

我试图得到：

```
z    type   x   y
3     a     6   3
2     a     5   2
1     a     4   1
4     b     1   2
5     b     0.9 1
6     c     4   1 
```

`type`即我想在基于向量的因子级别内对整个数据框进行排序`x`。获取每个级别的长度，`a = 3 b=2 c=1`然后在新向量中以递减的方式编号`y`。

我的出发地目前是`sort()`

```
tapply(y, x, sort) 
```

最好先尝试使用 sapply 来拆分所有内容吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-25T17:31:20.777

有很多方法可以给这只猫剥皮。这是一种使用基本 R 和矢量化代码分两步（没有任何`apply`）的解决方案：

1.  `order`使用和对数据进行排序`xtfrm`
2.  使用`rle`和`sequence`生成序列。

复制您的数据：

```
dat <- read.table(text="
z    type   x   
1     a     4
2     a     5 
3     a     6
4     b     1
5     b     0.9
6     c     4
", header=TRUE, stringsAsFactors=FALSE) 
```

两行代码：

```
r <- dat[order(dat$type, -xtfrm(dat$x)), ]
r$y <- sequence(rle(r$type)$lengths) 
```

结果是：

```
r
  z type   x y
3 3    a 6.0 1
2 2    a 5.0 2
1 1    a 4.0 3
4 4    b 1.0 1
5 5    b 0.9 2
6 6    c 4.0 1 
```

* * *

调用`order`有点复杂。由于您要按升序对一列进行排序，然后按降序对第二列进行排序，因此请使用辅助函数`xtfrm`。有关详细信息，请参阅`?xtfrm`，但它也在 中进行了描述`?order`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-25T17:35:30.657

我更喜欢安德烈：

```
dat <- read.table(text="z    type   x   
1     a     4
2     a     5 
3     a     6
4     b     1
5     b     0.9
6     c     4", header=T) 
```

三行代码：

```
dat <- dat[order(dat$type), ]
x <- by(dat, dat$type, nrow)
dat$y <- unlist(sapply(x, function(z) z:1)) 
```

我编辑了我的回复以适应安德烈提到的评论。这行得通，但如果你走这条路而不是安德烈，那你就疯了。

# mongodb - mongo - 如何查询嵌套的 json

> ID：10320633
> 
> 赞同：18
> 
> 时间：2012-04-25T17:20:34.727
> 
> 标签：mongodb

我是一个完整的mongo新手。我正在使用 mongo hub for mac。我需要查询以下 json -

```
{ "_id" : ObjectId( "abcd" ),
"className" : "com.myUser",
"reg" : 12345,
"test" : [ 
{ "className" : "com.abc",
  "testid" : "pqrs" } ] } 
```

并查找 testid 为 pqrs 的记录。我该怎么做呢？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-04-25T17:26:57.807

您可以`{'test.testid': 'pqrs'}`在 Mongo Hub 的查询字段中输入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-02-22T04:22:11.690

看起来像是`test`一个数组。如果您期望数组中有多个值，您可以这样做 -

```
"test": { 
    "$elemMatch": {
        "testid": "pqrs",
    }
} 
```

# iphone - 创建自定义 UIGestureRecognizer

> ID：10320641
> 
> 赞同：4
> 
> 时间：2012-04-25T17:21:17.507
> 
> 标签：iphone, objective-c, ios

我已经毫无问题地创建了几个自定义 UIGestureRecognizers。我决定我想要一个自定义版本的单击手势并着手继承 UIGestureRecognizer。除了一个问题，一切似乎都很好。在我的动作处理程序 [gestureRecognizer locationInView:self] 中，x 和 y 总是返回零。当我回到 UITapGestureRecognizer 时，动作处理程序工作正常。这一定与子类手势识别器有关，这是我的代码：

```
#import "gr_TapSingle.h"

#define tap_Timeout 0.25

@implementation gr_TapSingle

- (id)init
{
    self = [super init];
    if ( self )
    {
    }
    return self;
}

- (void)reset
{
}

-(void)gesture_Fail
{
    self.state = UIGestureRecognizerStateFailed;
}

-(void)touchesBegan:(NSSet*)touches withEvent:(UIEvent*)event
{
    [super touchesBegan:touches withEvent:event];

    if ( [self numberOfTouches] > 1 )
    {
        self.state = UIGestureRecognizerStateFailed;
        return;
    }

    originLocation = [[[event allTouches] anyObject] locationInView:self.view];

    [self performSelector:@selector(gesture_Fail) withObject:nil afterDelay:tap_Timeout];
}

-(void)touchesMoved:(NSSet*)touches withEvent:(UIEvent*)event
{
    [super touchesMoved:touches withEvent:event];

    if ( self.state == UIGestureRecognizerStatePossible )
    {
        CGPoint l_Location = [[[event allTouches] anyObject] locationInView:self.view];
        CGPoint l_Location_Delta = CGPointMake( l_Location.x - originLocation.x, l_Location.y - originLocation.y );
        CGFloat l_Distance_Delta = sqrt( l_Location_Delta.x * l_Location_Delta.x + l_Location_Delta.y * l_Location_Delta.y );
        if ( l_Distance_Delta > 15 )
            self.state = UIGestureRecognizerStateFailed;
        return;
    }
}

-(void)touchesEnded:(NSSet*)touches withEvent:(UIEvent*)event
{
    [super touchesEnded:touches withEvent:event];

    if ( self.state == UIGestureRecognizerStatePossible )
        [[self class] cancelPreviousPerformRequestsWithTarget:self selector:@selector(gesture_Fail) object:nil];

    if ( self.state != UIGestureRecognizerStateFailed )
        self.state = UIGestureRecognizerStateEnded;
}

-(void)touchesCancelled:(NSSet*)touches withEvent:(UIEvent*)event
{
    [super touchesCancelled:touches withEvent:event];
    if ( self.state == UIGestureRecognizerStatePossible )
        [[self class] cancelPreviousPerformRequestsWithTarget:self selector:@selector(gesture_Fail) object:nil];
    self.state = UIGestureRecognizerStateFailed;
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T17:35:29.513

苹果的文档说：

> 返回值是 UIKit 框架计算的手势的通用单点位置。它通常是手势中涉及的触摸的质心。对于 UISwipeGestureRecognizer 和 UITapGestureRecognizer 类的对象，该方法返回的位置对于手势具有特殊的意义。这种重要性记录在这些类的参考中。

所以我假设每个子类都有它自己的这个方法的特殊实现，适合它自己的专长。所以如果你想子类化，你必须自己实现它`UIGestureRecognizer`。

编辑：

就像是：

```
- (CGPoint)locationInView:(UIView *)view
{
   if(view == self.view)
   {
      return originLocation;
   }
   else
   {
     //you decide
   }
} 
```

# php - iCal 后端 - 重复日期

> ID：10320644
> 
> 赞同：1
> 
> 时间：2012-04-25T17:21:25.360
> 
> 标签：php, mysql, icalendar

我正在构建一个使用 FullCalendar 作为前端的日历系统。后端将是 MySQL/PHP。

它将存储由应用程序生成和插入的用户的公共约会列表。这些约会将是一个单一的事件，将在同一天开始和结束。此外，由于个人承诺，用户将能够在日历中标记其不可用。后一种功能需要使用重复事件。我一直在考虑使用基于 iCal 的结构，而不是重新发明轮子。这篇文章对[ical-field-list-for-database-schema-based-on-ical-standard](https://stackoverflow.com/questions/1054201/ical-field-list-for-database-schema-based-on-ical-standard)确定数据库结构非常有帮助。

我创建了申请表，允许用户输入必要的数据以存储私人单次/定期约会。提交表单后，数据通过 Ajax 发送到服务器。我发现了一个很棒的 PHP 脚本，它可以根据用户输入的参数生成一个重复日期数组，可以是原生格式，也可以是使用 RRULE。

我不确定存储/检索这些重复日期的最佳方式是什么。应用程序需要能够为用户呈现日历视图，包括公共和私人日期。该应用程序还需要能够返回例如在给定时间/日期期间可能有空的所有用户。

以 iCal 格式存储所有事件并能够根据需要检索事件是否足够？我预见的问题是重复事件不容易搜索，因为它们的参数必须动态扩展？我正在考虑为每个单独的事件（如生成的）创建第二个表，并引用创建它的原始 RRULE。我希望限制用户可以输入的重复日期的数量，以防止用户在接下来的 100 年内每天都输入事件！我认为这种方法还可以让我编辑最初由重复规则创建的单个事件。

这是一个好方法，还是有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T17:26:05.607

沿着以下几行的表格怎么样：

```
CREATE TABLE RecurringAppointments (
    startdate DATE NOT NULL,
    enddate   DATE,
    freq      INT  NOT NULL, -- contains #days between each occurrence
    -- etc.
 ) 
```

然后，获取发生在给定的所有此类约会`thedate`：

```
SELECT * FROM RecurringAppointments
WHERE
      thedate BETWEEN startdate AND enddate
  AND DATEDIFF(thedate, startdate) % freq = 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T07:10:30.077

看看在[构建日历应用程序时，我应该在我的数据库中存储日期还是重复规则？](https://stackoverflow.com/questions/4239871/when-building-a-calendar-app-should-i-store-dates-or-recurrence-rules-in-my-dat/10163834#10163834).

您应该存储与有效性信息相关联的 rrule、exrule、rdate 和 exdate（以便能够跟踪随时间的变化：例如，如果您的用户可能想回顾过去发生的特定事件以及 rrule 在发生和他/她回顾的时间点），对于发生次数有限的事件，对时间窗口进行开始和结束的预计算，以便于查询，并有一个滚动窗口，您可以在其中发生发生表中的所有事件。当用户在时间窗口之外寻找事件时（应该很少有人会回顾一年多或未来一年多），您计算特定于用户请求的时间窗口的相关事件并即时生成它们.

# android - 在 Android 中移动目录的最快方法是什么？

> ID：10320655
> 
> 赞同：4
> 
> 时间：2012-04-25T17:22:27.917
> 
> 标签：android

在 Android 中移动目录的最快方法是什么？在大多数（但不是所有）情况下，源和目标位于同一个 sdcard 文件系统上。

当前，我的代码遍历整个目录结构，并将每个文件的内容复制到新位置的同名新文件中。然后它验证文件大小匹配，然后删除源文件。

对于每个文件，我当前运行（带有额外的异常处理）：

```
 try{
      source = new FileInputStream(fileFrom).getChannel();
      destination = new FileOutputStream(fileTo).getChannel();
      destination.transferFrom(source, 0, source.size());
    } finally {
      source.close();
      destination.close();
    } 
```

对于我期望的可能是原始文件系统级别的简单即时“节点修改”​​，这似乎很慢以及大量计算工作的方式。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-25T17:26:32.550

只要文件在同一个文件系统上，您实际上就可以移动它们[File#renameTo(File)](http://developer.android.com/reference/java/io/File.html#renameTo%28java.io.File%29)。

```
if (!fileFrom.renameTo(fileTo)) {
    copy(fileFrom, fileTo);
    // delete(fileFrom);
} 
```

# php - 如何做'如果数据是所有选项卡（ \t ）不打印行'？

> ID：10320656
> 
> 赞同：0
> 
> 时间：2012-04-25T17:22:29.860
> 
> 标签：php, regex

'如果数据是所有选项卡不打印行'怎么办？

如果我不想打印只包含制表符的行，我应该如何更改我的代码？

我正在考虑以某种方式使用 preg_match ，即`preg_match('#(/\t+/)#',$lines[$i])`

但这会破坏我的代码，因为它将制表符分隔的文件转换为表格，删除开始`<tr>`标记使其以这种方式工作（没有制表符行），但我不能在`<tr>`那时放置一个类。

PHP：

```
 echo "<table id='schedule_table'>"; 

//split into array by return\linefeed
$lines=explode("\r\n",$file);
//replace digits with class
$lines=preg_replace('#(\d+)#','<span class="table_digit">$1</span>',$lines);
//loop through rows
for($i=0;$i<count($lines);$i++) 
{ 
//if not blank then print row
if($lines[$i]!=""&&$lines[$i]!=" "&&$lines[$i]!=null)
    {
    echo "<tr class='schedule_row' value='$lines[$i]'>";
    //if row is 0 cell type is header
    $cell_type="td";
    $cell_class="schedule_cell";
    if($i==0)
    {
        $cell_type="th";
        $cell_class="schedule_hcell";
    }
    //end if

    //split into array by tabs
    $items=explode("\t",$lines[$i]);
    //loop through cells 
    for($j=0;$j<count($items);$j++) 
    { 
        //if not blank then print cell
        if($items[$j]!=""&&$items[$j]!=" ")
            {
            echo "<$cell_type class=$cell_class>".$items[$j]."</$cell_type>"; 
            }
    } 
    echo "</tr>"; 
    }
} 
echo "</table>"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T18:09:15.897

锚定你的正则表达式：

```
preg_match('/^\t+$/', $line) 
```

在您的代码中使用此正则表达式：

```
if ($lines[$i]!="" && $lines[$i]!=" " && !preg_match('/^\t+$/', $line[$i])) 
```

# c++ - 两个插件链接到具有不同实现（代码）的同名 DLL 或共享库对象（so）

> ID：10320658
> 
> 赞同：5
> 
> 时间：2012-04-25T17:22:38.020
> 
> 标签：c++, windows, linux, dll, ambiguous

我有两个“插件”（为了讨论起见，将它们视为软件包中的两个不同应用程序）动态链接到我的库的两个单独构建的版本。我的代码是用 C++ 编写的，并且始终使用一致的命名空间。有时我必须为每个应用程序构建两个不同的版本。当包中的两个应用程序（插件）同时加载时，这似乎会导致一些问题。首先，我需要帮助了解为什么会发生此错误。

例如，我有两个独立但名称相同的库，比如说`mylib.so`（或 DLL），每个应用程序都链接到其中一个（唯一）。如果底层代码`mylib.so`相同（即名称空间、函数名称等，当然实现略有不同），这会导致问题吗？库的两个副本位于独特的位置这一事实是否足以避免由于歧义或其他链接错误而可能出现的任何问题？我认为显然不是..但我想听听专家的意见。

假设上面的描述是导致问题的原因，是否只是更改库的名称以包含一些版本信息，例如，`mylib_v1.so`并`mylib_v2.so`提供对歧义错误的保护（底层函数/命名空间名称仍然相同）？我仍然认为不是..但这次我不确定。假设我是对的，那么在我的代码中使用一些宏来更改命名空间以在命名空间中包含版本信息（例如，`namespace mystuff {}`更改为`namespace mystuff_v1`）至少可以解决问题吗？欣赏您的见解。

注意：令人惊讶的是，歧义只发生在 Windows 上！Linux 能够毫无问题地处理第二段中的情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T18:01:18.143

如果应用程序唯一地只使用一个，并且 PATH 和 LD_LIBRARY_PATH 设置为不满足，则不会发生冲突。您可以看到数百个类似的 msvcrt.dll 文件曾经与应用程序一起分发，直到 Microsoft 将其整理出来。

但是，您的（略有不同的）代码可能会创建或引用全局资源，这可能是冲突。确定 Windows 变体不使用全局命名的东西，并在这里引入不同的数据结构？（用于存储标准设置、共享内存等的文件）。由于这种全局性的东西主要依赖于系统——也许你在 Windows 上做了一些你在 Linux 上不做的事情......

# git - 如何使用 git 来保护我的作品并获取更新？

> ID：10320659
> 
> 赞同：2
> 
> 时间：2012-04-25T17:22:38.220
> 
> 标签：git

谁能给我一些关于如何使用 Git 的指导，以便我可以进一步阅读手册。现在手册对我来说太复杂了。

我正在使用开源代码，我不是核心开发人员，但我也在开发我所在领域的一些模块。但是核心团队不会接受我的开发。我希望我可以将所有修改和新添加的模块保存在存储库或类似的东西中，我可以在 github 上看到它们。但与此同时，我想继续更新核心开发人员的所有未更改的文件，如果有冲突或文件，我想简单地保留我的。

那么，我应该创建一个新的分支，还是创建一个 fork，还是创建一个新的存储库？

比如我 git clone blahblah 之后，几天后，我 git pull 到 uodate，然后我修改了一个文件-A，并在 B 下添加了一个新的 dir B 和一个文件 C。我现在该怎么办？因为每当我再次 git pull 时，都会出现警告错误，说明某些文件存在冲突。

* * *

## 我的问题的更新：

谢谢，这很有帮助。

如果我错了，请纠正我，我现在需要做的是：

1.  转到 github，并为原始项目 repo 创建一个分支。这是否意味着我正在我的帐户下创建一个新的回购？

2.  那么，这个新的 repo 就会有一个 git 链接地址，对吗？

3.  然后我只是在我的电脑上使用， git clone this_new_git_repo_link 来复制整个项目。

4.  在我自己的计算机上添加或修改，并学习提交所有更改，

5.  然后将通过我的新仓库从在线 github 看到这些更改。

6.  当上游发生变化时，在我自己的计算机上，我创建了一个名为“上游”的新分支？？从我自己的 fork repo 复制的原始版本默认称为“master”，

7.  然后使用命令checkout切换到上游分支，然后执行'git pull'，这将在我自己的计算机上创建两个版本，一个是更新版本，另一个是我的修改版本。

8.  这里的问题是如何将这个更新的分支“上游”合并到我自己的分支“master”中，合并那些我从未更改过的文件的命令是什么。因此，在切换回我自己的“master”分支后，我可以进行提交，所以我的在线仓库将包含上游更新和我自己的修改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T19:03:00.803

`origin`回复您的更新：您必须在 4 到 5 之间推送到您的 github repo ( )。

`upstream`7：根据[GitHub 指南](https://docs.github.com/en/github/getting-started-with-github/fork-a-repo)，您已将远程添加到本地存储库。获取它（`git fetch upstream`）后，修改位于远程分支中，`upstream/master`.

大多数情况下，您希望在此分支上重新调整*您的*更改（即只有*您*`git rebase upstream/master`所做的更改），使用，或将其合并到您的分支`git merge upstream/master`。

8：一旦你与上游重新定位（或合并），继续照常工作：提交，推送。更改将在您推送时发布，并将发生在*您*与上游同步的版本上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T17:35:33.967

如果您和其他开发人员正在使用 github，那么我会分叉主 repo 并将其设置为上游。然后，您可以在自己的 master 分支中工作，并随心所欲地推送和拉取自己的工作。如果上游分支发生变化并且您想拉入更改，您可以考虑创建一个新分支以轻松标记您所在的位置（您以后可以随时删除此分支），然后切换回主分支，然后拉入上游更改您的主分支。你可能会遇到合并冲突，但 git 会在你的 master 分支的文件中标记这些冲突。如果您不喜欢核心开发人员的更改，您可以删除他们添加的所有或部分冲突代码，然后继续正常工作。

您可以无限期地重复此循环，以便您与核心保持相对更新。

# asp.net-mvc-3 - 在自定义成员资格提供程序中添加自定义标头

> ID：10320660
> 
> 赞同：0
> 
> 时间：2012-04-25T17:22:39.300
> 
> 标签：asp.net-mvc-3, c#-4.0, http-headers, membership-provider

我有一个 MVC 3 应用程序，我正在尝试为其创建一些自定义身份验证。现在我在所有锁定的控制器上都有一个自定义（RequiresToken）属性，然后重定向回登录页面。当您登录时，我有一个自定义成员资格提供程序调用我的 rest svc，它返回一个 oauth 令牌（带刷新）。然后我想在成员资格提供程序中添加 Authorization 标头，但收到错误：

System.PlatformNotSupportedException：此平台不支持操作。

在我确认结果确认后，我只是在做一个添加。

```
 if (result)
        {
            HttpContext.Current.Request.Headers.Add("Authorization", token.access_token);
        } 
```

这是因为我在另一个程序集中有 MembershipProvider 吗？我知道我遗漏了一些简单的东西，但无法破译它。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:40:06.527

如果您使用的是 Visual Studio Web Server (Cassini)，则会收到此错误。它是您的错误消息中引用的“不受支持的平台”。您应该能够切换到 IIS 的本地安装以缓解此问题。

# java - JPA / Spring Roo：从持久存储中删除实体时是否调用析构事件？

> ID：10320664
> 
> 赞同：3
> 
> 时间：2012-04-25T17:22:53.480
> 
> 标签：java, spring, hibernate, jpa, spring-roo

我有一个引用存储在文件系统上的图像的图像实体（Spring Roo / JPA）。当从持久存储中删除图像实体时，我很想删除这些文件。

我可以在每个 Image 实体上编写一个手动`remove()`方法，使其删除自身及其引用的文件，但这仅在使用该方法手动删除图像时才有效。显然，当删除拥有实体或通过调用它删除图像时级联删除图像时，它不会触发`entityManager.remove()`。

从数据库中删除实体时是否调用了任何类型的方法或事件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T17:54:21.717

就在这里。通常，这些方法称为[生命周期回调方法](http://docs.oracle.com/cd/E16340_01/apirefs.1111/e13946/ejb3_overview_pc_callbacks.html)。在您的情况下，您需要删除后回调方法。这可以定位到单独的类（然后通过 @EntityListeners 注释引用），或者直接定位到您的实体：

```
@PostRemove
protected void postRemoveOperations() {
    //remove images here
} 
```

或者根据细节，[@PreRemove](http://docs.oracle.com/javaee/5/api/javax/persistence/PreRemove.html)可能更有用。

# mysql - 我可以为 MySQL 中的每条记录获取唯一的 TIMESTAMP

> ID：10320667
> 
> 赞同：5
> 
> 时间：2012-04-25T17:23:18.963
> 
> 标签：mysql, sql, timestamp

是否有可能为 MySQL 中的每条记录获取唯一的时间戳值？？

我创建了一个示例表

```
CREATE TABLE t1 (id int primary key, name varchar(50), 
  ts TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP ); 
```

并运行了一些示例 INSERTIONS，似乎时间戳值重复了。

```
e.g  insert into t1(id,name) values(1,"test"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T18:16:08.297

很快的某一天（5.6.4），MySQL 将在 TIMESTAMP 列中提供[小数秒](http://dev.mysql.com/doc/refman/5.6/en/fractional-seconds.html)，但是，即使小数秒也不能保证是唯一的，尽管理论上，它们通常是唯一的，特别是如果您将 MySQL 限制为单个线。

如果您需要临时排序的唯一编号，则可以使用[UUID 。](http://dev.mysql.com/doc/refman/5.5/en/miscellaneous-functions.html#function_uuid)

`SELECT UUID()`产生类似的东西：

```
45f9b8d6-8f00-11e1-8920-842b2b55ce56 
```

一段时间后：

```
004b721a-8f01-11e1-8920-842b2b55ce56 
```

UUID 的前三个部分由时间组成，但是，它们的顺序是从最高精度到最低精度，因此您需要使用`SUBSTR()`和`CONCAT()`这样的反转前三个部分：

```
SELECT CONCAT(SUBSTR(UUID(), 15, 4), '-', SUBSTR(UUID(), 10, 4),
  '-', SUBSTR(UUID(), 1, 8)) 
```

产量：

```
11e1-8f00-45f9b8d6 
```

你显然不能使用这样的函数作为默认值，所以你必须在代码中设置它，但它是一个保证唯一的时间排序值。UUID() 在比秒（时钟周期）低得多的水平上工作，因此每次调用都保证它是唯一的，并且开销低（没有像 auto_increment 这样的锁定）。

在数据库服务器上使用 UUID() 可能比在应用程序服务器上使用类似函数（例如 PHP 的`microtime()`函数）更可取，因为您的数据库服务器更加集中。您可能有多个应用程序（Web）服务器，它们可能会产生冲突值，并且 microtime() 仍然不能保证唯一值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T17:35:54.760

是的，如果您在一秒钟内没有进行两次或多次插入或编辑。唯一的问题是可以在一秒钟内完成很多事情，即使用`where`子句进行多次插入或自动更新。这排除了强制唯一时间戳的简单解决方案：将`unique`约束添加到`timestamp`列中。

为什么 a 应该`timestamp`是唯一的？如果您需要唯一索引等，请使用`auto increment`或其他东西。

如果您需要比 更精确的时间值`timestamp`，请参阅：

*   [http://dev.mysql.com/doc/refman/5.5/en/fractional-seconds.html](http://dev.mysql.com/doc/refman/5.5/en/fractional-seconds.html)（注意：小数部分在插入过程中被丢弃。没有帮助......）
*   [http://codeigniter.com/forums/viewthread/66849/](http://codeigniter.com/forums/viewthread/66849/)（显然`double(13,3)`可以将微时间添加到数据库中。）
*   [MySQL 大于 microtime 时间戳的问题](https://stackoverflow.com/questions/5663504/mysql-greater-than-problem-with-microtime-timestamp)（`int`乘以 100 或 1000 也可以。这里`decimal`是首选`double`。）
*   [为什么 MySQL 不支持毫秒/微秒精度？](https://stackoverflow.com/questions/2572209/why-doesnt-mysql-support-millisecond-microsecond-precision)

# javascript - Jquery 计算不能正常工作

> ID：10320679
> 
> 赞同：1
> 
> 时间：2012-04-25T17:23:52.597
> 
> 标签：javascript, jquery

我有一小段 jQuery 代码，它根据给定的服务计算食谱成分，但在某处它无法正常工作。

我的代码是这样的：

```
Serving: <input type="text" name="serving" class="serving" value="5" /> persons
<input type="hidden" id="previousServing" value="5"/>

        <h3>ingredients</h3>
        <ul class="ingredients">
        <li class="ingredient">
        <span class="amount">1</span> cups
        <span class="name"><a href="http://www.mysite.com/ingredient/yogurt/">yogurt</a></span>
        </li>

        <li class="ingredient">
        <span class="amount">2</span> tbsp
        <span class="name"><a href="http://www.mysite.com/ingredient/yogurt/">chillies</a></span>
        </li>

        <li class="ingredient">
        <span class="amount">3</span> pieces
        <span class="name"><a href="http://www.mysite.com/ingredient/yogurt/">butter</a></span>
        </li>
        </ul>

$(function() {
  $('.serving').bind('keyup', function(event) {
    var previousValue = parseFloat($("#previousServing").val());
    var newValue = parseFloat($(event.target).val());
    if (previousValue && newValue) {
        $('.ingredient').each(function(index, elem) {
            var ingredientNow = $('.amount', elem);
            var oldIngredientAmount = ingredientNow.text();
            var newIngredientAmount = oldIngredientAmount * newValue / previousValue;
            ingredientNow.text(newIngredientAmount);
        });
        $('#previousServing').val(newValue);
    }
});
}); 
```

[http://jsfiddle.net/vansimke/tLWpr/](http://jsfiddle.net/vansimke/tLWpr/)

问题：

1.  将服务更改为 1.5，它将给出无限的小数位
2.  将服务设置回原始（5），小数不会消失

要求：没有小数或四舍五入到绝对两位数，即 2.08 应为 2.00。

感谢期待。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T18:20:31.230

**第一个问题：有效数字和四舍五入**

您需要多次`newIngredientAmount`获取多个 sigfigs，然后将`Math.round`其四舍五入为最接近的整数。然后将结果除以您之前乘以的数字

[http://jsfiddle.net/vQbQ6/12/](http://jsfiddle.net/vQbQ6/12/)

添加了这一行

```
newIngredientAmount = Math.round(newIngredientAmount * 100) / 100; 
```

创造

```
$(function() {
  $('.serving').bind('keyup', function(event) {
    var previousValue = parseFloat($("#previousServing").val());
    var newValue = parseFloat($(event.target).val());
    if (previousValue && newValue) {
        $('.ingredient').each(function(index, elem) {
            var ingredientNow = $('.amount', elem);
            var oldIngredientAmount = ingredientNow.text();
            var newIngredientAmount = oldIngredientAmount * newValue / previousValue;
            newIngredientAmount = Math.round(newIngredientAmount * 100) / 100; 
            ingredientNow.text(newIngredientAmount);
        });
        $('#previousServing').val(newValue);
    }
}); 
```

**第二个问题：jquery .data(key, value) 解决方案**

您遇到的小数问题是由于四舍五入造成的问题，`oldIngredientAmount * newValue / previousValue`因为其中一些值可能已经四舍五入。在我看来，这是计算成分量的不好方法。相反，您应该根据初始成分比率而不是您计算的四舍五入的派生数字来计算数学。您可以使用 jquery`.data()`记录数量跨度中的初始值，并每次对这些数字进行数学运算。

[http://api.jquery.com/data/](http://api.jquery.com/data/)

提琴手`.data()`保留初始比率并在数学中使用它

[http://jsfiddle.net/vQbQ6/14/](http://jsfiddle.net/vQbQ6/14/)

```
$(function() {
    $('.ingredient').each(function(index, elem){
        $this = $(this);
        $this.data('init', parseFloat($this.text()));
    });

    $('#previousServing').data('init', parseFloat($('#previousServing').val()));

    $('.serving').bind('keyup', function(event) {
        var previousValue = $("#previousServing").data('init');
        var newValue = parseFloat($(event.target).val());
        if (previousValue && newValue) {
            $('.ingredient').each(function(index, elem) {
                var ingredientNow = $('.amount', elem);
                var initIngredientAmount = $(this).data('init');
                var newIngredientAmount = initIngredientAmount * newValue / previousValue;
                newIngredientAmount = Math.round(newIngredientAmount * 100) / 100; 
                ingredientNow.text(newIngredientAmount);
            });
            $('#previousServing').val(newValue);
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T18:01:16.690

`Math.round(newIngredientAmount)`将为您四舍五入。

但是，我只是玩弄了您的代码。我认为使用先前计算的值对您来说不可靠，尤其是在四舍五入的情况下。那会弄乱你所有的成分比例。

这就是我会做的

```
Serving: <input type="text" name="serving" class="serving" value="5" /> persons
<input type="hidden" id="defaultServing" value="5"/>

            <h3>ingredients</h3>
            <ul class="ingredients">
            <li class="ingredient">
            <span class="amount" defaultAmount="1">1</span> cups
            <span class="name"><a href="http://www.mysite.com/ingredient/yogurt/">yogurt</a></span> 
            </li>

            <li class="ingredient">
            <span class="amount" defaultAmount="2">2</span> tbsp
            <span class="name"><a href="http://www.mysite.com/ingredient/yogurt/">chillies</a></span> 
            </li>

            <li class="ingredient">
            <span class="amount" defaultAmount="3">3</span> pieces
            <span class="name"><a href="http://www.mysite.com/ingredient/yogurt/">butter</a></span> 
            </li>
            </ul> 
```

​</p>

```
$(function() {
    $('.serving').bind('keyup', function(event) {
        var previousValue = parseFloat($("#defaultServing").val());
        var newValue = parseFloat($(event.target).val());
        if (previousValue && newValue) {
            $('.ingredient').each(function(index, elem) {
                var ingredientNow = $('.amount', elem);
                var oldIngredientAmount = ingredientNow.attr("defaultAmount");
                var newIngredientAmount = oldIngredientAmount * newValue / previousValue;
                // no decimal places
                // ingredientNow.text(Math.round(newIngredientAmount));
                // two decimal places
                ingredientNow.text(Math.round(newIngredientAmount*100)/100);
            });

        }
    });
});​ 
```

# ios5 - 在自定义容器控制器中拆分视图控制器？

> ID：10320681
> 
> 赞同：0
> 
> 时间：2012-04-25T17:23:55.547
> 
> 标签：ios5, uitabbarcontroller, uisplitviewcontroller

我想知道是否可以在自定义容器控制器（或标签栏控制器）中显示 splitviewcontroller？我从这个[文档](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewControllerCatalog/Chapters/SplitViewControllers.html)和其他帖子中看到：

> 拆分视图控制器必须始终是您创建的任何界面的根。换句话说，您必须始终将 UISplitViewController 对象中的视图安装为应用程序窗口的根视图。[...] 拆分视图控制器不能以模态方式呈现。

我的应用程序中有一个启动画面，它将引导我进入这个容器控制器，我想包含一个 splitview 控制器。根据 Apple 编程指南是不可能的，还是有任何解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T23:36:52.967

It is technically possible, but you run the risk of violating Apple UX guidelines. What you can do is embed a splitview controller as a child viewcontroller of an blank UIViewController instance, and then present that viewcontroller instead of presenting the UISplitViewController directly.

# java - com.sun.jdi.VMDisconnectedException：连接已关闭

> ID：10320682
> 
> 赞同：6
> 
> 时间：2012-04-25T17:23:57.317
> 
> 标签：java, exception, jakarta-ee, memory-leaks, exception-handling

我在 weblogic server 上进行负载测试。消息交换了很多，当我收到超时响应时，也看到了一些网络拥塞。

一段时间后，我收到“ **com.sun.jdi.VMDisconnectedException: connection is closed** ”异常。

我可以知道这个异常的原因吗？这个异常意味着，，，目标VM的连接已经丢失，但原因是什么。

我认为由于网络拥塞但不确定。

请帮助并提供解释。

# c# - C# - 从 .tgz 文件中提取文件的建议

> ID：10320687
> 
> 赞同：1
> 
> 时间：2012-04-25T17:25:08.743
> 
> 标签：c#

我有一个 Windows C# 程序，我想从 .tgz 文件中提取文件（或目录），而不会影响 .tgz 文件的完整性。这个文件来自一个 linux 系统并设置了权限，我需要做的是从中删除一个目录，然后将它发送到另一台 linux 机器上运行。我尝试使用 Chilkat 组件，但它删除了子文件夹上的所有权限和大小写，因此它不会在另一个 linux 机器上运行。

任何关于我如何做到这一点的建议（如果可以在使用 C# 的 Windows 机器上完成）将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T17:30:23.693

您是否尝试过使用[sharpziplib](http://www.icsharpcode.net/opensource/sharpziplib/)，我已经成功通过了它

# android - Android，图书馆项目中的内容提供者

> ID：10320689
> 
> 赞同：9
> 
> 时间：2012-04-25T17:25:18.270
> 
> 标签：android, android-contentprovider

我有一个库项目，为许多需要相同数据库结构和功能的应用程序提供基本代码，我正在寻找实现此功能的最佳方法。我主要关心的是如何提供非静态权限，以便我可以使用使用该库的应用程序的包名称来覆盖它。

因此，在库项目中，我想我可以将以下常量更改为静态方法，这些方法将接受允许我从资源字符串或 context.getPackageName 方法获取权限的上下文

图书馆项目模型

```
 public static final class Questions implements BaseColumns {
//      public static final Uri CONTENT_URI =
//          Uri.parse("content://" + Config.AUTHORITY + "/questions");
//  use getAuthority instead which in turn will just get the package ae. Will this work?
        public static Uri getContentUri(Context c){
            return Uri.parse("content://" + getAuthority(c) + "/questions");
        }
    ...
    }

public static String getAuthority(Context c){
    return c.getPackageName + ".QuizProvider";
} 
```

图书馆项目内容提供者

```
public class QuizProvider extends ContentProvider {

//    private SQLiteDatabase mDB;

    private static final String TAG = "MyLog";

    private static final String DATABASE_NAME = "quiz.db";

    private static final int DATABASE_VERSION = 1;

    private static final int QUESTIONS = 1;
    private static final int QUESTION_ID = 2;

    private static final UriMatcher URI_MATCHER = new UriMatcher(
        UriMatcher.NO_MATCH);

    private static Map<String, String> QUESTION_LIST_PROJECTION_MAP = null;

    private DatabaseHelper mOpenHelper;

    /**
     * This class helps open, create, and upgrade the database file.
     */

    private static class DatabaseHelper extends SQLiteOpenHelper {

    @Override
    public Uri insert(Uri uri, ContentValues values) {
        int match = URI_MATCHER.match(uri);
        switch (match) {
        case QUESTIONS:
            return insertQuestion(values);
        ...
        }

...
    @Override
    public Cursor query(Uri uri, String[] projection, String selection,
            String[] selectionArgs, String sortOrder) {
        SQLiteQueryBuilder qb = new SQLiteQueryBuilder();

        switch (URI_MATCHER.match(uri)) {
        case QUESTIONS:
            qb.setTables(QuizModel.Questions.TABLE_NAME);
            qb.setProjectionMap(QUESTION_LIST_PROJECTION_MAP);
            break;
...
        }

//How do I change this?    
        static {
            URI_MATCHER.addURI(Config.AUTHORITY, QuizModel.Questions.TABLE_NAME, QUESTIONS);
    ...
            QUESTION_LIST_PROJECTION_MAP = new HashMap<String, String>();
    ...
        } 
```

1) 我不太了解 static { URI_MATCHER.addUR } 声明，并且很难理解如何转换它？

2）这是能够在任何应用程序中重用整个功能的最佳方法吗？如果不是什么会更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-04T04:16:56.733

我用这样的东西将 UriMatcher 子类化：

```
private static final UriMatcher sUriMatcher
        = new UriMatcher(UriMatcher.NO_MATCH){
    @Override
    public int match(Uri uri) {
        return super.match(uri.buildUpon().authority(AUTHORITY).build());
    }       
}; 
```

使用该库的应用程序应使用其自己的权限字符串在清单中声明提供程序。

您还可以将模型类中的公共静态 Uri 对象替换为`getUri(Context c)`创建适合该应用程序的 Uri 的函数。

# postgresql - PostgreSQL 错误：转换为所需的编码

> ID：10320691
> 
> 赞同：0
> 
> 时间：2012-04-25T17:25:29.913
> 
> 标签：postgresql, encoding, pgadmin

我正在尝试更新一列：

```
update t_references
set    reference = 'St&#246;cker W, et al. Autoimmunity to Pancreatic Juice in Crohn&#8217;s Disease. 
    Results of an Autoantibody Screening in Patients With Chronic Inﬂammatory Bowel Disease. <i>Scand J Gastroenterol Suppl</i>. 1987;139:41-52.'
      ,index = 9
where  reference_id = 161; 
```

我收到错误：

> 无法将查询转换为所需的编码。

请指教。

* * *

我必须登录到机器，然后从命令中运行它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T10:38:14.080

在遇到同样的错误时，我发现我可以在编辑器（甚至记事本）中打开从 PGAdmin 保存的 .SQL 文件，然后将内容复制并粘贴到 PGAdmin 中时重新创建它。当我直接用 PGAdmin 打开文件时，没有问题。

高温高压

# c# - 如何将 WCF 服务上传到网站？

> ID：10320694
> 
> 赞同：1
> 
> 时间：2012-04-25T17:25:36.060
> 
> 标签：c#, asp.net, wcf

我有一个测试 WCF 项目。在同一个解决方案中，我有一个 C# 应用程序，它通过简单地将 WCF 项目添加为资源来使用它，它运行良好。但是如何将它（-WCF）上传到网站？

我尝试了构建-> 发布。但它没有给我任何对话；它只是说“发布成功”。所以我将它转换为一个 Web 应用程序（在解决方案资源管理器中右键单击...）然后发布它。因为我想尝试它——我将它发布到文件系统。但是，当我现在尝试在 C# 应用程序中添加对它的服务引用时，我收到“解决方案中未找到服务”的错误消息。这是为什么？

但问题主要是：当我尝试将其发布到网站时 - 我不知道将什么作为“服务 URL”以及什么作为“站点/应用程序”。

这是我所拥有的：

服务1：

```
 [ServiceContract]
public interface IService1
{
    [OperationContract]
    string DoWork();
} 
```

服务1：

```
public class Service1 : IService1
{
    public string DoWork()
    {
        return "Hello, world";
    }
} 
```

在 C# 应用程序中：

```
Service1Client s = new Service1Client();
Text = s.DoWork(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T17:47:22.883

我更喜欢构建一个`Deployment Package`然后从 IIS 本身或使用`MSDeploy`. 您可以使用该软件包在您想要的任何机器上部署您的服务。检查此[演练](http://learn.iis.net/page.aspx/1081/building-a-web-deploy-package-from-visual-studio-2010/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T18:35:59.753

所以最后我只是简单地构建了一个 Web 应用程序并向它添加了一个 WCF 服务。

# haskell - GHC Haskell2010 何时首次包含在 Haskell 平台中，Haskell98 样式模块何时隐藏？

> ID：10320695
> 
> 赞同：5
> 
> 时间：2012-04-25T17:25:45.763
> 
> 标签：haskell, ghc

我们目前在我们的项目中遇到了一些麻烦，因为我们发现在新的 GHC 版本中，像 Char 这样的旧模块默认是隐藏的，而新模块（如 Data.Char）是默认的。我现在正试图弄清楚 Data 使用哪个版本。*， 控制。*引入了 etc 模块，以及哪个 GHC 版本首先隐藏了 Char 等 Packages。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-25T17:34:11.697

分层模块是在古代引入的（它们已经存在于早期的 ghc-6.* 版本中，在旧版本中挖掘表明分层模块是在 ghc-5.* 时代，大约 2002/2003 年左右引入的），并且`haskell98`模块在 ghc-7.2 中默认隐藏，因为有足够多的更改`haskell98`与`base`.

从 7.2.1 的发行说明：

> 1.5.12.13。哈斯克尔98
> 
> 版本号 2.0.0.0（原为 1.1.0.1）
> 
> 不再可以将 haskell98 包与基本包一起使用，因为它现在包含 Prelude 和 Numeric 模块。因此，haskell98 包现在默认隐藏。

您的项目的选项是使其依赖于[haskell98](http://hackage.haskell.org/package/haskell98)而不是基于基础，或者更新您的导入以使用分层模块。

后者是推荐的路径，除非您特别依赖已更改的一些 Haskell98 功能。前者排除了根据[base](http://hackage.haskell.org/package/base)使用许多包的可能性。

# jquery - Dreamweaver 文件资源管理器中的这个锁图标 是什么意思

> ID：10320697
> 
> 赞同：0
> 
> 时间：2012-04-25T17:25:49.583
> 
> 标签：jquery, html, ide, dreamweaver

![在此处输入图像描述](../Images/a5aeb737a3e145203f7b83e324ba9f71.png)

这意味着它是拉链还是什么？或者这意味着它被锁定了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T17:33:11.113

> 锁定符号出现在本地文件的图标旁边，表示该文件现在是只读的。

**看看adobe论坛：** [http ://help.adobe.com/en_US/Dreamweaver/10.0_Using/WSc78c5058ca073340dcda9110b1f693f21-7eb9a.html](http://help.adobe.com/en_US/Dreamweaver/10.0_Using/WSc78c5058ca073340dcda9110b1f693f21-7eb9a.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T17:29:37.307

锁定符号表示文件是只读的 (Windows) 或锁定的 (Macintosh)。

# grails - 任何人都有在 Eclipse Virgo Snaps 中使用 Groovy/Grails 的经验？

> ID：10320698
> 
> 赞同：1
> 
> 时间：2012-04-25T17:25:50.710
> 
> 标签：grails, groovy, osgi, eclipse-virgo

我想创建一组可插拔的应用程序，我遇到了 Virgo Snaps（以前称为 SpringSource Slices），它看起来正是我需要的，但我找不到任何关于如何利用它的 Groovy/Grails 资源。

理想情况下，我希望创建可以部署到 Virgo 服务器的 OSGi 模块，它们可以相互感知。

是否有人对此有任何经验或（首选）链接，或者这是我必须从头开始研究的东西？这甚至是实现我想做的正确方向吗？

# php - 是否可以通过标头重定向将变量发送到页面？

> ID：10320700
> 
> 赞同：0
> 
> 时间：2012-04-25T17:25:57.867
> 
> 标签：php, function, redirect, error-handling, header

我有一个小的错误处理功能，通知应该在重定向时通知用户错误。

目前，它要么重定向但不通过变量 $error 和 $prize ，或者我可以从函数中回显 $error 。

我需要能够重定向用户，然后在新页面上回显变量。我可以这样做吗？

```
function error($error, $prize)
 {

    header('Location: ' . $form);
    echo $error . '<br />';
    echo $prize;

exit;
} // end error handler 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T17:28:28.553

这个问题通常使用会话变量来解决，这些变量在重定向后的下一页上显示错误。基本上，只需检查每个页面上的会话消息/错误 - 然后您也可以随时在用户会话中添加消息/错误。

大多数 PHP 框架在其会话处理部分下将其列为“闪存变量”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T18:48:06.813

你可以通过 GET 来做到这一点：

```
$params = http_build_query(array('error'=> $error, 'prize'=>$prize));
header('Location: '.$form.'?'.$params); 
```

目标页面：

```
if($_GET) {
   $vars = $_GET;
   echo $vars['error']; 
   echo $vars['prize'];
} 
```

# c++ - 检查文件 I/O 中的粗体

> ID：10320701
> 
> 赞同：0
> 
> 时间：2012-04-25T17:25:59.923
> 
> 标签：c++

我正在尝试为我的兄弟编写一个程序，该程序可以将文本文档中的大纲快速而肮脏地重新格式化为 .csv，以供他的抽认卡程序读取。大纲如下所示：

```
1) Question
   a) answer 1
   b) answer 2
   **c) answer 3**
   d) answer 4 
```

正确答案以粗体显示。.csv 需要采用的格式如下所示：

```
question 1, correct answer, incorrect answer 1, incorrect answer 2, incorrect answer 3, incorrect answer 4 (etc)
question 2, correct answer, incorrect answer 1, incorrect answer 2, incorrect answer 3, incorrect answer 4 (etc) 
```

ETC..

我还没有写任何代码，因为我还在计划它，但我对如何去做有一个很好的想法。我只是对 c++ 文件 io 不够熟悉，不知道有什么方法可以检查粗体。非常感谢任何有关如何在 Word 文档中执行此操作的建议或信息链接，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T17:30:35.993

没有一种统一的方式来查找“粗体”，因为它在文本中的表示方式取决于创建它的应用程序。如果您只是检查纯文本，并且不知道该文本的具体格式，那么就无法知道“粗体”是什么。例如，如果它是 HTML，您可以查找成对的“粗体”标签。否则，纯文本文件没有标准的粗体表示方式，因为顾名思义，它只是纯文本。

# c - 设置消息队列的大小“不允许”

> ID：10320705
> 
> 赞同：0
> 
> 时间：2012-04-25T17:26:12.103
> 
> 标签：c, linux, permissions, message-queue

我试图设置 POSIX 消息队列的大小，但似乎不允许。

`msgctl()`手册页指出：

> IPC_SET 只能由具有适当权限的进程执行， **或者**其有效用户 ID 等于与 msqid 关联的 msqid_ds 数据结构中的 msg_perm.cuid 或 msg_perm.uid 的值。只有具有适当权限的进程才能提高 msg_qbytes 的值。

以下测试程序返回：

```
uid: 1324
effective uid: 1324
msgctl(msqid=8028175, IPC_SET, ...) failed 
(msg_perm.uid=1324,msg_perm.cuid=1324): Operation not permitted (errno=1) 
```

* * *

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/stat.h>
#include <sys/msg.h>
#include <errno.h>
#include <string.h>
#include <unistd.h>

int main(int iArgC, char ** ppszArgv)
{
  printf("uid: %u\n", getuid());
  printf("effective uid: %u\n", geteuid());

  int msqid = msgget(
    IPC_PRIVATE,
    IPC_CREAT |
    S_IRGRP | S_IWGRP |
    S_IRUSR | S_IWUSR |
    S_IROTH | S_IWOTH);

  if (0 > msqid)
  {
    fprintf(stderr,
        "msgget() failed.\n");
    return EXIT_FAILURE;
  }

  {
    struct msqid_ds ds = {0};

    if (msgctl(
        msqid,
        IPC_STAT,
        &ds))
    {
      fprintf(stderr,
          "msgctl(msqid=%d, IPC_STAT, ...) failed: "
          "%s (errno=%d)\n",
          msqid,
          strerror(errno),
          errno);

      return EXIT_FAILURE;
    }

    ds.msg_qbytes = 1024*1024;

    if (msgctl(
        msqid,
        IPC_SET,
        &ds))
    {
      fprintf(stderr,
          "msgctl(msqid=%d, IPC_SET, ...) failed "
          "(msg_perm.uid=%u,"
          "msg_perm.cuid=%u): "
          "%s (errno=%d)\n",
          msqid,
          ds.msg_perm.uid,
          ds.msg_perm.cuid,
          strerror(errno),
          errno);
    }

    return EXIT_FAILURE;
  }

  return EXIT_SUCCESS;
}

/* EOF */ 
```

那么，诀窍是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T17:37:56.357

来自[`man msgctl`](http://linux.die.net/man/2/msgctl)：

> 需要适当的权限（Linux：CAP_IPC_RESOURCE 功能）才能将 msg_qbytes 值提高到系统参数 MSGMNB 之外。

在我的系统上，MSGNMB 为 16 kB，远低于您尝试设置的 1 MB。你检查过这个限制吗？（做`cat /proc/sys/kernel/msgmnb`）

# sencha-touch-2 - 将按钮添加到数据视图行？

> ID：10320706
> 
> 赞同：4
> 
> 时间：2012-04-25T17:26:12.587
> 
> 标签：sencha-touch-2

我正在尝试新的 dataview 组件，并且正在使用这个 Sencha 示例：

[http://www.sencha.com/blog/dive-into-dataview-with-sencha-touch-2-beta-2/](http://www.sencha.com/blog/dive-into-dataview-with-sencha-touch-2-beta-2/)

在 KittensListItem 中，我删除了图像，现在我想添加三个按钮：“Email”、“Facebook”和“Twitter”，而不是 Store 中的值。当用户单击每个按钮时，我想显示每个按钮各自的 Store 值。如何实现？

这是目前屏幕的样子：

![在此处输入图像描述](../Images/3b3574f44b434c4b0d0ff58e57c91775.png)

Example.view.KittensListItem：

```
Ext.define('Example.view.KittensListItem', {
    扩展：'Ext.dataview.component.DataItem'，
    xtype：'contactslistitem'，

    需要：['Ext.Button'，'Ext.slider.Slider']，

    配置：{

        数据映射：{

            getName: { setHtml: 'name' },
            getSlider: { setValue: 'cuteness' },
            getEmail: { setHtml: 'email' },
            getTwitter: { setHtml: 'twitter' },
            getFacebook: { setHtml: 'facebook' }
        },

        名称：{弹性：1}，

        滑块：{弹性：1}，

        电子邮件： {
            文本：'电子邮件'，
            style: '字体大小：12px;',
            弹性：1
        },
         Facebook： {
            文字：'Facebook1'，
            style: '字体大小：12px;',
            弹性：1
        },
        推特： {
            文字：“推特”，
            style: '字体大小：12px;',
            弹性：1
        },

        布局： {
            类型：'hbox'，
            居中对齐'
        }
    },

    applyName: function(config) { return Ext.factory(config, Ext.Component, this.getName()); },

    更新名称：函数（新名称，旧名称）{
        if (newName) { this.add(newName); }

        if (oldName) { this.remove(oldName); }
    },

    applySlider: function(config) { return Ext.factory(config, Ext.slider.Slider, this.getSlider()); },

    更新滑块：功能（新滑块，旧滑块）{
        if (newSlider) { this.add(newSlider); }

        if (oldSlider) { this.remove(oldSlider); }
    },

    applyEmail: function(config) { return Ext.factory(config, Ext.Button, this.getEmail()); },

    更新电子邮件：函数（新电子邮件按钮，旧电子邮件按钮）{
        if (newEmailButton) { this.add(newEmailButton); }

        if (oldEmailButton) { this.remove(oldEmailButton); }
    },

    applyTwitter: function(config) {return Ext.factory(config, Ext.Button, this.getTwitter()); },

    更新推特：功能（新推特按钮，旧推特按钮）{
        if (newTwitterButton) { this.add(newTwitterButton); }

        if (oldTwitterButton) { this.remove(oldTwitterButton); }
    },

    applyFacebook: function(config) { return Ext.factory(config, Ext.Button, this.getFacebook()); },

    更新Facebook：函数（newFacebookButton，oldFacebookButton）{
        if (newFacebookButton) { this.add(newFacebookButton); }

        if (oldFacebookButton) { this.remove(oldFacebookButton); }
    }
});

```

模型：

```
Ext.define('Example.model.Kitten', {
    扩展：'Ext.data.Model',

    配置：{
        字段：[
            “姓名”，
            “电子邮件”，
            “推特”，
            “Facebook”，
            {名称：“可爱”，类型：“int”}
        ]
    }
});

```

店铺：

```
Ext.define('Example.store.Kittens', {
    扩展：'Ext.data.Store'，
    需要：['Example.model.Kitten']，

    配置：{
        模型：'Example.model.Kitten'，

        数据： [
            { 名称：'one'，电子邮件：'email@addr'，twitter：'@twitter'，facebook：'Facebook ...'，可爱度：70 }，
            { 名称：'两个'，电子邮件：'email@addr'，twitter：'@twitter'，facebook：'Facebook ...'，可爱度：90 }，
            {名称：'三'，电子邮件：'email@addr'，twitter：'@twitter'，facebook：'Facebook ...'，可爱度：40 }
        ]
    }
});

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T14:30:43.943

在互联网上搜索后，我找到了每个按钮的“点击”事件的[解决方案。](https://github.com/KoreaSenchaUserGroup/Lab1/wiki/doc21)诀窍是在 update* 函数中添加一个点击监听器。我仍然不确定如何在每个按钮上设置静态标签。

顺便说一句，更好的答案可以让其他人获得支持和检查。

```
    更新电子邮件：函数（新电子邮件按钮，旧电子邮件按钮）{
        如果（新电子邮件按钮）{
        newEmailButton.on('tap', this.onEmailButtonTap, this);
            this.add(newEmailButton);
        }

        如果（旧电子邮件按钮）{
            this.remove(oldEmailButton);
        }
    },
 onEmailButtonTap：功能（按钮，事件）{

    var 记录 = this.getRecord();
        Ext.Msg.alert(record.get('email') + ", " + record.get('facebook') );
  } 

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T09:19:15.263

嗨，我是 Sencha Touch 的新手，入门时也遇到了问题。我遇到了这篇文章，寻找从控制器访问数据视图项组件/值的方法。就我而言，我希望同时使用滑块和编辑框值，并在更新后自动更新任一值。

Dataview 有一个 itemtap 侦听器，它可以方便地返回行索引和本文中提到的[记录](https://stackoverflow.com/questions/6318382/sencha-touch-itemtap)。我仍然发现确定被点击的组件是一个问题，因此最终只是通过事件对象名称过滤组件。

**控制器：**

```
 control: {

      'contactslistitem': {
          itemtouchend: 'tapItem',
       }
  }

  tapItem: function(dataview, index, target, record,  e, eOpts) {

       if('facebookbutton'==e.target.name)
           alert('Tapped facebook button on row '+index);
  } 
```

facebook 按钮元素的 dataview 配置包括 name 属性：

```
 facebook: {
        name: 'facebookbutton'
        text: 'Facebook1',
        style: 'font-size: 12px;',
        flex: 1
    }, 
```

我仍然觉得 ST2 必须有更好的方法来一起处理数据视图行组件，而不必每次都查找索引/组件。

# matlab - 在 Matlab 中创建变量数组

> ID：10320708
> 
> 赞同：1
> 
> 时间：2012-04-25T17:26:20.553
> 
> 标签：matlab

在 M 文件“matrixT.m”中，我编写了函数 matrixT 来生成这样的 *3 矩阵

```
function T=matrixT(alpha,n)
T=zeros(3,n);
for i=1:n
    T(1,i)=cos(alpha(i));
    T(2,i)=sin(alpha(i));
    T(3,i)=sin(alpha(i)-i*pi/2);
end 
```

然后我在我的主 M 文件中使用它

```
alpha=sym('alpha');
V=subs(hessian(det(matrixT(alpha,3)),alpha),alpha,alpha0); 
```

但有很多错误。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T17:36:20.427

我相信您的问题在于作业：`T(1,i)=cos(alpha(i));`. 您已分配`alpha`为符号变量，但随后您尝试将其分配给双精度数组并且 MATLAB 抱怨。`alpha`是否可以在尝试将其放入数组之前评估它的值`T`？

# php - SQL 从链接表中检索名称和服务，并按匹配的服务数量排序

> ID：10320712
> 
> 赞同：1
> 
> 时间：2012-04-25T17:26:57.710
> 
> 标签：php, mysql, sql

我的第一个问题，它有点复杂，所以请指导我了解你们都习惯的任何礼仪！是的，这里有点复杂，所以我将在进入代码之前先描述我想要什么。

MySQL 数据库，我有一个组织表、一个服务表和一个交叉引用组织与服务的表。我正在构建一个搜索功能，它将检索与任何选定服务匹配的组织，但将根据它们匹配的服务数量对它们进行排序，并列出这些服务是什么。

好的，代码的相关位是什么：

组织表（**组织**）：

```
id:   INT, AI
name: VARCHAR(150) 
```

服务表（**服务**）：

```
id:   INT, AI
name: VARCHAR(150) 
```

交叉引用表 ( **xref_org_services** )：

```
org_id:     INT
service_id: INT 
```

我可以获得与我搜索的任何服务相匹配的组织列表：

```
SELECT DISTINCT organisations.name AS org
FROM organisations
JOIN xref_org_services ON organisations.id=xref_org_services.org_id
WHERE xref_org_services.services_id IN (x, y, z)
ORDER BY org ASC 
```

`x, y, z`我选择的服务的 ID 在哪里。完成了，没问题。

现在我想返回每个组织匹配的服务数量，以及它们是什么。我试过了

```
SELECT organisations.name AS org, COUNT(xref_org_services.services_id) AS matched 
```

但这给了我匹配的总行数，这不是我想要的。我在看一个嵌套的`SELECT`地方来做计数吗？

最终，我的输出需要像这样：

```
Org_1 matched 4 services
    - Serv_1
    - Serv_3
    - Serv_4

Org_2 matched 3 services
    - Serv_1
    - Serv_2
    - Serv_4

Org_3 matched 1 service
    - Serv_2 
```

我有任何意义吗？让我在其中添加一些“数据”，然后看看我是否可以澄清一下。

**组织：**

```
id  |  name
-------------------------
1   |  A1 Train
2   |  Faux LLC
3   |  Shakey Practice 
```

**服务：**

```
id  |  name
-------------------------
1   |  PTS
2   |  Track safety
3   |  Assessors
4   |  Structural
5   |  Signalling 
```

**外部参照组织服务：**

```
org_id  |  services_id
-------------------------
1   |  1
1   |  2
1   |  4
2   |  1
2   |  4
3   |  5 
```

所以，这意味着：

*   **A1 Train**提供*PTS*、*轨道安全*和*结构*
*   **Faux LLC**提供*PTS*和*Structural*
*   **Shakey Practice**提供*信号*

如果我想检索所有提供 PTS、Track Safety 和 Structural 的组织，我希望输出内容大致如下：

```
A1 Train matched
    - PTS
    - Track Safety
    - Structural

Faux LLC matched
    - PTS
    - Structural 
```

我希望这是有道理的。指针，提示，完整的答案都欢迎。如果您需要澄清或更多信息，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T17:38:30.313

你想使用`GROUP BY`：

```
SELECT
  organisations.name AS org,
  COUNT(*) AS matched,
  GROUP_CONCAT(services.name SEPARATOR "\n") AS services
FROM
  organisations
  LEFT JOIN xref_org_services
    ON xref_org_services.org_id = organisations.id
  LEFT JOIN services
    ON services.id = xref_org_services.services_id
WHERE xref_org_services.services_id IN (x, y, z)
GROUP BY organisations.id
ORDER BY org ASC; 
```

# ruby-on-rails - 具有设计身份验证的用户注册服务器端向导

> ID：10320715
> 
> 赞同：0
> 
> 时间：2012-04-25T17:26:59.297
> 
> 标签：ruby-on-rails, devise, wizard, user-registration

我见过的所有身份验证插件都在实现一页用户注册——用户输入他的所有字段，然后立即提交。所以 Devise 身份验证确实如此。

包子现在我们有要求做多页注册向导。

如果我们不要求在第一页上创建用户，然后在其他页面上应该提供越来越多的信息并在每个页面提交后保存，那么使用 JQuery 实现它并在最后一个向导的页面上发布会很容易。

您如何建议在使用 Devise 身份验证的项目中实现这一点？这与用户的激活过程有何对应（我的意思是发送帐户确认电子邮件）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T17:56:52.400

多步表单与您使用的任何身份验证插件无关。这取决于你如何整合它。

由于您从一个页面到另一个页面有多个请求，因此复杂性变得更加困难。
- 我如何保存数据？
- 我什么时候创建数据库模型？
- 我应该使用隐藏字段在页面之间传递值还是应该将它们粘贴在会话中？

这些都是在某个时候弹出的问题，您应该尝试事先将它们整理出来。

在初始请求上创建模型有一个很大的缺点，即您最终可能会得到一个虚假的数据库条目，这显然是您不想要的。

例如，您可以创建一个临时模型，用于收集用户数据，最后创建真实的用户模型，通过设计，基于此 tmp 模型并在完成后将其删除...

Ryan Bates 在他的一个截屏视频中谈到了多步表单。[http://railscasts.com/episodes/217-multistep-forms](http://railscasts.com/episodes/217-multistep-forms)

可能对你来说很有趣。

# c# - 将枚举/编译值作为参数传递给构造函数

> ID：10320716
> 
> 赞同：1
> 
> 时间：2012-04-25T17:27:04.960
> 
> 标签：c#, attributes, enums, parameter-passing

目前我正在为我的 mvc 应用程序编写自己的 ValidationAttribute。

我有以下 ValidationAttribute 代码。

```
[AttributeUsage(AttributeTargets.Property | AttributeTargets.Class | AttributeTargets.Parameter, AllowMultiple = false)] 
public class RecordAttribute: ValidationAttribute
{

   public UniqueDataRecordAttribute(string primaryKeyProperty)
   {

   }
} 
```

我将主要属性的字段名称作为字符串传递给我的属性并进行验证。例如：

```
[RecordAttribute("CustomerID")]
public class CustomerMetaData
{

} 
```

这对我有用，但如果主键的名称发生变化，我会遇到问题。

我创建了一个包含主键属性的枚举。但是当我尝试传递它时，编译器告诉我：

> 属性参数必须是属性参数类型的常量表达式、typeof 表达式或数组创建表达式

我也尝试过这种方法：[Associating enums with strings in C#](https://stackoverflow.com/questions/630803/associating-enums-with-strings-in-c-sharp)但效果是一样的。

有没有机会将枚举（或其他编译值）传递给我的属性？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T07:09:38.943

你想做这样的事情吗？

```
[RecordAttribute(Keys.CustomerID.ToString())] 
public class CustomerMetaData 
{ 
} 
```

这不起作用，因为 Keys.CustomerID.ToString() 返回的字符串不是常量。

您可以使用静态类的 const 字符串字段来代替枚举吗？

```
static class Keys {
  public const string CustomerID = "CustomerID";
} 
```

然后这将起作用：

```
[RecordAttribute(Keys.CustomerID)] 
public class CustomerMetaData 
{ 
} 
```

# php - 我的查询出错

> ID：10320720
> 
> 赞同：-1
> 
> 时间：2012-04-25T17:27:31.203
> 
> 标签：php, mysql

这行代码有什么问题？

```
$query= "SELECT status FROM follow WHERE user_id1= $COOKIE['user_id'] AND user_id2=  
$user_id"; 
```

我不断收到错误消息：

解析错误：语法错误，意外的 T_ENCAPSED_AND_WHITESPACE，需要 T_STRING 或 T_VARIABLE 或 T_NUM_STRING

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T18:44:22.943

您的解决方案容易受到 SQL 注入的影响；如果我的 cookie 的用户 ID 是 会发生什么`1; drop table follow; --`？告别您的追随桌。

`mysql_real_escape_string()`您至少需要使用（编辑：并在插值变量周围加上引号），有关详细信息，请参阅[此页面](http://www.tizag.com/mysqlTutorial/mysql-php-sql-injection.php)。但你真的想要[准备好的陈述](http://php.net/manual/en/pdo.prepared-statements.php)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T18:56:51.200

您不能在字符串中使用带引号的数组键。你必须使用语法，或者去掉引号（这会在字符串*之外*`{...}`发出警告，但你知道，PHP。）

 *每个坚持你使用的人`mysql_real_escape_string`都是正确的，每个坚持你使用 PDO 的人都更正确。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-25T17:28:32.883

尝试这个

```
$query= "SELECT status FROM follow WHERE user_id1 = {$_COOKIE['user_id']}
AND user_id2 = {$user_id}"; 
```

> 这行代码有什么问题？

基本上，你有一个 array `$COOKIE`，我相信`$_COOKIE`它是你正在访问的，但由于它被封装在一个字符串中，你需要帮助 PHP 的解析器表明是的，它实际上是一个变量（数组）而不是部分的字符串。为此，您应该`{$like_this}`在“字符串”中使用变量时将它们封装起来；

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-04-25T18:52:42.960

单引号分隔导致此错误的数组键
要么在字符串中省略这些引号，要么使用大括号。

您还必须确保进入查询的值具有正确的格式

```
$user_id1 = (int)$COOKIE['user_id'];
$user_id2 = (int)$user_id;
$query="SELECT status FROM follow WHERE user_id1=$user_id1  AND user_id2=$user_id2"; 
```*

# android - 将 SQLite 转换为 PDF

> ID：10320724
> 
> 赞同：0
> 
> 时间：2012-04-25T17:27:44.513
> 
> 标签：android, sql, sqlite

我正在开发一个 Android 应用程序，其中有一个 SQLite 数据库，它有很多行和列。在应用程序中显示这些是没有问题的，但是我想将数据库的信息导出为 PDF 文件以将其上传到 Dropbox 或 SD 卡。

我找到了一种在应用程序中从位图文件创建 PDF 文件的方法，但这对我没有多大帮助。数据库的信息只能通过滚动在应用程序中看到，因为它对于屏幕来说太大了。这个问题有解决方案吗？

将屏幕截图导出为 PDF 对我没有多大帮助，因为不能在一个屏幕内看到整个数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T18:05:00.347

我会在服务器端寻找一些报告解决方案，例如[http://jasperforge.org/projects/jasperreports](http://jasperforge.org/projects/jasperreports)。

您也可以尝试非常低级别的 iText。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T18:09:44.083

在您的软件中生成位图或与生成用户所见的内容同时生成，将其写为文件，并将其提供给 pdf 生成器。

# php - SQL PHP 搜索要求至少一个词

> ID：10320726
> 
> 赞同：1
> 
> 时间：2012-04-25T17:27:58.710
> 
> 标签：php, sql, search

我正在尝试使用以下查询使用 php 制作搜索表单：

```
$this->images('`description`="'.db::escape($mysearch).'"'); 
```

它工作得很好，但它只返回与 $mysearch 对应的 EXACT 描述！我希望它返回包含 $mysearch 字段中的关键字（1、2 或 3）的所有描述。确切的 SQL 查询是什么？我试过：

```
'MATCH `description` AGAINST "'.db::escape($mysearch).'"' 
```

但我得到一个错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取正确的语法，以便`title`在第 1 行的 'MATCH AGAINST "mykeyword"'附近使用

解决方案是：

```
'MATCH(title) AGAINST ("'.db::escape($keyword).'" IN BOOLEAN MODE)' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T17:39:44.360

在空格或逗号上使用explode: [http://php.net/manual/en/function.explode.php](http://php.net/manual/en/function.explode.php) 作为分隔符，然后在结果数组上为每个字符串添加一行以在查询中为每个字符串添加一行那个数组。

对于一个伪示例：

```
//input of the string
$input = "keyword1 keyword2 keyword3";
$inputArray = explode(" ",$input);
foreach ($inputArray as $keyword) {
  $sql .= " OR tableName.ColName like '%$keyword%'";
} 
```

显然清理它并验证输入，最好使用准备好的语句等（看起来你正在使用某种 ORM？），并且希望描述列相对较短并且在其全部内容上有一个索引，否则查询将非常减缓。

更新：我意识到您正在尝试使用全文索引的语法。如果你有一个 MyISAM 表，或者一个足够新的 mysql 版本，它支持 InnoDB 表上的全文索引，那么你可能想跳过我提供的这个解决方案，因为一旦你的表中有更多的记录，它就会变得非常慢进入内存/缓存。不幸的是，我从未使用过全文索引，因此无法为您提供帮助。我正在改用 Zend_Search_Lucene 与上面列出的解决方案。(http://framework.zend.com/manual/en/zend.search.lucene.html)

# php - PHP返回数组内的对象变量

> ID：10320727
> 
> 赞同：0
> 
> 时间：2012-04-25T17:28:03.123
> 
> 标签：php, arrays, json, multidimensional-array

我正在编写一个 PHP 脚本来处理一些 JSON 数据。下面是一个（删节）`var_dump($data)`。我想返回与`["[question(13), option(0)]"]`20 关联的值。我不知道该怎么做。我试过`$data->[question(13), option(0)]`和`$data->question(13)`。（我试着查了一下，但我不确定这个符号是什么意思，所以我不确定我在找什么）

```
object(stdClass)#133 (36) {
  ["id"]=>
  string(1) "1"
  ["contact_id"]=>
  string(0) ""
  ["status"]=>
  string(8) "Complete"
  ["is_test_data"]=>
  string(1) "0"
  ["datesubmitted"]=>
  string(19) "2012-04-19 17:11:00"
  ["[question(5)]"]=>
  string(11) "C.    40%, 40%"
  ["[question(9)]"]=>
  string(47) "D.    EBITDA and Free cash flow are the same thing"
  ["[question(10)]"]=>
  string(48) "A.    Accounts Payable as % of sales would increase"
  ["[question(11)]"]=>
  string(20) "E.    None of the above"
  ["[question(12)]"]=>
  string(97) "A.     A larger portion of initial investment is equity which can increase exit return potential."
  ["[question(13), option(0)]"]=>
  string(2) "20"
  ["[url("embed")]"]=>
  string(0) ""
  ["[variable("STANDARD_IP")]"]=>
  string(13) "38.107.74.230"
  ["[variable("STANDARD_LONG")]"]=>
  string(10) "-73.976303"
  ["[variable("STANDARD_LAT")]"]=>
  string(9) "40.761902"
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T17:30:43.733

要么使用扩展对象访问表示法：

```
$data->{'[question(13), option(0)]'} 
```

或者只是要求普通数组并将其用作普通数组。

```
json_decode($json, true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T17:32:28.280

尝试这个

```
echo $data->{'[question(13), option(0)]'}; 
```

# python - 使用 sqlalchemy 创建表

> ID：10320728
> 
> 赞同：2
> 
> 时间：2012-04-25T17:28:09.287
> 
> 标签：python, sqlalchemy

使用 sqlalchemy 创建表时我在这里遗漏了什么吗？

```
from sqlalchemy import create_engine
from sqlalchemy import MetaData, Column, Table, ForeignKey
from sqlalchemy import Integer, String, DateTime

engine = create_engine('postgresql+psycopg2://postgres:password#@localhost:5432/LabData',echo=True)

metadata=MetaData(bind=engine)
main_table=('sample',metadata,
            Column('LIN',String(10),primary_key=True),
            Column('material_type',String(20),nullable=False),
            Column('source',String(20),nullable=False),
            Column('material_description',String(100)),
            Column('quantity',Integer),
            Column('location',String(2)),
            Column('received_by',String(20)),
            Column('received_date',DateTime,nullable=False),
            )

metadata.create_all() 
```

python控制台上的输出是：

```
2012-04-25 13:13:42,734 INFO sqlalchemy.engine.base.Engine select version()
2012-04-25 13:13:42,796 INFO sqlalchemy.engine.base.Engine {}
2012-04-25 13:13:42,796 INFO sqlalchemy.engine.base.Engine select current_schema()
2012-04-25 13:13:42,796 INFO sqlalchemy.engine.base.Engine {} 
```

当我尝试将数据添加到表中时，它显示 nosuchtableerror。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T17:33:19.970

可能的错字？

```
main_table=('sample',metadata,... 
```

也许应该是

```
main_table=Table('sample',metadata,...
#          ^^^^^ 
```

# msbuild - 为什么 MsbuildExtension Detokenise 类会重新加载项目？

> ID：10320730
> 
> 赞同：2
> 
> 时间：2012-04-25T17:28:13.623
> 
> 标签：msbuild, msbuild-task, msbuildcommunitytasks, msbuildextensionpack

这是有问题的，因为传入的任何属性都会丢失。

进一步说明：我将一个属性传递给项目文件。此属性是 .props 文件的路径。它包含 detokenise 类的标记和替换值。该任务显然会重新加载项目并且不维护路径。其他任务似乎并非如此，例如 guid 任务。

在示例中，我使用了一个名为 guids.proj 的示例项目

调用使用：

```
<MSBuild.ExtensionPack.FileSystem.Detokenise TaskAction="Detokenise" TargetFiles="@(FileCollectionToBeDetokenized )"/> 
```

一些命令行输出如下：

`Task "MSBuild.ExtensionPack.FileSystem.Detokenise" (TaskId:11) Detokenise Task Execution Started [13:04:35] (TaskId:11) Loading Project: C:\Users\bstrausser\Desktop\guids.proj (TaskId:11) Detokenising Collection: 1 files (TaskId:11) C:\Users\*****\Desktop\guids.proj(37,9): error : Property not found: Asset Directory`

完整的项目文件：

```
Project ToolsVersion="4.0" DefaultTargets="Default" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <Import Project="$(ParentMSBuildProjectDirectory)\Bin\MSBuild\ExtensionPack\MSBuild.ExtensionPack.tasks" Condition="Exists('$(ParentMSBuildProjectDirectory)\Bin\MSBuild\ExtensionPack\MSBuild.ExtensionPack.tasks')"/>
<Import Project="C:\Program Files (x86)\MSBuild\ExtensionPack\4.0\MSBuild.ExtensionPack.tasks" Condition="!Exists('$(ParentMSBuildProjectDirectory)\Bin\MSBuild\ExtensionPack\MSBuild.ExtensionPack.tasks') AND Exists('C:\Program Files (x86)\MSBuild\ExtensionPack\4.0\MSBuild.ExtensionPack.tasks')"/>

<PropertyGroup>
    <TPath>$(MSBuildProjectDirectory)\..\MSBuild.ExtensionPack.tasks</TPath>
    <TPath Condition="Exists('$(MSBuildProjectDirectory)\..\..\Common\MSBuild.ExtensionPack.tasks')">$(MSBuildProjectDirectory)\..\..\Common\MSBuild.ExtensionPack.tasks</TPath>
    <PROPS>$(DACP)</PROPS>
</PropertyGroup>

<Import Project="$(PROPS)" Condition="'$(DACP)' != ''" />

<Target Name="Default">
    <Message text = "$(DACP)" />
    <!-- Create a new Guid and get the formatted and unformatted values -->
    <MSBuild.ExtensionPack.Framework.Guid TaskAction="Create">
        <Output TaskParameter="FormattedGuidString" PropertyName="FormattedGuidString1" />
        <Output TaskParameter="GuidString" PropertyName="GuidStringItem" />
    </MSBuild.ExtensionPack.Framework.Guid>
    <Message Text="GuidStringItem: $(GuidStringItem)"/>
    <Message Text="FormattedGuidString: $(FormattedGuidString1)"/>
    <!-- Create a new cryptographically strong Guid and get the formatted and unformatted values -->
    <MSBuild.ExtensionPack.Framework.Guid TaskAction="CreateCrypto">
        <Output TaskParameter="FormattedGuidString" PropertyName="FormattedGuidString1" />
        <Output TaskParameter="GuidString" PropertyName="GuidStringItem" />
    </MSBuild.ExtensionPack.Framework.Guid>
    <Message Text="GuidStringItem Crypto: $(GuidStringItem)"/>
    <Message Text="FormattedGuidString Crypto: $(FormattedGuidString1)"/>

    <ItemGroup>
        <FileCollectionToBeDetokenized Include="C:\Code\MSBuildGit\Configuration\TaskExecutorConfigTransforms\App.GREEN.SCRATCH.config"/>
    </ItemGroup>

    <Message text = "BaseUrl        : $(BaseUrl)" />
    <Message text = "DetokenizedTransformFile       : @(FileCollectionToBeDetokenized)" />

    <MSBuild.ExtensionPack.FileSystem.Detokenise TaskAction="Detokenise" TargetFiles="@(FileCollectionToBeDetokenized )"/>

</Target> 
```

# c - 位域的概念

> ID：10320731
> 
> 赞同：4
> 
> 时间：2012-04-25T17:28:18.350
> 
> 标签：c, bit-fields

```
struct A
{
 int a:2;
 int b:3;
 int c:3;
};

int main()
{
 struct A p = {2,6,1};
 printf("\n%d\n%d\n%d\n",p.a,p.b,p.c);
 return 0;
} 
```

输出为：-2,-2,1

以上代码在 C 编译器和 C++ 编译器中的输出是什么？为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T17:51:13.863

您的系统似乎使用[2's 补码](http://en.wikipedia.org/wiki/Two%27s_complement)。`2-bit`位域保持将`2`是`10`二进制，`-2`在 2 的补码系统中。同样`110(6)`用于2`-2`的`3-bit`补码表示。而且`1`很朴素`1`

[还可以在此处](http://www.devx.com/tips/Tip/13991)阅读有关带符号位字段的信息

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T17:43:10.477

我用我的 C 编译器得到 -2 -2 1 。问题是您的位字段对于您要存储的数字来说太小了。在前两种情况下，最左边的位是 1，因此它们被解释为负数。要解决此问题，请执行以下任一操作：

1.  让你的位域更大
2.  将您的位字段声明为无符号整数而不是整数
3.  打印前转换为 unsigned int 并使用 %u 打印。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T17:43:18.273

您得到这些答案的原因与该程序相同：

```
#include <stdio.h>
#include <stdint.h>

int main(void)
{
    int32_t a = 4294967294;
    printf("%d\n", a);
    return 0;
} 
```

有输出`-2`。使用太大而无法适应的数字初始化有符号变量会导致对其进行不同的解释。从规范：

> 否则，新类型是有符号的，值不能在其中表示；结果是实现定义的，或者引发了实现定义的信号。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T15:18:50.903

现在让我们看看到底发生了什么。让我们从给定的代码开始：

```
struct A
{
 int a:3;
};
int main()
{
 struct A p = {5};
 printf("%d",p.a);
} 
```

在 3 位内，值将为 101(5)，因为这 3 位集合的符号位为 1，因此为负值。因此，我们需要找到 2 对 101 的补码，即 011(3)。因此，通过应用上述逻辑，我们将输出为 -3。同样可以证明其他的。

例如，对于 1001(9)，由于 a:3，我们将采用 3 位值。因此它将是 001(1)。由于此处未设置符号位，即 1，因此无需使用 2 的补码。直截了当的答案是 1。同样可以做其他事情。

# c# - ASP.net 与 C# 绘制一条线/一系列线/图表

> ID：10320737
> 
> 赞同：0
> 
> 时间：2012-04-25T17:28:36.537
> 
> 标签：c#, asp.net, charts, drawing, line

我有一个网络表单，用户可以在其中将日程表添加到列表框中。他们选择日期、事件和时间。现在，我想在页面底部附近绘制一个小日线图。我想要一条连续的线，从午夜到午夜，根据事件，这条线绘制在图表的那个级别。

假设用户从早上 5:00 慢跑到早上 6:00，然后休息一天。这条线将从午夜开始，从左到右绘制，直到 05:00。然后它会下降到图表的慢跑水平，这条线会一直延伸到 06:00，然后回到图表的“静止”部分并一直绘制到当天的午夜。

如何使用 c# 使用 asp.net 在固定区域的 web 表单上绘制线条？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T17:33:51.270

杰克，

我建议使用一些图表解决方案。[您可以在此处阅读](https://stackoverflow.com/questions/1201098/jquery-charting)有关 jquery 解决方案的一些建议

您还可以探索其他可视化框架，例如[Kendo UI - Data Viz](http://www.kendoui.com/dataviz.aspx)

希望这会有所帮助，-covo

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T18:12:39.623

正如建议的那样，有各种图表解决方案。如果您不需要旧版 IE 浏览器支持，另一种选择是使用 HTML5 Canvas 进行绘制。

[http://www.html5canvastutorials.com/](http://www.html5canvastutorials.com/)

# ibm-mq - 用于从队列管理器检索 MQ 消息的脚本文件

> ID：10320738
> 
> 赞同：3
> 
> 时间：2012-04-25T17:28:41.923
> 
> 标签：ibm-mq

我想编写一个**脚本**文件，将队列管理器中到达的 MQ 消息附加到日志文件中。请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T17:41:54.203

如果您希望所有消息都到达一个通道，您可以使用 mrmq.dk 的 BlockIP2 页面中的[LogIP 出口](http://mrmq.dk)。诸如[SupportPac MA0W 之](http://ibm.co/SupptPacMA0W)类的 API 出口可以记录所有放置的消息。API 出口可以捕获来自本地应用程序的消息以及通过通道到达的消息。

如果您想编写脚本，您可以使用诸如 Q（来自[SupportPac MA01](http://ibm.co/SupptPacMA01)）之类的程序在消息到达时从队列中删除它们并将它们附加到文件中。

例如，

```
#!/usr/bin/ksh

q -IMYQMGR/MY.QUEUE >> logfile.txt 
```

通常，脚本会被触发并配置为将新消息附加到文件中。这样做的问题是它破坏性地删除了消息。如果有一个记录应用程序需要使用这些消息，那不是一个很好的解决方案。您可以浏览队列，但不能保证在记录应用程序获取消息之前获取消息 - 并且浏览会定期在队列头部重新启动，因此您可能会记录相同的消息两次。

另一个脚本选项是[Perl MQSeries](http://search.cpan.org/~mqseries/MQSeries-1.32/)模块。该模块公开了 WMQ API 的所有选项以及面向对象的方法。如果您需要一些快速而肮脏的东西，Q 程序作为可执行文件提供。如果您想要将所有 API 暴露给您的脚本（并且不介意编译它）的强大功能，Perl MQSeries 模块是一个不错的选择。下面是取自模块示例的代码片段，展示了如何获取消息：

```
while (1) {
    $sync_flag = 0;
    undef $outcome;
    my $request_msg = MQSeries::Message::->new();
    my $status = $request_queue->
      Get('Message'       => $request_msg,
          'GetMsgOpts' =>
          {
           'WaitInterval' => 5000,  # 5 seconds
           'Options'      => (MQSeries::MQGMO_WAIT |
                              MQSeries::MQGMO_SYNCPOINT_IF_PERSISTENT |
                              MQSeries::MQGMO_CONVERT |
                              MQSeries::MQGMO_FAIL_IF_QUIESCING),
          },
         );
    unless ($status) {  # Error
        my $rc = $request_queue->Reason();
        die "Error on 'Get' from queue $qmgr_name/$request_qname:\n" .
          "\tReason: $rc (" . MQReasonToText($rc). ")\n";
    }
    next if ($status < 0);      # No message available 
```

人们过去做过的一件事是将队列转换为主题的别名。使用消息的应用程序从新队列重定向到 GET，并且管理订阅将主题连接到新队列。此时，真正的应用程序会获取所有消息，并且可以进行新订阅以记录通过主题的消息。

# java - 文件完全填充

> ID：10320740
> 
> 赞同：-1
> 
> 时间：2012-04-25T17:28:46.900
> 
> 标签：java, file, unix, bufferedwriter

我有这段代码应该在表中插入数据并用相同的数据填充 txt 文件。但是我发现该表正在填充适当的 2019 行，但该文件仅包含 1639 行`[Incomplete last line]`，底部有一条消息。这是什么原因造成的？

```
while(ora_rs.next()){
    sql_stmt.executeUpdate("INSERT INTO SCHED_BUNDLES_TEMP_TEST VALUES (" +
         ora_rs.getString("BUNDLE")+", " +
         ora_rs.getString("DROPPER_ID")+", '" +
         ora_rs.getString("SCHED_DT")+"')");

    DateFormat formatter = new SimpleDateFormat("yyyy-MM-dd");
    Date new_date = (Date)formatter.parse(ora_rs.getString("SCHED_DT"));
    SimpleDateFormat newFormat = new SimpleDateFormat("MM/dd/yyyy");
    String final_string = newFormat.format(new_date);
    out.write(ora_rs.getString("BUNDLE")+"|"+ora_rs.getString("DROPPER_ID")+"|"+final_string+"\n");

         ii++;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T17:31:48.397

我的猜测是你有一个缓冲流并且你没有关闭（）或刷新（）流，这意味着文件的末尾没有被写入（因为它仍在内存中）

# jquery-mobile - 如何获取 ListView JQUERYMOBILE 中选择的元素的值

> ID：10320744
> 
> 赞同：2
> 
> 时间：2012-04-25T17:29:01.130
> 
> 标签：jquery-mobile

嗨，我正在开发一个简单的 listView，其中列出了我的表的“名字”列：我想获取选定的值（名称），我找到了这个链接，但它显示了他如何获取索引而不是选定的值项目[http://jsfiddle.net/w2JZU/](http://jsfiddle.net/w2JZU/)

这是我的代码：

HTML：

```
<div id="popup-bg">
</div>

   <div id="popup-box"> 

   <div data-role="page" id="home">

  <div data-role="header">
    <h1>Players</h1>
   </div>

<div data-role="content">
    <ul data-role="listview" id="artiste" >
    </ul>    
</div>
</div>
</div>
</section> 
```

js：

```
 function successCB()
  {
     db.transaction(queryDB, errorCB);
   }

      function queryDB(tx)
        {
        tx.executeSql('SELECT * FROM Players ', [], querySuccess, errorCB);
       }

       function querySuccess(tx, results)
         {
          var len = results.rows.length;
           var dataset= results.rows;

         $("#artiste").empty();

          for (var i = 0; i < len; i++)
         {  item = dataset.item(i);
           $("#artiste").append( "<li data-theme='c'><a href='game.html'>
          <img src='images/avatar.jpg'><h3>"+item['firstName']+"</h3></a></li>" );

          } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T01:38:55.303

使用 li 标签的列表中的项目没有“值”。但是，您可以使用 jQuery .text() 方法获取该列表元素中的内容的文本。我已经修改了你引用的 jsfiddle 来做到这一点：http: [//jsfiddle.net/Cht2e/](http://jsfiddle.net/Cht2e/)

您可能需要考虑向 li 标签添加另一个属性，例如 data-name（您可以组成该属性），然后您可以通过 jQuery .attr() 方法获得它。例如，您可能会更改附加代码以执行以下操作：

```
 $("#artiste").append( "<li data-theme='c' data-name='"+item['firstName']+"'><a href='game.html'>
      <img src='images/avatar.jpg'><h3>"+item['firstName']+"</h3></a></li>" ); 
```

然后像这样附加你的点击处理程序：

```
$('#artiste').children('li').on('click', function () {
   alert('Selected Name=' + $(this).attr('data-name'));
}); 
```

我认为这不一定是最好的结构或方法，但它会完成你的要求。

# jquery - 使用 jquery 的 DIV 的 100% 高度 - 如何使其与父级相关

> ID：10320745
> 
> 赞同：0
> 
> 时间：2012-04-25T17:29:11.110
> 
> 标签：jquery, height

我正在使用这个 jquery 脚本来扩展子 DIV 100%。它工作正常，但 DIV 超出了浏览器窗口，因此我必须始终向下滚动。是否可以将 100% 高度更改为与父 DIV 而不是文档相关？

```
$(document).ready(function () {
    $("#stretch").animate({ height: $(document).height() }, 500 );
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T17:30:17.040

尝试

```
$(document).ready(function () {
    var $stretch = $("#stretch");
    $('#stretch').animate({ height: $stretch.parent().height() }, 500 );
}); 
```

或者如果它不是即时父母：

```
$(document).ready(function () {
    var $stretch = $("#stretch");
    $('#stretch').animate({ height: $stretch.closest('parent-selector').height() }, 500 );
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T17:31:25.060

是的：

对于直接父母：

```
$(document).ready(function () {
    var $stretch = $("#stretch");

    $stretch.animate({ height: $stretch.parent().height() }, 500 );
}); 
```

[http://jsfiddle.net/RRqr4/](http://jsfiddle.net/RRqr4/)

如果不是直接父级，则可以替换`closest`为`parent`.

# google-drive-api - IOS 应用如何访问 Google Drive 文件

> ID：10320746
> 
> 赞同：6
> 
> 时间：2012-04-25T17:29:17.400
> 
> 标签：google-drive-api

有谁知道 IOS 应用程序是否可以访问存储在 Google Drive 上的文件？

我没有在[https://developers.google.com/drive/上找到我想要的东西](https://developers.google.com/drive/)

谢谢

安迪

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T15:22:20.200

Google Drive 的 API 现已针对 Objective C 发布。您可以在此处找到它：

[http://code.google.com/p/google-api-objectivec-client/](http://code.google.com/p/google-api-objectivec-client/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T20:24:14.360

我认为通用 Google GTL 库（Objective-C 的 Google API 客户端库 - [http://code.google.com/p/google-api-objectivec-client/](http://code.google.com/p/google-api-objectivec-client/)）将包含一些生成的驱动器访问代码。Drive SDK 文档似乎链接在那里，但代码仍然丢失。Doc 关于 iOS 原生应用程序也有点不一致：“除非应用程序已安装在 Chrome Web Store 中，否则应用程序将无法访问文件的任何 API。要在开发期间测试应用程序，您必须首先创建一个列表并安装它。”

尼科。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T17:49:55.230

Google Drive App for iOS 即将发布，这是一些文章中所说的。见下文。

[http://www.gottabemobile.com/2012/04/24/google-drive-for-iphone-and-ipad-coming-soon/](http://www.gottabemobile.com/2012/04/24/google-drive-for-iphone-and-ipad-coming-soon/)

[http://www.readwriteweb.com/archives/full-sized_screenshots_of_the_google_drive_ipad_ap.php](http://www.readwriteweb.com/archives/full-sized_screenshots_of_the_google_drive_ipad_ap.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T03:47:58.750

您可以使用[Google Data APIs Objective-C 客户端库](http://code.google.com/p/gdata-objectivec-client/)通过 Documents List API 访问存储在 Google Drive 中的文件。

该库还包括一个完整的示例：[http ://code.google.com/p/gdata-objectivec-client/source/browse/#svn%2Ftrunk%2FExamples%2FDocsSample](http://code.google.com/p/gdata-objectivec-client/source/browse/#svn%2Ftrunk%2FExamples%2FDocsSample)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-25T17:43:37.673

是的，虽然不是直接通过 Objective C，但你需要与 Ruby、Python、PHP 或 Java 交互。

以下是示例列表：[https ://developers.google.com/drive/examples/index](https://developers.google.com/drive/examples/index)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-27T07:46:03.070

[http://itunes.apple.com/us/app/idocs-hd-pro-for-google-docs/id498653441?mt=8](http://itunes.apple.com/us/app/idocs-hd-pro-for-google-docs/id498653441?mt=8)，我发现这个应用程序可以访问iPad上的谷歌驱动器文件，也许谷歌文档api可以

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-01-14T12:08:04.160

“Google APIs Client Library for Objective-C”已被 Google 弃用，仅适用于 AppStore 上已有的应用程序。

使用“Google APIs Client Library for Objective-C For REST”访问适用于 iOS 的 Google Drive API 的新实现。

这是使用“Google APIs Client Library for Objective-C For REST”库在 iOS 中访问 Google Drive 文件的工作实现：[https ://stackoverflow.com/a/41649210/1999368](https://stackoverflow.com/a/41649210/1999368)

# python - Numpy Array：有效地找到匹配的索引

> ID：10320751
> 
> 赞同：6
> 
> 时间：2012-04-25T17:29:28.890
> 
> 标签：python, numpy, scipy

我有两个列表，其中一个是大量的（数百万个元素），另一个是数千个。我想做以下

```
bigArray=[0,1,0,2,3,2,,.....]

smallArray=[0,1,2,3,4]

for i in len(smallArray):
  pts=np.where(bigArray==smallArray[i])
  #Do stuff with pts... 
```

以上工作，但很慢。有没有什么方法可以更有效地做到这一点，而无需求助于用 C 语言编写东西？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-25T20:02:11.877

在您的情况下，您可能会受益于对大数组进行预排序。这是演示如何将时间从约 45 秒减少到 2 秒的示例（在我的笔记本电脑上）（对于数组 5e6 和 1e3 的一组特定长度）。显然，如果数组大小相差很大，则解决方案将不是最佳的。例如，使用默认解决方案，复杂度是 O(bigN*smallN)，但对于我建议的解决方案，它是 O((bigN+smallN)*log(bigN))

```
import numpy as np, numpy.random as nprand, time, bisect

bigN = 5e6
smallN = 1000
maxn = 1e7
nprand.seed(1)  
bigArr = nprand.randint(0, maxn, size=bigN)
smallArr = nprand.randint(0, maxn, size=smallN)

# brute force 
t1 = time.time()
for i in range(len(smallArr)):
    inds = np.where(bigArr == smallArr[i])[0]
t2 = time.time()
print "Brute", t2-t1

# not brute force (like nested loop with index scan)
t1 = time.time()
sortedind = np.argsort(bigArr)
sortedbigArr = bigArr[sortedind]
for i in range(len(smallArr)):
    i1 = bisect.bisect_left(sortedbigArr, smallArr[i])
    i2 = bisect.bisect_right(sortedbigArr, smallArr[i])
    inds = sortedind[i1:i2]
t2=time.time()
print "Non-brute", t2-t1 
```

输出：

蛮力 42.5278530121

非暴力1.57193303108

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-03-02T12:17:26.657

Numpy 提供函数 numpy.searchsorted：[http ://docs.scipy.org/doc/numpy-1.10.0/reference/generated/numpy.searchsorted.html](http://docs.scipy.org/doc/numpy-1.10.0/reference/generated/numpy.searchsorted.html)

例子：

```
>>> import numpy as np
>>> sorted = np.argsort(big_list)
>>> r = np.searchsorted(big_list, small_list, side='right',sorter=sorted)
>>> l  = np.searchsorted(big_list, small_list, side='left',sorter=sorted)
>>> for b, e in zip(l, r):
...     inds = sorted[b:e] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-26T01:06:15.817

到目前为止，我认为不需要 numpy；你可以使用`defaultdict`，只要你的内存足够，如果观察次数不是太多，应该是数百万。

```
big_list = [0,1,0,2,3,2,5,6,7,5,6,4,5,3,4,3,5,6,5]
small_list = [0,1,2,3,4]

from collections import defaultdict

dicto = defaultdict(list) #dictionary stores all the relevant coordinates
                          #so you don't have to search for them later

for ind, ele in enumerate(big_list):
    dicto[ele].append(ind) 
```

结果：

```
>>> for ele in small_list:
...     print dicto[ele]
... 
[0, 2]
[1]
[3, 5]
[4, 13, 15]
[11, 14] 
```

这应该会给你一些速度。

# asp.net-mvc-3 - 在没有模型的 ASP.NET MVC 中进行验证

> ID：10320752
> 
> 赞同：0
> 
> 时间：2012-04-25T17:29:29.723
> 
> 标签：asp.net-mvc-3

我正在开发一个 ASP.NET MVC 应用程序，其中模型以 XML 而不是类的形式出现。我仍然想尽可能多地使用框架的内置组件在客户端和服务器端进行模型验证。目前我所做的是创建了一个简单的验证器接口和一个实现。在实现类中，我使用了内置的验证属性来进行验证。

```
public interface IModelValidator
{
  bool Required(string value);

  bool Range(string value, int minimum, int maximum);

  bool RegularExpression(string value, string pattern);

  bool StringLength(string value, int maximumLength);
}

public class DataAnnotationValidator : IModelValidator
{
  public bool Required(string value)
  {
    return new RequiredAttribute().IsValid(value);
  }

  public bool Range(string value, int minimum, int maximum)
  {
    return new RangeAttribute(minimum, maximum).IsValid(value);
  }

  public bool RegularExpression(string value, string pattern)
  {
    return new RegularExpressionAttribute(pattern).IsValid(value);
  }

  public bool StringLength(string value, int maximumLength)
  {
    return new StringLengthAttribute(maximumLength).IsValid(value);
  }
} 
```

每个控制器都会引用`IValidator`我进行验证的操作。如果验证失败，我会将错误添加到`ModelStateDictionary`.

这里有更好的策略吗？是否有任何内置类可以扩展以在没有类的情况下进行验证？等待您的想法和建议。

# facebook - Facebook 应用程序查询字符串

> ID：10320758
> 
> 赞同：0
> 
> 时间：2012-04-25T17:30:05.170
> 
> 标签：facebook, query-string, facebook-apps

直到最近，我们的 FB 应用程序一直在传递 QueryString 参数，我们使用这些参数来识别应用程序用户并通过应用程序向他们提供他们的数据。现在它只有不带参数的 RAW URL。

Facebook 是否改变了有关应用程序的某些内容？在我们的应用程序中我有什么需要做的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T18:04:07.023

嗨，您是在谈论页面链接吗？您可以使用 FQL 获得此信息

eq [https://api.facebook.com/method/fql.query?query=SELECT+page_id,+page_url,+fan_count,+website,+name,+username,+founded,+company_overview,+mission,+pic+ FROM+page+WHERE+page_id=](https://api.facebook.com/method/fql.query?query=SELECT+page_id,+page_url,+fan_count,+website,+name,+username,+founded,+company_overview,+mission,+pic+FROM+page+WHERE+page_id=) facebookPageId &access_token= accessToken

将此粘贴到浏览器中以查看实时示例[https://api.facebook.com/method/fql.query?query=SELECT+name%2C+fan_count+FROM+page+WHERE+page_id+%3D+19292868552](https://api.facebook.com/method/fql.query?query=SELECT+name%2C+fan_count+FROM+page+WHERE+page_id+%3D+19292868552)

# javascript - jQuery设置函数执行前的等待时间

> ID：10320761
> 
> 赞同：1
> 
> 时间：2012-04-25T17:30:10.363
> 
> 标签：javascript, jquery, time-wait

如何设置此功能的等待时间。

```
function UpdateMedicaitonHistory(data) {
     MedicaitonHistoryGrid();
//set a wait time to finish MedicaitonHistoryGrid() like for 3 seconds
// then execute the below code.
if ($("#MedHistoryGridSec").is(":visible")) {
            alert("yes we have grid");
      }
else{
     alert("No Grid");
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-25T17:32:51.063

您可以使用`setTimeout`：

```
setTimeout(function()
{
     if($('#MedHistoryGridSec').is(':visible'))
         alert('yes');
     else
         alert('no');
}, 3000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T17:33:08.633

您可以将代码包装在回调函数中，并在三秒钟后使用以下命令运行它[`window.setTimeout`](https://developer.mozilla.org/en/DOM/window.setTimeout)：

```
var afterThreeSeconds = function() {
  if ($("#MedHistoryGridSec").is(":visible")) {
    alert("yes we have grid");
  }
  else{
    alert("No Grid");
  }
}

window.setTimeout(afterThreeSeconds, 3000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T17:34:35.467

您是否可以向药物历史网格函数添加一个参数，该函数包含您想要在该函数成功后执行的代码，然后您可以在药物历史网格函数的末尾调用该函数？

# php - json_encode() 抛出无效的 json

> ID：10320773
> 
> 赞同：0
> 
> 时间：2012-04-25T17:31:19.997
> 
> 标签：php, json

我[`json_encode();`](http://php.net/json_encode)在这个数组上使用，里面的双引号`<sup id="1">`打破了它......谁能解释为什么？不应该建立这个功能来自动保护这些数据吗？

```
array(
    'Content' => array(
        'GUID' => '7dbbfdfd-d1b2-46bd-934f-0730bcf55495',
        'Publish_Date' => '2012-04-10 19:28:13',
        'Content_Type' => 'Header',
        'Content_Body_Type' => 'OVERVIEW',
        'Paperless' => 'REQUIRED_EDELIVERY',
        'Status' => 'Proof',
        'Body' => htmlentities('<h3>This is a subhead</h3>
<p>This is sample content<sup id="1">1&nbsp;</sup>with variables:&nbsp;&lt;Outside_Sales&gt;&lt;Support_Services_Program&gt;</p>
<p>Bulleted list:</p>
<ul>
<li>item 1</li>
<li>item 2</li>
<li>item 3</li>
</ul>
<p>more text</p>'), 
```

我使用[http://jsonlint.com](http://jsonlint.com)来确定问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T17:34:10.573

这可能是一个双重转义问题，因为您正在使用`htmlentities()`then `json_encode()`。

只需使用`json_encode()`.

一般来说，最好只在输出过程中进行转义。这样您就可以维护原始数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T17:35:05.043

您需要将 , 剥离。只需在每个双引号之前添加 \ - 例如： \"1\"

# android - 直接从另一个 android 程序打开 gmail 标签的快捷方式

> ID：10320776
> 
> 赞同：0
> 
> 时间：2012-04-25T17:31:34.233
> 
> 标签：android, gmail

我有一个问题，我知道 Android 不完全支持。

我正在寻找一种直接从另一个 Android 应用程序打开特定 Gmail 标签的方法。

因此，在 Android 应用程序中，我希望能够获取 Gmail 标签的电子邮件计数。

但是，根据研究，我观察到访问自定义（用户定义的）标签并不是那么简单。任何帮助都感激不尽。

摘要问题：如何从 Android 应用程序直接访问（打开）用户定义的 Gmail 标签并确定该标签中未读电子邮件的数量。

是否有类似于 Gmail 标签通知器应用程序的可用内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T19:21:00.957

我认为，较新版本的 Gmail 支持的功能`ContentProvider`可以满足您的需求。[您可以在Android Gmail 开发者网站](https://developers.google.com/gmail/android/)上阅读更多内容。

请再次注意，这仅适用于较新版本的 Gmail。您可以考虑使用`PackageManager`来确认`ContentProvider`任何给定设备上存在问题。

# google-search - 是否可以使用搜索 API 在特定国家/地区的 Google 网站中进行搜索？

> ID：10320781
> 
> 赞同：3
> 
> 时间：2012-04-25T17:32:02.057
> 
> 标签：google-search, google-search-api

我有一个使用 Google 自定义搜索 API 读取 Google 结果的脚本，我浏览了文档并设法设置语言和国家/地区来过滤结果，但结果仍然与我从网站获得的结果不同。

[https://www.googleapis.com/customsearch/v1?key=KEY&cx=017576662512468239146:omuauf_lfve&q=gelato](https://www.googleapis.com/customsearch/v1?key=KEY&cx=017576662512468239146:omuauf_lfve&q=gelato)

[http://www.google.it/#hl=en&output=search&q=gelato](http://www.google.it/#hl=en&output=search&q=gelato)

有没有办法从 API 获得与使用网站一样的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T18:15:40.617

自定义搜索 API 表示“cr”参数适用于国家/地区限制。

'hl' 参数用于以特定语言（用户界面语言）显示结果文本。

如果您希望结果与地理位置相关性匹配，则应使用“gl”参数。

'lr' 参数应该与'cr' 参数一起使用或代替'cr' 参数，以将结果限制为特定语言。

[https://developers.google.com/custom-search/v1/cse/list](https://developers.google.com/custom-search/v1/cse/list)

# sql - ERROR 1451：无法删除或更新父行：外键约束失败

> ID：10320786
> 
> 赞同：4
> 
> 时间：2012-04-25T17:32:36.600
> 
> 标签：sql, cascade, mysql-error-1451

```
CREATE  TABLE `categories` (
  `idcategories` INT NOT NULL AUTO_INCREMENT ,
  `idparent` INT NULL ,
  `description` VARCHAR(45) NULL ,
  PRIMARY KEY (`idcategories`) );

ALTER TABLE `categories` 
  ADD CONSTRAINT `FK_idparent`
  FOREIGN KEY (`idparent` )
  REFERENCES `ilmercatinodelpulcino`.`categories` (`idcategories` )
  ON DELETE CASCADE
  ON UPDATE CASCADE
, ADD INDEX `FK_idparent` (`idparent` ASC) ;

INSERT INTO `categories` (`idcategories`, `description`)
    VALUES (1, 'cat1');
INSERT INTO `categories` (`idcategories`, `idparent`, `description`)
    VALUES (2, 1, 'cat1_child'); 
```

所以这个表代表一个类别，有一个 ID 和一个自指向的父 ID。我插入了一个类别 cat1 和一个子类别 cat1_child，其父 ID 为 cat1。

现在，我希望能够将 cat1 的 idcategory 从 1 更改为 10，并且因为我在更新 CASCADE 上设置了外键，所以我希望 cat1_child 的 idparent 也将设置为 10。但是当我这样做时：

```
UPDATE `categories` SET `idcategories`=10 WHERE `idcategories`='1'; 
```

我收到一个错误：

> 错误 1451：无法删除或更新父行：外键约束失败（`categories`，CONSTRAINT `FK_idparent`FOREIGN KEY ( `idparent`) REFERENCES `categories`( `idcategories`) ON DELETE CASCADE ON UPDATE CASCADE） SQL 语句：UPDATE `categories`SET `idcategories`=10 WHERE `idcategories`='1'

删除将按预期工作，并且删除 cat1、cat1_child 也将被删除。

错误在哪里？比你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-25T17:42:50.613

我相信答案在[**文档**](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)中（向下滚动到底部）：

> **偏离 SQL 标准**：如果`ON UPDATE CASCADE`或`ON UPDATE SET NULL`递归更新它之前在级联期间更新的同一个表，它的行为类似于`RESTRICT`. 这意味着您不能使用自引用`ON UPDATE CASCADE`或`ON UPDATE SET NULL` 操作。这是为了防止级联更新导致的无限循环。`ON DELETE SET NULL`另一方面，自引用是可能的，自引用也是如此`ON DELETE CASCADE`。级联操作的嵌套深度不得超过 15 层。

演示：[http ://www.sqlfiddle.com/#!2/e29db/1](http://www.sqlfiddle.com/#!2/e29db/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-22T11:53:01.430

我遇到了同样的问题，然后我使用下面的查询禁用了外键检查，然后我能够删除该行

```
SET FOREIGN_KEY_CHECKS=0; 
```

您还可以使用以下查询启用外键检查

```
SET FOREIGN_KEY_CHECKS=1; 
```

# php - 比较用 $_POST 得到的字符串和从 php 中的 file.txt 得到的字符串

> ID：10320792
> 
> 赞同：0
> 
> 时间：2012-04-25T17:32:57.487
> 
> 标签：php

我想将使用 POST 方法获得的字符串与 .txt 文件中的字符串进行比较...如果有匹配执行操作...我知道了，但它似乎无法通过循环...它搜索一个匹配电子邮件，.txt 中的每三个字符串都是一个电子邮件字符串，这就是为什么迭代三个...

```
<?php

$email = $_POST['user'];
$password = $_POST['pass'];
$filename = 'C:\xampp\htdocs\www\zavrsni\emailList.txt';

if (($row = file_get_contents($filename)) != '') {
    $wordsArray = explode(' ', $row);
    for ($i=0; $i<sizeof($wordsArray); $i+3) {
        if (strcmp($wordsArray[$i], $email) == 0){
            //some action
            exit();
        }
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T18:08:42.763

```
<?php

/* content of emailList.txt
user_1 password_1 test1@default.com
user_2 password_2 test2@default.com
user_3 password_3 test3@default.com
user_4 password_4 test4@default.com
user_999 password_999 test999@default.com
user_5 password_5 test5@default.com
*/

// set POST for testing only!!
$_POST['user'] = 'test999@default.com';
$_POST['pass'] = 'test';
//
$email = $_POST['user'];
$email = strtolower($email);
$password = $_POST['pass'];
$filename = './emailList.txt';

// read entire file into an array, skipping empty lines and not adding return characters
$trimmed_file_array = file($filename, FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES);

foreach ($trimmed_file_array AS $row) {
  //print $row.'<br>';
  list($f_user, $f_password, $f_email) = explode(' ', $row);
  $f_email = strtolower($f_email);
  if ($email === $f_email) {
    print 'found user: '.$f_user.' - password: '.$f_password.' - email: '.$f_email.'<br>';
    break;
  }
}

?> 
```

# android - Android SDK 安装失败 - 连接重置。什么都没有安装

> ID：10320793
> 
> 赞同：3
> 
> 时间：2012-04-25T17:32:57.550
> 
> 标签：android, sdk, installation

您好，我在使用 Android SDK 管理器安装软件包时遇到问题。

我得到连接重置。什么都没有安装。

我在使用 JDK 7 的 Windows 7 64 位上。

这是我到目前为止没有成功的尝试：

安装Android SDK installer_r18-windows.exe

然后以管理员身份运行 Android SDK Manager，我可以选择要安装的软件包。

到目前为止，一切都很好。

然后当我选择我想要的包并单击安装时，日志显示：

下载 SDK 平台 Android 2.3.3、API 10、修订版 2 对等体未通过身份验证

我用谷歌搜索了这个错误，他们说你需要设置 Force https://... 要使用 http://... 获取源

如果我这样做并单击安装，我会收到此错误：

下载 SDK Platform Android 2.3.3, API 10, revision 2 Connection reset

在它尝试安装的每个软件包中。

我尝试根据我的互联网提供商设置设置代理设置。我再次得到错误。

我尝试停用防火墙。同样的错误。

那么如何让 Andoid SDK Manager 成功安装软件包呢？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T18:23:55.713

其他人在下载 SDK 组件时也遇到了类似的问题。

解决此问题的一种简单方法是修改*Pkg.SourceUrl*属性，将 HTTPS 更改为 HTTP 以避免安全下载，如[该问题](https://stackoverflow.com/questions/8936461/android-sdk-not-installing-packages)的答案所示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-05T13:33:15.613

这可能是系统时间可能已更改的原因。将您的系统时间与互联网时间服务器之一同步。重新启动安装。希望它有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-02T12:18:47.343

我今天遇到了同样的问题。在我的情况下，下载将开始，然后中止并显示相同的错误消息。

如果下载开始然后中止，请再次尝试下载 - SDK 管理器将在中止的位置恢复下载。它不会宣传该功能（更不用说自行恢复），但日志条目报告它实际上正在恢复下载。

您可能需要重试几次 - 取决于您的 Internet 连接的稳定性和下载量。不太优雅，但可以快速安装。

# xcode - 升级到 XCode 4.3 后 FPS 下降

> ID：10320800
> 
> 赞同：1
> 
> 时间：2012-04-25T17:33:24.463
> 
> 标签：xcode, performance, vbo, frame-rate

我希望其他人经历过这种情况并随后找到解决方案，因为我正沮丧地点燃自己的头发。

简单地说，我正在使用 XCode 3.2.6 和 SDK 4.2 创建一个 Cocos2D 应用程序。我使用了两台设备进行测试：iPhone 3GS 和 iPhone 4，我相信都是 IOS 4.2。在任一设备上进行测试时，我都获得了稳定的 60 FPS 性能。

当我升级到 XCode 4.2 时，灾难首先发生。我可以毫不费力地将我的项目直接打开到这个新版本中并运行它。一切都一样，除了我现在在 XCode 4.2 中。令我震惊和恐惧的是，我发现我现在的 FPS 在 45 到 50 范围内，有时会下降到 30 年代，以前从未发生过这种情况。

此时我决定升级到 Lion、XCode 4.3 和 SDK 5.1。不幸的是，这并没有改变什么。

然后我将两部手机都升级到了最新的 IOS，但性能问题仍然存在。

最后，我升级到了最新版本的 Cocos2D，但无济于事。

我已经尝试了许多涉及发布与调试模式、编译器设置等的补救措施。没有任何帮助。

我发现了一些可能是暗示的东西，但目前我对 Open GL ES 的了解还不够，因此无法理解。在另一个论坛上，有人抱怨同样的问题，并说如果他们禁用顶点缓冲区对象 (VBO) 支持，问题就解决了。我发现在 Cocos2D 中启用了它，禁用了它，令我惊讶的是，我恢复到了 60 FPS。该应用程序的性能不如在 XCode 3.2.6 下编译时那样强大，但在 XCode 4.3 下禁用 VBO 支持时性能要好得多。这样做的问题是不建议禁用 VBO 支持，因为它会在启用时提高性能。

我所做的一些测试似乎表明图形是问题所在。当应用程序确实下降到 45 FPS 范围时，我所拥有的只是 12 到 20 个精灵在屏幕上移动。如果我删除这些精灵并让其他一切继续运行，我会回到 60 FPS，即使启用了 VBO。当我在 XCode 3.2.6 下开发时，我有时会有 100 多个精灵在移动（无论是在视图中还是在视图外），并且 FPS 保持在 60。

所以简而言之（抱歉，为时已晚），有没有人知道完全相同的代码在通过 XCode 3.2.6 编译时如何运行得很好，但在 XCode 4.3 下却很糟糕？我尝试了许多不同的编译器设置都无济于事。我的猜测是某处有一些简单的设置可能默认为 XCode 3 和 XCode 4 之间的不同值。

我很绝望，所以请传递您可能有的任何想法。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T17:42:05.570

你可以让 Xcode 更新你的项目设置吗？您是否从 Xcode 4.3 发布之前回滚到一个已知的好版本并验证它很慢？

# c# - c#从我的form2中获取我在form1中的checkboxlist项目

> ID：10320802
> 
> 赞同：0
> 
> 时间：2012-04-25T17:33:36.360
> 
> 标签：c#

我正在尝试从我的表单 2 中获取表单 1 中的复选框列表中的项目。

我确实将我的 form1.checkedboxlist MODIFIER 的属性设置为 PUBLIC

我可以到达列表，但我无法获取里面的项目。当我使用 checkboxlist.items.count 时，它告诉我列表中没有任何内容，但事实并非如此

```
string[] list = new string[form1.ckdBoxList.Items.Count];

MessageBox.Show(list.Length.ToString());//In debug it tells me that the lenght is 0

for (int i = 0; i <= list.Length; i++)
{
   list[i] = fenPrincipal.ckdBoxList.Items[i].ToString();
} 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T17:37:43.433

尝试

```
 string[] list = new string[form1.ckdBoxList.Items.Count];

    MessageBox.Show(form1.ckdBoxList.Items.Count+"");//In debug it tells me that the lenght is 0

    for (int i = 0; i < form1.ckdBoxList.Items.Count; i++)
    {
        list[i] = form1.ckdBoxList.Items[i].ToString();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T17:38:03.240

这里有两个链接，指向非常相似的问题和我提供的解决方案。

[解决方案选项 1](https://stackoverflow.com/questions/7969582/how-to-update-textbox-in-form1-from-form2/7971828#7971828)

[另外一个选项](https://stackoverflow.com/questions/4887820/how-do-you-pass-an-object-from-form1-to-form2-and-back-to-form1/4887906#4887906)

# java - Java - 使自定义运行时错误不转储跟踪

> ID：10320813
> 
> 赞同：0
> 
> 时间：2012-04-25T17:34:37.397
> 
> 标签：java, exception, runtime-error

我对 Java RuntimeError 有一个笨拙的使用，我在其中完全处理了错误。唯一的问题是它给了我烦人的跟踪，告诉我我派生和抛出的运行时错误发生在哪里。如何抑制这种痕迹？

作为参考，问题是我将一个非抛出类子类化并且需要我的子类抛出。它要么是“重写我的程序以像 C 程序一样读取”，要么是“使用运行时错误来绕过抛出规范要求”。显然，我现在发现抛出规范要求非常适得其反——其他不涉及维护一堆“workIsDone”变量的解决方法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T17:39:12.537

没有代码很难知道你在说什么，但总的来说，堆栈跟踪来自一个处理程序，它捕获异常*并调用`printStackTrace()`*它。除非有要求，否则堆栈跟踪不会出现。现在，如果一个异常一直到达（例如）AWT 事件线程堆栈的顶部，那么默认处理程序将以这种方式打印出来。

通常，您要处理异常。使用运行时异常来解决某些超类方法没有声明任何异常的事实可能是一个很好的策略，但是您负责始终捕获这些异常。如果你不能——即，如果其他代码要捕获它们——那么这是一个糟糕的策略，你不能使用它。

# java - 如何使用 xsom\dom\jaxb 获得 xsd 的最大深度？

> ID：10320814
> 
> 赞同：2
> 
> 时间：2012-04-25T17:34:37.980
> 
> 标签：java, xml, xsd, xsom

如何使用 xsom 获得 xsd 的最大深度。

例如：xsd 的每个复杂类型下的元素总数？

此外，如果该复杂类型下存在复杂类型，则该复杂类型下元素+属性的数量......使用 dom\xsom\jaxb

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified" attributeFormDefault="unqualified">
 <xs:element name="root" type="root">
    <xs:annotation>
        <xs:documentation>
            Comment describing your root element
        </xs:documentation>
    </xs:annotation>
 </xs:element>

 <xs:complexType name="root">
    <xs:sequence>
        <xs:element name="element_count" type="xs:string"></xs:element>
        <xs:element name="employee" type="employee" maxOccurs="unbounded" minOccurs="0"></xs:element>
    </xs:sequence>
 </xs:complexType>

 <xs:complexType name="employee">
    <xs:sequence>
        <xs:element name="name" type="xs:string"></xs:element>
        <xs:element name="ID" type="xs:string"></xs:element>
        <xs:element name="Addresses" type="addresses" maxOccurs="1" minOccurs="0"></xs:element>
    </xs:sequence>
 </xs:complexType>

 <xs:complexType name="addresses">
    <xs:sequence>
        <xs:element name="address" type="address" maxOccurs="unbounded" minOccurs="0"></xs:element>
    </xs:sequence>
 </xs:complexType>

 <xs:complexType name="address">
    <xs:sequence>
        <xs:element name="line1" type="xs:string"></xs:element>
        <xs:element name="line2" type="xs:string"></xs:element>
        <xs:element name="city" type="xs:string"></xs:element>
        <xs:element name="type" type="xs:string"></xs:element>
    </xs:sequence>
 </xs:complexType>
</xs:schema> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-07T17:46:20.587

我实际上只是在寻找这个。我在 API 中找不到任何东西，所以昨天找到了一种递归方法。我只是将我的递归方式粘贴到最深处并将它们添加到哈希图中。

```
/*
 * Parses the xml schema string into a hashmap
 * note that hashmap has a form of a tree
 */
public HashMap<String, Object> getXmlElements(InputStream xml) {
    //---
    XSOMParser parser = new XSOMParser();
    //---
    try{
        parser.parse(xml);
    } catch(Exception ex){
        logger.fatal("Could not parse the inputstream: " + ex);
    }
    //---
    XSSchemaSet schemaSet = null;
    try {
        schemaSet = parser.getResult();
    } catch (SAXException ex) {
        logger.fatal("Could not parse: " + ex);
    }
    //---
    HashMap<String, Object> hmReturned = new HashMap<String, Object>();
    HashMap<String, Object> hm = new HashMap<String, Object>();
    Iterator <XSElementDecl> itre = schemaSet.iterateElementDecls();
    //---
    while(itre.hasNext()) {
        XSElementDecl xse = (XSElementDecl) itre.next();
        hmReturned.put(xse.getName(), hm);
        XSComplexType xscomp = xse.getType().asComplexType();
        if (xscomp != null) {
            XSContentType xscont = xscomp.getContentType();
            XSParticle particle = xscont.asParticle();
            getElementsRecursively(hm,  particle);
        }
    } 
    //---
    return hmReturned;
}

/*
 * recursive helper method of getXmlElements
 * note that since we don't know the "deepness" of the
 * schema a recursive way of implementation was necessary
 */
private void getElementsRecursively(HashMap<String, Object> hm, XSParticle xsp) {
     if(xsp != null){
         XSTerm term = xsp.getTerm();
         if(term.isElementDecl()) {
             XSComplexType xscmp =  (term.asElementDecl()).getType().asComplexType();
             //---
             if (xscmp == null){
                 if(xsp.getMinOccurs() == 0)
                     hm.put(term.asElementDecl().getName(), "|");
                 else
                     hm.put(term.asElementDecl().getName(), "=");
             } else{
                 XSContentType xscont = xscmp.getContentType();
                 XSParticle particle = xscont.asParticle();
                 HashMap<String, Object> newHm = new HashMap<String, Object>();
                 getElementsRecursively(newHm, particle);
                 hm.put(term.asElementDecl().getName(), newHm);
             }
             //---
         } else if(term.isModelGroup()){
             XSModelGroup model = term.asModelGroup();
             XSParticle[] parr = model.getChildren();
             for(XSParticle partemp : parr ){
               getElementsRecursively(hm, partemp);
             }
         }
     }
} 
```

# splunk - 为什么要创建 splunk 仪表板与视图？

> ID：10320816
> 
> 赞同：8
> 
> 时间：2012-04-25T17:34:46.243
> 
> 标签：splunk

我试图弄清楚为什么有人想在 Splunk 中创建仪表板。视图允许您添加表单以及任何图表和搜索，而仪表板则不允许。那么，我为什么要制作仪表板？一个比另一个有什么优势吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T11:52:17.057

嗯...不确定我是否同意上面的答案...它们都是“视图”，一种看待它的方式是，表单和仪表板都存储在相同的位置，无论是通过GUI（在“管理器>>用户界面>>**视图**”下），或者通过 CLI 访问（例如`$SPLUNK_HOME/etc/apps/<yourApp>/default/data/ui/views/`）。此外，在高级 XML 中，它们都以开始标记“ `<view>`”开头。

要添加更多...

仪表板是一种视图（通常是指没有用户控制的视图），在高级 XML 中，您从`<view>`标记开始。

表单是一种视图（通常是指具有用户控件的视图），在高级 XML 中，您以`<view>`标记开头。这只是术语上的混淆。

也许混淆在于简单 XML 和高级 XML 之间的差异。最终，Splunk 将在读取简单 XML 时将其转换为高级。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-26T10:53:50.687

仪表板是视图的一种特殊情况。

普通视图将允许您更改搜索条件，从而查看更改后的结果。

仪表板非常有用，因为它们由**多个面板**组成，并且可以将来自多个数据源的数据累积到一个快速视图中。

例如，如果您想查看错误数量并同时将其映射到盒子上的 CPU，仪表板就派上用场了

# iphone - Xcode 一直在加 2 而不是 1

> ID：10320817
> 
> 赞同：0
> 
> 时间：2012-04-25T17:34:49.537
> 
> 标签：iphone, objective-c, ios, timer, add

> **可能重复：**
> [Xcode：为什么我的计时器每次计时都是 2 秒？](https://stackoverflow.com/questions/10318761/xcode-why-is-my-timer-count-2-seconds-on-every-tick)

在我的应用程序中，我有一个应该从 12:00 到 0:00 的计时器，但它在每个滴答声上计算 2 秒，如下所示：

```
11.58
11.56
11.54
11.52 and so on.. 
```

这是开始按钮代码中的代码：

```
tid.text=[NSString stringWithFormat:@"%d:%.2d",minuter,sekunder];
timer= [NSTimer scheduledTimerWithTimeInterval:1.0
                target:self
                selector:@selector(tidklick)
                userInfo:nil
                repeats:YES]; 
```

这是方法 tidklick：

```
-(void) tidklick
{
    tiden -= 1;
    sekunder = tiden % 60;
    minuter= (tiden - sekunder) / 60;
    tid.text=[NSString stringWithFormat:@"%d:%.2d",minuter,sekunder];
} 
```

这是开头的代码..

```
int tiden=720;
int sekunder;
int minuter; 
```

而且当我按下某个按钮时，应该会发生这种情况：`i++;`

但似乎每次我按下按钮`i`都会添加......`2`

怎么了？:S 看起来像是 Xcode 而不是我的代码？

编辑：现在我注意到，当我按下应该最终停止计时器的按钮（计时器无效）时，它算作正常......它一次计数一秒！

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T17:48:06.560

对于问题的第二部分，当您按下按钮时：您是否确保按钮的选择器没有被调用两次 - 例如，当按钮被按下时，然后在它被抬起时再次被调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T17:49:07.653

当你说你“点击按钮”时，你的按钮点击代码是什么？在按钮“点击”上会发生几个事件（最值得注意的是按钮向下和向上事件），如果您处理不当，可能会`i`在一次“点击”中增加多次。

这也可能是计时器减少了 2 而不是 1 的原因——当您“点击”开始按钮时，您正在启动两个计时器而不是一个，导致*每个计时器*每秒减少一秒。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T17:56:22.373

为了更好地计算时间，请尝试使用 NSDate 方法：[NSDate date] 作为开始值，[NSDate timeIntervalSinceDate:startTime] 从开始获取时间偏移。

定时器触发间隔*大约*等于 1 秒。

# linux - 无法双击二进制文件使其在终端中运行

> ID：10320826
> 
> 赞同：2
> 
> 时间：2012-04-25T17:35:29.800
> 
> 标签：linux, ubuntu-11.04

我做了一个这样的脚本：

```
#! /bin/bash
/path/to/program 
```

并使其可执行。我希望能够在 Nautilus 中双击它，选择“在终端中运行”，一切都应该与我自己从终端调用脚本时一样，它工作正常。当我双击时，我收到错误消息“加载共享库时出错：libpylonbase-2.3.3.so：无法打开共享对象文件：没有这样的文件或目录”并且终端立即关闭。libpylonbase-2.3.3 与程序中使用的工业相机有关。任何人都可以看到它在其中一种情况下而不是在另一种情况下工作的原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T17:40:53.113

当您从终端和 Nautilus 运行程序时，请检查环境变量是否相同。您可以通过插入以下行来执行此操作：

```
env > /tmp/test 
```

至少 $PATH 和 $LD_LIBRARY_PATH 应该相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T21:05:19.513

这次可能是 LD_LIBRARY_PATH，但您可以使用[http://stromberg.dnsalias.org/~strombrg/env-search.html自动跟踪 env var 差异](http://stromberg.dnsalias.org/~strombrg/env-search.html)

# javascript - 使用 javascript 在 cookie 中查找电子邮件和用户 ID

> ID：10320827
> 
> 赞同：0
> 
> 时间：2012-04-25T17:35:30.443
> 
> 标签：javascript, arrays, variables, cookies

我在一个页面上存储一个 cookie，并以具有此功能的形式输入：

```
<script type="text/javascript">
function WriteCookie()
{
   emailValue = escape(document.form.01_email.value) + ";";
   userIDValue = escape(document.form.01_userID.value) + ";";

   document.cookie="email=" + emailValue;
   document.cookie="userID=" + userIDValue;
}
</script>

<form name="form">
 <input type="email" class="form-textbox validate[required, Email]" id="input_10" name="01_email" size="26" value="email@email.com" />
 <input type="hidden" id="simple_spc" name="01_userId" value="1234" />
</form> 
```

用户提交表单后，我会重定向到另一个页面，并使用此代码检索 cookie，但我需要让它在 cookie 中找到电子邮件和用户 ID，并将其插入此新页面上的输入值中：

```
<script type="text/javascript">
    function ReadCookie()
    {
       var allcookies = document.cookie;
       alert("All Cookies : " + allcookies );

       // Get all the cookies pairs in an array
       cookiearray  = allcookies.split(';');

       // Now take key value pair out of this array
       for(var i=0; i<cookiearray.length; i++){
          name = cookiearray[i].split('=')[1];
          value = cookiearray[i].split('=')[2];
          alert("Email is : " + name + " and UserID is : " + value);
       }
    }
    </script>

    <form name="form">
     <input type="email" class="form-textbox" id="input_10" name="02_email" size="26" value="" />
     <input type="hidden" id="simple_spc" name="02_userId" value="" />
    </form> 
```

我知道一个用户很可能有多个 cookie，所以只找到我遇到问题的电子邮件和用户 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T17:49:12.747

试试这个来读取你的 cookie。

```
function ReadCookie(){
    var key, value, i;
    var cookieArray  = document.cookie.split(';');

    for (i = 0; i < cookieArray.length; i++){
        key = cookieArray[i].substr(0, cookieArray[i].indexOf("="));
        value = cookieArray[i].substr(cookieArray[i].indexOf("=")+1);

        if (key == 'email'){
            alert('Email is ' + value);
        }

        if (key == 'userID'){
            alert('userID is ' + value);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T17:43:51.340

试试这个：

```
// Now take key value pair out of this array
for(var i=0; i<cookiearray.length; i++){
    name = cookiearray[i].split('=')[1];
    value = cookiearray[i].split('=')[2];
    if (name == "email") 
      alert("Email is : " + value);
    if (name == "userID") 
      alert("UserID is : " + value);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T18:08:08.130

我不会把这个答案归功于这个答案，但是在 quirksmode.org 上的 PPK 不能比 PPK 做得更好，因为它在一个包含“为什么工作”的解决方案中很优雅。

这是代码：

```
function createCookie(name,value,days) {
  if (days) {
    var date = new Date(), 
        expires = "";
    date.setTime(date.getTime()+(days*24*60*60*1000));
    expires = "; expires=" + date.toGMTString();
  } else {
    document.cookie = name+"=" + value + expires + "; path=/";
}

function readCookie(name) {
  var nameEQ = name + "=", 
      ca = document.cookie.split(';');
  for(var i=0;i < ca.length;i++) {
    var c = ca[i];
    while (c.charAt(0)==' ') {
      c = c.substring(1,c.length);
    }
    if (c.indexOf(nameEQ) == 0) {
      return c.substring(nameEQ.length,c.length);
    }
  }
  return null;
}

function eraseCookie(name) {
   createCookie(name,"",-1);
} 
```

这是[关于 Cookie 的 PPK](http://www.quirksmode.org/js/cookies.html)

高温高压

# linux - 通过 KornShell 为 for 循环中的变量赋值

> ID：10320830
> 
> 赞同：0
> 
> 时间：2012-04-25T17:35:45.147
> 
> 标签：linux, shell, unix, variables, ksh

尝试为循环中的变量赋值时遇到问题。这就像在变量中使用变量一样。所以我创建了一个数组来添加值，但还是有问题。

请查看以下 KornShell (ksh) 脚本，让我知道我在哪里搞砸了

```
#!/usr/bin/ksh
set -A array $1 $2 $3
set -A values
typeset -i a

a=0;
for files in ${array[@]}
do
cd ~/shell_lib
ls | grep $files
${values[$a]}="$(cksum $files)" 
a=$a+1
done

echo ${values[@]} 
```

**输出**

* * *

```
$ ./intarray.sh forall.sh name.sh 
forall.sh
./intarray.sh[12]: =3311936491 251 forall.sh:  not found
name.sh
./intarray.sh[12]: =3294813710 338 name.sh:  not found 
```

该文件在那里并且它已经完成了 cksum，但它仍然说找不到！我不明白出了什么问题！有什么见解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T17:45:37.463

> ```
> ${values[$a]}="$(cksum $files)" 
> ```

这几乎肯定不是你想要的。尝试：

```
values[$a]="$(cksum $files)" 
```

`${array[index]}`指的`value`是（仍然为空的）数组条目，因此原始行导致 shell 尝试执行`="$(cksum $files)"`.

# jquery - Jquery可拖动 - 光标离开对象时不会触发mouseup

> ID：10320831
> 
> 赞同：1
> 
> 时间：2012-04-25T17:35:48.247
> 
> 标签：jquery, draggable, mouseup

我创建了一个可拖动对象，当对象从左到右（隐藏）然后从右到左（显示）拖动时，我可以隐藏和显示内容。该对象不能再往左或往右走（包含：“父”）。该事件在 mouseup 时触发。但是，只有当鼠标光标停留在对象上时，mouseup 才有效。如果在光标离开对象时触发 mouseup 事件，则不会触发。

即使光标离开了对象，有人可以帮我找到触发 mouseup 的方法吗？任何帮助将非常感激。这是一个演示： http: [//www.madfrogdesigns.com/vault/mouseup/](http://www.madfrogdesigns.com/vault/mouseup/)

这是我的jQuery代码：

```
$(document).ready(function(){
    initCheckBoxes();
});

var slideSpeed = 200;
var leftDist = 20;

function initCheckBoxes()
{
    $(".toggle-slider").draggable({containment: "parent"});
    $(".toggle-slider").mouseup(function(){

    //Toggle markers;
    $(".content").fadeToggle(200);

    var status = $(this).attr("toggle-status");

    switch(status)
        {
            case "0":
            $(this).animate({left: leftDist}, slideSpeed);
            $(this).attr("toggle-status", "1");
            break;

            case "1":
            $(this).animate({left: "0"}, slideSpeed);
            $(this).attr("toggle-status", "0");
            break;
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T17:38:21.843

您需要两个单独的事件，因为如果 mouseup 发生在元素之外，它不会来自那里：

```
function initCheckBoxes()
{
    $(".toggle-slider").draggable({containment: "parent"});

    var slideMouseDown = false;

    $('.toggle-slider').mousedown(function() {
      slideMouseDown = true;
    });

    $(document).mouseup(function() {

      if(slideMouseDown == true)
      {
        //Toggle markers;
        $('.content').fadeToggle(200);

        var sliderToggle = $('.toggle-slider');
        var status = sliderToggle.attr('toggle-status');

        switch(status)
        {
          case "0":
          //its off, slide it by 20px;
          sliderToggle.animate({left: leftDist}, slideSpeed);
          //change status to 1
          sliderToggle.attr("toggle-status", "1");
          break;

          case "1":
          //its 'on', slide it to 0px;
          sliderToggle.animate({left: "0"}, slideSpeed);
          //change status to 0
          sliderToggle.attr("toggle-status", "0");
          break;
        }
      }

      slideMouseDown = false;
    });
} 
```

# visual-studio-2010 - 处理多个 TFS 项目时，我是否需要父团队项目来管理它们？

> ID：10320835
> 
> 赞同：4
> 
> 时间：2012-04-25T17:36:11.053
> 
> 标签：visual-studio-2010, tfs

我们正在使用 Team System 2010 并尝试通过使用模板“ [Scrum for Team System](http://www.scrumforteamsystem.co.uk/ProcessGuidance/v3) ”来采用 Scrum。在 TFS 中，我们有许多跨单个开发团队的团队项目。为简化起见，我将这样解释：我们有 2 个团队项目，它们是网站。我们还有 5 个团队项目是这 2 个网站中使用的 5 个 Web 控件库。作为 1 个开发团队，我们在这 7 个不同的团队项目中拥有 1 个 Scrum master 和 1 个产品负责人。

这个配置中还有其他人吗？

我如何将所有这些工作整合在一起？我们需要管理所有这些项目的发布。我们的 Sprint 计划会议将处理所有这些项目，所以在会议结束时，我们会有便利贴（产品待办事项），可以只处理需要在任何一个站点。

我是否需要创建另一个团队项目来创建工作项工件并生成我的报告（燃尽图等）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-25T18:45:43.130

团队项目之间不能有层次结构，这个功能不存在，这是有原因的。

您犯了每个人第一次使用 TFS 时都会犯的错误：团队项目太多。很多人不自觉地为每个 Visual Studio 解决方案做一个团队项目。如果您的开发团队致力于开发共享相同发布周期（或关闭一个发布周期）的一系列应用程序/产品，则仅使用**一个**团队项目。

使用许多团队项目的唯一优势是可以为每个团队项目使用不同的流程模板，并且您可以独立升级您的工作项类型 (WIT) 定义（这种优势在大多数情况下是一个活生生的地狱，因为您必须保持在所有团队项目中同步 WIT）。否则你只有不方便（更多的 WIT 定义，更多的 WIQ，更多的分支，更多的报告，更多的管理）。

要实现层次结构的概念（无论您想要什么层次结构），您必须依赖工作项的**区域路径**。然后您的查询和报告将能够随意限定范围。

顺便说一句，您有什么理由不使用[Microsoft 的 Scrum 流程模板](http://visualstudiogallery.msdn.microsoft.com/59ac03e3-df99-4776-be39-1917cbfc5d8e)？

# jquery - jquery，slideToggle 和页面高度？

> ID：10320843
> 
> 赞同：0
> 
> 时间：2012-04-25T17:36:52.537
> 
> 标签：jquery, html, css

我的页面上有许多隐藏的列表元素。

我使用 jquery 来显示和隐藏它们，使用 slideToggle()。

我的 html 和 body 高度设置为 100%。

显示列表元素时，不能向下滚动页面，页面只有原始元素关闭时的高度。

当用户切换列表时，如何调整页面高度？

```
<article>
                <div class="sportType box rounded blue shadow textShadow"><img src="/assets/img/site/arrow_white.png" class="arrow icon rotate0"/><img src="/assets/img/site/snooker_icon.png" class="icon"/>Snooker</div>
                <ul id="snooker" class="sportMatches">
                    <li id ="snooker" class="box sub white shadow match">
                        <img src="/assets/img/site/arrow_black.png" class="icon sportMatchArrow rotate0"/>Joe Davis v John Lardner<span class="star starOff"></span>
                        <div class="sportOdds">
                            <ul>
                            <li><span class="oddsLeft">3:1</span><span class="oddsMiddle">Second Half</span><span class="oddsRight">57:21</span></li>
                            <li style="text-align:left;">Match Prices</li>
                            <li><span class=" oddsBox oddsLeft"><span>1</span> 13/5</span><span class="oddsBox oddsMiddle">X 4/5</span><span class="oddsBox oddsRight">2 12/5</span></li>
                            </ul>
                        </div>
                    </li>

                    <li id ="snooker" class="box sub white shadow match">
                        <img src="/assets/img/site/arrow_black.png" class="icon sportMatchArrow rotate0"/>Peter Lines v Liu Song<span class="star starOff"></span>
                        <div class="sportOdds">
                            <ul>
                            <li><span class="oddsLeft">3:1</span><span class="oddsMiddle">Second Half</span><span class="oddsRight">57:21</span></li>
                            <li style="text-align:left;">Match Prices</li>
                            <li><span class=" oddsBox oddsLeft"><span>1</span> 13/5</span><span class="oddsBox oddsMiddle">X 4/5</span><span class="oddsBox oddsRight">2 12/5</span></li>
                            </ul>
                        </div>
                    </li>

                    <li id ="snooker" class="box sub white shadow match">
                        <img src="/assets/img/site/arrow_black.png" class="icon sportMatchArrow rotate0"/>Chris Small v Supoj Saenla<span class="star starOff"></span>
                        <div class="sportOdds">
                            <ul>
                            <li><span class="oddsLeft">3:1</span><span class="oddsMiddle">Second Half</span><span class="oddsRight">57:21</span></li>
                            <li style="text-align:left;">Match Prices</li>
                            <li><span class=" oddsBox oddsLeft"><span>1</span> 13/5</span><span class="oddsBox oddsMiddle">X 4/5</span><span class="oddsBox oddsRight">2 12/5</span></li>
                            </ul>
                        </div>
                    </li>

                    <li id ="snooker" class="box sub white shadow match">
                        <img src="/assets/img/site/arrow_black.png" class="icon sportMatchArrow rotate0"/>Kurt Maflin v Joe Swail<span class="star starOff"></span>
                        <div class="sportOdds">
                            <ul>
                            <li><span class="oddsLeft">3:1</span><span class="oddsMiddle">Second Half</span><span class="oddsRight">57:21</span></li>
                            <li style="text-align:left;">Match Prices</li>
                            <li><span class=" oddsBox oddsLeft"><span>1</span> 13/5</span><span class="oddsBox oddsMiddle">X 4/5</span><span class="oddsBox oddsRight">2 12/5</span></li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </article>

$(".sportType").click(function() {

    $(this).children('.arrow').toggleClass('rotate0').toggleClass('rotate90');
    $(this).parent().children('ul').slideToggle();

    $(this).toggleClass('rounded').toggleClass('topRounded');

}); 
```

# performance - 哈希表中的链接

> ID：10320844
> 
> 赞同：3
> 
> 时间：2012-04-25T17:37:15.150
> 
> 标签：performance, hash, hashtable, complexity-theory

当我们有一个带有链接的哈希表时：

我只是想知道按顺序维护每个键的列表是否会影响在哈希表中搜索、插入和删除的运行时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T18:29:08.043

理论上：是的，因为在一般情况下，您只需要走一半的链条就可以找到一个物品是否在链条上。

在实践中，可能没有太大区别，因为链通常很短，并且增加的代码复杂性也会花费一些周期，主要是在“插入”情况下。

顺便说一句：在大多数情况下，槽的数量远小于散列值的“键空间”。如果你能负担得起空间，将哈希值存储*在链节点*中将节省在每一跳上重新计算哈希值，并将避免大部分最终比较。这当然是空间<-->时间的权衡。如：

```
struct hashnode **this;
for (this=& table[slot] ; *this; this = &(*this)->link) {
    if ((*this)->hash != the_hash) continue;
    if (compare ((*this)->payload , the_value)) continue;
    break;
 }
 /* at this point "this" points to the pointer that points to the wanted element,
    or to the NULL-pointer where it should be inserted.

    For the sorted-list example, you should instead break out of the loop
    if the compare function returns > 0, and handle that special case here.

 */ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T17:48:45.840

假设您已经选择了哈希算法和映射大小，以减少您将首先遇到的冲突数量。此时，您应该在任何位置都有一个非常小的列表（理想情况下是一两个元素），因此在链中维护排序结构的额外工作肯定不仅仅是迭代该存储桶中的少量项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T17:46:11.617

是的当然。哈希表通常引用的 O(1) 假设是完美的哈希 - 没有两个不相同的项目解析为相同的哈希。

在实践中，情况并非如此。您将始终（对于足够大的数据集）发生冲突。无论您使用的是链接还是其他一些冲突解决技术，冲突都意味着在查找时需要做更多的工作。

这就是为什么选择一个设计/编写良好的哈希函数非常非常重要，并且与您将用作哈希表键的数据匹配良好。在实践中，不同类型的数据将使用不同的散列函数更好地散列。

# integration - Spring.net 和 Oracle Coherence 集成

> ID：10320858
> 
> 赞同：0
> 
> 时间：2012-04-25T17:38:10.127
> 
> 标签：integration, spring.net, spring-integration, oracle-coherence

我可能很讨厌谷歌搜索的东西，但我找不到任何链接提到是否可以将 Spring.net 与 Oracle 的 coherance 产品集成。

有谁知道 Spring.net 是否有相同的包装库？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T09:04:50.617

.net的[spring 集成项目](http://www.springsource.org/extensions/se-springintegration-net)仍列为[spring.net 扩展项目](http://springframework.net/modules.html)，其状态为[“孵化器” ，](http://www.springsource.org/extensions/lifecycle)[自 2010 年 3 月以来](https://fisheye.springsource.org/graph/se-springintegration-net)没有任何提交。

从[项目主页](http://www.springsource.org/extensions/se-springintegration-net)：

> Spring Integration for .NET 项目将使用 Spring Integration 项目的设计和代码库作为基础，根据需要调整代码以支持 .NET 习惯用法，并朝着利用 .NET 独有特性（如 Lambda 表达式）的方向发展和扩展方法。

我建议您首先了解 Spring Integration for Java 是否支持 Oracle 的 Coherance，如果支持，您*可能*有一点机会也可以在 .NET 中使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-13T17:52:27.463

Oracle Coherence 提供了一个本地 .NET 客户端，您可以使用它从任何 .NET 应用程序（包括基于 Spring.NET 的应用程序）访问它。

这是文档的链接：

[http://docs.oracle.com/cd/E24290_01/index.htm](http://docs.oracle.com/cd/E24290_01/index.htm)

**客户指南**（第 I 和 IV 部分）和**.NET API 参考**中介绍了您感兴趣的内容。

我的书[Oracle Coherence 3.5](https://rads.stackoverflow.com/amzn/click/com/1847196128)也有两章介绍 .NET 和[POF（可移植对象格式）](http://coherence.seovic.com/coherence_blog/2009/09/why-portable-objects.html)，以及与 Coherence Java 后端对话的完整 WPF 示例应用程序。

# asp.net - 详细信息视图中的级联下拉列表

> ID：10320862
> 
> 赞同：1
> 
> 时间：2012-04-25T17:38:41.547
> 
> 标签：asp.net, vb.net, drop-down-menu, detailsview

我在 DetailsView 中有两个下拉列表，我想级联工作，想法是一个区域包含各种问题，这些问题取决于所选区域，但我收到以下错误：

**Eval()、XPath() 和 Bind() 等数据绑定方法只能在数据绑定控件的上下文中使用。**

在下一行：

```
<asp:DropDownList ID="ddlIssue" runat="server"
    DataTextField="NameIssue" DataValueField="IdIssue" 
```

完整的代码是：

```
<asp:TemplateField HeaderText="Area" SortExpression="IdArea">
<EditItemTemplate> 
  <asp:DropDownList ID="ddlArea" runat="server"
      DataSourceID="SqlDataSource145711" DataTextField="NameArea"
      DataValueField="IdArea" AutoPostBack="true"
      AppendDataBoundItems="true" SelectedValue='<%# Bind("IdArea") %>'> 
  </asp:DropDownList>
  <asp:SqlDataSource ID="SqlDataSource145711" runat="server"
    ConnectionString="<%$ ConnectionStrings:BaseDatosCJConnectionString %>"
    SelectCommand="SELECT IdArea, NameArea FROM AREA">
  </asp:SqlDataSource>
</EditItemTemplate>
<ItemTemplate>
  <asp:Label ID="Label5" runat="server"
    Text='<%# Bind("IdArea") %>'></asp:Label>
</ItemTemplate>
</asp:TemplateField>

<asp:TemplateField HeaderText="Issue">       
<EditItemTemplate>
**<asp:DropDownList ID="ddlIssue" runat="server"
    DataTextField="NameIssue" DataValueField="IdIssue"**
    DataSourceID="SqlDataSource22" SelectedValue='<%# Bind("IdIssue") %>'
</asp:DropDownList>
<asp:SqlDataSource runat="server"
  ID="sqlDataSource22"
  ConnectionString="<%$ ConnectionStrings:BaseDatosCJConnectionString %>"
  SelectCommand="SELECT IdIssue, NameAIssue, IdArea FROM ISSUE"
  FilterExpression="IdArea = '{0}'">
  <FilterParameters>
  <asp:ControlParameter Name="Param" ControlID="ddlArea"
    PropertyName="SelectedValue" />
  </FilterParameters>                       
</asp:SqlDataSource>

</EditItemTemplate>
</asp:TemplateField> 
```

你能帮忙解决这个错误吗？

我必须从代​​码中做些什么？

祝福

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T19:49:01.273

您不希望有问题的区域看起来像这样：

```
<asp:DropDownList ID="ddlIssue" runat="server"
  DataTextField="NameIssue" DataValueField="IdIssue"
  DataSourceID="SqlDataSource22" SelectedValue='<%# Bind("IdIssue") %'> 
```

请注意，撇号`'`位于右括号之前。

# java - 使用 Java 打开 Microsoft Word docx 文件

> ID：10320864
> 
> 赞同：3
> 
> 时间：2012-04-25T17:38:44.377
> 
> 标签：java, file, io, docx

如何在 Java 中打开 Microsoft Word docx 文件？此外，如果它受密码保护，我该如何打开它？

例如，

```
File f = new File("hello.docx"); 
```

请尽量避免回应诸如“你不应该这样做”之类的内容。我有一个很好的理由，所以当你回答时请坚持这个问题。多谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T17:42:53.847

有用于处理 MS Office 文件的[Apache POI项目。](http://poi.apache.org/)DOCX 文件只是一个包含一系列 XML 文件的 zip 文件，因此您可以解压缩文件并使用 XML。XML 规范（Open XML）是已知的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T17:40:59.500

我没有亲自使用它，但看起来 Apache POI 会为你工作：http: [//poi.apache.org/](http://poi.apache.org/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-25T17:51:30.187

您也可以使用 docx4j。[http://www.docx4java.org/trac/docx4j](http://www.docx4java.org/trac/docx4j)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-02T17:26:45.950

我使用过 docx4j 和 Apache 的 POI 库，如果您使用 .docx，我会推荐 .docx4j。自动化了很多创建 .docx 的过程。
这里有一个很好的例子：http: [//java.dzone.com/articles/create-complex-word-docx](http://java.dzone.com/articles/create-complex-word-docx) 关于如何使用 docx4j 包创建 .docx。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-26T04:00:16.587

如果 docx 受密码保护，则它不会是 zip 文件。这将是一个复合文件。请参阅[受保护的 Office Open XML 文档概述](http://blogs.msdn.com/b/openspecification/archive/2009/07/17/overview-of-protected-office-open-xml-documents.aspx)

要在 Java 中读取复合文件，请使用[POIFS](http://poi.apache.org/poifs/index.html)。POIFS 是 POI 的一部分（docx4j 也使用它，所以如果您下载 docx4j 发行版，您将能够使用 POIFS API）

解密加密包后，您可以使用 docx4j 或 POI 读取它。

编辑：好的，现在 docx4j 可以自动[处理受密码保护的 docx](http://www.docx4java.org/trac/docx4j/changeset/1808)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-25T17:43:29.617

您是否尝试过使用[Open Office api](http://wiki.services.openoffice.org/wiki/Documentation/DevGuide/OpenOffice.org_Developers_Guide)打开它？它可以与许多文档类型一起使用。

我将它与 MS Excel 文件 .xls（旧版本）格式一起使用。

希望这可以帮到你。

# c# - Xslt 1.0 XML 到 excel 转换问题

> ID：10320865
> 
> 赞同：0
> 
> 时间：2012-04-25T17:38:45.627
> 
> 标签：c#, .net, excel, xslt, xslt-1.0

我使用 .Net 框架的 XslCompiledTransform 类作为 XSLT 处理器（换句话说，Xslt 1.0）。

我的要求是我想使用 XSLT 1.0 和 .Net [4.0] 将 XML 文件转换为 Excel 文件（xls 文件）。

为简单起见，因为这只是测试代码，我只是考虑对我的 Xsl 文件进行一些简单的硬编码。

具体来说，我的两个问题是：

1.  我已经尝试了很多东西，但是我看不到我的 Excel 工作表的工作表被命名为“wAbc”，这就是我想要命名的。我将工作表名称视为我的文件名。也不会生成其他工作表。下面是我的 XSL 文件
2.  此外，由于这是测试代码，除非我使用 HTML tags ，否则我看不到不同行上输出的数据。我看到的是：`AbcNext line`而不是

    美国广播公司下线

那么我做错了什么？提前感谢您的时间和帮助。

我将文件响应的内容类型设置为

```
application/vnd.ms-excel 
```

这是我的测试 Xsl 文件：

```
<?xml version="1.0"?>
    <xsl:stylesheet version="1.0"
        xmlns="urn:schemas-microsoft-com:office:spreadsheet"
        xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
        xmlns:msxsl="urn:schemas-microsoft-com:xslt"
        xmlns:o="urn:schemas-microsoft-com:office:office"
        xmlns:x="urn:schemas-microsoft-com:office:excel"
        xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet" 
    xmlns:html="http://www.w3.org/TR/REC-html40">

      <xsl:template match="/">
        <xsl:processing-instruction name="mso-application">progid='Excel.Sheet'</xsl:processing-instruction>
        <Workbook>
            <Worksheet ss:Name="wAbc">
              <Table ss:ExpandedColumnCount="2" x:FullColumns="1" x:FullRows="1" ss:DefaultRowHeight="15">
                <Column ss:AutoFitWidth="20" ss:AutoWidth="65"></Column>
                <Row>
                  <Cell>
                    <Data ss:Type="String">Abc</Data>
                  </Cell>
                </Row>
                <Row>
                  <Cell>
                    <Data ss:Type="String">Next line</Data>
                  </Cell>
                </Row>
              </Table>
              <WorksheetOptions xmlns="urn:schemas-microsoft-com:office:excel">
                <PageSetup>
                  <Header x:Margin="0.3"/>
                  <Footer x:Margin="0.3"/>
                  <PageMargins x:Bottom="0.75" x:Left="0.7" x:Right="0.7" x:Top="0.75"/>
                </PageSetup>
              </WorksheetOptions>
            </Worksheet>
        </Workbook>
      </xsl:template>
    </xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T10:07:04.783

您在这里使用 Excel XML 作为格式（因此，严格来说不是 XLS 文件，它是二进制文件）。

但无论如何，我可以看到您当前输出的 Excel XML 存在两个问题。首先，我认为**Column元素上的****ss:AutoFitWidth**属性需要设置为 1（或 0）。我认为 20 不是有效值。

 **有关可能值的列表，请参阅[http://msdn.microsoft.com/en-us/library/aa140066(v=office.10).aspx 。](http://msdn.microsoft.com/en-us/library/aa140066(v=office.10).aspx)

另外，我认为您可能（尽管我对此不是 100% 确定）需要在**Table元素上设置****ss:ExpandedRowCount**以及**ss:ExpandedColumnCount**。

 ****查看更改其中一项或两项是否可以修复您的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T07:16:15.447

Excel`XLS`文件使用 Microsoft 专有的二进制格式 - 无法使用 XSLT 生成该格式。

（相对）新`XSLX`格式是一组压缩在一起的 XML 文件，因此原则上您可以使用 XSLT 生成这些文件，然后压缩它们以生成最终文件 - 仍然不是很容易。要查看这些文件，只需解压缩`XSLX`文件即可。

我建议您生成一种更简单的格式——CSV 或中间 XML——然后将其导入 Excel。******

# java - 为什么在 GWT 中实例化一个接口？

> ID：10320868
> 
> 赞同：0
> 
> 时间：2012-04-25T17:38:58.970
> 
> 标签：java, gwt

通过本教程[https://developers.google.com/web-toolkit/doc/latest/tutorial/RPC](https://developers.google.com/web-toolkit/doc/latest/tutorial/RPC)提到要设置回调对象，必须执行以下操作：

```
// Set up the callback object.
AsyncCallback<StockPrice[]> callback = new AsyncCallback<StockPrice[]>() {
  public void onFailure(Throwable caught) {
    // TODO: Do something with errors.
  }

  public void onSuccess(StockPrice[] result) {
    updateTable(result);
  }
}; 
```

但是我注意到 AsyncCallback 是一个接口。据我所知，接口无法实例化。这怎么可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T17:50:26.240

这是使用匿名类在 Java 中实现回调的示例。这相当于定义一个实现该接口的类。为了澄清，这：

```
new AsyncCallback() {
    ...
} 
```

相当于：

```
public class MyCallback implements AsyncCallback {
    ...
} 
```

事实上，如果您愿意，您*可以*`class`在单独的 Java 文件中创建自己的文件，调用它`MyCallback`，然后执行以下操作：

```
AsyncCallback<StockPrice[]> callback = new MyCallback(); 
```

全部都是一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T17:40:39.243

这是该接口的匿名内部类实现的情况。

演示的方法经常用于实现不同的侦听器和回调。可以在[此处](http://docs.oracle.com/javase/tutorial/java/javaOO/innerclasses.html)找到有关该主题的更多信息。

# ruby - ImageMagick - Rmagick 库的替代品？

> ID：10320870
> 
> 赞同：0
> 
> 时间：2012-04-25T17:39:10.960
> 
> 标签：ruby, rmagick

有没有可以替代[RMagick](https://github.com/rmagick/rmagick)的库？

自从 gem 更新以来，已经超过 2 年了。安装过程仍然很痛苦。坏了

遵循[本指南](https://stackoverflow.com/questions/4451213/ruby-1-9-2-how-to-install-rmagick-on-windows)的示例：

```
C:\Ruby192\bin>convert -version
Version: ImageMagick 6.7.6-7 2012-04-20 Q16 http://www.imagemagick.org
Copyright: Copyright (C) 1999-2012 ImageMagick Studio LLC
Features: OpenMP 
```

应该安装了吧？

```
C:\Rails\myapp>irb
irb(main):001:0> require 'rubygems'
=> true
irb(main):002:0> require 'RMagick'
LoadError: no such file to load -- RMagick
        from C:/Ruby192/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:i
n `require'
        from C:/Ruby192/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:i
n `require'
        from (irb):2
        from C:/Ruby192/bin/irb:12:in `<main>'
irb(main):003:0> 
```

然后，当我使用 ruby​​ 控制台时，它会出错。已经运行`bundle install`了各种其他解决方案，并遵循了几个指南，安装和卸载了一千次。

因此，我正在寻找 RMagick 库的替代品。Javascript 库/插件或 ruby​​ gem。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T18:13:54.070

几年前，我在一个项目中成功使用了[“mini_magick” 。](http://rubygems.org/gems/mini_magick)它是一个纯 Ruby gem，通过命令行调用 ImageMagick 的工具，而不是像 RMagick 那样使用共享库，因此您可能会发现它更易于安装。

# asp.net-mvc - ASP.Net MVC 3 JsonResult 重定向错误

> ID：10320872
> 
> 赞同：0
> 
> 时间：2012-04-25T17:39:25.070
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我有一个 ASP.Net MVC 3 应用程序，它使用 jQuery .ajax 调用来 POST 到服务器端控制器操作，如下所示

客户端 jQuery 调用：

```
//Page the server
        $.ajax({
                url: '/Home/Call_Abort',
                type: 'POST',
                data: "{ 'op_id': '" + ajaxOPID + "', 'statMsg': '" + ajaxStatMsg + "'}",
                contentType: 'application/json; charset=utf-8',
                success: function (data) {
                        window.location.href = data.redirectUrl;
                },
                error: function (xhr, ajaxOptions, thrownError) {
                        alert("Error while paging the server to abort.  Reported error: '" + xhr.responseText + "'.");
                }
        }); 
```

服务器控制器操作：

```
[HttpPost]
public JsonResult Call_Abort(string op_id, string statMsg)
{
    return Json(new
    {
        redirectUrl = Url.Action("Operator_Home", "Home", new { op_id = op_id, status = statMsg }),
        isRedirect = true
    });

} 
```

返回 URL 应该将用户重定向到不同的视图（即 Operator_Home 视图）。这适用于我的本地开发 PC，按预期路由到 Operator_Home 视图，但是当我在开发 Web 服务器（带有 IIS 7 的服务器 2008）上运行它进行测试时，我收到以下 404 错误页面作为**xhr.responseText**结果在上面的 .ajax 调用中。

![在此处输入图像描述](../Images/07bfaabcdfe9645141d4475d22f6b158.png)

似乎正在发生的事情不是重定向到我在**redirectURL**（即Operator_Home）中指定的视图，而是认为Call_Abort控制器操作应该返回Call_Abort视图，因为不存在这样的视图，所以下面的错误被抛出。但是为什么这会发生在 Web 服务器上，而不是我运行 Visual Studio 开发服务器的本地 PC 上呢？是否有一些设置我需要为我在 IIS 上的应用程序进行调整，以便让它像在我的开发机器上一样运行。我对 MVC 路由的理解不够清楚，无法知道为什么会发生这种情况。任何帮助或见解表示赞赏。

**更新**

抱歉，我在工作地点使用了几台服务器，我引用了错误的 Web 服务器。我正在运行它的服务器是带有 IIS7 的 Server 2008

![在此处输入图像描述](../Images/7c2bbcf16640bb6da856aa190177bb8e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T23:24:45.187

错误原来是 tha .Ajax 调用中的 URL 的问题，我修改了 URL，如下所示：

```
//Page the server
var abortURL = window.location.origin + '/myApp/Home/Call_Abort';
        $.ajax({
                url: abortURL,
                type: 'POST',
                data: "{ 'op_id': '" + ajaxOPID + "', 'statMsg': '" + ajaxStatMsg + "'}",
                contentType: 'application/json; charset=utf-8',
                success: function (data) {
                        window.location.href = data.redirectUrl;
                },
                error: function (xhr, ajaxOptions, thrownError) {
                        alert("Error while paging the server to abort.  Reported error: '" + xhr.responseText + "'.");
                }
        }); 
```

这解决了问题并允许 jQuery 完成 POST。

# jquery - JQuery 移动 UI 编辑器 - Codiqa 替代品

> ID：10320877
> 
> 赞同：17
> 
> 时间：2012-04-25T17:39:51.087
> 
> 标签：jquery, jquery-ui, jquery-mobile

[是否有类似于JQuery Mobile 主页](http://jquerymobile.com/)上的 Codiqa 编辑器的免费或开源 UI 编辑器？

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-06T22:03:56.270

这里有一个免费的

[https://01.org/rib/](https://01.org/rib/)

它仅适用于 Chrome，但这应该不是问题。您可以下载源代码并将其本地托管在您的个人 Web 服务器上。然后，您可以进行任何您想要的更改，因为您拥有源代码。

您还可以使用以下命令打开 Chrome

--enable-file-cookies --allow-file-access-from-files

然后 CTRL+O 在本地打开 index.hrml 而不使用 Web 服务器。

您甚至可以将其安装为 Chrome 应用扩展程序。

您只需要授予它在本地存储文件的权限，因为它在本地存储您的项目。

试试看。它确实有效，虽然本机源使用 JQM 1.0，但可以轻松更改为使用 v1.3 - 最新版本。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-02T10:16:01.170

还有另外两个编辑器可用

[http://www.mobjectify.com/](http://www.mobjectify.com/)

和

[http://tiggzi.com/home](http://tiggzi.com/home)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-11T06:46:54.033

使用[Intel XDK New 。](http://xdk-software.intel.com/)它支持超过 3 个 UI 开发框架（JQMobile、Intel App Framework 等）。它免费和开源

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-05T17:08:15.750

7 月编辑：我们之前尝试过“免费”计划，只是找不到一个好的公式。我们是一个小团队，所以我们决定取消一个新注册的免费计划，直到我们可以了解更多关于如何制作一个好的计划，如果有的话。

但是，我们确实为学生、从事开源代码工作的人或非营利组织提供免费帐户。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-03-12T10:04:42.590

[试一试EZoApp](http://jqmdesigner.appspot.com/designer.html "EZoApp")，完全免费，轻松上手！此外，还提供了许多丰富的可扩展组件。

# r - 如何遍历一个文件夹中的多个文件？

> ID：10320882
> 
> 赞同：1
> 
> 时间：2012-04-25T17:40:16.763
> 
> 标签：r, vector

下面给出的一段 R 代码旨在对一个文件夹中的许多文件 (12) 执行计算。但我收到此错误：

> 错误：下标超出范围。

它完成了第一个文件的读取，但是当它开始读取下一个文件时出现了错误。任何建议为什么？

```
library(Matrix)
setwd("C:\\Users\\Desktop\\img")
listfile <- dir()
long <- file("C:\\Users\\Desktop\\New folder (5)\\vfd.bin", "rb")
A = readBin(long, integer(), size=2,n=67420*1, signed=F)
ta <- t(A)
lot <- file("C:\\Users\\Desktop\\New folder (5)\\lat.img", "rb")
B = readBin(lot, integer(), size=2,n=67420*1, signed=F)
tb <-t (B)

for (n in 1:length(listfile))
{
    h = listfile[n]
    b = file.info(h[n])$size/67420/4
    wind <- file(h, "rb")
    C = readBin(wind, double(), size=4,n=67420*b, signed=TRUE)
    D <- matrix(C,nrow=b,ncol=67420)
    for(d in 1:b)
    {
        M <- Matrix(-9999, 360, 720)
        tm <- t(M)
        for(i in 1:67420)
        {
            tm[ta[i],tb[i]] = round(10 * ((D[(d-1)*8+1,i] + D[(d-1)*8+2,i] + D[(d-1)*8+3,i] + D[(d-1)*8+4,i] + D[(d-1)*8+5,i] + D[(d-1)*8+6,i] + D[(d-1)*8+7,i] + D[(d-1)*8+8,i] ) / 8))
        } ###gooooooood
        to.write <- sprintf("C:\\Users\\Desktop\\New folder (6)\\Yar_%00d.bin", d)
        writeBin(as.integer(tm@x), size=2,to.write)
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-03-19T08:40:55.413

该错误的含义是您试图访问其边界之外的向量元素。

问题出在这段代码中（`for`循环初始化后的前两行）：

```
h = listfile[n]
b = file.info(h[n])$size/67420/4 
```

为了消除错误，您应该替换`b = file.info(h[n])` 为`b = file.info(h)`.

这是因为当`n = 1`（循环的第一次迭代）`h`等于第一个图像文件名（它是长度为 1 的向量值，事实上的标量）并且`h[1]`等于`h`. 在第一次迭代中一切似乎都很好。

但是在第二次迭代时 ( `n = 2`)`h`等于第二个图像文件名（它是长度为 1 的标量），但您正试图访问 1 长度向量的第二个元素。因此 `b`，第二次迭代的价值将是`NA`，并且在代码中将引发错误。

# java - 如何打印 WebView？

> ID：10320883
> 
> 赞同：3
> 
> 时间：2012-04-25T17:40:20.697
> 
> 标签：java, javascript, android, android-webview, google-cloud-print

我的 Android 应用程序呈现一个包含画布的 WebView。云打印需要 PDF。如何使用我的 WebView 生成 PDF 以发送到云打印？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T18:44:55.870

您可以首先将画布捕获为 png ：（取自[stackoverflow 答案](https://stackoverflow.com/questions/923885/capture-html-canvas-as-gif-jpg-png-pdf)）

```
var canvas = document.getElementById("mycanvas");
var img    = canvas.toDataURL("image/png"); 
```

然后下一步将其转换为pdf。我还没有看到基于 javascript 的转换器，但可以将 png 发送到自定义 Web 服务（可能在 Google Apps、Amazon AWS 或传统托管机器上运行），它简单地返回一个 pdf。ImageMagick 可以在这里与包装 cgi 脚本一起使用，或者您可以使用一些库。或者，也可以在 android 应用程序中进行转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T06:14:21.877

还有 WebView.capturePicture() [http://developer.android.com/reference/android/webkit/WebView.html#capturePicture](http://developer.android.com/reference/android/webkit/WebView.html#capturePicture) ()

# macos - 为什么我必须继续使用 `source ~/.profile` 来获取设置？

> ID：10320885
> 
> 赞同：26
> 
> 时间：2012-04-25T17:40:35.147
> 
> 标签：macos, bash, terminal

我有几个 bash 脚本，我想确保它们默认运行，我目前将它们存储在`~/.profile`我的 mac 上。那是存放它们的错误地方吗？我听说过其他人并尝试过它们（如`~/.bashrc`,`~/.bash_profile`等），但它们似乎不起作用。

所有这些之间有什么区别，我将脚本放入哪个脚本以便它在运行时配置并且我不必`$ source ~/.profile`每次打开终端时都调用？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-08-05T03:49:32.510

如果两者都`~/.bash_profile`存在`~/.profile`，则 bash 仅`~/.bash_profile`在作为交互式登录 shell 调用时才会读取。

[https://www.gnu.org/s/bash/manual/html_node/Bash-Startup-Files.html](https://www.gnu.org/s/bash/manual/html_node/Bash-Startup-Files.html)：

> **作为交互式登录 shell 调用，或使用 --login**
> 
> 当 Bash 作为交互式登录 shell 或作为带有`--login`选项的非交互式 shell 调用时，它首先从文件中读取并执行命令`/etc/profile`（如果该文件存在）。读取该文件后，它会按顺序查找`~/.bash_profile`、`~/.bash_login`和`~/.profile`，并从第一个存在且可读的文件中读取并执行命令。
> 
> [...]
> 
> **作为交互式非登录 shell 调用**
> 
> 当一个不是登录 shell 的交互式 shell 启动时`~/.bashrc`，如果该文件存在，Bash 会从 读取并执行命令。

`~/.profile`也被其他 shell 使用。

Terminal 和 iTerm 默认打开新的 shell 作为登录 shell（通过执行类似的命令`login -pf $USER`），但是许多 GNU/Linux 终端应用程序打开新的 shell 作为非登录 shell。OS X 用户经常`~/.bash_profile`使用`~/.bashrc`.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-25T17:45:26.527

```
 +-----------------+
                     |                 |
interactive shell -->|  ~/.bashrc      |
                     |                 |
                     +-----------------+ 
```

`interactive shell`将`~/.bashrc`自动来源。

看看[主目录中的.bashrc是否应该自动加载？](https://stackoverflow.com/questions/9953005/should-the-bashrc-in-the-home-directory-load-automatically/9954208#9954208)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-11T15:49:42.947

我做了这些来纠正这个问题：

```
cat .bash_profile >> .profile
rm .bash_profile 
```

替代方法是：

```
echo "source ~/.profile" >> .bash_profile 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-10-01T18:00:18.997

确保如果你`source ~/.profile`在你的`.bashrc`那你注释掉或删除任何命令（in `.profile`）来调用或`.bashrc`在你的源代码，`.profile`否则它将永远循环并且你永远不会得到提示。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-25T17:43:43.533

bash 的不同设置将根据其配置自动获取不同的文件。始终来源的几乎通用文件是`~/.bashrc`- 这是一个 bash 核心的东西，它将加载这个文件。在那个文件中，你应该添加你的行`source ~/.profile`，你会很高兴的！

-编辑-

在我的 Linux 和我同事的 Mac 上：

```
$ echo "echo hello" >> ~/.profile
$ echo "source ~/.profile" >> ~/.bashrc
$ bash
Hello
$ 
```

# xslt - #,###.00 和 ###,###.00 之间的 xslt 格式编号差异

> ID：10320891
> 
> 赞同：0
> 
> 时间：2012-04-25T17:40:58.057
> 
> 标签：xslt

谁能告诉我这两种在 xslt 中使用 format-number 格式化数字的方法之间的区别？

# ,###.00 与 ###,###.00

他们似乎给出了相同的结果。

```
<xsl:value-of select='format-number(1000000, "###,###.00")' />
<xsl:value-of select='format-number(1000000, "#,###.00")' /> 
```

在任何一种情况下，我都会得到 1,000,000.00 的相同结果。有什么不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T17:53:09.400

仔细阅读手册后，我发现根本没有区别。因为用逗号（，）表示，它是千位分隔符，并且两者都是相同的。

[http://www.w3schools.com/XSL/func_formatnumber.asp](http://www.w3schools.com/XSL/func_formatnumber.asp)

# java - Java：处理文本行

> ID：10320897
> 
> 赞同：0
> 
> 时间：2012-04-25T17:41:23.353
> 
> 标签：java, text-processing

好的，所以我正在使用 java 类处理搜索日志，但在某些时候，我偶然发现了日志中的一个棘手部分：

通常，日志行如下所示：

```
217 yahoo.com   2006-05-16 16:35:31 
```

第一个数字是用户 ID，之后的字符串是查询，之后是时间戳。到目前为止一切顺利，我设法提取了用​​户 ID 并使用 .split(':') 和 split('-') 来获取时间戳的部分。但在日志的更下方，行的组成有点令人不快——例如，有如下行：

```
217 -   2006-05-18 18:20:10 1   http://www.theonering.net
1268    osteen-schatzberg.com   2006-03-21 17:55:42 1   http://www.osteen-schatzberg.com 
```

在第一行中，“-”似乎标记了一个空查询或 w/e，最后的 url 标记为“clickurl”。有了这样的行，我使用 split() 来接收时间戳（以及查询）的想法就变成了地狱......

有谁知道如何解决这个问题？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T17:48:34.790

您应该在这里真正考虑使用带有正则表达式的模式匹配。

[这](http://www.java2s.com/Code/Java/Development-Class/ParseanApachelogfilewithRegularExpressions.htm)是一个可能有用的例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T17:48:20.050

如果先用空格分割字符串怎么办？示例（伪代码）：

```
 string = nextLineInFile;
 string[] data = (fill with nextLineInFile broken up by spaces/whitespace); 
```

现在`data[0]`保存用户 ID，`data[1]`保存查询等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T17:51:03.427

没有通用的解决方案。看来您的线条遵循以下模式

所以你可以用空格分割东西，然后从那里开始......

# python - 将字符串解析为json python

> ID：10320899
> 
> 赞同：-3
> 
> 时间：2012-04-25T17:41:33.883
> 
> 标签：python, json, parsing

我有这个作为 JSON 字符串：

```
{common:{rq:{ct:""},up:"chg",down:"chr",linktargetInternal:"",hash:"",dfp:"ad-g.doubleclick.net/adi/com.gf.option_chain/default;fe=nasdaq;ft=aapl;sz=300x250;dcopt=ist;myd=ad"},stickyUrlArgs:"",option_chain:{expiry:{y:2012,m:4,d:27},expirations:[{y:2012,m:4,d:27},{y:2012,m:5,d:19},{y:2012,m:6,d:16},{y:2012,m:7,d:21},{y:2012,m:8,d:18},{y:2012,m:10,d:20},{y:2013,m:1,d:19},{y:2014,m:1,d:18}],puts:[{cid:"1101041109949338",name:"",s:"AAPL120427P00470000",e:"OPRA",p:"0.01",cs:"chr",c:"-0.01",cp:"-50.00",b:"0.01",a:"0.02",oi:"-",vol:" 360",strike:"470.00",expiry:"Apr 27, 2012"},{cid:"202440188791400",name:"",s:"AAPL120427P00475000",e:"OPRA",p:"0.02",cs:"chb",c:"0.00",cp:"0.00",b:"0.01",a:"0.02",oi:"-",vol:" 9",strike:"475.00",expiry:"Apr 27, 2012"},{cid:"383449077769463",name:"",s:"AAPL120427P00480000",e:"OPRA",p:"0.02",cs:"chr",c:"-0.50",cp:"-96.15",b:"0.01",a:"0.03",oi:" 6539",vol:" 1318",strike:"480.00",expiry:"Apr 27, 2012"},{cid:"889017006863464",name:"",s:"AAPL120427P00485000",e:"OPRA",p:"0.02",cs:"chr",c:"-0.47",cp:"-95.92",b:"0.01",a:"0.02",oi:" 2412",vol:" 765",strike:"485.00",expiry:"Apr 27, 2012"},{cid:"809609994087128",name:"",s:"AAPL120427P00490000",e:"OPRA",p:"0.02",cs:"chr",c:"-0.63",cp:"-96.92",b:"0.01",a:"0.02",oi:" 4662",vol:" 938",strike:"490.00",expiry:"Apr 27, 2012"},{cid:"509564982113916",name:"",s:"AAPL120427P00495000",e:"OPRA",p:"0.02",cs:"chr",c:"-0.85",cp:"-97.70",b:"0.01",a:"0.02",oi:" 3033",vol:" 1150",strike:"495.00",expiry:"Apr 27, 2012"},{cid:"419949964472999",name:"",s:"AAPL120427P00500000",e:"OPRA",p:"0.01",cs:"chr",c:"-1.24",cp:"-99.20",b:"0.01",a:"0.02",oi:" 5601",vol:" 1906",strike:"500.00",expiry:"Apr 27, 2012"},{cid:"202052946910835",name:"",s:"AAPL120427P00505000",e:"OPRA",p:"0.02",cs:"chr",c:"-1.43",cp:"-98.62",b:"0.02",a:"0.03",oi:" 3484",vol:" 1171",strike:"505.00",expiry:"Apr 27, 2012"},{cid:"93740945301328",name:"",s:"AAPL120427P00510000",e:"OPRA",p:"0.03",cs:"chr",c:"-2.07",cp:"-98.57",b:"0.02",a:"0.03",oi:" 5120",vol:" 1621",strike:"510.00",expiry:"Apr 27, 2012"},{cid:"397285244548765",name:"",s:"AAPL120427P00515000",e:"OPRA",p:"0.02",cs:"chr",c:"-2.63",cp:"-99.25",b:"0.02",a:"0.04",oi:" 4093",vol:" 1437",strike:"515.00",expiry:"Apr 27, 2012"},{cid:"16957499670867",name:"",s:"AAPL120427P00520000",e:"OPRA",p:"0.04",cs:"chr",c:"-3.36",cp:"-98.82",b:"0.03",a:"0.04",oi:" 11178",vol:" 5775",strike:"520.00",expiry:"Apr 27, 2012"},{cid:"525313553769499",name:"",s:"AAPL120427P00525000",e:"OPRA",p:"0.05",cs:"chr",c:"-4.50",cp:"-98.90",b:"0.04",a:"0.05",oi:" 8721",vol:" 3763",strike:"525.00",expiry:"Apr 27, 2012"},{cid:"951857154849141",name:"",s:"AAPL120427P00530000",e:"OPRA",p:"0.05",cs:"chr",c:"-5.30",cp:"-99.07",b:"0.04",a:"0.06",oi:" 8168",vol:" 4986",strike:"530.00",expiry:"Apr 27, 2012"},{cid:"718770452910534",name:"",s:"AAPL120427P00535000",e:"OPRA",p:"0.05",cs:"chr",c:"-6.90",cp:"-99.28",b:"0.04",a:"0.06",oi:" 4335",vol:" 1221",strike:"535.00",expiry:"Apr 27, 2012"},{cid:"774022499704621",name:"",s:"AAPL120427P00540000",e:"OPRA",p:"0.06",cs:"chr",c:"-8.74",cp:"-99.32",b:"0.05",a:"0.06",oi:" 6030",vol:" 3706",strike:"540.00",expiry:"Apr 27, 2012"},{cid:"696114851470847",name:"",s:"AAPL120427P00545000",e:"OPRA",p:"0.06",cs:"chr",c:"-10.49",cp:"-99.43",b:"0.05",a:"0.08",oi:" 4236",vol:" 2561",strike:"545.00",expiry:"Apr 27, 2012"},{cid:"583611645155653",name:"",s:"AAPL120427P00550000",e:"OPRA",p:"0.09",cs:"chr",c:"-12.51",cp:"-99.29",b:"0.07",a:"0.09",oi:" 9703",vol:" 3359",strike:"550.00",expiry:"Apr 27, 2012"},{cid:"958645382056052",name:"",s:"AAPL120427P00555000",e:"OPRA",p:"0.10",cs:"chr",c:"-14.49",cp:"-99.31",b:"0.08",a:"0.11",oi:" 3806",vol:" 2205",strike:"555.00",expiry:"Apr 27, 2012"},{cid:"1067017333626905",name:"",s:"AAPL120427P00560000",e:"OPRA",p:"0.12",cs:"chr",c:"-16.73",cp:"-99.29",b:"0.10",a:"0.14",oi:" 6498",vol:" 3725",strike:"560.00",expiry:"Apr 27, 2012"},{cid:"486002069484262",name:"",s:"AAPL120427P00565000",e:"OPRA",p:"0.14",cs:"chr",c:"-18.66",cp:"-99.26",b:"0.14",a:"0.16",oi:" 3540",vol:" 3225",strike:"565.00",expiry:"Apr 27, 2012"},{cid:"407904477888034",name:"",s:"AAPL120427P00570000",e:"OPRA",p:"0.22",cs:"chr",c:"-21.24",cp:"-98.97",b:"0.18",a:"0.20",oi:" 2858",vol:" 4259",strike:"570.00",expiry:"Apr 27, 2012"},{cid:"886872871436931",name:"",s:"AAPL120427P00575000",e:"OPRA",p:"0.24",cs:"chr",c:"-23.76",cp:"-99.00",b:"0.23",a:"0.28",oi:" 2457",vol:" 4153",strike:"575.00",expiry:"Apr 27, 2012"},{cid:"1020383070407573",name:"",s:"AAPL120427P00580000",e:"OPRA",p:"0.37",cs:"chr",c:"-27.22",cp:"-98.66",b:"0.37",a:"0.40",oi:" 3336",vol:" 10895",strike:"580.00",expiry:"Apr 27, 2012"},{cid:"32608930043617",name:"",s:"AAPL120427P00585000",e:"OPRA",p:"0.58",cs:"chr",c:"-30.17",cp:"-98.11",b:"0.54",a:"0.58",oi:" 2060",vol:" 11331",strike:"585.00",expiry:"Apr 27, 2012"},{cid:"673943550096411",name:"",s:"AAPL120427P00590000",e:"OPRA",p:"1.01",cs:"chr",c:"-33.94",cp:"-97.11",b:"0.95",a:"0.99",oi:" 1846",vol:" 12239",strike:"590.00",expiry:"Apr 27, 2012"},{cid:"814317887488205",name:"",s:"AAPL120427P00595000",e:"OPRA",p:"1.72",cs:"chr",c:"-37.13",cp:"-95.57",b:"1.72",a:"1.85",oi:" 1317",vol:" 11221",strike:"595.00",expiry:"Apr 27, 2012"},{cid:"999379436557563",name:"",s:"AAPL120427P00600000",e:"OPRA",p:"3.10",cs:"chr",c:"-39.97",cp:"-92.80",b:"2.98",a:"3.10",oi:" 1871",vol:" 27631",strike:"600.00",expiry:"Apr 27, 2012"},{cid:"930882674562505",name:"",s:"AAPL120427P00605000",e:"OPRA",p:"5.00",cs:"chr",c:"-42.40",cp:"-89.45",b:"4.80",a:"4.90",oi:" 731",vol:" 19072",strike:"605.00",expiry:"Apr 27, 2012"},{cid:"522292664419639",name:"",s:"AAPL120427P00610000",e:"OPRA",p:"7.60",cs:"chr",c:"-44.58",cp:"-85.44",b:"7.20",a:"7.35",oi:" 1232",vol:" 19836",strike:"610.00",expiry:"Apr 27, 2012"},{cid:"832192968237765",name:"",s:"AAPL120427P00615000",e:"OPRA",p:"10.60",cs:"chr",c:"-45.40",cp:"-81.07",b:"10.20",a:"10.35",oi:" 424",vol:" 10995",strike:"615.00",expiry:"Apr 27, 2012"},{cid:"641374961973721",name:"",s:"AAPL120427P00620000",e:"OPRA",p:"14.30",cs:"chr",c:"-47.20",cp:"-76.75",b:"13.75",a:"14.00",oi:" 605",vol:" 5852",strike:"620.00",expiry:"Apr 27, 2012"},{cid:"551837487018071",name:"",s:"AAPL120427P00625000",e:"OPRA",p:"18.55",cs:"chr",c:"-47.70",cp:"-72.00",b:"17.80",a:"18.10",oi:" 463",vol:" 2868",strike:"625.00",expiry:"Apr 27, 2012"},{cid:"494094908784693",name:"",s:"AAPL120427P00630000",e:"OPRA",p:"22.15",cs:"chr",c:"-49.01",cp:"-68.87",b:"22.25",a:"22.55",oi:" 915",vol:" 1427",strike:"630.00",expiry:"Apr 27, 2012"},{cid:"78456659414535",name:"",s:"AAPL120427P00635000",e:"OPRA",p:"26.45",cs:"chr",c:"-50.23",cp:"-65.51",b:"26.95",a:"27.25",oi:" 470",vol:" 1339",strike:"635.00",expiry:"Apr 27, 2012"},{cid:"998402428386783",name:"",s:"AAPL120427P00640000",e:"OPRA",p:"32.59",cs:"chr",c:"-48.94",cp:"-60.03",b:"31.80",a:"32.10",oi:" 219",vol:" 1103",strike:"640.00",expiry:"Apr 27, 2012"},{cid:"718028293542302",name:"",s:"AAPL120427P00645000",e:"OPRA",p:"37.35",cs:"chr",c:"-49.61",cp:"-57.05",b:"36.70",a:"37.00",oi:" 239",vol:" 593",strike:"645.00",expiry:"Apr 27, 2012"},{cid:"621420610238806",name:"",s:"AAPL120427P00650000",e:"OPRA",p:"41.85",cs:"chr",c:"-49.94",cp:"-54.41",b:"41.65",a:"41.95",oi:" 169",vol:" 512",strike:"650.00",expiry:"Apr 27, 2012"},{cid:"1085118967280351",name:"",s:"AAPL120427P00655000",e:"OPRA",p:"43.95",cs:"chr",c:"-52.05",cp:"-54.22",b:"46.60",a:"48.15",oi:" 74",vol:" 21",strike:"655.00",expiry:"Apr 27, 2012"},{cid:"688688418770738",name:"",s:"AAPL120427P00660000",e:"OPRA",p:"43.00",cs:"chr",c:"-55.75",cp:"-56.46",b:"51.55",a:"53.15",oi:" 122",vol:" 10",strike:"660.00",expiry:"Apr 27, 2012"},{cid:"379931605145805",name:"",s:"AAPL120427P00665000",e:"OPRA",p:"104.66",cs:"chb",c:"0.00",cp:"0.00",b:"56.50",a:"58.25",oi:" 190",vol:"-",strike:"665.00",expiry:"Apr 27, 2012"},{cid:"535854637184025",name:"",s:"AAPL120427P00670000",e:"OPRA",p:"60.65",cs:"chr",c:"-52.05",cp:"-46.18",b:"61.50",a:"63.25",oi:" 154",vol:" 33",strike:"670.00",expiry:"Apr 27, 2012"},{cid:"812450412279605",name:"",s:"AAPL120427P00690000",e:"OPRA",p:"-",c:"-",b:"81.45",a:"82.25",oi:"-",vol:"-",strike:"690.00",expiry:"Apr 27, 2012"},{cid:"556414072823908",name:"",s:"AAPL120427P00695000",e:"OPRA",p:"-",c:"-",b:"86.45",a:"87.30",oi:"-",vol:"-",strike:"695.00",expiry:"Apr 27, 2012"},{cid:"1018302976621110",name:"",s:"AAPL120427P00700000",e:"OPRA",p:"-",c:"-",b:"91.50",a:"92.35",oi:"-",vol:"-",strike:"700.00",expiry:"Apr 27, 2012"}],calls:[{cid:"632054413311661",name:"",s:"AAPL120427C00470000",e:"OPRA",p:"-",c:"-",b:"136.00",a:"140.20",oi:"-",vol:"-",strike:"470.00",expiry:"Apr 27, 2012"},{cid:"381996683377403",name:"",s:"AAPL120427C00475000",e:"OPRA",p:"-",c:"-",b:"131.00",a:"135.25",oi:"-",vol:"-",strike:"475.00",expiry:"Apr 27, 2012"},{cid:"592083992249997",name:"",s:"AAPL120427C00480000",e:"OPRA",p:"129.90",cs:"chg",c:"+48.90",cp:"60.37",b:"126.70",a:"130.10",oi:" 49",vol:" 15",strike:"480.00",expiry:"Apr 27, 2012"},{cid:"537775007944930",name:"",s:"AAPL120427C00485000",e:"OPRA",p:"79.30",cs:"chb",c:"0.00",cp:"0.00",b:"121.00",a:"125.10",oi:" 15",vol:"-",strike:"485.00",expiry:"Apr 27, 2012"},{cid:"774107117572822",name:"",s:"AAPL120427C00490000",e:"OPRA",p:"127.00",cs:"chg",c:"+57.15",cp:"81.82",b:"116.00",a:"120.10",oi:" 41",vol:" 1",strike:"490.00",expiry:"Apr 27, 2012"},{cid:"116425734542348",name:"",s:"AAPL120427C00495000",e:"OPRA",p:"65.35",cs:"chb",c:"0.00",cp:"0.00",b:"111.20",a:"115.10",oi:" 28",vol:"-",strike:"495.00",expiry:"Apr 27, 2012"},{cid:"665829597100461",name:"",s:"AAPL120427C00500000",e:"OPRA",p:"107.00",cs:"chg",c:"+46.00",cp:"75.41",b:"106.70",a:"110.10",oi:" 257",vol:" 107",strike:"500.00",expiry:"Apr 27, 2012"},{cid:"721805009229803",name:"",s:"AAPL120427C00505000",e:"OPRA",p:"106.28",cs:"chg",c:"+49.78",cp:"88.11",b:"101.75",a:"105.10",oi:" 118",vol:" 27",strike:"505.00",expiry:"Apr 27, 2012"},{cid:"841091536145869",name:"",s:"AAPL120427C00510000",e:"OPRA",p:"99.00",cs:"chg",c:"+47.00",cp:"90.38",b:"96.70",a:"100.10",oi:" 58",vol:" 36",strike:"510.00",expiry:"Apr 27, 2012"},{cid:"167209408101096",name:"",s:"AAPL120427C00515000",e:"OPRA",p:"98.65",cs:"chg",c:"+48.55",cp:"96.91",b:"92.70",a:"93.70",oi:" 52",vol:" 16",strike:"515.00",expiry:"Apr 27, 2012"},{cid:"282456284579406",name:"",s:"AAPL120427C00520000",e:"OPRA",p:"90.50",cs:"chg",c:"+46.42",cp:"105.31",b:"88.00",a:"90.15",oi:" 528",vol:" 115",strike:"520.00",expiry:"Apr 27, 2012"},{cid:"705719208406389",name:"",s:"AAPL120427C00525000",e:"OPRA",p:"82.42",cs:"chg",c:"+42.66",cp:"107.29",b:"83.00",a:"85.15",oi:" 508",vol:" 161",strike:"525.00",expiry:"Apr 27, 2012"},{cid:"1110078313809143",name:"",s:"AAPL120427C00530000",e:"OPRA",p:"77.47",cs:"chg",c:"+40.82",cp:"111.38",b:"77.85",a:"78.85",oi:" 787",vol:" 194",strike:"530.00",expiry:"Apr 27, 2012"},{cid:"145486713613185",name:"",s:"AAPL120427C00535000",e:"OPRA",p:"74.10",cs:"chg",c:"+41.73",cp:"128.92",b:"73.05",a:"75.20",oi:" 516",vol:" 280",strike:"535.00",expiry:"Apr 27, 2012"},{cid:"435352834451474",name:"",s:"AAPL120427C00540000",e:"OPRA",p:"67.50",cs:"chg",c:"+38.75",cp:"134.78",b:"68.25",a:"69.95",oi:" 1004",vol:" 535",strike:"540.00",expiry:"Apr 27, 2012"},{cid:"180249016896121",name:"",s:"AAPL120427C00545000",e:"OPRA",p:"64.13",cs:"chg",c:"+38.88",cp:"153.98",b:"63.20",a:"63.55",oi:" 1205",vol:" 196",strike:"545.00",expiry:"Apr 27, 2012"},{cid:"610656331883822",name:"",s:"AAPL120427C00550000",e:"OPRA",p:"57.50",cs:"chg",c:"+35.15",cp:"157.27",b:"58.05",a:"58.40",oi:" 3802",vol:" 1521",strike:"550.00",expiry:"Apr 27, 2012"},{cid:"968369661656696",name:"",s:"AAPL120427C00555000",e:"OPRA",p:"53.00",cs:"chg",c:"+33.15",cp:"167.00",b:"53.05",a:"54.30",oi:" 2217",vol:" 929",strike:"555.00",expiry:"Apr 27, 2012"},{cid:"83540594843416",name:"",s:"AAPL120427C00560000",e:"OPRA",p:"49.15",cs:"chg",c:"+32.25",cp:"190.83",b:"48.25",a:"49.00",oi:" 5801",vol:" 3622",strike:"560.00",expiry:"Apr 27, 2012"},{cid:"106186090110341",name:"",s:"AAPL120427C00565000",e:"OPRA",p:"43.00",cs:"chg",c:"+28.90",cp:"204.96",b:"43.20",a:"43.70",oi:" 3688",vol:" 2231",strike:"565.00",expiry:"Apr 27, 2012"},{cid:"386583721896453",name:"",s:"AAPL120427C00570000",e:"OPRA",p:"38.07",cs:"chg",c:"+26.37",cp:"225.38",b:"38.35",a:"38.65",oi:" 6019",vol:" 5389",strike:"570.00",expiry:"Apr 27, 2012"},{cid:"68408993828531",name:"",s:"AAPL120427C00575000",e:"OPRA",p:"33.31",cs:"chg",c:"+23.66",cp:"245.18",b:"33.45",a:"33.70",oi:" 6863",vol:" 3485",strike:"575.00",expiry:"Apr 27, 2012"},{cid:"970432890843055",name:"",s:"AAPL120427C00580000",e:"OPRA",p:"28.00",cs:"chg",c:"+20.20",cp:"258.97",b:"28.60",a:"28.90",oi:" 7825",vol:" 5886",strike:"580.00",expiry:"Apr 27, 2012"},{cid:"113079500710791",name:"",s:"AAPL120427C00585000",e:"OPRA",p:"23.59",cs:"chg",c:"+17.28",cp:"273.85",b:"23.80",a:"24.05",oi:" 4866",vol:" 3687",strike:"585.00",expiry:"Apr 27, 2012"},{cid:"429127815175915",name:"",s:"AAPL120427C00590000",e:"OPRA",p:"18.90",cs:"chg",c:"+13.90",cp:"278.00",b:"19.15",a:"19.50",oi:" 6666",vol:" 6223",strike:"590.00",expiry:"Apr 27, 2012"},{cid:"98053040849539",name:"",s:"AAPL120427C00595000",e:"OPRA",p:"14.80",cs:"chg",c:"+10.68",cp:"259.22",b:"15.00",a:"15.30",oi:" 6360",vol:" 4939",strike:"595.00",expiry:"Apr 27, 2012"},{cid:"847879903642354",name:"",s:"AAPL120427C00600000",e:"OPRA",p:"11.40",cs:"chg",c:"+8.05",cp:"240.30",b:"11.25",a:"11.40",oi:" 20500",vol:" 24484",strike:"600.00",expiry:"Apr 27, 2012"},{cid:"493508780275580",name:"",s:"AAPL120427C00605000",e:"OPRA",p:"8.15",cs:"chg",c:"+5.53",cp:"211.07",b:"8.20",a:"8.30",oi:" 6169",vol:" 13027",strike:"605.00",expiry:"Apr 27, 2012"},{cid:"917142414424387",name:"",s:"AAPL120427C00610000",e:"OPRA",p:"5.60",cs:"chg",c:"+3.60",cp:"180.00",b:"5.65",a:"5.75",oi:" 8056",vol:" 32736",strike:"610.00",expiry:"Apr 27, 2012"},{cid:"634566486905303",name:"",s:"AAPL120427C00615000",e:"OPRA",p:"3.70",cs:"chg",c:"+2.09",cp:"129.81",b:"3.65",a:"3.70",oi:" 6150",vol:" 32860",strike:"615.00",expiry:"Apr 27, 2012"},{cid:"133143669759594",name:"",s:"AAPL120427C00620000",e:"OPRA",p:"2.22",cs:"chg",c:"+0.92",cp:"70.77",b:"2.14",a:"2.23",oi:" 8699",vol:" 33982",strike:"620.00",expiry:"Apr 27, 2012"},{cid:"637411413026419",name:"",s:"AAPL120427C00625000",e:"OPRA",p:"1.32",cs:"chg",c:"+0.37",cp:"38.95",b:"1.30",a:"1.34",oi:" 4931",vol:" 18524",strike:"625.00",expiry:"Apr 27, 2012"},{cid:"483636393022716",name:"",s:"AAPL120427C00630000",e:"OPRA",p:"0.77",cs:"chg",c:"+0.02",cp:"2.67",b:"0.75",a:"0.79",oi:" 7691",vol:" 22980",strike:"630.00",expiry:"Apr 27, 2012"},{cid:"73739304533457",name:"",s:"AAPL120427C00635000",e:"OPRA",p:"0.48",cs:"chr",c:"-0.15",cp:"-23.81",b:"0.44",a:"0.48",oi:" 4824",vol:" 15750",strike:"635.00",expiry:"Apr 27, 2012"},{cid:"180177410166341",name:"",s:"AAPL120427C00640000",e:"OPRA",p:"0.31",cs:"chr",c:"-0.18",cp:"-36.73",b:"0.28",a:"0.33",oi:" 6073",vol:" 10876",strike:"640.00",expiry:"Apr 27, 2012"},{cid:"19825572955515",name:"",s:"AAPL120427C00645000",e:"OPRA",p:"0.25",cs:"chr",c:"-0.20",cp:"-44.44",b:"0.21",a:"0.25",oi:" 4528",vol:" 4602",strike:"645.00",expiry:"Apr 27, 2012"},{cid:"575813409851817",name:"",s:"AAPL120427C00650000",e:"OPRA",p:"0.18",cs:"chr",c:"-0.24",cp:"-57.14",b:"0.15",a:"0.19",oi:" 8850",vol:" 7417",strike:"650.00",expiry:"Apr 27, 2012"},{cid:"814165890839215",name:"",s:"AAPL120427C00655000",e:"OPRA",p:"0.16",cs:"chr",c:"-0.20",cp:"-55.56",b:"0.13",a:"0.16",oi:" 4154",vol:" 2996",strike:"655.00",expiry:"Apr 27, 2012"},{cid:"1110891062035830",name:"",s:"AAPL120427C00660000",e:"OPRA",p:"0.10",cs:"chr",c:"-0.17",cp:"-62.96",b:"0.10",a:"0.12",oi:" 2468",vol:" 1771",strike:"660.00",expiry:"Apr 27, 2012"},{cid:"700745049654457",name:"",s:"AAPL120427C00665000",e:"OPRA",p:"0.08",cs:"chr",c:"-0.13",cp:"-61.90",b:"0.08",a:"0.09",oi:" 1754",vol:" 1785",strike:"665.00",expiry:"Apr 27, 2012"},{cid:"901579155762872",name:"",s:"AAPL120427C00670000",e:"OPRA",p:"0.07",cs:"chr",c:"-0.12",cp:"-63.16",b:"0.07",a:"0.08",oi:" 9257",vol:" 2370",strike:"670.00",expiry:"Apr 27, 2012"},{cid:"79250146044172",name:"",s:"AAPL120427C00690000",e:"OPRA",p:"0.04",cs:"chr",c:"-0.01",cp:"-20.00",b:"0.02",a:"0.04",oi:"-",vol:" 915",strike:"690.00",expiry:"Apr 27, 2012"},{cid:"707565651200933",name:"",s:"AAPL120427C00695000",e:"OPRA",p:"0.04",cs:"chr",c:"-0.01",cp:"-20.00",b:"0.01",a:"0.04",oi:"-",vol:" 218",strike:"695.00",expiry:"Apr 27, 2012"},{cid:"683263003794090",name:"",s:"AAPL120427C00700000",e:"OPRA",p:"0.02",cs:"chr",c:"-0.03",cp:"-60.00",b:"0.01",a:"0.04",oi:"-",vol:" 267",strike:"700.00",expiry:"Apr 27, 2012"}],underlying_id:"22144",underlying_price:610.27002}} 
```

我无法在 python 中解析它。请帮忙！它是从 Javascript 中挑选出来的，就像 var A =

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T17:43:58.980

你所拥有的不是 JSON。

在 JSON 中，所有字符串都必须用双引号括起来。这是一个有效 JSON 对象的示例：

```
{
    "common": {
        "rq": {
            "ct": ""
        },
        "up": "chg",
        "down": "chr",
        "linktargetInternal": ""
    }
} 
```

# python - 在 python unittest 中记录和断言一个空的模拟列表

> ID：10320900
> 
> 赞同：2
> 
> 时间：2012-04-25T17:41:36.683
> 
> 标签：python, unit-testing, mocking

我正在使用`unittest`and `mock`（Michael Foord 的模块）来测试一些 python 代码。

我有这样的东西（这是一个可以更干净地重写的概念证明，但我的真实代码需要表现得像那个`foo`函数）：

```
import unittest
from mock import patch

def foo():
    my_list = []

class Test(unittest.TestCase):
    def test_foo(self):
        with patch('__main__.my_list', new=[], create=True) as baz:
            baz.extend(['foo', 'bar'])

            self.assertEqual(foo(), None)
            self.assertListEqual([], baz)

if __name__ == '__main__':
    unittest.main() 
```

所以问题是我的`baz`模拟对象在调用后没有相应地改变，`foo()`最后一个断言失败。

如果我使用`my_list.remove(x)`in`foo()`那么我可以看到我的测试用例中的更改，但我只想清空该列表，我不想通过列表的每个元素然后将其删除，不，我想要一个快速的清空操作。

如何检查我的模拟对象是否在没有使用`.remove(x)`但使用当前实现的函数的情况下被清空`foo`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:39:23.103

所以，我最终回答了我自己的问题......

解决方案是`my_list[:] = []`在`foo`.

但我也意识到通过`create=True`是不好的，因为如果该列表不存在（正是这个 POC 的情况），它将被创建，并且我可能会测试通过测试的损坏代码。

# android - PagerAdapter onclick 方法

> ID：10320904
> 
> 赞同：1
> 
> 时间：2012-04-25T17:41:55.937
> 
> 标签：android, onclick, adapter, pager

我正在成功使用寻呼机适配器，但想知道如何为每个单独的“页面”添加点击监听器？然后它将使用意图启动一个活动。有 5 个页面，每个页面都有自己的 xml 文件。这是代码：

```
public class MyActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        MyPagerAdapter adapter = new MyPagerAdapter();
        ViewPager myPager = (ViewPager) findViewById(R.id.myfivepanelpager);
        myPager.setAdapter(adapter);
        myPager.setCurrentItem(0);

private class MyPagerAdapter extends PagerAdapter {

        public int getCount() {
                return 5;
        }

        public Object instantiateItem(View collection, int position) {

                LayoutInflater inflater = (LayoutInflater) collection.getContext()
                                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

                int resId = 0;
                switch (position) {
                case 0:
                        resId = R.layout.farleft;
                        break;
                case 1:
                        resId = R.layout.left;
                        break;
                case 2:
                        resId = R.layout.middle;
                        break;
                case 3:
                        resId = R.layout.right;
                        break;
                case 4:
                        resId = R.layout.farright;
                        break;
                }

                View view = inflater.inflate(resId, null);

                ((ViewPager) collection).addView(view, 0);

                return view;
        }

        @Override
        public void destroyItem(View arg0, int arg1, Object arg2) {
                ((ViewPager) arg0).removeView((View) arg2);

        }

        @Override
        public void finishUpdate(View arg0) {
                // TODO Auto-generated method stub

        }

        @Override
        public boolean isViewFromObject(View arg0, Object arg1) {
                return arg0 == ((View) arg1);

        }

        @Override
        public void restoreState(Parcelable arg0, ClassLoader arg1) {
                // TODO Auto-generated method stub

        }

        @Override
        public Parcelable saveState() {
                // TODO Auto-generated method stub
                return null;
        }

        @Override
        public void startUpdate(View arg0) {
                // TODO Auto-generated method stub

        }

} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T19:23:13.680

只需使用这个

```
view.setOnClickListener() 
```

# c# - 监控 SQL 数据库表更改的设计注意事项

> ID：10320905
> 
> 赞同：0
> 
> 时间：2012-04-25T17:41:56.187
> 
> 标签：c#, .net, sql, sql-server-2008, c#-4.0

我正在执行一项任务，以监视和记录我们的多层 .NET 4 WPF、WCF、SQL 2008 应用程序中的各种“系统级消息”。通过消息，我的意思是有关我们应用程序中发生的事件的详细信息，例如用户登录和注销或保存数据。通过记录，我的意思是将消息插入到轻量级 SQL 表中，客户端可以从中轮询并显示最新消息。

这些消息的来源可能来自我们应用程序中的几个不同组件，例如 Windows 服务、IIS 中的 WCF 主机，甚至数据库中的存储过程。最终，这些组件以各自的方式修改 SQL 表。因此，与其单独攻击这些组件中的每一个，我想我可以通过说当 SQL 中的某些表被修改（更新、插入）时需要“触发”消息来简化事情。

首先想到的是每个表上的触发器，它监视更改并将记录插入到轻量级消息表中。我一直（99% 的时间）认为数据库触发器是坏消息（[数据库触发器是邪恶的吗？](https://stackoverflow.com/questions/460316/are-database-triggers-evil)）。我个人更愿意开发和调试 C# 而不是 SQL 触发器。

因此，在寻找替代方案时，我遇到了[Using SqlDependency to Monitor Database Changes](http://www.dreamincode.net/forums/topic/156991-using-sqldependency-to-monitor-sql-database-changes/)，其中讨论了使用 SqlDependency 类来检测更改。快速的概念证明似乎有效；但是，在查看了几个代码示例之后，似乎每次检测到更改时，都必须重新初始化新的 SqlConnection、SqlCommand 和 SqlDependency 对象，并且我可能需要 3 或 4 个需要监控的查询。

在 C# 中检测 SQL 表的更改是否有更好的选择？

此外，除了触发偏差之外，这似乎是一种迂回的方式来简单地监控一组表中的变化，只是为了将数据重新插入另一个表。还有一些其他的逻辑需要发生，我宁愿在 C# 中实现，但我应该只编写触发器来执行此操作并完成它吗？

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T17:52:01.390

我认为您对触发器的偏见总体上是没有根据的。人们看不起触发器的原因与他们看不起光标的原因相同：在许多情况下，它们被误用和滥用。但就像很多东西一样，它们当然有自己的位置，如果使用得当，*它们*就是正确的答案。

您还应该研究其他一些本机技术：

更改跟踪
[http://msdn.microsoft.com/en-us/library/cc280462(SQL.100).aspx](http://msdn.microsoft.com/en-us/library/cc280462(SQL.100).aspx)

更改数据捕获
[http://msdn.microsoft.com/en-us/library/bb522489(SQL.100).aspx](http://msdn.microsoft.com/en-us/library/bb522489(SQL.100).aspx)

SQL Server 审计
[http://msdn.microsoft.com/en-us/library/cc280386(SQL.100).aspx](http://msdn.microsoft.com/en-us/library/cc280386(SQL.100).aspx)

虽然我不知道您的版本（其中一些是企业功能）。也存在一些第 3 方解决方案（我没有使用任何解决方案，所以我将由您自行搜索/研究）。

# asp.net - 为什么在使用 Spring.net 加载 ASPX 页面时会出现 NullReferenceException？

> ID：10320908
> 
> 赞同：0
> 
> 时间：2012-04-25T17:42:07.963
> 
> 标签：asp.net, asp.net-4.0, spring.net

我正在尝试使用 Spring.net 1.3.2 设置一个 ASP.Net 4 网站。

对于基本页面，Spring 加载页面没有问题并注入依赖项。但是，在某些页面上，我在 ctor 和 Page_Load 之间得到了 NullReferenceException，其中包含以下信息：

信息：

```
Value cannot be null.
Parameter name: methodInfoDeclaration 
```

堆栈跟踪：

```
 at System.Reflection.Emit.TypeBuilder.DefineMethodOverrideNoLock(MethodInfo methodInfoBody, MethodInfo methodInfoDeclaration)
   at System.Reflection.Emit.TypeBuilder.DefineMethodOverride(MethodInfo methodInfoBody, MethodInfo methodInfoDeclaration)
   at Spring.Proxy.AbstractProxyMethodBuilder.BuildProxyMethod(MethodInfo method, MethodInfo interfaceMethod) in c:\_prj\spring-net\trunk\src\Spring\Spring.Core\Proxy\AbstractProxyMethodBuilder.cs:line 107
   at Spring.Web.Support.SupportsWebDependencyInjectionTypeBuilder.BuildProxyType()
   at Spring.Web.Support.InterceptControlCollectionStrategy.GetInterceptedCollectionType(Type controlCollectionType, InjectDependenciesCallbackHandler staticCallback)
   at Spring.Web.Support.InterceptControlCollectionStrategy.GetInterceptedCollectionFactory(Type ownerType, Type collectionType)
   at Spring.Web.Support.InterceptControlCollectionStrategy.InterceptCollection(Control owner, ControlCollection originalCollection)
   at Spring.Web.Support.InterceptControlCollectionStrategy.Intercept(IApplicationContext defaultApplicationContext, ControlAccessor ctlAccessor, ControlCollectionAccessor ctlColAccessor) 
```

在一个页面上，我将它缩小到一个问题`SiteMapDataSource`，一旦我评论它，异常就会消失。但是，该异常仍然出现在其他页面上。

我在其他地方发现了类似错误的人：http: [//forum.springframework.net/showthread.php?6621-Spring.NET-ASP.NET-4.0-Error](http://forum.springframework.net/showthread.php?6621-Spring.NET-ASP.NET-4.0-Error)

然而，相关的错误已在 1.3.1 版中修复。

以下是我的 Web.config 的相关部分：

```
<sectionGroup name="spring">
  <section name="context" type="Spring.Context.Support.WebContextHandler, Spring.Web"/>
</sectionGroup>

[...]

<httpHandlers>
  <add verb="*" path="*.aspx" type="Spring.Web.Support.PageHandlerFactory, Spring.Web" />
</httpHandlers>

<httpModules>
  <add name="Spring" type="Spring.Context.Support.WebSupportModule, Spring.Web"/>
</httpModules> 
```

我的对象定义：

```
<object type="Default.aspx">
    <property name="TestProperty" value="Spring injected" />
</object> 
```

有人能告诉我如何避免这个例外吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:14:14.977

这是两个 Spring 程序集之间的版本不匹配。我的一位同事通过 NuGet 引用了 Spring.Core，而我通过手动下载的发行版引用了 Spring.Web。

引用来自同一来源的两个程序集解决了这个问题。

# objective-c - 不在 Xcode 中嵌入一些 youtube 视频

> ID：10320910
> 
> 赞同：0
> 
> 时间：2012-04-25T17:42:20.240
> 
> 标签：objective-c, ios, xcode, ios4, youtube-api

我在我的应用程序中嵌入了 youtube 视频，就像在许多教程中一样

```
NSString *htmlString = [NSString stringWithFormat:@"\
                        <html><head>\
                        <style type=\"text/css\">\
                        body {\
                        background-color: transparent;\
                        color: white;\
                        }\
                        </style>\
                        </head><body style=\"margin:0\">\
                        <embed src=\"%@\"\
                        type=\"application/x-shockwave-flash\" width=\"180\" height=\"140\"></embed>\
                        </body></html>", videoLink]; 

[webView loadHTMLString:htmlString baseURL:nil]; 
```

为什么我可以播放这样的视频 www.youtube.com/watch?v=FMueitNN8HI 而不是这样的 www.youtube.com/watch?v=jsFV1A8l5e4 ？

[在第二种情况下，它显示了一个带有按钮播放的 webview 像这样](http://img205.imageshack.us/img205/1313/screenshot20120421at234.png)划掉

哪里有问题？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T18:09:17.480

这是因为上传第二个视频的帐户所有者选择不使视频与移动设备兼容。这是您在我的计算机上打开的第二个视频的屏幕截图，其中浏览器用户代理设置为 iPhone。

![在此处输入图像描述](../Images/5f85a0117a4d7c753d8d899806964827.png)

# java - Linux 服务器的 java 内存不足

> ID：10320913
> 
> 赞同：0
> 
> 时间：2012-04-25T17:42:27.580
> 
> 标签：java, memory, connection, pipe, out

寻找解决方案或一些关于如何找出问题所在的提示。

使用 VisualVM 工具查看堆转储，该工具仅显示引用被保留。我可以使用更好的工具吗？我可以从命令行运行什么来释放这些引用吗？使用 jconsole GC 不起作用，只会延长锁定约 5 天。

Linux 服务器每 10-14 天获得以下 Java OOM：

```
Apr 18, 2012 1:34:55 PM org.apache.jk.core.MsgContext action
WARNING: Error sending end packet
java.net.SocketException: Broken pipe
    at java.net.SocketOutputStream.socketWrite0(Native Method)
    at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:109)
    at java.net.SocketOutputStream.write(SocketOutputStream.java:153)
    at org.apache.jk.common.ChannelSocket.send(ChannelSocket.java:508)
    at org.apache.jk.common.JkInputStream.endMessage(JkInputStream.java:112)
    at org.apache.jk.core.MsgContext.action(MsgContext.java:293)
    at org.apache.coyote.Response.action(Response.java:182)
    at org.apache.coyote.Response.finish(Response.java:304)
    at org.apache.jk.server.JkCoyoteHandler.invoke(JkCoyoteHandler.java:204)
    at org.apache.jk.common.HandlerRequest.invoke(HandlerRequest.java:282)
    at org.apache.jk.common.ChannelSocket.invoke(ChannelSocket.java:744)
    at org.apache.jk.common.ChannelSocket.processConnection(ChannelSocket.java:674)
    at org.apache.jk.common.ChannelSocket$SocketConnection.runIt(ChannelSocket.java:866)
    at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:684)
    at java.lang.Thread.run(Thread.java:636)
Apr 18, 2012 1:34:55 PM org.apache.jk.common.ChannelSocket processConnection
WARNING: processCallbacks status 2
java.lang.OutOfMemoryError: Java heap space
Dumping heap to java_pid20051.hprof ...
Heap dump file created [1147163590 bytes in 149.230 secs]
Apr 18, 2012 1:59:14 PM ServerCommunicatorAdmin reqIncoming
WARNING: The server has decided to close this client connection.
Apr 18, 2012 1:59:14 PM ServerCommunicatorAdmin reqIncoming
WARNING: The server has decided to close this client connection. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-25T17:13:24.450

使用 -Xmx 设置最大堆大小，使用 -Xss 设置线程堆栈大小。要记住的重要一点是，如果你创建了很多线程，你应该设置尽可能小的堆栈大小以最大化你可以拥有的线程数（当你尝试创建一个线程时你会得到一个 OOM 错误并且堆栈空间不足）。而且堆越大，线程堆栈的空间就越少。因此，您可能需要进行一些试验以获得堆和堆栈之间的最佳分割。

我使用具有 1Gb 内存的 Linux 服务器管理得很好（现在几年了，但仍然工作得很好），堆有 256M，每个线程有 64K（-Xmx256m -Xss64k）。您还应该尝试命名为 -XX:+HeapDumpOnOutOfMemoryError 的标志，并使用 JMX 获取一个 .hprof 转储，您可以使用 Eclipse 内存分析器对其进行分析，以查看是否有任何内存泄漏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T17:50:36.623

如果修复缓慢累积的混乱*确实*无助于您可以考虑微调您的 VM，请查看 VM args (run `java -X`)。也许其中一些对您来说很有趣（但可能只会延长时间而没有 OOM 异常）：

> -Xms 设置初始 Java 堆大小
> -Xmx 设置最大 Java 堆大小
> -Xss 设置 Java 线程堆栈大小
> -Xprof 输出 cpu 分析数据

# spring-mvc - 将 ant 样式路径捕获从 spring mvc 3.0 更新到 3.1

> ID：10320914
> 
> 赞同：1
> 
> 时间：2012-04-25T17:42:32.573
> 
> 标签：spring-mvc

在 spring 3.0.x 中，我有一个处理程序方法，它的工作原理非常类似于：

```
@RequestMapping("/foo/{version:\\d+}/**")
public void handleVersionedResource(@PathVariable("version") Long version, HttpServletRequest request, HttpServletResponse response) {
     String path = (String) request.getAttribute(HandlerMapping.PATH_WITHIN_HANDLER_MAPPING_ATTRIBUTE);

     // rest of the code maps path and version to a real resource and serves 
     // content with extra long cache control / expires headers
 } 
```

在 3.0.x 中，ff 请求 url 是 /foo/12345/some/resource，然后 path = "some/resource"（请求匹配的 ** 部分）。

但是，在 3.1.x 中（尝试使用 3.1.0.RELEASE 和 3.1.1.RELEASE）路径 = 与完整请求路径匹配，因此在我之前的示例中为“/foo/12345/some/resource”。

所以问题是，有没有人有最简单的方法来复制我在 3.0.x 中得到的行为？此外，任何关于为什么这种行为发生变化的见解？我一开始做错了吗？

更新：重复[Spring 3.1.RC1 和 PATH_WITHIN_HANDLER_MAPPING_ATTRIBUTE](https://stackoverflow.com/questions/8005799/spring-3-1-rc1-and-path-within-handler-mapping-attribute) - 那里也没有给出好的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T18:18:06.440

[Spring 3.1.RC1 和 PATH_WITHIN_HANDLER_MAPPING_ATTRIBUTE](https://stackoverflow.com/questions/8005799/spring-3-1-rc1-and-path-within-handler-mapping-attribute)表明 HandlerMapping.PATH_WITHIN_HANDLER_MAPPING_ATTRIBUTE 是 Spring 内部的，不应在您的应用程序中使用

做类似于[如何匹配具有包含“/”的@pathVariable 的Spring @RequestMapping 的事情？](https://stackoverflow.com/questions/2334787/how-to-match-a-spring-requestmapping-having-a-pathvariable-containing)可能是你最好的选择

# sql - DB2 日期格式

> ID：10320918
> 
> 赞同：20
> 
> 时间：2012-04-25T17:42:42.503
> 
> 标签：sql, date, db2, date-format

我只想`yyyymmdd`在 DB2 中格式化当前日期。

我看到了可用的日期格式，但我该如何使用它们？

[http://publib.boulder.ibm.com/infocenter/dzichelp/v2r2/index.jsp?topic=%2Fcom.ibm.db2z10.doc.intro%2Fsrc%2Ftpc%2Fdb2z_datetimetimestamp.htm](http://publib.boulder.ibm.com/infocenter/dzichelp/v2r2/index.jsp?topic=%2Fcom.ibm.db2z10.doc.intro%2Fsrc%2Ftpc%2Fdb2z_datetimetimestamp.htm)

```
SELECT CURDATE() FROM SYSIBM.SYSDUMMY1; 
```

我没有看到任何直接使用上述格式的方法。

有什么建议吗？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-04-25T18:18:13.857

```
SELECT VARCHAR_FORMAT(CURRENT TIMESTAMP, 'YYYYMMDD')
FROM SYSIBM.SYSDUMMY1 
```

应该适用于大型机和 Linux/Unix/Windows DB2。 [的信息中心条目`VARCHAR_FORMAT()`](https://www.ibm.com/support/knowledgecenter/SSEPGG_11.5.0/com.ibm.db2.luw.sql.ref.doc/doc/r0007110.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T19:11:22.673

另一种解决方案 REPLACE (CHAR(current date, ISO),'-','')

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-10T17:15:49.433

```
select to_char(current date, 'yyyymmdd') from sysibm.sysdummy1 
```

结果：20160510

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-25T17:59:18.447

这并不简单，但

```
SELECT CHAR(CURRENT DATE, ISO) FROM SYSIBM.SYSDUMMY1 
```

以 yyyy-mm-dd 格式返回当前日期。您必须对结果进行子串化并连接才能获得 yyyymmdd。

```
SELECT SUBSTR(CHAR(CURRENT DATE, ISO), 1, 4) ||
    SUBSTR(CHAR(CURRENT DATE, ISO), 6, 2) ||
    SUBSTR(CHAR(CURRENT DATE, ISO), 9, 2)
FROM SYSIBM.SYSDUMMY1 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-24T18:07:52.803

当前日期为`yyyy-mm-dd`格式。您可以使用函数将其转换为`yyyymmdd`格式：`substring`

```
select substr(current date,1,4)||substr(current date,6,2)||substr(currentdate,9,2) 
```

# javascript - jquery 没有冲突 jquery-1.7.1.min.js

> ID：10320919
> 
> 赞同：0
> 
> 时间：2012-04-25T17:42:44.017
> 
> 标签：javascript, jquery

我不太熟悉`jQuery.noConflict`。我已经尝试过几次，但我觉得我做错了。

有没有办法用“jquery-1.7.1.min.js”设置 noConflict？我是把它放在实际的文件中，还是放在我的索引的标题中，或者两者兼而有之？我试图遵循示例，但我知道我做错了。

任何指导或快速示例都会对我有很大帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T17:45:39.410

```
var foo = $.noconflict();
foo('body').addClass('bar'); 
```

您可以为其分配一个新的别名（如上所示）或调用`$.noConflict`并且仅`jQuery`可用。如果您选择了一个别名，但每次您想要引用 jQuery 时都必须使用该新别名。

请记住，尽管您可以启用 noConflict，但在必要时使用匿名函数仍然可以使用它：

```
// disable $ and force use of myJQ
var myJQ = jQuery.noConflict();
(function($){
  //
  // be able to use $ within this block and have it mean jQuery
  //
  $('body').addClass('foo');
})(myJQ);

// we're outside the block, now we're back to myJQ
myJQ('body').removeClass('foo'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-25T17:45:41.783

无冲突模式易于使用。在加载 jQuery 和任何依赖于 jQuery 的库后不久包括这个：

```
var $j = jQuery.noConflict(); 
```

然后，不要使用`$`所有东西，而是使用`$j`：

```
var elements = $j('.class-name'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T17:45:36.660

您是否尝试过以下示例：

[http://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)

我认为它说明了一切。检查您的浏览器控制台以查看任何错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T17:48:35.643

我建议使用`noConflict`调用，以及用匿名函数包装你的 jQuery 代码，这样你就可以通过以下方式调用 jQuery `$`：

```
jQuery.noConflict();
(function ($) {
    // Now you can use $ to call jQuery
}(jQuery)); 
```

# sql-server - 如何在 Power Pivot 中更改表的连接

> ID：10320922
> 
> 赞同：5
> 
> 时间：2012-04-25T17:42:54.517
> 
> 标签：sql-server, excel, powerpivot

有没有办法可以更改 PowerPivot 中特定表的连接？我研究过的所有事情都在谈论改变 Connection 对象本身。但是我有 5 个表引用一个连接，我只需要更改其中一个表的连接数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T21:54:03.887

如果要更改表的连接，请转到 PowerPivot 中的“设计”功能区，然后选择“现有连接”，然后选择“PowerPivot 数据连接”，这将列出所有现有连接。选择要修改的连接，然后单击“编辑”。然后，您可以通过单击“现有连接”窗口中的“刷新”来选择从现在更改的连接中重新加载所有表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-25T06:28:36.133

使用 PowerPivot -> 设计选项卡，选择一个表并单击表属性。在对话框中，您可以更改正在使用的表的名称。

[https://support.office.com/en-us/article/make-changes-to-an-existing-data-source-in-power-pivot-9cb508d3-1a83-4d83-a944-700ce41332b6](https://support.office.com/en-us/article/make-changes-to-an-existing-data-source-in-power-pivot-9cb508d3-1a83-4d83-a944-700ce41332b6)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-01T17:06:24.113

1.  删除表格（右键单击网格视图中的选项卡并选择删除）。
2.  使用获取外部数据中的选项之一重新导入表，但不要使用现有连接。例如，如果您从数据库中提取，请使用*从数据库*下拉菜单。这将导致创建和使用新的连接。

受到[Paul Te Braak 的 BI 博客的](https://paultebraak.wordpress.com/2013/01/15/managing-connections-in-power-pivot/)启发，该博客解释了如何通过打开连接并选择表或添加 SQL 查询来将表添加到现有连接。

# c# - GridView1.Attributes.Remove("删除记录")

> ID：10320924
> 
> 赞同：0
> 
> 时间：2012-04-25T17:43:08.383
> 
> 标签：c#, asp.net, gridview, attributes

这段代码的含义是什么：

```
GridView1.Attributes.Remove("DeleteRecord"); 
```

或者

```
GridView1.Attributes.Remove("onrowcommand"); 
```

或者

```
GridView1.Attributes.Remove("UpdateRecord"); 
```

换句话说，我想在运行时禁用 gridview 的插入、编辑和删除方法，然后来到这段代码，但它没有反应。你还有其他优惠吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T17:56:01.930

attributes 属性用于设置其他属性而不是方法。你使用它非常不正确。

如果您不想执行 rowcommand，请从 aspx 中删除 rowcommand="xxxx"。

如果您打算保留行命令，那么在我的示例中的行命令方法（xxxx）中，编写一些 c# 代码来拦截而不是在该方法中进一步执行。

# php - “注意：未定义的变量”错误和 foreach 循环

> ID：10320931
> 
> 赞同：1
> 
> 时间：2012-04-25T17:43:45.257
> 
> 标签：php

有人可以向我解释为什么我在第二个代码片段中得到变量 $subtotal 的“通知：未定义变量”，但在第一个代码片段中没有？他们之间有什么区别？他们是否考虑局部变量？

另外，foreach 循环中 $cartKey 和 $cartItem 的变量类型（全局、超全局..等）到底是什么？为什么我不需要定义/声明它们？

```
switch( $_SESSION['shippingMethod'] )
{
  case "Air": 
             $shipping = $subtotal * 0.1;
             break;
} 
```

和

```
foreach( $cart as $cartKey => $cartItem )
{
    $subtotal += $cartItem['total'];
} 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-25T17:46:31.337

基本上，错误是说您`$subtotal`在设置之前使用变量，或者在您的情况下，您在设置之前增加了一个值：

```
$subtotal=0;
foreach( $cart as $cartKey => $cartItem )
{
    $subtotal += $cartItem['total'];
} 
```

编辑：如果`$subtotal`设置可能是由于其他代码设置或未设置，则应进行检查，或者您应该在脚本开始时设置它：

```
$subtotal=(isset($subtotal))?$subtotal:0;
foreach( $cart as $cartKey => $cartItem )
{
    $subtotal += $cartItem['total'];
} 
```

`error_reporting(E_ALL)`在开发任何脚本时，必须将代码中的每个错误都提供给您总是一个好主意，从长远来看，它可以帮助您学习。一旦你看到一些通知未定义的消息，你就会改变你编码和检查变量的方式。然后当脚本准备好发布时`E_ALL`转向`0`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T17:49:34.670

显然`$subtotal`在循环所在的区域还不存在。由于您正在使用`+=`，因此您会收到此错误，因为您实际上是在说：

```
$subtotal = $subtotal + $cartItem['total'] 
```

在这种情况下`$cartKey`，`$cartItem`您**确实**定义了它们......它们是您从数组项的当前键和值创建它们的循环结构的一部分 - 将它们从数组“复制”到当前范围。例如。通过这样做`$cartKey => $cartItem`，您定义了这些变量。

# javascript - 访问包含正斜杠的对象属性

> ID：10320933
> 
> 赞同：8
> 
> 时间：2012-04-25T17:43:47.747
> 
> 标签：javascript

我使用`json_encode`PHP 函数创建了 JSON。数组的其中一项的键包含一个正斜杠，当解析 JSON 时，该对象在 Chrome 控制台中输出时看起来像这样。

```
Object
contact/allow_anonymous: "0"
menulayout: "horizontal"
pages/max_pages: "10"
primarycolour: "329e95"
websitelogo: "text" 
```

我的问题是我似乎无法访问其中包含正斜杠的属性的值。

有任何想法吗？由于 javascript 允许我创建对象，因此我假设有一种方法可以检索这些值。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-25T17:45:19.397

只需使用`myObject["key"]`而不是`myObject.key`：

```
alert(myObject["contact/allow_anonymous"]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-20T12:49:25.640

只需将正斜杠替换为 ~1。

```
Instead of contact/allow_anonymous use contact~1allow_anonymous 
```

# javascript - 使用 fancybox iframe 时的跨域谷歌分析跟踪

> ID：10320937
> 
> 赞同：0
> 
> 时间：2012-04-25T17:43:59.733
> 
> 标签：javascript, google-analytics, fancybox

我有一个使用谷歌分析的网站，并且使用了多个域。我被要求通过这样做来添加跨域跟踪：

1) 添加异步跟踪器

```
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-21602333-1']);
_gaq.push(['_setDomainName', 'domain.com']);
_gaq.push(['_setAllowLinker', true]);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})(); 
```

2) 将以下代码添加到指向其他域之一的所有链接。

```
 <a href="http://www.domain-aanvraag.nl[rest van de link]" onclick="_gaq.push(['_link', 'http://www.domain.com']); return false;">Go!</a>) 
```

_link 选项根据 google 执行以下操作：

> 此方法与 _setDomainName() 和 _setAllowLinker() 方法结合使用以启用跨域用户跟踪。_link() 方法通过 URL 参数 (HTTP GET) 将 GATC cookie 从这个站点传递到另一个站点。它还会更改 document.location 并将用户重定向到新的 URL。

行。这一切都适用于正常的传出链接。

这就是问题所在。我有一个表单，用户可以在其中选择两个单选按钮之一，然后在选择一个后点击提交按钮。如果选择了第一个单选按钮，则会打开一个花式框弹出窗口，其中包含一个指向另一个域上的页面的 iframe。如果打开第二个单选按钮，则当前窗口将重定向到该域上的另一个页面。

我只想`_gaq_push(['_link', ...])`在用户选择第一个选项并单击按钮时做这些事情。

所以我有两个问题：

1.  我应该在哪里放置onclick。
2.  如何使用 fancybox 使用此代码？它似乎总是设置主屏幕的document.location，而不是我的fancybox中的iframe，导致我的屏幕完全刷新。

到目前为止，这是我的代码的精简工作示例：[https ://www.domain.com/test/analytics.html](https://www.domain.com/test/analytics.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T18:21:26.400

由于您已经将 jquery 用于fancybox，因此您可以使用它。

给单选按钮一个 clickme 的 id，然后将此脚本放在单选按钮之后

```
<input id="clickedme" type="radio" name="option" value="1" data-link="http://ato.xximo-aanvraag.nl/Home/Step1?companytype=zzp">

<script>
$("#clickme").bind("click", function(event){
  _gaq.push(['_link', 'http://www.xximo.com']);
  alert('click recorded, you can remove me') // remove if needed
});
</script>

//hoop dat het is wat je zoekt ;) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T08:37:04.723

我挖得更深一点，这里的根本问题是我试图在另一个 iframe 中创建一个跨域跟踪链接到另一个域，而不是一个全新的窗口（iframe 是由 fancybox 创建的）。因此，我应该使用 _getLinkerUrl 而不是使用 _link，如下所述：

[https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite#trackingIFrames](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite#trackingIFrames)

# linux - AWK epoch diff 与当前行和上一行

> ID：10320938
> 
> 赞同：2
> 
> 时间：2012-04-25T17:44:03.363
> 
> 标签：linux, bash, awk

我有一个像这样的文件`Sample`：-

```
206,,,206,14.9,0,2012/04/24 00:00:05
206,,,206,14.9,0,2012/04/24 00:00:21
205,,,205,14.9,0,2012/04/24 00:00:23
205,,,205,14.9,0,2012/04/24 00:00:29
207,,,207,14.9,0,2012/04/24 00:00:34
205,,,205,14.9,0,2012/04/24 00:00:40
204,,,204,14.9,0,2012/04/24 00:00:46
202,,,202,14.9,0,2012/04/24 00:00:52
201,,,201,14.9,0,2012/04/24 00:01:00
202,,,202,14.9,0,2012/04/24 00:01:04 
```

以及以下 AWK 命令：-

```
awk -F, '{ gsub("/"," ",$7); gsub(":"," ",$7); t+=(mktime($7)-mktime(p)); printf ("%s,%s,%s\n",mktime($7),mktime(p),t); p=$7 }' Sample 
```

给出以下输出：-

```
1335222005,-1,1335222006
1335222021,1335222005,1335222022
1335222023,1335222021,1335222024
1335222029,1335222023,1335222030
1335222034,1335222029,1335222035
1335222040,1335222034,1335222041
1335222046,1335222040,1335222047
1335222052,1335222046,1335222053
1335222060,1335222052,1335222061
1335222064,1335222060,1335222065 
```

对于每一行，第 7 列将转换为纪元日期，并计算上一行纪元日期之间的差异并将其添加到`t`.

在正在处理的第一行，因为`p`当前不是日期，所以 mktime 返回`-1`扔掉我的数字。

我想要做的是，告诉 AWK 脚本，如果正在处理第 1 行，则假设差为 6。目前它正在从 1335222005 中减去 -1，得到 1335222006。

我想说，从`t`6 点开始，然后在第二行，计算出与前一行的纪元秒数的差异，并按`t`该数量递增。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T18:11:44.487

你只需要为第 1 行做一些特别的事情。

```
awk -F, '
    {gsub(/[\/:]/," ",$7); this_time = mktime($7)}
    NR != 1 {t += this_time - prev_time; print this_time, prev_time, t}
    {prev_time = this_time}
' << END 
```

给定您的输入数据，这将打印

```
1335240021 1335240005 16
1335240023 1335240021 18
1335240029 1335240023 24
1335240034 1335240029 29
1335240040 1335240034 35
1335240046 1335240040 41
1335240052 1335240046 47
1335240060 1335240052 55
1335240064 1335240060 59 
```

或者，初始化变量的一种方便方法是使用 awk'f`-v`选项

```
awk -v t=6 '... same as before ...' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T17:48:01.983

您可以在`awk`一个块中初始化一个变量`BEGIN`，并存在两个变量来获取行号，两者都对您的情况有用，`FNR`并且`NR`：

```
BEGIN { t = 6 } 
```

或者

```
FNR == 1 { t = 6 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T17:49:45.253

使用`BEGIN`（[见这里](http://www.gnu.org/software/gawk/manual/html_node/Using-BEGIN_002fEND.html)）有帮助吗？这将允许将 t 变量初始化为您想要的任何内容。就像是

```
 awk -F, 'BEGIN {t=6} { gsub("/"," ",$7); gsub(":"," ",$7); t+=(mktime($7)-mktime(p)); printf ("%s,%s,%s\n",mktime($7),mktime(p),t); p=$7 }' Sample 
```

# jquery - .get() 与多个 .load() 的性能

> ID：10320944
> 
> 赞同：1
> 
> 时间：2012-04-25T17:44:31.853
> 
> 标签：jquery, jquery-load, jquery-get

感谢您的关注，

我有一种情况，我想从静态文件中加载（）多个 div。我最近发现并阅读了这个 SO 问题：[jquery-multiple-load-in-a-div](https://stackoverflow.com/questions/866284/jquery-multiple-load-in-a-div)。选项是

```
$('<div>').load('static.html #div1,#div2,...'); 
```

或者

```
$.get('static.html',...,function(){ 
    $responseHTML.find('#div1').appendTo(...);
    $responseHTML.find('#div2').appendTo(...);
}); 
```

我很乐意使用其中任何一个，但我想更多地了解它背后的理论。我认为'.load（）'可能与幕后的'.get（）'完全相同吗？这是否意味着 .get() 更快？

任何其他见解将不胜感激。CB。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T16:47:39.010

（在评论的帮助下回答我自己的问题。）

如果您查看源[http://james.padolsey.com/jquery/#v=git&fn=jQuery.fn.load](http://james.padolsey.com/jquery/#v=git&fn=jQuery.fn.load)和[http://james.padolsey.com/jquery/#v=git&fn=jQuery.get](http://james.padolsey.com/jquery/#v=git&fn=jQuery.get)。 .. 这两个函数都只是 .ajax() 调用的包装器。包装的速度差异可以忽略不计，所以我想在这种情况下这只是个人编码风格偏好。

注意，我最初也误解了做 $.load('file #div1,#div2,..') 和 $.load('file #div1');$.load('file #div2') 不一样;...所以OP标题具有误导性。

感谢大家的帮助。

# wix - 使用嵌入式 EmbeddedChainer 安装多个 MSI

> ID：10320946
> 
> 赞同：0
> 
> 时间：2012-04-25T17:44:38.667
> 
> 标签：wix, windows-installer

我正在尝试使用 Windows Installer Embedded 链安装多个 .msi。我从一个网站上研究了一些信息并尝试了它。但它不起作用（**WiX + C#**）。

1.  当我检查调试时，它可以成功运行，`transaction.Commit()`直到`transaction.close()`. 但是`SampleApp.msi`没有安装。
2.  'Multiple MISs Installer' 安装成功，即使`SampleApp.msi`没有工作，我也无法卸载'Multiple MISs Installer'。错误日志中的条目是“安装过程中的致命错误”。

我如何解决它？

**多个 MSI 安装程序\Product.wxs**

```
<Directory Id="TARGETDIR" Name="SourceDir">
    <Directory Id="ProgramFilesFolder">
        <Directory Id="INSTALLLOCATION" Name="Multiple Installer">
            <Component Id="InstallMSIComponent" Guid="{7091DE57-7BE3-4b0d-95D5-07EEF6463B62}">
                <File Id="FILE_MprjChainer.exe" Name="MprjChainer.exe"
                      Source="C:\A_VS2008\WiX\MprjChainer\MprjChainer\bin\Debug\MprjChainer.exe"
                      DiskId="1" KeyPath="yes"/>
                <File Id="Microsoft.Deployment.WindowsInstaller.dll"
                      Name="Microsoft.Deployment.WindowsInstaller.dll"
                      Source="C:\Program Files\Windows Installer XML v3.5\SDK\Microsoft.Deployment.WindowsInstaller.dll" />
                <File Id="System.dll"
                      Name="System.dll"
                      Source="C:\windows\Microsoft.NET\Framework\v2.0.50727\System.dll" />
                <File Id="System.Core.dll" Name="System.Core.dll"
                      Source="C:\Program Files\Reference Assemblies\Microsoft\Framework\v3.5\System.Core.dll" />
                <File Id="System.Windows.Forms.dll" Name="System.Windows.Forms.dll"
                       Source="C:\windows\Microsoft.NET\Framework\v2.0.50727\System.Windows.Forms.dll" />
                <File Id="System.Xml.dll"
                      Name="System.Xml.dll"
                      Source="C:\windows\Microsoft.NET\Framework\v2.0.50727\System.Xml.dll" />
                <File Id="System.Xml.Linq.dll"
                      Name="System.Xml.Linq.dll"
                      Source="c:\Program Files\Reference Assemblies\Microsoft\Framework\v3.5\System.Xml.Linq.dll" />
                <RemoveFolder Id="INSTALLLOCATION" On="uninstall"/>
            </Component>

            <Component Id="CMPG_SimpleApp" Guid="{CB568AA4-9790-4efd-91BB-82682F063321}">
                <File Id="SimpleApp.msi"
                      Name="SimpleApp.msi"
                      Source="C:\A_VS2008\WiX\MSIs\SimpleApp.msi"
                      DiskId="1" KeyPath="yes"/>
            </Component>
        </Directory>
    </Directory>
</Directory>

<EmbeddedChainer Id="Chainer" FileSource="FILE_MprjChainer.exe"/>

<Feature Id="ProductFeature" Title="MPrjInstaller" Level="1">
    <ComponentRef Id="InstallMSIComponent"/>
    <ComponentRef Id="CMPG_SimpleApp"/>
    <ComponentGroupRef Id="Product.Generated" />
</Feature> 
```

**Chainer\CustonAction.cs**

```
namespace MprjChainer
{
    public class CustomActions
    {
        static void Main(string[] args)
        {
            System.Diagnostics.Debugger.Launch();

            try
            {
                IntPtr ptr = new IntPtr(Convert.ToInt32(args[0], 16));
                Transaction transaction = Transaction.FromHandle(ptr, true);

                transaction.Join(TransactionAttributes.JoinExistingEmbeddedUI);

                transaction.Commit();
                transaction.Close();
            }
            catch (Exception e)
            {
                System.Windows.Forms.MessageBox.Show("e.Message; " + e.Message);
                throw e;
            }
        }

        [CustomAction]
        public static ActionResult CustomAction1(Session session)
        {
            System.Diagnostics.Debugger.Launch();
            session.Log("Begin CustomAction1");

            return ActionResult.Success;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T09:56:26.770

c# 代码中有一个错误：在“IntPtr ptr = new IntPtr(Convert.ToInt32(args[0], 16));”这一行中 “16”必须是“10”！

否则，当有超过 10 个事务时（例如，当从嵌入式链接器调用五个或更多子 msi 时），您将收到“错误处理”错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T06:03:11.753

尝试调用 InstallProduct()：

```
transaction.Join(TransactionAttributes.JoinExistingEmbeddedUI);

// start another installation in the same transaction
Installer.InstallProduct(@"path_To_Your_MSI", arguments);   
// it's good to include /l*v install.log in the arguments so that you'll get a verbose log of the installation

transaction.Commit(); 
```

Embedded Chainer 的示例可以在以下位置查看： [WiX EmbeddedChainer 示例？](https://stackoverflow.com/questions/5272718/wix-embeddedchainer-examples)

您还可以查看用于链接多个 msi 包的 Burn（Wix 的引导程序/链接器）：[http ://robmensching.com/blog/posts/2009/7/14/Lets-talk-about-Burn](http://robmensching.com/blog/posts/2009/7/14/Lets-talk-about-Burn)

# c# - 加载wpf窗口时没有设置数据？

> ID：10320950
> 
> 赞同：-2
> 
> 时间：2012-04-25T17:45:04.783
> 
> 标签：c#, wpf

我在将信息从一个 wpf 窗口传递到另一个窗口时遇到问题。出于某种原因，当加载主窗口时，标签中没有设置任何内容，我需要能够将数据保存在字符串中以用于任何事情（标签不重要但显示我的意思）？

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }
    public string MyData { get; set; }

    void MainWindow_Loaded(object sender, RoutedEventArgs e)
    {
        label1.Content = MyData;

    }

public partial class LoginWindow : Window
{
    public LoginWindow()
    {
        InitializeComponent();
    }
    private void button2_Click(object sender, RoutedEventArgs e)
    {
         string mytext = "blabla";
         MainWindow fromloginwindow = new MainWindow(); 
         fromloginwindow.Mydata = mytext;
    } 
```

还是我做错了？

**编辑：**

请不要对标签不重要我需要能够获取和设置一个字符串以在主窗口中的任何位置使用。此外，字符串“mytext”也无关紧要，因为显然我不会以这种方式设置字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T17:48:20.953

Loaded 事件发生在您设置 MyData 之前，更改代码如下：

```
public partial class MainWindow : Window
{
   public MainWindow(string data)
   {
      MyData = data 
      InitializeComponent();        
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T17:49:35.907

听起来您遇到了事件生命周期问题；对事件的调用`Loaded`发生得很快，因此设置文本的机会已经过去。相反，您应该做的是：

1) 将属性绑定到 XAML 中的标签

```
public event PropertyChangedEventHandler PropertyChanged;

public MainWindow()
{
    InitializeComponent();
    DataContext = this;
}

protected string _myData = string.Empty;
public string MyData
{
    get { return _myData; }
    set { _myData = value; NotifyPropertyChanged("MyData"); }
}

protected void NotifyPropertyChanged(string propName)
{
    var methods = PropertyChanged;

    if(methods != null)
       methods(this, new PropertyChangedEventArgs(propName));
}

<Label Content="{Binding MyData}" /> 
```

2）通过另一种方法（或在属性声明中）设置控件文本：

```
public void SetLabel(string text)
{
    label1.Content = text;
}

protected void button2_Click(object sender, RoutedEventArgs e)
{
     MainWindow x = new MainWindow();
     x.SetLabel("blabla");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T17:51:02.180

您是否尝试过通过窗口的构造函数将值传递给第二个窗口？

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    public MainWindow(string data)
        : this()
    {
        label1.Content = data;
    }
}

public partial class LoginWindow : Window
{
    public LoginWindow()
    {
        InitializeComponent();
    }

    private void button2_Click(object sender, RoutedEventArgs e)
    {
         string mytext = "blabla";
         MainWindow fromloginwindow = new MainWindow(mytext); 
    }
} 
```

# javascript - Javascript 和 jQuery 将灰色按钮变为红色

> ID：10320951
> 
> 赞同：0
> 
> 时间：2012-04-25T17:45:16.067
> 
> 标签：javascript, jquery, html, jquery-events

我正在开发一个应用程序，其中包含下一个 JS 代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>jQuery Hover Effect</title>
<script type='text/javascript' src="/var/www/JSPROBAK/jquery.js"></script>
<script type='text/javascript'>
$(document).ready(function(){
    $(".button").hover(function() {
        $(this).attr("src","/var/www/JSPROBAK/button-hover.png");
            }, function() {
        $(this).attr("src","/var/www/JSPROBAK/button.png");
    });
});
</script>
</head>

<body>
<img src="/var/www/JSPROBAK/button.png" alt="My button" class="button" />
</body>
</html> 
```

我有 button.png、button-hover.png 和 jquery.js 的目录是代码中指定的目录。当将鼠标放在灰色按钮上时，代码应该将灰色按钮 (button.png) 变成红色按钮 (button-hover.png)。浏览器最初显示灰色按钮的图像，但将鼠标放在它上面时不会变成红色，所以我假设 jquery.js 没有正确加载，知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T17:50:26.377

看起来您是从服务器的物理路径引用文件，而不是虚拟路径。尝试`var/www/`从 URL 中删除，如果您的 HTML 文件已经存在，`/JSPROBAK/`您可以将路径指定为直接的相对路径，例如`<img src="button.png" />`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T17:51:42.413

jsFiddle（[http://jsfiddle.net/ZWxEg/10/](http://jsfiddle.net/ZWxEg/10/)）

如果此代码对您不起作用，那么您没有正确加载 jQuery。

-- 已编辑 -- 应 gdoron 的要求使用悬停：D

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>jQuery Hover Effect</title>
<script type='text/javascript' src="/var/www/JSPROBAK/jquery.js"></script>
<script type='text/javascript'>
$(document).ready(function(){
    $(".button").hover( function ()
    {
         $(this).attr("src","http://www.google.com/logos/2012/sovereignty12_hp.jpg");
    },
    function ()
    {
         $(this).attr("src","http://www.google.com/logos/2012/sundback12-hp.jpg");
    });
});
</script>
</head>

<body>
<img src="http://www.google.com/logos/2012/sundback12-hp.jpg" alt="My button" class="button" />
</body>
</html>​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T17:53:45.270

您似乎在引用服务器文件位置而不是网站相对位置。如果您从 www 目录托管网站，那么我会试试这个：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>jQuery Hover Effect</title>
<script type='text/javascript' src="/JSPROBAK/jquery.js"></script>
<script type='text/javascript'>
$(document).ready(function(){
    $(".button").hover(function() {
        $(this).attr("src","/JSPROBAK/button-hover.png");
            }, function() {
        $(this).attr("src","/JSPROBAK/button.png");
    });
});
</script>
</head>

<body>
<img src="/JSPROBAK/button.png" alt="My button" class="button" />
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T17:49:53.787

您将无法像这样褪色，如果它只是纯色，您可以使用[https://github.com/jquery/jquery-color](https://github.com/jquery/jquery-color)

*   否则创建`<a>`具有相对位置的容器（或另一个元素，如果它不应该是可点击的）

*   里面有 2 个绝对位置的图像，一个在另一个之上

*   下面的一个是悬停，应该有一个较低的 z-index 设置（在两者上设置 z-index）

*   在`<a>`悬停事件上淡出具有最高 z-index 的那个

*   在动画完成交换 z-indexes

# asp.net - 本地化：必须单击我的标志两次才能更改语言。我的代码有问题吗？

> ID：10320954
> 
> 赞同：0
> 
> 时间：2012-04-25T17:45:23.093
> 
> 标签：asp.net, visual-studio-2010, localization, internationalization, code-behind

我的网站使用 VS 2010 / vb 本地化为 10 种语言。当我首先单击该标志时，它会更改为该语言。但是当我单击另一种语言时，它不会切换；我必须再次单击它才能切换。有谁知道我的问题是什么？

这是我的 homepage.master.vb 背后的代码：

```
 Imports System
Imports System.Data
Imports System.Configuration
Imports System.Collections
Imports System.Web
Imports System.Web.Security
Imports System.Web.UI
Imports System.Web.UI.WebControls
Imports System.Web.UI.WebControls.WebParts
Imports System.Web.UI.HtmlControls
Imports Udev.MasterPageWithLocalization.Classes
Partial Public Class Homepage
Inherits System.Web.UI.MasterPage
Protected Sub Page_Load(sender As Object, e As EventArgs)
End Sub

Protected Sub RequestLanguageChange_Click(sender As Object, e As EventArgs)
    Dim senderLink As LinkButton = TryCast(sender, LinkButton)

    'store requested language as new culture in the session
    Session(Udev.MasterPageWithLocalization.Classes.Global.SESSION_KEY_CULTURE) =
    senderLink.CommandArgument()

    'reload last requested page with new culture
    Server.Transfer(Request.Path)
End Sub
End Class 
```

这是我的 default.aspx.vb 背后的代码：

```
Imports System
Imports System.Data
Imports System.Configuration
Imports System.Collections
Imports System.Web
Imports System.Web.Security
Imports System.Web.UI
Imports System.Web.UI.WebControls
Imports System.Web.UI.WebControls.WebParts
Imports System.Web.UI.HtmlControls
Imports Udev.MasterPageWithLocalization.Classes

Partial Public Class _Default
    Inherits BasePage
    Protected Sub Page_Load(sender As Object, e As EventArgs)
    End Sub
End Class 
```

任何建议或指导将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T17:57:04.407

这可能与 ASP.net 的生命周期有关。当您单击链接按钮时，页面会在执行 RequestLanguageChange_Click 事件之前重新加载。这意味着您的页面是在会话变量更改之前加载的。但是，由于您执行了 server.transfer，因此应该没有问题（双刷新除外）。我不太了解生命周期，但您应该检查一下，也许它会对您有所帮助。

# asterisk - 如何处理 Asterisk 的 queue_log 文件

> ID：10320955
> 
> 赞同：1
> 
> 时间：2012-04-25T17:45:23.633
> 
> 标签：asterisk

我正在建立一个联络中心，需要一些数据进行管理。因为我们使用的是 Asterisk 队列，所以我相信从 queue_log 获取它们的地方。因此，为了避免未来可能出现的错误，我想知道一些关于处理这个文件的要点。

*   你用来做什么？解析文件并将数据插入关系数据库？或者每次需要报告时解析它？
*   您是否使用某种类型的日志在其上旋转，以避免它变得太大？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T11:46:30.660

您可能想要使用一种称为 Realtime 的模式，它将数据直接存储在数据库中

# leaflet - Leaflet Map 元素位于 DOM 中但不渲染？

> ID：10320957
> 
> 赞同：3
> 
> 时间：2012-04-25T17:45:27.383
> 
> 标签：leaflet

Leaflet 正在*渲染*，因为我可以在 DOM 中看到它的所有元素，但没有其他任何东西出现。我看到的都是灰色的。

我可以让地图图块出现的唯一方法是如果我删除地图容器上的位置：绝对，但这会创建一堆混乱的地图图块。我检查了 GIT 历史，看看我是否不小心更改了样式，但没有运气。

这是初始化地图的代码：

```
// init everything on page show
$("#map").live('pageshow',function() {
    if(window.localStorage.getItem("lat")!=undefined) { var lat = window.localStorage.getItem("lat")} else { var lat = '49.264'; }
    if(window.localStorage.getItem("lng")!=undefined) { var lng = window.localStorage.getItem("lng")} else { var lng = '-123.123'; }
    try {         
        var map = window.map
        map = new L.Map('map-container');
        var cloudmadeUrl = 'http://{s}.tile.cloudmade.com/006282296d334e66a593e55aca6b5ce0/54803/256/{z}/{x}/{y}.png';
        var cloudmadeAttribution = 'Map Data &copy; 2011 OpenStreetMap';
        var cloudmade = new L.TileLayer(cloudmadeUrl, {maxZoom: 18, attribution: cloudmadeAttribution});
        map.setView(new L.LatLng(lat, lng), 12).addLayer(cloudmade);
        map.invalidateSize();
    } catch(e) {console.log(e)}
    userMarkers[1] = new L.Marker( new L.LatLng( lat,lng ) , {icon: new iconUser, clickable: true} );
    map.addLayer( userMarkers[1] );
}); 
```

该环境包括 jQuery 移动。不幸的是，控制台没有记录任何错误，并且当我检查它时，上面的 localStorage 确实保存了有效的 LatLng 值。

截图： ![截屏](../Images/ddf6b01e8b2aa437271744432a8a2626.png)

有什么猜测吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T20:09:50.747

我不确定问题是如何开始的，但为了解决它，我删除了所有地图容器样式，然后声明：

```
#map-container {
    position:absolute;
    top:0;
    bottom:0;
    left:0;
    right:0;
    margin: 0;
    padding: 0;
} 
```

现在问题已经解决了。我以前从未使用过这种样式，所以我无法推测问题是如何开始的。

# android - 如何将字符串数据存储在集合中，然后列出集合中的所有数据？

> ID：10320963
> 
> 赞同：0
> 
> 时间：2012-04-25T17:45:45.543
> 
> 标签：android, collections

我正在创建一个管理器应用程序，并希望获取用户输入的字符串和日期数据，然后保存它。然后能够在另一个页面上列出所有事件。当前输入使用 EditText 并且是名称、描述、日期和位置。我该怎么做呢？我是 android 的新手，也使用 eclipse 进行开发。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T17:51:19.307

您可以将 editText 中的所有值转换为单独的字符串。一旦您将这些值保存在字符串中，您就可以使用 putExtras 或 putString 方法将它们存储在[Bundle中。](http://developer.android.com/reference/android/os/Bundle.html)

然后创建一个 Intent 以转到其他活动，并使用`Intent.putExtras(Bundle)`.

在其他活动的 oncreate 中，您可以使用从包中提取数据 `Bundle b= getIntent().getExtras();`

并将 Bundle 的每个元素检索到单独的字符串中并显示它们。

如果你打算拥有持久存储，你应该`SQLite database`使用类来存储数据`SQLiteOpenHelper`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T17:58:19.337

您没有指定要保留此信息的时间。由于您正在设计管理器应用程序，因此我假设您希望在应用程序被终止并重新打开后访问这些数据。

在我看来，将这些信息存储在数据库中（很可能[使用 SQLite](http://developer.android.com/guide/topics/data/data-storage.html#db)）将是最合乎逻辑的方法，因为如果您决定要在其中实现某种排序算法，查询这些信息会更容易未来。

另一种选择，您也可以使用[`SharedPreferences`](http://developer.android.com/guide/topics/data/data-storage.html#pref).

您可能想看看[这个页面](http://developer.android.com/guide/topics/data/data-storage.html)，因为它解释了在 Android 上存储持久信息的各种方法。

# c# - 从 C# .NET 控制台应用程序连接到 MongoDb 时出错

> ID：10320964
> 
> 赞同：0
> 
> 时间：2012-04-25T17:45:51.737
> 
> 标签：c#, mongodb

> 无法连接到服务器 localhost:27017：
> 无法建立连接，因为目标机器主动拒绝了它 127.0.0.1:27017。

当我使用 mongoDB 使用 C# 运行控制台应用程序时出现此异常
我已经下载了 CSharpDriver-1.4.1.4490.msi

```
 using System;
  using System.Collections.Generic;
 using System.Linq;
using System.Text;
using MongoDB.Bson;
using MongoDB.Driver;
using MongoDB.Driver.Builders;

namespace ConsoleApplication4
{
    public class Entity
   {
       public ObjectId Id { get; set; }
       public string Name { get; set; }
    }

class Program
{
    static void Main(string[] args)
    {

        var connectionString = "mongodb://localhost:27017"; 
            var server = MongoServer.Create(connectionString);
            var database = server.GetDatabase("test");
            var collection = database.GetCollection<Entity>("entities");

            var entity = new Entity { Name = "Tom" };
            collection.Insert(entity);
            var id = entity.Id;

            var query = Query.EQ("_id", id);
            entity = collection.FindOne(query);

            entity.Name = "Dick";
            collection.Save(entity);

            var update = Update.Set("Name", "Harry");
            collection.Update(query, update);

            collection.Remove(query);

      }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T00:44:20.983

我会按照这里的指示，在 Mongo 网站上。[Windows 快速入门](http://www.mongodb.org/display/DOCS/Quickstart+Windows "Windows 快速入门")是在 Windows 上开始使用 Mongo 的一个非常好的资源。

至于连接到 .Net 中的 Mongo 实例，如果您在安装 Mongo 期间没有做任何特别的事情，则不必显式提供连接字符串。以下代码适用于我的 Mongo 通用设置。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using MongoDB.Bson;
using MongoDB.Driver;
using MongoDB.Bson.IO;
using MongoDB.Bson.Serialization;
using MongoDB.Bson.Serialization.Attributes;
using MongoDB.Bson.Serialization.Conventions;
using MongoDB.Bson.Serialization.IdGenerators;
using MongoDB.Bson.Serialization.Options;
using MongoDB.Bson.Serialization.Serializers;
using MongoDB.Driver.Builders;
using MongoDB.Driver.GridFS;
using MongoDB.Driver.Wrappers;

namespace MongoDB
{
    class Program
    {
        static void Main(string[] args)
        {
            MongoServer server;
            MongoDatabase moviesDb;

            server = MongoServer.Create();
            moviesDb = server.GetDatabase("movies_db");

            //Create some data
            var movie1 = new Movie { Title = "Indiana Jones and the Raiders of the Lost Ark", Year = "1981" };
            movie1.AddActor("Harrison Ford");
            movie1.AddActor("Karen Allen");
            movie1.AddActor("Paul Freeman");

            var movie2 = new Movie { Title = "Star Wars: Episode IV - A New Hope", Year = "1977" };
            movie2.AddActor("Mark Hamill");
            movie2.AddActor("Harrison Ford");
            movie2.AddActor("Carrie Fisher");

            var movie3 = new Movie { Title = "Das Boot", Year = "1981" };
            movie3.AddActor("Jürgen Prochnow");
            movie3.AddActor("Herbert Grönemeyer");
            movie3.AddActor("Klaus Wennemann");

            //Insert the movies into the movies_collection
            var moviesCollection = moviesDb.GetCollection<Movie>("movies_collection");
            //moviesCollection.Insert(movie1);
            //moviesCollection.Insert(movie2);
            //moviesCollection.Insert(movie3);

            var query = Query.EQ("Year","1981");

            var movieFound = moviesDb.GetCollection<Movie>("movies_collection").Drop();

        }

    }

} 
```

# ruby-on-rails - 将 wordpress 添加到内置于 rails 的站点中

> ID：10320966
> 
> 赞同：5
> 
> 时间：2012-04-25T17:45:55.687
> 
> 标签：ruby-on-rails, wordpress

我正在尝试将 Wordpress 博客添加到使用 ruby​​ on rails 构建的网站中。我只需要它位于子目录中。我在公共目录中创建了一个文件夹并将 Wordpress 文件放在那里，现在我遇到了路由错误，而且我真的对 Rails 不太熟悉。有人可以帮我想办法做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T11:26:14.917

如果您有权访问服务器配置，则可以让 PHP 和 rails 在同一个项目中工作。我能够在短短几分钟内完成测试 VPS 的工作。我没有使用 wordpress 进行测试，只是一个简单的 phpinfo() 调用，但我看不出它会失败的任何原因。

我的安装使用 NGINX 作为 Web 服务器，Unicorn 用于 Rails，spawn-fcgi 和 php-cgi 用于 PHP 处理。

我已经有一个可以运行的 Rails 应用程序，所以我只是在其中添加了 PHP。rails 应用程序使用 NGINX 代理对 Unicorn 的请求，因此它已经将公共目录作为静态服务。我将在下面发布我的虚拟主机文件，以便您了解它是如何完成的。

这都是在 ArchLinux VPS 上完成的，但其他发行版应该是类似的。

我的虚拟主机文件：

```
upstream unicorn {
  server unix:/tmp/unicorn.jrosw.sock fail_timeout=0;
}

server {
  listen 80 default deferred;
  server_name example.com www.example.com;
  root /home/example/app/current/public;

  location ^~ /assets/ {
    gzip_static on;
    expires max;
    add_header Cache-Control public;
  }

  try_files $uri/index.html $uri @unicorn;
  location @unicorn {
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header Host $http_host;
    proxy_redirect off;
    proxy_pass http://unicorn;
  }

  error_page 500 502 503 504 /500.html;
  client_max_body_size 4G;
  keepalive_timeout 10;

  location ~ \.php$ {
    try_files $uri =404;
    include /etc/nginx/conf/fastcgi_params;
    fastcgi_pass 127.0.0.1:9000;
    fastcgi_index index.php;
    fastcgi_param SCRIPT_FILENAME /home/example/app/current/public$fastcgi_script$
  }
} 
```

然后是一个小脚本来调出 php-cgi：

```
#!/bin/sh

# You may want to just set this to run as your app user 
# if you upload files to the php app, just to avoid
# permissions problems

if [ `grep -c "nginx" /etc/passwd` = "1" ]; then
   FASTCGI_USER=nginx
elif [ `grep -c "www-data" /etc/passwd` = "1" ]; then
   FASTCGI_USER=www-data
elif [ `grep -c "http" /etc/passwd` = "1" ]; then
   FASTCGI_USER=http
else
# Set the FASTCGI_USER variable below to the user that
# you want to run the php-fastcgi processes as

FASTCGI_USER=
fi

# Change 3 to the number of cgi instances you want.

/usr/bin/spawn-fcgi -a 127.0.0.1 -p 9000 -C 3 -u $FASTCGI_USER -f /usr/bin/php-cgi 
```

我遇到的唯一问题是让 fastcgi_index 选项正常工作，因此您可能需要研究[nginx 的 url 重写](http://nginx.org/en/docs/http/ngx_http_rewrite_module.html)功能才能让 wordpress 的永久链接功能正常工作。

我知道这种方法并不理想，但希望它能让你走上正轨。

# quartz.net - 使用 Quartz 作为队列处理器

> ID：10320968
> 
> 赞同：2
> 
> 时间：2012-04-25T17:46:08.333
> 
> 标签：quartz.net

我正在研究 Quartz.NET 来处理我们的日常工作，它似乎可以处理我们的场景。我们还有一些作业被添加到 SqlServer 中的队列表中，并且每隔几秒就会轮询该表的工作。如何使用 Quartz.NET 处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T22:38:42.983

Quartz.net 将取代队列/轮询功能。Quartz.net 有它自己的队列（jobstore），它轮询并从中执行作业。

您将要做的是在石英中安排您的作业（将它们排队），然后 Quartz.Net 将根据它们需要执行的时间（由触发器确定）来执行它们。在 Quartz.Net 中，工作（完成工作）与触发器（确定我的工作何时应该运行）是分开的。

# javascript - 使用 javascript 动态更改 HTML 表单

> ID：10320970
> 
> 赞同：1
> 
> 时间：2012-04-25T17:46:15.170
> 
> 标签：javascript, html

基本上我需要根据选择（也许是单选按钮）更改表单中的元素。因此，一个页面上可能有 2 个表单可用。

到目前为止，我已经想出了这个，但它似乎不起作用......

```
//javascript

function FormChange(toChange){
    if (toChange){
        var oldHTML = document.getElementById('li1').innerHTML;
        var newHTML = "Company Name: " + "<input type="text" name="companyname" />";
        document.getElementById('li1').innerHTML = newHTML;
}

//HTML

<form action="insert.php" method="post">
<li id="li1">Firstname: <input type="text" name="firstname" />
</form>

<input type = "button" value="Change that bad boy" onclick="FormChange(true)"/> 
```

我的意图是删除 firstname 字段并将其替换为 companyname 字段。

非常感谢任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T17:55:13.397

将两个当前答案放在一起，并添加一些错误处理：

```
function FormChange(toChange) {
    if (toChange) {
        var elt = document.getElementById('li1');
        if (elt) {
            var newHTML = "Company Name: " + "<input type='text' name='companyname' />";
            elt.innerHTML = newHTML;
        }
    }
}

<form action="insert.php" method="post">
<ul>
<li id="li1">Firstname: <input type="text" name="firstname" /></li>
</ul> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T17:56:14.353

```
function FormChange(toChange){
    if (toChange){
        var oldHTML = document.getElementById('li1').innerHTML;
        var newHTML = "Company Name: " + "<input type='text' name='companyname' />";
        document.getElementById('li1').innerHTML = newHTML;
    }
} 
```

[**演示。**](http://jsfiddle.net/qNtc2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T17:54:24.243

为什么不使用 jquery ???，做这样的事情：

```
$("#li1").change(function(){
alert("it changed");//here do whatever you want to
}); 
```

我认为它更容易并且更具可读性。（不要忘记导入 Jquery 库）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T17:48:35.910

尝试转义 innerHTML 文本中的内部双引号。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-25T17:48:46.087

你忘记关闭了`{`！

使固定：

```
function FormChange(toChange) {
    if (toChange) {
        var oldHTML = document.getElementById('li1').innerHTML;
        var newHTML = "Company Name: " + "<input type="text" name="companyname" />";
        document.getElementById('li1').innerHTML = newHTML;
    } // <-- this was missing!
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-25T18:03:48.170

我做了一些调整，仅在文本`"Firstname:"`如此重复调用不会不必要地干扰 DOM 时进行更改（请参阅[此处](http://jonraasch.com/blog/10-javascript-performance-boosting-tips-from-nicholas-zakas)的性能点 9 ）

JS：

```
function FormChange() {
    var obj = document.getElementById('li1');
    var oldHTML = obj.innerHTML.substring(0,10);

    if (oldHTML=="Firstname:") {
        var newHTML = "Company Name: <input type=\"text\" name=\"companyname\" />";
        obj.innerHTML = newHTML;
    }
} 
```

HTML：

```
<form name="myForm" action="insert.php" method="post">
    <ul>
        <li id="li1">Firstname: <input name="firstname" type="text" /></li>
    </ul>
</form>
<input type="button" onclick="FormChange();" value="Change that bad boy" /> 
```

**[演示](http://jsfiddle.net/UMGPE/1/)**

**进一步说明：**

*   `<li>` [应包含](https://developer.mozilla.org/en/HTML/Element/li)在：`<ol>`,`<ul>`或`<menu>`
*   您需要正确[转义](https://developer.mozilla.org/en/JavaScript/Guide/Values,_Variables,_and_Literals#Escaping_characters)变量中的引号

# iphone - 更新 annotationView 中的字幕

> ID：10320975
> 
> 赞同：3
> 
> 时间：2012-04-25T17:46:44.083
> 
> 标签：iphone, string, mapkit, mkannotationview, subtitle

有没有办法不断更新annotationView中的字幕字符串？字幕字符串从另一个每秒更新值的类中获取它的值。是否可以在 annotationView 中获取字幕以不断更新自己？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T17:57:20.980

创建一个更新字幕值的方法并在主线程中调用此方法。所有与 UI 相关的更改都应在主线程中进行。

```
[self performSelectorOnMainThread:<#(SEL)#> withObject:<#(id)#> waitUntilDone:<#(BOOL)#>]

-(void)updateValue 
 { 
      if(![NSThread isMainThread]) 
      { 
         [self updateValue]; 
         return; 
      } 
      update your values here. 
 } 
```

# c - 在 C 中删除整个链表 - 为什么不使用引用指针？

> ID：10320977
> 
> 赞同：2
> 
> 时间：2012-04-25T17:46:59.060
> 
> 标签：c, pointers, linked-list

我在一本书中找到了这段代码：

```
void DeleteList(element *head)
{
  element *next, *deleteMe;
  deleteMe = head;
  while (deleteMe) {
    next = deleteMe->next;
    free(deleteMe);
    deleteMe = next;
  }
} 
```

假设我们传递给函数的参数是指向列表头部的指针，为什么我们不传递对该指针的引用？

如果我们不这样做，我们不只是要删除该指针的本地副本吗？这就是我们传递引用指针的原因吗？那么被调用者得到函数内部已经完成的更改了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T17:50:11.553

> 如果我们不这样做，我们不只是要删除该指针的本地副本吗？

好吧，C 中没有引用之类的东西，但我假设您的意思是指针到指针，答案是否定的。

您正在释放*堆上指针指向*的内存，而不是指针本身。你没有改变*指针*，所以副本很好。不管是不是副本，它们都指向同一个地方。

您将此与为传递给函数的变量分配一个全新的值混淆了，在这种情况下，您将需要一个指向指针的指针。例如：

```
// only changes the local copy
void init(some_type *foo) {
    foo = malloc(sizeof(some_type));
}

// initializes the value at *foo for the caller to see
void init(some_type **foo) {
    *foo = malloc(sizeof(some_type));
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-25T17:50:28.513

将指针传递给指针（不是指针的引用，因为 C 根本没有引用）将是一个更好的解决方案，因为您可以在删除后将其清空。正如当前定义的那样，如果调用者不小心，该函数可能会留下悬空指针。除了那个小问题，这个解决方案是有效的：调用者总是可以在`NULL`将列表头传递给`DeleteList()`.

以下是我将如何用指向指针的指针重写它：

```
void DeleteList(element **head) {
    element *next, *deleteMe;
    deleteMe = *head;
    while (deleteMe) {
        next = deleteMe->next;
        free(deleteMe);
        deleteMe = next;
    }
    *head = NULL;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T17:58:36.730

来自@dasblinkenlight 的代码可以变得更紧凑。

```
void DeleteList(element **head) {
    element *deleteMe;
    while ((deleteMe = *head)) {
        *head = deleteMe->next;
        free(deleteMe);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-25T17:49:47.053

调用`free`时，指针本身并没有改变，所以不需要通过引用传递。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-25T17:50:17.857

您无需更改**caller**中列表头的值。

```
// caller
DeleteList(head);
// head points to an invalid place (the place where the list used to be)
// for convenience sake, reset to NULL
head = NULL; 
```

# html - 模板匹配问题

> ID：10320978
> 
> 赞同：0
> 
> 时间：2012-04-25T17:47:11.317
> 
> 标签：html, xml, xslt

我有一个源 html 看起来像：

```
<p class="heading-8">Emergency Care<span class="char-style-override-68">, if not already done:</span></p>
<p class="List-Bullet-CHAM1-CHAM-1-List-Bullet-1 para-style-override-3"><span>  </span><span class="char-style-override-25">1.</span><span> Do Initial Assessment (p. 72).</span></p> 
```

现在我为 p 创建一个模板匹配：

```
<xsl:template match="x:p">
<xsl:choose>
 <xsl:when test="contains(@class,'heading-8')">
   <xsl:variable name="current-name" select="generate-id(.)"/>
   <xsl:variable name="noTable" select="count(preceding-sibling::x:table)"/>
   <p>
    <b>
        <xsl:apply-templates/>
    </b>
   </p>
            <xsl:if test="following-sibling::*[1][self::x:p][contains(@class,'List-Bullet-CHAM1-CHAM-1')][generate-id(preceding-sibling::x:p[contains(@class,'heading-8 ')][1]) = $current-name]">
                <ol>
                    <xsl:apply-templates select="following-sibling::x:p[contains(@class,'List-Bullet-CHAM1-CHAM-1')][count(preceding-sibling::x:table)=$noTable][generate-id(preceding-sibling::x:p[contains(@class,'heading-8 ')][1]) = $current-name]" mode="bullet"/>
                </ol>
            </xsl:if>
 </xsl:when> 
```

我现在遇到的问题是，我似乎永远无法进入那个内部 if 分支。但我认为源 html 与它完美匹配，只是不知道我可能错在哪里。

PS，我使用 generate-id() 函数来确定前面的兄弟节点的身份。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T20:22:43.630

据我所知，xsl:if 语句的测试条件看起来不错，除了`contains(@class,'heading-8 ')`. 没有包含字符串“heading-8”的*类属性。*删除 xsl:if 和 xsl:apply-templates 元素中的空格应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T20:21:07.343

我认为您可能使**if**条件过于复杂。看起来您正在检查以下兄弟是否是**p**标签，并且是否具有特定的**类**属性。因为你已经定位在一个带有“heading-8”类的**p**元素上，你可能不需要担心 generate-id()，只需将其简化为以下内容：

```
<xsl:if 
   test="following-sibling::*[1][self::x:p][contains(@class,'List-Bullet-CHAM1-CHAM-1')]"> 
```

# iphone - UIImageView 内存使用情况

> ID：10320980
> 
> 赞同：0
> 
> 时间：2012-04-25T17:47:29.620
> 
> 标签：iphone, cocoa-touch, uiimageview, uiimage

当使用 UIImageView 为多个帧设置动画时，iOS 如何将它们映射到内存中，是简单的图像分辨率 x 位深度（即 200x200 24 位 TGA 将与 200x200 24 位 JPG 相同）还是 iOS 是否考虑了未使用的 alpha 像素图片。此外，这如何处理加载到 Xcode 项目中的图像（可能未使用）和直接加载到内存中的图像（即使用 UIImage imageNamed: 从应用程序内）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T18:43:34.813

我认为即使图像是 24 位，它也会解压缩到 32 位，因为默认颜色空间是 4 通道，大小通常是`number_of_pixel_in_row*number_of_pixel_in_height*byte_for_pixels`. 在我的测试中，即使对于不同的格式，我总是看到相同的内存消耗。图像在需要在上下文中绘制时延迟加载，之后如果不释放它们会保持内存压力。这意味着即使您创建了 UIImage 对象，它也不会被解压缩，直到需要绘制它。-imageNamed 等方法将图像缓存在内存中，我通常只用于重复图像。
希望这可以帮助

# ios - 一定分钟后自动锁定应用程序

> ID：10320985
> 
> 赞同：0
> 
> 时间：2012-04-25T17:47:50.377
> 
> 标签：ios, xcode, uinavigationcontroller, uitabbarcontroller, uiapplicationdelegate

我的问题..甚至不确定这是否可能，但其他人对此感到好奇...

我有一个应用程序，每次用户打开或从后台返回时都会提示输入密码。工作正常。

由于数据的敏感性，我希望能够创建一个自动锁定类型的功能，在一定分钟的不活动后会提示用户输入数据或进入后台。如果在 30 秒内没有响应，我会让应用程序进入后台（如果被坏人发现，它只是留在屏幕上的数据类型可能会产生可怕的后果，而且我们都知道在我们让手机无人看管的情况下会发生这种情况） .

这甚至可能吗？如果是这样..一些一般的想法让我继续前进。

该应用程序是一个标签栏应用程序，其中导航控制器作为每个标签栏项目。这很简单。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T17:56:30.147

您可以打开一个 URL。将打开 Safari 的普通 HTTP URL，或由另一个应用程序处理的 URL。但这是相当糟糕的设计，Apple 可能会遇到问题。您只应该控制应用程序的行为，而不是系统。

不过，我不明白您希望从中获得什么。检测不活动，很好。但是为什么不在敏感数据的顶部放置一个不透明的视图，隐藏所有内容并提供一个按钮来解锁应用程序呢？为什么你特别需要应用程序进入后台？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T17:58:37.057

据我所知，没有办法只自愿进入后台。最好的近似方法可能是请求打开某个 URL，以便将您替换为浏览器。

除此之外，您可以使用代码取消计时器并在您想要的任何分钟内重新启动它。它会在每个“活动”上被调用。如果计时器到期，请推送一个模式视图控制器以获取您想要作为解锁的信息。决定并处理所有可能被视为活动的事情可能需要一些思考。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T18:48:36.027

每次用户与您的应用程序交互时，都会调用这样的方法

```
[lockoutTimer invalidate]  
lockoutTimer =  [NSTimer scheduledTimerWithTimeInterval:(30) target:self selector:@selector( method to ask the user to either enter data or make go a website) userInfo:nil repeats:YES]; 
```

转到网站代码：`[[UIApplication sharedApplication] openURL:[NSURL URLWithString: myWebsiteURL ]];`

# android - 在 ListView 中的 ImageButton 元素上按下时如何获取 ListItem 位置

> ID：10320987
> 
> 赞同：0
> 
> 时间：2012-04-25T17:47:58.067
> 
> 标签：android

我有一个自定义列表视图...

我正在使用布局构建的列表视图的每个项目...

我的布局将有 4 个文本视图和一个 ImageButton.. 我的列表视图大小是 10 个元素。

现在我需要根据按下按钮的位置启动不同的活动..

就像如果用户按下第三个列表项 ImageButton 那么我需要显示第三个活动..

我面临的问题是我无法获得 ImageButton 的位置编号..

我添加了“setOnItemClickLIsener()”，但是当按下 imagebutton 时它没有被调用..

请帮助我如何获得按下的 ImageButton 的位置...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T18:08:36.523

有两种方法，一种是将监听器放在按钮上，然后在适配器上，您应该在每个按钮上放置一个监听器，在这些监听器上，您已经放置了正确的活动来调用。

或者您不能将侦听器放在按钮上并在列表上使用 setOnItemClickListener，那么您将拥有自己的位置并可以开始正确的活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T18:17:12.620

在你的适配器的 getview() 方法中......把这个方法......

```
 mybutton.setOnClickListener(new OnClickListener() {
 private int pos = position;

  @Override
 public void onClick(View v) {
 Toast.makeText(context, "position="+ String.valueOf(pos), Toast.LENGTH_SHORT).show();

  }
 }); 
```

这将敬酒......（或者你可以得到位置的价值）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-20T14:52:33.880

只需将其放入您的 XML 文件中：

```
<ListView  
....
....
android:focusable="false"
android:focusableInTouchMode="false"/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-20T14:33:23.980

我是这样解决的。在我的适配器的 getview() 方法中，我将标签设置为我的 ImageButton 并将其保存在 setOnClickListener 方法中以供以后使用。holder 是在 getView() 方法中使用的静态类。

```
 public View getView(int position, View convertView, ViewGroup parent){ 
     //...
     holder.imgButton = (ImageButton)rowView.findViewById(R.id.imageViewBookProject);
     holder.imgButton.setTag(position);
     holder.imgButton.setOnClickListener(new View.OnClickListener() {

         public void onClick(View v) {
        String tag = v.getTag().toString();
        Log.d("clicked button", tag);
        //store the position of the clicked button for later use in the code
        lastClicked = Integer.parseInt(tag);
        //perform my action
        }

     }); 
```

# c# - 是否可以重置 ServicePointManager？

> ID：10320992
> 
> 赞同：2
> 
> 时间：2012-04-25T17:48:23.157
> 
> 标签：c#, .net, sockets, email, network-programming

我正在尝试遵循与[System.Net.Mail.SMTPClient How do its local IP binding](https://stackoverflow.com/a/3428052)我在具有多个 IP 地址的机器上使用 Windows 7 和 .Net 4.0 中给出的代码类似的代码。我定义了[BindIPEndPointDelegate](http://msdn.microsoft.com/en-us/library/system.net.servicepoint.bindipendpointdelegate.aspx)

```
private static IPEndPoint BindIPEndPointCallback(ServicePoint servicePoint, IPEndPoint remoteEndPoint, int retryCount)
{
    string IPAddr = //some logic to return a different IP each time
    return new IPEndPoint(IPAddr, 0);
} 
```

然后我使用发送我的电子邮件

```
SmtpClient client = new SmtpClient();
client.Host = SMTP_SERVER; //IP Address as string
client.Port = 25;
client.EnableSsl = false;
client.ServicePoint.BindIPEndPointDelegate 
   = new System.Net.BindIPEndPoint(BindIPEndPointCallback);
client.ServicePoint.ConnectionLeaseTimeout = 0;
client.Send(msg);  //msg is of type MailMessage properly initialized/set
client = null; 
```

第一次调用此代码时，会调用委托，并且无论设置什么 IP 地址，都会使用它。随后调用此代码时，将永远不会调用委托，***即随后使用第一个 IP 地址。***是否有可能改变这种每次调用代码时调用委托回调的情况？

我在想[ServicePointManager](http://msdn.microsoft.com/en-us/library/system.net.servicepointmanager.aspx)（这是一个**静态类**）缓存第一次调用委托的结果。可以重置这个类吗？我不在乎性能。

谢谢你，OO

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-07-19T16:58:55.237

我遇到了类似的问题，想重置**ServicePointManager**并为不同的测试结果更改证书。对我有用的方法是将 MaxServicePointIdleTime 设置为一个低值，这将有效地重置它。

```
ServicePointManager.MaxServicePointIdleTime = 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T21:08:03.923

我在上面发布的问题中遇到的问题是所有电子邮件都将使用第一条消息的 IP 发送出去。我认为某些东西*（可能是**ServicePointManager**）*正在缓存连接。虽然我还没有找到重置**ServicePointManager**的解决方案，但我意识到我上述设置尝试`client = null;`并没有真正关闭连接，即使你`GC.Collect();`很快打电话。我发现唯一有效的是：

```
SmtpClient client = new SmtpClient();
//Remaining code here.... 
client.Send(msg); 
client.Dispose(); //Secret Sauce 
```

在发送每条消息后调用`client.Dispose();`总是会重置连接，因此下一条消息可以选择它需要发送的 IP 地址。

面向对象

# java - 关于 java 小程序警告的说明

> ID：10320993
> 
> 赞同：3
> 
> 时间：2012-04-25T17:48:27.327
> 
> 标签：java, security, applet, jnlp, next-generation-plugin

我正在通过 JNLP 部署 Java 小程序。Applet 的功能按预期工作，我的问题在于运行时显示的安全警告。我已经广泛搜索了关于它们何时以及为什么出现而没有任何足够答案的答案，所以我想我试图在这里得到一些答案。

前提：我的 Applet 使用自签名证书进行签名，该证书也作为受信任的 CA 导入（显示“看起来更安全”警告）。我将在生产中使用来自 Thawte 或 Verisign 的真实证书，但现在这应该足够了。不需要外部权限，磁盘访问仅通过 JNLP 完成。

因为我希望能够使用 FileSaveService 和 FileOpenService，所以我在 JNLP 文件的安全部分中指定了 j2ee-application-client-permissions 标记。

Javascript 用于调用小程序中的公共函数。

现在发生这种情况：加载小程序时，我收到一个安全提示，警告我此小程序将在无限制访问系统的情况下运行。警告是带有蓝色信息显示而不是黄色警告的受信任类型。为什么我会收到此警告？即使我坚持只使用 JNLP 库，这是否总是会出现？这个警告是如何确定的，是通过扫描我的代码还是通过阅读我可以更改的一些设置？是否有允许在没有收到此警告的情况下运行的类列表？

加载小程序并尝试打开文件对话框后，我再次收到提示说应用程序已请求读/写权限。

我假设后面的警告是 JNLP 警告，因为它是在我开始使用 JNLP 时首次出现的。为什么在启动和使用过程中都会收到提示？我是否需要同时获得两者，一旦获得适当的证书，我是否会同时获得两者？

最重要的是，我想摆脱第一个警告，因为让我的小程序以不受限制的访问权限运行看起来相当可怕（特别是因为这根本不是我的意图！）。是否有任何文档可以清除触发警告的原因以及如何处理它们？

编辑：该文件已通过 Janela 验证，没有错误。一切都按原样启动，这是我想了解的警告。

```
<script>
var attributes = {
    id:'id',
    codebase:'www.mydomain.com/jars/',
    width:1, 
    height:1, 
    name:"Name"
};
var parameters = {
    jnlp_href:"www.mydomain.com/jars/jnlp.jnlp"
}                       
    deployJava.runApplet(attributes, parameters, '1.6');
</script> 
```

JNLP 文件

```
<?xml version="1.0" encoding="UTF-8"?>
    <jnlp spec="1.0+" href="/jars/jnlp.jnlp">
    <information>
    <title>Title</title>
    <vendor>My Company</vendor>
    <description>Description</description>
    <description kind="short">Desc</description>
    <offline-allowed />
    </information>

    <resources>
    <j2se version="1.6+" />
    <jar href="ext1.jar" main="false" download="eager"/>
    <jar href="ext2.jar" main="false" download="eager" />
    <jar href="mainJar.jar" main="true" download="eager"/>
    </resources>
    <applet-desc 
    name="name"
    main-class="com.myCompany.applet.mainClass" 
    width="1"
    height="1">
    </applet-desc>
<security>
    <j2ee-application-client-permissions/>
</security>
 </jnlp> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T01:27:18.923

您不必签署您的小程序。如果您不签名，则不会出现第一个警告。

[http://docs.oracle.com/javase/tutorial/deployment/applet/security.html](http://docs.oracle.com/javase/tutorial/deployment/applet/security.html)