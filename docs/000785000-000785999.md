# StackOverflow 问答 000785000-000785999

# .net - 使用 WebRequest 检索数据

> ID：785003
> 
> 赞同：0
> 
> 时间：2009-04-24T08:39:06.507
> 
> 标签：.net, ajax, google-translate

从 msdn 中删除了一些代码后，我很生气，它不能立即按照我想要的方式工作。我正在尝试使用谷歌翻译，嗯，为我翻译一些东西。问题是 t5he responseFromServer 不包含翻译后的文本，当我使用浏览器查看它时，源也不包含，尽管在查看页面本身时 chien 自豪地显示。

```
void getTranslation()
    {
        WebRequest request = WebRequest.Create("http://translate.google.com/translate_t?hl=en#en|fr|dog");
        // Get the response.
        WebResponse response = request.GetResponse();
        // Display the status.
        Console.WriteLine(((HttpWebResponse)response).StatusDescription);
        // Get the stream containing content returned by the server.
        Stream dataStream = response.GetResponseStream();
        // Open the stream using a StreamReader for easy access.
        StreamReader reader = new StreamReader(dataStream);
        // Read the content.
        string responseFromServer = reader.ReadToEnd();
        int index = 0;
        while (responseFromServer.Substring(index).Contains("dog"))
        {
            index = responseFromServer.IndexOf("dog", index + 1);
            Console.WriteLine(responseFromServer.Substring(index < 50 ? 0 : index - 50, 100));
            Console.WriteLine(" ");
        }
    } 
```

有谁知道我在这里无法理解什么？还是返回请求一样简单的翻译的网站？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-24T08:46:07.397

原因是翻译请求本身是一个异步 AJAX 请求。如果您查看要检索的页面的来源，您将找不到单词`chien`.

你可以看看[Google AJAX Language API](http://code.google.com/apis/ajaxlanguage/)来实现你想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-24T08:49:10.803

它不起作用，因为此应用程序使用 javascript 自动发布。

如果您想通过屏幕抓取来执行此操作，则必须使用正确的参数向表单的 URL 发出 POST 请求。

但是，您最好只使用他们的[API](http://code.google.com/p/google-api-translate-java/ "API")而不是网络抓取。

# javascript - 更改单选按钮名称 javascript 在 IE 中不起作用

> ID：785013
> 
> 赞同：5
> 
> 时间：2009-04-24T08:43:07.527
> 
> 标签：javascript, html, internet-explorer, jsf

我在 jsp 页面中有几个单选按钮。加载页面后，我会运行一个 javascript 方法，该方法会寻找某些单选按钮并更改其名称，以便它们像单选组一样工作。

我这样做是因为单选按钮位于 jsf 表中，并且在编码时我无法访问 name 属性，并且我希望所有单选按钮都像单选组一样工作。

无论如何，脚本运行没有问题，并且单选按钮的名称已正确更改。

但是，虽然这在 FF 3 中有效（像广播组一样的工作），但在 IE 6 或 IE7 中不起作用，尽管它们具有相同的“名称”属性。有谁知道我该如何解决这个问题？

```
function setRadioGroup (nombreRadio){
    var listaRadios = document.getElementsByTagName('input');
    var tam = listaRadios.length;
    for (i = 0; i < tam; i++){
        if (listaRadios[i].type == 'radio' && listaRadios[i].title == 'Seleccionar'){
        listaRadios[i].name = nombreRadio;
       }
    }
} 
```

编辑：添加网页的代码输出：

```
<form id="formulario" name="formulario" method="post"
    action="/serequp/faces/administracion/articulosPv.jspx"><input
    type="hidden" id="formulario:hidRegTablaArticulos"
    name="formulario:hidRegTablaArticulos" value="">
<div class="dr-pnl rich-panel " id="formulario:ContFormularios">
<div class="dr-pnl-h rich-panel-header cabeceraFormulario"
    id="formulario:ContFormularios_header">LISTADO DE GRUPOS DE
EQUIPAMIENTOS</div>
<div class="dr-pnl-b rich-panel-body cuerpoFormularios"
    id="formulario:ContFormularios_body">
<table id="formulario:botones">
    <tbody>
        <tr>
            <td class="estiloColumnas"><input id="formulario:j_id66"
                name="formulario:j_id66"
                onclick="A4J.AJAX.Submit('_viewRoot','formulario',event,{'parameters':{'formulario:j_id66':'formulario:j_id66'} ,'actionUrl':'/serequp/faces/administracion/articulosPv.jspx','similarityGroupingId':'formulario:j_id66'} );return false;"
                value="Crear" type="button"></td>
            <td class="estiloColumnas"><input id="formulario:j_id67"
                name="formulario:j_id67"
                onclick="A4J.AJAX.Submit('_viewRoot','formulario',event,{'parameters':{'formulario:j_id67':'formulario:j_id67'} ,'actionUrl':'/serequp/faces/administracion/articulosPv.jspx','similarityGroupingId':'formulario:j_id67'} );return false;"
                value="Modificar" type="button"></td>
            <td class="estiloColumnas"><input id="formulario:j_id68"
                name="formulario:j_id68"
                onclick="A4J.AJAX.Submit('_viewRoot','formulario',event,{'parameters':{'formulario:j_id68':'formulario:j_id68'} ,'actionUrl':'/serequp/faces/administracion/articulosPv.jspx','similarityGroupingId':'formulario:j_id68'} );return false;"
                value="Borrar" type="button"></td>
            <td></td>
        </tr>
    </tbody>
</table>
<table class="dr-table rich-table " id="formulario:tablaArticulos"
    border="0" cellpadding="0" cellspacing="0">
    <colgroup span="3"></colgroup>
    <thead class="dr-table-thead">
        <tr class="dr-table-subheader rich-table-subheader ">
            <th class="dr-table-subheadercell rich-table-subheadercell  "
                scope="col" id="formulario:tablaArticulos:j_id69header">
            <div id="formulario:tablaArticulos:j_id69header:sortDiv">Nombre</div>
            </th>
            <th class="dr-table-subheadercell rich-table-subheadercell  "
                scope="col" id="formulario:tablaArticulos:j_id71header">
            <div id="formulario:tablaArticulos:j_id71header:sortDiv">Nombre</div>
            </th>
            <th class="dr-table-subheadercell rich-table-subheadercell  "
                scope="col" id="formulario:tablaArticulos:j_id75header">
            <div id="formulario:tablaArticulos:j_id75header:sortDiv">Descripci&oacute;n</div>
            </th>
        </tr>
    </thead>
    <tbody id="formulario:tablaArticulos:tb">
        <tr class="dr-table-firstrow rich-table-firstrow ">
            <td class="dr-table-cell rich-table-cell center "
                id="formulario:tablaArticulos:0:j_id69">
            <table id="formulario:tablaArticulos:0:radioGroup1">
                <tr>
                    <td><input id="formulario:tablaArticulos:0:radioGroup1:0"
                        type="radio" name="formulario:tablaArticulos:0:radioGroup1"
                        value="1" onclick="updateSelected('hidRegTablaArticulos', '1');"
                        title="Seleccionar"><label
                        for="formulario:tablaArticulos:0:radioGroup1:0"></label></td>
                </tr>
            </table>
            </td>
            <td class="dr-table-cell rich-table-cell center "
                id="formulario:tablaArticulos:0:j_id71">fff</td>
            <td class="dr-table-cell rich-table-cell center "
                id="formulario:tablaArticulos:0:j_id75">PRUEBA SDS</td>
        </tr>
        <tr class="dr-table-firstrow rich-table-firstrow ">
            <td class="dr-table-cell rich-table-cell center "
                id="formulario:tablaArticulos:1:j_id69">
            <table id="formulario:tablaArticulos:1:radioGroup1">
                <tr>
                    <td><input id="formulario:tablaArticulos:1:radioGroup1:0"
                        type="radio" name="formulario:tablaArticulos:1:radioGroup1"
                        value="1" onclick="updateSelected('hidRegTablaArticulos', '2');"
                        title="Seleccionar"><label
                        for="formulario:tablaArticulos:1:radioGroup1:0"></label></td>
                </tr>
            </table>
            </td>
            <td class="dr-table-cell rich-table-cell center "
                id="formulario:tablaArticulos:1:j_id71">dd</td>
            <td class="dr-table-cell rich-table-cell center "
                id="formulario:tablaArticulos:1:j_id75">PRUEBA SDS</td>
        </tr>
    </tbody>
</table>
<script>
                            setRadioGroup('radioGroup1');
                        </script></div>
</div>
<table id="formulario:botonera">
    <tbody>
        <tr>
            <td><input id="formulario:j_id80" name="formulario:j_id80"
                onclick="A4J.AJAX.Submit('_viewRoot','formulario',event,{'parameters':{'formulario:j_id80':'formulario:j_id80'} ,'actionUrl':'/serequp/faces/administracion/articulosPv.jspx','similarityGroupingId':'formulario:j_id80'} );return false;"
                value="Grabar" type="button"></td>
        </tr>

    </tbody>
</table>
<input type="hidden" name="formulario" value="formulario"><input
    type="hidden" name="autoScroll" value=""><input type="hidden"
    name="formulario:j_idcl" value=""><input type="hidden"
    name="formulario:_link_hidden_" value=""><script
    type="text/javascript">function clear_formulario() {
_clearJSFFormParameters('formulario','',['formulario:j_idcl','formulario:_link_hidden_']);
}
function clearFormHiddenParams_formulario(){clear_formulario();}
function clearFormHiddenParams_formulario(){clear_formulario();}
clear_formulario();</script><input type="hidden" name="javax.faces.ViewState"
    value="!40dc077b"></form>* 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-24T13:01:59.793

我终于得到了答案！

解决方案来自此[博客](http://www.thunderguy.com/semicolon/2005/05/23/setting-the-name-attribute-in-internet-explorer/)，但进行了一些修改（该博客和其他许多博客一样，解决了创建新元素的问题，而不是修改现有元素）。

问题是 Internet Explorer 不允许在运行时修改某些属性。其中之一是属性名称。由于无法修改，因此行为不是您所期望的。解决方案是创建一个新元素，删除旧元素并用新元素替换它。

这里的解决方案（使用 Firefox 3 和 IE 7）：

```
<script>
function setRadioGroup (name){
  var listaRadios = document.getElementsByTagName('input');
  var tam = listaRadios.length;
  for (i = 0; i < tam; i++){
    cur = listaRadios[i];
    if (cur.type == 'radio' ){
      try {
      // if not IE, raise an error and go to catch.            
          element = document.createElement('<input onclick="alert(this.name + this.value);" type="radio" name="' + name + '" value="' + cur.value + '">');
          parentNode = cur.parentNode;
          parentNode.insertBefore(element, cur);
          parentNode.removeChild(cur);
        } catch (err ) {
          cur.setAttribute('name', name);
          cur.setAttribute('onclick', 'alert(this.name + this.value);');
        }
     }
  }
}
</script>

<html>
  <head>
    <title>My Page</title>
  </head>
  <body onload="setRadioGroup('test')">
    <form name="myform" action="http://www.mydomain.com/myformhandler.cgi" method="POST">
      <div align="center"><br>
        <input type="radio" value="Milk"> Milk<br>
        <input type="radio" value="Butter" > Butter<br>
        <input type="radio" value="Cheese"> Cheese
        <hr>
        <input type="radio" value="Water"> Water<br>
        <input type="radio" value="Beer"> Beer<br>
        <input type="radio" value="Wine" > Wine<br>
      </div>
    </form>
  </body>
</html> 
```

# c# - 加密和解密密码的最佳实践？(C#/.NET)

> ID：785016
> 
> 赞同：21
> 
> 时间：2009-04-24T08:44:13.860
> 
> 标签：c#, encryption

我需要在（最好是文本）文件中存储和加密密码，以后我需要能够解密。密码用于我使用的另一项服务，需要以明文形式（通过 SSL）发送到那里。这不是我能改变的。该领域的最佳实践是什么？如何对恶意用户的密码进行一定程度的保护？

我的平台是带有 C#/.NET 3.5 的 WinForms。

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-04-24T08:53:50.187

我假设您要加密密码，因为它将在用户计算机上，并且他们（可能）能够找到并使用它？如果是这样，您基本上就搞砸了-无论您做什么，因为它在用户域中，他们将能够获取它并找出加密并获取加密密码（请记住，使用 Reflector - 以及它的克隆 - 是'不是大多数人无法触及的）并解密它，他们就拥有了。简而言之，您所做的只是混淆密码，而不是保护密码。

我建议实际上将其移出用户控制。例如，建立一个与客户端通信并在请求时安全地返回密码的 Web 服务。如果将来需要，这还允许您更改密码，并为您提供验证合法用户的方法。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-24T10:06:36.140

为什么需要解密密码？通常存储和比较密码的加盐哈希。如果您加密/解密密码，您将再次将密码作为纯文本，这很危险。如果某些用户具有相同的密码，则应该对哈希进行加盐以避免重复的哈希。对于盐，您可以使用用户名。

```
HashAlgorithm hash = new SHA256Managed();
string password = "12345";
string salt = "UserName";

// compute hash of the password prefixing password with the salt
byte[] plainTextBytes = Encoding.UTF8.GetBytes(salt + password);
byte[] hashBytes = hash.ComputeHash(plainTextBytes);

string hashValue = Convert.ToBase64String(hashBytes); 
```

您可以计算密码的加盐哈希并将其存储在您的文件中。在身份验证期间，您再次根据用户条目计算散列，并将此散列与存储的密码散列进行比较。由于从哈希中获取纯文本应该非常困难（它永远不可能，总是时间问题），因此密码受到保护，不会再次作为纯文本读取。

提示：切勿存储或发送未加密的密码。如果您获得新密码，请尽快加密！

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-04-24T08:59:55.520

[System.Security](http://msdn.microsoft.com/en-us/library/system.security.cryptography.protecteddata.aspx)程序集中的 System.Security.Cryptography.ProtectedData 使用一些 Windows API 使用只有它知道的密码来加密数据。

一种可能的用途是拥有一个实际执行需要密码的操作的 Windows 服务。用户与通过远程处理或 WCF 调用服务交互的应用程序。只要服务使用 DataProtectionScope.CurrentUser 并且服务用户与登录用户不同，密码就应该非常安全。

这当然假设用户作为受限用户运行，他们不能修改服务或作为服务用户运行程序。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-24T08:48:44.957

因为您使用的是 WinForms 和 .Net，所以您的代码将在 MSIL 中可见 - 即使经过混淆，您的解密代码也是可见的。

你想向谁隐藏密码？应用程序的用户不应该知道密码吗？

我认为您将需要进行一些用户验证，并且我很想将解密的密钥放在单独的数据库中，并提供一些其他机制来获取需要身份验证的密钥。这样您就可以从 winforms 应用程序中获取解密代码。

我还建议使用一个单独的服务来定期更改加密解密密钥并更新数据库中的所有密码。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-09-04T05:03:43.493

我刚刚实现了类似的东西来存储用户提供的密码。我将加密结果转换为 base 64 编码字符串，以便可以轻松地将其存储在应用程序的用户设置中。

从您的问题来看，您的恶意用户似乎实际上正在使用您的应用程序，因此这只会提供混淆。尽管使用 Reflector 不会显示任何密钥，但纯文本将在调试器中可见。

```
static byte[] entropy = { 65, 34, 87, 33 };

public string Password
{
    get
    {
        if (this.EncryptedPassword == string.Empty)
        {
            return string.Empty;
        }

        var encrypted = Convert.FromBase64String(this.EncryptedPassword);
        var data = ProtectedData.Unprotect(encrypted, entropy, DataProtectionScope.CurrentUser);
        var password = Encoding.UTF8.GetString(data);
        return password;
    }
    set
    {
        if (value == string.Empty)
        {
            this.EncryptedPassword = string.Empty;
            return;
        }

        var data = Encoding.UTF8.GetBytes(value);
        var encrypted = ProtectedData.Protect(data, entropy, DataProtectionScope.CurrentUser);
        var stored = Convert.ToBase64String(encrypted);
        this.EncryptedPassword = stored;
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-24T08:55:09.417

如果**必须**将其存储在文本文件中，则以 AES 加密。

AES 在 c# 中被称为 Rijndael

[http://www.obviex.com/samples/Encryption.aspx](http://www.obviex.com/samples/Encryption.aspx)

更好的地方是注册表，因为它可以保护机器的其他用户访问它。

仍然不是最好的将它存储在用户可能到达的任何地方是危险的，因为体面的开发人员可以在反射器中加载您的应用程序并找到您的密钥的 1/2 方式。

或者有其他人建议的 System.Security.Cryptography.ProtectedData。

您可以在机器上做的最好的事情是创建一个证书并加密/解密，并将其加载并锁定在机器的密钥库中。（仍然必须处理代码中的证书密码）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-24T08:57:19.367

不要将密码存储为代码的一部分。除了反编译和通过隐蔽性依赖安全性的问题之外，如果您更改密码，您需要重新编译和重新分发您的应用程序。

将密码存储为 Web 服务或应用程序有权访问的数据库中。您正在通过网络与服务进行通信，因此您将始终保持连接。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-24T08:58:30.953

最重要的事情之一是文件的权限。即使内容是加密的，您也需要确保只有需要访问文件的进程才能读取它。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-24T11:01:15.370

由于您必须通过网络以未加密的形式发送密码，因此您无法 100% 保护它。

如果您需要在本地存储，AES 就足够了，并且谈论 disasms、网络嗅探器等并不是特别好的反论点，因为**任何**程序都可以完成同样的事情（当然，ASM 比 CIL 更难，但它是一个小问题） .

这种密码保护足以防止随意拿起，而不是防止专业人士解码。

# html - 下拉框的背景图片

> ID：785025
> 
> 赞同：1
> 
> 时间：2009-04-24T08:47:24.523
> 
> 标签：html, css

是否可以使用 CSS 为下拉框保留背景图像。

对于文本框是正确的。

谁能举个例子

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-07-29T13:58:47.137

是的是可能的。您可以为元素设置样式而不是选择框，因为选择框仅在您选择某些内容时提供线条。

试试这个CSS：

```
<style>
    .green { background:green}
    .red { background:red}
    .blue{background:blue}
</style> 
```

这个html：

```
<form>
    <select class='green'>
        <option class='red'>A</option>
        <option class='blue'>B</option>
    </select>
</form> 
```

您将看到主线是绿色的，并且每个选项都根据其颜色着色。您还可以将图像附加到每个 css 类的背景。

# jquery - 在 href 中取消功能

> ID：785033
> 
> 赞同：3
> 
> 时间：2009-04-24T08:51:42.967
> 
> 标签：jquery

我有一个链接

```
<a href="www.site.com"  class="cancel">go there </a> 
```

然后我有一些jQuery：

```
$(".cancel").click(function(){
        confirm("sure??");
 }); 
```

但是当我在警报框中单击取消时，它仍然会转到 www.site.com 而不是什么都不做。如何解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-24T09:15:40.007

返回 bool 是旧方法，但不是每个浏览器的首选方法，这些天我遇到了很多问题。jQuery 包装事件对象并为您处理事件取消。

[http://docs.jquery.com/Events/jQuery.Event#event.preventDefault.28.29](http://docs.jquery.com/Events/jQuery.Event#event.preventDefault.28.29)

```
$(".cancel").click(function(event){
    if (!confirm("Sure??"))
       event.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-24T08:54:18.827

添加返回语句：

```
$(".cancel").click(function(){
    return confirm("sure??");
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-24T08:53:39.063

从 confirm() 返回布尔值？

（不过 jQuery wizz 并不多 :)）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-04-29T02:27:54.423

乍得是对的。

event.preventDefault(); 是正确的解决方法。我尝试为锚标记上的单击事件返回 false，但它不起作用，因为我首先调用 window.location。通过将 event.Default() 设置为我的处理程序中的第一行，我可以创建窗口并正确打开而不允许执行 href。

# time - 如何处理简短的编码会话？

> ID：785037
> 
> 赞同：2
> 
> 时间：2009-04-24T08:53:47.690
> 
> 标签：time

我正在从事一些宠物项目，通常我会在 22:30 或 23:00 左右坐在我的个人电脑旁进行编码。但是因为我试着在 24:00 左右睡觉，所以我不会开始编码，也不会最终阅读文章、玩一些游戏等。

我不觉得我可以在一个小时内写出像样的代码，因为这个项目很大，我不想随意或粗心地破解它。尽管我使用 TDD，但大多数时候我所做的事情并不是直截了当的，这需要大量测试才能正确完成。

你对这类问题的处理方法是什么？当你有足够的时间时，你只是稍后再编码，还是你有不同的方法让你只编码 30 分钟，然后再继续？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-24T08:59:54.633

在我有时间之前，我通常不会写很多代码。原因是对我来说，要有效需要集中注意力，而正确集中注意力需要一些时间。也就是说，那些 30 分钟的时段非常适合

*   编写更多测试：没有什么比试图达到 100% 的代码覆盖率更重要了
*   研究：我花很多时间阅读博客，寻找可以使用的框架或工具。花 30 分钟找到一个框架，它可以完成你需要的 80% 的功能，这比花几个小时尝试编码要好得多。另一个因素是，如果您实施该框架并且发现它不适合您，那么您会更好地了解需求，这意味着您的开发将更加顺利。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-24T08:59:05.117

好吧，我的第一个想法是“使用单元测试”，但后来我读到您已经在使用它。但我仍然认为这是您程序的解决方案。

尝试使您的测试尽可能小，并使用“每个单元测试 1 个断言”规则来创建小型原子测试。您应该能够在 30 分钟的会话中修复其中几个小测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-24T10:03:53.277

以下是您可以尝试的一些事情：

*   不要坐在电脑附近。相反，拿一张大纸去一个安静的地方。想想你想完成什么。写下接口思路，详细实现。在继续之前列出您需要解决的问题。
*   休息一周，然后编码。进入流量与流量时间的比率对于 30 分钟来说太糟糕了。
*   记录你所做的事情而不是编码。观察你的情绪状态。
*   早点睡觉，并尝试在一大早进行宠物编码会议。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-24T15:36:01.780

一个小技巧（我也在工作中使用）是在某事中间停止编码，等待一个明显的大红色编译错误。

下次你开始工作时，这个错误实际上会帮助你记住你到底在做什么。

当你在处理小问题时，大局就清晰了，然后你就可以继续设计了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-24T09:01:17.593

用这么短的时间开发是困难的，但你仍然可以在那个时候得到一些东西。单元测试就是其中之一。写下一个类的接口是另一回事。虽然编写真正的东西需要更多时间，但这些任务本质上是不费吹灰之力的，它们只是打字练习。

所以，我的建议是：专注于不需要思考和集中注意力，并且可以在你拥有的时间跨度内完成的小任务。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-24T09:03:13.953

从来没有为我工作过，宠物项目通常太有趣了，我最终会工作到深夜或周末。

我建议重新考虑你的优先事项——如果你所有可用的时间都是深夜一小时，也许最好把它花在游戏、文章等上。或者只是闲逛。当你有更多的时间时，比如说一个慵懒的星期天，把所有的时间都花在一次上，真正体会到完成一些宠物项目应该给出的事情的感觉。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-24T16:11:37.527

以下是我在工作之余对个人项目所做的事情：

*   1）我试图通过在纸上计划给自己一个好的项目地图。我绘制所有对象、数据结构和/或 SQL 表的图表，并确定这些组件之间需要哪些基本功能和交互。如果解决方案很明显，我可能会在此阶段编写一些实际代码，但通常不会。
*   2）一旦有了大局，我就会优先考虑最基本和最关键的元素。我还试图找出哪些部分比其他部分更容易编写。
*   3）确定优先级后，我首先开始处理最简单和最关键的部分，然后逐渐向更复杂和不太重要的部分工作。将每项任务分解成更小的部分往往会有所帮助。例如，我可能首先设计一个数据库表，然后在第二天创建一个控制与该表交互的数据接口类。
*   4) 单元测试确实让我有成就感，即使 30 分钟的努力只产生了几行高质量的代码。
*   5) 保留更改日志，即使它不是很详细。如果我在很长一段时间内以多次短时间的方式从事一个大型项目，我发现我的变更日志非常宝贵。

这些步骤对我帮助最大。最后，我能够确定通常可以在大约 30-60 分钟内完成的项目的小块。当然，随着项目的发展，当我发现我在计划阶段遗漏了一些东西时，我通常不得不重新评估一些东西并回到开始一段时间。有时我需要走得更远一些，给自己一个时间表和一些截止日期，并确保我用个人奖励来庆祝里程碑。如果你有熬夜到凌晨的倾向，这让我很挣扎，我也建议给自己一个编码宵禁。我还尝试确保我的“编码计算机”上没有太多干扰，例如游戏。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-24T16:46:34.557

总是有一个错误。如果没有，您可以添加一个更简洁的功能，这将添加更多错误。这就是为什么我认为在（或使用）IT 中的任何人使用“你必须做的一切......”这个短语应该是一种悬而未决的冒犯的原因之一。

我可以通过做一些琐碎的事情来减少我的编码会话的持续时间，在远离键盘的时候思考事情（最好淋浴 - 或者在凌晨 4 点在床上）以及使用脚本语言等轻量级环境，但是“快速”的编码课程是我很久以前就放弃的希望了。

只是将精神齿轮转移到编码模式需要时间，捡起我以前的线索需要时间，发现我的“快速简便的解决方案”不是上述任何一种都需要时间。*修复*我的“快速简单的解决方案需要时间，调试 - 更多时间，等等。

# nhibernate - 如何在 NHibernate 会话后插入 NHibernate DB

> ID：785039
> 
> 赞同：0
> 
> 时间：2009-04-24T08:54:04.147
> 
> 标签：nhibernate

假设我在 NHibernate 数据库更新中遇到错误，并且当抛出这样的异常时，我想再次通过 NHibernate 将其记录到数据库的日志表中。

[现在，由于在抛出异常后](https://stackoverflow.com/questions/493660/nhibernate-handling-an-itransaction-exception-so-that-new-transactions-can-conti/501727#501727)我无法重用 NHibernate 会话，所以当我登录到日志表时会出现错误。如何最好地处理这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-24T09:21:35.203

打开一个新会话。

或者使用带有 ADO.NET appender 的 log4net 之类的日志框架，并在 NHibernate 环境之外完全独立地完成它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-24T09:22:09.523

IMO 日志记录应该是您应用程序的[交叉关注](http://en.wikipedia.org/wiki/Cross-cutting_concern)点。您不应该尝试重复使用相同的会话来记录错误。NHibernate 已经使用[log4net](http://logging.apache.org/log4net/index.html)。您只需要配置一个将日志写入 SQL 数据库的附加程序。

# java - OutOfMemoryError - 为什么不能对等待的线程进行垃圾收集？

> ID：785044
> 
> 赞同：5
> 
> 时间：2009-04-24T08:55:16.563
> 
> 标签：java, multithreading, garbage-collection, out-of-memory

这个简单的示例代码演示了这个问题。我创建了一个`ArrayBlockingQueue`, 和一个线程，该线程使用`take()`. 循环结束后，理论上队列和线程都可以被垃圾回收，但实际上我很快就会得到一个`OutOfMemoryError`. 是什么阻止了这被 GC'd，以及如何解决这个问题？

```
/**
 * Produces out of memory exception because the thread cannot be garbage
 * collected.
 */
@Test
public void checkLeak() {
    int count = 0;
    while (true) {

        // just a simple demo, not useful code.
        final ArrayBlockingQueue<Integer> abq = new ArrayBlockingQueue<Integer>(2);
        final Thread t = new Thread(new Runnable() {
            @Override
            public void run() {
                try {
                    abq.take();
                } catch (final InterruptedException e) {
                    e.printStackTrace();
                }
            }
        });
        t.start();

        // perform a GC once in a while
        if (++count % 1000 == 0) {
            System.out.println("gc");
            // this should remove all the previously created queues and threads
            // but it does not
            System.gc();
        }
    }
} 
```

我正在使用 Java 1.6.0。

更新：在几次迭代后执行 GC，但这无济于事。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-24T12:57:02.503

Threads are top level objects. They are 'special' so they do not follow the same rules as other objects. The do not rely on references to keep them 'alive' (i.e. safe from GC). A thread will not get garbage collected until it has ended. Which doesn't happen in your sample code, since the thread is blocked. Of course, now that the thread object is not garbage collected, then any other object referenced by it (the queue in your case) also cannot be garbage collected.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-24T09:08:07.983

您正在无限期地创建线程，因为它们都阻塞，直到`ArrayBlockingQueue<Integer> abq`有一些条目。所以最终你会得到一个`OutOfMemoryError`.

**（编辑）**

您创建的每个线程将永远不会结束，因为它会阻塞直到`abq`队列作为一个条目。如果线程正在运行，GC 不会收集线程引用的任何对象，包括队列`abq`和线程本身。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-24T09:20:50.120

```
abq.put(0); 
```

应该可以节省您的时间。

你的线程都在他们的队列上等待，`take()`但你从来没有在这些队列中放任何东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-24T09:03:03.407

您启动线程，因此所有这些新线程将在循环继续创建新线程时异步运行。

由于您的代码已锁定，因此线程是系统中的生命引用，无法收集。但是，即使它们正在做一些工作，线程也不太可能像创建它们一样快地终止（至少在此示例中），因此 GC 无法收集所有内存并最终会因 OutOfMemoryException 而失败。

创建尽可能多的线程既不高效也不高效。如果不需要让所有这些挂起的操作并行运行，您可能需要使用线程池和可运行的队列来处理。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-24T09:09:20.663

您的 while 循环是一个无限循环，它会不断创建新线程。尽管您在创建线程后立即开始执行线程，但是线程完成任务所花费的时间大于创建线程所花费的时间。

通过在while循环中声明abq参数还有什么作用？

根据您的编辑和其他评论。System.gc() 不保证 GC 周期。阅读我上面的语句，您的线程的执行速度低于创建速度。

我检查了 take() 方法的注释“检索并删除此队列的头部，如果此队列上不存在任何元素，则等待。” 我看到您定义了 ArrayBlockingQueue 但您没有向其中添加任何元素，因此您的所有线程都只是在等待该方法，这就是您获得 OOM 的原因。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-24T09:38:55.273

我不知道线程是如何在 Java 中实现的，但一个可能的原因是为什么不收集队列和线程：线程可能是使用系统同步原语的系统线程的包装器，在这种情况下 GC 无法自动收集等待线程，因为它无法判断线程是否处于活动状态，即 GC 根本不知道线程不能被唤醒。

我不能说修复它的最佳方法是什么，因为我需要知道您要做什么，但是您可以查看 java.util.concurrent 以查看它是否具有执行所需操作的类。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-24T09:44:06.663

该`System.gc`调用什么也不做，因为没有什么可收集的。当线程启动时，它会增加线程引用计数，不这样做将意味着线程将不确定地终止。当线程的 run 方法完成时，线程的引用计数会减少。

```
while (true) {
    // just a simple demo, not useful code.
    // 0 0 - the first number is thread reference count, the second is abq ref count
    final ArrayBlockingQueue<Integer> abq = new ArrayBlockingQueue<Integer>(2);
    // 0 1
    final Thread t = new Thread(new Runnable() {
        @Override
        public void run() {
            try {
                abq.take();
                // 2 2
            } catch (final InterruptedException e) {
                e.printStackTrace();
            }
        }
    });
    // 1 1
    t.start();
    // 2 2 (because the run calls abq.take)
    // after end of loop
    // 1 1 - each created object's reference count is decreased
} 
```

现在，有一个潜在的竞争条件——如果主循环终止并在线程 t 有机会进行任何处理之前进行垃圾收集，即它在执行 abq.take 语句之前被操作系统挂起怎么办？run 方法会在 GC 释放后尝试访问 abq 对象，这很糟糕。

To avoid the race condition, you should pass the object as a parameter to the run method. I'm not sure about Java these days, it's been a while, so I'd suggest passing the object as a constructor parameter to a class derived from `Runnable`. That way, there's an extra reference to abq made before the run method is called, thus ensuring the object is always valid.

# subsonic - 扩展亚音速发生器

> ID：785046
> 
> 赞同：0
> 
> 时间：2009-04-24T08:56:17.120
> 
> 标签：subsonic

是否可以在不修改代码的情况下扩展 SubSonic 生成器？我想添加我自己的自定义方法，我可以在模板中使用。类似于 Utility.GetVariableType 方法的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-24T21:38:57.663

您不能*扩展*内置模板，但您可以用您自己的模板*替换它们，而无需更改 SubSonic.dll。*在此处查看 templateDirectory 参数：http: [//subsonicproject.com/docs/Generated_Classes/#Customizing_Active_Record](http://subsonicproject.com/docs/Generated_Classes/#Customizing_Active_Record)

一个[示例配置](http://subsonic.wekeroad.com/docs/Setting_up_SubSonic_2.x)是：

```
<SubSonicService defaultProvider="Northwind" enableTrace="true"
    templateDirectory="C:\Program Files\SubSonic\SubSonic 2.0.3\Templates\MVC">
    <providers>
      <clear/>
      <add name="Northwind" type="SubSonic.SqlDataProvider, SubSonic"
       connectionStringName="Northwind" generatedNamespace="Northwind"/>
    </providers>
  </SubSonicService> 
```

[您可以从此处](https://github.com/subsonic/SubSonic-2.0/tree/master/SubSonic/CodeGeneration/Templates)获取当前版本的内置 ActiveRecord 模板。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-29T13:35:17.003

我找到了解决我自己问题的方法:)。
我现在可以在模板中使用我需要的功能扩展 SubSonic，而无需重建或更改任何 SubSonic 代码本身。
它适用于我想做的事情，我认为它对其他人也有用，所以这里是：

1.  创建一个新的类库 SubSonicHelper。我的课程看起来像这样：

    ```
    using System;
    using System.Collections.Generic;
    using System.Text;

    namespace Helpers.SubSonic
    {
        public class GeneratorHelper
        {
            public bool IsColumnAllowed(string columnName)
            {
                return columnName.Length == 1 ||
                       (columnName.Length > 1 && 
                       (!(columnName[0].ToString().Equals("_") && 
                       columnName[columnName.Length - 1].ToString().Equals("_"))))
            }
        }
    } 
    ```

2.  构建程序集并将 SubSonicHelper.dll 复制到您的 subsonic 项目。
3.  使用 templateDirectory 参数设置您的 SubSonic 项目以使用您自己的模板。
4.  编辑您自己的模板，然后在以下`const bool showGenerationInfo = false;`

    ```
    System.Reflection.Assembly a = System.Reflection.Assembly.LoadFile(
        System.IO.Path.Combine(System.IO.Directory.GetCurrentDirectory(), "SubSonicHelper.dll"));
    object instance = a.CreateInstance("Helpers.SubSonic.GeneratorHelper");
    Type type = instance.GetType(); 
    ```

在此之后，您将拥有一个可以在模板中使用的 GeneratorHelper 实例。要访问这些方法，您需要执行以下操作：

1.  为要使用的方法的参数创建一个对象数组。我将 columnName 参数设置为 col.propertyName。这是在 Update 方法中的 foreach (TableSchema.TableColumn col in cols) 循环内。
2.  使用对象数组作为参数调用要使用的方法。
3.  检查结果对象以查看方法的结果。

    ```
    object[] arg = new object[]{col.PropertyName};
    object isColumnAllowedResult = type.InvokeMember("IsColumnAllowed", System.Reflection.BindingFlags.Default | System.Reflection.BindingFlags.InvokeMethod, null, instance, arg);
    if (Convert.ToBoolean(isColumnAllowedResult)) 
    ```

就是这样！现在我可以用我想在模板中使用的其他方法来扩展 SubSonicHelper 类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-24T15:08:55.090

最简洁的答案是不。如果您想出一些有用的东西，请提交一个补丁，它可能会集成到核心中。您可以在此处提交补丁：[http ://code.google.com/p/subsonicproject/issues/list](http://code.google.com/p/subsonicproject/issues/list)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-24T16:20:05.200

你不能在模板中导入dll吗？
比如
<%@ Import namespace="NewHelpers.Utilities"%>
然后调用函数或者创建对象的实例

# c# - 在 C# 中最小化所有打开的窗口

> ID：785054
> 
> 赞同：16
> 
> 时间：2009-04-24T09:00:29.873
> 
> 标签：c#, .net, window, minimize

我在一个论坛上看到了这个 C++ 代码，它最小化了所有打开的窗口

```
#define MIN_ALL        419
#define MIN_ALL_UNDO   416

int main(int argc, char* argv[])
{
    HWND lHwnd = FindWindow("Shell_TrayWnd",NULL);
    SendMessage(lHwnd,WM_COMMAND,MIN_ALL,0);
    Sleep(2000);
    SendMessage(lHwnd,WM_COMMAND,MIN_ALL_UNDO,0);
    return 0;
} 
```

如何在 C#.net 中访问 FindWindow 和 SendMessage API 函数和 HWND 类型？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2009-04-24T09:15:43.673

PInvoke.net 是你的朋友 :-)

```
using System;
using System.Runtime.InteropServices;

namespace ConsoleApplication1 {
class Program {
    [DllImport("user32.dll", EntryPoint = "FindWindow", SetLastError = true)]
    static extern IntPtr FindWindow(string lpClassName, string lpWindowName);
    [DllImport("user32.dll", EntryPoint = "SendMessage", SetLastError = true)]
    static extern IntPtr SendMessage(IntPtr hWnd, Int32 Msg, IntPtr wParam, IntPtr lParam);

    const int WM_COMMAND = 0x111;
    const int MIN_ALL = 419;
    const int MIN_ALL_UNDO = 416;

    static void Main(string[] args) {
        IntPtr lHwnd = FindWindow("Shell_TrayWnd", null);
        SendMessage(lHwnd, WM_COMMAND, (IntPtr)MIN_ALL, IntPtr.Zero); 
        System.Threading.Thread.Sleep(2000);
        SendMessage(lHwnd, WM_COMMAND, (IntPtr)MIN_ALL_UNDO, IntPtr.Zero);
    }
}
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-24T09:06:56.800

www.pinvoke.net 网站有很多您需要的信息。例如，这篇关于 SendMessage 和 FindWindow 的文章：

[http://www.pinvoke.net/default.aspx/user32.SendMessage](http://www.pinvoke.net/default.aspx/user32.SendMessage) [http://www.pinvoke.net/default.aspx/user32.FindWindow](http://www.pinvoke.net/default.aspx/user32.FindWindow)

这是相当技术性的——当然——但基本上你使用 p/invoke 来调用 FindWindow 和 SendMessage API 函数来完成你想要的。=)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-24T09:11:35.603

我之前写过关于如何使用 C# 中的 P/Invoke 最小化和最大化的博客：http: [//improve.dk/minimizing-and-maximizing-windows/](http://improve.dk/minimizing-and-maximizing-windows/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-24T09:08:34.050

不完全是最简单的方法，但手动方法是调用 C++ 实现。 [http://pinvoke.net](http://pinvoke.net)帮助：

findwindow 搜索结果： [http://pinvoke.net/search.aspx?search=findwindow&namespace=[All]](http://pinvoke.net/search.aspx?search=findwindow&namespace=[All])

大约第四个结果对您的情况有所帮助。

# python - Python 2.6 中的随机字符串（可以吗？）

> ID：785058
> 
> 赞同：77
> 
> 时间：2009-04-24T09:01:29.760
> 
> 标签：python, random, python-2.6

我一直在尝试找到一种更 Pythonic 的方式来在 python 中生成随机字符串，它也可以扩展。通常，我看到类似于

```
''.join(random.choice(string.letters) for i in xrange(len)) 
```

如果你想生成长字符串，那就太糟糕了。

我一直在考虑 random.getrandombits ，并弄清楚如何将其转换为位数组，然后对其进行十六进制编码。使用 python 2.6 我遇到了未记录的 bitarray 对象。不知何故，我让它工作了，它似乎真的很快。

它会在大约 3 秒内在我的笔记本上生成一个 5000 万个随机字符串。

```
def rand1(leng):
    nbits = leng * 6 + 1
    bits = random.getrandbits(nbits)
    uc = u"%0x" % bits
    newlen = int(len(uc) / 2) * 2 # we have to make the string an even length
    ba = bytearray.fromhex(uc[:newlen])
    return base64.urlsafe_b64encode(str(ba))[:leng] 
```

* * *

**编辑**

heikogerlach 指出是奇数个字符导致了这个问题。添加了新代码以确保它始终从十六进制发送偶数个十六进制数字。

仍然很好奇是否有更好的方法来做到这一点同样快。

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2009-04-24T09:09:39.070

```
import os
random_string = os.urandom(string_length) 
```

如果您需要 url 安全字符串：

```
import os
random_string = os.urandom(string_length).hex() 
```

（注意在这种情况下 random_string 长度大于 string_length ）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-31T15:32:38.360

有时 uuid 足够短，如果你不喜欢破折号，你可以随时.replace('-', '') 他们

```
from uuid import uuid4

random_string = str(uuid4()) 
```

如果你想要一个没有破折号的特定长度

```
random_string_length = 16
str(uuid4()).replace('-', '')[:random_string_length] 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-04-24T17:04:55.170

摘自 Python.org 上的[1023290](http://bugs.python.org/issue1023290)错误报告：

```
junk_len = 1024
junk =  (("%%0%dX" % junk_len) % random.getrandbits(junk_len *
8)).decode("hex") 
```

另请参阅问题[923643](http://bugs.python.org/issue923643)和[1023290](http://bugs.python.org/issue1023290)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-24T09:09:45.420

似乎该`fromhex()`方法需要偶数个十六进制数字。您的字符串长度为 75 个字符。请注意，`something[:-1]` *不包括*最后一个元素！只需使用`something[:]`.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-06-02T13:24:54.330

关于最后一个示例，无论 junk_len 值如何，以下修复以确保该行是偶数长度：

```
junk_len = 1024
junk =  (("%%0%dX" % (junk_len * 2)) % random.getrandbits(junk_len * 8)).decode("hex") 
```

# objective-c - 什么最能描述@property(.....)？这究竟有什么好处？

> ID：785059
> 
> 赞同：0
> 
> 时间：2009-04-24T09:01:41.663
> 
> 标签：objective-c

我想知道的是，它标志着一个属性“公共”。它会自动创建 setter 和 getter。但是当我没有那个时，我的财产是私有的吗？

这种“技术”叫什么名字？为什么“属性”前面有一个@？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-24T11:12:42.910

@property () type prop_name 只是一个信号给编译器创建两个方法：

-（类型）道具名称；

和

-（无效）setPropName；// 不是为只读属性创建的

在 Objective-C 中，所有方法都是公开的。这就是为什么所有属性也是公开的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-24T09:05:32.480

我的理解是属性的@infront 使它成为编译器指令。它告诉编译器做一些事情。在这种情况下，它创建告诉编译器如何为成员变量创建 getter 和 setter 方法。当然，您可以手动执行此操作，但这是为了让编译器可以为您执行此操作。

# linq - 使用 LINQ 在单个查询中插入 2 个表

> ID：785068
> 
> 赞同：2
> 
> 时间：2009-04-24T09:04:11.533
> 
> 标签：linq

我需要在一个查询中插入两个表。这可以在 LINQ 中完成吗？

目前我正在使用 insertonsubmit() 2次。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-24T09:13:55.630

如果您的表彼此之间具有主键/外键关系，那么您还有两个可以相互链接的对象：

```
InternetStoreDataContext db = new InternetStoreDataContext(); 

Category c = new Category();
c.name = "Accessories";
Product p = new Product();
p.name = "USB Mouse";
c.Products.Add(p);

//and finally
db.Categories.Add(c);
db.SubmitChanges(); 
```

这会在提交更改时添加您的对象和所有链接的对象。

请注意，要使其正常工作，您必须在两个表中都有一个主键。否则 LINQ 不会为您提供链接的可能性。

以下是使用 LINQ to SQL 的好例子：[http ://weblogs.asp.net/scottgu/archive/2007/05/19/using-linq-to-sql-part-1.aspx](http://weblogs.asp.net/scottgu/archive/2007/05/19/using-linq-to-sql-part-1.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-24T09:13:44.380

数据库提交直到您调用`SubmitChanges`. 多次调用没有相关的有形成本`InsertOnSubmit`- 那么为什么不这样做呢？

这仍然会导致两个 TSQL`INSERT`命令 - 根本不可能在单个常规`INSERT`命令中插入两个表。

# webdav - Exchange Web 服务 vrs WebDAV

> ID：785070
> 
> 赞同：2
> 
> 时间：2009-04-24T09:04:50.347
> 
> 标签：webdav, exchangewebservices

有哪些学习 Exchange Web 服务的好资源？

我熟悉 WebDAV，并且想知道 Exchange Web 服务是否更适合我们与 Exchange 进行的某些集成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-24T09:56:45.713

几周前，我为 Exchange 2007 编写了一个包装库。

我发现 greg 的博客很不错。 [http://gsexdev.blogspot.com/index.html](http://gsexdev.blogspot.com/index.html)

然后我还发现以下代码项目文章非常有帮助。 [http://www.codeproject.com/KB/exchange/Exchange2007EWS-Part1.aspx](http://www.codeproject.com/KB/exchange/Exchange2007EWS-Part1.aspx)

祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-12-14T19:12:56.390

David Sterling 有一本关于该主题的书，名为[Inside Microsoft Exchange Server 2007 Web Services](https://rads.stackoverflow.com/amzn/click/com/0735623929)。

[书籍封面 http://ecx.images-amazon.com/images/I/51TFbqF1CrL._SL75_.jpg](http://ecx.images-amazon.com/images/I/51TFbqF1CrL._SL75_.jpg)

我发现它在了解 Exchange Web 服务（又名 EWS）方面非常有用。

最近，微软发布了 EWS 的客户端计数器部分，称为 EWS Managed API。它提供了比通过 Visual Studio 代理类生成器生成的 API 更友好的 API。它可以在[http://www.microsoft.com/downloads/details.aspx?displaylang=en&FamilyID=c3342fb3-fbcc-4127-becf-872c746840e1](http://www.microsoft.com/downloads/details.aspx?displaylang=en&FamilyID=c3342fb3-fbcc-4127-becf-872c746840e1)下载，文档可以在[http://msdn.microsoft.com/找到en-us/library/dd633709(EXCHG.80).aspx](http://msdn.microsoft.com/en-us/library/dd633709(EXCHG.80).aspx)

不幸的是，上述书籍并未涵盖 EWS 托管 API，因为该 API 是在本书之后发布的。

在研究 Exchange 内容时，我发现一些有用的博客：

*   [丹的 WebDAV 101](http://blogs.msdn.com/webdav_101/default.aspx)
*   [Exchange API 发现](http://blogs.msdn.com/exchangedev/default.aspx)
*   [mstehle：消息传递开发的 CDO 和 CDONTS](http://blogs.msdn.com/mstehle/default.aspx)
*   [SGriffin 的 MAPI 内部结构](http://blogs.msdn.com/stephen_griffin/default.aspx)
*   [进入消息世界](http://blogs.msdn.com/vikas/default.aspx)
*   [你让我在 EHLO](http://msexchangeteam.com/default.aspx)

尽管它们中的大多数都不是专门针对 EWS 的，但我发现了一些有趣的信息，它们以某种方式或另一种方式对处理所有 EWS 有用。

# perl - 如何从 Perl 获得 Apple 机场的速度？

> ID：785075
> 
> 赞同：2
> 
> 时间：2009-04-24T09:06:09.470
> 
> 标签：perl, macos, networking

我希望能够在 Mac OS X 下获得无线接口的速度。我有一个 perl 脚本可以获取无线网卡的其他信息，但我仍然需要获得连接速度。

目前我已经静态设置了机场速度： $airport_rate = "54"; （见下面的代码）。

我可以使用什么命令来获取内置机场卡的速度，或者我在下面的代码中缺少什么。谢谢

**编辑：此代码现在有效。谢谢。** 脚本的示例输出：

> ```
> ETHERNET IP    : 192.168.2.7
> AIRPORT  IP    : 192.168.2.4
> AIRPORT STATUS : CONNECTED
>         SSID   : Forcefield
>         RATE   : 54 Mb/s 
> ```

```
#!/usr/bin/perl                                                                                                         
# a little script to get your network status                                                                            

$en0_info = `ifconfig en0 | grep "inet" | grep -v 127.0.0.1`;
$en1_info = `ifconfig en1 | grep "inet" | grep -v 127.0.0.1`;
$airport_info = `/System/Library/PrivateFrameworks/Apple80211.framework/Versions/Current/Resources/airport -I`;

if($en0_info)
{
    $en0_info =~ /inet (.*) netmask/s;
    $output .= "ETHERNET IP    : $1\n";
}
else
{ $output .= "ETHERNET IP    : INACTIVE\n"; }

if($en1_info)
{
    $en1_info =~ /inet (.*) netmask/s;
    $en1_info = $1;
    $airport_info =~ /lastTxRate: (\d\d\d)/s;
    $airport_rate = $1;
    $airport_info =~ /BSSID(.*?)SSID: (.*?)\n/s;
    $airport_SSID = $2;
    $output .= "AIRPORT  IP    : $en1_info\n";
    $output .= "AIRPORT STATUS : CONNECTED\n";
    $output .= "        SSID   : $airport_SSID\n";
    $output .= "        RATE   : $airport_rate Mb/s\n";
}
else
{
    $output .= "AIRPORT STATUS : INACTIVE\n";
}

print "$output"; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-24T10:53:16.107

我惊讶地发现这不是微不足道的。但是，快速应用 Yahoo! 搜索找到了一个指向“机场”命令行脚本的指针，看起来它会给你想要的答案。请参阅[http://osxdaily.com/2007/01/18/airport-the-little-known-command-line-wireless-utility/](http://osxdaily.com/2007/01/18/airport-the-little-known-command-line-wireless-utility/)

简而言之，`/System/Library/PrivateFrameworks/Apple80211.framework/Versions/Current/Resources/airport -I`会给你你所寻求的。而且它似乎也不需要root privs。

# python - 获取 Python 系统调用作为字符串结果

> ID：785078
> 
> 赞同：6
> 
> 时间：2009-04-24T09:07:29.840
> 
> 标签：python

我想使用`os.system("md5sum myFile")`并从 os.system 返回结果，而不是仅仅在一个子shell中运行它的回显。

简而言之，我想这样做：

```
resultMD5 = os.system("md5sum myFile") 
```

并且只有 resultMD5 中的 md5sum 而没有回显。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-24T09:24:52.013

[`subprocess`](http://docs.python.org/library/subprocess.html)比使用`os.system`或更好`os.popen`

```
import subprocess
resultMD5 = subprocess.Popen(["md5sum","myFile"],stdout=subprocess.PIPE).communicate()[0] 
```

[`hashlib`](http://docs.python.org/library/hashlib.html)或者只是使用模块自己计算 md5sum 。

```
import hashlib
resultMD5 = hashlib.md5(open("myFile").read()).hexdigest() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-24T09:11:23.560

您可能应该使用 subprocess 模块作为 os.system 的替代品。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-24T09:30:17.260

```
import subprocess

p = subprocess.Popen("md5sum gmail.csv", shell=True, stdout=subprocess.PIPE)
resultMD5, filename = p.communicate()[0].split()
print resultMD5 
```

# asp.net - ASP.NET 新手

> ID：785081
> 
> 赞同：2
> 
> 时间：2009-04-24T09:08:10.447
> 
> 标签：asp.net

我想学习 ASP.Net，我只是一个初学者。我之前做过一些windows c# forms开发，但没有web开发经验。

我查看了 ASP.net 网站，但除此之外，是否有人对良好的学习资源有任何想法，特别是与 Windows 开发的差异有关。例如，在 ASP 和 Windows 窗体下，事件的工作方式似乎完全不同。

谢谢大家。

非常感谢你。我将看看MVC。它看起来更复杂，但如果事情是这样发展的，那么我最好把我的学习投入到这方面。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-24T09:14:33.380

在 ASP.NET 生命的这个阶段，我建议您将注意力转向 ASP.NET-MVC。这个网址 [http://www.asp.net/mvc/](http://www.asp.net/mvc/)是一个很好的学习资源。

ASP.NET Forms 很好地隐藏了基于 HTTP/浏览器的无连接技术的本质，并提供了一个熟悉的 Form，其中包含 Windows Forms 开发人员习惯的控件和许多有用的事件环境。

然而，这种方法是有代价的。对于任何严肃的项目，都无法避免深入了解 ASP.NET 表单并正确理解底层技术。此时，您开始意识到 ASP.NET Forms 必须做出重大妥协才能让 Windows Forms 开发人员有宾至如归的感觉。

另一方面，ASP.NET-MVC 没有做出这样的妥协。学习 MVC 意味着提前了解 HTTP 的工作原理。它还具有作为一种对测试更友好的方法的优点，如果使用得当，它将为您节省数天的调试时间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-24T09:10:23.093

[ASP.NET 网站](http://www.asp.net/get-started/)- 说真的，这是一个非常好的资源。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-24T09:15:15.390

我会认真考虑从 ASP.NET MVC 开始。你最终会从 ASP.NET “经典”中学到你需要的东西，但你会学到 MVC 的所有优点（可测试性、代码中的关注点分离等），而不是学习坏习惯。

Google 搜索“ASP.NET MVC”，查看[ScottGu 的博客](http://weblogs.asp.net/scottgu/)，[Scott Hanselmans 的博客](http://www.hanselman.com/blog/)，或在 StackOverflow 中搜索 ASP.NET MVC（也使用 ASP.NET MVC 标签）。

一个很好的起点...

[http://weblogs.asp.net/scottgu/archive/2009/04/01/asp-net-mvc-1-0.aspx](http://weblogs.asp.net/scottgu/archive/2009/04/01/asp-net-mvc-1-0.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-24T09:14:19.123

我知道它们有点过时了，但我仍然认为 Fritz Onion 的两本书很好地了解了 ASP.NET 的幕后情况。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-24T09:15:44.720

一些资源：

[asp.net](http://asp.net)（正如你提到的）

[频道9](http://channel9.msdn.com/)

[scott hanselman 的博客](http://www.hanselman.com/blog/)（一些有用的条目）

[Windows 客户端主页](http://windowsclient.net/)

[W3Schools 教程](http://www.w3schools.com/ASPNET/default.asp)（不仅仅对 .NET 有用，但这是 .NET 页面）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-24T21:21:16.177

我已经是 .NET Windows 窗体（不是 Web 窗体）开发人员一年半了。然后我换了工作，开始使用 WebForms 大约 2 年。然后我发现了 ASP.NET MVC（2008 年 1 月），从那时起，虽然我仍然掌握 ASP.NET WebForms，但我总是更喜欢 ASP.NET MVC。

我的建议也适用于 ASP.NET MVC。您将必须学习 HTTP、HTML 和一些 Javascript，但在这些之后，您将掌握**所有平台**上的 Web 开发。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2011-03-08T23:15:25.283

ASP.NET MVC 的一个很好的替代方法是使用 Razor 语法的 ASP.NET 网页。事实上，最新版本的 ASP.NET MVC 和最新版本的 ASP.NET 网页都使用相同的视图引擎。

这是完整的 ASP.NET 网页书籍的链接：
[WebMatrix 和 ASP.NET 网页入门](http://www.asp.net/webmatrix/tutorials/1-getting-started-with-webmatrix-and-asp-net-web-pages)

此外，这里是完整的 WebMatrix 内容指南：
[WebMatrix 内容指南](http://www.asp.net/webmatrix/content-guide)

描述如下： WebMatrix 是一套免费的、轻量级的 Web 开发工具，它提供了构建网站的最简单方法。它包括 IIS Express（开发 Web 服务器）、ASP.NET（Web 框架）和 SQL Server Compact（嵌入式数据库）。它还包括一个简单的工具，可以简化网站开发，并可以轻松地从流行的开源应用程序启动网站。您使用 WebMatrix 开发的技能和代码可以无缝过渡到 Visual Studio 和 SQL Server。

# java - Java 字符串上 hashCode() 的一致性

> ID：785091
> 
> 赞同：142
> 
> 时间：2009-04-24T09:11:04.903
> 
> 标签：java, string, hashcode

Java String 的 hashCode 值计算为 ( [String.hashCode()](http://java.sun.com/javase/6/docs/api/java/lang/String.html#hashCode()) )：

```
s[0]*31^(n-1) + s[1]*31^(n-2) + ... + s[n-1] 
```

是否有任何情况（比如 JVM 版本、供应商等）以下表达式的计算结果为 false？

```
boolean expression = "This is a Java string".hashCode() == 586653468 
```

**更新＃1：**如果您声称答案是“是的，存在这种情况” - 那么请给出一个具体示例，说明何时“这是一个 Java 字符串”.hashCode() ！= 586653468。尽量做到具体/具体尽可能。

**更新#2：**我们都知道依赖 hashCode() 的实现细节通常是不好的。但是，我专门讨论的是 String.hashCode() - 所以请让答案集中在 String.hashCode() 上。Object.hashCode() 在这个问题的上下文中完全不相关。

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2009-04-24T09:25:04.463

我可以看到早在 Java 1.2 的文档。

虽然确实*通常*您不应该依赖保持不变的哈希码实现，但它现在已记录在案的行为`java.lang.String`，因此更改它将被视为违反现有合同。

只要有可能，您不应该依赖在不同版本等之间保持相同的哈希码 - 但在我看来，这`java.lang.String`是一个特殊情况，仅仅是因为已经指定了算法*......*只要您愿意放弃与之前版本的兼容性当然，算法是指定的。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2009-04-24T12:17:35.907

我发现了一些关于 JDK 1.0 和 1.1 和 >= 1.2 的信息：

> 在 JDK 1.0.x 和 1.1.x 中，长字符串的 hashCode 函数通过对每第 n 个字符进行采样来工作。这很好地保证了您将有许多字符串散列到相同的值，从而减慢了 Hashtable 查找。在 JDK 1.2 中，该函数得到了改进，将目前的结果乘以 31，然后按顺序添加下一个字符。这有点慢，但在避免碰撞方面要好得多。来源： http: [//mindprod.com/jgloss/hashcode.html](http://mindprod.com/jgloss/hashcode.html)

不同的东西，因为你似乎需要一个数字：使用 CRC32 或 MD5 代替哈希码怎么样，你很高兴 - 没有讨论，也没有后顾之忧......

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-04-24T09:16:12.207

您不应依赖等于特定值的哈希码。只是它将在同一执行中返回一致的结果。API 文档说以下内容：

> hashCode 的一般合约是：
> 
> *   每当在 Java 应用程序执行期间对同一个对象多次调用它时，hashCode 方法必须始终返回相同的整数，前提是没有修改对象上的 equals 比较中使用的信息。该整数不需要从应用程序的一次执行到同一应用程序的另一次执行保持一致。

**编辑** 由于 String.hashCode() 的 javadoc 指定了如何计算字符串的哈希码，因此任何违反此规定的行为都将违反公共 API 规范。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-04-24T09:23:31.423

如上所述，一般而言，您不应依赖保持相同的类的哈希码。请注意，即使*同一应用程序*在*同一 VM*上的后续运行也可能产生不同的哈希值。AFAIK Sun JVM 的散列函数在每次运行时计算相同的散列，但这并不能保证。

请注意，这不是理论上的。java.lang.String 的散列函数在 JDK1.2[中发生了变化](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4045622)（旧的散列在 URL 或文件名等分层字符串方面存在问题，因为它倾向于为仅在末尾不同的字符串生成相同的散列）。

java.lang.String 是一种特殊情况，因为它的 hashCode() 算法（现在）已记录在案，因此您可能可以依赖它。我仍然认为这是不好的做法。如果您需要具有特殊记录属性的哈希算法，只需编写一个 :-)。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-04-24T09:16:18.697

另一个需要担心的（！）问题是 Java 的早期/晚期版本之间的实现可能发生变化。我不相信实现细节是一成不变的，因此升级到*未来*的Java 版本可能会导致问题。

底线是，我不会依赖`hashCode()`.

也许您可以通过使用此机制突出显示您实际尝试解决的问题，这将突出显示更合适的方法。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-04-24T11:21:42.047

只是为了回答你的问题，而不是继续任何讨论。Apache Harmony JDK 实现似乎使用了不同的算法，至少看起来完全不同：

**孙 JDK**

```
public int hashCode() {
    int h = hash;
    if (h == 0) {
        int off = offset;
        char val[] = value;
        int len = count;

        for (int i = 0; i < len; i++) {
            h = 31*h + val[off++];
        }
        hash = h;
    }
    return h;
} 
```

**阿帕奇和谐**

```
public int hashCode() {
    if (hashCode == 0) {
        int hash = 0, multiplier = 1;
        for (int i = offset + count - 1; i >= offset; i--) {
            hash += value[i] * multiplier;
            int shifted = multiplier << 5;
            multiplier = shifted - multiplier;
        }
        hashCode = hash;
    }
    return hashCode;
} 
```

随意检查一下...

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-04-24T15:27:36.307

如果您担心更改和可能不兼容的 VM，只需将现有的 hashcode 实现复制到您自己的实用程序类中，然后使用它来生成您的 hashcodes 。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-07-03T06:05:19.597

哈希码将根据字符串中字符的 ASCII 值计算。

这是String类中的实现如下

```
public int hashCode() {
    int h = hash;
    if (h == 0 && value.length > 0) {
        hash = h = isLatin1() ? StringLatin1.hashCode(value)
                              : StringUTF16.hashCode(value);
    }
    return h;
} 
```

哈希码中的冲突是不可避免的。例如，字符串“Ea”和“FB”给出与 2236 相同的哈希码

# c++ - 如何在 C++ 中实现贝塞尔曲线？

> ID：785097
> 
> 赞同：20
> 
> 时间：2009-04-24T09:12:40.717
> 
> 标签：c++, math, interpolation, spline

我想实现一个[Bézier curve](http://en.wikipedia.org/wiki/B%C3%A9zier_curve)。我以前在 C# 中做过这个，但我对 C++ 库完全不熟悉。我应该如何创建二次曲线？

```
void printQuadCurve(float delta, Vector2f p0, Vector2f p1, Vector2f p2); 
```

显然我们需要使用线性插值，但这是否存在于标准数学库中？如果没有，我在哪里可以找到它？

我正在使用 Linux。

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2012-07-11T14:45:40.050

最近我遇到了同样的问题，想自己实现它。这张来自维基百科的图片帮助了我：

![http://upload.wikimedia.org/wikipedia/commons/3/35/Bezier_quadratic_anim.gif](https://i.stack.imgur.com/3oxFj.gif)

以下代码是用 C++ 编写的，展示了如何计算二次贝塞尔曲线。

```
int getPt( int n1 , int n2 , float perc )
{
    int diff = n2 - n1;

    return n1 + ( diff * perc );
}    

for( float i = 0 ; i < 1 ; i += 0.01 )
{
    // The Green Line
    xa = getPt( x1 , x2 , i );
    ya = getPt( y1 , y2 , i );
    xb = getPt( x2 , x3 , i );
    yb = getPt( y2 , y3 , i );

    // The Black Dot
    x = getPt( xa , xb , i );
    y = getPt( ya , yb , i );

    drawPixel( x , y , COLOR_RED );
} 
```

其中 (x1|y1)、(x2|y2) 和 (x3|y3) 分别为图像中的 P0、P1 和 P2。只是为了展示基本思想......

对于那些要求三次贝塞尔曲线的人，它只是模拟（也来自维基百科）：

![http://upload.wikimedia.org/wikipedia/commons/a/a3/Bezier_cubic_anim.gif](https://i.stack.imgur.com/gRzXb.gif)

[这个](https://stackoverflow.com/questions/37642168/how-to-convert-quadratic-bezier-curve-code-into-cubic-bezier-curve/37642695#37642695)答案为它提供了代码。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-02-08T06:45:32.343

这是具有任意数量点的曲线的一般实现。

```
vec2 getBezierPoint( vec2* points, int numPoints, float t ) {
    vec2* tmp = new vec2[numPoints];
    memcpy(tmp, points, numPoints * sizeof(vec2));
    int i = numPoints - 1;
    while (i > 0) {
        for (int k = 0; k < i; k++)
            tmp[k] = tmp[k] + t * ( tmp[k+1] - tmp[k] );
        i--;
    }
    vec2 answer = tmp[0];
    delete[] tmp;
    return answer;
} 
```

请注意，它使用堆内存作为临时数组，但效率并不高。如果您只需要处理固定数量的点，您可以硬编码 numPoints 值并改用堆栈内存。

当然，上面假设你有一个 vec2 结构和它的运算符，如下所示：

```
struct vec2 {
    float x, y;
    vec2(float x, float y) : x(x), y(y) {}
};

vec2 operator + (vec2 a, vec2 b) {
    return vec2(a.x + b.x, a.y + b.y);
}

vec2 operator - (vec2 a, vec2 b) {
    return vec2(a.x - b.x, a.y - b.y);
}

vec2 operator * (float s, vec2 a) {
    return vec2(s * a.x, s * a.y);
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2017-03-28T14:01:04.050

您可以选择 de Casteljau 的方法，即递归分割控制路径，直到使用线性插值到达该点，如上所述，或 Bezier 的方法，即混合控制点。

贝塞尔的方法是

```
 p = (1-t)^3 *P0 + 3*t*(1-t)^2*P1 + 3*t^2*(1-t)*P2 + t^3*P3 
```

对于立方和

```
 p = (1-t)^2 *P0 + 2*(1-t)*t*P1 + t*t*P2 
```

对于二次方。

t 通常在 0-1 上，但这不是必需的 - 实际上曲线延伸到无穷大。P0、P1 等是控制点。曲线经过两个端点，但通常不经过其他点。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-04-24T09:20:39.887

您之前是否使用过 C# 库？

在 C++ 中，没有可用的贝塞尔曲线标准库函数（目前）。您当然可以自己动手（CodeProject[示例](http://www.codeproject.com/KB/recipes/BezirCurves.aspx)）或寻找数学库。

[这篇](https://web.archive.org/web/20160304095548/http://blog.paultondeur.com/2008/03/09/drawing-a-cubic-bezier-curve-using-actionscript-3/)博文很好地解释了这个想法，但在 Actionscript 中。翻译应该不是什么大问题。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-05-30T23:46:27.533

`(x, y)`为了在给定的行程百分比下沿三次曲线获得一个单独的点`(t)`，给定的控制点`(x1, y1)`, `(x2, y2)`, `(x3, y3)`, 和`(x4, y4)`我扩展了 De Casteljau 的算法并重新排列方程以最小化指数：

```
//Generalized code, not C++
variables passed to function:   t,  x1, y1, x2, y2, x3, y3, x4, y4
variables declared in function: t2, t3, x,  y
t2 = t * t
t3 = t * t * t
x = t3*x4 + (3*t2 - 3*t3)*x3 + (3*t3 - 6*t2 + 3*t)*x2 + (3*t2 - t3 - 3*t + 1)*x1
y = t3*y4 + (3*t2 - 3*t3)*y3 + (3*t3 - 6*t2 + 3*t)*y2 + (3*t2 - t3 - 3*t + 1)*y1 
```

`(t)`是一个介于 0 和 1 之间的十进制值`(0 <= t <= 1)`，表示沿曲线行驶的百分比。

x 和 y 的公式相同，您可以编写一个函数，该函数采用一组通用的 4 个控制点或将系数组合在一起：

```
t2 = t * t
t3 = t * t * t

A = (3*t2 - 3*t3)
B = (3*t3 - 6*t2 + 3*t)
C = (3*t2 - t3 - 3*t + 1)

x = t3*x4 + A*x3 + B*x2 + C*x1
y = t3*y4 + A*y3 + B*y2 + C*y1 
```

对于二次函数，类似的方法产生：

```
t2 = t * t

A = (2*t - 2*t2)
B = (t2 - 2*t + 1)

x = t2*x3 + A*x2 + B*x1
y = t2*y3 + A*y2 + B*y1 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-24T09:33:22.260

*   如果您只想显示贝塞尔曲线，则可以使用[PolyBezier](http://msdn.microsoft.com/en-us/library/dd162811.aspx) for Windows 之类的东西。

*   如果您想自己实现该例程，您可以在 Intarnetz 各处找到[线性插值代码。](http://www.google.com/search?q=linear+interpolation+C%2B%2B)

*   我相信[Boost 库](http://boost.org)对此有支持。线性插值，而不是贝塞尔曲线。但是，不要引用我的话。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-03-26T08:00:24.947

我基于此示例[https://stackoverflow.com/a/11435243/15484522](https://stackoverflow.com/a/11435243/15484522)进行了实现，但对于任意数量的路径点

```
void bezier(int [] arr, int size, int amount) {
  int a[] = new int[size * 2];    
  for (int i = 0; i < amount; i++) {
    for (int j = 0; j < size * 2; j++) a[j] = arr[j];
    for (int j = (size - 1) * 2 - 1; j > 0; j -= 2) 
      for (int k = 0; k <= j; k++) 
        a[k] = a[k] + ((a[k+2] - a[k]) * i) / amount;
    circle(a[0], a[1], 3);  // draw a circle, in Processing
  }
} 
```

其中**arr**是点数组 {x1, y1, x2, y2, x3, y3... xn, yn}，**size**是点数（比数组大小小两倍），**amount**是输出点数。

为了获得最佳计算，您可以使用 2^n 数量和位移：

```
void bezier(int [] arr, int size, int dense) {
  int a[] = new int[size * 2];    
  for (int i = 0; i < (1 << dense); i++) {
    for (int j = 0; j < size * 2; j++) a[j] = arr[j];
    for (int j = (size - 1) * 2 - 1; j > 0; j -= 2) 
      for (int k = 0; k <= j; k++) 
        a[k] = a[k] + (((a[k+2] - a[k]) * i) >> dense);
    circle(a[0], a[1], 3);  // draw a circle, in Processing
  }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-07-10T08:46:49.257

这个[在 github 上的实现](https://github.com/Rezonality/mutils/blob/6adc3fa9d160f455092637032cb6fcd6162d0b93/include/mutils/math/math_utils.h#L124)展示了如何计算一个简单的三次贝塞尔曲线，“t”的值从 0->1 的正常值和正切值。它是维基百科上[公式的直接换位。](https://en.wikipedia.org/wiki/B%C3%A9zier_curve#Cubic_B%C3%A9zier_curves)

# html - HTML 中的 onBlur 和 onChange 属性有什么区别？

> ID：785099
> 
> 赞同：131
> 
> 时间：2009-04-24T09:13:03.477
> 
> 标签：html

什么时候调用一个与另一个？是否存在会调用 onChange 但不会调用 onBlur 的情况？

* * *

## 回答 #1

> 赞同：191
> 
> 时间：2009-04-24T09:15:12.927

`onBlur`当您离开对象而不必更改其值时，将触发该事件。

`onChange`仅当您更改字段的值并且它失去焦点时才会调用该事件。

您可能想看看[quirksmode 的事件介绍](http://www.quirksmode.org/js/introevents.html)。这是一个很好的地方，可以在您与浏览器交互时获取有关浏览器中正在发生的事情的信息。他的书也不错。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2009-05-16T23:33:59.950

onblur 在字段失去焦点时触发，而 onchange 在字段值更改时触发。然而，这些事件并不总是以相同的顺序发生。

在 Firefox 中，从已更改的字段中跳出会触发 onchange 然后 onblur，它通常会在 IE 中执行相同的操作。但是，如果您按 enter 键而不是 tab，在 Firefox 中它将触发 onblur 然后 onchange，而 IE 通常会按原始顺序触发。但是，我见过 IE 也会首先触发模糊的情况，所以要小心。您不能假设 onblur 或 onchange 将在另一个之前发生。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2009-04-24T09:19:50.280

一个使事情具体化的例子。如果您有这样的选择：

```
<select onchange="" onblur="">
  <option>....
</select> 
```

当`onblur()`您离开时调用。当`onchange()`您从选择中选择不同的选项时调用 —— 即您更改当前选择的内容。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-10-24T03:30:50.330

在 Firefox 中，仅当您在输入字段之外单击或单击时才会触发 onchange。Onblur 也是如此。不同之处在于，无论您是否更改了该字段中的任何内容，onblur 都会触发。ENTER 可能会触发其中一个或两个，但是如果您在表单中禁用 ENTER 以防止意外提交，您将不会知道这一点。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-04-24T09:17:32.953

`onBlur`是当您的注意力不再放在相关领域上时。

> 该`onblur`属性返回当前元素上存在的 onBlur 事件处理程序代码（如果有）。

`onChange`是字段的值发生变化的时候。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-02-19T10:43:04.137

我认为重要的是要注意这里`onBlur()`无论如何都会触发。

这是一个有用的线程，但唯一没有说明的是`onBlur()`每次都会触发。

`onChange()`只有当值改变时才会触发。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2009-04-24T09:15:36.437

onChange 是当字段中的某些内容发生更改时，例如，您在文本输入中写入某些内容。

onBlur 是当您将焦点从字段上移开时，例如，您正在输入文本并单击它。

所以实际上它们几乎是一样的，但 onChange 的行为方式与 onBlur 在该输入中所做的事情的方式需要改变。

# php - 在 PHP 中执行“foreach x except y”的最优雅的方法是什么？

> ID：785102
> 
> 赞同：7
> 
> 时间：2009-04-24T09:13:59.480
> 
> 标签：php, optimization, loops, foreach

我想做这样的事情：

```
foreach ($array as $key=>$value except when $key="id")
{
// whatever

} 
```

...无需在循环体中放置“if”子句。不能保证“id”将是数组中的第一个或最后一个元素，我真的不想取消设置或切片数组，因为这将是昂贵的、丑陋的，并且不能维护原始数据。我也绝对需要在循环中同时使用键和值。

有任何想法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-04-24T09:19:18.690

我认为 if 子句不是这样的问题：

```
foreach ($array as $key => $value) {
    if ($key == 'ignore_me') continue;
    if ($key == 'ignore_me_2') continue; 
```

如果你想要一个花哨的解决方案，你可以使用[`array_diff_key`](http://de.php.net/manual/en/function.array-diff.php)：

```
$loop_array = array_diff_key($actual_array, array('ignore_me' => NULL, 'ignore_me_2' => NULL));
foreach ($loop_array as $key => $value) {
    #... 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-24T09:28:14.033

使用循环内的 if 子句。它没有任何不雅之处，它是最容易阅读和理解的，也是最高效的。

如果您有很多键要跳过，您可以构建第二个哈希来测试（在 if 子句中）：

```
foreach ($array as $key => $value) {
   if (array_key_exists($key,$skip_keys)) continue;
   ...
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-24T09:17:41.377

我认为您最终会在内部循环中使用 IF 子句。在您已经提供的所有选项中，这是我唯一会用于速度和内存消耗的选项

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-24T09:17:41.750

AFAIK 你不能在没有`if`循环的情况下做到这一点。

就像关键字说的那样，它是“为每个人”，而不是“为大多数人”。

编辑：就像[soulmerge](https://stackoverflow.com/users/44562/soulmerge)说的，你*可以*用 来做`array_diff_key()`，但是如果你只是错过了一个键，那么它比仅仅把它`if`放在循环中更冗长并且内存效率更低。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-16T22:37:24.693

另一种压缩`if`语句的方法是：

```
// ignore 1,5,8,9
foreach($arr as $key){
  if(in_array($key, array(1,5,8,9)) continue;
  ...
} 
```

# jquery - 使用 jQuery 设置表单提交的值

> ID：785122
> 
> 赞同：1
> 
> 时间：2009-04-24T09:17:44.120
> 
> 标签：jquery

我正在使用以下代码使用 Google Maps API 对提供的地址进行地理编码。这个想法是对地址进行地理编码并在表单中传递纬度/经度，以便我的控制器操作可以使用它。不幸的是，这似乎不起作用，因为纬度/经度没有与表单的其余部分一起提交。我究竟做错了什么？

```
$(document).ready(function() {
    $("#search_form").submit(function(event) {
        var address = $("#searchAddress").val();

        if (address != "") {
            var geocoder = new GClientGeocoder();

            geocoder.getLatLng(
                address,
                function(point) {
                    if (point) {
                        // Found address, populate hidden form fields
                        $("#searchLatitude").val(point.lat());
                        $("#searchLongitude").val(point.lng());  
                    }
                }
            );
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-24T09:40:19.730

geocoder.getLatLong() 是异步的，因此您的 Submit 不会等待您的函数（点）被调用。

添加一个按钮（当然不是提交）并附加一个点击处理程序，如下所示：

```
$("#buttonId").click(function() {

    var address = $("#searchAddress").val();

        if (address != "") {
            var geocoder = new GClientGeocoder();

            geocoder.getLatLng(
                address,
                function(point) {
                    if (point) {
                        // Found address, populate hidden form fields
                        $("#searchLatitude").val(point.lat());
                        $("#searchLongitude").val(point.lng());  

                        $("#search_form").submit();

                    }
                }
            );
        }

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-24T09:21:42.630

您正在提交表单，然后设置值。这不起作用。您需要设置值，然后提交表单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-24T09:26:27.890

[jQuery表单插件](http://malsup.com/jquery/form/)将使您的生活更轻松。您可以使用 beforeSubmit 事件。

# c - 几个基本的C问题

> ID：785124
> 
> 赞同：2
> 
> 时间：2009-04-24T09:18:29.737
> 
> 标签：c

我是一个正在尝试学习 C 的人，但是在做项目时我遇到了几个问题：

1）我究竟如何实现随机整数生成？我已经用谷歌搜索并使用下面的代码找到了 0 到 x 生成的代码，但是在我决定的 2 个整数之间（比如 X 和 Y 之间）呢？

```
int random;
random = random(100); 
```

2）如何在开始时将变量设置为 NULL（如在 Java 中）并在它为 NULL 时对其进行操作？例如，我想实现以下目标：

```
int a = null;
if (a == null){
    a = 3;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-24T09:23:11.863

1) int r = 随机(Y - X) + X;

2) 在 C 或 Java 中，整数不能为空。在 C 中，只有指针可以为空，通过将它们指向零来表示。但是，我建议您在了解基础知识之前不要陷入整个指针混乱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-24T09:23:42.173

> 1-我如何准确地实现随机整数生成 [...]

请参阅[FAQ 13.15](http://c-faq.com/lib/rand.html)和[FAQ 13.16——](http://c-faq.com/lib/randrange.html)后者明确回答了这个问题。

> 2-如何在开始时设置变量 null

对于浮点数和整数类型，您将它们分配给魔术值 0。对于指针，您可以将它们分配给 0（再次）或宏`NULL`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-24T09:20:47.080

要获得所需的范围 (yx)，请将每个随机数乘以 (yx)。为了使它们从 x 开始并在 y 结束，将 x 添加到每个数字（已经乘以 (yz)）。假设 y > x。

```
int i;

for (i = 0; i < NrOfNumers; i++)
{
   randomNumberSequence[i] = randomNumberSequence[i]*(y-x) + x;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-24T10:19:55.127

在 C 中，您经常会看到以下内容：

```
int x = -1;
if (x == -1) { x = 3; } else { /* do nothing */ } 
```

这假定值类型实际上是无符号的，或者至少 -1 不是有效值。你也可以这样做：

```
#define UNINITIALIZED    ((int8_t) -128) /* -128 has no inverse with 8-bit */
...
int8_t x = UNINITIALIZED;
if (x == UNINITIALIZED) { x = 3; } else { /* do nothing */ } 
```

# entity-framework - 实体框架和耦合

> ID：785132
> 
> 赞同：2
> 
> 时间：2009-04-24T09:21:03.333
> 
> 标签：entity-framework, decoupling

我和我的一个朋友就实体框架的使用进行了一些讨论。我有一个项目，我用实体框架作为我的数据层制作了一个 3 层解决方案，并使用数据传输对象从业务层移动到用户界面。我真的很喜欢它提供的松散耦合，因为我可以稍后使用例如 hibernate 更改实体框架。另一方面，我的朋友认为 Entity 框架的目的是对其进行建模，以便可以在用户界面上使用它。您如何将实体框架与您的解决方案结合起来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-24T10:10:04.887

我看到我的朋友提出的想法是，可互换的层是 Hibernate 和 EF，但我认为这有点过激，因为这两个框架已经包含 DL->BL 功能。我认为使用 EF 和 Hibernate 等框架的原因是这些，按优先顺序排列：

1\. 在业务逻辑中直接使用实体
2\. 数据库类型独立
3\. 自动缓存
4\. SQL 抽象

期望像这样的框架也应该松散耦合到各层，只需要过多的查询解析、对象包装和解包以及各种噪音来弥补可能永远不会成为现实的可互换性。正如我所看到的，他的提议将导致相当于：
DL -> DL -> BL -> UL
有人同意这个吗？

# function - C中的一行函数？

> ID：785145
> 
> 赞同：10
> 
> 时间：2009-04-24T09:23:44.153
> 
> 标签：function, coding-style, conventions

您如何看待单行功能？不好吗？我能想到的一个优点是它使代码更全面（如果你为它选择一个好名字的话）。例如：

```
void addint(Set *S, int n)
{
     (*S)[n/CHAR_SIZE] |= (unsigned char) pow(2, (CHAR_SIZE - 1) - (n % CHAR_SIZE));
} 
```

我能想到的一个缺点是它减慢了代码速度（将参数推入堆栈、跳转到函数、弹出参数、执行操作、跳回代码 - 并且只针对一行？）

将这些行放在函数中还是将它们放在代码中更好？即使我们只使用一次？

顺便说一句，我还没有发现任何关于此的问题，所以如果以前有人问过这样的问题，请原谅我。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2009-04-24T09:48:04.907

**不要害怕 1 行函数！**

很多程序员似乎对 1 行函数有一个心理障碍，你不应该。

如果它使代码更清晰、更干净，则将该行提取到一个函数中。

**性能可能不会受到影响。**

在过去十年（也许更远）中制造的任何体面的编译器都会自动内联一个简单的 1 行函数。此外，1 行 C 语言可以轻松对应多行机器代码。你不应该假设即使在理论上你会产生函数调用的全部开销，与你的“一小行”相比，这个开销是显着的。更不用说对应用程序的整体性能有重要意义了。

**抽象带来更好的设计。**（即使是单行代码）

函数是抽象、组件化代码的主要构建块，它们不应被忽视。如果在函数调用后面封装一行代码使代码更具可读性，那就去做吧。即使在函数被调用一次的情况下。如果您发现注释某一特定代码行很重要，那是一种很好的代码气味，将代码移动到命名良好的函数中可能会有所帮助。

当然，今天的代码可能只有 1 行代码，但是有多少种不同的方式来执行相同的功能呢？将代码封装在函数中可以让您更轻松地查看所有可用的设计选项。也许您的 1 行代码扩展为对 Web 服务的调用，也许它成为数据库查询，也许它变得可配置（例如，使用策略模式），也许您想切换到缓存由您的 1- 计算的值线。当您将 1 行代码提取到自己的函数中时，所有这些选项都更容易实现并且更容易想到。

**也许您的 1 行应该是更多行。**

如果您有一大块代码，可能很想将大量功能塞进一行代码中，以节省屏幕空间。当您将此代码迁移到函数时，您会减少这些压力，这可能会使您更倾向于将复杂的 1-liner 扩展为占用多行代码的更简单的代码（这可能会提高其可读性和可维护性）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-04-24T09:33:53.350

我不喜欢将各种逻辑和功能拼到一条线上。您展示的示例是一团糟，可以分成几行，使用有意义的变量名并执行一个接一个的操作。

对于这类问题，我**强烈建议您**看看（购买、借用、（不要）下载（免费））[这本书：Robert C. Martin - Clean Code](http://www.amazon.co.uk/Clean-Code-Handbook-Software-Craftsmanship/dp/0132350882)。这是一本每个开发者都应该看看的书。

它不会立即让你成为一名优秀的程序员，也不会阻止你在未来编写丑陋的代码，但是它会让你在编写丑陋的代码时意识到这一点。它将迫使您以更批判的眼光看待您的代码，并使您的代码像报纸故事一样可读。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-24T09:26:13.570

如果多次使用，一定要让它成为一个函数，并让编译器进行内联（可能在函数定义中添加“内联”）。（<这里有关于过早优化的一般建议>）

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-04-24T09:33:40.200

由于您的示例似乎使用 C(++) 语法，您可能需要阅读[内联函数](http://en.wikipedia.org/wiki/Inline_function)，以消除调用简单函数的开销。这个关键字只是推荐给编译器，它可能不会内联您标记的所有函数，并且可以选择内联未标记的函数。

在 .NET 中，JIT 将内联它认为合适的方法，但您无法控制它为什么或何时这样做，尽管（据我了解）调试构建永远不会内联，因为这会停止与已编译应用程序匹配的源代码.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-24T09:35:16.107

单行功能没有错。如前所述，编译器可以内联函数以消除任何性能损失。

函数也应该比宏更受欢迎，因为它们更容易调试、修改、读取并且不太可能产生意外的副作用。

如果它只使用一次，那么答案就不那么明显了。通过将一些复杂性移到新函数中，将其移至函数可以使调用函数更简单、更清晰。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-24T09:25:37.830

如果您在该函数中使用代码 3 次或更多次，那么我建议将其放入函数中。只是为了可维护性。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-24T09:26:43.477

什么语言？如果您的意思是 C，我也会使用`inline`限定符。在 C++ 中，我可以选择`inline`，`boost.lamda`或 并向前推进 C++0x 对 lamdas 的原生支持。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2009-04-24T09:41:35.047

有时使用预处理器并不是一个坏主意：

```
#define addint(S, n) (*S)[n/CHAR_SIZE] |= (unsigned char) pow(2, (CHAR_SIZE - 1) - (n % CHAR_SIZE)); 
```

当然，您不会得到任何类型的检查，但在某些情况下这可能很有用。宏有其缺点和优点，在少数情况下，它们的缺点可以变成优点。我喜欢在适当的地方使用宏，但何时合适则由您决定。在这种情况下，我会冒昧地说，无论你最终做什么，一行代码都是相当多的。

```
#define addint(S, n) do { \
    unsigned char c = pow(2, (CHAR_SIZE -1) - (n % CHAR_SIZE)); \
    (*S)[n/CHAR_SIZE] |= c \
  } while(0) 
```

# jquery - jquery取消绑定点击

> ID：785147
> 
> 赞同：12
> 
> 时间：2009-04-24T09:24:26.197
> 
> 标签：jquery

我只是想从 jQuery 中的事件中取消绑定 onclick 处理程序，这样我就可以稍后将它绑定到另一个函数。

我已经在测试页面中隔离了代码，所以只有肉，只有一个调用函数的按钮和一个**试图**解除绑定的脚本：

```
<%@ Page Language="C#" Inherits="System.Web.Mvc.ViewPage" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server">
    <script src="../../Scripts/jquery-1.3.2.min.js" type="text/javascript">
    </script>

    <script src="../../Scripts/jquery-1.3.2.js" type="text/javascript">
    </script>

    <script type="text/javascript" language="javascript">
        $(document).ready(function() { $("#btnNext").unbind('click'); });
        function hi() {window.alert("hi");}
    </script>
</head>

<body>

    <input id="btnNext" type="button" value="Next" onclick="hi();" />
</body>
</html> 
```

任何人都知道为什么无论我在 document.ready 中说什么，click 事件都会一直调用 hi() 函数吗？

谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-04-24T09:26:58.297

因为你把它放在了 html 属性中，所以它就留在那里。它没有与 jQuery 绑定，所以 jQuery 没有跟踪它的使用情况。

```
$("a").bind('click',hi);
$("a").unbind('click',hi); 
```

[http://docs.jquery.com/Events/bind](http://docs.jquery.com/Events/bind)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-12-04T18:55:36.143

只是为了记录，您可以使用`removeAttr`jQuery 函数来删除最初指定的`onclick`属性。

```
$('#btnNext').removeAttr("onclick"); 
```

此外，作为对乍得的回应，我同意通常最好使用 jQuery 进行所有绑定，但我处于一种情况（使用 ASP.NET MVC）需要各个链接在其单击事件处理程序中具有一些模型参数. IMO 尝试通过 jQuery 连接这些事件处理程序会更加复杂。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-07-01T15:14:09.133

我无法让 removeAttr 工作，但这确实：

```
$("#btnNext").click(function(){ return false; }); 
```

我想在我的 TreeView 中删除 ASP.NET 提供的 onclicks（仅适用于 SelectedNodeChanged），这样我就可以在客户端处理该事件。当然，我的点击功能不仅仅包含“return false”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-01T10:13:44.567

假设你有

```
$(elem).on("click", function() { ... }); 
```

如果您想稍后取消绑定，您甚至不需要绑定它。这样做可以这样做：

```
$(elem).unbind(); 
```

这将删除处理程序，无论类型如何。如果您想更具体，您始终可以传递一个事件类型，如“点击”。

# python - 从给定坐标拾色

> ID：785157
> 
> 赞同：0
> 
> 时间：2009-04-24T09:27:19.433
> 
> 标签：python, windows, color-picker

获取给定坐标的 RGB 颜色代码的最简单方法是什么？为简单起见，我们假设屏幕分辨率为 1024x768，颜色深度/质量为 32 位。坐标相对于屏幕的左上角给出。我想获得一些如何使用 Python 完成的提示或示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-24T14:28:58.040

win32gui ActivePython 文档应该很有用[。](http://docs.activestate.com/activepython/2.6/pywin32/win32gui.html)我认为你可以构建类似的东西：

```
import win32gui
GetPixel(GetDC(WindowFromPoint( (XPos,YPos) )), XPos , YPos ) 
```

# installation - 如何使用 nsis 安装 Firefox 插件

> ID：785159
> 
> 赞同：1
> 
> 时间：2009-04-24T09:28:04.393
> 
> 标签：installation, firefox-addon, nsis, xpi

如何通过 nsis 安装程序安装 Firefox 插件？

当我使用 .xpi 扩展名调用 Firefox 时，它不起作用，并且 xpi 扩展名也不与 Firefox 关联。

如果我将它放到“C:\Program Files\Mozilla Firefox\extensions”，那么它会在用户每次打开 Firefox 时尝试安装。从不删除原始 xpi（*可能是由于 Vista UAC*）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2011-01-10T15:53:49.693

在 Firefox 3.6 之前，您可以使用 -install-global-extension 参数来安装扩展。然而，它在 Gecko 1.9.2 中被[删除。](https://developer.mozilla.org/En/Command_Line_Options#Add-ons)现在安装扩展的最佳方法可能是创建一个注册表项，如[使用 Windows 注册表](https://developer.mozilla.org/En/Adding_Extensions_using_the_Windows_Registry)页面添加扩展中所述。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-25T01:28:53.617

通过使用正确的命令行参数:)

```
firefox -install-global-extension c:\extension.xpi 
```

参考[文档](http://www.mozilla.org/projects/firefox/extensions/commandlineoptions.html)

# java - 休眠 hbm2hbmxml

> ID：785164
> 
> 赞同：3
> 
> 时间：2009-04-24T09:30:25.230
> 
> 标签：java, hibernate, hbm2java

我正在尝试使用 ant hibernatetool 任务从 mysql 中的 db 模式生成 hbm.xml 文件。ant 任务运行没有错误，但没有生成 hbm.xml 文件。我错过了什么...

以下是相关配置：

构建.xml

```
<taskdef name="hibernatetool"
    classname="org.hibernate.tool.ant.HibernateToolTask"
    classpathref="3p-classpath">
</taskdef>

<target name="hbmxmlgen"
    description="Creating hbm xml files from DB">
    <hibernatetool>
        <jdbcconfiguration 
            configurationfile="src/config/hibernate.cfg.xml"
            revengfile="src/config/hibernate.reveng.xml"
            detectmanytomany="true">
        </jdbcconfiguration>
        <hbm2hbmxml destdir="${mappings.dir}"/>
    </hibernatetool>
</target> 
```

src/config/hibernate.cfg.xml

```
<?xml version="1.0" encoding="utf-8" ?> <!DOCTYPE hibernate-configuration PUBLIC
          "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
          "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd"> <hibernate-configuration>
    <session-factory>
        <property name="connection.driver_class">com.mysql.jdbc.Driver</property>
        <property name="connection.url">jdbc:mysql://localhost/?useUnicode=true&characterEncoding=utf8</property>
        <property name="connection.username">root</property>
        <property name="connection.pool_size">1</property>
        <property name="dialect">org.hibernate.dialect.MySQLDialect</property>
        <property name="current_session_context_class">thread</property>
        <property name="cache.provider_class">org.hibernate.cache.NoCacheProvider</property>
        <property name="show_sql">true</property>
    </session-factory> </hibernate-configuration> 
```

src/config/reveng.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-reverse-engineering SYSTEM "http://hibernate.sourceforge.net/hibernate-reverse-engineering-3.0.dtd">

<hibernate-reverse-engineering>
    <schema-selection match-schema="optimizer_config"/>
    <type-mapping>
        <sql-type jdbc-type="VARCHAR" hibernate-type="string"/>
        <sql-type jdbc-type="NUMERIC" hibernate-type="java.lang.Long" />
        <sql-type jdbc-type="INTEGER" hibernate-type="java.lang.Integer" />
        <sql-type jdbc-type="DECIMAL" hibernate-type="java.lang.Double" />
    </type-mapping>
    <table-filter match-name="*" package="com.sokrati.optimizer.dbaccess.optimizerConfig"/>
</hibernate-reverse-engineering> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-09-09T10:16:10.407

我遇到了同样的问题，发现以下两点很有用：

1.  如果您想要所有表，则用于匹配名称的正则表达式是 '.*' 例如 `<table-filter match-name=".*" package="com.sokrati.optimizer.dbaccess.optimizerConfig"/>`

2.  请注意，模式名称区分大小写，因此请确保**reveng.xml**`<schema-selection>`中的标记中的大小写正确。

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-12T14:56:24.797

我认为`table-filter`是错误的。

尝试：

```
<table-filter match-name="%" package="com.sokrati.optimizer.dbaccess.optimizerConfig"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-09-01T19:32:10.907

尝试这个

```
<property name="connection.username">ROOT</property> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-02-23T12:09:51.997

你能确定以下两点吗？

1.  在 claaspath 中保留正确版本的 mysql 驱动程序 jar。（例如，如果您使用的是 mysql 5.x，那么您需要相应版本的 mysql 驱动程序 jar。有时使用旧版本的 jar 您不会遇到错误，但它不会按预期工作）

2.  如果可能，请尝试修改属性，例如：

    ```
    <property name="connection.url">jdbc:mysql://localhost:3306/?useUnicode=true&characterEncoding=utf8</property>
    ```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-05-17T14:23:42.130

琐碎的问题。正在经历类似的问题。奇怪我不得不为表过滤器指定 exclude="false" 并为我工作

# sql - 选择日期间隔，快速完成，并始终返回带有结果的最新条目

> ID：785172
> 
> 赞同：0
> 
> 时间：2009-04-24T09:33:48.577
> 
> 标签：sql, optimization, aggregate, intervals

我有一个带有表的数据库，用于存储跨几个帐户的帐户余额更改，其中包含三列；

```
float   balance, #The account balance after the change
Date    date,    #Date that balance change occurred
int     aid      #Account that the balance change occurred on 
```

它包含一年中每一天的几个条目，我想检索每五天的余额。我还希望它在帐户之间分开（即，如果在同一天发生了两次更改，但在不同的帐户上，则两者都返回）。

**问题是这样的**：有时会有几天（或几周）没有可用数据。发生这种情况时，我想确保在数据集中的“洞”*之前返回最新条目。*这是问题的简化版本，实际数据库很大（几千兆字节），大小是我要返回数据子集的原因。它不能使用特定于平台的方法，因为它需要同时在 oracle 和 mySQL 上工作。

**我的问题是**：有什么方法可以*快速*做到这一点？我将能够编写一个完成工作的查询，但我希望有一些不需要大量嵌套查询和聚合函数的魔鬼魔法方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-24T14:22:41.423

我会使用 Andomar 的 Period table 想法，但我会尝试稍微不同的最终查询。这假设您的 Account_Balances 表具有援助和日期的 PK。如果您最终在相同的确切日期和时间为同一帐户获得了两个余额，那么您会得到一些重复的行。

```
SELECT
     P.start_date,
     P.end_date,
     AB1.account_id,
     AB1.balance
FROM
     Periods P
LEFT OUTER JOIN Account_Balances AB1 ON
     AB1.date <= P.end_date
LEFT OUTER JOIN Account_Balances AB2 ON
     AB2.aid = AB1.aid AND
     AB2.date > AB1.date AND
     AB2.date <= P.end_date
WHERE
     AB2.aid IS NULL 
```

如果该帐户在给定期间之前或期间没有任何行，您将不会得到它的行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-24T10:11:18.767

您可以通过创建一个周期表以相对简单的方式执行此操作，您可以将其与帐户表连接以在每个帐户每个周期创建一行。

这是一个例子。让我们设置一些临时表：

```
create table #balance (
    id int identity,
    balance float,
    date datetime,
    aid int
)

create table #period (
    id int identity,
    startdt datetime,
    enddt datetime
) 
```

输入一些测试数据：

```
insert into #yourtable (balance, date, aid) values (4,'2009-01-01',1)
insert into #yourtable (balance, date, aid) values (5,'2009-01-10',1)
insert into #yourtable (balance, date, aid) values (6,'2009-01-10',1)
insert into #yourtable (balance, date, aid) values (7,'2009-01-16',1)
insert into #yourtable (balance, date, aid) values (2,'2009-01-01',2)
insert into #yourtable (balance, date, aid) values (3,'2009-01-10',2)
insert into #yourtable (balance, date, aid) values (4,'2009-01-10',2)
insert into #yourtable (balance, date, aid) values (5,'2009-01-16',2)

insert into #period (startdt, enddt) values ('2009-01-01','2009-01-06')
insert into #period (startdt, enddt) values ('2009-01-06','2009-01-11')
insert into #period (startdt, enddt) values ('2009-01-11','2009-01-16')
insert into #period (startdt, enddt) values ('2009-01-16','2009-01-21') 
```

现在让我们查询所有时期：

```
from #period p 
```

在期末前为每个余额添加一行：

```
left join #balance b1 on 
    b1.date <= p.enddt 
```

在第一次加入的余额和期末之间搜索余额：

```
left join #balance b2 on 
    b2.aid = b1.aid
    and b1.id < b2.id
    and b2.date <= p.enddt 
```

然后过滤掉不是其期间最后余额的行。

```
where
    b2.aid is null 
```

b2 连接基本上寻找“中间”值，并且通过说它的 id 为空，你说不存在中间行。最终查询如下所示：

```
select 
    b1.aid
,   p.startdt
,   b1.balance
from #period p
left join #balance b1 on 
    b1.date <= p.enddt
left join #balance b2 on 
    b2.aid = b1.aid
    and b1.id < b2.id
    and b2.date <= p.enddt
where
    b2.aid is null
order by b1.aid, p.startdt 
```

注意：查询假设余额与较晚的日期总是有较大的 id。如果您不必使用完全相同的结束日期进行余额，则可以将“b1.id < b2.id”替换为“b1.date < b2.date”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-24T09:48:17.217

如果您等待 postgresql 8.4，您也许可以使用窗口函数

[http://www.postgresql.org/docs/8.4/static/tutorial-window.html](http://www.postgresql.org/docs/8.4/static/tutorial-window.html)

[http://www.postgresql.org/docs/8.4/static/functions-window.html](http://www.postgresql.org/docs/8.4/static/functions-window.html)

# sharepoint - 如何在自定义的 SharePoint 2007 编辑表单中检索值“创建者”

> ID：785176
> 
> 赞同：1
> 
> 时间：2009-04-24T09:35:25.967
> 
> 标签：sharepoint, sharepoint-2007, sharepoint-designer

我使用 SharePoint 设计器为自定义列表创建了自定义编辑表单。在显示表单之前，我需要检查当前用户是否是列表项的作者，因为只有作者才能编辑此内容。我没有服务器访问权限，所以想使用 XSL 在表单本身中执行此操作。到目前为止，我还无法检索 Author / Created By 值。有谁知道如何获得这个值？

谢谢你的帮助

伊恩

**更新：**

我现在可以看到编辑表单正在使用一个数据源，它基本上返回一个包含内容类型中所有字段的视图。“作者”不是内容类型的一部分（这是自定义类型）。我看不到任何将作者添加到内容类型的方法。有谁知道如何实现这一点，因为我认为这可以解决问题。干杯，伊恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-24T15:37:37.953

是否可以使用列表的查看/编辑访问设置？您可以在“列表设置 -> 高级设置”或类似的地方找到它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-24T10:05:02.993

为了禁止某人编辑他不应该编辑的项目，我不会编辑项目的编辑表单，而是通过项目的权限集来执行此操作。因此，我将在列表中添加一个事件处理程序，该处理程序在创建后更改列表项权限，以便只有文档的创建者有权编辑它。

有关事件接收器的信息可以在[Brian Wilson 的博客](http://blogs.msdn.com/brianwilson/archive/2007/03/05/part-1-event-handlers-everything-you-need-to-know-about-microsoft-office-sharepoint-portal-server-moss-event-handlers.aspx)上找到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-24T17:34:50.667

我认为 JMD 是对的。您可以在没有自定义表单或任何编码的情况下执行此操作。从列表的菜单栏中选择**设置**->**列表设置**->**高级设置**

**在那里，您应该会在“项目级别权限**”中看到一个选项，以将编辑访问权限仅限于项目的作者。

[![替代文字](https://i.stack.imgur.com/zaqK9.jpg)](https://i.stack.imgur.com/zaqK9.jpg)

# asp.net-mvc - 使用 Rhino Mocks 在 ASP.NET MVC 中模拟客户 SessionHandler 对象以进行单元测试

> ID：785179
> 
> 赞同：0
> 
> 时间：2009-04-24T09:36:54.497
> 
> 标签：asp.net-mvc, session, rhino-mocks, session-variables

我目前使用以下方法来创建表示会话变量的强类型对象。

```
public abstract class SessionController : Controller
{
    private const string SESSION_NAME = "UserSession";

    public SessionData SessionData
    {
        get
        {
            SessionData sessionData = (SessionData)Session[SESSION_NAME];

            if (sessionData != null)
            {
                return sessionData;
            }
            else
            {
                sessionData = new SessionData();
                Session[SESSION_NAME] = sessionData;

                return sessionData;
            }
        }
        set
        {
            Session[SESSION_NAME] = value;
        }
    }  
} 
```

SessionData 是一个简单的对象，例如

```
[Serializable]
public class SessionData
{
    public String SessionId { get; set; }
    public Int64 UserId { get; set; }
    public String NameOfUser { get; set; }
} 
```

创建新控制器时，我从 SessionController 派生它，这样我就可以对我的 SessionData 进行强输入访问。例如

```
public CityController : SessionController
{
    [AcceptVerbs(HttpVerbs.Get)]
    public ActionResult Index()
    {
        ViewData.Model = _cityService.GetAll(SessionData.UserId);

        return View("Index");
    }
} 
```

因此，我目前正在努力通过单元测试来解决这个问题。我尝试过的缩短版本是以下代码段

```
[SetUp]
public void SetUp()
{
    mocks = new MockRepository();
    _cityService = MockRepository.GenerateStub<ICityService>();
    _sesssionData = new SessionData { UserId = 1, SessionId = "1" };

    // First Approach
    controller = new CityController(_cityService);
    controller.Expect(p => p.SessionData).Return(_sesssionData);

    // Second Approach
    cctx = MockRepository.GenerateStub<ControllerContext>();
    cctx.Expect(p=>p.HttpContext.Session["UserSession"] as SessionData).Return(_sesssionData);
    controller.ControllerContext = cctx;
} 
```

有没有人提示如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-24T09:59:20.760

如果您将 SessionData 属性设为虚拟，那么您的第一种方法可能会奏效：

```
// Arrange
var mocks = new MockRepository();
var cityService = MockRepository.GenerateStub<ICityService>();
var sesssionData = new SessionData { UserId = 1, SessionId = "1" };
var controller = mocks.PartialMock<CityController>(cityService);
controller.Expect(c => c.SessionData).Return(sessionData);
controller.Replay();

// Act
controller.Index();

//Assert
... 
```

IMO 这种方法不是很好，因为 SUT（在这种情况下为 CityController 的被测对象 =>）正在使用 PartialMock 进行模拟。

# google-maps - GDirections 谷歌地图的自定义路线

> ID：785180
> 
> 赞同：0
> 
> 时间：2009-04-24T09:36:55.697
> 
> 标签：google-maps

是否可以为 GDirections 创建自定义路线以四处走动？就像它对道路等一样。

如果我有 10 个路点，并且路上有一栋建筑物，如果我只是从路点 1 走到路点 2，它将直接穿过建筑物。

有没有办法让它走在自定义的预定义路线上？

我在想也许可以使用 KML 之类的？

干杯，萨基

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-02T21:12:16.207

您想要自定义路线，还是希望 GDirections 对象找出自己的路线，以确保它避开某些障碍？

对于第一种方法，只需使用更多航点。

对于第二个，我不知道。=(

# actionscript-3 - As3 加密库

> ID：785182
> 
> 赞同：7
> 
> 时间：2009-04-24T09:37:35.197
> 
> 标签：actionscript-3, encryption

哪些加密库可用于 actionscript 3.0？与价格相比，我的偏好是性能。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-24T10:01:50.490

查找[as3crypto](http://code.google.com/p/as3crypto/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-24T17:12:29.910

as3corelib ( [http://code.google.com/p/as3corelib/](http://code.google.com/p/as3corelib/) ) 还包括 md5 和 sha 1。

# c++ - 将 CString 转换为字符数组？

> ID：785187
> 
> 赞同：7
> 
> 时间：2009-04-24T09:38:51.280
> 
> 标签：c++, visual-c++, char, cstring

如何将 MFC 中的 CString 转换为 char[]（字符数组）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-24T10:00:55.623

您使用 CString::GetBuffer() 来获取 TCHAR[] - 指向缓冲区的指针。如果您在没有定义 UNICODE 的情况下编译就足够了 - TCHAR 与 char 相同，否则您必须分配一个单独的缓冲区并使用 WideCharToMultiByte() 进行转换。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-03-09T20:47:56.330

我为此苦苦挣扎，但我现在使用的是：（UNICODE 友好）

**CString strCommand("我要发送到 DLL 的文本。");**

**

```
char strPass[256];
strcpy_s( strPass, CStringA(strCommand).GetString() ); 
```

**

// CStringA 是 CString 的非宽/unicode 字符版本，然后这会将您的空终止字符数组放入 strPass 中。

此外，如果您控制另一侧的 DLL，请将您的参数指定为：

**const char* strParameter**

而不是

*char* str参数*

将“可能”为您转换 CStrings，默认强制转换通常有效。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-24T09:42:53.517

您可以使用[GetBuffer](http://msdn.microsoft.com/en-us/library/aa314880(VS.60).aspx)函数从 CString 中获取字符缓冲区。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-07T08:36:32.870

仅调用 GetBuffer 方法是不够的，您还需要将此缓冲区复制到数组中。

例如：

```
CString sPath(_T("C:\temp\"));
TCHAR   tcPath[MAX_PATH]; 
_tcscpy(szDisplayName, sPath.GetBuffer(MAX_PATH)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-18T12:59:00.703

如其他地方所述，如果您需要移植 CString 以获取*警告 C4840: non-portable f.*

快速的 Unicode && 多字节字符串转换使用：

static_cast

样本：

```
 //was: Str1.Format( szBuffer, m_strName );
    Str1.Format(szBuffer, static_cast<LPCTSTR>(m_strName) ); 
```

# firewall - 如何编写代码以与 Skype 类似的方式通过 NAT？

> ID：785191
> 
> 赞同：4
> 
> 时间：2009-04-24T09:39:53.833
> 
> 标签：firewall, network-protocols, nat

有谁知道，Skype 如何重定向 NAT 和防火墙？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-24T10:20:30.320

我相信 Skype 使用[STUN](http://en.wikipedia.org/wiki/STUN)协议的变体来遍历 NAT。

[您可以在此处](http://www.codeproject.com/KB/cs/STUN_client.aspx)找到示例 C# 代码来实现 STUN 客户端。

# c# - DataGridView 滚动事件（和 ScrollEventType.EndScroll）

> ID：785200
> 
> 赞同：5
> 
> 时间：2009-04-24T09:43:03.437
> 
> 标签：c#, .net, winforms, datagridview

处理`DataGridView.Scroll`事件时，可以检查是否是滚动结束（用鼠标拖动滚动条时，估计是松开鼠标键时）。

问题是这似乎永远不会发生。`e.Type`从来不是`ScrollEventType.EndScroll`

这有什么问题？只有在滚动完成时我才能做某事？

```
 private void dataGridView_Scroll(object sender, ScrollEventArgs e)
    {
        if (e.Type == ScrollEventType.EndScroll)
        {
            // ...      
        }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-24T10:14:13.470

好吧，看来这个事件只是被窃听了。

您可以锁定 DGV 的私有滚动条对象（通过反射）并处理它们的事件，`ScrollEventType.EndScroll`如预期的那样。

请参阅此[链接](https://stackoverflow.com/questions/472389/how-can-i-receive-the-scroll-box-type-scroll-events-from-a-datagridview/767603#767603 "这")了解如何操作。

# c++ - 有没有办法在 C/C++ 中以编程方式确定 Lua 函数需要多少参数？

> ID：785202
> 
> 赞同：4
> 
> 时间：2009-04-24T09:43:39.723
> 
> 标签：c++, lua

有没有办法在从 C/C++ 代码调用 Lua 函数之前确定它需要多少个参数？

我看了看，`lua_Debug`但`lua_getinfo`他们似乎没有提供我需要的东西。

看起来我有点违背 Lua 的精神，但我真的想证明我在 Lua 和 C++ 之间的接口。当从 Lua 代码调用 C++ 函数时，接口会验证 Lua 提供了正确数量的参数以及每个参数的类型是否正确。如果发现参数有问题，`lua_error`则发出 a。

我想反过来检查类似的错误。当 C++ 调用 Lua 函数时，它至少应该检查 Lua 函数没有声明过多的参数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2011-11-11T14:21:03.410

[在 Lua 5.2 中，您可以通过 get_info()](http://www.lua.org/manual/5.2/manual.html#lua_getinfo)`'u'`使用类型填充字段来确定参数的数量、上值以及函数是否接受可变数量的参数。此功能在 Lua 5.1 中不可用。[`nups, nparams, isvararg`](http://www.lua.org/manual/5.2/manual.html#lua_getinfo)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-24T13:44:26.400

你所要求的在 Lua 中是不可能的。

您可以使用一组参数定义一个 Lua 函数，如下所示：

```
function f(a, b, c)
   body
end 
```

但是，Lua 对传递给此函数的参数数量没有限制。

这是有效的：

```
f(1,2,3,4,5) 
```

额外的参数被忽略。

这也是有效的：

```
f(1) 
```

其余参数分配为“nil”。

最后，您可以定义一个接受可变数量参数的函数：

```
function f(a, ...) 
```

此时，您可以将任意数量的参数传递给函数。

[请参阅Lua 参考手册](http://www.lua.org/manual/5.1/manual.html#2.5.9)的第 2.5.9 节。

您可以在这里做的最好的事情是向您的 Lua 函数添​​加检查，以验证您收到了您期望的参数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-30T06:10:39.793

除非您完全控制要验证的 Lua 代码，否则我不会在 Lua 方面这样做。Lua 函数通过忽略额外的参数来忽略它们是很常见的。

一个例子是当我们不想实现某些方法并使用存根函数时：

```
function do_nothing() end

full_api = {}
function full_api:callback(a1, a2) print(a1, a2) end

lazy_impl = {}
lazy_impl.callback = do_nothing 
```

这允许通过重用可用函数来节省打字（和一些性能）。

如果您仍想进行函数参数验证，则必须静态分析代码。一种工具是[Metalua](http://metalua.blogspot.com/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-24T20:25:20.117

不，不在标准 Lua 中。并且是 Aaron Saarela 所说的，据我所知，这有点超出了 Lua 的精神。Lua 方法是确保函数本身被视为`nil`合理的默认值（或`name = name or "Bruce"`在第一次使用之前将其转换为合理的默认值），或者如果没有合理的默认值，则函数应该抛出错误或返回失败（`if not name then error"Name required" end`是前者`if not name then return nil, "name required" end`的常用成语，后者是常用的成语）。通过让 Lua 端负责自己的参数检查，无论函数是从 Lua 还是 C 调用，您都可以获得这种好处。

也就是说，您的模块可能会维护一个按函数索引的属性表，其中包含您需要知道的信息。当然，它需要维护。MetaLua 也有可能用于添加一些语法糖以在编译时直接从函数声明创建表。在调用 Lua 函数之前，您将直接使用它来查找任何可用的属性并使用它们来验证调用。

如果您担心防弹，您可能希望控制函数环境以谨慎使用 Lua 端可用的（如果有的话）全局变量，并使用`lua_pcall()`而不是`lua_call()`捕获任何抛出的错误。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-30T10:21:36.010

您要求的信息并非在所有情况下都可用。例如，一个 Lua 函数实际上可能在 C 中实现为 lua_CFunction。从 Lua 代码中无法区分纯 Lua 函数和 lua_CFunction。而在 lua_CFunction 的情况下，参数的数量根本不会暴露，因为它完全取决于函数的实现方式。

另一方面，您可以做的是为函数编写者（无论是纯 Lua 还是 C 语言）提供一个系统来宣传他们的函数需要多少参数。在创建函数 (function f(a, b, c) end) 后，他们只需将其传递给全局函数 (register(f, 3))。然后，您将能够从您的 C++ 代码中检索该信息，并且如果该函数没有公布其参数，则回退到您现在所拥有的。使用这样的系统，您甚至可以宣传参数所期望的类型。

# java - 春季一号的转炉

> ID：785204
> 
> 赞同：3
> 
> 时间：2009-04-24T09:44:13.887
> 
> 标签：java, spring

什么是转炉？

我可以看到很多提及它，但找不到“相关”定义。

账单

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-24T09:47:02.053

[http://en.wikipedia.org/wiki/Birds_of_a_Feather_（计算）](http://en.wikipedia.org/wiki/Birds_of_a_Feather_(computing))

BoF 会议是会议上的非正式聚会，与会者根据共同的兴趣分组并在没有任何预先计划的议程的情况下进行讨论。

# sql - mysql中每月一周的功能

> ID：785206
> 
> 赞同：9
> 
> 时间：2009-04-24T09:44:25.510
> 
> 标签：sql, mysql, function

我正在寻找一个简单的函数来在 mysql 查询中获取一个月中的一周（而不是一年中的一周）。

我能想到的最好的办法是：

```
WEEK(dateField) - WEEK(DATE_SUB(dateField, INTERVAL DAYOFMONTH(dateField)-1 DAY)) + 1 
```

我很想知道我是否在这里重新发明轮子，是否有更简单、更清洁的解决方案？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-04-24T09:51:01.263

AFAIK，每月的第一周没有标准。

一年的第一周是包含`Jan 4th`.

你如何定义一个月的第一周？

**更新：**

您需要像这样重写您的查询：

```
SELECT  WEEK(dateField, 5) -
        WEEK(DATE_SUB(dateField, INTERVAL DAYOFMONTH(dateField) - 1 DAY), 5) + 1 
```

以便正确处理年份转换，并从`Monday`.

否则，您的查询很好。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-04-24T10:38:26.220

有时在报告数据库中使用另一种方法。它是创建一个表，我们称之为 ALMANAC，每个日期有一行（键），并且具有可能对报告目的有用的每个所需的日期属性。

除了月份的星期几列之外，还可以有一列显示该日期是否是公司假日，诸如此类。如果贵公司的会计年度从 7 月或其他月份开始，则可以包括每个日期所属的会计年度、会计月、会计周等。

然后，您编写一个程序来凭空填充此表，给定要填充的日期范围。您只需在此程序中包含所有疯狂的日历计算。

然后，当您需要知道某个其他表中某个日期的属性时，您只需进行连接并使用该列。是的，这又是一次加入。不，这个表没有标准化。但对于某些非常具体的需求，它仍然是很好的设计。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-30T11:41:34.870

我的一周解决方案从星期日开始。

> ```
> SELECT    ( 1 + ((DATE_FORMAT( DATE_ADD(LAST_DAY( DATE_ADD('2014-07-17',
>     INTERVAL -1 MONTH)), INTERVAL 1 DAY),'%w')+1) + 
>     (DATE_FORMAT('2014-07-17', '%d')-2) ) DIV 7) "week_of_month"; 
> ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-02T12:47:09.263

（只是为了向未来的读者澄清：这个旧问题的答案是由于暗示当前答案不令人满意的赏金而添加的，所以我添加了这个解决方案/定义以及针对各种情况的附加“配置选项”。）

没有标准定义`Week of month`，但通用解决方案是以下公式，您可以根据需要进行配置：

```
select (dayofmonth(dateField) + 6 + (7 - "min_days_for_partial_week") 
        - (weekday(datefield) - "weekday_startofweek" + 7) MOD 7) DIV 7 as week_of_month; 
```

在哪里

*   `"weekday_startofweek"`必须替换为您希望成为一周第一天的工作日 ( `0 = Monday`, `6 = Sunday`)。
*   `"min_days_for_partial_week"`是第一周必须算作第 1 周的天数（值为`1`）`7`。常见值将是`1`（每月的第一天始终是第 1 周），`4`（这类似于“iso week of the year”，其中一年的第一周是包含星期四的那一周，因此至少有4 天）和`7`（第 1 周是第一个完整的一周）。

此公式会将值返回`0`到`6`. `0`表示当前周是部分周，没有足够的天数计为第 1 周，并且`6`只有当您允许少于 3 天的部分周作为第 1 周时才会发生。

例子：

如果您一周的第一天是星期一 ( `"weekday_startofweek" = 0`) 并且第一周应该始终是一整周 ( `"min_days_for_partial_week" = 7`)，这将简化为

```
select (dayofmonth(dateField) + 6 - weekday(datefield)) DIV 7 as week_of_month; 
```

例如，for `2016-06-02`you will get `0`，因为 2016 年 6 月从星期三开始，for `2016-06-06`you will get `1`，因为这是 2016 年 6 月的第一个星期一。

为了模拟您的公式，一周的第一天始终是第 1 周 ( `"min_days_for_partial_week" = 1`)，并且一周从星期日 ( `"weekday_startofweek" = 6`) 开始，这将是

```
select (dayofmonth(dateField) + 12 - (weekday(datefield) + 1) MOD 7) DIV 7 as week_of_month; 
```

尽管您可能想正确评论一下，以便在 2 年内知道您的常量来自哪里。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-12-16T10:03:30.370

可能为时已晚 12 年，但万一有人还在寻找，我在 bigquery MySQL 中使用这个计算来计算每月的周数。

**我在计算中使用星期一作为第一天**

```
case when 
        (case when EXTRACT(DAYOFWEEK FROM date_add(date(my_date), INTERVAL -(EXTRACT(DAY FROM my_date))+1 day)) = 1 then 7 
                          else EXTRACT(DAYOFWEEK FROM date_add(date(my_date), INTERVAL -(EXTRACT(DAY FROM my_date))+1 day)) -1 end) > 1 then -- check first day of month to decide if it's a complete week (starts on Monday)
                case when EXTRACT(DAY FROM my_date) <= 7 then -- for incomplete week
                    case when 
                            (case when EXTRACT(DAYOFWEEK FROM my_date) = 1 then 7 else EXTRACT(DAYOFWEEK FROM my_date)-1 end)  -  EXTRACT(DAY FROM my_date) =
                                 (case when EXTRACT(DAYOFWEEK FROM date_add(date(my_date), INTERVAL -(EXTRACT(DAY FROM my_date))+1 day)) = 1 then 7 
                                   else EXTRACT(DAYOFWEEK FROM date_add(date(my_date), INTERVAL -(EXTRACT(DAY FROM my_date))+1 day)) -1 end) -1 then 1 -- incomplete week 1
                      else FLOOR(( EXTRACT(DAY FROM my_date) + (case when EXTRACT(DAYOFWEEK FROM date_add(date(my_date), INTERVAL -(EXTRACT(DAY FROM my_date))+1 day)) = 1 then 7
                                                                 else EXTRACT(DAYOFWEEK FROM date_add(date(my_date), INTERVAL -(EXTRACT(DAY FROM my_date))+1 day)) -1 end) -2 )/7)+1 end  -- calculate week based on date
            else FLOOR(( EXTRACT(DAY FROM my_date) + (case when EXTRACT(DAYOFWEEK FROM date_add(date(my_date), INTERVAL -(EXTRACT(DAY FROM my_date))+1 day)) = 1 then 7 
                                                         else EXTRACT(DAYOFWEEK FROM date_add(date(my_date), INTERVAL -(EXTRACT(DAY FROM my_date))+1 day)) -1 end) -2 )/7)+1 end -- calculate week based on date
     else FLOOR((EXTRACT(DAY FROM my_date)-1)/7)+1 -- for complete week
        end 
```

这个想法是将日差（星期一到该月的第一天）添加到日期，以便它可以正确划分为周> 1

对于第 1 周（< 日期 7），我正在计算使用星期几 - 日期来获得第一个不完整周的结束（第一个不是星期一）。

# html - CSS，显示内联和三个 div

> ID：785211
> 
> 赞同：5
> 
> 时间：2009-04-24T09:46:45.503
> 
> 标签：html, css

我有这个 HTML 代码：

```
<body>
    <div id="div0" style="display:inline; background-color:green; width:100%">
        <div id="div1" style="display:inline; background-color:aqua;width:33%">&nbsp;</div>
        <div id="div2" style="display:inline; background-color:red;width:33%">&nbsp;</div>
        <div id="div3" style="display:inline; background-color:yellow;width:33%">&nbsp;</div>
    </div>
</body> 
```

我想用**div1**、**div2**和**div3**填充页面，但它们不会填充整个宽度。

这是怎么回事？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-04-24T10:44:00.107

取自[显示声明](http://www.quirksmode.org/css/display.html#inline)：

> `display: inline`表示元素在同一行的当前块内内联显示。只有当它在两个块之间时，元素才会形成一个“匿名块”，但是它具有最小的可能宽度。

您不能为内联元素设置宽度或高度尺寸，它们将被忽略。一个元素必须有一个显示类型`block`才能做到这一点。然而，设置`display: block`不会达到你想要的效果，因为每个元素都会填满整个宽度。`float: left`将导致它们向左堆叠并且还强制`display: block`。

```
<head>
<style type="text/css">
#wrap {
    width:100%;
}
#wrap:after {
    /* Prevent wrapper from shrinking height, 
    see http://www.positioniseverything.net/easyclearing.html */
    content: ".";
    display: block;
    height: 0;
    clear: both;
    visibility: hidden;
}
#wrap .container {
    float: left;
    width:33%;
}
</style>
</head>
<body>
    <div id="wrap">
        <div class="container"> </div>
        <div class="container"> </div>
        <div class="container"> </div>
    </div>
</body> 
```

嗯，语义

有关浮动的更多评论，请参阅[Phunky的回答。](https://stackoverflow.com/questions/785211/css-display-inline-and-three-divs/789631#789631)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-24T09:53:56.763

在外部使用相对定位`<div>`并在内部浮动`<div>`。不要使用`display: inline`.

```
<body>
  <div id="div0" style="border: 1px solid red; background-color: green; width: 100%; position: relative;">
    <div id="div1" style="background-color: aqua; width: 33.33%; float: left;">a</div>
    <div id="div2" style="background-color: red; width: 33.33%; float: left;">b</div>
    <div id="div3" style="background-color: yellow; width: 33.33%; float: left;">c</div>
  </div>
</body> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-24T09:51:00.733

`display:inline`收缩包装内容。您可能想尝试一下`float:left`。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-25T20:05:14.087

Rory Fitzpatrick 或多或少为您提供了理想的答案，尽管不需要在 #wrapper 上设置 pos:rel 因为它已经是一个相对的块元素，并且默认情况下会跨越整个宽度。

当您浮动一个块元素时，它会模仿 display:inline 的对齐功能，在理想情况下，我们可以访问非常有用的 display:inline-block ，它会完全按照您的期望完成。

但是当浮动元素时你应该记住的一件事是它们只会占用它们需要的空间（这包括边距和填充），除非你设置了一个固定的宽度。

这就是 Rory 使用 width:33% 的原因；因为那是你能得到的最好的:)

理想情况下，这将是对 Rorys 帖子的评论，但我还没有足够高的帖子数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-24T09:49:49.270

```
<body>
    <div id="div0" style="float: left; background-color:green; width:100%">
        <div id="div1" style="float: left; background-color:aqua;width:33%">&nbsp;</div>
        <div id="div2" style="float: left; background-color:red;width:33%">&nbsp;</div>
        <div id="div3" style="float: left; background-color:yellow;width:33%">&nbsp;</div>
    </div>
</body> 
```

这应该适合你。IIRC 的原因是 display: inline 不占用 % 宽度。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-03T18:02:13.193

您可以使用 flexbox 来进行更灵敏的大小调整，而不是使用 float。这也迫使元素保持在一行中。

例子：

```
<head>
    <style type="text/css">
    #wrap {
        width:100%;
        display:inline-flex;
    }
    #wrap:after {
        content: ".";
        display: block;
        height: 0;
        clear: both;
        visibility: hidden;
        display: inline-flex;
        flex-direction: row;    
    }
    .container1 {
        width:20%;
    }
    .container2{
        width:80%;
    }
    </style>
</head>
<body>
<div id="wrap">
    <div class="container1"> </div>
    <div class="container2"> </div>
</div> 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-03-07T19:26:27.480

与之前给出的所有答案相反，完成此任务的最佳方法可以参考这个问题的答案：

[3 个宽度正好为 33% 的内联块 div 不适合父级](https://stackoverflow.com/questions/15653017/3-inline-block-divs-with-exactly-33-width-not-fitting-in-parent)

最快和最简单的方法并不是最漂亮的（将您的 div 放在同一行以删除通常提供的自动单个空白），但对于您想要的效果非常有用。我引用的答案列出了许多其他方式，在我看来，这些方式比以前提供的任何方式都好，并且可以解决您遇到的真正问题。

这是您想要的代码，以及指向小提琴的链接！

```
<body>
<div id="div0" style="float: left; background-color:green; width: 100%;">
    <div id="div1" style="margin: 0px; display: inline-block; background-color:aqua;width:33.33%">&nbsp;</div><div id="div2" style="margin: 0px; display: inline-block; background-color:red;width:33.33%">&nbsp;</div><div id="div3" style="margin: 0px; display: inline-block; background-color:yellow;width:33.33%">&nbsp;</div> 
</div> 
```

[https://jsfiddle.net/stopitdan/uz1zLvhx/](https://jsfiddle.net/stopitdan/uz1zLvhx/)

# objective-c - 如果我有一个带有“retain”的 IBOutlet，为什么我必须清理内存，而不是当我有一个带有“assign”的时候？

> ID：785212
> 
> 赞同：0
> 
> 时间：2009-04-24T09:46:51.760
> 
> 标签：objective-c, iphone

例子：

```
@property (..., assign) 
```

在那里，我没有在 dealloc 方法中进行任何清理。但是当我有一个

```
@property (..., retain) 
```

那么我会这样做。

我是从互联网的某个地方得到的。不记得网站了。好吧，我知道编译器指令中的保留关键字会使保留计数+1，但实际上我认为我错过了分配和保留的深刻差异。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-24T19:04:44.163

分配只会复制指针，不会向`retain`对象发送消息。因此，由于您没有保留它，因此您不必释放它。

如您所说，在保留的情况下，它将向`retain`对象发送一条消息，增加其保留计数，因此您有责任`release`在您的对象位于（在您的`dealloc`）时向该对象发送一条消息。

# .net - 服务器上动态生成的文件不会在 Windows Server 2003 上释放进程句柄 .NET

> ID：785215
> 
> 赞同：0
> 
> 时间：2009-04-24T09:47:38.620
> 
> 标签：.net, windows, file, iis-6

我已经构建了一个 Web 应用程序，用户可以请求在服务器上生成并发送回客户端的报告。该过程工作正常并将文件发送回客户端，但是我们无法打开文件。进一步调查显示，服务器上的进程仍然拥有 IIS 应用程序池对文件的句柄。

这是奇怪的部分：

1.  .NET 代码调用 Close() 来关闭文件和底层流。
2.  此问题仅发生在我们的生产服务器中。在开发和测试中它工作正常。
3.  我们尝试在服务器和 IIS 中更改许多不同的设置
4.  到目前为止，我们已经尝试了许多不同的想法来让它在生产服务器上运行，但没有成功。

这可能是什么原因？我们正在运行 Windows Server 2003，IIS 6。请帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-24T13:03:56.527

您是否在服务器上运行防病毒软件？它可能正在扫描文件，因为它是一个新文件。

我回应了上面 PITADeveloper 关于 Dispose 的评论。我会进一步说，您应该确保您创建的每个实现 IDisposable 的对象都调用了 Dispose。如果创建它，则必须 Dispose 它：

```
using (var resource = ResourceType.Create())
{
    // Use the resource
}   // resource.Dispose called here even if your code throws an exception 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-24T12:49:49.417

您在文件上说“.NET 代码调用 Close()”。它是否还在用于创建文件的任何资源上调用 Dispose() ？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-24T12:54:40.777

如果您通过 HTTP 发送文件，则服务器的任何锁定都不会影响在客户端上打开文件的能力。您确定服务器关闭了生产服务器上的文件吗？也许您的生产服务器上的某些东西阻止了 Web 应用程序完全生成文件。

# sql-server - 如何从sql server中的表中搜索数据

> ID：785223
> 
> 赞同：-1
> 
> 时间：2009-04-24T09:50:11.610
> 
> 标签：sql-server, search

任何人都可以发布任何链接/教程，它将解释如何从 sql server 中的表中搜索数据，比如使用一些存储过程......任何例子？详细说明：假设我有一个表，其中包含 ID、标题、用户名描述等列，所以现在它首先会搜索用户名，然后搜索标题等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-24T10:06:18.780

```
DECLARE @search nvarchar(50)
set @Search = 'Some String'

SELECT 
        * 
FROM 
        Table
WHERE 
        Username like '%' + @search + '%' 
OR 
        Description like '%' + @search + '%' 
OR  
        Title like '%' + @search + '%' 
```

这就是你的意思吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-27T18:06:54.307

在 PHP 和 MS SQL 中，你必须做这样的事情。

```
<?PHP  if(isset($_POST['buttonsearch']))
      {
      $key_search = (isset($_POST['txtsearch_client']) ? $_POST['txttxtsearch_client'] : '#');

      $query_se = "SELECT TOP(10) *
                   FROM clients WHERE clientid  LIKE '%{$key_search}%' OR
                                       clientfname LIKE '%{$key_search}%' OR
                                       clientlname LIKE '%{$key_search}%'
                                                   ORDER BY clientid DESC";

      }
      $sql_se = sqlsrv_query($conn,$query_se);
      if( $sql_se === false ) {
     die( print_r( sqlsrv_errors(), true));
                            }

      while( $obj_se = sqlsrv_fetch_object($sql_se)) {
            echo "<tr>
                       <td> $obj_se->clientid </td>
                       <td> $obj_se->clientfname </td>
                       <td> $obj_se->clientlname </td>
                  <tr>";                             } 
       exit();

   ?> 
```

# c# - `stackalloc` 关键字的实际使用

> ID：785226
> 
> 赞同：168
> 
> 时间：2009-04-24T09:51:30.780
> 
> 标签：c#, keyword, stackalloc

有人`stackalloc`在用 C# 编程时实际使用过吗？我知道它是做什么的，但它唯一一次出现在我的代码中是偶然的，因为 Intellisense 在我开始输入时会建议它`static`，例如。

虽然与 的使用场景无关，但`stackalloc`我实际上在我的应用程序中做了相当多的遗留互操作，所以我时不时可以求助于使用`unsafe`代码。但尽管如此，我通常会找到`unsafe`完全避免的方法。

而且由于 .Net 中单个线程的堆栈大小约为 1Mb（如果我错了，请纠正我），因此我更不愿意使用`stackalloc`.

是否有一些实际案例可以说：“这正是我不安全和使用的正确数量的数据和处理`stackalloc`”？

* * *

## 回答 #1

> 赞同：186
> 
> 时间：2009-04-24T10:08:32.237

使用的唯一原因`stackalloc`是性能（用于计算或互操作）。通过使用`stackalloc`而不是堆分配的数组，您可以减少 GC 压力（GC 需要运行更少），您不需要将数组固定下来，它比堆数组分配更快，并且在方法上自动释放退出（堆分配的数组仅在 GC 运行时释放）。此外，通过使用`stackalloc`而不是本地分配器（如 malloc 或 .Net 等价物），您还可以在范围退出时获得速度和自动释放。

性能方面，如果您使用`stackalloc`，由于数据的局部性，您会大大增加 CPU 上缓存命中的机会。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2009-04-24T10:26:27.780

我使用 stackalloc 为 [near] 实时 DSP 工作分配缓冲区。这是一个非常特殊的案例，需要尽可能保持一致的性能。请注意，一致性和整体吞吐量之间存在差异——在这种情况下，我并不关心堆分配太慢，只是关心程序中垃圾收集的不确定性。我不会在 99% 的情况下使用它。

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2018-12-09T11:18:58.527

跨度的 Stackalloc 初始化。在以前的 C# 版本中，stackalloc 的结果只能存储到指针局部变量中。从 C# 7.2 开始，stackalloc 现在可以用作表达式的一部分并且可以针对跨度，这可以在不使用 unsafe 关键字的情况下完成。因此，而不是写

```
Span<byte> bytes;
unsafe
{
  byte* tmp = stackalloc byte[length];
  bytes = new Span<byte>(tmp, length);
} 
```

你可以简单地写：

```
Span<byte> bytes = stackalloc byte[length]; 
```

**这在您需要一些暂存空间来执行操作但希望避免为相对较小的大小分配堆内存的情况下也非常有用**

```
Span<byte> bytes = length <= 128 ? stackalloc byte[length] : new byte[length];
... // Code that operates on the Span<byte> 
```

*来源：* [C#——关于 Span 的一切：探索新的 .NET 支柱](https://msdn.microsoft.com/en-us/magazine/mt814808.aspx)

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2009-04-24T10:03:50.937

`stackalloc`仅与不安全代码相关。对于托管代码，您无法决定在哪里分配数据。默认情况下，值类型在堆栈上分配（除非它们是引用类型的一部分，在这种情况下，它们是在堆上分配的）。引用类型在堆上分配。

普通 .NET 应用程序的默认堆栈大小为 1 MB，但您可以在 PE 标头中更改此大小。如果您明确启动线程，您还可以通过构造函数重载设置不同的大小。对于 ASP.NET 应用程序，默认堆栈大小仅为 256K，如果您在两个环境之间切换，请记住这一点。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-10-14T15:24:37.557

这个问题有一些很好的答案，但我只想指出

**Stackalloc 也可用于调用原生 API**

许多原生函数需要调用者分配一个缓冲区来获取返回结果。例如，[CfGetPlaceholderInfo](https://docs.microsoft.com/en-us/windows/win32/api/cfapi/nf-cfapi-cfgetplaceholderinfo)函数`cfapi.h`具有以下签名。

```
HRESULT CfGetPlaceholderInfo(
HANDLE                    FileHandle,
CF_PLACEHOLDER_INFO_CLASS InfoClass,
PVOID                     InfoBuffer,
DWORD                     InfoBufferLength,
PDWORD                    ReturnedLength); 
```

为了通过互操作在 C# 中调用它，

```
[DllImport("Cfapi.dll")]
public static unsafe extern HResult CfGetPlaceholderInfo(IntPtr fileHandle, uint infoClass, void* infoBuffer, uint infoBufferLength, out uint returnedLength); 
```

您可以使用stackalloc。

```
byte* buffer = stackalloc byte[1024];
CfGetPlaceholderInfo(fileHandle, 0, buffer, 1024, out var returnedLength); 
```

# java - 如何在Java中实现递归返回文件迭代器的方法

> ID：785228
> 
> 赞同：5
> 
> 时间：2009-04-24T09:52:23.070
> 
> 标签：java, iterator

我想实现这样的方法：

```
public Iterator<File> getFiles(String root) {
  // return an Iterator looping through all files in root and all files in sub-directories of roots (recursively)
} 
```

`yield return`在 C# 中，这可以通过关键字轻松实现。在 Java 中，我怀疑我最终必须编写大量复杂的代码才能完成它。这个问题有什么好的解决办法吗？

**编辑：**我希望返回的迭代器是“惰性的”，即只在`next()`调用时返回一个新文件。（这是 C#`yield return`提供的行为。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-24T09:56:15.230

此代码可能是您的解决方案[http://snippets.dzone.com/posts/show/3532](http://snippets.dzone.com/posts/show/3532)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-24T09:56:01.423

[Apache Commons FileUtils](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html)提供了[迭代器](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html#iterateFiles%28java.io.File,%20java.lang.String[],%20boolean%29)方法来遍历目录和子目录。这可以满足您的需求，并且可以为您节省大量工作。

例如

`Iterator fi = iterateFiles(new File("."), String[] {".csv"}, true)`

查找当前目录下的所有 .csv 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-24T10:39:01.197

我可能错过了一些东西，但你为什么不创建自己的实现迭代器的迭代器类。然后你只需要在你的迭代器中实现一个惰性的 next() 方法。

# asp.net - Sharepoint 的技能培养与 ASP.NET 有何不同？

> ID：785229
> 
> 赞同：3
> 
> 时间：2009-04-24T09:53:12.273
> 
> 标签：asp.net, sharepoint

Sharepoint 开发需要多少 ASP.NET 或 C#？您是否需要开发 N 层 Web 应用程序、设计模式、测试驱动开发、强大的 SQL 背景等方面的经验？

我听说 Sharepoint 开发不同于通常使用 ASP.NET 等技术构建的企业应用程序。

如果我了解 .NET、C# 的基础知识，并且对 ASP.NET 有一定的经验，并且对 Web 表单、Web 部件、母版页等中的页面生命周期等内容有很好的理解，那么我准备好使用 Sharepoint 了吗？

此外，Infopath 是否在 Sharepoint 开发中大量使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-24T10:22:53.653

如果您已经了解 ASP.NET，那么您已经准备好进行 SharePoint 开发。熟悉其 SDK 和其他[开发理念](http://msdn.microsoft.com/en-us/sharepoint/default.aspx)。SharePoint Dev Wiki 也可能[是一个好的开始](http://sharepointdevwiki.com/display/public/Welcome)。

新开发人员必须从最终用户的角度学习 SharePoint。我正在用[这本书](https://rads.stackoverflow.com/amzn/click/com/1590598296)来培训新人。如果您不了解这些概念，则可能很难开始编码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-24T10:20:24.313

这实际上取决于您想要实现什么，有多种方法可以为 SharePoint 开发一些东西，每种方法都需要不同的技能。

例如：SharePoint 公开了许多 Web 服务，您可以使用它们来完成许多任务。从该 Sharepoint 开始，您可以直接引用许多 DLL，以便访问更细粒度的详细信息，但使用起来更加繁琐。

这些都不需要任何 ASP.NET 知识，但都可以使用 sharepoint。

如果您打算制作 WebPart，那么是的，ASP.NET 知识是一大优势。如果您想使用 Sharepoint 工作流程，那么您需要了解 WF。

没有人适合开发sharepoint，坦率地说，这使得它很难招聘到人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-25T22:28:09.517

我不认为它有太大的不同，真的。我一直在同时学习两者并取得了一些成功。当然，ASP.NET 和 SharePoint 只是不同的东西，但是 SharePoint 是建立在 ASP.NET 之上的，所以只要你了解 ASP.NET，你也就了解了 SharePoint。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-25T22:14:22.203

我想这真的取决于你所说的 SharePoint 开发是什么意思。在我看来，您必须了解 SharePoint 开箱即用的功能，以免重新发明轮子。对象模型、Web 服务以及如何使用解决方案部署您的工作是您必须快速掌握的内容，才能成为一名优秀的 SharePoint 开发人员。

由于我更像是一名开发人员时的顾问类型，所以我不能说你是否应该了解 SQL 和 AD，但我想这不会有什么伤害。如果您精通 C#，那么仔细研究一下 PowerShell 可能也是一个好主意，因为看起来微软肯定会将 PowerShell 集成到包括 SharePoint 2010 在内的所有服务器产品中。

# c++ - 基于 boost 的单元测试套件编译缓慢

> ID：785230
> 
> 赞同：2
> 
> 时间：2009-04-24T09:53:44.910
> 
> 标签：c++, unit-testing, gcc, boost, compilation

我使用 boost.test 库为我的应用程序编写单元测试。

问题是，当一个包含测试套件的特定 *.cpp 文件增长到一定大小时，该文件的编译变得非常缓慢。

我使用 BOOST_AUTO_TEST_CASE 宏来定义测试用例。

升压版本是 1.34.1

构建环境是 Fedora 9 下的 autotools + gcc 4.3。

如果有人指出这种行为的可能原因，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-24T10:43:05.883

您可能会用完物理内存，并且系统开始使用交换（文件/分区）比正常情况（抖动）更密集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-24T20:38:56.340

尝试找出发生了什么的一种方法是使用 gcc 选项 -Q 并查看正常情况和极慢情况之间的区别在哪里。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-03-17T00:46:37.620

您可以拆分相同的测试套件以跨越多个测试文件。这应该可以缓解您的问题。

# .net - IE 6 中不需要的背景颜色

> ID：785232
> 
> 赞同：1
> 
> 时间：2009-04-24T09:54:07.683
> 
> 标签：.net, html, css

我有一张图片，并且 IE6 中的图片出现了不需要的背景颜色。虽然它在所有其他 IE6 中看起来都很好，但它与不需要的背景颜色混淆了。有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-24T09:57:57.410

图片是透明的PNG图片吗？如果是这样，IE6 根本不支持 PNG 透明度。如果您确实需要支持 IE6，可以在[某处](http://homepage.ntlworld.com/bobosola/)使用基于 JavaScript 的修复程序。我知道有些公司拒绝升级 IE，除非绝对必要，但我真的不再支持 IE6，因为当前版本是 8，大多数人现在应该有 7。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-24T12:43:11.303

如果是 PNG 透明度，您也可以只保存 .jpg（或 .gif）并使用以下任何技术选择正确的 css/背景 url：[css hacks](http://www.webdevout.net/css-hacks)

一个简单的 *。在这种情况下可能就足够了:)

祝你好运 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-24T10:23:06.197

这可能是 IE 放置在图像上的默认边框。要快速找到将属性border="0" 添加到您的图像标签，您可以根据需要将其移动到您的CSS 文件中。

切线 Eric Myer 拥有所有[CSS 重置](http://meyerweb.com/eric/tools/css/reset/)文件的父亲，用于修复这些类型的问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-24T09:57:13.043

有一些用于 Firefox 的工具（如[CSSViewer](https://addons.mozilla.org/en-US/firefox/addon/2104)）可以显示应用到某个元素的所有样式。检查一下，看看那里是否有任何背景颜色定义。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-24T10:18:09.920

根据您的经验水平（如果我低估了这一点，请原谅），但也可能是您设置的颜色在不同的浏览器中呈现不同。你能张贴一张图片或一些资料来解释究竟是什么问题吗？

如果它是您尝试与图像匹配的 HTML 颜色，则在图像文件中设置图像颜色的 1 个像素的重复背景可能更容易，而不是尝试让不同的浏览器都呈现相同的颜色方式（更不用说不同的显示器了。）

如果我离题了，我很抱歉，但根据我的经验，即使是最有经验的人有时也会暂时忘记基础知识。

如果您需要示例代码，请告诉我。

# objective-c - 如果我的属性没有设置器（只读），如果它不是 NSNumber 或 NSValue，UIKit 是否会保留该值？

> ID：785239
> 
> 赞同：2
> 
> 时间：2009-04-24T09:57:34.040
> 
> 标签：objective-c, iphone, memory-management

我想弄清楚在哪些情况下我需要关心属性的内存管理。我从一个我不记得的网站上写下了一些东西，他们说如果一个属性有除 NSNumber 或 NSValue 以外的任何值，并且如果它没有设置器，那么 UIKit 将自动释放旧值并保留新值。虽然我不明白为什么 UIKit 会在没有设置器的情况下设置任何东西（我猜是直接设置值）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-24T14:53:14.160

如果属性声明为：

```
@property(retain) NSString *prop; 
```

当您分配新值时，它将释放旧值。

但是，请确保在您的 dealloc 方法中也释放它：

```
- (void)dealloc {
    [prop release];

    [super dealloc];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-24T14:59:51.600

您应该（重新）阅读[Cocoa 的内存管理指南](http://developer.apple.com/documentation/Cocoa/Conceptual/MemoryMgmt/MemoryMgmt.html)。属性的内存管理规则与所有其他对象相同。

# crowdsourcing - 如何确保通过众包收集的数据的正确性？

> ID：785246
> 
> 赞同：4
> 
> 时间：2009-04-24T10:01:37.230
> 
> 标签：crowdsourcing

我有一个网站，用户正在输入他们购买的某些产品的数据。

如何确保通过众包（使用户能够投票/编辑产品）输入的数据的正确性，最大限度地减少管理员需要完成的工作量？我正在寻找一些方法、最佳实践等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-24T10:15:05.170

你在收集什么样的数据？

你说的是众包，因此（我假设）在这群人中聚合数据。当他们谈论他们购买的产品时，我怀疑你会混淆产品属性和价格。

一些可能的方法。如果您的用户正在输入非数字数据（例如颜色），只需记录最常见的条目或模式（最常输入的）。

如果他们正在输入数字数据，请丢弃异常值。即，将最低和最高结果分箱，并对其余结果进行平均（例如，您可以对价格进行此操作。这是电子交易所用于解决许多交易的收盘价的方法）。

根据您的应用程序，您可能希望对最近的条目有历史偏见。

但这一切都取决于您的应用程序，以及您准备进行多少存储和处理数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-24T10:09:26.010

确保在每次操作时记录 IP 地址，恶意用户或机器人会践踏会话数据或 cookie。这样做可以确保单个实体不会因​​为看起来是多个用户而歪曲任何结果或做任何剧烈的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-11-25T09:29:19.230

作为高级数据，可以从具有相关正确性值的“人群”中收集。看着 SO，来自拥有 1000 多个代表的人的回答或回应，比普通用户更重要。寻找验证和三角测量，如果你也在听人群中的一个单一的声音，那么它可能不值得那么多。如果其他声音加入，那么您知道您正在做某事，再次用 SO 术语来说，我们都有机会提出问题。

我最近看到了一些非常好的 iPhone 应用程序，它们依赖于众包来获取数据，然后通过询问其他用户是否正确来验证它。

# .net - Mscorcfg.msc 消失了！

> ID：785248
> 
> 赞同：1
> 
> 时间：2009-04-24T10:01:52.610
> 
> 标签：.net, cas

过去，我使用 Mscorcfg.msc 实用程序配置 .NET 代码组。我可以在配置面板/管理工具/.NET 配置工具（或类似的工具）中启动它。

但是现在，它不再出现了，我尝试在%WINDIR% 目录中搜索，但Mscorcfg.msc 确实消失了。

现在，如何配置代码组？（如果可能，不使用命令行 TT）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-09-02T15:59:00.783

关于为什么它消失的完整故事 .msi 使它重新出现在这里：http: [//blogs.msdn.com/astebner/archive/2006/01/23/516671.aspx](http://blogs.msdn.com/astebner/archive/2006/01/23/516671.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-08-27T00:35:09.627

显然，您需要为 vs 2008 和 .NET 3.5 下载新版本的 .NET sdk：

[http://www.microsoft.com/downloads/details.aspx?FamilyId=E6E1C3DF-A74F-4207-8586-711EBE331CDC&displaylang=en](http://www.microsoft.com/downloads/details.aspx?FamilyId=E6E1C3DF-A74F-4207-8586-711EBE331CDC&displaylang=en)

# c# - C# 比较字符串 - 不同的代码页

> ID：785257
> 
> 赞同：0
> 
> 时间：2009-04-24T10:05:47.033
> 
> 标签：c#, string, compare

我从文本文件中读取了两个字符串进行比较，当我尝试将这些文件与 winmerge 或 pspad 进行比较时，它们都显示为相同的文本字符串。如果我将它们与以下函数进行比较，它将失败：

```
string string1 = File.ReadAllText(@"c:\file1.txt");
string string2 = File.ReadAllText(@"c:\file2.txt");    
bool stringMatch = false;
if (string1.Equals(string2, StringComparison.InvariantCulture)){
    stringMatch = true;
}
//stringMatch is false here 
```

经过一番搜索，似乎 " 和 ' 是不同的：

```
file1.txt 的内容：é"'(§è!çà)-
file2.txt 的内容：é”'(§è!çà)-

```

有什么方法可以正确比较这两个字符串并匹配那些“&”字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-24T10:33:58.120

好吧，您在 WinMerge 或 pspad 中没有 .NET 字符串，因此在解码时很可能会出错。您需要解释您的*确切*情况：

*   数据是否在文件中（因此是 WinMerge/pspad）？
*   您如何在 .NET 中加载文件？
*   您如何在 WinMerge 等中加载文件？

编辑：好的，根据评论-文件的编码是什么？您是否在任何地方的 WinMerge 中指定它？.NET 将使用 UTF-8（因为您没有指定任何其他编码）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-24T10:08:31.723

您可以将它们都转换为`byte[]`使用下面的方法`System.Text.Encoding` ，然后比较`byte[]`数组

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-24T10:14:22.253

看起来您想使用采用 StringComparison 的重载。我猜考虑到当前的 senario 你想要“Ordinal”值，但你可能想要其他一个取决于你在做什么。

[http://msdn.microsoft.com/en-us/library/system.stringcomparison.aspx](http://msdn.microsoft.com/en-us/library/system.stringcomparison.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-24T11:18:34.627

阅读“[每个软件开发人员绝对、肯定必须了解 Unicode 和字符集（没有任何借口！）](http://joelonsoftware.com/articles/Unicode.html) ”之后，您应该做好自己解决问题的准备。

# sharepoint - 可以访问共享点站点

> ID：785259
> 
> 赞同：0
> 
> 时间：2009-04-24T10:06:22.663
> 
> 标签：sharepoint, iis

我为我的共享点站点打开了目录浏览（在 IIS 中），然后再次将其关闭，现在每次尝试通过 Web 浏览器访问该站点时，我都会收到 404 错误，找不到页面。

我知道这与身份验证有关，但不知道从哪里开始查找/修复？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-24T14:46:28.467

你能多介绍一点背景吗？所有页面都得到 404 吗？你可以点击布局页面吗？例如：

```
http://YOURSITE/_layouts/settings.aspx 
```

SharePoint 中的 404 不应该从表面上看。检查您的 ULS 登录：

```
C:\Program Files\Common Files\Microsoft Shared\Web Server Extensions\12\LOGS 
```

[昨天](http://twitter.com/pwalke/statuses/1598274069)我们遇到了一个类似的问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-24T11:23:47.580

更多解决此问题的工作：

而不是试图找出设置/重置的权限，只需删除 Web 应用程序，指定**Yes**到*'Delete IIS Web'*站点和**No**到*'Delete content databases'*。

这将保留内容数据库（包含您当前无法访问的所有内容）。

然后创建一个具有相同名称和主机标头的新 Web 应用程序，并输入现有的内容数据库名称。

然后，这应该重新创建具有正确权限的 IIS Web 应用程序并连接到现有的内容数据库。

# objective-c - 当我在 dealloc 方法中将属性设置为 nil 时，究竟会发生什么？

> ID：785260
> 
> 赞同：1
> 
> 时间：2009-04-24T10:06:27.717
> 
> 标签：objective-c, iphone, cocoa-touch

例子

```
-(void)dealloc {
    self.myOutletProperty = nil;
    [super dealloc];
} 
```

我想会调用一种虚拟二传手。但是这里到底发生了什么？为什么是零？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-24T11:33:35.340

您应该知道，该属性只是语法糖。

例如：

```
@property(nonatomic, retain) NSString *myString; 
```

将转换为

```
- (NSString*)myString { 
    return myString; 
}

- (void)setMyString:(NSString*)newString {
    if (myString != newString) {
        [myString release];
        myString = [newString retain];
    }
} 
```

所以如果你以这种方式声明@property，它实际上会释放

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-24T11:25:41.567

1.如果属性类型是“复制”或“保留”，那么

self.myOutletProperty = nil; 与 [myOutletProperty release] 相同；

2.如果属性类型是“分配”，那么

self.myOutletProperty = nil; 没做什么

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-24T21:17:30.553

要记住的一件事是，即使将您的属性设置为 nil 也可以正常工作，我建议`[object release]`改为调用您的 dealloc 方法。这样，如果您编写我​​们自己的引用另一个 ivar（可能已经发布）的 setter 方法，或者您在其他地方的该属性上注册了 KVO 通知，那么您是安全的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-24T10:23:40.827

Nil 与 null 相同，但用于对象。意思是没有对象。

点语法与调用 [self setMyOutletProperty:nil] 相同。

因此，您只需从某个属性中删除一个对象。含义取决于您在谈论什么属性。

# sitecore - Sitecore：如何在不同部分访问相同的字段名称

> ID：785265
> 
> 赞同：10
> 
> 时间：2009-04-24T10:09:07.790
> 
> 标签：sitecore

我在 sitecore 中有数据模板 dt1，它在“数据”部分中有字段“标题”。我还有数据模板 dt2，它在“门户”部分具有字段“标题”最后我有数据模板 dt3，它使用 dt1 和 dt2 作为基本模板。

如何在 xslt 中找到门户/标题的内容？

在我的代码中，当我编写 <sc:text field="header" /> 时，我得到了 data/header 的内容（因为这个节点首先出现）。我知道如何在 .net 中执行此操作，但我需要使用 xslt。

/callprat

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2010-06-18T13:23:55.443

我在 .Net 的一个项目中找到了解决这个问题的方法。客户设置的模板之一有“桶”，其中有不同的字段部分，但桶之间的字段是相同的。我使用 LINQ 按部分名称对字段进行分组，然后处理每个字段分组。

```
var sections = currentItem.Fields.GroupBy(field => field.Section);
foreach (var section in sections)
{
    if (section.Key.StartsWith("Bucket"))
    {
        buckets.Add(new Bucket(section)); //I made a bucket item, 
                                          //and passed each IGrouping<Field> to it
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2011-09-21T19:36:18.817

```
item.Fields.Where(field => field.Section.ToUpper() == "META DATA" && 
                           field.DisplayName.ToUpper() == "TITLE").First().Value; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-25T00:48:43.853

你不能。

坦率地说，我也不知道有任何支持的方式从 .NET 中做到这一点。

这直接来自[数据定义参考](http://sdn.sitecore.net/upload/sitecore6/datadefinitionreference-a4.pdf)，第 2.1.1 节

> 2.1.1 数据模板字段
> 
> 数据模板字段定义了影响字段在内容编辑器和页面编辑器中的行为方式的用户界面控件和其他属性。有关字段的更多信息，请参阅第 4 章，模板字段。
> 
> 注意 定义字段名称时，请确保它们即使在字段部分之间也是唯一的。XSLT 和 .NET 代码都单独使用字段名称，而不引用部分，从字段中提取内容。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-04-28T12:22:19.230

您可以通过 ID 引用字段：

C＃：

`string value = item["{00000000-0000-0000-000000000000}"]`

或者

`Field field = item.Fields["{00000000-0000-0000-000000000000}"]`

我还没有尝试过，但我认为它也可以在 XSLT 中工作：

`<sc:text field="{00000000-0000-0000-000000000000}" />`

# php - 如何对我的 PHP 脚本进行速度测试？

> ID：785268
> 
> 赞同：1
> 
> 时间：2009-04-24T10:09:48.100
> 
> 标签：php, zend-framework, timer, performance

我有一个运行缓慢的脚本，我想知道如何计时并查看哪些修复程序可以提高速度。是否有某种 PHP 计时器？

更新：我想我应该澄清一下......运行缓慢的脚本是我的邮件列表脚本，它向列表中的每个人发送电子邮件。因此，我遍历了一系列订阅者，并一一向他们发送电子邮件。它太慢了，我认为看看迭代数组需要多长时间会很有趣。所以我正在寻找一种快速简便的方法来测试它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-24T10:28:02.877

您可以测量页面的加载时间并根据需要进行调整。

我喜欢像[http://www.phpbench.com/](http://www.phpbench.com/)这样的网站，它告诉你更多关于 php 的基本需求。

Offcourse 使用 Zend Framework 编写 php 实际上并没有真正说明您的代码。您是否遵循 zend 编码标准？

[http://www.php.net/getrusage](http://www.php.net/getrusage)可能对您的时间问题有用。

祝你好运 ！

编辑：getrusage 函数的额外链接（在 php.net 页面上也有提及）。

编辑 2：对于您的邮件列表，您可以检查 phpbench.com，例如在循环之前使用计数，这可以节省一些时间。

你是如何发送邮件的？这可能是一个瓶颈。

祝你好运 ！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-24T10:33:04.470

我知道并且一直使用的最好的事情就是使用分析器。我选择的分析器是[Xdebug](http://www.xdebug.org/docs/profiler)，它有一个内置的分析器，在你的 PHP 设置中安装它是相当容易的。一旦启动并运行，它可以为您提供各种调试和分析信息，如果您高兴的话，可以通过惊人的[kCacheGrind 工具](http://kcachegrind.sourceforge.net/html/Home.html)（*可视化和报告堆栈以及绘制应用程序流*）来读取 Xdebug 的输出格式Linux 露营车。没有这些工具我该怎么办！？

此外，Zend 框架在速度方面存在一些缺陷，主要与没有足够使用 Zend_Cache 类有关，或者您可能应该使用 Zend_Registry 类的复杂类层次结构。

快乐的剖析。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-24T22:13:06.550

使用队列怎么样？对我来说似乎是个好主意，因为随着列表的增长，有一天你会达到邮件服务器的限制。[在 PEAR](http://pear.php.net/package/Mail_Queue)中有一个流行的实现这个队列的东西，但基本上你只需要一个 cron 作业和一个数据库表。

我正在 ZF 中构建类似的东西，所以我很想看看会发生什么！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-28T07:53:42.277

我最终使用了一个与此类似的计时器类：http: [//forum.codecall.net/php-tutorials/4254-php-timer-class.html](http://forum.codecall.net/php-tutorials/4254-php-timer-class.html)

我刚刚在循环开始时启动了一个计时器，并在每次迭代结束时记录了持续时间。发现平均而言，每封电子邮件需要 3 到 4 秒！每个电子邮件爆炸五分钟有点太多了。是时候重构...

# c# - 如何告诉 C# 省略在序列化期间创建默认属性？

> ID：785270
> 
> 赞同：5
> 
> 时间：2009-04-24T10:10:27.943
> 
> 标签：c#, serialization

我有一个序列化为 XML 文件的类。有几个很少使用但总是创建的属性。如果我在 XML 中删除它们，反序列化仍然有效，因为它们具有默认值。

这些不必要的 (bool) 属性使 XML 更难阅读。

我可以以某种方式告诉 C# 省略仍然具有默认值的元素或属性吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-24T10:12:34.287

指定[DefaultValueAttribute](http://msdn.microsoft.com/en-us/library/system.componentmodel.defaultvalueattribute.aspx)，如果值匹配，则不会输出。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-24T10:15:19.180

罗兰有简单价值观的答案。对于更复杂的场景，您可以添加一个名为`public bool ShouldSerializeFoo()`(for property `Foo`) 的方法 - 它返回`false`，它不会被序列化。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-04-24T10:14:30.897

使用 XMLIgnore() 属性标记要在序列化/反序列化中忽略的属性。

# c++ - 成功 cocreateinstance 后访问 COM 方法失败

> ID：785271
> 
> 赞同：2
> 
> 时间：2009-04-24T10:10:32.187
> 
> 标签：c++, visual-studio, com

在成功 coInitialize 和 cocreateinstance（COM 服务器注册是完美的）之后。当我访问类中的方法时，它返回错误：“XYZ.exe (OLEAUT32.DLL) 中的第一次机会异常：0xC0000005：访问冲突”。

通过逐步调试，我发现它在调用时会出现此错误

```
// make the call
SCODE sc = m_lpDispatch->Invoke(dwDispID, IID_NULL, 0, wFlags, &dispparams, pvarResult, &excepInfo, &nArgErr); 
```

在 OLEDIST2.CPP 文件中。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-24T12:21:47.627

谢谢你的时间。

问题最终解决了。

问题在于将 COM 服务器的类型库 (tlb) 导入到我的客户端应用程序中。因此，对象得到一个损坏的指针。当调用成员函数时，它会给出 ACCESS VOILATION 错误。

我实际上使用“CLASS WIZARD”在我的 Visual C++ 应用程序中导入了类型库，如@MSDN 链接： http: [//msdn.microsoft.com/en-us/library/aa279228](http://msdn.microsoft.com/en-us/library/aa279228(VS.60).aspx) (VS.60).aspx 这实际上导致了上述情况问题。

后来我发现通过使用简单的#import "xyz.tlb" 导入类型库，它会生成两个文件 .tlh 和 .tli 文件，其中还包含所有类和成员函数定义。当我在我的项目中使用这些文件时，它起作用了。

对不起，打扰你......

谢谢和问候桑迪普河。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-24T10:20:02.710

现在我可以想到以下检查：

*   只需检查您是否有机会调试并查看 `m_lpDispatch`. 值是否正确？（不是NULL）
*   只是检查是否不小心 `CoUninitialize()`被调用了？
*   只需检查 COM 对象是否正确引用计数？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-24T11:26:22.270

根据您的代码，唯一立即跳出的是 m_lpDispatch 可能是 NULL 或无效指针。该行中的任何其他内容都不会导致访问冲突，因为它实际上并没有访问任何内存。

如果您可以确认 m_lpDispatch 确实是一个有效变量，则可能是 Invoke 调用的方法导致了问题。如果是这样，那么您可能希望在 Visual Studio 中为访问冲突打开第一次机会异常处理。

*   去：`Debug -> Exceptions -> Win32 Exceptions`
*   检查“访问冲突”

然后在调试器下运行您的方案。它将导致 Visual Studio 在访问冲突点中断。这应该使实际问题所在的位置更加明显。

# java - 门户/portlets 编程 - portlet 链接/页面流

> ID：785277
> 
> 赞同：2
> 
> 时间：2009-04-24T10:12:55.317
> 
> 标签：java, portlet, portal-system

我正在编写我的第一个基于 portlet 的应用程序（对于 liferay，但解决方案应该与容器无关），我想知道人们如何解决向用户提供“引导”到不同 portlet 的链接（可能在门户中的不同“页面”上） ）。

虽然您可以轻松地在您的 portlet 中拥有不同的视图模式，但是您如何链接到另一个 portlet 并且（也许）还传递参数？

**我不是在谈论portlet 之间的简单通信，我感兴趣的是真正的页面流。**

示例：您的页面 A 带有一个显示新闻项目列表的 portlet。然后你有页面B，它的配置方式我想显示一个新闻项目（例如它周围的不同portlet）

是否有一个通用的解决方案来链接到页面 B 并告诉 news-Detail-Portlet 它应该显示项目 XYZ？

快速而肮脏的解决方案是通过 news-list-portlet 的编辑模式配置目标链接。但这有几个缺点： - 复杂的 portlet 可能有多个目标 URL，这会导致门户管理员的大量配置工作 - url 可能不遵循允许简单参数注入的方案

我想到了一个解决方案，但这需要付出巨大的努力，并且可能需要对目标 portlet 进行更改，如果您使用 3rd 方 portlet，这并不总是可行的。

我的解决方案如下所示：（草稿！）

Portlet 使用其 Portlet ID 在中央服务上注册，当 Portlet 想要链接到 Portlet 时，它可以根据符号名称进行查找。这将减轻管理员的痛苦，因为可以“自动发现”portlet。该服务还可以提供 UI 以根据源和目标 portlet 连接 portlet。

可以更改的 portlet 的 URL 生成可以通过对 portlet 的服务调用来解决，该 portlet 使用注入的参数生成整个 URL 并返回它。对于您无法更改的 portlet，您必须附加参数并希望它能够正常工作。：-/

有什么建议么？有更简单的解决方案吗？现有的解决方案？

谢谢！

帕特里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-24T12:50:26.170

据我所知，Portlet Specification 没有涵盖这一点。所以没有便携的解决方案。对于 Liferay，您始终可以使用他们针对此问题的自定义标签库。Websphere Portal 也有类似的机制。

可以在[这里](http://jdem.cz/bcjx8)和[这里找到一些东西](http://jdem.cz/bcjy4)

通常我会尽量避免这种情况并使用标准的 IPC 机制（公共渲染参数或事件）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-24T10:25:46.953

对于 JSR 286 规范，可以使用事件进行 portlet 间的通信。对于较旧的 JSR 168，没有经过认可的方法可以这样做。如果您找到适合您的方法，请使用它。

[曼宁](http://www.manning.com/hepper/)免费赠送一本旧书（需要注册）。你可以在那里找到一些想法。

# linux - 使用带有不可打印分隔符的 cut

> ID：785283
> 
> 赞同：21
> 
> 时间：2009-04-24T10:15:03.407
> 
> 标签：linux, command-line

是否可以使用 cut 并将不可打印的字符作为分隔符？例如，我希望将“^A”字符（也表示为 \001）作为分隔符。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2009-04-24T15:59:34.217

如果你使用 Bash，

```
cut -d $'\001' ... 
```

工作（见[Bash 参考手册#3.1.2.4 ANSI-C 引用](http://www.gnu.org/software/bash/manual/bashref.html#ANSI_002dC-Quoting)）。

其他（更便携的）选项，

```
cut -d `echo -e '\001'` ...

FS=`echo -e '\001'`
cut -d $FS ... 
```

或者直接使用 Alnitak 和 etlerant 提到的 ^V 插入控制字符——在 shell 命令行和 vi 等编辑器中，这意味着“不要专门处理我接下来键入的内容”。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-24T10:34:39.710

是的，这是完全可能的。

如果在 shell 中键入，请按`^V`和 然后`^A`将`^A`逐字逐句插入当前行，而不是将其视为正常的“转到行首”命令：

```
% cat -v foo
abc^Adef^Aghi
% cut -d^A -f2 foo
def 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-23T17:46:05.753

例如，如果您不可打印的分隔符`tab`相当于，`\t`并且您想找到由制表符分隔的每一行的第二个到末尾的项目，您可以使用这个：

```
cut -d $'\t' -f2- tablimited.csv 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-24T10:36:11.500

CTRL-V CTRL-A ?

# php - 是否有任何免费的命令行脚本可以重新格式化 PHP 源代码？

> ID：785287
> 
> 赞同：3
> 
> 时间：2009-04-24T10:15:30.240
> 
> 标签：php, svn, coding-style, code-formatting

我正在使用预提交挂钩来检查我们员工提交的 PHP 源代码，每个人都对结果非常满意。工作人员已经同意重新格式化代码以遵循（可定制的）提交风格规则是有用的。是否有任何 FOSS 脚本可以从命令行执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-24T10:20:18.807

[PHP_CodeSniffer](http://pear.php.net/package/PHP_CodeSniffer)是一个不错的 PEAR 包，但它只嗅探 PHP 文档以检测是否违反编码标准——它不会修复违规或重新格式化文档。然而，这是一个很棒的包，每个 PHP 开发人员至少应该知道——也许你可以让你的同事自己清理他们的代码。

您可以按照您希望的方式在 PHP_CS 中编辑嗅探过滤器。另一方面，我喜欢默认设置，这至少是编写更好代码的良好开端。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-08-19T20:58:37.487

正在寻找同样的东西，只是在 PEAR 存储库中遇到了 PHP Beautfier 包：

[http://pear.php.net/package/PHP_Beautifier](http://pear.php.net/package/PHP_Beautifier)

希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-24T10:29:10.643

不是一个完整的答案，但既然你提出来，**应该**有一个命令行 PHP 美化器。在此之前，您只能使用 sed 来修复选项卡。

问题是，如果不为 PHP 语言编写解析器，就很难写出你想要的东西。因此，如果有人要编写这样的工具，它还应该提供 lint 功能，独立于平台并在非常无限制的许可下发布。

考虑到上述情况，我认为这就是为什么（目前）不存在（我可以找到）的原因。我将其发布为对这个想法表示感谢的答案，这也是 CW 的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-24T10:21:13.937

不在命令行上，但可能有用：PHP/Eclipse 可以进行自动源格式化，我认为您可以一次性在整个项目上运行它。[http://www.phpeclipse.com/](http://www.phpeclipse.com/)。

# windows - 关于 Windows7 中的自动运行功能

> ID：785288
> 
> 赞同：0
> 
> 时间：2009-04-24T10:16:27.553
> 
> 标签：windows, autorun

我有一个可以在 XP 和 Vista 中运行的 Autorun.inf，但我发现 Windows7 无法识别和使用它，Windows7 是否放弃了自动运行功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-24T10:19:32.053

我想这个页面应该可以帮助到你：[http ://www.itechtalk.com/thread3918.html](http://www.itechtalk.com/thread3918.html)

# c# - 为什么 LINQ to SQL 实体关联在插入新记录时会创建新（重复）行？

> ID：785291
> 
> 赞同：6
> 
> 时间：2009-04-24T10:18:28.920
> 
> 标签：c#, .net, asp.net, linq, linq-to-sql

我正在尝试使用 LINQ-to-SQL 插入新实体，并且实体与用户实体相关联。新实体的插入成功，但我现有的用户实体被插入，就好像它是一个新用户一样。代码如下所示：

```
var someEntity = new Entity();
someEntity.User = this.User;
dataContextInstance.SomeEntities.InsertOnSubmit(someEntity);
dataContextInstance.SubmitChanges(); 
```

有谁知道为什么将用户作为一个全新的实体插入到用户表中？看起来 User.UserId 将成为映射到正在插入的 someEntity 的行的 UserId 列中的外键值。

感谢您的任何帮助/建议/评论

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-27T22:00:40.877

由于 User 实体先前已由另一个 DataContext 加载（希望现在应该被释放！），因此您必须将其附加到新的（当前） DataContext 否则 DataContext 会将其视为新实体而不是现有实体（数据库中已经存在）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-27T20:41:24.420

确保您对两个表使用相同的 DataContext**实例**。请参阅我的问题[here](https://stackoverflow.com/questions/795196/linq-problem-with-inserting-new-rows-that-have-references-to-existing-records)（我认为）对问题有更清晰的解释。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-04-24T10:53:49.710

对不起，我不明白？您想更新现有用户吗？someEntity 有什么用？

LINQ 尝试插入新用户是有道理的，因为您告诉它这样做。如果您只想更改您的用户之一，您需要从 SomeEntities 中选择他，进行更新，然后调用 SubmitChanges（LINQ 会识别，原始实体已被修改） - 没有 .InsertOnSubmit。

# extension-methods - 扩展方法是否违反软件工程原则？

> ID：785300
> 
> 赞同：3
> 
> 时间：2009-04-24T10:20:50.070
> 
> 标签：extension-methods

我倾向于回避扩展方法（在 C# 中），因为它违反了软件工程的“代码凝聚力”原则。

那么，它为什么会在那里？还是我的理解错了？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-24T10:24:40.730

相反，我认为明智地使用扩展方法可以提高代码凝聚力，因为您可以将方法和类放在一起执行相关任务。这种情况与 C++ 中的自由（静态）方法和 Koenig 查找没有什么不同，扩展访问`.`只是语法糖。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-04-24T10:25:53.927

扩展方法就像您的武器库中的任何工具。如果使用得当，它们是一个强大的补充，使您能够编写出其他方式难以表达的东西。使用不当，它们是一个笨拙的拐杖，可以将东西缝合在一起。

也就是说，我不同意你关于它违反代码凝聚力的说法——我认为实际上恰恰相反。如果您没有扩展方法，您将被迫使用分散在代码中各处的实用程序类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-24T11:22:47.067

我不认为扩展方法比一组静态方法更违反代码凝聚力。因为它们的核心扩展方法只是一组静态方法。C# 和 VB.Net 编译器只是为它们提供了一个很好的友好语法。

很长一段时间以来，人们一直在为他们无法控制的类创建静态实用程序方法，并且它们适合完善的工程实践。

# sql-server - 复制我的 SQL Server 数据库时保留时间戳

> ID：785305
> 
> 赞同：1
> 
> 时间：2009-04-24T10:22:46.213
> 
> 标签：sql-server, database, timestamp

我正在使用 Database>Tasks>Copy Database 向导将 SQL Server 2005 数据库从一台服务器复制到另一台服务器，它工作得很好，但时间戳列的值没有被复制。

有没有办法将时间戳值保留在数据库副本上？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-24T10:34:23.843

您是否可以使用备份然后将其还原到服务器？在某些情况下，可能会带来更多的麻烦，但它不止一次对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-24T10:53:54.733

数据库备份还原可能会起作用，但我使用的最佳方法是 SQL 数据比较： [http ://www.red-gate.com/products/SQL_Data_Compare/index.htm](http://www.red-gate.com/products/SQL_Data_Compare/index.htm)

使修补数据和架构更改（通过 SQL 比较产品）变得如此简单......

# c# - 如何对整数字符串进行排序？

> ID：785309
> 
> 赞同：11
> 
> 时间：2009-04-24T10:23:23.980
> 
> 标签：c#, .net, sorting

在对具有整数值的字符串列表进行排序时，我遇到了一个奇怪的问题。但是，某些值可以以某些字符为前缀。

例如

```
// B1, 5, 50, A10, 7, 72, B3, A1, A2 
```

基本上有页码，应该像这样排序：

```
// A1, A2, A10, B1, B3, 5, 7, 50, 72 
```

但是如果我使用默认字符串排序，那么这些将被排序为

```
// A1, A10, A2, B1, B3, 5, 50, 7, 72 
```

在 C# 中有什么解决方案吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-04-24T10:29:00.330

您正在寻找**[Alphanum 算法](http://www.davekoelle.com/alphanum.html)**。对您来说幸运的是，已经存在许多实现。见**[这里](http://www.davekoelle.com/alphanum.html)**。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-24T11:12:57.963

这就是我为我们的应用程序解决它的方法，顺序就像在 windows 目录中一样：

```
public class NaturalSortComparer : IComparer<string>
{
    public int Compare(string x, string y)
    {
        return StrCmpLogicalW(x, y);
    }

    [DllImport("shlwapi.dll", CharSet = CharSet.Unicode, ExactSpelling = true)]
    public static extern int StrCmpLogicalW(string x, string y);
} 
```

用法：

```
 NaturalSortComparer comparer = new NaturalSortComparer();
  return comparer.Compare(string1, string2); 
```

但这可能不是您想要的：

> // A1, A2, A10, B1, B3, 5, 7, 50, 72

这会给

> // 5, 7, 50, 72, A1, A2, A10, B1, B3

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-24T12:18:20.473

您正在寻找的是自然排序。

杰夫阿特伍德曾经在他的博客上发表了一篇很棒的文章，解释了这个概念并使用您可以作为示例的算法链接到各种其他来源。

[人类排序：自然排序](https://blog.codinghorror.com/sorting-for-humans-natural-sort-order/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-24T15:18:17.920

这是一个自定义比较器，它将按照您所需的顺序进行排序。*请注意，此代码中没有错误/健全性检查：它假定所有字符串的格式都正确。*

```
public class MyComparer : IComparer<string>
{
    public int Compare(string x, string y)
    {
        Match xMatch = Regex.Match(x, @"^(\D*)(\d+)$");
        Match yMatch = Regex.Match(y, @"^(\D*)(\d+)$");

        string xChars = xMatch.Groups[1].Value;
        string yChars = yMatch.Groups[1].Value;

        if ((xChars.Length == 0) && (yChars.Length > 0))
        {
            return 1;
        }
        else if ((xChars.Length > 0) && (yChars.Length == 0))
        {
            return -1;
        }
        else
        {
            int charsResult = xChars.CompareTo(yChars);

            return (charsResult != 0)
                ? charsResult
                : int.Parse(xMatch.Groups[2].Value)
                    .CompareTo(int.Parse(yMatch.Groups[2].Value));
        }
    }
} 
```

你可以像这样使用它：

```
List<string> testList =
    new List<string>() { "B1","5","50","A10","7","72","B3","A1","A2" };

testList.Sort(new MyComparer());    // A1, A2, A10, B1, B3, 5, 7, 50, 72 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-24T10:51:54.660

好吧，你总是可以 pInvoke Win32 API 函数`StrCmpLogicalW`，它完全符合你的要求（这是 Explorer 用来对文件名进行排序的函数）。唯一可能的缺点是排序不区分大小写。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-24T11:30:22.103

不确定性能，并确保可以优化，但它可以工作：

```
string[] sort(string[] data)
{
    return data
        .OrderBy(s => Regex.Match(s, @"^\D").Length == 0)
        .ThenBy(s => Regex.Match(s, @"\D*").Value)
       .ThenBy(s => Int32.Parse(Regex.Match(s, @"\d+").Value)).ToArray();
}

var result = sort(new string[] { "B1", "5", "50", "A10", "7", "72", "B3", "A1", "A2" }); 
```

# python - Twitter 数据挖掘：分离度

> ID：785327
> 
> 赞同：3
> 
> 时间：2009-04-24T10:30:18.020
> 
> 标签：python, twitter, dump, social-graph

我可以使用什么现成的可用算法来挖掘 twitter 数据，以找出 twitter 上 2 人之间的分离程度。

当社交图谱不断变化和更新时，它会如何变化。

然后，是否有任何我可以使用的 twitter 社交图数据转储，而不是进行如此多的 API 调用来重新开始。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-24T10:43:58.203

来自[推特 API](http://apiwiki.twitter.com)

**[什么是数据挖掘提要，我可以访问它吗？](http://apiwiki.twitter.com/FAQ&sp=1#WhatstheDataMiningFeedandcanInbsphaveaccesstoit)**

[数据挖掘提要](http://apiwiki.twitter.com/Streaming-API-Documentation&sp=2)是我们的 /statuses/public_timeline REST API 方法的扩展版本。它返回 600 个最近的公共状态，一次缓存一分钟。您最多可以每分钟请求一次，以获取 Twitter 上公开状态的代表性样本。我们免费向研究人员和爱好者提供此服务（并且没有服务质量保证）。我们所要求的只是您提供您的研究或项目的简要说明以及您将从其请求提要的 IP 地址；只需填写此表格。请注意，数据挖掘提要并非旨在提供 Twitter 上所有公共更新的连续流；有关即将推出的“firehose”解决方案的更多信息，请参见上文。

另请参阅：[流式 API 文档](http://apiwiki.twitter.com/Streaming-API-Documentation&sp=2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-03T16:34:30.267

有一家公司提供社交图的转储，但它被删除并且不再可用。正如您已经意识到的那样 - 这有点困难，因为它一直在变化。

我建议查看他们的 social_graph api 方法，因为它们以最少的 API 调用提供最多的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-03-25T09:09:21.817

可能还有其他方法可以做到这一点，但我刚刚花了 10 分钟的时间研究做类似的事情，偶然发现了这个 Q。

我会使用无向（和加权 - 因为我也想查看位置）图 - 在 py 中使用 JgraphT 或类似的；JGraphT 是基于 java 的，但包含不同的预先编写的算法。

然后，您可以使用一种称为 BellmanFord 的算法；与 Dijkstras 不同，接受整数输入并在图形中搜索具有整数输入且仅整数输入的最短路径。

[http://en.wikipedia.org/wiki/Bellman%E2%80%93Ford_algorithm](http://en.wikipedia.org/wiki/Bellman%E2%80%93Ford_algorithm)

我最近在一个飞行路线项目中使用它，迭代以找到具有最短“跳数”（边缘）的最短路径。

# windows - 如何使用不透明的子控件（或子窗口）创建透明窗口？

> ID：785332
> 
> 赞同：2
> 
> 时间：2009-04-24T10:33:44.580
> 
> 标签：windows, winapi, window, transparent

首先，我正在使用 C++ 开发 Win32。

我一直在尝试用一个应该保持 100% 不透明的子窗口来实现一个透明窗口。似乎子控件的不透明度不能比父控件更好（更低），如果我让父控件 100% 透明，那么我的子控件也继承了透明度。

我使用的代码 -

```
SetLayeredWindowAttributes(GetParent(parentWindowHwnd), 0, 0, LWA_COLORKEY, LWA_ALPHA); 
```

有什么帮助吗？

如果我对我的问题不是很清楚，也请回复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-07T13:08:12.787

You can't do this unfortunately, child windows always have the same opacity as their parent. The Google Desktop Toolbar had a neat trick to give the illusion of an opaque textbox on a translucent background. They created two top level windows, one of the background and one for the textbox. Then they set the background window as the owner (not the *parent*) of the texbox. They then set the background as transparent. It's quite a bit of work to get right, but it's the only way to do it without rendering the whole thing yourself using UpdateLayeredWindow.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-24T18:35:14.063

我敢肯定你可以反过来做，即一个不透明的主窗口和一个透明的子窗口，所以反过来也可能是正确的。您是否尝试过**取消设置***子*窗口的`WS_EX_LAYERED`标志，然后重新绘制它以使其再次完全不透明？

 *```
// Remove WS_EX_LAYERED from the window styles
SetWindowLong(hChildWnd, 
              GWL_EXSTYLE,
              GetWindowLong(hChildWnd, GWL_EXSTYLE) & ~WS_EX_LAYERED);

RedrawWindow(hChildWnd, 
             NULL, 
             NULL, 
             RDW_ERASE | RDW_INVALIDATE | RDW_FRAME | RDW_ALLCHILDREN); 
```

[Layered Windows](http://msdn.microsoft.com/en-us/library/ms997507.aspx#layerwin_topic2d)上的 MSDN 页面也可能有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-07T13:34:25.580

您不能使子控件的透明度低于其父控件。这里通常的方法是给你的窗口一个不规则的形状：不是一个矩形。这比 alpha 透明度要老得多 - 想想一个时钟应用程序：如果你愿意，你可以让你的窗口变成圆形，即使在 Windows 95 上也是如此。
这可以使用 Windows API 函数来完成`SetWindowRgn`：
一个简单的 (vb)[示例](http://www.xs4all.nl/~rjg70/vbapi/ref/s/setwindowrgn.html) [Google 结果](http://www.google.com/search?hl=en&q=windows+api+setwindowrgn)

# java - Selenium RC 并单击面板链接！

> ID：785341
> 
> 赞同：1
> 
> 时间：2009-04-24T10:37:36.927
> 
> 标签：java, selenium, selenium-rc

我正在尝试使用 Selenium RC 在页面中单击面板链接（同一页面中的链接但不同面板中的链接）。我可以通过使用来做到这一点：

browser.waitForCondition("selenium.isElementPresent(\"id=placeOrderLink\")", "30000")

但我想让它通用，我尝试使用：

字符串 var="placeOrderLink";

browser.waitForCondition("\"selenium.isElementPresent(\\"id="+var+"\\")\"", "30000");

它不起作用！我得到一个错误。我正在使用 Java 编写我的测试套件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-24T10:59:12.257

试试这个 browser.waitForCondition("selenium.isElementPresent(\"id=" + var + "\")", "30000")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-24T13:00:46.393

顺便说一句：在定位器中指定控件 ID 时不需要“ `id=`*controlID* ” - 控件 ID 定位器是默认定位器，因此“ *controlID* ”就足够了。

# naming-conventions - 命名约定：amountPaid vs.paidAmount

> ID：785343
> 
> 赞同：8
> 
> 时间：2009-04-24T10:38:41.773
> 
> 标签：naming-conventions

这是两个示例，它们具有两种不同的变量命名方法：

```
十进制金额到期 = 1000;
支付的十进制金额 = 800；

```

对比

```
小数到期金额 = 1000；
小数支付金额 = 800；

```

你通常更喜欢哪一个，为什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-24T10:44:43.413

您应该使用哪个读起来更好作为英语句子。比如应付客户的**金额是1000美元。**在我看来＃1更好。因为如果你写的是客户**到期**的 1000 美元的**金额**，它会破坏实际变量的措辞。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-24T10:49:11.327

在给定上下文中最易读的内容。我可以看到这从您的任何一个选项到简单的“付费”和“到期”。

例如：

```
public decimal RemainingAmount( Invoice invoice, int quantity, Coupon[] coupons )
{
     decimal paid = coupons.Sum( c => c.Value );
     decimal due = invoice.Price * quantity;

     return due - paid;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-24T10:39:50.743

第一个（amountDue）意味着在获得有用的智能感知之前输入七个字符。我会选择第二个。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-24T10:40:34.453

“Paid”有几个属性：paidAmount、paidDate、paidBy、paidTo 等。

“金额”是数据类型（本质上是货币或 BigDecimal 或您的语言使用的任何内容），意义不大。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-24T10:45:44.940

稍微搅动一下锅（如果每个人都同意，那就没有乐趣了），我会选择选项1。

*   它向我表明他们是相关的
*   这是自然的说法。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-24T12:01:07.457

As others said, option #1 is better as naming follows how one would use those concepts in a sentence without sounding weird. However, I think you should also pay attention the business domain that you're modeling to name your variables. A concept may be referred to with a very unique name or terminology in a particular business domain that would not sound right when used in a sentence out of that business domain. If this is the case, then I would go with the terminology that the business domain is using so that the code is expressed in business domain terminology. This helps developers getting familiar with the business domain and also makes communications with clients easier as everyone speaks the same language.

For example, in this particular case, if I notice that the business documents and cliens are using due amount instead of amount due in referring to a payment expected, I would go with due amount.

# wpf - DisplayMemberPath 的组合框样式问题

> ID：785352
> 
> 赞同：4
> 
> 时间：2009-04-24T10:43:10.920
> 
> 标签：wpf, templates, combobox, styles, selecteditem

我有一个 ComboBox 并且已将**combo.ItemsSource**属性设置为**List**对象。**Book**类包含两个属性：“*缩写”*和*“名称”。*

我已将 ComboBox 的**DisplayMemberPath**设置为“ **Abbreviation** ”，但在 ComboBox 上设置的以下样式不显示 Abbreviation 属性，而是显示“ *Words.Book* ”，这是类的名称。ComboBox 下拉列表正确显示列表（使用指定的**Abbreviation**属性）。问题出在**选定的 ComboBox item**中，当 ComboBox 的下拉菜单关闭时显示的那个。

我猜问题出在 DataTemplate 的 ContentPresenter 中，但我找不到成功的解决方案。目前 ContentPresenter 的**Content**属性设置为 Content="{TemplateBinding Content} 但我不知道是否应该这样。

任何想法如何在所选项目上显示 DisplayMemberPath 中指定的属性？

谢谢

编码：

```
<ControlTemplate x:Key="ComboBoxToggleButton" TargetType="ToggleButton">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition />
            <ColumnDefinition Width="20" />
        </Grid.ColumnDefinitions>
        <Border x:Name="Border" Grid.ColumnSpan="2" CornerRadius="2" BorderThickness="1" Background="{DynamicResource ribbonTitleFade}" />
        <Border Grid.Column="0" CornerRadius="2,0,0,2" Margin="1,6,1,6" BorderBrush="{DynamicResource boSecE}" BorderThickness="0,0,1,0" />
        <Path x:Name="Arrow" Grid.Column="1" Fill="White" 
              HorizontalAlignment="Center" VerticalAlignment="Center" Data="M 0 0 L 4 4 L 8 0 Z"
              />
    </Grid>
    <ControlTemplate.Triggers>
        <Trigger Property="ToggleButton.IsMouseOver" Value="true">
            <Setter TargetName="Border" Property="Background" Value="{DynamicResource ribbonTitleFade}" />
        </Trigger>
        <Trigger Property="ToggleButton.IsChecked" Value="true">
            <Setter TargetName="Border" Property="Background" Value="{DynamicResource ribbonTitleFade}" />
        </Trigger>
        <Trigger Property="IsEnabled" Value="False">
            <Setter TargetName="Border" Property="Background" Value="Black" />
            <Setter TargetName="Border" Property="BorderBrush" Value="Black" />
            <Setter Property="Foreground" Value="Gray"/>
            <Setter TargetName="Arrow" Property="Fill" Value="Gray" />
        </Trigger>
    </ControlTemplate.Triggers>
</ControlTemplate>

<Style x:Key="comboBoxBorderTransparent" TargetType="Control">
    <Setter Property="BorderBrush" Value="{DynamicResource boPrimC}" />
</Style>

<Style x:Key="comboItemStyle" TargetType="ComboBoxItem">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type ComboBoxItem}">
                <Border x:Name="backBorder" >
                    <StackPanel Orientation="Horizontal">
                        <Rectangle x:Name="rectA" Stroke="White" Width="4" Height="4" Fill="#80FFFFFF" Margin="5,0,0,0" HorizontalAlignment="Left" />
                        <TextBlock x:Name="text" Foreground="White" FontSize="10px">
                            <ContentPresenter Margin="8,1,0,1"
                                              SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" 
                                              HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" 
                                              VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                              />
                        </TextBlock>
                    </StackPanel>
                </Border>
                <ControlTemplate.Triggers>
                    <Trigger Property="ComboBoxItem.IsMouseOver" Value="true">
                        <Setter TargetName="rectA" Property="Stroke" Value="Black" />
                        <Setter TargetName="rectA" Property="Fill" Value="#80000000" />
                        <Setter TargetName="backBorder" Property="Background" Value="White"/>
                        <Setter TargetName="text" Property="Foreground" Value="{DynamicResource boPrimC}"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>

<DataTemplate x:Key="comboSelectedItemTemplate">
    <TextBlock Foreground="White" FontSize="10px">
        <ContentPresenter Content="{TemplateBinding Content}" />
    </TextBlock>
</DataTemplate>

<Style TargetType="ComboBox">
    <Setter Property="SnapsToDevicePixels" Value="true"/>
    <Setter Property="OverridesDefaultStyle" Value="true"/>
    <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Auto"/>
    <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Auto"/>
    <Setter Property="ScrollViewer.CanContentScroll" Value="true"/>
    <Setter Property="MinWidth" Value="60"/>
    <Setter Property="MinHeight" Value="20"/>
    <Setter Property="ItemContainerStyle" Value="{DynamicResource comboItemStyle}"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ComboBox">
                <Grid>
                    <ToggleButton 
                        Name="ToggleButton" Grid.Column="2" 
                        Template="{StaticResource ComboBoxToggleButton}" 
                        Focusable="false"
                        IsChecked="{Binding Path=IsDropDownOpen,Mode=TwoWay,RelativeSource={RelativeSource TemplatedParent}}"
                        ClickMode="Press">
                    </ToggleButton>

                    <ContentPresenter HorizontalAlignment="Center"
                                      VerticalAlignment="Center"
                                      Name="ContentSite"
                                      IsHitTestVisible="False" 
                                      Content="{TemplateBinding SelectionBoxItem}"
                                      ContentTemplate="{DynamicResource comboSelectedItemTemplate}"
                                      ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}"
                                      Margin="3,3,23,3"
                                      />

                    <Popup Name="Popup" Placement="Bottom" IsOpen="{TemplateBinding IsDropDownOpen}"
                           AllowsTransparency="False" Focusable="False" PopupAnimation="Slide">
                        <Grid Name="DropDown" SnapsToDevicePixels="True" 
                              MinWidth="{TemplateBinding ActualWidth}" MaxHeight="{TemplateBinding MaxDropDownHeight}">
                            <Border x:Name="DropDownBorder" Background="{DynamicResource ribbonTitleFade}"
                                    BorderThickness="1" BorderBrush="{DynamicResource boPrimC}" />
                            <ScrollViewer Margin="4,6,4,6" SnapsToDevicePixels="True">
                                <StackPanel IsItemsHost="True" KeyboardNavigation.DirectionalNavigation="Contained" />
                            </ScrollViewer>
                        </Grid>
                    </Popup>
                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger Property="HasItems" Value="false">
                        <Setter TargetName="DropDownBorder" Property="MinHeight" Value="95"/>
                    </Trigger>
                    <Trigger Property="IsEnabled" Value="false">
                        <Setter Property="Foreground" Value="Black"/>
                    </Trigger>
                    <Trigger Property="IsGrouping" Value="true">
                        <Setter Property="ScrollViewer.CanContentScroll" Value="false"/>
                    </Trigger>
                    <Trigger SourceName="Popup" Property="Popup.AllowsTransparency" Value="true">
                        <Setter TargetName="DropDownBorder" Property="CornerRadius" Value="2"/>
                        <Setter TargetName="DropDownBorder" Property="Margin" Value="0"/>
                    </Trigger>
                    <Trigger Property="IsEditable" Value="true">
                        <Setter Property="IsTabStop" Value="false"/>
                        <!--<Setter TargetName="ContentSite" Property="Visibility" Value="Hidden"/>-->
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
    <Style.Triggers>
    </Style.Triggers>
</Style> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-24T11:02:41.263

`ComboBox`我想你想要在你的模板中更像这样的东西：

```
<ContentPresenter Content="{TemplateBinding ComboBox.SelectionBoxItem}"
 ContentTemplate="{TemplateBinding ComboBox.SelectionBoxItemTemplate}"
 ContentStringFormat="{TemplateBinding ComboBox.SelectionBoxItemStringFormat}"
 Margin="{TemplateBinding Control.Padding}"
 HorizontalAlignment="{TemplateBinding Control.HorizontalContentAlignment}"
 VerticalAlignment="{TemplateBinding Control.VerticalContentAlignment}"
 SnapsToDevicePixels="{TemplateBinding UIElement.SnapsToDevicePixels}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-24T11:01:43.933

如果您的模板没有明确处理 的值`DisplayMemberPath`，则模板不会使用它来更改`ComboBoxItem`. 您必须直接在 中绑定到成员`ControlTemplate`，或使用单独的`DataTemplate`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T14:13:12.003

我发现*BureauBlack 主题*存在问题，它不会应用**DisplayMemberPath**，只是显示对象名称。我有一个带有许多 (15+) 组合框的窗口，除了 2 之外，所有组合框都使用 DisplayMemberPath 正常工作。

我从 ContentPresenters 和 GridViewRowPresenters 中删除了以下内容：

```
Content="{TemplateBinding Content}" ContentTemplate="{TemplateBinding ContentTemplate}" 
```

在**ListBoxItem、ComboBoxItem、ListViewItem**中。可能还有更多需要修复的地方，但这就是我们发现我们正在使用的全部内容。

使用 Microsoft.Net 4.0 框架。我没有尝试 4.5 或 3.5。

# objective-c - 我如何确定我是否需要保留或转让财产？

> ID：785353
> 
> 赞同：33
> 
> 时间：2009-04-24T10:43:24.743
> 
> 标签：objective-c, iphone, cocoa-touch

有什么好的规则可以学习什么时候应该使用保留，什么时候分配？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2009-04-24T21:14:01.107

赋值用于 BOOL、NSInteger 或 double 等原始值。对于对象，请使用保留或复制，具体取决于您是要保留对原始对象的引用还是复制它。

唯一常见的例外是弱引用，您希望保留指向对象的指针，但由于引用循环而无法保留它。这方面的一个例子是委托模式，其中一个对象（例如一个表格视图）保持一个指向其委托的指针。由于委托对象保留了表视图，让表视图保留委托将意味着任何一个都不会被释放。在这种情况下使用弱引用代替。在这种情况下，您将在创建属性时使用 assign。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-24T11:01:09.287

我认为，在处理对象时，您几乎总是使用保留而不是分配，而在处理原始类型、结构等时，您将使用分配（因为您不能保留非对象）。那是因为您希望具有属性的对象决定何时使用该对象，而不是其他东西。Apple 的内存管理指南指出：

> 有时您不希望处理收到的对象；例如，您可能需要将对象缓存在实例变量中。在这种情况下，只有您知道何时不再需要该对象，因此您需要确保在您仍在使用该对象时不会将其丢弃。您可以使用保留消息来执行此操作，该消息保留待处理的自动释放（或抢占稍后的释放或自动释放消息）的效果。通过保留一个对象，您可以确保它在您完成之前不会被释放。

有关使用复制与保留的讨论，请参阅[此 SO question](https://stackoverflow.com/questions/387959/nsstring-property-copy-or-retain)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2011-05-14T20:11:52.723

我知道这是一个老问题，但我从超级大师 Matt Gallagher那里找到了这些指导方针，非常有用： [http :](http://cocoawithlove.com/2009/07/rules-to-avoid-retain-cycles.html) *//cocoawithlove.com/2009/07/rules-to-avoid-retain-cycles.html*。就我而言，我自己制造了一个“保留地狱”，因为它*硬*引用了父对象。

 ** * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-24T14:48:23.843

如果您打算保留对象并使用它，请使用保留。否则，它可能会被释放，您的代码最终会出错。

# c# - 可空类型不是可空类型吗？

> ID：785358
> 
> 赞同：47
> 
> 时间：2009-04-24T10:44:03.370
> 
> 标签：c#, .net, nullable, gettype

我正在对可空类型进行一些测试，但它并没有像我预期的那样工作：

```
int? testInt = 0;
Type nullableType = typeof(int?);
Assert.AreEqual(nullableType, testInt.GetType()); // not the same type 
```

这也不起作用：

```
DateTime? test = new DateTime(434523452345);
Assert.IsTrue(test.GetType() == typeof(Nullable)); //FAIL 

DateTime? test = new DateTime(434523452345);
Assert.IsTrue(test.GetType() == typeof(Nullable<>)); //STILL FAIL 
```

我的问题是为什么 testInt.GetType() 返回 int，而 typeof(int?) 返回真正的可空类型？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2009-04-24T10:46:11.537

根据[MSDN](http://msdn.microsoft.com/en-us/library/ms366789(VS.80).aspx)：

> 对 Nullable 类型调用 GetType 会导致在类型隐式转换为 Object 时执行装箱操作。因此 GetType 总是返回一个表示基础类型的 Type 对象，而不是 Nullable 类型。

当您装箱一个可为空的对象时，只有基础类型被装箱。

同样，来自[MSDN](http://msdn.microsoft.com/en-us/library/ms228597(VS.80).aspx)：

> 对非 null 可空值类型进行装箱是对值类型本身进行装箱，而不是对包装值类型的 System.Nullable 进行装箱。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2009-04-24T12:14:02.217

继 Romain 的正确答案之后，如果您想比较“真实”类型（即，不将任何可空类型隐式转换为其基础类型），那么您可以创建一个扩展方法，如下所示：

```
public static class MyExtensionMethods
{
    public static Type GetRealType<T>(this T source)
    {
        return typeof(T);
    }
} 
```

然后尝试以下测试：

```
int? a = 0;
Console.WriteLine(a.GetRealType() == typeof(int?));         // True
Console.WriteLine(a.GetRealType() == typeof(int));          // False

int b = 0;
Console.WriteLine(b.GetRealType() == typeof(int));          // True
Console.WriteLine(b.GetRealType() == typeof(int?));         // False

DateTime? c = DateTime.Now;
Console.WriteLine(c.GetRealType() == typeof(DateTime?));    // True
Console.WriteLine(c.GetRealType() == typeof(DateTime));     // False

DateTime d = DateTime.Now;
Console.WriteLine(d.GetRealType() == typeof(DateTime));     // True
Console.WriteLine(d.GetRealType() == typeof(DateTime?));    // False 
```

**编辑...**

为了完整起见——并由下面 SLaks 的评论提示——这里有一个替代版本，它仅在`source`is`null`或时使用编译时类型`Nullable<>`；否则它使用`GetType`并返回运行时类型：

```
public static class MyExtensionMethods
{
    public static Type GetRealType<T>(this T source)
    {
        Type t = typeof(T);

        if ((source == null) || (Nullable.GetUnderlyingType(t) != null))
            return t;

        return source.GetType();
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-02T20:23:34.920

尽管 C# 假设​​值类型存储位置包含派生自 的类型的实例`System.ValueType`，而后者又派生自`System.Object`，但事实并非如此。派生自的每种类型`System.ValueType`实际上代表两种截然不同的事物：

1.  字节的集合（对于原始类型）直接表示数据，或者（对于非原始结构类型）包含所有字段的内容，公共和私有，但不包含任何类型信息。
2.  一个独立的堆对象，除了上述之外还包含一个对象头，其类型派生自 `System.ValueType`。

值类型的存储位置是第一个；值类型的堆对象持有第二个。

由于种种原因，微软决定`Nullable<T>`只支持第一次使用。如果尝试将类型的存储位置传递给`Nullable<T>`期望对堆对象的引用的代码，系统会将该项转换为`T`if`HasValue`为 true，否则只需传递 null 引用 if`HasValue`为 false。虽然有多种方法可以创建类型为 的堆对象`Nullable<T>`，但将值类型存储位置转换为堆对象的常规方法永远不会生成。

另请注意，调用`GetType()`值存储位置实际上不会评估存储位置的类型，而是将该存储位置的内容转换为堆对象，然后返回结果对象的类型。因为类型的存储位置`Nullable<T>`被转换为对象实例`T`或 null，所以对象实例中的任何内容都不会说明它来自的存储位置是否是`Nullable<T>`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-12T12:38:37.397

一种简单的检查方法是使用“is”运算符：

```
(i is Nullable<int>) || (i is Nullable<long>) || (i is Nullable<float>) || (i is Nullable<short>) 
```

我发现 ti 阅读了这两个 MSDN 页面：

[http://msdn.microsoft.com/en-us/library/ms366789(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/ms366789(v=vs.90).aspx)

[http://msdn.microsoft.com/en-us/library/ms228597%28v=VS.90%29.aspx](http://msdn.microsoft.com/en-us/library/ms228597%28v=VS.90%29.aspx)

干杯!

# javascript - jQuery验证错误位置

> ID：785361
> 
> 赞同：14
> 
> 时间：2009-04-24T10:44:52.663
> 
> 标签：javascript, jquery

在输入字段附近显示来自 jQuery.validate 的 jQuery 错误指示，如果此消息显示我们的布局已崩溃。

我需要基于流“div”的解决方案，其中 z-index 和错误消息显示在页面上和输入字段附近。

谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-04-24T16:16:43.303

例子：

```
$(document).ready(function(){
        $("#page1Form").validate({
            rules: {
                "field1": {
                    required: true,
                    digits: true
                },
                "field2": {
                    required: true
                }
            },
            errorElement: "div" // This is to override the label w/ a div
        });                     
    }); 
```

CSS：

```
div.error {
 /* Your CSS Code Here */ 
```

}

您将需要设置 div 的样式。

Please post back you div styling as I'm looking to do this as well but my CSS skillz are still lacking =P

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2009-04-24T10:57:26.783

查看 errorClass、errorElement、wrapper 和 errorLabelContainer[选项](http://docs.jquery.com/Plugins/Validation/validate#toptions)，了解如何修改错误消息的呈现方式。最有可能的是，您只需要提供一个具有适当 CSS 的错误类来增加错误消息的 z-index。如果这不起作用，验证插件有一个 errorPlacement 回调，您可以使用该回调将错误消息放置在您想要的位置和方式。

# php - Firebird 的哪个 PHP Web 框架？

> ID：785371
> 
> 赞同：4
> 
> 时间：2009-04-24T10:49:06.633
> 
> 标签：php, frameworks, firebird

是否有任何 PHP Web 框架可以与**Firebird**数据库完美配合？

通过“干净”，我的意思是开箱即用，没有黑客/定制/自制驱动程序。

到目前为止，我已经检查了**CodeIgniter**和**CakePHP**之类的框架，但是它们对 Firebird 的支持是模糊的，或者最多是很少的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-24T10:58:54.813

Zend 框架有一个[Firebird / Interbase DB 适配器在孵化中](http://framework.zend.com/wiki/display/ZFPROP/Zend_Db+Firebird-Interbase+support)，所以几乎开箱即用（我已经使用过它，它对我来说就像一个魅力）。[请注意， Firebird](http://au2.php.net/manual/en/ref.pdo-firebird.php)也有一个实验性的 PDO 适配器，有了它，任何使用 PDO 的框架都将支持它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-25T07:40:57.777

与其寻找支持 FireBird 的框架，为什么不使用您熟悉的框架并使用 ADOBD 库来访问大量开箱即用的 RBDMS。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-30T22:22:10.737

[使用 Delphi for PHP](http://forums.delphi-php.net/tutorials/3656-how-connect-firebird-db-server-delphi-php.html)

或者

[TurboForPhp](http://www.turbophp.com/)（开源）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-24T11:00:59.803

Zend Framework 正在开发 Firebird-Interbase 支持。[你可以在这里查看进度。](http://framework.zend.com/wiki/display/ZFPROP/Zend_Db+Firebird-Interbase+support)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-22T09:49:40.740

有一个[YII](http://www.yiiframework.com/)框架

它不是完全开箱即用的，但非常简单

[https://github.com/robregonm/YiiFirebird - 适用于 Yii 1](https://github.com/robregonm/YiiFirebird)

[https://github.com/edgardmessias/yii2-firebird - 适用于 Yii 2](https://github.com/edgardmessias/yii2-firebird)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-24T14:18:20.593

cake php 支持开箱即用， http: [//mapopa.blogspot.com/2008/08/cakephp-tutorial-for-ubuntu-firebird.html](http://mapopa.blogspot.com/2008/08/cakephp-tutorial-for-ubuntu-firebird.html)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-25T04:29:04.277

Zend Framework 在“Extras”中支持 Firebird 和 Interbase，您必须下载“Full Package”而不是“Minimum Package”。

我开发了这个适配器，如果您需要帮助，请订阅并发布到 fw-db@lists.zend.com。

# xml - Flex 3 XML 实现中的错误？重写 xml:lang

> ID：785376
> 
> 赞同：2
> 
> 时间：2009-04-24T10:51:42.477
> 
> 标签：xml, apache-flex, utf-8, air, interpreter

所以我正在开发一个快速实用程序来允许对 TMX 文件进行简单的编辑。TMX 基本上是一种基于 XML 的标准，用于存储多语言翻译。无论如何，我正在通过文件引用将 TMX 导入 Adob​​e AIR 应用程序，然后获取文件流，将 UTF-8 字符转换为字符串，然后将该字符串转换为 XML 对象。因此：

```
var stream:FileStream = new FileStream();
stream.open(event.target /*file data*/ as File, FileMode.READ);
var fileData:String = stream.readUTFBytes(stream.bytesAvailable);
var tmxXml:XML = new XML(fileData); 
```

但是，这是有趣的部分。如果`fileData`这样加载：

```
<tuv xml:lang="en">
    <seg>About Us</seg>
</tuv> 
```

Flex 的 XML 将其解释为：

```
<tuv aaa:lang="en" xmlns:aaa="http://www.w3.org/XML/1998/namespace">
    <seg>
        About Us
    </seg>
</tuv> 
```

哦嗬有趣！属性`xml:lang`变为`aaa:lang="en" xmlns:aaa="http://www.w3.org/XML/1998/namespace"`。根据我的简短研究，发生这种情况有一些先例，但这有点糟糕的假设。在不创建过多的字符串替换规则的情况下，有没有办法规避这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2011-09-01T14:35:24.447

Sorry, can't comment (yet?) so I'll put this here.

I can replicate when adding a non-default namespace to XML with a default namespace:

```
var node:XML = <node xmlns="http://namespacehere.org"/>
var ns:Namespace = new Namespace("xml", "http://www.w3.org/XML/1998/namespace");
node.@ns::base = "myvalue"; 
```

Output is `<node aaa:base="myvalue" xmlns="http://namespacehere.org" xmlns:aaa="http://www.w3.org/XML/1998/namespace"/>`

Adding `use namespace ns` has no effect and a default namespace is not applicable (it needs to be prefixed).

I have come accross this issue a few times, but have not been able to isolate the cause. Note: one still ends up with an "aaa" prefix no matter what prefix or URI you set in the namespace. Odd.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-24T11:52:08.883

您是否尝试过使用以下方法之一？

```
 default xml namespace = xml; 
```

或者，

```
 use namespace xml; 
```

浏览[命名空间](http://livedocs.adobe.com/flex/3/html/help.html?content=03_Language_and_Syntax_06.html)文档。

# vim - 使用 VIM 作为日志文件查看器

> ID：785389
> 
> 赞同：15
> 
> 时间：2009-04-24T10:57:45.490
> 
> 标签：vim, logging

我想使用 VIM 作为日志文件查看器。是否可以以固定的时间间隔（~1s）重新加载当前文件？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-24T11:03:49.577

利用`:set autoread`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-24T11:04:51.820

请参阅此[VIM 提示](http://www.vim.org/scripts/script.php?script_id=1714)。它提供拖尾（如tail -f）和日志行编号

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-01-18T07:56:44.500

我喜欢它简短，没有大量的黑客或外部脚本。您可以在需要时从 ex (whithin vim) 运行此 oneliner（或将每个命令放在 vimrc 中，以便在打开日志文件时使用。）

```
:set autoread | au CursorHold * checktime | call feedkeys("lh") 
```

**（如果您想（几乎）跳到文件末尾，只需使用“G”而不是“lh”和 feedkeys）**

解释：

*   `autoread`：从外部更改时读取文件（但它本身不起作用，没有内部计时器或类似的东西。它只会在 vim 执行操作时读取文件，就像 ex 中的命令`:!`
*   `CursorHold * checktime`：当光标在指定的时间`updatetime`（默认为 4000 毫秒）内没有被用户移动时`checktime`，执行，检查文件外部的更改
*   `call feedkeys("lh")`：光标移动一次，左右移动。然后什么也没有发生（...这意味着`CursorHold`触发，这意味着我们有一个**循环**）

要在使用时停止滚动`call feedkeys("G")`，请执行`:set noautoread`- 现在 vim 会告诉文件已更改并询问是否要读取更改）

我喜欢在 vim（而不是 tail -f）中查看日志文件的想法，例如，当您在没有 screen/tmux 的 ssh 会话中工作时。此外，如果需要，您可以直接从日志文件中复制，或者直接保存输出，或者......您可以使用 vim 做什么:)

*来自这个[答案](https://stackoverflow.com/a/48296697/4940240)（参考 PhanHaiQuang 的回答[和](https://stackoverflow.com/users/407256/flukus)[flukus](https://stackoverflow.com/users/2467354/phan-hai-quang)的评论）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-10-13T03:15:31.203

使用 Vim 8 中的计时器，这现在可以简单得多，而且不再是杂乱无章的事情。例如：

```
:set autoread
:function! Tailf(id)
:   checkt
:   $
:endfunc
:let timer_id = timer_start(4000, 'Tailf', {"repeat":-1}) 
```

这让 vim 每 4 秒重读一次整个日志。对于许多目的来说，这很好，但对于大的，比如几 GB 的日志文件来说就不是了。还有其他功能，如作业和通道，可用于更复杂的日志读取。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-31T16:14:15.920

[asyncrun.vim](https://github.com/skywind3000/asyncrun.vim)允许您运行程序并在 quickfix 中查看实时输出（本质上是 JohnLittle 的答案，但使用`setqflist()`而不是`Tailf()`）。你可以使用它`tail`（我在 Windows 上，我`tail`来自我的 git 安装）：

```
AsyncRun tail -f C:\logs\plugin-info.log 
```

它具有使用“错误格式”从日志中解析文件名的额外好处。

# language-agnostic - 当技能阻抗不匹配时，结对编程是否有效？

> ID：785390
> 
> 赞同：21
> 
> 时间：2009-04-24T10:58:02.850
> 
> 标签：language-agnostic, pair-programming

例如，C#.NET 经验有限的经验丰富的编码员能否成功地与经验丰富的 C#.NET 编码员配对，其次要目标是让前者跟上 C#.NET 的速度？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2009-04-24T11:01:44.073

绝对地。共享知识是结对编程的要点之一（还有一个有用的动态，即让一个人输入一段时间，另一个人在他们这样做时进行审查）。

以我的经验，这是最有效的方法之一 - 并且允许经验不足的编码人员仍然做出有用的贡献（与完成整个工作相比，审查专家正在做的事情并做出明智的评论/干预需要更少的经验） .

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-24T11:02:27.100

这取决于他们之间的个人化学反应。如果有经验的程序员愿意并且能够分享自己的知识，让经验不足的程序员通过写代码和讨论来参与开发，我会说这是一种非常有效的学习方式。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-24T11:02:13.653

是的，我发现好的结对编程总是有两种方式，它本质上是一种伪装成 IT 创新的社会工程。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-04-24T11:02:40.750

是的，这会起作用。如果 1) 经验有限的程序员愿意学习 C#，并且 2) 其他程序员愿意教 C#。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-04-24T12:24:52.627

当技能不匹配程度很高时，它确实更像是一种师生关系。这还不错，但会浪费技术人员的时间。

但是，即使不切实际或浪费，偶尔进行一次结对会非常有用！即使学生不知所措或感到尴尬，有时对于“学生”来说，了解顶级人员如何工作和思考也是有用的。它有助于让他们了解高质量工作的问题/技能/方法。把它想象成一个参观研究实验室的高中生。专业科学家教高中生是一种浪费，但是 1 小时的访问可以帮助学生集中注意力，让他们一瞥最终目标......

我记得我为什么选择 Emacs 作为我的编辑器。我只是碰巧坐在一位专家用户旁边，我粗鲁地看着他的肩膀，看着他超级快速地重新排列和导航代码。我只看了不到一分钟，我从来没有和他说过话..他可能甚至没有注意到我在看！但我被吓坏了，决定学习 Emacs。十年后，我仍然没有那位专家那么熟练，但我并不后悔改变编辑的决定，因为我看到了可能发生的事情。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-04-24T11:03:25.910

就个人而言，我认为这会很好，并且是结对编程的目标之一，但成功的程度将取决于两个程序员。如果程序员 1（学习 C# 的人）投入了一些额外的时间来真正加快速度，而程序员 2（另一个人）有耐心和渴望教它应该对双方都有好处。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-24T11:02:28.440

你当然可以做到这一点——我们过去已经做到了。但是您必须接受在“代码质量”收益与培训收益之间进行权衡。恐怕没有*免费的培训班。*

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-24T11:03:10.030

它在某种程度上起作用。通常它是一个领先另一个......所以从这个意义上说它不是很多结对编程。

这在很大程度上取决于经验丰富的编码人员的教学技能和其他编码人员的快速学习技能。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-04-24T12:16:02.757

是的，但前提是更好的人有耐心并愿意教书，而更差的人愿意学习。我与不如我的人结对编程，这很乏味，但我认为他们从中吸取了教训。我和比我优秀的人结对编程，我当然从中学到了东西。真的要看人。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-04-26T15:00:45.903

它可以通过以下警告有效：**您必须更换合作伙伴**。

我实际上一直处于这种情况，如果差距很大，这对这对成员来说可能是非常费力的。最好在几个小时后[**更换伴侣**](http://c2.com/cgi/wiki?PairPromiscuously)，时间根据您的耐受性和差距大小而变化。如果该选项不可用，请混合一些单独的编程。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-01-10T11:15:56.933

有句话说，一个团队的强项和最薄弱的环节一样好。将最强的与最弱的配对传统上是最好的策略，因为从最强的最弱的学习可能确保最多的学习量。如果担心最强者*不感兴趣*，那就把最强者换成真正最强的人。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-04-24T11:02:32.747

这完全取决于开发人员的个性，没有硬性规定。

可以肯定的是，与没有经验的开发人员一起工作时，有经验的开发人员的工作效率会降低。我个人认为结对编程时需要有很好的能力匹配。然而，这是让经验不足的开发人员加快速度的一种非常好的方法。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-04-24T11:06:59.023

虽然这是一个好主意，但实际上它可能没有用。要培训某人，您可以组织培训并指定可以提供帮助和指导的导师。导师可以从实际项目中分配工作并进行监控。

结对编程应该在相对有经验的人之间进行，如果你想获得这个概念的好处。在我看来，与没有经验的人进行结对编程会降低生产力，并且不确定当有人不断检查他时该人会接受多少。分配一项任务并给予机会独立开发它然后对其进行审查将提供良好的自学。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-04-24T12:50:55.747

是的，但使其有效的方法起初可能并不明确。结对编程的任务应该是**经验较少的程序员（我们称他为 Michael）**的任务。我也会让**Michael**开始结对编程课程，以解释课程的目标是什么。这种方法将**Michael**置于驾驶位，**更有经验的程序员（我们称他为 Bill）**将担任更多的指导角色。

通常， **Bill**会接受或被赋予更复杂的任务来处理。这种方法允许**迈克尔**从事更适合他的经验水平的任务。我建议首先每隔 30 分钟到 1 小时关闭一次，这样**迈克尔**就可以习惯让别人控制的过程。您可以慢慢地将这些关闭时间缩短到 15 分钟，或者任何最适合两个开发人员的时间。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-04-24T13:22:23.597

我认为你得到的最终结果取决于做这件事的人。在这种情况下，您最终可能会以一个领先另一个（而另一个只是注意理解第一个正在使用的语言功能）。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-05-27T14:51:15.697

这取决于我们所说的*阻抗失配*有多少技能。

两个不同语言的优秀程序员可以随着它快速成长，显然是以当前项目语言的一位专家的速度稍慢为代价的。

如果差异太大（例如，老将和新秀），则最好从其他类型的方法开始，以避免产生高度适得其反的风险。

永远小心*极端结对编程*！

![在此处输入图像描述](https://i.stack.imgur.com/06Ljf.jpg)

# c++ - 支持原始 UTF-8 的正则表达式引擎？

> ID：785397
> 
> 赞同：0
> 
> 时间：2009-04-24T11:01:04.793
> 
> 标签：c++, regex

我需要一个支持原始 UTF-8 的正则表达式引擎——这意味着，UTF-8 字符串作为两个字符（或一个或更少）存储在 char * 中——例如，Ab 是数组 {0x41,0x62}。任何人都知道可以接收该格式的正则表达式引擎吗？如果需要，我可以先转换为 wchar_t。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-24T11:05:38.933

[此页面](http://www.boost.org/doc/libs/1_38_0/libs/regex/doc/html/boost_regex/unicode.html)说，在您配置和使用[ICU 库](http://www.ibm.com/software/globalization/icu/)的条件下，可以使用 Boost.Regex 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-24T11:05:00.760

> PCRE（7.x 版）的当前实现与 Perl 5.10 大致对应，包括对 UTF-8 编码字符串和 Unicode 通用类别属性的支持。但是，必须明确启用 UTF-8 和 Unicode 支持；它不是默认值。Unicode 表对应于 Unicode 版本 5.1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-24T17:28:27.483

处理 UTF-8 的非恒定字符长度特性使得创建算法（如正则表达式）变得非常困难。

最好使用[ICU](http://www.ibm.com/software/globalization/icu/)将 utf-8 字符串转换为 unicode wstring，然后使用[boost::regex的 wstring 变体](http://www.boost.org/doc/libs/1%5F38%5F0/libs/regex/doc/html/boost%5Fregex/unicode.html)

# asp.net-mvc - MVC ASP.NET 中 HttpContext.Current 和 Controller.Context 的区别

> ID：785413
> 
> 赞同：73
> 
> 时间：2009-04-24T11:04:00.573
> 
> 标签：asp.net-mvc

我正在开发一个 MVC ASP .NET 应用程序。我对两者都比较陌生。

在控制器中，我试图获取当前登录用户，对此似乎有两种方法：

```
System.Web.HttpContext.Current.User.Identity.Name 
```

或者

```
HttpContext.User.Identity.Name 
```

这些有什么区别？据我所知，在 MVC 框架中，控制器将当前的 HttpContext 存储为属性，因此这些方法是相同的。那是对的吗？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2009-04-24T11:06:15.827

是的，它们通常是相同的。但是，如果您正在使用其他线程，则它们不会；`System.Web.HttpContext.Current`是线程静态的。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2009-04-27T01:46:43.230

控制器提供的上下文（不是静态的 HttpContext.Current）是可模拟的。如果您对代码的单元测试感兴趣，那么创建模拟 ControllerContext 并将其设置在 Controller 上通常比通过 HttpContext.Current 容易得多。否则 ControllerContext.HttpContext 指向与 HttpContext.Current 相同的数据。

# c++ - Vista 窗口标题中的图片（标识）

> ID：785419
> 
> 赞同：2
> 
> 时间：2009-04-24T11:05:52.443
> 
> 标签：c++, c, wpf, user-interface, windows-vista

vista 的现代 Windows 应用程序中有一个不错的功能。它是窗口标题中的图片。例如新的Skype (v4) 和谷歌浏览器都有它。

我在想它背后的技术是什么？如果您关闭航空风格，窗户仍然有贬值。可能应用程序完全重绘窗口框架。

但是，我没有找到任何有关它的信息。可能有人已经面对此功能或尝试实现它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-24T11:53:16.650

这些应用程序不使用本机 Windows 渲染。如果您查看Skype，您会注意到最小/最大/关闭按钮不像在普通Vista 应用程序中那样发光。

如果使用 WPF，以下是创建您自己的窗口的示例：

[http://www.kirupa.com/blend_wpf/custom_wpf_windows.htm](http://www.kirupa.com/blend_wpf/custom_wpf_windows.htm)

# html - ajax应用程序中css页面布局的问题

> ID：785425
> 
> 赞同：0
> 
> 时间：2009-04-24T11:08:56.210
> 
> 标签：html, css, ajax

我有一个 css 样式，当应用于静态 html 页面时效果很好。

问题是，内容是动态加载到第 3 层，然后到第 2 层的。

我真的不明白一致性。有时这些层相距很远，有时它们相互网格化。

为什么会发生这种情况，如何将 layer3 保持在静态位置？

层相距很远的示例：

```
<html><head>
<title>Test page</title>
<link rel="stylesheet" href="style.css" type="text/css">
</head>
<div id="Layer0">
<div id="Layer1" class="Layer1">
<h3 align="left">A menu</h3>
<div align="left">
<ul class="BLUE">
<li><a href="#">item 1</a></li>
<li><a href="#">item 2</a></li>
</ul>
</div>
</div>
<div id="Layer2">
<div id="leftlayer" class="leftlayer">
<form name="searchForm">
An example form: 
<input name="search" type="text">
<br>
<input name="Submit" value="Update" onclick="searchUserInfo('parallelimport');return false" type="submit">
</form>
</div></div>
<div id="Layer3"><h1> Why is the layer so far away?</h1>
</div>
</div>
</div>
</body></html> 
```

合并图层的示例

```
<html><head>
<title>Test page</title>
<link rel="stylesheet" href="style.css" type="text/css">
</head>
<div id="Layer0">
<div id="Layer1" class="Layer1">
<h3 align="left">A menu</h3>
<div align="left">
<ul class="BLUE">
<li><a href="#">item 1</a></li>
<li><a href="#">item 2</a></li>
</ul>
</div>
</div>
<div id="Layer2">Content goes here</div>
<div id="Layer3">
<h1>Why is the layer up here now?</h1>
<table width="100%" border="0">
<tbody>
<tr>
<td width="15%">This wrecks</td>
<td width="10%">The very</td>
<td width="65%">Layout of the page</td>
</tr>
</table>
</div>
</div>
</div>
</body></html> 
```

我试图实现的一个例子：

```
<html><head>
<title>Test page</title>
<link rel="stylesheet" href="style.css" type="text/css">
</head>
<div id="Layer0">
<div id="Layer1" class="Layer1">
<h3 align="left">A menu</h3>
<div align="left">
<ul class="BLUE">
<li><a href="#">item 1</a></li>
<li><a href="#">item 2</a></li>
</ul>
</div>
</div>
<div id="Layer2">
<h1>I would like information to be here</h1>
<div id="Layer3">
<h1>And then the table to be below the above info</h1>
<table width="85%" border="0">
<tbody>
<tr>
<td width="15%"><strong>This is</strong></td>
<td width="20%"><strong>much better</strong></td>
</tr>
</tbody>
</table>
<h1>I would like the Layer 3 to always be in a constant position</h1>
<h1>Does this mean I should have it outside of Layer2?</h1>
</div>
</div>
</div>
</body></html> 
```

我的 CSS：

```
#Layer0 {
  width: 100%;
  height: 100%;
}

body{
margin:10px 10px 0px 10px;
padding:0px;
color:#999999;
font-family:"Trebuchet MS",arial,sans-serif;
font-size:70.5%;

}

#Layer2 {
background:#fff;
color:#000;
voice-family: "\"}\"";
voice-family: inherit;
padding:20px;

}

#Layer2 p {color:#888;}

#Layer2 a, a:link { color:#006633; text-decoration: none;}

#Layer2 a:hover, a:active{ color:#FF6666; text-decoration: none;}

html>body #Layer2 {
}

p,h1,pre {
margin:0px 10px 10px 10px;
font:Arial, Helvetica, sans-serif;
font-size:12px;
line-height: 1.6em;
text-align:justify;
text-decoration:none;
}

h1 {
font-size:2.5em;
text-align: center;
color:#ccc;
padding-top:15px;

}

h3 {
font-size:14px;
color:#999;

}

.leftlayer {
  float: left;
  left: 20%;
  width: 20%;
  height: 100%;
  margin-right: 10%;
}
.leftlayer strong {
  text-align: left;
}
.leftlayer2 {
  float: left;
  width: 20%;
  height: 100%;
  margin-left: 2%;
}
#rightlayer {
  float: left;
}
#Layer3 {
  float: bottom;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-24T16:02:48.423

当您遇到棘手的 CSS 问题时，为您的各种布局元素添加边框确实有助于调试。例如，如果您将以下内容添加到您的 .leftlayer CSS 类中，您将看到您发布的第一个示例有什么问题：

```
 border: 1px dashed #ccc; 
```

您会注意到带有 class="leftlayer" 的表单周围的 div 将 Layer3 推到右侧。这是因为 leftlayer div 在 HTML 流中出现在 Layer3 div 之前。为了获得更好的结果，将 Layer3 移到 .leftlayer 之上，如下所示：

```
<div id="Layer3">
    <h1> Why is the layer so far away?</h1>
</div>
<div id="Layer2">
    <div id="leftlayer" class="leftlayer">
        <form name="searchForm">
            An example form: 
            <input name="search" type="text">
            <br>
            <input name="Submit" value="Update" onclick="searchUserInfo('parallelimport');return false" type="submit">
        </form>
    </div>
</div> 
```

我不确定这是否正是您需要实现的目标，但这是一个开始。

浮动真的会影响你的布局，所以它有助于彻底理解盒子模型。我发现这是一篇很好的参考文章： [http ://www.brainjar.com/css/positioning/default.asp](http://www.brainjar.com/css/positioning/default.asp)

# php - JavaScript 标记在 HTML 代码中生成中断

> ID：785428
> 
> 赞同：1
> 
> 时间：2009-04-24T11:11:08.000
> 
> 标签：php, javascript, html

我得到了这个在我的页面上显示横幅的 JavaScript 标记：

```
<script src="http://e2.emediate.se/eas?cu=10524;cre=mu;js=y" 
  language="JavaScript" type="text/javascript"></script>
<embed 
   height="150" 
   width="768" 
   type="application/x-shockwave-flash"
   src="http://e2.emediate.se/media.2/170/4045/32676/49312404-768-150.swf?clickTAG=http://e2.emediate.se/eas?camp=32676::cu=10524::no=60039::ty=ct"
> 
```

我使用 PHP 和 XSLT。

横幅显示一切都很好，但它也产生了一个无形的中断。这是一个问题，因为我在右边有另一个小横幅。由于中断而被推倒。

这是一个奇怪的 XSLT 问题吗？有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-24T11:19:38.650

横幅的内容是什么？script 标签本身是不可见的。您需要检查横幅本身的内容，看看到底是什么破坏了。加载后使用[FireBug](http://getfirebug.com/)检查内容并准确查看损坏的内容。

**e**：查看您发布的嵌入内容-要检查的两件事-第一，imo-嵌入标签的显示是块状的，因此您可能必须将其设置为内联/浮动。第二-确保对象的宽度足够小，可以与另一个对象一起包含在其容器中。要修复两者，您可能必须编辑脚本（至少，您需要找到一种方法来设置嵌入样式）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-24T11:18:22.583

您应该发布 javascript 生成的 HTML 的代码。但是考虑一下：

```
 <script etc></script><div id='theOtherBanner'>sdf</div> 
```

如果脚本会生成如下内容：

```
 <div id='firstBanner'>Bla</div> 
```

然后第二个横幅将被下推，因为 div 是块级元素。你应该让 div 显示：inline; 或浮动它们。浮动时，请确保使用以下内容清除浮动：

```
 <br style='clear:both'> 
```

在浮动 div 之后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-24T11:19:42.223

是的，把它包起来：

```
<span id="myexternalbanner"?
  <script type="text/javascript" language="JavaScript" src="http://something.com" ></script>
</span> 
```

然后风格化。您很可能需要使用 DOM Inspector 或类似的工具检查生成的 HTML，但这应该可以：

```
span#myexternalbanner *{
  display: inline;
} 
```

也许你需要向左浮动，但这会更棘手。

# c# - 如何从文件夹中显示我的 GridView 中的图像？

> ID：785432
> 
> 赞同：0
> 
> 时间：2009-04-24T11:15:20.703
> 
> 标签：c#, asp.net, gridview, image, directory

这是我的网格视图

```
<asp:GridView ID="GridView2" runat="server" AutoGenerateColumns="False" Height="191px"
        Width="333px">
        <Columns>
            <asp:ImageField HeaderText="Image">
            </asp:ImageField>
            <asp:BoundField DataField="ID" HeaderText="ID" SortExpression="ID" />
            <asp:BoundField DataField="Rate_Type" HeaderText="Rate_Type" SortExpression="Rate_Type" />
        </Columns>
    </asp:GridView> 
```

这是在我的页面加载中的代码后面......

```
 SqlConnection myConnection;
        DataSet dataSet = new DataSet();
        SqlDataAdapter adapter;

        //making my connection
        myConnection = new SqlConnection(ConfigurationManager.ConnectionStrings["MyConnectionString"].ConnectionString);

        adapter = new SqlDataAdapter("Select ID, Rate_Type from Rate_Record", myConnection);

        adapter.Fill(dataSet, "MyData");

        GridView2.DataSource = dataSet;
        GridView2.DataBind(); 
```

现在你会看到我的gridview中有一个ImageField。当 ID = 1 时，我想显示位于此处的图像 ~/pics/ID1/MyImage.jpg 等等。我还想显示图像的缩略图，这样用户就不必下载整个图像。

任何帮助都会很棒！

艾蒂安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-24T11:24:20.683

```
<asp:ImageField HeaderText="Image" DataImageUrlField="ID"
  DataImageUrlFormatString="~/pics/ID{0}/MyImage.jpg"
    AlternateText="Image Description" ReadOnly="true" /> 
```

理想情况下，您应该在此文件夹中有缩略图。另一种方法是让缩略图图像以诸如“ `thumb_`”（`thumb_MyImage.jpg`）之类的标识符为前缀。

# windows - 将 EPS 转换为 PDF 的 Ghostscript 命令行参数

> ID：785436
> 
> 赞同：22
> 
> 时间：2009-04-24T11:16:23.947
> 
> 标签：windows, command-line, parameters, ghostscript

刚刚为 Windows 安装了 Ghostscript 8.54。

有谁知道传递给`gswin32c.exe`它以使其转换的最小参数，例如*someFile.eps*到*someFile.eps.pdf*？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2010-08-11T17:36:24.310

由于问题是关于*“传递给 gswin32c.exe 以使其将 someFile.eps 转换为 someFile.eps.pdf 的最小参数”*，让我给出一个答案：

 ****```
 c:/path/to/gswin32c.exe ^
    -sDEVICE=pdfwrite ^
    -o c:/path/to/output.pdf ^
    c:/path/to/input.eps 
```**  **甚至更短：

 ****```
 gswin32c ^
    -sDEVICE=pdfwrite ^
    -o output.pdf ^
    input.eps 
```**  **这将使用 Ghostscript 的内置默认参数。在我看来，最新版本的 Ghostscript 最重要的是：

*   `-dPDFSETTINGS=/default`........ 与 Adob​​e Distiller 用于“屏幕”的设置大致相同，但有以下区别：
*   `-r720x720`.....................分辨率：720 dpi（需要转换为位图的位图/字体）
*   `-dColorConversionStrategy=/LeaveColorUnchanged`...（蒸馏器的“屏幕”使用`=/sRGB`）
*   `-dCompatibilityLevel=1.4`....（蒸馏器的“屏幕”使用`=1.3`）
*   `-dEmbedAllFonts=true`[*]…………（蒸馏器的“屏幕”使用`=false`）
*   `-dOptimize=false`[**] ................（蒸馏器的“屏幕”使用`=true`）
*   `-dDownsample{Color,Gray,Mono}Images=false`...（蒸馏器的“屏幕”使用`=true`）

[[*] 默认情况下，Ghostscript 不嵌入经典的*“Base 14”* -PostScript 字体。要强制执行此操作，请使用额外参数（在命令行末尾！），例如`-c "<</NeverEmbed [ ]>>setdistillerparams" -f c:/path/to/input.pdf`.]
[[**] Ghostscript 的*pdfwrite*设备在第一次编写 PDF 时无法“优化”它。要进行优化，您必须使用特殊参数再次调用 Ghostscript 进行第二次传递（您也可以尝试`-dOptimize=true`）。]

顺便说一句，Ghostscript 的最新版本是 8.71，可在此处获得：[ghostscript.com/relases](http://www.ghostscript.com/releases/)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2010-08-10T17:52:33.760

在 Windows 下，ps2pdf 和其他实用程序位于`C:\Program Files\gs\gs#.##\lib`.bat 和 .cmd 文件中。这不是很明显，特别是如果您正在寻找 .exe 文件。

# html - 在多列中呈现信息的最佳方式是什么？

> ID：785437
> 
> 赞同：2
> 
> 时间：2009-04-24T11:17:00.653
> 
> 标签：html, css

我有一个基本的页面布局，并想在列中排列信息。

我设法做到了这一点，但我觉得我做得很糟糕。

我制作了一个名为“leftlayer”的图层和样式，它浮动到左侧。然后是 2 个图层，其样式名为“leftlayer2”，它也向左浮动，以保留我想要的信息顺序。然后是一个名为“rightlayer”的层，它向右浮动。

我应该改用表格，还是将所有内容放在单独的图层中？最好的方法是什么？

我的代码：

```
<html>
<head>
<title>Test page</title>
<link rel="stylesheet" href="style.css" type="text/css">
</head>
<div id="Layer0">
<div id="Layer1" class="Layer1">
<h3 align="left">A menu</h3>
<div align="left">
<ul class="BLUE">
<li><a href="#">item 1</a></li>
<li><a href="#">item 2</a></li>
</ul>
</div>
</div>
<div id="Layer2">
<h1>Artcile heading</h1>
<div id="leftlayer" class="leftlayer">
<p><strong>Random info 1: </strong>blah
</p>
<p><strong>Random info 2: </strong>blah blah
</p>
<p><strong>Random info 3: </strong>anything
</p>
<p><strong>Random info 4: </strong>more text
16:46:29 </p>
<p><strong>Random info 5: </strong>and so on
</p>
<p><strong>Random info 6: </strong>such as
</p>
<p><strong>Random info 7: </strong>sport
</p>
</div>
<div class="leftlayer2">
<p><strong>Random info 1: </strong>blah
</p>
<p><strong>Random info 2: </strong>blah blah
</p>
<p><strong>Random info 3: </strong>anything
</p>
<p><strong>Random info 4: </strong>more text
16:46:29 </p>
<p><strong>Random info 5: </strong>and so on
</p>
<p><strong>Random info 6: </strong>such as
</p>
<p><strong>Random info 7: </strong>sport
</p>
</div>
<div class="leftlayer2">
<p><strong>Random info 1: </strong>blah
</p>
<p><strong>Random info 2: </strong>blah blah
</p>
<p><strong>Random info 3: </strong>anything
</p>
<p><strong>Random info 4: </strong>more text
16:46:29 </p>
<p><strong>Random info 5: </strong>and so on
</p>
<p><strong>Random info 6: </strong>such as
</p>
<p><strong>Random info 7: </strong>sport
</p>
<form name="testForm">
<p><input name="radiobutton" value="test1" type="radio">Test</p>
<p><input name="radiobutton" value="test2" type="radio">test</p>
<p><input name="radiobutton" value="test3" type="radio">Test</p>
<p><input name="radiobutton" value="test4" type="radio">test</p>
<input name="Submit" value="Update" type="submit">
</form>
</div>
<div id="rightlayer">
<a href="#">
<img src="img.jpg" height="300" width="199">
</a>
<p>
<a href="#">Click for full description </a>
</p>
<p><a href="#">DELETE</a>
</p>
</div>
<div id="Layer3">
<h1>A list of records</h1>
<table border="0" width="85%">
<tbody>
<tr>
<td width="15%"><strong>Column 1</strong></td>
<td width="10%"><strong>Column 2</strong></td>
<td width="65%"><strong>Column 3</strong></td>
<td width="10%"><strong>Column 4</strong></td>
</tr>
<tr id="article_250405322811">
<td><a href="#">Some info</a></td>
<td><a href="#">more info</a></td>
<td><a href="#">Even more info</a></td>
<td>No more info</td>
</tr>
</tbody>
</table>
</div>
<div id="tablefooter" class="tablefooter">
<div id="tablefooterleft" class="tablefooterleft"><a href="#">&lt;&lt;-First</a>
<a href="#" onclick="updateByPage('Layer3', 'Hardy', '1')">&lt;-Previous</a>
-----------------------------------------------------------------
<a href="#" onclick="updateByPage('Layer3', 'Hardy', '2')">Next -&gt; </a>
<a href="#" onclick="updateByPage('Layer3', 'Hardy', '7')"> Last-&gt;&gt;</a>
</div>
</div>
</div>
</div>
</body>
</html> 
```

的CSS：

```
#Layer0 {
  width: 100%;
  height: 100%;
}

body{
margin:10px 10px 0px 10px;
padding:0px;
color:#999999;
font-family:"Trebuchet MS",arial,sans-serif;
font-size:70.5%;

}

#Layer2 {
background:#fff;
color:#000;
voice-family: "\"}\"";
voice-family: inherit;
padding:20px;

}

#Layer2 p {color:#888;}

#Layer2 a, a:link { color:#006633; text-decoration: none;}

#Layer2 a:hover, a:active{ color:#FF6666; text-decoration: none;}

html>body #Layer2 {
}

p,h1,pre {
margin:0px 10px 10px 10px;
font:Arial, Helvetica, sans-serif;
font-size:12px;
line-height: 1.6em;
text-align:justify;
text-decoration:none;
}

h1 {
font-size:2.5em;
text-align: center;
color:#ccc;
padding-top:15px;

}

h3 {
font-size:14px;
color:#999;

}

.leftlayer {
  float: left;
  left: 20%;
  width: 20%;
  height: 100%;
  margin-right: 10%;
}
.leftlayer strong {
  text-align: left;
}
.leftlayer2 {
  float: left;
  width: 20%;
  height: 100%;
  margin-left: 2%;
}
#rightlayer {
  float: left;
}
#Layer3 {
  float: bottom;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-24T11:42:18.610

不，你不应该使用桌子！< div > 标签是做布局的正确方法！

阅读互联网上的 CSS 列布局：

*   [探索 CSS 布局的局限性](http://www.sitepoint.com/article/exploring-limits-css-layout/)
*   [CSS 多栏布局资源](http://www.robinsblog.com/11032005/css-multi-column-layout-resources/)

针对频繁的建议[，我也不推荐 CSS 网格](https://stackoverflow.com/questions/203069/what-is-the-best-css-framework-and-are-they-worth-the-effort/203133#203133)。

加：

*   你错过了你的身体标签
*   你应该缩进你的代码，这样很难读

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-24T12:25:32.797

坚持`<div>`布局的方法，但使用`<table>`标签显示常规表格数据（如表中的记录）（这正是首先引入此标签的原因）。

要掌握基于 div 的布局技巧，您需要更好地理解[CSS 定位模型。](http://brainjar.com/css/positioning/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-25T07:03:11.300

在我看来，在多个列中呈现信息的最佳方式是使用网格框架，例如[Blueprint CSS](http://www.blueprintcss.org/)。

（表格是禁忌。使用 div 的 + CSS）

蓝图（和其他类似框架）是

*   非常容易使用
*   允许您非常轻松地创建/调整您想要的任意数量的列
*   适用于所有浏览器（包括 IE6）
*   允许您轻松地进行非常复杂的网格布局（创建简单的 2 或 3 列仍然非常容易）

在我看来，手工编码的布局——尽管它们工作得很好——不能很好地扩展，当你试图添加额外的布局元素时，通常需要进行大量的重新设计。带有网格框架的布局相当容易维护，并且您可以立即启动并运行（适用于各种简单和复杂的布局）。试试看 ：）

# modularity - 如何将系统分解为模块？

> ID：785441
> 
> 赞同：3
> 
> 时间：2009-04-24T11:18:50.117
> 
> 标签：modularity

“模块化”的有效性取决于将系统划分为模块时使用的标准。

我想要的是，提出一些可用于将系统分解为模块的标准。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-24T11:24:34.677

[内聚力](http://en.wikipedia.org/wiki/Cohesion_(computer_science))：模块中的功能是相关的。

[低耦合](http://en.wikipedia.org/wiki/Coupling_(computer_science))：模块之间的依赖性最小。

协调的生命周期：模块内功能的更改往往同时发生。通常是高凝聚力的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-24T11:24:21.993

我认为单一职责原则将是一个很好的指南。尽量为每个模块定义职责，让每个模块对自己的事情负责。

见[http://butunclebob.com/ArticleS.UncleBob.PrinciplesOfOod](http://butunclebob.com/ArticleS.UncleBob.PrinciplesOfOod)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-08-14T10:00:41.030

阅读也很有趣：[http ://www.cs.umd.edu/class/spring2003/cmsc838p/Design/criteria.pdf](http://www.cs.umd.edu/class/spring2003/cmsc838p/Design/criteria.pdf)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-09-23T16:51:54.453

这是一个非常古老的问题。

*   模块是给一个程序员或一组程序员的工作分配。这也是变化的单位。
*   耦合和内聚是估计模块之间关系质量的指标，但它们对分解没有用。
*   分解应以“[信息隐藏](http://en.wikipedia.org/wiki/Information_hiding)”为标准。
*   基于“信息隐藏”原理的流程示例和描述：[http](http://www.sqrl.ul.ie/Downloads/Lecture2.pdf) ://www.sqrl.ul.ie/Downloads/Lecture2.pdf 。
*   这个问题的最新技术是软件产品线主题。

# boost-graph - 在 BGL 中更改边缘的目标

> ID：785445
> 
> 赞同：1
> 
> 时间：2009-04-24T11:20:07.870
> 
> 标签：boost-graph

如果我的 BGL 图包含从节点 x 到节点 y 的边，并且我想更改此边的目标，以便现在它从 x 指向 z，怎么办？

BGL中是否有任何功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-27T21:20:24.280

您可以删除一条边并添加另一条边 - 请参阅[MutableGraph](http://www.boost.org/doc/libs/1_38_0/libs/graph/doc/MutableGraph.html)概念中`remove_edge`的`add_edge`定义。我没有看到任何直接操作功能。或者，您可以定义自己的隐藏删除和添加的内容。应特别注意带有附加到边的属性的图（即[MutablePropertyGraph](http://www.boost.org/doc/libs/1_38_0/libs/graph/doc/MutablePropertyGraph.html)）。

# apache-flex - 柔性。图片在 htmlText 中对齐

> ID：785448
> 
> 赞同：0
> 
> 时间：2009-04-24T11:22:13.650
> 
> 标签：apache-flex, htmltext

我将**TextArea的****htmlText**属性设置为以下值：

 **```
<img src="img.gif" />Some text<br><img src="img.gif" />Some text 
```

“一些文本”的上边缘与相应图像的上边缘对齐。

如何通过**底部**边缘（文本底部到图像底部）对齐它？是否可以？

备注：图片高度大于文字高度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-24T12:44:40.333

在 HTML 文本中试试这个 -

```
<table> <tr> <td> <img src="c:\1.png"/> </td> <td VALIGN="bottom"> Some text </td> </tr> </table 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T08:17:09.350

一种解决方案是[在 TextArea 上使用 Canvas](https://stackoverflow.com/questions/790460/flex3-canvas-over-textarea)

# w3c - 显示 W3C 合规性

> ID：785457
> 
> 赞同：5
> 
> 时间：2009-04-24T11:25:25.563
> 
> 标签：w3c, w3c-validation

我想大多数人都同意遵守 W3C 标准是值得追求的。

但是，您是否宣传您的网站是合规的？这样做有好处还是坏处？

如果您确实展示了您的合规性，您是如何做到的？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-24T11:32:40.490

我不知道，因为普通用户不知道网站“有效”意味着什么。

如果关心这些事情的人对此感兴趣，他们可能无论如何都不会相信我的话——他们会自己通过验证器运行我的网站，可能使用诸如 Firebug 之类的工具。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-24T11:30:44.100

这取决于你的听众。如果它是一个技术网站，您可以宣传您的合规性。
如果是简单的博客，那只是肤浅的。

有链接到 W3C 的按钮，可以立即验证引用站点（如果您放错了位置，作为对访问者的检查）。

![有效的 XHTML](https://validator.w3.org/images/valid_icons/valid-xhtml10) ![有效的 CSS](https://jigsaw.w3.org/css-validator/images/vcss)

我会在印记或*关于*页面中添加带有此类链接的*小文本。*所以有兴趣的人可以看一下，但普通用户是不会生气的。 每个页面上的这样一个按钮**只会占用空间**:)

 **** * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-24T14:46:04.580

我不会，主要有两个原因：

1.  没有人在乎，那些这样做的人可能会使用 Firefox 扩展来告诉他们。
2.  100% 有效并不是网页设计的全部和最终目的，有时有合理的理由破坏验证。

显然，#2 需要非常小心，在进行初始 CSS 构建时必须使用有效的标记，并且最终构建中的任何错误都应该有充分的理由。

我也曾经认为，作为一名网络专业人士，不用说我的标记是有效的，在某种程度上这仍然是正确的，但正如你所看到的那样，我的观点已经改变了一些东西。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-24T11:32:46.857

我觉得这是一个很好的做法。我不知道是否有很多用户关注它，但作为开发人员，我在网站上看到的越多，我就越觉得有必要使用这些标准。我认为这是一种向彼此展示我们认为这很重要的方式。

没有看到任何负面影响，多年来，按照标准进行编码使我的工作变得更加轻松。

至于如何——我使用标准的 w3c 标志，但我见过很多网站都设计了自己的版本。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-24T12:29:22.133

我曾经这样做过，但我得出的结论是，它给用户带来的问题比好处还多。[Jukka 解释得最好](http://www.cs.tut.fi/~jkorpela/html/validation.html#icon)。

有些人在关注示例站点的徽标链接并认为验证器社区的联系信息是示例站点的联系信息后，包含 W3C 验证器社区（通过邮件列表）！

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-04-24T14:09:41.657

有好几次我看到有人用这些图标，他们的*首页*有效，但*子页面*经常有没有人注意到的错误。

您实际上可以单击*XHTML 有效*图像（guerda 链接到的图像）并被带到 W3C，它会用大写字母说：“验证失败！”

如果你想支持 W3C 的目标，那就去做吧。无论如何，把自己击倒。使页面有效。您甚至不必向访问者声明它。但是，如果您*确实*想向访问者声明它，那么您的页面最好*是*有效的！

随着内容的变化，您必须继续检查未来。如果您的网站很大或特别动态，则可能无法做到这一点。这可能不值得付出努力。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-04-24T14:21:27.090

我认为展示它是一件好事。大多数网站的底部都有一些空白区域（如 SO）。为什么不把按钮放在那里？普通用户不会在意，只会忽略它们，像我这样的人会很高兴知道您遵循标准。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-24T13:00:51.590

大多数情况下，它为您的页面添加了另一个不必要的东西 - 特别是对于非技术用户。当您阅读一个页面时，您多久真正关心它的 HTML 或 CSS 代码（只要它可以工作）？

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-04-24T14:36:23.887

如果该页面是您的专业网络投资组合/IT 相关网站，那么您当然可以，为什么不呢。观众会理解并且应该欣赏。但是，在具有非技术受众的网站上，这有点毫无意义。

有效性信息在某种意义上就像应用程序的内部版本号。为什么有人想知道这个？如果有人在乎，他仍然可以转到“关于”或“联系网站管理员”页面，您可以在其中包含这些信息。

话虽如此，作为一名程序员，我喜欢在页面上看到它。它不会伤害任何人。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-10-17T22:20:24.513

我有一个符合 w3c 的博客，但没有显示事实。我是一名平面设计师，只是从专业的角度确保我的网站是合规的，以防有人在雇用我之前想检查一下。

# css - 如何将图像放在另一个图像上？

> ID：785458
> 
> 赞同：24
> 
> 时间：2009-04-24T11:25:34.983
> 
> 标签：css

如何将图像放在另一个更大的图像上，例如在 youtube 上，播放按钮显示在视频缩略图的顶部？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2011-04-01T21:12:43.130

使用“播放”符号和您想要的大小（例如 240x320）制作一个半透明的 PNG 图形。

假设您将其命名为“overlay.png”，假设 YouTube 生成的缩略图位于[http://img.ytimg.com/abcdefg/0.jpg](http://img.ytimg.com/abcdefg/0.jpg)

现在，您在代码中只需要这样：

```
<a href="destination_of_your_link">
    <img src="overlay.png" width="320" height="240" border="0"
         style="background: url(http://img.ytimg.com/abcdefg/0.jpg) center center black;" />
</a> 
```

只要您的目标受众还没有使用 IE6，您就应该是安全的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-24T14:32:53.973

我不确定YouTube是否使用图像来实现这种效果，它仍然是Flash播放器吗？

无论如何，这究竟是如何完成的，很大程度上取决于您想要实现的设计。让我们假设您想要实现 YouTube 样式，其中您有一个缩略图并且想要在顶部覆盖一个播放按钮图像。如果您希望缩略图成为实际`<img>`标签，则需要一些额外的标记，如下所示：

```
<div class="thumb-wrapper">
<img src="mythumbnail.gif" alt="my awesome video" /><span></span>
</div> 
```

包装器`<div>`是必需的，因此您可以正确定位 img 和 span，并具有包含它们的尺寸。 span 是覆盖图像所在的位置。

```
.thumb-wrapper {
position:relative;
}

.thumbwrapper span {
position:absolute;
top: 0px;
left: 0px;
width: 100%;
height: 100%;
z-index: 100;
background: transparent url(overlay.png) no-repeat;
} 
```

（我还没有实际测试过，如果它明显错误，请告诉我我会修改它！）

这假设了几件事：

1.  您的缩略图将始终为固定大小，并且您的叠加图像与之匹配
2.  您的叠加图像是半透明的 PNG

您也可以使用该`opacity:`样式来实现#2。当然，IE6 会抬起它的丑头，如果使用透明图像路线，您需要使用 PNG 修复，或者如果使用该方法，则需要使用单独的不透明度过滤器。毫无疑问，这两个问题都在 Stack Overflow 上的其他地方得到了回答，或者很容易被谷歌搜索到。

如果您有其他要求，则可以在没有额外标记的情况下执行此操作，正如我所说，这完全取决于您的确切需求。如果没有 JavaScript，某些要求可能无法实现（这当然意味着您可以使用它注入任何额外的标记！）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2011-03-21T18:03:48.153

您将在 StackOverflow 上的以下线程中找到解决方案： [如何在另一个图形上绘制图形](https://stackoverflow.com/questions/2074079/draw-a-link-and-graphic-over-another-graphic)

很快（在[Ipsquiggle](https://stackoverflow.com/users/243516/ipsquiggle)之后引用）：

```
<div style="position:relative">
  <div>
    <img url="backgroundimg.png">
  </div>
  <div style="position:absolute; left:0; top:0;">
    <a href="foo.html"><img url="smallgraphic.png"></a>
  </div>
</div> 
```

更多详细信息为什么以及如何在原始线程中工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-24T11:32:00.930

如果您对图像大小有很好的控制，我们已经使用了各种元素的背景 - 例如，将表格单元格的背景设置为一个图像并在单元格内放置一个 img 选项卡。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-25T19:39:22.403

以你的 youtube 为例，你可以很容易地用 2 张图片和 1 个 img 标签以及一些 CSS 来做到这一点；）

```
<style>
    img.youtube {
        width:500px; height:500px; 
        margin:0; padding:0; 
        background:transparent url(/point/to/your/larger/image.jpg) no-repeat center
    }
</style>

<img src="/point/to/youtube/play/image.png" alt="Gotta have alt text ;)" border="0" class="youtube" /> 
```

它的工作原理很简单，您将 youtube 小图像设置为透明的 PNG 或 GIF，然后将背景图像设置为较大的图像，这将产生较小的图像在中心的效果，没有额外的标记。

# c# - 在工作线程上创建的 WinForms 窗口未收到所有预期消息

> ID：785462
> 
> 赞同：0
> 
> 时间：2009-04-24T11:26:45.730
> 
> 标签：c#, winforms, multithreading, audio

我正在使用`waveOut`带有回调方法的函数在 C# 中播放音频，其中消息被发送回窗口句柄。我正在创建一个带有覆盖`WndProc`函数的 Windows 窗体来侦听`MM_WOM_DONE`消息。

```
result = WaveInterop.waveOutOpen(out hWaveOut, devNumber, waveStream.WaveFormat, waveOutWindow.Handle, 0, WaveInterop.CallbackWindow); 
```

当我在我的应用程序的主 GUI 线程上时，所有这些都完全可靠地工作。但是如果后台线程尝试这样做，则`waveOutWindow`永远不会收到任何`WOM_`消息。一开始我以为可能是窗口没有被正确创建，它的消息队列没有被服务，但是即使我把下面的代码放在前面`waveOutOpen`，它仍然不起作用。

```
waveOutWindow.Show();
Debug.Assert(waveOutWindow.IsHandleCreated, "Handle not created!");
Debug.Assert(waveOutWindow.Created, "Window not created!"); 
```

我应该说调用`waveOutOpen`是成功的，初始`waveOutWrite`调用也是成功的，但是我从来没有让我的回调知道何时排队更多的音频。

我是否遗漏了有关后台线程表单的一些非常明显的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-24T11:31:16.343

您是否在辅助线程上发送消息？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-24T12:28:00.060

[您应该通过WinSpector](http://www.windows-spy.com/)监视消息输入。你不知道音频库是如何实现消息处理的——也许它发送到主应用程序窗口过程。也许你甚至可以用另一种方式构建它来提供接收通知的窗口的 hwnd。

无论如何，如果发送了任何消息，您将在 WinSpector 中看到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-27T14:44:29.287

好的，我现在已经想通了，当然这很明显。窗口的消息泵未运行。让我偏离正轨的是，当您调用 时，窗口的 WndProc 会运行，并且会处理各种消息，`waveOutOpen`例如等。但是，WndProc函数离开后并没有继续运行（自然是因为这个线程正在运行其他代码）。`WM_CREATE``WM_ACTIVATE``waveOutOpen`

# .net - 枚举还是字典？哪个会在这里帮助我？

> ID：785465
> 
> 赞同：0
> 
> 时间：2009-04-24T11:29:36.520
> 
> 标签：.net, winforms, dynamic-data

我有一个名为 CaseNotes 的 winform 数据输入和检索程序。这有一个要填写的表单。在表单上有多个下拉列表，复选框控件，我将数据绑定到 tblCNMaintItem。该表的结构是 -->

*物品编号 | 类别ID | 物品描述 | 订单号 | 活跃*

有一个单独的类别表提供该类别 ID。CategoryID 映射到案例注释表单上的单个控件。

我的问题有两个：

1.  我应该如何获得每个项目的价值？如中，我通过 CategoryID 获取 itemDescription 以填充控件，但在 SaveNewCaseNote() 上，我需要获取相应的 ItemID。我怎样才能做到这一点？我应该为每个类别（控件）创建一个字典吗？我应该枚举 ItemID/ItemDescription 组合吗？

2.  ***编辑***忘记＃2，因为我找到了答案。

谢谢！

## 编辑

好的，由于某种原因，我未能清楚地说明这一点，这引起了混乱。我的数据库由 3 个表组成。 **tblCaseNotes**，**tblCNMaintCategory**，**tblCNMaintItem**。CaseNotes 每行包含一个完整的“案例说明”。Maint 表格用于填写 CaseNote 时的多项选择答案。示例：他们必须选择“联系位置”。选项“办公室”或“会员之家”。在**tblCNMaintCategory**中有一个像这样的条目-->

*CategoryID = 3，CatgoryName = 联系人位置，IsActive = True*

在**tblCNMaintItem**中有 2 个这样的条目 -->

*ItemID=51, CategoryID=2, ItemDescription=Office, OrderID=0, IsActive=True ItemID=52, CategoryID=2, ItemDescription=Member's Home, OrderID=0, IsActive=True*

在**tblCaseNote**中会有一个像这样的条目 --> *CaseNoteID=3243, PersonID=454676, AssocContactLocations= 51，然后还有更多的列遵循相同的模式*

问题 1 是关于希望将 ItemID 存储在 AssocContactLocation 中而不是 ItemDescription 中。我在想一个

`Dictionary <strng, int> cLocateItems(itemDescription,itemID)`也许...

这有帮助吗？

感谢大家的时间和精力！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-24T13:53:01.557

编辑后，我认为您的意思是，“如何在保存数据时*显示*文本但仍使用数字 ID？”

如果这是您的问题，那么您的字典想法会起作用。

我已经很久没有做任何 CRUD 工作了，但我记得您可以将 ID 与文本一起存储在下拉框中。然后，当您进行更新时，您将使用 ID 而不是文本。此选项可能比您的字典想法更容易。

如果我仍然误解了您的问题，我想其他人将不得不提供帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-24T13:57:48.597

第一部分看不懂，第二部分

最佳实践是根本不在单个列中存储多个值。

相反，您创建对包含所有值的第二个表的一对多引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-25T02:01:39.153

CNMaintItem 的底层数据源是什么？如果它已经在 ADO.NET DataTable 中，那么解决方案很简单。绑定到列表控件时，将 DisplayMember 属性设置为“ItemDescription”，将 DisplayValue 设置为“ItemID”，例如：

```
//dtItem is the DataTable
ddlItem.DataSource = dtItem;
ddlItem.DisplayMember = "ItemDescription";
ddlItem.ValueMember = "ItemID"; 
```

或者更好，对于强类型数据表：

```
ddlItem.DataSource = dtItem;
ddlItem.DisplayMember = dtItem.ItemDescriptionColumn.ColumnName;
ddlItem.ValueMember = dtItem.ItemIDColumn.ColumnName; 
```

以上也可以是任何类型的对象集合。如果您有 Dictionary，则需要将字典对象分配给 BindingSource 对象，然后将 BindingSource 对象分配给列表控件的 DataSource 属性：

```
BindingSource bs = new BindingSource();
bs.DataSource = dictItem;
ddlItem.DataSource = bs;
ddlItem.DisplayMember = "Value";
ddlItem.ValueMember = "Key"; 
```

在所有情况下，在保存时，ItemID 都可以通过 SelectedValue 获得：

```
int IdToSave = Convert.ToInt32(ddlItem.SelectedValue); 
```

# c# - 为什么在这种情况下可空类型不相等？

> ID：785466
> 
> 赞同：2
> 
> 时间：2009-04-24T11:30:15.910
> 
> 标签：c#, null

令人惊讶的是，下面的代码不会成功。

```
int? n1 = null;
int? n2 = null;
Assert.IsTrue(n1 <= n2);  // Fails here 
```

你知道为什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-24T11:54:08.630

在 C#（和 VB.Net）中使用具有可为空值的布尔逻辑经常违反逻辑。我发现理解它的最好方法是记住“null 不是值”。因为 null 不是一个值，所以您不能对其进行任何操作。因此，像“ `1 > null`”和“ `1 < null`”这样的东西都是真的。

这是详细指南：http: [//msdn.microsoft.com/en-us/library/2cf62fcy.aspx](http://msdn.microsoft.com/en-us/library/2cf62fcy.aspx)

如果您确实想将 null 视为一个值，那么您可以使用 GetValueOrDefaultMethod() 将 null 等同于默认值。例如

```
Assert.IsTrue(n1.GetValueOrDefault() <= n2.GetValueOrDefault());  // True 
```

这有点冗长，但它会完成工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-24T11:41:29.953

要么这是一个错字，你的意思是“==”而不是“<=”，或者你误解了空值是如何工作的。

在几乎所有语言（包括 c#）中，对 null 的唯一默认合法操作是检查其他内容是否等于它（在 .Net 中 == 默认为引用相等）。

<= 和 >= 没有意义（因为如果他们这样做了，他们会有非常奇怪的行为）

一些语言（SQL 可能是最知名的）不允许使用“标准”相等运算符以使这一点更加清晰。在 SQL 中 null == null 不正确，并且兼容的服务器将拒绝您尝试通过文字执行此操作的查询。

C# 采用与它的传统（C 风格的命令式语言）相同的路线，其中对空值的测试基于测试其中的位是否为零（事情变得更加复杂，但基本上就是这样）。因此，只有引用类型才能真正为 null （`Nullable<T>`在幕后有很多魔法使它看起来像，但实际上在引擎盖下它*不是 null*）。这意味着引用相等语义很好地遵循 null 语义，因此 == null 是允许的。

其他语言以不同的方式实现 null（例如 SQL，其中任何内容都可以设为 null，因此某些内容的“nullness”必须存储在其外部（很像 Nullable）。这意味着传统的相等使用不必是主要的关注和 null 可以是真正特殊的，而不是某些类型的特殊情况。有关 null 特殊性的更多信息，请查看[This question has a list of such languages](https://stackoverflow.com/questions/75267/in-how-many-languages-is-null-not-equal-to-anything-not-even-null/75314#75314)

大多数引用类型没有定义 >= 或 <= 运算符，因此在实践中 == 和 <= 之间的断开连接几乎没有问题（通常，如果 == 为真，则 <= 和 >= 为真好）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-24T11:52:29.383

你可以试试这个：

```
int? n1 = null;
int? n2 = null;

// Test for equality
Assert.IsTrue((n1.HasValue && n2.HasValue && n1.Value == n2.Value) || (!n1.HasValue && !n2.HasValue));

// Test for less than or equal to
Assert.IsTrue(n1.HasValue && n2.HasValue && n1.Value <= n2.Value); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-24T11:51:26.937

Nullable 类型被包装到 System.Nullable 对象中，因此您不比较 int 值，而是比较引用。要比较这些值，您需要这样做：

```
Assert.IsTrue(n1.Value <= n2.Value); 
```

我在[博客](http://www.diskordia.ch/blog/?p=87)上写了一些关于 nullable 的内容。

编辑：但在您的情况下，n1 和 n2 为空，因此您甚至无法比较这些值。

# c# - 如何为泛型类重载运算符？

> ID：785470
> 
> 赞同：2
> 
> 时间：2009-04-24T11:30:34.113
> 
> 标签：c#, generics, operator-overloading

在我看来，这不仅仅是我的问题。
请不要重复关闭我的问题，因为我查看了这些问题但没有找到解决方案。

```
class Matrix<T> {
        private Int32 rows;
        private Int32 cols;
        private T[,] matrix;

        public Matrix() {
            rows = cols = 0;
            matrix = null;
        }

        public Matrix(Int32 m, Int32 n) {
            rows = m;
            cols = n;
            matrix = new T[m, n];
        }

        public T this[Int32 i, Int32 j] {
            get {
                if (i < rows && j < cols)
                    return matrix[i, j];
                else
                    throw new ArgumentOutOfRangeException();
            }
            protected set {
                if (i < rows && j < cols)
                    matrix[i, j] = value;
                else
                    throw new ArgumentOutOfRangeException();
            }
        }

        public Int32 Rows {
            get { return rows; }
        }

        public Int32 Cols {
            get { return cols; }
        }

        public static Matrix<T> operator+(Matrix<T> a, Matrix<T> b) { 
            if(a.cols == b.cols && a.rows == b.rows) {
                Matrix<T> result = new Matrix<T>(a.rows, a.cols);
                for (Int32 i = 0; i < result.rows; ++i)
                    for (Int32 j = 0; j < result.cols; ++j)
                        result[i, j] = a[i, j] + b[i, j];
                return result;
            }
            else
                throw new ArgumentException("Matrixes don`t match operator+ requirements!");
        }

        public static Matrix<T> operator-(Matrix<T> a, Matrix<T> b) {
            if (a.cols == b.cols && a.rows == b.rows) {
                Matrix<T> result = new Matrix<T>(a.rows, a.cols);
                for (Int32 i = 0; i < result.rows; ++i)
                    for (Int32 j = 0; j < result.cols; ++j)
                        result[i, j] = a[i, j] - b[i, j];
                return result;
            }
            else
                throw new ArgumentException("Matrixes don`t match operator- requirements!");
        } 
```

你知道编译器告诉了什么：“运算符'-'不能应用于'T'和'T'类型的操作数”，即适用于所有运算符。
那么，对此最好的决定是什么？据我所知，接口不能包含运算符，因此唯一的方法是 T 类型的抽象基类。而且，正如我发现的那样，不能将操作符定义为抽象的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-24T11:53:31.517

上一个答案（已经链接）解释了大部分内容；对于相关示例（在带有[MiscUtil](http://www.yoda.arachsys.com/csharp/miscutil/usage/genericoperators.html)的 .NET 3.5 中）-[`Complex<T>`](http://csharpindepth.com/ViewNote.aspx?NoteID=50)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-24T11:38:05.063

为什么例如[网络泛型中重载运算符约束的解决方案对](https://stackoverflow.com/questions/147646/solution-for-overloaded-operator-constraint-in-net-generics)您没有帮助？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-24T11:51:34.517

您可以重载运算符，但编译器不知道如何添加两个未知的泛型类型（T + T），并且您无法添加约束，因为运算符是静态成员。

一种方法（ .Net 2.0 中的**[Edit]**）是在 Matrix 的静态构造函数中为所有运算符方法创建一个工厂，这将为值类型 T 创建一个正确的实现（基于其 TypeCode，例如例如），或抛出`NotImplementedException`不支持的值类型。但是这样一来，您就没有编译时检查。

**[编辑]**在 .Net 3.5 中，您实际上可以使用表达式树获取通用参数的运算符：[https](https://jonskeet.uk/csharp/miscutil/usage/genericoperators.html) ://jonskeet.uk/csharp/miscutil/usage/genericoperators.html 。

您也可以查看此链接：http: [//msdn.microsoft.com/en-us/library/system.linq.expressions.binaryexpression.aspx](http://msdn.microsoft.com/en-us/library/system.linq.expressions.binaryexpression.aspx)

# c++ - 基于 C/C++ 插件的系统的良好模式？

> ID：785480
> 
> 赞同：14
> 
> 时间：2009-04-24T11:32:41.457
> 
> 标签：c++, c, plugins

在使用需要支持实时交换的共享对象/动态库开发基于 C/C++ (=2?) 插件的框架时，哪些示例有助于查看实现细节？

谢谢。

**注意：**这里的重点是实时交换，不需要重新启动系统是要求

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-24T11:48:44.133

如果您在 POSIX 上，则`dlopen()`,是您所需要的。`dlsym()``dlclose()`

有关`man dlsym`详细信息和示例，请参阅。

有一篇关于加载动态库的好[文章，插件基础设施就是一个例子。](http://www.codepedia.com/1/LoadingDynamicLibraryC)

**EDIT** OP 添加了 Windows 作为要求，因此这种方法无济于事，因为 Windows 不符合 POSIX 标准。但是 WinAPI 中也有类似的功能 - 请参见[此处](http://www.ibm.com/developerworks/aix/library/au-porting/index.html)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-24T11:54:25.307

您可能想尝试[Boost.Extension](http://boost-extension.blogspot.com/2007/09/what-is-boostextension.html)但要注意：尽管它的名字，它不是 boost 库之一。

这是[其文档的链接](http://boost-extension.redshoelace.com/docs/boost/extension/index.html)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-24T15:42:58.517

如果您想跨平台加载库而不必为每个平台的 API 单独开发，[libltdl](http://www.gnu.org/software/libtool/manual/html_node/Using-libltdl.html)可能会有所帮助。

> Libtool 提供了一个名为 的小型库，`libltdl`旨在向程序员隐藏 dlopen 库的各种困难。它由一些头文件和小的 C 源文件组成，可以与需要 dlopening 功能的应用程序一起分发。在某些平台上，其动态链接器对于简单的`libltdl`服务实现来说过于有限，它需要 GNU DLD，或者它只会模拟使用 libtool 的 dlpreopening 机制的动态链接。
> 
> libltdl 目前支持以下动态链接机制：
> 
> *   `dlopen`（Solaris、Linux 和各种 BSD 风格）
> *   `shl_load`(HP-UX)
> *   `LoadLibrary`（Win16 和 Win32）
> *   `load_add_on`(BeOS)
> *   `NSAddImage`或`NSLinkModule`（达尔文和 Mac OS X）
> *   GNU DLD（模拟静态库的动态链接）
> *   libtool 的 dlpreopen（参见[Dlpreopening](http://www.gnu.org/software/libtool/manual/html_node/Dlpreopening.html#Dlpreopening)）

Boost.Extension 似乎只支持 Windows PE `dll`、UNIX ELF 共享对象和 Mac OS X Mach-O 捆绑包。嗯，这对你来说可能就足够了……

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-24T12:31:59.957

对于 C++ 插件，您可以查看[这篇文章](http://www.linuxjournal.com/article/3687)，其中详细介绍了如何使用前面提到的 posix 调用来实现它。

引用文章：

> 既然我们可以使用这些函数来访问 C 库中的函数，那么我们如何使用它们来访问 C++ 库中的类呢？有几个问题需要克服。一是我们必须能够在库中找到我们需要的符号。这比看起来要复杂，因为符号在 C 和 C++ 文件中的存储方式不同。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-24T13:19:11.733

[Boost.Extension](http://boost-extension.redshoelace.com/docs/boost/extension/boost_extension/shared_libraries/shared_library_class.html)看起来不错（从未使用过，但很快就会尝试）。另一种选择是[POCO SharedLibrary 类](http://pocoproject.org/docs/Poco.SharedLibrary.html)。

# javascript - 访问节点的最快方式

> ID：785482
> 
> 赞同：1
> 
> 时间：2009-04-24T11:32:49.570
> 
> 标签：javascript, html, dom, traversal

我有大约一千个这样构造的 DIV 标签：

```
<div id="1">
    <div class="1"></div>
    <div class="2"></div>
    ...
</div>

<div id="2">
    <div class="1"></div>
    <div class="2"></div>
    ...
</div> 
```

如果我现在想访问特定节点，请说“div#10 div.5”-使用 javascript DOM 遍历最快的方法是什么？我已经有了索引值“10”和“5”——我只是在寻找实现这一目标的最快方法。

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-24T11:59:18.647

如果您有大约 1000 个 DIV，我认为这是自动生成的 html？

如果是这样，是否有任何理由不能将 id 添加到内部 DIV 中？

```
<div id="1">
    <div id="1.1" class="1"></div>
    <div id="1.2" class="2"></div>
    ...
</div>

<div id="2">
    <div id="2.1" class="1"></div>
    <div id="2.2" class="2"></div>
    ...
</div> 
```

然后你可以只使用 getElementById 而不必担心排序或间距等。

Since element ids have to be unique on the page then this should always be the fastest way to look up the element.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-24T11:37:09.480

使用jQuery：

```
alert($("#10 > .5").html()); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-24T11:55:40.247

没有验证并假设子节点是唯一的节点并且都是按顺序排列的；

```
document.getElementById('10').childNodes[4]; 
```

注意成为节点的空格[https://developer.mozilla.org/En/Whitespace_in_the_DOM](https://developer.mozilla.org/En/Whitespace_in_the_DOM)

# sql - 同一列 DB2 上的多个类似

> ID：785484
> 
> 赞同：2
> 
> 时间：2009-04-24T11:34:12.610
> 
> 标签：sql, syntax, db2

我正在尝试查询类似

```
select emp_id from dept.employee where
  firstname like '%sam%' or 
  firstname like '%SAM%' or
  firstname like '%will%' or
  firstname like '%WILL%' 
```

是否可以将它放在正则表达式中

```
select emp_id from dept.employee where
  firstname like '%sam|SAM|will|WILL%' 
```

或者

```
select emp_id from dept.employee where
  upper(firstname) like '%sam%' or
  upper(firstname) like '%will%' 
```

我正在使用 DB2 UDB9。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-24T11:48:00.687

不幸的是，DB2 中没有立即可用的 Regex 函数。但是可以有一个实现正则表达式的外部用户定义函数（调用外部 CLI、.NET 或 Java 函数）。以下是 IBM 提供的现成示例：

[http://www.ibm.com/developerworks/data/library/techarticle/0301stolze/0301stolze.html](http://www.ibm.com/developerworks/data/library/techarticle/0301stolze/0301stolze.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-24T12:06:42.343

这要么是一个糟糕的例子，要么是一个糟糕的数据库设计:-)。

您可能不应该以任何需要您使用`LIKE`. 您需要记住，表格的阅读频率几乎*总是*比写入的频率高得多，并相应地进行设计。

这意味着您希望成本在插入或更新上，而不是在选择上。每行功能，例如`upper(name)`永远不能很好地扩展到适当的企业级数据库。

在我看来，对于 DB2，您应该具备以下条件：

*   一个插入/更新触发器，它将从名字（和姓氏）中删除前导和尾随空格。
*   生成的列将大写名称（这会使用更多存储空间，但这通常比浪费时间要好）。我不确定 UDB9 是否已生成列（DB2/z 已生成），但您可以在同一个插入/更新触发器中执行此操作。基本上它是一个额外的列，总是设置为另一个字段的大写版本。
*   生成列上的索引，而不是原始列。

这样一来，您的选择将伴随查询（大而丑陋，但高效）：

```
select * from tbl
where generatedname = 'SAM'
or    generatedname = 'SAMUEL'
or    generatedname = 'SAMANTHA'
or    generatedname = 'WILL'
or    generatedname = 'WILLIAM'
or    generatedname = 'WILLOMENA' 
```

或（不那么大和丑陋，同样高效，并且更接近于意图的原始查询）：

```
select * from tbl
where generatedname like 'SAM%'
or    generatedname like 'WILL%' 
```

使用查询优化器的全部功能（我认为，如果字段被索引，DB2 和其他 DBMS 仍然可以轻松优化 'XX%'）。

`LIKE`尽管有时没有太多选择，但我不太喜欢使用任何尺寸合适的桌子。我想不出您想要寻找的任何可行情况，`"%SAM%"`这样做会导致无法最大程度地使用优化器。

# .net - DLL 需要上传两次才能使更改生效

> ID：785486
> 
> 赞同：0
> 
> 时间：2009-04-24T11:34:59.847
> 
> 标签：.net, dll

我有一个在本地开发机器上运行的 .NET 1.1 Web 应用程序，实时版本在运行 .NET 2.0 的托管 Web 服务器上运行（*一切运行良好*）。

我的实时服务器有我本地开发机器上的项目的镜像。当我重新构建项目/解决方案并将新的 DLL 上传到实时服务器时，我所做的更改不会在第一次上传时生效。

我发现我必须

1.  *在开发机器上构建项目*
2.  *导航到 Dev 机器上的主页，以便重新编译 DLL*
3.  *将新的 DLL 上传到实时服务器*
4.  *导航到实时服务器上的主页，以便重新编译 DLL*

然后再次重复步骤 2,3 和 4，这一次更改已生效。

为什么会发生这种情况的任何想法，因为它使我的部署过程比它必须的要长得多，而且有时我什至不得不做三遍非常令人沮丧！

非常感谢您的帮助。

**注意：**我在 XP2 Windows 机器上运行 Studio .NET 2003，在 Firefox 3.0.9 中浏览。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-24T11:44:35.720

如果您有远程桌面功能，您可以尝试步骤 1-4 并回收应用程序池，看看是否能解决问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-24T11:46:36.073

虽然我不明白为什么 ASP.NET 会“重新编译”已编译的 DLL（它应该被简单地加载），但这里有一些需要考虑的可能性（我会在考虑这一点时添加更多内容）：

1.  通过浏览器缓存。在 Firefox 中，如果您有“Webdeveloper 插件”，您可以关闭缓存。

2.  ASP.NET 临时文件夹中的 DLL 卷影副本损坏。要解决这个问题，请参阅[我对这个问题的回答](https://stackoverflow.com/questions/638925/how-to-tell-what-page-a-dll-refers-to-in-precompiled-asp-net-site/639027#639027)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-24T11:51:14.720

检查 perfmon 计数器以进行重新编译。除非您是 NGEN，否则在网站上删除新的 DLL 会导致重新编译页面。web.config 中有一个设置标记它们是批量编译还是一次编译。在任何一种情况下，删除一个新的 DLL 都会触发重新编译您的页面。

这里有不止一次让我感到痛苦的事情——我做出改变，放弃它，然后点击网站。我没有看到我的更改的影响，所以我做了其他事情来“修复它”，然后刷新我的浏览器窗口。现在我看到了变化！变化一直存在，是刷新“导致”出现。

# web-applications - debug="false" 的问题

> ID：785487
> 
> 赞同：0
> 
> 时间：2009-04-24T11:35:00.580
> 
> 标签：web-applications, iis-7, web-config

我有一个程序，它适用于 web.config 中的 debug="true"。当我想得到好的版本时，我把 debug="false"。当我打开 2（或 3 或 4，它是偶然的）选择窗口（弹出窗口）时，我有一个超时错误。

我已经读过如果调试是真的属性没有考虑。但我已将此值设置为“900”并且错误仍然存​​在。

另一种获取错误的方法？

我使用 vista 和 IIS7。

*已编辑：我已将管道更改为经典而不是集成，并且效果很好。任何原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-24T11:38:37.730

设置 debug=true 实质上强制 Web 服务器运行单线程以进行调试 - 它序列化请求并且往往隐藏多线程问题。如果没有关于您的应用程序的更多详细信息，很难推测可能出现的问题。

# .net - 我可以使用来自 Objective-C 的单声道库（在 iPhone 上）吗？

> ID：785488
> 
> 赞同：2
> 
> 时间：2009-04-24T11:35:21.687
> 
> 标签：.net, iphone, objective-c, mono

我正在调查一个应用程序到 iPhone 的端口。我现有的业务逻辑是类库 dll 中的 C#。它进行一些处理以及与网站的通信。

我知道 Objective-C 是在 iPhone 上开发的最好的东西，我已经准备好深入研究，但如果可能的话，我想避免重写现有的逻辑代码。

如果我在单声道中重新设计 .NET 库（假设可以），有没有办法在 iPhone 上使用 Objective-C 的单声道输出？

欢迎任何提示！

干杯克里斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-24T11:48:45.677

是的，您可以使用 Mono 的静态编译功能为 iPhone 开发 C#。这是有关如何完成此操作的一些详细信息的链接

*   [http://arstechnica.com/open-source/news/2009/01/open-source-mono-framework-brings-c-to-iphone-and-wii.ars](http://arstechnica.com/open-source/news/2009/01/open-source-mono-framework-brings-c-to-iphone-and-wii.ars)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-11-11T22:19:59.647

这似乎提供了加载 CLR 程序集并从 Objective-C 调用它的能力：

*   [http://mono-project.com/ObjCSharp](http://mono-project.com/ObjCSharp)

# linux - 让我的自动下载 shell 脚本更好

> ID：785494
> 
> 赞同：1
> 
> 时间：2009-04-24T11:37:37.297
> 
> 标签：linux, shell, debian, wget

所以我想从 rapidshare 下载多个文件。这是我目前拥有的。我通过运行创建了一个 cookie-

```
wget \
    --save-cookies ~/.cookies/rapidshare \
    --post-data "login=USERNAME&password=PASSWORD" \
    --no-check-certificate \
    -O - \
    https://ssl.rapidshare.com/cgi-bin/premiumzone.cgi \
    > /dev/null 
```

现在我有一个运行的 shell 脚本，看起来像这样-

```
#!/bin/bash
wget -c --load-cookies ~/.cookies/rapidshare http://rapidshare.com/files/219920856/file1.rar
wget -c --load-cookies ~/.cookies/rapidshare http://rapidshare.com/files/393839302/file2.rar
wget -c --load-cookies ~/.cookies/rapidshare http://rapidshare.com/files/398293204/file3.rar
.... 
```

我想要两件事-

1.  shell 脚本需要读取文件以从文件中下载。
2.  shell 脚本应该一次下载 2 到 8 个文件。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-24T16:20:20.113

当您想要并行作业时，请考虑`make`.

```
#!/usr/bin/make -f

login:
        wget -qO/dev/null \
--save-cookies ~/.cookies/rapidshare \
--post-data "login=USERNAME&password=PASSWORD" \
--no-check-certificate \
https://ssl.rapidshare.com/cgi-bin/premiumzone.cgi
$(MAKEFILES):
%: login
        wget -ca$(addsuffix .log,$(notdir $@)) \
--load-cookies ~/.cookies/rapidshare $@
        @echo "Downloaded $@ (log in $(addsuffix .log,$(notdir $@)))" 
```

将其保存在`rsget`某个位置`$PATH`（确保使用制表符而不是空格进行缩进），给它`chmod +x`，然后运行

```
rsget -kj8 \
    http://rapidshare.com/files/219920856/file1.rar \
    http://rapidshare.com/files/393839302/file2.rar \
    http://rapidshare.com/files/398293204/file3.rar \
    ... 
```

这将登录，然后是`wget`每个目标。 `-j8`告诉`make`并行运行多达 8 个作业，并且`-k`意味着“即使目标返回失败也要继续”。

### 编辑

使用 GNU Make 3.79 和 3.81 测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-24T11:58:52.300

尝试这个。我认为它应该做你想做的事：

```
#! /bin/bash

MAX_CONCURRENT=8
URL_BASE="http://rapidshare.com/files/"
cookie_file=~/.cookies/rapidshare

# do your login thing here...

[ -n "$1" -a -f "$1" ] || { echo "please provide a file containing the stuff to download"; exit 1; }

inputfile=$1
count=0
while read x; do
  if [ $count -ge $MAX_CONCURRENT ]; then
    count=0
    wait
  fi
  { wget -c --load-cookies "$cookie_file" "${URL_BASE}$x" && echo "Downloaded $x"; } &
  count=$((count + 1))
done < $inputfile 
```

# c# - 扩展用户控件

> ID：785499
> 
> 赞同：2
> 
> 时间：2009-04-24T11:40:30.720
> 
> 标签：c#, .net, winforms, inheritance, user-controls

我有一个关于扩展继承自 UserControl 的自定义控件的问题。

```
public partial class Item : UserControl
{
    public Item ()
    {
        InitializeComponent();
    }
} 
```

我想做一个从 Item 继承的控件

像这样

```
public partial class ItemExtended : Item
    {
       public ItemExtended():base()
        {
            InitializeComponent();
        }
    } 
```

这当然很完美，遗产也很有效，但我的问题出在设计师身上

我只是无法在设计中打开此 ItemExtended ....

它说：找不到类型“项目”的构造函数。

sy有解释吗？

是最好的方法吗？

谢谢

我当然在 .NET Winform 上使用 c# :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-24T11:54:39.813

在非常派生的用户控件上调用 InitializeComponent() 来调用 InitializeComponent() 两次。

这可能会导致问题。

并且还有一些帮助属性 callad IsDesign 或 UC 的 Design（类似的东西），这有助于避免在设计时（在 VS 中）进行不必要的 UI 操作。

编辑：它是设计模式。您可以通过设计避免运行 RT 函数。就像 if (!this.DesignMode) InitializeComponents();

您也可以查看此论坛帖子。 [http://www.c-sharpcorner.com/Forums/ShowMessages.aspx?ThreadID=41254](http://www.c-sharpcorner.com/Forums/ShowMessages.aspx?ThreadID=41254)

# c++ - COM MFC 应用程序不显示窗口

> ID：785503
> 
> 赞同：1
> 
> 时间：2009-04-24T11:41:48.377
> 
> 标签：c++, com, mfc

我有一个支持 ATL 的 MFC 应用程序，其想法是当有人创建我在 mfc 应用程序中声明的接口的实例时，此实例化会创建并显示一个窗口。

如果 com 客户端是 cmd.exe，这一切都可以正常工作，我创建了一个快速 com 客户端来实例化接口，并且当这种实例发生时，窗口会根据需要显示。

但是，如果此实例化是在另一个 com 对象（例如 atl 服务器对象（服务））中完成的，则不会显示该窗口。请注意，mfc 进程是在 DcomLaunch 进程下创建的，但没有显示任何窗口。一切正常，但窗口未显示在我的桌面上。

两个问题：

1）为什么我的窗口在这种情况下不显示？

2）当我用我的控制台应用程序创建相同的界面时，只创建一个mfc应用程序的进程，无论我启动多少个控制台应用程序，如果服务尝试实例化多个对象，则多个mfc进程创建！这是为什么，我怎样才能避免这种情况。我怎样才能使第一个 mfc 进程始终与响应客户端调用的进程相同？

（我认为这完全是由于安全设置......但我已经尝试改变一些并且什么都没有......）

谢谢

努诺

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-28T19:37:08.547

一般来说，服务不能创建窗口。在 Pre-Vista 之前，您可以通过给定服务属性的“登录”标签上的“允许服务与桌面交互”复选框启用服务与桌面交互（例如，打开一个窗口）。如果您的目标是 Vista，这不是一个选项。

但是，鉴于这是您正在处理的 DcomLaunch 服务，您显然不想这样做。

即使这是你自己写的服务，大多数人都会建议你不要这样做，原因有几个（没有特别的顺序）：

*   创建的 UI 只能在会话 0 中访问
*   创建一个窗口会在您的（可能）特权进程中创建一个攻击服务，因为用户运行的任何其他进程都可以与该服务的窗口交互。

同样，由于上述内容仅适用于 Vista 之前，并且无论如何都是一个坏主意，因此对于想要公开 UI 的服务，普遍接受的“最佳实践”是拥有一个单独的应用程序，该应用程序包含与使用该服务进行通信的 UI您选择使用的任何 IPC 机制。

# language-agnostic - 免费的商业编码——如果有的话，你应该做多少？

> ID：785510
> 
> 赞同：-1
> 
> 时间：2009-04-24T11:47:22.717
> 
> 标签：language-agnostic

我最近回答了一个[问题](https://stackoverflow.com/questions/784895/persuade-boss-dump-terrible-architecture/784927#784927)，提出一个建议，即提问者应该通过在业余时间编写替代方案，然后将其作为替代方法展示给他的同事来改进他抗拒改变的老板的遗留系统。

这让我想起了我在职业生涯中所做的所有*无偿*开发工作。虽然我知道我们的性格是工作到很晚，在黑暗的房间里，吃披萨，在几台显示器前无精打采，你什么时候*关机*回家？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-24T11:57:27.497

正如对该问题的评论之一所说，为什么不把时间投入到你自己的项目中呢？真正的答案是表明您已经“签署”了多少项目。我举两个例子

1) 一个很棒的项目，我们在早餐前做了 6 件不可能的事情。PM 设法让我们所有人（我的意思是每个人）通宵工作，然后度过漫长的一天，然后回家并在凌晨 4 点重新开始，以便及时进行 12:00 的演示。事情是我们喜欢它，后来收获了回报。

2）绝望的混乱无处可去，士气低落的团队，高层管理人员明确要求失败。在那个阶段你能做什么，长时间的午餐，谷歌和简历工作。下班时间根本没有工作。

这一切都取决于项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-24T11:56:46.907

我有在家工作的奢侈（负担？），所以我最终比在办公室做的工作要多得多。笔记本电脑已经设置好并连接到 VPN，我完全难以抗拒“把它搞定”的诱惑。我会说我平均每周可能有几个（少于 10）小时的“无偿”工作。但是，如果我正在做的事情是按照自己的方向或帮助填补与当前项目相关的知识空白，我只会“无偿”工作。

小小的“哦，我应该这样试试”的时刻将有资格获得“无薪”时间，就像“现在，我该怎么做？”一样。问题。

# bash - 如何从项目中删除所有 .pyc 文件？

> ID：785519
> 
> 赞同：728
> 
> 时间：2009-04-24T11:51:39.227
> 
> 标签：bash

我在一个相当大的项目中重命名了一些文件，并希望删除它们留下的 .pyc 文件。我尝试了 bash 脚本：

```
 rm -r *.pyc 
```

但这并没有像我想象的那样通过文件夹递归。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1259
> 
> 时间：2009-04-24T11:55:27.160

```
find . -name "*.pyc" -exec rm -f {} \; 
```

* * *

## 回答 #2

> 赞同：1056
> 
> 时间：2009-05-29T11:37:48.337

`find . -name '*.pyc' -delete`

当然是最简单的了。

* * *

## 回答 #3

> 赞同：88
> 
> 时间：2014-04-07T15:02:25.563

添加到您的`~/.bashrc`：

```
pyclean () {
        find . -type f -name "*.py[co]" -delete
        find . -type d -name "__pycache__" -delete
} 
```

这将删除所有 .pyc 和 .pyo 文件和`__pycache__`目录。它也非常快。

用法很简单：

```
$ cd /path/to/directory
$ pyclean 
```

* * *

## 回答 #4

> 赞同：87
> 
> 时间：2012-12-02T11:18:45.450

在当前版本的 debian 中，您的`pyclean`脚本包含在`python-minimal`包中。

用法很简单：

```
pyclean . 
```

* * *

## 回答 #5

> 赞同：53
> 
> 时间：2009-04-25T17:36:12.557

如果您使用 bash >=4.0（或 zsh）

```
rm **/*.pyc 
```

请注意，在递归扫描整个目录树时选择直接第一级子目录中的`*/*.pyc`所有文件。例如，将被删除，但不会被 删除。`.pyc``**/*.pyc``foo/bar/qux.pyc``rm **/*.pyc``*/*.pyc`

必须启用 globstar shell 选项。要启用`globstar`：

```
shopt -s globstar 
```

并检查其状态：

```
shopt globstar 
```

* * *

## 回答 #6

> 赞同：34
> 
> 时间：2015-10-23T13:47:47.327

对于 Windows 用户：

```
del /S *.pyc 
```

* * *

## 回答 #7

> 赞同：30
> 
> 时间：2009-04-25T17:19:42.050

我曾经为此使用别名：

```
$ which pycclean

pycclean is aliased to `find . -name "*.pyc" | xargs -I {} rm -v "{}"' 
```

* * *

## 回答 #8

> 赞同：18
> 
> 时间：2009-04-25T17:12:58.277

```
find . -name '*.pyc' -print0 | xargs -0 rm 
```

find 递归地查找 *.pyc 文件。xargs 获取该名称列表并将其发送到 rm。-print0 和 -0 告诉这两个命令用空字符分隔文件名。这允许它在包含空格的文件名甚至包含新行的文件名上正常工作。

-exec 的解决方案有效，但它为每个文件创建一个新的 rm 副本。在慢速系统或有大量文件的情况下，这将花费太长时间。

您还可以添加更多参数：

```
find . -iname '*.pyc' -print0 | xargs -0 --no-run-if-empty  rm 
```

iname 添加不区分大小写，例如 *.PYC 。如果您没有此类文件，则 no-run-if-empty 可防止您从 rm 收到错误。

* * *

## 回答 #9

> 赞同：16
> 
> 时间：2014-07-14T00:49:27.437

```
$ find . -name '*.pyc' -delete 
```

这比

```
$ find . -name "*.pyc" -exec rm -rf {} \; 
```

* * *

## 回答 #10

> 赞同：15
> 
> 时间：2017-04-14T02:28:24.843

此外，人们通常希望递归地删除当前目录中的所有`*.pyc`、`*.pyo`文件和`__pycache__`目录。

命令：

```
find . | grep -E "(__pycache__|\.pyc|\.pyo$)" | xargs rm -rf 
```

* * *

## 回答 #11

> 赞同：10
> 
> 时间：2015-12-13T17:46:16.023

## Django 扩展

> 注意：这个答案非常特定于已经使用[Django Extension的](https://github.com/django-extensions/django-extensions)**[Django 项目](https://www.djangoproject.com/)**。

```
python manage.py clean_pyc 
```

该实现可以在[其源代码](https://github.com/django-extensions/django-extensions/blob/master/django_extensions/management/commands/clean_pyc.py)中查看。

* * *

## 回答 #12

> 赞同：8
> 
> 时间：2009-05-29T11:48:29.797

只是为了将另一个变体加入混合中，您还可以使用这样的反引号：

```
rm `find . -name *.pyc` 
```

* * *

## 回答 #13

> 赞同：7
> 
> 时间：2012-09-03T19:42:03.917

全递归

```
ll **/**/*.pyc
rm **/**/*.pyc 
```

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2018-05-12T08:27:36.483

如果您不再需要 .pyc ，您可以在终端中使用这一行：

```
export PYTHONDONTWRITEBYTECODE=1 
```

如果你改变主意：

```
unset PYTHONDONTWRITEBYTECODE 
```

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2021-02-27T04:42:30.573

现在PyPI上有一个包[pyclean](https://pypi.org/project/pyclean/)，使用方便，跨平台。用户只需要一个简单的命令行来清理`__pycache__`当前目录中的所有文件：

```
pyclean . 
```

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2014-10-31T00:10:26.150

首轮：

```
find . -type f -name "*.py[c|o]" -exec rm -f {} + 
```

然后加：

```
export PYTHONDONTWRITEBYTECODE=1 
```

到 ~/.profile

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2009-04-24T11:58:33.797

`rm -r`递归到目录中，但仅限于您提供给 . 的目录`rm`。它还将删除这些目录。一种解决方案是：

```
for i in $( find . -name *.pyc )
do
  rm $i
done 
```

`find`将在当前目录中递归查找所有 *.pyc 文件，并且`for`循环将遍历找到的文件列表，删除每个文件。

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2014-11-20T12:11:55.237

```
find . -name "*.pyc"|xargs rm -rf 
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2018-10-11T15:19:03.283

你可以运行`find . -name "*.pyc" -type f -delete`。

但请谨慎使用。首先运行`find . -name "*.pyc" -type f`以查看您将删除哪些文件。

此外，确保 -delete 是命令中的最后一个参数。如果将它放在 -name *.pyc 参数之前，它将删除所有内容。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2019-10-27T06:44:13.740

如果要从项目文件夹中删除所有 .pyc 文件。

首先，你有

```
cd <path/to/the/folder> 
```

然后找到所有 .pyc 文件并删除。

```
find . -name \*.pyc -delete 
```

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2021-02-17T11:19:53.370

删除当前目录下的所有python编译文件。

```
find . -name "__pycache__"|xargs rm -rf
find . -name "*.pyc"|xargs rm -rf 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2021-01-25T12:58:10.193

如果要递归删除当前目录中的所有`*.pyc`文件和`__pycache__`目录：

*   与蟒蛇：

```
import os

os.popen('find . | grep -E "(__pycache__|\.pyc|\.pyo$)" | xargs rm -rf') 
```

*   或使用终端或 cmd 手动：

```
find . | grep -E "(__pycache__|\.pyc|\.pyo$)" | xargs rm -rf 
```

# c# - 将 .NET C# 网站发布到外部服务器

> ID：785521
> 
> 赞同：1
> 
> 时间：2009-04-24T11:52:20.660
> 
> 标签：c#, asp.net, visual-studio-2008, deployment

我刚刚使用 Visual Web Developer Express 完成了我的第一个 aspx/c# 项目，并使用了一些自定义控件和外部 Web 服务。它在我的开发机器上运行良好。

如果我现在想在共享主机帐户上进行测试，是否只需上传具有当前项目结构的所有文件？将 DLL 上传到共享的 Windows 主机帐户会不会有任何问题？我应该注意什么或对代码进行更改？任何人都可以推荐一个便宜又好的供应商（这只是为了测试 - 还不需要 mssql）。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-24T14:27:18.213

视觉 Web 开发人员在构建菜单下是否有“发布网站”菜单项？

如果您想预编译您的网站并将其与所有依赖项一起发布，这是我找到的最简单的方法。然后，您可以选择将其发布到 FTP 站点或文件系统。我通常选择文件系统，然后自己通过 FTP 上传，以确保不会覆盖任何配置文件。

如果我正在为客户端处理低容量站点并且性能不是问题，我只需将我的工作目录上传到服务器，这样我就不必单独提供源代码，我知道他们不会松开它。

哦，还有一件事，如果您没有特别配置它，我希望您必须将您的网站上传到您的托管帐户的根目录。GoDaddy 确实能够将某些目录指定为他们自己的 ASP.NET 应用程序。如果您这样做，您可以将您的应用程序放在您选择的子目录中。

-铝

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-24T11:57:39.510

这将取决于您的网站提供商。您需要获得一个支持 .NET 运行时的设备。一旦你有了它，那么你只需上传你的代码就可以了。我个人使用[www.godaddy.com](http://www.godaddy.com)。[您可以在www.chessbin.com](http://www.chessbin.com)看到由他们托管的示例 ASP.NET 站点。

我希望这有帮助。

亚当

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-24T12:02:46.363

托管公司的需求可能会有所不同，但我认为简单的 xcopy 部署对大多数人来说就足够了。这是一个似乎价格合理的链接（免责声明：我从未使用过它们） [http://www.reliablesite.net/v3/index.asp](http://www.reliablesite.net/v3/index.asp)

# c# - 如何从 Active Directory 中获取用户的电子邮件地址？

> ID：785527
> 
> 赞同：27
> 
> 时间：2009-04-24T11:53:23.997
> 
> 标签：c#, active-directory

我试图在 AD 中获取用户的电子邮件地址，但没有成功。

```
String account = userAccount.Replace(@"Domain\", "");
DirectoryEntry entry = new DirectoryEntry();

try {
    DirectorySearcher search = new DirectorySearcher(entry);

    search.PropertiesToLoad.Add("mail");  // e-mail addressead

    SearchResult result = search.FindOne();
    if (result != null) {
        return result.Properties["mail"][0].ToString();
    } else {
        return "Unknown User";
    }
} catch (Exception ex) {
    return ex.Message;
} 
```

任何人都可以看到问题或指出正确的方向吗？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2009-04-24T12:19:45.353

**免责声明：**此代码不搜索[单个精确匹配](https://social.technet.microsoft.com/wiki/contents/articles/22653.active-directory-ambiguous-name-resolution.aspx)，因此如果类似名称的帐户也存在，`domain\j_doe`它可能会返回's 电子邮件地址。`domain\j_doe_from_external_department`如果这种行为是不可取的，那么要么使用[samAccountName](https://docs.microsoft.com/en-us/windows/win32/ad/naming-properties#samaccountname)过滤器而不是下面使用的[anr](https://social.technet.microsoft.com/wiki/contents/articles/22653.active-directory-ambiguous-name-resolution.aspx)过滤器，要么另外过滤[结果](https://docs.microsoft.com/en-us/dotnet/api/system.directoryservices.directorysearcher.findall?view=netframework-4.8)。

我已成功使用此代码（其中“帐户”是不带域的用户登录名（域\帐户）：

```
// get a DirectorySearcher object
DirectorySearcher search = new DirectorySearcher(entry);

// specify the search filter
search.Filter = "(&(objectClass=user)(anr=" + account + "))";

// specify which property values to return in the search
search.PropertiesToLoad.Add("givenName");   // first name
search.PropertiesToLoad.Add("sn");          // last name
search.PropertiesToLoad.Add("mail");        // smtp mail address

// perform the search
SearchResult result = search.FindOne(); 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2017-08-02T19:14:27.063

你们太辛苦了：

```
// Look up the current user's email address
string eMail =  UserPrincipal.Current.EmailAddress; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-05-31T10:36:36.240

您可以尝试以下 GetUserEmail 方法。如果您想在 MVC 中查找登录用户的电子邮件地址，请使用**User.Identity.Name调用****GetUserEmail()**函数

 **```
using System.DirectoryServices;
using System.Linq;

public string GetUserEmail(string UserId)
    {

        var searcher = new DirectorySearcher("LDAP://" + UserId.Split('\\').First().ToLower())
        {
            Filter = "(&(ObjectClass=person)(sAMAccountName=" + UserId.Split('\\').Last().ToLower() + "))"
        };

        var result = searcher.FindOne();
        if (result == null)
            return string.Empty;

        return result.Properties["mail"][0].ToString();

    }

GetUserEmail(User.Identity.Name) //Get Logged in user email address 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-24T12:07:43.713

你忘了一个过滤器。

在调用 FindOne 之前尝试添加：

```
search.Filter = String.Format("(sAMAccountName={0})", account); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-03-25T09:55:40.677

那这个呢

```
public string GetEmailFromSamAccountName(string samAccountName, string domain="YOURCOMPANY")
{
   using (var principalContext = new PrincipalContext(ContextType.Domain, domain))
   {
      var userPrincipal = UserPrincipal.FindByIdentity(principalContext, samAccountName);
      return userPrincipal.EmailAddress;
   }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-24T12:46:42.433

此外，您从哪里提取用户名（存储、用户输入、当前身份）？用户名可以轻松更改（重命名） - 另一方面，SID/Windows 登录身份不会改变 - 因此，如果可能和/或需要设计，最好通过 SID 而不是 samaccountname 进行过滤/搜索。 ..

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-10-28T15:17:42.220

您需要为 System.DirectoryServices.AccountManagement 添加引用，并在您的 using 语句中包含相同的引用。现在，您将可以访问下面列出的当前用户登录详细信息，包括电子邮件地址。

```
string loginname = Environment.UserName;
string firstname = UserPrincipal.Current.GivenName;
string lastname = UserPrincipal.Current.Surname;
string name = UserPrincipal.Current.Name;
string eMail = UserPrincipal.Current.EmailAddress; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-24T12:23:36.687

**更新**：弗雷德里克钉了它....

雅各布是对的。您需要过滤您的搜索。如果需要，您也可以在那里做各种`and`s 和`or`s，但我认为`sAMAccountName`就足够了。您可能想要启动 ADSI 工具（我认为它在资源工具包中），它可以让您像注册表一样使用 AD。非常适合查看属性。然后找到一个用户，找出你想要的道具（在这种情况下是邮件）以及它`primary key`是什么——这`sAMAccountName`是一个很好的道具，但你可能还想过滤节点类型。

我在 Mac 上，所以无法为您检查，但 AD 中的每个节点都有一个类型，您可以将其添加到您的过滤器中。我认为它看起来像这样：

```
((sAMAccountName=bob) & (type=User)) 
```

再次检查 - 我知道它不是 type=user，而是类似的东西。

# java - 怀疑 if/else-if 逻辑

> ID：785533
> 
> 赞同：-1
> 
> 时间：2009-04-24T11:55:06.443
> 
> 标签：java

我正在使用以下代码

```
String sample = " : : ";
String[] splitTime = sample.split(":");
if ( splitTime[0].trim().equals("") ||
        splitTime[0].trim().equals(null)) {
      System.out.println("Inside Split 0");
      splitTime[0] = "0";
 } else if (splitTime[1].trim().equals("") ||
        splitTime[1].trim().equals(null)) {
      System.out.println("Inside Split 1");
      splitTime[1] = "0";
 }else if (splitTime[2].trim().equals("") ||
        splitTime[2].trim().equals(null)) {
      System.out.println("Inside Split2");
      splitTime[2] = "0";
 }

 System.out.println("Value 1 :"+splitTime[0]);
 System.out.println("Value 2 :"+splitTime[1]);
 System.out.println("Value 3 :"+splitTime[2]); 
```

输出：
内部拆分 0
值 1：0
值 2：
值 3：
我不知道为什么它不进入第二个和第三个 if-else 语句。谁能帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-24T11:59:02.207

是因为“ `else if`”。

如果你有这样的代码：

```
if (a) {
} else if (b) {
} 
```

如果第一个分支是，那么第二个分支将永远无法执行。

相反，您需要：

```
if (a) {
}

if (b) {
} 
```

使条件独立。

顺便说一句，`String.trim()`不能返回`null`，并且不能保证从`String.split()`. 可能更好的代码是：

```
String sample = " : : ";
String[] splitTime = sample.split(":");
for (int i = 0; i < splitTime.length; ++i) {
    splitTime[i] = splitTime[i].trim();
    if (splitTime[i].length() == 0) {
        splitTime[i] = "0";
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-24T11:58:38.540

因为如果第一个 if 语句为真，因此被执行，那么其余的 else if 不会被执行。如果要执行其他 else-if 语句，为什么不将它们重写为单独的 if 语句呢？

```
String sample = "::";
String[] splitTime = sample.split(":");
if ( splitTime[0].trim().equals("") ||
        splitTime[0].trim().equals(null)) {
      System.out.println("Inside Split 0");
      splitTime[0] = "0";
 }
 if (splitTime[1].trim().equals("") ||
        splitTime[1].trim().equals(null)) {
      System.out.println("Inside Split 1");
      splitTime[1] = "0";
 } 
 if (splitTime[2].trim().equals("") ||
        splitTime[2].trim().equals(null)) {
      System.out.println("Inside Split2");
      splitTime[2] = "0";
 }

 System.out.println("Value 1 :"+splitTime[0]);
 System.out.println("Value 2 :"+splitTime[1]);
 System.out.println("Value 3 :"+splitTime[2]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-24T11:59:25.090

这是由于 If-Else 子句的基本操作：

```
if(foo) {
  // A
} else if(bar) {
  // B
} 
```

如果`foo`为真，`A`将执行，并且`bar`永远不会被测试。要获得您想要的语义，请考虑链接您的 if 块：

```
if(foo){
  // A
}

if(bar) {
  // B
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-30T22:55:50.473

在嵌套的 if else-if 语句中，如果执行了一个语句，则不会执行其他语句。在您的情况下，第一个 if 表达式始终为真，因此它会执行，因此其他两个永远不会被执行。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-04-25T01:07:34.603

尝试

```
String sample = " 12 : 59 : 60 ";
// strip spaces and create up to 3 parts
String[] splitTime = sample.trim().split(" *: *", 3);
for (int i = 0; i < splitTime.length; i++)
    System.out.println("Inside " + i + " '" + splitTime[i] + '\''); 
```

印刷

```
Inside 0 '12'
Inside 1 '59'
Inside 2 '60' 
```

# sql-server - SQL Server 2005 支持 Oracle 风格的自主事务

> ID：785541
> 
> 赞同：0
> 
> 时间：2009-04-24T11:57:29.043
> 
> 标签：sql-server, transactions

即使事务回滚，在事务中是否有办法在其中提交数据？我们在事务中写入审计/日志信息，但即使事务必须回滚，我们也希望保留该信息。

我们已经看到[一篇](http://www.c-sharpcorner.com/UploadFile/john_charles/SimulatingautonomoustransactionsinMicrosoftSQLServer10092008132945PM/SimulatingautonomoustransactionsinMicrosoftSQLServer.aspx)试图复制 Oracle 方式的文章，但我们真正在寻找的是一些内置的 SQL Server 支持（并且希望为 sproc 或“暂停事务”提供类似“不支持”选项的东西' 命令。）谷歌搜索有点绝望，因此这篇文章。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-24T12:30:07.730

不幸的是，这可能是除 SQL Server 2008 之外的唯一方法，但它确实提到了 SQL Server 2005 的选项

[如何在 SQL Server 2008 中创建自治事务](http://blogs.msdn.com/sqlprogrammability/archive/2008/08/22/how-to-create-an-autonomous-transaction-in-sql-server-2008.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-27T20:46:07.453

微软在 2008 年以更简单的方法考虑了这个想法，然后放弃了它：

[http://connect.microsoft.com/SQLServer/feedback/ViewFeedback.aspx?FeedbackID=296870](http://connect.microsoft.com/SQLServer/feedback/ViewFeedback.aspx?FeedbackID=296870)

但在他们的网站上还有另一种解决方法。

# c# - 任何使用 oracle 存储过程的好 C# 代码生成器？

> ID：785544
> 
> 赞同：2
> 
> 时间：2009-04-24T11:58:07.683
> 
> 标签：c#, oracle, stored-procedures, code-generation

我正在寻找一个 C# 代码生成器，它自动生成 C# 以访问 Oracle 数据库上的存储过程。

例如，如果我在模式 DEV 上有一些包，例如：

*   带有 FUNC1、FUN2 的 PACKAGE1
*   带有 FUNC3、FUN4 的 PACKAGE2

生成器创建代码以从 C# 运行以下代码：

```
int a = PACKAGE1.FUNC1(12, 34, "hello"); 
```

有什么线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-24T12:01:52.900

[MyGeneration](http://www.mygenerationsoftware.com)是开源的，是模板驱动的，模板可以用 C# 编写。这样就可以满足您的需求，或者甚至可以通过一个模板出来。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-04T14:05:05.147

[CodeFluent Entities](http://www.softfluent.com/products/codefluent-entities)是模型优先的工具，可用于为 Oracle 生成 SQL 脚本：

*   架构
*   表
*   约束（主键和外键）
*   意见
*   过程（和相关的 Oracle 包）
*   实例（数据）

应用程序类 (C#) 也可以相对容易地生成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-25T03:47:19.680

我有一些接近你想要的东西......它目前为 Python 生成存储过程包装器。它是一个开源包，您可以使用所需的 C# 代码填写模板。

> [http://markharrison.net/orapig/](http://markharrison.net/orapig/)
> 
> [http://code.google.com/p/orapig/](http://code.google.com/p/orapig/)

我很乐意协助完成这项工作。如果您想进一步讨论，我的电子邮件地址在[我的个人资料中。](https://stackoverflow.com/users/116/mark-harrison)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-07T15:51:31.017

*   [CodeSmith Generator](http://www.codesmithtools.com/product/generator) - 商业软件
*   [我的世代](http://www.mygenerationsoftware.com/portal/default.aspx)- 免费
*   [Metadrone](http://www.metadrone.com/) - 免费

另见[1](https://stackoverflow.com/questions/6393917/free-sql-server-stored-procedure-generator)和[2](https://stackoverflow.com/questions/2885733/stored-procedure-generator-tool/11376402)。

# colors - 如何在数据库字段中存储颜色？

> ID：785551
> 
> 赞同：57
> 
> 时间：2009-04-24T11:59:14.747
> 
> 标签：colors

我必须将颜色存储在数据库中。

如何以最佳方式在数据库字段中存储颜色？按颜色名称或其他方式？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2009-04-24T12:02:09.220

如果它用于 HTML 页面，将 #RRGGBB 标记存储为字符串可能就足够了。

如果它用于 .NET ，它支持从其 ARGB 值构建颜色

```
System.Drawing.Color c = System.Drawing.Color.FromArgb(int);

int x = c.ToArgb(); 
```

所以你可以只存储那个int。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2015-01-18T18:42:39.603

理想的存储格式取决于您计划如何使用数据库。

**最简单的解决方案**当然是将所有内容存储为 RGB 颜色的 6 字节 ASCII 十六进制字符串，不支持任何其他格式。如果您以后想要支持其他格式，您可能会遇到问题。

**为了可读性、灵活性和易于访问，**使用纯字符串是一个好主意。在大多数情况下，十六进制颜色字符串和原始整数之间的存储空间差异可以忽略不计。为了提高速度，您可以设置要索引的颜色字段。为了灵活性，您可以添加以下一项或多项功能：

*   如果为 NULL、空白或无效，则采用上下文默认颜色
*   接受一个可选的尾随 alpha 字节 00-FF，如果省略则假设为 FF（不透明）
*   接受完整 (AABBCC) 和速记 (ABC) 语法，它们的大小只有一半，打字速度更快，并且受 CSS 支持
*   支持可选的前导#数字，这很常见
*   支持原始字符串，以保存 CSS 支持的任何内容，例如“rgba(255,255,255,1)”或“red”
*   支持自定义颜色模式字符串，如“cmyk()、hsv()、hsl()、lab()”等。
*   如果它以 # 开头或长度为 3、4、6 或 8 并且仅包含 [0-9A-Fa-f]，则假定 RGB(A) 十六进制字符串

**为了优化搜索和排序速度**以及磁盘使用，存储为无符号整数是可行的方法。这是因为单个数字比字符串搜索速度更快，可以在内部存储小至几位，并且您仍然可以使用`FromArgb()`和类似函数在查询中按颜色通道进行过滤。缺点是您的代码需要不断地为每个查询中的每个颜色字段来回转换内容，这实际上可能会抵消任何数据库速度增益。

**混合方法**可能值得探索。例如，考虑一个包含所有可能的每通道 8 位 RGB 值的表，其字段由 id、rgbhex、cssname、cmyk、hsl、hsv、lab、rgb 等组成。您需要自动化创建这样的表，因为它会很大（16777216 个条目）。它会为您的表增加超过 16 MB，但此解决方案的优点是您的所有颜色值将只是一个与颜色查找表的外键链接的整数 id 字段。快速排序和搜索，无需任何转换即可获得您需要的任何颜色数据，并且具有极强的可扩展性。您还可以将表保存在自己的数据库文件中，以供应用程序中的任何其他数据库或脚本共享。诚然，这种解决方案在大多数情况下都是多余的。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2009-04-24T12:00:37.490

可能颜色值最好，例如#FFFFFF 或#FF0000

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2009-04-24T12:03:37.593

将颜色存储为 24 位或 32 位整数，就像在 HTML/CSS 中一样，即 #FF00CC 但转换为整数而不是字符串。

整数将比字符串（尤其是 VCHAR）占用更少的空间。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-04-24T12:04:20.897

将其存储为 int

使用 ToArgb 和 FromArgb 设置和获取值。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-04-24T12:51:48.163

我认为这取决于。如果您只需要存储颜色，那么十六进制表示法应该没问题。如果您需要针对特定​​颜色通道执行查询，那么您需要每个颜色通道（无论是 RGB、ARGB、CYMK 等）的 smallint 字段。

所以，为了简单的存储，保持简单。如果您需要执行分析，您将需要考虑由您的问题域指定的替代选项。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-24T12:13:05.683

我建议有一个 3 列颜色查找表：

身份证号；名称 varchar(40) 空；ColorVal char(8) 或 int（取决于您如何表示颜色）

对于未命名的颜色，只需将名称字段留空

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-24T12:01:39.703

如果颜色仅限于网页颜色，我会使用十六进制表示法。

例如，#0000FF 代表蓝色。

更多信息：[http ://en.wikipedia.org/wiki/Web_colors](http://en.wikipedia.org/wiki/Web_colors)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-24T12:45:08.617

您希望以什么格式存储颜色？CMTK、RGB、彩通？知道这有点帮助......严格的#RGB 十六进制格式适用于网页颜色或应用程序，但如果您尝试混合颜料，则效果不佳。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-12-03T15:20:31.600

我将其存储为 char(9)。

*   包含“#”符号，这样我就不必在代码中添加它并立即使用它
*   普通字符而不是 nchar
*   存储透明度

* * *

## 回答 #11

> 赞同：-5
> 
> 时间：2009-04-24T12:08:27.567

为什么不两个都用？表结构将是 Int ARGB 的 Key 和 varchar 的 Name。

```
ARGB (Key), Name
FFFFFFFF  ,Black
FF000000  ,White 
```

# session - 确定会话 ID 字符串长度以确保唯一性

> ID：785554
> 
> 赞同：2
> 
> 时间：2009-04-24T11:59:49.457
> 
> 标签：session

创建会话 ID 时，通常不会检查 ID 的唯一性。在处理数十亿条记录时，验证唯一性是一项很大的开销。

我想知道随机会话 ID 字符串的长度应该足以依赖生产服务中的唯一性，例如 Gmail。

欢迎任何其他保持适当会话唯一性的建议。

谢谢，

罗伊。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-24T12:03:55.407

如果你有一个相当好的随机数生成器，一个随机的 128 位 ID（例如 GUID）在实践中应该始终是唯一的（从数学上讲，存在重复的可能性很小，但相信我，它不会会发生。在出现重复的 GUID 之前，宇宙将在一个巨大的黑洞中坍塌。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-24T12:02:40.293

与其随机生成自己的号码，不如...

*   使用[GUID](http://en.wikipedia.org/wiki/Globally_Unique_Identifier)（128 位）
*   使用包含年、月、日、小时、分钟、秒、毫秒或纳秒的字符串

如果您使用 128 位随机数，那么您有 3.40282366921e+38 中 1 的机会获得重复。假设您的数字是真正随机的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-24T12:20:59.203

一些用户数据的 SHA-256 哈希值和当前具有尽可能多的可用资源的全职时间应该可以为您提供足够独特的东西。

# java - 如何按特定顺序批量插入？

> ID：785576
> 
> 赞同：0
> 
> 时间：2009-04-24T12:05:46.213
> 
> 标签：java, jpa, batch-file

EntityManager 似乎并不关心以哪种顺序持久化实体，但我需要它。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-24T15:21:28.583

JPA 实现的 EntityManager 应该有足够的智能来计算它们在数据存储中插入的顺序。至少这就是我们开发 DataNucleus 的方式。规范为您提供的唯一一件事是您负责对 em.persist() 的调用，并且可以执行 em.flush() 来强制所有人进入数据存储区。

——安迪（数据[核](http://www.datanucleus.org)）

# latex - Inkscape + pdftex？

> ID：785579
> 
> 赞同：1
> 
> 时间：2009-04-24T12:07:26.740
> 
> 标签：latex, vector-graphics, inkscape, pdftex

我在 Inkscape 中有一张小图，我想将它嵌入到我使用 pdftex 编译的 LaTeX 文档中。pdftex 似乎有一个不接受的奇怪之处`.eps`。事实上，如果我的理解是正确的，它接受的唯一矢量图形格式是 pdf。当我在 Inkscape 中将我的绘图保存为 pdf 时，我得到的是一个带有整页的 pdf，我的绘图位于上角。
有没有办法将 Inkscape 绘图导入 pdftex 并忽略此页面大小？还是我需要开始调整页面设置以使页面大小完全适合我的绘图大小？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-24T13:57:22.483

所以事实证明，Inkscape 在 Document 属性上有一个按钮，标题为“Fit page to selection”，这使得这更容易。那好吧。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-24T12:45:25.603

是的，pdftex 不接受 eps。

我使用inkscape 制作了我合并到.tex 文档中的数字，然后我使用pdflatex 进行处理。是的，我在inkscape中设置了页面大小，以使图形适合。

您也可以尝试从 inkscape 导出为 .eps，然后使用“epstopdf”工具转换为 pdf。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-24T12:38:26.557

您是否提供了可选的缩放参数`\includegraphics`？PDF 处理边界框的方式与封装的 postscript 不同，而且自动调整大小似乎也不起作用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-24T12:44:28.603

据我所知，您必须分别调整边界框。PDF 中的纸张大小。有一些工具`eps2pdf`可以将 EPS 转换为具有相同边界框的 PDF。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-04-27T15:15:38.957

您甚至可以完全自动化将 svg 转换为 pdf 的过程，因为可以从命令行调用 inkscape。例如，以下 makefile 代码为我完成了这项工作（复制和转换）：

```
# svg -> pdf
$(GRAPHIC_DIR)/%.pdf: $(GRAPHIC_DIR)/%.svg
    cp $(GRAPHIC_DIR)/$*.svg $(GRAPHIC_DIR)/$*-crop.svg
    inkscape --verb=FitCanvasToSelectionOrDrawing --verb=FileSave --verb=FileClose $(GRAPHIC_DIR)/$*-crop.svg
    inkscape -A $(GRAPHIC_DIR)/$*.pdf $(GRAPHIC_DIR)/$*-crop.svg
    rm $(GRAPHIC_DIR)/$*-crop.svg 
```

此外，裁剪 pdf 文件也可以使用`pdfcrop`.

# c++ - 如何确保程序正在运行并在需要时重新启动它？

> ID：785581
> 
> 赞同：4
> 
> 时间：2009-04-24T12:08:16.927
> 
> 标签：c++, linux, cron, daemon

我开发了一个需要持续运行的软件（在 C++ 中）。这基本上意味着它每次停止时都必须重新启动。

我正在考虑使用 cron 作业每分钟检查它是否还活着，但可能有一种更清洁的方式或标准的方式来执行此操作。

提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-24T12:17:49.040

Fedora 和 Ubuntu 使用[upstart](http://upstart.ubuntu.com/ "暴发户")，如果它退出，它可以自动重启你的守护进程。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-24T12:13:36.210

我相信最简单的方法是创建一个脚本来启动你的程序，如果它返回到它就重新启动它。

```
#!/bin/sh
while true; do
  ./Your_program
done 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-24T12:17:56.077

[Monit](http://mmonit.com/monit/)可以做你想做的事，甚至更多。

如果您的应用程序足够聪明，可以检查自己是否正在运行（这是为了避免运行多个副本），那么 cron 是一个选项。这通常通过 PID 文件以标准方式完成。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-04-24T12:27:48.300

在 *nix 上有两种正确的方法：

1.  使用操作系统基础架构（如 Solaris 上的 smf/svc、Ubuntu 上的 upstart 等...）。这是正确的方法，因为您可以随时停止/重新启动/启用/禁用/重新配置。

2.  在 /etc/inittab 中使用“respawn”（在引导时启用）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-24T12:23:36.123

[launchtool](http://people.debian.org/~enrico/launchtool.html)是我为此目的使用的一个程序，它会监视您的进程并根据需要重新启动它，它也可以在重新调用之前等待几秒钟。这在应用程序可以重新启动之前需要释放套接字的情况下很有用。这对我的目的非常有用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-24T12:16:10.417

创建您希望作为“观察者”进程的子进程持续运行的程序，该进程在终止时重新启动它。您可以使用 wait/waitpid（或 SIGCHILD）来判断孩子何时终止。我希望有人编写的代码可以做到这一点（这几乎就是 init(8) 所做的）

但是，该程序可能会有所作为。您可能不仅要检查应用程序是否正在运行，还要检查它是否未挂起或其他任何东西，并且正在提供其预期的服务。这可能意味着运行某种探测或合成事务来检查它是否正常运行。

编辑：您也许可以让 init 为您执行此操作 - 在 inittab 中给它一种“重生”类型。从手册页：

```
respawn
    The process will be restarted whenever it terminates (e.g. getty). 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2010-02-27T16:09:47.717

每隔 10 分钟检查一次以查看应用程序是否正在运行的脚本怎么样，如果不是，它将重新启动计算机。如果应用程序正在运行，那么它只是继续检查。

这是我使用 PrcView 的脚本，它是一个免费的进程查看器实用程序。我使用 notepad.exe 作为需要运行的示例应用程序，我不确定每 10 分钟检查一次的命令以及它在我的脚本中的位置。

@echo off PATH=%PATH%;%PROGRAMFILES%\PV;%PROGRAMFILES%\Notepad PV.EXE notepad.exe >nul if ERRORLEVEL 1 goto Process_NotFound :Process_Found echo Notepad is running goto END :Process_NotFound echo Notepad is not running shutdown / r /t 50 转到 END :END

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-24T12:10:39.353

这并不容易。如果你在想“我知道，我会写一个程序来监视我的程序，或者看看这样的程序是否已经作为标准服务存在！” 那么如果有人杀死了*那个*程序呢？谁看守望者？

# sql - JOIN 的 ON 子句中引用的表的顺序是否重要？

> ID：785583
> 
> 赞同：42
> 
> 时间：2009-04-24T12:09:18.763
> 
> 标签：sql, mysql, sql-server, oracle

在 JOIN 的 ON 子句中以哪种方式排序标准是否重要？

```
select a.Name, b.Status from a
inner join b
on a.StatusID = b.ID 
```

相对

```
select a.Name, b.Status from a
inner join b
on b.ID = a.StatusID 
```

对性能有影响吗？如果我有多个标准怎么办？

一个订单比另一个更易于维护吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2009-04-24T12:22:03.600

`JOIN``FROM`可以通过在子句中以正确的顺序放置表来强制执行顺序：

1.  MySQL 有一个名为的特殊子句`STRAIGHT_JOIN`，它使顺序很重要。

    这将使用以下索引`b.id`：

    ```
    SELECT  a.Name, b.Status
    FROM    a
    STRAIGHT_JOIN
            b
    ON      b.ID = a.StatusID 
    ```

    这将使用以下索引`a.StatusID`：

    ```
    SELECT  a.Name, b.Status
    FROM    b
    STRAIGHT_JOIN
            a
    ON      b.ID = a.StatusID 
    ```

2.  Oracle 有一个特殊的提示`ORDERED`来强制执行这个`JOIN`命令：

    这将使用索引`b.id`或构建哈希表`b`：

    ```
    SELECT  /*+ ORDERED */
            *
    FROM    a
    JOIN    b
    ON      b.ID = a.StatusID 
    ```

    这将使用索引`a.StatusID`或构建哈希表`a`：

    ```
    SELECT  /*+ ORDERED */
            *
    FROM    b
    JOIN    a
    ON      b.ID = a.StatusID 
    ```

3.  SQL Server 有一个调用`FORCE ORDER`来执行相同操作的提示：

    这将使用索引`b.id`或构建哈希表`b`：

    ```
    SELECT  *
    FROM    a
    JOIN    b
    ON      b.ID = a.StatusID
    OPTION (FORCE ORDER) 
    ```

    这将使用索引`a.StatusID`或构建哈希表`a`：

    ```
    SELECT  *
    FROM    b
    JOIN    a
    ON      b.ID = a.StatusID
    OPTION (FORCE ORDER) 
    ```

4.  PostgreSQL 伙计们，对不起。你的[**TODO 清单**](http://wiki.postgresql.org/wiki/Todo#Features_We_Do_Not_Want)说：

    > **优化器提示（不需要）**
    > 
    > 优化器提示用于解决优化器中的问题。我们宁愿报告和修复问题。

`RDBMS`至于比较中的顺序，在任何AFAIK中都没有关系。

尽管我个人总是尝试估计将搜索哪一列并将该列放在左侧（使其看起来像一个`lvalue`）。

有关更多详细信息，请参阅[**此答案**](https://stackoverflow.com/questions/269093/how-do-i-remember-which-way-round-prior-should-go-in-connect-by-queries/754290#754290)。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-04-24T12:10:49.010

不，不是的。

我所做的（为了可读性）是你的第二个例子。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-24T12:13:33.043

不。数据库应该根据整个标准确定最佳执行计划，而不是通过按顺序查看每个项目来创建它。您可以通过请求两个查询的执行计划来确认这一点，您会发现它们是相同的（您会发现即使是截然不同的查询，只要它们最终指定相同的逻辑，通常都会编译成相同的执行计划）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-24T12:38:14.700

不，那里没有。归根结底，您实际上只是在评估是否 a=b。

正如等式的对称性质所说：

*   对于任意数量 a 和 b，如果 a = b，则 b = a。

因此，无论您检查`(12)*=12`还是`12=(12)*`逻辑上都没有区别。

如果值相等，则加入，如果不相等，则不要。无论您是在第一个示例还是第二个示例中指定它，都没有区别。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-03-24T08:07:17.303

正如许多人所说：订单对结果或性能没有影响。

我想指出的是，**LINQ to SQL 只允许第一种情况**！

*例如，以下示例效果很好，...*

```
var result = from a in db.a
             join b in db.b on a.StatusID equals b.ID
             select new { Name = a.Name, Status = b.Status } 
```

*...虽然这会在 Visual Studio 中引发错误：*

```
var result = from a in db.a
             join b in db.b on b.ID equals a.StatusID
             select new { Name = a.Name, Status = b.Status } 
```

**这会引发这些编译器错误：**

*   *CS1937*：名称“name”不在“equals”左侧的范围内。考虑交换 'equals' 两边的表达式。
*   *CS1938*：名称“name”不在“equals”右侧的范围内。考虑交换 'equals' 两边的表达式。

尽管在标准 SQL 编码中不相关，但在习惯使用其中任何一种时，这可能是需要考虑的一点。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-24T12:39:01.923

[读这个](http://sqlwanden.blogspot.com/2008/01/force-order-hint.html)

SqlServer 包含对远比这复杂的情况的优化。

如果您有多个标准，通常会懒惰地评估东西（但如果有的话，我需要对边缘情况进行一些研究。）

为了可读性，我通常更喜欢

```
SELECT Name, Status FROM a 
JOIN b 
ON a.StatusID = b.ID 
```

我认为按照声明变量的顺序引用变量更有意义，但这确实是个人品味。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-24T13:23:55.590

我不会使用您的第二个示例的唯一原因：

```
select a.Name, b.Status 
from a
inner join b
  on b.ID = a.StatusID 
```

您的用户更有可能回来说“即使他们没有状态记录，我也可以查看所有 a.name 吗？” 而不是“即使 b.status 没有名称记录，我也能看到所有的信息吗？”，所以为了提前计划这个例子，我会使用`On a.StatusID = b.ID`LEFT Outer Join 的预期。这假设您可以有没有“b”的表“a”记录。

更正：它不会改变结果。

这可能是一个有争议的问题，因为用户从不想改变他们的要求。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-24T20:52:11.550

不，没关系。但这里有一个例子可以帮助你的查询更具可读性（至少对我来说）

```
select a.*, b.*
from tableA a
     inner join tableB b
          on a.name=b.name
               and a.type=b.type 
```

每个表引用都在单独的行上，每个连接条件都在单独的行上。标签有助于保持属于什么的直。

我喜欢做的另一件事是让我的 on 语句中的标准与表格的顺序相同。所以如果先是a，然后是b，a将在左侧，b在右侧。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-03-30T14:44:02.747

错误：ON 子句在其右侧引用表（php sqlite 3.2）

**替换这个**

```
LEFT JOIN itm08 i8 ON  i8.id= **cdd01.idcmdds** and i8.itm like '%ormit%'  

LEFT JOIN **comodidades cdd01** ON cdd01.id_registro = u.id_registro 
```

**为了这**

```
LEFT JOIN **comodidades cdd01** ON cdd01.id_registro = u.id_registro

LEFT JOIN itm08 i8 ON  i8.id= **cdd01.idcmdds** and i8.itm like '%ormit%' 
```

# asp.net - 服务器端 ASP.Net Ajax 异常处理

> ID：785585
> 
> 赞同：6
> 
> 时间：2009-04-24T12:09:22.663
> 
> 标签：asp.net, asp.net-ajax

我正在使用 ASP.net 的 AJAX 框架，并且正在尝试在称为 javascript 的 web 服务上进行一些异常日志记录。

通过网络查看，我发现[有些人](http://dotnetslackers.com/columns/ajax/AspNetAjaxExceptionLogging.aspx)在客户端处理它们并将它们发送回服务器。我不想这样做，因为它依赖于其他服务器调用（如果它第一次失败，发送其他请求看起来不是一个好主意，这让我改变了我所有的调用）

我看到其他一些人用 try...catch 块[装饰他们的所有方法](http://www.eggheadcafe.com/tutorials/aspnet/af62d138-fa2f-491e-901f-d36a82f107e8/net-web-services--excep.aspx)（这会导致重复的错误处理，以及另一个 try catch 块）。

但是，我正在尝试实现类似于 global.asax 的东西，`Application_Error()`它处理每个未捕获的异常（不，它似乎没有被称为方法异常的 AJAX 调用）。

这甚至可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-24T12:15:01.293

使用[ELMAH](http://code.google.com/p/elmah/) - 它可以捕获 ajax 错误。

# java - 如何拆分仅包含分隔符的字符串？

> ID：785586
> 
> 赞同：16
> 
> 时间：2009-04-24T12:09:28.030
> 
> 标签：java, regex, split

我正在使用以下代码：

```
String sample = "::";
String[] splitTime = sample.split(":");
// extra detail omitted
System.out.println("Value 1 :"+splitTime[0]);
System.out.println("Value 2 :"+splitTime[1]);
System.out.println("Value 3 :"+splitTime[2]); 
```

我得到了`ArrayIndexOutofBound`例外。如何`String.split()`处理连续或尾随/打开的分隔符？

**另见**：

*   [怀疑拆分方法](https://stackoverflow.com/questions/785533)
*   [Java split() 方法最后去除空字符串？](https://stackoverflow.com/questions/545957)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-04-24T12:23:37.920

Alnitak 是正确的，默认情况下将丢弃尾随的空字符串。

如果你想有尾随空字符串，你应该使用[`split(String, int)`](http://java.sun.com/javase/6/docs/api/java/lang/String.html#split(java.lang.String,%20int))并传递一个负数作为`limit`参数。

> 该`limit`参数控制应用模式的次数，因此会影响结果数组的长度。如果限制*n*大于零，则该模式将最多应用*n*  - 1 次，数组的长度将不大于*n*，并且数组的最后一个条目将包含最后一个匹配分隔符之外的所有输入。如果*n* 为非正数，则该模式将尽可能多地应用，并且数组可以具有任意长度。如果*n*为零，则该模式将被应用尽可能多的次数，数组可以有任意长度，并且尾随的空字符串将被丢弃。

请注意，这[`split(aString)`](http://java.sun.com/javase/6/docs/api/java/lang/String.html#split(java.lang.String))是 的同义词`split(aString, 0)`：

> `split`此方法的工作方式就像通过使用给定表达式和零限制参数调用双参数方法一样。因此，尾随的空字符串不包含在结果数组中。

此外，您应该使用循环从数组中获取值；这避免了一个可能的`ArrayIndexOutOfBoundsException`.

所以你更正的代码应该是（假设你*想要*尾随的空字符串）：

```
String sample = "::";
String[] splitTime = sample.split(":", -1);
for (int i = 0; i < splitTime.length; i++) {
    System.out.println("Value " + i + " : \"" + splitTime[i] + "\"");
} 
```

输出：

```
值 0：“”
值 1：“”
值 2：“”

```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-24T12:20:06.023

从[J2SE API 手册](http://java.sun.com/javase/6/docs/api/java/lang/String.html#split(java.lang.String))：

> 因此，尾随的空字符串不包含在结果数组中。

所以，如果你传入 " `::`" 你会得到一个空数组，因为所有的定界符都在尾随。

如果你想确保你得到的条目*不*超过三个，你应该使用：

```
String[] splitTime = sample.split(":", 3); 
```

输入 " `::`" 确实会在输出数组中为您提供三个空字符串。

但是，如果输入恰好有一个“ `:`”，那么您仍然只能在数组中获得两个元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-24T12:32:21.300

大概是这样？

```
int ndx = 0;
StringTokenizer t = new StringTokenizer(": : ::::",":");
while (t.hasMoreElements())
{
    System.out.println(String.format("Value %d : %s", ++ndx,t.nextElement()));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-24T12:19:28.130

使用函数 StringTokenizer 在其中你传递字符串和第二个参数作为分隔符

使用 splittime.length 函数查找长度

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-24T12:21:16.397

您应该检查 splitTime 数组的长度。

# osgi - 如何在不安装/激活的情况下发现 OSGi 包导出的类型？

> ID：785588
> 
> 赞同：3
> 
> 时间：2009-04-24T12:09:42.273
> 
> 标签：osgi

基本上我想发现一个 jar 是否实现了任意数量的接口而不激活或启动包。是否可以像容器一样从 API 的 meta-inf 读取元数据，但无需激活捆绑包？

我想使用 OSGi 来支持将发布许多接口的插件，并且我想知道当用户上传而不激活捆绑包等时捆绑包实现了哪些接口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-25T00:58:52.423

我认为不可能发现捆绑软件​​将提供哪些服务，因为这可能发生在 Java 代码内部，而没有任何关于它的元数据。当然，如果您使用声明式服务，则有一个元数据文件。此外，bundle 需要导入（或提供）服务接口，这可能会给您一些提示（但不会更多）。

您可以在不激活它的情况下检查捆绑导入和导出的 Java 包。如果你愿意安装（不解析，不激活），可以查询。Felix 或 Equinox shell 毕竟可以列出这些包。

这是[Felix' shell 的相关来源](http://svn.apache.org/viewvc/felix/releases/org.apache.felix.shell-1.2.0/src/main/java/org/apache/felix/shell/impl/ExportsCommandImpl.java?revision=760617&view=markup)。它使用 PackageAdmin 服务：

```
 public void execute(String s, PrintStream out, PrintStream err)
{
    // Get package admin service.
    ServiceReference ref = m_context.getServiceReference(
        org.osgi.service.packageadmin.PackageAdmin.class.getName());
    PackageAdmin pa = (ref == null) ? null : 
        (PackageAdmin) m_context.getService(ref);

    // ... 

    Bundle bundle = m_context.getBundle( bundleId );
    ExportedPackage[] exports = pa.getExportedPackages(bundle);

    // ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-04-06T08:27:02.767

你可以试试下面的东西。使用 bundle.findResource(...) 方法在导出的包中查找“.class”文件。

```
 BundleContext context = bundle.getBundleContext();
  ServiceReference ref = context.getServiceReference(PackageAdmin.class.getName());
  PackageAdmin packageAdmin = (PackageAdmin)context.getService(ref);
  List<Class> agentClasses = new ArrayList<Class>();
  ExportedPackage[] exportedPackages = packageAdmin.getExportedPackages(bundle);
  for(ExportedPackage ePackage : exportedPackages){
      String packageName = ePackage.getName();
      String packagePath = "/"+packageName.replace('.', '/');
      //find all the class files in current exported package
      Enumeration clazzes = bundle.findEntries(packagePath, "*.class", false);
      while(clazzes.hasMoreElements()){
       URL url = (URL)clazzes.nextElement();
       String path = url.getPath();
       int index = path.lastIndexOf("/");
       int endIndex = path.length()-6;//Strip ".class" substring
       String className = path.substring(index+1, endIndex);
       String fullClassName=packageName+"."+className;
       try {
     Class clazz = bundle.loadClass(fullClassName);
     //check whether the class is annotated with Agent tag.
     if(clazz.isAnnotationPresent(Agent.class))
      agentClasses.add(clazz);
    } catch (ClassNotFoundException e) { 
     e.printStackTrace();
    }
      }
  } 
```

# sifr - 更改 sifr 文本的字体大小

> ID：785593
> 
> 赞同：1
> 
> 时间：2009-04-24T12:12:32.687
> 
> 标签：sifr

[sIFR](http://www.mikeindustries.com/blog/sifr/)文本渲染后是否有任何方法可以更改其字体大小？我正在创建一个虚拟海报模型，并且我希望能够让用户动态更改文本的大小（并且无需刷新）。

我尝试更改基本文本的字体大小和 .sifr-root 和 .sifr-active 的 changeCSS，但似乎无法正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-26T21:03:17.870

目前没有办法改变字体大小，除了删除替换并用不同的大小再次替换文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-24T12:49:37.187

[这个](http://wiki.novemberborn.net/sifr3/Styling)记录 sIFR v3 的页面讨论了文本缩放，并带有一些可怕的警告......但也许它适用于您的用例，并且值得测试？

# c++ - 如何向应用程序发送链接，就像 Spotify 一样

> ID：785598
> 
> 赞同：2
> 
> 时间：2009-04-24T12:13:53.950
> 
> 标签：c++, winapi, hyperlink, protocols, wtl

当我们在编辑器中保存关卡时，我们会创建一个包含它所包含的任何错误的日志文件。这些基本上由错误消息和允许用户在树视图中找到错误项目的路径组成。

我想要的是使该路径成为链接，例如 <a href="editor://path/to/gameobject" > Click to see object in editor</a >

我看到的关于这个的 SO 问题似乎指向这个 msdn 页面：http: [//msdn.microsoft.com/en-us/library/aa767914.aspx](http://msdn.microsoft.com/en-us/library/aa767914.aspx)

但据我所知，它将产生一个新的应用程序实例。我想做的就是以某种方式简单地“调用”我们的编辑器。我想，一种方法是生成它，并在开始时检查是否已经有一个实例正在运行，如果是，则将命令行发送给它。

这是最好的方法吗？如果是这样，关于如何做到最好的任何想法？还有什么其他方法可以做到这一点？

另外：msdn 解决方案是否可以跨浏览器工作？我们的编辑器仅在 Windows 中运行，但人们使用 IE、Fx、GC 和 Opera。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-24T12:25:26.730

如果您需要链接在任何查看器中工作，是的，注册协议处理程序是最好的方法。

至于启动编辑器，您可以将其实现为[进程外 COM 服务器](http://msdn.microsoft.com/en-us/library/ms680076.aspx)，但如果您已经对命令行解析进行了排序，则不妨使用[窗口消息](http://msdn.microsoft.com/en-us/library/ms649011.aspx)或命名管道将其传递给编辑器。如果您要发送窗口消息，则可以使用[FindWindow](http://msdn.microsoft.com/en-us/library/ms633499.aspx)（具有唯一的类名）来检查正在运行的实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-24T12:17:15.377

听起来你已经通过检查以前的实例解决了它。

如果操作系统接受它以某种方式“标记”与数据的关联，告诉它将应该运行多次的程序与不应该运行的程序分开，我会感到惊讶。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-26T10:07:53.073

这是我解决它的方法。基本上，有两个部分。或三个。

首先，应用程序需要在注册表中注册自己，就像这样。使用谷歌搜索来了解如何使用 Windows 寄存器功能，但它们非常简单。通过将其添加到注册表中，您的应用程序将在单击带有您的自定义 url 协议的链接时启动。

其次，应用程序需要检测它是从浏览器启动的。显然很简单，只需检查命令行中的“/uri”或者您选择自定义它。

第三，您实际上并不想*启动*您的应用程序——它应该已经在运行了！相反，当您检测到您是从超链接开始时，您需要检测应用程序的另一个实例是否已经在运行。之后，您需要将命令行传递给它。我是这样做的：

```
bool ShouldContinueStartEditor( const std::string& command_line )
{
    // Check if this instance was spawned from a web browser
    if ( command_line.find( "/uri" ) != std::string::npos )
    {
        // Try to find other instance of JustEdit
        HWND wnd = FindWindow( "AV_MainFrame", NULL );
        if ( wnd )
        {
            COPYDATASTRUCT cds;
            NEditorCopyData::SCommandLine data_to_copy;

            strncpy( data_to_copy.m_CommandLine, command_line.c_str(), sizeof(data_to_copy.m_CommandLine) - 2 );
            cds.dwData = NEditorCopyData::ECommandLine; // function identifier
            cds.cbData = sizeof( data_to_copy );  // size of data
            cds.lpData = &data_to_copy;           // data structure

            SendMessage( wnd, WM_COPYDATA, NULL, (LPARAM) (LPVOID) &cds );
        }

        return false;
    }

    return true;
} 
```

“AV_Mainframe”是 hwnd 的名称。如果你碰巧在使用 WTL，你可以这样声明它。

```
DECLARE_FRAME_WND_CLASS("AV_MainFrame", IDR_MAINFRAME) 
```

现在，在您的窗口类中，您需要像这样处理 WM_COPYDATA 消息：

```
MESSAGE_HANDLER(WM_COPYDATA, OnCopyData);
LRESULT OnCopyData(UINT /*uMsg*/, WPARAM /*wParam*/, LPARAM /*lParam*/, BOOL& /*bHandled*/);

LRESULT CMainFrame::OnCopyData(UINT /*uMsg*/, WPARAM /*wParam*/, LPARAM lParam, BOOL& /*bHandled*/)
{
 PCOPYDATASTRUCT cds = (PCOPYDATASTRUCT) lParam;
 if ( cds->dwData == NEditorCopyData::ECommandLine )
 {
  NEditorCopyData::SCommandLine* command_line = static_cast( cds->lpData );

  const char* internal_path = strstr( command_line->m_CommandLine, "/uri" );
  if ( internal_path != NULL )
  {
   // Do your thang
  }
 }

 return 0;
} 
```

这就是它的全部内容。哦，这就是复制数据命名空间的样子：

```
namespace NEditorCopyData
{
 enum ECopyDataMessages
 {
  ECommandLine = 0
 };

 struct SCommandLine
 {
  char m_CommandLine[512];
 };

} 
```

# java - 在分页struts2 + java中实现动态pagesize

> ID：785600
> 
> 赞同：1
> 
> 时间：2009-04-24T12:14:06.397
> 
> 标签：java, struts

我正在尝试通过显示标签来实现分页`Struts2`。现在我的要求是我有一个组合框，它有一些页面大小值，如 5、10、15 ..

那么，如何在显示标签的页面大小中更新该值`Struts2`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-24T14:08:28.430

您将在您的操作上创建一个公开的属性，例如命名为 selectedPageSize。此属性可以设置为默认大小（在您的示例 5 中）。您将保留一个隐藏的表单字段来存储当前选定的值。然后，这将在您的视图中使用，显示标签类似于：

```
<c:set name="selectedPageSize" value="selectedPageSize" scope="request"/>
<display:table pagesize="${selectedPageSize}" ... > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-24T12:57:54.560

我不确定struts2，但一般来说，使用JSF，如果您将用于分页的任何组件绑定到您的支持bean，您可以通过一个动作设置诸如此类的属性。

# c# - 如何使用 Infragistics XamDataGrid 将所选项目绑定到模型？

> ID：785607
> 
> 赞同：3
> 
> 时间：2009-04-24T12:17:06.967
> 
> 标签：c#, wpf, mvvm, infragistics

我有以下模型：

```
public class Model : INotifyPropertyChanged 
{
  public ObservableCollection<ViewElement> Elements { get; set; }

  public ViewElement CurrentElement { get; set; }
} 
```

`DataContext`以及父级为上述模型的以下网格：

```
<dg:XamDataGrid DataSource="{Binding Path=Elements}" /> 
```

我想将`CurrentElement`属性绑定到网格的选定项，类似于我在 a 中的方式`ListView`：

```
 <ListView x:Name="playbackSteps"
          ItemsSource="{Binding Path=Elements}"
          SelectedItem="{Binding Path=CurrentElement}" /> 
```

你会如何建议我这样做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-24T14:44:55.567

如[Infragistics 论坛](http://news.infragistics.com/forums/p/24777/90741.aspx#90741)所述，XamDataGrid 公开了 IsSynchronizedWithCurrentItem 属性。要利用这一点，您需要 ObservableCollection 的[ListCollectionView](http://msdn.microsoft.com/en-us/library/system.windows.data.listcollectionview.aspx)。像这样的东西：

```
public ListCollectionView ElementsView {get;set;}

// In the constructor:
this.ElementsView = new ListCollectionView(Elements); 
```

然后将您的 XamDataGrid 绑定到 ElementsView。

# java - 在 Java 中，如何使用 JUnit 验证抛出的异常？

> ID：785618
> 
> 赞同：29
> 
> 时间：2009-04-24T12:19:46.803
> 
> 标签：java, exception, exception-handling, junit

在为 Java API 编写单元测试时，您可能希望对异常执行更详细的验证。即比JUnit 提供的*@test*注释提供的更多。

例如，考虑一个应该从其他接口捕获异常的类，包装该异常并抛出被包装的异常。您可能需要验证：

1.  引发包装异常的确切方法调用。
2.  包装器异常的原因是原始异常。
3.  包装器异常的消息。

这里的要点是您希望在单元测试中对异常进行额外的验证（而不是关于是否*应该*验证异常消息之类的东西的争论）。

有什么好的方法呢？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-04-24T12:39:14.090

正如[您的回答](https://stackoverflow.com/questions/785618/in-java-how-can-i-validate-a-thrown-exception-with-junit/785632#785632)中所提供的，这是一个很好的方法。除此之外：

您可以将函数包装`expectException`到一个新的 Annotation 中，称为`ExpectedException`.
带注释的方法如下所示：

```
@Test
@ExpectedException(class=WrapperException.class, message="Exception Message", causeException)
public void testAnExceptionWrappingFunction() {
  //whatever you test
} 
```

这种方式会更具可读性，但它是完全相同的方法。

另一个原因是：我喜欢注解 :)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-10-24T13:43:00.963

在 JUnit 4 中，可以使用[ExpectedException](http://junit.org/javadoc/latest/org/junit/rules/ExpectedException.html)规则轻松完成。

这是来自 javadocs 的示例：

```
// These tests all pass.
public static class HasExpectedException {
    @Rule
    public ExpectedException thrown = ExpectedException.none();

    @Test
    public void throwsNothing() {
        // no exception expected, none thrown: passes.
    }

    @Test
    public void throwsNullPointerException() {
        thrown.expect(NullPointerException.class);
        throw new NullPointerException();
    }

    @Test
    public void throwsNullPointerExceptionWithMessage() {
        thrown.expect(NullPointerException.class);
        thrown.expectMessage("happened?");
        thrown.expectMessage(startsWith("What"));
        throw new NullPointerException("What happened?");
    }
} 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2009-04-25T14:46:16.820

查看建议的答案，您可以真正感受到在 Java 中没有闭包的痛苦。恕我直言，最易读的解决方案是你好老的 try catch。

```
@Test
public void test() {
    ...
    ...
    try {
        ...
        fail("No exception caught :(");
    }
    catch (RuntimeException ex) {
        assertEquals(Whatever.class, ex.getCause().getClass());
        assertEquals("Message", ex.getMessage());
    }
} 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2009-04-24T12:54:22.430

对于 JUNIT 3.x

```
public void test(){
   boolean thrown = false;
   try{
      mightThrowEx();
   } catch ( Surprise expected ){
      thrown = true;
      assertEquals( "message", expected.getMessage());
   }
  assertTrue(thrown );
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-04-24T13:11:37.290

在这篇文章之前，我已经通过这样做完成了我的异常验证：

```
try {
    myObject.doThings();
    fail("Should've thrown SomeException!");
} catch (SomeException e) {
    assertEquals("something", e.getSomething());
} 
```

不过，我花了一些时间思考这个问题，并提出了以下问题（Java5，JUnit 3.x）：

```
// Functor interface for exception assertion.
public interface AssertionContainer<T extends Throwable> {
    void invoke() throws T;
    void validate(T throwable);
    Class<T> getType();
}

// Actual assertion method.
public <T extends Throwable> void assertThrowsException(AssertionContainer<T> functor) {
    try {
        functor.invoke();
        fail("Should've thrown "+functor.getType()+"!");
    } catch (Throwable exc) {
        assertSame("Thrown exception was of the wrong type! Expected "+functor.getClass()+", actual "+exc.getType(),
                   exc.getClass(), functor.getType());
        functor.validate((T) exc);
    }
}

// Example implementation for servlet I used to actually test this. It was an inner class, actually.
AssertionContainer<ServletException> functor = new AssertionContainer<ServletException>() {
    public void invoke() throws ServletException {
        servlet.getRequiredParameter(request, "some_param");
    }

    public void validate(ServletException e) {
        assertEquals("Parameter \"some_param\" wasn't found!", e.getMessage());
    }

    public Class<ServletException> getType() {
        return ServletException.class;
    }
}

// And this is how it's used.
assertThrowsException(functor); 
```

看着这两个，我无法决定我更喜欢哪一个。我想这是实现目标的问题之一（在我的情况下，具有函子参数的断言方法）从长远来看是不值得的，因为执行那些 6+ 的代码来断言 try 要容易得多..catch 块。

再说一次，也许我在星期五晚上解决问题的 10 分钟结果并不是最聪明的方法。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-06-22T15:19:37.657

@akuhn：

即使没有闭包，我们也可以获得更易读的解决方案（使用[catch-exception](http://code.google.com/p/catch-exception/)）：

```
import static com.googlecode.catchexception.CatchException.*;

public void test() {
    ...
    ...
    catchException(nastyBoy).doNastyStuff();
    assertTrue(caughtException() instanceof WhateverException);
    assertEquals("Message", caughtException().getMessage());
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-04-24T12:23:39.900

以下帮助方法（改编自此[博客](http://softwaredevscott.spaces.live.com/blog/cns!1A9E939F7373F3B7!524.entry)文章）可以解决问题：

```
/**
 * Run a test body expecting an exception of the
 * given class and with the given message.
 *
 * @param test              To be executed and is expected to throw the exception.
 * @param expectedException The type of the expected exception.
 * @param expectedMessage   If not null, should be the message of the expected exception.
 * @param expectedCause     If not null, should be the same as the cause of the received exception.
 */
public static void expectException(
        Runnable test,
        Class<? extends Throwable> expectedException,
        String expectedMessage,
        Throwable expectedCause) {
    try {
        test.run();
    }
    catch (Exception ex) {
        assertSame(expectedException, ex.getClass());
        if (expectedMessage != null) {
            assertEquals(expectedMessage, ex.getMessage());
        }

        if (expectedCause != null) {
            assertSame(expectedCause, ex.getCause());
        }

        return;
    }

    fail("Didn't find expected exception of type " + expectedException.getName());
} 
```

然后测试代码可以按如下方式调用它：

```
TestHelper.expectException(
        new Runnable() {
            public void run() {
                classInstanceBeingTested.methodThatThrows();
            }
        },
        WrapperException.class,
        "Exception Message",
        causeException
); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-04-24T13:16:56.793

我做了一些非常简单的事情

```
testBla(){
    try {
        someFailingMethod()
        fail(); //method provided by junit
    } catch(Exception e) {
          //do nothing
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2010-10-25T15:52:11.153

我做了一个类似于其他发布的助手：

```
public class ExpectExceptionsExecutor {

    private ExpectExceptionsExecutor() {
    }

    public static  void execute(ExpectExceptionsTemplate e) {
        Class<? extends Throwable> aClass = e.getExpectedException();

        try {
            Method method = ExpectExceptionsTemplate.class.getMethod("doInttemplate");
            method.invoke(e);
        } catch (NoSuchMethodException e1) {

            throw new RuntimeException();
        } catch (InvocationTargetException e1) {

            Throwable throwable = e1.getTargetException();
            if (!aClass.isAssignableFrom(throwable.getClass())) {
                //  assert false
                fail("Exception isn't the one expected");
            } else {
                assertTrue("Exception captured ", true);
                return;
            }
            ;

        } catch (IllegalAccessException e1) {
            throw new RuntimeException();
        }

        fail("No exception has been thrown");
    }

} 
```

以及客户端应该实现的模板

```
public interface ExpectExceptionsTemplate<T extends Throwable> {

    /**
     * Specify the type of exception that doInttemplate is expected to throw
     * @return
     */
    Class<T> getExpectedException();

    /**
     * Execute risky code inside this method
     * TODO specify expected exception using an annotation
     */
    public void doInttemplate();

} 
```

客户端代码将是这样的：

```
@Test
    public void myTest() throws Exception {
        ExpectExceptionsExecutor.execute(new ExpectExceptionsTemplate() {
            @Override
            public Class getExpectedException() {
                return IllegalArgumentException.class;
            }

            @Override
            public void doInttemplate() {
                riskyMethod.doSomething(null);
            }
        });
     } 
```

它看起来非常冗长，但如果您使用具有良好自动完成功能的 IDE，您只需要编写异常类型和实际测试代码。（其余的将由 IDE 完成：D）

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-11-17T12:01:22.397

对于**JUnit 5**，这要容易得多：

```
 @Test
    void testAppleIsSweetAndRed() throws Exception {

        IllegalArgumentException ex = assertThrows(
                IllegalArgumentException.class,
                () -> testClass.appleIsSweetAndRed("orange", "red", "sweet"));

        assertEquals("this is the exception message", ex.getMessage());
        assertEquals(NullPointerException.class, ex.getCause().getClass());
    } 
```

通过返回异常对象本身，`assertThrows()`您可以测试有关您抛出的异常的各个方面。

# java - 启动进程中 Eclipse 中的 OutOfMemory

> ID：785620
> 
> 赞同：1
> 
> 时间：2009-04-24T12:20:34.370
> 
> 标签：java, eclipse

我使用第三方插件在 Eclipse 中有一个 OutOfMemory（堆大小）插件是 Adob​​e Livecycle 工作台，在内存不足期间，插件通过 WS（使用 Axis）检索服务器上大约 70 个工作流组件的列表

这是我在 Eclipse 中的调用堆栈的摘录

> ...在 org.eclipse.equinox.launcher.Main.main(Main.java:1144)
> 
> 引起：java.lang.OutOfMemoryError: Java heap space；嵌套异常是：java.lang.OutOfMemoryError: Java heap space at org.apache.axis.message.SOAPFaultBuilder.createFault ...

我正在使用这个 eclipse.ini

> -showlocation
> -vm
> C:\bea920\jdk150_04\bin\javaw.exe
> -vmargs
> -Xms512M
> -Xmx1024M

我不使用任何命令行选项

我已将 -Xmx1024m 添加到我在 Java/Installed JRE 中唯一安装的 JRE

在我看来：-eclipse 本身不是 OutOfMemory 它只显示 1024Mo 中的 300Mo 使用它继续正常工作-插件启动它的轴解析而没有给它足够的内存

问题： - 我的假设正确吗？- 我如何找到在哪里以及如何为 eclipse 启动器启动的进程提供更多内存？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-24T12:59:14.010

您是否从首选项窗口更改了启动的 VM 参数？试试这个：

```
Window->Preferences
Java->Installed JREs
(select your jre here)->Edit..
Default VM Arguments: -Xmx1024m (or whatever size you like) 
```

编辑 1：根据您的评论，我看到您已经尝试过了。我假设您没有根据您的问题部分尝试它，即“我如何找到在哪里以及如何为 eclipse 启动器启动的进程提供更多内存？”。我想我们都知道当我们假设时会发生什么！

您是否考虑过将内存增加到更大的值，只是为了看看您是否可以让它运行（并可能获得更多关于导致它崩溃的信息）？根据可用内存尝试 -Xmx2048m 或更大。

您能否在您的问题中添加一些信息，让我们了解插件的作用？这个项目是网络服务吗？ETC..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-24T12:37:34.670

查看您是否在运行 eclipse 的命令行中传递 Xms 和 Xmx 选项。那里的值将覆盖 eclipse.ini 中的值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-24T12:38:19.240

我认为您需要编辑与 eclipse exe 文件位于同一目录中的 eclipse.ini 文件。它将包含您可以更改的 -Xms 设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-24T13:05:58.097

我建议使用 -clean 选项运行 eclipse 以清除所有缓存并重新读取您的设置。

此外，我已经成功地将 eclipse.ini 移出 eclipse 目录（因此没有 eclipse.ini），运行 eclipse，退出，将 ini 文件移回并再次运行。我没有费心去理解为什么这有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-24T13:41:24.253

添加-XX:MaxPermSize=256m

这是 Java 中的另一种内存类型。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-28T07:03:15.910

我能够找到问题是

*   我在 Eclipse 中使用了 Fiddler（使用代理设置）
*   通过这种方式，我能够发现肥皂答案是 OutOfMemory
    soapenv:Fault faultcode soapenv:Server.generalException faultstring java.lang.OutOfMemoryError: Java heap space; 嵌套异常是： **java.lang.OutOfMemoryError**：Java 堆空间
*   所以问题出在服务器上

*   我现在有另一个问题：服务器构建了一个对 eclipse 来说很大的答案

谢谢您的回答

# email - Postfix 邮件服务器 - 本地帐户和外部帐户 - 转发

> ID：785637
> 
> 赞同：2
> 
> 时间：2009-04-24T12:26:59.393
> 
> 标签：email, postfix-mta

这就是问题所在。我有一个 postfix 邮件服务器，它具有外部电子邮件帐户（存在于我的邮件服务器和我的 ISP 上）和内部使用帐户（仅存在于我的本地邮件服务器上）。

问题是当一个本地帐户尝试向另一个配置了转发电子邮件地址的本地帐户发送电子邮件时。由于本地帐户（发送者）由于缺少 ISP 帐户而没有身份验证，因此每次唯一本地帐户向另一个配置了外部转发的本地帐户发送电子邮件时都会返回错误。

有没有办法避免这种行为？我不希望大量的电子邮件错误冲回用户的帐户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-10-04T12:12:34.217

在您的 /etc/postfix/main.cf 中，将“mydestination”的值更改为空，即“”，将“virtual_alias_maps”的值更改为空，即“”

# web-services - 当我们使用 .NET 调用使用 asp/vbscript 编写的 Web 服务时的可伸缩性问题

> ID：785644
> 
> 赞同：1
> 
> 时间：2009-04-24T12:31:48.367
> 
> 标签：web-services, asp-classic, vbscript

我们目前正在使用 asp/vbscript 通过我们的 Web 服务器在我们的应用程序服务器上调用 Web 服务。这在低负载期间非常有效。然而，在高负载期间，有时可能需要长达 25 秒才能执行如下查询：

```
Public Function GetValidLogon(storeKey, username)
    Dim req
    Set req = CreateObject("Microsoft.XMLHTTP")

    Dim soapReq
    soapReq = "<?xml version=""1.0"" encoding=""utf-8""?> " + _
                "<soap:Envelope " + _
                    "xmlns:soap=""http://schemas.xmlsoap.org/soap/envelope/"" " + _
                    "xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" " + _
                    "xmlns:xsd=""http://www.w3.org/2001/XMLSchema""> " + _
                    "<soap:Body> " + _
                        "<GetValidLogon xmlns=""" + namespace + """> " + _ 
                            "<storeKey>" + _
                                CStr(storeKey) + _
                            "</storeKey>" + _
                            "<username>" + _
                                CStr(username) + _
                            "</username>" + _
                        "</GetValidLogon> " + _
                    "</soap:Body> " + _
                "</soap:Envelope>"

    req.open "POST", Me.serviceAddress, False
    req.setRequestHeader "Content-Type", "text/xml; charset=utf-8"
    req.setRequestHeader "SOAPAction", Me.serviceNamespace + "GetValidLogon"
    req.send soapReq

    Set GetValidLogon = SOAPResponseTo_GetValidLogonOutput(req.responseText)
End Function 
```

你认为可能是什么问题？是我们用来调用 Web 服务的代码（见上文）还是仅仅是我们使用 vbscript/asp 来调用 Web 服务的事实？可以是 IIS 中的一些设置吗...？

每次，即使在高负载期间，当我们直接在应用程序服务器上执行 Web 服务时也总是很快。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-29T14:16:07.467

从不使用

```
CreateObject("Microsoft.XMLHTTP") 
```

在服务器端应用程序中......使用

```
CreateObject("MSXML2.ServerXMLHTTP") 
```

反而。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-24T12:35:59.120

我很想知道服务器/代码/IIS 是否将自身限制为仅与 Web 服务建立 N 个并发连接。这将导致其他请求排队并阻塞，直到其他请求完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-24T12:54:51.150

用户凭据存储在后端的什么位置 - 在您的应用程序、数据库或 Active Directory 中？也许问题不在于您的应用程序，而在于您与 AD 的连接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-24T12:59:01.797

在负载测试期间，性能问题是否也出现在您的开发环境中？

如果是这样，那么我建议您通过将上述代码放入测试 ASP 页面来创建一个测试脚本。让页面接受两个查询字符串参数“n”和“m”。连续循环“n”次，每次调用之间有“m”毫秒的延迟，然后看看会发生什么。甚至可以看到当您从多个请求中调用同一页面时会发生什么。

从那里，您可以继续检查应用程序服务器上 IIS 的性能计数器，注意您是否正在丢弃连接，以及连接等待的时间。

如有必要，您可以继续分析 Web 服务。请参阅[.NET 的探查器工具](http://cid-600a2be4a82ea0a6.profile.live.com/Lists/cns!600A2BE4A82EA0A6!678/)。问题可能在任何地方，甚至在数据库中，这些工具将帮助您缩小范围。

# java - 使用 WS-Trust 与 Axis2 进行 WCF 互操作

> ID：785652
> 
> 赞同：7
> 
> 时间：2009-04-24T12:37:06.687
> 
> 标签：java, wcf, interop, saml, sts-securitytokenservice

我们正在尝试使用从 STS 发出的 SAML 令牌让 WCF 和 Java 相互通信。尽管双方都符合标准，WS-Security、WS-Trust、WS-Policy 等，但它们似乎并不相互交流，并且其中一方会抛出神秘异常或忽略安全标头.

我们在 MS 端使用 .NET 3.5、WCF 联合绑定，在 java 端使用 Axis2/Rampart/Rahas。

有没有人能够完成这项工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-11T13:45:46.530

Axis2 在 WS 标准合规性方面是不完整的。

我最近（上个月）经历了一个 POC 阶段，其中 Axis2 未能通过我的 WS-* 合规性测试（特别是 WS-AT、WS-Coordination）。

看看“地铁计划”。Sun 和 Microsoft 合作使 WCF 和 JAX-WS 互操作“正确”。
[https://metro.dev.java.net/](https://metro.dev.java.net/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-15T12:10:03.100

如果可以的话，我也不建议在 Java 端使用 Axis2。显然，使用 Glassfish 或 JAX-WS 会更容易，尽管我从未测试过它。

在尝试使 WCF 和 Axis2 合作时，我也遇到了这些问题。检查 WSDL 文件中使用的标准版本，在我们的例子中不匹配。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-21T13:59:39.183

您是否正在处理文档文字与 rpc 编码的问题？（对不起，不得不问。）

[http://www.ibm.com/developerworks/webservices/library/ws-whichwsdl/](http://www.ibm.com/developerworks/webservices/library/ws-whichwsdl/)

[http://www.developerfusion.com/article/4694/web-services-interoperability-between-j2ee-and-net-part-1/3/](http://www.developerfusion.com/article/4694/web-services-interoperability-between-j2ee-and-net-part-1/3/)

[http://msdn.microsoft.com/en-us/library/ms996466.aspx](http://msdn.microsoft.com/en-us/library/ms996466.aspx)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-06-09T16:56:10.390

我假设服务器端是轴，不清楚但更常见。

如果您正在使用 Java 编写可互操作的 Web 服务，您应该考虑切换到 JAX-WS，不仅因为 axis2 编程模型有点奇怪，而且代码通常不完整。我之前确实遇到过部分实现的功能，而且我发现很难确定使用 Microsoft 堆栈执行了哪些互操作性测试。

我会说您将来使用 JAX-WS 堆栈有更好的机会。一个主要原因是 Sun 工程师花了相当长的时间与 Microsoft 工程师坐在一起，以确保他们的堆栈是可互操作的，并且他们以相同的方式解释规范。除此之外，编程模型更容易并且可以使用注释驱动。它还在一定程度上简化了部署和维护。可以忽略用于服务 .AAR 文件的附加容器以及从服务端点中删除 axis2 的操作：端点可以被视为 Servlet。

有关于人们让 SAML 与 JAX-WS 一起工作的文档：[http ://www.jroller.com/gmazza/entry/using_the_opensaml_library_in](http://www.jroller.com/gmazza/entry/using_the_opensaml_library_in)

如果您不能离开axis2，我认为需要采用类似的策略。您将在哪里拦截令牌并在它调用服务端点之前进行身份验证。

见：[http ://www.omg.org/news/meetings/workshops/Web_Services_USA_Manual/02-3_K_Smith.pdf](http://www.omg.org/news/meetings/workshops/Web_Services_USA_Manual/02-3_K_Smith.pdf)

[http://www.mail-archive.com/axis-user@xml.apache.org/msg10292.html](http://www.mail-archive.com/axis-user@xml.apache.org/msg10292.html)

[http://www2.sys-con.com/ITSG/virtualcd/WebServices/archives/0303/secrist/index.html](http://www2.sys-con.com/ITSG/virtualcd/WebServices/archives/0303/secrist/index.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-11-30T09:34:32.320

我们已经成功地在客户端和服务器端使用 WCF 测试了 Rampart 的 WS-Trust 场景。

BTW Rampart 尚不支持 WS-Federation 方案，您的安全策略可能与它相关。[仅供参考 - WS-Federation 将于明年年中随 Rampart 推出]。

如果可以，请附上安全策略，我们可以仔细查看..

# vb.net - 加密 web.config 中的数据

> ID：785654
> 
> 赞同：4
> 
> 时间：2009-04-24T12:37:38.290
> 
> 标签：vb.net, web-config, asp.net-3.5

我的 web.config 中有以下行

```
<appSettings>
   <add key="AdminPassword" value="ASDF1234" />
</appSettings> 
```

我怎样才能加密它？我试过这个[教程](http://aspnet.4guysfromrolla.com/articles/021506-1.aspx)，但它让我很困惑

帮助？！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-24T12:45:10.207

请参阅以下文章：[http ://weblogs.asp.net/scottgu/archive/2006/01/09/434893.aspx](http://weblogs.asp.net/scottgu/archive/2006/01/09/434893.aspx)

# eclipse - 在*不是* JFace 视图的东西上使用选择服务

> ID：785663
> 
> 赞同：1
> 
> 时间：2009-04-24T12:39:59.657
> 
> 标签：eclipse, eclipse-rcp, jface

我正在构建一个图像编辑器作为 Eclipse 插件。

我想使用属性视图来查看和编辑图像下方模型的属性。因此，我打电话给..

```
getSite().setSelectionProvider( this ); 
```

.. 在 createPartControl 中，并在我的 EditorPart 实现中实现 ISelectionProvider 接口，以便模型作为选择返回（因此必须实现 ISelection 接口）。

下一步是编辑器实现 IAdaptable 以为选定对象提供适配器。

然而，我的问题是 getAdapter 永远不会使用 IPropertySource.class 调用，因此属性视图永远不会获得理解图像模型所需的内容。

非常感谢您的帮助。

M。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-05T10:18:10.450

最后的答案分解成几块......

1.) 当您的选择发生变化时（例如，如果用户放大了图像）一定要告诉 Eclipse。否则不会发生。

2.) 发送您的 SelectionChangedEvent 时，将您的 IAdaptable 包装在一个 StructuredSelection 对象中 - 否则 Properties 视图将忽略它。

这归结为以下方法

```
public void fireSelectionChanged()
{
    final SelectionChangedEvent event = new SelectionChangedEvent( this, new StructuredSelection( this  ) );
    Object[] listeners = selectionChangedListeners.getListeners();
    for (int i = 0; i < listeners.length; ++i) 
    {
        final ISelectionChangedListener l = (ISelectionChangedListener) listeners[i];
        SafeRunnable.run(new SafeRunnable() {
            public void run() {
                l.selectionChanged( event );
            }
        });
    }
} 
```

... 在实现 ISelectionProvider 和 IAdaptable 的类上。

M。

# python - 建议重构的 Python 工具

> ID：785667
> 
> 赞同：10
> 
> 时间：2009-04-24T12:41:02.823
> 
> 标签：python, refactoring

在挖掘遗留 Python 代码和自己编写 Python 代码时，我经常使用[pylint](http://www.logilab.org/857)。我也在使用[Clone Digger](http://clonedigger.sourceforge.net/)。我最近开始使用[rope](http://rope.sourceforge.net/)，这是一个用于自动重构的库。

但我在寻找绳索以外的东西。我更喜欢只对可能的重构提出建议的工具：命名重构，可选地提供它的简短描述（非常适合学习目的），突出显示代码部分并让我自己进行重构。有这样的工具吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-03-20T09:19:33.267

你可能会喜欢[Pythoscope](http://pythoscope.org/)，这是一个自动 Python 单元测试生成器，它可以帮助你通过动态执行代码来引导单元测试套件。

另外，你检查过[`rope.contrib.codeassist`](http://rope.sourceforge.net/library.html#rope-contrib-codeassist)模块吗？它应该自动为您建议和执行源代码的重构。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-25T03:20:34.923

查看自行车维修人员[http://bicyclerepair.sourceforge.net/](http://bicyclerepair.sourceforge.net/)

什么是自行车修理工？Bicycle Repair Man 项目试图为 python 创建重构浏览器功能。它被打包为一个库，可以添加到 IDE 和编辑器中以提供重构功能。包中包含 Emacs 和 Vi 的绑定。

我自己从未使用过它，但读过它。听起来像你在找什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-26T05:24:43.370

如果这种类型的工具存在于任何特定语言中，我不知道，尽管 Martin Fowler 的重构书（[网络参考](http://www.refactoring.com/)）中提到了这个概念。

我所知道的目前存在的最好的工具是圈复杂度。[本文](http://www.traceback.org/2008/03/31/measuring-cyclomatic-complexity-of-python-code/)实现了python的圈复杂度计数器。

另一个易于定位的指标是方法/函数长度、对象/类的属性数量和函数的参数数量，如果我记得的话，pylint 已经计算过了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-11-26T10:35:19.870

哦，忘掉你的工具吧，改用 TDD 和一本好书，比如 Kerievsky 的《重构设计模式》。问题是重构是改进你的代码和设计的一种方式，但只有你可以知道你想要实现什么，没有任何重构工具可以为你做。

我的观点是，学习重构的最佳方法是学习示例，而不是遵循一些愚蠢/简单的工具，因为它们不会教你任何复杂的重构，也不会告诉你是否有重构与你的代码组合得很好。

PS 阅读 Fowler "Refactoring" 和 Kerievsky "Refactoring to design Patterns" 这些书是学习重构时必须阅读的。他们提到了检查是否需要重构的简单方法（气味）。

还将 TDD 视为确保您的 ref 安全且不会破坏您的代码的好方法。Beck“通过示例进行测试驱动开发”是一本很好的入门书籍。Python 有用于 TDD 的 PyUnit。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-26T05:09:09.960

NetBeans 有一个支持 Python 的早期访问版本，它相当不错。它有一些我发现有用的基本重构工具。作为一个额外的好处，它可以在 Windows、Linux、Mac OS X 和 Solaris 上运行。

查看： http: [//www.netbeans.org/features/python/](http://www.netbeans.org/features/python/)

# c# - 如何在代码中更改我的 GridView 中的 Image DataImageUrlFormatString 值？

> ID：785670
> 
> 赞同：2
> 
> 时间：2009-04-24T12:43:02.990
> 
> 标签：c#, asp.net, vb.net, gridview

我有一个gridview，一个coulmn是一个图像列。我将如何更改后面代码中的 DataImageUrlFormatString 值？

我试过这样做，但它不起作用.......

```
((ImageField)(GridView2.Rows[0].Cells[0].FindControl("ID"))).DataImageUrlFormatString 

 = "~/createthumb.ashx?gu=/pics/gmustang06_2.jpg"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-24T14:06:36.063

尝试这个：

```
 ((System.Web.UI.WebControls.Image)(GridView2.Rows[0].Cells[0].Controls[0])).ImageUrl = "~/createthumb.ashx?gu=/pics/gmustang06_2.jpg"; 
```

**编辑：**

您可以使用声明性语法将路径的 URL 设置为将显示在图像控件中的图像：

```
<asp:ImageField DataImageUrlField="id" DataImageUrlFormatString="img{0}.jpg"></asp:ImageField> 
```

或者在后面的代码中通过处理 GridView 控件的 OnRowDataBound 事件：

```
protected void grd_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        Image img = e.Row.Cells[0].Controls[0] as Image;
        img.ImageUrl = "img" + DataBinder.Eval(e.Row.DataItem, "id") + ".jpg";
    }      
} 
```

# .net - 有没有办法使 UserControl 无法聚焦？

> ID：785672
> 
> 赞同：11
> 
> 时间：2009-04-24T12:43:21.990
> 
> 标签：.net, winforms

有没有办法使 UserControl 无法聚焦？

编辑：所以`SetStyle(ControlStyles.Selectable, false)`

是要走的路。但是还是有区别的`Control`。如果您继承表单`Control`，则初始控件不会失去焦点。但是在单击您的控件后，该控件源自`UserControl`和

```
ControlStyles.Selectable 
```

应用焦点从初始控制中移除。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-04-24T13:03:20.337

在您的构造函数中，`InitializeComponent()`您需要调用[`SetStyle`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.setstyle.aspx)并将[`ControlStyles.Selectable`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.setstyle.aspx)样式设置为`false`：

```
SetStyle(ControlStyles.Selectable, false); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-02-03T12:21:37.437

除了[ControlStyles.Selectable](https://msdn.microsoft.com/en-us/library/system.windows.forms.control.setstyle.aspx)之外，还有一个[ControlStyles.ContainerControl](https://msdn.microsoft.com/en-us/library/system.windows.forms.control.setstyle.aspx) - 关于这个主题的文档相当稀少（*如果为真，该控件是一个类似容器的控件*），但它会以某种方式影响子控件是否获得焦点而不是控件本身。

**编辑：**

我刚刚注意到另一个有趣的事实。在反射器中查看 UserControl 表明它强制在 OnMouseDown 中设置输入焦点。因此，在不调用 base.OnMouseDown(e) 的情况下覆盖 OnMouseDown 可以解决问题而没有副作用。

```
[EditorBrowsable(EditorBrowsableState.Advanced)]
protected override void OnMouseDown(MouseEventArgs e)
{
    if (!this.FocusInside())
    {
        this.FocusInternal();
    }
    base.OnMouseDown(e);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-01-13T10:35:16.377

是的，*SetStyle(ControlStyles.Selectable, false);* 仅当您从控件继承时才有效。

如果您从用户控件继承，它将不起作用。

为了解决这个问题，我在用户控件中添加了一个面板，并将面板停靠在“填充”上。将其余控件添加到面板而不是用户控件。有效！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-24T12:54:03.947

如果 CanFocus 属性返回 false，用户控件或任何控件将无法获得焦点。如果您查看反射器中的代码，它基本上会检查 3 个属性，如果任何属性为假，那么它将无法聚焦。

*   IsHandleCreated
*   可见
*   已启用

将前两个设置为 false 并具有功能控制几乎是矛盾的。如果您的控件可以在 IsEnabled 为 false 的情况下正常工作，那么这应该可以工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-24T12:45:49.613

启用 = 假，也许？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-02T21:02:31.117

[您可以通过将TabStop](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.tabstop%28v=vs.110%29.aspx)设置为 false 来更接近您想要的。例如，当其所属窗体上方的对话框关闭时，这将防止控件获得焦点。

# c# - C# 和 Excel 互操作问题，保存 excel 文件不流畅

> ID：785673
> 
> 赞同：10
> 
> 时间：2009-04-24T12:44:11.880
> 
> 标签：c#, interop, excel-interop

我可以打开并写入 excel 文件，但是当我尝试通过传递路径来保存文件时，保存操作会提示保存对话框。我期待它能够将文件完全保存在指定路径

代码如下：

```
excelApp.Save(exportToDirectory);
excelApp.Quit(); 
```

其中，**exportToDirectory**是：“C:\files\strings.xlsx”。

PS：我已经检查过excel版本和类似的问题。

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-04-24T12:49:21.400

您需要使用`Workbook.SaveAs`而不是`Application.Save`：

```
Excel.Application app = new Excel.Application();
Excel.Workbook wb = app.Workbooks.Add(missing);
...
wb.SaveAs(@"C:\temp\test.xlsx", missing, missing, missing, missing,
          missing, Excel.XlSaveAsAccessMode.xlExclusive,
          missing, missing, missing, missing, missing); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2009-04-24T12:52:53.217

设置以下属性也可能有帮助：

```
excelApp.DisplayAlerts = false;
excelApp.ScreenUpdating = false;
excelApp.Visible = false;
excelApp.UserControl = false;
excelApp.Interactive = false; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-24T12:52:36.977

好吧，这是微软的做法：

```
// Save the Workbook and quit Excel.
m_objBook.SaveAs(m_strSampleFolder + "Book1.xls", m_objOpt, m_objOpt, 
    m_objOpt, m_objOpt, m_objOpt, Excel.XlSaveAsAccessMode.xlNoChange, 
    m_objOpt, m_objOpt, m_objOpt, m_objOpt);
m_objBook.Close(false, m_objOpt, m_objOpt);
m_objExcel.Quit(); 
```

请参阅他们的[一篇知识库文章](http://support.microsoft.com/kb/306023)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2011-03-06T06:30:52.103

只需将**ActiveWorkbook.Saved** *属性*设置为**true** ，您就可以在没有任何对话框的情况下 Quit()；

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-24T13:02:03.363

`ExcelApp.Interactive = false`禁止任何对话框。

`excelApp.ActiveWorkbook.SaveAs(exportDirectory)`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-02-15T20:18:20.440

我发现`excelApp.ActiveWorkbook.save()`哪个可以保存文件，然后我可以不问就退出。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-08-23T07:32:46.310

`myBook.Saved = true;`
`myBook.SaveCopyAs(xlsFileName);`
`myBook.Close(null, null, null);`
`myExcel.Workbooks.Close();`
`myExcel.Quit();`

# math - 使用 Vandermonde 矩阵的快速傅立叶变换 - 系数评估？

> ID：785680
> 
> 赞同：1
> 
> 时间：2009-04-24T12:45:31.640
> 
> 标签：math, matrix, fft

假设我正在尝试评估多项式：

```
x^2 + 1 
```

使用快速傅里叶变换方法评估系数。现在我可以使用 co-effcient 作为快速傅立叶变换的输入将其更改为矩阵/向量形式：

所以：

```
x^2 + 1 = <1, 0, 1, 0> 
```

这是通过使用系数值来完成的，例如 1 = 1、0x^1 = 0、X^2 = 1 等等

现在我们到了我完全困惑的地方。我打算使用范德蒙德矩阵：[范德蒙德矩阵〜维基](http://en.wikipedia.org/wiki/Vandermonde_matrix)使用矩阵将这些值评估为 FFT 形式：

```
1 1 1 1  
1 i-1-i
1-1 1-i
1-i 1 i 
```

的输出

```
fft(1,0,1,0) 
```

是

```
(2,0,2,0) 
```

现在这就是我不太明白的步骤，我们如何使用该矩阵得到（2,0,2,0）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-24T14:13:08.373

首先，您的 Vandermonde 矩阵不正确。(4,3) 条目应该是 -1，而不是 1，因为第四行应该是 (-i) ⁰ , (-i) ¹ , (-i) ² , (-i) ³。特别注意

(-i)*(-i) = (-1) ² * i ² = i ² = -1。

通过此校正，结果来自将 Vandermonde 矩阵乘以列向量 (1,0,1,0)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-24T14:14:11.240

也许你可以在这里解释你的总体目标是什么。我从未听说过 FFT 用于评估多项式。它们用于多项式**相乘**或对信号进行卷积（等效任务），但除非多项式/信号具有大量项，否则我不会打扰。x ² + 1 不大。16 项并不大，甚至 64 或 256 项也可能通过简单的 O(N ² ) 技术更好地完成。

[离散傅立叶变换](http://en.wikipedia.org/wiki/Discrete_Fourier_transform#The_unitary_DFT)使用矩阵 M [ij] = ω ^(ij)其中 ω 是 1 的第 N 个复数根，列/行编号从 0 到 N-1。

快速傅立叶变换从不直接使用此矩阵，它们经过大量优化以使用分而治之的技术（[Cooley-Tukey 算法](http://www.librow.com/articles/article-10)）通过串联和并联的 2x2 DFT 阶段计算最终结果。

如果你把你的向量写成 [0,1,0,1] 而不是 [1,0,1,0]，我想你会看到如果你把它乘以你给出的矩阵，你会得到 [0, 2,0,2]。（虽然你有一个错误，它是

```
1 1 1 1  
1 i-1-i
1-1 1-1
1-i-1 i 
```

) 您正在使用的程序中必须有一些约定，它可以反转向量系数的顺序。

# c++ - 类声明大括号后的分号

> ID：785686
> 
> 赞同：88
> 
> 时间：2009-04-24T12:47:33.027
> 
> 标签：c++, class, oop, declaration

在 C++ 类中，为什么在右大括号后面加上分号？我经常忘记它并得到编译器错误，因此浪费了时间。对我来说似乎有些多余，这不太可能。人们真的会做这样的事情吗：

```
class MyClass
{
.
.
.
} MyInstance; 
```

我从结构和枚举的 C 兼容性的角度得到它，但由于类不是 C 语言的一部分，我猜想主要是为了保持相似声明结构之间的一致性。

我所寻找的更多的是与设计原理相关，而不是能够改变任何东西，尽管一个好的代码完成 IDE 可能会在编译之前捕获这一点。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2014-05-22T14:53:57.093

@MichaelHaren 提供的[链接](https://web.archive.org/web/20100906085102/http://cpptalk.net/confused-about-the-meaning-of-the-semicolon-vt11965.html)似乎提供了*根本原因*。分号（正如其他人指出的那样）是从 C 继承的。但这并不能解释为什么 C 首先使用它。讨论包括一个例子的宝石：

```
struct fred { int x; long y; }; 
main() 
{ 
  return 0; 
} 
```

除非另有声明，否则旧版本的 C 具有来自函数的隐式 int 返回类型。如果我们省略`;`结构定义末尾的 ，我们不仅定义了一个新的 type `fred`，而且还声明了`main()`它将返回一个`fred`. 即代码将被解析如下：

```
struct fred { int x; long y; } main()
{ 
  return 0; /* invalid return type, expected fred type */
} 
```

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2009-04-24T12:50:58.010

语言要求类型声明中右大括号后的分号。从 C 的最早版本开始就是这样。

是的，人们确实做了你刚才放在那里的声明。它对于在方法内部创建作用域类型很有用。

```
void Example() {
  struct { int x; } s1;
  s1.x = 42;

  struct ADifferentType { int x; };
} 
```

在这种情况下，我认为很清楚为什么需要分号。至于为什么在头文件中声明的更一般情况下需要它，我不确定。我的*猜测*是它是历史性的，并且这样做是为了使编写编译器更容易。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2009-04-24T12:51:40.130

我想这是因为类是声明，即使它们需要大括号进行分组。是的，有一个历史论点，因为在 C 中你可以做到

```
struct
{
  float x;
  float y;
} point; 
```

`class`您应该在 C++ 中能够做类似的事情，声明以相同的方式表现是有意义的。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2009-04-24T12:52:33.793

它的简称

```
class MyClass
{
.
.
.
};

// instance declaration
MyClass MyInstance;  // semicolon here 
```

类声明的花括号后面的分号实际上是多余的，但它是 C++ 的定义方式。变量声明后的分号总是需要的并且是有意义的。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-04-24T12:53:45.240

我不使用这样的声明

```
class MyClass
{
.
.
.
} MyInstance; 
```

但是在这种情况下，我可以理解为什么那里有分号。
因为它就像`int a;`- 变量声明。

可能是为了保持一致性，因为您可以省略 'MyInstance' 分号留在那里。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-04-24T14:30:27.943

出于兼容性原因，在 a 之后需要它`struct`，您希望这样：

```
struct MyStruct { ... };
class  MyClass  { ... }    //inconsistency 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-04-25T08:00:56.497

在 C/C++ 中；是语句终止符。所有语句都以 ; 结尾 避免歧义（并简化解析）。语法在这方面是一致的。即使一个类声明（或任何块）是多行长并且用 {} 分隔它仍然只是一个语句（{ } 是语句的一部分）因此需要以 ; 终止 （ ; 不是分隔符/定界符）

在你的例子中

```
class MyClass{...} MyInstance; 
```

是完整的陈述。可以在单个语句中定义声明类的多个实例

```
class MyClass{...} MyInstance1, MyInstance2; 
```

这与在单个语句中声明原始类型的多个实例完全一致：

```
int a, b, c; 
```

人们不经常看到这样的类和实例声明的原因是实例只能？是一个全局变量，除非它们是静态和/或普通旧数据结构，否则您并不经常需要全局对象。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-11-29T15:56:56.363

我们可以定义一个`class something {...}accum, trans;`where accum 和 trans 可以是类的两个对象`something`。因此，在类之后声明我们使用`semi-colon`的类的对象。

# ruby - 树顶和嵌套样式表规则中的 CSS/HSS 解析器

> ID：785714
> 
> 赞同：5
> 
> 时间：2009-04-24T12:56:15.267
> 
> 标签：ruby, treetop

我是 Treetop 的新手，正在尝试编写 CSS/HSS 解析器。HSS 通过嵌套样式、变量和一种混合功能增强了 CSS 的基本功能。

我非常接近 - 解析器可以处理 CSS - 但在实现样式*中*的样式时我失败了。例如：

```
#rule #one {
  #two {
    color: red;
  }
  color: blue;
} 
```

我拍了两张照片，一张处理空白，一张不处理。我不能完全得到工作。树顶文档有点稀疏，我真的觉得我错过了一些基本的东西。希望有人可以让我直截了当。

A：

```
 grammar Stylesheet

      rule stylesheet
        space* style*
      end

      rule style
        selectors space* '{' space* properties? space* '}' space*
      end

      rule properties
        property space* (';' space* property)* ';'?
      end

      rule property
        property_name space* [:] space* property_value
      end

      rule property_name
        [^:;}]+
      end

      rule property_value
        [^:;}]+
      end

      rule space
        [\t ]
      end

      rule selectors
        selector space* ([,] space* selector)*
      end

      rule selector
        element (space+ ![{] element)*
      end

      rule element
        class / id
      end

      rule id
        [#] [a-zA-Z-]+
      end

      rule class
       [.] [a-zA-Z-]+
      end
end 
```

乙：

```
grammar Stylesheet

  rule stylesheet
   style*
  end

  rule style
    selectors closure
  end

  rule closure
    '{' ( style / property )* '}'
  end

  rule property
    property_name ':' property_value ';'
  end

  rule property_name
    [^:}]+
    <PropertyNode>
  end

  rule property_value
    [^;]+
    <PropertyNode>
  end

  rule selectors
    selector ( !closure ',' selector )*
    <SelectorNode>
  end

  rule selector
    element ( space+ !closure element )*
    <SelectorNode>
  end

  rule element
    class / id
  end

  rule id
    ('#' [a-zA-Z]+)
  end

  rule class
    ('.' [a-zA-Z]+)
  end

  rule space
    [\t ]
  end

end 
```

线束代码：

```
require 'rubygems'
require 'treetop'

class PropertyNode < Treetop::Runtime::SyntaxNode
  def value
    "property:(#{text_value})"
  end
end

class SelectorNode < Treetop::Runtime::SyntaxNode
  def value
    "--> #{text_value}"
  end
end

Treetop.load('css')

parser = StylesheetParser.new
parser.consume_all_input = false

string = <<EOS
#hello-there .my-friend {
  font-family:Verdana;
  font-size:12px;
}
.my-friend, #is-cool {
  font: 12px Verdana;
  #he .likes-jam, #very-much {asaads:there;}
  hello: there;
}
EOS

root_node = parser.parse(string)

def print_node(node, output = [])
  output << node.value if node.respond_to?(:value)
  node.elements.each {|element| print_node(element, output)} if node.elements
  output
end

puts print_node(root_node).join("\n") if root_node

#puts parser.methods.sort.join(',')
puts parser.input
puts string[0...parser.failure_index] + '<--'
puts parser.failure_reason
puts parser.terminal_failures 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-10T01:52:43.857

我假设您遇到[左递归](http://en.wikipedia.org/wiki/Left_recursion)问题？如果是这样，请记住 TreeTop 产生[递归下降解析器](http://en.wikipedia.org/wiki/Recursive_descent_parser)，因此，您不能真正在语法中使用左递归。（尽管它的外观非常性感，但我仍然更喜欢 ocamlyacc/ocamllex 而非 TreeTop 的主要原因之一。）这意味着您需要从左递归形式转换为右递归形式。既然您无疑拥有《[龙之书》](http://en.wikipedia.org/wiki/Compilers:_Principles,_Techniques,_and_Tools)（对吗？），我将引导您查看涵盖该问题的第 4.3.3、4.3.4 和 4.4.1 节。就像典型的那样，这很难理解，但解析器并不是一无所获。还有一个不错的[左递归消除教程](http://www.antlr.org/wiki/display/ANTLR3/Left-Recursion+Removal)ANTLR 的人提出了这个问题。它有点特定于 ANTLR/ANTLRworks，但它比 Dragon Book 中的内容更容易理解。对于以前至少没有做过几次的人来说，这是其中一件根本没有意义的事情。

另外，小评论，如果您要使用 TreeTop，我建议您这样做：

```
def ws
  [\t ]*
end 
```

您不太可能需要匹配单个空格字符，而且几乎所有语法规则都需要它，因此将其命名为非常短的名称是有意义的。顺便说一下，单独的词法分析步骤有**一些优点。**这是其中之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-17T14:09:33.137

看起来有人打败了我：

[http://lesscss.org/](http://lesscss.org/)

尽管我注意到他们使用正则表达式和 eval() 来解析输入文件而不是解析器。

编辑：现在他们使用 TreeTop！就像有人为我做了所有的努力。

# c# - 如何从 ASP.NET 中的字符串中去除 HTML 标记？

> ID：785715
> 
> 赞同：128
> 
> 时间：2009-04-24T12:56:23.707
> 
> 标签：c#, asp.net, html, regex, string

使用 ASP.NET，如何可靠地从给定字符串中剥离 HTML 标记（即不使用正则表达式）？我正在寻找类似 PHP 的`strip_tags`.

### 例子：

`<ul><li>Hello</li></ul>`

### 输出：

“你好”

我试图不重新发明轮子，但到目前为止我还没有找到任何满足我需求的东西。

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2009-04-24T13:03:10.413

如果它只是从字符串中剥离*所有*HTML 标记，那么这也可以与正则表达式一起~~可靠地~~工作。代替：

```
<[^>]*(>|$) 
```

全局使用空字符串。之后不要忘记规范化字符串，替换：

```
[\s\r\n]+ 
```

用一个空格，并修剪结果。可选择将任何 HTML 字符实体替换回实际字符​​。

**注意**：

1.  有一个限制：HTML 和 XML 允许`>`在属性值中。遇到此类值时，此解决方案*将返回损坏的标记。*
2.  该解决方案在技术上是安全的，例如：结果将永远不会包含任何可用于执行跨站点脚本或破坏页面布局的内容。它只是不是很干净。
3.  与所有 HTML 和正则表达式一样：**如果您必须在所有情况下正确处理，**
    **请使用[适当的解析器。](http://html-agility-pack.net/?z=codeplex)**

* * *

## 回答 #2

> 赞同：77
> 
> 时间：2009-05-14T20:33:41.070

立即下载 HTMLAgilityPack！;) [下载链接](http://htmlagilitypack.codeplex.com/)

这允许您加载和解析 HTML。然后，您可以导航 DOM 并提取所有属性的内部值。说真的，它最多将花费您大约 10 行代码。它是目前最伟大的免费 .net 库之一。

这是一个示例：

```
 string htmlContents = new System.IO.StreamReader(resultsStream,Encoding.UTF8,true).ReadToEnd();

            HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
            doc.LoadHtml(htmlContents);
            if (doc == null) return null;

            string output = "";
            foreach (var node in doc.DocumentNode.ChildNodes)
            {
                output += node.InnerText;
            } 
```

* * *

## 回答 #3

> 赞同：68
> 
> 时间：2009-04-24T13:06:11.483

```
Regex.Replace(htmlText, "<.*?>", string.Empty); 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-03-02T18:22:50.317

```
protected string StripHtml(string Txt)
{
    return Regex.Replace(Txt, "<(.|\\n)*?>", string.Empty);
}    

Protected Function StripHtml(Txt as String) as String
    Return Regex.Replace(Txt, "<(.|\n)*?>", String.Empty)
End Function 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2009-11-05T17:16:51.853

我已经在 asp.net 论坛上发布了这个，它似乎仍然是最简单的解决方案之一。我不能保证它是最快或最有效的，但它非常可靠。在 .NET 中，您可以使用 HTML Web 控件对象本身。您真正需要做的就是将您的字符串插入到一个临时的 HTML 对象（例如 DIV）中，然后使用内置的“InnerText”来获取所有不包含在标签中的文本。下面是一个简单的 C# 示例：

```
 System.Web.UI.HtmlControls.HtmlGenericControl htmlDiv = new System.Web.UI.HtmlControls.HtmlGenericControl("div");
htmlDiv.InnerHtml = htmlString;
String plainText = htmlDiv.InnerText; 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2009-04-24T17:54:27.623

我在 C# 中编写了一个非常快的方法，它击败了正则表达式。它位于CodeProject 上[的一篇文章中。](http://www.codeproject.com/KB/MCMS/htmlTagStripper.aspx)

它的优点是，在更好的性能中，能够替换命名和编号的 HTML 实体（像`&amp;amp;`and `&203;`）和注释块替换等等。

请阅读[CodeProject 上的相关文章](http://www.codeproject.com/KB/MCMS/htmlTagStripper.aspx)。

谢谢你。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-11-05T11:55:38.763

对于那些不能使用 HtmlAgilityPack 的人，.NETs XML 阅读器是一种选择。这在格式良好的 HTML 上可能会失败，因此请始终添加带有 regx 的捕获作为备份。请注意，这并不快，但它确实为老式的调试步骤提供了一个很好的机会。

```
public static string RemoveHTMLTags(string content)
    {
        var cleaned = string.Empty;
        try
        {
            StringBuilder textOnly = new StringBuilder();
            using (var reader = XmlNodeReader.Create(new System.IO.StringReader("<xml>" + content + "</xml>")))
            {
                while (reader.Read())
                {
                    if (reader.NodeType == XmlNodeType.Text)
                        textOnly.Append(reader.ReadContentAsString());
                }
            }
            cleaned = textOnly.ToString();
        }
        catch
        {
            //A tag is probably not closed. fallback to regex string clean.
            string textOnly = string.Empty;
            Regex tagRemove = new Regex(@"<[^>]*(>|$)");
            Regex compressSpaces = new Regex(@"[\s\r\n]+");
            textOnly = tagRemove.Replace(content, string.Empty);
            textOnly = compressSpaces.Replace(textOnly, " ");
            cleaned = textOnly;
        }

        return cleaned;
    } 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2009-05-14T20:26:38.233

```
string result = Regex.Replace(anytext, @"<(.|\n)*?>", string.Empty); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-11-18T00:49:36.687

对于那些抱怨 Michael Tiptop 的解决方案不起作用的人，这里是 .Net4+ 的做法：

```
public static string StripTags(this string markup)
{
    try
    {
        StringReader sr = new StringReader(markup);
        XPathDocument doc;
        using (XmlReader xr = XmlReader.Create(sr,
                           new XmlReaderSettings()
                           {
                               ConformanceLevel = ConformanceLevel.Fragment
                               // for multiple roots
                           }))
        {
            doc = new XPathDocument(xr);
        }

        return doc.CreateNavigator().Value; // .Value is similar to .InnerText of  
                                           //  XmlDocument or JavaScript's innerText
    }
    catch
    {
        return string.Empty;
    }
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-05-27T21:16:04.890

我已经查看了此处建议的基于正则表达式的解决方案，除了最微不足道的情况外，它们并没有让我充满信心。一个属性中的尖括号就可以打破，更不用说来自野外的格式错误的HTML了。那么实体`&amp;`呢？如果要将 HTML 转换为纯文本，还需要对实体进行解码。

所以我提出下面的方法。

使用[HtmlAgilityPack](https://www.nuget.org/packages/HtmlAgilityPack)，此扩展方法有效地从 html 片段中剥离所有 HTML 标记。还解码 HTML 实体，如`&amp;`. 仅返回内部文本项，每个文本项之间有一个新行。

```
public static string RemoveHtmlTags(this string html)
{
        if (String.IsNullOrEmpty(html))
            return html;

        var doc = new HtmlAgilityPack.HtmlDocument();
        doc.LoadHtml(html);

        if (doc.DocumentNode == null || doc.DocumentNode.ChildNodes == null)
        {
            return WebUtility.HtmlDecode(html);
        }

        var sb = new StringBuilder();

        var i = 0;

        foreach (var node in doc.DocumentNode.ChildNodes)
        {
            var text = node.InnerText.SafeTrim();

            if (!String.IsNullOrEmpty(text))
            {
                sb.Append(text);

                if (i < doc.DocumentNode.ChildNodes.Count - 1)
                {
                    sb.Append(Environment.NewLine);
                }
            }

            i++;
        }

        var result = sb.ToString();

        return WebUtility.HtmlDecode(result);
}

public static string SafeTrim(this string str)
{
    if (str == null)
        return null;

    return str.Trim();
} 
```

如果你真的很认真，你也会想忽略某些 HTML 标记的内容（请想到`<script>`, `<style>`, `<svg>`, `<head>`, `<object>`！），因为它们可能不包含我们所追求的可读内容。你在那里做什么取决于你的情况和你想走多远，但是使用 HtmlAgilityPack 将选定的标签列入白名单或黑名单将非常简单。

如果您将内容呈现回 HTML 页面，请确保您了解 XSS 漏洞以及[如何防止它](https://www.owasp.org/index.php/XSS_(Cross_Site_Scripting)_Prevention_Cheat_Sheet#Why_Can.27t_I_Just_HTML_Entity_Encode_Untrusted_Data.3F)- 即始终对任何用户输入的文本进行编码，这些文本会被呈现回 HTML 页面（`>`变得`&gt;`等）。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-03-17T06:33:05.777

```
using System.Text.RegularExpressions;

string str = Regex.Replace(HttpUtility.HtmlDecode(HTMLString), "<.*?>", string.Empty); 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-11-21T16:04:49.363

您也可以使用[AngleSharp](https://anglesharp.github.io/)来执行此操作，它是 HtmlAgilityPack 的替代品（并不是说 HAP 不好）。从 HTML 源中获取文本比 HAP 更容易使用。

```
var parser = new HtmlParser();
var htmlDocument = parser.ParseDocument(source);
var text = htmlDocument.Body.Text(); 
```

您可以查看[关键功能](https://github.com/AngleSharp/AngleSharp#key-features)部分，它们证明它们比 HAP“更好”。我认为在大多数情况下，对于当前的问题来说，这可能是矫枉过正，但它仍然是一个有趣的选择。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-04-07T09:00:55.040

对于第二个参数，即保留一些标签，您可能需要一些这样的代码，使用 HTMLagilityPack：

```
public string StripTags(HtmlNode documentNode, IList keepTags)
{
    var result = new StringBuilder();
        foreach (var childNode in documentNode.ChildNodes)
        {
            if (childNode.Name.ToLower() == "#text")
            {
                result.Append(childNode.InnerText);
            }
            else
            {
                if (!keepTags.Contains(childNode.Name.ToLower()))
                {
                    result.Append(StripTags(childNode, keepTags));
                }
                else
                {
                    result.Append(childNode.OuterHtml.Replace(childNode.InnerHtml, StripTags(childNode, keepTags)));
                }
            }
        }
        return result.ToString();
    } 
```

此页面上的更多说明：http: [//nalgorithm.com/2015/11/20/strip-html-tags-of-an-html-in-c-strip_html-php-equivalent/](http://nalgorithm.com/2015/11/20/strip-html-tags-of-an-html-in-c-strip_html-php-equivalent/)

* * *

## 回答 #14

> 赞同：-4
> 
> 时间：2014-05-14T21:09:24.837

只需使用`string.StripHTML();`

# lucene - Lucene 如何计算多字段分数？

> ID：785719
> 
> 赞同：0
> 
> 时间：2009-04-24T12:57:10.070
> 
> 标签：lucene, information-retrieval

这是 Lucene 评分公式：

score(q,d) = coord(q,d) · queryNorm(q) · ∑ ( tf(t in d) · idf(t)2 · t.getBoost() · norm(t,d))

多场得分呢？

分数是直接求和或平均还是..？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-25T14:18:29.537

[您可以在相似度](http://lucene.apache.org/core/old_versioned_docs/versions/3_0_1/api/core/org/apache/lucene/search/Similarity.html)类中阅读评分的详细信息。在此等式中，当参数实际表示字段时，参考文档引用参数。因此，术语频率是文档中给定字段中术语的频率。这会自动处理多个字段的查询。

KenE 上面的回答是不正确的。（等式中没有 MAX 运算符。）字段上每个查询的分数加起来就是最终分数。对于查询 (name:bill OR gender:male)，结果是 (name:bill) 和 (gender:male) 的得分之和。通常，同时满足这两个标准的文档将得分更高（由于总和）并出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-24T16:04:26.327

这取决于操作。如果您正在执行 OR （姓名：比尔 OR 性别：男性），则需要两者中的最大值。如果你在做一个 AND，它会做一个总和。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T12:05:58.123

Shashikant Kore 正确地说每个字段的分数是相加的。然而，这仅在`queryNorm`和`coord`因素的贡献之前是正确的，这意味着最终分数不太可能相加。

每个分数都乘以[`queryNorm`](http://lucene.apache.org/core/old_versioned_docs/versions/3_0_1/api/core/org/apache/lucene/search/Similarity.html#formula_queryNorm)因子，该因子是按查询计算的，因此对于 、 和 中的每一个`(name:bill)`都`(gender:male)`不同`(name:bill OR gender:male)`。`queryNorm`组合查询的s也不仅仅是`queryNorm`两个单项查询的 s 之和。因此，仅当您将每个分数除以`queryNorm`该查询的因子时，分数才会相加。

该[`coord`](http://lucene.apache.org/core/old_versioned_docs/versions/3_0_1/api/core/org/apache/lucene/search/Similarity.html#formula_coord)因素也可能支付一部分：默认计分器将分数乘以匹配的查询词的比例。因此，您只能在考虑`queryNorm`所有术语匹配（或`coord`禁用）的位置之后依赖求和。

[`explain`](http://lucene.apache.org/core/old_versioned_docs/versions/3_5_0/api/core/org/apache/lucene/search/IndexSearcher.html#explain%28org.apache.lucene.search.Query,%20int%29)您可以使用Solr 中通过`debugQuery=true`参数提供的功能准确查看分数是如何计算的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-10T15:41:20.117

使用 lucene 的默认相似度得分，我使用了一个布尔查询并得到了最终公式如下：（对不起，它在`latex`）

```
score(q, d) = \sum_{f \in fields} \sum_{t \in query} idf(t, f) queryNorm(query) \times idf(t, f) tf(t, d, f) fieldNorm(f) 
```

# c# - Windows 服务错误：“试图读取或写入受保护的内存。这通常表明其他内存已损坏。”

> ID：785732
> 
> 赞同：2
> 
> 时间：2009-04-24T13:00:30.497
> 
> 标签：c#, windows, visual-studio-2008, service

我尝试在 VS 2008 IDE 中调试一个简单的 Windows 服务应用程序，但每次运行代码时，都会收到错误*消息“尝试读取或写入受保护的内存。这通常表明其他内存已损坏。”* . 此错误发生在以下`service.Stop()`行：

```
static class Program
{
    /// <summary>
    /// The main entry point for the application.
    /// </summary>
    static void Main(string[] args)
    {
        ServiceBase[] servicesToRun;
        servicesToRun = new ServiceBase[] 
        { 
            new Service1() 
        };

        if (Environment.UserInteractive)
        {
            Type type = typeof(ServiceBase);
            BindingFlags flags = BindingFlags.Instance | BindingFlags.NonPublic;
            MethodInfo method = type.GetMethod("OnStart", flags);

            foreach (ServiceBase service in servicesToRun)
            {
                method.Invoke(service, new object[] { args });
            }

            Console.WriteLine("Press any key to exit");
            Console.Read();

            foreach (ServiceBase service in servicesToRun)
            {
                service.Stop();//ERROR OCCURS HERE!
            }

        }
        else
        {
            ServiceBase.Run(servicesToRun);
        }            
    }
} 
```

下面是简单的windows服务类

```
public partial class Service1 : ServiceBase
{
    public Service1()
    {
        InitializeComponent();
    }

    protected override void OnStart(string[] args)
    {
    }

    protected override void OnStop()
    {
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-27T02:39:50.980

如果您想全面管理在外部启动 ServiceBase `ServiceBase.Run()`，那么您也应该使用相同的技巧来停止它：

```
MethodInfo stopMethod = type.GetMethod("OnStop", flags); 

foreach (ServiceBase service in servicesToRun) 
{
    stopMethod.Invoke(service, new object[] { args }); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-24T13:13:29.127

不调试时会发生这种情况吗？

另外，这是个例外吗？如果是这样，那么您应该发布完整的异常，包括内部异常和堆栈跟踪。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-24T13:10:41.473

你试过删除

```
Console.WriteLine("...");
Console.ReadLine(); 
```

我不知道这会对 Windows 服务产生什么影响，但尝试用

```
System.Threading.Thread.Sleep(5000); 
```

模拟服务启动和停止之间的 5 秒暂停。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-24T13:43:33.687

您是否尝试将以下代码行添加到覆盖的 OnStop() 方法中？

```
this.RequestAdditionalTime(4000); 
```

根据[Microsoft API 文档](http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicebase.requestadditionaltime.aspx "微软 API 文档")，它旨在由重写的 OnContinue、OnPause、OnStart 或 OnStop 方法调用，以请求额外的时间用于挂起的操作。

# language-agnostic - 当你有 A 并且做 A AND B 时你做什么的动词

> ID：785735
> 
> 赞同：3
> 
> 时间：2009-04-24T13:01:16.720
> 
> 标签：language-agnostic

好的，这似乎是一个愚蠢的问题，但它严重困扰着我。希望一些程序员同行有一个好词！

事情是，我正在制作一个 ExpressionBuilder 类来帮助我构建表达式以与 LinqToSQL 一起使用。而我的问题是关于在描述哪两种方法时我自己的措辞。在谈论它时，这对我来说也是一个普遍的问题。这是问题：

你有一个`Expression<Func<T, bool>>`, `A`。稍后你会得到另一个，`B`. 您现在要将它`B`与`A`使用`&&`/`AndAlso`或`||`/结合起来`OrElse`。所以例如像这样：

```
A = A && B; 
```

好的。那么，你刚刚在那里做了什么？你对 B 到 A 所做的事情的动词是什么？如果你想一系列这样的东西，比如`A = A && B && C && D && E && ...`，你可以说你然后“添加”`F`到那个系列。但这也不对，我觉得……

我提供的最“正确”的是您服用`B`并且您将其“和”到/与`A`. 你把`B`它“或”到/与`A`。但是“and”和“or”可以用作动词吗？这被认为可以吗？感觉英语非常糟糕......但在编程环境中可能没问题？或者？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-24T13:06:10.140

*   如果我在与数学家交谈，我可能会使用诸如“执行[逻辑合取](http://en.wikipedia.org/wiki/Logical_conjunction)”（或析[取](http://en.wikipedia.org/wiki/Logical_disjunction)）之类的术语。
*   如果我在和一位程序员同行交谈，我会直接使用“and”和“or”作为动词。
*   如果我和妈妈说话，我可能会找笔和纸开始画维恩图。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-24T13:05:39.470

在逻辑中 AND 是[连接运算符](http://en.wikipedia.org/wiki/Logical_conjunction)，因此您将 A 和 B 连接起来。 OR 是分离的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-24T13:05:17.680

我认为在这种情况下使用“and”作为动词是完全可以的。你和 A 和 B。由于 AND 和 OR 本身，这看起来很糟糕。但是，如果您使用 XOR 来谈论它，那么说您对某事进行了 XOR 处理听起来并没有那么糟糕，但您实际上是在说同样的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-24T13:02:40.307

化合物？

命名总是最难的事情之一。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-24T13:04:42.687

如果您要添加（例如数字或项目到集合/列表），那么我会说“**添加**”

如果您要连接（例如字符串），那么我会说“**追加**”

或者...如果您只是将另一个项目“添加”到列表中...“**推送**”也可以

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-24T13:06:46.317

的输出是否`A`馈入 的输入`B`？

如果是这样，我会在[功能组合的意义上使用“链”或“组合”](http://en.wikipedia.org/wiki/Function_composition)

否则，如果它们是正在组合的独立函数，那么可能将“cat”作为连接的简写。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-24T13:11:01.550

一般来说，这是功能的组合。由于这些函数都是谓词，因此您将它们与各种逻辑运算放在一起，因此具体组合将是合*取*，析*取*等。大学以来我忘记的所有基本集合论术语！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-24T13:12:40.780

**逻辑连接**怎么样？

-- [http://en.wikipedia.org/wiki/Logical_connective](http://en.wikipedia.org/wiki/Logical_connective)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-24T14:07:04.533

在解释它时，我会使用 Set Notation (Venn Diagrams)。

*   AND：A与B***相交***
*   或：A与 B***联合***

[http://www.purplemath.com/modules/venndiag2.htm](http://www.purplemath.com/modules/venndiag2.htm)

# c# - 从 WinForms WebBrowser 控件获取页面高度

> ID：785737
> 
> 赞同：9
> 
> 时间：2009-04-24T13:01:59.277
> 
> 标签：c#, webbrowser-control

最近几天我一直在尝试从`WebBrowser`控件的 Document 属性中获取网页的高度。

这是我最近的尝试。

```
HtmlElementCollection children = webBrowser.Document.All;
int maxOffset = 0;

foreach (HtmlElement child in children) {
    int bottom = 0;
    bottom = child.OffsetRectangle.Bottom;
    if (bottom > maxOffset) {
        maxOffset = bottom;
        pageHeight = maxOffset;
    }
} 
```

我试图通过找到页面中最低元素的偏移底部来计算页面的最大高度。

问题是在大多数情况下，这会超出页面的实际长度约 500 像素。

有人有什么想法吗？我无法相信仅仅获得一页的高度是多么困难！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2010-08-26T20:01:40.820

这对我有用：

```
webBrowser.Document.Body.ScrollRectangle.Height 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T14:19:49.653

找到**BODY**标签并获取该元素的**OffsetRectangle.Bottom**。这将为您提供页面的高度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-23T08:53:41.433

`webBrowser.Document.Body.ScrollRectangle.Height` 给了我一个剪纸页。我知道为什么。

我是这样做的。

循环元素选择最大高度/宽度。我在 documentCompleted 事件之后使用了这个

```
 //fit to content  -get size **after documentCompleted**
    var wbAll = webBrowser.Document.All.Cast<HtmlElement>();
    var maxWidth = wbAll.Max(x => Math.Max(x.ClientRectangle.Width, x.ScrollRectangle.Width));
    var maxHeight =wbAll.Max(x => Math.Max(x.ClientRectangle.Height, x.ScrollRectangle.Height));

    webBrowser.Height = maxHeight;
    webBrowser.Width = maxWidth; 
```

# wcf - WCF 附加代理类

> ID：785745
> 
> 赞同：1
> 
> 时间：2009-04-24T13:03:24.843
> 
> 标签：wcf, class, inheritance, proxy

我有一个具有以下服务合同的 WCF Web 服务

```
[ServiceContract(Namespace = "http://example.org")]
public interface IEquinoxWebservice
{
    [OperationContract]
    Guid Init();

    [OperationContract]
    List<Message> Dequeue(Guid instanceId);

    [OperationContract]
    void Enqueue(Guid instanceId, Message message);

    [OperationContract]
    void Dispose(string instanceId);
} 
```

消息类是一个抽象类，由一堆具体的消息类实现。

我想让所有具体的消息类在生成的客户端代理中可用。不仅仅是消息类。

有什么方法可以让它们作为 web 服务中的类型使用，以便标准 Visual Studio 代理生成器创建它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-24T13:06:43.790

您需要指定这些类型。请参阅[数据协定已知类型](http://msdn.microsoft.com/en-us/library/ms730167.aspx)。

# windows - Windows 布局外观

> ID：785750
> 
> 赞同：3
> 
> 时间：2009-04-24T13:04:46.057
> 
> 标签：windows, user-interface

我正在寻找详细说明元素之间的理想差距等的 Windows 外观设计指南（[但不是 Windows Vista 的设计指南！](http://msdn.microsoft.com/en-us/library/aa511258.aspx)）。几年前我在 MSDN 上找到了该文档，但现在我找不到它.

我开始了一项新工作，这里发生的事情和以前一样：多年来，几个不同的人编写并添加了一个程序，这些人对 UI 有不同的想法。虽然我有一个周五下午的机会，但我想我会整理一下布局

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-24T13:10:03.767

我想我在这里找到了它：http: [//www.microsoft.com/whdc/System/platform/pcdesign/XPguidelines.mspx](http://www.microsoft.com/whdc/System/platform/pcdesign/XPguidelines.mspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-06-18T00:44:41.010

它的新家是：

*   [MSDN 库](https://msdn.microsoft.com/en-us/library/ms123401.aspx)
    *   [视窗开发](https://web.archive.org/web/20180410050730/https://msdn.microsoft.com/en-us/library/ee663300(v=vs.85).aspx)
        *   [Windows 应用程序 UI 开发](https://docs.microsoft.com/en-us/windows/win32/windows-application-ui-development)
            *   [Windows 用户体验交互指南](https://developer.microsoft.com/en-us/windows/desktop)
                *   [指导方针](https://web.archive.org/web/20161014152858/https://msdn.microsoft.com/en-us/library/aa511440.aspx)
                    *   [视觉效果](https://web.archive.org/web/20140712145913/http://msdn.microsoft.com/en-us/library/aa511275.aspx)
                        *   [布局](https://web.archive.org/web/20160313220227/https://msdn.microsoft.com/en-us/library/aa511279.aspx)→[推荐尺寸和间距](https://web.archive.org/web/20121109202147/http://msdn.microsoft.com/en-us/library/aa511279#sizingspacing)

例如：

> ## 控制大小
> 
> 下表列出了常见 UI 元素（9 pt. Segoe UI at 96 dpi）的推荐尺寸（宽度 x 高度，或高度，如果是单个数字）。对于将被本地化的任何文本（但不是数字），基于英文最长项目的宽度为本地化增加 30%（对于较短的文本最多增加 200%）。
> 
> **命令按钮**[（来源：][[microsoft.com](http://i.msdn.microsoft.com/dynimg/IC108660.png)][）]
> [![](https://i.stack.imgur.com/ELKvV.png)](https://i.stack.imgur.com/ELKvV.png)
> 
> 对话单位：50 x 14
> 相对像素：75 x 23
> 
> ## 间距
> 
> 下表列出了常见 UI 元素之间的建议间距（对于 9 pt. Segoe UI，96 dpi）。
> 
> **对话框边距**[（来源：][[microsoft.com](http://i.msdn.microsoft.com/dynimg/IC133661.jpg)][）]
> [![](https://i.stack.imgur.com/RSrxg.jpg)](https://i.stack.imgur.com/RSrxg.jpg)
> 
> 对话单位：各边 7 个
> 相对像素：各边 11 个
> 
> **控件旁边的文本标签**[（来源：][[microsoft.com](http://i.msdn.microsoft.com/dynimg/IC71497.jpg)][）]
> [![](https://i.stack.imgur.com/vSHJK.jpg)](https://i.stack.imgur.com/vSHJK.jpg)
> 
> 对话框单位：从控件顶部向下 3
> 相对像素：从控件顶部向下 5

* * *

还有解释什么是对话框单元的页面：[布局，设备独立布局](http://msdn.microsoft.com/en-us/library/bb847924)：

![在此处输入图像描述](https://i.stack.imgur.com/FrFa2.png)

# java - 检测新的网络连接（linux-server）及其在java中的状态

> ID：785752
> 
> 赞同：2
> 
> 时间：2009-04-24T13:05:15.447
> 
> 标签：java, linux, networking

java有什么方法可以检测到我刚刚插入有线网络并监控它的带宽？（我正在使用 linux，如果这很重要的话）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-24T13:11:41.440

为了简单起见并且不使用本机代码，您可以尝试使用[java.net.NetworkInterface](http://java.sun.com/javase/6/docs/api/java/net/NetworkInterface.html)进行轮询，因此每 X 秒触发一次网络接口枚举以查看是否有新接口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-25T17:59:48.617

你可以运行程序

```
/sbin/ip monitor 
```

并使用管道或其他任何东西监视其输出。

它会告诉你什么时候

*   配置了新的网络接口
*   由于网络准备好/未准备好，网络接口会上下波动（这通常通过检测以太网运营商或 wifi 接入点来工作）

输出有点混乱，但应该是可解析的。

# oracle - ORA-08177: 无法序列化此事务的访问

> ID：785765
> 
> 赞同：18
> 
> 时间：2009-04-24T13:07:19.827
> 
> 标签：oracle, exception, ora-08177

我有一个使用 ADO.NET 的非常简单的代码，它会引发 ORA-08177 异常。我不确定这有什么问题。我在安装了 oracle 32 位客户端的 windows vista 机器上尝试这个。我的 Visual Studio 编译选项设置为 x86 平台。

```
Dim connection As OracleConnection = Nothing
Dim transaction As OracleTransaction = Nothing

Try
    connection = New OracleConnection("Data Source=ora10;User Id=userid;Password=passwd;")
    connection.Open()

    transaction = connection.BeginTransaction(IsolationLevel.Serializable)

    Dim inputStream As New System.IO.FileStream("Dummy.xls", IO.FileMode.Open)
    Dim fileLength As Integer = CType(inputStream.Length, Integer)
    Dim input(fileLength) As Byte

    Try
        inputStream.Read(input, 0, fileLength)
    Finally
        If inputStream IsNot Nothing Then inputStream.Close()
    End Try

    Dim deleteSql As String = "DELETE FROM TABLE1 WHERE Version = 'v1' "

    Dim cmd As New OracleCommand(deleteSql, connection, transaction)
    cmd.ExecuteNonQuery()

    Dim insertQuery As String = "INSERT INTO TABLE1 (VERSION, DATA) VALUES (:VERSION, :DATA) "
    Dim insertCmd As OracleCommand = New OracleCommand(insertQuery, connection, transaction)
    insertCmd.Parameters.Clear()
    insertCmd.CommandType = Data.CommandType.Text
    insertCmd.Parameters.AddWithValue(":VERSION", "v1")
    insertCmd.Parameters.AddWithValue(":DATA", input)

    insertCmd.ExecuteNonQuery()
    transaction.Commit()

Catch
    If transaction IsNot Nothing Then transaction.Rollback()
    Throw
Finally
    If transaction IsNot Nothing Then transaction.Dispose()
    If connection IsNot Nothing AndAlso connection.State <> ConnectionState.Closed Then connection.Close()
End Try 
```

需要注意的重要事项：（我不确定它们是否已连接）但如果我从我的机器上卸载最新的 Windows 更新，我不会遇到这个问题。

有没有人遇到过这个问题或对这里发生的事情有任何线索？

编辑：-

我取得了一些进展，我发现只有当我们有问题的 blob 列类型时才会出现这个问题。对于简单的列，它工作正常。

其他细节（不确定这是否有影响）

我正在研究 64 位 windows vista 商务机。我已经为 windows vista 安装了 32 位 oracle 客户端（因为 64 位 oracle 客户端在 vista 上不起作用）。我正在 Visual Studio 中为 x86（32 位环境）编译我的项目。这是一个控制台应用程序，我知道此时没有其他人在访问数据库。所以不能有多个交易。

如果我卸载最新的 Windows 更新，我看不到这个问题。（KB963027、KB967190、KB959426、KB960225、KB960803、KB952004、KB956572、KB958687、KB958690、KB958481、KB958483、KB943729）

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-04-24T13:11:42.157

您正在使用一个可序列化的事务，它等待其他一些事务将同一个表锁定到`ROLLBACK`.

如果此其他事务不回滚而是提交，您将收到此错误。

场景似乎如下：

1.  `Alice`打开她调用的浏览器会话`DELETE FROM TABLE1 WHERE Version = 'v1'`

    *   `Bob`打开他的会话，该会话在完成`DELETE FROM TABLE1 WHERE Version = 'v1'`之后`Alice`但在她提交之前调用。

    `Bob`的事务等待，因为`Alice`锁定了行`Version = 'v1'`

    *   `Alice`提交她的交易

    *   `Bob`的交易失败`Cannot serialize access`

要解决此问题，请设置`TRANSACTION ISOLATION LEVEL`为`READ COMMITTED`：

```
transaction = connection.BeginTransaction(IsolationLevel.ReadCommitted) 
```

在这种情况下，`Bob`' 的查询将在`Alice`提交她的更改后重新发出，就好像`Bob`' 的事务是在 ' 的事务提交之后开始`Alice`的。

**更新**

你能张贴你的连接痕迹吗？

为此，请在连接后立即发出此命令：

```
(New OracleCommand("ALTER SESSION SET SQL_TRACE=TRUE", connection, transaction)).ExecuteNonQuery(); 
```

，然后查找`$ORACLE_HOME\admin\udump`新`*.trc`文件

# php - 如何延迟发送电子邮件？单击按钮立即发送，但要等到下午 6 点，直到电子邮件实际发送

> ID：785766
> 
> 赞同：0
> 
> 时间：2009-04-24T13:07:23.790
> 
> 标签：php, email, configuration, smtp, exchange-server

我有一个 php 脚本，它进行一些处理（创建汇款通知 PDF、自开票、Sage CSV 文件等），最后输出一个带有表单的屏幕，其中的名称和电子邮件地址付费的人出现。用户通过单击复选框选择名称，然后有一个发送按钮，该按钮发送附有汇款通知和自费发票的电子邮件。这一切都很好，但他们现在决定，当他们单击“发送”按钮时，他们不希望立即发送电子邮件，而是在下午 6 点发送。

是否可以在 SMTP 标头中设置消息的发送时间？是否可以配置 MS Exchange 服务器，以便将来自特定发件人的电子邮件保留到发送前的特定时间？IT支持部门 声称在过去拨号连接的日子里，当晚上发送东西更便宜时，它曾经是可能的......但是这个功能被删除了。这是真的？我不知道手头的任务有多难。这看起来很简单，我想这确实是 IT 支持人员要处理的任务。但也许我错了？

如果这不能在 Exchange 服务器端设置，我该如何实现所请求的功能？而且，不，这不是[这个问题](https://stackoverflow.com/questions/556667/delaying-the-sending-of-emails-in-c)的完全重复。我看了看，但它似乎没有回答我的问题。非常感谢任何帮助！

**编辑**

* * *

Apache 在 MS Windows Server 2003 上运行。数据库是 Oracle 10g。不会设置 CRON。电子邮件队列表也需要存储所有附件。我想不惜一切代价避免这样做。无法在标题中指定调度时间？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-24T13:09:48.713

您可以将这些电子邮件保存到数据库中。然后创建一个每隔几分钟执行一次的 cronjob PHP 文件，以检查“队列”数据库中是否有要发送的电子邮件。

[这是有关此类内容的教程](http://www.mikesparr.com/2007/08/29/creating-and-email-queue-using-sql-php-shell-and-cron/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-24T15:31:22.087

Windows（至少是非服务器版本）具有类似于 CRON 的“计划任务”控制面板项。简单地看一下，您可能可以编写一个“现在”发送邮件的 PHP 脚本，但是在您想使用计划任务发送邮件的任何时间使用 CLI 运行它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-13T20:14:23.190

其实你可以这样做。如果您使用的是 Exchange 2003 服务器，则可以设置不同的 SMTP 连接器。在交付选项下，有一种方法可以将其更改为始终发送您选择的任何时间表。

这是一个很好的设置教程。 [链接文本](http://www.msexchange.org/tutorials/Configuring-SMTP-Connector.html)

您需要做的一件事是，当您创建新的 SMTP 连接器时，将其设置为使用不同的端口进行侦听。这样您就可以发送到那个而不是标准连接器。

# c# - c# 数组函数参数传递一维

> ID：785767
> 
> 赞同：1
> 
> 时间：2009-04-24T13:08:51.633
> 
> 标签：c#, .net, arrays, .net-3.5

假设我有这个功能：

```
void int Calculate(double[] array) {} 
```

在我的主要工作中，我得到了这个数组：

```
double[,] myArray = new double[3,3]; 
```

如何调用 Calculate(...) ？

我尝试（那是不编译）：

```
double[] mySingleArray = myArray[0]; 
```

我要避免的是不必要的循环（for）。

我声明了一个常规数组，但如果锯齿状数组或任何其他类型的数组效果更好，那对我来说没问题。

我使用 c# 3.5

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-24T13:16:22.130

首先，让我们像这样声明您的 Calculate() 方法：

```
int Calculate(IEnumerable<double> doubles) 
```

不用担心，您仍然可以将数组传递给该代码。您可能还需要`IList<double>`IEnumerable，但 10 次中有 9 次就足够了。主要的是，这将让我们使用`yield`关键字以有效的方式分割您的数组：

```
public static IEnumerable<T> Slice(this T[,] values)
{
    return Slice(values, 0, 0);
}

public static IEnumerable<T> Slice(this T[,] values, int index)
{
    return Slice(values, 0, index);
}

public static IEnumerable<T> Slice(this T[,] values, int dimension, int index)
{
    int length = values.GetUpperBound(dimension);
    int[] point = new int[values.Rank];
    point[dimension] = index;
    dimension = 1 - dimension;// only works for rank == 2
    for (int i = 0; i < length; i++)
    {
        point[dimension] = i;
         yield return (T)values.GetValue(point);
    }
} 
```

它仍然需要一些工作，因为它仅适用于 2 级数组，但对于您发布的示例应该没问题。

现在你可以像这样调用你的计算函数：

```
Calculate(myArray.Slice(0)); 
```

请注意，由于 IEnumerable 和 yield 语句的工作方式，我发布的代码中的 for 循环基本上是免费的。它不会运行，直到您实际迭代计算方法中的项目，甚至以“即时”方式运行，以便整个算法保持 O(n)。

当您分享您的计算方法正在做什么时，它会变得更加有趣。您也许可以将其表示为简单的 Aggregate + lambda 表达式。例如，假设您的计算方法返回的项目数 > 5：

```
myArray.Slice(0).Count(x => x > 5); 
```

或者说它总结了所有项目：

```
myArray.Slice().Sum(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-24T13:10:54.437

锯齿状数组按您想要的方式工作：

```
double[][] jaggedArray = new double[][100];
for (int i = 0; i < jaggedArray.Length; ++i)
    jaggedArray[i] = new double[100];

myFunction(jaggedArray[0]); 
```

通过这种方式，您可以为每个数组设置不同的大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-24T13:12:01.500

锯齿状数组会让您拆分第一个数组！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-24T16:15:14.697

上面给出的 Slice() 方法将从您的数组中获取一行，这似乎与您的问题中给出的示例相匹配。

但是，如果你想要一个包含矩形数组中**所有**元素的一维数组，你可以使用类似这样的东西，它也是 O(n)。

```
public static T[] Flatten<T>(this T[,] array) 
  where T : struct
{      
  int size = Marshal.SizeOf(array[0, 0]);
  int totalSize = Buffer.ByteLength(array);
  T[] result = new T[totalSize / size];
  Buffer.BlockCopy(array, 0, result, 0, totalSize);
  return result;      
} 
```

# tomcat - tomcat 自动启动 servlet

> ID：785769
> 
> 赞同：10
> 
> 时间：2009-04-24T13:09:23.690
> 
> 标签：tomcat

我有一个标准的 GWT 应用程序，它当然在后端使用 Java servlet。此 servlet 部署在 Tomcat 和 Windows Server 上。

我知道这违反了规则/建议，但是我在这个 servlet 中有一个线程在 servlet 初始化时启动（servlet 的“init”方法）。线程是一种调度器，其目的是在特定时间执行不同的数据库任务，完全独立于 GWT 应用程序/接口本身。

我需要的是在部署战争后立即调用 servlet 的“init”方法。现在我一直在做的是，每次升级应用程序时，我都会将战争放到正确的目录中，然后我必须“登录”到应用程序 GWT 应用程序，以便调用它的“init”方法。我希望在更新战争后立即调用 servlet 的 init 方法，这样我就不必登录到 GWT 应用程序来执行此操作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-04-24T13:16:44.297

您可以使用[servlet 上下文侦听器](http://docs.oracle.com/javaee/6/api/?javax/servlet/ServletContextListener.html)。更具体地说，您可以在 contextInitialized 方法中启动线程：

```
import javax.servlet.ServletContextEvent;
import javax.servlet.ServletContextListener;

public class MyListener implements ServletContextListener {

    public void contextInitialized(ServletContextEvent sce) {
         // start the thread
    }

    public void contextDestroyed(ServletContextEvent sce) {
         // stop the thread
    }
} 
```

然后加：

```
<listener>
    <description>ServletContextListener</description>
    <listener-class>MyListener</listener-class>
</listener> 
```

在你的 web.xml

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2011-09-29T12:26:24.777

使用 WEB-INF/web.xml 中的 load-on-startup。在 Netbeans 中，它位于 Servlets 选项卡的“启动顺序”项中。

```
<servlet>
    <servlet-name>Hl7Servlet</servlet-name>
    <servlet-class>nl.vandenzen.Hl7Servlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-24T13:40:11.150

另一种选择是使用[Quartz Scheduler。](http://www.quartz-scheduler.org/)

> Quartz 是一个功能齐全的开源作业调度系统，可以与几乎任何 J2EE 或 J2SE 应用程序集成或一起使用——从最小的独立应用程序到最大的电子商务系统。Quartz 可用于创建简单或复杂的调度，以执行数十、数百甚至数万个作业；任务被定义为标准 Java 组件或 EJB 的作业。Quartz Scheduler 包括许多企业级功能，例如 JTA 事务和集群。

它非常易于使用，存在的全部原因是安排作业。这听起来像你想要做的。

# c# - 在饼图上以百分比值显示数据。（使用 RDLC）

> ID：785770
> 
> 赞同：1
> 
> 时间：2009-04-24T13:09:33.080
> 
> 标签：c#, rdlc

我正在使用 RDLC 报告在我的 C#.net 应用程序中显示饼图。我需要在饼图上以百分比形式显示值。应该使用什么表达式来显示所需的数据？请帮我...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2010-11-07T06:44:46.153

右键单击图表的标签，在常规选项卡中选择 #PERCENT 作为标签数据

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T16:27:08.430

To put the % value on each pie chart slice do this (as shown [here](http://technet.microsoft.com/en-us/library/dd239373%28v=sql.105%29.aspx)):

1.  On the design surface, right-click on the pie and select Show Data Labels. The data labels should appear within each slice on the pie chart.
2.  On the design surface, right-click on the labels and select Series Label Properties. The Series Label Properties dialog box appears.
3.  Type #PERCENT for the Label data option.

Result:

![enter image description here](https://i.stack.imgur.com/H6zoZ.png)

If you are dealing with mutliple data fields feeding your pie, check out [this](http://www.morrenth.com/report-designer-rdlc-pie-chart-data-labels-for-multiple-data-fields.aspx).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-26T19:50:20.590

在您右键单击饼图之前先填充数据字段和系列字段，否则您将看不到显示数据标签。

# asp.net-mvc - ASP.NET MVC 开发工具

> ID：785772
> 
> 赞同：2
> 
> 时间：2009-04-24T13:10:01.350
> 
> 标签：asp.net-mvc, visual-studio, expression-blend

继我之前的问题之后，如果我开始学习 asp.net MVC，Visual Studio Web Developer 的速成版是否足够，或者我应该考虑昂贵的 Visual Studio 完整版。我可能会遇到这种快速版本的限制是什么？还是我更好地使用表达工具？（或者这是我以后可以进步的东西。）任何人有什么建议吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-24T13:22:57.357

Re-sharper（每个人都喜欢添加 ;-)）需要完整版的 VS。在我看来，仅出于这个原因就值得。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-24T13:14:47.873

想到的一件事是快速版本中缺少 SQL 工具，例如服务器资源管理器 ( [http://msdn.microsoft.com/en-us/library/cd2cz7yy.aspx](http://msdn.microsoft.com/en-us/library/cd2cz7yy.aspx) )。我不确定您是否可以在没有它的情况下有效地执行 LINQ to SQL 或 LINQ to Entities。

在这点上，我强烈建议使用完整版的 Visual Studio 2008 Professional。

我知道，由于您使用的是 express 版本，因此您有资格获得 Visual Studio 2008 Professional 的升级价格。

附带说明：Expression 产品更适合设计人员，而不是编码人员。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-24T13:25:33.370

Express 绝对是一个好的开始，如果您只是在学习，您不应该过多地错过完整版中的一些功能。对于 SQL 管理，Microsoft 现在也提供 SQL Management Studio Express（当然还有 SQL Server Express）。

当我使用 Express 而不是完整版本时，我个人错过的主要事情是：

*   **类图**- 当您开始一个项目并想要绘制出您想要创建的类时，这些非常有用。然而，对于一个简单的 MVC 应用程序，可能不会对它们有很大的需求。
*   **附加到进程进行调试**- Express 版本包括完整的调试器，但您不能附加到已经运行的进程。如果您使用 NUnit 并且遇到问题并想要调试，这将特别有用。有一些解决方法，但它们不是特别优雅或简单。
*   **集成测试**——实际上我很惊讶它没有包括在内——微软应该意识到应该鼓励新开发人员学习像单元测试这样的良好习惯。

Expression 套件的目标用户是设计人员，而不是开发人员。我认为它不适合您正在寻找的东西。

SharpDevelop 是另一个免费选项。如果您发现 Express 缺乏，那很好，但我个人认为体验并不“流畅”，而且在与 Web 开发相关的功能方面特别缺乏。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-25T10:15:46.690

Visual Studio 的“完整版”不是免费的！如果你开始学习 asp.net MVC，你应该先尝试[Visual Web Developer](http://www.microsoft.com/express/vwd/)。是的，**它不支持集成测试**，但您可以使用任何 3d 方工具（[xUnit](http://www.codeplex.com/xunit)是最好的）进行测试。

# c# - 从 WebBrowser 控件 C# 获取滚动值

> ID：785792
> 
> 赞同：5
> 
> 时间：2009-04-24T13:13:33.180
> 
> 标签：c#, webbrowser-control, scrollbar

我试图在 WebBrowser 控件中获取网页的 Y 滚动索引，但我无法访问内置滚动条的值。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-26T19:45:26.233

对于标准模式下的 IE（如您所说，使用 doctype）`scrollTop`是`<html>`元素的属性，而不是`<body>`：

```
HtmlDocument htmlDoc = this.webBrowser1.Document;
int scrollTop = htmlDoc.GetElementsByTagName("HTML")[0].ScrollTop; 
```

（如果有人知道的话，一个更好的方法来获得`<html>`元素会很好。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-12T04:55:00.127

您是否试图定位一个 HTML 元素以将其显示出来？如果那是你之后的事情，你可以做到这一点......

htmlDoc.GetElementById("tag_id_string_goes_here").ScrollIntoView(true);

true 将它与元素的顶部对齐，false 与元素的底部对齐。您还可以使用 ScrollRectangle 来获取可滚动区域的尺寸。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-03T13:23:59.700

```
WebBrowser1.Document.Body.ScrollTop;
WebBrowser1.Document.Body.ScrollRectangle.Height; 
```

# c# - C# 中的日期时间格式

> ID：785795
> 
> 赞同：8
> 
> 时间：2009-04-24T13:14:23.680
> 
> 标签：c#, wpf, .net-3.5

我遇到了 C# 的奇怪行为。它像这样的东西..

```
var date = DateTime.Now.ToString("MM/dd/yyyy"); 
```

我期待成为

```
04/24/2009 
```

但实际上它的回归

```
04-24-2009 
```

我的操作系统文化是 en-GB，我使用的是 .Net 3.5 和 WPF

请有任何解决方案... ???

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-04-24T13:17:59.550

根据自定义日期和时间格式字符串的 MSDN 文档，`/`是一个占位符：

> 表示当前 DateTimeFormatInfo.DateSeparator 属性中定义的日期分隔符。此分隔符用于区分年、月和日。

如果你想要一个明确的斜线，使用 "MM'/'dd'/'yyyy"：

```
DateTime.Now.ToString("MM'/'dd'/'yyyy") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-24T13:17:49.067

它使用在区域设置中设置的分隔符，因为“/”是分隔符的替代字符。

您可以使用不同的分隔符创建自己的 DateTimeFormat 实例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-24T13:18:06.320

尝试在日期本身上调用 ToString 并传递 CultureInfo.InvariantCulture 对象：

```
string date = yourDate.ToString("MM/dd/yyyy", CultureInfo.InvariantCulture)); 
```

# asp.net-mvc - 在 URL 中添加查询字符串参数

> ID：785797
> 
> 赞同：0
> 
> 时间：2009-04-24T13:15:36.687
> 
> 标签：asp.net-mvc

我正在使用 asp.net mvc。

在这里，我不是在询问控制器逻辑，而是在查看页面。而且我没有弄乱 url 路由的默认设置。

我有一个像 /controller/action?CID=2 这样的 url 的视图

在这个视图中，我想放置具有上述结构但具有不同控制器的链接。

关键是获取当前 url 参数并使用相同的 Querystring 参数放置超链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-24T13:20:33.837

```
<%=Html.ActionLink("linkText", "actionName", 
    "controllerName", new {CID = Request.QueryString["CID"]}, null) %> 
```

你的意思是这样的吗？

# c# - 如何将 GridView.DataSource 导出到数据表或数据集？

> ID：785799
> 
> 赞同：43
> 
> 时间：2009-04-24T13:16:06.327
> 
> 标签：c#, asp.net, gridview

如何导出`GridView.DataSource`到数据表或数据集？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2009-04-24T13:21:04.113

假设您的 DataSource 是 DataTable 类型，您可以这样做：

```
myGridView.DataSource as DataTable 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2010-12-15T01:25:34.367

你应该先转换`DataSource`，`BindingSource`看例子

```
BindingSource bs = (BindingSource)dgrid.DataSource; // Se convierte el DataSource 
DataTable tCxC = (DataTable) bs.DataSource; 
```

有了你的数据`tCxC`可以做任何事情。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2009-04-24T13:32:22.170

我个人会选择：

```
DataTable tbl = Gridview1.DataSource as DataTable; 
```

这将允许您测试 null，因为这会导致 DataTable 对象或 null。如果 DataSource 实际上是 DataSet 甚至某种集合，则使用 (DataTable)Gridview1.DataSource 将其转换为 DataTable 会导致崩溃错误。

支持文档：[关于“as”的 MSDN 文档](http://msdn.microsoft.com/en-us/library/cscsdfbt(VS.71).aspx)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2011-05-24T18:57:46.163

安布，

我和你有同样的问题，这是我用来解决问题的代码。虽然，我没有出于我的目的使用页脚行部分，但我确实将它包含在此代码中。

```
 DataTable dt = new DataTable();

    // add the columns to the datatable            
    if (GridView1.HeaderRow != null)
    {

        for (int i = 0; i < GridView1.HeaderRow.Cells.Count; i++)
        {
            dt.Columns.Add(GridView1.HeaderRow.Cells[i].Text);
        }
    }

    //  add each of the data rows to the table
    foreach (GridViewRow row in GridView1.Rows)
    {
        DataRow dr;
        dr = dt.NewRow();

        for (int i = 0; i < row.Cells.Count; i++)
        {
            dr[i] = row.Cells[i].Text.Replace("&nbsp;","");
        }
        dt.Rows.Add(dr);
    }

    //  add the footer row to the table
    if (GridView1.FooterRow != null)
    {
        DataRow dr;
        dr = dt.NewRow();

        for (int i = 0; i < GridView1.FooterRow.Cells.Count; i++)
        {
            dr[i] = GridView1.FooterRow.Cells[i].Text.Replace("&nbsp;","");
        }
        dt.Rows.Add(dr);
    } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-07-20T00:41:00.993

如果你`gridview.bind()`在：

```
if(!IsPostBack)

{

//your gridview bind code here...

} 
```

然后您可以使用`DataTable dt = Gridview1.DataSource as DataTable;`in 函数来检索数据表。

但是当我单击按钮并记录到 Microsoft 文档时，我将数据表绑定到 gridview：

> HTTP 是一种无状态协议。这意味着 Web 服务器将页面的每个 HTTP 请求视为一个独立的请求。服务器不保留先前请求期间使用的变量值的知识。

如果您有相同的条件，那么我会建议您使用`Session`来保持该值。

```
Session["oldData"]=Gridview1.DataSource; 
```

之后，您可以在再次回发页面时调用该值。

```
DataTable dt=(DataTable)Session["oldData"]; 
```

参考资料： [https ://msdn.microsoft.com/en-us/library/ms178581(v=vs.110).aspx#Anchor_0](https://msdn.microsoft.com/en-us/library/ms178581(v=vs.110).aspx#Anchor_0)

[https://www.c-sharpcorner.com/UploadFile/225740/introduction-of-session-in-Asp-Net/](https://www.c-sharpcorner.com/UploadFile/225740/introduction-of-session-in-Asp-Net/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-07-12T12:44:44.303

我使用了下面的代码行，它可以工作，试试这个

```
DataTable dt =  dataSource.Tables[0]; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-07-24T18:38:33.640

这来晚了，但很有帮助。我只是发布以供将来参考

```
DataTable dt = new DataTable();
Data.DataView dv = default(Data.DataView);
dv = (Data.DataView)ds.Select(DataSourceSelectArguments.Empty);
dt = dv.ToTable(); 
```

# flash - 多次加载图像

> ID：785801
> 
> 赞同：2
> 
> 时间：2009-04-24T13:16:25.343
> 
> 标签：flash, actionscript-3, image, loading, progressive-download

我知道这是可能的。我已经看过几次了，但它总是让我印象深刻：“他们是怎么做到的？”。加载时建立的那些图像，它是某种渐进式图像加载。它以低分辨率版本开始，然后是稍高的分辨率，然后稍高，直到加载完整质量。有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-24T19:15:43.840

虽然渐进式 jpg 现在显示在 flash 中（直到 fp 8 或 9 他们没有，我不太记得是哪个版本），但我不相信它们实际上是渐进式加载的。有一些伪造它的解决方案，你总是可以加载和调整较小的图像，但这不是很有效。

Ted on flex 有另一种在加载时显示图像的解决方案，但这并不是您想要的。

[http://www.onflex.org/ted/2007/12/progressive-image-loading-with.php](http://www.onflex.org/ted/2007/12/progressive-image-loading-with.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-24T17:29:02.710

您可能只想使用保存为渐进式 JPEG 的图像。但是，在渲染每个通道时，由图像显示来显示图像，我不确定 Flash 是否这样做，或者等到完成的图像准备好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-27T15:43:46.010

我自己从来没有这样做过，但我可能只需要 6-7 个不同分辨率版本的图像，然后将它们叠加在一起进行 alpha-tween。换句话说，从 0%-100% alpha 具有最低分辨率的补间版本，然后在其之上具有下一个最低分辨率的补间版本，等等。

您可能需要事先在 Photoshop 中处理图像以获得所需的效果。

# python - 有没有办法使用 Perl 或 Python 检索进程统计信息？

> ID：785810
> 
> 赞同：2
> 
> 时间：2009-04-24T13:18:16.930
> 
> 标签：python, linux, perl, process

有没有办法使用 Perl 或 Python 来一般地检索进程统计信息？我们可以让它特定于 Linux。

有几个问题：我不会提前知道 PID，但我*可以*从脚本本身运行有问题的进程。例如，我这样做没有问题：

`./myscript.pl some/process/I/want/to/get/stats/for`

基本上，我至少想获得进程的内存消耗，但是我可以获得的信息越多越好（比如进程的运行时间、进程的平均 CPU 使用率等）

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-24T15:38:56.390

看看[Proc::ProcessTable](http://search.cpan.org/~durist/Proc-ProcessTable-0.45/ProcessTable.pm)模块，它返回了相当多的系统进程信息。调用“字段”方法以获取可以从每个流程中提取的详细信息列表。

我最近发现上面的模块几乎取代了我在为 Linux 编写 Perl kill 程序时编写的 Process 模块。您可以在[这里](http://pastebin.com/f16edcba3)查看我的脚本。

它可以很容易地扩展以从 ps 命令中提取更多信息。例如。' **getbycmd** ' 方法返回一个 pid 的列表，其命令行调用与传递的参数匹配。然后，您可以通过将 PID 传递给它来调用“ **getdetail** ”来检索特定进程的详细信息，如下所示，

```
my $psTable = Process->new();

# Get list of process owned by 'root'
for my $pid ( $psTable->getbyuser("root") ) {

    $psDetail = $psList->getdetail( $pid );
    # Do something with the psDetail..

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-24T13:25:11.873

如果您正在`fork()`检查孩子，您就会知道它是 PID。

然后，您可以从父进程中解析文件`/proc/<PID/`以检查内存和 CPU 使用情况，尽管只要子进程正在运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-24T13:32:10.250

一个常见的误解是阅读 /proc 就像阅读 /home。/proc 旨在通过一个 open() 为您提供与填充某些结构的 20 个类似系统调用可以提供的相同信息。阅读它不会污染缓冲区，将无辜的程序发送到寻呼地狱或以其他方式导致小猫死亡。

访问 /proc/foo 只是告诉内核“给我关于 foo 的信息，我可以以与语言无关的方式处理”

如果您需要有关 /proc/{pid}/ 内容的更多详细信息，请更新您的问题，我会发布它们。

# c++ - 在 Qt 中提升序列化：这是正确的方法吗？

> ID：785814
> 
> 赞同：3
> 
> 时间：2009-04-24T13:19:33.090
> 
> 标签：c++, qt, serialization, boost

我正在考虑在基于 Qt 的应用程序中序列化数据。

本质上，我要序列化的是我的分层模型，它由派生自 TreeModelItem 的不同类组成：

```
class TreeModelItem
{
protected:
    QList<TreeModelItem *> m_children;
//...
}; 
```

**我应该学习`boost::serialization`并继续下去吗？**

有没有可以顺便打到的隐藏墙？例如，在（反）序列化子元素时，或者在恢复自定义单槽连接时？希望得到专家的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-24T15:58:31.333

[QDataStream](http://doc.qt.nokia.com/latest/qdatastream.html)支持一些流行的 Qt 对象的（反）序列化。[你可以在这里](http://doc.qt.nokia.com/latest/datastreamformat.html)查看哪些。“Qt”的方式就是使用它。

但是，没有什么可以阻止您使用 boost，但是您将不得不重新实现基本对象（例如 QList）的序列化，这可能会很烦人。

请注意，如果您有自定义对象，例如 TreeModelItem，则必须提供您自己的 operator<<。

关于信号/槽的序列化：afaik Qt不支持这种atm，我相信Qt团队是故意这样做的。如果您对原因感兴趣，也许[这篇](http://lists.trolltech.com/qt-interest/2005-05/thread00963-0.html)文章会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-07T21:14:14.370

如果您对 boost 对 xml 文件的序列化感兴趣，您可以查看我的 QString、QList 和 QStringList 实现：[https](https://github.com/konserw/qarchive) ://github.com/konserw/qarchive - 从那里添加其他 Qt 类的实现应该相当容易（forks欢迎 PRs！:) )

# dojo - DoJo 可能的获取/设置覆盖

> ID：785821
> 
> 赞同：0
> 
> 时间：2009-04-24T13:20:49.590
> 
> 标签：dojo

我对 Dojo 了解不多，但以下可能：

我假设它有一个用于访问其数据存储的 getter/setter，是否可以覆盖此代码。

例如：

在道场商店我有'名字：@Joe'

是否可以检查到达：

得到（）

```
if name.firstChar = '@' then just
return 'Joe' 
```

和：

```
set(var)
if name.firstChar = '@' then set to @+var 
```

这种事情可能吗？还是我需要一个包装 API？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-26T00:09:22.363

您可以从[http://docs.dojocampus.org/dojo/data/api/Read获得最好的文档](http://docs.dojocampus.org/dojo/data/api/Read)

首先，要从商店获取数据，您必须使用

```
getValue(item, "key") 
```

我相信您可以通过以下方式解决问题。它假设您正在使用 ItemFileReadStore，您可以使用另一个，只需替换它。

```
dojo.require("dojo.data.ItemFileReadStore");
dojo.declare("MyStore", dojo.data.ItemFileReadStore, {
    getValue:function(item, key){
        var ret = this.inherited(arguments);
        return ret.charAt(0)=="@" ? ret.substr(1) : ret;
    }
}) 
```

然后只需使用“MyStore”而不是 ItemFileReadStore（或您正在使用的任何商店）。我只是破解了代码，没有尝试过，但它应该很好地显示了解决方案。祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-24T14:03:31.220

是的，我相信是的。我认为你想要做的是在这里阅读并确定它是否会起作用：

以下陈述使我相信答案是肯定的：

> ...通过要求访问商店功能，商店可以隐藏商品的内部结构。这允许项目以最有效地表示特定情况的数据类型的格式保留。例如，项目可以是 XML DOM 元素，在这种情况下，商店将在调用 store.getValue() 时使用 DOM API 访问这些值。
> 
> 作为第二个示例，该项目可能是一个简单的 JavaScript 结构，然后商店可以通过普通的 JavaScript 访问器表示法访问这些值。从最终用户的角度来看，访问权限完全相同：store.getValue(item, "attribute")。这为访问各种数据类型提供了一致的外观和感觉。这还通过避免转换为所有商店都必须使用的定义的内部格式来减少项目加载时间，从而提高访问项目的效率。...通过存储访问器函数提供了延迟加载值以及延迟引用解析的可能性。

[http://www.dojotoolkit.org/book/dojo-book-0-9/part-3-programmatic-dijit-and-dojo/what-dojo-data/dojo-data-design](http://www.dojotoolkit.org/book/dojo-book-0-9/part-3-programmatic-dijit-and-dojo/what-dojo-data/dojo-data-design)

我很想给你举个例子，但我认为这需要更多的调查。

# jquery - 在 Adob e Air 中访问 iframe 的内容

> ID：785823
> 
> 赞同：2
> 
> 时间：2009-04-24T13:20:58.530
> 
> 标签：jquery, iframe, air

在弄清楚如何在 Air 中访问 iframe 中的内容时，我遇到了很多麻烦。这是我一直在测试的一些示例 jquery 代码。

```
 $(document).ready(function(){
    $("#frame").ready(function(){
        air.trace($("#frame").contents().find("body").html());
        air.trace(window.frames["frame"].innerHTML);
        air.trace(document.getElementById("frame").innerHTML);
    });
}); 

```

我使用的 iframe 是。

```
<iframe src="http://google.com" id="frame" width="100%" sandboxRoot="http://google.com/" documentRoot="/" name="frame" height="600"></iframe> 
```

上面代码的输出是

```
 null
undefined 

```

如您所见，内容始终为 null、未定义或空字符串。我是否遗漏了阻止我访问 iframe 内容的内容？任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-25T13:33:02.190

解决方案在这里[http://help.adobe.com/en_US/AIR/1.1/devappshtml/WS5b3ccc516d4fbf351e63e3d118666ade46-7f08.html](http://help.adobe.com/en_US/AIR/1.1/devappshtml/WS5b3ccc516d4fbf351e63e3d118666ade46-7f08.html)

这是我如何让它工作的一个例子。

```
<iframe src="http://google.com/local/iframe.html" id="frame" width="100%" sandboxRoot="http://google.com/local/" documentRoot="app:/" name="frame" height="600"></iframe> 
```

从 sandboxRoot（例如[http://google.com/local](http://google.com/local)）请求的任何内容都将从文档根目录使用，并且将被视为来自同一个域（google.com）。

在 iframe.html 中，我可以将 iframe 访问到谷歌，就像它来自同一个域一样。

我知道必须有办法做到这一点:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-12-28T10:40:58.333

和其他许多人一样，我也很难弄清楚这一点。

**tomfmason**上面给出了解决方案，但即便如此，我还是花了很长时间才真正*理解*发生了什么。

为了帮助可能仍在尝试使用 AIR html+js 创建 Web 浏览器或从远程网页提取数据的其他人，我创建了一个非常基本的 AIR 3.2 项目（1.7 MB .zip 文件），可以找到在：

[http://adobe-air-js.blogspot.com/2011/12/air-reading-dom-of-remote-web-page.html](http://adobe-air-js.blogspot.com/2011/12/air-reading-dom-of-remote-web-page.html)

一旦克服了最初的复杂性，AIR 实际上真的很漂亮。我发现它比钛更可靠/可用。

祝你好运！〜克里斯

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-24T13:53:01.713

Adobe AIR 只是一个浏览器（[实际上是 WebKit](http://www.flex888.com/558/webkits-perfect-score-is-good-for-adobe-air.html)），因此遵循浏览器遵循的规则。在这里管理您的问题的规则称为“同源策略”。

如果它不在同一个域中，浏览器将不允许您访问该站点的数据或内容，因此您将获得此结果。如果您想从另一个域获取数据，请使用基于 Json 的 AJAX API。

其他人遇到此问题的示例：

*   [http://forums.whirlpool.net.au/forum-replies-archive.cfm/723690.html](http://forums.whirlpool.net.au/forum-replies-archive.cfm/723690.html)

# .net - 在 Erlang 中处理 .Net UTF-8 字符串

> ID：785826
> 
> 赞同：0
> 
> 时间：2009-04-24T13:21:32.240
> 
> 标签：.net, utf-8, string, erlang

我正在使用 erlang 和分布式数据库 Mnesia。

我面临的第一个问题是 erlang 和 .Net UTF-8 字符串的“int list”字符串之间的不兼容。

有什么好的转换库吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-24T17:30:57.447

Erlang的新[R13B](http://erlang.org/download.html)版本对 unicode 有更好的支持。

[此处](http://erlang.org/doc/man/unicode.html)记录了新的 Unicode 模块，实现的 Unicode 支持在 EEP 10 ( [Erlang Enhancement Proposal 10](http://www.erlang.org/eeps/eep-0010.html) ) 中进行了描述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-24T13:24:54.650

据我所见，erlang 使用 UTF32，因此使用[System.Text.Encoding.UTF32](http://msdn.microsoft.com/en-us/library/system.text.encoding.utf32.aspx)可能会获取列表的整数，然后您需要从中创建列表。虽然没有测试。

以下代码段可能会有所帮助（它创建了一个 unicode 数组，该数组`int`应该与 erlang 列表的预期匹配）：

```
public static int[] GetIntsForString(string source) {
    byte[] data = System.Text.Encoding.UTF32.GetBytes(source);
    int[] result = new int[source.Length];
    for (int i = 0; i < source.Length; i++) {
        result[i] = BitConverter.ToInt32(data, i*4);
    }
    return result;
} 
```

# c# - 从 C# 远程控制 VLC

> ID：785829
> 
> 赞同：11
> 
> 时间：2009-04-24T13:22:14.657
> 
> 标签：c#, controls, vlc

我正在尝试从 C# 控制 VLC 媒体播放器。我尝试使用 .Net 中的 FindWindow() 命令获取窗口句柄，但是当我发现每次播放文件时窗口的名称都会更改。我遇到的最大问题是将 wm_commands 发送到 vlc。这种方法适用于 Winamp 和 Windows Media Player，但对于 VLC，它似乎不起作用。

我读到 VLC 可以通过浏览器进行控制，但我不想...我在它的设置中看到它有一些可以调用的热键..但是它们可以更改，如果我从我的代码以某种方式......用户更改了它们......

我有点卡住了……任何帮助都会很棒……索林

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-24T13:33:21.747

我有一些代码可以使用[RC 接口](http://getluky.net/2006/04/19/vlcs-awesome-rc-interface/)上的[套接字来控制它](http://gist.github.com/101357)。这在一定程度上有效，但有很多怪癖。在调用播放后的几秒钟内，转到全屏似乎什么都不做。总的来说，它有点工作。

其他选项是：

编写一个 DirectDraw 过滤器（非常难），但一旦完成，VLC 可以代替 FFMPEG 或与 FFMPEG 一起使用。驱动媒体播放器的现有代码可以使用 vlc。

*为libvlc*编写一个互操作包装器，据我所知，最近 VLC 团队`libvlccore`从中分裂出来，`libvlc`所有[互操作](http://forum.videolan.org/viewtopic.php?f=32&t=52021&sid=5b966dc2463cb3b0dbeb5efdbbdb72f4&start=90)都已过时。编写包装器后，您可以将 vlc 嵌入到 Windows 应用程序中。（如果需要支持 x64，则需要在 x64 下编译这些库。

查看 VLC 代码并找出是否有发送这些 Windows 消息的方法。

**编辑** [这似乎](http://forum.videolan.org/viewtopic.php?f=32&t=58438)已经出现在本周。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-24T13:31:55.930

正如 Eoin 提到的，`libvlc`可用于与 VLC 交互。作为 C# 用户，您可能想尝试[`libvlc-sharp`](http://code.google.com/p/libvlc-sharp/)项目提供的 .NET 绑定。

**编辑：**似乎这个项目已经多年没有维护了。无论如何，我都会留下链接，以防你想看看它，也许可以使用它的一些来源。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-24T13:29:15.843

你看过[libvlc](https://wiki.videolan.org/LibVLC/)

您也许可以将其包装在一个库中并通过它与 VLC 进行交互。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-24T13:37:05.637

如果您要控制以前运行的可执行文件，请查看[Process](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx)类以枚举所有[当前进程](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.getprocesses.aspx)或按[名称](http://msdn.microsoft.com/en-us/library/z3w4xdc9.aspx)进行操作。检查可执行文件是否匹配`vlc.exe`。然后，您可以获得主窗口的句柄并执行一些 P/Invoke 以发送消息，就像您使用其他可执行文件一样。这显然充满了潜在的问题，例如键盘击球是否发生变化。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-11-10T22:46:40.243

如何在 C++ 中使用 libvlc [http://unick-soft.ru/art/files/libvlcProject.zip](http://unick-soft.ru/art/files/libvlcProject.zip) 我认为，在 C# 中使用 libvlc 非常相似。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-24T13:33:15.660

还有**rc**接口，甚至还有一个 telnet 接口：[http ://wiki.videolan.org/Console](http://wiki.videolan.org/Console)

但是，如果可能的话，我更喜欢 libvlc。

# .net - erlang 中的 SOAP Web 服务

> ID：785834
> 
> 赞同：6
> 
> 时间：2009-04-24T13:24:40.237
> 
> 标签：.net, web-services, json, soap, erlang

是否有任何用于创建/访问 SOAP Web 服务的好的 erlang 库？

也许处理纯 XML 也很困难。

Json 是一个不错的选择吗？有什么库吗？

我的目标是与现有的 .Net Web 服务互操作。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-24T17:34:23.337

Yaws（一个 Erlang Web 服务器）有一个[Soap 模块](http://yaws.hyber.org/soap_intro.yaws)，但 Soap 在 Erlang 社区中的使用并不多。Json 是一个更好的选择。

您可以用来构建自己的服务器的[Mochiweb 工具包](http://code.google.com/p/mochiweb/)（不要惊慌，它比看起来更容易）具有[良好的 Json 支持](http://code.google.com/p/mochiweb/source/browse/trunk/src/mochijson2.erl)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-08-10T11:54:49.333

除了 Mochiweb 现在有一个新地址之外，没有什么可以添加到上述答案中的：http: [//github.com/mochi/mochiweb](http://github.com/mochi/mochiweb)

# .net - 可靠的 .wmf/wmf 到基于像素的图像转换

> ID：785837
> 
> 赞同：0
> 
> 时间：2009-04-24T13:25:23.090
> 
> 标签：.net, image, system.drawing, metafile, wmf

下午好，

我在使用.net 的内部（System.Drawing）基于 MetaFile / Image 处理包含透明区域的 .wmf 文件时遇到了一些麻烦。基本上每当我执行 MetaFile.LoadFile(...) 并将其保存为 tiff/png 等时，该源文件的某些区域都会丢失。我真的无法确定它，但它 - 似乎 - 元文件中基于矢量的信息工作正常，但基于像素的区域（例如放置在 .wmf 中的图像）丢失了。

有谁知道正确转换 wmf 文件的可靠、.net 本机和非 3rd-party 方式（如.. 基于像素的最终图像看起来像 .wmf.. 只是.. 好.. 像素化）？

干杯和感谢，-J

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-27T20:44:23.167

好的，显然将元文件（.wmf/.emf）转换为另一种格式的最可靠方法是使用 .png 作为输出格式，因为在 msdn 描述中的某处元文件无论如何都会在内部处理/转换为 png 格式（使用 alpha 等) 并且默认情况下 Metafile.Save("somewher"...) 将以 png ImageFormat 输出。

因此，如果您确实想从 Metafile 输入创建非 png 图像，如果您加倍努力，将其转换并存储为 png，然后将该 png 重新转换为您的最终格式。有点蹩脚，但话又说回来.. wmf 本身很奇怪，我已经得出（我个人的）结论它是邪恶的。;)

-J

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-24T13:38:40.233

问题是 .NET 是 GDI+，而 WMF/EMF 是 GDI。重要的是要知道 GDI+ 与 GDI 不兼容，它们具有完全不同的 API 和功能。因此，GDI 元文件中的某些操作的行为与预期不同。透明位图，以及元文件等的世界转换通常并不像微软宣传的那样真正起作用。

到目前为止，我得到的最好的是将元文件转换为原生 GDI+，这需要模拟 GDI 堆栈并应用一些重大调整来获得正确的文本定位等。

看看 EMFExplorer，在那里找到的信息可能会有很大帮助。 [http://www.codeproject.com/KB/GDI-plus/emfexplorer.aspx](http://www.codeproject.com/KB/GDI-plus/emfexplorer.aspx)

# asp.net-mvc - 下载 ASP.NET MVC 参考并将其与本地 MSDN 库集成

> ID：785838
> 
> 赞同：6
> 
> 时间：2009-04-24T13:25:29.423
> 
> 标签：asp.net-mvc, msdn

有没有办法下载 ASP.NET MVC 参考并通过本地 MSDN 库使其可用？

每次我需要一个简单的类或方法文档参考时，我都厌倦了去微软的网站。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-07-27T09:10:15.287

目前还没有官方下载 - 但您可以使用[PackageThis](http://www.codeplex.com/packagethis)进行非官方下载，它连接到 MSDN 内容服务，将数据拉下并为您构建本地 CHM 或 HXS 文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-24T13:33:42.663

没有回答您的问题，但您知道在线 MSDN 库现在以[“loband”格式](http://blogs.msdn.com/innovation/archive/2009/03/26/launching-low-bandwidth-loband-beta-for-long-haul.aspx)提供吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-02T21:59:05.477

此软件包有新版本[PackageThis！](http://visualstudiogallery.msdn.microsoft.com/626677ab-c35f-4f3d-9f7c-6b471b1195dd)Visual Studio Gallery 中提供，它支持 Mshc 文件格式（Visual Studio 2010/2012 帮助包）。

# objective-c - 测试自己的 OS X 框架

> ID：785840
> 
> 赞同：1
> 
> 时间：2009-04-24T13:25:52.277
> 
> 标签：objective-c, cocoa, unit-testing, macos

我正在编写我的第一个 OS X Objective-C 框架，但我不知道如何测试它。我如何在框架中执行方法和类以进行测试？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-24T14:57:36.253

Chris Hanson关于在 Xcode 中为框架设置单元测试的优秀[文章集是测试框架的绝佳参考。](http://chanson.livejournal.com/119303.html)Apples 开发网站上的文章“[使用 Xcode 3 和 Objective-C 进行自动化单元测试](http://developer.apple.com/mac/articles/tools/unittestingwithxcode3.html)”已在很大程度上合并（并取代了）他们的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-24T14:51:25.740

创建一个单元测试包目标，并在该包中创建测试用例类。您将链接到 OCUnit 框架以获取测试的基类；周围有一些 OCUnit 教程，您可以在 Google 上找到。

对于较难测试的任务，例如在视图中绘图，最简单的方法是制作一个测试应用程序并自己检查结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-24T14:54:47.523

您可以在[Chris Hanson](https://stackoverflow.com/users/714/chris-hanson)的博客上找到[几篇关于单元测试](http://chanson.livejournal.com/182472.html)的文章。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-24T13:34:13.117

一种可能性是创建一个新的可执行目标，该目标依赖并调用您正在使用的框架。

# sql - 当尝试使用按钮在 delphi 中运行 SQL 查询时，单击没有任何反应！

> ID：785841
> 
> 赞同：0
> 
> 时间：2009-04-24T13:27:24.973
> 
> 标签：sql, delphi, button

我正在尝试使用 Delphi 中的按钮单击运行 SQL 查询，数据库已成功连接，当我输入查询即“从 StaffDetails 选择 *”时，一切都编译正常，然后单击运行，期望它在 DBGrid 中显示结果什么都没有发生在按钮的所有代码如下

```
procedure TForm1.Button1Click(Sender: TObject);
begin
  ADOQuery1.Close;
  ADOQuery1.SQL.Text := Memo1.Text;
  ADOQuery1.Open;
end; 
```

我以为那里需要更多，但看了几个视频，这就是他们在那里的全部内容，所以我很难有想法。其他一切似乎都可以正常连接。

任何帮助是极大的赞赏。

谢谢伙计们不敢相信从上午 9.30 开始就一直坐在这里是如此简单，现在 14.37 大声笑一定让我的大脑坐在这里大声笑谢谢你们的帮助，非常感谢 :)

在此先感谢安迪

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-24T13:33:14.193

你必须

*   将 Grid 连接到 TDatasource。
*   将 TDatasource 连接到您的 ADOQuery1。

无论是在代码中还是在对象检查器中。在代码中，这可能是

```
Grid.DataSource = DataSource1;
DataSource1.DataSet := ADOQuery1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-24T13:35:41.053

我是德尔福菜鸟，但我会质疑：

1.  按钮单击事件是否触发？我在我的时代错误地命名了一些事件处理程序......
2.  您是否必须将网格“重新绑定”到更新的查询？

# javascript - 使用 Javascript 为美国地图动态着色

> ID：785843
> 
> 赞同：1
> 
> 时间：2009-04-24T13:27:33.880
> 
> 标签：javascript, maps

我需要编写一个网页，该网页以美​​国的空白地图开头，并根据从各种 Ajax 请求中接收到的数据为各州着色。地图需要在不重新加载页面的情况下随时间变化，用户可以单击各种控件来立即更改地图的着色方式。这一切都需要在本地完成，所以我无法使用谷歌地图或任何类似的互联网服务。

我希望在浏览器中使用 Javascript 执行此操作。有没有一个很好的图书馆来做这件事？或者关于如何最好地实现这一点的任何一般性建议？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-24T13:33:16.520

我会采用这样的插件，只需根据您的动态数据将其更改为“突出显示”：

*   [http://plugins.jquery.com/project/maphilight](http://plugins.jquery.com/project/maphilight)

*   插件演示： http: [//davidlynch.org/js/maphilight/docs/demo_usa.html](http://davidlynch.org/js/maphilight/docs/demo_usa.html)

目前它在鼠标悬停时突出显示，但使用给定数据突出显示应该非常简单。

它带有美国地图并突出显示准备就绪的事实只是肉汁。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-24T13:39:52.527

听起来像是[Raphaël的工作](http://raphaeljs.com/index.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-06-07T08:24:54.660

这是纯 JS、SVG/VML 解决方案的示例：http: [//jvectormap.owl-hollow.net/](http://jvectormap.owl-hollow.net/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-24T13:37:30.003

您可能仍然可以使用 Google 静态地图 API 的“路径”参数来覆盖您想要的颜色。创建一些静态地图并保存生成的图像。

[http://code.google.com/apis/maps/documentation/staticmaps/index.html#Paths](http://code.google.com/apis/maps/documentation/staticmaps/index.html#Paths)

# javascript - 使用 jquery 调用 web 服务时出错

> ID：785846
> 
> 赞同：1
> 
> 时间：2009-04-24T13:29:54.733
> 
> 标签：javascript, jquery, web-services

我已经阅读了很多关于 jquery 的内容，并且我有一个 Web 服务，可以将 companyID 转换为真实的 companyName。现在我想用 jquery 或 javascript 调用那个 web 服务。该网络服务位于主机[http://webservice/service.asmx](http://webservice/service.asmx)上，我正在处理[http://tlmos](http://tlmos)。我不工作而且总是出错

这是我的代码：

```
<script type="text/javascript" src="http://kmosvi24/_layouts/jquery-1.3.2.min.js"></script>

<script type="text/javascript"> 
var test = "KBEACDNV";
$.ajax({
  type: "POST",
  contentType: "application/json; charset=utf-8",
  url: "http://webservice/service.asmx/getCompanyByCompanyID",
  data: "{'sCompanyID:' + 'test'}",              
  dataType: "json",
  succes:function(response){        alert("good");    },
  error: function(response) { alert("Uh oh"); },
 complete: function(response) {        alert("" + response);    }
});

</script> 
```

有人能帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-24T13:33:49.590

嗯..你在第 11 行拼错了success

..您可能希望将数据格式化为

```
data: "sCompanyID=test" 
```

快速浏览一下[这个页面上的 jQuery API 页面，](http://docs.jquery.com/Ajax/jQuery.ajax#options)以验证您正在传递您的服务期望的参数。看起来您期待一个带有 ASMX 服务的 SOAP 数据包，而 jQuery 更适合访问从 ASHX 文件或 WCF 服务生成的 restful 服务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-24T13:58:20.563

正如一些人指出的那样，您不能在另一个域上调用 Web 服务，但是当您使用 ASP.NET 时，您可以编写一个原始 HTTP 处理程序（通常带有 .ashx 扩展名来代理您从客户端到服务器的请求。）你会放在你的“timos”服务器上

所以在你的 ashx 文件中你可以写一些类似的东西......

```
public void ProcessRequest (HttpContext context)
{

    XmlDocument wsResponse = new XmlDocument();
    string url =  "http://webservice/service.asmx/getCompanyByCompanyID?CompanyID="
    context.Request.Form["CompanyID"].ToString()
    wsResponse.Load(url);
    string XMLDocument = wsResponse.InnerXml;        
    context.Response.ContentType = "text/xml";        
    context.Response.Write(XMLDocument);

} 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-24T14:02:00.163

您可以向不同的服务器发出请求，但前提是调用使用 GET。由于您所做的只是查找，因此 GET 请求应该没问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-24T13:37:29.007

我认为您没有正确使用 data 参数，通常它是一个键值对，例如：

```
data: {sCompanyID: 'test'} 
```

我相信他们使用它的方式会导致 jQuery 尝试发布到 [http://webservice/service.asmx/getCompanyByCompanyID?sCompanyID:blah](http://webservice/service.asmx/getCompanyByCompanyID?sCompanyID:blah)

.NET Web 服务不是 SOAP 吗？我不认为jQuery可以解析...

**编辑：**没关系，没有意识到您将这些作为 json 数据传递。感谢评论者！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-24T13:44:22.373

您不能对自己以外的主机进行 AJAX 调用。如果您确实必须这样做，请调用您自己的服务器并使用简单的代理重定向到您需要的域。

例如，您可以通过在您的网络服务器中使用 ProxyPass 指令来做到这一点：

```
ProxyPass         /service/ http://webservice/service.asmx
ProxyPassReverse  /service/ http://webservice/service.asmx 
```

然后您可以向 /service/getCompanyByCompanyID 发出 AJAX 请求，它将被代理到正确的 URL。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-24T13:36:01.550

为了从 Jquery 运行你的 web 服务，你应该使用 WCF 或者只是普通的 web 服务，但是你应该将 [ScriptMethod] 添加到你的服务的方法和 [ScriptService] 到你的 web 服务描述。

哇哇刚刚注意到您正试图将服务从一台主机调用到另一台主机......那一个不起作用。服务应该托管在与调用它的页面相同的域上。

作为对杰夫的回答的答复，格式化数据的正确方法是 data: {key: "value"}

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-18T08:00:19.373

使用 jQuery Ajax 请求时，您需要在定义要在请求中发送的变量时使用以下格式：

```
data: "variableName=variableContent", 
```

你写了：

```
 data: "{'sCompanyID:' + 'test'}" 
```

**这不起作用有两个原因：**
- 您包含了不需要的大括号。
- 您使用了分号,":"，而不是等号,"="。

只要您更改这些，它就可以工作。

PS我才意识到杰夫弗里茨已经给了你正确的答案。他的回答很到位！

# wpf - 为什么 WPF 应用程序在调试模式下运行很慢？

> ID：785851
> 
> 赞同：4
> 
> 时间：2009-04-24T13:30:16.713
> 
> 标签：wpf, visual-studio-2008, performance, debugging

我知道通过 Visual Studio 在 DEBUG（构建配置）中运行应用程序会增加一定程度的开销，但我有一个正在测试的 WPF 应用程序，它的执行速度和其他功能（如拖放/拖放项）非常缓慢。当我在 Release 模式下运行应用程序时，它的性能就像人们期望的那样，非常快速且毫不犹豫。我没有设置任何特殊的调试参数或任何其他会中断应用程序的监视、设置或断点。

有没有其他人遇到过这样的问题，或者可能只是一些可以调整的设置？这不是一个真正的问题，更多的是为什么会发生这种情况......

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-24T13:59:35.800

垃圾收集器在调试模式下的攻击性要小得多。

尝试在任务管理器中查看内存使用情况，VM Size 列通常是最有用的。

看看在缓慢的操作过程中是否释放了大量内存——这表明收集器有一段时间没有费心做很多工作，然后不得不开始进行更大的清理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-24T14:55:30.033

您可以检查您的输出和立即窗口。您可能会收到很多消息，尤其是当您遇到绑定错误时。

# c# - 异步HttpHandler的请求可以无异常中断吗？

> ID：785867
> 
> 赞同：2
> 
> 时间：2009-04-24T13:34:31.820
> 
> 标签：c#, asp.net, multithreading, asynchronous

我们在 IIS 6 下的 ASP.NET 3.5 中使用异步 HttpHandler，并且在我们的代码中，如果我们没有承受太多负载，我们希望执行外部 API 调用。我们已经定义了“负载过多”，这意味着如果我们同时有超过 X 个请求访问此 API，我们将跳过调用该 API。

为此，我们将代码包装在信号量和 Try/Catch/Finally 中。我觉得如果不释放信号量就无法执行此代码，但是通过一些额外的日志记录，我们看到在重负载下永远不会调用 release 语句。

代码是这样的：

```
static Semaphore requestLimiter = new Semaphore(500, 500);

...

String GetResultFromAPI() {
    if (!requestLimiter.WaitOne(0)) return null;

    try
    {
        // ... code to perform API call, with a timeout specified on the HttpWebRequest
        return result;
    } catch { /* ignore exceptions */ }
    finally
    {
        requestLimiter.Release();
    }
    return null;
} 
```

我们已经看到了 HttpWebRequest 超时的异常，所以我们对这段代码如何导致 requestLimiter 信号量下降到 0 并且永远不会恢复感到困惑。

有没有人遇到过这个？异步 HttpHandler 有什么方法可以毫无例外地中断请求？

# 编辑

显然 ThreadAbortExceptions 是一个讨厌的野兽，这段代码肯定会失败。我们没有显式调用 Thread.Abort，我认为 HttpWebRequest 也不会。但是，现在修改后的问题是：ASP.NET 是否曾经为异步 http 请求调用 Thread.Abort？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-24T13:47:40.883

在获取信号量和进入 try catch 块之间，您可能会遇到线程中止异常。

**编辑**

也有可能抛出带外异常，这将绕过您的 finally 块。您可以在此处阅读有关[受限执行区域的](http://msdn.microsoft.com/en-us/library/ms228973.aspx)更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-25T01:21:52.977

IIS 可以关闭会触发 ThreadAbortException 的工作线程，并且 ThreadAbortException 并不总是最终被捕获。他们被抓住了。当 IIS 出于某种原因终止 Web 请求时，我遇到了这个问题。我的日志记录进程将在一个新线程中生成以记录错误，而 Thread.Abort 仍会终止我的日志记录进程。甚至尝试将日志线程生成放在 finally{} 中，IIS 仍然会杀死它。我永远无法弄清楚如何解决它。

无论如何，我会检查您的事件查看器是否有回收/终止的工作线程，并可能检查您的应用程序池并确保将其设置为不经常回收/重新启动。

# java - 为什么在实例上调用方法时不需要导入类（Java）

> ID：785868
> 
> 赞同：14
> 
> 时间：2009-04-24T13:35:05.470
> 
> 标签：java, compiler-construction

让我感到困惑的事情 - 一个例子：

东西.java：

```
import java.util.Date; 

class Thing { 
    static Date getDate() {return new Date();}
} 
```

（同一个包）TestUsesThing.java：

```
// not importing Date here.

public class TestUsesThing {

    public static void main(String[] args) {
        System.out.println(Thing.getDate().getTime()); // okay
        // Date date = new Date(); // naturally this wouldn't be okay
    }

} 
```

为什么不需要导入 Date 才能在其中一个上调用 getTime() ？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-04-24T13:39:58.233

只需要在 Java 中导入，因此编译器知道 a`Date`是什么，如果您键入

```
Date date = new Date(); 
```

导入与`#include`C/C++ 不同；类路径上的所有类型都*可用*，但您`import`只是为了避免编写完全限定名称。在这种情况下，这是不必要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-24T14:06:06.190

好问题 ！！

我认为结果是 java 编译器如何处理表达式与语句之间的区别。

```
Date d = new Date(); // a statement 
```

然而

```
new Thing().getDate().getTime() 
```

是一个表达式，因为它出现在 println 方法调用中。当您在 new Thing() 上调用 getDate 时，编译器会尝试通过查看 Thing 类的类型信息来处理表达式，这是它获取 Date 类型声明的地方。但是当您尝试在像这样的语句中单独使用 Date 时

```
Date d = new Thing().getDate(); 
```

您将结果分配给当前范围内的类型（类 TestUsesThing ），编译器会尝试解析该范围内的类型。因此，您会看到未知类型的编译器错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-24T14:14:19.930

Thing 和 TestUsesThing 在同一个包中吗？如果是这样，那么您不必导入 Thing。您必须导入 Date 的原因是因为它位于不同的包中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-24T16:02:27.330

`import`语句用于几件事。

1.  编译器类型检查并避免命名冲突。
2.  确保字节码链接

每当我们说

```
System.out.println( new Thing().getDate().getTime() ) 
```

编译器从左到右解析这个语句并进入那个类。

一级编译器解析。

1.  去东西课
2.  # compile 没有来自 Thing.class 的任何链接或 ClassVersion 错误

3.  检查 Thing.class 有 getDate 方法。
4.  如果#3 很好，那么编译器指针仍在 Thing.class 中（其中包含日期导入语句），我可以调用 Time 方法。
5.  作为消费者，TestUsesThing 只获得 long 变量。

    ```
    System.out.println( new Thing().getDate() ) 
    ```

    5.1 在这种情况下，我们隐式访问 .toString() 方法

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-24T16:37:13.753

实际上，这是一个理想的例子，因为有*两个*不同的标准 Java Date 类：**java.util.Date**和**java。*sql* .日期**.

它如何知道使用哪一个？简单的。getDate() 方法被声明为 Thing 类定义的一部分，该声明的一部分是它的返回类型：

```
public java.util.Date getDate() {
  return this.date;
} 
```

当然，如果你在 Thing 类的定义中有一个导入——而且它没有歧义，你只需说：

```
public Date getDate() { 
```

如果您要解码 Thing 类的二进制文件，您会看到 getDate 方法的方法签名，它包括返回类型的完全限定类名（包括包）。

**导入**只是一种告诉编译器在引用没有明确限定的类时要假设的包的一种方式。只要看到不合格的类名，就会扫描导入列表，并搜索包。如果没有歧义（例如同时导入 java.util.date 和 java.sql.Date），则将使用该类。如果可以隐式确定类，或者类名完全限定，则不需要导入。

# delphi - 问题设置为 DLL 中的新表单的父级

> ID：785872
> 
> 赞同：2
> 
> 时间：2009-04-24T13:36:01.880
> 
> 标签：delphi, parent-child

请解释两者之间的区别：

```
ChildForm := TForm.CreateParented(AOwner)

ChildForm := TForm.CreateParentedControl(AOwner)

ChildForm := TForm.Create(AOwner); 
ChildForm.ParentWindow := AOwner.Handle 
```

这个例子可能很复杂和令人费解，我真的很想了解人们何时使用不同种类的 Create 方法来创建表单。

Delphi 7 帮助告诉我，我应该将 CreateParented(AOwner.Handle) 和 ParentWindow := AOwner.handle 与非 VCL 控件或跨 DLL 一起使用。直到昨天我才设置了 Parent := AOwner，我完全不知道为什么它会停止工作。

（也许我只需要重新启动我的电脑）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-24T14:15:34.297

我们有组件。它们是表单或数据模块上可见或不可见的项目。每个组件都可以有一个负责最终销毁的所有者。如果没有所有者，您必须自己处理破坏。

我们有控件，它们是可见的组件。他们还有一个包含控件的父级。例如，面板是该面板上按钮的父级。

我们还有 WinControls，它们是链接到 windows 对象的控件。它们也有父窗口的句柄。

所以：

1.  TMyControl.CreateParented 构造函数 CreateParented(ParentWindow: HWnd);

    这用于创建一个控件，其父窗口由句柄提供。它创建没有所有者的控件并将父窗口设置为 ParentWindow。

2.  TMyControl.CreateParentedControl 类函数 CreateParentedControl(ParentWindow: HWND): TWinControl;

    创建没有所有者的控件，将父窗口设置为 ParentWindow 并返回它。

3.  TMyControl.Create（AOwner：TComponent）

    创建一个所有者设置为 AOWner 的控件。

4.  TMyControl.ParentWindow := AOwner.Handle;

    将父窗口（句柄）设置为 AOwner 的句柄。

# arrays - 为什么@($null) 是$false，而@($null, $null) 是$true？

> ID：785877
> 
> 赞同：3
> 
> 时间：2009-04-24T13:36:49.677
> 
> 标签：arrays, powershell

好奇，这背后的想法是什么：

```
@() -as [bool]
# False

@($null) -as [bool] 
# False

@($null, $null) -as [bool]
# True 
```

我期望 False/True/True 或 False/False/False，但不是 False/False/True。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-24T14:13:35.987

如 Powershell 快速参考中所述¹：

```
真假
~~~~ ~~~~~~
$真 $假
任何长度 > 0 的字符串，除了单词“false” 空字符串或字符串“false”
任意数≠0任意数=0
长度 > 1 的数组 长度为 0 的数组
元素为真的长度为 1 的数组 元素为假的长度为 1 的数组
对任何对象 Null 的引用

```

我认为其背后的想法是，`$false`如果将 cmdlet/函数的输出放入数组中，则很容易出现只有一个元素的数组。您可能期望更多的值，但由于一些错误导致它返回`$false`，但`$false`在这种情况下，数组中的两次可能不太可能。

或者我们应该等待 Jeffrey Snover 在这里回答:-)

¹ C:\Windows\System32\WindowsPowerShell\v1.0\Documents\en-US\QuadFold.rtf 在我的机器上

# ruby-on-rails - 在 Rails 应用程序中存储 pdf

> ID：785880
> 
> 赞同：3
> 
> 时间：2009-04-24T13:37:23.857
> 
> 标签：ruby-on-rails, database-design

我将如何在我的 Rails 应用程序中存储 pdf 以便用户可以访问/下载它们？

在我的迁移中，我会使用数据类型`t.binary`吗？

然后在我的控制器/视图中，我应该如何呈现这些数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-24T16:02:04.400

这里的答案可能取决于。取决于 PDF 的大小和数量，用户必须登录才能查看它们等。

如果您有很多大的 PDF，将它们存储在数据库中可能不是一个好主意 - 只需将它们存储在文件系统中并将文件位置存储在数据库模型中即可。

如果您确实想将它们存储在数据库中，那么使用二进制列是可行的方法。

如果用户不必登录即可下载 PDF，那么您可以将它们放入公用文件夹（在子文件夹内）并生成指向它们的链接以供下载 - 然后您的控制器只需要生成指向静态 PDF 文件，前端网络服务器将自动为它们提供服务，而无需使用 Rails 进程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-24T16:20:19.083

我听说过有关[Paperclip](http://www.thoughtbot.com/projects/paperclip)的好消息，它是一种透明地处理这些东西的方式 - 将文件存储在文件系统上，并引用数据库中的该文件位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-24T16:12:17.493

这个问题可能不是特定于 rails 的，但可能最好的方法是生成 pdf 并将它们存储在您的文件系统中，然后在您的数据库中记录文件名和它们的创建日期（删除旧的如果你需要）。

# silverlight - expression blend 2 silverlight 中的动画事件

> ID：785885
> 
> 赞同：2
> 
> 时间：2009-04-24T13:38:42.327
> 
> 标签：silverlight, events, animation, expression-blend

我刚刚创建了一个简单的动画。假设在一帧中我有一个世界的图像。我想在选择某个国家/地区时创建一个事件。如何允许通过单击图像中的一个特定国家来触发事件？例如只显示国家名称等

谢谢

额外信息：换句话说，我正在尝试使用 Blend 将图像分割成多个区域……我需要“剪辑图像”吗？我剪掉了部分图像，但现在不知道该怎么做。谁能帮帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-25T10:14:40.873

如果您只想在可以单击的图像上出现“热点”，您可以简单地在这些区域上绘制一些形状并将其不透明度设置为 0，然后处理它们上的鼠标事件（不要将可见性更改为折叠，因为那会意味着他们不会收到任何鼠标事件）

# mysql - SELECT WHERE field!=value 它是如何在 mysql 中完成的？

> ID：785886
> 
> 赞同：3
> 
> 时间：2009-04-24T13:38:56.037
> 
> 标签：mysql

我找不到答案，因为在 google 中搜索 mysql NOT 是一场噩梦（即使有引号）。

我需要进行这样的查询：

```
SELECT * FROM table WHERE field=value AND field2!=value2 AND field3!=value3 
```

它是如何完成的？甚至可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-24T13:42:03.970

```
SELECT * FROM table WHERE 
        ((field = value) AND  
        (field2 <> value2) AND 
        (field3 <> value3)) 
```

如果你正在处理`NULL`，你必须做两件事：

1.  利用`SET ANSI_NULLS ON`
2.  将值声明`NULL`为虚拟值。

SQL 无法比较空值。

要做到这一点：

```
SET @value = ISNULL(@value, -1); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-24T13:41:40.680

是的，你可以完全按照你写的去做，但是使用`<>`而不是`!=`

也许答案取决于“价值”是什么？例如，对于整数 123`value`将是`123`; 对于字符串 "foobar"`value`将是`'foobar'`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-24T13:42:46.760

你试过`<>`运营商吗

```
SELECT * FROM table WHERE field = value AND field2 <> value2 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-24T13:41:59.243

你试过“<>”吗？它在德尔福工作

# ognl - Java中的OGNL Hello World

> ID：785887
> 
> 赞同：18
> 
> 时间：2009-04-24T13:39:06.177
> 
> 标签：ognl

我需要使用 OGNL 从 Java 对象中读取一些属性。OGNL 对我来说是全新的事物。OGNL 可用的文档是 OGNL 的网站，这让我很困惑。

因此，任何人都可以提供一个`HelloWorld`使用 OGNL 的简单示例（或者任何指向教程的链接也很有帮助）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-11-12T16:12:12.013

尝试这个：

```
 Dimension d = new Dimension(2,2);

    String expressionString = "width";
    Object expr = Ognl.parseExpression(expressionString);

    OgnlContext ctx = new OgnlContext();
    Object value = Ognl.getValue(expr, ctx, d);

    System.out.println("Value: " + value); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2010-06-08T16:46:37.833

如果目的只是从对象中读取属性，那么 PropertyUtils.getProperty（来自 commons-beanutils）可能就足够了。但是，如果打算评估条件等，那么 Ognl 可能会受益。

这是带有布尔值的相同 Dimension 示例：

```
Dimension d = new Dimension();
d.setSize(100,200) ;// width and height

Map<String,Object> map = new HashMap<String,Object>();
map.put("dimension", d);

String expression = "dimension.width == 100 && dimension.height == 200";
Object exp = Ognl.parseExpression(expression);
Boolean b = (Boolean) Ognl.getValue(exp,map);
// b would evaluate to true in this case 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-09T06:48:10.790

OGNL 允许您通过字符串表达式访问对象字段和方法，当您失去数据与其消费者之间的耦合架构时，这将变得非常有用。它在引擎盖下使用反射，但与纯反射方法相比肯定会加快开发速度。

一些单行示例

```
System.out.println(Ognl.getValue("x", new Point(5,5)));
System.out.println(Ognl.getValue("size", new ArrayList<Object>())); 
```

[文档](http://commons.apache.org/proper/commons-ognl/language-guide.html)已经有一些基本的和更高级的 ognl 表达式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-11-30T20:02:10.307

这是[jython](http://en.wikipedia.org/wiki/Jython)的示例 helloworld （编译为 java 的 python）。

```
from ognl import Ognl, OgnlContext
from java.lang import String

exp = Ognl.parseExpression("substring(2, 5)")

print Ognl.getValue(exp, OgnlContext(), String("abcdefghj")) 
```

# .net - .Net 和默认设置

> ID：785895
> 
> 赞同：0
> 
> 时间：2009-04-24T13:40:04.397
> 
> 标签：.net, configuration

如果我要从我的应用程序中的配置文件中读取连接字符串，并且我需要能够在应用程序从 dev 移动到 uat 再到 prod 时更改连接字符串，我是否应该使用设置文件，因为连接字符串已编译进入我将从一个环境移动到另一个环境的程序集，从而使初始连接字符串过时？

这里的最佳做法是什么？

编辑：

我一般都在问，因为我既有 web 服务，也有 smartclient 应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-24T13:41:40.850

如果您正在进行 Web 开发，您希望将[App.config](http://msdn.microsoft.com/en-us/library/ms734706(VS.85).aspx) xml 文件用于桌面应用程序或[web.config 。](http://www.csharpfriends.com/Articles/getArticle.aspx?articleID=106)请参阅“[连接字符串](http://peterkellner.net/2008/02/23/webconfigbestpractice/)”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-24T13:42:40.817

我通常将连接字符串放入我从部署中排除的外部配置文件中： 在 web.config 中：

```
<connectionStrings configSource="connections.config"></connectionStrings> 
```

连接.配置：

```
<?xml version="1.0"?>
<connectionStrings>
    <add name="connectionName" connectionString="[connection string goes here]"/>
</connectionStrings> 
```

[更新]这假设您正在构建一个网站；否则当然是“App.config”，而不是“web.config”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-24T13:59:41.027

我们使用 .config 文件的连接字符串部分，字符串名称如下：

AppDataInDev 和 AppData

同样在 .config 文件中，我们在应用程序设置下有一个名为 InDev 的键

在我们的数据层中，我们检查 InDev 的值。如果为 true，则使用 AppDataInDev 初始化数据层，否则使用 AppData。

这使得管理向 prod 的过渡变得容易。发布到 prod 时，将 InDev 的值切换为 False，您就完成了。（如果是 ASP.Net 应用程序，请在将 CompilationDebug 切换为 False 的同时执行此操作。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-24T13:49:26.463

编译配置设置让我畏缩。

但是，如果您担心您的配置被坏人查看。

加密它：[http ://www.4guysfromrolla.com/articles/021506-1.aspx](http://www.4guysfromrolla.com/articles/021506-1.aspx)

请记住，加密是基于机器密钥的，因此部署桌面应用程序的效果不会很好。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-04-24T13:43:41.657

看来您的键盘上没有点（'。'）按钮。去商店买一个新的。

我不确定我是否理解你的问题。使用应用程序可执行文件旁边的 config/settings 文件。读取该文件以获取连接字符串。如果文件丢失，请使用默认 url 创建一个新的配置文件？

# recursion - 使用递归对数字求和

> ID：785897
> 
> 赞同：14
> 
> 时间：2009-04-24T13:40:24.677
> 
> 标签：recursion

我刚刚在研究递归的概念，我想我会尝试一个简单的例子。在下面的代码中，我尝试获取数字：1、2、3、4、5，并使用递归将它们相加。我预计结果为 15，但我的代码返回 16。

我究竟做错了什么？

### 代码：

```
 static void Main(string[] args)
    {

        Console.WriteLine(Sum(5));
        Console.Read();
    }

    static int Sum(int value)
    {
        if (value > 0)
        {
          return value + Sum(value - 1);
        }
        else
        {
            return 1;
        }
    } 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2009-04-24T13:43:42.517

您在 else 子句中返回 1 。您应该返回 0：

```
else
{
    return 0;
} 
```

如果值不大于零，你为什么要首先返回一个？

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2009-04-24T13:44:04.480

您的代码执行如下：

```
Sum --> 5
  Sum --> 4
    Sum --> 3
      Sum --> 2
        Sum --> 1
          Sum --> 0
          1 <---
        2 <---
      4 <---
    7 <---
  11 <---
16 <--- 
```

检查您的基本情况。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2009-04-24T13:50:22.110

其他人已经注意到错误，我将详细说明递归。

虽然 C# 目前没有进行尾调用优化（虽然 IL 有特殊`tail`说明），但值得一提的是，尾递归通常是一件好事。

[尾递归](http://en.wikipedia.org/wiki/Tail_recursion)是递归的一种特殊情况，其中函数的最后一个操作，尾调用，是递归调用。由于最后一次调用是递归调用，因此无需保留调用函数的堆栈帧，编译器可以轻松地使用此信息生成机器指令，从而使堆栈根本不会增长。所以它基本上可以将递归函数变成迭代函数。

重写代码以支持尾递归可以如下完成：

```
static int Sum(int result, int value)
{
    if(value == 0)
        return result;

    return Sum(result + 1, value - 1);
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-04-24T13:44:22.873

```
static int Sum(int value)
{
    if (value > 0)
    {
        return value + Sum(value - 1);
    }
    else
    {
        return 0; //Change this.
    }
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-04-24T13:44:27.630

那是因为，当值 = 0 时，您返回 1。然后它被添加。

Sum 的“else”子句应该返回 0。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-07-22T12:05:16.647

```
int summation(int num){

    if (num==1)
        return 1;

    return summation(num-1)+num;
} 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2009-04-24T13:50:44.807

我总是更喜欢把终止案例放在前面，这样它们就很明显了，而且我对`"if cond then return a else return b"`结构有一种近乎精神病态的强烈仇恨。我的选择是（明确表示它不适用于负数）：

```
static unsigned int Sum(unsigned int value) {
    if (value == 0)
        return 0;
    return value + Sum(value - 1);
} 
```

我相信这比一堆大括号和控制流更具可读性。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2009-04-24T13:57:55.430

其他人已经回答了这个问题，但是当我使用递归时，我喜欢检查它是否有效的一件事是使用检查基本案例和一个附加案例。在您的情况下，我将使用 1 对其进行测试，这将产生 2。由于这显然是错误的，您可能想要检查不会使用任何递归的 0，因此很明显错误在于基类。

一般来说，递归更容易推理，因为您可以列出需要检查的有限数量的事物，但它最初确实需要信心的飞跃，因为您的直觉是错误的。只需测试边缘情况并相信它*永远不会*失败*的数学。*

 ** * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-04-24T13:44:51.967

我很确定问题是因为你希望你的递归在什么时候终止`value == 1`，而它目前在什么时候终止`value == 0`。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-04-24T13:48:04.893

您的终止表达式有问题。当 value == 0（或更低）时，它应该返回 0 而不是 1。为了效率（让我们在这里承认，这显然不是问题，否则递归不会用于此任务） ，您应该在 value == 1 处终止递归并返回文字 1 以节省一个不必要的递归级别。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-08-26T04:15:09.083

```
using System;
using NUnit.Framework;

namespace Recursion
{
  [TestFixture()]
    public class Test
    {
        [Test()]
        public void TestSum ()
        {
            Assert.AreEqual (Sum (new int[] { }), 0);
            Assert.AreEqual (Sum (new int[] { 0 }), 0);
            Assert.AreEqual (Sum (new int[] { 1 }), 1);
            Assert.AreEqual (Sum (new int[] { 1, 2, 3, 4, 5 }), 15);
        }

        public int Sum(int[] head)
        {
            if (head.Length == 0) return 0;

            int[] tail = new int[head.Length - 1];

            for (int i = 1; i < head.Length; i++) 
            {
                tail [i-1] = head [i];
            }

            return head[0] + Sum (tail);
        }
    }
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-11-21T19:55:23.500

也可以这样写：

```
public static int sum(int n){
    int total;

    if(n==1){
        total =1;

    }else{
        total = sum(n-1)+n;
    }
    return total;
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-04-21T07:00:08.707

```
 static int Sum(int[] addends)
    {
        if (addends.Length == 1)
        {
            return addends[0];
        }
        else
        {
            int tailIndex = addends.Length - 1;
            var subArray = addends[0..tailIndex];
            return addends[tailIndex] + Sum(subArray);
        }

    } 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-11-24T10:37:52.770

最后，递归 Sum 方法如下所示：

```
 // version 3

    public static int Sum(int startRange, int endRange)
    {
        if (endRange > startRange)
        {
            return endRange + Sum(startRange, endRange - 1);

        }

        if (endRange < startRange)
        {
            return startRange + Sum(endRange, startRange - 1);

        }

        return endRange; 

    } 
```

将 startRange 硬编码为 0 给我们：

```
 // version 2

    public static int Sum(int range)
    {
        if (range > 0)
        {
            return range + Sum(0, range - 1);

        }

        if (range < 0)
        {
            return Sum(range, -1);

        }

        return range;

    } 
```

...如果您只想将方法限制为正数，则不需要符号：

```
 // version 1

    public static unsigned int Sum(unsigned int range)
    {
        if (range > 0)
        {
            return range + Sum(0, range - 1);

        }

        return range;

    } 
```

我希望这有助于更深入地了解通过递归求和数字范围。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-07-30T18:44:57.323

实际上，我认为您不需要检查其他情况，因为

```
public static int sum(int number){
    if(number > 0){
       return number + sum(--number);
    }
    return number; // return 0 so that's why you don't need check else condition
} 
```

* * *

## 回答 #16

> 赞同：-2
> 
> 时间：2018-01-07T04:51:05.020

试试这个代码：

```
def sumr(n): 
    if n==0:
        return n
    return n+sumr(n-1) 
```

# garbage-collection - 使用windbg/sos时强制GC

> ID：785900
> 
> 赞同：1
> 
> 时间：2009-04-24T13:40:46.423
> 
> 标签：garbage-collection, windbg

> **可能重复：**
> [我可以从 WinDbg 运行 .NET 垃圾收集吗？](https://stackoverflow.com/questions/334174/can-i-run-a-net-garbage-collection-from-windbg)

我正在使用 windbg/sos 调试内存泄漏，但我找不到让 sos 强制进行垃圾收集的方法。sos 命令列表似乎不包括 gc。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-24T13:50:19.520

重复：[我可以从 WinDbg 运行 .NET 垃圾收集吗？](https://stackoverflow.com/questions/334174/can-i-run-a-net-garbage-collection-from-windbg)

还有在[外部触发 .NET 垃圾收集](https://stackoverflow.com/questions/101196/triggering-a-net-garbage-collection-externally)

有人可以编辑该问题以提及 sos（例如“sos 命令列表似乎不包括 gc。”）

# .net - WF Persistence - 删除旧的工作流程

> ID：785924
> 
> 赞同：4
> 
> 时间：2009-04-24T13:45:28.953
> 
> 标签：.net, workflow-foundation

当使用具有持久性的 Workflow Foundation 时，我们希望从中删除一些（或全部）工作流，这些工作流不再应该被持久化/运行。

我可以为此使用的任何脚本/工具吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-25T08:55:11.750

没有可用于执行此操作的标准 WF 工具。最好的方法是通过一些自定义命令行工具进入持久性数据库并删除它们。SqlWorkflowPersistenceService 没有任何帮助，因为您必须先启动 WF 运行时才能使用它来检索工作流，并且它们也能够开始运行。

# reporting-services - 我们可以在将 SSRS 报表呈现为 Excel 时隐藏或删除报表行吗？

> ID：785925
> 
> 赞同：1
> 
> 时间：2009-04-24T13:45:41.823
> 
> 标签：reporting-services

是否可以仅在报表的 excel 呈现中删除或隐藏表项中的特定行。我有一个摘要报告，其中包含指向其详细报告（钻取）的链接，当我将摘要报告导出到 excel 时，我想删除带有链接的行，因为它不能从 excel 中工作。任何想法？

谢谢你的时间。桑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-24T13:52:59.700

如果您要导出到 CSV，您可以将 DataElementOutput 设置为无。我认为在excel中隐藏报告并不容易。您可以尝试的一件事是使 URL 正常工作。我敢打赌，报告使用的是服务器的内部名称。应该有一种方法可以将 ssrs 配置为使用 FQDN。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-24T14:16:39.113

我同意乔希的观点。简而言之，没有一种简单的方法可以做到这一点。您可能会编写和安装自己的插件来代替 excel 输出来使用，但这将非常耗时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-24T21:30:25.843

如果您的用户知道他们想要导出到 excel/csv，您可以只创建一个没有链接的新报告，而是在摘要报告上创建一个指向您创建的新报告的链接，然后让他们从那里导出。

# wpf - 如何在 WPF 应用程序中构建动态数据输入表单？

> ID：785927
> 
> 赞同：8
> 
> 时间：2009-04-24T13:46:37.657
> 
> 标签：wpf, mvvm

我正在计划一个 WPF 应用程序，它将

*   能够创建**动态数据输入表单**（意味着表单从数据库中的数据而不是 XAML 中获取要显示的字段、它们的顺序等）
*   尽可能使用 MVVM 模式

以下是我的计划：在客户数据输入视图中，我将设置数据上下文：

```
<UserControl.DataContext>
    <vm:DynamicFormViewModel/>
</UserControl.DataContext> 
```

然后在我的 XAML 中包含一个元素作为表单的占位符：

```
<UserControl.Content>
    <view:DynamicFormView x:Name="CustomerEntry"/>
</UserControl.Content> 
```

然后在我的 ModelView 中我不想有静态属性，但我想将 XAML 构建为 ASP.NET 中的一个内置 HTML 控件，以这种方式：

```
View view = new View();
view.Children.Add(...) 
```

并以这种方式基于 ViewModel 从 Model 获取的数据（名字、姓氏）和元数据（字段标签、字段名称、字段帮助文本、字段显示顺序等）的集合构建 Grid。

*   **有没有人构建了一个可以以这种方式创建动态表单的 WPF 应用程序？**
*   你用过 MVVM 模式吗？
*   是否可以以这种方式使用 MVVM 模式，或者 MVVM 模式是否预先假定视图模型中的静态字段直接绑定到视图中的静态元素？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-24T13:56:21.597

您必须为各种字段数据类型编写数据模板，以便 WPF 将根据其类型选择如何显示您的数据。这种格式的东西：

*注意：这不是 WPF 只是伪代码*

```
<DataTemplate DataType="{x:Type DateTime}">
  <DatePicker Value="{Binding}"/>
</DataTemplate>  
<DataTemplate DataType="{x:Type String}">
  <TextBox Text="{Binding}"/>
</DataTemplate> 
```

它不必是原始类型。它可以是一个`Email`，`DateApproved`甚至是一个`Url`类类型。例如

```
class Customer  
{
   public Email Email{get;set;}
   public DateTime DateApproved{get;set;}
   public URI Url{get;set;}
}

public class Email 
{
   public string Type{get;set;}
   public string Value{get;set;} 
} 
```

..ETC...

**更新**

查看 MSDN 上的这个 WPF 动态 UI 示例：[Dynamic Data Entry with WPF and LINQ](http://code.msdn.microsoft.com/dynamicWPF/Release/ProjectReleases.aspx?ReleaseId=1201)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-24T14:14:17.730

您需要为每个字段类型（例如 Date、String、Bool）设置一个 DataTemplate。这将决定每个字段的显示方式。

然后，您可以使用数据库查询的列来生成对象列表并将它们放入 ItemsControl。

```
ObservableCollection<ColumnDef> columns = new ObservableCollection<ColumnDef>();

// Add columns from DB
columns.Add(new StringColumnDef{Object=..., Field=..., Label=..., Value=...});
columns.Add(new DateColumnDef{Object=..., Field=..., Label=..., Value=...});

items.ItemsSource = columns; // items is an ItemsControl 
```

项目控件中的每个项目都将根据该类型的 DataTemplate 显示。

在 ColumnDef 中，您可以使用 Reflection 通过 UI 控件的更改来更新数据对象。然后，您可以在用户保存时将更改应用到数据库。

# delphi - 流量面板。在运行时添加控件

> ID：785930
> 
> 赞同：3
> 
> 时间：2009-04-24T13:48:28.557
> 
> 标签：delphi, controls, flowpanel

有人知道如何在运行时向 TFlowPanel 添加控件，比如 TImage 吗？

问候，彼得

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-24T13:54:48.433

将任何控件添加到父控件：

```
MyControl := TMyControl.Create(MyForm); // Form is the owner
MyControl.Parent := ParentControl;      // Parent control is the parent 
```

如果您愿意，也可以设置其他属性。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-11T12:57:03.113

与普通容器只是略有不同，可以设置子控件的顺序。

```
OldIndex:= FlowPanel.GetControlIndex( MyControl );     
FlowPanel.SetControlIndex( MyControl, OldIndex + 1 ); 
```

# javascript - Web：图像旋转和缩放的解决方案

> ID：785939
> 
> 赞同：3
> 
> 时间：2009-04-24T13:52:51.700
> 
> 标签：javascript, image, zooming, rotation

我有一个显示大图像的网页，例如杂志的页面。我无法控制图像大小或方向。图像可能需要用户旋转才能正确定位。

是否有任何允许某人旋转和缩放给定图像的 Javascript 或 Flash 解决方案？理想情况下，我会指定单个图像和显示它时使用的尺寸。如果图像大于这些尺寸，则用户可以放大并更详细地查看图像的一部分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-24T14:13:52.803

我已经看到了一些使用直接 Javascript 和 CSS 旋转图像的解决方案。[拉斐尔](http://raphaeljs.com/)会做到这一点。显然甚至还有一个旋转图像的[例子。](http://raphaeljs.com/image-rotation.html)（它使用 SVG，但支持所有主流浏览器）

[这](http://www.marcofolio.net/webdesign/creating_a_polaroid_photo_viewer_with_css3_and_jquery.html)不是跨浏览器，但仍然是一个有趣的练习。

至于闪光灯旋转等...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-24T15:36:56.550

对于旋转图像，我使用了[jquery-rotate](http://code.google.com/p/jquery-rotate/)并且效果很好。

它不是完全跨浏览器，它不适用于 IE6（可能还有其他旧浏览器）。

对于缩放，我想您可以使用 javascript 制作自己的实现，您可以调整图像大小（使用 jQuery 很容易）。

# iis-7 - 在同一台 iis7 服务器上运行集成模式和经典模式

> ID：785944
> 
> 赞同：1
> 
> 时间：2009-04-24T13:53:28.950
> 
> 标签：iis-7, hosting

是否可以？如果是的话；如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-24T14:14:06.437

有可能的。在 IIS7 中，您只需为每种类型的应用程序创建多个应用程序池。在我的开发机器上，我有 IIS7 与应用程序池一起运行，用于以下用途：

经典模式下的 .NET 1.1 经典模式下
的 .NET 2.0
集成模式下的 .NET 3.5

到目前为止，这些似乎可以处理我遇到的任何应用程序。如果您还有其他人，请创建另一个应用程序池并相应地分配您的应用程序。

# java - 使用 JDK 工具 wsimport 从 .NET 2.0 应用程序生成的 WSDL 生成 Java SOAP Web 服务客户端时出现问题

> ID：785945
> 
> 赞同：42
> 
> 时间：2009-04-24T13:54:37.700
> 
> 标签：java, .net, web-services, axis, wsimport

我正在尝试使用 JDK 6 工具为某些 SOAP Web 服务生成客户端`wsimport`。WSDL 由 .NET 2.0 应用程序生成。对于 .NET 3.X 应用程序，它运行良好。

当我跑

```
wsimport -keep -p mypackage http://myservice?wsdl 
```

它显示了几个这样的错误消息：

> [错误] 具有相同名称“mypackage.SomeClass”的类/接口已在使用中。使用类自定义来解决此冲突。线 ？？http : [//myservice?wsdl](http://myservice?wsdl)

当我使用 Axis 1.4（使用 Eclipse WebTools 插件）生成 Web 服务客户端时。

有人知道我该怎么做才能使用该`wsimport`工具吗？我真的不明白“类定制”是什么。

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2009-09-16T19:20:32.977

我不知道这是否曾经解决过，但我花了一些时间在谷歌上搜索解决这个问题的方法。

我在这里找到了修复 - [https://jax-ws.dev.java.net/issues/show_bug.cgi?id=228](https://jax-ws.dev.java.net/issues/show_bug.cgi?id=228)

`-B-XautoNameResolution`解决方案是使用（无空格）运行 wsimport

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-03-13T04:33:29.357

对于使用 maven 阅读本文的任何人，这是将其添加到 .pom 文件的方法。请注意配置部分中的参数。这在文档中不是很容易找到。非常感谢 Isaac Stephens 在这方面的帮助。

```
<!-- definition for ERPStandardWork service -->
<execution>
  <id>ERPStandardWorkService</id>
  <goals>
    <goal>wsimport</goal>
  </goals>
  <configuration>
    <!-- this resolves naming conflicts within the wsdl - there are several copies of fault report objects which clash otherwise. -->
    <args>
       <arg>-B-XautoNameResolution</arg>
    </args>
    <wsdlDirectory>${basedir}/src/main/resources/META-INF/wsdl</wsdlDirectory>
    <wsdlFiles>
        <wsdlFile>ERPStandardWork.wsdl</wsdlFile>
    </wsdlFiles>
      <wsdlLocation>${basedir}/src/main/resources/META-INF/wsdl/ERPStandardWork.wsdl
    </wsdlLocation>
    <staleFile>${project.build.directory}/jaxws/ERPStandardWork/.staleFlag
    </staleFile>
  </configuration>
</execution> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-08T23:58:12.257

上面接受的答案将解决您的问题，但不会解决根本原因。

发生此问题是因为 wsdl 文件中的操作与 xsd 文件中的 xsd:complexType 具有相同的名称 - 如下例所示。所有类型和操作都应该有唯一的名称。

```
<xsd:complexType name="SearchDocuments">
      <xsd:sequence>
        <xsd:element name="document" type="ns0:SearchDocumentById" maxOccurs="unbounded"/>
      </xsd:sequence>
</xsd:complexType>

<operation name="SearchDocuments">
      <input wsam:Action="http://controller.xxx.xxx.com/DocumentWS/searchDocumentsRequest" message="tns:searchDocumentsRequest"/>
      <output wsam:Action="http://controller.xxx.xxx.com/DocumentWS/searchDocumentsResponse" message="tns:searchDocumentsResponse"/>
</operation> 
```

所以检查你的操作和类型。确保它们都没有相同的名称，即没有重复的名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-24T13:57:40.330

您可能从同一个包中的 WSDL 文件生成所有类。如果是这种情况，请尝试使用 wsimport 的 -p 选项为每个 WSDL 文件指定不同的目标包。

# apache-flex - Flex：ListItem 从列表中的其他项目中提取数据？

> ID：785947
> 
> 赞同：0
> 
> 时间：2009-04-24T13:55:16.530
> 
> 标签：apache-flex

我有一个带有自定义 ItemRenderer 的 TileList，每个项目都显示一个图像，该图像从它从 dataProvider 接收的数据中提取。奇怪的是，我不知道为什么有些项目显示的图像不在它们的数据块中，而是在另一个项目数据中。如果我从自己的数据中提取图像 url，我不知道它如何从另一个项目中获取图像 url。我使用工具提示来显示图像 url 和项目的数据，并验证该 URL 不在其数据中。

这是我正在使用的临时 XML：

```
 <data>

        <bs item_id="1">
            <variation price="300" month="JAN" stone="Garnet" image="<?=$img_dir?>jan.png" style="xsdfcSD" gold_color="Yellow" gold_carat="10"/>
            <variation price="400" month="FEB" stone="Garnet" image="<?=$img_dir?>feb.png" style="xsdfcSD" gold_color="Yellow" gold_carat="10"/>
            <variation price="550" month="MAR" stone="Garnet" image="<?=$img_dir?>march.png" style="xsdfcSD" gold_color="Yellow" gold_carat="10"/>
            <variation price="625" month="APR" stone="Garnet" image="<?=$img_dir?>april.png" style="xsdfcSD" gold_color="Yellow" gold_carat="10"/>
        </bs>

        <bs item_id="2">
            <variation price="300" month="JAN" stone="Garnet" image="<?=$img_dir?>jan.png" style="xsdfcSD" gold_color="Yellow" gold_carat="10"/>
            <variation price="400" month="FEB" stone="Garnet" image="<?=$img_dir?>feb.png" style="xsdfcSD" gold_color="Yellow" gold_carat="10"/>
            <variation price="550" month="MAR" stone="Garnet" image="<?=$img_dir?>march.png" style="xsdfcSD" gold_color="Yellow" gold_carat="10"/>
            <variation price="625" month="APR" stone="Garnet" image="<?=$img_dir?>april.png" style="xsdfcSD" gold_color="Yellow" gold_carat="10"/>
        </bs>

        <bs item_id="3">
            <variation price="300" month="JAN" stone="Garnet" image="<?=$img_dir?>jan.png" style="xsdfcSD" gold_color="Yellow" gold_carat="10"/>
            <variation price="400" month="FEB" stone="Garnet" image="<?=$img_dir?>feb.png" style="xsdfcSD" gold_color="Yellow" gold_carat="10"/>
            <variation price="550" month="MAR" stone="Garnet" image="<?=$img_dir?>march.png" style="xsdfcSD" gold_color="Yellow" gold_carat="10"/>
            <variation price="625" month="APR" stone="Garnet" image="<?=$img_dir?>april.png" style="xsdfcSD" gold_color="Yellow" gold_carat="10"/>
        </bs>

        <bs item_id="4">
            <variation price="300" month="JAN" stone="Garnet" image="<?=$img_dir?>PE105-BT.png" style="xsdfcSD" gold_color="Yellow" gold_carat="10"/>
            <variation price="400" month="FEB" stone="Garnet" image="<?=$img_dir?>PE105-EM.png" style="xsdfcSD" gold_color="Yellow" gold_carat="10"/>
            <variation price="550" month="MAR" stone="Garnet" image="<?=$img_dir?>PE105-OP.png" style="xsdfcSD" gold_color="Yellow" gold_carat="10"/>
            <variation price="625" month="APR" stone="Garnet" image="<?=$img_dir?>PE105.png" style="xsdfcSD" gold_color="Yellow" gold_carat="10"/>
        </bs>

</data> 
```

每个项目都有一个 < bs > 块。(4 项)

这是来自 ItemRender 的代码：

```
<mx:Canvas xmlns:mx="http://www.adobe.com/2006/mxml" width="150" height="150" xmlns:local="*">

    <mx:Script>
        <![CDATA[
            import mx.controls.Alert;

            private var _randomIndex:uint;
            private var _indexSet:Boolean;

            private function getRandomImage ():String
            {
                if (!_indexSet)
                {
                    var maxIndex:uint = data.children().length();
                    _randomIndex = Math.floor(Math.random()*maxIndex);
                    _indexSet = true;
                }
                return data.children()[_randomIndex].@image;
            }

        ]]>
    </mx:Script>

    <local:LoadingImage id="tn" toolTip="{tn.source+'\n\n'+data}" source="{getRandomImage()}" width="150" height="150"/>

</mx:Canvas> 
```

第 2 和第 3 显示仅在第 4 块中的图像。

有没有人看到我没有看到的东西？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-24T14:31:28.377

Itemrenderers 被回收，所以如果你在 set data() 中进行任何处理，你应该总是有匹配的 if / else 语句。您不能假设 itemrender 中的成员变量处于“已知”状态。在您的代码中，看起来 indexSet 没有正确初始化 + if 语句中没有其他内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-24T14:35:15.917

什么时候调用 getRandomImage？ItemRenderer 被重复使用，因此它们可能附有旧图像。如果您不使用新值重新加载它，它仍将具有相同的图像。也许您可以尝试重载 dataChanged 事件？我还注意到您的 _indexSet 可能无法按照您想要的方式工作，但这不应该是您的主要问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T17:43:49.067

我发现如果我将“数据”传递给像 getRandomImage(data) 这样的函数，它可以解决问题。不是100％肯定为什么。

# internet-explorer - 文件下载 servlet 在集群服务器上的行为与 IE 不同

> ID：785948
> 
> 赞同：1
> 
> 时间：2009-04-24T13:56:01.830
> 
> 标签：internet-explorer, http, servlets, jboss, cluster-computing

我有一个 servlet，它通过将 HTTP Content-Type 设置为“ `application/zip`”，将 Content-Disposition 设置为“ `attachment`”并将其写入响应来发送文件`OutputStream`；它在我的本地应用程序服务器上部署时表现正确，使浏览器显示弹出窗口以选择是否下载文件。

但是，当部署在集群的 jboss 服务器上时，IE 在整个传输过程中请求文件信息的速度为 0%，然后失败并显示一条错误消息，指出文件不可下载：更奇怪的是，使用 FF 和 Chrome servlet 行为正确，即与本地主机上的方式相同。

有什么线索吗？

我还可以提供一小段 servlet 代码的重要部分：

```
response.setContentType("application/zip; name=" + f.getName());
response.setContentLength((int)f.length());     
response.addHeader("Content-Disposition", "attachment;filename=" + f.getName());
byte[] buf = new byte[1024];
int bytesRead;
BufferedInputStream bis = new BufferedInputStream(new FileInputStream(f));
OutputStream os = response.getOutputStream();
while((bytesRead = bis.read(buf)) != -1) {
    os.write(buf, 0, bytesRead);                
}
os.flush();
bis.close(); 
```

我真的不知道问题出在我的 servlet 代码还是集群服务器配置中，但我开始猜测第二次机会可能是正确的……关于我的集群配置中可能出现什么问题的任何想法?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-24T14:16:20.580

这可能是这些文章中描述的 IE 行为的结果：

[http://support.microsoft.com/default.aspx?scid=kb%3Ben-us%3B181050](http://support.microsoft.com/default.aspx?scid=kb%3Ben-us%3B181050)

[http://support.microsoft.com/default.aspx/kb/813827](http://support.microsoft.com/default.aspx/kb/813827)

我有一个类似的问题（仅适用于 Tomcat），仅当文件大小足够大时才会发生。您可以通过测量从开始下载到错误消息的时间来轻松测试是否是这种情况 - 如果该时间是恒定的，您可能会遇到相同的错误。您可能不会在本地看到错误，因为文件加载速度足够快。

如果超时是由于生成文件的时间造成的，一种解决方案是以异步方式创建文件，并在文件准备好下载后首先开始下载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-27T08:39:35.747

好的，我修好了。

位于客户端和单个集群服务器之间的负载平衡器正在向每个 HTTP 响应添加“Cache-Control: no-cache”，这导致 IE 发疯。

删除标头指令解决了这个问题。

# apache2 - Apache 2.2 忽略 VirtualDocumentRoot 虚拟主机？

> ID：785966
> 
> 赞同：4
> 
> 时间：2009-04-24T14:01:38.213
> 
> 标签：apache2, virtualhost, apache, httpd.conf

我有几个域，我想通过 mod_vhost_alias 启用通配符子域

包含在我的 httpd.conf 中，我有以下通用规则：

```
<VirtualHost [ip here]:80>
    ServerName domain1.com
    ServerAlias www.domain1.com
    DocumentRoot /home/user1/public_html
</VirtualHost>
<VirtualHost [ip here]:80>
    ServerName *.domain1.com
    VirtualDocumentRoot /home/user1/subdomains/%-3+
</VirtualHost> 

<VirtualHost [ip here]:80>
    ServerName domain2.com
    ServerAlias www.domain2.com
    DocumentRoot /home/user2/public_html
</VirtualHost>
<VirtualHost [ip here]:80>
    ServerName *.domain2.com
    VirtualDocumentRoot /home/user2/subdomains/%-3+
</VirtualHost> 
```

问题是 apache 完全忽略了带有通配符 ServerNames 的虚拟主机。对 test.domain1.com 或 test.domain2.com 的任何请求都只会显示 /home/user1/public_html 的内容（根据 apache 的默认规则）。

## 其他一些信息：

`/home/user1/subdomains/test`并且`/home/user2/subdomains/test`都存在并在其中有文件

我所有的域都有一个在绑定配置中列出的通配符子域，它们指向 Vhost 规则中指定的相同 IP。子域的标准 Vhost 规则有效，但通配符无效。

的输出的剪辑版本`httpd -S`

```
# httpd -S
虚拟主机配置：
[ip here]:80 是 NameVirtualHost
         默认服务器 domain1.com (/etc/httpd/sites/user1:1)
         端口 80 namevhost domain1.com (/etc/httpd/sites/user1:1)
         端口 80 namevhost *.domain1.com (/etc/httpd/sites/user1:14)
         端口 80 namevhost domain2.com (/etc/httpd/sites/user2:1)
         端口 80 namevhost *.domain2.com (/etc/httpd/sites/user2:14)
语法OK
```

```
# httpd -M
加载模块：
 核心模块（静态）
 mpm_prefork_module（静态）
 http_module（静态）
 so_module（静态）
 rewrite_module（共享）
 auth_basic_module（共享）
 authz_host_module（共享）
 包含模块（共享）
 log_config_module（共享）
 logio_module（共享）
 mime_magic_module（共享）
 mime_module（共享）
 vhost_alias_module（共享）
 dir_module（共享）
 suexec_module（共享）
 php5_module（共享）
 suphp_module（共享）
 ssl_module（共享）
语法OK
```

任何有关问题所在的建议将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-24T14:26:55.487

我是个菜鸟，这是一个非常简单的解决方案。

`ServerName`不允许通配符，但允许`ServerAlias`，所以我只是再次复制了服务器名。

这是任何碰巧找到此答案的域的最终最小化配置（当您在谷歌上搜索并找到问题但没有答案时，我讨厌它）：

```
<VirtualHost [ip here]:80>
    ServerName domain1.com
    ServerAlias www.domain1.com
    DocumentRoot /home/user1/public_html
</VirtualHost>
<VirtualHost [ip here]:80>
    ServerName domain1.com #<-- The fix. Wildcards not supported in ServerName
    ServerAlias *.domain1.com
    VirtualDocumentRoot /home/user1/subdomains/%-3+
</VirtualHost> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-02-07T00:20:23.117

大卫，这个在成功时停止 mod_rewrite 循环的解决方案将对您的问题有用）。

重写循环停止器：

```
重写条件 %{ENV:REDIRECT_STATUS} 200|[45]0[0-9]
重写规则 .* - [L]

```

# perl - 如何在脚本仍在运行时使用 vim 从 Perl 编辑文本？

> ID：785967
> 
> 赞同：4
> 
> 时间：2009-04-24T14:01:41.333
> 
> 标签：perl, vim, temporary-files

我有一个输出文本的 Perl 脚本。我想将此文本导入 vim，编辑它，保存然后退出。退出时，我希望原始 Perl 脚本处理编辑后的文件。

例如，当您添加新工作时如何`crontab -e`工作。

谢谢 ：）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-04-24T14:33:33.770

听起来像是使用[system](http://perldoc.perl.org/functions/system.html)在文件名上运行 vim 的一个非常简单的案例。这将等到 vim 完成，此时您可以继续阅读文件的新内容。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-24T17:22:57.293

```
use File::Temp;
my $fh = new File::Temp();
my $fname = $fh->filename;
print $fh "My Text";
$fh->close();
system($ENV{EDITOR}, $fname);
open $fh, '<', $fname or die "Can't open temp file: $!";
while(<$fh>) { print }
close $fh; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-24T15:14:01.630

一个建议：为什么不将源代码抓取到 crontab 并查看它的作用？

除此之外，放松有你的答案。

我认为思考这个问题的方法是：

“好的，我需要一个程序来写出一个文件，调用 vim，然后对文件进行进一步处理。所以，这是我编写文件的例程，这是我调用 vim 的例程（使用系统），这是我的例程在 vim 完成后进行后处理。现在我将它们全部连接到我的主程序中，我就完成了！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-24T14:30:49.923

您似乎想将脚本的输出通过管道传输到 vim：

```
脚本 | vim

```

然后你希望脚本以某种方式知道 Vim 已经完成并继续。这不是 I/O 重定向的工作方式。该脚本不知道其输出被输入到哪个程序中。

您提到了其他程序，例如`crontab`and `cvs`; 它们的共同点之一是**它们自己调用编辑器**。他们创建临时文件，阅读 EDITOR 或 VISUAL 环境变量（查看手册了解他们如何选择哪个环境变量的详细信息），运行给定程序，然后等待程序完成。然后他们继续运行并使用他们之前指定的文件。

事实证明我在 Perl 中完全做到了这一点。我创建了一个临时文件（带有[`tempfile`](http://search.cpan.org/~jhi/perl-5.8.0/lib/File/Temp.pm)），在其中写入了一堆文本，然后用于[`system`](http://perldoc.perl.org/functions/system.html)调用该文件的编辑器。您甚至不必在运行编辑器时关闭文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-24T14:38:17.470

管道输出到*vim -*不要忘记最后的破折号。

```
script.pl | vim - 
```

这将使用脚本输出的内容打开 vim。只需保存它*:w 文件名*并退出*:q*。这不是 crontab -e 的工作方式，但它以一种简单的方式足够接近。

编辑：
我错过了这部分（或者问题后来被编辑了）：

> 退出时，我希望原始 Perl 脚本处理编辑后的文件。

这不是最好的方法，但是按照我的原始答案，这可行（如果您将文件保存为 file.txt）：

```
perl -le 'print "1234"' | vim - && perl -pe '' file.txt 
```

只需用您的 perl 命令替换 perl 命令，它应该可以工作。就像我说的，这不是最好的答案，但它应该有效。

# python - AttributeError：xmlNode 实例没有属性“isCountNode”

> ID：785972
> 
> 赞同：0
> 
> 时间：2009-04-24T14:02:30.770
> 
> 标签：python, xml, centos, libxml2, centos5

我正在编写的 Python 应用程序中使用 libxml2，并尝试运行一些测试代码来解析 XML 文件。该程序从 Internet 下载 XML 文件并对其进行解析。但是，我遇到了一个问题。

使用以下代码：

```
xmldoc = libxml2.parseDoc(gfile_content)

droot = xmldoc.children         # Get document root
dchild = droot.children         # Get child nodes

while dchild is not None:
        if dchild.type == "element":
                print "\tAn element with ", dchild.isCountNode(), "child(ren)"
                print "\tAnd content", repr(dchild.content)
        dchild = dchild.next
xmldoc.freeDoc(); 
```

...基于[XML.com 上这篇文章中](http://www.xml.com/pub/a/2003/05/14/py-xml.html)的代码示例，当我尝试在 Python 2.4.3（CentOS 5.2 包）上运行此代码时收到以下错误。

```
Traceback (most recent call last):
  File "./xml.py", line 25, in ?
    print "\tAn element with ", dchild.isCountNode(), "child(ren)"
AttributeError: xmlNode instance has no attribute 'isCountNode' 
```

我比较卡在这里。

**编辑：**我应该在这里注意我也尝试了 IsCountNode() ，但它仍然抛出错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-24T14:04:39.470

isCountNode 应为“lsCountNode”（小写“L”）

# java - 在Android应用程序中存储用户设置的最合适方法是什么

> ID：785973
> 
> 赞同：317
> 
> 时间：2009-04-24T14:03:08.337
> 
> 标签：java, android, encryption, preferences, credentials

我正在创建一个使用用户名/密码连接到服务器的应用程序，我想启用“保存密码”选项，这样用户就不必在每次应用程序启动时输入密码。

我试图用 Shared Preferences 来做到这一点，但不确定这是否是最好的解决方案。

对于如何在 Android 应用程序中存储用户值/设置的任何建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：238
> 
> 时间：2009-04-24T16:20:35.243

一般来说，SharedPreferences 是您存储首选项的最佳选择，所以总的来说，我建议使用这种方法来保存应用程序和用户设置。

这里唯一需要关注的是您要保存的内容。存储密码总是一件棘手的事情，我会特别小心将它们存储为明文。Android 架构是这样的，您的应用程序的 SharedPreferences 被沙箱化以防止其他应用程序能够访问这些值，因此那里有一些安全性，但是对手机的物理访问可能会允许访问这些值。

如果可能的话，我会考虑修改服务器以使用协商的令牌来提供访问权限，例如[OAuth](http://code.google.com/p/oauth/)。或者，您可能需要构建某种加密存储，尽管这并非易事。至少，确保在将密码写入磁盘之前对其进行了加密。

* * *

## 回答 #2

> 赞同：212
> 
> 时间：2011-06-18T02:42:09.297

我同意 Reto 和 fixedd。客观地说，投入大量时间和精力来加密 SharedPreferences 中的密码并没有多大意义，因为任何可以访问您的首选项文件的攻击者很可能也可以访问您的应用程序的二进制文件，因此也可以访问解密的密钥密码。

然而，话虽如此，似乎确实有一项宣传计划正在进行，以识别将密码以明文形式存储在 SharedPreferences 中的移动应用程序，并对这些应用程序发出不利的影响。有关一些示例，请参见[http://blogs.wsj.com/digits/2011/06/08/some-top-apps-put-data-at-risk/](http://blogs.wsj.com/digits/2011/06/08/some-top-apps-put-data-at-risk/)和[http://viaforensics.com/appwatchdog](http://viaforensics.com/appwatchdog)。

虽然我们需要更多地关注安全性，但我认为这种对这一特定问题的关注实际上并没有显着提高我们的整体安全性。但是，就目前的看法而言，这是一种加密您放置在 SharedPreferences 中的数据的解决方案。

只需将您自己的 SharedPreferences 对象包装在这个对象中，您读/写的任何数据都会自动加密和解密。例如。

```
final SharedPreferences prefs = new ObscuredSharedPreferences( 
    this, this.getSharedPreferences(MY_PREFS_FILE_NAME, Context.MODE_PRIVATE) );

// eg.    
prefs.edit().putString("foo","bar").commit();
prefs.getString("foo", null); 
```

这是该类的代码：

```
/**
 * Warning, this gives a false sense of security.  If an attacker has enough access to
 * acquire your password store, then he almost certainly has enough access to acquire your
 * source binary and figure out your encryption key.  However, it will prevent casual
 * investigators from acquiring passwords, and thereby may prevent undesired negative
 * publicity.
 */
public class ObscuredSharedPreferences implements SharedPreferences {
    protected static final String UTF8 = "utf-8";
    private static final char[] SEKRIT = ... ; // INSERT A RANDOM PASSWORD HERE.
                                               // Don't use anything you wouldn't want to
                                               // get out there if someone decompiled
                                               // your app.

    protected SharedPreferences delegate;
    protected Context context;

    public ObscuredSharedPreferences(Context context, SharedPreferences delegate) {
        this.delegate = delegate;
        this.context = context;
    }

    public class Editor implements SharedPreferences.Editor {
        protected SharedPreferences.Editor delegate;

        public Editor() {
            this.delegate = ObscuredSharedPreferences.this.delegate.edit();                    
        }

        @Override
        public Editor putBoolean(String key, boolean value) {
            delegate.putString(key, encrypt(Boolean.toString(value)));
            return this;
        }

        @Override
        public Editor putFloat(String key, float value) {
            delegate.putString(key, encrypt(Float.toString(value)));
            return this;
        }

        @Override
        public Editor putInt(String key, int value) {
            delegate.putString(key, encrypt(Integer.toString(value)));
            return this;
        }

        @Override
        public Editor putLong(String key, long value) {
            delegate.putString(key, encrypt(Long.toString(value)));
            return this;
        }

        @Override
        public Editor putString(String key, String value) {
            delegate.putString(key, encrypt(value));
            return this;
        }

        @Override
        public void apply() {
            delegate.apply();
        }

        @Override
        public Editor clear() {
            delegate.clear();
            return this;
        }

        @Override
        public boolean commit() {
            return delegate.commit();
        }

        @Override
        public Editor remove(String s) {
            delegate.remove(s);
            return this;
        }
    }

    public Editor edit() {
        return new Editor();
    }

    @Override
    public Map<String, ?> getAll() {
        throw new UnsupportedOperationException(); // left as an exercise to the reader
    }

    @Override
    public boolean getBoolean(String key, boolean defValue) {
        final String v = delegate.getString(key, null);
        return v!=null ? Boolean.parseBoolean(decrypt(v)) : defValue;
    }

    @Override
    public float getFloat(String key, float defValue) {
        final String v = delegate.getString(key, null);
        return v!=null ? Float.parseFloat(decrypt(v)) : defValue;
    }

    @Override
    public int getInt(String key, int defValue) {
        final String v = delegate.getString(key, null);
        return v!=null ? Integer.parseInt(decrypt(v)) : defValue;
    }

    @Override
    public long getLong(String key, long defValue) {
        final String v = delegate.getString(key, null);
        return v!=null ? Long.parseLong(decrypt(v)) : defValue;
    }

    @Override
    public String getString(String key, String defValue) {
        final String v = delegate.getString(key, null);
        return v != null ? decrypt(v) : defValue;
    }

    @Override
    public boolean contains(String s) {
        return delegate.contains(s);
    }

    @Override
    public void registerOnSharedPreferenceChangeListener(OnSharedPreferenceChangeListener onSharedPreferenceChangeListener) {
        delegate.registerOnSharedPreferenceChangeListener(onSharedPreferenceChangeListener);
    }

    @Override
    public void unregisterOnSharedPreferenceChangeListener(OnSharedPreferenceChangeListener onSharedPreferenceChangeListener) {
        delegate.unregisterOnSharedPreferenceChangeListener(onSharedPreferenceChangeListener);
    }

    protected String encrypt( String value ) {

        try {
            final byte[] bytes = value!=null ? value.getBytes(UTF8) : new byte[0];
            SecretKeyFactory keyFactory = SecretKeyFactory.getInstance("PBEWithMD5AndDES");
            SecretKey key = keyFactory.generateSecret(new PBEKeySpec(SEKRIT));
            Cipher pbeCipher = Cipher.getInstance("PBEWithMD5AndDES");
            pbeCipher.init(Cipher.ENCRYPT_MODE, key, new PBEParameterSpec(Settings.Secure.getString(context.getContentResolver(),Settings.Secure.ANDROID_ID).getBytes(UTF8), 20));
            return new String(Base64.encode(pbeCipher.doFinal(bytes), Base64.NO_WRAP),UTF8);

        } catch( Exception e ) {
            throw new RuntimeException(e);
        }

    }

    protected String decrypt(String value){
        try {
            final byte[] bytes = value!=null ? Base64.decode(value,Base64.DEFAULT) : new byte[0];
            SecretKeyFactory keyFactory = SecretKeyFactory.getInstance("PBEWithMD5AndDES");
            SecretKey key = keyFactory.generateSecret(new PBEKeySpec(SEKRIT));
            Cipher pbeCipher = Cipher.getInstance("PBEWithMD5AndDES");
            pbeCipher.init(Cipher.DECRYPT_MODE, key, new PBEParameterSpec(Settings.Secure.getString(context.getContentResolver(),Settings.Secure.ANDROID_ID).getBytes(UTF8), 20));
            return new String(pbeCipher.doFinal(bytes),UTF8);

        } catch( Exception e) {
            throw new RuntimeException(e);
        }
    }

} 
```

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2009-05-04T08:50:26.707

在 Android Activity 中存储单个首选项的最简单方法是执行以下操作：

```
Editor e = this.getPreferences(Context.MODE_PRIVATE).edit();
e.putString("password", mPassword);
e.commit(); 
```

如果您担心这些的安全性，那么您始终可以在存储密码之前对其进行加密。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2011-03-02T14:56:26.387

使用 Richard 提供的代码段，您可以在保存密码之前对其进行加密。然而，preferences API 并没有提供一种简单的方法来截取值并对其进行加密——您可以阻止它通过 OnPreferenceChange 侦听器保存，并且理论上您可以通过preferenceChangeListener 对其进行修改，但这会导致无限循环。

我之前曾建议添加“隐藏”首选项以实现此目的。这绝对不是最好的方法。我将介绍另外两个我认为更可行的选择。

首先，最简单的，是在一个preferenceChangeListener中，你可以获取输入的值，加密它，然后将它保存到另一个preferences文件中：

```
 public boolean onPreferenceChange(Preference preference, Object newValue) {
      // get our "secure" shared preferences file.
      SharedPreferences secure = context.getSharedPreferences(
         "SECURE",
         Context.MODE_PRIVATE
      );
      String encryptedText = null;
      // encrypt and set the preference.
      try {
         encryptedText = SimpleCrypto.encrypt(Preferences.SEED,(String)newValue);

         Editor editor = secure.getEditor();
         editor.putString("encryptedPassword",encryptedText);
         editor.commit();
      }
      catch (Exception e) {
         e.printStackTrace();
      }
      // always return false.
      return false; 
   } 
```

第二种方式，也是我现在更喜欢的方式，是创建自己的自定义首选项，扩展 EditTextPreference、@Override`setText()`和`getText()`方法，以便`setText()`加密密码并`getText()`返回 null。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-05-14T13:21:53.447

好的; 自从答案有点混杂以来已经有一段时间了，但这里有一些常见的答案。我疯狂地研究了这个，很难找到一个好的答案

1.  MODE_PRIVATE 方法通常被认为是安全的，如果您假设用户没有 root 设备。您的数据以纯文本形式存储在文件系统的一部分中，只能由原始程序访问。这使得在有根设备上使用另一个应用程序轻松获取密码。再说一次，你想支持有根设备吗？

2.  AES 仍然是你能做的最好的加密。如果你开始一个新的实现，如果我发布这个已经有一段时间了，记得查看这个。最大的问题是“如何处理加密密钥？”

所以，现在我们在“如何处理密钥？” 部分。这是困难的部分。得到钥匙原来不是那么糟糕。您可以使用密钥派生函数获取一些密码并使其成为非常安全的密钥。您确实会遇到诸如“您使用 PKFDF2 进行了多少次通过？”之类的问题，但这是另一个话题

1.  理想情况下，您将 AES 密钥存储在设备之外。您必须找到一种安全、可靠、安全地从服务器检索密钥的好方法

2.  您有某种登录序列（甚至是您为远程访问所做的原始登录序列）。您可以使用相同的密码运行两次密钥生成器。它的工作原理是您使用新的盐和新的安全初始化向量两次派生密钥。您将其中一个生成的密码存储在设备上，并将第二个密码用作 AES 密钥。

登录时，您重新派生本地登录的密钥并将其与存储的密钥进行比较。完成后，您可以使用 AES 的派生密钥 #2。

1.  使用“一般安全”的方法，您使用 AES 加密数据并将密钥存储在 MODE_PRIVATE 中。这是最近的一篇 Android 博客文章推荐的。不是非常安全，但对某些人来说比纯文本更好

你可以做很多这些变化。例如，您可以使用快速 PIN（派生）代替完整的登录序列。快速 PIN 可能不如完整的登录序列安全，但它比纯文本安全许多倍

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-04-04T18:04:40.760

我知道这有点死灵，但你应该使用 Android [AccountManager](http://developer.android.com/reference/android/accounts/AccountManager.html)。它是专门为这种情况而设计的。这有点麻烦，但它所做的一件事就是在 SIM 卡发生变化时使本地凭据失效，因此，如果有人刷你的手机并将新的 SIM 卡放入其中，你的凭据不会受到损害。

这也为用户提供了一种快速简便的方法来访问（并可能删除）他们在设备上拥有的任何帐户的存储凭据，所有这些都可以从一个地方进行。

[SampleSyncAdapter](http://developer.android.com/resources/samples/SampleSyncAdapter/index.html)是一个使用存储的帐户凭据的示例。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2014-10-30T17:00:00.567

我将把我的帽子扔进戒指，只是为了谈论在 Android 上保护密码的一般性。在 Android 上，设备二进制文件应该被认为是受损的——这对于任何直接由用户控制的最终应用程序都是一样的。从概念上讲，黑客可以使用对二进制文件的必要访问来反编译它并根除您的加密密码等。

因此，如果安全是您的主要关注点，我想提出两个建议：

1）不要存储实际密码。存储授予的访问令牌并使用访问令牌和手机的签名来验证会话服务器端。这样做的好处是您可以使令牌具有有限的持续时间，您不会损害原始密码并且您有一个很好的签名，您可以使用它来关联以后的流量（例如检查入侵尝试并使令牌使其无用）。

2）利用2因素身份验证。这可能更令人讨厌和干扰，但对于某些合规情况是不可避免的。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2017-10-25T02:32:51.503

*这是根据问题标题（就像我一样）到达这里的人的补充答案，不需要处理与保存密码相关的安全问题。*

# 如何使用共享首选项

用户设置通常使用`SharedPreferences`键值对保存在 Android 本地。您使用该`String`键来保存或查找关联的值。

### 写入共享首选项

```
String key = "myInt";
int valueToSave = 10;

SharedPreferences sharedPref = PreferenceManager.getDefaultSharedPreferences(context);
SharedPreferences.Editor editor = sharedPref.edit();
editor.putInt(key, valueToSave).commit(); 
```

使用`apply()`而不是`commit()`在后台保存而不是立即保存。

### 从共享首选项中读取

```
String key = "myInt";
int defaultValue = 0;

SharedPreferences sharedPref = PreferenceManager.getDefaultSharedPreferences(context);
int savedValue = sharedPref.getInt(key, defaultValue); 
```

如果未找到密钥，则使用默认值。

# 笔记

*   与其像我上面那样在多个地方使用本地键字符串，不如在单个位置使用常量。您可以在设置活动的顶部使用类似的内容：

    ```
     final static String PREF_MY_INT_KEY = "myInt"; 
    ```

*   我`int`在示例中使用了 an，但您也可以使用`putString()`, `putBoolean()`, `getString()`,`getBoolean()`等。

*   有关更多详细信息，请参阅[文档](https://developer.android.com/training/basics/data-storage/shared-preferences.html)。

*   有多种方法可以获取 SharedPreferences。请参阅[此答案](https://stackoverflow.com/a/46925053/3681880)以了解要注意的事项。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-09-21T21:51:40.363

您还可以查看这个包含您提到的功能的小库。

[https://github.com/kovmarci86/android-secure-preferences](https://github.com/kovmarci86/android-secure-preferences)

它类似于这里的其他一些方法。希望有帮助:)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-09-06T05:49:10.227

此答案基于 Mark 建议的方法。创建了一个自定义版本的 EditTextPreference 类，它在视图中看到的纯文本和存储在首选项存储中的密码的加密版本之间来回转换。

正如大多数在此线程上回答的人所指出的那样，这不是一种非常安全的技术，尽管安全程度部分取决于所使用的加密/解密代码。但它相当简单方便，并且会阻止大多数随意的窥探。

这是自定义 EditTextPreference 类的代码：

```
package com.Merlinia.OutBack_Client;

import android.content.Context;
import android.preference.EditTextPreference;
import android.util.AttributeSet;
import android.util.Base64;

import com.Merlinia.MEncryption_Main.MEncryptionUserPassword;

/**
 * This class extends the EditTextPreference view, providing encryption and decryption services for
 * OutBack user passwords. The passwords in the preferences store are first encrypted using the
 * MEncryption classes and then converted to string using Base64 since the preferences store can not
 * store byte arrays.
 *
 * This is largely copied from this article, except for the encryption/decryption parts:
 * https://groups.google.com/forum/#!topic/android-developers/pMYNEVXMa6M
 */
public class EditPasswordPreference  extends EditTextPreference {

    // Constructor - needed despite what compiler says, otherwise app crashes
    public EditPasswordPreference(Context context) {
        super(context);
    }

    // Constructor - needed despite what compiler says, otherwise app crashes
    public EditPasswordPreference(Context context, AttributeSet attributeSet) {
        super(context, attributeSet);
    }

    // Constructor - needed despite what compiler says, otherwise app crashes
    public EditPasswordPreference(Context context, AttributeSet attributeSet, int defaultStyle) {
        super(context, attributeSet, defaultStyle);
    }

    /**
     * Override the method that gets a preference from the preferences storage, for display by the
     * EditText view. This gets the base64 password, converts it to a byte array, and then decrypts
     * it so it can be displayed in plain text.
     * @return  OutBack user password in plain text
     */
    @Override
    public String getText() {
        String decryptedPassword;

        try {
            decryptedPassword = MEncryptionUserPassword.aesDecrypt(
                     Base64.decode(getSharedPreferences().getString(getKey(), ""), Base64.DEFAULT));
        } catch (Exception e) {
            e.printStackTrace();
            decryptedPassword = "";
        }

        return decryptedPassword;
    }

    /**
     * Override the method that gets a text string from the EditText view and stores the value in
     * the preferences storage. This encrypts the password into a byte array and then encodes that
     * in base64 format.
     * @param passwordText  OutBack user password in plain text
     */
    @Override
    public void setText(String passwordText) {
        byte[] encryptedPassword;

        try {
            encryptedPassword = MEncryptionUserPassword.aesEncrypt(passwordText);
        } catch (Exception e) {
            e.printStackTrace();
            encryptedPassword = new byte[0];
        }

        getSharedPreferences().edit().putString(getKey(),
                                          Base64.encodeToString(encryptedPassword, Base64.DEFAULT))
                .commit();
    }

    @Override
    protected void onSetInitialValue(boolean restoreValue, Object defaultValue) {
        if (restoreValue)
            getEditText().setText(getText());
        else
            super.onSetInitialValue(restoreValue, defaultValue);
    }
} 
```

这显示了如何使用它 - 这是驱动首选项显示的“项目”文件。请注意，它包含三个普通的 EditTextPreference 视图和一个自定义 EditPasswordPreference 视图。

```
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">

    <EditTextPreference
        android:key="@string/useraccountname_key"
        android:title="@string/useraccountname_title"
        android:summary="@string/useraccountname_summary"
        android:defaultValue="@string/useraccountname_default"
        />

    <com.Merlinia.OutBack_Client.EditPasswordPreference
        android:key="@string/useraccountpassword_key"
        android:title="@string/useraccountpassword_title"
        android:summary="@string/useraccountpassword_summary"
        android:defaultValue="@string/useraccountpassword_default"
        />

    <EditTextPreference
        android:key="@string/outbackserverip_key"
        android:title="@string/outbackserverip_title"
        android:summary="@string/outbackserverip_summary"
        android:defaultValue="@string/outbackserverip_default"
        />

    <EditTextPreference
        android:key="@string/outbackserverport_key"
        android:title="@string/outbackserverport_title"
        android:summary="@string/outbackserverport_summary"
        android:defaultValue="@string/outbackserverport_default"
        />

</PreferenceScreen> 
```

至于实际的加密/解密，留给读者作为练习。我目前正在使用基于这篇文章[http://zenu.wordpress.com/2011/09/21/aes-128bit-cross-platform-java-and-c-encryption-compatibility/](http://zenu.wordpress.com/2011/09/21/aes-128bit-cross-platform-java-and-c-encryption-compatibility/)的一些代码，尽管具有不同的值对于密钥和初始化向量。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-12-03T10:40:56.973

首先，我认为用户的数据不应该存储在手机上，如果必须将数据存储在手机上的某个地方，则应该在应用程序的私有数据中对其进行加密。用户凭证的安全性应该是应用程序的优先级。

敏感数据应安全存储或根本不存储。如果设备丢失或恶意软件感染，不安全存储的数据可能会受到损害。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2018-11-07T13:23:21.883

我使用 Android KeyStore 在 ECB 模式下使用 RSA 加密密码，然后将其保存在 SharedPreferences 中。

当我想要找回密码时，我从 SharedPreferences 中读取加密的密码并使用 KeyStore 对其进行解密。

使用这种方法，您可以生成一个公钥/私钥对，其中的私钥由 Android 安全存储和管理。

这是有关如何执行此操作的链接：[Android KeyStore Tutorial](https://www.androidauthority.com/use-android-keystore-store-passwords-sensitive-information-623779/)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-02-18T05:30:26.670

正如其他人已经指出的那样，您通常可以使用 SharedPreferences 但如果您想存储加密的数据，这有点不方便。幸运的是，现在有一种更简单、更快捷的方式来加密数据，因为有一个 SharedPreferences 的实现可以加密键和值。您可以在 Android JetPack Security中使用**EncryptedSharedPreferences 。**

只需将 AndroidX Security 添加到您的 build.gradle 中：

```
implementation 'androidx.security:security-crypto:1.0.0-rc01' 
```

你可以像这样使用它：

```
String masterKeyAlias = MasterKeys.getOrCreate(MasterKeys.AES256_GCM_SPEC);

SharedPreferences sharedPreferences = EncryptedSharedPreferences.create(
    "secret_shared_prefs",
    masterKeyAlias,
    context,
    EncryptedSharedPreferences.PrefKeyEncryptionScheme.AES256_SIV,
    EncryptedSharedPreferences.PrefValueEncryptionScheme.AES256_GCM
);

// use the shared preferences and editor as you normally would
SharedPreferences.Editor editor = sharedPreferences.edit(); 
```

查看更多详细信息：[https ://android-developers.googleblog.com/2020/02/data-encryption-on-android-with-jetpack.html](https://android-developers.googleblog.com/2020/02/data-encryption-on-android-with-jetpack.html)

官方文档：[https ://developer.android.com/reference/androidx/security/crypto/EncryptedSharedPreferences](https://developer.android.com/reference/androidx/security/crypto/EncryptedSharedPreferences)

* * *

## 回答 #14

> 赞同：-3
> 
> 时间：2009-04-27T06:09:44.563

您需要使用 sqlite, security apit 来存储密码。这是最好的例子，它存储密码，--passwordsafe。这是来源和解释的链接——http: [//code.google.com/p/android-passwordsafe/](http://code.google.com/p/android-passwordsafe/)

* * *

## 回答 #15

> 赞同：-3
> 
> 时间：2013-10-18T08:41:05.857

共享首选项是存储我们的应用程序数据的最简单方法。但是任何人都可以通过应用程序管理器清除我们共享的偏好数据。所以我认为这对我们的应用程序来说并不完全安全。

# asp.net - 允许空值与默认值

> ID：785975
> 
> 赞同：1
> 
> 时间：2009-04-24T14:03:25.713
> 
> 标签：asp.net, database, domain-driven-design

我正在开发一个替换许多现有纸质表单的 ASP.NET 项目。其中一个要求是用户可以在任何状态下保存表单，即他们可以创建一个新的空白表单并立即将其保存为无数据或部分数据。我在每次保存时验证数据类型，但在用户将表单标记为已完成之前不会验证必填字段。

我不确定在数据库和域模型中处理此要求的最佳方法是什么。在我看来，我有两个选择：

1.  允许任何可能没有数据的字段为空。这感觉像是“正确”的方法，但它要求几乎每个数据库字段都允许空值，并且我必须围绕许多可空类型编写代码。此外，当表单最终确定时，数据库中不会强制执行任何必填字段。
2.  使用有意义的默认值填充我的业务对象。在某些情况下，我可以使用的许多（但不是全部）字段都有有意义的默认值。这种方法接近于“幻数”，这让我感到不舒服。

哪种方法最好？还是有第三种方法？我不愿意走极端，比如分桌。

编辑添加：自从我接受了回复以来，我想对此进行一些扩展。我对拆分表不感兴趣的主要原因是，一旦提交了项目，表单上的数据就会用于为另一个系统生成数据，即记录系统。此时，原始表单数据不太可能被修改或用于报告。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-24T14:06:46.220

我不明白你为什么不想拆分表格。我不知道你在哪个领域，但我可以想象有两类人：

*   提交表格的人
*   没有的人

作为一名商业主管，我不在乎第二个。但我非常关心第一个，他们需要正确输入所有数据。

它还提高了效率 - 您对聚合数据的大部分查询都将在第一个表上进行，而不是在第二个表上。第二个表将仅用于索引查找。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-24T14:14:37.247

如果拆分表（是否有多个？）不是一种选择，我会考虑创建单个表来存储不完整形式的对象的序列化，并且仅在表单提交时将表单提交给“真实”表完全由用户提交。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-24T14:06:39.247

如果没有合理的默认值，并且您不想拆分数据，那么空值几乎肯定是您的最佳选择。重新数据库不是在完成时验证它们不为空......好吧，如果您不想拆分表，那么您无能为力（缺少使用`CHECK`约束或`INSTEAD OF`触发器来运行验证）。但数据库并不是*唯一*负责数据验证的地方。您的应用程序逻辑也可以做到这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-24T14:13:51.570

您可以在每列上使用带有“允许空值”的临时表来存储包含部分数据或不包含数据的表单，并在用户将表单标记为已完成时将数据复制/移动到最终表。这样，您不依赖默认值（用户可能忘记更改），您可以保存在任何状态，并且最终仍然有验证。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-24T15:07:04.437

这是一种需要拆分表的情况。我知道你说过你不想那样做，并且在评论中甚至说“这个项目不保证那种程度的努力”。但这确实是最好的解决方案。

设置除您的键可为空之外的所有内容的初步表。当用户将表单标记为完成并通过验证时，将其移至最终表格。这不仅是正确的做法，而且在处理完成的表单时，它可能比“围绕可空值进行编码”更省力。

如果您需要查看所有表格，无论是否完成，请创建一个联合视图。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-24T14:07:15.860

我会采用第一个选项，但会在数据库表中添加一列，以便在表单完成时对其进行标记。然后对于使用表单数据的任何事情，它只需要检查表单是否已完成。

这是我对解决此问题的建议。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-24T14:14:13.503

`NULL`值不能通过索引搜索。

如果您需要发出类似“选择未填写某个字段的前 10 个表单”之类的查询，则此查询将使用`FULL TABLE SCAN`可能效率不高的 a。

`Oracle`不区分`NULL`和空字符串，但其他数据库可以。您可能希望创建一个空字符串`DEFAULT`作为未填充字段并在搜索中使用它。

如果您不需要搜索未填写的字段，则只需将它们设为`NULL`.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-24T14:17:56.270

**检查约束 + 查看**

如果您没有状态字段，请添加一个，这样您就可以知道它已完成。

*   在该状态字段上添加检查约束，因此如果任何列为空，则不能将其标记为已完成。

当您在“已完成”表单上编写查询时，如果您执行以下两个选项之一，则可以忽略到处检查空值：

*   只需在 where 子句中添加 Status="F"inished
*   只查看已完成的

使用“完成视图”时，您不必进行所有验证检查或担心结果中出现未完成的检查

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-24T14:18:12.310

NULL 通常表示“不知道”（在数据库中），而空字符串实际上可以表示空字符串。

在您的情况下，我倾向于使用 NULL 作为“不知道”的值。当您打印出数据时，您只需假设任何 NULL 值都表示一个空字符串。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-04-24T15:08:47.647

我遇到过类似的情况，虽然我还没有想出解决方案，但我一直在玩弄只使用简单的 XML 序列化来存储临时文档数据的想法。如果您生成对对象中的数据进行建模的简单类（可能在需要时使用可为空的类型），则可以轻松地将屏幕中的数据填充到这些对象中，将它们序列化为 XML，然后将它们存储在临时“暂存”中桌子。当您的用户完成工作并想要提交或完成文档时，您可以针对序列化数据执行所有需要的验证，最终将具有适当数据结构和约束的“真实”表放入。

# windows - Windows 中的日志拉取和轮换

> ID：785981
> 
> 赞同：1
> 
> 时间：2009-04-24T14:04:51.857
> 
> 标签：windows, rotation, logging

有谁知道一个好的商业或开源解决方案，用于将应用程序日志从一堆不同的服务器拉取和轮换到中央服务器，您可以在其中按年/月/日/小时等对它们进行分类......这需要将在 Windows 上工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-24T14:08:45.640

我听说过关于[Splunk](http://www.splunk.com)的好消息，但没有亲自使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-24T14:33:09.357

这个页面有一些关于工具的信息，[http://www.dotnetlogging.com/comparison/](http://www.dotnetlogging.com/comparison/)可以在某种程度上做到这一点

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-08-24T13:25:41.440

我听说过关于水槽的很棒的事情：[https ://github.com/cloudera/flume/wiki](https://github.com/cloudera/flume/wiki)

# .net - FaceBook publishUserAction FaceBook Developer Toolkit 2.0？

> ID：785982
> 
> 赞同：0
> 
> 时间：2009-04-24T14:05:14.897
> 
> 标签：.net, .net-3.5, facebook, facebooktoolkit

我很迷茫。我正在尝试使用 publishUserAction 功能，但不知道在 FB 上发布故事的正确方法是什么。我收到一个错误，我无法使用 Connect 自动发布单行代码。好的，那我需要做什么？我需要使用提要表格吗？非常感谢您对此的任何帮助。我一直在使用 Facebook 开发者工具包。我可以很好地连接到 FB 并在那里完成所有设置。只是想看看其他人是否使用 FBDTK 2.0 成功地做到了这一点。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-24T14:14:27.917

FBDTK 2.0 已经过时了，因为 facebook 对其 api 进行了更改。我已经不再在我的 ASP.NET 应用程序中使用它，而是使用纯 javascript 和手动 XFBML 方法，这种方法非常适用于 facebook connect 和 ASP.NET MVC。

您目前无法使用 connect 发布单行故事。您需要弹出一个提要对话框以允许这样做（虽然它不是太打扰 - 它工作得很好）。这个视频很好地解释了它：

[http://www.facebook.com/video/video.php?v=636853997423](http://www.facebook.com/video/video.php?v=636853997423)

您可能想在这里查看其他视频 - 非常有用：

[http://wiki.developers.facebook.com/index.php/Facebook_Connect_Video_Tutorials](http://wiki.developers.facebook.com/index.php/Facebook_Connect_Video_Tutorials)

基本上，要通过 facebook connect 发布提要故事，您需要执行以下操作：

```
FB.Connect.showFeedDialog(
  47130247983,
  template_data,
  563683308,
  body_general,
  null,
  FB.RequireConnect.require,
  FB.RequireConnect.promptConnect,
  user_message_prompt,
  user_message); 
```

如此处详述：

[http://wiki.developers.facebook.com/index.php/Publishing_Feed_Stories_to_Facebook](http://wiki.developers.facebook.com/index.php/Publishing_Feed_Stories_to_Facebook)

# configuration - 合理的配置默认值

> ID：785983
> 
> 赞同：1
> 
> 时间：2009-04-24T14:06:02.837
> 
> 标签：configuration, frameworks, convention-over-configur

我最近开始使用 Ruby on Rails，它更倾向于约定而不是配置，并依赖合理的默认值将应用程序的各个方面联系在一起。

我在想，如果在各种框架的一般配置中使用这种合理的默认配置概念可能会很有用，那么它可能会省去一些开发难题。

例如，在 .net 应用程序中，我通常想使用企业库异常处理块在 Windows 事件日志中记录异常，但如果我没有在配置文件中明确说明我想要的行为，那么 EL 会抱怨。我认为相反，如果它找不到自定义配置，那么它应该恢复为合理的默认配置，比如在事件日志中记录我的异常。

对于框架在其配置中采用的概念是好是坏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-06T21:35:07.513

我经常使用一个框架来做这件事。我对这种工作方式的麻烦在于：

*   该框架发展为拥有过多的配置键，这些配置键实际上从未在配置文件中使用/设置。
*   软件的行为有时会变得隐含，我想明确地将系统设置为以某种方式运行，而不是由于“默认”而使其回退到其他代码路径。
*   配置键中的错字可能会导致诊断会话非常长，然后才能弄清楚发生了什么。

当忘记设置配置值时，我宁愿让软件告诉我，而不是假设我可能根本不会追求的某种形式的行为。

我更喜欢一个“模板”配置文件，我可以在其中更改我想要的内容并将未更改的设置用作默认设置。

弄清楚软件在调试时选择了哪个约定也可能会浪费很多时间。

# iphone - 使用 stretchableImageWithLeftCapWidth 调整图像大小

> ID：785986
> 
> 赞同：7
> 
> 时间：2009-04-24T14:06:22.603
> 
> 标签：iphone, cocoa-touch

我正在尝试使用 stretchableImageWithLeftCapWidth 调整图像的大小：它适用于模拟器，但在设备上，会出现垂直的绿色条。

我尝试使用 imageNamed、imageWithContentOfFile 和 imageWithData 加载图像，但它没有改变。

```
UIImage *bottomImage = [[UIImage imageWithData:
     [NSData dataWithContentsOfFile:
    [NSString stringWithFormat:@"%@/bottom_part.png", 
     [[NSBundle mainBundle] resourcePath]]]] 
       stretchableImageWithLeftCapWidth:27 topCapHeight:9];

UIImageView *bottomView = [[UIImageView alloc] initWithFrame:CGRectMake(10, 200+73, 100, 73)];
[self.view addSubview:bottomView];
UIGraphicsBeginImageContext(CGSizeMake(100, 73));
[bottomImage drawInRect:CGRectMake(0, 0, 100, 73)];
UIImage *bottomResizedImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
bottomView.image = bottomResizedImage; 
```

查看结果：绿色条不应该在那里，它们不会出现在模拟器上。

[替代文字 http://www.quicksnapper.com/files/5161/96232162149F1C14751048_m.png](http://www.quicksnapper.com/files/5161/96232162149F1C14751048_m.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-12-02T17:47:31.137

你想通了吗？

似乎这可能是 UIGraphicsGetImageFromCurrentImageContext 的错误。如果我绘制具有透明度的图像，我会得到红色/绿色伪影。这些仅出现在设备上（不在 sim 中）。此外，如果我从图像中删除透明度，伪影就会消失。

更新：一些更奇怪的东西。我之前使用的是 PNG，所以我尝试使用透明 gif。使用 GIF，在 sim 上显示伪影问题。

**胜利！找到了解决方案：**

在项目的构建设置中关闭“压缩 PNG 文件”。禁用此选项可使 PNG 透明度工作而不会产生任何伪影。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-29T19:25:28.987

似乎您正在编写很多不必要的代码，但也许这只是因为它脱离了上下文，而且我还缺少更多内容。

要获取图像：

```
[[UIImage imageName: @"bottom_part.png"] stretchableImageWithLeftCapWidth: 27 topCapHeight: 9]; 
```

您显示此图像的代码的哪一部分？即你在什么方法调用中绘制上面的图像？

为什么不直接使用 UIImageView 并将图像放在那里？然后你不需要做任何图像上下文绘图等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-04-20T20:30:32.913

就我而言，我有一个 UIImageView 水平拉伸。我在拉伸的图像中发现了一条奇怪的垂直白线。

上面的解决方案对我不起作用。但是，以下操作：

将宽度值转换为 int 值：

```
myNewViewFrame.size.width = (int)newWidth;
myView.frame = myNewViewFrame; 
```

希望它也适用于你们......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-01-15T09:48:24.747

昨晚我花了 5 个小时调试这个，在 xcode 中禁用 PNG 压缩对我没有任何帮助。

对于其他任何遇到垂直、绿色、条形/线条/工件的人（在 UIImage API 中） - 这篇文章是给你的。

我有一个 21x30 的自定义条形按钮背景，我想扩大它，但得到与 OP 相同的绿色条纹。我发现了一个用 Photoshop 创建的 PNG，效果很好——我的是用 Gimp 制作的。无论如何，从文件中删除所有块（三个基本块除外）没有任何区别。也没有禁用 PNG 压缩。

对我有用的是：

1.  在我的图像上方添加一个空行（现在是 21x31）。
2.  创建缩放图像时设置 topCapHeight:0。
3.  当我使用我的缩放图像时，我会绘制到一个 CGContext 中，它后来被用来制作一个 UIImage。我用它来绘制： [image drawInRect:CGRectMake(0,-2,width,32)];

这使问题消失了（对我来说）。

我认为错误/问题与绘制时*不*垂直缩放有关，因此我强制缩放第一条源图像行（分成两条线），它们在我的构图之外绘制。

我希望这可以帮助某人节省 5 个小时。

/克里斯布

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-08-13T15:37:27.107

我停止使用 stretchableImageWithLeftCapWidth 来支持 UIView 的表现更好的 contentStretch 属性。我从未见过您描述的绿色条，但总的来说，我建议使用 contentStretch 而不是 stretchableImageWithLeftCapWidth。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-09-08T08:42:02.763

当使用 (0.5, 0.5, 0, 0) 的值时，我发现 contentStretch 有类似的问题（在任何已绘制内容的 UIView 上）。即在中心像素上拉伸。

我发现只有 iphone 3G（可能是 2G）出现这个问题。iphone 4 和 3GS 都可以。所以，我认为这是旧图形硬件的问题。

我发现解决该问题的一种方法是在稍大的中心区域上伸展。

例如 (0.4, 0.4, 0.1, 0.1)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-09-02T10:23:24.140

我尝试像 Nate 提议的那样禁用 PNG 压缩，但这对我不起作用（iOS 3.1.3）。然后我尝试使用 TIFF 图像而不是 PNG，这很有效。

# python - Django 用 1.1 炸毁，找不到 urls 模块

> ID：785987
> 
> 赞同：1
> 
> 时间：2009-04-24T14:06:28.263
> 
> 标签：python, django, django-1.1

编辑：问题已解决，在下面回答。蹩脚的错误。废话

所以我升级到了 Django 1.1，对于我的生活，我无法弄清楚我错过了什么。这是我的回溯：

[http://dpaste.com/37391/](http://dpaste.com/37391/) - 这发生在我尝试访问的任何页面上。

我已经修改了我的 urls.py 以在新方法中包含管理员：

> 从 django.contrib 导入管理员
> 
> admin.autodiscover()
> 
> .... urlpatterns 声明
> 
> (r'^admin/', 包括(admin.site.urls)),

我尝试过对路径之类的东西坐立不安，但没有什么能解决我的问题，我想不通。

自从我缺少的 Django 1.1 alpha -> Django 1.1 beta 以来，有什么重大变化吗？除了管理员，我看不到还有什么新东西。url 是否仍存储在每个应用程序中的 urls.py 中？

提前感谢您的帮助，这令人沮丧。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-24T14:35:21.877

我想到了。我错过了我引用的 urls.py （出于某种原因，SVN 说它在 repo 中，但从未在更新时获取它），它只是说找不到 url（没有提到缺少的 notes.urls ) 所以它变得非常混乱。

无论哪种方式，固定 - 太棒了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-24T14:15:02.533

试试这个：

```
 (r'^admin/(.*)', admin.site.root), 
```

[更多信息](http://code.djangoproject.com/wiki/BackwardsIncompatibleChanges#Mergednewforms-adminintotrunk)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-24T14:34:18.120

settings.py 文件中 ROOT_URLCONF 的值是多少？该文件是否由您的 python 路径上的该设置命名？

您使用的是开发服务器还是什么？

# performance - 在对 DB2 读写进行性能测试时需要考虑什么？

> ID：785993
> 
> 赞同：0
> 
> 时间：2009-04-24T14:07:17.967
> 
> 标签：performance, db2

呼叫所有数据库人员...

情况是这样的：我有一个正在写入和读取的 DB2 数据库。我需要对以编程方式执行的读/写进行一些性能测试。

我知道如何编写一个程序来读/写这个数据库，但我不确定在我的性能测试中应该考虑哪些因素。

我是否需要担心一个会话读/写与多个会话之间的区别？

与 DB2 本身交互以获得这些执行所花费的时间的最佳方式是什么？

我正在测试的过程基本上就像一个连续的批处理过程，不断地接收消息并将它们持久化。在任何给定时间，数据库上最多可能只有一两个会话。

读/写时间真的是最好的衡量标准吗？

我相信有很多工具可以进行这种测试。任何建议表示赞赏。

更多信息：

我正在考虑的一件事是尝试使用我的数据库 API（自制软件）运行 X 次读/写，并尝试“计时”它需要多长时间。不幸的是，DB2 将缓冲这些消息。有没有办法让 DB2 在读/写完成时进行回调？或者以某种方式从外部测量这些操作所花费的时间？（工具等）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-24T15:15:52.730

您的性能测试的目标是什么？是测试并发用户的性能还是测试批处理的负载。基于此，有可用的工具对此进行测试。您可能想从 Apache 中查看 jmeter。

在这种情况下，您可能希望触发几个并发进程来同时 CRUD 数据并使用性能专​​家或类似的工具监控活动。当您这样做时，您可能希望使用更大的输出，以便能够找到具有更大数据集的任何瓶颈。在 IBM 红皮书站点中搜索性能调优，您会找到一些案例研究。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-25T04:34:57.460

DB2 性能的一个重要因素是缓冲池的配置方式。例如[http://www.ibm.com/developerworks/data/library/techarticle/0212wieser/0212wieser.html](http://www.ibm.com/developerworks/data/library/techarticle/0212wieser/0212wieser.html)********************