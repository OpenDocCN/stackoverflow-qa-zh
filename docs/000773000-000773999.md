# StackOverflow 问答 000773000-000773999

# java - Qt 嵌入式动画的最佳选择？

> ID：773008
> 
> 赞同：1
> 
> 时间：2009-04-21T14:59:11.047
> 
> 标签：java, c++, qt

我正在研究一种具有 1 ghz via 处理器和 via s3 图形芯片的新嵌入式产品的技术。到目前为止，目标平台是 Linux，但希望可以选择将其移至基于 Windows 的平台。

该应用程序将由按钮、图形和数字/文本显示等小部件组成。更重要的是，该应用程序将包含动画对象，例如不断旋转的风扇。

Qt 似乎是一个不错的选择，因为它是跨平台的，并且为一堆小部件和一个动画框架提供了一个不错的 API。

然而，这个动画框架对 CPU 的使用量很大。渲染 UI 的目标 CPU 使用率为 40%。使用图像旋转 25 个对象会占用大约 90% 的 CPU。

想法是使用 opengl 为对象设置动画并减轻 CPU 的繁重负担。

我的问题是，如果 Qt 是这样的最佳选择？我是否应该更深入地研究 Java 2D 之类的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T17:31:13.380

OpenGL 可以为您带来性能提升：

[用于嵌入式 Linux 和 OpenGL 的 Qt](http://doc.trolltech.com/4.5/qt-embedded-opengl.html)

或者您可能需要更好的图形驱动程序（我不知道 Qt Embedded 是否支持您的图形芯片）：

[将加速图形驱动程序添加到 Qt for Embedded Linux](http://doc.trolltech.com/4.5/qt-embedded-accel.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T18:05:31.440

据我记得，Qt 的动画框架可用于连续动画，但可能不是最好的选择。我认为它更多地是为瞬态动画设计的，比如滑动一个小部件，或者增长/缩小东西。我会考虑使用 OpenGL 或可能的 QGraphicsView，它允许您进行更直接的绘图。

此外，如果您环顾四周，您应该能够找到告诉 Qt 使用 OpenGL 或 OpenGL ES 作为渲染系统后端的说明，这应该会减少对处理器的一些影响（假设您还没有这样做）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-23T22:14:03.983

您需要分析您的应用程序以真正找出其中的问题。例如，一个固定形状但不断旋转的图形项目可以从项目坐标缓存中受益很多（参见[QGraphicsItem::setCacheMode](http://doc.trolltech.com/qgraphicsitem.html#setCacheMode)）。同样，固定图像应该被缓存并尽可能长时间地保存为像素图。颜色深度也可能发挥重要作用。应尽可能简化复杂的基于路径的图形项。

简而言之，图形性能不佳的原因有很多。如果不详细阐述它们并一一攻击它们，迁移到 OpenGL 并不能真正解决问题。它可能会加快每秒帧数（由于将一些责任转移到图形硬件的明显优势），但这是一个短期优势，如果没有发现真正的问题，从长远来看会迅速减弱。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-21T15:10:13.733

Qt 的主要卖点是它是一个跨平台的 GUI 工具包，这是一个不错的特性，但 Java 已经具备了。你可能更喜欢 Qt 的版本，很多人都喜欢，但不要仅仅因为它是跨平台的而使用它。[这篇文章](http://labs.trolltech.com/blogs/2008/11/05/qt-animation-framework/)表明 Qt 动画框架还没有集成到 Qt 中。

如果您可以在 GL 中编程，那么 JOGL 是一个明显的起点，但如果您不知道 GL 编程并不容易。您也可以考虑 Java3D。可能你想要的可以在 JavaFX 中完成。

# java - 使用 Java DOM 获取 XML 节点文本值

> ID：773012
> 
> 赞同：42
> 
> 时间：2009-04-21T14:59:29.453
> 
> 标签：java, xml, dom

我无法使用或`Node.getNodeValue()`获取文本值。`Node.getFirstChild().getNodeValue()``Node.getTextContent()`

我的 XML 就像

```
<add job="351">
    <tag>foobar</tag>
    <tag>foobar2</tag>
</add> 
```

我正在尝试获取*标签*值（非文本元素提取工作正常）。我的 Java 代码听起来像

```
Document doc = db.parse(new File(args[0]));
Node n = doc.getFirstChild();
NodeList nl = n.getChildNodes();   
Node an,an2;

for (int i=0; i < nl.getLength(); i++) {
    an = nl.item(i);

    if(an.getNodeType()==Node.ELEMENT_NODE) {
        NodeList nl2 = an.getChildNodes();

        for(int i2=0; i2<nl2.getLength(); i2++) {
            an2 = nl2.item(i2);

            // DEBUG PRINTS
            System.out.println(an2.getNodeName() + ": type (" + an2.getNodeType() + "):");

            if(an2.hasChildNodes())
                System.out.println(an2.getFirstChild().getTextContent());

            if(an2.hasChildNodes())
                System.out.println(an2.getFirstChild().getNodeValue());

            System.out.println(an2.getTextContent());
            System.out.println(an2.getNodeValue());
        }
    }
} 
```

它打印出来

```
tag type (1): 
tag1
tag1
tag1
null
#text type (3):
_blank line_
_blank line_
... 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2009-04-21T15:04:55.853

`an2.getNodeName()`出于调试目的，我也会打印出结果。我的猜测是你的树爬取代码没有爬到你认为的节点。由于缺少检查代码中的节点名称，这种怀疑更加严重。

除此之外，Node 的 javadoc 定义了“ [getNodeValue](http://docs.oracle.com/javase/6/docs/api/org/w3c/dom/Node.html#getNodeValue()) ()”来为 Element 类型的节点返回 null。因此，您确实应该使用 getTextContent()。我不知道为什么那不会给你你想要的文字。

也许迭代你的标签节点的孩子，看看有什么类型？

尝试了这段代码，它对我有用：

```
String xml = "<add job=\"351\">\n" +
             "    <tag>foobar</tag>\n" +
             "    <tag>foobar2</tag>\n" +
             "</add>";
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
DocumentBuilder db = dbf.newDocumentBuilder();
ByteArrayInputStream bis = new ByteArrayInputStream(xml.getBytes());
Document doc = db.parse(bis);
Node n = doc.getFirstChild();
NodeList nl = n.getChildNodes();
Node an,an2;

for (int i=0; i < nl.getLength(); i++) {
    an = nl.item(i);
    if(an.getNodeType()==Node.ELEMENT_NODE) {
        NodeList nl2 = an.getChildNodes();

        for(int i2=0; i2<nl2.getLength(); i2++) {
            an2 = nl2.item(i2);
            // DEBUG PRINTS
            System.out.println(an2.getNodeName() + ": type (" + an2.getNodeType() + "):");
            if(an2.hasChildNodes()) System.out.println(an2.getFirstChild().getTextContent());
            if(an2.hasChildNodes()) System.out.println(an2.getFirstChild().getNodeValue());
            System.out.println(an2.getTextContent());
            System.out.println(an2.getNodeValue());
        }
    }
} 
```

输出是：

```
#text: type (3): foobar foobar
#text: type (3): foobar2 foobar2 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2009-04-21T15:22:34.983

如果您的 XML 非常深入，您可能需要考虑使用 JRE 附带的 XPath，这样您就可以更轻松地访问内容：

```
String text = xp.evaluate("//add[@job='351']/tag[position()=1]/text()", 
    document.getDocumentElement()); 
```

完整示例：

```
import static org.junit.Assert.assertEquals;
import java.io.StringReader;    
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.xpath.XPath;
import javax.xml.xpath.XPathFactory;    
import org.junit.Before;
import org.junit.Test;
import org.w3c.dom.Document;
import org.xml.sax.InputSource;

public class XPathTest {

    private Document document;

    @Before
    public void setup() throws Exception {
        String xml = "<add job=\"351\"><tag>foobar</tag><tag>foobar2</tag></add>";
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();
        document = db.parse(new InputSource(new StringReader(xml)));
    }

    @Test
    public void testXPath() throws Exception {
        XPathFactory xpf = XPathFactory.newInstance();
        XPath xp = xpf.newXPath();
        String text = xp.evaluate("//add[@job='351']/tag[position()=1]/text()",
                document.getDocumentElement());
        assertEquals("foobar", text);
    }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-02-18T17:08:52.023

我使用一个非常古老的java。Jdk 1.4.08 和我有同样的问题。我的`Node`课没有这个`getTextContent()`方法。我不得不使用`Node.getFirstChild().getNodeValue()`而不是`Node.getNodeValue()`获取节点的值。这对我来说是固定的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-04-24T01:50:26.250

如果您对[vtd-xml 持](http://vtd-xml.sf.net)开放态度，它在[性能和内存效率](http://sdiwc.us/digitlib/journal_paper.php?paper=00000582.pdf)方面都表现出色，下面是执行您正在寻找的代码的代码......在 XPath 和手动导航中......整体代码非常简洁且更容易理解 ...

```
import com.ximpleware.*;
public class queryText {
    public static void main(String[] s) throws VTDException{
        VTDGen vg = new VTDGen();
        if (!vg.parseFile("input.xml", true))
            return;
        VTDNav vn = vg.getNav();
        AutoPilot ap = new AutoPilot(vn);
        // first manually navigate
        if(vn.toElement(VTDNav.FC,"tag")){
            int i= vn.getText();
            if (i!=-1){
                System.out.println("text ===>"+vn.toString(i));
            }
            if (vn.toElement(VTDNav.NS,"tag")){
                i=vn.getText();
                System.out.println("text ===>"+vn.toString(i));
            }
        }

        // second version use XPath
        ap.selectXPath("/add/tag/text()");
        int i=0;
        while((i=ap.evalXPath())!= -1){
            System.out.println("text node ====>"+vn.toString(i));
        }
    }
} 
```

# c# - CompactFramework 2.0 - 表单与将控件加载到面板中

> ID：773015
> 
> 赞同：3
> 
> 时间：2009-04-21T14:59:53.383
> 
> 标签：c#, compact-framework, panel

我正在为 Windows Mobile 编写基于 WinForms 的应用程序，以 CompactFramework 2.0 为目标并使用 C# 进行编码。

我的应用程序有一个菜单，用户可以从中选择严重的工作职能。

我的问题是这样的：

对于特定于工作的屏幕，我应该将 UserControl 加载到主窗体的面板中，还是在主窗体顶部打开一个新窗体更好？

它们似乎都满足了我的需求，我不知道这里是否有“正确”的答案。

一种方法比另一种更正确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T15:04:10.300

根据我的经验，根据您的硬件，加载控件远远优于启动不同的表单。我们的设备（Motorola WT4090 with 32meg）没有硬件加速，绘制完整的表格似乎真的很累。每次启动表单都会有多达 4-6 秒的延迟；然而，控制几乎是瞬时的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-21T17:57:41.553

表单是控件（只看继承链），表单本身并没有太多的开销。它创建了一个本地窗口，但仅此而已。

推动您做出决定的是如何在解决方案中使用和显示 UI 元素。表单有利于许多 UI 架构，并且它们是大多数开发人员所熟悉的。设计师很好地支持它们，创建、显示、隐藏和关闭表单是一个有据可查的、经常使用的范例，效果很好。是的，每当创建表单时，您都会受到负载惩罚，因为它会创建所有包含的控件，但即使它是 UserControl，您也要付出代价。在任何一种情况下都必须创建子控件。

有人可能会争辩说，表单要求您每次都重新创建它们，但事实并非如此。如果您使用 ShowDialog 或 Hide 而不是 Close，您可以重复使用您的表单并支付一次费用。这里的优点是表单将您的控件保存在集合中并为您管理所有这些，因此您无需担心 GC 并记住您活着的根。

UserControl 范式更复杂 - 您必须自己管理加载和卸载控件以保持较低的内存压力。复杂性也增加了成本——维护成本、支持成本和可能的开发成本。然而，在某些情况下，UserControls 也有一些明显的优势。如果您使用 MVC/MVP 模式和某种形式的框架来处理您的视图，则 USerControl 可以通过表单成为工作区来制作非常好的视图（[桌面的 SCSF](http://msdn.microsoft.com/en-us/library/aa480482.aspx)就是一个典型的例子，[OpenNETCF.IoC也是如此CF框架](http://ioc.codeplex.com/)）。

那么哪个“更好”？这取决于您使用这些元素的方式和位置、您的团队已经如何进行开发以及您如何构建您正在插入的解决方案。简而言之，没有一个正确的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T17:26:33.140

也许最好的答案是创建一系列用户控件并尝试将它们加载到主窗体上。然后尝试创建一系列仅具有用户控件的表单以查看是否可以提高性能应该是一件相当容易的事情。

如果无论哪种方式您都看不到任何性能优势，那么这似乎只是一个偏好问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-21T18:37:02.723

使用表格。这是其他应用程序的行为方式。这是用户*使*您的应用程序工作的方式。

查看预装的“联系人”应用程序：在启动时，您会获得一个联系人列表。选择联系人后，将在当前窗口顶部打开一个新表单。它显示了所有联系人的详细信息。从菜单中选择“编辑”将打开另一个表单，允许您编辑联系人。“任务”应用程序的行为方式相同。

所以用户知道：点击某个地方会打开一个新表单，关闭该表单会让我回到上一个表单。你应该与那个知识一起工作而不是反对它。当您使用单个表单时，用户可能会在他实际上想要返回上一个表单时反复关闭它。

从性能的角度来看，我发现我的 WM 5 和 WM 6 设备上的表单打开速度足够快（<1 秒）。

虽然使用 UserControls 可以实现类似表单的行为，但当您需要类似表单的行为时，使用表单似乎更加严格。

所以我的底线是：使用表格！

PS：CodeProject上有一篇很好的文章：[How to create MDI Application in Compact framework](http://www.codeproject.com/KB/aspnet/CF_MDI_Application.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-21T15:03:39.583

取决于表单/控件的复杂性。走 UserControl 路线将提供更好的性能，因为您不会同时处理所有表单创建功能。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-21T15:12:08.440

我的建议是为每个不同的逻辑操作创建一个新的 Windows 窗体。如果您需要一个逻辑上独立的窗体，那么最好为它提供一个单独的 Windows 窗体。

为了加快速度，您可以在应用程序启动时构建所有表单。这样你的应用程序启动时会有延迟（大多数用户会对此感到满意），但之后一切都会运行得更快。

# c# - ado.net 中数据表之间列中的共享值

> ID：773024
> 
> 赞同：0
> 
> 时间：2009-04-21T15:01:12.447
> 
> 标签：c#, ado.net, indexing, datatable, dataset

我正在使用 c# 并且我有三个数据表，所有三个数据表都有一个名为 idnum 的 int 列，我需要保持 idnum 列中的所有数字在三个表中都是唯一的，并且下一个数字将始终是可用的小数字。例如：

**表一**

idnum=1

idnum=3

idnum=4

**表b**

idnum=2

idnum=7

**表c**

idnum=8

在这种情况下，三个表中任何一个新行上的下一个数字将是数字 5，然后是 6，然后是 9。

我的问题是获得下一个数字的最佳方法是什么？我不想使用 sql。

谢谢努诺

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T15:39:26.223

您可能想要第四张桌子来保存所有“差距”数字。否则，您将不得不检查从 1 开始的每个数字。

插入时：在“间隙”表中找到最小的数字。插入新项目时使用该编号。如果间隙表中没有项目，则使用所有表中的 idnum 的 Max+1。

删除时：将刚刚退休的号码放入“差距”表中。

如果您的应用程序是多线程的，则必须添加一个锁以确保两个线程不会占用相同的间隙。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T18:50:26.030

您将无法自动执行此操作；ADO.NET 中内置的自动编号功能都适用于单个表。

那么，鉴于您将不得不编写自己的方法来处理这个问题，那么最好的方法是什么？

如果您使用的是数据库，我建议您使用第四个表，将三个主表中的 ID 列设置为存储第四个表 ID 的外键，并将行插入到第四个表中与插入同步排入其他三个中的任何一个。就像是：

```
INSERT INTO Sequence (DateInserted) VALUES (GETDATE())
INSERT INTO TableA (SequenceID, ... ) VALUES (@@SCOPE_IDENTITY(), ...) 
```

但是您不想使用数据库，这向我表明您并不真正关心这些 ID 号的持久性。如果它们真的只需要在您的应用程序运行时存在，您可以使用静态字段来存储最后使用的 ID，并创建一个帮助类：

```
public static class SequenceHelper
{
   private static int ID;
   private static object LockObject = new object();

   public static int GetNextID()
   {
      lock (LockObject)
      {
         return ID++;
      }
   }
} 
```

锁定并不是绝对必要的，但是使这段代码线程安全并没有什么坏处。

然后，您可以`TableNewRow`在三个数据表中的每一个上处理事件，例如：

```
DataTable t = MyDataSet["TableA"];
t.TableNewRow += new delegate(object sender, DataTableNewRowEventArgs e)
   {
      r.Row["ID"] = SequenceHelper.GetNextID();
   }; 
```

这将确保任何方法向每个表添加新行——无论是您的代码调用`NewRow()`还是通过数据绑定控件添加的新行——添加的每一行都将其 ID 列设置为下一个 ID。

# arrays - 如何掌握数组的概念？

> ID：773027
> 
> 赞同：2
> 
> 时间：2009-04-21T15:01:52.740
> 
> 标签：arrays, language-agnostic

我完全理解数组的目的，但我不觉得我已经“掌握”了它们。有没有人有一些非常好的问题或涉及数组的读数。我用 PHP 和 C++ 编程，所以如果有这些语言的示例，那将是可取的，但不是必需的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-21T15:05:35.010

在方格纸上画出一切。
记忆只是小盒子，用几个箭头在纸上看比在一些复杂的标记语言中要清晰得多

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-21T15:09:53.673

定义“掌握”。

> 有没有人有一些非常好的问题或涉及数组的读数。

尝试基于数组

*   链表实现。
*   实现堆栈、队列等，然后使用堆栈来模拟队列等
*   堆

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-21T15:29:38.553

很多人一开始似乎对数组的概念感到困惑，尤其是大于 2 维的数组。

这有点太抽象了。然而，通过最初的障碍只需要对机制进行具体的探索。所以，这是一个我经常使用的例子，它以一种对书呆子友好的方式展示了基本的机制：

**具体示例**（在伪代码中）

假设您正在构建一个角色扮演游戏，并且想要跟踪角色的统计数据。您可以使用这样的整数数组：

*   统计（0）可能是力量
*   Stats(1) 可能是灵巧
*   Stats(2) 可能是情报

...等等。

现在让我们增加一个复杂度。也许我们想引入一种力量药水，在 10 回合内增加 5 点力量。我们可以通过将其制成二维数组来表示其统计方面：

*   Stats(0, 0) - 这是我目前的实力。
*   Stats(0, 1) - 这是我的正常力量。
*   Stats(0, 2) - 这是力量药水用完之前的转数。
*   Stats(1, 0) - 这是我目前的灵巧度。

...等等。你明白了。

所以我添加了一个第二维度来保存关于第一维度的细节。如果我希望我们的 Stats 数组处理多个字符的统计信息怎么办？我可以通过将其制成一个 3 维数组来表示：

*   Stats(0, 0, 0) - 角色 0 的当前强度。
*   Stats(1, 1, 0) - 角色 1 当前的灵巧度。

最好创建一些常量或枚举来消除代码中的幻数：

```
Const Strength = 0
Const Dexterity = 1
Const Intelligence = 2

Const CurrentValue = 0 
Const NormalValue = 1
Const PotionTurns = 2 
```

然后我可以这样做：

```
Stats(1, Dexterity, NormalValue) = 5 'For character 1, set the normalvalue of dex to 5\. 
```

关于数组的更多想法……至少在我居住的 .Net 世界中，我们大多数人不必在日常生活中过于频繁地使用它们，因为它们正逐渐被降级为基础更复杂的数据结构，如集合。

事实上，如果我要实现字符统计，实际上我不会使用数组。

但是，了解它们仍然很重要，因为它们的速度非常快，而且在某些情况下它们肯定是无价的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-21T15:22:54.467

尝试手动（没有内置方法）使用数组排序（冒泡排序是一个很好的方法）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-21T15:44:54.057

数组是一块连续的内存块，专门用于存储 N 个相同类型的项目，其中 N 是一个固定数字，表示项目的数量。为了扩展数组（因为它们的大小是固定的），您可以使用 C 函数 realloc(..)。在 C++ 中，您可以通过创建一个新的、更大的数组并将旧数组的内容复制到新数组中来手动重新分配一个数组（一项昂贵的操作）。

现代语言有替代数组的选项（以克服数组的固有限制）。在 C++ 中，您可以为此目的使用标准模板库 (STL)；STL“向量”数据类型是 C++ 中标准数组的典型替代品。MFC 等平台相关 API 具有 CArrayList 等内置结构，可提供更丰富的数组使用体验。;-)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-21T17:20:07.930

我将尝试以基本形式解释我能做到的最好的数组。

好的，所以数组基本上是一种存储数据的方式。例如，如果您想要一个购物项目列表，我们将使用一维数组：

[0] - “面包”

[1] - “牛奶”

[2个蛋”

[3] - “黄油”。. .

[n] - “糖果”

每个索引 0,1,2,3,...n 都保存一个特定的数据。如您所见，数据表示为字符串。现在我不能使用类似的东西：

[n+1] = 1000

因为这会将一个整数作为索引 n+1，编译器会告诉你它不好，你需要解决这个问题。

继续讨论矩阵或二维数组。拿一张像你用来数学的方纸，画一个笛卡尔系统和一些点。将坐标放在不同的纸上，然后在它们旁边放一个 1。例如：

[0,0] = 1

[0,1] = 1

[2,3] = 1

这意味着在索引 [0,0],[0,1],[2,3] 处我有 1。表示形式如下：

矩阵形式的笛卡尔系统：

```
 1) 2) 3)

1) 1  1  0

2) 0  0  1

3) 0  0  0 
```

我只使用简单的数组来说明它们是什么，例如，如果您想进行 3D 处理，那么数据结构将是矩阵数组，也就是将每个笛卡尔位置保持在特定高度的列表。

如果我们有**10**作为高度和与上面相同的点，它将是这样的：

[ **10** ,0,0] - 1

[ **10** ,0,1] - 1

[ **10** ,2,3] - 1

如果您想掌握一种方法：获取一个简单的问题列表并尝试使用任何类型的数组来实现它们。没有捷径可走，只有耐心和练习。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-21T20:02:17.683

好的，所以一维数组只是一组变量。如果您有很多东西，并且您想节省时间和空间，这很有用。在功能上，

```
element1:=5;
element2:=6;
element3:=7;
... 
```

和说的一样

```
element[1]:=5;
element[2]:=6;
element[3]:=7;
... 
```

除了现在计算机知道您在说什么，您可以编写如下内容：

```
for i:=1 to n do
   element[i]:=element[i]+1; 
```

继续前进，二维数组稍微复杂一些，但可以将其视为数组的数组。所以我们可以有这样的东西：

```
type
  arrayA=array[1..50] of integer;
  arrayB=array[1..50] of arrayA;
  arrayB=array[1..50,1..50] of integer; //an equivalent declaration in Pascal to the above two 
```

更具体地说，二维数组是一个表。例如，如果 arrayA 包含一个学生在 50 个班级的成绩，那么 arrayB 代表一群学生的成绩。因此，arrayB[3,5] 将是第 3 个班级的第三个学生的成绩。

很容易扩展相同的逻辑以向数组添加另一个维度：

```
arrayC=array[1..50] of arrayB; 
```

我们可以说C代表一所学校，那么arrayC[2,4,6]就是二校六班第四个学生的年级。

现在，数组有什么用？存储类似信息的组，或需要批量处理的信息。但在实践中，您将主要使用一维数组，最多二维数组。例如，如果您可以将数据想象成一个表格，那么您几乎肯定会想要一个二维数组。如果必须的话，你还会如何代表棋盘？

三维数组往往使用较少，但是如果您必须为每个表格元素保存某种状态怎么办？就像是：

```
Table=array[1..50, 1..50, 0..1] of integer; 
```

如果给定元素的某些条件为真，则第三个值为 1，否则为 0。当然，这是一个简单的例子，但它是另一种更容易理解三维数组的方法。

# c# - 连接到 Wikipedia API 的 WebRequest

> ID：773029
> 
> 赞同：10
> 
> 时间：2009-04-21T15:02:22.037
> 
> 标签：c#, mediawiki, webrequest, wikipedia, wikipedia-api

这可能是一个非常简单的问题，但我似乎无法格式化帖子 webrequest/response 以从[Wikipedia API](http://en.wikipedia.org/wiki/Wikipedia:API)获取数据。如果有人可以帮助我查看我的问题，我已经在下面发布了我的代码。

```
 string pgTitle = txtPageTitle.Text;

    Uri address = new Uri("http://en.wikipedia.org/w/api.php");

    HttpWebRequest request = WebRequest.Create(address) as HttpWebRequest;

    request.Method = "POST";
    request.ContentType = "application/x-www-form-urlencoded";

    string action = "query";
    string query = pgTitle;

    StringBuilder data = new StringBuilder();
    data.Append("action=" + HttpUtility.UrlEncode(action));
    data.Append("&query=" + HttpUtility.UrlEncode(query));

    byte[] byteData = UTF8Encoding.UTF8.GetBytes(data.ToString());

    request.ContentLength = byteData.Length;

    using (Stream postStream = request.GetRequestStream())
    {
        postStream.Write(byteData, 0, byteData.Length);
    }

    using (HttpWebResponse response = request.GetResponse() as HttpWebResponse)
    {
        // Get the response stream.
        StreamReader reader = new StreamReader(response.GetResponseStream());

        divWikiData.InnerText = reader.ReadToEnd();
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-21T15:11:07.397

您可能想先尝试 GET 请求，因为它更简单一些（您只需要 POST 即可登录维基百科）。例如，尝试模拟这个请求：

> [http://en.wikipedia.org/w/api.php?action=query&prop=images&titles=Main%20Page](http://en.wikipedia.org/w/api.php?action=query&prop=images&titles=Main%20Page)

这是代码：

```
HttpWebRequest myRequest =
  (HttpWebRequest)WebRequest.Create("http://en.wikipedia.org/w/api.php?action=query&prop=images&titles=Main%20Page");
using (HttpWebResponse response = (HttpWebResponse)myRequest.GetResponse())
{
    string ResponseText;
    using (StreamReader reader = new StreamReader(response.GetResponseStream()))
    {
        ResponseText = reader.ReadToEnd();
    }
} 
```

**编辑：**他在 POST 请求中遇到的另一个问题是，`The exception is : The remote server returned an error: (417) Expectation failed.`可以通过设置来解决：

```
System.Net.ServicePointManager.Expect100Continue = false; 
```

（这来自：[HTTP POST Returns Error: 417 "Expectation Failed."](https://stackoverflow.com/questions/566437/http-post-returns-the-error-417-expectation-failed-c-resolved)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-04-22T14:20:19.140

我目前正处于实现 C# MediaWiki API 的最后阶段，它允许对大多数 MediaWiki 查看和编辑操作进行简单的脚本编写。

主要 API 在这里： http: [//o2platform.googlecode.com/svn/trunk/O2%20-%20All%20Active%20Projects/O2_XRules_Database/_Rules/APIs/OwaspAPI.cs](http://o2platform.googlecode.com/svn/trunk/O2%20-%20All%20Active%20Projects/O2_XRules_Database/_Rules/APIs/OwaspAPI.cs)这里是使用的 API 示例：

```
var wiki = new O2MediaWikiAPI("http://www.o2platform.com/api.php");

wiki.login(userName, password);

var page = "Test"; // "Main_Page";

wiki.editPage(page,"Test content2");

var rawWikiText = wiki.raw(page);
var htmlText = wiki.html(page);

return rawWikiText.line().line() + htmlText; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T15:10:20.833

您似乎在 HTTP POST 上推送输入数据，但似乎您应该使用 HTTP GET。

来自 MediaWiki API 文档：

> API 通过查询字符串中的参数获取其输入。每个模块（以及每个 action=query 子模块）都有自己的一组参数，这些参数列在文档和 action=help 中，可以通过 action=paraminfo 检索。 [http://www.mediawiki.org/wiki/API:Data_formats](http://www.mediawiki.org/wiki/API:Data_formats)

# python - 为什么 Numpy 中的 0d 数组不被视为标量？

> ID：773030
> 
> 赞同：75
> 
> 时间：2009-04-21T15:02:51.723
> 
> 标签：python, numpy

一个 0d 数组肯定是标量，但 Numpy 似乎不这么认为......我错过了什么还是我只是误解了这个概念？

```
>>> foo = numpy.array(1.11111111111, numpy.float64)
>>> numpy.ndim(foo)
0
>>> numpy.isscalar(foo)
False
>>> foo.item()
1.11111111111 
```

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2009-04-27T18:55:32.490

人们不应该想太多。这最终对个人的心理健康和长寿有好处。

Numpy 标量类型的奇怪情况是因为没有优雅且一致的方法将 1x1 矩阵降级为标量类型。尽管在数学上它们是相同的东西，但它们是由非常不同的代码处理的。

如果您一直在编写任何数量的科学代码，最终您会想要`max(a)`处理各种大小的矩阵，甚至是标量。从数学上讲，这是一件完全合情合理的事情。然而，对于程序员来说，这意味着在 Numpy 中呈现的任何标量都应该具有 .shape 和 .ndim 属性，因此至少 ufunc 不必针对 Numpy 中的 21 种可能的标量类型对其输入进行显式类型检查。

另一方面，它们还应该与对标量类型进行显式类型检查的现有 Python 库一起*使用*。这是一个难题，因为 Numpy ndarray 必须在它们被简化为标量时单独更改其类型，并且如果没有对所有访问进行检查，就无法知道是否发生了这种情况。实际上，按照标量类型标准，走这条路可能会有点慢得可笑。

Numpy 开发人员的解决方案是从 ndarray 和 Python 标量继承其自己的标量类型，以便所有标量也具有 .shape、.ndim、.T 等。1x1 矩阵仍然存在，但它的用途将是如果你知道你将处理一个标量，你会感到气馁。虽然这在理论上应该可以正常工作，但偶尔你仍然可以看到一些他们被油漆滚筒遗漏的地方，并且丑陋的内脏暴露在外，让所有人都能看到：

```
>>> from numpy import *
>>> a = array(1)
>>> b = int_(1)
>>> a.ndim
0
>>> b.ndim
0
>>> a[...]
array(1)
>>> a[()]
1
>>> b[...]
array(1)
>>> b[()]
1 
```

确实没有理由返回不同的`a[...]`东西`a[()]`，但确实如此。有一些建议可以改变这一点，但看起来他们忘记完成 1x1 阵列的工作。

一个可能更大且可能无法解决的问题是 Numpy 标量是不可变的。因此，将一个标量“喷射”到一个 ndarray 中，数学上是将一个数组折叠成一个标量的伴随操作，是一个要实现的 PITA。你实际上不能增长一个 Numpy 标量，它不能被定义为一个 ndarray，即使它`newaxis`神秘地起作用：

```
>>> b[0,1,2,3] = 1
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'numpy.int32' object does not support item assignment
>>> b[newaxis]
array([1]) 
```

在 Matlab 中，增加标量的大小是完全可以接受且无需脑力的操作。`a = array(a)`在 Numpy 中，您必须在任何您*认为*可能以标量开始并以数组结尾的地方都坚持使用 jarring 。我理解为什么 Numpy 必须以这种方式与 Python 配合得很好，但这并不能改变许多新切换器对此深感困惑的事实。有些人清楚地记得与这种行为作斗争并最终坚持下去，而另一些离得太远的人通常会留下一些深深的无形的精神伤疤，经常困扰着他们最天真的梦想。这对所有人来说都是一个丑陋的情况。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-21T15:20:27.110

您必须稍微不同地创建标量数组：

```
>>> x = numpy.float64(1.111)
>>> x
1.111
>>> numpy.isscalar(x)
True
>>> numpy.ndim(x)
0 
```

[从纯数学的角度来看，numpy 中的标量](http://docs.scipy.org/doc/numpy/reference/arrays.scalars.html)看起来可能与您可能习惯的概念有点不同。我猜你在考虑标量矩阵？

# java - 在 Solaris 上使用 Java 的文件名重音

> ID：773054
> 
> 赞同：3
> 
> 时间：2009-04-21T15:05:47.067
> 
> 标签：java, solaris, filenames, diacritics

我有一个问题，我无法在 Solaris 上的文件名中写入带有重音符号的文件。

给出以下代码

```
public static void main(String[] args) {
    System.out.println("Charset = "+ Charset.defaultCharset().toString());
    System.out.println("testéörtkuoë");
    FileWriter fw = null;
    try {
        fw  = new FileWriter("testéörtkuoë");
        fw.write("testéörtkuoëéörtkuoë");
        fw.close(); 
```

我得到以下输出

```
Charset = ISO-8859-1
test??rtkuo? 
```

我得到一个名为“test??rtkuo?”的文件

根据我在 StackOverflow 上找到的信息，我尝试通过在启动时添加“-Dfile.encoding=UTF-8”来调用 Java 应用程序。这将返回以下输出

```
Charset = UTF-8
testéörtkuoë 
```

但文件名仍然是“test??rtkuo?”

任何帮助深表感谢。

史蒂夫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-21T16:00:45.797

所有这些字符都存在于[ISO-8859-1](http://en.wikipedia.org/wiki/ISO_8859-1)中。我怀疑问题的一部分是代码编辑器正在以与您的操作系统正在使用的不同编码保存文件。

如果编辑器使用 ISO-8859-1，我希望它将 ëéö 编码为：

```
eb e9 f6 
```

如果编辑器使用 UTF-8，我希望它将 ëéö 编码为：

```
c3ab c3a9 c3b6 
```

其他编码会产生不同的值。

[如果您使用Unicode 转义序列](http://java.sun.com/docs/books/jls/third_edition/html/lexical.html#3.3)，源文件会更便于移植。至少要确定您的编译器使用与编辑器相同的编码。

例子：

```
ë    \u00EB
é    \u00E9
ö    \u00F6 
```

[您可以使用Unicode 图表](http://www.unicode.org/charts/)查找这些值。

使用 -Dfile.encoding=UTF-8 更改默认文件编码可能会对 JVM 与系统的交互方式产生意想不到的后果。

[这与您可能在 Windows 上看到](http://illegalargumentexception.blogspot.com/2009/04/i18n-unicode-at-windows-command-prompt.html#charsets_pound)的问题有相似之处。

我无法直接重现该问题 - 我的 OpenSolaris 版本使用 UTF-8 作为默认编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T15:10:24.543

如果您尝试使用 java io api 列出文件名，您会看到什么？它们的编码是否正确？我很好奇真正的问题是编码文件名还是使用您用来检查它们的工具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T15:46:46.687

当你这样做时会发生什么：

```
ls > testéörtkuoë 
```

如果这有效（正确写入文件），那么您知道您可以写入带有重音符号的文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-05-24T06:02:42.747

Java 在读写文件时使用操作系统的默认编码。现在，一个人永远不应该依赖它。明确指定编码始终是一个好习惯。

在 Java 中，您可以使用以下内容进行读写：

阅读：

```
BufferedReader br = new BufferedReader(new InputStreamReader(new FileInputStream(inputPath),"UTF-8")); 
```

写作：

```
PrintWriter pw = new PrintWriter(new BufferedWriter(new OutputStreamWriter(new FileOutputStream(outputPath), "UTF-8"))); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-05-19T21:51:56.150

我遇到了类似的问题。与该示例相反，程序无法使用 列出正确的文件`sysout.println`，尽管`ls`显示了正确的值。

如文档中所述，环境变量`file.encoding`不应用于定义字符集，在这种情况下，JVM 会忽略它

**症状：**

1.  我无法在 shell 中输入重音符号。
2.  `ls`显示正确的值
3.  `File.list()`正在打印不正确的值
4.  环境`file.encoding`不影响输出
5.  环境`user.(language|country)`不影响输出

**解决方案：**

尽管环境变量`LC_*`在 shell 中设置为从 /etc/defaut/init 继承的值，如`set`命令所列，但语言环境显示不同的值。

```
$ set | grep LC
LC_ALL=pt_BR.ISO8859-1
LC_COLLATE=pt_BR.ISO8859-1
LC_CTYPE=pt_BR.ISO8859-1
LC_MESSAGES=C
LC_MONETARY=pt_BR.ISO8859-1
LC_NUMERIC=pt_BR.ISO8859-1
LC_TIME=pt_BR.ISO8859-1

$ locale
LANG=
LC_CTYPE="C"
LC_NUMERIC="C"
LC_TIME="C"
LC_COLLATE="C"
LC_MONETARY="C"
LC_MESSAGES="C"
LC_ALL= 
```

解决方案是简单地导出 LANG。这个环境变量真的影响jvm

```
LANG=pt_BR.ISO8859-1
export LANG 
```

# javascript - 获取隐藏字段的值

> ID：773058
> 
> 赞同：14
> 
> 时间：2009-04-21T15:07:23.693
> 
> 标签：javascript, html, input

我引用了隐藏字段，例如：

```
var h = document.getElementById('myHiddenField'); 
```

如何将值设置为 100，然后使用简单的 alert(); 输出该值？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-04-21T15:09:06.513

```
var h = document.getElementById('myHiddenField');
h.value = 100;
alert(h.value); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-26T11:37:37.920

```
//get value
var hidderValue = document.getElementById('myHiddenField').value;

//set value
document.getElementById('myHiddenField').value = 200; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T15:09:20.350

元素的`value`属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-02T16:11:49.287

也许您想在 html 部分中设置隐藏字段的值。为此，请编写：

```
<input type="hidden" id="myHiddenField" value="100"></input> 
```

# sql-server - 如何从 SQL Server 2005 中的 MDF 恢复数据库？

> ID：773059
> 
> 赞同：15
> 
> 时间：2009-04-21T15:07:31.603
> 
> 标签：sql-server, sql-server-2005, mdf, data-recovery

对于在 MS SQL Server 2005 中创建的数据库，我有一个 MDF 文件，但没有 LDF 文件。当我尝试将 MDF 文件附加到不同的 SQL Server 时，我收到以下错误消息。

`The log cannot be rebuilt because there were open transactions/users when the database was shutdown, no checkpoint occurred to the database, or the database was read-only. This error could occur if the transaction log file was manually deleted or lost due to a hardware or environment failure.`

我想完成以下任一选项：

1.  附加数据库而不丢失数据（不太可能，但会节省一些时间）。
2.  附加数据丢失的数据库（任何打开的事务都会丢失）。
3.  从 MDF 文件中仅恢复模式（无数据）。

我可以尝试哪些 SQL 命令让我的数据库重新运行？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-04-21T15:27:49.370

[我在Experts Exchange](http://www.experts-exchange.com/Microsoft/Development/MS-SQL-Server/Q_22700368.html)上找到了以下文档。

patrikt：您会丢失数据，但可以做到。

```
1\. 分离数据库并将您的 mdf 移动到保存位置。
2\. 创建相同名称、相同文件、相同文件位置和相同文件大小的新数据库。
3\. 停止 SQL 服务器。
4\. 将刚刚创建的数据库的 mdf 文件交换到您的保存文件中。
5\. 启动 SQL。DB会怀疑。
6\. ALTER DATABASE yourdbSET EMERGENCY
7\. ALTER DATABASE yourdbSET SINGLE_USER
8\. DBCC CHECKDB ( yourdb, REPAIR_ALLOW_DATA_LOSS)
9\. ALTER DATABASE yourdbSET MULTI_USER
10.yourdb在线
更改数据库集
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-05-28T09:33:01.990

以下是涵盖第 2) 部分和第 3) 部分的详细信息，以防重新创建日志不起作用，如果 MDF 文件损坏，可能会发生这种情况。

您只能通过使用一些第三方工具读取 MDF 文件来恢复数据和结构，该工具可以将写入的内容解码为二进制数据，但即使使用这些工具，您也不能总是完全完成这项工作。

在这种情况下，您可以尝试[ApexSQL Recover](http://www.apexsql.com/sql_tools_recover.aspx)。据我所知，这是唯一可以完成此类工作的工具，但它非常昂贵。

更好的主意是尝试从任何旧备份中恢复这些（如果有的话）。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-04-21T15:11:20.970

来自 SQL Server Forums [Attaching MDF without LDF](http://www.sqlteam.com/forums/topic.asp?TOPIC_ID=85187)的帖子：

如果您想在没有 LDF 的情况下附加 MDF，您可以按照以下步骤进行测试并且工作正常

1.  创建具有相同名称和相同 MDF 和 LDF 文件的新数据库

2.  停止 sql server 并将现有的 MDF 重命名为新的 MDF 并将原始 MDF 复制到此位置并删除 LDF 文件。

3.  启动 SQL Server

4.  现在您的数据库将被标记为可疑 5\. 更新 sysdatabases 以更新到紧急模式。这不会在启动时使用 LOG 文件

> ```
> Sp_configure "allow updates", 1
> go
> Reconfigure with override
> GO
> Update sysdatabases set status = 32768 where name = "BadDbName"
> go
> Sp_configure "allow updates", 0
> go
> Reconfigure with override
> GO 
> ```

6.  重启sql server。现在数据库将处于紧急模式

7.  现在执行未记录的 DBCC 以创建日志文件

> DBCC REBUILD_LOG(dbname,'c:\dbname.ldf') -- 创建新日志文件的未记录步骤。

（根据您的要求替换数据库名和日志文件名）

8.  执行 sp_resetstatus

9.  重新启动 SQL Server 并查看数据库是否在线。

**更新：** DBCC REBUILD_LOG 不存在 SQL2005 及更高版本。这应该有效：

```
USE [master]
GO
CREATE DATABASE [Test] ON 
    (FILENAME = N'C:\MSSQL\Data\Test.mdf')
    FOR ATTACH_REBUILD_LOG
GO 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-04-22T03:05:39.410

您是否尝试忽略 ldf 并仅附加 mdf：

sp_attach_single_file_db [ @dbname = ] 'dbname' ， [ @physname = ] 'physical_name'

我不确切知道您的未结交易会发生什么（可能只是丢失了），但它可能会使您的数据重新在线。

-大学教师

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-21T16:52:52.770

请参阅此处：[Rebuild master and restore system databases from complete disk failure](http://blogs.lessthandot.com/index.php/DataMgmt/DBAdmin/rebuild-master-and-restore-system-databa)这有一个很好的解释

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2010-09-13T14:29:08.590

找到了另一种完全有效的方法：

1.  创建与默认数据库位置同名的新数据库。
2.  停止 SQL 服务器。
3.  复制旧的 mdf 文件以覆盖新创建的 mdf 文件并删除新的 ldf 文件
4.  启动 SQL Server，数据库将处于紧急模式
5.  分离紧急模式数据库
6.  将原始 ldf 文件复制到默认数据库位置（在上述步骤 3 中创建和删除的新 LDF 文件所在的位置。
7.  附加数据库 MDF 文件。

在尝试了以上所有对我来说都失败的方法后，我得到了一个工作数据库。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-01-16T10:46:12.563

我自己也遇到了这个问题，但以上答案都不适合我。

但相反，我发现这很有效，所以我想我会与其他人分享这个：

[http://www.kodyaz.com/articles/sql-server-attach-database-mdf-file.aspx](http://www.kodyaz.com/articles/sql-server-attach-database-mdf-file.aspx)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-11-21T06:47:30.830

我希望这样做很容易，

1.  **打开 SQL 服务器**
2.  **单击新建查询**
3.  **执行以下查询**

    sp_attach_single_file_db @dbname='dbname',@physname='C:\Database\dbname.MDF'

`dbname`您要在对象资源管理器中显示`@physname`的位置，mdf 文件的本地文件路径位置在哪里。

希望它会帮助某人，我在上面完成了，既获得了结构又获得了数据。

在 Sql Server 2000 和 2008 中测试。在 Sql Server 2000 中它不工作，但在 2008 年完美工作。

# asp.net - jQuery UI 对话框 + ASP.NET 文本框 + 焦点

> ID：773061
> 
> 赞同：5
> 
> 时间：2009-04-21T15:07:56.827
> 
> 标签：asp.net, jquery, jquery-ui

**问题**

我正在使用 jQuery UI 对话框来显示一个对话框，其中包含一些 ASP.NET 文本框和一个按钮。但是，当 jQuery 将对话框的 div 移到表单之外时，我需要自己将其重新移回表单（有关详细信息，请参阅[此](https://stackoverflow.com/questions/757232/jquery-ui-dialog-with-asp-net-button-postback/768163#768163)内容），这样 ASP.NET 仍然可以工作。这种移动导致了一个问题，如果调用该字段，则该字段不会获得焦点。

如果您查看标有 B 行的行下方的示例，则应该设置焦点，但是标有 A 行的行打破了这一点。如果我注释掉 A 行，它会起作用。无论我将 B 行移动到哪里（在对话框、A 行等之前），它仍然无法设置焦点。

通过设置焦点，我的意思是光标在文本框中闪烁，准备输入。

**问题**在这种情况下如何设置焦点？

**样品**

HTML 正文示例

```
<body>
<form id="form1" runat="server">
<div id="popup">
    <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox><br />
    <asp:TextBox ID="TextBox2" runat="server"></asp:TextBox>
</div>
</form>
</body> 
```

jQuery 示例

```
 $(document).ready(function() {
        var dlg = $("#popup").dialog();
        /*Line A*/ dlg.parent().appendTo(jQuery("form:first"));
        /*Line B*/ $("#TextBox2").focus();
    }); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-03T06:05:57.143

尝试使用`setTimeout("$('#TextBox2').focus();",100);`, for dialog 和 jQuery UI 的其他方法，有时需要几秒钟才能真正执行我们通过代码分配的任务。

希望这可以帮助。这种解决方法对我的许多应用程序都有帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-01T21:19:26.637

我认为问题在于您在完全创建对话框之前移动弹出窗口并调用焦点。

尝试改用对话框的`open`事件：

```
$(document).ready(function() {
  $("#popup").dialog({
    open: function(){
      $(this).parent().appendTo(jQuery("form:first"));
      $("#TextBox2").focus();
    }
  });
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-21T17:56:09.297

它适用于FF，但不适用于IE7。我想出了2个解决方法。如果您没有按名称而是按位置引用文本框，或者由于某种原因您设置了两次焦点。

首先：

```
$("input:text:second").focus(); 
```

第二：

```
$("#TextBox2").focus().focus(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-01T20:48:11.407

您还可以对文本框进行分类，因为 asp.net 会破坏控件 ID 以避免命名冲突。

```
$(".mytextbox").focus(); 
```

举个例子..这当然违背了语义的目的，但语义不能很好地与网络表单混合。

# ruby-on-rails - 带有 ajax 选项卡和验证的 Rails Web 应用程序控制面板

> ID：773063
> 
> 赞同：0
> 
> 时间：2009-04-21T15:08:20.370
> 
> 标签：ruby-on-rails, controlpanel

我正在寻找一个带有管理控制面板的 Rails Web 应用程序。我希望控制面板使用选项卡式界面来控制用户、项目、任务等，并且我想使用带有 ajax 的 jquery 选项卡 UI 控件在选项卡之间切换。还对用户使用 restful 身份验证，对项目、任务等使用我自己的代码。

这是我无法理解的。通常，我会为每个选项卡设置一个控制器，因此验证很简单，如果出现错误（例如在用户中），我只需使用对象呈现正确的操作并且它是错误的并且我们已经设置好了。但是，如果我不刷新（标签之间的不同控制器），这是如何工作的？我是否需要一个包含所有用户、项目、任务验证和控制（即 crud 操作）的大型控制器？似乎不是最伟大的设计。

或者有什么方法可以使用包含单独控制器的“管理”控制器，以进行正确的 crud/错误检查等。

希望这有意义吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T16:27:03.533

我会通过单独的 ajax 请求调用每个选项卡的内容。这将为您带来以下好处

*   现在每个选项卡都可以轻松成为不同的视图/控制器
*   您只需要在使用时加载选项卡的内容；您不会为用户不使用的标签处理代码/下载 html。

如果您不想使用此路由（即您觉得需要在单个请求中加载页面下载选项卡的所有内容），那么您可以使用辅助方法和部分代码分离出代码。在这里查看我的答案：[Rails 子控制器？](https://stackoverflow.com/questions/704687/rails-sub-controllers/705781#705781)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T16:18:37.783

我个人会在表单中使用内联验证。 [Jquery](http://jquery.com/)做得[很好](http://www.coldfusionjedi.com/index.cfm/2009/2/9/An-introduction-to-jQuery-and-Form-Validation)，但是有很多库可以帮助你。

我想这不是您想要的，但它会让您的工作更轻松。当然仍然在模型中保留验证，这样没有人可以绕过验证（使用萤火虫或类似的东西）

# c# - 什么是 AAA 语法相当于在 Rhino Mocks 中使用 Ordered()

> ID：773064
> 
> 赞同：10
> 
> 时间：2009-04-21T15:08:24.643
> 
> 标签：c#, unit-testing, rhino-mocks

我一辈子都找不到在 Rhino 中使用 Fluent/AAA 语法来验证操作顺序的正确语法。

我知道如何使用旧的学校记录/播放语法来做到这一点：

```
 MockRepository repository = new MockRepository();
        using (repository.Ordered())
        {
            // set some ordered expectations
        }

        using (repository.Playback())
        {
            // test
        } 
```

谁能告诉我在 Rhino Mocks 的 AAA 语法中相当于什么。如果您能指出我的一些文档，那就更好了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-21T15:40:53.537

试试这个：

```
 //
  // Arrange
  //
  var mockFoo = MockRepository.GenerateMock<Foo>();
  mockFoo.GetRepository().Ordered();
  // or mockFoo.GetMockRepository().Ordered() in later versions

  var expected = ...;
  var classToTest = new ClassToTest( mockFoo );
  // 
  // Act
  //
  var actual = classToTest.BarMethod();

  //  
  // Assert
  //
  Assert.AreEqual( expected, actual );
 mockFoo.VerifyAllExpectations(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-08-19T11:38:55.023

这是一个交互测试示例，您通常希望将有序期望用于：

```
// Arrange
var mockFoo = MockRepository.GenerateMock< Foo >();

using( mockFoo.GetRepository().Ordered() )
{
   mockFoo.Expect( x => x.SomeMethod() );
   mockFoo.Expect( x => x.SomeOtherMethod() );
}
mockFoo.Replay(); //this is a necessary leftover from the old days...

// Act
classToTest.BarMethod

//Assert
mockFoo.VerifyAllExpectations(); 
```

这种语法非常类似于 Expect/Verify，但据我所知，这是目前唯一的方法，它确实利用了 3.5 引入的一些不错的特性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-01-23T18:02:14.233

GenerateMock 静态助手和 Ordered() 对我来说没有按预期工作。这就是我的诀窍（关键似乎是显式创建您自己的 MockRepository 实例）：

```
 [Test]
    public void Test_ExpectCallsInOrder()
    {
        var mockCreator = new MockRepository();
        _mockChef = mockCreator.DynamicMock<Chef>();
        _mockInventory = mockCreator.DynamicMock<Inventory>();
        mockCreator.ReplayAll();

        _bakery = new Bakery(_mockChef, _mockInventory);

        using (mockCreator.Ordered())
        {
            _mockInventory.Expect(inv => inv.IsEmpty).Return(false);
            _mockChef.Expect(chef => chef.Bake(CakeFlavors.Pineapple, false));
        }

        _bakery.PleaseDonate(OrderForOnePineappleCakeNoIcing);

        _mockChef.VerifyAllExpectations();
        _mockInventory.VerifyAllExpectations();
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-06-03T00:43:50.483

**tvanfosson**的解决方案对我也不起作用。我需要验证是否以特定顺序对 2 个模拟进行了调用。

根据 Ayende 在[Google Groups](https://groups.google.com/forum/#!topic/rhinomocks/8uSy9yVQFZA) `Ordered()`中的回复在 AAA 语法中不起作用。

# html - 是否有任何独立的 HTML 标记验证工具

> ID：773070
> 
> 赞同：9
> 
> 时间：2009-04-21T15:09:08.480
> 
> 标签：html, markup

除了在 W3C 网站上提交单个网页进行验证之外，是否有任何独立的工具可以完成这项工作。

理想情况下，这将是一个可以在设计时捕获错误的 Visual Studio 插件，但只需要在本地运行一个 wep 应用程序 url 的插件会很好。

开源建议会更好

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-21T15:58:45.897

W3C 标记验证器是一个开源工具，您可以[下载](http://dev.w3.org/cvsweb/validator/)并离线使用它。

在 Fedora 上，执行以下操作：

```
yum install w3c-markup-validator 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-21T15:13:57.937

我使用 FireFox 插件“ [HTMLTidy](http://users.skynet.be/mgueury/mozilla/) ”来做到这一点。当您进行测试时，您可以将 Firefox 指向您的开发服务器（即“ [http://localhost:52457/](http://localhost:52457/) ...”），它会像网站一样正常工作。

还可以考虑将 HTML 错误设置为 VS 中的编译错误，并将您的兼容性级别/Doctype 设置为 XHTML 1.1 Strict 以获取所有错误。这些设置位于工具 -> 选项 -> 文本编辑器 -> HTML -> 验证下

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T15:12:21.607

你可以试试[整洁](http://tidy.sourceforge.net/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-21T16:03:11.533

[CSE HTML Validator](http://www.htmlvalidator.com/)是我过去使用过的一种。

它不是开源的，但有一个免费版本。

# javascript - 使用 JQuery 的垂直选项卡？

> ID：773074
> 
> 赞同：80
> 
> 时间：2009-04-21T15:09:34.110
> 
> 标签：javascript, jquery, jquery-ui

我想要页面左侧的标签而不是顶部的标签。由于其他原因（效果），我已经在加载 jQuery，所以我更喜欢使用 jQuery 而不是另一个 UI 框架。对“垂直标签 jquery”的搜索会产生指向正在进行中的工作的链接。

让垂直选项卡跨浏览器工作是否令人担忧，或者它是否如此微不足道，以至于一旦有了解决方案，发布示例代码似乎就不值得了？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2009-10-06T19:10:16.577

看看[jQuery UI 垂直选项卡文档](http://jqueryui.com/tabs/#vertical)。我试了一下，效果很好。

```
<style type="text/css">
/* Vertical Tabs
----------------------------------*/
.ui-tabs-vertical { width: 55em; }
.ui-tabs-vertical .ui-tabs-nav { padding: .2em .1em .2em .2em; float: left; width: 12em; }
.ui-tabs-vertical .ui-tabs-nav li { clear: left; width: 100%; border-bottom-width: 1px !important; border-right-width: 0 !important; margin: 0 -1px .2em 0; }
.ui-tabs-vertical .ui-tabs-nav li a { display:block; }
.ui-tabs-vertical .ui-tabs-nav li.ui-tabs-selected { padding-bottom: 0; padding-right: .1em; border-right-width: 1px; border-right-width: 1px; }
.ui-tabs-vertical .ui-tabs-panel { padding: 1em; float: right; width: 40em;}
</style> 

<script>
    $(document).ready(function() {
        $("#tabs").tabs().addClass('ui-tabs-vertical ui-helper-clearfix');
        $("#tabs li").removeClass('ui-corner-top').addClass('ui-corner-left');

    });
</script> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-21T15:37:38.737

在这里试试：

[http://www.sunsean.com/idTabs/](http://www.sunsean.com/idTabs/)

看看 Freedom 标签可能有你需要的东西。

如果你找到你喜欢的东西，请告诉我。几个月前我研究了完全相同的问题，并决定自己实现。我喜欢我所做的，但使用标准库可能会很好。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-09-16T19:46:58.197

我已经创建了一个垂直菜单和在页面中间更改的选项卡。我在代码源上更改了两个词，并设置了两个不同的 div

菜单：

```
<div class="arrowgreen">
  <ul class="tabNavigation"> 
    <li> <a href="#first" title="Home">Tab 1</a></li>
    <li> <a href="#secund" title="Home">Tab 2</a></li>
  </ul>
</div> 
```

内容：

```
<div class="pages">
  <div id="first">
    CONTENT 1
  </div>
  <div id="secund">
    CONTENT 2
  </div>
</div> 
```

该代码与 div 分开

```
$(function () {
    var tabContainers = $('div.pages > div');

    $('div.arrowgreen ul.tabNavigation a').click(function () {
        tabContainers.hide().filter(this.hash).show();

        $('div.arrowgreen ul.tabNavigation a').removeClass('selected');
        $(this).addClass('selected');

        return false;
    }).filter(':first').click();
}); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-18T06:08:10.663

```
//o_O\\  (Poker Face) i know its late 
```

**只需在下面添加 w css 样式**

```
<style type="text/css">

   /* Vertical Tabs ----------------------------------*/
 .ui-tabs-vertical { width: 55em; }
 .ui-tabs-vertical .ui-tabs-nav { padding: .2em .1em .2em .2em; float: left; width: 12em; }
 .ui-tabs-vertical .ui-tabs-nav li { clear: left; width: 100%; border-bottom-width: 1px !important; border-right-width: 0 !important; margin: 0 -1px .2em 0; }
 .ui-tabs-vertical .ui-tabs-nav li a { display:block; }
 .ui-tabs-vertical .ui-tabs-nav li.ui-tabs-selected { padding-bottom: 0; padding-right: .1em; border-right-width: 1px; border-right-width: 1px; }
 .ui-tabs-vertical .ui-tabs-panel { padding: 1em; float: right; width: 40em;}

</style> 
```

更新 ！[http://jqueryui.com/tabs/#vertical](http://jqueryui.com/tabs/#vertical)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-21T15:37:32.280

我不希望垂直选项卡需要与水平选项卡不同的 Javascript。唯一不同的是用于在页面上显示选项卡和内容的 CSS。用于标签的 JS 通常不超过显示/隐藏/可能加载内容。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-09-13T22:04:05.887

另一个选择是 Matteo Bicocchi 的 jQuery mb.extruder tabs 插件： [http ://pupunzi.open-lab.com/mb-jquery-components/jquery-mb-extruder/](http://pupunzi.open-lab.com/mb-jquery-components/jquery-mb-extruder/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-21T15:44:59.687

看看[Listamatic](http://css.maxdesign.com.au/listamatic/)。选项卡在语义上只是以特定方式设置样式的项目列表。您甚至不一定需要 javascript 来使垂直选项卡像 Listamatic show 上的各种示例一样工作。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-05-14T13:34:29.013

超级简单的功能，可让您在这里创建自己的标签/手风琴结构：http: [//jsfiddle.net/nabeezy/v36DF/](http://jsfiddle.net/nabeezy/v36DF/)

```
bindSets = function (tabClass, tabClassActive, contentClass, contentClassHidden) {
        //Dependent on jQuery
        //PARAMETERS
        //tabClass: 'the class name of the DOM elements that will be clicked',
        //tabClassActive: 'the class name that will be applied to the active tabClass element when clicked (must write your own css)',
        //contentClass: 'the class name of the DOM elements that will be modified when the corresponding tab is clicked',
        //contentClassHidden: 'the class name that will be applied to all contentClass elements except the active one (must write your own css)',
        //MUST call bindSets() after dom has rendered

        var tabs = $('.' + tabClass);
        var tabContent = $('.' + contentClass);
        if(tabs.length !== tabContent.length){console.log('JS bindSets: sets contain a different number of elements')};
        tabs.each(function (index) {
            this.matchedElement = tabContent[index];
            $(this).click(function () {
                tabs.each(function () {
                    this.classList.remove(tabClassActive);
                });
                tabContent.each(function () {
                    this.classList.add(contentClassHidden);
                });
                this.classList.add(tabClassActive);
                this.matchedElement.classList.remove(contentClassHidden);
            });
        })
        tabContent.each(function () {
            this.classList.add(contentClassHidden);
        });

        //tabs[0].click();
    }
bindSets('tabs','active','content','hidden'); 
```

# c# - 将字符串转换为可空类型（int、double 等...）

> ID：773078
> 
> 赞同：145
> 
> 时间：2009-04-21T15:10:03.267
> 
> 标签：c#, .net, generics, extension-methods, type-conversion

我正在尝试进行一些数据转换。不幸的是，大部分数据都在字符串中，它应该是 int 或 double 等......

所以我得到的是这样的：

```
double? amount = Convert.ToDouble(strAmount); 
```

这种方法的问题是如果 strAmount 为空，如果它为空，我希望它为空，所以当我将它添加到数据库中时，该列将为空。所以我最终写了这个：

```
double? amount = null;
if(strAmount.Trim().Length>0)
{
    amount = Convert.ToDouble(strAmount);
} 
```

现在这工作正常，但我现在有五行代码而不是一行。这使事情变得更难阅读，尤其是当我有大量的列要转换时。

我想我会使用字符串类和泛型的扩展来传递类型，这是因为它可能是双精度型、整数型或长型。所以我尝试了这个：

```
public static class GenericExtension
{
    public static Nullable<T> ConvertToNullable<T>(this string s, T type) where T: struct
    {
        if (s.Trim().Length > 0)
        {
            return (Nullable<T>)s;
        }
        return null;
    }
} 
```

但我收到错误：无法将类型“字符串”转换为“T？”

有没有解决的办法？我对使用泛型创建方法不是很熟悉。

* * *

## 回答 #1

> 赞同：163
> 
> 时间：2009-04-21T15:19:15.897

要记住的另一件事是字符串本身可能为空。

```
public static Nullable<T> ToNullable<T>(this string s) where T: struct
{
    Nullable<T> result = new Nullable<T>();
    try
    {
        if (!string.IsNullOrEmpty(s) && s.Trim().Length > 0)
        {
            TypeConverter conv = TypeDescriptor.GetConverter(typeof(T));
            result = (T)conv.ConvertFrom(s);
        }
    }
    catch { } 
    return result;
} 
```

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2009-04-21T15:19:24.943

您可以尝试使用以下扩展方法：

```
public static T? GetValueOrNull<T>(this string valueAsString)
    where T : struct 
{
    if (string.IsNullOrEmpty(valueAsString))
        return null;
    return (T) Convert.ChangeType(valueAsString, typeof(T));
} 
```

这样你就可以做到这一点：

```
double? amount = strAmount.GetValueOrNull<double>();
int? amount = strAmount.GetValueOrNull<int>();
decimal? amount = strAmount.GetValueOrNull<decimal>(); 
```

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2009-04-21T15:16:09.290

那这个呢：

```
 double? amount = string.IsNullOrEmpty(strAmount) ? (double?)null : Convert.ToDouble(strAmount); 
```

当然，这没有考虑转换失败。

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2009-06-02T13:24:18.950

我写了这个通用类型转换器。它适用于 Nullable 和标准值，在所有可转换类型之间进行转换——而不仅仅是字符串。它处理您期望的各种场景（默认值、空值、其他值等...）

我已经在几十个生产程序中使用它大约一年了，所以它应该非常可靠。

```
 public static T To<T>(this IConvertible obj)
    {
        Type t = typeof(T);

        if (t.IsGenericType
            && (t.GetGenericTypeDefinition() == typeof(Nullable<>)))
        {
            if (obj == null)
            {
                return (T)(object)null;
            }
            else
            {
                return (T)Convert.ChangeType(obj, Nullable.GetUnderlyingType(t));
            }
        }
        else
        {
            return (T)Convert.ChangeType(obj, t);
        }
    }

    public static T ToOrDefault<T>
                 (this IConvertible obj)
    {
        try
        {
            return To<T>(obj);
        }
        catch
        {
            return default(T);
        }
    }

    public static bool ToOrDefault<T>
                        (this IConvertible obj,
                         out T newObj)
    {
        try
        {
            newObj = To<T>(obj);
            return true;
        }
        catch
        {
            newObj = default(T);
            return false;
        }
    }

    public static T ToOrOther<T>
                           (this IConvertible obj,
                           T other)
    {
        try
        {
            return To<T>(obj);
        }
        catch
        {
            return other;
        }
    }

    public static bool ToOrOther<T>
                             (this IConvertible obj,
                             out T newObj,
                             T other)
    {
        try
        {
            newObj = To<T>(obj);
            return true;
        }
        catch
        {
            newObj = other;
            return false;
        }
    }

    public static T ToOrNull<T>
                          (this IConvertible obj)
                          where T : class
    {
        try
        {
            return To<T>(obj);
        }
        catch
        {
            return null;
        }
    }

    public static bool ToOrNull<T>
                      (this IConvertible obj,
                      out T newObj)
                      where T : class
    {
        try
        {
            newObj = To<T>(obj);
            return true;
        }
        catch
        {
            newObj = null;
            return false;
        }
    } 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2009-04-21T15:12:58.673

您可能想尝试：

```
TypeConverter conv = TypeDescriptor.GetConverter(typeof(int));
conv.ConvertFrom(mystring); 
```

做你自己的空检查并`int?`在必要时返回。您还需要将其包装在`try {}`

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2009-04-21T15:25:54.570

试一试...

```
public delegate bool TryParseDelegate<T>(string data, out T output);

public static T? ToNullablePrimitive<T>(this string data, 
    TryParseDelegate<T> func) where T:struct
{
    string.IsNullOrEmpty(data) return null;

    T output;

    if (func(data, out output))
    {
        return (T?)output;
    }

    return null;
} 
```

然后这样称呼...

```
void doStuff()
{
    string foo = "1.0";

    double? myDouble = foo.ToNullablePrimitive<double>(double.TryParse);

    foo = "1";

    int? myInt = foo.ToNullablePrimitive<int>(int.TryParse);

    foo = "haha";

    int? myInt2 = foo.ToNullablePrimitive<int>(int.TryParse);
} 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2011-02-02T18:23:36.133

我喜欢乔尔的回答，但我稍微修改了一下，因为我不喜欢吃例外。

```
 /// <summary>
    /// Converts a string to the specified nullable type.
    /// </summary>
    /// <typeparam name="T">The type to convert to</typeparam>
    /// <param name="s">The string to convert</param>
    /// <returns>The nullable output</returns>
    public static T? ToNullable<T>(this string s) where T : struct
    {
        if (string.IsNullOrWhiteSpace(s))
            return null;

        TypeConverter conv = TypeDescriptor.GetConverter(typeof (T));
        return (T) conv.ConvertFrom(s);
    }

    /// <summary>
    /// Attempts to convert a string to the specified nullable primative.
    /// </summary>
    /// <typeparam name="T">The primitive type to convert to</typeparam>
    /// <param name="data">The string to convert</param>
    /// <param name="output">The nullable output</param>
    /// <returns>
    /// True if conversion is successfull, false otherwise.  Null and whitespace will
    /// be converted to null and return true.
    /// </returns>
    public static bool TryParseNullable<T>(this string data, out T? output) where T : struct
    {
        try
        {
            output = data.ToNullable<T>();
            return true;
        }
        catch
        {
            output = null;
            return false;
        }
    } 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2012-07-06T09:49:03.807

您可以将以下内容与对象一起使用，但不幸的是，这不适用于字符串。

```
double? amount = (double?)someObject; 
```

我用它来将会话变量包装在一个属性中（在一个基本页面上）。所以我的实际用法是（在我的基本页面上）：

```
public int? OrganisationID
{
    get { return (int?)Session[Constants.Session_Key_OrganisationID]; }
    set { Session[Constants.Session_Key_OrganisationID] = value; }
} 
```

我能够在页面逻辑中检查 null：

```
if (base.OrganisationID == null)
    // do stuff 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2009-04-21T15:11:24.637

没有办法解决这个问题。Nullable 以及您的方法都被限制为仅使用值类型作为其参数。String 是一种引用类型，因此与此声明不兼容。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2009-04-21T15:19:59.810

```
public static class GenericExtension
{
    public static T? ConvertToNullable<T>(this String s) where T : struct 
    {
        try
        {
            return (T?)TypeDescriptor.GetConverter(typeof(T)).ConvertFrom(s);
        }
        catch (Exception)
        {
            return null;
        }
    }
} 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2011-11-10T09:05:55.933

有一个通用的解决方案（适用于任何类型）。可用性很好，但应该改进实现： [http ://cleansharp.de/wordpress/2011/05/generischer-typeconverter/](http://cleansharp.de/wordpress/2011/05/generischer-typeconverter/)

这使您可以编写非常干净的代码，如下所示：

```
string value = null;
int? x = value.ConvertOrDefault<int?>(); 
```

并且：

```
object obj = 1;  

string value = null;
int x = 5;
if (value.TryConvert(out x))
    Console.WriteLine("TryConvert example: " + x); 

bool boolean = "false".ConvertOrDefault<bool>();
bool? nullableBoolean = "".ConvertOrDefault<bool?>();
int integer = obj.ConvertOrDefault<int>();
int negativeInteger = "-12123".ConvertOrDefault<int>();
int? nullableInteger = value.ConvertOrDefault<int?>();
MyEnum enumValue = "SecondValue".ConvertOrDefault<MyEnum>();

MyObjectBase myObject = new MyObjectClassA();
MyObjectClassA myObjectClassA = myObject.ConvertOrDefault<MyObjectClassA>(); 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2016-05-04T14:33:43.930

这是基于公认答案的内容。我删除了 try/catch 以确保所有异常都不会被吞下和处理。还要确保返回变量（在接受的答案中）永远不会被初始化两次。

```
public static Nullable<T> ToNullable<T>(this string s) where T: struct
{
    if (!string.IsNullOrWhiteSpace(s))
    {
        TypeConverter conv = TypeDescriptor.GetConverter(typeof(T));

        return (T)conv.ConvertFrom(s);
    }

    return default(Nullable<T>);
} 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2014-12-09T13:05:06.143

我的匿名类型示例：

```
private object ConvertNullable(object value, Type nullableType)
{
    Type resultType = typeof(Nullable<>).MakeGenericType(nullableType.GetGenericArguments());
    return Activator.CreateInstance(resultType, Convert.ChangeType(value, nullableType.GetGenericArguments()[0]));
}

...

Type anonimousType = typeof(Nullable<int>);
object nullableInt1 = ConvertNullable("5", anonimousType);
// or evident Type
Nullable<int> nullableInt2 = (Nullable<int>)ConvertNullable("5", typeof(Nullable<int>)); 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2017-11-08T20:54:56.100

另一种变体。这个

*   不吞下异常
*   `NotSupportedException`如果无法从 转换类型，则抛出 a `string`。例如，没有类型转换器的自定义结构。
*   否则，`(T?)null`如果字符串解析失败，则返回 a。无需检查空值或空格。

```
using System.ComponentModel;

public static Nullable<T> ToNullable<T>(this string s) where T : struct
{
    var ret = new Nullable<T>();
    var conv = TypeDescriptor.GetConverter(typeof(T));

    if (!conv.CanConvertFrom(typeof(string)))
    {
        throw new NotSupportedException();
    }

    if (conv.IsValid(s))
    {
        ret = (T)conv.ConvertFrom(s);
    }

    return ret;
} 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2017-02-24T18:22:33.590

让我们在堆栈中添加一个类似的解决方案。这个也解析枚举，看起来不错。非常安全。

```
/// <summary>
    /// <para>More convenient than using T.TryParse(string, out T). 
    /// Works with primitive types, structs, and enums.
    /// Tries to parse the string to an instance of the type specified.
    /// If the input cannot be parsed, null will be returned.
    /// </para>
    /// <para>
    /// If the value of the caller is null, null will be returned.
    /// So if you have "string s = null;" and then you try "s.ToNullable...",
    /// null will be returned. No null exception will be thrown. 
    /// </para>
    /// <author>Contributed by Taylor Love (Pangamma)</author>
    /// </summary>
    /// <typeparam name="T"></typeparam>
    /// <param name="p_self"></param>
    /// <returns></returns>
    public static T? ToNullable<T>(this string p_self) where T : struct
    {
        if (!string.IsNullOrEmpty(p_self))
        {
            var converter = System.ComponentModel.TypeDescriptor.GetConverter(typeof(T));
            if (converter.IsValid(p_self)) return (T)converter.ConvertFromString(p_self);
            if (typeof(T).IsEnum) { T t; if (Enum.TryParse<T>(p_self, out t)) return t;}
        }

        return null;
    } 
```

[https://github.com/Pangamma/PangammaUtilities-CSharp/blob/master/PangammaUtilities/Extensions/ToNullableStringExtension.cs](https://github.com/Pangamma/PangammaUtilities-CSharp/blob/master/PangammaUtilities/Extensions/ToNullableStringExtension.cs)

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-08-01T11:38:15.980

“ *Joel Coehoorn* ”提供的通用答案很好。

但是，这是不使用这些`GetConverter...`或`try/catch`块的另一种方式......（我不确定，但在某些情况下这可能会有更好的性能）：

```
public static class StrToNumberExtensions
{
    public static short ToShort(this string s, short defaultValue = 0) => short.TryParse(s, out var v) ? v : defaultValue;
    public static int ToInt(this string s, int defaultValue = 0) => int.TryParse(s, out var v) ? v : defaultValue;
    public static long ToLong(this string s, long defaultValue = 0) => long.TryParse(s, out var v) ? v : defaultValue;
    public static decimal ToDecimal(this string s, decimal defaultValue = 0) => decimal.TryParse(s, out var v) ? v : defaultValue;
    public static float ToFloat(this string s, float defaultValue = 0) => float.TryParse(s, out var v) ? v : defaultValue;
    public static double ToDouble(this string s, double defaultValue = 0) => double.TryParse(s, out var v) ? v : defaultValue;

    public static short? ToshortNullable(this string s, short? defaultValue = null) => short.TryParse(s, out var v) ? v : defaultValue;
    public static int? ToIntNullable(this string s, int? defaultValue = null) => int.TryParse(s, out var v) ? v : defaultValue;
    public static long? ToLongNullable(this string s, long? defaultValue = null) => long.TryParse(s, out var v) ? v : defaultValue;
    public static decimal? ToDecimalNullable(this string s, decimal? defaultValue = null) => decimal.TryParse(s, out var v) ? v : defaultValue;
    public static float? ToFloatNullable(this string s, float? defaultValue = null) => float.TryParse(s, out var v) ? v : defaultValue;
    public static double? ToDoubleNullable(this string s, double? defaultValue = null) => double.TryParse(s, out var v) ? v : defaultValue;
} 
```

用法如下：

```
var x1 = "123".ToInt(); //123
var x2 = "abc".ToInt(); //0
var x3 = "abc".ToIntNullable(); // (int?)null 
int x4 = ((string)null).ToInt(-1); // -1
int x5 = "abc".ToInt(-1); // -1

var y = "19.50".ToDecimal(); //19.50

var z1 = "invalid number string".ToDoubleNullable(); // (double?)null
var z2 = "invalid number string".ToDoubleNullable(0); // (double?)0 
```

# wpf - WPF Toolkit 数据网格中有没有办法在列标题下方但在第一行上方有一个标题

> ID：773082
> 
> 赞同：2
> 
> 时间：2009-04-21T15:10:24.497
> 
> 标签：wpf, datagrid, wpftoolkit

我正在寻找一种方法来创建一个区域，该区域指示用户位于 WPF Toolkit 数据网格的第一行。（显示向下滚动的滚动条对用户来说是不够的）。我需要一些突出的东西，基本上说“这是第一行”。弄乱网格绑定的实体对我来说不起作用，因为我有几个网格在同一个实体集合上具有不同的过滤器。在应用程序运行时，此基础集合也在发生变化。

有没有办法在列标题和数据网格的第一行之间添加某种控件？也许是某种分隔符？

谢谢！乔恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T16:07:14.487

一种可能的解决方案是使用 ColumnHeaderTemplate 为列标题创建您自己的模板，并在其中显示您需要的任何内容。这样您就可以完全控制标题的外观。

另一个 hackish 解决方案可能是您更改标题的样式以达到所需的效果，例如将底部边距设置为更高的值，以便在标题和第一行之间留出空间。

# wcf - 在多层架构中放置语言翻译的位置

> ID：773092
> 
> 赞同：1
> 
> 时间：2009-04-21T15:13:12.620
> 
> 标签：wcf, architecture, internationalization, distributed

我构建了一个具有以下层的应用程序：

*   WEB表示层
*   业务逻辑层 - BLL - 通过 HTTP Web 服务从 WEB UI 调用
*   WindowsService - 运行时 - 通过 net.pipe 从 BLL 调用

BLL 也可以从第 3 方调用以集成到其他客户的系统中。

假设在运行时甚至 BLL 中发生了验证错误。哪里最好放翻译：

1.  在异常消息中 - 表示我们必须将 UICulture 从 WEB 层发送到较低层
2.  BLL 和 Runtime 正在返回错误代码或自定义 Exception 派生类型，并在 WEB UI 层执行翻译
3.  其他一些方法

在 SOA 架构中支持多种语言的最佳实践是什么？

编辑：我可能应该使用术语层而不是层。

*   WEB UI 层在 ASP.NET Web 表单中实现，将部署在 IIS 下的服务器 A 上。
*   BLL 和 Runtime 将部署在服务器 B 上，但由进程边界分隔（由于 WCF 服务，BLL 在 ASP.NET 工作进程下运行，而 Runtime 作为独立的 Windows 服务进程运行）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T15:42:28.650

我对您的问题的建议是一般性的，因为我不知道您正在使用的 .NET 平台的具体情况。

从你的问题中，我看到了两个不同的问题。

1.  您的 Web 表示层**将**依赖于语言。它将需要自定义 CSS、字体、间距甚至自定义内容。不要自欺欺人，这将是不需要的。这是人们最初在国际化 Web 应用程序时犯的最大错误之一。您将需要另一种语言风格。因此，如果您使用模板方法，您可以将大部分语言内容直接放在与语言相关的模板中。

2.  从您的问题描述来看，听起来您还需要处理本地化错误消息。有两种方法：您可以拥有一个语言文件，当使用资源文件解决方案引发错误时，您可以在其中进行本地化。另一种方法是让您的错误消息使用通用标识符和参数，并让另一层捕获消息并将其本地化。我自己更喜欢前一种解决方案，因为它更简单。

还要记住，如果您将错误消息写入日志文件，则错误消息是开发人员可以阅读的语言。同样，对于在 GUI 中向用户显示的错误，您将需要某种方式让用户向不说用户语言的开发人员识别错误。这可以通过使用数字来完成 - 我更喜欢使用短键，例如`DATABASE_ERROR_BAD_QUERY`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-13T19:18:51.487

翻译应由表示层处理，因为它与视图相关。可以添加到消息中的上下文越多越好，业务逻辑可能不知道上下文也不应该知道。

我使用的一种方法如下：

*   业务逻辑会抛出独特的、已定义的错误代码，这些错误代码可用作资源包中的键以获取已翻译的消息。

*   表示层维护一个文本包，其中包含与一般表示层代码分开的所有错误代码翻译。

*   表示层依赖于
    业务逻辑和文本包。

*   业务逻辑的第 3 方客户端（如 Web 服务）如果需要标准错误代码翻译，可以选择将文本包作为依赖项包含在内。否则他们可以自己处理业务逻辑抛出的错误代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T15:30:01.907

我不太确定您对 WEB UI 的定义是什么。如果您使用 MVC 模式，控制器将负责在 UI 中显示正确的语言版本，而文本本身将位于视图层中。我不明白的是，控制器在您的架构中扮演什么角色。BLL 是指只包含处理逻辑，不包含 UI 和 Services 之间的通信吗？如果是这样，那么 Web UI 层可能会包含本地化逻辑。

我还要说，这很大程度上取决于您在项目中使用的技术。例如，ASP.NET 有一个可以使用的内置本地化模型。我并不是说它应该作为一个例子，即使相反 - ASP.NET 打破了关注点分离。但我认为这是一个问题，在不同的自定义架构模型中会有非常不同的解决方案，就像你的情况一样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-13T20:50:42.483

根据您的应用程序的结构，您可能需要在两个位置进行国际化：

1)**软件本身。** 菜单、对话框、消息、标签、报告等。

2）**内容。**当您的应用程序以一种以上的语言运行时，您的应用程序可能需要处理一种以上语言的内容。

我在分离不同层的管理工具和发布逻辑方面很幸运（到目前为止）。

**First, consider placing the language translation management and generation logic (resource bundles, etc) in the Business Logic.** So, for all your translations, you want a way to quickly sync all data entries as they get added to the system in all languages from a master language (english), and then populate and manage those. So, if you're using resource bundles for example, generate the rb files from a database for all the languages.

**Second, publish the language translations logic at the presentation tier.** It has more to do with presentation and formatting. You inevitably will run into issues with localization for dates, times, currencies, etc that you can handle pretty well here. You may or may not build your own library to publish these things as the confines, or flexibility of your programming language may or may not allow.

If you can give more details I'm sure there are other insights available from everyone here.

Good Luck!

# ipc - 语言/操作系统之间的进程间通信

> ID：773097
> 
> 赞同：4
> 
> 时间：2009-04-21T15:14:17.453
> 
> 标签：ipc

我正在寻找一种可以在相同或不同系统上运行的语言和/或环境之间使用的进程间通信工具。例如，它应该允许在 Java、C# 和/或 C++ 组件之间发送信号，并且它还应该支持某种排队机制。唯一明显与环境和语言无关的工具是文件，但我认为这太慢了——而且有纪律的排队可能难以实现。文献中描述的许多其他工具仅适用于一种语言或一种操作系统。建议将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-21T15:23:01.613

您可能需要查看[ActiveMQ 之](http://activemq.apache.org/)类的东西。在 EAI 模式中，JMS 总线被大量用于集成用几种不同语言编写并在多个系统上运行的多个模块。对我来说，像 ActiveMQ 这样的企业消息总线适合您的需要。如果您正在寻找其他东西，请告诉我。

-沙米克

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2011-08-27T18:33:38.037

在谈论异构架构时，恕我直言，传输层（正如您将“套接字”标记为答案）与协议层（数据序列化等）一样重要。

我发现及时返回的是学习编程库，它统一了不同编程语言、操作系统和架构（大端/低端、16/32/64 位等）之间的数据序列化。

我最喜欢的选择是[Google Protocol Buffers](https://developers.google.com/protocol-buffers/)，内置支持 C++、Python、java 和[第三方插件](http://code.google.com/intl/pl-PL/apis/protocolbuffers/docs/addons.html)，支持[大量编程/脚本语言](http://code.google.com/p/protobuf/wiki/ThirdPartyAddOns)（包括 Lua、Matlab、Ruby、Perl、R、Php、 OCaml、Mercury、Erlang、Go、D、Lisp）和[RPC 实现](http://code.google.com/p/protobuf/wiki/ThirdPartyAddOns)（如[Zeroc ICE](http://zeroc.com/ice.html)）。许多其他产品都支持它们，例如[SWI-Prolog Google Protocol Buffers Library](http://www.swi-prolog.org/pldoc/package/protobufs.html)。

另一种选择是[Thrift](http://thrift.apache.org/)，它也支持多种编程语言。

为了比较，您可能想检查：[Thrift vs Protobuf vs JSON](http://blog.mirthlab.com/2009/06/01/thrift-vs-protocol-bufffers-vs-json/)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-21T15:25:30.967

好吧，您绝对可以考虑使用“套接字”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-21T17:50:21.180

查看[Microsoft Message Queue](http://en.wikipedia.org/wiki/Microsoft_Message_Queue)或类似的东西。也看看[XML-RPC](http://www.xmlrpc.com/)，[SOAP](http://en.wikipedia.org/wiki/SOAP)，[JSON](http://www.json.org/)等。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-21T15:24:07.773

我个人会使用[XML-RPC](http://en.wikipedia.org/wiki/Xmlrpc)。它易于在多个平台上使用，并且完全满足您的所有要求，任何排队都可以通过编程方式处理。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-07T15:59:03.420

我的赌注是 DBus [点对点]——它有更好的流量控制。它运行在 RPC 之上，因此有许多语言绑定。RPC 当然是建立在本地套接字之上的。

# ruby-on-rails - FileTest.exists？ruby on rails 的问题

> ID：773098
> 
> 赞同：3
> 
> 时间：2009-04-21T15:14:42.630
> 
> 标签：ruby-on-rails, ruby, file

我正在尝试检查我的 rails 应用程序中是否存在文件。我正在使用 Windows XP 运行 ruby​​ 1.8.6 和 rails 2.1.2。

那么，问题在于 FileTest.exists 吗？方法似乎不起作用。我已经将代码简化到这一点：

```
if FileTest.exists?("/images/header.jpg")
      render :text => "yes"
else  
      render :text => "no <img src='/images/header.jpg' />"
end 
```

如果我这样做，系统会显示“否”，然后包含正确显示的图像，因为 /images/header.jpg 存在。

我试过 FileTest.exists?、FileTest.exist?、File.exists?、File.exist? 似乎没有任何工作。

我究竟做错了什么 ？谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-04-21T15:36:11.177

我猜这是因为您询问文件“header.jpg”是否存在于系统根目录之外的目录“images”中（在 Windows 上我假设为“c:\”）。尝试将完整路径（从文件系统根目录）放到“/images”目录而不是 URL 路径。

特别是，正如@Brian 所指出的，您应该使用：

```
FileTest.exists?(RAILS_ROOT + "/images/header.jpg") #  < rails 3.0
FileTest.exists?(Rails.root + "/images/header.jpg") # >= rails 3.0 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-21T15:39:44.270

添加`RAILS_ROOT`到您在调用之前检查的文件名是否存在？

# c# - 在 C# 中动态生成委托类型

> ID：773099
> 
> 赞同：5
> 
> 时间：2009-04-21T15:14:56.127
> 
> 标签：c#, delegates, code-generation

我们有一个要求，我们需要动态生成委托类型。我们需要在给定输入参数和输出的情况下生成委托。输入和输出都是简单类型。

例如，我们需要生成

```
int Del(int, int, int, string) 
```

和

```
int Del2(int, int, string, int) 
```

关于如何开始这方面的任何指示都会非常有帮助。

我们需要解析以 xml 表示的公式。

例如，我们将 (a + b) 表示为

```
<ADD>
    <param type="decimal">A</parameter>
    <param type="decimal">B</parameter>
</ADD> 
```

我们现在希望将其公开为`Func<decimal, decimal, decimal>`. 我们当然希望在 xml 中允许嵌套节点，例如：

```
(a + b) + (a - b  * (c - d))) 
```

我们想使用表达式树和`Expression.Compile`.

欢迎就这种方法的可行性提出建议。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-21T15:22:10.023

最简单的方法是使用现有`Func`的代表家族。

使用`typeof(Func<,,,,>).MakeGenericType(...)`. 例如，对于您的`int Del2(int, int, string, int)`类型：

```
using System;

class Test
{
    static void Main()
    {
        Type func = typeof(Func<,,,,>);
        Type generic = func.MakeGenericType
            (typeof(int), typeof(int), typeof(string),
             typeof(int), typeof(int));
        Console.WriteLine(generic);
    }
} 
```

如果您真的*非常*需要创建一个真正的新类型，也许您可​​以提供更多背景信息来帮助我们更好地帮助您。

编辑：正如 Olsin 所说，这些`Func`类型是 .NET 3.5 的一部分——但如果你想在 .NET 2.0 中使用它们，你只需要自己声明它们，如下所示：

```
public delegate TResult Func<TResult>();
public delegate TResult Func<T, TResult>(T arg);
public delegate TResult Func<T1, T2, TResult>(T1 arg1, T2 arg2);
public delegate TResult Func<T1, T2, T3, TResult>
    (T1 arg1, T2 arg2, T3 arg3);
public delegate TResult Func<T1, T2, T3, T4, TResult>
    (T1 arg1, T2 arg2, T3 arg3, T4 arg4); 
```

如果 4 个参数对您来说还不够，您当然可以添加更多。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-04-21T16:21:24.467

如果您正在运行框架 3.5（但并非所有人都如此），乔恩的回答会很好。

2.0 的答案是使用 Delegate.CreateDelegate(...)

[http://msdn.microsoft.com/en-us/library/system.delegate.createdelegate.aspx](http://msdn.microsoft.com/en-us/library/system.delegate.createdelegate.aspx)

在较早的线程中讨论了执行此操作的各种方法的比较，包括 Jon 的 Func、Delegate.CreateDelegate、DynamicMethods 和各种其他技巧：

[Delegate.CreateDelegate vs DynamicMethod vs Expression](https://stackoverflow.com/questions/597819/delegate-createdelegate-vs-dynamicmethod-vs-expression)

-Oisin

# database - 数据库列排序是否有最佳实践？

> ID：773103
> 
> 赞同：5
> 
> 时间：2009-04-21T15:16:20.130
> 
> 标签：database, database-design

设计数据库时是否有列排序的最佳实践？订单会影响性能、空间还是 ORM 层？

我知道[SQL Server - 列顺序重要吗？](https://stackoverflow.com/questions/34818/sql-server-does-column-order-matter). 我正在寻找更一般的建议。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-04-21T15:19:57.547

我不认为列顺序必然会影响性能或空间。为了提高性能，可以在表上创建索引，索引中定义的列的顺序会影响性能。

我已经看到表格的字段按字母顺序排列，以及“按逻辑”排列（以一种对所表示的数据有意义的方式）。总而言之，我可以看到两者都有好处，但我倾向于选择“逻辑上”的方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-08T06:25:11.530

在 Oracle 中，如果您的表有许多 NULLable 列并且您将 NULLable 列放在列表的末尾，则可以显着节省存储空间*。*行末尾的 NULL 值不占用空间。

例如想象这张桌子：`(id NOT NULL, name VARCHAR2(100), surname VARCHAR2(100), blah VARCHAR2(100, date_created DATE NOT NULL)`

该行将`(100, NULL, NULL, NULL, '10-JAN-2000')`需要存储值 100、三个 NULL 的一些空间，然后是日期。

或者，相同的表但具有不同的排序：`(id NOT NULL, date_created DATE NOT NULL, name VARCHAR2(100), surname VARCHAR2(100), blah VARCHAR2(100))`

该行`(100, '10-JAN-2000', NULL, NULL, NULL)`只需要存储值 100 和日期 - 尾随 NULL 被完全省略。

通常这没有什么区别，但对于具有许多可空列的非常大的表，可以节省大量空间 - 使用的空间越少，每个块可以转换为更多的行，这意味着查询表所需的 IO 和 CPU 更少。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-21T15:21:19.387

我认为答案是否定的。

RDBMS 服务器在内部为查询优化了这些东西，所以我怀疑它并不重要。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-21T15:24:43.013

列顺序仅在复合索引中很重要

如果您的索引打开（姓氏，名字）并且您总是搜索姓氏，那么即使您不包含名字，您也可以继续使用

如果您的索引看起来像这样 (Firstname, Lastname) 并且您的 where 子句是

```
where lastname like 'smith%' 
```

那么你必须扫描整个索引

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-04-21T15:19:12.840

我尝试首先坚持最重要的列。通常我总是将我的 ID 列作为任何表中的第一个列。然后通常紧随其后的是重要且经常更新的任何信息，然后是可能会或可能不会经常更新的其余信息。

我不认为它会影响性能，但从开发人员的角度来看，阅读前几列会更频繁地更新比尝试在最后扫描那个字段的洞表更容易。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-21T21:04:52.663

在设计数据库时，我可能会将最重要的列按逻辑顺序放在首位（例如，idfield、firstname、middlename、lastname）。当您从长列列表中查找最需要的列时，确实可以更轻松地查看它们。

但是，我稍后不会重新排列列以支持更合乎逻辑的分组。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-21T15:24:56.943

由于您要求的是实现细节而不是 SQL 标准，因此实际上并没有更一般的建议。

不同的 DBMS 会以不同的方式实现这些东西。

然而，一个聪明的 DBMS 会实现内部结构，这样列排序就不重要了。

因此，我希望我的专栏对人类读者来说是直观的。

# .net - 面向公众的高流量 Silverlight 站点

> ID：773104
> 
> 赞同：4
> 
> 时间：2009-04-21T15:16:29.630
> 
> 标签：.net, silverlight

您知道哪些网站正在使用 Silverlight？此信息将帮助我们决定何时采用 Silverlight 平台。

*这些网站应该是面向公众的并且被认为是高流量的。*（每月至少 300,000 次点击）。

我们是一家 Microsoft 商店，Silverlight 是基于 .NET 的，所以这对我们非常有吸引力。但我的研究只发现了几个使用 Silverlight 的高流量公共网站：NBC 奥运会网站和美国职业棒球大联盟网站（正在迁移到 Flash）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-22T04:08:40.133

以下面向公众的网站使用 Silverlight。我没有任何数据表明它们符合您的“大容量”标准，尽管我确信 NCAA、NBC Olympics 和 Microsoft 下载很容易符合条件。

*   **硬石纪念品**( [http://memorabilia.hardrock.com/](http://memorabilia.hardrock.com/) )
*   **NCAA 疯狂三月**( [http://mmod.ncaa.com/](http://mmod.ncaa.com/) )
*   **NBC 2010 年奥运会**( [http://www.nbcolympics.com](http://www.nbcolympics.com) )
*   **Netflix** ( [http://www.netflix.com](http://www.netflix.com) )
*   **平滑高清**( [http://www.smoothhd.com/](http://www.smoothhd.com/) )
*   **雷诺梅甘娜**( [http://www.new-megane.renault.co.uk](http://www.new-megane.renault.co.uk) )
*   **微软下载中心**( [http://www.microsoft.com/downloads/en/default.aspx](http://www.microsoft.com/downloads/en/default.aspx) )

更多信息，请查看[http://silverlight.net/showcase/](http://silverlight.net/showcase/)上的 Silverlight 展示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-21T15:22:24.780

我相信 netflix 使用 silverlight 作为选项。我不是订阅者，所以无法确认。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T15:22:24.313

我能找到的唯一其他网站是 CBSSports.com，当时他们使用 Silverlight 报道 NCAA 锦标赛。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-21T15:32:13.400

Setanta Sports 推出了一个基于 Silverlight 的互动视频网站。无法判断流量，因为它本周才上线 - 但我希望它会变得相当高

[http://setanta-i.com/](http://setanta-i.com/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-21T15:24:54.120

NBC 将它用于奥运会。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-21T15:20:34.207

美国职业棒球大联盟从 Sliverlight 切换到 Flash 的原因是很多人在工作时看棒球（？！？）。他们在安装 Silverlight 时遇到了麻烦，因为企业环境中的 PC 通常被锁定，用户无法在其上安装软件。但是几乎所有的 PC 都安装了 Flash。这里的文章：

> [http://news.zdnet.com/2100-9595_22-285784.html](http://news.zdnet.com/2100-9595_22-285784.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-30T12:16:15.253

另一个很酷的 Silverlight 网站 www.windows4all.com

# mysql - 使用 MySQL4 配置 XAMPP

> ID：773105
> 
> 赞同：0
> 
> 时间：2009-04-21T15:16:33.470
> 
> 标签：mysql, configuration, xampp

我们可以用 XAMPP 配置 MySQL 4 吗？最新版XAMPP自带MySQL5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-21T15:38:01.950

我刚刚想通了。您可以从 XAMPP 控制面板禁用 MySQL，并单独安装 MySQL4 并将其配置为服务。

# sql - 如何在 sqlite3 上的多个键上创建触发器

> ID：773107
> 
> 赞同：0
> 
> 时间：2009-04-21T15:17:27.273
> 
> 标签：sql, sqlite, triggers

据我所知，在 SQLite 3 中没有直接的外键约束能力。我有一个需要这个的多对多表，所以我正在创建一个触发器，当外键约束是时引发 ABORT违反。我的陈述如下所示：

```
CREATE TRIGGER fkFooBar
  BEFORE INSERT ON Foo_Bar
  FOR EACH ROW BEGIN
    SELECT RAISE (ABORT, 'Insert on Foo_Bar violates foreign key')
    WHERE ((SELECT id as fId FROM FOO WHERE fId = NEW.fooId) IS NULL) || ((SELECT id as bId FROM BAR WHERE bId = NEW.barId) IS NULL);
  END; 
```

但是这只限制了 barId 的存在，而不是 fooId。我对SQL只是模糊熟悉，之前没有处理过触发器，所以我对此有点迷茫。为什么这不起作用？我会以错误的方式解决这个问题吗？这应该更简单吗？（即在一个 SELECT 语句中）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-21T15:29:31.690

接受提示。

触发器通常是个坏主意。您发现了触发器经常出错的另一个原因。

主要原因是触发器将您的编程分成两部分。作为代码的代码——易于查找和维护——以及隐藏在数据库中且更难查找和维护的代码。

如果真的很难做到，那你就用错了工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T02:22:03.790

由于没有其他人真正回答我提出的*问题*：

|| 不是 sqlite 中的二进制 OR。只需使用一个 |

# java - 如何在 Java 中实现基于线程的 UDP 服务器？

> ID：773121
> 
> 赞同：15
> 
> 时间：2009-04-21T15:19:58.967
> 
> 标签：java, multithreading, udp

如何在 Java 中实现基于线程的 UDP 服务器？

基本上我想要的是将多个客户端连接到服务器，并让每个客户端都有自己的线程。唯一的问题是，我不知道如何检查客户端是否正在尝试连接到服务器并为其生成一个新线程。

```
boolean listening = true;

System.out.println("Server started.");

while (listening)
    new ServerThread().start(); 
```

在这种情况下，服务器将产生新线程，直到内存不足。这是 ServerThread 的代码（我想我需要一种机制来暂停 ServerThread 的创建，直到客户端尝试连接。

```
public ServerThread(String name) throws IOException 
{
    super(name);
    socket = new DatagramSocket();
} 
```

所以请Java编程之父帮忙。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-04-22T13:28:10.647

对此的设计在一定程度上取决于每个完整的UDP“对话”是否只需要一个请求和立即响应，是单个请求还是带有重传的响应，或者是否需要处理大量数据包每个客户。

我编写的 RADIUS 服务器具有单一请求 + 重传模型，并为每个传入数据包生成一个线程。

当每一个`DatagramPacket`被接收到时，它被传递给一个新线程，然后该线程负责发回响应。这是因为生成每个响应所涉及的计算和数据库访问可能需要相对较长的时间，并且产生一个线程比使用其他机制来处理在旧数据包仍在处理时到达的新数据包更容易。

```
public class Server implements Runnable {
    public void run() {
        while (true) {
            DatagramPacket packet = socket.receive();
            new Thread(new Responder(socket, packet)).start();
        }
    }
}

public class Responder implements Runnable {

    Socket socket = null;
    DatagramPacket packet = null;

    public Responder(Socket socket, DatagramPacket packet) {
        this.socket = socket;
        this.packet = packet;
    }

    public void run() {
        byte[] data = makeResponse(); // code not shown
        DatagramPacket response = new DatagramPacket(data, data.length,
            packet.getAddress(), packet.getPort());
        socket.send(response);
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-21T15:25:09.923

既然 UDP 是无连接协议，为什么需要为每个连接生成一个新线程？当您收到 UDP 数据包时，您可能应该创建一个新线程来处理收到的消息。

UDP 连接与 TCP 连接不同。它们不会保持活动状态，这就是 UDP 的设计。

下一个代码块的 handlePacket() 方法可以对接收到的数据做任何事情。许多客户端可以将多个数据包发送到同一个 UDP 侦听器。也许它会帮助你。

```
public void run() {
        DatagramSocket wSocket = null;
        DatagramPacket wPacket = null;
        byte[] wBuffer = null;

        try {
            wSocket = new DatagramSocket( listenPort );
            wBuffer = new byte[ 2048 ];
            wPacket = new DatagramPacket( wBuffer, wBuffer.length );
        } catch ( SocketException e ) {
            log.fatal( "Could not open the socket: \n" + e.getMessage() );
            System.exit( 1 );
        }

        while ( isRunning ) {
            try {
                wSocket.receive( wPacket );
                handlePacket( wPacket, wBuffer );
            } catch ( Exception e ) {
                log.error( e.getMessage() );
            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-21T15:29:54.933

你看过[Apache Mina](http://mina.apache.org/)项目吗？我相信即使是其中的一个示例也会带您了解如何使用它设置基于 UDP 的服务器。如果这是一个真正的产品，我不建议你尝试从头开始自己的实现。您将需要使用库来完成此操作，这样您就*不会*在每个连接中使用一个线程，而是使用线程池。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-21T15:44:22.730

我真的看不出有必要。

是学校的事吧？

如果您需要跟踪客户端，您应该拥有每个客户端的本地表示（服务器上的 Client 对象）。它可以处理您需要做的任何特定于客户的事情。

在这种情况下，您需要能够找出消息是从哪个客户端发送的。（使用消息中的信息。）您可以将客户端保存在地图中。

最有效的方法可能是在主线程中进行所有处理，除非需要做的任何事情都可以“阻止”等待外部事件（或者如果某些应该发生的事情可能需要很长时间，而有些事情可能需要很短的时间。 )

```
public class Client {

    public void handleMessage(Message m) {
    // do stuff here.
    }

} 
```

如果需要，客户端对象可能会在 handleMessage() 中启动一个新线程。

您不应该启动多个服务器线程。

服务器线程可以做：

```
while(running) {
  socket.receive(DatagramPacket p);
  client = figureOutClient(p);
  client.handleMessage(p);
} 
```

如果没有特定于客户端的事情需要关心，只需在一个线程中读取消息并在它们到达时对其进行处理。

# c# - 基于解的条件汇编引用

> ID：773123
> 
> 赞同：2
> 
> 时间：2009-04-21T15:20:18.250
> 
> 标签：c#, visual-studio-2008, projects-and-solutions

我有一个相当大的解决方案，由大约 10 个不同的项目组成。到目前为止，我们已将整个解决方案作为一个整体交付给客户，但我们正在考虑交付我们软件的剥离版本。

为此，我想从解决方案中排除几个项目。我知道您可以阻止在解决方案配置管理器中构建项目。使用宏可以在选择剥离配置时禁用所有代码引用。不幸的是，这不涉及项目引用。我可以根据所选配置使这些参考有条件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T15:27:02.227

使用小脚本从项目文件中删除项目引用应该是一件非常简单的事情 - 这只是删除添加这些引用的行的情况。项目文件格式非常简单。

我怀疑这可能是最简单的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T15:25:36.163

您最好的选择是为您的“精简”解决方案创建单独的项目，该解决方案仅引用您想要的其他项目。引用相同的代码。创建一个单独的解决方案来将这些项目结合在一起。

他们也可以一起生活在同一个文件夹结构中。

例如：

*   我的解决方案/我的解决方案.sln
*   MySolution/MyStrippedDownSolution.sln
*   我的解决方案/MyProject1/MyProject1.csproj
*   MySolution/MyProject1/MyStrippedDownProject1.csproj
*   我的解决方案/MyProject1/MyClass1.cs
*   我的解决方案/MyProject2/MyProject2.csproj
*   MySolution/MyProject2/MyStrippedDownProject2.csproj
*   我的解决方案/MyProject2/MyClass2.cs
*   我的解决方案/MyProject2/MyProject3.csproj
*   我的解决方案/MyProject2/MyClass3.cs

    *   MyProject1 和 MyStrippedDownProject1 引用 MyClass1
    *   MyProject2 和 MyStrippedDownProject2 引用 MyClass2
    *   MyProject3 和 MyStrippedDownProject3 引用 MyClass3
*   MySolution 引用 MyProject1 和 MyProject2 和 MyProject3

*   MyStrippedDownSolution 引用 MyStrippedDownProject1 和 MyStrippedDownProject2
*   MyProject1 引用 MyProject2 和 MyProject3
*   MyStrippedDownProject1 仅引用 MyStrippedDownProject2 - 它不引用 - MyProject3

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T15:37:47.023

我认为这应该在您构建生产项目时完成。只需将所有需要消失的代码包含在编译器级 IF 之间，该 IF 检查已定义的编译器指令。如果打开，则 IF 和 ENDIF 之间的代码将无法编译。这仅适用于代码文件。

对于您需要取出的任何其他内容，请按照 Jon Skeet 提到的文件格式自行制作。但是一旦你把它放到构建脚本中，你就不需要再关心它了——没有切换配置等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-11-26T14:56:26.753

[http://bytes.com/topic/net/answers/444853-conditional-assembly-reference](http://bytes.com/topic/net/answers/444853-conditional-assembly-reference)中有很多信息，我发现这些信息对于解决类似问题非常有用（尽管它更多地涉及程序集引用而不是项目引用）。[MSBuild 从 ProjectReference 获取程序集参考](https://stackoverflow.com/questions/1272499/msbuild-get-assembly-reference-from-projectreference/1804087#1804087)可能有助于桥接。

# jquery - 使用 clientSide 数据类型时将数据添加到 jqgrid 子网格

> ID：773128
> 
> 赞同：1
> 
> 时间：2009-04-21T15:20:46.313
> 
> 标签：jquery, jqgrid

当父 jqgrid 的数据类型为 clientSide 类型时，是否可以将数据添加到子网格？

我可以使用以下方法向父 jqgrid 添加一行：

```
jQuery("#myId").addRowData(0, someRowData); 
```

但我不确定如何将数据添加到子网格。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2010-07-27T22:24:37.423

我无法确定如何将数据实际添加到 jqGrid 的子网格中，但我能够将数据添加到另一个网格中的网格中。

我的主网格看起来像：

```
$("#" + tblNm).jqGrid({
                datatype: "local",
                colNames: ['id', 'Last Name', 'First Name', 'Address'],
                colModel: [{
                    name: 'id',
                    index: 'id',
                    width: 75,
                    sortable: false
                }, {
                    name: 'lastNm',
                    index: 'lastNm',
                    width: 90,
                    sortable: false
                }, {
                    name: 'firstNm',
                    index: 'firstNm',
                    width: 100,
                    sortable: false
                }, {
                    name: 'address',
                    index: 'address',
                    width: 200,
                    align: "left",
                    sortable: false
                }],
                width: "100%",
                height: "100%",
                caption: "Clients",
                jsonReader: {
                    root: "clients",
                    page: "currpage",
                    total: "totalpages",
                    records: "totalrecords",
                    repeatitems: false,
                    id: "id"
                },
                subGrid: true,
                subGridRowExpanded: function(subgrid_id, row_id){
                    console.debug("SubGrid_ID:  " + subgrid_id +
                    "   / row_id:  " +
                    row_id);
                    var subgrid_table_id, pager_id;
                    subgrid_table_id = "mySubGridName" + row_id;
                    pager_id = "p_" + subgrid_table_id;
                    $("#" + subgrid_id).html("<table id='" + subgrid_table_id + "'></table>");
                    jQuery("#" + subgrid_table_id).jqGrid({
                        datatype: "local",
                        colNames: ['Order Id', 'Item Name', 'Cost'],
                        colModel: [{
                            name: "ordId",
                            index: "ordId",
                            width: 20,
                            key: true
                        }, {
                            name: "itemName",
                            index: "itemName",
                            width: 130
                        }, {
                            name: "cost",
                            index: "cost",
                            width: 200,
                            align: "left"
                        }],
                        rowNum: 20,
                        caption: "Orders",
                        height: '100%',
                        width: '100%',
                        jsonReader: {
                            root: "orders",
                            page: "currpage",
                            total: "totalpages",
                            records: "totalrecords",
                            repeatitems: false,
                            id: "num"
                        }
                    });
                }
            }); 
```

我通过执行以下操作加载主网格：

```
$("#" + tblNm)[0].addJSONData(wrapper); 
```

然后，当我获得子网格数据时，我会执行以下操作：

```
 // click on the subgrid so that the table is added to the DOM
 // I think there are better ways of doing this... you'll want to look @ the jqGrid documentation
 $("#" + masterTblId + " tr[id='1'] td[role='grid'] a span").click();
 // add the data to the subgrid
 $("#" + subGridId)[0].addJSONData(wrapper); 
```

最重要的部分是在 jqGrid 的 subgridexpanded 属性中定义代码，然后能够强制子网格显示。

此方法的唯一问题是，如果用户单击子网格区域，则它会被切换，并且当他们再次单击它时，它不会正确显示。我已经向社区询问了如何解决这个问题：

[子网格缓存或停止子网格数据被删除 (jqGrid)](https://stackoverflow.com/questions/3348510/subgrid-caching-or-stopping-subgrid-data-from-being-removed-jqgrid)

# vim - 在“vi”中的选择范围内查找和替换

> ID：773137
> 
> 赞同：84
> 
> 时间：2009-04-21T15:22:32.440
> 
> 标签：vim, editor, vi, replace

如何在 中的选择范围内进行查找和替换`vi`？

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2009-04-21T15:25:50.123

在可视模式下选择文本（我假设这就是你正在做的事情），然后按下`:`开始输入命令，你会在命令行中看到类似这样的内容：

```
:'<,'> 
```

这意味着该命令将应用于选择。然后输入`s/search/replace/`并回车。`g`（如果要替换所有匹配项，则在第三个斜线后添加 a ，`c`如果要对每个替换进行确认，请添加 a）

* * *

## 回答 #2

> 赞同：98
> 
> 时间：2009-07-09T14:09:54.430

此处建议的大多数其他解决方案都适用于进行选择的整行，这可能不是您想要的。

要仅在选择中搜索和替换，首先直观地选择文本，然后使用如下命令：

```
:%s/\%VSEARCH/REPLACE/g 
```

这将仅在视觉选择的部分中进行搜索和替换，将 SEARCH 替换为 REPLACE。如果您选择了多行，这也适用于多行。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2009-04-21T15:25:35.553

如果您使用可视模式进行选择，则：

```
:'<,'>s/regex/replacement/options 
```

如果您从可视模式`'<,'>`进入命令行模式（按）， VIM 将自动放置范围 ( )。`':'`

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-04-21T15:23:38.163

此处提供更多帮助 在[视觉选择中搜索和替换](http://vim.wikia.com/wiki/Search_and_replace_in_a_visual_selection)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-11-26T07:53:45.140

The range of Ex commands are specified line-wise (see `*cmdline-ranges*`), and when `:` is pressed while there is a visual selection, the line range is automatically specified on the command line as `'<,'>` (see `*v_:*`), which makes the `:s[ubstitute]` command operate on the whole lines unless the visual selection boundaries are specified in the search pattern with `\%V` (see `*/\%V*`), e.g. `/\%Vvi\%Vm` matches "vim" only within the visual selection, where the end of the selection is specified right before the end of the search pattern since each `\%V` specifies the next character as the start or end of the visual selection, and thus `/\%Vvim\%V` would require the visual selection to continue after 'm' to match "vim". Note that using the second `\%V` in a search pattern isn't necessary unless a match is required to be right at the border of or only partly in the visual selection.

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2009-04-21T15:28:20.087

如果您想对文件中的所有实例进行*全局*搜索和替换（使用可选的正则表达式），我会执行以下操作：

```
:%s/foo/bar/g 
```

省略 g 进行本地替换。

# asp.net - 是否可以在编译之前将 ASP.NET 页面验证为有效的 HTML

> ID：773144
> 
> 赞同：0
> 
> 时间：2009-04-21T15:23:35.527
> 
> 标签：asp.net, html, standards

根据我的问题[，](https://stackoverflow.com/questions/773070/are-there-any-standalone-html-markup-validation-tools)我运行了建议的整洁程序，该程序返回了有关该工具无法识别 ASP 标签的大量错误。工具是否可以在通过浏览器编译/交付之前验证 ASP.NET 页面？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-21T15:36:25.807

如果您使用的是 VS，那么您的页面会在您键入它们时被评估，不匹配的标签等会被突出显示。除了确保您已正确输入 HTML 之外，我不确定您要解决什么问题。

我对这种类型的任何问题的处理方法是从源头解决它，而不是中途修补。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T15:25:34.367

您可以通过覆盖适当的渲染方法来执行自己的验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-14T13:00:21.983

您可以使用 HttpModule 验证呈现的 ASP.NET（以及 IIS7 甚至是静态的）页面。完整的示例检查：[XHTML Validator For All](http://www.thejoyofcode.com/XHTML_Validator_For_All.aspx)。

如果您记录验证错误，您可以稍后直接解决它们（在源代码级别）。

# d - D标准库的现状如何？

> ID：773155
> 
> 赞同：9
> 
> 时间：2009-04-21T15:25:34.680
> 
> 标签：d, standard-library, tango, phobos

其中有两个，Phobos 和 Tango。据我所知，它们是多余且不兼容的。有加入他们的计划吗？如果是这样，什么时候会发生？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-04-21T16:11:40.077

已为 D2 构建了一个称为 druntime 的通用核心。低级运行时的东西，比如垃圾收集和线程，以前是 Phobos 和 Tango 在同一个项目中互操作的障碍。Phobos 的高级功能依赖于 Phobos 运行时，同样适用于 Tango。

Phobos 的重大更新已经发布（事实上就在昨天（4/20/09）。本次更新尝试利用 D2 的一些新功能并引入范围的概念，这些概念类似于迭代器，但更易于使用且功能更强大。D2 Phobos 与其动力不足的 D1 对应物非常不同。

Tango 是迄今为止更好的 D1 标准库。D2 端口正在进行中，并且当 D2 稳定时可能会进展得更快。一个大问题是 Tango 开发人员是否会对其进行更新以充分利用 D2 的功能，或者他们是否会仅仅专注于使其与 D2 一起工作，就像与 D1 一样。

对比这两个库，Phobos 倾向于更多地关注使简单的事情变得简单、语法糖、便利性和推动标准库中可以完成的事情的信封。它是 STL 和 Python 标准库之间的交叉点，听起来很奇怪。Tango 倾向于有更多类似 Java 的感觉。它更专注于功能的广度和优雅地处理不寻常的用例。它更多地停留在 D 的健全子集中（没有那么多模板元编程等，尽管可以说 D 的一个主要特征是将模板元编程提升到健全的子集状态），并采用更实用的 API 设计方法。

我自己的猜测（推测，但很有意义）是 Phobos 将变得类似于 STL，即一个真正的核心功能标准库，而 Tango 将成为一个实用程序库，有点像 Boost，作为其核心功能被吸收到 Phobos 和/或运行时。

最后，正如其他人所指出的，D1 应该是稳定的，所以这里没有任何变化。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-21T15:29:10.490

看起来截至 10 月他们[正在向兼容性迈进](http://www.billbaxter.com/techblog/?p=19)，但我不知道从那以后发生了什么......

编辑：

我还发现[了这个](http://www.prowiki.org/wiki4d/wiki.cgi?StandardLib)，这似乎表明没有实际合并的计划：

> D1 的情况不会有任何变化。然而，从 2.020 版开始，D2 已将 Phobos 拆分为 2 个库，druntime.lib 和 phobos.lib。这是为了允许在 Phobos 和 Tango 中使用一个通用的运行时。虽然没有计划合并这两个库，甚至没有将 Tango 包含在 DMD 版本中，但这将允许在没有兼容层的情况下同时使用这两个库。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-21T15:30:57.740

[Tangobos](http://www.dsource.org/projects/tangobos/)是一种使两者兼容的努力。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-04-21T15:51:46.223

在 2.0 中，Tango 将能够作为共享核心之上的实用程序库。共享核心已经到位，但是 Tango 项目还没有 2.0 支持。

在 1.0 中，不会有任何变化。这是因为 1.0 规范被有效地冻结以允许开发一个稳定的目标。

# google-maps - Google Maps API - 查找导致错误的航点

> ID：773162
> 
> 赞同：2
> 
> 时间：2009-04-21T15:26:35.567
> 
> 标签：google-maps, error-handling

我们一直在开发一个与 Google Maps API 配合使用的 ASP.NET 应用程序，以协助我们地区的一家小型航运公司进行物流和规划。其中一个功能是公司输入客户列表，系统会将所有客户地址打包为一系列航路点，发送给谷歌，并取回路线的方向信息。

我们一直遇到的一个问题是，我们数据库中的许多地址都不是很好，而且经常无法被谷歌地图处理。当我们这样做时，我们会收到一个错误代码，但我希望能够确定哪个航点是失败的（这样客户就可以去修复数据库中的地址）。

**编辑**这是处理初始化和当前错误处理的代码块：

```
function initialize() {
          if (GBrowserIsCompatible()) {      
            map = new GMap2(document.getElementById("map"));
            map.addControl(new GSmallMapControl());
            gdir = new GDirections(map);
            GEvent.addListener(gdir, "load", onGDirectionsLoad);
            GEvent.addListener(gdir, "error", handleErrors);

            if (document.getElementById("<%=hiddenWayPoints.ClientID %>").getAttribute("value") != '')
            {
                setDirections();
            }

          }
        }

        function setDirections() {
            var waypoints = new Array();
            var str = document.getElementById("<%=hiddenWayPoints.ClientID%>").getAttribute("value");

            waypoints = document.getElementById("<%=hiddenWayPoints.ClientID %>").getAttribute("value").split(":");

            gdir.loadFromWaypoints(waypoints, {getSteps:true});

        }

        function handleErrors(){
           if (gdir.getStatus().code == G_GEO_UNKNOWN_ADDRESS)
             alert("No corresponding geographic location could be found for one of the specified addresses. This may be due to the fact that the address is relatively new, or it may be incorrect.\nError code: " + gdir.getStatus().code);
           else if (gdir.getStatus().code == G_GEO_SERVER_ERROR)
             alert("A geocoding or directions request could not be successfully processed, yet the exact reason for the failure is not known.\n Error code: " + gdir.getStatus().code);

           else if (gdir.getStatus().code == G_GEO_MISSING_QUERY)
             alert("The HTTP q parameter was either missing or had no value. For geocoder requests, this means that an empty address was specified as input. For directions requests, this means that no query was specified in the input.\n Error code: " + gdir.getStatus().code);

           else if (gdir.getStatus().code == G_GEO_BAD_KEY)
             alert("The given key is either invalid or does not match the domain for which it was given. \n Error code: " + gdir.getStatus().code);

           else if (gdir.getStatus().code == G_GEO_BAD_REQUEST)
             alert("A directions request could not be successfully parsed.\n Error code: " + gdir.getStatus().code);

           else alert("An unknown error occurred.");

        } 
```

问题是 GDirections 对象中的 LoadFromWayPoints() 方法似乎不是基于每个单独的航点返回状态，而是仅从整个列表返回状态（如果一个失败，则全部失败）。

我能想到的唯一真正的解决方案（不在系统的其他区域执行检查）是在单独的请求中将每个航点发送到谷歌地图，并在发送 GDirections 对象的整个航点列表之前检查它的有效性，但这似乎非常低效（尤其是在处理大量客户位置时）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-22T04:42:51.957

如果您使用 GClientGeocoder 对象来执行您的请求，那么您将为每个 getLocations 调用返回一个适当的响应代码：'

```
function logAddress (response)
{
    if (!response || response.Status.code != 200) 
    {
        // log the response.name and the response.Status.code
        return;
    } 

    // otherwise everything was fine
}

for (var i = 0; i < addresses.length; i++)
{
    var geocoder = new GClientGeocoder ();
    geocoder.getLocations (addresses[i], logAddress);
} 
```

它们是[各种响应代码](http://code.google.com/apis/maps/documentation/reference.html#GGeoStatusCode)，但我猜您想在收到 602 - 未知地址时通知用户。

编辑：

是的，对于整个路线请求，您只会收到一个 loadFromWaypoints 的错误回调。您所做的不仅仅是一个简单的地理编码请求，您实际上是在为一系列地址值生成方向并将叠加层渲染到地图上。我建议几个解决方案：

*   您可以在 loadFromWaypoints 请求之前执行 getLocation 请求（如您建议的那样），然后使用为每个地址返回的纬度、经度数据作为 loadFromWayPoints 的参数。这将地理编码处理从 loadFromWayPoints 请求中分离出来，但为每个地理编码查找添加了额外的往返行程。当用户第一次输入地址时，这真的是你只想做一次的事情（见下）。
*   当用户第一次输入地址信息时，您可以在当时进行 GClientGeocoder getLocations 查找并获取纬度，经度以与地址一起存储在您的数据库中。这样，如果用户输入的地址无法进行地理编码，那么您可以要求他们重新输入地址，或者让他们在谷歌地图上选择位置（并从中获取纬度、经度）。这并不能解决您现在拥有的地址数据的问题，但也许您可以编写一些代码来运行现有数据（离线）并标记数据库中无法进行地理编码的地址。

# vb.net - 为什么 VS2005/VB.NET 使用 Dispose(disposing as boolean) 重载实现 IDisposable 接口？

> ID：773165
> 
> 赞同：2
> 
> 时间：2009-04-21T15:26:54.303
> 
> 标签：vb.net, design-patterns, visual-studio-2005, idisposable

最近，我需要将 IDisposable 和对象终结的建议模式与 VS2005/VB.NET 提供的自动生成模式进行比较。我们已经使用了自动生成的一个，但是在并排查看它之后，我对 VB.NET 实现有很多疑问......

作为参考，这里是 IDE 的实现：

```
Public Class Class1
    Implements IDisposable

    Private disposedValue As Boolean = False        ''// To detect redundant calls

    ''// IDisposable
    Protected Overridable Sub Dispose(ByVal disposing As Boolean)
        If Not Me.disposedValue Then
            If disposing Then
                ''// TODO: free managed resources when explicitly called
            End If

            ''// TODO: free shared unmanaged resources
        End If
        Me.disposedValue = True
    End Sub

#Region " IDisposable Support "
    ''// This code added by Visual Basic to correctly implement the disposable pattern.
    Public Sub Dispose() Implements IDisposable.Dispose
        ''// Do not change this code.  Put cleanup code in Dispose(ByVal disposing As Boolean) above.
        Dispose(True)
        GC.SuppressFinalize(Me)
    End Sub
#End Region

End Class 
```

问题：

1.  如果在 GC 期间调用 Finalize() 而没有首先显式调用 object.Dispose() 则 disposing:=false 并且“if disposing...”中的代码将永远不会执行以释放托管资源 - 导致它们保留在内存中直到下一次GC通过。为什么不明确释放这些？这样做不会在第一次 GC 传递时释放更多内存，并且不会在下一次传递之前将不需要的对象留在内存中吗？
2.  为什么在 IDisposable 类上覆盖 Finalize() 时 IDE 不生成 Dispose(false) 调用？
3.  GC 如何知道调用 Dispose(false) 并确保它是 IDE 的实现，而不是以不同方式使用 bool 参数的自定义实现？* ...如果 GC 测试它的存在并以假定某个实现的方式使用它（object.Dispose(disposing:=false)），那么 Dispose(disposing as bool) 不应该是接口成员吗？* 在两者都存在的情况下`Dispose()`，`Dispose(disposing as boolean)`为什么 GC 会选择调用重载的非接口成员？

总体而言，我对具有在显式调用时执行的扩展代码路径的假定附加值感到困惑`Dispose()`（与具有无论是否`Dispose()`显式调用都执行的公共路径相反）。虽然我可以理解它是出于善意提供的，但如果`Dispose()`不直接调用它，除了延迟托管资源的实际释放之外，我看不到它是如何做的。从本质上讲，它似乎只能使对象图中的托管资源无法访问，将它们孤立起来直到第二次 GC 运行，而不是在已知不再需要它们的时候释放它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-21T15:33:55.173

你的问题有一个逻辑错误......如果`Dispose()`在终结器中调用，那么是的，`disposedValue`将是错误的，这意味着`If Not Me.disposedValue Then...`它将执行。传递的参数`disposing`是`true`，因此其中的所有代码都应该可以正常执行。

**编辑** （结果是终结器调用 Dispose(false)）

表单上的终结器（仅在从未在表单上调用时才运行`Dispose()`）调用`Dispose(false)`. 原因`Form`是当前正在被 GC 处理。因此，MANAGED 资源（即 上的组件`Form`）将被收集，并且如果需要，它们自己的终结器应该调用`Dispose()`。只有非托管资源应该在`Dispose(false)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-09-24T21:14:13.993

> “如果处置...”将永远不会执行以释放托管资源 - 导致它们保留在内存中直到下一次 GC 通过。为什么不明确释放这些？

“如果处置”将不会运行，但托管资源将在此 GC 过程中被释放（如果它们实际上有资格释放）。到您的对象最终确定时，任何其他活动对象都无法访问它，因此任何子对象都不会不符合收集条件，因为您的对象仍然引用它们。

> 为什么在 IDisposable 类上覆盖 Finalize() 时 IDE 不生成 Dispose(false) 调用？

在为 Finalizer 创建覆盖存根时，他们可能只是没有添加特殊情况来检查 Dispose。顺便说一句，IDE 不会自动生成终结器，因为大多数类不需要终结器。唯一应该拥有终结器的情况是您直接拥有非托管资源。Dispose(false) 路径仍然可以由拥有非托管资源的派生类调用，因此需要终结器。派生终结器的可能性也是对 GC.SuprressFinalize 的调用应该始终存在于基本 Dispose() 方法中的原因。

> GC 如何知道调用 Dispose(false) 并确保它是 IDE 的实现，而不是以不同方式使用 bool 参数的自定义实现？

它没有。GC 知道 Finalize，并且只知道 Finalize。Disposable 是*程序员*而不是*垃圾收集器*的模式。这就是为什么模式要求您编写一个自己调用 Dispose(false) 的终结器。

有两条路径的原因是可以通过两种方式调用 Dispose 方法。常见的经验是显式调用，此时托管对象都存在，真正的路径会处理掉它们，释放所有非托管资源。调用终结器时将使用错误路径，此时您不能假设您的任何字段尚未调用自己的终结器。拆分路径对对象图或何时收集包含的对象没有影响。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-01-16T22:51:57.670

当预期许多类将包装托管和非托管资源并且派生类可能将非托管资源添加到类时，创建了该模式。从那时起，Microsoft 认识到将非托管资源包装在自己的类中比将它们与其他类组合更好，并编写了 SafeHandle 类来促进这一点。使用 IDisposable 模式可能有一些很好的理由，其中不可覆盖的方法调用可覆盖的方法（例如，外层可以使用 Interlocked.Exchange 来确保仅调用一次 Dispose）。不幸的是，.net 中没有一种干净的方法可以同时覆盖和隐藏方法。否则，理想的模式是让每个 IDisposable 类公开一个新的受保护的可覆盖方法，该方法将覆盖其超类'

```
Blah1 类
    子处置（）
        尝试
            处置1()
        最后

        结束尝试
        ' Blah1 清理这里
    结束子
    受保护的可覆盖子 Dispose1()
        ' 子级代码将覆盖这个
    结束子
结束类
Blah2 类
    继承 Blah1
    受保护的 NotOverridable 覆盖 Sub Dispose1()
        尝试
            处置1()
        最后

        结束尝试
        ' 在这里清理 Blah2
    结束子
    受保护的可覆盖子 Dispose2()
        ' 子级代码将覆盖这个
    结束子
结束类

```

如果不必为每个级别的处理例程指定一个新名称，则该模式会更简洁。请注意，与传统的 Dispose 模式不同，此模式将确保派生类的 Dispose 方法中引发的异常（或子类的 Dispose 方法调用其父类的失败）不会阻止父类被释放。

# rhino-mocks - 我可以在 Rhino Mocks 中获取期望中使用的参数吗？

> ID：773169
> 
> 赞同：4
> 
> 时间：2009-04-21T15:27:43.537
> 
> 标签：rhino-mocks

我正在为调用构建和执行查询的方法设置期望。我想询问所用参数的属性。这可能吗

```
using (mocks.Record())
{
    Expect.Call(connection.Retrieve(SOMETHING_HERE)).Return(returnedDatay);
} 
```

我追求的是“这里的东西”位。

（这是我第一次使用 Rhino 模拟）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-21T15:44:51.763

您可以对参数和参数的属性设置约束。以下代码对连接对象上名为 MyProperty 的属性设置约束。模拟期望 MyProperty 为 42。请注意，null 作为参数传递，因为它被忽略了。

```
Expect
    .Call(connection.Retrieve(null))
    .IgnoreArguments()
    .Constraints(Property.Value("MyProperty", 42))
    .Return(returnedData); 
```

我是凭记忆写的，所以它可能不是绝对正确的。

* * *

更新：

Rhino Mocks 3.5 版本引入了一个新的扩展方法 GetArgumentsForCallsMadeOn，它可以让您检查传递给模拟对象的参数：

[http://kashfarooq.wordpress.com/2009/01/10/rhino-mocks-and-getargumentsforcallsmadeon/](http://kashfarooq.wordpress.com/2009/01/10/rhino-mocks-and-getargumentsforcallsmadeon/)

# c# - 跨静态类共享数据库连接的正确设计？

> ID：773173
> 
> 赞同：1
> 
> 时间：2009-04-21T15:28:21.537
> 
> 标签：c#, database, connection-pooling

我有带有许多静态实用程序类的 ac# dll。他们都需要数据库访问，目前每个类都有自己的连接。这变得很麻烦，我想要一个连接的“提供者”，所以一个类可以做类似 ConnProvider.Query(...) 的事情，其中​​ ConnProvider 是一个所有实用程序类都可以访问的静态类。我想 ConnProvider 必须管理某种连接池，但我不完全确定这是否是实现此功能的正确方法，如果是，内部结构会如何。我在正确的轨道上吗？这不是基于网络的，线程安全不是必需的（但对未来来说会很好），并且只有少数应用程序/机器将使用这个 dll，如果这有助于简化它的话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T15:31:08.630

您不应该编写自己的连接池。该框架的一个已经足够好了。

您编写的任何连接提供程序实用程序实际上应该只是使用您拥有的任何配置信息来创建连接。本质上它只会封装查询字符串。

每当您进行查询时，调用提供程序以创建连接、完成工作并关闭连接。让框架处理池化物理连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T15:30:41.080

在您的情况下，是否有可能让所有辅助类从具有连接的 ConnectionBase 子类化？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T15:30:47.350

让您的“ConnProvider”为每个查询创建新连接，并让 ADO.NET 和您的 RDBMS 管理连接池。它们已经设置好并进行了优化，可以代表您这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-21T15:31:53.073

不要尝试自己处理连接池。.NET 肯定比以往任何时候都更擅长。您可以将其作为连接的某种单例模式 db-class 来解决。

# sql - 将记录永久标记为只读的最佳方法是什么？

> ID：773177
> 
> 赞同：2
> 
> 时间：2009-04-21T15:29:38.413
> 
> 标签：sql, sql-server, ms-access, vba

我有一个连接到 SQL Server 2000 框的 Access 2003 应用程序。

我有一张表，我需要在其中锁定一条记录以及不同表中的所有相关记录。“锁定”是指将它们标记为只读，这样除非管理员解锁它们，否则任何客户都无法编辑这些记录。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-21T15:51:34.757

很可能在数据库级别没有“优雅”的方式来做到这一点。但是你可以做几条路线。

1.  向每个表添加一个“锁定”位字段，并在“锁定”父级时将该值级联。
2.  结合 #1 添加更新和删除触发器，如果​​设置了标志，您可以取消更新或删除。

这是我能想到的在数据库级别执行它的唯一真正简单的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T15:54:57.277

假设您的数据在 SQL Server 中，如果可能，我会首先使用 SQL Server 安全性。我们通常不允许对表进行任何访问，然后通过 SP 对其进行控制。SP 可以有更复杂的逻辑来确定是否应该执行特定操作。

如果这不是一个选项，您始终可以使用触发器，检查行并以这种方式拒绝更新或删除。

有很多方法可以剥这只猫的皮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T16:17:51.230

只是另一种选择：

*   将 last_updated 列添加到您的表中，该列由更新触发器更新
*   创建一个表 Locked_Widgets （或其他），它只是基表的 PK 和 last_updated 列，整组列构成 Locked_Widgets 中的 PK
*   将基表中的非级联外键放入 Locked_Widgets

如果有人尝试更新行，触发器将尝试更新 last_updated 列，并且外键约束将导致更新失败。

# accessibility - Is accessibility part of the development process of your company?

> ID：773181
> 
> 赞同：1
> 
> 时间：2009-04-21T15:30:19.787
> 
> 标签：accessibility

Accessibility, making content and applications accessible to people with special needs (blind, deaf, and people with cognitive impairments) is, to my mind, an important issue. Section 508 is a by-law in the USA that attempts to make sure that applications and content from government (at least) is accessible for all, irrespective of community. Is this topic one that comes up at all in your work? Who should be responsible for it?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T15:36:44.310

When I worked at larger companies, every spec had a section on accessibility. Every aspect of a feature was required to have a keyboard shortcut listed in the spec, and every UI element was required to have its accessibility role and text listed in the spec. Test would then files bugs against features that were implemented without accessibility. This was true in native code, managed code and websites.

Everyone on the engineering team, from PM to Dev to Test is responsible for it.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T15:35:57.930

It comes up all over the place for us. We'll just say that a certain client requires it. For us the responsibility is between the developers and the business analysts, but we don't have the most efficient SDLC process. Generally, the BAs put it in the requirements document and the Devs go through it and see if it is possible to accommodate all the requests. The testers are then responsible for making sure that it complies with the requirements document. We do have outside consultants who specifically in things being 508 compliant that look at the applications to make sure they do. Really it's everyone's responsibility on the project, because it is so important. When dealing with the government a lot of revenue is at stake and making a mistake like that can cost you in the long run.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T16:56:20.157

I'm a totally blind individual who uses a screen reader. At the fairly large company I work at accessibility isn't mentioned accept when I grumble because I'm unable to use one of our products. Most of the company’s products are more or less accessible do to the technologies used, and if the product deals with charting or presenting graphical information screen reader accessibility becomes less of an issue. I believe the main reason it isn't part of the development process is because no customers have complained. Part of the reason customers may not complain is because the company produces tools for developers and if a blind developer can't use a specific tool there much more likely to find a way around the issue to accomplish the same task then a blind individual in accounting who can't use SAP software which runs an entire department. Note the preceding statement is completely anecdotal and my opinion with no evidence to back it up.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-06-17T15:50:57.270

Every time I'm asked to perform an audit on a site's accessibility maturity, the number one flaw is that the software isn't designed with accessibility in mind. Designers and developers many times have a thin understanding of accessibility. The believe they have thought of accessibility when in fact they haven't.

Many times solutions are inserted long after the product has been released. This results in the software being more difficult to make accessible. In addition, the level of accessibility cannot reach that of a software system that began with accessibility in mind. In the long term, it costs more money and has poorer results to 'force' accessibility into a product late in the life-cycle.

As far as the responsibility, it is the responsibility of the company to create an accessibility policy and then ensure it is correctly implemented. It needs to come from the top down or else it won't be a true consideration. The designers, developers testers and their managers all need to do their part to make certain the company's accessibility policy is living up to expectations. Marketing and public relations can benefit by talking about the accessibility of the software as an attribute of corporate responsibility the company is living up to.

# javascript - 从名称中获取 JavaScript 函数对象作为字符串？

> ID：773184
> 
> 赞同：57
> 
> 时间：2009-04-21T15:30:52.437
> 
> 标签：javascript

在 JavaScript 中，如果我在变量中有一个字符串，有没有办法获得对具有该匹配名称的函数对象的引用？请注意，我可以使用 jQuery，因此我也可以使用它的任何辅助方法。

例如：

```
myFunction = function(){};

var func_name = "myFunction";
var myFunctionPtr = ???  //how to get the function from the name 
```

谢谢

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2009-04-21T15:32:53.413

如果你知道它是一个全局函数，你可以使用：

```
var functPtr = window[func_name];
//functPtr() 
```

否则将*window*替换为包含该函数的父对象。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2009-04-21T15:37:56.663

我刚刚在 Firebug 中做了一个快速测试，我能够通过简单地输入名称来从名称中获取函数`eval()`......我觉得使用 很脏`eval()`，但它似乎很好地完成了这里的工作。

```
var myFunctionPtr = eval(func_name); 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-06-27T23:49:02.727

这绝不是首选方法。除了将函数名保留在 中`func_name`，您还可以成功地保留对函数的引用，例如`func_to_call`.

如果您绝对需要将函数引用保留为字符串，您通常会使用哈希表将任意名称映射到变量（JS 具有使其成为可能的一流函数）

```
myFunction = function(){};   
var obj = {func_name: myFunction};

obj['func_name']();//executes the function 
```

[摆弄](http://jsfiddle.net/ovfiddle/S3RqT/)（我不知道为什么，这是一个如此小的脚本:)

建议您使用`eval(func_name)`- 但是由于 JS 作用域，这可能会很快失控。

您还声明了您`myFunction = function(){};`的全局变量。一方面，它可以让您引用它，`window[func_name]`但另一方面它会污染全局范围。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2009-04-21T15:32:57.237

this[func_name] 应该给你这个功能。

```
var myfunc = this[func_name];
myfunc(); 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2015-11-09T14:35:37.263

这取决于函数在*哪里*以及*如何*声明（或不声明）。

如果它是*全局*的并且没有通过`let name = ...`或`const name = ...`语法声明（并且它不是用 声明的类构造函数`class`），您可以通过将其作为全局对象上的属性查找来进行检查。（这些警告都是 ES2015 的事情；更多内容如下。）您可以通过`this`在全局范围内以松散模式获取对全局对象的引用；浏览器还为您提供了一个名为`window`. 所以假设一个浏览器：

```
if (typeof window[func_name] === "function") {
    // ....
} 
```

如果它可能*不是*全局的，而只是在范围内，因为您的代码关闭了它，或者如果它是使用我提到的那些 ES2015 机制之一创建的，那么除了以下之外真的没有什么好的检查方法`eval`：

```
if (eval("typeof " + func_name) === "function") {
    // ....
} 
```

使用`eval`是最后的手段，您**只能**在严格控制的输入下使用它。但是当你必须这样做并且你有严格控制的输入时，这很好。

* * *

关于 ES2015 警告：

新`let`的`const`、 和`class`是非常有趣的小动物：在全局范围内使用时，它们会创建全局变量，但*不会*在全局对象上创建属性。从 ES2015 开始，虽然全局对象的所有属性都是全局对象，但并非所有全局对象都是全局对象的属性。这是试图控制严重污染的全局命名空间并为 JavaScript 绑定模型带来更高安全性的全部内容。（现在我们有了真正的模块。）

所以（请注意，这只会在尖端浏览器中运行）：

```
// Global scope, in a browser (because I used `window` and `document.body`) that
// implements this aspect of ES2015 (as I write this, Firefox's SpiderMonkey
// doesn't, Chrome's V8 does on the latest Chrome; expect SpiderMonkey and IE
// to catch up pretty quick (didn't test IE Edge, maybe it's already there)

// Strict mode isn't required for this behavior, but for the moment V8 only
// supports the block-scoped constructs in strict mode.
"use strict";
let tbody = setup();

// Old-fashioned var: Creates a property on the global object, so
// we get "function, function"
var f1 = function() { /*...*/ };
result("var declaration", typeof f1, typeof window["f1"]);

// Function declaration: Creates a property on the global object, so
// "function, function"
function f2() {}
result("function declaration", typeof f2, typeof window["f2"]);

// `let` declaration: Doesn't create property on global object, so
// "function, undefined"
let f3 = function() { /*...*/ };
result("let declaration", typeof f3, typeof window["f3"]);

// `const` declaration: Doesn't create property on global object, so
// "function, undefined"
const f4 = function() { /*...*/ };
result("const declaration", typeof f4, typeof window["f4"]);

// `class` declaration: Doesn't create property on global object, so
// "function, undefined"
class C1 {}
result("class declaration", typeof C1, typeof window["C1"]);

function setup() {
  document.body.insertAdjacentHTML(
    "beforeend",
    "<table>" +
    "<thead>" +
    "<tr><th>test</th><th>global</th><th>prop</th></tr>" +
    "</thead>" +
    "<tbody></tbody>" +
    "</table>"
  );
  return document.body.querySelector("tbody");
}

function result(label, direct, win) {
  tbody.insertAdjacentHTML(
    "beforeend",
    "<tr><td>" + [label, direct, win].join("</td><td>") + "</td></tr>"
  );
}
```

```
body {
  font-family: sans-serif;
}
table {
  border-collapse: collapse;
}
th, td {
  border: 1px solid #ddd;
  padding: 4px 8px;
}
```

在尖端浏览器上的输出：

```
+------------+------------+------------+
|         测试         |   全球   |   道具    |
+------------+------------+------------+
| 变量声明 | 功能 | 功能 |
| 函数声明 | 功能 | 功能 |
| 让声明 | 功能 | 未定义 |
| 常量声明 | 功能 | 未定义 |
| 类声明 | 功能 | 未定义 |
+------------+------------+------------+

```

注意：一些转译器并没有严格执行这一点，所以如果您在转译代码中看到不同的结果，请不要感到惊讶。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-04-28T19:58:15.903

一种安全的方法是在测试其类型时对所谓的函数进行沙箱处理：

```
function isFunction(expr) {
    function sandboxTemplate() {
        var window, document, alert; // etc.

        try {
            return typeof $expr$ == "function";
        } catch (e) {
            return false;
        }
    }

    try {
        var sandbox = new Function(
            sandboxTemplate.toString().replace("$expr$", expr)
            + "return sandboxTemplate()");
        return sandbox();
    } catch (e) {
        return false;
    }
}

function test(expr) {
    document.write("<div>\"" + expr + "\" <b>is "
        + (isFunction(expr) ? "" : "not ")
        + "</b>a function</div>");
}

/* Let's do some testing */

function realFunction() {
}

test("realFunction");       // exists!
test("notHere");            // non-existent
test("alert('Malicious')"); // attempt to execute malicious code!
test("syntax error {");     // attempt to blow us up! 
```

输出：

*   “realFunction”**是**一个函数
*   “notHere”**不是**函数
*   "alert('Malicious')"**不是**函数
*   “语法错误{”**不是**函数

沙盒代码可以以更简洁的方式编写，但我喜欢使用“模板”函数而不是将 JS 代码嵌入为字符串文字。

哦，这在不使用的情况下做得很好`eval`——尽管有人可能会争辩说使用 Function 构造函数与`eval`.

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-04-21T15:37:45.417

使用评估：

```
myFunction = function(){};

var func_name = "myFunction";
var myFunctionPtr = eval(func_name); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-08-07T05:01:39.613

找到函数然后调用它们

```
autoCallBack : function(_action){
            $(".module").each(function(){
                var modulName = $(this).attr("id");
                if( isFunction(modulName) ){
                    eval(modulName)();
                }
            });
        }

isFunction : function(_functionName){
        try {
            eval(_functionName);
        } catch (error) {
            return false;
        }
    return true;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-07-19T11:29:37.703

**For NodeJs**

Write your functions in a separate file and export them and use with name reference of that to call them, Like

```
//    functions.js
var funcOne = function(){
                   console.log('function ONE called')
              }
module.exports={
    //  name_exported : internal_name
    funcOne : funcOne
} 
```

Use function defined in *functions.js* in *index.js* :

```
//    index.js
var methods = require('./functions.js')   // path to functions.js
methods['funcOne']() 
```

OUTPUT :

```
> node index.js
> function ONE called 
```

# c# - 两个不同的 .NET 应用程序无法访问 db4o 文件

> ID：773187
> 
> 赞同：0
> 
> 时间：2009-04-21T15:31:16.943
> 
> 标签：c#, .net, db4o

我刚刚下载并正在使用 db40 7.9，并正在使用提供的教程在两个不同的 .NET 3.5 应用程序上对其进行测试。

当我使用这两个应用程序访问同一个数据库 (c:\pilot.db4o) 文件时，每个应用程序都只反映该应用程序所做的更改，即使这些更改是在上一次运行期间进行的。

为什么每个应用程序都看不到其他应用程序对数据库文件所做的更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2011-01-24T11:08:13.593

每个应用程序中如何定义对象模型？您是否有（a）定义此对象模型的第三个程序集，或者（b）您在每个应用程序中复制了它？

方案**B**将不起作用，因为 db4o 需要记住程序集名称。

PS：我知道这是一个迟到的答案，但我认为这些信息对其他人有用。

阿德里亚诺

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-01-20T23:02:38.750

在这种情况下，请确保您提交了结果并关闭了数据库，以便下一个应用程序可以访问该文件并查看提交的结果。

但是如果您需要从多个“客户端”访问，您应该尝试使用客户端/服务器模式！

> 即使这些更改是在上一次运行期间进行的。

你这是什么意思？

# ruby-on-rails - Ruby：阅读 PDF 文件

> ID：773193
> 
> 赞同：35
> 
> 时间：2009-04-21T15:31:45.757
> 
> 标签：ruby-on-rails, ruby, pdf, pdf-parsing

我正在寻找一种快速可靠的方法来读取/解析 Ruby 中的大型 PDF 文件（在 Linux 和 OSX 上）。

到目前为止，我发现了相当古老且简单[的 PDF-toolkit](http://pdf-toolkit.rubyforge.org/)（一个[pdftotext](http://en.wikipedia.org/wiki/Pdftotext) -wrapper）和[PDF-reader](http://github.com/yob/pdf-reader/tree/master)，它们无法读取我的大部分文件。尽管这两个库提供了我正在寻找的功能。

我的问题：我错过了什么吗？有没有更适合（更快、更可靠）解决我的问题的工具？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2010-03-03T13:49:19.403

您可能会发现[Docsplit](http://documentcloud.github.com/docsplit/)很有用：

> Docsplit 是一个命令行实用程序和 Ruby 库，用于将文档拆分为其组成部分：可搜索的 UTF-8 纯文本、任何格式的页面图像或缩略图、PDF、单页和文档元数据（标题、作者、页数...)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-27T12:47:27.057

在尝试了不同的方法之后，我现在正在使用[PDF-Toolkit](http://pdf-toolkit.rubyforge.org/)。它已经很老了，但它快速、稳定且可靠。此外，它真的不需要是新的，因为它只是包装了[xpdf 命令行实用程序](http://www.foolabs.com/xpdf/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T21:19:36.607

您可以使用 JRuby 和 Java PDF 库解析器，例如 ApachePDFBox ( [https://www.ohloh.net/p/pdfbox](https://www.ohloh.net/p/pdfbox) )。另请参阅[http://java-source.net/open-source/pdf-libraries](http://java-source.net/open-source/pdf-libraries)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-25T12:56:45.333

您[看过 CombinePDF](https://github.com/boazsegev/combine_pdf)库吗？

这是一个纯 ruby​​ 解决方案，允许进行一些 PDF 操作，例如提取页面、将一个 PDF 页面覆盖在另一个页面上、页码、编写基本文本和表格等。

下面是一个使用徽标来处理现有 PDF 文件的示例。该示例读取一个 PDF 文件，提取一页以用作图章并为另一个 PDF 文件添加图章。

```
require 'combine_pdf'
company_logo = CombinePDF.load("company_logo.pdf").pages[0]
pdf = CombinePDF.load "content_file.pdf"
pdf.pages.each {|page| page << company_logo}
pdf.save "content_with_logo.pdf" 
```

您还可以标记文本、编号页或使用：

```
require 'combine_pdf'

pdf = CombinePDF.load "content_file.pdf"

pdf.number_pages #adds page numbers. you can add formatting and placement options.

pdf.pages.each {|page| page.textbox "One Way To Stamp"}

#you can a shortcut method to stamp pages
pdf.stamp_pages "Another way to stamp"

#you can use the shortcut method for both text and PDF stamps
company_logo = CombinePDF.load("company_logo.pdf").pages[0]
pdf.stamp_pages company_logo

# you can use write simple tables
pdf.pages[0].write_table headers: ['first name', 'surname'], table_data: [['John', 'Doe'], ['Mr.', 'Smith']]

pdf.save "content_with_logo.pdf" 
```

它不适用于复杂的操作，但它补充了大多数 PDF 创作库，并允许您使用 PDF 模板而不是从头开始编写整个内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-21T19:14:09.513

这里有一些选项：

[http://en.wikipedia.org/wiki/List_of_PDF_software](http://en.wikipedia.org/wiki/List_of_PDF_software)

通过该链接并搜索 sourceforge，有几个命令行实用程序可以满足您的需求，例如： http: [//pdftohtml.sourceforge.net/](http://pdftohtml.sourceforge.net/)

根据您的要求和 PDF 的外观，您可以考虑使用 Google Docs API（上传 PDF，然后将其作为文本下载），或者也可以尝试类似[gocr](http://www.gocr.de/)的方法。过去我很幸运地用 gocr 解析图像文本，你只需要跳到 shell 就可以了，就像`gocr -i whatever.pdf`（我认为它适用于 PDF）。

所有这些的缺点是它们不是纯 Ruby 实现，但许多好的（和免费的）OCR 项目似乎都是以这种方式完成的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-02-12T10:16:22.187

如果您只需要从 pdf 文件中获取文本内容，sourceforge 上的 pdftohtml 非常有效。它不适合处理图像。

# visual-studio - 是否有用于从 Visual Studio Team System 中通过电子邮件发送 Shelveset 和 History 项目的工具？

> ID：773198
> 
> 赞同：2
> 
> 时间：2009-04-21T15:32:17.487
> 
> 标签：visual-studio, tfs

我们在 Visual Studio 中将 Team Foundation Server 用于我们的源代码控制系统。尽管我们没有进行很多结对编程，但我们确实在这样的过程中对所有代码更改进行了同行评审：

*   写代码
*   搁置代码或签入（如果风险低）
*   使用搁置集名称或变更集编号向团队成员发送电子邮件（获取变更集编号需要调出项目的历史列表）。
*   团队成员收到电子邮件，转到 Visual Studio

*   如果它是一个搁置集：

    1.  调出 Pending Changes 窗口
    2.  按 Unshelve 按钮，打开 Unshelve 对话框
    3.  在 Owner Name 文本框中输入发件人的姓名，然后按 Find 列出用户的搁置集
    4.  搜索搁置集以找到正确的名称（通常通过订购我的搁置集名称），然后按详细信息...按钮以显示详细信息
*   如果是变更集：

    1.  调出源代码管理资源管理器窗口，然后点击“历史”按钮调出历史列表
    2.  找到正确的变更集编号，然后打开详细信息。

有谁知道可以让我们做其中一项或两项的工具？：

1.  只需选择一个变更集或搁置集并点击“发送电子邮件”，这将询问收件人并发送电子邮件，或者使用预先填充的项目中的信息调出 Outlook

2.  收到电子邮件后，直接链接到 Visual Studio 和相应的变更集/搁置项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-23T00:05:21.520

您是否尝试过 Microsoft 最新的[TFS 电动工具](http://blogs.msdn.com/bharry/archive/2008/10/01/preview-of-the-next-tfs-power-tools-release.aspx)？“团队成员”功能可能会有所帮助。

最新的[TFS Sidekicks](http://www.attrice.info/cm/tfs/)中有一个代码审查模块。

此处调查了其他几个附加组件（免费和商业）：http: [//jb-brown.blogspot.com/2009/01/team-system-code-review-presentation.html](http://jb-brown.blogspot.com/2009/01/team-system-code-review-presentation.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T15:36:38.583

有丰富的[事件模型](http://msdn.microsoft.com/en-us/library/bb130154.aspx)，大部分不直接暴露在 UI 中。

在 UI 中，您可以获得签入电子邮件，但仅此而已。TFS SDK 包括有关从命令行使用完整事件模型的信息。

但是我不知道是否包含与搁置集相关的任何事件，您可以在 TFS 上的文件夹“‹<em>TFS Install›\Web Services\Services\v1.0\Transforms”中查看已定义事件的架构服务器。

引发事件和过滤器匹配有两个选项：(1) 发送电子邮件（带有创建内容的转换），(2) 调用 Web 服务。

# x86 - 如何识别 x86 上的设备特定中断？

> ID：773199
> 
> 赞同：4
> 
> 时间：2009-04-21T15:32:39.327
> 
> 标签：x86, drivers, interrupt

在英特尔软件开发人员手册中，它说中断向量 32-255 通常是用户为外部 IO 设备定义的。在我的系统编程课上，我必须开发一个简单的设备驱动程序。我的问题是如何定义用于特定设备的特定中断向量？这是通过 BIOS 完成的吗？

注意：我们正在开发一个简单的操作系统，所以我的情况非常具体，但是，最后我需要了解这一切在 x86 系统上是如何发生的。目前我们的系统设置为将 32 个以上的中断向量分配给串行端口和键盘等设备。在阅读英特尔 82801EB ICH5 IO 控制器的数据表时，特别是关于 8259 PIC 的部分，它说 IRQ15 是辅助 IDE 通道。最终将如何将其作为中断向量放入堆栈？

我可能只是很困惑，以至于这个问题没有意义，所以我提前道歉。

编辑：所以我们的系统编程类有一个非常简单的操作系统，它具有用于安装 ISR 的内核例程，以处理给定向量编号的特定中断。在上个季度的课堂上，教授给了我们一个头文件，将键盘定义为向量编号 0x2c 或类似的东西。我试图找出如何使用我们的内核例程将主要和/或次要 IDE 通道中断映射到各种 ISR。目前，所有未使用的中断向量都有一个默认处理程序，如果发生中断，它将打印消息，因此 IDE 中断目前甚至没有打开，但这是另一个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T15:47:08.340

我已经有一段时间没有处理这些东西了，所以这可能是关闭的：我记得 PC 中断控制器有 15 条 IRQ 线。这些映射到特定的相邻 x86 中断向量。所以当一个外设触发一条 IRQ 线时，PIC 会中断 CPU 并告诉要跳转到哪个向量，就好像执行了相应的 INT 指令一样。一些 IRQ 被硬编码到某些外围设备，但我相信 PCI 设备与操作系统协商 IRQ 和一些其他资源（就像传统的 ISA PnP 设备一样）。

我不明白您的意思是“最终如何将其作为中断向量放入堆栈？”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T15:50:48.973

您可以对 PIC（可编程中断控制器）进行编程以映射某些设备 IRQ。

在 x86 上，有两个 PIC 以菊花链形式提供 IRQ0-IRQ17。IRQ0-7 由 8259 管理，IRQ8-15 由第二个 8259 管理。第一个向 CPU 发出信号并且是主机，第二个（从机）向第一个发出信号。

IDT（中断描述符表）将中断映射到 ISR（中断服务程序）的地址。可以使用 INT 指令（软件陷阱）直接引发中断。

例如，要引发中断 0x80，请执行`INT 0x80`.

要处理 0x80 `mov [0x80*4], int_80_handler`，. 假设是 32 位架构，`int_80_handler`函数的地址现在存储在 IDT 中的第 0x80 位。

您会发现这些很有帮助：
[http://en.wikipedia.org/wiki/Intel_8259](http://en.wikipedia.org/wiki/Intel_8259)
[http://en.wikipedia.org/wiki/Interrupt_Handler](http://en.wikipedia.org/wiki/Interrupt_Handler)
[http://en.wikipedia.org/wiki/Interrupt](http://en.wikipedia.org/wiki/Interrupt)
[http://en .wikipedia.org/wiki/Interrupt_descriptor_table](http://en.wikipedia.org/wiki/Interrupt_descriptor_table)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T15:53:41.227

设备获取中断有两种可能的方式：

1.  使用即插即用或 Pci 机制。如果您这样做，BIOS 将调用您的外围设备并询问资源要求。之后您的驱动程序可以枚举即插即用设备，搜索支持的设备并从该设备获取硬件中断。

2.  早期是如何做到的：只使用一个中断。向设备添加一个拨码开关，允许用户在不同的中断之间进行选择。资源分配现在掌握在用户手中。用户还将以某种方式在加载时将中断号传递给驱动程序。

现在如何挂钩中断：这取决于操作系统和 x86 运行的模式。对于裸机系统，您可以通过特殊指令查询 IDT（中断描述符表）。一旦你有了那个 IDT，你就可以获得地址并将 IRQ 处理程序的地址插入正确的插槽。对于实模式，我不知道它是如何完成的。

如果您至少有一点实时操作系统或类似操作系统的东西在运行，那么很可能已经有一个内核函数可以为您完成繁重的工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-21T15:39:23.897

我记得在内存空间的开头有一个向量表，它指向发生特定中断时要调用的例程。我可能在这里的级别太低（旧的 x86 汇编程序员），但在基本级别，您将向量安装在该表中，然后调用您的例程。我没有任何旧的参考资料，所以不能给你实际的电话，但如果官方方法在 BIOS 之外运行，我会感到惊讶。

在 GUI 的这些日子里，我确信还有其他更合适的方法，允许中断共享和所有这些好东西。

编辑：忽略大部分，我刚刚看到您正在查看硬件中断之外的中断 16 及更高版本。在那个空间里有任何有趣的硬件之前，我就离开了那个级别的编程，所以我只处理过前 15 个 IRQ（第 16 个是控制器之间的级联）。我留下它以防其他人感兴趣:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-21T19:34:25.097

好吧，我似乎在我们的支持代码中找到了答案，特别是 PIC 初始化例程。使用以下代码，IRQ 行分别映射到主 PIC 和从 PIC 的 IDT 中的偏移 20h 和 28h。

`/* ICW2: master offset of 20 in the IDT, slave offset of 28 */`

 ````
__outb( PIC_MASTER_IMR_PORT, 0x20 );
__outb( PIC_SLAVE_IMR_PORT, 0x28 ); 
````  `这意味着键盘被映射到矢量编号 2c，主通道和辅助通道将分别映射到 2e 和 2f。如果我更好地提出这个问题，你们中的一些人可能会给我更好的答案，但无论如何我感谢您的帮助！

82801EB ICH5 数据表的表 45 详细介绍了 8259 的 IRQ 线，在我的操作系统中，主设备仅在偏移 20h 处加载，从设备为 28h。

谢谢！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-01-24T23:06:42.027

INT 21h / AH=25h - 设置中断向量；输入：AL = 中断号。DS:DX -> 新的中断处理程序。

# vba - 如何创建脚本以将收件箱中当前活动的电子邮件移动到 Outlook 2007 中的另一个文件夹

> ID：773206
> 
> 赞同：3
> 
> 时间：2009-04-21T15:33:09.840
> 
> 标签：vba, outlook, outlook-2007

我有时会收到想要保留的电子邮件，但将它们移动到适当的文件夹可能会很痛苦。例如，我如何执行一个脚本，将我正在查看的电子邮件移动（如使用 CSv）到某个名为“buffer”的文件夹中？

我正在使用 Outlook 2007。

谢谢。

* * *

编辑：没有可以创建任何标准来自动化这个过程，就像通过规则一样。这只是我盯着它时做出的判断。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2011-11-21T18:03:42.213

这段代码可能会更好。

在您的代码中，objFolder 可能等于 Nothing，但您继续该过程。此外，For Each 循环假定每个项目都是邮件项目。

```
Sub MoveSelectedMessagesToFolder()
  Dim objNS As Outlook.NameSpace
  Dim objFolder As Outlook.MAPIFolder
  Dim obj As Object
  Dim msg As Outlook.mailItem

  Set objNS = Application.GetNamespace("MAPI")
  On Error Resume Next
  Set objFolder = objNS.Folders.item("Personal Folders").Folders.item("Buffer")
  On Error GoTo 0

  If objFolder Is Nothing Then
    MsgBox "This folder doesn't exist!", vbOKOnly + vbExclamation, "INVALID FOLDER"
    Exit Sub
  End If

  For Each obj In ActiveExplorer.Selection
    If TypeName(obj) = "MailItem" Then
      Set msg = obj
      msg.Move objFolder
    End If
  Next obj

End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-21T16:03:37.083

这是我正在使用的代码。

```
Sub MoveSelectedMessagesToFolder()
'Originally written by Chewy Chong
'Taken from http://verychewy.com/archive/2006/04/12/outlook-macro-to-move-an-email-to-folder.aspx
'Thanks Chewy!
'Ken
On Error Resume Next
    Dim objFolder As Outlook.MAPIFolder, objInbox As Outlook.MAPIFolder
    Dim objNS As Outlook.NameSpace, objItem As Outlook.MailItem

    Set objNS = Application.GetNamespace("MAPI")
    Set objInbox = objNS.GetDefaultFolder(olFolderInbox)
    'For the "Item" portion, I used the name of the folder exactly as it appear in the ToolTip when I hover over it.
    Set objFolder = objNS.Folders.Item("Personal Folders").Folders.Item("Buffer")

'Assume this is a mail folder

    If objFolder Is Nothing Then
        MsgBox "This folder doesn't exist!", vbOKOnly + vbExclamation, "INVALID FOLDER"
    End If

    If Application.ActiveExplorer.Selection.Count = 0 Then
        'Require that this procedure be called only when a message is selected
        Exit Sub
    End If
    For Each objItem In Application.ActiveExplorer.Selection
        If objFolder.DefaultItemType = olMailItem Then
            If objItem.Class = olMail Then
                objItem.Move objFolder
            End If
        End If
    Next 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T15:39:08.423

工具 -> 规则和警报

然后创建一个新规则，告诉所有符合任何标准的邮件被删除/标记为已读/移动到文件夹/这些的任何组合。

**编辑：** 如果您不想要规则/无法制定适合的规则，您可以创建一个宏（工具-> 宏）将其移动到文件夹，然后将其绑定到快捷方式。

# synchronization - 信号量的共识数是多少？

> ID：773212
> 
> 赞同：14
> 
> 时间：2009-04-21T15:34:47.887
> 
> 标签：synchronization, pthreads, mutex, semaphore, condition-variable

（我认为）互斥体的[共识数](http://www.cs.brown.edu/~mph/Herlihy91/p124-herlihy.pdf)是 2。

信号量的共识数是多少（如在 pthread_sem_* 中）？

条件变量的共识数是多少（例如在 pthread_cond_* 中）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-22T13:22:06.980

互斥体的共识数是 1。很明显，互斥体对于单个线程是无等待的。从它的定义来看，互斥锁不再对两个线程无等待。因此，共识数 >=1 且 <2，因此它必须为 1。

同样，通过停止一个线程以支持另一个线程来工作的其他同步机制也具有共识编号 1，因此不能用于构造由 2 个线程共享的无等待对象。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-01-05T12:41:52.227

答案取决于互斥体或信号量上支持的操作。如果只支持阻塞锁，则共识数为1。如果一个线程可以尝试锁定互斥锁而不等待，则共识数为2。那是因为如果有两个线程，都可以尝试锁定互斥锁，两者都可以同意哪一个得到它，所以有共识。如果互斥锁可以额外确定，对于任意数量的线程，哪个线程锁定了它，那么共识数是无限的。我认为信号量的情况类似。互斥量相当于带有计数器 1 的信号量。我不认为仅使用更大的计数器就可以达成共识，它仍然归结为相同的操作。Pthreads 支持非阻塞锁但不支持查询，所以答案是 2。

如果任何线程没有等待它，则向条件变量发出信号什么都不做，因此它们的共识编号为 1。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-21T16:07:44.360

无限，确定吗？但他们不是免费等待的。

也许我是误会了。您说互斥体的共识数为 2 - 您的来源是什么？它旨在允许任意数量的线程共享资源，并权衡阻塞。

Atomic [test-and-set](http://en.wikipedia.org/wiki/Test-and-set)的共识数为 2，但不会阻塞。

* * *

澄清一下：信号量、互斥体等是原语，您可以简单地包装共享资源以使其安全（只要您正确执行）。他们可能会阻止，但他们会保证您的数据是安全的。

*您引用的论文是关于在不阻塞*的情况下保护数据所需的原语，这[很难](http://en.wikipedia.org/wiki/Lock-free_and_wait-free_algorithms#Wait-freedom)。相同的原语也可能对锁有用，但这只是一个很好的附加功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-21T20:29:04.153

仅从这篇文章中，您就可以得出结论，信号量的共识数必须小于或等于 2。原因如下：

在文章的第三页，他们说：“fetch&add 操作非常灵活：它可以用于信号量......”。由于我们知道 fetch&add 的共识数等于 2，因此可以使用该论文的定理 1 来证明信号量的共识数必须小于或等于 2。证明如下：

## 证明

假设存在通过 fetch&add 实现的信号量的无等待实现。进一步假设信号量的共识数大于 2。我们知道 fetch&add 的共识数为 2。从定理 1 我们可以得出结论，在超过 2 个进程的系统中不存在通过 fetch&add 实现的信号量的无等待实现. 这与存在 fetch&add 实现的假设相矛盾。因此，一个信号量的共识数必须小于或等于 2。

量子点

# git - 如何防止 git merge 将特定文件从主干合并到分支中，反之亦然

> ID：773220
> 
> 赞同：8
> 
> 时间：2009-04-21T15:36:11.643
> 
> 标签：git

我在开发 VHDL 代码时使用 git。我正在开发 git 分支中的一个组件：comp_dev。组件接口没有变化，只是组件内部的代码。现在，这个组件已经存在于 master 分支中，但版本更稳定，足以让其他开发人员能够使用该组件。其他开发人员也有他们工作的分支，当他们的代码很好时，他们会将他们的分支合并回 master。

在这个阶段，我需要能够将 master 的所有更改合并回我的 comp_dev 分支，这基本上没有问题，但有时我正在开发的组件的稳定版本会随着其他设计师的工作而更改，但是不是界面。每次我想要合并时，我都必须在该特定文件上手动执行 git merge -s ours，否则我会遇到需要手动解决的冲突，从而丢掉他们的工作。

如果我想将其他文件中的更改合并回主文件，也会发生同样的情况。如果我在执行 git 合并之前忘记执行 git merge -s ours src/rx/state_machine.vhd comp_dev，那么我最终要么手动合并，要么不小心将状态机的不稳定版本合并到稳定的一个。

有没有办法暂时从合并中排除一个文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2010-10-19T16:36:53.847

我在[这里发布了一个适合我的解决方案](https://stackoverflow.com/questions/332528/is-it-possible-to-exclude-specific-commits-when-doing-a-git-merge/3970442#3970442)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-05T08:34:34.087

如果我理解正确，您希望推迟合并对所述组件的更改（我们将其命名为“C”），而您的工作重点是其他模块。您工作的一个副作用是对“C”的微小更改，这恰好与其他人的工作发生冲突，但您不希望每次将您的重点工作推到您的“主人”的任何地方时也合并“C”的麻烦是。

AFAIK，git 中的更改集是原子的，不知道文件；所以没有办法从合并中排除文件，除非解决合并冲突以支持您喜欢的修订。

不过，可能还有另一种方法可以摆脱您的处境。

您可能希望将“C”分解到一个单独的库中，并为其创建一个单独的 git 存储库。您的项目将被拆分为多个存储库。但不要害怕，git 会让你通过子模块来管理它。

[在这里](http://git-scm.com/docs/git-submodule)查看有关如何执行此操作的详细信息。

子模块将允许您检查给定的“C”版本，并将您的工作重点放在源代码的不同部分。然后，您可以独立于任何人对“C”所做的更改来编辑、提交和合并您的工作。

关于并发变更的管理，开源版本控制的通常立场是 VC 不能替代与团队成员的沟通。同意通用的开发方法，尽量减少并发的不兼容更改，开发过程将变得不那么痛苦。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-22T12:10:35.757

我已经开始使用`git merge --no-commit --no-ff other_branch`，如中所述：

[https://gist.github.com/katylava/564416](https://gist.github.com/katylava/564416)

虽然我不在临时分支中这样做，但只是在我的工作功能分支中。

它确实需要您做更多的工作来挑选您想要保留的提交并丢弃其余的提交，但至少您可以确定要保留什么以及要丢弃什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-06-11T05:05:16.723

我一直在和一些朋友聊天，我想我会分享一下，以防你觉得它有用。

rebase 和 merge 对于您正在尝试做的事情可能不太有用。一种更安全、更简单、更无聊且更可预测的仅获取某些代码位或某些文件的方法是使用 git 提供的方法来手动移动补丁，例如 (a) 挑选单个提交或 (b) 格式补丁和是。如果您需要调整结果（例如删除文件），请这样做并在新提交中解释原因。或者只是在你挑选或应用补丁时调整一些东西。am 可以是--interactive，并且cherry-pick 可以通过提交--amend 进行修改。

我用一个长期存在的分支尝试了另一种策略：合并所有内容，然后手动恢复我真的不想合并的东西。这也很好。

其他看起来不错的想法是[使用细粒度的分支](https://stackoverflow.com/questions/880957/pull-all-commits-from-a-branch-push-specified-commits-to-another/881014#881014)。

我想我觉得一个关键的带回家的信息是，关注代码并拥有经常运行的良好自动化测试比掌握特定的 git 补丁/合并策略更重要。

# algorithm - 生成独特的颜色

> ID：773226
> 
> 赞同：18
> 
> 时间：2009-04-21T15:37:37.177
> 
> 标签：algorithm, visualization, color-space

我想将一些数据绘制到纹理中：一行中的许多项目。它们不是按顺序创建的，而且它们的大小可能都不同（想想内存堆）。每个数据项都是一个小矩形，我希望能够将它们区分开来，所以我希望它们中的每一个都具有独特的颜色。

现在我可以使用 rand() 生成 RGB 值并希望它们都不同，但我怀疑我不会在 RGB 空间中得到良好的分布。还有比这更好的方法吗？例如，在它们（几乎）重复之前循环不同颜色的好方法是什么？

颜色不必与项目中的任何数据匹配。我只是希望能够查看许多值并看到它们是不同的，因为它们是相邻的。

我可以弄清楚一些事情，但我认为这是一个有趣的问题。:)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-04-21T15:40:21.227

使用 RGB 颜色模型不是获得良好颜色混合的好方法。最好使用另一种颜色模型来生成颜色，然后从该颜色模型转换为 RGB。

我建议你改用[HSV 或 HSL](http://en.wikipedia.org/wiki/HSL_color_space)颜色模型，特别是你想改变[Hue](http://en.wikipedia.org/wiki/Hue)。

如果您想要 X 个不同的颜色值，请将它们从 0 更改为 360，步长为 360 除以 X。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-21T15:43:37.007

你的样品空间是什么......我们在谈论多少项目。

你可以建立一个 RGB 三元数组

```
for(int r = 0; r < 255; r = r+16)
   for(int g = 0; g < 255; g = g+16)
      for(int b = 0; b < 255; b = b+16)
           // take r, g, b and add it to a list 
```

然后随机化你的列表并遍历它。在重复颜色之前会给你 16^3 (4096) 种不同的颜色。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-21T15:46:08.687

一般来说，RGB 并不是一个很好的色彩空间来做这些事情，因为它在感知上是非线性的，对于初学者来说。这意味着在 RGB 三元组之间移动的相等距离​​在我们眼中看起来并不相同。

我可能会在[L*c*h*](http://en.wikipedia.org/wiki/Lab_color)空间（[另请参阅](http://www.hunterlab.com/appnotes/an09_96a.pdf)）空间或[HSL](http://en.wikipedia.org/wiki/HSL_color_space)空间中工作，并在色调中生成均匀的间距。这些空间被设计成近似感知线性的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2010-02-24T19:04:53.053

谷歌“delta e cie 2000”；色差公式可用于确定两种颜色之间的表观（视觉）距离。（在显示器上；颜料有不同的公式。）它对实验室空间中的颜色进行操作（西蒙的道具），但对差异进行感知计算。

我们发现 1.5 左右的数字足以确保视觉上*不同的*颜色（即，如果它们彼此靠近，您可以分辨出区别），但如果您想要*可识别*的颜色（您可以在图例中找到任何颜色），您需要顶一下。

至于创建一组颜色......我可能会从 Lab 空间的某个角落开始，并使用一个可以提供足够大视觉差异的步长绕它走（注意：它不是线性的，所以步长可能必须是自适应的），然后随机化列表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-21T15:50:50.390

这与着色地图相关的四色问题非常相似，这可能会为您提供一些有趣的解决方案：

[四色定理](http://en.wikipedia.org/wiki/Four_color_theorem)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-02-22T23:48:08.703

如果您只需要一组感知上不同的颜色（而不是生成它们的算法），我在我的网站上创建了一个免费工具，可以做到这一点： http:
[//phrogz.net/css/distinct-colors.html](http://phrogz.net/css/distinct-colors.html)

该工具不仅可以在 RGB 或 HSV 空间中使用均匀间距（相对于人类感知而言分布不均匀），还允许您在 HSV 空间中生成值网格，然后使用[CMC(I:c)](http://en.wikipedia.org/wiki/Color_difference#CMC_l%3ac_.281984.29)标准进行颜色距离以丢弃在感知上彼此太近的颜色。（第二个选项卡上的“阈值”滑块允许您控制颜色在视觉上的明显差异，实时显示结果。）

最后，您可以按各种标准对生成的颜色列表进行排序，然后均匀地“洗牌”该列表，以保证列表中的视觉上不同的值彼此相邻。（我建议“交错”值约为 5。）

*在撰写本文时，该工具在 Chrome、Safari 和（通过 shim）Firefox 上运行良好；IE9 不支持 HTML5 范围输入滑块，UI 广泛用于交互式探索。*

# java - 那里有 javax.imageio 的好替代品吗？

> ID：773236
> 
> 赞同：2
> 
> 时间：2009-04-21T15:39:15.240
> 
> 标签：java, javax.imageio

我正在寻找 javax.imageio 包的一个很好的替代方案，它可以让我对图像进行简单的旋转、剪切和缩放操作。例如，我想做

```
int angle, height, width;
image.rotateRight(angle).scale(height, width); 
```

为了获得向右旋转*角度*度并缩小到*高*x*宽*像素的图像。

使用 Graphics2D 和 BufferedImages，我将不得不这样做，这既不可读，也不容易编写：

```
BufferedImage result = new BufferedImage(width, height, BufferedImage.TYPE_INT_RGB);
Graphics2D graphics = result.createGraphics();
graphics.translate(height/2, width/2);
graphics.rotate(angle);
graphics.translate(-width/2, -height/2);
graphics.drawImage(image, 0, 0, width, height, null); 
```

（实际上，该代码甚至没有考虑非方形图像，这将需要我在翻译中做更多的魔法）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-21T15:46:51.307

[Java Advanced Imaging API](http://java.sun.com/javase/technologies/desktop/media/jai/)包含有用的东西，比如[RotatorDescriptor](http://java.sun.com/products/java-media/jai/forDevelopers/jai-apidocs/javax/media/jai/operator/RotateDescriptor.html)。

但我承认我发现你上面的例子很可读，所以我不确定你会得到更多你喜欢的东西:-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-21T16:35:42.453

我同意 Brian 的观点：JAI 对你来说是一个非常好的选择。您可能需要编写一些委托对象来获得所需的可读代码并使用它而不是 JAI API。

您也可以使用处理 ( [http://processing.org](http://processing.org) )。它的 API 比 JAI API 更简单。由于使用处理，默认情况下您将获得更好的缩放和旋转操作质量。

# reporting-services - 当子报表在多个页面上呈现时，如何在每个页面上显示主报表的列标题

> ID：773237
> 
> 赞同：2
> 
> 时间：2009-04-21T15:39:16.503
> 
> 标签：reporting-services, ssrs-2008, subreport

`VS`我在使用/的 sql 主报告（.rdl 文件）中几乎没有子报告`SSRS 2008`。
子报表大约从主报表详细信息部分的页面中间开始。我在主报告中有一组，显示标题信息并将一个参数传递`ReportID`给每个子报告。
我也检查了两个：

1.  行标题 - “在每一页上重复标题行”和
2.  列标题 - “在每一页上重复标题列”</li>

在主报告`General`的属性选项卡上。 如果子报表中的详细信息行很少，以便所有内容都可以在第一页上呈现，则一切正常。 如果我在子报表中有更多详细信息行，因此无法在一页上打印所有内容，则子报表会从第一页呈现并移至第二页、第三页等。`Tablix`

当我在子报表中有超过一页的数据时，它也会从第一页开始，并在第二页继续呈现，依此类推......
但是，它不会在后续页面上显示主报表的列/行标题的子报告？
我注意到，当`ReportID`我的主报告组中的下一个项目/开始时，它仅在第一页上打印列标题，而不是任何后续页面，依此类推......

我也尝试只检查一个，要么

1.  行标题 - “在每一页上重复标题行”或
2.  列标题 - “在每一页上重复标题列”</li>

在主报告的 Tablix 属性的常规选项卡上但不起作用？

当子报表具有多个页面数据时，任何想法如何在每页上打印标题信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-21T15:55:50.550

分页在 SSRS 中总是很有趣。

您是否查看过子报表的页面大小/交互性？这可能会停止子报表分页，但我不知道这是不是你想要的。

[一篇关于分页的旧文章](http://blogs.msdn.com/bwelcker/archive/2005/08/19/Alien-Lanes-_2800_Logical-and-Physical-Pagination-Rules_2900_.aspx)

[还有一个更新的](http://social.msdn.microsoft.com/forums/en-US/sqlreportingservices/thread/8cbc81d9-c86d-4dd7-9741-a15e79b8dcd9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-08-25T15:34:54.640

目前我遇到了同样的问题。在之前的 SSRS 报告中，我们通过将 tablix 放入单个单元格列表项中来使其工作，以便重复标题。现在我正在处理一份不同的报告，当我尝试同样的事情时，我收到了这个错误：

```
[rsInvalidDetailDataGrouping] The tablix ‘tablixOpportunitySummary’ has a detail member with inner members. Detail members can only contain static inner members. 
```

我进行了广泛的搜索，但这是唯一表明 SSRS 中存在已知问题的链接。在发布这篇文章时，它包含 4 个解决方法：

[https://connect.microsoft.com/SQLServer/feedback/details/337720/katmai-reporting-services-2008-tablix-control-repeat-column-headers-does-not-work#](https://connect.microsoft.com/SQLServer/feedback/details/337720/katmai-reporting-services-2008-tablix-control-repeat-column-headers-does-not-work#)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-21T08:49:36.727

有点晚了，但我认为这就是你要找的：

您需要转到**tablix properties > General**并选中**Keep header visible while scrolling**选项。然后在高级模式下转到列/行组，选择您的静态行并将**固定数据**模式设置为`True`，**在新页面上重复**设置为 ，`True`并将**组保持**为`After`。

这里可能是最好的参考：[这里](https://blogs.msdn.microsoft.com/robertbruckner/2008/10/13/repeat-header-keep-header-visible-in-tables-in-rs-2008/)

# vb.net - ' '必须执行' '用于接口' '

> ID：773244
> 
> 赞同：0
> 
> 时间：2009-04-21T15:40:35.487
> 
> 标签：vb.net, web-services, implementation

我们在 VB .Net 2005 中有一个 Web 服务解决方案，我们已经开始遇到错误。我们提供如下界面：

```
Public Interface IBatchTrackerService
    Function InsertBatchTracker(ByVal BatchTrackerObject As BatchTracker, ByRef errorNum As Integer, ByRef errorMsg As String) As Integer
End Interface 
```

在我们的类中，我们使用以下代码实现此接口。

```
 Public Class BatchTrackerService
        Implements IBatchTrackerService

        Public Function InsertBatchTracker(ByVal BatchTrackerObject As BusinessObjects.BatchTracker, ByRef errorNum As Integer, ByRef errorMsg As String) As Integer Implements IBatchTrackerService.InsertBatchTracker
           'Some code here'
        End Function
    End Class 
```

此代码工作正常，但现在开始导致错误。我们收到的错误是：

```
Class 'BatchTrackerService' must implement 'Function InsertBatchTracker(BatchTrackerObject As BusinessObjects.BatchTracker, ByRef errorNum As Integer, ByRef errorMsg As String) As Integer' for interface 'IBatchTrackerService'. 
```

奇怪的是项目编译正确，但在编译完成后显示许多这些错误。

我们最近安装了 Panda 作为我们的病毒防护，这导致了一个不同的错误，我在这里找到了解决方案。

任何帮助将不胜感激。

谢谢你。

**更新于 2009 年 4 月 21 日 11:50**
接口和实现都在解决方案的同一个项目中。

**更新于 2009 年 4 月 22 日 08:16**
我尝试从 BatchTracker 类型前面删除 BusinessObjects 标识符，但我仍然得到同样的结果。这只是整个解决方案中发生的事情的一个例子。此 BatchTrackerService 中的每个实现都被标记为错误，此外还有其他几个服务几乎每个实现都被标记为错误。但不知何故，项目成功构建，是的，它运行正常！
至于 BusinessObjects，它包含许多我们用作参数的类，它只是该解决方案中的另一个项目。我们不引用任何外部程序集来向 BusinessObjects 提供这些类。

**更新于 2009 年 4 月 22 日 08:24**
我注意到的最后一件事是，任何不使用“BusinessObjects”类作为参数而只是使用字符串、整数等的函数/过程都不会被标记为错误。

**2009 年 4 月 22 日 09:50 更新**
我尝试恢复到以前的版本，并且能够编译并且错误计数保持为零。我将其范围缩小到签入其中对 BusinessObjects 的引用略有更改的项目文件之一。我只恢复了这个项目文件，现在一切都编译好了。感谢大家带领我朝着正确的方向前进。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-21T21:10:43.117

您的接口指定“BatchTrackerObject”参数为“BatchTracker”类型，但您的实现使用“BusinessObjects.BatchTracker”类型。尝试删除“BusinessObjects”。您的实施中的限定符。

多个程序集是否在 BusinessObjects 命名空间中提供类？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T15:44:11.047

听起来您正在加载包含 Web 服务和客户端中的界面的不同版本的程序集，导致客户端拒绝 Web 界面实现的签名。确保版本相同，并在必要时对程序集进行强签名。

# delphi - 是时候重新考虑 Delphi 帮助文件系统了吗？

> ID：773246
> 
> 赞同：9
> 
> 时间：2009-04-21T15:40:50.930
> 
> 标签：delphi, delphi-2009

大多数可用于 Delphi 的组件没有 Delphi 2009 的 HTML 帮助文件。许多组件，包括一些非常流行的商业组件，只有 HLP 和 CHM 帮助文件。

许多第三方组件不再被积极开发，但被许多开发人员使用。因此，这些组件没有 IDE 帮助。

关于旧的 CHM 帮助文件的投诉很少，但今天有大量关于帮助文件系统的投诉。也许现在是 Codegear 重新考虑使用的帮助文件系统类型的时候了。

我对此的抱怨之一是，即使您安装了提供 HTML 帮助文件的组件，内容选项卡也会损坏，而先前安装的组件内容会被删除。

Codegear 是否有可能的替代方案可供考虑？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-25T22:48:57.487

一个想法是在 Delphi Wiki 之后对其进行建模：http: [//delphi.wikia.com/wiki/Delphi_Wiki](http://delphi.wikia.com/wiki/Delphi_Wiki)

wiki 实际上并没有那么糟糕，尤其是左侧框架中的 VCL 链接。

看起来相当令人愉快，有一个不错的搜索，包括问题、示例、交叉引用，以及我最喜欢的：用户评论和提示。

实际上关于用户评论和提示，我最喜欢[www.php.net/docs.php](http://www.php.net/docs.php)上的 PHP 文档（我认为这[是我见过的最好的编程文档](https://stackoverflow.com/questions/28072/what-languages-have-the-best-worst-documentation-and-support-communities/318811#318811)）是用户评论和提示。

如果他们可以将您在[Delphi Basics](http://www.delphibasics.co.uk/)中找到的出色布局集成到其中，并允许 3rd 方组件将其帮助文件添加到其中，那么他们将拥有完整的参考。（但第 3 方显然必须将他们的帮助文件重组为新格式——不管它最终是什么格式）。

wiki 还包含教程、提示和技巧、参考和热门文章的部分。而且我认为它也可以成为我们都想要的包罗万象的代码存储库。

应该允许下载帮助 wiki 的选项，以便可以离线访问。

他们必须弄清楚如何让 F1 键正常工作以正确搜索 wiki/帮助文件，无论是在线还是离线，并给出最相关的结果。

Wiki现在的问题是它不完整，需要将全套Delphi帮助文件并入其中。

这可能是一个白日梦，但这样的事情将是我的理想。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-24T18:13:29.560

我也有同样的感觉。旧的帮助系统帮助我更快地找到答案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-27T09:09:26.597

这是我的宠物讨厌。Delphi 帮助变得更糟了，尽管最近略有改进。老实说，我相信这是阻碍其采用的因素之一。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-03-05T13:27:12.637

Micosoft 为 VS2010 引入了 Help3，所以也许我们也会在 Delphi 中看到它：

这是一篇博客文章，它回答了“为什么要使用新的帮助系统？”这个问题。

[http://thirdblogfromthesun.com/2010/10/the-story-of-help-in-visual-studio-2010/](http://thirdblogfromthesun.com/2010/10/the-story-of-help-in-visual-studio-2010/)

它引用了一篇内部论文，该论文导致了 2008 年初新的“Help3”项目：

> “论文描述了 Visual Studio 中的帮助体验存在以下问题：
> 
> 1.  无法找到您需要的信息是一个常见问题。F1 帮助和搜索无法正常工作。
> 2.  帮助系统的性能——主要是启动、主题加载、本地搜索结果——是最大的问题之一。
> 3.  由于帮助系统的复杂性，离线 MSDN 库安装很脆弱。
> 4.  我们帮助格式的专有性质几乎没有激励合作伙伴开发创作工具，并且开发人员无法在他们自己的产品中轻松采用。
> 5.  在内容制作方面，帮助平台让我们背负着过时的工具和流程。
> 6.  最后，也是最重要的一点，微软没有一个团队能够解决这些问题。”

# algorithm - 哪种排序算法提供最佳的最坏情况性能？

> ID：773253
> 
> 赞同：4
> 
> 时间：2009-04-21T15:42:29.677
> 
> 标签：algorithm, sorting

对于绝对最坏情况，已知最快的排序算法是什么？我不关心最好的情况，如果这很重要，我会假设一个巨大的数据集。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-04-21T15:45:08.893

确保你已经看到了：

[可视化排序算法](http://www.sorting-algorithms.com/?)——它帮助我决定使用什么排序算法。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-21T15:59:22.040

取决于数据。例如，对于整数（或任何可以表示为整数的东西），最快的是[**基数排序**](http://en.wikipedia.org/wiki/Radix_sort)，对于固定长度值，其最坏情况复杂度为 O( *n* )。最好的通用比较排序算法的复杂度为 O( *n* log *n* )。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-04-21T15:45:28.127

如果您使用二进制比较，最好的排序算法需要 O(N log N) 比较才能完成。如果您正在寻找具有良好最坏情况性能的东西，我会考虑[MergeSort](http://en.wikipedia.org/wiki/Merge_sort)和[HeapSort](http://en.wikipedia.org/wiki/Heapsort)，因为它们在所有情况下都是 O(N log N) 算法。

如果您的所有数据都适合内存，那么 HeapSort 很好，而 MergeSort 允许您更好地进行磁盘排序（但总体上会占用更多空间）。

[维基百科](http://en.wikipedia.org/wiki/Sorting_algorithm)排序算法页面上提到了其他不太知名的算法，它们都具有 O(n log n) 最坏情况的性能。（基于 mmyers 的评论）

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-04-21T15:47:29.900

### 对于预算无限的人

滑稽但正确： [排序网络](http://en.wikipedia.org/wiki/Sorting_network)交易空间（在实际硬件方面）比 O(n log n) 排序更好！

如果不求助于这样的硬件（这不太可能），你有一个O(n log n)的最佳[比较类型](http://en.wikipedia.org/wiki/Comparison_sort)的下限

### O(n log n) 最坏情况下的性能（无特定顺序）

*   [二叉树排序](http://en.wikipedia.org/wiki/Binary_tree_sort)
*   [合并排序](http://en.wikipedia.org/wiki/Merge_sort)
*   [堆排序](http://en.wikipedia.org/wiki/Heapsort)
*   [平滑排序](http://en.wikipedia.org/wiki/Smoothsort)
*   [介绍排序](http://en.wikipedia.org/wiki/Introsort)

### 击败 n log n

如果您的数据适合它，您可以克服 n log n 限制，但也要关心输入数据中的*位数*

[Radix](http://en.wikipedia.org/wiki/Radix_sort)和[Bucket](http://en.wikipedia.org/wiki/Bucket_sort)可能是这方面最著名的例子。如果没有关于您的特定要求的更多信息，那么更深入地考虑这些是没有结果的。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-04-21T15:46:36.033

快速排序通常是最快的，但如果你想要更好的最坏情况时间，请尝试[Heapsort](http://en.wikipedia.org/wiki/Heapsort)或[Mergesort](http://en.wikipedia.org/wiki/Mergesort)。这两者都有`O(n log n)`最差的时间表现。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-04-21T17:39:45.107

如果您有一个巨大的数据集（即比可用内存大得多），您的数据可能位于磁盘/磁带/昂贵的随机访问中，因此您需要外部排序。

合并排序在这种情况下效果很好；与大多数其他类型不同，它不涉及随机读/写。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-21T15:44:31.297

它在很大程度上与您的数据集的大小以及该集合是否已经排序（或者它当前处于什么顺序）有关。

整本书都是关于搜索/排序算法的。假设最坏的情况，您不会找到“绝对最快的”，因为不同的种类有不同的最坏情况。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-21T15:45:50.980

**根据大 O 符号 O(n)**，它取决于大小。

这是一个排序算法列表[最好和最坏的情况](http://www.softpanorama.org/Algorithms/sorting.shtml#n2010_1010_the_heroic__tales_of_sorting_algorithms)，供您比较。我的偏好是 2 方式[**MergeSort**](http://en.wikipedia.org/wiki/Merge_sort)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-04-21T15:46:54.003

如果您有足够大的数据集，您可能正在考虑对单个数据箱进行排序，然后使用合并排序来合并这些箱。但在这一点上，我们所说的数据集足够大，比主存大得多。

我想最正确的答案是“这取决于”。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-04-21T15:48:09.493

它取决于数据类型和资源类型。例如，有一些并行算法可以击败快速排序，但考虑到您提出问题的方式，您不太可能访问它们。有时，一种算法的“最坏情况”是另一种算法的“最佳情况”（几乎排序的数据对于快速和合并是有问题的，但对于更简单的技术来说速度很快）。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-04-21T15:54:17.170

关于指定问题的重要性：基数排序可能是最快的，但仅当您的数据具有可以分解为独立小块的固定长度键时，它才可用。这限制了它在一般情况下的用处，并解释了为什么更多人没有听说过它。

[http://en.wikipedia.org/wiki/Radix_sort](http://en.wikipedia.org/wiki/Radix_sort)

PS 这是一个 O(k*n) 算法，其中 k 是密钥的大小。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-04-21T15:44:16.617

假设数据随机排序，快速排序。

O(nlog n) 平均情况，O(n^2) 在最坏情况下，但这需要高度非随机数据。

您可能想要描述您的数据集特征。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-04-21T15:44:55.833

请参阅[快速排序与合并排序](https://stackoverflow.com/questions/680541/quick-sort-vs-merge-sort)以比较快速排序和合并排序，这在大多数情况下是两种更好的算法。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-04-21T15:45:36.690

这完全取决于您要排序的数据。不同的算法对不同的数据有不同的速度。O(n) 算法可能比 O(n^2) 算法慢，具体取决于您使用的数据类型。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-04-21T15:46:13.087

我一直更喜欢合并排序，因为它很稳定（这意味着如果从排序的角度来看两个元素相等，那么它们的相对顺序会被明确保留），但快速排序也很好。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2009-04-21T15:47:09.887

图灵机的最低上限是通过*归并排序*实现的，即 O(n log n)。尽管在某些数据集上快速排序可能会更好。

[除非您使用特殊硬件（例如硬件支持的珠排序](http://en.wikipedia.org/wiki/Bead_sort)，其他非比较排序），否则您不能低于 O(n log n )。

# .net - 在没有调试器的情况下查看调试跟踪？

> ID：773254
> 
> 赞同：1
> 
> 时间：2009-04-21T15:42:38.057
> 
> 标签：.net, trace

如何在调试器之外查看 .NET Debug.WriteLine 跟踪？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T15:46:57.343

您可以使用Sysinternals 的**[DbgView](http://technet.microsoft.com/en-us/sysinternals/bb896647.aspx)**或将以下内容添加到您的应用程序[配置文件](http://msdn.microsoft.com/en-us/library/system.diagnostics.tracesource(VS.80).aspx)中以将消息跟踪到控制台：

```
<configuration>
  <system.diagnostics>
    <sources>
      <source name="TraceTest" switchName="SourceSwitch" 
        switchType="System.Diagnostics.SourceSwitch" >
        <listeners>
          <add name="console" />
          <remove name ="Default" />
        </listeners>
      </source>
    </sources>
    <switches>
      <!-- You can set the level at which tracing is to occur -->
      <add name="SourceSwitch" value="Warning" />
        <!-- You can turn tracing off -->
        <!--add name="SourceSwitch" value="Off" -->
    </switches>
    <sharedListeners>
      <add name="console" 
        type="System.Diagnostics.ConsoleTraceListener" 
        initializeData="false"/>
    </sharedListeners>
    <trace autoflush="true" indentsize="4">
      <listeners>
        <add name="console" />
      </listeners>
    </trace>
  </system.diagnostics>
</configuration> 
```

您还可以将日志文件中的跟踪侦听器类型更改`System.Diagnostics.ConsoleTraceListener`为任何其他跟踪侦听器，例如记录到系统的 EventLog 或跟踪到自定义应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T15:44:20.423

查看[DebugView](http://technet.microsoft.com/en-us/sysinternals/bb896647.aspx)。我没有将它与 .NET 一起使用，但我已将它与 VC++ 应用程序一起使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T15:45:32.540

使用[dbgview](http://technet.microsoft.com/en-us/sysinternals/bb896647.aspx)

# outlook - 自定义 Outlook 和 Exchange 以向会议添加新字段 + 从自定义应用程序从 Exchange 查询，这可能吗？

> ID：773261
> 
> 赞同：1
> 
> 时间：2009-04-21T15:43:54.603
> 
> 标签：outlook, vsto, exchange-server

是否可以自定义 Outlook 中使用的窗口以输入会议（日历选项卡）以向其中添加新字段？该数据将存储在 Exchange 中，然后由另一个对其进行处理的应用程序查询。

我的问题是看看我如何影响现在的会议编辑对话框，添加我的新字段。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-28T02:54:00.453

如果您只想在约会项目检查器的底部添加一些字段，那么您可以使用 VSTO 轻松完成。它被称为自定义前景表单区域。

见这里：http: [//msdn.microsoft.com/en-us/library/bb157865.aspx](http://msdn.microsoft.com/en-us/library/bb157865.aspx)

但是，如果您想更改基本检查器表单本身中的元素，那么这将更加困难，并且涉及更多的工作。我对此没有完整的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-07T11:41:36.100

您可以使用自定义表单轻松完成此操作。

只需从“ipm.appointment”约会表单派生并添加字段和逻辑以验证这些字段并将这些字段保存为会议项目的用户属性然后您可以使用 RDO 或 OOM 附加到交换以回调会议项目的属性。

然后，您可以根据需要将表单发布给您的整个组织，并使用 soem reg 密钥更改来覆盖默认值。

或者

您可以按照上面的方法使用 vsto 创建自己的插件。

# django - django外键包含查询

> ID：773262
> 
> 赞同：10
> 
> 时间：2009-04-21T15:44:02.577
> 
> 标签：django, contains

我有以下型号

```
class Command(models.Model):
    server = models.ForeignKey(Server)
    user_login = models.CharField(max_length=100)
    user_run = models.CharField(max_length=100)
    host = models.CharField(max_length=100)
    ip = models.CharField(max_length=100)
    session = models.CharField(max_length=100)
    command = models.TextField()
    ts = models.DateTimeField(auto_now_add=True)
    version = models.CharField(max_length=100)
    type = models.CharField(max_length=100) 
```

我有以下搜索查询

```
cmds = Command.objects.filter(Q(user_login__contains=form.cleaned_data['loguser']),
                              Q(user_run__contains=form.cleaned_data['runuser']),
                              Q(host__contains=form.cleaned_data['loghost']),
                              Q(command__contains=form.cleaned_data['command']),
                              Q(server__contains=form.cleaned_data['host']),
                              Q(session__contains=form.cleaned_data['session'])) \
                      .order_by('-id')[:100] 
```

我需要通过以下字符串搜索 server.host

如果我尝试添加以下内容，则会出现错误

```
Q(server__contains=form.cleaned_data['host']),

Exception Type:     TypeError
Exception Value:    

Related Field has invalid lookup: contains

Exception Location:     /usr/lib/python2.5/site-packages/django/db/models/fields/related.py in get_db_prep_lookup, line 156 
```

form.cleaned_data['host'] 将包含主机名的文本字符串。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-04-21T15:47:25.783

```
server__searchfieldname__contains 
```

您没有指定服务器表中应该查找的字段。

# java - 土耳其语字符的 Java 邮件问题

> ID：773264
> 
> 赞同：2
> 
> 时间：2009-04-21T15:44:14.137
> 
> 标签：java, character-encoding, email, jakarta-mail, turkish

我在使用 Java 代码发送的邮件中显示土耳其语字符时遇到问题。这些字符在邮件中显示为问号 (?)。

```
Message msg = new MimeMessage(mailSession);
msg.setHeader("Content-Encoding","ISO-8859-9");
msg.setFrom(new InternetAddress(from));
InternetAddress[] address = {new InternetAddress(to)};
msg.setRecipients(Message.RecipientType.TO, address);
msg.setSubject(subject,"iso-8859-9");
msg.setSentDate(new Date());
msg.setContent(messageText, "text/html;ISO-8859-9"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T16:26:23.723

看起来 ISO-8859-9 应该能够处理您的[土耳其字母](http://en.wikipedia.org/wiki/Turkish_dotted_and_dotless_I)。文本是否有可能在其他地方使用错误的字符编码进行解码？例如，如果电子邮件的正文包含来自 Web 请求、另一封电子邮件或文件的文本，则可能此时指定了错误的解码器。

一种检查方法是打印 Unicode 代码点的数值`String`：

```
for (int idx = 0; idx < str.length(); ++idx) {
  System.out.println(Integer.toHexString(str.charAt(idx)));
} 
```

如果您看到`fffd`，那是“替换字符”，意味着`String`创建时使用的解码无法将字节（或字节序列）映射到字符。如果你看到`3f`，那是一个'？字符，并且意味着文本在更早的时候被破坏了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-13T11:11:06.400

使用 UTF-8，这里有一个很好的编码概述： http: [//www.joelonsoftware.com/articles/Unicode.html](http://www.joelonsoftware.com/articles/Unicode.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-05-08T07:26:19.200

You can find the solution here:

[http://www.serkankonakci.com/Project/wordpress/2009/02/04/java-mail-ile-mail-gonderme-ornegi/](http://www.serkankonakci.com/Project/wordpress/2009/02/04/java-mail-ile-mail-gonderme-ornegi/)

even with this code, you can send with attachment or single mail in Turkish. And you can find other Turkish charset problem, just search there.

# drupal - Drupal 6：在菜单系统创建的页面上更改 CCK 表单

> ID：773274
> 
> 赞同：0
> 
> 时间：2009-04-21T15:45:16.787
> 
> 标签：drupal, forms, drupal-6, module, cck

我是一个 drupal 新手（但有 PHP 经验）。我创建了一些函数来显示页面并使用菜单函数将它们映射到 url。

在其中一个函数中，我想获取 CCK 内容类型的表单，按照自己的方式处理它，然后将其吐出到模板上。

所以我有一个函数 projectadmin_create_page()，它使用以下方法获取对表单的引用：

$form = drupal_get_form('project_node_form'). 在这里，我想更改它（或基于它创建一个新表单）并将其发送到模板。作为第一步，我将它直接传递给模板。在这里，表单标签连同所有隐藏字段都得到输出，但没有字段标签。

我希望我不必重写 CCK 表单的所有验证，但仍然可以获得自定义页面。

任何人都可以提供一些指导吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T16:21:25.187

您可以使用[ [1](http://api.drupal.org/api/function/hook_form_alter) , [2](http://www.google.com/search?q=hook_form_alter) ]更改*任何*Drupal 表单`hook_form_alter`

# c# - 无法将类型“字符串”转换为“System.DateTime”

> ID：773284
> 
> 赞同：1
> 
> 时间：2009-04-21T15:46:26.300
> 
> 标签：c#, .net, datetime

尝试执行以下操作：

```
order.ExpirationDate =(DateTime) ( ExpMonth + "/" + ExpYear); 
```

ExpMonth, Expyear 都是整数。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-21T15:48:11.473

这对你来说会更好：

```
order.ExpirationDate = new DateTime(ExpYear, ExpMonth, 1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T15:48:48.417

你需要使用：

```
DateTime.Parse(ExpMonth.ToString() + "/" + ExpYear.ToString()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T15:49:01.003

试试这个：

```
DateTime dt;
if (DateTime.TryParse(ExpMonth + "/" + ExpYear, out dt))
{
   // success
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-21T15:50:51.047

尝试使用将月份和年份作为参数的构造函数创建一个新的 DateTime（它也需要一天，但您可以默认为 1）而不是强制转换字符串，它更简洁、更容易。

# html - Apache mod_rewrite 重定向到内部服务器

> ID：773296
> 
> 赞同：0
> 
> 时间：2009-04-21T15:47:34.050
> 
> 标签：html, apache, redirect

我不确定这是否正确，但这就是我在这里寻求帮助的原因。

我有服务器一（Apache）和服务器二（IIS）。服务器 1 具有外部访问权限，但服务器 2 没有。我需要在它们的端口 80 上托管 http 内容。在不更改防火墙等端口的情况下，我是否可以将呼叫从服务器 1 重定向到服务器 2？

例如，用户访问 www.test.com/1.html 这实际上将用户重定向到内部 http 服务器（服务器）并正常提供内容。

如果这是可能的，请您帮助编写 mod 规则

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-21T15:55:58.600

您可以将[mod_rewrite](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html)与[mod_proxy](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html)一起使用，例如：

```
RewriteEngine on
RewriteRule ^/1\.html$ http://iis.local/1.html [P] 
```

但是您需要同时拥有 mod_rewrite 和 mod_proxy。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T15:50:15.650

mod_rewrite 用于重写 URI——您可以使用它来启动 HTTP 301（重定向），但您实际上要做的是通过 Apache 服务器将 Web 流量代理到 IIS 服务器。

查看 mod_proxy。

# delphi - 如何将 TBytes 转换为 RawByteString？

> ID：773297
> 
> 赞同：6
> 
> 时间：2009-04-21T15:47:53.037
> 
> 标签：delphi, string, delphi-2009

在 Delphi 2009 中将声明为 TBytes 的字节数组转换为 RawByteString 的最佳方法是什么？这段代码确实有效，也许有更快的方法（没有循环）：

```
 function Convert(Bytes: TBytes): RawByteString; 
   var
     I: Integer;
   begin
     SetLength(Result, Length(Bytes));
     for I := 0 to ABytes - 1 do
       Result[I + 1] := AnsiChar(Bytes[I]);
   end; 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2010-08-07T07:03:00.770

最好的方法是这样的：

```
function Convert(const Bytes: TBytes): RawByteString; inline;
begin
  SetString(Result, PAnsiChar(pointer(Bytes)), length(Bytes));
end; 
```

并且不要忘记将 const 用于 Bytes 参数，以便更快地生成代码。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-22T17:25:14.323

您可以考虑使用 move （未经测试）

```
function Convert(const Bytes: TBytes): RawByteString; 
begin
  SetLength(Result, Length(Bytes));
  Move(Bytes[0], Result[1], Length(Bytes))  
end; 
```

并使用“const”作为参数，这样数组就不会被复制两次。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-06-01T20:39:29.707

将字节转换为 a 的最简单方法`RawByteString`是使用`SetString()`.

此外，为避免将`RawByteString`分配给其他字符串类型时数据丢失，您应该为 分配一个代码页，`RawByteString`以便其字符数据正确转换为接收字符串的字符集：

```
function Convert(const Bytes: TBytes): RawByteString; 
begin
  SetString(Result, PAnsiChar(PByte(Bytes))^, Length(Bytes));
  SetCodePage(Result, ..., False);
end; 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-04-26T13:15:43.563

并记得测试：

如果长度（字节）>0 然后移动.....

# asp.net - CSV + Dropdownlist 列关联

> ID：773301
> 
> 赞同：0
> 
> 时间：2009-04-21T15:48:35.390
> 
> 标签：asp.net, sql-server, csv

大家好！这个问题更多的是关于捷径：

是否有一种简单而有效的方法将列名与 csv 数据相关联？

问题：

我需要关联列名（并绑定它们）以将 csv 文件正确导入我的 SQL Server 数据库。在我看到 csv 之前我不知道 csv 的哪一列会包含什么数据。

示例：文件 1 列顺序：姓名、地址、电话。文件 2 列顺序：姓名、电话、地址。

因此，我需要能够显示 csv，并使用放置良好的下拉列表，显示需要选择的剩余列。

我需要创建一个接口，允许将 csv 列手动关联到数据表列。

解决方案： ？

我正在考虑自己编写代码的想法，但在问自己是否已经存在现有的更简单的解决方案，而谷歌在这方面并没有太多帮助。

你们的任何意见将不胜感激，因为它可以节省我一些宝贵的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-21T15:56:42.297

除了通过 SSIS 或其他直接 SQL 项进行导入之外，我不知道有什么更好的方法。

在这种情况下，我要做的就是显示每个字段的列列表，并让用户选择映射。

# c# - 拆分 CamelCase

> ID：773303
> 
> 赞同：83
> 
> 时间：2009-04-21T15:49:00.410
> 
> 标签：c#, asp.net, string

这都是asp.net c#。

我有一个枚举

```
public enum ControlSelectionType 
{
    NotApplicable = 1,
    SingleSelectRadioButtons = 2,
    SingleSelectDropDownList = 3,
    MultiSelectCheckBox = 4,
    MultiSelectListBox = 5
} 
```

它的数值存储在我的数据库中。我在数据网格中显示这个值。

```
<asp:boundcolumn datafield="ControlSelectionTypeId" headertext="Control Type"></asp:boundcolumn> 
```

ID 对用户没有任何意义，因此我已将 boundcolumn 更改为具有以下内容的模板列。

```
<asp:TemplateColumn>
    <ItemTemplate>
        <%# Enum.Parse(typeof(ControlSelectionType), DataBinder.Eval(Container.DataItem, "ControlSelectionTypeId").ToString()).ToString()%>
    </ItemTemplate>
</asp:TemplateColumn> 
```

这好多了......但是，如果有一个简单的函数我可以在枚举周围放置一个简单的函数来按骆驼大小写拆分它，这样单词就可以很好地包裹在数据网格中。

注意：我完全意识到有更好的方法来做这一切。这个屏幕纯粹是在内部使用的，我只想快速修改一下以更好地显示它。

* * *

## 回答 #1

> 赞同：140
> 
> 时间：2011-05-26T11:41:47.880

我用了：

```
 public static string SplitCamelCase(string input)
    {
        return System.Text.RegularExpressions.Regex.Replace(input, "([A-Z])", " $1", System.Text.RegularExpressions.RegexOptions.Compiled).Trim();
    } 
```

取自[http://weblogs.asp.net/jgalloway/archive/2005/09/27/426087.aspx](http://weblogs.asp.net/jgalloway/archive/2005/09/27/426087.aspx)

VB.net：

```
Public Shared Function SplitCamelCase(ByVal input As String) As String
    Return System.Text.RegularExpressions.Regex.Replace(input, "([A-Z])", " $1", System.Text.RegularExpressions.RegexOptions.Compiled).Trim()
End Function 
```

* * *

## 回答 #2

> 赞同：77
> 
> 时间：2009-04-21T16:01:41.550

确实，正则表达式/替换是其他答案中描述的方法，但是如果您想走不同的方向，这也可能对您有用

```
 using System.ComponentModel;
    using System.Reflection; 
```

...

```
 public static string GetDescription(System.Enum value)
    {
        FieldInfo fi = value.GetType().GetField(value.ToString());
        DescriptionAttribute[] attributes = (DescriptionAttribute[])fi.GetCustomAttributes(typeof(DescriptionAttribute), false);
        if (attributes.Length > 0)
            return attributes[0].Description;
        else
            return value.ToString();
    } 
```

这将允许您将枚举定义为

```
public enum ControlSelectionType 
{
    [Description("Not Applicable")]
    NotApplicable = 1,
    [Description("Single Select Radio Buttons")]
    SingleSelectRadioButtons = 2,
    [Description("Completely Different Display Text")]
    SingleSelectDropDownList = 3,
} 
```

取自

[http://www.codeguru.com/forum/archive/index.php/t-412868.html](http://www.codeguru.com/forum/archive/index.php/t-412868.html)

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2016-05-30T18:58:30.327

此正则表达式`(^[a-z]+|[A-Z]+(?![a-z])|[A-Z][a-z]+)`可用于从 camelCase 或 PascalCase 名称中提取所有单词。它也适用于名称中任何位置的缩写。

*   `MyHTTPServer`将包含 3 个匹配项：`My`, `HTTP`,`Server`
*   `myNewXMLFile`将包含 4 个匹配项：`my`, `New`, `XML`,`File`

然后，您可以使用`string.Join`.

```
string name = "myNewUIControl";
string[] words = Regex.Matches(name, "(^[a-z]+|[A-Z]+(?![a-z])|[A-Z][a-z]+)")
    .OfType<Match>()
    .Select(m => m.Value)
    .ToArray();
string result = string.Join(" ", words); 
```

* * *

正如@DanielB 在评论中指出的那样，正则表达式不适用于数字（和下划线），所以这是一个改进的版本，它**支持任何带有单词、首字母缩写词、数字、下划线的标识符**（稍微修改了@JoeJohnston 的版本），[在线查看演示（小提琴）](https://dotnetfiddle.net/MTfhP9)：

```
([A-Z]+(?![a-z])|[A-Z][a-z]+|[0-9]+|[a-z]+) 
```

极端例子：`__snake_case12_camelCase_TLA1ABC`→ `snake`, `case`, `12`, `camel`, `Case`, `TLA`, `1`,`ABC`

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2014-09-16T18:50:39.437

Tillito 的答案不能很好地处理已经包含空格的字符串或首字母缩略词。这修复了它：

```
public static string SplitCamelCase(string input)
{
    return Regex.Replace(input, "(?<=[a-z])([A-Z])", " $1", RegexOptions.Compiled);
} 
```

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2009-04-21T16:08:38.743

如果 C# 3.0 是一个选项，您可以使用以下单行代码来完成这项工作：

```
 Regex.Matches(YOUR_ENUM_VALUE_NAME, "[A-Z][a-z]+").OfType<Match>().Select(match => match.Value).Aggregate((acc, b) => acc + " " + b).TrimStart(' '); 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2013-06-04T23:24:51.340

这是一个扩展方法，它可以很好地处理数字和多个大写字符，并且还允许在最终字符串中使用大写特定的首字母缩略词：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Globalization;
using System.Text.RegularExpressions;
using System.Web.Configuration;

namespace System
{
    /// <summary>
    /// Extension methods for the string data type
    /// </summary>
    public static class ConventionBasedFormattingExtensions
    {
        /// <summary>
        /// Turn CamelCaseText into Camel Case Text.
        /// </summary>
        /// <param name="input"></param>
        /// <returns></returns>
        /// <remarks>Use AppSettings["SplitCamelCase_AllCapsWords"] to specify a comma-delimited list of words that should be ALL CAPS after split</remarks>
        /// <example>
        /// wordWordIDWord1WordWORDWord32Word2
        /// Word Word ID Word 1 Word WORD Word 32 Word 2
        /// 
        /// wordWordIDWord1WordWORDWord32WordID2ID
        /// Word Word ID Word 1 Word WORD Word 32 Word ID 2 ID
        /// 
        /// WordWordIDWord1WordWORDWord32Word2Aa
        /// Word Word ID Word 1 Word WORD Word 32 Word 2 Aa
        /// 
        /// wordWordIDWord1WordWORDWord32Word2A
        /// Word Word ID Word 1 Word WORD Word 32 Word 2 A
        /// </example>
        public static string SplitCamelCase(this string input)
        {
            if (input == null) return null;
            if (string.IsNullOrWhiteSpace(input)) return "";

            var separated = input;

            separated = SplitCamelCaseRegex.Replace(separated, @" $1").Trim();

            //Set ALL CAPS words
            if (_SplitCamelCase_AllCapsWords.Any())
                foreach (var word in _SplitCamelCase_AllCapsWords)
                    separated = SplitCamelCase_AllCapsWords_Regexes[word].Replace(separated, word.ToUpper());

            //Capitalize first letter
            var firstChar = separated.First(); //NullOrWhiteSpace handled earlier
            if (char.IsLower(firstChar))
                separated = char.ToUpper(firstChar) + separated.Substring(1);

            return separated;
        }

        private static readonly Regex SplitCamelCaseRegex = new Regex(@"
            (
                (?<=[a-z])[A-Z0-9] (?# lower-to-other boundaries )
                |
                (?<=[0-9])[a-zA-Z] (?# number-to-other boundaries )
                |
                (?<=[A-Z])[0-9] (?# cap-to-number boundaries; handles a specific issue with the next condition )
                |
                (?<=[A-Z])[A-Z](?=[a-z]) (?# handles longer strings of caps like ID or CMS by splitting off the last capital )
            )"
            , RegexOptions.Compiled | RegexOptions.IgnorePatternWhitespace
        );

        private static readonly string[] _SplitCamelCase_AllCapsWords =
            (WebConfigurationManager.AppSettings["SplitCamelCase_AllCapsWords"] ?? "")
                .Split(new[] { ',' }, StringSplitOptions.RemoveEmptyEntries)
                .Select(a => a.ToLowerInvariant().Trim())
                .ToArray()
                ;

        private static Dictionary<string, Regex> _SplitCamelCase_AllCapsWords_Regexes;
        private static Dictionary<string, Regex> SplitCamelCase_AllCapsWords_Regexes
        {
            get
            {
                if (_SplitCamelCase_AllCapsWords_Regexes == null)
                {
                    _SplitCamelCase_AllCapsWords_Regexes = new Dictionary<string,Regex>();
                    foreach(var word in _SplitCamelCase_AllCapsWords)
                        _SplitCamelCase_AllCapsWords_Regexes.Add(word, new Regex(@"\b" + word + @"\b", RegexOptions.Compiled | RegexOptions.IgnoreCase));
                }

                return _SplitCamelCase_AllCapsWords_Regexes;
            }
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2017-02-21T12:30:02.840

您可以使用 C# 扩展方法

```
 public static string SpacesFromCamel(this string value)
        {
            if (value.Length > 0)
            {
                var result = new List<char>();
                char[] array = value.ToCharArray();
                foreach (var item in array)
                {
                    if (char.IsUpper(item) && result.Count > 0)
                    {
                        result.Add(' ');
                    }
                    result.Add(item);
                }

                return new string(result.ToArray());
            }
            return value;
        } 
```

然后你可以像这样使用它

```
var result = "TestString".SpacesFromCamel(); 
```

结果将是

> 测试字符串

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2009-04-21T16:07:52.427

使用 LINQ：

```
var chars = ControlSelectionType.NotApplicable.ToString().SelectMany((x, i) => i > 0 && char.IsUpper(x) ? new char[] { ' ', x } : new char[] { x });

Console.WriteLine(new string(chars.ToArray())); 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-07-03T09:41:16.827

我也有一个`enum`我必须分开的。就我而言，这种方法解决了问题-

```
string SeparateCamelCase(string str)
{
    for (int i = 1; i < str.Length; i++)
    {
        if (char.IsUpper(str[i]))
        {
            str = str.Insert(i, " ");
            i++;
        }
    }
    return str;
} 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2010-11-09T03:55:04.117

```
public enum ControlSelectionType    
{   
    NotApplicable = 1,   
    SingleSelectRadioButtons = 2,   
    SingleSelectDropDownList = 3,   
    MultiSelectCheckBox = 4,   
    MultiSelectListBox = 5   
} 
public class NameValue
{
    public string Name { get; set; }
    public object Value { get; set; }
}    
public static List<NameValue> EnumToList<T>(bool camelcase)
        {
            var array = (T[])(Enum.GetValues(typeof(T)).Cast<T>()); 
            var array2 = Enum.GetNames(typeof(T)).ToArray<string>(); 
            List<NameValue> lst = null;
            for (int i = 0; i < array.Length; i++)
            {
                if (lst == null)
                    lst = new List<NameValue>();
                string name = "";
                if (camelcase)
                {
                    name = array2[i].CamelCaseFriendly();
                }
                else
                    name = array2[i];
                T value = array[i];
                lst.Add(new NameValue { Name = name, Value = value });
            }
            return lst;
        }
        public static string CamelCaseFriendly(this string pascalCaseString)
        {
            Regex r = new Regex("(?<=[a-z])(?<x>[A-Z])|(?<=.)(?<x>[A-Z])(?=[a-z])");
            return r.Replace(pascalCaseString, " ${x}");
        }

//In  your form 
protected void Button1_Click1(object sender, EventArgs e)
        {
            DropDownList1.DataSource = GeneralClass.EnumToList<ControlSelectionType  >(true); ;
            DropDownList1.DataTextField = "Name";
            DropDownList1.DataValueField = "Value";

            DropDownList1.DataBind();
        } 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2013-01-18T07:45:40.097

Eoin Campbell 的解决方案效果很好，除非您有 Web 服务。

您需要执行以下操作，因为描述属性不可序列化。

```
[DataContract]
public enum ControlSelectionType
{
    [EnumMember(Value = "Not Applicable")]
    NotApplicable = 1,
    [EnumMember(Value = "Single Select Radio Buttons")]
    SingleSelectRadioButtons = 2,
    [EnumMember(Value = "Completely Different Display Text")]
    SingleSelectDropDownList = 3,
}

public static string GetDescriptionFromEnumValue(Enum value)
{
    EnumMemberAttribute attribute = value.GetType()
        .GetField(value.ToString())
        .GetCustomAttributes(typeof(EnumMemberAttribute), false)
        .SingleOrDefault() as EnumMemberAttribute;
    return attribute == null ? value.ToString() : attribute.Value;
} 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2016-09-30T10:49:51.687

如果你不喜欢使用正则表达式 - 试试这个：

```
public static string SeperateByCamelCase(this string text, char splitChar = ' ') {

        var output = new StringBuilder();

        for (int i = 0; i < text.Length; i++)
        {
            var c = text[i];

            //if not the first and the char is upper
            if (i > 0 && char.IsUpper(c)) {

                var wasLastLower = char.IsLower(text[i - 1]);

                if (i + 1 < text.Length) //is there a next
                {
                    var isNextUpper = char.IsUpper(text[i + 1]);

                    if (!isNextUpper) //if next is not upper (start of a word).
                    {
                        output.Append(splitChar);
                    }
                    else if (wasLastLower) //last was lower but i'm upper and my next is an upper (start of an achromin). 'abcdHTTP' 'abcd HTTP'
                    {
                        output.Append(splitChar);
                    }
                }
                else
                {
                    //last letter - if its upper and the last letter was lower 'abcd' to 'abcd A'
                    if (wasLastLower)
                    {
                        output.Append(splitChar);
                    }
                }
            }

            output.Append(c);
        }

        return output.ToString();

    } 
```

通过了这些测试，它不喜欢数字，但我不需要它。

```
 [TestMethod()]
    public void ToCamelCaseTest()
    {

        var testData = new string[] { "AAACamel", "AAA", "SplitThisByCamel", "AnA", "doesnothing", "a", "A", "aasdasdAAA" };
        var expectedData = new string[] { "AAA Camel", "AAA", "Split This By Camel", "An A", "doesnothing", "a", "A", "aasdasd AAA" };

        for (int i = 0; i < testData.Length; i++)
        {
            var actual = testData[i].SeperateByCamelCase();
            var expected = expectedData[i];
            Assert.AreEqual(actual, expected);
        }

    } 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2020-04-22T15:08:14.867

#JustSayNoToRegex

采用带有 uderscores 和数字的 C# 标识符，并将其转换为以空格分隔的字符串。

```
public static class StringExtensions
{
    public static string SplitOnCase(this string identifier)
    {
        if (identifier == null || identifier.Length == 0) return string.Empty;
        var sb = new StringBuilder();

        if (identifier.Length == 1) sb.Append(char.ToUpperInvariant(identifier[0]));

        else if (identifier.Length == 2) sb.Append(char.ToUpperInvariant(identifier[0])).Append(identifier[1]);

        else {
            if (identifier[0] != '_') sb.Append(char.ToUpperInvariant(identifier[0]));
            for (int i = 1; i < identifier.Length; i++) {
                var current = identifier[i];
                var previous = identifier[i - 1];

                if (current == '_' && previous == '_') continue;

                else if (current == '_') {
                    sb.Append(' ');
                }

                else if (char.IsLetter(current) && previous == '_') {
                    sb.Append(char.ToUpperInvariant(current));
                }

                else if (char.IsDigit(current) && char.IsLetter(previous)) {
                    sb.Append(' ').Append(current);
                }

                else if (char.IsLetter(current) && char.IsDigit(previous)) {
                    sb.Append(' ').Append(char.ToUpperInvariant(current));
                }

                else if (char.IsUpper(current) && char.IsLower(previous) 
                    && (i < identifier.Length - 1 && char.IsUpper(identifier[i + 1]) || i == identifier.Length - 1)) {
                        sb.Append(' ').Append(current);
                }

                else if (char.IsUpper(current) && i < identifier.Length - 1 && char.IsLower(identifier[i + 1])) {
                    sb.Append(' ').Append(current);
                }

                else {
                    sb.Append(current);
                }
            }
        }
        return sb.ToString();
    }

} 
```

测试：

```
[TestFixture]
static class HelpersTests
{
    [Test]
    public static void Basic()
    {
        Assert.AreEqual("Foo", "foo".SplitOnCase());
        Assert.AreEqual("Foo", "_foo".SplitOnCase());
        Assert.AreEqual("Foo", "__foo".SplitOnCase());
        Assert.AreEqual("Foo", "___foo".SplitOnCase());
        Assert.AreEqual("Foo 2", "foo2".SplitOnCase());
        Assert.AreEqual("Foo 23", "foo23".SplitOnCase());
        Assert.AreEqual("Foo 23 A", "foo23A".SplitOnCase());
        Assert.AreEqual("Foo 23 Ab", "foo23Ab".SplitOnCase());
        Assert.AreEqual("Foo 23 Ab", "foo23_ab".SplitOnCase());
        Assert.AreEqual("Foo 23 Ab", "foo23___ab".SplitOnCase());
        Assert.AreEqual("Foo 23", "foo__23".SplitOnCase());
        Assert.AreEqual("Foo Bar", "Foo_bar".SplitOnCase());
        Assert.AreEqual("Foo Bar", "Foo____bar".SplitOnCase());
        Assert.AreEqual("AAA", "AAA".SplitOnCase());
        Assert.AreEqual("Foo A Aa", "fooAAa".SplitOnCase());
        Assert.AreEqual("Foo AAA", "fooAAA".SplitOnCase());
        Assert.AreEqual("Foo Bar", "FooBar".SplitOnCase());
        Assert.AreEqual("Mn M", "MnM".SplitOnCase());
        Assert.AreEqual("AS", "aS".SplitOnCase());
        Assert.AreEqual("As", "as".SplitOnCase());
        Assert.AreEqual("A", "a".SplitOnCase());
        Assert.AreEqual("_", "_".SplitOnCase());

    }
} 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2019-08-13T05:11:53.390

简单版本类似于上面的一些，但如果当前位置已经有一个分隔符，则逻辑不自动插入分隔符（默认情况下是一个空格，但可以是任何字符）。

使用 a`StringBuilder`而不是 'mutating' 字符串。

```
public static string SeparateCamelCase(this string value, char separator = ' ') {

    var sb = new StringBuilder();
    var lastChar = separator;

    foreach (var currentChar in value) {

        if (char.IsUpper(currentChar) && lastChar != separator)
            sb.Append(separator);

        sb.Append(currentChar);

        lastChar = currentChar;
    }

    return sb.ToString();
} 
```

例子：

```
Input  : 'ThisIsATest'
Output : 'This Is A Test'

Input  : 'This IsATest'
Output : 'This Is A Test' (Note: Still only one space between 'This' and 'Is')

Input  : 'ThisIsATest' (with separator '_')
Output : 'This_Is_A_Test' 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-09-28T21:54:03.763

试试这个：

```
using System;
using System.Linq;
using System.Collections.Generic;

public class Program
{
    public static void Main()
    {
        Console
            .WriteLine(
                SeparateByCamelCase("TestString") == "Test String" // True
            );
    }

    public static string SeparateByCamelCase(string str)
    {
        return String.Join(" ", SplitByCamelCase(str));
    }

    public static IEnumerable<string> SplitByCamelCase(string str) 
    {
        if (str.Length == 0) 
            return new List<string>();

        return 
            new List<string> 
            { 
                Head(str) 
            }
            .Concat(
                SplitByCamelCase(
                    Tail(str)
                )
            );
    }

    public static string Head(string str)
    {
        return new String(
                    str
                        .Take(1)
                        .Concat(
                            str
                                .Skip(1)
                                .TakeWhile(IsLower)
                        )
                        .ToArray()
                );
    }

    public static string Tail(string str)
    {
        return new String(
                    str
                        .Skip(
                            Head(str).Length
                        )
                        .ToArray()
                );
    }

    public static bool IsLower(char ch) 
    {
        return ch >= 'a' && ch <= 'z';
    }
} 
```

[在线查看示例](https://dotnetfiddle.net/MAvRFO)

# .net - DataTable.Select("Bla='Blablabla'").Count 返回 'Count' 不是 'System.Array' 异常的成员

> ID：773306
> 
> 赞同：4
> 
> 时间：2009-04-21T15:49:48.570
> 
> 标签：.net, asp.net, vb.net, .net-3.5

我正在尝试访问数据表选择方法返回的行数组上的计数属性，这是在将 Web 项目转换为 3.5 之后

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-21T15:53:08.623

改为使用`.Length`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-22T08:58:27.927

`<add namespace="System.Linq"/>`我的 web.config中丢失了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-29T21:04:14.873

在 vbproj 文件中，在引用 ItemGroup 中添加以下内容

```
<Reference Include="System.Core" />
<Reference Include="System.Xml.Linq" /> 
```

# c# - 我如何在两个不相关或解耦的方法调用上“跨越”事务？

> ID：773307
> 
> 赞同：0
> 
> 时间：2009-04-21T15:49:49.957
> 
> 标签：c#, .net, sql, transactions

我正忙于在 C#、WinForms、.NET 3.5 中构建软件更新应用程序，其中我有一组具有通用基类的可插入任务类。我想要一个任务，数据库升级，开始一个事务，另一个任务，网站升级，提交或回滚相同的事务，所以网站和数据库总是同步的。

我依稀记得我在 VB6 时代的一些事情，如果一个 COM+ 方法已经在运行，则可以加入事务，或者如果没有，则开始一个事务，等等。我也对这种移植到 .NET Enterprise Services 有模糊的记忆，但这也是一个前一阵子。

目前使用什么技术来实现这一目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-21T22:17:44.940

我认为您正在寻找[环境事务或隐式事务](http://msdn.microsoft.com/en-us/library/ms172152(VS.80).aspx)

```
using (TransactionScope scope = new TransactionScope())
{
   // do several stuff in the same transaction
   // calls in here implicitly are in the scope of the transaction.
   // you open several independent connections, which are in the same transaction.
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-21T15:54:21.477

您可能想从这里开始。

[http://msdn.microsoft.com/en-us/library/86773566.aspx](http://msdn.microsoft.com/en-us/library/86773566.aspx)

SqlConnection.BeginTransaction 返回一个SqlTransaction，它实现了IDbTransaction。

IDbTransaction 上定义的两个方法是 Commit() 和 Rollback()。如果您在调用之间保持连接对象处于活动状态，您应该能够将事务从一个地方传递到另一个地方并在那里执行提交或回滚。

如果您不使用 SQL Server，您的数据库提供程序（OleDb、Odbc 等）将提供相应的对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T16:00:58.417

在我的脑海中，我认为你应该能够在没有特殊技术的情况下做到这一点。创建一个负责启动数据库和 Web 升级的 UpgradeManager 类。事务应该存在于此，并围绕对其他两个对象的调用进行调用。

如果您有其他任务要插入，请让 UpgradeManager 遍历您的任务集合。

.....或者你可以传递交易，就像 harpo 说的那样（他的回应是在我的作曲中间）......很高兴有选择。;-)

内特

# php - IE (HTTPS)：从 php 文件生成 pdf 不起作用

> ID：773308
> 
> 赞同：11
> 
> 时间：2009-04-21T15:49:58.757
> 
> 标签：php, internet-explorer, pdf, https

这是我的问题。我正在尝试调用一个页面： foo.php?docID=bar 并将 PDF 返回到屏幕，该屏幕作为 BLOB 存储在数据库中。

这是我的代码中实际返回 PDF 的部分：

```
$docID = isset($_REQUEST['docID']) ? $_REQUEST['docID'] : null;

if ($docID == null){
    die("Document ID was not given.");
}

$results = getDocumentResults($docID);

if (verifyUser($user, $results['ProductId'])){
    header('Content-type: application/pdf');
    // this is the BLOB data from the results.
    print $results[1];
}
else{
    die('You are not allowed to view this document.');
} 
```

这在 Firefox 中运行良好。

但是，在 IE 中，它根本不显示任何内容。如果我在另一个页面（即 google.com）上，并且我输入 URL 以转到此页面，它会说它已完成，但我的屏幕上仍然有 google.com。

我检查了来自 firefox 和 IE 的响应的标题。它们是相同的。

有没有人有什么建议？需要更多信息？

**编辑**：如果它有帮助，这里是响应标题和内容的第一行：

```
HTTP/1.1 200 OK
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Pragma: no-cache
Content-Length: 349930
Content-Type: application/pdf
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Server: Microsoft-IIS/6.0
X-Powered-By: PHP/5.1.2
Set-Cookie: PHPSESSID=cql3n3oc13crv3r46h2q04dvq4; path=/; domain=.example.com
Content-Disposition: inline; filename='downloadedFile.pdf'
X-Powered-By: ASP.NET
Date: Tue, 21 Apr 2009 16:35:59 GMT

%PDF-1.4 
```

**编辑**：此外，提取 pdf 文件的页面实际上使用 HTTPS 而不是 HTTP。

提前致谢，

〜扎克

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-04-21T18:35:17.937

我弄清楚了问题所在。这是一个处理 IE、HTTPS 和插件的 IE 错误。（见[这里](http://simonwillison.net/2008/May/30/radiacnet/)）

这是一个缓存问题。当我设置：

```
 header("Cache-Control:  max-age=1");
  header("Pragma: public"); 
```

（请参阅[此处](http://us.php.net/manual/en/function.header.php#83219)），PDF 在缓存中的时间足够长，以至于 adobe reader 插件可以抓取它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-21T16:11:23.587

我也有这个问题，我使用了以下似乎工作正常

```
header("Content-type: application/pdf");
header("Content-Length: $length");
header("Content-Disposition: inline; filename='$filename'"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-21T18:27:49.280

试试这个：

```
 header("Content-Type: application/pdf");
 header("Content-Disposition: inline; filename=foo.pdf");
 header("Accept-Ranges: bytes");
 header("Content-Length: $len");
 header("Expires: 0");
 header("Cache-Control: private"); 
```

此外，如果您正在使用会话，您可以尝试设置

```
session_cache_limiter("none"); 
```

或者

```
session_cache_limiter("private"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2011-07-02T00:24:23.457

```
if ( USR_BROWSER_AGENT == 'IE' ) {
    header( 'Content-Disposition: inline; filename="' . $name . '"');
    header( 'Expires: 0' );
    header( 'Cache-Control: must-revalidate, post-check=0, pre-check=0' );
    header( 'Pragma: public' );
} else {
    header( 'Content-Disposition: attachment; filename="' . $name . '"' );
    header( 'Expires: 0' );
    header( 'Pragma: no-cache' );
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-03-22T19:26:19.393

这是我需要更改的唯一标题：

```
header("Pragma: public"); 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2009-04-21T15:52:22.400

我认为您需要添加更多标题。

```
header("Content-Type: application/force-download");
header("Content-Type: application/octet-stream");
header("Content-Type: application/download");
header("Content-Disposition: attachment; filename=THEFILENAME.pdf;");
header("Content-Transfer-Encoding: binary");
header("Content-Length: " . strlen($results[1])); 
```

# linker - 在 Windows 中链接 *.o 文件

> ID：773323
> 
> 赞同：0
> 
> 时间：2009-04-21T15:52:07.907
> 
> 标签：linker, cygwin, mingw, ld

当我在 Windows 上使用 MinGW 将 .o 文件与 LD 链接器链接时，它给了我错误“file.o：无法识别文件：无法识别文件格式”。我试过用 cygwin instread 来做，但同样的事情发生了。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T15:58:58.437

很可能您有一个链接器无法理解的格式的目标文件。有很多不同的格式：COFF、OMF、ELF（不胜枚举……）

幸运的是，有一个免费工具可以让您从一种格式转换为另一种格式。它还可以让您了解对象格式的内部结构，并告诉您对象文件以哪种格式编码。

[http://www.agner.org/optimize/#objconv](http://www.agner.org/optimize/#objconv)

那个小小的命令行实用程序解决了我曾经遇到的所有对象格式问题。它甚至可以反汇编库、目标文件、DLL 和可执行文件。

# apache-flex - 限制 Flex 中“PopUp”的模态大小？

> ID：773325
> 
> 赞同：0
> 
> 时间：2009-04-21T15:52:32.430
> 
> 标签：apache-flex, popup, canvas, modal-dialog

我有这个 ：

```
private function tileList_itemClick2(evt:ListEvent):void {
                img = new Image();
                    img.maintainAspectRatio = true;
                    img.addEventListener(Event.COMPLETE, image_complete);
                    img.addEventListener(ResizeEvent.RESIZE, image_resize);
                    img.addEventListener(MouseEvent.CLICK, image_click);           

                    img.source = "products/images/" + evt.itemRenderer.data.imgH;
                    img.setStyle("addedEffect", image_addedEffect);
                    img.setStyle("removedEffect", image_removedEffect);
                    PopUpManager.addPopUp(img, myCanvas, true); 
             } 
```

是否可以限制 myCanvas 内的模态（模型透明度颜色）？或者甚至在画布之外的其他东西里面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-23T12:00:46.077

当您单击其中一种产品时，例如：http: [//www.conforama.fr/webapp/wcs/stores/servlet/ambiance_10001_10051_-2](http://www.conforama.fr/webapp/wcs/stores/servlet/ambiance_10001_10051_-2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-08-25T14:03:34.783

我认为您想更改模态透明度。在样式表里面放了这段代码。

全球{模态透明度：0.0；模态透明度颜色：白色；模态透明度模糊：0；}

# streaming - 如何拦截高级 GDI 绘制命令？

> ID：773327
> 
> 赞同：1
> 
> 时间：2009-04-21T15:53:05.003
> 
> 标签：streaming, drawing, gdi, internals

我正在尝试制作一个允许远程访问其他应用程序（在不同机器上运行）的应用程序。这个想法是让用户透明地访问某些应用程序，我基本上有两个选择：

*   应用程序流
*   拦截绘图命令并在客户端重现它们

（当然，输入是从客户端重定向到服务器的）

我有一个带有应用程序流的工作版本，但我不知道如何通过挂钩 Win API 来做到这一点......

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T16:06:46.483

您所描述的内容听起来很像 Windows 元文件。元文件将所有 GDI 绘图命令捕获到一个文件中；然后可以将该文件传递到远程 PC 并在那里呈现。

对于初学者，请参阅[CreateEnhMetaFile 。](http://msdn.microsoft.com/en-us/library/dd183498(VS.85).aspx)这将返回设备上下文的句柄，您可以绘制到该设备上下文，而不是绘制到正常的屏幕设备上下文。

# gravatar - 如何更改 gravatar RoR 插件以使用 d=identicon？

> ID：773339
> 
> 赞同：0
> 
> 时间：2009-04-21T15:55:24.110
> 
> 标签：gravatar

我正在使用 Ruby on Rails 的 gravatar 插件，效果很好，由 woods 通过 github 提供——但我想更改 URL 以添加 d=identicon 的选项，但我在帮助选项中没有看到。

我能得到一些帮助吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T16:01:17.217

```
<%= gravatar_for @user, :default=>'identicon' %> 
```

# html - 你能提供解析HTML的例子吗？

> ID：773340
> 
> 赞同：69
> 
> 时间：2009-04-21T15:55:37.323
> 
> 标签：html, language-agnostic, html-parsing

如何用多种语言和解析库解析 HTML？

* * *

回答时：

个别评论将链接到有关如何使用正则表达式解析 HTML 的问题的答案中，以显示正确的做事方式。

为了保持一致性，我要求该示例为`href`in 锚标记解析 HTML 文件。为了便于搜索此问题，我要求您遵循此格式

语言：[语言名称]

图书馆：[图书馆名称]

```
[example code] 
```

请将图书馆作为图书馆文档的链接。如果您想提供除提取链接以外的示例，还请包括：

目的：[解析的作用]

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2009-04-21T18:35:34.177

语言：[JavaScript](http://en.wikipedia.org/wiki/JavaScript)
库：[jQuery](http://jquery.com/)

```
$.each($('a[href]'), function(){
    console.debug(this.href);
}); 
```

（使用 firebug console.debug 输出...）

并加载任何 html 页面：

```
$.get('http://stackoverflow.com/', function(page){
     $(page).find('a[href]').each(function(){
        console.debug(this.href);
    });
}); 
```

为这个函数使用了另一个每个函数，我认为链接方法时它更干净。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2009-04-21T17:47:17.973

语言：C#
库：[HtmlAgilityPack](http://www.codeplex.com/htmlagilitypack)

```
class Program
{
    static void Main(string[] args)
    {
        var web = new HtmlWeb();
        var doc = web.Load("http://www.stackoverflow.com");

        var nodes = doc.DocumentNode.SelectNodes("//a[@href]");

        foreach (var node in nodes)
        {
            Console.WriteLine(node.InnerHtml);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2009-04-21T16:50:32.620

语言：Python
库：[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)

```
from BeautifulSoup import BeautifulSoup

html = "<html><body>"
for link in ("foo", "bar", "baz"):
    html += '<a href="http://%s.com">%s</a>' % (link, link)
html += "</body></html>"

soup = BeautifulSoup(html)
links = soup.findAll('a', href=True) # find <a> with a defined href attribute
print links 
```

输出：

```
[<a href="http://foo.com">foo</a>,
 <a href="http://bar.com">bar</a>,
 <a href="http://baz.com">baz</a>] 
```

也可以：

```
for link in links:
    print link['href'] 
```

输出：

```
http://foo.com
http://bar.com
http://baz.com 
```

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2009-04-21T20:56:59.487

语言：Perl
库：[pQuery](http://search.cpan.org/dist/pQuery/)

```
use strict;
use warnings;
use pQuery;

my $html = join '',
    "<html><body>",
    (map { qq(<a href="http://$_.com">$_</a>) } qw/foo bar baz/),
    "</body></html>";

pQuery( $html )->find( 'a' )->each(
    sub {  
        my $at = $_->getAttribute( 'href' ); 
        print "$at\n" if defined $at;
    }
); 
```

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2009-04-21T16:45:24.410

语言：shell
库：[lynx](http://lynx.isc.org/lynx2.8.6/lynx2-8-6/lynx_help/Lynx_users_guide.html)（嗯，它不是库，但在 shell 中，每个程序都是某种库）

```
lynx -dump -listonly http://news.google.com/ 
```

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2009-04-21T16:16:13.373

语言：Ruby
库：[Hpricot](http://wiki.github.com/why/hpricot/an-hpricot-showcase)

```
#!/usr/bin/ruby

require 'hpricot'

html = '<html><body>'
['foo', 'bar', 'baz'].each {|link| html += "<a href=\"http://#{link}.com\">#{link}</a>" }
html += '</body></html>'

doc = Hpricot(html)
doc.search('//a').each {|elm| puts elm.attributes['href'] } 
```

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2009-04-21T15:56:16.430

语言：Python
库：[HTMLParser](http://docs.python.org/library/htmlparser.html)

```
#!/usr/bin/python

from HTMLParser import HTMLParser

class FindLinks(HTMLParser):
    def __init__(self):
        HTMLParser.__init__(self)

    def handle_starttag(self, tag, attrs):
        at = dict(attrs)
        if tag == 'a' and 'href' in at:
            print at['href']

find = FindLinks()

html = "<html><body>"
for link in ("foo", "bar", "baz"):
    html += '<a href="http://%s.com">%s</a>' % (link, link)
html += "</body></html>"

find.feed(html) 
```

* * *

## 回答 #8

> 赞同：11
> 
> 时间：2009-04-21T16:10:33.933

语言：Perl
库：[HTML::Parser](http://search.cpan.org/dist/HTML-Parser/Parser.pm)

```
#!/usr/bin/perl

use strict;
use warnings;

use HTML::Parser;

my $find_links = HTML::Parser->new(
    start_h => [
        sub {
            my ($tag, $attr) = @_;
            if ($tag eq 'a' and exists $attr->{href}) {
                print "$attr->{href}\n";
            }
        }, 
        "tag, attr"
    ]
);

my $html = join '',
    "<html><body>",
    (map { qq(<a href="http://$_.com">$_</a>) } qw/foo bar baz/),
    "</body></html>";

$find_links->parse($html); 
```

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2009-04-21T17:01:21.750

语言 Perl
库：[HTML::LinkExtor](http://search.cpan.org/~gaas/HTML-Parser-3.60/lib/HTML/LinkExtor.pm)

Perl 的美妙之处在于您拥有用于非常特定任务的模块。就像链接提取一样。

整个程序：

```
#!/usr/bin/perl -w
use strict;

use HTML::LinkExtor;
use LWP::Simple;

my $url     = 'http://www.google.com/';
my $content = get( $url );

my $p       = HTML::LinkExtor->new( \&process_link, $url, );
$p->parse( $content );

exit;

sub process_link {
    my ( $tag, %attr ) = @_;

    return unless $tag eq 'a';
    return unless defined $attr{ 'href' };

    print "- $attr{'href'}\n";
    return;
} 
```

解释：

*   使用严格 - 打开“严格”模式 - 简化潜在的调试，与示例不完全相关
*   使用 HTML::LinkExtor - 加载有趣的模块
*   使用 LWP::Simple - 只是获取一些用于测试的 html 的简单方法
*   my $url = ' [http://www.google.com/](http://www.google.com/) ' - 我们将从哪个页面提取 url
*   我的 $content = get( $url ) - 获取页面 html
*   我的 $p = HTML::LinkExtor->new( \&process_link, $url ) - 创建 LinkExtor 对象，给它引用将用作每个 url 上的回调的函数，并将 $url 用作相对 url 的 BASEURL
*   $p->parse( $content ) - 我猜很明显
*   exit - 程序结束
*   sub process_link - 函数 process_link 的开始
*   my ($tag, %attr) - 获取参数，即标签名称及其属性
*   return unless $tag eq 'a' - 如果标签不是 <a> 则跳过处理
*   返回，除非定义 $attr{'href'} - 如果 <a> 标签没有 href 属性，则跳过处理
*   打印 "- $attr{'href'}\n"; - 我猜很明显:)
*   返回; - 完成功能

就这样。

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2009-04-28T05:57:52.710

语言：Common Lisp
库：[Closure Html](http://common-lisp.net/project/closure/closure-html) , [Closure Xml](http://common-lisp.net/project/cxml/)、[CL-WHO](http://www.weitz.de/cl-who/)

（使用 DOM API 显示，不使用 XPATH 或 STP API）

```
(defvar *html*
  (who:with-html-output-to-string (stream)
    (:html
     (:body (loop
               for site in (list "foo" "bar" "baz")
               do (who:htm (:a :href (format nil "http://~A.com/" site))))))))

(defvar *dom*
  (chtml:parse *html* (cxml-dom:make-dom-builder)))

(loop
   for tag across (dom:get-elements-by-tag-name *dom* "a")
   collect (dom:get-attribute tag "href"))
=> 
("http://foo.com/" "http://bar.com/" "http://baz.com/") 
```

* * *

## 回答 #11

> 赞同：8
> 
> 时间：2009-04-21T21:01:32.767

语言：Ruby
库：[Nokogiri](http://nokogiri.rubyforge.org/nokogiri/)

```
#!/usr/bin/env ruby
require 'nokogiri'
require 'open-uri'

document = Nokogiri::HTML(open("http://google.com"))
document.css("html head title").first.content
=> "Google"
document.xpath("//title").first.content
=> "Google" 
```

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2010-03-05T19:01:26.917

语言：[Clojure](http://clojure.org/)
库： [Enlive](http://github.com/cgrand/enlive/)（一个基于选择器（à la CSS）的 Clojure 模板和转换系统）

* * *

选择器表达式：

```
(def test-select
     (html/select (html/html-resource (java.io.StringReader. test-html)) [:a])) 
```

现在我们可以在 REPL 中执行以下操作（我在 中添加了换行符`test-select`）：

```
user> test-select
({:tag :a, :attrs {:href "http://foo.com/"}, :content ["foo"]}
 {:tag :a, :attrs {:href "http://bar.com/"}, :content ["bar"]}
 {:tag :a, :attrs {:href "http://baz.com/"}, :content ["baz"]})
user> (map #(get-in % [:attrs :href]) test-select)
("http://foo.com/" "http://bar.com/" "http://baz.com/") 
```

* * *

您需要以下内容才能试用：

前言：

```
(require '[net.cgrand.enlive-html :as html]) 
```

测试 HTML：

```
(def test-html
     (apply str (concat ["<html><body>"]
                        (for [link ["foo" "bar" "baz"]]
                          (str "<a href=\"http://" link ".com/\">" link "</a>"))
                        ["</body></html>"]))) 
```

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2009-04-21T20:47:53.970

语言：Java
库：[XOM](http://www.xom.nu "XOM") , [TagSoup](http://home.ccil.org/~cowan/XML/tagsoup/ "标签汤")

我在此示例中故意包含了格式错误且不一致的 XML。

```
import java.io.IOException;

import nu.xom.Builder;
import nu.xom.Document;
import nu.xom.Element;
import nu.xom.Node;
import nu.xom.Nodes;
import nu.xom.ParsingException;
import nu.xom.ValidityException;

import org.ccil.cowan.tagsoup.Parser;
import org.xml.sax.SAXException;

public class HtmlTest {
    public static void main(final String[] args) throws SAXException, ValidityException, ParsingException, IOException {
        final Parser parser = new Parser();
        parser.setFeature(Parser.namespacesFeature, false);
        final Builder builder = new Builder(parser);
        final Document document = builder.build("<html><body><ul><li><a href=\"http://google.com\">google</li><li><a HREF=\"http://reddit.org\" target=\"_blank\">reddit</a></li><li><a name=\"nothing\">nothing</a><li></ul></body></html>", null);
        final Element root = document.getRootElement();
        final Nodes links = root.query("//a[@href]");
        for (int linkNumber = 0; linkNumber < links.size(); ++linkNumber) {
            final Node node = links.get(linkNumber);
            System.out.println(((Element) node).getAttributeValue("href"));
        }
    }
} 
```

默认情况下，TagSoup 将引用 XHTML 的 XML 命名空间添加到文档中。我选择在这个示例中抑制它。使用默认行为将要求调用`root.query`包含一个命名空间，如下所示：

```
root.query("//xhtml:a[@href]", new nu.xom.XPathContext("xhtml", root.getNamespaceURI()) 
```

* * *

## 回答 #14

> 赞同：5
> 
> 时间：2009-04-21T16:31:44.303

语言：Perl
库：[XML::Twig](http://search.cpan.org/dist/XML-Twig/Twig.pm)

```
#!/usr/bin/perl
use strict;
use warnings;
use Encode ':all';

use LWP::Simple;
use XML::Twig;

#my $url = 'http://stackoverflow.com/questions/773340/can-you-provide-an-example-of-parsing-html-with-your-favorite-parser';
my $url = 'http://www.google.com';
my $content = get($url);
die "Couldn't fetch!" unless defined $content;

my $twig = XML::Twig->new();
$twig->parse_html($content);

my @hrefs = map {
    $_->att('href');
} $twig->get_xpath('//*[@href]');

print "$_\n" for @hrefs; 
```

警告：像这样的页面可能会出现宽字符错误（将 url 更改为被注释掉的页面会出现此错误），但上面的 HTML::Parser 解决方案不存在此问题。

* * *

## 回答 #15

> 赞同：5
> 
> 时间：2009-04-21T16:51:23.880

语言：Perl
库：[HTML::Parser](http://search.cpan.org/dist/HTML-Parser/Parser.pm)
目的：[如何使用 Perl 正则表达式删除未使用的嵌套 HTML span 标签？](https://stackoverflow.com/questions/667130/how-can-i-remove-unused-nested-html-span-tags-with-a-perl-regex/667425#667425)

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2009-04-21T18:37:35.310

语言：C#
库：[System.XML](http://msdn.microsoft.com/en-us/library/system.xml(VS.80).aspx)（标准 .NET）

```
using System.Collections.Generic;
using System.Xml;

public static void Main(string[] args)
{
    List<string> matches = new List<string>();

    XmlDocument xd = new XmlDocument();
    xd.LoadXml("<html>...</html>");

    FindHrefs(xd.FirstChild, matches);
}

static void FindHrefs(XmlNode xn, List<string> matches)
{
    if (xn.Attributes != null && xn.Attributes["href"] != null)
        matches.Add(xn.Attributes["href"].InnerXml);

    foreach (XmlNode child in xn.ChildNodes)
        FindHrefs(child, matches);
} 
```

* * *

## 回答 #17

> 赞同：4
> 
> 时间：2009-04-21T22:08:02.870

语言：PHP
库：[SimpleXML](http://us2.php.net/simplexml)（和 DOM）

```
<?php
$page = new DOMDocument();
$page->strictErrorChecking = false;
$page->loadHTMLFile('http://stackoverflow.com/questions/773340');
$xml = simplexml_import_dom($page);

$links = $xml->xpath('//a[@href]');
foreach($links as $link)
    echo $link['href']."\n"; 
```

* * *

## 回答 #18

> 赞同：4
> 
> 时间：2011-10-06T19:22:19.480

语言：[球拍](http://racket-lang.org)

库：[(planet ashinn/html-parser:1)](http://planet.racket-lang.org/display.ss?package=html-parser.plt&owner=ashinn)和[(planet clements/sxml2:1)](http://planet.racket-lang.org/display.ss?package=sxml2.plt&owner=clements)

```
(require net/url
         (planet ashinn/html-parser:1)
         (planet clements/sxml2:1))

(define the-url (string->url "http://stackoverflow.com/"))
(define doc (call/input-url the-url get-pure-port html->sxml))
(define links ((sxpath "//a/@href/text()") doc)) 
```

以上示例使用来自新包系统的包：[html-parsing](http://planet.racket-lang.org/display.ss?package=sxml2.plt&owner=clements)和[sxml](http://planet.racket-lang.org/display.ss?package=sxml2.plt&owner=clements)

```
(require net/url
         html-parsing
         sxml)

(define the-url (string->url "http://stackoverflow.com/"))
(define doc (call/input-url the-url get-pure-port html->xexp))
(define links ((sxpath "//a/@href/text()") doc)) 
```

注意：从命令行使用“raco”安装所需的软件包，其中：

```
raco pkg install html-parsing 
```

和：

```
raco pkg install sxml 
```

* * *

## 回答 #19

> 赞同：4
> 
> 时间：2009-04-21T18:17:17.280

语言：[JavaScript](http://en.wikipedia.org/wiki/JavaScript)
库：[DOM](http://www.w3.org/DOM/)

```
var links = document.links;
for(var i in links){
    var href = links[i].href;
    if(href != null) console.debug(href);
} 
```

（使用 firebug console.debug 输出...）

* * *

## 回答 #20

> 赞同：3
> 
> 时间：2009-04-21T23:00:01.513

语言：[Objective-C](http://en.wikipedia.org/wiki/Objective-C)
库：[libxml2](http://www.xmlsoft.org/) + [Matt Gallagher 的 libxml2 包装器](http://cocoawithlove.com/2008/10/using-libxml2-for-parsing-and-xpath.html)+ [Ben Copsey 的 ASIHTTPRequest](http://allseeing-i.com/ASIHTTPRequest-CFNetwork-wrapper-for-HTTP-requests)

```
ASIHTTPRequest *request = [ASIHTTPRequest alloc] initWithURL:[NSURL URLWithString:@"http://stackoverflow.com/questions/773340"];
[request start];
NSError *error = [request error];
if (!error) {
    NSData *response = [request responseData];
    NSLog(@"Data: %@", [[self query:@"//a[@href]" withResponse:response] description]);
    [request release];
}
else 
    @throw [NSException exceptionWithName:@"kMyHTTPRequestFailed" reason:@"Request failed!" userInfo:nil];

...

- (id) query:(NSString *)xpathQuery WithResponse:(NSData *)resp {
    NSArray *nodes = PerformHTMLXPathQuery(resp, xpathQuery);
    if (nodes != nil)
        return nodes;
    return nil;
} 
```

* * *

## 回答 #21

> 赞同：3
> 
> 时间：2009-04-21T21:53:22.640

语言：Perl
库：[HTML::TreeBuilder](http://search.cpan.org/~petek/HTML-Tree-3.23/)

```
use strict;
use HTML::TreeBuilder;
use LWP::Simple;

my $content = get 'http://www.stackoverflow.com';
my $document = HTML::TreeBuilder->new->parse($content)->eof;

for my $a ($document->find('a')) {
    print $a->attr('href'), "\n" if $a->attr('href');
} 
```

* * *

## 回答 #22

> 赞同：3
> 
> 时间：2009-04-21T18:53:56.800

语言：Python
库：[lxml.html](http://codespeak.net/lxml/lxmlhtml.html)

```
import lxml.html

html = "<html><body>"
for link in ("foo", "bar", "baz"):
    html += '<a href="http://%s.com">%s</a>' % (link, link)
html += "</body></html>"

tree = lxml.html.document_fromstring(html)
for element, attribute, link, pos in tree.iterlinks():
    if attribute == "href":
        print link 
```

lxml 还有一个用于遍历 DOM 的 CSS 选择器类，这使得使用它与使用 JQuery 非常相似：

```
for a in tree.cssselect('a[href]'):
    print a.get('href') 
```

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2010-10-28T18:52:58.587

语言：PHP 库：DOM

```
<?php
$doc = new DOMDocument();
$doc->strictErrorChecking = false;
$doc->loadHTMLFile('http://stackoverflow.com/questions/773340');
$xpath = new DOMXpath($doc);

$links = $xpath->query('//a[@href]');
for ($i = 0; $i < $links->length; $i++)
    echo $links->item($i)->getAttribute('href'), "\n"; 
```

`@`有时将符号放在前面`$doc->loadHTMLFile`以抑制无效的 html 解析警告很有用

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2011-03-25T03:03:22.647

语言：[Python](http://en.wikipedia.org/wiki/Python)
库：[HTQL](http://htql.net/)

```
import htql; 

page="<a href=a.html>1</a><a href=b.html>2</a><a href=c.html>3</a>";
query="<a>:href,tx";

for url, text in htql.HTQL(page, query): 
    print url, text; 
```

简单直观。

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2012-01-07T07:57:33.683

语言：Ruby
库：[Nokogiri](http://nokogiri.org)

```
#!/usr/bin/env ruby

require "nokogiri"
require "open-uri"

doc = Nokogiri::HTML(open('http://www.example.com'))
hrefs = doc.search('a').map{ |n| n['href'] }

puts hrefs 
```

哪个输出：

```
/
/domains/
/numbers/
/protocols/
/about/
/go/rfc2606
/about/
/about/presentations/
/about/performance/
/reports/
/domains/
/domains/root/
/domains/int/
/domains/arpa/
/domains/idn-tables/
/protocols/
/numbers/
/abuse/
http://www.icann.org/
mailto:iana@iana.org?subject=General%20website%20feedback 
```

* * *

这是对上述内容的一个小改动，产生可用于报告的输出。我只返回 href 列表中的第一个和最后一个元素：

```
#!/usr/bin/env ruby

require "nokogiri"
require "open-uri"

doc = Nokogiri::HTML(open('http://nokogiri.org'))
hrefs = doc.search('a[href]').map{ |n| n['href'] }

puts hrefs
  .each_with_index                     # add an array index
  .minmax{ |a,b| a.last <=> b.last }   # find the first and last element
  .map{ |h,i| '%3d %s' % [1 + i, h ] } # format the output

  1 http://github.com/tenderlove/nokogiri
100 http://yokolet.blogspot.com 
```

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2011-08-02T20:24:53.297

语言：Java
库：[jsoup](http://jsoup.org)

```
import java.io.IOException;

import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;
import org.xml.sax.SAXException;

public class HtmlTest {
    public static void main(final String[] args) throws SAXException, ValidityException, ParsingException, IOException {
        final Document document = Jsoup.parse("<html><body><ul><li><a href=\"http://google.com\">google</li><li><a HREF=\"http://reddit.org\" target=\"_blank\">reddit</a></li><li><a name=\"nothing\">nothing</a><li></ul></body></html>");
        final Elements links = document.select("a[href]");
        for (final Element element : links) {
            System.out.println(element.attr("href"));
        }
    }
} 
```

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2012-03-22T18:32:59.443

使用 phantomjs，将此文件另存为 extract-links.js：

```
var page = new WebPage(),
    url = 'http://www.udacity.com';

page.open(url, function (status) {
    if (status !== 'success') {
        console.log('Unable to access network');
    } else {
        var results = page.evaluate(function() {
            var list = document.querySelectorAll('a'), links = [], i;
            for (i = 0; i < list.length; i++) {
                links.push(list[i].href);
            }
            return links;
        });
        console.log(results.join('\n'));
    }
    phantom.exit();
}); 
```

跑：

```
$ ../path/to/bin/phantomjs extract-links.js 
```

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2014-01-09T15:10:43.297

语言：Coldfusion 9.0.1+

图书馆： [jSoup](http://jsoup.org/cookbook/extracting-data/attributes-text-html)

```
<cfscript>
function parseURL(required string url){
var res = [];
var javaLoader = createObject("javaloader.JavaLoader").init([expandPath("./jsoup-1.7.3.jar")]);
var jSoupClass = javaLoader.create("org.jsoup.Jsoup");
//var dom = jSoupClass.parse(html); // if you already have some html to parse.
var dom = jSoupClass.connect( arguments.url ).get();
var links = dom.select("a");
for(var a=1;a LT arrayLen(links);a++){
    var s={};s.href= links[a].attr('href'); s.text= links[a].text(); 
    if(s.href contains "http://" || s.href contains "https://") arrayAppend(res,s); 
}
return res; 
}   

//writeoutput(writedump(parseURL(url)));
</cfscript>
<cfdump var="#parseURL("http://stackoverflow.com/questions/773340/can-you-provide-examples-of-parsing-html")#"> 
```

返回一个结构数组，每个结构包含一个 HREF 和 TEXT 对象。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2016-01-24T23:05:33.547

语言：JavaScript/Node.js

图书馆：[请求](https://github.com/request/request)和[Cheerio](https://github.com/cheeriojs/cheerio)

```
var request = require('request');
var cheerio = require('cheerio');

var url = "https://news.ycombinator.com/";
request(url, function (error, response, html) {
    if (!error && response.statusCode == 200) {
        var $ = cheerio.load(html);
        var anchorTags = $('a');

        anchorTags.each(function(i,element){
            console.log(element["attribs"]["href"]);
        });
    }
}); 
```

请求库下载 html 文档，而 Cheerio 允许您使用 jquery css 选择器来定位 html 文档。

# apache-flex - Flex：设置“服务器类型”……为什么？

> ID：773346
> 
> 赞同：0
> 
> 时间：2009-04-21T15:56:30.097
> 
> 标签：apache-flex

每当我创建一个新的 Flex 项目时，它总是问我“服务器类型”。到目前为止，我一直选中“无”，尽管我的服务器类型是 PHP，并且我通常访问 .php 脚本以从数据库获取信息，但未设置服务器类型就可以了。那么 server-type 是干什么用的呢？它对我有什么用？如果我能从中获得一些额外的好处，我想这样做。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-21T16:00:17.717

当您创建 Flex 应用程序时，系统会询问您服务器类型，以便 Flex 可以为您的应用程序服务器而不是 Web 服务器正确配置自己。仅当您的 Flex 应用程序将由应用程序服务器支持时。在您的情况下，您只是调用一些 PHP 脚本并且不需要完整的应用程序服务器支持。

# vim - 如何关闭 Vim 搜索突出显示

> ID：773348
> 
> 赞同：5
> 
> 时间：2009-04-21T15:56:46.617
> 
> 标签：vim

我在〜/下有一个预先配置的.vimrc文件，通过'/'键搜索一个术语后，所有匹配的项目都会突出显示，但是在我找到需要的位置并按Enter后，突出显示的术语仍然突出显示......它是非常令人失望，因为当我发出 --c/"-- 时，屏幕被高亮显示。哪个设置控制搜索高亮显示功能？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-21T15:59:16.347

您可以发出`:nohl`关闭突出显示，直到下一次搜索。我建议将其映射到一个键。

```
:map <F4> :nohl<CR> 
```

如果您想永远关闭突出显示，`:se nohlsearch`请在您的 .vimrc中使用

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-21T15:58:37.830

如果您键入“ `:nohls<enter>`”，它将关闭搜索突出显示。（下次搜索时会高亮显示，这不是永久设置。对于关闭当前搜索的高亮显示很有用。）

不确定这是否是您要找的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-21T16:02:46.073

[Vim 清除上次搜索突出显示](https://stackoverflow.com/questions/657447/vim-clear-last-search)

# java - java中的bean合并

> ID：773349
> 
> 赞同：1
> 
> 时间：2009-04-21T15:57:21.077
> 
> 标签：java, xml, merge, javabeans

我有一个 Jibx bean，它用作 Web 服务的输入和输出。bean 很大很复杂，父子关系很深。Web 服务不返回请求对象，而是返回一个填充了一些属性的新 bean。我想合并我的请求和响应。我尝试使用 Dozer（它只是将我的请求对象替换为响应，即原始请求属性丢失！BeanUtils.copyProperties 同上）。对象图太大太深，无法对所有属性进行 isNull 检查。

我已经考虑将 bean 转换为 XML 并使用 EL4J XML Merge 合并它们任何其他建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T16:01:12.067

通过“太大太深而无法进行 isNull 检查”，我假设您不想对这些检查进行硬编码。你也不应该。

然而，bean 的美妙之处在于它们可以被检查，你可以编写一个自动检查来检查对象图，检查是否为空，如果没有则更新。

是的，这是 CPU 密集型的。但肯定不会比生成 XML 并尝试合并它更占用 CPU。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-04T14:53:16.707

由于对象是 bean，为什么不将 bean 与请求相关联，并且在回复时使用请求 bean？我不提倡将可能只是接口对象的对象推入系统深处，而是保持请求 bean 并使其成为响应 bean。

我也不确定我对深度参数的理解是什么，但是如果输入布局意味着填充响应的逻辑很复杂，您可能需要在计算属性之前构建响应填充代码：因为系统正在确定哪个计算它的属性还可以建立一个策略，将这些属性放回响应 bean。这可能与策略模式一样简单，在更复杂的情况下，您可能会考虑使用字节码修改库。

另一种方法是简化您的界面，使 XML 中的属性相似并删除“深度”：使所有属性相似，然后允许使用简单的循环来管理属性检查和填充。

转换为 XML 在某种程度上破坏了对象首先使用框架。也许，如果 XML 更简单，Jibx 并不是解决问题的最简单方法。你能在你的规范中改变什么？

# c# - 如何使用 MS Office Access 2007 进行 SOAP(ASMX) 调用？

> ID：773353
> 
> 赞同：0
> 
> 时间：2009-04-21T15:59:11.480
> 
> 标签：c#, web-services, ms-access, soap, asmx

我有一组公开的 .ASMX API 调用，并且有一个希望使用 MS Office Access 2007 调用它们的客户端。我以前从未使用过 Access，需要知道如何连接到我的服务。实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-21T16:13:10.323

MSDN 上的这篇文章介绍了如何为执行 Web 服务调用的 Access 2007 创建托管插件：

[为 Access 2007 创建托管加载项](http://msdn.microsoft.com/en-us/library/aa902693(loband).aspx)

# asp.net - 通过 ASP.NET 中的属性将对象置于会话中

> ID：773355
> 
> 赞同：1
> 
> 时间：2009-04-21T15:59:19.077
> 
> 标签：asp.net, session, serialization

这似乎是一个坏主意，但我不知道为什么：

我有一个类 cXYZ，它具有属性 A、B 和 C。它还有一个从数据库加载这三个属性的方法“sGetData”和一个将其保存回来的方法“sSaveData”。

```
class cXYZ

  public property A as string...
  public property B as string...
  public property B as string..

  public sub sGetData()...
  public sub sSaveData()...

end class 
```

网络表单具有以下属性：

```
private property xyz() as cXYZ
get
    return session("myXYZ")
end get
set (value as cXYZ)
    session("myXYZ")=value
end set
end property 
```

以及以下事件：

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

if not ispostback() then
    xyz=new cXYZ()
end if

end sub

Protected Sub ButtonLoad_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles ButtonLoad.Click

   //Can now reference the class
  txtA.text=xyz.A
  txtB.text=xyz.B
  txtC.text=xyz.C

end sub

 Protected Sub ButtonSave_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles ButtonSave.Click

  //Can now reference the class
  xyz.A=txtA.text
  xyz.B=txtA.text
  xyz.C=txtC.text

  xyz.sSaveData()

end sub 
```

我可以看到对每个属性引用进行序列化/反序列化的一些开销 - 这样做可能值得：

```
 Protected Sub ButtonSave_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles ButtonSave.Click

  dim localxyz as cXYZ=xyz

  localxyz .A=txtA.text
  localxyz .B=txtA.text
  localxyz .C=txtC.text

  xyz=localxyz

end sub 
```

除此之外，关于为什么这是好还是坏的看法？该类并不大，它保持表单状态。网络表单很烂，等等不是很有用..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-21T16:16:37.227

我觉得还可以。我会额外保留一个变量来存储对象以提高性能。

像这样的东西：

```
private _xyz as cXYZ = nothing 
private property xyz() as cXYZ 
   get
      if not _xyz is nothing then 
         return _xyz
      else
         return session("myXYZ")
      end if 
   end get 
   set (value as cXYZ)
      _xyz = value
      session("myXYZ")=value 
   end set
end property 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T16:24:46.067

我会改进一点：

```
 private _xyz as cXYZ = nothing 

 private property xyz() as cXYZ 
   get
      if _xyz is nothing then _xyz = TryCast(session("myXYZ"), cXYZ)
      return _xyz
   end get 
   set (value as cXYZ)
      _xyz = value
      session("myXYZ")=_xyz 
   end set
end property 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T16:29:36.413

只要您的对象是可序列化的，您就可以了。

只是不要在您的会话中持有任何非托管对象引用 - 否则一旦您从“进行中”会话状态转移到网络场，您就会遇到麻烦。

# sharepoint - 如何使用 Sharepoint 中的团队定义部署程序集？

> ID：773369
> 
> 赞同：1
> 
> 时间：2009-04-21T16:02:51.347
> 
> 标签：sharepoint, sharepoint-2007

现在我正在使用 Visual Studio 2005 的 sharepoint extensions 1.2 来部署我的网站。我想将一个程序集添加到 bin，但我不知道如何将它添加到团队定义中。

有人可以给一些代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-21T17:37:11.370

如果您的项目中有任何与 SharePoint 相关的代码（Web 部件、事件接收器等），则程序集将打包在生成的 WSP 中，并且您的解决方案清单将已经有将其放入 GAC 的指令。您需要它而不是 GAC 的任何特殊原因？可以这样做——阅读解决方案清单 XML 格式的文档——但需要从 WSP 视图手动操作解决方案清单，并且可能需要使用 WspBuilder 重新创建 WSP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T08:45:29.877

好的，我找到了解决方案。

首先，您必须将要部署的程序集添加到 VS 项目中。例如，您可以创建一个“libs”文件夹来存储您在团队站点中需要的所有外部程序集。

然后您必须编辑您的团队网站定义的 manifest.xml 文件。您可以在项目的“pkg”文件夹中找到此文件。请注意，pkg 文件夹仅在您至少部署过一次解决方案时才可用。

好的，现在您必须向团队定义解决方案的 manifest.xml 文件中的元素添加一个新的`<Assembly>`子元素。`<Assemblies>`使用“DeploymentTarget”属性，您可以定义程序集应该部署到 GAC 还是 Web 应用程序的 bin 文件夹。

以下示例显示了`<Assemblies>`如果要将“TeamSiteDefinition1.dll”添加到 GAC 并将“TestSolution.dll”添加到 bin 文件夹，元素的外观。如果您需要为您的程序集提供一个安全控制条目，您也可以添加该条目。

```
<Assemblies>
    <Assembly Location="TeamSiteDefinition1.dll" DeploymentTarget="GlobalAssemblyCache" />
    <Assembly Location="TestSolution.dll" DeploymentTarget="WebApplication">
       <SafeControls>
          <SafeControl ..... />
       </SafeControls>
    </Assembly>
</Assemblies> 
```

# ruby-on-rails - 我的在线商店可以通过 Gmail 同步发送订单确认电子邮件吗？

> ID：773375
> 
> 赞同：1
> 
> 时间：2009-04-21T16:05:05.303
> 
> 标签：ruby-on-rails, email, e-commerce

当用户在我的在线商店完成订单时，他会收到一封电子邮件确认。

目前，在我们授权用户的信用卡并且在我们向他显示确认消息之前（即同步），我们通过 Gmail（我们选择 sendmail 以提高便携性）发送这封电子邮件。

它在开发中运行良好，但**我想知道这是否会导致生产问题。是否需要让用户等待太久？多个同时连接的 Gmail 是否会给我们带来麻烦？还有其他一般注意事项吗？**

如果同步发送电子邮件**将**是一个问题，有人可以推荐一个异步解决方案（[ar_mailer](http://blog.segment7.net/articles/2006/08/15/ar_mailer)有什么好处吗？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T16:14:33.330

我能想到的主要问题是 Gmail 限制了您每天可以发送的电子邮件数量，因此如果您每天收到太多订单，它可能会中断。

正如他们所说 ：

> “为了打击垃圾邮件和防止滥用，如果您向超过 500 个收件人发送邮件或发送大量无法送达的邮件，Google 将暂时禁用您的帐户。如果您使用 POP 或 IMAP 客户端（Microsoft Outlook 或Apple Mail，例如），您一次只能向 100 人发送消息。您的帐户应在 24 小时内重新启用。”

[http://mail.google.com/support/bin/answer.py?hl=en&answer=22839](http://mail.google.com/support/bin/answer.py?hl=en&answer=22839)

我建议在您的服务器上使用 sendmail 以便更好地控制正在发生的事情并且不依赖于其他服务，尤其是当 sendmail 的设置并不复杂时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T16:16:17.913

互联网并不像某些人让你相信的那样有弹性，你和 GMail 之间的链接会在某个时候断开，或者 GMail 会离线，导致用户认为他们没有成功付款。

我会放置一些其他队列，sendmail 听起来可以接受，并且您现在不能为将来“可能”托管的位置创建您的站点。

瑞安

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T16:16:51.093

如果服务器在给用户任何反馈之前等待电子邮件发送，如果连接到邮件服务器时出现问题（超时、服务器停机等），用户请求也会超时，并且不会告诉他任何关于他的状态的信息顺序，所以我相信你真的应该异步执行此操作。此外，您应该检查 GMail 的 TOS 是否允许这样做。如果不是这种情况，您可以检查是否购买了他们的订阅之一。此外，您在给定时间范围内可以发送的外发电子邮件数量肯定是有限制的，因此如果您希望您的在线商店成功，您可能会达到该限制并遇到一些令人讨厌的问题。如果您不是自托管网站，

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-21T16:31:22.697

事实：Gmail 崩溃。不经常发生，但它会发生，你无法控制或测试它。

最简单的快速修复是启动一个单独的线程或派生一个子进程来发送电子邮件。是的，使用 Gmail 可能会出现问题，我真的没有关于替代品的意见。但从设计的角度来看，没有理由让用户等待该过程完成。

从测试的角度来看，这可能是代理模式可能派上用场的地方。您可能很容易直接调用 Gmail 来发送消息。让它更难。放入一个为您发送邮件的代理对象，您可以将其关闭（因为天堂知道您不能出于测试目的使 Gmail 崩溃）。只需关闭代理并尝试完成订单，即可让您的团队了解发生电子邮件故障时的情况。如果你是同步做的，那么其他海报这里提到的所有瘟疫都会抬起头来。如果您是异步执行的，您应该能够允许它静默失败（来自用户的

# sql-server - 如果数据库只允许存储过程，Linq to SQL/Entities 有什么大好处吗？

> ID：773376
> 
> 赞同：2
> 
> 时间：2009-04-21T16:05:08.673
> 
> 标签：sql-server, linq-to-sql

Linq to SQL 和 Linq to Entities 依赖于创建动态 SQL 来完成很多工作，特别是当您有类以某种方式表示数据库表时。但是，如果数据库不允许即席 SQL 查询并且一切都必须通过存储过程，如果开发人员必须预先编写所有 SP 来完成所有操作，我看不到使用 L2Q 或 L2E 的巨大价值工作并且知道这些是在应用程序的所有场景中使用的所有 SP。

视图可能会缓解这种情况，但如果创建视图需要 DBA 权限，那仍然很麻烦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T16:09:56.867

LINQ-to-SQL 的存储过程实现仍将返回您的实体对象；您无法通过创建动态 SQL 获得 L2S 提供的超难以置信的过滤功能，但您仍然可以使用扩展进行解析。

就像我说的，你仍然可以添加你的模式，当你的存储过程返回这些实体时，你已经得到了映射的对象关系。

我仍然认为它很方便:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T16:15:30.130

如果您仅限于存储过程，那么最好的选择是 Linq-to-Sql，如果您的目标是将类与存储过程中的结果集一对一地映射，那么它的效果相当好。

设计师肯定有一些怪癖，但一旦你弄清楚它们，它就可以很好地将结果集映射到类。

为 ORM 使用“存储过程”与使用 NHibernate 之类的工具并直接映射到您的表之间存在很大差异。

直接映射到表为您提供了所有很棒的东西，例如延迟加载和存储库模式。

[这](http://rauhski.blogspot.com/2009/01/data-access-with-linq-to-sql-part-1.html)是我关于使用存储过程设置 linq-to-sql 的博客文章，希望对您有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T18:17:28.417

如果我是您的 dba，我也不会允许通过任何类型的动态 SQL 进行访问。允许对表的直接权限是一种不好的做法，它使员工很容易进行欺诈或窃取敏感数据。LINQ2SQl 似乎也编写了低效的代码（至少我所看到的所有它编写的代码示例都是我不允许在我的数据库中使用的代码），并且对存储过程进行性能调整要容易得多。

感谢您有一个真正关心数据库安全性和性能的优秀 dba。

# internet-explorer - 使用 content-disposition: inline 提供的文件有时仍会提示下载

> ID：773385
> 
> 赞同：5
> 
> 时间：2009-04-21T16:07:57.183
> 
> 标签：internet-explorer, http, inline, content-disposition

我的主题行说明了我要问的大部分内容。我有一个以各种格式（HTML、CSV、TSV、Excel 等）输出报告的网站。只要有可能，我希望这些文件显示在浏览器中。为此，我设置了我的标题，以便“Content-Disposition”是“内联”。这与不同的文件类型非常不一致。似乎在 FF3 和 IE7 中，HTML 总是会自动打开内联。那讲得通。如果我使用 TSV，两个浏览器都会提示下载，因为它是我系统上的未知文件类型。这也是有道理的，这正是我想要的。然而，Excel 和 CSV 提供不同的行为。在 FF 中，两者总是提示下载或打开。如果我选择“打开”，它将在新窗口中打开。在 IE 中，两者*也*提示下载或打开——我不知道这个。我认为 Excel 文件会使用 Content-Disposition: inline 自动内联打开。如果我在 IE 中选择“打开”，它会在浏览器中内联打开。

有人可以解释意外的行为吗？这对我来说并不是一个真正的问题，但我的用户认为这是一个错误，所以我可以引用他们的权威来源会非常好。到目前为止，我发现的关于这个“问题”的唯一一件事是 Mozilla 论坛上的一篇关于自动打开内联如何是 IE 的安全漏洞之一的帖子……那是一篇旧帖子，所以也许它在 IE7 中被“修复”了吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-12-07T11:58:33.093

您可能已经解决了这个问题，但如果没有，我可能会有答案（对于未来有同样问题的人，这也让我发疯了！）

可以使用以下命令在客户端上覆盖此行为：

1.  转到 Windows 资源管理器
2.  选择工具 -> 文件夹选项
3.  选择“文件类型”选项卡
4.  查找扩展名“DOC”（或“PDF”等）
5.  选择“高级”</li>
6.  根据需要勾选/取消勾选“下载后确认打开”。

用于实现预览/下载功能的机制是通过使用“content-disposition”标头，通常使用 MimeType“application/”。这基本上告诉本地客户端使用指定的应用程序打开应用程序，但是应用程序的上述设置可以覆盖请求的传递格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T16:13:45.093

检查您的服务器是否为 CSV 和 Excel 文件提供正确的 MIME 类型。为了正确对待它们，即使是识别它们的类型并为它们提供文件类型处理程序/插件的浏览器也需要正确的 MIME 类型。

您可能希望两者的 MIME 类型为 application/vnd.ms-excel

如果您将这些作为常规文件与您的 Web 服务器一起提供，那么 Apache 中的相关设置是 mime.types 文件。

```
application/vnd.ms-excel xls csv 
```

如果您从应用程序中提供这些文件，那么您需要自己添加 Content-Type: application/vnd.ms-excel 标头。

请注意，对于某些用户，您可能永远无法使其按预期工作 - 例如，没有安装 Microsoft Office 的任何人，甚至是使用替代浏览器或弄乱其文件类型关联的任何人。

（为了您的兴趣，[本文](http://plone.org/documentation/how-to/csv-files-display-browser-window-inline-excel)描述了该过程 - 它恰好可以 Plone/Zope，但想法是相同的）。

# iphone - 将各种视图插入 UIScrollView

> ID：773386
> 
> 赞同：0
> 
> 时间：2009-04-21T16:07:58.430
> 
> 标签：iphone, cocoa

我们正在尝试为类似 RSS 的应用程序实现文章详细信息视图。窗口有一个 UIScrollView，其中包含一个 UITextView（它是标题）、一个 UIButton（它打开一个画廊）和一个 UIWebView（带有正文）。这个想法是所有这些元素一起滚动......

问题是，每当我们的身体超过 1000 像素高时，低于该标记的所有内容都会被截断。我们听说这是因为这是视图的最大高度，并且由于 Scroll 由顶部的 UIScrollView 处理，因此无法查看更下方的内容。

有人知道解决这个问题的方法吗？

谢谢！

---- 更新 1 ----

我们已经将正文分成 900 像素高的块，但是第一个之后的所有 webview 都没有显示内容......

```
UIScrollView *scroll=[[UIScrollView alloc] initWithFrame:[[UIScreen mainScreen] applicationFrame]];
[scroll setBackgroundColor:[UIColor whiteColor]];
[scroll setCanCancelContentTouches:NO];
scroll.clipsToBounds = NO;  
scroll.indicatorStyle = UIScrollViewIndicatorStyleBlack;

//Título
CGRect tit =CGRectMake(5.0f, 0.0f, 315.f, 50.0f);
UILabel *titulo=[[UILabel alloc] initWithFrame:tit];
titulo.text=[itemNew objectForKey:@"titulo"];   
titulo.numberOfLines = 2;
titulo.font=[UIFont fontWithName:@"Helvetica" size:16.0f];
titulo.textColor=[self getColor:@"00336E"];
[scroll addSubview:titulo];
[titulo release];   

//Entradilla
float altura_entradilla=calcLabel([itemNew objectForKey:@"entradilla"], [UIFont boldSystemFontOfSize:16], 50, 315.0f);
CGRect ent_frame = CGRectMake(5.0f, 50.0f, 315.0f,altura_entradilla );
UILabel *entradilla=[[UILabel alloc] initWithFrame:ent_frame];
entradilla.text=[itemNew objectForKey:@"entradilla"];
entradilla.numberOfLines=4;
entradilla.font=[UIFont fontWithName:@"Helvetica" size:17.0f];
entradilla.textColor=[UIColor blackColor];
[scroll addSubview:entradilla];
[entradilla release];

NSString *cuerpo=[itemNew objectForKey:@"cuerpo"];

[scroll setContentSize:CGSizeMake(320.0f,40000.0f)];
[scroll setScrollEnabled:YES];  

webView = [[UIWebView alloc] initWithFrame:CGRectMake(5.0f, altura_entradilla+50, 315.0f, 900)];    
[webView loadHTMLString:cuerpo baseURL: [NSURL fileURLWithPath:[[NSBundle mainBundle] resourcePath]]];  
webView.detectsPhoneNumbers=NO;
webView.delegate=self;
[webView setScalesPageToFit:NO];
[scroll addSubview:webView];

webView.backgroundColor=[UIColor blackColor];
webView.userInteractionEnabled=NO;
[webView release];

if (altura_webview>900) {
   UIWebView *webView2 = [[UIWebView alloc] initWithFrame:CGRectMake(5.0f, altura_entradilla+50+900, 315.0f, 900)]; 
   [webView2 loadHTMLString:cuerpo baseURL: [NSURL fileURLWithPath:[[NSBundle mainBundle] resourcePath]]];  
   webView2.detectsPhoneNumbers=NO;
   webView2.delegate=self;
   [webView2 setScalesPageToFit:NO];
   [scroll addSubview:webView2];
   webView2.backgroundColor=[UIColor yellowColor];
   webView2.userInteractionEnabled=NO;
   [webView2 release];
}

self.view=scroll; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T21:38:27.763

检查`contentSize`你的 UIScrollview。

我还没有听说过 1000 点限制（或者在我的应用程序中看到的更大视图）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-07-23T12:50:33.583

标记为答案的帖子在其最后一条评论中有一个链接。这就是这个问题的解决方案。我遇到了同样的问题，并调用 [[webView _documentView] _webCoreNeedsDisplay]; 在这 2 位代表中解决了它。干杯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T19:35:02.880

1.  使用多个 UIWebViews 作为正文

2.  您是否使用 loadHTMLString 向 webView 添加内容？试试 loadRequest 方法。使用loadRequest时1024px没有问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-03T07:05:51.343

我遇到了同样的问题，我阅读并尝试了该线程的一些提示，但既没有通过 loadHTMLString 加载内容，也没有使用 [_webView setNeedsDisplay] 并没有改变我的任何东西。（我应该尝试加载更多 UIWebViews，但我很懒：）

我使用滚动视图委托进行了快速而肮脏的修复，它成功了：

```
@interface ArticleViewController : UIViewController <UIScrollViewDelegate> 
```

然后在init中启动视图

```
_scrollView = [[UIScrollView alloc] initWithFrame:[[UIScreen mainScreen] applicationFrame]];
self.view = _scrollView;
_scrollView.delegate = self; 
```

并使用 delgate 的方法在 webView 出现时重绘它

```
- (void) scrollViewDidEndDragging: (UIScrollView *) scrollView willDecelerate: (BOOL) willDecelerate
{
    CGRect frame = _webView.frame;
    frame.size = CGSizeMake(frame.size.width, frame.size.height + 1);
    _webView.frame = frame;
}

- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView 
{
    CGRect frame = _webView.frame;
    frame.size = CGSizeMake(frame.size.width, frame.size.height + 1);
    _webView.frame = frame;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-06T09:04:28.200

当你说 ：

> 我们尝试将主体分解为几个 900 像素高的 webView，但第二个、第三个等被空白（您可以看到背景颜色，但看不到内容）...

在我看来，其他人也遇到过这个问题（我再也找不到帖子了），实际上 UIWebviews 似乎只使用了一个 HTML 解释器。这意味着如果一个 UIWebView 正在加载 HTML 内容，其他 UIWebView 将不会加载任何内容。

要解决这个问题，您需要使用 UIWebView 的委托方法：didFinishLoad，然后开始加载其他 webview。

请注意，我不确定我在说什么，因为我自己没有尝试过，但这可能是一个解决方案。

# database - 在存储过程中动态填充 Oracle 游标

> ID：773387
> 
> 赞同：2
> 
> 时间：2009-04-21T16:08:35.763
> 
> 标签：database, oracle, stored-procedures, oracle10g

我需要动态填充 Oracle 游标（Oracle 10g）。SQL 语句会根据从不同表和列中提取的输入值进行更改。我不想做的是必须维护一个临时表，每次执行 sproc 时我都会截断并加载该表。这是我目前正在做的事情，但如果有另一种选择，我将不胜感激：

**存储过程**

```
 PROCEDURE Get_Type_One_Polygon_Values(in_role VARCHAR2, rc_generic OUT SYS_REFCURSOR) as
BEGIN        

        execute immediate 'truncate table teamchk.temp_type_one_roles';

        execute immediate 'INSERT INTO TEAMCHK.TEMP_TYPE_ONE_ROLES ' || 
                          'SELECT ' || in_role || '_POLY_ID, ' || in_role || '_POLY_NAME ' ||      
                          'FROM TEAMCHK.' || in_role;        

        open rc_generic for                           
        select * from teamchk.temp_type_one_roles;

END; 
```

**温度表**

```
 CREATE TABLE TEAMCHK.TEMP_TYPE_ONE_ROLES
(
    ROLE_ID     NUMERIC(38,0),
    ROLE_NAME   VARCHAR2(75)        
); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-22T13:28:41.347

这很简单，您可以使用[动态游标](http://www.adp-gmbh.ch/ora/plsql/cursors/dynamic.html)...

```
create or replace PROCEDURE Get_Type_One_Polygon_Values
(in_role VARCHAR2, rc_generic OUT SYS_REFCURSOR) as
sql varchar2(100);
BEGIN        
            sql :='SELECT ' || in_role || '_POLY_ID, ' 
                 || in_role || '_POLY_NAME '
                 || 'FROM TEAMCHK.' || in_role;        

            open rc_generic for sql;
END; 
```

使用列别名 POLY_ID 和 POLY_NAME 在 refcursor 中统一它们可能是有益的。

# transactions - DAO 模式 - 交易适合哪里？

> ID：773393
> 
> 赞同：24
> 
> 时间：2009-04-21T16:09:27.570
> 
> 标签：transactions, dao

所以我已经完成了这个通用的 DAO 事情，从表面上看，它似乎没问题。它基本上是仿照 Hibernate 家伙的 CaveatEmptor 示例应用程序。

最重要的是，我有一个业务层……应用程序的核心。它完全不知道任何特定的 DAO 实现。

到目前为止，一切似乎都很好，直到我开始考虑交易。如果将事务留给客户端来实现，那么我究竟如何保持我在各层之间进行的良好分离？也就是说，我目前正在使用 Hibernate，我不太想将特定于 Hibernate 的事务添加到我的业务层代码中。

我可以使用开始、提交和回滚方法创建一个简单的事务接口，并将实现传递给我的业务层......但是......我不确定......

**所以这是一个挑战：你能为我推荐一种不使用 Spring（或 EJB，或任何其他附加框架）这个词的方法吗？**

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-04-21T17:25:37.230

我记得[Martin Fowler](http://books.google.com/books?id=FyWZt5DdvFkC&dq=martin+fowler+enterprise+pattern&printsec=frontcover&source=bn&hl=en&ei=qf_tSYzuMcjLjAfymKUQ&sa=X&oi=book_result&ct=result&resnum=5#PPT15,M1)建议在业务层保持对事务的控制，因为事务是一个业务问题。（如果您设计一个 BankAccount 类，则事务是域语言的一部分）。

您可以尝试在 .NET 中实现 TransactionScope，它的工作原理类似于

```
using (TransactionScope ts = new TransactionScope())
{
  ...
} 
```

它与（不完全是，但如果你是 Java 人，它对你来说更明确）是一样的

```
TransactionScope scope = new TransactionScope();
try
{
 ...
 scope.Commit();
}
catch(Exception ex)
{
  scope.Rollback();
  throw;
} 
```

要将您的业务层与任何 DAO 技术分离，您可以在您的领域语言中添加一个 TransactionFactory，它返回您使用 Commit 和 Rollback 方法定义的 ITransactionScope（一个接口）。这样，您的域层就不会绑定到您的 DAO 层，只有 TransactionFactory 的具体实现。

```
ITransactionScope scope = transactionFactory.CreateTransaction();
try
{
 ...
 scope.Commit();
}
catch(Exception ex)
{
  scope.Rollback();
  throw;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-09-21T12:06:11.077

在 Web 应用程序中，我划分事务的方法是利用 HTTP 请求/响应周期，其中每个原子业务操作在这些周期之一的范围内执行，在单个专用线程中。

无论使用什么 Web 框架（Struts、JSF、GWT 等），通常都存在一个可以执行事务划分的“接缝”。在 Struts 中，它可以是一个基本的 Action 类。在 GWT 中，它可以是一个基础 RemoteServiceImpl 类。

因此，使用该中心访问点打开事务（在允许执行特定于应用程序的代码之前），并在没有异常冒泡或回滚时通过提交终止它（在执行特定于应用程序的代码之后） .

我在一个大型复杂的商业 Web 应用程序中广泛应用了这种策略，并且证明效果很好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2011-03-10T04:42:58.070

也许现在回答有点晚了，但是如何为特定事务创建另一个类，它位于业务层和 dao 层之间？例如，如果来自 DAO 的方法 a() 和 b() 要在某个特定 foo() 业务方法的事务中运行，则创建类似 fooInTransaction() 的东西，它启动一个事务并调用 a() 和 b()它。业务方法 foo() 委托给它。

这将保持业务代码干净，并且可以通过重构来避免重复。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-21T16:31:10.483

过去，我将事务逻辑放在根 DAO 中，用于与模型中的对象层次结构匹配的 DAO 层次结构，这些对象层次结构代表系统中的单个实体实体。

即，如果你有一个有很多 Y 的 X，并且你想同时存储和检索 X 和它们的 Y 作为单个复合对象，那么你的 X 的 DAO 也应该调用 Y 的 DAO。然后你可以把围绕 X 的 DAO 中的 add() 和 update() 方法中的所有内容进行事务 - 甚至将 Y DAO 包设为私有以将其隐藏在您的主要业务逻辑中。即，而不是业务逻辑：

```
XDAO xDAO = new XDAO(conn);
xDAO.startTransaction();
boolean success = xDAO.add(x);
if (success)
    for (Y y : x.getYs()) {
        success = YDAO.add(y);
        if (!success) break;
    }
if (success)
    xDAO.commit();
else
    xDAO.rollback(); 
```

你只会有：

```
XDAO xDAO = new XDAO(conn);
xDAO.add(x); 
```

（具有该 DAO 内部的成功/提交/回滚逻辑）

但是，这并不能涵盖所有情况，您的情况可能会有所不同（例如，我的工作与 JDBC 一起使用，我不知道 Hibernate 是如何工作的，或者是否有可能）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-21T16:23:36.693

您有权认为该应用程序是协调事务的好地方，因为这允许组合由各种服务/管理器/或您想要调用它们的任何东西实现的更复杂的操作。

一个简单的解决方案是定义一个 ITransaction 接口，并使用某种类型的工厂或 DI 对您的应用程序隐藏实际的 ITransaction 实现者。我使用 nHibernate 在 .net 中像这样滚动我自己的，基本上我有一个基类，我的所有经理（在这种情况下，经理包含一组逻辑实体的业务逻辑，例如可能使用一个或多个存储库的成员资格、订单）。我的基类有一个 ITransaction BeginTransaction()，它根据配置文件动态创建一个类型。

然后这个类使用 nHibernate 的 Session 来开始和提交事务。

# c# - 如何在 c# 中仅显示 int 的一部分（例如切断信用卡号的一部分）

> ID：773396
> 
> 赞同：3
> 
> 时间：2009-04-21T16:09:59.707
> 
> 标签：c#

如果我有一个 int 的信用号，我只想在左边显示最后 4 个带有 * 的数字，我将如何在 C# 中执行此操作？

例如，4838382023831234 将显示为 *1234

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-04-21T16:13:00.057

如果是整数类型？

我在哪里

```
string maskedNumber = string.Format("*{0}", i % 10000) 
```

这将获得 10,000 的模数，它将返回 int 的最后四位数字

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-04-21T16:12:50.883

```
// assumes that ccNumber is actually a string
string hidden = "*" + ccNumber.Substring(ccNumber.Length - 4); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-21T16:12:35.067

```
string myCc = myCc.ToString().Substring(12).PadLeft(1, '*'); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-21T17:45:15.763

我不满意。

***binaryworrier***：请注意，如果您使用模数，您将获得更少的数字，例如 1234123412340001

***sshow***：请注意，如果您使用 substring(12)，您将获得更少的数字，例如 0000123412341234

解决方案是：

```
UInt64 ccNumber;
string s = ccNumber.ToString().Text.PadLeft(15, 'myString');
string last = "*"+s.Substring(s.Length-4); 
```

但从更抽象的角度来看，信用卡号实际上是一个数字吗？我想不是; 您更有可能想要逐位操作它而不是对其执行算术运算。您将 char[16] 转换为 UInt64 的优势将存储空间减少了 50%。别等了，75% - 愚蠢的两字节字符！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-21T17:28:29.860

信用卡号将溢出 int32 并且就像电话号码一样，考虑添加、减去或乘以信用卡号是没有任何意义的。字符串输入也可以处理格式，因为有些用户会写连字符。由于这些原因，将这些对象存储为字符串并为您实际打算对其执行算术运算的数据保留数值类型要好得多。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-21T16:24:49.843

如果数字存储为字符串，那么这将做到这一点

```
 string ccNumber = "4242424242424242";
    string modifiedCCNumber = "*" + ccNumber.Substring(ccNumber.Length - 4); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-11-09T16:03:40.383

```
string cardNo = "1234567890123456";
string maskedNo = "*" + cardNo.Substring(12,4); 
```

# c# - 如何以编程方式获取最小化应用程序的屏幕截图？

> ID：773398
> 
> 赞同：3
> 
> 时间：2009-04-21T16:10:00.580
> 
> 标签：c#, screenshot, minimize

我正在尝试获取最小化应用程序的屏幕截图，关于如何在 windows 下使用它的任何想法？我正在使用 C#

提前谢谢，何塞

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-21T16:19:40.417

还原、截屏、最小化...

如果它不在屏幕上，我看不出你如何制作图像的副本......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-21T16:46:35.733

在 Vista 和更高版本上，这应该可以通过桌面窗口管理器实现。当悬停在启用 DWM 的任务栏条目上时，资源管理器还会显示最小化窗口的（动画）屏幕截图，因此 DWM API 应该是要走的路。

出于好奇，你为什么需要这样的截图？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-07T20:22:42.743

这很简单。只需使用 printWindow Api 调用！

# ruby - Ruby：想要一个保持顺序的类似集合的对象

> ID：773403
> 
> 赞同：10
> 
> 时间：2009-04-21T16:11:07.970
> 
> 标签：ruby, arrays, set

...或者一个防止重复条目的数组。

Ruby中是否有某种对象：

*   响应 []、[]= 和 <<
*   静默删除重复条目
*   是可枚举的（或至少支持 find_all）
*   保留插入条目的顺序

?

据我所知，数组支持点 1、3 和 4；而 Set 支持 1、2 和 3（但不支持 4）。并且 SortedSet 不会这样做，因为我的条目没有实现 <=>。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-22T21:47:13.510

从 Ruby 1.9 开始，内置`Hash`对象保留了插入顺序。例如：

```
h = {}
h[:z] = 1
h[:b] = 2
h[:a] = 3
h[:x] = 0
p h.keys     #=> [:z, :b, :a, :x]

h.delete :b
p h.keys     #=> [:z, :a, :x]

h[:b] = 1
p h.keys     #=> [:z, :a, :x, :b] 
```

因此，您可以为任何键设置任何值（如简单的`true`），您现在有了一个有序集。您可以使用其中一个来测试密钥，`h.key?(obj)`或者，如果您始终将每个密钥设置为具有真实值，则只需`h[obj]`. 要删除密钥，请使用`h.delete(obj)`. 要将有序集转换为数组，请使用`h.keys`.

因为目前[Ruby 1.9`Set`库](http://ruby-doc.org/stdlib-1.9.3/libdoc/set/rdoc/index.html)恰好是基于 Hash 构建的，所以您目前可以将`Set`其用作有序集。（例如，该`to_a`方法的实现只是`@hash.keys`.）但是请注意，该库**不保证此行为，并且将来***可能会*更改。

```
require 'set'
s = Set[ :f, :o, :o, :b, :a, :r ]  #=> #<Set: {:f, :o, :b, :a, :r}>
s << :z                            #=> #<Set: {:f, :o, :b, :a, :r, :z}>
s.delete :o                        #=> #<Set: {:f, :b, :a, :r, :z}>
s << :o                            #=> #<Set: {:f, :b, :a, :r, :z, :o}>
s << :o                            #=> #<Set: {:f, :b, :a, :r, :z, :o}>
s << :f                            #=> #<Set: {:f, :b, :a, :r, :z, :o}>
s.to_a                             #=> [:f, :b, :a, :r, :z, :o] 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-21T18:25:08.523

据我所知，没有一个，并且 Set 就其数学性质而言意味着是无序的（或者至少，在实现上，意味着不保证顺序 - 实际上它通常实现为哈希表，因此它确实会打乱顺序）。

但是，直接扩展数组或子类化它并不难做到这一点。我刚试了一下，这行得通：

```
class UniqueArray < Array
  def initialize(*args)
    if args.size == 1 and args[0].is_a? Array then
      super(args[0].uniq)
    else
      super(*args)
    end
  end

  def insert(i, v)
    super(i, v) unless include?(v)
  end

  def <<(v)
    super(v) unless include?(v)
  end

  def []=(*args)
    # note: could just call super(*args) then uniq!, but this is faster

    # there are three different versions of this call:
    # 1\. start, length, value
    # 2\. index, value
    # 3\. range, value
    # We just need to get the value
    v = case args.size
      when 3 then args[2]
      when 2 then args[1]
      else nil
    end

    super(*args) if v.nil? or not include?(v)
  end
end 
```

似乎涵盖了所有的基础。我使用了 OReilly 方便的 Ruby Cookbook 作为参考——他们有一个类似的“确保排序数组保持排序”的配方。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2011-12-09T20:56:32.947

我喜欢这个解决方案，虽然它需要 active_support 的 OrderedHash

```
require 'active_support/ordered_hash'

class OrderedSet < Set

  def initialize enum = nil, &block
    @hash = ActiveSupport::OrderedHash.new
    super
  end

end 
```

=)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-21T22:57:34.670

您可以使用 Hash 来存储值，并在每个 Hash 对的值中存储一个递增值。然后，您可以通过对象的值访问对象，以排序的方式访问该集合，尽管速度很慢。

稍后我将尝试在此处添加一些代码以进一步解释。

我知道通过值访问比通过键慢得多。

更新 1：在 Ruby 1.9 中，Hash 元素按其插入顺序进行迭代。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-21T18:24:33.050

不是我所知道的，但自己动手并不难。只需继承 Array 并使用 Set 来维护您的唯一性约束。

一个关于无声丢弃的问题。这将如何影响#[]=？如果我试图用已经存储在其他地方的东西覆盖现有条目，它是否应该删除将要删除的元素？我认为任何一种方式都可能在未来提供令人讨厌的惊喜。

# c++ - 通过范围键保持值的结构

> ID：773414
> 
> 赞同：4
> 
> 时间：2009-04-21T16:13:11.553
> 
> 标签：c++, stl

我需要一个结构来保存基于具有范围的键的值。我的实现是 C++，所以任何 STL 或 Boost 都会非常好。

我有作为范围键，它们是双精度数，和值

*   [0,2) -> 值1
*   [2,5) -> 值2
*   [5,10) -> 值3
*   ETC

这样搜索 1.23 应该返回 value1，依此类推。

现在我正在使用一个包含所有三个部分的向量，key1/key2/value，以及自定义搜索，但感觉应该有一个更清晰的结构。

编辑：谢谢大家。鉴于这种情况下的范围应该是连续的且不重叠的，使用 upper_bound 就可以了。也感谢类 Range 解决方案，它们被归档以备将来参考。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-21T16:44:38.110

```
class Range
{
public:
    Range( double a, double b ):
        a_(a), b_(b){}
    bool operator < ( const Range& rhs ) const
    {
        return a_ < rhs.a_ && b_ < rhs.b_;
    }
private:
    double a_;
    double b_;
};
int main()
{
    typedef std::map<Range, double> Ranges;
    Ranges r;

    r[ Range(0, 2) ] = 1;
    r[ Range(2, 5) ] = 2;
    r[ Range(5, 10) ] = 3;

    Ranges::const_iterator it1 = r.find( Range( 2, 2 ) );
    std::cout << it1->second;

    Ranges::const_iterator it2 = r.find( Range( 2, 3 ) );
    std::cout << it2->second;

    Ranges::const_iterator it3 = r.find( Range( 6, 6 ) );
    std::cout << it3->second;

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-21T16:16:09.037

如果您的范围是连续且不重叠的，则应使用 std::map 和 upper_bound 成员函数。或者，您可以使用带有 upper_bound 算法的排序向量。无论哪种方式，您只需要记录范围的最小值，范围的上部由下一个较高值定义。

编辑：我措辞混乱，所以我决定提供一个例子。在编写示例代码时，我意识到您需要的是 upper_bound 而不是 lower_bound。我总是把这两个弄糊涂。

```
typedef std::map<double, double> MyMap;
MyMap lookup;
lookup.insert(std::make_pair(0.0, dummy_value));
lookup.insert(std::make_pair(2.0, value1));
lookup.insert(std::make_pair(5.0, value2));
lookup.insert(std::make_pair(10.0, value3));
MyMap::iterator p = lookup.upper_bound(1.23);
if (p == lookup.begin() || p == lookup.end())
    ...; // out of bounds
assert(p->second == value1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T17:21:34.917

沿着这些思路怎么样：

```
#include "stdafx.h"
#include <iostream>
#include <string>
#include <map>
#include <algorithm>
#include <sstream>

class Range
{
public:
    Range(double lower, double upper) : lower_(lower), upper_(upper) {};
    Range(const Range& rhs) : lower_(rhs.lower_), upper_(rhs.upper_) {};
    explicit Range(const double & point) : lower_(point), upper_(point) {};
    Range& operator=(const Range& rhs) 
    { 
        lower_ = rhs.lower_; 
        upper_ = rhs.upper_; 
        return * this; 
    }

    bool operator < (const Range& rhs) const
    {
        return upper_ <= rhs.lower_;
    }

    double lower_, upper_;
};

typedef std::string Thing;
typedef std::map<Range, Thing> Things;

std::string dump(const std::pair<Range,Thing> & p)
{
    stringstream ss;
    ss << "[" << p.first.lower_ << ", " << p.first.upper_ << ") = '" << p.second << "'" << endl;
    return ss.str();
}

int main()
{
    Things things;
    things.insert( std::make_pair(Range(0.0, 5.0), "First") );
    things.insert( std::make_pair(Range(5.0, 10.0), "Second") );
    things.insert( std::make_pair(Range(10.0, 15.0), "Third") );

    transform( things.begin(), things.end(), ostream_iterator<string> (cout,""), dump );

    cout << "--------------------------------------" << endl;

    things[Range(1.5)] = "Revised First";

    transform( things.begin(), things.end(), ostream_iterator<string> (cout,""), dump );

    return 0;
} 
```

...程序输出：

```
[0, 5) = 'First'
[5, 10) = 'Second'
[10, 15) = 'Third'
--------------------------------------
[0, 5) = 'Revised First'
[5, 10) = 'Second'
[10, 15) = 'Third' 
```

# sql-server-2005 - 聚合 SQL 函数以仅从每个组中获取第一个

> ID：773417
> 
> 赞同：38
> 
> 时间：2009-04-21T16:14:28.230
> 
> 标签：sql-server-2005, tsql, aggregate-functions

我有 2 个表 - 一个 Account 表和一个 Users 表。每个帐户可以有多个用户。我有一个场景，我想对这两个表执行单个查询/连接，但我想要所有的帐户数据 (Account.*) 和只有*第一*组用户数据（特别是他们的名字）。

我不想在我的聚合组上做一个“最小”或“最大”，而是做一个“第一个”。但是，显然，TSQL 中没有“First”聚合函数。

关于如何获取此查询的任何建议？显然，很容易得到 Account x Users 的笛卡尔积：

```
 SELECT User.Name, Account.* FROM Account, User
 WHERE Account.ID = User.Account_ID 
```

但是我怎么可能只根据他们的 User.ID 的顺序从产品中获得第一个用户呢？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-04-21T16:19:22.693

与其分组，不如这样进行......

```
select
    *

from account a

join (
    select 
        account_id, 
        row_number() over (order by account_id, id) - 
            rank() over (order by account_id) as row_num from user
     ) first on first.account_id = a.id and first.row_num = 0 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-11T17:37:15.693

我知道我的回答有点晚了，但这可能对其他人有所帮助。有一种方法可以在 SQL Server 中实现 First() 和 Last()，这里是：

```
Stuff(Min(Convert(Varchar, DATE_FIELD, 126) + Convert(Varchar, DESIRED_FIELD)), 1, 23, '') 
```

对 First() 使用 Min()，对 Last() 使用 Max()。DATE_FIELD 应该是确定它是第一条记录还是最后一条记录的日期。DESIRED_FIELD 是您想要的第一个或最后一个值的字段。它的作用是：

1.  在字符串开头添加 ISO 格式的日期（23 个字符长）
2.  将 DESIRED_FIELD 附加到该字符串
3.  获取该字段的 MIN/MAX 值（因为它以日期开头，您将获得第一条或最后一条记录）
4.  连接字符串以删除前 23 个字符（日期部分）的东西

干得好！

编辑：我遇到了第一个公式的问题：当 DATE_FIELD 的毫秒数为 .000 时，SQL Server 将日期作为字符串返回，根本没有毫秒，因此从 DESIRED_FIELD 中删除了前 4 个字符。我只是将格式更改为“20”（没有毫秒），效果很好。唯一的缺点是如果您有两个在同一秒内创建的字段，排序可能会很混乱......在这种情况下，您可以将格式恢复为“126”。

```
Stuff(Max(Convert(Varchar, DATE_FIELD, 20) + Convert(Varchar, DESIRED_FIELD)), 1, 19, '') 
```

编辑 2：我最初的意图是返回最后一个（或第一个）NON NULL 行。我被问到如何返回最后一行或第一行，不管它是否为空。只需将 ISNULL 添加到 DESIRED_FIELD。当您使用 + 运算符连接两个字符串时，当其中一个为 NULL 时，结果为 NULL。所以使用以下内容：

```
Stuff(Max(Convert(Varchar, DATE_FIELD, 20) + IsNull(Convert(Varchar, DESIRED_FIELD), '')), 1, 19, '') 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-02-09T22:56:48.320

```
Select *
From Accounts a
Left Join (
    Select u.*, 
    row_number() over (Partition By u.AccountKey Order By u.UserKey) as Ranking
    From Users u
  ) as UsersRanked
  on UsersRanked.AccountKey = a.AccountKey and UsersRanked.Ranking = 1 
```

这可以通过使用 Partition By 子句来简化。在上面，如果一个帐户有三个用户，则子查询将它们编号为 1、2 和 3，对于不同的 AccountKey，它将重置编号。这意味着对于每个唯一的 AccountKey，总会有一个 1，可能还有 2、3、4 等。

因此，您过滤 Ranking=1 以从每个组中获取第一个。

这将为每个帐户提供一行，如果该帐户至少有一个用户，那么它将为您提供具有最低键的用户（因为我使用左连接，即使没有，您也将始终获得帐户列表用户存在）。`Order By u.UserKey`如果您希望按字母顺序或其他标准选择第一个用户，请替换为另一个字段。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-10-29T12:48:52.697

我已经对所有方法进行了基准测试，实现这一目标的最简单和最快的方法是使用外部/交叉应用

```
SELECT u.Name, Account.* FROM Account
OUTER APPLY (SELECT TOP 1 * FROM User WHERE Account.ID = Account_ID ) as u 
```

CROSS APPLY 的工作方式类似于 INNER JOIN 并获取两个表相关的行，而 OUTER APPLY 的工作方式类似于 LEFT OUTER JOIN 并从左表中获取所有行（Account here）

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-09-28T21:23:00.080

您可以使用 OUTER APPLY，请参阅[文档](https://technet.microsoft.com/en-us/library/ms175156(v=sql.105).aspx)。

```
SELECT User1.Name, Account.* FROM Account
OUTER APPLY 
    (SELECT  TOP 1 Name 
    FROM [User]
    WHERE Account.ID = [User].Account_ID
    ORDER BY Name ASC) User1 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-04-21T16:19:15.190

```
SELECT (SELECT TOP 1 Name 
        FROM User 
        WHERE Account_ID = a.AccountID 
        ORDER BY UserID) [Name],
       a.*
FROM Account a 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-07-05T14:05:03.210

Dominic Goulet 的 STUFF 反应很巧妙。但是，如果您的 DATE_FIELD 是 SMALLDATETIME（而不是 DATETIME），那么 ISO 8601 长度将为 19 而不是 23（因为 SMALLDATETIME 没有毫秒） - 因此请相应地调整 STUFF 参数，否则 STUFF 函数的返回值将不正确（缺少前四个字符）。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2011-12-02T10:05:58.660

Sql Server 2005 或 2008 中不存在 First 和 Last，但 Sql Server 2012 中有 First_Value, Last_Value 函数。我尝试为 Sql Server 2005 实现聚合 First 和 Last 并遇到障碍，即 sql server 确实保证以定义的顺序计算聚合。（见属性 SqlUserDefinedAggregateAttribute.IsInvariantToOrder 属性，未实现。）这可能是因为查询分析器尝试在多个线程上执行聚合的计算并组合结果，这加快了执行速度，但不保证顺序聚合了哪些元素。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-04-21T16:20:54.093

定义“第一”。您首先想到的巧合通常与聚集索引顺序有关，但不应依赖（您可以设计破坏它的示例）。

不使用 MAX() 或 MIN() 是对的。虽然很诱人，但请考虑您的名字和姓氏在不同字段中的情况。您可能会从不同的记录中获得名称。

因为听起来你真正关心的是你得到每个组的一个任意记录，你可以做的只是 MIN 或 MAX 一个记录的 ID 字段，然后将表加入到该 ID 的查询中。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-04-21T16:19:29.200

有很多方法可以做到这一点，这里有一种快速而肮脏的方法。

```
Select (SELECT TOP 1 U.Name FROM Users U WHERE U.Account_ID = A.ID) AS "Name,
    A.*
FROM Account A 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-04-21T14:37:18.177

使用返回每个帐户的第一个用户的子选择“FirstUser”创建并加入

```
SELECT User.Name, Account.* 
FROM Account, User, 
 (select min(user.id) id,account_id from User group by user.account_id) as firstUser
WHERE Account.ID = User.Account_ID 
 and User.id = firstUser.id and Account.ID = firstUser.account_id 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-01-09T22:38:24.093

（有点题外话，但是）我经常运行聚合查询来列出异常摘要，然后我想知道为什么客户在结果中，所以使用 MIN 和 MAX 提供 2 个半随机样本，我可以查看详细信息，例如

```
SELECT Customer.Id, COUNT(*) AS ProblemCount
      , MIN(Invoice.Id) AS MinInv, MAX(Invoice.Id) AS MaxInv
FROM Customer
INNER JOIN Invoice on Invoice.CustomerId = Customer.Id
WHERE Invoice.SomethingHasGoneWrong=1
GROUP BY Customer.Id 
```

# .net - 断点何时可以改变代码的执行方式？

> ID：773425
> 
> 赞同：1
> 
> 时间：2009-04-21T16:16:11.890
> 
> 标签：.net, debugging, breakpoints

我今天遇到了一个非常奇怪的错误。我在表单上有一个按钮，单击它会导致表单上的网格填充数据。如果您单击该按钮两次，它会崩溃并显示“对象引用未设置为对象的实例”。

我最终在处理该网格的人口的 Sub 的开头放置了一个断点，我发现......它不再崩溃了。我会单击按钮，在 Visual Studio 中按“F5”，它不会崩溃。我这样做了，至少 10 次，它是固定的。

然后，我删除了断点，F5'ed，单击按钮并崩溃。重新添加断点，使其工作。

有人可以解释这里发生了什么吗？我使用的网格是第 3 方控件（Infragistics），应用程序是 WinForms 应用程序。我没有做任何线程 - 我唯一的想法是它是某种“竞争条件”？但即使这样对我来说也没有任何意义。

编辑：这是一个 VB.Net 应用程序/Visual Studio 2008

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-21T16:22:39.520

这里可能会进行一些异步数据加载。添加断点使异步部分有时间完成。当您单击它太快时，它仍在等待数据完成加载或其他东西，因此出现错误。您可能没有实现这一点，但第 3 方控件可能已经实现。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-21T16:24:49.017

这听起来像是一个时间问题，并且一定有一些线程在后台进行 - 也许在第 3 方控制中。

你能从异常中获取调用堆栈吗？

在释放模式下（或没有断点时），您可以在第一次单击完全处理之前再次单击该按钮。

设置断点后，调试器将获得焦点并允许应用再次同步。

您可以在单击按钮后立即禁用它，然后在处理完成后重新启用它。如果您无法解决根本问题（例如，它在第 3 方控制中），这将阻止问题的发生。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T16:24:55.503

我猜这与手动进行调试所需的时间有关。也许您有一些繁重的工作（可能是与数据库的连接），当您调试时它有时间完成，但在不调试时它会使应用程序崩溃

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-21T16:34:49.130

另一种可能...

通常，如果您正在查看断点处的代码，断点可以改变进程的运行时行为。例如，如果您将鼠标悬停在某个属性上，或者打开本地窗口，则在继续执行进一步代码之前，将动态评估属性。

由于属性的 getter 实际上只是一种方法，因此编写不佳的类实际上可以在属性中执行“额外”工作，以防止代码崩溃。

这不太可能，但我确实在一个对属性进行延迟初始化的第三方库中看到了这一点，但在其中一个方法之前没有正确初始化它。如果您从未在代码中查看过该属性，它会引发异常 - 但只需访问该属性即可清除它。

# sql - SQL Server 2005 - 具有级联删除的外键

> ID：773429
> 
> 赞同：0
> 
> 时间：2009-04-21T16:16:31.907
> 
> 标签：sql, sql-server-2005, foreign-keys, cascade

在 SQL Server 2005 中有没有办法解决这个问题？

（这让我很烦恼，每次遇到它时，我都会陷入困境。但这是我第一次不得不处理并进入 Stack Overflow。请保存我所拥有的一点点理智！）

**维度表：**
id INT IDENTITY(1,1)

**FactTable：**
source_id INT NOT NULL，
target_id INT NOT NULL

我创建了一个从“Fact.source_id”到“Dimension.id”的外键，并设置了级联删除和级联更新。

当我尝试对“Fact.target_id”执行相同操作时，我收到一条错误消息，告诉“哦，不，不，不”，因为级联有多个路径可供遵循。

这里没有涉及其他外键，只有我要创建的两个。我可以在没有级联的情况下创建第二个外键，但这对我来说似乎很糟糕。这是一组将手动维护的表（它们很少会被触及，所以客户不会为 gui 付费。）这样的级联删除/更新将非常有用，但仅如果它在两个字段上。（我很喜欢一致性）

****呜咽****

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T18:12:45.107

是的，使用 INSTEAD OF 触发器。它会拦截 DELETE 命令，您可以相应地指导逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T18:10:54.657

您只能从一个关系中级联删除。建议您在触发器中进行设置。

# sql-server - SQL2000 只读视图

> ID：773434
> 
> 赞同：0
> 
> 时间：2009-04-21T16:18:37.487
> 
> 标签：sql-server, sql-server-2000

我检查了 BOL，但没有看到我在寻找什么。我知道 Oracle 在创建视图时有一个“只读”选项。我在 SQL2000 中没有看到这个选项。我是否需要添加 INSTEADOF 触发器来完成此操作？简而言之，我不希望视图的用户能够更新数据。

谢谢 ST

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T16:24:53.960

两个选项，不授予用户对视图的插入、删除或更新权限

```
deny update, insert, delete on ViewName to [user name(s) here] 
```

或在只读文件组上创建视图（这意味着没有人可以插入、更新或删除）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T16:32:04.223

感谢那。我知道这些，但都不可能。我将创建引发错误的“而不是”触发器。

谢谢 ST

# sqlite - 在 SQLite 上连接表时如何进行更新？

> ID：773441
> 
> 赞同：93
> 
> 时间：2009-04-21T16:19:46.173
> 
> 标签：sqlite, join, sql-update

我试过 ：

```
UPDATE closure JOIN item ON ( item_id = id ) 
SET checked = 0 
WHERE ancestor_id = 1 
```

和：

```
UPDATE closure, item 
SET checked = 0 
WHERE ancestor_id = 1 AND item_id = id 
```

两者都适用于 MySQL，但在 SQLite 中给我一个语法错误。

我怎样才能使这个 UPDATE / JOIN 与 SQLite 版本 3.5.9 一起工作？

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2009-04-21T19:51:23.357

你不能。SQLite[不支持 UPDATE statements 中的 JOIN](http://sqlite.org/lang_update.html)。

但是，您可以改为使用子查询来执行此操作：

```
UPDATE closure SET checked = 0 
WHERE item_id IN (SELECT id FROM item WHERE ancestor_id = 1); 
```

或类似的东西; 目前尚不清楚您的架构到底是什么。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-01-13T12:19:49.223

您也可以使用[REPLACE](https://www.sqlite.org/lang_insert.html)，然后您可以将选择与连接一起使用。像这样：

```
REPLACE INTO closure 
 SELECT sel.col1,sel.col2,....,sel.checked --checked should correspond to column that you want to change
FROM (
 SELECT *,0 as checked FROM closure LEFT JOIN item ON (item_id = id) 
 WHERE ancestor_id = 1) sel 
```

# iphone - 8badf00d 是什么意思？

> ID：773442
> 
> 赞同：48
> 
> 时间：2009-04-21T16:20:12.507
> 
> 标签：iphone, crash

有时我的 iPhone 应用程序崩溃并显示一个奇怪的崩溃日志，读取的异常代码是 0x8badf00d。堆栈跟踪显示应用程序执行的随机快照，但没有任何可疑之处。这种情况很少发生，我不知道如何重现它。有人知道更多关于这种异常和异常代码的信息吗？

这是我的崩溃日志的摘录：

> 异常类型：00000020
> 异常代码：0x8badf00d
> 突出显示的线程：0
> 
> 应用程序特定信息：
> 无法停用
> 
> 线程 0:
> ...
> <这里没有可疑之处 >
> ...
> 
> 未知线程以未知方式崩溃：5，state_count：1

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2009-04-22T21:48:26.747

`0x8badf00d`是当应用程序启动或终止时间过长时看门狗引发的错误代码。请参阅 Apple 的[iPhone OS 应用程序崩溃报告](http://developer.apple.com/iphone/library/technotes/tn2008/tn2151.html)文档

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-04-15T10:09:37.397

如果你得到`Exception Type: 00000020`然后`Exception Codes: 0x8badf00d`是**看门狗超时崩溃报告**。异常代码`0x8badf00d`被调用`"ate bad food"`。

最常见`reason for this crash is synchronous activity on main thread.`的修复是`switch to asynchronous activity`在主线程上。

[![Apple 文档的屏幕截图](https://i.stack.imgur.com/mA9SJ.png)](https://i.stack.imgur.com/mA9SJ.png)

[有关详细信息，请参阅此 Apple 文档。](https://developer.apple.com/library/ios/qa/qa1693/_index.html)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-04-21T16:26:43.783

它是 HexSpeak，请参见此处：[http ://en.wikipedia.org/wiki/Hexspeak](http://en.wikipedia.org/wiki/Hexspeak)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-04-21T16:25:30.603

这是一些程序员的笑话。您必须为您的代码选择一个数字，但该数字本身并不一定意味着任何东西。 `8badf00d`只是写数字 2,343,432,205 的另一种方式，之所以选择它是因为当以十六进制表示异常日志时，它看起来很“有趣”。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-04-24T05:41:46.290

`0x8badf00d exception`由苹果提供的看门狗提出。网络应用程序中看门狗超时崩溃的最常见原因是主线程上的同步网络。这里有四个促成因素：

> 同步网络 - 这是您发出网络请求并阻止等待响应的地方。
> 
> 主线程——同步网络一般来说不太理想，但如果你在主线程上执行它会导致特定的问题。请记住，主线程负责运行用户界面。如果您长时间阻塞主线程，用户界面就会变得无法接受。
> 
> 长时间超时——如果网络刚刚消失（例如，用户在进入隧道的火车上），任何未决的网络请求都不会失败，直到某个超时到期。大多数网络超时以分钟为单位，这意味着主线程上阻塞的同步网络请求可能会导致用户界面一次无响应数分钟。
> 
> 试图通过减少网络超时来避免这个问题并不是一个好主意。在某些情况下，网络请求可能需要几秒钟才能成功，如果您总是提前超时，那么您将永远不会取得任何进展。
> 
> 看门狗——为了让用户界面保持响应，iOS 包含一个看门狗机制。如果您的应用程序未能及时响应某些用户界面事件（启动、暂停、恢复、终止），则看门狗将终止您的应用程序并生成看门狗超时崩溃报告。看门狗给你的时间没有正式记录，但它总是少于网络超时。

有两种常见的解决方案：

> 异步网络——这个问题的最佳解决方案是异步运行你的网络代码。异步网络代码有许多优点，其中最重要的是它可以让您安全地访问网络而不必担心线程。
> 
> 辅助线程上的同步网络——如果异步运行网络代码非常困难（也许您正在使用假设同步网络的大型可移植代码库），您可以通过在辅助线程上运行同步代码来避免看门狗。

有关更多信息，请参阅苹果[文档](https://developer.apple.com/library/content/qa/qa1693/_index.html)。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-04-21T16:25:15.690

这是一个很有幽默感的开发者添加的失败代码。因为十六进制既使用字母又使用数字，所以可能会想出看起来近似于英文单词的十六进制数字，例如“0xdeadbeef”等。我确定异常具有特定含义，但如果没有重大症状与它相关联，您可以忽略它而无需过多关注。

* * *

## 回答 #7

> 赞同：-6
> 
> 时间：2013-08-18T15:18:34.823

来自维基百科的 0xBAADF00D（“坏食物”）被微软的 LocalAlloc(LMEM_FIXED) 用于在使用调试堆时指示未初始化的分配堆内存。 [7]

# nhibernate - 获取没有主键 NHibernate 的孩子

> ID：773443
> 
> 赞同：2
> 
> 时间：2009-04-21T16:20:20.553
> 
> 标签：nhibernate, nhibernate-mapping, nhibernate-collections

我正在尝试通过映射将对象集合放入父对象中。

我有一个主键是 guid (Id) 的父对象“ScoreCard”和一个主键是 guid (Id) 的子“Score”对象。我想根据两个对象都有的两个字段为父对象选择子对象，但我无法让它工作，这是映射

```
<bag name="ScoreCard">
  <key>
    <column name="HoleId"/>
    <column name="PlayerId"/>
  </key>
  <one-to-many class="Score" not-found="ignore"/>
</bag> 
```

我没有设计数据库，但 ScoreCard 对象来自一个视图，该视图返回我需要的两个列以及邪恶的 guid。无论我尝试过什么，NHibernate 都会不断抛出关于外键与主键不同的异常。

在我看来，这似乎是最简单的要求，给定一些标准来收集东西，为什么我会这么卡？

感谢您的帮助，对于糟糕的示例代码（在亲戚家观看潜意识高尔夫）感到抱歉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-22T09:58:03.460

嗯，我终于找到了。父对象是从给出三列且没有键的视图中绘制的。我可以将复合键映射到 HoleId 和 PlayerId，而不是我在查看代码时发现的邪恶 guid。这很棒，因为我可以轻松地映射我需要的 Score 对象，然后使用 NHibernateUtil.Initialize 延迟加载它们。

我的映射 xml 需要看起来像这样

```
<class name="ParentObject">
    <composite-id>
      <key-property name="HoleId" column="HoleId" />
      <key-property name="PlayerId" column="PlayerId" />      
    </composite-id>
    <property name="EvilGuid" column="Id" />
    <bag name="ScoreCard">
      <key>
        <column name="HoleId"/>
       <column name="PlayerId"/>
      </key>  
      <one-to-many class="Score" not-found="ignore"/>
    </bag>
</class> 
```

我是从[这篇文章](https://stackoverflow.com/questions/628677/nhibernate-query-with-join-table-without-relationship)中得到灵感的，也请关注Stefan的回答，因为我觉得我在这里很幸运，如果多考虑DDD，设计可以做得更好。

谢谢你的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T22:10:34.473

问题是这样的：NHibernate 最适合（但不仅限于）DDD，这意味着首先创建域类并使数据库最适合域模型。

您与非主键字段具有复合 ID 关系。所以开始祈祷 NHibernate 可以应付这个问题。支持非主键的复合 ID 和关系 - 对于遗留数据库 - 通常不鼓励 DDD。

我认为两者的结合是行不通的。在 NHibernates 问题跟踪器上查看此问题： [https](https://nhibernate.jira.com/browse/NH-1722) ://nhibernate.jira.com/browse/NH-1722 。您可以在那里为该功能投票。

# exception - Grails 上 Groovy 的初学者问题

> ID：773449
> 
> 赞同：4
> 
> 时间：2009-04-21T16:21:59.413
> 
> 标签：exception, grails, groovy

我是 Groovy 的新手，我想修改我在 Internet 上找到的一个示例（博客示例）。我定义了两个类 Post 和 Comment，如下所示：

```
class Post {    

static hasMany = [comments:Comment]

String title
String teaser
String content    
Date lastUpdated

SortedSet comments

static constraints = {
    title(nullable:false, blank:false, length:1..50)
    teaser(length:0..100)
    content(nullable:false, blank:false)
    lastUpdated(nullable:true)

}

String toString() {title}   
}

Post post
String comment
String name
String url
String email
Date dateCreated = new Date()

static belongsTo = Post

static constraints = {
    comment(nullable:false, blank:false)
    name(nullable:false, blank:false)
    url(nullable:true, blank:true, url:true)
    email(nullable:true, blank:true, email:true) 
    dateCreated(nullable:true)
    post(nullable:false)
}

public int compareTo(Object o) {
    return dateCreated.compareTo(o.dateCreated)
}

String toString() {comment}
} 
```

到现在一切OK。

我已将控制器定义如下：

类评论控制器 {

```
def edit = {
    render(view:'edit',
        model:[ comment:new Comment(),
                postId:params.postId])        
}

def save = {
    def comment = new Comment(params)
    comment.dateCreated = new Date()
    comment.post = Post.get(params.postId)   

    if(comment.save()) {        
        redirect(
                controller:'post',
                action:'list',
                id:params.postId)
    } 
} 
```

}

```
class PostController {

def defaultAction = 'list'

def index = {
    render("En el norte de Alabama")
}

def edit = {
    render(view:'edit', model:[post:loadPost(params.id)])
}

def save = {
    def post = loadPost(params.id)
    post.lastUpdated = new Date()

    post.properties = params
    if(post.save()) {
        print "id " + post.id + "\n"     
        def offset = post.id - 1
        print "offset " + offset

        redirect(action:'list', offset:offset)
    } else {
        render(view:'edit', model:[post:post])
    }
}

def list = {
    if(!params.max)params.max = 1

    [ postList: Post.list( params ) ]

}

def view = {
    render(view:'view', model:[post:Post.get(params.id)])
}

private loadPost(id) {
    def post = new Post();
    if(id) {
        post = Post.get(id)
    }
    return post
}
} 
```

最后我定义了视图/帖子/列表

如下：

```
<%@ page contentType="text/html;charset=UTF-8" %>
<html>
  <head><title>My postList</title>
  </head>
     <body>
        <div class="nav">
    <g:link controller="post" action="edit">New post</g:link>            
        </div>
          <span class="menuButton"><H1>Last posts</H1></span> 

 <table border = 1><tr><td>

<g:each in="${postList}" var="post">
 <div>
   <h2>${post.title}</h2>
       <p>Last update: <g:formatDate date="${post.lastUpdated}" 
          format="yyyy-MMM-dd HH:mm"/></p>
    <p><i>${post?.content}</i></p>      
 </div>

 <div class="paginateButtons">
    <g:link controller="comment" action="edit" params="[postId:post.id]">
    Add comment         
    </g:link>            
</div> 

   <g:each in="${post.comments}" var="comt">        
     ${comt.comment} <br />
   </g:each>        
</g:each>
<td></tr></table>

 <div class="paginateButtons">
        <g:paginate max="1" next="Next" prev="Prev." 
           total="${postCount == null ? Post.count(): postCount}" />
</div>      
</body>
</html> 
```

我可以毫无问题地生成新帖子，但是当我想对我的帖子发表评论时，我最多可以为每篇帖子发表一条评论。当试图放更多时，我得到一个 ClassCastException 如下：

```
留言：评论
原因：处理 GroovyPageView 时出错：注释
类：/WEB-INF/grails-app/views/post/list.gsp
在线：[-1]

org.codehaus.groovy.grails.web.pages.exceptions.GroovyPagesException：错误处理 GroovyPageView：评论

    在 org.codehaus.groovy.grails.web.servlet.view.GroovyPageView.handleException(GroovyPageView.java:134)

    在 org.codehaus.groovy.grails.web.servlet.view.GroovyPageView.renderWithTemplateEngine(GroovyPageView.java:112)

    在 org.codehaus.groovy.grails.web.servlet.view.GroovyPageView.renderMergedOutputModel(GroovyPageView.java:86)

    在 org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:257)

    在 org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1183)

    在 org.codehaus.groovy.grails.web.servlet.GrailsDispatcherServlet.doDispatch(GrailsDispatcherServlet.java:294)

    在 org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:807)

    在 org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:571)

    在 org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:501)

    在 javax.servlet.http.HttpServlet.service(HttpServlet.java:707)

    在 javax.servlet.http.HttpServlet.service(HttpServlet.java:820)

    在 org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:502)

    在 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1124)

    在 org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:70)

    在 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1115)

    在 org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:70)

    在 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1115)

    在 org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:361)

    在 org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)

    在 org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)

    在 org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:766)

    在 org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:417)

    在 org.mortbay.jetty.servlet.Dispatcher.forward(Dispatcher.java:334)

    在 org.mortbay.jetty.servlet.Dispatcher.forward(Dispatcher.java:126)

    在 org.codehaus.groovy.grails.web.util.WebUtils.forwardRequestForUrlMappingInfo(WebUtils.java:293)

    在 org.codehaus.groovy.grails.web.util.WebUtils.forwardRequestForUrlMappingInfo(WebUtils.java:269)

    在 org.codehaus.groovy.grails.web.util.WebUtils.forwardRequestForUrlMappingInfo(WebUtils.java:261)

    在 org.codehaus.groovy.grails.web.mapping.filter.UrlMappingsFilter.doFilterInternal(UrlMappingsFilter.java:181)

    在 org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)

    在 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1115)

    在 org.codehaus.groovy.grails.web.sitemesh.GrailsPageFilter.obtainContent(GrailsPageFilter.java:171)

    在 org.codehaus.groovy.grails.web.sitemesh.GrailsPageFilter.doFilter(GrailsPageFilter.java:110)

    在 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1115)

    在 org.codehaus.groovy.grails.web.servlet.filter.GrailsReloadServletFilter.doFilterInternal(GrailsReloadServletFilter.java:101)

    在 org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)

    在 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1115)

    在 org.codehaus.groovy.grails.web.servlet.mvc.GrailsWebRequestFilter.doFilterInternal(GrailsWebRequestFilter.java:65)

    在 org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)

    在 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1115)

    在 org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:96)

    在 org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)

    在 org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:236)

    在 org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)

    在 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1115)

    在 org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:361)

    在 org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)

    在 org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)

    在 org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:766)

    在 org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:417)

    在 org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)

    在 org.mortbay.jetty.Server.handle(Server.java:324)

    在 org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:534)

    在 org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:864)

    在 org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:533)

    在 org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:207)

    在 org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:403)

    在 org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)

    在 org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:522)

引起：java.lang.ClassCastException：注释

    在 java.util.TreeMap.compare(TreeMap.java:1093)

    在 java.util.TreeMap.put(TreeMap.java:465)

    在 java.util.TreeSet.add(TreeSet.java:210)

    在 java.util.AbstractCollection.addAll(AbstractCollection.java:318)

    在 java.util.TreeSet.addAll(TreeSet.java:258)

    在 D__Workspace_groovypublish_grails_app_views_post_list_gsp$_run_closure5.doCall(D__Workspace_groovypublish_grails_app_views_post_list_gsp:52)

    在 D__Workspace_groovypublish_grails_app_views_post_list_gsp.run(D__Workspace_groovypublish_grails_app_views_post_list_gsp:21)

```

似乎是在尝试放置嵌套的“每个”时问题出在 list.gsp 文件中

任何提示

提前致谢

路易斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-21T17:34:59.173

好吧，从我在这里可以读到的内容，您使用 SortedSet 作为帖子中评论的容器类型。这很好，但是您必须使 Comments 实现 Comparable，因为这是所有包含 SortedSet 的对象的要求。无论如何，您可能希望您的评论按 dateCreated 排序，因此您必须在某处说（例如在 compareTo 函数中，您需要满足接口）。

您不只是使用列表的任何原因？似乎您无论如何都不想添加日期较早的评论。

无论如何，如果不是这样，请发表评论，我会看更长的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-25T20:18:34.913

我同意比尔詹姆斯的观点，但我认为你应该注意到你对这个问题的分析有所改进。你的帖子有很好的数据围绕你的问题。事实上，你拥有你需要的一切。让我们看看那个堆栈跟踪。

这是 TreeMap.java 中的代码：1093

```
private int compare(K k1, K k2) {
    return (comparator==null ? ((Comparable</*-*/K>)k1).compareTo(k2)
                             : comparator.compare((K)k1, (K)k2));
} 
```

从这里您可以看到将 Comment 强制转换为 Comparable 是问题所在。稍微了解一下 TreeMap、TreeSet 和 Comparable 可能会让您解决这个问题。

请不要将这篇文章解释为以任何方式质疑您的问题或问题。你的问题很好，问得很好。希望这是帮助您学习钓鱼的另一个数据。

# networking - 测量特定计算机的 LAN 网络速度的简单方法？

> ID：773454
> 
> 赞同：-1
> 
> 时间：2009-04-21T16:23:17.083
> 
> 标签：networking, lan, nas

我想测量局域网上两台电脑之间的网络速度。（我正在考虑购买网络区域存储 (NAS) 设备，我想看看当前设置有多快，以了解 NAS 需要多快。

我想我会复制一些文件并看看需要多长时间，但我认为可能有更精确的方法来衡量它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-22T21:05:04.077

要衡量网络性能，iperf 是我见过的最好的工具。

但是，我认为这对解决您的问题没有帮助。您将无法根据网络性能调整 NAS 解决方案的大小。

使用与 NAS 相同的协议传输文件肯定与这种情况更相关。仍然，没有帮助。

您可以假设任何现代机器都可以以超过 90% 的链接速度传输数据。（无论是否涉及本地存储，除非存在问题或其他重大负载）。

十几个相当现代的客户端应该能够粉碎一个相当强大的 NAS。您确实需要模拟真实世界的负载。这基本上是不可能的。

您需要从不同的角度来调整您的 NAS 解决方案。客户的能力真的不相关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T10:33:30.350

每个 NAS 设备都倾向于生成作为其规范的一部分的吞吐量数。一般来说，如果关心速度，你会更好地选择 SAN 而不是 NAS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T16:28:50.817

如果您对另一台计算机执行相同的过程，这可能会起作用。它可能不准确，但可以提供一个想法。

# c# - 在 C# 图像处理应用程序中实现保存功能

> ID：773457
> 
> 赞同：0
> 
> 时间：2009-04-21T16:23:34.867
> 
> 标签：c#, .net, design-patterns

我开始考虑如何处理我的应用程序的保存功能，并考虑了 2 个选项：

该应用程序具有以下节点：

```
Blur
Contrast
Sharpen
Invert
... 
```

# 1.解释保存的文件，如：

```
Blur name:"Blur01" Amount:5
... 
```

# 2\. 以自可执行格式保存文件，例如：

```
Blur blur = new Blur ();
blur.Name = "Blur01"
blur.Amount = 5
... 
```

我应该去哪一个？有没有更好的方法来处理这个？

我希望保存的文件向后和向前兼容。

编辑：感谢所有回复。任何人都可以请解释为什么＃2不会是未来的证明？是因为可以更改#1 的加载/打开代码，但不能更改#2？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-21T16:28:42.843

您可能可以使用 XML 序列化，因为它已被广泛接受且易于阅读。这是一个教程：[XML序列化](http://www.switchonthecode.com/tutorials/csharp-tutorial-xml-serialization)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-21T16:28:33.903

我会选择更像第一个选项的东西。

虽然，总的来说，我认为 XML 会比编写自己的语法更好。从兼容性/面向未来的角度来看，这比尝试为您的文件制作自己的语法解析器要好得多。

怎么样的东西：

```
<Filters>
    <Blur Name="Blur01" />
    <Sharpen Name="Sharpen01" Amount=5 />
</Filters> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T16:38:39.683

我也会使用 XML 文件，因为这将允许您确保向前和向后的兼容性。

这是因为您查找属性而不是逐行解析文件。

例如，如果模糊从：

```
<Blur>
 <name>Blur01</name>
 <amount>5</amount>
</Blur> 
```

至：

```
<Blur>
 <name>Blur01</name>
 <amount>5</amount>
 <feather>true</feather>
</Blur> 
```

旧版本的应用程序仍然可以读取文件，因为它们不会查找羽毛属性。您需要做的就是确保在创建对象时设置默认值，以便可以读取较旧的文件而不会留下未设置的数据。

作为对更新的回应——你没有理由不能做出 #2 未来证明。您只需要自己进行版本控制。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-21T19:32:22.090

具有自动执行“保存格式”的原因通常很糟糕，因为今天您的“模糊”功能可能看起来像：

```
public class Blur
{
   int Amount = 5;
} 
```

但在未来，你可能会改进你的模糊“系统”来代替：

```
public class Blur
{
   int HorizontalAmount = 5;
   int VerticalAmount = 10;
} 
```

现在，当您执行该保存的文件时，它将不再编译，因为不再有“数量”属性。然后为了获得向后兼容性，您需要将 Amount 值“解释”为现在意味着 Horizo​​ntalAmount = 5 *AND* VerticalAmount = 5（或其他）。

所以真的，从长远来看，从一开始就拥有一个解释文件格式会更好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-21T16:30:31.530

您是否将其保存在文本文件中？

如果是这样，将它保存为 XML 不是更好吗？

```
<Blur>
 <name>Blur01</name>
 <amount>5</amount>
</Blur> 
```

否则我不确定我是否理解这个问题:)

# .net - 通过 C++ dll 调用时如何拆分 Dot Net Hosting 功能

> ID：773476
> 
> 赞同：1
> 
> 时间：2009-04-21T16:27:17.277
> 
> 标签：.net, c++, clr-hosting

我正在探索从非托管 C++ 代码调用 .net 方法，并在[如何将托管 .NET 程序集 (DLL) 注入另一个进程中找到了以下函数](http://www.codingthewheel.com/archives/how-to-inject-a-managed-assembly-dll)

```
void StartTheDotNetRuntime()
{
    // Bind to the CLR runtime..
    ICLRRuntimeHost *pClrHost = NULL;
    HRESULT hr = CorBindToRuntimeEx(
        NULL, L"wks", 0, CLSID_CLRRuntimeHost,
        IID_ICLRRuntimeHost, (PVOID*)&pClrHost);

    // Push the CLR start button
    hr = pClrHost->Start();

    // Okay, the CLR is up and running in this (previously native) process.
    // Now call a method on our managed class library.
    DWORD dwRet = 0;
    hr = pClrHost->ExecuteInDefaultAppDomain(
        L"c:\\PathToYourManagedAssembly\\MyManagedAssembly.dll",
        L"MyNamespace.MyClass", L"MyMethod", L"MyParameter", &dwRet);

    // Stop the CLR runtime
    hr = pClrHost->Stop();

    // Don't forget to clean up.
    pClrHost->Release();
} 
```

在控制台应用程序中调用一次时，这没有问题。

我现在想将此函数拆分为在 dll 中使用，逻辑上这应该分为三个部分

```
Method - DLLMain
    DLL_PROCESS_ATTACH
         Bind to the CLR runtime
         Push the CLR start button

    DLL_PROCESS_DETACH
         Stop the CLR runtime
         Do not forget to clean up.

Method - CallDotNetToDoSomething 
```

为了实现这一点，我如何以及在哪里声明 ICLRRuntimeHost pClrHost/HRESULT hr？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T16:42:43.997

它们应该可能是全局（静态）变量，或者是某种单例。每个进程只允许一个 .NET 运行时（至少现在是这样），因此尝试比这更聪明一点意义不大。在 DLL 加载中填充全局变量，然后在 DLL 卸载期间取消填充它们。

对于我所做的 .NET/Mono 嵌入项目，我创建了一个对象，其构造函数启动运行时（即绑定/按下启动按钮），而其析构函数将其关闭（停止/释放）。这样主应用程序可以选择如何操作，即在main() 中将其放入堆栈，或者在DLL 加载时执行new()，并在DLL 卸载时删除。在这种情况下，您提到的指针将是您创建的新对象的实例变量，例如 ClrEmbedManager。如果您的库不需要在具有不同行为的不同类型的应用程序中重用，那就太夸张了。

# winforms - Winforms UI 反馈

> ID：773478
> 
> 赞同：1
> 
> 时间：2009-04-21T16:28:11.817
> 
> 标签：winforms, user-interface

我只是模拟了一个时间管理系统的粗略 UI，并希望得到一些反馈。如果我能在 Winforms 中实现我想要做的事情，我正在寻找什么。

这是样机。

（死链接）[http://teewebco.com/images/main-copy.png](http://teewebco.com/images/main-copy.png)

让我担心的领域是劳工类别部分。可能会有 1 到 24 个不同的类别，有人会记录几个小时。由于这是一个客户端应用程序，我考虑在类别部分放置一个滚动条，以便它可以扩展而不会导致 UI 爆炸。

列将水平卷起..像 excel 一样给出总数。

所以你怎么看？这在 Winforms 应用程序中可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T19:37:02.750

首先，+1 用于使用 Balsamiq 模拟屏幕。

我真的会考虑介绍。确保您的用户对一次只在屏幕上看到 3 个左右的类别感到满意。尽可能多地提供你能想到的替代方案，并让他们挑选一对来制作原型。例如，您能否为他们提供聚合视图，并允许向下钻取。有了原型，他们可以用模拟数据做出最终决定，不要提供任何你不满意的东西，你将负责它在现场的工作！

如果您已经过了原型阶段并且对设计感到满意，那么作为一个粗略的结构，我将从数据网格开始。首先看看 3rd 方控件库将提供什么开箱即用。这些控件库始终提供比基本 .Net 控件更多的自定义。Infragistics 是我觉得一般可以推荐的一种，但我不能确认它会做你需要的那种水平滚动。

*   您可能想为标题行创建一个自定义单元格实现，您不太可能开箱即用地获得您想要的外观。这很简单。

*   除非第 3 方数据网格仅提供滚动部分列（我假设您希望右侧的 2 列始终显示在屏幕上），否则滚动条会很棘手。如果您无法控制为您执行此操作，我将首先尝试伪造它。将“当前期间”和“累积”列放入全新的网格控件中。然后，您可以将水平滚动条放在左侧 gridview 上，并通过将它们都放入 Pane 控件来使它们在视觉上保持在一起。您需要将它们分别数据绑定到正确的列，以便它们与基础数据保持同步。

*   底部的小计控件我将保留为简单的文本框，并将它们直接绑定到这些字段的域模型计算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T16:34:27.510

这当然是可行的，问题是这是否是最好的方法。我会看一些现有时间管理应用程序的屏幕截图，看看它们在做什么，然后问自己“这个设计对我不起作用怎么办”以及“我想把这个设计怎么融入我的应用程序”。大多数时间管理系统都会在其网站上提供屏幕截图。

顺便说一句：Balsamiq 是一个非常酷的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T16:54:05.623

这将是放置一些 3rd 方控件（如 DevExpress 的 XtraGrid）的好地方。您可以滚动网格中的列，同时保留其他列（不滚动）。

# iphone - visibleRect 方法在 iPhone 上是否也可用？我怎样才能找到它？

> ID：773482
> 
> 赞同：0
> 
> 时间：2009-04-21T16:28:55.260
> 
> 标签：iphone

Apple 表示 Mac 上有一个 visibleRect 方法（[Source](http://developer.apple.com/documentation/Cocoa/Conceptual/CocoaViewsGuide/Coordinates/Coordinates.html)），它有助于仅在视图的可见内容矩形中进行图形操作。

当我尝试访问该方法时，XCode 没有给我任何完成提示，所以似乎这个方法在 iPhone 上不可用。我怎么能发现呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T17:56:03.897

正确的方法是搜索 XCode 中内置的文档。确保您已选择 iPhone OS 2.2 库（或任何版本）来限制您的搜索。此外，一些指南同时适用于 Mac 和 iPhone，因此即使那样，您也可能会得到误报。但是，如果它出现在 Class 或 Funciton Reference 中，并且在`Availability`它所说的区域的顶部`Available in iPhone OS 2.0 and later.`或类似区域的顶部，那么你很好。

它在帮助菜单中，或者您可以按 option-command-?

BTW`visibleRect`是 iPhone SDK 中 CALayer 的一部分。

# c++ - C硬编码typedef结构数组

> ID：773486
> 
> 赞同：3
> 
> 时间：2009-04-21T16:30:28.127
> 
> 标签：c++, c, arrays, struct, declaration

这是一个愚蠢的问题，即使问它也令人沮丧。请多多包涵，我今天对这个特别傻……

我有一个带有特定 typedef 结构的库。基本上：

```
typedef struct {int x; int y;} coords; 
```

我真正想做的是在我的头文件中声明一个变量数组：

```
coords MyCoords[]; 
```

（我最近将其切换为 just`coords *MyCoords;`然后运行 ​​a `MyCoords = new coords[4];`）

然后在我的初始化中，我想在其中硬编码一些值。

```
MyCoords[] = {{0, 0}, {2, 2} etc. 
```

我今天一定只是在放屁，因为它不允许我做任何简单的事情，甚至像这样简单的东西`MyCoords[0] = {0, 0}`

对上面的一些语法感到抱歉。谢谢你的帮助。我什至不关心一次硬编码所有值。我现在可以正常`MyCoords[0] = {0, 0}`工作了。我可以做`MyCoords[0].x = 0; MyCoords[0].y = 0`，但我永远不会弄清楚我做错了什么。非常感谢任何人..

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-21T16:37:06.567

您只能在声明它的同一位置初始化一个数组。有效的形式是：

```
coords MyCoords[] = {{0, 0}, {2, 2}}; 
```

如果您需要在标头中声明 MyCoords 以便许多模块可以访问它，我认为以下方法将起作用：

```
extern coords MyCoords[]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-21T16:43:48.063

好吧，您创建的不是变量数组。这是一个大小未知的数组。该数组的类型不完整，因此不能在 C++ 中定义。你能做的就是把它放在`extern`它前面，让它成为一个声明。

```
extern coords MyCoords[]; 
```

然后，在初始化它的 .cpp 文件中，您可以创建（定义）该数组 - 请注意，您应该在命名空间范围内执行此操作，当然，在任何函数之外：

```
coords MyCoords[] = {{1, 2}, {3, 4}, ... }; 
```

如果你想要的是一个数组，它的大小在编译时未知，而是在运行时，你应该使用`std::vector`：

```
std::vector< coords > MyCoords; 
```

然后稍后如果你填写它，做

```
MyCoords.push_back( coords(1, 2) );
MyCoords.push_back( coords(3, 4) );
.... 
```

或者创建一个本地数组，然后使用该数组元素的副本初始化向量：

```
coords c[] = ....;
MyCoords.insert(MyCoords.end(), c, c + sizeof c / sizeof *c); 
```

嗯，在 C 中，它与在 C++ 中略有不同。您*可以*定义一个维度未知的数组。发生的事情是它被视为“暂定”定义。如果在文件的末尾（更准确地说，它的翻译单元，即该文件，以及它包含的所有文件 - 意味着编译器一起翻译的所有内容）没有包含大小的后续定义，那么大小被认为是`1`。但是，在 C++ 中没有暂定定义，不包含大小且不包含可以判断大小的初始化程序的定义是无效的 C++ 程序。

由于您的代码变得贪婪的原因，您正在做

```
MyCoords[0] = {0, 0} 
```

编译器将读取为：

```
-> Set LHS to RHS
-> -> LHS is a variable of type `coords`. Fine
-> -> RHS is... hmm, `{0, 0}`. What the heck is it?? 
```

你看，编译器不知道右手边应该是什么意思。出于这个原因，C99（C 的 1999 版）引入了所谓的复合文字。它允许你写

```
MyCoords[0] = (coords){0, 0}; 
```

它实际上会做你想做的事——创建一个右侧的类型值`coord`并将其分配给左侧。但是，出于兼容性原因（许多 C 编译器不合理地兼容 C99 - C++ 和 C89 都不支持复合文字），您应该使用我之前向您展示的方法之一。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-21T16:48:15.043

我不确定这是否也是您的实际代码中的问题，但是：

```
typedef struct coords {int x, int y}; 
```

不是 C 中的完整 typedef 声明，因为它没有给*type*命名，只给 struct （struct 标签与标准 C 中的类型名称不在同一个命名空间中）。要使 typedef 声明正确，您必须为整个 type 指定一个名称`struct coords {int x, int y}`，就好像您要声明该类型的变量一样，如下所示：

```
typedef struct coords {int x, int y} coords; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-21T17:13:02.317

它应该是：

```
typedef struct coords {int x, int y} coords;
coords MyCoords[] = {{0, 0}, {2, 2}, {3, 4}}; 
```

# c# - C#：使用 MySQL 的字符串中的 Unicode

> ID：773494
> 
> 赞同：4
> 
> 时间：2009-04-21T16:31:36.660
> 
> 标签：c#, mysql, unicode, encoding, utf-8

我正在尝试将字符串插入 MySQL 数据库。我可以通过在服务器上运行查询来插入它，但是当我尝试使用我的 C# 源文件插入“Iñtërnâtiônàlizætiøn”时，我得到“IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n”。我尝试将其添加为参数并将 ;charset=utf8 添加到我的连接字符串中，但没有运气。数据库中的表具有 utf8 作为其字符集。我是不是错过了什么。

这是我的代码（使用 StringBuilder）：

```
sqlBuffer.Append(
    string.Format(
        @"INSERT `resources` (id, somefield) 
        VALUES (20004,'Iñtërnâtiônàlizætiøn');"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-21T16:43:36.317

您需要指定它是带有 N'' 或 _utf8'' 的 unicode/utf8：

```
sqlBuffer.Append(
    string.Format(
        @"INSERT `resources` (id, somefield) 
        VALUES (20004, N'Iñtërnâtiônàlizætiøn');"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-11-16T09:13:31.210

您可能需要选择正确的区域性并将其提供给 string.Format。您可能想阅读[http://msdn.microsoft.com/en-us/library/1ksz8yb7.aspx](http://msdn.microsoft.com/en-us/library/1ksz8yb7.aspx)，它启发了下面的示例（警告：未经测试！）：

```
using System.Globalization;

// ...

string[] cultureNames = { "en-US", "fr-FR", "de-DE", "es-ES" };    

// this loop will inject your string using various cultures
foreach (string cultureName in cultureNames)
{
   CultureInfo culture = new CultureInfo(cultureName);

   sqlBuffer.Append(
     string.Format(culture,
       @"INSERT `resources` (id, somefield) 
       VALUES (20004, N'Iñtërnâtiônàlizætiøn');");
} 
```

请注意，您还需要检查有关字符集排序规则的表设置。

# asp.net-mvc - 我可以在 web.config 中存储 ASP.NET MVC 路由吗？

> ID：773502
> 
> 赞同：2
> 
> 时间：2009-04-21T16:33:30.303
> 
> 标签：asp.net-mvc, routing, web-config

除了 Global.asax 类之外，我还在寻找一种在我的 web.config 文件中存储路由信息的方法。存储在配置文件中的路由需要比以编程方式添加的路由具有更高的优先级。

我已经完成了搜索，但我能想到的最接近的是 Codeplex 上的 RouteBuilder ( [http://www.codeplex.com/RouteBuilder](http://www.codeplex.com/RouteBuilder) )，但这不适用于 MVC 的 RTM 版本。是否存在与最终 1.0 兼容的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T17:02:54.663

我不能保证下面的代码会工作，但它会构建:) 将 RouteBuilder.cs 中的 Init 方法更改为以下内容：

```
 public void Init(HttpApplication application)
    {                  
        // Grab the Routes from Web.config
        RouteConfiguration routeConfig = 
            (RouteConfiguration)System.Configuration.ConfigurationManager.GetSection("RouteTable");

        // Add each Route to RouteTable
        foreach (RouteElement routeElement in routeConfig.Routes)
        {
            RouteValueDictionary defaults = new RouteValueDictionary();

            string[] defaultsArray = routeElement.Defaults.Trim().Split(',');

            if (defaultsArray.Length > 0)
            {
                foreach (string defaultEntry in defaultsArray)
                {
                    string[] defaultsEntryArray = defaultEntry.Trim().Split('=');

                    if ((defaultsEntryArray.Length % 2) != 0)
                    {
                        throw new ArgumentException("RouteBuilder: All Keys in Defaults must have values!");
                    }
                    else
                    {
                        defaults.Add(defaultsEntryArray[0], defaultsEntryArray[1]);
                    }
                }
            }
            else
            {
                throw new ArgumentException("RouteBuilder: Defaults value is empty or malformed.");
            }

            Route currentRoute = new Route(routeElement.Url, defaults, new MvcRouteHandler());
            RouteTable.Routes.Add(currentRoute);
        }
    } 
```

此外，请随意删除 DefaultsType 类。之所以需要它，是因为 CTP 中的默认系统比 RTM 中的要复杂得多。

编辑：哦，添加`using System.Web.Routing;`到顶部并确保添加`System.Web.Mvc`和`System.Web.Routing`作为参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-08-04T07:43:17.270

看看这个： [http ://weblogs.asp.net/fredriknormen/archive/2008/03/11/asp-net-mvc-framework-2-define-routes-in-web-config.aspx](http://weblogs.asp.net/fredriknormen/archive/2008/03/11/asp-net-mvc-framework-2-define-routes-in-web-config.aspx)

# messaging - 消息代理和 ESB 之间的区别

> ID：773503
> 
> 赞同：139
> 
> 时间：2009-04-21T16:34:02.270
> 
> 标签：messaging, esb, service-broker

我已经阅读了有关消息代理和 ESB 的不同问题/文章（甚至在 stackoverflow 上）。仍然不知道消息代理和 ESB 之间的明确划分区别是什么？现在我在这里尝试比较产品，Websphere Broker 和 Mule ESB！

首先，（任何版本）Webshere Broker 是 ESB 吗？我们的 IBM 产品人员声称它是 ESB！（我对此并不感到惊讶）。

我有限的信息告诉我，Message Broker 在 HUB-SPOKE 模型上工作。然而，ESB 在总线架构上工作。这到底是什么意思？我已经读过，如果 HUB 失败（我猜不可用）那么经纪人就完全失败了。这不是 ESB 的情况（所以那些人说）。我在这里不明白的是“如果 BUS”发生故障怎么办？

现在关于 ESB 和 Brokers 的常见内容是，它们提供路由、转换、编排等。因此，如果它们都提供这些，那么我为什么要选择一个而不是另一个。

另一个冲突领域是关于转型。与 Message Brokers 相比，ESB 是否以不同的方式促进它？我真的很想对此有所了解。

现在谈论水平缩放。谁胜过谁？或者它们在复杂性（或任何其他因素）方面都具有同等的可扩展性。当然，在成本方面，Webshpere Broker 会为每个盒子（更不用说每个 cpu）向您收费。我相信，即使是商业 MULE ESB 也不会这样做。撇开其中的成本部分不谈，ESB 扩展和 Message Broker 扩展的含义是什么。我碰巧知道您可以在 ESB 中扩展到服务级别。这在消息代理中可能吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2009-06-25T02:53:01.337

您可以使用没有服务总线的转换代理，反之亦然。就具体产品而言，我不认为任何一种产品都是纯粹的一种或另一种，因为它们相互补充的方式。有些产品在一个领域更强大，而另一些则在另一个领域更强大。也许需要根据哪个功能最能解决单个问题来做出选择。

与 ESB 产品相比，代理可能拥有更好的内置“乐高积木”来构建转换链。作为 ESB 投入使用的代理可能会在负载下被压垮并且不能很好地扩展，或者可能缺乏强大的日志和处理日志的工具。

一旦发现并修复了严重的逻辑错误，一些 ESB 允许回滚数据库更新并将队列重播到更正的应用程序中。我认为大多数经纪人都没有整合这种级别的交易支持。要在所有“交易”中发挥作用，几乎必须是业务事件（销售、续订、所有权变更等），而不是像 RPCish“数据库更新”之类的东西。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2009-04-22T19:16:20.060

免责声明：我是一名 IBM 顾问，专门研究 WebSphere ESB。此评论不以任何官方身份留下。

ESB 与其说是一种产品，不如说是一种架构模式或概念——从广义上讲，一种基于服务的松散耦合工程方式。它的定义是争论不休的，并不是一成不变的。一般来说，ESB 是一组不相关的（在技术意义上）服务——它们公开接口，并从其他服务中使用它们。通常不涉及中心辐射型架构，尽管可以。

IBM 无疑将 WebSphere Message Broker 和 WebSphere ESB 都作为可以轻松构建 ESB（以及 DataPower 硬件设备）的产品进行营销。它们有不同的技术根源，但在目的上有一些重叠。此外，这并不是说您不能使用许多其他未标记为“ESB 产品”的东西来构建 ESB。

这并不能回答您的所有问题，但希望能解决 IBM 部分。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2015-01-16T10:28:22.980

Message Broker 和 ESB（企业服务总线）之间的区别主要在于“总线”这个词。

对我来说，Message Broker 是一个（通常很大的）进程，它将数据从一种结构转换为另一种结构或修改内容。

ESB 是一种面向消息的中间件 (MOM) 以及其他服务，其中之一*可能是*Message Broker。因此，ESB 可以包含消息代理作为其组件之一。总线由多个进程组成，否则我不会称它为“总线”。总线的本质是有多个组件服务于不同的任务，每个组件都通过 MOM 进行通信并遵循某种形式的“通用数据格式”。总线将包括：向 MOM 发送数据的应用程序、数据库适配器、消息代理、MOM 桥等。

分离有点渐进，但 Message Broker 架构和 Bus 之间的最大区别在于**粒度**。如果您的任务是集成应用程序 A、B、..、Z 和几个数据库，您可以使用一个连接每个人的大型 Message Broker 来做到这一点。或者在 ESB 中，多个小组件只接管少量任务。例如，一个适配器连接到 A，另一个连接到 B（但他们不进行转换），然后每个适配器将他们的东西发送到一个（或多个）消息代理，每个都应该尽可能简单 - 例如不必须了解“A”或“B”的数据模型。一个好的 ESB 应该在总线上有一个通用的数据定义，从各个应用程序的“差异”中抽象出来。

转换：ESB 对转换没有帮助，除非它带有消息代理。但无论如何，每个好的 ESB 都应该包含一个 Message Broker。Message Broker 应该是您的总线转换专家，但仅此而已。

水平扩展：如果您只有 3 个要连接的东西（现在和永远），那么获得完整的 ESB 可能不值得。Message Broker 的优势在于它只是一个大进程。您可以在那里配置所有内容，并为您的所有数据映射、过滤和路由提供一个中心位置。

但是，如果您要连接 30 个应用程序，那么一个 Message Broker 可能会停止运行。当然你可以购买更多的实例，运行冗余的东西，等等，但是你应该改变你的策略来“本地化”工作。每个应用程序的适配器（每个可能是一个小的 Message Broker 实例）应该能够生成和/或接收抽象的公共数据模型（例如，具有共享 XSD 的 XML）。也可以有一个用于转换任务的中央消息代理，但该实例应该不知道数据模型 A 或 B。因此 ESB 应该将处理转移到专家组件，而不是将所有内容都放在一个中央位置。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2011-04-04T14:34:18.313

几天前我刚刚读了 Udi Dahan 的这篇文章，这可能会让您更清楚地了解我认为的一个根本区别。

[http://www.udidahan.com/2011/03/24/bus-and-broker-pubsub-differences](http://www.udidahan.com/2011/03/24/bus-and-broker-pubsub-differences)

报价：

> 给定事件类型只能有一个发布者的规则是总线与代理的区别之一，尽管两者显然都允许您拥有多个订阅者

...

> 不幸的是，有许多代理式技术正在企业服务总线的旗帜下销售。虽然有些产品能够以集中式和分布式方式部署（有时称为“联合”或“嵌入式”模式），但许多产品并不强制执行“每个事件类型的单一发布端点”规则。
> 
> 没有这个约束，就太容易出错了。

希望能帮助到你。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-01-22T12:36:20.697

企业服务总线为业务提供了三个关键价值：

1.  基于上下文或内容的交易路由；
2.  从一个消息域或传输转换到另一个消息域或传输；
3.  多对多服务连接。

ESB 提供服务的松散耦合，允许将服务重构为与最初设想或开发服务时完全不同的应用程序上下文，并促进应用程序的重用，而无需重新编码应用程序。WebSphere Message Broker（或现在称为 IBM Integration Bus）是企业服务总线的主要示例。有关在几行代码中带来强大功能的简单代码示例，您可以在此处查看我的帖子： [http](http://soabus.org/viewtopic.php?f=3&t=13) ://soabus.org/viewtopic.php?f=3&t=13 。IIB 运行时内部的基本结构称为*逻辑消息树*（LMT）。开发人员想要做的一切都是在 LMT 上进行某种类型的操作。ESQL 是开发人员可以用来在 LMT 上执行这些操作的最有效的语言，尽管支持许多其他语言（例如，Java、PHP、Python 等）。没有其他产品能与开发 ESB 的效率和易用性相提并论应用程序比 IBM Integration Bus 更重要，因为这些应用程序 90% 的编码是通过将节点拖放到托盘上来完成的。这样就只剩下 10% 的编码工作需要由消息流开发人员完成。顺便说一句，IBM 已经停止使用 WebSphere ESB，而且许多与 IBM Integration Bus 竞争的产品几年来都没有看到任何新的开发。可以在 soabus.org 上查看各种 ESB 产品列表。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2021-01-07T13:34:46.997

[我从另一个主题 ( https://stackoverflow.com/a/3346417/5816637](https://stackoverflow.com/a/3346417/5816637) )中找到的 Shimon Amit 复制了这个解释，这对我来说非常有意义。

*   **ESB**在消息代理之上提供附加层，例如路由、转换和业务流程管理。它是应用程序之间的中介，集成了 Web 服务、REST 端点、数据库连接、电子邮件和 ftp 服务器——你可以说它。它是一个高级集成主干，可在使用不同协议的应用程序网络中协调互操作性。

*   **消息代理**是一个较低级别的组件，它使您作为开发人员能够在发布者和订阅者之间中继原始消息，通常在同一系统的组件之间但并非总是如此。它用于启用异步处理以保持较低的响应时间。有些任务需要更长的时间来处理，如果它们对时间不敏感，你不希望它们拖延。相反，将消息发布到队列（作为发布者）并让订阅者选择它并“稍后”处理它。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-09-20T19:23:46.977

IBM 从那以后更改了他们的 ESB 产品的名称，所以我不会提及名称或供应商。

ESB 允许业务信息在跨多个硬件和软件平台的不同应用程序之间流动。ESB 更像是一个中间件层，它包含应用程序连接逻辑和最小到没有业务逻辑。这允许应用程序做它最擅长的事情，而不必担心嵌入任何连接逻辑来与需要来自它的数据的其他 N 个应用程序交互。ESB 架构试图解决企业中的点对点意大利面混乱。

ESB 和 Message Broker 是彼此的同义词，但是正如上面的回复之一所强调的那样，Messages Broker 模式是更大的 ESB 域的一部分。ESB 中的字母“B”类似于计算机体系结构中的总线（硬件）。主板或计算机中的总线连接各种组件以实现计算机的功能。ESB 是一种基于软件的总线，用于连接企业中的各种服务。中心辐射型是 ESB 架构支持的模式之一。在单体世界中，每个供应商都有自己的高可用性部署架构，以确保 ESB 可用。任何 ESB 供应商的最新产品都是基于微服务的部署模型或托管在他们自己的称为 iPAAS 的云中。因此，这可确保 Bus 永远不会失败或暂时失败，并根据您选择的部署模型进行自我修复。借助基于微服务的部署或 iPAAS，ESB 现在具有自动扩展功能（水平或垂直），其功能会因所选供应商而异。

对于 ESB 提供的非常高级的功能，您可以通过以下链接 => [https://en.wikipedia.org/wiki/Enterprise_service_bus](https://en.wikipedia.org/wiki/Enterprise_service_bus)

# java - 如何在 Java Web 应用程序中使用 jQuery 学习 AJAX

> ID：773508
> 
> 赞同：2
> 
> 时间：2009-04-21T16:34:51.503
> 
> 标签：java, jquery, ajax, servlets

有人可以指点我使用 jQuery 使用 Java（servlet）创建 AJAX 应用程序的教程。我正在查看[使用 JQuery 在 Java Web 应用程序中实现 Ajax](http://www.ajaxprojects.com/ajax/tutorialdetails.php?itemid=438#start)教程，这与我需要的类似，但它不包括大部分细节。

如果您知道一个好的教程、文本 + 图形或视频，或者知道主要步骤并可以概述它们，那将不胜感激。我知道这似乎对谷歌来说应该很容易，并想出 100 多个答案，但事实并非如此，这就是我要问的原因。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-21T16:48:00.147

我认为那里的许多教程都使事情变得复杂。请记住，AJAX 请求与其他请求没有什么不同。

看看[这个](http://viralpatel.net/blogs/2009/04/jquery-ajax-tutorial-example-ajax-jquery-development.html)能不能帮到你。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-21T17:32:06.373

他对他的观众有很多假设。本教程是为了解 Java Web 应用程序开发的人编写的，至少了解一些基本水平，并且处理过一点 Javascript，甚至可能尝试过一两个 jquery 教程。我认为这很好，因为这意味着熟悉所有这些的人**将**能够直接进入并了解问题的实质，而无需过滤掉他们已经知道的所有内容。也许顶部的一段解释这些假设是个好主意，但我离题了......

作为一个潜在的陷阱，让我印象深刻的是天气 servlet 位于 ajaxify 包中：

```
 V------see?
<servlet-class>ajaxify.WeatherServlet</servlet-class> 
```

因此，您需要确保在 中指定该包`WeatherServlet.java`，或对其进行更改以匹配您正在执行的操作。此外，没有提及在您的 JSP中包含该`jquery.js`文件：`<head>`

```
<script type="text/javascript" src="jquery.js" /> 
```

显然，您需要在表单周围包含代码以使其成为一个完整的 html 页面，因此您将拥有一个`<head>`可以放置各种`<script>`标签的元素。您还需要`WeatherServlet`像在任何其他 Java Web 应用程序中一样完成该课程：

```
public class WeatherServlet extends HttpServlet
{
  ... 
```

顺便说一句，我认为这是一个很棒的教程。我熟悉Servlets和JSP，知道AJAX背后的概念，知道jQuery，和jQuery混了十分钟左右。该教程完美地填补了我对所有这些部分如何组合在一起的知识空白。我不知道 jQuery 可以让 AJAX 如此容易处理，这会让我更加认真地看待 jQuery。

# sql-server-2005 - 使用链接服务器在 oracle 和 sql server 之间移动数据

> ID：773515
> 
> 赞同：0
> 
> 时间：2009-04-21T16:36:30.860
> 
> 标签：sql-server-2005, oracle, linked-server, loadjava

我已经使用 Oracle 提供程序 oledb 在 Sql Server 2005 机器上设置了 Oracle 链接服务器，它从 sql server 2005 到 oracle 9i 工作正常，即当我从 sql server 运行分布式查询时，我从 oracle server 到 sql server 获取数据。现在我不知道如何从 Oracle 服务器运行分布式查询并重复从 sql 服务器获取数据。我必须设置 Dsn 吗？在从 oracle 服务器运行查询之前，我还需要设置哪些其他内容？

仅供参考：Oracle 服务器是 Sun solaris 服务器，SQL 服务器是 x64 Windows Server 2003。Sql 服务器上安装了 oracle 客户端，其中包含用于 OLEDB 的 ORACLE Provider 的 odac 驱动程序。我将使用 loadjava 将 java 加载到 oracle 中，而不是在两者之间重复移动数据。（Java、存储过程和来自 oracle 的触发器以从 sql server 获取数据）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-21T23:15:58.870

[这](http://www.databasejournal.com/features/oracle/article.php/10893_3442661_1/Making-a-Connection-from-Oracle-to-SQL-Server.htm)是一种方法。[DG4ODBC](http://www.easysoft.com/applications/oracle/database-gateway-dg4odbc.html)设置指南在这里。

[这](http://forums.oracle.com/forums/thread.jspa?messageID=2276389)也可能有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-01-20T19:42:22.680

链接数据库是第一阶段。之后您可能会遇到我们所面临的问题，例如无法将获取的行从 Sql Server 远程删除到 Oracle Server。我将发布一个关于此的问题，奇怪的是我们用于数据同步的程序的响应不同。

# html - 样式输入元素以填充其容器的剩余宽度

> ID：773517
> 
> 赞同：217
> 
> 时间：2009-04-21T16:37:03.587
> 
> 标签：html, css

假设我有一个这样的 html 片段：

```
<div style="width:300px;">
    <label for="MyInput">label text</label>
    <input type="text" id="MyInput" />
</div> 
```

这不是我的确切代码，但重要的是在固定宽度容器的同一行上有一个标签和一个文本输入。如何在不包装且不知道标签大小的情况下设置输入以填充容器的剩余宽度？

* * *

## 回答 #1

> 赞同：163
> 
> 时间：2012-08-05T11:09:21.787

这是一个简单而干净的解决方案，无需使用 JavaScript 或表格布局技巧。它类似于这个答案：[输入文本自动宽度填充 100% with other elements floating](https://stackoverflow.com/questions/10244927/input-text-auto-width-filling-100-with-other-elements-floating)

使用 span 包装输入字段很重要`display:block`。接下来的事情是按钮必须先出现，然后输入字段。

然后您可以将按钮浮动到右侧，输入字段填充剩余空间。

```
form {
    width: 500px;
    overflow: hidden;
    background-color: yellow;
}
input {
    width: 100%;
}
span {
    display: block;
    overflow: hidden;
    padding-right:10px;
}
button {
    float: right;
}
```

```
<form method="post">
     <button>Search</button>
     <span><input type="text" title="Search" /></span>
</form>
```

一个简单的小提琴：http: [//jsfiddle.net/v7YTT/90/](http://jsfiddle.net/v7YTT/90/)

**更新 1：**如果您的网站仅针对现代浏览器，我建议使用[灵活框](https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Flexible_boxes)。在这里你可以看到[当前的支持](http://caniuse.com/flexbox)。

**更新 2：**这甚至适用于与输入字段共享完整内容的多个按钮或其他元素。这是[一个例子](http://jsfiddle.net/v7YTT/1439/)。

* * *

## 回答 #2

> 赞同：151
> 
> 时间：2009-04-21T16:47:12.767

尽管每个人都讨厌表格进行布局，但他们确实可以帮助处理这样的事情，无论是使用明确的表格标签还是使用 display:table-cell

```
<div style="width:300px; display:table">
    <label for="MyInput" style="display:table-cell; width:1px">label&nbsp;text</label>
    <input type="text" id="MyInput" style="display:table-cell; width:100%" />
</div> 
```

* * *

## 回答 #3

> 赞同：62
> 
> 时间：2014-07-09T05:18:41.353

我建议使用 Flexbox：

请务必添加正确的供应商前缀！

```
form {
  width: 400px;
  border: 1px solid black;
  display: flex;
}

input {
  flex: 2;
}

input, label {
  margin: 5px;
}
```

```
<form method="post">
  <label for="myInput">Sample label</label>
  <input type="text" id="myInput" placeholder="Sample Input"/>
</form>
```

* * *

## 回答 #4

> 赞同：51
> 
> 时间：2015-09-04T02:19:32.087

请为此使用 flexbox。你有一个容器，它将把它的孩子排成一排。第一个孩子根据需要占用它的空间。第二个弯曲以占用所有剩余空间：

```
<div style="display:flex;flex-direction:row">
    <label for="MyInput">label&nbsp;text</label>
    <input type="text" id="MyInput" style="flex:1" />
</div>
```

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2012-12-01T11:27:04.020

实现这一目标的最简单方法是：

**CSS：**

```
label{ float: left; }

span
{
    display: block;
    overflow: hidden;
    padding-right: 5px;
    padding-left: 10px;
}

span > input{ width: 100%; } 
```

**HTML：**

```
<fieldset>
    <label>label</label><span><input type="text" /></span>
    <label>longer label</label><span><input type="text" /></span>
</fieldset> 
```

**看起来像：http:** [//jsfiddle.net/JwfRX/](http://jsfiddle.net/JwfRX/)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-04-28T09:03:49.183

非常简单的技巧是使用`CSS calc`公式。所有现代浏览器、IE9、各种移动浏览器都应该支持这一点。

```
<div style='white-space:nowrap'>
  <span style='display:inline-block;width:80px;font-weight:bold'>
    <label for='field1'>Field1</label>
  </span>
  <input id='field1' name='field1' type='text' value='Some text' size='30' style='width:calc(100% - 80px)' />
</div> 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-03-14T09:35:13.907

你可以试试这个：

```
div#panel {
    border:solid;
    width:500px;
    height:300px;
}
div#content {
	height:90%;
	background-color:#1ea8d1; /*light blue*/
}
div#panel input {
	width:100%;
	height:10%;
	/*make input doesnt overflow inside div*/
	-webkit-box-sizing: border-box;
       -moz-box-sizing: border-box;
            box-sizing: border-box;
	/*make input doesnt overflow inside div*/
}
```

```
<div id="panel">
  <div id="content"></div>
  <input type="text" placeholder="write here..."/>
</div>
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-09-03T02:42:48.333

如果您使用的是 Bootstrap 4：

```
<form class="d-flex">
  <label for="myInput" class="align-items-center">Sample label</label>
  <input type="text" id="myInput" placeholder="Sample Input" class="flex-grow-1"/>
</form> 
```

更好的是，使用 Bootstrap 内置的功能：

```
 <form>
    <div class="input-group">
      <div class="input-group-prepend">
        <label for="myInput" class="input-group-text">Default</label>
      </div>
      <input type="text" class="form-control" id="myInput">
    </div>
  </form> 
```

[https://jsfiddle.net/nap1ykbr/](https://jsfiddle.net/nap1ykbr/)

# .net - 分页支持 - ADO.NET Entitry Framework 和 LINQ

> ID：773521
> 
> 赞同：4
> 
> 时间：2009-04-21T16:37:46.677
> 
> 标签：.net, linq, entity-framework, ado.net, paging

通过 ADO.NET EF 和 LINQ 提供什么样的分页支持？

“前 10 个”选择是什么样的？

“下一个 10”选择？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-21T16:49:52.480

正如其他人在这里解释的那样， Take() 和 Skip() 是您所需要的。

他们会截断结果集，为您提供所需的页面。

您必须以某种方式维护 PageIndex 和 PageSize 信息，以便在运行查询时可以传递它们。例如，如果您的数据访问是通过 Web 服务完成的，您将在传递索引/大小的同时作为过滤条件，在客户端（应用程序或页面，如果它是网站）中维护这些值。

没有开箱即用的“用于分页的状态迭代器”，如果那是您正在寻找的......

此外，如果您正在实施“标准分页”构造，则需要在限制查询之前获取记录总数，您可以这样做，假设您的函数以某种方式获取 PageSize 和 PageIndex 作为参数：

```
var query = ...your normal query here...
int totalRecordCount = query.Count();
var pagedQuery = query.Skip(PageIndex*PageSize).Take(PageSize); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-04-21T16:42:02.407

> Take 关键字用于决定要获取多少条记录。下面提供了 Take 关键字的一个简单示例。
> 
> 列出客户 = GetCustomerList();
> 
> ```
> var first3Customers = (
>             from c in customers
> 
>             select new {c.CustomerID, c.CustomerName} )
>             .Take(4); 
> ```
> 
> 在这里，我们将前 4 位客户作为提供的列表。
> 
> 我们也可以使用 where 子句先缩小列表范围，然后取其中的 4 个。
> 
> ```
> var first3Customers = (
>             from c in customers
>            where c.Region == "Kol"
> 
>             select new {c.CustomerID, c.CustomerName} )
>             .Take(4); 
> ```
> 
> 但是，如果我们想获取第 4 条和第 8 条记录之间的数据怎么办。在这种情况下，我们使用 skip 关键字来跳过我们不想要的记录数（从顶部开始）。这是使用 Skip 关键字的示例。
> 
> ```
> var first3Customers = (
>             from c in customers
>            where c.Region == "Kol"
> 
>             select new {c.CustomerID, c.CustomerName} )
>             .Skip(3).Take(4); 
> ```

更多[在这里](http://www.vikramlakhotia.com/Using_Take_and_Skip_method_in_LINQ_queries.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T13:41:45.147

如果您的 Visual Studio 中有可用的 nuget，则可以添加`PagedList`包。

[在 asp.net](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application)上查看此链接

# c#-4.0 - 如何在 C# 4.0 中编写并行计算过程

> ID：773523
> 
> 赞同：4
> 
> 时间：2009-04-21T16:37:52.277
> 
> 标签：c#-4.0, parallel-processing

如何在 C# 4.0 中实现并行计算过程。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-21T16:40:09.417

例如，通过使用[Task Parallel Library](http://msdn.microsoft.com/en-us/magazine/cc163340.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-21T16:44:13.197

.NET 3.5 中的所有并行化选项都将存在于 C# 4.0 中。

但是，任务并行库将作为 BCL 的一部分直接移入 System.Threading。这将允许诸如 Parallel.For 循环之类的构造，使用新的 TaskScheduler 等。

此外，PLINQ 将包含在 .NET 4 的 BCL 中，它允许运行并行查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-07T23:20:56.807

您可以通过在此处下载 CTP 来使用 VS 2008 上的任务并行库：

[http://www.microsoft.com/downloads/details.aspx?FamilyId=348F73FD-593D-4B3C-B055-694C50D2B0F3&displaylang=en](http://www.microsoft.com/downloads/details.aspx?FamilyId=348F73FD-593D-4B3C-B055-694C50D2B0F3&displaylang=en)

或者，如果您是 MSDN 订阅者，您可以在此处试用 Dev 10 测试版：

[见评论所以认为我是垃圾邮件发送者]

两个版本之间在命名空间方面存在变化，并且一些 API 已经过调整，但任何一个都可以帮助您入门。

阿德

# c++ - std::map 迭代器不在 MFC 应用程序中迭代

> ID：773525
> 
> 赞同：0
> 
> 时间：2009-04-21T16:38:29.637
> 
> 标签：c++, iterator, stdmap

我在旧版 MFC 应用程序中声明了一个 std::map：

```
typedef std::map<long, CNutrientInfo> NUTRIENT_INFO_MAP;
typedef NUTRIENT_INFO_MAP::const_iterator NUTRIENT_INFO_ITER;
typedef NUTRIENT_INFO_MAP::value_type NUTRIENT_INFO_PAIR;
static NUTRIENT_INFO_MAP m_NutrientInfoMap; 
```

m_NutrientInfoMap 在应用程序加载时通过循环遍历表并创建 CNutrientInfo 实例然后将其插入到 std:map 中来填充，如下所示：

```
m_NutrientMapInfo.insert(NUTRIENT_INFO_PAIR(nutrient.GetId(), nutrient)); 
```

std::map 现在包含由数据库定义的营养素列表。在某些时候，用户可以将新的营养素添加到此列表中，并检查用户添加的内容是否已存在于列表中。它会像这样检查：

```
NUTRIENT_INFO_ITER iter = m_NutrientInfoMap.begin();
while (iter != m_NutrientInfoMap.end())
{
    m = (*iter).second;
    if (_stricmp(m.GetFullName().c_str(), name.c_str()) == 0)
    {
        return m;
    }
    iter++;
} 
```

或者至少它应该是。当函数实际被调用时，它永远不会超过 while 循环的初始行。在那里放置一个断点只是表明有问题的行被一遍又一遍地调用并且永远不会超过它，这会挂起应用程序。如果您进入实际比较，它会正确比较，然后返回到 while 循环行。再次进入循环体只是返回到 while 循环行。同样的逻辑在应用程序的其他地方使用没有问题，所以我很难理解在这种情况下发生了什么。我已经使用 for 循环重新编写了上面的逻辑，它工作得很好，所以我并不是无法解决它，但 C++ 不是我最强大的语言，因为这是我的遗留应用程序我试图帮助支持，我' 我真的很想学习和理解为什么这样做是为了将来参考。另外，由于逻辑在其他地方而不是在这里起作用，因此可能有一个根本原因是实际需要解决的问题。

对此的任何建议或想法将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-21T16:43:44.197

您的示例实际上是从源代码粘贴的吗？也许它看起来更像：

```
while (iter != m_NutrientInfoMap.end());   // <== note the semi-colon
{
    m = (*iter).second;
    if (_stricmp(m.GetFullName().c_str(), name.c_str()) == 0)
    {
        return m;
    }
    iter++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T17:08:24.213

上面发布的代码中没有任何内容会导致这种行为。您确定要在循环内递增其他迭代器，还是可能有两个具有相同名称的迭代器（一个在循环内）具有不同的范围，并且您正在递增错误的迭代器？如果不是这种情况，那么我能看到的唯一其他选择是记下 m_NutrientInfoMap.end() 的值并检查为什么 ++iter 没有评估该值。

# ms-access - 在 Access 中托管时，Crystal Report Viewer 缺少图标

> ID：773536
> 
> 赞同：0
> 
> 时间：2009-04-21T16:41:00.210
> 
> 标签：ms-access, crystal-reports, ms-access-2007

我在 Access 2007（但 2003 格式）表单中使用 Crystal Reports XI Viewer Active 控件。我使用 SQL Server 2008 作为后端。查看器可以正常显示报告，但没有工具栏图标。按钮和工具提示按预期工作，只是没有图像。

搜索此内容时，我使用 WebForms 查看器看到了无数关于此问题的引用，但没有使用 ActiveX 控件。

我想可能是缺少参考，所以我添加了参考对话框提供的每个 Crystal 版本 11 DLL。我怀疑它可能是另一个，但不知道还要寻找什么。

有没有其他人遇到过这个？有任何想法吗？

（请不要推荐使用 Access 的内置报告。业务需求决定了 Crystal，所以我的双手被束缚了。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-22T03:58:35.323

添加所有 DLL 不会做任何将 ActiveX 控件放在窗体上不会做的事情。也就是说，使用 ActiveX 控件会自动在 Access 中创建适当的引用。

我建议不要在任何 Access 应用程序中使用任何 ActiveX 控件（内置的控件除外），因为它们可能会导致很多安装问题。

并非所有 ActiveX 控件都与 Access 兼容，因此您需要与您的供应商核实他们是否认为兼容。如果没有，那么你可能不走运。不太可能有很多 Access 程序员尝试在 Access 本身中使用 Crystal Reports ActiveX 控件，因为绝大多数 Access 应用程序都不需要它。

除了 ActiveX 控件，还有其他可以使用的界面吗？它有什么作用？以表格形式显示报告？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T16:57:56.180

关闭并重新打开 Access 后问题自行解决。

# asp.net - 隐藏asp.net WebMethod返回的异常的堆栈跟踪？

> ID：773546
> 
> 赞同：2
> 
> 时间：2009-04-21T16:43:27.410
> 
> 标签：asp.net, web-services, asmx

我在我的 aspx 页面中使用带有属性 [WebMethod] 的方法。我不使用任何 asp.net ajax，而是使用 jQuery 来调用这些方法并以 JSON 格式返回对象。这一切都很好。

接下来，我在 webMethod 中添加了一个授权检查，如果当前用户无权访问我需要让调用 JavaScript 知道的功能。

所以我抛出了一个 AccessViolationException 异常，然后可以由 JavaScript 中的 OnError 回调函数解析。这也有效，但例外包括完整的 StackTrace，我不想将其提供给调用客户端。

当 WebMethod 返回业务对象时，我可以使用哪些其他方式向客户端返回“拒绝访问”？

我正在使用 ASP.Net 3.5SP1 和 jQuery 1.32

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-06-01T06:44:20.630

您还可以添加：

```
customErrors mode="On"/ 
```

在您的 web.config 中，这将删除堆栈跟踪并只留下异常消息

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-21T16:51:02.837

为什么要通过电线传播错误？为什么不使用错误响应？

只需将您的对象包装在一个响应对象中，该对象可以包含状态错误代码和向用户显示的错误消息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T18:30:35.203

正如 NunFur 所建议的那样，我改变了我的方法，而不是抛出错误，而是返回一个“更丰富”的对象。

至少有两个选项，第一个是将我的业务对象封装到具有一些状态属性的响应对象中。我试过这个，但它使 JSON 更复杂。因此，我没有添加一个新对象，而是向我的业务对象添加了两个属性，例如 ServiceStatus 和 ServiceMessage。默认情况下，这些是 200 和 ''，但如果出现任何问题（无法访问，正确的错误），可以由 WebMethod 代码设置。在这种情况下，它们的业务对象将为“空”（无数据）。然后，JavaScript 代码首先检查 ServiceStatus 并做出适当反应。

我将这两个字段添加到 WebMethods 返回的所有对象中，甚至是一个简单的字符串。他们必须实现具有这两个属性的接口。

现在，如果发生意外情况，我可以完全控制它。

感谢您的输入

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-21T17:14:35.713

当事情真的出错时，我会保存例外情况。（例如无法连接到数据库）

要么不返回任何内容（null/nill/whatever），要么返回 false bool 值。

抱歉，我没有比这更好的答案了……我必须继续寻找自己。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-21T17:25:40.490

您可以查看 SoapException： http: [//msdn.microsoft.com/en-us/library/system.web.services.protocols.soapexception (VS.71).aspx](http://msdn.microsoft.com/en-us/library/system.web.services.protocols.soapexception(VS.71).aspx)

我只是不确定，当它从 JavaScript 调用时它是否会起作用。特别是如果它是通过获取请求调用的。

BTW AccessViolationException 据我所知是在应用程序访问它无法访问的内存时抛出的。

/阿斯格

# asp.net - 如何在不关闭面板的 ModalPopup Extender 面板中设置控件（按钮）？

> ID：773547
> 
> 赞同：0
> 
> 时间：2009-04-21T16:43:30.903
> 
> 标签：asp.net, vb.net, ajaxcontroltoolkit, modalpopupextender

这是情况。

当用户编辑给定的数据时，他们可以添加消息/评论。这些作为子记录存储在 SQL 数据库中。单击 Add Message 按钮会弹出一个面板 (pnlMessage)，该面板由 AJAX ModalPopup Extender 提供。这需要一些输入，当单击面板中的“发送消息”按钮时（我学会了不设置“OkButton”属性的艰难方法），消息存储在数据库中，并且电子邮件被发送到预期收件人。那里没问题。

但是，我需要能够允许用户添加新的电子邮件地址（只要它们在我们的数据库中注册）。我有另一个 ModalPopup / 面板组合 (pnlSearch)，它与前一个面板 (pnlMessage) 上的按钮相关联。

用户应该能够添加电子邮件或单击搜索按钮以填充列表以供选择。

弹出面板 (pnlSearch) 出现得很好，但是单击“查找”按钮（它会启动搜索并返回用户应该从中选择的记录集合）关闭面板。

以前，当我将 Button 放入“OkControlID”属性时，我遇到了 Button.Click 事件永远不会触发的问题（CancelControlID 工作正常，因为我不想做任何事情）。删除“OkControlID=Button”行使其能够与 Button.Click 事件按预期触发完美配合。

所以现在我有一个带有“确定”按钮和一个“搜索”按钮的搜索面板 - 但在 Search.Click 完成后，面板应该保持不变并可见。我是否缺少一些基本上说“单击此按钮时不要关闭面板”的属性？当然，如果我在同一个会话中再次调出面板，之前的努力的结果就在那里（搜索结果）。

我试图避免使用 javascript，因为没有太多（如果有的话）可以支持这一点的经验。

帮助！

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T16:56:39.267

您可以将“搜索”面板和“搜索”按钮放在 UpdatePanel 中。UpdatePanel 内的任何内容都可以在不关闭弹出窗口的情况下发回。确保不要将应该关闭弹出窗口的按钮放在 UpdatePanel 内。

# vim - 在 Vim 中通过反转模式突出显示匹配项

> ID：773554
> 
> 赞同：5
> 
> 时间：2009-04-21T16:46:14.750
> 
> 标签：vim

如何使用 :match 命令在 Vim 中突出显示与给定模式不匹配的文本？

所以，我想要相反的：

```
:match myGroup /foo/ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-21T17:04:55.800

好吧，您可以执行以下操作：

```
:match myBaseHighlight /foo/
:2match myGroup /./ 
```

where`myBaseHighlight`被定义为您的默认外观 - 黑底白字，或其他。 `:match`将覆盖`:2match`，因此除此之外的所有内容都`/foo/`将成为`myGroup`亮点。

# c# - VS 项目名称中允许使用哪些字符？

> ID：773557
> 
> 赞同：9
> 
> 时间：2009-04-21T16:47:15.217
> 
> 标签：c#, .net, visual-studio, visual-studio-2008

有谁知道 VS 项目名称中允许使用哪些字符？某处有参考吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-04-21T16:55:52.403

> *   不能包含以下任何字符： / ? : & \ * " < > | # %
> *   不能包含 unicode 字符
> *   不能包含代理字符
> *   不能是保留名称，包括“CON”、“AUX”、“PRN”、“COM1”或“LPT2”
> *   不可能是 '。' 或者 '..'

我通过尝试使用我知道不会被接受的角色创建一个项目来获得此信息。即NTFS 文件路径中不允许的字符。即我使用了一个名为 | 的项目 得到错误。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-30T23:15:13.923

Visual Studio 在尝试使用无效字符创建项目时返回以下错误：

![Visual Studio 2012 中的无效项目名称错误](https://i.stack.imgur.com/AV1tv.png)

> ### 微软视觉工作室
> 
> * * *
> 
> 新项目
> 
> 项目和解决方案名称不能：
> 
> *   包含以下任何字符：`/` `?` `:` `&` `\` `*` `"` `<` `>` `|` `#` `%`
> *   包含 Unicode 控制字符
> *   包含代理字符
> *   是系统保留名称，包括`CON`, `AUX`, `PRN`,`COM1`或`LPT2`
> *   是`.`或`..`
> 
> 请输入一个有效的名字。
> 
> * * *
> 
> `OK`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T20:35:28.470

不使用空格或任何其他可能是 html 编码的字符也是一个好主意。见[http://www.troyhunt.com/2012/10/metadata-file-could-not-be-found-in.html](http://www.troyhunt.com/2012/10/metadata-file-could-not-be-found-in.html)

# ios - 设备被 touchesEnded 呼叫轰炸

> ID：773558
> 
> 赞同：2
> 
> 时间：2009-04-21T16:47:52.737
> 
> 标签：ios, iphone, cocoa-touch

我有一个简单的 OpenGL:ES 应用程序正在运行（它是一个游戏）。游戏加载并向用户显示“新游戏按钮”，然后您就进入了游戏。我正在使用 touchesBegan / touchesEnded 来处理触摸。然后我获取坐标并相应地处理它们。

我还有一个以 30Hz 运行的 NSTimer，它调用 renderScene 来绘制屏幕上的图形。

每隔一段时间在设备上（我还没有在模拟器上发生这种情况）在第一个之后我不再得到触摸事件。我试图在设备上对此进行调试，似乎在我收到第一个 touchesEnded 事件后，设备被 touchesEnded 调用轰炸了。发生这种情况时，我再也没有接到过 touchesBegan 电话。如果我按下 home 键并回到游戏中，通常一切都会正常工作。

这是我输入的代码，因为它存在于我的 EAGLView.m 代码中

```
#pragma mark    
#pragma mark UserInputStuff
#pragma mark    

#pragma mark 
#pragma mark touchesBegan
#pragma mark    

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
firstTouch = [touch locationInView:self];
lastTouch = [touch locationInView:self];
[(MyGameAppDelegate*)[[UIApplication sharedApplication] delegate]   HandleTouchEvent:firstTouch];   

}

#pragma mark    
#pragma mark touchesEnded
#pragma mark    

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent*)event 
{
UITouch *touch = [touches anyObject];
lastTouch = [touch locationInView:self];
[(MyGameAppDelegate*)[[UIApplication sharedApplication] delegate] HandleTouchEnded:lastTouch];  
} 
```

这是我的应用程序委托中存在的代码

```
#pragma mark 
#pragma mark HandleTouchEnded
#pragma mark A function to react to the touch that is no longer present on the screen
#pragma mark

- (void)HandleTouchEnded:(CGPoint)coordinate
{
if(_state == kState_Title)
{
    [self TitleCollisionDetection:coordinate];
    if(_buttonHighlighted)
    {
        _textures[kTexture_Background] = [[Texture2D alloc] initWithImage:[UIImage imageNamed:@"T4Background.png"]];
        glBindTexture(GL_TEXTURE_2D, [_textures[kTexture_Background] name]);
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);          
        [self resetGame];
    }
}
} 
```

这是配置触发以处理渲染器的计时器的代码。

```
//Start rendering timer
_timer = [NSTimer scheduledTimerWithTimeInterval:(1.0 / kRenderingFPS) target:self   selector:@selector(renderScene) userInfo:nil repeats:YES];
[UIApplication sharedApplication].idleTimerDisabled = YES; 
```

我显然在做一些愚蠢的事情。我错过了什么？为什么 touchesEnded 如此频繁地触发？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-22T19:27:52.780

实际上，有一个错误的第二次调用来启动 NSTimer

_timer = [NSTimer scheduledTimerWithTimeInterval:(1.0 / kRenderingFPS) target:self 选择器:@selector(renderScene) userInfo:nil repeats:YES];

这导致程序在不断地为计时器例程提供服务时，就无法获得主线执行时间。

性能分析器是您的朋友！！！我发现这个是因为虽然我认为我的应用程序应该以 30fps 运行，但我看到的结果却在 50fps 以上。起初我以为性能分析器坏了。事实证明，这是我的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T18:11:41.957

> [(MyGameAppDelegate*)[[UIApplication sharedApplication] delegate] HandleTouchEnded: firstTouch];

与

> [(MyGameAppDelegate*)[[UIApplication sharedApplication] delegate] HandleTouchEnded: lastTouch];

你不会被 TouchsEnded 轰炸。你被你的 firstTouch 和你的 lastTouch 对象是同一个对象这一事实轰炸了！

您应该将 NSLog 函数放入您`touchesBegan:`和`touchesEnded:`下次确认该行为。

# php - Magento ORM 文档

> ID：773562
> 
> 赞同：11
> 
> 时间：2009-04-21T16:49:44.010
> 
> 标签：php, django, orm, magento, entity-attribute-value

在源代码之外，是否有任何关于 Magento ORM 的大量文档？**我掌握了基础知识，通常可以挖掘 Mage代码**库，用 Mage::Log 调用乱扔垃圾并找出可行的方法，但如果我对模型的用途有一个高层次的了解，我的效率会大大提高要使用的。聚合方法如何工作，加入的最佳方式是什么，何时应该扩展模型，何时是使用 eav 模型与非 eav 模型的最佳时间等。

类似于[Django 模型文档](http://docs.djangoproject.com/en/dev/topics/db/models/)，但适用于 Magento。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-24T01:48:47.977

虽然关于 ORM 的文档不多，但这里有几页对我理解数据库结构有很大帮助，这将帮助您理解其他所有内容：

[http://www.magentocommerce.com/wiki/development/magento_database_diagram](http://www.magentocommerce.com/wiki/development/magento_database_diagram) [http://www.magentocommerce.com/boards/viewthread/7359/](http://www.magentocommerce.com/boards/viewthread/7359/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-30T10:23:45.550

对于基于 Zend Framework 的 Zend_Db_Adapter 的 Magento ORM，您可以使用 Zend Framework Programmers Reference（在[Zend Framework 的网站](http://framework.zend.com/)上以免费 pdf 格式提供）。我还发现此[链接](http://activecodeline.com/getting-things-in-magento-by-getmodel-and-getdata-methods/)有助于了解有关 Magento 模型的更多信息。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-15T21:55:27.727

自从回答了这个问题以来，已经在 magento 知识库的 ORM 上创建了一些文档。

介绍信息：[http ://www.magentocommerce.com/knowledge-base/entry/magento-for-dev-part-5-magento-models-and-orm-b​​asics](http://www.magentocommerce.com/knowledge-base/entry/magento-for-dev-part-5-magento-models-and-orm-basics)

高级 ORM 使用和 EAV 系统： http: [//www.magentocommerce.com/knowledge-base/entry/magento-for-dev-part-7-advanced-orm-entity-attribute-value](http://www.magentocommerce.com/knowledge-base/entry/magento-for-dev-part-7-advanced-orm-entity-attribute-value)

使用 Varien 集合（延迟加载、过滤等）： http: [//www.magentocommerce.com/knowledge-base/entry/magento-for-dev-part-8-varien-data-collections](http://www.magentocommerce.com/knowledge-base/entry/magento-for-dev-part-8-varien-data-collections)

# webcam - 所有的网络摄像头都使用 YUY2 吗？

> ID：773564
> 
> 赞同：2
> 
> 时间：2009-04-21T16:50:30.200
> 
> 标签：webcam, pixel, yuv

我注意到来自我的网络摄像头的原始数据来自 YUY2。实际上，这个“原始数据”是 AVICAP 回调的输入，我想这是来自网络摄像头的实际数据。

无论如何，所有网络摄像头都使用 YUY2 格式，还是我也应该期待不同的格式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T17:01:41.890

YUY2/YUYV 可能是最常见的。我还看到了使用 MJPEG 的网络摄像头，但不太常见。涵盖这两者将处理大多数非网络（Java 或其他）风格的网络摄像头。

# jquery - 如何使用 jQuery 多次更改图像的 alt 属性？

> ID：773569
> 
> 赞同：2
> 
> 时间：2009-04-21T16:51:13.290
> 
> 标签：jquery, image, accessibility, alt-attribute

这个问题完成了我[在这里](https://stackoverflow.com/questions/739267/jquery-how-to-change-image-and-alt-attribute-onclick-with-jquery)询问的关于如何使用 jQuery 在点击时更改图像的第一个问题。

我忘了说（即使我稍后编辑了我的帖子）我正在寻找一种方法来在每次通过点击更改图像时拥有不同的 alt 属性。

（这是为了更好的可访问性和 SEO 优化。）

由于 altCognito，这是实际的 html 代码：

```
<img id="radio_btn1" src="originalimage1.jpg" />
<br />
  <input type="radio" name="radio_btn1" value='image1.jpg' />
  <input type="radio" name="radio_btn1" value='image2.gif' />
  <input type="radio" name="radio_btn1" value='image3.png' />
  <input type="radio" name="radio_btn1" value='image4.jpeg' /> 
```

和jQuery：

```
imgFldr = 'images/nameofthesubfolder/';
$("input[type='radio']").click(function() {
   $('#'+this.name).attr('src', imgFldr+this.value).attr('alt', 'newattribute');
}); 
```

它可以在[jsbin](http://jsbin.com/esebu/edit)进行编辑。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-21T16:56:44.913

嗯... 由 Javascript 操作的 SEO 和内容一开始不应该在同一个帖子中。无论你做什么，如果你使用 Javascript 来显示你的内容，你就会损害你的搜索引擎可见性。

也就是说，您可以将这些图像放在 hasharray (imagename->alt) 中并从那里获取 alt，或者您可以将 alt 放在与文件名连接的无线电值中，并使用分隔符 | 然后在用于显示图像的函数中解析它们。

...所以简而言之：

```
<img id="radio_btn1" src="originalimage1.jpg" />
<br />
  <input type="radio" name="radio_btn1" value='image1.jpg|Image 1' />
  <input type="radio" name="radio_btn1" value='image2.gif|Image 2' />
  <input type="radio" name="radio_btn1" value='image3.png|Image 3' />
  <input type="radio" name="radio_btn1" value='image4.jpeg|Image 4' /> 
```

+

```
imgFldr = 'images/nameofthesubfolder/';
$("input[type='radio']").click(function() {
   var strarr = this.value.split('|');
   if(strarr.length < 2) return;
   $('#'+this.name).attr('src', imgFldr+strarr[0]).attr('alt', strarr[1]);
}); 
```

...或者：

```
<img id="radio_btn1" src="originalimage1.jpg" />
<br />
<input type="radio" name="radio_btn1" value='image1.jpg' />
<input type="radio" name="radio_btn1" value='image2.gif' />
<input type="radio" name="radio_btn1" value='image3.png' />
<input type="radio" name="radio_btn1" value='image4.jpeg' /> 
```

+

```
imgFldr = 'images/nameofthesubfolder/';
var imagesarr = {'image1.jpg': 'Image 1', 'image2.gif': 'Image 2','image3.png': 'Image 3','image4.jpeg': 'Image 4'}
$("input[type='radio']").click(function() {
   $('#'+this.name).attr('src', imgFldr+this.value).attr('alt', imagesarr[this.value]);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T17:00:57.633

为什么不将 alt 值放在输入的 rel 中，然后也将其放在图像上：

```
<img id="radio_btn1" src="originalimage1.jpg" />
<br />
  <input type="radio" name="radio_btn1" value='image1.jpg' rel="alt text 1" />
  <input type="radio" name="radio_btn1" value='image2.gif' rel="alt text 1" />
  <input type="radio" name="radio_btn1" value='image3.png'  rel="alt text 1" />
  <input type="radio" name="radio_btn1" value='image4.jpeg' rel="alt text 1" />
And the jquery:

imgFldr = 'images/nameofthesubfolder/';
$("input[type='radio']").click(function() {
   $("#radio_btn1").attr("src", imgFldr + $(this).val()).attr("alt", $(this).attr("rel"));
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T17:01:45.137

我不会为此使用`name`单选按钮中的属性。定义一个自定义属性：`data-Img` 或类似的东西。这也将帮助您符合下一个 html 标准。

```
var imgFldr = 'images/nameofthesubfolder/';

$("input[type='radio']").click(function() {

   var img = '#'+ $(this).attr('data-Img');

   var url = imgFldr + $(this).attr('value');

   $(img).attr('src', url)
            .attr('alt', 'newattribute');

}); 
```

你可能可以在一行中做到这一点......但我真的不明白这一点。先让它可读。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-21T17:03:08.283

你可以尝试这样的事情：

```
<img id="radio_btn1" src="originalimage1.jpg" />
<br />
<input type="radio" name="radio_btn1" value='image1' />
<input type="radio" name="radio_btn1" value='image2' />
<input type="radio" name="radio_btn1" value='image3' />
<input type="radio" name="radio_btn1" value='image4' />

imgFldr = 'images/nameofthesubfolder/';
var images = {
 image1: {'img': 'image1.jpg', 'alt': 'Alt for img1'},
 image2: {'img': 'image2.gif', 'alt': 'Alt for img2'},
 image3: {'img': 'image3.png', 'alt': 'Alt for img3'},
 image4: {'img': 'image4.jpeg', 'alt': 'Alt for img4'}     
}
$("input[type='radio']").click(function() {
 var imgObject = images[this.value];
 $('#'+this.name).attr('src', imgFldr+imgObject['img']).attr('alt', imgObject['alt']);
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-21T17:12:19.620

只需复制粘贴到新页面...您有**两种方法可以更改它**。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 
<head> 
<meta http-equiv="Content-type" content="text/html; charset=utf-8" /> 
<title>Sandbox</title> 

<style type="text/css" media="screen"> 
body { background-color: #000; font: 16px Helvetica, Arial; color: #fff; } 
</style> 

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script> 

<script type="text/javascript"> 

imgFldr = 'http://www.kde-look.org/CONTENT/content-m1/'; 

$(document).ready(function(){

   $("input[type='radio']").each( function(index) {
    var $radio = this;
    var alt = '';

    switch (index + 1) {
        case 1: alt = 'alt 1'; break;
        case 2: alt = 'alt 2'; break;
        case 3: alt = 'alt 3'; break;
        case 4: alt = 'alt 4'; break;
    }
    console.log('img ' + (index+1) + ': ' + $radio.value + ' with alt: ' + alt);

    $(this).click(function() { 
    // 1st way: using mynewalt attribute of the radio button (you can delete the switch case if you choose to use this)
       $('#myImage').attr('src', imgFldr+$radio.value).attr('alt', $(this).attr('mynewalt'));
    //2nd way: using the switch
       $('#myImage').attr('src', imgFldr+$radio.value).attr('alt', alt);
    });
   }); 

}); 

</script> 

</head> 
<body> 
<img id="myImage" src="http://www.kde-look.org/CONTENT/content-m1/m100860-1.png" /> 
<br /> 
  <input type="radio" name="radio_btn1" value='m102389-1.png' mynewalt='new alt 1' /> 
  <input type="radio" name="radio_btn1" value='m100856-1.png' mynewalt='new alt 2' /> 
  <input type="radio" name="radio_btn1" value='m100857-1.png' mynewalt='new alt 3' /> 
  <input type="radio" name="radio_btn1" value='image4.jpeg' mynewalt='new alt 4' /> 

</body> 
</html> 
```

# asp.net - 性能 asp.net 和 cookie

> ID：773572
> 
> 赞同：1
> 
> 时间：2009-04-21T16:52:25.003
> 
> 标签：asp.net, performance, cookies

编写一个asp.net 购物车。我正在利用会话来获取状态，但我也想将基本信息存储在 cookie 中。此信息将是项目/数量。我知道 cookie 的大小限制，但这里有问题。

是否有任何关于写入 cookie 而不是 sql 的性能成本的信息来源。在我当前的用例中，我最多会在每个页面帖子上写入 cookie（当然只有必须处理购物车的页面）

只是试图确定使用 cookie 的负面影响。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-21T17:10:58.780

有太多因素在起作用，无法回答这个问题。

你的数据库有多快？网络有多快？最终用户的网络连接速度有多快？

一般来说：cookies 足够快。但构造良好的数据库调用也是如此。

我在打这个电话时会考虑其他因素。Cookie 可能会消失，它们会超时，并且您通常无法真正控制它们。那是问题吗？如果是，则执行sql。如果没有，那就做一个cookie。数据的安全性是一个问题吗？如果是，则执行 sql。

顺便说一句：我做过的大多数购物车都使用 sql 来处理大部分数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T17:08:02.390

根据我的经验，编写 cookie 的成本比进行数据库调用要低得多，但是您想要存储多少数据，如果客户端阻止 cookie，它会破坏功能吗？

如果您希望使用 cookie 保持会话，为什么不在用户第一次到达时创建一个标识符 cookie 并将此 id 存储在会话数据中。然后当会话结束而不保存购物篮（即在会话结束事件中）时，将会话数据刷新到带有 cookie 标识符的数据库。然后，当用户稍后返回该站点时，通过获取 cookie 标识符来从数据库中恢复他们的最后一个购物篮。

# php - 在 PHP 中，如何处理 HFS+ 与其他地方的编码文件名的差异？

> ID：773574
> 
> 赞同：1
> 
> 时间：2009-04-21T16:52:26.640
> 
> 标签：php, macos, unicode, utf-8, unicode-normalization

我正在创建一个非常简单的文件搜索，其中搜索数据库是一个文本文件，每行一个文件名。该数据库是使用 PHP 构建的，并且通过 grepping 文件（也使用 PHP）找到匹配项。

这在 Linux 中效果很好，但[在使用非 ascii 字符时不适用于 Mac](https://sourceforge.net/tracker/?func=detail&aid=2766482&group_id=208076&atid=1004244)。看起来名称在 HFS+ (MacOSX) 上的编码方式与在 ext3 (Linux) 上的编码方式不同。这是一个test.php：

```
<?php
$mystring = "abcóüÚdefå";
file_put_contents($mystring, "");
$h = dir('.');
$h->read(); // "."
$h->read(); // ".."
$filename = $h->read();

print "string: $mystring and filename: $filename are ";

if ($mystring == $filename) print "equal\n";
else print "different\n"; 
```

运行 MacOSX 时：

```
$ php test.php
string: abcóüÚdefå and filename: abcóüÚdefå are different
$ php test.php |cat -evt
string: abcóü?M-^Zdefå$ and filename: abco?M-^Au?M-^HU?M-^Adefa?M-^J are different$ 
```

在 Linux（或 MacOSX 上安装了 nfs 的 ext3 文件系统）上运行时：

```
$ php test.php
string: abcóüÚdefå and filename: abcóüÚdefå are equal
$ php test.php |cat -evt
string: abcM-CM-3M-CM-<M-CM-^ZdefM-CM-% and filename: abcM-CM-3M-CM-<M-CM-^ZdefM-CM-% are equal$ 
```

有没有办法让这个脚本在两个平台上返回“相等”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-21T18:46:43.590

MacOSX 使用规范化形式 D (NFD) 来编码 UTF-8，而[大多数其他系统使用 NFC](http://www.j3e.de/linux/convmv/man/#hfs__on_os_x___darwin)。

![NFC 与 NFD](https://i.stack.imgur.com/MxjJB.jpg)

（[来自 unicode.org](http://unicode.org/reports/tr15/)）

NFD 到 NFC 的转换有[多种](https://github.com/widop/phpbb3/blob/master/includes/utf/utf_normalizer.php) [实现方式。](https://web.archive.org/web/20130511114752/http://rishida.net/code/showsource.php?source=normalization/n11n.php)在这里，我使用 PHP [Normalizer 类](http://php.net/manual/en/class.normalizer.php)来检测 NFD 字符串并将它们转换为 NFC。它在 PHP 5.3 中或通过[PECL 国际化扩展](http://pecl.php.net/package/intl)可用。以下修改将使脚本工作：

```
...
$filename = $h->read();
if (!normalizer_is_normalized($filename)) {
   $filename = normalizer_normalize($filename);
}
... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-21T17:38:29.633

似乎 Mac OS X/HFS+ 正在使用字符组合而不是单个字符。所以`ó`(U+00F3) 被编码为`o`(U+006F) + `´`(U+CC81, COMBINING ACUTE ACCENT)。另请参阅[Apple 的 Unicode 分解表](http://developer.apple.com/technotes/tn/tn1150table.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T17:08:57.910

您是否检查过两个系统使用相同的语言环境？

PHP 脚本在两个系统上都使用什么编码？

我也会尝试使用[strcmp](http://php.net/manual/en/function.strcmp.php)而不是 equals 运算符。我不确定 equals 运算符是否在内部使用 strcmp ，但在您的情况下测试它是一件简单的事情。

# php - 它有一个相当于 PHP 在 Python 中的提取物吗？

> ID：773578
> 
> 赞同：2
> 
> 时间：2009-04-21T16:53:26.607
> 
> 标签：php, python

寻找与此等效的python。

[http://php.net/extract](http://php.net/extract)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-21T17:01:43.030

也许您最好解释一下您要做什么。直接问题的任何解决方案都将是相当不合逻辑的，因为几乎可以肯定有更好的方法来做你想做的事。

**编辑**（根据您的评论）：

事实上，还有更好的方法。

您正在尝试做的事情被称为[`unpacking argument lists`](http://docs.python.org/tutorial/controlflow.html#unpacking-argument-lists)，并且可以这样做：

```
self.__api_call__('POST', '/api/foobar/', **mydict) 
```

一个工作示例：

```
>>> def a_plus_b(a,b):
...     return a+b
... 
>>> mydict = {'a':3,'b':4}
>>> a_plus_b(**mydict)
7 
```

正如您所料，它也适用于 kwargs：

```
>>> def a_plus_b(**kwargs):
...     return kwargs['a'] + kwargs['b']
... 
>>> a_plus_b(**mydict)
7 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-21T16:58:42.677

不。你为什么需要它？

执行以下操作（见评论）

```
def __api_call__(self, method, resource, **kwargs):
    print(kwargs)

def do_call(my_dict):
    self.__api_call__('POST', '/api/foobar/', **your_dict)   # double asterisk! 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-21T17:04:08.967

通常用于`locals()`实现此结果，但确切的功能取决于您。

```
>>> print apple
Traceback (most recent call last):
  File "<stdin>", line 1, in ?
NameError: name 'apple' is not defined
>>> print banana
Traceback (most recent call last):
  File "<stdin>", line 1, in ?
NameError: name 'banana' is not defined

>>> variables = {"apple" : "a rigid, juicy fruit", "banana" : "a soft, fleshy fruit"}
>>> for variable,value in variables.iteritems():
...  locals()[variable] = value
... 
>>> print apple
a rigid, juicy fruit
>>> print banana
a soft, fleshy fruit 
```

编辑

感谢所有认真评论这种方法的坏处的人。我完全同意**这是一个糟糕的方法**，对于任何偶然发现此页面的人，都应该在实际回复中提及它。（永远不要低估这一点；我在某处的代码片段中看到了这种技术。我知道为什么在这种特殊情况下它是无害的，但我知道我不能仅仅因为在某些情况下它不会鼓励糟糕的方法休息。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-01-09T15:49:44.020

IMO 这至少是一个很好的理论问题：如何实现这种结构以及应用后的外观如何？

例如，作为一个函数，它可以实现为

```
import inspect

def extract_attribute(obj, names):
    if type(names) == str:
        names = [names]
    # Get previous frame from the inspect stack.
    frame = inspect.stack()[1][0]
    try:        
        frame_locals = frame.f_locals        
        attributes = inspect.getmembers(
            obj, lambda attr: not inspect.ismethod(attr))        
        for name, attribute in attributes:
            if name.startswith('__') or name.endswith('__'):
                continue
            if name in names:
                frame_locals[name] = attribute
    finally:
        del frame
        del frame_locals 
```

并用作

```
class A(object):
    foo = 'bar'

a = A()
extract_attribute(a, 'foo')
assert locals()['foo'] == 'bar'
assert foo == 'bar 
```

注意：等待 pylint 会在最后一行抱怨。可以发现 *extract_attribute* 函数以某种类似于导入模块功能的方式处理对象。将其用作附加的作用域耦合层（与当前导入混合）将几乎毫无例外地增加代码的复杂性。

*PS 足够明显的内置操作是做 python 不打算做的事情的标志。但是像不实用和“非pythonic”这样的自吹自擂的咒语对我来说并不是真正合适的论据。一般来说，做一个实验并看看是否：1\. 构造将丰富语言的表达能力（例如，使其更具可读性和更自然），赋予新的功能等，总是更“实用”。 2\. 构造太丑陋和危险而无法使用，太灵活和不安全，性能权衡是不可接受的，等等。通过显式示例进行说明和测试是首选的替代方案。查看代码，每个人都可以自由地发表自己的意见，而无需分享“专业胆量”或复制粘贴宗教教条。请不要。*

# .net - .Net 中的程序集 DLL 管理

> ID：773587
> 
> 赞同：4
> 
> 时间：2009-04-21T16:57:22.760
> 
> 标签：.net, dll

确保 IIS 获取对重新编译的 DLL 的更改的最安全方法是什么？1\. 只复制/bin文件夹中的DLL？2.清除应用缓存？3.重启IIS？4\. 重启服务器？注意：我很确定选项 3 和 4 会起作用，但它们在生产环境中可能有点过分；-)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-21T16:59:06.733

将 DLL 复制到 \bin 应该可以回收工作进程。如果这不起作用，那么最好的办法是回收 AppPool。当您回收您的 AppPool 时，这将卸载您网站的 AppDomain。创建新的 AppDomain 时，它将加载新版本的程序集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T16:59:14.860

触摸 Web.config 文件？

# c++ - 从函数返回类指针

> ID：773599
> 
> 赞同：18
> 
> 时间：2009-04-21T17:02:31.873
> 
> 标签：c++

我不确定这有什么问题（请记住，我对 C++ 有点陌生）

我有这堂课：

```
Foo
{
  string name;
  public:
     SetName(string);
}
string Foo::SetName(string name)
{
  this->name = name;
  return this->name;
};
//////////////////////////////////////////////
//This  is where I am trying to return a Foo pointer from this global function:

Foo * ReturnFooPointer()
{
  Foo foo;
  Foo * foo_ptr;
  foo_ptr = &foo;
  return foo_ptr;
} 
```

在编译时，这编译得很好。但是在运行时它会引发运行时异常（某种访问冲突）

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2009-04-21T17:04:09.497

您需要使用 new 关键字在堆上创建新的 Foo 。
当函数结束时，堆栈上的对象将被释放，因此您将返回一个指向内存中无效位置的指针。

这是正确的代码。

```
Foo * ReturnFooPointer()
{
  Foo * foo_ptr = new Foo();
  return foo_ptr;
} 
```

请记住稍后删除您要返回的指针。

所以稍后在代码中：

```
Foo *pFoo = ReturnFooPointer();
//Use pFoo
//...
delete pFoo; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-21T17:05:00.510

您正在返回指向堆栈上本地对象的指针。当你的函数返回时，它就超出了范围，并且是无效的。

您应该创建一个要返回的新实例，即

```
Foo* foo_ptr = new Foo(); 
```

这将在堆中创建一个对象，并一直存在直到您调用`delete`它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-21T17:06:17.590

实际对象是在堆栈上分配的，因此当它超出范围时（函数返回时）它会被销毁。如果你在堆上分配它（用`new`），它会一直活着，直到你`delete`它

# c# - 通过 GridView 分页时保留表单数据 - ASP.NET

> ID：773607
> 
> 赞同：0
> 
> 时间：2009-04-21T17:05:49.417
> 
> 标签：c#, .net, asp.net, gridview, paging

我的 ASP.NET 页面上有一个 GridView 控件，当用户执行搜索时该控件绑定到结果集。我创建了一个带有 CheckBox 控件的附加 TemplateField 列，以允许用户从结果集中选择记录的子集。我已经在 GridView 控件中实现了分页，当用户检查复选框控件并通过结果集进行分页时，它不会保留任何选中的复选框。

```
<asp:GridView ID="MyGridView" runat="server" AllowPaging="true" AutoGenerateColumns="false">
    <Columns>
        <asp:TemplateField>
            <ItemTemplate>
                <asp:CheckBox ID="MyCheckBox" runat="server" />
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

在通过 GridView 分页时保留选中复选框的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T17:11:56.873

您必须自己维护状态。该[线程](http://social.msdn.microsoft.com/Forums/en-US/vswebdeveloperexpresspt/thread/2e787edd-aba7-452c-9eb3-3694872b8f9a)显示了如何在 VB 中完成此操作。只需使用此[VB 到 C# 转换器](http://www.developerfusion.com/tools/convert/vb-to-csharp/)即可获得所需的代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T17:11:47.450

在 gridview 分页事件期间，您需要遍历行并保存复选框的选中状态（以及数据键）。同样，您将需要从已保存的检查状态列表中读取以在 gridview rowdatabound 事件期间重新选中这些框。

# batch-file - 在 MS-DOS 中向文本文件添加新行

> ID：773610
> 
> 赞同：45
> 
> 时间：2009-04-21T17:07:20.583
> 
> 标签：batch-file, newline

我正在制作一个`.bat`文件，我希望它将[ASCII 艺术](http://en.wikipedia.org/wiki/ASCII_art)写入文本文件。

在回显文本时，我能够找到在文件中追加新行的命令，但是当我阅读该文本文件时，我看到的只是一个布局符号而不是空格。我认为它可以通过使用 Word 甚至[WordPad](http://en.wikipedia.org/wiki/WordPad)打开该文件来工作，但我希望它可以在任何计算机上工作，即使该计算机只有[记事本](http://en.wikipedia.org/wiki/Notepad_%28software%29)（大多数情况下都是如此）。

如何在某个程序（即写字板）中打开文本文件或在文件中写入适当的空格字符？

* * *

**编辑：**

我发现这是最好的使用方法：

```
echo <line1> > <filename>
echo <line2> >> <filename> 
```

PS我`|`在我的ASCII艺术中使用过，所以它崩溃了，Dumb Dumb Dumb :)

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2009-04-21T17:10:21.650

```
echo Hello, > file.txt
echo.       >>file.txt
echo world  >>file.txt 
```

你总是可以运行：

```
wordpad file.txt 
```

在任何版本的 Windows 上。

* * *

在 Windows 2000 及更高版本上，您可以执行以下操作：

```
( echo Hello, & echo. & echo world ) > file.txt 
```

* * *

另一种显示少量文本消息的方法是创建包含以下内容的 file.vbs：

```
Msgbox "Hello," & vbCrLf & vbCrLf & "world", 0, "Message" 
```

调用它

```
cscript /nologo file.vbs 
```

或者`wscript`，如果您不需要它等到他们单击“确定”，请使用它。

* * *

您正在编写的消息的问题在于竖线 ( `|`) 是[“管道”运算符](http://en.wikipedia.org/wiki/Pipe_(character)#DOS.2FWindows)。您需要通过使用`^|`而不是`|`.

*PS它的拼写是[Pwned](http://en.wikipedia.org/wiki/Pwn)*。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-04-21T17:13:22.970

`>>`通过使用重定向字符两次 ( ) ，您可以轻松地附加到文件的末尾。

* * *

这将复制`source.txt`到`destination.txt`，覆盖过程中的目标：

```
type source.txt > destination.txt 
```

这将复制`source.txt`到`destination.txt`，并在过程中附加到目标：

```
type source.txt >> destination.txt 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-04-21T17:17:28.467

也许这就是你想要的？

```
echo foo > test.txt
echo. >> test.txt
echo bar >> test.txt 
```

在 test.txt 中产生以下结果：

> 富
> 
> 酒吧

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-21T17:18:19.917

```
echo "text to echo" > file.txt 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-07-12T03:57:17.180

使用以下内容：

```
echo (text here) >> (name here).txt 
```

前任。`echo my name is jeff >> test.txt`

测试.txt

```
my name is jeff 
```

您也可以在脚本中使用它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-05-09T08:57:30.457

*   我总是用`copy con` 写文字，写长文很容易
*   例子：

    > C:\COPY CON [驱动器:][路径][文件名]
    > 
    > .... 内容
    > 
    > F6
    > 
    > 1 个文件被复制

# iphone - 为什么我无法在 iPhone SDK 中访问 CALayer 的 visibleRect 属性？

> ID：773613
> 
> 赞同：2
> 
> 时间：2009-04-21T17:08:18.753
> 
> 标签：iphone, calayer

我在这样做时遇到了麻烦：

```
CALayer *myLayer = myUIImageView.layer; //works, no error from compiler
CGRect visRect = myLayer.visibleRect; //fat error, see below 
```

我得到的错误是：

> 错误：在不是结构或联合的东西中请求成员“visibleRect”

但文件说：

> visibleRect 返回接收器在其自己的坐标空间中的可见区域。（只读）@property（只读）CGRect visibleRect

我已经包含了 QuartzCore.framework、CoreGraphics.framework、UIKit.framework、Foundation.framework。

那么如果返回一个 CGRect，为什么它不起作用呢？任何的想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-22T00:54:58.507

我 99% 确定您缺少导入声明。仅在项目中包含框架是不够的。

我刚刚在一个全新的项目上尝试了这个，它按预期工作。以下是我添加到 ViewController 中的内容。

```
#import <QuartzCore/QuartzCore.h> 
```

...

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    CALayer *test_layer = self.view.layer;
    CGRect test_rect = test_layer.visibleRect;
    NSLog(@"%f, %f", test_rect.origin.x, 
          test_rect.size.width);
} 
```

输出是：

```
2009-04-21 17:53:55.999 Throwaway[72422:20b] 0.000000, 320.000000 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-21T18:07:00.017

您的代码看起来正确。你没有保留任何东西，这可能很危险，但从技术上讲并没有错。

以下消息通常表示 myLayer 有问题。

> `error: request for member 'visibleRect' in something not a structure or union`

你在这两行代码之间做了什么吗？

检查 myLayer 对象，确保它是正确的。另外，确认 myUIImageView 已初始化，而不是 nil。

另外，尝试绕过属性，通过调用`[myLayer visibleRect];`

# ruby - LDAP（或任何用于 LDAP 的 Ruby 客户端库）是否支持批处理调用？

> ID：773616
> 
> 赞同：1
> 
> 时间：2009-04-21T17:09:30.170
> 
> 标签：ruby, ldap

我想没有，但希望得到纠正。

[http://en.wikipedia.org/wiki/Lightweight_Directory_Access_Protocol](http://en.wikipedia.org/wiki/Lightweight_Directory_Access_Protocol)

即，我只是希望通过一个查询批量读取约 1000 个用户，而不是进行约 1000 个单独的查询。

更新：好的，阅读规范会有所帮助： [https ://www.rfc-editor.org/rfc/rfc2254](https://www.rfc-editor.org/rfc/rfc2254)

:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-21T17:13:43.873

为什么要分批？

```
(|(cn=user1)(cn=user2)(cn=user3)(cn=user4)(cn=user5)(cn=user6)) 
```

几乎所有实际用途都可以将 LDAP 过滤器字符串长度视为无限制。

# c# - Visual Studio 选项有什么区别：ASP.NET Web 服务和 WCF 服务

> ID：773621
> 
> 赞同：4
> 
> 时间：2009-04-21T17:12:05.220
> 
> 标签：c#, asp.net, wcf, web-services, asmx

我看到有两个我知道可以在 Web 服务中使用的选项......显然是 WCF 和 ASP.NET Web 服务。有什么不同？我最近才开始接触 WCF，过去也接触过一些 Web 服务，但我肯定不是专家。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-21T17:26:48.367

很容易知道这些差异。

ASP.NET Web 方法被称为 ASMX [因为文件扩展名]（检查 4GuysFromRolla 关于这个，他们有一个[很好的教程](http://aspnet.4guysfromrolla.com/articles/100803-1.aspx)）

该技术使您可以将方法公开为 Web 服务，以便您可以从任何地方连接它（到 WS）并使用它（方法）。但是...**您无法保护**服务器和客户端之间的数据，例如，您可以以清除模式发送大文件等...

[注意] 您可以使用证书来保护对 Web 服务的访问，但这很痛苦且相当复杂，通常在 ASMX 中我们使用用户名/密码来授予对方法的访问权限（再次......纯文本！）

在**WCF**中，您处于关于 Web 服务的不同世界，这是 .NET（迄今为止）公开服务的最佳技术（*您能看到区别吗...* **服务**！不是**Web 服务**），WCF 不需要 IIS要运行，它可以在服务器上作为系统服务运行，使用控制台环境（如命令行），在 TCP/IP 模式等下，所以我们说 WCF 是**服务**，而不是 Web 服务。请记住，ASMX 需要 IIS 才能运行，并且只能在 Web 服务器中运行。

使用 WCF，您可以使用 SSL 来加密通信（要在 ASMX 中做到这一点，您需要使用**WSE** - Web Services Enhancements）并且实现它非常容易，您可以安全地发送大文件（要在 ASMX 中做到这一点，您需要使用**MTOM** - 消息传输优化机制）。

您可以只更改一行代码来设置传输首选项，或者如果您愿意，甚至可以更改 XML 配置文件，安全性要高得多，等等 :)

希望您对此有一个更好的总体概述，但还有更多。

底线：要公开不需要保护的Web服务，可以使用ASMX，完全没有问题，但是如果您需要以某种方式保护通信，请在WCF中进行！

**链接**：[您可以在此处阅读这两种服务之间的一些性能比较](http://geekswithblogs.net/khanna/archive/2006/01/06/65067.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T17:19:25.327

ASP.NET Web 服务是微软对 Web 服务的第一次尝试。

WCF 取代了 ASP.NET Web 服务和 .NET 远程处理。WCF 提供了一个通用的编程模型，使您能够执行两种较旧的技术能够做的事情，并且包括对广泛协议和安全模型的支持。

如果您有选择，请使用 WCF。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T17:25:51.177

ASP.NET 网络服务还可以——但它仅限于托管在 IIS 中的 HTTP，并且还有其他问题。

WCF 支持更多的传输协议（各种方式的 HTTP、TCP、MSMQ 等），具有更丰富的安全模型（凭据、联合安全性），并提供托管选项 - 在 IIS 中的 Windows 应用程序或服务中自托管或 WAS 等等。

简而言之：如果您现在开始 - 一定要学习 WCF！

马克

# asp.net - 如何确保我的网页不被最终客户修改？

> ID：773622
> 
> 赞同：1
> 
> 时间：2009-04-21T17:12:11.677
> 
> 标签：asp.net, ssl, security

我想锁定我的网站，以便最终客户无法更改标准网页（aspx）。我调查了代码签名和数字证书。但这更适合 dll 和可执行文件，而不适合 aspx/html 页面本身。这可能吗？如果是这样，请给我一些链接。

谢谢， 穆拉利

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-21T17:21:35.260

您可以预编译您的 ASP.NET 应用程序。

“当您为部署预编译 ASP.NET 网站时，您会创建一个包含程序集和其他信息的布局，然后您可以将其复制到生产服务器。为部署而预编译的网站使您能够创建已编译版本的无需源代码即可部署到生产服务器的站点。”

[http://msdn.microsoft.com/en-us/library/ms227976.aspx](http://msdn.microsoft.com/en-us/library/ms227976.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T17:14:17.523

您是否考虑过将您的应用程序作为软件即服务 (Saas) 提供？

# java - 如何构建 GWT 加载对话框？

> ID：773629
> 
> 赞同：3
> 
> 时间：2009-04-21T17:14:27.163
> 
> 标签：java, gwt

我有一个混合了 HTML 和 GWT 组件的页面。在内容完全加载之前，我不希望内容对用户可见（可能在此过程中显示一个简单的加载对话框）。

实现这一目标的最简单方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-29T02:44:46.910

实际上，建议的方法是在您的 HTML 中创建一个，然后在您的入口点加载所有内容后，将其隐藏：

```
<html>
...
<body>
...
    <div id="loading"> 
        <span id="loadingMsg">Loading ...</span>
    </div> 
...
</body>
</html>

public void onModuleLoad()
{
...
    // Hide the "Loading" notification
    RootPanel.get("loading").setVisible(false);
...
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-21T18:11:39.820

我使用自动隐藏设置为 false 和模式设置为 true 的 PopupPanel。随心所欲地设置样式，开始加载内容时显示，完成后隐藏。

# asp.net - 带有 Web 表单的 asp.net 路由——所有路由都得到 404

> ID：773632
> 
> 赞同：0
> 
> 时间：2009-04-21T17:16:03.370
> 
> 标签：asp.net, routing, http-status-code-404

我创建了一个实现路由的 Web 表单应用程序。我的应用程序使用了 Phil Haack 的示例 ( [http://haacked.com/archive/2008/03/11/using-routing-with-webforms.aspx](http://haacked.com/archive/2008/03/11/using-routing-with-webforms.aspx) )。我的所有路线都收到 404 错误。有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T17:29:58.767

您正在运行哪个版本的 IIS？
如果您使用的是 IIS6，则需要做一些额外的工作，例如为所有扩展启用通配符。

另外，请仔细检查您的 web.config。要使其发挥作用，必须进行大量更改。

# java - 如何在java中重构、修复和优化这个字符替换功能

> ID：773633
> 
> 赞同：0
> 
> 时间：2009-04-21T17:16:12.433
> 
> 标签：java, string, optimization, refactoring, char

在调整应用程序时，我发现这个例程去除 CDATA 标记的 XML 字符串并用字符引用替换某些字符，以便可以在 HTML 页面中显示这些字符。

例行公事不够完美；如果 XML 有问题，它将留下尾随空格并会因 StringOutOfBounds 异常而中断。

当我开始处理路由时，我创建了一些单元测试，但目前的功能可以改进，所以这些可以提供更多参考。

出于理智的原因，例程需要重构。但是，我需要修复这个程序的真正原因是为了提高性能。它已成为应用程序中严重的性能瓶颈。

```
package engine;

import junit.framework.Assert;
import junit.framework.TestCase;

public class StringFunctionsTest extends TestCase {

    public void testEscapeXMLSimple(){
        final String simple = "<xml><SvcRsData>a<![CDATA[<sender>John & Smith</sender>]]></SvcRsData></xml> ";      
        final String expected = "<xml><SvcRsData>a&#60;sender&#62;John &#38; Smith&#60;/sender&#62;</SvcRsData></xml> ";
        String result = StringFunctions.escapeXML(simple);
        Assert.assertTrue(result.equals(expected));
    }

    public void testEscapeXMLCDATAInsideCDATA(){
        final String stringWithCDATAInsideCDATA = "<xml><SvcRsData>a<![CDATA[<sender>John <![CDATA[Inner & CD ]]>& Smith</sender>]]></SvcRsData></xml> ";       
        final String expected = "<xml><SvcRsData>a&#60;sender&#62;John &#60;![CDATA[Inner &#38; CD & Smith</sender>]]></SvcRsData></xml> ";
        String result = StringFunctions.escapeXML(stringWithCDATAInsideCDATA);      
        Assert.assertTrue(result.equals(expected));
    }

    public void testEscapeXMLCDATAWithoutClosingTag(){      
        final String stringWithCDATAWithoutClosingTag = "<xml><SvcRsData>a<![CDATA[<sender>John & Smith</sender></SvcRsData></xml> ";
        try{
            String result = StringFunctions.escapeXML(stringWithCDATAWithoutClosingTag);
        }catch(StringIndexOutOfBoundsException exception){
            Assert.assertNotNull(exception);
        }   
    }

    public void testEscapeXMLCDATAWithTwoCDATAClosingTags(){        
        final String stringWithCDATAWithTwoClosingTags = "<xml><SvcRsData>a<![CDATA[<sender>John Inner & CD ]]>& Smith</sender>]]>bcd & efg</SvcRsData></xml> ";        
        final String expectedAfterSecondClosingTagNotEscaped = "<xml><SvcRsData>a&#60;sender&#62;John Inner &#38; CD & Smith</sender>]]>bcd & efg</SvcRsData></xml> ";
        String result = StringFunctions.escapeXML(stringWithCDATAWithTwoClosingTags);
        Assert.assertTrue(result.equals(expectedAfterSecondClosingTagNotEscaped));
    }

    public void testEscapeXMLSimpleTwoCDATA(){
        final String stringWithTwoCDATA = "<xml><SvcRsData>a<![CDATA[<sender>John & Smith</sender>]]>abc<sometag>xyz</sometag><sometag2><![CDATA[<recipient>Gorge & Doe</recipient>]]></sometag2></SvcRsData></xml> ";      
        final String expected = "<xml><SvcRsData>a&#60;sender&#62;John &#38; Smith&#60;/sender&#62;abc<sometag>xyz</sometag><sometag2>&#60;recipient&#62;Gorge &#38; Doe&#60;/recipient&#62;</sometag2></SvcRsData></xml> ";
        String result = StringFunctions.escapeXML(stringWithTwoCDATA);
        Assert.assertTrue(result.equals(expected));
    }

    public void testEscapeXMLOverlappingCDATA(){
        final String stringWithTwoCDATA = "<xml><SvcRsData>a<![CDATA[<sender>John & <![CDATA[Smith</sender>]]>abc<sometag>xyz</sometag><sometag2><recipient>Gorge & Doe</recipient>]]></sometag2></SvcRsData></xml> ";      
        final String expectedMess = "<xml><SvcRsData>a&#60;sender&#62;John &#38; &#60;![CDATA[Smith&#60;/sender&#62;abc<sometag>xyz</sometag><sometag2><recipient>Gorge & Doe</recipient>]]></sometag2></SvcRsData></xml> ";
        String result = StringFunctions.escapeXML(stringWithTwoCDATA);
        Assert.assertTrue(result.equals(expectedMess));
    }

} 
```

* * *

这是功能：

```
package engine;

public class StringFunctions {

    public static String escapeXML(String s) {
        StringBuffer result = new StringBuffer();
        int stringSize = 0;
        int posIniData = 0, posFinData = 0, posIniCData = 0, posFinCData = 0;
        String stringPreData = "", stringRsData = "", stringPosData = "", stringCData = "", stringPreCData = "", stringTempRsData = "";
        String stringNewRsData = "", stringPosCData = "", stringNewCData = "";
        short caracter;

        stringSize = s.length();
        posIniData = s.indexOf("<SvcRsData>");
        if (posIniData > 0) {
            posIniData = posIniData + 11;
            posFinData = s.indexOf("</SvcRsData>");
            stringPreData = s.substring(0, posIniData);
            stringRsData = s.substring(posIniData, posFinData);
            stringPosData = s.substring(posFinData, stringSize);
            stringTempRsData = stringRsData;
            posIniCData = stringRsData.indexOf("<![CDATA[");
            if (posIniCData > 0) {
                while (posIniCData > 0) {
                    posIniCData = posIniCData + 9;
                    posFinCData = stringTempRsData.indexOf("]]>");
                    stringPreCData = stringTempRsData.substring(0,
                            posIniCData - 9);
                    stringCData = stringTempRsData.substring(posIniCData,
                            posFinCData);
                    stringPosCData = stringTempRsData.substring(
                            posFinCData + 3, stringTempRsData.length());

                    stringNewCData = replaceCharacter(stringCData);
                    stringTempRsData = stringTempRsData.substring(
                            posFinCData + 3, stringTempRsData.length());
                    stringNewRsData = stringNewRsData + stringPreCData
                            + stringNewCData;
                    posIniCData = stringTempRsData.indexOf("<![CDATA[");
                }
            } else {
                stringNewRsData = stringRsData;
            }
            stringNewRsData = stringNewRsData + stringPosCData;
            s = stringPreData + stringNewRsData + stringPosData;
            stringSize = s.length();
        }

        for (int i = 0; i < stringSize; i++) {
            caracter = (short) s.charAt(i);
            if (caracter > 128) {
                result.append("&#");
                result.append(caracter);
                result.append(';');
            } else {
                result.append((char) caracter);
            }
        }
        return result.toString();

    }

    private static String replaceCharacter(String s) {
        StringBuffer result = new StringBuffer();
        int stringSize = s.length();
        short caracter;

        for (int i = 0; i < stringSize; i++) {

            caracter = (short) s.charAt(i);
            if (caracter > 128 || caracter == 34 || caracter == 38
                    || caracter == 60 || caracter == 62) {
                result.append("&#");
                result.append(caracter);
                result.append(';');
            } else {
                result.append((char) caracter);
            }
        }
        return result.toString();

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T17:22:22.963

在我看来，您正在做一些以前已经做过的事情，可能是在 apache commons 中。

你的函数太复杂了，我不确定你是否真的在“转义XML”或其他什么东西。如果您所做的只是转义 xml，那么您应该使用 google 以获得更好的实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-21T17:25:47.777

看看来自[Apache Commons的](http://commons.apache.org/)[StringEscapeUtils 类](http://commons.apache.org/lang/api-release/org/apache/commons/lang/StringEscapeUtils.html)。它包含一个方法。[`escapeXML`](http://commons.apache.org/lang/api-release/org/apache/commons/lang/StringEscapeUtils.html#escapeXml(java.lang.String))

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T17:25:34.453

看看来自 Apache Commons的[StringEscapeUtils 。](http://commons.apache.org/lang/api/org/apache/commons/lang/StringEscapeUtils.html)这具有可靠地转义/取消转义 XML/HTML 的功能。

# asp.net - http get post guru help fiddler

> ID：773637
> 
> 赞同：-2
> 
> 时间：2009-04-21T17:17:29.187
> 
> 标签：asp.net, http, iis, proxy, fiddler

我需要帮助。我需要 iis 5 中的日志（安全完整请求）（带有标头等）或在代理、提琴手等中查看它 我使用提琴手/我有网络配置

你知道如何查看所有请求，来自所有端口和应用程序的请求吗？你能推荐我代理或http调试器吗？我在提琴手中看不到对我网站的请求（（（（（（

也许我需要在 iis 中添加属性？我在 iis 中有 tcp 端口（默认网站，此站点默认位于 wwwroot **TCP 端口 80 的根目录中？和代理地址 8888????????????? MAYBE**

> *也许我需要将 tcp 端口更改为 8888？* 我添加到 web.comfig

在提琴手是选项监控所有连接我检查它。我不使用过滤器

我在自己的机器上有网站和提琴手 GMAIL 在我的网站上发送请求（获取 rss）74.125.16.68 - W3SVC1 HOUSE 217.76.185.140 80 GET /24.rss - 200 1398 202 HTTP/1.1 217.76.185.140

我在提琴手中没有看到这个查询，但我看到 GET /mail/channel/bind?at=xn3j35onw91kr1q7zyzwjdx2653kr7&VER=6&it=548812&RID=rpc&SID=8787BE0499898773&CI=1&AID=78&TYPE=html&zx=bf28pr-v4mnm1&DOMAIN=.google.com HTTP/1.1 接受：*/* Referer： http: [//mail.google.com/mail/ ?ui=2&](http://mail.google.com/mail/?ui=2&)

在 FIDDLer 我看到 POST /mail/?ui=2&ik=ba4ed7ee39&view=cps&q=http%3A%2F%2F217.76.185.140%2F25.rss&cps=r&rt=j HTTP/1.1 答案 Content-Type: text/javascript; 字符集=UTF-8

而（1）；

[[["v","NEGbCBCSn-c.en.","8","55f6abc2045673de",,] ,["di",749,"",""] ,["ub",[["^ i",1240327921200] ,["^f",1240327921200]

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T17:50:28.247

不幸的是，我没有使用提琴手的经验（尽管我听说它很酷）。

试试wireshark：这里： http: [//www.wireshark.org/](http://www.wireshark.org/)

它是一个带有过滤功能的网络数据包分析器，因此您可以设置过滤器来捕获您想要的消息。

# c# - 通过 https 使用 C# 中的 POST 发布

> ID：773638
> 
> 赞同：11
> 
> 时间：2009-04-21T17:18:05.783
> 
> 标签：c#, .net, ssl, post, httpwebrequest

[在这个问题](https://stackoverflow.com/questions/768030/simple-httpwebrequest-over-ssl-https-gives-404-not-found-under-c)上浪费了两天时间（并试图让它发挥作用）之后，我决定退后一步，问一个更基本的问题，因为显然有些事情我不知道或者我做错了。

要求很简单，*我需要*从 C# 通过 https 发布一个 HTTP 帖子（传递一些值）。

该网站（如果给定适当的值）将返回一些简单的 html 和响应代码。（我稍后会展示这些）。

真的**就是这么**简单。“网络服务”有效。我有一个可以正常工作并成功连接到它的 php 示例。我还有一个也可以工作的 Dephi“演示”应用程序（带有源代码）。最后，我有来自具有“服务”的公司的演示应用程序（二进制），当然也可以。

但我需要通过 C# 来完成。这听起来很简单，它不起作用。

出于测试目的，我创建了一个简单的控制台应用程序和一个简单的连接方法。我尝试了 7 种不同的方法来创建 HTTP 请求，几乎都是相同的东西，不同的实现（使用 WebClient，使用 HttpWebRequest 等）。

每种方法都有效，**除非**URI 以“https”开头。

我收到一个网络异常，说远程服务器返回 404。我已经安装了 Fiddler（按照 SO 用户的建议），并调查了一点流量。404 是因为我传递了一些错误，因为正如我稍后提到的，“服务”有效。稍后我将讨论提琴手的结果。

我必须发布数据的 URL 是：[https ://servicios.mensario.com/enviomasivo/apip/](https://servicios.mensario.com/enviomasivo/apip/)

这是 POST 数据：（这些值是假的）

usuario=SomeUser&clave=SomePassword&nserie=01234567890123456789&version=01010000&operacion=220

服务器可能会返回一个两/三行响应（对不起西班牙语，但该公司来自西班牙）。这是一个可能的响应示例：

```
HTTP/1.1 200 OK
Content-Type: text/plain

01010000 100 BIEN
998 
```

这是另一个

```
HTTP/1.1 200 OK
Content-Type: text/plain

01010000 20 AUTENTIFICACION NEGATIVA
Ha habido un problema en la identificación ante el servidor. Corrija sus datos de autentificacion. 
```

第一个表示OK，第二个是Auth Failure。

正如你所看到的，这个任务很*简单*，只是它不起作用。如果我使用提琴手，我会看到连接中有某种 SSL 内容，然后一切正常。然而，据我所知，.NET 为我们处理了所有这些事情（*是的，我添加了回调以始终验证无效证书*）。我不明白我做错了什么。我可以发布/通过电子邮件发送代码，但我想知道的非常简单：

**您如何使用 C# 和“简单”HttpWebRequest 在 SSL 上进行 POST，然后在字符串/数组/任何处理中获得响应？**

当我说我已经用谷歌搜索和 Stackoverflowing 两天了，相信我。我没有任何代理。连接通过我的路由器。标准端口。没有什么花哨。我的机器在 VMWare 虚拟机中，并且是 Windows Vista，但鉴于示例应用程序（php、delphi、二进制）都可以正常工作，我看不出这是一个问题）。

如果有人想看一下不同的样本（没有二进制文件），可以[在这里找到它们。](http://www.mensario.com/SEMPROTP/SDK/)

我会很感激任何帮助。如果有人想尝试使用“真实”用户名，我有一个演示用户，我可以将用户/通行证传递给您以进行测试。我只有*一个*演示用户（他们给我的那个），这就是我不在这里粘贴它的原因。我不想用测试淹没用户；）

我已经尝试（在样本中）使用 UTF8 和 ASCII，但这并没有改变任何东西。

我 100% 肯定我与 SSL 有一些关系，但我没有这样做，因为我不知道。

**提前**谢谢。

马丁。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-21T17:29:03.043

我早些时候正在与完全相同的问题作斗争（尽管在紧凑的框架中）。这是我的问题和我自己的答案： [Asynchronous WebRequest with POST-parameters in .NET Compact Framework](https://stackoverflow.com/questions/768641/asynchronous-webrequest-with-post-parameters-in-net-compact-framework)

我的版本是异步的，所以它比你要找的要复杂一些，但这个想法仍然存在。

```
private string sendRequest(string url, string method, string postdata) {
    WebRequest rqst = HttpWebRequest.Create(url);

    // only needed, if you use HTTP AUTH
    //CredentialCache creds = new CredentialCache();
    //creds.Add(new Uri(url), "Basic", new NetworkCredential(this.Uname, this.Pwd));
    //rqst.Credentials = creds;
    rqst.Method = method;
    if (!String.IsNullOrEmpty(postdata)) {
        //rqst.ContentType = "application/xml";
        rqst.ContentType = "application/x-www-form-urlencoded";

        byte[] byteData = UTF8Encoding.UTF8.GetBytes(postdata);
        rqst.ContentLength = byteData.Length;
        using (Stream postStream = rqst.GetRequestStream()) {
            postStream.Write(byteData, 0, byteData.Length);
            postStream.Close();
        }
    }
    ((HttpWebRequest)rqst).KeepAlive = false;
    StreamReader rsps = new StreamReader(rqst.GetResponse().GetResponseStream());
    string strRsps = rsps.ReadToEnd();
    return strRsps;

} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-21T18:28:19.000

请参阅我对您其他问题的回答。我相信您的问题可能不是您的 C# 代码。Web 服务 URL 与我使用的其他几个工具一起实际返回 404，但是如果您从 Web 服务 URL 中去掉尾部斜杠，它会返回您指示的响应，所以我建议您尝试一下。

奇怪的是，当不使用 SSL 时，尾随 URL 是否存在似乎并不重要。我猜该网络服务器有些奇怪。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-06-28T08:04:50.807

不知道你是否已经解决了这个问题，这是一年前的帖子。我是西班牙人，我也在使用 mensario。

发送和http请求：（这是在ASP中，但过程是一样的）

```
Function enviarMsg2
   Dim oHTTP,inicio
   Dim strParametros
   Dim devolver

   Set oHTTP= server.CreateObject("Msxml2.ServerXMLHTTP")
   strParametros = "usuario="&usuario&"&clave="&clave&"&nserie="&nserie&"&     version=01010000&operacion=300&sms=1%0934635035526%0920041231233000%09Clinica+Paz%09Clinica+Paz+le+desea+Feliz+Navidad%2E&sms=2%0934612345678%0920041231233001%09Clinica+Paz%09Clinica+Paz+le+desea+Feliz+Navidad%2E"
'response.Write strParametros
'response.End
'Abrimos la conexión con el método POST, ya que estamos enviando una petición.
oHTTP.open "POST", "https://servicios.mensario.com/enviomasivo/apip", False

'Agregamos encabezados HTTP requeridos...
oHTTP.setRequestHeader "Content-Type", "application/x-www-form-urlencoded"

'Enviamos la petición
oHTTP.send strParametros
devolver = oHTTP.responsetext

'Comprobamos si fue correcto         
inicio = Instr(devolver, "100 BIEN")
'response.Write "--->"&inicio
'response.End    
if inicio <=0 then
  enviarSMS2 = "Ha ocurrido un error en el envío del SMS."
else
  enviarSMS2 = Mid(devolver,inicio+9,len(devolver))
end if

Set oHTTP = Nothing 
```

我唯一没有的是用户/密码尝试:)

基本上，当响应为“100 bien”时，函数会返回，否则返回错误。希望它有所帮助:)

# jquery - 如何通过 jquery 模拟锚点点击？

> ID：773639
> 
> 赞同：148
> 
> 时间：2009-04-21T17:18:12.023
> 
> 标签：jquery, html, onclick, thickbox

我在通过 jQuery 伪造锚点点击时遇到问题：为什么我的厚框在我第一次点击输入按钮时出现，而第二次或第三次却没有出现？

这是我的代码：

```
<input onclick="$('#thickboxId').click();" type="button" value="Click me" />

<a id="thickboxId" href="myScript.php" class="thickbox" title="">Link</a> 
```

当我直接单击链接时，它总是有效，但如果我尝试通过输入按钮激活厚框，它就不会。这是在FF。对于 Chrome，它似乎每次都有效。有什么提示吗？

* * *

## 回答 #1

> 赞同：200
> 
> 时间：2012-05-11T23:13:34.340

对我有用的是：

```
$('a.mylink')[0].click() 
```

* * *

## 回答 #2

> 赞同：124
> 
> 时间：2009-04-21T17:39:54.653

尽量避免像这样内联你的 jQuery 调用。在页面顶部放置一个脚本标签以绑定到`click`事件：

```
<script type="text/javascript">
$(function(){
    $('#thickboxButton').click(function(){
        $('#thickboxId').click();
    });
});
</script>

<input id="thickboxButton" type="button" value="Click me">
<a id="thickboxId" href="myScript.php" class="thickbox" title="">Link</a> 
```

**编辑：**

如果您试图模拟用户物理单击链接，那么我认为这是不可能的。一种解决方法是更新按钮的`click`事件以更改`window.location`Javascript：

```
<script type="text/javascript">
$(function(){
    $('#thickboxButton').click(function(){
        window.location = $('#thickboxId').attr('href');
    });
});
</script> 
```

**编辑2：**

现在我意识到Thickbox 是一个自定义的jQuery UI 小部件，我在[这里](http://jquery.com/demo/thickbox/)找到了说明：

### 指示：

*   创建链接元素 ( `<a href>`)

*   给链接一个值为thickbox ( `class="thickbox"`)的类属性

*   在`href`链接的属性中添加以下锚点：`#TB_inline`

*   在`href`属性中，`#TB_inline`将以下查询字符串添加到锚点上：

    ?height=300&width=300&inlineId=myOnPageContent

*   相应地更改查询中的 height、width 和 inlineId 的值（inlineID 是包含您希望在 ThickBox 中显示的内容的元素的 ID 值。

*   或者，您可以将 modal=true 添加到查询字符串（例如`#TB_inline?height=155&width=300&inlineId=hiddenModalContent&modal=true`），以便关闭厚框将需要`tb_remove()`从厚框内调用该函数。请参阅隐藏的模态内容示例，您必须单击是或否才能关闭厚框。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2010-02-04T11:10:10.000

我最近发现了如何通过 jQuery 触发鼠标点击事件。

```
 <script type="text/javascript">
    var a = $('.path > .to > .element > a')[0];
    var e = document.createEvent('MouseEvents');
    e.initEvent( 'click', true, true );
    a.dispatchEvent(e);
    </script> 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-02-07T13:11:59.820

这种方法适用于 firefox、chrome 和 IE。希望它可以帮助某人：

```
var comp = document.getElementById('yourCompId');
try { //in firefox
    comp.click();
    return;
} catch(ex) {}
try { // in chrome
    if(document.createEvent) {
        var e = document.createEvent('MouseEvents');
        e.initEvent( 'click', true, true );
        comp.dispatchEvent(e);
        return;
    }
} catch(ex) {}
try { // in IE
    if(document.createEventObject) {
         var evObj = document.createEventObject();
         comp.fireEvent("onclick", evObj);
         return;
    }
} catch(ex) {} 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-08-08T17:16:39.827

虽然这是一个非常古老的问题，但我发现一些更容易处理这项任务的东西。它是由 jquery UI 团队开发的 jquery 插件，称为模拟。您可以在 jquery 之后包含它，然后您可以执行类似的操作

```
<a href="http://stackoverflow.com/"></a>
$('a').simulate('click'); 
```

在 chrome、firefox、opera 和 IE10 中运行良好。您可以从[https://github.com/eduardolundgren/jquery-simulate/blob/master/jquery.simulate.js下载它](https://github.com/eduardolundgren/jquery-simulate/blob/master/jquery.simulate.js)

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2009-04-21T19:24:54.323

问题标题为“如何在 jQuery 中模拟锚点点击？”。好吧，您可以使用“触发器”或“触发器处理程序”方法，如下所示：

```
<script type="text/javascript" src="path/to/jquery.js"></script>
<script type="text/javascript" src="path/to/thickbox.js"></script>
<script type="text/javascript">
$(function() {
    $('#btn').click(function() {
        $('#thickboxId').triggerHandler('click');
    })
})
</script>
...
<input id="btn" type="button" value="Click me">
<a id="thickboxId" href="myScript.php" class="thickbox" title="">Link</a> 
```

未经测试，这个实际的脚本，但我以前用过`trigger`et al，他们工作得很好。

**UPDATE**
`triggerHandler`实际上并没有做 OP 想要的。我认为 [1421968](https://stackoverflow.com/questions/1421584/how-can-i-simulate-a-click-to-an-anchor-tag/1421968#1421968)提供了这个问题的最佳答案。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2010-02-04T11:34:55.223

I'd suggest to look at the Selenium API to see how they trigger a click on an element in a browser-compatible manner:

*   [selenium-browserbot.js](https://code.google.com/p/selenium/source/browse/javascript/selenium-core/scripts/selenium-browserbot.js?name=selenium-2.26.0)

Look for the `BrowserBot.prototype.triggerMouseEvent` function.

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2012-05-01T11:34:03.857

我相信你可以使用：

```
$('#yourLink').bind('click', function() {
  //Do something over here
});

$('#yourLink').trigger('click'); 
```

这将很容易触发点击功能，而无需实际点击它。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-02-06T12:10:09.880

在Javascript中你可以这样做

```
function submitRequest(buttonId) {
    if (document.getElementById(buttonId) == null
            || document.getElementById(buttonId) == undefined) {
        return;
    }
    if (document.getElementById(buttonId).dispatchEvent) {
        var e = document.createEvent("MouseEvents");
        e.initEvent("click", true, true);
        document.getElementById(buttonId).dispatchEvent(e);
    } else {
        document.getElementById(buttonId).click();
    }
} 
```

你可以像这样使用它

```
submitRequest("target-element-id"); 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2009-04-21T18:15:01.027

你需要伪造一个锚点击吗？从厚箱网站：

> 可以从链接元素、输入元素（通常是按钮）和区域元素（图像映射）调用 ThickBox。

如果这是可以接受的，它应该就像将厚盒类放在输入本身一样简单：

```
<input id="thickboxButton" type="button" class="thickbox" value="Click me"> 
```

如果没有，我建议使用 Firebug 并在锚元素的 onclick 方法中放置一个断点，以查看它是否仅在第一次单击时触发。

编辑：

好的，我必须自己尝试一下，对我来说，您的代码几乎可以在 Chrome 和 Firefox 中运行：

```
<html>
<head>
<link rel="stylesheet" href="thickbox.css" type="text/css" media="screen" />
</head>
<body>
<script src="jquery-latest.pack.js" type="text/javascript"></script>
<script src="thickbox.js" type="text/javascript"></script>
<input onclick="$('#thickboxId').click();" type="button" value="Click me">
<a id="thickboxId" href="myScript.php" class="thickbox" title="">Link</a>
</body>
</html> 
```

无论我单击输入还是锚元素，都会弹出窗口。如果上面的代码对您有用，我建议您的错误出在其他地方，并且您尝试隔离问题。

另一个可能是我们使用了不同版本的 jquery/thickbox。我正在使用从thickbox 页面获得的内容-jquery 1.3.2 和thickbox 3.1。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2010-03-11T23:58:23.380

您可以通过 jQuery 或在 HTML 页面代码中使用模仿链接 href 的操作创建表单：

`<a id="anchor_link" href="somepath.php">click here</a>.`

```
var link = $('#anchor_link').attr('href');
$('body').append('<form id="new_form" action="'+link+'"></form>');
$('#new_form').submit(); 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2010-08-20T16:54:21.463

为了在登陆页面时模拟对锚点的点击，我只是使用 jQuery 为`$(document).ready.`无需复杂触发器的 scrollTop 属性设置动画，并且适用于 IE 6 和所有其他浏览器。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2012-04-12T19:52:44.883

如果你不需要使用 JQuery，我不需要。我的跨浏览器功能有问题`.click()`。所以我使用：

```
eval(document.getElementById('someid').href) 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2010-03-08T15:24:15.437

使用我制作的 Jure 脚本，可以轻松地“单击”任意数量的元素。
我刚刚在 1600 多个项目上使用了它的谷歌阅读器，它运行良好（在 Firefox 中）！

```
var e = document.createEvent('MouseEvents');
e.initEvent( 'click', true, true );
$(selector).each(function(){this.dispatchEvent(e);}); 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2010-07-29T02:43:42.163

`JQuery('#left').triggerHandler('click');`在 Firefox 和 IE7 中运行良好。我没有在其他浏览器上测试过。

如果要触发自动用户点击，请执行以下操作：

```
window.setInterval(function() 
    {
        $('#left').triggerHandler('click');
    }, 1000); 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2015-02-16T21:54:51.777

这不适用于 android 本机浏览器单击“隐藏输入（文件）元素”：

```
$('a#swaswararedirectlink')[0].click(); 
```

但这有效：

```
$("#input-file").show();
$("#input-file")[0].click();
$("#input-file").hide(); 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2015-04-20T19:12:26.643

在尝试使用 jQuery UI 微调器在单元测试中模拟“点击”时，我无法获得任何以前的答案。特别是，我试图模拟选择向下箭头的“旋转”。我查看了[jQuery UI 微调器单元测试](https://github.com/jquery/jquery-ui/tree/master/tests/unit/spinner)，他们使用以下方法，这对我有用：

```
element.spinner( "widget" ).find( ".ui-spinner-up" ).mousedown().mouseup(); 
```

# mysql - 使用 Like 的 MySQL 参数化查询

> ID：773641
> 
> 赞同：22
> 
> 时间：2009-04-21T17:18:22.460
> 
> 标签：mysql

我想在 MySQL 中运行这样的查询：

```
select * from table where column1 like '%searchdata%' 
```

但我想使用一个参数来传递搜索文本。这可能吗？这似乎不起作用：

```
select * from table where column1 like '%?Parameter%' 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2009-04-21T17:20:56.057

符号需要在`%`参数值内，所以它更像是：

```
select * from table where column1 like ?; 
```

然后将参数设置为：

```
%searchText% 
```

# visual-studio-2008 - 关于 F# CTP，我应该了解什么？

> ID：773642
> 
> 赞同：0
> 
> 时间：2009-04-21T17:18:58.837
> 
> 标签：visual-studio-2008, f#

我想开始玩 f#。F#的CTP是关于什么的？

它是我可以用来安装在 vs2008 中的东西吗？快递呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-21T17:22:22.357

CTP = 社区技术预览

CTP 应该可以安装到 VS2008 中。我已经将它安装到 Visual Studio Shell 中，没有任何问题（只要在 CTP*之前安装了 shell，它就可以正常工作）*

有关更多信息，请参阅[此博客条目](http://blogs.msdn.com/chrsmith/archive/2008/05/02/f-in-20-minutes-part-i.aspx)。CTP 和 VS 安装。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-21T17:21:25.150

CTP = 社区技术预览。您可以下载 F# msi 并将其与您当前的 VS2008 一起安装。

我不确定它是否适用于 Express，但也有一个免费的 Visual Studio shell。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-21T19:31:43.513

也可以看看

[https://stackoverflow.com/questions/734525/getting-started-with-f](https://stackoverflow.com/questions/734525/getting-started-with-f)

其中谈到了“需要的工具”以及教程等。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-21T17:25:28.573

不适用于 Express，但您可以使用[Visual Studio Shell](http://msdn.microsoft.com/en-us/vsx2008/products/bb933751.aspx)。

# gnuplot - 如何将数据文件的第一行视为gnuplot中的列标签？

> ID：773643
> 
> 赞同：21
> 
> 时间：2009-04-21T17:19:25.000
> 
> 标签：gnuplot

我有一张这样的桌子：

```
A B C D E F G H I 
10 23998 16755 27656 17659 19708 20328 19377 18925
20 37298 33368 53936 41421 44548 40756 40985 37294 
```

我用这个命令来绘制

```
plot "C:/file.txt" using 1:2 with lines smooth bezier, "C:/file.txt" using 1:3 with lines smooth bezier, ... 
```

但是，所有标签都作为文件名出现。gnuplot 是否可以读取第一行并相应地标记行？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2009-04-21T21:05:03.273

```
设置键自动标题列头

```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-02T02:14:35.267

绘制 [n=2:12] 'vv.csv' u 1:(column(n)) w 行标题 columnhead(n)

### 我不想绘制第一列数据，因此 n=2:.....

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-21T20:31:59.640

我检查了文档，但没有看到自动执行此操作的方法，但您可以手动设置标题

```
plot "file.txt" using 1:2 title "A" with lines smooth bezier ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-21T20:51:03.353

我曾经[写过](http://newsgroups.derkeiler.com/Archive/Comp/comp.graphics.apps.gnuplot/2007-05/msg00075.html)一个脚本，将 FM 广播电台的频率沿从 87MHz 到 108MHz 的轴绘制，使用每个广播电台的名称作为垂直标签。这不是一个纯粹的 gnuplot 解决方案，输入文件是用 perl 和 make 处理的，但我建议你看看它，看看你是否可以使用类似的东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-21T20:57:19.343

如果您想要绘制大量数据并且想要自动提取标题，您也可以使用 gnuplot 工具包，例如[Python 的这个工具包。](http://gnuplot-py.sourceforge.net/)

# iphone - Cocoa Touch/iPhone 中的 XML 解析

> ID：773651
> 
> 赞同：4
> 
> 时间：2009-04-21T17:21:48.847
> 
> 标签：iphone, xml, cocoa-touch

好的，我已经看到了 TouchXML、parseXML、NSXMLDocument、NSXMLParser，但我真的很困惑该怎么做。

我有一个连接到服务器、请求数据并获取 XML 响应的 iphone 应用程序。[http://pastebin.com/f681c4b04](http://pastebin.com/f681c4b04)提供了对不同查询集的示例 xml 响应

我有另一个充当控制器的类（如在 MVC 中，执行获取数据的逻辑）。此类从 View 类获取输入并对其进行处理，例如向网络服务器发送请求、获取 xml、解析 xml、填充其变量（它是单例/共享类），然后以真或假响应调用者。调用者根据控制器类给出的响应，检查控制器的变量并向用户显示适当的内容。

我有以下控制器类变量：

```
@interface backendController : NSObject {
NSMutableDictionary *searchResults, *plantInfoResults, *bookmarkList, *userLoginResult;
} 
```

以及 getBookmarkList、getPlantInfo 等函数。现在我正在通过 NSLog(@"Result: :%@" [NSString stringWithContentsOfURL:url]) 打印网络服务器返回的纯 XML

我想要一个通用函数，它获取从服务器返回的 XML，对其进行解析，生成一个 NSMutableDictionary，其中包含作为键的 XML 开始标签的文本表示形式和作为值的 XML 标签值并返回它。

只有一个问题，如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-21T17:31:29.853

您是否尝试过您提到的任何 XML 解析器？这是他们设置节点名称的键值的方式：

```
[aBook setValue:currentElementValue forKey:elementName]; 
```

PS仔细检查您的XML，似乎您在某些结果中缺少根节点。除非您为了简单起见而忽略了它。

看看[w3schools XML 教程](http://www.w3schools.com/xml/xml_tree.asp)，它应该为您指明 XML 语法的正确方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T00:28:34.733

考虑以下代码片段，它使用[libxml2](http://www.xmlsoft.org/)、[Matt Gallagher 的 libxml2 包装器](http://cocoawithlove.com/2008/10/using-libxml2-for-parsing-and-xpath.html)和[Ben Copsey 的 ASIHTTPRequest](http://allseeing-i.com/ASIHTTPRequest-CFNetwork-wrapper-for-HTTP-requests)来解析 HTTP 文档。

要解析 XML，请使用`PerformXMLXPathQuery`而不是`PerformHTTPXPathQuery`我在示例中使用的。

type的`nodes`实例`NSArray *`将包含`NSDictionary *`您可以递归解析以获取所需数据的对象。

或者，如果您知道 XML 文档的架构，您可以编写一个 XPath 查询来直接获取 a`nodeContent`或`nodeAttribute`值。

```
ASIHTTPRequest *request = [ASIHTTPRequest alloc] initWithURL:[NSURL URLWithString:@"http://stackoverflow.com/"];
[request start];
NSError *error = [request error];
if (!error) {
    NSData *response = [request responseData];
    NSLog(@"Root node: %@", [[self query:@"//" withResponse:response] description]);
}
else 
    @throw [NSException exceptionWithName:@"kHTTPRequestFailed" reason:@"Request failed!" userInfo:nil];
[request release];

...

- (id) query:(NSString *)xpathQuery withResponse:(NSData *)respData {
    NSArray *nodes = PerformHTMLXPathQuery(respData, xpathQuery);
    if (nodes != nil)
        return nodes;
    return nil;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T08:22:45.993

为您提供一个在 Table 中解析 XML 的简单示例，希望对您有所帮助。

//XMLViewController.h

```
#import <UIKit/UIKit.h>
@interface TestXMLViewController : UIViewController<NSXMLParserDelegate,UITableViewDelegate,UITableViewDataSource>{
@private
NSXMLParser *xmlParser;
NSInteger depth;
NSMutableString *currentName;
NSString *currentElement;
NSMutableArray *data;
}
@property (nonatomic, strong) IBOutlet UITableView *tableView;
-(void)start;
@end 
```

//TestXMLViewController.m

```
#import "TestXmlDetail.h"
#import "TestXMLViewController.h"
@interface TestXMLViewController ()
- (void)showCurrentDepth;

@end

@implementation TestXMLViewController

@synthesize tableView;
- (void)start
{
NSString *xml = @"<?xml version=\"1.0\" encoding=\"UTF-8\" ?><Node><name>Main</name><Node><name>first row</name></Node><Node><name>second row</name></Node><Node><name>third row</name></Node></Node>";
xmlParser = [[NSXMLParser alloc] initWithData:[xml dataUsingEncoding:NSUTF8StringEncoding]];
[xmlParser setDelegate:self];
[xmlParser setShouldProcessNamespaces:NO];
[xmlParser setShouldReportNamespacePrefixes:NO];
[xmlParser setShouldResolveExternalEntities:NO];
[xmlParser parse];

}

- (void)parserDidStartDocument:(NSXMLParser *)parser 
{
NSLog(@"Document started");
depth = 0;
currentElement = nil;
}

- (void)parser:(NSXMLParser *)parser parseErrorOccurred:(NSError *)parseError 
{
NSLog(@"Error: %@", [parseError localizedDescription]);
}

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName 
namespaceURI:(NSString *)namespaceURI 
qualifiedName:(NSString *)qName 
attributes:(NSDictionary *)attributeDict
{

currentElement = [elementName copy];

if ([currentElement isEqualToString:@"Node"])
{
    ++depth;
    [self showCurrentDepth];
}
else if ([currentElement isEqualToString:@"name"])
{

    currentName = [[NSMutableString alloc] init];
}
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName 
namespaceURI:(NSString *)namespaceURI 
qualifiedName:(NSString *)qName
{

if ([elementName isEqualToString:@"Node"]) 
{
    --depth;
    [self showCurrentDepth];
}
else if ([elementName isEqualToString:@"name"])
{
    if (depth == 1)
    {
        NSLog(@"Outer name tag: %@", currentName);
    }
    else 
    {
        NSLog(@"Inner name tag: %@", currentName);
      [data addObject:currentName];
    }
    }
   }        

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
if ([currentElement isEqualToString:@"name"]) 
{
    [currentName appendString:string];
} 
}

- (void)parserDidEndDocument:(NSXMLParser *)parser 
{
    NSLog(@"Document finished", nil);
}

- (void)showCurrentDepth
{
  NSLog(@"Current depth: %d", depth);
}

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
 data = [[NSMutableArray alloc]init ];
[self start];
self.title=@"XML parsing";
NSLog(@"string is %@",data);
}
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
`enter code here`return [data count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *simpleTableIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];

if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:simpleTableIdentifier];
}
cell.textLabel.text = [data objectAtIndex:indexPath.row];
return cell;
}
@end 
```

# iphone - UITableView - 删除按钮

> ID：773657
> 
> 赞同：0
> 
> 时间：2009-04-21T17:24:16.393
> 
> 标签：iphone, cocoa-touch

在我的应用程序中，当用户滑动某一行时，我想显示一个删除按钮。当按钮出现时，它会掩盖我的单元格中的 IndexTitles 和另一个标签（它有子视图）。

当按钮出现时如何自定义我的表格？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2010-01-09T23:48:48.587

单元格 textLabel 是否允许自动调整大小并且 lineBreakMode 是否设置为 UILineBreakModeTailTruncation？

```
[[cell textLabel] setLineBreakMode: UILineBreakModeTailTruncation];
[[cell textLabel] setAutoresizingMask: UIViewAutoresizingFlexibleRightMargin]; 
```

如果单元格内容不灵活，当删除按钮出现时，它可能会被遮挡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-23T07:20:54.873

你说的“晦涩难懂”是什么意思？您的内容是否会缩小以给删除按钮留出空间，或者该按钮会覆盖您的内容？

在后一种情况下，您应该考虑将内容添加为单元格 contentView 的子视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-25T21:17:07.427

建立在 E-ploko 的基础上，可以肯定你不是绝对定位的东西。即，如果您希望某些内容出现在距离内容视图的右边界 10 像素处，请计算位置应该是什么，不要假设宽度恒定。

# operating-system - 生物信息学的最佳操作系统？

> ID：773658
> 
> 赞同：0
> 
> 时间：2009-04-21T17:25:22.053
> 
> 标签：operating-system, bioinformatics

生物信息学工作的最佳操作系统选择是什么？大多数工具是用于 64 位 Windows、Linux/Unix 还是 OS X？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-22T16:12:15.713

对于 bioinfo，Linux 很好，但您可能需要一些软件来进行数据分析。例如，在我的例子中，我必须改进通过 adobe illustrator 脚本生成的矢量图形图像。在那种情况下，一个完整的 linux 设置对我来说是不利的。

对于服务器和运行程序（主要是 perl 脚本，因为 bioinfo 社区喜欢 perl），我强烈支持 Linux。任何其他 Unix 要么已经过时，要么很快就会过时。

因此，我的建议是在服务器上安装 Linux，在您的笔记本电脑上安装另一个 Unix，以便具有更好的兼容性。由于唯一适合桌面的 Unix 解决方案是 MacOSX，这就是您问题的答案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-22T16:03:25.487

一个加载的问题......生物信息学分析的范围可以从仅使用现有软件到开发您自己的软件。因此，取决于您想要完成的任务将导致不同的答案。但是，Linux 可能是您最好的选择，因为大多数生物信息学软件都需要从源代码编译，并且很可能是在 Linux 兼容平台上开发的。[我当前的设置是在VirtualBox](http://www.virtualbox.org/)中运行 Linux 的 Windows 操作系统。通过这种方式，我获得了良好的硬件支持（Linux 仍然有些缺乏）以及使用我研究所需的大量软件程序的能力。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-11-12T10:38:45.913

生物信息学是一个仍然严重依赖文本文件处理的领域，为此 Linux 提供了许多核心实用程序。一些必备工具是*cat*、*sed*、*cut*、*paste*、*grep*，当然还有预装的 perl 和 python 解释器。此外，像 R（用于统计计算）这样的软件在 Linux 中没有内存限制（而在 Windows 中，出于安全原因，它被限制为可用 RAM 的百分比）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-09-08T09:32:59.783

最近我注意到 MacBook 发生了重大转变。在最近的会议上，MacBooks 已经超过了 linux 或 windows 笔记本电脑。mac 笔记本电脑的优点是，如果碰巧某些软件包不可用，您可以使用 fink 或类似工具在 shell 中完成笔记本电脑上的所有 linux 工作。而且您实际上可以使用笔记本电脑来做其他非核心工作。Windows 应用程序使用 Parallels 或 VMFusion - 加上统一等功能，您无需运行完整的 Windows VM。

在桌面端，我可能仍然会推荐 linux。这是因为如果您开发任何类型的服务器基础架构，那么部署环境也总是 linux。服务器上的红帽在学术环境中很受欢迎。但是，这并不像以前那么重要，而且我也看到了很多基于 Mac 的桌面。我还注意到只使用笔记本电脑进行开发的人数有所增加。

几乎所有生物信息学软件都可用于 linux（因此通常适用于 Mac）。我还没有找到适用于 linux 的生物信息学程序——它几乎都是开源的。Mac 的主要优势是用于演示文稿和 Illustrator 等程序的卓越软件。Mac 上也很好地支持 LaTeX 来编写手稿，而 Word 可以原生地与非极客共享文档。

像 perl 和 python（生物信息学的通用语言）这样的脚本语言在 mac 上得到了很好的支持——应该记住，linux 有很多版本。相同的脚本可能需要一些工作才能在不同版本的 linux 上运行。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-21T17:31:56.640

由于该领域的许多参与者都是大学，而且许多大学都使用 Linux，所以这是我的猜测。我知道我获得硕士学位的学校的生物信息学系使用 Linux。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-21T17:33:17.743

如果您使用像 Ubuntu 这样的流行 Linux 发行版，您将首先加载 Perl 和（我相信）Python。这些是用于生物信息学的流行语言，并且有一些不错的库（Bioperl/biopython/CPAN/等）。

另外，我没有使用过它，但[DNALinux](http://www.dnalinux.com/)是为这类事情而设计的。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2011-07-13T23:09:40.390

生物实验室的大多数学生和博士后都使用 Mac 和 OS/X。它是主要的平台。通常，生物信息学类型更倾向于comp sci，但它们仍然必须与生物学家和生物工程师互动，他们通常不太喜欢comp sci。计算在生物信息学会议上运行哪个操作系统的笔记本电脑的数量，并且最受欢迎的是 OS/X。许多生物信息学工具是用 Perl 或 Java 编写的，Python 变得越来越流行。因为这些是面向 POSIX 的语言，具有为 POSIX 操作系统编写的大量 3rd 方库，所以选择 Windows 将不是一个很好的选择。但是：大多数用于仪器控制的商业应用程序（例如生物机器人）主要是为 Windows 编写的，

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-21T17:30:45.707

Unix 系统在科学界很流行，所以我建议使用 Linux，特别是如果你打算使用 FORTRAN。您可以尝试 Windows，但 Windows API 并不完全适合程序员，而 C#（虽然对于大多数应用程序来说非常快）对于科学计算来说可能太慢了。F# 对科学来说真的很棒，但我不确定它是否足够快以进行复杂的计算。

我想您也可以使用 C++、STL 以及一些独立于平台的 GUI 工具包，例如 Qt 或 wxWidgets。这样，您就不必担心平台（那么多）。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-22T15:41:05.990

虽然可能不是“最好的”操作系统，但那里有大量的 Windows 软件。在 Pharma 工作时，我见过 SAS、SPlus、StatXact、NQuery 等。

也就是说，越来越多的人转向 Linux。例如，R 编程可用于多个操作系统。我怀疑由于最终用户熟悉系统，渗透速度较慢。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-07-23T17:29:03.343

看看Linux！！它不仅是一个操作系统，而且是一个由一群人生产和维护的软件项目，包括所有部分（从内核到各种程序）。

如果您长期使用 Linux（一两年），您将学习如何生活并为社区做出贡献，这对科学家来说非常有用。

从技术角度来看，Linux 是 Unix 系统的免费克隆，这意味着它有很好的支持在命令行（bash）下工作，以及许多管理平面文件的工具（sed、awk , grep)，这将使您能够对文本文件执行操作，而无需直接打开它们。此外，它还有很好的工具，可以让您管理系统中安装的程序，并通过单击下载和安装新程序。它可能缺少一些高级专有程序，但另一方面，您有很多免费工具和良好的文档。

我已经使用 Linux 4 年了，我一点也不怀念其他操作系统。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-04-22T15:48:57.143

Mac OS X，您可以在虚拟机中安装 Windows，并且是 Unix。然后是 Linux 的所有优点（带有“端口”一个包管理程序）。

只是我的 0.02 美元。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-04-27T12:00:06.157

在生物信息学和类似领域，您可以在工具集中进行选择，这些工具集通常涉及**多个**主机/来宾/目标操作系统。您使用的操作系统主要取决于您在哪里/如何工作。

我曾在许多不同的工作环境中工作过，从纯 Linux 到“纯”Windows (hel-lo Cygwin)。我从未在 Mac OS X 中工作过，但也知道那些专门从事此工作的人。

如果您要开发广泛分布的 FOSS 应用程序，那么**Linux**、ANSI C、Perl/Python、Apache/MySQL（即 LAMP 堆栈）是您的最佳选择。此外，Windows 也有类似的“WAMP”堆栈，使用 Cygwin 有人可以编译和使用在 Linux 中开发的许多工具。据我所知，许多 Linux 应用程序也可以在 Mac OS X 上构建/运行。

对于数据分析/可视化，流行的商业甚至许多 OSS 工具在**Windows**中运行，无论是原生版本还是 Java 版本。因此，最好的设置可能是本机 Windows XP 机器和对 Linux 的真实/虚拟实例的 [xhosted] 访问。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-04-27T12:33:27.963

Windows 是一个不错的选择，您可能需要大量非常标​​准的应用程序，例如 AnnHyb、MeltSim、Base Pad 和 Winblast。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-10-07T11:12:14.400

我在大学学习了生物信息学课程，我们在 Windows、Linux、Solaris 和一些基于 Web 的工具上使用了各种工具。

我认为简短的回答是您需要访问上述任何内容。虽然你应该能够应付 windows 或 linux。它只是限制您使用该平台上可用的工具。

根据我的经验（这是粗略的），生物信息学工具通常是用 perl 或 java 编写的，我认为最近是 Python，所以这主要是平台无关的。

有一些工具将用 c 编写，因此要使用它们，您需要拥有它为可用的任何平台，或者为您选择的任何平台找到一个构建。

# c++ - 使用 boost c++ ublas 矩阵和向量类型的元素操作

> ID：773667
> 
> 赞同：7
> 
> 时间：2009-04-21T17:26:35.247
> 
> 标签：c++, boost, vector, matrix, linear-algebra

我想对增强矩阵和向量类型执行逐元素函数，例如对每个元素取对数，对每个元素求幂，应用特殊函数，例如 gamma 和 digamma 等（类似于 matlab 对应用的这些函数的处理到矩阵和向量。）

我想为每个所需的功能编写一个强力的辅助函数就足够了，但这似乎很浪费。

同样，boost wiki 提供了一些代码来[矢量化标准函数](http://www.crystalclearsoftware.com/cgi-bin/boost_wiki/wiki.pl?Examples_-_How_To_Extend_UBLAS)，但这似乎相当复杂。

有人建议使用 valarray，但我想避免在数据类型之间进行转换，因为我需要 ublas 数据类型用于其他操作（矩阵乘积、稀疏矩阵等）

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2010-10-15T16:31:45.907

使用`begin1()`/`end1()`将不起作用，因为它提供了对默认列位置 (0) 中元素的访问：因此，您只需访问第一列中的所有元素。通过以下方式获得顺序访问更好（从某种意义上说，您可以获得预期的行为）：

```
std::transform(mat.data().begin(), mat.data().end(),
               mat.data().begin(), boost::math::tgamma) ; 
```

我怀疑这可能是实施不完整的情况。

享受！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-16T05:51:33.827

# 警告

以下答案不正确。请参阅底部的编辑。我保留了原始答案，以便为指出错误的人提供上下文和信誉。

* * *

我对 boost 库不是特别熟悉，所以可能有更标准的方法可以做到这一点，但我认为你可以使用迭代器和 STL[转换](http://www.cppreference.com/wiki/stl/algorithm/transform)函数模板做你想做的事。[uBLAS 库文档](http://www.boost.org/doc/libs/1_39_0/libs/numeric/ublas/doc/index.htm)的介绍说它的类被设计为与 STL 中使用的相同迭代器行为兼容。boost 矩阵和向量模板[都有迭代器](http://www.boost.org/doc/libs/1_39_0/libs/numeric/ublas/doc/iterator_concept.htm#indexed_random_access_cr_iterator)，可用于访问各个元素。向量有`begin()`和`end()`，矩阵有`begin1()`、`end1()`、`begin2()`和`end2()`。品种是按列的`1`迭代器，`2`品种是按行的迭代器。请参阅[VectorExpression上的 boost 文档](http://www.boost.org/doc/libs/1_39_0/libs/numeric/ublas/doc/expression_concept.htm#vector_expression)和[MatrixExpression](http://www.boost.org/doc/libs/1_39_0/libs/numeric/ublas/doc/expression_concept.htm#matrix_expression)了解更多信息。

使用 STL`transform`算法，您可以将函数应用于可迭代序列的每个元素，并将结果分配给具有相同长度或相同序列的不同可迭代序列。因此，要在 boost uBLAS 向量上使用它，您可以这样做：

```
using namespace boost::numeric::ublas;

// Create a 30 element vector of doubles
vector<double> vec(30);

// Assign 8.0 to each element.
std::fill(vec.begin(), vec.end(), 8.0);

// Perform the "Gamma" function on each element and assign the result back
// to the original element in the vector.
std::transform(vec.begin(), vec.end(), vec.begin(), boost::math::tgamma); 
```

对于矩阵，它基本上是相同的，您可以使用迭代器`1`或`2`迭代器系列。您选择使用哪一个取决于矩阵的内存布局是行主要还是列主要。对 uBLAS 文档的粗略浏览让我相信它可能是其中之一，因此您需要检查代码并确定正在使用哪个代码，以便选择最有效的迭代顺序。

```
matrix<double> mat(30, 30);
.
.
.

std::transform(mat.begin1(), mat.end1(), mat.begin1(), boost::math::tgamma); 
```

作为最后一个参数传递的函数可以是一个接受单个双精度参数并返回双精度值的函数。它也可以是[函子](http://en.wikipedia.org/wiki/Function_object#In_C_and_C.2B.2B)。

这与您引用的矢量化示例并不完全相同，但它似乎应该非常接近您想要的。

* * *

# 编辑

看起来我应该在提出建议之前测试一下我的建议。正如其他人所指出的，“1”和“2”迭代器仅沿矩阵的单行/列进行迭代。Boost 中的概述文档在这方面存在严重误导。它声称`begin1()`“返回指向矩阵开头的 iterator1”和`end1()`“返回指向矩阵末尾的 iterator1”。说“矩阵的一列”而不是“矩阵”会杀死他们吗？我假设 an`iterator1`是一个按列迭代的迭代器，它将迭代整个矩阵。有关执行此操作的正确方法，请参阅[Lantern Rouge 的回答](https://stackoverflow.com/a/3944216/35881)。

# sql-server-2005 - SQL Server 2005 Management Studio Express 中的“报告 -> 自定义报告”菜单选项缺失。为什么？

> ID：773669
> 
> 赞同：0
> 
> 时间：2009-04-21T17:26:53.220
> 
> 标签：sql-server-2005, report

我已经安装了：

*   MS SQL Server 2005 9.00.4035.00 SP3 速成版
*   Microsoft SQL Server Management Studio Express 9.00.2047.00
*   Microsoft 数据访问组件 (MDAC) 6.0.6001.18000 (longhorn_rtm.080118-1840)
*   微软 MSXML 3.0 4.0 5.0 6.0
*   微软 Internet Explorer 7.0.6001.18000
*   微软 .NET 框架 2.0.50727.3074
*   操作系统 6.0.6001 (windows vista)

我安装了[SQL Server 性能仪表板。](http://www.microsoft.com/downloads/details.aspx?FamilyId=1d3a4a0d-7e0c-4730-8204-e419218c1efc&displaylang=en)我正在尝试按照此处的步骤操作：[安装 SQL Server 2005 性能仪表板报告](http://www.mssqltips.com/tip.asp?tip=1553)

此步骤包括：“右键单击对象资源管理器中的任何节点，然后单击自定义报告...”

[![自定义报告菜单](https://i.stack.imgur.com/gMfM1.jpg)](https://i.stack.imgur.com/gMfM1.jpg)

但是在我的上下文菜单中没有“报告”选项，我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T19:13:43.023

快速猜测：也将您的客户端工具（Management Studio）修补到 SP3/4035。

您拥有 SP1 RTM 工具（内部版本 2047），并且[自定义报告适用于 SP2及更高版本](http://www.simple-talk.com/sql/sql-tools/custom-reports-in-management-studio,-using-the-performance-dashboard/)

通常最好将客户端和服务器（甚至是 express）修补到同一级别。

# html - 特定于页面的 css 规则 - 将它们放在哪里？

> ID：773672
> 
> 赞同：23
> 
> 时间：2009-04-21T17:27:47.193
> 
> 标签：html, css

通常，当我在设计网站时，我需要将特定样式应用于页面上的特定元素，并且我绝对确定它只会应用于该页面上的该元素（例如绝对定位的按钮或者其他的东西）。我不想诉诸内联样式，因为我倾向于同意样式与标记分开的哲学，所以我发现自己在内部争论将样式定义放在哪里。

我讨厌在我的基础 css 文件中为一次性使用场景定义一个特定的类或 ID，并且我害怕制作特定于页面的 .css 文件的想法。对于我正在处理的当前站点，我正在考虑将样式定义放在页面顶部的 head 元素中。你会怎么办？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-04-21T17:31:56.733

看看是否有可以给你想要的结果的类的组合。您可能还想考虑将那个元素的 CSS 分解为几个可以在其他元素上重复使用的类。这将有助于最大限度地减少整个网站所需的 CSS。

我会尽量避免在 HTML 文件顶部使用特定于页面的 CSS，因为如果您想更改网站的外观，这会使您的 CSS 碎片化。

对于真的，真的，永远不会用于其他任何东西的 CSS，我仍然会求助于`#id`在站点范围的 CSS 中设置规则。

由于 CSS 是从不同的文件链接进来的，它允许浏览器缓存该文件，这会（非常）略微减少您的服务器带宽以供将来加载。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-21T17:58:00.057

有四种基本情况：

1.  风格=属性。这是最难维护但最容易编码的。我个人认为使用 style= 是一个错误。
    *   页面顶部的 <style> 元素。这比 style= 稍微好一点，因为它可以保持标记干净，但是它会浪费带宽，并且更难进行全面的 CSS 更改，因为您无法查看样式表并知道存在哪些规则。
    *   page-specific css：这让您拥有干净的 HTML*和*干净的主 CSS 文件。但是，这意味着您的客户端必须下载大量的小 CSS 文件，这会增加带宽和页面加载延迟。但是，它非常容易维护。
    *   一个大站点范围的 CSS：一个大文件的主要优点是它只需下载一件事。这在带宽和延迟方面效率更高。

如果您正在进行任何服务器端编程，您也许可以动态组合#3 中的多个工作表以获得#4 的效果。

我会推荐一个大文件，无论您实际上将它作为一个文件维护还是通过构建过程或在服务器上动态生成文件。您可以使用特定于页面的 ID 指定选择器（始终包括一个，以防万一）。

至于[我写这篇文章时接受的答案，](https://stackoverflow.com/questions/773672/page-specific-css-rules-where-to-put-them/773697#773697)我不同意找到“为您提供所需结果的类组合”。在我看来，这听起来像是课程正在识别视觉风格而不是逻辑概念。你的类应该是“titlebox”而不是“red”。然后如果您需要更改用户信息页面上的文本颜色，您可以说

```
#userInfoPage .titlebox h1 { color : red; } 
```

不要开始到处应用课程，因为课程当前具有您想要的特定外观。您应该将高级概念放入您的页面，由带有类的 HTML 表示，然后设置这些概念的样式，而不是相反。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-21T17:43:35.457

我会为这样的页面设置一个ID

```
<body id="specific-page"> or <html id="specific-page"> 
```

并在站点范围的 css 文件中使用 css 覆盖机制。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-04-21T17:33:53.530

我认为您绝对应该扩展思考过程，以包括对“特定于页面的 css”的一些疑问。这应该是一件非常非常难得的事情。无论如何，我会说去使用全局样式表，但是重构你的 css / html 以使页面不必具有超级特定的样式。如果最终在全局 css 中有几行特定于页面的标记，谁在乎。无论如何，最好把它放在一个一致的地方。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-04-21T17:34:13.217

在消费页面中定义样式或内联样式是同一枚硬币的两个方面——在这两种情况下，您都在使用页面带宽来获取样式。我认为一个不一定比另一个更好。

我会提倡在您的站点范围的主样式表中为其创建一个#Selector。污染是最小的，如果你真的有这么多真正独特的案例，你可能想重新考虑他们标记网站的方式。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-04-21T17:30:09.280

我会将它们放在`<style />`页面顶部的标签中。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-04-21T17:33:54.870

为一两个特定规则加载特定于页面的 CSS 文件是不值得的。我会将它放在文档头部的标签中。我通常做的是拥有我的站点范围的 CSS 文件，然后使用注释，根据页面对其进行分段并在那里应用特定规则。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-04-21T17:39:10.600

如您所知，样式表文件是静态文件并缓存在客户端。它们也可以通过 Web 服务器进行压缩。所以把它们放在一个外部文件中是我的选择。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-04-21T17:30:54.097

对于这种情况，我认为将特定于页面的样式信息放在标题中可能是最好的解决方案。污染站点范围的样式表似乎是错误的，我同意您对内联样式的看法。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-04-21T17:30:56.877

在这种情况下，我通常将其放在页面顶部。我在 PHP 中有一个页面定义框架，我使用它为每个页面携带局部变量，其中一个是特定于页面的 CSS 样式。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-04-21T17:33:15.810

如果您想知道样式是在哪里定义的，请将其放在您想看的地方。

对我来说，这与我放置使用 2 次、5 次或 170 次的样式完全相同的位置 - 我认为没有理由根据使用次数从主样式表中排除样式。

# .net - 如何从服务本身内部获取 Windows 服务的名称

> ID：773678
> 
> 赞同：13
> 
> 时间：2009-04-21T17:28:42.247
> 
> 标签：.net, windows-services

我有一堆用 .NET 编写的 win 服务，它们使用具有不同配置的完全相同的可执行文件。所有服务都写入同一个日志文件。但是，由于我使用相同的 .exe，该服务不知道将其自己的服务名称放入日志文件中。

我的服务有没有办法以编程方式检索自己的名称？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-04-21T23:20:43.070

通过查看 Microsoft 如何为 SQL Server 服务执行此操作可以获得洞察力。在服务控制面板中，我们看到：

服务名称：**MSSQLServer**

可执行文件的路径：“C:\Program Files\Microsoft SQL Server\MSSQL.1\MSSQL\Binn\sqlservr.exe”-s **MSSQLSERVER**

请注意，服务的名称作为命令行参数包含在内。这就是它在运行时提供给服务的方式。通过一些工作，我们可以在 .NET 中完成同样的事情。

### 基本步骤：

1.  让安装程序将服务名称作为安装程序参数。
2.  进行 API 调用以设置服务的命令行以包含服务名称。
3.  修改 Main 方法以检查命令行并设置 ServiceBase.ServiceName 属性。Main 方法通常位于名为 Program.cs 的文件中。

### 安装/卸载命令

要安装服务（可以省略 /Name 以使用 DEFAULT_SERVICE_NAME）：

```
installutil.exe /Name=YourServiceName YourService.exe 
```

卸载服务（/Name 从来不需要，因为它存储在 stateSaver 中）：

```
installutil.exe /u YourService.exe 
```

### 安装程序代码示例：

```
using System;
using System.Collections;
using System.Configuration.Install;
using System.ComponentModel;
using System.Runtime.InteropServices;
using System.ServiceProcess;

namespace TestService
{
    [RunInstaller(true)]
    public class ProjectInstaller : Installer
    {
        private const string DEFAULT_SERVICE_NAME = "TestService";
        private const string DISPLAY_BASE_NAME = "Test Service";

        private ServiceProcessInstaller _ServiceProcessInstaller;
        private ServiceInstaller _ServiceInstaller;

        public ProjectInstaller()
        {
            _ServiceProcessInstaller = new ServiceProcessInstaller();
            _ServiceInstaller = new ServiceInstaller();

            _ServiceProcessInstaller.Account = ServiceAccount.LocalService;
            _ServiceProcessInstaller.Password = null;
            _ServiceProcessInstaller.Username = null;

            this.Installers.AddRange(new System.Configuration.Install.Installer[] {
                _ServiceProcessInstaller,
                _ServiceInstaller});
        }

        public override void Install(IDictionary stateSaver)
        {
            if (this.Context != null && this.Context.Parameters.ContainsKey("Name"))
                stateSaver["Name"] = this.Context.Parameters["Name"];
            else
                stateSaver["Name"] = DEFAULT_SERVICE_NAME;

            ConfigureInstaller(stateSaver);

            base.Install(stateSaver);

            IntPtr hScm = OpenSCManager(null, null, SC_MANAGER_ALL_ACCESS);
            if (hScm == IntPtr.Zero)
                throw new Win32Exception();
            try
            {
                IntPtr hSvc = OpenService(hScm, this._ServiceInstaller.ServiceName, SERVICE_ALL_ACCESS);
                if (hSvc == IntPtr.Zero)
                    throw new Win32Exception();
                try
                {
                    QUERY_SERVICE_CONFIG oldConfig;
                    uint bytesAllocated = 8192; // Per documentation, 8K is max size.
                    IntPtr ptr = Marshal.AllocHGlobal((int)bytesAllocated);
                    try
                    {
                        uint bytesNeeded;
                        if (!QueryServiceConfig(hSvc, ptr, bytesAllocated, out bytesNeeded))
                        {
                            throw new Win32Exception();
                        }
                        oldConfig = (QUERY_SERVICE_CONFIG)Marshal.PtrToStructure(ptr, typeof(QUERY_SERVICE_CONFIG));
                    }
                    finally
                    {
                        Marshal.FreeHGlobal(ptr);
                    }

                    string newBinaryPathAndParameters = oldConfig.lpBinaryPathName + " /s:" + (string)stateSaver["Name"];

                    if (!ChangeServiceConfig(hSvc, SERVICE_NO_CHANGE, SERVICE_NO_CHANGE, SERVICE_NO_CHANGE,
                    newBinaryPathAndParameters, null, IntPtr.Zero, null, null, null, null))
                        throw new Win32Exception();
                }
                finally
                {
                    if (!CloseServiceHandle(hSvc))
                        throw new Win32Exception();
                }
            }
            finally
            {
                if (!CloseServiceHandle(hScm))
                    throw new Win32Exception();
            }
        }

        public override void Rollback(IDictionary savedState)
        {
            ConfigureInstaller(savedState);
            base.Rollback(savedState);
        }

        public override void Uninstall(IDictionary savedState)
        {
            ConfigureInstaller(savedState);
            base.Uninstall(savedState);
        }

        private void ConfigureInstaller(IDictionary savedState)
        {
            _ServiceInstaller.ServiceName = (string)savedState["Name"];
            _ServiceInstaller.DisplayName = DISPLAY_BASE_NAME + " (" + _ServiceInstaller.ServiceName + ")";
        }

        [DllImport("advapi32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        private static extern IntPtr OpenSCManager(
            string lpMachineName,
            string lpDatabaseName,
            uint dwDesiredAccess);

        [DllImport("advapi32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        private static extern IntPtr OpenService(
            IntPtr hSCManager,
            string lpServiceName,
            uint dwDesiredAccess);

        [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Auto)]
        private struct QUERY_SERVICE_CONFIG
        {
            public uint dwServiceType;
            public uint dwStartType;
            public uint dwErrorControl;
            public string lpBinaryPathName;
            public string lpLoadOrderGroup;
            public uint dwTagId;
            public string lpDependencies;
            public string lpServiceStartName;
            public string lpDisplayName;
        }

        [DllImport("advapi32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        [return: MarshalAs(UnmanagedType.Bool)]
        private static extern bool QueryServiceConfig(
            IntPtr hService,
            IntPtr lpServiceConfig,
            uint cbBufSize,
            out uint pcbBytesNeeded);

        [DllImport("advapi32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        [return: MarshalAs(UnmanagedType.Bool)]
        private static extern bool ChangeServiceConfig(
            IntPtr hService,
            uint dwServiceType,
            uint dwStartType,
            uint dwErrorControl,
            string lpBinaryPathName,
            string lpLoadOrderGroup,
            IntPtr lpdwTagId,
            string lpDependencies,
            string lpServiceStartName,
            string lpPassword,
            string lpDisplayName);

        [DllImport("advapi32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        [return: MarshalAs(UnmanagedType.Bool)]
        private static extern bool CloseServiceHandle(
            IntPtr hSCObject);

        private const uint SERVICE_NO_CHANGE = 0xffffffffu;
        private const uint SC_MANAGER_ALL_ACCESS = 0xf003fu;
        private const uint SERVICE_ALL_ACCESS = 0xf01ffu;
    }
} 
```

### 主要代码示例：

```
using System;
using System.ServiceProcess;

namespace TestService
{
    class Program
    {
        static void Main(string[] args)
        {
            string serviceName = null;
            foreach (string s in args)
            {
                if (s.StartsWith("/s:", StringComparison.OrdinalIgnoreCase))
                {
                    serviceName = s.Substring("/s:".Length);
                }
            }

            if (serviceName == null)
                throw new InvalidOperationException("Service name not specified on command line.");

            // Substitute the name of your class that inherits from ServiceBase.

            TestServiceImplementation impl = new TestServiceImplementation();
            impl.ServiceName = serviceName;
            ServiceBase.Run(impl);
        }
    }

    class TestServiceImplementation : ServiceBase
    {
        protected override void OnStart(string[] args)
        {
            // Your service implementation here.
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2011-06-03T09:05:55.690

我在VB中使用这个函数

```
Private Function GetServiceName() As String
    Try
        Dim processId = Process.GetCurrentProcess().Id
        Dim query = "SELECT * FROM Win32_Service where ProcessId  = " & processId.ToString
        Dim searcher As New Management.ManagementObjectSearcher(query)
        Dim share As Management.ManagementObject
        For Each share In searcher.Get()
            Return share("Name").ToString()
        Next share
    Catch ex As Exception
        Dim a = 0
    End Try
    Return "DefaultServiceName"
End Function 
```

# linux - 在 X 启动时执行 JAR

> ID：773679
> 
> 赞同：0
> 
> 时间：2009-04-21T17:28:56.223
> 
> 标签：linux, executable-jar

我正在尝试在 linux 中设置一个 kiosk 类型系统，在其中初始化 X 时启动一个 java 应用程序。我有一个执行以下操作的脚本：

java -cp {使用 main 方法正确的 JAR 路径} -jar {JAR 的名称}

当我 cd'd 进入 JAR 所在的目录时，一切都是桃子，系统按我想要的方式工作，但是，如果我导航到任何其他目录，X 会终止并报告它无法访问 JAR。

我在这里想念什么？任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T17:32:35.810

您不需要 -cp*和*-jar

> java -jar {完整路径}

应该管用。.jar 中的 mainifest 文件应指定适当的 main() 方法。有关详细信息，请参见[此处。](http://java.sun.com/docs/books/tutorial/deployment/jar/appman.html)

# git - 格式补丁工作得相当好，正在寻找更好的方法

> ID：773685
> 
> 赞同：0
> 
> 时间：2009-04-21T17:30:18.467
> 
> 标签：git, rebase, format-patch

我有两个不同的分支，以至于变基似乎不起作用——或者我不知道该怎么做。

我有一个“公共”分支，其中删除了一堆文件（使用过滤器分支）。尽管大多数提交在增量方面匹配，但提交 ID 都是不同的。我已经尝试了很多方法来将更改从我的开发分支拉到我的公共分支......我发现很难相信它可以做我想做的事——但我怀疑我只是不知道如何去做做。无论如何，这工作正常，但似乎是错误的。

```
git checkout dev
git format-patch --stdout last_sync_tag > catchup.mbox
git checkout public
git am catchup.mbox
git --skip # talks about a missing file
git --skip # talks about a missing file
git --skip # talks about a missing file 
```

欢迎任何提示或建议，其中可能包括不过滤分支出您不希望在公共分支上的文件（但是，您如何摆脱它们？）。

我的树或多或少看起来像这样：

```
dev: a-b-c-d-e-f-g-h-i-j-k
pub: t-u-v-w-x 
```

t ≅ a, u ≅ c, v ≅ d, w ≅ e, x ≅ g。i,j,k 是我想迁移的新补丁。

```
checkout pub
rebase --onto pub i  # I really expected this to work 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T18:06:03.810

Git 的[`cherry-pick`](http://www.kernel.org/pub/software/scm/git/docs/git-cherry-pick.html)命令可能很有用。我没有在你的情况下使用它，但我认为它应该可以工作。唯一的痛苦是它不是为一系列提交而设计的，所以如果你想编写脚本/自动化它，你必须使用类似`git rev-list`.

同样，我还没有尝试过，但是像这样的 bash 脚本可能会给你一个很好的起点

```
git 结帐公共
用于 $(git rev-list --reverse last_sync_tag..dev) 中的转速；做
   git cherry-pick $rev && git tag -f last_sync_tag $rev || 1号出口
完毕

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T21:11:20.653

因为你使用了“filter-branch”，你将不得不帮助 git 找到正确的提交来执行 rebase。

我会在这里猜测，但大概你有一个“几乎”常见的提交，它有两个版本，你的公共分支的头和你的开发分支上这个提交对应的位置（未过滤）。调用对应的公共头部提交`<PH>`和开发提交（过滤前）`<DevPH>`。

签出 dev 分支后，您想要执行以下操作：

```
git rebase --onto <PH> <DevPH> 
```

这告诉 rebase 获取自当前分支以来每个提交引入的补丁，`<DevPH>`并将这些提交应用到`<PH>`. 我认为这就是你所需要的。

编辑：

您对问题的更新表明 h 相当于 dev 分支上公共流的负责人，并且您希望将 dev 分支上从这里开始的所有内容移植到公共分支上。如果是这样，命令是

```
git rebase --onto pub h 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T22:56:44.097

您是否定期维护 dev 分支上未公开的文件？还是他们只是闲逛？

如果您不倾向于对它们进行更改，并且您可以稍微重写历史记录，那么您可以安排将它们创建为基于您的公共分支的单个提交；并将其合并回公共，但使用“-s ours”以阻止它们实际进入。（[关于 git merge -s ours 的先前答案](https://stackoverflow.com/questions/727994/git-skipping-specific-commits-when-merging/729723#729723)）

就像是：

```
git checkout -b dev public
git am create-dev-only-files.patch
git checkout public
git merge -s ours dev
git checkout dev
# write more dev patches...
git checkout public
git merge dev
# and this should merge in the patches without bringing in the
#  dev-only files 
```

因此，如果您随后在您的开发分支上进行了更改并将它们合并到公共中，如果您不更改那些未公开的文件，那么其他所有内容都将简单地应用。但是，如果您想在公共更改上禁止的文件集，这可能会很棘手。例如，您可以尝试通过在公共分支上开始任何提交之前添加预提交挂钩来取消暂存特定文件来防止它发生。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-21T18:34:58.437

好吧，如果我不希望文件落在 .gitignore 中。可能它是配置而不是真正的代码，所以它根本不需要跟踪。

# delay - 平均互联网延迟

> ID：773687
> 
> 赞同：2
> 
> 时间：2009-04-21T17:30:43.927
> 
> 标签：delay, packet

只是想知道，互联网上两台主机之间的平均数据包传输延迟是多少（忽略数据包丢失和重新传输）。

现在，在你写它太笼统并且取决于太多因素（两台主机的位置，特定时间的网络工作量，仅举几例）之前，请稍等一下，我知道这一点。然而，这就是为什么我要问平均延迟可能是多少。必须有一些记录。

也许也适合要求单独的全国/大陆/洲际平均值。什么都有道理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-21T17:45:16.607

不管你问它，这个问题 WAAAYYYY 太笼统了。不过，Ping 时间可以给你一个合理的近似值。我对谷歌主机的平均：往返 (ms) min/avg/max/med = 20/23/37/21

雅虎：往返 (ms) min/avg/max/med = 19/23/38/23

百度（中国）：往返 (ms) min/avg/max/med = 269/272/275/272

对（匹兹堡）：往返 (ms) min/avg/max/med = 63/66/73/67

谷歌和 Y！正在使用内容分发网络，所以我很可能会在附近访问服务器。百度就在我身边。Pair 遍布全国。这些都来自一个相对快速的连接。

我希望拨号用户看到大约高 100-200 毫秒的数字（取决于当时的网络活动）。同样，如果我的网络负载很重（目前不是），我的数据也会显着增加。

这些帮助有用？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-21T17:47:52.077

[您可能会发现此页面上](http://www.stuartcheshire.org/rants/Latency.html)对这些内容的讨论很有趣。作者认为，交通的速度大约是光速的一半（假设各种科学家是对的，光速是交通速度所能达到的最佳速度。

# android - 在 Android 中自定义状态选项卡

> ID：773690
> 
> 赞同：20
> 
> 时间：2009-04-21T17:30:48.670
> 
> 标签：android, tabs, selector, drawable

我知道如何将图标放在每个选项卡上，这没问题。我也遇到过这个问题：[Stack Overflow thread on about about much same thing][1]

我关注了该问题中的一个链接，发现 [this][2]

几乎，它说使用 XML 中定义的选择器，当然，做到了。但是没有与它关联的 id，所以我不确定如何将选择器功能作为可绘制对象，以便我可以将其用作选项卡的图标。也许我正在以错误的方式解决这个问题。但这就是我所拥有的，显然缺少一些东西。

```
<selector
    android:id="@+id/myselector"
    xmlns:android="http://schemas.android.com/apk/res/android">
    <!-- Non focused states -->
    <item
        android:state_focused="false"
        android:state_selected="false"
        android:state_pressed="false"
        android:drawable="@drawable/darklogo" />
    <item
        android:state_focused="false"
        android:state_selected="true"
        android:state_pressed="false"
        android:drawable="@drawable/lightlogo" />

    <!-- Focused states -->
    <item
        android:state_focused="true"
        android:state_selected="false"
        android:state_pressed="false"
        android:drawable="@drawable/lightlogo" />
    <item
        android:state_focused="true"
        android:state_selected="true"
        android:state_pressed="false"
        android:drawable="@drawable/lightlogo" />

    <!-- Pressed -->
    <item
        android:state_pressed="true"
        android:drawable="@drawable/lightlogo" />
</selector> 
```

在我的代码中，使用以下命令生成示例选项卡：

```
 host.addTab(host.newTabSpec("three")  
                .setIndicator("map",drawables)  
                .setContent(new Intent(this, Map.class))); 
```

现在 drawable 只是对可绘制图像资源的引用。如何使选择器成为可绘制对象？

这是我的问题 [1]：[更新 Android 选项卡图标](https://stackoverflow.com/questions/36881/updating-android-tab-icons)[2]：[http ://groups.google.com/group/android-evelopers/browse_thread/thread/ef3bdebcb715b385](http://groups.google.com/group/android-evelopers/browse_thread/thread/ef3bdebcb715b385)

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-04-22T22:50:48.330

您在此处包含的 XML 是一种定义可绘制对象的方法，可让您嵌入 case 语句。它根据分配给它的视图的状态呈现不同的可绘制对象。作为可绘制对象，您应该将其保存为`res/drawable`项目文件夹中的 xml 文件（例如`tabselector.xml`）。

要将它用于 Tabhost，您需要像往常一样构造 TabActivity（如本[教程示例](http://developer.android.com/guide/tutorials/views/hello-tabwidget.html)所示）。

然后，当您将每个选项卡添加到主机时，您将`tabselector`可绘制对象指定为指示器，如下面的“TAB 1”所示。

```
Drawable mySelector = getResources().getDrawable(R.drawable.tabselector);

mTabHost.addTab(mTabHost.newTabSpec("tab_test1").setIndicator("TAB 1", mySelector).setContent(R.id.textview1));
mTabHost.addTab(mTabHost.newTabSpec("tab_test2").setIndicator("TAB 2").setContent(R.id.textview2)); 
```

注意：此时您*无法*更改图标后面的选项卡背景颜色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-01-20T12:44:30.700

您可以将视图用作指示器，这样您就可以按照自己的方式对其进行自定义。

```
mTabHost.addTab(mTabHost.newTabSpec("tab_test1").setIndicator(View MyView).setContent(R.id.textview1));
mTabHost.addTab(mTabHost.newTabSpec("tab_test2").setIndicator("TAB 2").setContent(R.id.textview2)); 
```

第一个选项卡将使用 View 作为其指示器，第二个选项卡将使用 CharSequence。看看实际的 TabSpec 类（**[http://developer.android.com/reference/android/widget/TabHost.TabSpec.html](http://developer.android.com/reference/android/widget/TabHost.TabSpec.html)**）。

# java - 可以使用 JAX-WS 让服务器在客户端上执行 Web 服务调用吗？

> ID：773698
> 
> 赞同：0
> 
> 时间：2009-04-21T17:32:03.033
> 
> 标签：java, web-services, web-applications, jax-ws, p2p

我正在玩**P2P**。
我想使用**JAX-WS**在 P2P 网络中进行通信。
一些对等点“在防火墙后面”，因此它们**无法侦听端口**。（他们充当客户）。
允许其他对等方侦听端口。（它们充当服务器（和客户端））。

现在我希望能够从事实中抽象出来，哪些对等点是服务器，哪些不是。因此，对等点必须能够相互执行 Web 服务命令，并且对服务器对等点和客户端对等点具有**相同的“能力” 。**

在“没有 Web 服务的世界”中，我会打开一个套接字，在打开套接字之后，服务器可以以与客户端与服务器对话相同的方式与客户端对话（**在两个方向上均等**，因为连接保持打开状态）。

但是 JAX-WS 是基于（无状态）**HTTP**的，没有“HTTP 连接”之类的东西。
**所以，服务器不能进行客户端调用，对吧？**

可以做些什么来克服这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T17:40:40.253

我可以建议您看看[JXTA](https://jxta.dev.java.net/)吗？这是一种用于构建对等系统的 Java 技术，将处理防火墙等后面的对等点。

显然，您可能*必须*使用 JAX-WS，但如果您不了解 JXTA，您应该看看它。我怀疑它会为你解决一些问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T17:46:38.303

在 Web 服务范例中，您有一个用于调用的“DIRECTION”，有一个客户端（请求发起者）和一个服务（请求服务者）......所以，如果你让两个实体（station1 和 station2）在同一时间 ws-客户端和ws-server，就可以解决这个问题。

防火墙后面的客户端的另一个选择是轮询 ws-server（客户端定期调用 ws 以查找新闻）

# java - Displaytag 库 - 检测分页请求

> ID：773700
> 
> 赞同：0
> 
> 时间：2009-04-21T17:32:18.353
> 
> 标签：java, jstl, portlet

我目前正在为 Liferay 开发一个 portlet（使用 Spring MVC 框架）。现在，我刚刚使用 displaytag 库在我在 portlet 上显示的列表上实现分页。

我现在的问题是，我需要检测当前请求是否已由 displaytag 库的分页控件启动。我发现在进行分页时，在 URL 中添加了一个参数，看起来像“d-4157739-p=2”，表示当前显示的页面。所以我可以做

```
int isPagingRequest = PortletRequestUtils.getIntParameter(request, "d-1332617-p", -1); 
```

..如果 isPagingRequest （我可以将其更改为布尔值）有一个值，则该请求已由 displaytag 分页发起。然而，这是非常糟糕的编码，所以我想避免它。此外，“d”和“p”之间的数字各不相同，这使得它很难被发现。

有人建议我如何检测当前请求是否是由寻呼引起的？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-22T00:39:26.750

Displaytag 提供了一个类“ParamEncoder”（我认为它在它的构造函数中）根据表的表名（id 或 uid 元素 - 必须设置为生成有效的校验和（d 和-(parameter))。检查一下。TableTagParameters 还包括参数所需的常量 - 因此结合这两者，您可以检索适当的变量键以从请求中检索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T21:03:06.133

一种选择是将您自己的参数添加到**requestURI**属性中的值。例如，您可以添加以下内容：

```
requestURI="mylistsource.action?ispage=true" 
```

到 table 标记，其中 mylistsource.action 是您首先生成列表的服务器操作。

然后，您可以在服务器上查找“ispage”参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-03-31T17:16:18.147

字符串参数 = 新的 ParamEncoder(tableId).encodeParameterName(TableTagParameters.PARAMETER_PAGE))。. 以上将解决您的问题，并总结了@MetroidFan2002 所说的内容。

# c# - 使用 String.ToUpperInvariant() 规范化字符串

> ID：773703
> 
> 赞同：12
> 
> 时间：2009-04-21T17:32:39.367
> 
> 标签：c#, asp.net, sql-server, asp.net-membership, code-analysis

我目前在我的 SQL Server 数据库中以小写形式存储规范化版本的字符串。例如，在我的 Users 表中，我有一个 UserName 和一个 LoweredUserName 字段。根据上下文，我使用 T-SQL 的 LOWER() 函数或 C# 的 String.ToLower() 方法来生成用户名的小写版本以填充 LoweredUserName 字段。根据[Microsoft 的指导方针](http://msdn.microsoft.com/en-us/library/ms973919.aspx)和[Visual Studio 的代码分析规则 CA1308](http://msdn.microsoft.com/en-us/library/bb386042.aspx)，我应该使用 C# 的 String.ToUpperInvariant() 而不是 ToLower()。根据微软的说法，这既是性能问题，也是全球化问题：转换为大写字母是安全的，而转换为小写字母会导致信息丢失（例如，[土耳其语的“I”问题](http://msdn.microsoft.com/en-us/library/system.string.toupperinvariant(VS.85).aspx)）。

如果我转而使用 ToUpperInvariant 进行字符串规范化，我也将不得不更改我的数据库架构，因为我的架构基于[Microsoft 的 ASP.NET Membership](http://msdn.microsoft.com/en-us/library/ms229862(VS.80).aspx)框架（请参阅[此相关问题](https://stackoverflow.com/questions/98908/what-is-the-point-of-the-lowered-columns-in-asp-net-membership-tables)），它将字符串规范化为小写。

微软告诉我们在 C# 中使用大写规范化，而它自己的 Membership 表和过程中的代码使用小写规范化，这不是自相矛盾吗？我应该将所有内容都切换为大写规范化，还是继续使用小写规范化？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-21T17:44:09.307

根据[CA1308](http://msdn.microsoft.com/en-us/library/bb386042.aspx)，这样做的原因是某些字符无法从大写转换为小写。重要的是你总是朝着一个方向移动，所以如果你的标准是总是移动到小写，那么没有理由改变它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-21T17:38:03.457

要回答你的第一个问题，是的，微软有点不一致。要回答您的第二个问题，在您确认这会导致您的应用程序出现瓶颈之前，不要切换任何东西。

想想你可以在你的项目上取得多大的进步，而不是浪费时间切换一切。您的开发时间比您从这种更改中获得的节省更有价值。

记住：

> 过早的优化是编程中万恶（或至少是大部分）的根源。——[唐纳德·克努斯](http://en.wikiquote.org/wiki/Donald_Knuth)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2009-04-21T17:44:14.783

继续使用小写规范化。只有在出现大问题时才进行更改以符合 Microsoft 标准。

这是不幸的，但值得。可悲的是，微软的“标准”往往没有得到很好的考虑，而且有些不一致。他们的经验表明，除非有令人信服的理由，否则最好在有效的同时坚持有效的方法。请注意，这通常不适用于非 Microsoft 技术；但微软“标准”的随意性使得它们值得回避。

编辑：我应该在这里澄清一下；从长期经验来看，我对微软的评价很低。他们的标准。正如评论中所指出的，我没有特别提到“除微软之外的其他所有人”。这只是来自我的个人经验。您的里程可能会有很大差异。这个答案应该被认为只是我的意见。很抱歉没有在前面说得更清楚。

# database - 哪个更重要？数据库设计或编码？

> ID：773715
> 
> 赞同：28
> 
> 时间：2009-04-21T17:34:36.977
> 
> 标签：database, database-design

哪个更重要：数据库的设计？还是应用程序代码的设计？

有很多关于可重用代码的信息（来自[dnrtv.com](http://dnrtv.com)、[CSLA.net](http://csla.net)的 Carl Franklin等），但我没有看到太多关于数据库设计及其对生命周期的影响的信息应用程序（特别是早期糟糕的设计决策如何影响应用程序的“生命”后期。

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2009-04-21T17:47:28.020

通常，数据库结构更重要，因为它提供了开发代码的结构框架。一般来说（和 YMMV 相当大），在完成一个开发阶段后重构您的数据库结构比简单地重构依赖于稳定数据库的代码要困难得多。原因很简单；重构您的数据库结构通常会强制更改代码；反过来很少是真的。

很简单，你的代码依赖于你的数据库，而不是你的数据库依赖于你的代码。（如果不是这种情况，您可能需要重新考虑您的设计。）

处理您的编辑；我认为很多关于此类问题的写作/博客往往来自事物的“编码”方面，这些类型的人倾向于认为数据库设计是微不足道的，并且没有编码有趣的解决方案那么有趣。本质上，对于喜欢解决“棘手问题”的人（往往是更多博客的人），编码方面比基本设计问题更有趣。虽然基本的设计问题并不“性感”，但它们非常重要（数据库设计是一个非常基本的设计问题）。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2009-04-21T17:38:36.140

简短的回答：两者都有。链条与最薄弱的环节一样坚固。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2009-04-21T17:38:22.660

如果你对其中任何一个不小心，你就注定要失败。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2009-04-21T19:03:01.320

**您的数据库设计是最重要的。**

我是一名程序员，我更喜欢代码，但是……如果你搞砸了数据库设计，你的代码将是一场噩梦。 **您的代码将没有机会！**

即使您尝试重构 DB 设计，您也需要围绕代码进行大量工作，以至于修复所有问题将不堪重负。

这不是一个偏好，甚至不是一个接近的偏好，它非常倾向于 DB 设计是最重要的。

编辑：即使您要拥有将所有内容都转储到其中的键值对表，这仍然是基于业务需求的数据库设计。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2009-04-22T01:01:07.137

解释 Knuth -

> 使用有效的数据结构更为重要。无论您的算法如何，糟糕的结构都会减慢您的应用程序，而良好的结构甚至可以消除对某些算法的需求。

我认为这同样适用于数据库。您最终将构建一个大规模链接的数据结构。如果你没有使用正确的方法，你的应用程序将会很慢，不管你投入了多少诡计。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2009-04-22T07:36:56.450

这样看

1.  更改代码意味着更改代码
2.  更改数据库可能也会迫使您更改代码

因此，尽早使数据库尽可能稳定很重要

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2009-04-21T18:01:38.813

之前使用过令人震惊的数据库设计，我必须把我的帽子放在数据库（或数据模型/ORM）设计环中。

与您的公司/客户了解问题领域的一些人一起，获取纸上所需的所有数据，按逻辑区域对其进行分组，然后您将开始形成一个数据模型，您可以将其转换为对象、数据库模式或 .xsd 等。每项数据都将具有名称、类型，可能是字符串的最大长度，或者是具有某些最小或最大容量的集合、列表或映射。

无论是在此之后首先设计数据库，还是 OO 模型都由您决定，但至少您努力在前面获得一个健全的分区模型。

事实上，在 MVC 设计中，我会将 OO 数据模型（Java/C# 中的类）归类为模型，并与数据库模式存在内在联系（当然还有添加的瞬态和实用方法）。您的控制器 - 您问题中的“编码” - 应该真正使用模型实现业务逻辑，该模型由您通过 DAO/ORM 从数据库中提取的对象表示。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2009-04-21T18:17:41.037

> 领域模型应该独立于持久性实现细节（尽管该技术确实对模型施加了一些限制）——[http://www.infoq.com/articles/ddd-in-practice](http://www.infoq.com/articles/ddd-in-practice)

您应该专注于域模型。[使用Hibernate](http://www.hibernate.org/) / [NHibernate](http://www.nhibernate.org/)等出色的 ORM 技术，数据库将只是一个实现细节。

如果您正在进行 .NET Web 开发，您应该阅读的书籍：

1.  [ASP.NET MVC 框架预览](http://www.apress.com/book/view/1430216468)（只有 100 页，将帮助您入门）
2.  [NHibernate 在行动](http://www.manning.com/kuate/)
3.  [实践中的领域驱动设计和开发](http://www.infoq.com/minibooks/domain-driven-design-quickly)（不读，但我会，而且它是免费的）
4.  [重构：改进现有代码的设计](https://rads.stackoverflow.com/amzn/click/com/0201485672)

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2009-04-21T18:04:12.583

根据我的经验（我已经参与修复数据库问题大约 30 年，并且处理过数百个不同的数据库），数据库性能方面的太多问题都来自不适当的重用代码尝试。函数比内联代码慢得多。游标重用一次插入一条记录的存储过程比基于集合的代码慢得多，远，远（光年）。重用一个返回你需要的过程和其他十个字段是浪费服务器和网络资源。当您只需要其中三个表的信息时，使用连接到十个表的现有视图会浪费服务器资源。数据库中的代码重用远不如在其他地方那么好。这并不是说如果需要，代码不应该被重用。只是它不应该优先于性能。不幸的是，数据库没有很好地设计用于重用代码。大多数数据库不是面向对象的，在设计或访问它们时的面向对象思维通常会导致设计不佳。

在您考虑代码重用之前，您需要拥有坚如磐石的规范化数据库设计。您需要考虑如何将数据提取和插入到数据库中。您需要考虑一旦有许多用户和记录，这将如何工作，因为此时重新设计基本数据库结构通常会变得过于昂贵和耗时。重构应用程序代码通常比基本数据库结构容易得多，而且数据库重构常常没有完成。如果您将表结构从非规范化表更改为父子结构，因为您发现当前结构不适合您的需求，那么您最终可能会更改针对该表的数百甚至数千个查询。这就是为什么在数据库设计上花费大量时间很重要的原因，由于时间/金钱的限制，您将没有机会在以后重新访问它。如果您将数据库视为房屋的基础，将应用程序代码视为结构，您就会明白为什么这是真的。改变上面有结构的地基比移动内墙要困难得多。数据库和访问它们的应用程序是相同的方式。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2009-04-21T18:31:06.043

两者都不重要，但是...

糟糕的数据库设计可能使编写好的程序变得不可能。此外，您通常可以重写错误的代码，但如果数据库中有大量数据，您只需要忍受在设计阶段做出的错误决定。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2009-04-21T17:40:30.627

我认为您不能以您描述的方式将两者分开。一个总是会影响另一个。例如，易于维护且性能良好的可靠数据库设计将意味着更少的代码更改。良好架构的代码和对用例的深刻理解将导致一个整洁且可维护的数据库模式。

为了我的钱，我会在可靠的业务层上花更多的钱，并建立我的数据库来支持它，但这是我的知识偏见。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2009-04-21T17:44:20.180

从某种意义上说，你不能将两者分开：数据库设计就是编码——它只是不是用程序语言编码。

但是，我曾使用过设计不良的程序软件的系统，并且我曾使用过设计不良的数据库模式（模式？）的系统。根据我的经验，由于升级和兼容性问题，修复模式要困难得多。我可以想象可能不是这种情况的系统。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2009-04-21T18:17:13.707

我可以看到我将逆流而上，但我非常倾向于软件是您问题的答案。

虽然您的软件可以适应弱模式，但如果您的软件出现故障，您的数据库将无法为您提供太多帮助。我有几个案例，我能够采用流行的前端应用程序并完全重建数据库而不会造成严重中断，因为用户没有直接看到数据库。（如果软件很垃圾，那就不是真的了。）

所以我想说首先要注意最接近用户的东西。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2009-04-22T04:22:38.040

我不会试图重复迄今为止所做的许多精彩评论。我也不会花任何时间来识别那些可疑的陈述。

但我会补充以下几点。

如果您像大多数人一样在您的问题中将 RDBMS 称为数据库。RDBMS 本质上是一个从属服务器。它侦听一个端口，并且有责任尝试为通过该端口的所有请求提供服务。它无法知道这些请求中的哪些是愚蠢的或不明智的。因此，最完美设计的数据库很容易被滥用到锁定服务器的程度。这意味着代码更重要。随处可见的 DBA 为响应应用程序开发人员在他们管理的服务器上扔的一些愚蠢的事情而大发雷霆。

因此，我可以就该主题给您的最佳建议是确保由设计数据库的同一开发人员编写的 API 访问数据库。让一个人（或一组向同一个人报告）负责确保为两者做出合理的设计决策。如果你是那个家伙，那么不要吝啬一个而牺牲另一个。设计您的 API，以便可以对 API 的客户端透明地完成 DB 的重构。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2009-04-21T17:38:47.543

取决于您对……和产品要求的了解程度。

忽视任何一方，您的产品可能会遇到麻烦。

也就是说，我倾向于遵循 DDD 编码风格，我首先定义除数据库之外的所有内容。这让我更好地了解需要存储哪些数据。

然后，一旦完成，我就可以创建并调整我的数据库以适应套件。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2009-04-21T17:40:13.967

两个都

糟糕的数据库设计会毁掉优秀的代码，糟糕的代码也会毁掉优秀的数据库设计。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2009-04-21T17:41:19.143

它们不是相互排斥的。两者都必须坚如磐石，才有机会获得坚如磐石的解决方案。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2009-04-21T17:56:48.077

我同意两者都很关键，但是您可以在视图、函数、存储过程级别使用大量技术来弥补相当可怕的底层架构错误。另一方面，如果您的编码很糟糕，当然无法修复它，那么您在设计层面也无能为力来修复它。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2009-04-21T17:59:58.287

如果您不确定自己在任一领域的技能，那么请尽可能将两者分开。最糟糕的情况是写出一团乱麻，以后不容易纠正或维护。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2009-04-21T18:10:58.917

这取决于什么对您的业务很重要。理想情况下，您也不应该做空，但如果必须，您还应该问自己这个问题：

> 您的应用程序是否在那里处理数据，或者数据是否超越了您的应用程序？

换句话说，如果你的应用程序的代码部分今天炸了，但你的数据还在，那会有多糟糕的灾难呢？如果你的回答是：

> 我总是可以编写代码来替换应用程序，但没有数据，我们注定要失败。

那么你最好确保你的数据是可靠的，因为它可能会比你今天编写的任何代码更长寿。这并不是说您不应该投入大量精力来编写可靠的代码库，而是代码最终是暂时的，而您的数据则不是。如果你遇到了糟糕的代码，你可以重写，但如果你有糟糕的数据，它可能会产生更广泛的影响。

另一方面，如果数据真的只是为了确保你的代码运行良好，而代码本身更重要（与上述情况相反），你应该确保你有一个好的代码库，并重新访问任何后期数据不足。

**编辑**

在大多数企业应用程序中，数据更为重要。我过去曾从事过转换项目，其中代码已经过时了，但是迁移被延迟了很长时间（有时是几十年），因为数据非常糟糕，以至于需要大量且非常自由的努力才能将数据转移到可以迁移的健康点。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2009-04-22T03:37:39.333

当然，两者都很重要，这是一种共生关系。

但是，如果您的数据库被劫持，再多的好代码也不能使您的应用程序大放异彩。

然而，如果你的数据库真的很好，那么好的代码可以让它变得更好（但糟糕的代码仍然会毁掉它）。

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2010-03-03T22:05:42.150

我们在 4 年内重写了 3 次网站。数据库没有改变。（嗯，一点）

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2009-04-21T17:39:58.430

如果您是 DBM，请进行设计。

如果您是程序员，请编码。

这些不是相互排斥的，都应该得到很好的执行。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2009-04-21T17:56:23.303

两者都只是实现的一部分，当然，您会花费大量的前期时间 - 需求和设计。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2009-04-21T18:52:37.473

也许，我在数据库设计方面不是很有经验，但我的感觉是：如果您的业务类设计得很好，那么您访问数据库的唯一点就是在您的存储库中（DDD 说话）。

因此，数据库中的更改只是存储库实现中的更改。糟糕的数据库设计将使您的存储库难以编码，执行速度也很慢，但不会影响您的业务层（90% 的代码）。

如果你试图因为你的 DAO 层而修改你的业务层，为什么不因为你的表现层而修改你的业务层呢？然后祝你好运，满足所有约束和良好做法！

我认为两者都很重要，但编码和数据库设计不应该在同一个人手中。对开发者来说更​​重要的是将自己与 db 设计者的工作隔离开来。（即使 db 设计者和开发者是同一个人，你也不应该同时考虑两件事）

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2009-04-21T19:08:23.973

这取决于你的观点。如果你是 DBA，那就是 db，如果你是开发人员，那就是代码。

我见过开发人员使用“bag”表完全滥用数据库，并且我见过 DBA 创建怪物应用程序代码，如果您了解数据库的结构，这很好，但不透明。

因此，两者都至关重要，如果您只在其中一个方面经验丰富，则应该让有经验的人来看看另一个方面或提高自己缺乏的技能。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2009-04-21T20:50:33.230

两者都很重要，但任何上游活动的糟糕设计通常更难以纠正。例如，对功能规范的更改自然会产生更多的工作，然后是界面上的一些冗长的更改。

对数据库进行任何有意义的更改通常也需要更改编码，因此我个人花费更多时间在数据库设计决策上，而不是编码决策上（尽管我确信我不是唯一一个花了一两个小时尝试的人找到一个类的完美名称）。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2009-04-22T01:15:58.693

数据库是对给定过程和系统建模的计算机程序的产物

理想情况下，它不应该有任何问题

当前的对象持久化技术还没有完全成熟，所以在未来一段时间内它可能会成为你的一些关注点

问题是：**那里的数据库是做什么用的？**

如果它可以将对象保留在您的流程和系统模型中，那么您不应该与它有太多关系

如果它可以修复模型中的孔，那么您将花费大量时间在它上面

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2009-04-22T03:55:24.597

恕我直言，良好的数据库设计比良好的编码更重要（良好的编码也很重要，但与数据库设计相比）。

1.  仅仅因为数据库将存储您的宝贵数据。
2.  糟糕的编码可能不会影响数据库，但会影响整个应用程序的可伸缩性、性能等。在一段时间内，这可以通过重构来解决（当然会涉及一些成本）。
3.  重构数据库更加昂贵和困难。
4.  同样通常我们在同一个数据库上运行多个不同的应用程序，因此这是一个共同因素。

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2009-04-22T06:50:55.080

当然，这取决于您喜欢什么，但未来是抽象出数据层——也就是说，将数据存储视为实现细节而不是应用程序的核心。

您会在某些圈子中听到“持久性无知”一词。目标是在不知道如何存储数据的情况下设计域模型（业务实体）。在幕后，它可能在 SQL、AmazonDB 或 XML 中。

如果你喜欢 DBA 的东西，那就是你应该去的地方。但是，如果您想更多地了解应用程序方面，请了解 ORM 框架。

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2009-04-22T13:38:55.100

这是推理数据与可执行代码根本不同的错误。元胞自动机理论充满了数据和代码非常“复杂”的例子。

但是，一旦选择了 BD，就不太容易修改，你应该考虑全局架构。但是，如果您不确定最后一个，您应该尽最大努力考虑最容易消耗的 BD 架构。

我的经验表明修改代码比 BD 更容易。

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2009-04-26T10:35:05.540

我不能说数据库设计比代码设计更重要，但至少是一样的。如果您编写了很棒的代码但您的数据库很糟糕，那么您的应用程序将出现性能问题，反之亦然。

数据库设计怎么样，有很多关于它的材料（包括书籍）。看[数据库规范化的题目](http://en.wikipedia.org/wiki/Database_normalization)

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2009-05-01T21:54:49.687

[“应用是临时的，但数据是永久的”](http://www.wilshireconferences.com/interviews/mullins.htm)

对我来说，数据库设计更重要，它是您要编写的应用程序的基础。

* * *

## 回答 #34

> 赞同：0
> 
> 时间：2009-05-01T22:02:48.093

准确和专业地做这件事很重要。为了避免未来的麻烦，现在就做好，因为当事情一成不变时，更改、修复或增强会更加困难。

* * *

## 回答 #35

> 赞同：0
> 
> 时间：2009-05-01T22:11:14.093

数据库的设计以及您的代码如何与该数据交互，将对您的性能和敏捷性产生巨大影响。

我不能说太多关于重要性，但是一旦你设置了你的数据库并且它充满了数百万行......改变它将会是棘手和耗时的。有点.. DBA 的罪过将在代码中进行补丁修复。

在敏捷（创建一个能够解决问题或回答您在设计时不知道的问题的可扩展数据库）和执行/扩展之间，您总是需要做出选择。同样，有时使用代码在实际 DB 之外创建缓存以创建一些性能可能会更好。

* * *

## 回答 #36

> 赞同：0
> 
> 时间：2010-01-08T17:42:36.383

领域理解是最重要的。你必须了解你想用你的应用程序做什么。从领域理解中，您需要了解您计划存储的信息种类以及信息单元之间的关系。您还需要了解用例。

在那之后，数据库设计是最重要的。数据库是对来自域分析的信息进行编码的最佳场所。获得所需数据后，应尽可能将数据标准化。然后，您必须了解每个字段的合法值范围并为每个字段编写数据验证程序（以检查约束、存储过程、正则表达式或其他任何有意义的形式）。

我经常发现，当您的数据高度规范化时，完成应用程序所需的代码量会显着下降，原因如下：

*   您不是在编写代码来执行搜索、排序、索引、连接和分组数据。SQL 为您做了很多这样的事情。
*   标准化数据不重复。这意味着每次更新都只在一个地方发生。如果您必须编写代码以使许多地方的数据保持同步，那么代码就会变得臃肿且容易出错。
*   您不必编写太多错误处理代码，因为其中很多都在您的数据验证代码中。
*   当您的代码量下降时，您需要更少的开发人员来维护代码。这意味着不同人拥有的模块不太可能偏离程序的整体意图。

代码仍然很重要，但现在你只需要少写很多。

# javascript - 请推荐一个处理可拖动元素碰撞检测的 JQuery 插件

> ID：773717
> 
> 赞同：15
> 
> 时间：2009-04-21T17:35:09.597
> 
> 标签：javascript, jquery, plugins, draggable, collision

我们正在使用[Draggable](http://jqueryui.com/demos/draggable/) JQuery UI 插件并且需要禁止我们的元素之间的重叠。我们可以自己编写一些碰撞检测，但更愿意使用经过测试的包。有什么建议么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2011-05-18T23:36:18.497

您可以尝试[jquery-collision](https://sourceforge.net/projects/jquerycollision/)加上[jquery-ui-draggable-collision](https://sourceforge.net/projects/jquidragcollide/)。完全披露：我刚刚在 sourceforge 上编写并发布了这些内容。

第一个允许这样做：

```
var hit_list = $("#collider").collision(".obstacle"); 
```

这是与“#collider”重叠的所有“.obstacle”的列表。

第二个允许：

```
$("#collider").draggable( { obstacle: ".obstacle" } ); 
```

这给了你（除其他外）一个“碰撞”事件来绑定：

```
$("#collider").bind( "collision", function(event,ui){...} ); 
```

你甚至可以设置：

```
$("#collider").draggable( { obstacle: ".obstacle", preventCollision: true } ); 
```

以防止“#collider”在拖动时与任何“.obstacle”重叠。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-21T18:21:14.180

快速搜索 jQuery 插件出现：

[可碰撞的 Draggables](http://plugins.jquery.com/project/collidable)

看起来还早，但可能值得一试。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-01-07T13:57:15.627

我知道这个问题已经很老了，但也许你会发现这个问题很有用：我们的[Collision Check Plugin for jQuery](http://www.48design.de/news/2009/11/20/kollisionsabfrage-per-jquery-plugin-update-v11-8/ "jQuery 碰撞检查插件")。

描述是德文的，但应该是不言自明的。您可以使用两个单个元素甚至是一组元素，并将返回一组所有碰撞的元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-21T18:18:23.487

谷歌告诉我gameQuery，一个JQuery插件，有一个“碰撞”功能：

[http://gamequery.onaluf.org/#manual](http://gamequery.onaluf.org/#manual)

在上面的页面中搜索“碰撞”一词。

这个谷歌搜索可以给你几个其他的选择：

[http://www.google.com/search?q=jquery+collision+detection](http://www.google.com/search?q=jquery+collision+detection)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-07-14T20:00:49.360

假设，但我认为您需要的可以在这里找到：

[$.event.special.drop](http://blog.threedubmedia.com/2008/08/eventspecialdrop.html)

它使用 jQuery 著名的 $.event.special.drag 来创建 de drop 事件。您可以将自己的 JavaScript 代码 `.bind( "drop", function( event ){` 放在此函数内的 this 元素下，表示具有您定义的类“drop”的对象，并且 event.dragTarget 是被拖动的对象。

上面链接的站点上的更多文档。无论如何，这正是我所需要的。

# c# - 如何在我的项目中隐藏 gif 或 mp3 文件？

> ID：773718
> 
> 赞同：4
> 
> 时间：2009-04-21T17:36:34.617
> 
> 标签：c#

我有一个带有一些 gif 和 mp3 文件的 C# 项目

我如何在我的项目中组合这些文件？

（我不希望它们对用户可见）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-21T17:41:56.177

您需要将它们作为资源包含在项目中，然后稍后通过读取 DLL 来访问它们。

对于 gif 文件，您可以简单地将它们放在资源上（在项目-> 属性对话框中），然后通过

```
var img = Properties.Resources.GifName; 
```

对于 mp3 文件，您可能需要使用嵌入式资源，然后将它们作为流读出。为此，请将项目拖到项目中专门用于这些类型文件的文件夹中。右键单击资源管理器中的文件并显示属性窗格，并将“构建操作”设置为“嵌入式资源”。

然后，您可以使用类似这样的代码（来自 vb 的未经测试的翻译，抱歉），将内容作为流返回。将流转换为播放器可以处理的内容取决于您。

```
using System.Linq; // from System.Core.  otherwise just translate linq to for-each
using System.IO;

public Stream GetStream(string fileName) {
    // assume we want a resource from the same that called us
    var ass = Assembly.GetCallingAssembly();
    var fullName = GetResourceName(fileName, ass);
    //  ^^ should = MyCorp.FunnyApplication.Mp3Files.<filename>, or similar
    return ass.GetManifestResourceStream(fullName);
}

// looks up a fully qualified resource name from just the file name.  this is
// so you don't have to worry about any namespace issues/folder depth, etc.
public static string GetResourceName(string fileName, Assembly ass) {
    var names = ass.GetManifestResourceNames().Where(n => n.EndsWith(fileName)).ToArray();
    if (names.Count() > 1) throw new Exception("Multiple matches found.");
    return names[0];
}    

var mp3Stream = GetStream("startup-sound.mp3");

var mp3 = new MyMp3Class(mp3stream);  // some player-related class that uses the stream 
```

这里有一些链接可以帮助您入门

*   [微软指南](http://support.microsoft.com/kb/319292)
*   [从 DLL 中读取资源](http://www.csharper.net/blog/getting_an_embedded_resource_file_out_of_an_assembly.aspx)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-21T17:40:02.533

将它们添加为嵌入式资源，它们将被编译到 dll 中。

首先将它们添加到项目中，只需将它们拖到解决方案资源管理器中，然后转到它们的属性以将它们的构建操作更改为嵌入式资源。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-21T17:39:24.560

将它们包含在资源文件 (resx) 中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-21T17:39:58.273

您应该将它们分配为资源。如果您在 VS 中打开“属性”面板，请确保您的构建操作设置为资源，并将复制到输出目录设置为不复制。您还可以在资源选项卡的项目属性中管理资源。

# xcode - 我在哪里可以获得 XCode 的 10.6 SDK

> ID：773730
> 
> 赞同：6
> 
> 时间：2009-04-21T17:38:36.013
> 
> 标签：xcode, macos

我在哪里可以获得 XCode 的 10.6 SDK？我有 Snow Leopard 的测试版，我从 DVD 上安装了 XCode，但它只安装了 10.5 和 10.4 SDK。我需要针对 10.6 构建以验证 Apple 的错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-21T17:50:57.170

[ADC 会员网站](https://connect.apple.com)。登录并选择下载。如果您是 Premier 或 Select 会员，那么您应该可以找到它。

如果您不是 Premier 或 Select 会员，您将看不到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T17:43:16.410

你试过[ADC](http://developer.apple.com/)吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-22T04:46:12.540

请注意，在您下载它之前，您将点击一个保密协议，该协议规定您不能在公共论坛上讨论它，比如，好吧，在这里......

# java - jQuery 将两次 servlet 名称添加到 URL

> ID：773736
> 
> 赞同：0
> 
> 时间：2009-04-21T17:39:32.970
> 
> 标签：java, jquery, ajax, servlets

我正在尝试在[http://www.ajaxprojects.com/ajax/tutorialdetails.php?itemid=438上完成教程](http://www.ajaxprojects.com/ajax/tutorialdetails.php?itemid=438)

似乎 servlet 正在尝试将数据发布到[http://localhost:8080/WeatherServlet/WeatherServlet](http://localhost:8080/WeatherServlet/WeatherServlet) ...（WeatherServlet 是 servlet 的名称 - 呃）。

我有以下 index.jsp 页面（显示正常）

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
<script type="text/javascript" src="jquery.js"></script> 
<script type="text/javascript">
   $(document).ready(function() {
          $("#getWeatherReport").click(function(){
            $cityName = document.getElementById("cityName").value;
            $.post("WeatherServlet", {cityName:$cityName}, function(xml) {
           $("#weatherReport").html(
             $("report", xml).text()
           );         
            });
        });

    });
</script>
</head>
<body>
<form name="form1" type="get" method="post">
Enter City :
    <input type="text" name="cityName" id="cityName" size="30" />
    <input type="button" name="getWeatherReport" id="getWeatherReport"
    value="Get Weather" />
</form>
<div id="weatherReport" class="outputTextArea">
</div>
</body>
</html> 
```

* * *

以下 WeatherReport.java 页面

```
package org.ajax.tutorial;

import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
* Servlet implementation class WeatherReport
*/
public class WeatherReport extends HttpServlet {
    private static final long serialVersionUID = 1L;

/**
 * @see HttpServlet#HttpServlet()
 */
public WeatherReport() {
    super();
    // TODO Auto-generated constructor stub
}

/**
 * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse
 *      response)
 */
protected void doGet(HttpServletRequest request,
        HttpServletResponse response) throws ServletException, IOException {
    // TODO Auto-generated method stub
}

/**
 * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse
 *      response)
 */
public void doPost(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {

    String city = request.getParameter("cityName");
    String report = getWeather(city);
    response.setContentType("text/xml");
    PrintWriter out = response.getWriter();
    out.println("<weather><report>" + report + "</report></weather>");
    out.flush();
    out.close();
}

private String getWeather(String city) {
    String report;

    if (city.toLowerCase().equals("trivandrum"))
        report = "Currently it is not raining in Trivandrum. Average temperature is 20";
    else if (city.toLowerCase().equals("chennai"))
        report = "It’s a rainy season in Chennai now. Better get a umbrella before going out.";
    else if (city.toLowerCase().equals("bangalore"))
        report = "It’s mostly cloudy in Bangalore. Good weather for a cricket match.";
    else
        report = "The City you have entered is not present in our system. May be it has been destroyed "
                + "in last World War or not yet built by the mankind";
    return report;
}

} 
```

* * *

以下 web.xml 页面

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.4"
     xmlns="http://java.sun.com/xml/ns/j2ee"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee 
     http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd" >
 <servlet>
    <description>Weather Data provider</description>
    <display-name>Weather Data provider</display-name>
    <servlet-name>WeatherServlet</servlet-name>
<servlet-class>ajaxify.WeatherServlet</servlet-class>
  </servlet>

  <servlet-mapping>
    <servlet-name>WeatherServlet</servlet-name>
    <url-pattern>/WeatherServlet</url-pattern>
  </servlet-mapping>

</web-app> 
```

* * *

我正在创建一个 WAR 存档并使用 Eclipse 的内置工具进行部署（不是 ant - 无论如何都怀疑这很重要）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-21T17:45:58.663

您在 jQuery 中发布到“WeatherServlet”，这是一个相对 URL - 原始 URL 是[http://server.com/WeatherServlet/index.jsp](http://server.com/WeatherServlet/index.jsp)，所以难怪它构建的 URL 是[http:/ /server.com/WeatherServlet/WeatherServlet](http://server.com/WeatherServlet/WeatherServlet)

改变

```
$.post("WeatherServlet", {cityName:$cityName}, function(xml) { 
```

到

```
$.post("index.jsp", {cityName:$cityName}, function(xml) { 
```

或您希望将其发布到的任何 jsp。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-21T17:45:23.457

我认为问题在于您正在访问该页面

```
http://localhost:8080/WeatherServelet/ 
```

然后你发一个帖子到： $.post("WeatherServlet", ...

这是一个相对路径，所以你最终发布到

```
http://localhost:8080/WeatherServelet/WeatherServelet 
```

您应该尝试发布到绝对路径：

```
$.post("/WeatherServlet", ... 
```

# css - 如何根据里面的文本按比例调整 div 的大小？

> ID：773747
> 
> 赞同：2
> 
> 时间：2009-04-21T17:41:00.440
> 
> 标签：css, fonts, font-size

假设我们有一个**div**元素，其中包含零填充、绝对定位、预定义宽度（以像素为单位）和一些纯文本。

现在，我们将文本的 CSS font-size 属性增加一个像素。我应该通过什么措施增加**div**的宽度以使其布局保持不变（即，由于宽度不成比例地增加，没有单词从一行跳到另一行）？

如果无法以像素为单位设置 CSS 字体大小，则应将其设置为*pt*或*em*，为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-21T19:44:40.127

您想同时指定 div 的宽度和 ems 中的字体大小。这是一个示例，其中以像素为单位更改字体大小会导致 div 和文本按比例调整大小而不会更改布局：

```
<html>
  <head>
    <title>Proportional Resize Example</title>
    <style>
      body {font-size:10px}
      div {
        position:absolute;
        top:100px;
        left:100px;
        width:20em;
        font-size:2em;
        padding:0;
        background:green}
    </style>
  <head>
<body>
  <div>
    This text will resize proportionally.
    This text will resize proportionally.
    This text will resize proportionally.
  </div>
</body>
</html> 
```

在此示例中，如果您更改 body 元素的字体大小，所有内容都会按比例调整大小。这是因为我们用来在 div 中指定大小的 em 是相对于 body 元素中的字体大小测量的。增加 body 元素的字体大小会使 div 中的 em 在宽度和字体大小方面都变大。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T17:54:01.110

我从未见过在 CSS 中甚至在基于 Web 的应用程序中完成过这样的事情。也就是说，第二个问题的答案是 em ，这对字体 em 或 pt*更好*。为什么？因为 em 用于测量字体大小，并且在设计上是成比例的：1em 是正文字体大小的 100%。1.1em 是 110%，0.8em 是 80%，以此类推。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T17:45:32.300

[Scriptaculous](http://wiki.github.com/madrobby/scriptaculous/effect-scale)将其作为内置效果。试试看。

```
new Effect.Scale('id_of_element', percent, [options]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-21T17:56:56.203

正如 CLaRGe 所说，em 是基于父元素字体大小的度量，因此当您希望元素的大小与字体大小成正比时，使用它是自然的选择。如果您以像素为单位测量字体大小，则 em 是以像素为单位的字体大小，例如，当您的字体大小为 10px 时，200px 表示 20em。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-21T18:15:18.360

CSS 本身是一个相当静态的东西，div 也是如此。

您不能使一个元素的属性依赖于其他元素的属性。即使对于单个元素，您也无法将其某些属性与其他属性同步。

显示自动调整的某些特征的唯一内置解决方案是 HTML 表格，但您可能不希望使用它。

添加这种动态的唯一方法是使用脚本语言，如 JavaScript。

# database - 基于产品的会计软件包使用什么样的数据库？

> ID：773759
> 
> 赞同：0
> 
> 时间：2009-04-21T17:45:03.270
> 
> 标签：database, product, accounting

基于产品的会计软件包（例如澳大利亚的 MYOB 和印度的 Tally & Wings）使用什么样的数据库？他们似乎不使用 SQL SERVER 或 Oracle。他们的存储文件似乎完全不同。在不使用任何第三方数据库包的情况下......我很惊讶他们如何通过添加功能来快速增长。

像那些基于产品的软件一样拥有自己的数据库的方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-09T12:41:09.627

MYOB 的 SME 选项[Exo Business](http://myob.com.au/exonet)从 MS SQL Server 运行。由于数据的开放性，我们在此基础上进行了大量定制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T17:48:58.923

我对你提到的数据库不熟悉，但是很多桌面软件包都使用 sqlite。它非常快速和小巧，并且具有相当多的功能。它还被其他几种语言和框架使用，例如 Adob​​e AIR 和 google gears。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T17:52:43.080

大多数大公司都使用ERP解决方案，例如microsoft dynamics、sap、peopple soft。

不管 ERP 解决方案如何，数据库总是需要维护，对于 MDM、索引和性能的东西。

他们还将数据归档到数据中心。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T03:01:18.930

关于 MYOB 的一些发现可能会对您有所帮助：

[forums.whirlpool.net.au/forum-replies-archive.cfm/1020841.html](http://forums.whirlpool.net.au/forum-replies-archive.cfm/1020841.html)

> “我的业务伙伴花了一些时间研究这个问题，并解码了 MYOB 文件结构的一部分（我想他说这是一种基于 c-tree 的格式或其他东西）并且 - 尽管 ODBC 驱动程序很糟糕 - 我们仍然解决了与其开发我们自己的解决方案，不如使用它；目前通过 C# 中的 .NET 进行导入和导出。”

# c# - C# .NET 2.0 应用程序中的 ActiveX Flash 组件导致内存泄漏？

> ID：773768
> 
> 赞同：0
> 
> 时间：2009-04-21T17:47:12.467
> 
> 标签：c#, .net, flash, com, activex

我们有一个带有 ActiveX ShockwaveFlashObject 控件的 C#/.NET 2.0 WinForm。程序循环显示内容时间表，并在控件上一遍又一遍地全屏显示，如下所示：

```
axFlash.BringToFront();
axFlash.Movie = scheduleItem.FilePath;
axFlash.Show();
axFlash.Play(); 
```

这很好用，但运行几天后，Flash ActiveX 控件所在的窗体将抛出如下异常：

```
System.Runtime.InteropServices.SEHException: External component has thrown an exception.
at System.Windows.Forms.UnsafeNativeMethods.CallWindowProc(IntPtr wndProc, IntPtr hWnd, Int32 msg, IntPtr wParam, IntPtr lParam)
at System.Windows.Forms.NativeWindow.DefWndProc(Message& m)
at System.Windows.Forms.Control.DefWndProc(Message& m)
at System.Windows.Forms.Control.WndProc(Message& m)
at System.Windows.Forms.AxHost.WndProc(Message& m)
at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam) 
```

查看任务管理器，我看到我们的程序已经分配了机器上几乎所有的可用内存。(~500MB)

*   ActiveX (COM) 组件是否不受垃圾收集管理？
*   Flash9.ocx 或 Flash10.ocx 中是否存在已知的内存泄漏？
*   有什么想法可以让外部组件（在这种情况下为 Flash ActiveX）在不重新启动程序的情况下释放资源吗？可以定期重新创建 ShockwaveFlashObject 用“新”修复东西吗？
*   也许定期重新启动程序是唯一的好选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T18:03:17.030

ActiveX 组件通常是用非托管代码编写的，因此不会被 CLR 垃圾收集器清理。您需要确保释放对 ActiveX 控件的任何引用。我认为这只会产生一个问题，但如果您要重新创建 ActiveX 控件很多。

您可以使用 perfmon 来测量 CLR 的内存使用情况和总体内存使用情况。您可以使用它来缩小泄漏内存的范围。（差异是由于非托管代码，如 activex 控件）

如果您确实将其隔离到 ActiveX 或 flash 控件，请尝试使用不消耗内存的假对象来存根这些对象。这应该让您验证它是泄漏的来源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T17:52:47.370

如果您的 C# 应用程序中的代码过于简单，我建议您只在 AIR 中编写它。这样您就不会处理 ActiveX 和 Flash 的 OCX 可能存在的任何错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T18:04:23.673

只有托管代码被垃圾收集。ActiveX 代码使用标准的 COM 样式集合 (AddRef/ReleaseRef)。使用 com 引用完成后，将其设置为 null 以确保安全，或将 using() 包裹在其周围。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-03-14T15:30:53.970

这可能有点晚了，但这是我的 5 美分：

我认为.swf（您正在播放的闪存）导致内存泄漏，我前段时间遇到过闪存问题，解决方案是仔细检查代码并正确停止/清除所有计时器，处理所有使用过的对象等等达到内存限制并崩溃。（无论您在哪里拥有闪存、在浏览器中、独立、在活动中等，都会发生崩溃）。

如果您是 .swf 的创建者，您可以多加注意，您不必重新启动程序，但如果您从其他来源获取它，则必须定期关闭它，因为您不知道里面的编码如何。

# visual-studio-2005 - Visual Studio 2005 构建顺序

> ID：773778
> 
> 赞同：1
> 
> 时间：2009-04-21T17:49:08.750
> 
> 标签：visual-studio-2005

我有一个网络应用程序。

有时我想调试解决方案中的控制台应用程序。

为什么当我右键单击它并选择调试时，它会构建每个网页和库，这需要一段时间。

当我查看控制台应用程序的构建依赖项时，它会将解决方案中的所有内容按顺序列出，并告诉我去构建顺序来更改它。

在构建顺序中，一切都检查出来了……我只检查了这个控制台应用程序需要的库。

我还尝试将此控制台应用程序设置为启动项目。一样...

我如何得到它，所以当我想调试这个控制台应用程序时，它只构建并运行，而不是在运行之前构建整个解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-21T17:53:05.793

确保所有其他项目中的依赖项也设置正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T18:14:07.503

我会检查一些事情：

1.  确保您没有不必要的项目引用。这将导致它们被列为依赖项并每次都被构建。

2.  还要检查您的控制台应用程序是否未列为对解决方案中其他项目的项目引用。

3.  在项目引用中关闭本地复制。当它必须将这些文件复制到所有 bin 文件夹时，它需要时间。

# actionscript - 什么可能导致 Flash 视频播放器中的显示损坏？

> ID：773784
> 
> 赞同：1
> 
> 时间：2009-04-21T17:50:48.607
> 
> 标签：actionscript, video, flash

我们在 Flash 视频播放器中看到了一些非常严重的显示损坏。这是一个例子：

[![显示损坏的示例屏幕截图](https://i.stack.imgur.com/aCHYr.png)](https://i.stack.imgur.com/aCHYr.png)
[（来源：[scottyallen.com](http://scottyallen.com/images/other_site_posts/corruption.png)）]

我们使用 fl.video.VideoPlayer 来显示我们的视频，当我们在不同的 VideoPlayer 实例之间切换时，似乎这个 bug 最常出现，特别是当 VideoPlayer 上方有其他东西正在积极重绘时。在我看来，可能是一个未初始化的视频缓冲区在不应该被绘制时被绘制。

有没有人见过这样的事情？关于如何进一步追踪正在发生的事情的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T19:26:12.480

我唯一一次在 Flash 中看到类似的故障是当我一直在进行大量的 alpha 叠加或将亮度过滤器推到 100% 以上时。

# asp.net - CSS 问题 - ASP.NET 日历选择器

> ID：773791
> 
> 赞同：2
> 
> 时间：2009-04-21T17:52:46.683
> 
> 标签：asp.net, css, ajaxcontroltoolkit, dynamic-data

**编辑**
通过以下答案之一，我能够更正此问题以在表格中进行渲染。我仍然在我的 ListViews 中看到这个问题。我已经为 ListView 尝试了这个 CSS，但它没有纠正这个问题。

```
/* FIX FOR CALENDAR IN TABLE */
.DateTime_Edit
{
    white-space: nowrap;
}
.DateTime_Edit table
{
    border: solid 0 #FFFFFF;
    width: 0;
    height: 0;
    padding: 0;
    margin: 0;
}
.DateTime_Edit table tr td
{
    border: solid 0 #FFFFFF;
    padding: 0;
    margin: 0;
}
/* LISTVIEW, NOT WORKING */    
.DateTime_Edit table.listview
    {
        border: solid 0 #FFFFFF;
        width: 0;
        height: 0;
        padding: 0;
        margin: 0;  
    }
    .DateTime table.listview tr td
    {
        border: solid 0 #FFFFFF;
        padding: 0;
        margin: 0;  
    } 
```

* * *

**在列表视图中**
[替代文本 http://www.imageunload.com/public/15867/CSSIssue2.png?no_history](http://www.imageunload.com/public/15867/CSSIssue2.png?no_history) **在表格**
[替代文本中 http://www.imageunload.com/public/15852/CSSIssue.jpg?no_history](http://www.imageunload.com/public/15852/CSSIssue.jpg?no_history)

* * *

字段模板定义：

```
<%@ Control Language="C#" CodeBehind="DateAjaxCalendar_Edit.ascx.cs" Inherits="WarehouseLogging.DateAjaxCalendar_EditField" %>
<div class="DateTime_Edit">
<asp:TextBox ID="TextBox1" runat="server" Text='<%# FieldValueEditString %>' CssClass="droplist"></asp:TextBox>
<asp:Image runat="Server" CssClass="CalendarIcon" ID="imgCalendar1" ImageUrl="~/Images/calendar.gif" />
<ajaxToolkit:CalendarExtender ID="CalendarExtender1" runat="server" PopupButtonID="imgCalendar1"
    TargetControlID="TextBox1" CssClass="custcal1">
</ajaxToolkit:CalendarExtender>
<ajaxToolkit:FilteredTextBoxExtender ID="fltrTextBox1" runat="server" TargetControlID="TextBox1"
    FilterType="Custom, Numbers" ValidChars="/">
</ajaxToolkit:FilteredTextBoxExtender>
<asp:RequiredFieldValidator runat="server" ID="RequiredFieldValidator1" CssClass="droplist"
    ControlToValidate="TextBox1" Display="Dynamic" Enabled="false" />
<asp:DynamicValidator runat="server" ID="DynamicValidator1" CssClass="droplist" ControlToValidate="TextBox1"
    Display="Dynamic" />
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T19:00:19.407

另一种解决方案是用另一种命名样式覆盖这些样式。新样式需要出现在 .css 文件本身中的上述表格样式之后。（css 的优先顺序是它出现在 .css 文件中的位置...）为该控件设置特定样式会阻止其他样式将来执行相同的操作。

我编写了这种样式，将其放在 Site.css 文件的末尾，并将我的整个“DateTime_Edit”FieldTemplate Contorl 包裹在其中：

```
.DateTime_Edit
{
    white-space: nowrap !important;
}
.DateTime_Edit table
{
    border: solid 0 #FFFFFF !important;
    width: 0 !important;
    height: 0 !important;
    padding: 0 !important;
    margin: 0 !important;
}
.DateTime_Edit table tr td
{
    border: solid 0 #FFFFFF !important;
    background-color: #FFFFFF !important;
    padding: 0 !important;
    margin: 0 !important;
} 
```

编辑：为“td”添加了背景颜色。添加 !important 到所有内容（可能不需要）

希望默认的 Site.css 文件将在后续版本中更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T17:56:27.813

**编辑 2**

我会说这些人是罪魁祸首

```
body.template table.listview th, table.gridview th, table.detailstable th, body.template table.listview td, table.gridview td, table.detailstable td
{
}

body.template table.listview td, table.gridview td, table.detailstable td
{
} 
```

它们指定了一种样式，将应用于`<td>`表下方的所有类名称为 listview、detailstable 和 gridview。问题是它们也会被子表继承

您可以尝试创建第二组这些样式，但将它们从

```
table.listview td 
```

到

```
table.listview td table td 
```

并取消设置已应用的任何样式。这将覆盖由日历扩展器创建的嵌套表中的样式

**编辑**

好的，如果没有看到 DynamicDataSite 表的整个 StyleSheet 就很难判断，但请查看该表的 CSS 是否是使用指定的

```
Table
{
   //...
}
TD
{
   //...
} 
```

或使用特定的 .classnames 或 #Ids

如果是前者，您需要做一些 CSS 体操来覆盖嵌套表的样式，以撤消应用于主表的样式。例如

```
//Top Level Tables
table td
{
    color: Red;
}

//Nested Tables
table td table td
{
    color: Blue
} 
```

**原来的**

尝试将`CalendarExtender`包含它的目标控件的表放在外面。从外观`<td>`上看，选择器中的 's 继承了父表 CSS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T21:39:07.963

通过查看这篇文章，您可能会获得有关如何解决问题的线索：[嵌套元素上的 CSS 和覆盖样式](https://stackoverflow.com/questions/773933/css-overriding-styles-on-nested-elements/774016)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-22T08:29:19.850

此问题的修复程序位于[此处的 DD 预览项目](http://aspnet.codeplex.com/Release/ProjectReleases.aspx?ReleaseId=24887)中，名为**AjaxToolkitFixes.css**，位于网站的根目录中。

只需复制到站点的根目录并在 Site.Master 文件中添加引用即可。

# c# - 在 MsBuild 中禁用生成 PDB 文件

> ID：773796
> 
> 赞同：83
> 
> 时间：2009-04-21T17:54:08.253
> 
> 标签：c#, debugging, build, msbuild

我希望从我的构建中提高一些速度，并且想知道我是否可以指示 msbuild 不生成 PDB 文件。我没有运气通过`Configuration=Release`and`DebugSymbols=false`属性。

* * *

## 回答 #1

> 赞同：136
> 
> 时间：2009-04-21T18:04:20.057

您的发布配置中可能会生成 PDB。将此添加到您的发布设置中：

```
<DebugSymbols>false</DebugSymbols>
<DebugType>None</DebugType> 
```

您也可以在 Visual Studio 中的项目配置中执行此操作。[禁用 PDB 生成](http://gchandra.wordpress.com/2008/02/22/disable-pdp-file-generation-in-release-mode/)

此外，如果从命令行运行 MSBuild，命令行参数将是

```
MSBuild.exe YourProject.csproj /p:DebugSymbols=false /p:DebugType=None 
```

# python - 在 python 中更新 tkinter 标签

> ID：773797
> 
> 赞同：2
> 
> 时间：2009-04-21T17:54:18.287
> 
> 标签：python, tkinter

我正在通过将服务器的根实例传递给 Tkinter 窗口来为 python 服务器提供一个带有 tkinter 的 GUI。问题在于保持标签中的信息是最新的。

例如，服务器有一个用户列表，其中包含已登录的用户。对初始列表执行此操作很简单：

```
string = ""
for user in self.server.Users:
  string += user + "\n"

Label(master, text=string) 
```

但这只会做一次。在那之后，我应该如何更新列表？我可以添加一个“更新用户”按钮，但我需要自动更新列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-21T18:06:49.567

您可以在服务器实例上使用回调。安装一个回调，在用户列表更改时更新标签。

如果您无法更改服务器代码，则需要每隔几秒轮询一次列表以获取更新。您可以使用 Tkinter 事件系统来跟踪更新。

```
def user_updater(self):
    self.user_updater_id = self.user_label.after(1000, self.user_updater)
    lines = []
    for user in self.server.Users:
        lines.append(user)
    self.user_label["text"] = "\n".join(lines)

def stop_user_updater(self):
    self.user_label.after_cancel(self.user_updater_id) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-26T07:35:22.323

`Label`您可以通过设置其对应对象的文本来更改 a的文本`StringVar`，例如：

```
from tkinter import *

root = Tk()
string = StringVar()
lab = Label(root, textvariable=string)
lab.pack()
string.set('Changing the text displayed in the Label')
root.mainloop() 
```

请注意使用该`set`函数更改 Label 的显示文本`lab`。

有关更多信息，请参阅有关此[主题](http://infohost.nmt.edu/tcc/help/pubs/tkinter/control-variables.html)`New Mexico Tech`的Tkinter 参考。

# asp.net-mvc - ASP.NET-MVC 中的控制器路径

> ID：773798
> 
> 赞同：2
> 
> 时间：2009-04-21T17:55:46.473
> 
> 标签：asp.net-mvc, path, controller

如何获取控制器的路径？例如，我可以像这样获取 HtmlHelper 的路径：

```
 private static string GetVirtualPath(HtmlHelper htmlhelper)
    {
        string virtualPath = null;
        TemplateControl tc = htmlhelper.ViewDataContainer as TemplateControl;

        if (tc != null)
        {
            virtualPath = tc.AppRelativeVirtualPath;
        }

        return virtualPath;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-21T19:04:21.660

编辑：以下将给出带有控制器的程序集的路径以及带有控制器动作的类的类型名称。也许这些的组合会给你你所追求的，亚伦？

```
string assemblyPath = Assembly.GetExecutingAssembly().CodeBase;
string typeName = this.GetType().FullName; 
```

例如，它们会产生类似的东西

```
file:///C:/Projects/TestApp/TestApp.UI/bin/TestApp.UI.DLL
TestApp.UI.Controllers.TestController 
```

假设您以“标准”ASP.NET MVC 方式放置和命名控制器，则上述某种组合可能会为您提供 C# 文件的正确完整路径：

```
C:/Projects/TestApp/TestApp.UI/Controllers/TestController.cs 
```

或相对路径：

```
Controllers/TestController.cs 
```

* * *

以下将给出控制器动作的路线：

```
1) string path = Request.Url.AbsolutePath

2) string appPath = Request.ApplicationPath;
   string absPath = Request.Url.AbsolutePath;
   string path = appPath.Length <= 1 ? 
       absPath : absPath.Replace(appPath, ""); 
```

请求 TestController 的 Index 操作的示例（[http://localhost:50027/Test/Index](http://localhost:50027/Test/Index)）：以上返回

```
1) /Test/Index
2) /Test/Index 
```

对于基本 url 为[http://localhost:50027/blog](http://localhost:50027/blog)的网站，例如请求 TestController 的 Index 操作 ( [http://localhost:50027/blog/Test/Index](http://localhost:50027/blog/Test/Index) )：以上返回

```
1) /blog/Test/Index
2) /Test/Index 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T18:59:20.517

您在那里的方法将返回视图的相对 aspx 文件名 - 这不是 HtmlHelper 的真正位置。

当你说你想要一个控制器的路径时，你实际上是什么意思？您的 Controller 是在某处的程序集中编译的类。是否要获取 Controller 的源 .cs 文件的位置？还是有什么不同？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-23T03:47:43.920

Aaron，听起来你在写一个 quine，呵呵，但我想这是为了一些单元测试脚手架之类的？也许您真的想为您正在做的一些事情使用构建脚本？您可以在项目的属性页面中放置一些命令，以便在构建时在您的控制器目录上执行一些进程？对不起，如果这根本不是你想要做的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-21T19:15:39.120

您可以像这样获取控制器的名称

```
Url.RequestContext.RouteData.Values["controller"] 
```

获取控制器名称后，您可以使用该方法解析路径

```
ResolveClientUrl("~/<ControllerName>") 
```

# database - 人们如何创建可重用的数据库？

> ID：773801
> 
> 赞同：6
> 
> 时间：2009-04-21T17:56:12.133
> 
> 标签：database, product, accounting

人们如何制作可用于许多产品的可重用数据库？

例如，如果我们有一个为学校设计的数据库......可以轻松修改以提供给大学吗？

创建一个可以用作产品的数据库的方法是什么，只需一次编码就可以为许多客户提供解决方案？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-21T18:08:05.523

通常，当人们这样做时，他们在同一行业中有多个客户。因此，如果您是电子商务 Web 开发人员，那么您将一遍又一遍地运行相同的产品、订单、订单详细信息类型的表格场景。发生这种情况时，构建入门数据库是轻而易举的事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-21T17:59:32.937

这没有简单的灵丹妙药。你只需要保持你的数据库设计足够通用，但尽量避免过度概括，因为这通常会导致维护中的噩梦和其他令人讨厌的陷阱。

随着经验的积累，您将开始体会到泛化和专业化之间的完美平衡。这是可理解和可重用的代码/数据库设计的关键。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T18:01:10.657

答案是找到[抽象](http://en.wikipedia.org/wiki/Abstraction_(computer_science))的[最佳点](http://en.wikipedia.org/wiki/Sweet_spot)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-21T19:48:13.817

第一步，与各种各样的潜在客户交谈，了解他们的需求、他们目前正在使用什么以及他们希望他们当前的产品能做什么。在这方面花费 10 倍于你认为你现在需要的时间。在纸上画出潜在的 GUI，让您采访的人查看图纸并提出建议。如果可能的话，请聘请一些业内人士作为业务分析师来帮助完成这一步。询问法律要求。一些行业有很多法律合规问题，而另一些则没有。例如，任何与医学界相关的事物，您都需要研究并充分了解 HIPPA 要求。

设计数据库结构和 GUI，然后让一些真正的用户使用它。根据他们所说的进行重构（令人惊讶的是，用户在需求收集中遗漏了许多他们直到面对实际 GUI 才想到的东西）。

想想所有潜在客户的共同点以及您可能需要定制的地方——您的采访应该在这里为您提供指导。决定如何处理定制。或者即使你允许。这可能在很大程度上取决于行业以及他们的做法有多标准。

如果这是盒式软件，通常设计包括一个带有可自定义字段的表格，用户可以将这些字段添加到表单和报告中。

在基于 Web 的解决方案中，通常每个想要定制的用户都可能有自己的数据库来存储定制信息（以及用于不可定制事物的中央标准数据库），并且程序员根据客户的请求进行更改。如果您采用这条路线，那么在您第二次为第二个客户端进行类似的定制时，请考虑是否需要重构以使该软件的新功能可供所有人使用。当客户可以用更少的钱获得标准报告时，无需编写 17 个仅由一两个字段变化的自定义考勤报告。

在 Web 模型中，您还可以创建一堆模块并让客户选择添加到他们的自定义解决方案中的模块。他们将根据他们选择的模块的数量和复杂性付费。因此，只想要三个标准报告的客户将比想要全部 27 个的客户支付更少的费用。当提出新的定制建议时，如果该建议似乎没有立即适用于其他人，那么客户支付开发费用，但是模块这样做是为了让其他人也可以购买它。如果其他人购买它，要求更改的原始客户可能会获得部分资金，直到支付他们的开发成本。他们还可能要求将某些东西保留为自定义模块，并为这项工作付出更高的代价。我们有一些客户不 甚至不希望他们的数据与其他客户位于同一位置的同一台服务器上。不用说，我们会为做这样的事情收取巨额费用。

定制是昂贵的，并且可能导致需要更多的程序员。在您走定制路线之前，请认真考虑。它确实可以销售您的软件解决方案，但它不能很好地扩展。当你有十个客户时这还不错，但是当你有几百个客户时，它很快就会失控。一旦你提供了定制，就比以后从标准套件中添加定制要困难得多。通常，在企业报告的组织中更需要定制。如果您可以创建一个报告界面，人们可以在其中挑选和选择他们想要的信息并保存他们自己的自定义报告，那么您可以处理行业中的大部分自定义需求，而无需进行全面的自定义。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-21T17:59:37.603

我能给出的最好建议是建立最低的公分母......

所以....将其编码为面向教育设施的项目:-)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-21T18:00:20.470

花时间考虑您要存储的数据类型，将其抽象以使其可扩展，然后相应地构建您的数据库。我不知道您是否可以像从代码中那样获得完美的重用，但是如果您提前计划，您可以构建一个可重用的数据库结构（您仍然需要修改各个组件）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-21T18:01:19.360

这取决于您的需求。例如，许多基于产品的业务数据库使用的格式包括：

*   客户表
*   订单表
*   产品表等

在你的情况下，你可能有

*   班级表
*   学生桌
*   成绩表等

这种通用表格格式可以在许多应用程序中重复使用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-21T18:02:24.600

这一切都在设计中。在许多（如果不是大多数）情况下，数据库需要针对个别机构进行某种程度的定制；但是通用数据库可以提供基本的功能级别。可以设计出足够通用的东西来满足许多基本需求；但问题是，设计的通用性往往会导致高度复杂性。例如，您可以将数据库设计为数据驱动的，以满足大量潜在用户需求；但通常情况下，最好根据机构的个人需求定制架构。

在设计可重用情况时需要进行重大权衡；通常它们涉及时间和复杂性；即，设计不可重用的东西更容易；通常，在进行一般设计和使用它时所涉及的额外时间是不值得的。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-21T18:03:23.147

在您的数据库设计中找到一般性和特殊性的适当平衡，以便您围绕它构建的应用程序可以解决目标市场中的足够问题，他们都会购买它。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-04-21T18:14:06.117

像这样的应用程序需要一个相当复杂的数据模型来满足要求。不同类型的学校会有不同的要求。大学可能允许您添加或删除课程，但小学通常不会。大学需要将课程安排到房间，而小学需要根据可用空间和教师将学生分成年级并将年级分成教室。

您的设计需要考虑预期要解决的所有要求，然后实施这些要求。您使程序越通用，就越难以满足您的客户。问题是“编写一次代码”。如果你想编写一个程序来解决每个学校的需求，它需要数百个功能；在某些情况下，一些学校需要与另一所学校相反的功能；例如，一些学校需要每个学科或每个教室强制一名教师，而另一所学校可能需要多名教师。您期望满足的要求越多，应用程序就越复杂。

在工业中，大型应用程序倾向于编写以便可以扩展；提供了一组核心功能，但该应用程序旨在针对特定客户进行更改和定制。这使得开发更容易，因为您不需要预测每一个需求；事实上，在您拥有满足这些需求的客户之前，您无需预测许多需求。但是通过“定制”，您不会只编写一次代码。

最重要的一步是提出一个足够灵活的数据模型，可以在以后进行扩展，但又不会灵活到无法开发的程度。最难的部分通常是让关系的基数正确。例如，您可能会说一个班级有一位老师。然后当一个班级需要两个老师时，你必须重写大量代码并修复大量数据。这些类型的更改令人讨厌且耗时。但是，最终，只要有足够的程序员时间，您总是可以修复错误。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-04-21T19:38:54.883

每个客户都会使用所有功能，还是您正在尝试构建一种适合所有产品的尺寸？我一直发现，为适应特定应用程序而花费额外的时间来规划和修改数据库会在未来得到回报。使用简洁的数据库结构比尝试考虑所有可能性的数据库结构要容易得多。

如果我有一个类似的现有数据库或模板，我通常使用这样的数据库建模工具[来](http://ondras.zarovi.cz/sql/demo/?keyword=default)修改它，然后使用生成 SQL 功能（在加载/保存下）来创建实际的数据库。

我最近学到的另一个为我节省了大量时间的技巧是将用于生成数据库的 SQL 保存为脚本。如果我想建立一个新的数据库，我对源代码进行任何编辑，然后加载页面。例如，如果我想生成一个新的客户表，我会加载*[http://localhost/load.php?generate=customer](http://localhost/load.php?generate=customer)*。

希望能帮助到你！

# embed - 嵌入天气预报的好资源

> ID：773807
> 
> 赞同：4
> 
> 时间：2009-04-21T17:57:52.177
> 
> 标签：embed, weather

我想在网站上添加 5-10 天的天气预报。我很难找到提供预测嵌入代码的网站。我发现的少数看起来很糟糕（大约在 1990 年代）。我只是想知道在我无休止的谷歌搜索中是否有一个看起来很干净的解决方案可能会被忽略。Flash，iframe，任何东西......

我意识到拉入天气 RSS 提要可能是唯一干净的解决方案，但我对解析 RSS 提要不是很熟悉，所以这需要我做很多工作，因为我将深入研究文档。

**我还应该提到这个天气应用程序在它自己的页面上。所以，越大越好。如果我没有找到一个足够大的，我将把它实现到一个浮动窗口（确切地说是jQuery Overlay）而不是它自己的页面。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-29T17:37:15.613

[Forecast.io](http://forecast.io/)提供了一个非常巧妙的每周预测[嵌入解决方案](http://blog.forecast.io/forecast-embeds/)。如果您愿意，您还可以自定义颜色和字体以匹配您的网站。它是固定高度，可变宽度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-21T18:03:15.737

[Weather Underground](http://www.wunderground.com/)是一个成功的天气预报网站，覆盖了世界大部分地区（你不会说你需要预测的地方）。他们有一些免费的东西，叫做[天气贴纸](http://wiki.wunderground.com/index.php/Weather_Stickers)，提供当前观察到的天气情况的实时信息。您只需在页面中嵌入图像。像这样：

[![点击查看英国伦敦预报](https://i.stack.imgur.com/QVrNk.gif)](https://i.stack.imgur.com/QVrNk.gif)
[（来源：[wunderground.com](http://weathersticker.wunderground.com/weathersticker/big2_cond/language/www/global/stations/03772.gif)）]

他们还提供天气预报[XML 提要和 API](http://wiki.wunderground.com/index.php/API_-_XML)，但您需要做一些工作。或者他们可以为您建立一个[自定义站点](http://www.wunderground.com/autobrand/info.asp)。但你必须为此付出代价。

Weather.com 提供[Weather Widgets](http://www.weather.com/services/weather-gadgets/?from=hp%5Ftools)，这是一个类似的想法。您必须为此嵌入 JavaScript，因此我无法在此处显示。看起来他们有 RSS 提要，如果你[注册](http://www.weather.com/services/oap.html?from=footer)，你可能会得到更多。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-08-05T10:58:36.860

[https://weatherwidget.io/](https://weatherwidget.io/)上有一个新的交互式天气小部件生成器

它是免费的、非常可定制的，并且它创建的小部件是完全响应的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-06T18:04:49.460

如果您想拥有真正优秀的嵌入式天气软件，请使用 Wea​​ther Underground Api。网站上的信息（[http://dutch.wunderground.com/weather/api/d/docs](http://dutch.wunderground.com/weather/api/d/docs)）非常好，有例子，有你自己开发的一切。

这些信息基于原始数据来围绕它构建您自己的环境。这意味着您必须构建外观，它们提供数据。

而且是免费的！！！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-11-17T08:09:07.947

尝试了上述所有其他服务，但没有一个在使用 HTTPS 的站点上工作。

我发现这项服务有效：

[http://www.booked.net/widgets/weather](http://www.booked.net/widgets/weather)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-24T03:25:27.483

我想出了一个可以嵌入 Google 天气小部件的 hack，无需任何服务器端支持，请参见此处：

[https://stackoverflow.com/a/61980631/218294](https://stackoverflow.com/a/61980631/218294)

# oop - 这种方法属于哪里？

> ID：773811
> 
> 赞同：4
> 
> 时间：2009-04-21T17:59:56.400
> 
> 标签：oop

假设我有一个从 UI 输入的模型地址。我必须验证地址永远不会以不完整的状态保存到系统中（无论这对业务意味着什么）。

当用户在 UI 中输入地址时，它会被序列化为 Address 对象。所以我想知道：像“isComplete”这样的方法属于哪里？验证者还是模型？

如果我将该方法放在地址模型中并`address.isComplete()`在保存之前调用验证器，则意味着不完整的地址是有效的系统状态；如果我在验证器中进行完整性检查，感觉验证器对地址内部的了解太多了。

我想知道，其他人遵循什么一般惯例？

编辑：正如下面有人提到的，在上面的示例中，地址对象在多个系统中重复使用，一个系统中的“完整”对象可能并不意味着另一个系统中的“完整”对象。因此，没有一致的方式在全局范围内强制执行“永远不应在无效状态下构造对象”，因为无效状态取决于上下文。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T18:04:10.867

听起来您需要一个 AddressFactory，您可以在其中传递地址的数据，它会为您提供有效的地址或错误（异常/其他）。您正确地确定创建*无效*地址并不理想。

如果这样做，您应该确定谁可以创建 Address 对象，以及是否可以在不使用 AddressFactory 的情况下创建它们。如果是这样，那么地址对象本身需要防止无效输入，并且地址对象本身具有有效性检查的参数变得更强。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T18:04:36.997

验证者，有两个原因。

首先，地址中几乎没有固有行为——它只是数据。

其次，因为验证可能会根据地址的使用而改变。您可能有一条规则，在运送大件物品时禁止使用邮政信箱，但不关心帐单地址。而对于帐单地址，您可能需要进行更严格的检查，这样当有人输入虚假地址时，您就不必向支付网关付款。

* * *

回复评论：BillingAddress 和 ShippingAddress 之间的数据是否不同？还是规则变了？这些规则是一成不变的，还是将来可能会改变（例如，UKBillingAddress、USBillingAddress）？

我同意在某些情况下让类型系统强制执行数据规则是有用的（测量就是一个很好的例子；谷歌的火星探测器在一个地方使用米，另一个地方使用英尺）。但是，我怀疑地址不是这些情况之一。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T19:09:07.840

我为我使用的每种数据创建了一个数据类。我不使用“string”和“int”类型，除非在这些数据类中。我的数据类具有有意义的名称，并且在类的特定约束有意义的上下文中使用。

例如，如果您有一个仅对 1 到 100 之间的值有意义的“分数”字段，那么您*没有业务*将其存储在一个“int”类中，其范围是 -2,147,483,648 到 2,147,483,647。如果你这样做了，在你通过它的任何地方尝试冗余验证它，并且在弄清楚何时何地需要验证它，并且当你忘记一个地方并且让无效数据潜入你的系统时，有乐趣，并且有乐趣有趣的尝试向我解释不是程序员的错误的错误在为确定性数字硬件编写的软件中是如何可能的。

**何时/何地验证：**

如果您从 UI 中的文本字段接受分数，请在输入点对其执行**初步验证**，并提供适合该特定用户界面的错误消息。初步验证可以**像您需要的那样复杂，以便**向用户提供有意义的反馈。

执行初始验证后，将数据填充到适当的有意义的数据类中，例如“Score”，构造函数将在其中执行**最终/权威验证**。这种权威验证应该尽可能简单和高效，但绝对足以保证值是有效的。这是一个布尔验证；数据要么有效，要么引发适合程序员阅读的异常。例如，如果您的数据类的验证代码只是一个正则表达式匹配，请考虑在错误消息中包含数据类名称、正则表达式字符串和数据本身。所有基本数据类都应该是不可变的，就像字符串类本身一样；一旦构建，它就保证是有效的并且保持有效。

您的初步验证代码可能会或可能不会利用数据类的验证代码。这取决于您收集的数据的详细程度，以及您希望向 UI 发送多少反馈。同样，您创建的更复杂的类（包含作为字段的数据类）不应该是可构造的，除非它们是有效的。因此，您可能需要编写代码来验证或尝试构造每个单独的数据字段，捕获低级构造错误，并通过向 UI 提供更适当的反馈来处理它们。有时，此反馈可能涉及将字段着色为红色并在其旁边显示错误消息。如您所见，有两种验证，一种显然出于必要而更复杂。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-21T18:06:34.917

如果您不希望您的验证器知道它正在验证什么，您可以使用接口或控制反转模式。在界面方面，这很容易......

```
interface IValidateable  // or whatever :)
{
   bool IsValid { get; }
} 
```

这样，验证器只知道它需要询问一个对象是否有效，而对该对象的内部状态一无所知。

在[IoC 方面](http://www.martinfowler.com/articles/injection.html)，这更复杂。您将交给验证器一个特定的方法签名，它将在一个对象上调用（即验证我，调用它）。但是，这是一个更困难的解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-21T18:07:48.643

你可以看看复合材料。有一个基本的验证器，然后再分类到一个特定的地址验证器。现在，验证器了解地址如何工作是有意义的，但不必担心任何其他项目如何验证。

然后，将许多验证器分组到 ValidatorCollection 中，并调用它的 .Validate() 方法，它对所有子节点调用相同的方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-21T18:07:54.960

isComplete() 是检查还是命令？

如果它是一个检查函数 (if (isComplete()) {}) 那么它属于验证器。由于您有一个 UI 和一个模型，我假设您有一个在两者之间进行协调的控制器。在这种情况下，只需在调用保存例程之前从验证器调用您的检查函数，这会将您的模型标记为完成。

如果 isComplete() 是将您的数据标记为完整的命令，那么我认为您应该更改设计的那部分。太乱了，不适合我的口味。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-21T18:09:52.180

IMO 地址模型应该有地址是完整还是不完整的信息。

可以说，稍后如果业务逻辑发生变化并且现在不完整意味着至少 5 个字符。那么验证器为什么要担心这种逻辑变化呢？

我觉得，对象也应该保存它们的数据和状态。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-21T19:42:08.650

嗯，我会考虑以下几点：

1.  需要有效地址的域/子系统是什么？
2.  有多少这样的域？
3.  哪些域中可能存在无效地址？
4.  是否存在影响有效性确定的其他情况（您的验证来源是什么）。验证器是否与需要有效地址的域不同的实体。（例如，它可以是远程服务吗）

如果有多个域，每个域都需要不同的有效性定义，则在将地址传递给它们时强制执行有效性更有意义，并且假设遇到的所有地址都是无效的，除非另有证明。另一方面，如果只有一个定义构成有效地址，则发起者在提供地址之前执行验证并假定它们是有效的可能更有意义。如果验证器是一个单独的（可插入的？）实体，它可以是一个单独的服务。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-21T18:18:34.123

我认为你所建议的一切都是相关的。有几种方法可以解决这个问题：

使验证器成为接口：

这可以像

```
Validator addressValidator = new AddressValidator();
bool valid = addressValidator.validate(map);
if (valid) {
    Address address = addressValidator 
```

通过这种方式，您可以识别出 addressValidator 与 Address 耦合。或者，您可以使用泛型来执行此操作

将 isComplete 放入地址：

说所有对象都应该以有效状态构造是一个很好的 oop 启发式，但它并不总是成立。请记住，oop 最大限度地利用了您可以利用的编译时信息，即强制在编译时而不是运行时发生尽可能多的错误。用户界面将完全阻止这一点。你必须在某处违反这一点。（例如，我认为 J2EE 的惯例是构造不带参数的对象并调用一百个 setter。）

拆分地址 int 两个对象：

如果您想了解有效状态的技术，那么您实际上有两个不同的标准：UI 返回的状态和模型所需的状态。为什么不明确区分？例如，如果我的 UI 有 12 个可用字段，我可以有一个`UIAddress`具有 12 个字符串字段的对象。我可以控制这一点：无论用户做什么，我都可以确保 UI 返回 12 个字段。然后，您可以创建一个实例`UIAddress`并调用`isComplete()`它：

```
UIAddress uiAddress = uiForm.getAddress();
if (uiAddress.isComplete()) {
    Address modelAddress = uiAddress.cleanedData();
} 
```

这一切都将取决于您的预期设计，但您确实有很大的灵活性。恕我直言，“完成”的方式是`isComplete`输入地址。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-04-21T18:26:30.207

恕我直言..您需要 2 个级别的验证。

*   客户端/UI 级别：查找对更改具有低亲和力但易于更改的规则并将它们插入 UI。例如，该字段的内容“必须是数字”或该字段的内容必须“匹配此模式”或“是必需的”。声明性规则在这里..为用户提供即时反馈。
*   模型级别：将其他所有内容移至模型/业务规则中。任何可以改变的东西都应该放在这里。你不能取消模型验证，因为我可以通过绕过 GUI 的代码来做到这一点

> ```
> Address a = new Address();
> // set fields as I deem fit
> a.Save(); 
> ```

总结一下：尝试标记问题并在不影响模型的情况下尽可能消除不良输入。该模型是您的最后一道防线，并确保没有错误的输入越过它。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-04-21T18:27:31.247

如果这是一个数据输入应用程序，用户必须在持久化任何内容之前完成整个表单/地址，那么验证器应该拥有 isComplete 方法，并且模型将永远不必处理除了完整地址之外的任何内容

但是，如果用户可能需要保存部分结果并在以后继续它们（例如，如果包含地址的表单只是可以中断/继续的“向导”序列中的一个步骤），那么 isComplete 属于模型，并且“不完整” ' 是地址的有效状态。

*或者*， isComplete 方法可能属于 Validator（*无论在您的框架中意味着什么！*），但它的完整/不完整状态成为地址数据的一部分。

# python - 在 python 中使用 matplotlib 绘制对数轴

> ID：773814
> 
> 赞同：494
> 
> 时间：2009-04-21T18:00:26.150
> 
> 标签：python, matplotlib, scale, logarithm

我想使用 matplotlib 绘制具有一个对数轴的图形。

我一直在阅读文档，但无法弄清楚语法。我知道这可能很简单，比如`'scale=linear'`情节论点，但我似乎无法正确理解

示例程序：

```
import pylab
import matplotlib.pyplot as plt
a = [pow(10, i) for i in range(10)]
fig = plt.figure()
ax = fig.add_subplot(2, 1, 1)

line, = ax.plot(a, color='blue', lw=2)
pylab.show() 
```

* * *

## 回答 #1

> 赞同：539
> 
> 时间：2009-07-26T00:14:42.870

您可以使用该[`Axes.set_yscale`](http://matplotlib.sourceforge.net/api/axes_api.html#matplotlib.axes.Axes.set_yscale)方法。`Axes`这允许您在创建对象后更改比例。这也将允许您构建一个控件，让用户在需要时选择比例。

要添加的相关行是：

```
ax.set_yscale('log') 
```

您可以使用`'linear'`切换回线性刻度。这是您的代码的样子：

```
import pylab
import matplotlib.pyplot as plt
a = [pow(10, i) for i in range(10)]
fig = plt.figure()
ax = fig.add_subplot(2, 1, 1)

line, = ax.plot(a, color='blue', lw=2)

ax.set_yscale('log')

pylab.show() 
```

[![结果图](https://i.stack.imgur.com/CmQwl.png)](https://i.stack.imgur.com/CmQwl.png)

* * *

## 回答 #2

> 赞同：347
> 
> 时间：2010-08-18T15:10:32.733

首先，混合`pylab`和`pyplot`编码不是很整洁。更重要的是，[pyplot 风格比使用 pylab 更受欢迎](http://matplotlib.org/faq/usage_faq.html#matplotlib-pyplot-and-pylab-how-are-they-related)。

这是一个稍微清理过的代码，仅使用`pyplot`函数：

```
from matplotlib import pyplot

a = [ pow(10,i) for i in range(10) ]

pyplot.subplot(2,1,1)
pyplot.plot(a, color='blue', lw=2)
pyplot.yscale('log')
pyplot.show() 
```

相关功能是[`pyplot.yscale()`](http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.yscale)。如果您使用面向对象的版本，请将其替换为 method [`Axes.set_yscale()`](http://matplotlib.sourceforge.net/api/axes_api.html#matplotlib.axes.Axes.set_yscale)。请记住，您还可以使用[`pyplot.xscale()`](http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.xscale)（或[`Axes.set_xscale()`](http://matplotlib.sourceforge.net/api/axes_api.html#matplotlib.axes.Axes.set_xscale)）更改 X 轴的比例。

检查我的问题['log'和'symlog'有什么区别？](https://stackoverflow.com/questions/3305865/what-is-the-difference-between-log-and-symlog)查看 matplotlib 提供的图形比例的一些示例。

* * *

## 回答 #3

> 赞同：76
> 
> 时间：2009-04-21T18:07:42.637

您只需要使用[符号学](http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.semilogy)而不是情节：

```
from pylab import *
import matplotlib.pyplot  as pyplot
a = [ pow(10,i) for i in range(10) ]
fig = pyplot.figure()
ax = fig.add_subplot(2,1,1)

line, = ax.semilogy(a, color='blue', lw=2)
show() 
```

* * *

## 回答 #4

> 赞同：69
> 
> 时间：2017-12-25T11:56:07.910

如果要更改对数的底，只需添加：

```
plt.yscale('log',base=2) 
```

在 Matplotlib 3.3 之前，您必须使用 basex/basey 作为 log 的基础

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2014-04-08T18:14:47.040

我知道这有点离题，因为一些评论提到了`ax.set_yscale('log')`“最好的”解决方案，我认为可能需要反驳。我不建议使用`ax.set_yscale('log')`直方图和条形图。在我的版本（0.99.1.1）中，我遇到了一些渲染问题——不确定这个问题有多普遍。然而 bar 和 hist 都有可选的参数来设置 y-scale 为 log，这工作正常。

参考资料： http: [//matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.bar](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.bar)

[http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.hist](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.hist)

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2017-03-22T00:56:11.297

因此，如果您只是像我经常使用的那样简单地使用简单的 API（我在 ipython 中经常使用它），那么这很简单

```
yscale('log')
plot(...) 
```

希望这对寻找简单答案的人有所帮助！:)。

# distributed - 分布式项目管理/错误跟踪

> ID：773818
> 
> 赞同：20
> 
> 时间：2009-04-21T18:01:31.530
> 
> 标签：distributed, tracking

现在我们有了 DSCM，是否有任何分发的项目管理/错误跟踪工具？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-21T18:13:19.410

是的，我玩过一些带有几个不错功能的[化石](http://www.fossil-scm.org/index.html/doc/tip/www/index.wiki)：

*   集成、分布式错误跟踪和分布式 wiki
*   内置 Web 界面（如 hg serve），支持通过项目历史进行深入的考古挖掘
*   通过 HTTP 进行所有网络通信并支持代理，以便一切都在限制性防火墙后面工作
*   一切（客户端、服务器和实用程序）都包含在一个独立的可执行文件中 - 安装起来很简单
*   包含在单个磁盘文件中的整个项目（SQLite 数据库）

还要检查：

*   [DITrack](http://www.ditrack.org/)
*   [转移](http://www.distract.wellquite.org/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-08-27T23:13:39.817

我今晚一直在看这个，并且看过 Ditz。另外两个供考虑：

*   [到处都是虫子](http://www.bugseverywhere.org/)
*   [Artemis](http://www.mrzv.org/software/artemis/)（水银扩展）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-21T20:57:20.373

是的。

写在

蟒蛇：[皮茨](http://pitz.tplus1.com/)

红宝石：[ditz](http://ditz.rubyforge.org/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-21T18:12:51.470

[Rational Clearquest](http://www-01.ibm.com/software/awdtools/clearquest/)提供了一个分布式软件生命周期管理解决方案。它与 Clearcase（相关的 SCM）集成，并且与 Clearcase 一样，旨在为大型分布式客户群提供服务。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-11-26T21:42:08.720

人们已经给出了最重要的链接，所以让我添加一个替代方案和一个旁注。

替代方案：emacs org-mode 对制作和使用任务列表有完善的支持。.org 文件只是一个文本文件，因此可以像其他任何东西一样进行版本控制。这可能不是唯一的选择，其他 GUI/编辑器可能支持类似的工具（Eclipse Mylyn？）

旁注：一段时间以来，我一直在到处使用错误。好吧，快速放弃待办事项既简单又愉快。一旦问题列表变大，管理它几乎是不可能的。真的，这是一个需要里程碑、问题分类、进度跟踪、一些报告的时候......

ditz 在这里可能更有希望，因为它有一些 HTML 报告和 ditz-commander。不过，我还没有测试过。

# asp.net - WCF 重定向

> ID：773823
> 
> 赞同：1
> 
> 时间：2009-04-21T18:02:14.600
> 
> 标签：asp.net, wcf

我知道 WCF 应该与传输无关，但是有没有一种方法可以直接写入客户端（尤其是 Web 客户端）？

我需要做与 response.redirect(url) 等效的操作，尽管可能只写出“301 Location Moved”标头。

我正在尝试编写一个服务，该服务将在第一个请求时将静态内容移动到 CDN（S3 或类似），然后在完成时重定向。然后所有后续请求将立即重定向。

任何反馈将不胜感激。

H

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-21T18:06:52.733

我在客户端的 JavaScript 中执行此操作。返回要重定向到的 url，然后使用新 url 调用 Window.Location。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T18:15:49.013

它可能不应该由服务来告诉客户端它的端点在哪里（即像网页一样重定向客户端）。您可以将其设置为客户端知道一个用于“创建”的端点和一个用于“获取”的端点（或任何后续调用）。或者你可以让你的服务决定“好的，这不是一个创建调用，所以我将去后端存储（S3 或其他）并获取客户想要的数据并将其交给他。” 就个人而言，我更喜欢在服务中隐藏复杂性，而不是拥有一个不必要的复杂客户端，所以我可能会采用第二种方法。

# java - 为什么开源 GWT 应用程序这么少？

> ID：773824
> 
> 赞同：8
> 
> 时间：2009-04-21T18:02:24.553
> 
> 标签：java, open-source, gwt

自从我开始从事 GWT 工作以来，我发现奇怪的是，这项技术中的开源项目很少。

最初我很惊讶地发现这主要是因为 GWT 本身是开源的。但在对此感到困惑之后，我怀疑它主要用于已经使用 Java 并在其 RIA 中使用 GWT 而不是 Flex 或 Rails 的大公司的内部项目。我的理解是，使用 Java 的大公司对开源的贡献往往较低，因为它们主要关注内部或商业应用程序。

这听起来像是一个准确的解释，还是有人对这种现象有不同的解释？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-21T18:12:59.147

实际上，在我看来，公司，尤其是那些使用封闭源代码的公司，会更喜欢 GWT 而不是开源开发人员，原因与问题中提到的原因有关：

*   他们已经使用 Java，尤其是经验丰富的 Java 开发人员
*   支持多种语言的成本会更高（有时是实际成本）
*   管理层不愿意在职位发布上添加另一个要点（必须了解 Javascript）或让开发人员接受培训

另一方面，开源开发人员通常是业余爱好者（尽管并非总是如此），而爱好者往往对“为了乐趣”而学习新技术更感兴趣。因此，爱好者会更愿意直接编写 Javascript，可能借助不涉及从其他源语言翻译的 Javascript 框架。

特别是关于源语言翻译，这是一个[泄漏的抽象](http://www.joelonsoftware.com/articles/LeakyAbstractions.html)。最终，您可能会想要使用“原始”Javascript，并且在您已经编写 JS 的环境中比在其中编写需要翻译的 Java 的环境中更容易做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T18:15:24.380

我认为您是对的，但您可能需要添加更多因素：

GWT相当年轻

开源程序员使用他们选择的语言工作，对于小型的 1 人项目，如果您还不了解 Java，可能会有点不舒服（我是 Java 的最大粉丝，但一切都有它的局限性）。

对于 Web 前端来说，Java 并不是一个很好的选择，所以即使 GWT 是一个很好的解决方案，对于一个非常小的开发团队来说，它永远不会比 rails 更有吸引力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T18:17:12.800

可能是因为 GWT 使用了 javascript 而[Richard Stallman](http://en.wikipedia.org/wiki/Richard_Stallman) [不喜欢](http://www.gnu.org/philosophy/javascript-trap.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-22T11:17:26.547

就个人而言，我已经避免将 GWT 用于我想要开源的项目，因为我发现在 Eclipse 中将它用于测试驱动开发很棘手。这些天我不会以任何其他方式进行开源。

一定有办法让它工作，但它拒绝了我所有的尝试，所以我只是换了一种不同的技术。

# linux - 实现工作线程（在 Linux 中）：这有多令人反感？

> ID：773826
> 
> 赞同：0
> 
> 时间：2009-04-21T18:02:26.363
> 
> 标签：linux, multithreading, posix, pthreads

```
#include <pthread.h>
static void * worker_thread(void *);

void some_func(void)
{
    pthread_t * tmp;
    tmp = malloc(sizeof(pthread_t));
    if (NULL != tmp)
    {
        if (!pthread_create(tmp, NULL, worker_thread, (void *)tmp))
            pthread_detach(*tmp);
        else
            free(tmp);
    }
}

static void * worker_thread(void * p)
{
    /* do work */
    free(p);
    return(NULL);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-15T14:06:19.293

我从评论中了解到，在`pthread_t`线程期间不需要结构是“活动的”（这是我的想法，也是我使用 malloc 的原因）；堆栈变量很好。我最终做的是基于 Jason Coco 的评论：

```
#include <pthread.h>

static void * worker_thread(void *);

void start_worker(void * arg)
{
    pthread_t tmp;
    (void)pthread_create(& tmp, NULL, worker_thread, arg))
}

static void * worker_thread(void * p)
{
    /* do work */

    /* finished work */
    pthread_detach(pthread_self());
    return (p);
} 
```

# c# - 如何在运行时设置对象的各种属性？

> ID：773827
> 
> 赞同：0
> 
> 时间：2009-04-21T18:02:48.903
> 
> 标签：c#, .net

假设我有一个 xml 文件，例如：

```
<Filters>
    <Blur Name="Blur01" />
    <Sharpen Name="Sharpen01" Amount=5 />
</Filters> 
```

如何在不影响性能的情况下设置 、 等的`Blur`属性`Sharpen`？我认为反射会起作用，但节点和属性的数量将达到数百万，因此反射成本会非常高 IMO。

所以说我得到一个属性列表，例如：

```
{ "Name", "Amount", ... } 
```

如何在已经初始化的对象上调用它们？

我还可以选择将它们传递给可选参数，因为我将在读取 xml 时从 xml 构造对象。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-21T18:05:35.217

使用 .NET 中的内置 XML 序列化。如果您有性能问题，请考虑使用 SGEN.exe 预先生成解析器。

[.NET 中的 XML 序列化程序](http://tinyurl.com/6rq2bx)

[XML 序列化程序生成器工具 (Sgen.exe)](http://msdn.microsoft.com/en-us/library/bk3w6240(loband).aspx)

如果您自己解析，如果您保留 PropertyInfo 对象，则反射并不是非常昂贵。

最后，您可以编写自己的解析器……但实际上，.NET 提供的 XML 序列化工作得非常好。

# wcf - 如何在 VB.NET 中通过 WCF 公开接口属性？

> ID：773833
> 
> 赞同：2
> 
> 时间：2009-04-21T18:04:13.113
> 
> 标签：wcf, properties, service

在 C# 中，我可以这样做以通过 WCF 公开属性

```
[ServiceContractAttribute()]
public interface IFoo
{
  int Length
  { 
    [OperationContract()] get;
    [OperationContract()] set;
  }
} 
```

我必须这样做，因为 OperationContract 装饰的是方法而不是属性。我正在使用一个无法轻易更改以删除属性的使用的旧界面。

如何在 vb.net 中执行相同的操作，我无法弄清楚我将在界面中使用什么属性语法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-21T18:18:50.737

不幸的是（据我所知）VB 对接口使用了一种非常简单的属性语法，不允许您在`get`or上指定属性`set`。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2010-01-15T19:58:09.293

```
 <OperationContract(AsyncPattern:=True)> 
```

# c# - 在 ASP.NET Web 应用程序请求期间，文化发生了莫名其妙的变化

> ID：773842
> 
> 赞同：3
> 
> 时间：2009-04-21T18:06:14.717
> 
> 标签：c#, asp.net, sql-server-2005

当日期字段的日期格式从 4/16/2009 12:00:00 AM 更改为 16/04/2009 00:00:00 时，我遇到了一个奇怪的问题。我将应用程序设置为写出每个使用相同对应日期字段触发的存储过程（如果存在）。这就是结果。您会注意到格式切换到一半莫名其妙。

```
EXECUTE uspContent_SelectOne '132'
4/16/2009 12:00:00 AM
EXECUTE uspContent_SelectOne '127'
4/16/2009 12:00:00 AM
EXECUTE uspContent_SelectOne '133'
4/16/2009 12:00:00 AM
EXECUTE uspContent_SelectOne '131'
4/16/2009 12:00:00 AM
EXECUTE uspAttachment_SelectAll
EXECUTE uspArticleAuthors_SelectAll_ArticleId '3'
EXECUTE uspArticles_SelectOne '3'
EXECUTE uspAuthors_Letters
EXECUTE uspAuthors_Letters
EXECUTE uspAuthors_Letters
EXECUTE uspAuthors_SelectAll_Letter_LastName 'A'
EXECUTE uspFiles_SelectAll_NoFileData
EXECUTE uspArticles_SelectOne '3'
EXECUTE uspArticleTypes_SelectAll
EXECUTE uspFiles_SelectAll_NoFileData
EXECUTE uspAuthors_SelectOne '0'
EXECUTE uspArticleAttachments_SelectAll_ArticleId '3'
EXECUTE uspArticleAttachments_SelectOne_ArticleId_AttachmentId '3','4'
EXECUTE uspAttachment_SelectOne '4'
EXECUTE uspContent_SelectOne '132'
16/04/2009 00:00:00
EXECUTE uspContent_SelectOne '127'
16/04/2009 00:00:00
EXECUTE uspFiles_SelectOne_NoFileData '60'
EXECUTE uspArticleAttachments_SelectOne_ArticleId_AttachmentId '3','3'
EXECUTE uspAttachment_SelectOne '3'
EXECUTE uspContent_SelectOne '133'
16/04/2009 00:00:00
EXECUTE uspContent_SelectOne '131'
16/04/2009 00:00:00
EXECUTE uspAttachment_SelectAll
EXECUTE uspArticleAuthors_SelectAll_ArticleId '3'
EXECUTE uspAuthors_SelectAll_Letter_LastName 'A'
EXECUTE uspContent_SelectOne '129'
18/09/2008 00:00:00
EXECUTE uspContent_SelectOne '7'
18/09/2008 00:00:00
EXECUTE uspContent_SelectOne '8'
18/09/2008 00:00:00
EXECUTE uspContent_SelectOne '9'
18/09/2008 00:00:00
EXECUTE uspContent_SelectOne '10'
18/09/2008 00:00:00
EXECUTE uspContent_SelectOne '11'
18/09/2008 00:00:00
EXECUTE uspFiles_SelectAll_NoFileData 
```

我不知道为什么。我正在使用 ASP.NET/C#、SQL Server 2005 和 MS Enterprise Library 4.1。

**更新 1**

我检查了应用程序的文化设置并得到了这个。对于每个日期字段查询，我检查了文化。在下面的屏幕截图中，您可以看到文化从美国到英国的变化：

[改变文化的形象 http://www.craigmoliver.com/cultureissue.jpg](http://www.craigmoliver.com/cultureissue.jpg)

web.config 中的设置如下：

```
<globalization culture="en-US" uiCulture="en-US" requestEncoding="utf-8" responseEncoding="utf-8" enableClientBasedCulture="false" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-21T18:46:49.220

请求是否来自不同的浏览器？您是否从 HTTP 请求中的 Accept-Language 标头中获取 Culture/UICulture？如果是这样，您可能有一个浏览器的首选语言设置为 en-US，而另一个设置为 en-GB？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-21T18:50:33.487

检查当前文化的建议很有希望。

需要考虑的另一种可能性：您的应用程序是否在负载平衡的服务器群中运行，并且 Web 服务器是否正确配置相同？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-30T19:47:06.023

`Thread.CurrentThread.CurrentCulture`创建一个在更改时触发的断点。这至少应该为您指明正确的方向。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-04T10:15:47.003

如果您使用从 XSD 架构（`DataSet.ReadXmlSchema`方法）生成的数据集，并且 XSD 包含一个`msdata:Locale`属性，则对此数据集的文化相关操作可能会使用架构中的区域设置，而忽略 web.config 设置。为当前线程显式设置它然后再次覆盖 XSD 中的语言环境。

我曾经在奇怪的与语言环境切换相关的问题上浪费了几个小时，结果证明这就是原因。

也许类似的东西也可能隐藏在企业库配置文件中。我还建议在所有与项目相关的文件中搜索有问题的语言环境字符串（en-UK）。也许会出现一些有趣的事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-21T20:20:25.953

在执行“Convert.ToDate”的方法中，我将以下代码放入：

```
Thread.CurrentThread.CurrentCulture = new CultureInfo("en-US");
Thread.CurrentThread.CurrentUICulture = new CultureInfo("en-US"); 
```

仍然不知道它为什么这样做。我的机器和开发服务器上的默认区域性是 en-US。

这太让人抓狂了！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-06T15:42:17.730

这发生在单个页面的生命周期中，还是跨多个页面？如果它跨越多个页面，您还应该检查应用程序中每个页面的标记中的 @Page 指令 - 您可以在那里显式设置文化和 UI 文化。也许你有一个文化设置不正确的流氓页面。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-07T15:29:37.613

您还可以签入您的过程以使用 SET DATEFORMAT 语句。在 SQL Server 中，可以在过程的上下文中更改日期值的解释，以便数据库以不同的方式解析日期。以下代码

```
SET DATEFORMAT 'DMY';
SELECT CAST('1-4-2009' AS date);
SET DATEFORMAT 'MDY';
SELECT CAST('1-4-2009' AS date); 
```

在我的电脑上返回以下结果

```
2009-04-01
2009-01-04 
```

因此，SQL Server 会将字符串值解释为不同的日期

# iphone - iPhone UIWebview：如何强制使用数字键盘？是否可以？

> ID：773843
> 
> 赞同：61
> 
> 时间：2009-04-21T18:06:17.257
> 
> 标签：iphone, keyboard, uiwebview, cordova

我正在尝试使用 PhoneGap 开发一些 iPhone 应用程序。PhoneGap 基本上包装了一个 UIWebView - 它运行良好。问题是我的应用程序有几个只接受数字输入的输入字段。我真的需要强制使用数字键盘而不是接受默认的标准键盘，然后强制用户切换到每个字段上的数字。有谁知道这是否可能？如何？

澄清：我知道苹果目前没有提供任何 API 来允许这样做。我想知道创建从 UIWebView 继承的自定义类是否会有所帮助，或者创建自定义键盘是否会带来一些可能性？

2009 年 11 月 6 日更新 - 如下所述，Apple 最近更新了 safari 功能，以便再次支持此功能。因此，接受的答案已更改以反映这一点。

```
 <html>
<input type='tel'/>
<input type='number'/>
<input type='email'/>
<input />
</html> 
```

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2009-10-01T18:57:12.590

看起来 Mobile Safari 支持*email*、*number*、*search*、*tel*和*url*的新 HTML5 输入类型属性。这些将切换显示的键盘。请参阅[类型属性](http://www.whatwg.org/specs/web-apps/current-work/#attr-input-type)。

例如，您可以这样做：

```
<input type="number" /> 
```

并且当输入框有焦点时，会显示数字键盘（就像用户拥有全键盘并点击“123”按钮一样。

如果你真的只想要数字，你可以指定：

```
<input type="tel" /> 
```

然后用户将获得电话号码拨号键盘。

我知道这适用于 Mobile Safari——我只假设它适用于 UIWebView。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-04-22T23:42:54.147

我发现一个更好的解决方案是在`<input type="text" pattern="[0-9]*">`为移动和桌面浏览器设计表单时使用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-21T20:25:41.323

来自[Apple 的文档](http://developer.apple.com/iphone/library/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/TextandWeb/TextandWeb.html#//apple_ref/doc/uid/TP40007072-CH20-SW14)（关于 UIWebView 的注释）：

> 您不能在输入元素中指定键盘类型。Web 视图显示了一个基于默认键盘的自定义键盘，但包含一些用于在表单元素之间导航的附加控件。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-06-21T17:38:21.107

检查了 iPhone OS 3.0，这个功能仍然不存在，不知道为什么 Apple 刚刚删除了这个方便的功能，现在真的很不高兴 :(

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2011-12-27T19:20:52.097

以下是与 iOS（4.0 及更高版本）网络视图兼容的每种类型的列表：

[http://conecode.com/news/2011/12/mobile-safari-uiwebview-input-types/](http://conecode.com/news/2011/12/mobile-safari-uiwebview-input-types/)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-04-21T18:29:59.667

这在 iPhone OS 的第一次迭代中是可能的——Safari 将提供数字键盘来形成名称中带有“zip”或“phone”的字段——但它在 iPhone OS 2.0 中消失了。

PhoneGap 目前没有 API 函数来覆盖它。这可能是他们正在研究的东西，它肯定是一个漂亮的功能。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2010-10-13T04:04:07.937

您需要在 Dashcode 项目的 HTML 部分中进行更改：

1.  在 Dashcode 中，在代码窗口中打开 index.html。
2.  在您正在处理的视图的画布上，选择要设置为使用优化键盘的输入字段。
3.  单击 index.html 以使其获得焦点。
4.  从 Dashcode 菜单栏中选择编辑>查找。
5.  在查找框中键入您为文本字段控件提供的确切名称。Find 将在 index.html 文件中找到控件。
6.  将类型从 更改`type="text"`为`type="number"`。

完毕。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-01-11T07:53:03.263

iOS 移动 Safari 还支持：

```
<input type="password" /> 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-07-27T06:38:25.200

您还可以用于基于 iOS phonegap 的应用程序是：

```
input type="number" pattern="[0-9]*" 
```

如下图所示。与 iOS 8.2 和 phonegap 3.5 及更高版本完美配合。

[![](https://i.stack.imgur.com/X3Lug.png)](https://i.stack.imgur.com/X3Lug.png)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-06-29T15:11:50.387

iOs 有一个数字键盘`UIKeyboardTypeNumbersAndPunctuation`，但这不能从 HTML 调用（[https://developer.apple.com/library/ios/documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html](https://developer.apple.com/library/ios/documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html)）

因为在“tel”键盘上缺少标点符号，所以您必须自己创建它。由于 ios8 自定义键盘可用。或者，如果您只需要标点符号，您可以向数字键盘添加一个按钮（[如何在 iOS](https://stackoverflow.com/questions/20192303/how-to-add-a-done-button-to-numpad-keyboard-in-ios7)中向数字键盘添加“完成”按钮），当您使用`type="number" pattern="[0-9]*"`.

为此：objective-c 代码。

```
-(void)keyboardWillHide:(NSNotification *)note
{
    [self.donekeyBoardBtn removeFromSuperview];
    [self.webView stringByEvaluatingJavaScriptFromString:[NSString stringWithFormat: @"document.activeElement.blur()"]];
}

- (void)keyboardWillShow:(NSNotification *)note
{
    [UIView setAnimationsEnabled:NO];
    // create custom button
    //UIKeyboardTypeNumberPadin
    //type="number" pattern="[0-9]*"
    UIButton *extryB= [UIButton buttonWithType:UIButtonTypeRoundedRect];
    extryB.frame = CGRectMake(0, self.view.frame.size.height+150, 100, 50);
    extryB.backgroundColor = [UIColor colorWithRed:204.0f/255.0f
                                             green:210.0f/255.0f
                                              blue:217.0f/255.0f
                                             alpha:1.0f];
    extryB.adjustsImageWhenHighlighted = NO;
    extryB.titleLabel.font = [UIFont systemFontOfSize:14.0];
    [extryB setTitle:@"," forState:UIControlStateNormal];
    [extryB setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
    [extryB addTarget:self action:@selector(extryBpressed) forControlEvents:UIControlEventTouchUpInside];

self.donekeyBoardBtn = extryB;

// locate keyboard view
UIWindow* tempWindow = [[[UIApplication sharedApplication] windows] objectAtIndex:1];
UIView* keyboard;
for(int i=0; i<[tempWindow.subviews count]; i++)
{
    keyboard = [tempWindow.subviews objectAtIndex:i];
    // keyboard view found; add the custom button to it

    if([[keyboard description] hasPrefix:@"<UIInputSetContainerView"] == YES)
    {

        for(int i = 0 ; i < [keyboard.subviews count] ; i++)
        {
            UIView* hostkeyboard = [keyboard.subviews objectAtIndex:i];

            if([[hostkeyboard description] hasPrefix:@"<UIInputSetHost"] == YES)
            {
                UIButton* donebtn = (UIButton*)[hostkeyboard viewWithTag:67123];
                if (donebtn == nil){
                    //to avoid adding again and again as per my requirement (previous and next button on keyboard)

                    if([[self printKeyboardType] isEqualToString: @"UIKeyboardTypePhonePad"]){
                        [keyboard addSubview:extryB];
                    }

                }
            }
        }
    }
    //[keyboard addSubview:extryB];
}
[UIView setAnimationsEnabled:YES];
// animate
[UIView animateWithDuration:0.5 animations:^{
    extryB.frame = CGRectMake(0, self.view.frame.size.height-50, 100, 50);
}];
}

-(NSString*)printKeyboardType
{

NSString* strKeyboardType = @"";
switch (self.textDocumentProxy.keyboardType) {
    case UIKeyboardTypeAlphabet:
        strKeyboardType = @"UIKeyboardTypeAlphabet";
        break;
    case UIKeyboardTypeDecimalPad:
        strKeyboardType = @"UIKeyboardTypeAlphabet";
        break;
    case UIKeyboardTypeDefault:
        strKeyboardType = @"UIKeyboardTypeDefault";
        break;
    case UIKeyboardTypeEmailAddress:
        strKeyboardType = @"UIKeyboardTypeEmailAddress";
        break;
    case UIKeyboardTypeTwitter:
        strKeyboardType = @"UIKeyboardTypeTwitter";
        break;
    case UIKeyboardTypeNamePhonePad:
        strKeyboardType = @"UIKeyboardTypeNamePhonePad";
        break;
    case UIKeyboardTypeNumberPad:
        strKeyboardType = @"UIKeyboardTypeNumberPad";
        break;
    case UIKeyboardTypeNumbersAndPunctuation:
        strKeyboardType = @"UIKeyboardTypeNumbersAndPunctuation";
        break;
    case UIKeyboardTypePhonePad:
        strKeyboardType = @"UIKeyboardTypePhonePad";
        break;
    case UIKeyboardTypeURL:
        strKeyboardType = @"UIKeyboardTypeURL";
        break;
    case UIKeyboardTypeWebSearch:
        strKeyboardType = @"UIKeyboardTypeWebSearch";
        break;
    default:
        strKeyboardType = @"UNKNOWN";
        break;
}
NSLog(@"self.textDocumentProxy.keyboardType=%@", strKeyboardType);
return strKeyboardType;
}

#define SYSTEM_VERSION_GREATER_THAN_OR_EQUAL_TO(v)  ([[[UIDevice currentDevice] systemVersion] compare:v options:NSNumericSearch] != NSOrderedAscending)

- (void)extryBpressed{
    //simulates a "." press
    [self.webView stringByEvaluatingJavaScriptFromString:[NSString stringWithFormat: @"simulateKeyPress('.');"]];
} 
```

然后你应该在你的 JS 代码中添加一个可以在应用程序范围内访问的方法。

```
simulateKeyPress: function(k) {
        var press = jQuery.Event("keypress");

        press.which = k;
        // place the id of your most outer html tag here
        $("#body").trigger(press);
            // just needed because my active element has a child element where the value should be placed in
                var id = document.activeElement.id.indexOf("-");
                if(id != -1){
                    var currentTf = sap.ui.getCore().byId(document.activeElement.id.split("-")[0]);
                    //append the value and set it (my textfield has a method setValue())
                    var currentTfValue = currentTf.getValue();
                    currentTf.setValue(currentTfValue + k);
                }
            }, 
```

# nhibernate - NHibernate 中的映射错误

> ID：773854
> 
> 赞同：0
> 
> 时间：2009-04-21T18:07:55.350
> 
> 标签：nhibernate

我正在尝试使用 NHibernate 连接到 Northwind 数据库。但由于某种原因，我无法加载实体类型。

这是我的实体类

```
public class Product
    {
        public virtual Int32 ProductId { get; set; }
        public virtual String Desc { get; set; }
    } 
```

这是我的映射

```
 <class name="Product" table="Products">
    <id name="ProductId" column="ProductId" type="Int32">
      <generator class="identity"></generator>
    </id>
    <property name="Desc" column="ProductName" type="String" length="60">
    </property>
  </class> 
```

我收到以下错误消息

无法加载实体：[OracleLinq.Product#12][SQL: SELECT product0_.ProductId as ProductId0_0_, product0_.ProductName as ProductN2_0_0_ FROM Products product0_ WHERE product0_.ProductId=?]

这是堆栈跟踪

```
 at NHibernate.Loader.Loader.LoadEntity(ISessionImplementor session, Object id, IType identifierType, Object optionalObject, String optionalEntityName, Object optionalIdentifier, IEntityPersister persister)
   at NHibernate.Loader.Entity.AbstractEntityLoader.Load(ISessionImplementor session, Object id, Object optionalObject, Object optionalId)
   at NHibernate.Loader.Entity.AbstractEntityLoader.Load(Object id, Object optionalObject, ISessionImplementor session)
   at NHibernate.Persister.Entity.AbstractEntityPersister.Load(Object id, Object optionalObject, LockMode lockMode, ISessionImplementor session)
   at NHibernate.Event.Default.DefaultLoadEventListener.LoadFromDatasource(LoadEvent event, IEntityPersister persister, EntityKey keyToLoad, LoadType options)
   at NHibernate.Event.Default.DefaultLoadEventListener.DoLoad(LoadEvent event, IEntityPersister persister, EntityKey keyToLoad, LoadType options)
   at NHibernate.Event.Default.DefaultLoadEventListener.Load(LoadEvent event, IEntityPersister persister, EntityKey keyToLoad, LoadType options)
   at NHibernate.Event.Default.DefaultLoadEventListener.OnLoad(LoadEvent event, LoadType loadType)
   at NHibernate.Impl.SessionImpl.FireLoad(LoadEvent event, LoadType loadType)
   at NHibernate.Impl.SessionImpl.ImmediateLoad(String entityName, Object id)
   at NHibernate.Proxy.AbstractLazyInitializer.Initialize()
   at NHibernate.Proxy.AbstractLazyInitializer.GetImplementation()
   at NHibernate.Proxy.Poco.Castle.CastleLazyInitializer.Intercept(IInvocation invocation)
   at Castle.DynamicProxy.AbstractInvocation.Proceed()
   at ProductProxy4c67cf5bf6e640ab82d8c21a90e2a62b.set_Desc(String value)
   at OracleLinq.Form1.Form1_Load(Object sender, EventArgs e) 
```

我做错什么了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-23T21:44:15.723

第二次尝试：

这是您的评论中的配置，只是为了便于阅读：

```
Configuration cfg = new Configuration(); 
cfg.Configure(); 
cfg.AddAssembly(typeof(Product).Assembly); 
ISessionFactory sessionFactory = cfg.BuildSessionFactory(); 

IDbConnection conn = new SqlConnection(@"Data Source=(local);Initial Catalog=Northwind;Integrated Security=SSPI;"); 
ISession session = sessionFactory.OpenSession(conn); 

Product product = (Product)session.Load(typeof(Product), 12); 
product.Desc = ""; 
```

很明显，NHibernate 有映射文件，它不可能生成查询。

可能是这样

*   **数据库不存在**：您已经检查过了。
*   **该表不存在**：打开一个 sql 控制台（使用相同的连接字符串）并将错误消息中的 sql 复制粘贴到其中。它有效吗？
*   **连接未打开**：见 bollow

我认为您需要自己打开连接。更好的是让 NHibernate 创建和管理连接。

尝试这个：

```
Configuration cfg = new Configuration(); 
cfg.Configure(); 
cfg.AddAssembly(typeof(Product).Assembly); 
ISessionFactory sessionFactory = cfg.BuildSessionFactory(); 

ISession session = sessionFactory.OpenSession(); 

Product product = (Product)session.Load(typeof(Product), 12); 
product.Desc = ""; 
```

连接字符串转到 nhibernate.cfg.xml

```
<property name="connection.provider">NHibernate.Connection.DriverConnectionProvider, NHibernate</property>
<property name="connection.connection_string">
 Data Source=(local);Initial Catalog=Northwind;Integrated Security=SSPI;
</property>
<property name="dialect">NHibernate.Dialect.MsSql2000Dialect</property> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T21:48:55.727

这实际上应该只是插入时的问题，但您也可能会遇到麻烦：

我认为 oracle 不支持“身份”，它是 SqlServer 功能（自动计数主键）。Oracle 使用序列。

尝试以下（检查序列的名称，必须存在）

```
<id name="ProductId" column="ProductId" type="Int32">
  <generator class="sequence">
    <param name="sequence">product_seq</param>
  </generator>
</id> 
```

或其他 id 生成器。Hilo 或 Guid 是有趣的选择。见[http://barchitect.blogspot.com/2008/07/nhibernate-generator-and-primary-key.html](http://barchitect.blogspot.com/2008/07/nhibernate-generator-and-primary-key.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T10:50:25.690

在您的堆栈跟踪中，我看到`ProductProxy4c67cf5bf6e640ab82d8c21a90e2a62b.set_Desc(String value)`，这意味着当您设置“Desc”属性时会发生错误。这是 NHibernate 尝试从数据库加载产品的时刻。

在您的数据库中，您没有提供给 Session.Load 的 id 的产品。如果你使用 Session.Get，你可能会得到 null。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-21T19:14:26.173

您的连接字符串是否默认为正确的数据库？检查它是否有 Initial Catalog= [DB name here]

# java - 将 a 属性设置为没有 Ant 的 maven.compile.classpath 包含的内容

> ID：773855
> 
> 赞同：11
> 
> 时间：2009-04-21T18:08:00.607
> 
> 标签：java, maven-2, properties, classpath

我想将我的 pom 中的一个属性设置为包含项目所有依赖项的类路径。ant 插件会做这样的事情，所以我知道这绝对是可能的。

我基本上想在我的 pom 中任何我喜欢的地方使用 ${maven.compile.classpath} 并让它“正常工作”。我不介意使用插件或其他任何东西来实现这一点。

非常感谢，

缺口

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-19T21:39:47.830

从 2.7 版开始，maven-dependency-plugin 现在可以为类路径设置一个属性。这是一个例子：

```
 <plugin>
      <artifactId>maven-dependency-plugin</artifactId>
      <version>2.8</version>
      <executions>
          <execution>
              <phase>generate-sources</phase>
              <goals>
                  <goal>build-classpath</goal>
              </goals>
              <configuration>
                <outputProperty>maven.compile.classpath</outputProperty>
                <pathSeparator>;</pathSeparator>
              </configuration>
          </execution>
      </executions>
  </plugin> 
```

如果您需要 Eclipse 支持，请访问我的更新站点：

[http://terraframe.github.io/m2e-maven-dependency-plugin/snapshots/](http://terraframe.github.io/m2e-maven-dependency-plugin/snapshots/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-22T11:54:11.810

我认为没有编写自己的 Maven 插件就可以做到这一点。也就是说，您可以使用[dependency:build-classpath](http://maven.apache.org/plugins/maven-dependency-plugin/build-classpath-mojo.html)获得类路径。那有用吗？

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-17T17:27:47.600

这是它的工作原理：

```
<plugin>
  <artifactId>maven-antrun-plugin</artifactId>
  <version>1.7</version>
  <executions>
    <execution>
      <id>define-classpath</id>
      <phase>process-resources</phase>
      <goals>
        <goal>run</goal>
      </goals>
      <configuration>
        <exportAntProperties>true</exportAntProperties>
        <target>
          <property name="maven.classpath" refid="maven.runtime.classpath"/>
        </target>
      </configuration>
    </execution>
  </executions>
</plugin> 
```

执行后，您可以使用`${maven.classpath}`属性。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-25T21:23:56.207

我支持dependency:build-classpath 建议。它目前不会将其放入属性中，但可以很容易地对其进行修改。（接受补丁）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-27T07:29:59.607

如果您需要将类路径生成为一个简单的 jar 列表（没有完整路径），您可以实现一个类似于下面示例中的插件。我需要使用“Class-Path”以外的属性在清单中添加类路径，因为我使用的是 Eclipse“JarRsrcLoader”（类似于[One-JAR](http://one-jar.sourceforge.net/)）之类的工具，并且我想创建一个 Manifest.MF 之类的这：

```
Manifest-Version: 1.0
Rsrc-Class-Path: ./ ssm-core-0.0.1-SNAPSHOT.jar commons-codec-1.9.jar 
 commons-io-2.4.jar ehcache-2.8.3.jar spring-beans-4.0.5.RELEASE.jar s
 sm-standalone-cryptlayer-0.0.1-SNAPSHOT.jar shiro-core-1.2.3.jar comm
 ons-beanutils-1.8.3.jar bcprov-jdk15on-1.50.jar javacsv-2.0.jar ssm-f
 ile-persistence-0.0.1-SNAPSHOT.jar spring-context-4.0.5.RELEASE.jar s
 pring-aop-4.0.5.RELEASE.jar aopalliance-1.0.jar spring-core-4.0.5.REL
 EASE.jar commons-logging-1.1.3.jar spring-expression-4.0.5.RELEASE.ja
 r slf4j-log4j12-1.7.7.jar slf4j-api-1.7.7.jar log4j-1.2.17.jar
Built-By: ctasso
Build-Jdk: 1.7.0_10
Class-Path: . 
```

所以，我定义了一个这样的 Maven 插件：

```
public void execute() throws MojoExecutionException, MojoFailureException {
        try {

            MavenArchiver mavenArchiver = new MavenArchiver();

            ManifestConfiguration config = new ManifestConfiguration();
            config.setAddClasspath(true);
            Manifest manifest = mavenArchiver.getManifest(project, config);

            String classPath = manifest.getMainAttributes().getValue("Class-Path");

            getLog().debug(String.format("Setting the classpath property %s to %s",classpathVarName,classPath));

            project.getProperties().put(classpathVarName, classPath);

        } catch (DependencyResolutionRequiredException e) {
            throw new MojoFailureException(e.getMessage());
        } catch (ManifestException e) {
            throw new MojoFailureException(e.getMessage());
        }

    } 
```

使用此插件，您可以定义一个包含类路径的 jar 列表的属性：

```
<plugin>
    <groupId>it.cineca.plugins</groupId>
    <artifactId>classpath-maven-plugin</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <executions>
        <execution>
            <id>set-classpath</id>
            <phase>package</phase>
            <goals>
                <goal>setcp</goal>
            </goals>
            <configuration>
                <classpathVarName>cineca.classpath</classpathVarName>
            </configuration>
        </execution>
    </executions>   
</plugin> 
```

并在任何你想要的地方使用这个属性，例如创建你的自定义 Manifest.MF：

```
<archive>
     <manifestEntries>
        <Rsrc-Class-Path>./ ${cineca.classpath}</Rsrc-Class-Path>
        <Class-Path>.</Class-Path>
        <Rsrc-Main-Class>it.cineca.cpd.starter.TestStarter</Rsrc-Main-Class>
        <Main-Class>org.eclipse.jdt.internal.jarinjarloader.JarRsrcLoader</Main-Class>
     </manifestEntries>
</archive> 
```

# c# - c#: 如何传递 linq-objects

> ID：773856
> 
> 赞同：5
> 
> 时间：2009-04-21T18:08:03.853
> 
> 标签：c#, wpf, linq-to-sql, datacontext

当显示我的主窗口时，我列出了来自 linq-to-sql 的对象：

```
 using (var context = new Data.TVShowDataContext())
 {
    Shows = new ObservableCollection<Data.Show>(context.Shows);
    listShows.ItemsSource = Shows;
 } 
```

现在，当我双击列表中的一个项目时，我想在新的用户控件中使用选定的对象：

```
 ShowEpList epList = new ShowEpList();
 epList.DataContext = (Data.Show)listShows.SelectedItem; 
```

现在，这会导致异常：

> System.ObjectDisposedException 未处理
> Message="无法访问已释放的对象。\r\n对象名称: 'DataContext 在 Dispose 之后访问。'。"
> Source="System.Data.Linq"
> ObjectName="Dispose 后访问的 DataContext。"

我想这是将列表绑定到节目季列表的结果，并且需要填充季列表或其他内容：

```
<ListBox Name="listSeasons" ItemsSource="{Binding Seasons}"/> 
```

现在，我想知道，这应该怎么做？我是否需要创建一个新的 DataContext 对象并再次检索选定的节目，或者是否可以使用新的数据上下文重新连接我的节目以填充季节列表？

我想我有点迷路了......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-21T18:14:53.667

不要在数据上下文中使用“使用”语句。请参考这篇文章：[Disposing DataContext](https://stackoverflow.com/questions/389822/when-should-i-dispose-of-a-data-context/389853)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-21T18:16:55.657

当您使用一个`using()`块时，它会调用`Dispose()`您放入其初始化程序中的任何内容（在本例中为您的上下文）。当一个 LINQ to SQL 上下文被释放时，用它创建的实体也是如此。我建议在您`Form`的上下文中创建一个实例变量，并将代码插入您的`For`m`Dispose(bool)`函数（它在`Designer.cs`文件中）以处理上下文。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T18:51:39.910

是否有原因您不能更长时间地维护 DataContext 对象，可能将其作为页面中的资源保存。通常，如果 DataContext 仅用于与当前页面相关的查询并且与可能是一个很好的折衷方案的页面一起处理，您通常不希望 DataContext 存在太久。

在 Datacontext 中表示的后端值快速变化的多用户环境中，您需要小心。但是我认为电视节目表不会保持快速变化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-04T16:11:54.467

实际上，除了数据上下文之外，还有正当理由使用这些对象。将对象传递回 Web 服务调用怎么样？

# ide - 是否有显示所见即所得评论的编辑器？

> ID：773865
> 
> 赞同：2
> 
> 时间：2009-04-21T18:11:11.613
> 
> 标签：ide, comments, wysiwyg

有没有人见过在代码中显示所见即所得注释的编辑器/IDE？我已经看到一些在单独的选项卡/窗口中显示元素的文档，但不与代码一起显示。例如，如果 JavaDoc 注释没有标签并且可以像普通文本文档中的片段一样进行编辑，那么它会更清晰、更容易编辑。

```
/**
 * Writes <code>Hello world!</code> to the <b>standard output</b>.
 * @seealso showGoodbye
 */
public static void showHello() { 
```

可能是这样的：

> /*
> 写入标准**输出**`Hello world!`。***参见：*** showGoodbye() */
> 
>  ***```
> public static void showHello() { 
> ```***

 ***但是，当然是可编辑的。

对于碰巧对 Eclipse、Netbeans 等开放 IDE 有一定知识/经验的任何人：实现这一点会不会太难？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-21T18:36:32.240

有一些边缘语言/IDE 将编程视图与存储分开，但这些主要是研究语言，主要处理代码，而不是注释。查找那里的一些东西的[可扩展编程](http://www.google.ca/search?q=extensible+programming)。总体思路是在后台将代码建模为 AST，并提供基于文本的界面来编辑/显示该模型。然后可以将该 AST 存储为任何内容，例如纯文本、s 表达式、XML，甚至是二进制表示。

从这种模型到真正美化评论并为您提供所见即所得界面的模型根本不会有太大的飞跃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T18:48:28.310

Emacs 有 preview-latex，它对 LaTeX 源文件进行这种视觉转换。我想应该可以为您的目的做同样的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T18:18:32.407

从来没有见过这样的。

然而，大多数都有一个“悬停”模式，当您将鼠标悬停在 javadoc 所引用的类/方法/变量上时，该模式将向您显示所见即所得的版本。

它可能是一个开关，但您可能会因为网页设计师很少使用所见即所得编辑器进行网页开发的相同原因决定不使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-09-14T09:24:52.820

这并不能完全回答您似乎要问的问题。但至于有效创建评论，您可能需要查看[Textmate](http://macromates.com/)。查看这个[使用和创建评论的视频演示](http://macdevelopertips.com/textmate/textmate-working-with-comments.html)。特别是“banner”、“head”和“todo”评论模式。此外，如果您需要特定格式结构的注释格式，您可能会创建一个自定义包，以便在您键入时促进注释格式。我假设您可以创建进入和转义序列以进入和退出评论模式，并在完成评论后让编辑器包装文本块。使 Textmate 在许多人中流行的原因是其捆绑系统的可扩展性。

# java - Eclipse SWT - Java 编程困境

> ID：773868
> 
> 赞同：2
> 
> 时间：2009-04-21T18:11:51.630
> 
> 标签：java, eclipse, swt

我正在编写一个 Eclipse 插件，它可以打开一个文件并显示文件中包含的所有图像。此图像显示是 GUI 应用程序的一部分。通过将每个图像与 SWT Canvas 小部件相关联来呈现每个图像。当我打开文件时，我获得了确定要显示的图像数量所需的所有信息。我认为一个接一个地创建所有 Canvas 对象并将每个 Canvas 对象存储在某种类型的数组（如数据结构）中是有意义的。我打开的每个文件都有不同数量的图像要显示。我决定使用`ArrayList`.

我进行如下操作：我为每个图像创建一个 Canvas 对象，并将所有 Canvas 对象存储在一个`ArrayList`. 这就是问题所在：每个 Canvas 对象都有一个`PaintListener`和`MouseListener`与之关联 - 用于调整大小并检测图像是否已被“点击”。我在“for 循环”中创建所有 Canvas 对象 - 其中包括为每个 Canvas 对象分配一个`PaintListener`和，如下所示：`MouseListener`

`

```
//
// Assume the following ArrayLists have been defined:
// myCanvases, myImages, and myFrames
//

for (int i = 0; i < numberOfImages; i++) {

    canvas = new Canvas(getMyComposite(), SWT.BORDER | 
        SWT.NO_MERGE_PAINTS | SWT.NONE );

    canvas.setLayoutData(getMyGridData());

.
    .
    .

    canvas.addPaintListener(new PaintListener() {
    public void paintControl(final PaintEvent event) {
        if (myImages.get(i) != null) {
                myImages.get(i).dispose();
                event.gc.drawImage(mySceneImages.get(element), 0, 0);
    }
    }
});

    currentCanvas.addMouseListener(new MouseAdapter() {
    @Override
    public void mouseUp(MouseEvent event) {
        getVideo().setCurrentFrame(myFrames.get(i).getFrameNumber());
                }
    });

    canvas.setVisible(true);

        myCanvases.add(i, canvas);

} // End for (int i = 0; i < numberOfScenes; i++) 
```

`

**问题**：变量 'i' 用于确定在`PaintListener`and中的不同 ArrayLists 中访问哪个元素`MouseListener`。请注意，我在这里使用“i”进行说明。我意识到在“for循环”中定义的变量“i”不能在监听器的内部类中使用。无论如何......当侦听器收到一个事件时，我用来尝试访问 ArrayList 的特定元素的任何变量都**包含它的当前值，而不是定义侦听器时的值。**

我怎样才能在 Java 中解决这个问题？我真正需要的是每个 Listener 定义中的代码，基本上相当于：

`

```
myCanvases.get(7); // or whatever the for loop iteration is for that specific object);

// Not

myCanvases.get(i); // - which will contain the present value of i; 
```

`

当监听器执行时。

任何想法，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-21T18:22:05.940

您可以将对象添加到 PaintListener 的构造函数中。

例如

```
class MyPaintListener implements PaintListener
{
 Image image;
 MyPaintListener(Image image)
 { 
    this.image = image;
 }
 void paintControl(...)
 {  
     do stuff with image.
 }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T18:28:53.663

使用内部类而不是匿名内部类并将对象传递给构造函数。您在 anon 类中使用的变量未存储在对象中，因此在调用时它将在外部类中引用它的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T18:26:51.420

你不能只使用一个临时的最终变量：

```
final JFrame f = new JFrame();
f.setLayout(new FlowLayout());
for (int i = 0; i < 10; i++) {
  final int curIdx = i;
  JButton btn = new JButton("Btn: " + i);
  btn.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent e) {
      JOptionPane.showMessageDialog(f, "Item: " + curIdx);
    }
  });
  f.add(btn);
}
f.pack();
f.setVisible(true); 
```

侦听器在声明时都会根据 var 的值触发事件，这听起来像是您想要的。

# python - Python +套接字

> ID：773869
> 
> 赞同：5
> 
> 时间：2009-04-21T18:12:19.177
> 
> 标签：python, sockets, ports

我必须创建连接服务器<=>客户端。我使用此代码：服务器：

```
import socket

HOST = 'localhost'
PORT = 50007      
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.bind((HOST, PORT))
s.listen(1)
conn, addr = s.accept()
print 'Connected by', addr
while 1:
    data = conn.recv(1024)
    if not data: break
    conn.send(data)
conn.close() 
```

客户：

```
import socket

HOST = 'localhost'   
PORT = 50007             
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.connect((HOST, PORT))
s.send('Hello, world')
data = s.recv(1024)
s.close()
print 'Received', repr(data) 
```

它工作正常！但是如果服务器是在没有路由器的计算机上创建的。如果你有路由器，在创建服务器之前你应该在你的调制解调器上打开 50007 端口。如何在不启用端口的情况下在所有计算机上创建服务器？Torrent 客户端以某种方式做到这一点。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-21T18:21:56.893

这个问题有点令人困惑，但我会尽力提供帮助。基本上，如果服务器机器上的端口 (50007) 被防火墙阻止，您将无法从客户端与它建立 tcp 连接。这就是防火墙的目的。许多协议（例如 SIP 和 bittorrent）确实使用防火墙和 NAT 导航策略，但这是一个复杂的主题，您可以[在此处获得更多信息](http://www.dessent.net/btfaq/#ports)。您会注意到，要有效地使用 bittorrent，您必须为 NAT 启用端口转发并为防火墙取消阻止端口范围。此外，bittorrent 使用 tcp 连接进行大多数数据传输。这是外卖：

> 首先，请注意 BitTorrent 程序必须建立两种类型的连接：
> 
> *   到跟踪器的出站 HTTP 连接，通常在端口 6969 上。
> *   与对等计算机的入站和出站连接，通常在端口 6881 及以上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-21T18:26:43.857

很难理解你的问题...

> (...) Torrent 客户端以某种方式做到这一点。

只有当路由器——互联网网关设备 (IGD)——支持[uPNP 协议](http://en.wikipedia.org/wiki/Universal_Plug_and_Play)时，Torrent 客户端才能执行此操作。你的问题有趣[的部分是关于 NAT traversal 的部分](http://en.wikipedia.org/wiki/Universal_Plug_and_Play#NAT_traversal)。

# php - output_buffering 和 php.ini 的问题

> ID：773876
> 
> 赞同：1
> 
> 时间：2009-04-21T18:13:27.647
> 
> 标签：php, output-buffering

尝试在此[站点](http://www.ucuzhizmet.com/)（用户：polopolo，pass：samara）登录时，结果是一个空白页面。我知道问题在于php.ini 文件中的标头和*ouput_buffering的发送。*我在另一台主机上遇到了同样的问题，但是当我更改*output_buffering= On*时问题得到了解决。它在当前主机上不起作用，我想知道为什么？有什么建议么？

-当前站点的[phpinfo](http://www.ucuzhizmet.com/phpinfo.php)。

* * *

编辑：问题解决了。我对代码进行了逆向工程，并在发送标头之前的 php 结束标记之后发现了一些额外的空格。代码不是我写的，我本能地忽略了这个选项，因为整个系统已经在另一台服务器上运行。但我的同事做了一些我不知道的改变……吸取的教训：团队合作很重要，不要让任何人替你思考。对我来说仍然是一个谜，在尝试一切都显示错误之后，尤其是“无法修改标题”，它们没有正确显示。我做了你建议我做的一切——显示错误，记录它们等等......无论如何，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-22T04:49:51.143

据推测，您登录后立即点击的页面会进行重定向。

进行重定向需要在响应中输出 HTTP 标头。问题是，如果 PHP 已经开始输出文档的*正文*，它就不能输出标题，因为它们的标题在正文开始时就结束了。

*输出缓冲阻止 PHP 输出文档正文*的任何​​部分，直到输出缓冲区被刷新（或 PHP 退出）。这允许您随时输出标题。

现在，如果打开输出缓冲解决了自己站点/服务器上的问题，但没有解决另一个问题，这清楚地表明它实际上不是同一个问题 - 您遇到了不同的问题。

您应该记录 PHP 错误，因此请检查您的 PHP 错误日志。如果（且仅当）您在受限制的仅限开发人员的站点（您不是）上查看此内容，您可以在 PHP 配置中打开 display_errors，这将在页面呈现时显示错误。这通常被认为是可公开访问的服务器上的不安全设置，因为攻击者可能会尝试并导致错误消息显示一些私人信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T18:19:29.503

我不是专家，我无法理解输出缓冲与任何事情有关，也许代码中有一些错误？

您能否创建一个包含以下内容的 .htaccess 文件：

```
php_flag display_errors on
php_value error_reporting 30719 
```

把它放在那个站点的根目录下，然后重新登录试试看有没有输出错误？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-09-09T05:29:26.770

我在做一个项目时也遇到了同样的问题。我稍后通过在 php.ini 配置文件中设置 output_buffering = 4096 来修复它，它在 localhost 中运行良好，但是当我将它放在主机服务器上时，我再次收到此错误。我不确定如何在主机服务器上使用我自己的 php.ini 配置文件。欢迎任何建议...

# sql - 中止执行 MySQL 脚本的方法（可能引发错误）？

> ID：773889
> 
> 赞同：21
> 
> 时间：2009-04-21T18:15:38.030
> 
> 标签：sql, mysql, exception, fast-fail

我需要为 MySQL 编写设置脚本（通常使用 mysql 控制台中的 'source [file]' 运行），这些脚本部分依赖于现有数据，并且环境存在差异，这意味着有时脚本确实会失败。一个常见的情况是带有 select（定位 id）的 'SET' 语句找不到任何东西；控制台将值设置为 NULL。在这种情况下，我希望脚本失败；我听说这将通过引发错误（与其他数据库）来完成。然而，似乎 MySQL 没有办法做到这一点。

在这种情况下有没有好的方法来强制失败？现在的情况是，当插入尝试使用 null 时，更新将失败，但即使这样也不会终止脚本本身。理想情况下，一旦遇到问题，它就会失败并终止。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-08-14T00:32:02.887

我遇到了同样的问题，GUI 不适合我。这是我解决它的方法：

```
 DELIMITER $$

    DROP FUNCTION IF EXISTS sfKillConnection $$

    CREATE FUNCTION sfKillConnection() RETURNS INT
    BEGIN

        SELECT connection_id() into @connectionId;
        KILL @connectionId;
        RETURN @connectionId;
    END $$

    DELIMITER ; 
```

它是一个函数而不是一个过程，因此可以在这样的脚本中调用它：

```
select if(@error, sfKillConnection(), 0); 
```

您可能需要使用该`--disable-reconnect`选项启动 mysql 客户端。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-04-26T07:45:25.637

我认为您遇到的是 MySQL 控制台的限制。给定一个语句列表，MySQL 控制台会执行每一个语句，而不考虑生成任何错误。即使您实现了之前评论中提到的一些引发错误的建议，当遇到此类错误时，MySQL 控制台也不会停止执行。

我假设您没有资源将脚本语言应用于可以为您执行 SQL 并处理错误的问题。我认为在这种情况下，您只需要一个比 MySQL 控制台更强大的工具。

如果我正确理解您的问题，[MySQL Administrator会满足您的需求。](http://dev.mysql.com/downloads/gui-tools/5.0.html)如果您设置 MySQL 连接并连接到数据库，则“工具”菜单中有两个可用的工具。正常的 MySQL 控制台在那里，但您也有 MySQL 查询浏览器。

如果您打开查询浏览器，您将获得一个不错的 MySQL 数据库 GUI 视图。File -> Open Script 打开你的 SQL 脚本，然后使用 Execute 按钮。

你会得到一个不错的进度条，更重要的是从它的声音来看，如果查询失败，脚本执行会暂停并突出显示失败的查询。您可以选择跳过它并继续进行，甚至可以手动修改数据并从脚本下方的其他位置启动。

一旦我发现并尝试了管理员，我几乎立即放弃了 MySQL 控制台。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-03-28T21:19:23.173

MySQL Workbench 现在取代了 MySQL Administrator。

使用“切换语句失败后是否应继续执行 SQL 脚本”

![切换语句失败后是否应继续执行 SQL 脚本](https://i.stack.imgur.com/PIK18.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-09-16T11:01:04.540

这是一种仅在特定版本到位时才执行升级命令的方法。

这很丑陋，但这是我对 mysql 5 的所有建议。

```
DELIMITER $$  
DROP FUNCTION IF EXISTS `Upgrade_Build`$$    
CREATE FUNCTION `Upgrade_Build`(bversion INT) RETURNS varchar(30)
BEGIN 
  IF bversion = (SELECT MIN(`db_version`) FROM `system`) THEN 
    UPDATE `pages`
      SET `component_parameters` =
        REPLACE(`component_parameters`,'folderviewer_','folder_viewer.'); 
    UPDATE `system`
      SET `db_version` = bversion+1;
    return CONCAT('Success: ',bversion,' > ',bversion+1); 
  ELSE 
    return CONCAT('Failed - Version is ',(SELECT MIN(`db_version`) FROM `system`)); 
  END IF; 
END$$
DELIMITER ; 
```

要使用它，请执行以下操作：

```
SELECT Upgrade_Build(1327); 
```

如果当前版本是 1327，您会看到类似这样的内容：

**成功：1327 > 1328**

再次运行它，您将看到：

**失败 - 版本是 1328**

希望这对某人有用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-24T02:35:52.183

看起来[`KILL QUERY`](http://dev.mysql.com/doc/refman/5.0/en/kill.html)应该做你需要的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-03-27T10:11:25.247

对于仍在寻找的任何人，您可以要求 MySQL 终止连接，甚至是当前连接：

```
kill connection_id(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-11-20T06:21:35.027

这是一种低额头方法：

我需要确保`@search_admin_realname`与表中的记录相对应`profiles`；如果没有，我想中止我的脚本。

所以我这样做了：

```
select @search_admin_id:= userid
from profiles
where realname=@search_admin_realname
;
# test that @search_admin_id is not null; 
# if it is, then the insert will fail and script will abort.
create temporary table t_search_admin_id ( search_admin_id mediumint( 9 ) not null );
insert into t_search_admin_id ( search_admin_id ) values ( @search_admin_id ); 
```

唯一的缺点是我不能真正自定义错误消息:(

# php - 使用未知数量的参数调用动态函数

> ID：773897
> 
> 赞同：0
> 
> 时间：2009-04-21T18:17:36.030
> 
> 标签：php

不确定如何描述这一点，但这里有..

我有一个大型 PHP 函数库，我想通过某种 api 接口公开它。

例如，这个查询字符串：

```
api.php?function=myFunction&param1=xxx&param2=xxx& 
```

会翻译成这样：

```
$ret = myFunction( $param1, $param2 ); 
```

.. 而这个查询字符串 ..

```
api.php?function=myFunction&param2=xxx&param1=xxx& 
```

会翻译成这样：

```
$ret = myFunction( $param1, $param2 ); 
```

请注意，我希望必须依赖查询字符串来放置查询中所需的参数，并按所需的顺序。

这是可行的吗？我有一些*可能*可行的想法，但我想我会把它放在这里，也许可以从 PHP 大师那里得到一些更好的想法。

谢谢 -

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T18:19:58.270

使用[`call_user_func_array`函数](http://docs.php.net/call_user_func_array)调用带有参数数组的函数。

如果你真的想从查询中提取参数，你可以使用这样的东西：

```
$params = array();
foreach ($_GET as $name => $val) {
    if (preg_match('/^param[1-9]\d*$/', $name)) {
        $param[$name] = $val;
    }
}
ksort($params); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T19:03:34.920

只需将 $_GET 传递给您的函数。在您的函数中，您可以查找所需的参数。或创建第二个函数

```
function getFunctionCall($getParams)
{
    $function = $getParams['function'];
    returnArray['functionName'] = $function;

    $getArraySize = count($getParams);
    for(i = 1; $i < $getArraySize; $i++)
    {
        $param = $getParams['param'. $i];
        // do any cleaning you need on $param i ;
        $param = urldecode($param);
        returnArray['params']['param'.$i] = $param;
    }
    return $returnArray;

} 
```

现在你有一个返回数组，你可以这样做：

```
$mystuff = getFunctionCall($_GET);

$functionString = $mystuff['functionName'] . '("' . implode($mystuff[params], '","') . '")"; 

$myResult = eval($functionString); 
```

但是，做这些事情要非常小心... functionName 可能是任何旧事物，包括 fopen 的、fwrites 等...创建一个“已批准的函数”列表并在之前检查函数名称可能是个好主意允许它被调用。此外，我将参数作为字符串放在 eval 中的方式非常危险。您可以在传递的参数中转义字符串。最好做一个 for 循环并让它评估变量名而不是变量内容作为字符串。

最后，如果您确实知道函数的参数数量，那么使用它会更安全

```
$results = $mystuff['functionName']($mystuff[params][param1]); 
```

等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T18:19:38.647

将您的参数收集到一个数组中并将其传递给您的函数。

# sql-server - 是否可以对 SQL Server 数据库进行密码保护？

> ID：773899
> 
> 赞同：4
> 
> 时间：2009-04-21T18:17:50.523
> 
> 标签：sql-server, security

有没有办法在不使用商业第三方工具的情况下对 SQL Server 数据库进行密码保护？什么可以帮助我实现这一目标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-21T18:18:51.127

在 SQL Server 2008 中，您有透明的数据加密，允许您设置密码和证书，这样如果没有正确的密码/证书，就无法恢复或附加 MDF 和备份。

这里有更多信息：[SQL 2008 加密](http://msdn.microsoft.com/en-us/library/cc278098.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-21T18:21:24.103

是的。您可以保护它免受除服务器管理员之外的所有人的影响。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T18:19:38.413

您可以通过授予可以访问它的帐户的权限以及他们可以看到的对象和可以执行的操作来保护它。但是，您的问题还不是 100% 清楚。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-21T20:18:53.117

MSSQL 中的数据库不仅是表查询和重新设置的存储库。它还具有存储过程、触发器、作业和比简单的即 Access 数据库更多的组件。

除了“登录”（类似于用户）之外的所有这些对象都通过 ACL（访问控制列表）访问，您不仅可以将用户添加到数据库中的每个对象，还可以将这些用户的权限添加到数据库中的每个对象。

根据服务器的配置，可以通过两种方式创建登录：使用 Windows 身份验证或 SQL Server 身份验证方法，您需要手动创建它们。

现在，如果您正在谈论保护物理文件，一种方法是在备份时进行，当然只有一个密码。

# java - 我可以使用什么 Java 库在图像中搜索具有容差的颜色？

> ID：773901
> 
> 赞同：2
> 
> 时间：2009-04-21T18:18:21.847
> 
> 标签：java, image-processing

我想找到一个 Java 库，它允许我在具有容差的图像中搜索颜色。最好快点。我知道如果我必须自己编写它，我会怎么做，而且这并不是很困难，但我希望找到一个具有除该原理之外的功能的库。我还希望能够：

*   在图像中查找具有容差的另一个图像，并确定图像与函数找到的任何内容的匹配程度
*   指定在图像中搜索颜色或图像的方式（例如向外螺旋方式或其他方式）
*   查找并返回一个字符串，该字符串包含它认为是图像中特定位置的文本
*   （琐碎）在显示器上查找颜色和图像而不是图像（我知道我可以从显示器中制作图像，但这会有所帮助）

我真正想要的是 SCAR Divi，该程序以在 Runescape 作弊而闻名，但它采用 Java 形式，因此我可以在我的项目中使用它，而且我不觉得脏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-01T18:41:15.860

[ImageMagick](http://www.imagemagick.org/)是一个强大的图像处理库，具有多种语言的绑定。[JMagick](http://sourceforge.net/projects/jmagick/)是 Java 风格的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T13:27:39.573

你问题的第一部分不是很容易清楚。在图像的任何像素处，您都有一种颜色，您可以使用[BufferedImage.getRGB(x,y)](http://java.sun.com/javase/6/docs/api/java/awt/image/BufferedImage.html#getRGB(int,%20int))获得。生成的 int 包含 RGB 值（您需要做一些工作才能解压它们）。最后你会得到三个 8 位值：一个简单（但有效）的方法来比较颜色和容差，就是在 3D r,g,b 空间中寻找两种颜色之间的欧几里德距离，即 `d = ((r1-r2)^2+(g1-g2)^2(b1-b2)^2)^0.5`；您将考虑“相似”的两种颜色，其 d 小于给定阈值。

> 在图像中查找具有容差的另一个图像，并确定图像与函数找到的任何内容的匹配程度

要有效地做到这一点非常困难：你想容忍扭曲吗？

> 指定在图像中搜索颜色或图像的方式（例如向外螺旋方式或其他方式）

你什么意思？这是非常不清楚的。

> 查找并返回一个字符串，该字符串包含它认为是图像中特定位置的文本

您可能会为此功能寻找 Java OCR 库，但希望仅在非常干净的文本上才能获得良好的结果。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-12-15T09:01:45.693

Opencv怎么样？

# php - 在 JSP 中加密 Sting... 在 PHP 中解密

> ID：773912
> 
> 赞同：0
> 
> 时间：2009-04-21T18:20:37.957
> 
> 标签：php, jsp, encryption

我必须在 php 中创建一个握手页面，该页面将获取一个为 Java/JSP 中的函数加密的查询字符串，并在应用程序中使用 PHP 对其进行解密。

我发现这是一个很好的起点[http://propaso.com/blog/?cat=6](http://propaso.com/blog/?cat=6)但它在 PHP 中加密并在 PHP 中解密，这与我需要做的相反。

任何人都知道要使用的 PHP/JSP 中的常用密码。从上面的链接看来，CBC 是一个答案，代码如下：

PHP密码/模式：

```
$cipher     = "rijndael-128";
$mode       = "cbc"; 
```

和 JSP 密码：

```
Cipher cipher = Cipher.getInstance("AES/CBC/NoPadding"); 
```

任何人都知道一个很好的链接来帮助我扭转这个过程并在 JSP 中加密并在 PHP 中解密。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T19:07:40.433

您需要有一个对于给定消息不可预测的 IV。对 IV 进行硬编码使其可预测。所以你需要设计一些方法来传递带有密文的 IV。与密钥不同，IV 不必保密。

分组密码对固定大小的明文块进行操作。如果您没有足够的纯文本输入，则必须以这样一种方式填充它，以便接收者可以将填充与数据区分开来。链接的示例完全忽略了这一点，这是一个错误。如果`CipherOutputStream`使用 a，部分最终块将从密文中静默截断。如果`Cipher`直接使用对象，部分阻塞将导致`doFinal`方法引发异常。相反，请使用 PKCS5Padding 之类的东西。

一个合适的 Java 示例应该是这样的：

```
SecretKey secret = new SecretKeySpec(key, "AES");
Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
cipher.init(Cipher.ENCRYPT_MODE, secret);
AlgorithmParameters param = cipher.getParameters();
/* In addition to ciphertext in "cos", recipient needs IV. */
byte[] iv = param.getParameterSpec(IvParameterSpec.class).getIV();
CipherOutputStream cos = new CipherOutputStream(output, cipher);
byte[] buf = new byte[2048];
while (true) {
  int n = input.read(buf, 0, buf.length);
  if (n < 0)
    break;
  cos.write(buf, 0, n);
}
cos.flush(); 
```

JSP在哪里接收要加密的明文？您希望 JSP 如何格式化其输出（包括 IV）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T18:52:08.223

[http://schneimi.wordpress.com/2008/11/25/aes-128bit-encryption-between-java-and-php/](http://schneimi.wordpress.com/2008/11/25/aes-128bit-encryption-between-java-and-php/)

找到答案谢谢

# sql-server - 使用 Visual Studio 创建 SQL 数据库并添加到项目

> ID：773913
> 
> 赞同：5
> 
> 时间：2009-04-21T18:21:05.820
> 
> 标签：sql-server, database, visual-studio, visual-studio-2005

当我转到 Visual Studio 2005 中的“添加新项目”窗口并尝试添加 SQL 数据库时，它会挂起一段时间，然后出现以下错误：

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：TCP 提供者，错误：0 - 由于目标机器主动拒绝，无法建立连接。）

我可以使用 SQL Server Management Studio 连接到 localhost（默认实例）就好了，但 Visual Studio 必须尝试连接到另一个实例（不再运行）。如何更改它尝试连接的实例以添加和使用数据库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-21T18:22:39.247

听起来您可能正在尝试添加 SQL Server Express 数据库的实例，但您可能没有安装或打开该服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-02T06:03:22.057

你能解决这个问题吗？我只是在同一个问题上花了 3 个小时，不能确定解决方案是什么，但它确实有效。我的错误是当我将 Visual Studio“升级”到数据库版本时本地 SQL Server 实例没有运行。未安装 SQLExpress。

启动数据库后，当我尝试在 Visual Studio 中打开现有数据库项目或创建新数据库项目时，最初遇到与您相同的错误。我用谷歌搜索了很长时间，尝试了设计时验证数据库设置的服务器、实例、主机、别名和其他名称的所有组合，但均无济于事。它不会连接。我什至重新安装了 Visual Studio，但也没有用。

我认为可能起到作用的是[这篇 msdn 文章](http://msdn.microsoft.com/en-us/library/aa833159(VS.80).aspx)中的注释- 在更改此设置后卸载项目。我最终清除了该字段（对于默认实例），卸载了项目，重新加载了它，并且中提琴，我在做生意。现在该睡觉了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T18:23:38.277

展开服务器节点并删除旧服务器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-21T18:38:13.250

您是否收到指向... [http://go.microsoft.com/fwlink/?LinkId=49251](http://go.microsoft.com/fwlink/?LinkId=49251)的警告对话框 ？我的 VS2005 开发机器有 SQL Server Developer 版本，但没有 SQL Express，当我尝试添加新的 SQL 数据库时出现该错误

# language-agnostic - RTS 车辆网格运动

> ID：773923
> 
> 赞同：1
> 
> 时间：2009-04-21T18:22:45.783
> 
> 标签：language-agnostic

我不知道如何实现良好的 2D 网格移动。像士兵这样的单位很容易实现移动，但我不知道如何优雅地转动车辆。动作应该像 C&C Red Alert 中的（不是 3，因为它是 3D，我只想要 2D）。

编辑：我不问任何代码，也没有链接到寻路算法，因为它们很容易找到。但网格运动不是。我不知道如何“确切地”从一个瓷砖移动到另一个瓷砖，尤其是对角线移动（即使它比正交移动“更长”移动）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T19:39:13.057

请注意，我正在编造这个，但它应该可以正常工作。

给定源坐标和目的地坐标，只需在两点之间“画一条线”，然后沿着该线移动车辆。

随着车辆在更精细的图形表面上移动，您可以确定该单元“真正”在哪个方格中（例如通过简单的坐标映射）。

如果一个单元在一个方格中很重要，那么当该单元“停止”时，它可以滑行到下一个方格，它可以完全包含它（即，如果它已经离开方格 A，它会继续移动到 B 甚至车辆是“停止”）。

计算两点之间的航向以确定车辆的方向。

如果您的车辆只有 8 个方向，那么您可以将它们指向下一个增量方形目的地，而不是最终目的地。这对于慢速行驶的车辆来说看起来不错，但对于快速行驶的车辆来说有点有趣。

参考这个[画线算法](http://en.wikipedia.org/wiki/Bresenham%27s_line_algorithm)来帮助计算平方。请注意，当然，这些都与寻路无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T18:28:53.303

一种方法是将车辆的转弯半径以每转的网格单位表示，并使用 Bresenham 圆算法在每次转弯时将它们逐步移动到下一个相邻的网格单位

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T18:29:09.857

Eric Lippert的这个由[4 部分组成的系列应该会有所帮助：](http://blogs.msdn.com/ericlippert/archive/tags/AStar/default.aspx)

*   [在 C# 3.0 中使用 A* 进行路径查找，第 1 部分](http://blogs.msdn.com/ericlippert/archive/2007/10/02/path-finding-using-a-in-c-3-0.aspx)
*   [在 C# 3.0 中使用 A* 进行路径查找，第二部分](http://blogs.msdn.com/ericlippert/archive/2007/10/04/path-finding-using-a-in-c-3-0-part-two.aspx)
*   [在 C# 3.0 中使用 A* 进行路径查找，第三部分](http://blogs.msdn.com/ericlippert/archive/2007/10/08/path-finding-using-a-in-c-3-0-part-three.aspx)
*   [在 C# 3.0 中使用 A* 进行路径查找，第四部分](http://blogs.msdn.com/ericlippert/archive/2007/10/10/path-finding-using-a-in-c-3-0-part-four.aspx)

我知道你没有指定 C#，但他提出的一般算法是合理的。

# c# - 如何访问批处理文件？

> ID：773924
> 
> 赞同：0
> 
> 时间：2009-04-21T18:23:09.260
> 
> 标签：c#, .net

我正在为 java 开发一个文本编辑器，具有语法高亮和智能感知等功能。

我面临两个问题。一个我不知道如何在所需索引处读取一行。以及其他如何使用java包的批处理文件，以便编写的代码可以编译。

如果有人可以帮助我，我将不胜感激。提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-25T00:55:35.427

1.  File.ReadAllLines(path) 给你一个字符串[]，你可以访问特定的行。
2.  Process 可用于执行批处理。可以使用 ProcessStartInfo 对象传递使用的参数。

# visual-studio - 需要来自 VS2005 的合并模块

> ID：773926
> 
> 赞同：5
> 
> 时间：2009-04-21T18:24:09.197
> 
> 标签：visual-studio, merge-module

我正在尝试在我的设置项目中使用合并模块。但似乎其中有一些依赖项需要几个合并模块的早期版本（我有 VS2008）。

我需要来自 VS2005 的这些文件：

```
Microsoft_VC80_ATL_x86.msm 
Microsoft_VC80_CRT_x86.msm 
Microsoft_VC80_MFC_x86.msm

policy_8_0_Microsoft_VC80_ATL_x86.msm
policy_8_0_Microsoft_VC80_CRT_x86.msm
policy_8_0_Microsoft_VC80_MFC_x86.msm 
```

谁能指点我一个可以下载它们的地方或制作一个 zip 并上传到[http://www.zshare.net/](http://www.zshare.net/)并提供链接？

我确信它们也随 Visual Studio 2005 Express 一起提供，但我也找不到在哪里下载它。

/P

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-21T18:42:23.833

我不相信合并模块分布在 Visual Studio 之外，因此您需要安装它才能访问它们。如果微软没有在 VS 之外分发这些，我会警惕要求其他人这样做，因为这可能违反了他们的许可协议。

安装 Visual Studio 2005 SP1 Express 后，您将能够在以下位置找到模块：

```
%ProgramFiles%\Common Files\Merge Modules\Microsoft_VC80_CRT_x86.msm 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-11-28T05:22:21.440

我相信当您将 2005 合并模块添加到您的安装项目中时，这些会自动添加。这就是它为我所做的。

合并模块位于名为 cr_net_2005_mergemodules_mlb_x86.zip 的文件中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-26T19:20:34.237

当您在要安装的功能中安装 Visual Studio 2005 时，您必须确保检查：

*   重新分发应用程序的工具
    *   可再发行合并模块

# oracle - 是否有可能知道从哪个包调用了程序？

> ID：773928
> 
> 赞同：1
> 
> 时间：2009-04-21T18:24:28.743
> 
> 标签：oracle, plsql, stack, packages

假设我有 2 个包：A 和 B。

在包 A 中，我调用包 B 中的过程。

在包 B 的过程中，是否有可能知道过程已从包 A 中调用？

* * *

非常感谢您提供这些信息。这很有启发性。

我很感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-22T01:31:37.657

您可以使用`who_called_me`从 Oracle 提供的包中调用的过程`OWA_UTIL`

[http://download.oracle.com/docs/cd/B25221_04/web.1013/b25598/psutil.htm#i1006497](http://download.oracle.com/docs/cd/B25221_04/web.1013/b25598/psutil.htm#i1006497)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-21T18:41:22.010

您可能能够解析该`DBMS_UTILITY.FORMAT_CALL_STACK()`函数​​返回的文本。

编辑：我尝试创建一些测试包。我在 XX_TESTA 包中有一个过程调用 XX_TESTB 包中的另一个。XX_TESTB 中的过程只是将返回的文本打印`DBMS_UTILITY.FORMAT_CALL_STACK()`到输出。这是结果文本：

```
----- PL/SQL Call Stack -----
  object      line  object
  handle    number  name
416fe0e68         5  package body APPS.XX_TESTB
415182f10         5  package body APPS.XX_TESTA
416e9b448         3  anonymous block 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-21T19:16:34.280

您可以将名称作为参数传递吗？

使用....

```
$$PLSQL_UNIT 
```

来自： [http ://awads.net/wp/2006/08/03/heres-a-quick-way-to-get-the-line-number-in-plsql](http://awads.net/wp/2006/08/03/heres-a-quick-way-to-get-the-line-number-in-plsql/)

```
EDDIE@XE> CREATE OR REPLACE PACKAGE my_pkg
  2  IS
  3     PROCEDURE my_proc;
  4  END;
  5  /

Package created.

EDDIE@XE> CREATE OR REPLACE PACKAGE BODY my_pkg
  2  IS
  3     PROCEDURE my_proc
  4     IS
  5     BEGIN
  6        DBMS_OUTPUT.put_line ('Line number: ' || $$plsql_line);
  7        DBMS_OUTPUT.put_line (   'Unit: '
  8                              || $$plsql_unit
  9                             );
 10     END;
 11  END;
 12  /

Package body created.

EDDIE@XE> exec my_pkg.my_proc;
Line number: 6
Unit: MY_PKG 
```

# html - 嵌套元素上的 CSS 和覆盖样式

> ID：773933
> 
> 赞同：12
> 
> 时间：2009-04-21T18:25:28.070
> 
> 标签：html, css, styles

[这是由此处](https://stackoverflow.com/questions/773791/css-issue-asp-net-calendar-picker/)提出的另一个问题提出的，但我认为这可能具有“最佳实践”方法。

在设计网站时，设计师很可能会为网站中的所有元素组合一组通用样式。（Divs/Spans/H1/H2s 中文本的标准字体）

在表格的情况下，他们可能还定义了默认的站点范围边界和对齐方式......例如

```
Table
{
   border: dashed 1px #333333;
   padding: 2px;
} 
```

但是，如果您在表中有一个表（来自[RSolberg](https://stackoverflow.com/users/55747/rsolberg)的示例，DataGrid 中的 AJAX 日历），那么您的父表和嵌套表都将继承这些样式。（假设这就是为什么它们被称为级联）

我的问题是将样式应用于大多数元素而不让子元素也继承它们的最佳实践是什么。

您是否应该只提供一个覆盖来撤消您应用的任何样式。

例如

```
Table
{
   border: dashed 1px #333333;
   padding: 2px;
}

Table Table
{
   border: solid 0px #000000;
   padding: 0px;
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-04-21T18:43:20.960

如果你有这样的 HTML：

```
 <html>
  ...
  <body>
    <div>
      <div>
      <div>
    <div>
  </body>
</html> 
```

您可以使用`div`子*选择器*（`body`*`>`) like this:``*

 *````
body > div
{
  border:solid 1px orange;
} 
```` 

`The nested div`不会有边框。

欲了解更多信息，请访问：[http://www.w3.org/TR/CSS2/selector.html#child-selectors](http://www.w3.org/TR/CSS2/selector.html#child-selectors)。

请注意，Internet Explorer 6 不支持*子选择器*。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-21T18:30:48.043

是的。“table table”规则将覆盖“table”规则，因为它[更具体](http://www.w3.org/TR/CSS/cascade.html#specificity)。您所描述的是使最外层表具有一种样式并为内部表具有另一种样式的最佳方法-假设这两个表都没有允许您使用更多语义选择器的类或ID。

在实践中，您更有可能需要将此技术与列表一起使用。

```
ol { list-style: upper-roman }
ol ol { list-style: upper-alpha }
ol ol ol { list-style: lower-roman }
ol ol ol ol { list-style: lower-alpha } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-21T18:36:26.267

向外部表添加一个类或 id：

```
<style type="text/css"> 
.outer {border: dashed 1px #333333;} 
</style> 
</head> 
<body> 
  <table class="outer"> 
  <tr><td>before inner table. 
    <table> 
    <tr> 
    <td>Inside inner table.</td> 
    </tr> 
    </table> 
    After inner table. 
    </td> 
  </tr> 
  </table>     
</body> 
```

看[这里](http://jsbin.com/epuca)

如果您无法将 id 或类添加到 HTML 并假设您要设置样式的表不在另一个表中，您可以通过指定哪个元素是以下元素来设置它的样式：

```
div > table {border: dashed 1px #333333;} 
```

看[这里](http://jsbin.com/usire)

尽管该选择器仅在 IE7 中实现，因此如果您需要支持 IE6，则必须使用问题中的覆盖方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-21T18:54:12.760

我同意您对此的最初想法，但这确实取决于具体情况。

始终创建基本规则并添加到样式表，但该规则有例外。

例如，如果您确定表格中的表格绝对不需要应用相同的样式，则使用“表格表格”选择器来设置样式。但是，如果这可能只发生一次，则在父表上设置一个类并将您的“表表”选择器修改为类似于“table.parent 表”的内容。

但是，“父”应该更改为元素的描述性名称，就像日历一样。您不应该以特定样式命名一个类，因为如果样式更改，它就不再有意义了。

# performance - Excel 2007 VBA：SelectionChange 事件的性能

> ID：773934
> 
> 赞同：2
> 
> 时间：2009-04-21T18:25:45.823
> 
> 标签：performance, vba, excel, excel-2007

有没有办法以任何有意义的方式提高 Excel 中以下 VBA 代码的性能？

```
Private Sub Worksheet_SelectionChange(ByVal Target As Range)
   If Not Intersect(Me.Range("Group1"), Target) Is Nothing Then

     With wksData
       .Range("Group1Column").Value = Target.Column
       .Range("Group1Row").Value = Target.Row
     End With
   End If

End Sub 
```

我添加了查看 Group1Column 和 Group1Row 命名范围的条件格式。我不知道我的性能问题是否与 SelectionChange 的过度杀伤或条件格式有关，但我想摆脱明显的滞后。

条件格式是超级基本的（类似于 Column($D3) = Group1Column），它仅用于“吸引眼球”的目的，但它对整体解决方案很有帮助。

我尝试过的一些事情：.ScreenUpdating、.EnableEvents、.Calculations。.ScreenUpdating 确实确保用户在选择下一个单元格之前必须等待，但与我的想法不太一样。

任何提示都会有所帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T21:39:11.787

对我来说闪电很快。您是否在工作簿中进行了许多其他计算？你用的是什么版本？

# c++ - 在 GLUT 中处理 Tab 键

> ID：773935
> 
> 赞同：0
> 
> 时间：2009-04-21T18:26:19.753
> 
> 标签：c++, opengl, glut

我将 OpenGL+GLUT 用于简单的应用程序，但我无法处理“Tab”按键。有人知道如何处理 Tab 键的按下吗？

谢谢

PS：Mac OS 10.5.6，GCC 4.0

## 解决方案

```
void processNormalKeys(unsigned char key, int x, int y){
    if ((int)key == 9) {
        //tab pressed
        ....
    }
....
}

....
int main(int argc, char ** argv) {
    ....
    glutKeyboardFunc(processNormalKeys);
    ....
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T18:41:48.360

我相信点击选项卡会触发正常的键盘回调，键值为 9（选项卡的 ASCII 码）。

# linq-to-sql - 如何控制 Linq to SQL 发出的“SET”语句

> ID：773941
> 
> 赞同：3
> 
> 时间：2009-04-21T18:27:10.687
> 
> 标签：linq-to-sql

有什么方法可以控制 Linq to SQL 发出的“SET”语句？我在 SQL 探查器中看到这些 SET 选项来自 Linq 到 SQL，结果表明“set arithabort off”导致我们的一个 procs 需要 45 秒，而不是 < 1 秒。

```
-- network protocol: TCP/IP
set quoted_identifier on
set arithabort off
set numeric_roundabort off
set ansi_warnings on
set ansi_padding on
set ansi_nulls on
set concat_null_yields_null on
set cursor_close_on_commit off
set implicit_transactions off
set language us_english
set dateformat mdy
set datefirst 7
set transaction isolation level read committed 
```

谢谢，乔恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-21T18:28:58.513

与其使用默认构造函数或传递连接字符串，不如创建您自己的`IDbConnection`，设置您需要的任何选项，然后将其传递给您`DataContext`的构造函数。

# c# - 如何确定 Windows 何时完成重新启动？

> ID：773947
> 
> 赞同：6
> 
> 时间：2009-04-21T18:27:49.983
> 
> 标签：c#, reboot, windows-update

我正在使用 Windows Update API 来更新一堆 VM。随着 Windows 更新，不可避免的重新启动。如果windows box确实完成了重启，谁能想到我可以从远程服务器告诉我的方法？所有的想法或想法将不胜感激。

编辑：因为 VM 位于 Lab Manager 中并使用受保护的配置，WMI 将无法工作，尽管我考虑过在 VM 备份时使用 VM 发送信号。因为等待机器的应用程序可能在任意数量的机器上，所以没有办法可靠地知道通知谁，所以这似乎不合理。然而，时间并不是必需的（尽管我知道当 Service Pack 出现时这会咬我）我在 PING 上取得了很好的成功，然后到目前为止等待 5 分钟，所以我现在要使用它。如果我遇到异常，我将尝试实现虚拟机在它恢复时通知世界。谢谢大家。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-21T18:31:25.543

只需等待它响应 ping。

**根据您的评论：**

1 -[使用这个脚本](https://stackoverflow.com/questions/56644/148431#148431)

2 - 如果您对该脚本有任何错误，请[按照这些说明进行操作。](https://stackoverflow.com/questions/774319/774390#774390)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-21T18:38:52.313

在事件日志中检查此事件：

```
Event Type: Information
Event Source:   EventLog
Event Category: None
Event ID:   6005
Date:       7/27/2007
Time:       12:56:24 PM
User:       N/A
Computer:   IWSDEV
Description:
The Event log service was started. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T18:31:02.783

这个问题的更一般的版本是[我如何知道系统是否已开机？](https://stackoverflow.com/questions/194104/how-do-i-know-if-a-system-has-powered-on)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-21T18:33:49.877

现实情况是，您无法知道它何时完成启动。引导过程是相当异步的，因此您用来确定“引导”完成的任何标准都可能在其他事情完成之前发生。

我建议的是确定你真正想知道的。你在等什么？找到一种方法来确定这是否已经发生，而不必担心“启动”。

如果您只需要知道机器已备份但可能尚未完成所有启动后加载，请在启动序列中放置一些东西或向您的代码发出信号的服务。当这个信号发生时，采取任何你需要的行动。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-21T18:37:18.073

您可以在机器上安装启动程序或服务，以在每次重新启动时发送电子邮件或某种基于网络的发布。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-21T19:16:49.773

Windows 在需要再次重新启动之前只完成了一点点重新启动:-)

如果您特别想查询 VM 的状态，那么您应该查看这些处理 Virtual Server 2005 的 API 的链接：

IVMVirtualMachine 接口...

[http://msdn.microsoft.com/en-us/library/aa368465(VS.85).aspx](http://msdn.microsoft.com/en-us/library/aa368465(VS.85).aspx)

...有一个名为State的属性...

IVMVirtualMachine::State 属性

[http://msdn.microsoft.com/en-us/library/aa368637(VS.85).aspx](http://msdn.microsoft.com/en-us/library/aa368637(VS.85).aspx)

...这将从 VMVMState 枚举中返回一个值...

[http://msdn.microsoft.com/en-us/library/aa368922(VS.85).aspx](http://msdn.microsoft.com/en-us/library/aa368922(VS.85).aspx)

在更一般的层面上，您可能应该定义您想要启动和运行多少 Windows。您是否认为网络堆栈已准备好“重新启动”，或者您是否需要 IIS/SQL 或其他一些应用程序级服务？

我可能会编写一个应用程序来检查服务器的“心跳”——该应用程序很可能与调用 Windows 更新的应用程序相同。然后，您将获得一个不错的“控制台”，向您显示服务器的状态。心跳应用程序可以 ping 服务器、访问静态 html 页面、访问远程事件日志、使用 WMI 或任何您定义的足以考虑重新启动服务器的东西。

# apache-flex - 你可以在 Flex 中有多个轴标签分组吗？

> ID：773956
> 
> 赞同：0
> 
> 时间：2009-04-21T18:29:33.257
> 
> 标签：apache-flex, flex3

我正在尝试构建一个柱形图，按季度将数据分组，然后按年...

```
| Q1 | Q2 | Q3 | Q4 | Q1 | Q2 | Q3 | Q4 |
|        2008       |        2009       | 
```

我一直无法在 flex 文档中找到任何这样的例子。这可以在 Flex 3 中实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-21T18:34:52.183

是的，您实际上是将两个轴堆叠在一起。这是各自的链接：[多轴](http://livedocs.adobe.com/flex/3/html/help.html?content=charts_types_12.html)

# svn - cvs2svn 失败并显示“xxx 不是有效的 .v 文件”

> ID：773958
> 
> 赞同：5
> 
> 时间：2009-04-21T18:30:04.160
> 
> 标签：svn, cvs, cvs2svn

当我想发布它时，我终于找到了我的问题的答案！但是，我仍然会发布它，包括我的答案，以防它帮助其他人：

从 CVS 转换到 Subversion 时，某些文件 cvs2svn 失败并显示消息

```
"xxx is not a valid ,v file" 
```

有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-21T18:30:15.453

事实证明，CVSNT 从 cvs2svn 需要它们的某些文件中省略了最后一个 0xa。可以使用以下 c# 代码轻松解决此问题：

```
static void Main(string[] args)
{
  foreach (string file in Directory.GetFiles(args[0], "*,v", SearchOption.AllDirectories))
  {
    using (FileStream sin=File.Open(file, FileMode.Open, FileAccess.ReadWrite))
    {
      sin.Position=sin.Length-1;
      if (sin.ReadByte()==0x40)
      {
        Console.WriteLine("fixed "+file);
        sin.WriteByte(0xa);
      }
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-18T10:08:11.000

就我而言，文件`symbols`部分存在损坏。`xxx,v`预期的格式是，但有以下情况：`*tag_name*:*tag_rev*`

*   缺失例如通过删除该行来修复。`:*tag_rev*`
    `*tag_name*`

*   多个`*tag_name*`
    例如通过删除第二个标签名称来修复（您删除哪一个可能取决于它们是什么）。`*tag_name1*:*tag_name2*:*tag_rev*`

*   名称/修订分隔符无效。在我的情况下，无效字符始终是（ASCII和`z`之间只有 1 位差异）。例如，通过将替换为 来修复。`:``z`
    `*tag_name*z*tag_rev*`
    `z``:`

为了在我的调查过程中提供帮助，我`print`在`cvs2svn_rcsparse\common.py`. 如果解析符号失败，则打印的最后一个标签就是原因。

```
def _parse_admin_symbols(self, token):
while 1:
  tag_name = self.ts.get()
  # WileCau print the token and tag_name
  print 'token=|%s| tag_name=|%s|' % (token, tag_name)
  if tag_name == ';':
    break
  self.ts.match(':')
  tag_rev = self.ts.get()
  self.sink.define_tag(tag_name, tag_rev) 
```

额外的打印给输出增加了很多噪音，所以只在发生异常时打印可能会更好，但这对我的需要来说已经足够了。

* * *

我还发现这个链接原来不是我的问题，但可能对其他人有帮助。感谢 Christian Haarmann 记录它。

[http://tigris-scm.10930.n7.nabble.com/suggestions-for-cvs2svn-fix-for-error-quot-myfile-txt-v-is-not-a-valid-v-file-quot- td54240.html](http://tigris-scm.10930.n7.nabble.com/suggestions-for-cvs2svn-fix-for-error-quot-myfile-txt-v-is-not-a-valid-v-file-quot-td54240.html)

如果链接失效，总结是有人编辑了`xxx,v`文件并且他们的编辑器用 0x0D/0x0A (CR/LF) 替换了 0x0A (LF)，并且附加字符导致解析器认为文件已损坏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-28T11:30:53.920

我也有这样的错误。当我使用 cvs2git 将 cvs 存储库迁移到 git 时，多个文件会出现此错误。我检测到文件末尾缺少结束**0x40 (@) 。**

所以我的解决方案是：

```
1\. Open the corrupted cvs-history-file e.g. with vim (maybe in binary mode)
2\. Add the missing @ 
```

如果这不能解决问题，则将损坏文件的内容与 RCS 文件格式进行比较：[rcs_man_page](http://www2.research.att.com/~gsf/man/man5/rcsfile.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-06T02:54:41.417

解决此问题的一种方法是运行`rcs log *file,v*`，这可能会为您提供一些见解。

就我而言，我有一些文件缺少@'s，一些文件缺少分号，并且我用来将旧存储库导入到 cvspserver 的工具抛出了一个未引用的版本。

祝你好运！

# c - LZO 解压缓冲区大小

> ID：773962
> 
> 赞同：3
> 
> 时间：2009-04-21T18:30:55.390
> 
> 标签：c, compression, lzo

我在一个项目中使用 MiniLZO 来完成一些非常简单的压缩任务。我用一个程序压缩，用另一个程序解压。我想知道要为解压缓冲区分配多少空间。我对过度分配空间很好，如果它可以省去我必须用一个整数注释我的输出文件来声明解压缩数据应该占用多少空间的麻烦。我怎么知道它可能占用多少空间？

经过一番思考，我认为这个问题归结为：**lzo1x压缩的最大压缩比是多少？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-21T19:24:04.107

由于您同时控制压缩器和解压缩器，因此我建议您将输入压缩为固定大小的块。在我的应用程序中，我在每个块中最多压缩 64KB，然后发出压缩块的大小和压缩数据本身，因此压缩流实际上看起来像一系列压缩块：

```
length_of_block_1
block_1
length_of_block_2
block_2
... 
```

解压缩器只是读取每个压缩块并将其解压缩到 64KB 缓冲区中，因为我知道该块是通过压缩 64KB 块生成的。

希望有帮助，

埃里克·梅尔斯基

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-21T18:58:50.330

解压缩数据的最大大小显然与您首先压缩的数据的最大大小相同。

如果您的输入大小有上限，那么我想您可以使用它，但我不得不说通常的做法是在您的压缩缓冲区中添加一个标头，以指定未压缩的大小。

# virtualization - 个人能否从虚拟化中获得任何真正的好处？

> ID：773966
> 
> 赞同：3
> 
> 时间：2009-04-21T18:31:38.227
> 
> 标签：virtualization

我读了很多文章，最近听到了很多关于虚拟化的讨论。我同意在我的 Mac 上启动 VirtualBox 并运行 Windows 非常好，但是我知道这只是冰山一角。

我读了很多关于公司如何“旋转”虚拟机以及各种其他有趣的事情的文章。但是，当我想玩游戏或类似的东西时，虚拟化是否会对我个人产生影响，而不仅仅是在我的 Mac 上运行 Windows？

关于个人如何从虚拟化中受益的任何建议？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-21T18:36:01.803

1) 使用虚拟化环境作为新软件的沙盒。有一个您想尝试但不太信任的程序？将它自己扔到虚拟环境中。如果它变得具有破坏性，只需重置即可。

2) 使用虚拟化环境进行开发：需要开发和测试一套复杂的安装包？使用虚拟环境，当安装出现故障时，更容易重置到基点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-21T18:36:56.997

我有一个具有多个开发环境（VS 2005、VS2008、SQL Server 2005、2008）的虚拟机，以及安装了各种浏览器和操作系统（XP、Server 2008、Windows 7 等）的测试环境。我喜欢保持我的主机操作系统尽可能干净并进行安装，开发人员。并在虚拟机中进行测试。它需要一个强壮的主人，但一旦你开始这样做，你就再也不会回去了。:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-21T18:54:22.183

它也非常适合测试。您可以使用带有浏览器的旧 Windows 98 机器的图像来测试您的网页、程序安装等。这比保留各种旧硬件进行测试要容易得多。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-21T18:37:11.943

作为开发人员，我家里有一个基于[VMWare Server的服务器。](http://www.vmware.com/products/server/)

好处：

*   可选数量的 Windows2k3/2k8 服务器
*   共享点开发
*   如果出现任何问题，轻松备份和恢复

愿您对 VMWare 的[功能](http://www.vmware.com/products/server/features.html)感兴趣。其中一些与“个人”用户/开发有关，而不仅仅是中小型企业。

虚拟化的其他方式是[云计算](http://de.wikipedia.org/wiki/Cloud_Computing)，但也许它离你的想法还很远。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-21T18:38:34.950

对于我的学校项目，我的团队正在使用托管在我的个人 linux 家庭服务器上的 SVN 服务器。我使用 Windows XP 的虚拟化实例对 SVN 提交进行持续集成和测试。

如果没有 VirtualBox，我将需要额外的硬件（阅读：无法做到这一点，我是学生）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-21T19:04:48.147

我为不懂互联网的老板创建了一个虚拟机，用作网页浏览设备。他仍然可以使用 Internet Explorer（这是他喜欢的），但他不必担心恶意软件，因为每当他关闭 VM 时，我都会设置 VMWare Player 以恢复到已知良好的快照。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-21T18:35:56.580

大多数虚拟化系统允许某种形式的检查点。您可以在进行重大更改之前创建一个检查点，并将其用作一种备份形式。

出于兼容性原因，也可以运行同一操作系统的其他版本。假设您有一个仅在 Windows XP 上运行的程序，但您想运行 Vista。在 VirtualBox 中运行 Windows XP 是解决该问题的一种方法。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-21T18:36:20.853

我们办公室的一个人在虚拟机 (VMWare) 上完成所有工作。然后他定期将机器映像备份到另一个磁盘。这样，当他的笔记本电脑出现故障时（就像最近那样），他可以将映像恢复到另一台破坏 VMWare 的机器上。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-21T18:36:45.907

对于初学者来说，您不必为 2 台以上的物理机器供电，从而节省能源。您可以在单个硬件上运行多个虚拟机。

其次是便携性。如果您从 VM 运行服务器并决定更改主机，则可以轻松地将其移动到新位置。[Jeff 在他的博文Virtual Machine Server Hosting](http://www.codinghorror.com/blog/archives/000984.html)中谈到了这一点。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-04-21T18:36:53.767

您是作为个人开发者还是一般个人来询问？

我认为任何迫使您远程工作的基础设施——针对远程机器或针对虚拟机，都会使您的开发人员处于更加“面向部署”的模式。在本地机器上编程的缺点是让你在构建、错误处理、跟踪等方面松懈。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-04-21T18:39:22.327

在工作中，虚拟化可以极大地提高个人和小型团队的生产力，但我认为“个人”意味着“下班”。

就我自己而言，我很享受在 VMWare Player 下运行 Linux 机器的能力。我可以使用 Apache，玩 Joomla 和其他开源软件，或者做很多整洁的东西，而不必为他们购买两三个新的 boxen。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-04-21T18:40:36.537

我使用[IE Compatibility 虚拟硬盘驱动器](http://www.microsoft.com/downloads/details.aspx?FamilyId=21EABB90-958F-4B64-B5F1-73D0A413C8EF&displaylang=en)在所有版本的 IE 上测试我的 Web 应用程序，而无需安装它们。

**巨大**的时间奖金。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-04-21T18:43:32.787

我有几个虚拟化的 linux，从不费心使用专用计算机或摆弄安装。它们仅用于测试目的，只是为了确保我们的软件在其中任何一个上运行良好而不会出现意外。在我的情况下，虚拟化环境已经足够好，可以节省空间/时间/金钱。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-04-21T18:56:53.283

从我的帖子到[这个问题](https://stackoverflow.com/questions/766271/tips-to-upgrade-workstations-for-development-team/766701#766701)：

我的公司基本上是虚拟化的，以便停止在升级/系统故障上浪费这么多时间。

每当台式机/笔记本电脑出现故障时，我们都必须花费一天的大部分时间来修复它并重新加载软件。

所以，我们出去，为每个人买了 iMac，并在上面加载了[Parallels](http://www.parallels.com)（一种适用于 OSX 的类似 VMware 的产品）。然后我们为每个人制作了一个标准的开发镜像，然后将它复制到每个人的机器上。

本质上，如果有人的配置搞砸了，我们只需加载一个新的图像并继续使用卡车。节省了很多时间。

一些额外的好处：

当新软件发布时，我们只需制作一个新图像并分发它。不是操作系统重新安装或类似的东西。如果硬件发生变化，没关系，只需移动图像即可。您可以同时运行多个操作系统进行测试您可以在当前图像中拍摄“快照”，如果您真的搞砸了，可以恢复。在同一台机器上进行多个构建......因为您可以运行多个操作系统。令人惊讶的是，虚拟化系统的开销非常低。

我们仅在真机上运行该软件以进行性能调整/测试。

# zend-framework-mvc - 如何使用 Zend Framework 提供静态页面

> ID：773968
> 
> 赞同：6
> 
> 时间：2009-04-21T18:33:11.157
> 
> 标签：zend-framework-mvc

我们目前在我们的网站上使用 Zend 框架和 MVC 模式。我们有大量静态页面，它们位于网站的随机区域。这些页面不是可以完全绕过 ZF 的简单 HTML 页面……它们会参与 Zend_Layout 等。

在不为每个随机页面创建单独的操作/控制器的情况下提供这些页面的最佳方式是什么？重做页面的布局，使它们都属于“misc”控制器或其他东西不是一种选择，页面需要保持在我们的 URL 层次结构中以用于 SEO 目的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-21T23:43:42.673

如果我正确理解了这个问题：

*   您有一堆要应用布局的静态内容。
*   这些静态内容页面已经有您不想破坏的现有网址

Zend 实际上将 URL 与 $controller->action() 分开，碰巧 Zend 的 MVC 部分有一个默认设置来执行此操作。您仍然可以创建一个接收任何随机 url 的“misc”控制器，您只需要定义一些自定义路由。

[http://framework.zend.com/manual/en/zend.controller.router.html](http://framework.zend.com/manual/en/zend.controller.router.html)

引用 Zend Framework 网站示例：

```
$route = new Zend_Controller_Router_Route_Static(
    'login',
    array('controller' => 'auth', 'action' => 'login')
);
$router->addRoute('login', $route); 
```

> 上述路由将匹配 [http://domain.com/login](http://domain.com/login)的 URL ，并分派到 AuthController::loginAction()。

可以在同一页面上找到更多使用模式匹配的雄心勃勃的示例。

# c# - C#：使用泛型将对象转换为无符号数字类型

> ID：773971
> 
> 赞同：3
> 
> 时间：2009-04-21T18:33:51.170
> 
> 标签：c#, generics, casting, unboxing

我正在尝试编写一些代码来将来自对象类型字段（来自 DataSet）的数据转换为它的目标（类型化）字段。我正在（至少尝试）使用动态转换。它似乎适用于字符串、int、DateTime。

但它不适用于无符号类型（ulong、uint）。下面有一个简单的代码，显示了我想要做什么。如果将 ul var 类型从 ulong 更改为 int，它可以正常工作。

有人有线索吗？

```
public class console
{

    public static void CastIt<T>(object value, out T target)
    {
        target = (T) value;
    }

    public static void Main()
    {
        ulong ul;
        string str;
        int i;
        DateTime dt;

        object ul_o = (object) 2;
        object str_o = (object) "This is a string";
        object i_o = (object)1;
        object dt_o = (object) DateTime.Now;

        Console.WriteLine("Cast");

        CastIt(ul_o, out ul);
        CastIt(str_o, out str);
        CastIt(i_o, out i);
        CastIt(dt_o, out dt);

        Console.WriteLine(ul);
        Console.WriteLine(str);
        Console.WriteLine(i);
        Console.WriteLine(dt.ToString());
    }

} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-21T18:42:23.303

正如安德鲁所说，问题是你不能从一个装箱`int`的到`ulong`.

两种选择：

1)`ulong`改为框 a：

```
object ul_o = (object) 2UL; 
```

或者

```
ulong tmp = 2;
object ul_o = tmp; 
```

2）`CastIt<T>`利用`Convert.ChangeType`：

```
public static void CastIt<T>(object value, out T target)
{
    target = (T) Convert.ChangeType(value, typeof(T));
} 
```

这有点臭，但适用于您的示例代码。如果您可以在真实代码中使用第一种方式，那就更好了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-21T18:39:28.707

那是因为你的 ul_o 对象是一个整数，而不是一个无符号数。当你在你的转换函数中时，你是在将目标数据放在`object`. 显式/隐式转换运算符（这是您需要使用的）仅当您在实现它们的类型的上下文中拥有对象时才起作用（因为这些运算符在编译时静态链接而不是在运行时动态链接）。

如果这真的是你想要做的，而不是直接演员，使用这个：

```
target = (T)Convert.ChangeType(value, typeof(T)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T18:39:20.237

CLR 不允许您以这种方式进行转换，因为您的装箱值类型实际上是一个 int：

```
object ul_o = (object)2; 
```

当您尝试投射到 a`ulong`时，您不能，因为您不能将 a`int`直接拆箱到`ulong`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-21T18:44:35.730

我认为你想要的更像（未经测试，但方向正确）......

```
public static void CastIt<T>( object value ) where T : IConvertable
{
  return ( T )Convert.ChangeType( value , typeof( T ) );
} 
```

编辑：被Skeet舀！:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-21T18:46:10.470

这不是您问题的真正答案；只是想提一下，如果您使用的是 .Net 3.5，则[Linq to DataSets](http://blogs.msdn.com/adonet/archive/2007/01/26/querying-datasets-introduction-to-linq-to-dataset.aspx)代码包括您正在实现的功能。具体的扩展方法是 DataRow 类上的 Field<T>()。

# time - (MS-DOS) 时间延迟

> ID：773977
> 
> 赞同：3
> 
> 时间：2009-04-21T18:35:28.513
> 
> 标签：time, dos, delay

我通过了几种导致时间延迟的方法，例如 pings 和 dirs。尽管它们都不是真正精确的，但是否有适当的方法来造成时间延迟？

我听说过一些事情，尽管它们不能在所有计算机上运行，​​在我的 Windows XP 和大学的 Windows NT 上都没有。

浏览 Google 上的所有文件需要很长时间才能找到一个好的答案，而且由于我还没有在 Stack Overflow 上找到问题，所以我认为自己创建问题可能会很好；）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-21T18:39:29.190

[睡觉](http://malektips.com/xp_dos_0002.html)

它将允许您执行此操作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-21T18:48:33.070

`<warning>This is a hack</warning>`

使用您最喜欢的编程语言（MS-DOS 批处理除外）并创建一个应用程序，该应用程序接受一个参数，即等待的毫秒数，然后，只需从批处理文件中调用该程序以休眠所需的时间。

据我所知，这是在 DOS 中唯一可靠的方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-21T18:50:59.397

如果您没有能力将另一个程序与批处理文件一起发送，请使用[DEBUG](http://en.wikipedia.org/wiki/DEBUG_(DOS_Command))即时编写睡眠命令，然后执行它。

编辑：上面的答案有点开玩笑。我不会运行其中包含一些调试技巧的批处理文件。我相信在批处理文件中使用延迟的传统方式是[CHOICE](http://en.wikipedia.org/wiki/Choice_(command)) commad。

```
type nul|choice /c:y /t:y,nn > nul 
```

当然，这在 XP 中不起作用，因为那样 WAAYY 太方便了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-21T18:46:18.910

“...正确的方式....”

你不能在 DOS 中这样做。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-09-28T07:27:46.287

根据您机器的速度，可以达到几毫秒的精度。

我刚刚创建了这样一个批处理，虽然我不会与你分享实际代码，但我会给你一些指示：

1.  使用 %time% 变量，并划分为子字符串（没有“：”和“。”） - 一个子字符串将获得秒，另一个 - 分钟（您可以添加小时，延迟超过一个小时，甚至包含日期)

2.  使用 set /A 将时间变量转换为 1 个整数，表示自舍入小时 (X:00:00.00) 以来经过的秒数。将输入的延迟（以秒为单位）添加到其中。

3.  创建一个短循环，将组合 var 的值（在第 2 节中解释）与当前时间（需要在此循环内重新计算当前组合的 min+sec 值）进行比较，并在匹配为真时退出循环。

这里的一个主要错误修复 - 您需要将任何前面的零截断为即将在“set /A”命令中评估的变量。我注意到，当使用前面带有 08 或 09（或简单的 08 或 09）的整数时，控制台的求值器（对于此命令）会返回错误。

备注：这仅适用于启用命令扩展。要对其进行测试，请在例程开始时使用以下内容：

```
verify other 2>nul
setlocal enableextensions
if errorlevel 1 goto err 
```

然后添加一个名为“err”的错误处理程序子程序。

如果您想在同一个文件中继续批处理，请在循环子例程之后使用“endlocal”。

顺便说一句，这仅适用**于**Windows XP Service Pack 2 或 3。

# javascript - 页面加载时阻止浏览器跳转到#name

> ID：773981
> 
> 赞同：1
> 
> 时间：2009-04-21T18:36:16.407
> 
> 标签：javascript, jquery, html

我在名为“登录”的 jQuery 对话框中有一个表单。在 JavaScript 中，我检测“#login”是否在 URL 中——如果是，它会显示登录对话框。在 FF/Safari/Chrome 中它可以正常工作，但在 IE6/7 中，当显示对话框时，浏览器页面会跳到表单顶部。我想防止这种情况发生。

[我在这里](http://blog.rebeccamurphey.com/2007/12/04/anchor-based-url-navigation-with-jquery/)找到了我的问题的答案，它给出了这个示例代码：

```
$('a.anchor').remove().prependTo('body'); 
```

我将“a.anchor”更改为“form.anchor”，但它无法正常工作。当我第一次加载 mydomain/#login 时，IE 仍然跳到表单的顶部。然后，如果我刷新页面，它会再次显示对话框，但不会向下跳转。

知道如何在全球范围内阻止 IE 跳转到任何表单/锚名称吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-21T18:57:05.577

我建议使用查询参数或其他东西，例如 page.html?showlogin=true。URL 上的 page.html#xxxxx 旨在将浏览器滚动到页面上的该 ID。

[http://www.w3schools.com/html/html_links.asp](http://www.w3schools.com/html/html_links.asp)中途解释了name 属性。

否则，您将做一些混乱的黑客攻击来绕过浏览器做他们应该做的事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-21T18:47:15.757

........不要把你不想在你的代码中使用的命名锚？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T05:37:09.423

以这种方式使用哈希标记是有正当理由的。在 Ajaxian 应用程序中，它可以帮助管理浏览器历史记录。

所有浏览器，包括 IE，都应该忽略 location.hash，除非有一个命名的锚点——除非 IE 喜欢跳到任何具有该 ID 或 NAME 的元素。所以如果你有

```
<form name="login" ... 
```

或者

```
<form id="login" ... 
```

甚至

```
<div id="login"><form name="somethingElse"... 
```

这可能会导致 IE 将其视为传统的哈希标记并跳下。

# c++ - 分析磁盘访问

> ID：773982
> 
> 赞同：5
> 
> 时间：2009-04-21T18:36:18.107
> 
> 标签：c++, multithreading, mfc, profiling, disk

目前我正在开发一个读取和写入磁盘的 MFC 应用程序。有时这个应用程序运行得非常快，有时它运行得非常慢。我猜这是因为涉及到磁盘访问，因此我想对其进行分析。这些是这方面的一些问题：

(1).目前我正在使用[AQTime](http://www.automatedqa.com/products/aqtime/)分析器来分析应用程序。有没有人尝试过使用它来分析磁盘访问？或者我可以使用任何其他可用的工具吗？

(2)。我应该查看哪些最重要的磁盘参数？

(3)。如果我有多个线程试图从磁盘读取和写入数据，它会影响性能吗？即我最好对磁盘进行单线程访问吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T18:42:57.483

您可以为此使用[Windows 性能工具包](http://msdn.microsoft.com/en-us/library/cc305187(loband).aspx)。您可以为磁盘 I/O 事件启用跟踪提供程序，并查看每个事件的 I/O 时间和磁盘服务时间。不过，它确实有一点学习曲线。这还可以让您确定哪些文件 I/O 实际导致对磁盘的实际访问，而不是由缓存管理器处理。

最重要的参数是磁盘服务时间和队列长度。磁盘服务时间是磁盘实际服务请求所花费的时间。队列长度指示您的磁盘请求是否在其他请求之后备份。

对于具有读取和写入功能的许多线程 - 许多磁盘在面对具有后台写入的读取时性能很差。如果您有不同的线程对磁盘上的随机位置执行大量磁盘 I/O，您可能最终会饿死某些请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-23T00:01:55.867

我要做的是，如果您不能同时暂停所有线程并检查它们的状态，请专注于其中一个并暂停它，而它“非常慢”。[这是一个鲜为人知但有效的技术。](https://stackoverflow.com/questions/375913/what-can-i-use-to-profile-c-code-in-linux/378024#378024)

由于它与可能的速度相比非常慢，因此无论它在等待什么，它都在等待大约 99% 的时间，所以当你暂停它时，你会看到它。无论是一次大等待，还是无数次等待，都是如此。查看整个调用堆栈。罪魁祸首可能在堆栈中间的某个地方。

如果您不确定，请暂停两到三遍。罪魁祸首将出现在所有堆栈样本上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T18:50:58.070

为了帮助您（2）：

1.  尝试批量写入磁盘以避免许多小的写入调用。完成刷新缓冲区后，调用 commit。提交（又名 fsync）是一项昂贵的操作，因此当有大量小写入时更是如此。
2.  在 Windows 文件句柄上，您可以尝试使用[FILE FLAG WRITE THROUGH](http://support.microsoft.com/kb/99794)来提高写入速度。假设 commit 不必使用使用此标志的句柄调用。
3.  如果您正在写入磁盘的数据也将通过读取访问，请考虑首先写入内存结构，让另一个线程从该结构中读取以将其写入磁盘。这将有助于避免调用从您刚刚写入的磁盘读取数据。

希望这会有所帮助....****`